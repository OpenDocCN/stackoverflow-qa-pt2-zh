# StackOverflow 问答 16093000-16093999

# android - Millennial Media 5.0 Android中的白色矩形空间

> ID：16093003
> 
> 赞同：1
> 
> 时间：2013-04-18T21:01:59.807
> 
> 标签：android, millennial-media

白色矩形区域（显示 MMedia 横幅时覆盖整个屏幕）存在于 Android 4.0+ 的设备上，同时仅使用纯 Java 代码。添加指定宽度和高度的行并不能解决问题（白屏仍然存在）。希望千禧年团队能对此问题进行调查。干杯

```
MMSDK.initialize(this);

millennialView = new MMAdView(this);
millennialView.setApid(MILLENNIAL_BANNER_ID);
millennialView.setId(MMSDK.getDefaultAdId());

RelativeLayout.LayoutParams lay2 = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
lay2.addRule(RelativeLayout.ALIGN_PARENT_TOP);
layout.addView(millennialView, lay2);

Map<String, String> metaData = new HashMap<String, String>();
metaData.put("width", "480");
metaData.put("height", "60");

MMRequest mmediaRequest = new MMRequest();
mmediaRequest.setMetaValues(metaData);
millennialView.setMMRequest(mmediaRequest);
millennialView.setListener(getMillennialListener());

millennialView.getAd(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:58:31.990

这与将 MAdView 应用于布局层次结构时的大小有关。由于 WebView 的内部更改，MMAdView 无法识别 WRAP_CONTENT。因此，Millennial 的文档要求您明确设置广告尺寸。请参阅此处的第二步：http: [//docs.millennialmedia.com/android-SDK/AndroidBannerAds.html](http://docs.millennialmedia.com/android-SDK/AndroidBannerAds.html)

一个有趣的副作用：如果您使用中介合作伙伴（例如 AdMob 或 MoPub），则必须对其横幅视图小部件（分别为 AdView 和 MoPubView）执行相同操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:37:24.743

我最终将所有 MMedia 相关代码放入 xml 文件并用 android:layout_width="480dp" android:layout_height="60dp" 包装它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-15T22:08:18.220

最新的 MMedia APi 5.2 也有同样的问题。

我使用列表视图来附加 Adview。使用匹配内容作为高度。

经过一些测试，我发现横幅广告仅在我拥有的设备上的 Android 4.04 中占据整个屏幕。4.4和姜饼似乎还可以。

这是我解决问题的代码：

```
float density = getResources().getDisplayMetrics().density;
if(Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB_MR2) {
    height = display.getHeight();
    width = display.getWidth();
} else {
    Point size = new Point();
    display.getSize(size);
    height = size.y;
    width = size.x;
}

LinearLayout layout = (LinearLayout)findViewById(R.id.llBannerAd);
if (width/density > 727 && height/density > 600) {
        mAdView.setAdSize(AdSize.LEADERBOARD);
        layout.setLayoutParams(new LinearLayout.LayoutParams(width, 91));
} else if (width/density > 467 && height/density > 400) {
    mAdView.setAdSize(AdSize.FULL_BANNER);
    layout.setLayoutParams(new LinearLayout.LayoutParams(width,61));
} else {
        mAdView.setAdSize(AdSize.BANNER);
    layout.setLayoutParams(new LinearLayout.LayoutParams(width, 55));
} 
```

# java - Java - 如何使用鼠标侦听器突出显示正方形。（使用jframe）

> ID：16093004
> 
> 赞同：0
> 
> 时间：2013-04-18T21:02:02.317
> 
> 标签：java, swing, jframe, paint, actionlistener

我正在创建一个程序，但我现在卡住了，我希望干旱板的瓷砖在突出显示时会发出另一种颜色，但我对 Actionlistners 不太好，有人可以帮我吗？

我使用了几个类文件，这是每个类文件的代码。

这是一项统一的工作，所以当我学习时，我不希望将代码提供给我，而是继续使用一些片段和有用的建议。类文件中的代码我认为由于错误而无法编译，因为我还不知道如何使用 actionlistners 或 mouselisteners。

总而言之，当我的鼠标悬停在游戏板上并且瓷砖改变颜色时，我需要一个动作监听器。

因为我只能发布 2 个链接，所以我将在这里给出 3 个最短的类文件。

*编辑*：为方便起见，我已经摆脱了链接。 *编辑 2*：如果这似乎是一个初学者的问题，我也很抱歉，因为我是初学者。 *编辑 3*我已经编辑了 Jframe 类以接受鼠标侦听器现在我需要帮助更改图块的颜色，如何从此类文件中更改颜色？

*编辑 4*好的，我将颜色变量编辑为公共我想如果这就是你的意思，我还添加了你的代码，但我不知道哪个类是我的鼠标监听器，我不知道如何以你的方式添加颜色大部头书。

*编辑 5*好的，我绑着让这个 SSCCE 不确定我是否能够做到，这是你的意思吗？如果是这样，可以帮助我吗？

```
import java.awt.*;
import java.util.ArrayList;
import javax.swing.*;
import java.awt.event.MouseListener;
import java.awt.event.MouseEvent;

public class Board extends JPanel 
{

private void setupPieces(int numRows)
{
int numPieces = ((numRows * numRows) - (2 * numRows)) / 4;
for (int i = 0; i < numPieces; i++)

{
    DraughtsPiece p = new DraughtsPiece(DraughtsPiece.LIGHT_PIECE_COLOUR);
    lightPieces.add(p);

    p = new DraughtsPiece(DraughtsPiece.DARK_PIECE_COLOUR);
    darkPieces.add(p);

    DraughtsPiece p = new DraughtsPiece(DraughtsPiece.LIGHT_PIECE_COLOUR);
    lightPieces.add(p);

     p = new DraughtsPiece(DraughtsPiece.DARK_PIECE_COLOUR);
     P.addMouseListener(new <Board.class>);
    darkPieces.add(p);

     }

     public void mouseEntered(MouseEvent m){
      ((DraughtsPiece) m.getSource()).color=<highlight color goes here>;
  }

  public void mouseExited(MouseEvent m){
      ((DraughtsPiece) m.getSource()).color=<normal color goes here>;
  }
  }

  darkPieces.add(p);
}

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:33:14.127

对于悬停，您不需要 ActionListener。ActionListener 仅用于单击 JButton、JMenuItem 等。如果您实现 MouseListener，那么只要鼠标进入或退出您的其中一个部分，就会调用`mouseEntered(MouseEvent)`和方法。`mouseExited(MouseEvent)`

编辑：针对您的评论，您可以尝试在 DraughtsBoard.setupPieces 方法中使用此代码：

编辑 2：我认为您在鼠标悬停后需要重新绘制，但我不确定，因为您删除了很多代码。我添加了代码以在一块颜色更改后重新绘制电路板。

```
 DraughtsPiece p = new DraughtsPiece(DraughtsPiece.LIGHT_PIECE_COLOUR);
      lightPieces.add(p);

      p = new DraughtsPiece(DraughtsPiece.DARK_PIECE_COLOUR);
      p.addMouseListener(new MouseAdapter(){
          public void mouseEntered(MouseEvent m){
              ((DraughtsPiece) m.getSource()).color=<highlight color goes here>;
              DraughtsBoard.this.repaint(); // see my note
          }
          public void mouseExited(MouseEvent m){
              ((DraughtsPiece) m.getSource()).color=<normal color goes here>;
              DraughtsBoard.this.repaint();
          }
      });
      darkPieces.add(p); 
```

并公开 DraughtsPiece.color。

注意：您只能在像这样的内联类中使用 DraughtsBoard.this。如果您决定不偷懒并且实际上让 DraughtsPiece 实现 MouseListener，那么您将需要一些其他方法来访问 DraughtsBoard，例如保存它的实例的公共静态变量

MouseAdapter 是 MouseListener 的扩展，它使所有扩展类不必实现 MouseListener 的所有方法。这意味着我可以只实现 mouseEntered 和 mouseExited 并省去 MouseListener 中我不需要的其他方法。

# java - 使用 GridBagLayout 定位

> ID：16093005
> 
> 赞同：1
> 
> 时间：2013-04-18T21:02:05.137
> 
> 标签：java, swing, gridbaglayout

我对 GridBagLayout 有定位问题：我尝试在中心（顶部）放置一个标签，但使用我的代码（出于我没有看到的原因），我有这个： ![在此处输入图像描述](https://i.stack.imgur.com/OrwUI.png)

我希望标签 Test 位于窗口的顶部和中心。有人可以解释一下这种不良定位的原因吗？

我的程序：

```
public class Accueil extends JFrame {

    private JPanel home = new JPanel();
    private GridBagConstraints grille = new GridBagConstraints();
    private JLabel title = new JLabel("Test");

    public Accueil() {
        home.setLayout(new GridLayout());
        init_grille();
        init_title();

        this.add(home);
        this.setSize(600,600);
        this.setTitle("Test One");
        this.setLocationRelativeTo(null);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible(true);

    }

    private void init_grille() { 
        grille.fill = GridBagConstraints.BOTH;
        grille.weightx = 2;
        grille.weighty = 5;
        grille.ipady=grille.anchor=GridBagConstraints.CENTER;;

    }

    private void init_title() {
        grille.fill = GridBagConstraints.HORIZONTAL;
        grille.gridx = 0;
        grille.gridy = 0;
        home.add(title,grille);
    }

    public static void main(String [] args) {
        new Accueil();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:06:19.163

这无济于事：

```
home.setLayout(new GridLayout()); 
```

你可能想要：

```
home.setLayout(new GridBagLayout()); 
```

此外，这些更改应该有效：

```
private void init_title() {
      grille.fill = GridBagConstraints.NONE;
      grille.gridx = 0;
      grille.gridy = 0;
      grille.anchor = GridBagConstraints.NORTH;
      home.add(title,grille);
  } 
```

# ruby - Ubuntu 12.10 - Ruby gem rmagick 缺少依赖问题

> ID：16093006
> 
> 赞同：4
> 
> 时间：2013-04-18T21:02:06.007
> 
> 标签：ruby, ubuntu, imagemagick

像许多其他人一样，我在运行捆绑安装时在 Ubuntu 上安装 rmagick 时遇到了麻烦。

我在捆绑安装命令中收到此错误：

```
Installing rmagick (2.13.1) 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.8.7-p371/bin/ruby extconf.rb 
checking for Ruby version >= 1.8.5... yes
checking for gcc... yes
checking for Magick-config... no
Can't install RMagick 2.13.1\. Can't find Magick-config in /usr/local/rvm/gems/ruby-1.8.7-p371/bin:/usr/local/rvm/gems/ruby-1.8.7-p371@global/bin:/usr/local/rvm/rubies/ruby-1.8.7-p371/bin:/usr/local/rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/local/rvm/rubies/ruby-1.8.7-p371/bin/ruby

Gem files will remain installed in /home/selfsale/.bundler/tmp/2908/gems/rmagick-2.13.1 for inspection.
Results logged to /home/selfsale/.bundler/tmp/2908/gems/rmagick-2.13.1/ext/RMagick/gem_make.out

An error occurred while installing rmagick (2.13.1), and Bundler cannot continue.
Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling. 
```

然后我做了一些搜索，发现了一些添加缺失库的建议：

sudo apt-get 安装 libmagick9-dev：

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Package libmagick9-dev is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source
However the following packages replace it:
  graphicsmagick-libmagick-dev-compat

E: Package 'libmagick9-dev' has no installation candidate 
```

sudo apt-get install graphicsmagick-libmagick-dev-compat：

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 graphicsmagick-libmagick-dev-compat : Depends: libgraphicsmagick1-dev but it is not going to be installed
                                       Depends: libgraphicsmagick++1-dev but it is not going to be installed
E: Unable to correct problems, you have held broken packages. 
```

sudo apt-get install libmagickwand-dev：

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 libmagickwand-dev : Depends: libmagickcore-dev (= 8:6.6.9.7-5ubuntu3.2) but it is not going to be installed
E: Unable to correct problems, you have held broken packages. 
```

sudo apt-get 安装 libmagickcore-dev：

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 libmagickcore-dev : Depends: libbz2-dev but it is not going to be installed
                     Depends: libfreetype6-dev but it is not going to be installed
                     Depends: libpng-dev
                     Depends: librsvg2-dev but it is not going to be installed
                     Depends: libwmf-dev but it is not going to be installed
                     Depends: libx11-dev but it is not going to be installed
                     Depends: libxext-dev but it is not going to be installed
                     Depends: libxt-dev but it is not going to be installed
E: Unable to correct problems, you have held broken packages. 
```

sudo apt-get install libmagick++-dev：

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 libmagick++-dev : Depends: libmagickcore-dev (= 8:6.6.9.7-5ubuntu3.2) but it is not going to be installed
                   Depends: libmagickwand-dev (= 8:6.6.9.7-5ubuntu3.2) but it is not going to be installed
E: Unable to correct problems, you have held broken packages. 
```

似乎任何安装正确软件包的尝试都会出现此问题。

我刚刚看到一篇关于从源代码安装 imagemagick 的帖子，所以我要尝试一下，但如果有人有更好的想法，我很想听听他们的意见。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-20T11:10:16.813

我找到了解决方案：

```
sudo apt-get install aptitude 
```

然后开火：

```
sudo aptitude install graphicsmagick-libmagick-dev-compat 
```

当被问及：

```
The following actions will resolve these dependencies:
 Keep the following packages at their current version
1)     graphicsmagick-libmagick-dev-compat [Not Installed]
2)     libexif-dev [Not Installed]
3)     libgraphicsmagick++1-dev [Not Installed]
4)     libgraphicsmagick1-dev [Not Installed] 
```

答案：“n”

```
Accept this solution? [Y/n/q/?] n 
```

在第二个问题中：

```
The following actions will resolve these dependencies:

 Downgrade the following packages: 
1) libexif12 [0.6.20-2ubuntu0.1 (now) -> 0.6.20-2 (precise)] 
```

答案：“Y”或按 ENTER

```
Accept this solution? [Y/n/q/?] 
```

等到任务结束；）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-18T21:14:28.193

我刚刚在我的笔记本电脑（Ubuntu 13.04）上试过。

```
gem install rmagick 
```

也失败了。然后我做了

```
sudo apt-get install libmagick++-dev 
```

并且 rmagick 安装没有问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-20T11:38:28.083

这个解决方案毕竟比之前显示的更重要，因为它删除了：

*graphicsmagick-libmagick-dev-compat*

但解决了（在“捆绑安装”中）的问题：

```
checking for wand/MagickWand.h... no 
```

如我的第二篇文章所示，输入提示：

```
sudo aptitude install libmagickwand-dev 
```

在：

```
The following actions will resolve these dependencies:

  Keep the following packages at their current version
1)      libatk1.0-dev [Not Installed]
2)      libcairo2-dev [Not Installed]
3)      libexpat1-dev [Not Installed]
4)      libgdk-pixbuf2.0-dev [Not Installed]
5)      libglib2.0-dev [Not Installed]
6)      libgraphviz-dev [Not Installed]
7)      libgtk2.0-dev [Not Installed]
8)      libmagickcore-dev [Not Installed]
9)      libmagickwand-dev [Not Installed]
10)     libpango1.0-dev [Not Installed]
11)     librsvg2-dev [Not Installed] 
```

回答：

```
Accept this solution? [Y/n/q/?] n 
```

其次：

以下操作将解决这些依赖关系：

```
 Remove the following packages: 
1 ) graphicsmagick-libmagick-dev-compat
Install the following packages:
2)libcairo-script-interpreter2 [1.10.2-6.1ubuntu2 (precise)]
[..] 
```

答案：“是”

```
Accept this solution? [Y/n/q/?] 
```

任务完成后，你可以很容易地`'bundle install'`在你的项目目录中运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-24T18:54:46.357

尝试一起安装 imagemagick 和 libmagickwand-dev：

```
sudo apt-get install imagemagick libmagickwand-dev 
```

这允许 apt 正确解决依赖关系。（在 Ubuntu 12.04 上测试）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-14T06:33:17.513

```
sudo apt-get install libmagick++-dev 
```

rmagick 安装成功

# perl - 用于比较和排序具有不同字数的 2 个文件的命令

> ID：16093008
> 
> 赞同：0
> 
> 时间：2013-04-18T21:02:34.697
> 
> 标签：perl, unix, compare

您好，我有 2 个内容混乱的文件。例如，文件 1 可能有大约 100 个字符串，一个在另一个之下，文件 2 有 200 个。

就像是

```
文件1 a-->001 b-->002 c-->003 d-->004 e-->005
文件2 b-->001 c-->003 d-->009 e-->005 z-->026 y-->025 0-->15 p-->16 a--> 001

```

我希望它像这样安排，以便我可以看到相应的差异

```
文件1 a-->001 b-->002 c-->003 d-->004 e-->005
文件2 a-->001 b-->001 c-->003 d-->009 e-->005 z-->026 y-->025 0-->15 p-->16

```

我尝试了排序命令 sort file1 和 sort file2 和 diff -y -suppress-common-lines file1 file2 >diff.txt 但是当我说 10 个以 a 开头的单词时，这个就搞砸了。所以它会显示所有 10 个 a 后跟 b .. 那么还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:05:30.627

您可以使用这个 perl 脚本：

```
#!/usr/bin/perl
use strict;

if ($#ARGV != 1)
{
    print "\nUsage: test.pl File1 File2\n\n";
    exit();
}

my $file1 = getFile($ARGV[0]);
my $file2 = getFile($ARGV[1]);

my $r = {};
while (my ($k, $v) = each %$file1)
{
    if (!exists($file2->{$k}))
    {
        $r->{$k} = "[$v, undef]";
    }
    elsif ($v ne $file2->{$k})
    {
        $r->{$k} = "[$v, $file2->{$k}]";
    }
    delete $file2->{$k};
}
while (my ($k, $v) = each %$file2)
{
    $r->{$k} = "[undef, $v]";
}

foreach (sort keys %$r)
{
    print "$_ -> $r->{$_}\n";
}

sub getFile($)
{
    my $f;
    return open($f, shift()) ? return { (join('', <$f>) =~ /[\s\n\r^](\w+)\s*-+>\s*(\d+)/g) } : {};
} 
```

# json - 在新 POST 中复制取自 Fiddler 的 POST 数据

> ID：16093009
> 
> 赞同：0
> 
> 时间：2013-04-18T21:02:39.330
> 
> 标签：json, post

我正在尝试复制我在 Fiddler 中捕获的帖子，我有一个看起来像 JSON 的变量，但我不知道如何在 POST 字符串中复制它。

我有（来自 Fiddler）： {"var1":"string1", "params":{"1":"string2", "2":50, "3":50, "4":"string3"}, "var2":"string4"}

所以我的问题是如何在 POST url 中表示“params”变量？

目前我有 ...[URL]?var1=string1&(PARAM STUFF)&var2=string4。我在 PARAM STUFF 地方放了什么？

谢谢！

# xml - dc:xml 提要中的创建者

> ID：16093011
> 
> 赞同：1
> 
> 时间：2013-04-18T21:02:41.827
> 
> 标签：xml, google-plus

我发现一些用于 Google+ 作者身份的 CMS 插件添加到 rss 文件 dc:creator 中，除非它被定义，否则它是无效的。我应该将 dc:creator 保留在 XML 提要中吗？它有什么用吗？

# php - CakePHP practices - Using regular PHP file outside of MVC structure

> ID：16093016
> 
> 赞同：1
> 
> 时间：2013-04-18T21:02:56.720
> 
> 标签：php, javascript, cakephp

My app works fine, but I'm not sure if it's considered "bad practice" with what I'm doing for a particular knockout.js form.

I'm using CakePHP as the backend and knockout.js for a form on one of my views. On this view, the JavaScript file for the Knockout.js form containing the MVVM goodies is included. So, this knockout form accesses the JS script, and one of the functions involves this JS script sending a request out to a different PHP file. Right now this file is just in the root directory of my folder (not in the app directory), and since it's **only interacting with the JavasScript directly and not CakePHP** I'm wondering if this is a no-no. I guess you could think of it as this PHP file is interacting with the Knockout "system" and not the CakePHP "system".

I made this file a while back to do some calculations and it just seems easier to leave it this way considering I don't need a view or anything displayed from it. JSON format data is sent to it, and it sends modified data back to JavaScript in JSON format. Basically this php file only interacts with JavaScript and never with the CakePHP structure.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:27:26.047

如果它与 Cake 模型/控制器/...或任何东西没有任何关系。我认为它在 MVC 之外没有问题。它只能让它更快，而不必经过框架的路由和调度。

但是另一方面，如果它不对服务器上的数据做任何事情，那你为什么还需要服务器呢？你不能将逻辑移植到客户端吗？

# visual-studio-2012 - SQL Server 2012：从 nvarchar 转换为数字时出错

> ID：16093019
> 
> 赞同：0
> 
> 时间：2013-04-18T21:03:04.973
> 
> 标签：visual-studio-2012, sql-server-2012

我正在尝试在我的应用程序中获取我的数据库以通过电话号码进行搜索。我已经进入“搜索条件生成器”屏幕，但我似乎无法正确查询。

这是我尝试过的查询，当我收到“从 nvarchar 转换为数字”错误时：

```
SELECT        phoneNumber, serviceDate, firstName, lastName, billingAddress, emailAddress, vehicleMake, vehicleModel, vehicleYear, vehicleColor, vehicleMileage
FROM            [Table]
WHERE        (phoneNumber LIKE @phoneNumber + N'%') 
```

这是创建的表：

```
CREATE TABLE [dbo].[Table] (
    [phoneNumber]    NUMERIC (18)  NOT NULL,
    [serviceDate]    DATE          NULL,
    [firstName]      NCHAR (10)    NULL,
    [lastName]       NCHAR (10)    NULL,
    [billingAddress] NVARCHAR (50) NULL,
    [emailAddress]   NVARCHAR (50) NULL,
    [vehicleMake]    NCHAR (10)    NULL,
    [vehicleModel]   NCHAR (10)    NULL,
    [vehicleYear]    INT           NULL,
    [vehicleColor]   NCHAR (10)    NULL,
    [vehicleMileage] INT           NULL,
    CONSTRAINT [PK_Table] PRIMARY KEY CLUSTERED ([phoneNumber] ASC)
); 
```

如果需要VB代码，我也会提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:24:47.273

如果您要将电话“数字”视为字符串，为什么要将它们存储为数字？你可以这样做：

```
WHERE CONVERT(VARCHAR(32), phoneNumber) LIKE @phonenumber + '%'; 
```

（另请注意，您在这里不需要 Unicode - 没有变音符号的数字。）

但最好更改列恕我直言的数据类型。

# java - 使用 Java 玩 SecureSocial 持久性

> ID：16093023
> 
> 赞同：3
> 
> 时间：2013-04-18T21:03:28.910
> 
> 标签：java, playframework, securesocial

我开始使用 play 2.1 for java 和 SecureSocial。目前，我正在尝试为注册/注册到该站点的用户添加一些持久性，但我无法尝试将使用 SecureSocial 的模型在其示例中保存/检索数据的模型表示为持久性模型。

同样在网页上说我们可以实现 SocialUser 对象，但我真的不知道如何使用它，因为它是一个 scala 对象。我如何调用或扩展该对象的一个​​例子会很好。

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-29T00:38:14.263

我正在使用 ebean 来保存用户。

我的用户类如下所示：

封装模型；

```
import javax.persistence.Entity;
import javax.persistence.Id;

import play.db.ebean.Model;

@Entity
public class LocalUser extends Model  {

    private static final long serialVersionUID = 1L;

    @Id
    public String id;

    public String provider;

    public String firstName;

    public String lastName;

    public String email;

    public String password;

    public static Finder<String, LocalUser> find = new Finder<String, LocalUser>(
            String.class, LocalUser.class
    );

    @Override
    public String toString() {
        return this.id + " - " + this.firstName;
    }
} 
```

我的令牌类：

```
package models;

import java.util.Date;

import javax.persistence.Entity;
import javax.persistence.Id;

import play.db.ebean.Model;

@Entity
public class LocalToken extends Model {

    private static final long serialVersionUID = 1L;

    @Id
    public String uuid;

    public String email;

    public Date createdAt;

    public Date expireAt;

    public boolean isSignUp;

    public static Finder<String, LocalToken> find = new Finder<String, LocalToken>(
            String.class, LocalToken.class
    );
} 
```

最后但并非最不重要的是我的用户服务：

```
package services;

import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;

import org.joda.time.DateTime;

import models.LocalToken;
import models.LocalUser;
import play.Application;
import play.Logger;
import scala.Option;
import scala.Some;
import securesocial.core.AuthenticationMethod;
import securesocial.core.Identity;
import securesocial.core.PasswordInfo;
import securesocial.core.SocialUser;
import securesocial.core.UserId;
import securesocial.core.java.BaseUserService;
import securesocial.core.java.Token;

public class SqlUserService extends BaseUserService {

    public SqlUserService(Application application) {
        super(application);
    }

    @Override
    public void doDeleteExpiredTokens() {
        if (Logger.isDebugEnabled()) {
            Logger.debug("deleteExpiredTokens...");
        }
        List<LocalToken> list = LocalToken.find.where().lt("expireAt", new DateTime().toString()).findList();
        for(LocalToken localToken : list) {
            localToken.delete();
        }
    }

    @Override
    public void doDeleteToken(String uuid) {
        if (Logger.isDebugEnabled()) {
            Logger.debug("deleteToken...");
            Logger.debug(String.format("uuid = %s", uuid));
        }
        LocalToken localToken = LocalToken.find.byId(uuid);
        if(localToken != null) {
            localToken.delete();
        }
    }

    @Override
    public Identity doFind(UserId userId) {
        if (Logger.isDebugEnabled()) {
            Logger.debug("find...");
            Logger.debug(String.format("id = %s", userId.id()));
        }
        LocalUser localUser = LocalUser.find.byId(userId.id());
        if(localUser == null) return null;
        SocialUser socialUser = new SocialUser(new UserId(localUser.id, localUser.provider), 
            localUser.firstName, localUser.lastName, String.format("%s %s", localUser.firstName, localUser.lastName),
            Option.apply(localUser.email), null, new AuthenticationMethod("userPassword"),
            null, null, Some.apply(new PasswordInfo("bcrypt", localUser.password, null))
        );  
        if (Logger.isDebugEnabled()) {
            Logger.debug(String.format("socialUser = %s", socialUser));
        }
        return socialUser;
    }

    @Override
    public Identity doFindByEmailAndProvider(String email, String providerId) {
        if (Logger.isDebugEnabled()) {
            Logger.debug("findByEmailAndProvider...");
            Logger.debug(String.format("email = %s", email));
            Logger.debug(String.format("providerId = %s", providerId));
        }
        List<LocalUser> list = LocalUser.find.where().eq("email", email).eq("provider", providerId).findList();
        if(list.size() != 1) return null;
        LocalUser localUser = list.get(0);
        SocialUser socialUser = new SocialUser(new UserId(localUser.id, localUser.provider), 
                localUser.firstName, localUser.lastName, String.format("%s %s", localUser.firstName, localUser.lastName),
                Option.apply(localUser.email), null, new AuthenticationMethod("userPassword"),
                null, null, Some.apply(new PasswordInfo("bcrypt", localUser.password, null))
            );  
            if (Logger.isDebugEnabled()) {
                Logger.debug(String.format("socialUser = %s", socialUser));
            }
            return socialUser;
    }

    @Override
    public Token doFindToken(String token) {
        if (Logger.isDebugEnabled()) {
            Logger.debug("findToken...");
            Logger.debug(String.format("token = %s", token));
        }
        LocalToken localToken = LocalToken.find.byId(token);
        if(localToken == null) return null;
        Token result = new Token();
        result.uuid = localToken.uuid;
        result.creationTime = new DateTime(localToken.createdAt);
        result.email = localToken.email;
        result.expirationTime = new DateTime(localToken.expireAt);
        result.isSignUp = localToken.isSignUp;
        if (Logger.isDebugEnabled()) {
            Logger.debug(String.format("foundToken = %s", result));
        }
        return result;
    }

    @Override
    public Identity doSave(Identity user) {
        if (Logger.isDebugEnabled()) {
            Logger.debug("save...");
            Logger.debug(String.format("user = %s", user));
        }
        LocalUser localUser = null;
        localUser = LocalUser.find.byId(user.id().id());
        if (localUser == null) {
            localUser = new LocalUser();
            localUser.id = user.id().id();
            localUser.provider = user.id().providerId();
            localUser.firstName = user.firstName();
            localUser.lastName = user.lastName();
            localUser.email = user.email().get();
            localUser.password = user.passwordInfo().get().password();
            localUser.save();
        } else {
            localUser.id = user.id().id();
            localUser.provider = user.id().providerId();
            localUser.firstName = user.firstName();
            localUser.lastName = user.lastName();
            localUser.email = user.email().get();
            localUser.password = user.passwordInfo().get().password();
            localUser.update();
        }
        return user;
    }

    @Override
    public void doSave(Token token) {
        if (Logger.isDebugEnabled()) {
            Logger.debug("save...");
            Logger.debug(String.format("token = %s", token.uuid));
        }
        LocalToken localToken = new LocalToken();
        localToken.uuid = token.uuid;
        localToken.email = token.email;
        try {
            SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            localToken.createdAt = df.parse(token.creationTime.toString("yyyy-MM-dd HH:mm:ss"));
            localToken.expireAt = df.parse(token.expirationTime.toString("yyyy-MM-dd HH:mm:ss"));
        } catch (ParseException e) {
            Logger.error("SqlUserService.doSave(): ", e);
        }
        localToken.isSignUp = token.isSignUp;
        localToken.save();
    }
} 
```

# android - wifi_static_ip 已弃用 Api-17 4.2

> ID：16093024
> 
> 赞同：2
> 
> 时间：2013-04-18T21:03:29.153
> 
> 标签：android

在这个程序中，我使用了一些常量，例如将 WIFI_STATIC_IP 更改为静态 IP。

当我创建 file.apk 并在 Android API-10 或版本 2.3.3 上安装时似乎工作。它连接到分配的无线和固定 IP。

另一台平板电脑 Api-15 或 4.0.3 版连接到 wifi 但不更改 IP。但是，它表明这些常量在 API-17 或更高版本中已弃用。

我不明白，因为它只适用于 API-11 版本而不适用于 API-15，或者我不明白什么是弃用的。

*`Settings.System.putInt(cr, Settings.System.ACCELEROMETER_ROTATION, 0); Settings.System.putInt(cr, Settings.System.WIFI_USE_STATIC_IP, 1); Settings.System.putString(cr, Settings.System.WIFI_STATIC_IP, "192.168.1.209"); Settings.System.putString(cr, Settings.System.WIFI_STATIC_NETMASK, "255.255.255.0"); Settings.System.putString(cr, Settings.System.WIFI_STATIC_GATEWAY, "192.168.1.1"); Settings.System.putString(cr, Settings.System.WIFI_STATIC_DNS1, "192.168.1.1");`*

此外，在 manifest.xml 文件中，我指出了这个版本：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:58:27.300

已弃用意味着您不应该再使用它。这通常是完全删除 API 的第一步。您现在需要更改代码，否则将来它将停止工作。

您看到的警告来自`@Deprecated`API 中的注释，如此处[所述](http://developer.android.com/reference/java/lang/Deprecated.html)。

Android 源代码是开放的，并且有很好的文档记录。

从 Android 代码（两个重要部分：`@Deprecated`和指向 的指针`WifiManager`）：

```
 /**
      * The static IP address.
      * <p>
      * Example: "192.168.1.51"
      *
      * @deprecated Use {@link WifiManager} instead
      */ 
     @Deprecated
     public static final String WIFI_STATIC_IP = "wifi_static_ip"; 
```

接下来你需要做的：学习这个`WiFiManager`类并重写你的代码来使用它。

# session - Grails session object property is not being set during integration test

> ID：16093026
> 
> 赞同：1
> 
> 时间：2013-04-18T21:03:38.427
> 
> 标签：session, grails, spock

I'm trying to test a filter in Grails 2.2.1 that stores a value in the global `session` object anytime somebody hits any URL in my application. Here's what I came up with, thanks to [this fine post](https://stackoverflow.com/questions/5421815/grails-cross-controller-code-execute-on-every-request):

```
package drummer

class SessionExpirationFilters {

    def filters = {
        all(controller: '*', action: '*') {
            before = {
                session.foo = 'bar'
            }
        }
    }
} 
```

I'm able to see that the filter works by outputting `session.foo` in a controller method, but the integration test fails:

```
package drummer

import grails.plugin.spock.IntegrationSpec

class QuestionControllerIntegrationSpec extends IntegrationSpec {

    def 'filter sets session foo to bar'() {
        given:
        def controller = new QuestionController()

        when:
        controller.list()

        then:
        assert 'bar' == controller.session.foo // fails, session.foo is null
    }
} 
```

So why isn't the 'foo' session object property set in the integration test?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T16:13:01.457

它没有被调用的原因是因为过滤器不会在控制器测试中自动运行。如果您的过滤器在服务/实用程序中，您可以为此编写单独的测试。

如果你想直接测试你的过滤器，Luke Daley 在这里写了一篇关于为[过滤器创建集成测试的博客文章：](http://ldaley.com/post/392153102/integration-testing-grails-filters)

```
import grails.util.GrailsWebUtil

class MyFilterTests extends GroovyTestCase {
    def filterInterceptor
    def grailsApplication
    def grailsWebRequest

    def request(Map params, controllerName, actionName) {
        grailsWebRequest = GrailsWebUtil.bindMockWebRequest(grailsApplication.mainContext)
        grailsWebRequest.params.putAll(params)
        grailsWebRequest.controllerName = controllerName
        grailsWebRequest.actionName = actionName
        filterInterceptor.preHandle(grailsWebRequest.request, grailsWebRequest.response, null)
    }

    def getResponse() {
        grailsWebRequest.currentResponse
    }

    def testFilterRedirects() {
        def result = request("home", "index", someParameter: "2")
        assertFalse result
        assertTrue response.redirectedUrl.endsWith(/* something */)
    }    
} 
```

# antlr3 - Antlr解析十六进制数

> ID：16093027
> 
> 赞同：0
> 
> 时间：2013-04-18T21:03:39.687
> 
> 标签：antlr3, lexer

我有以下语法来解析时间表达式，如“1 天 2 小时”。

```
time : timeLiteral
     | FLOAT
     | INTEGER
     ;
timeLiteral : dayExpr hourExpr? minuteExpr? ;
dayExpr : timeVal ('days' | 'day') ;
hourExpr : timeVal ('hour'|'hours') ;
minuteExpr : timeVal ('minutes' | 'minute') ;
timeVal : INTEGER | FLOAT ;
INTEGER : '0' 'x' (HEXDIGIT)+  
        | (DIGIT)+
        ;
FLOAT : '.' (DIGIT)+ (EXPONENT)?
      | ((DIGIT)+ '.') => (DIGIT)+ '.' (DIGIT)* (EXPONENT)?
      | (DIGIT)+ ('.' (DIGIT)*)? EXPONENT
      ;
fragment DIGIT    : '0'..'9';
fragment HEXDIGIT : 'a'..'f' | 'A'..'F' | DIGIT;
fragment EXPONENT : ('e' | 'E') ('+' | '-')? (DIGIT)+; 
```

这对于像 '1day 2hour' 这样的表达式很有效，但是当十六进制值与没有空格的 day 一起使用时会失败。像'0x23day 0x56hour'。在这种情况下，词法分析器创建一个值为 '0x23da' 的 INTEGER 标记。因此，'day' 解析器没有得到 INTEGER，而是得到 INTEGER，'y'。我该怎么做才能让词法分析器给我 0x23 作为 INTGER 和“day”。？

# scala - 在构造函数中指定 val

> ID：16093032
> 
> 赞同：0
> 
> 时间：2013-04-18T21:04:04.937
> 
> 标签：scala, class-constructors

在 Scala 中，我可以将构造函数编写为：

```
class Cons[T](head: T, tail: List[T]) {
...
} 
```

或者

```
class Cons[T](val head: T, val tail: List[T]) {
...
} 
```

有什么不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T21:08:07.817

指定`val`使属性可公开访问。（这是`case class`参数的默认行为，不需要`val`.）

[请参阅语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)的第 5.3 节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:56:36.853

正如其他人所说，不同之处在于，`val`除了总是将构造函数参数视为`val`.

另一个更细微的区别是`val`会在类中创建一个字段，这意味着对参数值的引用将在对象生命周期内存在。

当您不指定 a 时，默认情况下不会发生这种情况`val`，但如果您在构造函数主体之外的类主体中使用构造函数参数，仍然可以。例如，`a`在 ctor 主体中使用，因此它不会被提升到下面的对象字段中：

```
class A(a: Int) {
  println(a)
} 
```

在以下示例中，`a`成为私有字段：

```
class A(a: Int) {
  def foo = a
} 
```

因为必须在构造后和对象生命周期内才能调用`foo`.

即使没有从类的主体中引用参数，也可能隐式发生这种情况的另一个地方是使用特化时：

```
class Foo[@spec A](v: A) {
  var value: A = v
} 
```

查看字节码：

```
 public final A v;
    flags: ACC_PUBLIC, ACC_FINAL
    Signature: #12                          // TA;

  public A value;
    flags: ACC_PUBLIC
    Signature: #12                          // TA; 
```

这是使用测试的`2.10.1`，它可能是专业化实现中的一个错误。

# linq - Combining two streams of numbers using linq or rx

> ID：16093033
> 
> 赞同：1
> 
> 时间：2013-04-18T21:04:14.723
> 
> 标签：linq, system.reactive

I was playing around with linq/rx and wanted to do something simple, create a stream that listens to two different streams of numbers and when either number stream gets a new value, output the sums.

I tried the below:

```
static void Main(string[] args)
{
    var numSrcA = new Subject<int>();
    var numSrcB = new Subject<int>();

    var resultsLinq = from a in numSrcA
                      from b in numSrcB
                      select a + b;

    var resultsRx = numSrcA.SelectMany(a => numSrcB, (a, b) => a + b);

    resultsLinq.Subscribe(r => Console.WriteLine("Linq: " + r));
    resultsRx.Subscribe(r => Console.WriteLine("Rx: " + r));

    numSrcA.OnNext(1);
    numSrcB.OnNext(2);
    numSrcA.OnNext(3);

    Console.ReadLine();
} 
```

Output:

```
Linq: 3
Rx: 3 
```

I was expecting:

```
Linq: 3
Rx: 3
Linq: 5
Rx: 5 
```

Though it seems that the new sum will only be computed when numSrcB gets a new value (in which case it sums that new value against all existing values in numSrcA).

Can this be changed so that an addition to either numSrc will recompute the sums?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:41:08.767

简短的回答，您想要一个不需要所有流上的新输入来触发结果评估的组合器 - 换句话说，您想要`CombineLatest`：

```
var resultsLinq2 = Observable.CombineLatest(numSrcA, numSrcB, (a,b) => a+b);    
resultsLinq2.Subscribe(r => Console.WriteLine("Linq2: " + r)); 
```

结果是：

```
Linq2: 3
Linq: 3
Rx: 3
Linq2: 5 
```

# java - How to code this particular method?

> ID：16093034
> 
> 赞同：3
> 
> 时间：2013-04-18T21:04:21.390
> 
> 标签：java, list, arraylist

Lets say I have 3 lists with 3 elements each.

`List1: "cat, sat, mat"; List2: "every, boy, deserves; List3: all, lines, here` . My output should be:

`Listout: cat,every,all; cat,every,lines; cat,every,here; cat,boy,all; cat,boy,lines;..`

I can write a method that can append all elements of first while there is a loop that runs through the two other lists. But how to tackle this for more than 3 lists. Like 10 lists. The output will contain 3 to the 10 elements. Can you give me an idea of how the code/method in Java would look like? I know I might need recursion: but what would be the input to that recursive method?

I have tried this one like this and it works:

```
public static LinkedList<String> getPermutations(LinkedList<String> list1, LinkedList<String> list2, LinkedList<String> list3){
    LinkedList<String> final_list = new LinkedList<String>();
    Iterator<String> it = list1.iterator();
    while (it.hasNext()) {
        String this_element1 = it.next();
        //System.out.println("elem1: "+this_element1);
        Iterator<String> it2 = list2.iterator();
        while (it2.hasNext()) {
            String this_element2 = it2.next();
            //System.out.println("elem2: "+this_element2);
            Iterator<String> it3 = list3.iterator();
            while (it3.hasNext()) {
                String this_element3 = it3.next();
                //System.out.println(this_element3);
                final_list.add(this_element1+","+this_element2+","+this_element3);
            }//3
        }//2
    }//1
    return final_list;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:13:11.287

您正在计算的内容称为广义[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)

[这个问题](https://stackoverflow.com/questions/2419370/how-can-i-compute-a-cartesian-product-iteratively)有一个很好的 Python 实现，说明如何遍历任意数量的变长向量的笛卡尔积。将它移植到 Java 应该相当容易 - 但是，如果必须使用 LinkedLists，最好为计数列表保存迭代器，而不是索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:30:46.450

到目前为止，这是可行的：代码是根据@PhilipWhitehouse 和其他人的评论修改的。这里是。如果有人发现这有任何缺陷，请告诉我：

```
 public static LinkedList<String> getPermutationsComb2(LinkedList<LinkedList<String>> lists) {
    LinkedList<String> retList = new LinkedList<String>();

    if(lists.size() > 1) {
        LinkedList<LinkedList<String>> subLists = new LinkedList<LinkedList<String>>();
        for(int i = 1; i < lists.size(); i++) {
            subLists.add(lists.get(i));
        }
        LinkedList<String> listTails = getPermutationsComb2(subLists);
        Iterator<String> it_tail1 = lists.get(0).iterator();
        while(it_tail1.hasNext()){
            String listHead2 = it_tail1.next();
            Iterator<String> it_tail2 = listTails.iterator();
            while(it_tail2.hasNext()){
                retList.add(listHead2+","+it_tail2.next());
            }
        }
    } else {
        retList = lists.get(0);
    }
    return retList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:23:58.173

对于使用递归的“n”个列表数组：

```
public static LinkedList<String> getPermutations(LinkedList<String>[] lists) {
    LinkedList<String> retList = new LinkedList<String>();
    Iterator<String> iList = lists[0].iterator();
    if (lists.length > 1) {
        while (iList.hasNext()) {
            String listHead = iList.next();
            @SuppressWarnings("unchecked")
            LinkedList<String>[] subLists = new LinkedList[lists.length - 1];
            for (int i = 1; i < lists.length; i++) {
                subLists[i - 1] = lists[i];
            }
            LinkedList<String> listTails = getPermutations(subLists);
            Iterator<String> iTails = listTails.iterator();
            while (iTails.hasNext()) {
                retList.add(listHead + "," + iTails.next());
            }
        }
    } else {
        retList = lists[0];
    }
    return retList;
} 
```

# regex - Regexp in Vim Not working as expected

> ID：16093035
> 
> 赞同：0
> 
> 时间：2013-04-18T21:04:23.240
> 
> 标签：regex, vim

Why is the following regex

```
/\d{2, 4}/ 
```

which I expect to identify all between 2 and 4 digits in a text not working when I run it on the following text

```
1234567890 
```

in vim.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T21:09:09.183

您的表达式有两点错误：1.第一个大括号需要转义，2.量词内不应该有空格。

```
/\d\{2,4}/ 
```

见`:help /\{`。

如果您打开`very magic`，例如通过以 开头的表达式`\v`，则不需要转义第一个大括号：

```
/\v\d{2,4}/ 
```

# c - 前向声明是否需要与定义中的对应声明相同？

> ID：16093041
> 
> 赞同：4
> 
> 时间：2013-04-18T21:04:36.623
> 
> 标签：c, forward-declaration

注意在这段代码中，**double quadratic();** 顶部的 **double quadratic(double a, double b, double c) 与 main 下面定义中的不匹配。

然而奇怪的是，这编译！我正在使用**gcc -ansi -Wall -pedantic sorry.c**并且无论我使用什么标志，它仍然有效。

这与我所学的背道而驰。为什么这个编译和工作正常？

```
#include <stdio.h>
#include <math.h>
double inputValues();
double quadratic();

int main()
{
        inputValues();
        inputValues();
        inputValues();
        return 0;
}

double inputValues()
{
        double a, b, c,derp;

        printf("Enter a value a: ");
        scanf("%lf", &a);

        printf("Enter a value b: ");
        scanf("%lf", &b);

        printf("Enter a value c: ");
        scanf("%lf", &c);

        derp = quadratic(a, b, c);

        printf("One x-value for this equation is %0.3f: \n", derp);
        return 0;
}

double quadratic(double a, double b, double c)
{
        double quad;

        quad = (-b + sqrt(b*b-4*a*c))/(2*a);
        return quad;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:22:05.963

`double quadratic();`

声明一个函数，该函数返回`double`带有未指定（但固定）数量的参数的 a。

它与您的函数原型相匹配：

```
double quadratic(double a, double b, double c)
{
   /* ... */
} 
```

这不等同于：

`double quadratic(void);`

这是一个函数原型形式的声明，它返回`double`不带参数的 a。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T21:08:51.133

如果省略参数列表，编译器会假定函数存在，但不检查参数是否匹配。

如果您已声明，您的代码将无法编译，`double quadratic(void);`因为他们的签名将是完整的并且不匹配。

### C 标准，委员会草案 — 2011 年 4 月 12 日，§6.7.6.3.15

> 对于要兼容的两种函数类型，两者都应指定兼容的返回类型。此外，参数类型列表（如果两者都存在）应在参数数量和省略号终止符的使用方面达成一致；相应的参数应具有兼容的类型。如果一种类型具有参数类型列表，而另一种类型由不属于函数定义的函数声明符指定且包含空标识符列表，则参数列表不应有省略号终止符，并且每个参数的类型应与应用默认参数提升所产生的类型兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T21:22:04.110

在 C 中，函数声明中的空参数列表意味着该函数采用未定义数量的参数。这就是 C 编译器不抱怨的原因。相同的代码在 C++ 中会出错，因为声明中的空参数列表意味着该函数不接受任何参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T21:17:51.960

最初在 C 中没有原型；有简单的函数声明，这些声明不包括参数列表。后来添加原型时，为了向后兼容，必须保留旧的声明形式。

# macos - AppleScript: Script to switch Caps Lock Key to Control

> ID：16093042
> 
> 赞同：1
> 
> 时间：2013-04-18T21:04:37.357
> 
> 标签：macos, vim, applescript

I was trying to find a solution to this because I am using Vim and most of the time I need Caps lock to be assigned to Ctrl. There are times though that I want the Caps Lock working normally. I thought an Apple Script is great as it can be assigned to a LaunchBar action.

I will answer with the solution I ended up with (through GUI scripting) but would be interested in a less intrusive solution if someone knows a way...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:04:37.357

这是我目前使用的脚本：

```
tell application "System Preferences"
   activate
   set current pane to pane "com.apple.preference.keyboard"
end tell

tell application "System Events"
tell application process "System Preferences"
  get properties

  click button "Modifier Keys…" of tab group 1 of window "Keyboard"
  tell sheet 1 of window "Keyboard"
    click pop up button 4
    set capsLockCurrentlyOn to (value of attribute "AXMenuItemMarkChar" of menu item 1 of menu 1 of pop up button 4 as string) ≠ ""
    --display dialog "Caps Lock On: " & capsLockCurrentlyOn
    if capsLockCurrentlyOn is true then
      --tell me to beep 3
      click menu item 2 of menu 1 of pop up button 4
    else
      --tell me to beep 2
      click menu item 1 of menu 1 of pop up button 4
    end if
    click button "OK"
  end tell
end tell
tell application "System Preferences" to quit
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:36:55.663

您是否尝试[过 KeyRemap4MacBook](http://pqrs.org/macosx/keyremap4macbook/index.html.en)或[PCKeyboardHack](http://pqrs.org/macosx/keyremap4macbook/pckeyboardhack.html.en)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:21:54.333

您可以使用[PCKeyboardHack](http://pqrs.org/macosx/keyremap4macbook/pckeyboardhack.html.en)将大写锁定更改为 F19。然后将其保存为[private.xml](http://pqrs.org/macosx/keyremap4macbook/xml.html.en)：

```
<?xml version="1.0"?>
<root>
<item>
<name>caps1</name>
<identifier>caps1</identifier>
<autogen>__KeyToKey__ KeyCode::F19, KeyCode::CAPSLOCK</autogen>
</item>
<item>
<name>caps2</name>
<identifier>caps2</identifier>
<autogen>__KeyToKey__ KeyCode::F19, KeyCode::CONTROL_L</autogen>
</item>
</root> 
```

并使用此脚本来切换设置：

```
k=/Applications/KeyRemap4MacBook.app/Contents/Applications/KeyRemap4MacBook_cli.app/Contents/MacOS/KeyRemap4MacBook_cli
if $k changed | grep -q ^caps1=; then
    $k disable caps1
    $k enable caps2
else
    $k enable caps1
    $k disable caps2
fi 
```

不过，将另一个组合键分配给 caps lock 会更容易：

`<autogen>__KeyOverlaidModifier__ KeyCode::CONTROL_L, ModifierFlag::FN, KeyCode::CONTROL_L, ModifierFlag::FN, KeyCode::CAPSLOCK</autogen>`

这将在按键按下时触发，因此您必须在 fn 之前按下 control 以获取诸如 fn+control+down 之类的组合键：

`<autogen>__KeyToKey__ KeyCode::CONTROL_L, ModifierFlag::FN, KeyCode::CAPSLOCK</autogen>`

# python - 是否有一个使用常规文件系统的简单 Python map-reduce 框架？

> ID：16093044
> 
> 赞同：11
> 
> 时间：2013-04-18T21:04:42.617
> 
> 标签：python, mapreduce

我有一些问题可能适用于 Map-Reduce 模型。我想尝试实现它们，但在这个阶段我不想麻烦安装像 Hadoop 或 Disco 这样的重量级系统。

是否有用于 map-reduce 的轻量级 Python 框架，它使用常规文件系统进行输入、临时文件和输出？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T08:29:49.783

专门针对大数据的 Coursera 课程建议使用这些轻量级的 Python Map-Reduce 框架：

*   [http://code.google.com/p/octopy/](http://code.google.com/p/octopy/)
*   [https://github.com/michaelfairley/mincemeatpy](https://github.com/michaelfairley/mincemeatpy)

为了让您快速入门，请尝试以下示例：

[https://github.com/michaelfairley/mincemeatpy/zipball/v0.1.2](https://github.com/michaelfairley/mincemeatpy/zipball/v0.1.2)

（提示：本例中的 [服务器地址] 使用 localhost）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-27T22:33:08.210

[http://pythonhosted.org/mrjob/](http://pythonhosted.org/mrjob/)非常适合在本地机器上快速入门，基本上你只需要一个简单的：

点安装mrjob

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-08T20:54:44.410

[http://jsmapreduce.com/](http://jsmapreduce.com/) -- 浏览器内的 mapreduce；在 Python 或 Javascript 中；无需安装

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-10T18:35:12.863

查看[Apache Spark](http://spark.incubator.apache.org/)。它是用 Java 编写的，但也有 Python API。您可以在您的机器上本地尝试它，然后，当您需要它时，您可以轻松地将您的计算分布到集群上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-04T05:09:08.303

MockMR - [https://github.com/sjtrny/mockmr](https://github.com/sjtrny/mockmr)

它用于教育用途。当前不并行操作，但接受标准 Python 对象作为 IO。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-25T11:00:42.660

所以这是很久以前问过的，但我在周末致力于 mapreduce 的完整实现：​​remap。

[https://github.com/gtoonstra/remap](https://github.com/gtoonstra/remap)

安装非常简单，依赖最少，如果一切顺利，您应该能够在 5 分钟内运行测试运行。

整个处理管道正常工作，但提交和监控作业仍在进行中。

# algorithm - NP-Complete Graph optimization: minimal node selection?

> ID：16093046
> 
> 赞同：1
> 
> 时间：2013-04-18T21:04:48.427
> 
> 标签：algorithm, optimization, graph, reduction, np

Suppose you have a graph `G = (V, E)` that represents the floor plan of a one-story shopping mall. The individual stores are represented by vertices, and the edges between vertices represent some arbitrary definition of stores being close to each other.

Recently, there has been an increase in the amount of shoplifting that occurs in this mall, so management decides to make it so that every store either:

*   Has a security guard stationed in it

*   Or is close to a store that has a security guard stationed in it

While hiring as few security guards as possible.

How would you prove this optimization problem is NP-complete? I feel like it's a simple reduction from the independent set problem, but I want to make sure.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:23:07.943

这正是已知的 NP完全的[最小顶点覆盖问题。](http://en.wikipedia.org/wiki/Vertex_cover)看到计算最小顶点覆盖的大小等同于计算最大独立集的大小的关键见解如下：

`A set of vertices is a vertex cover, if and only if its complement is an independent set.`

特别是，这意味着顶点的总数等于最小顶点覆盖的大小加上最大独立集的大小。这很好地说明了计算一个数字如何减少到计算另一个数字。

# internet-explorer - How do I modify IE Gradient CSS to use height and a third color?

> ID：16093048
> 
> 赞同：1
> 
> 时间：2013-04-18T21:04:54.867
> 
> 标签：internet-explorer, css, styles, stylesheet, linear-gradients

I have the following CSS for Gradients:

For IE 8-9

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d7d6d2',]
endColorstr='#f9ffff', GradientType=1);
/* IE 8–9 */
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#d7d6d2',
endColorstr='#f9ffff', GradientType=1)"; 
```

For IE 10

```
background: -ms-linear-gradient(top, #d7d6d2 0%,#f9ffff 437px,#ffffff 100%); 
```

For the IE 10 version I have 3 colors. The first two create the gradient and the third color, which is #ffffff, shows the rest of the page in white color when the gradient has ended. And the 437px defines the height of the gradient.

How can I modify the code for IE 8-9 for CSS Gradients so I can achieve what I have with the IE 10 version?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:40:17.040

IE8 不支持渐变色标。给定元素（例如 div 或按钮）只能使用两种颜色。

至于 IE9，您可以通过 svg 渐变来完成此操作，例如：

```
/* SVG as background image (IE9/Chrome/Safari/Opera) */ 
background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAxIDEiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPgo8bGluZWFyR3JhZGllbnQgaWQ9Imc4MzUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Q3RDZEMiIgb2Zmc2V0PSIxIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0Y5RkZGRiIgb2Zmc2V0PSIwLjUiLz48c3RvcCBzdG9wLWNvbG9yPSIjRkZGRkZGIiBvZmZzZXQ9IjEiLz4KPC9saW5lYXJHcmFkaWVudD4KPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNnODM1KSIgLz4KPC9zdmc+); 
```

[微软在这里](http://ie.microsoft.com/testdrive/graphics/svggradientbackgroundmaker/)有一个不错的 SVG 渐变生成器。

如果这对您没有吸引力，您可以模拟停止，这已经在[这个 SO question](https://stackoverflow.com/questions/4848475/simulating-color-stops-in-gradients-for-ie)中讨论过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:56:30.750

The best way to do gradients on IE8/9 is to use [CSS3Pie](http://css3pie.com/).

This is a Javascript polyfill library that implements the standard CSS gradient syntax into old versions of IE. (it also does a few other features like `border-radius`).

Simply download the Pie.htc file and add it to your site as per the instructions, and you can start using standard CSS gradients in IE 6-9.

To directly answer your question: CSS3Pie's gradients do support gradient colour stops. (But even without that, the improved syntax over `-ms-filter` is enough motivation for me to want to use it)

Hope that helps.

# jquery - IE not toggling from list item trigger

> ID：16093050
> 
> 赞同：1
> 
> 时间：2013-04-18T21:05:00.803
> 
> 标签：jquery, html, internet-explorer

jQuery:

```
$( '#mainNavSidebar .subListTrigger' ).click( function(){
    $( this ).next( '.subList' ).toggle();
}); 
```

HTML:

```
<style>.subList{ display: none; }</style>
<ul id="mainNavSidebar">
    <li class="subListTrigger">
        <a>About Us</a>
    </li>
    <ul class="subList">
        <li><a>Welcome</a></li>
        <li><a>Mission</a></li>
    </ul>
</ul> 
```

So I'm stuck using an older version of jQuery which is why I'm using click() instead of on(). But this is working fine in Chrome and Firefox, but it does nothing in IE. If I put an alert in there it will do that, so I think the problem is with either the next() or the toggle(). Any ideas?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:08:08.800

您的 HTML 无效，IE 很可能会以破坏代码的方式为您修复它。

使您的 html 有效。

```
<style>.subList{ display: none; }</style>
<ul id="mainNavSidebar">
    <li class="subListTrigger">
        <a>About Us</a>
        <ul class="subList"> <!-- the only valid child of a ul is a li -->
            <li><a>Welcome</a></li>
            <li><a>Mission</a></li>
        </ul>
    </li>
</ul> 
```

..

```
$( '#mainNavSidebar .subListTrigger' ).click( function(){
    $( '.subList', this ).toggle();
}); 
```

# json - 将 AJAX/JSON 调用与 iScroll 相结合

> ID：16093051
> 
> 赞同：1
> 
> 时间：2013-04-18T21:05:12.113
> 
> 标签：json, jquery-mobile, iscroll

我正在使用 JSON 数据从我的 JQM 网站制作一个列表，并且对此没有任何问题。现在我想将 iScroll 添加到场景中，如果我使用静态列表，它工作得很好，但是当我从 JSON 获取列表时，它不会获取我有多少 li，如果我有，我不能向下滚动到底部让我们说20里。我不知道如何组合我的javascript所以这是我到目前为止得到的[编辑]：

```
var myScroll;   

$(document).on('pageshow', function (){
    var userid=1,
        dataUrl = 'http://duefmun.dk/html5data/playermenu.php?callback=?&userid=' + userid,
        dataCallback = function (data) {
            var content = [];
            $.each(data, function (i, val) {
                content.push(val.list);
            });
            $('#games').html(content.join('')).listview('refresh');
        },
        fetchData = function () {
            myScroll = new iScroll('wrapper');
            if (myScroll.isReady()){
                $.getJSON(dataUrl, dataCallback);
            }
        };
    fetchData();
    setInterval(fetchData, 20000);

    document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
    document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200);  }, false);

}); 
```

希望这是有道理的，任何帮助表示赞赏:-)

编辑：我已经用我认为应该正确的东西编辑了帖子，但它仍然不起作用？请帮忙 ：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T19:41:04.690

我的建议是，您应该在获取数据后创建 iScroll。所以，你的代码应该是：

```
...
fetchData = function () {           
        if (myScroll.isReady()){
            $.getJSON(dataUrl, dataCallback);
        }
    };
fetchData();
setInterval(fetchData, 20000);
myScroll = new iScroll('wrapper');
... 
```

# java - Why we need a connection pooling for JDBC?

> ID：16093054
> 
> 赞同：20
> 
> 时间：2013-04-18T21:05:20.613
> 
> 标签：java, jdbc, threadpool, connection-pooling, h2

*   What are the benefits of using a JDBC connection pooling tool like [DBCP](http://commons.apache.org/proper/commons-dbcp/) or [c3p0](http://sourceforge.net/projects/c3p0/) ?

*   in case of a **small CRUD** application with **one** user, can we just create **one** connection session as a **singleton** ?

**PS**: I'm building a small `javafx` application back-ended with tiny `h2` database (5 tables).

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T21:08:16.297

[来自 Jon Skeet对连接和语句池有什么好处](https://stackoverflow.com/questions/457287/what-is-the-benefit-of-connection-and-statement-pooling/457303#457303)的回答？：

> 创建到数据库服务器的网络连接是（相对）昂贵的。同样，要求服务器准备一条 SQL 语句（相对）昂贵。
> 
> 使用连接/语句池，您可以重用现有的连接/准备好的语句，避免启动连接、解析 SQL 等成本。

以下来自[Kent Boogaart 的回答](https://stackoverflow.com/questions/457287/what-is-the-benefit-of-connection-and-statement-pooling/457305#457305)：

> 我对 c3p0 不熟悉，但是池化连接和语句的好处包括：
> 
> 1.  表现。连接到数据库既昂贵又缓慢。池连接可以保持物理连接到数据库，并在需要数据库访问的各种组件之间共享。这样，连接成本一次性支付，并在所有消费组件中摊销。
>     
>     
> 2.  诊断。如果您有一个子系统负责连接到数据库，那么诊断和分析数据库连接使用情况会变得更容易。
>     
>     
> 3.  可维护性。同样，如果您有一个负责分发数据库连接的子系统，那么您的代码将比每个组件都连接到数据库本身更容易维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T21:09:37.443

创建连接的成本很高，并且为每个可能只需要几毫秒的事务创建一个新连接是没有意义的。在池中管理数据库连接意味着应用程序可以以一种避免连接创建时间的方式执行数据库事务（连接仍然需要创建，但它们都是在启动时创建的）。不利的一面是，如果所有连接都在使用中，并且需要另一个连接，则请求线程将不得不等待，直到一个连接返回到池中。

# oracle - 触发器上的变异错误以计算平均成本

> ID：16093063
> 
> 赞同：1
> 
> 时间：2013-04-18T21:05:51.293
> 
> 标签：oracle, plsql

我有两张表，PRODUCTS 和 STATE_PRICE。每种产品的价格因州而异。PRODUCTS 表跟踪所有州的每种产品的平均成本。我正在尝试编写一个触发器，当在 STATE_PRICE 表中插入、更新或删除价格时，该触发器将更新 PRODUCTS 表中商品的平均价格。我编写了以下触发器，它可以编译，但是当我测试它时，我收到一条变异错误消息。我了解变异错误的概念，即我正在尝试更新正在对其执行触发器的表，但我实际上是在尝试在 STATE_PRICE 表上执行触发器时更新 PRODUCTS 表。

```
create or replace trigger trg_avg_cost
after insert or update or delete on state_price
for each row

declare
w_price state_price.list_price%type;
w_product state_price.productid%type;

begin
w_price := :new.list_price;
w_product := :new.productid;

update products
set avg_cost_per_unit = (select avg(w_price) from state_price
where productid = w_product);

end;
/ 
```

我收到的具体错误消息说：

错误报告：

```
SQL Error: ORA-04091: table STATE_PRICE is mutating, trigger/function may not see it
ORA-06512: at "TRG_AVG_COST", line 9
ORA-04088: error during execution of trigger 'TRG_AVG_COST'
04091\. 00000 -  "table %s.%s is mutating, trigger/function may not see it"
*Cause:    A trigger (or a user defined plsql function that is referenced in
           this statement) attempted to look at (or modify) a table that was
           in the middle of being modified by the statement which fired it.
*Action:   Rewrite the trigger (or function) so it does not read that table. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:21:15.027

在行触发器中，没有 SQL 语句可以访问触发器所在的表。您`SELECT AVG(W_PRICE) FROM STATE_PRICE WHERE PRODUCTID = W_PRODUCT`是导致错误的原因。解决此限制的经典方法是使用复合触发器 - 文档[here](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/triggers.htm#LNPLS2005)。另请参阅我对[这个 StackOverflow 问题](https://stackoverflow.com/questions/10184631/creating-a-trigger-that-deletes-a-row-when-an-attribute-becomes-negative-oracle/10195691#10195691)的回答，了解实现复合触发器的示例。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:30:41.877

可能存在引用完整性约束（在 productid 上），这也可能引发相同的错误。如果是这种情况，下面的链接可以帮助您避免错误。

[http://asktom.oracle.com/pls/asktom/ASKTOM.download_file?p_file=6551198119097816936](http://asktom.oracle.com/pls/asktom/ASKTOM.download_file?p_file=6551198119097816936)

# matlab - Matlab中每个数据点的标签名称

> ID：16093066
> 
> 赞同：1
> 
> 时间：2013-04-18T21:06:07.123
> 
> 标签：matlab, label

我有一组正在分析的数据，如果可以的话，我需要一些帮助。我的数据由两列组成，但我的 X 列只有一个点，我的 Y 列大约是 50 点。因此，当我绘制它时，它当然只是 Y 轴上的差异点与 x 轴上的一个点。现在这些点彼此之间真的很接近，我想做的是将每个点标记为它们的实际通道名称。但到目前为止，我尝试使用`text()`函数它给了我一个错误，说我的 x 和 y 值应该相同。我不知道该怎么做。请记住，我也有文件中每个数据点的名称。你能帮我吗？请记住使用 1 个 x 值和 50 个 Y 值。可以说我修复了它，现在名称彼此重叠。有没有办法在不影响点位置的情况下将它们隔开。

# android - 如何处理动态壁纸设置中的应用按钮？

> ID：16093070
> 
> 赞同：2
> 
> 时间：2013-04-18T21:06:23.117
> 
> 标签：android, live-wallpaper

我有一个动态壁纸。我调出预览活动，我在应用和设置底部看到两个按钮。按设置按钮将我带入我的设置活动，用户可以在其中修改壁纸的首选项。

当用户退出设置活动并返回“预览”活动时，更改将在预览中生效。如果用户没有点击应用（例如，只是返回），则无论如何都会应用设置。

如何处理用户按下“应用”按钮？这是由 Android 自动添加的，不在 xml 中。

# c++ - template argument for a function in template class

> ID：16093073
> 
> 赞同：1
> 
> 时间：2013-04-18T21:06:30.743
> 
> 标签：c++, templates

I have situation like this

```
template<class T> class Vector {
  T *data;
  uint _size, _counter;
public:
  class Iterator;
  template<template<class> class C> Vector(typename C<T>::Iterator it1,
                                           typename C<T>::Iterator it2) {
    data = NULL;
    _size = _counter = 0;
    for(typename C<T>::Iterator it = it1; it != it2 && it != end(); it++)
      push(*it);
  }
}; 
```

that is my own Vector class and the constructor mimics behaviour of vector (u can construct it with range of data supplied using interators) but add requirement that the container is to be template of the same type as the one under construction. I get error

> 5.cpp:16:36: error: no matching function for call to ‘Vector::Vector(Vector::Iterator, Vector::Iterator)’ 5.cpp:16:36: note: candidates are: In file included from 5.cpp:2:0:
> 
> 5.hpp:17:37: note: template class typedef C C> Vector::Vector(typename C::Iterator, typename C::Iterator)
> 
> 5.hpp:17:37: note: template argument deduction/substitution failed:
> 
> 5.cpp:16:36: note: couldn't deduce template parameter ‘template class typedef C C’ In file included from 5.cpp:2:0:
> 
> 5.hpp:11:3: note: Vector::Vector() [with T = int]
> 
> 5.hpp:11:3: note: candidate expects 0 arguments, 2 provided
> 
> 5.hpp:7:25: note: Vector::Vector(const Vector&)
> 
> 5.hpp:7:25: note: candidate expects 1 argument, 2 provided

Need some help in here.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T21:48:11.407

在：

```
 template<template<class> class C> Vector(typename C<T>::Iterator it1,
                                           typename C<T>::Iterator it2) 
```

编译器不会从中推断类型`C`，`typename C<T>::Iterator`因为它是所谓的*非推断上下文*。

请参阅 §14.8.2.4 从类型 [temp.deduct.type] 推导模板参数：

> 4 未推断的上下文是：
> 
> — 使用限定 ID 指定的类型的嵌套名称说明符。
> 
> — 一种模板 ID 类型，其中一个或多个模板参数是引用模板参数的表达式。

# android - 如何在gridview上显示复选框并从网格中删除选中的图像

> ID：16093075
> 
> 赞同：1
> 
> 时间：2013-04-18T21:06:37.280
> 
> 标签：android

我如何在 gridview 和选中的选中图像上添加复选框将被删除？在这段代码中，我该如何修改请帮助我，以及如何在网格中显示图像它自己的图像而不是图标 ido 做什么？

```
 GridView gridView;
   TextView textView;
    File currentParent;
   File[] currentFiles;
  String[] currentFilePath;
  ImageButton AddPictures;
  SimpleAdapter simpleAdapter;
  final Context context = this;

  DataBase db;

  ProgressDialog myProgressDialog = null;

  File root;

Handler handle = new Handler(){ 
    public void handleMessage(android.os.Message msg) {

        if (msg.what == 1)
        {
            hideProgress();

            //list.setAdapter(new  
   AppPhotosAdapter(getApplicationContext(),activity,0,picList));
        }
        else if (msg.what == 2)
        {
            hideProgress();
        }
        super.handleMessage(msg);   
    };
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    File photos = new File(getFilesDir(),"photos");
    photos.mkdirs();

    File root1 = new File("/data/data/com.newsoftwares.folderlock/files/");

    currentParent = root1;
    currentFiles = root1.listFiles();

    currentFilePath = new String[currentFiles.length];
    int count = 0;

    for(File f:currentFiles)
    {   
        currentFilePath[count] = f.getAbsolutePath();
        count++;
    }

    gridView =(GridView)findViewById(R.id.grid);
    gridView.setOnItemClickListener(new OnItemClickListener(){
        public void onItemClick(AdapterView<?> parent, View view, int 
     position,long id) {

        if(currentFiles[position].isDirectory())
        {
            root = new File("/data/data/com.myexample 
```

/files/"+FileName(currentFilePath[位置])+"/");

```
 Log.e("Root first",root+ " ");

            currentFiles = root.listFiles();

            inflateListView(currentFiles);
        }
        else if(currentFiles[position].isFile())
        {
            db = new DataBase(getBaseContext()); 
            try {
                db.createDataBase();
            } catch (IOException e1) {

                e1.printStackTrace();
            }

            Log.e("Check name",currentFiles[position].getName()+" ");

            Cursor DataC = db.selectQuery("SELECT path FROM Photos where name 
='"+currentFiles[position].getName()+"'");

            Log.e("Cursor",DataC.getCount()+" ");

            if(DataC.getCount() > 0)
            {
                Bitmap bitmap = decodeFile(new 
 File(root+"/"+currentFiles[position].getName()));

                try {
                    Log.e("DB Path",DataC.getString(DataC.getColumnIndex("path"))+ " ");

                    FileOutputStream outputStream = new FileOutputStream(new File(DataC.getString(DataC.getColumnIndex("path"))));
                    outputStream.write(getBitmapAsByteArray(bitmap));
                    outputStream.close();
                } catch (Exception e) {
                    e.printStackTrace();
                }
                Log.e("Delete path 
 ",root+"/"+currentFiles[position].getName()+ " ");

                     File file = new 
      File(root+"/"+currentFiles[position].getName());
                     file.delete();

                     inflateListView(currentFiles);

            }

            DataC.close();
            db.close();
        }
    }

  });

    inflateListView(currentFiles);  
 }

private Bitmap decodeFile(File f){
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //The new size we want to scale to
        final int REQUIRED_SIZE=70;

        //Find the correct scale value. It should be the power of 2.
        int scale=1;
        while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
            scale*=2;

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
 }

 public byte[] fileToByte(File f)
 {
    byte[] byteArray = null;
    try
    {
         InputStream inputStream = new FileInputStream(f);
         ByteArrayOutputStream bos = new ByteArrayOutputStream();
         byte[] b = new byte[1024*8];
         int bytesRead =0;

         while ((bytesRead = inputStream.read(b)) != -1)
         {
             bos.write(b, 0, bytesRead);
         }

         byteArray = bos.toByteArray();
     }
     catch (IOException e)
     {
         e.printStackTrace();
     }

     return byteArray;
  }
 ///////////////////// Get File Name from path ////////////////////////////
 public String FileName(String path)
    {
    String f = " /";
    boolean c = false;

    for(int i=path.length()-1;i>0;i--)
    {
        if(c == false)
            if(path.charAt(i) == f.charAt(1))
            {
                c = true;
                return 
       path.substring(i+1,path.length());       
            }
    }

    return "";
}

  public static byte[] getBitmapAsByteArray(Bitmap bitmap) {
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.PNG, 0, outputStream);       
    return outputStream.toByteArray();
}

 private void showProgress()
{
    myProgressDialog = ProgressDialog.show(FileGridActivity.this,null,   
         "Loading...", true); 
}

private void hideProgress()
{
    if (myProgressDialog != null)
        myProgressDialog.dismiss();
}

   private void inflateListView(File[] files){

List<Map<String,Object>> listItems = new ArrayList<Map<String,Object>>();

 for(int i=0;i<files.length;i++)
 {      
        Map<String, Object> listItem = new HashMap<String, Object>();

        if(files[i].isDirectory())
        {
            listItem.put("icon", R.drawable.folder);
        }
        else
        {
            listItem.put("icon", R.drawable.file);
        }

        listItem.put("fileName", files[i].getName());
        listItems.add(listItem);
    }

    simpleAdapter=new SimpleAdapter(this,listItems,R.layout.line,new String[]
   {"icon","fileName"},new int[]{R.id.icon,R.id.file_name});
    gridView.setAdapter(simpleAdapter);

   } 
```

# java - SQL statement SQLSyntaxErrorException

> ID：16093076
> 
> 赞同：1
> 
> 时间：2013-04-18T21:06:42.760
> 
> 标签：java, sql, derby

I'm getting an error executing the following SQL statement:

```
String sql = "CREATE TABLE RESERVATION (";
sql = sql + " UID VARCHAR,";
sql = sql + " ISBN INTEGER,";
sql = sql + " DATEISSUE DATE,";
sql = sql + " DATERETURN DATE,";
sql = sql + " FOREIGN KEY (UID) REFERENCES USERS (UID),";
sql = sql + " FOREIGN KEY (ISBN) REFERENCES BOOKS (ISBN) )"; 
```

Here is the error I am getting:

> java.sql.SQLSyntaxErrorException: Syntax error: Encountered "," at line 1, column 39.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:12:56.917

`varchar`第 39列接近`varchar(20)`.

# android - ListView 中单个视图的背景颜色

> ID：16093078
> 
> 赞同：2
> 
> 时间：2013-04-18T21:06:46.767
> 
> 标签：android, listview, compound-drawables

我正在构建一个 android GUI，目前我正在构建一个 ListView。我将 GUI 的其余外观基于各个视图的背景色。我尝试对 ListView 中的布局做同样的事情，但命令什么也不做。我通过测试和一些研究得出结论，是 ListView 强制透明。

这可以覆盖吗？请帮忙 ：）

# javascript - Technologies for writing a web Paint program

> ID：16093079
> 
> 赞同：7
> 
> 时间：2013-04-18T21:06:51.330
> 
> 标签：javascript, web-applications, drawing, paint

I would like to do a a web Paint program. Basically I would like to mimic the Windows Paint program in a web application.

The features that I don't really know how to implement are:

1.  the drawing of 2D shapes (line, circle, etc) in a web browser
2.  drag and drop
3.  resize dynamically (seeing preview as you are moving the mouse for resizing)

I am guessing there will be HTML5, CSS3 and Javascript. I am mainly wondering if there are Javascript libraries that I could use to make my life easier.

Best regards

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T21:11:56.143

是的，您想使用画布（“新闪光灯”）。它是一种在较新的（移动）浏览器中广泛支持的 HTML5 元素。

以下是一些帮助您入门的链接：
[从存档中抢救的完整 ms-paint 副本（我能找到的最后一个）](http://web.archive.org/web/20111127134327/http://canvaspaint.org/)
[http://mudcu.be/sketchpad/](http://mudcu.be/sketchpad/)
[http://dev.opera.com/articles/view/ html5-canvas-painting/](http://dev.opera.com/articles/view/html5-canvas-painting/)
[http://www.codeproject.com/Articles/355230/HTML-5-Canvas-A-Simple-Paint-Program-Touch-and-Mou](http://www.codeproject.com/Articles/355230/HTML-5-Canvas-A-Simple-Paint-Program-Touch-and-Mou)

一些流行的库是：
[fabric.js](http://fabricjs.com/)、[KineticJS](http://kineticjs.com/)和[Processing.js](http://processingjs.org/)

祝你好运！

# asp.net - 使用 itextsharp 将默认名称设置为 PDF 文档

> ID：16093080
> 
> 赞同：1
> 
> 时间：2013-04-18T21:06:51.827
> 
> 标签：asp.net, vb.net, pdf, itextsharp

我正在向我的页面发送 PDF，并且我想在用户尝试保存 PDF 文档时设置默认名称。

我正在使用 ItextSharp 和 VB.Net

```
Using s As MemoryStream = New MemoryStream()
  Dim Pdf_Writer As PdfWriter = PdfWriter.GetInstance(DocumentPDF, s)
  DocumentPDF.Open()

  DocumentPDF.SetMargins(10.0F, 10.0F, 10.0F, 10.0F)

  DocumentPDF.Add(Table)

  DocumentPDF.Close()

  contentX= s.ToArray()
  HttpContext.Current.Response.Buffer = False
  HttpContext.Current.Response.Clear()
  HttpContext.Current.Response.ClearContent()
  HttpContext.Current.Response.ClearHeaders()
  HttpContext.Current.Response.ContentType = "Application/pdf"
  HttpContext.Current.Response.BinaryWrite(contentX)
  HttpContext.Current.Response.Flush()
  HttpContext.Current.Response.End()
End Using 
```

.

```
Response.AddHeader("content-disposition", @"attachment;filename=""MyFile.pdf"""); 
```

这样下载文件（是的，它设置了默认名称），但我只想显示文件，如果用户想保存它，那么......保存它（使用默认名称）

如何为我的 PDF 文档设置默认名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T08:37:02.417

试试这个代码：

```
Response.ContentType = "application/pdf"
Response.AppendHeader("Content-Disposition", "inline; filename="filename".pdf")
Response.TransmitFile("filename")
Response.End() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T11:33:59.837

我在通过处理程序页面 (.ashx) 传递 PDF 时遇到了类似的问题。无论我在 HTTP 标头中设置什么，当我使用此 url 时，从浏览器 PDF 阅读器保存总是会将文件名设置为“getpdf.pdf”。

[http://www.thepdfchef.com/handlers/getpdf.ashx?id=5188p](http://www.thepdfchef.com/handlers/getpdf.ashx?id=5188p)

所以我所做的是在处理程序路径之后添加一个转义字符串，然后在其末尾添加查询字符串，如下所示：

[http://www.thepdfchef.com/handlers/getpdf.ashx/Wellbeing%20And%20Domestic%20Assistance%20From%20John%20Paul?id=5188p](http://www.thepdfchef.com/handlers/getpdf.ashx/Wellbeing%20And%20Domestic%20Assistance%20From%20John%20Paul?id=5188p)

您应该检查无效字符并删除任何可能导致名称危险的字符。

# asp.net - MVC4 .Net 的 API 端点解析器？

> ID：16093083
> 
> 赞同：1
> 
> 时间：2013-04-18T21:07:10.360
> 
> 标签：asp.net, asp.net-mvc

我有一个 Web 应用程序正在对另一台服务器进行 Web API 调用。现在，在我所有的控制器方法中，我都在硬编码 API 的 URL。我想通过构建一个将路由转换为其 API URL 的解析器来避免这种情况。MVC4 中是否有允许我这样做的模式/框架，或者这是我应该手动构建的东西？

```
public class UsersController : ApiController
    {

        public object Get(int id)
        {
            User u = WebApiCaller.GetWebApiResponse<User>
              ("http://localhost:50909/api/Users/1",
              WebApiCaller.HttpMethod.Get);
            return u;
        }

} 
```

# iphone - 当特定 nsdate 过去时触发方法

> ID：16093084
> 
> 赞同：1
> 
> 时间：2013-04-18T21:07:10.580
> 
> 标签：iphone, ios, cocoa-touch, nsdate, nstimer

我希望我的应用程序在设置器 NSDate 调用一个方法（它只需要在应用程序处于活动状态时发生，我将在应用程序委托中处理启动时传递的事件）。

我读到了一些实现这种行为的方法：一方面使用`performSelector:withObject:afterDelay:`（但这对我来说看起来不是一个好方法）或另一方面使用`NSTimer`.

关于应用程序性能的最佳方法是什么？一项要求是您可以取消活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:18:25.277

使用`NSTimer`是一个简单的解决方案。它有一个名为的属性`fireDate`，可以告诉你它什么时候下一次触发。它是一个可写属性，因此您可以将该日期设置为任何您想要的日期。

通过使计时器对象无效来取消事件。

# php - mysql好友在线展示

> ID：16093086
> 
> 赞同：4
> 
> 时间：2013-04-18T21:07:22.140
> 
> 标签：php, mysql, arrays

好的，所以我到处搜索如何解决这个问题。我试图显示在线用户，但不是所有用户，只有你的朋友列表中的用户。

所以我有一个名为 users_online 的表，当用户登录我的网站时，该表中会自动创建 1 行，其中包含日期、ip、名称、user_id 和friend_array（保留所有用户的朋友）

例如，我登录我的网站并在 users_online 表中创建行。我只想在线查看我的朋友，这些朋友存储在friend_array列中（1,5,16,5（那是朋友的ID号））。我如何从friends_array列中获取数据并查看记录了其中的哪一个ID目前，这意味着哪些 id 存在于 user_online 表中并显示在我的个人资料中？

我希望不是令人困惑的问题...

好吧，这就是我的代码..所有存储在 online.php 文件中：

```
// Checking wheter the visitor is already marked as being online:
$inDB = mysql_query("SELECT user_id FROM users_online WHERE user_id=".$userid);

if(!mysql_num_rows($inDB))
{
    // Selects some data required to insert into users_online table from users table
    $DB = mysql_query("SELECT img,fname,friend_array FROM users WHERE user_id=".$userid);
    while($row=mysql_fetch_assoc($DB))
    {
    $img = $row['img'];
    $fname = $row['fname'];
    $farray = $row['friend_array'];
    }
    mysql_query("   INSERT INTO users_online (user_id,ip,img,fname,friend_array)
                    VALUES(".$userid.",'".$intIp."','".$img."','".$fname."','".$farray."')");
}
else
{
    // If the visitor is already online, just update the dt value of the row:
    mysql_query("UPDATE users_online SET dt=NOW() WHERE user_id=".$userid);
}

// Counting all the online visitors:
// Thats where i need to work out with friend array..
// I need to display all online friends only
list($totalOnline) = mysql_fetch_array(mysql_query("SELECT COUNT(*) FROM users_online"));

// Outputting the number as plain text:
echo $totalOnline; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:17:47.117

大伙儿整理！谢谢你的帮助！

```
//Selecting an array from db
$DB = mysql_query("SELECT friend_array FROM users_online WHERE user_id=".$userid);
    while($row=mysql_fetch_assoc($DB))
    {
    $friend_array = $row['friend_array'];
    $friends = array($friend_array); // Array of friends
    $friendIDs = implode(',', $friends);
    }
// Counting all the online friends:

list($totalOnline) = mysql_fetch_array(mysql_query("
        SELECT COUNT(*)
        FROM users_online
        WHERE user_id IN (".$friendIDs.")"));

// Outputting the number as plain text:
echo $totalOnline; 
```

输出是 1 个在线用户，因为我使用 2 个浏览器登录，并且在 users_online 表中创建了 2 行，id 为 1 和 2..id 1 在数组 (2,5,16) 中有 3 个朋友，id 为 2 的用户有(1,3)..所以在每个浏览器中的输出都是 1..Uray！我希望这个问题对某人有所帮助..顺便说一句，我在 msql 表上使用更新功能，如果用户注销，我只是删除 users_online 表中的行:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T21:13:13.007

```
<?php
    $friends = array(1,5,16); // Array of friends
    $friendIDs = implode(',', $friends); // Turns array into string for SQL select statement

    // Gets only friends info from DB
    $sql = "
        SELECT date, ip, name, user_id
        FROM users_online
        WHERE user_id IN (".$friendIDs.")";
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:54:27.667

您应该考虑更改数据库架构。这是一个例子：

用户表：

```
id | name | current_session_id 
```

USER_FRIEND_USER 表（包含用户添加的朋友）：

```
user_id | friend_user_id 
```

会话表：

```
id | user_id | created_at | expires_at 
```

SQL 查询以获取 ID 为“？”的用户的好友列表：

```
SELECT u.id, u.name FROM USER u
  INNER JOIN USER_FRIEND_USER ufu ON (ufu.friend_user_id = u.id)
  INNER JOIN SESSION s ON (s.id = u.current_session_id)
  WHERE ufu.user_id = ? AND s.expires_at >= NOW(); 
```

这是 SQL Fiddle 链接：[http ://sqlfiddle.com/#!2/34f83/1/0](http://sqlfiddle.com/#!2/34f83/1/0)

# javascript - Dojox.Mobile.ComboBox 不响应 Android 上的选择

> ID：16093089
> 
> 赞同：1
> 
> 时间：2013-04-18T21:07:44.557
> 
> 标签：javascript, events, combobox, dojo, dojox.mobile

我使用 Dojox Mobile 开发了一个移动网络应用程序。我的一个视图包含几个`dojox.mobile.ComboBox`控件，这些控件在单击时会按预期打开下拉列表，但当我点击下拉列表中的条目以选择它时不会响应。下拉菜单保持打开状态。

我正在`Android version 4.1.2`使用`Droid RAZR MAXX HD`with `Chrome version 26.0.1410.58`。

该应用程序正在使用`ESRI JavaScript API v3.4compact`其中包括`dojo v1.8`

有没有其他人经历过这个？有修复或解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T16:07:35.370

我已经尝试过`dojox/mobile/tests/test_ComboBox.html`使用`Galaxy S3` `Android 4.1.2`，`Dojo 1.8.3`我确实重现了您在使用 Chrome 和平台浏览器时遇到的问题。

另一方面，这两种浏览器似乎都可以使用`Dojo 1.9.0 rc2`（[http://download.dojotoolkit.org/release-1.9.0rc2/](http://download.dojotoolkit.org/release-1.9.0rc2/)）。因此，现在我建议`Dojo 1.9`在您的上下文中尽可能升级到。

如果升级不是您的选择，我建议您在[http://trac.dojotoolkit.org](http://trac.dojotoolkit.org)开一张票。

旁注，`dojox/mobile/ComboBox`标记为“实验性”。

# java - 每个对象应该处理自己的渲染，还是应该由单独的类处理所有渲染？

> ID：16093092
> 
> 赞同：0
> 
> 时间：2013-04-18T21:08:06.203
> 
> 标签：java, oop, rendering, slick2d

标题不是很清楚，但我不知道如何制定它。因此，请随意建议一个新标题。

我目前正在使用 Slick2D 库用 Java 制作游戏。首先，我在`render()`主类的函数中处理所有渲染。但即使只有几个对象，我发现这变得非常混乱。

简短的示例，尽管原始代码需要渲染更多内容：

```
 g.setBackground(Color.darkGray);
    g.setColor(Color.black);
    g.fillRect(0, 0, gc.getScreenWidth(), 128);                             //draw top UI
    g.fillRect(0, 128, gc.getScreenWidth(), 512, sky, 8, 512);              //draw background
    g.fillRect(0, 720 - 128, gc.getScreenWidth(), 128, ground, 128, 128);   //draw ground
    g.drawImage(charSprite, charX, charY);                                  //draw character
    g.drawImage(weaponSprite, weaponX, weaponY);                            //draw weapon

    for (firedArrows arrow : Arrow) {
        g.drawImage(arrowSprite, arrow.getPosX(), arrow.getPosY)            //draw all arrows
    } 
```

所以，我现在切换到让每个对象自己渲染。在主`render()`函数中，我将调用 的`render()`方法，该方法`level`依次渲染关卡并调用关卡`render()`中对象的函数。

> Main.render() => level.render() => 渲染级别
> 
> ```
>  => character.render() => render character
>                                                => weapon.render() => render weapon
>                          => monsters.render()  => render monsters 
> ```

等等等等。

这两种方法中的哪一种更受欢迎，为什么？或者是否有第三种方法是首选？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:43:22.383

恕我直言，“正确的”面向对象设计是将域模型对象与渲染器分离。桥和/或访客模式可能适用于此。

# dotnetnuke - DNN 模块 - 链接文件

> ID：16093098
> 
> 赞同：0
> 
> 时间：2013-04-18T21:08:25.660
> 
> 标签：dotnetnuke

我使用 Visual Studio 模板创建了一个 DNN 模块。我有与多个 DNN 推车一起使用的相同模块。当我在核心项目中进行更改时，我希望这些更改出现在它下面的项目中：

核心 ReleaseNotes.txt

Smith Cart ReleaseNotes.txt（链接文件）

Revindex ReleaseNotes.txt（链接文件）

我通过右键单击添加现有项目 > 添加 > 链接文件来添加文件。当我尝试使用链接文件安装模块时，我收到一个错误，即找不到 ReleaseNotes.txt。

我不能在 DNN 模块中使用链接文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:24:49.573

你在用我的模板吗？( [http://christoctemplate.codeplex.com](http://christoctemplate.codeplex.com) ) 如果是这样，您可能需要修改 modulepackage.targets 文件来处理链接文件的检索。很可能构建脚本进程对链接文件一无所知，无法找到它进行打包。

我以前没有处理过链接文件，所以我真的不知道会涉及什么。

**更新**：您可以查看这篇关于添加新目标的最后回复 [http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/6115f496-9e63-43e9-8642-2e0b3f413429/](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/6115f496-9e63-43e9-8642-2e0b3f413429/)

# php - 从数据库中检索用户输入

> ID：16093106
> 
> 赞同：-1
> 
> 时间：2013-04-18T21:08:58.537
> 
> 标签：php, mysql

我正在尝试从我的数据库中显示由 id 确定的客户记录。我已经拥有的是 id = 42 的返回值。我想要做的是根据用户在前一页上输入的 id 号（即 $customerid）返回的记录。有什么建议么？

```
<?php
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
 }
$row = mysql_fetch_row($result);

echo $row[0]; // 42
echo $row[1]; // the email value
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:13:41.690

您可以分别使用 $_GET["param_name"] 和 $_POST["param_name"] 通过 GET 或 POST 获取传递给 PHP 的参数。

因此，如果您的页面被调用使用

```
http://path/to/page.php?id=99 
```

您可以在 $_GET["id"] 中获得 99

POST 类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:15:45.223

没有看到你的表格，我假设你会`POST`得到数据。以下是我对如何处理数据的建议：

```
$id=isset($_POST['id'])&&is_numeric($_POST['id'])?$_POST['id']:false;

if ($id) {

  $result = mysql_query("SELECT id,email FROM people WHERE id = $id;");
  if (!$result) {
    echo 'Could not run query: ' . mysql_error();
    exit;
   }
  $row = mysql_fetch_row($result);

  echo $row[0]; // 42
  echo $row[1]; // the email value

} else {
  echo "ERROR: No ID specified.";
} 
```

此外，请考虑使用 PDO，因为 mysql_* 语句已折旧。至少，研究如何防止 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:24:17.510

尝试这个：

搜索.php

```
<form action="show_record.php" method="post">
<input name="customer_id" />
</form> 
```

show_record.php

```
<?php
    // use $_REQUEST to get a parameter from POST OU GET request method
    $id = isset($_REQUEST["customer_id"]) ? $_REQUEST["customer_id"] : 0; 

    $id = mysql_real_escape_string(); // prevent sql inject

    $result = mysql_query("SELECT id,email FROM people WHERE id = '$id'");
    if (!$result) {
        echo 'Could not run query: ' . mysql_error();
        exit;
     }
    $row = mysql_fetch_row($result);

    echo $row[0]; // 42
    echo $row[1]; // the email value

    ?> 
```

因此，您可以通过 POST 或 GET 请求页面 show_record.php，无论如何答案都是一样的。

通过 GET：

本地主机/show_record.php?customer_id=42

# scala - Gatling 测试，每个请求都使用不同的操作

> ID：16093107
> 
> 赞同：1
> 
> 时间：2013-04-18T21:08:58.787
> 
> 标签：scala, performance-testing, gatling

我们正在尝试使用 Gatling 对我们的 REST-ish 应用程序进行压力测试。我们希望我们`users`发布一个不同的`fileBody`每个请求的帖子。

我们的场景如下所示：

```
scenario("100%")
    .during(15 minutes) {
        exec(requestStream.next())
        .pause(118 seconds, 120 seconds)
    }
    .users(2)
    .delay(2 minutes)
    .protocolConfig(httpConf)

...build up several scenarios...

setUp(severalScenarios) 
```

这运行良好，但似乎`exec`只有在第一次构建每个场景时才执行一次。我们认为每次`during(...)`循环出现时都会执行该块，为每个用户提供一个`Request`来自迭代器的新的，每 15 分钟运行一次。

我们错过了什么吗？有没有更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:37:07.990

不，这不是 DSL 的工作方式。DSL 元素实际上是在加载模拟时一劳永逸地解决的构建器。

你想要的是将动态数据注入到你的场景元素中，你必须使用 Feeders、用户会话、Gatling EL 等。你的 requestStream 是什么样的？

# php - 如果数组键不存在，如何将其设置为空？

> ID：16093108
> 
> 赞同：0
> 
> 时间：2013-04-18T21:09:03.220
> 
> 标签：php, arrays, multidimensional-array

例如我有一个数组：

```
array(
    'a' => 'value',
    'b' => 'value',
    'c',
    'd' => 'value',
    'e' => array(
        'f' => 'value',
        'g',
        array(
            'h' => 'value',
            'i'
        )
    ),
    'k',
    'l' => 'value'
); 
```

如果它不存在，我需要递归地遍历它并将 key 设置为 NULL ：

```
array(
    'a' => 'value',
    'b' => 'value',
    NULL => 'c',
    'd' => 'value',
    'e' => array(
        'f' => 'value',
        NULL => 'g',
        array(
            'h' => 'value',
            NULL => 'i'
        )
    ),
    NULL => 'k',
    'l' => 'value'
); 
```

**更新** 我需要这个，因为我需要将数组编码`JSON`并推送到浏览器。问题是`json_encode`如果不存在，sets 键为 0，但如果存在，`NULL`它在浏览器中也保持不变。所以当我在 JS 中使用这个数组时，我可以检测到真正的 0 在哪里以及在哪里创建了 0，因为没有密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:16:49.640

键确实存在，它们只是自动分配的并且是数字的。从[`Arrays`](http://www.php.net/manual/en/language.types.array.php)

> 密钥是可选的。如果未指定，PHP 将使用先前使用的最大整数键的增量。

您无法检测到数字键是明确分配的还是只是被省略了。您只能在创建数组或将值附加到数组时执行此操作。之后，您只能将数字键替换为其他值。

此外

> 如果数组声明中的多个元素使用相同的键，则仅使用最后一个，因为所有其他元素都将被覆盖。

这意味着，您不能用 替换*丢失*的键`NULL`，而只能用其中一个替换。如果将多个键设置为`NULL`，则每次分配都会删除之前的`NULL`键/值对。

最后

> 此外，还会发生以下关键转换：
> 
> *   Null 将被强制转换为空字符串，即键 null 将实际存储在 "" 下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:14:33.437

使用`array_walk_recursive`.

```
array_walk_recursive($array, function (&$value, &$key) {
    $value = NULL; /* for example as you cannot use multiple NULL-keys nor set the key to NULL... */
}); 
```

Ps：有关*为什么*不能使用 NULL 键的解释，请参阅@OlafDietsche 的帖子

# visual-studio-2010 - 无法加载文件 %CommonDir%\publish.tlb

> ID：16093112
> 
> 赞同：4
> 
> 时间：2013-04-18T21:09:10.480
> 
> 标签：visual-studio-2010, visual-studio, visual-c++, visual-studio-2012

每次我安装并尝试启动 Microsoft Visual Studio 2012 时，我都会收到以下弹出窗口，其中包含以下消息：

> 无法加载文件 %CommonDir%\publish.tlb。由于找不到文件，修复此情况的尝试失败。请重新安装程序。

我已经尝试重新安装它很多次，但我仍然是上面的消息。我正在研究它，但我似乎找不到任何东西。有谁知道，如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-29T06:16:54.370

请通过键入 windows+R 键从命令提示符运行此命令：

```
devenv /resetuserdata 
```

问题应该得到解决。

# asp-classic - 如何从服务器（经典 asp）检测请求被取消？

> ID：16093113
> 
> 赞同：2
> 
> 时间：2013-04-18T21:09:14.777
> 
> 标签：asp-classic

我正在用经典的 asp 开发一个 web 应用程序，我遇到的问题与进度条有关。我正在对数据库进行一些过于繁重的操作，因此在计算的每次迭代中间，我正在刷新报告进度。

此页面由 iframe 调用，并根据我们正在更新进度条的内容。问题是，如果我删除了这个 iframe（并且取消了请求），在昂贵的操作结束之前，我无法浏览该站点。

鉴于这种情况，我有两个问题：

1.  从服务器（asp页面）如何检测请求何时被取消？
2.  我可以做些什么来启用多线程会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:35:40.643

1.  您可以检测用户是否仍与**Response.IsClientConnected**连接。因此，您可以将其添加到您长时间运行的代码中，例如：

    ```
    If Not Response.IsClientConnected Then
        'Stop processing
    End If 
    ```

2.  不确定这一点。是只有一个用户启动了请求，还是所有用户都必须等待？IIS 中可能有一个设置（您可以尝试禁用 HTTP 保持活动，但这只是一个猜测）。

# java - 通过按钮单击填充列表视图 - 在同一页面上

> ID：16093115
> 
> 赞同：2
> 
> 时间：2013-04-18T21:09:31.867
> 
> 标签：java, android, listview, onclicklistener

我正在尝试通过单击按钮来填充列表视图，该按钮包含在与列表视图相同的 xml 布局中。

我想在同一页面上有按钮，所以我试图为同一个 xml 上的按钮实现 onclicklistener。然后，此按钮运行我要完成的 listview 任务。

该任务调用 PHP Web 服务来读取我的数据库中的所有数据并将其作为 JSON 数组返回。我想要它做的是显示在列表视图中的按钮下方。

这是我的 Towns_php_activity.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
style="25"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"  
xmlns:android1="http://schemas.android.com/apk/res/android">

<ListView
    android1:id="@android:id/list"
    android1:layout_width="match_parent"
    android1:layout_height="450dp"
    android1:layout_alignParentBottom="true"
    android1:layout_alignParentLeft="true" >
</ListView>

<Button
    android1:id="@+id/buttonGo"
    style="?android:attr/buttonStyleSmall"
    android1:layout_width="wrap_content"
    android1:layout_height="wrap_content"
    android1:layout_alignParentRight="true"
    android1:layout_alignParentTop="true"
    android1:text="GO!" />

</RelativeLayout> 
```

和我的 Town_php_Activity.java 使用上面的布局：

```
package com.example.town;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ListActivity;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.View;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;

public class Town_php_Activity extends Activity{

// url to make request
private static String url = "*************************";

// JSON Node names
private static final String TAG_Data = "data";
private static final String TAG_ID = "_id";
private static final String TAG_Name = "Name";
private static final String TAG_Locale = "Locale2";
private static final String TAG_General = "General";

// contacts JSONArray
JSONArray data = new JSONArray();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.towns_php_activity);
    // Show the Up button in the action bar.
    //setupActionBar();

        Button gettowns = (Button) findViewById(R.id.buttonGo);
        gettowns.setOnClickListener(new View.OnClickListener(){

            public void onClick(View v){
                GetTowns getTowns = new GetTowns();
            }
        });
}

public class GetTowns extends ListActivity{

       // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        data = json.getJSONArray(TAG_Data);

        // looping through All Contacts
        for(int i = 0; i < data.length(); i++){
            JSONObject c = data.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String name = c.getString(TAG_Name);
            String locale = c.getString(TAG_Locale);
            String genre = c.getString(TAG_General);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_Name, name);
            map.put(TAG_Locale, locale);
            map.put(TAG_General, general);

            // adding HashList to ArrayList
            contactList.add(map);
        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_Name, TAG_Locale, TAG_General }, new int[] {
                    R.id.name, R.id.locale, R.id.general });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String named = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String location = ((TextView) view.findViewById(R.id.locale)).getText().toString();
            String gen = ((TextView) view.findViewById(R.id.general)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleListItem.class);
            in.putExtra(TAG_Name, named);
            in.putExtra(TAG_Locale, location);
            in.putExtra(TAG_General, gen);
            startActivity(in);
        }
    });
}
}
}
} 
```

我得到的是这些部分的错误：

```
StrictMode.setThreadPolicy(policy); 
```

此行有多个标记

```
1.Syntax error on token "policy", VariableDeclaratorId expected after this token
2.Syntax error on token(s), misplaced construct(s) 
```

和

```
setListAdapter(adapter); 
```

此行有多个标记：

```
1.Return type for the method is missing
2.Syntax error on token "adapter", VariableDeclaratorId expected after this token
3.Syntax error on token ")", { expected after this token
4.adapter cannot be resolved to a type 
```

请有人能解释一下为什么这对我来说，因为我已经尝试了一切。

感谢大家的时间。对不起，文字墙。

# php - PHP递归数组相交键触发字符串值

> ID：16093122
> 
> 赞同：0
> 
> 时间：2013-04-18T21:09:59.433
> 
> 标签：php, oop, recursion, array-intersect

我目前`PHP Catchable fatal error: Argument 2 passed to NUI::recArrInterKey() must be an array, string given`在尝试递归地与多维数组（灰/白名单）相交时收到错误消息。

`$foo['contact']['im']['provider']`由于某种我无法弄清楚的原因，它似乎在该部分绊倒？

这是我正在使用的示例白名单数组 ($array2)

```
Array
(
    [location] => false
    [network_name] => false
    [interests] => false
    [last_name] => false
    [url] => false
    [significant_other] => false
    [network_domains] => false
    [contact] => Array
        (
            [im] => Array
                (
                    [provider] => false
                )

            [email_addresses] => false
        )

) 
```

以及方法

```
/**
 * Recursive array intersect key
 */
private static function recArrInterKey(array $array1, array $array2) 
{
    $array1 = array_intersect_key($array1, $array2);
    foreach ($array1 as $key => &$value) 
    {
        if (is_array($value)) 
        {
            $value = self::recArrInterKey($value, $array2[$key]);
        }
    }
    return $array1;
} 
```

可以说这是`$array1`

```
Array
(
    [location] => Seattle
    [occupation] => Developer
    [network_name] => foo.network
    [network_region] => foo.region
    [interests] => coding
    [last_name] => daniel
    [url] => false
    [id] => 4665228
    [significant_other] => some girl
    [network_domains] => false
    [contact] => Array
        (
            [im] => Array
                (
                    [provider] => aol
                )
            [phone] => Array
                (
                    [provider] => at&t
                )

            [email_addresses] => dont@mail.me
        )

) 
```

我期待这是一个回报

```
Array
(
    [location] => Seattle
    [occupation] => Developer
    [network_name] => foo.network
    [interests] => coding
    [last_name] => daniel
    [url] => false
    [significant_other] => some girl
    [network_domains] => false
    [contact] => Array
        (
            [im] => Array
                (
                    [provider] => aol
                )
            [email_addresses] => dont@mail.me
        )

) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T21:35:37.423

因为您正在使用`array_intersect_key`，它只比较键 =>`$array1[$key]`可能有一个值作为数组但不是必需的`$array2[$key]`

你的情况是一个方向相交：`recArrInterKey($a1, $a2)`不一样`recArrInterKey($a2, $a1)`

试试这个修复：

```
private static function recArrInterKey(array $array1, array $array2) 
{
    $array1 = array_intersect_key($array1, $array2);
    foreach ($array1 as $key => &$value) 
    {
        if (is_array($value)) 
        {
            $value = is_array($array2[$key]) ? self::recArrInterKey($value, $array2[$key]) : $value;
        }
    }
    return $array1;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T21:35:19.203

好吧 - 你不检查第二个参数：`$array2[$key]`- 这也应该是一个数组

# python - 使用 Python 的 cx_Freeze 安装程序添加开始菜单快捷方式

> ID：16093129
> 
> 赞同：4
> 
> 时间：2013-04-18T21:10:27.340
> 
> 标签：python, cx-freeze

使用 cx_freeze 制作并测试了我的 .msi 安装程序后，除了从最终用户的角度来看的一个重要部分外，它一切正常：在安装程序期间勾选复选框不能创建开始菜单或桌面快捷方式，并且这些操作都没有似乎默认情况下正在发生。

但是，在搜索了邮件档案等之后，我发现***它实际上应该默认创建一个开始菜单快捷方式。***

有谁知道我是否可以添加一些东西`setup.py`来完成这项工作？我不确定这是否仅在我的 PC 上发生，因此如果您可以测试安装程序是否为您创建了快捷方式，这将有所帮助。您可以在[此处](http://www.mediafire.com/download.php?qrdc2g30grd5d21/ "这里")测试安装程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-01-25T11:20:02.083

在您的设置脚本中，添加带有所需参数的“shortcutDir”关键字。该参数可以是 DesktopFolder 或 StartupFolder。“shortcutName”关键字也可用于为快捷方式提供名称。

以下链接也可用作参考，以进一步帮助您解决问题： [使用 cx-freeze 创建一个 msi，将快捷方式添加到桌面](https://stackoverflow.com/questions/15734703/use-cx-freeze-to-create-an-msi-that-adds-a-shortcut-to-the-desktop)

[https://github.com/anthony-tuininga/cx_Freeze/issues/48](https://github.com/anthony-tuininga/cx_Freeze/issues/48)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:36:59.827

转发作为答案：

我不知道单独使用 cx_Freeze 的方法，但是如果您使用 cx_Freeze 准备构建文件夹，则可以使用单独的程序（如 Inno setup）来创建更高级的安装程序。

# css - Zend Framework 2 - 向控制器添加样式

> ID：16093131
> 
> 赞同：1
> 
> 时间：2013-04-18T21:10:31.840
> 
> 标签：css, zend-framework2

我一直在查看文档，但我似乎无法找到一种方法来做到这一点。我知道我可以使用 headScript 将样式表添加到单个视图，但我想将样式表添加到控制器中的所有操作。

有人做过吗？我确信这是一项简单的任务。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:14:17.007

您需要做的是挂钩`dispatch`事件，并根据分派的控制器类型设置适当的布局（推荐）。您也可以直接修改视图并添加所需的资产。

这可以通过在您的`Module`类中使用以下代码来实现：

```
<?php
namespace App;

class Module
{
    public function onBootstrap(MvcEvent $event)
    {
        $event->getApplication()->getEventManager()->getSharedManager()->attach('Zend\Stdlib\DispatchableInterface', MvcEvent::EVENT_DISPATCH, function (MvcEvent $event)
        {
            $application = $event->getApplication();
            $services = $application->getServiceManager();
            $view = $services->get('ViewRenderer');
            $controller = $event->getTarget();
            if ($controller instanceof \App\Controller\Entry)
            {
                $controller->layout('layout/app/entry');
                // -- OR --
                $view->headStyle()->appendStyle('body{background:red}');
            }
        }, 100);
    }
} 
```

我希望这回答了你的问题！

# python - 如何将整个类作为参数传递给另一个类的方法

> ID：16093133
> 
> 赞同：2
> 
> 时间：2013-04-18T21:10:38.117
> 
> 标签：python

是否可以将整个类（而不是实例）作为参数传递给 Python 中的另一个类方法？如果我首先有几个该类的实例，并且需要将其中的任何一个传递给第二类的方法，但没有指定哪个实例，我可以这样做：

```
class First():
    def __init__(self, a, b):
        pass

class Second():
    def __init__(self, c, d):
        pass
    def method(self, First):
        #and how do I call here the whole class First
        #without calling a particular instance here? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:13:42.650

直截了当。

```
def method(self, First):
    First() #instantiation
    First.classmethod()
    First.staticmethod() 
```

在 python 中，类本身就是对象，所以你可以这样调用你`method`的

```
second_instance.method(Any_Class_You_Want) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T21:14:36.433

首先，您不需要在 Python 中指定类型。所以，如果你想`method`举个`First`例子，只需这样做：

```
class Second():
    def __init__(self, c, d):
        pass
    def method(self, first):
        pass

my_first = First(0, 1)
my_second = Second(2, 3)
my_second.method(my_first) 
```

我相信这回答了您真正的问题，即：

> 如果我首先有几个该类的实例，并且需要将其中的任何一个传递给第二类的方法，但没有指定哪个实例......</p>

如果您想确保参数实际上是 First，您始终可以添加`assert isinstance(first, First)`or`if not isinstance(first, First): raise TypeError`或其他任何内容，但通常您不想在 Python 中这样做。“鸭子打字”的全部意义在于您编写了一个接受“任何像`First`实例一样的东西”的函数，而不是一个接受“`First`实例”的函数。

* * *

然后你说：

> 现在我需要在第二个类的方法中对 First 类的变量进行变异：

所以……就去做吧。您的示例在类中没有任何属性`First`，所以让我们添加一些：

```
class First():
    def __init__(self, a, b):
        self.total = a + b 
```

现在，让我们使用它们`Second.method`：

```
class Second():
    def __init__(self, c, d):
        self.total = c + d
    def method(self, first):
        first.total += self.total 
```

所以：

```
>>> my_first = First(0, 1)
>>> my_first.total
1
>>> my_second = Second(2, 3)
>>> my_second.total
5
>>> my_first.total += 2
>>> my_first.total
3
>>> my_second.method(my_first)
>>> my_first.total
8 
```

* * *

或者，如果你的意思是你想改变类中的*类*属性`First`……你甚至不需要一个`First`实例：

```
First.my_class_attribute = 1 
```

* * *

如果你真的*需要*传递一个类本身......好吧，一个类就像其他任何东西一样是一个常规值：

```
class Second():
    def __init__(self, c, d):
        pass
    def method(self, cls):
        pass

my_second = Second(1, 2)
my_second.method(First) 
```

`cls`并且您可以访问from within的类属性`method`，就像在传递实例时访问实例属性一样容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-19T15:13:56.343

你可以做：

```
class Model1:

    def get():
        return '1'

class Model2:
    def get(Model1):
        print('test: '+ str(Model1.get()))

if __name__ == '__main__':
    Model2.get(Model1) 
```

输出是；：`test: 1`

# git - 合并 git 分支时停止覆盖特定代码？

> ID：16093135
> 
> 赞同：1
> 
> 时间：2013-04-18T21:10:41.387
> 
> 标签：git, heroku

我目前正在构建一个将部署到 Heroku 的 web 应用程序。我的 webapp 通过 API 引用它自己的数据。

对于本地开发，我指的是这样的 api：

```
'http://localhost:3000/mywebapp/' + id + '/json' 
```

对于 Heroku，我将不得不做类似的事情：

```
'http://mywebapp.herokuapp.com/' + id + '/json' 
```

我有两个 git 分支，分别是“master”和“dev”。'Master' 被部署到 Heroku 并接收从 'dev' 合并的最终更改。我的问题是必须不断将我的 API 代码从我的 localhost 更改为 heroku url。

有没有办法可以“锁定”主分支中的 heroku URL，所以当我合并本地测试更改时，它不会被覆盖？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:19:16.947

处理这个问题的一个好方法是通过环境变量。您可以通过命令行设置 Heroku 变量，然后在代码中为您的开发环境设置变量。

这是实现它的一种方法 - [http://tammersaleh.com/posts/managing-heroku-environment-variables-for-local-development](http://tammersaleh.com/posts/managing-heroku-environment-variables-for-local-development)

# groovy - IDEA 12.1.1 中的 Groovy 2.1.3 编译失败

> ID：16093136
> 
> 赞同：1
> 
> 时间：2013-04-18T21:10:41.570
> 
> 标签：groovy, intellij-idea

在尝试编译安装了 Groovy 插件并使用 Groovy 版本 2.1.3 的 Gradle 项目时，我在 IDEA 12 中遇到了编译失败。我在 IDEA 中遇到的在命令行上看不到的错误在这里：

[https://gist.github.com/jbrisbin/5416187](https://gist.github.com/jbrisbin/5416187)

我`@CompileStatic`在扩展类中使用，如果这有帮助的话。

关于解决方法的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:14:13.350

显然，当您在最新版本的 IDEA 中创建新项目时，默认情况下会选中“外部构建”选项。

如果您进入设置并取消选中它 [1]，此错误就会消失（并且极度过度的 CPU 使用率也会消失！）。

感谢 JetBrains 对指针的支持。

[1] - [http://img189.imageshack.us/img189/3550/20121206235318.png](http://img189.imageshack.us/img189/3550/20121206235318.png)

# salesforce - 我们应该为所有对象创建自定义页面吗？

> ID：16093148
> 
> 赞同：0
> 
> 时间：2013-04-18T21:11:49.807
> 
> 标签：salesforce

我注意到salesforce 不允许覆盖所有对象的控制功能。假设您想在保存对象时执行某些操作，除非您创建自定义页面并包含标准控制器或扩展，否则无法附加该操作。或者，如果您想在所有页面上添加相同的元标记，我会遇到此限制。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:52:47.740

一般来说 - 没有。粗略地说，如果 Salesforce 不允许您做某事，这通常意味着您做错了很好的暗示。我意识到这听起来像我是一个粉丝，但实际上 - 你能用具体的例子来扩展你的问题，你为什么想做这样的事情？例如，州长限制是邪恶的、烦人的等等——但它们会迫使你编写不会对数据库造成太大压力的有效代码。

> 如果您想在保存对象时做某事

这就是触发器的用途。问自己一个问题，您需要执行的“操作”是否应该仅从 Web UI 发生，或者也应从 API 执行（海量数据加载、智能手机应用程序等）。

> 如果您想在所有页面上添加相同的元标记

您可以通过向侧边栏添加组件来获得类似的结果。它不会涵盖所有情况（例如访问报告/仪表板），但如果不知道您真正想要的是什么，就很难说更多。再说一次 - 自定义 VF 页面覆盖在报告方面也无济于事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T05:59:51.357

我想将此添加为评论，但无法添加。

无论如何，对于您在评论中提到的示例，您可以在主页侧栏组件中添加该 jQuery 插件，并仅在您想要运行此插件的那些自定义对象上激活该插件。您可能已经知道我们可以通过查看记录 ID 的第 3 个字母来推断记录属于哪个对象，使用此逻辑检查记录是否属于您希望插件操作的自定义对象并运行插件.

但正如 eyecream 指出的那样，在侧边栏中添加脚本有其自身的局限性：您不能使用全局变量，侧边栏组件不会加载到报告和仪表板选项卡上等。

-ಸಮಿರ್</p>

# html - 防止 twitter bootstrap 垂直重新定位水平元素，直到特定的窗口宽度

> ID：16093149
> 
> 赞同：0
> 
> 时间：2013-04-18T21:11:52.387
> 
> 标签：html, css, twitter-bootstrap

我喜欢使用引导程序来响应页面的一部分，而对于页面的顶部，我到目前为止编写的代码运行良好，因为它将导航元素与足够大的窗口并排放置当窗口的宽度变小时，它会将元素重新定位在彼此之上（就像它正在被手机使用一样）。

然而，问题在于垂直重新定位发生得太早，或者基本上，当窗口变小但不完全符合手机宽度尺寸时，位置过早地垂直重新定位。

这是我到目前为止所拥有的：

```
 <html>
 <head>
         <meta charset="utf-8">
         <title>Walls</title>
         <link rel="stylesheet" href="http://flip.hr/css/bootstrap.min.css">
 </head>
 <body>

 <div class="container">
 <br>

    <div class="row">

    <div class="span2">

         <p>Donec </p>
         <p><a class="btn" href="#">Click meeee &raquo;</a></p>

    </div>

    <div class="span2">

         <p>Donec  </p>
         <p><a class="btn" href="#">Click meeee &raquo;</a></p>
    </div>

    <div class="span8">
    </div>

    </div><!-- .row -->
 </div><!-- .container -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:27:38.433

> 我有没有办法让它有一个固定的位置，直到窗口达到一定大小，然后垂直重新堆叠？这是我真正的目标

是的。媒体查询 ( [https://developer.mozilla.org/en/docs/CSS/Media_queries](https://developer.mozilla.org/en/docs/CSS/Media_queries) ) ( [http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/) ) 正是您要找的！它可以让你根据屏幕大小设置不同的规则，你可以设置特定的宽度直到一个点，低于这个点你可以应用你当前的 CSS 规则。

# android - 如何在android中将数组列表从一个活动导入另一个活动？

> ID：16093153
> 
> 赞同：0
> 
> 时间：2013-04-18T21:11:58.097
> 
> 标签：android, android-activity, arraylist

我基本上是在创建一个程序，其中一个类具有来自衣柜的数据，基本上是三个数组列表，包括上衣下装和鞋类，如果用户选择生成按钮，它会自动将它们带到生成屏幕。我将如何在要执行的活动中调用数组列表（生成屏幕）？

这是生成屏幕之前的活动中的内容：

```
private ArrayList top = new ArrayList();
private ArrayList bot = new ArrayList();
private ArrayList fw = new ArrayList();

a = new Intent(this, Generator.class);

a.putStringArrayListExtra("Tops", top);
a.putStringArrayListExtra("Bottoms", bot);
a.putStringArrayListExtra("Footwear", fw);
startActivity(a); 
```

我将如何在生成器类中返回这些值以用于它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T01:27:33.350

在你的生成类中，你会放

意图 i = getIntent();

```
 top =i.getStringExtra("top");
    bottom = i.getStringExtra("bottom");
    fw = i.getStringExtra("fw"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:19:40.850

在 onCreate 的 Generator 类中

```
Intent i = getIntent();
ArrayList<String> top = i.getStringArrayListExtra("Tops");
ArrayList<String> bot = i.getStringArrayListExtra("Bottoms");
ArrayList<String> fw = i.getStringArrayListExtra("Footwear"); 
```

# javascript - 使用 Javascript 或 HTML 根据以前的表单答案更改表单选项

> ID：16093154
> 
> 赞同：-1
> 
> 时间：2013-04-18T21:11:58.583
> 
> 标签：javascript, jquery, html, forms, twitter-bootstrap

我想做一些类似于乡村州城市的经典形式。在这种形式中，您选择的国家决定了哪些州显示在状态框中，您选择的州决定了哪些城市显示在城市框中。

更具体地说，对于[这个页面](http://matthewpiatetsky.com/jetstrap-project/screen-04715a0e2d.html)，我想根据选择的宿舍类别来更改显示的宿舍。我知道这可能可以用纯 html 或 javascript 或 jquery 来完成，但不确定如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:17:49.690

将宿舍类型下拉列表放在一个名为“foo”的地方。捕获类别下拉列表的 onChange 事件，重写“foo”的内容以包含带有相关选项的下拉列表。

# jquery - 如何在悬停事件中将内容从一个元素附加到另一个元素

> ID：16093155
> 
> 赞同：0
> 
> 时间：2013-04-18T21:12:06.287
> 
> 标签：jquery, events, dom

所以我有四个标题链接，我想从中获取属性值并附加到外部的空 div。

这是[jsFiddle](http://jsfiddle.net/JfGhY/3/)

我遇到问题的部分是javascript

```
$('li a.link').hover(
    function(){
        $(this).text().appendTo('.container');
    }); 
```

我不在乎我是抓住属性值还是里面的文本，但似乎都不起作用。我已经让空 div 说“Hello World！” 当我将鼠标悬停在链接上时，但我无法获取标题值或 HTML 中的文本，感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:26:18.440

我假设如果这是一个悬停，即使你也希望文本在“Li a”的鼠标离开时消失，所以我为你做了一个 jsFiddle 示例来做这两个。请检查一下，如果有任何问题，请随时提出。

```
$(document).on('mouseenter','li a',function(){
    $('.container').text($(this).attr('title'));
}).on('mouseleave','li a', function(){
    $('.container').text('');
}); 
```

[http://jsfiddle.net/danieljordan13/JfGhY/11/](http://jsfiddle.net/danieljordan13/JfGhY/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:14:08.027

```
$('li a.link').hover(function(){
        var title = $(this).attr('title');
        $('.container').append(title);
}); 
```

[**小提琴**](http://jsfiddle.net/mohammadAdil/JfGhY/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:15:11.200

我建议，如果你想附加文本：

```
$('li a').hover(
    function(){
        var text = $(this).text();
        $('.container').text(function(i,t){
            return t + ' ' + text;
        });
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/JfGhY/4/)。

或者，如果要替换文本：

```
$('li a').hover(
    function(){
        var text = $(this).text();
        $('.container').text(text);
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/JfGhY/6/)。

重新阅读了这个问题，并看到你想使用这些`title`属性，我建议改为：

```
$('li a').hover(
    function(){
        var title = this.title;
        $('.container').text(title);
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/JfGhY/8/)。

参考：

*   [`text()`](http://api.jquery.com/text/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T21:16:07.657

我更喜欢使用`append()`之前`appendTo()`

这有效：

```
$('.container').append($(this).text()); 
```

见[http://jsfiddle.net/JfGhY/5/](http://jsfiddle.net/JfGhY/5/)

要附加标题：

```
$('.container').append($(this).attr('title')); 
```

[http://jsfiddle.net/JfGhY/10/](http://jsfiddle.net/JfGhY/10/)

# wpf - (WPF) 将 OneWayToSource 与转换器绑定会导致立即异常

> ID：16093157
> 
> 赞同：5
> 
> 时间：2013-04-18T21:12:25.880
> 
> 标签：wpf, data-binding, converter

我在一个窗口中有一个 TextBox，我使用以下简单的转换器将其绑定到一个值：

```
public class TestConverter : MarkupExtension, IValueConverter {
    public override object ProvideValue(IServiceProvider serviceProvider) {
        return this;
    }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {
        return "x";
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) {
        return "y";
    }
} 
```

绑定本身的表现如下：

```
Binding bnd = new Binding(nm); // 'nm' is a string with the binding path which is just
                               // a property name of the future source object
bnd.Converter = new TestConverter();
bnd.Mode = BindingMode.OneWayToSource;
oj.Fe.SetBinding(TextBox.TextProperty, bnd); // <--- Exception occurs here 
```

如果我删除转换器或将模式设置为 TwoWay，则不会引发异常。为什么会引发异常，我该如何解决或至少解决该问题？

**编辑：**似乎必须在绑定之前在这种情况下提供数据上下文，以免引发异常。为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T03:42:58.380

我相信您会收到该错误，因为您将 TextBox.TextProperty 绑定到 nm，但 TextBox.TextProperty 为空。使用双向绑定时，它必须首先将值从 nm 发送到 TextBox.TextProperty，将其设置为“x”，以便在尝试以另一种方式绑定时不再为空。删除转换器可能还会删除发现 TextBox.TextProperty 为 null 并产生异常的检查。

因此，如果您要添加该行：

```
oj.Fe.Text = "something"; 
```

甚至可能：

```
oj.Fe.Text = string.Empty; 
```

前

```
oj.Fe.SetBinding(TextBox.TextProperty, bnd); 
```

那你应该没问题。

编辑：实际上它不是空值，而是导致异常的空源类型。

我使用反编译器进行了更深入的研究，看起来您得到的异常是因为 sourceType 为空。导致空引用异常的“IsValidValueForUpdate”函数仅在有转换器时运行，这解释了为什么在删除转换器时没有得到它。该代码在转换回的过程中运行，这解释了为什么它以“OneWayToSource”作为绑定模式发生。无论如何，它可能只是框架中的一个小错误，因此在绑定之前设置 datacontext 以提供 sourceType 似乎是一个很好的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:47:21.170

你能做这个吗？我相信 Binding 的构造函数接受字符串路径，并且您正在传递字符串字段。所以编译器工作正常，但 WPF 引擎会感到困惑。同样，我假设 nm 是绑定源属性，您希望从目标文本框获取更新。

```
Binding bnd = new Binding("nm"); 
```

我写了这段代码，它奏效了。

```
<Grid>
        <TextBox Name="fe"></TextBox>
    </Grid>
// set datacontext
Binding bnd = new Binding("nm");
bnd.Converter = new TestConverter();
bnd.Mode = BindingMode.OneWayToSource;
fe.SetBinding(TextBox.TextProperty, bnd);
fe.Text = "Hi";

        public string nm 
        { 
            get
            {
                return _nm;
            }

            set
            {
                _nm = value;
            }
        } 
```

# javascript - 将 JSON 值合并到变量或字符串中

> ID：16093159
> 
> 赞同：1
> 
> 时间：2013-04-18T21:12:30.473
> 
> 标签：javascript, jquery, json, merge, jsonp

I JSON 节点具有相同的标题，但每个节点中的纬度和经度值不同。我需要检查相同的标题值，然后将纬度和经度值合并到地图 API 的 url 中。我需要它按纬度，经度，纬度，经度等顺序排列......我只是不知道此时该做什么。感谢您的任何帮助或建议。

JS VAR

```
<img class="detail_map" src="http://open.mapquestapi.com/staticmap/v4/getplacemap?size=320,240&zoom=15&location=' + data.nodes.Latitude + ',' + data.nodes.Longitude + '&imagetype=jpeg&showicon=blue-1"> 
```

JSON 对象

```
var data = fl({
"nodes":[
    {"node":{
        "title":"180","Address":"555 Market St. San Francisco, CA United States See map: Google Maps","
        Latitude":"37.789952","
        Longitude":"-122.400158"}},
    {"node":{
        "title":"180","Address":"Epic Roasthouse (399 Embarcadero) San Francisco, CA United States See map: Google Maps","
        Latitude":"37.797677","
        Longitude":"-122.394339"}},
    {"node":{
        "title":"180","Address":"Mason &amp; California Streets (Nob Hill) San Francisco, CA United States See map: Google Maps","
        Latitude":"37.791556","
        Longitude":"-122.410766"}},
    {"node":{
        "title":"180","Address":"Justin Herman Plaza San Francisco, CA United States See map: Google Maps","
        Latitude":"37.774930","
        Longitude":"-122.419416"}},
    {"node":{
        "title":"180","Address":"200 block Market Street San Francisco, CA United States See map: Google Maps","
        Latitude":"37.793133","
        Longitude":"-122.396560"}} 
]}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:55:01.913

我必须创建一个函数来合并地址和纬度和经度。查看[jsFiddle](http://jsfiddle.net/pbpyrojust/HbNW4/16/)以查看它的实际效果。

```
function fl(data){
//data = JSON.parse(data);
//Array to hold movie titles   
var movieTitles = []; 
//Assign Movies to to movies Array and ensure unique
for (var i=0; i < data.nodes.length; i++)
{
    //Look for the current title in the movieTitles array
    var movieIndex = movieTitles.indexOf(data.nodes[i].node.title);
    if (movieIndex>-1) //If the title already exists
    {
        //Merge all the properties you want here
        movies[movieIndex].Address += ", " + data.nodes[i].node.Address;
        if(!movies[movieIndex].Coords) movies[movieIndex].Coords = [];
        movies[movieIndex].Coords.push(
            data.nodes[i].node.Latitude + "," + data.nodes[i].node.Longitude
        );
    }
    else
    {
        //var address = movies[movieIndex].Address; movies[movieIndex].Address = address.replace(/^\s*/,'');
        //Add movie to movies array
        movies.push(data.nodes[i].node);
        //Add movie title to movieTitles array
        movieTitles.push(data.nodes[i].node.title);

    }
}

displayLinks(); //Load all the links
//showCast(0); //Display details for first item 
```

}
//});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:19:37.177

您可以使用[`$.extend()`](http://api.jquery.com/jQuery.extend/)合并两个对象的功能，不同的属性将被替换。

例子：

```
var newData = $.extend(data1, data2);
// Assuming data1, data2 are objects; 
```

如果您需要将字符串 JSON 转换为对象，请使用[`$.parseJSON()`](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:30:00.963

您可以尝试做这样的事情，其中​​ var url_part 用于替换 img src 中的“data.nodes.Latitude + ',' + data.nodes.Longitude”：

```
var url_part = '';
$.each(data.nodes, function(key,val){
    url_part += val.node.Latitude+","+val.node.Longitude+",";
}); 
```

但在使用 url_part 之前，您需要删除最后一个昏迷...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T21:31:04.563

使用 jQuery 的`$.map()`. 比较对象的 node.title 值，然后从那里返回您所期望的字符串。完成后，加入数组`,`。

```
var locs = $.map(fl.nodes, function(obj,i){
    return obj.node.title == '180' ? 'latitude='+obj.node.Latitude+'&longitude='+obj.node.Longitude : '';
}).join(','); 
```

会回来`lat1,long1,lat2,long2,lat3,long3,lat4,long4,lat5,long5`

[工作的jsFiddle](http://jsfiddle.net/VBsEw/)

**编辑 1**

添加了对动态标题的支持。

```
function getNodesByTitle(title){
    return $.map(fl.nodes, function(obj,i){
        return obj.node.title == title ? 'latitude='+obj.node.Latitude+'&longitude='+obj.node.Longitude : '';
    }).join(',');
} 
```

在理论实践中：

```
var locString = getNodesByTitle('your title here'); 
```

# c# - 如何刷新非计算字段的格式并刷新可填写 PDF 表单中的计算字段

> ID：16093162
> 
> 赞同：1
> 
> 时间：2013-04-18T21:12:53.817
> 
> 标签：c#, vb.net, itextsharp

我有一个 PDF 模板文件，我试图用“MyDocument”的内容填充它。所有字段都很好，但问题是我的 PDF 中的“计算”字段没有刷新，其他字段的格式设置也没有。如何使用 ITextSharp 使计算字段刷新和格式化工作？（我不在乎我是否得到 C# 或 VB.NET 答案）

VB.NET：

```
 Public Shared Sub Serialize(ByVal stmt As MyDocument, ByVal file As FileInfo)
                    Dim reader As New PdfReader(TemplateFilePath.FullName)
                    Dim pdfStamper As New PdfStamper(reader, New FileStream(file.FullName, FileMode.Open))
                    Try
                        With itsDaDetailFields
                            .MoveFirst()
                            While Not .EOF
                                Dim pdfFieldName As String = NsT(Of String)(!PDFFieldName, Nothing)
                                If Not String.IsNullOrEmpty(pdfFieldName) Then
                                    Dim value As String = NsT(Of String)(stmt.GetValueFromPDFField(pdfFieldName), Nothing)
                                    If Not String.IsNullOrEmpty(value) Then
                                        pdfStamper.AcroFields.SetField(pdfFieldName, value)
                                    End If
                                End If
                                .MoveNext()
                            End While
                        End With

                    Finally
                        pdfStamper.FormFlattening = False
                        reader.Close()
                        pdfStamper.Close()
                    End Try
                End Sub 
```

C＃：

```
public static void Serialize(MyDocument stmt, FileInfo file)
{
    PdfReader reader = new PdfReader(TemplateFilePath.FullName);
    PdfStamper pdfStamper = new PdfStamper(reader, new FileStream(file.FullName, FileMode.Open));
    try {
        var _with1 = itsDaDetailFields;
        _with1.MoveFirst();
        while (!_with1.EOF) {
            string pdfFieldName = NsT<string>(_with1["PDFFieldName"], null);
            if (!string.IsNullOrEmpty(pdfFieldName)) {
                string value = NsT<string>(stmt.GetValueFromPDFField(pdfFieldName), null);
                if (!string.IsNullOrEmpty(value)) {
                    pdfStamper.AcroFields.SetField(pdfFieldName, value);
                }
            }
            _with1.MoveNext();
        }

    } finally {
        pdfStamper.FormFlattening = false;
        reader.Close();
        pdfStamper.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-03T18:46:59.550

因此，我根据使用 iText 的以下帖子（Java 版本的 ITextSharp - .net 的过程略有不同）弄清楚了如何在 .NET 中执行此操作。请随意阅读以下主题，以获得对 iText 中相同问题的完整解释和讨论：

[http://itext-general.2136553.n4.nabble.com/Setting-acroform-value-via-iText-messes-with-acrofield-formating-td2167101.html](http://itext-general.2136553.n4.nabble.com/Setting-acroform-value-via-iText-messes-with-acrofield-formating-td2167101.html)

有两种方法可以做到：

**(1) 提供如下显示值：**

```
pdfStamper.AcroFields.SetField(pdfFieldName, value, <formatted value>) 
```

如：

```
pdfStamper.AcroFields.SetField(pdfFieldName, 1000, "1,000") 
```

这对我来说不是最佳选择，因为我无法从我的 PDF 文件中以编程方式确定哪些文本框正在以哪种格式格式化它们的内容。有些格式略有不同（有些有 2 个小数位，有些有 0，有些有很多），所以如果您可以跟踪文本框如何格式化其数据，或者它们是否都做同样的事情，那么这可能会起作用。这也没有解决计算字段问题，只是似乎解决了格式问题。

**(2) 将 javascript 提供给“DIRTY”值，以便对其进行格式化和计算：**

我的代码变成了以下内容，因为我只需要格式化数值，但这可以扩展为处理其他类型（参见下面的讨论）。

```
Dim reader As New PdfReader(TemplateFilePath.FullName)
Dim pdfStamper As New PdfStamper(reader, New FileStream(file.FullName, FileMode.Open))

 With pdfStamper.AcroFields
     If IsNumeric(value) Then
        Dim js As String = String.Format("var f = this.getField('{0}'); f.value = 1 * f.value;", pdfFieldName)
        pdfStamper.JavaScript = js
     End If
     .SetField(pdfFieldName, value)
End With

reader.Close()
pdfStamper.Close() 
```

所以诀窍是你需要使用 JavaScript 来获取值，然后 Reader 将应用格式。您可以根据下面提供的完整解决方案对此进行更多概括并处理更多值类型（对不起，它在 java 中，但可以适应 .net）：

```
import java.io.IOException;
import java.util.ArrayList;

import com.lowagie.text.pdf.PRStream;
import com.lowagie.text.pdf.PdfDictionary;
import com.lowagie.text.pdf.PdfName;
import com.lowagie.text.pdf.PdfObject;
import com.lowagie.text.pdf.PdfReader;
import com.lowagie.text.pdf.PdfString;
import com.lowagie.text.pdf.AcroFields.Item;

public class AcroFieldJSScanner {

    protected ArrayList<String> functions = null;

    public void getFieldFunctions(Item item) throws IOException{

        PdfDictionary dict;

        for (int i = 0; i < item.size(); i++) {
            dict = item.getMerged(i);

            scanPdfDictionary(dict);

//          dict = item.getWidget(i);
//          
//          scanPdfDictionary(dict);
        }
    }

    protected void scanPdfDictionary(PdfDictionary dict) throws IOException{

        PdfObject objJS = null;
        String func = null;

        objJS = dict.get(PdfName.JS);
        if (dict.get(PdfName.S) != null &&  objJS != null && objJS.isString()){

            PdfString strJS = (PdfString)objJS;
            if (functions == null){
                functions = new ArrayList<String>();
            }

            func = strJS.toString();
            functions.add(func);
        }else if (dict.get(PdfName.S) != null &&  objJS != null){

            for(Object obj : dict.getKeys()){
                PdfName pdfName = (PdfName)obj;

                PdfObject pdfObj = dict.get(pdfName);

                if (pdfObj.isIndirect()){
                    PdfObject pdfIndirectObject = PdfReader.getPdfObject(pdfObj);

                    func = new String(PdfReader.getStreamBytes((PRStream)pdfIndirectObject));

                    if (functions == null){
                        functions = new ArrayList<String>();
                    }

                    functions.add(func);
                }else{
                    scanPdfObject(pdfObj);
                }

            }

        }else{
            for(Object obj : dict.getKeys()){
                PdfName pdfName = (PdfName)obj;

                PdfObject pdfObj = dict.get(pdfName);
                scanPdfObject(pdfObj);
            }
        }

    }

    protected void scanPdfObject(PdfObject parentPdfObject) throws IOException{

        if (parentPdfObject.isDictionary()){
            scanPdfDictionary((PdfDictionary)parentPdfObject);
        }else if (parentPdfObject.isIndirect()){
            PdfObject pdfObject = PdfReader.getPdfObject(parentPdfObject);
            scanPdfObject(pdfObject);
        }
    }

    public ArrayList<String> getFunctions() {
        return functions;
    }

    public String toString(){

        StringBuilder sb = null;

        if (getFunctions() != null){
            sb = new StringBuilder();

            for (int i =0; i< getFunctions().size();i++) {

                sb.append(getFunctions().get(i)).append("\n");      
            } 
        }else{
            return "No functions found";
        }

        return sb.toString();
    }

} 
```

然后，如果您知道 Adob​​e 将调用的 javascript 脚本（使用上面的代码），您就知道数据是什么类型，因此您可以“弄脏”数据。以下是一些 adobe 数据类型以及这些数据类型背后的 javascript：

```
public String getFieldFormat(Item item){ 

       PdfDictionary aa = (PdfDictionary) item.getMerged(0).get(PdfName.AA); 
        if (null != aa) 
            { 
                PdfDictionary f = (PdfDictionary)PdfReader.getPdfObject(aa.get(PdfName.F));
                 if (null != f) 
                { 
                    PdfString js = (PdfString)PdfReader.getPdfObject(f.get(PdfName.JS));
                     if (null != js) 
                    { 
                        String sScriptName = js.toString(); 
                        if (sScriptName.contains("AFNumber_Format")) 
                            System.out.println("Format : Number"); 
                        else if (sScriptName.contains("AFDate_Format")) 
                        System.out.println("Format : Date"); 
                        else if (sScriptName.contains("AFTime_Format")) 
                        System.out.println("Format : Time"); 
                        else if (sScriptName.contains("AFSpecial_Format")) 
                        System.out.println("Format : Special"); 
                        else if (sScriptName.contains("AFPercent_Format")) 
                        System.out.println("Format : Percent"); 
                        else 
                        System.out.println("Format : Custom");; 

                        System.out.println("JS: "); 
                        System.out.println(js); 
                    } 
                } 
            } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T20:15:57.707

就我而言，我发现：

1.  使用 FormFlatning 可以防止 javascript 更新字段
2.  使用 SetField 设置字段不会触发格式化。

所以我不得不更改 javascript 以实际编写完整的值，而不是仅仅弄脏它。像这样：

```
JS &= String.Format("var f = this.getField('{0}'); f.value = '{1}';",
                    FieldName.Key, NewFieldValue) 
```

我将每个字段的 javascript 代码附加到字符串 JS 中，然后`pdfStamper.Javascript = JS`在最后调用。

# java - 将对象添加到现有的 ArrayList

> ID：16093163
> 
> 赞同：0
> 
> 时间：2013-04-18T21:12:55.647
> 
> 标签：java, android, arraylist

我有一个包含一个类中的对象的arrayList，而在另一个类中，我正在获取包含所有对象的arrayList，并希望在最后向该ArrayList 添加另一个新对象。

我的代码目前是这样的：

```
ArrayList<Student> studentName = new ArrayList<Student>();
Student student = new Student();
student.name("Jhon");
studentName.add(student);
//In another class I am getting the arrayList with existing objects

for (Student stu : ArrayList<Student> student){

System.out.printLn(stu.name);//prints existing student Name

// Here I want to add a new student name in the name arraylist at the end.

// output should be suppose.."Jhon", "Becky".
} 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T12:53:15.677

尝试使用 ArrayList.addAll(...)

# ubuntu - 当我尝试在 MonoDevelop 上编译时，有谁知道这个错误是什么？

> ID：16093164
> 
> 赞同：0
> 
> 时间：2013-04-18T21:12:56.057
> 
> 标签：ubuntu, mono, compiler-errors, monodevelop

当我尝试编译解决方案时，出现此错误：

```
Error CS1902: Invalid debug option `+'. Valid options are `full' or `pdbonly' (CS1902) (TAG) 
```

查看来自 IDE 的错误：

![MonoDevelop 编译错误](https://i.stack.imgur.com/3ALKB.jpg)

有关此错误的更多信息：

```
MonoDoc exited with a exit code = 1. 
```

结束我不知道这是否与另一个错误有关，当我运行时`monodoc`：

```
$ monodoc
grep: /etc/gre.d/*.conf: Arquivo ou diretório não encontrado (file or directory not found)

Unhandled Exception:
System.TypeLoadException: Could not load type 'Monodoc.EditMerger' from assembly 'monodoc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756'.
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeLoadException: Could not load type 'Monodoc.EditMerger' from assembly 'monodoc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=0738eb9f132ed756'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T10:30:52.823

Seems it's well-known problem. If you are using your custom Makefile for compilation just remove "+" key from it. Like here: [https://github.com/OpenRA/OpenRA/pull/2596/files](https://github.com/OpenRA/OpenRA/pull/2596/files)

This is affected only for compilation debug version, so you can change target from "Debug|x86" to "Release|x86" (at least it helps for me).

# asp.net-mvc - POST 请求不适用于有效负载，但适用于查询字符串参数

> ID：16093168
> 
> 赞同：0
> 
> 时间：2013-04-18T21:12:56.947
> 
> 标签：asp.net-mvc, web-services, web, asp.net-web-api

我有来自 http web 客户端（c#）的 POST 请求的 web api。我正在使用 chrome 的 REST 控制台来调试我的 web api。当我在查询字符串中传递参数时，它工作正常，但是当我将参数作为原始正文传递时，它不起作用。我不知道我错过了什么。

下面是我的代码。

控制器：

```
 [HttpPost]
        public  JsonResult VerifyUserAuth([Bind(Prefix = "t"), Required] string token,
                                         [Bind(Prefix = "ApplicationGUID"), Required] string applicationGUID,
                                         string userID,
                                         string password)
        {
            return Json(NotificationsSecurity.VerifyUserAuth(_connectionstring, userID, password),
                        JsonRequestBehavior.AllowGet);
        } 
```

当我在 VS 调试器中调试它并将参数作为 RAW 正文传递时，它显示为空。但是当我作为查询字符串传递时，我正在正确接收所有参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:13:18.687

当您指定多个简单类型时，Web API 默认不使用格式化程序。格式化程序知道如何将正文有效负载映射到表示模型的对象实例中。对于简单类型，模型绑定器主要用于 URI 和 RouteData 参数。我将对您的操作进行一些小改动以正确解析有效负载。

```
public class VerifyUserAuthModel
{
  public string Token { get; set; }
  public string ApplicationGUID { get; set; }
  public string UserID { get; set; }
  public string Password { get; set; }
}

public  JsonResult VerifyUserAuth(VerifyUserAuthModel model)
{
} 
```

# linux - 管道标准输出的 tee 效果输出其文件

> ID：16093175
> 
> 赞同：2
> 
> 时间：2013-04-18T21:13:21.167
> 
> 标签：linux, bash, io-redirection

我遇到了[如何使用 Unix（或 Windows）中的（最好是未命名的）管道将一个进程的标准输出发送到多个进程的答案？](https://stackoverflow.com/questions/60942/how-can-i-send-the-stdout-of-one-process-to-multiple-processes-using-preferably)`grep`当我注意到一个奇怪的问题时，我正在玩弄。以下工作如我所料：

```
$ while [ 1 ]; do sleep 1 ; echo tick; done | tee >(grep -o ti) >(grep -o ic) >(grep tick) >/dev/null
ic
ti
tick
ic
tick
ti
^C 
```

所有三个`grep`命令都应用于​​循环的输出。

但是，如果我将 的输出通过管道`tee`传输到 grep 中（而不是将其重定向到 /dev/null），`grep`则文件上的 s 将停止工作：

```
$ while [ 1 ]; do sleep 1 ; echo tick; done | tee >(grep -o ti) >(grep -o ic) | grep tick
tick
tick
^C 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:19:16.830

我冒昧的猜测一下...

```
tee >(grep -o ti) >(grep -o ic) >(grep tick) >/dev/null
tee >(grep -o ti) >(grep -o ic) | grep tick 
```

在第一个命令中，参数是从左到右处理的，因此`grep -o ti`它的输出将转到标准输出，其他两个进程替换也是如此，然后将标准输出`tee`重定向到`/dev/null`（但进程已经启动原始标准输出）。

在第二个命令中，`grep tick`在 shell 工作之前已经设置了管道，因此管道`>(grep -o ti)`的标准输出`grep`顺着管道传输。该命令不选择`ti`和行。如果您将其更改为，您可能也会看到and行。`ic``grep tick``grep i``ti``ic`

我不得不将命令调整为：

```
while true; do echo tick; done |
tee >(grep -o ti) >(grep -o ic) | grep i | grep -v tick 
```

查看`ti`and`ic`命令。这与使用标准 I/O 进行缓冲有关；命令的输出`grep`将进入管道，因此它是完全缓冲的，并且输出分批出现。除非我放弃`sleep 1`，否则要花很长时间才能看到替代输出。

一个更好的查看输出的命令是：

```
while true; do echo tick; done |
tee >(grep -o ti) >(grep -o ic) | grep i | uniq 
```

输出包含如下行：

```
ictick
tick
ic
i
ti
tick
ic
tick
ti
ttick
ic
itick
tick
ic
i
ti
tiic
ictick
tick 
```

这个故事的寓意可能是确保每个流程替换的输出都转到一个已知文件。

# javascript - 取消选中一个复选框，因为选中另一个复选框并提交表单

> ID：16093177
> 
> 赞同：0
> 
> 时间：2013-04-18T21:13:23.923
> 
> 标签：javascript, checkbox, submit

我正在尝试将两个`javascript`功能组合成一个功能。

所以，我有这段代码：

```
<form name="form1" action="testing_page2.php" method="GET">
<p><input id="Main" type="checkbox" name="Main" value="1" onClick="javascript:uncheckSecondary(this);" />Main</p>
<p><input id="Secondary" type="checkbox" name="Secondary" value="2" />Secondary</p>
</form>

<script language="javascript" type="text/javascript">
function uncheckSecondary(obj)
        {
            if (obj.checked == true)
            {
                document.getElementById("Secondary").checked = false;
            }
        }
</script> 
```

在这里，当页面加载时，**Secondary**复选框将被**选中**（我有一个`if clause`，但它与我的问题无关），但**Main**未被选中。当我选中**Main**复选框时，**Secondary**是**unchecked**。

而且我还有另一段代码：

```
<script language="javascript">
function checkRefresh(value)
{
    document.form1.submit();
}
</script>
<form name="form1" action="testing_page2.php" method="GET">
    <p><input id="Main" type="checkbox" name="Main"  value="1" onClick="this.form.submit();"/>Main</p> 
    <p><input id="Secondary" type="checkbox" name="Secondary" value="2"  onClick="this.form.submit();"/>Secondary</p>

</form> 
```

在这里，当我选中/取消选中任何复选框时，表单已提交。

编辑：

我想要的是结合`function checkRefresh(value)`and `function uncheckSecondary(obj)`，这样当我检查 Main 时，Secondary 未选中并提交表单，**反之亦然**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:30:56.417

试试这段代码...

```
<script>
function checkRefresh(value)
{
    document.form1.submit();
}    

function uncheck(check)
{
    var prim = document.getElementById("Main");
    var secn = document.getElementById("Secondary");
    if (prim.checked == true && secn.checked == true)
    {
        if(check == 1)
        {
            secn.checked = false;
            checkRefresh();
        }
        else if(check == 2)
        {
            prim.checked = false;
            checkRefresh();
        }
    }

}
</script>

<form name="form1" action="#" method="POST">
    <p><input id="Main" type="checkbox" name="Main"  value="1" onClick="uncheck(1);"/>Main</p> 
    <p><input id="Secondary" type="checkbox" name="Secondary" value="2"  onClick="uncheck(2)"/>Secondary</p>

</form> 
```

只有当您声明的条件适用时，它才会提交表格。

欢迎使用 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:39:03.367

```
<form name="form1" action="#" method="POST">
    <p><input id="Main" type="checkbox" name="Main"  value="1" onClick="if (this.checked) document.getElementById('Secondary').checked = false; this.form.submit();"/>Main</p> 
    <p><input id="Secondary" type="checkbox" name="Secondary" value="2" onClick=""/>Secondary</p>
</form> 
```

# vba - 非空单元格的条件格式 - Excel VBA 2010

> ID：16093179
> 
> 赞同：1
> 
> 时间：2013-04-18T21:13:29.853
> 
> 标签：vba, excel, conditional-formatting

我有3个相关矩阵：

输入相关性：

```
 Acc & Health     AE     Avemco Aviation      Bail
Acc & Health         1           0.15        0.15            0.15
AE                  0.15          1          0.15            0.25
Avemco Aviation     0.15         0.15         1              0.15
Bail                0.15         0.25        0.15              1 
```

输出相关性：

```
 Acc & Health      AE     Avemco Aviation      Bail
Acc & Health         1          
AE                 0.158          1     
Avemco Aviation    0.139        0.158            1  
Bail               0.177        0.258          0.130           1 
```

比较相关性（输入 - 输出相关表的绝对值）：

```
 Acc & Health      AE     Avemco Aviation      Bail
Acc & Health       0.000             
AE                 0.008        0.000       
Avemco Aviation    0.011        0.008          0.000    
Bail               0.027        0.008          0.020         0.000 
```

如果输入相关表值大于 0.2 和另一个数学条件并且比较相关表中的单元格不为空，我将对比较相关表应用条件格式：

但是，由于输入值大于 0.2，我仍然在 E3（AE 和 Bail）等空白单元格中进行格式化。如何解决此问题，以便不对空白单元格进行格式化？

我在 VBA 中的部分代码：

```
.Range(.Cells(5, 2), .Cells(LastRowAgg, LastColumnAgg)).Select
Selection.FormatConditions.Add Type:=xlExpression, Formula1:= _
                "=AND((('Input Correlation'!B5:AT49-'Aggregate Loss Correlation'!B5:AT49)/'Input Correlation'!B5:AT49)>=(1/3),'Input Correlation'!B5:AT49>=0.2,B5:AT49<>"" "")"
            Selection.FormatConditions(Selection.FormatConditions.Count).SetFirstPriority
            With Selection.FormatConditions(1).Interior
                .PatternColorIndex = xlAutomatic
                .Color = 255
                .TintAndShade = 0
            End With
        Selection.FormatConditions(1).StopIfTrue = False 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T18:48:06.243

我建议您将 if 语句与 isblank() 函数一起使用：

```
... Formula1:="=IF(isblank(a32);;and(a32<=a$19;a32>a$18))" 
```

如果`isblank`是`True`，则不执行其他任何操作来评估公式`(and(a32<= ... )`

# mysql - 创建触发器时出现mysql错误

> ID：16093181
> 
> 赞同：-1
> 
> 时间：2013-04-18T21:13:36.153
> 
> 标签：mysql, sql, triggers

嗨，我是 mysql 触发器的新手 .. 这是我的第一个触发器 .. 我试图运行但收到此错误

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'DECLARE x INT; 附近使用的正确语法；SET x = new.product_price - old.product_price; 在第 9 行插入'

```
delimiter $$

CREATE TRIGGER product_update

BEFORE update ON w3xab_virtuemart_product_prices
FOR EACH ROW
BEGIN

IF (new.product_price <> old.product_price)
THEN 

    DECLARE x decimal(10,2) default 0;
    SET x = new.product_price - old.product_price;
    INSERT into product_price_log(virtuemart_product_id, old_product_price, new_product_price, product_price_update, price_update_date)
    VALUES (new.virtuemart_product_id, old.product_price, new.product_price, new.x, curtime());

END IF;
END$$

delimiter ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:17:57.383

DECLARE 仅允许在 BEGIN ... END 复合语句中使用，并且必须位于其开头，在任何其他语句之前。

所以在 BEGIN 之后移动 DECLARE。

# python - 切片正则表达式反向引用？诺坎多？

> ID：16093187
> 
> 赞同：2
> 
> 时间：2013-04-18T21:13:55.510
> 
> 标签：python, regex, slice, backreference

Nelson, Craig T. 形式的名称需要拆分为

```
AN Nelson
FN Craig
IT C.T. 
```

IT表示首字母，注意第一个首字母是FN，名字的第一个字母。

我已经在正则表达式中有一堆模式。对于这个，我怀疑正则表达式不会这样做，原因是：你不能切片反向引用

```
import re

name = r'Nelson, Craig T.'
pat = r'([^\W\d_]+),\s([^\W\d_]+\s?)\s(([A-Z]\.?)+)\s?$'
rep = r'AN \1\nVN \2\nsf \3\n'  

split = re.sub(pat, rep, name)
print(split) 
```

将产生：

```
AN Nelson
FN Craig
IT T. 
```

理想情况下，我会以某种方式分割 \2，添加一个句号并将 \3 粘贴在它后面。我认为这对于正则表达式是不可能的，我应该使用字符串操作，但是，这不是我第一次在这里学到一个我没有从[文档](http://www.regular-expressions.info/refadv.html)中推断出来的技巧。（多谢你们。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T21:19:17.820

您可以使用更多组作为第一个首字母，如下所示：

```
pat = r'([^\W\d_]+),\s(([^\W\d_])[^\W\d_]*\s?)\s(([A-Z]\.?)+)\s?$'
rep = r'AN \1\nVN \2\nIT \3.\4\n' 
```

我还更正了变量中的首字母，`sf`而不是首字母。`IT``rep`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:23:58.563

与其替代，不如与小组一起玩

```
import re

name = r'Nelson, Craig T.'
pat = r'([^\W\d_]+),\s([^\W\d_]+\s?)\s(([A-Z]\.?)+)\s?$' 
fmt = 'AN {last}\nVN {first}\nsf {initials}\n'

mtch = re.match(pat, name)

last_name, first_name, mid_name = mtch.group(1, 2, 3)

parsed = fmt.format(last=last_name, first=first_name, initials=last_name[0]+'.'+mid_name)
print(parsed) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T00:57:22.343

我想说哦，没关系，但你们都快了:-)

```
import re

name = r'Nelson, Craig T.'
pat = r'([^\W\d_]+),\s(([A-Z])[^\W\d_]+\s?)\s(([A-Z]\.?)+)\s?$'
rep = r'AN \1\nVN \2\nsf \3.\4\n'  

split = re.sub(pat, rep, name)
print(split) 
```

这只是 Alexey 建议的一个细微变化。在这里，我希望名字的第一个字母 (VN) 使用真正的大写字母。

# c# - 将新项目添加到 VS 解决方案时，它会混淆解决方案依赖项

> ID：16093189
> 
> 赞同：2
> 
> 时间：2013-04-18T21:13:57.003
> 
> 标签：c#, visual-studio-2010, dependencies

我们拥有庞大的项目解决方案，大约有 20 个项目和 6 种不同的构建配置。每个构建配置都有自己的依赖项，当向解决方案添加新项目时，它会更改其他项目的依赖项并且无法编译。关于如何添加新项目而不会对其他项目及其依赖项造成任何影响的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T22:07:50.173

以下是解决问题的步骤：

1.  从解决方案中删除添加的项目
2.  将解决方案文件还原为其原始状态
3.  在 notepad++ 中打开最近添加的项目 .csproj 文件，并打开已在解决方案中的任何项目的 .csproj 文件。
4.  比较两个文件之间的所有属性，并确保它们具有相同的构建配置、配置、
    平台、平台目标。（只需从您的旧项目中获取所有这些信息）
5.  保存新项目的 .csproj 文件并在 Visual Studio 中右键单击您的
    解决方案并添加现有项目，这将是
    您要添加的项目。

结果：Visual Studio 不涉及解决方案依赖项。

# maven - pom.xml 在每个目录中还是跳过中间？

> ID：16093196
> 
> 赞同：1
> 
> 时间：2013-04-18T21:14:17.620
> 
> 标签：maven, maven-3

说我的项目结构如下：

```
项目
|-- 小服务程序
`-- 过滤器
    |-- 过滤器1
    `--过滤器2

```

我应该有`filters/pom.xml`哪个聚合`filter1`和`filter2`？还是我应该直接在顶层包含`filters/filter1`and ？这当然是假设过滤器没有可以从共同父项中受益的共同依赖项等。`filters/filter2``pom.xml`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:18:25.467

如果 filter1/filter2 没有任何东西可以从过滤器继承，并且过滤器不是 maven 模块，那么我可能会更改项目结构以更接近我见过的约定。

```
project
|-- servlet
`-- filter1
`-- filter2 
```

如果这不是一个选项，那么我可能只是将模块直接包含为`filters/filter1`和`filters/filter2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:17:35.310

如果这两个模块没有任何您希望它们都继承的共同点，那么直接在 main 中声明它们是有意义的`pom.xml`：

```
<modules>
  ...
  <module>filters/filter1</module>
  <module>filters/filter2</module>
  ...
</modules> 
```

你不想无缘无故地让你的结构过于复杂。

# java - 自动检查 Web 应用程序的更新

> ID：16093208
> 
> 赞同：0
> 
> 时间：2013-04-18T21:15:07.997
> 
> 标签：java, performance, web-applications, primefaces, notifications

我正在做一个 Web 应用程序，用户可以在其中进行有关这些交互或系统管理员更改等的交互和通知。

我的服务器是在 Java 上实现的，对于 GUI，我使用的是 JSF（PrimeFaces 库）。

我的疑问是：客户端始终要求服务器获取新通知的最佳方式是什么？我的意思是，就像 StackExchange 中的这里或 Facebook 中的那样，如果我正在写一个问题或更新状态或做其他任何事情，我不需要每次我想知道我的新通知时点击通知按钮，我的客户app 总是在检查这些更新（通过一种我不知道的方法）。

我认为可以做到这一点的方法是拥有一个无限持续时间的函数（在线程或类似的东西上），通过调用服务器通知服务（例如）并将它们显示给用户，每分钟向服务器询问这些通知. 明显的问题是我认为这不是一种优化的方法，必须有更好的方法来做到这一点。

如果有人知道 Facebook（StackExchange、Twitter 或任何处理用户通知的系统）使用的方法并尝试解释它，那也很棒。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:18:45.880

您所描述的是ajax 或http 长池。这是资源消耗。很可能真正的异步实现要好得多。您正在查看 websockets

# servicestack - ServiceClientBase 的异常处理程序

> ID：16093211
> 
> 赞同：9
> 
> 时间：2013-04-18T21:15:13.770
> 
> 标签：servicestack

我想处理`WebServiceException`我的服务客户抛出的所有问题。现在有没有好的方法可以做到这一点？

例如，我在 Windows 窗体应用程序周围传递了一个 ServiceClientBase。我在 http 标头中将 api 密钥传递给服务器。对于任何 API 密钥无效的请求，我想显示一个消息框，告诉用户该请求未经授权，他们应该设置 API 密钥。但我不希望到处都有这段代码：

```
try
{
    _client.Get(new ReqDto());
}
catch (WebServiceException ex)
{
    if(ex.StatusCode == 401)
        Util.ShowUnauthorizedMessageBox();
} 
```

像这样的东西会很好：

```
_client.WebServiceExceptionHandler += TheHandler; 
```

我知道我可以连接到本地响应过滤器，但我需要物化 WebServiceException。

我正在查看 ServiceClientBase.cs 以了解我能做什么，但我会很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T19:50:31.537

如果我可以将此作为设计问题而不是 API 问题来处理，那么答案就是包装您的服务客户端。就个人而言，我做了类似的事情，所以我可以在客户端记录服务异常。

这可能是一个起点：

```
public class MyServiceClient : IDisposable
{
    public ServiceClientBase ServiceClient { get; set; }

    string _serviceUri;
    public string ServiceUri
    {
        get { return _serviceUri; }
        set { _serviceUri = value; ServiceUriChanged(); }
    }

    public MyServiceClient()
    {
        ServiceUri = "http://127.0.0.1:8080";
    }

    public void Dispose()
    {
        ServiceClient.Dispose();
    }

    public TResponse Get<TResponse>(IReturn<TResponse> request)
    {
        try
        {
            return ServiceClient.Get(request);
        }
        catch (WebServiceException ex)
        {
            if(ex.StatusCode == 401)
                Util.ShowUnauthorizedMessageBox();
        }
    }

    void ServiceUriChanged()
    {
        if (ServiceClient != null)
            ServiceClient.Dispose();
        ServiceClient = new JsonServiceClient(ServiceUri);
    }
} 
```

随着时间的推移，您可能会发现这种额外间接级别的其他好处，例如添加本地缓存、记录所有请求和响应 [到调试控制台]。而且，一旦它在您的所有客户端代码中使用，维护起来非常便宜。

就 API 而言，我认为它不能提供您想要的东西。就我个人而言，我对它的原样感到满意（尤其是当`IReturn<T>`界面有助于整合您想要的功能时）。但是，如果您对它不满意，那么您距离与[Demis](https://github.com/mythz)就改进它的对话仅是一个拉取请求。(-=

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T01:54:35.963

这对游戏来说有点晚了，但我遇到了同样的事情，所以开始挖掘源头。实际上有一个简单的解决方法，覆盖`HandleResponseException`您正在使用的任何 ServiceClient 中的方法。直接来自评论：

```
 /// <summary>
        /// Called by Send method if an exception occurs, for instance a System.Net.WebException because the server
        /// returned an HTTP error code. Override if you want to handle specific exceptions or always want to parse the
        /// response to a custom ErrorResponse DTO type instead of ServiceStack's ErrorResponse class. In case ex is a
        /// <c>System.Net.WebException</c>, do not use
        /// <c>createWebRequest</c>/<c>getResponse</c>/<c>HandleResponse&lt;TResponse&gt;</c> to parse the response
        /// because that will result in the same exception again. Use
        /// <c>ThrowWebServiceException&lt;YourErrorResponseType&gt;</c> to parse the response and to throw a
        /// <c>WebServiceException</c> containing the parsed DTO. Then override Send to handle that exception.
        /// </summary> 
```

我个人在覆盖`JsonServiceClient`

```
 protected override bool HandleResponseException<TResponse>(Exception ex, object request, string requestUri, Func<System.Net.WebRequest> createWebRequest, Func<System.Net.WebRequest, System.Net.WebResponse> getResponse, out TResponse response)
    {
        Boolean handled;
        response = default(TResponse);
        try
        {
            handled = base.HandleResponseException(ex, request, requestUri, createWebRequest, getResponse, out response);
        }
        catch (WebServiceException webServiceException)
        {
            if(webServiceException.StatusCode > 0)
                throw new HttpException(webServiceException.StatusCode, webServiceException.ErrorMessage);
            throw;
        }
        return handled;
    } 
```

# android - android-maven集成测试部署在运行时找不到jar库

> ID：16093214
> 
> 赞同：1
> 
> 时间：2013-04-18T21:15:28.163
> 
> 标签：android, maven, continuous-integration, android-testing

我们正在尝试对我们编写的 android 库（.jar 文件，但不是带有库标志集的 android 项目）进行一些在线持续集成测试。我在 IntelliJ 中创建了一个测试 android 项目，并设法通过 android 模拟器上的 IntelliJ 使测试运行良好。

在添加 Maven 支持、正确获取 POM 文件并让 maven 使用 android-maven-plugin v3.5.3 构建测试解决方案并将其部署到 android 模拟器后，我收到以下运行时错误（和更多类似的错误） ：

```
04-18 04:41:10.800: WARN/dalvikvm(1532): VFY: unable to resolve static method 35: Lcom/joobworld/joobmobile/network/HttpResult$HttpVerb;.valueOf (Ljava/lang/String;)Lcom/joobworld/joobmobile/network/HttpResult$HttpVerb; 
```

pom 以下列方式引用“缺失”库：

```
<dependency>
    <groupId>com.joobworld.joobmobile</groupId>
    <artifactId>JoobMobile</artifactId>
    <version>3.1.0.0</version>
    <type>jar</type>
    <scope>provided</scope>
</dependency> 
```

如前所述，maven 在构建或部署测试解决方案时不会抱怨。它正确地将我们本地存储库中的 jar 库填充到 .m2 文件夹中，因此似乎由于某种原因它没有在 apk 中包含 jar 文件。我对 maven 还很陌生，所以可能错过了设置中明显的一些东西。任何解决此运行时依赖问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T11:09:46.210

我不使用 maven，但我有手动解决方案。

您可以将 .jar 复制到 /libs 文件夹，它们将自动包含在 .apk 中。请注意：您的构建系统可能会自动删除它们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T08:09:02.403

您将范围设置为“提供”，这告诉 maven 不要将 jar 包含在 apk 中。尝试使用编译或删除默认编译的范围标签。

# php - 在 PHP 中动态获取类/对象的属性（事先不知道属性名称）

> ID：16093215
> 
> 赞同：1
> 
> 时间：2013-04-18T21:15:34.220
> 
> 标签：php, class, variables, properties

我想获得一个对象的属性，`$class->property`但我不知道我将尝试获得的属性的名称。

可能是`$class->property_one`，也可能是`class->property_two`。是**1**还是**2**的信息存储在一个变量中，我们称之为`$var`。

我得到的最接近的是this`${'$class->property_'.$var}`但问题是PHP似乎认为我正在寻找一个名为“ `$class->property_xxx`”的变量，而实际上我想要来自$object的$property。

谢谢你的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:18:37.377

您应该按照关于[`variable variables`](http://php.net/manual/en/language.variables.variable.php).

你可以这样做：

```
$property = 'property_' . $var;
echo $obj->$property; 
```

或者使用像这样的所谓[curly 语法](http://www.php.net/manual/en/language.types.string.php)：

```
echo $obj->{'property_' . $var}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:19:43.230

```
$obj->{'property_' . $var}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T21:22:01.387

尝试类似的东西

```
$test_class = new stdClass();

$test_class->property_one = 'p_one';
$test_class->property_two = 'p_two';

$var = 'two';

echo $test_class->{"property_$var"}; 
```

打印“p_two”

# r - 使用 apply 将列表 A 中的所有多边形与 r 中列表 B 中的所有多边形相交

> ID：16093219
> 
> 赞同：0
> 
> 时间：2013-04-18T21:15:37.770
> 
> 标签：r, list, polygons

我有两个清单；它们都包含 gpc.poly 类的多边形。

第一个列表是“ptareas”：

```
 > ptareas
    $AG00035
    GPC Polygon
       Num. Contours:  1 
       Num. Vertices:  2000 
       BBox (X):  5.999999 --> 6.000001 
       BBox (Y):  11 --> 11 

    $AG00036
    GPC Polygon
       Num. Contours:  1 
       Num. Vertices:  2000 
       BBox (X):  9.999999 --> 10 
       BBox (Y):  4.999999 --> 5.000001 
```

第二个列表是“isect_polys”：

```
> isect_polys
[[1]]
GPC Polygon
   Num. Contours:  2 
   BBox (X):  4.928932 --> 25.07107 
   BBox (Y):  -2.071068 --> 25.07107 

[[2]]
GPC Polygon
   Num. Contours:  1 
   Num. Vertices:  1028 
   BBox (X):  4.928932 --> 11.23867 
   BBox (Y):  3.953478 --> 12.02995 

[[3]]
GPC Polygon
   Num. Contours:  2 
   BBox (X):  4.928932 --> 25.07107 
   BBox (Y):  -2.071068 --> 25.07107 

[[4]]
GPC Polygon
   Num. Contours:  1 
   Num. Vertices:  1028 
   BBox (X):  4.928932 --> 11.23867 
   BBox (Y):  3.953478 --> 12.02995 

[[5]]
GPC Polygon
   Num. Contours:  2 
   BBox (X):  4.928932 --> 25.07107 
   BBox (Y):  -2.071068 --> 25.07107 

[[6]]
GPC Polygon
   Num. Contours:  1 
   Num. Vertices:  1028 
   BBox (X):  4.928932 --> 11.23867 
   BBox (Y):  3.953478 --> 12.02995 
```

我正在尝试（并且失败）做的事情非常简单。我想将 ptareas 中的每个多边形与 isect_polys 中的每个多边形相交。实际上，每次我运行脚本时，每个列表的长度都会有所不同，但对于这个例子，我试图找到一种方法来自动化以下操作：

```
intersect(ptareas[[1]],isect_polys[[1]])
intersect(ptareas[[1]],isect_polys[[2]])
intersect(ptareas[[1]],isect_polys[[3]])
intersect(ptareas[[1]],isect_polys[[4]])
intersect(ptareas[[1]],isect_polys[[5]])
intersect(ptareas[[1]],isect_polys[[6]])
intersect(ptareas[[2]],isect_polys[[1]])
intersect(ptareas[[2]],isect_polys[[2]])
intersect(ptareas[[2]],isect_polys[[3]])
intersect(ptareas[[2]],isect_polys[[4]])
intersect(ptareas[[2]],isect_polys[[5]])
intersect(ptareas[[2]],isect_polys[[6]]) 
```

如果我正在处理矩阵，我只需将 ptareas 设为单列矩阵，将 isect_polys 设为单行矩阵，然后执行类似于下面的矩阵乘法的操作：

```
> m1<- matrix(c(1,2),2,1)
> m1
     [,1]
[1,]    1
[2,]    2
> m2<- matrix(c(1:6),1,6)
> m2
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    2    3    4    5    6
> m1 %*% m2
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    1    2    3    4    5    6
[2,]    2    4    6    8   10   12 
```

不幸的是，我不能强迫 r 让我以同样的方式处理多边形列表，所以我希望有人可以解释如何使用其中一个 apply 函数来实现相同类型的成对交互。作为一个新手用户，在处理多个列表时，我发现这些功能很难实现。由于我在以前的帖子中找不到类似的例子，其他人一定能够轻松解决类似的两个列表问题，而且我相当肯定我错过了一些非常基本的东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:04:33.270

如果没有可重现的示例，很难做到这一点。但我想你想对 2 个列表中的所有多边形进行外部交集。

```
## First I generate combinations of the supplied
dd <- expand.grid(seq_along(ptareas),seq_along(isect_polys))
## Using mapply to test intersection (1-1,2-2,...
mapply(function(x,y)intersect(ptareas[[x]],isect_polys[[y]]),
       dd$Var1,dd$Var2) 
```

注意方面：许可`gpclib`是惊人的，也许你应该使用`rgeos`包。

# c++ - 告诉编译器我不再使用 C++ 中的命名空间

> ID：16093226
> 
> 赞同：9
> 
> 时间：2013-04-18T21:16:05.257
> 
> 标签：c++, syntax, namespaces

语法：

```
 using namespace x; 
```

告诉编译器从命名空间 x 中查找符号。一旦你在两个命名空间中有相同的符号并且你想相互使用它们，情况就会变得很糟糕。有没有办法告诉编译器不要使用命名空间？我的意思是这样的（命名空间 x 和 y 都具有函数 a）

```
using namespace x;
int k = a(); //x::a is called
drop namespace x; //imaginary syntax that I am looking for
using namespace y;
int j = a(); //y::a is called 
```

“您必须使用范围解析符号'::'”不是我正在寻找的答案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-18T21:18:10.937

由于您不想使用范围解析，因此创建一些额外的范围：

```
{
    using namespace x;
    int k = a(); //x::a is called
}
{
    using namespace y;
    int j = a(); //y::a is called
} 
```

不过，恐怕这可能会比范围分辨率更糟糕：/

编辑：

可能有用的另一件事（我不知道您是否知道）是名称空间别名。假设您有一个名称长得令人作呕的名称空间或多个嵌套的名称空间。您可以缩短名称，例如：

```
namespace x = very::weird::namespc::name;
namespace y = yabadabadoopdiedoo; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-18T21:39:04.257

您不能“删除”命名空间，但是，在使用命名空间组合时，您可以解决特定的歧义，如下所示：

```
namespace composite {
    using namespace x;
    using namespace y;
    using y::a; // use y::a in case of ambiguity

    void foo() {
        a(); // calls y::a
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-18T21:21:00.353

> 2 using-directive 指定指定命名空间中的名称**可以在 using-directive 出现在 using-directive 之后的范围内使用。**在非限定名称查找 (3.4.1) 期间，名称看起来好像它们是在最近的封闭命名空间中声明的，其中包含使用指令和指定命名空间。[注：在此上下文中，“包含”是指“直接或间接包含”。——尾注]

因此，您必须使用不同的范围。使用后没有办法不使用。

# json - 尝试使用 curl 创建存储库时，Github 返回“解析 JSON 的问题”

> ID：16093229
> 
> 赞同：7
> 
> 时间：2013-04-18T21:16:18.293
> 
> 标签：json, curl, github, github-api

我正在尝试使用 curl 在 github 上创建一个存储库。无论我如何尝试格式化我的 JSON，它总是返回“解析 JSON 的问题”。有什么我想念的吗？这是我的声明：

```
curl --data '{"name":"newRepoName"}' -XPOST -u username:password http://giturl 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:05:44.273

奇怪，因为它对我有用。您是否使用了正确的 GitHub API 端点（/user/repos）？

```
curl --data '{"name":"testrepo"}' -X POST -u username https://api.github.com/user/repos 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-03T12:29:19.360

尝试像这样包含您的令牌或密码

```
 curl --data '{"name":"testrepo"}' \
       -X POST -u username:$TOKEN \
       https://api.github.com/user/repos 
```

# uinavigationcontroller - 这个 backBarButtonItem 又是从哪里来的呢？

> ID：16093231
> 
> 赞同：0
> 
> 时间：2013-04-18T21:16:35.567
> 
> 标签：uinavigationcontroller, pushviewcontroller, backbarbuttonitem

我有一个 UINavigationController (A)，它有几个子视图，它们也是 UIViewControllers (B 和 C)。主 UINavigationController (A) 位于 UITabViewController (D) 内部。

我正在尝试在 B 中推送视图控制器： `[self.navigationController pushViewController... etc]`

现在，backBarButtonItem 带有错误的文本。它没有说“返回”，而是说“项目”。这可能是因为我的链中的一个视图控制器的标题设置为“项目”，或者它可能完全为零。

我的问题是，backBarButtonItem 是从哪里生成的？

我尝试了一些没有用的不同方法。在我推送视图控制器之前，我在 B 中尝试了这些代码行中的每一行。他们都没有工作。

`self.presentingViewController.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back"... etc`

`self.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back"... etc`

`self.navigationController.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back"... etc`

我想在这里学习这个原理，这样我才能真正了解这个项目是从哪里填充的，以及正确的做法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:07:24.597

假设您的`C`控制器位于导航控制器堆栈的顶部，而您的`B`控制器位于该堆栈之下。例如

```
navigationController.viewControllers = @[ bViewController, cViewController ]; 
```

所以导航控制器正在显示`cViewController.view`。

导航控制器使用其堆栈中的倒数第二个控制器来配置后退按钮。在这种情况下，它用于`bViewController`配置后退按钮。这是它的算法：

```
UINavigationItem *navigationItem = bViewController.navigationItem;
UIBarButtonItem *barItem = navigationItem.backBarButtonItem;

if (barItem.image != nil) {
    show a back button containing barItem.image;
}

else if (barItem.title != nil) {
    if (barItem.title.length > 0) {
        show a back button containing barItem.title;
    } else {
        don't show a back button;
    }
}

else if (navigationItem.title != nil) {
    if (navigationItem.title.length > 0) {
        show a back button containing navigationItem.title;
    } else {
        don't show a back button;
    }
}

else {
    show a back button containing @"Back";
} 
```

# javascript - jQuery 基于下拉选择值和单选按钮显示/隐藏文本字段

> ID：16093232
> 
> 赞同：0
> 
> 时间：2013-04-18T21:16:36.593
> 
> 标签：javascript, jquery, html

我正在尝试根据下拉选择值**和**单选按钮值显示/隐藏隐藏字段。

这是我的代码的一部分：

```
State of Issue: 
<select size="1" name="State_of_Issue" class="required" id="state">
<option>MA</option> 
<option>NH</option>
<option>NY</option>
</select>

Partnership:
<input type="radio" name="Partnership" value="Yes" class="required" />Yes
<input type="radio" name="Partnership" value="No" />No

<select name="Asset_Number" id="asset" style="display:none;">
                <option>Total Asset 100%</option>
                <option>Total Asset 50%</option>
                <option>Dollar for Dollar 100%</option>
                <option>Dollar for Dollar 50%</option>
            </select>

Script:
$('#state').change(function () {
   if ($(this).val() == "NY") {
     if ($('#partnership').val() == "Yes") {
        $('#asset').show();                        }
       }
       else {
           $('#asset').hide();    
          }
       }); 
```

当 state = NY 和合作伙伴关系 = Yes 时，我想显示隐藏字段“asset”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:35:12.303

[演示](http://jsfiddle.net/uSucE/16/)

```
$('#state, input[type="radio"]').change(checkState);

function checkState() {
    var state = $('select').val();
    var partnership = $('input[type="radio"]:checked').val();

    if ((state == "NY") && (partnership == "Yes")) {
        $('#asset').show();
    } else {
        $('#asset').hide();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:30:06.263

试试这个脚本。**更新**

```
$('#state, input[type="radio"]').change(function () {
    if ($('#state').val() == "NY") {
        if ($('#partnership').is(':checked')) {
            $('#asset').show();
        } else {
            $('#asset').hide();
        }
    } else {
        $('#asset').hide();
    }
}); 
```

还有一个小提琴> [http://jsfiddle.net/Spokey/Tu7Ja/5/](http://jsfiddle.net/Spokey/Tu7Ja/5/)

# c++ - 如何在 etrade api C 中使用 oauth

> ID：16093233
> 
> 赞同：0
> 
> 时间：2013-04-18T21:16:42.973
> 
> 标签：c++, oauth, etrade-api

我正在使用 Etrade 制作 C++ api。他们要求您使用 Oauth1.01a

我已经搜索过，但在网上没有看到任何示例。有人可以帮忙吗？？

非常感谢！！！

```
bool GetRequestToken(CClientDetails &objClientDetails) throw (...);
bool GetAccessToken(CClientDetails &objClientDetails,string strVerifier) throw (...);
void RenewToken(CClientDetails &objClientDetails) throw (...);
void RevokeToken(CClientDetails &objClientDetails) throw (...);
string AuthorizeUrl(CClientDetails &objClientDetails) throw (...);

string GetProtectedResourse(CClientDetails &objClientDetails,string strUrl, HttpMethodConstants httpMethod = GETMethod, string postParameters = NULL) throw (...); 
```

}; >

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T22:22:42.993

只是一个抬头。授权是文档（v0）是错误的！如果您在该步骤中遇到问题，可能就是这样。

这是正确的 URL： [https ://us.etrade.com/e/t/etws/authorize](https://us.etrade.com/e/t/etws/authorize)

我编写了一个名为 Trading Robo Monkey 的简单 Node 应用程序。如果您以前从未使用过 OAuth，您可以通过查看 JS 代码来尝试查看是否是您的问题

[https://github.com/shikhirsingh/ETrade-API-Robo-Trading-Monkey-4-NodeJS](https://github.com/shikhirsingh/ETrade-API-Robo-Trading-Monkey-4-NodeJS)

# php - 在 PHP 端以 HTTP_ACCESS_CONTROL_REQUEST_HEADERS 结尾的 AJAX 标头

> ID：16093235
> 
> 赞同：1
> 
> 时间：2013-04-18T21:16:47.337
> 
> 标签：php, ajax, cross-domain

我正在尝试让 SalesForce Rest API 工作，并且我已经调试了我的问题到这一点：

当我从我的 Web 应用程序向后端（与后端位于不同的域）进行 AJAX 调用时，所有 AJAX 标头最终都被塞进 $_SERVER['HTTP_ACCESS_CONTROL_REQUEST_HEADERS'] 中，我没有办法获取他们的价值观。

```
 return $j.ajax({
        type: 'POST',
        url: my_endpoint_url,
        cache: false,
        processData: false,
        data: 'grant_type=refresh_token&client_id=' + this.clientId + '&refresh_token=' + this.refreshToken,
        success: callback ,
        error: error ,
        dataType: "json",
        beforeSend: function(xhr) {
            if (that.proxyUrl !== null) {
                xhr.setRequestHeader('SalesforceProxy-Endpoint', url);
            }
        }
    }); 
```

在服务器端，我只收到：

```
[HTTP_ACCESS_CONTROL_REQUEST_HEADERS] => accept, salesforceproxy-endpoint, doiwork, origin, content-type 
```

如何在服务器端访问“salesforceproxy-endpoint”的值？同样，我似乎无法在任何地方找到 ajax 调用的“数据”..

**更新：** 只是为了咯咯笑，我把我的端点移到了同一个域。现在它按预期工作。

```
[HTTP_SALESFORCEPROXY_ENDPOINT] => https://login.salesforce.com//services/oauth2/token 
```

有没有办法让这个跨域工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:30:20.923

您刚刚知道什么是[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)；）

# javascript - Windows 7 上的 IE10：在 div 内时 SVG 滚动太远

> ID：16093240
> 
> 赞同：1
> 
> 时间：2013-04-18T21:17:21.813
> 
> 标签：javascript, windows-7, svg, internet-explorer-10

我正在 DIV 中绘制 SVG。绘图大于 DIV，因此滚动变为活动状态。我正在我的电脑上测试这个，它有 IE10 和 Windows 7。IE10 似乎将 SVG 绘图滚动到它的终点。IE9、Chrome 和 Firefox 不这样做。下面的代码重现了该问题。

如果您使用它来创建一个 html 页面并在 Chrome 中运行它，您应该会在滚动时看到从左上角到右下角的一条线。在滚动的最右边，这条线正好停在黄绿色 SVG 元素的右侧，红线表示限制。

但是，在我的 Windows 7 机器上使用 IE10 时，这条线在末端的左侧稍稍停了下来。随着 SVG 绘图尺寸的增加，这个“有点”变得更大。似乎 IE 将 SVG 绘图滚动到了其右极限。在尝试获取点击位置并将其转换回真实坐标时，这对我造成了严重破坏。

我之前发布了这个问题，认为问题出在 IE9 和 IE10 中，但从那以后我将它隔离到 IE10。我还在另一个论坛（[http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/0d4ef7dd-7e1c-4a09-a483-2760367a2e84](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/0d4ef7dd-7e1c-4a09-a483-2760367a2e84)）上发帖，有人回来说他们没有看到同样的问题。所以它可能与兼容性视图有关。但是，如果我在测试时在 IE 中按 F12，我会看到“浏览器模式：IE10，文档模式：标准”

非常感谢您的帮助！

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>IE SVG SCroll Problem</title>        
    <META http-equiv="CACHE-CONTROL" content="NO-CACHE, NO-STORE" />               
</head>
<body onload="draw()">
   <div style="position:absolute; left:100px; top:50px; width:500px; height: 300px; background-color:wheat;">
   <div id="plotRect" style="position:relative; left:40px; top:25px; width:400px; height:240px; 
background-color:antiquewhite; border:1px solid black; overflow-x:auto; overflow-y:hidden;">
</div>
</div>

<script type="text/javascript">

var svgNS = "http://www.w3.org/2000/svg";

function draw() {

    //plotRect is the inner div that holds the SVG drawing. We want to scroll on this.
    var plotRect = document.getElementById("plotRect");

    //Add SVG viewbox element to hold the svg drawing
    var width = 5800;   //container div is only 400px wide, so this will cause scrollbar to show
    var height = 240;   //same as container div

    var svg = document.createElementNS(svgNS, "svg");
    svg.setAttribute("id", "test");
    svg.setAttribute("version", "1.2");        
    svg.setAttribute("width", width);
    svg.setAttribute("height", height);
    svg.setAttribute("style", "background-color:yellowgreen; overflow:hidden");
    svg.setAttribute("preserveAspectRatio", "none");
    plotRect.appendChild(svg);

    //now draw a line from top left corner to bottom right corner
    var x1 = 0;
    var y1 = 0;
    var x2 = width;  //note this width is same as the viewbox width
    var y2 = 220;

    //add the line
    var l = document.createElementNS(svgNS, 'line');
    l.setAttribute("x1", x1);
    l.setAttribute("y1", y1);
    l.setAttribute("x2", x2);
    l.setAttribute("y2", y2);
    l.setAttribute("stroke-width", 3);
    l.setAttribute("stroke", "black");
    svg.appendChild(l);

    var l1 = document.createElementNS(svgNS, 'line');
    l1.setAttribute("x1", x2);
    l1.setAttribute("y1", y1);
    l1.setAttribute("x2", x2);
    l1.setAttribute("y2", y2);
    l1.setAttribute("stroke-width", 3);
    l1.setAttribute("stroke", "red");
    svg.appendChild(l1);

}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-19T14:53:57.307

我遇到了同样的问题，IE10 上的 SVG 滚动超出了内容。我通过简单地将以下内容添加到我的样式表或样式属性中的等效项来修复它。

```
svg {
    overflow: hidden;
} 
```

这花了我几个小时来追踪，但是在我的默认样式表中使用一条规则，所有问题都消失了。

尽管 IE9 默认为隐藏，但 IE9 和 10 似乎是唯一支持 SVG 对象溢出的浏览器。看起来 IE10 是符合规范的，因为溢出意味着默认在 HTML 中的所有对象上可见。

仍然不确定为什么 svg 内容不适合 svg 对象但是......

希望这可以帮助。

# ios - 处理小物体上的手指检测

> ID：16093241
> 
> 赞同：1
> 
> 时间：2013-04-18T21:17:24.490
> 
> 标签：ios, opengl-es-2.0, detection

我正在处理的应用程序需要 4 像素的条形高度和全屏尺寸宽度。我需要能够选择这个 4px 条并移动它。我也不能改变这个栏的大小，它的高度必须是 4px。

如果我不使用 OpenGL 创建对象，这将不是什么大问题。OpenGL 显然没有自己的选择功能，所以我需要自己编程。

最初经过研究，我构建了一个颜色选择器来识别对象。我的颜色选择器是如何工作的`x`，`y`我的手指触摸返回的`touchesBegan:`是我从 OpenGL 视图的屏幕截图中抓取的像素。问题在于手指的位置根本不精确。如果我用鼠标，它就完美了……

我决定可能循环通过选定的缓冲区`x`，`y`但不幸的是，当 OpenGL 视图的屏幕截图存储在内存中并且缓冲区返回我的对象​​颜色的几种阴影时，图像会发生抗锯齿。我可以做一个比较颜色查找，看看它是否在颜色范围内，但这似乎过于复杂，因为我已经做了多少。另外，通过缓冲区骑自行车并不快。

我也想过也许只是记住我的线条在屏幕上的位置，如果我的手指靠近那个位置，就知道那是我想要选择并移动它的那个位置。

这个应用程序的未来最多可以有 4 行，就像这样，我想要更安全的东西，而不是只知道它在内存中的位置。

有什么更好的方法来处理小对象的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:40:10.537

如何为四个对象维护一组框架，但将高度扩展到更易于管理的高度（8px 或更大）？然后，可以将较大区域内的触摸与数组进行比较（使用 CGRectContainsPoint）。如果命中，则在开始拖动之前“对齐”较小 (4px) 矩形的中心点。

我通过维护拖放的“放置目标”列表来做类似的事情，当它非常接近时它会捕捉到放置目标。不知道我是否很好地传达了这个想法，但它应该可以工作。

如果四个 4px 矩形将是连续的或非常靠近的，您必须能够使所选的一个突出，否则用户将无法分辨他们正在拖动哪个 - 但您可以这样做通过使其更大（可能是 6-8 像素）然后将其带到前面，使其覆盖其相邻的邻居。

我猜更多的是一个想法而不是一个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T20:06:01.460

约翰，

我会建议一种不同的方法。正如您所发现的，iOS 中的触摸**非常**不精确。Apple 通常建议您的控件的“命中框”至少为 40x40 点。我已经小到 30x30 点，但这开始变得很难。

我建议你做的是考虑你的代码，以便应用程序知道该行在哪里，并将其作为一个逻辑对象进行跟踪。然后在您的触摸处理程序中，根据您希望用户能够移动的东西周围的大“缓冲区”来解释触摸。如果你只有一个单杠，这应该很好用。如果您有多个靠近在一起的细水平条，则会遇到麻烦。在这种情况下，您可能需要重新考虑您的应用程序设计并找到解决问题的另一种方法。

至于实现细节，您可以将平移手势识别器添加到您的 OpenGL 视图中，并让它通知 OpenGL 视图触摸和拖动操作。然后，您的 OpenGL 视图可以使用有关可拖动对象所在位置的知识来决定如何解释触摸。

# android - Android相机应用预览问题

> ID：16093242
> 
> 赞同：0
> 
> 时间：2013-04-18T21:17:28.640
> 
> 标签：android, camera, android-camera, freeze, preview

我想就以下问题寻求一些建议。我目前正在开发适用于 android 的相机应用程序，但我被卡住了。我使用官方的 android 开发站点作为指导，程序运行良好，除非我第一次单击捕获按钮时预览冻结并保持不变。现在，这不会导致应用程序停止，因为在冻结后我仍然可以单击按钮并拍照。我知道这一点，因为如果我检查保存位置，拍摄的照片就在那里。

所以总结一下这个混乱，我希望我的程序即使在拍照后也能连续显示预览。任何帮助，将不胜感激！

我的代码：

我的主要活动：

```
package com.camera123.cr;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;
import android.app.Activity;
import android.app.SearchManager.OnCancelListener;
import android.hardware.Camera;
import android.hardware.Camera.PictureCallback;
import android.hardware.Camera.ShutterCallback;
import android.media.CamcorderProfile;
import android.media.MediaRecorder;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.FrameLayout;

public class Camera123 extends Activity{
    /** Called when the activity is first created. */
private Camera mCamera;
    private cameraPreview mPreview;
    private MediaRecorder mMediaRecorder;
    private boolean isRecording = false;
    private Button captureButton;
    FrameLayout preview;

    public static final int MEDIA_TYPE_IMAGE = 1;
    public static final int MEDIA_TYPE_VIDEO = 2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Create an instance of Camera
        mCamera = getCameraInstance();

        // Create our Preview view and set it as the content of our activity.
        mPreview = new cameraPreview(this, mCamera);

        captureButton = (Button) findViewById(R.id.button_capture);
        preview = (FrameLayout) findViewById(R.id.camera_preview);
        preview.addView(mPreview);

        captureButton.setOnClickListener(
                new View.OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        // get an image from the camera

                        mCamera.takePicture(null, null, mPicture);

                    }
                }
            );

    }

    /** A safe way to get an instance of the Camera object. */
    public static Camera getCameraInstance(){
        Camera c = null;
        try {
        c = Camera.open(); // attempt to get a Camera instance
        if (c != null){
            Camera.Parameters params = c.getParameters();
            c.setParameters(params);
        }
    }
    catch (Exception e){
        Log.d("DEBUG", "Camera did not open");
        // Camera is not available (in use or does not exist)
    }
        return c; // returns null if camera is unavailable
    }

    private PictureCallback mPicture = new PictureCallback() {

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {

            File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
            if (pictureFile == null){
                Log.d("DEBUG", "Error creating media file, check storage permissions: " /*+
                    e.getMessage()*/);
                return;
            }

            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(data);
                fos.close();
            } catch (FileNotFoundException e) {
                Log.d("DEBUG", "File not found: " + e.getMessage());
            } catch (IOException e) {
                Log.d("DEBUG", "Error accessing file: " + e.getMessage());
            }
        }
    };

    /** Create a file Uri for saving an image or video */
    private static Uri getOutputMediaFileUri(int type){
          return Uri.fromFile(getOutputMediaFile(type));
    }

    private static File getOutputMediaFile(int type){
        // To be safe, you should check that the SDCard is mounted
        // using Environment.getExternalStorageState() before doing this.

        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                  Environment.DIRECTORY_PICTURES), "MyCameraApp");
        // This location works best if you want the created images to be shared
        // between applications and persist after your app has been uninstalled.

        // Create the storage directory if it does not exist
        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }

        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File mediaFile;
        if (type == MEDIA_TYPE_IMAGE){
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "IMG_"+ timeStamp + ".jpg");
        } else if(type == MEDIA_TYPE_VIDEO) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "VID_"+ timeStamp + ".mp4");
        } else {
            return null;
        }

        return mediaFile;
    }

    private void releaseCamera(){
        if (mCamera != null){
            isRecording = false;
            mCamera.stopPreview();
        mCamera.setPreviewCallback(null);
            mCamera.release();        // release the camera for other applications
            mCamera = null;
        }
    }

} 
```

我的预览课：

```
package com.camera123.cr;

import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class cameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mHolder;
    private Camera mCamera;

    public cameraPreview(Context context, Camera camera) {
        super(context);
        mCamera = camera;

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);
        // deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, now tell the camera where to draw the preview.
        try {
            mCamera.setPreviewDisplay(holder);
            mCamera.startPreview();
        } catch (IOException e) {
            Log.d("DEBUG", "Error setting camera preview: " + e.getMessage());
        }

    }

    public void surfaceDestroyed(SurfaceHolder holder) {

    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.

        if (mHolder.getSurface() == null){
          // preview surface does not exist
          return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e){
          // ignore: tried to stop a non-existent preview
        }

        // set preview size and make any resize, rotate or
        // reformatting changes here

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();

        } catch (Exception e){
            Log.d("DEBUG", "Error starting camera preview: " + e.getMessage());
        }
    }
} 
```

我的 main.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
  <FrameLayout
    android:id="@+id/camera_preview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    />

  <Button
    android:id="@+id/button_capture"
    android:text="Capture"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    />
</LinearLayout> 
```

还有我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.camera123.cr"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RECORD_VIDEO" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Camera123"
            android:label="@string/app_name" 

            android:screenOrientation="landscape">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:20:54.367

我不认为它有很好的记录，但拍照实际上会停止你的预览。地方：

```
mCamera.startPreview(); 
```

在 PictureCallback 中的 onPictureTaken() 方法中，在捕获完成后重新启动它。

# windows-7 - Windows 服务不会在重新启动时自动启动

> ID：16093244
> 
> 赞同：14
> 
> 时间：2013-04-18T21:17:30.640
> 
> 标签：windows-7, windows-services

我已经做了一些研究，并从我在 StackOverFlow 上找到的问题中添加了一些内容。但我仍然遇到服务无法自动启动的问题

这是我读过的一些问题/答案

1.  [如何自动启动 Windows 服务](https://stackoverflow.com/questions/4468148/how-to-auto-start-window-service)
2.  [安装时自动启动 Windows 服务](https://stackoverflow.com/questions/1036713/automatically-start-a-windows-service-on-install)
3.  [通过 vs net 2008 中的安装程序自动启动 Windows 服务](https://stackoverflow.com/questions/7495225/auto-start-windows-services-through-installer-in-vs-net-2008)
4.  [安装后如何自动启动服务](https://stackoverflow.com/questions/212734/how-to-automatically-start-your-service-after-install)

我在我的安装程序代码中设置了启动类型

我设置了安装后代码

我通过重启测试，没有。

卸载，重新安装，启动服务，然后再次重新启动，服务没有在重新启动时自动启动。

我确保每次进行更改时，我都会在全新安装之前对项目和设置项目进行重建。

在搜索 Google 时，我目前的情况也找不到太多。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T21:31:27.863

如果您的服务 StartType 设置为 Automatic，但重新启动后该服务未运行，则您的服务依赖于另一个未正确启动的服务，或者您的服务自己的启动代码失败并最终停止该服务。检查 Windows 事件日志是否有错误（如果您没有记录自己的错误，则应该记录）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T21:21:33.687

转到您的Windows服务，右键单击->属性，然后选择启动类型为自动。

# python - 在类属性上映射 dict 项

> ID：16093247
> 
> 赞同：0
> 
> 时间：2013-04-18T21:17:39.047
> 
> 标签：python, class, dictionary

类实例的`__dict__`属性对于将给定对象映射到类实例非常有用`dict`（字典的键在过程中成为类实例属性）。

例子：

```
>>> class SomeClass(object):
...     def __init__(self):
...         self.numbers = [1, 3, 5, 7, 9]
... 
>>> inst = SomeClass()
>>> inst.__dict__
{'numbers': [1, 3, 5, 7, 9]}
>>> inst.__dict__.update({
...     'letters': ['a', 'b', 'c', 'd'],
...     'numbers': [2, 4, 6, 8, 10]
...     })
>>> inst.letters, inst.numbers
(['a', 'b', 'c', 'd'], [2, 4, 6, 8, 10]) 
```

但是，如果类属性声明如下：

```
>>> class SomeClass(object):
...     numbers = [1, 3, 5, 7, 9]
... 
>>> inst = SomeClass()
>>> inst.__dict__
{} 
```

在这种情况下有没有办法访问它们？我的意思是，有没有办法独立于其他特殊类属性（例如方法或默认属性）列出它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:20:21.663

这些是*类*属性，而不是实例属性。类属性在实例之间共享。这也是实例继承其类的方法的方式。实例属性具有同名的影子类属性，因此您可以`numbers`在实例上设置以赋予实例它自己的副本。

您可以`dir()`在实例上使用来列出实例和类属性名称的组合视图：

```
>>> inst = SomeClass()
>>> dir(inst)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'numbers'] 
```

您可以使用[`inspect.getmembers()`](http://docs.python.org/2/library/inspect.html#inspect.getmembers)来过滤属性的类型。

另一种选择是列出*类*属性`__dict__`：

```
>>> vars(type(inst))
dict_proxy({'__dict__': <attribute '__dict__' of 'SomeClass' objects>, '__module__': '__main__', '__weakref__': <attribute '__weakref__' of 'SomeClass' objects>, 'numbers': [1, 3, 5, 7, 9], '__doc__': None})
>>> {k: v for k, v in vars(type(inst)).iteritems() if not k.startswith('__') and not inspect.isfunction(v)}
{'numbers': [1, 3, 5, 7, 9]} 
```

从[类定义文档](http://docs.python.org/3/reference/compound_stmts.html#class-definitions)中：

> 类定义中定义的变量是类属性；它们由实例共享。实例属性可以在带有 的方法中设置`self.name = value`。类和实例属性都可以通过符号“<code>self.name”访问，并且以这种方式访问​​时，实例属性会隐藏同名的类属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:28:38.667

我的建议是你应该避免修改`__dict__`，`locals()`等等。

为什么不将您期望动态的属性显式存储在字典中？这样，您最终不会有一堆带有您不期望的属性的对象，因为它们不是在类中定义的，而是由其他地方的代码进行猴子修补的。

我认为这更清晰，更不可怕：

```
class MyClass(object):
    classattrs = {'numbers': [1,2,3,4,5]}

MyClass.classattrs['letters'] = ['a','b','c'] 
```

归结为人们期望 dict 的内容会改变的事实。他们不期望类的属性会改变。

在任何情况下`inspect`，`dir`和它们的同类将难以过滤掉所有其他类属性，如特殊方法等。

这种保持名称和属性（合理地）静态的想法已经被比我更聪明、更有经验的人表达了：http: [//nedbatchelder.com/blog/201112/keep_data_out_of_your_variable_names.html](http://nedbatchelder.com/blog/201112/keep_data_out_of_your_variable_names.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T21:24:22.523

如果定义`numbers`为类属性，

```
class SomeClass(object):
    numbers = [1, 3, 5, 7, 9] 
```

然后放入`SomeClass.__dict__`：

```
In [5]: SomeClass.__dict__
Out[5]: dict_proxy(
{'__dict__': <attribute '__dict__' of 'SomeClass' objects>,
 '__module__': '__main__',
 '__weakref__': <attribute '__weakref__' of 'SomeClass' objects>,
 'numbers': [1, 3, 5, 7, 9],
 '__doc__': None}) 
```

# c++ - '预期的主要表达式/';' 模板程序中的模板错误之前

> ID：16093255
> 
> 赞同：0
> 
> 时间：2013-04-18T21:17:57.907
> 
> 标签：c++, templates

```
#include <iostream>
#include <string>
#include "HashTable.h"

using namespace std;

struct MyStruct {
string str;
int num;
bool operator ==( const MyStruct & r ) { return str == r.str; }
};

const int SIZE1 = 97;

int hash1( const MyStruct & obj );

int main( )
{
HashTable<MyStruct> ht1( hash1, SIZE1 );

MyStruct myobj;

myobj.str = "elephant";
myobj.num = 25;
ht1.insert( myobj );

MyStruct myobj2;

myobj2.str = "elephant";
ht1.retrieve( myobj2 );
cout << "retrieved from ht1: " << myobj2.num << " for num." << endl;

return 0;
}

int hash1( const MyStruct & obj )
{
int sum = 0;
for ( int i = 0; i < 3 && i < int( obj.str.length( ) ); i++ )
    sum += obj.str[ i ];
return sum % SIZE1;
} 
```

这是我的主要功能的代码，我得到了大量的错误，找不到任何错误。

```
H:\CSC 375\Homework5\LinkedList.h|200|warning: no newline at end of file|

H:\CSC 375\Homework5\Array.h||In constructor `Array<DataType>::Array(int)':|
H:\CSC 375\Homework5\Array.h|46|error: expected primary-expression before "template"|
H:\CSC 375\Homework5\Array.h|46|error: expected `;' before "template"| 
```

每次使用模板重复

```
H:\CSC 375\Homework5\HashTable.h|6|error: expected primary-expression before "template"|
H:\CSC 375\Homework5\HashTable.h|6|error: expected `;' before "template"| 
```

每次使用模板重复

```
H:\CSC 375\Homework5\HashTable.h|82|warning: no newline at end of file|

H:\CSC 375\Homework5\main.cpp|17|error: expected primary-expression before "int"|
H:\CSC 375\Homework5\main.cpp|17|error: expected `;' before "int"|
H:\CSC 375\Homework5\main.cpp|38|error: a function-definition is not allowed here before '{' token|
H:\CSC 375\Homework5\main.cpp|38|error: expected `,' or `;' before '{' token|
H:\CSC 375\Homework5\main.cpp|44|warning: no newline at end of file|
H:\CSC 375\Homework5\main.cpp|43|error: expected `}' at end of input|
||=== Build finished: 35 errors, 3 warnings (0 minutes, 0 seconds) ===| 
```

编辑：链表、数组和哈希表都可以在没有 main.cpp 的情况下编译和构建，所以它必须是那个文件中的东西。

双重编辑：文件代码（我在使用模板时将接口和实现放在同一个文件中，链接 .h 和 .cpp 的问题太多）

```
// HashTable.h

#include "LinkedList.h"
#include "Array.h"

template <class DataType>
class HashTable
{
public:
    HashTable( int (*hashf)(const DataType &), int s );

    bool Insert( const DataType & newObject );
    bool retrieve( DataType & retrieved );
    bool Remove( DataType & removed );
    bool update( DataType & updateObject );
    void makeEmpty( );

private:
    Array< LinkedList<DataType> > table;
    int (*hashfunction)(const DataType &);
};

// HashTable.cpp
template <class DataType>
HashTable<DataType>::HashTable( int (*hashf)(const DataType &), int s )
    : table( s )
{
    hashfunc = hashf;
}

template <class DataType>
bool HashTable<DataType>::Insert( const DataType & newObject )
{
    int location = hashfunc( newObject );
    if ( location < 0 || location >= table.length( ) )
        return false;
    table[ location ].Insert( newObject );
    return true;
}

template <class DataType>
bool HashTable<DataType>::retrieve( DataType & retrieved )
{
    int location = hashfunc( retrieved );
    if ( location < 0 || location >= table.length( ) )
        return false;
    if ( !table[ location ].retrieve( retrieved ) )
        return false;
    return true;
}

template <class DataType>
bool HashTable<DataType>::Remove( DataType & removed )
{
    int location = hashfunc( removed );
    if ( location < 0 || location >= table.length( ) )
        return false;
    if ( !table[ location ].Remove( removed ) )
        return false;
    return true;
}

template <class DataType>
bool HashTable<DataType>::update( DataType & updateObject )
{
    int location = hashfunc( updateObject );
    if ( location < 0 || location >= table.length( ) )
        return false;
    if ( !table[location].find( updateObject ) )
        return false;
    table[location].Replace( updateObject );
    return true;
}

template <class DataType>
void HashTable<DataType>::makeEmpty( )
{
    for ( int i = 0; i < table.length( ); i++ )
        table[ i ].makeEmpty( );
} 
```

.... // 数组.h

```
#include <string>

using namespace std;

template <class DataType>
class Array
{
public:
    Array( int Size );
    Array( const Array<DataType> & ap );
    ~Array( );
    Array<DataType> & operator =( const Array<DataType> & right );

    inline DataType & operator [ ]( int index );
    void changeSize( int newSize );
    inline int length( ) const;
    string err( ) const;

private:
    DataType *elements;
    int capacity;
    DataType dud;
    int errorCode;
    inline void deepCopy( const Array<DataType> & original );
};

// Array.cpp

template <class DataType>
Array<DataType>::Array( int Size )
{
    if ( Size < 1 ) {
        capacity = 1;
        errorCode = 1;
    }
    else {
        capacity = Size;
        errorCode = 0;

    elements = new DataType [capacity];
}

template <class DataType>
Array<DataType>::Array( const Array<DataType> & ap )
{
    deepCopy( ap );
}

template <class DataType>
Array<DataType>::~Array( )
{
    delete [ ] elements;
}

template <class DataType>
Array<DataType> & Array<DataType>::operator =( const Array<DataType> & right )
{
    if ( this == &right )
        return *this;
    delete [ ] elements;
    deepCopy( right );

    return *this;
}

template <class DataType>
inline DataType & Array<DataType>::operator [ ]( int index )
{
#ifdef DEBUG_ARRAY
    if ( index < 0 || index >= capacity ) {
        errorCode |= 2;
        return dud;
        }
#endif
    return elements[ index ];
}

template <class DataType>
void Array<DataType>::changeSize( int newSize )
{
    if ( newSize < 1 )
    {
        errorCode |= 4;
        return;
    }

    DataType *newArray = new DataType [newSize];

    int limit = (newSize > capacity)? capacity : newSize;

    for ( int i = 0; i < limit; i++ )
        newArray[ i ] = elements[ i ];

    delete [ ] elements;

    elements = newArray;

    capacity = newSize;
}

template <class DataType>
inline int Array<DataType>::length( ) const
{
    return capacity;
}

template <class DataType>
string Array<DataType>::err( ) const
{

    if ( errorCode == 0 )
        return "No error.\n";

    string errorMessage = "";
    if ( errorCode & 1 ) {
        errorMessage += "Nonpositive size passed into constructor, so\n";
        errorMessage += "the capacity was set to 1 by default.\n";
    }
    if ( errorCode & 2 )
        errorMessage += "Index out of range.\n";
    if ( errorCode & 4 ) {
        errorMessage += "Nonpositive size passed into changeSize, so\n";
        errorMessage += "the size of the array was not changed.\n";
    }

    return errorMessage;
}

template <class DataType>
inline void Array<DataType>::deepCopy( const Array<DataType> & original )
{
    capacity = original.capacity;
    errorCode = original.errorCode;
    elements = new DataType [capacity];
    for ( int i = 0; i < capacity; i++ )
        elements[ i ] = original.elements[ i ];
} 
```

大部分代码是我们教科书提供的，我只需要它运行，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:57:23.193

```
template <class DataType>
Array<DataType>::Array( int Size )
{
    if ( Size < 1 ) {
        capacity = 1;
        errorCode = 1;
    }
    else {
        capacity = Size;
        errorCode = 0;
    }//This is missing
    elements = new DataType [capacity];
} 
```

在标头中使用命名空间也是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:55:17.613

在`Array( int Size )`构造函数的实现中，`else`case 缺少它的右大括号`}`。

# c# - POST 操作在 IIS 部署的 Web 应用程序中不起作用

> ID：16093268
> 
> 赞同：1
> 
> 时间：2013-04-18T21:18:37.363
> 
> 标签：c#, iis

我有一个 Web 应用程序，它与本地服务（也是我的）通信并从 RESTful 调用中产生结果。

我已经通过 IIS 7 在我的系统上部署了 Web 应用程序。

到目前为止它看起来不错，除了我无法执行 POST 操作，它们看起来就像 NOP。

虽然，当我在机器上安装 VS 2012 时，POST 操作开始工作。我不确定 VS 2012 安装设置了哪些导致 POST 操作正常工作的确切内容。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:22:58.220

您必须在**web.config**文件中启用 POST 操作。下面演示一个简单的实现

```
<system.webServer>
    <handlers>
        <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
        <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:25:13.577

确保将其包含在您的配置文件中：

```
 <webServices>
  <protocols>
    <add name="HttpGet"/>
    <add name="HttpPost"/>
  </protocols>
</webServices> 
```

# python - Django CMS - 文章显示为无

> ID：16093271
> 
> 赞同：0
> 
> 时间：2013-04-18T21:18:42.677
> 
> 标签：python, django, django-cms

我刚刚安装了 Django CMS，但文章的每个标题都显示为无？有没有人遇到过这个？

![截屏](https://i.stack.imgur.com/2ZgIp.png)

根据 django-cms 站点上的教程，安装是仅使用基本模板和 template_1 模板的基本安装。

当回到每一页时，标题就在那里。所以信息必须被写入数据库。

谢谢，

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-19T07:21:14.583

django CMS 2.4 和 USE_I18N=False 或仅使用一种语言时，它接缝存在问题。

[https://github.com/divio/django-cms/issues/1715](https://github.com/divio/django-cms/issues/1715)

和

[https://github.com/divio/django-cms/pull/1722](https://github.com/divio/django-cms/pull/1722)

尝试设置 LANGUAGE_CODE = "en" 而不是 "en-us"

# mobile - 通过混合应用获利

> ID：16093272
> 
> 赞同：6
> 
> 时间：2013-04-18T21:18:42.660
> 
> 标签：mobile, hybrid

我正在寻找启动移动应用程序。由于该应用程序相当简单/直接，不需要大量的性能/图形/等，混合应用程序似乎很有意义——尤其是考虑到我有限的预算。然而，商业模式的很大一部分依赖于应用内购买。在这里，似乎更有可能通过支付系统（如 iTunes 帐户）来转换这些销售额。有谁知道用 HTML-5 编写但包装在本机外壳中的混合应用程序是否仍然可以利用内部的即时支付功能，例如 iTunes 商店。如果不是，混合应用程序有哪些选项可以简化应用程序内购买？

在此先感谢您的帮助。关于这个主题的信息非常有限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T09:31:23.620

我对这个问题没有回复并不感到惊讶。我一直在研究混合移动应用货币化，但收效甚微。我个人更关心将移动广告网络 (AdMob) 和社交网络（Socialize、Facebook、Twitter）整合到基于 HTML5、CSS3 和 JavaScript 的混合移动应用程序中。我专注于Android开始。PhoneGap 有一个可用的 AdMob 插件。Eclipse 还具有 MDS 的 PhoneGap 插件，可以轻松上手。

随着您远离原生 Android 并更接近跨平台构建环境，使用各种所需的 SDK 进行货币化和社交变得更加困难或不可能，除非有现有插件或您（和其他开发人员）愿意编写插件.

大多数跨平台构建系统（PhoneGap Build、Icenium、Monaca、Titanium ...）和 MEAP（OpenMEAP、Convertigo、WorkLight、Feed Henry、Antenna、Appcelerator ...）目前不支持。显然，货币化和社交化在跨平台的竞争中是次要的。

关于您关于跨平台移动开发的应用内购买的问题，我知道有两个例外，即英特尔 XDK 和 AppMobi 云服务 SDK。英特尔 XDK 主要基于它对 AppMobi 的收购和它的 HTML5M 应用中心，通过 1Touch 实现了这一点。

[http://html5dev-software.intel.com/](http://html5dev-software.intel.com/)

[http://www.appmobi.com/](http://www.appmobi.com/)

[http://www.appmobi.com/amdocs/lib/Article-1TouchInventory.pdf?r=4960](http://www.appmobi.com/amdocs/lib/Article-1TouchInventory.pdf?r=4960)

他们还提到广告也将很快推出。

您还可以使用 AppHub 云服务开发混合英特尔 HTML5 应用程序，而无需使用英特尔 XDK。

[http://www.html5dev-software.intel.com/amdocs/lib/Article-DevelopingOutsideXDK.pdf](http://www.html5dev-software.intel.com/amdocs/lib/Article-DevelopingOutsideXDK.pdf)

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T13:49:46.547

如果您选择通过 Cordova 进行混合，可以使用各种具有各自 Cordova 插件的广告网络，例如 AdMob ( [https://github.com/rajpara11/phonegap-plugins/tree/master/Android/AdMobPlugin](https://github.com/rajpara11/phonegap-plugins/tree/master/Android/AdMobPlugin) )， RevMob ( [http://sdk.revmob.com/cordova](http://sdk.revmob.com/cordova) ) 等

如果应用内购买是你的事，那么也有插件：[https](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/InAppPurchaseManager) ://github.com/phonegap/phonegap-plugins/tree/master/iOS/InAppPurchaseManager 。

至于选择平台，我绝对推荐Icenium，它刚刚正式发布，已经非常成熟。他们计划在一个月后发布的主要版本将使用户能够利用自定义 Cordova 插件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-06T10:52:29.740

诀窍是在本机层而不是 WebView 中调用广告，本质上是在 HTML5 部分的外部/顶部运行广告。这通常需要使用 IDE 来实现。

# node.js - 如何使用嵌套模式更新 mongo 中的文档

> ID：16093276
> 
> 赞同：1
> 
> 时间：2013-04-18T21:18:49.363
> 
> 标签：node.js, mongodb, express, mongoose

我有以下代码：

```
add_new_patient : function(username,pname,pid,pdesc,callback){
                  var find_md = function(){
                      return function(err,pat){
                        if (err){
                         console.log('Error at adding patient: error at searching for users');
                         callback(2);//In the callback method I'm passing I have specific behavior for error handling for error codes.
                         return;
                        }
                        if (pat.lenth > 0){
                            console.log('searching for md');
                            MD.find({'mdname':username},add_patient(pat));
                        }else{
                            console.log('Error at adding patient: no user found');
                            callback(-1);
                            return;
                       }
                  }}

                   var add_patient = function(pat){
                        return function(err,md){
                       if (err){
                           console.log('Error at adding patient: cannot find md');
                           callback(-1);
                           return;
                       }
                   callback(0);
                   }
              }
              console.log('searching for user '+pid);
              User.find({'name':pid},find_md());
} 
```

这些是我的模式：

```
var mdSchema = mongoose.Schema({
   mdname : String,
   pacients : [userSchema.ObjectId]
});

var userSchema =mongoose.Schema({
    name : String,
    password : String,
    phone : String,
    history : [{timestamp: Date , heart: Number }],
    md : {mdname: String, contact: Number}
}); 
```

正如您可以从代码中猜到的那样，我想将患者添加到 dms。首先，我在数据库中搜索 pid。如果我找到病人，我会开始寻找 mds。当我找到 md 时，我想将患者添加到 md。现在我不知道如何添加它们。架构显示我有一个 schemaUser 数组，这是患者的类型，但我不知道如何附加到它，而不知道如何从我从查询中收到的数据中创建一个 MD 模型。另外我应该在患者数组中插入什么？找到的患者的 _id 还是整个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:42:50.507

我设法通过以下方式解决它：

```
var add_patient = function(pat){
        return function(err,md){
            if (err){
                console.log('Error at adding patient: cannot find md');
                callback(-1);
                return;
            }
            var query = {mdname: md.mdname};
            console.log(md);
            var doThis = { $addToSet: { patients: pat._id } };
            console.log(query);
            MD.update(query,doThis,done_adding());
        }
    }

    var done_adding = function(){
        return function(err,dat){
            if (err){
                console.log('Error at the end of adding new patient!');
                callback(-1);
                return;
            }
            console.log('new patient added');
            callback(0);
        } 
```

所以它的作用是：当我拥有要向其添加患者/用户的 md 时，我使用更新方法和 $addToSet 操作，因此我将拥有一组与 md 关联的患者。我不知道为什么，但是使用 $push 参数时，相同的代码对我不起作用。然后什么也没发生，当我将 upsert 选项设置为 true 时，我在数据库中的整个记录​​都被 id 覆盖了。

# javascript - 使用 $.getJSON 填充 jstree 在加载时卡住了

> ID：16093279
> 
> 赞同：0
> 
> 时间：2013-04-18T21:19:04.720
> 
> 标签：javascript, jquery, json, jstree, populate

我在使用 jstree 使用单独的 json 文件中的数据填充 div 时遇到问题。

为了做到这一点，我尝试使用**$.getJSON**获取 json （我不确定这是使用正确的函数），并将结果分配给我接下来使用的变量来填充树，这就是我的方式获取json文件：

```
 var tree;
             tree=$.getJSON("tree_data.json",function(data){
                        tree=data;
             });
                    console.log(tree); 
```

这是我用来填充 jstree div 的代码：

```
 $("#treeViewDiv").jstree({
                            "json_data" : tree,
                            "themes" : {
                                    "theme" : "apple",
                                    "dots" : true,
                                    "icons" : false
                            },
                            "plugins" : [
                                            "themes", "json_data", "ui"
                                        ]
                    }).bind("select_node.jstree", function(e, data)
                {
                    if(jQuery.data(data.rslt.obj[0], "href"))
                    {
                        window.location=jQuery.data(data.rslt.obj[0], "href");
                    }
                    else
                    {
                        alert("No href defined for this element");
                    }
                }); 
```

这是我的**tree_data.json**文件，其中包含我试图填充树的数据：

```
 {
                    "data":[
                        {
                            "data" : "Search engines",
                            "children" :[
                                         {"data":{"title":"Yahoo", "icon":"./themes/file.png"},  "metadata":{"href":"http://www.yahoo.com"}},
                                         {"data":"Bing", "metadata":{"href":"http://www.bing.com"}},
                                         {"data":"Google", "children":[{"data":"Youtube", "metadata":{"href":"http://youtube.com"}},{"data":"Gmail", "metadata":{"href":"http://www.gmail.com"}},{"data":"Orkut","metadata":{"href":"http://www.orkut.com"}}], "metadata" : {"href":"http://youtube.com"}}
                                        ],
                            "state" : "open"
                        },
                        {
                            "data" : "Networking sites",
                            "children" :[
                                {"data":"Facebook", "metadata":{"href":"http://www.fb.com"}},
                                {"data":"Twitter", "metadata":{"href":"http://twitter.com"}}
                            ]
                        }
                    ]
 } 
```

由于我的代码，我有一个 jstree 的开头，并且只有一个跨度，其中包含“加载”文本，所以我猜测数据加载有问题。这是它的样子：

![上面代码的结果](https://i.stack.imgur.com/vqNDe.png)

我究竟做错了什么？有任何想法吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T23:09:37.917

将整个`$("#treeViewDiv").jstree({...`块放在`$.getJSON`回调中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:40:33.893

[$.getJSON](http://api.jquery.com/jQuery.getJSON/)不返回数据；数据在回调中：

```
var tree;
$.getJSON("tree_data.json", function(data){
    tree = data;
    console.log(tree);
}); 
```

尝试调用您的插件代替上述`console.log`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T23:05:17.897

问题是

```
 console.log(tree); 
```

在回调之前执行。放置 console.log(tree); 在回调函数中。

像这样：

```
 var tree;
      tree=$.getJSON("tree_data.json",function(data){
                tree=data;
                console.log(tree);
         }); 
```

# c++ - 无法将我写入文件的内容输出

> ID：16093287
> 
> 赞同：2
> 
> 时间：2013-04-18T21:19:31.423
> 
> 标签：c++, file-io

```
#include <cstdlib>
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main()
{
ofstream fout1;
ofstream fout2;

string fnameOdd;
string fnameEven;
int x;
int numEven(0);
int numOdd(0);

cout << "Enter name of file for odd integers: ";
getline(cin, fnameOdd);

fout1.open(fnameOdd.c_str(), ios::out);

cout << "Enter name of file for even integers: ";
    getline(cin, fnameEven);

fout2.open(fnameEven.c_str(), ios::out);

if(!fout1.is_open())
{
    cerr << "Unable to open file" << fnameOdd << endl;
    exit(10);
}

if(!fout2.is_open())
{
    cerr << "Unable to open file" << fnameEven << endl;
    exit(15);
}

cout << "Enter list of odd and even integers (followed by 0): " << endl;
cin >> x;
while (x != 0)
{

if (x % 2 == 0)
{
    numEven++;
}
else
{
    numOdd++;
}
}
fout1 << numEven;
fout2 << numOdd;

cout << "File " << fnameOdd << " contains " << numOdd << " odd integers. " <<endl;
cout << "File " << fnameEven << " contains " << numEven << " even integers. " <<endl;

fout1.close();
fout2.close();

return 0;
} 
```

我无法将任何内容输出到屏幕上，没有任何事情发生，只是输入文件名和整数。我不确定如何将我写的内容输出到文件中，阅读我的书也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:21:38.997

您忘记了您的输入语句也`cin >> x;`需要进入循环内部

```
cin >> x;
while (x != 0)
{
    if (x % 2 == 0)
    {
        numEven++;
    }
    else
    {
        numOdd++;
    }
    cin >> x; // new line here
} 
```

在输入 x 的第一个值后编写它的方式，它永远不会再次更改它的值。所以while循环永远不会结束。这就是为什么你没有看到任何输出。

# r - data.table 连接和 j-expression 意外行为

> ID：16093289
> 
> 赞同：5
> 
> 时间：2013-04-18T21:19:39.143
> 
> 标签：r, data.table

在`R 2.15.0`和`data.table 1.8.9`：

```
d = data.table(a = 1:5, value = 2:6, key = "a")

d[J(3), value]
#   a value
#   3     4

d[J(3)][, value]
#   4 
```

我希望两者都能产生相同的输出（第二个），我相信他们*应该*。

为了澄清这不是`J`语法问题，相同的期望适用于以下（与上述相同）表达式：

```
t = data.table(a = 3, key = "a")
d[t, value]
d[t][, value] 
```

我希望以上两者都能返回完全相同的输出。

**所以让我重新表述这个问题**- 为什么（`data.table`设计成这样）*键*列会自动打印出来`d[t, value]`？

**更新（基于下面的答案和评论）：**感谢@Arun 等人，我现在了解设计原因。上面打印*密钥*的原因是因为每次通过语法进行合并时都有一个隐藏*的*存在，那就是密钥。以这种方式设计的原因似乎如下 - 由于必须在合并时执行操作，因此如果您要通过合并的键来执行此操作，不妨利用这一点而不是执行另一个操作。`data.table``X[Y]``by``by``by`

话虽如此，我相信这是一个语法设计缺陷。我阅读`data.table`语法的方式`d[i, j, by = b]`是

> take `d`，应用`i`操作（是子集或合并或诸如此类），然后执行`j`表达式“by” b

by-without-by 打破了这种阅读并介绍了一个必须特别考虑的案例（我是否合并`i`，`by`只是合并的关键，等等）。我相信这应该是的工作-在合并的一个特定情况下`data.table`做出更快的值得称赞的努力，当等于键时，应该以另一种方式完成（例如，通过内部检查表达式是否实际上是合并的关键）。`data.table``by``by`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T21:53:41.670

**编辑编号 Infinity：** Faq 1.12*准确回答了您的问题：（* [**FAQ 1.13**](http://datatable.r-forge.r-project.org/datatable-faq.pdf)也有用/相关，此处未粘贴）。

> **1.12 X[Y]和merge(X,Y)有什么区别？**
> X[Y] 是一个连接，使用 Y（或 Y 的键，如果有的话）作为索引来查找 X 的行。Y[X] 是一个连接，使用 X（或 X 的键，如果有的话）作为索引来查找 Y 的行。merge(X,Y)1 同时做这两种方式。X[Y] 和 Y[X] 的行数通常不同；而 merge(X,Y) 和 merge(Y,X) 返回的行数是相同的。但是这忽略了要点。大多数任务都需要在连接或合并后对数据执行某些操作。**为什么要合并所有数据列，然后只使用其中的一小部分？**
> 您可能会建议`merge(X[,ColsNeeded1],Y[,ColsNeeded2])`，但这需要数据子集的副本，并且需要程序员确定需要哪些列。**data.table 中的 X[Y,j] 为您一步完成所有这些**. 当您编写时`X[Y,sum(foo*bar)]`， data.table 会自动检查 j 表达式以查看它使用了哪些列。它只会对这些列进行子集化；其他的被忽略。仅为 j 使用的列创建内存，并且 Y 列在每个组的上下文中享受标准的 R 回收规则。假设 foo 在 X 中，而 bar 在 Y 中（以及 Y 中的 20 个其他列）。**不是** `X[Y,sum(foo*bar)]` **比合并后跟一个子集更快地编程和运行吗？**

* * *

旧答案对回答 OP 的问题没有*任何*帮助（来自 OP 的评论），保留在这里，因为我相信它确实如此）。

当您为`j`like`d[, 4]`或`d[, value]`in提供值时`data.table`， the`j`被评估为`expression`。从 data.table FAQ 1.1 on access `DT[, 5]`（第一个常见问题解答）：

> 因为，默认情况下，与 data.frame 不同，第二个参数是在 DT 范围内计算的表达式。5 评估为 5。

因此，在您的情况下，首先要了解的是：

```
d[, value] # produces a "vector"
# [1] 2 3 4 5 6 
```

当查询是基本索引时，这*没有什么不同，例如：*`i`

```
d[3, value] # produces a vector of length 1
# [1] 4 
```

但是，当is 本身是 a时，情况就*不同*了。引言（第 6 页）：`i``data.table``data.table`

```
d[J(3)] # is equivalent to d[data.table(a = 3)] 
```

在这里，您正在执行`join`. 如果您只是这样做，`d[J(3)]`那么您将获得与该联接对应的所有列。如果你这样做，

```
d[J(3), value] # which is equivalent to d[J(3), list(value)] 
```

既然你说这个答案对回答你的问题没有*任何*帮助，我会指出我相信你的“改写”问题的答案在于：--->**那么你只会得到那个专栏，但既然你正在表演连接，键列也将被输出（因为它是基于键列的两个表之间的连接）。**

* * *

**编辑：**在您的第二次编辑之后，如果您的问题是*为什么会这样*？，那么我会不情愿地（或者说是无知地）回答，Matthew Dowle 的设计是为了区分 data.table`join-based-subset`和`index-based-subset`ting 操作。

您的第二种语法相当于：

```
d[J(3)][, value] # is equivalent to:

dd <- d[J(3)]
dd[, value] 
```

在哪里， in `dd[, value]`，`j`被评估为一个表达式，因此你得到一个向量。

* * *

要回答您的第三个修改问题：第三次，这是因为它是基于键列的**两个 data.tables 之间的 JOIN 。**如果我加入两个`data.table`s，我期望一个`data.table`

从`data.table`介绍开始，再次：

> 将 data.table 传递到 data.table 子集类似于基础 R 中的 A[B] 语法，其中 A 是矩阵，B 是 2 列矩阵。事实上，base R 中的 A[B] 语法启发了 data.table 包。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-14T15:10:00.700

从 开始[`data.table 1.9.3`](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)，默认行为已更改，下面的示例产生相同的结果。要获得*by-without-by*结果，现在必须指定一个显式`by=.EACHI`：

```
d = data.table(a = 1:5, value = 2:6, key = "a")

d[J(3), value]
#[1] 4

d[J(3), value, by = .EACHI]
#   a value
#1: 3     4 
```

这是一个稍微复杂一点的例子，说明了区别：

```
d = data.table(a = 1:2, b = 1:6, key = 'a')
#   a b
#1: 1 1
#2: 1 3
#3: 1 5
#4: 2 2
#5: 2 4
#6: 2 6

# normal join
d[J(c(1,2)), sum(b)]
#[1] 21

# join with a by-without-by, or by-each-i
d[J(c(1,2)), sum(b), by = .EACHI]
#   a V1
#1: 1  9
#2: 2 12

# and a more complicated example:
d[J(c(1,2,1)), sum(b), by = .EACHI]
#   a V1
#1: 1  9
#2: 2 12
#3: 1  9 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T00:04:46.913

这*不是*意外行为，而是记录在案的行为。Arun 在FAQ 中做了很好的解释和演示，其中**清楚地**记录了这一点。

有一个功能请求[FR 1757](https://r-forge.r-project.org/tracker/?group_id=240&atid=978&func=detail&aid=1757)建议`drop`在这种情况下使用参数

实施时，您想要的行为可能会被编码

```
d = data.table(a = 1:5, value = 2:6, key = "a")

d[J(3), value, drop = TRUE] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-18T23:39:55.050

我同意阿伦的回答。这是另一种说法：在进行连接之后，您通常会将连接列用作参考或作为进一步转换的输入。所以你保留它，你可以选择用（更迂回的）双重`[`语法丢弃它。从设计的角度来看，经常保留相关信息，然后在需要时丢弃，比尽早丢弃并冒丢失难以重建的数据的风​​险更容易。

您希望保留连接列的另一个原因是您可以在执行连接的同时执行聚合操作（*不带 by 的 by*）。例如，通过包含 join 列，此处的结果更加清晰：

```
d <- data.table(a=rep.int(1:3,2),value=2:7,other=100:105,key="a")
d[J(1:3),mean(value)]
#   a  V1
#1: 1 3.5
#2: 2 4.5
#3: 3 5.5 
```

# loops - Stata：观察成对计算

> ID：16093291
> 
> 赞同：-1
> 
> 时间：2013-04-18T21:19:40.800
> 
> 标签：loops, stata

```
input X group
21 1
62 1
98 1
12 2
87 2
end 
```

现在我尝试按如下方式计算度量：

```
$$ \sum_{g} \left | X_{ig}-X_{jg} \right | $$ 
```

, 其中 $i$ 或 $j$ ($i \neq j$) 索引观察。g 对应于组变量（此处为 1 和 2）

如何使用循环计算这个数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:18:13.933

除了比例因子外，看起来像基尼平均差。这个领域已经有许多用户编写的命令。在 [R] 不等式的 Stata 手册中有（不寻常的）摘要。

此外，这与第二个 L 矩有关。查看`lmoments`来自 SSC 的命令。

您无需*通过*索引的双循环来计算它。它折叠成订单统计的线性组合。

稍后：参见 David 1998 年的论文，该论文在

[http://projecteuclid.org/DPubS/Repository/1.0/Disseminate?view=body&id=pdf_1&handle=euclid.ss/1028905831](http://projecteuclid.org/DPubS/Repository/1.0/Disseminate?view=body&id=pdf_1&handle=euclid.ss/1028905831)

# java - Android，传递 UI 对象的服务

> ID：16093293
> 
> 赞同：0
> 
> 时间：2013-04-18T21:19:47.787
> 
> 标签：java, android

我对此有点挣扎。作为一个简单的练习，我想将一个 UI 对象（例如标签）从 Activity 传递给服务，以便稍后更改它的文本，我真的很挣扎。我注意到了几种实现方式：

1.  也使用广播信使。
2.  将对象打包到 Packable 包装器中。

我对选择哪个有点困惑，我遵循的一些例子有点不清楚。使用选项 1，我正在想象活动应该接收到广播信使的消息，以指示服务已结束。那正确吗？

第二个选项，对于我需要实际实施哪些领域才能使其正常工作，我感到有些困惑。

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:24:10.940

简而言之，您想要的是 IPC（进程间通信）。在 Android 中，要通信 2 个不同的进程——在你的情况下是一个应用程序和一个服务——你需要定义和实现一个[AIDL](http://developer.android.com/guide/components/aidl.html)；或者传递对象[`Message`](http://developer.android.com/reference/android/os/Message.html)，这需要类传递来实现[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)。

我建议你使用 AIDL，它更容易并且避免了使用`Parcelable`.

# php - pay pal returnurl 返回用户 pay pal 帐户电子邮件地址

> ID：16093298
> 
> 赞同：-1
> 
> 时间：2013-04-18T21:19:59.807
> 
> 标签：php, email, paypal

我正在使用 PHP。

是否有可能当支付宝在付款后返回我的网站时，它还可以将电子邮件地址（贝宝用户名）传递给我，以便我可以使用它向他们发送电子邮件？

我正在努力使我的网站尽可能简单，并且我不想预先要求客户提供大量信息。

我的理想流程是：付款 > 将记录添加到数据库 > 使用用户名和密码向客户发送电子邮件

然后，客户可以在自己的空闲时间登录并填写其余部分。

有可能得到这个变量吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:23:36.423

此页面显示了您在处理付款后可以从 PayPal 取回的内容。

[IPN 和 PDT 变量](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNandPDTVariables#id091EB04C0HS)

这是我在 Codeigniter 中制作的示例。

```
/* Receives a form data from paypal that is processed after payment goes through.
 * It will update the database entry with a transaction id. 
 */
 function epayment_notify(){
    $this->load->model('pament_notice_model');

    echo "Hi<br>";
    $postvars = isset($_POST)? $_POST : array("no post");
    /* echo "</pre>Post Vars:<br><pre>";
    print_r($postvars);
    echo "</pre>Refurl:<br><pre>";
    Check for the transaction ID and put it in the pament_notice table if possible. 
    */
    if (isset($postvars['item_number']) &&  $postvars['item_number'] > 0 && isset($postvars['txn_id'])){

        /* make sure that payment_number is empty on this row. */ 
        log_message('info',"PayPal transaction received.");

        if ($this->pament_notice_model->make_sure_payment_number_is_empty($postvars['item_number'])){   
            //writes the message to the local log file in CI
            log_message('debug',"PayPal payment number is empty.");

            /* set the txn_id in the slot */
            $data = array('payment_number' => $postvars['txn_id']);
            $this->db->where('entry_id',$postvars['item_number']);
            $this->db->update('pament_notice',$data);
            log_message('debug',"payment number updated. item:".$postvars['item_number']);
            log_message('debug',"payment actual cost. payment_gross:".$postvars['payment_gross']);

        }  else {
            log_message('error',"PayPal transaction attempted on non-empty payment number.");
            if (isset($postvars['item_number']))
                log_message('error',"failed request item_number :".$postvars['item_number']);
            if (isset($postvars['txn_id']))
                log_message('error',"failed request txn_id:". $postvars['txn_id']); 
        }   

    } else {
        log_message('info',"PayPal payment transaction sent with invalid data.");
        if (!isset($postvars['item_number']))
            log_message('error',"item_number is not set");

        if (isset($postvars['item_number']))
            log_message('error',"failed request item_number :".$postvars['item_number']);

        if (!isset($postvars['txn_id']))
            log_message('error',"txn_id is not set\n");

        if (isset($postvars['txn_id']))
            log_message('error',"failed request txn_id:". $postvars['txn_id']); 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:24:34.860

是的...查看传回的receiver_email 变量。

此处指南：[https ://cms.paypal.com/cms_content/GB/en_GB/files/developer/IPNGuide.pdf](https://cms.paypal.com/cms_content/GB/en_GB/files/developer/IPNGuide.pdf)

见第 42-43 页

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:27:16.490

有几种处理方法。

最简单的方法是在将用户发送到贝宝之前收集该数据。将其存储在用户当前会话中，并让贝宝自动将用户重定向回您的页面。

第二个是设置支付数据传输选项。我还没有完全实现这一点，但在 paypal 的开发者网站上有文档。当用户付款时，它基本上会向您的站点发送一个令牌，并且您必须执行另一个 HTTP 发布来检索用户数据。

# java - 如果在其上拖放文件，Launch4J exe 不会运行

> ID：16093299
> 
> 赞同：1
> 
> 时间：2013-04-18T21:20:04.340
> 
> 标签：java, file, exe, shortcut, launch4j

**我使用Launch4J**为我的 Java 程序创建了一个 EXE 。

该程序需要将文件/文件夹**拖放到 EXE**上才能开始处理它。

如果我从命令行启动 EXE，将文件的路径作为参数传递，或者如果我在 Windows 中创建 EXE 的快捷方式并将文件拖放到快捷方式上，这一切都有效。

否则，**如果我将文件直接放在 EXE 上**，程序似乎甚至无法打开。

我怎样才能解决这个问题？

谢谢

# javascript - 简单的自动图像更换器故障

> ID：16093302
> 
> 赞同：0
> 
> 时间：2013-04-18T21:20:22.420
> 
> 标签：javascript, jquery

我有一个简单的图像转换器，可以通过一个非常简单的 jQuery 在 2 个图像之间交换，但由于未知的原因，可能是睡眠不足，我无法让它按需要工作。

看看这个[jsfiddle](http://jsfiddle.net/Rws8c/)看看发生了什么。

这是js；$(文档).ready(函数 () {

```
function swap() {
    $('#display').attr('id', 'hidden').hide();
    $('#hidden').attr('id', 'display').fadeIn(500);

}

setInterval(swap, 2000);

}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:24:42.747

fadeToggle 确实是最好的解决方案，但另一个解决方案可能是这样的。如果您想在隐藏和淡入旁边的切换中添加一些额外的逻辑。

```
 function swap() {
    if($("#display").is(":visible"))
    {
         $('#display').hide();
         $('#hidden').fadeIn(500);
    }
    else
    {
         $('#display').fadeIn(500);
         $('#hidden').hide();
    }
 } 
```

[http://jsfiddle.net/Rws8c/2/](http://jsfiddle.net/Rws8c/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:23:44.497

这是关于你想要做的事情：

```
$(document).ready(function () {

    function swap() {
        $('#display').fadeToggle(500);
        $('#hidden').fadeToggle(500);

    }

    setInterval(swap, 2000);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T22:13:52.880

以下使用稍微不同的方法，使您可以轻松添加 2 个以上的图像：

**HTML**

```
<!-- Define a single img element -->
<img src="http://musicglue-profile-pages.s3.amazonaws.com/wp-content/uploads/2013/03/NiceandSlezzy.png" alt="The Tin Pigeons" title="The Tin Pigeons" id="display"> 
```

**JavaScript / jQuery**

```
$(document).ready(function () {
// create an array that contains a entry for each img src. For more images, just add additional array entries. 
var images = ['http://musicglue-profile-pages.s3.amazonaws.com/wp-content/uploads/2013/03/NiceandSlezzy.png',
              'http://musicglue-profile-pages.s3.amazonaws.com/wp-content/uploads/2013/03/La-Route-Du-Rock1.jpg'];
    var curImage=images.length-1;
    var $image = $('#display');

    function swap() {
        $image.hide().attr('src', images[curImage]);
        if (curImage==images.length-1) {
            curImage=-1
        }
        curImage++;
        $image.fadeIn(500)
    }

    setInterval(swap, 2000);

}); 
```

# django - Django Social Auth (Google OAuth 2) - 即使单击“允许访问”也取消了身份验证

> ID：16093305
> 
> 赞同：1
> 
> 时间：2013-04-18T21:20:39.867
> 
> 标签：django, authentication, django-socialauth

我成功地使用 Django Social Auth 通过 Facebook 登录用户。我正在尝试实现 Google OAuth2。我已经采取了我所知道的所有步骤来集成它，但`AuthCanceled at /complete/google-oauth2/`即使我单击 ，我也会遇到异常`Allow access`。这是我为集成它所做的：

*   前往 Google API 控制台，注册我的应用程序并获得我的客户端 ID 和客户端密码。
*   我添加了正确的返回 url `http://mysite/complete/google-oauth2`，在我这样做之前，我从 Google 获得了“未经授权的重定向 url”。
*   在我的 settings.py 我有

    ```
    GOOGLE_OAUTH2_CLIENT_ID = '*****'
    GOOGLE_OAUTH2_CLIENT_SECRET = '*****'

    AUTHENTICATION_BACKENDS = (
        'social_auth.backends.google.GoogleOAuth2Backend',
        'social_auth.backends.facebook.FacebookBackend',
        'django.contrib.auth.backends.ModelBackend',
    ) 
    ```

*   我想我有其他相关设置正确，因为 Facebook 登录有效，我可以显示窗口，在 Google 授权窗口中查看我的应用程序名称等。

我做错了什么？如何修复/调试 AuthCancelled 异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:26:08.407

这个问题似乎是由一个奇怪的谷歌行为引起的：当我最初创建我的客户端 ID 时，谷歌给了我这个客户端 ID `193271111225.apps.googleusercontent.com`：. 在与图书馆作者交谈后，他告诉我他的 ID 更长，所以我创建了一个具有完全相同设置的新客户端 ID。生成的新 ID 可以`193271111225-cvltnldi4hh5lmo784v2ir451b3rij7e.apps.googleusercontent.com`正常工作。两个 ID 在控制台中看起来相同，但只有后者有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T14:28:42.750

使用[SocialAuthExceptionMiddleware](http://django-social-auth.readthedocs.org/en/latest/configuration.html#exceptions-middleware)中间件正确处理 social_auth 异常

```
MIDDLEWARE_CLASSES = (
    ...,
    'social_auth.middleware.SocialAuthExceptionMiddleware'
) 
```

# jquery - 请帮助我使我的画廊工作（jQuery；硬币滑块；Fancybox）

> ID：16093313
> 
> 赞同：1
> 
> 时间：2013-04-18T21:21:17.190
> 
> 标签：jquery, slider, fancybox

我是这里的新手，也是 JQuery/Javascript 的新手——我有 2 个问题。

[如果您在此处](http://www.r-disain.planet.ee/my_2_problems.zip)下载文件，我将不胜感激！- 因为这是让自己清楚的更简单的方法 - 我希望。

我将**Coin Slider**用于主画廊，我需要在幻灯片下查看所有画廊图片（使用小图片）和幻灯片，当点击图片时，它应该以全屏视图打开（使用大图片）**Fancybox**灯箱库的帮助。

所以...

**问题1**：在幻灯片下，以拇指显示画廊中的所有图片。当前未显示 - 设法显示某张图片，但与所有画廊无关。

**问题 2**：当点击图片时，当前在幻灯片中 - 应该在全屏视图中打开。目前似乎与**Coin Slider**冲突，因为文件中未链接**Coin Slider**`index.html`时，全屏视图有效，但图片以列表模式显示。

我相信并希望在**Coin Slider**文件中需要对拇指（问题 1）进行小的更正，`index.html`并在全屏视图中进行一些代码更正（问题 2）。

这是一篇很长的文章——感谢您阅读到最后，并对可能出现的语法错误表示歉意（我不会说英语）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-07T23:43:33.770

我有同样的问题。我发现可以执行`href`与 Coin Slider 一起使用的 javascript 调用。例子：

```
href="javascript:alert('hello');" 
```

从理论上讲，可以使用它来打开 Fancybox 画廊的特定元素。

我现在正在研究一个例子。

编辑：

这里是。假设我们有一个硬币滑块，如下所示：

```
<div id="coin-slider">
    <a href="javascript:box(0);"><img src="img/small/1.jpg"></a>
    <a href="javascript:box(1);"><img src="img/small/2.jpg"></a>
    <a href="javascript:box(2);"><img src="img/small/3.jpg"></a>
</div> 
```

然后我们可以使用参数“i”创建一个名为“box”的函数，它将在位置“i”打开一个 Fancybox 画廊。

```
<script type="text/javascript">
    function box(i) {
        $.fancybox.open([
            {
                src  : 'img/big/1.jpg',
                opts : {
                    caption : 'Optional description 1'
                }
            },
            {
                src  : 'img/big/2.jpg',
                opts : {
                    caption : 'Optional description 2'
                }
            },
            {
                src  : 'img/big/3.jpg',
                opts : {
                    caption : 'Optional description 3'
                }
            }
        ], {
            loop : false, index : i
        });
    };
</script> 
```

我正在使用 Fancybox 3，但我确信它可以被编辑以与其他版本一起使用。希望这可以帮助那里的人。

# jquery - 防止 jQuery 文件版本相互冲突

> ID：16093319
> 
> 赞同：0
> 
> 时间：2013-04-18T21:21:41.920
> 
> 标签：jquery

在我的 sharepoint 网站上的所有页面中，我有**1 个**页面需要使用...

jQuery 工具和 videolightbox 和 jQuery 1.3.2（一个包！）。

该网站的其余部分使用 jQuery 1.8.3

但是在同一页面上，页眉、菜单和页脚需要使用 jQuery 1.8.3 才能正常运行。这是我的冲突发生的地方，也是我头疼的地方。

**在这个单一/冲突页面上，如何防止 jQuery 1.3.2 与我在 custom-scripts-for-the-whole-site.js 文件中加载的任何其他 jQuery 1.8.3 方法和函数发生冲突？**

下面是如何在我的主模板底部设置我的代码的演示......

```
 <!--THESE 2 FILES WORK GREAT FOR THE ENTIRE SITE-->
   <script src=".../jquery-1.8.3.min.js" type="text/javascript"></script>
   <script type="text/javascript" src=".../custom-scripts-for-the-whole-site.js"></script>

    <script type="text/javascript">
    /*THIS SECTION LOADS JQUERY 1.3.2 IN ORDER FOR JQUERY TOOLS AND VIDEOLIGHTBOX TO WORK
     JQUERY TOOLS BUNDLES 1.3.2 WITHIN IT'S OWN FILE! - FYI
     I SET UP A CONDITIONAL STATEMENT TO LOAD THIS CODE ONLY ON THIS SPECIFIC PAGE.
     */
    var mLof = document.getElementById("donate-landing-page");
    if(mLof !=null) {
    document.write(unescape("%3Cscript src='/jquery.tools.min.live.js' type='text/javascript'%3E%3C/script%3E"));
    document.write(unescape("%3Cscript src='/swfobject.js' type='text/javascript'%3E%3C/script%3E"));
    document.write(unescape("%3Cscript src='/videolightbox.js' type='text/javascript'%3E%3C/script%3E"));
    document.write(unescape("%3Cscript src='/jquery.easing.1.3.js' type='text/javascript'%3E%3C/script%3E"));
    }
    //*/
    </script> 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:24:00.453

你需要`$.noConflict` `[API](http://api.jquery.com/jQuery.noConflict/)`

```
<script type="text/javascript">
/*THIS SECTION LOADS JQUERY 1.3.2 IN ORDER FOR JQUERY TOOLS AND VIDEOLIGHTBOX TO WORK
 JQUERY TOOLS BUNDLES 1.3.2 WITHIN IT'S OWN FILE! - FYI
 */
var mLof = document.getElementById("donate-landing-page");
if(mLof !=null) {
document.write(unescape("%3Cscript src='/jquery.tools.min.live.js' type='text/javascript'%3E%3C/script%3E"));
document.write(unescape("%3Cscript src='/swfobject.js' type='text/javascript'%3E%3C/script%3E"));
document.write(unescape("%3Cscript src='/videolightbox.js' type='text/javascript'%3E%3C/script%3E"));
document.write(unescape("%3Cscript src='/jquery.easing.1.3.js' type='text/javascript'%3E%3C/script%3E"));
jq132 = $.noConflict(true);
}
//*/
</script> 
```

# python - 从 0 开始计算列表

> ID：16093320
> 
> 赞同：2
> 
> 时间：2013-04-18T21:21:45.627
> 
> 标签：python, python-2.7

到目前为止，这是我的代码，它是一个基于文本的文件浏览器。用户通过选择分配的编号来选择要浏览的驱动器或目录。当您运行脚本时，它会显示从 0 到任何数量的项目的输出。但是当显示文件夹的内容时，它会从 1 开始列出，这会导致您的选择失效。

```
from os import listdir
import win32api 
```

* * *

```
#need help with this block
def glist(path):
    global nlist
    nlist = []
    for i in listdir(path):
        nlist.append(i)
        countf=len(nlist)
        print str(countf) + " " + str(i) 
```

* * *

```
def getfiles(dir, filename):
    for i in listdir(dir):
        newtext=open(filename,'a')
        newtext.write("\n"+ "\n" + i)
        newtext.close()

def getdrives():
    global drives
    drives = win32api.GetLogicalDriveStrings()
    drives = drives.split('\000')[:-1]
    for index, item in enumerate(drives):

      print index, item

print "Select which drive to work with: "
getdrives()

x = raw_input("Which Drive:")
glist(drives[int(x)])

y = raw_input("Select Folder: ")
glist(drives[int(x)] + nlist[int(y)]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:26:03.843

最好写成：

```
def glist(path):
    global nlist
    for idx, name in enumerate(listdir(path)):
        print '{} {}'.format(idx, name) 
    nlist.append(name) 
```

但是会重新考虑使用 a`global`并从中返回一个列表......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:25:44.000

列表的*长度*比该列表中最大的索引大一。

```
def glist(path):
    global nlist
    nlist = []
    for i in listdir(path):
        nlist.append(i)
        # Just subtract 1
        countf=len(nlist) - 1
        print str(countf) + " " + str(i) 
```

也就是说，在每次迭代时重新计算列表的长度可能会很昂贵，尤其是当您*知道*它在每一步都增长 1 时。您可以免费获得 countf [`enumerate`](http://docs.python.org/2/library/functions.html#enumerate)（当然，它是零索引的）。

```
def glist(path):
    global nlist
    nlist = []
    for countf, i in enumerate(listdir(path)):
        nlist.append(i)
        print str(countf) + " " + str(i) 
```

# javascript - JavaScript 中的全局变量是什么？

> ID：16093322
> 
> 赞同：2
> 
> 时间：2013-04-18T21:21:49.453
> 
> 标签：javascript, global-variables

我来自 C# Class()、字段、属性、命名空间...世界。我刚刚开始使用javascript。到目前为止，我一直做得很好。然而，我的一位朋友正在查看我的代码并问我为什么这样做。

```
function Position (x, y) {
    this.X = x;
    this.Y = y; 
} 
```

朋友：“你刚刚超越了位置……” 我：“什么位置？” 朋友：“可能是浏览器正在使用的任何东西。” 我：“我只运行这个脚本——它运行良好”朋友：“直到它不起作用。”

好吧……什么？原来位置是**全球**性的..但在哪里以及在什么程度上？我的朋友让它听起来像是整个浏览器的全局。所以我的问题是；

javascript 是全局的，对整个浏览器来说是全局的吗？> 只有窗户？> 只有标签？？> 能走多远？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T21:27:37.613

它对当前窗口是全局的。不要担心其他选项卡、窗口或 iframe。话虽这么说，我认为他试图说明的是 JavaScript 中的一个很好的原则，即

> 不要弄乱全局命名空间

这意味着无论你做什么全球都不应该太多，它应该是非常有意的。

JavaScript 具有函数作用域（不是块作用域），因此解决此问题的一种简单方法是将所有内容包装在立即调用的函数表达式中。

```
;(function () {

     function Position (x, y){
          this.X = x;
          this.Y = y;
     }

     // use Position here

}()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T21:24:53.990

当 JavaScript 在浏览器中运行时，全局变量是`window`对象的属性。因此，它仅对当前窗口是全局的，而不是对其他浏览器窗口、选项卡、框架或 iframe 而言。每一个都有自己的`window`对象。

JavaScript中没有`Position`内置全局变量。您朋友的担心可能是您在页面中包含的其他一些代码也可能定义相同的全局代码。因此，其中一个定义（以稍后定义的为准）将覆盖另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:25:32.683

可以从浏览器窗口中的任何位置访问位置。在网络方面，我相信浏览器窗口是你可以去的最高范围。

您的朋友可能会说，如果有人已经定义了一个存在于全局范围内的名为 Position 的对象，那么您的代码只是更改了该行为。通常，您会希望通过命名空间来保护全局范围免受任何自定义方法的影响。

# php - 显示图像 blob，可能的编码错误

> ID：16093330
> 
> 赞同：1
> 
> 时间：2013-04-18T21:22:18.803
> 
> 标签：php, mysql, blob

我有一个表单，用户可以将图像上传到我的 MySQL 数据库。该表包含三列`id`：`name`和`image`。`Image`是具有默认设置的 blob 列。我能够存储图像数据，但是当我获取数据并尝试在网页上显示它时，我只是得到一个损坏的图像（在这种情况下它是一个 jpeg 文件）。

我怀疑某处的编码出了问题。我的 upload.php 文件以 UTF-8 编码，没有 BOM。这是我的上传代码：

```
$image = addslashes(file_get_contents($_FILES['image']['tmp_name']));
$image_name = addslashes($_FILES['image']['name']);

$insert = $conn->prepare('INSERT INTO images VALUES(:id,:name,:image)');
$insert->bindValue(':id', '');
$insert->bindParam(':name', $image_name);
$insert->bindParam(':image', $image);
$insert->execute(); 
```

这就是我尝试显示图像的地方。

```
$select = $conn->prepare('SELECT image FROM images WHERE id = 2');
$select->execute();

$display = $select->fetch();

echo '<img src="data:image/jpg;base64,' . base64_encode( $display['image'] ) . '" />'; 
```

我观看了有关 MySQL 中 blob 的视频教程，其中 blob 列具有`binary`属性。但是，当我尝试创建这样的列时，我收到错误 1064。我什至不知道它与此有什么关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:58:42.233

首先，您不应该使用`addslashes()`准备好的语句（这不是您的问题）。

默认情况下，`->bindParam()`默认为 type `PDO::PARAM_STR`，因此您需要指定您传递的数据不是字符串。

尝试：

```
$insert->bindParam(':image', $image, PDO::PARAM_LOB); 
```

在数据库中存储二进制数据也会导致各种问题。我建议将文件存储到磁盘并将其路径存储在数据库中 - 它具有各种优势。

# r - 如何安装 R 版本 3

> ID：16093331
> 
> 赞同：15
> 
> 时间：2013-04-18T21:22:20.840
> 
> 标签：r, version

在 Ubuntu 上从命令行安装新版本 R 遇到一些问题后（直接将其更新到版本**2.15.x**）

我想分享这样做的方法。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-18T21:24:54.507

这是一篇旧文章，我在无法简单安装 R 时写了它（它正在安装旧`2.15`版本）：

```
sudo apt-get install r-base-core 
```

现在您不需要执行下面的所有操作，只需使用上述命令即可。在更新时它会给你`3.1`版本。

**这是以前的帖子**

卸载旧 R

```
sudo apt-get remove r-base-core 
```

开源.list

```
sudo nano /etc/apt/sources.list 
```

并添加 deb 到它

```
deb http://cran.rstudio.com/bin/linux/ubuntu precise/ 
```

精确是您的 ubuntu 名称（可能不同）

添加密钥以签署 CRAN 包

```
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9 
```

将特定的 PPA 添加到系统

```
sudo add-apt-repository ppa:marutter/rdev
sudo apt-get update
sudo apt-get upgrade 
```

安装

```
sudo apt-get install r-base 
```

从 R 到检查版本

```
version 
```

应该给你

```
version.string R version 3.0.0 (2013-04-03) 
```

希望人们会觉得这很有帮助

# ajax - WordPress 移除手动 Ajax 触发器并使用无限滚动

> ID：16093332
> 
> 赞同：0
> 
> 时间：2013-04-18T21:22:38.563
> 
> 标签：ajax, wordpress, jquery-isotope, infinite-scroll

我的脚本有问题。我想删除`load more`按钮，而是在我到达页面底部时进行无限滚动。

我正在使用 WordPress 模板，没有支持，我就陷入了这种无稽之谈。

我应该对这个脚本做些什么改变？

```
jQuery(document).ready(function($){

    var $container = $('#hentry-wrapper');

    // Isotope

    // modified Isotope methods for gutters in masonry

    $.Isotope.prototype._getMasonryGutterColumns = function() {

        var gutter = this.options.masonry && this.options.masonry.gutterWidth || 0;

            containerWidth = this.element.width();

    this.masonry.columnWidth = this.options.masonry && this.options.masonry.columnWidth ||

              // or use the size of the first item

              this.$filteredAtoms.outerWidth(true) ||

              // if there's no items, use size of container

              containerWidth;

    this.masonry.columnWidth += gutter;

    this.masonry.cols = Math.floor( ( containerWidth + gutter ) / this.masonry.columnWidth );

    this.masonry.cols = Math.max( this.masonry.cols, 1 );

    };

    $.Isotope.prototype._masonryReset = function() {

        // layout-specific props

        this.masonry = {};

        // FIXME shouldn't have to call this again

        this._getMasonryGutterColumns();

        var i = this.masonry.cols;

        this.masonry.colYs = [];

        while (i--) {

            this.masonry.colYs.push( 0 );

        }

    };

    $.Isotope.prototype._masonryResizeChanged = function() {

        var prevSegments = this.masonry.cols;

        // update cols/rows

        this._getMasonryGutterColumns();

        // return if updated cols/rows is not equal to previous

        return ( this.masonry.cols !== prevSegments );

    };

    var loadMore = $('#load-more');

    var posts_per_page = parseInt(loadMore.attr('data-perpage'));

    var offset = posts_per_page;

    var totalPosts = parseInt(loadMore.attr('data-total-posts'));

    var author = parseInt(loadMore.attr('data-author'));

    var category = parseInt(loadMore.attr('data-category'));

    var tag = loadMore.attr('data-tag');

    var datemonth = loadMore.attr('data-month');

    var dateyear = loadMore.attr('data-year');

    var search = loadMore.attr('data-search');

    var loader = $('#posts-count').attr('data-loader');

    if (!author) author = 0;

    if (!category) category = 0;

    if (!tag) tag = '';

    if (!datemonth) datemonth = 0;

    if (!dateyear) dateyear = 0;

    if (!search) search = '';

    // cache jQuery window

    var $window = $(window);

    // start up isotope with default settings

    $(window).load(function(){

        reLayout();

        $window.smartresize( reLayout );

        if (offset < totalPosts) {

            $('#nav-pagination-load-more').fadeIn(200);

            mega_initLoadMore();

        }

    });

    function reLayout() {

        var mediaQueryId = getComputedStyle( document.body, ':after' ).getPropertyValue('content');

        // fix for firefox, remove double quotes "

        //mediaQueryId = mediaQueryId.replace( /"/g, '' );

        //console.log( mediaQueryId );

        var windowSize = $window.width();

        var masonryOpts;

        // update sizing options 

        switch ( mediaQueryId ) {

            case 'large' :

                masonryOpts = {

                  gutterWidth: 0

                };

            break;

            case 'big' :

                masonryOpts = {

                  //columnWidth: 297,

                  gutterWidth: 0

                };

            break;

            case 'medium' :

                masonryOpts = {

                  //columnWidth: 269,

                  gutterWidth: 0

                };

            break;

            case 'small' :

            masonryOpts = {

              //columnWidth: $container.width() / 4,

              gutterWidth: 0

            };

            break;

            case 'tiny' :

            masonryOpts = {

              //columnWidth: $container.width() / 1,

              gutterWidth: 0

            };

            break;

        }

        $container.isotope({

          resizable: false, // disable resizing by default, we'll trigger it manually

          itemSelector : '.type-post',

          transformsEnabled: false, // Firefox Vimeo issue

          masonry: masonryOpts

        }).isotope( 'reLayout' );

    }

    function mega_initLoadMore(){

        loadMore.click(function(e) {

            $(this).unbind("click").addClass('active'); 

            $('#posts-count').html('<img src="'+ loader +'"/>');    

            e.preventDefault();

            mega_loadMorePosts();

        });

    }

    function mega_reLayout(){

        $container.isotope( 'reLayout' );   

    }

    function mega_loadMorePosts(){

            jQuery.ajax({

                url: megaAjax.ajaxurl,

                type: 'POST',

                data: {

                    action : 'mega_ajax_blog',

                    nonce : megaAjax.nonce,

                    category: category,

                    author: author,

                    tag: tag,

                    datemonth: datemonth,

                    dateyear: dateyear,

                    search: search,

                    offset: offset

                },

                success: function( data ) {

                    var $newElems = $(data);

                    // ensure that images load before adding to masonry layout

                    $newElems.imagesLoaded( function(){

                        // FitVids

                        $('.fluid-video, .entry-content', $newElems).fitVids();

                        $container.append($newElems).isotope( 'appended', $newElems );

                        // Flex Slider

                        $('.flexslider', $newElems).flexslider({

                            animation: "fade",

                            slideshow: false,

                            keyboard: false,

                            directionNav: true,

                            touch: true,

                            prevText: "",

                            nextText: ""

                        });

                        setTimeout(function(){

                            mega_reLayout();

                        }, 1000);

                        offset = offset + posts_per_page;

                        loadMore.removeClass('active');

                        if (offset < totalPosts){

                            $('#posts-count').text('');

                            loadMore.bind("click", mega_initLoadMore());

                        }

                        else {

                            setTimeout(function(){

                                loadMore.parent().remove();

                            }, 1000 );  

                        }                           

                    });

                }

            });

        return false;

    } 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T15:25:04.380

我认为这个脚本直接取自“HEAT WORDPRESS THEME”，它位于主题的 js 文件夹中。修改简单，只需要去掉Ajax后加载功能，只保留Isotop初始化功能即可。如需帮助，请参阅此链接 [http://www.shambix.com/en/isotope-twitter-bootstrap-infinite-scroll-fluid-responsive-layout/](http://www.shambix.com/en/isotope-twitter-bootstrap-infinite-scroll-fluid-responsive-layout/)

# javascript - 向显示 iframe 的外部 URL 提交表单值

> ID：16093337
> 
> 赞同：0
> 
> 时间：2013-04-18T19:29:44.657
> 
> 标签：javascript, url, forms

我正在尝试制作一个在提交时将值传递给外部 URL 并将结果显示为 iframe 的表单。表格是主页，结果也必须显示在第一页。

每次我提交它都会返回一个 404 错误。

这是代码：

```
<form id="buscaAereo" method="POST" name="formularioAereo" action="<?php echo home_url('/' ); ?>">
    <fieldset>
        <div class="half">
            <label class="radio">
                <input type="radio" name="idaevolta" id="idaevolta" value="1" checked>
                Ida e Volta
            </label>
        </div>

        <div class="half">
            <label class="radio">
                <input type="radio" name="idaevolta" id="idaevolta" value="2" checked>
                So ida
            </label>
        </div>

        <div class="half">
            <label for="name">Origem:</label>
            <input type="text" class="cidade" name="origem" data-provide="typeahead">
        </div>
        <div class="half">
            <label for="name">Destino:</label>
            <input type="text" id="cidade" name="destino" data-provide="typeahead">
        </div>

        <div class="half">
            <label for="name">Data de ida:</label>
            <div class="input-prepend">
                <span class="add-on"><i class="icon-calendar"></i></span>
                <input class="sapn1" id="date" name="ida" type="text">
            </div>
        </div>

        <div class="half">
            <label for="name">Data de volta:</label>
            <div class="input-prepend">
                <span class="add-on"><i class="icon-calendar"></i></span>
                <input class="" id="date" name="volta" type="text">
            </div>
        </div>

        <div class="quarter">
            <label for="country">Adultos:</label>
            <select id="country" name="adultos">
                <option value="0">00</option>
                <option value="1" selected="selected">01</option>
                <option value="2">02</option>
                <option value="3">03</option>
                <option value="4">04</option>
                <option value="5">05</option>
                <option value="6">06</option>
                <option value="7">07</option>
                <option value="8">08</option>
                <option value="9">09</option>
            </select>
        </div>
        <div class="quarter">
            <label for="country">Criancas:</label>
            <select id="country" name="criancas">
                <option value="1" selected="selected">00</option>
                <option value="1">01</option>
                <option value="2">02</option>
                <option value="3">03</option>
                <option value="4">04</option>
                <option value="5">05</option>
                <option value="6">06</option>
                <option value="7">07</option>
                <option value="8">08</option>
                <option value="9">09</option>
            </select>
        </div>

        <div class="quarter">
            <label for="country">Bebes:</label>
            <select id="country" name="bebes">
                <option value="1" selected="selected">00</option>
                <option value="1">01</option>
                <option value="2">02</option>
                <option value="3">03</option>
                <option value="4">04</option>
                <option value="5">05</option>
                <option value="6">06</option>
                <option value="7">07</option>
                <option value="8">08</option>
                <option value="9">09</option>
            </select>
        </div>

        <div class="quarter">
            <input type="submit" id="busca" name="submit" class="btn btn-primary botao" value="Pesquizar">
        </div>
    </fieldset>
</form> 
```

和 PHP 代码：

```
function buscaPassagem() {
    if(isset($_POST['submit'])) {
        $idaevolta = $_POST["idaevolta"];
        $origem = $_POST["origem"];
        $destino = $_POST["destino"];
        $ida = $_POST["ida"];
        $volta = $_POST["volta"];
        $adultos = $_POST["adultos"];
        $criancas = $_POST["criancas"];
        $bebes = $_POST["bebes"];

        $link = "http://www.portaldoagente.com.br/OTAFrame/SuiteAerea/guiAereoAeroportos.aspx?PesquisaAutomatica=S&Tipo="; 

        $UrlFinal = $link
            .$idaevolta
            ."&Origem=".$origem
            ."&Destino=".$destino
            ."&Adultos=".$adultos
            ."&Criancas=".$criancas
            ."&Bebes=".$bebes
            ."&DataIda=".$ida
            ."&DataVolta=".$bebes
            ."&LojaChave=bG9qYXRlbXBvc3Jpbw==";

        echo "<script>window.open('$UrlFinal', 'meu_frame');</script>";
    }
} 
```

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:37:55.840

您必须将表单操作定位到您的 iframe。此外，该操作必须指向您的 php 代码。（您问题的第二段代码）

```
 <form target='iFrame' id="buscaAereo" method="POST" name="formularioAereo" action="your_php_code">
   ....
 </form>

 <iframe id="iFrameID" name="iFrame"></iframe> 
```

**编辑：**试试这个代码

**查询：**

```
function enviar()
{
   var link = "http://www.portaldoagente.com.br/OTAFrame/SuiteAerea/guiAereoAeroportos.aspx?PesquisaAutomatica=S&Tipo="; 

   var UrlFinal = link + $('input[name=idaevolta]:checked').val()
        +"&Origem="+$("#origem").val()
        +"&Destino="+$("#destino").val()
        +"&Criancas="+$('#criancas :selected').val()
        +"&DataIda="+$("#ida").val()
        +"&DataVolta="+$("#volta").val()
        +"&Bebes="+$('#bebes :selected').val()
        +"&Adultos="+$('#adultos :selected').val()
        +"&LojaChave=bG9qYXRlbXBvc3Jpbw==";
    $("#iFrameID").attr("src", UrlFinal);
} 
```

**HTML：**

艾达和伏打

```
 <div class="half">
        <label class="radio">
            <input type="radio" name="idaevolta" value="2" checked>
            So ida
        </label>
    </div>

    <div class="half">
        <label for="name">Origem:</label>
        <input id="origem" type="text" class="cidade" name="origem" data-provide="typeahead">
    </div>
    <div class="half">
        <label for="name">Destino:</label>
        <input type="text" id="destino" name="destino" data-provide="typeahead">
    </div>

    <div class="half">
        <label for="name">Data de ida:</label>
        <div class="input-prepend">
            <span class="add-on"><i class="icon-calendar"></i></span>
            <input class="sapn1" id="ida" name="ida" type="text">
        </div>
    </div>

    <div class="half">
        <label for="name">Data de volta:</label>
        <div class="input-prepend">
            <span class="add-on"><i class="icon-calendar"></i></span>
            <input class="" id="volta" name="volta" type="text">
        </div>
    </div>

    <div class="quarter">
        <label for="adultos">Adultos:</label>
        <select id="adultos" name="adultos">
            <option value="0">00</option>
            <option value="1" selected="selected">01</option>
            <option value="2">02</option>
            <option value="3">03</option>
            <option value="4">04</option>
            <option value="5">05</option>
            <option value="6">06</option>
            <option value="7">07</option>
            <option value="8">08</option>
            <option value="9">09</option>
        </select>
    </div>
    <div class="quarter">
        <label for="criancas">Criancas:</label>
        <select id="criancas" name="criancas">
            <option value="1" selected="selected">00</option>
            <option value="1">01</option>
            <option value="2">02</option>
            <option value="3">03</option>
            <option value="4">04</option>
            <option value="5">05</option>
            <option value="6">06</option>
            <option value="7">07</option>
            <option value="8">08</option>
            <option value="9">09</option>
        </select>
    </div>

    <div class="quarter">
        <label for="bebes">Bebes:</label>
        <select id="bebes" name="bebes">
            <option value="1" selected="selected">00</option>
            <option value="1">01</option>
            <option value="2">02</option>
            <option value="3">03</option>
            <option value="4">04</option>
            <option value="5">05</option>
            <option value="6">06</option>
            <option value="7">07</option>
            <option value="8">08</option>
            <option value="9">09</option>
        </select>
    </div>

    <div class="quarter">
        <button onClick="javascript:enviar();">Pesquizar</button>
    </div>
</fieldset>
<iframe id="iFrameID" name="iFrame"></iframe> 
```

希望这可以帮助。

# php - 用 php 的 crypt 创建随机盐

> ID：16093340
> 
> 赞同：0
> 
> 时间：2013-04-18T21:23:22.753
> 
> 标签：php, crypt

通常我们`mt_rand`用来创建一个随机盐来使用它`crypt()`。但根据`mt_rand`php 网站上的手册页“不能用于加密目的 [...] 考虑使用 openssl_random_pseudo_bytes() 代替。” 此外，在`crypt`php 网站的手册页上，有人建议使用

```
mcrypt_create_iv 
```

因此，为了测试它们，我使用了[这个](http://www.php.net/manual/en/function.crypt.php#105949)crypt 的包装器并更改了以下行

```
$salt .= substr("./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", mt_rand(0, 63), 1);

//change it to
$salt .= substr("./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", openssl_random_pseudo_bytes(63, $cstrong), 50); 

$salt .= substr("./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", mcrypt_create_iv(63, MCRYPT_RAND), 50); 

$salt .= substr("./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", mt_srand(), 1); 
```

然后我注释了除一行之外的所有行并开始运行代码，以检查每个函数。我刷新了我的页面，验证工作正常。但是当我跑步`openssl_random_pseudo_bytes`或`mcrypt_create_iv`经常看到相同的哈希时。

```
$2y$08$$$$$$$$$$$$$$$$$$$$$$.UrC6Lo4LNk8iLmoi25KEoVzHHTK7tNC 
```

我看了上面的哈希值 10 次。

当我使用 `mt_srand`哈希时，它根本不会改变。

我在另一个更简单的包装器中测试相同的函数，在[这里](http://www.the-art-of-web.com/php/blowfish-crypt/#section_2)找到它们，它们的行为与我上面描述的相同。

我是散列和`crypt`. 我很困惑，我应该实际使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:31:45.973

使用`openssl_random_pseudo_bytes()`是你可以在 php 中做的最好的事情来获取随机字节。我不确定您要对 , 执行什么操作`substr()`，因为`openssl_random_pseudo_bytes()`返回字节，而不是偏移量。

澄清一下，您可以单独使用`openssl_random_pseudo_bytes(64)`它来生成 64 字节的盐。

# java - Amazon EC2 数据包丢失导致连接超时。如何在不更改所有查询代码的情况下重试？

> ID：16093353
> 
> 赞同：0
> 
> 时间：2013-04-18T21:24:13.587
> 
> 标签：java, mysql, jdbc, amazon-ec2, c3p0

有没有办法让 C3P0（或 DBCP）自动重试由于网络问题而失败的查询。该代码工作正常，但偶尔会发生以下异常（没有特定查询，发生在各种查询中，甚至是每隔几秒发生一次的简单行计数，因此它确实可以工作，但随后突然失败：

```
com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
at sun.reflect.GeneratedConstructorAccessor89.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3567)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3456)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3997)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2468)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2629)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2719)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
at com.mysql.jdbc.PreparedStatement.execute(PreparedStatement.java:1379)
at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.execute(NewProxyPreparedStatement.java:989)
at com.outboundengine.database.ClickstreamIdentityDbo.insertIgnore(ClickstreamIdentityDbo.java:65)
... 22 more
Caused by: java.net.SocketException: Connection timed out

at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:150)
at java.net.SocketInputStream.read(SocketInputStream.java:121)
at com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:114)
at com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:161)
at com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:189)
at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:3014)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3467)
... 31 more 
```

我开始每秒在应用服务器和数据库服务器之间运行 traceroute，并得到一堆如下所示的跟踪：

```
Wed Apr 17 15:52:41 UTC 2013
traceroute to XXX.XXXXXXXXXX.com (XXX.XXX.XXX.XXX), 30 hops max, 60 byte packets
 1  ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  0.352 ms  0.443 ms  0.418 ms
 2  ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  0.588 ms ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  0.625 ms ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  0.543 ms
 3  ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  0.867 ms ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  33.166 ms  33.505 ms
 4  ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  1.554 ms ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  0.435 ms ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  0.756 ms
 5  ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  0.830 ms ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  0.803 ms ip-XXX-XXX-XXX-202.ec2.internal (XXX.XXX.XXX.XXX)  1.107 ms
 6  * ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  1.449 ms *
 7  ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  0.715 ms ip-XXX-XXX-XXX-202.ec2.internal (XXX.XXX.XXX.XXX)  0.973 ms  1.240 ms
 8  * * *
 9  * * *
10  * * *
11  * * *
12  * * ip-XXX-XXX-XXX-XXX.ec2.internal (XXX.XXX.XXX.XXX)  0.445 ms 
```

...（在持续 10-60 秒的“中断”间隔期间还有更多这些，但连接需要 10 分钟才能超时）。

C3P0 配置如下：

```
<Resource name="jdbc/somename"
    auth="Container"
    factory="org.apache.naming.factory.BeanFactory"
    type="com.mchange.v2.c3p0.ComboPooledDataSource"
    driverClass="com.mysql.jdbc.Driver"
    maxPoolSize="100"
    minPoolSize="10"
    acquireIncrement="10"

    automaticTestTable="testtable"
    testConnectionOnCheckin="true"
    idleConnectionTestPeriod="600"

    user="XXX"
    password="XXX"
    jdbcUrl="jdbc:mysql://XXXXXXXXXX:3306/dbname?autoReconnect=true"
  /> 
```

在异常发生期间，每个跟踪路由都在不同的地方设置了 *。
这是在 Amazon EC2 上运行的（位于弗吉尼亚州的位置，该位置因丢包率高而臭名昭著，导致这些超时）。该代码是由 C3P0 db 连接池支持的简单 JDBC 查询（并且在没有网络问题的情况下完美运行）。C3P0 重新连接并在超时后所有连接，但超时大约需要 10 分钟，当网络稳定时一切恢复正常，但我们每天至少会遇到一次这些中断，并且查询会丢失，需要重试。

数据库连接池中是否有一个设置可以让我免于更改代码中的所有查询，还是我必须编写一个简单的循环，在放弃之前重试失败几次？有没有其他人在 EC2 上遇到过这些问题并找到了解决方案？

# automation - Sahi 是否处理嵌套的 else-if 语句？

> ID：16093355
> 
> 赞同：0
> 
> 时间：2013-04-18T21:24:17.990
> 
> 标签：automation, automated-tests, sahi

Sahi 脚本中 if-else-if 语句的语法是什么？以下因语法错误而失败：

```
function caseSwitch($htype){
    if($htype==22){
        type22();
    }
    else{
       if($htype==5){
            type5();
        }  //I have tried adding a semicolon here and it still fails
    }
    else
    {
        _log("Whoops, Hierarchy Type " + $htype + " has not been automated yet");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:25:15.483

这是一个语法问题。Sahi 论坛在这里提供了解决方案：

[http://sahi.co.in/forums/discussion/comment/16735#Comment_16735](http://sahi.co.in/forums/discussion/comment/16735#Comment_16735)

# java - 用 Java 对 2010 年人口普查中的数组进行排序

> ID：16093357
> 
> 赞同：1
> 
> 时间：2013-04-18T21:24:23.470
> 
> 标签：java, arrays, sorting, methods

我完成了这个程序，但出了点问题。我的意思是它没有打印出它需要的东西。它应该从人口普查中获取人口以及州名，然后从最小到最大的州对其进行排序。当我运行该项目时，它会打印出阿拉巴马州及其人口 50 次，而不是从最小人口到最大人口的所有州，我不确定该怎么做，我真的需要一些帮助，拜托。人口普查的一个例子如下......其中每一个都将在不同的行上：

> 阿拉巴马州,4779736
> 阿拉斯加州,710231
> 亚利桑那州,6392017

这是程序：

```
 public static void main(String[] args) throws IOException {
    File f = new File("census2010.txt");
    if(!f.exists()) {
        System.out.println( "f does not exist ");
    }
    Scanner infile = new Scanner(f);
    infile.useDelimiter ("[\t|,|\n|\r]+");
    final int MAX = 50;
    int [] myarray = new int [MAX];
    String[] statearray = new String[MAX];
    int fillsize;

    fillsize = fillarray (myarray, statearray, infile);
    printarray (myarray, fillsize, prw);
    sortarray(myarray, statearray, fillsize);

}

public static int fillarray (int[] num, String[] states, Scanner infile) throws FileNotFoundException{

    int retcnt = 0;
    int pop;
    String state;
    state = infile.next();
    pop = infile.nextInt();
    for( int count = 0; count < 50; count++){
        System.out.println(state + " " + pop + " ");
        states[retcnt] = state;
        num[retcnt] = pop;
        retcnt++;
    }

    return (retcnt);
}

public static void printarray (int[] num, int fillsize, PrintWriter prw){
    for (int counts = 0; counts < fillsize ; counts++){
        System.out.println("For the position ["+counts+"] the value is " + num[counts]);
        prw.println("For the position ["+counts+"] the value is " + num[counts]);
    }
    return;
}

public static void  sortarray(int[] poparray, String[] statearray, int fillsize){

    for( int fill = 0; fill < fillsize -1; fill = fill+1){
        for ( int compare = fill+1; compare < fillsize; compare++){
            if( poparray[compare] < poparray[fill]){

                int poptemp = poparray[fill];  
                poparray[fill] = poparray[compare]; 
                poparray[compare]  = poptemp;
            // do I need something here?    
                String statetemp = statearray[fill];  
                statearray[fill] = statearray[compare]; 
                statearray[compare]  = statetemp;
            }
        }
    }
} 
```

我认为我的问题出在排序数组中，但我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T21:28:13.237

在您的`fillarray`方法中，您只能从 Scanner 读取一次。您需要将从 Scanner 读取的代码放在`for`循环内，以便它在每次循环迭代时读取一行数据。

# sql - 添加两个查询sql

> ID：16093371
> 
> 赞同：0
> 
> 时间：2013-04-18T21:25:13.967
> 
> 标签：sql

我有两个疑问：

```
SELECT SUM(DATALENGTH(Money)) / 1048576.0 from Money

SELECT SUM(DATALENGTH(Cc)) / 1048576.0 from CC 
```

如果单独运行，它们会返回 20 和 30。我想将它们结合起来得到 50 的结果。

这可以在一行中完成吗？而不是分配查询1和2的两个变量值并添加它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:27:16.223

这样做的标准方法是使用`cross join`：

```
select val1 + val2
from (SELECT SUM(DATALENGTH(Money)) / 1048576.0 as val1 from Money
     ) t1 cross join
     (SELECT SUM(DATALENGTH(Cc)) / 1048576.0 as val2 from CC
     ) t2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:27:27.653

```
select sum(sm) as total_sum
from (
  SELECT SUM(DATALENGTH(Money)) / 1048576.0 as sm 
  from Money

  union all

  SELECT SUM(DATALENGTH(Cc)) / 1048576.0 
  from CC
) t 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T21:28:53.353

这应该可以解决问题：

```
SELECT 
(SUM(DATALENGTH(Money)) / 1048576.0) + SUM(DATALENGTH(Cc)) / 1048576.0
from Money, CC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T21:27:04.377

我相信这会奏效：

```
Select 
   (SELECT SUM(DATALENGTH(Money)) / 1048576.0 from Money) 
 + (SELECT SUM(DATALENGTH(Cc)) / 1048576.0 from CC) 
```

至少在我的数据库引擎中是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T21:28:24.397

```
SELECT SUM(S)
FROM (
    SELECT SUM(DATALENGTH(Money)) / 1048576.0 S from Money
    UNION ALL
    SELECT SUM(DATALENGTH(Cc)) / 1048576.0 from CC
) Q; 
```

# android - Android：使用图标作为后退按钮而不重新加载以前的活动

> ID：16093372
> 
> 赞同：9
> 
> 时间：2013-04-18T21:25:18.640
> 
> 标签：android, android-intent, android-activity

我有以下代码可以启用主页按钮作为后退按钮。我面临的问题来自这个活动，如果我使用真正的后退按钮，它只是回到上一个活动，就像我离开它一样。如果我使用主页按钮，它会重新加载页面，所以我会丢失之前对它所做的事情。我敢肯定这是我想念的简单的东西。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.census_management_search, menu);
    ActionBar actionBar = getActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) 
{
    // Handle item selection
    switch (item.getItemId()) 
    {
        case android.R.id.home:
            Intent intent = new Intent(this, CensusManagementActivity.class);
            NavUtils.navigateUpTo(this, intent);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-18T21:30:43.983

而不是`Intent`并`NavUtils`尝试使用`onBackPressed()`方法。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) 
{
    // Handle item selection
    switch (item.getItemId()) 
    {
        case android.R.id.home:
            onBackPressed();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T21:30:55.077

Home/Up 按钮应该重新加载新活动。但是，如果您想模拟后退按钮功能，您可以调用`finish()`以返回上一个活动：

```
 case android.R.id.home:
        finish();
        return true; 
```

# jquery - 如何分配 jquery ui 选项卡的目标 id？

> ID：16093379
> 
> 赞同：1
> 
> 时间：2013-04-18T21:26:12.343
> 
> 标签：jquery, jquery-ui

我无法理解 jQuery ui 选项卡。

基本上，我想单击一个选项卡并在#tabs div 之外加载数据。我怎么做？

jQuery：

```
$(function() {
$( "#tabs" ).tabs({
  collapsible: true, active: false,
  beforeLoad: function( event, ui ) {
    ui.jqXHR.error(function() {
      ui.panel.html(
        "Error." );
    });
  }
});
}); 
```

html:

```
<div id="tabs"><ul><li><a href="datafile.php">Data</a></li></ul></div>
<div id="outsidediv">load data here</div> 
```

现在，它正在 #tabs 中加载数据，我似乎找不到任何有关如何更改目标的信息。我是否理解这`panel`是我想要设置的？如果是这样，我该如何设置？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:35:26.417

称呼

```
$('#outsidediv').html(/* data here*/); 
```

在 beforeLoad 函数中。希望有帮助。

# html - CSS 修复了正文背景的标题问题

> ID：16093381
> 
> 赞同：-2
> 
> 时间：2013-04-18T21:26:19.707
> 
> 标签：html, css, drupal, drupal-7

我正在使用 openpublic 主题开发 Drupal-7 网站。

我已经修改了 CSS 以使标题固定，但是当我滚动页面时 - 内容会滚动到我的导航菜单上。谁能告诉我需要做什么来防止这种情况发生？内容也滚动到我的标题上方。我希望内容保持在我的标题和菜单下方。

我选择了一个特定的页面，因为首页的模板不同。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:52:15.323

发生这种情况是因为您的 div 位置设置为固定。

例子

```
.div_class_name {

       position:fixed;

} 
```

更改值可能会有所帮助。你可以使用 firebug(Firefox) 或 Chromebug(Chrome) 来检查你的 CSS 。

# .net - 如何在 .Net 4.5 中向 WebAPI 添加会话支持

> ID：16093382
> 
> 赞同：1
> 
> 时间：2013-04-18T21:26:21.063
> 
> 标签：.net, asp.net-web-api

在以前的版本中，我可以使用 IRequiresSessionState 添加路由处理程序，如下所述：

[http://forums.asp.net/post/4884822.aspx](http://forums.asp.net/post/4884822.aspx)

自上一个版本以来，MapHttpRoute 没有 RouteHandler。

我已经知道 HTTP 应该是无状态的，所以我将这种行为理解为默认行为，但对于我的特定场景，我仍然需要这种解决方法。

谢谢！

# html - 如何使用塞子制作粘性 div

> ID：16093384
> 
> 赞同：5
> 
> 时间：2013-04-18T21:26:33.373
> 
> 标签：html

有人可以告诉我当我在网页上向下时如何调用此效果并且有一个框，起初在页面中间，但在向下的过程中卡在内容的一侧并跟随你页面底部。我在 facebook 和许多网站上看到了这个。我不知道“Div”，因为这些仍然是固定的

抱歉，我忘记写了当只有页面顶部接触到它们时它们会移动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:37:17.070

使用 Javascript，您可以在窗口上放置一个侦听器以获取滚动事件，并使用 pageYOffset 或类似方法计算与 div 末尾的距离，然后在滚动条到达该位置时应用 css 使该 div 固定。

编辑

只是为了好玩，用 jQuery；

```
var position = window.pageYOffset;

$(window).on('scroll', function () {
    position = window.pageYOffset;
    if(position > 150) {
        $('#div').css({ 'top': position + 'px' });
    } 
}); 
```

在 CSS 中；

```
#div {
    position:absolute;
    top: 150px;
    -webkit-transition: top 1s ease-in-out;
} 
```

这应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:39:16.647

据我了解，您希望在向下滚动时跟随您，但起初它位于网页的中间。您可以使用一些 jquery 来实现：

[例子](http://kitchen.net-perspective.com/sf-example-3.html)

[教程](http://kitchen.net-perspective.com/open-source/scroll-follow/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T21:43:57.793

这是我发现的一个教程，它告诉您如何做到这一点。

这是一个类似的问题： [如何让浮动页脚粘在 IE 6 的视口底部？](https://stackoverflow.com/questions/146659/how-do-i-get-a-floating-footer-to-stick-to-the-bottom-of-the-viewport-in-ie-6)

以及使用 jquery 解释它的教程。 [http://net.tutsplus.com/tutorials/html-css-techniques/creating-a-floating-html-menu-using-jquery-and-css/](http://net.tutsplus.com/tutorials/html-css-techniques/creating-a-floating-html-menu-using-jquery-and-css/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T21:31:46.697

重现这一点的最简单方法是使用 div `position: fixed;`- 它会一直保持在页面上下的原始位置。

所以，如果你`div`的菜单上有一个：

```
<div id="menu">
  <ul>
    <li><a href="link1.htm">Link 1</a></li>
    <li><a href="link2.htm">Link 2</a></li>
    <li><a href="link3.htm">Link 3</a></li>
  </ul>
</div> 
```

你可以自定义它

```
#menu {
  position: fixed;
  left: 250px;
  top: 10px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T21:32:16.177

您只需要使用一些基本的 css：

```
#fixed {
    position:fixed;
    right:0px;
    top:150px;
} 
```

# highcharts - 具有固定条宽和间隙的 Highcharts 条形图

> ID：16093385
> 
> 赞同：2
> 
> 时间：2013-04-18T21:26:47.783
> 
> 标签：highcharts

我已经设置

```
pointWidth: 20,
pointPadding: 0,
groupPadding: 0 
```

但图表仍会扩展以填充默认图表高度。是否可以让 Highcharts 调整图表高度？

[http://jsfiddle.net/MLELM/](http://jsfiddle.net/MLELM/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:15:09.207

该图表将用您提供的内容填充可用高度。点和组填充是可用空间的一部分，因此图表遵循指定*的*属性。

它使用包含元素的大小来确定其大小，因此它不可能忽略包含元素的高度。

如果您想要一个较小的图表来填充页面上较大的空间，您可以将包含元素放在另一个包装元素中。然后，您可以根据系列数自行计算图表的高度，并将该高度传递给容器。

如果您想让您指定的系列聚集在顶部附近，您将需要添加额外的空数据点来填充它们下方的空间。

如果您可以更具体地说明您想要什么以及为什么，可能会有更好的答案。

**[[ 更新**

再次偶然发现这篇文章，并记得我有一个演示，它可以根据一些预定义的参数和数据点的数量自动设置图表高度。

```
var barCount = chartData.length,
    pointWidth = 20,
    marginTop = 70,
    marginRight = 10,
    marginBottom = 50,
    marginLeft = 100,
    groupPadding = 0,
    pointPadding = 0.3,
    chartHeight = marginTop 
                + marginBottom 
                + ((pointWidth * barCount) 
                * (1 + groupPadding + pointPadding)); 
```

在这里提琴：

*   [http://jsfiddle.net/jlbriggs/kpu5d1qf/](http://jsfiddle.net/jlbriggs/kpu5d1qf/)

相关问题在这里：

*   [如何计算条形图的高度](https://stackoverflow.com/questions/33824305/how-to-calculate-the-height-of-bar-chart/33832694#33832694)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:36:25.517

是的，您可以像这样设置图表高度：

```
 chart: {
        type: 'bar',
        height: 200,
    }, 
```

另见[http://jsfiddle.net/MLELM/3/](http://jsfiddle.net/MLELM/3/)

# c# - 组和连接元组列表

> ID：16093395
> 
> 赞同：1
> 
> 时间：2013-04-18T21:27:32.617
> 
> 标签：c#, linq, ienumerable

我有一个对 (key, val) 的列表，其中键和值都是字符串。我想用重复键聚合元组。

```
For (key1, val1), (key2, val2), (key3, val3), (key1, val4), (key2, val5) 
```

我要输出

```
(key1, val1+val4), (key2, val2+val5) 
```

这是我当前的查询

```
var duplicates = Contents.Records.SelectMany(x => x.Users).Select(x => new { Name = x.Name, ID= x.ID}).GroupBy(x => x.ID).Select(x => new { x.Key, Names = x.Select(p=>p.Name).Aggregate((a,b) => a +","+b)}).ToArray(); 
```

但在每个重复条目的末尾，成员名称为空。

数据如下，每条Records都有一个List Users。每个用户都有一个名称和一个 ID。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:23:01.360

`Aggregate`看起来它应该完成这项工作。但我从来不喜欢`Aggregate`。语法不直观（在我看来）。通常其他方式看起来更清晰。拿这个：

```
Tuple<string,string>[] tuples = { 
                                    Tuple.Create("key1", "val1"), 
                                    Tuple.Create("key2", "val2"), 
                                    Tuple.Create("key3", "val3"), 
                                    Tuple.Create("key1", "val4"), 
                                    Tuple.Create("key2", "val5")
                                };
tuples.GroupBy(t => t.Item1, t => t.Item2)
      .Select(g => Tuple.Create(g.Key, string.Join("+", g)))
      .Dump(); // Linqpad output command 
```

结果：

```
key1    val1+val4
key2    val2+val5
key3    val3 
```

# java - 使用 JDBI 获取 Postgres 数组数据

> ID：16093398
> 
> 赞同：3
> 
> 时间：2013-04-18T21:27:38.050
> 
> 标签：java, jdbc, jdbi

我有一个使用 JDBI（JDBC 包装器）来访问 PostgreSQL 数据库的 java 程序。其中一列是数组数据类型`(mycolumn integer[])`。

我在我的映射器类中使用什么？我认为`resultSet.getArray("mycolumn")`这是正确的做法，但我不确定如何从`java.sql.Array`返回的对象中获取数据。

有关如何执行此操作的任何提示或良好链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-21T21:03:58.670

```
 Array array = resultSet.getArray("mycolumn");
        return nonNull(array) ? (Integer[])array.getArray() : null ; 
```

# php - PHP DOMDocument 如何获取该标签的内容？

> ID：16093402
> 
> 赞同：1
> 
> 时间：2013-04-18T21:27:59.333
> 
> 标签：php, html, parsing, domdocument

我正在使用 domDocument 希望解析这个小 html 代码。我正在寻找`span`具有特定`id`.

```
<span id="CPHCenter_lblOperandName">Hello world</span> 
```

我的代码：

```
$dom = new domDocument;
@$dom->loadHTML($html); // the @ is to silence errors and misconfigures of HTML
$dom->preserveWhiteSpace = false;
$nodes = $dom->getElementsByTagName('//span[@id="CPHCenter_lblOperandName"');

foreach($nodes as $node){
    echo $node->nodeValue;
} 
```

但由于某种原因，我认为代码或 html 有问题（我怎么知道？）：

*   当我计算节点时`echo count($nodes);`，结果始终为 1
*   我在节点循环中没有输出任何内容
*   如何学习这些复杂查询的语法？
*   我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T21:51:42.570

您可以使用简单的 getElementById：

```
$dom->getElementById('CPHCenter_lblOperandName')->nodeValue 
```

或以选择器方式：

```
$selector = new DOMXPath($dom);

$list = $selector->query('/html/body//span[@id="CPHCenter_lblOperandName"]');

echo($list->item(0)->nodeValue);

//or 
foreach($list as $span) { 
    $text = $span->nodeValue;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T21:45:33.883

您的四部分问题分三个部分得到答案：

1.  getElementsByTagName 不接受 XPath 表达式，您需要给它一个标签名称；
2.  没有任何输出，因为没有任何标签与您提供的标签名匹配（参见 #1）；
3.  看起来您想要的是 XPath，这意味着您需要创建一个 XPath 对象 - 请参阅[PHP 文档](http://php.net/DOMXPath)了解更多信息；

此外，控制 libxml 错误的更好方法是使用 libxml_use_internal_errors(true) （而不是 '@' 运算符，它还会隐藏其他更合法的错误）。这会给你留下看起来像这样的代码：

```
<?php    
libxml_use_internal_errors(true);
$dom = new DOMDocument();
$dom->loadHTML($html);
$xpath = new DOMXPath($dom);
foreach($xpath->query("//span[@id='CPHCenter_lblOperandName']") as $node) {
    echo $node->textContent;
} 
```

# javascript - 在“非ajax”功能上使用jquery

> ID：16093404
> 
> 赞同：9
> 
> 时间：2013-04-18T21:28:10.700
> 
> 标签：javascript, jquery, jquery-deferred

我可以`done()`在“非 ajax”函数上使用 jquery。`Uncaught TypeError: Cannot call method 'done' of undefined`当我尝试做这样的事情时，我得到了错误。

```
function countThreeSeconds() {
    var counter = 0,
    timer = setInterval(function () {

        if (counter == 3) {
            console.log("All done. That was three seconds.");
            window.clearInterval(timer);

        } else {
          console.log("Not there yet. Counter at: " + counter);
        }
        counter++;
    }, 1000);

}

(function(){
  var timer = countThreeSeconds().done(function(){
     alert("done");
  });

}()); 
```

谢谢

[JSBIN](http://jsbin.com/enesin/1/edit)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T21:32:54.397

使非 ajax 函数返回一个 promise 对象。

```
function countThreeSeconds() {
    var counter = 0,
    deferred = $.Deferred(),
    timer = setInterval(function () {

        if (counter == 3) {
            console.log("All done. That was three seconds.");
            window.clearInterval(timer);
            deferred.resolve();

        } else {              
            console.log("Not there yet. Counter at: " + counter);
            deferred.notify(counter);
        }
        counter++;
    }, 1000);
    return deferred.promise();

}

(function(){
  var timer = countThreeSeconds().done(function(){
     alert("done");
  }).progress(function(i){
     console.log("in progress...",i);
  });

}()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T21:30:21.793

由于您没有从函数返回任何内容，因此这是完全有效的 JS 行为。为了能够`done`在函数上使用，从它返回[`jQuery.Deferred`](http://api.jquery.com/jQuery.Deferred/)对象。

像这样的东西：

```
function countThreeSeconds() {
    var defer = $.Deferred(function() { // do your stuff here });
    return defer.promise();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T22:04:52.680

Thomas，通过这样的方式，您可以让 Deferred 对象（及其承诺）真正为您工作。

例如，您可以创建`countThreeSeconds()`一个原始的、更通用的函数，并在调用函数中执行所有进度/完成报告。

```
function countSeconds(n) {
    var dfrd = $.Deferred(),
        counter = 0,
        timer = setInterval(function() {
            counter++;
            if (counter < n) { dfrd.notify(counter); }
            else { dfrd.resolve(); }
        }, 1000);
    return {
        promise: dfrd.promise(),
        timer: timer
    };
}

(function() {
    var timerObj = countSeconds(3);
    timerObj.promise.progress(function(counter) {
        console.log("Not there yet. Counter at: " + counter);
    }).done(function() {
        clearInterval(timerObj.timer);
        console.log("All done. That was three seconds.");
        alert("done");
    });
}()); 
```

因此，另一个函数可以调用`countSeconds()`不同的值，并以不同的方式处理进度和完成情况。

例如 ：

```
(function() {
    var timerObj = countSeconds(10);
    timerObj.promise.progress(function(counter) {
        $("#message").text("Counter = " + counter);
    }).done(function() {
        clearInterval(timerObj.timer);
        $("#message").text('Complete');
    });
}()); 
```

# sql-server - 旧的 sql 脚本在编译器更新时开始抛出 CTE "Types don't match" 错误，想知道为什么

> ID：16093407
> 
> 赞同：0
> 
> 时间：2013-04-18T21:28:22.287
> 
> 标签：sql-server, odbc, installshield

好的，还有一个在 forums.asp.net 上没有得到任何好的答案的问题，所以我想我会在这里尝试。

作为安装过程的一部分，我们的 InstallShield 代码有一个 dll 插件，可以通过 ODBC 读取和应用架构/数据升级脚本。我必须在我们的安装程序上做一些工作，所以我将项目转移到另一台机器上并开始工作，但发生了一件奇怪的事情 - 一个一直在没有抱怨的情况下运行的脚本突然开始抛出

“递归查询“TempCategoryValue”的“PathFromRoot”列中的锚点和递归部分之间的类型不匹配

以前没有的 CTE 错误。唯一改变的是我们的 InstallShield 插件的编译器版本。

剧本很旧；它已经毫无怨言地运行了几年。该脚本正在处理旧的树表表示，尝试在每个节点处添加和填充树继承的字符串表示。这个想法是你不需要大量的外部连接或递归 CTE 来告诉你在任何给定时间你在树中的位置，因为新的 PathFromRoot 列会告诉你。

但是将编译器从 VS 2003 更新到 VS 2010 突然改变了它对 CTE 表达式的看法。

我们的 C++ 应用程序浏览一个文本文件，并将 GO 语句之间的所有内容作为单独的命令运行，尽管在同一个连接上。

我盯着查询看了一会儿，不明白为什么它认为类型不匹配。 `[PathFromRoot]`被声明为在 TreeTable 中，并且 CTE对递归子句`varchar(900) not null`有明确的说明。`CONVERT(varchar(900),...)`

任何人都知道为什么它会突然认为它们不同？

```
-- Table as it existed to start, before the script ran
CREATE TABLE [dbo].[TreeTable](
[TreeValueID] [int] IDENTITY(1,1) NOT NULL,
[Name] [nvarchar](128) NOT NULL,
[ParentValueID] [int] NULL
) ON [PRIMARY]

-- Add the PathFromRoot column to get a string representation of the tree hierarchy
ALTER TABLE TreeTable ADD PathFromRoot varchar(900) NOT NULL DEFAULT '.'
GO

-- Seed the new string column for the root tree values
UPDATE TreeTable SET PathFromRoot = CONVERT(nvarchar(25), TreeValueID) + '.'
WHERE ParentValueID IS NULL
GO

-- recursively update the rest of the PathFromRoot values
WITH TempTreeValue (ParentID, PathFromRoot, TreeValueID ) AS (  
-- anchor member definition  
SELECT ParentValueID, PathFromRoot, TreeValueID  FROM TreeTable  WHERE ParentValueID IS NULL
UNION ALL
 -- recursive member definition  
SELECT tv.ParentValueID,  CONVERT(varchar(900), tv.PathFromRoot + CONVERT(varchar(25), tv.TreeValueID) + '.') as [PathFromRoot], tv.TreeValueID 
   FROM TreeTable tv  
   INNER JOIN TempTreeValue ttv ON tv.ParentValueID = ttv.TreeValueID 
)
UPDATE TreeTable  SET PathFromRoot = ttv.PathFromRoot FROM TreeTable t JOIN TempTreeValue ttv ON t.TreeValueID  = ttv.TreeValueID 

... 
```

# python - 保存 PDF 时的 matplotlib 线宽

> ID：16093408
> 
> 赞同：8
> 
> 时间：2013-04-18T21:28:23.567
> 
> 标签：python, pdf, matplotlib, dpi

我有一个具有一些对线宽敏感的相当微妙的特征的图形。我想将此图保存为可以轻松打印的 PDF（即在接收器侧没有缩放，只需 Command+P 即可）。不幸的是，当我设置 figsize=(8.5,11) 以正确调整 PDF 的大小以进行打印时，matplotlib 选择了一个非常粗的默认线宽和文本大小，这会弄乱绘图（图例太大并且条形图中的线条重叠）。如果我设置 figsize=(17,22) 在将 PDF 缩放到 50% 进行打印后，我会得到一个非常可行的默认线宽和文本大小。这是我一直在使用的，但是由于政治原因，该解决方案变得不可行，我真的不想每次进行更改时都在 illustrator 中缩放 PDF。

如果我可以使用位图，我可以通过设置 figsize=(17,22) 并将 dpi 设置为目标 dpi 的一半来获得所需的结果，但这不适用于 PDF，因为 dpi 参数似乎被忽略了。我想要一个PDF

*   看起来像 box_good.png（带有细线、小文本的大小受骗位图）
*   尺寸为 8.5x11 英寸（或像这样打印）
*   可以在 illustrator 中编辑（不是包装在 pdf 中的位图）

我不禁怀疑在另存为 PDF 时有一种简单的方法可以实现“双倍大小，一半 dpi”的技巧，但我放弃了让它工作并开始尝试直接操作线宽和文本大小。我成功修改了文本大小但没有修改线宽。这是我尝试过的事情的记录：

```
# Tried:
# fig.set_size_inches(17,22)
# fig.savefig('boxes.pdf', dpi=100,150,300)
#   dpi parameter has no effect on linewidth, text size, or the PDF's dimensions
# 'markerscale=.5' on plt.legend and pax.legend
#   no effect
# mp.rcParams['font.size']=8
#   worked! made text smaller, now for linewidth...
# mp.rcParams['lines.linewidth']=5
#   no effect
# fig.set_linewidth(5)
#   no effect
# pax.axhline(linewidth=5)
#   only changes x axis not box surrounding subplot
# fig.set_size_inches(8.5,11) immediately before plt.savefig('boxes.pdf')
#   identical results to calling plt.figure(figsize=(8.5,11)) in the first place

# I tried passing plt.figure(figsize=(17,22)) and swapping it to 8.5x11 using
# fig.set_size_inches right before saving, but the lines were thick and the text
# was large in the PDF, exactly as if I had set figsize=(8.5,11) to begin with 
```

这是源文件（我已将情节简化为基本内容，因此明显的样式变通办法可能不是可行的解决方案）

```
import numpy as np
import matplotlib as mp
import matplotlib.pyplot as plt

x = np.arange(200)
bottom_red_bar = -np.random.random(200)
bottom_black_bar = np.random.random(200) * bottom_red_bar

fig = plt.figure()
for subplotnum in [1,2,3]:
    pax = plt.subplot(310+subplotnum)
    pax.set_ylim([-1,1])
    bot_rb = pax.bar(x,         bottom_red_bar,1,color='r')
    bot_bb = pax.bar(x+(1-.3)/2,bottom_black_bar,.3,color='k')
    pax.legend([bot_rb,bot_bb],['Filler Text 1','Filler Text 2'],loc=4)

fig.set_size_inches(8.5,11)
fig.savefig('boxes_bad.png',dpi=300)  # Lines are too thick

fig.set_size_inches(17,22)
fig.savefig('boxes_good.png',dpi=150)  # Lines are just right

fig.set_size_inches(8.5,11)
plt.savefig('boxes.pdf')  # Lines are too thick

fig.set_size_inches(17,22) # Lines are just right
plt.savefig('boxes.pdf')   # but the PDF needs scaling before printing 
```

因此，我正在寻找一种方法来调整整个图形的线宽，或者让 matplotlib 保存一个尺寸元数据与 figsize 不同的 pdf。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-21T14:58:43.940

谢谢 Marius，我会在获得 15 名声望后立即投票。虽然您的 rcParams 与我想要做的不太匹配，但 rcParams 本身是正确的查看位置，因此我通过 rcParams.keys() 列出了包含“linewidth”的 rcParams：

```
>>> [s for s in mp.rcParams.keys() if 'linewidth' in s]
['axes.linewidth', 'grid.linewidth', 'lines.linewidth', 'patch.linewidth'] 
```

经过一些实验，我匹配了每个参数控制的内容：
**mp.rcParams['axes.linewidth']：**围绕整个绘图的正方形（不是刻度线，不是 y=0 线）
**mp.rcParams['grid.linewidth'] ：**没有测试，大概是网格宽度
**mp.rcParams['lines.linewidth']：**使用 pyplot.plot
**mp.rcParams['patch.linewidth']**绘制的线图的宽度：矩形笔划的宽度，包括一个 pyplot.bar 图、图例和条形图的图例标签
**mp.rcParams['xtick.minor.width']：**小 xticks（yticks 类似）的线宽mp.rcParams
**['xtick.major.width']：**大 xticks 的线宽（yticks 类似）

我最终使用的具体解决方案是

```
mp.rcParams['axes.linewidth'] = .5
mp.rcParams['lines.linewidth'] = .5
mp.rcParams['patch.linewidth'] = .5 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-19T11:51:05.307

我建议通过 rcParams （或您的 matplotlibrc 文件）调整线宽等参数：

```
# mp.rcParams['figure.figsize'] = fig_size  # set figure size
mp.rcParams['font.size'] = font_size
mp.rcParams['axes.labelsize'] = font_size
mp.rcParams['axes.linewidth'] = font_size / 12.
mp.rcParams['axes.titlesize'] = font_size
mp.rcParams['legend.fontsize'] = font_size
mp.rcParams['xtick.labelsize'] = font_size
mp.rcParams['ytick.labelsize'] = font_size 
```

我通常使用字体大小的轴对象中的标准和线宽`figure.figsize`（例如，当我在双栏论文中包含绘图时）。`(8,6)``1/12``font_size = 16`

请记住，矢量图并不意味着所有线条和字母在缩放时总是具有相同的大小。这意味着您可以在不损失质量或清晰度的情况下进行缩放（粗略地说）。

# c# - 如何在 WPF 中将 ObservableCollection 类绑定到 DataGrin

> ID：16093410
> 
> 赞同：0
> 
> 时间：2013-04-18T21:28:23.850
> 
> 标签：c#, wpf, datagrid, itemssource

所有，我正在创建一个`DataGrid`在运行时“绑定”到 a 的数据集。我提取了一些数据，这些数据用于构建一个继承自`ObservableCollection<T>`. 有问题的班级是

```
public class ResourceData : ObservableCollection<ResourceRow>
{
   public ResourceData(List<ResourceRow> resourceRowList) : base()
   {
      foreach (ResourceRow row in resourceRowList)
         Add(row);
   }
}

public class ResourceRow
{
   private string keyIndex;
   private string fileName;
   private string resourceName;
   private List<string> resourceStringList;

   public string KeyIndex
   {
      get { return keyIndex; }
      set { keyIndex = value; }
   }

   public string FileName
   {
      get { return fileName; }
      set { fileName = value; }
   }

   public string ResourceName
   {
      get { return resourceName; }
      set { resourceName = value; }
   }

   public List<string> ResourceStringList
   {
      get { return resourceStringList; }
      set { resourceStringList = value; }
   }
} 
```

我从一个名为 的方法返回一个`ResourceData`对象`BuildDataGrid()`，定义为

```
private ResourceData BuildDataGrid(Dictionary<string, string> cultureDict)
{
    // ...
} 
```

然后我通过`DataGrid`_`ItemSource``ResourceData`

```
dataGrid.ItemSource = BuiltDataGrid(cultureDictionary); 
```

但是，这并没有正确扩展`ResourceStringList`inside `ResourceRow`。我得到显示：

![数据网格](https://i.stack.imgur.com/bLCnd.png)

我的问题是：**如何修改我的`ResourceRow`类以允许`DataGrid`自动读取和显示`ResourceData`对象的内容？**我想`ResourceStringList`在单独的列中显示每个项目。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:36:17.677

这是我的解决方案-我更改了控件，而不是 ResourceRow，但我认为它可以实现您想要的。

我们只需在 xaml 中创建一个带有设计时列的 DataGrid，然后在控件的构造函数中动态添加运行时列。有几件事要记住——我们假设 ResourceData 的第一行是所有行的好模型，因为这是我们用来确定要添加到构造函数中的数据网格的列的模型。其次，由于 ResourceRow 没有实现 INotifyPropertyChanged，我们不会获得来自 ResourceStringList 的列的更新值——但这很容易改变。

代码隐藏：

```
namespace WpfApplication
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            ResourceData data = GetData();
            _dataGrid.ItemsSource = data;

            for (int i = 0; i < data[0].ResourceStringList.Count; i++)
            {
                DataGridTextColumn column = new DataGridTextColumn();
                column.Binding = new Binding(string.Format("ResourceStringList[{0}]", i));
                column.Header = string.Format("dynamic column {0}", i);
                _dataGrid.Columns.Add(column);
            }
        }

        public ResourceData GetData()
        {
            List<ResourceRow> rows = new List<ResourceRow>();

            for (int i = 0; i < 5; i++)
            {
                rows.Add(new ResourceRow() { KeyIndex = i.ToString(), FileName = string.Format("File {0}", i), ResourceName = string.Format("Name {0}", i), ResourceStringList = new List<string>() { "first", "second", "third" } });
            }
            return new ResourceData(rows);
        }
    }

    public class ResourceData : ObservableCollection<ResourceRow>
    {
        public ResourceData(List<ResourceRow> resourceRowList)
            : base()
        {
            foreach (ResourceRow row in resourceRowList)
                Add(row);
        }
    }

    public class ResourceRow
    {
        private string keyIndex;
        private string fileName;
        private string resourceName;
        private List<string> resourceStringList;

        public string KeyIndex
        {
            get { return keyIndex; }
            set { keyIndex = value; }
        }

        public string FileName
        {
            get { return fileName; }
            set { fileName = value; }
        }

        public string ResourceName
        {
            get { return resourceName; }
            set { resourceName = value; }
        }

        public List<string> ResourceStringList
        {
            get { return resourceStringList; }
            set { resourceStringList = value; }
        }
    }
} 
```

xml:

```
<Window x:Class="WpfApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <DataGrid x:Name="_dataGrid" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding KeyIndex}" Header="Key Index"/>
                <DataGridTextColumn Binding="{Binding FileName}" Header="File Name"/>
                <DataGridTextColumn Binding="{Binding ResourceName}" Header="Resource Name"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:35:49.617

您的属性需要从 INotifyPropertyChanged 继承，以便它们可以更新 UI，您的 ViewModel 也是如此。让您的视图模型（或背后的代码）从 INotifyPropertyChanged 继承。实现接口，然后您可以为您的属性执行此操作。

```
 private string _keyIndex= string.Empty;
    public string KeyIndex
    {
        get { return this._keyIndex; }

       set
       {
            this._keyIndex= value;
            this.RaisePropertyChangedEvent("KeyIndex");
        }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-07T15:02:21.657

@Andrew 的回答是正确的，但我喜欢简单易用，所以我实现了一种方法，可以自动设置列并将其绑定到具有我想要的名称的数据网格，而不必使用数据网格列。

声明一个从属性继承的列名类，如下所示：

```
public class ColumnNameAttribute : Attribute
{
    public ColumnNameAttribute(string Name) { this.Name = Name; }
    public string Name { get; set; }

} 
```

使用列名称装饰您的模型，如下所示：

```
public class Data
  {
        [ColumnName("Name")]
        public string Name{ get; set; }
        [ColumnName("Customer")]
        public string Client { get; set; }
        [ColumnName("Activity Type")]
        public string Activity_Type { get; set; }
    } 
```

将 AutoGenerateColumns 设置为 True，然后添加此事件处理程序：

```
 private void gen_AutoGridColumns(object sender, DataGridAutoGeneratingColumnEventArgs e)
    {           
        var desc = e.PropertyDescriptor as PropertyDescriptor;
        if (desc.Attributes[typeof(ColumnNameAttribute)] is ColumnNameAttribute att) e.Column.Header = att.Name;

        //set the width for each column           
        e.Column.Width = new DataGridLength(1, DataGridLengthUnitType.Star);            
    } 
```

您现在可以跳过将 DataGridColumns 定义添加到 DataGrid 中，并且仍然可以将它们命名为您想要的任何名称。

# mysql - MySQL LEFT OUTER JOIN 加快查询速度

> ID：16093412
> 
> 赞同：-1
> 
> 时间：2013-04-18T21:28:27.593
> 
> 标签：mysql, sql

谁能告诉我如何编写以下 SQL：

```
SELECT url_source_wp.url 
FROM url_source_wp 
WHERE url_source_wp.id NOT IN (
  SELECT url_done_wp.url_source_wp
  FROM url_done_wp 
  WHERE (url_done_wp.url_group = 4) AND (hash IS NULL)) LIMIT 50; 
```

使用连接？

我试过了：

```
SELECT url_source_wp.url 
FROM url_source_wp 
LEFT OUTER JOIN url_done_wp ON url_source_wp.id = url_done_wp.url_source_wp
WHERE url_done_wp.url_group = 4 AND url_source_wp.hash is NULL LIMIT 50 
```

但回复不一样。

问题是第一个 SQL 非常非常慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:31:21.683

我相信你正在寻找这样的东西：

```
SELECT url_source_wp.url 
FROM url_source_wp 
LEFT OUTER JOIN url_done_wp
    ON url_source_wp.id = url_done_wp.url_source_wp AND url_done_wp.url_group = 4 AND hash IS NULL
WHERE url_done_wp.url_source_wp IS NULL
LIMIT 50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:39:15.040

您不应该直接否定 WHERE 子句中的两个条件吗？

我假设您正在尝试获取所有 url_source_wp 记录，其 id 在 url_done_wp 表中由 FK url_source_wp 引用，这些记录不具有 url_group = 4 并且它们的哈希列不为空，因为您使用了带有 NOT IN 的子查询。INNER JOIN 应该没问题。

所以应该是：

```
SELECT url_source_wp.url 
FROM url_source_wp 
INNER JOIN url_done_wp ON url_source_wp.id = url_done_wp.url_source_wp
WHERE url_done_wp.url_group != 4 AND url_source_wp.hash IS NOT NULL LIMIT 50 
```

# c++ - 结构的比较运算符重载，对称地将我的结构与 int 类型进行比较？

> ID：16093413
> 
> 赞同：4
> 
> 时间：2013-04-18T21:28:29.647
> 
> 标签：c++, struct, operator-overloading

我正在尝试在结构中重载这些运算符： `<`, `<=`, `==`, `>=`, `>`, 可能稍后再重载`!=`。

*将结构的一个对象与同一结构*的另一个对象进行比较似乎很容易，因为在为该场景重载运算符时，定义是自动对称的。

但是，如果我想将我的 struct`FOOD`与 a进行比较`int`怎么办？这也很容易，只要`FOOD`先出现，*但是*，int 先出现的场景呢？如果没有 g++ 给我这么多“必须只包含一个参数”错误，我该如何定义呢？

我意识到

```
bool operator> (const int &, const FOOD &) const; 
```

由于“不止一个论点”的事情而出现问题。我明白了。

在我在互联网上搜索的所有论坛上，每个人的解决方案似乎都在使用`friend`，但他们的困难总是在类的上下文中，而不是结构的上下文中。这是如何为 s 结构完成的？

```
struct FOOD {
    int foodID;
    double price;
    bool operator> (const FOOD  &) const;       //FOOD >  FOOD
    bool operator>=(const FOOD  &) const;       //FOOD >= FOOD
    bool operator==(const FOOD  &) const;       //FOOD == FOOD
    bool operator<=(const FOOD  &) const;       //FOOD <= FOOD
    bool operator< (const FOOD  &) const;       //FOOD <  FOOD
    bool operator> (const int   &) const;       //FOOD >  int 
    bool operator>=(const int   &) const;       //FOOD >= int
    bool operator==(const int   &) const;       //FOOD == int
    bool operator<=(const int   &) const;       //FOOD <= int
    bool operator< (const int   &) const;       //FOOD <  int
    bool operator> (const int &, const FOOD &) const;   // int >  FOOD
    bool operator>=(const int &, const FOOD &) const;   // int >= FOOD
    bool operator==(const int &, const FOOD &) const;   // int == FOOD
    bool operator<=(const int &, const FOOD &) const;   // int <= FOOD
    bool operator< (const int &, const FOOD &) const;   // int <  FOOD
};

bool FOOD::operator> (const FOOD  &f) const {return foodID >  f.foodID;}//FOOD >  FOOD
bool FOOD::operator>=(const FOOD  &f) const {return foodID >= f.foodID;}//FOOD >= FOOD
bool FOOD::operator==(const FOOD  &f) const {return foodID == f.foodID;}//FOOD == FOOD
bool FOOD::operator<=(const FOOD  &f) const {return foodID <= f.foodID;}//FOOD <= FOOD
bool FOOD::operator< (const FOOD  &f) const {return foodID <  f.foodID;}//FOOD <  FOOD
bool FOOD::operator> (const int   &i) const {return foodID >  i;}   //FOOD >  int 
bool FOOD::operator>=(const int   &i) const {return foodID >= i;}   //FOOD >= int
bool FOOD::operator==(const int   &i) const {return foodID == i;}   //FOOD == int
bool FOOD::operator<=(const int   &i) const {return foodID <= i;}   //FOOD <= int
bool FOOD::operator< (const int   &i) const {return foodID <  i;}   //FOOD <  int
bool FOOD::operator> (const int &i, const FOOD &f) const {return i >  f.foodID;}// int >  FOOD
bool FOOD::operator>=(const int &i, const FOOD &f) const {return i >= f.foodID;}// int >= FOOD
bool FOOD::operator==(const int &i, const FOOD &f) const {return i == f.foodID;}// int == FOOD
bool FOOD::operator<=(const int &i, const FOOD &f) const {return i <= f.foodID;}// int <= FOOD
bool FOOD::operator< (const int &i, const FOOD &f) const {return i <  f.foodID;}// int <  FOOD 
```

`g++`给了我这些错误：

```
structsTransAndFood.cc:64:45: error: ‘bool FOOD::operator>(const int&, const FOOD&) const’ must take exactly one argument 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T21:44:17.177

在结构之外定义它`FOOD`：

```
bool operator> (const int &i, const FOOD &f) {return i >  f.foodID;} 
```

不要忘记从`FOOD`结构中删除这个错误的声明：

```
bool operator> (const int &, const FOOD &) const; // <--- remove it 
```

以及相应的定义：

```
bool FOOD::operator> (const int &i, const FOOD &f) const {return i >  f.foodID;} // <--- remove it 
```

对其他运算符重复相同的操作。

## 解决方案

你声称你理解*“不止一个论点”*。然而，事实证明你没有。我不明白为什么您很难理解编译器和这里的 2 个人告诉您的内容，但解决方案如下所示：

```
struct FOOD {
    int foodID;
    double price;

    bool operator> (const FOOD  &) const;
    bool operator>=(const FOOD  &) const;
    bool operator==(const FOOD  &) const;
    bool operator<=(const FOOD  &) const;
    bool operator< (const FOOD  &) const;

    bool operator> (const int   &) const;
    bool operator>=(const int   &) const;
    bool operator==(const int   &) const;
    bool operator<=(const int   &) const;
    bool operator< (const int   &) const;
};

bool FOOD::operator> (const FOOD  &f) const {return foodID >  f.foodID;}
bool FOOD::operator>=(const FOOD  &f) const {return foodID >= f.foodID;}
bool FOOD::operator==(const FOOD  &f) const {return foodID == f.foodID;}
bool FOOD::operator<=(const FOOD  &f) const {return foodID <= f.foodID;}
bool FOOD::operator< (const FOOD  &f) const {return foodID <  f.foodID;}

bool FOOD::operator> (const int   &i) const {return foodID >  i;}
bool FOOD::operator>=(const int   &i) const {return foodID >= i;}
bool FOOD::operator==(const int   &i) const {return foodID == i;}
bool FOOD::operator<=(const int   &i) const {return foodID <= i;}
bool FOOD::operator< (const int   &i) const {return foodID <  i;}

bool operator> (const int &i, const FOOD &f) {return i >  f.foodID;}
bool operator>=(const int &i, const FOOD &f) {return i >= f.foodID;}
bool operator==(const int &i, const FOOD &f) {return i == f.foodID;}
bool operator<=(const int &i, const FOOD &f) {return i <= f.foodID;}
bool operator< (const int &i, const FOOD &f) {return i <  f.foodID;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T21:38:39.577

这类运营商

```
bool operator> (const int &, const FOOD &) const; 
```

不能成为会员。成员函数需要一个额外的隐式类型参数`FOOD*`（可能是 cv 限定的），因此上面的示例实际上需要三个参数。您需要将其设为非会员。

我认为最简单的方法是给你的类一个显式的`int`转换运算符

```
explicit operator int() const { return foodID; } 
```

另请注意，所有比较运算符都可以用单个比较运算符表示，例如`bool operator<`（此技术用于 std 库关联容器中）

# logging - 在 Batch 中使用 txt 文件创建自定义日志文件

> ID：16093414
> 
> 赞同：0
> 
> 时间：2013-04-18T21:28:34.023
> 
> 标签：logging, for-loop, batch-file

我有一个像这样的文件目录：

```
PDEN51505_1_1_N611729_15894285.XML
PDEN51505_1_2_N611729_15894286.XML
PDEN51505_2_1_N599021_15746279.XML 
```

我需要为这些文件创建一个自定义日志文件，最终看起来像这样：

```
462121  14105618    PD  EN  97240   1   97240               RF  PDEN51505_1_1_N611729_15894285  XML         C       N   N   0
462121  14105618    PD  EN  97240   1   97240               RF  PDEN51505_1_2_N611729_15894286  XML         C       N   N   0
462121  14105618    PD  EN  97240   1   97240               RF  PDEN51505_2_1_N599021_15746279  XML         C       N   N   0 
```

我不是每次都修改自定义日志文件中的各个行，而是创建一个自动化过程来为我构建它。这是我到目前为止所拥有的：

```
@ECHO OFF
SETLOCAL EnableDelayedExpansion
MODE con: cols=125 lines=50
SET /P WHERE=Where are the XMLs located (full file path)? (default: %CD%)
IF "%WHERE%"=="" (
    SET WHERE=%CD%\
    ) ELSE (
        IF "!WHERE:~-1!"=="\" (
            SET WHERE=!WHERE!
        )   ELSE    (
            SET WHERE=!WHERE!\
        )
    )

:: TRAVERSE TO DIRECTORY THE USER JUST INPUT
CD %WHERE%

:: CREATES AN TEMP OUTPUT FILE OF THE DIRECTORY (MINUS EXTENTIONS)
FOR /f "tokens=*" %%a in ('dir /b /a-d *.xml') DO ECHO %%~na>>output.txt

:: CLEARS OUT "PDEN" VARIABLES
FOR /f "delims==" %%i IN ('set PDEN 2^>nul') DO (SET %%i=)

:: CREATES A LISTING SEPERATED BY SPACES
FOR /f "tokens=*delims=_" %%a IN (output.txt) DO (
        SET PDEN=!PDEN! %%a
)

:: ATTEMPTS TO GENERATE A LOG FILE
FOR /f "tokens=*delims=" %%i IN ('set PDEN 2^>nul') DO (
            >%WHERE%PDEN_GEN_LOG.log ECHO 462121    14105618    PD  EN  97240   1   97240               RF  !PDEN!  XML         C       N   N   0
            ECHO [INFO] Generated PDEN_GEN_LOG.log
)

:: PROMPTS USER IF THEY WANT TO SEE THEIR CREATION
ECHO FINISHED
ECHO A new control file has been saved to %WHERE%
SET /P FILESURE=Would you like to view the LOG file you created?(Y/[N])?
IF /I "%FILESURE%" NEQ "Y" GOTO REMOVE
notepad.exe %WHERE%PDEN_GEN_LOG.log

:: REMOVES THE OUTPUT.TXT FILE
:REMOVE
RM %WHERE%output.txt
exit 
```

它做所有事情直到创建点。它采用之前在 output.txt 中生成的列表并将其放在一行中，所以现在我的日志文件看起来像这样：

```
462121  14105618    PD  EN  97240   1   97240               RF   PDEN51505_1_1_N611729_15894285 PDEN51505_1_2_N611729_15894286 PDEN51505_2_1_N599021_15746279   XML         C       N   N   0 
```

最重要的是，每次我执行时 %PDEN% 似乎都会变大。我需要刷新那个变量吗？

把招工广告！

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:48:55.513

我的建议，试试这个：

```
@ECHO OFF & setlocal enabledelayedexpansion
MODE con: cols=125 lines=50
set "where=%cd%"
SET /P "WHERE=Where are the XMLs located (full file path)? (default: %CD%) "
IF "%WHERE%"=="" SET "WHERE=%CD%\"
IF not "%WHERE:~-1%"=="\" SET "WHERE=%WHERE%\"

:: TRAVERSE TO DIRECTORY THE USER JUST INPUT
CD "%WHERE%"

:: delete Logfiles
DEL PDEN_GEN_LOG_*.log >nul 2>&1

:: CREATES A LISTING
set /a filecounter=0
FOR /f "delims=" %%a in ('dir /b /a-d /on *.xml') DO (
set /a logcounter=!filecounter!/25+1
>>PDEN_GEN_LOG_!logcounter!.log ECHO 462121    14105618    PD  EN  97240   1   97240               RF  %%~na  XML         C       N   N   0
set /a filecounter+=1
)
ECHO [INFO] Generated PDEN_GEN_LOG_1.log to PDEN_GEN_LOG_%logcounter%.log

:: PROMPTS USER IF THEY WANT TO SEE THEIR CREATION(S)
ECHO FINISHED
ECHO New control file(s^) created in %WHERE%
SET /P "FILESURE=Would you like to view the LOG file(s^) you created?(Y/[N])? "
IF /I "%FILESURE%" NEQ "Y" exit
for /l %%i in (1,1,%logcounter%) do start "" "notepad.exe" PDEN_GEN_LOG_%%i.log
exit 
```

这使得每 25 个文件的日志（最后一个日志可能包含更少）。您可以在此行中更改此数字：`set /a logcounter=!filecounter!/25+1`。

# c - 利用缓冲区溢出

> ID：16093416
> 
> 赞同：1
> 
> 时间：2013-04-18T21:28:36.837
> 
> 标签：c, buffer, security, buffer-overflow

我遇到了一个有缓冲区溢出缺陷的 C 程序。我们需要让程序以我们的方式工作。根据我的理解，缓冲区溢出会覆盖下一个内存位置。如果我们考虑以下代码，如果密码是goodpassword，程序将授予访问权限。我想利用缓冲区溢出漏洞并将输入作为aaaaaaaaaaaaaaaaaaaaaaa（24 a's）覆盖下一个内存位置，以便程序接受输入授予访问权限。

但是，它无法正常工作，因为我认为该程序正在崩溃并且我无法利用该漏洞。你能告诉我我的方法出了什么问题吗？

```
#include <stdio.h>
#include <string.h>

int IsPasswordOk( ) { 
    char password[13]; 
    gets(password); 
    if(!strcmp(password,"goodpassword"))
        return 1; 
    else
        return 0; 
} 

int main(int argc, char* argv[]) { 
    int pwdStatus; 
    puts("Enter password"); 
    pwdStatus = IsPasswordOk(); 
    if(!pwdStatus) { 
        puts("Access denied!"); 
        return -1; 
    } 
    else puts("Access granted!"); 

    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:18:58.590

溢出不一定总是指向有效位置。假设下一个位置可能位于下一页中并且您无权访问它。这取决于您的操作系统发行版如何处理这种情况。

# mysql - 开源应用服务器解决方案

> ID：16093422
> 
> 赞同：2
> 
> 时间：2013-04-18T21:28:58.097
> 
> 标签：mysql, ubuntu, spring-mvc, jboss, java

一个具有以下技术和组件的项目已经浮出水面：建立一个最初由**Ubuntu**、**JDK**、**JBoss**、**Spring MVC 3.0** + 和**MySQL**组成的 Web 堆栈解决方案。

在计划这个项目时，我一直在努力寻找有关*第一步*、*最佳实践*和*顺序*的以下问题的答案：

**1)** JDK（和 JBoss）是否需要安装为“<strong>root”？（我看过文章提到，除非由于致命的后果绝对必要，否则以 root 操作不是一个好主意。）

**2)** Ubuntu 是否需要安装为**服务器**才能完成这一切，还是也可以安装为**桌面？**我无法确定是否需要在 Linux 之上安装 JBoss 和 MySQL 作为服务器。

**3)**是否需要在 Spring STS 中使用**Maven才能使 JBoss 和 MySQL（以及未来的 Hibernate）成功地协同工作？**

**4)**我的意图是按以下**顺序**安装：a) Ubuntu -> b) Java -> c) JBoss -> d) Spring STS -> 和 e) MySQL。这个序列有什么明显的冲突吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:36:22.557

1.  以root身份安装，为什么不呢？以root身份运行，可能不是一个好主意。
2.  如果你想要一个桌面，安装一个桌面发行版。如果你想要一个服务器，安装一个服务器分发。这不会改变操作系统中可以运行和不能运行的内容。它只会更改默认安装的内容。
3.  Maven 是一个构建工具。JBoss 并不关心您如何构建您的应用程序。它只关心您部署的应用程序是否是有效的 Java EE 应用程序。
4.  不，你需要一个操作系统，所以 Ubuntu 必须是第一位的。JBoss 和 (AFAIK) Spring STS 需要 JRE 才能运行，因为它们是 Java 应用程序，因此应该在它们之前安装 Java。MySQL 独立于 JBoss、STS 和 Java，因此您可以随时安装它。

请注意，如果您只是在这个安装部分上苦苦挣扎，请准备好忍受其余部分。构建 Java EE webapp 并不是小菜一碟，您可能应该找一些有经验的开发人员来帮助您，因为您似乎只是从 Java 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:56:41.323

JBoss 在执行任何操作之前都需要 Java（推荐 Java 7）。我不认为它真的“安装”了，而只是解压到某个目录（即使你从包管理器安装，它只是真的解压了自己）。我质疑您对 Spring 的需求，因为 JBoss 和 Java EE 通常确实可以完成 Spring 所做的一切，而且现在更好。除非您对 Spring 有特定要求，否则我会质疑这种额外的依赖关系。

对于 linux - 从高层次上讲，任何操作系统都可以是“服务器”，它所需要的只是能够提供服务（网页、ssh 连接等）。在 M$ 世界中，操作系统的不同“级别”是根据预期的任务/工作量专门设计的。例如，虽然 Windows 7 确实可以作为服务器运行，但它不是为它设计的，因此可能没有优化或包含帮助实用程序和工具，以使系统管理员的生活更轻松。另一方面，Windows Server 确实包含所有“普通”服务器工具和许多好东西，使维护和设置服务器更容易。

在 linux 领域，这不是这样的事情。Linux 是与裸机等来回交流的内核……发行版制造商将采用它并围绕内核构建操作系统，基本上只是附加他们认为发行版需要的任何软件包……例如 wget，或cat 或任何其他标准用户级应用程序，以及一些非标准的，例如 mysql 或 java 或任何他们想要的。

现在，一些 Linux 发行版将自己定制为“服务器”就绪，而另一些则将自己定制为桌面操作系统。区别？它实际上只是分发制造商决定包含或不包含的任何默认包。例如，绝大多数 linux 服务器都是完全无头运行的，因此绝对没有理由在该系统上安装和/或运行 X11 和庞大的 GUI 环境......这是没有意义的。此外，“普通 joe”用户不需要在他的桌面系统上默认安装 MySQL，因为它只会使他的系统膨胀，而且他可能永远不会使用它。

所以基本上它归结为默认安装的软件包。

一些 Linux 服务器发行版更进一步，在以稳定性和安全性为名进行更新、补丁或新版本时格外小心，而另一方面，大多数桌面发行版的更新更加随意，因为如果它破坏了家庭用户的网络浏览器，这可能不是什么大问题......但是如果服务器更新破坏了网络服务器应用程序堆栈，那么现在这是一个严重的问题。

因此，您会发现像 CentOS（基于上游 RHEL）这样的服务器操作系统在引入桌面操作系统早期获得的“最新和最棒”的功能方面非常缓慢。他们的目标是高安全性和长期稳定性。

现在，对于 Ubuntu。虽然我确定很多人将 Ubuntu 作为他们的服务器操作系统选择（部分原因是亚马逊选择 Ubuntu 作为他们 ECS 云的默认 linux VM），但我真的会质疑这一点。Ubuntu 并不专注于成为服务器。它专注于成为一个伟大的全方位桌面操作系统。是的，LTS 版本旨在实现长期稳定性，但它基于桌面操作系统，所以它仍然不是重点。

恕我直言，我会选择 CentOS，因为它是免费且完全二进制兼容的 RHEL 版本——而 RHEL 是企业级 Linux 服务器的事实标准。但请注意，RHEL 的处理方式与 debian 方式有点不同——所以没有`apt-get`，您必须使用它`yum install`。启动脚本不同，一些做事的方式也不同，但实际上，一旦你了解了 linux，你就是`know`linux。

编辑：还要检查 Jenkins - 它是一个免费的开源持续集成系统，可以在 JBoss 或 Tomcat 或任何其他容器上运行，并且可以自动从存储库（github、git、svn 等）中提取您的代码并编译/打包它然后推送它进行现场部署。您设置您的 ANT 或 Maven 构建脚本，它可以按计划启动，或者您可以配置它。

编辑编辑：我还建议使用 OpenJDK——因为它可能包含在您的包管理器中（几乎适用于每个 disto），并且如果它也在您的包管理器中，它将比 oracle 版本更新。我发现大多数“服务器”发行版都会有 OpenJDK 7，而他们的包管理器中只有 Oracle java 6。此外，通过包管理器安装它将使您更容易保持更新。

# c++ - 计算向量中相同字符串的更简单方法？

> ID：16093423
> 
> 赞同：1
> 
> 时间：2013-04-18T21:29:38.653
> 
> 标签：c++, string, map, vector

作为更大程序的一部分，我正在尝试获取向量中所有相同字符串的数量的输出。经过大量研究，我设法将一些可行的东西放在一起，但看起来很混乱，我想知道是否有更好的方法来做到这一点。

```
#include <vector>
#include <string>
#include <map>
#include <algorithm>
#include <iostream>

using namespace std;

void setMap(string i);
void addMap(string i);
map<string, int> myMap;

int main()
{
    vector<string> myVector;
    string myArray[6]={"foo","foo","bar","roo","foo","bar"};
    for (int i=0; i<6; i++)
    {
        myVector.push_back(myArray[i]);
    }
    for_each (myVector.begin(), myVector.end(), setMap);
    for_each (myVector.begin(), myVector.end(), addMap);
    for (map<string, int, less< string >>::const_iterator iter = myMap.begin();
      iter != myMap.end(); ++iter )
      cout <<iter->first<<'\t'<<iter->second<<endl;
    return 0;
}

void setMap(string i)
{
    myMap[i]=0;
}

void addMap(string i)
{
    myMap[i]++;
} 
```

这段代码运行良好，并为我提供了我想要的输出，但我并不热衷于添加 2 个额外的函数以使其工作或必须使地图成为全局。任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T21:35:33.287

没有额外功能并且没有全局地图的最简单方法是不使用for_each。

```
for_each (myVector.begin(), myVector.end(), setMap);
for_each (myVector.begin(), myVector.end(), addMap); 
```

变成

```
map<string, int> myMap;
for (vector<string>::iterator i = myVector.begin(); i != myVector.end(); ++i)
    myMap[*i]=0;
for (vector<string>::iterator i = myVector.begin(); i != myVector.end(); ++i)
    ++myMap[*i]; 
```

完成后，您还可以删除第一个循环

```
map<string, int> myMap;
for (vector<string>::iterator i = myVector.begin(); i != myVector.end(); ++i)
    ++myMap[*i]; 
```

因为无论如何地图值都会被初始化为零。

是什么让您认为无论如何都必须使用 for_each？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T21:34:12.527

那这个呢？将计数机制封装在单独的函数中以实现可重用性。

```
// Iterator pair based interface
template <class Iterator>
std::map<typename Iterator::value_type,int>
count(Iterator begin, Iterator end) {
    std::map<typename Iterator::value_type,int> counts;
    for (Iterator i = begin; i != end; ++i)
        counts[*i]++;
    return counts;
}

// Sequence interface
template <class Sequence>
inline std::map<typename Sequence::value_type,int>
count(Sequence seq) {
    return count(seq.begin(), seq.end());
} 
```

然后像这样简单地使用它：

```
// C++11
for (const auto & c : count(myVector))
    cout << c->first << '\t' << c->second << endl;

// C++03
std::map<string,int> counts = count(myVector);
for (std::map<string,int>::const_iterator c = counts.begin(), e = counts.end(); c != e; ++c)
    cout << c->first << '\t' << c->second << endl; 
```

[简单的演示](http://ideone.com/SvdwXl)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-18T21:34:46.113

你的`setMap`功能是不必要的。

如果地图的键不存在，请考虑此函数的作用。

```
void addMap(string i)
{
    myMap[i]++;
} 
```

该表达式`myMap[i]`将为您的地图添加一个新键。

由于值类型是`int`，这个新值将是`int()`，这是保证`0`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T21:46:14.583

在 C++11 下，你可以这样做：

```
#include <string>
#include <unordered_map>
#include <iostream>

int main() {

    std::string myArray[6] = {"foo","foo","bar","roo","foo","bar"};

    std::unordered_map<std::string, size_t> m;
    for (const auto& s : myArray)
        ++m[s];

    for (const auto& p : m)
        std::cout << p.first << "\t" << p.second << std::endl;

} 
```

这打印：

```
foo     3
bar     2
roo     1 
```

这是有效的，因为如果还没有，它`m[s]`会自动插入`s`。`m`

使用`std::unordered_map`（哈希表）可能比`std::map`（平衡树）便宜。

* * *

你可以在 C++03 下做一些非常相似的事情，除了上面显示的“for each”循环将被常规的“for”循环替换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T22:19:54.300

```
#include <iostream>
#include <string>
#include <vector>
#include <iterator>
#include <map>

using namespace std;

int main (int argc, char * const argv[]) {

    string myArray[]={"foo","foo","bar","roo","foo","bar"};
    int arr_length = 6;
    vector<string> myVector(myArray, myArray + arr_length);

    //Print contents of vector:
    copy(myVector.begin(), 
         myVector.end(), 
         ostream_iterator<string>(cout, " ")
    );

    cout << endl;

    map<string, int> myMap;

    vector<string>::iterator pos;
    for (pos=myVector.begin(); pos<myVector.end(); ++pos)
    {
        myMap[*pos] += 1;
    }

    map<string, int>::iterator mapPos;
    for (mapPos=myMap.begin(); mapPos != myMap.end(); ++mapPos) {
        cout << "word: " << mapPos->first << "\t"
             << "count: " << mapPos->second << endl;
    }

        return 0;
}

--output:--
foo foo bar roo foo bar 
word: bar   count: 2
word: foo   count: 3
word: roo   count: 1 
```

# c - 在 C 中使用用户定义的名称编写输出文件

> ID：16093424
> 
> 赞同：1
> 
> 时间：2013-04-18T21:29:46.450
> 
> 标签：c

我是 C 新手，正在尝试在程序运行之前定义输出文件名。我收到总线错误这是我的代码：

```
#include <stdio.h>

int main (int argc, const char * argv[]) {
    char fname[128];
    printf("Enter the file name\n");
    scanf("%123s",fname);
    strcat("/Users/user/Desktop/learn/", fname);
    strcat(fname, ".txt");

    FILE *fp;
    fp=fopen(fname,"a");
    fprintf(fp, "Testing... OK I think it worked\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:39:11.110

1.  你没有`#include <string.h>`为`strcat`。
2.  的第一个参数`strcat`必须是指针，而不是字符串文字。
3.  `strcat`本身不安全，请[`strncat`](http://www.cplusplus.com/reference/cstring/strncat/)改用。
4.  不要忘记检查`scanf`and的结果`fopen`。
5.  完成后关闭`fp`。
6.  的签名`main`应该是`int main(int argc, char * argv[])`。

`scanf`通常也不鼓励使用 of ，使用`fscanf`&`sscanf`代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:34:28.620

您在第一次调用 strcat 时使用字符串文字作为目标指针。因此，您将“/Users/user/Desktop/learn/”与 fname 连接起来，并将结果存储在曾经存储过“/Users/user/Desktop/learn/”的位置，这甚至可能是不可写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T22:13:27.073

试试这个，这对我有用..

[`http://cboard.cprogramming.com/c-programming/124576-whats-mean-char*-const*-argv.html`](http://cboard.cprogramming.com/c-programming/124576-whats-mean-char%2a-const%2a-argv.html)

```
#include <stdio.h>
#include <string.h>
int main (int argc, const char*const* argv[]) 
{

char fname[128];
char path[] = "/home/abc/test/";
printf("Enter the file name\n");
scanf("%123s",fname);
strcat(fname,".txt");
strcat(path,fname);
FILE *fp;
fp=fopen(path,"a");    
fprintf(fp, "Testing... OK I think it worked\n");
fclose(fp);    
return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T21:40:45.767

这不是如何`strcat()`工作的。

我看到两种方法：

*   正确使用`fname`，连同文件名输入：

    ```
    char fname[128];
    strcpy(fname, "/Users/user/Desktop/learn/"); // ok as long as you don't make the 128 too small
    char * input = fname + strlen(fname); // now points after the final /
    printf("Enter the file name\n");
    scanf("%123s",  input); // the 123 is probably not correct
    strncat(fname, ".txt", sizeof fname); 
    ```

    并使用它。

    目前，这种方法仍然存在输入限制为 123 字节的问题，这可能太大了，所以最好暂时忘记它。这只是为了得到这个想法。

    也许`fgets()`可能会更好：

    ```
    fgets(input, sizeof(fname)-strlen(fname), stdin); 
    ```

*   使用命令行参数，这将是我最喜欢的方法：

    ```
    // first check if argc is >= 2, i. e. if the caller has supplied an argument
    char fname[128];
    strcpy(fname, "/Users/user/Desktop/learn/");
    strncat(fname, argv[1], sizeof fname);
    strncat(fname, ".txt", sizeof fname); 
    ```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-19T19:49:24.590

感谢大家的评论。这是工作代码：

```
#include <stdio.h>
#include <string.h>
int main (int argc, const char*const* argv[]) 
{
char fname[128];
strcpy(fname, "/Users/user/Desktop/learn/"); 
char * input = fname + strlen(fname); 
printf("Enter the file name\n");
scanf("%s",  input); 
strncat(fname, ".txt", sizeof fname);
printf("The output pathway and file will be called %s\n", fname);
FILE *fp;
fp=fopen(fname,"a");    
fprintf(fp, "Testing... OK I think it worked\n");
fclose(fp);    
return 0;
} 
```

# java - Maven 没有使用 repo1，它会转到 maven.glassfish.org 并且我的构建失败

> ID：16093428
> 
> 赞同：3
> 
> 时间：2013-04-18T21:29:54.977
> 
> 标签：java, maven

我有这个回购部分：

```
<repositories>
    <repository>
        <id>Repo1</id>
        <url>http://repo1.maven.org/maven2</url>
        <releases>
            <enabled>true</enabled>
            <checksumPolicy>fail</checksumPolicy>
        </releases>
    </repository>
    <repository>
        <id>EclipseLink</id>
        <url>http://download.eclipse.org/rt/eclipselink/maven.repo</url>
    </repository>
</repositories> 
```

和这个依赖：

```
 <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-client</artifactId>
        <version>1.9.1</version>
        <scope>compile</scope>
    </dependency> 
```

为什么 Maven 不断地去`download.java.net`and `maven.glassfish.org`？它不在我的任何地方

```
Downloading: http://download.java.net/maven/glassfish//com/ocpsoft/prettyfaces-parent/3.3.3/prettyfaces-parent-3.3.3.pom
[INFO] Unable to find resource 'com.ocpsoft:prettyfaces-parent:pom:3.3.3' in repository Glassfish (http://download.java.net/maven/glassfish/)
Downloading: http://repo1.maven.org/maven2/com/ocpsoft/prettyfaces-parent/3.3.3/prettyfaces-parent-3.3.3.pom
8K downloaded  (prettyfaces-parent-3.3.3.pom)
Downloading: http://download.java.net/maven/glassfish//com/ocpsoft/ocpsoft-parent/2/ocpsoft-parent-2.pom
[INFO] Unable to find resource 'com.ocpsoft:ocpsoft-parent:pom:2' in repository Glassfish (http://download.java.net/maven/glassfish/)
Downloading: http://repo1.maven.org/maven2/com/ocpsoft/ocpsoft-parent/2/ocpsoft-parent-2.pom
1K downloaded  (ocpsoft-parent-2.pom)
Downloading: http://repo1.maven.org/maven2/com/sun/jersey/jersey-client/1.9.1/jersey-client-1.9.1.pom
6K downloaded  (jersey-client-1.9.1.pom)
Downloading: http://repo1.maven.org/maven2/com/sun/jersey/jersey-project/1.9.1/jersey-project-1.9.1.pom
17K downloaded  (jersey-project-1.9.1.pom)
Downloading: http://download.java.net/maven/2/net/java/jvnet-parent/1/jvnet-parent-1.pom
[INFO] Unable to find resource 'net.java:jvnet-parent:pom:1' in repository m2.java.net (http://download.java.net/maven/2)
Downloading: http://repository.jboss.org/nexus/content/groups/public//net/java/jvnet-parent/1/jvnet-parent-1.pom
[INFO] Unable to find resource 'net.java:jvnet-parent:pom:1' in repository repository.jboss.org (http://repository.jboss.org/nexus/content/groups/public/)
Downloading: http://maven.glassfish.org/content/groups/glassfish/net/java/jvnet-parent/1/jvnet-parent-1.pom
185b downloaded  (jvnet-parent-1.pom)
[WARNING] *** CHECKSUM FAILED - Checksum failed on download: local = '6c9fd3d150b8a5f0ca676f49b8ed603793cabebb'; remote = '<html>
<head><title>301' - RETRYING
Downloading: http://maven.glassfish.org/content/groups/glassfish/net/java/jvnet-parent/1/jvnet-parent-1.pom
185b downloaded  (jvnet-parent-1.pom)
[WARNING] *** CHECKSUM FAILED - Checksum failed on download: local = '6c9fd3d150b8a5f0ca676f49b8ed603793cabebb'; remote = '<html>
<head><title>301' - IGNORING
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).

Project ID: com.sun.jersey:jersey-project:pom:1.9.1

Reason: Cannot find parent: net.java:jvnet-parent for project: com.sun.jersey:jersey-project:pom:1.9.1 for project com.sun.jersey:jersey-project:pom:1.9.1 
```

编辑：

作为调试步骤，我已经破坏了〜/ .m2 ...我不知道发生了什么，但是这个构建曾经可以工作。

铁道部编辑：

好的，所以我应该提到，存储库部分在父 pom 中，而依赖项在子 pom 中。如果我将配置放入一个大 pom 中，它就可以工作。两个pom，它失败了。有没有搞错？？

甚至更多编辑：

在 maven 获得额外存储库的地方，这绝对是疯狂的，我什至检查了工件 pom。无论如何，这是我对无法解释的行为的解决方案。把它放在我的 settings.xml 中：

```
<settings>
  <mirrors>
    <mirror>
      <id>central-mirror</id>
      <url>http://repo.maven.apache.org/maven2</url>
      <mirrorOf>*,!eclipselink</mirrorOf>
    </mirror>
  </mirrors>
</settings> 
```

这迫使 maven 使用中央，除了当我使用 eclipselink repo 时。叹息，啊！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:18:18.073

在 maven 获得额外存储库的地方，这绝对是疯狂的，我什至检查了工件 pom。无论如何，这是我对无法解释的行为的解决方案。把它放在我的 settings.xml 中：

```
<settings>
  <mirrors>
    <mirror>
      <id>central-mirror</id>
      <url>http://repo.maven.apache.org/maven2</url>
      <mirrorOf>*,!eclipselink</mirrorOf>
    </mirror>
  </mirrors>
</settings> 
```

这迫使 maven 使用中央，除了当我使用 eclipselink repo 时。这并不能回答我的问题，但无论出于何种疯狂原因，maven 都可以联系这些外部存储库，这是一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:51:53.633

也可以在您的 settings.xml 和其他依赖项的 pom 中指定存储库。无论您直接或间接命名哪些存储库，maven 都不保证这些存储库的搜索顺序，如果 maven 碰巧在一个存储库中找到了错误的工件，它会失败（显然）并且不会尝试任何其他存储库。

如果您可以找到给您带来麻烦的工件的好版本，您可以尝试手动将该工件放置在本地 .m2 存储库中。

# c# - 控件不可见时视觉状态不变

> ID：16093430
> 
> 赞同：1
> 
> 时间：2013-04-18T21:29:55.500
> 
> 标签：c#, xaml, windows-store-apps, winrt-xaml

我有一个按钮控件，它有 2 种视觉状态；说“简单”和“复杂”；前者是默认值。最初控件是隐藏的。

当我通过*VisualStateManager*将视觉状态设置为“复杂”时，我得到`false`了`true`是控件是否至少显示一次；如果是这样，则尊重视觉状态更改，否则它总是被忽略，直到它显示一次。

如何为尚不可见的控件设置视觉状态？

```
<Grid x:Name="LayoutRoot"
      Background="LightBlue">
  <Grid.Resources>
    <Style x:Key="MyButton"
           TargetType="Button">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Grid>
              <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="MyStates">
                  <VisualState x:Name="Simple" />
                  <VisualState x:Name="Complex">
                    <Storyboard>
                      <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ellipse"
                                                     Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)">
                        <DiscreteObjectKeyFrame KeyTime="10"
                                                Value="#00000000" />
                      </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                  </VisualState>
                </VisualStateGroup>
              </VisualStateManager.VisualStateGroups>
              <Ellipse x:Name="ellipse"
                       Fill="#FF0E0EF5"
                       Stroke="Black" />
              <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
            </Grid>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Grid.Resources>
  <Button x:Name="btnStuff"
          Content="Click Me!"
          Visibility="Collapsed"
          Style="{StaticResource MyButton}" />
  <StackPanel>
    <Button x:Name="btnShow"
            Content="Show"
            Click="btnShow_Click" />
    <Button x:Name="btnVisual"
            Content="Visual Change"
            Click="btnVisual_Click" />
  </StackPanel>
</Grid> 
```

**后面的代码：**

```
 bool fOriginalState = true;

    private void btnShow_Click(object sender, RoutedEventArgs e)
    {
        btnStuff.Visibility = btnStuff.Visibility == Windows.UI.Xaml.Visibility.Visible ? Windows.UI.Xaml.Visibility.Collapsed : Windows.UI.Xaml.Visibility.Visible;
    }

    private void btnVisual_Click(object sender, RoutedEventArgs e)
    {
        string visualState = fOriginalState ? "Complex" : "Simple";
        fOriginalState = !fOriginalState;
        bool fSet = VisualStateManager.GoToState(btnStuff, visualState, false);
        System.Diagnostics.Debug.WriteLine(fSet.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T14:01:37.260

MSDN[说](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.loaded.aspx)

> 从 Loaded 处理程序调用 VisualStateManager.GoToState 方法也是合适的，以便设置模板中定义的初始视图状态。

在`FrameworkElement.Loaded`事件处理程序页面下；`Visibility="Collapsed"`但是，如果在 XAML 中硬编码，在此处设置所需的视觉状态也会被忽略。

此问题背后的原因是，当控件从应用程序的开头`Visibility`设置为`Collapsed`正确时。然后它永远不会被加载；在运行时将其延迟到属性设置为`Visible`；一旦设置好，它就会被加载，通过使控件出现在 VisualTree 中。在出现在可视化树中之前，控件的任何可视化状态更改请求都会被忽略。

我发现的解决方法是不要`Collapsed`在 XAML 中设置控件；由于控件是可见的，它被加载并在加载的事件处理程序中，可以设置`Visibility`为`Collapsed`，所有对 VSM.GotoState 的调用都将得到尊重，因为控件现在已经在 VisualTree 中。

希望这可以帮助像我这样摸索解决方案的人。

# python - Python 通用缓冲区数据类型访问

> ID：16093434
> 
> 赞同：1
> 
> 时间：2013-04-18T21:30:05.453
> 
> 标签：python, arrays, polymorphism, byte, bits

在 Python 中，是否有任何现有的基于库的方法可以多态地将缓冲区视为任何数据类型的数组——包括位、字节、字、双字等——而不复制缓冲区？我有一个应用程序，我希望能够将流中的任意位范围设置为任何无符号值。

例如，如果以字节为单位的缓冲区是`[0x01, 0x02, 0x03, 0x04, 0x05, 0x06 ...]`，并且我想将绝对 little-endian 位 27:11 设置为无符号 little-endian 值 54321，则以字节为单位的缓冲区变为`[0x01, 0x8A, 0xA1, 0x06, 0x05, 0x06 ...]`. 应该抽象出读取-修改-写入字节的低级细节。然后我可能想要一个 WORD (uint16) 数据视图，`[0x8A01, 0x06A1, 0x0605, ...]`并以这种方式更改一些元素。

是否有任何好的公共 Python 库提供此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:49:27.803

哦，你的意思是类型是可变的？

井列表是可变的，那么为什么不使用它们呢？

但如果你真的想使用比特，这里有一个例子 [http://wiki.python.org/moin/BitArrays](http://wiki.python.org/moin/BitArrays)

它使用 BitArrays - 您应该能够从示例中找出所有内容。

[编辑]：用于在任何你想要的地方插入位：

```
import array
a=array.array('I')
a.append(5) #adds 1 element

a.extend([2,3,3,4,5,5,4]) #adds another 7 elements

a[3:6] = [6,6,6] #replaces 3 elements with the 3 6s 
```

这就是你所需要的吗？

# java - Android：两个 ScaleAnimation 依次执行

> ID：16093436
> 
> 赞同：0
> 
> 时间：2013-04-18T21:30:20.637
> 
> 标签：java, android

我想为 ImageView 垂直缩放动画，等待，然后在同一个 ImageView 上执行另一个缩放。我已经简化了下面的代码，但这基本上是我想要做的：

```
ScaleAnimation animate = new ScaleAnimation(1,1,1,2);
animate.setDuration(1000);
animate.fillAfter(true);

ScaleAnimation animateAgain = new ScaleAnimation(1,1,2,1);
animate.setDuration(1000);
animate.fillAfter(true);

view.startAnimation(animate);
view.startAnimation(animateAgain); 
```

我尝试了多种等待第一个动画完成的方法（Thread.sleep 等），但似乎没有任何区别。我假设动画是在 onDraw 方法中呈现的还是什么？我不完全确定缩放动画是如何工作的，所以我无法真正掌握如何解决我的问题。

做我想要完成的事情的最简单方法是什么？

多谢你们 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:40:16.393

有几种方法：

附加[`AnimationListener`](http://developer.android.com/reference/android/view/animation/Animation.AnimationListener.html)到您的动画。

```
ScaleAnimation animate = new ScaleAnimation(1,1,1,2);
animate.setDuration(1000);
animate.fillAfter(true);
animate.setAnimationListener(new AnimationListener() {

    @Override
    public void onAnimationEnd(Animation animation) {
        ScaleAnimation animateAgain = new ScaleAnimation(1,1,2,1);
        animateAgain.setDuration(1000);
        animateAgain.fillAfter(true);
        view.startAnimation(animateAgain);
    }

    @Override
    public void onAnimationRepeat(Animation animation) {
    }

    @Override
    public void onAnimationStart(Animation animation) {
    }});

view.startAnimation(animate); 
```

或者，您可以为第二个动画设置动画延迟。

```
ScaleAnimation animateAgain = new ScaleAnimation(1,1,2,1);
animateAgain.setDuration(1000);
animateAgain.fillAfter(true);
animateAgain.setStartOffset(firstAnimationDuration + delay); 
```

# scala - 从另一个模板播放框架调用辅助函数

> ID：16093439
> 
> 赞同：4
> 
> 时间：2013-04-18T21:30:34.390
> 
> 标签：scala, playframework

我有一个帮助文件 utils.scala.html，如下所示：

```
@renderTableRow(columnTag: String, columns: Seq[String]) = {
<tr>
@for(column <- columns) {
    <@columnTag>
        @column
    </@columnTag>
}
</tr>
} 
```

我想从我的其余视图文件中调用这个帮助函数来创建表头。

```
@import views.html.mycommon.utils

@renderQuotesTable() = {
<table class="table table-bordered table-striped">
  <thead>
       @utils.renderTableRow("th", Seq("Name", "Date of Birth", "Age"))
  </thead>
  <tbody>
  </tbody> 
```

}

但是，我得到以下错误

值 renderTableRow 不是对象 views.html.mycommon.utils 的成员。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:36:46.140

您不能导入另一个模板的声明函数。执行`sbt doc`并在生成的 Scala Doc 中没有 util 对象中的 renderTableRow 线索。正如您在模板的生成源代码中看到的那样，“renderTableRow”被包装到 apply 方法中：“target/scala-2.10/src_managed/main/views/html/mycommon/utils.template.scala”。

对于要在另一个模板中使用的每个函数，您必须在真正的 Scala 单例对象中创建模板或函数。

# sharepoint - SSRS 每两周安排一次

> ID：16093441
> 
> 赞同：0
> 
> 时间：2013-04-18T21:30:43.720
> 
> 标签：sharepoint, reporting-services, scheduling

我有共享点集成模式的报告服务。我创建了一个时间表，设置如下：

```
StartDate        2013-03-01 11:55:00.000
EndDate          NULL
EventType        TimedSubscription
RecurrenceType   4
MinutesInterval  NULL
DaysInterval     NULL
WeeksInterval    2
DaysOfWeek       32
DaysOfMonth      NULL
Month            NULL
MonthlyWeek      NULL
LastRunTime      2013-04-05 11:56:04.670 
```

据我所知，这意味着它应该从 2013 年 3 月 1 日开始，每两周的每个星期五上午 11:55 运行。

也就是说，我预计它应该在 3 月 1 日、3 月 15 日、3 月 29 日和 4 月 12 日运行。但是，从 LastRunTime 可以看出，它实际上是在 4 月 5 日运行的。

我会使用什么设置来让它每隔一个星期五运行一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:43:55.920

当使用上述设置创建计划时，Reporting Services 将从 StartDate 开始寻找下一个星期五的运行时间（在 Schedule 表中列为 NextRunTime）。如果 StartDate 是将来，那将是 NextRunTime。但是，如果 StartDate 是过去的，则 NextRunTime 将设置为下一个可用的星期五，而不是 StartDate 两周后的星期五。

我认为在您的情况下发生的情况是，时间表是在 2013 年 1 月 3 日之后但 2013 年 8 月 3 日星期五之前创建的。这会将 NextRunTime 设置为 2013 年 8 月 3 日星期五，因此计划将在以下日期执行：

*   2013 年 8 月 3 日
*   22/3/2013
*   2013 年 5 月 4 日

这将解释您的 LastRunTime 为 2013 年 5 月 4 日。如果您查看 ReportServer 中的 Schedule 表，我敢打赌这个计划的 NextRunTime 现在（截至 23/4）将是 2/5/2013。

要纠正此问题，请通过设置新的开始日期来修改您的日程安排，确保该日期在您希望日程安排运行的第一个星期五之前（您可以通过查看日程安排表中的 NextRunTime 来仔细检查这一点）。

# javascript - 使用 setTimeout 和 clearTimeout 设置行为？

> ID：16093443
> 
> 赞同：-1
> 
> 时间：2013-04-18T21:30:53.870
> 
> 标签：javascript, jquery

我创建了一个 JQuery 工具提示插件，但我遇到了问题。

我需要能够将鼠标移到工具提示上...

我尝试使用 setTimeout 和 clearTimeout 来完成这项工作，但没有运气。

我在这里有一个工作版本：http: [//www.codepen.io/mdmoura/pen/KdyJH](http://www.codepen.io/mdmoura/pen/KdyJH)

重要的代码在 Mouse Enter 事件的结尾和 Mouse Leave 事件中。

这是插件代码：

```
// JQuery
(function ($) {

  // Tooltip
  $.fn.Tooltip = function (options) {

    var defaults = {          
      class: 'Tooltip',
      content: '',
      delay: [200, 200],
      cursor: false,
      offset: [0, 1],
      hide: function ($element, $tooltip) {
        $tooltip.fadeOut(200);
      },
      show: function ($element, $tooltip) {
        $tooltip.fadeIn(200);
      }
    };

    var options = $.extend({}, defaults, options);

    var identity = "Tooltip_" + Math.floor(Math.random() * (9999 - 2000 + 1) + 2000);

    var info = { ready: false, shown: false, timer: null, title: '' };

    $(this).each(function (e) {     

      var $this = $(this);
      info.title = $this.attr('title') || '';

      // Mouse enter           
      $this.mouseenter(function (e) {                  

        if (info.ready) {

          var $tooltip = $("#" + identity);

        } else {

          var $tooltip = $("<div>").attr("id", identity).attr("class", options.class).appendTo('body');

          $tooltip.html(options.content != '' ? (typeof options.content == 'string' ? options.content : options.content($this, $tooltip)) : this.title);

          info.ready = true;
          $this.attr('title', '');

        }

        if (options.cursor) {

          var position = [e.clientX + options.offset[0], e.clientY + options.offset[1]];

        } else {

          var coordinates = $this[0].getBoundingClientRect();

          var position = [

            (function () {

              if (options.offset[0] < 0)
                return coordinates.left - Math.abs(options.offset[0]) - $tooltip.outerWidth();
              else if (options.offset[0] === 0)
                return coordinates.left - (($tooltip.outerWidth() - $this.outerWidth()) / 2);
              else
                return coordinates.left + $this.outerWidth() + options.offset[0];

            })(),

            (function () {

              if (options.offset[1] < 0)
                return coordinates.top - Math.abs(options.offset[1]) - $tooltip.outerHeight();
              else if (options.offset[1] === 0)
                return coordinates.top - (($tooltip.outerHeight() - $this.outerHeight()) / 2);
              else
                return coordinates.top + $this.outerHeight() + options.offset[1];

            })()

          ];

        }

        $tooltip.css({ left: position[0] + 'px', top: position[1] + 'px' });

        // HERE THE TOOLTIP IS DISPLAYED
        timer = window.setTimeout(function () {
          options.show($this, $tooltip.stop(true, true));
        }, options.delay[0] || 0);

        // THIS IS THE EVEN WHEN THE MOUSE MOVES OVER THE TOOLTIP.
        // IT SHOULD CANCEL THE HIDE CALL OF THE TOOLTIP.
        // AFTER THE MOUSE MOVES AWAY FROM THE "A" TAG THERE SHOULD BE A DELAY.
        // THE DELAY WOULD ALLOW THE MOUSE TO MOVE TO THE TOOLTIP.
        // IN THAT CASE THE HIDE CALL SHOULD BE CANCELED.
        $("#" + identity).mouseenter(function() {
          window.clearTimeout(timer);
          timer = null;
        });

        // HERE THE TOOLTIP GETS HIDDEN WHEN THE MOUSE MOVES AWAY FROM IT
        $("#" + identity).mouseleave(function () {
          timer = setTimeout(function () {
            options.hide($this, $tooltip);
          }, options.delay[1]);
        });

      }), // Mouse enter

      // HERE THE TOOLTIP GETS HIDDEN WHEN THE MOUSE MOVES AWAY FROM THE "A" TAG
      // WHEN THE MOUSE MOVES OVER THE TOOLTIP THIS SHOULD BE CANCELED.
      $this.mouseleave(function (e) {
        window.clearTimeout(timer);
        timer = null;
        options.hide($this, $("#" + identity).stop(true, true));
      }) // Mouse leave               

    }); // Each

  }; // Tooltip

})(jQuery); // JQuery 
```

请记住，我在以下位置有工作示例： http: [//www.codepen.io/mdmoura/pen/KdyJH](http://www.codepen.io/mdmoura/pen/KdyJH)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:56:07.350

在链接上`mouseleave`，您必须设置隐藏工具提示的超时时间（这样它就不会立即隐藏，您将有一些时间悬停它），在工具提示上`mouseenter`，您必须清除该超时，这样它就不会因此而隐藏（你已经做了第二部分）。

检查这个：

[http://www.codepen.io/anon/pen/lagLb](http://www.codepen.io/anon/pen/lagLb)

# php - 如何从 MySQL 表中动态获取 select 标记的值

> ID：16093447
> 
> 赞同：0
> 
> 时间：2013-04-18T21:30:57.800
> 
> 标签：php, html, mysql

感谢您的光临，如果这个问题似乎很简单，我很抱歉，因为我对 php 有点陌生。我正在尝试做一个学校项目，我现在的问题是我似乎无法获得下拉列表的值。我一直在尝试在这里搜索每个论坛和一些类似的问题，但它们似乎只显示了我如何用数据库值填充下拉列表。

填充下拉菜单的代码正在运行，但记录所选值对我不起作用。

这是我的下拉菜单的 php 代码：

```
<div class="panel">
    <label class="panelname">Category:</label>
    <select name="category" class="signup_field">
        <option>Select One</option>
        <? // retrieve all the categories and add to the pull down menu
        $query = 'SELECT category_id, name FROM category ORDER BY name ASC';
        $request = mysqli_query($dbc, $query);
        while ($row = mysqli_fetch_array($request, MYSQLI_NUM)) {
            $cat_id = $row[0];
            echo "<option value=\"row[0]\"";
            //check for stickyness:
            if (isset($_POST['category']) && ($_POST['category'] == $row[0])) {
                echo ' selected="selected"';
                //$_POST[]
            } echo ">$row[1]</option>\n";
        }
        ?>
    </select>
    <? if (array_key_exists('category', $add_product_errors)) echo '<label class="error">' . $add_product_errors['category'] . '</label>'; ?>
</div> 
```

这是我的验证代码的一部分：-

```
// Check for a form submission:
if ($_SERVER['REQUEST_METHOD'] == 'POST') {

// Check for a category:
if (!isset($_POST['category']) || !filter_var($_POST['category'], FILTER_VALIDATE_INT, array('min_range' => 1))) {
    $add_product_errors['category'] = 'Please select a category!';
} 
..... // other codes for validation (Eg: if (empty($add_product_errors)) { proceed to query} ) 
```

我不知道似乎是什么问题，但是 $_POST['category'] 中没有记录值供我保存到 MySQL 中，并且我不断收到 Please select a category 错误。

感谢大家的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:36:54.260

你的问题似乎是`echo "<option value=\"row[0]\"";`。你想用

```
echo "<option value=\"$row[0]\""; 
```

`echo "<option value=\"row[0]\"";``row[0]`只是在那里放一个字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:57:09.917

谢谢，我似乎已经解决了问题..

我似乎已经删除了行 [0] 中的 ($) 行，以便正确读取它。只需将 $ 放在行 [0] 上：

```
echo "<option value=\"row[0]\""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T04:53:56.887

我曾经解决过这个问题......在你的情况下。

```
while ($row = mysqli_fetch_array($request, MYSQLI_NUM)) {
        $cat_id = $row[0];
        $str = null;
        if (isset($_POST['category']) && ($_POST['category'] == $row[0])) {
                $str = 'selected="selected"';
        }
        echo '<option value="'.$row[0].'" '.$str.'>'.$row[1].'</option>';
    } 
```

# c# - 仅将构造函数公开给基类，可能吗？

> ID：16093448
> 
> 赞同：1
> 
> 时间：2013-04-18T21:30:59.490
> 
> 标签：c#, generics, inheritance, visibility, access-modifiers

```
public class Base<S>
{
    public static Derived<S, T> Create<T>()
    {
        return new Derived<S, T>(); //if not public, I wont get it here.
    }
}

public class Derived<S, T> : Base<S>
{
    public Derived() //the problem, dont want it public
    {

    }
} 
```

这是我得到的基本结构。

要求：

1）我根本不希望`Derived<,>`构造调用`Derived<,>`类的实例，无论是通过构造函数还是静态方法。我希望它只能通过`Base<>`. 所以这就出来了：

```
public class Derived<S, T> : Base<S>
{
    Derived()
    {

    }

    public static Derived<S, T> Create()
    {
        return new Derived<S, T>();
    }
} 
```

2）`Derived<,>`类本身必须是公共的（这意味着我不能私有嵌套`Derived<,>`在里面`Base<>`）。只有这样我才能`Derived<,>`从`Create`.`Base<>`

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:33:38.327

您可以制作派生类的构造函数`internal`，如

```
public class Base<S>
{
    public static Derived<S, T> Create<T>()  // visible externally
    {
        return new Derived<S, T>(); 
    }
}

public class Derived<S, T> : Base<S>
{
    internal Derived() // not visible outside the current assembly
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:46:03.677

反射！

```
void Main()
{
    Derived dr = Base.GetDerived<Derived>();
}

public class Base
{
    public int ID { get; set; }
    public Base()
    {

    }

    public static T GetDerived<T>() where T : Base
    {
        T toReturn = (T)typeof(T).GetConstructor(BindingFlags.NonPublic | BindingFlags.Instance, null, Type.EmptyTypes, null).Invoke(null);
        return toReturn;
    }

}

public class Derived : Base
{
    private Derived()
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:41:33.777

我通过这种方式实现了我的要求：

```
public abstract class Base<S>
{
    public static Derived<S, T> Create<T>() 
    {
        return new ReallyDerived<S, T>(); 
    }

    class ReallyDerived<T> : Derived<S, T>
    {
        public ReallyDerived()
        {

        }
    }
}

public abstract class Derived<S, T> : Base<S>
{

} 
```

现在这有效..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T22:24:30.973

我会声明一个公共接口，并将实现设为私有`Base`：

```
public class Base<S>
{
    public static IFoo<S, T> Create<T>()
    {
        return new Derived<T>(); //if not public, I wont get it here.
    }

    // Only generic in T, as we can use S from the containing class
    private class Derived<T> : Base<S>, IFoo<S, T>
    {
        public Derived()
        {
            ...
        }
    }
}

public interface IFoo<S, T>
{
    // Whatever members you want
} 
```

# haskell - 在haskell和ghci中生成范围内的随机数列表时输入问题

> ID：16093451
> 
> 赞同：1
> 
> 时间：2013-04-18T21:31:10.427
> 
> 标签：haskell, recursion, random, range

嘿嘿stackoverflowers，

作为一名 PHP 开发人员，我学到了很多关于编码的知识。用于使用 Python 进行开发，Python 是一种非常容易学习的编码语言。不是在大学里，我必须用 Haskell 写一些代码，这对我来说真的很不一样。

我们的任务之一是编写一个随机生成器。我可以解释一下：

我的想法是生成一个带有随机数的列表。

让我们说：

```
import Control.Monad (replicateM)
import System.Random

// max random numbers
maxInt = 5
// list
randList = replicateM (fromIntegral maxInt) (randomRIO(1, 6)) 
```

此代码在 GHCI 中使用`let`定义`maxInt`and可以正常工作`randList`，但在我`.hs`要解释的文件中，它不起作用..

这里的错误是：

```
 Ambiguous type variable `a0' in the constraints:
  (Num a0)
    arising from the literal `1' at code.hs:11:59
  (Random a0)
    arising from a use of `randomRIO'
    at code.hs:11:49-57
Possible cause: the monomorphism restriction applied to the following:
  randList :: IO [a0] (bound at code.hs:11:1)
Probable fix: give these definition(s) an explicit type signature
              or use -XNoMonomorphismRestriction
In the expression: 1
In the first argument of `randomRIO', namely `(1, 6)'
In the second argument of `replicateM', namely `(randomRIO (1, 6))'
Failed, modules loaded: none. 
```

我尝试了非常不同的事情，比如

```
import System.Random

addToList :: Int -> Int
addToList 0 = [randomRIO(1, 6)]
addToList n = [randomRIO(1, 6)] ++ addToList (n-1) 
```

但我对 Haskell 和 PHP OOP 程序员真的很陌生，没有整数、浮点数、列表、数组的类型问题，Haskell 对我来说真的很愚蠢；）

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T21:59:14.857

发生此错误是因为在 Haskell 中重载了数字文字，因此仅写入`1`可能意味着它是 a `Int`、 a`Double`或其他数字类型，具体取决于上下文。如果它没有完全由上下文确定，Haskell 将尝试从默认列表中选择一个类型，但只有当这被认为是*安全的¹*时，即当涉及的唯一类型类是标准类型时。

`Random`不是标准类型类之一，这就是为什么它不会自行选择`Integer`为默认值的原因。您必须自己添加类型注释：

```
randList = replicateM (fromIntegral maxInt) (randomRIO (1 :: Integer, 6)) 
```

或者

```
randList :: IO [Integer] 
randList = replicateM (fromIntegral maxInt) (randomRIO (1, 6)) 
```

[GHCi 对此没有那么严格](http://www.haskell.org/ghc/docs/latest/html/users_guide/interactive-evaluation.html#extended-default-rules)，这就是它在那里工作的原因。

[¹用户定义的类通常可能为不同的类型做完全不同的事情。]

# python - 在阅读文本时从同一行继续

> ID：16093452
> 
> 赞同：1
> 
> 时间：2013-04-18T21:31:17.217
> 
> 标签：python, file-io, text-files

我正在一个学校项目中从文本文件中提取特定行。我用方法创建了一个类。代码得到了我现在想要的行，但它不会继续得到另一个行块。我正在尝试修改我的代码以使其继续执行此过程，直到文件的 ens 为止。我的具体问题是如何制作`lines[i]`不是每次都从零开始，而是从最后一个方法停止的地方继续。（我可以保存`i` 值但不知道如何将`i`值传递给以下方法）：

```
import re

f=open("C:/Users/zeretti/Google Drive/IUPUI/2nd semester/230/proejct/textout.txt","r")
lines = f.readlines()

f.close()

class Text(object):
    def __init__(self,
        startline=0, i=0, endline=0, keepgoing=True, current=0, metaline=0,
        matchTotal="", printedLines=0, h=0):
        object.__init__(self)
        #build all your proprties here self.something
        self.startline = startline
        self.endline = endline
        self.i = i
        self.keepgoing=keepgoing
        self.current=current
        self.metaline=metaline
        self.printedLine=printedLines
        self.h=h
        self.setCurrent()

    def processing(self):
        keepgoing=True
        self.current=self.i
        while keepgoing:

            if 'Processing' in lines[self.current]:

                self.startLine=self.current
                processing =lines[self.current].strip('Processing 00000000.tx.1: ')
                print processing #(sentence of process)
                #print "it's in index %d" %self.startLine

            self.current=self.current+1

        return ""

    def Meta_Candidates(self):
        keepgoing=True

        self.current=self.i

        while keepgoing:

            if 'Meta Candidates' in lines[self.current]:
                self.metaline=self.current
                phrase=lines[self.current-3]
                print phrase  #(the candidiate sentence)
                total=re.search('\d',lines[self.current], re.S)
                self.matchTotal=total.group()
                self.matchTotal=int(self.matchTotal)
                #print self.matchTotal
                keepgoing=False
            self.current=self.current+1

        return ""

    def printed_lines(self):

        keepgoing=True
        self.current=self.i-1
        while keepgoing:

            if 'Meta Candidates' in lines[self.current]:

                self.printedLines=lines[self.current+self.matchTotal]
                print self.printedLines
                #print self.matchTotal
                self.matchTotal=self.matchTotal-1

                if self.matchTotal==0:
                    keepgoing=False
            self.current=self.current+1
            self.h=self.current

        return ""

    def setCurrent(self):
        if self.current==0:
            print '0'
            pass
        elif self.current>0:
            self.current=self.h
            print 'above 0'
        return self.current

def main():
    for c in range (3):

        output=Text()

        output.processing()
        output.Meta_Candidates()
        output.printed_lines()
        output.setCurrent()

main() 
```

# javascript - 没有方法“setMaxListeners”错误

> ID：16093457
> 
> 赞同：5
> 
> 时间：2013-04-18T21:31:25.487
> 
> 标签：javascript, node.js, request

根据[这里的这个问题，](https://stackoverflow.com/questions/8313628/node-js-request-how-to-emitter-setmaxlisteners)我需要打电话`request.setMaxListeners(0)`来解决所描述的问题。

当我尝试这样做时：

```
var request = require('request');
request.setMaxListeners(0); 
```

我收到以下错误消息：

```
request.setMaxListeners(0);
        ^ TypeError: Object function request(uri, options, callback) {   if (typeof uri === 'undefined') throw new Error('undefined is not a valid uri or options object.')   if ((typeof options === 'function') && !callback) callback = options   if (options && typeof options === 'object') {
    options.uri = uri   } else if (typeof uri === 'string') {
    options = {uri:uri}   } else {
    options = uri   }

  options = copy(options)

  if (callback) options.callback = callback   var r = new Request(options)   return r } has no method 'setMaxListeners'
    at Object.<anonymous> (/home/vagrant/twitter/test.js:3:9)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Function.Module.runMain (module.js:497:10)
    at startup (node.js:119:16)
    at node.js:901:3 
```

`setMaxListeners`使用请求模块时如何正确调整默认值？

**节点--版本：0.10.4**
**请求模块版本：2.16.6**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T00:36:29.540

## 编辑

经过一番讨论，我认为你正在尝试做这样的事情，在“setMaxListeners”之后

```
var request = require('request');

// this will fail
request.setMaxListeners(0);

request('http://www.google.com', function (error, response, body) {
  // do something ...
}) 
```

## 一步步

```
var request = require('request'); 
```

请求模块是必需的。该模块导出[函数 request](https://github.com/mikeal/request/blob/master/index.js#L1209)。

此函数**不**继承自[EventEmitter——](http://nodejs.org/api/events.html#events_class_events_eventemitter) 一个内部节点“类”——因此它没有[“setMaxListeners 方法”](http://nodejs.org/api/events.html#events_emitter_setmaxlisteners_n)。

考虑到这一点，以下行将失败

```
request.setMaxListeners(0); 
```

您需要一个[Request 对象](https://github.com/mikeal/request/blob/master/index.js#L100)，它[继承自 EventEmitter](https://github.com/mikeal/request/blob/master/index.js#L122)并具有所需的方法。

要获得一个，只需调用请求函数。在此函数返回的值上，您可以调用“setMaxListeners”。

```
var request_object = request('http://www.google.com')
request_object.setMaxListeners(0) 
```

如果我们链接调用更好

```
request('http://www.google.com').setMaxListeners(0) 
```

# 警告

我**完全不建议**删除最大侦听器限制。某种无限循环可能是问题 - 可能每个“请求”事件都绑定了一个监听器 - 抛出一个“太多的监听器绑定”错误。**此错误是检测内存泄漏的有效方法，因此我建议提高一点“maxListeners”限制，而不是将其设置为“unlimited”**。

为此，请传递一个 int != 0。请注意，默认值为 10。

```
request(
  //
  // request stuff goes here
  //
).setMaxListeners(20) 
```

# 答案

```
var request = require('request');

request('http://www.google.com', function (error, response, body) {
  //
  // do something ...
  //
}).setMaxListeners(20) 
```

# php - 会话在 Chrome 和 Firefox 上不起作用

> ID：16093458
> 
> 赞同：0
> 
> 时间：2013-04-18T21:31:26.600
> 
> 标签：php

我在本地机器上（127.0.0.1） 在 login.php 上，我创建了一个会话变量，从数据库中提取值

```
$_SESSION['user_id'] = $row['user_id']; 
```

在upload.php 我调用变量

```
session_start();
$a = $_SESSION['user_id']; 
```

并在查询中在 WHERE 上使用变量：

```
$result = mysql_query("SELECT * FROM users WHERE user_id='" . $_SESSION['user_id'] . "'");
$result = mysql_query("SELECT * FROM users WHERE user_id='" . $_SESSION['user_id'] . "'"); 
```

问题是，这两个查询都在 Internet Explorer 上运行良好，但在 Chrome 和 Firefox 上却不行。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:39:02.860

您应该始终`session_start();`在使用 $_SESSION 的每个页面的头部包含 - 除非它不能正常工作 - 所以在 login.php 中也将它放在头部

# android - SQLite 数据库中字符串格式的模糊问题

> ID：16093465
> 
> 赞同：0
> 
> 时间：2013-04-18T21:31:47.527
> 
> 标签：android, string-formatting

我很欣赏我的问题有很多有用的堆栈问题和答案，但我遇到了过去没有遇到的问题。

**问题：**

我正在使用光标在视图上的行中填充文本视图（不使用列表视图 - 我知道这很疯狂）。我正在尝试格式化从`STUDENT_POINTS`放入 textview 的数据库列中获取的字符串值`tpoints`。这是我正在使用的代码：

```
public void bindView(View v, final Context context, Cursor c) {
        final int id = c.getInt(c.getColumnIndex(Students.STUDENT_ID));
        final String name = c.getString(c.getColumnIndex(Students.STUDENT_NAME));
        final String age = c.getString(c.getColumnIndex(Students.STUDENT_AGE));
        final String points = c.getString(c.getColumnIndex(Students.STUDENT_POINTS));
        final String teachernote = c.getString(c.getColumnIndex(Students.TEACHERNOTE));
        final byte[] image = c.getBlob(c.getColumnIndex(Students.IMAGE));
        ImageView iv = (ImageView) v.findViewById(R.id.photo);

        if (image != null) {
            if (image.length > 3) {
                iv.setImageBitmap(BitmapFactory.decodeByteArray(image, 0,image.length));
            }
        }

        TextView tname = (TextView) v.findViewById(R.id.name);
        tname.setText(name);
        TextView tage = (TextView) v.findViewById(R.id.age);
        tage.setText(age);
        TextView tpoints = (TextView) v.findViewById(R.id.points);
        tpoints.setText(String.format(points, "%1$,.2f"));

        final StudentsConnector sqlCon = new StudentsConnector(context); 
```

其余的`bindView`用于按钮，所以我没有在这里包含它。问题出在这条线上：

```
tpoints.setText(String.format(points, "%1$,.2f")); 
```

我打算用逗号分隔大量数字，但这无济于事！如果有人有时间，请告诉我我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:27:40.723

你有你的两个参数 - 你应该有格式字符串后跟数据字符串： String.format("%1$,.2f", points );

在我的代码中使用这个小片段，这对我来说很好地格式化：

```
 double points = 56789.45f;
    String boogie = String.format("%1$,.2f", points ); 
```

它生成了一个数字 56,789.45 但由于格式器的精度，更大的数字不能很好地工作。您可能希望将尾数从它们中分离出来，分别格式化它们并将它们组合起来。

# javascript - 根据另一个选择（下拉列表）值更改禁用的选择（下拉列表）

> ID：16093466
> 
> 赞同：0
> 
> 时间：2013-04-18T21:32:06.703
> 
> 标签：javascript, jquery, html-select

基本上我想要做的是标题中不言自明的。这是启用下拉/选择的代码片段，因此可以通过客户端进行更改，但更改后不会禁用：

```
function setLocVals(passedVal) {

                $('#DropDownList1').removeAttr("disabled");                    
                $('#DropDownList1').val(passedVal);
                $('#DropDownList1'').attr("disabled", "disabled");
} 
```

这甚至可能吗？还是我看这个完全错误的方式？我可以更改为文本框，但这是包含美国各州的下拉列表。如果用户有记录，则限制用户选择，如果不存在记录，则他们可以选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:42:55.863

当你必须禁用时，只需设置一个条件。看到这个[小提琴](http://jsfiddle.net/chauhangs/VfuCc/1/)

使用这种方法。

首先设置选项中的值。

然后检索选项的当前值并检查它是否设置为比您传递的值然后将条件设置为禁用否则不

```
 function setLocVals(passedVal) {

            $('#DropDownList1').val(passedVal);

             var value = $('#DropDownList1').val();
             if(value == passedVal){
                    $('#DropDownList1').attr("disabled", "disabled");
                }
        } 
```

# sql - SQL中的重叠

> ID：16093468
> 
> 赞同：2
> 
> 时间：2013-04-18T21:32:14.227
> 
> 标签：sql, join, vertica

我有一个包含以下数据的表：

```
User#       App
1       A
1       B
2       A   
2       B
3       A 
```

我想知道不同用户的应用程序之间的重叠，所以我的最终结果看起来像这样

```
App1  App2  DistinctUseroverlapped 
A     A     3
A     B     2
B     B     2 
```

所以结果意味着有 3 个用户只使用应用程序 A，有 2 个用户同时使用应用程序 A 和应用程序 B，并且有 2 个用户只使用应用程序 B。

还记得有很多应用程序和用户我怎么能在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:41:31.327

我的解决方案首先生成所有可能的感兴趣的应用程序对。这是`driver`子查询。

然后它加入每个应用程序的原始数据。

最后，它用于`count(distinct)`计算两个列表之间匹配的不同用户。

```
select pairs.app1, pairs.app2,
       COUNT(distinct case when tleft.user = tright.user then tleft.user end) as NumCommonUsers
from (select t1.app as app1, t2.app as app2
      from (select distinct app
            from t
           ) t1 cross join
           (select distinct app
            from t
           ) t2
      where t1.app <= t2.app
     ) pairs left outer join
     t tleft
     on tleft.app = pairs.app1 left outer join
     t tright
     on tright.app = pairs.app2
group by pairs.app1, pairs.app2 
```

您可以将条件比较中的条件比较移动`count`到连接中，然后使用`count(distinct)`：

```
select pairs.app1, pairs.app2,
       COUNT(distinct tleft.user) as NumCommonUsers
from (select t1.app as app1, t2.app as app2
      from (select distinct app
            from t
           ) t1 cross join
           (select distinct app
            from t
           ) t2
      where t1.app <= t2.app
     ) pairs left outer join
     t tleft
     on tleft.app = pairs.app1 left outer join
     t tright
     on tright.app = pairs.app2 and
        tright.user = tleft.user
group by pairs.app1, pairs.app2 
```

我更喜欢第一种方法，因为它更明确地说明了要计算的内容。

这是标准 SQL，因此它应该适用于 Vertica。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T19:53:33.413

这适用于vertica 6

```
 with tab as 
    ( select 1 as user,'A' as App
    union  select 1 as user,'B' as App
    union select 2 as user,'A' as App
    union select 2 as user,'B' as App
    union select 3 as user,'A' as App
    )
    , apps as 
    ( select distinct App  from tab )
    select apps.app as APP1,tab.app as APP2 ,count(distinct tab.user) from tab,apps
    where tab.app>=apps.app
    group by 1,2
    order by 1 
```

# jquery - referenceerror $ 未定义用于获取 xml 的 ajax

> ID：16093470
> 
> 赞同：0
> 
> 时间：2013-04-18T21:32:17.137
> 
> 标签：jquery, ajax

我在我的官方网站的 head 标签中使用 jQuery。它不起作用，并提出了参考错误 $ is not defined $.ajax 错误。我尝试了这些解决方案（如下），但它并没有解决我的问题。第一个迪

尝试过的解决方案：

1.Query 需要是您导入的第一个脚本。页面上的第一个脚本

```
<script type="text/javascript" src="/test/wp-content/themes/child/script/jquery.jcarousel.min.js"></script> 
```

2\. [ReferenceError: ajaxfunction is not defined](https://stackoverflow.com/questions/15488704/referenceerror-ajaxfunction-is-not-defined) 我正在调用我的函数作为第一个被调用的函数。

这是我的代码：

```
<script type="text/javascript">
XMLLIST = {
      xml: 'slideshow.xml?' + Math.random(0,1),
      display: '10',
      random: false,
      appentTo: '#slideshow',

      int: function () {
                $.ajax({
                        type:"GET",
                        url:"slideshow.xml",
                             dataType:"xml",
                             sucess: XMLLIST.parseXML,
                }); 
      },

      parseXML: function (xml) {
                var data=$('slideInfo', xml).get();
                var list = data;
                var i = 1;
                          $(list).each(function() {
                          XMLLIST.insertHTML($(this));
                          if( i == XMLLIST.display) return false;
                          i++;
                          });
     },

insertHTML: function (slide) {
            var title = slide.find('title').text();
            var image = slide.find('image').text();
            var alternate = slide.find('alt').text();
            var disclaimer = slide.find('disclaimer').text();
            var diet = slide.find('diet').text();
            var sciencename = slide.find('sciencename').text();
            var facts = slide.find('facts').text();
            var rangehabitat = slide.find('rangehabitat').text();
            var html;

            html = '<div class="slideInfo">';
            html += '<img scr="' + image + '" alt="' + alternate + '"id ="slideImage" />';
            html += '<p id="altTag>"' + alternate + '"</p>"';
            html += '<p id="Animaldisclaimer">"' + disclaimer + '"</p>';
            html += '<p id="scienceName">"' + sciencename + '"</p>'; 
            html += '<p id="RH">"' + rangehabitat + '"</p>';
            html += '<p id="animalFacts">"' + facts + '"</p>';

            $(html).appendTo(XMLLIST.appentTo);
},
}

XMLLIST.int(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:34:40.163

`$`未定义，因为您没有加载 jQuery。您正在加载一个 jQuery 插件，但不是 jQuery 本身。加载 jQuery 应该会让你走得更远，例如：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

`<script>`这在加载插件或其他 jQuery 脚本的任何标签之前。

至少这是我可以从您发布的代码中猜到的全部内容。如果您发布指向完整测试页面的链接，则可以提供更具体的建议。

# google-glass - 我可以用谷歌眼镜自动拍照/录像吗？

> ID：16093472
> 
> 赞同：0
> 
> 时间：2013-04-18T21:32:34.363
> 
> 标签：google-glass, google-mirror-api

应用程序可以调用 Glass 拍照吗？当用户拍照并想要手动分享时，我只会看到“分享”；有没有一种应用程序可以调用 Glass 相机并拍照的方法？

案例：比如说，一个用户说他们想要一个他日常活动的时间线，所以他们设置了一个时间间隔：“30分钟”；然后，该应用程序将每隔 30m 调用一次 Glass 相机，拍摄一张照片并将其存储为时间线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:20:09.597

没有通过 Mirror API 直接控制硬件。随时在我们的[问题跟踪器](https://code.google.com/p/google-glass-api/issues/list)中提出功能请求。

# python - Flask SQLAlchemy 用“不等于”查询列

> ID：16093475
> 
> 赞同：66
> 
> 时间：2013-04-18T21:33:04.710
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我可以在我的`Seat`桌子上查询没有分配邀请的所有座位：

```
seats = Seat.query.filter_by(invite=None).all() 
```

但是，当查询分配了邀请的所有座位时，我得到`NameError`：

```
seats = Seat.query.filter_by(invite!=None).all() 
```

```
NameError: name 'invite' is not defined 
```

这是我的`Seat`课：

```
class Seat(db.Model):
    id = db.Column(db.Integer, primary_key=True)

    invite_id = db.Column(db.Integer, db.ForeignKey('invite.id'))
    invite = db.relationship('Invite',
        backref=db.backref('folks', lazy='dynamic')) 
```

如何查询所有者不为空的所有席位？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-04-18T21:49:51.733

该[`filter_by()`](https://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.filter_by)方法采用一系列关键字参数，因此您始终必须使用`=`它。

您想使用[`filter()`](https://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.filter)允许的方法`!=`：

```
seats = Seat.query.filter(Seat.invite != None).all() 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-03-02T16:29:54.477

我认为这可以帮助 [http://docs.sqlalchemy.org/en/rel_0_9/core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.isnot](http://docs.sqlalchemy.org/en/rel_0_9/core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.isnot)

# 没有

```
query.filter(User.name == None) 
```

或者，如果 pep8/linter 是一个问题

`query.filter(User.name.is_(None))`

# 不是无

```
query.filter(User.name != None) 
```

或者，如果 pep8/linter 是一个问题

`query.filter(User.name.isnot(None))`

# objective-c - 持久存储迁移：尽管哈希值相同，但缺少源托管对象模型错误

> ID：16093482
> 
> 赞同：5
> 
> 时间：2013-04-18T21:33:52.463
> 
> 标签：objective-c, xcode, macos, core-data, core-data-migration

我正在尝试使用映射模型迁移核心数据存储，但出现此错误：“持久存储迁移失败，缺少映射模型。”

我的应用程序找到了映射模型，但没有使用它，即使哈希匹配。这是迁移调试日志：

```
2013-04-18 23:23:53.256 MyApp[30934:303] CoreData: annotation: Incompatible version schema for persistent store 'file://localhost/Users/Clemens/Library/Containers/com.my-company.MyApp/Data/Library/Application%20Support/com.my-company.MyApp/MyApp.storedata'.  store metadata = {
    NSPersistenceFrameworkVersion = 407;
    NSStoreModelVersionHashes =     {
        Project = <71e5190c 4e7bdecf 0fcc5df6 72120586 e6ec3b83 9aecd871 6847c9c1 4e888a06>;
        Task = <e7df7dad d3710c84 2cc82543 7ef549e2 a4fa5818 b243b97e 5a734d49 5c1ce19f>;
        WorkPeriod = <ed62858b 98bacd8d 70442733 07caae00 f82073d8 dd67fd68 c703778f 4b6c7c37>;
    };
    NSStoreModelVersionHashesVersion = 3;
    NSStoreModelVersionIdentifiers =     (
        ""
    );
    NSStoreType = XML;
    NSStoreUUID = "397108D9-D465-41E4-B5FA-45701DAC5B4D";
} and current model versions = {
    Project = <919c7227 b911a0f2 25df6d2a 2f939989 37e81707 b7dcacfd 4570d7e0 b965f75d>;
    Task = <b5a7c7a5 1efc83d7 a3dda24d 44251466 0552d7db 5beb1491 1048b48e f9032df2>;
    TaskPreset = <6f6ab28a c7a3e78f c6856bf8 b56b8efc f9d2ac0b 30b80356 86367d31 bf94b507>;
    TaskPresetGroup = <9b892cb1 2948fb51 cb25a8db 89515654 d55069b2 1081a669 2c56bb21 a9c7c156>;
    WorkPeriod = <5360e9c9 91d2c313 0a9ca2e1 b348b5c3 8176831e 7fc9748f d43623b1 364ecfb9>;
}
2013-04-18 23:23:53.257 MyApp[30934:303] CoreData: annotation: (migration)   will attempt automatic schema migration
2013-04-18 23:23:53.298 MyApp[30934:303] CoreData: annotation: (migration) looking for mapping model with 
 source hashes: 
{
    Project = <71e5190c 4e7bdecf 0fcc5df6 72120586 e6ec3b83 9aecd871 6847c9c1 4e888a06>;
    Task = <e7df7dad d3710c84 2cc82543 7ef549e2 a4fa5818 b243b97e 5a734d49 5c1ce19f>;
    WorkPeriod = <ed62858b 98bacd8d 70442733 07caae00 f82073d8 dd67fd68 c703778f 4b6c7c37>;
}
 destination hashes: {
    Project = <919c7227 b911a0f2 25df6d2a 2f939989 37e81707 b7dcacfd 4570d7e0 b965f75d>;
    Task = <b5a7c7a5 1efc83d7 a3dda24d 44251466 0552d7db 5beb1491 1048b48e f9032df2>;
    TaskPreset = <6f6ab28a c7a3e78f c6856bf8 b56b8efc f9d2ac0b 30b80356 86367d31 bf94b507>;
    TaskPresetGroup = <9b892cb1 2948fb51 cb25a8db 89515654 d55069b2 1081a669 2c56bb21 a9c7c156>;
    WorkPeriod = <5360e9c9 91d2c313 0a9ca2e1 b348b5c3 8176831e 7fc9748f d43623b1 364ecfb9>;
}
2013-04-18 23:23:53.300 MyApp[30934:303] CoreData: annotation: (migration) checking mapping model at path file://localhost/Users/Clemens/Library/Developer/Xcode/DerivedData/MyApp-fcaoexogoreuawfnznnkmnjtqwop/Build/Products/Debug/MyApp.app/Contents/Resources/MappingModel.cdm
 source hashes: 
{(
    <ed62858b 98bacd8d 70442733 07caae00 f82073d8 dd67fd68 c703778f 4b6c7c37>,
    <71e5190c 4e7bdecf 0fcc5df6 72120586 e6ec3b83 9aecd871 6847c9c1 4e888a06>,
    <e7df7dad d3710c84 2cc82543 7ef549e2 a4fa5818 b243b97e 5a734d49 5c1ce19f>
)}
 destination hashes: {(
    <9b892cb1 2948fb51 cb25a8db 89515654 d55069b2 1081a669 2c56bb21 a9c7c156>,
    <b5a7c7a5 1efc83d7 a3dda24d 44251466 0552d7db 5beb1491 1048b48e f9032df2>,
    <6f6ab28a c7a3e78f c6856bf8 b56b8efc f9d2ac0b 30b80356 86367d31 bf94b507>,
    <5360e9c9 91d2c313 0a9ca2e1 b348b5c3 8176831e 7fc9748f d43623b1 364ecfb9>,
    <919c7227 b911a0f2 25df6d2a 2f939989 37e81707 b7dcacfd 4570d7e0 b965f75d>
)}
2013-04-18 23:23:53.301 MyApp[30934:303] CoreData: annotation: (migration) no suitable mapping model found 
```

我不知道，为什么我的映射模型不合适。有谁知道，我做错了什么？

# matlab - 如何在 Matlab 中可视化图像段的边界？

> ID：16093487
> 
> 赞同：1
> 
> 时间：2013-04-18T21:34:19.030
> 
> 标签：matlab, image-segmentation, vlfeat

我有一个包含图像每个像素的分段索引的矩阵。如何可视化段的边界？最明显的想法是使用diff filter来获取边缘图，但是看起来很丑。如何使图像看起来像这里？ [http://www.vlfeat.org/overview/slic.html](http://www.vlfeat.org/overview/slic.html)

UPD：我试过了，看起来还不错。代码本身看起来很难看，也许可以写成更优雅的形式。

```
boundaries = zeros(size(segments));
boundaries(2:end, :) = boundaries(2:end, :) + (segments(2:end, :) ~= segments(1:end-1, :));
boundaries(:, 2:end) = boundaries(:, 2:end) + (segments(:, 2:end) ~= segments(:, 1:end-1)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:57:49.617

如果您有索引的位置（例如边界所在的二进制掩码），您可以使用它`imoverlay`来执行此操作。

[http://www.mathworks.co.uk/matlabcentral/fileexchange/10502-image-overlay](http://www.mathworks.co.uk/matlabcentral/fileexchange/10502-image-overlay)

对于更快的东西，特别是如果你只需要一种颜色，你为什么不做类似的事情

（假设边框存储在一个逻辑数组中：`borders`并且您的图像在`img`）

```
img(borders) = 0 
```

使`borders`蒙版中的所有像素变黑

# scala - 在没有助手的情况下播放框架表单 - 不会出现错误

> ID：16093492
> 
> 赞同：0
> 
> 时间：2013-04-18T21:34:44.677
> 
> 标签：scala, playframework-2.0, playframework-2.1

由于我不太了解它，我试图在不超过基本 scala 的情况下生成我的观点。

出于这个原因，我只写 html 来制作表单，我唯一的问题是获取表单可能存在的错误

我在我的控制器上使用：

```
badRequest(register.render(form)); 
```

在我看来

```
<label for="name">Name:</label>
    <input type="text" class="input-block-level" placeholder="Last Name" name="name">
    <dl class="input-block-level error" id="name_field">
    <dd class="error">@if(registrationForm.hasErrors) {
    @registrationForm.errors.get("name")}</dd></dl> 
```

这将打印在屏幕上 [ValidationError(name,error.required,[])]

我知道助手具有 `'_error -> registrationForm.globalError`属性，但我不喜欢生成的代码（主要是标签）

我怎样才能通过scala得到所有的错误？

编辑1：所以我将视图代码更改为以下

```
 @if(registrationForm.error("name")!=null) {
    <dl class="input-block-level error" id="name_field">
    <dd class="error">
    @registrationForm.error("name").message</dd></dl> 
```

这将打印字段错误，但仅打印消息键而不是消息值，例如 error.required 打印，而不是默认消息此字段是必需的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T01:22:09.737

从 2.1 开始，上一个将不起作用，实际上 .error(key) 是一个 Option[FormError] 所以这个：

```
@if(form.error("name")){<span class="help-inline">@Messages(form.error("name").message)</span>} 
```

变成：

```
@if(form.error("name")){<span class="help-inline">@Messages(form.error("name").get.message)</span>} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:36:41.803

好的，所以我得到了我想要的结果，以防有人有兴趣在没有帮助的情况下制作表格

```
<input type="text" class="input-block-level" placeholder="Name" name="name">
    @if(registrationForm.error("name")!=null) {
    <dl class="input-block-level error" id="name_field">
    <dd class="error">
    @Messages(registrationForm.error("name").message)</dd></dl>   } 
```

# entity-framework - 实体框架 .Any 不生成预期的 SQL WHERE 子句

> ID：16093495
> 
> 赞同：1
> 
> 时间：2013-04-18T21:35:06.510
> 
> 标签：entity-framework, entity-framework-4, linq-to-entities

Entity Framework 和 Linq-To-Entities 真的让我有些头疼。我有一个相当简单的查询：

```
var result = feed.FeedItems.Any(ei => ei.ServerId == "12345"); 
```

feed 是我之前在来自同一上下文的单独查询中选择的单个 EF 实体。

但是生成的 SQL 只是丢弃了 .Any 条件，并请求提要对象的所有 FeedItems，这可能是数千条记录，这是对网络带宽的浪费。似乎是实际的。任何比较都是在 C# 中完成的：

```
exec sp_executesql N'SELECT [t0].[Id], [t0].[FeedId], [t0].[ServerId], [t0].[Published], [t0].[Inserted], [t0].[Title], [t0].[Content], [t0].[Author], [t0].[WebUri], [t0].[CommentsUri]
FROM [dbo].[FeedItem] AS [t0]
WHERE [t0].[FeedId] = @p0',N'@p0 int',@p0=3 
```

我也试过：

```
!feed.FeedItems.Where(ei => ei.ServerId == "12345").Any(); 
```

但这并没有改变任何东西。即使删除 Any() 并查询完整的项目列表也不会更改查询。

我不明白......为什么这不像我预期的那样工作？应该有一个

```
WHERE ServerId == 1234 
```

SQL 语句中的子句。

非常感谢任何帮助/澄清:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:40:01.843

正如 Nicholas 已经注意到的那样，看起来像在`FeedItems`属性中执行的查询（可能您正在返回`List`or `IEnumerable`）并且整个项目列表都是从数据库返回的。之后，您将申请`Any`内存收集。这就是您`WHERE ServerId == 1234`在 SQL 查询中看不到的原因。

当您应用于`Any`生成`IQueryable`的查询时，将如下所示：

```
SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            [dbo].[FeedItem] AS [t0]
            WHERE [t0].[ServerId] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value] 
```

# android - BroadcastReceiver 的 onReceive 没有在收到的短信上触发

> ID：16093497
> 
> 赞同：-1
> 
> 时间：2013-04-18T21:35:08.107
> 
> 标签：android, broadcastreceiver, android-broadcast

我被困了6个多小时，我浏览了所有可能有用的帖子，但没有运气

的`onReceive()`方法`BroadcastReceiver`不会被解雇。

下面是我的代码`MainAcitivty`，`Manifest`和`BroadCastReceiver`。

这是我的主要活动的代码

```
package com.example.luckydraw;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Intent;
import android.content.IntentFilter;
import android.telephony.SmsManager;
import android.util.Log;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

} 
```

这是我的广播接收器

```
package com.example.luckydraw;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.Toast;

public class Smsrcv extends BroadcastReceiver {

     private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
     private static final String TAG = "Smsrcv";

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        Toast.makeText(context, "I re", Toast.LENGTH_LONG).show();
          Log.i(TAG, "Intent recieved: " + intent.getAction());

            String message="test message";
        String PhoneNumber="03214304743";
            SmsManager.getDefault().sendTextMessage(PhoneNumber, null, message, null, null);

             if (intent.getAction() == SMS_RECEIVED) {
                 Bundle bundle = intent.getExtras();
                 if (bundle != null) {
                     Object[] pdus = (Object[])bundle.get("pdus");
                     final SmsMessage[] messages = new SmsMessage[pdus.length];
                     for (int i = 0; i < pdus.length; i++) {
                         messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                     }
                     if (messages.length > -1) {
                         Log.i(TAG, "Message recieved: " + messages[0].getMessageBody());
                     }
                 }
             }

    }

} 
```

最后这是我的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.luckydraw"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.SEND_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name=".Smsrcv"
            android:enabled="true"
            android:exported="true"
            >
            <intent-filter android:priority="1000" >
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:20:08.507

有某些消息应用程序，例如 GO SMS PRO 等，它们具有广播接收者的意图过滤器，例如

```
 <intent-filter android:priority="2147483647" >
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter> 
```

这里**android:priority**是**2147483647**

**这并没有让我的应用程序捕捉系统的广播！**

如果您想检查设备上所有消息传递应用程序的优先级

用这个

```
 Intent intent = new Intent("android.provider.Telephony.SMS_RECEIVED");
            List<ResolveInfo> infos = getPackageManager().queryBroadcastReceivers(intent, 0);
            for (ResolveInfo info : infos) {
              System.out.println("Receiver name:" + info.activityInfo.name + ";     priority=" + info.priority);
            } 
```

**解决方案**

您应该卸载优先级 > 1000 的那些，以使您的应用程序正常工作。

# delphi - 如何防止屏幕在平板电脑上自动旋转？

> ID：16093502
> 
> 赞同：5
> 
> 时间：2013-04-18T21:35:13.403
> 
> 标签：delphi, ribbon, tablet, screen-rotation

在下面的链接中，Microsoft 描述了限制平板电脑上应用程序屏幕旋转的两种方法。

[http://msdn.microsoft.com/en-ca/library/windows/apps/hh700342.aspx](http://msdn.microsoft.com/en-ca/library/windows/apps/hh700342.aspx)

发生的事情是德尔福的（XE3）TRIbbon 不能很好地处理旋转。它往往会挂起。

正如预期的那样，MS 网站描述了如何从 MS 开发产品中做到这一点。我看不到如何在我的 Delphi 项目中做到这一点。

**方法一：**

将此添加到您的 appxmanifest 文件中：

```
<InitialRotationPreference>
    <Rotation Preference="landscape"/>
    <Rotation Preference="landscapeFlipped"/>
</InitialRotationPreference> 
```

我还没有找到appxmanifest应该在哪里/如何成为应用程序的一部分，所以我可以在delphi中做到这一点。

**方法二：**

用代码调用它：

```
 Windows.Graphics.Display.DisplayProperties.AutoRotationPreferences =
            Windows.Graphics.Display.DisplayOrientations.Landscape; 
```

要将其迁移到 delphi，我需要知道 API DLL 信息，以便我可以做类似的事情。

有任何想法吗？

是否有一个 COM 对象或 DLL 可以让我们访问它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T22:18:10.273

这些调用将禁用 WindowsRT 应用程序 (FKA Metro) 的旋转，而您无法使用 Delphi 构建（目前）。即使是 Metropolis 应用程序仍然是桌面应用程序。[英特尔网站上](http://software.intel.com/en-us/blogs/2013/01/10/handling-windows-8-auto-rotate-feature-in-your-application)有一个解决方案。

根据[X-Ray](https://stackoverflow.com/users/14031/x-ray)的反馈，我清理了代码：

```
unit MetroDisplayRotation;

(* 
 *  Usage: TMetroDisplayRotation.SetDisplayAutoRotationPreferences(
 *           TMetroDisplayRotation.ORIENTATION_PREFERENCE_LANDSCAPE or 
 *           TMetroDisplayRotation.ORIENTATION_PREFERENCE_LANDSCAPE_FLIPPED);
 *)

interface

type
  TMetroDisplayRotation = class
  public const
    ORIENTATION_PREFERENCE_NONE = $0;
    ORIENTATION_PREFERENCE_LANDSCAPE = $1;
    ORIENTATION_PREFERENCE_PORTRAIT = $2;
    ORIENTATION_PREFERENCE_LANDSCAPE_FLIPPED = $4;
    ORIENTATION_PREFERENCE_PORTRAIT_FLIPPED = $8;

    class procedure SetDisplayAutoRotationPreferences(ORIENTATION_PREFERENCE: Integer);
  end;

implementation

uses
  SysUtils, Windows;

{ TMetroDisplayRotation }

class procedure TMetroDisplayRotation.SetDisplayAutoRotationPreferences(
  ORIENTATION_PREFERENCE: Integer);
type
  TSDARP = procedure(ORIENTATION_PREFERENCE: Integer); stdcall;
var
  UserHandle: THandle;
  SDARP: TSDARP;
begin
  UserHandle := GetModuleHandle('User32.dll');
  @SDARP := GetProcAddress(UserHandle, 'SetDisplayAutoRotationPreferences');
  if Assigned(SDARP) then
    SDARP(ORIENTATION_PREFERENCE);
end;

end. 
```

您需要确保仅在 Windows 8 上调用它，因为该过程在其他地方不存在。

用法：`TMetroDisplayRotation.SetDisplayAutoRotationPreferences(TMetroDisplayRotation.ORIENTATION_PREFERENCE_LANDSCAPE or TMetroDisplayRotation.ORIENTATION_PREFERENCE_LANDSCAPE_FLIPPED);`

另一个不好的选择是为整个平板电脑禁用它。只需进入`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\AutoRotation`注册表并更改`Enable`为**0**。

# outlook-addin - Outlook 加载项出现错误“配置系统初始化失败”

> ID：16093503
> 
> 赞同：2
> 
> 时间：2013-04-18T21:35:15.493
> 
> 标签：outlook-addin

我正在迁移一个工作 Outlook 加载项以在 Outlook 2013 上运行并收到错误“配置系统无法初始化”。

app.config 文件很好，因为加载项加载并在我尝试从 Visual Studio 2010 运行它时工作。但是，当我创建部署 msi（使用 WiX 和 ms 引导程序创建）并将其安装在开发中时机器它没有工作。

经过检查，我发现在 c:\users\\AppData\Local... 文件夹中没有创建 user.profile。所以我有一种预感，有些东西正在阻止插件创建这个文件。但是，我也在从加载项编写一个日志文件，这似乎创建得很好。

我的 dll.manifest 文件有：

```
<trustInfo>
    <security>
      <applicationRequestMinimum>
        <PermissionSet Unrestricted="true" ID="Custom" SameSite="site" />
        <defaultAssemblyRequest permissionSetReference="Custom" />
      </applicationRequestMinimum>
      <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">        
        <requestedExecutionLevel level="asInvoker" uiAccess="false" />
      </requestedPrivileges>
    </security>
  </trustInfo> 
```

我错过了什么吗？

有什么线索吗？谢谢你的时间。

# android - 应该使用 Service 还是 BroadcastReceiver 构建警报？

> ID：16093512
> 
> 赞同：0
> 
> 时间：2013-04-18T21:35:41.237
> 
> 标签：android, service, broadcastreceiver, alarm

我想构建一个警报应用程序。我看过一些例子，其中一些使用 Service，一些使用 BroadcasterReceiver。用户将设置闹钟，然后当闹钟响起时，他们必须在闹钟响起之前做一些事情，例如求解数学方程式或扫描 NFC 标签。我应该使用哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:18:27.430

如果您`AlarmManager`与`_WAKEUP`警报一起使用，则*必须*具有`PendingIntent`到`BroadcastReceiver`. Android 唯一通过`_WAKEUP`警报保证的是，如果您使用 a `BroadcastReceiver`，Android 将使设备保持唤醒足够长的时间`onReceive()`以完成。其他任何事情，所有赌注都没有了。

您想要完成的工作将花费超过几毫秒的时间，`BroadcastReceiver`转身并将控制权传递给服务，该服务可以在后台线程上完成其工作。您可能希望为此使用[我`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful)的；如果没有，您将需要自行管理`WakeLock`以确保设备保持唤醒状态，直到服务完成其工作。

# facebook - Facebook oauth 重定向无法正常工作

> ID：16093517
> 
> 赞同：2
> 
> 时间：2013-04-18T21:36:07.350
> 
> 标签：facebook, hash, facebook-oauth

今天，当我的重定向 URI 有一个哈希字符串时，我的应用程序开始在 Facebook oauth 上失败。直到昨天它才起作用。这里的场景：

在重定向到 Facebook 时，网址：

> www.facebook.com/dialog/oauth?client_id=441044735940116&redirect_uri=http%3A%2F%2Fwww.myapp.com%2Fpt%2Fregister.html%23JA4BqoGbVnvw1OXky%7CMCwCCd6buzlvyTY9sg4JMzyQtJp9YLz8AhRNwKnj5G2dmIymLw4UK1ouSB9S0w%3D%3D&scope=email,user_birthday,user_location&response_type=token

Facebook 回复我：

> www.myapp.com/pt/register.html#access_token=BAAGRILrQ1hQBAP80ZCpK8p0d24e50tqoR8ZAR8nwhAfSYXN5U0h888ILWzpOYUM7lEYtUdbNU4hRm06t7ABBdZCMsiY7JgEqDPB9SImj7QOSAcsbJmOW3u652CyOhqvO9O7O1qdxYH8ANPuA9USEpC7ThyLCJXocxZB3c7bZB186JHhwbKeesRfOyPDXSaGQiqEwQbpDiF8MBi0jBgLD4&expires_in=6462

什么时候应该返回：

> www.myapp.com/pt/register.html#JA4BqoGbVnvw1OXky|CMCwCCd6buzlvyTY9sg4JMzyQtJp9YLz8AhRNwKnj5G2dmIymLw4UK1ouSB9S0w==&access_token=BAAGRILrQ1hQBAP80ZCpK8p0d24e50tqoR8ZAR8nwhAfSYXN5U0h888ILWzpOYUM7lEYtUdbNU4hRm06t7ABBdZCMsiY7JgEqDPB9SImj7QOSAcsbJmOW3u652CyOhqvO9O7O1qdxYH8ANPuA9USEpC7ThyLCJXocxZB3c7bZB186JHhwbKeesRfOyPDXSaGQiqEwQbpDiF8MBi0jBgLD4&expires_in=6462

基本上，Facebook oauth 不会将我的哈希发回给我。有谁知道为什么？

和下面的问题有关系吗？

[https://developers.facebook.com/bugs/449931225075123](https://developers.facebook.com/bugs/449931225075123)

# jquery - 如何在 jquery 中将 backgroundSize 属性设置为默认值？

> ID：16093519
> 
> 赞同：0
> 
> 时间：2013-04-18T21:36:20.500
> 
> 标签：jquery, background, size

其实我想为背景图像设置动画。所以我所做的是，当 div 悬停时，背景图像逐渐隐藏。

```
$(this).animate({ backgroundSize: '0%', opacity: 0}, 500) 
```

现在当 div 没有悬停时，我想将 backgroundSize 设置为默认值.. 像

```
$(this).animate({backgroundSize: 'auto', opacity: 1}, 500) 
```

但它没有用。

在 Css div 类中就像...

```
.divImg{ background: url(../imgs/bgImg.png) no-repeat center; background-size: auto } 
```

我想要的是当 div 没有悬停时，背景图像应该回到它的默认大小和位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:46:59.997

尝试添加`!important`：

```
 $(this).animate({backgroundSize: 'auto !important', opacity: 1}, 500) 
```

**编辑**：更新代码以匹配问题中的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T17:14:03.670

i am not 100% sure abut this, but i believe jquery .animate() can only animate number based properties. my guess is that trying to make "100%" change to 'auto' might be the problem.

try only animating the opacity, and change to 'auto' with the .css() function, after a timeout, if you need it.

# c - 运行一个暂停的进程，但在继续之前修改了它在内存中的图像的一些内容

> ID：16093521
> 
> 赞同：1
> 
> 时间：2013-04-18T21:36:30.970
> 
> 标签：c, winapi

为此我需要帮助：我有一个可执行文件，其中包含一些以空字符结尾的字符串。我想暂停执行它，但在继续之前，我需要在缓冲区的第一个字符中放入一个 NULL，让它无法使用。我需要做什么步骤。？

我只有前三行：

```
PROCESS_INFORMATION pi;
STARTUPINFO si;
memset(&si, 0, sizeof(si));
CreateProcess(0, "app.exe", NULL, NULL, FALSE, CREATE_SUSPENDED, NULL, NULL, &si, &pi); 
```

但是接下来，我需要什么来读取进程图像的内存并对其进行修改？

我需要使用 ReadProcessMemory 吗？然后，我如何获得基地址，我需要什么类型的缓冲区？

请为完成此任务提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:16:16.743

是的，您应该使用 pi.hProcess 的 ReadProcessMemory （这是您新创建的可执行文件的句柄）但是在您尝试在那里读/写之前，您必须了解，当您创建处于挂起状态的进程时，它没有完全加载（您的缓冲区、代码等。还无法加载！）但是您可以手动将 PE 加载到内存中，您必须编写自己的 PE 加载器。此外，基地址将相同。例如，如果您的可执行文件（将在挂起模式下执行）的基地址为 0x400000，那么新进程的基地址将相同。

祝你好运。

编辑：关于您需要什么类型的缓冲区，您必须以某种方式“标记”该缓冲区以获取实际地址。（提示：用随机字符填充）。

# neo4j - Neo4j - 复杂的密码查询

> ID：16093522
> 
> 赞同：0
> 
> 时间：2013-04-18T21:36:45.453
> 
> 标签：neo4j

我需要编写一个密码查询来查找一个未知节点，该节点在给定的 4 个节点之间的边数不超过 3 个。

例如：我有节点 A、B、C、D

我需要找到一个与所有给定节点（A、B、C、D）的边距离不超过 3 个的节点

我会很感激一些帮助。

谢谢

阿隆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T22:08:45.000

我假设您已经为如何获取 A、B、C、D 定义了某种类型的逻辑，因此我将在开始子句中添加省略号。

```
START A=..., B=..., C=..., D=...
MATCH n-[*..3]->A,
n-[*..3]->B,
n-[*..3]->C,
n-[*..3]->D
RETURN n 
```

# android - ListView 的自定义布局中断 OnItemClickListener

> ID：16093523
> 
> 赞同：0
> 
> 时间：2013-04-18T21:36:48.240
> 
> 标签：android, android-layout, android-listview, android-custom-view

当对列表视图中的项目使用自定义布局时，事实证明 OnItemClickListener 不会触发。

以前，我使用的是 android.R.layout.two_line_list_item。我所做的只是将这个已弃用的布局换成我自己的自定义布局。

我努力了：

-将选择模式设置为单

- 在父列表和列表项中启用长短可点击性

-启用焦点和后代可聚焦性

- 请求焦点

任何反馈将不胜感激！！！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:18:29.133

这是一些视图项创建代码...

```
adapter = new ArrayAdapter<ComplexObject>(this, R.layout.item_row, 0,
                al) {
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                if (convertView == null) {
                    convertView = inflater.inflate(R.layout.item_row, parent,
                            false);
                }

                ComplexObject item = adapter.getItem(position);

                ((TextView) convertView.findViewById(R.id.item)).setText(item
                        .getShape());

                ((TextView) convertView.findViewById(R.id.subItem))
                        .setText(item.getWeight() + " lbs");

                ((TextView) convertView.findViewById(R.id.itemSummary))
                        .setText(item.getAge() + " years");

                return convertView;
            }

        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:43:52.663

我猜你可以尝试在自定义布局的 xml 文件中设置**android:clickable="true"**。但是您的布局文件的代码可能会更有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:13:08.473

这是自定义布局...

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:focusable="false"
    android:focusableInTouchMode="false" >

    <TextView
        android:id="@+id/itemSummary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:textIsSelectable="true" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@id/itemSummary"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/item"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textIsSelectable="true" />

        <TextView
            android:id="@+id/subItem"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/item"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textIsSelectable="true" />
    </RelativeLayout>

</RelativeLayout> 
```

# php - 阵列名称更改导致连接重置错误

> ID：16093524
> 
> 赞同：0
> 
> 时间：2013-04-18T21:36:51.800
> 
> 标签：php

为什么这个 PHP 命令会在 webbrowser 中生成 CONNECTION RESET 消息：

```
$result[] = app::moveChildDown(dataaccessobject::instance()->getAll($sql,null,true)); 
```

这不会：

```
$results[] = app::moveChildDown(dataaccessobject::instance()->getAll($sql,null,true)); 
```

唯一的变化是从`$result[]`到`$results[]`- 一个符号，“s”。

会不会是服务器配置问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:40:07.997

对此没有*超级配置魔法*。我猜这个变量`$result`是以前使用过的，不是一个数组。这就是为什么推动它`[]=`会失败。

尝试这个：

```
$result   = array(); // reinitialize $result as empty array.
$result []= app::moveChildDown(dataaccessobject::instance()->getAll($sql,null,true)); 
```

当然，您必须找到两次定义变量名的真正原因并找到解决方案。

# python - 对 Reddit 进行 api 调用时出现 404 错误

> ID：16093525
> 
> 赞同：1
> 
> 时间：2013-04-18T21:36:53.277
> 
> 标签：python, reddit

根据他们的[文件](http://www.reddit.com/dev/api#GET_hot)：

这应该足以获得最热门的新 reddit 提交：

```
r = client.get(r'http://www.reddit.com/api/hot/', data=user_pass_dict) 
```

但它没有，我得到一个 404 错误。我获取数据请求的 url 是否错误？

`http://www.reddit.com/api/login`虽然有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T04:25:35.950

您的问题专门询问您需要做什么才能获得“最热门的新”提交。“最热门的新”并没有真正的意义，因为存在“热门”视图和“新”视图。这两个视图的 URL 分别是`http://www.reddit.com/hot`和`http://www.reddit.com/new`。

为了使这些 URL 对代码更友好，您可以附加`.json`到 URL 的末尾（任何 reddit URL 与此相关）以获取数据的 json 表示。例如，要获取“热”提交列表，请向`http://www.reddit.com/hot.json`.

* * *

为了完整起见，在您的示例中，您尝试传入`data=user_pass_dict`. 这绝对不会像您期望的那样工作。虽然您想要做的事情不需要登录，但如果您碰巧需要使用 python 更复杂地使用 reddit 的 API，我强烈建议使用[PRAW](https://praw.readthedocs.org/en/latest/)。使用 PRAW，您可以通过以下方式迭代“热”提交：

```
import praw
r = praw.Reddit('<REPLACE WITH A UNIQUE USER AGENT>')
for submission in r.get_frontpage():
    # do something with the submission
    print(vars(submission)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:39:49.817

根据文档，使用`/hot`而不是`/api/hot`：

```
r = client.get(r'http://www.reddit.com/hot/', data=user_pass_dict) 
```

# jsf - Primefaces文件下载不起作用？

> ID：16093527
> 
> 赞同：17
> 
> 时间：2013-04-18T21:37:06.620
> 
> 标签：jsf, primefaces

试图让一个简单的文件下载工作，我得到的只是一个悬挂的 AJAX 状态栏，就是这样。我的支持 bean 输出在准备和下载时呈现正确的名称。

我做错了吗？在我看来，这两个输出都是正确的。

JSF 2.0 Primefaces 3.4

```
 <h:form>
            <p:commandButton id="downloadLink" value="Download" actionListener="#{filemanagement.prepDownload}"> 
                <p:fileDownload value="#{filemanagement.download}" />
            </p:commandButton>
        </h:form> 
```

支持豆：

```
private DefaultStreamedContent download;

public void setDownload(DefaultStreamedContent download) {
    this.download = download;
}

public DefaultStreamedContent getDownload() throws Exception {
    System.out.println("GET = " + download.getName());
    return download;
}

public void prepDownload() throws Exception {
    File file = new File("C:\\file.csv");
    InputStream input = new FileInputStream(file);
    ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
    setDownload(new DefaultStreamedContent(input, externalContext.getMimeType(file.getName()), file.getName()));
    System.out.println("PREP = " + download.getName());
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-18T21:40:05.027

**Primefaces 版本指南 >= 10：**

对于 10 之前的 Primefaces 版本，您必须在`commandButton`with上禁用 ajax `ajax=false`。

由于不再需要版本 10，请参阅[Primefaces 文档 10](https://primefaces.github.io/primefaces/10_0_0/#/components/filedownload?id=ajax-downloading)。

**Primefaces 版本 < 10 的指南：**

请参阅[Primefaces 文档 6.2](https://www.primefaces.org/docs/guide/primefaces_user_guide_6_2.pdf)

> 如果您想使用 PrimeFaces commandButton 和 commandLink，请禁用 ajax 选项，因为 fileDownload 需要刷新整个页面才能显示文件。

```
<h:form>
  <p:commandButton id="downloadLink" value="Download" ajax="false" actionListener="#{filemanagement.prepDownload}">
    <p:fileDownload value="#{filemanagement.download}" />
  </p:commandButton>
</h:form> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-07-23T08:53:19.557

在命令按钮内部，设置 ajax=false 并且不要对命令链接使用动作或动作侦听器。

```
<h:form>
  <p:commandButton id="downloadLink" value="Download" ajax="false">
    <p:fileDownload value="#{filemanagement.downloadValue}" />
  </p:commandButton>
</h:form> 
```

豆：

```
public StreamedContent getDownloadValue() throws Exception {
    StreamedContent download=new DefaultStreamedContent();
    File file = new File("C:\\file.csv");
    InputStream input = new FileInputStream(file);
    ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
    download = new DefaultStreamedContent(input, externalContext.getMimeType(file.getName()), file.getName()));
    System.out.println("PREP = " + download.getName());
    return download;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-04T11:34:24.560

从 PrimeFaces 10 起，您**可以**使用 Ajax 下载！

[https://primefaces.github.io/primefaces/10_0_0/#/components/filedownload?id=ajax-downloading](https://primefaces.github.io/primefaces/10_0_0/#/components/filedownload?id=ajax-downloading)

当您在命令按钮或链接上使用 Ajax 时，下载将由 JavaScript 触发。

也可以看看：

[https://github.com/primefaces/primefaces/issues/5978](https://github.com/primefaces/primefaces/issues/5978)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-12T17:40:47.990

ia 所做的最重要的事情是 turn ajax="false"。

这里我有commandlink，你可以在下面看到。

在 html 中：

```
<p:commandLink id="someId"
                value="Download"
                style="padding-left: 2em; vertical-align: middle;"
                ajax="false"
                onstart="PF('pageBlocker').show()"
                oncomplete="PF('pageBlocker').hide()">
  <p:fileDownload value="#{bean.downloadFileTemplate()}" />
</p:commandLink> 
```

在 Java 中：

```
public StreamedContent downloadFileTemplate() {
    try {
        FileInputStream inputStream = new FileInputStream(new File(getClass().getClassLoader().getResource("path_to_resource/myfile.xlsx").getFile()));

        StreamedContent fileTemplate = new DefaultStreamedContent(
                inputStream
                , "application/vnd.ms-excel"
                , "my_file.xlsx");

        return fileTemplate;
    } catch (Exception e) {
        getLog().error("Error on download...", e);
        return null;
    }
} 
```

# google-cloud-storage - 如何使用 javascript 读取 Google Cloud Storage 上的文件内容

> ID：16093528
> 
> 赞同：1
> 
> 时间：2013-04-18T21:37:07.310
> 
> 标签：google-cloud-storage

如何使用 javascript 读取 Google Cloud Storage 上的文件内容。

我试过了，它让我得到了元数据，但我不知道如何读取文件的内容。任何帮助表示赞赏，谢谢。

```
$wnd.gapi.client.request({
           path : '/storage/v1beta1/b/easycompile/o/steps.txt',
           method : 'GET',
           params : {
                projection: "FULL"
           }
      });
      request.execute(function(response) {
           console.log(response);   
      }); 
```

# html - 我的粘页脚不起作用

> ID：16093530
> 
> 赞同：0
> 
> 时间：2013-04-18T21:37:15.150
> 
> 标签：html, css, sticky-footer

我知道这个问题已经被问过很多次了，但我还没有找到真正适合我的解决方案。

我的html...

```
<body>
      <div id="container">
      </div>
      <div id="footer">
      </div>
</body> 
```

我的css....

```
body, html { min-height:100%;}

#container
  width: 980px;
  min-height: 100%;
  margin: 0 auto;}

footer {
  background-color: rgb(90,200,219);
  height: 50px;
  position: realative;
  margin-top: -50px;
  width: 100%; } 
```

发生的事情是页脚完全粘在页面底部。但是，当内容很短时，我仍然需要向下滚动才能找到粘在底部的页脚。有人可以告诉我我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:04:44.350

我认为你应该修复你的 CSS 片段，因为它有很多问题。下次使用复制和粘贴把它放在这里，这样你的错字就不会让任何人失望。

```
body, html { min-height:100%; } 
```

那应该是`height:100%;`，但我认为这可能是一个错字，因为您说页脚粘在底部，如果该行真的在您的实际 CSS 中，则不会。

`#container`缺少一个括号，应该是`#container {`.

如果这些问题得到解决，除了@Owlvark 指出的问题。[在jsFiddle](http://jsfiddle.net/fAC6p/)似乎工作正常。我能想到的唯一改进是添加`margin: 0px;`to `body, html`，这可能是您的问题，因为它消除了一些会呈现垂直滚动条的额外空间。但是当您说您必须“向下滚动以查找页脚”时，您的问题似乎更严重。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:48:12.913

试试我总结的这些方法。[https://gist.github.com/derek-duncan-snippets/4228927](https://gist.github.com/derek-duncan-snippets/4228927)

```
body, html { /*body and html have to be 100% to push header down */
    height:100%;
    width: 100%;
}
body > #wrapper { /* all content must be wrapped... #wrapper is my id.  Position relative IMPORTANT */
    position: relative;
    height: auto;
    min-height: 100%;
}
#header {
    height: 100px;
    background: rgba(255,255,255,0.2);
}
#content-wrap { /*#content-wrap is the wrapper for the content without header or footer | padding-bottom = footer height */
    padding-bottom: 100px;
}
#footer { /* position must be absolute and bottom must be 0 */
    height: 100px;
    width: 100%;
    background: rgba(255,255,255,0.2);
    position: absolute;
    bottom: 0;
} 
```

# c# - 是否隐式应用 TransactionScope 直到显式完成？

> ID：16093532
> 
> 赞同：5
> 
> 时间：2013-04-18T21:37:21.877
> 
> 标签：c#, .net, transactionscope

考虑以下方法。

```
DoA()
{
  using (TransactionScope scope = new TransactionScope)
  {
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
      connection.Open();
      SqlCommand command = new SqlCommand(query, connection);
      command.ExecuteNonReader();

      DoB();    

      scope.Complete();
    }
  }
}

DoB()
{
  using (TransactionScope scope = new TransactionScope)
  {
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
      connection.Open();
      SqlCommand command = new SqlCommand(query, connection);
      command.ExecuteNonReader();

      DoC();

      scope.Complete();
    }
  }
}

DoC()
{
  using (SqlConnection connection = new SqlConnection(connectionString))
  {
    connection.Open();
    SqlCommand command = new SqlCommand(query, connection);
    command.ExecuteNonReader();
  }
} 
```

如果我们调用`DoA()`，后续的交互是否会在`DoB()`与SQL Server 相关的 ' 事务`DoC()`的上下文中运行？`DoA()`DoC() 是否在`DoA()`和`DoB()`的事务的上下文中运行？

（还是我严重误解了什么？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T17:00:12.447

从逻辑上讲，所有代码都将是一个事务。嵌套范围不一定会创建新事务（除非您使用 RequiresNew），因此它将是单个事务。现在，每个作用域都必须投票以完成事务，因此在您的第二个作用域中，如果您删除`Complete`, 应该会导致整个事务回滚。

DoC 也将成为交易的一部分；环境事务将检测新连接并自动登记。

请阅读[此处](http://msdn.microsoft.com/en-us/library/ms172152.aspx)的所有详细信息，这些详细信息解释了在环境事务中注册的行为以及不同的选项`Requires`、`RequiresNew`和`Suppress`。

另请注意，如果您的连接不使用完全相同的连接字符串，这将自动将整个事务提升为分布式事务。只是需要注意的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T21:54:39.823

根据安迪的评论编辑：

好像这样的事情会在 SQL 服务器上发生：

```
BEGIN TRANSACTION A

  -- do A's work

  -- B does NOT create a new transaction

    -- do B's work

    -- do C's work

COMMIT TRANSACTION A 
```

`new TransactionScope(TransactionScopeOption.RequiresNew)`如果在 中使用，会发生以下情况`DoB()`。

```
BEGIN TRANSACTION A

  -- do A's work

  BEING TRANSACTION B

    -- do B's work

    -- do C's work

  COMMIT TRANSACTION B
COMMIT TRANSACTION A 
```

# mysql - 如何返回所选行的最大值？

> ID：16093535
> 
> 赞同：0
> 
> 时间：2013-04-18T21:37:37.913
> 
> 标签：mysql, select, row

我正在尝试选择行中的最新日期（不在列中）

它必须是 'articles_date_added' 或 'articles_last_modified' 在这样的表中

```
Id | ... | ... | articles_date_added | articles_last_modified | ... 
```

我的真实查询如下所示：

```
select 
  a.articles_id, a.authors_id, a.articles_date_added,
  a.articles_last_modified,
  IF(a.articles_last_modified >= a.articles_date_added,
     a.articles_last_modified,
     a.articles_date_added) as latestdate,
  ad.articles_viewed,
  ad.articles_name, ad.articles_head_desc_tag,
  COUNT(vh.articles_id) as total_votes,
  SUM(v.vote_value)/COUNT(v.vote_value) AS vote_avg,
  au.authors_name, td.topics_name, a2t.topics_id 
from
  " . TABLE_ARTICLES . " a
  left join " . TABLE_AUTHORS . " au using(authors_id)
  left join VOTE_HISTORY vh using (articles_id)
  left join VOTE v using (vote_id),
  " . TABLE_ARTICLES_DESCRIPTION . " ad,
  " . TABLE_ARTICLES_TO_TOPICS . " a2t
  left join " . TABLE_TOPICS_DESCRIPTION . " td using(topics_id)
where 
  (a.articles_date_available IS NULL or
  to_days(a.articles_date_available) <= to_days(now())) and
  a.articles_status = '1' and a.articles_id = a2t.articles_id and
  ad.articles_id = a2t.articles_id and
  ad.language_id = '" . (int)$languages_id . "'
  and td.language_id = '" . (int)$languages_id . "'
  and a2t.topics_id = '" . (int)$current_topic_id . "' and
  au.authors_id = '" . (int)$_GET['filter_id'] . "' 
GROUP BY a.articles_id 
ORDER BY latestdate desc 
```

如您所见，选择它我使用

```
IF(a.articles_last_modified >= a.articles_date_added,
a.articles_last_modified, a.articles_date_added) as latestdate 
```

但它返回 1054 - 'order 子句中的未知列'latestdate'

为什么？

我在 MySql 5.0 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:58:21.327

由于添加是一种修改，因此如果您的 a.articles_last_modified 在插入行时包含与 a.articles_date_added 相同的日期，那将是一个好主意。

```
UPDATE `articles`
SET `articles_last_modified` = `articles_date_added`
WHERE `articles_last_modified` = '0000-00-00 00:00:00'

ALTER TABLE `articles`
CHANGE COLUMN `articles_last_modified` `articles_last_modified` 
TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP; 
```

这样你就不需要这个条件 where clausule

# html - 模板中使用的翻转图像仅在一页上停止工作

> ID：16093540
> 
> 赞同：-1
> 
> 时间：2013-04-18T21:38:18.047
> 
> 标签：html, dreamweaver, onmouseover, rollover

我的网站上有一个导航菜单功能，它是我在网站所有页面上使用的模板的一部分。当您将鼠标悬停在其中一个导航“按钮”上时，按钮上的箭头会变为蓝色的向下箭头。除主页外，所有页面均正常工作。我查看了代码，但看不到任何可能破坏它的明显内容。同样，主页是使用所有其他页面上使用的相同模板创建的，所以这个让我感到困惑。

有问题的网站：“www.rocksolidbullies.com”

本网站仅由 Adob​​e Dreamweaver 设计。任何帮助/见解将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:49:59.953

Facebook 代码中有一个 javascript 错误：

```
FB.getLoginStatus() called before calling FB.init(). 
```

这会使翻转脚本的执行失败。

我建议您进入您的 FB 帐户并获取 Like 框的新代码。

# javascript - 使用 javascript 对输入字段求和

> ID：16093542
> 
> 赞同：-5
> 
> 时间：2013-04-18T21:38:39.463
> 
> 标签：javascript, sum, each

我如何自动（通过每个函数）对字段求和以对一些输入字段进行求和，如下所示：

```
<input name="price_1" id="price_1" type="text" value="50" />
<input name="price_2" id="price_2" type="text" value="40" />
<input name="price_3" id="price_3" type="text" value="20" />
<input name="price_4" id="price_4" type="text" value="10" />
<input name="price_5" id="price_5" type="text" value="80" /> 
```

非常感谢，如果有人有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:54:29.703

使用 jQuery；

```
<script src="{path to jquery}/resources/js/vendor/jquery-1.9.0.min.js"></script>
<script>
$(document).ready(function() {
 var total = 0;
 $.each($('input'), function(){
   total += parseInt($(this).val(), 10); //use radix 10 to ensure correct parseInt val
 });
 console.log(total);
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:48:58.330

在[jsfiddle 上](http://jsfiddle.net/Xotic750/Ng5Xe/)

```
<input name="price_1" id="price_1" type="text" value="50" />
<input name="price_2" id="price_2" type="text" value="40" />
<input name="price_3" id="price_3" type="text" value="20" />
<input name="price_4" id="price_4" type="text" value="10" />
<input name="price_5" id="price_5" type="text" value="80" />

var inputs = document.getElementsByTagName("input");

function sumIt() {
    var sum = Array.prototype.reduce.call(inputs, function (a, b) {
        return a + parseFloat(b.value);
    }, 0);

    console.log(sum);
}

Array.prototype.forEach.call(inputs, function (input) {
    input.addEventListener("keyup", sumIt, false);
}); 
```

# javascript - 尝试使用 itext 添加 javascript 以添加元素

> ID：16093550
> 
> 赞同：0
> 
> 时间：2013-04-18T21:39:04.653
> 
> 标签：javascript, adobe, itext

我正在尝试将“成本 A”、“成本 B”等元素添加到“总计”中。我想使用 iText（使用 pdf 压模）将它作为 JavaScript 添加到我的 PDF 中。

我尝试了两种方法，但都没有奏效。

1.  ```
    stamper.addJavaScript(
    "var arr = new Array('costA', 'costB');"+
                         "var nameField = this.getField('Total);" +
                         "nameField.setAction('Calculate',‘AFSimple_Calculate('SUM',arr)’)"); 
    ```

2.  ```
    stamper.addJavaScript("this.getField(Total).value  =  (this.getField('costA').value + this.getField('costB').value)"); 
    ```

这是我在SO上的第一篇文章。如果我不清楚，请原谅我......

它现在正在工作：

我严格遵循了 adobe JavaScript 中给出的语法，并在提到的地方使用了双引号而不是单引号......它工作......

```
 stamper.addJavaScript(
                    "var nameField = this.getField('Total');" +
                    "nameField.setAction(\"Calculate\",'AFSimple_Calculate(\"SUM\",new Array(\"costA\", \"costB\"))')"); 
```

**土坯示例**：

```
f.setAction("Calculate",
'AFSimple_Calculate("SUM",
new Array ("line.1",
"line.3"))' ); 
```

# sql - 动态创建表并使用 CSV 值从另一个表中插入

> ID：16093558
> 
> 赞同：1
> 
> 时间：2013-04-18T21:39:43.040
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

在下面的列中有一个包含 CSV 值的表

```
ID  Name    text    
1   SID,DOB 123,12/01/1990  
2   City,State,Zip  NewYork,NewYork,01234   
3   SID,DOB 456,12/21/1990 
```

在这种情况下，需要得到 2 个表，并带有相应的值

```
ID  SID DOB 
1   123 12/01/1990  
3   456 12/21/1990

ID  City    State   Zip
2   NewYork NewYork 01234 
```

有没有办法在 SQL Server 中使用 Cursor 或任何其他方法来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:04:22.047

有几种方法可以做到这一点。我建议的一种方法是将逗号分隔列表中的数据拆分为多行。

由于您使用的是 SQL Server，因此您可以实现递归 CTE 来拆分数据，然后应用 PIVOT 函数来创建所需的列。

```
;with cte (id, NameItem, Name, textItem, text) as
(
  select id,
    cast(left(Name, charindex(',',Name+',')-1) as varchar(50)) NameItem,
    stuff(Name, 1, charindex(',',Name+','), '') Name,
    cast(left(text, charindex(',',text+',')-1) as varchar(50)) textItem,
    stuff(text, 1, charindex(',',text+','), '') text
  from yt
  union all
  select id,
    cast(left(Name, charindex(',',Name+',')-1) as varchar(50)) NameItem,
    stuff(Name, 1, charindex(',',Name+','), '') Name,
    cast(left(text, charindex(',',text+',')-1) as varchar(50)) textItem,
    stuff(text, 1, charindex(',',text+','), '') text
  from cte
  where Name > ''
    and text > ''
) 
select id, SID, DOB
into table1
from
(
  select id, nameitem, textitem
  from cte
  where nameitem in ('SID', 'DOB')
) d
pivot
(
  max(textitem)
  for nameitem in (SID, DOB)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/ddc2b/8)。递归版本会很好用，但如果你有一个大数据集，你可能会遇到一些性能问题，所以你也可以使用用户定义的函数来拆分数据：

```
create FUNCTION [dbo].[Split](@String1 varchar(MAX), @String2 varchar(MAX), @Delimiter char(1))       
returns @temptable TABLE (colName varchar(MAX), colValue varchar(max))       
as       
begin      
    declare @idx1 int       
    declare @slice1 varchar(8000)  
    declare @idx2 int       
    declare @slice2 varchar(8000)     

    select @idx1 = 1       
        if len(@String1)<1 or @String1 is null  return       

    while @idx1 != 0       
    begin       
        set @idx1 = charindex(@Delimiter,@String1)  
        set @idx2 = charindex(@Delimiter,@String2) 
        if @idx1 !=0    
          begin
            set @slice1 = left(@String1,@idx1 - 1)   
            set @slice2 = left(@String2,@idx2 - 1)  
          end
        else  
          begin
            set @slice1 = @String1   
            set @slice2 = @String2
          end

        if(len(@slice1)>0)  
            insert into @temptable(colName, colValue) values(@slice1, @slice2)       

        set @String1 = right(@String1,len(@String1) - @idx1) 
        set @String2 = right(@String2,len(@String2) - @idx2) 
        if len(@String1) = 0 break       
    end   
return 
end; 
```

然后您可以使用 CROSS APPLY 来获取每一行的结果：

```
select id, SID, DOB
into table1
from
(
  select t.id,
    c.colname,
    c.colvalue
  from yt t
  cross apply dbo.split(t.name, t.text, ',') c
  where c.colname in ('SID', 'DOB')
) src
pivot
(
  max(colvalue)
  for colname in (SID, DOB)
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3fae6/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:52:33.360

您需要将其作为一个多步骤 ETL 项目来处理。我可能会先将这两种类型的行导出到几个临时表中。因此，例如：

```
select * from yourtable        /* rows that start with a number */
where substring(text,1,1) in 
('0','1','2','3','4','5','6','7','8','9')  

select * from yourtable        /* rows that don't start with a number */
where substring(text,1,1) 
not in ('0','1','2','3','4','5','6','7','8','9')

/* or simply this to follow your example explicitly */

select * from yourtable where name like 'sid%' 

select * from yourtable where name like 'city%' 
```

将这两种类型分开后，您可以使用在互联网上很容易找到的已编写的拆分函数之一将它们拆分出来。

Aaron Bertrand（他经常在这里）写了一篇很棒的文章，介绍了使用 SQL 拆分逗号分隔字符串的各种方法。这里对每种方法进行比较和对比。

[http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings](http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings)

如果您的行数很少（假设低于 50k）并且这将是一次操作，而不是选择最简单的方法，并且不要太担心所有性能数字。

如果您有大量行，或者这是一个将一直运行的 ETL 流程，那么您真的需要注意这些东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T00:23:08.050

使用游标构建临时表的简单解决方案。这具有使所有列都为 VARCHAR 的限制，并且对于大量数据来说会很慢。

```
--** Set up example data
DECLARE @Source TABLE (ID INT, Name VARCHAR(50), [text] VARCHAR(200));
INSERT  INTO @Source
        (ID, Name, [text])
VALUES  (1, 'SID,DOB', '123,12/01/1990')
,       (2, 'City,State,Zip', 'NewYork,NewYork,01234')
,       (3, 'SID,DOB', '456,12/21/1990');

--** Declare variables
DECLARE @Name VARCHAR(200) = '';
DECLARE @Text VARCHAR(1000) = '';
DECLARE @SQL VARCHAR(MAX);

--** Set up cursor for the tables
DECLARE cursor_table CURSOR FAST_FORWARD READ_ONLY FOR
SELECT s.Name
  FROM @Source AS s
 GROUP BY Name;

OPEN cursor_table

FETCH NEXT FROM cursor_table INTO @Name;

WHILE @@FETCH_STATUS = 0
BEGIN
    --** Dynamically create a temp table with the specified columns
    SET @SQL = 'CREATE TABLE ##Table  (' + REPLACE(@Name, ',', ' VARCHAR(50),') + ' VARCHAR(50));';
    EXEC(@SQL);

    --** Set up cursor to insert the rows
    DECLARE row_cursor CURSOR FAST_FORWARD READ_ONLY FOR
     SELECT s.Text
       FROM @Source AS s
      WHERE Name = @Name;

    OPEN row_cursor;

    FETCH NEXT FROM row_cursor INTO @Text;

    WHILE @@FETCH_STATUS = 0
    BEGIN
        --** Dynamically insert the row  
        SELECT @SQL = 'INSERT INTO ##Table VALUES (''' + REPLACE(@Text, ',', ''',''') + ''');';
        EXEC(@SQL);

        FETCH NEXT FROM row_cursor INTO @Text;
    END

    --** Display the table
    SELECT *
    FROM ##Table;

    --** Housekeeping
    CLOSE row_cursor;
    DEALLOCATE row_cursor;
    DROP TABLE ##Table;

    FETCH NEXT FROM cursor_table INTO @Name;
END

CLOSE cursor_table;
DEALLOCATE cursor_table; 
```

# hibernate - 带连接表的单向一对多映射

> ID：16093561
> 
> 赞同：1
> 
> 时间：2013-04-18T21:39:58.157
> 
> 标签：hibernate, jpa, one-to-many

为什么与连接表的单向一对多映射比在目标表上使用外键的单向一对多映射具有更好的性能？

我在一些文档中读到，出于性能目的，在映射单向一对多关联时建议使用连接表策略。我想知道为什么这种方法比其他方法带来更好的性能。

# twitter-bootstrap - 引导模式不显示

> ID：16093568
> 
> 赞同：52
> 
> 时间：2013-04-18T21:40:13.020
> 
> 标签：twitter-bootstrap, modal-dialog

我从 twitter bootstrap 复制并粘贴了示例代码，以在我的 Rails 3.2 应用程序中创建一个基本的模式窗口：

```
<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div>

<a href= "#myModal"  role="button" class="btn" data-toggle="modal">Launch demo modal</a> 
```

它不工作。这不是因为 jQuery 或脚本没有加载，因为 a）它不需要加载任何 js，因为它使用数据定位和 b）我检查了控制台，一切都很好。

这也不是因为我同时包含 boostrap.js 和 bootstrap-modal.js ......我已经检查过，但我没有。

我不知所措。它应该可以工作。其他引导 js 在该站点上运行良好。

我唯一能想到的是它与 .hide 和 .fade 类的定义有关——当我把它们拿出来时，模态显示得很好。当我包括它们时，它根本不会出现。

jQuery UI 会干扰它吗？

请向我询问您可能需要帮助我的任何进一步信息...

更新：

所以我想我看到了问题，但我不知道如何解决它。当我检查控制台时，在顶部我看到了

```
element.style {
display: none;
} 
```

不知何故现在是 div 的一部分，所以在控制台中它看起来像这样：

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;" > 
```

但我不知道为什么要添加它，或者从哪里添加它。我怎样才能找到这个？

谢谢

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-19T01:01:25.603

我追查了原因。

只是为了给任何提出这个问题的人一些普遍的用处。如果您无法找出问题所在，请尝试在您的应用程序的任何样式表中对任何“模式”、“淡入”、“淡入”和“隐藏”类进行“搜索全部”。

我在一个随机的css文件中定义了一个'fade'的单个实例，这就是阻止它显示的原因，因为它覆盖了引导程序。删除引用后，一切正常。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2014-01-30T15:52:49.903

如果您已从 Bootstrap 2.3.2 升级到 Bootstrap 3，那么您需要从任何模态 div 中删除“隐藏”类。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-09-24T18:09:06.733

如果您正在运行 Bootstrap 4，则可能是由于 Bootstrap css 中的“.fade:not(.show) { opacity: 0 }”而您的模态没有类“show”。它没有“show”类的原因可能是因为您的页面没有加载 jQuery、Popper 和 Bootstrap Javascript 文件。

（Bootstrap Javascript 会自动将“show”类添加到您的对话框中。）

参考：[https ://getbootstrap.com/docs/4.3/getting-started/introduction/](https://getbootstrap.com/docs/4.3/getting-started/introduction/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-27T10:34:12.480

把你的代码改成这样的，

```
<!-- Modal -->
<div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body…&lt;/p>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div>

<a class="btn" data-target="#myModel" role="button" data-toggle="modal">Launch demo modal</a>
```

并尝试使用**data-target="#ModelId"**一次。也许这是导致问题的可能原因。

其次，如果您不止一次包含 JQuery，请将其删除并仅包含一次。它有时也会阻止模型。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-06-06T02:39:53.400

只是为了详细说明@jfdimark 的答案。这很可能是由于加载的 CSS 中某处的相同 css 类名引起的。因此，不要将模态类定义为“模态淡入淡出”，而是将其更改为“模态淡入淡出”，然后再试一次。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2022-02-08T17:01:06.963

我有同样的问题。对我来说，原因是在启动按钮中使用了带有过时 data-toogle 和 data-target 属性的 Bootstrap 5：

修正后

```
<button type="button" class="btn" data-toggle="modal" data-target="#myModal" > 
```

到

```
<button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#myModal"> 
```

它运行正确。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-09-23T07:19:46.770

也许是一个非常罕见的情况，但我无法添加评论，所以将其留在这里以防它帮助某人：我在处理其他人的代码时遇到了类似的问题，当我添加“.fade”类时，模式没有显示，问题是.modal-backdrop 的一些 CSS：

```
.modal-backdrop {display: none;} 
```

删除后，模态显示正常。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-11-08T02:04:21.637

我有同样的问题，我意识到我`<button>`有一个`type="submit"`当 Bootstrap 声明它需要`type="button"`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-25T13:23:33.153

作为 Paula，我遇到了同样的问题，我的模式没有显示，我意识到我的按钮在一个 '< form >' 标签中......：

```
<button class="btn btn-danger" data-toggle="modal" data-target="#deleteItemModal">Delete</button> 
```

我刚刚将 <button> 替换为 <a>，并且我的模态运行良好

```
<a class="btn btn-danger" data-toggle="modal" data-target="#deleteItemModal">Delete</a> 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-03-02T17:54:47.827

如果您使用自定义 CSS 而不是将模态类定义为“模态淡入”或“模态淡入”，请将其更改为 HTML 页面中的“模态”，然后再试一次。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-11-18T10:37:36.650

我的 < li > 中有我的模态 < div >.... 不好。

外面工作正常:-)

```
<div class="modal fade" id="confirm-logout" tabindex="-1" role="dialog" aria-labelledby="logoutLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">....</h4>
            </div>

            <div class="modal-body">
                <p>....</p>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <a class="btn btn-danger btn-ok">OK</a>
            </div>
        </div>
    </div>
</div>
<li>
    .....
</li> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-04-06T14:31:12.530

如果您使用 angular 并尝试创建一个包含自定义模态的指令，模态背景将显示，但模态本身不会显示，除非您在指令上设置 replace: true。

打字稿指令：

```
export class myModalDirective implements ng.IDirective {
    static Register = () => {
        angular.module('app').directive('myModal', () => { return new myModalDirective () });
    }
    templateUrl = 'mymodal.html'    
restrict = 'E';
    replace = true;
    scope = {
        show: '='
    }
    link = (scope: any, element: ng.IAugmentedJQuery, attrs: ng.IAttributes, ctrl: any) => {
        var vm = this;
        scope.$watch(function () { return scope.show; }, function (vis) {
            if (vis) {
                $(element).modal('show');
            } else {
                $(element).modal('hide');
            }
        });

    }
    constructor () {
    }
} 
```

模态 HTML

```
<div class="modal fade" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Modal Title</h4>
                </div>
                <div class="modal-body">
                </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-01-28T16:07:22.430

我有同样的问题。

**解决方案**：我将模态的**DIV**放在主 HTML 的***最上层范围内***（由于使用**Jinja2** 块，我的模态嵌套在其他一些**DIV**中间的某个地方。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-05-09T03:52:39.977

请

**1.**折叠你所有的 ># VsCode 并验证你现在已经关闭，再次验证其他和其他你可以使用提议的内容来为我最近复制和粘贴其他引导模板的模式和它非常危险，因为您不知道是否已正确关闭，或者您是否仍在使用其他陌生页面的引导模板最初仅在设计师学生将其上传到“免费”页面时出现错误...**使用 Bootstrap 免费模板需要您自担风险**。

**2.**验证模态的顺序（modal fade,modal-dialog,modal-content,(modal-header,modal-body,modal-footer)）。

**3.**验证方法 modal show 是否像这样正确地扭动：*$('#myModal').modal('show')* ....WARNING!!....注意这个例子是区分大小写的。

**4.** 验证您的模态是否像这样正确旋转：div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="ModalVerLabel" aria-hidden="true"。 ...警告!!!....请注意，此示例**区分大小写**....并且没有 # 指示符。

**5** 验证 id modal 和 aria-labelledby 在我的情况下是唯一**的-SENSITIVE** ....并且没有#指示符

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2022-01-06T01:03:16.020

版本不匹配可能会导致此问题。

我今天遇到了这个问题，最终是由不同版本的 bootstrap.css 和 bootstrap.js 引起的。CSS 文件是 3.7，JS 是 5.1，一旦我更新到 CSS 5.1，一切都到位了。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-03-21T01:49:42.100

遇到这个问题后，我惊讶地发现这些解决方案都不起作用，因为它看起来相当简单，而且我在不同的页面上也有类似的标记。

通过我的配置，我将现有的 jQuery 代码绑定到触发模态的同一个选择器。一旦开始消除过程，我所要做的就是`e.stopPropagation()`在我现有的脚本中评论/删除。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-01-31T22:38:58.440

为了在调用 .modal('show') 时显示我的模态

我变了：

```
modal.on('loaded.bs.modal', function() 
```

到：

```
modal.on('shown.bs.modal', function() { 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-06-15T13:26:21.683

1.  检查所有js文件，应该保持顺序。
2.  该顺序应保持为

```
 -> jquery.min.js
    -> bootstrap.min.js
    -> any external js files 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-06-30T21:20:26.177

**有时还有其他 CSS 冲突**-`CSS priority issue.`

要检查，请转到浏览器上的模态渐变类，然后检查是否有任何自定义文件出现在顶部。例如`.fade:not(.show)`它使用自己的信息而不是引导程序。如果你找到了，那么你必须根据你的需要改变它。希望这可以帮助。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-02-10T22:02:35.097

我正在使用 ui-bootstrap-tpls.js，对我有用的是我在整个项目中搜索了淡入淡出，并找到了在上述文件中设置的 3 个位置。

我查看了查找结果，发现其中 2 个更改是在模态上完成的，而另一个是在工具提示动画上设置的。注意下面代码的区别

```
'uib-modal-animation-class': 'fade'
'tooltip-animation-class="fade"' 
```

我为解决这个问题所做的是为 uib-modal 添加 show 类

```
'uib-modal-animation-class': 'fade show' 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-02-21T15:30:40.900

将模态框放在标签之后是个好主意，这样您就可以确定没有父元素样式会影响它——在我的例子中，模态框被隐藏了，因为父 div 被隐藏了。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-05-29T01:23:07.767

我之前的代码也遇到过这个问题，我修复它的方式实际上是获得了更新版本的 Bootstrap。我之前从一个 React 应用程序转到一个完整的 JS/EJS/Node 应用程序，并且我有一个旧版本的引导程序（它是 4.0）。我从今天起升级到 v5.0 并更改了引导 css/js 链接。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-01-28T07:26:31.653

可能不是100%相关。但是由于我在故障排除过程中多次遇到此线程，所以我认为我可以分享我的结果。

当我单击“显示模态”按钮时，背景变得模糊，但没有显示模态。同样在我发现在某些屏幕尺寸下模态不会显示之前。

我的故障排除结果是模态的父级具有以下 css：

```
@media (min-width: 768px)
.d-md-none {
    display: none !important;
} 
```

当禁用 display-none 时，模态出现了 :) 所以我解决它的方法是将模态移动到另一个 css 没有对其施展魔法的地方。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-02-22T17:09:18.847

确保你`<div class="modal-dialog">`有`<div class="modal fade">`

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2020-11-14T08:04:41.740

从按钮类型中删除 data-target 属性。然后在按钮标签中添加 onClick="$('#your_modal_name').modal('show')" 。我希望它会在我遇到同样的问题时起作用，我通过 jQuery 调用显示模式的类来解决这个问题。

* * *

## 回答 #26

> 赞同：-4
> 
> 时间：2017-09-17T14:55:18.890

我刚遇到这个问题，发现自定义 CSS 样式表文本颜色：#ffffff 淹没了文本内容，因为模型背景颜色相同！即 .model-content{ background-color:#ffffff;} 确保通过添加以下 .modal-content{color:#646464 !important;} 在您的自定义样式表中覆盖它
可能会有所帮助。

* * *

## 回答 #27

> 赞同：-4
> 
> 时间：2018-02-01T13:37:02.700

您应该导入 jquery 和 bootstrap.min.js。

将此添加到 angular-cli：

```
"scripts": ["../node_modules/jquery/dist/jquery.min.js",
        "../node_modules/bootstrap/dist/js/bootstrap.min.js"] 
```

确保你有它的文件夹。

# c# - 高级实体框架查询示例

> ID：16093571
> 
> 赞同：0
> 
> 时间：2013-04-18T21:40:28.903
> 
> 标签：c#, linq, entity-framework

这是我的 sql 命令。

```
 select c.nombrecompleto fullname,c.direccion street ,c.telefono phonenumber,
c.limitecredito creditlimit,sum(vd.preciofinal) balance , case when max(a.fechacreacion) is null then '' else max(a.fechacreacion) end
lastpay 
,
case when u.nombre is null then '' else u.nombre  end paidTo
from cliente c 
inner join venta v on c.idcliente=v.idcliente 
inner join ventadetalle vd on v.idventa=vd.idventa
inner join prestamo p on p.idventa=v.idventa
left join abono a on c.idcliente=a.idcliente
left join usuario u on a.creadopor=u.idusuario
where 
c.estatus=1 and
v.estatus=1 and
vd.estatus=1 and
p.estatus=1 and
(a.estatus is null or a.estatus=1)
and (u.estatus=1 or u.estatus is null)
group by c.nombrecompleto,c.direccion,c.telefono,c.limitecredito
,u.nombre
having sum(vd.preciofinal)>0 
```

我尝试将其转换为实体框架，但我不能。这是我得到的（我没有完成）

```
 from c   in Clientes
join v   in Ventas on c.Idcliente equals v.Idcliente
join vd  in Ventadetalles on v.Idventa equals vd.Idventa
join p   in Prestamos on v.Idventa equals p.Idventa 
join a   in Abonos on c.Idcliente equals a.Idcliente into al
from a in al.DefaultIfEmpty() 
join u   in Usuarios on a.Creadopor equals u.Idusuario into ul
from u in ul.DefaultIfEmpty() 
where 
c.Estatus==1 &&
v.Estatus==1 &&
vd.Estatus==1 &&
p.Estatus==1 &&
(a.Estatus==1 || a.Estatus== null) &&
(u.Estatus==1 || u.Estatus== null) 

group new{c.Idcliente,vd,a} by new { c.Nombrecompleto, c.Direccion, c.Telefono, c.Limitecredito, 
usuarionombre=((u.Nombre!=null)?u.Nombre:u.Nombre)  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:54:52.120

不确定，但我相信我有

```
from c   in Clientes
join v   in Ventas on c.Idcliente equals v.Idcliente
join vd  in Ventadetalles on v.Idventa equals vd.Idventa
join p   in Prestamos on v.Idventa equals p.Idventa 
join a   in Abonos on c.Idcliente equals a.Idcliente into al /*this line*/
from a in al.DefaultIfEmpty() /*and this is for to do left outer join or left join*/
join u   in Usuarios on a.Creadopor equals u.Idusuario into ul 
from u in ul.DefaultIfEmpty() /*so you see here other left join*/
where 
c.Estatus==1 &&
v.Estatus==1 &&
vd.Estatus==1 &&
p.Estatus==1 &&
(a.Estatus==1 || a.Estatus== null) &&
(u.Estatus==1 || u.Estatus== null) /*this is for to do (a.estatus is null or a.estatus=1)*/

group new
{
vd.Preciofinal,a.Fechacreacion /*these are the max or sum or min columns */} 
by new {c.Idcliente, c.Nombrecompleto, c.Direccion, c.Telefono, c.Limitecredito, 
    usuarionombre=((u.Nombre!=null)?u.Nombre:u.Nombre/*the group by part in a normal sql command */
)  
    }
    into agrupacion /*inside a new table */
    where agrupacion.Sum(x=> x.Preciofinal)>0 /*this would be a having sum in a normal sql command */
    select new {
/*my columns i needs only and the sum and max*/
agrupacion.Key.Idcliente,agrupacion.Key.Nombrecompleto,agrupacion.Key.Direccion,agrupacion.Key.Telefono,
    agrupacion.Key.Limitecredito,agrupacion.Key.usuarionombre, saldo=agrupacion.Sum(x=> x.Preciofinal)
    ,ultimopago=((agrupacion.Max(x=> x.Fechacreacion)!=null)?agrupacion.Max(x=> x.Fechacreacion):DateTime.Now /*ultimopago would be a case when max(fechacreacion )is null then getdate() else max(fechaultimopago)* end as ultimopago/)
    } 
```

我希望这对其他人有帮助

# ruby-on-rails - 偶尔失败的 rspec 测试

> ID：16093572
> 
> 赞同：0
> 
> 时间：2013-04-18T21:40:32.320
> 
> 标签：ruby-on-rails, ruby, rspec

我有一个大部分时间都通过的测试：

```
....

Finished in 1.58 seconds
4 examples, 0 failures

Randomized with seed 29966 
```

但有时会失败：

```
.F..

Failures:

  1) Admin::SessionsController POST create authenticates correct users submissions
     Failure/Error: expect(session[:user_id]).to be @user.id

       expected #<Fixnum:3> => 1
            got #<NilClass:4> => nil

       Compared using equal?, which compares object identity,
       but expected and actual are not the same object. Use
       `expect(actual).to eq(expected)` if you don't care about
       object identity in this example.
     # ./spec/controllers/admin/sessions_controller_spec.rb:12:in `block (3 levels) in <top (required)>'

Finished in 1.24 seconds
4 examples, 1 failure

Failed examples:

rspec ./spec/controllers/admin/sessions_controller_spec.rb:10 
```

任何人都可以在其中看到任何特定的押韵或原因吗？

规格：

```
 describe "POST create" do
    it "authenticates correct users submissions" do
      post :create, email: @user.email, password: @user.password
      expect(session[:user_id]).to be @user.id
    end

    it "correctly sets @invalid flag" do
      post :create, email: "wrong", password: "wrong"
      assigns(:invalid).should be_true
    end
  end 
```

正在测试的控制器动作：

```
 def create
    user = Admin::User.authenticate(params[:email], params[:password])
    if user
      session[:user_id] = user.id
      redirect_to admin_root_path
    else
      @invalid = true
      render :new
    end
  end 
```

任何帮助将非常感激。让我知道是否需要更多详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T00:23:54.697

这可能是因为 RSpec 默认以随机顺序运行测试。

看起来您引用的测试是在创建用户之前被调用的。如果要解决它，请确保在 before 块中创建用户。或者，可能是因为用户已经存在，因此操作失败。

# html - 摆脱先前设置的宽度

> ID：16093577
> 
> 赞同：1
> 
> 时间：2013-04-18T21:40:54.693
> 
> 标签：html, css

我的宽度设置为：

```
body {
    width: 980px;
} 
```

但是，在一个页面上，我需要使宽度适合页面（它是一个大表，应该与浏览器允许的一样大。我将如何删除先前设置的宽度？我尝试这样做：

```
body {
    width: none!important;
} 
```

但没有运气。我需要在这里做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:41:43.897

你应该使用 width: auto !important

```
body {
    width: auto !important;
} 
```

# php - symfony2 缓存/日志权限问题

> ID：16093582
> 
> 赞同：0
> 
> 时间：2013-04-18T21:41:21.223
> 
> 标签：php, apache, caching, symfony, permissions

我刚刚在生产服务器上上传了一个简单的 symfony2 应用程序，我得到了这个配置错误：

```
2 MAJOR PROBLEMS
Change the permissions of the "app/cache/" directory so that the web server can write into it.
Change the permissions of the "app/logs/" directory so that the web server can write into it. 
```

使用：umask(0000) 编辑“app/console”、“web/app.php”和“web/app_dev.php”不起作用，如果我用 FileZIlla 右键单击​​该文件夹，它们的权限已经是 777。所以？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:11:01.263

您很可能需要递归设置权限。我猜 FileZilla 有这个选项，如果没有，ssh 进入盒子，然后运行（用实际路径替换 /path/to）

```
sudo chmod 777 -R /path/to/app/cache
sudo chmod 777 -R /path/to/app/logs 
```

旁注：将权限设置为 777 通常是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T01:01:01.670

`umask(0000)`实际上并没有增加脚本可用的权限。它只是确保可以从命令行和 Web 服务器访问由这些脚本创建的文件和目录。如果您不使用命令行，则可能根本不需要它。

# c# - 用于添加应用程序的 Windows Azure Graph API

> ID：16093584
> 
> 赞同：3
> 
> 时间：2013-04-18T21:41:23.550
> 
> 标签：c#, azure

我正在尝试使用 Windows Azure Active Directory (WAAD) Graph API 将应用程序添加到我的 WAAD 租户。我已成功使用 API 创建用户。使用 API 添加应用程序时，我收到授权异常：

> Authorization_RequestDenied：权限不足，无法完成操作

执行相同的步骤来添加用户可以正常工作。

我按照这里的指南：http: [//msdn.microsoft.com/en-us/library/windowsazure/dn151791.aspx#BKMK_Configuring](http://msdn.microsoft.com/en-us/library/windowsazure/dn151791.aspx#BKMK_Configuring)和这里的示例：http: [//code.msdn.microsoft.com/Write-Sample- App-for-79e55502](http://code.msdn.microsoft.com/Write-Sample-App-for-79e55502)开始使用。

这是我的代码示例：

```
//get the tenantName
var tenantName = ClaimsPrincipal.Current.FindFirst("http://schemas.microsoft.com/identity/claims/tenantid").Value;

// retrieve the clientId and password values from the Web.config file
var clientId = ConfigurationManager.AppSettings["ClientId"];
var password = ConfigurationManager.AppSettings["Password"];

// get a token using the helper
var token = DirectoryDataServiceAuthorizationHelper.GetAuthorizationToken(tenantName, clientId, password);

// initialize a graphService instance using the token acquired from previous step
var graphService = new DirectoryDataService(tenantName, token);

// Create and save the application
var application = new Application();
application.availableToOtherTenants = false;
application.displayName = "some display name";
application.homepage = "https://localhost/";
application.identifierUris.Add("https://localhost/");
application.replyUrls.Add("https://localhost/");
graphService.AddTodirectoryObjects(application);
graphService.SaveChanges(); 
```

我是否需要设置权限以允许通过 Graph API 创建应用程序？我无法在 Azure 管理控制台中找到允许我执行此操作的位置。

我是否使用正确的代码来添加应用程序？关于如何使用应用程序的示例并不多。我假设我需要使用 AddTodirectoryObjects 来保存应用程序，因为我没有找到应用程序的“AddTo...”方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:02:59.270

您的服务主体似乎扮演了错误的角色。我猜它在用户帐户管理员角色下。尝试将其添加到其他角色，例如：公司管理员用于测试目的......

# c# - Win 8 - 自定义从主页打开的每个窗口（GridApp 模板）

> ID：16093589
> 
> 赞同：0
> 
> 时间：2013-04-18T21:41:51.897
> 
> 标签：c#, visual-studio, windows-8, blend

我在 Visual C# for Win 8 Tablet 中使用拆分应用程序模板（类似于 GridApp）制作了一个应用程序。我已经定制了整个主页，只有 3 个单元格，这太棒了！现在我想为每个窗口关联一个自定义页面...例如，从主页单击第一个单元格，它将打开一个包含各种字段（姓名、电话等）的表单。如果我单击主页的第二个单元格，它将打开一个带有视频的窗口，如果我单击第三个单元格，它将打开一个列表视图...

我已经阅读了很多教程，但没有人谈论这个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:44:46.750

您应该在每个按钮中放置一个按钮并处理每个按钮的 Tap-events 并将其发送到相应的页面：

```
<Button Tap="Button1_Tap" />
<Button Tap="Button2_Tap" />
<Button Tap="Button3_Tap" /> 
```

并在您的代码中：

```
public void Button1_Tap(object sender, GestureEventArgs e)
{
    NavigationService.Navigate(typeof(PageAudio));
}

.
.
. 
```

注意：我在此处的编辑器中输入了此代码，您可能需要更正一些语法错误。

# php - 使用 Apache Linux 服务器上传 PHP 文件

> ID：16093593
> 
> 赞同：0
> 
> 时间：2013-04-18T21:42:03.593
> 
> 标签：php, apache, file-upload

我无法将文件上传到我的服务器。我正在使用网络上的另一台计算机作为使用 Apache 运行 Linux 的服务器。我正在尝试将 pdf 文件上传到我的服务器，但无论文件的大小或名称如何，我都无法上传文件。当`echo $_SERVER['DOCUMENT_ROOT']`我得到`/var/www`. 我的文件夹结构是`var/www/phpfiles/uploads`. 这些文件`addentry.php`，`phpupload.php`都`test.php`在这个路径中`var/www/phpfiles`。

当我上传一个文件时，我得到了正确的文件名、大小和 tmp，但我没有得到“上传”或“根上传”，并且文件没有移动到`var/www/phpfiles/uploads`. 任何帮助将不胜感激。

addentry.php

```
<div id="uploadPDF">
    <iframe id="iframe_display" src="test.php" width="400" height="100">

    </iframe>

</div> 
```

phpupload.php

```
$tempName = $_POST[instrumentPDF];
$fileSize = $_FILES['instrumentPDF']['size'];
$fileType = $_FILES['instrumentPDF']['type'];
$fileName = $_FILES['instrumentPDF']['name'];
$tmp_name  = $_FILES['instrumentPDF']['tmp_name'];

echo ("file size: " . $fileSize  . "<br>");
    echo ("<br>");
    echo ("file name: " . $fileName . "<br>");
    echo ("<br>");
    echo ("pdf Test: " . $pdfTest . "<br>");
    echo ("<br>");
    echo ("pdf Temp_Name: " . $tmp_name . "<br>");

if(move_uploaded_file($tmp_name, "uploads/" . $fileName)){
    echo ("<br>");
    echo ("Uploaded");
    echo ("<br>");
}

if(move_uploaded_file($tmp_name, $_SERVER['DOCUMENT_ROOT']."/uploads/".$fileName)){
    echo ("<br>");
    echo ("Root Uploaded");
    echo ("<br>");
} 
```

测试.php

```
<form enctype="multipart/form-data" method="POST" action="phpupload.php" name="aform" id="PDFform">
    <table width="300" height="25" border="1">
      <tr>
        <td><label>Instrument (only pdf)</label> <input type="hidden" name="MAX_FILE_SIZE" value="104857600" /></td>
        <td><input name="instrumentPDF" type="file"  onchange="check_file()"/></td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td><input name="Submit" type="Submit" align="absmiddle" /></td>
      </tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:51:37.367

我同意阿迪迪 - 它通常与权限有关。这是另一篇关于允许上传的文件夹[的适当权限的帖子：使用 PHP/Apache 上传文件夹的正确权限是什么？](https://stackoverflow.com/questions/10990/what-are-the-proper-permissions-for-an-upload-folder-with-php-apache)

# python - 熊猫排序的内存占用更小？

> ID：16093594
> 
> 赞同：1
> 
> 时间：2013-04-18T21:42:16.747
> 
> 标签：python, pandas

我有一个大熊猫系列（5000 万+），我需要使用 32 位 Python 进行排序，但在排序过程中出现 MemoryError。看来熊猫的排序算法在排序过程中会生成几个临时数组。我知道我可以改用 numpy 的排序算法，但是我可以使用 pandas API 中具有较小内存占用的替代排序算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:31:59.313

2 种可能性

1）这本质上是 sort 所做的，但不使用临时变量（请注意，如果您在任何地方都有 NaN 这将不起作用）

```
In [1]: s = Series(np.random.rand(10))

In [3]: np.argsort(s.values)
Out[3]: array([8, 0, 1, 3, 9, 6, 2, 7, 5, 4])

In [4]: s[np.argsort(s.values)]
Out[4]: 
8    0.033948
0    0.183882
1    0.236021
3    0.372763
9    0.383721
6    0.489090
2    0.498036
7    0.676246
5    0.709906
4    0.738510
dtype: float64 
```

2) 这还没有实现，但是你可以写入一个 HDFStore 表；有一个 readSorted 方法可以按排序顺序读回它。尝试方法1），如果这不起作用，那么我可以给你一个小脚本来做到这一点，我想

# javascript - JavaScript 正则表达式规则正在破坏 ASP.NET 缩小

> ID：16093598
> 
> 赞同：3
> 
> 时间：2013-04-18T21:42:32.183
> 
> 标签：javascript, asp.net, regex

我有这个功能，它在所有浏览器中都能正常工作：

```
 cleanKey = function( key ){
        return key.replace( /[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g, "-" );
    }; 
```

但是，我的 ASP.NET MVC 3 项目在尝试缩小该代码时会引发正则表达式语法错误：

> 运行时错误 JS5017：正则表达式中的语法错误
> /[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d \u203f\u2040\u2070-\u218f]/g

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T22:54:28.113

您可能想尝试`\u037f`，而不是`\u37f`因为[MSDN 指定](http://msdn.microsoft.com/en-us/library/ae5bf541%28v=vs.90%29.aspx)：

> **\xn**
> 匹配 n，其中 n 是十六进制转义值。
> 十六进制转义值必须正好是两位数。
> *例如，'\x41' 匹配“A”。'\x041' 等价于 '\x04' & "1"。*
> 允许在正则表达式中使用 ASCII 代码。
> 
> **\un**
> 匹配 n，其中 n 是一个 Unicode 字符，*表示为四个十六进制数字*。
> 例如，\u00A9 匹配版权符号 (©)。

另外，我想知道，这是一个有效的范围：（`\xf8-\u037d` 根据 asp.net minify 工具）？
您可能想尝试一下`\u00f8-\u037d`。
（可能会添加`\xf8-\xff`以补偿本地化代码页的上半部分与该区域中的 Unicode 之间的差异。）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T03:33:56.310

接受的答案是正确的。但是，将来您可以使用[www.debuggex.com](http://www.debuggex.com/?re=%5B%5E-._0-9A-Za-z%5Cxb7%5Cxc0-%5Cxd6%5Cxd8-%5Cxf6%5Cxf8-%5Cu037d%5Cu37f-%5Cu1fff%5Cu200c-%5Cu200d%5Cu203f%5Cu2040%5Cu2070-%5Cu218f%5D&flags=&str=)，它会立即为您突出显示错误并给您一个解释。

在这种情况下，`There must be exactly four hex digits after "\u"`。

希望有帮助:)

# c++ - 如何将对 int8_t 的引用转换为对 uint8_t 的引用？

> ID：16093599
> 
> 赞同：3
> 
> 时间：2013-04-18T21:42:39.700
> 
> 标签：c++, reference, casting

我尝试将 int8_t 的引用转换为 uint8_t 的引用。

我有以下代码：

```
inline mtype& operator&(mtype& mt, uint8_t& va) {
  // do something
  // ...

  return mt;
}

inline mtype& operator&(mtype& mt, int8_t& va) {
  // do the same but signed
  // ...

  return mt;
} 
```

由于两个重载都做同样的事情，我想[干燥](http://de.wikipedia.org/wiki/Don%E2%80%99t_repeat_yourself)（或更好的drm），所以我想用 . 调用第一个运算符`casted va`。但我该怎么做？这行不通。

```
inline mtype& operator&(mtype& mt, int8_t& va) {
  return mt& static_cast<uint8_t>(va); //  error: no match for 'operator&' in 'mt & (uint8_t)va'
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T21:46:18.240

您想*重新解释*数据是什么。

```
inline mtype& operator&(mtype& mt, int8_t& va) {
  return mt& reinterpret_cast<uint8_t&>(va);
} 
```

不过要小心。根据“做相同但签名”的含义，您可能不会通过调用相同的函数并假设数据始终是*unsigned*来做正确的事情。

如果您的代码*正在*执行具有唯一签名/未签名逻辑的工作（尽管代码看起来相同），您将需要使用模板函数来生成正确的特定于类型的逻辑。

```
template< Typename T >
mtype& do_the_work( mtype& mt, T& va )
{
  // do something

  // (Here's an example of code that LOOKS the same, but doesn't DO the same)
  va = va >> 1;
}

inline mtype& operator&(mtype& mt, uint8_t& va) {
  return do_the_work( mt, va );
}

inline mtype& operator&(mtype& mt, int8_t& va) {
  return do_the_work( mt, va );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:46:07.537

```
inline mtype& operator&(mtype& mt, int8_t& va) {
  return mt & reinterpret_cast<uint8_t&>(va);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T21:46:26.447

您得到的错误是因为强制转换导致值而不是引用。

你应该使用：

```
reinterpret_cast<uint8_t&>(va) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T21:53:40.897

您的问题是您正在转换为非常量值，但您的函数需要非常量引用。

几乎可以肯定，您*真正*想要的是运算符按值接受第二个参数（如果您`operator&`确实改变了它的右手运算符，您需要重新考虑您的运算符）：

```
inline mtype& operator&(mtype& mt, uint8_t va) {
  // do something
  // ...

  return mt;
}

inline mtype& operator&(mtype& mt, int8_t va) {
  return mt& static_cast<uint8_t>(va); //  error: no match for 'operator&' in 'so & (uint8_t)va'
} 
```

# ruby - Ruby 正则表达式对背靠背匹配过于贪婪

> ID：16093600
> 
> 赞同：1
> 
> 时间：2013-04-18T21:42:41.097
> 
> 标签：ruby, regex

我正在 Ruby 1.8.7 中进行一些文本处理，以支持我创建的一些自定义短代码。以下是我的简码的一些示例：

```
[CODE first-part]
[CODE first-part second-part] 
```

我正在使用以下正则表达式来获取

```
text.gsub!( /\[CODE (\S+)\s?(\S?)\]/i, replacementText ) 
```

问题是这样的：正则表达式不适用于以下文本：

```
[CODE first-part][CODE first-part-again] 
```

结果如下：

```
1\.  first-part][CODE
2\.  first-part-again 
```

似乎这`\s?`是正则表达式的问题部分，它正在搜索直到它到达最后一个空格，而不是第一个空格。当我将正则表达式更改为以下内容时：

```
\[CODE ([\w-]+)\s?(\S*)\]/i 
```

它工作正常。我唯一关心的是`\w`我`\s`想确保`\w`将匹配 URL 安全字符的所有内容。

我确信有一个完全有效的解释，但它让我望而却步。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:55:13.653

其实想一想，光用`[^\]]`可能还不够，还会把所有的空间都吞掉。您还需要排除这些：

```
/\[CODE[ ]([^\]\s]+)\s?([^\]\s]*)\]/i 
```

请注意`[ ]`- 我只是认为它使文字空间更具可读性。

[工作演示。](http://rubular.com/r/aLVM2tFqHB)

以自由间距模式解释：

```
\[CODE[ ]    # match your identifier   
(            # capturing group 1 
  [^\]\s]+   # match one or more non-], non-whitespace characters
)            # end of group 1
\s?          # match an optional whitespace character
(            # capturing group 2 
  [^\]\s]+   # match zero or more non-], non-whitespace characters
)            # end of group 2
\]           # match the closing ] 
```

由于模式中的字符类都不包括`]`，因此您永远不可能超出方括号表达式的末尾。

顺便说一句，如果您发现正则表达式中不必要的转义和我一样难以理解，这里是最小版本：

```
/\[CODE[ ]([^]\s]+)\s?([^]\s]*)]/i 
```

但这绝对是品味问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:50:14.500

问题在于`\S+`贪婪

```
/\[CODE (\S+)\s?(\S?)\]/i 
```

你可以试试：

```
/\[CODE (\S+?)\s?(\S?)\]/i 
```

但实际上你的新角色类是 IMO 上级。

更好的可能是：

```
/\[CODE ([^\]]+?)\s?([^\]]*)\]/i 
```

# javascript - Django 中的 bootstrap-multiselect 是否正确？

> ID：16093605
> 
> 赞同：0
> 
> 时间：2013-04-18T21:43:06.417
> 
> 标签：javascript, django, django-forms

我正在尝试使用 Django 1.4.5 中的 bootstrap-multiselect 插件创建一个多选下拉菜单。插件链接： http: [//davidstutz.github.io/bootstrap-multiselect/](http://davidstutz.github.io/bootstrap-multiselect/)

我的 form.py 是：

```
weight_training_days = forms.MultipleChoiceField(
    help_text=u'(Required) Select 3 days',
    widget=forms.SelectMultiple(attrs={
        'inline': True,
        'class': 'multiselect',
    }),
    choices=(
        (0, "Mon"),
        (1, "Tue"),
        (2, "Wed"),
        (3, "Thu"),
        (4, "Fri"),
        (5, "Sat"),
        (6, "Sun"),
    ),
) 
```

我在模板中的表格是：

```
<form class="form-{{ layout }}" action="" method="post">
    {% csrf_token %}

    {{ form|as_bootstrap:layout }}

    <p class="form-actions">
        <input type="submit" value="Submit Changes" class="btn btn-primary">
    </p>
</form> 
```

bootstrap-multiselect.js 文件中的 js 代码（链接到 static 文件夹中）：

```
 $(document).ready(function() {
   $('.multiselect').multiselect({
     buttonClass: 'btn',
     buttonWidth: 'auto',
     buttonContainer: '<div class="btn-group" />',
     maxHeight: false,
     buttonText: function(options) {
       if (options.length == 0) {
         return 'None selected <b class="caret"></b>';
       }
       else if (options.length > 3) {
         return options.length + ' selected  <b class="caret"></b>';
       }
       else {
         var selected = '';
         options.each(function() {
           selected += $(this).text() + ', ';
         });
         return selected.substr(0, selected.length -2) + ' <b class="caret"></b>';
       }
     }
   });
 }); 
```

由于某种原因，该插件无法正常工作。仅显示标准 SelectMultiple 字段。

我对 javascript 的经验非常有限，不确定为什么这个插件不起作用。非常感谢任何反馈/帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T23:13:09.763

问题是由于我对javascript缺乏经验/知识。我需要下载这个插件的库，这就是 bootstrap-multiselect.js 文件中的内容。现在效果很好。

# javascript - Sortable table not working

> ID：16093608
> 
> 赞同：0
> 
> 时间：2013-04-18T21:43:13.967
> 
> 标签：javascript, jquery, html

On [http://www.elitedeafpoker.com/dev/poker-players.html](http://www.elitedeafpoker.com/dev/poker-players.html) - I cant get the sortable table to work. I need some help to make it work.

HTML

```
<table id="myTable" class="tableData">
    <thead>
        <tr>
            <th>Rank</th>
            <th width="250">Name</th>
            <th>Earnings</th>
            <th>Points</th>
            <th>Total Earnings</th>
        </tr>
    </thead>
    <tbody></tbody>
 </table> 
```

JAVASCRIPT -

```
$(document).ready(function() { 
    $("#myTable").tableData(); 
} 
); 
```

jQUERY plugin - [http://www.elitedeafpoker.com/dev/js/jquery.tablesorter.min.js](http://www.elitedeafpoker.com/dev/js/jquery.tablesorter.min.js)

All of the codes were referred by [http://tablesorter.com/docs/](http://tablesorter.com/docs/) please let me know what I've missed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:45:29.957

Notice the error in your browser's console: `Uncaught TypeError: Object [object Object] has no method 'tableData'`

The correct method that the Tablesorter plugin provides is `tablesorter`, so you want to use:

```
$("#myTable").tablesorter(); 
```

The website link you referenced specifically has this code:

```
$(document).ready(function() 
    { 
        $("#myTable").tablesorter(); 
    } 
); 
```

If you're using AJAX to load the rows, you need to call:

```
$("#myTable").trigger("update"); 
```

after they are appended.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:11:38.913

If I could make a suggestion about libraries, I've used tablesorter before, and eventually switched over to [DataTables](http://www.datatables.net/). Excellent library, with sorting, filtering, etc. built in, and had an awesome, responsive developer, great documentation, and a great community for support.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T22:31:23.233

I would try and use [DataTables](http://datatables.net/). The library you are trying to use was last updated in 03-2008 that's almost 5 years ago. In the example The jQuery Version is 1.2\. The present version of stable jQuery is 1.9+. There are many changes that are not backward compatible in the intermediate versions.

* * *

If you really want just table sorting. If you insist on using just javascript then you could look at this [http://www.kryogenix.org/code/browser/sorttable/sorttable.js](http://www.kryogenix.org/code/browser/sorttable/sorttable.js) . The last time I tried it worked fine.

# sql - sql server：索引视图包含每组最大的行

> ID：16093609
> 
> 赞同：2
> 
> 时间：2013-04-18T21:43:16.283
> 
> 标签：sql, sql-server, sql-server-2008, greatest-n-per-group

我正在尝试创建一个索引视图，为我的数据库中的一个表计算每个组的最大 n。不过，我已经为视图尝试了三种不同的查询，但它们似乎都是 sql server 不允许的。该表只是一个文件列表，每个文件都有一个 ID、一个用户 ID 和一个日期，我试图为每个用户找到最新的文件。

[我在这里](https://stackoverflow.com/questions/7745609/sql-select-only-rows-with-max-value-on-a-column)尝试了 2 条建议，但它们给了我错误，说我不允许在索引视图中进行分组或外部联接。我将在这里复制我的实现，以便您查看。

```
select f1.id, f1.userid, f1.filedate
from files f1
inner join(
   select userid, max(filedate) as maxDate
   from files
   group by userid
) as f2
on f1.userid = f2.userid and f1.maxdate = f2.maxdate 
```

或者

```
select f1.id, f1.userid, f1.filedate
from files f1
left outer join files f2
on (f1.userid = f2.userid and f1.filedate < f2.filedate)
where f2.id is null; 
```

这两个查询都有效，但在视图上创建索引失败，因为它说不允许分组和外部连接。

我也试过

```
SELECT f1.id, f1.userid, f1.filedate FROM [dbo].[DiagnosticFiles] as f1
WHERE NOT EXISTS (
   SELECT f1.id FROM [dbo].[DiagnosticFiles] as f2 INNER JOIN [dbo].[DiagnosticFiles] as f3 ON f2.userid = f3.userid
WHERE f1.id = f2.id AND f2.FileDate < f3.FileDate) 
```

它说当我尝试将其添加到索引时不允许子查询

我知道如何仅使用内部连接来执行此操作，但问题是它似乎需要 n-1 个连接，其中 n 是单个用户 ID 拥有的最大文件数。这是基本查询

```
SELECT DISTINCT f1.id, f1.userid, f1.filedate
FROM FILES f1
INNER JOIN files f2
ON (f1.userid = f2.userid and f1.filedate > f2.filedate) 
```

这仅适用于任何给定用户标识最多 2 行的情况。[见这里](http://sqlfiddle.com/#!3/ebcca/4)。如果我将此添加到查询的末尾

```
INNER JOIN files f3
ON (f2.userid = f3.userid and f2.filedate > f3.filedate) 
```

那么每个用户最多可以处理 3 个文件，但您会看到问题所在。

有没有一种合理的方法可以为这种查询创建索引视图？

谢谢。

编辑：此外，如果没有办法进行索引视图，并且我将其保留为基本上每次都进行查询的未索引视图，那么对于大量行，可能会非常慢，并且可能在数百行中每个用户的行数？我正计划在 userid 和 filedate 上创建一些非聚集索引

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:47:39.800

不，那不可能。如果是这样就太好了。[我建议您在http://connect.microsoft.com](http://connect.microsoft.com)上为您可以找到的所有索引视图票（有些是我的）投票，以获得对该功能的优先权。

您的一些想法也因不允许自连接这一事实而失败。列出允许的*和*不允许的确实更快。

充其量您可以实现查询的一部分：

```
 select userid, max(filedate) as maxDate
   from files
   group by userid 
```

并在文件上添加一个有用的索引以重新加入它。这可能会给你一个非常便宜的查询。

# javascript - 在 ASP.NET MVC 中，如何让 Listboxes 管理两个列表的内容

> ID：16093611
> 
> 赞同：0
> 
> 时间：2013-04-18T21:43:29.527
> 
> 标签：javascript, asp.net, .net, asp.net-mvc, web

在一个用 ASP MVC 制作的网站中，我被要求构建一个页面，该页面提供了管理两个字符串列表内容的功能，例如[**** *this* ****。](http://i.imgur.com/1Xl2yOX.png)

这两个列表框需要是单选的，带有一个按钮可以将项目从一侧切换到另一侧。

我希望它是客户端的，以便在提交表单时，模型绑定器可以将更新的字符串列表发布到控制器。

任何人都知道这样的控件是否已经存在，例如 jqueryUI 中提供的控件。如果没有，关于如何实现该结果的任何建议？

非常感谢各位！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:51:18.183

我最近正在探索几个选项。

你可以试试这个纯 javascript 版本[http://www.javascriptkit.com/script/script2/picklist.shtml](http://www.javascriptkit.com/script/script2/picklist.shtml)

或者我开始构建一个 JQuery 插件，您可以将其用作起点 [http://jsfiddle.net/stokedout/aySLN/4/](http://jsfiddle.net/stokedout/aySLN/4/)

```
(function ($) {

$.fn.twinList = function (options) {

    var settings = $.extend({

        // Styling
        containerClass: 'twl-container',
        btnContainerClass: 'twl-btn-container',
        leftListClass: 'twl-list left',
        rightListClass: 'twl-list right',
        selectBtnClass: 'twl-btn select',
        selectAllBtnClass: 'twl-btn select-all',
        deselectBtnClass: 'twl-btn deselect',
        deselectAllBtnClass: 'twl-btn deselect-all',

        // Content
        selectBtnText: '>',
        selectAllBtnText: '>>',
        deselectBtnText: '<',
        deselectAllBtnText: '<<',

        // Config
        debug:true
    }, options);

    return this.each(function () {

        var originalList = $(this),
            originalOptions = originalList.find('option'),
            container,
            btnContainer,
            leftList,
            rightList,
            select,
            selectAll,
            deselect,
            deselectAll;

        var updateOriginalInput = function () {

            var rlOptions = rightList.find('option');

            originalOptions.prop('selected', false);

            for (var i = 0; i < originalOptions.length; i++) {
                for (var j = 0; j < rlOptions.length; j++) {
                    if (originalOptions[i].value === rlOptions[j].value) {
                        originalOptions[i].selected = true;
                    }
                }
            }
        }

        container = $('<div/>', {
            'class': settings.containerClass
        });

        leftList = $('<select/>', {
            'class': settings.leftListClass,
            multiple: true
        });

        rightList = $('<select/>', {
            'class': settings.rightListClass,
            multiple: true
        });

        btnContainer = $('<div/>', {
            'class': settings.btnContainerClass
        });

        select = $('<a>', {
            text: settings.selectBtnText,
                'class': settings.selectBtnClass,
            href: '#',
            click: function (e) {
                leftList.find('option:selected').appendTo(rightList);
                updateOriginalInput();
            }
        });

        selectAll = $('<a>', {
            text: settings.selectAllBtnText,
                'class': settings.selectAllBtnClass,
            href: '#',
            click: function (e) {
                leftList.find('option').appendTo(rightList);
                originalOptions.prop('selected', true);
            }
        });

        deselect = $('<a>', {
            text: settings.deselectBtnText,
                'class': settings.deselectBtnClass,
            href: '#',
            click: function (e) {
                rightList.find('option:selected').appendTo(leftList);
                updateOriginalInput();
            }
        });

        deselectAll = $('<a>', {
            text: settings.deselectAllBtnText,
                'class': settings.deselectAllBtnClass,
            href: '#',
            click: function (e) {
                rightList.find('option').appendTo(leftList);
                originalOptions.prop('selected', false);
            }
        });

        leftList.append(originalOptions.clone());

        btnContainer.append(select)
            .append(selectAll)
            .append(deselect)
            .append(deselectAll);

        container.append(leftList)
            .append(btnContainer)
            .append(rightList);

        container.insertAfter(originalList);

        if (!settings.debug)
            originalList.hide();
    });

};

})(jQuery);

$('#someList').twinList(); 
```

首先，您只需要将 @Html.DropDownListFor() 与一些数据绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:57:46.367

有[一篇文章](http://www.ryancramer.com/journal/entries/select_multiple/)讨论了可用性问题并比较了多选输入的不同方法。该资源应该对您有所帮助。

我个人喜欢选项 SCROLLABLE CHECKBOXES 和 ASMSELECT

# java - 尝试在匹配后删除最多 2 位数字

> ID：16093612
> 
> 赞同：3
> 
> 时间：2013-04-18T21:43:31.980
> 
> 标签：java, regex

假设我有一些字符串`Foo3,5bar`，`Foo14,5bar`例如`Foo23,42bar`

我想使用 Java Regex 删除逗号后面的第二个数字以及逗号。

到目前为止，我已经尝试过`String.replaceAll("(?<=Foo\d{1,2}),\d{1,2}", "")`，将`(?<=Foo\d{1,2}),\d{1,2}`其用作我的正则表达式，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:46:58.220

```
str = str.replaceFirst(",\\d+$") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T21:47:18.043

具有正则表达式支持的使用[`String#replaceAll`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)：

```
String str = "Foo3,4HelloFoo5,3World";
str = str.replaceAll("(\\d),\\d+", "$1"); // Foo3HelloFoo5World 
```

或者，如果您想在逗号后将匹配限制为最多 2 位数字，请使用：

```
str = str.replaceAll("(\\d),\\d{1,2}", "$1"); // Foo3HelloFoo5World 
```

### 现场演示：http: [//ideone.com/5P1guJ](http://ideone.com/5P1guJ)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:47:04.393

怎么样 Integer.valueOf(str.substring(string.lastIndexOf(",")+1)); 正则表达式是必要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T21:50:03.487

您的正则表达式几乎是正确的。您忘记`\`在正则表达式中转义。正确的是：

```
(?<=Foo\\d{1,2}),\\d{1,2} 
```

请注意，`\\`而不是`\`.

有关您的字符串的演示，请参见[https://ideone.com/W7IuT1](https://ideone.com/W7IuT1)。

# xml - XSLT 翻译问题匹配子字符串文本

> ID：16093614
> 
> 赞同：0
> 
> 时间：2013-04-18T21:43:37.487
> 
> 标签：xml, xslt

我正在寻找有关我尝试创建的 XSLT 的帮助 - 我正在尝试解决的问题是，如果 attributeId 包含子字符串“fault_code”，我想获取 AttributeAssignment 的值：

输入：

```
 <AttributeAssignment AttributeId="att_obl_authorization_rule_fault_code" DataType="string" Issuer="" Category="urn:oasis:names:tc:xacml:3.0:attribute-category:environment">ERROR</At‌​tributeAssignment> 
```

XSLT 我试过了：

```
<xsl:template match="AttributeAssignment">
  <xsl:if test="contains=('{@AttributeId}', 'fault_code')" > 
    <faultcode> soapenv:<xsl:value-of select='.'/> 
    </faultcode> 
     </xsl:if> 
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:10:51.257

**这个：**

```
<xsl:if test="contains=('{@AttributeId}', 'fault_code')" > 
```

**无效。改用这个：**

```
<xsl:if test="contains(@AttributeId, 'fault_code')" > 
```

* * *

**要测试，当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="AttributeAssignment">
    <xsl:if test="contains(@AttributeId, 'fault_code')">
      <faultcode>soapenv:<xsl:value-of select="."/></faultcode>
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

**...或者这个更简单、更可扩展的 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="AttributeAssignment[contains(@AttributeId, 'fault_code')]">
    <faultcode>
      <xsl:value-of select="concat('soapenv:', .)"/>
    </faultcode>
  </xsl:template>
</xsl:stylesheet> 
```

**...针对提供的 XML 应用：***

```
<AttributeAssignment AttributeId="att_obl_authorization_rule_fault_code" DataType="string" Issuer="" Category="urn:oasis:names:tc:xacml:3.0:attribute-category:environment">ERROR</AttributeAssignment> 
```

**...产生了想要的结果：**

```
<faultcode>soapenv:ERROR</faultcode> 
```

# database - AWS SimpleDB 包含值

> ID：16093615
> 
> 赞同：0
> 
> 时间：2013-04-18T21:43:54.703
> 
> 标签：database, amazon-web-services, amazon-simpledb

我正在尝试进行数据库查询（AWS simpleDB），并且只希望`@`在电子邮件字段中某处包含符号的情况下返回内容。我是这样开始的

```
select * from `myDomain` where email = _____ 
```

我只是不知道在那个空间里放什么。

我发现这篇文章解释了 simpleDB 的功能和关键字，但在这里看不到任何可以帮助我的东西...... [http://aws.amazon.com/articles/1231](http://aws.amazon.com/articles/1231)

因此，如果有 3 个项目的电子邮件 1."abc@def.com" 2."1234" 3."asdf" 那么应该只返回 "abc@def.com" 因为它包含`@`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:57:57.587

```
select * from myDomain where email like '%@%' 
```

资料来源： [http ://aws.amazon.com/articles/1231](http://aws.amazon.com/articles/1231)

# html - HTML5、Easel.js 游戏问题

> ID：16093618
> 
> 赞同：1
> 
> 时间：2013-04-18T21:44:09.163
> 
> 标签：html, easeljs

一直在制作一个画架游戏教程，该教程涉及一个动画角色穿过屏幕并避免板条箱从上方掉落。我完全按照教程中的代码进行了操作，但没有任何乐趣；似乎没有加载任何内容（包括正确映射的图像）。似乎没有出现关于语法的错误，所以不确定问题是什么。这是一段相当多的代码，所以如果没有人有时间，完全可以理解，但以防万一；

网站页面代码（如果有人感兴趣，我会发布单独的 JavaScript 文件代码；

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<style> 
body {
    background-color: #000;
}
</style>

<script src="lib/easeljs-0.6.0.min.js"></script>
<script src="JS/Platform.js"></script>
<script src="JS/Hero.js"></script>
<script src="JS/Crate.js"></script>

<script>
var KEYCODE_SPACE = 32, KEYCODE_LEFT = 37, KEYCODE_RIGHT = 39;
var canvas, stage, lfheld, rtheld, platforms, crates, hero, heroCenter, key, door, gameTxt;

var keyDn = false, play=true, dir="right";
var loaded = 0, vy = 0, vx = 0;
var jumping = false, inAir = true, gravity = 2;

var img = new Image();
var bgimg = new Image();
var kimg = new Image();
var dimg = new Image();

var platformW = [300, 100, 180, 260, 260, 100, 100];
var platformX = [40, 220, 320, 580, 700, 760, 760];
var platformY = [460, 380, 300, 250, 550, 350, 450];
document.onkeydown=handleKeyDown;
document.onkeyup=handleKeyUp;

function init(){
    canvas = document.getElementById("canvas"); 
    stage = new createjs.Stage(canvas);
    bgimg.onload = this.handleImageLoad;

    bgimg.src = "img/scene.jpg";

kimg.onload = this.handleImageLoad;

kimg.src="img/key.png";

dimg.onload = this.handleImageLoad;

dimg.src = "img/door.jpg";

img.onload = this.handleImageLoad;

img.src = "img/hero.png";
}

function handleImageLoad(event) {
    loaded+=1;
    if (loaded==4){
        start();
    }
}

function handleKeyDown(e) {
    if(!e){ var e = window.event; }
    switch(e.keycode) {
        case KEYCODE_LEFT: lfHeld = true;
dir="left"; break;
case KEYCODE_RIGHT: rtHeld = true;
dir="right"; break;
case KEYCODE_SPACE: jump(); break;
    }
}

function handleKeyUp(e) {
    if(!e){ var e = window.event; }
    switch(e.keycode) {
        case KEYCODE_LEFT: lfHeld = false;
keyDn=false; hero.gotoAndStop("idle_h"); break;
case KEYCODE_RIGHT: rtHeld = false;
keyDn=false; hero.gotoAndStop("idle"); break;
    }
}

function start(){
    var bg = new createjs.Bitmap(bgimg);
    stage.addChild(bg);
    door = new createjs.Bitmap(dimg);
    door.x = 131;
    door.y = 384;
    stage.addChild(door);
    hero = new Hero(img);
    hero.x = 80;
    hero.y = 450;
    stage.addChild(Hero);

    crates = new Array();
    paltforms = new Array();
    for(i=0; i < platformW.length; i++){
        var platform = new Platform(platformW[i],20);
        platforms.push(platform);
        stage.addChild(platform);
        platform.x = platformX[i];
        platform.y = platformY[i];
    }

for(j=0; j < 5; j++){
    var crate = new Crate();
    crates.push(crate);
    stage.addChild(crate);
    resetCrates(crate);
}
key = new createjs.Bitmap(kimg);
key.x = 900;
key.y = 490;
stage.addChild(key);

Ticker.setFPS(30);
Ticker.addListener(window);
stage.update();
}

function tick() {
    heroCenter = hero.y-40;
    if (play){
        vy+=gravity;
        if (inAir){
            hero.y+=vy;
        }
        if (vy>15){
            vy=15;
        }
for(i=0; i < platforms.length; i++){
    if (hero.y >= platforms[i].y && hero.y<=(platforms[i].y+platforms[i].height) && hero.x>
    platforms[i].x && hero.x<(platforms[i].
    x+platforms[i].width)){;
    hero.y=platforms[i].y;
    vy=0;
    jumping = false;
    inAir = false;
    break;
    }else{
        inAir = true;
    }
}
for(j=0; j < crates.length; j++){
    var ct = crates[j];
    ct.y+=ct.speed;
    ct.rotation+=3;
    if (ct.y>650){
        resetCrates(ct);
    }
    if (collisionHero (ct.x, ct.y, 20)){
        gameOver();}
}
if (collisionHero (key.x+20, key.y+20,
20)){
    key.visible=false;
    door.visible=false;
}
if (collisionHero (door.x+20, door.y+40,
20) && key.visible==false){nextLevel();}
if (lfHeld){vx = -5;}
if (rtHeld){vx = 5;}

if(lfHeld && keyDn==false && inAir==false)
{
    hero.gotoAndPlay("walk_h");
    keyDn=true;
}
if(rtHeld && keyDn==false &&
inAir==false){
    hero.gotoAndPlay("walk");
    keyDn=true;
}
if (dir=="left" && keyDn==false &&
inAir==false){
    hero.gotoAndStop("idle_h");
}
if (dir=="right" && keyDn==false &&
inAir==false){
    hero.gotoAndStop("idle");
}

hero.x+=vx;
vx=vx*0.5;
if (hero.y>610){
    gameOver();
}
    }
    stage.update();
}

function end(){
    play=false;
    var l = crates.length;
    for (var i=0; i<l; i++){
        var c = crates[i];
        resetCrates(c);
    }
    hero.visible=false;
    stage.update();
}

function nextLevel(){
    gameTxt = new createjs.Text("Well Done\n\n",
"36px Arial", "#000");
 gameTxt.text += "Prepare for Level 2";
 gameTxt.textAlign = "center";
 gameTxt.x = canvas.width / 2;
 gameTxt.y = canvas.height / 4;
 stage.addChild(gameTxt);
 end();
}
function gameOver(){
    gameTxt = new createjs.Text("Game Over\n\n",
    "36px Arial", "#000");
    gameTxt.text += "Click to Play Again.";
    gameTxt.textAlign = "center";
    gameTxt.x = canvas.width / 2;
    gameTxt.y = canvas.height / 4;
    stage.addChild(gameTxt);
    end();
    canvas.onclick = handleClick;
}

function handleClick() {
    canvas.onclick = null;
    hero.visible=true;
    hero.x = 80;
    hero.y = 450;
    door.visible=true;
    key.visible=true;
    stage.removeChild(gameTxt);
    play=true;
}
function collisionHero (xPos, yPos,
Radius){
    var distX = xPos - hero.x;
    var distY = yPos - heroCenter;
    var distR = Radius + 20;
    if (distX * distX + distY * distY <=
distR * distR){
    return true;
}
}
function jump(){
    if (jumping == false && inAir == false){
        if (dir=="right"){
            hero.gotoAndStop("jump");
        }else{
            hero.gotoAndStop("jump_h");
        }
        hero.y -=20;
        vy = -25;
        jumping = true;
        keyDn=false;
    }
}
function resetCrates(crt) {
    crt.x = canvas.width * Math.random()|0;
    crt.y = 0 - Math.random()*500;
    crt.speed = (Math.random()*5)+8;
}

</script>

<title>Game</title>
</head>

<body onload="init();">

<canvas id="canvas" width="960px" height="600px"></canvas>

</body>
</html> 
```

添加标题中列出的js文件。平台.js：

```
 (function(window) {
    function Platform(w,h) {
        this.width = w;
        this.height = h;
        this.initialize();
    }

Platform.prototype = new createjs.Container ();
Platform.prototype.platformBody = null;
Platform.prototype.Container_initialize = Platform.prototype.initialize;

Platform.prototype.initialize = function() {
    this.Container_initialize();
    this.platformBody = new createjs.Shape();
    this.addChild(this.platformBody);
    this.makeShape();
}

Platform.prototype.makeShape = function() {
    var g = this.platformBody.graphics;
    g.drawRect(0,0,this.width,this.height);
}
window.Platform = Platform;
}(window)); 
```

Hero.js

```
(function(window) {
    function Hero(imgHero) {
        this.initialize(imgHero);
    }

Hero.prototype = new createjs.BitmapAnimation();
Hero.prototype.Animation_initialize = Hero.prototype.initialize;
Hero.prototype.initialize = function(imgHero) {
    var spriteSheet = new createjs.SpriteSheet({

images: [imgHero], 
frames: {width: 60, height: 85, regX: 29, regY: 80}, animations: {
    walk: [0, 19, "walk"],
    idle: [20, 20],
    jump: [21, 21] } });

SpriteSheetUtils
.addFlippedFrames(spriteSheet, true, false, 
false);
this.Animation_initialize(spriteSheet);
this.gotoAndStop("idle");
}
window.Hero = Hero;
}(window)); 
```

板条箱.js

```
(function(window) {
    function Crate() {
        this.initialize();
    }

Crate.prototype = new createjs.Container();
Crate.prototype.img = new Image();
Crate.prototype.Container_initialize =
Crate.prototype.initialize;
Crate.prototype.initialize = function() {

this.Container_initialize();
var bmp = new createjs.Bitmap("img/crate.jpg");
bmp.x=-20;
bmp.y=-20;
this.addChild(bmp);}
window.Crate = Crate;
}(window)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:33:52.663

我注意到您尝试在没有命名空间的情况下初始化 EaselJS 对象：

```
stage = new Stage(canvas); 
```

但是从 0.5.0 开始，您必须使用 createjs-namespace（或在执行任何操作之前将命名空间映射到窗口）所以您现在需要做的就是`createjs.`在创建新的画架类时在它们之前添加一个像这样的例子：

```
stage = new createjs.Stage(canvas); 
```

不知道这是否就是一切，但这是一个开始，希望这会有所帮助。

您可以在此处阅读有关 CreateJS 命名空间的更多信息：[https ://github.com/CreateJS/EaselJS/blob/master/README_CREATEJS_NAMESPACE.txt](https://github.com/CreateJS/EaselJS/blob/master/README_CREATEJS_NAMESPACE.txt)

# javascript - 在 JavaScript 中等待函数完成

> ID：16093633
> 
> 赞同：1
> 
> 时间：2013-04-18T21:44:54.757
> 
> 标签：javascript, node.js, recursion

下面的代码为什么每次都会生成不同的输出（不是因为随机函数），但它会为某些值提供未定义的值，有时是其他一些值。问题是什么？

```
function getRandom(ubound) {
  return Math.floor((Math.random()*10) % ubound); 
}

function getInterval() {
  var interval = [getRandom(10), getRandom(10)];
  if(interval[1] >= interval[0])
    return interval;
  else
    getInterval();
}

function generateIntervals() {
  for(var i = 0; i < n; i++)
    intervals[i] = getInterval();
}

function printIntervals() {
  for(var i = 0; i < n; i++)
    console.log("Node " + (i + 1) + ": " + intervals[i]);
}

generateIntervals();
printIntervals(); 
```

我得到如下输出：

```
Node 1: 0,9
Node 2: 0,3
Node 3: undefined
Node 4: 2,2 
```

或者

```
Node 1: 3,3
Node 2: 3,3
Node 3: 1,8
Node 4: undefined 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T21:46:53.620

`return`递归函数中缺少 a ：

```
if(interval[1] >= interval[0])
    return interval;
else
    return getInterval();
//  ^^^^^^ 
```

虽然我个人只是交换这两个值而不是使用递归。`=]`

```
if(interval[1] >= interval[0])
    return interval;
else
    return [interval[1], interval[0]]; 
```

或更简单/语义使用[`Array.reverse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/reverse)：

```
if(interval[1] < interval[0])
    interval.reverse();
return interval; 
```

[**小提琴**](http://jsfiddle.net/5u8A9/)

# java - 通过 Listactivity 启动 Activity

> ID：16093634
> 
> 赞同：0
> 
> 时间：2013-04-18T21:44:55.240
> 
> 标签：java, android, eclipse

每次在 ListView 上单击一个项目时，我都会尝试启动一项活动，我在我的项目中使用数据库并在我的项目中使用全局变量，但无法在项目中启动 GalleryFileActivity 活动如果您需要了解每个部分也将提供感谢您不断努力推进完美

公共类 DataListView 扩展 ListActivity {

```
final private ArrayList<String> results = new ArrayList<String>();
private String tableName = DBHelper.tableName;
private SQLiteDatabase newDB;
private String Path;
final private ArrayList<String> pikh = new ArrayList<String>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    final global folder = ((global)getApplicationContext());
    openAndQueryDatabase();

    displayResultList();

}
private void displayResultList() {
    TextView tView = new TextView(this);
    tView.setText("data is");
    getListView().addHeaderView(tView);

    setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, results));

    ListView lstView = getListView();

   lstView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);        
   lstView.setTextFilterEnabled(true);

}
    public void onListItemClick(
            ListView parent, View v, int position,long id, global folder)
            {
        String pos=results.get(position-1);
        super.onListItemClick(parent, v, position, id);
                Toast.makeText(this,
                    "You have selected "  + results.get(position-1) ,
                    Toast.LENGTH_SHORT).show();
                folder.setsubfolder (pos);
            **startActivity(new Intent(this,GalleryFileActivity.class));**
            }

            public void onClick(View view) {
                ListView lstView = getListView();

            }

private void openAndQueryDatabase() {
    try {
        DBHelper dbHelper = new DBHelper(this.getApplicationContext());
        newDB = dbHelper.getWritableDatabase();
        Cursor c = newDB.rawQuery("SELECT Path, Header FROM resource1  " 
                 , null);

        if (c != null ) {
            if  (c.moveToFirst()) {
                do {

                    Path = c.getString(c.getColumnIndex("Path"));
                    String Header = c.getString(c.getColumnIndex("Header"));

                    results.add( Path + "    " + Header);

                }while (c.moveToNext()) ;

            } 
        }           
    } catch (SQLiteException se ) {
        Log.e(getClass().getSimpleName(), "Could not create or Open the database");
    } finally {
        if (newDB != null) 
            newDB.execSQL("DELETE FROM " + tableName);
            newDB.close();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:57:05.447

代码看起来差不多。

听起来您可能没有`GalleryFileActivity`在清单中声明。

检查您的 logcat 输出 - 那里可能有一个例外提到这一点。

# java - 无法使用 AspectJ 将执行切入点添加到外部 jar 类。为什么？

> ID：16093637
> 
> 赞同：2
> 
> 时间：2013-04-18T21:45:08.133
> 
> 标签：java, eclipse, aspectj

我在尝试检测 SWT 何时`Shell.setText()`执行时遇到了一些麻烦。

我创建了两个简单的切入点，一个有效，另一个无效：

![在此处输入图像描述](https://i.stack.imgur.com/zPHf6.png)

据我了解，这是因为 AspectJ 没有在其类路径或其他东西中检测到 SWT 库。

理想情况下，我想使用 Load-Time-Weaving，所以我在 Eclipse 的 LTW-Classpath 中添加了以下 Jar 文件：

```
org.eclipse.swt.win32.win32.x86_64_3.102.0.v20130311-2025.jar 
```

我在我的 Hello World SWT 项目的“引用库”集中找到了它。

但是问题还是一样，Eclipse（和我的小应用程序）都标记了`execution`切入点，不能应用于任何东西。

谁能指出我的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:45:24.057

有两个原因。

Eclipse 的 AspectJ 插件不会识别适用于项目范围之外的任何内容（在本例中为 SWT），因此将我们的结论从上下文信息中提取出来将无济于事。另外，虽然`Shell`继承了一个`setText()`方法，但它`setText()`是在 中定义的`Decorations`，所以 AspectJ 不会像我写的那样匹配它。

这些就是原因。

# html - 如何使用 CSS 流畅地滚动背景图像

> ID：16093638
> 
> 赞同：0
> 
> 时间：2013-04-18T21:45:08.080
> 
> 标签：html, css

所以我有一个比普通浏览器更高更宽的背景图像。我希望能够拥有它，以便它按比例滚动到屏幕的大小。由于它比正常时间长，我还希望它在用户向下滚动页面时逐渐向下滚动，直到用户到达底部。

简单地说，我认为让我们假设边高是 1000 像素，我的图像是 1500，我希望顶部开始页面并调整大小以适合用户的屏幕，但是底部 500 我想要以一半的速度滚动，以便用户向下滚动时慢慢滚动直到到达底部。

稍后我会找到一个更简单的网站，这个概念很难用语言和谷歌来表达。如果有人明白，请帮忙！

我需要使用 css 什么的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:00:23.277

2 发帖前应该做的事情。

1.  **显示一些代码/尝试**
2.  **检查您的来源。**

据我在您提供的网站上看到的，他们使用的是简单的一个图像，`400px x 400px`另一个是`53px x 54px`，它以两种方式重复（高度和宽度）。

这是背景图片：

[![](https://i.stack.imgur.com/P0BXk.png)](https://i.stack.imgur.com/P0BXk.png)
[（来源：[geek.nz](http://inner.geek.nz/javascript/parallax/clouds.png)）]

该PNG图像的背面是以下图像：

[![](https://i.stack.imgur.com/puGBY.gif)](https://i.stack.imgur.com/puGBY.gif)

这是一个GIF图像。

他们在他们的 CSS 上使用以下内容，**您应该尝试一下！**

```
#ground {
background-image: url(bg-green.gif);
background-repeat: repeat;
background-attachment: fixed;
}

#clouds {
background-image: url(clouds.png);
background-repeat: repeat;
background-attachment: fixed;
padding: 5em 0;
} 
```

那是你要找的吗？

# java - 在 Android 中的活动之间共享数据

> ID：16093639
> 
> 赞同：0
> 
> 时间：2013-04-18T21:45:08.257
> 
> 标签：java, android, android-intent, android-activity, data-binding

我正在编写一个执行以下操作的 android 应用程序（简而言之）：

1.  创建一个通过蓝牙监听数据流的活动
2.  解析流入的数据
3.  （计划）显示数据的解释含义，如图形/文本

对于#3，我计划创建一个位于蓝牙流活动之上的新活动——毕竟，在初始设置后，蓝牙问题应该在后台。

但是，我在蓝牙活动和显示活动之间发送数据时遇到问题。

我已经用谷歌搜索，研究过，我能想到的最好的方法就是为此使用 Intents，但它不起作用。

这是一个例子。假设有数据进来，我解释数据涉及身体运动：

```
private BodyMovementPositionStream() {
    if (getActivity() != null && getContext() != null && iDebug == null) {
        iDebug = new Intent(getActivity(), AGDebug.class);
        iDebug.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        new Thread(new Runnable() {
            public void run() {
                if (theApplication.isD()) {
                    Log.d(theApplication.getTAG(), "Creating Intent for Position Debuging...");
                    getContext().registerReceiver(new AGDReceiver(), new IntentFilter("com.ekscsy.sleepstudy.debug.AGDebug"));
                    getContext().startActivity(iDebug);
                }
            }
        }).start();
    }
} 
```

所以基本上，在那个片段中，我启动活动 AGDebug，为新任务添加标志，然后在新线程中注册接收器。这行得通，我在手机上看到它并`Log.d()`显示消息。

稍后在我的代码中，我提取数据：

```
 private static final int fSize = 4;
    public void unpack(byte[] data) {
        int i = -fSize;
        accx = Streams.byteArr2ByteBuff(data, i += fSize, fSize).order(null).getFloat();
        accy = Streams.byteArr2ByteBuff(data, i += fSize, fSize).order(null).getFloat();
        accz = Streams.byteArr2ByteBuff(data, i += fSize, fSize).order(null).getFloat();
        gyrox = Streams.byteArr2ByteBuff(data, i += fSize, fSize).order(null).getFloat();
        gyroy = Streams.byteArr2ByteBuff(data, i += fSize, fSize).order(null).getFloat();
        gyroz = Streams.byteArr2ByteBuff(data, i += fSize, fSize).order(null).getFloat();
        temp = Streams.byteArr2ByteBuff(data, i += fSize, fSize).order(null).getFloat();
        Intent intent = new Intent("com.ekscsy.sleepstudy.debug.AGDReceiver");
        intent.putExtra("com.ekscsy.sleepstudy.debug.AGDebug.accxF", accx);
        getContext().sendBroadcast(intent);
    } 
```

在提取结束时，我做了一个新的意图，`.putExtra()`包的名称 + 带有一些数据的浮点数。我做了`.sendBroadcast()`但是......什么也没发生。我有一个永远不会被调用的断点：

```
public class AGDReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        assert(true); //breakpoint here
    }

} 
```

显然，我在这里缺少步骤，但我似乎找不到任何关于在活动之间共享数据的好信息。

其实我再重申一遍，这里的主要目标是活动之间的共享数据。数据，浮点数，整数等。我假设“Android”的方式是通过意图和广播，但如果有更好的方法，我会全力以赴。

我希望使这个应用程序与 API 8 兼容。

编辑：仅供参考，我更改了代码以从其自己的线程中启动 AGDebug 活动。现在看起来更像这样：

```
 if (getActivity() != null && getContext() != null && iDebug == null) {
        iDebug = new Intent(getActivity(), AGDebug.class);
        iDebug.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        Log.d(theApplication.getTAG(), "Creating Intent for Position Debuging...");
        getContext().registerReceiver(new AGDReceiver(), new IntentFilter("com.ekscsy.sleepstudy.debug.AGDebug"));
        getContext().startActivity(iDebug);
    } 
```

尽管如此，仍然没有改变任何东西。我认为可能存在在不同手动创建的线程之间运行活动的问题。

主要更新/新问题：

我找到了本指南[http://www.sohailaziz.com/2012/04/localbroadcastmanager-intra-application.html](http://www.sohailaziz.com/2012/04/localbroadcastmanager-intra-application.html)并且能够成功地实施其使广播公司与 LocalBroadcastManager 一起工作的策略。但是......这很奇怪......我发现`onReceieve()`有时会调用该方法。IOW：当我运行应用程序时，要么每次我说它都会被调用，要么根本`lbm.sendBroadcast(intent)`不会被调用。

非常令人费解。

最终编辑：好的，我开始工作了。确保每个意图都被正确命名并指向正确的位置是一种微妙的艺术。一旦完成，它似乎是一致的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:42:25.840

您像这样注册广播接收器：

```
getContext().registerReceiver(new AGDReceiver(),
    new IntentFilter("com.ekscsy.sleepstudy.debug.AGDebug")); 
```

但是你广播了这个意图：

```
Intent intent = new Intent("com.ekscsy.sleepstudy.debug.AGDReceiver"); 
```

Intents 中的动作并不相同。如果您为此定义了一个常量，则可以省去这个麻烦，即：

```
public static final String MY_INTENT_ACTION = "com.ekscsy.sleepstudy.debug.AGDReceiver"; 
```

然后在创建广播意图和创建意图过滤器以注册广播接收器时使用该常量。

# keyboard - Hide the keyboard (blur) when clicking out of a textField inside a tableView in Titanium

> ID：16093642
> 
> 赞同：2
> 
> 时间：2013-04-18T21:45:14.097
> 
> 标签：keyboard, titanium, tableview, textfield, blur

I'm trying to get a table in Titanium where each row has a static text and a textField where I can input something.

So I go and create a row where it's left part is the static text and the right part it's my input text field. Just a small problem, I can't hide the keyboard by clicking outside of it.

If it was a normal textField outside a table I would just use the blur method, but in this case I can't get that to work.

This is my code so far: Any idea on how this works and if the solution is valid for both iOS and Android?

```
var winAddObjectView = Titanium.UI.currentWindow;

var tableAddObjectData = [
    {title:'name', hintText:'item name (optional)'},
    {title:'track no.', hintText:'object tracking code'}
];

var tableAddObjectRowData = [];
for (var i = 0; i < tableAddObjectData.length; i++) {
    var title = Ti.UI.createLabel({
        text:tableAddObjectData[i].title,
        textAlign:"right",
        left:"20",
        height:'auto',
        width:'68',
        color:'#526691',
        font:{fontSize:12, fontWeight:'bold'},
    });
    var textField = Ti.UI.createTextField({
        hintText:tableAddObjectData[i].hintText,
        textAlign:"left",
        left:"96",
        height:'auto',
        width:'184',
        color:'#4C4C4C',
        font:{fontSize:12, fontWeight:'bold'},
    });

    winAddObjectView.addEventListener("click", function(e){
        textField.blur();
    });

    var row = Ti.UI.createTableViewRow({
        height:"45",
    });

    row.add(title);
    row.add(textField);
    tableAddObjectRowData.push(row);
}

var tableAddObjectView = Ti.UI.createTableView({
    headerTitle:'Enter Tracking Information',
    style:Titanium.UI.iPhone.TableViewStyle.GROUPED,
    backgroundColor:'transparent',
    data:tableAddObjectRowData,
});

winAddObjectView.add(tableAddObjectView) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:07:15.917

I have made a few changes in your code. Please try this

```
var tableAddObjectRowData = [];
var textFields = [];              //Created an array of textFields
for (var i = 0; i < tableAddObjectData.length; i++) {
    var title = Ti.UI.createLabel({
        text:tableAddObjectData[i].title,
        textAlign:"right",
        left:"20",
        height:'auto',
        width:'68',
        color:'#526691',
        font:{fontSize:12, fontWeight:'bold'},
    });
    textFields[i] = Ti.UI.createTextField({            //Creating the textField
        hintText:tableAddObjectData[i].hintText,
        textAlign:"left",
        left:"96",
        height:'auto',
        width:'184',
        color:'#4C4C4C',
        font:{fontSize:12, fontWeight:'bold'},
    });

    var row = Ti.UI.createTableViewRow({
        height:"45",
    });

    row.add(title);
    row.add(textFields[i]);
    tableAddObjectRowData.push(row);
}

var tableAddObjectView = Ti.UI.createTableView({
    headerTitle:'Enter Tracking Information',
    style:Titanium.UI.iPhone.TableViewStyle.GROUPED,
    backgroundColor:'transparent',
    data:tableAddObjectRowData,
    height : (tableAddObjectRowData.length * 45) + 60     //Added the height property for the tableView
});

winAddObjectView.addEventListener("click", hideSoftKeyboard);  //added event listener to the window, moved this to out of the loop

function hideSoftKeyboard(){                  //Added function to hide the keyboard
    for(var i=0; i<textFields.length; i++){
        textFields[i].blur();             //Hiding each keyboards
    }
}
winAddObjectView.add(tableAddObjectView); 
```

**Explanation**

1.  `winAddObjectView.addEventListener("click", function(e){ textField.blur(); });` The above code segment in your program didn't worked because the `click` event for the window was not firing **due to the height of tableView, the window was hidden and your clicks were firing on the tableView**. You can see the difference if you set the `backgroundColor` property for your tableView. So I adjusted the height of the tableView and hence the click fired in the window and the keyboard has gone.

2.  Creation of textField array : You can do the same without creating the textField array and inside the `for loop` you can create the textField as `var textField = Ti.UI.createTextField();`. But if you do so, you cannot hide keayboard all the times, since event will be fired for the last textField only. Hence I created the textField array

3.  For `Android` you can also use [Ti.UI.android.hideSoftKeybaord()](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Android-method-hideSoftKeyboard) method. For that just change the `hideSoftkeyboard()` method in our code as follows

    ```
    function hideSoftKeyboard(){                  //Added function to hide the keyboard
        if(Ti.Platform.osname === 'android'){
             Ti.UI.Android.hideSoftKeyboard();
        } else {
             for(var i=0; i<textFields.length; i++){
                  textFields[i].blur();             //Hiding each keayboards
             }
        }
    } 
    ```

# visual-studio-2012 - Visual Studio 2012 未记录的警告 C4447

> ID：16093645
> 
> 赞同：5
> 
> 时间：2013-04-18T21:45:21.973
> 
> 标签：visual-studio-2012, windows-runtime, warnings

```
dllmain.cpp(16): warning C4447: 'main' signature found without threading mode
l. Consider using 'int main(Platform::Array<Platform::String^>^ args)'. 
```

以上是我在构建 Windows Store App DLL 项目时收到的警告。除了包含我自己的 pch 版本外，我没有更改该默认 dllmain.cpp 文件中的任何内容。

在 MSDN 上找不到此警告的文档（以及许多 VS2012 错误/警告），这是我能找到的唯一相关链接：

[http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/6daa9587-fe54-4e84-a8b9-0e5c52c2f6e8/](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/6daa9587-fe54-4e84-a8b9-0e5c52c2f6e8/)

那里的操作员没有得到答案。

如果有人知道它的含义以及如何解决它，那就太好了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-28T11:15:48.040

据我所知，您可以放心地忽略该警告。当编译器看到`DllMain`使用`/ZW`标志 ( *Consume Windows Runtime Extensions* ) 编译的 Win32 样式时，它会崩溃。但是，该函数会按照您通常的预期被调用。

或者，您可以通过编译`dllmain.cpp`而不使用`/ZW`. 您可能需要调整 PCH 设置才能正常工作。这是 Visual Studio 中的*DLL（Windows 应用商店应用程序）* C++/CX 项目模板所采用的路径。

顺便说一句，当您尝试构建*Windows 运行时组件*项目（使用 构建所有内容`/ZW`）时未收到警告的原因是 Windows 运行时组件未声明`DllMain`. 这并不是说它不能；它只是拾取`DllMain`CRT 定义的虚拟对象（它基本上关闭了每个线程的初始化并报告成功）。

# conditional-statements - HTML：仅在选中该表单的情况下提交多个表单和一个提交

> ID：16093646
> 
> 赞同：0
> 
> 时间：2013-04-18T21:45:24.237
> 
> 标签：conditional-statements, submission

所以我有一个包含多个输入表单的页面；是否可以使用一个提交按钮同时提交所有这些表格？此外，每个表单都有自己的复选框，我想要它，这样如果它被选中，它就不会将该表单中的数据提交给 PHP 脚本。如果复选框被选中，我希望它在该表单中提交数据。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:51:52.603

您可以使用 AJAX 或将所有表单合并为一个，您将提交这些表单。

# c# - 通过代码隐藏与非标准控件交互

> ID：16093647
> 
> 赞同：0
> 
> 时间：2013-04-18T21:45:28.900
> 
> 标签：c#, asp.net, dynamics-crm-2011, dynamics-crm

我正在使用带有 Microsoft Dynamics 的 CMS 插件，该插件具有自己的控件等。

我在列表视图中有以下控件，我需要检测这些控件，然后可能从 CodeBehind 文件中进行更新。我知道如何使用标准控件（如 Panel、Div、TextBox 等）执行此操作，但不知道如何使用此类控件执行此操作。

```
<crm:Property DataSourceID="Event" PropertyName="Adx_Summary" EditType="html" runat="server"/> 
```

我也确信这是我需要长期了解的其他类似情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:47:59.997

你可以给它一个 ID，然后像任何其他控件一样使用它：

```
<crm:Property DataSourceID="Event" PropertyName="Adx_Summary" EditType="html" runat="server" id="myCustomControl" /> 
```

在代码中：

```
myCustomControl.WhatEverItSupports(); 
```

当然，这是如果此标记不是另一个控件的一部分并且嵌套在某种模板中的情况。我无法从你的问题中推断出这一点

# android - 尽管有参数，位置管理器仍发送多个更新？

> ID：16093649
> 
> 赞同：0
> 
> 时间：2013-04-18T21:45:32.567
> 
> 标签：android

我有一个在应用程序启动或手机启动时启动的服务。

在 onCreate 中，我定义了请求位置更新的参数：

```
lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 300000, 8046, this); 
```

我的理解是，如果 5 分钟过去或用户移动超过 5 英里，它现在只会提供更新。我实际上得到的是每分钟或更短时间的更新。300000 的数字是以毫秒为单位的 5 分钟，而 8046 的数字是以米为单位的 5 英里。我知道该服务不会因为任何类型的错误而经常被调用，因为它在服务首次启动时会创建一个祝酒词，并且不会一直显示。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:28:25.370

来自 [http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates(long](http://developer.android.com/reference/android/location/LocationManager.html#requestLocationUpdates(long) , float, android.location.Criteria, android.app.PendingIntent)`requestLocationUpdates (long minTime, float minDistance, Criteria criteria, PendingIntent intent)`的文档

> 在 Jellybean 之前，minTime 参数只是一个提示，一些位置提供程序实现忽略了它。从 Jellybean 及以后，Android 兼容设备必须遵守 minTime 和 minDistance 参数。

可能，提供者也忽略了距离限制。

# c# - 如何从已发布的 .net 项目回到原始源代码项目

> ID：16093654
> 
> 赞同：-1
> 
> 时间：2013-04-18T21:45:44.053
> 
> 标签：c#, visual-studio-2012

我有一个已部署的 .Net 项目（调试版本）。它没有任何文件背后的代码。

我想做的是取回原始项目，包括正确文件夹中的 c# 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T22:27:32.460

您需要使用免费的[Jetbrains dotPeek](http://www.jetbrains.com/decompiler/)之类的反编译工具包。

我看到 Chris 推荐了 Redgate 的 .Net Reflector - 从历史上看，这很好，但最近变得缓慢和臃肿，更不用说它不再免费了。强烈推荐 dotPeek 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T22:24:05.987

你想要反射器：[http ://www.red-gate.com/products/dotnet-development/reflector/](http://www.red-gate.com/products/dotnet-development/reflector/)

它的目的是对程序集进行逆向工程。只要这些不是用混淆器编译的，你就应该很好。请记住，上次我不得不这样做来反编译网站时，仍然需要进行大量工作才能使代码恢复可用状态。

如果这是你的错，下次使用源代码管理...如果你是从别人的烂摊子中捡拾东西，请确保你收取额外费用并建议他们使用源代码管理。如果其他人故意破坏了代码，建议起诉他们。

请注意，我还使用上面的方法来深入研究 LINQ（几年前）以找到一些有趣的错误。这是一个相当不错的工具。

# javascript - 在 Plus.Google.com 上触发 keydown

> ID：16093655
> 
> 赞同：6
> 
> 时间：2013-04-18T21:45:46.247
> 
> 标签：javascript, jquery

我正在创建一个扩展，我必须在用户在 Google Plus 中键入消息（状态）的 contenteditable div 上模拟空格键按键。

如果您打开 plus.google.com 并单击必须输入消息的 div，您会意识到，当您在消息中输入链接并按 {spacebar} 时，您会注意到 Google 会检索标题、图像和描述那个链接。我试图模拟空格键按键 3 天。我已经可以在表单元素上模拟鼠标悬停，我可以在发送按钮中模拟 click()，但我仍然无法模拟空格键按键。

到目前为止，我最好的代码是：

```
var e = new KeyboardEvent("keydown", {bubbles : true, cancelable : true, key : " ", char : " ", shiftKey : false, keyCode: 32, which: 32, view: window});
//I need to delete the e.keyCode and e.which cause Chrome sets it as a readonly but for some reason if you delete it and assign a new value Chrome accepts (I am very sure this is a serious bug that I discovered in Chrome and that I already reported yesterday in theis bug tracker)
delete e.keyCode;
Object.defineProperty(e, "keyCode", {"value" : 32});
delete e.which;
Object.defineProperty(e, "which", {"value" : 32});

$(".Cla").find(".be.c-B").children().eq(1).get(0).dispatchEvent(e); 
```

太感谢了。

编辑：

我不知道它是否可以帮助您进行测试，但我建议您这样做：

```
opened_window = window.open("http://plus.google.com"); 
```

之后单击 div 将其展开，然后运行以下代码：

```
$(".Cla").find(".be.c-B").children().eq(1).html("The site stackoverflow.com is amazing");

var e = new KeyboardEvent("keydown", {bubbles : true, cancelable : true, key : " ", char : " ", shiftKey : false, keyCode: 32, which: 32, view: window});
delete e.keyCode;
Object.defineProperty(e, "keyCode", {"value" : 32});
delete e.which;
Object.defineProperty(e, "which", {"value" : 32});

$(".Cla").find(".be.c-B").children().eq(1).get(0).dispatchEvent(e); 
```

由于某种原因，这不会触发链接信息的检索。但是，如果您只是单击 div 并按空格键，您将看到 Google 检索有关该链接的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T09:09:13.373

看看这个 jQuery 插件：[SendKeys](http://bililite.com/blog/2011/01/23/improved-sendkeys/)

# php - 如何将大量参数从 PHP 传递给 Javascript 函数？

> ID：16093662
> 
> 赞同：0
> 
> 时间：2013-04-18T21:46:11.323
> 
> 标签：php, javascript, joomla

我正在开发一个 Joomla 模块，它有几个参数来定义它的工作方式。我在模块区域中有按钮，并且按钮必须与这些参数交互。这是模块PHP代码：

```
<?php
defined('_JEXEC') or die('Direct Access to this location is not allowed.');
$AdVisualV2jMODPHP_ver='0.3.0070';
$Station_ID = $params->get('Station_ID');
$Verbose = $params->get('Verbose');
$Bk_ColorODD = $params->get('Bk_ColorODD');
$Bk_ColorEVEN = $params->get('Bk_ColorEVEN');
$Ink_ColorODD = $params->get('Ink_ColorODD');
$Ink_ColorEVEN = $params->get('Ink_ColorEVEN');
$PicCol_Title = $params->get('PicCol_Title');
$TxtCol_Title = $params->get('TxtCol_Title');
$EvPic_Heightpx = $params->get('EvPic_Heightpx');
$EvPic_Widhtpx = $params->get('EvPic_Widhtpx');
$CatPic_Heightpx = $params->get('CatPic_Heightpx');
$CatPic_Widhtpx = $params->get('CatPic_Widhtpx');
$Pic_Hspanpx = $params->get('Pic_Hspanpx');
$Pic_Vspanpx = $params->get('Pic_Vspanpx');
$TitleSw = $params->get('TitleSw');
$MenuPos = $params->get('MenuPos');
$Paging = $params->get('Paging');
$Sort_Field = $params->get('Sort_Field');
$Sort_Order = $params->get('Sort_Order');
$db_host = "localhost";
$db_user = "xxxx";
$db_database = "xxxxx";
$db_password = "xxxxx";
$db_tabconfig = "xxxxxxx";
$db_tabpreroll = "xxxxxxxxxxx";

echo 'AVVIAMO LA PROCEDURA 0.0.090 - '.$Station_ID.'<br><br>';
echo '<div id="TabellaEventi"></div>';
echo '<INPUT Type="BUTTON" VALUE="Avanti" ONCLICK="avanti()"> ';
echo '<INPUT Type="BUTTON" VALUE="Indietro" ONCLICK="indietro()"> ';
echo '<br>';
?> 
```

当用户单击“Avanti”或“Indietro”按钮时，我调用 JAVASCRIPT 函数 avanti() 和 indietro()，这两个函数将使用上述所有参数。我该怎么做才能转移这么多的变量？

和！！！这两个 Javascript 函数必须调用其他 PHP 文件才能与 MySql 数据库进行交互，并且我将或多或少需要另一个文件中的所有变量。

互联网编程有时真是一团糟……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T21:57:58.357

你可以使用 JSON + jQuery。

Q1：先创建一个全局JS变量。

```
var params = {"Station_ID":"","":"",......} 
```

Q2：使用 jQuery 的 ajax 调用。

```
var queryURL = 'your php file';
$.ajax({
    type:'GET',
    url:queryURL,
    data: params// params in Q1 
}).done(function(jsonObj){ 
        dosomething();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:38:38.890

可能不需要 Ajax。将所有变量放入一个大数据数组中

```
$data['Station_ID'] = $params->get('Station_ID');
$data['Verbose'] = $params->get('Verbose');
...

$data = json_encode($data);
$data = htmlentities($data);
...
echo '<INPUT Type="BUTTON" VALUE="Avanti" ONCLICK="avanti(' . $data . ')"> '; 
```

现在 avanti 包含一个 JSON 对象作为第一个参数

编辑：因为 JSON 字符串可能包含`"`并且`<`您必须调用`htmlentities`以保护您的字符串

# vb.net - 将列表视图行移动到文本框

> ID：16093666
> 
> 赞同：0
> 
> 时间：2013-04-18T21:46:21.553
> 
> 标签：vb.net, listview, textbox, click

我第一次使用 ListView 框。我已经想出了如何用数据库中的数据填充它。我现在想单击该 ListView 的一行并将该行中的五个单元格中的每一个返回到 5 个文本框中。我编写了以下失败的代码：

```
Private Sub lvPrinterSetup_Click(sender As Object, e As System.EventArgs) Handles lvPrinterSetup.Click
        Dim values As New List(Of String)
        If lvPrinterSetup.SelectedItems.Count > 0 Then
            For Each item As ListViewItem.ListViewSubItem In lvPrinterSetup.SelectedItems(0).SubItems
                values.Add(item.Text)
                txbRow.Text = Convert.ToString(lvPrinterSetup.SelectedItems(0))
                txbPrinterName.Text = Convert.ToString(lvPrinterSetup.SelectedItems(1))
                txbPrinterName.Text = Convert.ToString(lvPrinterSetup.SelectedItems(2))
                txbPrinterNo.Text = Convert.ToString(lvPrinterSetup.SelectedItems(3))
                txbPrinterAddress.Text = Convert.ToString(lvPrinterSetup.SelectedItems(4))
            Next

        End If
End Sub 
```

这失败了，错误提示说 .SelectedItems(1) “InvalidArgument=Value of '1' is not valid for 'index'. Parameter name: index”

我敢肯定 2 - 4 也会失败。那么如何从我点击进入各种文本框的一行中获取这 5 个项目？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:02:58.703

我不确定你为什么要对单个值（lvPrinterSetup.SelectedItems(0)）运行 for each 循环。您不应该从整个列表框中获取每个值吗？（lvPrinterSetup.SelectedItems）？

我刚下床，所以不要想太多我正在写的东西。

# c - 如何在宏（或替代方案）中#define

> ID：16093673
> 
> 赞同：2
> 
> 时间：2013-04-18T21:47:06.797
> 
> 标签：c, macros

我有这个代码：

```
#ifdef something32                           <----- might not be defined
    the_real_value = thing[something32];
    thing[something32] = my_value;
#else
    the_real_value = thing[something];   <------- guarantied to be defined (something)
    thing[something] = my_value;
#endif

#ifdef THE_OTHER_THING                       <--------- might not be defined
#ifdef something32
    thing32[something32] = my_value;
#else
    thing32[something] = my_value;
#endif
#endif 
```

我会经常使用它，所以我想用宏替换它。我知道#ifdef 不能存在于宏中，所以我想知道我还能如何替换所有这些代码。有任何想法吗？

编辑：

对不起，我忘了提到这`something32`只是一个很长的变量列表之一。

这个想法是有类似的东西

```
SHORTEN_MY_CODE(something, something32);
SHORTEN_MY_CODE(another_something, another_something32);
etc... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:50:17.000

扭转你的逻辑并根据条件更改宏的定义 - 而不是定义包含条件的宏：

```
// define

#ifdef something32
    #define SOMETHING_VAR something32
#else
    #define SOMETHING_VAR something

#define SHORTEN_MY_CODE the_real_value = thing[SOMETHING_VAR]; \
    thing[SOMETHING_VAR] = my_value;

#ifdef THE_OTHER_THING
     #define SHORT_OTHER() thing32[SOMETHING_VAR] = my_value
#else
     #define SHORT_OTHER() 
#endif

// usage
SHORTEN_MY_CODE()
SHORT_OTHER() 
```

**原始答案**

```
#ifdef something32
    #define MY_MACRO the_real_value = thing[something32]; \
    thing[something32] = my_value; 
#else
    #define MY_MACRO the_real_value = thing[something]; \
    thing[something] = my_value;
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:37:21.187

如果您正在使用 C++，我会考虑只编写一个函数并将其声明为内联。如果你有一个完整的函数，那么你可以把#ifdef放在函数里面。

如果您发布更多代码，我认为我们可以提供更多帮助。c-预处理器的滥用十分猖獗。您可能不想按照您建议的方式使用它。

我不明白如何定义`something`。它们是在项目级别定义的，还是在某个头文件中定义的？`something32``OTHER_THING`

* * *

更新：建议。但是，您可能需要先阅读以下内容：[access to the sys_call_table in kernel 2.6+](https://stackoverflow.com/questions/8840324/access-to-the-sys-call-table-in-kernel-2-6)

```
void* Hook(int f, void* hooked) {
#ifdef CONFIG_IA32_EMULATION
    void *old = ia32_sys_call_table[f];
    ia32_sys_call_table[f] = hooked;
#else
    void *old = sys_call_table[f];
    sys_call_table[f] = hooked;
#endif
    return old;
}

...

Hook(__NR_read, hooked_sys_read);
Hook(__NR_write, hooked_sys_write); 
```

# erlang - Does Erlide ( Erlang IDE on Eclipse ) work well with source control systems ( Git or SVN )?

> ID：16093676
> 
> 赞同：0
> 
> 时间：2013-04-18T21:47:10.567
> 
> 标签：erlang, erlide

I've been working on several projects involving Erlang in Eclipse ( using the Erlide plugin ) and dealing with erlang is somehow problematic in such IDE since it is hard to visualize the set of changes across all erlang source files that were modified.

When I use Netbeans for Java purposes, integrated to a centralized SVN, I can see all add/update/delete changes in different collors, compared to the last time I have committed such changes in source control system.

I tried to achieve the same with Eclipse + Erlide, but it does not appear possible. Somehow it is hard to understand the visual benefits of that.

Did anyone succeed well using a version control with Erlide, for the above purposes ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:01:01.800

我不使用 Netbeans，所以我不确定我理解你的意思。VCS 插件提供与版本处理相关的功能，唯一特定于不同语言的是对版本的结构化比较的支持。

我建议你尝试 Eclipse+Java，如果他们做你想做的事而我们不做，那么在[https://erlide-tools.assembla.com/spaces/erlide/support/tickets上提交一张票](https://erlide-tools.assembla.com/spaces/erlide/support/tickets)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:40:58.130

Eclipse Subclipse 插件对我来说效果很好。SVN 主要有两个插件，[Subclipse](http://subclipse.tigris.org/)和[Subversion](http://subversion.apache.org/)。查看 SVN[插件比较](https://stackoverflow.com/questions/61320/svn-plugins-for-eclipse-subclipse-vs-subversive)链接以获取更多信息。

# python - `set editing-mode vi` in Python readline (os x)

> ID：16093679
> 
> 赞同：4
> 
> 时间：2013-04-18T21:47:18.223
> 
> 标签：python, osx-lion, vi, readline

Trying to beef up my regular python console, I wanted to add vi-style editing.

1st thing: `python` is not reading `~/.inputrc` if I understand well.

Then, I tried to do (through `~/.pythonrc.py`):

```
import readline
readline.parse_and_bind('set editing-mode vi') 
```

Nothing's happening. Did I miss something? Or is it a problem with my terminal?

I'm on OS X using Terminal.app

(tried rlwrap with no success)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T22:25:04.740

Apple 提供的 OS X 系统 Python 中的`readline`模块不与 GNU`readline`库链接，因为 Apple 没有`readline`随 OS X 一起提供 GNU（可能是因为许可证问题）。它们确实与 BSD`editline`库链接，该库`libedit`读取`~/.editrc`并支持一组不同的编辑命令。详情请参阅`man 5 editrc`。如此[处](http://docs.python.org/2/library/readline.html)所述，您可以检查其中的文本`libedit`以`readline.__doc__`确定使用的是 GNU`readline`还是 BSD `editline`。如果你真的需要 GNU `readline`，你可以[`readline`从 PyPI 安装包，](https://pypi.python.org/pypi/readline)`readline`它有一个与 GNU 链接的 Python 模块的预编译版本`readline`。

# python - Python compile time type checking

> ID：16093680
> 
> 赞同：4
> 
> 时间：2013-04-18T21:47:18.267
> 
> 标签：python, static-analysis, pylint

Python doesn't check types at compile time because it can't, at least in some circumstances. But has anyone come up with a mechanism to do compile-time type checking based on extra annotations by the user? Something like pylint which uses extra guarantees by the author? I'm thinking of something like:

```
#guarantee(argument=int, return_type=int)
def f(x):
    return x + 3

#guarantee(argument=int, return_type=str)
def g(x):
    return "%d times" % x

y = f(6)

# works, z = "9 times"
z = g(y)
# error
a = f(z) 
```

This checker would interpret the comments above each function, realize that `f(x)` is only supposed to accept `int` but z comes from `g(x)` so it's a `str`. Is there any product which does something similar to this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:15:58.950

[PEP 3107](https://www.python.org/dev/peps/pep-3107/)最近完成了（最近是在去年的某个时间），它为变量和函数引入了注释。不幸的是（从 pep 的数量可以看出）这仅适用于 Python 3.x，因此您编写的任何检查器（甚至代码）都将仅适用于 Python 3（这确实不是一件坏事）。

您提到了 pylint，所以我假设您实际上并不希望在编译时运行检查，而是在编译后进行检查。这将是一个很棒的工具，可以在[代码质量邮件列表](http://mail.python.org/mailman/listinfo/code-quality)中讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:08:48.353

我认为您缺少的关键字是[`decorator`](http://www.learnpython.org/page/Decorators).

您可以编写自己的装饰器来执行以下操作：

```
@check(bar=int)
foo(bar):
    pass 
```

[您可以在此处](https://gist.github.com/avidal/1252523)查看示例实现。虽然这对于编译检查当然无效，因为它是在运行时完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:56:17.133

我不确定这是对 Python 中现有运行时机制的重大改进。例如，

```
def f(x):
    if not isinstance(x, int):
        raise TypeError("Expected integer")
    return x + 3

def g(x):
    return "%d times" % x

# Works.
y = f(6)
z = g(y)
# Fails, raises TypeError.
a = f(z) 
```

换句话说，如果不对 Python 中每个对象的每个函数和每个方法进行注释，就很难静态地确定其中一个`f`或的返回类型是什么`g`。我怀疑任何沿着这些思路的静态检查器都会有任何价值。

即使您在函数中添加了返回类型描述符，这真的是一种保证吗？它看起来很像可能无法与代码一起更新的文档，从而导致以后由于不正确的假设而导致的更隐蔽的错误。

# visual-studio-2010 - 如何保留以前安装的文件

> ID：16093683
> 
> 赞同：1
> 
> 时间：2013-04-18T21:47:40.200
> 
> 标签：visual-studio-2010, setup-project

我正在开发一个程序，该程序允许用户删除文件以替换为他们自己的文件（声音或图像文件）。如果用户卸载并重新安装程序，用户替换的文件应该被保留而不是替换。

在使用设置和部署项目的搜索目标机器部分时，我已经做了一些阅读和试验，但每次都失败了。

我当前的方法是这里规定的方法：（但这是针对 VS 2008，而不是我正在使用的 2010）： [Visual Studio Setup Project 有条件的，如果文件存在](https://stackoverflow.com/questions/4102503/visual-studio-setup-project-conditional-if-file-exists) 这正是我正在做的：（除了代替或（文件名），我使用的是实际的文件名或属性。

```
Search Target Machine:
    <Search Item>
        Depth (1) (It's kept in a subfolder)
        FileName (The Files Name)
        Folder [TARGETDIR]
        MaxDate through MinVersion are kept blank
        Property: <FILENAMEEXISTS> 
```

对于文件本身：

```
 Condition: NOT <FILENAMEEXISTS> (Exactly like that, case and everything). 
```

我在这里做错了什么？

# javascript - jQuery 闭包垃圾收集器

> ID：16093689
> 
> 赞同：2
> 
> 时间：2013-04-18T21:48:00.263
> 
> 标签：javascript, jquery, memory-leaks

在问之前我读了这个问题：

[如何在 JavaScript 中释放内存](https://stackoverflow.com/questions/8467350/how-to-free-up-the-memory-in-javascript)

当您的变量数据很大并且您希望该数据有资格进行垃圾回收时，您可以正确地为该变量分配一些小的东西，例如`undefined`or`null`或`""`。但只有在变量持续存在时（例如，它是全局的或某些持久数据结构的一部分）才有意义，如上一个问题所述。

然后我提出了这样的测试请求：

```
setInterval(function() {
    $.get('http://localhost/small-data', function(r) {
       r = null;
    },'json');
}, 1000); 
```

在我的示例中，我的 URL（在 localhost）将仅输出`5KB`；

jQuery 会将响应解析`r`为 JSON，然后我创建一个`setInterval`不做任何其他事情的循环，几个小时后，Firefox 将拥有比`1GB`任务管理器更多的东西。

这没有意义。FF 从不释放内存。此示例代码是否存在内存泄漏？

# html - body和#body有什么区别

> ID：16093694
> 
> 赞同：0
> 
> 时间：2013-04-18T21:48:15.320
> 
> 标签：html, css

在我的代码中，我有这个：

```
#body {
    background-color: #efeeef;
    clear: both;
    padding-bottom: 35px;
} 
```

还有这个：

```
body {
    background-color: #fff;
    border-top: solid 10px #000;
    color: #333;
    font-size: .85em;
    font-family: "Segoe UI", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
} 
```

我的怀疑是因为 # 是一个 ID 选择器，但 body 不是一个 ID。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T21:49:21.370

`#body`引用具有 id 的元素`body`并`body`引用`<body ....`HTML

示例：您可以给出 a`<div id="body">`并且 CSS for`#body`将适用于 div。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T21:49:37.257

> 我的怀疑是因为 # 是一个 ID 选择器，但 body 不是一个 ID。

现在是：

```
<div id="body">...</div> 
```

在元素类型之后标识元素并不是一个好主意（因为它可能会造成混淆），但它是合法的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:49:37.177

#body 指的是任何元素，而不仅仅是 body 元素，其 id 属性设置为“body”。

第二个是指身体标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T21:51:26.153

#body 正在选择一个名为 body 的 id，所以如果你有一个它会在该 div 内进行更改，而 body 会进行更改

# vbscript - 跳过错误的计算机

> ID：16093697
> 
> 赞同：0
> 
> 时间：2013-04-18T21:48:58.157
> 
> 标签：vbscript, wmi-service

我遇到了一个 VBScript 问题，它从 Excel 工作表上的列表中查找计算机上的打印机，然后通过 WMI 找到它们。它通过 IP 地址名称匹配它们，然后编写一个批处理文件，我可以从中安装它们。我的问题是，当我关闭计算机时，我收到一个 462 错误，然后将其清除，但随后再次写入前一台计算机的打印机。我对此很陌生，所以我不确定我是否只是在这里遗漏了一些非常基本的东西。

```
Batch = "printerOutput.txt"
Const ForWriting = 2 'Set to 8 for appending data
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile(Batch, ForWriting)

On Error Resume Next

Dim printerDictionary 'Create Printer dictionary of names and IP addresses
        Set printerDictionary = CreateObject("Scripting.Dictionary")
            printerDictionary.Add "Printer","xxx.xxx.xxx.xxx"

Set objExcel_1 = CreateObject("Excel.Application")
' Statement will open the Excel Workbook needed.

Set objWorkbook = objExcel_1.Workbooks.Open _
("x\p.xls")

If Err.Number <> 0 Then
    MsgBox "File not Found"
    Wscript.Quit

End If
'Checks for errors
f = 1 'Sets variable that will loop through Excel column

Do

' Msgbox f,, "Begining of Do Loop"

    strComputer = objExcel_1.Cells(f, 1).Value
    Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")      
    Set colPrinters = objWMIService.ExecQuery("Select * From Win32_Printer")
    For Each objPrinter in colPrinters 'For ever objPrinter found in the computers WMIService

    If Err.Number = 0 Then

            objFile.WriteLine Err.Number
            If InStr(ObjPrinter.PortName,".") = 4 then 'If the printers IP port name is written like 128.xxx.xxx.xxx

                'MsgBox ObjPrinter.Name & " " & ObjPrinter.PortName,, "IfStatement"
                PrtDict ObjPrinter.PortName, StrComputer

            ElseIf InStr(ObjPrinter.PortName,"_") = 3 Then 'If the printers IP port name is written like IP_128.xxx.xxx.xxx
                cleanIP = GetIPAddress(objPrinter.PortName) 'Clean IP

                PrtDict cleanIP, StrComputer        
            End If

    Else

        objFile.WriteLine "REM " & strComputer & " - Error:  " & err.number
        Err.Clear

    End If

    Next

    f = f + 1

Loop Until objExcel_1.Cells(f, 1).Value = ""

objExcel_1.ActiveWorkbook.Close
ObjExcel_1.Quit

Function PrtDict(PrtMn, CMP) 'Loops through the dictionary to find a match from the IP address found

        For Each x in printerDictionary
            'MsgBox PrtMn & "=" & printerDictionary.Item(x),,"InPtrDict"
            If printerDictionary.Item(x) = PrtMn Then

                objFile.WriteLine "psexec -u \%1 -p %2 " & CMP & " path\" & x & ".bat"

            End If
        Next

End Function
'100
Function GetIPAddress(Address) 'For cleaning up IP address with names like IP_128.xxx.xxx.xxx

    IPtext = InStr(Address,"_")
    IPaddress = len(Address) - IPtext

GetIPAddress = Right(Address,IPaddress)
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:39:06.900

会发生什么：

1.  `On Error Resume Next`

    这为脚本的其余部分启用了错误处理（或者更确切地说是错误抑制），因为它从未被禁用。

2.  `Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")`

    此命令失败，因为`strComputer`不可访问。由于错误，变量`Err`被设置并`objWMIService` **保留其先前的值**。

3.  `Set colPrinters = objWMIService.ExecQuery("Select * From Win32_Printer")`

    此命令成功并从前一台计算机重新读取打印机列表，因为`objWMIService`仍然引用该计算机。

4.  `For Each objPrinter in colPrinters`

    脚本进入循环，因为`colPrinters`从前一台计算机（再次）填充了打印机，......

5.  `If Err.Number = 0 Then ... Else ... End If`

    ...但是因为仍然`Err`是**set**，所以脚本进入了`Else`分支，在那里报告并清除了错误：

    ```
    objFile.WriteLine "REM " & strComputer & " - Error:  " & err.number
    Err.Clear 
    ```

6.  然后脚本进入循环的下一次迭代。`Err`现在已清除，因此其余打印机`colPrinters`正在正常处理中。

**全球`On Error Resume Next`是万恶之源。不要这样做。*曾经。***

如果您绝对必须使用`On Error Resume Next`，请在本地启用错误处理，放置一些实际的错误处理代码，然后立即禁用错误处理。在您的情况下，可能会像这样实现它：

```
...
Do
  strComputer = objExcel_1.Cells(f, 1).Value
  ***On Error Resume Next***
  Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
  ***If Err Then
    objFile.WriteLine "REM " & strComputer & " - Error:  " & err.number
    Set objWMIService = Nothing
  End If
  On Error Goto 0

  If Not objWMIService Is Nothing Then***
    Set colPrinters = objWMIService.ExecQuery("Select * From Win32_Printer")
    For Each objPrinter in colPrinters
      ...
    Next
    f = f + 1
  ***End If***
Loop Until objExcel_1.Cells(f, 1).Value = ""
...
```

# ruby-on-rails - 尝试学习基本的红宝石

> ID：16093699
> 
> 赞同：-3
> 
> 时间：2013-04-18T21:49:10.110
> 
> 标签：ruby-on-rails, ruby

我最近学习了一个基本的 Rails 教程 (Railscast)，我阅读并尝试了大多数 Rails 指南，我认为我走在正确的道路上，所以我决定测试我的知识。有两个问题我无法正确回答：

1.  关于方法，下列哪项是正确的`errors[:attribute]`？
    1.  它返回 :attribute 的所有错误的数组
    2.  没有错误发生时返回一个空数组
    3.  仅在发生错误时才有用
    4.  它还验证对象的有效性
2.  在 Ruby 中，“true”是以下类型：
    1.  实例变量
    2.  伪变量
    3.  类变量
    4.  持续的

这些问题的正确答案是什么，我在哪里可以了解这样的细节。有书、博客之类的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:14:39.013

常见的 Rails 问题通常在[**Ruby on Rails 指南**](http://guides.rubyonrails.org)中得到解答。有一个关于[errors[:attribute]](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validations_overview-errors)的部分。

Ruby 本身的一个很好的介绍是[**Programming Ruby - The Pragmatic Programmer's Guide**](http://www.ruby-doc.org/docs/ProgrammingRuby/)**和Ruby-Doc.org**上的 API 文档，例如[TrueClass](http://ruby-doc.org/core-2.0/TrueClass.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:52:39.043

你说你一直在研究 Rails，但实际上尝试过构建一些东西？这通常是一种更有效的学习方式。您会在此过程的早期发现问题 1 的答案。

问题 2 是关于 Ruby 基础知识的。任何像样的 Ruby 书籍的早期章节都会涵盖它，其中最著名的是[Programming Ruby](http://pragprog.com/book/ruby/programming-ruby)，又名 Pickaxe 书籍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:03:57.730

不知道你引用的是不是字面引用的。如果是，那么这不是学习 Ruby 的好来源。如果不是，那是你的责任。

1.  `errors[:attribute]`不是一种方法。问题是错误的。如果说的是方法`[]`，那可能会有答案，但不能仅从所引用的内容来判断。
2.  也许，没有伪变量可以是`true`，但选择中的任何其他变量：实例变量、类变量或常量都可以是`true`。如果问题期望一个单一的答案，那么问题是错误的。

# mysql - 尝试在 ASP.NET MVC 中访问 MySql 数据库

> ID：16093700
> 
> 赞同：0
> 
> 时间：2013-04-18T21:49:10.377
> 
> 标签：mysql, asp.net-mvc, entity-framework

我是 ASP.NET MVC 的新手，我正在用我自己的 MySQL 数据库编写一个 ASP.NET MVC 应用程序。我已经定制了连接到数据库的代码，我认为一切都必须正常工作。当我在 DeelnemerRepository（英文为 UserRepository）中使用我自己的测试数据时，我没有任何问题，但是当我尝试访问数据库时，它会引发 ArgumentException。该异常还给了我以下消息：

> 无法找到请求的网络框架数据提供者它可能未安装

DeelnemerRepository 中调用的方法：

```
public IQueryable<Deelnemer> FindAll()
{
    return deelnemers.OrderBy(d => d.Emailadres);
} 
```

使用 NuGet，我添加了 MySql.Data、MySql.Data.Entities 和 MySql.Web

web.config 文件中的连接字符串：

```
<connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-ProjectDynamische-20130415102959;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-ProjectDynamische-20130415102959.mdf" providerName="System.Data.SqlClient" />
    <add name="kindermishandeling_dbContext" connectionString="server=localhost;Port=3307;User Id=root;password=1234;database=kindermishandeling_db;Persist Security Info=True" providerName="MySql.Data.MySqlClient" />
  </connectionStrings> 
```

我还发现此类中的此方法可能存在问题，但我不确定：

```
private class SimpleMembershipInitializer
        {
            public SimpleMembershipInitializer()
            {
                Database.SetInitializer<UsersContext>(null);

                try
                {
                    using (var context = new UsersContext())
                    {
                        if (!context.Database.Exists())
                        {
                            // Create the SimpleMembership database without Entity Framework migration schema
                            ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                        }
                    }

                    WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
                }
                catch (Exception ex)
                {
                    throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
                }
            }
        } 
```

我不指望这个问题的解决方案，但我只是想知道我必须看哪里，我认为 ASP.NET MVC 真的很复杂......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:32:29.947

我自己找到了解决方案。无论如何，感谢所有试图帮助我的人。我必须将此代码添加到我的 web.config 文件中：

```
<system.data>
    <DbProviderFactories>
      <remove invariant="MySql.Data.MySqlClient"/>
      <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory,MySql.Data" />
    </DbProviderFactories>
  </system.data> 
```

# jquery - 如果命令不起作用，则 JQuery

> ID：16093701
> 
> 赞同：0
> 
> 时间：2013-04-18T21:49:14.830
> 
> 标签：jquery, if-statement, click, var

我试图让它在 currentLetter 变量达到 34 后颜色改变，但由于某种原因，它只是在我点击时改变颜色。

```
var isStart = false;
var letterString = "D0E916C0A8CED059359C02DARREN KORB - PALE WATCHERS.mp3E415AAB0014400E104B40DE96A0";
var letters = letterString.split('');
var currentLetter = 0;

function changeLetter() {
    $("#t-" + currentLetter).text(letters[currentLetter - 1]);
    currentLetter += 1;

}

$(document).ready(function () {
    var image = $('#content').click(function () {
        if (!isStart) {
            isStart = true;
            setInterval(changeLetter, 100);
        }

        if (currentLetter == 34) {
            $("#t-1").css("color", "red");
        }

    });
}); 
```

非常感谢任何帮助，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:03:14.457

将您的 if 移动到 changeLetter 函数中：

```
function changeLetter() {
    $("#t-"+currentLetter).text(letters[currentLetter-1]);
    currentLetter +=1 ;
    if (currentLetter == 34) {
       $("#t-1").css("color", "red");          
    }

} 
```

请注意，您应该保留间隔 ID，否则您将无法停止它。

```
var isStart = false;
var letterString = "D0E916C0A8CED059359C02DARREN KORB - PALE WATCHERS.mp3E415AAB0014400E104B40DE96A0";
var letters = letterString.split('');
var currentLetter = 0;
 var intervalID;

function changeLetter() {
    $("#t-"+currentLetter).text(letters[currentLetter-1]);
    currentLetter +=1 ;
    if (currentLetter == 34) {
           $("#t-1").css("color", "red");    
           clearInterval(intervalID);       
        }
}

$(document).ready(function() {
    var image = $('#content').click(function() {
        if  (!isStart) {
            isStart = true;
           intervalID =  setInterval(changeLetter, 100);
        }
    });
}); 
```

# php - 需要在 Rails 生成的页面中运行 php 程序

> ID：16093703
> 
> 赞同：1
> 
> 时间：2013-04-18T21:49:25.247
> 
> 标签：php, ruby-on-rails

我计划将 Spree 用于购物网站，但有时需要使用银行提供的 PHP 程序签署一些数据。我能想到的唯一选择是链接到运行 PHP 程序并返回 Spree 的 somePage.php。有没有更简单的方法，比如发送到 Ruby 中的某个 PHP shell？或更改视图以具有 php 扩展名？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:21:46.597

好吧，首先我会检查在 Ruby 中签署数据的原生 Ruby 方式。首先查看 Spree 文档，或者查看您的银行规范（它们通常非常糟糕，以银行家如何编写合同为例，他们不擅长编写软件规范）。

作为第二种选择，如果你有 PHP 程序，你应该尝试用 Ruby 翻译它。

如果这不是您的选择，那么您可以像这样使用[open4](http://rubygems.org/gems/open4)：

```
status = Open4::popen4("/path/to/php bank_code.php #{data_to_sign}") do |pid, stdin, stdout, stderr|
  out_msg = stdout.read
  err_msg = stderr.read
  logger.error "out_msg #{out_msg}"
  logger.error "err_msg #{err_msg}"
end
handle_error_case if status.existatus != 0 
```

干杯，

# c# - 无法绑定多部分标识符“System.Data.DataRowView”#2

> ID：16093712
> 
> 赞同：0
> 
> 时间：2013-04-18T21:49:50.570
> 
> 标签：c#, .net

我知道这是这里某些问题的重复，但相信我，我已经尝试了所有这些问题，但没有运气。

我是 C#+MySQL 的新手。

我有一个包含 2 个表、程序员和软件的数据库。我在软件表中有一个名为programmersid 的列。这是一对多的关系。我有两个列表框。第一个是程序员的名字，当我点击程序员时，它会显示他制作的软件。

当我点击一个软件时，文本将被放入一个文本框中，并且我有一个更新按钮。当我单击它时，它应该更新该软件的名称。

这是我的代码：

```
public partial class Form1 : Form
{
    private DataSet ds;
    private SqlConnection conn;
    private SqlDataAdapter programmersadapter;
    private SqlDataAdapter softwaresadapter;

    protected string connectionString = "Data Source=ICEBOX19-PC\\ICEBOX;Initial Catalog=software;Integrated Security=True";

    public Form1()
    {
        InitializeComponent();
        conn = new SqlConnection(connectionString);

        SqlCommand programmersselect = new SqlCommand("SELECT ID, Name FROM programmers", conn);
        programmersadapter = new SqlDataAdapter(programmersselect);

        SqlCommand softwaresselect = new SqlCommand("SELECT name FROM softwares WHERE programmerid = @ID", conn);
        softwaresselect.Parameters.Add(new SqlParameter("@ID", SqlDbType.Int));
        softwaresadapter = new SqlDataAdapter(softwaresselect);
        showme();
    }
    private void showme()
    {
        ds = new DataSet();
        conn.Open();
        programmersadapter.Fill(ds, "programmers");
        conn.Close();
        listBox1.ValueMember = "id";
        listBox1.DisplayMember = "name";
        listBox1.DataSource = ds.Tables["programmers"];
    }
    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        conn.Open();
        SqlCommand command = new SqlCommand("update softwares set name='" + textBox1.Text + "' where programmerid=" + listBox2.SelectedValue.ToString(), conn);
        command.ExecuteNonQuery();
        conn.Close();
        reload();
    }
    private void reload()
    {
        //listBox2.SelectedIndexChanged -= listBox2_SelectedIndexChanged;
        softwaresadapter.SelectCommand.Parameters["@id"].Value = listBox1.SelectedValue;
        var table = new DataTable();
        softwaresadapter.Fill(table);
        conn.Close();
        listBox2.DisplayMember = "name";
        listBox2.ValueMember = "id";
        listBox2.DataSource = table;
        //listBox2.SelectedIndexChanged += listBox2_SelectedIndexChanged;
    }
    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        reload();
    }

    private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        textBox1.Text = listBox2.Text;
        textBox1.Text = textBox1.Text.Replace(" ", "");
    }
} 
```

我得到这个例外：

> 无法绑定多部分标识符“System.Data.DataRowView”。

它来自`command.ExecuteNonQuery()`于`button1.Click`.

我试图改变：

```
SqlCommand command = new SqlCommand("update softwares set name='" + textBox1.Text + "' where programmerid=" + listBox2.SelectedValue, conn); 
```

至

```
SqlCommand command = new SqlCommand("update softwares set name='" + textBox1.Text + "' where programmerid=" + listBox2.SelectedValue.ToString(), conn); 
```

但我也得到同样的东西。你们有什么想法吗？我从 2 小时开始就在寻找这个。

**PS：即使我尝试删除，我也会收到同样的错误**

```
 private void delete_Click(object sender, EventArgs e)
        {
        conn.Open();
        SqlCommand command = new SqlCommand("delete from softwares where id="+listBox2.SelectedItem, conn);
        command.ExecuteNonQuery();
        conn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T22:05:27.930

```
private void PopulateListBox(DataTable dt)
            {
                foreach (DataRow row in dt.Rows)
                {
                    ls.Items.Add(row["id"]);
                }
            } 
```

然后，调用

```
 string value = ls.Items[0].ToString(); 
```

# tfs - 未找到 TFS 链接文件

> ID：16093715
> 
> 赞同：1
> 
> 时间：2013-04-18T21:50:01.670
> 
> 标签：tfs

我有一个核心项目和几个子项目。我链接到子项目的核心项目中的文件。我右击我的csproj并说现有文件>添加>链接。这是我的项目的外观：

![在此处输入图像描述](https://i.stack.imgur.com/HIlxg.png)

这是我的 Windows 资源管理器的图片：

![在此处输入图像描述](https://i.stack.imgur.com/7BXSY.png)

当我签入时，我收到此错误：

找不到文件 C:\Users\joe_a84\Documents\JMASoftware\QuickBooks\Main\Source\Platform Support\NOP\Source\Versions\nop265\Nop265\Module\QuickBooksSettings.cs

该文件不存在，因为它已链接。我如何告诉 TFS 它是一个链接文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:05:14.507

以下问题表明 TFS 2008 或 TFS 2010 不支持 [符号链接。 TFS 2010 源代码管理中的符号链接？](https://stackoverflow.com/questions/6223064/symbolic-links-in-tfs-2010-source-control)

但是，我确实找到了以下古老的博客文章，它似乎展示了如何为 TFS 2005 做到这一点：http: [//blogs.msdn.com/b/ericlee/archive/2006/07/20/sharing-files-in-团队基础-server.aspx](http://blogs.msdn.com/b/ericlee/archive/2006/07/20/sharing-files-in-team-foundation-server.aspx)

**也就是说，我强烈建议您不要这样做。**

如果您确实需要在项目之间共享文件，那么您应该使用 TFS 中内置的分支功能。通常，由于命名空间和程序集生成问题，您不希望只需要一个代码文件。通过为那些传递的工件建立一个单独的项目，它更干净，当然也更容易维护。这样，您要么分支整个装配项目；要么 或者只是在它的正常位置引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T04:18:45.227

这是另一个项目的本地文件级链接。特定子文件夹中只有一个文件。其他项目可以通过这种方法链接到该文件。这种方法的问题在于，从 TFS 的角度来看，您无法判断文件是否由其他项目共享。一个好的做法是将这些文件保存在单独的文件夹中，名称如 Common 或 Shared 等。在源代码管理中使用跨分支文件链接的人将不得不以完全不同的方式改变他们的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T09:43:44.117

TFS 中文件之间的链接非常简单。您只需打开“添加现有项目”对话框并在本地工作区中搜索要链接的文件。如果您现在单击“添加”，Visual Studio 将在您的项目目录中创建该文件的副本。相反，您要做的是选择另一个选项（按钮上有一个小下拉菜单）并将项目添加为链接。就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T07:03:53.860

我遇到了同样的问题。我刚刚撤消了在 TFS Pending Changes 窗口中显示此错误的文件并签入。此撤消并未删除项目中添加的链接。确保不要撤消项目文件。

# sql - 确认左连接sybase查询的结果

> ID：16093718
> 
> 赞同：0
> 
> 时间：2013-04-18T21:50:12.780
> 
> 标签：sql, database, sybase

我需要一些有关 sybase sql 语法的帮助。在远离 sql​​ 多年后，通过一些示例问题。给定以下两个 sybase 表结构和数据：

表名：用户

```
| name | salary |
| joe  | 100000 |
| nick | 10000  | 
```

表名：user_data

```
| name | percent |
| joe  | 0.67    | 
```

和以下查询：

```
select u.name, ud.percent from users u, user_data ud where u.name *= ud..name 
```

我认为输出将是：

```
| name | percent |
| joe  | 0.67    |
| nick | NULL    | 
```

基于 *= 表示左连接的推理？

我遇到的另一个问题是 ud..name 中的“..”是什么意思？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:52:49.993

是的，旧的 JOIN 语法已被 ANSI JOIN 语法取代。查询应该写成：

```
select u.name, ud.percent 
from users u
left join user_data ud 
  on u.name = ud.name 
```

`users`即使表中没有匹配的行，此查询也会返回表中的所有内容`user_data`。对于不在表中的那些行，`null`将返回 a。

# oracle - Oracle“开始于”文本连接，不包括空值

> ID：16093724
> 
> 赞同：1
> 
> 时间：2013-04-18T21:50:36.473
> 
> 标签：oracle, sql-like, startswith

我遇到了一些麻烦。我正在尝试构建一个使用“开始于”逻辑的 SQL 查询。先说一点背景...

在我负责编写报告的数据库中，有一个“用户”表和一个“销售人员”表，销售人员属于一个用户。在一个不太聪明的举动中，数据库的设计者决定通过子字符串匹配销售人员与他们的员工代码相关联。例如：

John Smith 的“employee_code”将是“JS”。但他有多个“销售人员”来区分他不同的销售类型。所以他可能有“JS1”、“JS2”、“JS3”等，作为他的“salesperson_code”。

为了显示：

```
user table:
|----------|-----------|----------|---------------|
| username | firstname | lastname | employee_code |
|----------|-----------|----------|---------------|
| JSMITH   | John      | Smith    | JS            |
|----------|-----------|----------|---------------|

salesperson table:
|------------------|------------------|
| salesperson_name | salesperson_code |
|------------------|------------------|
| John Smith 1     | JS1              |
| John Smith 2     | JS2              |
| John Smith 3     | JS3              |
|------------------|------------------| 
```

销售员表上没有将它们链接到用户表的外键，只有员工代码的子字符串。

我不记得我在哪里找到了这个答案，但在我的查询中我一直在这样做：

```
select user.name 
from user user
inner join salesperson spn on spn.salesperson_code like user.employee_code || '%' 
```

这个逻辑成功地完成了“开始于”匹配。但是，有些用户的员工代码为空白，他们也匹配此查询。

我在寻找什么：**如何修改此查询，以便如果employee_code 为空白，它将不匹配？**我是 Oracle 查询的新手。其他 DBMS 有一个与空白字段不匹配的开头子句。

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:22:33.180

我建议使用正则表达式来提取销售人员代码的非数字部分和可选的数字部分。使用这些添加的字段为表创建一个视图，或将其用作查询中的表表达式。

```
SELECT regexp_substr(salesperson_code,'\D+') AS employee_code,
       regexp_substr(salesperson_code,'\d+') AS employee_sales_no,
       salesperson_name, salesperson_code
FROM salesperson 
```

注意：正则表达式分别匹配一个或多个非数字和一个或多个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:54:13.950

尝试这个

```
select user.name 
from user user
inner join salesperson spn 
on spn.salesperson_code like nvl(trim(user.employee_code),'-') || '%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T21:54:23.810

尝试

```
select user.name 
from user user
inner join salesperson spn
  on spn.salesperson_code like DECODE (user.employee_code,
                                         NULL, NULL, 
                                               user.employee_code || '%') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-08T05:57:08.517

添加`IS NOT NULL`条件：

```
select *
from user
inner join salesperson spn
        on spn.salesperson_code like user.employee_code || '%'
       and user.employee_code is not null; 
```

# jquery - jquery 工具可滚动销毁重新初始化

> ID：16093725
> 
> 赞同：2
> 
> 时间：2013-04-18T21:50:43.993
> 
> 标签：jquery, reset, destroy, scrollable

我使用 jQuery 工具库和更准确地说是可滚动组件来制作具有导航器功能的滑块。

```
 // initialize scrollable together with the navigator plugin
$(".scrollable").scrollable().navigator(); 
```

在一个 javascript 事件中，我发出一个 ajax 请求，该请求返回一个滑块元素，我通过 additem 函数插入滑块。

```
 var api = $(".scrollable").data("scrollable");
  api.addItem($("#newitem").clone()).end(); 
```

但是，该功能并没有让我完全满意，这就是为什么我想知道是否有可能破坏或重置项目上的滑块。我查看了该库的文档，但找不到此类功能，并且在我的网站开发中仍然受阻。

我想通过 jquery 创建一个可滚动元素的克隆，然后在这个新元素上初始化一个可滚动元素（然后删除原始元素），但这似乎不是一个非常引人注目和最佳的解决方案。

```
$new = $(".scrollable").clone();
$(".scrollable").replaceWith($new);
$(".scrollable").scrollable().navigator();

http://jquerytools.org/documentation/scrollable/ 
```

# visual-studio - 设置默认脚手架时出错

> ID：16093728
> 
> 赞同：3
> 
> 时间：2013-04-18T21:51:08.823
> 
> 标签：visual-studio, visual-studio-2012, nuget

我有一个使用 NuGet 来管理包的解决方案，并且我还使用包管理器控制台进行实体框架迁移。一年左右一切正常。

今天早上，作为重组的一部分，我从解决方案中删除了一些项目。现在，当我打开包管理器控制台时，我收到了错误消息

```
Set-DefaultScaffolder : Object reference not set to an instance of an object.
At E:\Dev\survey\packages\T4Scaffolding.Core.1.0.0\tools\init.ps1:50 char:9
+         Set-DefaultScaffolder -Name CustomTemplate -Scaffolder 
T4Scaffolding.Cus ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~
    + CategoryInfo          : NotSpecified: (:) [Set-DefaultScaffolder], NullR 
   eferenceException
    + FullyQualifiedErrorId : T4Scaffolding.Cmdlets.SetDefaultScaffolderCmdlet 
```

是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T17:06:18.427

我在发布此问题后一天左右安装了 Visual Studio 2012 SP2，它自行解决了。

不确定 SP2 是修复了根本问题还是只是重置了某些东西，但无论哪种方式问题都已解决。

# scala - Liskov 替换原则和数组不变性

> ID：16093732
> 
> 赞同：0
> 
> 时间：2013-04-18T21:51:26.370
> 
> 标签：scala, covariant

Liskov 替换原则告诉我们，如果 A 是 B 的子类型，那么我们可以用类型 B 做的所有事情都应该能够用类型 A 做。

因此，为了进一步调查，我创建了以下内容：

```
class Animal

class Dog extends Animal

class BlueDog extends Dog 
```

我明白为什么我不允许这样做

```
val c: Array[Animal] = a 
```

因为数组在 Scala 中不是协变的（就像在 Java 中一样）。

但是，我认为我应该能够做到：

```
 val a: Array[Dog] = Array(new Dog())
  val b: Array[BlueDog] = a 
```

我希望 val b 没问题。但我得到：

```
class Array is invariant in type T. You may wish to investigate a wildcard type such as `_ >: ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:07:03.733

```
val a: Array[Dog] = Array(new Dog())
val b: Array[BlueDog] = a 
```

有点奇怪，因为您的 BlueDog 比 Dog 更严格，并且可能有其他方法。

```
class Animal
class Dog extends Animal
class BlueDog extends Dog {
  def wolf() { println ("I'm a blue dog") }
} 
```

那么下面的代码应该怎么做呢？

```
val a: Array[Dog] = new Array(new Dog())
val b: Array[BlueDog] = a
b(0).wolf() 
```

好吧，您的 Dog in Array`a`没有`wolf()`方法....所以很明显，您不应该将父类型分配给子类型。

这就是为什么以下工作：

```
val dog: Dog = new BlueDog 
```

但以下没有：

```
val blueDog: BlueDog = new Dog 
```

# android - 同时向活动和服务通知事件的模式

> ID：16093736
> 
> 赞同：2
> 
> 时间：2013-04-18T21:51:34.410
> 
> 标签：android, service, android-activity, broadcastreceiver, intentservice

我想知道以下场景的最佳模式：

1)`ActivityA`包含一个按钮，按下时重置应用数据

2) `IntentServiceA`，`IntentServiceB`并`ActivityB`希望收到有关该事件的通知。`IntentServiceA`清除应用程序的数据库，`IntentServiceB`从内部存储中删除一些文件`ActivityB`，尽管已停止，但从给定的内部删除任何未决消息`Handler`

这是我目前针对这种情况的设计：

1)`ActivityA`使用`sendBroadcast()`带有特定动作（比如 ACTION_RESET_DATA）的 a 来通知事件

2)有一个在方法上注册`ActivityB`的内部私有，因为即使活动停止，它也必须响应操作`BrodcastReceiver``onCreate()`

3)`IntentServiceA`并且`IntentServiceB`也有`BroadcastReceivers`，但它们`public static`在 AndroidManifest.xml 中被声明为和声明。这样，无需在相应服务上进行任何注册即可访问它们。所有`BroadcastReceiver`要做的就是启动外部服务，它反过来检查`onHandleIntent()`方法上针对 ACTION_RESET_DATA 的意图操作

虽然它有效，但我可以看到这种方法存在两个主要问题：

*   清单上声明了一个意图过滤器，其他应用程序无法访问。事实上，两者`IntentService`和内部`BroadcastReceiver`都声明为`exported="false"`
*   我不能使用，因为它与AndroidManifest.xml 中声明的`LocalBroadcastManager`不兼容。`BroadcastReceivers`这将是可取的，因为有问题的广播在我的应用程序内部

我可以`BroadcastReceiver`从两者中删除并通过from`IntentServices`手动启动它们并保持不变，但是如果服务数量增加怎么办？我必须包含代码才能启动所有这些？实际上，我的应用程序中还有其他一些类似的案例，我不确定如何正确处理它们。`startService``ActivityA``ActivityB`

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T12:27:44.190

# c# - 自定义剑道列表视图页脚：获取渲染控制

> ID：16093738
> 
> 赞同：1
> 
> 时间：2013-04-18T21:51:34.973
> 
> 标签：c#, asp.net-mvc, kendo-ui, footer

如何在 kendo listview 控件中定义自定义页脚？例如，我不想在简单的情况下看到显示项目数量的底线。在复杂的情况下，我想使用类似的东西来完全控制

```
 .FooterTemplate('...template..') 
```

# python - AFNetworking 问题的上传进度

> ID：16093742
> 
> 赞同：2
> 
> 时间：2013-04-18T21:51:43.763
> 
> 标签：python, ios, afnetworking

情况：我正在使用 AFNetworking 通过我的 iOS 应用程序的 http-post 请求将一些数据上传到我的网络服务器。特别是它的一些参数和图像。

我的问题：除了上传进度可视化外，它工作正常。它太快了。所以我的进度条在几毫秒后显示完成上传，然后等待 3-4 秒直到完成。

看起来它只测量参数字典上传而不是图像上传。它还取决于服务器发回的内容吗？我正在运行python...

```
NSData *imageData = UIImageJPEGRepresentation(image, 0.6f);

NSMutableDictionary* paramsDictionary = [NSMutableDictionary dictionaryWithDictionary:[table dictRespresentation]];
[paramsDictionary setValue:[NetConnectionManager generateRequestID:table] forKey:@"table"];
[paramsDictionary setValue:someString forKey:@"string"];

NSMutableURLRequest *request = [self.httpClient multipartFormRequestWithMethod:@"POST" path:@"/table" parameters:paramsDictionary constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData:imageData name:@"picture" fileName:@"picture.jpg" mimeType:@"image/jpeg"];
}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    self.uploadProgress = (100.0f / totalBytesExpectedToWrite) * totalBytesWritten;
    NSLog(@"Sent %lld of %lld bytes   progress: %f", totalBytesWritten, totalBytesExpectedToWrite, self.uploadProgress);

}];

[operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

    NSLog(@"success: %@", operation.responseString);

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"error: %@",  operation.responseString);

}
];

[self.httpClient enqueueHTTPRequestOperation:operation]; 
```

# entity-framework - EF 4.3 fluent mapping 中间表TPT

> ID：16093746
> 
> 赞同：0
> 
> 时间：2013-04-18T21:52:04.667
> 
> 标签：entity-framework, fluent, entity-framework-4.3

我有以下遗留表结构（为这篇文章简化） ![在此处输入图像描述](https://i.stack.imgur.com/YTTE2.png)

以下是我配置实体的微弱尝试：

```
public class EntityConfiguration : EntityTypeConfiguration<Entity> {
public EntityConfiguration() {
  ToTable("Entity");
  HasKey(x => x.Id);
  Property(x => x.Id)
    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

  HasMany(x => x.TypeOneUpdateBlacklist)
    .WithMany()
    .Map(x => {
      x.ToTable("UpdateBlacklist");
      x.MapLeftKey("EntityId");
      x.MapRightKey("UpdateId");
    });

  HasMany(x => x.TypeTwoUpdateBlacklist)
    .WithMany()
    .Map(x => {
      x.ToTable("UpdateBlacklist");
      x.MapLeftKey("EntityId");
      x.MapRightKey("UpdateId");
    });
} 
```

配置呈现此错误：

**已经定义了具有模式 'dbo' 和表 'UpdateBlacklist' 的 EntitySet 'EntityBlacklistUpdate'。每个 EntitySet 必须引用一个唯一的模式和表。**

有没有配置这个？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:46:43.320

您应该能够使用基本类型创建多对多映射`Update`：

```
public class EntityConfiguration : EntityTypeConfiguration<Entity> {
    public EntityConfiguration() {
    ToTable("Entity");
    HasKey(x => x.Id);
    Property(x => x.Id)
        .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

    HasMany(x => x.Updates)
        .WithMany()
        .Map(x => {
            x.ToTable("UpdateBlacklist");
            x.MapLeftKey("EntityId");
            x.MapRightKey("UpdateId");
    });
} 
```

但是，它要求您的类`Entity`只有一个`Updates`基本类型的导航集合，而不是两个派生类型的两个导航集合。只有当数据库模式真的代表一个继承模型时才有可能，即给定的`Update`行可以*有*一个相关的`TypeOneUpdate` *或*`TypeTwoUpdate`一行，两者都*不能*。如果两者都可以，则不能将其与 TPT 映射，但必须创建一对一的关系。

# java - 如何执行一系列相关的控制台命令？

> ID：16093754
> 
> 赞同：1
> 
> 时间：2013-04-18T21:52:54.043
> 
> 标签：java, process, runtime.exec

我目前正在开发一个项目，其中客户端从服务器接收外壳/控制台命令，并且必须执行它们。

如何让 Java 在 shell 或命令提示符下运行这些命令？我希望能够忽略平台类型 - 并且不必指定 shell 或命令提示符 - 但如果我不能，那没关系。

我必须能够发送*一系列*相关命令，而不仅仅是一个命令。这意味着 shell/prompt 不能在命令之间退出或关闭。

我当前的代码如下所示，允许执行一系列程序，但是这些命令必须以某种方式通过管道传输到 shell/命令提示符中，必须从中读取输出。

```
ArrayList<String> comDat = new ArrayList<>();

while(true) {
    String input = con.recv();
    System.out.println("> " + input);

    if(!input.equals("EOF")) comDat.add(input); else {
        String[] s = new String[comDat.size()];
        for(int i = 0; i < comDat.size(); i++) s[i] = comDat.get(i);

        System.out.println("---Command sequence executing---");
        Process p = Runtime.getRuntime().exec(s);
        p.waitFor();

        System.out.println("---ErrorStream output---"); String line = "";
        BufferedReader errStream = new BufferedReader(new InputStreamReader(p.getErrorStream()));
        while((line = errStream.readLine()) != null) System.out.println("< " + line);

        System.out.println("\n---OutputStream output---"); line = "";
        BufferedReader outStream = new BufferedReader(new InputStreamReader(p.getInputStream()));
        while((line = errStream.readLine()) != null) System.out.println("< " + line);
    }
    Thread.sleep(200);
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:30:49.577

基本前提围绕着这个事实，`dir`它不是外部命令，而是`cmd`.

我会避免`BufferedReaders`在读取进程的输出时，因为并非所有进程在发送输出（例如进度指示器）时都使用新行，而是您应该读取 char for char（恕我直言）。

你应该我们`ProcessBuilder`而不是`Runtime#exec`。它提供了更好的管理并允许您将错误流重定向到输入流中，从而更容易读取输入。

```
import java.io.IOException;
import java.io.InputStream;

public class TestProcessBuilder {

    public static void main(String[] args) {

        try {
            ProcessBuilder pb = new ProcessBuilder("cmd", "/c", "dir");
            pb.redirectError();
            Process p = pb.start();
            InputStreamConsumer isc = new InputStreamConsumer(p.getInputStream());
            isc.start();
            int exitCode = p.waitFor();

            isc.join();
            System.out.println("Process terminated with " + exitCode);
        } catch (IOException | InterruptedException exp) {
            exp.printStackTrace();
        }

    }

    public static class InputStreamConsumer extends Thread {

        private InputStream is;

        public InputStreamConsumer(InputStream is) {
            this.is = is;
        }

        @Override
        public void run() {

            try {
                int value = -1;
                while ((value = is.read()) != -1) {
                    System.out.print((char)value);
                }
            } catch (IOException exp) {
                exp.printStackTrace();
            }

        }

    }
} 
```

# php - 为什么 AJAX 调用仅在 Firefox 中给出错误超时响应

> ID：16093755
> 
> 赞同：0
> 
> 时间：2013-04-18T21:53:10.933
> 
> 标签：php, jquery, ajax

**我的ajax调用**

我进行了 ajax 调用以检查该电子邮件地址是否已用于参与。php 文件在未使用时返回 0，如果已使用则返回 1。当它被使用时，它会制作一个错误标签来说明。

这在 Chrome、Safari、Internet Explorer 中完美运行。但是在 Firefox 中是一个完全的痛苦。它检查并给出正确的响应，但 5 秒后它给出了超时。

我有另一个 ajax 调用将所有数据放入数据库，它有完全相同的问题。

我做错了什么？

```
function controleerDeelnemerEmail(){

    var emailVal = $('#email').val();

    $.ajax( {

        type: 'POST',
        url:'?page=home&action=check',
        dataType:'text',
        data: {'email':emailVal}, 
        success: function( data ){

            data = parseInt(data);

            if(data == 1){

                if( $(".emailerror").length == 0 ){
                    var error = "<label for='email' generated='true' class='error emailerror' style=''>Dit e-mailadres wordt al gebruikt</label>"
                    $(error).insertBefore( $('#email') );    
                }                            
            }
        }
    })
} 
```

**服务器端**

公共功能检查（）{

```
 if(!empty($_POST)){

        $content = $this->deelnemerDAO->controleerDeelnemerEmail( $_POST['email'] );

        if( $content == 1 ){
            echo 1;
        }else{
            echo 0;
        }
        exit();
    }        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:57:18.983

您应该添加一个错误回调以查看返回的答案是否为 1。

错误的类型可以被ajax视为错误。

```
function controleerDeelnemerEmail() {
    var emailVal = $('#email').val();
    $.ajax({
        type: 'POST',
        url:'?page=home&action=check',
        dataType:'text',
        data: {
            'email': emailVal
        }
    }).done(function (data) {
        // equivalent to success callback
        data = parseInt(data);
        if (data == 1) {
            if ($(".emailerror").length === 0) {
                var error = $("<label>", {
                    'for': 'email',
                    'generated': 'true',
                    'class': 'error emailerror'
                }).text("Dit e-mailadres wordt al gebruikt").insertBefore($('#email'));
            }                            
        }
    }).fail(function (response, status) {
        alert('fail');
    });
} 
```

# javascript - javascript 中的混淆、this 指针和事件

> ID：16093758
> 
> 赞同：0
> 
> 时间：2013-04-18T21:53:18.363
> 
> 标签：javascript

我有一个 javascript 对象，我希望它能够处理一些交互功能。以简单的方式描述场景有点棘手，所以希望它不会在这里完全失控。

我的对象看起来像

```
myobject = function() {
    this.initialize = function() {
        // HERE this = the myobject instance
        var test = document.createElement('div');
        test.onmousedown = this.mousedown;
    }
    this.mousedown = function(e) {
        // HERE this = the calling div-element
    }
} 
```

所以我的问题基本上是在被调用时`this`不会是`myobject`实例`this.mousedown(e)`，而是调用者（如果术语正确？）在这种情况下，它是我创建的 div 并放入`test`上面调用的变量中。

我想访问正在运行该方法的实例（因为我相信这是`mousedown`我创建的方法）。

到目前为止，我已经尝试了一些想法：

*   在包含对象的对象上创建一个`data-`属性并对其进行操作。`div``this`
*   将 this 指针作为参数与`e`to一起发送`this.mousedown(e)`

我现在能想到的就这些了，希望有道理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T21:57:12.700

您可以在第一次实例化对象时创建一个副本：

```
var myobject = function() {
    var self = this;    
    this.initialize() {
        // HERE this = the myobject instance
        var test = document.createElement('div');
        test.onmousedown = this.mousedown;
    }
    this.mousedown(e) {
        // HERE this = the calling div-element
        // use self instead of this
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:56:29.720

最简单的解决方案是制作一个您在回调中引用的“自我”变量：

```
myobject = funciton() {
    var self = this;
    this.initialize() {
        //use self to refer to myobject
        self.mousedown(e);
    }
    this.mousedown(e) {

    }
} 
```

# php - SELECT DISTINCT 仍然显示重复的结果

> ID：16093761
> 
> 赞同：0
> 
> 时间：2013-04-18T21:53:24.527
> 
> 标签：php

我有一个 HTML**选择**使用 SELECT DISTINCT 由 SQL 查询填充的表单......这个想法是不显示数据库中的重复值，它几乎可以工作，但在某些情况下它会出现问题。为了填充 SQL 列，我使用 PHP 读取带有分隔符和分解功能的 TXT 文件。如果我在 TXT 文件中有 10 个重复的列，在我的 HTML 上它显示 2，而不是只有 1...我注意到 1 包含来自数据库的 9 个条目，而另一个有 1 个条目始终是TXT 文件的最后一行。恢复：TXT 文件的最后一行总是在 HTML 选择表单上重复。检查数据库，一切正常，我真的不知道为什么它总是在最后一个重复。我讲述了制作 SQL 条目的 PHP，因为我 我不确定问题出在包含 HTML 选择的 PHP 中还是在填充数据库的 PHP 中……我相信问题出在带有 HTML 选择的 PHP 中，因为我正在查看数据库并且一切正常. 这个 php 中的 SQL 查询是这样的：

```
<td class="formstyle"><select name="basenamelst" class="formstyle" id="basenamelst">
<option value="Any">Any</option>
<?
$sql = mysql_query("SELECT DISTINCT basename FROM dumpsbase where sold=0");
while($row = mysql_fetch_assoc($sql))
  {
    if($row['basename'] == "")
     {
    echo '<option value="'.htmlspecialchars($row['basename'], ENT_QUOTES, 'UTF-8').'">unknOwn</option>'; 
     }
    else
     {
       echo '<option value="'.htmlspecialchars($row['basename'], ENT_QUOTES, 'UTF-8').'">'.htmlspecialchars($row['basename'], ENT_QUOTES, 'UTF-8').'</option>'; 
     }
   }
?>
</select> 
```

请记住：如果我将 10 个重复列上传到数据库，它会在选择时显示 2。一个有 9 个条目，另一个有 1 个条目（始终是我的 TXT 文件的最后一行）......好吧，很多人告诉我修剪（）列并且它仍然显示重复......所以我得出的结论是为数据库加载 TXT 时遇到一些问题。这是我将值放入数据库的代码：

```
$file = fopen($targetpath, "r") or exit("Unable to open uploaded file!");

while(!feof($file))
 {
   $line = fgets($file);
   $details = explode(" | ", $line);

   foreach($details as &$value) // clean each field
    {
      $value = mysql_real_escape_string($value);
      if($value == "")
     {
       $value = "NONE";
     }
     }
   unset($value);
 mysql_query("INSERT INTO dumpsbase VALUES('NULL', '$details[0]', '$details[1]', '$details[2]', '$details[3]', '$details[4]', '0', '$price', 'NONE', now(), 'NONE', 'NONE')") or die ("Uploading Error!"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:03:13.627

在我看来，错误是当您从文件中填充表格时，其中一个值最终与其他值略有不同。

最后一行不同的事实让我想知道每个值中是否包含换行符（最后一行除外）。

如果是这种情况，您应该能够通过`trim()`在数据库中运行或类似的方法来纠正它。

[编辑] 理想情况下，您希望尽早执行此操作，即更正数据，而不是在访问时记住它是错误的。如果您找不到初始导入的原因，您可以在之后立即更正数据`UPDATE dumpsbase SET basename = TRIM(basename)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:05:07.553

尝试将您的查询更改为以下内容：

```
SELECT DISTINCT TRIM(basename) FROM dumpsbase WHERE sold=0 
```

希望这可以帮助。

# java - 为什么 JUnit 测试的启动会意外失败？

> ID：16093762
> 
> 赞同：3
> 
> 时间：2013-04-18T21:53:26.537
> 
> 标签：java, eclipse, junit

我正在尝试为我使用 Spring Source eclipse IDE 从 github 导入的 OS 项目运行单元测试。从 github 导入时没有项目，所以使用向导创建一个新项目。

如果我运行 maven 构建或 maven 测试，一切正常。但是，如果我尝试使用 cmd-opt-x t 从 Eclipse 内部运行单个单元测试文件，则会收到以下错误：

> JUnit 测试的启动意外失败。检查日志以获取详细信息。
> 
> 原因：（项目名称）不存在

我搜索了类似的错误，但没有找到任何东西。这里发生了什么？

* * *

github账号的网址是：`git://github.com/BroadleafCommerce/BroadleafCommerce.git`

# c++ - 通过引用模板方法传递向量

> ID：16093767
> 
> 赞同：3
> 
> 时间：2013-04-18T21:53:32.980
> 
> 标签：c++, python, cython

试图通过引用 C++ 模板方法来传递向量，但我得到的只是一个空列表，显然参数是按值传递的。

我正在使用 Cython 0.18 和 Python 2.7

有任何想法吗？

**C++ 端**

```
class VectByRef
{ 
public:
  VectByRef::VectByRef();

  template<typename T>
  void GetVector(T& var);
}

template<typename T>
void VectByRef::GetVector(T& var)
{
  var.push_back(1);
  var.push_back(2);
  var.push_back(3);
} 
```

**赛通方**

```
cdef extern from "VectByRef.h":
  cdef cppclass VectByRef:
    VectByRef() except
    vector[cython.int] GetVector(vector[cython.int])

def getVector(self):
  cdef vector[cython.int] resultVectInt
  self._vectByRef.GetVector(<vector[cython.int]> resultVectInt)
  print(resultVectInt)  # The result is an empty list [] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T05:23:47.770

# ios - iOS 原生地图 URL 方案多个引脚

> ID：16093771
> 
> 赞同：2
> 
> 时间：2013-04-18T21:53:44.943
> 
> 标签：ios, cordova, maps, pins

我正在使用 PhoneGap 为 iOS 和 Android 构建应用程序。

我想用多个引脚在 iOS 上打开本机地图应用程序。我可以使用 ?q=lat,long 参数使用他们的 Maps URL 方案在 iOS 设备上打开本机地图

[http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)

是否可以打开本机地图应用程序并显示多个 ping 而不是只显示一个？

我已经尝试过足够的搜索，但没有足够的文档来回答我的问题。

感谢您的帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-13T07:59:51.520

为您要显示的每个图钉创建一个 MKMapItem，将 MKMapItems 保存到一个数组中，然后使用 openMapsWithItems:launchOptions: 将该数组发送到地图应用程序。地图应用程序将为数组中的每个项目显示一个图钉。

我自己没有使用过这个，但它来自 Apple 的文档：

[http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html#//apple_ref/occ/clm/MKMapItem/openMapsWithItems:launchOptions](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html#//apple_ref/occ/clm/MKMapItem/openMapsWithItems:launchOptions)：

# rubymine - RubyMine 按路径搜索文件的项目

> ID：16093780
> 
> 赞同：6
> 
> 时间：2013-04-18T21:54:36.340
> 
> 标签：rubymine

在 SublimeText 2 中，我可以这样做：`cmd + t`

然后键入文件名或文件夹名称，显示的结果是匹配与我正在搜索的术语匹配的文件的文件 查找在我正在搜索的术语的子文件夹中的文件，例如，如果我有目录像这样的结构：

```
/
/models
 /users
 /orders
 /products
/views
 /users
  edit.rb
  add.rb
/orders
  edit.rb
  add.rb 
```

我可以做 cmd + t

类型`"orders"`和唯一会显示的两个选项是 `/orders/edit.rb` 和`/orders/add.rb`文件，我可以向下导航或键入向搜索词添加更多内容， `"orders edit"`唯一的选项是`"/orders/edit.rb"`

如何在 RubyMine 中获得相同的功能

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T09:14:33.063

使用`Navigate`| `File`，你可以键入文件名和目录名片段，比如`or/ed`，使用斜杠作为分隔符。也支持中间匹配。

[帮助中提供了](http://www.jetbrains.com/ruby/webhelp/navigating-to-class-file-or-symbol-by-name.html)更多详细信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-28T21:01:38.043

*按 shift 两次。*

在 IntelliJ IDEA 中使用 Search Everywhere 搜索任何内容 [http://mrhaki.blogspot.ca/2014/02/search-for-anything-with-search.html](http://mrhaki.blogspot.ca/2014/02/search-for-anything-with-search.html)

# windows - 从命令提示符打印文本文件

> ID：16093782
> 
> 赞同：2
> 
> 时间：2013-04-18T21:54:44.097
> 
> 标签：windows, text, printing, command-prompt

好吧，这超出了我的专业领域，但这是我正在尝试做的事情：

→ 我有一台 POS（销售点）收据打印机。我已经为它安装了驱动程序，并且可以用它打印一个测试页。我也可以从记事本++（例如）打印，尽管它留下了很多空白空间。此打印机设置为默认打印机。

→ 我希望能够使用 Windows 中的一些自动化过程将单行打印到打印机。我最初的想法是在文本文件中打印我想要的行，然后使用：

```
print C:\filename.txt 
```

从命令提示符。然而，这导致

```
C:\filename.txt is currently being printed 
```

但没有打印任何内容。我不熟悉 ESC/POS，也不知道在哪里合并这些命令。基本上，从命令提示符打印一个 txt 文件是我的第一需要。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-12T13:46:36.260

尝试这个 ：

```
START /MIN NOTEPAD /P yourfile.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T11:41:50.653

我会尝试

```
copy /b yourfilename yourportname 
```

你的端口名可能在哪里，`PRN:`或者`LPT1:`其他什么。

# api - web api odata：$select 不工作

> ID：16093783
> 
> 赞同：4
> 
> 时间：2013-04-18T21:54:55.927
> 
> 标签：api, select, web, odata, asp.net-web-api

试图让这个工作。即使我只指定一个 (?$select=title)，查询也会返回所有行。在 webapiconfig 我有：

```
var queryAttribute = new QueryableAttribute()
            {
                AllowedQueryOptions = AllowedQueryOptions.All
            };
            config.EnableQuerySupport(queryAttribute); 
```

控制器如下所示：

```
public override IQueryable<_person_TITLE> Get()
        {
            return db.personTitle.AsQueryable();
        }
        protected override _person_TITLE GetEntityByKey(int key)
        {
            return db.personTitle.FirstOrDefault(p => p.person_TITLE_ID == key);
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        } 
```

编辑：在进行了更多挖掘之后，我发现 $select 从未正式实施过。这就是默认情况下未在 AllowedQueryOptions 中打开它的原因。

那么，这是什么意思？？？拥有此选项至关重要。如果没有这个选项，将 odata web api 投入生产将是愚蠢的。在你自己的处理程序中编码会首先破坏使用 web api 的目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T00:23:48.217

我们现在正在努力。对 $select 和 $expand 的支持应该很快就会出现在每晚的构建中。

# javascript - 使用 Selenium 监控 JavaScript 错误和 404

> ID：16093789
> 
> 赞同：0
> 
> 时间：2013-04-18T21:55:45.053
> 
> 标签：javascript, asp.net, selenium

我想在我们的组织内设置一个基本的监控服务，用于监控关键 URL 列表中是否存在 javascript 错误或 404。通过这种方式，我们将知道我们在将代码投入生产时是否犯了任何非常明显的错误！

我想制作一个 ASP.Net Web 应用程序来执行此操作并将任何错误记录到 Elmah - 我们用于所有内部/外部 Web 应用程序的工具。Web 应用程序将定期轮询 URL 列表以查找错误。

我希望为此使用 Selenium。特别是 PhantomJS.exe，因为这是一个基于 webkit 的无头浏览器实现。

然而，似乎在页面渲染中捕获错误并不是 Selenium 的强项！也许我的做法是错误的——我希望能够导航到一个 URL，然后检查错误集合和/或捕获与 404 相关的事件。

任何关于我如何使用 Selenium 或其他工具来完成这项工作的建议将不胜感激:)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-29T21:04:09.233

[您可以使用TrackJS 错误监控](https://trackjs.com)很容易地做到这一点。将我们的代理放在您要检查的页面上，甚至是内部私人页面。当 Selenium（或任何其他用户）在页面上遇到错误时，会将其报告给服务。

如果你想自动化它，你可以检查[TrackJS API](https://docs.trackjs.com/data-api/)作为你 selenium 测试的一部分，以断言现在在测试的最后 X 分钟发生了错误。

# php - 阅读 PHP 的登录前 ssh 横幅

> ID：16093790
> 
> 赞同：1
> 
> 时间：2013-04-18T21:56:04.850
> 
> 标签：php, ssh, stream

我正在尝试使用 libssh2-php 库函数从 PHP 连接到 ssh 服务器。这一切都很好，但我不知道如何阅读 PHP 中的登录前横幅。登录前横幅是 SSH 提示登录之前显示的文本，据我所知，我无法从连接对象获取流。

因此，鉴于此代码，有没有办法在登录之前进行读取？

```
<?php
if (!function_exists("ssh2_connect")) die("function ssh2_connect doesn't exist");
      // log in at server1.example.com on port 22 
if(!($con = ssh2_connect("server1.example.com", 22))){
  echo "fail: unable to establish connection\n";
} else {

 //####### Would really like to get a stream right here to read pre-login banner

// try to authenticate with username root, password secretpassword
if(!ssh2_auth_password($con, "root", "secretpassword")) {
    echo "fail: unable to authenticate\n";
} else {
    // allright, we're in!
    echo "okay: logged in...\n";

    // execute a command
    if (!($stream = ssh2_exec($con, "ls -al" ))) {
        echo "fail: unable to execute command\n";
    } else {
        // collect returning data from command
        stream_set_blocking($stream, true);
        $data = "";
        while ($buf = fread($stream,4096)) {
            $data .= $buf;
        }
        fclose($stream);
    }
 }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:21:40.927

您可以使用[phpseclib，一个纯 PHP SSH 实现](http://phpseclib.sourceforge.net/)来做到这一点。横幅应该可以通过`$ssh->getLastError()`（返回一个字符串）或`$ssh->getErrors()`（返回一个字符串数组）来获得。

引用它的来源：

```
// see http://tools.ietf.org/html/rfc4252#section-5.4; only called when the encryption has been activated and when we haven't already logged in
if (($this->bitmap & NET_SSH2_MASK_CONSTRUCTOR) && !($this->bitmap & NET_SSH2_MASK_LOGIN) && ord($payload[0]) == NET_SSH2_MSG_USERAUTH_BANNER) {
    $this->_string_shift($payload, 1);
    extract(unpack('Nlength', $this->_string_shift($payload, 4)));
    $this->errors[] = 'SSH_MSG_USERAUTH_BANNER: ' . utf8_decode($this->_string_shift($payload, $length));
    $payload = $this->_get_binary_packet();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:00:09.377

更新（讨论后）：

目前，除了自己实现之外，我认为没有办法在 php 中执行此操作。向 ssh2 扩展的开发人员发送功能请求可能是最好的开始方式。

* * *

原始（愚蠢）答案：登录后会出现登录横幅

# datasource - 无法连接到 Team Foundation Service 数据源以进行编码的 ui 测试

> ID：16093797
> 
> 赞同：2
> 
> 时间：2013-04-18T21:56:21.557
> 
> 标签：datasource, coded-ui-tests, azure-devops

在我的机器上本地运行编码 UI 测试时，在存储在 Team Foundation Service 中的测试用例中具有参数化值，我收到错误：

> 单元测试适配器连接数据源或读取数据失败。有关解决此错误的详细信息，请参阅 MSDN 库中的“数据驱动单元测试故障排除”( [http://go.microsoft.com/fwlink/?LinkId=62412](http://go.microsoft.com/fwlink/?LinkId=62412) )。错误详细信息：TF30064：您无权访问服务器。

这是测试方法的数据源属性

```
[DataSource("Microsoft.VisualStudio.TestTools.DataSource.TestCase", "https://*accountname*.visualstudio.com/defaultcollection;*project*", "628", DataAccessMethod.Sequential), TestMethod] 
```

我没有 tfs 中的所有权限，但我拥有其中的大部分权限以及任何与构建服务相关的权限。

# r - 如何获取具有 UTM 坐标的 RGB 光栅图像

> ID：16093802
> 
> 赞同：7
> 
> 时间：2013-04-18T21:56:30.400
> 
> 标签：r, spatial, raster, utm, rastervis

我有一个三层栅格，其中包含红色、绿色和蓝色通道值。我可以用 绘制图像`raster::plotRGB`，但我需要添加带有 UTM 坐标的轴。可以使用 来添加坐标`axes=TRUE`，但它们在空间中浮动并且看起来很糟糕。我想获得坐标，因为它们显示在使用该`raster` `plot`方法创建的图中，或者更好的是它们在使用`rasterVis::levelplot`.

最终，我需要创建一个带有 UTM 坐标、比例尺和指北针的光栅图像。这需要使用 R 包中的`plotRGB`函数`raster`或具有类似功能的函数来完成，因为我需要手动分配每个像素的颜色（无色带）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-06T06:43:28.547

这是一个古老的帖子，但这是一个很好的问题，所以我会给它一个答案。

我将举例说明如何`rasterVis::levelplot`使用 . 附带的 3 通道 R 徽标光栅数据来完成此操作`raster`。

```
library(rasterVis)
b <- brick(system.file("external/rlogo.grd", package="raster")) 
```

### 使用 levelplot 绘制三通道 RGB 栅格

`raster`创建一个与砖具有相同尺寸和范围的空。

```
r <- raster(b) 
```

计算对应 RGB 通道值的十六进制颜色，并强制转换为`factor`.

```
cols <- factor(rgb(b[], maxColorValue=255)) 
```

将这些因子值分配给栅格像元。

```
r[] <- cols 
```

用 绘制`levelplot`，从 的级别中提取十六进制颜色`cols`并将它们传递给`col.regions`。

```
levelplot(r, col.regions=as.character(levels(cols)), colorkey=FALSE) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/JGqGu.png)](https://i.stack.imgur.com/JGqGu.png)

### 添加指北针和比例尺

对于指北针和比例尺，我们将查看@OscarPerpiñán 的[文档](http://oscarperpinan.github.io/rastervis/FAQ.html#sec-5)。

```
levelplot(r, col.regions=as.character(levels(cols)), colorkey=FALSE) +
  layer(SpatialPolygonsRescale(layout.north.arrow(), offset = c(5, 10), scale = 10)) +
  layer({
    xs <- seq(5, 25, by=5)
    grid.rect(x=xs, y=5,
              width=5, height=2,
              gp=gpar(fill=rep(c('transparent', 'black'), 2)),
              default.units='native')
    grid.text(x=xs-2.5, y=8, seq(0, 400, by=100),
              gp=gpar(cex=0.7),
              default.units='native')
  }) 
```

`grid.text`我将由您来计算与矩形的宽度（以地图单位为单位）相关的真实距离（传递给）。

[![在此处输入图像描述](https://i.stack.imgur.com/EcUNP.png)](https://i.stack.imgur.com/EcUNP.png)

# javascript - 同位素项目的定位

> ID：16093804
> 
> 赞同：0
> 
> 时间：2013-04-18T21:56:48.760
> 
> 标签：javascript, jquery, css, jquery-masonry, jquery-isotope

我刚刚为最近的一个项目设置了同位素，并在我的页面底部添加了这个

```
<script type="text/javascript">
$('#isotope').isotope({
layoutMode : 'masonry',
itemSelector : '.isotope-item'
});
</script> 
```

但是，它不起作用。我所有的项目都显示在另一个之下。这就是我在 .isotope-item div 上得到的。只放了一个垂直定位，没有水平放置。

```
position: absolute;
left: 0px;
top: 0px;
-webkit-transform: translate3d(0px, 1103px, 0px) 
```

我试图弄清楚这是什么，并希望得到任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T13:33:45.233

同位素中的砌体布局默认使用第一项的宽度。如果这超过容器宽度的一半，它们将全部显示在一列中。

尝试将宽度设置为一个较小的数字作为测试：

```
<script type="text/javascript">
$('#isotope').isotope({
  layoutMode : 'masonry',
  masonry: {
      columnWidth: 5
  }
  itemSelector : '.isotope-item'
});
</script> 
```

一个非常小的`columnWidth`数字的缺点是同位素创建了更多的列用于高度计算，这更慢并且使用更多的内存。

# datatable - 如何清除 Datatables columnFilter 选择列表？

> ID：16093805
> 
> 赞同：0
> 
> 时间：2013-04-18T21:56:59.803
> 
> 标签：datatable

我将一个 json 对象传递给一个创建数据表的函数。我正在使用 columnFilter 向每一列添加过滤器，并使用一个数组来填充过滤器列表。

我有一张图片[http://imgur.com/ehV6lZP](http://imgur.com/ehV6lZP)这里显示了一个很好的过滤器。

问题是如果我用新的 json 调用函数，列过滤器会变成一个大字符串，其中包含以前的过滤器值。即使我将数组长度设置为 0 并且 json 为空，也会发生这种情况。

这张[http://imgur.com/fi6Y8rz](http://imgur.com/fi6Y8rz)图片显示了当用空 json 重新加载表时过滤器标题中先前值的混搭。

在网上的很多例子中，我看到人们使用这个：

```
{ type: "select"} 
```

这似乎为他们建立了列表，但它对我不起作用。除了我重新加载表时，这种方法似乎很好。

我正在寻找有关如何在每次调用此函数时清除这些过滤器选择的指导。

```
function popNoteTable(oJson) {
  //these store the unique values for filtering columns
  var oTitles = [];
  var oLocs = [];
  var oSigned = [];

  if (oJson.M_REC.NOTE.length > 0) {
    oTitles = getUniqueJsonValuesByCol("S_TITLE", oJson.M_REC.NOTE);
    oLocs = getUniqueJsonValuesByCol("S_FACILITY", oJson.M_REC.NOTE);
    oSigned = getUniqueJsonValuesByCol("S_SIGNED_BY", oJson.M_REC.NOTE);
  } else {
    oTitles.length = 0;
    oLocs.length = 0;
    oSigned.length = 0;
  }

  var oTable = $('#example').dataTable({
    "bFilter": true,
    "iDisplayLength": 50,
    "bProcessing": true,
    "bDestroy": true,
    "aaData": oJson.M_REC.NOTE,
    "bAutoWidth": false,
    "aoColumns": [
      {"mDataProp": "S_TITLE"},
      {"mDataProp": "S_FACILITY"},
      {"mDataProp": "S_SIGNED_BY"},
      {"mDataProp": "S_SIGN_DT_TM"},
      {"mDataProp": "F_EVENT_ID", "bVisible": false}
    ]
    }).columnFilter({
    sPlaceHolder: "head:before",
    aoColumns: [
      {type: "select", values: oTitles},
      {type: "select", values: oLocs},
      {type: "select", values: oSigned},
      null,
      null
    ]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:06:45.360

好的，所以我发现过滤功能必须以某种方式修改我的表头。如果我通过调用以下函数重新定义我的表，然后再调用上述函数来执行数据表，一切正常。

```
function defineTable() {
  var sTable
    = '<table id="example" class="display" cellpadding="0" cellspacing="0" border="1" width="100%">' +
    ' <thead>' +
    '   <tr>' +
    '     <th>Note Title</th>' +
    '     <th>Facility</th>' +
    '     <th>Signed By</th>' +
    '     <th>Signed Dt/Tm</th>' +
    '     <th>Event Id</th>' +
    '   </tr>' +
    '   <tr>' +
    '     <th>Note Title</th>' +
    '     <th>Facility</th>' +
    '     <th>Signed By</th>' +
    '     <th>Signed Dt/Tm</th>' +
    '     <th>Event Id</th>' +
    '   </tr>' +
    ' </thead>' +
    ' <tbody></tbody>' +
    ' <tfoot>' +
    '   <tr>' +
    '     <th>Note Title</th>' +
    '     <th>Facility</th>' +
    '     <th>Signed By</th>' +
    '     <th>Signed Dt/Tm</th>' +
    '     <th>Event Id</th>' +
    '   </tr>' +
    ' </tfoot>' +
    '</table>';

  $('#notesTable').html(sTable);
} 
```

# php - 如何使用 PHP 在 MySQL 表中查找下一个可用整数

> ID：16093813
> 
> 赞同：4
> 
> 时间：2013-04-18T21:57:44.450
> 
> 标签：php, mysql

我知道**auto_increment**是要走的路，但我不能使用 auto_increment 功能，因为我表中的列可能会重复，它不是唯一的。当我向表中插入新行时，我需要一种方法来找到下一个可用位置来插入它。

例如表结构：

```
 Primary Key = (ID, UserID)
 ID   UserID 
 3    6
 3    1
 1    3 
```

现在，当我插入查询时，我想将其插入**ID = 2**而不是**4**。使用**auto_increment**它给了我**4**

有没有在 PHP 中不使用循环的解决方案？到目前为止，我所拥有的是将所有行提取到数组中，然后在 ID 中找到下一个可用数字。是否可以在不获取 PHP 中的所有行并仅在 MySQL 查询中执行此操作的情况下执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T22:05:40.860

```
SELECT t1.id+1 AS MISSING_ID
FROM the_table AS t1
LEFT JOIN the_table AS t2 ON t1.id+1 = t2.id
WHERE t2.id IS NULL
ORDER BY t1.id LIMIT 1; 
```

我做了一个小提琴：[http ://sqlfiddle.com/#!2/4d14d/2](http://sqlfiddle.com/#!2/4d14d/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T22:00:35.983

不，不处理数据是不可能的。更正此问题的首选方法是调整表结构以支持唯一的、可自动递增的字段。否则，您将不得不处理数据（在 PHP 中或通过 SQL 语句）以找到一个开放的插槽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T22:10:07.373

这应该可以解决问题：

```
SELECT
  min_table.ID+1 AS start,
  MIN(max_table.ID) - 1 AS end
FROM
  your_table AS min_table,
  your_table AS max_table
WHERE
  min_table.ID < max_table.ID
GROUP BY
  min_table.ID
HAVING
  start < MIN(max_table.ID) 
```

左侧列将返回序列间隙中的第一个可用点，第二个是该特定间隙中的最高数字。

来源： http: [//www.codediesel.com/mysql/sequence-gaps-in-mysql/](http://www.codediesel.com/mysql/sequence-gaps-in-mysql/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-04T20:33:18.377

我未加载项目的解决方法：

假设，您有属于某个 topic_id 的 question_id 的问题集。

假设，用户导航并单击`"<Prev" "Next>"`按钮来导航问题。

您只有当前 ID。捕捉导航的**方向**，**topic_id**，**question_id**你可以做一个循环

```
 do {

  // query base, doing question_id++ or question_id-- depending on needed    direction until you find next id within topic_id 

  } while( id!=null ) ` 
```

根据您的移动方向使用增量或减量

# excel - 从主列表中过滤关键字

> ID：16093818
> 
> 赞同：0
> 
> 时间：2013-04-18T21:58:03.650
> 
> 标签：excel, filter, excel-formula, worksheet-function, conditional-formatting

我有一个主列表 (A)，其中包含列表 B 中不能包含的关键字。我需要在列表 B 的列中找到主列表 (A) 中包含的任何单词，并将它们显示在另一列中。我认为这可能是一个双数组公式，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:27:41.033

使用 ListB 选择列中的第一个单元格，主页 > 样式 > 条件格式，新建规则，使用公式确定要格式化的单元格，在此公式为真的设置值的格式下输入`=MATCH(B1,A:A)`，单击并选择一种格式（例如黄色突出显示) 并确保适用于是`=$B:$B`。然后过滤 ListB 选择黄色，复制并粘贴到新列并删除过滤器。

# file-io - 方案帮助 - 文件统计

> ID：16093824
> 
> 赞同：2
> 
> 时间：2013-04-18T21:58:21.243
> 
> 标签：file-io, scheme

所以我必须在 Scheme 中完成一个项目，但我很困惑。基本上，程序所做的是打开一个文件并输出统计信息。现在我可以计算字符数，但我还需要计算行数和单词数。我现在只是想解决这种情况，但最终我还必须接受两个文件——第一个是文本文件，比如一本书。第二个是单词列表，我必须计算这些单词在第一个文件中出现的次数。显然，我将不得不处理列表，但我希望能得到一些关于去哪里的帮助。这是我到目前为止的代码（并且有效）

```
(define filestats
          (lambda (srcf wordcount linecount charcount )

                (if (eof-object? (peek-char srcf ) )
                    (begin
                        (close-port srcf)
                        (display linecount)
                        (display " ")
                        (display wordcount)
                        (display " ")
                        (display charcount)
                        (newline) ()
                    )
                    (begin
                        (read-char srcf)
                        (filestats srcf  0 0 (+ charcount 1))   
                    )
                )

            )
)

(define filestatistics
  (lambda (src)
    (let ((file (open-input-file src)))
       (filestats file 0 0 0)
    )
  )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:02:53.603

使用 Scheme 的字数统计算法之前已经在 Stack Overflow 中解释过，例如在[这里](https://stackoverflow.com/a/10060603/201359)（向上滚动到页面顶部以查看 C 中的等效程序）：

```
(define (word-count input-port)
  (let loop ((c (read-char input-port))
             (nl 0)
             (nw 0)
             (nc 0)
             (state 'out))
    (cond ((eof-object? c)
           (printf "nl: ~s, nw: ~s, nc: ~s\n" nl nw nc))
          ((char=? c #\newline)
           (loop (read-char input-port) (add1 nl) nw (add1 nc) 'out))
          ((char-whitespace? c)
           (loop (read-char input-port) nl nw (add1 nc) 'out))
          ((eq? state 'out)
           (loop (read-char input-port) nl (add1 nw) (add1 nc) 'in))
          (else
           (loop (read-char input-port) nl nw (add1 nc) state))))) 
```

该过程接收一个输入端口作为参数，因此可以将其应用于文件。请注意，为了计算单词和行数，您需要测试当前字符是换行符还是空白字符。并且需要一个额外的标志（`state`在代码中调用）来跟踪新单词的开始/结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T00:09:55.617

如何将文件“标记”为行列表，其中行是单词列表，单词是字符列表。

```
(define (tokenize file)
  (with-input-from-file file
    (lambda ()
      (let reading ((lines '()) (words '()) (chars '()))
        (let ((char (read-char)))
          (if (eof-object? char)
              (reverse lines)
              (case char
                ((#\newline) (reading (cons (reverse (cons (reverse chars) words)) lines) '() '()))
                ((#\space)   (reading lines (cons (reverse chars) words) '()))
                (else        (reading lines words (cons char chars)))))))))) 
```

一旦你完成了这个，剩下的就很简单了。

```
> (tokenize "foo.data")
(((#\a #\b #\c) (#\d #\e #\f))
 ((#\1 #\2 #\3) (#\x #\y #\z))) 
```

# javascript - Extjs 按字母数字字段排序存储

> ID：16093825
> 
> 赞同：4
> 
> 时间：2013-04-18T21:58:21.277
> 
> 标签：javascript, extjs, extjs4

我有一堆名称类似于“Itemtype #”的记录，当它们输出到树视图中时，它们的排序不正确，如下所示：

*   项目 1
*   项目 10
*   项目 11
*   第 12 项
*   第 13 项
*   第 2 项
*   第 3 项
*   第 4 项

我的模型字段定义如下，我按“名称”排序：

```
fields: [
  { name: 'Id', defaultValue: 0, type: 'int', mapping: 'Id' },
  { name: 'Name', defaultValue: '', type: 'string', mapping: 'Name', sortType: Ext.data.SortTypes.asUCString },
  { name: 'Type', defaultValue: 0, type: 'int', mapping: 'Type' },
  { name: 'CreationDate', type: 'date', mapping: 'CreationDate' }
], 
```

谁能指出我正确的方向？我正在使用 extjs 4.0.5

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T22:11:59.480

在商店中，您必须通过 sorters 属性设置数据的显示方式：

```
var store = Ext.create('Ext.data.JsonStore', {
  .
  .
  .
  remoteSort: false, //true for server sorting
  sorters: [{
     property: 'Name',
     direction: 'DESC' // or 'ASC'
   }],
  .
  .
  .

}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:16:44.830

尝试使用[带有排序回调的排序](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.util.Sorter-cfg-sorterFn)器配置调用[TreeStore.sort](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.util.Sortable-method-sort)。在这种情况下，一个简单的字段排序不会做，因为天真的 alpha 排序不是你想要的。[Ext.util.Sorter 文档](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.util.Sorter)顶部的示例显示了如何在商店中执行此操作，但您可以轻松地将其添加到模型的参数中。`sorters`

# bash - 使用 sed 忽略字符后带有空格或空格的行

> ID：16093827
> 
> 赞同：1
> 
> 时间：2013-04-18T21:58:38.973
> 
> 标签：bash, sed

我正在尝试使用 sed 提取在文本文件中进行的一些分配。我的文本文件看起来像......

```
color1=blue
color2=orange

name1.first=Ahmed
name2.first=Sam
name3.first=
name4.first=
name5.first=
name6.first= 
```

目前，我正在使用 sed 打印 name#.first 之后的所有字符串 ...

```
sed 's/name.*.first=//' file 
```

但是，当然，这也会打印所有没有分配的行......

```
Ahmed
Sam

# I'm just putting this comment here to illustrate the extra carriage returns above; please ignore it 
```

有什么方法可以让 sed 忽略仅具有空白或空白分配的行并将其存储到数组中？分配的名称#.first 的数量是未知的，通常每种类型的分配数量也是未知的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T00:25:51.150

这是对 sputnick 的回答略有不同：

```
sed -n '/^name[0-9]\.first=\(.\+\)/ s//\1/p' 
```

第一部分 ( `/^name[0-9]\.first=\(.\+\)/`) 选择要传递给`s///`命令的行。`s`命令中的空模式*重新使用*之前的正则表达式，替换部分 ( `\1`) 将整个匹配替换为正则表达式第一个括号部分的内容。使用`-n`和`p`标志来控制打印哪些行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:08:43.897

```
sed -n 's/^name[0-9]\.\w\+=\(\w\+\)/\1/p' file 
```

## 输出

```
Ahmed
Sam 
```

## 解释

*   `-n`开关抑制默认行为`sed`：打印所有行
*   `s///`是替代的骨架
*   `^`匹配一行的开头
*   `name`文字串
*   `[0-9]`一个数字
*   `\.\w\+`一个文字点（没有反斜杠表示任何字符）后跟一个单词字符 [a-zA-Z0-9_] 至少一个：`\+`
*   `( )`是捕获组，\1 是捕获组

# android - 请为android中的本地数据库推荐任何库

> ID：16093832
> 
> 赞同：1
> 
> 时间：2013-04-18T21:58:49.450
> 
> 标签：android, database

我正在寻找一个在 android 中处理本地数据库的库，例如 ios 中的 FMDB [https://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)
。

我从解析 json 获得的每个数据都存储在本地数据库中，并在使用新数据集单击按钮时刷新。

照顾所有繁重工作的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:40:10.597

您在上面提供的链接是关于 SQLite 的简单包装器。此类 API[内置](http://developer.android.com/training/basics/data-storage/databases.html)于 Android 中。

无论如何阅读您的评论我认为您正在寻找的是Android中的[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)实现。那里有几个库，但最著名的两个是：

*   [ORMLite](http://ormlite.com/)：它是一个 Java 库，但在 Android 上也运行得很好
*   [GreenDAO](https://github.com/greenrobot/greenDAO)：这是一个快速轻量级的 ORM 实现

我过去都使用过，每个都有其优点和缺点。我只能建议您仔细阅读两者的功能集并选择更适合您的功能。

# asp.net - 在 IIS7 中部署 MVC4 .. 500 内部错误

> ID：16093834
> 
> 赞同：0
> 
> 时间：2013-04-18T21:58:55.783
> 
> 标签：asp.net, iis, asp.net-mvc-4

我有 MVC4，它在我的本地 IISExpress 上运行良好。今天我的管理员创建了全新的开发服务器并在默认网站下创建了新的 Web 应用程序。我已将相同的代码发布到该 webapplication 文件夹中。当我打字时`http://dev.company.com/iapps/vol`它爆炸了`500 - Internal server error`

![在此处输入图像描述](https://i.stack.imgur.com/S1liy.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T03:27:17.283

尝试注册 ASP.NET。

在 Windows 资源管理器中，浏览到：C:\Windows\System32

找到cmd.exe，右击“以管理员身份运行”

然后运行：C:\Windows\Microsoft.NET\Framework64\v4.0.30319>aspnet_regiis -i

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:03:50.117

大约有一百万件事情可能是错误的（缺少 DLL、文件权限、数据库访问等）
开始调试问题的最简单方法是从开发服务器内部访问站点。这样 IIS 将向浏览器抛出错误，因为它是本地的。

# linux - 如何在 Linux (Lucid) 上判断连接是否进入服务器？

> ID：16093835
> 
> 赞同：1
> 
> 时间：2013-04-18T21:59:02.377
> 
> 标签：linux, mongodb, linode

所以我有一个问题，我远程连接到我的 linode 盒子上的 Mongodb，我不再能够访问这个数据库。我可以从我的本地机器上，但是当我在这个远程服务器（网站运行的地方）上时它不起作用。我没有看到连接进入 Mongo 日志，所以这让我相信它可能被防火墙拦截了？

如何查看流量并查看此连接是否至少连接到我的 linode 盒子？我正在与 Mongoid 联系，所以如果有办法证明那里也没有联系。

现在我得到的唯一错误是 erb 视图超时执行错误 - 没什么可继续的。

谢谢，丹尼尔

# fb.ui - FB.ui 方法“permissions.request”已弃用？回复对我来说总是错误的

> ID：16093837
> 
> 赞同：2
> 
> 时间：2013-04-18T21:59:25.697
> 
> 标签：fb.ui

这是我的代码：

```
 FB.ui({method: "permissions.request", "perms": 'publish_stream', 'display': 'popup'}, function (response) {
      console.log(response)
      console.log(response.perms)
    }, {scope: 'publish_stream'}); 
```

结果总是'假'，有人知道原因吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T14:00:25.093

该`permissions.request`对话框不再（不再？）在规范中`FB.ui`： [https ://developers.facebook.com/docs/reference/javascript/FB.ui/](https://developers.facebook.com/docs/reference/javascript/FB.ui/)

似乎确保用户已登录*并*具有操作所需权限的唯一方法是使用`FB.login()`具有适当权限范围的组合，然后`FB.api('/me/permissions')`查询 Graph：

```
FB.login(function(response) {
  if (response.status === 'connected') {
    FB.api('/me/permissions', function(response) {
      if (response.data && response.data[0] && response.data[0].publish_actions) {
        console.log("You got'em!");
      }
    });
  }
}, { scope: 'publish_actions' }); 
```

# unix - UNIX 要求用户输入“y”或“n”

> ID：16093839
> 
> 赞同：0
> 
> 时间：2013-04-18T21:59:32.033
> 
> 标签：unix, syntax, input

我想要做的是给用户一个选项，通过键入“y”或“n”来删除文件

但是我不断收到错误消息：

> 第 38 行：意外标记 `)' 附近的语法错误
> 第 38 行：v) $verbose = true ;

（我有一个名为 verbose 的变量，它等于 false ）

我的代码如下：

```
while getopts :iv opt
do
     case $opt in
          i) read -p "remove ? " opt
            case $opt in
              y|Y)
              $interactive = true
                echo "YOU HAVE DELETED THIS FILE"
              sendToBin ;;
              n|N)
                echo "YOU HAVE CHOSEN NOT TO DELETE THIS FILE"
                exit ;;
             esac
           v)   $verbose = true
                echo "YOU HAVE CHOSEN VERBOSE" ;;
           \?)echo "WHAT ARE YOU CRAZY"
                exit  ;;
      esac
 done
shift $(($OPTIND - 1)) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T22:01:57.740

设置变量是这样完成的：

```
var=1 
```

不是这样的：

```
$var = 1 
```

# c# - .NET 4.5 中未观察到的任务异常仍然使应用程序崩溃

> ID：16093846
> 
> 赞同：14
> 
> 时间：2013-04-18T22:00:11.850
> 
> 标签：c#, .net

在[Steven Toub 的文章中](http://blogs.msdn.com/b/pfxteam/archive/2011/09/28/10217876.aspx)：

> 为了使开发人员更容易编写基于任务的异步代码，.NET 4.5 更改了未观察到的异常的默认异常行为。虽然未观察到的异常仍会导致引发 UnobservedTaskException 事件（不这样做将是一项重大更改），但默认情况下进程不会崩溃。相反，无论事件处理程序是否观察到异常，异常最终都会在事件引发后被吃掉。

但我的实验结果与上述说法不符。下面是我的代码：

```
static void Main(string[] args)
{
    DownloadAsync("http://an.invalid.url.com);
}

async static void DownloadAsync(string url)
{
    using (var client = new System.Net.Http.HttpClient())
    {
        string text = await client.GetStringAsync(url);
        Console.WriteLine("Downloaded {0} chars", text.Length);
    }
} 
```

由于我将无效的 url 传递给方法，因此对的`DownloadAsync()`方法的调用将引发异常，并导致应用程序崩溃。`HttpClient``GetStringAsync()`

所以我的问题是：默认情况下，.NET 4.5 中未观察到的异常是否仍然会使应用程序崩溃？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-18T23:46:51.820

您确实有`Task`一个例外（由 返回的那个`GetStringAsync`）。但是，`await`正在观察`Task`异常，然后将其传播到`DownloadAsync`方法之外（即`async void`）。

从方法中传播出来的异常`async void`表现不同；它们在方法启动`SynchronizationContext`时处于活动状态`async void`（在本例中为线程池`SynchronizationContext`）引发。这*不*被视为未观察到的异常。

如果您更改`DownloadAsync`为 return `Task`，那么您将有一个实际的未观察到的`Task`异常，它将被忽略（正确地）：

```
static void Main(string[] args)
{
  DownloadAsync("http://an.invalid.url.com);
  Console.ReadKey();
}

async static Task DownloadAsync(string url)
{
  using (var client = new System.Net.Http.HttpClient())
  {
    string text = await client.GetStringAsync(url);
    Console.WriteLine("Downloaded {0} chars", text.Length);
  }
} 
```

# python - Python 中内置的 sorted() 函数

> ID：16093848
> 
> 赞同：0
> 
> 时间：2013-04-18T22:00:18.190
> 
> 标签：python, function, sorting, arguments

我在一本书中看到如何将特定的排序函数传递给 Python 自己的内置 sorted() 函数，如下所示：

```
def mysort(a, b):
    if a[3] < b[3]:
        return -1
    elif a[3] > b[3]:
        return 1
    else:
        return 0

data = [
('Alpha Centauri A', 4.3, 0.26, 1.56),
('Alpha Centauri B', 4.3, 0.077, 0.45),
('Alpha Centauri C', 4.2, 0.00001, 0.00006),
("Barnard's Star", 6.0, 0.00004, 0.0005),
('Wolf 359', 7.7, 0.000001, 0.00002),
('BD +36 degrees 2147', 8.2, 0.0003, 0.006),
('Luyten 726-8 A', 8.4, 0.000003, 0.00006),
('Luyten 726-8 B', 8.4, 0.000002, 0.00004),
('Sirius A', 8.6, 1.00, 23.6),
('Sirius B', 8.6, 0.001, 0.003),
('Ross 154', 9.4, 0.00002, 0.0005),
]

sorted_data = sorted(data, mysort) 
```

上面的代码根据 4 元素元组的第 4 个元素对数据进行排序。在这里，我试图弄清楚 sorted() 函数如何将`a`和`b`参数提供给`mysort`函数。我的意图是将另一个参数传递给`mysort`函数，类似于：

```
def mysort(a, b, i):
    if a[i] < b[i]:
        return -1
    elif a[i] > b[i]:
        return 1
    else:
        return 0 
```

它将告诉函数排序应该基于哪个元素。我很困惑，因为在行

```
sorted_data = sorted(data, mysort) 
```

我们不向`mysort`函数传递任何参数。该`sorted()`函数似乎在发挥自己的魔力，并为函数提供`a`和`b`参数`mysort`。总而言之，我想知道是否有办法为`mysort`函数添加第三个参数以用于不同的排序类型？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T22:04:19.353

您真的想改用该`key`参数；在第 4 列排序[`operator.itemgetter()`](http://docs.python.org/2/library/operator.html#operator.itemgetter)：

```
from operator import itemgetter

sorted(data, key=itemgetter(3)) 
```

或者你可以使用`lambda`：

```
sorted(data, key=lambda elem: elem[3]) 
```

或者你可以使用[`functools.partial()`](http://docs.python.org/2/library/functools.html#functools.partial)：

```
from functools import partial

def mykeyfunc(column, item):
    return item[column]

sorted(data, key=partial(mykeyfunc, 3)) 
```

所有 3 个选项都创建了一个*新*的可调用对象，该可调用对象在`data`.

`cmp`参数 to`sorted()`已在 Python 3 中删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T22:05:35.623

您通常不使用`cmp`（第二个参数）进行排序。该`key`论点在 99% 的情况下都是最佳选择：

```
def mysort(item):
    return item[3]

sorted_data = sorted(data, key=mysort) 
```

或更简洁地说：

```
sorted_data = sorted(data, key=lambda item: item[3]) 
```

要使您的第二个功能正常工作，您需要使用您的功能创建一个功能：

```
def mysort(i):
    def sort_func(a, b)
        if a[i] < b[i]:
            return -1
        elif a[i] > b[i]:
            return 1
        else:
            return 0

    return sort_func 
```

并像这样使用它：

```
sorted(data, mysort(3)) 
```

但更好的方法是使用内置的东西：

```
from operator imoprt itemgetter

sorted_data = sorted(data, key=itemgetter(3)) 
```

# jquery - Fancybox-2 : Stops working when updating original element dynamically

> ID：16093849
> 
> 赞同：2
> 
> 时间：2013-04-18T22:00:22.020
> 
> 标签：jquery, fancybox-2

So, here's the scenario: I'm trying to make a gallery of sorts where there is a 'main' image that has Fancybox enabled ( with a class of `.fancybox` ) and below this main image is a few thumbnails which, when clicked, update the `href` and `src` of the main `<a>` and `<img>` elements, respectively.

Now, when the page loads, if you click the main image, the Fancybox fires with no issue as expected. However, when I click one of the thumbnails below, the main image and link update with the thumbnails content -- if I click the main image now, it just goes to the specified URL; no Fancybox.

Even if I were to re-call the `$('.fancybox').fancybox();` after the swap has taken place; nothing still.

At any rate, here's the code and jsFiddle:

* * *

**Fiddle**

[http://jsfiddle.net/sbeliv01/jRsjK/4481/](http://jsfiddle.net/sbeliv01/jRsjK/4481/)

* * *

**HTML**

```
<!-- The "Main" Photo -->
<a rel="gallery" class="fancybox" href="http://fancyapps.com/fancybox/demo/1_b.jpg">
    <img src="http://fancyapps.com/fancybox/demo/1_s.jpg" alt=""/>
</a>

<!-- The thumbnails that update the main photo -->
<ul>
    <li>
        <a class="update" href="http://placekitten.com/600/300" title="This is the test title.">
            <img src="http://placekitten.com/150/150" width="45" width="45" title="This is the test title." />
        </a>
    </li>
    <li>
        <a class="update" href="http://placekitten.com/600/300" title="This is the test title.">
            <img src="http://placekitten.com/150/149" width="45" width="45" title="This is the test title." />
        </a>
    </li>
    <li>
        <a class="update" href="http://placekitten.com/600/300" title="This is the test title.">
            <img src="http://placekitten.com/g/150/150" width="45" width="45" title="This is the test." />
        </a>
    </li>
</ul> 
```

* * *

**JS**

```
$(".fancybox").fancybox({
    live: true
});

$('.update').on('click', function(e) {

    e.preventDefault();

    var main      = $('.fancybox'),
        href      = $(this).prop('href'),
        title     = $(this).prop('title'),
        img_src   = $(this).find('img').prop('src'),
        img_title = $(this).find('img').prop('title');

    main
        .prop('title', title)
        .prop('href', href)
        .find('img')
        .prop('src', img_src)
        .prop('title', img_title);

    $(".fancybox").fancybox();

}); 
```

* * *

I'm probably too focused to pick up anything obvious so thanks for any help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T01:30:12.750

fancybox 第一次工作的原因是，第一个链接的 URL 以*图像*为目标，例如：

```
http://fancyapps.com/fancybox/demo/1_b.jpg 
```

...而其他人到一个*位置*，例如：

```
http://placekitten.com/600/300 
```

...没有任何*图像*扩展名。在第二个 URL 中，fancybox 不知道`type`要处理什么内容，这就是链接在新窗口/选项卡中打开的原因。

你必须强迫`type`内容*`image`*喜欢

```
$(".fancybox").fancybox({
    type : "image"
}); 
```

你实际上不需要`re-call the $('.fancybox').fancybox(); after the swap has taken place`

见**[jsfiddle](http://jsfiddle.net/qsgfm/)**

# php - 通过按钮单击将预定义文本添加到文本文件

> ID：16093858
> 
> 赞同：0
> 
> 时间：2013-04-18T22:01:00.480
> 
> 标签：php, database, append, text-files

我有一个愚蠢的简单问题——太简单了，我找不到答案：）

我对 PHP 完全陌生（基本上从今天开始），我想做以下事情：

每当有人单击网页上的按钮时，就会将一个字符（字母“a”）添加/附加到文本文件或数据库中的表中。同时，我希望这个文本文件/数据库的（更新的）内容显示在同一页面上。

理想情况下，我还想存储单击按钮的人的位置、时间和日期。

有什么帮助吗？我会很亲切的。

编辑：这是我发现的一些用于增加计数器的代码，存储在文本文件中，但这似乎比我想做的更复杂：

```
<?php
$f = fopen('counter.txt', 'r+'); // use 'r+' instead
flock($f, LOCK_EX); // avoid race conditions with concurrent requests
$total = (int) fread($f, max(1, filesize('counter.txt'))); // arg can't be 0
/*if someone has clicked submit*/
if (isset($_POST['submit'])) {
   rewind($f); // move pointer to start of file so we overwrite instead of append
   fwrite($f, ++$total);
}
fclose($f);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:14:35.670

对于这个简单的任务，您应该考虑使用[file_put_contents 。](http://php.net/manual/en/function.file-put-contents.php)

```
file_put_contents('counter.txt', 'a', FILE_APPEND | LOCK_EX); 
```

但是，如果您想存储有关访问者的信息，数据库是您的好朋友。从一些[教程](https://www.google.com/search?q=mysql%20tutorial)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:29:55.103

您必须从服务器和客户端进程的角度考虑 PHP 和 HTML 的使用。

```
 HTML                       PHP
        |                          |
     web page                      |
        |                          |
user    |                          |
clicks  |--- request to server --->|
        |                          |file or DB update
        |<--- returns OK - data ---|
        |                          |
        |                          | 
```

要向 PHP 服务器发送请求，您将使用一个经常提交的表单，然后重新加载页面；或者，依靠 AJAX 控制何时向服务器发送数据并处理更新，而无需重新加载整个页面。

# bigcommerce - Creating a Bigcommerce Shipment

> ID：16093861
> 
> 赞同：1
> 
> 时间：2013-04-18T22:01:18.520
> 
> 标签：bigcommerce

Using the Bigcommerce PHP library I want to create a new shipment for a specific order.

```
use Bigcommerce\Api\Resources as Resources;
$shipment = new Resources\Shipment();
$shipment->order_id = 100;
$shipment->order_address_id = 3;
$shipment->items = ['order_product_id' => 4, 'quantity' => 1];
$shipment->create(); 
```

It is returning: Uncaught Client Error (400): The required field 'order_product_id' was not supplied.

The Bigcommerce console says to pass items like this: [{"order_product_id":3,"quantity":1}]

I have tried passing JSON objects and stdClass objects to the items field, but none of them are working for me. Is there a more efficient way to create a shipment?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:12:25.020

问题是：

```
$shipment->items = ['order_product_id' => 4, 'quantity' => 1]; 
```

需要为对象格式：

```
$shipment->items = [['order_product_id' => 4, 'quantity' => 1]]; 
```

# ios - 使用 MPMoviePlayerController 流式传输音频

> ID：16093869
> 
> 赞同：0
> 
> 时间：2013-04-18T22:01:58.217
> 
> 标签：ios, audio, stream

我正在尝试从该站点播放音频流：[http ://www.radioteofilotoni.com.br/](http://www.radioteofilotoni.com.br/)

我有：

```
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://stream.jshost.com.br:1935/mobile/8056.stream/playlist.m3u8"]];
player.movieSourceType = MPMovieSourceTypeStreaming;
player.view.hidden = YES;
[self.view addSubview:player.view];
[player play]; 
```

什么都玩不了，怎么回事？我可以从 Safari 访问这个 m3u8 链接并播放。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:33:23.093

该 URL 不返回音频流 - 它返回如下所示的文本文件：

```
#EXTM3U
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=52855
http://stream.jshost.com.br:1935/mobile/8056.stream/playlist.m3u8?wowzasessionid=1884064341 
```

加载*该*URL 会提供更多非音频内容，您可以使用这些内容最终获取音频流 URL。看起来 Mobile Safari 会解析文本文件以获取流 URL。你也必须这样做，因为显然`MPMoviePlayerController`没有这样做。

# highcharts - Attach arbitrary data to Highcharts data points

> ID：16093870
> 
> 赞同：0
> 
> 时间：2013-04-18T22:01:59.263
> 
> 标签：highcharts

Is it possible to attach additional data to a data point, and later access that data directly from an event handler?

```
series: [{
    data: [
        { x: ..., y: ..., customProperty:... }
    ]
}] 
```

[http://jsfiddle.net/JGCmt/1/](http://jsfiddle.net/JGCmt/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:03:09.923

是的，可以从事件处理程序访问日期。

```
event.point.options.customProperty 
```

**[演示](http://jsfiddle.net/maheshsapkal/JGCmt/2/)**

# algorithm - Hadoop performance analysis (Wordcount vs Grep)

> ID：16093871
> 
> 赞同：0
> 
> 时间：2013-04-18T22:02:03.527
> 
> 标签：algorithm, hadoop, grep, word-count

I am working on Hadoop performance analysis and I am running some benchmarks on Hadoop. What's surprising is that Grep takes almost 1/10 of the time it takes wordcount to run which is very non-intuitive. Can anyone explain why is this true?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:58:59.357

map-reduce 习惯用法中的很多工作是映射器和化简器之间的通信。

在 WordCount 示例中，*每个单词都会*产生一个输出记录（和一个 reducer 输入）。在 Grep 示例中，每个匹配的模式都会产生一条输出记录。如果模式不经常匹配，那么记录就不是很多。

我希望映射器在大致相同的时间内运行，因为两者都将受 I/O 限制，直到它们产生输出为止。两个任务之间的 CPU 差异可以忽略不计。但是，输出量之间的巨大差异将非常明显。

# ios - TCP 服务器 - 范围请求未得到持续（HLS 环回服务器）

> ID：16093872
> 
> 赞同：2
> 
> 时间：2013-04-18T22:02:07.930
> 
> 标签：ios, c, sockets, http-live-streaming, tcpserver

我了解任何 HLS（HTTP Live Streaming）服务器都需要字节范围支持。

我们通过 localhost/loopback 服务器在我们的 iOS 应用程序中提供媒体文件，使用 C 中的套接字、fgets 读取数据和 fprintf 写回。

（使用环回服务器的要求是不可变的）

我们使用 MPMoviePlayerController 进行播放，它首先正确发送和接受范围请求/响应。例如，第一组请求/响应是：

`**Request 1**
GET /internal_path/index.m3u8 HTTP/1.1
Host: 127.0.0.1:9019
Range: bytes=0-1
X-Playback-Session-Id: 454D2A01-2113-457A-AA6B-9AC841B37D2E
Accept-Encoding: identity
Accept: */*
Accept-Language: en-us
Connection: keep-alive
User-Agent: AppleCoreMedia/1.0.0.10A403 (iPhone Simulator; U; CPU OS 6_0 like Mac OS X; en_us)

**Response 1**
HTTP/1.1 206 Partial Content
Accept-Ranges: bytes
Content-Range: bytes 0-1/338
Content-Type: application/x-mpegURL
Content-Length: 2
Connection: keep-alive

**Request 2**
GET /internal_path/index.m3u8 HTTP/1.1
Host: 127.0.0.1:9019
Range: bytes=0-337
X-Playback-Session-Id: 454D2A01-2113-457A-AA6B-9AC841B37D2E
Accept-Encoding: identity
Accept: */*
Accept-Language: en-us
Connection: keep-alive
User-Agent: AppleCoreMedia/1.0.0.10A403 (iPhone Simulator; U; CPU OS 6_0 like Mac OS X; en_us)`

`**Response 2**
HTTP/1.1 206 Partial Content
Accept-Ranges: bytes
Content-Range: bytes 0-337/338
Content-Type: application/x-mpegURL
Content-Length: 338
Connection: keep-alive`

然而，尽管服务器向请求发送了正确的 Range 响应，但对 index.m3u8 和 TS 文件的后续请求会忽略 Range 标头。

响应中发送的标头中是否缺少某些数据，这可能导致玩家相信 localhost 服务器不支持 Range 请求？有什么完全错误的，我没有看到吗？

谢谢。

# jquery - jQuery 从锚标签中删除多余的链接文本 - 我做错了什么？

> ID：16093873
> 
> 赞同：0
> 
> 时间：2013-04-18T22:02:16.000
> 
> 标签：jquery, regex

我已经放弃了 - 为什么这不起作用？我正在尝试处理我的消息链接，它有效，但并非一直有效。[这是**jsFiddle**](http://jsfiddle.net/YYcFZ/)，我认为问题的核心在下面的**编辑 2**中。

它贯穿该函数并执行除过滤器循环之外的所有操作...。如果您查看控制台，您会看到它 remove 对每个`<a></a>`标签的内部文本执行正则表达式，但由于某种原因它不会保留一路改变！我究竟做错了什么？

JavaScript（使用 jQuery）：

```
function processTweetLinks(messagetext) {
    console.log(messagetext);
    messagetext = messagetext.replace();
    var replacePattern1, replacePattern2;
    //URLs starting with http://, https://, or ftp://
    replacePattern1 = /(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;
    messagetext = messagetext.replace(replacePattern1, '<a class="individualMessageBioWhateverLink" href="$1" target="_blank">$1</a>');
    console.log('replacePattern1: ' + messagetext);

    //URLs starting with "www." (without // before it, or it'd re-link the ones done above).
    replacePattern2 = /(^|[^\/])(www\.[\S]+(\b|$))/gim;
    messagetext = messagetext.replace(replacePattern2, '$1<a class="individualMessageBioWhateverLink" href="http://$2" target="_blank">$2</a>');
    console.log('replacePatter2: ' + messagetext);
    // Ignore this block of code, it's just for future visitors that want to link #hashtags and @usernames - it works perfectly!
    /*
         exp = /(^|\s)#(\w+)/g;
       text = text.replace(exp, "$1<a class='individualMessageBioWhateverHash' href='http://search.twitter.com/search?q=%23$2' target='_blank'>#$2</a>");
       console.log(text);

        exp = /(^|\s)@(\w+)/g;
        text = text.replace(exp, "$1<a class='individualMessageBioWhateverMention' href='http://www.twitter.com/$2' target='_blank'>@$2</a>");

        */
    console.log('before the a filter loop: ' + messagetext);
    $(messagetext).filter('a').each(function (e) {
        console.log(this.text);
        var finalexp = /(([a-zA-Z]{3,5}\:\/\/)|(www\.))/gim;
        var something = $(this).text().replace(finalexp, "");
        $(this).text(something);
        console.log(this.text);
        console.log(something);

        /*console.log('after each: ' + this);

         //cleans up stuff like http://www. and https://www. and ftp://www. (obviously not a value URI... - may want to stick to just https?:\/\/ for that reason)
         // /(([a-zA-Z]{3,5}\:\/\/)(www\.))/gim;

         //Cleans up all instances of www. 
         // /(www\.)/gim;
        });
        */
        //console.log(text);
    });
    $("#correctedmessagetext").html(messagetext);
    return messagetext;   
}

var individualMessage = "http://google.com is great, but http://www.stackoverflow.com may be my only hope. www.yahoo.com is out of the question.";
processTweetLinks(individualMessage); 
```

HTML：

```
<div id="correctedmessagetext"></div> 
```

**编辑：**我实际上并没有将其输出到 div - 另一个函数的一部分生成一个字符串，并且在该字符串内部是对该函数的调用，本质上是`processTweetLinks(individualMessage)`.

**编辑 2：**这是代码的简短版本 - 问题一定出在此处：

```
$(messagetext).filter('a').each(function(e) {
        var finalexp = /(([a-zA-Z]{3,5}\:\/\/)|(www\.))/gim;
        var something = $(this).text().replace(finalexp, "");    
        $(this).text(something);
    });
    return messagetext; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:17:58.103

看起来您从未在页面上编辑它们。据我所知，您可以分解消息文本字符串（将其放入不同的变量中，然后在更新后将其拼凑在一起），或者您可以将其输出到页面，然后对更正的消息文本进行过滤。所以留下这个：

```
$("#correctedmessagetext").html(messagetext); 
```

然后将您的过滤器方法更改为适用于更正消息文本 id 的另一种方法，如下所示：

```
function doFilter() {
     $("#correctedmessagetext").filter('a').each(function (e) {
        console.log(this.text);
        var finalexp = /(([a-zA-Z]{3,5}\:\/\/)|(www\.))/gim;
        var something = $(this).text().replace(finalexp, "");
        $(this).text(something);
        console.log(this.text);
        console.log(something);

        /*console.log('after each: ' + this);

         //cleans up stuff like http://www. and https://www. and ftp://www. (obviously not a value URI... - may want to stick to just https?:\/\/ for that reason)
         // /(([a-zA-Z]{3,5}\:\/\/)(www\.))/gim;

         //Cleans up all instances of www. 
         // /(www\.)/gim;
        });
        */
        //console.log(text);
    });
} 
```

将消息文本输出到页面（上面的单行）后，然后调用您的新方法。

**编辑**

回顾一下，您已经从之前所做的事情中得到了答案 - 正则表达式替换。我刚刚检查了一下并想出了这个方法：

```
function messageFilter(messagetext) {
    var replacePattern = /(>)(([a-zA-Z]{3,5}\:\/\/)|(www\.))(www.)?(\w+\.\w+)(<)/g;

    messagetext = messagetext.replace(replacePattern, '$1$6$7');

    console.log(messagetext);
    return messagetext;
} 
```

你可以在我的[JS Fiddle上看到它](http://jsfiddle.net/ggRSR/)

这样您就不必再执行 $(item).filter('a').each(function(e) 了，您只需调用该方法来修复您的字符串。

# jquery - 如何使用 JQuery 读取值并调用 Webservice

> ID：16093874
> 
> 赞同：0
> 
> 时间：2013-04-18T22:02:26.167
> 
> 标签：jquery, json, web-services

我有一种情况，我需要获取记录总数才能计算页数。

至于现在我将“总记录”存储在 asp:label 控件中。

所以，我想如何在没有 asp:label 控件的情况下读取/获取“总记录”的值。

**这是我的代码**

```
$(document).ready(function () {

    //
    GetTotalRecord();

});

function GetTotalRecord() 
{

    $.ajax(
    {
        type: "POST",
        url: "../ws/service.asmx/TotalRecord",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: CalculateTotalRecord,
        error: OnErrorCall
    });

}

function CalculateTotalRecord(xml) 
{
    $('#<%=lblOutput.ClientID%>').html(xml.d);

    //alert($('#<%=lblOutput.ClientID%>').text() );

    v_page_max = Math.ceil ($('#<%=lblOutput.ClientID%>').text() / v_page_size) ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:38:27.027

1.  确保您的 URL 对于该服务是正确的
2.  验证您的服务是否返回 JSON
3.  了解您的 JSON 对象并阅读正确的属性

    ```
    function GetTotalRecord() 
        {
            $.ajax(
            {
                type: "GET", // should be a get 
                url: "../ws/service.asmx/TotalRecord", // Confirm if this URL is right?
                //data: "{}", // not required if you dont have parameters
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data){
                    // if in case your service is returning JSON as string 
                    // then you will have to parse the string to JSON
                    // var result = JSON.Parse(data);
                    //Now read from result
                    //alert(data.d);
                    $('label').html(data.d);
                },
                error: OnErrorCall
            });
        } 
    ```

# java - Share variables between JAX-RS requests

> ID：16093875
> 
> 赞同：6
> 
> 时间：2013-04-18T22:02:27.623
> 
> 标签：java, jax-rs, apache-wink

I have what I think is a very basic question about JAX-RS but I somehow can't easily find the answer.

I am trying to refactor a REST service which uses a "standard" Javax servlet -- routing requests to methods by hand -- into an "cleaner" JAX-RS implementation. The current application sets some variables during the servlet init(). It assigns those as attributes of the HttpServlet class so they are available during each doGet() and can be passed as parameters to request processing methods. For clarity, one of these is a ConcurentHashMap that acts as a cache.

Now, with JAX-RS, I can extend Application to set my resource classes. I can also use the @Context annotation in each resource implementation to inject things like ServletContext when processing a request. But I do not know how to similarly inject variables set during application initialization.

I am using the Apache Wink 1.3.0 implementation of JAX-RS.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T17:26:04.660

您可以使用[侦听](http://www.mkyong.com/servlet/what-is-listener-servletcontextlistener-example/)器来初始化缓存，并在 Web 应用程序启动之前将其设置为上下文作为属性。类似于以下内容：

```
package org.paulvargas.shared;

import java.util.HashMap;
import java.util.Map;

import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class CacheListener implements ServletContextListener {

    public void contextInitialized(ServletContextEvent sce) {
        Map<String, String> dummyCache = new HashMap<String, String>();
        dummyCache.put("greeting", "Hello Word!");

        ServletContext context = sce.getServletContext();
        context.setAttribute("dummyCache", dummyCache);
    }

    public void contextDestroyed(ServletContextEvent sce) {
        ServletContext context = sce.getServletContext();
        context.removeAttribute("dummyCache");
    }

} 
```

此侦听器在`web.xml`.

```
<listener>
    <listener-class>org.paulvargas.shared.CacheListener</listener-class>
</listener>
<servlet>
    <servlet-name>restSdkService</servlet-name>
    <servlet-class>
        org.apache.wink.server.internal.servlet.RestServlet
    </servlet-class>
    <init-param>
        <param-name>applicationConfigLocation</param-name>
        <param-value>/WEB-INF/application</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>restSdkService</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

您可以使用`@Context`注解来注入`ServletContext`和检索属性。

```
package org.apache.wink.example.helloworld;

import java.util.*;

import javax.servlet.ServletContext;
import javax.ws.rs.*;
import javax.ws.rs.core.*;

import org.apache.wink.common.model.synd.*;

@Path("/world")
public class HelloWorld {

    @Context
    private ServletContext context;

    public static final String ID = "helloworld:1";

    @GET
    @Produces(MediaType.APPLICATION_ATOM_XML)
    public SyndEntry getGreeting() {

        Map<String, String> dummyCache = 
                       (Map<String, String>) context.getAttribute("dummyCache");

        String text = dummyCache.get("greeting");

        SyndEntry synd = new SyndEntry(new SyndText(text), ID, new Date());
        return synd;
    }

} 
```

# c++ - 用微不足道的方法得到未知的结果

> ID：16093876
> 
> 赞同：1
> 
> 时间：2013-04-18T22:02:28.530
> 
> 标签：c++, z3

我正在使用 z3 C++ API。如果我创建这个简单的错误表达式：

```
z3::expr x = C->int_const("x");
z3::expr p = z3::forall(x, x==0); 
```

并尝试解决，我得到一个未知的结果。我不是战略和战术方面的专家，但如果我使用正确的战术，我相信 z3 可以解决这个问题。

我也试过

```
z3::expr p = !z3::forall(x, x==0); 
```

当然，同样的结果也是众所周知的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:12:35.083

我不熟悉 z3，但从一般 C++ 的角度来看，不会`x==0`先评估，*即*你的调用不等于`implies(x, 1)`? 从快速搜索看来，您可能必须将语句的每个部分构造为 z3 对象，例如：

```
Z3_ast consequent = Z3_mk_eq(ctx, x, 0);
Z3_ast theorem = Z3_mk_implies(ctx, x, consequent); 
```

但上面的说法也不对。我相信参数`x`和`0`它们本身必须是`Z3_ast`封装您所指的语句的实例（而不是它们的插值或引用）。

# r - 求一个变量与固定变量相比的平均值

> ID：16093877
> 
> 赞同：-2
> 
> 时间：2013-04-18T22:02:32.627
> 
> 标签：r, average

所以我有一个来自调查的人口统计数据的简短表格。年龄、收入、种族等。我的硬件问题如下：

我希望您根据您的塔尔萨数据确定年龄和收入是否显着相关。如果是这样，一个 50 岁的人的预期收入是多少？

我有第一部分，只需要知道如何根据我的数据找到一个 50 岁的人的平均收入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:36:53.357

第一步：测量相关性，使用`cor(x, y)`

第二步：使用线性回归（假设最简单的场景）`lm(y ~ x)`。

结果包含截距和斜率，用于计算函数 的值`y = f(x)`，对于 的任何值`x`，例如问题中的 50。

# vb.net - Windows 服务不会以本地用户身份启动

> ID：16093878
> 
> 赞同：0
> 
> 时间：2013-04-18T22:02:41.423
> 
> 标签：vb.net, windows-services

**编辑 2：**我现在认为这是我试图在其上运行服务的机器的问题。我尝试将服务移动到设置类似的另一台机器上，即使作为本地用户，该服务也能够成功启动。现在我只需要弄清楚两台机器之间有什么不同......

* * *

我有一个 Windows 服务项目（用 VB.net 编写），该项目已安装并配置为自动启动类型，并将登录身份设置为本地用户帐户。此服务将在计算机首次启动时启动。但是，如果我停止服务并尝试再次启动它，我会收到“错误 1053：服务没有及时响应启动或控制请求”。立即地。但是，如果我将登录身份更改为“本地系统帐户”，则该服务将启动。

概括：

*   计算机首次启动时服务将以本地用户身份运行
*   如果手动启动，服务将不会以本地用户身份运行
*   计算机首次启动时服务将作为本地系统运行
*   如果手动启动，服务将作为本地系统运行

我读过错误 1053 是由 OnStart 方法返回不够快引起的。该服务之前已启动，并且我立即收到错误消息这一事实使我相信超时不是正在发生的事情。为了验证这一点，我创建了一个全新的 Windows 服务项目，并且没有更改我构建和安装的任何内容。我得到同样的行为。

我不知道发生了什么。据我所知，本地用户拥有运行服务的所有正确权限（这可以从计算机首次启动时使用这些凭据启动这一事实明显看出），并且 OnStart 方法不是t 实际上超时（完全空白的哑服务表现出相同的行为就可以看出这一点）。

关于阻止服务启动的原因，或者我可以在哪里寻找更好的错误消息的任何想法（我查看了应用程序事件日志，但那里没有显示任何内容）？

**编辑：** 这是我创建的愚蠢服务的代码（使用[此处](http://www.codeproject.com/Articles/15291/Error-and-Event-Logging-in-VB-NET)的 EventLogger作为模块）。

```
Protected Overrides Sub OnStart(ByVal args() As String)
    ' Add code here to start your service. This method should set things
    ' in motion so your service can do its work.
    EventLogger.WriteToEventLog("On Start")
End Sub

Protected Overrides Sub OnStop()
    ' Add code here to perform any tear-down necessary to stop your service.
    EventLogger.WriteToEventLog("On Stop")
End Sub 
```

和同一个项目的Main方法。

```
' The main entry point for the process
<MTAThread()> _
<System.Diagnostics.DebuggerNonUserCode()> _
Shared Sub Main()
    EventLogger.WriteToEventLog("Starting Main Method")
    Dim ServicesToRun() As System.ServiceProcess.ServiceBase

    ServicesToRun = New System.ServiceProcess.ServiceBase() {New Service1}

    System.ServiceProcess.ServiceBase.Run(ServicesToRun)
    EventLogger.WriteToEventLog("Leaving Main Method")
End Sub 
```

当我尝试以本地用户身份运行服务时，事件日志中没有显示任何消息，并且出现错误 1053。当我以本地系统身份运行服务时，事件日志中显示消息。

我需要以本地用户身份运行实际服务的原因是它可以访问网络共享。我目前正在研究使用 Windows 用户模拟，但我仍然认为我应该能够以本地用户的身份启动一个简单的服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:29:21.080

使用[此资源](http://www.codeproject.com/Articles/15291/Error-and-Event-Logging-in-VB-NET)创建事件记录器。然后将您的代码包装在 try/catch b/c 中的每个子程序中，这很可能在您的 OnStart 子程序中发生了阻止服务启动的事情。发布您的 onstart、onstop 和/或您的服务主要子系统的一些示例代码，并阐明为什么您需要使用本地用户与本地系统。

# c++ - 将可变大小的数组传递给 DLL 有哪些选择？

> ID：16093880
> 
> 赞同：4
> 
> 时间：2013-04-18T22:02:57.247
> 
> 标签：c++, arrays, memory-management, boost, dll

我想知道如果我想将在运行时确定大小的数组传递给 DLL 函数，我有哪些选择。目前我在 DLL 中的函数签名看起来像

```
#ifdef BUILDING_DLL
#define DBUILDING __declspec(dllexport)
#else
#define DBUILDING __declspec(dllimport)
#endif

void __cdecl DBUILDING myFunc(const double t, const double x[], double *xdot); 
```

因此，我传递了在某个类中动态分配的普通旧数据类型，然后必须手动删除这些数据类型。我宁愿不必调用 delete 并担心内存管理，所以我想看看其他选项。显而易见的选择是向量，但我知道您不应该将 STL 容器传递给 dll，所以我需要其他东西。我需要一些可以处理内存管理但我也可以传递给 dll 的东西。

我目前的想法可能是使用 boost::scoped_array 及其 get() 函数以指针形式返回原始数据。这似乎是最好的主意还是我忽略了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T01:26:51.437

你是对的，跨 DLL 边界共享 C++ 对象，尤其是标准中定义的类是一个坏主意。只是其中一些原因是违反单一定义规则和混合不同的分配器。

但是，没有什么能阻止您通过`vector`DLL 边界传递 a 的内容：

```
vector<double> x;
// ... fill it in, change the size
myFunc(t, &x[0], x.size(), xdot); 
```

请注意，您几乎总是必须将大小作为额外参数传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T01:13:29.003

*[...] 我知道您不应该将 STL 容器传递给 DLL [...]* - 这是错误的假设。

## 先决条件

* * *

事实上，您可以跨 DLL 边界传递 STL 对象。此外，您可以以跨平台的方式进行。像往常一样，巧妙的预处理器操作来拯救。以下配置标头对于任何跨平台 DLL 都是必须的：

`Config.hpp`：

```
#ifndef MY_DLL_CONFIG_HPP
#define MY_DLL_CONFIG_HPP

#ifdef __cplusplus
  #define MY_DLL_CPP
#else
  #define MY_DLL_C
#endif

#if                       \
  defined (__CYGWIN__) || \
  defined (__CYGWIN32__)
  #define MY_DLL_OS
  #define MY_DLL_OS_UNIX
  #define MY_DLL_OS_WINDOWS
  #define MY_DLL_OS_CYGWIN
#elif                      \
  defined (_WIN16)      || \
  defined (_WIN32)      || \
  defined (_WIN64)      || \
  defined (__WIN32__)   || \
  defined (__TOS_WIN__) || \
  defined (__WINDOWS__)
  #define MY_DLL_OS
  #define MY_DLL_OS_WINDOWS
#elif                        \
  defined (macintosh)     || \
  defined (Macintosh)     || \
  defined (__TOS_MACOS__) || \
  (defined (__APPLE__) && defined (__MACH__))
  #define MY_DLL_OS
  #define MY_DLL_OS_UNIX
  #define MY_DLL_OS_MAC
#elif                    \
  defined (linux)     || \
  defined (__linux)   || \
  defined (__linux__) || \
  defined (__TOS_LINUX__)
  #define MY_DLL_OS
  #define MY_DLL_OS_UNIX
  #define MY_DLL_OS_LINUX
#elif                      \
  defined (__FreeBSD__) || \
  defined (__OpenBSD__) || \
  defined (__NetBSD__)  || \
  defined (__bsdi__)    || \
  defined (__DragonFly__)
  #define MY_DLL_OS
  #define MY_DLL_OS_UNIX
  #define MY_DLL_OS_BSD
#elif              \
  defined (sun) || \
  defined (__sun)
  #define MY_DLL_OS
  #define MY_DLL_OS_UNIX
  #define MY_DLL_OS_SOLARIS
#elif               \
  defined (_AIX) || \
  defined (__TOS_AIX__)
  #define MY_DLL_OS
  #define MY_DLL_OS_UNIX
  #define MY_DLL_OS_AIX
#elif                \
  defined (hpux)  || \
  defined (_hpux) || \
  defined (__hpux)
  #define MY_DLL_OS
  #define MY_DLL_OS_UNIX
  #define MY_DLL_OS_HPUX
#elif \
  defined (__QNX__)
  #define MY_DLL_OS
  #define MY_DLL_OS_UNIX
  #define MY_DLL_OS_QNX
#elif                 \
  defined (unix)   || \
  defined (__unix) || \
  defined (__unix__)
  #define MY_DLL_OS
  #define MY_DLL_OS_UNIX
#endif

#ifndef MY_DLL_OS
  #error "Sorry, but current OS is not supported by MyDLL."
#endif

#if                        \
  defined (__MINGW32__) || \
  defined (__MINGW64__)
  #define MY_DLL_COMPILER
  #define MY_DLL_COMPILER_MINGW
#elif \
  defined (__GNUC__)
  #define MY_DLL_COMPILER
  #define MY_DLL_COMPILER_GNU
  #define MY_DLL_COMPILER_GNU_VERSION_MAJOR __GNUC__
  #define MY_DLL_COMPILER_GNU_VERSION_MINOR __GNUC_MINOR__
  #define MY_DLL_COMPILER_GNU_VERSION_PATCH __GNUC_PATCHLEVEL__
#elif \
  defined (__clang__)
  #define MY_DLL_COMPILER
  #define MY_DLL_COMPILER_CLANG
#elif \
  defined (_MSC_VER)
  #define MY_DLL_COMPILER
  #define MY_DLL_COMPILER_MICROSOFT
#elif \
  defined (__BORLANDC__)
  #define MY_DLL_COMPILER
  #define MY_DLL_COMPILER_BORLAND
#elif \
  defined (__CODEGEARC__)
  #define MY_DLL_COMPILER
  #define MY_DLL_COMPILER_CODEGEAR
#elif                           \
  defined (__INTEL_COMPILER) || \
  defined (__ICL)
  #define MY_DLL_COMPILER
  #define MY_DLL_COMPILER_INTEL
#elif                   \
  defined (__xlc__)  || \
  defined (__xlC__)  || \
  defined (__IBMC__) || \
  defined (__IBMCPP__)
  #define MY_DLL_COMPILER
  #define MY_DLL_COMPILER_IBM
#elif \
  defined (__HP_aCC)
  #define MY_DLL_COMPILER
  #define MY_DLL_COMPILER_HP
#elif \
  defined (__WATCOMC__)
  #define MY_DLL_COMPILER
  #define MY_DLL_COMPILER_WATCOM
#endif

#ifndef MY_DLL_COMPILER
  #error "Sorry, but current compiler is not supported by MyDLL."
#endif

#if                              \
  defined (MY_DLL_OS_WINDOWS) && \
  !defined (BOOST_DISABLE_WIN32)
  #define MY_DLL_EXPORT_DECLARATION __declspec(dllexport)
  #define MY_DLL_IMPORT_DECLARATION __declspec(dllimport)
#elif \
  MY_DLL_COMPILER_GNU_VERSION_MAJOR >= 4
  #define MY_DLL_EXPORT_DECLARATION __attribute__((visibility("default")))
  #define MY_DLL_IMPORT_DECLARATION __attribute__((visibility("default")))
#else
  #define MY_DLL_EXPORT_DECLARATION 
  #define MY_DLL_IMPORT_DECLARATION 
#endif

#ifdef MY_DLL_EXPORT
  #define MY_DLL_API        MY_DLL_EXPORT_DECLARATION
  #define MY_DLL_FUNCTION
  #define MY_DLL_TYPE
#else
  #define MY_DLL_API        MY_DLL_IMPORT_DECLARATION

  #ifdef MY_DLL_CPP
    #define MY_DLL_FUNCTION extern "C"
  #else
    #define MY_DLL_FUNCTION extern
  #endif

  #define MY_DLL_TYPE       extern
#endif

#endif 
```

**注意：**在 OP 的问题中，有些平台检测可能被认为是矫枉过正。但是，它们在创建生产 DLL 方面非常重要，所以我不想剥离它们。

## 例子

* * *

`MyDLL.hpp`：

```
#include "Config.hpp"

#include <vector>

// Instantiate class std::vector<int>.
// NOTE: This does not create an object. It only enforces the generation
// of all of the members of class std::vector<int>. It exports them from
// the DLL and imports them into any artifact linked against this DLL.
MY_DLL_TYPE template class MY_DLL_API std::vector<int>;

// Instantiate class std::vector<float>.
// NOTE: This does not create an object. It only enforces the generation
// of all of the members of class std::vector<float>. It exports them from
// the DLL and imports them into any artifact linked against this DLL.
MY_DLL_TYPE template class MY_DLL_API std::vector<float>;

class MY_DLL_API MyClass {
public:
  static std::vector<char> floatVector;

  void
  setIntVector(std::vector<int> intVector);

  std::vector<int>&
  intVector();

  bool operator < (MyClass const& c) const
  { return _intVector < c._intVector; }

  bool operator == (MyClass const& c) const
  { return _intVector == c._intVector; }

private:
  std::vector<int> _intVector;
};

// Instantiate class std::vector<MyClass>.
// NOTE: This does not create an object. It only enforces the generation
// of all of the members of class std::vector<MyClass>. It exports them from
// the DLL and imports them into any artifact linked against this DLL.
MY_DLL_TYPE template class MY_DLL_API std::vector<MyClass>; 
```

`MyDLL.cpp`：

```
#include "MyDLL.hpp"

std::vector<float> MyClass::floatVector;

void
MyClass::
setIntVector(std::vector<int> intVector) 
{ _intVector = intVector; }

std::vector<int>&
MyClass::
intVector()
{ return _intVector; } 
```

**注意：****使用** `MY_DLL_EXPORT`定义构建。最佳实践是在编译期间提供此定义。例如，在 MSVC 上它将是`/DMY_DLL_EXPORT`，而在 GCC 上它将是`-DMY_DLL_EXPORT`.

`Application.cpp`：

```
#include "MyDLL.hpp"

#include <iostream>

using std::cout;
using std::endl;
using std::vector;

int main() {
  MyClass x;

  x.setIntVector({-3, -2, -1});

  for (int i = 0; i < 7; ++i)
    x.intVector().push_back(i);

  for (int i = 0; i < 10; ++i)
    x.floatVector.push_back(i);

  for (auto value : x.intVector())
    cout << value << endl;

  cout << endl;

  for (auto value : x.floatVector)
    cout << value << endl;

  cout << endl;

  vector<MyClass> v;
  for (int i = 0; i < 5; ++i)
    v.push_back(MyClass());
} 
```

**注意：**构建**没有** `MY_DLL_EXPORT`定义。

因此，您的 DLL 的使用者将使用从 DLL 导出的二进制代码，而不是实例化他们自己的。

## 免责声明

* * *

有一些你可能不知道的陷阱，所以我觉得我应该提到以上所有功能正常运行的重要限制。

1.  您必须确保使用**同一编译器的同一版本** 来构建您的 DLL 及其使用者。

2.  对您的 DLL 及其使用者而言，可能影响 STL 对象布局的构建设置应该完全相同。

3.  您的 DLL 及其使用者都应该链接到相同的编译器运行时。

4.  也请注意[这](http://support.microsoft.com/default.aspx?scid=kb;EN-US;Q172396)一点。

5.  MSVC 可能会生成警告：`C4231 "nonstandard extension used : 'extern' before template explicit instantiation.`，可以安全地忽略它。

6.  一些 STL 类使用其他 STL 类。这些其他类也必须导出。必须导出的类列在编译器警告中。

7.  一些 STL 类包含嵌套类。这些类无法导出。例如，`deque`包含一个嵌套类`deque::iterator`。如果您导出`deque`，您将收到必须导出的警告`deque::iterator`。如果您导出 `deque::iterator`，您会收到必须导出的警告`deque`。我可以保证两者`vector`都`string`可以导出。其他容器都包含嵌套类，无法导出。**我不确定这是否仍然相关，您必须进行实验。**

8.  当您导出使用用户定义类型 (UDT) 参数化的 STL 容器时，您必须为您的 UDT 定义运算符`<`和`==`。例如，如果您导出 `vector<MyClass>`，则必须定义`MyClass::operator <`和`MyClass operator ==`。这是因为所有 STL 容器类都有成员比较运算符，这些运算符需要运算符的存在`<`和`==`包含的类型。

**注意：**其中一些可能已经无关紧要，因此必须在实践中进行检查。

# java - Upsert data into Cassandra database using Astyanax client

> ID：16093881
> 
> 赞同：0
> 
> 时间：2013-04-18T22:02:59.253
> 
> 标签：java, cassandra, astyanax

**Problem Statement:-**

I am trying to insert data into Cassandra database. I am using `Netflix/Astyanax client` for this.

Below is the code which will `upsert` data into `Cassandra database` using `Astyanax client`.

In my below method, it accepts two parameter. One is the `userId` which I will be using as the `RowKey` and `attributes` map which will contain, `column name` as the key and it's `column value` as the value in the map.

Now how can I use `Astyanax client` to `upsert data` into Cassandra database using the below method which accepts those two parameters?

I am mainly concern about `attributes` Map. How should I use that map to `upsert` data into Cassandra database?

```
/**
 * Performs an upsert of the specified attributes for the specified id.
 */
public void upsertAttributes(final String userId, final Map<String, String> attributes) {

    MutationBatch m = CassandraAstyanaxConnection.getInstance().getKeyspace().prepareMutationBatch();

    m.withRow(CassandraAstyanaxConnection.getInstance().getEmp_cf(), userId)
    .putColumn(attributeName from attributesMap, attributeValue from attributesMap, null)
    ;

    try {
        m.execute();
    } catch (ConnectionException e) {
        StringBuilder message = new StringBuilder();
        message.append("Failed to read from C* = '").append(e).append("'. ");

        LOG.error("Failed to write data to C*", e);

        throw new RuntimeException("failed to write data to C*", e);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:18:06.550

您几乎已经给出了解决方案，但我认为您不清楚

```
 MutationBatch m = CassandraAstyanaxConnection.getInstance().getKeyspace().prepareMutationBatch();
 ColumnListMutation<String> clm = m.withRow(CassandraAstyanaxConnection.getInstance().getEmp_cf(), userId);
 for(String key: attributeMap.keySet()){
     clm.putColumn(key, attributeMap.get(key), null);
 }

try {
    m.execute();
} catch (ConnectionException e) {
    e.printStackTrace();
} 
```

基本上**putColumn**有不同的重载变体，因此它将支持 cassandra 支持的所有数据类型。

# nservicebus - How do I include the computer's domain name in the NServiceBus ReplyToAddress?

> ID：16093882
> 
> 赞同：0
> 
> 时间：2013-04-18T22:03:00.777
> 
> 标签：nservicebus

I'm using NServiceBus with MSMQ and I'm trying to send a message from a computer in one domain to another computer in a different domain. A trust exists between the two domains.

The two computers can ping each other, but only if they use the fully-qualified name of the computer, e.g. pc01.mydomain.net.

In the config file on the computer that sends the message, I've ensured my MessageEndpointMappings are correct by setting the Endpoint attribute to be "Endpoint@pc01.mydomain.net". If I try to send a message then it arrives OK at the pc01 endpoint.

However, when the pc01 endpoint tries to send the reply back to the sender (let's say that computer's name is sender01.anotherdomain.net) it fails to deliver the message. When I check Bus.CurrentMessageContext.ReplyToAddress it returns "queuename@sender01". I believe (although I can't prove it) that if the ReplyToAddress was "queuename@sender01.anotherdomain.net" then the reply would arrive in the correct queue as desired.

So I just need a way to ensure the ReplyToAddress has the fully-quailfied name of the computer (sender01.anotherdomain.net) rather than just the computer name (sender01).

Does anyone know how to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:17:28.787

在发送者上创建一个传出传输消息修改器，相应地更新 ReplyToAddress。

在 v4 中，您可以通过更改 RuntimeEnvironment.MachineNameAction 函数来覆盖我们解析机器名称的方式。

# css - p.classname or .classname p, any difference?

> ID：16093883
> 
> 赞同：8
> 
> 时间：2013-04-18T22:03:05.127
> 
> 标签：css, class, css-selectors

So, I am a bit confused over this simple thing, i've googled as much as i could, but i just dont know the right keywords for googling it, i tried CSS selectors, etc, no answer was enough to clear my confusion. So i've also tested and p.classname doesn't even seem to work, but by definition in a book i'm reading ( updated 2012 )

To create a class in CSS and select an element in that class, you write a class selector, like this:

```
p.classname{ stuff } 
```

So now you have a way of selecting

elements that belong to a certain class to style them.

I couldn't find a definition for

`classname p`, but myself would give something like this definition "select all p elements that belong to classname", which is basicly the same.

the `p.classname` works when i give the "classname" to a im still confused, at the moment i would suppose im just going to perma use the .classname p, which works and is basically the same.

So, please help me out to clear this confusion, i've googled, i tried to help this confusion but it didn't work, it only made more.

Thanks

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-18T22:05:43.817

所以当你这样做时

```
p.classname{
  ... 
} 
```

你正在寻找一个`<p>`与类`classname`

当你这样做时

```
.classname p 
```

您正在寻找一个`p` 是 classes 的后代`classname`。

在 CSS`.`中用作类名的选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T22:08:58.803

CSS 通过按顺序读取每个规则来工作，例如。

```
p {font-weight: bold;}

p span {font-weight:normal;}

<p>Hiya</p> // BOLD

<p><span>HIYA</span></p> // NORMAL 
```

上课也一样

```
.bold {font-weight: bold;}

span {font-weight:normal;}

<p class="bold">I AM BOLD <span>I AM NOT</span> BOLD AGAIN</p>

<p class="bold"><span> I AM ALL NORMAL</span></p> 
```

因此，在您的示例中，定义`class`first 将针对具有该类的每个元素。

通过在该类之后定义某些内容，`.class p`它将针对该类中的所有元素 p。

希望这有帮助

**更新**

让你更好地理解，

```
div {color: blue;}
div p {color: red;}
div p span {color: yellow;}
div ul {color: purple;}

<div>I AM BLUE <p>I AM RED <span> I AM YELLOW</span></p>I AM BLUE</div>

<p>I HAVE NO CSS ATTACHED TO ME</p>

<div><ul><li>I AM PURPLE</li></ul> I AM BLUE</div> 
```

它对类的作用与对元素的作用完全相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-01T13:48:41.817

如果你有以下 CSS，我会这样解释：

`p.classname { stuff }`

它只将该类名锁定到`<p>`标签。

因此，如果您放入任何其他内容，则除了标签`class="classname"`之外，它不会对任何其他内容起作用。`<p>`

# javascript - Use jquery selector and events to call function in javascript object

> ID：16093886
> 
> 赞同：0
> 
> 时间：2013-04-18T22:03:25.127
> 
> 标签：javascript, jquery, html, web

ok I'm not sure if I'm doing this right so if I'm going about it all wrong please explain.

I have a javascript object which is drawing html based on ajax data.

I am then trying to use jquery to handle events on the html output from an instance of the above object. However I would like to call a function and get a property out of the instance of the javascript object which was used to draw the html.

so my code looks something like this:

```
function obj1 (){
    this.property1 = "propvalue";

    this.dosomething = function () {
        // does some processing
    }

   this.drawhtml = function () {
    // outputs html
   }

}

// jquery to handle events
 $(document).ready(function(){

// .edit is a class in the html outputted from the drawhtml
   $('body').on('click','.edit',function () {
     // call the dosomething from the object
     });

 });

// create instance of object could be multiple on on page
var instance1 = new obj1;

instance1.drawhtml(); 
```

Thanks,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T22:06:03.950

您可以只使用之前创建的实例：

```
// jquery to handle events
 $(document).ready(function(){

// .edit is a class in the html outputted from the drawhtml
   $('body').on('click','.edit',function () {
     instance1.dosomething();
     });

 });

// create instance of object could be multiple on on page
var instance1 = new obj1();  // added parentesis so it's valid javascript

instance1.drawhtml(); 
```

**编辑**：从评论开始的附加信息：

处理此问题的最佳方法是将事件处理程序绑定到对象本身。像这样的东西：

```
function obj1 (){
    this.property1 = "propvalue";

    this.dosomething = function () {
        // does some processing
    }

   this.drawhtml = function () {
       var elem = $("<div>my super dooper HTML</div>");
       elem.on('click', this.dosomething);
   } 
```

}

# ruby-on-rails - Is it possible to use redirect_to when it's called by remote ajax?

> ID：16093889
> 
> 赞同：3
> 
> 时间：2013-04-18T22:03:54.727
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

Now this action in this controller is called by remote ajax call.
Only when the checkbox[:call] was checked and it's submit,
I'd like make it to redirect to ......_path with flash message.

Is it possible? if possible, how?

**controller**

```
.....
if params[:comment][:call] == "1"
    flash[:notice] = "you checked and submit!"
    redirect_to ....._path
else
    ajax page reload
end 
```

**view Form** (remote with ajax)

```
<%=form_for(([@community, @comment]), :remote => true, :class => 'form' ) do |f| %>
    <%= f.check_box :call, :label => 'call' %> call
        <div class="form-actions">
            <div class="input-append">
                <%= f.text_field :body, :id => "input", :class => "box" %>  
            <button type="submit" class="btn">submit</button>
        </div>
    </div>
<% end %> 
```

**Comment model**

```
attr_accessible :icon, :call
....
def call
    @call ||= "0"
end

def call=(value)
    @call = value
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:26:12.497

不，这是不可能的。

您必须呈现将更改窗口位置的 javascript：

```
window.location.href = 'http://your new location'; 
```

当然，在您的 js 视图中，您可以使用以下方法为 url 使用动态值：

```
window.location.href = '<%= @a_controller_variable %>'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T06:56:48.547

您将不得不在 js 而不是控制器中编写此代码。

在控制器中：

```
def action_name
  ....
  respond_to do |format|
    format.js
  end
end 
```

创建一个 action_name.js.erb 文件并编写以下代码：

```
<% if params[:comment][:call] == "1" %>
  <% flash[:notice] = "you checked and submit!" %>
  window.location.href = <%= some_url %>
<% else %>
  $("#some_div_id").html("something")    //ajax page reload
<% end %> 
```

希望这对你有用。

# c++ - Search for item iterating through multiple lists

> ID：16093890
> 
> 赞同：1
> 
> 时间：2013-04-18T22:04:02.190
> 
> 标签：c++, list, iterator

I'm trying to iterate through multiple lists to find a "Directory". If I have a directory structure such as: /A/B/C

/A/D/F

It seems to work if I look for B or C, but fails for D and F. I think this is because when it encounters a situation where it is searching down a list and it doesn't find the correct Directory then it doesn't know what to return (or if I uncomment the return NULL it returns null, which I don't want it to because it doesn't mean it's not technically found).

I.E. If I search for F, it will search A/B/C and not know what to return.

Is there a way to hold off on the return value until it finds a directory or until it is finished looking?

```
Directory* search_tree_for_dir(string dir_name) {
            for(list<Directory*>::iterator iter = this->l_dir.begin(); iter != this->l_dir.end(); iter++) {
                  // Base case: if directory found then return
                  if((*iter)->name == dir_name){
                      return *iter;
                  }
                  if(*iter != NULL) { 
                      return (*iter)->search_tree_for_dir(dir_name);
                  }
              } 
              //return NULL;
          } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:06:36.780

您要做的是检查递归调用的返回值，并查看它返回的内容。例如：

```
Directory *ret = (*iter)->search_tree_for_dir(dir_name);
if (ret) {
    return ret;
} 
```

这样，如果递归调用返回的不是`NULL`，您将传递它。如果它没有找到任何东西（即它返回`NULL`），那么您就不要传递它，而是继续搜索。

# android - Android addProximityAlarm doesn't work

> ID：16093891
> 
> 赞同：0
> 
> 时间：2013-04-18T22:04:07.053
> 
> 标签：android

I found hundreds of topics related to the same problem, but I cannot understand where I get wrong! Because I have written the same code basically...

This is a service which controls the position and adds a promityAlert

```
public class GeoReminderService extends Service implements LocationListener{
private LocationManager locationManager;
private  final String proximityIntentAction = "com.example.geo.ProximityIntentReceiver";

private float latitude;
private float longitude;

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 400, 10, this);

    addProximityAlert(45.477872,9.23457);

    return Service.START_STICKY;
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onLocationChanged(Location location) {
    Log.v("Service","Location changed");
    if (location != null) {
            Log.v("Location changed : Lat: ", ""+location.getLatitude());
            Log.v("Location changed : Lon: ", ""+location.getLongitude());
    }
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

private void addProximityAlert(double latitude, double longitude) {
    Log.v("Service","proximity alert added" + latitude +" "+ longitude);        
    Intent intent = new Intent(proximityIntentAction);

    PendingIntent proximityIntent = PendingIntent.getBroadcast(getApplicationContext(), -1, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    locationManager.addProximityAlert(latitude, longitude, 3000, -1, proximityIntent);
    IntentFilter filter = new IntentFilter(proximityIntentAction); 
    registerReceiver(new ProximityIntentReceiver(), filter);
} 
```

Instead this one is the receiver which should captures the event

```
public class ProximityIntentReceiver extends BroadcastReceiver {

private static final int NOTIFICATION_ID = 1000;

@Override
public void onReceive(Context context, Intent intent) {
    Log.v("proximity receiver", "alert received");
    String key = LocationManager.KEY_PROXIMITY_ENTERING;

    Boolean entering = intent.getBooleanExtra(key, false);

    if (entering) {
        Log.v("ProximityIntentReceiver", "entering");
    }
    else {
        Log.v("ProximityIntentReceiver", "exiting");
    }       
} 
```

Even if I change the position (I am using the Android emulator) the event `onReceive` doesn't fire. At the same time I am sure that I am changing the position correctly , since the event `locationChanged` works. Can anyone help me, please?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:35:20.917

您是否在清单中声明了 ProximityIntentReceiver？

在您声明活动等的清单的同一区域中，您还将声明您的 BroadcastReceiver。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.geo"
    android:versionCode="001"
    android:versionName="0.1"
    >
  <application>
    ...
    <receiver android:name=".ProximityIntentReceiver">
    </receiver>
  </application>
</manifest> 
```

# asp.net-mvc-3 - 如何获取已重定向的操作？

> ID：16093896
> 
> 赞同：0
> 
> 时间：2013-04-18T22:04:42.020
> 
> 标签：asp.net-mvc-3, redirect, asp.net-mvc-routing, asp.net-mvc-controller

有没有办法获取在 ASP.NET MVC3 的控制器内重定向我的操作的名称？（顺便说一下，没有在 TempData 和 Session 中保存操作的名称）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:38:05.030

像这样怎么样

```
public ActionResult getAction(string FromActionName){
   if(!string.IsEmptyOrNull(FromActionName)){
    //Do something with the action name
   }else{
    //Do nothing
   }
return View();
} 
```

并且发布动作看起来像

```
[HttpPost]
public ActionResult postAction(Model _model){
 //some processing
 return RedirectToAction("getAction",new{FromActionName="postAction"});
} 
```

# javascript - JavaScript 覆盖工具伊斯坦布尔的输出可以通过 TeamCity 发布吗？

> ID：16093903
> 
> 赞同：6
> 
> 时间：2013-04-18T22:05:25.433
> 
> 标签：javascript, continuous-integration, teamcity, code-coverage

是否可以通过[TeamCity](http://www.jetbrains.com/teamcity/)从 JavaScript 覆盖分析工具[伊斯坦布尔](http://gotwarlost.github.io/istanbul/)发布报告？也就是说，我想将这些结果与 TeamCity 的覆盖报告工具相结合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-19T16:23:10.187

是的。

1.  配置构建脚本以生成 HTML 报告（最好在 zip 存档中）。
2.  配置构建工件以将报告作为构建工件发布到服务器：此时您可以检查存档在构建工件中是否可用。
3.  报告选项卡使报告可作为构建或项目级别的额外选项卡使用。

要配置报告选项卡，请转到项目设置| 报告选项卡页面，单击创建新报告选项卡。提供报告选项卡类型（构建或项目级别）、选项卡标题、工件和起始页等详细信息。

现在，当您触发下一个构建配置时，您将看到带有您在上述步骤中提供的选项卡名称的选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-01T19:21:42.087

如今，这可以通过`--reporter=teamcity`国旗实现。

[在这里查看答案](https://stackoverflow.com/questions/43047752/teamcity-nyc-istanbul-generate-test-coverage-report)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-19T07:46:19.673

您可以像他们使用 PHP [http://blogs.jetbrains.com/teamcity/2013/02/25/continuous-integration-for-php-using-teamcity/一样以类似的方式进行操作](http://blogs.jetbrains.com/teamcity/2013/02/25/continuous-integration-for-php-using-teamcity/)

# c# - C# 类库异常处理

> ID：16093905
> 
> 赞同：4
> 
> 时间：2013-04-18T22:05:32.383
> 
> 标签：c#, exception-handling, class-library

我可以在 ac# 类库中执行此操作来处理类库代码本身执行期间可能发生的异常吗？我是编写类库和在其中处理异常的新手。请指教。

```
private void MethodName(String text)
    {
        try
        {
            ..............
            ..............
            ..............
        }
        catch (Exception ex)
        {
            throw new Exception(ex.Message.ToString());
        }
    } 
```

我在 google 和 stackoverflow 中进行了搜索，但没有找到任何文章是否允许我以这种方式处理类库中的异常，或者是否不推荐这样做。但它有效。可能是一个愚蠢的问题，但我有这个疑问。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T22:20:40.017

是的，你可以这样做，但一般来说，如果你打算对它做某事，你应该只捕获异常——即吞下它或为它增加价值（通过转换、包装或记录它）。

`text`使用您的示例方法，如果为 null 并且您的方法需要一个值，则应该抛出异常。除此之外，您应该让异常冒泡供调用者处理，除非您打算对其进行处理，或者这是您打算抑制的预期异常。

您也不应该抛出新异常，而只需使用 throw 关键字重新抛出当前异常：

```
catch (Exception ex)
{
    //do something

    throw;
} 
```

# numpy - NumPy 和 SciPy。静态与动态加载

> ID：16093910
> 
> 赞同：7
> 
> 时间：2013-04-18T22:06:05.220
> 
> 标签：numpy, scipy, lapack, blas, atlas

**TLDR：**我可以在 NumPy 和 SciPy 中使用静态 ATLAS/LAPACK 库吗？

**背景：**

使用 LAPACK 构建 ATLAS 后，使用以下内容：

```
wget http://sourceforge.net/projects/math-atlas/files/Stable/3.10.1/atlas3.10.1.tar.bz2/download
wget http://www.netlib.org/lapack/lapack-3.4.2.tgz
tar -jxvf atlas3.10.1.tar.bz2
mkdir BUILD
cd BUILD
../ATLAS/configure -b 64 -Fa alg -fPIC \
    --with-netlib-lapack-tarfile=../lapack-3.4.2.tgz \
    --prefix=<ATLAS_INSTALL_PATH>
make
cd lib
make shared
make ptshared
cd ..
make install 
```

我得到了以下文件`BUILD/lib`：

```
Make.inc@  
Makefile 
```

`.a`文件：

```
libatlas.a       
libcblas.a       
libf77blas.a     
libptf77blas.a  
libtstatlas.a
liblapack.a     
libf77refblas.a  
libptlapack.a
libptcblas.a 
```

`.so`文件：

```
libsatlas.so*
libtatlas.so* 
```

我的第一个问题是，为什么我没有和（`.so`共享动态库）文件？`lapack``cblas`

我的第二个问题是，NumPy 使用以下两个文件中的哪一个？

```
libsatlas.so*
libtatlas.so* 
```

最后，如果我定义：

```
BLAS=/path_to_BUILD/lib/libcblas.a
LAPACK=/path_to_BUILD/lib/liblapack.a
ATLAS=/path_to_BUILD/lib/libatlas.a 
```

并添加`/path_to_BUILD/lib`到NumPy 文件中`LD_LIBRARY_PATH`的`library_dirs`变量中。`site.cfg`NumPy 和 SciPy 会使用我的库吗？（即使它们是静态的？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T16:35:56.777

你应该能够。添加

```
[DEFAULT]
search_static_first = true 
```

到你的`site.cfg`文件，你应该很高兴。

# ruby-on-rails - 如何使用 eventmachine、rails 和 websockets？

> ID：16093912
> 
> 赞同：0
> 
> 时间：2013-04-18T22:06:34.907
> 
> 标签：ruby-on-rails, ruby, eventmachine

我有以下 sinatra 代码，但对于 Rails 应用程序，我该如何做？具体来说，希望在反应器循环内以薄的方式启动轨道，同时在那里也使用 websocket 服务器。

```
require 'bundler'
Bundler.require

class App < Sinatra::Base
  get '/' do
    slim :index
  end
end

EM.run do
  EM::WebSocket.start(:host => '0.0.0.0', :port => 3001) do |ws|
    # websocket stuff goes here
  end

  # start sinatra in a thin server instance here (but i want to start a rails app instead)
  Thin::Server.start App, '0.0.0.0', 3000
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T12:54:00.143

我会设置一个像 config/initializers/websocket.rb 这样的初始化程序：

```
EM.next_tick do
  EM::WebSocket.start(:host => '0.0.0.0', :port => 3001) do |ws|
    # websocket stuff goes here
  end
end 
```

此外，添加`gem 'thin'`到 Gemfile 并简单地使用`$ rails s`. 当 EM reactor 启动时，队列中的 next_tick 块将被调用并且 websocket 服务器开始运行。

您还可以将 websocket 代码放在 lib/ 中的某个文件中并通过初始化程序启动它，这可能会更干净。

# javascript - Repurposing some Javascript for a similar DOM element

> ID：16093916
> 
> 赞同：0
> 
> 时间：2013-04-18T22:07:13.893
> 
> 标签：javascript, jquery, css, html-lists

On my page I have an unordered list with some list items that serve as links to load content into a div.

The art direction requires that the list items be fully justified to the left and right. I've written some JavaScript to figure out how wide the `ul` is and calculate the width of the individual `li` elements, divide the remaining space and push the elements to the left and right respectively. It works great.

Now we want to add another `ul` under the first with another set of links.

How can I repurpose my code to do the same work as before?

All the list items are styled `display:inline;` and they need to be fluid in width in the event a font on one browser is a little bigger than another.

Here's my HTML: (It's all run together to overcome the spacing issue with inline list elements)

```
<div id="portfolio">
    <ul class="stacked-nav-top">
        <li class="project_link">
            <a href="#" class="project_class planning" id="commercial-industrial" title="Commercial Industrial Projects">
                Commercial &amp; Industrial
            </a>
        </li>
        <li class="breaker">//</li>
        <li class="project_link">
            <a href="#" class="project_class planning" id="government-institutional" title="Government Institutional Projects">
                Government &amp; Institutional
            </a>
        </li>
        <li class="breaker">//</li>
        <li class="project_link">
            <a href="#" class="project_class planning" id="affordable-housing" title="Affordable Housing Projects">
                Affordable Housing
            </a>
        </li>
        <li class="breaker">//</li>
        <li class="project_link">
            <a href="#" class="project_class planning" id="multi-family-housing" title="Multi-family Housing Projects">
                Multi-family Housing
            </a>
        </li>
    </ul>
</div> 
```

And my JavaScript:

```
$(function()
{
    var linkwidth = 0;
    $('#portfolio ul li.project_link').each(function() 
    {
        linkwidth += $(this).outerWidth()
    });

    var leftover = ($('#portfolio ul').outerWidth() - linkwidth);
    var breakerwidth = Math.floor((leftover / 3));
    $('#portfolio ul li.breaker').css('width', breakerwidth);
}); 
```

**EDIT**

My CSS:

```
section#portfolio ul {
    display:block;
    width:820px;
    text-align:center;
}
.stacked-nav-top {
    border-top:solid 1px rgba(97,58,17,.3);
    margin:0px;
    background:transparent url(images/dotted_line_820.png) center 19px no-repeat;
    padding:10px 0px;   
}
.stacked-nav-bottom {
    border-bottom:solid 1px rgba(97,58,17,.3);
    padding-bottom:10px;
    margin:10px 0px 15px 0px;
}
section#portfolio ul li {
    display:inline;
    font:lighter .65em "Tahoma", "Geneva", sans-serif;
    color:rgb(145,145,145);
    text-transform:uppercase;
}
section#portfolio ul li.breaker {
    display:inline-block;
    text-align:center;
} 
```

I've tried wrapping all the JavaScript in a `$('#portfolio ul').each(...` but that doesn't seem to work. It sets the spacing according to the first `ul` not both individually.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:44:26.500

我不太确定你想要什么，但是，如果你想在你的部分的每个 ul 上重复操作，你必须在每个 ul 上循环，然后进行计算。

演示在这里，尊重您的 HTML 内联语法（内联块问题）。

[http://jsfiddle.net/ggX2r/2/](http://jsfiddle.net/ggX2r/2/)

```
// Inside a document.ready scope of couse...
$('#portfolio ul').each(function () {
    var linkwidth = 0,
        leftover,
        breakerwidth;

    // *this* refers to your current <ul> child of your #portfolio.
    $('li.project_link', this).each(function() {
        // *this* refers now to your current <li.project_link> element
        linkwidth += $(this).outerWidth();
    });
    leftover = ($('#portfolio ul').outerWidth() - linkwidth);
    breakerwidth = Math.floor((leftover / 3));

    $('li.breaker', this).css('width', breakerwidth);   
}); 
```

# algorithm - Verification algorithm for minimum vertex cover?

> ID：16093917
> 
> 赞同：5
> 
> 时间：2013-04-18T22:07:19.360
> 
> 标签：algorithm, graph, vertex, np-complete

We know that the minimum vertex cover is NP complete, which means that it is in the set of problems that can be verified in polynomial time.

As I understand it, the verification process would require the following:

1.  Verify that the solution is a vertex cover at all
2.  Verify that the solution is the smallest possible subset of the source graph that satisfies condition #1

I'm finding it hard to establish that step #2 can be done in polynomial time. Can anyone explain how it is?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T22:17:49.457

最小顶点覆盖是 NP 难的。只有当它被重新表述为一个可以在多项式时间内验证[的决策问题](http://en.wikipedia.org/wiki/Vertex_cover_problem#Computational_problem)时，它才是 NP 完全的。

> 最小顶点覆盖问题是在给定图中找到最小顶点覆盖的优化问题。
> 
> *   实例：图*G*
> *   输出：最小的数*k*使得*G*有一个大小为*k*的顶点覆盖。
> 
> 如果将问题描述为[决策问题](http://en.wikipedia.org/wiki/Decision_problem)，则称为顶点覆盖问题：
> 
> *   实例：图*G*和正整数*k*。
> *   问题：*G是否有一个大小为**k*的顶点覆盖？

将问题重述为决策问题是使问题 NP 完全的常用方法。*基本上，您将“找到最小的解决方案k* ”形式的开放式问题变成是/否问题，“对于给定的*k*，是否存在解决方案？”

例如，对于[旅行商问题](http://en.wikipedia.org/wiki/Traveling_salesman_problem)，验证提出的解决方案是否所有城市之间的*最短*路径是 NP 难的。*但是，如果问题被重申为只需要为某个k*找到一个小于*k*总距离的解，那么验证一个解就很容易了。您只需找到建议解决方案的长度并检查它是否小于*k*。

 **决策问题公式可以很容易地用于解决一般公式。要找到最短路径，您所要做的就是降低*k*的值，直到找不到解决方案。**

# android - How to force stop Intent Service in progress?

> ID：16093919
> 
> 赞同：12
> 
> 时间：2013-04-18T22:07:31.037
> 
> 标签：android, service, intentservice

I have an intent service which downloads several gigabytes of videos. I have a "Stop" button, to stop the download if accidentally hit "Start" or whatever. I know this has been asked a couple of times but with no working answer for me.

I try to call `stopService()`, doesn't work. That just calls `IntentService.OnDestroy()`. I tried to call `stopSelf()` inside `onDestroy`, doesn't work either.

I tried to have something like a flag, but onHandleIntent doesn't get called if its already running, it waits till current work is finished and executes then. And even if this would have worked, I would have to have something like a giant if statement, that sucks

Is my only option really to rewrite it to a regular Service?

//Answer

```
public class SyncService extends IntentService {

    boolean isCanceled;

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        if (intent.hasExtra("action")) {

            // Set the canceling flag
            isCanceled= intent.getStringExtra("action").equals("cancel");

        }
        return super.onStartCommand(intent, flags, startId);
    }

    @Override
    protected void onHandleIntent(Intent intent) {

        // Clean up the possible queue
        if (intent.hasExtra ("action")) {
            boolean cancel = intent.getStringExtra ("action"). Equals ("cancel");
            if (cancel) {
                return;
            }
        }

        ...

        Get your inputStream from HttpUrlConnection or whatever

        ...

        while ((bytesRead = in.read(buffer)) > 0) {
            if (isCanceled) {
                isCanceled = false;
                break;
            }

            ...
        }

    }
} 
```

And trigger it with

```
Intent intent = new Intent(context, SyncService.class);
intent.putExtra("action", "cancel");
context.startService(intent); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T22:15:30.490

你有两个不同的问题，我认为：

1.  如何停止当前下载

2.  如何停止排队下载，应该在当前下载完成后执行

第一个必须是“类似于标志的东西”，您在下载数据时进行检查。否则，没有什么可以阻止您的下载操作。如果您使用的是典型`HttpUrlConnection`配方，则在从 HTTP 读取`InputStream`并写入`FileOutputStream`. 您可以通过调用`startService()`特定`Intent`结构来设置该标志，将其标识为“取消”操作。您需要在`onStartCommand()`您`IntentService`的.`Intent``Intent``Intent`

如果您*还*可能有其他命令排队（场景＃2），您还需要检查顶部的该标志`onHandleIntent()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T22:15:35.543

鉴于您尚未准确发布*如何*`onHandleIntent`处理视频下载，这可能不起作用（在执行下载的地方会有某种循环）。您可以在 中使用静态类变量`IntentService`来保存下载的停止/开始状态，以便可以通过`Activity`. 然后，在内部`onHandleIntent`，您必须定期检查状态，以便它知道何时取消操作。

# ruby-on-rails-3.2 - How to return string of role names with rolify

> ID：16093920
> 
> 赞同：2
> 
> 时间：2013-04-18T22:07:31.480
> 
> 标签：ruby-on-rails-3.2, rolify

I'm trying to return the name of all the roles a user has in the following format:

'rolename1','rolename2','rolename3'

So that I can user the has_all_roles? method from rolify.

I've tried collecting the role names like this:

```
user.roles(:select => :name).collect(&:name) 
```

But that returns an array:

["rolename1","rolename2","rolename3"]

the has_all_roles? method wants them like this:

user.has_all_roles?('rolename1','rolename2','rolename3')

I'm sure I'm missing something very simple.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:22:41.153

将收集的结果捕获到变量中，并将捕获的数组转换为参数列表。

```
roles = user.roles(:select => :name).collect(&:name)
user.has_all_roles?(*roles) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-08T20:11:53.810

从 Rails 5.1 开始，该方法`user.roles(:select => :name)`会为您提供以下错误：

```
ArgumentError: wrong number of arguments (1 for 0) 
```

要修复它，我们可以这样做`@user.roles.pluck(:name)`。

如果你想要一个串联名称逗号分隔的字符串，我们可以这样做`@user.roles.pluck(:name).join(", ")`

# php - PHP foreach 回显字符串

> ID：16093921
> 
> 赞同：-1
> 
> 时间：2013-04-18T22:07:33.457
> 
> 标签：php, string, foreach

我想回应这些链接如下：

```
Title
http://www.link.com
Title 2
http://www.link2.com 
```

相反，它们是这样的：

```
Title
http://www.link.com
http://www.link2.com
Title2
http://www.link.com
http://www.link2.com 
```

这是我正在使用的代码：

```
 foreach($links as $link ){
    echo $link."<br>";
        foreach($linksx as $linkx ){
    echo $linkx."<br>";
    }
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:11:50.103

由于您有 2 个不同的数组，因此您必须同时迭代它们，而不是一个在另一个内部。

假设数组以数字方式索引（基本数组），并且具有相同的大小（相同数量的元素），您可以编写

```
for($i = 0 ; $i < count($links) ; $i++)
{
    echo $links[$i] . "<br />";
    echo $linksx[$i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T22:11:41.777

*这*是因为*您* 正在`$linksx`为. 您想要的是循环一个数组，然后在另一个数组中获取它的对应项。*`$links`*

 *```
foreach($links as $key=>$link){
    $linkx = $linksx[$key];
    echo $link."<br>".$linkx."<br>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T22:10:03.627

你的意思是嵌套循环吗？

```
foreach($links as $link )
{
    echo $link."<br>";
}
foreach($linksx as $linkx )
{
    echo $linkx."<br>";
} 
```*

# c - Assignment of a value, followed by comparison in "if" statement's condition in C

> ID：16093922
> 
> 赞同：2
> 
> 时间：2013-04-18T22:07:59.833
> 
> 标签：c, if-statement, coding-style

I want to write some code with the following logic. From a clarity and conciseness point of view, is the first approach better than the other two?

```
if(kErrNone != (cs_error = get_last_error(component)))
{
    /* Do something. */
}

if((cs_error = get_last_error(component)) != kErrNone)
{
    /* Do something. */
}

cs_error = get_last_error(component);
if(cs_error != kErrNone)
{
    /* Do something. */
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:12:35.883

对我来说，这是第三个。因为条件更容易评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:44:06.953

从简洁的角度来看，前两个**if**块明显优于第三个。

实际上，第一个**if**和第二个**if**之间没有显着差异，因为您只是更改了比较表达式的两侧。

第三个不必要地添加了一个语句，因为对**cs_error**的赋值可以巧妙地组合到**if**块中。但是，是的，如果您对牙套不小心，就有可能出错。

# c# - 从 C# 中的列向 Excel 中的标记添加标签

> ID：16093923
> 
> 赞同：2
> 
> 时间：2013-04-18T22:08:07.283
> 
> 标签：c#, excel, charts, labels

我有一个 3 列的 excel 表。B 列和 C 列是我的数据，A 列包含每个点的标签。

我必须用它来让我的图表正确

```
series1Point.XValues = xlWorkSheetDimfract.get_Range("B1:B" + (ip - 1));
series1Point.Values = xlWorkSheetDimfract.get_Range("C1:C" + (ip - 1)); 
```

但是即使使用以下内容，A 列的标签也没有显示：

```
series1Point.ApplyDataLabels(); 
```

如何根据 A 列中的内容将标签添加到图表上的每个点，然后将该图表转换为 jpeg？

谢谢

```
Excels.SeriesCollection seriesCollectionPoint = chartPageDimfract.SeriesCollection();

Excels.Series series1Point = seriesCollectionPoint.NewSeries();
 series1Point.XValues = xlWorkSheetDimfract.get_Range("A1:B" + (ip - 1));
 series1Point.Values = xlWorkSheetDimfract.get_Range("C1:C" + (ip - 1));
     series1Point.ApplyDataLabels(Microsoft.Office.Interop.Excel.XlDataLabelsType.xlDataLabelsShowLabel);

        chartPageDimfract.ChartType = Excels.XlChartType.xlXYScatter;// xlLineMarkers;

        series1Point.MarkerStyle = Excels.XlMarkerStyle.xlMarkerStyleDot;
        series1Point.MarkerSize = 4;

        chartPageDimfract.Export(xlsfic + "temp/dimmensionFractale.jpg", "JPG", misValue);

        xlWorkBookDimfract.SaveAs(xlsfic + "temp/excel_chart_dimmensionFractale.xls",    Excels.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excels.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
   xlWorkBookDimfract.Close(true, misValue, misValue); 
```

'ip' 是我在填写我的 Excel 表后使用的整数。它是最后一项的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:09:07.693

正如我在评论中提到的，图表类型 XY Scatterplot 本身并不支持您尝试执行的那种标签。它允许您使用 X、Y 或同时使用 X 和 Y 值进行标记，但*不能*使用某些分类值。

创建一个包含要应用的标签的数组。数组的顺序应该相同，并且包含与系列中的点一样多的标签。

然后，这是我在 VBA 中使用的方法：

```
 Sub AddXYScatterLabels()

 Dim ptLabels as Variant     '<~~ this is the array that I will populate with the labels to use from Column A.

 Dim i as Long: i=1
 Dim srs as Series           '<~~ This is the series that you will assign the labels to.'
 Dim pt as Point             '<~~ use this to iterate over srs.Points collection.'
 ptLabels = Range("A1:A10")  '<~~ Modify as needed for your Range object.'

 Set srs = ActiveSheet.ChartObjects(1).SeriesCollection(1) 

 For each pt in srs.Points
     pt.DataLabel.Text = ptLabels(i,1)
     i = i+1
 Next 

 End Sub 
```

然后，您应该可以使用该`Chart.Export`方法创建图表的 JPG。

```
ActiveChart.Export "c:\chart.jpg" 
```

# android - fragment args.getString for getItem is not giving correct results

> ID：16093930
> 
> 赞同：1
> 
> 时间：2013-04-18T22:08:45.227
> 
> 标签：android, android-fragments, android-viewpager

I am making an android app with 6 users that I need to pull data for. I set up my Bundle args to hold two things; an int with its position number and a string with the user's name. This is done like such.

```
@Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
        switch (position) {
        case 0:
            args.putString(DummySectionFragment.ARG_USER_NAME, "user1");
        case 1:
            args.putString(DummySectionFragment.ARG_USER_NAME, "user2");
        case 2:
            args.putString(DummySectionFragment.ARG_USER_NAME, "user3");
        case 3:
            args.putString(DummySectionFragment.ARG_USER_NAME, "user4");
        case 4:
            args.putString(DummySectionFragment.ARG_USER_NAME, "user5");
        case 5:
            args.putString(DummySectionFragment.ARG_USER_NAME, "user6");
        }
        fragment.setArguments(args);
        return fragment;
    } 
```

Afterwards in my DummySectionFragment I do this.

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        this.ourContainer = container;
        this.ourInflater = inflater;
        View rootView = inflater.inflate(R.layout.fragment_main_dummy,
                container, false);

        //TextView dummyTextView = (TextView) rootView.findViewById(R.id.following);

        this.userPic = (ImageView) rootView.findViewById(R.id.user_Icon);
        this.following = (TextView) rootView.findViewById(R.id.following);
        this.followers = (TextView) rootView.findViewById(R.id.followers);
        this.tweets = (TextView) rootView.findViewById(R.id.tweets);

        //THIS IS THE IMPORTANT PART
        Bundle args = getArguments();
        System.out.println("Current Number: " + args.getInt(ARG_SECTION_NUMBER));
        System.out.println("Current Name: " + args.getString(ARG_USER_NAME));
        this.userName = args.getString(ARG_USER_NAME);
        //THIS IS THE IMPORTANT PART

        m_orders = new ArrayList<Order>();
        m_Users = new ArrayList<twitUser>();
        this.m_adapter = new OrderAdapter(getActivity(), inflater, R.layout.row, m_orders);         
        //setListAdapter(this.m_adapter);

        ListView mListView;
        mListView = (ListView) rootView.findViewById(R.id.list);
        mListView.setAdapter(this.m_adapter);

        new DummySectionFragment.AsyncTest().execute();

        m_ProgressDialog = ProgressDialog.show(getActivity(),    
              "Please wait...", "Retrieving data ...", true);
        return rootView;
    } 
```

However the print statements that I put in there to test always return something like this.

Current Number: 1

Current Name: user6

Current Number: 2

Current Name: user6

I have no idea why this is happening. If you need more of my code to understand I can provide that.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:12:32.980

您的 switch 中没有 break 语句，因此对于其他所有情况，它都属于“user6”情况。

# fortran - Amber12 中的“Fortran 运行时错误：文件结尾”

> ID：16093935
> 
> 赞同：5
> 
> 时间：2013-04-18T22:09:31.603
> 
> 标签：fortran, bioinformatics, gfortran

我正在使用用于模拟生物分子的分子机械力场的 amber12 软件，我遵循下一个链接中描述的安装说明[Intallation of amber in Mac OS X](http://jswails.wikidot.com/installing-amber12-and-ambertools-12)该程序实际上可以工作，但是在尝试执行软件的程序部分时它停下来说

> Fortran 运行时错误：文件结束

1.所以这就是我要做的，首先访问包含文件的文件夹

```
N-terminal-2:~ javieralejandrorendoncarrillo$ cd Desktop/amber/Complex1 
```

2.然后设置路径

```
N-terminal-2:Complex1 javieralejandrorendoncarrillo$ export AMBERHOME=/Users/javieralejandrorendoncarrillo/amber/amber12 
```

3.最后在下一个命令行执行程序：

```
N-terminal-2:Complex1 javieralejandrorendoncarrillo$ $AMBERHOME/bin/sander.MPI -O -i min.in -o min_complex.out -p complex.prmtop -c complex.inpcrd -r complex_min.crd &
[2] 13377
N-terminal-2:Complex1 javieralejandrorendoncarrillo$ At line 524 of file mdread.F90 (unit = 5, file = 'min.in')
Fortran runtime error: End of file

[2]-  Exit 2                  $AMBERHOME/bin/sander.MPI -O -i min.in -o min_complex.out -p complex.prmtop -c complex.inpcrd -r complex_min.crd
N-terminal-2:Complex1 javieralejandrorendoncarrillo$ 
```

该文件`min.in`保存在`Complex 1`我正在运行模拟的文件夹中，这是脚本`min.in`

```
Initial minimisation of our complex
 &cntrl
  imin=1, maxcyc=3000, ncyc=2500,
  cut=16, ntb=0, igb=1,
 &end 
```

我该如何解决这个问题？语法错了吗？有谁知道如何执行或这是什么编程语言？

这是我安装的 gfortran 版本

```
N-terminal-2:~ javieralejandrorendoncarrillo$ gfortran -v
Using built-in specs.
COLLECT_GCC=gfortran
COLLECT_LTO_WRAPPER=/opt/local/libexec/gcc/x86_64-apple-darwin12/4.7.2/lto-wrapper
Target: x86_64-apple-darwin12
Configured with: ../gcc-4.7.2/configure --prefix=/opt/local --build=x86_64-apple-darwin12 --enable-languages=c,c++,objc,obj-c++,lto,fortran,java --libdir=/opt/local/lib/gcc47 --includedir=/opt/local/include/gcc47 --infodir=/opt/local/share/info --mandir=/opt/local/share/man --datarootdir=/opt/local/share/gcc-4.7 --with-libiconv-prefix=/opt/local --with-local-prefix=/opt/local --with-system-zlib --disable-nls --program-suffix=-mp-4.7 --with-gxx-include-dir=/opt/local/include/gcc47/c++/ --with-gmp=/opt/local --with-mpfr=/opt/local --with-mpc=/opt/local --with-ppl=/opt/local --with-cloog=/opt/local --enable-cloog-backend=isl --disable-cloog-version-check --enable-stage1-checking --disable-multilib --enable-lto --enable-libstdcxx-time --with-as=/opt/local/bin/as --with-ld=/opt/local/bin/ld --with-ar=/opt/local/bin/ar --with-bugurl=https://trac.macports.org/newticket --disable-ppl-version-check --with-pkgversion='MacPorts gcc47 4.7.2_2'
Thread model: posix
gcc version 4.7.2 (MacPorts gcc47 4.7.2_2) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-10-17T07:13:01.870

我有同样的错误信息：`..file mdread.F90 (unit = 5, file = 'min_all.in')..`。

在对此进行调查时，出于某种原因，我发现将*min_all.in*文件中的`ntpr=5`to更改为解决了该问题：`6`

 *```
 &cntrl
  imin=1, maxcyc=200,
  ntpr=6,
 &end 
```

在这些事情上，我不是抽屉里最锋利的刀，但我很难理解为什么这会为我解决这个问题。

该`ntpr`值仅定义应将轨迹坐标发送到输出文件的频率，在这种情况下，每 6 步而不是每 5 步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T09:29:37.780

扩展评论而不是答案。您收到错误消息的两个常见原因，即

```
At line 524 of file mdread.F90 (unit = 5, file = 'min.in') Fortran runtime error: End of file 
```

是

1.  正在读取的文件不是程序正在寻找它的位置。
2.  程序试图从文件中读取比文件包含的更多的数据。

从您发布的内容来看，（1）似乎不太可能，但您可以通过`INQUIRE`在打开文件之前插入语句来检查文件的存在来检查这一点。或者，您可以`STATUS='old'`在文件语句中使用关键字（和值）`OPEN`，如果文件不存在，程序将报告错误。

至于（2），你几乎是靠你自己的。这里没有人（除非您非常幸运）可能知道您的程序期望从输入文件中读取什么，并且您没有发布任何相关代码。您可能需要修改文件`READ`语句以包含`END=`关键字参数以找出错误的来源。

我认为 Amber12 的供应商本身可能比 SO 社区更了解他们的代码；你的问题会更好地针对他们。

对于它的价值，我认为该问题与您使用的编译器无关。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-04T07:55:18.257

'&end' 或 '/' 行不应是输入脚本中的最后一行。在 '&end' 或 '\' 行之后有一个新的空行，无论您使用的是哪个。这解决了我的问题。*

# java - Memory size of a Java 32-bit system int[] array

> ID：16093938
> 
> 赞同：10
> 
> 时间：2013-04-18T22:10:03.553
> 
> 标签：java, arrays, memory, int

In Java, memory used for occupying the `int[]` array of size `n` equals to `(4 + n) * 4` bytes.

Practically can be proven by the code below:

```
public class test {

    public static void main(String[] args) {

        long size = memoryUsed();
        int[] array = new int[2000];
        size = memoryUsed() - size;
        if (size == 0)
            throw new AssertionError("You need to run this with -XX:-UseTLAB for accurate accounting");
        System.out.printf("int[2000] used %,d bytes%n", size);

    }

    public static long memoryUsed() {
        return Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
    }

} 
```

so interesting is number `4` in parentheses. First portion of `4` bytes takes array reference, second - array length, then what takes 8 bytes left?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T22:14:37.000

> 4 个字节的第一部分采用数组引用，第二个 - 数组长度，那么剩下 8 个字节呢？

正常对象开销 - 通常是几个字节，指示对象的类型，以及与对象的监视器相关联的几个字节。这根本不是特定于数组的 - 您会在所有对象中看到它。

# java - How to manipulate leaves of a JSON tree

> ID：16093940
> 
> 赞同：1
> 
> 时间：2013-04-18T22:10:05.657
> 
> 标签：java, json, data-structures, tree

I want to replace rare words with `_RARE_` in a JSON tree using **JAVA**.

My rareWords list contains

```
late  
populate
convicts 
```

So for JSON below

```
["S", ["PP", ["ADP", "In"], ["NP", ["DET", "the"], ["NP", ["ADJ", "late"], ["NOUN", "1700<s"]]]], ["S", ["NP", ["ADJ", "British"], ["NOUN", "convicts"]], ["S", ["VP", ["VERB", "were"], ["VP", ["VERB", "used"], ["S+VP", ["PRT", "to"], ["VP", ["VERB", "populate"], ["WHNP", ["DET", "which"], ["NOUN", "colony"]]]]]], [".", "?"]]]] 
```

I should get

```
["S", ["PP", ["ADP", "In"], ["NP", ["DET", "the"], ["NP", ["ADJ", "_RARE_"], ["NOUN", "1700<s"]]]], ["S", ["NP", ["ADJ", "British"], ["NOUN", "_RARE_"]], ["S", ["VP", ["VERB", "were"], ["VP", ["VERB", "used"], ["S+VP", ["PRT", "to"], ["VP", ["VERB", "populate"], ["WHNP", ["DET", "which"], ["NOUN", "colony"]]]]]], [".", "?"]]]] 
```

Notice how

```
["ADJ","late"] 
```

was replaced by

```
["ADJ","_RARE_"] 
```

My code so far is like below:

I recursively iterate over the tree and as soon as rare word is found, I create a new JSON array and try to replace the existing tree's node with it. See `// this Doesn't work` in below, that is where I got stuck. The tree remains unchanged outside of this function.

```
public static void traverseTreeAndReplaceWithRare(JsonArray tree){   

        //System.out.println(tree.getAsJsonArray()); 

        for (int x = 0; x < tree.getAsJsonArray().size(); x++)
        {
            if(!tree.get(x).isJsonArray())
            {
                if(tree.size()==2)
                {   
                //beware it will get here twice for same word
                 String word= tree.get(1).toString();  
                 word=word.replaceAll("\"", ""); // removing double quotes

                 if(rareWords.contains(word))
                 {
                 JsonParser parser = new JsonParser();                   

                             //This works perfectly 
                             System.out.println("Orig:"+tree);
                 JsonElement jsonElement = parser.parse("["+tree.get(0)+","+"_RARE_"+"]");

                 JsonArray newRareArray = jsonElement.getAsJsonArray();

                             //This works perfectly 
                             System.out.println("New:"+newRareArray);

                 tree=newRareArray; // this Doesn't work
                 }                 

                }               
                continue;   
            }
            traverseTreeAndReplaceWithRare(tree.get(x).getAsJsonArray());
        }
    } 
```

code for calling above, I use google's [gson](https://code.google.com/p/google-gson/)

```
JsonParser parser = new JsonParser();
JsonElement jsonElement = parser.parse(strJSON);
JsonArray tree = jsonElement.getAsJsonArray(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T02:08:50.670

这是 C++ 中的一种直接方法：

```
#include <fstream>
#include "JSON.hpp"
#include <boost/algorithm/string/regex.hpp>
#include <boost/range/adaptors.hpp>
#include <boost/phoenix.hpp>

static std::vector<std::wstring> readRareWordList()
{
    std::vector<std::wstring> result;

    std::wifstream ifs("testcases/rarewords.txt");
    std::wstring line;
    while (std::getline(ifs, line))
        result.push_back(std::move(line));

    return result;
}

struct RareWords : boost::static_visitor<> {

    /////////////////////////////////////
    // do nothing by default
    template <typename T> void operator()(T&&) const { /* leave all other things unchanged */ }

    /////////////////////////////////////
    // recurse arrays and objects
    void operator()(JSON::Object& obj) const { 
        for(auto& v : obj.values) {
            //RareWords::operator()(v.first); /* to replace in field names (?!) */
            boost::apply_visitor(*this, v.second);
        }
    }

    void operator()(JSON::Array& arr) const {
        int i = 0;
        for(auto& v : arr.values) {
            if (i++) // skip the first element in all arrays
                boost::apply_visitor(*this, v);
        }
    }

    /////////////////////////////////////
    // do replacements on strings
    void operator()(JSON::String& s) const {
        using namespace boost;

        const static std::vector<std::wstring> rareWords = readRareWordList();
        const static std::wstring replacement = L"__RARE__";

        for (auto&& word : rareWords)
            if (word == s.value)
                s.value = replacement;
    }
};

int main()
{
    auto document = JSON::readFrom(std::ifstream("testcases/test3.json"));

    boost::apply_visitor(RareWords(), document);

    std::cout << document;
} 
```

~~这假设您想要对所有字符串值进行替换，并且只匹配整个字符串。您可以通过更改正则表达式或正则表达式标志轻松地使这种情况不区分大小写、匹配字符串中的单词等。~~根据评论稍作调整。

包含 JSON.hpp/cpp 的完整代码在这里：[https ://github.com/sehe/spirit-v2-json/tree/16093940](https://github.com/sehe/spirit-v2-json/tree/16093940)

# c# - 哪些数据库库与 TransactionScope 合作？

> ID：16093942
> 
> 赞同：2
> 
> 时间：2013-04-18T22:10:12.780
> 
> 标签：c#, .net, tsql, enterprise-library

**一般来说，**是否有一个接口表明`TransactionScope`-awareness？是否有可用的常用数据库列表`TransactionScope`？（它是扩展[DbConnection](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnection.aspx)或实现[IDbConnection](http://msdn.microsoft.com/en-us/library/system.data.idbconnection.aspx)的任何东西吗？）

`TransactionScope`与合作的数据库有什么关系？即，是否`TransactionScope`以某种方式搜索活动连接并调用适当的开始/提交/回滚方法？数据库是否寻找环境`TransactionScope`变量？或两者？

**如有必要**，背景。**我正在处理一个旧的 DAL，它利用了一些不同的类似事务的策略：**

 **```
//
// transactionless queries
//

// Microsoft.Practices.EnterpriseLibrary.Data. ... 
Database db = SQLHelper.GetDatabase();
DbCommand cmd = db.GetStoredProcComment("doSomething");
db.AddInParameter(cmd, "p1", DbType.Guid, Id);
using (IDataReader r = db.ExecuteReader())
{
  // etc.
}

//
// Transaction objects being passed around and attached to DbCommands
//

// somewhere up the line ... 
DbConnection con = TransactionScopeConnections.GetConnection(db);
DbTransaction transaction = con.BeginTransaction();

// Microsoft.Practices.EnterpriseLibrary.Data. ... 
Database db = SQLHelper.GetDatabase();
DbConnection con = TransactionScopeConnections.GetConnections(db);
DbCommand cmd = db.GetStoredProcComment("doSomething");
cmd.Transaction = transaction;
db.AddInParameter(cmd, "p1", DbType.Guid, Id);
using (IDataReader r = db.ExecuteReader())
{
  // etc.
}

//
// queries in TransactionScopes
//

using (TransactionScope scope = new TransactionScope())
{
  // Microsoft.Practices.EnterpriseLibrary.Data. ... 
  Database db = SQLHelper.GetDatabase();
  DbCommand cmd = db.GetStoredProcComment("doSomething");
  db.AddInParameter(cmd, "p1", DbType.Guid, Id);
  using (IDataReader r = db.ExecuteReader())
  {
    // etc.
  }
  scope.Complete();
}

//
// both
//

Database db = SQLHelper.GetDatabase();
using (TransactionScope transactionScope = new TransactionScope())
{
    DbConnection con = TransactionScopeConnections.GetConnection(db);
    DbTransaction transaction = con.BeginTransaction();

    /* ... build query ... */

    query.transaction = transaction;

    /* ... execute query, read results, if any ... */

    transaction.Commit();
    transactionScope.Complete();

} 
```

这些都是企业库的有效选项吗？`TransactionScope`表格没有意义吗？最后一种形式可能是多余的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:36:52.797

要回答您的问题，*是否有指示与 TransactionScope 兼容的接口？还是利用 TransactionScope 的数据库类型对象的列表？*

是的，您可以考虑使用`IDBTransaction`接口来覆盖 .NET 框架数据提供者访问关系数据库的实现。

`TransactionScope`当您希望将事务提升为完全分布式事务（例如 MSDTC）时，我看到的使用方式。`TransactionScope`本身并不仅限于ADO.NET，可以参考[Scope and More](http://msdn.microsoft.com/en-us/magazine/cc300805.aspx)**

# iphone - 显示键盘时以相同的速率移动 UIView

> ID：16093943
> 
> 赞同：1
> 
> 时间：2013-04-18T22:10:24.450
> 
> 标签：iphone, ios, uikeyboard

我的屏幕中央有一个 UIView，其中包含一个`UISearchBar`. 当用户单击时，`UISearchBar`我成功地根据`UIKeyboardFrameEndUserInfoKey`.

问题是这对我来说还不够好。

我想做的是保持在`UIView`那里，直到键盘顶部接触到底部`UIView`，然后以与键盘移动相同的速度向上移动 UIView。一旦`UIView`键盘到达`UIView`.

我开始认为这对于`UIKeyboard`通知发送的信息是不可能的。有人尝试过类似的东西并看到成功吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T23:02:11.083

为此，您应该能够使用 to 中提供的信息`UIKeyboardWillChangeFrameNotification`。此通知中的信息会告诉您键盘的开始帧和结束帧、动画曲线的类型以及持续时间。

要在动画中的任何给定时间计算键盘的点，您可以使用Jeff LaMarche 的[这段代码](http://iphonedevelopment.blogspot.com.au/2010/12/more-animation-curves-than-you-can.html)，或者使用[`CAMediaTimingFunction`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CAMediaTimingFunction_class/Introduction/Introduction.html)该类并插入动画类型（带名称的函数）并确定键盘应该在哪里某些时间点。

一旦您知道键盘在给定时间点的位置，您就可以设置动画让您`UIView`随键盘移动。

# sass - 基础 4、指南针和 SASS

> ID：16093944
> 
> 赞同：2
> 
> 时间：2013-04-18T22:10:34.000
> 
> 标签：sass, compass-sass, zurb-foundation

我正在使用 Foundation 4、Compass 和 SASS（我使用 Compass gem 来创建新项目）。但是，我有点失落。我在哪里放置我自己的 scss 文件？

Compass 创建一个 sass 样式表目录，其中包含

*   _settings.scss
*   应用程序.scss
*   规范化.scss

我以模块化方式工作，其中有许多样式表，例如导航、内容、页脚等。我在哪里包含我的 scss 文件？是否创建一个 partials 文件夹，然后将它们导入 app.scss？

如果我将它们导入 app.scss，这会将我的 CSS 附加到 app.css 的末尾。但是，使用 Compass 手表，它还会创建我的每一个部分......因为它们被附加到 app.css，所以不需要这些。

我查看了 compass、sassy 和 Foundation 网站，但似乎不知道如何执行此操作。因为我使用的是 Foundation，所以我认为我需要的信息可能在那里，但我找不到。这似乎是 SASS 问题，而不是 Compass 或 F4 问题。从我能找到的内容来看，这有点令人困惑，并且没有记录在网络上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T23:57:36.077

以下划线开头命名部分`_footer.scss`，然后`app.scss`使用`@import 'footer'`. 如果您不在文件名中使用下划线，它将创建一个 CSS 文件，这似乎是您遇到的问题。

Compass 完全不知道您的文件名或结构。

例如，您可以在文件夹中导入文件：

```
@import 'partials/footer'
@import 'partials/navigation' 
```

或者，如果您安装[sass-globbing](https://github.com/chriseppstein/sass-globbing)，您可以像这样导入整个文件夹：

```
@import 'partials/*' 
```

# c - 将结构传递给C中的函数

> ID：16093945
> 
> 赞同：5
> 
> 时间：2013-04-18T22:10:40.670
> 
> 标签：c

如果我有以下情况： -

```
struct foo
{
  int a;
  int *b;
} bar;

void baz(struct foo qux)
{

} 
```

我是否认为传递`bar`给`baz()`会导致本地副本`bar`被推入堆栈？如果是这样，这是什么副本？在 C++ 中，我假设它会调用复制构造函数或默认的复制构造函数，但我真的不知道这在 C 中是如何工作的。

C 是否有任何默认复制构造函数的概念，并且它有名称吗？可以做些什么来执行深层复制吗？（假设）。我能想到的唯一方法是实际进行深层复制，然后将其传递给函数。

通常，我会传递一个指向 a 的指针，`foo`但我只是好奇它是如何工作的。此外，我的印象是传递指针更快，节省内存，并且是执行此类操作时推荐的操作过程。我猜这是一个浅拷贝；这可以改变吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T22:18:50.387

> 我是否认为将 bar 传递给 baz() 会导致 bar 的本地副本被推入堆栈？

是的。

> 我真的不知道这将如何在 C 中工作。

基本上与 C++ 中的默认复制构造函数一样；副本的每个字段都使用原始字段的相应字段进行初始化。当然，由于“好像”规则，整个事情可能归结为`memcpy`.

> 我的印象是传递指针更快，节省内存，并且是执行此类操作时推荐的操作过程。

对于较大`struct`的 s，通常是这种情况，但并非总是如此；如果您有`struct`少量小字段，则复制的开销可能会小于间接的开销（此外，使用指针参数可能会很昂贵，因为 C 和 C++ 的别名规则会阻止一些优化）。

> 我猜这是一个浅拷贝；这可以改变吗？

不，浅复制（盲目复制每个字段）是默认复制构造函数所发生的（而“深复制”通常意味着创建指针/引用字段中引用的每个对象的副本）。

你的意思是“通过引用传递”，它不是默认允许最大灵活性（以及与原始类型传递的一致性）。如果你想通过引用传递你传递一个指针（或 C++ 中的一个引用），通常`const`如果你只是为了性能，否则你传递对象本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T22:34:38.590

是的，将 bar 的本地副本推入堆栈。其余的对以下工作示例进行评论。

```
 #include <stdio.h>
    struct foo
    {
        int a;
        int *b;
    } bar;
    void baz(struct foo qux)
    {
        bar.a = 2; // if its a different copy then printf on main should print 1 not 2.
        *bar.b = 5; // if its a different copy then printf on main should print 5 not 4\. since the place pointer pointing to is same
    }
    int main(){
        bar.a=1;
        bar.b = (int*)malloc(sizeof(int));
        *bar.b = 4;
        baz(bar); // pass it to baz(). now the copy of bar in the stack which is what baz going to use
        printf("a:%d | b:%d\n",bar.a,*bar.b);
        //answer is  2 and 5
        /*So indeed it does a shallow copy thats why we lost the "4" stored in bar.b it did not created new space in heap to store "5" instead it used the same space that b was pointing to.
        */
    return 0;
    } 
```

# mysql - SQL insert auto increment value

> ID：16093946
> 
> 赞同：1
> 
> 时间：2013-04-18T22:10:50.613
> 
> 标签：mysql, insert, foreign-keys, primary-key, auto-increment

I am currently working on a database that stores statements in 2 tables, and has another table linking statements together. The first 2 tables auto increment the primary ID on every entry, however I need to know the new ID's that have been given to enter it into the table that links them.

```
Table 1
SID     | Statement         | Language
1   | Have a cup of coffee      | English
2   | Have a cup of green tea       | English

Table 2
AID | Action
1   | recycle the cup
2   | feel full of cafine
3   | throw away the cup
4   | feel healthy
5   | jump

Table 3 - relationships

SID | AID
1   | 1
1   | 2
1   | 3
2   | 1
2   | 3
2   | 4 
```

so an example would be:

```
INSERT INTO actions(Action) VALUES ('Go to the pub');
INSERT INTO statements(statement, Language) VALUES ('Have a pint', 'English'); 
```

the relationships would then be, knowing the auto increment values for this example would be 3 and 6:

```
INSERT INTO Relationships(SID,AID) VALUES (3,6); 
```

I need the values 3 and 6 need to be inserted as variables, as a statement such as:

```
INSERT INTO Relationships(SID,AID) VALUES (id1, id2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:18:37.557

尝试这个

```
INSERT INTO actions(Action) VALUES ('Go to the pub');
SET @aid = LAST_INSERT_ID();

INSERT INTO statements(statement, Language) VALUES ('Have a pint', 'English');
SET @sid = LAST_INSERT_ID();

INSERT INTO Relationships(SID,AID) VALUES (@sid,@aid); 
```

# r - 通过文本标题将数字行数据拆分为新列

> ID：16093950
> 
> 赞同：0
> 
> 时间：2013-04-18T22:11:02.397
> 
> 标签：r

我有一个关于 R 中数据操作的问题。我试图分析的“.csv”文件包含 2 列，但每列中有多种类型的数据。数据类型由分节符分隔。比如下面。

```
"A","B"
1,2
3,4

"C","D"
5,6
7,8

"E","F"
9,10
11,12 
```

我想转换数据，使每个数据集成为一列。例如，我希望将上述内容转换为：

```
"A","B","C","D","E","F"
1,2,5,6,9,10
3,4,7,8,11,12 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T02:46:54.067

您可以将文本拆分`\n\n`，然后使用`read.csv`，然后`cbind`一起结果

```
txt <- '"A","B"
1,2
3,4

"C","D"
5,6
7,8

"E","F"
9,10
11,12'

do.call(cbind, lapply(unlist(strsplit(txt, split='\n\n')), function(x) read.csv(text=x)))

##  A B C D  E  F
##  1 1 2 5 6  9 10
##  2 3 4 7 8 11 12 
```

此外，如果您必须将文件中的内容作为 1 个字符串读取，则可以使用

```
txt <- readChar('temp.txt', nchars=file.info('temp.txt')$size)
txt
##  [1] "\"A\",\"B\"\r\n1,2\r\n3,4\r\n\r\n\"C\",\"D\"\r\n5,6\r\n7,8\r\n\r\n\"E\",\"F\"\r\n9,10\r\n11,12" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:54:04.237

您可以使用回收来选择 1,4,7 行...然后 2,5,8 行等...例如：

```
 (1:9)[c(TRUE,FALSE,FALSE)]
[1] 1 4 7
> (1:9)[c(FALSE,TRUE,FALSE)]
[1] 2 5 8
> (1:9)[c(FALSE,FALSE,TRUE)]
[1] 3 6 9 
```

使用您的数据，您可以：

```
dat <- read.table(text='"A","B"
1,2
3,4

"C","D"
5,6
7,8

"E","F"
9,10
11,12',sep=',')

 rbind(
  as.character(unlist(dat[c(TRUE,FALSE,FALSE),])),
unlist(dat[c(FALSE,TRUE,FALSE),]),
unlist(dat[c(FALSE,FALSE,TRUE),]))

    V11 V12 V13 V21  V22  V23 
[1,] "A" "C" "E" "B"  "D"  "F" 
[2,] "1" "4" "6" "12" "14" "10"
[3,] "3" "5" "2" "13" "15" "11" 
```

# mysql - arrange sql statement according to meta value not working

> ID：16093955
> 
> 赞同：0
> 
> 时间：2013-04-18T22:11:40.677
> 
> 标签：mysql, wordpress

i'm pulling my hair out here:

I have a sql statement that is part of an ajax call:

```
SELECT $wpdb->commentmeta.meta_value, $wpdb->comments.comment_ID, $wpdb->comments.comment_date, $wpdb->comments.user_id, $wpdb->comments.comment_content, $wpdb->comments.comment_author 
FROM $wpdb->commentmeta 
JOIN $wpdb->comments ON $wpdb->comments.comment_ID = $wpdb->commentmeta.comment_id 
WHERE $wpdb->commentmeta.meta_key = '_commentsvote' 
AND $wpdb->comments.comment_date >='" . $current_year . "-" . $current_month . "-01' 
AND $wpdb->comments.comment_date <='" . $current_year . "-" . $current_month . "-31' 
ORDER BY $wpdb->commentmeta.meta_value DESC 
```

the statement works great, and returns results, however, the order is off. now, i know this is because the meta_value is actually a varchar, and not an int. so, the internets told me to do either a convert or cast:

```
Convert: 
SELECT $wpdb->commentmeta.meta_value, $wpdb->comments.comment_ID, $wpdb->comments.comment_date, $wpdb->comments.user_id, $wpdb->comments.comment_content, $wpdb->comments.comment_author 
FROM $wpdb->commentmeta 
JOIN $wpdb->comments ON $wpdb->comments.comment_ID = $wpdb->commentmeta.comment_id 
WHERE $wpdb->commentmeta.meta_key = '_commentsvote' 
AND $wpdb->comments.comment_date >='" . $current_year . "-" . $current_month . "-01' 
AND $wpdb->comments.comment_date <='" . $current_year . "-" . $current_month . "-31' 
ORDER BY CONVERT(INT, $wpdb->commentmeta.meta_value) DESC

CAST
SELECT $wpdb->commentmeta.meta_value, $wpdb->comments.comment_ID, $wpdb->comments.comment_date, $wpdb->comments.user_id, $wpdb->comments.comment_content, $wpdb->comments.comment_author 
FROM $wpdb->commentmeta 
JOIN $wpdb->comments ON $wpdb->comments.comment_ID = $wpdb->commentmeta.comment_id 
WHERE $wpdb->commentmeta.meta_key = '_commentsvote' 
AND $wpdb->comments.comment_date >='" . $current_year . "-" . $current_month . "-01' 
AND $wpdb->comments.comment_date <='" . $current_year . "-" . $current_month . "-31' 
ORDER BY CAST($wpdb->commentmeta.meta_value AS INT) DESC 
```

I keep getting sql errors on both of these when i run it as a sql statement (obviously, i convert the $wpdp to just say wp_) out of wordpress. the error is non specific - i.e. "you have an error near as int" for example.

so, two questions, first one is wp specific, and the second is a sql:

1.  i'm pretty sure there's a way to write all this as an arg array i can pass into wp_query, but i'm unsure of how to do a join. code examples here would be super helpful.
2.  why why WHY is this sql statement unwilling to convert that last colomn to an int?

Thanks Wp and SQL geniuses for reading!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:19:50.203

简短的版本是你不能`CONVERT`-`INT`正确的类型是`SIGNED`. 阅读更多关于[`CAST`和`CONVERT`](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_convert)。也就是说，您应该进行一些其他更改以使代码更具可读性和安全性。

首先，如果您使用表别名，您可以减少`$wpdb`多次引用的需要，并且它可以使更复杂的查询更具可读性（例如，如果您在不同的键上多次加入元表）。

更重要的是，您应该使用`$wpdb->prepare()`转义 SQL - 将变量插入语句中要求进行 SQL 注入。`BETWEEN`利用和`DATE_ADD`为您的条款可能也很有意义`WHERE`- 并非所有月份都有 31 天。如果您确实想传递开始和结束日期，您仍应`%s`在 SQL 中用作占位符并用于`prepare()`填充它。

```
global $wdbp;

$sql = <<<SQL
    SELECT votes.meta_value, c.comment_ID, c.comment_date, c.user_id, c.comment_content, c.comment_author
    FROM {$wpdb->comments} c
    JOIN {$wpdb->commentmeta} votes 
        ON votes.comment_id = c.comment_ID AND votes.meta_key = '_commentsvote'
    WHERE
        c.comment_date BETWEEN %s AND DATE_ADD(%s, INTERVAL 1 MONTH)
    ORDER BY CONVERT(votes.meta_value, SIGNED)
SQL;

$date = "{$current_year}-{$current_month}-01";
$query = $wpdb->prepare( $sql, $date, $date );
$results = $wpdb->get_results( $query ); 
```

# ruby-on-rails - 带有验证 ruby on rails 的单表继承

> ID：16093956
> 
> 赞同：0
> 
> 时间：2013-04-18T22:11:41.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-4

如果我有这样的模型：

```
class Transaction < ActiveRecord
    # create table called transactions and add type column to it.  
    # add common methods inside this class
end

class CashTransaction < Transaction
     # the type column will be CashTransaction and used to determine entry for this class in transactions table 
end

class CreditCardTransaction < Transaction
    validates :settled, :presence => true
    # the type column will be CreditCardTransaction and used to determine entry for this class in  transactions table 
end 
```

如何应用 CreditCardTransaction 独有的验证？那么父类 Transaction 和 CashTransaction 不需要验证交易是否已结算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T01:16:37.640

您的示例代码是正确的。

在 Rails 3 中，在子类中调用的验证仅适用于该子类的实例（除了超类验证）。超类验证适用于所有子类。

记住在使用 STI 时只使用子类。换句话说，*永远不要*以任何理由实例化超类。这样做会干扰 Rails 的内部 STI 魔法酱，让你有意想不到的行为和丑陋的 hack 来让事情重新工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T23:00:28.553

嗯...我认为您有一个列表明这是`CreditCardTransation`. 因此，您可以在范围内使用验证器：

[使用范围条件进行 Rails 3 验证](https://stackoverflow.com/questions/10216441/rails-3-validation-with-scope-conditions)

# jsf - 如何使用 commandLInk 发送值

> ID：16093962
> 
> 赞同：0
> 
> 时间：2013-04-18T22:12:01.277
> 
> 标签：jsf, parameters, datatable, commandlink

我有一个名为`clController`. 这个控制器有`code`属性，我想给这个`code`属性发送一个值。

```
<h:form>
    <h:inputHidden value="#{item.code}" />
    <h:commandLink action="#{clController.getByCode()}" value="#{item.code}" />
</h:form> 
```

上面的代码在数据表中。如何将 item.code 值发送到此属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:01:14.640

您可以使用

```
<f:setPropertyActionListener target="#{clController.code}" value="#{item.code}"> 
```

如果您使用 JSF 2.0，或者只是将您的操作方法的签名更改为`getByCode(YourClass code)`并将值作为参数传递

```
<h:commandLink action="#{clController.getByCode(item.code)}" value="#{item.code}" /> 
```

# git - git push origin prod 和 git push origin prod:refs/heads/prod 之间的区别

> ID：16093964
> 
> 赞同：1
> 
> 时间：2013-04-18T22:12:09.937
> 
> 标签：git, git-branch

当我创建一个新分支然后想要远程推送它时，我可以这样做：

> git push origin prod

或者

> git push origin prod:refs/heads/prod

有什么区别 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T22:16:06.307

在香草配置上，没有区别。

但是，可以使用 .git/config 中的自定义推送分支规范来配置遥控器。在这种情况下，在服务器端指定显式引用名称`local_ref_name:remote_ref_name`会覆盖配置的映射。

如果您*刚刚添加*了一个新的遥控器，并且想第一次推送，您至少*需要指定要推送的分支。*在这种情况下

```
git push origin prod
git push origin prod:prod
git push origin prod:refs/heads/prod 
```

本来都是等价的。最后的琐事：

```
git push origin :prod 
```

将*删除*`prod`在远程端命名的 ref 。

# python - Python：如何从网页中收集和解析 csv 数据？

> ID：16093966
> 
> 赞同：0
> 
> 时间：2013-04-18T22:12:15.393
> 
> 标签：python, csv, cgi, urllib

我有一个使用 cgi 脚本打印出 csv 数据的网页。我想使用 Python 解析数据。到目前为止，我知道我可以使用 urllib 来请求 url 并将 html 获取到一个巨大的字节字符串中。但是，它包含的远不止我需要的 csv 数据，包括 html 标签、换行符等……我想用这些数据做的是能够过滤行和列。这些数据最终将进入另一个 csv 文件，我可以将其用作数据以显示在图表（高图）中。

如何仅解析 csv 的 html？是否有一个库可以将 csv 收集到字典甚至更好的 csv 文件中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:51:22.273

尝试

1）使用你提到的 urllib

2）使用[美丽的汤](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)来获取您需要的部分文件

3) 使用标准[csv 解析器](http://pymotw.com/2/csv/)或[pandas](http://pandas.pydata.org/pandas-docs/stable/io.html#csv-text-files)解析您在上一步收到的数据

# php - How to find a string in a variable using PHP and regular expressions

> ID：16093968
> 
> 赞同：0
> 
> 时间：2013-04-18T22:12:28.337
> 
> 标签：php, regex

I am trying to find the word and add a number next to it. How could he do? I tried with the code below, but I could not. Could anyone help me? Thank you!

```
$string = 'I220ABCD I220ABCDEF I220ABCDEFG'
if (preg_match("/I220.*/", $string, $matches)) {
    echo $matches[0];
} 
```

Expected result: I220ABCD9 I220ABCDEF10 I220ABCDEFG11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:14:41.813

像这样使用[`preg_replace_callback`](http://php.net/manual/en/function.preg-replace-callback.php)：

```
$str = 'I220AB FRRRR CD I221ABCDEF I220AB DSFDSF CDEFG';
$repl= preg_replace_callback('~(I220[^\s]+)~', function($m) {
         static $i=9;
         return $m[1] . $i++;
       }, $str);

echo $repl\n"; // I220AB9 FRRRR CD I221ABCDEF I220AB10 DSFDSF CDEFG 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:15:32.287

你需要在你的正则表达式中使用一个 catch 块`"/I220([^ ]+)/"`，如果你想要它们，你也需要使用[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T22:20:48.407

我不知道您在最后添加数字的要求是什么，所以我只是在循环期间增加了；

```
$string = 'I220ABCD I220ABCDEF I220ABCDEFG';

$arrayStrings = explode(" ", $string);
$int = 9;
$newString = '';

foreach($arrayStrings as $stringItem)
{   
    if (preg_match("/I220.*/", $stringItem, $matches)) 
    {

        $stringItem = $stringItem.$int;
        $newString = $newString.$stringItem." ";
        $int++;
    }
}

echo $newString; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T22:25:08.177

使用[preg_replace_callback()](http://php.net/manual/en/function.preg-replace-callback.php)：

```
$string = 'I220ABCD I220ABCDEF I220ABCDEFG';
// This requires PHP5.3+ since it's using an anonymous function
$result = preg_replace_callback('/I220[^\s]*/', function($match){
    return($match[0].rand(0,10000)); // Add a random number between 0-10000
}, $string);

echo $result; // I220ABCD3863 I220ABCDEF5640 I220ABCDEFG989 
```

[在线演示](http://codepad.viper-7.com/gd510a)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T22:31:46.377

preg_replace_callback 满足您的需求：

```
 $string = 'I220ABCD I220ABCDEF I220ABCDEFG';

   class MyClass{

       private static $i = 9;

       private static function callback($matches){
           return $matches[0] . self::$i++;
       }

       public static function replaceString($string){
            return preg_replace_callback('/I220[^\s]+/',"self::callback",$string);  
       }
   }

   echo(MyClass::replaceString($string)); 
```

当然你可以编辑类来初始化你想要的方式

# playframework - Play SecureSocial 中的代币

> ID：16093973
> 
> 赞同：1
> 
> 时间：2013-04-18T22:12:37.770
> 
> 标签：playframework, securesocial

SecureSocial 中的 Token 对象可以保留在带有 hashmaps 的 java COde 中，还是您建议创建一个模型并将其保存在数据库中？

如果我把它留在哈希图中会有影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:14:01.223

模型和数据库是最好的选择，而不是哈希图。hashmap 不会支持重启。

# java - 如何使用 imageviews 和 Textviews 创建微调器

> ID：16093978
> 
> 赞同：0
> 
> 时间：2013-04-18T22:13:04.807
> 
> 标签：java, android, spinner, adapter

我想创建一个带有名称列表的微调器，以及来自许多 .jpg 的 id 列表

我有一个带有 String[] 的类，其中包含名称，以及带有可绘制对象 ID 的 Integer[]。

我的主要课程是下一个

```
public class Settings extends Activity{

private Button btnGuardar, btnCerrar;
private Spinner spOperadoras, spTarifas;
private Operadoras op = new Operadoras();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings);

    btnGuardar = (Button)findViewById(R.id.buttonSave);
    btnCerrar = (Button)findViewById(R.id.buttonClose);
    spOperadoras = (Spinner)findViewById(R.id.spinnerOperador);
    spTarifas = (Spinner)findViewById(R.id.spinnerTarifas);

    OperadorAdapter adapter = new OperadorAdapter(this,    R.layout.custom_spinner, op);
    spOperadoras.setAdapter(adapter);
}

} 
```

然后我的适配器是：

```
public class OperadorAdapter extends BaseAdapter implements SpinnerAdapter{

Activity context;
int spLayoutId;
Operadoras operadoras;

public OperadorAdapter(Activity context, int id, Operadoras op){
    //super(context, id, op);
    this.context = context;
    this.operadoras = op;
    this.spLayoutId = id;

}
@Override
 public View getDropDownView(int position, View convertView, ViewGroup parent) {
     return getCustomView(position, convertView, parent);
 }

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    return getCustomView(position, convertView, parent);
}

public View getCustomView(int position, View convertView, ViewGroup parent) {

    View item = convertView;
    TextView opName;
    ImageView opIcon;

        LayoutInflater inflater = context.getLayoutInflater();
        item = inflater.inflate(spLayoutId, null);
        opName = (TextView) item.findViewById(R.id.nombreOperador);

        opIcon = (ImageView) item.findViewById(R.id.imageOperador);

    opName.setText(operadoras.getOperador(position).toString());
    opIcon.setImageResource(operadoras.getLogo(position));
    return item;
}
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return 0;
}
@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}
@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
} 
```

但是我的微调器没有结果。

有什么问题？？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:17:40.340

```
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return 0;
} 
```

返回您的实际计数。