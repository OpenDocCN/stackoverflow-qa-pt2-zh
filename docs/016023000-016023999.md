# StackOverflow 问答 16023000-16023999

# parallel-processing - 是否可以使用采样分析器在并行应用程序中找到热点？

> ID：16023000
> 
> 赞同：1
> 
> 时间：2013-04-15T19:11:12.843
> 
> 标签：parallel-processing, profiling, sampling

据我了解，采样分析器的工作方式如下：它定期中断程序执行并读出调用堆栈。它记录程序的哪个部分当前正在执行，并增加一个表示该程序部分的计数器。在后处理步骤中：对于程序的每个功能，计算整个执行时间的比率，该功能负责。这是通过查看此特定函数的计数器 C 和样本总数 N 来完成的：

函数比 = C / N

然后找到热点很容易，因为这是程序中比例很高的部分。

但是对于在并行硬件上运行的并行程序，如何做到这一点。据我所知，当程序执行被中断时，所有处理器上的程序执行部分都会被确定。因此，并行执行的函数会被多次计数。因此，该函数的样本数 C 不能再用于计算其在整个执行时间中所占的份额。

我的想法正确吗？是否有其他方法可以识别并行程序的热点 - 或者这只是不可能使用采样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T11:44:00.510

你在正确的轨道上。是否需要对所有线程进行采样取决于它们是在做相同的事情还是不同的事情。不必同时对它们进行采样。您需要查看实际工作的线程，而不仅仅是空闲的线程。几点：

*   采样应该是**挂钟时间**，而不是 CPU 时间，除非你想对不必要的 I/O 和其他阻塞调用视而不见。

*   您不仅对堆栈上的哪些函数感兴趣，还对哪些**代码行**感兴趣，因为它们传达了所花费时间的目的。寻找“热点目的”比寻找“热点”更有用。

*   函数或代码行的成本只是它出现**的样本的一小部分。**为了理解这一点，假设每 10 毫秒采样一次，总共有 N 个样本。如果可以使函数或代码行消失，那么它在堆栈中的所有样本也将消失，将 N 减少该分数。这就是加速。

*   尽管有最后一点，在抽样中，**质量胜过数量**。当目标是了解您有哪些加速机会时，您可以通过手动检查 10 到 20 个样本来了解每个时间都被花费的全部原因，从而获得更快的速度。这就是我手动取样的原因。以统计精度了解时间量实际上远没有那么重要。

*   **发现和解决不止*一个*问题**的重要性，我怎么强调都不为过。速度问题有好几个，你解决的每一个问题都会对已经完成的问题产生乘数效应。你找不到的那些*最终*成为限制因素。

*   涉及大量异步线程间消息传递的程序更加困难，因为更难辨别花费某个时间的全部原因。

[*更多关于那个。*](https://stackoverflow.com/a/378024/23771)

# c++ - SSE 文档和访问

> ID：16023004
> 
> 赞同：1
> 
> 时间：2013-04-15T19:11:31.817
> 
> 标签：c++, c, gcc, sse

目前我正在通过联合访问我的浮点值

```
typedef union
{
  float v[4];
  _mm128 m;
}SSEFloat; 
```

但在这个[链接](https://stackoverflow.com/questions/15045132/is-accessing-bytes-of-a-m128-variable-via-union-legal)中，我听说性能是损失。GCC 4 有性能损失吗？**浮动**需要对齐吗？也在联盟？或者这样设置值是否正确

```
SSEFloat a;
float tmp = 10.0;
a.m = _mm_load1_ps( &tmp ); 
```

目前我也找不到英特尔 SSE 内在文档 :( 是否有一个“小”列表 - 速度优化需要了解什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:27:54.293

编译器将保证代码将正确执行，但它可能会为了正确性而牺牲性能。由于联合实际上只是增加了访问 4 项浮点向量的各个元素的语法便利，并且 _mm128 对象（从概念上，如果不是实际上）位于寄存器中，我建议您直接使用 _mm128 对象并使用_mm_store_ps和[_mm_load_ps](http://msdn.microsoft.com/en-us/library/yc6byew8%28v=vs.80%29.aspx)系列 API 用于将数据移入和移出对象[。](http://msdn.microsoft.com/en-us/library/ybhzf6dk%28v=vs.80%29.aspx)

您提供的链接中的评论表明编译器可以围绕联合进行不良优化，尤其是使用 _mm128s。如果你想确定这一点，你应该在有和没有联合的情况下进行实验。对于 Linux 中的高分辨率时间测量，我推荐使用[pthread_getcpuclockid](http://linux.die.net/man/3/pthread_getcpuclockid)和[clock_gettime](http://linux.die.net/man/3/clock_gettime) API。如果可以，请发布您的结果！

通常，为了获得最佳性能，请尽可能让编译器简单易行。这意味着将诸如 _mm128 之类的高性能事物排除在联合之类的复杂结构之外，而是将它们声明在堆栈上或明确分配给它们的内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:36:37.240

如果您在联合中使用浮点数，编译器可能会输出非 sse 代码来访问它们，这将影响性能。这实际上取决于您的对象使用情况。您可以在包装结构前面添加 _MM_ALIGN16 (__declspec(align(16)) 并覆盖新和删除运算符（如果您正在编码 C++）。检查这个问题：[SSE、内在函数和对齐](https://stackoverflow.com/questions/12502071/sse-intrinsics-and-alignment)

# java - 在 java 中转义 +- 和 --

> ID：16023005
> 
> 赞同：0
> 
> 时间：2013-04-15T19:11:34.973
> 
> 标签：java, regex, string

我想用 java 中名为 myStr 的字符串替换所有出现的 +- 。我还想用 myStr 中的 + 替换所有出现的 --。以下两行代码在 java 中没有做到这一点：

```
myStr.replaceAll("\\+-", "-");  
myStr.replaceAll("\\--", "+"); 
```

谁能告诉我如何更改这两行代码来完成所需的替换？

我通常会尽量避免使用正则表达式，但不确定如何在没有它们的情况下执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T19:13:54.813

您正在丢弃函数的返回值。您可能想使用：

```
myStr = myStr.replaceAll("\\+-", "-").replaceAll("--", "+"); 
```

* * *

[更新评论中的其他信息：]

一定要保留 的返回值`replaceAll`。

```
myStr = myStr.replaceAll("\\+-", "-"); 
```

然后

```
myStr = myStr.replaceAll("--", "+"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:58:39.310

```
public static String escapePlusMinus(String myStr) {
    Pattern pattern = Pattern.compile("[+-]-");
    Matcher matcher = pattern.matcher(myStr);
    StringBuffer result = new StringBuffer();

    while (matcher.find()) {
        if (matcher.group(0).equals("+-")) {
            matcher.appendReplacement(result, "-");
        }
        else {
            matcher.appendReplacement(result, "+");
        }
    }
    matcher.appendTail(result);

    return result.toString();
} 
```

`escapePlusMinus("+-, --, +-, ---+---")`⇒`"-, +, -, +--+"`

最后一个令牌匹配为：

1.  `"--"`⇒`"+"`
2.  `"-"`跳过，因为没有其他人`"-"`跟随它。
3.  `"+-"`⇒`"-"`
4.  `"--"`⇒`"+"`

# c# - 列表中的列表（关联）

> ID：16023011
> 
> 赞同：0
> 
> 时间：2013-04-15T19:11:49.643
> 
> 标签：c#, forms, list, nested-lists

为了加深我自己的理解，我正在复制一个简单的数据库 - 并且无法理解以下内容；

我有 2 个类城镇和人。一个城镇拥有许多 People 实例，并且设置如下；

```
 public class Town
{
    List<People> collectionOfPeople;

    public string townName { get; set; }

    public Town()
    {
        townName = "Cardiff";

        collectionOfPeople = new List<People>();
        collectionOfPeople.Add(new People("Daniel Smith"));
    }
}

    public class People
{

    public string name { get; set; }

    public People(string tmp_name)
    {
        name = tmp_name;
    }
} 
```

假设我所做的是正确的，Town 有 1 个值（卡迪夫），而 People 也有 1 个（Daniel Smith）或 .. Daniel 住在卡迪夫。

我正在尝试显示居住在镇内的人们的名字.. 以便以后循环浏览它们。（** = 我认为的问题）

```
 private List<Town> townList;
    private List<Town.People> peopleList;              **

    private void ShowData()
    {
        // Add to Text Box based on current Record
        txt_town.Text = townList[0]).townName;
        txt_name.Text = peopleList[0].name;            **
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:24:50.073

这是我的更改。为 Town 类中的 collectionOfPeople 提供公共访问修饰符。

```
public class Town
{
    public List<People> collectionOfPeople;
    public string townName { get; set; }
} 
```

之后，您可以访问 Town 内的 People 实例。像这样的东西：

```
private List<Town> townList = new List<Town>();    
private void ShowData()
{
    // Add to Text Box based on current Record
    txt_town.Text = townList[0].townName;
    txt_name.Text = townList[0].collectionOfPeople[0].name
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:16:56.423

你还没有说你收到了什么错误信息，如果有的话，但我相信为了有

```
Town.People 
```

您需要创建一个名为 People 的 Town 类的属性。我在你的代码中没有看到。

此外，您的行中还有一个额外的括号：

```
txt_town.Text = townList[0].townName: //no ) after [0] 
```

# api - 使用 REST API 将 MongoDB 导入 SQL Sever

> ID：16023012
> 
> 赞同：1
> 
> 时间：2013-04-15T19:11:49.683
> 
> 标签：api, mongodb, rest, ssis, json.net

我一直在 SSIS 脚本任务中使用 DataContractJsonSerializer 来序列化来自 MongoDB 的 REST API 响应并将字段传递到存储过程以填充 SQL Server 表。性能令人沮丧，我正在努力寻找更强大的解决方案。

有人可以推荐更快/更强大的解决方案吗？我是 REST API 世界的新手，目前我的 JSON 经验非常有限。

是否有任何 JSON.Net 端到端示例展示了类似的解决方案？

谢谢，

将法德尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:18:56.073

您是否考虑过使用[Mongo Export 实用程序](http://docs.mongodb.org/manual/reference/mongoexport/)？您可以将 Mongo 数据导出为 CSV，然后导入平面文件。如果您可以消除使用 SQL Server 解析 JSON 文档的需要，那么您可能会获得更好的性能。

由于 JSON 在 SQL Server 中不是本机数据类型，因此我通常在 SQL Server 中分解 XML 之前将数据直接序列化为 XML 或将 JSON 序列化为 XML。

如果要在 SQL Server 中解析 JSON，[没有好的解决方案](http://njandwani.wordpress.com/2013/02/17/load-json-to-sql-server-challenges-and-alternativesmongodb/)。下面是我从网上获得的用于解析 JSON 的表值函数的修改版本。尽管它适用于较小的文档，但它并不能扩展到非常非常大的文档。最后，我发现使用 NewtonSoft .NET 扩展从 JSON 序列化到 XML 比在 SQL Server 中分解文本执行得更好。

```
CREATE FUNCTION [Resource].[ParseJson] (@JSON NVARCHAR(MAX))
RETURNS @Hierarchy TABLE
  (
   ElementId INT IDENTITY(1, 1) NOT NULL, /* internal surrogate primary key gives the order of parsing and the list order */
   ParentId INT,/* if the element has a parent then it is in this column. The document is the ultimate parent, so you can get the structure from recursing from the document */
   ObjectId INT,/* each list or object has an object id. This ties all elements to a parent. Lists are treated as objects here */
   ObjectName NVARCHAR(2000),/* the name of the object */
   StringValue NVARCHAR(MAX) NOT NULL,/*the string representation of the value of the element. */
   ValueType VARCHAR(10) NOT null /* the declared type of the value represented as a string in StringValue*/
  )
AS
BEGIN
  DECLARE
    @FirstObject INT, --the index of the first open bracket found in the JSON string
    @OpenDelimiter INT,--the index of the next open bracket found in the JSON string
    @NextOpenDelimiter INT,--the index of subsequent open bracket found in the JSON string
    @NextCloseDelimiter INT,--the index of subsequent close bracket found in the JSON string
    @Type NVARCHAR(10),--whether it denotes an object or an array
    @NextCloseDelimiterChar CHAR(1),--either a '}' or a ']'
    @Contents NVARCHAR(MAX), --the unparsed contents of the bracketed expression
    @Start INT, --index of the start of the token that you are parsing
    @end INT,--index of the end of the token that you are parsing
    @param INT,--the parameter at the end of the next Object/Array token
    @EndOfName INT,--the index of the start of the parameter at end of Object/Array token
    @token NVARCHAR(200),--either a string or object
    @value NVARCHAR(MAX), -- the value as a string
    @name NVARCHAR(200), --the name as a string
    @ParentId INT,--the next parent ID to allocate
    @lenJSON INT,--the current length of the JSON String
    @characters NCHAR(36),--used to convert hex to decimal
    @result BIGINT,--the value of the hex symbol being parsed
    @index SMALLINT,--used for parsing the hex value
    @Escape INT --the index of the next escape character

  DECLARE @Strings TABLE /* in this temporary table we keep all strings, even the names of the elements, since they are 'escaped' in a different way, and may contain, unescaped, brackets denoting objects or lists. These are replaced in the JSON string by tokens representing the string */
    (
     String_ID INT IDENTITY(1, 1),
     StringValue NVARCHAR(MAX)
    )
  SELECT--initialise the characters to convert hex to ascii
    @characters='0123456789abcdefghijklmnopqrstuvwxyz',
  /* firstly we process all strings. This is done because [{} and ] aren't escaped in strings, which complicates an iterative parse. */
    @ParentId=0;
  WHILE 1=1 --forever until there is nothing more to do
    BEGIN
      SELECT
        @start=PATINDEX('%[^a-zA-Z]["]%', @json collate SQL_Latin1_General_CP850_Bin);--next delimited string
      IF @start=0 BREAK --no more so drop through the WHILE loop
      IF SUBSTRING(@json, @start+1, 1)='"' 
        BEGIN --Delimited Name
          SET @start=@Start+1;
          SET @end=PATINDEX('%[^\]["]%', RIGHT(@json, LEN(@json+'|')-@start) collate SQL_Latin1_General_CP850_Bin);
        END
      IF @end=0 --no end delimiter to last string
        BREAK --no more
      SELECT @token=SUBSTRING(@json, @start+1, @end-1)
      --now put in the escaped control characters
      SELECT @token=REPLACE(@token, FROMString, TOString)
      FROM
        (SELECT
          '\"' AS FromString, '"' AS ToString
         UNION ALL SELECT '\\', '\'
         UNION ALL SELECT '\/', '/'
         UNION ALL SELECT '\b', CHAR(08)
         UNION ALL SELECT '\f', CHAR(12)
         UNION ALL SELECT '\n', CHAR(10)
         UNION ALL SELECT '\r', CHAR(13)
         UNION ALL SELECT '\t', CHAR(09)
        ) substitutions
      SELECT @result=0, @escape=1
  --Begin to take out any hex escape codes
      WHILE @escape>0
        BEGIN
          SELECT @index=0,
          --find the next hex escape sequence
          @escape=PATINDEX('%\x[0-9a-f][0-9a-f][0-9a-f][0-9a-f]%', @token collate SQL_Latin1_General_CP850_Bin)
          IF @escape>0 --if there is one
            BEGIN
              WHILE @index<4 --there are always four digits to a \x sequence   
                BEGIN 
                  SELECT --determine its value
                    @result=@result+POWER(16, @index)
                    *(CHARINDEX(SUBSTRING(@token, @escape+2+3-@index, 1),
                                @characters)-1), @index=@index+1 ;

                END
                -- and replace the hex sequence by its unicode value
              SELECT @token=STUFF(@token, @escape, 6, NCHAR(@result))
            END
        END
      --now store the string away 
      INSERT INTO @Strings (StringValue) SELECT @token
      -- and replace the string with a token
      SELECT @JSON=STUFF(@json, @start, @end+1,
                    '@string'+CONVERT(NVARCHAR(5), @@identity))
    END
  -- all strings are now removed. Now we find the first leaf.  
  WHILE 1=1  --forever until there is nothing more to do
  BEGIN
  SELECT @ParentId=@ParentId+1
  --find the first object or list by looking for the open bracket
  SELECT @FirstObject=PATINDEX('%[{[[]%', @json collate SQL_Latin1_General_CP850_Bin)--object or array
  IF @FirstObject = 0 BREAK
  IF (SUBSTRING(@json, @FirstObject, 1)='{') 
    SELECT @NextCloseDelimiterChar='}', @type='object'
  ELSE 
    SELECT @NextCloseDelimiterChar=']', @type='array'
  SELECT @OpenDelimiter=@firstObject
  WHILE 1=1 --find the innermost object or list...
    BEGIN
      SELECT
        @lenJSON=LEN(@JSON+'|')-1
  --find the matching close-delimiter proceeding after the open-delimiter
      SELECT
        @NextCloseDelimiter=CHARINDEX(@NextCloseDelimiterChar, @json,
                                      @OpenDelimiter+1)
  --is there an intervening open-delimiter of either type
      SELECT @NextOpenDelimiter=PATINDEX('%[{[[]%',
             RIGHT(@json, @lenJSON-@OpenDelimiter)collate SQL_Latin1_General_CP850_Bin)--object
      IF @NextOpenDelimiter=0 
        BREAK
      SELECT @NextOpenDelimiter=@NextOpenDelimiter+@OpenDelimiter
      IF @NextCloseDelimiter<@NextOpenDelimiter 
        BREAK
      IF SUBSTRING(@json, @NextOpenDelimiter, 1)='{' 
        SELECT @NextCloseDelimiterChar='}', @type='object'
      ELSE 
        SELECT @NextCloseDelimiterChar=']', @type='array'
      SELECT @OpenDelimiter=@NextOpenDelimiter
    END
  ---and parse out the list or name/value pairs
  SELECT
    @contents=SUBSTRING(@json, @OpenDelimiter+1,
                        @NextCloseDelimiter-@OpenDelimiter-1)
  SELECT
    @JSON=STUFF(@json, @OpenDelimiter,
                @NextCloseDelimiter-@OpenDelimiter+1,
                '@'+@type+CONVERT(NVARCHAR(5), @ParentId))
  WHILE (PATINDEX('%[A-Za-z0-9@+.e]%', @contents collate SQL_Latin1_General_CP850_Bin))<>0 
    BEGIN
      IF @Type='Object' --it will be a 0-n list containing a string followed by a string, number,boolean, or null
        BEGIN
          SELECT
            @end=CHARINDEX(':', ' '+@contents)--if there is anything, it will be a string-based name.
          SELECT  @start=PATINDEX('%[^A-Za-z@][@]%', ' '+@contents collate SQL_Latin1_General_CP850_Bin)--AAAAAAAA
          SELECT @token=SUBSTRING(' '+@contents, @start+1, @End-@Start-1),
            @endofname=PATINDEX('%[0-9]%', @token collate SQL_Latin1_General_CP850_Bin),
            @param=RIGHT(@token, LEN(@token)-@endofname+1)
          SELECT
            @token=LEFT(@token, @endofname-1),
            @Contents=RIGHT(' '+@contents, LEN(' '+@contents+'|')-@end-1)
          SELECT  @name=stringvalue FROM @strings
            WHERE string_id=@param --fetch the name
        END
      ELSE 
        SELECT @Name=null  
      SELECT
        @end=CHARINDEX(',', @contents)-- a string-token, object-token, list-token, number,boolean, or null
      IF @end=0 
        SELECT @end=PATINDEX('%[A-Za-z0-9@+.e][^A-Za-z0-9@+.e]%', @Contents+' ' collate SQL_Latin1_General_CP850_Bin)
          +1
      SELECT
        @start=PATINDEX('%[^A-Za-z0-9@+.e][A-Za-z0-9@+.e]%', ' '+@contents collate SQL_Latin1_General_CP850_Bin)
      --select @start,@end, LEN(@contents+'|'), @contents  
      SELECT
        @Value=RTRIM(SUBSTRING(@contents, @start, @End-@Start)),
        @Contents=RIGHT(@contents+' ', LEN(@contents+'|')-@end)
      IF SUBSTRING(@value, 1, 7)='@object' 
        INSERT INTO @hierarchy
          (ObjectName, ParentId, StringValue, ObjectId, ValueType)
          SELECT @name, @ParentId, SUBSTRING(@value, 8, 5),
            SUBSTRING(@value, 8, 5), 'object' 
      ELSE 
        IF SUBSTRING(@value, 1, 6)='@array' 
          INSERT INTO @hierarchy
            (ObjectName, ParentId, StringValue, ObjectId, ValueType)
            SELECT @name, @ParentId, SUBSTRING(@value, 7, 5),
              SUBSTRING(@value, 7, 5), 'array' 
        ELSE 
          IF SUBSTRING(@value, 1, 7)='@string' 
            INSERT INTO @hierarchy
              (ObjectName, ParentId, StringValue, ValueType)
              SELECT @name, @ParentId, stringvalue, 'string'
              FROM @strings
              WHERE string_id=SUBSTRING(@value, 8, 5)
          ELSE 
            IF @value IN ('true', 'false') 
              INSERT INTO @hierarchy
                (ObjectName, ParentId, StringValue, ValueType)
                SELECT @name, @ParentId, @value, 'boolean'
            ELSE 
              IF @value='null' 
                INSERT INTO @hierarchy
                  (ObjectName, ParentId, StringValue, ValueType)
                  SELECT @name, @ParentId, @value, 'null'
              ELSE 
                IF PATINDEX('%[^0-9]%', @value collate SQL_Latin1_General_CP850_Bin)>0 
                  INSERT INTO @hierarchy
                    (ObjectName, ParentId, StringValue, ValueType)
                    SELECT @name, @ParentId, @value, 'real'
                ELSE 
                  INSERT INTO @hierarchy
                    (ObjectName, ParentId, StringValue, ValueType)
                    SELECT @name, @ParentId, @value, 'int'
    END
  END
INSERT INTO @hierarchy (ObjectName, ParentId, StringValue, ObjectId, ValueType)
  SELECT '-', NULL, '', @ParentId-1, @type
--
   RETURN
END 
```

# c - 如何正确使用结构内的指针数组

> ID：16023013
> 
> 赞同：1
> 
> 时间：2013-04-15T19:11:54.240
> 
> 标签：c, pointers, memory-management, malloc, structure

如您在下面的代码中所见，我有两个结构父子结构。父结构有一个子类型的指针数组。程序进入 for 循环时出现分段错误。我的代码有什么问题吗？我不想使用方括号的原因是我有一个函数，它接受一个子类型的指针参数，我想将每个子指针传递给该函数而不需要使用 &。

任何帮助将不胜感激谢谢

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef struct {
   int id;
} child;

typedef struct {
   child** c;
} parent;

int main(int argc, char **argv) {
    int number_of_children = 5;

parent* p = (parent*)malloc(sizeof(parent));

p -> c = (child **) malloc(number_of_children * sizeof(child*));

int i;
for(i=0; i<number_of_children; i++)
    p -> c[i] -> id = i;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T19:13:47.613

您正在正确分配子指针表，但您没有分配任何子指针。

```
int i
for(i = 0; i < number_of_children; ++i) {
    p->c[i] = (child *) malloc(sizeof(child));
    p -> c[i] -> id = i
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:21:37.793

未经测试，但应该是这样的：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef struct {
   int id;
} child;

typedef struct {
   child** c;
} parent;

int main(int argc, char **argv) {
    const int number_of_children = 5;

    parent* p = malloc(sizeof(parent));
    if(p == NULL) halt_and_catch_fire();

    p->c = malloc(number_of_children * sizeof(child*));
    if(p->c == NULL) halt_and_catch_fire();    

    for(int i=0; i<number_of_children; i++)
    {
        p->c[i] = malloc(sizeof(child));
        if(p->c[i] == NULL) halt_and_catch_fire();

        p->c[i]->id = i;
    }

    // free() *everything* allocated
} 
```

正如我们所看到的，您正在尝试分配一个分段的指针到指针的东西，这显然没有必要，因为您分配的不是超过一个最内层的对象。如果你试图创建一个多维数组，你不应该把分段弄得一团糟，[而是这样做](https://stackoverflow.com/questions/12462615/how-do-i-correctly-set-up-access-and-free-a-multidimensional-array-in-c)。

# javascript - 在已更改选择的更改事件上触发函数

> ID：16023024
> 
> 赞同：0
> 
> 时间：2013-04-15T19:12:20.960
> 
> 标签：javascript, jquery, forms, select, onchange

我有一个包含三个选择字段的表单。我希望第二个选择基于第一个选择填充，然后第三个选择基于第二个选择填充。所以属性类型->县->市。我的js的一个基本思路如下。

```
$('.property_type').change(function(){
if(this.value == 'com'){
    $('.property_detail_county').html('MY HTML');
}else if((this.value == 'res')){
    $('.property_detail_county').html('MORE HTML');

} 
```

所有这些都在 .ready() 中。这工作正常。我的问题是，当您尝试编写用于填充第二个选择（城市）的第二个函数时，它不会触发任何东西。这是我的第二个函数，也在 ready 里面。

```
$('.property_detail_county').change(function(){
console.log('Changed'); 
```

});

我的理论是，由于这种情况，第二个函数永远不会被读取或加载。你们知道另一种方法吗？

提前致谢。

Ps 如果这已经回答了，请随时指出我正确的方向，我在任何地方都找不到主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:21:35.733

这取决于您放在第二个下拉列表中的 HTML。例如，如果 HTML 是这样的：

```
<div id="a"><select>...</select></div>

<div id="b">...</div> 
```

你的 javascript 会这样做：

```
if(this.value == 'com'){
    $('.property_detail_county').html('<select>...</select>');
} 
```

您已经完全替换了第二个 select 语句，甚至没有与之相关的任何更改。更改甚至与`<select>`您替换的旧版本相关联。

您可以只恢复更改代码：

```
if(this.value == 'com'){
    $('#b').html('<select id="sel_b">...</select>');
    $("#sel_b").click(function() {
        ... the stuff to do when 2nd one is clicked ...
    }
} 
```

如果你定义一个函数来处理第二组东西，它真的会更好。

*注意*还有其他方法可以做到这一点，您可以检测更改事件，因为它会冒泡到`<div>`DOM 树上更高的一个或某个元素。您可以在 jQuery 文档中阅读相关内容。它被称为“事件委托”。

# unity3d - 如何让 Unity3d 移动桌子上的物体？

> ID：16023026
> 
> 赞同：0
> 
> 时间：2013-04-15T19:12:24.570
> 
> 标签：unity3d, game-physics

我正在开发用户使用手机中的加速度计控制的桌面游戏。它与 iOS 上的迷宫非常相似。

该场景包含一个使用平面和立方体创建的桌面，以及一个作为球体的球体。由于它在迷宫游戏中工作，倾斜的手机球应该落到倾斜的一侧，而相机保持在桌面的中心。我正在尝试做类似的事情，用户倾斜手机，桌子上的物体移动到倾斜的一侧。

目前，我在倾斜时将 x 和 z 分量添加到 Physics.gravity。可悲的是，这种重力变化不会影响留在桌子上的球。球选择使用重力，最初从高处落到桌面，然后停止。在初始下降后，球不会对任何重力变化做出反应。

我也尝试过旋转整个表格，但使用 transform.rotate 也不起作用。桌子和相机一起完美地旋转，但球仍然悬在空中。所以，目前我对这个问题没有深入了解。

有没有其他方法可以记录倾斜动作，使球向倾斜方向移动？我不能使用 addforce 函数，因为有多个对象需要对倾斜做出反应，并且很难跟踪那么多 addforce 调用。我还能如何让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T02:12:33.303

有关一些相关信息，请参阅[此帖子](https://stackoverflow.com/questions/15682664/in-unity-physics-gravity-for-x-z-directions-are-not-working-in-one-script/15773445#15773445)。

至于为什么你的球体粘在桌子上，我可以假设你的球体有刚体吗？如果是这样，您需要将其唤醒：

> if (rigidbody.IsSleeping())rigidbody.WakeUp();

理想情况下，您仅在检测到方向/重力变化后才进行该调用，而不是每一帧。

# c++ - 在不调用构造函数的情况下在对象数组中分配内存？

> ID：16023047
> 
> 赞同：0
> 
> 时间：2013-04-15T19:13:35.777
> 
> 标签：c++, arrays

我想创建一个简单的模板数组列表类但是当我做类似的事情时

```
T* typeArray = new T[10]; 
```

这会创建 10 个对象实例，调用构造函数 10 次。如果我以后可以放置对象，我该如何创建一个空数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T19:14:53.057

这不是在 C++ 中做事的首选方式，但

```
T* my_array = (T*)malloc(10 * sizeof(T)); 
```

更符合标准 C++ 实践的解决方案是

```
std::vector<T> my_vector;
my_vector.reserve(10); 
```

请注意，（正如评论中提到的）解决方案的`reserve`不同之处在于，如果没有进一步的操作`my_vector[5]`，则无效，而有效`my_array[5]`。您随后将需要类似`my_vector.resize(10)`的东西来索引它，这将构建所有 10 个项目。`push_back(T const&)`您可以通过执行或从前到后构造它们`emplace_back(Args...&& args)`。只有以这种方式构建后，`[]`索引才是合法的。作为警告，`[]`即使是非法的，索引也可能起作用，但它是未定义的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T19:33:59.223

```
template<typename T>
struct RawMem {
  alignas(T) unsigned char data[sizeof(T)];
  T& get_unsafe() { return *reinterpret_cast<T*>(&data[0]); }
  T const& get_unsafe() const { return *reinterpret_cast<T const*>(&data[0]); }
  template<typename... Args>
  void Construct( Args&&... args ) {
    new (&data[0]) T( std::forward<Args>(args)... );
  }
  void Destroy() {
    get_unsafe().~T();
  }
};

RawMem<std::string>* buff = new RawMem<std::string>[10];
for (int i = 0; i < 10; ++i) {
  buff[i].Construct( "bob is your uncle" );
}
for (int i = 0; i < 10; ++i) {
  std::cout << buff[i].get_unsafe() << "\n";
}
for (int i = 0; i < 10; ++i) {
  buff[i].Destroy();
}
delete buff; 
```

请注意，当调用析构函数时，您完全负责处理，而当不调用时，使用上述模式。

我包括了助手`Construct`和`Destroy`函数，这样你就不必自己弄乱放置`new`等。同样，`get_unsafe()`将让您在需要时获得`T&`实例。

以上使用 C++11 `alignas`，因为在 C++03 中没有办法解决这个问题。

# sql - 使用返回 null 的子查询进行查询

> ID：16023050
> 
> 赞同：1
> 
> 时间：2013-04-15T19:13:45.787
> 
> 标签：sql, oracle, subquery, left-join

我有一个查询可以提取有关用户的信息。用户可能没有、一个或多个电话号码。我要做的是让用户最新的电话号码（由 seq 号码确定）加入到带有其他基本人口统计数据的查询中。我面临的问题是，如果我的子查询返回 null 并且用户没有出现在我的查询中。如何处理子查询中的空值以便仍然返回这些行？

```
SELECT  SPRIDEN.SPRIDEN_ID AS Student_ID ,
        saradap.SARADAP_APST_CODE ,
        saradap.SARADAP_PIDM ,
        spriden.spriden_first_name ,
        spriden.spriden_last_name ,
        saradap.saradap_program_1 ,
        spraddr.SPRADDR_STREET_LINE1 ,
        spraddr.spraddr_city ,
        spraddr.spraddr_zip ,
        spraddr.spraddr_stat_code ,
        saradap.SARADAP_APPL_DATE ,
        'Individual' AS Account_Name ,
        saradap.SARADAP_CAMP_CODE ,
        CONCAT(sprtele_phone_area, sprtele_phone_number) "Phone" ,
        sprtele_tele_code ,
        sorcont_ctyp_code ,
        sorcont_contact_date ,
        sorcont.sorcont_activity_date
FROM    saradap
        LEFT JOIN spriden ON saradap.saradap_pidm = spriden_pidm
        LEFT JOIN spraddr ON saradap.saradap_pidm = spraddr.spraddr_pidm
        LEFT  JOIN sprtele ON saradap.saradap_pidm = sprtele.sprtele_pidm
        LEFT JOIN sorcont ON saradap.saradap_pidm = sorcont.sorcont_pidm
WHERE   spriden.spriden_change_ind IS NULL
        AND ( saradap.SARADAP_CAMP_CODE = 'D'
              OR saradap.SARADAP_CAMP_CODE = 'JD'
            )
        AND saradap.saradap_appl_date > SYSDATE - 15
        AND spraddr.spraddr_seqno = ( SELECT    MAX(spraddr.spraddr_seqno)
                                      FROM      spraddr
                                      WHERE     saradap.SARADAP_PIDM = spraddr.spraddr_pidm
                                    )
        AND sprtele_seqno = ( SELECT    MAX(SPRTELE_SEQNO)
                              FROM      SATURN.SPRTELE
                              WHERE     sprtele_pidm = saradap.saradap_pidm
                            ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:24:39.917

我会将逻辑移动到`from`子句中的子查询中。使用分析函数来获取您想要的电话号码和地址，同时省去子查询：

```
SELECT . . .
FROM    saradap
        LEFT JOIN spriden
        ON saradap.saradap_pidm = spriden_pidm
        LEFT JOIN (select s.*, row_number() over (partition by spraddr_pidm order by spraddr_seqno desc) as seqnum
                   from spraddr
                  ) spraddr
        ON saradap.saradap_pidm = spraddr.spraddr_pidm and seqnum = 1
        LEFT JOIN (select s.*, row_number() over (partition by sprtele_pidm order by sprtele_seqno desc) as seqnum
                   from sprtele
                  ) sprtele
        ON saradap.saradap_pidm = sprtele.sprtele_pidm and seqnum = 1
        LEFT JOIN sorcont
        ON saradap.saradap_pidm = sorcont.sorcont_pidm
WHERE   spriden.spriden_change_ind IS NULL
        AND ( saradap.SARADAP_CAMP_CODE = 'D'
              OR saradap.SARADAP_CAMP_CODE = 'JD'
            )
        AND saradap.saradap_appl_date > SYSDATE - 15 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:58:47.133

Sebas 让我在其中找到了完整的查询。我最终不得不使用 CTE。作为旁注，我是一个新的 stackoverflow 用户，我如何为帮助我找到答案的答案表示赞赏？

```
with
tel(sprtele_pidm, mx) as ( SELECT    sprtele_pidm, MAX(SPRTELE_SEQNO) as "mx"
                    FROM      SATURN.SPRTELE where saturn.sprtele.sprtele_tele_code ='CU'
                    GROUP BY sprtele_pidm
                  ) 
SELECT SPRIDEN.SPRIDEN_ID AS Student_ID,
saradap.SARADAP_APST_CODE,
saradap.SARADAP_PIDM,
spriden.spriden_first_name,
spriden.spriden_last_name,
saradap.saradap_program_1,
spraddr.SPRADDR_STREET_LINE1,
spraddr.spraddr_city,
spraddr.spraddr_zip,
spraddr.spraddr_stat_code,
null as STAVAPDC_DESC,
saradap.SARADAP_APPL_DATE,
'Null' AS remove_reason,
'Individual'         AS Account_Name,
saradap.SARADAP_CAMP_CODE,
CONCAT(sprtele_phone_area,
sprtele_phone_number) "Phone",
sprtele_tele_code,
sorcont_ctyp_code,
sorcont_contact_date,
sorcont.sorcont_activity_date
FROM saradap
left join spriden on saradap.saradap_pidm            = spriden_pidm
left join spraddr on  saradap.saradap_pidm      = spraddr.spraddr_pidm
left join tel on saradap.saradap_pidm = tel.sprtele_pidm
left join sprtele ON saradap.saradap_pidm=sprtele.sprtele_pidm and sprtele.sprtele_pidm = tel.sprtele_pidm and sprtele.sprtele_seqno=tel.mx and sprtele.sprtele_tele_code = 'CU'
left join sorcont ON saradap.saradap_pidm = sorcont.sorcont_pidm
WHERE
spriden.spriden_change_ind     IS NULL
AND (saradap.SARADAP_CAMP_CODE       = 'D' or saradap.SARADAP_CAMP_CODE       = 'JD')
AND saradap.saradap_appl_date > SYSDATE - 7
AND spraddr.spraddr_seqno     =
(SELECT MAX(spraddr.spraddr_seqno)
FROM spraddr
WHERE saradap.SARADAP_PIDM    = spraddr.spraddr_pidm
AND spraddr.spraddr_atyp_code = 'CU'
)
AND spraddr.spraddr_atyp_code = 'CU' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:32:47.490

测试您的子查询是否为 NULL 并返回一个非常大的数字或 0

查看类似的订单答案：[SQL Server ORDER BY date and nulls last](https://stackoverflow.com/questions/5886857/sql-server-order-by-date-and-nulls-last)

```
( CASE (SELECT    MAX(spraddr.spraddr_seqno)
                                  FROM      spraddr
                                  WHERE     saradap.SARADAP_PIDM = spraddr.spraddr_pidm)
    IS NULL
    THEN 1
    ELSE 0
    END 
```

)

# json - 使用 json jquery mobile 生成列表视图

> ID：16023053
> 
> 赞同：0
> 
> 时间：2013-04-15T19:13:53.217
> 
> 标签：json, listview, jquery-mobile

我一直在尝试一段时间来弄清楚如何在 jquery mobile 中使用 json 生成列表视图。我在网上找到了很多例子，但是我对 json 很陌生，不知道我做错了什么？

这是生成 json(test.php) 的页面：

```
$matches = array(
        array('title' => 'Portugal Open', 'id' => 23),
        array('title' => 'Mallorca Invitational', 'id' => 87));
echo $json = json_encode($matches); 
```

这是我尝试生成列表视图的方式：

```
<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>jQuery Mobile Web App</title>
<link href="css/jquery.mobile.theme-1.3.1.css" rel="stylesheet" type="text/css"/>
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/jquery.mobile-1.3.1.min.js" type="text/javascript"></script>
<script type="text/javascript">

$(function() {
$(document).ready(function(){

        $.getJSON("test.php",function(data) {
                $.each(data.posts, function(i,data){

                $('#matches').children('ul').append('<li><a href="#">'+data.title+'</a></li>');

                });
            }
        );
        return false;
    });
});
</script>

</head> 
<body> 

<div data-role="page" id="page">
    <div data-role="header">
        <h1>Page One</h1>
    </div>
    <div data-role="content" id="matches">  
        <ul data-role="listview">

        </ul>       
    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div>

</body>
</html> 
```

我的列表视图中没有任何内容，我不知道为什么！？

请提前帮助和感谢:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T18:01:58.497

试试这个代码，

```
 $(document).on('pageshow', '#page', function(){

       $("#page div:jqmData(role=content) #matches ul").empty();

        $.getJSON("test.php",function(data) {

            $.each(data.posts, function(i,data){

              var html="";
              html+="<li><a href='#'>"+data.title+"</a></li>";

              $("#page div:jqmData(role=content) #matches ul").append(html);

            });
        $("#page div:jqmData(role=content) #matches ul:visible").listview("refresh");

        });

    return false;               

 }); 
```

玩得开心！！

# css - Wordpress Plugin - 如何使文本具有响应性，或者用新的 div 替换它？

> ID：16023059
> 
> 赞同：0
> 
> 时间：2013-04-15T19:14:20.903
> 
> 标签：css, wordpress, mobile, plugins, responsive-design

[http://bit.ly/YqiQNQ](http://bit.ly/YqiQNQ)

我有这个在网上看起来很棒的食物菜单。菜单由带有可定制 CSS 的 Wordpress 插件生成。该网站的其余部分在 iPhone 上看起来很新鲜，但当你进入菜单时，它重叠得非常厉害，有点消失了。

打开菜单中的链接，使您的窗口尺寸非常小 - 看看它在最小设置下是如何重叠的？

我在宽度上玩@media，但无法弄清楚。

谁能帮我让文字以网站最小宽度环绕？或者一个插件，它将检测用户是否在移动设备上并完全显示不同的页面（仅显示该页面）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:21:41.013

如果您遇到文本不换行的问题，我建议您添加 `white-space: normal`到文本的父元素中，以确保文本将换行并且不会继承`white-space: nowrap`用于另一个元素的声明。

对于您的特定情况，以下 CSS 将强制菜单正确换行：

```
.rmc-menu-wrap {
    white-space:normal;
} 
```

# ios - MFMailComposeViewController 发送不带附件的电子邮件

> ID：16023060
> 
> 赞同：1
> 
> 时间：2013-04-15T19:14:21.647
> 
> 标签：ios, pdf, mfmailcomposeviewcontroller

我在代码中制作了一个 pdf 文件，并将其作为附件发送到电子邮件地址。当它显示 时`MFMailComposeController`，附件在电子邮件中，但我收到的电子邮件中没有附件。这可能是什么原因？我在这里附上了代码。

```
 if(
       [MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *mailViewController=[[MFMailComposeViewController alloc]init];
        [mailViewController setSubject:@"Maintenance Request Form"];
        mailViewController.mailComposeDelegate=self;
            [mailViewController setToRecipients:[NSArray arrayWithObject:@"BRE@appiwork.com"]];

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

        NSString *documentsDirectory = [paths objectAtIndex:0];

        NSString *file = [documentsDirectory stringByAppendingFormat:@"/MaintenanceRequest.pdf"];

        NSData *data=[NSData dataWithContentsOfFile:file];

        [mailViewController addAttachmentData:data mimeType:@"application/pdf" fileName:@"MaintenanceRequest.pdf"];

        [self presentViewController:mailViewController animated:YES completion:nil];

    } 
```

# mysql - mysql查询连接语句

> ID：16023063
> 
> 赞同：0
> 
> 时间：2013-04-15T19:14:36.853
> 
> 标签：mysql

我在查询中有问题。我需要创建一个页面，用户可以在其中查看他使用电影名称、电影院名称、他预订的座位代码进行的所有预订

我达到了这个水平

```
SELECT member.member_username, show_datetime, movie_name
FROM `member`
JOIN `reservation` ON `reservation`.`member_id` = `member`.`member_id`
JOIN `show` ON `show`.`show_id`= `reservation`.`show_id`
JOIN `movie` ON `movie`.`movie_id` = `show`.`movie_id`
WHERE `reservation`.`member_id`=1 
```

我需要建立连接并从电影院表中获取cinema_name，从座位表和剧院名称中获取seat_code 事实上，我需要一个查询来给我整个数据库中的几乎所有数据

这是数据库 [http://imageshack.us/photo/my-images/824/58054944.jpg/的架构](http://imageshack.us/photo/my-images/824/58054944.jpg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:22:02.260

`JOIN`这两个表也是：

```
SELECT 
  m.member_username, 
  sh.show_datetime, 
  v.movie_name,
  c.cinema_name,
  t.theater_name
FROM member            AS m
INNER JOIN reservation AS r  ON r.member_id  = m.member_id
INNEr JOIN show        AS sh ON sh.show_id   = r.show_id
INNER JOIN movie       AS v  ON v.movie_id   = s.movie_id
INNER JOIN theater     AS t  ON t.theater_id = sh.theater_id
INNER JOIN cinema      AS c  ON c.theater_id = sh.theater_id 
WHERE r.member_id = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:24:03.723

继续加入你的桌子

```
SELECT member.member_username, show_datetime, movie_name, c.cinema_name, t.theater_name
FROM `member`
    JOIN `reservation` ON `reservation`.`member_id` = `member`.`member_id`
    JOIN `show` ON `show`.`show_id`= `reservation`.`show_id`
    JOIN `movie` ON `movie`.`movie_id` = `show`.`movie_id`
    JOIN `theater` ON `show`.`theater_id` = `theater`.`theater_id`
    JOIN `cinema` ON `theater`.`cinema_id` = `cinema`.`cinema_id`
    JOIN `seat` ON `show`.`theater_id` = `seat`.`theater_id`
WHERE `reservation`.`member_id`=1 
```

# php - 如何获得 PHP 中使用的实际 CPU 时间？

> ID：16023067
> 
> 赞同：4
> 
> 时间：2013-04-15T19:14:55.927
> 
> 标签：php, cpu-usage

如何计算我的 php 脚本实际使用的 CPU 时间？

请注意，这不是我要找的：

```
<?php
$begin_time=microtime(true);
//..
//end of the script:
$total_time=microtime(true)-$begin_time; 
```

因为那会给我过去的时间。这可能包括同时运行的不相关进程使用的大量时间，以及等待 i/o 所花费的时间。

我已经看到有 getrusage()，但是文档页面中的用户评论说：

> getrusage() 报告内核计数器，这些计数器仅在应用程序丢失上下文并且发生切换到内核空间时才更新。例如，在现代 Linux 服务器内核上，这意味着 getrusage() 调用将在 10 毫秒内返回四舍五入的信息，桌面内核 - 在 1 毫秒内。
> 
> getrusage() 根本不能用于微测量 - 而 getmicrotime(true) 可能是更有价值的资源。

所以这似乎不是一个选择，是吗？

我有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:29:00.747

Define "your" I/O. Technically a move of memory to cpu registers is I/O. Are you saying you want to remove that time from your calculation? (I'm guessing no)

What I'm getting at is you are looking to profile your code in some way most likely. If you want to measure time not spent reading/writing to files or network sockets, just use microtime and put extra calls around portions doing I/O. Then you will also get an idea of how much time your I/O is taking. More likely you will find you have some loop taking more time than you expect.

When I profile like this I either use profiling tools in eclipse, or I use a time logger and do some kind of binary search-ish insertion of the time logging into the code. Usually I find some small area of code that is taking 85% of the measured time and do optimization there.

Also as a side note, don't let the perfect become the enemy of the practical. 90% of the time during your process your calls won't be interrupted by some other process and your microtime counts will be close enough.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-12T18:43:14.577

您可以使用`getrusage()`

完整示例：

```
<?php

function rutime($ru, $rus, $index){
    return ($ru["ru_$index.tv_sec"]*1000 + intval($ru["ru_$index.tv_usec"]/1000))
     -  ($rus["ru_$index.tv_sec"]*1000 + intval($rus["ru_$index.tv_usec"]/1000));
}

$cpu_before = getrusage();
$ms = microtime(true) * 1000;

sleep(3);
$tab = [];
for($i = 0; $i < 500000; $i++) {
  $tab[] = $i;
}

$cpu_after = getrusage();
echo "Took ".rutime($cpu_after, $cpu_before, "utime")." ms CPU usage" . PHP_EOL;
echo "Took ".((microtime(true) * 1000) - $ms)." ms total". PHP_EOL; 
```

来源：[https ://helpdesk.nodehost.ca/en/article/how-to-calculate-real-cpu-usage-in-a-php-script-o3ceu8/](https://helpdesk.nodehost.ca/en/article/how-to-calculate-real-cpu-usage-in-a-php-script-o3ceu8/)

# c - *argv++ 和 *argv 的区别——达到极限时

> ID：16023069
> 
> 赞同：1
> 
> 时间：2013-04-15T19:15:02.783
> 
> 标签：c

有人可以解释为什么

```
int main(int argc, const char * argv[]) {
  while (* argv) 
    puts(* argv++);
  return 0 ;
} 
```

是合法的，并且

```
int main(int argc, const char * argv[]) {
  argv += argc - 1;
  while (* argv) 
    puts(* argv--);
  return 0 ;
} 
```

不是吗？在这两种情况下，while 循环内的 'crement 都将指向 argv 的边界之外。为什么指向一个虚构的较高索引而不是一个虚构的较低索引是合法的？

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:18:48.737

因为C标准说你可以形成一个指向数组末尾的指针，它仍然会正确地与指向数组的指针进行比较（尽管你不能取消引用它）。

对于指向数组开头之前的地址的指针，该标准没有说任何类似的东西——即使形成这样的指针也会产生未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:18:46.700

循环语义和半开区间。遍历指针指向的对象的数组或列表的惯用方法是：

```
for (T *p = array; p < array + count; p++) 
```

在这里，`p`最终超出范围（减一，指向数组末尾之后的一），因此（不仅在概念上）要求它不要调用未定义的行为（标准实际上强加了这个要求）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:28:33.543

The standard forces `argv[argc]` to be equal to `NULL`, so dereferencing argv when it's been incremented `argc` times is legal.

On the other hand nothing is defined about the address preceding `argv`, so `argv - 1` could be anything.

Note that argv is the only array of strings guaranteed to behave this way, as far as I know.

From the standard:

5.1.2.2.1 Program Startup

> If they are declared, the parameters to the main function shall obey the following costraints:
> 
> argv[argc] shall be a null pointer

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-20T20:40:10.307

`argv++`或者`++argv`因为它是 const 指针。

如果您采用简单的数组`char* arr[10]`并尝试`arr++`它会出错

# file - 进行一些转换后在matlab中读取和绘制文本文件

> ID：16023070
> 
> 赞同：0
> 
> 时间：2013-04-15T19:15:05.233
> 
> 标签：file, matlab, text

我设法在matlab中制作文本文件并像这样分开：

0002 0004 0FCF 19B1 0713 0003

0002 0005 0FD9 19B3 0712 0003

0002 0006 0FD0 19B5 0713 0004

而且这个列表还有很多行。

我现在要做的是绘制最后 4 列。但首先我想将值从十六进制转换为十进制，然后使用函数获取实际值，因为这些值是原始的。

fe: 0FCF 和该列的其余部分必须从十六进制转换为十进制，然后使用函数： (decimalofthatvalue/4096)*3 取实际值。完成此转换后，我想绘制整个列。

有什么想法吗？我认为我正在尝试做的事情非常简单，但我在 matlab 中真的很新，我发现它很难！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:22:19.123

使用一些 for 循环解析所有列，并使用 hex2dec 函数将十六进制转换为十进制。

前任：

> > hex2dec('0FCF')

答案=

```
 4047 
```

编辑**

目前尚不清楚您如何处理数据。我假设您将所有数据都保存在一个文本文件中，并且您正在从该文本文件将其导入 MATLAB。我为你制定了一个简单的例子。在我的示例中，我使用您在问题中提供的数据并将其保存到名为 text.txt 的文本文件中。

```
[col1, col2, col3, col4, col5, col6] = textread('text.txt', ...
'%s %s %s %s %s %s', 3);
myData=horzcat(col1,col2,col3,col4,col5,col6);
myDecData=zeros(size(myData)); %allocate space for speed
RealValue=zeros(size(myData));
for i=1:size(myData,2)
    for j=1:size(myData,1)
        x=myData(j,i);
        myDecData(j,i)=hex2dec(x);
        RealValue(j,i)=(myDecData(j,i)/4096)*3;
    end
end
%now plot columns
figure,plot(RealValue(:,3)); %this plots third column 
```

这可能不是最好的方法，但它很简单并且可以完成工作

# php - 即使粘贴新的.htacess，Codeigniter“未指定输入文件”

> ID：16023072
> 
> 赞同：0
> 
> 时间：2013-04-15T19:15:13.300
> 
> 标签：php, .htaccess, codeigniter

我正在尝试安装 codeIgniter，并且我已将所有 codeIgniter 文件复制到名为`/backend`in的文件夹中`http://www.mydomain.com`。

现在，`http://www.mydomain.com/backend/index.php`显示 codeIgniter 欢迎页面。

然后我`main.php`在`/backend/controller`文件夹中创建了一个。但是当我打开时`http://www.mydomain.com/backend/index.php/main`，它显示`No input file specified`。

看完[这个问题](https://stackoverflow.com/questions/6118740/codeigniter-no-input-file-specified)后，我将一个包含以下内容的 .htaccess 文件粘贴到`/backend`文件夹中。

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

但页面`http://www.mydomain.com/backend/index.php/main`仍然显示`No input file specified`。

为什么`.htaccess`没有任何区别？我不明白发生了什么事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:50:48.213

```
RewriteEngine On
RewriteBase /backend
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /backend/index.php/$1 [L] 
```

然后浏览到：

```
http://www.mydomain.com/backend/main 
```

而不是：

```
http://www.mydomain.com/backend/index.php/main 
```

确保您删除`index.php`并`config/config.php`设置`$config['uri_protocol'] = 'AUTO'; (try also other solutions here if still not working)`

# asp.net-mvc-3 - 如何使它成为一个复选框？

> ID：16023075
> 
> 赞同：0
> 
> 时间：2013-04-15T19:15:17.620
> 
> 标签：asp.net-mvc-3, razor

所以我有这样的看法：

```
@model Tuple<LocApp.Models.Location, LocApp.Models.Service>

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Location</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Item1.name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Item1.name)
            @Html.ValidationMessageFor(model => model.Item1.name)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Item1.active)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Item1.active)
            @Html.ValidationMessageFor(model => model.Item1.active)
        </div>

       @Html.CheckBoxFor(model => model.Item2.id)

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

和行：`@Html.CheckBoxFor(model => model.Item2.id)`IMO 应该通过，并且为数据库中的每个服务创建一个基于 id 的复选框，这样我就可以保存 id。但是，显然我必须传入一个布尔值？我只有一个`model.Item2.active`

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:31:33.277

CheckBoxes 只能有布尔状态：选中或未选中。您的模型必须使用布尔值 true 或 false 来设置复选框状态。如果您希望您的复选框充当将 Id 保存到数据库的机制，您需要编写业务逻辑来检查复选框是否在控制器操作上被选中。如果复选框被选中，则写 Id，否则不写 Id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:35:57.623

您应该有一个 bool model.Item1.checked（或活动、启用等），然后使用它而不是 model.Item1.id，它将跟踪该项目的标志是打开还是关闭。

然后，当他们发布表单时，您可以遍历（或使用 LINQ）所有项目并为每个具有 .checked = true 的项目保存 id。

# c# - 如何确定此方法是否是线程安全的？

> ID：16023077
> 
> 赞同：0
> 
> 时间：2013-04-15T19:15:29.070
> 
> 标签：c#, multithreading, parallel-processing, thread-safety, locking

```
private void PerformValuations(DateTime testDate, RegressionEffectivenessTest.RegressionDateWithValues date)
        {
            var valueDate = new LegacyWCFRateTimeStamp { Type = RateTimeStampType.EndOfDay, TimeStamp = date.ValueDate };
            var curveDate = new LegacyWCFRateTimeStamp { Type = RateTimeStampType.EndOfDay, TimeStamp = date.CurveDate };
            var shiftDate = new LegacyWCFRateTimeStamp { Type = RateTimeStampType.EndOfDay, TimeStamp = date.ShiftDate };
            if (date.NeedHedgeValues)
            {
                date.HedgeCleanPrice = 0M;
                date.HedgeCleanIntrinsicValue = 0M;
                foreach (var tran in _hedgeTranQuoteIds)
                {
                    var tranquoteId = tran.TranQuoteId;
                    CheckAndLoadTrade(testDate, valueDate, shiftDate, curveDate, tran, tranquoteId);
                    var result = ValueTrade(tranquoteId);

                    var rtnVal = !result.Succeeded
                                     ? HandleFailure(tranquoteId, shiftDate, curveDate, result, valueDate)
                                     : CreateAccountingValuation(valueDate, result);
                    date.HedgeCleanIntrinsicValue += rtnVal.IntrinsicValue - rtnVal.AccruedInterest.GetValueOrDefault(0);
                    date.HedgeCleanPrice += rtnVal.CleanPrice;
                }
            } 
```

所以我试图`Parallel.ForEach`在这个方法上运行。有几件事让我担心。第一个在`CheckAndLoadTrade`方法中，它访问`private Dictionary`类的 a 以可能向其中添加一个项目（如果它不存在），然后该`ValueTrade`方法从该字典中获取一个项目。

如果我将此并行化，我是否会在访问字典时遇到任何线程安全问题？或者可能还有什么我没有注意到的？所有其他方法调用都使用在它们自己的范围内定义的变量`Dictionary`，我真正担心的只是这个。我应该`lock`在实际字典访问发生之前和之后抛出一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:18:15.487

您要并行化哪个部分？foreach 循环？

如果可以，请使用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)。内`CheckAndLoadTrade`。另一个问题是当交易不在字典中时运行什么代码。“loadtrade”代码是线程安全的吗？

# wpf - 从代码隐藏聚焦时，如何选择 WPF TextBox 中的所有文本？

> ID：16023079
> 
> 赞同：5
> 
> 时间：2013-04-15T19:15:32.717
> 
> 标签：wpf, textbox, selection, onfocus

我想`TextBox`从代码隐藏（不是`TextBox`' 代码隐藏，而是一些父控件）设置 WPF 的焦点，并在接收到该焦点时`TextBox`从s 代码隐藏中选择所有文本。`TextBox`

我关注`TextBox`这样的：

```
var scope = FocusManager.GetFocusScope(txt);
FocusManager.SetFocusedElement(scope, txt); 
```

并在s 代码隐藏中`TextBox`像这样收听事件：`TextBox`

```
AddHandler(GotFocusEvent, new RoutedEventHandler(SelectAllText), true); 
```

并尝试选择这样的文本：

```
private static void SelectAllText(object sender, RoutedEventArgs e)
    {
        var textBox = e.OriginalSource as TextBox;
        if (textBox != null)
            textBox.SelectAll();
    } 
```

但是文本没有被选中。我怎样才能修改它以按我的意愿工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-15T22:26:28.243

在选择文本之前，您必须将`Keyboard`焦点放在`TextBox`

例子：

```
private static void SelectAllText(object sender, RoutedEventArgs e)
{
    var textBox = e.OriginalSource as TextBox;
    if (textBox != null)
    {
        Keyboard.Focus(textBox);
        textBox.SelectAll();
    }    
} 
```

# joomla - Jomsocial 自定义配置文件 - 将注册第一页使用的电子邮件显示到注册第二页

> ID：16023080
> 
> 赞同：0
> 
> 时间：2013-04-15T19:15:41.883
> 
> 标签：joomla, jomsocial

目前我的第一页注册显示这些字段：

```
First Name
Last Name
Username
Email
Password
Verify Password 
```

单击“下一步”后，名字和姓氏字段将自动填写上一页中填写的内容。我想显示上一页的电子邮件，但我不确定要使用什么“字段代码”。我也在使用 JoomlaXi 的 JomSocial Profile Types (JSPT)，但我不太确定这在这种情况下是否重要。

在后端，我会去组件 > JomSocial > 自定义配置文件 > “新字段”

```
Name: Email
Type: Email
Groups: User Contact Info
Field Code: (no idea what to put here to display the email already provided)
Registration: Yes
Visible: Personal
Tooltip: N/A
Read Only: Yes
Published: Yes
Required: Yes 
```

     非常感谢您，我确实尽力搜索并寻找答案，所以如果这已经在其他地方涵盖，我提前道歉，但经过 45 分钟的查找后，我决定在这里试试运气。再次感谢，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:19:32.543

我不确定您是否可以实现它，您可以尝试在以下位置创建自定义字段：

```
components/com_community/libraries/fields/ 
```

在那里你将创建“yourfield.php”并在

```
getFieldData() 
```

可以拉取实际电子邮件值的方法；

否则，您可能会编辑

```
components/com_community/templates/your_template/register.profile.php 
```

并在那里对其进行硬编码。

# php - Zend 2 验证与 Doctrine 2 检查是否登录

> ID：16023081
> 
> 赞同：0
> 
> 时间：2013-04-15T19:15:41.833
> 
> 标签：php, authentication, login, doctrine-orm, zend-framework2

我有一个使用 Doctrine 2 作为我的 ORM 的 Zend 2 安装。

目前，我尝试使用教义 2 实现身份验证。

这行得通。

但是现在我想检查用户是否登录 layout.phtml。

我不知道如何从 layout.phtml 访问身份验证服务在此页面（[https://github.com/doctrine/DoctrineModule/blob/master/docs/authentication.md](https://github.com/doctrine/DoctrineModule/blob/master/docs/authentication.md)）上他们说 $this->identity( )

但这没有用。它每次返回NULL。

模块.config.php

```
'authentication' => array(
            'orm_default' => array(
                'object_manager' => 'Doctrine\ORM\EntityManager',
                'identity_class' => 'Application\Model\User',
                'identity_property' => 'id',
                'credential_property' => 'password'
            ),
        ), 
```

模块.php

```
public function getServiceConfig()
{
    return array(
        'factories'=>array(
            'Application\Model\AuthStorage' => function($sm){
                return new \Application\Model\AuthStorage('site');
            },

            'Zend\Authentication\AuthenticationService' => function($serviceManager) {
                return $serviceManager->get('doctrine.authenticationservice.orm_default');
            },
        ),
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T02:05:55.033

如果您使用 md5 加密密码，请尝试将您的密码更改`orm_default`为：

```
'orm_default' => array(
    'object_manager' => 'Doctrine\ORM\EntityManager',
    'identity_class' => 'Application\Entity\User',
    'identity_property' => 'username',
    'credential_property' => 'password',
    'credentialCallable' => function ($userObj, $password) {
        return ($userObj->getPassword() === md5($password));
     }
), 
```

如果您不使用 md5 加密，则可以将其调整为您正在使用的内容。

# html - CSS 标签样式

> ID：16023082
> 
> 赞同：2
> 
> 时间：2013-04-15T19:15:43.580
> 
> 标签：html, css

到目前为止，我正在尝试让我的列表标签每行显示 2x2，我正在使用边距来正确定位它们我想要的位置。在不使用边距的情况下必须有一种更简单的方法吗？

下面是我使用的代码和一个 jsfiddle，它显示了我到目前为止所获得的内容，公平地说，我对它的样式感到满意，只是对我编写样式的方式不满意。我不禁认为有一种更简单的方法可以做到这一点。

JS 小提琴：http: [//jsfiddle.net/tNQE3/](http://jsfiddle.net/tNQE3/)

```
<section id="maincontent">
<div id="wrap">
    <ul>
<li id="games" class="nav"><a href="#">Games</a></li>
    <li id="music" class="nav"><a href="#">Music</a></li>
    <li id="movies" class="nav"><a href="#">Movies</a></li>
    <li id="tv" class="nav"><a href="#">TV</a></li>  
    <li id="sport" class="nav"><a href="#">Sport</a></li>      
    </ul>
</div>
</section>

#wrap ul {
padding:40px 40px 40px 100px;   
}

#wrap li {
border: 1px solid #333333;
border-radius: 15px;
height:200px;
width:300px;
background:#ebebeb;
padding: 10px 0px 0px 20px;
text-align:center;
}

#wrap li#games {
 margin: 0px 0px 0px 30px;
 background-image:url(../img/controller.png);
 background-size: 30px 30px;
 background-repeat:no-repeat;
 background-position: 80px;
 padding: 10px 0 0 34px; 
}

#wrap li#music {
margin: -210px 0px 0px 400px;
 background-image:url(../img/music.png);
 background-position: 80px;
 background-size: 30px 30px;
 background-repeat:no-repeat;  
padding: 10px 0 0 34px;
}

#wrap li#movies {
background-image:url(../img/video.png);
 background-size: 30px 30px;
 background-position: 80px;
 background-repeat:no-repeat;  
padding: 10px 0 0 34px;
margin: 20px 0px 0px 30px;
}

#wrap li#tv {
 background-image:url(../img/tv.png);
 background-size: 30px 30px;
 background-position: 80px;
 background-repeat:no-repeat;  
padding: 10px 0 0 34px;
margin: -210px 0px 0px 400px;
}

#wrap li#sport {
background-image:url(../img/sport.png);
 background-size: 30px 30px;
 background-position: 80px;
 background-repeat:no-repeat;  
padding: 10px 0 0 34px;
margin: 20px 0px 0px 30px;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:39:27.687

您可以使用`nth-child`伪选择器在每行放置两个。

```
ul li:nth-child(2n+3) {
   clear:both;
} 
```

此选择器将仅针对第 3、5、7、9 等`ul li`元素。

这是一个小提琴：http: [//jsfiddle.net/8gN8U/1/](http://jsfiddle.net/8gN8U/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:25:17.573

创建一个具有宽度的容器，然后浮动 li 的

[http://jsfiddle.net/wVmZc/](http://jsfiddle.net/wVmZc/)

```
 <div>
    <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>        
    </ul>   
</div>

div {
    width: 450px;
    border: 1px solid red;
    overflow: hidden;   
}
ul {
    list-style: none;
}
li {
    float: left;
    width: 150px;
    height: 100px;
    border: 1px solid lime;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T19:34:45.150

将 display: inline-block 设置为 li，并为 ul 指定宽度。

[http://jsfiddle.net/65YuK/](http://jsfiddle.net/65YuK/)

```
ul {
    width: 650px;
}

ul li {
    border: 1px solid #333333;
    border-radius: 15px;
    height: 200px;
    width: 300px;
    background: #ebebeb;
    text-align:center;
    display: inline-block;
    margin: 10px 10px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T19:54:49.530

该`columns`属性完全符合您的要求，无需修改您的标记。只需根据需要在以下位置添加边距`li`：

[http://jsfiddle.net/tNQE3/16/](http://jsfiddle.net/tNQE3/16/)

```
#wrap ul {
    padding:40px 40px 40px 100px;
    -webkit-columns: 320px;
    -moz-columns: 320px;
    columns: 320px;
}

#wrap li {
    border: 1px solid #333333;
    border-radius: 15px;
    height:200px;
    width:300px;
    background:#ebebeb;
    padding: 10px 0px 0px 20px;
    text-align:center;
    background-size: 30px 30px;
    background-position: 80px;
    background-repeat:no-repeat;  
    padding: 10px 0 0 34px;
    -webkit-column-break-inside: avoid;
    break-inside: avoid;
}

#wrap li#games {
    background-image:url(../img/controller.png);
}

#wrap li#music {
     background-image:url(../img/music.png);
}

#wrap li#movies {
    background-image:url(../img/video.png);
}

#wrap li#tv {
    background-image:url(../img/tv.png);
}

#wrap li#sport {
    background-image:url(../img/sport.png);
} 
```

[http://caniuse.com/#feat=multicolumn](http://caniuse.com/#feat=multicolumn)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T19:31:17.227

这个怎么样？ [http://jsfiddle.net/briggs_w/tNQE3/14/](http://jsfiddle.net/briggs_w/tNQE3/14/)

我从各行的样式中删除了所有边距引用，然后放

```
margin-left:30px;
margin-right:20px; 
```

入式为李。然后将所有共同点从单独的线条样式移到 li 的样式中。

（对：您不必指定每行的边距如何单独计算。）

我会进一步将背景图像从样式移动到单独的行，可能在一个 div 中，因为我认为它并不真正属于样式文件，但你不必这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T19:24:55.997

我会这样做：

[http://jsfiddle.net/tNQE3/12/](http://jsfiddle.net/tNQE3/12/)

首先，UL 可能不是您正在拍摄的布局的最佳选择。我会制作一个简单的 div 网格，并将单元格的样式设置为类似于 LI 的样式。

接下来，消除对 ID 的过度使用，而是使用类来定位类似的元素，而不是单独定位每个元素。

**HTML：**

```
 <div class="row">
            <div class="col">
                <a href="#">Games</a>
            </div>
            <div class="col">
                <a href="#">Music</a>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <a href="#">Movies</a>
            </div>
            <div class="col">
                <a href="#">Tv</a>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <a href="#">Sport</a>
            </div>
        </div>

    </div>
</section> 
```

**CSS：**

```
 #wrap {
        padding:40px 40px 40px 100px;   
    }

    .row { width:6400px; overflow:hidden; margin:0 0 20px 0; }
    .col {   
        width:300px;
        height:200px;
        margin:0 20px 0 0; 
        padding: 10px;

        float:left; 

        border: 1px solid #333333;
        border-radius: 15px;

        text-align:center;

        background:#ebebeb url(../img/controller.png) no-repeat;
    }
    .col:last-child { margin:0; } 
```

# ios - 无法从另一个视图 iOS 在 Singleton 类中设置 NSString

> ID：16023084
> 
> 赞同：-1
> 
> 时间：2013-04-15T19:15:53.693
> 
> 标签：ios, uiviewcontroller, nsstring, singleton

我有一个单例，它有一个名为 duration 的属性字符串并且是合成的。

```
MySingleton.h

@property(nonatomic, strong)NSString *duration

MySingleton.m

@synthesize duration;

+ (id)sharedManager {
static MySingleton *sharedMyManager = nil;
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    sharedMyManager = [[self alloc] init];
});
return sharedMyManager;
}

- (id)init {
if (self = [super init]) {

    duration = @"Default Property Value";
}
return self;
} 
```

我在上面设置了字符串初始值。这一切都很好。现在从下面的另一个viewController view1我有一个方法，我想在其中将Singleton中的持续时间字符串更新为另一个值，如下所示它正确执行

```
- (void)updateString
{

MySingleton *singleton = [MySingleton sharedManager];
singleton.duration = @"abc";
} 
```

现在从第二个角度来看，如果我调用 [sharedManager duration]; 它得到的初始设置值不是我从 view1 设置的那个应该说@“abc”；在我调用的第二个视图的 viewDidLoad

```
sharedManager = [[MySingleton alloc]init];
NSLog (@"The duration??? = %@", [sharedManager duration]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:24:11.250

您的测试代码是错误的，如下代码所示，它允许您更改字符串。也许您没有将您的单例称为`[MySingleton sharedManager]`，而是您正在调用`[MySingleton new]`.

```
#import <Foundation/Foundation.h>

@interface MySingleton : NSObject
@property (nonatomic, copy) NSString *duration;
@end

@implementation MySingleton

+ (instancetype) sharedManager {
    static MySingleton *sharedMyManager = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedMyManager = [self new];
    });
    return sharedMyManager;
}

- (id)init {
    self = [super init];
    if (self) {
        _duration = @"Default Property Value";
    }
    return self;
}

@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        [MySingleton sharedManager].duration = @"abc";
        NSLog(@"%@",[MySingleton sharedManager].duration); // abc
    }
} 
```

另外，请注意@property NSString 应该是副本，而不是强，并且不需要@synthesize（默认添加@synthesize varname = _varname），并且setter 有一个小写的s，如`setDuration:`.

# mongodb - MongoDB存储一个圆圈

> ID：16023094
> 
> 赞同：7
> 
> 时间：2013-04-15T19:16:43.610
> 
> 标签：mongodb

是否可以在 MongoDB 上存储一个圆圈？我想将圆圈存储为集合，并能够对它们进行索引以进行搜索。我知道`$geoWithin`查询是可能的，其中一个人指定一个圆圈并检索点或现在的 GeoJSON 对象，但我希望能够做相反的事情。不知何故，在平面上绘制一个带有多个点的巨大多边形似乎不是很有吸引力，所以我希望有人有更好的东西。

我在谷歌上搜索过，但找不到任何东西。我知道存储多边形和线串，这是在 MongoDB 2.3> 中引入的，在 GeoJSON 规范中也有一些关于定义圆的建议。我也在 SO 上看到过[这个](https://stackoverflow.com/questions/10982497/mongodb-geospatial-querying-within-shapes-in-collection)问题，但是 OP 从来没有回来链接到 jira，或者如果他们找到了解决方案就更新答案。

# java - 同一个类不同版本、依赖、NoSuchMethod

> ID：16023099
> 
> 赞同：0
> 
> 时间：2013-04-15T19:16:51.353
> 
> 标签：java, web-services, maven, websphere, guava

我正在开发一个 Web 项目，该项目有 2 个不同的依赖项被拉入同一类的 war 文件（不同版本，不同包）

一个是：com.google.common.collect，另一个是 Guava API 包。当我在 websphere 应用程序服务器上运行此服务时，它会在 ImmutableList.copyOf 处引发 NoSuchMethodFound 异常。它显然是在加载早期的类，而不是来自 Guava 的具有所需功能的类。

我无法更改任何依赖项，我怎么可能通过其他使用 maven 来覆盖特定的依赖项？

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:39:21.470

使用在类路径中找到的第一个匹配的类。因此，如果您可以以不同的方式指定类路径来尝试影响拾取的类。（即指定要在类路径中首先加载的类）。这不是一个好的做法，因为 Java 规范不保证使用类路径顺序。

更好的解决方案是在代码中自己管理类加载。这可以通过

```
`ClassLoader myClassLoader = new MyClassLoader(libPath);
 Object1 obj1 = myClassLoader .loadClass("com.google.common.collect", true);' 
```

现在，如果类加载器尝试从库中加载类，则依赖类将由同一个类加载器加载，该类加载器无权访问其他库和依赖项。

注意：如果您使用它并希望将来迁移到 OSGi，您将不得不删除此代码，这会带来一些痛苦。因此尽量限制它的使用或尽早切换到 OSGi！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:28:19.963

If you have control over the WebSphere installation, you can also try this:

locate the jre lib directory of your application server (/WebSphere/AppServer/java/jre/lib) create a directory 'endorsed' put your required jars into this directory( Guava API).

The jars in this directory will be loaded first and override what you have in you war file.

This is not recommended but you can use it as patch to override the conflicting classes.

# ember.js - 观察路由更改以应用等效于 onload

> ID：16023103
> 
> 赞同：6
> 
> 时间：2013-04-15T19:17:04.733
> 
> 标签：ember.js, routes, observers

我正在尝试观察路由更改以在渲染后应用一些常见操作。这个想法是有一个类似于的功能，`onload`但是当我们使用单页应用程序时，这需要在每次路由更改时触发。（可以限定为新视图）

我发现了如何观察 currentPath 的变化：

```
App.ApplicationController = Ember.Controller.extend({
  currentPathDidChange: function() {
    prettyPrint()
  }.observes('currentPath');
}); 
```

虽然这在某些情况下效果很好，但它会在路由更改时触发，但仍然要尽早应用内容更改，因为它似乎在内容渲染之前附加。

关于实现这一目标的最佳实践的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T19:35:51.577

您是否尝试过延迟代码[`Ember.run.schedule`](http://emberjs.com/api/classes/Ember.run.html#method_schedule)？例如，

```
App.ApplicationController = Ember.Controller.extend({
  currentPathDidChange: function() {
    Ember.run.schedule('afterRender', this, function() {
      prettyPrint();
    });
  }.observes('currentPath')
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-18T02:30:56.437

由于[Ember 1.x 中不推荐使用控制器，](http://emberjs.com/deprecations/v1.x/)因此在路由器中查找 url 将是未来证明您的应用程序的好方法。你可以这样`ember-cli`做：

```
// similar to onLoad event behavior
export default Ember.Route.extend({
  afterModel: function (model){
    Ember.run.next(() => {
      console.log(this.get('router.url'));
    });
  }
});

// hacky way to get current url on each transition
export default Ember.Route.extend({
  actions: {
    didTransition: function() {
      Ember.run.next(() => {
        console.log(this.get('router.url'));
      });
    }
  }
}); 
```

这将记录：`/posts`等`/posts/3/comments`。

# python - 获取 POST 数据并使用 res.end() 返回 - 编码问题

> ID：16023108
> 
> 赞同：3
> 
> 时间：2013-04-15T19:17:16.223
> 
> 标签：python, node.js, encoding, utf-8

我将 POST 数据从 Python 程序发送到 Node.JS-server 并返回 res.end。这是python代码：

```
#! /usr/bin/env python
# -*- coding: utf-8 -*- 
import requests
value = u"Этот текст в кодировке Unicode"
url = "http://localhost:3000/?source=test"
headers = {'content-type': 'text/plain; charset=utf-8'}
r = requests.post(url, data=value.encode("utf-8"))
print r.text 
```

以下是我在 Node.JS 中处理数据的方式：

```
http.createServer(function(req, res) {
    req.setEncoding = "utf8"
    var queryData = '';
    if (req.method == 'POST') {
        req.on('data', function(data) {
            queryData += data;
        });
        req.on('end', function() {
            res.writeHead(200, {
                'Content-Type': 'text/plain'
            });
            res.end(queryData)
        });

    } else {
        // sending '405 - Method not allowed' if GET
        res.writeHead(405, {
            'Content-Type': 'text/plain'
        });
        res.end();
    }
}).listen(3000, '127.0.0.1'); 
```

结果我得到：

```
$ python test.py 
Ð­ÑÐ¾Ñ ÑÐµÐºÑÑ Ð² ÐºÐ¾Ð´Ð¸ÑÐ¾Ð²ÐºÐµ Unicode 
```

我应该如何正确设置编码以获得“Этот текст в кодировке Unicode”？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:48:14.290

您需要设置返回数据的字符集：

```
res.writeHead(200, {
    'Content-Type': 'text/plain; charset=utf-8'
}); 
```

在顶部，您正在设置即将到来的数据的“解码”，但从不设置输出响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:24:48.130

Node.JS 中的 setEncoding 是一种方法，因此请使用以下方法代替 =：

`req.setEncoding('utf8');`

请参阅此处的示例： [http ://nodejs.org/api/http.html](http://nodejs.org/api/http.html)

# jquery - Rails 资产管道和 jquery 插件。我错过了什么？

> ID：16023113
> 
> 赞同：0
> 
> 时间：2013-04-15T19:17:37.827
> 
> 标签：jquery, ruby-on-rails, asset-pipeline

在 Rails 3.2 项目中，我有一个 application.js 文件，如下所示：

```
//= require jquery
//= require jquery.hoverIntent
//= require jquery_ujs
//= require my_custom_js 
```

在我的布局中，我们只是引用`<%= javascript_include_tag 'application' %>`

中的代码`my_custom_js.js`实际上使用了来自 的插件`jquery.hoverIntent.js`，但是当我加载页面时，我收到一个 javascript 错误，指出`hoverIntent`对象上没有可用的此类函数，即使我可以检查元素并查看对现有文件的健康引用。

这里的关键是，如果我将这两个引用*移出*`application.js`它加载就好了。IE：

```
<%= javascript_include_tag 'application' %>
<%= javascript_include_tag 'jquery.hoverIntent' %>
<%= javascript_include_tag 'my_custom_js' %> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:23:13.080

在您的 中`/layouts/application.html.erb`，将这些片段添加到您的`head`部分以加载 jquery。

```
<%= javascript_include_tag "jquery" %>
<%= javascript_incldue_tag 'jquery.hoverIntent' %>
<%= javascript_incldue_tag 'my_custom_js' %> 
```

这将在您的所有页面上加载 jquery。

如果您需要有关 application.js 为何不起作用的更多信息，请阅读[本文](http://guides.rubyonrails.org/asset_pipeline.html#asset-organization)以了解更多信息。我唯一的想法是您的插件未命名`jquery.hoverIntent`或您的路径错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:04:14.877

好的。我想通了，我觉得很愚蠢。资产管道按预期工作，但我之前已经预编译了资产，它正在提供先前预编译`application.js`的重新加载 jQuery，但没有插件。

# django - 自定义用户模型中仍需要用户名

> ID：16023115
> 
> 赞同：2
> 
> 时间：2013-04-15T19:17:51.273
> 
> 标签：django, django-admin

我正在尝试使用 Django 1.5 中的新功能来使用电子邮件地址作为用户名。

一切工作正常，禁止管理站点更新用户，我不得不使用以下代码使密码看起来不原始（并使用密码更改表单等）：-

```
class PlayerChangeForm(UserChangeForm):
    class Meta(UserChangeForm.Meta):
        model = Player

class PlayerCreationForm(UserCreationForm):
    class Meta(UserCreationForm.Meta):
        model = Player

class PlayerAdmin(auth.admin.UserAdmin):
    form = PlayerChangeForm
    add_form = PlayerCreationForm

    ordering = ['first_name', 'last_name']
    list_display = ('primkey', 'email', 'mobile')
    list_editable = ('email', 'mobile')

    list_filter = ()
    fieldsets = ((None, {'fields': ('username', 'first_name', 'last_name', 'email', 'password', 'mobile')}),
    ('Permissions', {'fields': ('is_active', 'is_admin')}),
    ('Important dates', {'fields': ('last_login', )}),
    )

    add_fieldsets = ((None, {
    'classes': ('wide',),
    'fields': ('username', 'first_name', 'last_name', 'email', 'password1', 'password2')}
),
    )
    filter_horizontal = ()

    def primkey(self, obj):
       return ("%s" % (obj.get_full_name()))
    primkey.short_description = 'Player' 
```

这使管理页面看起来不错，但是当我实际尝试更新播放器时，它告诉我表单上有错误，但没有指出在哪里。

经过一番折腾，事实证明它希望设置用户名字段（如果我将其添加到管理表单中，它会说该字段是必需的）但肯定不是这种情况，因为我已经设置了我的 USERNAME_FIELD成为“电子邮件”？

如果我将该字段设置为某些内容，则可以保存对其他字段所做的任何更改，但不会将我的更新保存到用户名字段。但实际上，我根本不想设置用户名——我使用电子邮件作为用户名。

关于这个的任何想法或者这是Django中的一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:57:59.003

[Django 文档](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#custom-users-and-the-built-in-auth-forms)声明必须重写表单：

> *   用户创建表单
> 
> 取决于用户模型。必须为任何自定义用户模型重新编写。
> 
> *   用户变更表
> 
> 取决于用户模型。必须为任何自定义用户模型重新编写。

有一张相关的票：[https](https://code.djangoproject.com/ticket/19353) ://code.djangoproject.com/ticket/19353但代码仍然希望`username`存在一个字段。

# php - 将 URL 设置为父文档中的输入变量

> ID：16023116
> 
> 赞同：0
> 
> 时间：2013-04-15T19:17:57.657
> 
> 标签：php, iframe, curl

我有一段代码（CURL），我可以从中提取如下数据：

```
 <?php
    $url = "http://www.nu.nl/";

    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $curl_scraped_page = curl_exec($ch);
    curl_close($ch);

    echo $curl_scraped_page;
    ?> 
```

我还有一个带有输入的 HTML 文件。我想用动态 URL 替换物理 URL，因此将其设置为变量。变量应该是父文档中输入的值。因此 php 文件在 iframe 中回显。这可能吗？我已经用 Google 搜索并搜索了 Stack，但我只找到了这个答案：[LINK](https://stackoverflow.com/questions/14428079/getting-a-php-file-in-an-iframe) 我无法更改为我想要的。（我是 PHP 新手）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:25:37.530

您必须将`echo`PHP 文件中的行更改为：

`echo base64_encode($curl_scraped_page);`

你的`$url`任务是：

`$url = $_POST['url'];`

并使用这个 jQuery（如果你愿意，你可以使用纯 JavaScript，jQuery 更好用）：

```
$('#getPage')click(function() { //When the button "getButton" is clicked
    //Make a POST request to your PHP file with the value of the textbox as the URL
    $.post('myCURLPage.php', {url: $('#myTextInput').val()}, function(encodedData) {
        //Set the iFrames "src" attribute to the base64 encoded HTML page returned from you r PHP script
        $('#myiFrame').attr('src', 'data:text/html;base64,'+encodedData);
    });
}); 
```

（这假定您的页面上有一个 ID 设置为的按钮`getPage`和一个 ID 为的 iFrame 和一个 ID 为`myiFrame`的输入框`myTextInput`）

*免责声明：我没有测试过这段代码，但理论上它应该可以工作。*

# javascript - 实时更改javascript变量

> ID：16023118
> 
> 赞同：0
> 
> 时间：2013-04-15T19:18:08.620
> 
> 标签：javascript, jquery, wordpress

我有一个视频网站，在源代码中我有一个名为 ajax_switch.post_status 的 javascript 变量，它有 2 个值，开或关。

我还有一个滑动按钮，有 2 个选项打开和关闭。此按钮打开或关闭发布到 facebook。因此，当我在 10 秒后按播放到视频时，会发布到 Facebook。该按钮是一个 jquery 按钮，因此当我按下或关闭时，会在数据库中进行更新。如何在源代码中实时更改 ajax_switch.post_status 的变量，因此如果用户访问视频页面并将停用 Facebook 帖子而不刷新点击播放不发布？

我在wordpress中使用它。我的职能是：

在单个 php 中显示按钮代码

```
<div class="left" id="1"></div>
<div id="ajax" style="padding-left: 10px; line-height: 13px; height: 27px; vertical-align:middle; display: table-cell;" >
    Permiteți Video Best să distribuie acest video pe Facebook cu acordul dvs. Debifând această casetă va opri distribuirea și va șterge postarea de pe cronologia dvs.
</div>
<div class="clear"></div>

<script type="text/javascript">

    $('#1').iphoneSwitch(ajax_switch.post_status, function() 
    {
        $.post(ajax_switch.templateUrl+'on.php', function(data) 
        {
            $('#ajax').html(data);
            ajax_switch.post_status = 'on';
        });
    },
    function() 
    {
        $.post(ajax_switch.templateUrl+'off.php', function(data) 
        {
            $('#ajax').html(data);
            ajax_switch.post_status = 'off';
        });
    },
    {
        switch_on_container_path: ajax_switch.templateUrl+'iphone_switch_container_off.png'
    });
</script> 
```

以及发帖条件：

```
if(ajax_switch.post_status == 'on') 
{
    FB.api(
        '/me/video.watches',
        'post',
        { 
            'movie': '<?php  the_permalink() ?>?ex=257957417674441',
            'access_token': '<?php echo $token; ?>' 
        },
        function(response) 
        {
            if (!response || response.error) 
            {
                console.log(response.error);
            } 
            else 
            {
                console.log('Ewww!');
            }
        });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:33:57.120

我不明白“iphoneSwitch”方法的作用。我希望是这样的：

```
$("#1").click(function(){
  var targetString = ajax_switch.post_status;
  $.post(ajax_switch.templateUrl + targetString + '.php', function(data) {
    $('#ajax').html(data);   
    ajax_switch.post_status = ajax_switch.post_status == 'off' ? "on" : "off";
  });
}); 
```

让我知道这个问题是否还有其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:34:10.177

由于您当前编写了代码，因此您必须等待您的 ajax 请求响应，然后再进行更新`ajax_switch.post_status`。

将代码移到 ajax 回调之外将允许它立即采取行动，而不会延迟您的数据库。

不过要记住的是，您可能希望在回调中保留一些代码，以保持数据库对前端客户端的正确状态。您可以假设更新成功，但您可能希望在回调内部进行检查，以防万一失败。这样，您的客户端永远不会与您的数据库不同步。

# dynamics-crm - 调用 MSCRM OnPremise 发现服务

> ID：16023120
> 
> 赞同：0
> 
> 时间：2013-04-15T19:18:12.290
> 
> 标签：dynamics-crm

全部，

我在为 MSCRM ONPremise 调用 DiscoveryService 时遇到问题

我从 MSCRM UNDER 下载了 DiscoveryWSDL 文件

定制 > 开发人员资源 > 发现服务 WSDL

我在 SOAP UI 上上传了那个 WSDL，当我执行 SOAP 调用时，我得到了

“错误：请求中的异常：java.net.SocketTimeoutException：读取超时”

有什么想法吗？

肥皂电话

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
     <soap:Body>
           <Execute >
                <Request xsi:type="RetrievePolicyRequest" />
           </Execute>
      </soap:Body> 
```

谢谢，尼特什

# javascript - jqVmap 静态工具提示

> ID：16023122
> 
> 赞同：2
> 
> 时间：2013-04-15T19:18:15.737
> 
> 标签：javascript, jquery, tooltip, jqvmap

所以我知道如何使用 jqvmap 的文档制作自定义工具提示，但我正在尝试寻找一种方法，我可以将鼠标悬停在一个区域上，并且只要我在该区域，工具提示就会保持悬停状态。当我移动鼠标时不要移动。

jqVmap的网站仅供参考：http: [//jqvmap.com/](http://jqvmap.com/)

我的想法是我希望每个州都有一个按钮，我可以单击以转到它的页面，但工具提示总是随着您随着区域的移动而移动，我想阻止它这样做。

有什么建议么？

您可以在此站点上查看示例：（非工作示例及其问题原因）：http: [//111project.org.s159009.gridserver.com/](http://111project.org.s159009.gridserver.com/)

除了工具提示的位置和移动，我基本上可以控制一切。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T21:38:22.750

如果您查看[http://111project.org/wp-content/themes/111/js/main.js](http://111project.org/wp-content/themes/111/js/main.js)，您会发现触发该框的代码。

```
onRegionOver: function (event, code, region) {
        var state_abbr = code;
        var state = $(region);
        var id = '#jqvmap1_' + state_abbr;
        var offset = $(id).offset();
        var left_offset = offset.left;
        var top_offset = offset.top;
        console.log(left_offset);

        // if (code == 'ok' || code ==  'fl' || code == 'ga') {
        if (code == 'ok' || code == 'ga' || code == 'fl') {

          $('#state_tooltip').css({
            'left': left_offset - 120,
            'top': top_offset - 100,
            'position': 'absolute',
            'display': 'block',
            'opacity': 1
          });

          var new_url = region.toLowerCase().replace(/\s/g, '-');

          $('#state_tooltip h5').text(region);

          $('#state_tooltip .button').attr('href', new_url);

          if (code == 'ok') {
            $('#state_tooltip p').html('115 commited <br> Families');
          }

          if (code == 'ga') {
            $('#state_tooltip p').html('20 commited <br> Families');
          }

          if (code == 'fl') {
            $('#state_tooltip p').html('24 commited <br> Families');
          }

        }

    },
    onRegionOut: function (element, code, region) {
      console.log('out');
        $('#state_tooltip h5').text();
    } 
```

然后，您可以复制 HTML 中的代码以用于#state_tooltip

```
<div id="state_tooltip" style="display: none;">
<h5></h5>
<p>20 Committed <br> Families</p>
<a class="button" href="">Learn More</a> 
```

您可以在 CSS 文件中找到 #state_tooltip 的 CSS。[http://111project.org/wp-content/themes/111/style.css](http://111project.org/wp-content/themes/111/style.css)

```
#state_tooltip {
    text - align: left;
    - webkit - border - radius: 5px;
    - moz - border - radius: 5px;
    - ms - border - radius: 5px;
    - o - border - radius: 5px;
    border - radius: 5px;
    background: #f9f9f9;
    color: #1293b9;
    font-size:smaller;
    padding:10px;
    -webkit-transition:all ease-in-out, 1s;
    -moz-transition:all ease-in-out, 1s;
    -o-transition:all ease-in-out, 1s;
    transition:all ease-in-out, 1s;
    opacity:0
}
#state_tooltip h5 {
    color: #0c5165;
    font-size:1.375em;
    font-weight:normal
}
#state_tooltip.button {
    font - size: 0.9375em;
    padding: 5px 10px
} 
```

**顺便说一句，感谢您提出这个堆栈溢出问题。没有它，我将无法如此轻松地自定义 jqvmap 工具提示上的工具提示，以便在我正在处理的项目中使用多行工具提示。**

# java - 优先队列不能应用于给定类型

> ID：16023124
> 
> 赞同：0
> 
> 时间：2013-04-15T19:18:34.120
> 
> 标签：java, object, queue, priority-queue, comparable

我是使用优先级队列的新手，并且此代码的​​格式错误，我希望我的优先级是到城市的直线距离，但我不相信我正确地将这些信息传递给队列。查看 API 我需要将 SLD 设置为比较器

> public PriorityQueue(int initialCapacity, Comparator compare)
> 
> 创建一个具有指定初始容量的 PriorityQueue，它根据指定的比较器对其元素进行排序。

但这对我来说并不清楚。

```
public static void GreedySearchMap(map Romania) {
    boolean done = false;

    city current;

    int numsteps = 10;
    int cursteps;
    int choice;
    int numconnections;
    int totaldist;

    cursteps = 0;
    current = Romania.Arad;
    totaldist = 0;

    /*create queue*/
    PriorityQueue<city> q = new PriorityQueue<city>(city city,int SLD);         
    q.offer(current);
    current.visited = true;

    while (!done) {
        System.out.printf("Step %d, In %s, Distance\t%d\n", cursteps,
                current.getname(), totaldist);

        if (current.getname() == "Bucharest")
            done = true;
        else {

            current = q.poll();
            cursteps++;
            numconnections = current.getconnections();

            for (int i = 0; i < numconnections; i++) {
                choice = i;
                if (current.getcity(choice).visited == false) {
                    //totaldist += current.getdist(choice);
                    q.offer(current.getcity(choice), current.getSLD());
                    current.visited = true;
                }
            }
        }
    }

    System.out.printf("-----------------------\n");
} 
```

我的错误是：

```
P:\csci395\hw4>javac GS.java
GS.java:85: error: method offer in class PriorityQueue<E> cannot be applied to g
iven types;
                                                            q.offer(current.
getcity(choice), current.getSLD());
                                                             ^
  required: city
  found: city,int
  reason: actual and formal argument lists differ in length
  where E is a type-variable:
    E extends Object declared in class PriorityQueue
 1 error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:21:53.230

SLD 不是`Comparator`，它只是被比较的东西。您需要创建一个进行实际比较的类，并提交：

```
new Comparator<city>() {
    @Override
    public int compare(city city1, city city2) {
        return city1.getSLD() - city2.getSLD();
    }
}; 
```

阅读 java.util.Comparator 以了解更多信息。

*   编辑 -

不过，这只是一个错误。如编译器输出中所述，您从编译中获得的错误是由于您为 PriorityQueue 的 offer() 方法使用了错误的参数。只`city`应传递 a：SLD 将由您的 Comparator 实例的代码处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:23:42.270

首先，给类一个大写的名字。'city city' 可能会产生编译器错误。其次，您的错误消息告诉您出了什么问题。

你应该给你的 PriorityQueue 一个 Comparator。int 甚至不是类对象，它是原始类型。查找 Java 比较器 (java.lang.Comparator) 以获取更多信息。

# prism - WPF中关于Prism导航的一些问题

> ID：16023126
> 
> 赞同：1
> 
> 时间：2013-04-15T19:18:41.113
> 
> 标签：prism

我认为如果您使用 IoC 容器将视图注册为“Singleton”，那么每次导航到它时都会重复使用相同的实例，而将视图注册为“Transient”会在每次导航到它时创建一个新实例。除非我做错了什么，否则我发现 IoC 的“生活方式”没有任何区别，并且它`IRegionMemberLifetime.KeepAlive`是决定视图是否被重用或每次重新创建的属性。这个对吗？（我使用的是温莎城堡 IoC）。

当 Prism 文档谈到视图被“停用”时，这仅仅是在导航视图时隐藏视图的过程吗？如果`KeepAlive=False`，此时视图是否会被处理？

嵌套视图/区域呢？如果一个视图包含一个内部有另一个视图的区域，并且我离开父视图，两个视图是否都会被停用/销毁（取决于 的值`KeepAlive`）？怎么样`ClearChildViewsRegionBehavior`- 这在哪里适合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:15:38.123

我不知道这是否适用于您的情况，但我实现了接口 INavigationAware。
如果应该为每个导航重用视图，我总是从 IsNavigationTarget 方法返回 true。

```
public bool IsNavigationTarget(NavigationContext navigationContext)
{
    return true;
} 
```

# c# - 订阅已加载程序集的事件

> ID：16023129
> 
> 赞同：5
> 
> 时间：2013-04-15T19:18:50.287
> 
> 标签：c#, .net, reflection

我正在尝试在运行时加载程序集并订阅其事件。在我的场景中，dll 文件有一个 ADD 方法，该方法获取两个整数作为参数，并使用包含总和的自定义事件参数引发一个事件。

这是我加载 Dll 文件的代码的一部分：

```
Assembly asm = Assembly.LoadFile(@"C:\Projects\Dll1.Dll");
Type typ = asm.GetType("DLL1.Class1", true, true);

var method = typ.GetMethod("add");
var obj = Activator.CreateInstance(typ);

EventInfo ev1 = typ.GetEvents()[0]; // just to check if I have the proper event
Type tDelegate = ev1.EventHandlerType; // just to check if I have the proper delegate

method.Invoke(obj, new object[] { 1, 0 }); 
```

但是，我不知道如何订阅程序集引发的事件。任何帮助，将不胜感激。

补充：示例 DLL 源

```
namespace Dll1
{
    public class Class1
    {
        int c = 0;

        public void add(int a, int b)
        {
            c =  a + b;
            if (Added !=null)
                Added(this, new AddArgs(c));
        }

        public delegate void AddHandler(object sender, AddArgs e);

        public event AddHandler Added;

    }

    public class AddArgs : EventArgs
    {
        private int intResult;

        public AddArgs(int _Value) 
        {
            intResult = _Value;
        }

        public int Result
        {
            get { return intResult; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:25:58.793

只需使用`ev1`您已经拥有的并[`AddEventHandler`](http://msdn.microsoft.com/en-us/library/system.reflection.eventinfo.addeventhandler.aspx)像这样调用：

```
ev1.AddEventHandler(obj, MyEventHandlerMethod); 
```

但是，您需要确保通过调用来清理处理程序，[`RemoveEventHandler`](http://msdn.microsoft.com/en-us/library/system.reflection.eventinfo.removeeventhandler.aspx)以便可以进行垃圾收集。

```
ev1.RemoveEventHandler(obj, MyEventHandlerMethod); 
```

# android - 大型和超大型设备的相同布局

> ID：16023131
> 
> 赞同：6
> 
> 时间：2013-04-15T19:19:01.447
> 
> 标签：android, android-layout

我的应用程序有一种用于智能手机的布局和一种用于平板电脑的布局。

我想对`large`和`xlarge`设备使用相同的布局。

我想支持使用 API 10 及更高版本的设备，所以使用`sw<N>dp`是不可能的。

如果不在两个文件夹中放置相同的 xml 文件，我该如何做到这一点。我不想重复代码。这违反了任何体面的编程原则。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:49:40.797

如果应用程序中没有 xlarge 选项，我认为 xlarge 设备将使用“大型”资源。

[http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)

因此，您可以只使用一个 XML 来支持大型或超大型设备。

# android - 尝试在 PhoneGap 构建（Android）上实现 Pushwoosh

> ID：16023134
> 
> 赞同：1
> 
> 时间：2013-04-15T19:19:05.577
> 
> 标签：android, push-notification, phonegap-build

我正在尝试让我的通知正常工作，但我没有收到它们。我按照教程在 phonegap 构建上实现 pushwoosh。我有来自 Google 的 App ID 和 API 密钥，但是当我重新安装应用程序时，我没有让我的设备注册该应用程序。

我猜我的问题出在以下代码中：

```
// handle GCM notifications for Android
 function onNotificationGCM(e) {
 switch( e.event )
 {
     case 'registered':
     if ( e.regid.length > 0 )
     {
         // Your GCM push server needs to know the regID before it can push to this device
         // here is where you might want to send it the regID for later use.
         PushWoosh.appCode = "YOUR_PUSHWOOSH_APP_ID"; // my pushwoosh id is here
         PushWoosh.register(e.regid, function(data) {
                     alert("PushWoosh register success: " + JSON.stringify(data));
                 }, function(errorregistration) {
                     alert("Couldn't register with PushWoosh" +  errorregistration);
                 });

     }
     break; 
```

我将此代码插入到`<script>`索引文件中的标签中，但是设备未注册可能导致此问题的原因？

我还应该提到我的 javascript 文件夹中有 pushwoosh.js 文件，我在`.js`文件的参考标签中指向它

# extjs - Sencha Touch 2.1.1 无法创建新应用

> ID：16023135
> 
> 赞同：0
> 
> 时间：2013-04-15T19:19:06.310
> 
> 标签：extjs, sencha-touch-2

所以我决定和煎茶一起玩。

当我运行 app create 命令时，我有这个：

```
D:\DevProjects\sencha-touch-2.1.1-commercial>sencha app create MyApp /my/t1
ERROR: Failed to exec (java -Xms128m -Xmx1024m -Djava.awt.headless=true -jar C:\Users\Cherven\bin\Sencha\Cmd\3.1.0.256\sencha.jar  app create M
yApp /my/t1) - The system cannot find the file specified. (2) 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:43:26.990

好像你错过了什么。请遵循官方[指南](http://docs.sencha.com/touch/2.1.1/#!/guide/command-section-2)。

所以基本上，除了 Sencha SDK 之外，您还需要其他 3 个东西，我假设您已经正确下载了它们：[JRE](http://www.oracle.com/technetwork/java/javase/downloads/index.html)、[Sencha CMD](http://www.sencha.com/products/sencha-cmd/download)和[Compass](http://compass-style.org/)。

最后，您需要使用`generate`而不是使用以下`create`方式生成新应用程序`Sencha Cmd`：

```
sencha generate app MyApp /path/to/MyApp 
```

# c# - 无法使用实例引用访问 C# 成员

> ID：16023147
> 
> 赞同：2
> 
> 时间：2013-04-15T19:19:50.617
> 
> 标签：c#, multithreading, static, private, member

所以我有这些变量

```
List<string> files, images = new List<string>();
string rootStr; 
```

而这个线程函数

```
private static int[] thread_search(string root,List<string> files, List<string> images) 
```

但是当我尝试启动线程时：

```
trd = new Thread(new ThreadStart(this.thread_search(rootStr,files,images))); 
```

我收到此错误：

> 错误 1 ​​成员 'UnusedImageRemover.Form1.thread_search(string, System.Collections.Generic.List, System.Collections.Generic.List)' 无法通过实例引用访问；使用类型名称来限定它 E:\Other\Projects\UnusedImageRemover\UnusedImageRemover\Form1.cs 149 46 UnusedImageRemover

你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T19:21:16.110

你有一个静态方法，这意味着它不属于一个实例。`this`指的是当前实例，但由于它是静态的，因此没有意义。

只需删除`this.`，您应该会很好。

**编辑**

删除`this.`会给你一个不同的例外。您应该将`void`委托传递给`ThreadStart`构造函数，并且您过早调用该方法并传递结果（`int[]`）。您可以改为传入 lambda，例如：

```
static void Main(string[] args) {
    List<string> files = new List<string>(), images = new List<string>();
    string rootStr = "";

    var trd = new Thread(new ThreadStart(() => thread_search(rootStr, files, images)));
    trd.Start();
}

private static int[] thread_search(string root, List<string> files, List<string> images {
    return new[] { 1, 2, 3 };
} 
```

现在线程有一个对您的搜索功能的委托，对参数有一个闭包 - 如果您还不熟悉线程和闭包，您将需要阅读它们。

# jquery - .NET 应用程序中的 HTTPhander，由 JQUERY 调用

> ID：16023152
> 
> 赞同：0
> 
> 时间：2013-04-15T19:20:11.780
> 
> 标签：jquery, asp.net, .net, session, httphandler

我正在尝试创建一条弹出消息，该消息将在用户的会话即将到期时警告用户（如果他们填写在线表格的时间过长）并在他们单击“确定”时将其扩展

这是我到目前为止所拥有的：

```
 function ShowTimeoutWarning() {
        if(window.confirm("You will be logged out due to inactivity in 5 minutes. If you are working on something, please save your work now to prevent data loss!")) {

            extendSession();
        }
    }

    function beginSessionTimer() {
        // 3000ms = 3s
        // 300000ms = 5 minutes
        // 900000ms = 15 minutes

        window.setTimeout('ShowTimeoutWarning();', 3000)
    }

    function extendSession() {

        $.get(
            "/SessionHandler.ashx",
            null,
            function (data) {
    //start the countdown again           
                beginSessionTimer();
            },
            "json"
        );} 
```

会话处理程序.ashx

```
 <%@ WebHandler Language="C#" Class="SessionHandler" %>

using System;
using System.Web;
using System.Web.SessionState;

public class SessionHandler : IHttpHandler, IRequiresSessionState
{

    public void ProcessRequest (HttpContext context) {
        context.Response.ContentType = "text/plain";
        context.Response.Write("Hello World");
        context.Session["Heartbeat"] = DateTime.Now;
    }

    public bool IsReusable {
        get {
            return false;
        }
    }

} 
```

在我的网络配置中，我有以下内容：

```
<httpHandlers>
  <add verb="GET,HEAD" path="SessionHandler.ashx" validate="false" type="SessionHandler"/>
</httpHandlers> 
```

我使用 FireFox 的 httpFox 查看标题，我看到的错误是：

```
> <b> Description: </b>An error occurred during the processing of a
> configuration file required to service this request. Please review the
> specific error details below and modify your configuration file
> appropriately.
>             <br><br>
> 
>             <b> Parser Error Message: </b>Could not load type 'SessionHandler'.<br><br> 
```

当我在 httpHandler 中设置断点时，它永远不会被命中。所以我假设它永远不会到达那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:43:22.470

您的类将被编译为具有基本命名空间的程序集。如果您无法确定基本命名空间是什么，请尝试在 Visual Studio 的对象浏览器中查找 SessionHeartbeatHttpHandler 类。要显示对象浏览器，请将菜单导航到 View => Object Browser。或者，您可以使用键盘快捷键 CTRL+ALT+J 来调出它。

进入对象浏览器后，如有必要，您可以使用顶部的搜索栏来定位 SessionHeartbeatHttpHandler 类。单击类并观察右下窗格。它可能应该说以下内容：

```
Public Class SessionHeartbeatHttpHandler
     Member of MyBaseNamespace.SessionHeartbeatHttpHandler 
```

复制“成员”之后的部分。这包含应该存在于您的 Web 配置文件中的正确值。

# solr - Solr 按查询分组

> ID：16023155
> 
> 赞同：0
> 
> 时间：2013-04-15T19:20:19.683
> 
> 标签：solr, solarium

我有这样的 schema.xml：

样本数据

```
id          Country    State     City       Area
1            India      abc       cd        mnv 
15131        India      Delhi     HauzK     asdf (from 1 to 15131 inserted usingcsvhandler) 
15132         India      Karnatka  Bang     mno  ( 15132 inserted using solarium api) 
```

所有字段都是 text_general 类型和应用

1.  空格分词器
2.  小写过滤器工厂
3.  Ngramfilter工厂

需要注意的一件事：我使用 CSV 请求处理程序从 Id = '1' 到 id=15131 插入记录，并使用日光浴室 API 插入新记录的 id = 15132 文档。

现在，我有国家建议箱。我只想显示不同的国家，所以我按国家分组。

```
http://localhost:8983/solr/searchLocation/country?    
q=country%3Ain&wt=xml&indent=true&group=true&group.field=country 
```

我得到以下结果

```
 <response>
    <lst name="responseHeader">
      <int name="status">0</int>
      <int name="QTime">4</int>
    </lst>
    <lst name="grouped">
    <lst name="country">
    <int name="matches">15132</int>
    <arr name="groups">
    <lst> 
    **<str name="groupValue">ndia</str>**
    <result name="doclist" numFound="15131" start="0" maxScore="0.24998347">
    <doc>
    <str name="country">india</str>
    <str name="state">Andaman and Nicobar</str>
    <str name="city">A&N Islands</str>
    <str name="area">Marine Jetty</str>
    <str name="id">02cb8ba4-bffe-4c4e-a976-29f01ad8d275</str>
    <float name="score">0.24998347</float>
    </doc>
    </result> 
   </lst>
    <lst>
    **<str name="groupValue">d</str>**
   <result name="doclist" numFound="1" start="0" maxScore="0.24998347">
   <doc>
    <str name="country">india</str>
    <str name="state">Kerala</str>
    <str name="city">Palghat</str>
    <str name="area">Padagirinew</str>
    <str name="id">0158f635-24dd-4d2f-9697-e79272684c95</str>
    <float name="score">0.24998347</float>
   </doc>
    </result>
    </lst>
    </arr>
    </lst>
    </lst> 
    </response> 
```

*   我的困惑是，我怎么可能有两组
    1.  从 id = 1 到 id=15131 的所有记录，国家值 = 印度
    2.  id = 15132 的最后一条记录，国家值 = 印度

为什么它不制作两个不同的组？它应该是单组，因为国家字段的值是印度......

谢谢

# c# - 用每月的第一天分配变量

> ID：16023157
> 
> 赞同：1
> 
> 时间：2013-04-15T19:20:27.807
> 
> 标签：c#, vb.net, datetime

我有一个程序，我想为“每月的第一天”分配一个变量。这是我到目前为止所拥有的：

```
Dim dtToday As DateTime = DateTime.Today 'Sets todays date (04/15/13)
Dim dtYesterday As DateTime = DateTime.Today.AddDays(-1) 'Sets Yesterdays Date (04/14/13) 
```

我想接下来定义“dtFirstOfMonth”。它将每月的第一天设置为“04/01/13”这将根据它运行的日期而改变......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:22:34.803

```
Dim dtFirstOfMonth as DateTime = new DateTime(DateTime.Now.Year, DateTime.Now.Month, 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T19:26:23.623

您可以从当前日期减去当前日期。然后添加`1`以获取第一天：

```
var firstDayOfMonth = DateTime.Today.AddDays(1 - DateTime.Today.Day); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:26:27.903

试试下面的方法，它会帮助你...

```
 Dim dtToday As DateTime = DateTime.Today
 Dim dtFrom As DateTime
 dtFrom = dtToday.AddDays(-(dtToday.Day - 1)) 
```

# validation - 通过 Telerik 控件使用客户端验证

> ID：16023160
> 
> 赞同：0
> 
> 时间：2013-04-15T19:20:36.490
> 
> 标签：validation, telerik, controls

您可以将客户端验证与 Telerik 控件一起使用吗？这些示例显示了使用标准 html 输入控件进行的验证。我有带有 RadTextBoxes、RadComboboxes 等的表单，并且想添加验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:35:30.327

您可以通过使用访问 Telerik 客户端 api

```
var ctrl = $find('<%= txtSomeTextBox.ClientID %>'); 
```

然后您可以通过调用 .get_value() 函数来获取文本框的当前值。使用浏览器的调试工具来查看返回的对象中有哪些方法可用，或咨询 Telerik 的帮助站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:15:05.557

访问 Telerik 的在线演示：[http](http://demos.telerik.com/aspnet-ajax/input/examples/common/validation/defaultcs.aspx) ://demos.telerik.com/aspnet-ajax/input/examples/common/validation/defaultcs.aspx ，您将找到几乎所有内容的示例。这个展示了如何使用 RadControls for ASP.NET AJAX 的内置客户端验证。

# facebook - 我的网站的 Facebook 登录授权

> ID：16023164
> 
> 赞同：2
> 
> 时间：2013-04-15T19:20:48.613
> 
> 标签：facebook, authentication, login

我正在用 PHP 构建一个具有登录部分的网站。为此，我在 MySQL 数据库中有一个表，该表存储 64 位散列密码和用户详细信息。当用户输入他们的电子邮件和密码时，网站会对密码进行哈希处理并将其与存储的哈希值进行比较。要设置帐户，用户必须注册。

我想集成 Facebook 登录，这样用户就不必进行注册，只需使用他们的 Facebook 帐户登录到我网站的密码保护部分。顺便说一句，这正是我刚才登录 stackoverflow 的方式。我一直在研究这个，但找不到任何关于如何做到这一点的最新教程。

有人可以告诉我如何集成 Facebook 登录以验证用户访问我网站的受保护部分吗？

我的数据库是否需要为 Facebook 注册用户提供表格？我是否将 facebook 用户详细信息输入到我的数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:26:49.050

如果你不想从头开始写东西，我建议你研究一下 JanRain。 [http://janrain.com/products/engage/social-login/](http://janrain.com/products/engage/social-login/)

他们提供免费的（少于 2500 名用户）单点登录，集成了所有主要服务，如 Twitter、FB、Google、Yahoo 等。实施起来也非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:31:32.527

您可以从 Facebook 本身的开发者页面开始。查看[Facebook 登录](https://developers.facebook.com/docs/concepts/login/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T20:17:09.763

检查此链接。 [使用 Facebook 帐户登录网站](https://stackoverflow.com/questions/9665928/login-to-website-using-facebook-account/22132652#22132652)

我们可以从服务器端和客户端处理这个问题。在上面提到的链接中，您将找到使用 javascript 执行此操作的解决方案。

一些步骤

*   浏览此链接[https://developers.facebook.com](https://developers.facebook.com)
*   单击应用程序选项卡。>> 它会提示您登录。
*   登录后>>您可以在您的帐户中创建一个新应用程序。
*   单击设置选项卡（从左侧面板）>>然后单击右侧窗口中的“高级”选项卡。
*   在“有效的 OAuth 重定向 URI”>> 下输入正确的 url（为了测试，你也可以输入你的 -localhost url，比如 localhost.com:98 等）如果你使用的是 iis，你可以在那里配置端口号。- 如果需要，您还必须将此 url 放入您的主机文件中。
*   从仪表板选项卡中，您可以获得新创建的应用程序的应用程序 ID 和密钥。（我们将在稍后阶段需要它）。

# actionscript-3 - 动作脚本全屏不允许

> ID：16023168
> 
> 赞同：1
> 
> 时间：2013-04-15T19:21:01.890
> 
> 标签：actionscript-3, flash

这是我将按钮添加到舞台上的代码

```
private function add_fullScreenBtn(height:Number):void
{

    button_fullScr = new Sprite();
    button_fullScr.useHandCursor = true;
    button_fullScr.buttonMode = true;
    button_fullScr.mouseChildren = false;

    button_fullScr.x = height;
    button_fullScr.y = btn_y;

    var fullScr_Btn:Bitmap = new fullScreenImage();
    button_fullScr.addChild(fullScr_Btn);        
    button_fullScr.addEventListener(MouseEvent.CLICK, fullScreenHandler);
    addChild(button_fullScr);

} 
```

这是用户单击全屏按钮时处理事件的代码

```
private function fullScreenHandler(event:MouseEvent):void
{
    trace("Here");
   // stage.displayState = StageDisplayState.FULL_SCREEN
    if (this.stage.displayState== StageDisplayState.NORMAL) {
        //stage.displayState="fullScreen";
        this.stage.displayState=StageDisplayState.FULL_SCREEN_INTERACTIVE;
        stage.scaleMode = StageScaleMode.NO_SCALE;
    } else {
        //stage.displayState="normal";
        this.stage.displayState=StageDisplayState.NORMAL;
    }
} 
```

这是html页面的代码

```
 <html>
      <head>This is the Test Page    
      </head>
      <body>
     <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" 
       codebase="http://.../swflash.cab#version=9,0,0,0" 
       width="550" height="400" id="sample" align="middle">      
       <param name="allowScriptAccess" value="sameDomain" />
       <param name="allowFullScreen" value="true" />      
       <param name="movie" value="sample.swf" />
       <param name="quality" value="high" />
       <param name="bgcolor" value="#333333" />
       <embed src="sample.swf" quality="high" bgcolor="#333333" 
           width="550" height="400" 
           name="sample" align="middle" 
           allowscriptaccess="sameDomain" 
           type="application/x-shockwave-flash" 
           allowFullScreen="true" 
           pluginspage="http://www.macromedia.com/go/getflashplayer" />
      </embed>
    </object>

      </body>
    </html> 
```

当我运行此页面时，我收到不允许全屏模式的错误。安全异常。当我在控制台上跟踪它时，它的打印“here”

谁能建议我如何解决错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:24:22.050

我必须添加线来缩放图像，即我添加了以下行

```
stage.scaleMode = StageScaleMode.NO_SCALE; 
```

前

```
stage.displayState = StageDisplayState.FULL_SCREEN; 
```

它奏效了

# c# - 在 C# 中生成一个 excel 文件

> ID：16023170
> 
> 赞同：-3
> 
> 时间：2013-04-15T19:21:08.020
> 
> 标签：c#, .net, excel

我正在 C# 上开发一个应用程序。这是一个网络应用程序。作为此应用程序的一部分，我需要生成一个将存储到数据库中的 excel 文件。这意味着用户不会在浏览器上看到/打开文件。所以我正在考虑使用一个线程来生成excel文件并存储到数据库中。所以我的问题是：考虑到我的 excel 文件将包含从数据生成的数据和图形，生成 excel 文件的最佳库是什么？

PS：请记住，此过程将在服务器端执行。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:23:26.850

我使用过 OpenXML（用于图像插入）和 ClosedXML（当我们只有数据而没有图像时）。ClosedXML 尚不支持将图像添加到工作表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:35:14.800

我会使用 Excel.exe 本身作为参考，直接使用 Excel 互操作。

# java - 在矩形上居中调整字符串大小

> ID：16023175
> 
> 赞同：2
> 
> 时间：2013-04-15T19:21:35.117
> 
> 标签：java, string, graphics, rectangles

我正在画一个矩形，在上面画一个字符串。这个字符串应该居中（有效），但也应该调整大小，以便“所有”字符串适合这个矩形。

居中有效，但我将把它包括在内，所以这个问题可能会帮助其他想要在矩形上居中和调整字符串大小的人。

问题是 While 循环是无限的。Rectangle2D 始终具有相同的大小......

```
public void paint(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;

    ... other paintings ...

    Font font = new Font("Courier new", Font.BOLD, MAX_FONTSIZE);

    // resize string
    Rectangle2D fontRec = font.getStringBounds(information, g2.getFontMetrics().getFontRenderContext());
    while(fontRec.getWidth() >= width  * 0.95f || fontRec.getHeight() >= height  * 0.95f){
        Font smallerFont = font.deriveFont((float) (font.getSize() - 2));
        g2.setFont(smallerFont);
        fontRec = smallerFont.getStringBounds(information, 
        g2.getFontMetrics().getFontRenderContext());
    }

    // center string
    FontMetrics fm = g2.getFontMetrics();
    float stringWidth = fm.stringWidth(information);
    int fontX = (int) (x + width / 2 - stringWidth / 2);
    int fontY = (int) (y + height / 2);
    g2.drawString(information, fontX, fontY);
} 
```

**修正是：**

```
public void paint(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;

        ... other paintings ...

    // resize string
    Rectangle2D fontRec = font.getStringBounds(information, g2.getFontMetrics().getFontRenderContext());
    while(fontRec.getWidth() >= width  * 0.95f || fontRec.getHeight() >= height  * 0.95f){
        Font smallerFont = font.deriveFont((float) (font.getSize() - 2));
        font = smallerFont;
        g2.setFont(smallerFont);
        fontRec = smallerFont.getStringBounds(information, g2.getFontMetrics().getFontRenderContext());
    }

    // center string
    FontMetrics fm = g2.getFontMetrics();
    float stringWidth = fm.stringWidth(information);
    int fontX = (int) (x + width / 2 - stringWidth / 2);
    int fontY = (int) (y + height / 2);
    g2.drawString(information, fontX, fontY);

} 
```

此代码正确居中并调整字符串大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:39:49.017

您永远不会 update `font`，`smallerFont`它本身在整个循环中保持相同的值。

# c# - 程序在启动后几乎立即崩溃

> ID：16023177
> 
> 赞同：0
> 
> 时间：2013-04-15T19:21:35.870
> 
> 标签：c#, exception, crash, clr

在我的开发机器上，我使用的是 VS2012。这是一个针对 .NET 4.5 的 WPF 程序。它在开发机器上对我来说运行得很好。但是，当我在另一台计算机上对其进行测试时，它会启动、挂起，然后崩溃并显示“MyApp 已停止工作”的窗口。点击查看详情，我看到一个XML日志，里面有这样的信息：

```
<?xml version="1.0" encoding="UTF-16"?>
-<WERReportMetadata>
 -<OSVersionInformation>
 <WindowsNTVersion>6.1</WindowsNTVersion> 
 <Build>7601 Service Pack 1</Build>
 <Product>(0x30): Windows 7 Professional</Product> 
 <Edition>Professional</Edition> 
 <BuildString>7601.18113.x86fre.win7sp1_gdr.130318-1533</BuildString> 
 <Revision>1130</Revision> 
 <Flavor>Multiprocessor Free</Flavor> 
 <Architecture>X86</Architecture> 
 <LCID>1033</LCID> 
 </OSVersionInformation> 
 -<ParentProcessInformation>
 <ParentProcessId>2600</ParentProcessId>
 <ParentProcessPath>C:\Windows\explorer.exe</ParentProcessPath> 
 <ParentProcessCmdLine>C:\Windows\Explorer.EXE</ParentProcessCmdLine> 
 </ParentProcessInformation> 
 -<ProblemSignatures> 
 <EventType>CLR20r3</EventType> 
 <Parameter0>myApp.exe</Parameter0>
 <Parameter1>3.3.5.5</Parameter1> 
 <Parameter2>51682570</Parameter2>
 <Parameter3>mscorlib</Parameter3>
 <Parameter4>4.0.30319.17929</Parameter4> 
 <Parameter5>4ffa561c</Parameter5> 
 <Parameter6>43c4</Parameter6> 
 <Parameter7>105</Parameter7> 
 <Parameter8>System.Windows.Markup.XamlParse</Parameter8>
 </ProblemSignatures> 
 -<DynamicSignatures> 
 <Parameter1>6.1.7601.2.1.0.256.48</Parameter1>
 <Parameter2>1033</Parameter2> 
 <Parameter22>0a9e</Parameter22> 
 <Parameter23>0a9e372d3b4ad19135b953a78882e789</Parameter23> 
 <Parameter24>0a9e</Parameter24>
 <Parameter25>0a9e372d3b4ad19135b953a78882e789</Parameter25> 
 </DynamicSignatures>
 -<SystemInformation>
 <MID>5C6F71F8-85F7-4E38-AB94-44B953155C30</MID> 
 <BIOSVersion>6.00 PG</BIOSVersion> 
 </SystemInformation> 
</WERReportMetadata> 
```

现在，我假设问题出在 mscorlib 中，因为它在“问题签名”下。但是，我注意到该文件存在，并且它是适当的版本号。还有一个 txt 日志文件，其中包含以下信息：

```
<?xml version="1.0" encoding="UTF-16"?> <DATABASE> <EXE NAME="myApp.exe" FILTER="CMI_FILTER_PRIVACY">
    <MATCHING_FILE NAME="myApp.exe" SIZE="61440" CHECKSUM="0x5F150F1F" BIN_FILE_VERSION="3.3.5.5" BIN_PRODUCT_VERSION="3.3.5.5" PRODUCT_VERSION="3.3.5.5" FILE_DESCRIPTION="My Program" COMPANY_NAME="From Home" PRODUCT_NAME="My Program" FILE_VERSION="3.3.5.5" ORIGINAL_FILENAME="My Program.exe" INTERNAL_NAME="My Program.exe" LEGAL_COPYRIGHT="Copyright © From Home 2012" VERDATEHI="0x0" VERDATELO="0x0" VERFILEOS="0x4" VERFILETYPE="0x1" MODULE_TYPE="WIN32" PE_CHECKSUM="0x0" LINKER_VERSION="0x0" UPTO_BIN_FILE_VERSION="3.3.5.5" UPTO_BIN_PRODUCT_VERSION="3.3.5.5" LINK_DATE="04/15/2013 16:26:23" UPTO_LINK_DATE="04/15/2013 16:26:23" VER_LANGUAGE="Language Neutral [0x0]" EXE_WRAPPER="0x0" FILE_ID="00002204bc03a42c8bfbb302394dd279b63d42740dac" PROGRAM_ID="0000e1913cb9b12c018ba3d96e7a81891fca0000ffff" />
    <MATCHING_FILE NAME="app.dll" SIZE="40448" CHECKSUM="0x5E9750F" BIN_FILE_VERSION="2.0.4849.27478" BIN_PRODUCT_VERSION="2.0.4849.27478" PRODUCT_VERSION="2.0.4849.27478" FILE_DESCRIPTION="DailyReport" COMPANY_NAME="From Home" PRODUCT_NAME="DailyReport" FILE_VERSION="2.0.4849.27478" ORIGINAL_FILENAME="DailyReport.dll" INTERNAL_NAME="DailyReport.dll" LEGAL_COPYRIGHT="Copyright From Home © 2013" VERDATEHI="0x0" VERDATELO="0x0" VERFILEOS="0x4" VERFILETYPE="0x2" MODULE_TYPE="WIN32" PE_CHECKSUM="0x0" LINKER_VERSION="0x0" UPTO_BIN_FILE_VERSION="2.0.4849.27478" UPTO_BIN_PRODUCT_VERSION="2.0.4849.27478" LINK_DATE="04/11/2013 21:15:57" UPTO_LINK_DATE="04/11/2013 21:15:57" VER_LANGUAGE="Language Neutral [0x0]" EXE_WRAPPER="0x0" FILE_ID="000085f170a19e6b5e8e946feeb760e0d88925760057" PROGRAM_ID="0000e1913cb9b12c018ba3d96e7a81891fca0000ffff" />
    <MATCHING_FILE NAME="lua5.1.dll" SIZE="325960" CHECKSUM="0xC69B4921" MODULE_TYPE="WIN32" PE_CHECKSUM="0x56FB6" LINKER_VERSION="0x50001" LINK_DATE="08/09/2010 18:57:16" UPTO_LINK_DATE="08/09/2010 18:57:16" EXPORT_NAME="lua5.1.dll" EXE_WRAPPER="0x0" FILE_ID="0000280fac9cf711d93c95f6b80ac97d89cf5853c096" PROGRAM_ID="0000e1913cb9b12c018ba3d96e7a81891fca0000ffff" />
    <MATCHING_FILE NAME="MySql.Data.dll" SIZE="382976" CHECKSUM="0xF6E33CCD" BIN_FILE_VERSION="6.6.4.0" BIN_PRODUCT_VERSION="6.6.4.0" PRODUCT_VERSION="6.6.4.0" FILE_DESCRIPTION="MySql.Data.dll" COMPANY_NAME="Oracle" FILE_VERSION="6.6.4.0" ORIGINAL_FILENAME="MySql.Data.dll" INTERNAL_NAME="MySql.Data.dll" LEGAL_COPYRIGHT="Copyright © 2004, 2010, Oracle and/or its affiliates. All rights reserved." VERDATEHI="0x0" VERDATELO="0x0" VERFILEOS="0x4" VERFILETYPE="0x2" MODULE_TYPE="WIN32" PE_CHECKSUM="0x6CE8E" LINKER_VERSION="0x0" UPTO_BIN_FILE_VERSION="6.6.4.0" UPTO_BIN_PRODUCT_VERSION="6.6.4.0" LINK_DATE="10/17/2012 19:19:22" UPTO_LINK_DATE="10/17/2012 19:19:22" VER_LANGUAGE="Language Neutral [0x0]" EXE_WRAPPER="0x0" FILE_ID="0000db0146c05339a80db023c1ae16d0e1642872da7f" PROGRAM_ID="0000e1913cb9b12c018ba3d96e7a81891fca0000ffff" />
    <MATCHING_FILE NAME="NLog.dll" SIZE="388096" CHECKSUM="0xE71161C5" BIN_FILE_VERSION="2.0.0.0" BIN_PRODUCT_VERSION="2.0.0.0" PRODUCT_VERSION="2.0.0.0" FILE_DESCRIPTION="NLog for .NET Framework 4" COMPANY_NAME="NLog" PRODUCT_NAME="NLog v2.0.0.2000" FILE_VERSION="2.0.0.0" ORIGINAL_FILENAME="NLog.dll" INTERNAL_NAME="NLog.dll" LEGAL_COPYRIGHT="Copyright (c) 2004-2011 by Jaroslaw Kowalski" VERDATEHI="0x0" VERDATELO="0x0" VERFILEOS="0x4" VERFILETYPE="0x2" MODULE_TYPE="WIN32" PE_CHECKSUM="0x6B2F2" LINKER_VERSION="0x0" UPTO_BIN_FILE_VERSION="2.0.0.0" UPTO_BIN_PRODUCT_VERSION="2.0.0.0" LINK_DATE="07/18/2011 06:26:53" UPTO_LINK_DATE="07/18/2011 06:26:53" VER_LANGUAGE="Language Neutral [0x0]" EXE_WRAPPER="0x0" FILE_ID="000012f50065f5b3b21552ae45cfbdcc1dfff5326c5e" PROGRAM_ID="0000e1913cb9b12c018ba3d96e7a81891fca0000ffff" />
    <MATCHING_FILE NAME="PresentationFramework.dll" SIZE="2040296" CHECKSUM="0xE53B2864" BIN_FILE_VERSION="4.0.30319.17929" BIN_PRODUCT_VERSION="4.0.30319.17929" PRODUCT_VERSION="4.0.30319.17929" FILE_DESCRIPTION="PresentationFramework.dll" COMPANY_NAME="Microsoft Corporation" PRODUCT_NAME="Microsoft® .NET Framework" FILE_VERSION="4.0.30319.17929" ORIGINAL_FILENAME="PresentationFramework.dll" INTERNAL_NAME="PresentationFramework.dll" LEGAL_COPYRIGHT="© Microsoft Corporation.  All rights reserved." VERDATEHI="0x0" VERDATELO="0x0" VERFILEOS="0x4" VERFILETYPE="0x2" MODULE_TYPE="WIN32" PE_CHECKSUM="0x1FC9DA" LINKER_VERSION="0x0" UPTO_BIN_FILE_VERSION="4.0.30319.17929" UPTO_BIN_PRODUCT_VERSION="4.0.30319.17929" LINK_DATE="07/09/2012 06:24:56" UPTO_LINK_DATE="07/09/2012 06:24:56" VER_LANGUAGE="Language Neutral [0x0]" EXE_WRAPPER="0x0" FILE_ID="0000ad06ce5b4e6b7b0807f3d3bdf0662e37c201e3cc" PROGRAM_ID="0000e1913cb9b12c018ba3d96e7a81891fca0000ffff" />
    <MATCHING_FILE NAME="System.Data.SQLite.dll" SIZE="1025024" CHECKSUM="0x479B453D" BIN_FILE_VERSION="1.0.84.0" BIN_PRODUCT_VERSION="1.0.84.0" PRODUCT_VERSION="1.0.84.0" FILE_DESCRIPTION="System.Data.SQLite Interop Assembly" COMPANY_NAME="Robert Simpson, et al." PRODUCT_NAME="System.Data.SQLite" FILE_VERSION="1.0.84.0" ORIGINAL_FILENAME="SQLite.Interop.dll" INTERNAL_NAME="SQLite.Interop" LEGAL_COPYRIGHT="Public Domain" VERDATEHI="0x0" VERDATELO="0x0" VERFILEOS="0x4" VERFILETYPE="0x2" MODULE_TYPE="WIN32" PE_CHECKSUM="0xFA458" LINKER_VERSION="0x10000" UPTO_BIN_FILE_VERSION="1.0.84.0" UPTO_BIN_PRODUCT_VERSION="1.0.84.0" LINK_DATE="01/09/2013 19:24:08" UPTO_LINK_DATE="01/09/2013 19:24:08" EXPORT_NAME="System.Data.SQLite.dll" VER_LANGUAGE="English (United States) [0x409]" EXE_WRAPPER="0x0" FILE_ID="00006f3f7b6a03d9042a08f8bdb7b92f6fb542ecd5e5" PROGRAM_ID="0000e1913cb9b12c018ba3d96e7a81891fca0000ffff" />
    <MATCHING_FILE NAME="System.Data.SQLite.Linq.dll" SIZE="183296" CHECKSUM="0xA5ED2385" BIN_FILE_VERSION="1.0.84.0" BIN_PRODUCT_VERSION="1.0.84.0" PRODUCT_VERSION="1.0.84.0" FILE_DESCRIPTION="System.Data.SQLite for LINQ" COMPANY_NAME="http://system.data.sqlite.org/" PRODUCT_NAME="System.Data.SQLite" FILE_VERSION="1.0.84.0" ORIGINAL_FILENAME="System.Data.SQLite.Linq.dll" INTERNAL_NAME="System.Data.SQLite.Linq.dll" LEGAL_COPYRIGHT="Public Domain" VERDATEHI="0x0" VERDATELO="0x0" VERFILEOS="0x4" VERFILETYPE="0x2" MODULE_TYPE="WIN32" PE_CHECKSUM="0x2CCE1" LINKER_VERSION="0x0" UPTO_BIN_FILE_VERSION="1.0.84.0" UPTO_BIN_PRODUCT_VERSION="1.0.84.0" LINK_DATE="01/09/2013 19:25:56" UPTO_LINK_DATE="01/09/2013 19:25:56" VER_LANGUAGE="Language Neutral [0x0]" EXE_WRAPPER="0x0" FILE_ID="0000c8970ba6a5e8b84a0bb3ecb69021741b40622bae" PROGRAM_ID="0000e1913cb9b12c018ba3d96e7a81891fca0000ffff" />
    <MATCHING_FILE NAME="uninstall.exe" SIZE="1344512" CHECKSUM="0x36E8F08F" BIN_FILE_VERSION="9.1.0.0" BIN_PRODUCT_VERSION="9.1.0.0" PRODUCT_VERSION="9.1.0.0" FILE_DESCRIPTION="Setup Application" COMPANY_NAME="Indigo Rose Corporation" PRODUCT_NAME="Setup Factory Runtime" FILE_VERSION="9.1.0.0" ORIGINAL_FILENAME="suf_rt.exe" INTERNAL_NAME="suf_rt" LEGAL_COPYRIGHT="Runtime Engine Copyright © 2012 Indigo Rose Corporation (www.indigorose.com)" VERDATEHI="0x0" VERDATELO="0x0" VERFILEOS="0x40004" VERFILETYPE="0x1" MODULE_TYPE="WIN32" PE_CHECKSUM="0x0" LINKER_VERSION="0x0" UPTO_BIN_FILE_VERSION="9.1.0.0" UPTO_BIN_PRODUCT_VERSION="9.1.0.0" LINK_DATE="06/14/2012 15:50:03" UPTO_LINK_DATE="06/14/2012 15:50:03" VER_LANGUAGE="English (United States) [0x409]" EXE_WRAPPER="0x0" FILE_ID="0000b717fd548382064189c16cb94dda28b1967a5712" PROGRAM_ID="0000e1913cb9b12c018ba3d96e7a81891fca0000ffff" />
    <MATCHING_FILE NAME="WPFToolkit.Extended.dll" SIZE="507392" CHECKSUM="0xD474338B" BIN_FILE_VERSION="1.7.4644.13122" BIN_PRODUCT_VERSION="1.7.4644.13122" PRODUCT_VERSION="1.7.4644.13122" FILE_DESCRIPTION="Xceed Extended WPF Toolkit" COMPANY_NAME="Xceed Software Inc." PRODUCT_NAME="Xceed Extended WPF Toolkit" FILE_VERSION="1.7.4644.13122" ORIGINAL_FILENAME="WPFToolkit.Extended.dll" INTERNAL_NAME="WPFToolkit.Extended.dll" LEGAL_COPYRIGHT="Copyright © Xceed Software Inc. 2010-2012" VERDATEHI="0x0" VERDATELO="0x0" VERFILEOS="0x4" VERFILETYPE="0x2" MODULE_TYPE="WIN32" PE_CHECKSUM="0x7EBB6" LINKER_VERSION="0x0" UPTO_BIN_FILE_VERSION="1.7.4644.13122" UPTO_BIN_PRODUCT_VERSION="1.7.4644.13122" LINK_DATE="09/18/2012 12:17:25" UPTO_LINK_DATE="09/18/2012 12:17:25" VER_LANGUAGE="Language Neutral [0x0]" EXE_WRAPPER="0x0" FILE_ID="00001a006d37fd32f2cc0e93f7ef0ce89d1a4e436568" PROGRAM_ID="0000e1913cb9b12c018ba3d96e7a81891fca0000ffff" /> </EXE> <EXE NAME="KERNELBASE.dll" FILTER="CMI_FILTER_THISFILEONLY">
    <MATCHING_FILE NAME="KernelBase.dll" SIZE="293376" CHECKSUM="0x70F32D8A" BIN_FILE_VERSION="6.1.7601.18015" BIN_PRODUCT_VERSION="6.1.7601.18015" PRODUCT_VERSION="6.1.7601.18015" FILE_DESCRIPTION="Windows NT BASE API Client DLL" COMPANY_NAME="Microsoft Corporation" PRODUCT_NAME="Microsoft® Windows® Operating System" FILE_VERSION="6.1.7601.18015 (win7sp1_gdr.121129-1432)" ORIGINAL_FILENAME="Kernelbase" INTERNAL_NAME="Kernelbase" LEGAL_COPYRIGHT="© Microsoft Corporation. All rights reserved." VERDATEHI="0x0" VERDATELO="0x0" VERFILEOS="0x40004" VERFILETYPE="0x2" MODULE_TYPE="WIN32" PE_CHECKSUM="0x52995" LINKER_VERSION="0x60001" UPTO_BIN_FILE_VERSION="6.1.7601.18015" UPTO_BIN_PRODUCT_VERSION="6.1.7601.18015" LINK_DATE="11/30/2012 04:50:30" UPTO_LINK_DATE="11/30/2012 04:50:30" EXPORT_NAME="KERNELBASE.dll" VER_LANGUAGE="English (United States) [0x409]" EXE_WRAPPER="0x0" FILE_ID="00002dc195b5162996b04b9e1e7bb25191b6478fcaea" PROGRAM_ID="0000f519feec486de87ed73cb92d3cac802400000000" /> </EXE> <EXE NAME="kernel32.dll" FILTER="CMI_FILTER_THISFILEONLY">
    <MATCHING_FILE NAME="kernel32.dll" SIZE="868352" CHECKSUM="0x69E28698" BIN_FILE_VERSION="6.1.7601.18015" BIN_PRODUCT_VERSION="6.1.7601.18015" PRODUCT_VERSION="6.1.7601.18015" FILE_DESCRIPTION="Windows NT BASE API Client DLL" COMPANY_NAME="Microsoft Corporation" PRODUCT_NAME="Microsoft® Windows® Operating System" FILE_VERSION="6.1.7601.18015 (win7sp1_gdr.121129-1432)" ORIGINAL_FILENAME="kernel32" INTERNAL_NAME="kernel32" LEGAL_COPYRIGHT="© Microsoft Corporation. All rights reserved." VERDATEHI="0x0" VERDATELO="0x0" VERFILEOS="0x40004" VERFILETYPE="0x2" MODULE_TYPE="WIN32" PE_CHECKSUM="0xDFFC7" LINKER_VERSION="0x60001" UPTO_BIN_FILE_VERSION="6.1.7601.18015" UPTO_BIN_PRODUCT_VERSION="6.1.7601.18015" LINK_DATE="11/30/2012 04:50:29" UPTO_LINK_DATE="11/30/2012 04:50:29" EXPORT_NAME="KERNEL32.dll" VER_LANGUAGE="English (United States) [0x409]" EXE_WRAPPER="0x0" FILE_ID="0000ea174348498eaefeba3916a024e5cdd47c0ded68" PROGRAM_ID="0000f519feec486de87ed73cb92d3cac802400000000" /> </EXE> </DATABASE> 
```

我已经在测试计算机上仔细检查、重新检查、卸载并重新安装了 .NET 4.5，但仍然存在问题。所有 dll 都是在命令行中使用 regsvr32 注册的。我几乎可以肯定我错过了一些愚蠢的东西，但我担心我没有看到它。希望一双新鲜的眼睛会有所帮助。

**编辑**

我什至尝试将程序重新定位到 .NET 4.0，我得到了相同的 XML 日志，除了`<Parameter4>4.0.30319.17929</Parameter4>`我得到的是`<Parameter4>4.0.0.0</Parameter4>`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:33:31.003

您可能缺少一些参考。尝试捕获未处理的异常或使用 FUSLOGVW 查看更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:28:49.797

This could happen if some dlls, that your application use, are missing or cannot be loaded. Check the windows event log, as it may contain meaningful messages from .Net framework runtime.

As a primary suspect, I would check System.Data.SQLite.dll, because it has separate x86 and x64 versions. If you used x64 version on your dev machine, it would not work on x86 OS, and you will need to replace it.

# android - 系统 ui（通知区域）中下载的 apk 的自定义图标

> ID：16023184
> 
> 赞同：-1
> 
> 时间：2013-04-15T19:21:55.853
> 
> 标签：android, apk

如何做到这一点？用户在谷歌市场外下载 apk，我希望他看到下载的 apk 的自定义图标（安装前）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:32:22.123

> 用户在谷歌市场外下载 apk，我希望他看到下载的 apk 的自定义图标（安装前）。

如果`Notification`显示任何内容，它将来自下载的任何应用程序。通常，这将是下载应用程序，或者可能是用户的 Web 浏览器。

欢迎您编写自己的可以下载文件的应用程序，在这种情况下，如果用户使用您的应用程序下载“apk”，您可以显示任何`Notification`您想要的内容。

否则，你想要的是不可能的，对不起。

# web-services - 如何在 SOAP ui 的 groovy 脚本中创建 Set 以便能够在我的测试用例中重用它？

> ID：16023202
> 
> 赞同：0
> 
> 时间：2013-04-15T19:23:28.580
> 
> 标签：web-services, testing, groovy, soapui

我正在测试某些报告解决方案的对象覆盖率。我有数百份报告，我需要查看这些报告中使用的对象集是否涵盖了所有可能的对象集。我发现我可以使用集合来存储不同的对象名称，然后以某种方式处理它。由于我暂时使用免费版本的 SOAPui，我的测试结构是首先调用方法来获取单个报告的 XML 视图，然后使用 Groovy 脚本将找到的对象名称附加到 csv 文件中（文件附加方法）。但是，我想在删除重复项后附加这些对象。所以合适的解决方案是一个 Set 变量，我可以在其中存储所有报告中的对象名称，并在最后一步将这个集合存储在一个文件中。

如何创建这样的可重复使用的集合？还有其他我错过的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:49:29.087

你可以像下面这样声明一个集合

```
def setOfNames = [] as Set
// set manipulation
setOfNames.add("a")
// 
```

或者只是先声明一个列表，操作它，然后最后用它做一个集合

```
def listOfNames = []
// list manipulation
def setOfNames = listOfNames as Set 
```

有关详细信息，请参阅[http://groovy.codehaus.org/JN1015-Collections](http://groovy.codehaus.org/JN1015-Collections)

# android - 如何在 Android 应用程序中使用 Google Drive

> ID：16023209
> 
> 赞同：-5
> 
> 时间：2013-04-15T19:23:49.833
> 
> 标签：android, google-drive-api

例如，我想从我的应用程序中将文件发送到帐户谷歌驱动器，而无需离开应用程序。如何才能做到这一点？有人经历过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:55:56.037

[这](https://developers.google.com/drive/integrate-android-ui)似乎是如何在 Android 应用程序中使用 Google Drive 的一个很好的例子。

这是关于处理相同问题的一个非常可靠的答案[。](https://stackoverflow.com/questions/12164024/android-open-and-save-files-to-from-google-drive-sdk)

# grails - 填充下拉菜单 Grails

> ID：16023210
> 
> 赞同：0
> 
> 时间：2013-04-15T19:23:49.910
> 
> 标签：grails, drop-down-menu, grails-controller

我目前正在尝试根据上一个下拉菜单中的选择来填充下拉菜单。例如，如果您在第一个下拉菜单中单击 Spring 2013，第二个菜单将显示分配给该学期的所有相应周，以便可以选择和修改一个。关于从第一个菜单中进行选择，我如何传播第二个菜单？

这是我的控制器：

```
 class TermController {

    static scaffold = Term

    def dataSource

    def list = {
        def db = new Sql(dataSource)
        def result = db.rows("SELECT id, semester FROM term")
        [ result: result ]
    }

} 
```

这是我的 list.gsp 来显示控制器的视图：

```
 <div class="fieldcontain">
        <g:select name="termSelection" from="${Term.list()}" values="${params.id}" optionKey="id" optionValue="semester" noSelection="['':'----Term----']"/>
    </div>

        <table>
            <tr>
                <g:select name="it.week" from="${Week.list()}"/>
            </tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:38:57.443

在我看来，您想进行由另一个列表的选择更改触发的 ajax 调用？

*   聆听您的*termSelection*列表中的变化
*   更改后，进行 ajax 调用以检索周列表
*   将检索到的 ajax 列表提供给您的*it.week*列表

# php - 使用 PHP 处理 CSV 数据

> ID：16023211
> 
> 赞同：0
> 
> 时间：2013-04-15T19:23:50.353
> 
> 标签：php, arrays, csv

我遇到了 PHP 问题 - 我有一个 CSV 文件，看起来像这样：

客人姓名、类别、到达、离开、价格

约翰·史密斯，休闲，01-04-10、02-04-10、150

安·沃森，私人，01-04-11、02-04-11、120

现在 - 有数千行。我需要按类别对它们进行分组，然后为所有休闲添加费率，然后是所有私人等。这样我就可以获得每个类别的总数。

我已经设法使用以下代码导入 CSV 文件：

```
<?php
$fp = fopen('bookings.csv','r') or die("can't open file");
print "<table>\n";

while($csv_line = fgetcsv($fp,1024)) {
    print '<tr>';
    for ($i = 0, $j = count($csv_line); $i < $j; $i++) 
    {
        print '<td>'.$csv_line[$i].'</td>';
    }
    print "</tr>\n";
}

print '</table>';
fclose($fp) or die("can't close file");
?> 
```

但是我很难将它们分组并将值放入变量（来自相关单元格的特定值）

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:22:31.810

这是基于 fgetcsv 的[官方 PHP 文档](http://www.php.net/manual/en/function.fgetcsv.php)。

```
$ratings = array()

if (($handle = fopen("bookings.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        if(!isset($ratings[$data[1]]))
            $ratings[$data[1]] = $data[4];
        $ratings[$data[1]] += $data[4];
    }
    fclose($handle);

var_dump($ratings); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T01:16:06.587

您的 csv 文件应遵循数据库的模式。如果您的 csv 文件列是这个 Guestname ，类别，到达，离开，率这也应该是您的数据库的格式。我建议在显示之前将您的数据存储在您的数据库中..试试这个代码

```
if (isset($_FILES['file'])) 
    {
        //Import uploaded file to Database
        $handle = fopen($_FILES['file']['tmp_name'], "r");

        while (($data = fgetcsv($handle, 5000, ",")) !== FALSE) 
        {
            $import= mysqli_query ($connect,"INSERT into table(Column_1,Column_2,Column_3,Column_4) 
            values('$data[0]','$data[1]','$data[2]','$data[3]')");

        }
           //fclose($handle);

    }
    else
    {
        echo "<script>alert('No File Selected')
</script>";
    } 
```

# regex - 有什么建议可以提高 solr 正则表达式搜索性能？

> ID：16023213
> 
> 赞同：0
> 
> 时间：2013-04-15T19:24:03.537
> 
> 标签：regex, solr

在 Solr 中，我有以下字段用于对文本字段（每个 > 1KB）执行精确的短语正则表达式搜索：

```
<fieldType name="text_keyword_lowercase" class="solr.TextField" positionIncrementGap="100">
 <analyzer>
  <tokenizer class="solr.KeywordTokenizerFactory"/>
  <filter class="solr.LowerCaseFilterFactory" />
 </analyzer>
</fieldType> 
```

*   正则表达式搜索文本开头的速度和预期的一样快（`/sear.* ph.ase.*/`）；
*   其他的，中间和结尾（`/.*sear.* ph.ase.*/`, `/.*sear.* ph.ase/`）很慢（在 solr 中搜索 200,000 个文档在我的工作站上大约需要 900 毫秒）；

要求是能够在几秒钟内搜索数亿个文档。关于提高后两者的性能有什么建议吗？或者也许是对不同方法/工具的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:14:01.000

您可能想看看[solr.EdgeNGramFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.CommonGramsFilterFactory)。您的索引会增长，但速度会提高。

# php - 只有一个 MySQL 查询的两个 foreach 语句？

> ID：16023217
> 
> 赞同：2
> 
> 时间：2013-04-15T19:24:16.010
> 
> 标签：php, mysql

这是将两个`foreach`语句与进入 MySQL 数据库的数组一起使用的唯一方法吗？

第一个将更新`ot_hours`字段，第二个`foreach`将更新`lieu_hours`字段。我试图将两者结合起来做一个查询，但它不断更新错误的值。

这就是我现在所拥有的，但很丑陋。

```
foreach($_POST['overtimehours'] as $key => $value) { 
    dbQuery("UPDATE $TABLE SET ot_hours='$value', ot_status=1, ot_submitdate='$ot_submitdate' WHERE trans_num=$key AND uid='$contextUser' AND (ot_status=0 OR ot_status=1 OR ot_status=3)");
}
foreach($_POST['lieutimehours'] as $key2 => $value2) {
    dbQuery("UPDATE $TABLE SET lieu_hours='$value2', ot_status=1, ot_submitdate='$ot_submitdate' WHERE trans_num=$key2 AND uid='$contextUser' AND (ot_status=0 OR ot_status=1 OR ot_status=3)");
} 
```

我确信有更好的方法来做到这一点。这就是为什么我希望有人可以帮助我:)

提前感谢所有回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:50:48.507

至少你愿意学习新事物，这很好。

*   不要假设您希望发布的所有内容实际上都已发布。

使用三元运算和 isset 函数来检查您的帖子是否真的到位：

```
$overTimeHours = isset($_POST['overtimehours']) ? $_POST['overtimehours'] : false;
$lieuTimeHours = isset($_POST['lieutimehours']) ? $_POST['lieutimehours'] : false;
if($overTimeHours != false && $lieuTimeHours != false)
{
    // Proceed ; checkpoint #1
}
else
{
    // The values were not posted, do some error handling.
} 
```

因此，此时，在检查点 #1 内，您将执行以下操作：

```
foreach($overTimeHours as $key => $value)
{ 
    dbQuery("UPDATE $TABLE SET ot_hours='$value', ot_status=1, ot_submitdate='$ot_submitdate' WHERE trans_num=$key AND uid='$contextUser' AND (ot_status=0 OR ot_status=1 OR ot_status=3)");
}
foreach($lieuTimeHours as $key2 => $value2)
{
    dbQuery("UPDATE $TABLE SET lieu_hours='$value2', ot_status=1, ot_submitdate='$ot_submitdate' WHERE trans_num=$key2 AND uid='$contextUser' AND (ot_status=0 OR ot_status=1 OR ot_status=3)");
} 
```

*   如果您只有一个要解析的数组，您可能不会觉得运行一个 for 循环很难看。

现在你有两个数组（显然），所以如果一个数组的最小循环量是一个 for 循环，那么你需要的两个数组的最小循环量必须是两个。这些数组是不相关的，因此您不能使用其中一个来更轻松地解析另一个数组。

通过 $overTimeHours 解析

```
$overTimeHours as $key => $value 
```

假设您确实需要数组中的键和值，这是您可以做的最短的事情。同样的故事也适用于lieuTimeHours

*   您的代码很容易受到 SQL 注入的影响。

不要像这样在查询中插入变量：

```
SET lieu_hours='$value2' 
```

一个体面的程序员（或者一个 12 岁的孩子）可以很容易地在你的数据库中输入这样的内容：

```
yo';DROP TAbLE users;-- 
```

或类似的东西，从数据库中删除数据。您必须使用准备好的语句以防止受到基本 SQL 注入的攻击。

准备好的语句在大多数情况下都可用，但我强烈建议使用 PDO 或 mysqli 语法。

以下是如何创建 PDO 连接的示例：

```
// Usage:   $db = connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword);
// Pre:     $dbHost is the database hostname, 
//          $dbName is the name of the database itself,
//          $dbUsername is the username to access the database,
//          $dbPassword is the password for the user of the database.
// Post:    $db is an PDO connection to the database, based on the input parameters.
function connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword)
{
    try
    {
         return new PDO("mysql:host=$dbHost;dbname=$dbName;charset=UTF-8", $dbUsername, $dbPassword);
    }
    catch(PDOException $PDOexception)
    {
        exit("<p>An error ocurred: Can't connect to database. </p><p>More preciesly: ". $PDOexception->getMessage(). "</p>");
    }
} 
```

现在您可以初始化数据库变量：

```
$host = 'localhost';
$user = 'root';
$databaseName = 'databaseName';
$pass = ''; 
```

现在您可以通过以下方式访问您的数据库

```
$db = connectToDatabase($host, $databaseName, $user, $pass); // You can make it be a global variable if you want to access it from somewhere else. 
```

现在您可以创建一个接受准备好的语句的查询：

```
$query = "UPDATE :table SET ot_hours=:ot_hours, ot_status=1, ot_submitdate=:ot_submitdate WHERE trans_num=:key AND uid=:contextUser AND (ot_status=0 OR ot_status=1 OR ot_status=3);"; 
```

现在您可以轻松地准备它，将变量执行到查询中，而无需使用 sql 注入（区别在于：未准备好的查询运行命令，而准备好的查询是纯字符串）：

```
$statement = $db->prepare($query); // Prepare the query.
$success = $statement->execute(array(
    ':table' => $TABLE,
    ':ot_hours' => $ot_hours,
    ':ot_submitdate ' => $ot_submitdate ,
    ':key' => $key,
    ':contextUser' => $contextUser
)); // Here you insert the variable, by executing it 'into' the prepared query.

if($success)
{
    // Update was successful.
]
else
{
    // Update was not successful, feel free to catch an PDOException $PDOexception
} 
```

我还注意到我添加了一个“;” 在你的脚本的末尾，这不是必需的，但我觉得它更安全，确保告诉你你的执行已经完成并且你不想要任何与后续相关的东西（即使它不是来自你）。

我希望我回答了您的问题（并希望超出此范围），我希望您会考虑我所说的:) 如果有任何问题，请随时提问。

另外，如果我在写这个答案时可能说错了什么，请不要犹豫纠正我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T20:21:38.303

适用于您的情况，这是 Danny 的改编[答案](https://stackoverflow.com/a/13714417/1291428)：

```
<?php

//first query:
$arrk = array_keys($_POST['overtimehours']);
$arrv = array_values($_POST['overtimehours']);
$id_list = implode(',', $arrk);

$whens = implode(
    "\n    ",
    array_map(
        function ($id, $value) {
            return "WHEN {$id} THEN {$value}";
        },
        $arrk,
        $arrv
    )
);

$sql1 = "
    UPDATE $TABLE
    SET ot_hours = CASE trans_num
    {$whens}
    END,
    ot_status=1, 
    ot_submitdate='$ot_submitdate'
    WHERE id IN ({$id_list})
    AND uid='$contextUser' 
    AND (ot_status=0 OR ot_status=1 OR ot_status=3) 
";

//second query:
$arrk = array_keys($_POST['lieutimehours']);
$arrv = array_values($_POST['lieutimehours']);

$id_list = implode(',', $arrk);

$whens = implode(
    "\n    ",
    array_map(
        function ($id, $value) {
            return "WHEN {$id} THEN {$value}";
        },
        $arrk,
        $arrv
    )
);

$sql2 = "
    UPDATE $TABLE
    SET lieu_hours = CASE trans_num
    {$whens}
    END,
    ot_status=1, 
    ot_submitdate='$ot_submitdate'
    WHERE id IN ({$id_list})
    AND uid='$contextUser' 
    AND (ot_status=0 OR ot_status=1 OR ot_status=3) 
";

//now use pdo to run sql1 and sql2

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T19:37:44.353

我建议您使用准备好的语句。您至少应该正确编码您使用的其他变量 ( `$TABLE`, ...)

```
$firstUpdate = 
    "UPDATE $TABLE 
        SET ot_hours=:value, ot_status=1, ot_submitdate='$ot_submitdate' 
      WHERE trans_num=:key 
        AND uid='$contextUser' 
        AND (ot_status=0 OR ot_status=1 OR ot_status=3)";

 $secondUpdate =
     "UPDATE $TABLE 
         SET lieu_hours=':value', ot_status=1, ot_submitdate='$ot_submitdate' 
       WHERE trans_num=:key 
         AND uid='$contextUser' 
         AND (ot_status=0 OR ot_status=1 OR ot_status=3)";

$db = PDO(...); // I assume here a connection managed by PDO

$stmt = $db->prepare($firstUpdate);
foreach($_POST['overtimehours'] as $key => $value) {
      $stmt->execute(array(":key"=>$key,":value"=>$value);
}

$stmt = $db->prepare($secondUpdate);
foreach($_POST['lieutimehours'] as $key => $value) {
        $stmt->execute(array(":key"=>$key,":value"=>$value);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T19:40:28.413

在我看来，您要做的第一件事是减少打开与数据库的连接的次数，如下所示：

```
$query = "";
foreach($_POST['overtimehours'] as $key => $value) { 
    $query .="UPDATE $TABLE SET ot_hours='$value', ot_status=1, ot_submitdate='$ot_submitdate' WHERE trans_num=$key AND uid='$contextUser' AND (ot_status=0 OR ot_status=1 OR ot_status=3) ; ";
}
foreach($_POST['lieutimehours'] as $key2 => $value2) {
    $query .= "UPDATE $TABLE SET lieu_hours='$value2', ot_status=1, ot_submitdate='$ot_submitdate' WHERE trans_num=$key2 AND uid='$contextUser' AND (ot_status=0 OR ot_status=1 OR ot_status=3); ";
} 
if ($query)  dbQuery($query); 
```

其次，这很重要，就像您所说的一次尝试将两个数组组合在一起并调试您的代码，直到您成功为止。

# java - 使用 KD-tree 查找范围内的所有邻居

> ID：16023220
> 
> 赞同：0
> 
> 时间：2013-04-15T19:24:20.340
> 
> 标签：java, data-structures, kdtree, dbscan

我正在尝试实现与[DBSCAN一起使用的](http://en.wikipedia.org/wiki/DBSCAN)[KD 树](http://en.wikipedia.org/wiki/K-d_tree)。问题是我需要找到满足距离标准的所有点的所有邻居。问题是当我在我的实现中使用该方法时，我在使用朴素搜索（这是所需的输出）时没有得到相同的输出。我的实现改编自[python 实现](https://code.google.com/p/python-kdtree/)。这是我到目前为止所得到的：`nearestNeighbours`

```
//Point.java
package dbscan_gui;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;

public class Point {

    final HashSet<Point> neighbours = new HashSet<Point>();
    int[] points;
    boolean visited = false;
    public Point(int... is) {
        this.points = is;
    }
    public String toString() {
        return Arrays.toString(points);
    }

    public double squareDistance(Point p) {
        double sum = 0;
        for (int i = 0;i < points.length;i++) {
            sum += Math.pow(points[i] - p.points[i],2);
        }
        return sum;
    }
    public double distance(Point p) {
        return Math.sqrt(squareDistance(p));
    }
    public void addNeighbours(ArrayList<Point> ps) {
        neighbours.addAll(ps);
    }
    public void addNeighbour(Point p) {
        if (p != this)
            neighbours.add(p);
    }
}

//KDTree.java
package dbscan_gui;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.Iterator;
import java.util.List;
import java.util.Random;
import java.util.TreeSet;

public class KDTree {
    KDTreeNode root;
    PointComparator[] comps;
    public KDTree(ArrayList<Point> list) {
        int axes = list.get(0).points.length;

        comps = new PointComparator[axes];
        for (int i = 0; i < axes; i++) {
            comps[i] = new PointComparator(i);
        }
        root = new KDTreeNode(list,0);
    }
    private class PointComparator implements Comparator<Point> {
        private int axis;
        public PointComparator(int axis) {
            this.axis = axis;
        }
        @Override
        public int compare(Point p1, Point p2) {
            return p1.points[axis] - p2.points[axis];
        } 
    }

    /**
     * Adapted from https://code.google.com/p/python-kdtree/
     * Stores points in a tree, sorted by axis
     */
    public class KDTreeNode {
        KDTreeNode leftChild = null;
        KDTreeNode rightChild = null;
        Point location;

        public KDTreeNode(ArrayList<Point> list, int depth) {
            if(list.isEmpty())
                return;
            final int axis = depth % (list.get(0).points.length);

            Collections.sort(list, comps[axis] );
            int median = list.size()/2;
            location = list.get(median);
            List<Point> leftPoints = list.subList(0, median);
            List<Point> rightPoints = list.subList(median+1, list.size());
            if(!leftPoints.isEmpty())
                leftChild  = new KDTreeNode(new ArrayList<Point>(leftPoints), depth+1);
            if(!rightPoints.isEmpty())
                rightChild = new KDTreeNode(new ArrayList<Point>(rightPoints),depth+1);
        }

        /**
         * @return true if this node has no children
         */
        public boolean isLeaf() {
            return leftChild == null && rightChild == null;
        }

    }
    /**
     * Finds the nearest neighbours of a point that fall within a given distance
     * @param queryPoint the point to find the neighbours of
     * @param epsilon the distance threshold
     * @return the list of points
     */
    public ArrayList<Point> nearestNeighbours(Point queryPoint, int epsilon) {
        KDNeighbours neighbours = new KDNeighbours(queryPoint);
        nearestNeighbours_(root, queryPoint, 0, neighbours);
        return neighbours.getBest(epsilon);
    }
    /**
     * @param node
     * @param queryPoint
     * @param depth
     * @param bestNeighbours
     */
    private void nearestNeighbours_(KDTreeNode node, Point queryPoint, int depth, KDNeighbours bestNeighbours) {
        if(node == null)
            return;
        if(node.isLeaf()) {
            bestNeighbours.add(node.location);
            return;
        }
        int axis = depth % (queryPoint.points.length);
        KDTreeNode nearSubtree = node.rightChild;
        KDTreeNode farSubtree  = node.leftChild;
        if(queryPoint.points[axis] < node.location.points[axis]) {
            nearSubtree = node.leftChild;
            farSubtree = node.rightChild;
        }
        nearestNeighbours_(nearSubtree, queryPoint,  depth+1, bestNeighbours);
        if(node.location != queryPoint)
            bestNeighbours.add(node.location);       
        if(Math.pow(node.location.points[axis] - queryPoint.points[axis],2) <= bestNeighbours.largestDistance)
            nearestNeighbours_(farSubtree, queryPoint, depth+1,bestNeighbours);
        return;
    }
    /**
     * Private datastructure for holding the neighbours of a point
     */
    private class KDNeighbours {
        Point queryPoint;
        double largetsDistance = 0;
        TreeSet<Tuple> currentBest = new TreeSet<Tuple>(new Comparator<Tuple>() {

            @Override
            public int compare(Tuple o1, Tuple o2) {
                return (int) (o1.y-o2.y);
            }

        });
        KDNeighbours(Point queryPoint) {
            this.queryPoint = queryPoint;
        }
        public ArrayList<Point> getBest(int epsilon) {
            ArrayList<Point> best = new ArrayList<Point>();
            Iterator<Tuple> it = currentBest.iterator();
            while(it.hasNext()) {
                Tuple t =it.next();
                if(t.y > epsilon*epsilon)
                    break;
                else if(t.x != queryPoint)
                    best.add(t.x);
            }
            return best;
        }

        public void add(Point p) {
            currentBest.add(new Tuple(p, p.squareDistance(queryPoint)));
            largestDistance = currentBest.last().y;
        }
        private class Tuple  {
            Point x;
            double y;
            Tuple(Point x, double y) {
                this.x = x;
                this.y = y;
            }
        }
    }

    public static void main(String[] args) {
        int epsilon = 3;

        System.out.println("Epsilon: "+epsilon);
        ArrayList<Point> points = new ArrayList<Point>();
        Random r = new Random();
        for (int i = 0; i < 10; i++) {
            points.add(new Point(r.nextInt(10), r.nextInt(10)));
        }
        System.out.println("Points "+points );
        System.out.println("----------------");
        System.out.println("Neighbouring Kd");
        KDTree tree = new KDTree(points);
        for (Point p : points) {
            ArrayList<Point> neighbours = tree.nearestNeighbours(p, epsilon);
            for (Point q : neighbours) {
                q.addNeighbour(p);
            }
            p.addNeighbours(neighbours);
            p.printNeighbours();
            p.neighbours.clear();
        }
        System.out.println("------------------");
        System.out.println("Neighbouring O(n^2)");
        for (int i = 0; i < points.size(); i++) {
            for (int j = i + 1; j < points.size(); j++) {
                Point p = points.get(i), q = points.get(j);
                if (p.distance(q) <= epsilon) {
                    p.addNeighbour(q);
                    q.addNeighbour(p);
                }
            }
        }
        for (Point point : points) {
            point.printNeighbours();
        }

    }
} 
```

当我运行它时，我得到以下输出（后半部分是模型输出）：

```
Epsilon: 3
Points [[9, 5], [4, 7], [3, 1], [0, 0], [5, 7], [0, 1], [5, 5], [1, 2], [9, 2], [9, 9]]
----------------
Neighbouring Kd
Neighbours of [0, 0] are: [[0, 1]]
Neighbours of [0, 1] are: [[1, 2], [0, 0], [3, 1]]
Neighbours of [1, 2] are: [[0, 1], [3, 1]]
Neighbours of [3, 1] are: [[0, 1], [1, 2]]
Neighbours of [4, 7] are: [[5, 7]]
Neighbours of [5, 7] are: [[4, 7]]
Neighbours of [5, 5] are: [[4, 7], [5, 7]]
Neighbours of [9, 5] are: [[9, 2]]
Neighbours of [9, 2] are: [[9, 5]]
Neighbours of [9, 9] are: []
------------------
Neighbouring O(n^2)
Neighbours of [0, 0] are: [[0, 1], [1, 2]]
Neighbours of [0, 1] are: [[1, 2], [0, 0], [3, 1]]
Neighbours of [1, 2] are: [[0, 1], [0, 0], [3, 1]]
Neighbours of [3, 1] are: [[0, 1], [1, 2]]
Neighbours of [4, 7] are: [[5, 5], [5, 7]]
Neighbours of [5, 7] are: [[4, 7], [5, 5]]
Neighbours of [5, 5] are: [[4, 7], [5, 7]]
Neighbours of [9, 5] are: [[9, 2]]
Neighbours of [9, 2] are: [[9, 5]]
Neighbours of [9, 9] are: [] 
```

我想不通为什么邻居不一样，似乎可以发现a->b是邻居，但不是b->a也是邻居。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-20T07:35:41.690

您可能希望使用包含 DBSCAN 和索引结构（例如 R*-tree）的[ELKI进行最近邻搜索。](http://elki.dbs.ifi.lmu.de/)当参数化正确时，它真的非常快。我在 trac 中看到下一个版本也将有一个 KD-tree。

快速查看您的代码，我必须同意@ThomasJungblut - 您不要回溯，然后根据需要尝试另一个分支，这就是您错过很多邻居的原因。**您可能需要查看两个分支！**

# php - 动态 php xml 图像文件属性重新定义错误

> ID：16023222
> 
> 赞同：0
> 
> 时间：2013-04-15T19:24:37.123
> 
> 标签：php, xml, labels

我是网络开发的新手，并试图通过 php 制作 xml 以在我的 flash 库中使用，并在检查我的 php 文件时收到此错误：

**此页面包含以下错误： 第 3 行第 84 列的错误：重新定义属性 THUMB 下面是页面的呈现直到第一个错误。**

这是代码：

```
 <?php
// Set which extensions should be approved in the XML file
$extensions = array
(
  'jpg', 'JPG',
  'png', 'PNG',
  'gif', 'GIF',
  'bmp', 'BMP'
);

// Echo the header (XML)
header("Content-Type: text/xml");

// Prepare the XML file
echo '<?xml version="1.0" encoding="ISO-8859-1"?>' . "\r\n";
echo '<GALLERY COLUMNS="5" XPOSITION="30" YPOSITION="30" WIDTH="100" HEIGHT="100">' . "\r\n";
$gallery = '<IMAGE FULL="';

// Get the files from the current directory
if (file_exists ("full_images/"))
{
  if (is_dir ("full_images/"))
  {
    $dh = opendir ("full_images/") or die (" Directory Open failed !");

    // Prepare the images array
    $imgs = array();
    while ($file = readdir ($dh))
    {
      // Only get the files ending with the correct extension
      if ( in_array( substr($file, -3), $extensions ) )
      {
        array_push($imgs, $file);
      }
    }
  closedir ($dh);
  }

  // Sort the array
  sort($imgs);

  foreach ($imgs as $img)
  {
    // Return all images in XML format
    $gallery.= 'full_image/' .$img . '" ' . 'THUMB="';
  }
}
// Get the files from the current directory
if (file_exists ("thumbs/"))
{
  if (is_dir ("thumbs/"))
  {
    $dh = opendir ("thumbs/") or die (" Directory Open failed !");

    // Prepare the images array
    $thumbs = array();
    while ($file = readdir ($dh))
    {
      // Only get the files ending with the correct extension
      if ( in_array( substr($file, -3), $extensions ) )
      {
        array_push($thumbs, $file);
      }
    }
  closedir ($dh);
  }

  // Sort the array
  sort($thumbs);

  foreach ($thumbs as $thumb)
  {
    // Return all images in XML format
    $gallery.= 'thumbs/' . $thumb;
  }
}
$gallery.= '" />';
$gallery.= "\r\n";
echo $gallery;
echo "</GALLERY>";
?> 
```

我哪里错了？解决方案是什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:45:29.777

```
foreach ($imgs as $img)
{
    // Return all images in XML format
    $gallery.= 'full_image/' .$img . '" ' . 'THUMB="';
} 
```

此代码部分添加属性`THUMB`的次数与 $imgs 中的键数一样多。

您必须始终创建一个新的 Image 子元素。

这将是正确的代码（假设拇指和图像具有相同的名称）

```
<?php
// Set which extensions should be approved in the XML file
$extensions = array
(
  'jpg', 'JPG',
  'png', 'PNG',
  'gif', 'GIF',
  'bmp', 'BMP'
);

// Echo the header (XML)
header("Content-Type: text/xml");

// Prepare the XML file
echo '<?xml version="1.0" encoding="ISO-8859-1"?>' . "\r\n";
echo '<GALLERY COLUMNS="5" XPOSITION="30" YPOSITION="30" WIDTH="100" HEIGHT="100">' . "\r\n";
$gallery = '';

// Get the files from the current directory
if (file_exists ("full_images/"))
{
  if (is_dir ("full_images/"))
  {
    $dh = opendir ("full_images/") or die (" Directory Open failed !");

    // Prepare the images array
    $imgs = array();
    while ($file = readdir ($dh))
    {
      // Only get the files ending with the correct extension
      if ( in_array( substr($file, -3), $extensions ) )
      {
        array_push($imgs, $file);
      }
    }
  closedir ($dh);
  }

  // Sort the array
  sort($imgs);
}
// Get the files from the current directory
if (file_exists ("thumbs/"))
{
  if (is_dir ("thumbs/"))
  {
    $dh = opendir ("thumbs/") or die (" Directory Open failed !");

    // Prepare the images array
    $thumbs = array();
    while ($file = readdir ($dh))
    {
      // Only get the files ending with the correct extension
      if ( in_array( substr($file, -3), $extensions ) )
      {
        array_push($thumbs, $file);
      }
    }
  closedir ($dh);
  }

  // Sort the array
  sort($thumbs);

  for ($i = 0; $i < count($imgs); $i++)
  {
    // Return all images in XML format
    $gallery .= '<IMAGE FULL="full_image/'.$imgs[$i].'" THUMB="thumbs/' . $thumbs[$i].'"/>'."\r\n";
  }
}
echo $gallery;
echo "</GALLERY>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:02:25.247

从技术上讲，您的问题在错误消息中给出。实际上，问题在于一次做太多事情。而是简化。例如从通过扩展过滤的目录中获取文件*已经*大部分解决了，您只需要添加一些小代码：

```
class ListExtensions extends FilterIterator
{
    private $extensions;

    public function __construct($path, array $extensions = array()) {
        $this->extensions = $extensions;
        parent::__construct(new DirectoryIterator($path));
    }

    /**
     * @link http://php.net/manual/en/filteriterator.accept.php
     * @return bool true if the current element is acceptable, otherwise false.
     */
    public function accept() {
        /* @var $file SplFileInfo */
        $file = $this->getInnerIterator()->current();
        return in_array($file->getExtension(), $this->extensions);
    }
} 
```

此类允许您轻松遍历具有您指定的扩展名的文件。因为这一切都是封装的，所以您的代码更多是模块。例如，您只专注于目录列表和过滤的一部分，而不是在另一部分内部。

类似于生成 XML。一个图书馆也已经存在。它负责创建文档，并且由于它知道 XML，因此您不会做太多错误，即使您会更早地被注意到。

```
$extensions = array
(
    'jpg', 'JPG',
    'png', 'PNG',
    'gif', 'GIF',
    'bmp', 'BMP'
);

$largeFiles = new ListExtensions($pathFullImages, $extensions);
$thumbFiles = new ListExtensions($pathThumbImages, $extensions);

$pairs = new MultipleIterator();
$pairs->attachIterator($largeFiles);
$pairs->attachIterator($thumbFiles);

$gallery = new SimpleXMLElement('<GALLERY COLUMNS="5" XPOSITION="30" YPOSITION="30" WIDTH="100" HEIGHT="100"/>');

foreach ($pairs as $pair)
{
    $image = $gallery->addChild('IMAGE');

    $image['FULL']  = "full_image/$pair[0]";
    $image['THUMB'] = "thumbs/$pair[1]";
}

// Serve XML incl. header
header("Content-Type: text/xml");
$gallery->asXML('php://output'); 
```

# php - 从 ajax 请求调用时，php 脚本可以更新我的 sql 吗？

> ID：16023226
> 
> 赞同：0
> 
> 时间：2013-04-15T19:24:49.353
> 
> 标签：php, ajax, json

我有一个向 php 脚本发出 ajax 请求的脚本

```
 // ajax request for Weather       
    $.ajax({
          type: "POST",
          url: "Json/weatherAPI.php" ,
          data: { 
          postcode: postcode,
          display:'fadeout' ,
          color:'blue' ,
          timed_display:'20'},
          dataType: 'json',   
          success:JsonDataReturned ,

    }); 
```

这会调用我的 PHP 脚本，然后查询天气 API 并将 Json 数据返回到我上面的脚本，**这一切都很好（下）**

```
 $postcode = $_POST['postcode'];
         $url = "http://www.myweather2.com/developer/forecast.ashx?uac=" . $api . "&output=json&query=" . $postcode ; 
         $response = fopen($url, "r");
         $response = fgets($response, 4096);
         echo $response ; 
```

之后，在同一个 PHP 脚本中，我想用“发布”数据更新我的 SQL 数据库，见下文（数据库已连接）

```
 $query = 'UPDATE data_weather_control SET ';
      $values = array();

      foreach ( $_POST as $key => $value ) {

                  $query .= ' '.$key.' = :'.$key.',';   // the :$name part is the placeholder, e.g. :zip
                  $values[':'.$key] = $value;           // save the placeholder

      };

      $query = substr($query, 0, -1) ; // remove last , 
      $query .= " WHERE id='dataman' " ;

      $qry = $pdo->prepare($query);
      $qry->execute($values);            // bind placeholder array to the query and execute everything 
```

我相信一切看起来都不错，我知道我有“发布”数据，但它不会更新我的数据库，但是如果我单独运行 php 脚本（没有 ajax 调用）它会更新。我的问题：我的 PDO 语句是否正确，或者 PHP 脚本在作为 ajax 请求调用时不能正常执行？

有什么帮助吗？？，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:30:21.290

PHP doesn't know whether the request is AJAX unless you set a variable and check it yourself, so the request should work. I suspect that PHP is looking for 'POST' variables but your ajax may be sending a JSON string that will have to be decoded. Do a print_r($_POST) and see the difference between running it "alone" or from your ajax call. You might need to parse incoming JSON (in the body of the request). Whatever it is, that print_r will help you see the problem.

# c++ - 从 OtherThread 调用 MainThread

> ID：16023233
> 
> 赞同：-1
> 
> 时间：2013-04-15T19:25:07.043
> 
> 标签：c++, multithreading, windows-8, microsoft-metro

我想编写一个 c++ 模板函数，该函数将要执行的函数作为参数并在 Windows 8 Metro 的主线程上执行。主线程将是 System. 有什么帮助吗？就像是 ：

```
 template <class T>
    ExecuteOnMainThread(T t)
    {
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:59:42.120

你应该看看[`CoreDispatcher.RunAsync`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.coredispatcher.runasync?cs-save-lang=1&cs-lang=cpp#code-snippet-2)

# java - cors 无法从 jquery 调用 Web 服务

> ID：16023234
> 
> 赞同：0
> 
> 时间：2013-04-15T19:25:07.827
> 
> 标签：java, jquery, web-services, axis2, cors

我用axis2创建了一个web服务，我用eclipse部署在apache tomcat 7中。

这是我在 Web 服务中转换的类。这只是一个回声：

```
package test.org;
public class TestWS {
    public String echo(String s){
        return ("You typed: " + s);
    }
} 
```

如果我从 Eclipse 中尝试这个 Web 服务，在 Web 服务资源管理器中添加 wsdl 它可以完美地工作，但是当我尝试从 jquery 使用这个 ws 时问题就来了。我可以毫无问题地访问 wsdl，它位于： `http://localhost:8080/SimpleWS/services/TestWS?wsdl`

但是，当我尝试这段代码时，会发生以下错误： XMLHttpRequest cannot load `http://localhost:8080/SimpleWS/services/TestWS`。Access-Control-Allow-Origin 不允许 Origin null。

我一直在阅读有关 CORS 以及在服务器端包含一些类似这样的代码：Access-Control-Allow-Origin: *，但是由于我已经直接使用 eclipse 部署了我的 ws，所以我不知道该怎么做，并且我不确定这是否是我的问题。

先感谢您！！

这是我的代码：

```
<h3>Web service example</h3>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">

function callWS() {
    var soapmessage = "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/' " +
                                    "xmlns:q0='http://org.test' xmlns:xsd='http://www.w3.org/2001/XMLSchema'" +
                                    "xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'>";
                      soapmessage += "<soapenv:Body>";
                      soapmessage += "<q0:echo>";
                      soapmessage += "<q0:s>HELLO</q0:s>";
                      soapmessage += "</q0:echo>";
                      soapmessage += "</soapenv:Body>";
                      soapmessage += "</soapenv:Envelope>";
                      alert(soapmessage);
                      $.ajax({
                          type: 'POST',
                          url: 'http://localhost:8080/SimpleWS/services/TestWS',
                          data: soapmessage,
                          contentType: "application/xml; charset=utf-8",
                          dataType: "xml",
                          success: function (data) {
                             alert(data);
                          },
                          error: function (data) {
                              alert("error" + data.d);
                          }
                     });
                     alert("Form Submitted");
}

</script>

<form method="post" action="">
    <input type="button" onclick="callWS()" value="execute" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:44:41.183

我会建议一种更简单的方法来做同样的事情。

该功能可能是：

```
function callWS() {
    $.ajax({
        url: "http://localhost:8080/SimpleWS/services/TestWS/echo", 
        type: "POST",
        data: { s : "HELLO" }, 
        success: function(data, textStatus, jqXHR) {
            alert($(data).find("return").text());
        },
        error: function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.status + " " + jqXHR.statusText);
        }
    });
} 
```

在 URL 中添加了要调用的操作的名称。数据是一个映射，每个参数都有键值对。

操作的名称和键的名称必须与 WSDL 文档匹配，包括响应中每个元素的名称。您可以通过以下方式查看架构文件：

```
http://localhost:8080/SimpleWS/services/TestWS?xsd 
```

这给出了类似的东西：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" ... >
  <xs:element name="echo">
    <xs:complexType>
      <xs:sequence>
        <xs:element minOccurs="0" name="s" nillable="true" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:element name="echoResponse">
    <xs:complexType>
      <xs:sequence>
       <xs:element minOccurs="0" name="return" nillable="true" type="xs:string"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

该文件列出了两种主要类型（对于本示例），带有元素的请求和带有`s`元素的响应`return`。

WSDL 显示操作的名称。

```
<wsdl:binding name="TestWSHttpBinding" type="ns:TestWSPortType">
  <http:binding verb="POST"/>
  <wsdl:operation name="echo">
    <http:operation location="echo"/>
    <wsdl:input>
      <mime:content type="application/xml" part="parameters"/>
    </wsdl:input>
    <wsdl:output>
      <mime:content type="application/xml" part="parameters"/>
    </wsdl:output>
  </wsdl:operation>
</wsdl:binding> 
```

也可以看看：

*   [HTTP GET & POST 绑定](http://www.w3.org/TR/wsdl#_http)
*   [使用 GET、POST 和 SOAP 绑定访问 Web 服务](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.ii.doc/ad/ciiacws1.htm)

### 关于原产地`null`是不允许的`Access-Control-Allow-Origin`

很可能您正在`XMLHttpRequest`使用本地文件发出请求。例如来自：

```
file:///C:/Users/Paul/Desktop/index.html 
```

域、协议和端口与 WebService 的 URL 不同。[维基百科在同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)中谈到了这一点：

> 术语“来源”是使用运行脚本的 HTML 文档的域名、应用层协议和（在大多数浏览器中）端口号来定义的。当且仅当所有这些值完全相同时，才认为两个资源具有相同的来源。

尝试使用*同一来源*的文件，例如：

```
http://localhost:8080/SimpleWS/index.jsp 
```

# javascript - 根据在 Angular JS 中单击的列表项为 ng-model="searchText" 输入赋值

> ID：16023236
> 
> 赞同：1
> 
> 时间：2013-04-15T19:25:25.477
> 
> 标签：javascript, autocomplete, filter, angularjs

我使用 angular.js (ng-model="searchText") 创建了一个可通过输入进行搜索的列表。单击列表元素时，您可以使用 {{selected | 提取所选项目的内容 json}}。单击列表项时，我想将此选定元素用作输入的值。

我本质上想创建自己的自动完成功能，它始终显示选项列表，在键入时过滤选项，并在单击选项时填写输入。

HTML

```
<html ng-app> 
<section>
   <div id="content-body" class="container search-page"><!-- begin content-body -->
    <div id="content-frame" class="container"></div><!-- end content-frame -->
      <section>
        <div class="search-container">
          <div class="search-wrapper">
            <input type="search" class="input-from" autocomplete="off" placeholder="Search" ng-model="searchText" value="{{searchText}}">
          </div> 
        </div>
      </section>
      <section>
        <div ng-controller="ContentCtrl">
          <ul class="list-group search">
        <!--<li class="list-group-item group-title">
                <span class="icon itinerary-icon"></span>
                Popular Destinations
            </li>-->
              <a ng-click="setMaster(cities)" ng-repeat="city in cities | filter:searchText | limitTo:limit" href="#" class="list-group-item">{{city}}</a>
          </ul>
        </div>
      </section>
   </div><!-- end content-body -->
</html> 
```

JS

```
function ContentCtrl($scope, $http) {
    "use strict";

    $scope.url = '../mobile-site/cities.json';
    $scope.cities = [];
    $scope.limit = 10; // max 10 cities loaded

    $scope.fetchContent = function() {
        $http.get($scope.url).then(function(response){
            $scope.cities = response.data.cities; 
        });
    }

    $scope.fetchContent(); // build cities list

    $scope.setMaster = function(city) {
            $scope.searchText = city; // pull selected city using {{selected | json}}
        }
    } 
```

JSON

```
{
"version": "082B6AF45261B81358E8F99F0FAEC4A4",
"cities": [
"A Friela Maside, Spain",
"A Gudina, Spain",
"AHA, Germany",
"AL, Norway"
]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:37:04.600

我认为您在代码中有一些错误：

```
<div ng-model="chosen">
    <a ng-click="setMaster(cities)" ng-repeat="cities in cities | filter:searchText | limitTo:limit" href="#" class="list-group-item">{{cities}}</a>
</div> 
```

应该是

```
<div ng-repeat="city in cities | filter:searchText | limitTo:limit">
    <a ng-click="setMaster(city)" class="list-group-item">{{city}}</a>
</div> 
```

那我想你想要的是

```
$scope.setMaster = function(city) {
    $scope.searchText = city;
} 
```

另外，我不确定 div 上的 ng-model 是做什么用的，据我所知，它仅用于输入、文本区域和选择。请参阅[http://docs.angularjs.org/api/ng.directive:ngModel](http://docs.angularjs.org/api/ng.directive%3angModel)。

你可能想要这样的小提琴 -> [http://jsfiddle.net/weSpW/3/](http://jsfiddle.net/weSpW/3/)。

# powershell - 使用 Powershell 安装系统字体

> ID：16023238
> 
> 赞同：12
> 
> 时间：2013-04-15T19:25:32.303
> 
> 标签：powershell, windows-server-2008, truetype

我有一个文件夹，里面装满了自定义字体的 TTF 文件。我需要使用 powershell 脚本将它们安装为系统字体（这是在 Windows Server 2008 R2 上）。有人知道如何在powershell中做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-15T19:28:52.837

这很简单。看看下面的片段：

```
$FONTS = 0x14
$objShell = New-Object -ComObject Shell.Application
$objFolder = $objShell.Namespace($FONTS)
$objFolder.CopyHere("C:\test\Myfont.ttf") 
```

它不应该需要重新启动/注销...

0x14 值是特殊文件夹的 CLSID。

此外，我刚刚发现本教程解释了上述每个步骤：

[http://windowsitpro.com/scripting/trick-installing-fonts-vbscript-or-powershell-script](http://windowsitpro.com/scripting/trick-installing-fonts-vbscript-or-powershell-script)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-15T00:56:26.030

只是想发布一个不需要`0x14`硬编码到脚本中的替代方案。将文件对象传递给函数，它将根据文件的位置运行“安装”：

```
Function Install-Font {
   Param (
      [Parameter(Mandatory=$true,ValueFromPipeline=$true)][System.IO.FileSystemInfo[]]$File
   )
   $shell = New-Object -ComObject Shell.Application
   $File | % {
      $Fonts = $shell.NameSpace($_.Directory.Name)
      $font = $Fonts.ParseName($_.Name)
      $font.InvokeVerb("Install")
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-07T21:32:44.357

使用`Shell.Application`COM 对象在 Server Core 上不起作用（至少在 2012 R2 上不起作用）。

我只需将字体文件复制到`C:\Windows\Fonts`（在本例中为 times.ttf），然后使用 PowerShell 添加相应的注册表项即可成功：

```
New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Fonts' -Name 'Times New Roman (TrueType)' -PropertyType String -Value times.ttf 
```

拆卸与安装相反。唯一的缺点是，在安装字体之后以及如果应用程序引用了它，在卸载之前都需要重新启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-19T18:04:37.547

众所周知，Shell 代码在 Remote 和 Build 代理上失败 - 如果使用 shell 的 comobjects 失败并且您正在通过 Remote 或 Build 代理进行审查，那么您将需要使用框架类来执行此操作（[参考](http://www.codewrecks.com/blog/index.php/2016/05/27/avoid-using-shell-command-in-powershell-scipts/)）

```
## Add or Remove Font Files - only tested with TTF font files thus far
#<#
#=======================================================================================================
# ADD or REMOVE MULTIPLE FONT FILES [Using ComObjects]
#=======================================================================================================
# This code will install or uninstall a font using ComObject
# You Must Modify the following variables in order to work
# (A) $dirFiles                ==>  This is the source folder path that contains all of your font files
# (B) $InstallOrUninstall      ==>  $true = Install Font ...  $false = UnInstall Font
#=======================================================================================================
    # Define Working Variables
        $dirFiles = "C:\Temp\Fonts"
        $InstallOrUninstall = $false  # $true = Install = 1  ...or...  $false = UnInstall = 0
        $srcFontFiles = Get-ChildItem "$($dirFiles)\Fonts"
        $Fonts = (New-Object -ComObject Shell.Application).Namespace(0x14)
    # Copy each file into the Font Folder or Delete it - Depends on the $InstallOrUninstall variable setting
        ForEach($srcFontFile in $srcFontFiles) 
        {
            $srcFontFileName = $srcFontFile.name
            $srcFontFileFullPath = $srcFontFile.fullname
            $targFonts = "C:\Windows\Fonts\$($srcFontFileName)"
            If (Test-Path $targFonts -PathType any) { Remove-Item $targFonts -Recurse -Force } # UnInstall Font
            If ((-not(Test-Path $targFonts -PathType container)) -and ($InstallOrUninstall -eq $true)) { $fonts.CopyHere($srcFontFileFullPath, 16) } # Install Font
        }
#> 
```

# shell - 如何在一行中为不同的shell获取所有用户的最后登录时间

> ID：16023241
> 
> 赞同：2
> 
> 时间：2013-04-15T19:25:54.047
> 
> 标签：shell, unix, sh, ksh, csh

我可以使以下行在 ksh 上工作

```
for user in $( awk -F: '{ print $1}' /etc/passwd); do last $user | head -1 ; done | tr -s "\n" |sort 
```

但我想让它在 UNIX sh 和 UNIX csh 上运行。（在 linux sh 中它运行良好，但 linux 不是 unix ......）

我知道这有一些限制，因为似乎每个 UNIX(*) 都有自己的语法变化。

更新：对不起，这里有一些限制：

1.  我不能在磁盘上写，所以我不能保存脚本。
2.  我如何在 CSH 中写这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:40:28.507

这个 awk-script 似乎相当于你上面的循环：

```
{
  cmd = "last "$1
  cmd | getline result
  printf "%s",  result
} 
```

像这样使用它：

```
awk -F: -f script_above.awk /etc/passwd 
```

管道输出到`sort`

作为一个单行：

```
$ awk -F: '{cmd = "last "$1; cmd | getline result;printf "%s", result}' /etc/passwd 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T19:49:48.003

这可能对您有用，应该符合 POSIX：

```
last | awk 'FNR==NR{split($0,f,/:/);a[f[1]];next}($1 in a)&&++b[$1]==1' /etc/passwd - |  sort 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T20:26:08.990

您实际上并不需要 Awk。

```
while IFS=: read user _; do
    last "$user" | head -n 1
done </etc/passwd  # | grep . 
```

与其在 Csh 中重新发明它，不如

```
sh -c 'while IFS=: read user _; do last "$user" | head -n 1; done </etc/passwd' 
```

`wtmp`对于自轮换后未登录的用户，您将获得空输出；也许添加一个`| grep .`来清除那些。（我在上面添加了注释。）

重申一下，`IFS=:`将 shell 的内部字段分隔符设置为冒号，以便在其`read`上拆分密码文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-23T20:59:24.073

只需使用简单的命令：

```
lastlog 
```

# jquery - Jquery拖放复制单元格内容而不是移动它

> ID：16023244
> 
> 赞同：0
> 
> 时间：2013-04-15T19:26:10.687
> 
> 标签：jquery, cell, draggable, droppable

我有 2 张桌子：

*   表 1 包含静态数据，可以复制到表 2 中的任何位置。
*   表 2 可以通过从表 1 复制的数据或通过在该表中**移动数据来更新。**

一切正常，除了**搬家**。当我拖放时它会**复制内容。**

有人有线索吗？

在这里您可以查看[在线示例](http://www.num1.nl/dragdrop/index.php)：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:03:33.147

我通过变通解决了这个问题。我现在只是从原始 TD 中删除内容。我添加了一张额外的桌子作为垃圾桶。

在线示例做了它应该做的一切。但是，我不确定这是否是最有效的方法。如果涉及到jquery，我相当缺乏经验。

因此，如果有人有更优雅的解决方案来做同样的事情，我非常愿意学习:)

以防万一，这是我使用的 JQ 代码：

```
jQuery(function($) {
var td1 = $("#table1 td");
var td2 = $("#table2 td");
var bin = $("#trash td");

td1.draggable({
    cursor: "move",
    appendTo: "body",
    helper: "clone",
    opacity: "0.5",
    revert: "invalid"
});

td2.draggable({
    cursor: "move",
    appendTo: "body",
    helper: "clone",
    opacity: "0.5",
    revert: "invalid"
});

td2.droppable({
    accept: 'td',
    tolerance: "pointer",
    drop: function (event, ui) {
        // check from which table we are dragging
        var fromTable = $(ui.draggable).closest("table").attr("id");
        // check from which td we are dragging
        var fromTD = $(ui.draggable).attr("id");
        // get the inner html content for the td we are dragging the div from 
        var cell = $(ui.draggable).html();
        // insert the complete html content into the target drop cell
        $(this).html(cell);
        // for purposes of result logging / debugging
        var location = $(this).attr('id');
        $('#result').html('Moved '+cell+'<br>From '+fromTable+' / '+fromTD+' (table / td)<br>To cell: '+location+'<br>complete with containing DIV');
        // in case we moved cell content within table2, remove the original content
        if(fromTable == "table2"){
            $(ui.draggable).html('<div></div>');
        }
    }
});

bin.droppable({
    accept: 'td',
    tolerance: "pointer",
    drop: function (event, ui) {
        // check if we are dragging from table 2 
        var fromTable = $(ui.draggable).closest("table").attr("id");
        if(fromTable != "table2"){
            $('#result').html('You cannot move content<br>from '+fromTable+' to the trash bin...');
            return false;
        }
        else {
            // check from which td we are dragging
            var fromTD = $(ui.draggable).attr("id");
            // get the inner html content for the td we are dragging the div from 
            var cell = $(ui.draggable).html();
            // insert the complete html content into the target drop cell
            $(this).html(cell);
            // for purposes of result logging / debugging
            var location = $(this).attr('id');
            $('#result').html('Moved '+cell+'<br>From '+fromTable+' / '+fromTD+' (table / td)<br>To the trash bin');
            // replace the content of the source td after drop
            $(ui.draggable).html('<div></div>');
        }
    }
}); 
```

});

# sql - 如何从 MSSQL 中另一个表的列值创建表结构

> ID：16023245
> 
> 赞同：0
> 
> 时间：2013-04-15T19:26:12.600
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2012

我有一个场景，我在带有 CSV 的表的列中有条目（这些是动态值）。我需要在 sqlserver(MSSQL) 中使用这些值生成表

输入表

```
Value   
FirstName,LastName,SSN  
Address1,City,Zip
HomePhone,CellPhone 
```

输出表1

```
FirstName   LastName    SSN 
```

输出表2

```
Address1    City    Zip 
```

输出表3

```
HomePhone   CellPhone 
```

有人可以帮帮我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:40:33.770

为此，您需要动态 SQL，例如：

```
declare @sql nvarchar(max);

with t as (
    select 'FirstName,LastName,SSN' as value union all
    select 'Address1,City,Zip' union all
    select 'HomePhone,CellPhone'
   )
select @sql = (select 'create table'+CAST(seqnum as varchar(255))+' ('+REPLACE(value, ',', ' varchar(255),') + ' varchar(255)); '
               from (select t.*, ROW_NUMBER() over (order by (select null)) as seqnum
                     from t
                    ) t
               for xml path ('')
              )

exec sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:30:50.633

Try This,

1.  `Select FirstName,LastName,SSN into Table1 from #InputTable`
2.  `Select Address1,City,Zip into Table2 from #InputTable`
3.  `Select HomePhone,CellPhone into Table1 from #InputTable`

# c# - 使用 OpenNETCF.Desktop.Communication 打开 c# 应用程序时出错

> ID：16023246
> 
> 赞同：1
> 
> 时间：2013-04-15T19:26:19.690
> 
> 标签：c#

我有一个使用 c# 创建的应用程序，在制作安装文件并在客户端 PC 上设置它之后，当尝试打开应用程序时它无法启动并给我以下详细信息的错误。

```
Problem signature:
  Problem Event Name:   CLR20r3
  Problem Signature 01: owpdasynchronization.exe
  Problem Signature 02: 2011.1.315.0
  Problem Signature 03: 516a9f0b
  Problem Signature 04: OpenNETCF.Desktop.Communication
  Problem Signature 05: 2.9.4852.25813
  Problem Signature 06: 516a9f0a
  Problem Signature 07: 164
  Problem Signature 08: 1d
  Problem Signature 09: System.DllNotFoundException
  OS Version:   6.1.7601.2.1.0.256.48
  Locale ID:    1033
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

在线阅读我们的隐私声明：http: [//go.microsoft.com/fwlink/ ?linkid=104288&clcid=0x0409](http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409)

如果在线隐私声明不可用，请离线阅读我们的隐私声明：

```
C:\Windows\system32\en-US\erofflps.txt 
```

# perl - 为什么 perl 会为这个 if 语句得到一个“真”

> ID：16023251
> 
> 赞同：0
> 
> 时间：2013-04-15T19:26:28.830
> 
> 标签：perl, if-statement

我是 perl 的新手，最近发现了一个我无法弄清楚的问题。

这是我的代码

```
my ($a, $b, $c);
$a = 1.11;
$b = 2.22;
$c = 0;

if ( (0, 0, 0) == ($a, $b, $c))
{
    return true;
}
else
{
    return false;
} 
```

结果看起来非常有趣。如果我指定 $c = 0（而 $a 和 $b 不等于 0），那么这个 if 语句返回 true，但我试图将 $a 或 $b 设置为 0，然后这个语句返回 false。

该语句的目的是检查是否所有 $a, $b, $c 都是零，但似乎每当 $c = 0 时，它都会返回 true，谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:40:19.083

`==`强制标量上下文。标量上下文中的列表（不要与数组混淆！）是它的最后一个元素。因此，您实际上是在比较 0 == $c 当且仅当 $c 本身为 0 时才为真。

`$a`但是，这并不能回答为什么如果或为 0时这不起作用的问题`$b`。我很确定它与特殊变量有关`$a`并且`$b`是特殊变量（例如在 中使用它们`sort`）。如果您使用了其他变量名称，例如，那么and`(0, 0, 0) == ($var1, $var2, $c)`的内容确实无关紧要。`$var1``$var2`

在那种情况下`use warnings`会给你一个线索：`Useless use of private variable in void context`. 这是指`$var1`和`$var2`都是列表的一部分，但不是该列表的最后一个元素，因此它们的值在语句中根本不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:33:53.020

您应该将 if 条件更改为：

```
return ( ($a == 0) and ($b == 0) and ($c == 0) ) ? 1 : 0; 
```

Perl 中没有“真”和“假”的特殊词。如果您有 perl 5.10+，这可能会帮助您：

```
my @x = qw(1 0 0);
my @zeros = qw(0 0 0);

return ( @x ~~ @zeros ) ? 1 : 0 ; 
```

# jquery - 日程安排周的一天渲染

> ID：16023256
> 
> 赞同：4
> 
> 时间：2013-04-15T19:26:49.257
> 
> 标签：jquery, fullcalendar

在 Arshaw 的 fullcalender 插件的 1.6 版中，他添加了 dayRender 回调。

此回调仅适用于 basicweek 和 basicday 视图。
但我需要对议程日和议程周进行回调。

我喜欢更改特殊单元格的背景颜色。
例如，下周一上午 8 点至上午 11 点为红色。

我可以使用任何回调吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T10:05:06.630

在 1.6 版本中，没有直接的回调方法来执行此操作。如果您使用的是 fullcalendar.min.js，您可以通过创建如下函数来实现：-

```
function yourfunction(currentDate)
{
    // your code
} 
```

并将其放置在

```
<script src="/fullcalendar/fullcalendar/fullcalendar.min.js" type="text/javascript"></script> 
```

然后找到代码“l(){var t,e,n,r,a=f(new Date);” 在 fullcalendar.min.js 中并在函数“l”的结束标记之前调用您的函数。您的代码将如下所示：-

```
l(){var t,e,n,r,a=f(new Date);if(Qe){var o=un(N(0),Ke);Je?o+=Ge:o=Ge+o,ee.find(".fc-week-number").text(o)}for(t=0;Le>t;t++)r=N(t),e=ne.eq(t),e.html(un(r,$e)),n=ae.eq(t),+r==+a?n.addClass(Ye+"-state-highlight fc-today"):n.removeClass(Ye+"-state-highlight fc-today"),yourfunction(r)==false?n.addClass("fc-disabled"):n.removeClass('fc-disabled'),$(e.add(n),r)} 
```

我正在添加课程以禁用这一天。祝你好运..！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:35:08.630

没有任何回调可以使用。你可以阅读[这篇](https://stackoverflow.com/questions/2895077/fullcalendar-change-agendaday-background-color)文章并得到这个想法，但它基于以前版本的 fullcalendar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T00:13:35.240

我做了一个简单的解决方案。
在第 3266 行的 1.6 版 fullCalendar.js 上，我添加了这行代码：

```
trigger('dayRender', t, date, $(bodyCell)); 
```

并且使 dayRender 作为具有相同参数的事件触发（我使用该事件为天单元格的 bg 着色）

那行进入 for `colCnt`inside `updateCells()`，就在代码的上方`setDayID(headCell.add(bodyCell), date)`；

# air - Red5 无法在 Adob e AIR 中显示视频

> ID：16023257
> 
> 赞同：1
> 
> 时间：2013-04-15T19:26:53.863
> 
> 标签：air, adobe, red5

我有一个 Adob​​e AIR 应用程序，我用它来使用 RED5 流式传输一些视频。AIR 应用程序具有以下 Flex 代码：

```
<s:VideoDisplay id="vidBox" autoPlay="true" autoRewind="true" x="6" y="11" width="95%" height="90%" scaleMode="zoom">
    <s:source>
        <s:DynamicStreamingVideoSource host="rtmp://localhost/TestMovie" streamType="recorded">
            <s:DynamicStreamingVideoItem streamName="2hourmovie.flv" /> 
        </s:DynamicStreamingVideoSource>
    </s:source>
</s:VideoDisplay> 
```

当我运行 Air 应用程序时，我看到的是一组相当漂亮的闪烁和变化的颜色，而不是电影。令人惊讶的是，声音非常好。

我在基于 Web 的应用程序中使用完全相同的代码，并且电影播放没有问题。我看到图像和声音，一切都很好。

我怀疑 AIR 有什么问题搞砸了画面，或者我与 AIR 交互的方式不太正确？或者我在 AIR 或 RED5 中发现了一个错误？

有人请指教。我正在使用 Red5 v1.0.1、Adobe AIR v3.7，并且正在使用 Flex Builder 4.6 进行开发。

更新：

有关此问题的更多信息：它似乎只发生在非常大的 FLV 文件中。我在我的流目录中包含了一些 1 小时的电影并运行了 AIR 应用程序，电影显示没有问题。其他长度较长的文件也有同样的显示故障。请注意，无论 FLV 文件大小如何，Web 浏览器都*不会*发生故障。

显然，AIR 有一些限制，使其无法正确显示超过一定长度的 FLV。要么，要么 AIR 应用程序必须以不同于处理较短 FLV 的方式处理较长的 FLV。我不确定，也找不到关于此事的任何文件。

我正在努力缩小使 AIR 视频对象失败所需的文件大小。

我是否在 Adob​​e AIR 中发现了错误？或者是否需要调整一些编码或配置以使查看器能够正常处理较大的 FLV 文件？

有人请指教...

# javascript - 是否可以附加 2 个 jQuery 对象？

> ID：16023258
> 
> 赞同：-1
> 
> 时间：2013-04-15T19:27:01.663
> 
> 标签：javascript, jquery

例如，在这里我得到一个错误

```
jQuery([jQuery('<td/>').text('Component'), 
        jQuery('<td/>').text('Value')]).appendTo(my_table) 
```

是否可以通过一个操作将两个元素附加到`my_table`对象？

也仅供参考

```
var my_table = jQuery('<table/>').attr({'class': 'table table-hover table-bordered', 'id': 'parse-result'}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:32:07.437

有两个明显的选择。

改为使用`.append`- 它可以添加要添加的元素列表：

```
my_table.append(
    jQuery(...),
    jQuery(...)
); 
```

或用于`.add`组合 jQuery 列表：

```
jQuery(...).add(jQuery(...)).appendTo(my_table) 
```

就个人而言，我会使用前者。恕我直言，它干净多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:37:06.960

我会这样做：

```
$('#myTable').append( //Selects myTable and appends the tr below
    $('<tr></tr>').append( //Creates a new tr element and appends the tds below
        $('<td></td>').text('Cell 1'), //Creates a new td element
        $('<td></td>').text('Cell 2') //Creates a new td element
    )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:33:34.460

```
var my_table = jQuery('<table/>').attr({'class': 'table table-hover table-bordered', 'id': 'parse-result'});
my_table.append('<td>Component</td>', '<td>Value</td>');
$('body').append(my_table); 
```

[http://jsfiddle.net/3T4W7/](http://jsfiddle.net/3T4W7/)

# java - 使用 runtime.getRuntime().exec() 时 Jar 文件如何工作

> ID：16023261
> 
> 赞同：4
> 
> 时间：2013-04-15T19:27:17.040
> 
> 标签：java, jar, runtime, exec, runtime.exec

我正在尝试创建一个 jar 文件，只需单击一下即可执行我的游戏。我的游戏超出了 java 的默认分配堆内存，所以我必须使用 -Xmx1000m 运行我的代码。我一直在网上进行研究，不幸的是，似乎没有办法告诉 jar 文件以超过默认内存来让我的代码变得有趣。相反，我创建了另一个类，它将使用运行时从另一个主方法中编译我的代码，并使用它创建了一个 jar 文件：

```
import java.io.*;
public class RuntimeExec{
public static void main(String[] args){
    try
    {
    Process process = Runtime.getRuntime().exec("java -Xmx1000m Controller");
    process.waitFor();
    int exitCode = process.exitValue();
    if(exitCode == 0) { /* success*/ }
    else { /*failed*/ }
    }
    catch (Exception e)
    {e.printStackTrace();}
}

} 
```

这可行，但是我认为它仅有效，因为它运行文件夹中我现有的类，而不是我存储在 jar 中的类。有没有办法让 jar 在其中运行一个类或组合两个不同的 jar 来解决内存堆问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:39:46.237

为用户提供轻松安装的整个解决方案是部署应用程序。使用[Java Web 开始](https://stackoverflow.com/tags/java-web-start/info)。它可以为应用程序设置 RAM，还可以安装桌面快捷方式来启动它。JWS 比对`exec`.

* * *

但是，如果 JWS 出于某种原因不适合此应用程序，请参阅[`IWantToBeBig`](https://stackoverflow.com/a/6078598/418556)会导致 Jar 拥有足够内存的 hack（类似于您`exec`在上面使用的方式，但在重新启动应用程序时使用起来稍微健壮一些`ProcessBuilder`。没有足够的内存）。

组织桌面快捷方式以允许用户通过单击启动它，留给读者作为练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:43:43.237

有很多方法可以做到：

1.  正如你所提到的，通过另一个 Jar 文件来触发你的游戏文件
2.  正如@Perception 提到的，有一个批处理文件可以启动你的游戏。但要小心，如果从网络下载，用户必须设置脚本可运行的权限
3.  构建安装程序。在 Mac 上，使用适用于 Java 7 的 Oracle [Java App bundler](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)，适用于 Java 6 的 Apple App bundler 构建`.app`文件。您仍然无法重新分发它，因为不会设置必要的权限。为应用程序文件构建一个 dmg。这可以用于分发。适用于 Windows 的类似安装程序

第三种技术是最好的，因为您可以很好地打包依赖项，设置所有 JVM 参数等

# c++ - 意外的非常量 std::initializer_list

> ID：16023262
> 
> 赞同：8
> 
> 时间：2013-04-15T19:27:17.897
> 
> 标签：c++, c++11, variadic-templates, compile-time, initializer-list

我玩弄了一些索引技巧，看​​看我可以去哪里，遇到了一个奇怪的错误……首先，简单的不那么旧的索引：

```
template<std::size_t...>
struct indices {};

template<std::size_t N, std::size_t... Indices>
struct make_indices:
    make_indices<N-1, N-1, Indices...>
{};

template<std::size_t... Indices>
struct make_indices<0, Indices...>:
    indices<Indices...>
{}; 
```

我创建了一个从 a 派生的编译时数组类，`std::initializer_list`并使其可索引（假设您的编译器支持[N3471](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3471.html)。无论如何它将在下一个标准中）。这里是：

```
template<typename T>
struct array:
    public std::initializer_list<T>
{
    constexpr array(std::initializer_list<T> values):
        std::initializer_list<T>(values)
    {}

    constexpr auto operator[](std::size_t n)
        -> T
    {
        return this->begin()[n];
    }
}; 
```

因此，我尝试创建一个函数，该函数`array`在向其每个成员添加 1 后返回一个副本：

```
template<typename T, std::size_t... I>
auto constexpr add_one(const array<T>& a, indices<I...>)
    -> const array<T>
{
    return { (a[I]+1)... };
} 
```

并完成代码，这是我的主要内容：

```
int main()
{
    constexpr array<int> a = { 1, 2, 3 };
    constexpr auto b = add_one(a, make_indices<a.size()>());

    return 0;
} 
```

我不认为该代码无论如何都会编译，但我对错误消息感到非常惊讶（这是[ideone](http://ideone.com/gBRfhg)代码）：

```
In function 'int main()':
error: 'const smath::array<int>{std::initializer_list<int>{((const int*)(& const int [3]{2, 3, 4})), 3u}}' is not a constant expression 
```

那么，有人可以向我解释上面代码中的编译器究竟是什么不够恒定吗？

**编辑：**该问题的后续行动

*   [声明 constexpr std::initializer_list 对象是否合法？](https://stackoverflow.com/q/16063123/1364752)
*   [关于常量表达式的困惑](https://stackoverflow.com/q/16057690/1364752)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T00:22:12.020

来自：男人本人 [http://www.stroustrup.com/sac10-constexpr.pdf](http://www.stroustrup.com/sac10-constexpr.pdf)

具体来说：它的返回类型和它的参数类型（如果有的话）是文字类型（参见 x2.2）。具体而言，文字类型包括 bool、int 或 double；它的主体是一个形式为 { return expr; 的复合语句；其中 expr 是这样的，如果适当类型的任意常量表达式替换 expr 中的参数，则结果表达式是 x2 的介绍段落中定义的常量表达式。表达式 expr 称为潜在常量表达式。

# cassandra - CQL 支持哪些算术运算？

> ID：16023264
> 
> 赞同：1
> 
> 时间：2013-04-15T19:27:27.747
> 
> 标签：cassandra

Cassandra CQL 查询的 SELECT 部分是否支持简单的算术运算，例如 sum (+)、减法 (-)、除法 (/)、乘法 (*)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:02:09.810

`COUNT`是迄今为止唯一的一个，但这是因为 cql 仍在成熟为一种全功能语言。您可以请求执行算术运算（[通过 Apache C* Jira](https://issues.apache.org/jira/browse/CASSANDRA#selectedTab=com.atlassian.jira.plugin.system.project%3asummary-panel)），但我认为 CQL 解决方案可以让应用程序处理这些简单的事情。

# excel - 为什么我的收藏是空白的？

> ID：16023265
> 
> 赞同：0
> 
> 时间：2013-04-15T19:27:34.147
> 
> 标签：excel, vba

这是一个 VBA 脚本。我不确定为什么我的收藏没有填充“按市场”表。

```
Sub ArrayPractice()

Dim r As Integer
Dim i As Integer
Dim a As Integer
Dim numberOfRows As Integer
Dim names() As String
Dim resourceCollect As Collection

Dim Emp As Resource
Dim Count As Long

Set resourceCollect = New Collection

a = Worksheets("DATA").Range("A:A").Cells.SpecialCells(xlCellTypeConstants).Count
r = 2 'row that i start looping from
i = 0

For Each Emp In resourceCollect

For Count = 0 To a
Emp.Name = Cells(r, 1).Value
Emp.Title = Cells(r, 2).Value
Emp.City = Cells(r, 3).Value
resourceCollect.Add Emp
r = r + 1
Next Count
Next Emp

''''print the array!''''

Sheets.Add.Name = "By Market"
Sheets.Add.Name = "By Resource Level"
Sheets.Add.Name = "By Resource Manager"

Sheets("By Market").Select
Range("C36").Select
r = 36
For Each Emp In resourceCollect
If Emp.City = "Dallas" Then
Cells(r, 3).Select
Debug.Print Emp.Name
r = r - 1
End If
Next Emp

Range("D36:D36").Select
r = 36
For Each Emp In resourceCollect
If Emp.City = "Denver" Then
Cells(r, 4).Select
Debug.Print Emp.Name
r = r - 1
End If
Next Emp

Range("E36:E36").Select
r = 36
For Each Emp In resourceCollect
If Emp.City = "Houston" Then
Cells(r, 5).Select
Debug.Print Emp.Name
r = r - 1
End If
Next Emp

Range("F36:F36").Select
r = 36
For Each Emp In resourceCollect
If Emp.City = "Kansas City (Missouri)" Then
Cells(r, 6).Select
Debug.Print Emp.Name
r = r - 1
End If
Next Emp

End Sub 
```

**更新**

根据约瑟夫的回答，这就是我尝试过的。我还没有让它工作。

这是我一直在搞砸的几个不同的潜艇。他们都试图解决同样的问题。

```
Sub stackResources()

Dim c As New Collection

Dim r1 As Excel.Range 'an object
Dim r2 As Excel.Range
Dim r3 As Excel.Range

Set r1 = Range("A1")
Set r2 = Range("B1")
Set r3 = Range("C1")

c.Add r1
c.Add r2
c.Add r3

Sheets("By Market").Select
Range("A1").Select

Dim i As Long
For i = 1 To c.Count
    Debug.Print c.Item(i)
    Next

End Sub

Sub collectionTest()
Dim c As New Collection

Dim emp As Resource

Sheets("DATA").Select

Range("A1").Select

Do Until Selection.Value = ""
    emp.name = Selection.Value
        ActiveCell.Offset(0, 1).Select
    emp.Title = Selection.Value
        ActiveCell.Offset(0, 1).Select
    emp.city = Selection.Value
        c.Add emp

    Loop

Sheets("By Market").Select
Range("A1").Select

Dim i As Long
For i = 1 To c.Count
    Debug.Print c.Item(i)
    Next

End Sub

Sub printACollection()

Dim c As New Collection

Dim s1 As String
Dim s2 As String
Dim s3 As String

Sheets("DATA").Select

Dim r As Long

r = 1
For Each cell In Range("A1")
    s1 = cell.Value
    c.Add s1
    ActiveCell.Offset(0, 1).Select
    s2 = cell.Value
    c.Add s2
    ActiveCell.Offset(0, 1).Select
    s3 = cell.Value
    c.Add s3
    Next

    Sheets("By Market").Select

      Dim i As Long

    For i = 1 To c.Count
        Debug.Print c.Item(i)
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:44:34.323

正在发生的事情是其中`resourceCollect`没有任何内容，因此实际上您没有遍历任何内容。您必须将项目添加到集合中才能循环访问它。

这是一个可能有帮助的基本教程：

[http://www.wiseowl.co.uk/blog/s239/collections.htm](http://www.wiseowl.co.uk/blog/s239/collections.htm)

编辑：回答您的评论：

```
Public Sub test()
    Dim c As New Collection

    Dim s1 As String
    Dim s2 As String
    Dim s3 As String

    s1 = "hello"
    s2 = ","
    s3 = "world"

    c.Add s1
    c.Add s2
    c.Add s3

    Dim s As String

    For Each s In c
        Debug.Print s
    Next
End Sub 
```

这将失败，因为您无法使用 String 数据类型循环...因为它只是一个数据类型而不是对象。在这种情况下，您必须遍历索引（索引？）：

```
 Dim i As Long

    For i = 1 To c.Count
        Debug.Print c.Item(i)
    Next 
```

但是，如果您使用 VBA 已知的对象，例如 Range：

```
Public Sub test2()
    Dim c As New Collection

    Dim r1 As Excel.Range ' an object
    Dim r2 As Excel.Range

    Set r1 = Range("A1")
    Set r2 = Range("A3")

    c.Add r1
    c.Add r2

    Dim r As Excel.Range
    For Each r In c
        Debug.Print r.Address
    Next r
End Sub 
```

这将工作得很好。

如果您使用自定义类，您可以使用对象循环遍历集合，就像我们在此处使用 Range 对象所做的那样。我引用的链接解释了可能存在的问题以及创建自己的 Collection 对象的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T16:10:12.347

这是基于您的评论的另一个答案。我想这就是你要找的。如果没有，请更具描述性并修改您的问题。

您有一个名为 Employee 的类模块，代码如下：

```
Option Explicit

Public Name As String
Public City As String
Public Title As String 
```

然后，在常规模块中，您可以拥有如下所示的内容。请密切注意该示例并根据您的需要对其进行修改。我留下了排序代码，所以你可以自己试一试。另外，请注意我如何将工作拆分为单独的功能/子项。这使您的代码保持干净且易于遵循。希望这可以帮助。

```
Option Explicit

Public Sub main()
    Application.ScreenUpdating = False

    Dim c As Collection
    Dim newWs As Excel.Worksheet
    Dim rData As Excel.Range

    Set rData = ThisWorkbook.Sheets("Sheet1").Range("A2:C3")

    Set c = getData(rData)
    Set newWs = ThisWorkbook.Worksheets.Add

    newWs.Name = "New report"

    Call putCollectionInWorksheet(newWs, c)

    Call sortData(newWs)

    Application.ScreenUpdating = True
End Sub

Private Function getData(ByRef rng As Excel.Range) As Collection
    ' create new collection of data
    Dim c As New Collection
    Dim i As Long
    Dim e As Employee
    For i = 1 To rng.Rows.Count
        Set e = New Employee

        e.Name = rng.Cells(i, 1) ' name column
        e.Title = rng.Cells(i, 2) ' title column
        e.City = rng.Cells(i, 3) ' city column

        c.Add e
    Next i

    Set getData = c
End Function

Private Sub putCollectionInWorksheet(ByRef ws As Excel.Worksheet, ByRef cData As Collection)
    Dim i As Long, j As Long
    Dim emp As Employee

    ' create header info
    ws.Range("A1:C1") = Array("Name", "Title", "City")
    i = 2 ' current row

    For Each emp In cData
        ws.Cells(i, 1).Value = emp.Name
        ws.Cells(i, 2).Value = emp.Title
        ws.Cells(i, 3).Value = emp.City

        i = i + 1
    Next emp
End Sub

Private Sub sortData(ByRef ws As Excel.Worksheet)
    ' code here
End Sub 
```

# jquery - jQuery可以删除此文本吗？

> ID：16023267
> 
> 赞同：-1
> 
> 时间：2013-04-15T19:27:36.693
> 
> 标签：jquery, sharepoint, dom

我正在尝试找到一种解决方法，以从 SharePoint 2007 网站上的“公告摘要视图”中删除“by”行。由于各种原因，我在网上找到的任何东西似乎都不起作用 - 所以我想采取另一条路线，前提是一些有才华的灵魂会有所帮助。有谁知道如何让 jQuery 发挥一些魔力，以便第一个 HTML 块最终呈现为第二个 HTML 块？

区块 1：

```
<a onfocus="OnLink(this)" href="/Lists/Our%20Announcements/DispForm.aspx?ID=36" ONCLICK="GoToLink(this);return false;" target="_self">Title of Annoucement  </a><IMG SRC="/_layouts/1033/images/new.gif" alt="New">&nbsp;</span><br>by <nobr><span><A ONCLICK="GoToLink(this);return false;" HREF="/_layouts/userdisp.aspx?ID=2258">Lastname, FirstName I.</A><img border="0" height="1" width="3" src="/_layouts/images/blank.gif" alt="" /><a href="javascript:" onclick="IMNImageOnClick();return false;" class="ms-imnlink"><img title="" alt="No presence information" name="imnmark" border="0" valign="middle" height="12" width="12" src="/_layouts/images/blank.gif" sip="email@address.com" id="imn0,type=smtp" ></a></span></nobr></td><td width=20% align="right" nowrap class="ms-vb">&nbsp;4/15/2013 12:51 PM</td></tr><tr><td colspan=2 class="ms-vb"> <div id="{291345DC-BEAE-47B6-8F53-41C07838090C}36"><div class=ExternalClass5BF6EE28A88D436CAC2FE553E7F2CED7><div> 
```

区块 2：

```
<a onfocus="OnLink(this)" href="/Lists/Our%20Announcements/DispForm.aspx?ID=36" ONCLICK="GoToLink(this);return false;" target="_self">Title of Annoucement  </a><IMG SRC="/_layouts/1033/images/new.gif" alt="New">&nbsp;</span></td><td width=20% align="right" nowrap class="ms-vb">&nbsp;4/15/2013 12:51 PM</td></tr><tr><td colspan=2 class="ms-vb"> <div id="{291345DC-BEAE-47B6-8F53-41C07838090C}36"><div class=ExternalClass5BF6EE28A88D436CAC2FE553E7F2CED7><div> 
```

这是我需要删除的内容：

```
<br>by <nobr><span><A ONCLICK="GoToLink(this);return false;" HREF="/_layouts/userdisp.aspx?ID=2258">Lastname, FirstName I.</A><img border="0" height="1" width="3" src="/_layouts/images/blank.gif" alt="" /><a href="javascript:" onclick="IMNImageOnClick();return false;" class="ms-imnlink"><img title="" alt="No presence information" name="imnmark" border="0" valign="middle" height="12" width="12" src="/_layouts/images/blank.gif" sip="email@address.com" id="imn0,type=smtp" ></a></span></nobr> 
```

----------------------------------------更新以获得更好的格式------ ------------- 真的没有什么我可以看到 jQuery 可以选择的。此外，这来自 SharePoint，因此我无法将任何 id 或 div 添加到生成的代码中。

区块 1：

```
 <TR>
      <TD width=80% class="ms-vb" style="padding-bottom: 3px">
        <span class="ms-announcementtitle"><a onfocus="OnLink(this)" href="/Lists/Our%20Announcements/DispForm.aspx?ID=36" ONCLICK="GoToLink(this);return false;" target="_self">Title of Annoucement  </a><IMG SRC="/_layouts/1033/images/new.gif" alt="New">&nbsp;</span>
        <br>by 
        <nobr>
            <span><A ONCLICK="GoToLink(this);return false;" HREF="/_layouts/userdisp.aspx?ID=2258">Lastname, FirstName I.</A><img border="0" height="1" width="3" src="/_layouts/images/blank.gif" alt="" /><a href="javascript:" onclick="IMNImageOnClick();return false;" class="ms-imnlink"><img title="" alt="No presence information" name="imnmark" border="0" valign="middle" height="12" width="12" src="/_layouts/images/blank.gif" sip="email@address.com" id="imn0,type=smtp" ></a></span>
        </nobr>
      </td>
      <td width=20% align="right" nowrap class="ms-vb">&nbsp;4/15/2013 12:51 PM</td>
    </tr>
    <tr>
        <td colspan=2 class="ms-vb"> 
            <div id="{291345DC-BEAE-47B6-8F53-41C07838090C}36">
            <div class=ExternalClass5BF6EE28A88D436CAC2FE553E7F2CED7>
            <div>
            <div>
                <p style="line-height:normal;margin:0in 0in 0pt;vertical-align:top" class=MsoNormal>
                    <b>
                        <span style="font-family:'Arial','sans-serif';color:black;font-size:9pt">
                            <em>A message from Firstname Lastname</em>
                        </span>
                    </b>
                </p>
                <p style="line-height:normal;margin:0in 0in 0pt;vertical-align:top" class=MsoNormal>
                    <span style="font-family:'Arial','sans-serif';color:black;font-size:9pt"></span> 
                </p>
                <p style="line-height:normal;margin:0in 0in 0pt;vertical-align:top" class=MsoNormal>
                    <span style="font-family:'Arial','sans-serif';color:black;font-size:9pt">Here is the message </span>
                </p>
                <p style="line-height:normal;margin:0in 0in 0pt;vertical-align:top" class=MsoNormal>
                    <span style="font-family:'Arial','sans-serif';color:black;font-size:9pt"></span> 
                </p>
                <p style="line-height:normal;margin:0in 0in 0pt;vertical-align:top" class=MsoNormal>
                    <span style="font-family:'Arial','sans-serif';color:black;font-size:9pt">To...
            </div>
        </TD>
    </TR>
    <TR>
        <TD>
            <font size=1>&nbsp;</font>
        </TD>
    </TR> 
```

区块 2：

```
 <TR>
      <TD width=80% class="ms-vb" style="padding-bottom: 3px">
        <span class="ms-announcementtitle"><a onfocus="OnLink(this)" href="/Lists/Our%20Announcements/DispForm.aspx?ID=36" ONCLICK="GoToLink(this);return false;" target="_self">Title of Annoucement  </a><IMG SRC="/_layouts/1033/images/new.gif" alt="New">&nbsp;</span>
      </td>
      <td width=20% align="right" nowrap class="ms-vb">&nbsp;4/15/2013 12:51 PM</td>
    </tr>
    <tr>
        <td colspan=2 class="ms-vb"> 
            <div id="{291345DC-BEAE-47B6-8F53-41C07838090C}36">
            <div class=ExternalClass5BF6EE28A88D436CAC2FE553E7F2CED7>
            <div>
            <div>
                <p style="line-height:normal;margin:0in 0in 0pt;vertical-align:top" class=MsoNormal>
                    <b>
                        <span style="font-family:'Arial','sans-serif';color:black;font-size:9pt">
                            <em>A message from Firstname Lastname</em>
                        </span>
                    </b>
                </p>
                <p style="line-height:normal;margin:0in 0in 0pt;vertical-align:top" class=MsoNormal>
                    <span style="font-family:'Arial','sans-serif';color:black;font-size:9pt"></span> 
                </p>
                <p style="line-height:normal;margin:0in 0in 0pt;vertical-align:top" class=MsoNormal>
                    <span style="font-family:'Arial','sans-serif';color:black;font-size:9pt">Here is the message </span>
                </p>
                <p style="line-height:normal;margin:0in 0in 0pt;vertical-align:top" class=MsoNormal>
                    <span style="font-family:'Arial','sans-serif';color:black;font-size:9pt"></span> 
                </p>
                <p style="line-height:normal;margin:0in 0in 0pt;vertical-align:top" class=MsoNormal>
                    <span style="font-family:'Arial','sans-serif';color:black;font-size:9pt">To...
            </div>
        </TD>
    </TR>
    <TR>
        <TD>
            <font size=1>&nbsp;</font>
        </TD>
    </TR> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T21:20:19.207

用这个 ：

```
$('.ms-partline').parent().parent().parent().remove(); 
```

它只会删除共享点中的视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:32:45.077

你可以这样做来移除它，尽管它可能有助于了解包裹它的东西，这样你就不会意外移除需要保留的东西。在我的示例中，我刚刚在罪魁祸首周围放置了一个 div：

演示：http: [//jsfiddle.net/lucuma/yyEXU/1/](http://jsfiddle.net/lucuma/yyEXU/1/)

代码：

```
$('div').html($('div').html().replace('by','')) 
```

或者您可以使用 body 或 document 更通用：

```
$('body').html($('body').html().replace('by','')); 
```

由于`td's`包含 by 您可以优化它并查找单词`by`，并且仅在需要时才对它们进行替换：

```
$('td').each(function() {
  if ($(this).text().indexOf('by')>-1) 
    $(this).html($(this).html().replace('by',''));
    $('nobr', this).remove();  // if the nobr contains by we remove this.
     // $(this).empty()  // this will remove the contents and keep the tags.
} 
```

# php - 对 PHP 表单验证实践感到困惑

> ID：16023269
> 
> 赞同：2
> 
> 时间：2013-04-15T19:27:39.800
> 
> 标签：php, forms, validation

我是 PHP 新手，只花了两个星期的时间。我目前正在阅读“ *PHP 和 MySQL Web 开发*”，但在我正在处理的当前站点上的表单验证方面我应该做些什么。我确实决定第一次使用 HTML5Boilerplate，一切都已编码并且效果很好，但我似乎无法弄清楚如何制作我的表单。在我的表格中，我所需要的只是`Name` `email`并且`message`我正在使用该`$_post`方法。

*   许多教程建议我对, 使用数组`$name`，但我想知道这是否是最佳实践？`$email``$message`
*   我还应该将 JavaScript 验证作为后备吗？
*   如果我使用 PHP，有没有办法将所有提交的内容视为文本，还是 PHP 中的默认设置？
*   我想创建一个简单的表单验证码，`2+2`它需要一个输入框，`4`我想知道最好的方法是`if ($_POST['submit'] && $human == '4')`？
*   我已经阅读了几条关于使用`$email = htmlspecialchars`不好的评论，有人可以解释为什么吗？

我为这个线程道歉，但我在一周内阅读了几个（我相信 15 个）关于 PHP 表单验证的教程，它们都有其优点和缺点，我想开始正确使用 PHP。我确实尝试在我的 BoilerPlate 中实现[Eric Martin 的](http://www.ericmmartin.com/projects/simplemodal-demos/)表单，但它不起作用，我也没有在 Firefox 中收到任何浏览器错误。

如果有帮助，这些是我读过的一些教程：

1.  [如何使用 HTML5、CSS3 和 PHP 创建联系表单](http://www.tangledindesign.com/blog/how-to-create-a-contact-form-using-html5-css3-and-php/)
2.  [如何创建基于 Ajax 的 HTML5/CSS3 联系表单](http://www.hongkiat.com/blog/ajax-html5-css3-contact-form-tutorial/)
3.  [集成 HTML5、CSS 和 PHP 以创建非常基本的联系表单](http://www.developerdrive.com/2011/09/integrating-html5-css-and-php-to-create-a-very-basic-contact-form/)
4.  [如何创建 Kick-Ass PHP 联系表单](http://www.1stwebdesigner.com/tutorials/custom-php-contact-forms/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:43:50.467

我按照要点的顺序对我的回答进行了编号...

1.  $name、$email 和 $message 在提交时已经在一个数组中，$_POST。将它们移动到另一个变量只是一种偏好（不一定是最佳实践）。当做一个长表格时，必须为每个变量键入 $_POST 会很累。

2.  Javascript 验证是一种方便，而不是后备。PHP 将是你的后备。JS 不是必需的，但很有帮助。您应该始终在 PHP 中进行验证，因为可以轻松绕过 JS，但是 JS 很好。如果我提交了一个错误的表单并且我必须等待整个页面加载才能发现，我可能不会再次填写表单来更正它。在 JS 中更好的是在模糊时验证每个字段（即当光标离开字段时），以便在出现错误时立即返回。

3.  PHP 不是严格类型化的意思`'2' == 2 == 2.0`。PHP 将尝试隐式转换几乎任何类型。

4.  制作图像，将其展示给他们，然后了解预期的响应并像任何其他领域一样进行比较。如果要动态绘制图像，只需生成 2 个随机数，将结果存储在会话中，使用 gd 使用数学表达式绘制图像并在发布时进行比较。

5.  htmlspecialchars 将翻译许多有效字符。翻译后，它们可以被反转，但如果不反转，电子邮件将不再有效并且不会到达预期的目的地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:54:03.777

我知道这并不能回答所有问题，但希望这会有所帮助。

> 许多教程建议我为 $name、$email 和 $message 使用数组，但我想知道这是否是最佳实践？

不知道你在这个上是什么意思，请详细说明？

> 我还应该将 JavaScript 验证作为后备吗？

这绝对是个好主意。这与其说是一种恭维，不如说是一种回退。真正重要的是您的 PHP 会处理验证，因此不会发生 MySQL 注入（或其他不良事件）。任何 JS 验证都可以轻松绕过，所以你不能依赖它。JS 验证主要是一种用户友好的方式来显示一个字段是必需的还是格式不正确。

> 如果我使用 PHP，有没有办法将所有提交的内容视为文本，还是 PHP 中的默认设置？

PHP 没有关于变量的内在类型。话虽如此，您可以使用强制转换和函数来确保变量是数字等。对于表单，如果您有多个具有相同名称的复选框 value `foods[]`，那么`$_POST['foods']`它就是一个数组。大多数其他字段以文本形式提交。

> 我想用 2+2 创建一个简单的表单验证码，需要输入框 4，我想知道用 if ($_POST['submit'] && $human == '4' )?

我会用谷歌搜索一个很好的 PHP 验证码库。演示通常非常全面且易于实施。

> 我已经阅读了几条关于使用 $email = htmlspecialchars 不好的评论，有人可以解释为什么吗？

我会考虑使用正则表达式验证电子邮件，一些函数也可以这样做，请参阅：[如何在 PHP 中验证电子邮件？](https://stackoverflow.com/questions/5855811/how-to-validate-an-email-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:41:39.913

> 许多教程建议我为 $name、$email 和 $message 使用数组，但我想知道这是否是最佳实践？

我不确定你是什么意思。它们位于 $_POST、$_GET 和/或 $_REQUEST 数组中，具体取决于它们的发送方式。

> 我还应该将 JavaScript 验证作为后备吗？

是的。

> 如果我使用 PHP，有没有办法将所有提交的内容视为文本，还是 PHP 中的默认设置？

浏览器通过 HTTP 提交的所有数据都被视为字符串，无论它是什么数据。这就是为什么要使用 is_numeric() 而不是 is_int() 来检查数字的原因。

> 我想用 2+2 创建一个简单的表单验证码，需要输入框 4，我想知道用 if ($_POST['submit'] && $human == '4' )?

您将需要使用 $_SESSION 来讲述他们验证码的答案。

> 我已经阅读了几条关于使用 $email = htmlspecialchars 不好的评论，有人可以解释为什么吗？

有几个特殊字符是电子邮件中的有效字符，htmlspecialchars() 将对其进行翻译。

# wordpress - 通过另一个 wp 过滤器过滤 meta_query Wordpress 结果

> ID：16023270
> 
> 赞同：0
> 
> 时间：2013-04-15T19:27:48.053
> 
> 标签：wordpress

首先，对不起标题，我不知道如何用几句话来解释！

我有一个查询，它从具有元键的 main_query 中删除帖子/页面。

但是，在特定页面（首页）上，我也想按单个类别（首页新闻）进行过滤。我尝试添加下面的代码，但它中断了。

任何人都可以帮我完善这个吗？

为清楚起见，我想通过 meta_keys 全局和 meta_keys 以及一个模板的类别进行过滤，front-page.php

`function hide_private_posts（$查询）{

```
// If user isn't logged in, hide all private posts / pages
if( !is_user_logged_in() ) {

    if ( $query->is_main_query() ) {

        $query->set( 'meta_query', array(

            array(
                  'key' => 'smartPrivate',
                  'value' => 'smartPrivate_loggedIn',
                  'compare' => '!='
            ),
            array(
                  'key' => 'smartPrivate',
                  'value' => 'smartPrivate_loggedInMentors',
                  'compare' => '!='
            )

        ));
    }

    // If user is logged in but a learner, show logged in posts / pages
    } else if( is_user_sso_role( array('learner') ) ) {

    if ( $query->is_main_query() ) {

        $query->set( 'meta_query', array(

            array(
                  'key' => 'smartPrivate',
                  'value' => 'smartPrivate_loggedInMentors',
                  'compare' => '!='
            )

        ));
        }

    } // Else don't filter posts and pages

    if ( is_front_page() ) {
        query_posts( $query . '&category_name=front-page-news' );
    }

return $query;
}
add_filter('pre-get-posts' , 'hide_private_posts');` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:47:21.063

好的 - 为了关闭它。

我使用的查询`query_posts`似乎重置了循环并覆盖了之前放置的 meta_queries。

因此，这可以正常工作并保留 meta_query 过滤。

```
if ( $query->is_home() && $query->is_main_query() ) {
    $query->set( 'category_name', 'front-page-news');
} 
```

# javascript - Set a Javascript Timer to Half hour

> ID：16023276
> 
> 赞同：0
> 
> 时间：2013-04-15T19:28:35.543
> 
> 标签：javascript, timer, countdown

I need to make a timer that counts down to 4:30pm. So far, I can get it to either 4pm or 5pm, but not any minutes in between. I've managed to figure this much out:

```
<script type="text/javascript">

var currentTime = new Date();
var hours = currentTime.getHours();
var minutes = currentTime.getMinutes();
var d = new Date();
var weekday = new Array(7);
weekday[0] = "Sunday";
weekday[1] = "Monday";
weekday[2] = "Tuesday";
weekday[3] = "Wednesday";
weekday[4] = "Thursday";
weekday[5] = "Friday";
weekday[6] = "Saturday";

var n = weekday[d.getDay()];

var suffix = "AM";

var hoursLeft = 16 - hours;
var minsLeft = 60 - minutes;

if (minutes < 10){ 
minutes = "0" + minutes;
 }

if (hours >= 18)
{
 document.write("Same day shipping has ended for today.");
} else

if ((n === "Saturday") || (n === "Sunday"))
{
document.write("Same day shipping is not available today.");
} else {

if (hoursLeft === 0) {
    document.write(minsLeft + " minutes left to have your order shipped today!");
} else {
    if (hoursLeft === 1) {
        document.write(hoursLeft + " hour and " + minsLeft + " minutes left to have your order shipped today!");
    } else {
    if ((hoursLeft === 0) && (minsLeft <= 30)){
    document.write(minsLeft + " minute left to have your order shipped today!");
    } else {

    if (minsLeft ===1) {
    document.write (hoursLeft + " hours and " + minsLeft + " minute left to have your order shipped today!");
    } else {

if(minsLeft===60){
minsLeft=0;
hoursLeft++;
n === "Monday";
n === "Tuesday";
n === "Wednesday";
n === "Thursday";
n === "Friday";
}

document.write(hoursLeft  + " hours and " + minsLeft + " minutes left to have your order shipped today!");
}
}
}
}
}

</script> 
```

I need the time to count down to 4:30pm, but I've only figured out how to change the "var hoursLeft" to set it to "16 - hours" which gets me to 4pm, but can't figure out how to get it to 4:30pm. I thought I'd tweak the "var minsLeft" but got a weird bug that started to say stuff like "2 hours and -15 minutes left".

Anyone have any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:43:11.737

正如上述评论者所建议的那样，在几分钟内完成您的计算。将您的小时数转换为总分钟数，并确保分钟数在您的参数范围内。

要显示分钟，只需使用模运算符即可获取当前小时之上的分钟数。

例如，如果还剩 185 分钟，您想显示“还剩 3 小时 5 分钟”，

```
var minutesLeft = 185;
var hours = Math.floor(minutesLeft/60);
var minStr = minutesLeft % 60;
var timeLeft = hours + " hours and " + minStr + " minutes left"; 
```

当然，您需要使用自己的逻辑来避免说出“1 小时”之类的话。

# c++ - Pushing back a pointer into a vector c++

> ID：16023277
> 
> 赞同：0
> 
> 时间：2013-04-15T19:28:36.670
> 
> 标签：c++, pointers, vector

This is a follow up to [Using vectors to store different objects inherited from the same parent class c++](https://stackoverflow.com/questions/16022035/using-vectors-to-store-different-objects-inherited-from-the-same-parent-class-c) but you don't need to read it to understand.

I have a polynomial class and another class that is a container class. In the container class there is a vector that holds pointers to polynomials. I have defined vectorPolynomial this way:

```
std::vector<std::unique_ptr<Polynomial>> vectorPolynomial; 
```

In the polynomial class there is a binary operator that do an operation that takes two polynomials and returns the result which is a polynomial itself.

Before polymorphism the operator returned an object of type Polynomial and I just did this:

```
Polynomial polynomialresult = polynomial1 % polynomial2;
vectorPolynomial.push_back(polynomialresult); 
```

Now since the vector is not a vector of polynomials anymore, this won't work. Here is what I tried:

```
std::unique_ptr<Polynomial> result(new Polynomial);
*result = *(vectorPolynomial[i]) % *(vectorPolynomial[j]);
vectorPolynomial.emplace_back(result); 
```

This didn't work. I also tried:

```
Polynomial * result = new Polynomial; 
```

instead of the unique_ptr but it didn't work either. push_back instead of emplace_back does not work either.

How is this typically done?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:31:14.790

`unique_ptr` has no copy constructor. So you need to move it:

```
vectorPolynomial.emplace_back(std::move(result)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:37:15.757

虽然本杰明对您的代码的修改有效，但我觉得它有点倒退。毕竟，`unique_ptr`没有一个拷贝构造函数是有充分理由的；您的代码可以受益于使用普通对象而不是指针：

```
Polynomial polynomialresult = *vectorPolynomial[i] % *vectorPolynomial[j];
vectorPolynomial.emplace_back(new Polynomial(polynomialresult)); 
```

在这里，我们仅在实际需要时才手动分配内存，而不是更早。

# sorting - scanf in x86 assembly language

> ID：16023279
> 
> 赞同：0
> 
> 时间：2013-04-15T19:28:38.533
> 
> 标签：sorting, assembly, x86, nasm, scanf

I try to sort using x86 assembly language. I use `scanf` for taking in the values but I am not able to limit the number of elements to take. That is, my output is:

```
Enter the number of elements less than 10:
4
Enter the elements :
1
N value is 1
2
N value is 1
3
N value is 1
4
N value is 1
5
N value is 1
6
N value is 1 
```

The problem is that it is not stopping after 4.

```
 extern printf
    extern scanf
    SECTION .data
    temp: dd 0
    n: dd 0
    i: dd 0
    j: dd 0
    k: dd 0
    l: dd 0

    ini: dd 10
    section .bss
       ;X      resw    1
       in1  resd    1
       in2  resd    1       

    SECTION .text
    global main
main:
    push ecx
    push dword fmt0
    call printf
    add esp, 4
    pop ecx
    push edx

    push in1
    push dword fmt1
    call scanf
    add esp, 8
    pop edx
    mov eax,[in1]
    mov [n],eax

    ;push ecx
    ;push dword [n]
    ;push dword fmt6
    ;call printf
    ;add esp, 8
    ;pop ecx

    push ecx
    push dword fmt2
    call printf
    add esp, 4
    pop ecx
    jmp L$2

L$1:
    mov  eax,[j]
    mov  ebx,1
    mov ecx,eax
    add ecx,ebx
    push edx
    push dword ecx
    push dword fmt6
    call printf
    add esp, 8
    pop edx 

L$2:
    mov  eax,ecx
    mov  ebx,[n]
    cmp eax , ebx
    jg L$3      
    push eax
        push edx
    push in2
    push dword fmt3
    call scanf
    add esp, 8
    pop edx
    pop eax
    mov ecx,[in2]
    mov [ini],ecx
    jmp L$1

L$3:
    jmp L$5

L$4:
    mov  eax,[k]
    mov  ebx,1
    mov ecx,eax
    add ecx,ebx

L$5:
    mov  eax,[i]
    mov  ebx,[n]
    cmp eax , ebx
    jl L$6
    jmp L$8

L$7:
    mov  eax,1
    mov ebx,eax
    add ebx,eax
    mov  ecx,[i]
    mov edi,ecx
    add edi,ebx

L$8:
    mov  eax,[j]
    mov  ebx,[n]
    cmp eax , ebx
    jl L$9
    mov  edi,ini
    mov  esi,[k]
    mov ecx ,[edi + 4*esi]

    mov  ebx,[i]
    mov eax ,[edi + 4*ebx]
    cmp ecx , eax
    mov eax ,[edi + 4*ebx]
    mov [temp], eax
    mov ecx ,[edi + 4*esi]
    mov [ini + 4*ebx], ecx
    mov [ini + 4*esi], eax

L$11:
    jmp L$7
L$9:
    jmp L$4

L$6:
    push ecx
    push dword fmt4
    call printf
    add esp, 4
    pop ecx
    jmp L$13

L$12:
    mov  eax,[l]
    mov  ebx,1
    mov ecx,eax
    add ecx,ebx

L$13:
    mov  eax,[l]
    mov  ebx,[n]
    cmp eax , ebx
    jl L$14

    push ecx
    push dword [ini]
    push dword fmt5
    call printf
    add esp, 8
    pop ecx
    jmp L$12

L$14:
    ret

fmt0:   db "Enter the number of elements lessthan 10:",10,0
fmt1:   db "%d",0
fmt2:   db "Enter the elements :",10,0
fmt3:   db "%d",0
fmt4:   db "The sorted Array is :",10,0
fmt5:   db "%d",10,0
fmt6:    db "N value is %d",10,0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:54:29.277

我假设您的意图是用来`[j]`保存您输入的值的数量，并在每次循环中增加它。您在 处加载值`L$1`，将其加一并保存在 CX 寄存器中，但您永远不会将修改后的值存储在内存中的任何位置。所以下一次循环，`[j]`还是0。

您需要在递增后存储该值：

```
add ecx,ebx
mov [j], ecx  ; Store the incremented value 
```

提示：代码中的一些注释会很有用。也许每个主要标签上的一行都说明了你在做什么？当你下个月回来查看你的代码时，你会很高兴那些在那里。

# c# - 在 Windows 服务或 IIS 中托管 WCF 服务时出现 COM 异常 0x80040154

> ID：16023284
> 
> 赞同：0
> 
> 时间：2013-04-15T19:28:52.400
> 
> 标签：c#, wcf, iis-7, windows-services

我有一个 WCF 服务 (C#)，我可以在 Visual Studio 2010 中构建和运行它（通过 Cassini 开发服务器）。我将控制台客户端应用程序连接到该服务并且一切正常。该服务本身加载了一个 COM 对象，并且我的所有代码都按预期工作（到目前为止）。

但是，如果我在 Windows 服务中托管此服务并使用 sc 或 installutil（本地或远程）安装该服务，然后将控制台客户端应用程序连接到同一服务，它仍然可以连接和断开连接，但是当我调用服务时加载 COM 对象的方法，我得到一个异常。每当我在 Windows 服务或 IIS7 64 位中托管服务时，我都目睹了这个异常。

显然 COM 对象已在我的机器上进行了 regsvr32 处理，并且当通过调试器托管时，该服务可以加载 COM 对象。我什至跨过 COM 加载位，该对象看起来很棒，我使用它。我们还有其他使用相同 COM 对象的应用程序。

我认为这（可能）与它是（x86）.dll这一事实有关，并且我的开发环境是64位的，并且由于某种原因Cassini开发服务器可以加载COM对象，但是当我托管该服务作为 Windows 服务或在 IIS 中，$path$ 变量或某些环境问题不允许它查找/加载 COM 对象。

至于在 IIS 中托管时，我确实创建了一个新池并启用了 32 位应用程序，但我仍然无法加载 COM 对象。至于 Windows 服务，我不确定我能做什么......

如果我的谷歌搜索没有效果，请原谅我，但我一直无法找到这种确切的情况。

这是标准的未注册 COM 异常：

```
System.ServiceModel.FaultException\`1 was unhandled
Message=Retrieving the COM class factory for component with CLSID {BB9F026E-EC18-449F-84AA-677225967C07} failed due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).
Source=mscorlib
StackTrace:
Server stack trace: 
   at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
   at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at methodname(String product, String options, Int32 quantity)
   at methodname(String product, String options, Int32 quantity) in ...\Reference.cs:line 70
   at ....Program.Main(String[] args) in ...\Program.cs:line 72
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()
InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T15:24:05.843

我相信问题在于我没有在 Windows 的 SysWOW64 目录中使用特殊的 64 位程序（仍称为 regsvr32）注册 .dll。

请参阅： [将 32 位 COM DLL 注册到 64 位 Windows 7](https://stackoverflow.com/questions/3439845/register-32-bit-com-dll-to-64-bit-windows-7/3440419#3440419)

实际上我在发布之前找到了这个解决方案，并认为我已经尝试过并且仍然遇到异常，但也许我错了。这个解决方案似乎奏效了。它甚至可能需要重新启动服务器或至少重新启动 IIS。

# migration - Migrating site to a new server, do I need a new connection ticket and certificates for Intuit QBMS?

> ID：16023297
> 
> 赞同：0
> 
> 时间：2013-04-15T19:30:02.623
> 
> 标签：migration, intuit-partner-platform

I have a site that uses QBMS to process credit card transactions. I'm moving the site from one hosting company to another, but keeping the same domain name.

Do I need to get or update a new connection ticket and new certificates, or will they work once the domain name resolves to the new server? If so, how would i go about doing this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:00:09.473

只要您还迁移任何相关的 SSL 证书，那么您就可以使用相同的连接票证。

您还应该在使用它时更新您的反向 DNS（询问您的托管服务提供商）。

# jquery - 使用父级计算表中的 tr

> ID：16023299
> 
> 赞同：0
> 
> 时间：2013-04-15T19:30:12.957
> 
> 标签：jquery, parent, tablerow, closest

我需要计算表中的行数。我需要将它们计算在内，因为用户单击了`<td>`

到目前为止，我已经尝试过这样的事情：

```
$(".up, .down").click(function(){
var rows = $(this).closest('table').find('tr').length;
}); 
```

.up 和 .down 是单击的图像的类别出于实际原因，该表没有 ID... 似乎它需要第一个表-而不是最接近的...

- - 添加 - -

```
 <table class='bokse'><tr>
<tr sideid='7' sidepos='1'>
<td><h3 class='link' pid='7'>Formål</h2></td>
<td><img src='btn/op.png' class='up' title='ryk op' alt='op' /> <img src='btn/ned.png' class='down' title='ryk ned' alt='ned' /> <img src='btn/vis.png' class='vis' item='page_7' title='vis' alt='vis' /></td>
</tr>
<tr sideid='8' sidepos='2'>
<td><h3 class='link' pid='8'>Vedtægter</h2></td>
<td><img src='btn/op.png' class='up' title='ryk op' alt='op' /> <img src='btn/ned.png' class='down' title='ryk ned' alt='ned' /> <img src='btn/vis.png' class='vis' item='page_8' title='vis' alt='vis' /></td>
</tr>
<tr sideid='10' sidepos='3'>
<td><h3 class='link' pid='10'>Bliv medlem</h2></td>
<td><img src='btn/op.png' class='up' title='ryk op' alt='op' /> <img src='btn/ned.png' class='down' title='ryk ned' alt='ned' /> <img src='btn/vis.png' class='vis' item='page_10' title='vis' alt='vis' /></td>
</tr>
</table> 
```

有一系列这样的桌子，长度不一。每个都嵌套在另一个表中。

尽管行数各不相同，但它表示有 4 行 - 就像在第一个表中一样 - 无论我点击哪个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:45:13.800

那是因为一`<tr>`开始就有额外的。删除第一个`<tr>`没有结束的`</tr>`。`<table class='bokse'><tr>` 看到这个[http://jsfiddle.net/3PM9M/](http://jsfiddle.net/3PM9M/)

```
$(".up, .down").click(function(){

    alert('total rows -' + $(this).parents('table').find('tr').length); //Gives all the tr's
    alert('Clicked row -' + (parseInt($(this).parents('tr').index()) + 1)); // clicked tr's index
}); 
```

# javascript - Firefox 和 chrome 中的 Javascript 奇怪行为

> ID：16023300
> 
> 赞同：0
> 
> 时间：2013-04-15T19:30:16.457
> 
> 标签：javascript

[我在 JSBin 中](http://jsbin.com/obaveg/7/edit)运行此代码，并按预期得到控制台输出：

```
//matrix C before multiplySeq function call 
[[0, 0, 0], [0, 0, 0], [0, 0, 0]]
//matrix C after multiplySeq function call
[[6, 6, 6], [6, 6, 6], [6, 6, 6]] 
```

但是，当我运行相同的代码 Firefox 和 chrome 时，我得到：

```
//matrix C before multiplySeq function call 
[[6, 6, 6], [6, 6, 6], [6, 6, 6]]
//matrix C after multiplySeq function call
[[6, 6, 6], [6, 6, 6], [6, 6, 6]] 
```

我不知道发生了什么，有人可以指出我在这里可能缺少什么吗？

PS：当我在 IE 中测试时，我得到了想要的输出（哇，从没想过我会这么说）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:32:10.810

您在 Chrome 和 Firefox 中遇到的问题是它们不会在您登录时构建显示，而是在您浏览对象时构建。这就是第一个日志显示最终值的原因。

您可以通过克隆值获得更相关的结果，例如

```
 console.log(JSON.parse(JSON.stringify(C2))); 
```

[示范](http://jsbin.com/obaveg/10/edit)

请注意，某些版本的 Chrome 现在会发出一个小**i**并警告此现象。

# jquery - 我如何确定是否从动态内容列表中单击了最后一个按钮之一

> ID：16023302
> 
> 赞同：0
> 
> 时间：2013-04-15T19:30:36.803
> 
> 标签：jquery

我喜欢这些 div 块中的 8 个，我想知道是否单击了 8 个列表中的最后两个 a。这将是动态的，所以现在可能是 8，以后可能是 20，所以代码需要知道它的最后两个不是 7 或 8。

```
<div class="seven columns offset-by-one">
  <h1>
    Joshua F. Schwartz
  </h1>
  <h2>
    Position
  </h2>
  <p>
    Etiam lacus dui, sollicitudin non pulvinar nec, fringilla commodo mauris. Nunc orci enim, pellentesque porta malesuada eu, ornare vel lectus. In venenatis nisl ut lorem ultricies semper. Duis vitae turpis nec tortor dignissim tempor. Phasellus et elit et. <a href="">Read More</a>
  </p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:39:11.987

你可以试试这样的。

```
$('a').click(function () {
    $(this).parent().parent().data('aClicked',true);
}); 
```

然后下次当您访问 div 或单击时，只需检查是否为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:42:33.947

您可以使用 jQuery index() 方法：

```
function isLastTwo(element) {
  // Get the total <div> tags
  var length = $("div.columns.offset-by-one").length;

  // Compare the index of current element to the length
  return $(element).index() >= (length - 2);
} 
```

# sdl - How do disable SDL for new projects in Visual C++ 2012?

> ID：16023303
> 
> 赞同：0
> 
> 时间：2013-04-15T19:30:49.397
> 
> 标签：sdl, default, visual-c++-2012

I’m using Visual C++ for homework projects, where input checking isn’t needed, so I must disable [SDL](http://blogs.msdn.com/b/sdl/archive/2011/12/02/security.aspx) every time in project properties to be able to use `scanf`. Is there a way to change this default setting?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:04:45.730

应该有几种不同的方式。

例如，#define `_CRT_SECURE_NO_WARNINGS`。您可以在代码中或在 MSVS IDE 的“预处理器定义”中执行此操作。

Microsoft 鼓励您使用他们的“Safe CRT”库而不是标准 C 函数，例如“scanf_s()”而不是“scanf()”：

[http://msdn.microsoft.com/en-us/magazine/cc163794.aspx](http://msdn.microsoft.com/en-us/magazine/cc163794.aspx)

[http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/ad38eb97-adad-46bd-86ad-ed4983184a0f/](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/ad38eb97-adad-46bd-86ad-ed4983184a0f/)

# html - 表格可以在图形元素中使用吗

> ID：16023306
> 
> 赞同：1
> 
> 时间：2013-04-15T19:30:51.070
> 
> 标签：html, semantic-markup

快速提问：a`<form>`可以在`<figure>`元素内部使用吗？例如，我正在考虑联系表格

> “自包含，[...] 作为文档主流中的一个单独单元，并且 [...] 可以从文档的主流中移出而不影响文档的含义。”- [[<图>规格]](http://dev.w3.org/html5/markup/figure.html)

代码片段：

```
<figure>
    <figcaption>Contact Us</figcaption>
    <form>
        <input name="email"...
        <textarea name="comments"...
        <input type="submit"...
    </form>
</figure> 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:35:09.700

是的，从技术上讲，您可以这样做。如果在您的情况下它在语义上是正确的，那是另一个问题（我可能不同意）。

为什么在技术上允许：

在您自己发布的[HTML5 图形规范](http://dev.w3.org/html5/markup/figure.html)的链接中，您将看到：

> 允许的内容：一个 figcaption 元素，后跟流内容

而且由于一个`<form>`元素被认为是 a [`flow element`](http://dev.w3.org/html5/markup/common-models.html#common.elem.flow)，所以你很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:35:37.327

来自 HTML 5 Nightly：

*“图形元素表示一个内容单元，可以选择带有标题，它是自包含的，通常作为单个单元从文档的主要流程中引用，并且可以从文档的主要流程中移开在不影响文件含义的情况下。”*

鉴于最后一部分，我认为最好将表单包装在 a 中，`<div>`或者将表单的内部内容包装在`<fieldset>`元素中。我认为这`<figure>`更适合图像、视频、音频、代码片段等，但这只是我的看法。

[查看 HTML 5 规范的第 4.5 节以获得更多信息](http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-figure-element)

# mvvm - MvvmCross 和墓碑

> ID：16023307
> 
> 赞同：2
> 
> 时间：2013-04-15T19:30:53.023
> 
> 标签：mvvm, windows-phone, mvvmcross

我正在研究一个基本的 MvvmCross (v3.0.3) 示例，并且在研究如何在应用程序被墓碑化时重新加载状态时遇到了一些困难。目前我有一个带有单一视图模型和一个属性的可移植类库。我还有一个 Windows Phone 8 应用程序，它引用了这个 PCL，绑定到视图模型，然后将一个文本块绑定到属性。

一切都很好，因为属性的值显示在屏幕上。我已将 WP8 项目设置为停用时的墓碑，当我单击开始按钮时，会调用 ViewModel.SaveState 方法（没有打开代码，因此这可能不是正确的名称），我可以填充提供的“捆绑包” " 与属性中的值。

但是，当我通过按“返回”按钮返回应用程序时，不会调用相应的 ViewModel.ReloadState 方法。我期待调用此方法，以便可以加载 SaveState 中指定的数据。

有什么我想念的吗？“停用时的墓碑”选项不会导致这种情况在 MvvmCross 中发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:30:44.717

v3 中的墓碑代码是全新的——它还没有在所有平台上完全运行——尽管我已经在 WinRT 和 Android 上亲自测试过它。

在 WindowsPhone 上，我还保留了一项功能 - 主要是因为我不太清楚要在其中添加什么...

您需要实现的功能是在页面中加载和保存状态 - 请参阅以下两个空虚拟方法`MvxPhonePage`：[https ://github.com/slodge/MvvmCross/blob/v3/Cirrious/Cirrious.MvvmCross.WindowsPhone/Views /MvxPhonePage.cs#L54](https://github.com/slodge/MvvmCross/blob/v3/Cirrious/Cirrious.MvvmCross.WindowsPhone/Views/MvxPhonePage.cs#L54)

序列化/反序列化文本到/从 an 的代码`MvxBundle`非常简单 - 只需使用`IMvxSavedStateConverter`- 请参阅 Droid 代码：[https ://github.com/slodge/MvvmCross/blob/v3/Cirrious/Cirrious.MvvmCross.Droid/Views/ MvxActivityViewExtensions.cs#L59](https://github.com/slodge/MvvmCross/blob/v3/Cirrious/Cirrious.MvvmCross.Droid/Views/MvxActivityViewExtensions.cs#L59)

可能有一些我可以在所有 Windows Phone 应用程序上使用的通用代码......

# sed - 使用 Sed 删除多行

> ID：16023312
> 
> 赞同：6
> 
> 时间：2013-04-15T19:31:26.337
> 
> 标签：sed, terminal

我一直在使用

```
 sed -i '58d' test_file.txt 
```

删除一行 &

```
 sed -i '58,68d' test_file.txt 
```

删除一行中的多行

但我尝试使用

```
 sed -i '58;64;93d' test_file.txt 
```

删除这 3 个特定行，这是我找到的答案，但我收到一个错误，即

```
 ; 
```

字符是未知命令。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-15T19:36:29.550

例如你可以：

```
sed -i '2d;5d;8d' file 
```

用 seq 测试：

```
kent$  seq 10|sed '2d;5d;8d'
1
3
4
6
7
9
10 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T19:33:44.660

我发现

```
 sed -i  -e 1d -e 3d test_file.txt 
```

我一发布这个就从相关链接。

# c++ - 生成文件中未定义的引用错误

> ID：16023317
> 
> 赞同：0
> 
> 时间：2013-04-15T19:31:38.877
> 
> 标签：c++, makefile, g++

我的 makefile 有问题

```
assignment3: BSTapp.cpp BST.o
        g++ -o assignment3 BSTapp.cpp BST.o
BST.o:  BST.cpp BST.h Node.o
    g++ -c BST.cpp -o BST.o
Node.o: Node.h Node.cpp
    g++ -c Node.cpp -o Node.o 
```

获取对 Node 类中所有方法的未定义引用。但是如果我直接编译使用

```
g++ -o assignment3 BSTapp.cpp BST.h BST.cpp Node.h Node.cpp 
```

一切正常。我在makefile中做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:33:56.630

因为您在规则`Node.o`下从 makefile 命令中遗漏了该文件：`assignment3:`

```
g++ -o assignment3 BSTapp.cpp BST.o 
```

应该

```
g++ -o assignment3 BSTapp.cpp BST.o Node.o 
```

评论：

一、**请不要自己编译头文件！**

```
g++ -o assignment3 BSTapp.cpp BST.h BST.cpp Node.h Node.cpp 
```

应该

```
g++ -o assignment3 BSTapp.cpp BST.cpp Node.cpp 
```

二、您的 Makefile 非常杂乱无章。最好这样做：

```
OBJECTS = $(patsubst %.cpp, %.o, $(wildcard *.cpp))

all: assignment3

assignment3: $(OBJECTS)
        g++ -o $@ $^

%.o: %.cpp
        g++ -c -Wall -o $@ $< 
```

# python - 在 virtualenv 中使用 Spyder 和 Ipython 时出现 ImportError

> ID：16023318
> 
> 赞同：0
> 
> 时间：2013-04-15T19:31:39.590
> 
> 标签：python, virtualenv, ipython, spyder

我在 Ubuntu 12.10 中创建了一个 virtualev (~/ENV)，使用 --system-site-packages 选项，我使用 pip sphynx 和 pyzmq 安装（安装 spyder 所必需的），然后是 spyder 本身，然后是 ipython（也尝试反向命令）。Spyder 在没有 Ipython 的情况下可以正常工作，但是当我在安装 Ipython 后尝试运行它时，它给出了 ImportError：

```
zdk1g12@walrus:~$ source ENV/bin/activate
(ENV)zdk1g12@walrus:~$ spyder
Traceback (most recent call last):
  File "/home/zdk1g12/ENV/bin/spyder", line 3, in <module>
    start_app.main()
  File "/home/zdk1g12/ENV/local/lib/python2.7/site-packages/spyderlib/start_app.py", line 64, in main
    from spyderlib import spyder
  File "/home/zdk1g12/ENV/local/lib/python2.7/site-packages/spyderlib/spyder.py", line 95, in <module>
    from spyderlib.plugins.inspector import ObjectInspector
  File "/home/zdk1g12/ENV/local/lib/python2.7/site-packages/spyderlib/plugins/inspector.py", line 36, in <module>
    from spyderlib.widgets.ipython import IPythonControlWidget
  File "/home/zdk1g12/ENV/local/lib/python2.7/site-packages/spyderlib/widgets/ipython.py", line 12, in <module>
    from IPython.frontend.qt.console.rich_ipython_widget import RichIPythonWidget
  File "/home/zdk1g12/ENV/local/lib/python2.7/site-packages/spyderlib/widgets/IPython.py", line 12, in <module>
    from IPython.frontend.qt.console.rich_ipython_widget import RichIPythonWidget
ImportError: No module named frontend.qt.console.rich_ipython_widget 
```

`from spyderlib import spyder`当我从控制台尝试时，它给出了同样的错误。但是，如果在下一行（同一个控制台，就在错误之后）我这样做：

```
from IPython.frontend.qt.console.rich_ipython_widget import RichIPythonWidget 
```

......它工作得很好！

一些细节：

```
In [3]: import spyderlib; spyderlib.__version__
Out[3]: '2.2.0rc'
In [6]: import IPython; IPython.__version__
Out[6]: '0.13.2'
In [8]: import sys; sys.executable
Out[8]: '/home/zdk1g12/ENV/bin/python'

In [9]: import sys; sys.path
Out[9]: 
['/home/zdk1g12/ENV/local/lib/python2.7/site-packages/spyderlib/utils/external',
 '',
 '',
 '/home/zdk1g12/ENV/bin',
 '/home/zdk1g12/ENV/local/lib/python2.7/site-packages/distribute-0.6.24-py2.7.egg',
 '/home/zdk1g12/ENV/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
 '/home/zdk1g12/ENV/lib/python2.7',
 '/home/zdk1g12/ENV/lib/python2.7/plat-linux2',
 '/home/zdk1g12/ENV/lib/python2.7/lib-tk',
 '/home/zdk1g12/ENV/lib/python2.7/lib-old',
 '/home/zdk1g12/ENV/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/home/zdk1g12/ENV/local/lib/python2.7/site-packages',
 '/usr/local/lib/python2.7/site-packages',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages/PIL',
 '/usr/lib/python2.7/dist-packages/gst-0.10',
 '/usr/lib/python2.7/dist-packages/gtk-2.0',
 '/usr/lib/pymodules/python2.7',
 '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',
 '/usr/lib/python2.7/dist-packages/ubuntuone-couch',
 '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol',
 '/home/zdk1g12/ENV/local/lib/python2.7/site-packages/IPython/extensions'] 
```

Ipython 工作正常，qtconsole 也是如此。

# macos - 设置光标，绕过光标放大

> ID：16023319
> 
> 赞同：0
> 
> 时间：2013-04-15T19:31:43.067
> 
> 标签：macos, cocoa

我想在 Mac 应用程序中为特定视图设置光标，而该光标不受通用访问中的光标放大设置的影响。

例如，我想将光标设置为用户选择的画笔的预览。它应该是画笔的大小，以便用户知道他们的笔触有多大。光标放大可以解决这个问题；那时我还不如只使用箭头光标。

我*不想*更改（并且必须恢复）光标放大设置本身。我希望特定的自定义光标不受它的影响。

隐藏光标并在我的视图中绘制一个假光标不起作用，因为它会在视图/窗口边缘被剪裁。

我更喜欢让我使用 NSCursor 的解决方案，但在该类中没有看到明显的解决方案，我愿意接受另一个使用较低级别的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:59:16.687

> 隐藏光标并在我的视图中绘制一个假光标不起作用，因为它会在视图/窗口边缘被剪裁。

然后，我认为覆盖窗口是您的下一个最佳选择。

# android - android swipelist缺少属性

> ID：16023320
> 
> 赞同：2
> 
> 时间：2013-04-15T19:31:44.230
> 
> 标签：android, xml, layout, swipe

我和这个用户有同样的问题：[另一个问题](https://stackoverflow.com/questions/15543252/xml-file-missed-attributes)

但是我在我的布局 xml 文件中正确输入了类的名称，并且在 xml 视图中它没有给出任何错误，但是当我更改为图形布局视图时，我收到一条错误消息：

```
java.lang.RuntimeException: You forgot the attributes swipeFrontView or swipeBackView.
You can add this attributes or use 'swipelist_frontview' and 'swipelist_backview'     
identifiers 
```

我添加了 Nineoldandroid 和 swipe-list jars。

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T11:45:50.490

将 SwipeListView 中的 id 更改为

> ```
> swipe:swipeBackView="@+id/swipelist_backview"
> swipe:swipeFrontView="@+id/swipelist_frontview" 
> ```

并在列表项视图中

> ```
> <FrameLayout
>     xmlns:android="http://schemas.android.com/apk/res/android"
>     android:layout_width="match_parent"
>     android:layout_height="match_parent" >
> 
>     <RelativeLayout
>         android:id="@+id/swipelist_backview"
>         ...>
>         ...
>     </RelativeLayout>
> 
>     <RelativeLayout
>         android:id="@+id/swipelist_frontview"
>         ...>
>         ...
>     </RelativeLayout>
> 
>     </FrameLayout> 
> ```

为我解决了这个问题。我认为这个错误与这个拉取请求有关[https://github.com/47deg/android-swipelistview/pull/11](https://github.com/47deg/android-swipelistview/pull/11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T12:19:19.523

swipeListView 有 2 个视图作为“FrontView”和“BackView”试试这个示例 xml：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent">

<RelativeLayout
         android:id="@+id/back"
         style="@style/ListBackContent"
         android:layout_width="wrap_content"
         android:layout_height="110dp"   
         android:tag="back" >

    <LinearLayout
             android:id="@+id/backshowportion"
             style="@style/ListBackContent"
             android:layout_width="250dp"
             android:layout_height="110dp"
             android:layout_alignParentRight="true"
             android:layout_alignParentTop="true"          
             android:gravity="right|center" >

             <TextView
                     .... />

             <TextView
                     .... />

             <TextView 
                      ..../>
    </LinearLayout>

</RelativeLayout>

<RelativeLayout
         android:id="@+id/front"
         style="@style/ListFrontContent"
         android:layout_width="match_parent"
         android:layout_height="110dp"
         android:orientation="vertical"
         android:tag="front" >
         <TextView
                 .... />

         <TextView
                 .... />

         <TextView
                 .... />

</RelativeLayout>

</FrameLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T22:36:38.127

你需要在你列出这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<com.fortysevendeg.android.swipelistview.SwipeListView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:swipe="http://schemas.android.com/apk/res-auto"
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:listSelector="#00000000"
    swipe:swipeActionLeft="dismiss"
    swipe:swipeBackView="@+id/back"
    swipe:swipeCloseAllItemsWhenMoveList="true"
    swipe:swipeFrontView="@+id/front"
    swipe:swipeMode="both" /> 
```

# android - 如何在图形和列表视图之间平均划分屏幕

> ID：16023327
> 
> 赞同：0
> 
> 时间：2013-04-15T19:32:12.950
> 
> 标签：android, layout, android-listview

我希望屏幕的上半部分是一个图表，而下半部分是一个列表视图。两个部分都应该占据屏幕的一半。

通过我现在的设置，它仅在列表视图中有 10 个或更多项目时才有效。如果数量较少，则列表视图将占用不到一半的屏幕。如果列表中有一项，则它占用的高度甚至少于一个列表项的高度。

基于[ANDROID 的解决方案：用 2 个列表视图将屏幕分成 2 个相等的部分，](https://stackoverflow.com/questions/3968171/android-split-the-screen-in-2-equals-parts-with-2-listviews)这就是我现在得到的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
        >

    <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_weight="0.5"
            android:id="@+id/graph_container"
            android:orientation="vertical">

    </LinearLayout>

    <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_weight="0.5"
            android:orientation="vertical">

        <ListView
                android:id="@android:id/list"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:drawSelectorOnTop="false"/>
    </LinearLayout>

 </LinearLayout> 
```

我动态添加图表：

```
((LinearLayout) findViewById(R.id.graph_container))
            .addView(chart, 0, 
                new  LinearLayout.LayoutParams(
                    ViewGroup.LayoutParams.MATCH_PARENT, 
                    ViewGroup.LayoutParams.MATCH_PARENT)); 
```

有谁知道我应该怎么做？

**更新**

因此，最重要的部分是将 layout_height 更改为 math_parent。删除列表视图的父线性布局是可选的，但绝对更干净。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:42:10.807

移除 listView 所在的容器，将 weight 更改为 1，并将主容器的高度设置为 match_parent。这是一个例子：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:id="@+id/graph_container"
        android:orientation="vertical">

</LinearLayout>

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:fillViewport="true"
    android:drawSelectorOnTop="false" >
</ListView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:37:07.320

尝试使用重量值作为数字 1:1 狐狸示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T19:37:27.117

为父 LinearLayout 设置 android:weightSum="1" 和 android:layout_height="match_parent" 应该可以工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T19:36:43.910

您只需将第一个 LinearLayout 高度更改为`match_parent`

# java - Tomcat 7 ssl 客户端身份验证

> ID：16023331
> 
> 赞同：0
> 
> 时间：2013-04-15T19:32:29.890
> 
> 标签：java, ssl, client-server, ssl-certificate, tomcat7

我只想让一些有限的用户可以访问 webapp。所以我选择了一个SSL客户端认证。我是新手，所以对它了解不多，我按照[本教程](http://www.vorburger.ch/blog1/2006/08/setting-up-two-way-mutual-ssl-with.html)来实现它。这是我心中的一些问题。我正在使用基本的自签名 SSL。

1) 我们可以为我提供的所有客户创建一个客户证书吗？所以任何拥有客户端证书的人都可以访问应用程序。听起来不是一个好方法。

2）如果不是（1）那么有没有简单的方法来创建客户端证书并在tomcat user.xml上注册。我不想强迫用户创建客户端证书并发送给我，所以我在服务器上注册。

3) 如果 SSL 证书不匹配，如何重定向到其他页面。？

4）我们可以将一台机器的私钥用于另一台机器吗？

5) 我的服务器上有多个应用程序，但我只想使用 SSL 对一个应用程序进行身份验证。那怎么可能呢？

还请为此建议我任何好的教程。最后，我的要求是允许最多 50 个有限用户访问。我的客户可以以某种用户友好的方式注册他的系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:26:57.207

> 1) 我们可以为我提供的所有客户创建一个客户证书吗？

这没有意义。客户端证书应该唯一标识客户端。他们每个人都应该有一个。

> 所以任何拥有客户端证书的人都可以访问应用程序。听起来不是一个好方法。

它不是。

> 2）如果不是（1）那么有没有简单的方法来创建客户端证书并在tomcat user.xml上注册。我不想强迫用户创建客户端证书并发送给我，所以我在服务器上注册。

这是唯一安全的方式。如果您创建证书，则您拥有私钥，因此它不是私有的，因此它不能合法地做它应该做的事情。例如，您无法证明只有客户才能执行任何交易，因此您失去了法律上的不可否认性。您不应该为此使用 users.xml，您应该使用其他 Tomcat 安全领域之一，例如数据库。

> 3) 如果 SSL 证书不匹配，如何重定向到其他页面。？

如果您使用的是容器管理的身份验证，那么您应该使用它，所有这些都在 web.xml 中为应用程序定义。

> 4）我们可以将一台机器的私钥用于另一台机器吗？

没有意义，见上。私钥应该是私有的并且在一个实体的独占控制下。

我质疑在这里使用客户端证书是否是正确的解决方案。如果您只想限制对服务器的访问，请给每个客户端一个登录名。

5) 我的服务器上有多个应用程序，但我只想用 SS 验证一个应用程序

# python - 语法错误：输入错误 - Python

> ID：16023333
> 
> 赞同：-1
> 
> 时间：2013-04-15T19:32:39.770
> 
> 标签：python, syntax-error

我有这个代码：

```
num = range(1,33)
num[0]=1
num[1]=2
for i in range(2,32):
    num[i]=num[i-1]+num[i-2]

total=0
for i in range(0,32):
    print num[i]
    if num[i]%2==0:
    total=total+num[i]
    else:
    num[i]=num[i+1] 
```

我想找到数组中偶数的总和`num`。谁能建议我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T19:33:52.693

缩进在python中很重要

```
if num[i]%2==0:
total=total+num[i]
else:
num[i]=num[i+1] 
```

应该

```
if num[i]%2==0:
    total=total+num[i]
else:
    num[i]=num[i+1] 
```

此外，使用一致的缩进，例如每个你必须引入缩进的地方有 4 个空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T19:37:01.273

**或者：**

```
total = sum([i for i in num if i % 2 == 0]) 
```

*   [Sum( )](http://docs.python.org/2/library/functions.html#sum)将返回列表的总和。

*   `[i for i in num if i % 2 == 0]`是一个[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)。

**例如：**

```
>> num = [1,2,3,4]
>> tmp = [i for i in num if i % 2 == 0]
>> print tmp
[2,4]

>> total = sum(tmp)
>> print total
6 
```

# java - 在 PMD 中使用 JSP 自定义规则

> ID：16023337
> 
> 赞同：2
> 
> 时间：2013-04-15T19:32:54.547
> 
> 标签：java, sonarqube, checkstyle, pmd

我需要一种在 Sonar 上使用的验证，它应该查看 XHTML 页面中的 JSF 元素，以验证输入元素是否包含 ID 属性。（例子： ）

最初我正在尝试使用 PMD 来做到这一点。正如我所见，PMD 可以解释 JSP 页面。这是正确的吗？实现它的方法是实现基于 AbstractJspRule 的自定义规则。

到目前为止，PMD 试图将 XHTML 页面解析为 Java 代码的问题。它应该解释为 JSP 页面。

我的代码：
类：

```
public class TestXhtmlRule extends AbstractJspRule {

 @Override
 public Object visit(final ASTElement node, final Object data) {
      // ...
 }

 @Override
 public Object visit(final ASTAttribute node, final Object data) {
      // ...
 }

} 
```

xml:

```
<ruleset name="Basic JSF rules" 
    xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd"
    xsi:noNamespaceSchemaLocation="http://pmd.sourceforge.net/ruleset_2_0_0.xsd">
    <include-pattern>**/*.xhtml</include-pattern>

<rule name="idsJSF" language="jsp"  
        message="..."
        class="pmd.rule.TestXhtmlRule">
        <description>
            ...
        </description>
        <priority>3</priority>

        <example>
        <![CDATA[
             <h:inputText id="itNome" label="Nome" value="#{pessoaBean.nome}" />;
        ]]>
        </example>
    </rule>
</ruleset> 
```

日志中的错误：

```
[pmd] net.sourceforge.pmd.lang.java.ast.ParseException: Encountered " "<" "< "" at line 1, column 1.
Was expecting one of:
    <EOF> 
    "abstract" ...
    "class" ...
    "final" ...
    "import" ...
    "interface" ...
    "native" ...
    "private" ...
    "protected" ...
    "public" ...
    "static" ...
    "synchronized" ...
    "transient" ...
    "volatile" ...
    "strictfp" ...
    <IDENTIFIER> ...
    ";" ...
    "@" ...
    "\u001a" ...
    "~[]" ...
    "@" ...
    "@" ...
    "@" ...

    at net.sourceforge.pmd.lang.java.ast.JavaParser.generateParseException(JavaParser.java:9867)
    at net.sourceforge.pmd.lang.java.ast.JavaParser.jj_consume_token(JavaParser.java:9751)
    at net.sourceforge.pmd.lang.java.ast.JavaParser.CompilationUnit(JavaParser.java:190)
    at net.sourceforge.pmd.lang.java.AbstractJavaParser.parse(AbstractJavaParser.java:56)
    at net.sourceforge.pmd.SourceCodeProcessor.parse(SourceCodeProcessor.java:90)
    at net.sourceforge.pmd.SourceCodeProcessor.processSource(SourceCodeProcessor.java:136)
    at net.sourceforge.pmd.SourceCodeProcessor.processSourceCode(SourceCodeProcessor.java:75)
    at net.sourceforge.pmd.SourceCodeProcessor.processSourceCode(SourceCodeProcessor.java:42)
    at net.sourceforge.pmd.processor.PmdRunnable.call(PmdRunnable.java:75)
    at net.sourceforge.pmd.processor.PmdRunnable.call(PmdRunnable.java:22)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我怎样才能让它工作？
使用 checkstyle 而不是 PMD 更容易验证此规则？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:22:34.217

您是否尝试过使用[Sonar Web 插件](http://docs.codehaus.org/display/SONAR/Web+Plugin)？例如，它应该允许您检查标签上的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:48:08.917

> 正如我所见，PMD 可以解释 JSP 页面。这是正确的吗？

是的，但前提是您拥有格式良好的 XHTML——您必须这样做。

> 我怎样才能让它工作？

问题发生在 PMD 甚至运行您的规则之前。它将文件（无论是 Java 还是 jsp 或其他任何文件）解析为 AST（抽象语法树），然后针对它运行相关规则。[您是否在运行 PMD 时传递 -jsp 标志，如PMD JSP 页面底部的](http://pmd.sourceforge.net/pmd-5.0.3/jspsupport.html)如何使用它部分所述？我的猜测是，您并不是 PMD 将所有内容都视为 Java。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T13:24:36.813

PMD 中存在错误（或遗漏的功能）。源文件语言仅由文件名决定。`*.xml`文件假定为 xml 语言，`*.jsp`文件 - jsp 语言。`xhtml`扩展名没有明确指定，因此`*.xhtml`文件默认为 java 语言，并由 Java 解析器解析。

这是语言映射的当前扩展（在 PMD 中硬编码）： [https ://github.com/pmd/pmd/blob/master/pmd/src/main/java/net/sourceforge/pmd/lang/Language.java?source =cc](https://github.com/pmd/pmd/blob/master/pmd/src/main/java/net/sourceforge/pmd/lang/Language.java?source=cc)

这是使其可配置的功能请求：http: [//sourceforge.net/p/pmd/feature-requests/568/](http://sourceforge.net/p/pmd/feature-requests/568/)

# jquery - Jquery Dialog 总是透明的

> ID：16023341
> 
> 赞同：3
> 
> 时间：2013-04-15T19:33:14.347
> 
> 标签：jquery, asp.net-mvc, razor, jquery-dialog

由于某种原因，我的 jquery 对话框是透明的，但它确实显示了我正在加载的部分视图的字段。当我有另一个 jquery 对话框工作正常时，我不确定它为什么会这样做。

```
 @Html.ActionLink("Upload Image", "UploadImage", "Patients", null, new { @class = "popupLinks" })
            <script type="text/javascript">
                $(function () {
                    $(".popupLinks").click(function (e) {
                        var url = this.href;                        
                        $("#imageUpload").load(url,{},function (responseText, textStatus, XMLHttpRequest) {
                            $("#imageUpload").dialog({
                                modal: true,
                                autoOpen: true,
                                draggable: true,
                                resizable: false,
                                width: 500,
                                show: { effect: 'fade', duration: 2000 },
                                    close: function (event, ui) {
                                        dialog.remove();
                                    }                                    
                            }).dialog("widget").next(".ui-widget-overlay").css("background", "#000000");;
                            }
                        );
                        return false;
                    });
                });
            </script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-25T01:23:21.563

我遇到了同样的问题。

除了`jquery.ui.dialog.css`，您还需要包含指向基本 jQuery UI CSS 的链接：`jquery-ui.css`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:39:31.360

我认为它使用图像作为对话框的背景。在你为这个项目安装的 jQuery 中，你还记得`/themes/base/images`文件夹吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-07T09:26:11.197

这已被取代。现在，当添加 jQuery UI 包时，所有 css 文件都会下载到 /content/themes/base 文件夹。您还将注意到一个名为“all.css”的文件，它导入了 css 文件。添加如下链接：

`<link href="content/themes/base/all.css" rel="stylesheet" />`

# matlab - 如何将矩阵实体求和作为另一个向量值的索引？

> ID：16023342
> 
> 赞同：0
> 
> 时间：2013-04-15T19:33:17.567
> 
> 标签：matlab, multidimensional-array, sum

假设我有一个向量`B=[1 1 2 2]`，并`A=[5 6 7 4]`以 B 的形式表示 A 中需要汇总的数字。也就是说，我们需要将 5 和 6 相加作为结果数组的第一个条目，并将 7 和 4 相加作为第二个条目。如果 B 是`[1 2 1 2]`结果的第一个元素是 5+7，第二个元素是 6+4。

在一般意义上，我怎么能在 Matlab 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:40:05.547

一种灵活且通用的方法是使用[`accumarray()`](http://www.mathworks.co.uk/help/matlab/ref/accumarray.html).

`accumarray(B',A')`

该函数将 A 中的值累加到 B 指定的位置。

由于文档不容易理解，我将总结为什么它是灵活的。你可以：

*   选择你的**累积功能**（`sum`默认）
*   将位置指定为一组坐标以累积到**ND 数组中**
*   **预设累积数组的维度**（默认展开到最大位置）
*   **使用自定义值填充**非累积位置（`0`默认情况下填充）
*   将累积的数组设置为`sparse`，从而避免**内存不足**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:42:39.843

```
[sum(A(1:2:end));sum(A(2:2:end))] 
```

# r - 使用 ggplot2 映射人口普查数据 - 随意的多边形构造（现在使用地图！）

> ID：16023362
> 
> 赞同：2
> 
> 时间：2013-04-15T19:34:22.790
> 
> 标签：r, map, ggplot2, polygon, census

首先，我为标题道歉，但我不完全确定如何描述我的地图发生的事情（因此包含图像）。我是使用 ggplot2 映射的新手，对于我的第一个“教程外”地图，我试图在 DC 中按区域显示人口普查数据。搜索教程似乎支持我所采取的程序，但显然我正在偏离路线（而且我还没有看到另一个例子）。

目标是将我准备的 .csv 中的数据与包含人口普查区域多边形的 shapefile 合并。最初，我认为这与行的顺序有关，但明确说明这一点似乎并没有改变任何东西。

代码：

```
###Combining Census data with a tract poly shapefile
library(maptools)
library(ggplot2)
library(gpclib)

setwd('~/ESRI/Trend Report Maps')

#Read data
tract<-readShapePoly('TractPly.shp')
cdata<-read.csv('census00_10.csv')

#Columns >> note that GEOID (tract) and geoid2 (cdata) are the merge keys
ntract<-names(tract)
ncdata<-names(cdata) 

#Prepare data for ggplot plotting of poly info (by conversion to DataFrame)
gpclibPermit()
tract_geom<-fortify(tract,region="GEOID")
#Note that this drops attribute and retains only spatial info. However, we don't really
#need the attribute info since we are joining it to the other dataframe

#Merge
tract_poly<-merge(tract_geom,cdata,by.x="id",by.y="geoid2")
tract_poly<-tract_poly[order(tract_poly$order),]
head(tract_poly)

workF<-ggplot(tract_poly,aes(long,lat,group-group,fill=dmed_age)) + 
        geom_polygon() +
        coord_equal() #fixes aspect ratio
workF 
```

![这里发生了什么？？](https://i.stack.imgur.com/ZvfhE.png)

是的，人口普查数据的可视化已经有了更好的日子。万一我不被允许展示地图，它看起来就像是杂乱无章的锯齿线（与有人多次折叠纸并在展开之前随机切割纸片时的样子不同）。尽管华盛顿特区的外边界保持完好，但最终的形状都不像人口普查区。我可以确认 shapefile 是从 ArcMap 导出的（看起来应该是这样）。

会话信息：

```
> sessionInfo()
R version 2.15.3 (2013-03-01)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] gpclib_1.5-1    ggplot2_0.9.3.1 maptools_0.8-23 lattice_0.20-13 sp_1.0-5        foreign_0.8-52 

loaded via a namespace (and not attached):
 [1] colorspace_1.2-1   dichromat_2.0-0    digest_0.6.3       gtable_0.1.2       labeling_0.1      
 [6] MASS_7.3-23        munsell_0.4        plyr_1.8           proto_0.3-10       RColorBrewer_1.0-5
[11] reshape2_1.2.2     scales_0.2.3       stringr_0.6.2      tools_2.15.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T12:47:05.010

这只是一个错字。更改`group-group`为`group=group`，你应该没问题。

# node.js - Express.js 中间件分支或多个 app.routes 中间件

> ID：16023365
> 
> 赞同：4
> 
> 时间：2013-04-15T19:34:31.053
> 
> 标签：node.js, express, middleware

我们正在创建一个单独的 API 应用程序，但被迫使其成为现有 express.js 主应用程序的一部分。

我的问题是，如何将 API 身份验证放在适当的位置。我想把它做成一个中间件，后面是`app.routes`处理 API 路由的中间件。

是否可以：

*   在确定子域后分支主中间件堆栈是`['api']`？

或者

*   把认证中间件和API`app.routes`中间件放在主`app.routes`中间件前面？（实际上有两层`app.routes`中间件）

编辑：

另外，假设我选择第二个选项，是否可以将两个中间件（auth + api `app.routes`）公开为全局列表中的单个中间件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T21:53:40.327

您可以使用自己的中间件路由到快速应用程序。所以一个应用程序用于大多数路线，一个 api 应用程序用于 api 路线。

示例：[http ://runnable.com/UWx2MZS8trEHAACZ](http://runnable.com/UWx2MZS8trEHAACZ)

```
var express = require('express');
var app = express();
var api = express();

app.configure(function () {
  app.use(express.static(__dirname));
});

app.get('/', function(req, res){
  res.send('Hello World');
});

app.get('/api*', api);

api.configure(function () {
  api.use(function (req, res, next) {
    process.stdout.write('checking');
    setTimeout(process.stdout.write.bind(process.stdout, '.'), 100);
    setTimeout(process.stdout.write.bind(process.stdout, '.'), 200);
    setTimeout(process.stdout.write.bind(process.stdout, '.'), 300);
    setTimeout(process.stdout.write.bind(process.stdout, '.'), 400);
    setTimeout(process.stdout.write.bind(process.stdout, '.'), 500);
    setTimeout(process.stdout.write.bind(process.stdout, '.'), 600);
    setTimeout(process.stdout.write.bind(process.stdout, '.'), 700);
    setTimeout(process.stdout.write.bind(process.stdout, '.'), 800);
    setTimeout(process.stdout.write.bind(process.stdout, '.\n'), 900);
    setTimeout(function () {
      next();
    }, 1000);
  });
});

api.get('*', function (req, res) {
  res.send('Hello API');
});

app.listen(process.env.OPENSHIFT_NODEJS_PORT, process.env.OPENSHIFT_NODEJS_IP); 
```

# c# - 无法合并 2 个列表并形成具有两年标记的主列表 c# linq

> ID：16023366
> 
> 赞同：0
> 
> 时间：2013-04-15T19:34:36.853
> 
> 标签：c#, list

我有一个 list1 的列表

```
CurrentYearDate    Marks1   LastYearDate    Marks2         
09/01/2012         200       
09/02/2012         10        
09/03/2012         30
09/04/2012         40 
```

我有一个 list2 的列表

```
CurrentYearDate    Marks1   LastYearDate    Marks2         
                            9/01/2011         10
                            09/02/2011        10
                            09/03/2011        30
                            09/04/2011        40 
```

我需要将两个列表合并在一起列表主我有一个列表与 list1

```
CurrentYearDate    Marks1   LastYearDate    Marks2         
09/01/2012         200      9/01/2011         10
09/02/2012         10       09/02/2011        10
09/03/2012         30       09/03/2011        30
09/04/2012         40       09/04/2011        40 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:41:44.917

如果索引排成一行，如您的示例所示，以便每个列表中的第一项相互对应，那么您可以使用`Zip`：

```
var mergedLists = list1.Zip(list2, (a,b)=> new YourClassName()
    {
        CurrentYearDate = a.CurrentYearDate,
        Marks1 = a.Marks1,
        LastYearDate = b.LastYearDate,
        Marks2 = b.Mark2,
    }); 
```

如果索引不对应，那么您需要使用`Join`：

```
var joinedLists = list1.Join(list2, curr => curr.CurrentYearDate, last => last.LastYearDate.AddYears(1), (a,b)=> new YourClassName()
    {
        CurrentYearDate = a.CurrentYearDate,
        Marks1 = a.Marks1,
        LastYearDate = b.LastYearDate,
        Marks2 = b.Mark2,
    }); 
```

# asp.net-mvc - EF 数据库迁移

> ID：16023370
> 
> 赞同：1
> 
> 时间：2013-04-15T19:34:48.733
> 
> 标签：asp.net-mvc, entity-framework-5, database-migration, entity-framework-migrations

我正在开发一个使用 Entity Framework 5、数据库迁移和 asp 成员 api 的 MVC4 应用程序。在我的开发环境中，我可以完全删除我的数据库，运行一个包（.zip），刷新页面，一切都按预期工作；创建一个数据库，调用种子方法，并将一些默认值卡在数据库中。

完美，也很简单！但是......是的，总是有一个但是！

当我去部署同一个包（只更改了数据库连接字符串）并在远程环境中运行它时，行为会发生变化。同样，如果我进入并完全删除数据库，运行包 (.zip)，刷新页面，则仅使用 asp 成员 api 表创建数据库。我检查了连接字符串，这是肯定的，不是原因，否则无法创建数据库和成员表。

我知道使用 nuget 包管理器，它实际上是一个 powershell 实例，但我没有使用它，因为它不能在生产环境中使用。我希望包能够处理这一切，并且在我的测试环境中，它可以完美运行。

有没有人有什么建议？这可能是混合迁移历史的副作用吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T22:32:33.277

默认的 MVC4 Internet Application 项目搞砸了很多人。Microsoft 想要演示 SimpleMembership 功能，该功能需要 EF 上下文，但您必须实际修改此部分才能有效地使用应用程序的其余部分，这不是常识。

因此，关于 Entity Framework 如何工作的一些入门知识将有助于弄清楚我认为为什么会发生这种情况。

实体框架（至少版本 5，可能会在 6 或后续版本中更改）只允许您的应用程序使用一个 DbContext。最有可能的是，您至少有两个，一个`AccountsContext`是由项目模板自动生成的，另一个是您用于应用程序其余部分的上下文。如果您要关闭自动迁移并尝试生成迁移，EF 会很有帮助地告诉您需要指定要使用的上下文。但是，自动迁移是 Code First 中的默认设置，很少有人禁用它，因此很少有人会收到警报。

当启用自动迁移并且您没有现有数据库时，EF 会愉快地（并且默默地）从您的上下文中为您创建数据库。但是，如果您有多个上下文怎么办？嗯，EF 的另一个讨厌的小特性是它可以即时创建数据库。因此，使用哪个上下文是首先访问哪个上下文的函数。不错吧？因此，如果您尝试执行诸如登录之类的任何操作，则会从 中创建数据库`AccountsContext`，然后，当您尝试从应用程序的上下文中访问某些内容时，该数据库已经存在，而 EF*什么也不*做。

那么，该怎么办呢？好吧，您需要*一个*上下文来消除歧义。如果你想在你的应用程序中仍然可以有多个上下文，但你必须基本上告诉 EF 所有其他上下文都是数据库优先的，即不做任何事情。

```
public class AccountsContext : DbContext
{
    public AccountsContext()
        : base("name=YourConnectionStringName")
    {
        Database.SetInitializer<AccountsContext>(null);
    }

    ...
}

public class MyAppContext : DbContext
{
    public MyAppContext()
        : base("name=YourConnectionStringName")
    {
    }

    // All your entities here, including stuff from AccountsContext

} 
```

`MyAppContext`将是您的“主”上下文，它将包含 EF 应该知道的数据库中的每个实体。对两者的`base`调用有助于消除 EF 的猜测，并明确确保每个人都对应该使用什么数据库连接是同一页。您`AccountsContext`现在基本上是数据库优先的，因此它不会触发 EF 来创建数据库或尝试任何迁移——这就是`MyAppContext`目的。您可以创建其他上下文，就像`AccountsContext`分解应用程序的功能一样；您只需要将任何`DbSet`属性声明镜像到您的“主”上下文中。

Julie Lehrman 在她的书[Programming Entity Framework: DbContext](https://rads.stackoverflow.com/amzn/click/com/1449312969)中将此概念称为“有界上下文” ，并提供了一个通用类，您可以从中继承所有“有界上下文”，因此您不必指定连接字符串名称和设置每次都将数据库初始化程序设置为 null。

# xml - XSLT：合并兄弟节点的子元素

> ID：16023372
> 
> 赞同：1
> 
> 时间：2013-04-15T19:35:07.697
> 
> 标签：xml, xslt, xslt-1.0

我对 XSLT 有点陌生，但我正在尝试将兄弟节点的子元素合并到包含所有数据的单个节点中。

例如，我的数据结构如下所示：

```
<root>
    <item>
        <child index="0">
            <data>fooA</data>
            <data>fooB</data>
            <data>fooC</data>
            <data>fooD</data>
        </child>
        <child index="1">
            <data>foo1</data>
            <data>foo2</data>
            <data>foo3</data>
            <data>foo4</data>
        </child>
    </item>
    <item>
        <child index="0">
            <data>barE</data>
            <data>barF</data>
            <data>barG</data>
            <data>barH</data>
        </child>
        <child index="1">
            <data>bar5</data>
            <data>bar6</data>
            <data>bar7</data>
            <data>bar8</data>
        </child>
    </item>
</root> 
```

我想像这样转换它：

```
<root>
    <item>
        <child index="0">
            <data>fooA</data>
            <data>fooB</data>
            <data>fooC</data>
            <data>fooD</data>
            <data>barE</data>
            <data>barF</data>
            <data>barG</data>
            <data>barH</data>
        </child>
        <child index="1">
            <data>foo1</data>
            <data>foo2</data>
            <data>foo3</data>
            <data>foo4</data>
            <data>bar5</data>
            <data>bar6</data>
            <data>bar7</data>
            <data>bar8</data>
        </child>
    </item>
</root> 
```

所以我认为我需要以某种方式按索引分组，然后只选择每个元素，但我不太确定该怎么做。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:04:33.180

这可能有效，或者至少给你一个开始：

```
<xsl:for-each select="//item[1]/child">
    <xsl:element name="child">
        <xsl:attribute name="index"><xsl:value-of select="@index" /></xsl:attribute>
        <xsl:for-each select="//item/child[@index=@index]/*">
            <xsl:copy-of select="."/>
        </xsl:for-each>
    </xsl:element>
</xsl:for-each> 
```

但是 XSL 通常不是最适合参数化操作的。如果 interal for 不起作用，您也可以尝试[使用 param](http://www.w3schools.com/xsl/el_with-param.asp)`xsl:call-template`运行。

另请注意，这`xsl:copy`不适用于太多 XSL 引擎，因此您可能需要使用其他东西（例如`apply-templates`，为您的元素使用和编写模板）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:31:29.857

我最终使用了对我来说效果很好的[Muenchian Grouping 。](http://www.jenitennison.com/xslt/grouping/muenchian.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-26T19:23:10.730

Muenchian 分组示例...

**XML 输入**

```
<root>
    <item>
        <child index="0">
            <data>fooA</data>
            <data>fooB</data>
            <data>fooC</data>
            <data>fooD</data>
        </child>
        <child index="1">
            <data>foo1</data>
            <data>foo2</data>
            <data>foo3</data>
            <data>foo4</data>
        </child>
    </item>
    <item>
        <child index="0">
            <data>barE</data>
            <data>barF</data>
            <data>barG</data>
            <data>barH</data>
        </child>
        <child index="1">
            <data>bar5</data>
            <data>bar6</data>
            <data>bar7</data>
            <data>bar8</data>
        </child>
    </item>
</root> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:key name="childByIndex" match="child" use="@index"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/root">
    <root>
      <item>
        <xsl:for-each select="item/child[count(.|key('childByIndex',@index)[1])=1]">
          <child>
            <xsl:apply-templates select="@*|key('childByIndex',@index)/*"/>
          </child>
        </xsl:for-each>
      </item>
    </root>
  </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<root>
   <item>
      <child index="0">
         <data>fooA</data>
         <data>fooB</data>
         <data>fooC</data>
         <data>fooD</data>
         <data>barE</data>
         <data>barF</data>
         <data>barG</data>
         <data>barH</data>
      </child>
      <child index="1">
         <data>foo1</data>
         <data>foo2</data>
         <data>foo3</data>
         <data>foo4</data>
         <data>bar5</data>
         <data>bar6</data>
         <data>bar7</data>
         <data>bar8</data>
      </child>
   </item>
</root> 
```

`[Working Example](http://xsltransform.net/bFN1y9E)`

# jquery - jQuery：将 $(this) 传递给函数

> ID：16023382
> 
> 赞同：1
> 
> 时间：2013-04-15T19:35:36.043
> 
> 标签：jquery

如何将 $(this) 对象传递给看起来像这样的函数

```
$('#selected').click(dosomething) 
```

dosomething 是功能。我试着做一些事情，比如......

```
$('#selected').click(dosomething($(this))) 
```

但似乎我做错了...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T19:36:38.817

如果`dosomething`接受一个 jQuery 对象作为参数，那么你可以这样做：

```
$('#selected').click(function(){
    dosomething($(this))
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:36:53.910

在事件处理程序中，jQuery 将分配`this`给选定的元素。请注意，此时它不是 jQuery 对象，因此您需要使用`$()`.

```
$('#selected').click(function(){
   dosomething($(this));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:39:12.733

你实际上并没有那么远。添加事件时，您已经在 $(this) 范围内。所以你所要做的就是：

```
$('#selected').click(function() {
 // $(this) is the same as $('#selected')
}); 
```

假设您想要这样的“外部”功能：

```
function click_trigger(e) {
  // e for EVENT
  var $this = $(e.target) // The targeted selector ($('#selected'))
  // OR
  var $this = $(e.currentTarget) // The current clicked item (which might have "bubbled" to #selected)
}
$('#selected').click(click_trigger); 
```

您可以查看 jquery 文档以获取有关“事件”参数的更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T19:41:54.843

取决于您要完成的工作：

这将是坚实的，并会给你这个外部：

```
$this = $(this);
$('#selected').click(function(){
    dosomething($this);
}) 
```

如果您想传递此含义“#selected”元素，这就足够了：

```
$('#selected').click(function(){
    dosomething($(this));
}) 
```

或者您可以这样做以在“#selected”元素的上下文中运行 dosomething：

```
$('#selected').click(function(){
    dosomething.call(this);
}) 
```

最后一个将允许使用`this`内部`dosomething`函数，这意味着“#selected”元素。

# composer-php - 缺少作曲家自动加载命名空间？

> ID：16023385
> 
> 赞同：0
> 
> 时间：2013-04-15T19:35:46.513
> 
> 标签：composer-php

我正在开发一个使用 Monolog 的项目，该项目需要 Psr/log。当我通过自动加载使用 Monolog 时，它会抱怨缺少 Psr\Log\LoggerInterface。于是我查看了composer生成的autoload_namespaces.php，找不到Psr被注册了。

这是我的 vendor/autoload_namespaces.php 的内容

```
return array(
'Symfony\\Component\\Process' => $vendorDir . '/symfony/process/',
'Monolog' => $vendorDir . '/monolog/monolog/src/',
'Imagine' => $vendorDir . '/imagine/Imagine/lib/',
'Gedmo' => $vendorDir . '/gedmo/doctrine-extensions/lib/',
'Gaufrette' => $vendorDir . '/knplabs/gaufrette/src/',
'Evenement' => $vendorDir . '/evenement/evenement/src',
'Doctrine\\ORM' => $vendorDir . '/doctrine/orm/lib/',
'Doctrine\\DBAL' => $vendorDir . '/doctrine/dbal/lib/',
'Doctrine\\Common' => $vendorDir . '/doctrine/common/lib/',
'Assetic' => $vendorDir . '/kriswallsmith/assetic/src/',
'Analog' => $vendorDir . '/analog/analog/lib/',
); 
```

composer 是否应该为所有在 composer.json 文件中定义了 {autoload} 的项目注册名称空间？（我检查了 Monolog 和 Psr/Log，它们都定义了 {autoload}。）

还是我对作曲家有错误的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:27:08.833

您需要明确添加

```
"psr/log": "1.0.0" 
```

在你的 composer.json 需要块。该项目`monolog/monolog`不需要`psr/log`[您可以在 monolog 的 composer.json 文件中验证]。

然后运行`composer update`以更新您的自动加载器文件。

[**更新**]犯了一个错误。

我正在使用 monolog 1.2.*，它不需要`psr/log`. 在独白 1.3.* 之后，它确实需要`psr/log`. 在这种情况下，composer 应该`psr/log`在 vendor/autoload_namespaces.php 中加载命名空间。

例如，我刚刚更新了我的 composer.json 有

```
"monolog/monolog": "1.3.*", 
```

在要求块中。然后运行`composer update monolog/monolog`[您可以再次运行此命令以查看它是否解决了您的问题]

> ```
> Loading composer repositories with package information
> Updating dependencies (including require-dev)
>   - Installing psr/log (1.0.0)
>     Loading from cache
> 
>   - Removing monolog/monolog (1.2.1)
>   - Installing monolog/monolog (1.3.1)
>     Downloading: connection...
>     Downloading: 100% 
> ```

然后在我的 vendor/composer/autoload_namespaces.php 中，我找到了这个正确的条目：

```
 'Psr\\Log\\' => $vendorDir . '/psr/log', 
```

这应该有效。有时我也只是跑

```
composer dump-autoload 
```

再次重新生成 vendor/composer/autoload_namespaces.php 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:33:30.453

我实际上对 autoload_namespaces.php 的数量感到困惑。我在我的问题中发布的那个是 in `vendor/`，然后我找到了另一个 in `vendor/.composer/`，最后找到了正确的一个 in **`vendor/composer/`**。

很抱歉回答我自己的（愚蠢的）问题，但值得一提的是，以防其他一些开发人员遇到同样的问题。

并感谢@Chuan Ma 的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-21T19:35:49.833

`autoload`Composer 根据项目文件中的注册类`composer.json`，例如

```
{
  "autoload": {
    "classmap": [
      "path/to/FirstClass.php",
      "path/to/SecondClass.php"
    ]
  }
} 
```

通常`composer update`会自动重新生成`autoload_namespaces.php`您的应用程序可以使用的所有命名空间列表（除非您使用多个自动加载器）。

如果命名空间丢失，这里是直接更新作曲家自动加载器的命令：

```
composer dump-autoload -o 
```

然后，您需要确保在我们的脚本顶部包含自动加载器：

```
<?php
require_once __DIR__ . '/vendor/autoload.php'; 
```

请参阅：[如何使用 Composer 直接自动加载类？](http://phpenthusiast.com/blog/how-to-autoload-with-composer)

如果仍然失败，请仔细检查失败项目`composer.json`文件（尤其是`autoload`部分）中的语法。[要进行调试，请尝试使用XDebug](https://xdebug.org)`-vvv`或在其下运行 composer 。

# wordpress - 如何删除索引 .php 上的 wp_login？

> ID：16023389
> 
> 赞同：0
> 
> 时间：2013-04-15T19:35:53.113
> 
> 标签：wordpress, .htaccess, plugins, login, maintenance

使用 wordpress 3.5.1：请有人帮助我：如何删除 index .php 上的 wp 登录 ???? [http://cabcongo.org](http://cabcongo.org) 我曾经使用 wordpress 上的插件在维护模式下工作；1-我停用了维护模式，但是在启动我的网站时它直接将我重定向到 wp-login 页面 2-我在寻求修复它时删除了插件：当我启动我的网站时：cabcongo.org 它一直将我重定向到 wp-login 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:42:48.043

很可能该插件在您的 .htaccess 文件中创建了一个条目，该条目在停用该插件时并未被删除。检查您的 .htaccess 文件是否有类似的内容：

```
RewriteRule . /wp-login.php [L] 
```

您可以通过在行首添加 a 来将其注释掉`#`。

# python - '向后' 枚举

> ID：16023390
> 
> 赞同：4
> 
> 时间：2013-04-15T19:35:57.530
> 
> 标签：python

有没有办法得到一个产生相反的生成器/迭代器`enumerate`：

```
from itertools import izip, count

enumerate(I) # -> (indx, v)
izip(I, count()) # -> (v, indx) 
```

没有拉进来`itertools`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-15T19:38:49.107

你可以用一个简单的[生成器表达式](http://www.youtube.com/watch?v=pShL9DCSIUw)来做到这一点：

```
((v, i) for i, v in enumerate(some_iterable)) 
```

这里作为列表理解可以轻松查看输出：

```
>>> [(v, i) for i, v in enumerate(["A", "B", "C"])]
[('A', 0), ('B', 1), ('C', 2)] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-15T19:39:06.450

```
((v, indx) for indx, v in enumerate(I)) 
```

如果你真的想避免`itertools`。你为什么要？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-09T12:28:02.073

我不确定我是否正确理解了您的问题。但这是我的解决方案。基于以下代码：[https ://docs.python.org/2/library/functions.html#enumerate](https://docs.python.org/2/library/functions.html#enumerate)

```
def enumerate_rev(sequence, start=0):
    n = start
    for elem in sequence:
        yield elem,n
        n += 1 
```

# html - CSS3 动画显示在 2 个属性上，而仅选择了 1 个

> ID：16023392
> 
> 赞同：0
> 
> 时间：2013-04-15T19:36:21.640
> 
> 标签：html, css, margin, css-animations

我有这个代码：

```
@keyframes margin-title
{
0% {margin: -170px 0 0 0}
100% {margin: -130px 0 0 0}
}

@-webkit-keyframes margin-title
{
0% {margin: -170px 0 0 0}
100% {margin: -130px 0 0 0}
}

h1 {
    margin: -130px 0 0 0;
    text-shadow: 0 0 10px #000;
    animation: margin-title 1s ease, fade-title 4s;
        -webkit-animation: margin-title 1s ease, fade-title 4s;
} 
```

HTML：

```
 <div id="home">
<h1>Photal</h1>

<p>lorem ipsum</p>

</div> 
```

问题是动画“*关键帧标题*”不仅显示在标题上，还显示在段落上，而我的段落没有使用任何 CSS 代码。它们都在一个 div 中，没有任何可能影响它的动画（我猜）。

这是一个 jsfiddle，所以你会明白：http: [//jsfiddle.net/ad3gP/1/](http://jsfiddle.net/ad3gP/1/)

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:53:40.637

为此替换 CSS 文件的末尾：

```
 h1 {
    width: 440px;
    float: left;
    text-align:center;
    margin: -130px 0 0 0;
    color:#FFF;
    font-size:70px;
    font-family: 'Berkshire Swash', cursive;
    text-shadow: 0 0 10px #000;
    opacity:0.7;
        filter:Alpha(opacity=70);
    transition:opacity 0.5s;
        -webkit-transition:opacity 0.5s;
    animation: margin-title 1s ease, fade-title 4s;
        -webkit-animation: margin-title 1s ease, fade-title 4s;
}

h1:hover {
    opacity:0.9;
        filter:Alpha(opacity=90);
}

table {
    margin-top: -30px;
} 
```

（添加到`float: left;`和到）`width: 440px;``h1``margin-top: -30px;``table`

它不起作用的原因是表格从您的标题下方开始。当标题向下移动时，表格也向下移动。

# php - 轮询backbone.js中的集合时如何防止无用的ajax请求？

> ID：16023393
> 
> 赞同：1
> 
> 时间：2013-04-15T19:36:23.767
> 
> 标签：php, ajax, backbone.js, laravel, backbone.js-collections

我已经在互联网上搜索了几天，以找到一个优化的解决方案，用于在骨干网中进行实时集合。想想一个虚拟房间（例如聊天室），我想显示那个房间里的人。现在我每 2 秒获取一次集合并将新用户（在我的情况下为播放器）添加到列表视图中，它正在工作，但我担心流量和所有那些无用的 ajax 请求什么都不返回。

这是我的主干脚本：

```
App.players = new App.Collections.Players;
waitingUserList = new App.Views.WaitingPlayers({ collection: App.players });

setInterval(function() {
    App.players.fetch({
        success: function(collection) {
            collection.each(function(player) {
                if (player.get('added') == 0) {
                    player.set('added', 1);
                    player.save();
                }
            });
        },
    });
}, 2000);

$('div.waiting-list').append(waitingUserList.el); 
```

和我的 php 代码（我正在使用 laravel 3）：

```
public function get_index($gid)
{
    $players = Game::find($gid)->players()->get();
    if (!empty($players)) {
        return Response::eloquent($players);
    } else {
        return false;
    }
} 
```

有什么方法可以在`collection.fetch()`调用时等到一些新记录添加到数据库中，然后服务器响应 ajax 请求。

**PS**我不想使用`html5 websockets`
**PSS**这是我的第一次骨干体验，所以如果我在某个地方弄错了或者说了一些愚蠢的话，请原谅我：D

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:21:15.193

您所做的称为**polling**。正如您已经提到的，它不能很好地扩展。您应该寻找类似彗星的解决方案。这完全取决于您的后端。例如 Apache 在这方面做得不是很好（[Using comet with PHP?](https://stackoverflow.com/questions/603201/using-comet-with-php)）。

取决于您的需要，但我会推荐 node.js 和 socked.io，它们实现了 Web 套接字和旧浏览器的后备。如果您想与现有代码交互，请在主 Web 服务器上使用代理。

# javascript - HighChart 不输出任何内容

> ID：16023397
> 
> 赞同：0
> 
> 时间：2013-04-15T19:36:28.673
> 
> 标签：javascript, highcharts

我正在使用 HighChart 绘制图表，但它没有打印出任何内容我检查了传递的“数据”数组并且似乎没有任何问题

我的代码如下所示：

```
var high = []; //data

$.each(data.getHighValue, function (key, value) {
    high.push(value.High);
});

$(function () {
    $('#container').highcharts({
        chart: {
            type: 'line',
            marginRight: 130,
            marginBottom: 25
        },
        title: {
            text: 'Weekyly Data',
            x: -20 //center
        },
        subtitle: {
            text: 'From Arp 1st ro Apr 15th',
            x: -20
        },
        xAxis: {
            categories: ['Mon', 'Tues', 'Weds', 'Thurs', 'Fri', 'Sat', 'Sun']
        },
        yAxis: {
            title: {
                text: 'Blood Level (unit)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            valueSuffix: 'unit'
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: 'High Blood Level',
            data: high
        }]
    });
}); 
```

我的“高”数组具有以下值：113、114、115、116、117、115、127

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:55:34.260

您可能在 Highcharts 之后加载了 jQuery。它需要在 Highcharts 之前加载。

# sql - 防止从 R 向 oracle 表插入重复记录

> ID：16023399
> 
> 赞同：0
> 
> 时间：2013-04-15T19:36:31.657
> 
> 标签：sql, r, oracle

我正在尝试将数据框插入到 oracle 表中。在 Oracle 表上，我在 Date 和 LPAR 列上设置了 PK。我需要防止将重复记录插入表中。

我有以下代码来遍历每个数据框并将其插入到表中。当我将快速选项设置为 FALSE 时，我的 slqSAVE 失败。

有人可以推荐任何其他方法来防止插入重复记录并继续处理数据框。例如，如果一行失败，我需要继续处理剩余的行，等等？

```
tryCatch({
   ch=odbcConnect("<DSN>",pwd = "<password>")
    sqlSave(ch,dat, tablename="<table_name", rownames=FALSE, append=TRUE, fast=FALSE)
  },error = function(e) {
    print("error")   })   
odbcClose(ch 
```

)

# mysql - 将 MySQL 转换为 Postgres

> ID：16023413
> 
> 赞同：0
> 
> 时间：2013-04-15T19:37:12.897
> 
> 标签：mysql, sql, ruby-on-rails, postgresql

我正在寻求帮助将我的 MySQL 查询转换为在 PostgreSQL 中工作。这是对 RoR 应用程序模型的查询。任何帮助表示赞赏。

```
SELECT * FROM( 
   SELECT @row := @row + 1 AS rownum, id, device_id, name, quarterly 
   FROM (SELECT @row :=0) r, recurrent_tests 
   WHERE device_id = "+self.id.to_s+" AND quarterly = 1
   ORDER BY name ASC
) ranked 
WHERE (rownum-1) % 4 = "+(i-1).to_s) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:39:45.563

```
select *
from (
   select row_number() over (order by name asc) as rownum,
          id, 
          device_id, 
          name,
          quarterly
   from recurrent_tests
) t
where rownum - 1 % 4 = ... 
```

有关窗口函数（`over (...)`子句）的更多详细信息，请参阅手册：
[http ://www.postgresql.org/docs/current/static/tutorial-window.html](http://www.postgresql.org/docs/current/static/tutorial-window.html)

# c - 使用 pthread 函数的 strtol 上的分段错误

> ID：16023422
> 
> 赞同：0
> 
> 时间：2013-04-15T19:37:47.743
> 
> 标签：c, xcode, terminal, segmentation-fault, pthreads

我在 pthread 内的以下代码块上收到“Segmentation Fault 11”：

```
void *func(void *len){
    char *temp = len;
    size = (int) strtol(temp, (char **)NULL, 10); // this throws the segfault
} 
```

pthread create 的写法如下：

```
int main(int argc, const char *argv[]){
    pthread_t t0;
    const char * length = argv[1];

    pthread_create(&t0, NULL, &func, (void *)length);
    // rest of code
    ...
} 
```

令我困惑的是，SegFault 在编译并在终端中运行时被抛出，而不是在 Xcode 中。关于它为什么被抛出的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T19:40:50.317

除非您等待线程，否则可能会在甚至执行`main()`之前退出（因此无效，因为它超出了那里的范围）。我的猜测是，这是在调试器中运行时消除的竞争条件，这就是为什么“在 Xcode”中运行它（重要的不是 IDE，而是正在调试进程的事实）会有所帮助。`func()``argv`

# jquery - 取消选中其他复选框仅此 div

> ID：16023423
> 
> 赞同：0
> 
> 时间：2013-04-15T19:37:56.010
> 
> 标签：jquery

我有这个脚本来取消选中另一个复选框以获取一对复选框。

如何一次只选择一组？当我有多组复选框时，脚本会将它们全部视为 1 组。

[http://jsfiddle.net/infatti/XpTDK/](http://jsfiddle.net/infatti/XpTDK/)

```
 <div class="controls check-yes-no">
    <label class="checkbox inline">
      <input type="checkbox" value="option1" name="setupStewardshipReviewApproveReject"> Yes
    </label>
    <label class="checkbox inline">
      <input type="checkbox" value="option2" name="setupStewardshipReviewApproveReject"> No
    </label>
  </div>

  <div class="controls check-yes-no">
    <label class="checkbox inline">
      <input type="checkbox" value="option1" name="setupStewardshipReviewApproveReject"> Yes
    </label>
    <label class="checkbox inline">
      <input type="checkbox" value="option2" name="setupStewardshipReviewApproveReject"> No
    </label>
  </div>

$('.check-yes-no input:checkbox').click(function () {
    $(".check-yes-no input[type='checkbox']").not(this).prop("checked", false); // uncheck the other checkbox when this is checked
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:40:16.457

从技术上讲，这不是一个大的变化：

```
$('.check-yes-no input:checkbox').click(function () {
    $(this).closest('.check-yes-no').find("input[type='checkbox']")
         .not(this).prop("checked", false); 
}); 
```

但作为一个 UI，我觉得这很令人不安：你应该改用单选按钮。用户不希望复选框像这样取消选中自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:42:36.980

你确定你不是在寻找这样的东西吗？

[http://jsfiddle.net/XpTDK/1/](http://jsfiddle.net/XpTDK/1/)

对您的代码稍作修改：

```
 <div class="controls check-yes-no">
    <label class="checkbox inline">
      <input type="radio" value="option1" name="name1"> Yes
    </label>
    <label class="checkbox inline">
      <input type="radio" value="option2" name="name1"> No
    </label>
  </div>

  <div class="controls check-yes-no">
    <label class="checkbox inline">
      <input type="radio" value="option1" name="name2"> Yes
    </label>
    <label class="checkbox inline">
      <input type="radio" value="option2" name="name2"> No
    </label>
  </div> 
```

* * *

> 以下是表单控件的标准定义：
> 
> *   单选按钮用于两个或多个互斥项目的列表。换句话说，您只能选择几个选项之一，例如多项选择题。
>     
>     
>     *   复选框提供二元选择——打开或关闭选项——就像一个真/假问题。
>         *   复选框组允许访问者从列表中选择任意数量的项目。
>         *   单个复选框用于独立的是/否样式问题。
> 
> 这些定义相当清楚，但常见的错误继续出现在网站上。考虑从最近的一些冲浪中挑选出来的这些例子：
> 
> *   一个问题后跟两个标记为“是”和“否”的单选按钮。这提供了两个相互排斥的选择，但一个复选框可以更有效地完成相同的事情。
>     
>     
> *   几个复选框的列表，前面有仅选中一项的说明。如果只允许选择一项，请使用单选按钮而不是复选框。
>     
>     
> *   复选框列表，其中包含检查所有适用项的说明。该指令是多余的，因为检查多个选项的能力隐含在使用复选框而不是单选按钮中。显然，Web 构建者认为该说明对于阐明该列表是正常使用复选框的示例是必要的。这表明由于只允许一个选择的复选框被广泛滥用而引起的混乱。
>     
>     
> *   两个独立的问题，相关的和矛盾的，每个问题都有自己的独立复选框。如果选项是互斥的，则相关选项应与响应的单选按钮组合在一起。更好的是，通过一个复选框将问题组合成一个选项。

资料来源：[http ://www.techrepublic.com/article/proper-usage-of-check-boxes-and-radio-buttons/5418918](http://www.techrepublic.com/article/proper-usage-of-check-boxes-and-radio-buttons/5418918)

# c++ - 我在哪里可以获得 C++ Apache QPID 客户端库构建说明（仅限客户端）？

> ID：16023424
> 
> 赞同：0
> 
> 时间：2013-04-15T19:38:03.023
> 
> 标签：c++, build-process, rabbitmq, qpid

我在哪里可以获得 C++ Apache QPID 客户端库构建说明，**不需要服务器**？（尽可能简化）（为了将它与 RabbitMQ 一起用作简单**好的**AMQP C++ 库）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:40:17.730

不幸的是，RabbitMQ 使用的 AMQP 版本比 Qpid c++ 消息传递库支持的旧版本（RabbitMQ 支持 0-9-1，消息传递库支持 0-10 并且最近添加了 1.0 支持）。

您目前无法自行构建客户端。根据您使用的操作系统，也可能有可用的预构建包。（例如，在 RHEL 或 fedora 上，您可以在没有代理的情况下简单地安装客户端软件包）。

# c# - 包含附加变量的 C# 命令

> ID：16023425
> 
> 赞同：-1
> 
> 时间：2013-04-15T19:38:05.087
> 
> 标签：c#, c#-4.0

我无法将变量处理到现有代码片段中。我敢肯定，我缺少一些简单的东西，但是我什么也没有。

这是当前代码，没有错误：

```
new SqlCommand(@"xp_cmdshell 'bcp ""SELECT tipReportingSummaryView.payGroupCode, employee.employeeFName + '' '' + employee.employeeLName AS employeeName, tipReportingSummaryView.employeeID, SUM(tipReportingSummaryView.netChargeTips) AS netChargeTips, tipReportingSummaryView.positionCode, rvc.rvcName, ''CHG TIPS'' AS tipType FROM tipReportingSummaryView INNER JOIN employee ON tipReportingSummaryView.employeeID = employee.employeeID INNER JOIN rvc ON tipReportingSummaryView.rvcID = rvc.rvcID WHERE (tipReportingSummaryView.businessDate >= (dateadd(day,(-15),datediff(day,(0),getdate())))) AND (tipReportingSummaryView.businessDate <= (dateadd)) AND (tipReportingSummaryView.payGroupCode = 1) GROUP BY tipReportingSummaryView.payGroupCode, employee.employeeFName + employee.employeeLName, tipReportingSummaryView.employeeID, tipReportingSummaryView.positionCode, rvc.rvcName, employee.employeeFName + '' '' + employee.employeeLName HAVING SUM(tipReportingSummaryView.netChargeTips) <> 0"" queryout " + filePath + " -U sa -P password -c -t ,'", conn)) 
```

我希望 (tipReportingSummaryView.payGroupCode = ) 等于 payGroup 变量的值，所以是这样的：

```
new SqlCommand(@"xp_cmdshell 'bcp ""SELECT tipReportingSummaryView.payGroupCode, employee.employeeFName + '' '' + employee.employeeLName AS employeeName, tipReportingSummaryView.employeeID, SUM(tipReportingSummaryView.netChargeTips) AS netChargeTips, tipReportingSummaryView.positionCode, rvc.rvcName, ''CHG TIPS'' AS tipType FROM tipReportingSummaryView INNER JOIN employee ON tipReportingSummaryView.employeeID = employee.employeeID INNER JOIN rvc ON tipReportingSummaryView.rvcID = rvc.rvcID WHERE (tipReportingSummaryView.businessDate >= (dateadd(day,(-15),datediff(day,(0),getdate())))) AND (tipReportingSummaryView.businessDate <= (dateadd)) AND (tipReportingSummaryView.payGroupCode = " + payGroup + ") GROUP BY tipReportingSummaryView.payGroupCode, employee.employeeFName + employee.employeeLName, tipReportingSummaryView.employeeID, tipReportingSummaryView.positionCode, rvc.rvcName, employee.employeeFName + '' '' + employee.employeeLName HAVING SUM(tipReportingSummaryView.netChargeTips) <> 0"" queryout " + filePath + " -U sa -P password -c -t ,'", conn)) 
```

**摘要版**

当前的：

```
(tipReportingSummaryView.payGroupCode =1) 
```

期望：

```
(tipReportingSummaryView.payGroupCode = " + payGroup + ") 
```

通过添加“+ payGroup +”，我在该行上得到了各种语法错误，所以它显然导致它被炸毁。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:56:34.920

您需要在第二个字符串文字之前放置另一个 @ - 否则双引号将无法编译（它会认为这是背靠背的两个文字） - 如下所示。

孤立：`" + payGroup + @"`

```
new SqlCommand(@"xp_cmdshell 'bcp ""SELECT tipReportingSummaryView.payGroupCode, employee.employeeFName + '' '' + employee.employeeLName AS employeeName, tipReportingSummaryView.employeeID, SUM(tipReportingSummaryView.netChargeTips) AS netChargeTips, tipReportingSummaryView.positionCode, rvc.rvcName, ''CHG TIPS'' AS tipType FROM tipReportingSummaryView INNER JOIN employee ON tipReportingSummaryView.employeeID = employee.employeeID INNER JOIN rvc ON tipReportingSummaryView.rvcID = rvc.rvcID WHERE (tipReportingSummaryView.businessDate >= (dateadd(day,(-15),datediff(day,(0),getdate())))) AND (tipReportingSummaryView.businessDate <= (dateadd)) AND (tipReportingSummaryView.payGroupCode = " + payGroup + @") GROUP BY tipReportingSummaryView.payGroupCode, employee.employeeFName + employee.employeeLName, tipReportingSummaryView.employeeID, tipReportingSummaryView.positionCode, rvc.rvcName, employee.employeeFName + '' '' + employee.employeeLName HAVING SUM(tipReportingSummaryView.netChargeTips) <> 0"" queryout " + filePath + @" -U sa -P password -c -t ,'", conn)) 
```

您可能也应该在 filePath 连接之后放置一个。

请参阅此处的“逐字字符串”：[MSDN Page On Strings](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CDoQFjAB&url=http://msdn.microsoft.com/en-gb/library/vstudio/362314fe.aspx&ei=OltsUZ-GDcil0wWyuoGQDQ&usg=AFQjCNEbbq5U1cv3vxiy88ctxj5dhLCoZw&sig2=TTdnwFSY_i3OXr3z0TrpcA&bvm=bv.45175338,d.d2k)（抱歉，找不到专门针对它们的页面）

编辑：类似于[这里的这个问题](https://stackoverflow.com/questions/652310/escaping-verbatim-string-literals)

# c++ - 在 C++ 中更改辅助监视器的屏幕分辨率

> ID：16023426
> 
> 赞同：-4
> 
> 时间：2013-04-15T19:38:12.620
> 
> 标签：c++, monitor, screen-resolution

我想知道是否有人可以帮助我在 Windows 7 上使用 C++ 更改辅助显示器的屏幕分辨率。我知道这不是太多信息，所以如果您需要更多信息，只需发表评论，我会提供。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:45:28.600

您可以通过在[DEVMODE](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183565.aspx)结构中设置正确的分辨率，然后调用[ChangeDisplaySettingsEx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183413.aspx)来实际进行更改来做到这一点。

您可能希望使用[EnumDisplaySettingsEx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162612.aspx)来查找相关显示器和显卡支持的分辨率。

# jquery - Jquery多个具有相同名称的类，随机不同的背景

> ID：16023430
> 
> 赞同：-2
> 
> 时间：2013-04-15T19:38:26.790
> 
> 标签：jquery, css, image, background

标题应该真的说明了一切，我有 4 个图像，5 个类都命名相同。图像适用于前 4 个类（同样它们是相同的类名），第 5 个不添加图像（见附图）。我希望图像在每个班级上随机出现。我还希望图像是随机的。 ![第5个没有背景](https://i.stack.imgur.com/IFSlR.jpg)

这是我的代码。

```
$("table.catalogFooterArea").css("background", function(i) {
  return [
   "url(Custom/themes/pilot/css/images/catItemFoot.png)",
   "url(Custom/themes/pilot/css/images/catItemFoot2.png)",
   "url(Custom/themes/pilot/css/images/catItemFoot3.png)",
   "url(Custom/themes/pilot/css/images/catItemFoot4.png)"][i];
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:12:20.150

```
var images = ['catItemFoot.png', 'catItemFoot2.png', 'catItemFoot3.png', 'catItemFoot4.png'];

$("table.catalogFooterArea").each(function(){
  $(this).css({'background' : 'url(custom/themes/pilot/css/images/' + images[Math.floor(Math.random() * images.length)] + ')'})
   }); 
```

这很有效，感谢 mplungjan 忘记了使用 .each！

# c# - 如何从属性中创建具有属性的元素

> ID：16023431
> 
> 赞同：2
> 
> 时间：2013-04-15T19:38:35.713
> 
> 标签：c#, .net, xml-serialization

我在.net 中使用xml 的序列化。我有一个名为 tier 的属性：

```
public string tier { get; set; } 
```

当对象被序列化时，我想要获得的最终结果是：

```
<settings>
    //Where the value is the value of the tier property
    <setting name="tier" value="2" /> 
</settings> 
```

使用该属性可以使用哪些 xml 序列化属性来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:03:19.060

简单来说，`XmlSerializer`不直接支持这种场景。它可以处理：

```
<foo><tier>2</tier></foo> 
```

或者

```
<foo tier="2"/> 
```

但不是你想要的，除非你把模型扭曲得很厉害。

是否可以使用 LINQ-to-XML？

```
var setting = new Setting { tier = "2" };

var xml = new XElement("settings", new XElement("setting",
    new XAttribute("tier", setting.tier))); 
```

不是完全自动化的序列化，但它完成了工作。

# algorithm - 如何应用动态规划来找到在现场建造塔的最低成本

> ID：16023432
> 
> 赞同：2
> 
> 时间：2013-04-15T19:38:37.653
> 
> 标签：algorithm, dynamic-programming

你得到一个`N X M`矩形场，左下角在原点。你必须在野外建造一座方形底座的塔。田地里有树，连根拔起它们的成本都很高。因此，您必须尽量减少连根拔起的树木数量，以最大限度地降低建造塔的成本。

**示例输入：**

```
N = 4 
M = 3 
Lenght of side of Tower = 1 
Number of Trees in the field = 4  

1 3 5  
3 3 4  
2 2 1  
2 1 2 
```

输入中的 4 行是树的坐标，其中第三个整数是根除成本。

与塔边缘重合的树被视为放置在塔内，也必须连根拔起。

我在为这个问题制定动态规划关系时遇到了问题

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:41:41.760

听起来您的问题归结为：找到具有最小和的 MxN 矩阵的 KxK 子块。您可以通过使用积分变换有效地解决此问题（与输入的大小成正比）。当然，这不一定能帮助您解决动态编程问题——我不确定这个解决方案是否等同于任何动态编程公式......

无论如何，对于`(a,b)`原始矩阵的每个索引对`M`，计算一个“积分变换”矩阵`I[a,b] = sum[i<=a, j<=b](M[i,j])`。这可以通过按顺序遍历矩阵来计算，参考从前一行/列计算的值。（稍加思考，您也可以使用稀疏矩阵有效地做到这一点）

然后，您可以将`(a1..a2, b1..b2)`恒定时间内的任何子块的总和计算为`I[a2,b2] - I[a1-1,b2] - I[a2,b1-1] + I[a1-1,b1-1]`。遍历所有 KxK 子块以找到最小的总和将花费与原始矩阵大小成正比的时间。

* * *

由于原始问题被表述为积分坐标列表（并且可能期望塔位置作为积分坐标对输出），因此您可能确实需要将您的字段表示为稀疏矩阵以获得有效的解决方案 - 这涉及按字典顺序对树的坐标进行排序（例如，首先按`x`-coordinate，然后按`y`-coordinate）。请注意，此排序步骤可能需要`O(L log L)`size 的输入`L`，支配以下步骤，这些步骤仅需要`O(L)`输入的大小。

还要注意，由于指定“与塔边缘重合的树被连根拔起......”的问题，边长为 K 的塔实际上对应于一个`(K+1)x(K+1)`子块。

# html - 在图像上放置表单

> ID：16023433
> 
> 赞同：1
> 
> 时间：2013-04-15T19:38:42.447
> 
> 标签：html, css, image, forms, positioning

我有这个 html 用于放置在我网站顶部的图像（我正在处理本地文件，该网站还没有上线，只是先搞砸了）：

HTML：

```
<img id="top-header" src="images/top_header.jpg"> 
```

CSS：

```
#top-header {
   position: absolute;
   left: 0%;
   top: 0;
} 
```

图像为**3000X200** jpg 图像

我有一个表格，我想把它放在该图像的最右侧，图像的最右侧。

（表格）HTML：

```
<form id="searchbox" action="" method="get">
<input > 
```

![在此处输入图像描述](https://i.stack.imgur.com/cE7o1.jpg)

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:42:24.047

`position: absolute;`如果您只是将其放在顶部并左侧为零，为什么要设置？有容器`position: relative;`吗？

只需将表单设置为`position: absolute;`并将其放在顶部和左侧即可`0`。

图像和表单都需要在同一个容器中，即：

```
<div id="container">
    <img/>
    <form></form>
</div> 
```

与CSS：

```
 #container {
     position: relative;
 }

 form {
     position: absolute;
     top: 0;
     left: 0;
 } 
```

正如评论中所建议的，另一个很好的选择是使用背景图像。在这种情况下，您不需要容器或定位或图像：

```
form {
    background: #FFF url('path/to/image') no-repeat top left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:43:41.863

您可以对表单执行相同操作，只需将左侧更改为您希望加载的位置。

演示：http: [//jsfiddle.net/lucuma/vV2ce/](http://jsfiddle.net/lucuma/vV2ce/)

CSS：

```
#top-header {
  position: absolute;
  left: 0%;
  top: 0;
}

#searchbox {
    position:absolute; 
    left: 1200px;
    display:inline-block;
    z-index:10
}

/* in my example #searchbox and form are the same so this depends on your overall '
   implementation 

   form {position:absolute; left: 1200px;display:inline-block;z-index:10}
*/ 
```

HTML：

```
<img id="top-header" src="http://placehold.it/1440x200">

<form id="searchbox" action="" method="get">
   Input <input type="text" />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:49:55.963

除了使用 img 标签，更好的方法是将图像设置为表单的背景。

```
form {
   background: url('imagepath.png') no-repeat 0 0;
   text-align: right;
} 
```

# c++ - if..else 警告“并非所有控制路径都返回值”

> ID：16023437
> 
> 赞同：2
> 
> 时间：2013-04-15T19:38:57.293
> 
> 标签：c++, loops, return, warnings

我有一个 if...else 语句，并且在编译时收到警告“并非所有控制路径都返回一个值”。谁能告诉我为什么会收到此警告？

我的代码：

```
template<typename T>                                                                        
double NumericArray<T>::Dot(const NumericArray& na)
{
    if (Size() == na.Size())
    {
        double result = 0;
        for (int i=0; i<Size(); i++)
        {
            result += ((na.GetElement(i))*(GetElement(i)));
        }
        return result;
    }
    else 
    {
        cout<<"Error! Dot Product Operands Number Of Elements Unequal"<<endl;
    }
} 
```

除了定义的结果之外，我看不到如何通过我的代码获得任何其他结果。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T19:40:00.003

因为在您的最终 else 或 if 块之外没有 return 语句。

如果此条件`if (Size() == na.Size())`评估为 false，则该方法不会返回值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T19:40:08.613

子句内既没有`return`语句也没有语句。`throw``else`

# javascript - jQuery 循环页面计数更改“onSlide”

> ID：16023441
> 
> 赞同：1
> 
> 时间：2013-04-15T19:39:11.087
> 
> 标签：javascript, jquery, jquery-cycle

如果这里有另一个 SO 问题，谷歌或我都找不到。首先，感谢您的任何回复。

这是我的设置。它与您的正常 ("#item").cycle(); 有点不同 之类的东西，但是有一些复杂的设置。我只包括桌面变量，它包含基于 matchMedia 结果传递的所有内容。

```
var desktop = {
    next: "#next_slide",
    prev: "#prev_slide",
    speed: 2000,
    pager: "#pag",
    easeIn: 'easeOutQuad',
    easeOut: 'easeInQuad',
    fx: 'custom',
    height: '314px',
    cssBefore:{  
        left: '-20%',
        opacity: 0,
        display: 'block'
    },
    cssAfter:{ 
        display: 'none',
        opacity: 0
    }, 
    animIn: {  
        left: '0%',
        opacity: 1 
    }, 
    animOut: {  
        left: '20%',
        opacity: 0
    },
    sync: false,
    'timeout': 7000,
    after: function(currSlideElement, nextSlideElement, options, forwardFlag){
         $('#controls p').html( (options.currSlide + 1 ) + ' <em>of</em> ' + options.slideCount)
    }
} 
```

我需要一种方法来让“幻灯片 x of x”在幻灯片上更改。目前，轮换将转换，然后数字将发生变化。我知道这是循环设置的一种默认设置，但我想知道是否有什么办法可以在幻灯片期间或幻灯片上改变幻灯片计数。这是一个挑剔的客户要求，我被告知如果我做不到，那就没有害处。这主要是出于好奇。

如果您需要更多代码，我可以添加它，但我真的认为只需一个基本配置变量用于相关滑块就足够了，因为它不是错误/错误，更多的是对想法的请求，所以它应该没问题。我也会给你一个设置的小提琴，但目前有一些时间限制，并且会在等待答案的同时进行其他更改。此外，会提供访问权限，但整个事情都处于完全的 Intranet 锁定状态，其他人无处可访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:01:26.897

我认为您可以考虑在超时时间等于或略小于 fx 持续时间的 before 事件中执行此操作。这些方面的东西：

演示：http: [//jsfiddle.net/lucuma/ny2Tj/5/](http://jsfiddle.net/lucuma/ny2Tj/5/)

```
var desktop = {
    next: "#next_slide",
    prev: "#prev_slide",
    speed: 2000,
    pager: "#pag",
    easeIn: 'easeOutQuad',
    easeOut: 'easeInQuad',
    fx: 'custom',
    height: '314px',
    cssBefore:{  
        left: '-20%',
        opacity: 0,
        display: 'block'
    },
    cssAfter:{ 
        display: 'none',
        opacity: 0
    }, 
    animIn: {  
        left: '0%',
        opacity: 1 
    }, 
    animOut: {  
        left: '20%',
        opacity: 0
    },
    sync: false,
    'timeout': 7000,
    before: function(currSlideElement, nextSlideElement, options, forwardFlag){
       var $opts= options;
       setTimeout(function() {
            $('#controls p').html( ($opts.currSlide + 1 ) + ' <em>of</em> ' + $opts.slideCount)
       }, 7000);
    }
} 
```

# angularjs - 将变量从服务/工厂绑定到控制器

> ID：16023451
> 
> 赞同：69
> 
> 时间：2013-04-15T19:39:31.580
> 
> 标签：angularjs, angularjs-directive

我有一个变量将由一个或多个控制器使用，由服务更改。在这种情况下，我构建了一个服务，将这个变量保存在内存中，并在控制器之间共享。

问题是：每次变量发生变化时，控制器中的变量都不会实时更新。

我创建了这个 Fiddle 来提供帮助。[http://jsfiddle.net/ncyVK/](http://jsfiddle.net/ncyVK/)

--- 请注意，当我增加 count 的值时， `{{countService}}`or永远不会更新。`{{countFactory}}`

如何将 Service/Factory 变量绑定到 Controller 中的 $scope.variable？我做错了什么？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-04-15T21:47:43.550

你不能绑定变量。但是您可以绑定包含此变量的变量访问器或对象。这是固定的[jsfiddle](http://jsfiddle.net/xuUHS/1/)。

基本上你必须将一些东西传递给范围，它可以返回/或保存当前值。例如

工厂：

```
app.factory('testFactory', function(){
    var countF = 1;
    return {
        getCount : function () {

            return countF; //we need some way to access actual variable value
        },
        incrementCount:function(){
           countF++;
            return countF;
        }
    }               
}); 
```

控制器：

```
function FactoryCtrl($scope, testService, testFactory)
{
    $scope.countFactory = testFactory.getCount; //passing getter to the view
    $scope.clickF = function () {
        $scope.countF = testFactory.incrementCount();
    };
} 
```

看法：

```
<div ng-controller="FactoryCtrl">

    <!--  this is now updated, note how count factory is called -->
    <p> This is my countFactory variable : {{countFactory()}}</p>

    <p> This is my updated after click variable : {{countF}}</p>

    <button ng-click="clickF()" >Factory ++ </button>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T16:23:16.023

绑定服务中的任何数据都不是一个好主意，但是如果您不再需要它，我建议您使用以下两种方式。

1）获取不在您的服务内部的数据。在您的控制器内部获取数据，绑定它不会有任何问题。

2）您可以使用 AngularJs 事件功能。您甚至可以通过该事件发送数据。

如果您需要更多示例，这里的文章可能会对您有所帮助。

[http://www.w3docs.com/snippets/angularjs/bind-value-between-service-and-controller-directive.html](http://www.w3docs.com/snippets/angularjs/bind-value-between-service-and-controller-directive.html)

# asp.net-mvc-4 - 难以将对象从一个控制器传递到另一个控制器

> ID：16023457
> 
> 赞同：0
> 
> 时间：2013-04-15T19:39:53.287
> 
> 标签：asp.net-mvc-4

我正在尝试将一个对象从一个控制器传递到另一个控制器，但它的行为方式并没有我想要的那样。在下文`ApplicantMainController`中，我将实例化一个名为`ApplicationQuestions`（其中包含一个`List<ApplicationQuestion>`对象作为其成员之一）的对象，然后尝试通过`RedirectToAction`方法调用传递它：

```
public ActionResult FormAction(FormCollection collection)
{
    if (collection["cmdSearch"] != null)
    {
        // more code above...

        ApplicationQuestions questions = new ApplicationQuestions();

        MultipleChoiceQuestion q1 = new MultipleChoiceQuestion("Can you lift 50 pounds?");
        MultipleChoiceQuestion q2 = new MultipleChoiceQuestion("Are you at least 18 years of age?");
        MultipleChoiceQuestion q3 = new MultipleChoiceQuestion("Are you legally able to work in the US?");
        MultipleChoiceQuestion q4 = new MultipleChoiceQuestion("Have you ever been convicted of a felony?");

        q1.AddPossibleAnswer(1, new Answer("Yes", true));
        q1.AddPossibleAnswer(2, new Answer("No", false));
        q2.AddPossibleAnswer(1, new Answer("Yes", true));
        q2.AddPossibleAnswer(2, new Answer("No", false));
        q3.AddPossibleAnswer(1, new Answer("Yes", true));
        q3.AddPossibleAnswer(2, new Answer("No", false));
        q4.AddPossibleAnswer(1, new Answer("Yes", false));
        q4.AddPossibleAnswer(2, new Answer("No", true));

        questions.AddQuestion(q1);
        questions.AddQuestion(q2);
        questions.AddQuestion(q3);
        questions.AddQuestion(q4);

        // not sure how to pass the object here??
        return RedirectToAction("Apply", "ApplicantApply", new { model = questions });
    }
} 
```

当我重定向到控制器时，它似乎做到了：

```
private ApplicationQuestions m_questions;

// more code ...

public ActionResult Apply(ApplicationQuestions questions)
{
    m_questions = questions;
    return RedirectToAction("NextQuestion", "ApplicantApply");
} 
```

然而，虽然引用现在绑定到传递给`Apply`方法的参数，但调试器告诉我，对集合的引用`questions`不包含任何元素，尽管调用者显然传递了一个包含四个元素的集合。我想我误解了它是如何工作的——像这样在控制器之间通信对象的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:43:35.117

一种选择是在重定向期间使用 TempData 来保存对象。

```
TempData["MyCoolData"] = questions;
return RedirectToAction("Apply", "ApplicantApply"); 
```

然后在另一个动作中从 TempData 中抓取对象：

```
m_questions = (ApplicationQuestions)TempData["MyCoolData"]; 
```

有关更多信息，请参阅[此问题及其答案](https://stackoverflow.com/questions/2324044/net-mvc-calling-redirecttoaction-passing-a-model)。

# python - 剥离 beautfulsoup 返回的链接

> ID：16023468
> 
> 赞同：0
> 
> 时间：2013-04-15T19:40:13.140
> 
> 标签：python, regex, hyperlink, beautifulsoup

当我使用 beautifulsoup 时，我会从 href 返回以下代码。

```
"/url?q=http://druid8.sit.aau.dk/acc_papers/kdln4ccpef78ielqg01fuabr81s1.pdf&sa=U&ei=HkNsUauqN_GQiAf5p4CwDg&ved=0CDkQFjAJ&usg=AFQjCNGk0DTzu2K2ieIKS-SXAeS5-VYTgA" 
```

只剪切 http://.... pdf 以便我可以下载文件的最简单方法是什么？

```
for link in soup.findAll('a'):
    try:
            href = link['href']
            if re.search(re.compile('\.(pdf)'), href):
            print href
    except KeyError:
            pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:25:35.310

一个更pythonic的方法是`urlparse`图书馆：

```
A = "/url?q=http://druid8.sit.aau.dk/acc_papers/kdln4ccpef78ielqg01fuabr81s1.pdf&sa=U&ei=HkNsUauqN_GQiAf5p4CwDg&ved=0CDkQFjAJ&usg=AFQjCNGk0DTzu2K2ieIKS-SXAeS5-VYTgA"

import urlparse
sol = urlparse.parse_qs(A)
print sol["/url?q"][0] 
```

这使：

```
>> http://druid8.sit.aau.dk/acc_papers/kdln4ccpef78ielqg01fuabr81s1.pdf 
```

如果您使用的是 Python 3，则语法略有不同，上面显示的是 Python 2.7 版本。如果您也想要其他参数，这*非常*好，例如：

```
print sol["ved"]
>> ['0CDkQFjAJ'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:44:55.003

他们遇到的一致性如何？

```
href.split('q=')[1].split('&')[0] 
```

没有正则表达式就可以工作。这也可以做到：

```
href[7:href.index('&')] # may need +1 after .index call 
```

他们似乎都在我的交互式终端中工作：

```
>>> s = "/url?q=http://druid8.sit.aau.dk/acc_papers/kdln4ccpef78ielqg01fuabr81s1.pdf&sa=U&ei=HkNsUauqN_GQiA f5p4CwDg&ved=0CDkQFjAJ&usg=AFQjCNGk0DTzu2K2ieIKS-SXAeS5-VYTgA"
>>>
>>> s[7:s.index('&')]
'http://druid8.sit.aau.dk/acc_papers/kdln4ccpef78ielqg01fuabr81s1.pdf'
>>>
>>> s.split('q=')[1].split('&')[0]
'http://druid8.sit.aau.dk/acc_papers/kdln4ccpef78ielqg01fuabr81s1.pdf'
>>> 
```

您也可以使用此正则表达式到达那里：

```
>>> import re
>>>
>>> re.findall('http://.*?\.pdf', s)
['http://druid8.sit.aau.dk/acc_papers/kdln4ccpef78ielqg01fuabr81s1.pdf']
>>> 
```

# .net - 验证方法在不使用 IoC 的情况下被调用

> ID：16023471
> 
> 赞同：0
> 
> 时间：2013-04-15T19:40:21.363
> 
> 标签：.net, unit-testing

是否可以在 .NET 中测试调用了一个方法。要求是1）不使用IoC，2）不手动编写存根等（但可以使用测试框架）。

例如，

```
public class MyClass {

    public virtual void F1() {
     // Some code
    }

    public virtual void F2() {
     // Some code plus
     this.F1(); // -> I want to test F2 logic as a unit test but I want to make sure F1 is called
    }

} 
```

非常感谢

# vlookup - Excel Vlookup 函数

> ID：16023472
> 
> 赞同：1
> 
> 时间：2013-04-15T19:40:21.813
> 
> 标签：vlookup

我有一个包含两个工作表的电子表格。每个工作表都包含 C 列，我只需要提取破折号后的最后一个数字。因此，在单元格 D 中，它使用以下公式来执行此操作：

```
=TRIM(RIGHT(SUBSTITUTE(C2,"-",REPT(" ",100)),100)) 
```

如您所见，正确的数字显示在单元格 D 中。

```
A   B   C                        D  E
250 stevem  GP CONSTRUCCION-9-50399 50399   4/12/2013 0:00
223 stevem  ANIMATIC MEDIA-9-50400  50400   4/12/2013 0:00
224 stevem  DIGITAL ENGINEE-9-50401 50401   4/12/2013 0:00 
```

然后，我需要对表 1 中的单元格 D 进行 vlookup 并将其与表 2 中的单元格 D 匹配，其中包含相同的公式，用于仅提取 - 之后的最后一位数字

我的 Vlookup 是：

```
=VLOOKUP(D:D,Sheet2!A:F,2) 
```

但我认为因为查找单元格不包含 Just 值，而是包含返回值的公式，所以我收到错误 #N/A

Vlookup 是否适用于我正在尝试做的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:46:24.403

VLookup 返回的 (#N/A) 表示未找到该值。我的猜测是，问题是您正在从 Sheet 2 的 A 列中的 Sheet 1 中寻找 D 的值。

VLookup函数有参数[Lookup Value],[Table Array],[Column Index Num],[Range Lookup]

**查找值**是您正在搜索的值。 **表数组**是要搜索的值的范围。第一列是搜索的内容。 **Column Index Num**是找到 Lookup 值时应返回其值的表数组的列号。如果表数组中有多个查找值的实例，则该函数返回第一个实例。 **Range Lookup**是真还是假，并确定您是仅使用精确匹配 -False 还是近似匹配 -True。

您选择的表格数组是 Sheet2!A:D 并且您拥有的列索引号是 2。这意味着 vlookup 正在查找 A 列中的值，如果找到它将返回 B 列中的值。如果该值是未找到，则 vlookup 返回一般错误 (#N/A)。如果需要，您可以使用包装在 VLOOKUP() 函数周围的 IFERROR() 函数来捕获它。

您描述您想要搜索表 2 的 D 列中的值，但您没有表达您想要返回的值。如果您只想要返回的数字，那么将范围设置为仅一列就足够了。

示例：=vlookup(D1,Sheets2!D:D,1,False)

此 VLOOKUP() 函数在工作表 2 的 D 列中查找值 D1，如果找到，则返回数字，否则返回 (#N/A) 并执行完全匹配搜索。

# javascript - JQuery Mobile 按钮在 IE9 中呈现不正确

> ID：16023479
> 
> 赞同：0
> 
> 时间：2013-04-15T19:40:41.990
> 
> 标签：javascript, jquery, jquery-mobile, button, internet-explorer-9

我在我的 web 应用程序中单击按钮时创建了一行 JQuery Mobile 按钮。这些按钮在 FF 和 Chrome 中呈现良好，但在 IE9 中，它们仅呈现为正方形（而不是完整大小的矩形）并且文本大部分缺失。

这是HTML：

```
<div id="themes" data-role="popup" data-position-to="#layersImg" data-corners="true" data-transition="none" data-theme="b" data-overlay-theme="a">
    <div class="ui-grid-b">
        <div class="ui-block-a">
            <div data-role="fieldcontain">
                <fieldset data-role="controlgroup" data-type="vertical">
                    <!--<legend><strong></strong></legend>-->
                    <div style="margin-left: 15px; margin-right: 15px"> <a id="firstBtn" data-role="button" data-rel="popup" href="#firstCategory">Title</a>
                   /// and so on .... 
```

我正在使用 JQuery 1.7 和 JQuery Mobile 1.3.0

我只有 IE 有这个问题（以及其他一些问题，请参阅我的其他帖子！）

有任何想法吗？谢谢，杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:48:26.240

好吧，这似乎可以解决问题：我刚刚在 fieldset 标记中添加了一个类：

```
 <fieldset data-role="controlgroup" data-type="vertical" class="ui-btn-right"> 
```

..现在它们按预期呈现..我仍然卡在我上面链接的另一个 IE9 问题上！

# jquery - 使用 jQuery 找出 cookie 的当前年龄？

> ID：16023481
> 
> 赞同：0
> 
> 时间：2013-04-15T19:40:52.283
> 
> 标签：jquery, cookies

有没有办法找出饼干的当前年龄？

例如，我希望在 cookie 的前 30 天的每次访问中都显示一个叠加层，然后在 30 天后不再显示。

我正在使用 jquery cookie 插件设置一个过期日期很远的 cookie：

```
$.cookie("MyCookie", "true", {
  path: "/",
  expires: 9999
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:50:15.803

与其尝试了解 cookie 的年龄，不如创建另一个？除了你的`expires: 9999`：

```
$.cookie('monthCookie', true, { expires: 30 });

//later in code
if ($.cookie('monthCookie')) {
//show some content
}
else {
//do other stuff
} 
```

# c# - 大整数源代码

> ID：16023482
> 
> 赞同：3
> 
> 时间：2013-04-15T19:40:55.760
> 
> 标签：c#, biginteger

我正在尝试制作一个快速的斐波那契算法。它通常需要将 BigInteger 分配给另一个变量，并且由于 C# BigInteger 是作为结构实现的，因此它需要复制整个数组，可能是数千个整数。所以我需要一个可以通过引用访问的 BigInteger 实现。.Net Reflector 和 ILSpy 都只显示空实现。

无论如何，看看源代码会很有趣，正如这里所问的那样： [BigInteger 如何在内部存储值？](https://stackoverflow.com/questions/11819436/how-does-the-biginteger-store-values-internally)

问题是每个所谓的源代码文件实际上都没有实现、dll 并从以下位置下载： [http ://referencesource.microsoft.com/netframework.aspx](http://referencesource.microsoft.com/netframework.aspx)

制作包装类不会有帮助，因为该算法需要大量计算，即使是简单的加法也需要整个数组的三个副本。

有谁知道为什么 BigInteger 被实现为结构？在哪里可以找到源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:45:39.633

如果您需要更快的实施；我建议您看一下替代实现；例如[GNU 多精度库](http://www.emilstefanov.net/Projects/GnuMpDotNet/)包装器。

您还可以查看[BigInt](http://www.codeproject.com/Articles/36323/BigInt)的这个实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-01T20:56:43.913

BigInteger 和整个 .net 核心的完整源代码现在最终可以在[source.dot.net](https://source.dot.net/#System.Runtime.Numerics/System/Numerics/BigInteger.cs,035eb7acfa6585a0)和[github](https://github.com/dotnet/runtime/tree/master/src/libraries/System.Runtime.Numerics/src/System/Numerics)上获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-15T12:14:32.227

我知道这个问题已经有八年的历史了，但我想在这里为将来阅读此问题的任何人澄清一些事情，因为这个问题是由结构引起的并且可能导致对结构的巨大误解。

问题陈述如下：

> 因为 C# BigInteger 是作为结构实现的，所以需要复制整个数组

这是绝对不正确的。是的，当将实例分配给任何东西时，存储在结构实例中的所有值都会被复制。但是，这并不意味着，在 的情况下`BigInteger`，当发生这种情况时，整个数组都会被复制。唯一复制的是对该数组的**引用**，这就像复制单个 int 值（我认为对象引用的确切大小取决于机器，但想法保持不变）。在结构中存储引用类型（类）的实例时总是如此。对象本身永远不会被复制，只有对它们的引用。

所以导致这个问题的问题实际上并不存在，所以没有理由担心由数组复制等引起的大量性能问题。

# java - Servlet 被调用两次

> ID：16023483
> 
> 赞同：0
> 
> 时间：2013-04-15T19:40:58.660
> 
> 标签：java, servlets, weblogic, lifecycle, jdeveloper

我正在使用 JDeveloper 及其集成的 weblogic 服务器。我有一个购物车应用程序。当用户单击特定字母表时，会触发“AlphabetServlet”并访问数据并将其传输到视图（jsp）。针对每个产品行，有一个“添加到购物车”按钮，它应该将数据传输到“CartServlet”。但是当我单击“添加到购物车”按钮时，数据会转到“CartServlet”，然后“AlphabetServlet”也会被调用。我不明白为什么这个 AlphabetServlet 被调用了两次，我该如何防止这种情况。我需要注意 weblogic 中的任何设置吗？这个问题是浏览器中立的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:29:31.403

因为您`CartServlet`将请求重定向到`AlphabetServlet`. 检查您的 CartServlet 代码。

问候，

# asp.net-mvc - ASP.Net MVC 在 javascript 中获取隐藏字段值

> ID：16023485
> 
> 赞同：0
> 
> 时间：2013-04-15T19:41:16.663
> 
> 标签：asp.net-mvc, forms, jquery-mobile, hidden

我之前曾多次问过同样的基本问题，但没有得到回应，但让我再试一次，尽可能简单地分解它。

1.  我有一个强类型视图，上面有一个隐藏字段。
2.  当视图呈现服务器端时，我将隐藏字段的值设置为模型的属性。
3.  当视图呈现客户端时，我想获取隐藏字段的值（在服务器端呈现期间设置）并将其显示在 java 脚本警报框中。

这应该是一件简单的事情，但我无法使其工作。我在视图中设置了一个断点，我可以看到隐藏字段被设置为正确的值。但是 javascript 不会显示该值。

正在呈现的页面/视图之前已转到。在我想显示此警报时，我将返回该页面，现在我想查看警报。

就好像页面正在被缓存，所以不是使用隐藏字段的新值，而是使用旧值（从第一次访问页面开始）。如果正在缓存 DOM，我如何防止这种情况发生，以便每次访问页面时我都会获得页面的更新值而不是缓存的值？我究竟做错了什么？？

```
@<input type="hidden" id="hdnShowMsg" value="@Model.ShowMsg" />

<script>
alert($('#hdnShowMsg').val());
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:06:20.967

您的脚本可能会在您的文档完全呈现之前触发。使用 jQuery`document ready`函数。

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

```
<script>
$(function() {
    alert($('#hdnShowMsg').val());
});
</script> 
```

另请注意，`document ready`jQuery Mobile 文档中不支持该功能，并且您可能会遇到问题，具体取决于您尝试操作的 DOM 的哪一部分。

改为使用`$(document).bind("pageinit", function() {})`。

[http://jquerymobile.com/demos/1.2.1/docs/api/events.html](http://jquerymobile.com/demos/1.2.1/docs/api/events.html)

# mysql - 显示多个结果的 MySQL 查询

> ID：16023487
> 
> 赞同：0
> 
> 时间：2013-04-15T19:41:25.400
> 
> 标签：mysql, join, search, sql-like

我正在构建一个搜索页面，其中表单将变量传递给 SQL 查询。如果我输入任何搜索参数，我会得到我想要的结果，除非我将作者或主题搜索留空，否则如果有多个作者和/或与结果相关联的主题，我将得到多个结果。我的大部分记录都有多个作者或多个主题。

基本问题是，如果有 2 个作者和 3 个相关主题的记录，那么我会得到 6 个结果。

我要达到的目标：我正在尝试修改查询，以便我只收到一条记录（record_ID 是唯一的），即使有多个作者或多个主题。

我遇到问题的查询中的 2 JOINS 是拉作者和主题。例如，为了获取作者，我使用这个连接（主题 JOIN 几乎相同），变量 $fauthor 是从 php 传入的：

```
SELECT la.author, la.author_ID, ra.record_ID
FROM lib_author AS la
JOIN record_author AS ra ON la.author_ID = ra.author_ID
JOIN lib_record AS lr ON ra.record_ID = lr.record_ID
WHERE la.author LIKE '%$fauthor%' 
```

关联的表是 lib_author [author_ID, author]、lib_record [record_ID, ...] 和 record_author [record_ID, author_ID]

这是完整的查询：

```
select a.record_ID, a.year, n.title, y.author, y.author_ID, j.journal, pox.publisher, lox.language, a.volume, a.issue, a.pages, a.abstract, s.subject
   FROM lib_record AS a  
   JOIN lib_title as n on n.title_ID = a.title_ID
   JOIN (SELECT la.author, la.author_ID, ra.record_ID
       FROM lib_author AS la
       JOIN record_author AS ra ON la.author_ID = ra.author_ID
       JOIN lib_record AS lr ON ra.record_ID = lr.record_ID
            WHERE la.author LIKE '%$fauthor%') AS y 
   JOIN (SELECT ls.subject, ls.subject_ID, rs.record_ID 
        FROM lib_subject AS ls
        JOIN record_subject AS rs ON ls.subject_ID = rs.subject_ID
        JOIN lib_record AS lr ON rs.record_ID = lr.record_ID
            WHERE ls.subject LIKE '%$fsubject%') AS s
   JOIN lib_journal AS j on j.journal_ID = a.journal_ID
   JOIN lib_publisher pox ON a.publisher_ID = pox.publisher_ID
   JOIN lib_language lox ON a.language_ID = lox.language_ID
   WHERE y.record_ID = a.record_ID 
   AND s.record_ID = a.record_ID
   AND n.title LIKE '%$ftitle%'
   AND j.journal LIKE '%$fjournal%' 
```

我希望有人有一些见识。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:30:47.123

我相信您只想按record_ID对结果进行分组。使用您更简单的查询：

```
选择 la.author、la.author_ID、ra.record_ID
  FROM lib_author AS la
  加入 record_author AS ra ON la.author_ID = ra.author_ID
  加入 lib_record AS lr ON ra.record_ID = lr.record_ID
  WHERE la.author LIKE '%$fauthor%'
  按 ra.record_ID 分组

```

这将获取 la.* 的*最后一个*条目。如果你想要一个以逗号分隔的作者列表，你可以使用 group_concat()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:41:55.420

这是最后一个查询，在末尾添加了 GROUP BY，并将 GROUP_CONCAT 添加到作者和主题 JOINS 以显示完整的数据集。感谢@Doug Kress 的帮助！我只是一个志愿者网站管理员：

```
select a.record_ID, a.year, n.title, GROUP_CONCAT(DISTINCT y.author SEPARATOR '; ') AS author, y.author_ID, j.journal, pox.publisher, lox.language, a.volume, a.issue, a.pages, a.abstract, GROUP_CONCAT(DISTINCT s.subject SEPARATOR '; ') AS subject
   FROM lib_record AS a  
   JOIN lib_title as n on n.title_ID = a.title_ID
   JOIN (SELECT la.author, la.author_ID, ra.record_ID
       FROM lib_author AS la
       JOIN record_author AS ra ON la.author_ID = ra.author_ID
       JOIN lib_record AS lr ON ra.record_ID = lr.record_ID
            WHERE la.author LIKE '%$fauthor%') AS y 
   JOIN (SELECT ls.subject, ls.subject_ID, rs.record_ID 
        FROM lib_subject AS ls
        JOIN record_subject AS rs ON ls.subject_ID = rs.subject_ID
        JOIN lib_record AS lr ON rs.record_ID = lr.record_ID
            WHERE ls.subject LIKE '%$fsubject%') AS s
   JOIN lib_journal AS j on j.journal_ID = a.journal_ID
   JOIN lib_publisher pox ON a.publisher_ID = pox.publisher_ID
   JOIN lib_language lox ON a.language_ID = lox.language_ID
   WHERE y.record_ID = a.record_ID 
   AND s.record_ID = a.record_ID
   AND n.title LIKE '%$ftitle%'
   AND j.journal LIKE '%$fjournal%' 
   GROUP BY a.record_ID 
```

# c# - 能够从数据库中检索单选按钮值

> ID：16023491
> 
> 赞同：0
> 
> 时间：2013-04-15T19:41:34.340
> 
> 标签：c#, winforms, ms-access

我有一个名为 void showdata() 的方法，如果我这样做......

```
textBox1.Text = ds.Tables[0].Rows[rno][0].ToString();
comboBox1.Text = ds.Tables[0].Rows[rno][1].ToString(); 
```

我能够从数据库中检索值，但我无法从单选按钮中检索值，例如

```
rBMale.Text = ds.Tables[0].Rows[rno][3].ToString(); 
```

通过使用导航按钮。

当我说值时，我指的是您从应用程序中看到的绿点，而不是字符串值。我已将 rBMale 命名为单选按钮。

有谁知道这是为什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:46:00.483

不清楚，但似乎要设置 RadioButton 的[Checked](http://msdn.microsoft.com/en-us/library/system.windows.forms.radiobutton.checked.aspx)属性。

```
rBMale.Checked = Convert.ToBoolean(ds.Tables[0].Rows[rno][3]); 
```

此属性用于使用字形绘制 RadioButton 以表示 true 或 false 的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:46:36.540

`Text`单选按钮和复选框的属性是屏幕上的文本，它告诉用户按钮是什么（理论上），与它的*值*几乎没有关系。您可能正在寻找的是`Checked`属性，它是一个`bool`.

尝试以下方式：

```
rBMale.Checked = Convert.ToBoolean(ds.Tables[0].Rows[rno][3]); 
```

# wordpress - Wordpress 密码保护的帖子生成错误 403

> ID：16023492
> 
> 赞同：0
> 
> 时间：2013-04-15T19:41:39.107
> 
> 标签：wordpress, .htaccess, post, passwords, protected

我用密码保护了一篇 Wordpress 帖子。当我为帖子输入正确的密码时，我收到 403 错误，而不是访问我的帖子内容。输入错误密码时，我也会收到 403 错误。

这就是 .htaccess（在网站的根目录）的样子：（不确定这有多相关）

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

#Redirections
RedirectPermanent /qr   http://www.myaddress.com 
```

编辑 16/04/13：有人建议这可能是主机配置问题。但是到哪里去找呢？应该测试什么？在另一个经过测试的网站上（在同一主机上），我得到一个“禁止”结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:07:42.883

联系我的主人后，原来这确实是他们这边的配置问题。如果您有类似的问题，可能值得向您的主机提供商咨询。

# php - 在数据库中存储许多坐标的最有效方法是什么

> ID：16023494
> 
> 赞同：0
> 
> 时间：2013-04-15T19:41:41.070
> 
> 标签：php, mysql, database

我有一个网格，我想在上面显示一些元素。我计划将这些元素存储在数据库中。但是对于 30 x 20 的网格，总共有 600 个可能的坐标可以存储一个值。最重要的是，网格将有 2 个重叠层，这意味着每个用户可能有 1200 个坐标。

这对我来说似乎很多，因为我计划为一个拥有大量用户的项目实施它。

> 在数据库中存储大量坐标并为大量用户访问坐标的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:47:49.903

如果没有其他信息，正常的数据库结构将是包含以下列的表：

*   坐标标识
*   用户身份
*   x坐标
*   y坐标
*   价值1
*   价值2

每个用户拥有几千行通常不会有问题，特别是如果您正确索引表（例如拥有`userId`索引）。

但 。. . 真正的答案取决于如何使用它。是否会添加新值？坐标可以改变吗？性能要求有多严格？

# iup - IUP 自定义/本地化控件

> ID：16023496
> 
> 赞同：1
> 
> 时间：2013-04-15T19:41:46.420
> 
> 标签：iup

是否可以对 IUP 控件进行子类化或类似的 IUP 控件以在较低级别上修改功能，以便更改可以应用于整个项目（控件的所有实例）。

1）
例如，在我的语言环境中，我们没有小数点，但数字键盘上的小数点逗号。理想情况下，IUP spin 接受昏迷和小数点。可以做到吗？怎么做？

2）
如何在 IUP 对话框上使用键盘（向上/向下）进行并行导航，就像我们有 tab/shift+tab 一样。

3）
如何获得焦点时要选择的输入控件的值？

4)
如何识别鼠标双击 IUP 矩阵单元？

对不起，混合问题，但我现在需要这些答案。
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:46:26.120

是的，可以子类化。但它的级别很低，需要下载 IUP 源代码。该文档已经包含有关内部 SDK 的信息。简单地创建一个函数会更容易，例如 myIupLabel()，它创建一个 IupLabel 并设置一些将由应用程序使用的预定义属性。

1）据我所知，在 IUP 旋转中无法控制小数点。您必须详细说明您正在使用什么。如果它是 IupSpin 控件，如果它是具有 SPIN 属性的 IupText 控件，并且您正在使用 IupText 的 MASK 属性。是的，有可能解决这个问题，但如何取决于这些细节。

2) 这已经为切换和按钮完成了。

3) 你的意思是 IupText 控件？使用 GETFOCUS_CB 回调并在回调中设置 SELECTION 属性。

4) 双击用于编辑。EDITION_CB 在发生双击时被调用。但还有另一种方式。您可以设置 BUTTON_CB 回调，因为 IupMatrix 从 IupCanvas 继承，但您必须保存前一个回调并从您的内部调用它。

# javascript - 使用相对路径加载 Requirejs 模块

> ID：16023497
> 
> 赞同：0
> 
> 时间：2013-04-15T19:41:49.273
> 
> 标签：javascript, requirejs, amd

我需要一个基于配置加载一组其他模块的 js 模块。像这样的结构

```
define(['json!config.json', function() {
   //load module on config.path + 'modulea' ;
   //load module on config.path + 'moduleb' ;
   doSomething(modulea,moduleb) ; 

}) ; 
```

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:40:58.867

```
define(['config.json'], function(config) {
    require.config({
        paths: {
        "modulea": config.path + "modulea",
        "moduleb": config.path + "moduleb"
    }
}); 
```

然后你可以从任何你想要的地方请求你的模块，只要确保上面总是首先执行。

[http://requirejs.org/docs/api.html#config](http://requirejs.org/docs/api.html#config)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:22:22.327

怎么样：

```
define(['json!config.json', function(config) {
   require([config.path + 'modulea', config.path + 'moduleb'], function(modulea, moduleb) {
     doSomething(modulea, moduleb) ; 
   }
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T19:51:17.507

只要您信任脚本的来源，您就可以使用脚本标签加载。您可以使用如下函数：

```
loadscript = function(url,callback,err) {
    var s = document.createElement('script');
    s.src=url;
    if(typeof callback != 'undefined') { s.onload=callback; }
    if(typeof err != 'undefined') { s.onerror=err; }
    document.getElementsByTagName('head')[0].appendChild(s); //assuming you want the script tags in the document head
} 
```

# iphone - iPhone 5s 相机校准参数

> ID：16023500
> 
> 赞同：5
> 
> 时间：2013-04-15T19:41:59.103
> 
> 标签：iphone, ios, opencv, camera-calibration

我想知道是否有人愿意分享有关 iPhone 5s 相机的任何可靠的内在或外在参数？我在 OpenCV 工作，想在处理之前不扭曲我的图像。我一直在编写代码以自行校准，但此时最终结果非常痛苦。如果有人有任何干净的 C++ 代码链接，我也会很感激。我一直在尝试从较旧的教程中拼凑一些东西，但它并没有那么热。

据我了解，我想我正在寻找 fx、fy、cx、cy 等参数以及 5 个失真参数（k1、k2、k3、r1、r2）。虽然我知道每台相机都是独特而美丽的雪花，但我只需要认为，作为一个球场，对于这个特定的相机，这些值必须有一些稳定的参考。

感谢大家多年来的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:59:32.177

查看 OpenCV 目录中的示例文件夹。我一直在使用 Python 脚本，当然，还有一个[C++ 版本](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/calibration.cpp?rev=3474)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T09:28:27.537

正如 Adi Shavit 所说，外部参数只能相对于其他坐标系来确定。此外，我相信每个相机芯片的失真系数都是不同的，没有校准就没有一般的方法可以知道它们。

# google-maps - DbGeography.Distance() returning incorrect distance

> ID：16023501
> 
> 赞同：0
> 
> 时间：2013-04-15T19:41:59.277
> 
> 标签：google-maps, coordinates, gis, bing-maps, geospatial

I'm experimenting with System.Data.Spatial.DbGeography, that I want to use to determine the distance from one coordinate to another (going to be stored in SQL server).

My coordinates are in lat/long, and I got them from Bing Maps (I've tried with coordinates from Google Maps too, with the same result).

```
var osloCentralStation = DbGeography.FromText("POINT(59.9109 10.7523)", 4326);
var drammen = DbGeography.FromText("POINT(59.7378 10.2050)", 4326);
Console.WriteLine("Distance: {0}km", osloCentralStation.Distance(drammen) / 1000); 
```

Returns: Distance: 63,4340839088124km

The returned distance is approximately double what it should be.

[https://maps.google.com/maps?saddr=59.9109+10.7523&daddr=59.7378+10.2050](https://maps.google.com/maps?saddr=59.9109+10.7523&daddr=59.7378+10.2050)

Does anybody have any idea as to what's going on?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T21:18:26.343

You're not declaring the element in WKT in the right order. WKT should be in your case:

```
POINT(10.2050 59.7378) 
```

See OGC standard here:

*   [http://msdn.microsoft.com/en-us/library/bb933834.aspx](http://msdn.microsoft.com/en-us/library/bb933834.aspx)
*   [http://en.wikipedia.org/wiki/Well-known_text](http://en.wikipedia.org/wiki/Well-known_text)

And then it has to be declared like:

```
POINT(LONGITUDE LATITUDE) 
```

Also keep in mind that it won't be the driving distance but the distance by air.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:06:59.440

It turns out that lat/long are given as long/lat when creating new DbGeography objects.

I've written a little helper method so that I don't get it wrong again in the future:

```
private static DbGeography CreateDbGeography(double latitude, double longitude, int srid = 0)
{
    var text = string.Format(CultureInfo.InvariantCulture.NumberFormat, "POINT({0} {1})", longitude, latitude);

    if (srid > 0)
    {
        return DbGeography.FromText(text, srid);
    }

    return DbGeography.FromText(text);
} 
```

# php - 使用 mySQL 在 PHP 中使用命名占位符的准备好的语句出错

> ID：16023504
> 
> 赞同：0
> 
> 时间：2013-04-15T19:42:04.857
> 
> 标签：php, mysql, sql

我使用此代码在我的网页上收到这些错误

```
Notice: Undefined variable: dbh in /home/danu2_cj3/public_html/lists.php on line 14

Fatal error: Call to a member function prepare() on a non-object in /home/danu2_cj3/public_html/lists.php on line 14 
```

这是我正在使用的 php 代码，第 14 行是此代码中的第 4 行

```
<?php
/* Execute a prepared statement by binding PHP variables */
$member = $_SESSION['SESS_MEMBER_ID'];
$sth = $dbh->prepare('SELECT name
    FROM lists
    WHERE member_id = :member_id ');
$sth->bindValue(':member_id', $member, PDO::PARAM_INT);
$sth->execute();
?> 
```

我试图显示一堆行的数组，其中这些行中的一个字段应该与登录到会话的人的 member_id 匹配

这是页面的全部代码（top.php 和 bottom.php 只是布局页面）

```
<?php include ('top.php')?>
<h1>My Profile </h1>
<a href="lists.php">My Lists</a> | <a href="logout.php">Logout</a></br>
</br>
Please select list to view/delete
<?php include ("connect.php")?>
<?php
/* Execute a prepared statement by binding PHP variables */
$member = $_SESSION['SESS_MEMBER_ID'];
$sth = $dbh->prepare('SELECT name
    FROM lists
    WHERE member_id = :member_id ');
$sth->bindValue(':member_id', $member, PDO::PARAM_INT);
$sth->execute();
?>

<?php include ('bottom.php')?> 
```

这是我的 connect.php 文件

```
<?php
$username = "mydb";
$password = "mydb";
$hostname = "host"; 

//connection to the database
$dbh = mysql_connect($hostname, $username, $password) 
 or die("Unable to connect to database");

//select a database to work with
$selected = mysql_select_db("mydb",$dbh) 
  or die("Could not select database");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:49:58.503

您可能应该添加`connection`到数据库或检查它是否正确设置`connect.php`

```
try 
{
    $dbh = new PDO($dsn, $user, $password);
} 
catch (PDOException $e) 
{
    echo 'Connection failed: ' . $e->getMessage();
} 
```

[**文档在这里**](http://www.php.net/manual/en/pdo.construct.php)

# java - 为什么 VisualVM 不显示所有正常选项卡？

> ID：16023507
> 
> 赞同：36
> 
> 时间：2013-04-15T19:42:24.133
> 
> 标签：java, visualvm, jvisualvm

通常我会在 VisualVM 中看到所有这些用于本地运行 Java 程序的选项卡：

![在此处输入图像描述](https://i.stack.imgur.com/is7kK.png)

但是，我有一个本地程序，目前只向我显示概述和监视器（即使它通常显示上面显示的所有内容）：

![在此处输入图像描述](https://i.stack.imgur.com/JCFvI.png)

同样有趣的是 VisualVM 本身不显示 Profile 选项卡：

![在此处输入图像描述](https://i.stack.imgur.com/YNR8y.png)

显示的所有三个程序都使用具有相同 Java Home 的相同 JVM 运行。

什么控制为特定程序显示哪些选项卡？我如何才能将它们全部恢复为仅显示概述和监视器的程序？

我有 Visual VM 1.3.5（目前最新）和 JDK 1.7.0_17。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-09-04T16:42:18.327

我发现这是使用错误的JDK版本的问题。在我的情况下，我的应用程序在 64 位 JDK 上运行，我从 32 位 JDK 启动 VisualVM。从运行我的应用程序的同一个 JDK 启动 VisualVM 后，一切都很好。希望它会帮助你。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-15T19:47:31.640

您可能需要在您的应用程序上启用 jmx 端口。尝试将这些开关添加到您的 VM 并查看选项卡是否再次出现：

`-Dcom.sun.management.jmxremote.port=6789 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-09T13:26:22.597

我刚刚删除`~/.visualvm`并重新运行，请参阅[https://java.net/jira/browse/VISUALVM-598](https://java.net/jira/browse/VISUALVM-598)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-15T11:48:23.003

对我有用的是指定“开始分析”类。如果我把这个留空，我就没有得到分析器选项卡。当我指定它时，我做到了。我可能应该注意到这是一个在 Tomcat 下运行的 Web 应用程序，所以我指定`org.apache.catalina.startup.**`为起始类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-21T11:25:33.363

正如大多数人提到的，问题是由于 virtualvm 和您的应用程序的版本不匹配。

此外，visualvm 捆绑在 oracle 中，支持 jdk 高达 9。如果您使用 >9，请确保您使用另一个分析器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-15T13:02:46.533

就我而言，问题是使用了错误的 JDK 版本。我的应用程序在 jdk1.7.0_80 上运行，VisualVm 在 jdk1.8.0_162 上运行。将 APP JDK 版本从**1.7.0_79**替换为**1.7.0_80 即可**解决问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-11T08:50:19.880

我在 VisualVM 中缺少探查器选项卡时遇到了类似的问题。我正在使用 Oracle JDK 1.8 并希望分析在 Tomcat 8（JPA、Spring、Hibernate、Vaadin 等）上运行的 Web 应用程序。

我尝试了上述所有解决方案以及在互联网上找到的许多其他解决方案，但不幸的是，它们都没有解决缺少探查器选项卡的问题。

所以我切换到**Java Mission Control**分析工具（JMC + Flight Recorder），它是标准 Oracle JDK（来自 JDK 1.7 update 40）的一部分，它工作得很好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-16T00:31:29.220

如果您正在为本地应用程序运行 VisualVM，请检查代理是否已禁用

# ios - 如何为 Xcode 中的按钮设置选定的图像？

> ID：16023511
> 
> 赞同：0
> 
> 时间：2013-04-15T19:42:34.030
> 
> 标签：ios, xcode

我知道如何在按下按钮时以编程方式更改图像，但必须有一种方法可以在 Xcode 中以非编程方式执行此操作，但尽管搜索高和低我根本看不到 Xcode 中可以指定所选图像的任何地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T19:47:39.840

试试你的故事板。属性检查器中的第二个选择 (STATE CONFIG) 应为您的按钮显示“默认”。更改状态（突出显示、选中、禁用），然后更改图像框 8 下的图像或下方的背景图像。![在此处输入图像描述](https://i.stack.imgur.com/0xG7T.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:47:11.597

在情节提要或 XIB 中打开“属性检查器”，图像名称是您可以在 UIButton 对象中设置的属性。

![在这里设置你的属性](https://i.stack.imgur.com/PmOX9.jpg)

还要确保将“标题”设为空，否则将在您的图像上绘制一个字符串。

# javascript - 为机械化创建自定义表单

> ID：16023518
> 
> 赞同：0
> 
> 时间：2013-04-15T19:42:51.527
> 
> 标签：javascript, python, forms, mechanize

我在网站上有一个不能直接选择的表单（因为它嵌入在 javascript 中）。所以通过机械化浏览器对象选择它是不可能的。我想要做的是创建一个类似的表单并使用浏览器对象提交它。

形式是

```
<form method="POST" action="Action.php?action=338&n=66&t=mine">
<input id="Mine66" type="hidden" value="22" name="duree">
<button class="boutonsGeneral" value="submit" type="submit" name="travail">
<span class="infoBoutonsGeneral" title="">
Work
<span id="dureeMine66" class="boutonsGeneral_duree boutonsGeneral_dureePlus">22 hours</span>
</button>
</form> 
```

我使用了萤火虫，这里是信息。发布到的 URL 是[http://www.renaissancekingdoms.com/Action.php?action=338&n=66&t=mine](http://www.renaissancekingdoms.com/Action.php?action=338&n=66&t=mine)

```
Parameters 
```

> 时间 22
> 
> 劳累提交

```
Request Headers From Upload Stream 
```

> 内容长度：23
> 
> 内容类型：application/x-www-form-urlencoded

到目前为止，我所做的是我设法登录该站点并执行了以下操作

```
form = mechanize.HTMLForm('http://www.renaissancekingdoms.com/Action.php?action=338&n=66&t=mine', method='POST')

form.new_control('duree', 'hidden', {
    'id' : 'Mine66',
    'value' : '22'})
form.fixup()
br.form = form
br.submit() 
```

但这似乎不起作用。有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:19:23.147

您是否尝试过直接转到将帖子数据作为参数传递的链接？像这样 ：

```
r = opener.open('http://example.com/', data) 
```

其中 data 是作为字典的发布数据

# asp.net - 在 ASP.NET 应用程序中重新路由 http 流量

> ID：16023519
> 
> 赞同：0
> 
> 时间：2013-04-15T19:43:01.583
> 
> 标签：asp.net, .net, http, reroute

我想将 HTTP 请求中的流量从一台服务器重新路由到 ASP.NET 网站中的另一台服务器。我一直在考虑尝试使用 http 模块或 http 处理程序来执行此操作。这些对我的案例来说是可行的选择还是有人有更好的建议？此应用程序使用 .NET 4.0 框架并托管在 IIS6 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:10:21.203

除了上面的评论，我还想提供一小段代码。您应该能够在 HTTPModule 中使用 Response.Redirect 执行此操作。我不是 100% 确定，但我相信 RewritePath 方法可能会在 IIS6 上引发平台不支持的异常。幸运的是，IIS6 绝对支持 Response.Redirect。

继续处理开始请求：

```
{
      context.BeginRequest += new EventHandler(MyBeginRequestMethod);
} 
```

然后在您的开始请求方法中：

```
HttpApplication application = (HttpApplication)sender;
HttpContext context = application.Context;

if(context.Request.FilePath.Contains("someresource"))
{
     context.Response.Redirect("http://www.google.com");
} 
```

显然，您将能够通过这种方式对内容进行更全面的查找和更完整的重定向。

# xml - 在PostgreSQL中提取xml标签的值

> ID：16023523
> 
> 赞同：12
> 
> 时间：2013-04-15T19:43:20.313
> 
> 标签：xml, postgresql, xpath, casting, xml-parsing

下面是我的 Postgres 表中的列响应。我想从我的 Postgres 数据库中的所有行中提取状态。状态也可能有不同的大小`SUCCESS`，所以我不想使用 substring 函数。有没有办法做到这一点？

```
<?xml version="1.0" ?><response><status>ERROR_MISSING_DATA</status><responseType>COUNTRY_MISSING</responseType><country_info>USA</country_info><phone_country_code>1234</phone_country_code></response> 
```

所以我的表结构是这样的

```
 Column    |            Type             |                        Modifiers                         

-------------+-----------------------------+----------------------------------------------------------

 id          | bigint                      | not null default nextval('events_id_seq'::regclass)
 hostname    | text                        | not null
 time        | timestamp without time zone | not null
 trn_type    | text                        | 
 db_ret_code | text                        | 
 request     | text                        | 
 response    | text                        | 
 wait_time   | text                        | 
```

我想从每个请求中提取状态。我该怎么做呢？

下面是一个示例行。并假设表名 abc_events

```
id          | 1870667
hostname    | abcd.local
time        | 2013-04-16 00:00:23.861
trn_type    | A
request     | <?xml version="1.0" ?><response><status>ERROR_MISSING_DATA</status><responseType>COUNTRY_MISSING</responseType><country_info>USA</country_info><phone_country_code>1234</phone_country_code></response>
response    | <?xml version="1.0" ?><response><status>ERROR_MISSING_DATA</status><responseType>COUNTRY_MISSING</responseType><country_info>USA</country_info><phone_country_code>1234</phone_country_code></response> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-15T20:21:53.433

使用[**`xpath()`**](http://www.postgresql.org/docs/current/interactive/functions-xml.html#FUNCTIONS-XML-PROCESSING)功能：

```
WITH x(col) AS (SELECT '<?xml version="1.0" ?><response><status>ERROR_MISSING_DATA</status></response>'::xml)
SELECT xpath('./status/text()', col) AS status
FROM   x 
```

`/text()`剥离周围的`<status>`标签。在这种情况下，返回一个包含单个元素
的 - 数组：`xml`

```
status
xml[]
-------
{ERROR_MISSING_DATA} 
```

### 应用于您的餐桌

针对您的问题更新，这可以简单地是：

```
SELECT id, xpath('./status/text()', response::xml) AS status
FROM   tbl; 
```

如果您确定每行只有一个状态标记，您可以简单地从数组中提取第一项：

```
SELECT id, (xpath('./status/text()', response::xml))[1] AS status
FROM   tbl; 
```

如果可以有多个状态项：

```
SELECT id, unnest(xpath('./status/text()', response::xml)) AS status
FROM   tbl; 
```

每 1-n 行`id`。

### 投射到`xml`

由于您将列定义为类型`text`（而不是[**`xml`**](http://www.postgresql.org/docs/current/interactive/datatype-xml.html)，因此您**需要**显式转换`xml`。该函数`xpath()`需要类型的第二个参数`xml`。无类型的字符串常量被强制转换为`xml`自动，但**`text`列**不是。您需要显式转换。

这无需显式强制转换即可工作：

```
 SELECT xpath('./status/text()'
      ,'<?xml version="1.0" ?><response><status>SUCCESS</status></response>') 
```

像我的第一个示例中的**CTE***需要*为“公用表表达式”中的每一列提供一个类型。如果我没有强制转换为特定类型，`unknown`则会使用该类型 - 这*与**untyped string*不同。`unknown`显然，和之间没有实现直接转换`xml`。您必须先转换为`text`：`unknown_type_col::text::xml`. `::xml`最好马上施放。

PostgreSQL 9.1（我认为）已经加强了这一点。旧版本更宽松。

无论哪种方式，使用这些方法中的任何一种，字符串都必须是*有效的 xml*，否则强制转换（隐式或显式）将引发异常。

# css - 半透明背景上带有斜边的按钮

> ID：16023525
> 
> 赞同：0
> 
> 时间：2013-04-15T19:43:29.857
> 
> 标签：css, opacity

我正在尝试使用 CSS 创建一个按钮，该按钮将位于具有斜面或切割边缘的半透明背景上。这是 Photoshop 模型：

[![](https://i.imgur.com/Q12xTfL.png)](https://imgur.com/Q12xTfL)

我可以使用纯色背景成功地做到这一点，因为我可以使用具有相同背景的伪元素并“覆盖”按钮的边缘，但它不适用于半透明背景。

这是我到目前为止所得到的，在坚实的背景下：[http ://codepen.io/anon/pen/GJFpc](http://codepen.io/anon/pen/GJFpc)

我开始相信仅使用 CSS 是不可能的，但仍然希望 SO 可以再次拯救我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:11:26.573

我喜欢一个很好的 css 挑战，所以我尝试了一些东西，这就是我能想到的：http: [//jsfiddle.net/QE67v/3/](http://jsfiddle.net/QE67v/3/)

css（无前缀）如下所示：

```
a.cta {
    position: relative;
    float: left;
    padding: 8px 10px;
    text-align: center;
    text-decoration: none;
    text-transform: uppercase;
    font-size: 15px;
    font-weight: normal;
    background-image: linear-gradient(top, #ffffff 0%, #e4e4e4 100%);
    box-shadow: inset 0 -2px 1px 2px #fff;
    line-height: 16px;
    height: 16px;
    z-index: 2;
}
a.cta:after {
    content: '';
    display: block;
    position: absolute;
    width: 32px;
    height: 32px;
    right: -16px;
    top: 0;
    background-image: linear-gradient(top, #ffffff 0%, #e4e4e4 100%);
    box-shadow: inset -3px -2px 1px 2px #fff;
    transform: skewX(-45deg);
    z-index: -1;
} 
```

您的代码有两个主要区别：

1.  我使用插入框阴影来实现白色“斜角”。你也可以用渐变来做到这一点，但我发现阴影更直观。
2.  我没有让按钮变宽并用背景颜色的伪元素覆盖左下角，而是将按钮保持在正常宽度，并添加了一个伪元素，应用了 skewX 变换。这允许任何背景，正如您在我的小提琴中设置为背景的渐变所看到的那样。

我相信这就是你所追求的。随时询问您是否需要任何进一步的帮助/解释。

# c++ - 如何确保不会错过来自 QTcpSocket 的 readyRead() 信号？

> ID：16023533
> 
> 赞同：28
> 
> 时间：2013-04-15T19:43:52.513
> 
> 标签：c++, qt, qtcpsocket

`QTcpSocket`用于接收数据时，使用的信号是`readyRead()`，表示有新数据可用。但是，当您在相应的插槽实现中读取数据时，不会`readyRead()`发出额外的数据。这可能是有道理的，因为您已经在函数中，您正在读取所有可用数据。

## 问题描述

但是，假设此插槽的以下实现：

```
void readSocketData()
{
    datacounter += socket->readAll().length();
    qDebug() << datacounter;
} 
```

如果一些数据在调用之后`readAll()`但在离开插槽之前到达怎么办？如果这是其他应用程序发送的最后一个数据包（或者至少是一段时间内的最后一个）怎么办？不会发出额外的信号，因此您必须确保自己读取所有数据。

## 最小化问题的一种方法（但不能完全避免）

当然我们可以这样修改slot：

```
void readSocketData()
{
    while(socket->bytesAvailable())
        datacounter += socket->readAll().length();
    qDebug() << datacounter;
} 
```

但是，我们还没有解决问题。数据仍然有可能在`socket->bytesAvailable()`-check 之后到达（甚至将/另一个检查放在函数的绝对末尾也不能解决这个问题）。

## 确保能够重现问题

由于这个问题当然很少发生，所以我坚持第一个实现插槽，我什至会添加一个人为的超时，以确保问题发生：

```
void readSocketData()
{
    datacounter += socket->readAll().length();
    qDebug() << datacounter;

    // wait, to make sure that some data arrived
    QEventLoop loop;
    QTimer::singleShot(1000, &loop, SLOT(quit()));
    loop.exec();
} 
```

然后我让另一个应用程序发送 100,000 字节的数据。这就是发生的事情：

> 新连接！
> 32768（或 16K 或 48K）

消息的第一部分被读取，但结尾不再被读取，因为`readyRead()`不会再被调用。

我的问题是：确定这个问题永远不会发生的最好方法是什么？

## 可能的解决方案

我想出的一个解决方案是在最后再次调用同一个插槽，并在插槽的开头检查是否还有更多数据要读取：

```
void readSocketData(bool selfCall) // default parameter selfCall=false in .h
{
    if (selfCall && !socket->bytesAvailable())
        return;

    datacounter += socket->readAll().length();
    qDebug() << datacounter;

    QEventLoop loop;
    QTimer::singleShot(1000, &loop, SLOT(quit()));
    loop.exec();

    QTimer::singleShot(0, this, SLOT(readSocketDataSelfCall()));
}

void readSocketDataSelfCall()
{
    readSocketData(true);
} 
```

由于我不直接调用插槽，而是使用`QTimer::singleShot()`，因此我假设`QTcpSocket`无法知道我正在再次调用插槽，因此`readyRead()`不会再发生未发出的问题。

我包含该参数的原因是不允许`bool selfCall`被调用的插槽更快退出，否则可能会再次出现相同的问题，即数据恰好在错误的时刻到达并且没有发出。`QTcpSocket``readyRead()`

这真的是解决我的问题的最佳解决方案吗？这个问题的存在是 Qt 中的设计错误还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-03-23T14:08:53.630

# 简短的回答

国家的[文件](https://doc.qt.io/qt-5/qiodevice.html#readyRead)`QIODevice::readyRead()`：

> `readyRead()`不是递归发出的；如果您重新进入事件循环或`waitForReadyRead()`在连接到`readyRead()`信号的插槽内调用，则不会重新发送信号。

因此，请确保您

*   **不要**`QEventLoop`在你的插槽内实例化 a ，
*   **不要**`QApplication::processEvents()`在你的插槽内调用，
*   **不要**`QIODevice::waitForReadyRead()`在你的插槽内调用，
*   **不要**`QTcpSocket`在不同的线程中使用相同的实例。

现在您应该始终收到对方发送的**所有数据。**

* * *

# 背景

`readyRead()`信号由以下方式发出[`QAbstractSocketPrivate::emitReadyRead()`](https://code.qt.io/cgit/qt/qtbase.git/tree/src/network/socket/qabstractsocket.cpp?h=5.12#n1300)：

```
// Only emit readyRead() when not recursing.
if (!emittedReadyRead && channel == currentReadChannel) {
    QScopedValueRollback<bool> r(emittedReadyRead);
    emittedReadyRead = true;
    emit q->readyRead();
} 
```

一旦块超出范围（由 完成） ，`emittedReadyRead`变量就会回滚。所以错过信号的唯一机会是当控制流在最后一个信号的处理完成**之前**再次达到条件时（换句话说，当有递归时）。`false``if``QScopedValueRollback``readyRead()``if`**`readyRead()`**

 **并且递归应该只在上面列出的情况下才有可能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T09:50:22.687

我认为本主题中提到的场景有两个不同的主要情况，但总的来说 QT 根本没有这个问题，我将在下面尝试解释原因。

第一种情况：单线程应用程序。

Qt 使用 select() 系统调用来轮询打开的文件描述符以了解发生的任何更改或可用的操作。在每个循环上简单地说 Qt 检查是否有任何打开的文件描述符具有可读取/关闭的数据等。所以在单线程应用程序流看起来像这样（代码部分简化）

```
int mainLoop(...) {
     select(...);
     foreach( descriptor which has new data available ) {
         find appropriate handler
         emit readyRead; 
     }
}

void slotReadyRead() {
     some code;
} 
```

那么，如果新数据到达而程序仍在 slotReadyRead 中会发生什么......老实说没什么特别的。操作系统将缓冲数据，一旦控制权返回到 select() 的下一次执行，操作系统就会通知软件有可用于特定文件句柄的数据。它对 TCP 套接字/文件等的工作方式完全相同。

我可以想象以下情况（如果 slotReadyRead 延迟非常长并且有大量数据传入），您可能会在 OS FIFO 缓冲区（例如串行端口）中遇到溢出，但这更多地与糟糕的软件设计有关，而不是QT 或操作系统问题。

您应该在中断处理程序上查看像 readyRead 这样的插槽，并将它们的逻辑仅保留在填充您的内部缓冲区的获取功能中，而处理应该在单独的线程中或应用程序处于空闲状态等时完成。原因是任何这样的应用程序通常是一个大规模服务系统，如果它在服务一个请求上花费更多时间，那么两个请求之间的时间间隔无论如何它的队列都会溢出。

第二种场景：多线程应用

实际上，这种情况与 1) 并没有太大区别，期望您应该正确设计每个线程中发生的事情。如果您使用轻量级的“伪中断处理程序”来保持主循环，那么您将完全可以并在其他线程中保持处理逻辑，但是此逻辑应该与您自己的预取缓冲区一起使用，而不是与 QIODevice 一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T02:28:56.670

这个问题很有趣。

在我的程序中，QTcpSocket 的使用非常密集。所以我编写了整个库，它将传出的数据分解成带有标题、数据标识符、包索引号和最大大小的包，当下一条数据到来时，我确切地知道它属于哪里。即使我错过了什么，当下一个`readyRead`到来时，接收器会读取所有内容并正确组合接收到的数据。如果您的程序之间的通信不是那么激烈，您可以这样做，但使用计时器（这不是很快，但可以解决问题。）

关于您的解决方案。我不认为这样更好：

```
void readSocketData()
{
    while(socket->bytesAvailable())
    {
        datacounter += socket->readAll().length();
        qDebug() << datacounter;

        QEventLoop loop;
        QTimer::singleShot(1000, &loop, SLOT(quit()));
        loop.exec();
    }
} 
```

这两种方法的问题是代码在离开插槽之后，但在从发出信号返回之前。

您也可以与`Qt::QueuedConnection`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T22:03:08.360

以下是获取整个文件的一些示例，但使用了 QNetwork API 的其他部分：

[http://qt-project.org/doc/qt-4.8/network-downloadmanager.html](http://qt-project.org/doc/qt-4.8/network-downloadmanager.html)

[http://qt-project.org/doc/qt-4.8/network-download.html](http://qt-project.org/doc/qt-4.8/network-download.html)

这些示例展示了一种处理 TCP 数据的更强大的方法，以及当缓冲区已满时，以及使用更高级别的 api 更好地处理错误。

如果您仍想使用较低级别的 api，这里有一个处理缓冲区的好方法的帖子：

在你里面`readSocketData()`做这样的事情：

```
if (bytesAvailable() < 256)
    return;
QByteArray data = read(256); 
```

[http://www.qtcentre.org/threads/11494-QTcpSocket-readyRead-and-buffer-size](http://www.qtcentre.org/threads/11494-QTcpSocket-readyRead-and-buffer-size)

编辑：如何与 QTCPSockets 交互的其他示例：

[http://qt-project.org/doc/qt-4.8/network-fortuneserver.html](http://qt-project.org/doc/qt-4.8/network-fortuneserver.html)

[http://qt-project.org/doc/qt-4.8/network-fortuneclient.html](http://qt-project.org/doc/qt-4.8/network-fortuneclient.html)

[http://qt-project.org/doc/qt-4.8/network-blockingfortuneclient.html](http://qt-project.org/doc/qt-4.8/network-blockingfortuneclient.html)

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-07T11:19:04.650

如果在`QProgressDialog`从套接字接收数据时显示 a ，则它仅`QApplication::processEvents()`在发送任何数据时才有效（例如通过`QProgessDialog::setValue(int)`方法）。这当然会导致`readyRead`如上所述的信号丢失。

所以我的解决方法是一个包含 processEvents 命令的 while 循环，例如：

```
void slot_readSocketData() {
    while (m_pSocket->bytesAvailable()) {
        m_sReceived.append(m_pSocket->readAll());
        m_pProgessDialog->setValue(++m_iCnt);
    }//while
}//slot_readSocketData 
```

如果插槽被调用一次，`readyRead`则可以忽略任何其他信号，因为调用`bytesAvailable()`后总是返回实际数字`processEvents`。只有在流暂停时，while 循环才会结束。但是接下来`readReady`不会错过并再次开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-07T19:32:17.160

readyRead 插槽我马上遇到了同样的问题。我不同意接受的答案；它不能解决问题。使用 Amartel 描述的 bytesAvailable 是我找到的唯一可靠的解决方案。Qt::QueuedConnection 没有效果。在下面的示例中，我正在反序列化一个自定义类型，因此很容易预测最小字节大小。它永远不会丢失数据。

```
void MyFunExample::readyRead()
{
    bool done = false;

    while (!done)
    {

        in_.startTransaction();

        DataLinkListStruct st;

        in_ >> st;

        if (!in_.commitTransaction())
            qDebug() << "Failed to commit transaction.";

        switch (st.type)
        {
        case  DataLinkXmitType::Matrix:

            for ( int i=0;i<st.numLists;++i)
            {
                for ( auto it=st.data[i].begin();it!=st.data[i].end();++it )
                {
                    qDebug() << (*it).toString();
                }
            }
            break;

        case DataLinkXmitType::SingleValue:

            qDebug() << st.value.toString();
            break;

        case DataLinkXmitType::Map:

            for (auto it=st.mapData.begin();it!=st.mapData.end();++it)
            {
                qDebug() << it.key() << " == " << it.value().toString();
            }
            break;
        }

        if ( client_->QIODevice::bytesAvailable() < sizeof(DataLinkListStruct) )
            done = true;
    }
} 
```**

# jquery - 如何在 JQuery 中延迟显示/隐藏 div

> ID：16023535
> 
> 赞同：1
> 
> 时间：2013-04-15T19:43:57.613
> 
> 标签：jquery, html, delay, show-hide

我有一些代码尝试在延迟后一个接一个地显示和隐藏 div。

```
$('#box1').delay(1800).hide('slow');
delay(1800).$('#box2').delay(1800).show('slow');
delay(1800).$('#box2').delay(1800).hide('slow');
delay(1800).$('#box3').delay(1800).show('slow');
delay(1800).$('#box3').delay(1800).hide('slow');
delay(1800).$('#box4').delay(1800).show('slow');
delay(1800).$('#box4').delay(1800).hide('slow');
delay(1800).$('#box1').delay(1800).show('slow'); 
```

div 没有显示和隐藏。如何让 div 在延迟后显示和隐藏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:55:13.820

也许更多类似的东西会更好：

```
// Go over each .box in the collection
$(".box").each(function ( i ) {
    $(this)
        // Show after index * 1800 (0 * 1800, 1 * 1800, 2 * 1800, etc)
        .delay( i * 1800 ).show("slow")
        // Hide after same calculation
        .delay( i * 1800 ).hide("slow");
}); 
```

只需给每个盒子`.box`上课。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:56:18.057

用户**Kevin B**在评论中提出了以下建议。这照顾了我最初的答案所迎合的厄运的冗长性质/金字塔。

```
$('#box1').delay(1800).hide('slow').promise().then(function(){
    return $('#box2').delay(1800).show('slow').promise();
}).then(function(){
    return $('#box2').delay(1800).hide('slow').promise();
}).then(function(){
    return $('#box3').delay(1800).show('slow').promise();
}).then(function(){
    return $('#box3').delay(1800).hide('slow').promise();
}).then(function(){
    return $('#box4').delay(1800).show('slow').promise();
}).then(function(){
    return $('#box4').delay(1800).hide('slow').promise();
}).then(function(){
    return $('#box1').delay(1800).show('slow').promise();
}); 
```

# c++ - 如何在没有模拟框架的情况下对具有讨厌的依赖项的类进行单元测试？

> ID：16023539
> 
> 赞同：8
> 
> 时间：2013-04-15T19:44:11.247
> 
> 标签：c++, unit-testing, mocking, dependencies, legacy-code

我在一个遗留的 C++ 代码库中工作，我想在一个类上测试一些方法，该类`DependsOnUgly`具有一个在文件系统上有很多外部依赖项的大类 ( `Ugly`) 上不容易破坏的依赖项，等等。我想得到至少有一些方法`DependsOnUgly`在测试中，同时尽可能少地修改现有代码。如果不进行大量代码修改，就无法通过工厂方法、方法参数或构造函数参数创建接缝；`Ugly`是一个直接依赖的具体类，没有任何抽象基类，并且有很多方法，很少或没有标记`virtual`，完全模拟它会非常乏味。我没有可用的模拟框架，但我想得到`DependsOnUgly`正在测试中，因此我可以进行更改。如何打破对`Ugly`方法进行单元测试的外部依赖关系`DependsOnUgly`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T19:44:11.247

使用我称之为**预处理器模拟**的东西——通过预处理器接缝注入的模拟。

[我首先在 Programmers.SE 上的这个问题](https://softwareengineering.stackexchange.com/q/188114/47624)中发布了这个概念，通过答案我判断这不是一个众所周知的模式，所以我认为我应该分享它。我很难相信以前没有人做过这样的事情，但是因为我找不到它的文档，所以我想我会与社区分享。

为了举例，`Ugly`这里是概念上的实现。`NotAsUgly`

### DependsOnUgly.hpp

```
#ifndef _DEPENDS_ON_UGLY_HPP_
#define _DEPENDS_ON_UGLY_HPP_
#include <string>
#include "Ugly.hpp"
class DependsOnUgly {
public:
    std::string getDescription() {
        return "Depends on " + Ugly().getName();
    }
};
#endif 
```

### 丑陋的.hpp

```
#ifndef _UGLY_HPP_
#define _UGLY_HPP_
struct Ugly {
    double a, b, ..., z;
    void extraneousFunction { ... }
    std::string getName() { return "Ugly"; }
};
#endif 
```

有两种基本的变体。第一个是只有某些方法`Ugly`被 调用`DependsOnUgly`，并且您已经想模拟这些方法。第二个是

## 技术1：替换所有`Ugly`使用的行为`DependsOnUgly`

我将这种技术称为**预处理器部分模拟**，因为模拟只实现了被模拟类的接口的必要部分。在模拟类的头文件中使用与生产类同名的包含保护，以导致生产类永远不会被定义，而是模拟。一定要包括前面的模拟`DependsOnUgly.hpp`。

（请注意，我的测试文件示例不是自我验证的；这只是为了简单起见，并且与单元测试框架无关。重点是文件顶部的指令，而不是实际的测试方法本身.)

### 测试.cpp

```
#include <iostream>
#include "NotAsUgly.hpp"
#include "DependsOnUgly.hpp"
int main() {
    std::cout << DependsOnUgly().getDescription() << std::endl;
} 
```

### NotAsUgly.hpp

```
#ifndef _UGLY_HPP_ // Same name as in Ugly.hpp---deliberately!
#define _UGLY_HPP_
struct Ugly { // Once again, duplicate name is deliberate
    std::string getName() { return "not as ugly"; } // All that DependsOnUgly depends on
};
#endif 
```

## 技术2：替换一些`Ugly`使用的行为`DependsOnUgly`

我称其为**Subclassed-in-Place Mock**，因为在这种情况下，`Ugly`它是子类化的，并且必要的方法被覆盖，而其他方法仍然可以使用——但子类的名称仍然是`Ugly`. 定义指令用于重命名`Ugly`为`BaseUgly`; 然后使用 undefine 指令和模拟`Ugly`子类`BaseUgly`。请注意，这可能需要`Ugly`根据具体情况将某些内容标记为虚拟。

### 测试.cpp

```
#include <iostream>
#define Ugly BaseUgly
#include "Ugly.hpp"
#undef Ugly
#include "NotAsUgly.hpp"
#include "DependsOnUgly.hpp"
int main() {
    std::cout << DependsOnUgly().getDescription() << std::endl;
} 
```

### NotAsUgly.hpp

```
#ifndef _UGLY_HPP_ // Same name as in Ugly.hpp---deliberately!
#define _UGLY_HPP_
struct Ugly: public BaseUgly { // Once again, duplicate name is deliberate
    std::string getName() { return "not as ugly"; }
};
#endif 
```

* * *

请注意，这两种方法都有点不稳定，应谨慎使用。随着更多的代码库正在测试中，它们应该被移走，并尽可能用更标准的方法来打破依赖关系。请注意，如果遗留代码库的包含指令足够混乱，它们都可能会变得无效。但是，*我已经成功地将它们用于实际的遗留系统*，所以我知道它们可以工作。

# javascript - CKEditor ul ol 外壳

> ID：16023541
> 
> 赞同：1
> 
> 时间：2013-04-15T19:44:19.783
> 
> 标签：javascript, ckeditor

全部！CKEditor 有问题！我需要用 div 将 ul、ol 列表括起来。所以当我按下面板上的列表按钮时，我会得到这样的结果：

```
 <div class=”dash-list”&gt;
     <ul>
          <li></li>
     </ul>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:11:49.460

无需重写`list`插件的最简单方法是在编辑器输出中包装列表：

```
var wrappable = [];

var editor = CKEDITOR.replace( 'editor1', {
    on: {
        instanceReady: function() {
            this.on( 'toDataFormat', function( evt ) {
                var el, wrap;

                while ( ( el = wrappable.pop() ) ) {
                    wrap = el.parent;

                    // Abort if already wrapped...
                    if ( wrap && wrap.type == CKEDITOR.NODE_ELEMENT && wrap.attributes[ 'class' ] == 'dash-list' )
                        return wrap;

                    // Wrap el...    
                    wrap = new CKEDITOR.htmlParser.element( 'div', { 'class': 'dash-list' } );
                    el.replaceWith( wrap );
                    wrap.add( el );
                }
            }, null, null, 11 );

            this.dataProcessor.htmlFilter.addRules( {
                elements: {
                    ul: function( element ) {
                        wrappable.push( element );
                    },
                    ol: function( element ) {
                        wrappable.push( element );
                    }
                }
            } );
        }
    }
} ); 
```

# performance - Solr 组合 (AND) 查询性能

> ID：16023542
> 
> 赞同：0
> 
> 时间：2013-04-15T19:44:22.683
> 
> 标签：performance, solr

需要在solr中执行如下查询：

```
field_a:"A" AND field_b:/.*sear.* ph.ase.*/ 
```

*   单次`field_a:"A"`查询超快；
*   单个`field_b:/.*sear.* ph.ase.*/`查询速度慢；
*   结合`AND`查询也很慢；

将这些查询部分中的任何一个设置为过滤器都不起作用，性能仍然很差！

有没有办法指示 solr 对第一个查询的结果执行第二个查询的搜索（以提高性能）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:47:20.733

您能否将第一个查询设为[过滤查询](http://wiki.apache.org/solr/CommonQueryParameters#fq)而不是常规查询。根据我的经验，这往往会加快结果。

# asp.net - 页面上有几个 Facebook Like 按钮

> ID：16023543
> 
> 赞同：0
> 
> 时间：2013-04-15T19:44:24.907
> 
> 标签：asp.net, facebook

我希望在页面上放置许多类似 Facebook 的按钮，我希望它们允许我发布到通过它们登录的用户的 Facebook 墙上。有人可以告诉我在哪里可以找到 .NET 的这个工作流。我希望用户单击“赞”按钮登录，然后使用访问令牌发布来墙内容。稍后，如果他单击其他喜欢的按钮，它只会发布到墙上：图像测试，...这可能吗？我怎么能找到代码示例？提前致谢

# windows - 批处理：回显一些文本并读取该行的其余部分

> ID：16023544
> 
> 赞同：0
> 
> 时间：2013-04-15T19:44:29.883
> 
> 标签：windows, batch-file, command-prompt

我有

```
echo sometext
set /p s= 
```

但它会输出以下内容：

```
sometext
*will read this line* 
```

我希望它像这样在同一行：

```
sometext *will read the rest of the line* 
```

但如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:55:40.457

这个：

```
SET /P s="sometext " 
```

将打印`sometext`并在文本之后放置提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:26:36.240

您应该初始化输入变量并将双引号放在正确的位置：

```
SET "s="
SET /P "s=sometext> " 
```

# php - Codeigniter 活动记录更新 - 错误

> ID：16023546
> 
> 赞同：0
> 
> 时间：2013-04-15T19:44:45.233
> 
> 标签：php, mysql, codeigniter

我正在尝试做一个简单的更新，将一个数组从控制器传递给模型。但我收到以下错误：

```
Error Number: 1064 You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right syntax 
to use near 'id #29 
```

这是正在传递的数组：

```
<?
 $data = Array
  (
   [name] => last_name
   [value] => Smith
   [pk] => 611
  ); 
```

**控制器**

```
 <?
 function edit_client() {
    $data = $this->input->post();
    $this->load->model('clients_model');
    $this->clients_model->update_client_info($data);
 } 
```

**模型**

```
 <?
 function update_client_info($data) {
    $update = $this->db->set($data['name'], $data['value']);
    $this->db->where('id', $data['pk']);
    $this->db->update('clients', $update); 
} 
```

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:55:22.703

问题出在你的`$this->db->set()`功能上。

请执行下列操作

```
$this->db->set('name',$data['name']);
$this->db->set('value',$data['value']);
$this->db->where('id', $data['pk']);
$this->db->update('clients'); 
```

这应该够了吧。当您使用 时`$this->db->set()`，您不需要将表名以外的任何内容传递给插入或更新函数。

# angularjs - 如何添加 Angular $http 事件监听器

> ID：16023548
> 
> 赞同：6
> 
> 时间：2013-04-15T19:44:50.883
> 
> 标签：angularjs

我目前正在使用角度指令上传文件...

```
var fd = new FormData();
fd.append("uploadedFile", scope.uploadedFile);

var xhr = new XMLHttpRequest();
xhr.upload.addEventListener("progress", uploadProgress, false);
xhr.addEventListenter("load", uploadComplete, false);
xhr.addEventListenter("error", uploadFailed, false);
xhr.addEventListenter("abort", uploadCanceled, false);
xhr.open("POST", scope.postUrl);
scope.uploadInProgress = true;
xhr.send(fd);

function uploadProgress(e){
  scope.$apply(function(){
    if(e.lengthComputable){
      scope.progress = Math.round(e.loaded * 100 / e.total);
    } else {
      scope.progress = 'unable to compute';
    }
  });
 }

 ... 
```

可以使用 $http 提供程序重构此代码段吗？我不知道如何保留我的事件监听器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:35:13.173

**简短的回答**：很快你就可以了，但还不能完全按照你的要求。

正在讨论一些选项来构建功能 - 公开基础`xhr`对象，或允许为方法设置回调。

具体参见[https://github.com/angular/angular.js/issues/1934](https://github.com/angular/angular.js/issues/1934) - 进度事件暂时不起作用。

同时，我建议手动创建一个对象并使用`$apply`它来更新您的范围，就像您所做的那样。

有关如何使用服务设置至少可以捕获的开始和停止事件的更多详细信息，请参阅此问题 - 但进展不顺利。

[AngularJS：每次启动ajax调用时都需要触发事件](https://stackoverflow.com/questions/13746052/angularjs-need-to-fire-event-every-time-an-ajax-call-is-started)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T22:42:58.840

现在，您可以使用简单/轻量级[的 angular-file-upload](https://github.com/danialfarid/angular-file-upload)指令，并支持文件删除和上传进度。它使用 shim 在 angular 之前加载，以便能够以 angular 访问 XHR 私有对象并将上传事件侦听器附加到它。

```
<div ng-controller="MyCtrl">
  <input type="file" ng-file-select="onFileSelect($files)" multiple>
</div> 
```

JS：

```
//inject angular file upload directive.
angular.module('myApp', ['angularFileUpload']);

var MyCtrl = [ '$scope', '$upload', function($scope, $upload) {
  $scope.onFileSelect = function($files) {
    for (var i = 0; i < $files.length; i++) {
      var $file = $files[i];
      $upload.upload({
        url: 'my/upload/url',
        file: $file,
        progress: function(evt){
           $scope.progress = parseInt(100.0 * evt.loaded / evt.total);
        }
      }).then(function(data, status, headers, config) {
        // file is uploaded successfully
        console.log(data);
      }); 
    }
  }
}]; 
```

# c# - 从只保留笑脸的字符串中删除多余的文本和标点符号？

> ID：16023551
> 
> 赞同：0
> 
> 时间：2013-04-15T19:45:06.897
> 
> 标签：c#, regex, emoticons

我在使用正则表达式时遇到了一些问题。你能帮帮我吗？我要解决的问题中的以下内容-

> **输入**: :,... :D..:::))你今天好吗 :P?..:(*
> 
> **输出** *:D :) :P :(*

基本上我想从输入字符串中删除标点符号和文本，如-(.,:; 等)，并将它们替换为空字符串。但我想保留表情符号 -:) ,:( 或 :P 。我已经编写了以下代码，但它不起作用。

> > 正则表达式 = "[A-Za-z]|:[D(P(]"

但它也删除了“：D和：P”笑脸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:45:19.273

以下正则表达式字符串应该适合您：

```
(((?<!:)[^:])|(:(?![PD\(\)])))[^:]* 
```

它由两部分组成：

1.  ( `((?<!:)[^:])` | `(:(?![PD\(\)]))`)
2.  `[^:]*`

第一部分是`|`使用[Negative Lookahead 和 Lookbehind](http://www.regular-expressions.info/lookaround.html)的 OR() 语句。它通过查找以下任一方法来查找不包含笑脸的文本块中的第一个字符：

一个明显不在笑脸中的角色：

1.  任何前面没有冒号的字符：`(?<!:)`
2.  并且不是冒号本身：`[^:]`

或后面没有笑脸字符的冒号：

1.  一个冒号`:`
2.  后面不是笑脸后半部分的字符：`(?![PD\(\)]))`

第二部分 ( `[^:]*`) 继续查找，直到我们找到一个可能的笑脸（冒号）的开头。

此正则表达式当前仅找到以下笑脸：

*   :D
*   :P
*   :(
*   :)

您可以更新 OR 语句的后半部分以查找其他表情符号。

总而言之，这个正则表达式应该找到不属于笑脸的所有内容。您可以简单地在变量中声明它，[`Regex`](http://msdn.microsoft.com/en-us/library/43122zyz.aspx)然后调用[`.Replace(string input, string replacement)`](http://msdn.microsoft.com/en-us/library/taz3ak2f.aspx)，传入您的输入字符串和您想用 (`String.Empty`在这种情况下) 替换非笑脸字符的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:54:57.540

不是那么完美的解决方案：

```
string text = ":,... :D..:::))How are you today :P?..:(*";
text = text.Replace(":)", "@@@)");
text = text.Replace(":D", "@@@D");
text = text.Replace(":P", "@@@P");

// clean up your punctuation marks here
//

text = text.Replace("@@@)", ":)");
text = text.Replace("@@@D", ":D");
text = text.Replace("@@@P", ":P"); 
```

# objective-c - 自定义 UIButton 背景图像在点击之前不会出现

> ID：16023558
> 
> 赞同：1
> 
> 时间：2013-04-15T19:45:33.273
> 
> 标签：objective-c, uibutton, uipopovercontroller

在我的应用程序中，如果您点击某个区域，则会出现一个 UIPopoverController，其中包含在单击时执行某些任务的 UIButtons。UIButtons（称为 CableDisconnectButton）是 UIButton 的子类，因此我可以向它们添加两个附加属性。我还添加了 UILabels 来检查按钮

但是，按钮的背景图像是不可见的，或者直到我在某处点击屏幕时才会出现。UIlabels 显示得很好，但不是按钮。它可以是点击 UIPopoverController 或屏幕上的任何其他位置。一旦我第一次点击该按钮，按钮就会一直存在，直到应用程序关闭。所以，这只发生在启动之后，直到我第一次打开 UIPopover。在打开弹出框之前我点击了很多次。

按钮的功能和其他一切工作正常，但背景图像在第一次启动时被隐藏了，我不知道为什么。

以下是我创建按钮和 UILabel 的方法：

```
 //create custom button
CableDisconnectButton *removeConnectionButton = [CableDisconnectButton buttonWithType:UIButtonTypeCustom];
removeConnectionButton.frame = CGRectMake(x, y, 190, 80);
removeConnectionButton.backgroundColor = [UIColor clearColor];
[removeConnectionButton setBackgroundImage:[UIImage imageNamed:@"images/cable_disconnect_button.png"] forState:UIControlStateNormal];
[removeConnectionButton setBackgroundImage:[UIImage imageNamed:@"images/cable_disconnect_button_over.png"] forState:UIControlStateHighlighted];

//set input and output jacks to button properties
removeConnectionButton.inputJack = inputJack;
removeConnectionButton.outputJack = self.outputJackView;

//add action to button
[removeConnectionButton addTarget:self action:@selector(removeConnectionButtonTarget:) forControlEvents:UIControlEventTouchUpInside];

//create label for output
UILabel *outputConnectionLabel = [[UILabel alloc] initWithFrame:CGRectMake(x+18, y+5, 180, 22)];
outputConnectionLabel.backgroundColor = [UIColor clearColor];
outputConnectionLabel.textColor = [UIColor whiteColor];
outputConnectionLabel.text = self.outputJackView.jackDisplayName;
outputConnectionLabel.font = [UIFont systemFontOfSize:16];

//add subviews
[self addSubview:removeConnectionButton];
[self addSubview:outputConnectionLabel]; 
```

我尝试添加一个常规的、非自定义的 UIButton 并且它在没有点击的情况下出现。我怀疑它可能与子类 UIButton 有关，但我不确定为什么。添加到 UIButton 的额外属性是对功能至关重要且不能省略的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T02:41:29.187

在把我的头从桌子上敲了好几天之后，我遇到了“清理构建文件夹”选项。我已经多次清理项目，但不知道“清理构建文件夹”。要执行此操作，只需按住 Option 键，从菜单中单击 Product 并选择 Clean Build Folder。

因此，如果您的应用程序没有按照应有的方式运行并且根本没有意义，请尝试此操作。

# java - 番石榴缓存 - 如何在任何未命中时加载所有内容？

> ID：16023559
> 
> 赞同：4
> 
> 时间：2013-04-15T19:45:33.457
> 
> 标签：java, caching, guava

我有一个用例，其中加载缓存数据的方法是批量调用，但我永远不会使用 getAll 从缓存中获取数据。有没有办法让多个并发获取所有块在单个 loadAll 上？我不希望个人获取不同的键导致对数据源的多次调用。

```
cache.get(key1); // missing entry, starts refresh
cache.get(key2); // separate thread, already getting reloaded due to key1 miss 
```

我想我必须在查看 LocalCache 后实现自己的同步，在我的数据访问器中使用类似于本地缓存的东西，它只允许每隔这么多时间单位调用一次。当调用通过时，使用单个赋值语句更新本地副本。

我是否缺少 Guava 缓存库中的某些内容？

**编辑：**

我正在考虑类似以下的事情。但是，它可能会在`loadAll`完成时继续返回陈旧的数据。我希望一切都阻塞在`load`，并且只有第一个请求会导致`loadAll`继续。

```
public class DataCacheLoader extends CacheLoader<String, Double>
{
    private final Cache<String, Double> cache;
    private ConcurrentMap<String, Double> currentData;
    private final AtomicBoolean isloading;

    public DataCacheLoader( final Cache<String, Double> cache )
    {
        this.cache = cache;
        isLoading = new AtomicBoolean( false );
    }

    @Override
    public Double load( final String key ) throws Exception
    {
        if ( isLoading.compareAndSet( false, true ) )
        {
            cache.putAll( loadAll( Lists.newArrayList( key ) ) ) );
        }
        return currentData.get( key );
    }

    @Override
    public Map<String, Double> loadAll(Iterable<? extends String> keys) throws Exception
    {
        currentData = source.getAllData();
        return currentData;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-16T11:06:27.850

这是一个可以解决问题的解决方案。这个想法是，不是缓存每个单独的键，而是使用单个固定键缓存整个地图。一个缺点是您将无法使底层地图的各个部分过期（至少不容易），但这可能不是必需的。

```
class MyCache {
  private static final Object KEY = new Object();
  private final LoadingCache<Object, Map<String, Double>> delegate = 
      new CacheBuilder()
      // configure cache
          .build(new CacheLoader<Object, Map<String, Double>>() {
             public Map<String, Double> load(Object key) {
               return source.load();
             }
          };
  double get(String key) {
    return cache.get(KEY).get(key);
  }
} 
```

# google-places-api - Google Places api 餐厅类型

> ID：16023571
> 
> 赞同：26
> 
> 时间：2013-04-15T19:46:55.083
> 
> 标签：google-places-api

当您在 Google 地方搜索餐厅并转到商家资料（即： [https](https://plus.google.com/107507038669791289691/about?hl=en) ://plus.google.com/107507038669791289691/about?hl=en ）时，该餐厅有一个标签（在本例中为墨西哥餐厅）。但是当使用 Google places api 时，我只能看到一个类型列表

```
"types" : [ "restaurant", "food", "establishment" ] 
```

任何人都知道是否有可能以某种方式获得“墨西哥餐厅”的标签？

我知道支持的类型（[https://developers.google.com/places/documentation/supported_types](https://developers.google.com/places/documentation/supported_types)）。这不是很有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-25T06:12:29.163

我认为您可能不得不恢复到 api 上的文本搜索方法。

[https://developers.google.com/places/documentation/search#TextSearchRequests](https://developers.google.com/places/documentation/search#TextSearchRequests)

因此，您的请求最终会看起来像下面这样，仅限于特定区域

[https://maps.googleapis.com/maps/api/place/textsearch/json?query=Mexican+Restaurant&sensor=true&location=40.846,-73.938&radius=20&key=yourKeyHere](https://maps.googleapis.com/maps/api/place/textsearch/json?query=Mexican+Restaurant&sensor=true&location=40.846,-73.938&radius=20&key=yourKeyHere)

但是，这将返回该地区的所有其他墨西哥餐厅，因此如果您只想返回一个结果，我将使用 Place Details 请求。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-06T15:31:32.217

我还在一个项目中工作，该项目需要使用 Google Maps 和 Google Places APIs 获取有关某个地点的更多详细信息，我确实花了很多时间试图找到可以提供帮助的东西（Google Places API、Google Maps API、google+ APIs、. ..) 但什么都没有... 我发现的唯一的事情是论文 2 问题（功能请求），我希望 Google 有一天会添加到他们的 API 中：

*   第[5260](https://code.google.com/p/gmaps-api-issues/issues/detail?id=5260)期，13 颗星。

*   第[7878](https://code.google.com/p/gmaps-api-issues/issues/detail?id=7878)期，4 星。

我希望通过这个 SO 问题，我们可以让更多感兴趣的人在不久的将来版本的 Google Map 或 Google Places API 中获得该功能。

对于 Google Places for Work API，我没有找到任何信息来确认它是否包含此类功能，但我不这么认为。

希望能有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-08T11:54:31.140

用 PIPE 符号“|”分隔您的地点类型

试试这样：

`String types = "cafe|restaurant|museum" // Listing places only cafes, restaurants and museums.`

# javascript - IEWebGL 插件 Three.js

> ID：16023575
> 
> 赞同：1
> 
> 时间：2013-04-15T19:47:35.107
> 
> 标签：javascript, html, css, internet-explorer, three.js

我创建了这段代码，它使用three.js 库和webgl 旋转带有轨迹球的立方体。它在 chrome 和 firefox 中完美运行，但需要它在 Internet Explorer 10 上运行，我下载了 IeWebgl，据说它可以帮助它在 IE10 上运行，但它什么也没做，只是说 webgl 不受互联网支持，他们的网站上有一些说明，但我有不明白他们。这是我的代码..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T14:55:25.160

可以让ie+ieWebGL兼容场景。

为此，您可以从[ieWebGL 站点上的演示资源开始](http://iewebgl.com/Engines.aspx)。场景必须由另一个结构构建（一些three.js脚本必须由require.js加载）。

这个似乎有效：

```
<script src="http://iewebgl.com/scripts/webglhelper.js" type="text/javascript"></script>
<script src="path/require.js"></script>

<script src="other_three.js-scripts"></script>

<script>

    // stub for "console" object, because IE does not have it, when page is not under debugger.
    var console = console || {
        'warn': function (msg) { },
        'log': function (msg) { },
        'error': function (msg) { }
    };

    var container, camera, controls, scene, renderer;

    function start()
    {
        require
        (
            ["path/build/three.min.js", "path/examples/js/controls/your_controls.js"],
            function ()
            {
                init();
                animate();
            }
        );
    }

    function init() 
    {
        container = document.getElementById('renderCanvas');

        // renderer
        renderer = new THREE.WebGLRenderer({ 'canvas': container });
        renderer.setSize(window.innerWidth, window.innerHeight);

        scene = new THREE.Scene();
        ...
    }
    ...
</script>

<!-- create proper element (native canvas element or IEWebGL plugin object element) depending on web browser and WebGL support -->
<script id="WebGLCanvasCreationScript"type="text/javascript">WebGLHelper.CreateGLCanvasInline('renderCanvas', start)</script> 
```

# matlab - matlab如何绘制非线性微分方程

> ID：16023579
> 
> 赞同：1
> 
> 时间：2013-04-15T19:47:56.697
> 
> 标签：matlab

```
Dx=y
Dy=-k*y-x^3+9.8*cos(t)
inits=('x(0)=0,y(0)=0') 
```

这些是我想要绘制的微分方程。

首先，我尝试求解微分方程，然后绘制图形。

```
Dsolve('Dx=y','Dy=-k*y-x^3+9.8*cos(t)', inits) 
```

然而，像这样，这个系统没有明确的解决方案。

现在我被困住了:(

你怎么能在不解方程的情况下绘制这个系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T23:01:07.670

首先定义要求解的微分方程。它需要是一个接受两个参数的函数——当前时间`t`和当前位置`x`，并返回一个列向量。`x(1)`我们将使用and而不是 x 和 y `x(2)`。

```
k = 1;
f = @(t,x) [x(2); -k * x(2) - x(1)^3 + 9.8 * cos(t)]; 
```

定义要解决的时间跨度和初始条件：

```
tspan = [0, 10];
xinit = [0, 0]; 
```

现在使用 数值求解方程`ode45`：

```
ode45(f, tspan, xinit) 
```

这导致了这个情节：

![在此处输入图像描述](https://i.stack.imgur.com/2ru1h.png)

如果您想在某个时间点获取解决方案的值，则只需询问一些输出参数：

```
[t, y] = ode45(f, tspan, xinit); 
```

您可以通过执行绘制相图*x*对*y*

```
plot(y(:,1), y(:,2)), xlabel('x'), ylabel('y'), grid 
```

结果如下图

![在此处输入图像描述](https://i.stack.imgur.com/tFLY6.png)

# javascript - 用于计算的 JavaScript 正则表达式

> ID：16023580
> 
> 赞同：0
> 
> 时间：2013-04-15T19:47:59.410
> 
> 标签：javascript

我正在寻找匹配计算字符串中的单个字符，例如：

```
(123+321)*1.15 
```

我想匹配的字符列表是：

```
0-9, ., +, -, *, /, (, ), % 
```

字符串的每个字符都将单独传递给一个函数。我想我有一个起点（这对数字很有用）：

```
if (character.match(/[0-9]{1}/) !== null) {
    // do something...
} 
```

不过，我不太确定如何添加剩余的字符（即使在阅读了无数关于该主题的文章之后，我总是发现正则表达式令人困惑）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T19:54:39.930

您可以添加您想要的字符`0-9`，例如

```
character.match(/[0-9.+\-*/()%]/) 
```

RegExp 中唯一需要转义的字符是`-`，因为它通常表示一系列字符。

不需要，`{1}`因为默认是匹配 1 个实例。

# windows-8 - 如何将 CompositeTransform 设置为元素，例如 Ellipse

> ID：16023583
> 
> 赞同：0
> 
> 时间：2013-04-15T19:48:11.773
> 
> 标签：windows-8, windows-store-apps

我想为椭圆添加 90° 旋转。所以我写了以下代码：

```
CompositeTransform ct = new CompositeTransform();
ct.Rotation = 90; 
```

如何将 附加`CompositeTransform`到`Ellipse`椭圆？

我尝试了以下方法：

```
ellipse.Projection = ct; 
```

但这不起作用。如何使它正确？错误说：`Cannot implicitly convert type 'Windows.UI.Xaml.Media.CompositeTransform' to 'Windows.UI.Xaml.Media.Projection'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:52:20.660

它应该是`ellipse.RenderTransform = ct`

# python - 来自分组邻居的熊猫时间增量

> ID：16023584
> 
> 赞同：2
> 
> 时间：2013-04-15T19:48:14.070
> 
> 标签：python, pandas

我有一组日期。我想从它们的前向邻居中减去它们以获得它们之间的增量。我的代码如下所示：

```
import pandas, numpy, StringIO

txt = '''ID,DATE
002691c9cec109e64558848f1358ac16,2003-08-13 00:00:00
002691c9cec109e64558848f1358ac16,2003-08-13 00:00:00
0088f218a1f00e0fe1b94919dc68ec33,2006-05-07 00:00:00
0088f218a1f00e0fe1b94919dc68ec33,2006-06-03 00:00:00
00d34668025906d55ae2e529615f530a,2006-03-09 00:00:00
00d34668025906d55ae2e529615f530a,2006-03-09 00:00:00
0101d3286dfbd58642a7527ecbddb92e,2007-10-13 00:00:00
0101d3286dfbd58642a7527ecbddb92e,2007-10-27 00:00:00
0103bd73af66e5a44f7867c0bb2203cc,2001-02-01 00:00:00
0103bd73af66e5a44f7867c0bb2203cc,2008-01-20 00:00:00
'''
df = pandas.read_csv(StringIO.StringIO(txt))
df = df.sort('DATE')
df.DATE = pandas.to_datetime(df.DATE)
grouped = df.groupby('ID')
df['X_SEQUENCE_GAP'] = pandas.concat([g['DATE'].sub(g['DATE'].shift(), fill_value=0) for title,g in grouped]) 
```

我得到了相当难以理解的结果。所以，我会去，我有一个逻辑错误。

我得到的结果如下：

```
 ID                DATE       X_SEQUENCE_GAP
0  002691c9cec109e64558848f1358ac16 2003-08-13 00:00:00 12277 days, 00:00:00
1  002691c9cec109e64558848f1358ac16 2003-08-13 00:00:00             00:00:00
3  0088f218a1f00e0fe1b94919dc68ec33 2006-06-03 00:00:00    27 days, 00:00:00
2  0088f218a1f00e0fe1b94919dc68ec33 2006-05-07 00:00:00 13275 days, 00:00:00
5  00d34668025906d55ae2e529615f530a 2006-03-09 00:00:00 13216 days, 00:00:00
4  00d34668025906d55ae2e529615f530a 2006-03-09 00:00:00             00:00:00
6  0101d3286dfbd58642a7527ecbddb92e 2007-10-13 00:00:00 13799 days, 00:00:00
7  0101d3286dfbd58642a7527ecbddb92e 2007-10-27 00:00:00    14 days, 00:00:00
9  0103bd73af66e5a44f7867c0bb2203cc 2008-01-20 00:00:00  2544 days, 00:00:00
8  0103bd73af66e5a44f7867c0bb2203cc 2001-02-01 00:00:00 11354 days, 00:00:00 
```

我期待 exapme 0 和 1 都会有 0 结果。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:59:33.727

这是在 0.11rc1 中（我认为不适用于以前的版本）当您移动日期时，第一个是 NaT（如 nan，但适用于 datetimes/timedeltas）

```
In [27]: df['X_SEQUENCE_GAP'] = grouped.apply(lambda g: g['DATE']-g['DATE'].shift())

In [30]: df.sort()
Out[30]: 
                                 ID                DATE      X_SEQUENCE_GAP
0  002691c9cec109e64558848f1358ac16 2003-08-13 00:00:00                 NaT
1  002691c9cec109e64558848f1358ac16 2003-08-13 00:00:00            00:00:00
2  0088f218a1f00e0fe1b94919dc68ec33 2006-05-07 00:00:00                 NaT
3  0088f218a1f00e0fe1b94919dc68ec33 2006-06-03 00:00:00   27 days, 00:00:00
4  00d34668025906d55ae2e529615f530a 2006-03-09 00:00:00                 NaT
5  00d34668025906d55ae2e529615f530a 2006-03-09 00:00:00            00:00:00
6  0101d3286dfbd58642a7527ecbddb92e 2007-10-13 00:00:00                 NaT
7  0101d3286dfbd58642a7527ecbddb92e 2007-10-27 00:00:00   14 days, 00:00:00
8  0103bd73af66e5a44f7867c0bb2203cc 2001-02-01 00:00:00                 NaT
9  0103bd73af66e5a44f7867c0bb2203cc 2008-01-20 00:00:00 2544 days, 00:00:00 
```

然后你可以填充纳（但你必须做这个确认类型转换，因为一个 numpy 错误，将在 0.12 中得到修复）。

```
 In [57]: df['X_SEQUENCE_GAP'].sort_index().astype('timedelta64[ns]').fillna(0)
Out[57]: 
0              00:00:00
1              00:00:00
2              00:00:00
3     27 days, 00:00:00
4              00:00:00
5              00:00:00
6              00:00:00
7     14 days, 00:00:00
8              00:00:00
9   2544 days, 00:00:00
Name: X_SEQUENCE_GAP, dtype: timedelta64[ns] 
```

# jsp - 是否有一种自动化的方法来更改项目源文件的编码？

> ID：16023588
> 
> 赞同：0
> 
> 时间：2013-04-15T19:48:18.563
> 
> 标签：jsp, encoding

我需要在完整的 java 项目中切换源文件的编码。目前它被配置为cp-1252，我需要它是utf-8。`.java, .css, .js, .jsp, .jspf, .properties, .you-name-it`但是，在记事本或任何非常乏味的东西上都有很多手动操作。有没有一种自动化的方法来做到这一点？我试图从现有的项目中制作一个项目，但没有成功（反正我不是很有希望）。

我需要一些与我手工操作相同的东西：

*   在文本编辑器中打开文件
*   “另存为”——更改编码属性
*   重复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:41:14.347

我会使用[iconv](http://www.gnu.org/savannah-checkouts/gnu/libiconv/documentation/libiconv-1.13/iconv.1.html)工具，结合一个简短的 shell 脚本或者一个`find`调用。存在适用于 Linux 和 Windows 的构建（例如，请参阅[此页面](http://www.fileformat.info/tip/linux/iconv.htm)上的链接）。可能也适用于其他操作系统。

编辑：另请参阅[此相关问题](https://stackoverflow.com/questions/9930484/change-file-names-with-find-and-iconv)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:34:13.150

在 java 中，您可以通过以下方式将 cp-1252 编码的文件内容放入字符串中：

```
FileInputStream inputStream = new FileInputStream(file);
String text = new Scanner(inputStream, "cp-1252").useDelimiter("\\A").next();
inputStream.close(); 
```

然后您可以`text`通过这种方式将字符串写入使用 utf-8 编码的文件：

```
FileOutputStream outputStream = new FileOutputStream(file);
OutputStreamWriter outputStreamWriter = new OutputStreamWriter(outputStream,  "utf-8");
BufferedWriter bufferedWriter = new BufferedWriter(outputStreamWriter);
bufferedWriter.append(text);
bufferedWriter.close(); 
```

[要自动化该过程，您可以从上面的代码创建一个方法，并使用 java File.listFiles()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28java.io.FileFilter%29)方法为找到的每个文件调用它（不过，我会在之前进行备份）。

# javascript - YouTube iframe 嵌入在 Internet Explorer 8 中引发 JavaScript 错误

> ID：16023590
> 
> 赞同：7
> 
> 时间：2013-04-15T19:48:26.120
> 
> 标签：javascript, html, youtube, youtube-api

在 Internet Explorer 8 中查看时，简单的 YouTube iframe 嵌入似乎会引发 JavaScript 错误。希望有人能找到我做错了什么——除非这是一个新错误？

**如何重现：**

1.  打开 Internet Explorer 8 并按 F12 以调出开发者工具
2.  切换到“控制台”选项卡以观看 JavaScript 控制台
3.  访问[http://ehough.com/ie8-youtube.html](http://ehough.com/ie8-youtube.html)，这是直接从 youtube.com 复制的 iframe 嵌入，并查看 JavaScript 错误

**错误：**

```
SCRIPT5007: Unable to get value of the property 'getActivated': object is null or undefined 
ie8-youtube.html, line 28 character 128

SCRIPT5020: Expected ')' in regular expression 
html5player-vflR_cX32.js, line 675 character 708

SCRIPT438: Object doesn't support property or method 'SetReturnValue' 
www-embed-vflqDUnF8.js, line 66 character 56

SCRIPT438: Object doesn't support property or method 'SetReturnValue' 
uVlr4eYkNjY, line 1 character 1 
```

有人对此有任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T00:13:57.893

IE8 及以下不支持太多现代的东西。但我很确定它可以在 IE9 及更高版本上运行。我在 IE10 上进行了测试（我的电脑上没有 IE8），它工作得很好。

在 Youtube 嵌入功能上，曾经有一个单选按钮，上面写着“使用旧的嵌入代码”。那是使用 Flash Player 而不是 Iframe 的旧式嵌入代码。

**然而，Youtube 在 2014 年年中取消了这个选项。**

还有一种方法可以获得旧式嵌入代码。下面的代码片段显示了一个通用的旧式嵌入代码。

```
<object width="560" height="315"><param name="movie" 
value="http://www.youtube.com/v/ [your Youtube video URL here] ?version=3&hl=en_US"></param><param
name="allowFullScreen" value="true"></param><param 
name="allowscriptaccess" value="always"></param><embed 
src="http://www.youtube.com/v/ [your Youtube video URL here] ?version=3&hl=en_US" 
type="application/x-shockwave-flash" width="560" height="315" 
allowscriptaccess="always" 
allowfullscreen="true"></embed></object> 
```

您是否看到“[您的 Youtube 视频网址]”文字吗？用您在 Youtube 视频 URL 末尾看到的随机内容替换该占位符。一个例子如下所示。

```
https://youtube.com/watch?v= NUjbKaUcxeA
```

要嵌入上面的视频 URL，您应该将“[您的 Youtube 视频 URL]”替换为“NUjbKaUcxeA”。

如果您希望它在 IE8 甚至 IE7 上工作，您应该使用旧式嵌入代码。旧式嵌入代码也适用于现代浏览器。

# c# - WPF - 项目集合动态边距

> ID：16023591
> 
> 赞同：0
> 
> 时间：2013-04-15T19:48:33.890
> 
> 标签：c#, wpf, xaml

我想在全宽边框内渲染几个元素并以编程方式计算边距，因此我在网格中获得具有适当边距的矩形。这将是我想要得到的渲染：

![在此处输入图像描述](https://i.stack.imgur.com/eQIoA.png)

应使用基于数据绑定值的算法计算边距。为了解释这个想法，假设我有一个包含“一”、“二”和“三”的字符串列表，我绑定到我的控件。假设我的算法非常简单，并且为每个下一个元素边距分配 +100。所以我会有三个矩形：

*   元素“一”的矩形 - 边距：100
*   元素“二”的矩形 - 边距：200
*   元素“三”的矩形 - 边距：300

所有矩形都是相同的，唯一的区别是计算的边距。

我最初的想法是使用 ItemsControl 并使用 MultiBinding 来计算每个元素的边距。

但是，当我使用带有 MultiBinding 的 ItemsControl 来计算动态边距时，我无法正确渲染矩形。

```
 <ItemsControl>
                <ItemsControl.ItemsSource>
                    <x:Array Type="sys:String" 
        xmlns:sys="clr-namespace:System;assembly=mscorlib">
                        <sys:String>One</sys:String>
                        <sys:String>Two</sys:String>
                        <sys:String>Three</sys:String>
                    </x:Array>
                </ItemsControl.ItemsSource>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Rectangle Name="InnerRectangle" VerticalAlignment="Stretch" Fill="Blue" Width="2" Height="120">
                                <Rectangle.Margin>
                                    <MultiBinding Mode="OneWay" Converter="{StaticResource MultiMarginConverter}">
                                        <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType={x:Type Border}}"></Binding>
                                        <Binding Path=""></Binding>
                                    </MultiBinding>
                                </Rectangle.Margin>
                            </Rectangle>
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl> 
```

如果我运行它，边距在转换器中正确计算，但矩形呈现为堆叠在一起？

计算边距的算法将使用当前上下文中的多个值，因此我需要使用多个属性值，这就是我使用多重绑定的原因。

这里是转换器，只是为了尝试这个概念而获得一些动态边距：

```
 public class MultiBindingMarginConverter : IMultiValueConverter
{
    List<Double> margins = new List<Double>() { 110, 220, 333, 444, 555, 666, 777 };

    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        var randomizer = new Random();;

        // I just get a random margin to try the concept. The margin will be computed by a more complex algorithm
        var computedMargin = margins.ElementAt(randomizer.Next(1, 7));

        return new Thickness(computedMargin, 0, 0, 0);
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

注意：当我只是运行应用程序时，它不会正确呈现矩形。但是，当我在多绑定转换器中调试并设置断点时，会应用边距并且矩形呈现正确？！

我认为一般方法应该可行，但我无法弄清楚我在渲染中做错了什么会导致矩形以错误的边距渲染，即使它们在转换器中被正确计算。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:30:09.530

不确定我是否正确理解了您的问题，但如果您想将所有这些矩形放入*同一个*网格单元格中，则必须将 ItemsControl 的[ItemsPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemspanel.aspx)设置为网格：

```
<ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
        <Grid/>
    </ItemsPanelTemplate>
</ItemsControl.ItemsPanel> 
```

* * *

同样，您也可以使用 Canvas 作为 ItemsPanel 并在每个项目 Rectangle 上设置`Canvas.Left`属性（而不是）。`Margin`

# javascript - 如何将更多数据附加到 AngularJS 模型？

> ID：16023593
> 
> 赞同：0
> 
> 时间：2013-04-15T19:48:51.487
> 
> 标签：javascript, jquery, ruby-on-rails, angularjs

到目前为止，我在我的 Rails 应用程序中设置 AngularJS 模型并为其提供数据以在前端访问都没有问题。我什至将其设置为使用来自 AJAX 请求的数据填充`$http`。但是，我需要这个模型来包含多个`$http`调用的数据。这是我到目前为止得到的代码：

```
function DropboxCtrl($scope, $http) {
    var $infiniteLoader = $(".infiniteLoader");
    var theUIDS = $infiniteLoader.attr('data-dropbox-uids').split(',');

    if($infiniteLoader.attr('data-dropbox-uids') != "") {
        var theData = {};

        $.each(theUIDS, function(key) {
            $http({ url: '/dropbox/files/get', method: 'GET', params: { uid: theUIDS[key] }}).success(function(data) {
                theData = data;
            });
        });

        $scope.dropboxes = theData;
    }
} 
```

我有一个名为的方法`DropboxCtrl`，它首先获取我需要调用 GET 请求的所有 UID。我遍历它们中的每一个，然后附加`data`到`theData`哪个是 Javascript 对象。在每个之后，我使我的保管箱模型等于`theData`. 当前，我的方法完全没有返回任何内容，也没有 Javascript 错误。我很肯定我的 url 可以完全正常工作，并且实际上确实让代码只使用了一个 AJAX 请求，如下所示：

```
$.each(theUIDS, function(key) {
    $http({ url: '/dropbox/files/get', method: 'GET', params: { uid: theUIDS[key] }}).success(function(data) {
        $scope.dropboxes = data;
    });
}); 
```

但是......该代码块仅返回最后一个 AJAX 调用，因为其他的被覆盖。也许我缺少的只是不正确的 Javascript，但是，也许我缺少的只是缺乏对事物的“Angular 方式”的理解。我精通 Javascript 和 jQuery，但对 Angular 很陌生。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:06:51.263

AngularJs 是一个高级 Javascript 框架。代码最终是javascript。在您的 $each 中，您可以将结果推送到数组或初始化集合，例如

```
$scope.dropboxes = [{uid:1234}, {uid:2345}] and so on. 
```

在 $each 中，找到 uid 的记录并附上结果。我通常使用 underscorejs 库对集合、数组等进行操作，例如

```
_.findWhere($scope.dropboxes, {uid: data.uid }).data = data; 
```

假设返回的数据中有 uid。如果没有，那么应该有另一种方法将结果映射到请求。请注意，无法保证响应的顺序，因此您不能使用数组索引来映射结果。

# c++ - BMI计算C++

> ID：16023594
> 
> 赞同：1
> 
> 时间：2013-04-15T19:48:53.857
> 
> 标签：c++, arrays

我需要一些帮助来计算 BMI。我从一个文件中读取了数据并填充了 2 个包含人的体重和身高的数组。我正在创建一个包含这些人的 BMI 的第三个数组。我知道BMI是bmi =体重/（身高*身高）；我遇到的问题是，当我需要计算的数据存储到数组中时，如何计算 BMI。我正在考虑遍历每个数组（高度和体重）并通过数组的每个索引计算该循环中的 BMI。两个数组的大小也相同，并且是双精度数据类型。有人可以告诉我这是否是解决此问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:28:19.857

关于您在问题中的评论，您不必执行 3 个嵌套循环，因为索引在您的三个数组（身高、体重和 BMI）中对齐。只是为了举例，我们在您的问题中引用了您的 2 个输入数组，身高和体重的长度为 n。

```
const int n = 10;
double height [n];
double weight [n];
//read from array, populate arrays height and width
//...

//have 1 output BMI value per input value
double BMI [n];

//calculate the BMI values based on the heights and widths
for (int i = 0; i < n; i++)
{
    BMI[i] = height[i] / (weight[i]*weight[i]);
} 
```

希望我能正确理解您的要求

# ruby-on-rails - 添加或编辑表格

> ID：16023595
> 
> 赞同：0
> 
> 时间：2013-04-15T19:48:57.517
> 
> 标签：ruby-on-rails

我想显示一个表单来添加或编辑结果（如果存在）。我有一个 n * n 的表格，其中单元格中的 n 个团队由结果给出。这有多好？

```
view/championship/show.erb
<table class="table table-bordered">
  <tr><th>&nbsp;</th>
    <% @teams.each do |teamhome| %>
    <th class="vertical"><%= teamhome.name %></th>
    <% end %>    
  </tr>
  <% @teams.each do |teamguest| %>
  <tr>
    <th><%= teamguest.name %></th>
    <% @teams.each do |teamhome| %>
      <%if teamhome == teamguest %>
        <td bgcolor = '#F9F9F9'>
      <% else %>
        <td> 

         #render form               

        </td>
      <% end %>
    <% end %>
  </tr>
  <% end %>
</table> 
```

楷模

```
class Score < ActiveRecord::Base
  attr_accessible :team1_score, :team2_score, :team1_id, :team2_id, :team1, :team2

  belongs_to :team1, class_name: 'Team', foreign_key: :team1_id
  belongs_to :team2, class_name: 'Team', foreign_key: :team2_id

  def self.to_arr

    score_arr = self.find(:all, :select => 'team1_id, team2_id, team1_score, team2_score').to_a

  end

end

class Team < ActiveRecord::Base
  attr_accessible :name

  belongs_to :championship
  has_many :team1_scores, class_name: 'Score', foreign_key: :team1_id
  has_many :team2_scores, class_name: 'Score', foreign_key: :team2_id

  validates :name, presence: true, length: { maximum: 100 }
  validates :championship_id, presence: true

end 
```

图式

“team1_id”|“team2_id”|“team1_score”|“team2_score”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:43:21.293

一种方法是将所有分数加载为以下形式的哈希`{ [:team1_id, :team2_id] => [:team1_score, :team2_score] }`：

```
@scores = Score.all.inject({}) do |m, s| 
  m[[s.team1_id, s.team2_id]] = [s.team1_score, s.team2_score]
  m
end 
```

现在您可以像这样呈现每个家庭/客人配对的分数：

```
<% scores = @scores[[teamhome.id, teamguest.id]] %>
<%= "#{scores.first} / #{scores.last}" if scores %> 
```

这种方法的优点是您可以通过哈希键找到匹配分数，即使对于大量数据也应该相当快。缺点是这个散列正在加载*所有*分数 - 甚至那些不包含在`@championship`. 如果你想避免这个问题，你可以建立一个范围来缩小相关团队的分数。然后只需调用`Score.your_scope`而不是`Score.all`.

另一种方法（不需要构建哈希）是直接从主队获取分数并检测该客队单元格的适当匹配：

```
<% scores = teamhome.team1_scores.detect{|s| s.team2_id == teamgues.id }
<%= "#{scores.team1_score} / #{scores.team2_score}" if scores %> 
```

如果您没有过多的数据，那么这种更简单的方法就足够了。只需确保在最初加载球队时立即加载主队得分，否则您的表现将受到 N+1 查询的影响。

**更新**

在这两种方法中，分数都呈现为`"home_team_score / guest_team_score"`，但前提是找到匹配的分数。如果未找到，则不呈现任何内容 - 这是由于`if scores`条件语句。如果要渲染其他内容，可以更改条件以使用三元运算符。下面的示例遵循第二种收集分数的方法：

```
<%= scores ? "#{scores.team1_score} / #{scores.team2_score}" : "No Score" %> 
```

`'No Score'`如果未找到匹配的分数集，这将呈现。

# jboss5.x - jboss 错误将 EJB 2.X ap 迁移到 jboss 5

> ID：16023597
> 
> 赞同：0
> 
> 时间：2013-04-15T19:49:09.203
> 
> 标签：jboss5.x, ejb-2.x

我将其他人的 EJB 2.X 应用程序从 jboss 3 迁移到 jboss 5（然后可能迁移到 AS7）。当我对其中一个 EJB 进行测试部署时，出现此错误

```
org.jboss.deployment.DeploymentException: Could not load class: 
at org.jboss.ejb.plugins.cmp.jdbc.metadata.JDBCEntityCommandMetaData.<init>   
(JDBCEntityCommandMetaData.java:76)
at org.jboss.ejb.plugins.cmp.jdbc.metadata.JDBCEntityMetaData.<init>
(JDBCEntityMetaData.java:954)... 
```

谷歌搜索这个堆栈跟踪并没有给我任何我可以处理的线索。据我所知，这意味着 conf/standardjbosscmp-jdbc.xml 中的实体命令是错误的，但我不知道它应该是什么。查看 jboss 3 conf/standardjbosscmp-jdbc.xml 文件甚至没有列出实体命令，所以我认为“默认”应该没问题，不是吗？我正在使用 Oracle 11g，如果这是有意义的，否则似乎没有数据库连接问题。Oracle 数据源的创建似乎没有问题。这是输出中的第一个错误。关于我应该如何解决这个问题的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:53:56.583

您确定您根据 JBoss 5 库构建所有内容吗？这可能是构建问题...

# solr - WebSolr 如何支持不带 q 参数的查询

> ID：16023602
> 
> 赞同：0
> 
> 时间：2013-04-15T19:49:38.147
> 
> 标签：solr, websolr

当我提交没有`q`参数的 solr 查询时，我得到空指针异常

```
# This works
http://localhost:8991/solr/select?q=hello

# This throws Null pointer exception
http://localhost:8991/solr/select 
```

但是当我使用 WebSolr 时，不带`q`参数的查询会返回所有文档（我假设 q 被分配给`*:*`）。是否有启用此行为的 solr 配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:41:51.043

尝试这样的事情：

```
<requestHandler name="standard" class="solr.StandardRequestHandler" default="true">
  <lst name="defaults">
    <str name="q">*:*</str>
  </lst>
</requestHandler> 
```

# matlab - ODE 系统，具有差分初始条件的 IVP

> ID：16023603
> 
> 赞同：1
> 
> 时间：2013-04-15T19:49:39.213
> 
> 标签：matlab, ode

我正在尝试对一个由三个微分方程组成的系统进行建模。这是一个液滴模型，参数化与弧长*s 的*关系。

方程为：
dx/ds=cos(theta)
dz/ds=sin(theta)
(theta)/ds=2*b+c*z-sin(theta)/x

初始条件是 x、z 和 theta 在 s=0 时都为 0。为了避免 d(theta)/ds 上的奇异性，我还有一个条件是，在*s=0*处，d(theta)/ds=b。我已经写了这段代码：

```
[s,x]=ode23(@(s,x)drpivp(s,x,p),sspan,x0);

%where p contains two parameters and x0 contains initial angle theta, x, z values.  
%droplet ODE function:  
function drpivp = drpivp(s,x,p);  
%x(1)=theta  
%x(2)=x  
%x(3)=z  
%b is curvature at apex  
%c is capillarity constant  
b=p(1);  
c=p(2);  
drpivp=[2/p(1)+p(2)*x(3)-sin(x(1))/x(2); cos(x(1)); sin(x(1))]; 
```

这产生了一个螺旋式的解决方案。它不是创建一个液滴配置文件，而是创建许多。当然，这里我没有正确初始化方程，因为我不确定如何在 s=0 处为 theta 使用不同的方程。

所以问题是：我如何包含 d(theta)/ds=b 而不是通常在 s=0 处的初始条件？这可以使用matlab上的内置求解器吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:53:19.223

有几种方法可以做到这一点，最简单的方法是简单地将 if 语句添加到您的等式中：

```
function drpivp = drpivp(s,x,p);  
%x(1)=theta  
%x(2)=x  
%x(3)=z  
%b is curvature at apex  
%c is capillarity constant  
b=p(1);  
c=p(2); 
if (s == 0)
    drpivp=[b; cos(x(1)); sin(x(1))];
else
    drpivp=[2/p(1)+p(2)*x(3)-sin(x(1))/x(2); cos(x(1)); sin(x(1))];
end 
```

# wordpress - 如何在列表类别存档页面中间插入广告？

> ID：16023607
> 
> 赞同：0
> 
> 时间：2013-04-15T19:49:55.917
> 
> 标签：wordpress, optimization, data-structures, arraylist, insertion

伙计们...我在这里遇到问题...

我想在中间的分类存档页面中插入广告，好的，是这样的情况：

在我的主题（Fastheme）的类别存档页面中，如果您选择类别列表之一，我有 1 个视图：例如“精选”

Total output Category 选定的（10 个帖子）显示列表类别存档页面。

> 显示类别“精选”（1 个帖子）
> 
> 显示类别“精选”（2 个帖子）
> 
> 显示类别“精选”（3 个帖子）
> 
> 显示类别“精选”（4 个帖子）
> 
> **<-- 定位广告-->**
> 
> 显示类别“精选”（5 个帖子）
> 
> 显示类别“精选”（6 个帖子）
> 
> 显示类别“精选”（7 个帖子）
> 
> 显示类别“精选”（8 个帖子）
> 
> 显示类别“精选”（9 个帖子）
> 
> 显示类别“精选”（10 个帖子）

以下是我的类别存档页面上的代码：

```
<div class="posta">
    <h1><?php if(is_category()) { ?> <?php single_cat_title(''); ?> News and Pictures
        <?php } elseif (is_day()) { ?><?php the_time('F jS, Y'); ?>
        <?php } elseif (is_month()) { ?> <?php the_time('F, Y'); ?>
        <?php } elseif (is_tag()) { ?> <?php single_tag_title(''); ?>
        <?php } elseif (is_year()) { ?> <?php the_time('Y'); ?>
        <?php } elseif (is_author()) { ?> Author
        <?php } elseif (isset($_GET['paged']) && !empty($_GET['paged'])) { ?> Blog Archives
        <?PHP } ?><?php  if ( get_query_var('paged') ) { echo ' ('; echo __('page') . ' ' . get_query_var('paged');   echo ')';  } ?>
    </h1>
</div>

        <?php $postcounter = 1; if (have_posts()) : ?>
            <?php while (have_posts()) : $postcounter = $postcounter + 1; the_post(); $do_not_duplicate = $post->ID; $the_post_ids = get_the_ID(); ?>

                <div class="post post-<?php echo $postCount ;?>" style="width:755px;float:right"><?php include (TEMPLATEPATH . '/thumb.php'); ?>
                    <div class="posttitle">
                        <h2><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title(); ?>"><?php the_title(); ?></a></h2>
                    </div>
                    <div class="tags"><?php the_time('M jS Y') ?> | <?php comments_popup_link('0 Comments', '1 Comment', '% Comments'); ?></div>
                    <?php echo excerpt(50); ?><?php if ( is_home() || is_category() || is_tag()) : ?>&nbsp;<?php endif; ?>
                    <p class="readmore"><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title(); ?>">...learn more</a></p>
                    <div style="clear: both"></div>
                </div>
            <?php endwhile; ?>
            <?php else : ?>
            <div class="notfound"></div>
            <div class="post"><center><h2>404 Not Found</h2></center></div>
            <?php endif; ?> 
```

请帮我。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:35:04.963

如果您想让广告显示在中间，您可以执行以下操作：

```
<div class="posta">
    <h1><?php if(is_category()) { ?> <?php single_cat_title(''); ?> News and Pictures
        <?php } elseif (is_day()) { ?><?php the_time('F jS, Y'); ?>
        <?php } elseif (is_month()) { ?> <?php the_time('F, Y'); ?>
        <?php } elseif (is_tag()) { ?> <?php single_tag_title(''); ?>
        <?php } elseif (is_year()) { ?> <?php the_time('Y'); ?>
        <?php } elseif (is_author()) { ?> Author
        <?php } elseif (isset($_GET['paged']) && !empty($_GET['paged'])) { ?> Blog Archives
        <?PHP } ?><?php  if ( get_query_var('paged') ) { echo ' ('; echo __('page') . ' ' . get_query_var('paged');   echo ')';  } ?>
    </h1>
</div>

<?php if (have_posts()) : ?>
    <?php while (have_posts()) : the_post(); $the_post_ids = get_the_ID(); ?>

        <?php if (floor($post_count/2) == $current_post) : ?>

            // Your add code here

        <?php endif; ?>

        <div class="post post-<?php echo $postCount ;?>" style="width:755px;float:right"><?php include (TEMPLATEPATH . '/thumb.php'); ?>
            <div class="posttitle">
                <h2><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title(); ?>"><?php the_title(); ?></a></h2>
            </div>
            <div class="tags"><?php the_time('M jS Y') ?> | <?php comments_popup_link('0 Comments', '1 Comment', '% Comments'); ?></div>
            <?php echo excerpt(50); ?><?php if ( is_home() || is_category() || is_tag()) : ?>&nbsp;<?php endif; ?>
            <p class="readmore"><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title(); ?>">...learn more</a></p>
            <div style="clear: both"></div>
        </div>
    <?php endwhile; ?>
<?php else : ?>
        <div class="notfound"></div>
        <div class="post"><center><h2>404 Not Found</h2></center></div>
<?php endif; ?> 
```

`$current_post`is 在循环中保存当前帖子的索引

`$post_count`是当前页面中显示的帖子总数

阅读[https://codex.wordpress.org/Class_Reference/WP_Query](https://codex.wordpress.org/Class_Reference/WP_Query)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:39:21.077

维维克·曼格拉尼。在我使用您提供的代码后，这里发生的是......

```
Display Category "featured" (1 Posts)
// Your code here add
Display Category "featured" (2 Posts)
// Your code here add
Display Category "featured" (3 Posts)
// Your code here add
Display Category "featured" (4 Posts)
/ / Your code here add
Display Category "featured" (5 Posts)
/ / Your code here add 
```

等等。如果想让它变成这样怎么办？

```
Display Category "featured" (1 Posts)
Display Category "featured" (2 Posts)
Display Category "featured" (3 Posts)
Display Category "featured" (4 Posts)

<- Position Ads ->

Display Category "featured" (5 Posts)
Display Category "featured" (6 Posts)
Display Category "featured" (7 Posts)
Display Category "featured" (8 Posts)
Display Category "featured" (9 Posts)
Display Category "featured" (10 Posts) 
```

请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-25T20:19:57.240

你可以试试，

```
<?php while (have_posts()) : the_post(); $the_post_ids = get_the_ID(); $i ++?>
<?php if ($i == 5) : ?>
            // Your Ad Code Here
<?php endif; ?> 
```

# android - 操作栏选项卡的 Holo 主题向后兼容性

> ID：16023613
> 
> 赞同：3
> 
> 时间：2013-04-15T19:50:06.117
> 
> 标签：android, backwards-compatibility, android-theme, android-actionbar-compat

我目前正在开发一个使用 Holo 主题的应用程序，目标是 minSdkVersion = 9。我在整个应用程序中都有一个带有选项卡的操作栏，从版本 11+ 开始工作，我想知道使用向后兼容性获取版本 9 的最佳方法& 10 才能正常工作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:04:07.140

您可以使用[ActionBarSherlock](http://actionbarsherlock.com)。这将为您提供向后兼容的 ActionBar 和 ActionBar 选项卡。

# c++ - ctypes c++ 函数返回未知大小的数组

> ID：16023614
> 
> 赞同：2
> 
> 时间：2013-04-15T19:50:07.610
> 
> 标签：c++, python, arrays, ctypes

我有一个 c++ 函数，它接受一个指向已知大小数组的指针作为输入，并返回一个大小数组，该数组的大小在函数完成数据处理之前无法确定。如何调用 c++ 函数，传递第一个数组并将结果作为第二个数组接收？

我目前正在做类似的事情：

PYTHON：

```
def callout(largeListUlonglongs):
    cFunc = PyDLL("./cFunction.dll").processNumbers

    arrayOfNums = c_ulonglong * len(largeListUlonglongs)
    numsArray = arrayOfNums()

    for x in xrange(len(largeListUlonglongs)):
        numsArray[x] = long(largeListUlonglongs[x])

    cFunc.restype = POINTER(c_ulonglong * len(largeListUlonglongs))

    returnArray = cFunc(byref(numsArray)).contents

    return returnArray 
```

只要 returnArray 的大小与 numsArray 相同，此方法就可以工作。如果它更小，则数组的空元素用 0 填充。如果返回的数组大于数组元素填充后的结果将被截断。

如果有帮助，返回数组的结构包含返回数组的大小作为其第一个元素。

我在这里先向您的帮助表示感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:58:35.400

通常最好让调用者分配缓冲区。这样，调用者也可以释放它。但是，在这种情况下，只有被调用者知道缓冲区需要多长时间。因此，责任传递给被调用者来分配缓冲区。

但这对系统施加了额外的限制。由于被调用者正在分配缓冲区，因此调用者无法释放它，除非它们共享相同的分配器。这实际上可以安排，没有太多麻烦。您可以使用共享分配器。有几个。您的平台似乎是 Windows，因此例如您可以使用`CoTaskMemAlloc`和`CoTaskMemFree`. 接口的两边都可以调用这些函数。

另一种方法是将分配和释放保持在一起。调用者必须持有被调用者返回的指针。当它完成缓冲区时，通常是在将其复制到 Python 结构中之后，它会要求库释放内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T05:10:47.663

David 就内存管理问题为您提供了有用的建议。我通常会使用更简单的策略，即在库中有一个函数来释放分配的缓冲区。调用者有责任防止内存泄漏。

对我来说，您的问题似乎只是将结果转换为正确的指针类型。由于索引中的长度为 0，因此可以将结果类型设置为`long long`指针。然后获取大小，以便您可以将结果转换为正确的指针类型。

```
def callout(largeListUlonglongs):
    cFunc = PyDLL("./cFunction.dll").processNumbers
    cFunc.restype = POINTER(c_ulonglong)

    arrayOfNums = c_ulonglong * len(largeListUlonglongs)
    numsArray = arrayOfNums(*largeListUlonglongs)   

    result = cFunc(numsArray)
    size = result[0]
    returnArray = cast(result, POINTER(c_ulonglong * size))[0]

    return returnArray 
```

# php - 如何让 symfony 看到我的表之间的新关系？

> ID：16023615
> 
> 赞同：0
> 
> 时间：2013-04-15T19:50:11.673
> 
> 标签：php, orm, symfony-1.4, doctrine-1.2

我正在为一个项目使用 symfony 1.4（已经开始），现在我正在更改一些东西，当我查询两个表之间的一些信息时，我得到了一个关系错误，一个已经存在，另一个是新的，应该有一个指向第一个表的外键。

我收到这样的错误消息

```
exception 'Doctrine_Table_Exception' with message 'Unknown relation alias ' in /var/www/testorange/symfony/lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/vendor/doctrine/Doctrine/Relation/Parser.php:237 

Stack trace: #0 /var/www/testorange/symfony/lib/vendor/symfony/lib/plugins/sfDoctrinePlugin/lib/vendor/doctrine/Doctrine/Relation/Parser.php(235): Doctrine_Relation_Parser->getRelation('', false) 
```

...

还有更多错误。

所以，我认为这是因为我的表在我在 symfony 中的定义上还没有正确的关系（它们已经在我的数据库中相关）。

我将此行添加到我的 schema.yml 然后 [更新]

```
 OhrmTrainningSubmit:
  connection: doctrine
  tableName: ohrm_trainning_submit
  columns:
    id_trainning_submit:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    trainning:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    trainning_detail:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    answer:
      type: string(250)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    state:
      type: integer(1)
      fixed: false
      unsigned: false
      primary: false
      default: '0'
      notnull: true
      autoincrement: false
    user:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
  relations:
    OhrmUser:
      local: user
      foreign: emp_number
      type: many
    OhrmTrainning:
      local: trainning
      foreign: id_trainning
      type: many 
```

这是 OhrmUser 的定义

```
OhrmUser:
  connection: doctrine
  tableName: ohrm_user
  columns:
    id:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    user_role_id:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    emp_number:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    user_name:
      type: string(40)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    user_password:
      type: string(40)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    deleted:
      type: integer(1)
      fixed: false
      unsigned: false
      primary: false
      default: '0'
      notnull: true
      autoincrement: false
    status:
      type: integer(1)
      fixed: false
      unsigned: false
      primary: false
      default: '1'
      notnull: true
      autoincrement: false
    date_entered:
      type: timestamp(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    date_modified:
      type: timestamp(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    modified_user_id:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    created_by:
      type: integer(4)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
  relations:
    HsHrEmployee:
      local: emp_number
      foreign: emp_number
      type: one
    OhrmUserRole:
      local: user_role_id
      foreign: id
      type: one
    HsHrMailnotifications:
      local: id
      foreign: user_id
      type: many
    OhrmLeaveAdjustment:
      local: id
      foreign: created_by_id
      type: many
    OhrmLeaveComment:
      local: id
      foreign: created_by_id
      type: many
    OhrmLeaveEntitlement:
      local: id
      foreign: created_by_id
      type: many
    OhrmLeaveRequestComment:
      local: id
      foreign: created_by_id
      type: many
    OhrmTimesheetActionLog:
      local: id
      foreign: performed_by
      type: many 
```

在我要引用的表上，将引用的字段是“用户”到表“OhrmUser”到字段emp_number（我认为应该这样正确），问题是仍然是同样的错误，有人知道吗？还有什么我应该做的吗？

在我添加之后我运行这个

```
php symfony cc
php symfony doctrine:build-model
php symfony orangehrm:publish-assets
php symfony cc 
```

查询

```
try{
$q = Doctrine_Query::create()
 ->select('*')
->from('OhrmTrainningSubmit TS')
->innerJoin('TS.OhrmUser U')
->addWhere("TS.trainning = $training")
->andWhere("TS.user = $employee");
$result = $q->execute();
    return $result;
}catch(Exception $e){
    print_r ($e->getMessage());
    return null;
} 
```

我只能访问 OhrmTrainningSubmit 的数据，但是当我尝试访问 User 的字段时，我得到了内部错误。

我收到此代码的错误

```
foreach ($detail as $det){
    echo $det['answer']; // This is printed with no problem
    //echo $det['user_name']; <-- this one comes from the table OhrmUser, I get server error with this one
} 
```

其中 $detail 是具有查询返回值的变量。

当我做

```
->select('TS.*, U.*') 
```

我得到其他错误，说

> 未知属性 emp_number

任何的想法？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:02:43.127

两件事情：

1.  在您的架构中，确保您在关系附近有正确的缩进：

    ```
     autoincrement: false
    relations:
      OhrmUser:
        local: user
        foreign: emp_number
        type: many 
    ```

2.  查询应如下所示：

    ```
    $q = Doctrine_Query::create()
        ->from('TrainningSubmit T')
        ->innerJoin('T.OhrmUser U')
        ->where('T.id_trainning = ?', $id); 
    ```

当您在原则中指定连接时，您必须告诉 ORM 关系来自哪里 - 因此`T.OhrmUser U`而不是`OhrmUser U`. 这告诉学说您正在使用模型中的`OhrmUser`关系`T`。

更重要的是，您使用`->where()`了两次这是错误的，因为第二次覆盖了第一次。如果要添加多个条件，则应使用`->andWhere()`or 。然而，在处理学说中的命名关系时，您不必明确告诉学说它应该连接哪些列 - 它已经知道这要归功于模式文件。`->orWhere()``where`

更重要的是，如果您需要扩展连接的条件，您可以使用 轻松做到这一点`WITH`，例如

```
 ->join('T.OhrmUser U WITH U.name LIKE ?', 'Michal') 
```

将转化为：

```
 JOIN OhrmUser U ON U.emp_number = T.user AND U.name LIKE 'Michal' 
```

**编辑**

要从对象中检索数据，请使用：

```
//if you return a plain array as a result of the query:
echo $det['answer'];
echo $det['OhrmUser']['user_name'];

//if you return an array of objects:
echo $det->getAnswer();
echo $det->getOhrmUser()->getUserName(); 
```

# c# - 当文本框中没有数字时 C# 程序崩溃

> ID：16023616
> 
> 赞同：1
> 
> 时间：2013-04-15T19:50:13.613
> 
> 标签：c#, validation

我在 C# 中有一个 WPF 应用程序，对于我的一个文本框，输入被输入然后自动转换（摄氏度到华氏度）。当您输入一个数字时，它可以正常工作，但是一旦输入的数字的所有数字都被删除，程序就会崩溃。我想这是因为输入格式是“无效的”，因为它只是试图什么都不转换？我对如何解决这个问题感到困惑，任何帮助将不胜感激，谢谢！

这是我在应用程序中的代码：

```
private void tempC_TextChanged(object sender, TextChangedEventArgs e)
{
    tempC.MaxLength = 3;
    Temperature T = new Temperature(celsius);
    T.temperatureValueInCelcius = Convert.ToDecimal(tempC.Text);
    celsius = Convert.ToDecimal(tempC.Text);
    T.ConvertToFarenheit(celsius);
    tempF.Text = Convert.ToString(T.temperatureValueInFahrenheit);
} 
```

这是我创建的 API 中的代码：

```
public decimal ConvertToFarenheit(decimal celcius)
{
    temperatureValueInFahrenheit = (celcius * 9 / 5 + 32);

    return temperatureValueInFahrenheit;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T19:53:13.533

如果无法进行转换，您应该调用尝试转换值和信号的方法[Decimal.TryParse 。](http://msdn.microsoft.com/en-us/library/system.decimal.tryparse.aspx)

```
if(Decimal.TryParse(tempC.Text, out celsius))
{
   // Value converted correctly
   // Now you can use the variable celsius 

}
else
   MessageBox.Show("The textbox cannot be converted to a decimal"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T19:53:01.717

```
private void tempC_TextChanged(object sender, TextChangedEventArgs e)
{
    Decimal temp;
    if (!Decimal.TryParse(out temp, tempC.Text))
       return;
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:56:57.867

尝试这个 ：

```
private void tempC_TextChanged(object sender, TextChangedEventArgs e)
    {
        if(tempC.Text = "")
           return;
        tempC.MaxLength = 3;
        Temperature T = new Temperature(celsius);
        T.temperatureValueInCelcius = Convert.ToDecimal(tempC.Text);
        celsius = Convert.ToDecimal(tempC.Text);
        T.ConvertToFarenheit(celsius);
        tempF.Text = Convert.ToString(T.temperatureValueInFahrenheit);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T19:57:58.460

试试`Decimal.TryParse` 这里有一些例子

```
string value;
decimal number;

// Parse a floating-point value with a thousands separator. 
value = "1,643.57";
if (Decimal.TryParse(value, out number))
   Console.WriteLine(number);
else
   Console.WriteLine("Unable to parse '{0}'.", value);      

// Parse a floating-point value with a currency symbol and a  
// thousands separator. 
value = "$1,643.57";
if (Decimal.TryParse(value, out number))
   Console.WriteLine(number);
else
   Console.WriteLine("Unable to parse '{0}'.", value);   

// Parse value in exponential notation. 
value = "-1.643e6";
if (Decimal.TryParse(value, out number))
   Console.WriteLine(number);
else
   Console.WriteLine("Unable to parse '{0}'.", value);   

// Parse a negative integer value. 
value = "-1689346178821";
if (Decimal.TryParse(value, out number))
   Console.WriteLine(number);
else
   Console.WriteLine("Unable to parse '{0}'.", value);   
// The example displays the following output to the console: 
//       1643.57 
//       Unable to parse '$1,643.57'. 
//       Unable to parse '-1.643e6'. 
//       -1689346178821 
```

# extjs - 如何将 Sencha cmd 生成的“覆盖”文件夹用于 Ext JS 4 项目

> ID：16023619
> 
> 赞同：3
> 
> 时间：2013-04-15T19:50:22.863
> 
> 标签：extjs, extjs4

我已经使用 Sencha cmd 生成了一个项目。这将创建一个名为“overrides”的漂亮文件夹，我将重写的 Ext.Ajax 类放在其中。然后我像这样将它包含在我的 app.js 文件中

```
requires: [
    'overrides.Ajax'
] 
```

这在使用我的应用程序时工作得很好，但是当我尝试使用 Sencha cmd 构建它时，我收到以下错误：

```
[ERR] BUILD FAILED
[ERR] com.sencha.exceptions.BasicException: The following error occurred while e
xecuting this line:
[ERR] Z:\public_html\LoginScreen\.sencha\app\build-impl.xml:469: com.sencha.exce
ptions.ExBuild: com.sencha.exceptions.ExBuild: Failed to find any files for Z:\p
ublic_html\LoginScreen\app\app.js::ClassRequire::overrides.Ajax 
```

有谁知道如何正确包含覆盖文件夹内的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:36:23.577

原来我需要编辑 .sencha/app/sencha.cfg 文件，将以下内容添加到 app.classpath 的末尾

```
,${app.dir}/overrides 
```

感谢官方 Sencha 论坛上的 Mitchell 帮助我！ [http://www.sencha.com/forum/showthread.php?261361-Properly-using-the-overrides-folder-generated-by-Sencha-Cmd-for-Ext-Js-4.2](http://www.sencha.com/forum/showthread.php?261361-Properly-using-the-overrides-folder-generated-by-Sencha-Cmd-for-Ext-Js-4.2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-30T03:33:55.357

对于 Ext 5 用户，您可以在 app.json 中指定“覆盖文件夹”。例子：

```
"overrides": "${app.dir}/overrides", 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T20:37:43.410

您可能需要在加载程序配置中定义路径以进行覆盖。

像这样的东西：

```
Ext.Loader.setConfig({
    paths: {
        'Ext.ux': 'js/extjs/ux',
        'overrides' : 'somepath/to/overrides',
        'Skirtle.CTemplate':'js/extjs/ux/SkirtleCTemplate.js' //<-- specific component
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-18T14:58:04.637

对我来说只是

```
requires: [
    'overrides.Ajax'
] 
```

没用我必须添加

```
requires: [
    'MyApp.overrides.Ajax'
] 
```

它奏效了:)

还有变量

```
// @require @packageOverrides
// @require @appOverrides 
```

不要为我做任何事情，所以步骤是

1.  添加`,${app.dir}/overrides`在`sencha.cfg`
2.  `app.js`在里面添加需求`Ext.application`

经测试`Sencha Cmd v4.0.2.67`

# android - 等待 TTS/语音识别在 Android 应用中完成

> ID：16023621
> 
> 赞同：1
> 
> 时间：2013-04-15T19:50:26.730
> 
> 标签：android, speech-recognition, text-to-speech, voice

我有许多使用 TTS 和语音识别的代码部分。但是，当一行中有多个 tts 或连续有多个语音识别时，它要么崩溃，要么完全跳过它们。有时它会继续执行代码而不等待识别完成，这将导致稍后崩溃和不正确的变量。如何让我的应用暂停并等待完成？我研究了等待、枚举器、子例程，但似乎没有一个能解决问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T09:10:36.110

使用 TTS 时，请尝试`UtteranceProgressListener`在您的 TTS 类上扩展（API 级别 15 或更高）。这里是关于如何使用该抽象类的[Android 文档。](http://developer.android.com/reference/android/speech/tts/UtteranceProgressListener.html)该抽象类包含`public void onDone(String utteranceId){}` 在您的演讲完成时将调用的方法。对于语音识别，如果你使用了`RecognitionListener`，有一个方法`public void onResults (Bundle arg0)`会在语音识别结束时调用并给你一个结果。所以现在你知道 TTS 和语音识别何时完成。只需尝试在 TTS onDone() 或语音识别 onResult 中运行一些代码。希望这会有所帮助。

# javascript - jQuery .attr 没有属性宽度或高度

> ID：16023622
> 
> 赞同：1
> 
> 时间：2013-04-15T19:50:27.520
> 
> 标签：javascript, jquery, attr, jquery-attributes

以下代码将 src 属性归`.ajax-loader`为 an`img`但不是高度或宽度。难道我做错了什么？

```
 $(".ajax-loader").attr({
    src: "http://test.com/loading.gif",
    height: 16,
    width: 16
  }); 
```

编辑：这是由 WordPress 插件的 Contact Form 7 加载的。我不明白，因为 src 变化很好。但是，我注意到的一件事是高度和宽度属性不存在。我正在尝试添加它们。这就是它们没有出现的原因吗？

[链接到网站](http://keebs.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:52:55.523

你可以使用`.css()`：

```
$(".ajax-loader").attr("
    "src", "http://keebs.com/wp-content/themes/keebs/images/ajax-loader.gif")
   .css({
    height: "16px",
    width: "16px"
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:53:25.557

使用 .height() 和 .width() 设置宽度和高度。

```
$(".ajax-loader").width(16).height(16); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:52:20.153

您需要更新 CSS 高度和宽度属性：`$(".ajax-loader").css({height:"16px", width:"16px"});`

# javascript - JavaScript 删除对象

> ID：16023624
> 
> 赞同：0
> 
> 时间：2013-04-15T19:50:34.193
> 
> 标签：javascript, class, object

我正在做一些 ajax 请求并加载一些新内容。在我的主页中，我正在使用：

```
var App = function($el) {
    this.$el = $el;
    if ($.isFunction(this.init)) this.init();
}

App.prototype = {
    init: function() {          
        console.log(this);
    }
}

$(function() {
    var $homepage = $('#app #projects');
    $homepage = new App($homepage);
}); 
```

我试图在加载新内容时重置我的对象，然后在我回到主页时创建一个新内容。有任何想法吗？

# django - django 多态模型，过滤子类字段

> ID：16023629
> 
> 赞同：4
> 
> 时间：2013-04-15T19:50:50.013
> 
> 标签：django, model, polymorphism

我有一些使用 django-polymorphic-model 的模型

例如。

```
class Article(PolymorphicModel):
  ...
class Blog(Article):
  tags = ...
class Story(Article):
  publish = ... 
```

通常如果我得到所有文章，我只是这样做`Article.objects.all()`，但是如果我想得到所有标签为空的文章怎么办？如果我这样做`Articles.objects.filter(tags__isnull=True)`会因为其他模型没有这个字段而中断，我也想包括 Story 条目，我真的必须分成 2 个不同的查询并再次组合吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T20:02:38.347

好的通过问题对[文档](https://github.com/chrisglass/django_polymorphic/issues/8)进行了一些挖掘之后，这里是如何做到的

```
Articles.objects.filter(Blog___tags__isnull=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-21T15:12:53.247

希望你之前找到了答案。

```
Articles.objects.filter(Q(Blog___tags__isnull=True)|Q(Story__tags__isnull=True)) 
```

# joomla - Joomla + Jomsocial 自定义个人资料帮助！- 创建联系人字段组的首选方法

> ID：16023633
> 
> 赞同：0
> 
> 时间：2013-04-15T19:51:01.567
> 
> 标签：joomla, jomsocial

我将尝试创建一个“我们与您联系的最佳方式是什么？” 用户/客户可以在其中选择电话、短信或电子邮件的字段/字段组。这将显示在注册的第二页上，和/或可在 JomSocial 内的用户/客户个人资料页面上创建/编辑。目标是使用用户/客户提供的信息，以便我们知道他们希望与他们联系的最佳方式。

我将使用用户在注册过程中提供的电话号码和/或电子邮件

这是我的目标示例，请理解这不应该是实际代码或任何东西，我只是试图解释我想如何去做：

“我们联系你的最佳方式是什么？”
“第一个联系方法选择：”
- （下拉）“电话 | 短信 | 电子邮件”
- 如果是电话，（下拉）“{显示给定电话 #1} | {显示给定电话 #2}”
- 如果是文本消息，（下拉）“{display given phone #1} | {display given phone #2}”
- 如果是电子邮件，只需显示“{display email given}”
“第二个联系方法选择：”（与第一个选择相同上）
“第 3 种联系方式选择：”（与第 1 种选择相同）

这是我填写后输出的示例

我们与您联系的最佳方式是什么？
第一个选择：短信 - 555-555-5555
第二个选择：电子邮件 - email@example.com
第三个选择：电话 - 555-555-5555

我目前正在使用 JoomlaXi 的 JomSocial Profile Types (JSPT)，但我不太确定在这种情况下这是否重要。我也不确定是否已经有插件或扩展来解决这个问题，我看过但我想在这里问会产生最好的结果。

在此先感谢您-欢迎和感谢任何和所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:13:21.863

您可能希望在以下位置自定义或创建新的字段类型：

```
components/com_community/libraries/fields 
```

然后在类 getFieldHTML() 方法中或直接在

```
components/com_community/templates/default/register.profile.php 
```

或者，如果您使用自定义模板，

```
components/com_community/templates/your_jomsocial_template/register.profile.php 
```

您必须输入所有 jQuery 或老式 javascript 才能实现该功能。将字段 id 用作 jQuery('#field11') 是安全的

**免责声明**

这是一个（次要的）jomsocial 核心黑客，请在您的 git push/svn 提交和项目文档中很好地记录它，因为稍后更新组件可能会破坏这一点。

记住要测试保存和显示。

jomsocial 论坛上有几个帖子，但我保存的链接现在是 404，只需登录并搜索“自定义个人资料字段”，这样的帖子可以帮助您朝着正确的方向开始：

[http://www.jomsocial.com/forum/technical-issues/3286-how-to-add-custom-table-fields-and-info-on-profile-page#21074](http://www.jomsocial.com/forum/technical-issues/3286-how-to-add-custom-table-fields-and-info-on-profile-page#21074)

# c++ - pic 与 pie 的区别

> ID：16023637
> 
> 赞同：22
> 
> 时间：2013-04-15T19:51:18.413
> 
> 标签：c++, c, shared-libraries, linker-flags

我正在寻找二进制加密代码生成的选项，发现两个可用选项是 PIC 和 PIE。我试图找到两者之间的差异，但没有找到合适的文章。如果有人可以用专业人士和玉米的例子来解释差异或提供好文章的链接，那将是很好的学习。

我的基本动机是保护编译后的代码，因为 ELF/PE 格式可能会受到病毒的攻击，也可能会被黑客入侵，或者借助反向技术可以重新生成代码。还请提供任何其他方法来保护已编译的代码免受攻击和 d-compling。

我正在通过 Cygwin 使用 GCC 编译器来构建跨平台应用程序。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-15T20:01:12.100

从[gcc 文档](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Code-Gen-Options.html#Code-Gen-Options)：

> `-fpic`
> 生成适合在共享库中使用的与位置无关的代码 (PIC)...
> 
> `-fpie`
> 这些选项类似于 -fpic 和 -fPIC，但生成的与位置无关的代码只能链接到可执行文件中......

# javascript - youtube 观看视频的秒数

> ID：16023640
> 
> 赞同：0
> 
> 时间：2013-04-15T19:51:37.507
> 
> 标签：javascript, jquery, youtube, youtube-api

我有一个包含来自 youtube 的视频的视频网站，我使用 facebook api 通过打开的图表发布到用户查看视频的个人资料。因此，正如 facebook 政策所说：如果该人观看了超过 50% 的视频，但没有完成，则应通过将 expires_in 更新为视频实际播放的时间长度来更新动作实例以反映该人已停止观看看了。

我有2个误解：

1.  如果用户停止播放器并且没有播放 50% 的视频，我该怎么做？例如，用户访问视频页面，按下播放键，视频不会停止或暂停，将转到另一个页面。应该什么时候更新？
2.  我使用此[Listening for Youtube Event in JavaScript 或 jQuery](https://stackoverflow.com/questions/7988476/listening-for-youtube-event-in-javascript-or-jquery)链接中的脚本来捕获 youtube 事件。

在这部分代码中，我们有 youtube 播放器的所有事件。

```
function stopCycle(event) {
alert("onStateChange has fired!\nNew state:" + event.data); 
```

}

我怎样才能只捕捉玩家的第一场比赛？

# ruby - 为什么我的 Class 方法调用在一种方法中起作用，而在另一种方法中不起作用？

> ID：16023643
> 
> 赞同：0
> 
> 时间：2013-04-15T19:51:52.650
> 
> 标签：ruby, argument-passing

我正在自学 Ruby，并使用带有 Visual Studio 的编译器（称为 Sapphire on Steel）来运行代码。我正在为学校制作一个二十一点计划。到目前为止，我创建了一个 Deck 类、Card 类和 Player 类。在甲板类中，我有一个打印甲板内容的函数，我试图使用相同的函数来打印玩家手牌的内容。代码调用卡片类 getCard() 的函数，并循环整个数组。打印方法适用于 printDeck() 函数，但不适用于 showHand() 函数。

甲板对象被创建，其内容被传递到 PlayerHand.start() 函数中的一个数组。PlayerHand.showHand() 函数打印甲板内容被传递到的数组的内容。

有人可以帮我弄清楚为什么吗？任何和所有的帮助将不胜感激

```
#Zach Albright
#4-11-2013
#Black Jack

class Card
def initialize(suit, value)
    @suit = suit
    @value = value
end

def getCard()
    puts "#{@suit}: #{@value}\n"
end

def getSuit()
    return @suit
end

def getValue()
    return @value
end
 end

 class Deck
def initialize()
    @deck = Array.new() 

    for i in 1..4
        for j in 1..13
            if i == 1
                if j == 11
                    @deck.push(Card.new("Hearts", "Jack"))
                elsif j == 12
                    @deck.push(Card.new("Hearts", "Queen"))
                elsif j == 13
                    @deck.push(Card.new("Hearts", "King"))
                else
                    @deck.push(Card.new("Hearts", j))
                end

            elsif i == 2
                if j == 11
                    @deck.push(Card.new("Spades", "Jack"))
                elsif j == 12
                    @deck.push(Card.new("Spades", "Queen"))
                elsif j == 13
                    @deck.push(Card.new("Spades", "King"))
                else
                    @deck.push(Card.new("Spades", j))
                end

            elsif i == 3
                if j == 11
                    @deck.push(Card.new("Clubs", "Jack"))
                elsif j == 12
                    @deck.push(Card.new("Clubs", "Queen"))
                elsif j == 13
                    @deck.push(Card.new("Clubs", "King"))
                else
                    @deck.push(Card.new("Clubs", j))
                end
            elsif i == 4
                if j == 11
                    @deck.push(Card.new("Diamonds", "Jack"))
                elsif j == 12
                    @deck.push(Card.new("Diamonds", "Queen"))
                elsif j == 13
                    @deck.push(Card.new("Diamonds", "King"))
                else
                    @deck.push(Card.new("Diamonds", j))
                end
            end
        end
    end

    @deck.compact
end

def printDeck()
    @deck.each do |i|
        puts i.getCard()
    end
end

def shuffleDeck()
    @deck.shuffle!
end

def drawCard()
    return @deck.pop()
end

def drawHand()
    return @deck.pop(5)
end
 end

 class PlayerHand   
def initialize()
    @pHand = Array.new()
    @pCard = Card.new("Hearts", 4)

end

def start(myDeck)
    @pHand.push(myDeck.drawHand())
end

def drawCard(myDeck)
    @pHand.push(myDeck.drawCard())
end

#still needs work to show the actual contents of the card .getCard is not working     correctly
def showHand()
    @pHand.each do |i|
        puts i.getCard()
    end
end
 end

 myCard = Card.new("Hearts", 4)
 myArray = Array.new()

 puts myCard.getCard()

 myDeck = Deck.new()
 myDeck.shuffleDeck()

 player = PlayerHand.new()
 player.start(myDeck)
 player.showHand() 
```

错误：C:\Users\Zach\Documents\Visual Studio 2010\Projects\BlackJack\BlackJack\BlackJack.rb:118:in `showHand': undefined method`getCard' for # (NoMethodError)

来自 C:\Users\Zach\Documents\Visual Studio 2010\Projects\BlackJack\BlackJack\BlackJack.rb:117:in `each'

来自 C:\Users\Zach\Documents\Visual Studio 2010\Projects\BlackJack\BlackJack\BlackJack.rb:117:in `showHand'

来自 C:\Users\Zach\Documents\Visual Studio 2010\Projects\BlackJack\BlackJack\BlackJack.rb:133

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:26:07.863

在 start 方法中，您将推送 myDeck.drawHand 的返回值，它是一个数组。因此，当您查看使用每个的手牌时，您得到的是这个数组而不是卡片。你想做类似的事情

```
myDeck.drawHand.each do |card|
    @pHand << card
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:00:07.487

```
block in showHand': undefined method 'getCard' for #<Array:0x007ff3799a8c28> (NoMethodError) 
```

错误消息非常清楚：您正在调用`Card#getCard`一个显然不存在的 Array 对象。

`getCard()`是`Card`类的实例方法，这意味着您*只能*`Card`以对象作为接收者来调用它：

```
card = Card.new
card.getCard() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:07:13.097

问题在于，`drawHand()`当您调用时，`@deck.pop(5)`您会返回一个包含 5 张卡片的数组。

在你的方法中`start`，如果你改变`push`你`+`会没事的。

```
def start(myDeck)
    @pHand + myDeck.drawHand()
end 
```

# python - Python：如何从另一个带有变量的 cgi 脚本调用 cgi 脚本（POST）

> ID：16023644
> 
> 赞同：0
> 
> 时间：2013-04-15T19:51:53.933
> 
> 标签：python, cgi

我想做的是制作3个cgi脚本。第一个打印一个表格。然后这个表单将数据发布到下一个进行数据检查以确保它全部有效的表单。现在这是困难的部分。我基本上想确保如果数据无效，我想将信息传递回第一个脚本，以便可以将有效数据保存在表单中（通过 POST？），如果有效，它执行下一个脚本。

# algorithm - 需要帮助理解 fuchs 的迭代倒计时置换算法

> ID：16023647
> 
> 赞同：1
> 
> 时间：2013-04-15T19:52:12.223
> 
> 标签：algorithm, loops, permutation

Phillip Fuchs 教授有一个非常简洁的算法，可以使用纯迭代方法生成对象数组的排列（参见 quickperm.org）。基本上有 2 种变体，一种倒计时算法和一种计数（向上计数）算法。想法是相同的，只是初始化问题以及是否增加或减少“里程表”数字不同。

我已经研究了一段时间的算法，并且可以理解这个想法，除了一个特定的细节。在算法中，以及Fuchs教授对其算法的解释中，如果high index是偶数，low index设置为0；而如果高位指数为奇数，则低位指数设置为高位指数所指向的“里程表”位（原文使用j、i、p[]）：

```
lowIndex = (highIndex %2 == 0) ? 0 : odometerDigit[highIndex]; 
```

我只是很难理解这个逻辑。为什么 highIndex 为偶数或奇数确定 lowIndex 应为 0 或 odometerDigit 中的值？Fuchs 教授没有对此提供更详细的解释，但这就是算法的“魔力”症结所在。我真的很感激任何可以帮助我进一步理解这一点的见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T03:59:39.373

既然你踩了 N = 5（！），我会尝试一下。

除了 Fuchs 对递归的 [引证需要] 态度之外，我认为解释正在发生的事情的一种方法是他修改了以下递归算法。我希望这对你来说不是魔法。

```
def permute0(lst, n):
    if n < 2:
        print(lst)
    else:
        for j in range(n - 1, -1, -1):  # j in [0, n) descending
            # generate permutations with lst[n - 1] fixed
            lst[j], lst[n - 1] = lst[n - 1], lst[j]  # swap
            permute0(lst, n - 1)
            lst[j], lst[n - 1] = lst[n - 1], lst[j]  # swap back 
```

第一个优化是，在内部堆栈帧中，只需要将变量的值`j`存储在他调用的数组中`p`。我不会打扰那个。

第二个优化是他做了一个交换切除术。我们可以通过不与自身交换元素来稍微减少交换。

```
def permute1(lst, n):
    if n < 2:
        print(lst)
    else:
        permute1(lst, n - 1)
        for j in range(n - 2, -1, -1):
            lst[j], lst[n - 1] = lst[n - 1], lst[j]
            permute1(lst, n - 1)
            lst[j], lst[n - 1] = lst[n - 1], lst[j] 
```

为了进一步减少交换的数量，我们必须变得更聪明。`permute2`，与以前的版本不同，在返回之前不会恢复`lst`。`permute2`不是递归`permute1`的，因为它用来做脏活。

```
def permute2(lst, n):
    if n < 2:
        print(lst)
    else:
        permute1(lst, n - 1)
        for j in range(n - 2, -1, -1):
            lst[j], lst[n - 1] = lst[n - 1], lst[j]
            permute1(lst, n - 1) 
```

`permute2`做什么`lst`？忽略对保持不变的调用`permute1`，它将一个元素向左旋转。现在我们可以编写，它调用并查找下一个元素以交换到放置它的位置，但我们不能编写整个s 塔。`lst``lst``permute2a``permute2``lst[n - 1]``permute2``permute`

我们需要一个关于我们尚未存在的`permute`函数行为的归纳假设，我们可以用它来证明下一个。*这是一种创造性的行为，也是计算机科学中许多“魔法”的来源。*我要写的可能不是对我的想法的真实描述。

我们正在研究的算法类别有两个自然约束。首先，这些算法使交换次数最少。其次，它们是自相似的，并且在移动最后一个元素之前耗尽了前 N - 1 个元素的所有排列。这些约束一起强制将交换的元素之一存储在与 Fuchs 对应的位置`i`。

```
N = 0: there's only one permutation
N = 1: there's only one permutation
N = 2: the graph looks like 0 1 - 1 0
N = 3: the graph looks like

0 1 2   1 2 0   2 0 1
  |       |       |
   -------+-------     all bipartite connections
  |       |       |
0 2 1   2 1 0   1 0 2 
```

在 不失一般性的情况下开始`0 1 2`。（初始内容`lst`无所谓。）那我们就要开始了

```
0 1 2  # forced w.l.o.g.
1 0 2  # forced because 2 cannot be moved yet. 
```

唯一有趣的选择出现在这里。我们可以完成

```
2 0 1  # chose 1
0 2 1  # forced because 1 cannot be moved yet
1 2 0  # forced because we must move element 1 and 0 1 2 is already visited
2 1 0  # forced because 0 cannot be moved yet. 
```

另一个可能的延续是

```
1 2 0  # chose 0
2 1 0  # forced because 0 cannot be moved yet
2 0 1  # forced because we must move element 0 and 0 1 2 is already visited
0 2 1  # forced because 1 cannot be moved yet. 
```

在这一点上，我注意到 N = 2 和 N = 3 的第一种可能性都反转了排列。我将尝试构建`permute3`reverses `lst`。让我们看看它在 N = 4 时会做什么。

```
0 1 2 3
...
2 1 0 3
3 1 0 2
...
0 1 3 2
0 2 3 1
...
3 2 0 1
3 2 1 0
...
1 2 3 0  # oops 
```

好吧，那没有用。我们需要奇数次递归调用才能使子数组反转。这是第一个建议，也许我们需要`i`奇数和`i`偶数的不同行为。

就像`permute2`，对于 N = 4，这个假设的算法将元素向左旋转一个。该主题的变化似乎是死胡同。这里已经够晚了，我已经做了足够多的徒劳无功的实验，Fuchs 的算法对我来说也开始看起来很神奇。

`permute2a`毕竟让我写。回想一下，将一个元素向左`permute2`旋转。`lst`如果在补偿旋转的同时`permute2a`随着位置的增加进行交换，它会重复交换相同的位置（例如，因为不能保证可以访问其他位置）。`j``0`

```
def permute2a(lst, n):
    if n < 2:
        print(lst)
    else:
        permute2(lst, n - 1)
        for j in range(n - 2, -1, -1):
            lst[0], lst[n - 1] = lst[n - 1], lst[0]
            permute2(lst, n - 1) 
```

现在，我意识到，如果`permute2`调用`permute2a`而不是`permute1`，这对几乎等同于 Fuchs 的算法。~~这对我来说似乎仍然很神奇，但现在是我收工的时候了。明天吧。~~

事实上，`permute2a`它不仅可以处理左旋转，还可以处理任何固定排列`permute2`，即循环，即，当重复应用于其域中的单个元素时，一个排列会给出所有其他元素。鉴于这种`permute2`行为方式，效果`permute2a`是应用`permute2`的 (N - 1) 循环置换 N 次，除了它在循环之间交换元素进出位置 0，效果是每个元素沿循环移动N - 1次，没有效果。因此，无论是什么， `permute2a`on的效果都是交换位置 0 和 N - 1。`lst``permute2`

现在我们要做的就是论证`permute2`可以使用`permute2a`. 的行为`permute2a`对`permute2`. 此外，由于`permute2a`仅涉及子数组的第一个和最后一个元素，因此当前的实现`permute2`大部分都在那里。事实上，如果 N 是偶数，它就可以正常工作。

```
0123
...
2103
2130
...
3120
3021
...
2031
1032
...
3012 
```

N 奇数的问题是同一个元素将被交换两次到最后一个位置。

```
01234
...
31204
31240
...
41230
41032
...
31042
32041
...
42031
12034  # oops 
```

我们现在要做的就是证明新`permute2`循环它的元素（当 N 是偶数时）。我将使用一些群论，因为我看不到简单的基本证明。在[循环符号](http://en.wikipedia.org/wiki/Cycle_notation)中，排列是

```
(0 n-2)(0 n-1)(0 n-2)(1 n-1)(0 n-2)...(0 n-2)(n-3 n-1)(0 n-2)(n-2 n-1)(0 n-2). 
```

不相交的周期通勤。

```
(0 n-2)(0 n-1)[(0 n-2)...n-2 times...(0 n-2)](1 n-1)...(n-3 n-1)(n-2 n-1)(0 n-2). 
```

由于 n 是偶数，因此 n-2 次连续交换无效。

```
(0 n-2)(0 n-1)(1 n-1)...(n-3 n-1)(n-2 n-1)(0 n-2). 
```

正如我们之前观察到的，序列`(0 n-1)(1 n-1)...(n-3 n-1)(n-2 n-1)`是一个循环。

```
(0 n-2)(0 n-1 n-2 ... 1)(0 n-2). 
```

这是一个共轭循环，这也是一个循环。

```
(0 n-3 n-4 ... 1 n-2 n-1). 
```

这是最终版本。我声称它相当于 Fuchs 的算法以显式堆栈为模。

```
def permute3(lst, n):
    if n < 2:
        print(lst)
    else:
        permute3(lst, n - 1)
        for k in range(n - 2, -1, -1):
            i = n - 1
            j = 0 if i % 2 == 0 else k
            lst[j], lst[i] = lst[i], lst[j]
            permute3(lst, n - 1) 
```

# android - Android - 在这种情况下如何实现 getListItemClick()？

> ID：16023648
> 
> 赞同：0
> 
> 时间：2013-04-15T19:52:12.043
> 
> 标签：android, android-layout, listactivity

当我单击列表中的一个项目时，我希望其中的一个 TextView 将可见性从“已消失”更改为“可见”并显示被单击的项目位置。这应该在没有[错误操作 TextView](https://stackoverflow.com/questions/16022034/android-onlistitemclick-appears-to-be-acting-upon-more-than-one-list-item)导致的故障的情况下完成。我应该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:59:29.773

与我[之前的回答](https://stackoverflow.com/a/16022192/1267661)不同，我假设您希望每个 TextView 显示不同的数据，所以让我们为您的适配器添加一个新成员，并为您的适配器添加适当的 getter 和 setter：

```
private SparseArray<String> secondary = new SparseArray<String>();

public String getSecondary(int position) {
    return secondary.get(position, "");
}
public void setSecondary(int position, String value) {
    secondary.put(position, value);
    notifyDataSetChanged();  // Updates the ViewGroup automatically!
} 
```

SpareArrays 更适合没有可预测索引的集合，但如果你想要不同的东西，你可以使用 List、HashMap 等。现在调整`onListItemClick()`以使用新方法：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    String clickedPosition = "Clicked position = " + position;
    mAdapter.setSecondary(position, clickedPosition);
} 
```

最后更新`getView()`以`textClickedPosition`仅在`secondary`有数据时显示：

```
TextView textView = (TextView) view.findViewById(R.id.textPosition);
textView.setText(event);

textView = (TextView) view.findViewById(R.id.textClickedPosition);
String string = getSecondary(position);
if(!string.isEmpty()) {
    textView.setText(string);
    textView.setVisibility(View.VISIBLE);
}
else // You must hide the view otherwise you will see odd behavior for the recycle method
    textView.setVisibility(View.GONE);

return view; 
```

最后一点，您*真的*应该观看 Google I/O 讲座，例如[Turbo Charge 您的 UI](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)，它们包含丰富的知识！

# jquery - 整个 div 可点击，除了 2 个嵌套 div

> ID：16023649
> 
> 赞同：0
> 
> 时间：2013-04-15T19:52:14.183
> 
> 标签：jquery, html

我有一个工作 div，需要它全部可点击。

```
$(".job").click(function(){
    window.location=$(this).find("a.link").attr("href"); 
    return false;
}); 
```

但是，还有 2 个其他 div (`.apply`和`.like`) 有自己的操作。单击时不应转到链接。单击这两个 div 中的任何一个时，如何避免被带到整个 div 的链接？

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:54:35.660

不要使用 Javascript 来做到这一点，尝试使用这个简单的 CSS：

```
.job a {
    display: block;
    width: 100%;
    height: 100%;
} 
```

这样，您的链接应该作为链接工作，但可点击区域应该是其父元素的整个大小。没有理由通过Javascript检测点击，更何况这会放弃不支持它的人。该解决方案很容易在优秀的 ole' vanilla CSS 中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:54:57.570

针对特定的 div onclick，然后使用 preventDefault 覆盖：

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

一旦阻止默认设置，您就可以添加自定义操作。

# java - IntelliJ 的“提供”范围的 Ant 等效项

> ID：16023652
> 
> 赞同：2
> 
> 时间：2013-04-15T19:52:20.200
> 
> 标签：java, android, ant, intellij-idea

对于 Android 和其他 Java 项目，IntelliJ 和其他一些构建系统允许范围为“已提供”的依赖项，这意味着依赖模块的源将不会包含在相关模块中。

虽然 IntelliJ 在模块配置的基础上设置了 Ant project.properties，但它只包含 IntelliJ 所谓的“编译”依赖项，因此“提供”的依赖项在使用 Ant 时会导致构建错误。

“提供”范围在其他依赖范围会导致类被多次引用的情况下很有用。

有没有办法在 Ant 中做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:11:37.457

Pure Ant 不做依赖管理，它只是一个构建工具。IntelliJ 通过根据您的项目配置生成适当的构建脚本来解决这个问题，但这只是一个拐杖。

为了在 IDE 环境之外模仿相同的东西，您需要依赖 Ant-aka [Ivy](http://ant.apache.org/ivy/)的扩展。Ivy 为 Ant 构建“表”带来了依赖管理，允许您定义要在构建中使用的库以及它们的作用域。[常春藤快速入门](http://ant.apache.org/ivy/history/latest-milestone/tutorial/start.html)是开始学习它的好地方。

或者，您可以使用[Maven](http://maven.apache.org/)，它*是*一个依赖管理工具，并且可以按原样工作，无需额外配置。另外，它在 IntelliJ 中受支持。

# ios - 使用 ARC 的自动释放池和池排水

> ID：16023657
> 
> 赞同：0
> 
> 时间：2013-04-15T19:52:37.217
> 
> 标签：ios, cocoa-touch, automatic-ref-counting

我想用 ARC 迁移这段代码。

我知道我必须使用：

```
@autoreleasepool {} 
```

但是我的两个池排水有问题，我不知道该怎么办。

```
- (void)downloadImageToCache:(NSString*)_urlImage
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    if (!(_urlImage) || (_urlImage == nil)) 
    {
        [pool drain];
        return;
    }

    NSURL *url = [NSURL URLWithString:_urlImage];
    NSData *data = [[[NSData alloc] initWithContentsOfURL:url] autorelease];

    if (data != nil) 
    {
        ...do something...
    }
    else
    {

        ...do something...
    }
    [pool drain];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:00:44.747

把整个东西包起来。不用担心回报。它会弄清楚的。

即编译器会将其转换为逻辑等效的：（或者您可以显式清理逻辑）

```
- (void)downloadImageToCache:(NSString*)_urlImage
{
  NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

  if (!(_urlImage) || (_urlImage == nil))
  {
    //[pool drain];
    //return;
  } else {

    NSURL *url = [NSURL URLWithString:_urlImage];
    NSData *data = [[[NSData alloc] initWithContentsOfURL:url] autorelease];

    if (data != nil)
    {
      ...do something...
    }
    else
    {  
      ...do something...
    }
  }
  [pool drain];
} 
```

这减少到：

```
- (void)downloadImageToCache:(NSString*)_urlImage {
  @autoreleasepool {
    if (_urlImage != nil) {

      NSURL *url = [NSURL URLWithString:_urlImage];
      NSData *data = [[[NSData alloc] initWithContentsOfURL:url] autorelease];

      if (data != nil) {
        // ...do something...
      } else {
        //...do something...
      }
    }
  }
} 
```

或者也许（更少的嵌套缩进总是我的偏好）：

```
- (void)downloadImageToCache:(NSString*)_urlImage {
  if (_urlImage == nil) {
    NSLog(@"[%@ %@] Error Message", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
    return;
  }

  @autoreleasepool {

    NSURL *url = [NSURL URLWithString:_urlImage];
    NSData *data = [[[NSData alloc] initWithContentsOfURL:url] autorelease];

    if (data != nil) {
      // ...do something...
    } else {
      //...do something...
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:59:18.350

您可以从自动释放池中“提前返回”，这将从池中释放所有对象：

```
- (void)downloadImageToCache:(NSString*)_urlImage
{
    @autoreleasepool {    
       if (!(_urlImage) || (_urlImage == nil)) 
       {
           // no need (not allowed) to call `drain`
           return;
       }

       NSURL *url = [NSURL URLWithString:_urlImage];
       NSData *data = [[[NSData alloc] initWithContentsOfURL:url] autorelease];

       if (data != nil) 
       {
           ...do something...
       }
       else
       {

           ...do something...
       }
       // no need (not allowed) to call `drain`
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:59:51.937

使用新的@autorelease 块语法，当执行退出块时，池将被耗尽。所以你可以这样做：

```
- (void)downloadImageToCache:(NSString*)_urlImage
{
    @autoreleasepool {

        if (!(_urlImage) || (_urlImage == nil)) 
        {
            return; //leaves @autoreleasepool block, automatically drains
        }

        NSURL *url = [NSURL URLWithString:_urlImage];
        NSData *data = [[[NSData alloc] initWithContentsOfURL:url] autorelease];

        if (data != nil) 
        {
            ...do something...
        }
        else
        {

            ...do something...
        }
    } //leaves @autoreleasepool block, automatically drains
} 
```

有关更多信息，请参阅[AutoreleasePools](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T20:00:24.050

也许：

```
- (void)downloadImageToCache:(NSString*)_urlImage
{
    @autoreleasepool {
        if (!(_urlImage) || (_urlImage == nil))
        {
            return;
        }

        NSURL *url = [NSURL URLWithString:_urlImage];
        NSData *data = [[NSData alloc] initWithContentsOfURL:url];

        if (data != nil)
        {

        }
        else
        {

        }
    }
} 
```

来自：[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T20:01:20.103

这段代码中有两个排水管的唯一原因是因为它在第一次排水管之后很早就返回了。只需将代码包装在 中`@autoreleasepool`，无论遵循哪个返回路径，它都会在退出时耗尽。

# javascript - ember js单选按钮实现不起作用

> ID：16023659
> 
> 赞同：3
> 
> 时间：2013-04-15T19:52:41.403
> 
> 标签：javascript, ember.js

我找到了一个用于 ember js 的单选按钮的实现：http: [//jsfiddle.net/9HeQG/](http://jsfiddle.net/9HeQG/)但它有一个我不知道如何解决的问题。

如果您尝试通过 ember set 方法设置绑定到单选按钮的值，则单选按钮的检查不会被更新。

但是，如果您按下单选按钮，您可以看到该属性已绑定：

```
App.set('radio1', 'Dog'); 
```

但你不能用 set 方法改变它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T07:57:17.447

您可以使用[Bootstrap.RadioGroup](https://github.com/pjlammertyn/ember-bootstrap/blob/master/packages/ember-bootstrap/lib/views/radio_button_group.js)。

```
{{view Bootstrap.RadioGroup 
  contentBinding="controller.questions" 
  valueBinding="content.checkedQuestionId"}} 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/EkFog.png)

# asp.net - ASP.NET 事件不在 Internet Explorer 10 上运行？

> ID：16023660
> 
> 赞同：0
> 
> 时间：2013-04-15T19:52:41.813
> 
> 标签：asp.net, event-handling, internet-explorer-10

它似乎发生在我通过代码附加的事件上，而不是绑定到 aspx 文件中元素的事件上。事件根本不运行，什么也没有发生。

这很奇怪，因为 IE10 是唯一有此问题的浏览器，其他所有浏览器都运行良好。

知道是什么原因造成的吗？

编辑：忘记提及这一点，但更改浏览器标准不起作用。仅更改浏览器模式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:03:36.987

.NET 框架的旧版本浏览器定义文件存在问题，导致 IE10 无法被识别为支持 JavaScript 的浏览器，更改了它向相关浏览器发出的代码，并经常破坏与相关的许多回发处理_doPostback 函数。[您可以在Scott Hanselman 的这篇博客文章](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)中阅读更多相关信息。

Microsoft提供了一个修补程序 ( [KB 2600088](http://support.microsoft.com/kb/2600088) ) 来解决 .NET 4.0 的问题。如果您正在寻找 2.0，则有针对 Windows 7 和 Server 2008 R2 ( [KB 2608565](http://support.microsoft.com/kb/2600088) ) 和旧操作系统 ( [KB 2600100](http://support.microsoft.com/kb/2600100) ) 的单独文章。

我应该提一下，我在将 4.0 软件包安装到 Server 2003 方面并没有取得很大的成功，但我正在研究可能导致这种情况的原因。看起来安装程序实际上并未更新所需的浏览器定义文件。如果您也遇到此问题，可以在上面链接的博客条目的“仅站点修复”部分下直接下载需要更新的文件（或为您节省一些时间，请[点击此处](http://www.hanselman.com/blog/content/binary/App_BrowsersUpdate.zip)）。

如果您需要临时修复，您可以在 IIS 配置中为标头“ [X-UA-Compatible](http://msdn.microsoft.com/en-us/library/ie/ms533876%28v=vs.85%29.aspx) ”发出 HTTP 标头，并将值设置为“IE=9”。

# jquery - TinyMCE 编辑处理程序类

> ID：16023665
> 
> 赞同：1
> 
> 时间：2013-04-15T19:53:11.320
> 
> 标签：jquery, wordpress, tinymce

有谁知道 TinyMCE 是否有一个特殊的“编辑”css 类可以应用于 div 元素，其唯一目的是在编辑器可视模式中应用？

我需要用我可以编码的命名类将我的短代码元素包装在 div 中，以改进内容编辑器中的格式和可用性（类似于 WordPress 使用“画廊”和“图像”标签的方式）。

换句话说，我可以使用一个 div 类作为包装器，当用户单击 text/html 视图时，该 div 将从标记中删除。但是当用户处于可视模式时，我可以使用这个 div 的类来对元素应用自定义 css 和 javascript。

我以为我可以使用 mceItem 类进行一些操作，但我无法再让它工作。

```
<div class="mceItem">
This div is only used for edit controls and TinyMCE handles it
differently than other divs within the editor?
</div> 
```

我确实意识到我可能不得不挂钩到 TinyMCE 插件架构来做任何复杂的事情，但只是想检查是否有一个简单的可视化格式化钩子的快捷方式，它带有一个临时的“运行时样式”div 元素。

# java - Java / Android 活动和数据库关闭（）问题

> ID：16023671
> 
> 赞同：0
> 
> 时间：2013-04-15T19:53:32.040
> 
> 标签：java, android, database, nullpointerexception

我的 android/java 代码有问题。当我从一项活动切换到另一项活动时，我只是得到了错误。我确定问题是数据库。堆栈跟踪中的主要错误是活动空指针和未明确关闭的数据库。任何人都可以就这个问题给我一些帮助吗？

有人熟悉下面的错误跟踪吗？

问题是，我有两种方法可以访问我也想访问的页面。通过快捷方式，当我第一次加载应用程序时，下一个按钮会给我错误。但是当我完成编辑时，到达我想要的页面并返回。然后第一个“下一个”起作用。太烦人了！

这是 logcat 中的跟踪：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.sec/com.android.sec.TabLayoutActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.sec/com.android.sec.RoomOverview}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
04-15 20:37:05.333: E/AndroidRuntime(568):  at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.sec/com.android.sec.RoomOverview}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
at android.app.ActivityThread.startActivityNow(ActivityThread.java:2503)
at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:651)
at android.widget.TabHost.setCurrentTab(TabHost.java:323)
at android.widget.TabHost.addTab(TabHost.java:213)
at com.android.sec.TabLayoutActivity.onCreate(TabLayoutActivity.java:30)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
... 11 more
E/AndroidRuntime(568): Caused by: java.lang.NullPointerException
at com.android.sec.RoomOverview.onCreate(RoomOverview.java:106)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
E/AndroidRuntime(568):  ... 20 more 
```

这是引发错误的类：

```
package com.android.sec;

import java.util.ArrayList;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ListView;
import android.widget.TextView;

public class RoomOverview extends Activity {

    public String value = CreateClient.getName();
    public String status = CreateRoom.getStatus();
    private ListView lvItem;
    private ArrayList<String> itemArrey;
    private ArrayAdapter<String> itemAdapter;
    public Cursor c, c2, c3, c4, c5, c6;
    SQLiteDatabase sampleDB;
    public static String selectedItem;
    ImageButton edit, delete;
    final Context context = this;
    public String typeToDelete;
    public static String getID[];

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.roomoverview);

        edit = (ImageButton) findViewById(R.id.editButton);
        edit.setEnabled(false);
        edit.setAlpha(127);

        delete = (ImageButton) findViewById(R.id.deleteButton);
        delete.setEnabled(false);
        delete.setAlpha(127);

        lvItem = (ListView)this.findViewById(R.id.listView1);
        lvItem.setTextFilterEnabled(true);

        itemArrey = new ArrayList<String>();
        itemArrey.clear();

        itemAdapter = new ArrayAdapter<String>(getApplicationContext(), R.layout.single_item,itemArrey);
        lvItem.setAdapter(itemAdapter);

        if(value == "Retrieve"){

            sampleDB = getBaseContext().openOrCreateDatabase(ClientList.retrievedClient+".db", MODE_PRIVATE, null);
        } 
        else if (value == "Create"){

            sampleDB = getBaseContext().openOrCreateDatabase(CreateClient.createdClient+".db", MODE_PRIVATE, null);
        }

        if(status == "Edit"){

            TextView roomName = (TextView) findViewById(R.id.roomName);
            roomName.append(EditRoom.possiblyEditedRoom);
            c = sampleDB.rawQuery("SELECT * FROM tbl_plant WHERE r_id =?", new String[] {RoomList.r_id});   
            c2 = sampleDB.rawQuery("SELECT * FROM tbl_windowData WHERE r_id =?", new String[] {RoomList.r_id}); 
            c3 = sampleDB.rawQuery("SELECT * FROM tbl_itData WHERE r_id =?", new String[] {RoomList.r_id}); 
            c4 = sampleDB.rawQuery("SELECT * FROM tbl_otherData WHERE r_id =?", new String[] {RoomList.r_id});  
            c5 = sampleDB.rawQuery("SELECT * FROM tbl_heatingData WHERE r_id =?", new String[] {RoomList.r_id});    
            c6 = sampleDB.rawQuery("SELECT * FROM tbl_lightingData WHERE r_id =?", new String[] {RoomList.r_id});   
        } 
        else if (status == "Create"){

            TextView roomName = (TextView) findViewById(R.id.roomName);
            roomName.append(CreateRoom.selectedRoom);
            c = sampleDB.rawQuery("SELECT * FROM tbl_plant WHERE r_id =?", new String[] {CreateRoom.r_id}); 
            c2 = sampleDB.rawQuery("SELECT * FROM tbl_windowData WHERE r_id =?", new String[] {CreateRoom.r_id});
            c3 = sampleDB.rawQuery("SELECT * FROM tbl_itData WHERE r_id =?", new String[] {CreateRoom.r_id});   
            c4 = sampleDB.rawQuery("SELECT * FROM tbl_otherData WHERE r_id =?", new String[] {CreateRoom.r_id});    
            c5 = sampleDB.rawQuery("SELECT * FROM tbl_heatingData WHERE r_id =?", new String[] {CreateRoom.r_id});
            c6 = sampleDB.rawQuery("SELECT * FROM tbl_lightingData WHERE r_id =?", new String[] {CreateRoom.r_id});     
        }

        itemArrey.add("---------- Plant ----------");
        if (c != null ) {
            if  (c.moveToFirst()) {
                do {

                    String id = c.getString(c.getColumnIndex("p_id"));
                    String plantName = c.getString(c.getColumnIndex("itemName"));
                    String plantType = c.getString(c.getColumnIndex("itemType"));
                    itemArrey.add("Plant Name: "+plantName+"\n"+"Type: "+plantType+"\n"+"ID: #"+id);

                }while (c.moveToNext());
            }
        }
        c.close();

Multiple of the above i.e. c2, c3, c4 etc. etc. - saves reading 

        lvItem.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // When clicked, show a toast with the TextView text

                selectedItem = (String) ((TextView) view).getText();
                if(selectedItem.contains("----------")){}

                else {
                    edit.setEnabled(true);
                    edit.setAlpha(255);
                    delete.setEnabled(true);
                    delete.setAlpha(255);

                //Toast.makeText(getApplicationContext(), "item: "+selectedItem+" child: "+parent.getCount(), Toast.LENGTH_LONG).show();
                for(int a = 0; a < parent.getChildCount(); a++)
                {
                    parent.getChildAt(a).setBackgroundColor(Color.WHITE);
                } 

                view.setBackgroundColor(Color.parseColor("#97C361"));

                }
            }
        });

        edit.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                if(selectedItem.contains("----------")){}

                else {

                sampleDB.close();

                if(selectedItem.startsWith("Plant Name:")){
                    typeToDelete = "P";
                } 
                else if (selectedItem.startsWith("Type:")){
                    typeToDelete = "W";
                } 
                else if (selectedItem.startsWith("PC Quantity:")){
                    typeToDelete = "I";
                } 
                else if (selectedItem.startsWith("Other Name:")){
                    typeToDelete = "O";
                } 
                else if (selectedItem.startsWith("Heating Type:")){
                    typeToDelete = "H";
                } 
                else if (selectedItem.startsWith("Lighting Type:")){
                    typeToDelete = "L";
                } 

                getID = selectedItem.split("#");

                if(typeToDelete == "P"){

                    Intent intent2 = new Intent(RoomOverview.this, EditPlant.class);
                    startActivityForResult(intent2, 0);

                } 
                else if (typeToDelete == "W"){

                    Intent intent2 = new Intent(RoomOverview.this, EditWindows.class);
                    startActivityForResult(intent2, 0);

                } 
                else if (typeToDelete == "I"){

                    Intent intent2 = new Intent(RoomOverview.this, EditIT.class);
                    startActivityForResult(intent2, 0);

                } 
                else if (typeToDelete == "O"){

                    Intent intent2 = new Intent(RoomOverview.this, EditOther.class);
                    startActivityForResult(intent2, 0);

                } 
                else if (typeToDelete == "H"){

                    Intent intent2 = new Intent(RoomOverview.this, EditHeating.class);
                    startActivityForResult(intent2, 0);

                } 
                else if (typeToDelete == "L"){

                    Intent intent2 = new Intent(RoomOverview.this, EditLighting.class);
                    startActivityForResult(intent2, 0);

                    }
                }
            }
        });

        delete.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {

                if(selectedItem.contains("----------")){}

                else {

                AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
                alertDialogBuilder.setTitle("Delete:");

                alertDialogBuilder.setMessage("Are you sure?").setCancelable(false).setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        //delete building

                        if(selectedItem.startsWith("Plant Name:")){
                            typeToDelete = "P";
                        } 
                        else if (selectedItem.startsWith("Type:")){
                            typeToDelete = "W";
                        } 
                        else if (selectedItem.startsWith("PC Quantity:")){
                            typeToDelete = "I";
                        } 
                        else if (selectedItem.startsWith("Other Name:")){
                            typeToDelete = "O";
                        } 
                        else if (selectedItem.startsWith("Heating Type:")){
                            typeToDelete = "H";
                        } 
                        else if (selectedItem.startsWith("Lighting Type:")){
                            typeToDelete = "L";
                        } 

                        String getID[] = selectedItem.split("#");

                        if(typeToDelete == "P"){
                            sampleDB.delete("tbl_plant", "p_id =?", new String[] {getID[1]});  
                        } 
                        else if (typeToDelete == "W"){
                            sampleDB.delete("tbl_windowData", "w_id =?", new String[] {getID[1]});  
                        } 
                        else if (typeToDelete == "I"){
                            sampleDB.delete("tbl_itData", "i_id =?", new String[] {getID[1]});  
                        } 
                        else if (typeToDelete == "O"){
                            sampleDB.delete("tbl_otherData", "o_id =?", new String[] {getID[1]});  
                        } 
                        else if (typeToDelete == "H"){
                            sampleDB.delete("tbl_heatingData", "h_id =?", new String[] {getID[1]});  
                        } 
                        else if (typeToDelete == "L"){
                            sampleDB.delete("tbl_lightingData", "l_id =?", new String[] {getID[1]});  
                        }

                        sampleDB.close();

                        Intent intent2 = new Intent(RoomOverview.this, TabLayoutActivity.class);
                        startActivityForResult(intent2, 0);     
            }
        })
        .setNegativeButton("No",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        //do nothing
                        dialog.cancel();
                    }
                });

                AlertDialog alertDialog = alertDialogBuilder.create();
                alertDialog.show();
            }
            }});      
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:04:00.873

首先不要用...

```
if (value == "Retrieve") { ...

if (value == "Create") { ...

if (status == "Edit") { ... 
```

...因为这在 Java 中不起作用。采用 ...

```
if ("Retrieve".equals(value)) { ...

if ("Create".equals(value)) { ...

if ("Edit".equals(status)) { ... 
```

... 反而。因此，您的光标`c`很可能是`null`. 这不会是一个问题，如果你把你的陈述放在`c.close()`里面。`if`因此，其次将您的`close()`方法调用移动到`if`语句中：

```
if (c != null ) {
    if  (c.moveToFirst()) {
        do {
           ...

        } while (c.moveToNext());
    }
    c.close(); // move to here
}
// here, close() is outside of the if causing a NPE if c is null 
```

即使这可能无法解决所有问题-这至少是一个开始，我希望它有所帮助；）

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:58:17.203

您只需要确保在使用后关闭游标和 dbHelper 对象。即 cursor.close() 或 dbHelper.close()...等。

此外，我建议您使用扩展 SQLiteOpenHelper 的类。然后，您可以使用该帮助程序来获取对 SQLiteDatabase 的引用，

```
SQLiteDatabase db = dbHelper.getWritableDatabase();
//db.query(....)
//db.select(....)
etc... 
```

有很多关于这个的教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T20:58:11.350

异常源自第 106 行，试图关闭一个为空的游标。进行检查或移动调用以将光标关闭到前面的检查 (c != null)。

# asp.net - ASP MVC 中的 Kendo Mobile ListView

> ID：16023683
> 
> 赞同：1
> 
> 时间：2013-04-15T19:54:31.170
> 
> 标签：asp.net, asp.net-mvc, kendo-ui, kendo-mobile

我很难让 ListView 做任何事情。我按照 Telerik 的说明添加了参考和所有需要的脚本。我只得到“[Object object] 没有方法 kendoListView”。

搞砸了一个小时后，我删除了脚本的移动版本，而是添加了桌面版本。现在我得到“无法读取未定义的属性'aspnetmvc-ajax'”。

我将 Asp.Net 与 MVC4 和 Rayzor 一起使用。JQuery 是 1.9.1，Telerik 的组件是 Q1 2013。有人知道这些错误是什么意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:06:16.780

要使 kendo mobile listview 工作，您必须使用 的初始化方法`kendoMobileListView`，而不是`kendoListView`。但是，您可以使您的工作更加轻松；如果您将 a 添加`data-role="listview"`到表示列表视图的元素中，并在您的页面中调用以下内容：

```
var app = new kendo.mobile.Application(document.body); 
```

这会通过查找 data-role 属性为您初始化所有小部件。[在演示](http://demos.kendoui.com/mobile/listview/index.html#/)中查看这一点。

# c# - 捕获异常（乒乓反应样本）

> ID：16023688
> 
> 赞同：1
> 
> 时间：2013-04-15T19:54:45.637
> 
> 标签：c#, .net-3.5, system.reactive

我从反应框架开始。基于示例：

[http://rxwiki.wikidot.com/101samples](http://rxwiki.wikidot.com/101samples)（乒乓球）

我在我的应用程序中做了类似的实现。我不能也不知道如何将操作传递给 OnError（在类外访问，ISubject 实现）

我能怎么做？

```
public class PFocusPing : ISubject<PFocusPong, PFocusPing>
{
    private readonly AdvancedConnection device;
    public PFocusPing(AdvancedConnection con)
    {
        this.device = con;
    }

    #region Implementation of IObserver<PFocusPong>
    public void OnNext(PFocusPong value)
    {
        this.device.SendData(clsPowerFocus.DataKeepAlive);
        Console.WriteLine("PFocusPing received PFocusPong.");
    }

    public void OnError(Exception exception)
    {
        Console.WriteLine("PFocusPing experienced an exception and had to quit playing.");
    }

    public void OnCompleted()
    {
        Console.WriteLine("PFocusPing finished.");
    }
    #endregion

    #region Implementation of IObservable<PFocusPing>
    public IDisposable Subscribe(IObserver<PFocusPing> observer)
    {
        return Observable.FromEventPattern<Args<DataReceive>>(add => device.DataReceived += add,
                                                     rem => device.DataReceived -= rem)
                                                    .Where(obj => obj.EventArgs.Value.Result == DataReceive.CONNECTION_RESULT.SUCESS)
                                                    .Where(obj => obj.EventArgs != null &&
                                                                  obj.EventArgs.Value != null &&
                                                                  obj.EventArgs.Value.Data != null &&
                                                                  obj.EventArgs.Value.Data.Length > 0)
                                                    .Select(obj => this)
                                                    .Subscribe(observer);

    }
    #endregion

    #region Implementation of IDisposable
    public void Dispose()
    {
        OnCompleted();
    }
    #endregion
 }

public class PFocusPong : ISubject<PFocusPing, PFocusPong>
{
    private readonly int timeout;
    private readonly int reply;
    private DateTime lastAnswer;

    public PFocusPong(int msPing, int msTimeout)
    {
        this.reply = Math.Max(1000, msPing);
        this.timeout = Math.Max(2000, msTimeout);
    }

    #region Implementation of IObserver<Ping>

    public void OnNext(PFocusPing value)
    {
        this.lastAnswer = DateTime.Now;
        Console.WriteLine("PFocusPong received Ping.");
    }

    public void OnError(Exception exception)
    {
        Console.WriteLine("PFocusPong experienced an exception and had to quit playing.");
    }

    public void OnCompleted()
    {
        Console.WriteLine("PFocusPong finished.");
    }

    #endregion

    #region Implementation of IObservable<PFocusPong>

    public IDisposable Subscribe(IObserver<PFocusPong> observer)
    {
        var keepAlive =
            Observable.Timer(TimeSpan.FromMilliseconds(0), TimeSpan.FromMilliseconds(reply))
            .Select(obj =>
                {
                    if ((DateTime.Now - this.lastAnswer).TotalMilliseconds < reply)
                    {
                        Console.WriteLine("True");
                        return true;
                    }

                    Console.WriteLine("False");
                    return false;
                });

        var keepDead = keepAlive.Where(obj => obj).Timeout(TimeSpan.FromMilliseconds(timeout)).Subscribe(r =>
            {
                if (!r)
                    throw new TimeoutException();
            });

        var disposable = keepAlive.Finally(keepDead.Dispose).Select(n => this).Subscribe(observer);
        return disposable;
    }

    #endregion

    #region Implementation of IDisposable

    public void Dispose()
    {
        OnCompleted();
    }

    #endregion

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:56:08.283

我不确定你的问题是什么。但是，您的困惑可能来自您的起点。我强烈建议您不要实现 `ISubject<T1, T2>`、`ISubject<T>`或`IObserver<T>`接口`IObservable<T>`。

您应该使用`Subscribe(Action<T>, Action<Exception>, Action)`扩展方法订阅可观察序列（`IObservable<T>`），并使用`Observable.Create`工厂方法或其他转换方法（例如 FromEvent、ToObservable 等...）

此外，乒乓球并不完全符合 Rx 的精神。Rx 是关于观察和组合事件序列的。乒乓球似乎更像是消息传递。Rx*一般*是一个单向的东西，即我会听键盘事件做某事，或者听温度变化，新的价格等等...

当您收到事件时，您通常不会将键向后推。

# mysql - 是否可以使 MySQL 数据库表不允许任何修改

> ID：16023693
> 
> 赞同：0
> 
> 时间：2013-04-15T19:54:52.337
> 
> 标签：mysql

我有一个肯定包含固定数据的查找表，{月份名称，它们的缩写形式，数值}。由于该表永远不可能更改，因此是否可以在该表上阻止数据库层上的插入/更新/删除。

我知道这可能不是一个特别有用的功能，无论如何我想知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:01:28.770

首先，假设表将来不会改变是不正确的。您打算将过时数据保留多长时间？有效期多久？您还在哪里保存新添加的内容？

第二件事，如果您真的想将表锁定为只读。

几种方法：

*   在应用程序级别强制执行此约束。这是标准做法。
*   创建一个仅 SELECT（特权）用户并在应用程序中使用此用户来查询此表。有些人用这个。但是您需要相应地在应用程序中的用户之间切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:45:15.140

您也可以为此使用 myisampack。压缩表是压缩的，不可更改。

[http://dev.mysql.com/doc/refman/5.6/en/myisampack.html](http://dev.mysql.com/doc/refman/5.6/en/myisampack.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:58:21.540

您可以向特定用户帐户授予权限，例如仅授予“选择”权限。

# delphi - Delphi 中的 EInvalidOp 异常

> ID：16023696
> 
> 赞同：-3
> 
> 时间：2013-04-15T19:54:57.457
> 
> 标签：delphi, exception

我的 Delphi 应用程序`EInvalidOp`在用户 PC 上引发异常：**无效的浮点操作**

这里 ：

```
var
progress100 :extended;
taille_cur : int64;
i : Integer;

begin

...

progress100 := min(taille_cur div 2 * 100 / i, 99) // **raises the exception**

....
end; 
```

我不知道为什么。当 progress100 是一个整数时，它工作得很好。我将其更改为扩展。或者变量可能`i`为零......

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:02:17.853

我能看到发生该错误的唯一方法是 for`i`等于`0`。

如果您的代码在调试器下运行，这类问题通常更容易解决。您可以简单地检查表达式参数的值，然后就清楚为什么会发生错误。

# java - 使用 HQL 从数据库中获取数据

> ID：16023703
> 
> 赞同：2
> 
> 时间：2013-04-15T19:55:13.213
> 
> 标签：java, hibernate, hql

嗨，我有 3 个表的数据库员工：

```
mysql> describe person;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| person_id  | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| date       | datetime     | YES  |     | NULL    |                |
| first_name | varchar(255) | YES  |     | NULL    |                |
| last_name  | varchar(255) | YES  |     | NULL    |                |
| position   | varchar(255) | YES  |     | NULL    |                |
| salary     | double       | YES  |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+

mysql> describe department;
+---------------+--------------+------+-----+---------+----------------+
| Field         | Type         | Null | Key | Default | Extra          |
+---------------+--------------+------+-----+---------+----------------+
| department_id | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| dept_name     | varchar(255) | YES  |     | NULL    |                |
+---------------+--------------+------+-----+---------+----------------+

mysql> describe department_person;
+---------------+------------+------+-----+---------+-------+
| Field         | Type       | Null | Key | Default | Extra |
+---------------+------------+------+-----+---------+-------+
| department_id | bigint(20) | NO   | PRI | NULL    |       |
| person_id     | bigint(20) | NO   | PRI | NULL    |       |
+---------------+------------+------+-----+---------+-------+ 
```

因此，我想编写 HQL 语句以使用 person.lastName 从 person.position 获取数据，并且我使用以下代码来提取这些数据，但没有运气：

```
public List<Person> findPosition(){
        Session session =
                HiberUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        List<Person> result = session.createQuery("select position from Person p where p.lastName= 'Anderson'").list();
        for(Person a : result) {
            Hibernate.initialize(a.getDepartmentList());
        }
        session.getTransaction().commit();
        return result;

    } 
```

在这就是它向我展示了这个例外：

```
Hibernate: select person0_.position as col_0_0_ from person person0_ where person0_.last_name='Anderson'
Exception in thread "main" java.lang.ClassCastException: java.lang.String cannot be cast to main.Person
    at main.StaffDAO.findPosition(StaffDAO.java:100)
    at main.Main.main(Main.java:37) 
```

您能帮我编写正确的 HQL 语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:04:01.070

```
List<Person> result = session.createQuery("select position from Person p where p.lastName= 'Anderson'").list(); 
```

您正在选择一个包含 VARCHAR(255) 但希望它以`List<Person>`. 那根本不计算。

你可以做

```
List<Person> result = session.createQuery("select p from Person p where p.lastName= 'Anderson'").list(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:05:46.277

好吧，您正在`position`查询中选择 a，并尝试将其放入 Person 列表中。相反，您应该`select p from Person p where p.lastName= 'Anderson'`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:10:30.333

从人 p 中选择人，其中 p.lastName='Anderson'

# maven - mvn integration-test 不会运行我的测试

> ID：16023707
> 
> 赞同：0
> 
> 时间：2013-04-15T19:55:32.840
> 
> 标签：maven, selenium, testng

我正在使用 Selenium、TestNG 和 Maven 进行自动化测试。当我在 cmd 中执行：mvn integration-test 时，maven 不会运行我的测试。我是 Maven 新手，我阅读了一些示例，但没有找到任何解决问题的方法。

这是我的 pom.xml：

```
<dependencies>
    <dependency>
      <groupId>org.testng</groupId>
      <artifactId>testng</artifactId>
      <classifier>jdk15</classifier>
      <version>5.11</version>
    </dependency>
    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-firefox-driver</artifactId>
        <version>2.31.0</version>
    </dependency>
  </dependencies>

    <build>
        <plugins>
            <plugin>
                 <groupId>org.apache.maven.plugins</groupId>
                 <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>selenium-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>pre-integration-test</phase>
                        <goals>
                            <goal>start-server</goal>
                        </goals>
                        <configuration>
                            <background>true</background>
                        </configuration>
                    </execution>
                    <execution>
                          <id>stop-selenium</id>
                          <phase>post-integration-test</phase>
                          <goals>
                              <goal>stop-server</goal>
                          </goals>
                      </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <include>**/MainPage*.java </include>                       
                </configuration>

                <executions>
                    <execution>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                        <configuration>
                            <skip>false</skip>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

</project> 
```

这是我的 MainPage 类：

```
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.testng.annotations.AfterClass;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.Test;
import static org.testng.Assert.*;

public class MainPage 
{
   static WebDriver driver;

   @BeforeClass
   public void setUp() {
   driver = new FirefoxDriver();
   }

   @Test
   public void OpenRegistrationPage(){
       //GIVEN
       openPage();
       //WHEN
       clickOnRegistration();
       //THEN
       checkIfIsDirected();

   }

   private void checkIfIsDirected() {

       String elementTitle = driver.findElement(By.xpath("//td[@id='center-  col']/div/div/table/tbody/tr/td/div")).getText();
       assertEquals(elementTitle, "Rejestracja");   

        }

   private void clickOnRegistration() {

       WebElement registrationLink = driver.findElement(By.cssSelector("span.icon-rejestracja"));
       registrationLink.click();

        }

   private void openPage() {
       driver.get("https://www.x-kom.pl");

        }

   @AfterClass
   public static void tearDown() {
    driver.close();
   }

} 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:03:37.890

首先是使用[maven-failsafe-plugin](http://maven.apache.org/surefire/maven-failsafe-plugin/plugin-info.html)而不是[maven-surefire-plugin](http://maven.apache.org/surefire/maven-surefire-plugin/)，因为 maven-surefire-plugin 用于单元测试，而 maven-failsafe-plugin 用于运行集成测试。此外，您需要将集成测试命名为

```
 **/IT*.java
 **/*IT.java
 **/*ITCase.java 
```

但是在您的情况下，您应该有一个单独的模块，其中包含要在您正在开发的 Web 应用程序上运行的集成测试。

# html - 为什么 Google 将徽标放在 ? google搜索结果页面左上角的logo： https://www.google.com/search?q=why+does+google+put+logos+in+tables 截屏： 问问题 问问题 2013-04-15T19:56:07.293 135 次 This question shows research effort; it is useful and clear 9 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. google搜索结果页面左上角的logo： https://www.google.com/search?q=why+does+google+put+logos+in+tables 截屏： 是否有一个原因？优化还是混淆？谷歌只是时髦吗？ 我最好的猜测：垂直对齐： #gbqlw { display: table-cell; height: 71px; padding: 0; padding-right: 16px; position: relative; vertical-align: middle; } 虽然在表格单元格之外垂直对齐内容并非不可能，但在 TD 中这样做是迄今为止最简单的，尤其是当您需要vertical-align: middle. html 4 3 回答 3 This answer is useful 4 我最好的猜测：垂直对齐： #gbqlw { display: table-cell; height: 71px; padding: 0; padding-right: 16px; position: relative; vertical-align: middle; } 虽然在表格单元格之外垂直对齐内容并非不可能，但在 TD 中这样做是迄今为止最简单的，尤其是当您需要vertical-align: middle. 于 2013-04-15T19:59:46.017 回答 This answer is useful 1 看看来源，谷歌的主要搜索网站打破了许多“规则”。不正确的语义元素使用，使用表格进行定位，省略不必要的关闭标签等，无论使用最少的字符。他们似乎采取了一种“不管怎样都行”的方法，例如，如果您在 SO 上提出建议，HTML 会让您投票失败。您可以并且应该使用 CSS 完成相同的徽标定位，但要考虑到他们有资源来维护它并确保浏览器合规性以及将页面大小保持为尽可能少的字节数。 于 2013-04-15T20:04:29.877 回答 This answer is useful -1 我认为这不是一个特殊的原因。我知道这听起来很奇怪，但我认为这可能是他们的模式。正如我所看到的，没有任何标记可以证明使用该表是合理的，而且我没有看到这些 DOM 节点的 css 中的特殊处理。 所以，我觉得没什么特别的。 对不起。 于 2013-04-15T20:05:12.397 回答 Related 1 apache2 - 是否可以让 JBoss 7 同时监听两个 AJP 端口，我应该如何通过 Apache 网络服务器连接到它？ 5 asp.net-mvc - 从 ASP.NET MVC 4 项目中的 WIF 授权中排除特定路径 4 php - PHP 中的属性 2 python - 使用 Python 的服务器-客户端推送通知 4 objective-c - iOS EXC_BAD_ACCESS error in class 1 c++ - 初始化结构的 std::vector 2 c# - 简单类型和字符串的 where 约束 3 jquery - Yii 先加载 jQuery 4 c++ - “结构类型变量名”作为声明有效吗？ 1 tomcat - 具有 JDBC 身份验证和 TOTP 的 CAS Server 3.51 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16023716
> 
> 赞同：9
> 
> 时间：
> 
> 标签：html

google搜索结果页面左上角的logo：

[https://www.google.com/search?q=why+does+google+put+logos+in+tables](https://www.google.com/search?q=why+does+google+put+logos+in+tables)

截屏：

![搜索结果页面上的 Google 徽标](https://i.stack.imgur.com/Kw5Ya.png)

是否有一个原因？优化还是混淆？谷歌只是时髦吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T19:59:46.017

我最好的猜测：垂直对齐：

```
#gbqlw {
  display: table-cell;
  height: 71px;
  padding: 0;
  padding-right: 16px;
  position: relative;
  vertical-align: middle;
} 
```

虽然在表格单元格之外垂直对齐内容并非不可能，但在 TD 中这样做是迄今为止最简单的，尤其是当您需要`vertical-align: middle`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:04:29.877

看看来源，谷歌的主要搜索网站打破了许多“规则”。不正确的语义元素使用，使用表格进行定位，省略不必要的关闭标签等，无论使用最少的字符。他们似乎采取了一种“不管怎样都行”的方法，例如，如果您在 SO 上提出建议，HTML 会让您投票失败。您可以并且应该使用 CSS 完成相同的徽标定位，但要考虑到他们有资源来维护它并确保浏览器合规性以及将页面大小保持为尽可能少的字节数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T20:05:12.397

我认为这不是一个特殊的原因。我知道这听起来很奇怪，但我认为这可能是他们的模式。正如我所看到的，没有任何标记可以证明使用该表是合理的，而且我没有看到这些 DOM 节点的 css 中的特殊处理。

所以，我觉得没什么特别的。

对不起。

# java - 如何选择要保存 Java 文档的目录？

> ID：16023721
> 
> 赞同：0
> 
> 时间：2013-04-15T19:56:34.983
> 
> 标签：java, maven, jenkins, javadoc

我正在使用 jenkins，我使用 maven 创建了一个项目，所以当我在 jenkins 中构建项目时，我创建的文档只是为了实现以下目标：

javadoc:javadoc

但是詹金斯将所有这些文档保存在项目内部的某个文件夹中，所以我想将所有这些文档保存在特定文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:13:15.773

实现此目的的一种方法是为此修改插件配置。reportOutputDirectory 和 destDir 是您可能想要查看的两个配置。

看看 Maven 的[文档](http://maven.apache.org/plugins/maven-javadoc-plugin/examples/output-configuration.html)

# java - 用两个词读命令

> ID：16023722
> 
> 赞同：0
> 
> 时间：2013-04-15T19:56:36.120
> 
> 标签：java, command-line, input, java.util.scanner

所以我在java中的eclipse上做一个程序，我必须从用户那里读取命令（输入），

```
e.g.: ADD <email> <phone> 
```

这已经完成并且有效，我的问题是当输入有多个单词时：

```
e.g.: LIST USERS <email> <phone> 
```

我有一个while循环，while（！comm.equals（Commands.EXIT.getMsg（）））然后是一堆ifs和elses（我不能使用开关），我有这个方法

```
private static String getCommand(Scanner in) {
    String input = "";
    input = in.next().toUpperCase();
    return input;
    } 
```

所以你可以看到我的程序只读取第一个单词并将其作为命令传递。所有命令都是常量，只有 3 个带有单独单词的命令。

* * *

我能做些什么来阅读第二个单词并传递它具有命令的一部分？我在哪里做呢？在while循环或我的方法getCommand上？

提前谢谢你=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:05:02.880

您需要使用while循环：

```
List<String> input = new LinkedList<String>();
while(in.hasNext()){
   String param = in.next().toUpperCase();
   input.add(param);
} 
```

有关其他信息，请参阅[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

# jquery - JQuery同位素插件神秘错误

> ID：16023723
> 
> 赞同：1
> 
> 时间：2013-04-15T19:56:37.697
> 
> 标签：jquery, wordpress, jquery-plugins, jquery-isotope

我目前正在使用教程来学习如何在我正在构建的 wordpress 主题中实现一个名为“Isotope”的 JQuery 插件。这是我正在使用的教程的链接：http: [//www.designlunatic.com/2011/08/isotope-tutorial/#wpcf7-f780-w1-o1](http://www.designlunatic.com/2011/08/isotope-tutorial/#wpcf7-f780-w1-o1)

我在functions.php 文件中引用了JQuery 库，并使用wp_enqueue_script（和wp_register_script）函数将它和isotope.js 文件（我也注册了这个文件）排入队列。我知道这些文件被链接到，因为当我查看源代码并单击链接时，我没有收到错误消息。这些文件出现并且它们似乎通过 wp_head 函数正确链接。

我遇到的问题是使用同位素的脚本在控制台中给了我某种错误。

我尝试了几种不同的方法，但错误通常是：

> “未捕获的 TypeError：对象 [object Object] 的属性 '$' 不是函数”

该错误是指文档头部中包含的以下脚本：

```
<script type="text/javascript">
        $(document).ready(function() {
            alert('called');
            var $container = $('#content');
            $container.isotope({
                filter: '*',
                animationOptions: {
                    duration: 750,
                    easing: 'linear',
                    queue: false
                }
            });

            $('#nav a').click(function() {
                var selector = $(this).attr('data-filter');
                $container.isotope({
                    filter: selector,
                    animationOptions: {
                        duration: 750,
                        easing: 'linear',
                        queue: false
                    }
                });
                return false;
            });

        });
    </script> 
```

我尝试将它作为一个单独的脚本加载，并依赖于 JQuery 来注册/排队它，这给了我基本相同的错误。我还尝试将 '$' 替换为 'JQuery' 并将 '$' 放在函数的参数中。当我切换时，我收到此错误：

> “未捕获的 TypeError：对象 [object Object] 的属性 'JQuery' 不是函数”

我在这里做错了什么？我已经尽可能地按照教程说明进行操作。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:07:30.333

jQuery 中的**J**不是大写的。它的小写字母。因此，如果将其更改为`jQuery(document).ready(function($){});`，它应该可以工作。

如果您在代码中的某处启用了[jQuery noConflict](http://api.jquery.com/jQuery.noConflict/)模式，则会发生错误。

WordPress 附带的 jQuery 库设置为该`noConflict()`模式。有关详细信息，请参阅[wp_enqueue_script的法典。](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_Wrappers)

干杯! :)

# php - 通过 PHP 输出 EPS

> ID：16023725
> 
> 赞同：1
> 
> 时间：2013-04-15T19:56:46.017
> 
> 标签：php, ajax, image, eps

好的，这就是问题所在。我需要显示可以是许多不同类型的图像列表。出于安全原因，系统管理员决定将所有这些图像保留在 webroot 之外。我正在使用一些有趣的 php 技巧来获取我的图像，但我无法显示 eps 文件，而且我的 tiff 也有问题，但我更专注于 EPS。哦，顺便说一句，我们使用的是 MVC，所以 url 是我们调用函数和传递参数的方式。

这就是我通过数据库中的图像路径循环显示图像的方式

```
foreach($paths as $path){
    // $path = '/0/path/1/to/2/image/3/filename.eps' 
    <img src="/path/to/script/0/path/1/to/2/image/3/filename.eps" />
} 
```

在该脚本中，我执行以下操作：

```
$count = 0;
// BUILD SRC PATH FROM PASSED ARGUMENTS
while($this->_getParam($count) && $count < 30 ){
    $path[] = urldecode($this->_getParam($count));
    $count++;
}
$path = '/'.urldecode(implode('/',$path));

$srcESC = escapeshellarg($path);
$mime = exec('file -bi '.$srcESC);

if (!file_exists($path)) return;
switch($mime){
    case 'image/x-MS-bmp':
        header('Content-Type: image/x-ms-bmp');
        break;
    case 'application/postscript':
        header('Content-Type: application/postscript');
        break;
    case 'image/gif':
        header('Content-Type: image/gif');
        break;
    case 'image/x-ico':
        header('Content-Type: image/x-icon');
        break;
    case 'image/jpeg':
        header('Content-Type: image/jpeg');
        break;
    case 'application/pdf':
        header('Content-Type: application/pdf');
        break;
    case 'image/png':
        header('Content-Type: image/x-png');
        break;
    case 'image/svg+xml':
    case 'image/svg-xml':
        header('Content-Type: image/svg+xml');
        break;
    case 'image/x-tiff':
    case 'image/tiff':
        header('Content-Type: image/tiff');
        break;
    case 'image/x-photoshop':
    case 'application/x-quark-xpress-3':
    case 'application/pdf':
    case 'application/octet_stream':
    header('Content-Description: File Transfer');
    header('Content-Disposition: attachment; filename='.basename($path));
    header('Content-type: application/octet');
        header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . filesize($path));
        break;
    }
    readfile($path); 
```

EPS 应该在应用程序/postscript Content_Type 上获取，这就是我的标题通过 chrome 检查返回的内容，但它只是不会拉取文件的视觉效果。

有任何想法吗？

# ios - iOS - PLIST - 从 plist 中访问其他 plist 值

> ID：16023731
> 
> 赞同：2
> 
> 时间：2013-04-15T19:57:00.277
> 
> 标签：ios, plist

我的应用程序中有一个 PLIST 文件，其中包含各种配置数据。一些数据是用于访问服务器的 URL。该服务器托管我们代码的几个不同版本的 JSON 文件。我想要做的是在具有版本的 PLIST 文件中具有一个值，然后能够从其他值中引用它。因此 plist 中的 url 值可能是[https://www.company.com/](https://www.company.com/) ${VERSION}/jsonfile.svc （其中 ${VERSION} 是同一个 plist 文件中的不同键）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:08:15.033

正如 bshirley 提到的，没有什么是自动的，但 Objective-C 可以帮助你。下面是一个`NSDictionary`名为的类别的简单实现，`VariableExpansion`它演示了如何实现（请注意，这没有经过全面测试，但主要用于演示您可以使其自动化的方式。另外，`expandedObjectForKey`假设您正在处理`NSString`s 所以您可能需要稍微调整一下。

```
// In file NSDictionary+VariableExpansion.h
@interface NSDictionary (VariableExpansion)

- (NSString*)expandedObjectForKey:(id)aKey;

@end

// In file NSDictionary+VariableExpansion.m
#import "NSDictionary+VariableExpansion.h"

@implementation NSDictionary (VariableExpansion)

- (NSString*)expandedObjectForKey:(id)aKey
{
    NSString* value = [self objectForKey:aKey];

    NSError *error = NULL;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\$\\{([^\\{\\}]*)\\}"
                  options:NSRegularExpressionCaseInsensitive
                  error:&error];

    __block NSMutableString *mutableValue = [value mutableCopy];
    __block int offset = 0;

    [regex enumerateMatchesInString:value options:0
                  range:NSMakeRange(0, [value length]) usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop)
    {
    NSRange matchRange = [match range];
    matchRange.location += offset;

    NSString* varName = [regex replacementStringForResult:match
                           inString:mutableValue
                             offset:offset
                           template:@"$1"];

    NSString *varValue = [self objectForKey:varName];
    if (varValue)
    {
        [mutableValue replaceCharactersInRange:matchRange
                    withString:varValue];
        // update the offset based on the replacement
        offset += ([varValue length] - matchRange.length);
    }
    }];

    return mutableValue;
}

@end

// To test the code, first import this category:
#import "NSDictionary+VariableExpansion.h"

// Sample NSDictionary.
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
        @"http://${HOST}/${VERSION}/bla", @"URL",
        @"1.0", @"VERSION",
        @"example.com", @"HOST", nil];

// And the new method that expands any variables (if it finds them in the PLIST as well).
NSLog(@"%@", [dict expandedObjectForKey:@"URL"]); 
```

最后一步的结果`http://example.com/1.0/bla`表明您可以在单个值中使用多个变量。如果未找到变量，则不会在原始字符串中触及它。

由于您使用 PLIST 作为源，因此请`dictionaryWithContentsOfFile`使用

```
 NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:plistPath]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:15:53.280

你试过什么吗？这很简单，按您所说的进行转换，具体使用方法：`stringByReplacingOccurrencesOfString:`.

# php - 使用 MySQL 和 PHP 计算总数而不重复

> ID：16023738
> 
> 赞同：2
> 
> 时间：2013-04-15T19:57:31.380
> 
> 标签：php, mysql, count

我正在尝试使用 PHP 查询 MySQL 数据库以计算不重复的条目总数。

```
EXAMPLE
N111US
N111US
N123US
N345US
A6-EWD
A7-EEE
B-18701
N123US
N345AA 
```

我希望获得唯一条目的总数，但我无法开始查看从 SQL 查询开始的位置，即 Total Returned: 7

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-15T20:04:55.697

在这个`DISTINCT`查询中：

```
SELECT COUNT(DISTINCT `column`) AS `cnt` FROM `table`; 
```

将消除重复。

然后，从 php 获取`cnt`列值，就像您对任何其他常规查询所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:13:24.250

我喜欢上面发布的 SQL 答案。它们是高效的，并且在查询本身上执行。但是，如果您已经将数据库中的项目读入一个数组，您可以使用 PHP 的`array_unique`--then 将该结果计数到一个数组中，使用`count`. 例如：

```
<?php
$input = array("a" => "dog", "cat", "b" => "cat", "dog", "mouse");
$result = array_unique($input);
$uniqueCount = count($result);
?> 
```

希望这可以帮助。:)

# javascript - 使用 jquery 切换只读和禁用

> ID：16023739
> 
> 赞同：0
> 
> 时间：2013-04-15T19:57:34.223
> 
> 标签：javascript, jquery, input, readonly

我已经完成了大部分工作。我正在尝试根据选择的单选按钮切换显示的 div，这很有效。此外，我根据其可见性切换隐藏输入（名称=martygeocoderlatlngonly）的禁用属性，也可以。

但是，我正在努力将最初可见的输入（名称=martygeocoderlatlngonly）从只读切换到禁用，然后再切换回来，因为它被带入和失焦。

HTML：

```
 <p>Modify:
    <label>
        <input id="rdb1" type="radio" name="toggler" value="1" checked />Location</label>
    <label>
        <input id="rdb2" type="radio" name="toggler" value="2" />Lat/Lng</label>
</p>
<div id="blk-1" class="toHide" style="">
    <p>
        <label for="martygeocoderaddress">Address</label>
        <br />
        <input class="widefat" type="text" name="martygeocoderaddress" id="martygeocoderaddress" value="" size="30" />
    </p>
    <p>
        <label for="martygeocoderlatlng">Lat/Lng</label>
        <br />
        <input class="widefat" type="text" name="martygeocoderlatlng" id="martygeocoderlatlng" value="" size="30" readonly />
    </p>
</div>
<div id="blk-2" class="toHide" style="display:none;">
    <p>
        <label for="martygeocoderlatlng">Lat/Lng</label>
        <br />
        <input class="widefat" type="text" name="martygeocoderlatlngonly" id="martygeocoderlatlng" value="" size="30" disabled/>
    </p>
</div> 
```

查询：

```
// Toggle display of fields
$("[name=toggler]").click(function () {
    //$('.toHide').hide();
    $("#blk-" + $(this).val()).each(function () {
        //$(this).show();
    });
    $(":input[name='martygeocoderlatlngonly']").each(function () {
        this.disabled = !this.disabled;
    });
    $(":input[name='martygeocoderlatlng']").each(function () {
        if (this.readOnly = true) {
            this.readOnly = false;
            this.disabled = true;
        } else {
            this.readOnly = true;
            this.disabled = false;
        }
    });
}); 
```

我曾经使用 php 进行开发，但从未接触过 oop，所以 jquery 和 javascript 让我有点抓狂。

#

解决方案：

```
$("[name=toggler]").click(function () {
    $('.toHide').hide();
    $("#blk-" + $(this).val()).each(function () {
        $(this).show();
    });
    $(":input[name='martygeocoderlatlngonly']").each(function () {
        this.disabled = !this.disabled;
    });
    $(":input[name='martygeocoderlatlng']").each(function () {
        this.readOnly = !this.readOnly;
        this.disabled = !this.disabled;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:59:06.763

```
 if (this.readOnly = true) { 
```

应该

```
 if (this.readOnly == true) { 
```

常见的错误 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:59:08.683

`this.readOnly = true`设置`this.readOnly`为`true`。你想比较它，所以使用两个等号：

```
if (this.readOnly == true) 
```

或者完全省略右侧：

```
if (this.readOnly) 
```

# jquery - FireFox 不发送 CORS 请求（使用 jQuery）

> ID：16023741
> 
> 赞同：4
> 
> 时间：2013-04-15T19:57:39.937
> 
> 标签：jquery, ajax, firefox, cors

我正在尝试发出几个 CORS 请求（PUT、GET、POST）。这些请求在 Chrome 和 Safari 中运行良好。选项被拒绝，但其他请求通过。

下面是我的搜索功能。Chrome 和 Safari 使用返回的数据调用回调：

```
function Search (q, fn,){
console.log(q)
$.ajax({
    url: sumeURL+q,
    dataType: 'json',
    headers: headers
}).done(function(data){
    fn(data);
});
} 
```

FireFox 正在记录查询字符串，所以我知道它正在读取 AJAX 调用（我删除了我之前的问题，因为我认为 FireFox 在到达 AJAX 之前可能会窒息 - 它没有）。

我正在使用 FireBug，并且该`Net`选项卡未显示来自此搜索功能的 GET 请求的选项。

我看过这个[SO question](https://stackoverflow.com/questions/2411039/firefox-cross-domain-request/2411972)，但我需要为生产而不是开发这样做，所以浏览器插件不是一个好的选择。

什么条件会使 FireFox 拒绝发送请求，但对 Chrome 或 Safari 无关紧要？

如果您需要我从服务器 LMK 发布访问控制数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:56:32.067

您的答案可能在此回复中：[为什么经过身份验证的 CORS 请求的预检 OPTIONS 请求在 Chrome 中有效，但在 Firefox 中无效？](https://stackoverflow.com/questions/15734031/why-does-the-preflight-options-request-of-an-authenticated-cors-request-work-in)

如果飞行前请求响应是 401，Firefox 将停止发送请求，而 Webkit 浏览器将继续处理实际请求（GET、POST 等）

编辑：但话又说回来，你甚至没有看到正在发送的 OPTIONS 请求......不过，上面提到的帖子可能很有用。

# portable-class-library - 有什么方法可以在可移植类库项目上实现 IValidatableObject 吗？

> ID：16023742
> 
> 赞同：7
> 
> 时间：2013-04-15T19:57:50.410
> 
> 标签：portable-class-library

我想问一下我对可移植类库的疑问。我正在开发一个 DAL 层，我正在为我的业务对象使用 Portable 项目，该项目的目标是 .Net Framework 4.03 及更高版本，`SilverLight 4`以及更高版本的 Windows Store Apps 和 .Net。

我想`IValidatableObject`在我的每个业务对象上实现接口，但即使`System.ComponentModel.DataAnnotations`该项目所针对的框架可用，我也无法访问`IValidatableObject`接口，在 .net 可移植框架上不可用，`MetadataType`属性也不存在. 有什么解决方案可以实现这种方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T20:40:13.833

这可能不是一个简单的解决方案。您可以在具有相同功能的可移植类库中创建自己的接口。但是，这将是一个不同的接口，因此使用 DataAnnotations 的其他框架（我认为是 ASP.NET MVC 和实体框架）不会使用您的版本。

为了解决这个问题，您可以创建一个 PCL，其接口名称和 API 与不同平台上存在的完全相同。然后使用完全相同的程序集标识（名称、版本和强名称密钥）为 .NET 4.0.3、SL4 和 Windows Store 创建类库，并在这些程序集中放置一个`[assembly:TypeForwardedToAttribute(typeof(IValidatableObject))]`属性。

然后，您的 PCL 可以通过接口引用 PCL 库，并且在使用 PCL 的任何应用程序中，引用该平台的类型转发程序集，这会将对该接口的 PCL 版本的引用重定向到平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-11T20:51:23.980

这是[丹尼尔](https://stackoverflow.com/users/1509/daniel-plaisted)描述的解决方案的更长描述：http: [//log.paulbetts.org/the-bait-and-switch-pcl-trick/](http://log.paulbetts.org/the-bait-and-switch-pcl-trick/)

# java - 在 XYSeries 中将重复 X 值的 Y 值相加

> ID：16023743
> 
> 赞同：0
> 
> 时间：2013-04-15T19:57:57.237
> 
> 标签：java, 2d, jfreechart

```
public XYSeriesCollection CreateDataset(int startColumn, int endColumn, int startRow, int endRow) {

    XYSeriesCollection dataset = new XYSeriesCollection();
    XYSeries series = new XYSeries("Test");

    for (int j = startRow; j < endRow; j++) {
            String curVal = m_Data[j][endColumn];
            if (isInt(curVal)) {
                XYDataItem item = series.addOrUpdate(Integer.parseInt(m_Data[j][startColumn]), Integer.parseInt(curVal));
                if (item != null) {
                    int temp = item.getY().intValue() + Integer.parseInt(curVal);
                    int temp1 = series.indexOf(Integer.parseInt(m_Data[j][startColumn]));
                    /*Integer temp2 = new Integer(Integer.parseInt(m_Data[j][startColumn]));
                    series.update((Number) temp2, temp);*/
                    series.updateByIndex(temp1, temp);
                }
            } /*else if (isDouble(curVal)) {
                series.add(Integer.parseInt(m_Data[j][startColumn]), Double.parseDouble(curVal));
            } else {
                series.add(Integer.parseInt(m_Data[j][startColumn]), 0);
            }*/

    }
        dataset.addSeries(series);

    return dataset;

} 
```

m_Data 中包含一个已格式化为 String[Rows][Columns] 的 CSV 文件。我要做的是制作一个用于 XYBarchart 的数据集，其中 startColumn 指示哪一列，for 循环用于遍历该列的行以获取 X 轴的值（键？）。Y 的值是从同一行的 endColumn 检索的。

然而，在 m_Data 数组中是重复值，因此当使用具有重复值的列作为 X 轴时，我需要将相应的 Y 值相加。但是我实现的方法似乎不起作用，而是将第一个遇到的值添加到系列中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:22:20.007

您将需要子类化`XYSeries`并替换其中一个`XYDataItem addOrUpdate(Number x, Number y)`或`public void add(XYDataItem item, boolean notify)`以便添加附加值，而不是覆盖现有的 Y 值。

或者遍历您的数据集两次以聚合重复项，然后将其添加到 `XYSeries`

# database - 表 postgreSQL 内的索引

> ID：16023745
> 
> 赞同：0
> 
> 时间：2013-04-15T19:58:04.690
> 
> 标签：database, postgresql

我正在从 mySQL 转移到 postgreSQL，想知道如何在 postgreSQL 表中添加索引

```
CREATE TABLE IF NOT EXISTS  game_history
(
 id SERIAL,
 PRIMARY KEY(id),
 INDEX fk_game_history_user_idx (game_id ASC) ,
 CONSTRAINT fk_game_history_user
 FOREIGN KEY (game_id )
 REFERENCES mydb.game (id)
 ON DELETE NO ACTION
 ON UPDATE NO ACTION
) 
```

从

```
 INDEX fk_game_history_user_idx (game_id ASC) ,
 CONSTRAINT fk_game_history_user
 FOREIGN KEY (game_id )
 REFERENCES mydb.game (id)
 ON DELETE NO ACTION
 ON UPDATE NO ACTION
) 
```

我不确定这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:19:40.393

您需要一个单独的`create index`语句，并且需要定义一个`game_id`列：

```
CREATE TABLE IF NOT EXISTS  game_history
(
 id      SERIAL,
 game_id integer not null, -- you need to define the column
                           -- otherwise you can't have a foreign key
 PRIMARY KEY(id),
 CONSTRAINT fk_game_history_user
   FOREIGN KEY (game_id)
   REFERENCES game (id)
   ON DELETE NO ACTION
   ON UPDATE NO ACTION
);

CREATE INDEX fk_game_history_user_idx
  ON game_history (game_id ASC); 
```

`create table`有关该语句的更多详细信息，请参见手册： [http ://www.postgresql.org/docs/current/static/sql-createtable.html](http://www.postgresql.org/docs/current/static/sql-createtable.html)

有关该`create index`声明的更多详细信息：[http ://www.postgresql.org/docs/current/static/sql-createindex.html](http://www.postgresql.org/docs/current/static/sql-createindex.html)

# ajax - 更改 DropdownList 时使用 AJAX 调用的 Kendo UI 网格编辑模板

> ID：16023757
> 
> 赞同：0
> 
> 时间：2013-04-15T19:58:42.593
> 
> 标签：ajax, asp.net-mvc-3, kendo-ui

我有一个带有 Kendo UI Grid 的 MVC3 Webapp。我正在使用弹出模板编辑功能。我在模板视图中有一个下拉列表。

一切都很好......现在我添加了一个`Instructions`div 和一个`Description`div，我想用它来为用户提供说明，以及所选项目的描述。这些说明取决于下拉菜单的选定值。在下拉列表中选择一个项目后，我需要对控制器进行 ajax 调用以获取选择的说明和描述。我已经尝试了很多事情，但似乎无法让它甚至触发对控制器的调用。

任何帮助，将不胜感激。谢谢，墨菲

这是网格代码：

```
@(Html.Kendo()
    .Grid<VW40.Web.Models.CompanyDefaultDataItemViewModel>()
    .Name("Grid")
    .Columns(c =>
    {
        c.ForeignKey(p => p.Type, (System.Collections.IEnumerable)@ViewBag.CompanyDefaultDataItemTypes, "CompanyDefaultDataItemTypeId", "Name").Title("Default Data Type").Width(200);
        c.Bound(p => p.Data);
        c.Bound(p => p.Instructions);
        c.Bound(p => p.Description);
        c.Command(command => { command.Edit(); command.Destroy(); });
    })
    .ToolBar(t => t.Create())
    .Editable(editable => editable.Mode(GridEditMode.PopUp).TemplateName("CompanyDefaultDataItem").Window(w => w.Title("Add/Edit Company Default Data Item").HtmlAttributes(new { @style = "width:100px;" })))
    .DataSource(ds => ds
        .Ajax()
        .Batch(false)
        .ServerOperation(false)
        .Events(events => events.Error("error"))
        .Model(m => m.Id(p => p.CompanyDefaultDataItemId))
        .Read(read => read.Action("CompanyDefaultDataItems_Read", "Company", new { Id = @ViewBag.CompanyId }))
        .Update(update => update.Action("CompanyDefaultDataItem_Update", "Company"))
        .Create(update => update.Action("CompanyDefaultDataItem_Add", "Company", new { Id = ViewBag.CompanyId }))
        .Destroy(update => update.Action("CompanyDefaultDataItem_Delete", "Company"))
    )
) 
```

这是添加/编辑模板和我尝试在脚本中做我想做的事情：

```
@{
    Layout = null;
}

@model VW40.Web.Models.CompanyDefaultDataItemViewModel

@Html.HiddenFor(model => model.CompanyId)
<br />
<div class="editor-label">
    @Html.LabelFor(model => model.Type)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.Type, new { @id = "typeDropdown_Id" })
    @Html.ValidationMessageFor(model => model.Type)
</div>
<br />

<div class="editor-label">
    @Html.LabelFor(model => model.Data)
</div>
<div class="editor-field">
    @Html.TextBoxFor(model => model.Data, new { style = "width:250px" })
    @Html.ValidationMessageFor(model => model.Data)
</div>
<br />

<div style="padding-left:50px">Instructions:</div>
<div id="instructions" style="width:200px">
    @Model.Instructions
</div>
<br />

<div style="padding-left:50px">Description:</div>
<div id="description" style="width:200px">
    @Model.Description
</div>

    <script type="text/javascript">
        $('#typeDropdown_Id').click(function () {
            var typeId = $('#typeDropdown_Id option:slected').val();
            alert("selected type = " + typeId);
            $.getJSON("/Company/GetJsonCompanyDefaultDataItemTypeInstructionsAndDescription/" + typeId, function (data) {
                $('#instructions').val(data.Instructions);
                $('#description').val(data.Description);
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:05:29.473

这是我在模板中所做的：

```
@Html.Kendo().DropDownListFor(model => model.Type).BindTo(new SelectList(new List<SelectListItem> { new SelectListItem { Value = "0", Text = "Type1" }, new SelectListItem { Value = "1", Text = "Type 2" } }, "Value", "Text")).Events(x => { x.Change("onTypeChange"); })

<script type="text/javascript">
        function onTypeChange(args) {
            var typeId = $('#type option:slected').val();
            alert("selected type = " + typeId);
            $.getJSON("/Company/GetJsonCompanyDefaultDataItemTypeInstructionsAndDescription/" + typeId, function (data) {
                $('#instructions').val(data.Instructions);
                $('#description').val(data.Description);
            });
        };
    </script> 
```

看看有没有帮助（抱歉耽搁了）

# c - 为数组座位赋值很慢

> ID：16023758
> 
> 赞同：1
> 
> 时间：2013-04-15T19:58:54.880
> 
> 标签：c, performance, pointers

我正在使用时间差异学习来训练计算机玩围棋。我注意到我的代理在大约 20 分钟内应该能够玩 100.000 场比赛时玩 1 场比赛（比如 10 秒）真的很慢。在缩小问题范围后，我发现该行没有。以下代码中的5是麻烦制造者。代码取自一个更大的函数。

```
int i;
 double td = newValue - oldValueWhite;
 for(i = 0; i<FEATURES_SIZE; i++)
 {
     Value[i] =Value[i] + alpha*(td)*((double)phiOldWhite[i]);
 } 
```

但是，以下代码运行得非常顺利：

```
 double tmp:
 int i;
 double td = newValue - oldValueWhite;
 for(i = 0; i<FEATURES_SIZE; i++)
 {
     tmp =Value[i] + alpha*(td)*((double)phiOldWhite[i]);
 } 
```

我不确定是编译器忽略了计算还是将新值分配给 Value[i] 真的很慢。值得一提的是，Value 被作为指向函数的指针。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:00:06.027

如果`tmp`在你的循环之后没有使用`for`，你的编译器可能会简单地优化 `for`循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:03:39.653

如果您使用的是 C99，您可以尝试以下方法（或使用 gcc 扩展`__restrict__`）：

```
int i;
double restrict *Value = ...;        // tell compiler Value and phiOldWhite are 
double restrict *phiOldWhite = ...;  // different memory areas

double td = (newValue - oldValueWhite) * td;
for (i = 0; i < FEATURES_SIZE; i++)
{
    Value[i] += td * phiOldWhite[i];
} 
```

我使用`double`了 phiOldWhite 的类型，但你可以使用你的类型。

# entity-framework - 无法让我的实体尊重域的参照完整性

> ID：16023759
> 
> 赞同：0
> 
> 时间：2013-04-15T19:58:57.427
> 
> 标签：entity-framework, ef-code-first, entity-framework-4.1, referential-integrity

**背景：**我正在解析一个 XML 文件（图书签名事件信息），然后尝试通过 Entity Framework Code First（在 Entity Framework Power Tools Beta 3 的帮助下）基于 Parsed 数据创建数据库记录。

对解析逻辑进行排序后，我有以下代码用于将解析后的数据存储到数据库中：

```
using (var context = new BSContext())
{
    foreach (var e in events)
    {
        try
        {                    
            // Create the Author Entity
            var AuthorEntity = parser.getAuthorByName(e.Author);
            if (AuthorEntity == null)
            {
                AuthorEntity = new Author()
                {
                    Name = e.Author
                };
                context.Authors.Add(AuthorEntity);
                context.SaveChanges();
            }                        

            // Create the Location Entity
            var LocationEntity = parser.getLocationByNameAddressAndPostCode(e.Location.Name, e.Location.Address, e.Location.PostCode);
            if (LocationEntity == null)
            {
                LocationEntity = new Location()
                {
                    Name = e.Location.Name,
                    Address = e.Location.Address,
                    City = e.Location.City,
                    County = e.Location.County,
                    PostCode = e.Location.PostCode,
                    Telephone = e.Location.Telephone
                };
                context.Locations.Add(LocationEntity);
                context.SaveChanges();
            }                        

            // Create the Book Entity
            var BookEntity = parser.getBookByName(e.Book.Name);
            if(BookEntity == null)
            {
                BookEntity = new Book()
                {
                    Name = e.Book.Name,
                    BookImgUrl = e.Book.BookImgUrl
                };
                context.Books.Add(BookEntity);
                context.SaveChanges();
            }

            // Create the Event Entity
            string dtObjFormat = "dd MMM yyyy HH:mm";
            DateTime dt;
            var EventEntity = new Event()
            {
                Author = AuthorEntity,
                Book = BookEntity,
                Info = e.Info,
                Start = DateTime.TryParseExact(e.Date + " " + e.Time, dtObjFormat, CultureInfo.InvariantCulture, DateTimeStyles.None, out dt) ? dt : new DateTime(),
                Location = LocationEntity
            };
            context.Events.Add(EventEntity);
            context.SaveChanges();
        }
        catch
        {
            Console.WriteLine("Something went wrong!");
        }
    }
    Console.WriteLine("Looped through all Events");
} 
```

上面的代码尝试创建实体并将它们保存到数据库中。并且当需要时，重新使用保存的实体。

例如，在我的 XML 文件中，*一个作者出现了两次，但我不想为该作者创建两条记录*，因为我已经在前一个循环中为同一作者创建了一条记录。尽管在我看来我有代码可以解决这个问题（见上文），但由于某种原因，它仍然会创建多个作者记录。书籍也有同样的问题。

该`getAuthorByName(String authorName)`方法具有以下代码：

```
/// <summary>
/// A method to get an Author Entity by name. If no Author exists, then
/// NULL is returned. If two authors exist with the exact same name,
/// then the first encountered is returned.
/// </summary>
/// <param name="authorName">The name of the Author.</param>
/// <returns>The Author Entity</returns>
public Author getAuthorByName(String authorName)
{
    using (var context = new BSContext())
    {
        return context.Authors.FirstOrDefault(x => x.Name == authorName);
    }
} 
```

另外两种方法`getBookByName(String bookName)`和`getLocationByNameAddressAndPostCode(String lName, String lAddress, String lPostCode)`上面的方法都有类似的逻辑。

**问题：**停止数据库中实体 Book 和 Author 的记录重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:27:37.970

您应该在这里注意的是，您使用了 2 个活动的 BSContext 对象。实体跟踪分别与这些上下文中的每一个一起发生。Aka Author 将居住在一个中，而不是两者中，除非您在两者中查询它。

完成 getAuthorByName 方法后，作者实体将与任何实体上下文分离。您需要做的是将此实体重新附加到外部上下文（也就是最上面的代码示例中的那个）。如果你不这样做，就像上面的代码一样，BSContext 不知道它是一个现有的实体，并认为它是一个新的实体。导致新的作者被插入到数据库中。

或者你可以尝试这样做。

```
/// <summary>
/// A method to get an Author Entity by name. If no Author exists, then
/// NULL is returned. If two authors exist with the exact same name,
/// then the first encountered is returned.
/// </summary>
/// <param name="authorName">The name of the Author.</param>
/// <returns>The Author Entity</returns>
public Author getAuthorByName(BSContext context, String authorName)
{
        return context.Authors.FirstOrDefault(x => x.Name == authorName);
} 
```

然后像这样调用解析器

```
var AuthorEntity = parser.getAuthorByName(context, e.Author); 
```

# php - php：会话数据丢失

> ID：16023760
> 
> 赞同：0
> 
> 时间：2013-04-15T19:59:06.113
> 
> 标签：php, api, magento, session, session-variables

我在 API 调用期间使用 php Session 在服务器上存储值。

这里的问题是，在我的本地服务器上工作正常，而在实时服务器上，会话中没有存储任何内容。

这是工作流程，基本上我有一个调用 Magento API 的独立脚本：

`[Script calling API ] -> [Magento Server]`

在 Magento 方面：

1.  API被调用
2.  API 在会话中设置一些值
3.  观察者试图读取这些值

奇怪的是，如果我在本地 Magento 服务器（DEV 的副本）上运行我的 API 调用，调用 Magento DEV 服务器时一切正常，会话变量为空。

这就是我设置会话值的方式：

```
Mage::getSingleton('admin/session')->setApiQuoteId($quoteId); 
```

但是我很确定代码部分没问题（因为它在这里工作正常）我的疑问是：

1.  我可以在不使用浏览器的情况下使用会话，而是使用脚本/API 调用来访问服务器吗？
2.  任何服务器设置都会破坏上述功能？

本地服务器：PHP - 5.4.6

开发服务器：PHP - 5.2.17

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:34:43.103

会话由 cookie 标识。如果您的 api 无法保存 cookie 并每次都发送它，那么您每次都会丢失会话变量，因为将分配一个新会话。

# jquery - jQuery 动画跳跃

> ID：16023762
> 
> 赞同：0
> 
> 时间：2013-04-15T19:59:07.887
> 
> 标签：jquery

我经常遇到这个问题，最后出现动画跳跃或口吃。有一个通用的解决方法吗？

这是动画的动作，结尾有口吃，[http://jsfiddle.net/MqVcb/](http://jsfiddle.net/MqVcb/)。

单击菜单中的“向下滑动项目”链接以查看口吃。

这是jQuery代码，

```
var menu_ul = $('.left-sidebar-nav > li > ul'),
    menu_a  = $('.left-sidebar-nav > li > a');

menu_ul.hide();

menu_a.click(function(e) {
    e.preventDefault();

    if(!$(this).hasClass('active')) {
        menu_a.removeClass('active');
        menu_ul.filter(':visible').slideUp('normal');
        $(this).addClass('active').next().stop(true,true).slideDown('normal');
    } else {
        $(this).removeClass('active');
        $(this).next().stop(true,true).slideUp('normal');
    }

}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:02:20.310

的CSS

```
.left-sidebar-nav li {
    margin-bottom: 8px;
} 
```

是什么搞砸了。

删除它，您将看不到效果。

[小提琴](http://jsfiddle.net/MqVcb/1/)

要维护`margin`，只需使用`margin-top: 10px`

这是新的[小提琴](http://jsfiddle.net/MqVcb/2/)

如果您不想要第一个元素的边距，

```
.left-sidebar-nav li:first-child {
    margin-top: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-20T14:01:35.497

只包括溢出：隐藏；在 css 中为 li

```
li {
  overflow:hidden;
} 
```

通常情况下，跳跃与jquery在为slideUp slideDown设置动画时没有考虑到溢出的边距和填充有关。

更新了 jsfiddle：http: [//jsfiddle.net/MqVcb/3/](http://jsfiddle.net/MqVcb/3/)

# ruby - 如何在 Padrino 中使用 Redis

> ID：16023764
> 
> 赞同：0
> 
> 时间：2013-04-15T19:59:12.817
> 
> 标签：ruby, redis, padrino

是否可以将 redis 与 Padrino 一起使用，与 postgresql 或 mysql 生成器相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:13:42.330

看看[`Ohm`](https://github.com/soveran/ohm)。它是 Padrino 支持的 ORM，类似于 Active Model，但使用 Redis 作为它的数据存储。

如果您希望将“Padrino Admin”与 Ohm 一起使用，您可能希望[从 master 构建 Padrino 或等待 0.11.2 。](https://github.com/padrino/padrino-framework/issues/1148)

```
padrino g project my_app --orm ohm
cd my_app
bundle
padrino g model Post title:string body:text
padrino g admin
padrino g admin_page post
padrino rake db:seed
padrino start 
```

编辑：这是将 Ohm 作为 ORM 的集合添加到 Padrino 管理页面的一种方法。

打开您生成`admin/views/presentations/index.erb`的并在表格中显示您的收藏。

```
<td class=list-column> 
  <% presentation.slides.each do |slide| %>
     <div><%= slide.name %></div>
  <% end %>
</td> 
```

打开`admin/views/presentations/_form.erb`并为您的收藏添加一个`check_box_group`。

```
<fieldset class='control-group <%= error ? 'has-error' : ''%>'>
  <%= f.label :slides, :class => 'control-label' %>
  <div class='controls'>
    <%= f.check_box_group(:slide_ids, collection: @slides, selected: @presentation.slides, fields: [:name, :id]) %>
  </div>
</fieldset> 
```

从那里您可以更新您的 Presentations 控制器来处理`params[:presentation][:slide_ids]`，或者您将以下方法添加到您的 Presentation 模型中。

```
def slide_ids=(ids)
  if valid? && save
    slides.key.del if slides.key.exists?
    slides.key.sadd(ids)
  end
end 
```

这将用新的一组幻灯片替换当前的一组幻灯片。

# javascript - Javascript - 仅渲染更新的 html

> ID：16023769
> 
> 赞同：1
> 
> 时间：2013-04-15T19:59:36.920
> 
> 标签：javascript, jquery, dom

我有一个叫做渲染的类。那会不断更新，我不想每次都更新整个班级。

我有一个字符串

```
var html1 = "<h1>Header</h1><p>this is a small paragraph</p><ul><li>list element 1.</li><li>list element 2.</li><li>list element 3.</li></ul>" 
```

并`$('.render').html(html1)`产生：

```
<div class="render">
    <h1>Header</h1>
    <p>this is a small paragraph</p>
    <ul>
        <li>list element 1.</li>
        <li>list element 2.</li>
        <li>list element 3.</li>
    </ul>
</div> 
```

可以说我得到了一个新的 html 字符串，它只是`html1`

```
var html2 = 
"<h1>Header</h1>
<p>this is a small paragraph</p>
<ul>
<li>list element 1.</li>
<li>list element 2.</li>
<li>list element 3\. With a small update.</li>
</ul>"
// newlines thrown in for clarity. 
```

有没有一种好方法可以让我插入新的 html 而无需重新渲染整个内容。

这是我尝试解决此问题的项目[github/rontgen.js](http://github.com/eoinmurray/rontgen)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:20:10.033

像这样的东西应该可以工作（语法可能会关闭，但这应该让你知道如何去做）

```
$('.render').children().each(function() {
   if ($(this).is('h1') && $(this).html() != html2.find('h1').html()) {
       $(this).html(html2.find('h1').html());
   }

 else if ($(this).is('p') && $(this).html() != html2.find('p').html()) {
      $(this).html(html2.find('p').html());
 }

 else if ($(this).is('ul') && $(this).html() != html2.find('ul').html()) {
     for (i=0; i<$(this).children('li').length; i++) {
        if ($(this).children('li')[i] != html2.find('ul').children('li')[i]) {
            $(this).children('li')[i].html(html2.find('ul').children('li')[i].html());
     }
   }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:50:34.913

好的，我的初步解决方案如下，就像上面的@dave，但我不遍历dom。

```
$(function(){

    // Cache the jQuery selectors
    var $editor = $("#editor");
    var $render = $('.render');

    $editor.focus();
    var firstTime = true;
    var cache = [''];

    var i = 0;
    var row_num = 1000;
    for(i = 0; i < row_num; i++){
        $render.append('<div id="node'+i+'"></div>')
    }

    $editor.keyup(function(){
        var fresh = $editor.val().split('\n\n');

        var i = 0;
        for(i = 0; i < fresh.length; i++){
            console.log(fresh[i]!==cache[i])
            if(fresh[i]!==cache[i]){
                $('#node'+i).html(marked(fresh[i]))
                renderMathJax('node'+i)
            }
        }
        var j;
        for(j = fresh.length; j < row_num; j++){
            $('#node'+j).empty()
        }

        cache = fresh;

    });

});

var renderMathJax = function (el) {
    MathJax.Hub.Queue(["Typeset",MathJax.Hub,el]);
} 
```

它的性能很好，因为它只插入而不重新渲染，但如果我一次删除多行，仍然会有一些奇怪的地方。

# php - 了解 CakePHP 的控制器

> ID：16023774
> 
> 赞同：0
> 
> 时间：2013-04-15T19:59:51.647
> 
> 标签：php, cakephp

我正在阅读 CakePHP 的初学者教程，我有一个问题：

在博客教程中，已经在Controller中创建了以下函数

```
public function index() {
    $this->set('posts', $this->Post->find('all'));
} 
```

我试图更好地理解这意味着什么，特别是

```
$this->Post->find('all') 
```

这是对 Controller 对象的 Post 对象的引用，然后调用它的 find 函数。这个 Post 对象是 Post 对象的linkedList（或其他一些数据结构）吗？这似乎是唯一有意义的方法，但我想确定一下。我习惯了 Java 中的 OOP 和 PHP 中的 OOP 新手，我认为我可能会遗漏一些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:31:07.697

您的模型控制数据库访问。因此，当您想要从数据库中获取数据时，在控制器中，您需要使用模型来检索它。

```
$this->Post->find('all'); 
```

告诉“帖子”模型检索所有帖子。

最佳实践实际上是根本不使用`find()`Controller 中的方法，而是调用在 Model 中创建的自定义方法。例如：

```
//inside PostsController
$posts = $this->Post->getPosts();

//inside Post Model
public function getPosts() {
    return $this->find('all');
} 
```

当您添加条件、限制、订单等时，这通常会变得更加复杂，但是这样做，它更接近于 MVC，M（模型）是所有数据检索的对象。（并且还使您的代码更清晰，因此无论何时您想要更新查找，您只需在一个地方进行，而不是跨多个控制器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:09:28.423

它调用`find`模型 Post 的方法。您的模型已经找到，因为它扩展了 AppModel。

```
 App::uses('AppModel', 'Model');
  class Post extends AppModel {
        public $name = 'Post';
    } 
```

并返回将是这样的

（它唯一的例子，它将取决于你的数据库和你的模型帖子/用户......等）

```
Array
(
    [Post] => Array
        (
            [id] => 83
            [desc] => 'it is a test post'
            [user_id] => 2

        )

    [user] => Array
        (
            [id] => 2
            [name] => 'rafael'
            [phone] => '9999-000'
        )
) 
```

并且该数组将负责您在变量“帖子”中的视图访问。

# php - 无法弄清楚为什么我的 PHP 代码会出现服务器错误

> ID：16023776
> 
> 赞同：0
> 
> 时间：2013-04-15T19:59:56.790
> 
> 标签：php, facebook, plugins, registration

在这个 PHP 页面上，我正在解析从我正在使用的 facebook 注册插件收到的签名请求。我正在保存的已签名请求 $response 对象的 location 属性存在问题，但我无法弄清楚它是什么。我得到以下两个错误之一： 1.**不理解地址，firefox 不知道如何打开地址，因为协议与任何程序无关。**当我收到该错误时，浏览器栏会显示：**s:18:"New York,New York";** 这是我试图保存到变量中的位置属性的值。第二个错误： **请求的 URL /~spilot/spilot.koding.com/website/New York,New York**在这个服务器上没找到。同样，“New York New York”是我试图保存到变量中的 location 属性的值。下面是我的整个 php 页面的代码：

```
<?php

//code omitted here that decodes and checks the JSON signature of the signed request. It has been tested and I know the problem isn't there. 

    if ($_REQUEST) 
    {
    $response = parse_signed_request($_REQUEST['signed_request'],
    FACEBOOK_SECRET);
    }

//this is where I save the values from the registration form into php variables. 

    $name = $response["registration"]["name"]; 
    $email = $response["registration"]["email"]; 
    $password = $response["registration"]["password"];
    $uID = $response["user_id"];

    // The problem is with the location variable. 
```

//我希望它作为字符串而不是对象存储到我的数据库中，这就是我使用 //serialize() 的原因，但是无论我是否使用序列化，都会出现上述错误。

```
 $location = $response["registration"]["location"]["name"];

    $city = serialize($location);

    ?>

// I'm using the Parse Cloud Server to power the back end and I have to connect with parse using javascript. 

    <script type="text/javascript">

    var password = '<?php echo $password ?>';

    var name = '<?php echo $name ?>';

    var uID = '<?php echo $uID ?>';

    var email = '<?php echo $email ?>';

    var location = '<?php echo $city ?>';

             //Initialize the Parse SDK!

          Parse.initialize("ivHLAO7z9ml1bBglUNuPSgcWabXe3UeE********","gNeGt04lU7xcew8********qc4POVhBsIBSCVj");
               var User = new Parse.User();
                User.set("password",  password);                    
                User.set("username",  name);
                User.set("uID", uID);
                User.set("email", email);
                User.set("location", $city);

          User.signUp(null, { 
          success: function(user) 
          { 
          alert("User signed up!"); 

          } 
          });

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:40:55.743

我建议改变这个：

```
var location = '<?php echo $city ?>'; 
```

也许

```
var city = ... 
```

您的错误表明这被视为相当于

```
window.location = ...; 
```

出于某种原因，它作为`serialize()`' 字符串从 PHP 中出来。由于来自 PHP 的序列化字符串不是有效的 url，因此您会收到“未知”协议错误。

# c++ - 如何访问网络文件？

> ID：16023780
> 
> 赞同：13
> 
> 时间：2013-04-15T20:00:07.653
> 
> 标签：c++, windows

```
using namespace std;

ofstream myfile;
//myfile.open ("Z:\\ABC.TXT");                 // fails Z: is a network drive
//myfile.open("C:\\Temp\\ABC.TXT");            // OK
//myfile.open("Z:\\NETWORK\\02-010E.CHS");     // fails Z:\Network is a network folder

if (myfile.is_open())
    cout << "file is open" << endl;
else
    cout << "file fails to open" << endl;

myfile.close(); 
```

问题：似乎`ofstream.open`不支持在网络驱动器上打开文件。有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T20:09:51.017

尝试这个：

```
 using namespace std;

  ofstream myfile;
  myfile.open("\\\\servername\\filepath\\filename"); 
              //^^should follow this format, servername is not Z drive name

  if (myfile.is_open())
     cout << "file is open" << endl;
 else
     cout << "file fails to open" << endl;

 myfile.close(); 
```

我试过这个在共享服务器上打开一个文件，它输出

```
file is open 
```

所以它应该工作。

该`Z`驱动器实际上不是真正的物理驱动器，它只是到服务器上真实物理驱动器的映射。

# javascript - 鼠标单击对象数组javascript Canvas

> ID：16023787
> 
> 赞同：4
> 
> 时间：2013-04-15T20:00:32.330
> 
> 标签：javascript, jquery, canvas, mouseevent, mouseover

我有一个数组，它在我的游戏中充满了许多不同对象的位置，我想要实现的是当鼠标位于画布中的对象上时，用户可以单击然后一个框（将是一个菜单）会出现。

这是我已经拥有的代码：

```
 this.init_inv = function(value){
    canvas.onmousemove = function (e) {
        var x, y;
        for(var i = 0;i < value.length; i++){
            // Get the mouse position relative to the canvas element.
            if (e.layerX || e.layerX) { //for firefox
                x = e.layerX;
                y = e.layerY;
            }
            x-=canvas.offsetLeft;
            y-=canvas.offsetTop;

            if(x>=value[i][0] && x <= (value[i][0] + value[i][2]) &&
               y<=value[i][1]&& y >= (value[i][1]-value[i][2])){
                document.body.style.cursor = "pointer";
                inObject=true;
            }
            else{
                document.body.style.cursor = "";
                inObject=false;
            }
        }
    };
    canvas.addEventListener("click", on_click, false);
}; 
```

点击处理程序如下所示：

```
function on_click(e) {
    if (inLink)  {
        var dataString = {"save": "true", "level":level, "location_X":pos_X, "location_Y":pos_Y};
        $.ajax({
            type:"POST",
            url:"PHP/class.ajax.php",
            data: dataString,
            dataType: "JSON",
            success: function(success){
                alert("Saved");
            },
            error:function(){
                alert("Not Saved");
            }
        });
    }
    if(inObject){
        console.log("hovering");
    }
} 
```

我有一个单独的点击处理程序，因为我需要处理不同画布不同部分的点击。

我相信问题在于我如何读取数组中的值，但不确定如何读取。我知道这一点，因为如果我在`value[i][0]`etc 值所在的位置输入一个 int，我可以在指定的区域单击，然后单击触发，我会得到控制台日志。

数组如下所示：

```
var array = [
   [pos_x,pox_y, size]
   //etc...
]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T18:48:52.673

`inObject`因此，您可以最初将其设置为 false，然后将其设置为 ，而不是设置为 true 或 false，`i`这样您就知道实际选择了哪个对象。

确保 inObject 在函数之外定义，以便您以后可以访问它。

我将稍微解释一下您的代码，以简要概述我将如何构建它

```
//first of all, name your stuff what it is, rather than array, name it meaningfully
// and since we don't have a huge amount(1000+) of menu items, we can just use them as objects
// arrays are faster, but for clarity purposes, we don't need the speed and might as well have readable code
var menuboxes = [
  {x: 10, y: 10, size: 100},
  {x: 115, y: 10, size: 100}
];

//i suggest using underscore, but this could be converted to a regular each
_.each(menuboxes, function(box, n){
  context.fillRect(box.x, box.y, box.size, box.size);
});

var on_click = function(e){
  // this doesn't change for each item, so define x and y outside of the boxes loop
  x = e.layerX - canvas.offsetLeft;
  y = e.layerY - canvas.offsetTop;
  clickTarget = false
  _.each(menuboxes, function(box, n){
    if(box.x < x && x < box.x + box.size &&
      // no need to invert y, use it like you use x
      box.y < y && y < box.y + box.size) {
        clickTarget = n;
      }
  });
  if(clickTarget !== false){
    openMenu(clickTarget);
  }
};

var openMenu = function(n){
  console.log("You opened box", n, menuboxes[n]);
  // menu opening code here
}

canvas.addEventListener("click", on_click, false); 
```

这是未经测试的，但应该给你一些提示。我建议现在使用 jquery 和下划线，当你学会了这些绳索时，最终使用咖啡脚本。由于浏览器的怪癖，Jquery 非常重要，下划线非常有用且快速，并且在某些情况下，coffeescript 是制作可读代码的唯一方法。将您的代码复制到[http://js2coffee.org](http://js2coffee.org)以查看它可以缩短多少。

# python - tkinter 属性错误

> ID：16023790
> 
> 赞同：0
> 
> 时间：2013-04-15T20:00:51.997
> 
> 标签：python, tkinter

我有一个 BankAccount 类，我用它来创建一个允许用户存款、取款和查看余额的 GUI。

这是 BankAccount 类代码：

```
class BankAccount(object):
    """ creates a bank account with the 
        owner's name and a balance """
    def __init__(self, name, balance = 0):
        self.__name = name
        self.__balance = balance

    def getName(self):
        """ returns the owner's name """
        return self.__name

    def getBalance(self):
        """ returns the current balance """
        return round(self.__balance, 2)

    def deposit(self, amount):
        """ deposits amount into the account """
        self.__balance += amount

    def withdraw(self, amount):
        """ withdraws amount from the account
            returns 'overdrawn' if balance is too low """
        if self.__balance >= amount:
            self.__balance -= amount
        else:
            return 'overdrawn'

    def __str__(self):
        """ return a string representation of the account """
        return self.__name + ' has a balance of $' + str(round(self.__balance, 2)) 
```

这是 GUI 代码：

```
from tkinter import *
from bankAccountClass import BankAccount

class bankAccountGUI(Frame):
    def __init__(self):
        """Set up the GUI"""
        self.__balance= 0
        Frame.__init__(self)
        self.master.title('Bank Account')
        self.grid()

        depositLabel = Label(self, text= "Make Deposit")
        depositLabel.grid(row = 0, column = 0)
        self.depositVar= DoubleVar()
        depositEntry = Entry(self, textvariable= self.depositVar)
        depositEntry.grid(row = 0, column = 1)

        withdrawLabel= Label(self, text= "Make Withdrawal")
        withdrawLabel.grid(row = 1, column = 0)
        self.withdrawVar = DoubleVar()
        withdrawEntry= Entry(self, textvariable= self.withdrawVar)
        withdrawEntry.grid(row = 1, column = 1)

        button_1= Button(self, text = "Enter", command = self.deposit)
        button_1.grid(row = 0, column = 2)

        button_2= Button(self, text = "Enter", command = self.withdrawal)
        button_2.grid(row = 1, column = 2)

    def deposit(self):
        """event handler for button_1"""
        try:
            amount= self.depositVar.get()
            balance= BankAccount.getBalance(self)
            if amount <= 0:
                messagebox.showerror(message= 'Deposit must be greater than 0')
            else:
                balance= BankAccount.deposit(self, amount)
                messagebox.showinfo(title= "Current Balance",
                                    message= "$" + self.balance,
                                    parent= self)
        except ValueError:
            messagebox.showerror(message= "Invalid deposit amount")

    def withdrawal(self):
        """event handler for button_2"""
        try:
            amount= self.withdrawVar.get()
            balance= BankAccount.getBalance(self)
            if amount > self.balance:
                messagebox.showerror(message= "Insufficient funds")
            else:
                balance= BankAccount.withdraw(self, amount)
                messagebox.showinfo(title= "Current Balance",
                                    message= "$" + self.balance,
                                    parent= self)
        except ValueError:
            messagebox.showerror(message= "Invalid withdrawal amount")

def main():
    """instantiate and pop up the window"""
    bankAccountGUI().mainloop() 
```

我收到一个错误，我真的不知道这意味着什么或如何解决它。

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/tkinter/__init__.py", line 1442, in __call__
    return self.func(*args)
  File "/Users/tinydancer9454/Documents/python/bankAccountGUI.py", line 49, in deposit
    balance= BankAccount.getBalance(self)
  File "/Users/tinydancer9454/Documents/python/bankAccountClass.py", line 24, in getBalance
    return round(self.__balance, 2)
AttributeError: 'bankAccountGUI' object has no attribute '_BankAccount__balance' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:18:11.960

当你调用`balance= BankAccount.getBalance(self)`你的`deposit`函数时，你实际上在做的是访问类的`getBalance()`方法`BankAccount`，使用它未初始化，并尝试将不同的对象作为`self`. 当您通过访问类而不是实例来调用方法时，您必须给它一个`self`对象才能使其实际工作。BankAccount 方法期望它们的`self`对象是 BankAccount 对象。您正在向它传递一个不包含该`__balance`属性的 BankAccountGUI 对象。这就是它抛出该错误的原因。

你应该做的是创建一个 BankAccount 的实例，然后使用它的方法：

```
account = BankAccount()
balance = account.getBalance() 
```

类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:05:33.777

`_BankAccount__balance`要了解错误消息中提到的变量，请参阅有关使用双下划线和“名称修改”[的 Python 文档：](http://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references)

> ...由于类私有成员有一个有效的用例（即避免名称与子类定义的名称发生名称冲突），因此对这种称为名称修饰的机制的支持有限。表单的任何标识符`__spam`（至少两个前导下划线，最多一个尾随下划线）在文本上替换为`_classname__spam`，其中 classname 是当前类名，前导下划线被去除。

[这个问题](https://stackoverflow.com/questions/3443043/why-does-python-use-two-underscores-for-certain-things)及其接受的答案也很丰富。

在这里解决这个问题的最简单方法是从类变量名中删除所有前导下划线。或者您可以`self.__balance`将`BankAccount.getBalance()`功能更改为`self._BankAccount__balance`.

编辑：您还将`bankAccountGUI`对象作为函数中的参数传递`getBalance`，如`self`. 它应该只是`balance= BankAccount.getBalance()`，没有`self`。

# php - Htaccess 和重写规则

> ID：16023794
> 
> 赞同：0
> 
> 时间：2013-04-15T20:01:14.600
> 
> 标签：php, .htaccess, rewrite

我的 .htaccess 文件中有这个：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /test/
RewriteCond %{REQUEST_URI} !(panel/index.php)
RewriteRule ^panel/(.*)$    panel/index.php/$1/ [L]
</IfModule> 
```

我想隧道所有包含`panel/(.*)`to的链接来`panel/index.php`控制它们。

上述规则有效，除非 url 是`http://localhost/test/panel/`! 它重定向到：

`http://localhost/test/panel/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/index.php/`

需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:05:02.150

尝试这个

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    #skip rewrite for  index.php
    RewriteRule ^panel/index.php(.*)$ - [S=1,L]
    RewriteRule ^panel/(.*)$    panel/index.php/$1/ [L]
 </IfModule> 
```

# c# - 在 N 层 C# 应用程序中放置计算逻辑的位置

> ID：16023796
> 
> 赞同：1
> 
> 时间：2013-04-15T20:01:17.583
> 
> 标签：c#, wcf, entity-framework

我正在使用以下应用程序结构在 C# 中开发 N 层应用程序。

我的解决方案结构。

1.  UI - WPF Prism 和 ViewModels 连接到服务。由商店员工使用。
2.  服务 - WCF - 业务逻辑、数据检索和通过数据层连接到数据库。
3.  实体 - EF POCO 实体 - 没有逻辑。
4.  数据 - EF DbContext 和 EDMX - 数据库连接
5.  Web - ASP.NET MVC 应用程序 - 基于 Web 的 UI 版本，具有有限的功能和客户访问权限。连接到服务。

我想知道在哪里可以找到具有计算的实体对象的逻辑。

这是示例实体。

```
public class Invoice
{
    public int InvoiceID { get; set; }
    public DateTime InvoiceDate { get; set; }
    public Decimal SubTotal { get; set; }
    public Decimal? SalesTax { get; set; }
    public Decimal? DiscountPercent { get; set; }
    public Decimal? DiscountAmount { get; set; }
    public decimal Total { get; set; }

    public ICollection<InvoiceDetail> InvoiceDetails { get; set; }

}

public class InvoiceDetail
{
    public int InvoiceDetailID { get; set; }
    public int InvoiceID { get; set; }
    public Decimal Quantity { get; set; }
    public Decimal Price { get; set; }
    public decimal Total { get; set; }

    public Invoice Invoice { get; set; }

} 
```

在上述场景中，当值发生变化时，我应该将计算发票总额的逻辑放在哪里。例如，更新的 SalesTax 将需要更改 Invoice Total。向发票添加行项目需要更改小计、税收、折扣和总计。

我想知道我是否可以在服务层中做到这一点并让实体贫血。我担心的是我需要不断地来回发送整个发票对象。

即使我还没有做移动解决方案，但不确定这在移动环境中是否是一个好主意，因为来回发送发票可能会消耗数据。

例如，另一个想法是在 InvoiceDetail 中使用 AddLineItem() 方法，在 Invoice 中使用 CalculateTotals() 方法。

AddLineItem 自动计算行项目的总计（我可以将其设为数据库中的计算列），并计算发票的小计、折扣、税款、总计。我假设在这种情况下，如果我想在内部调用CalculateTotals()，例如当SalesTax 更改而不是将其留给客户端调用CalculateChanges 时，我可能必须删除自动属性。那是对的吗？如果是，那么我将 EF 模板重构为不具有自动属性，而是具有支持字段的属性，这将成为一个问题。

请告知哪种方法更好，为什么？或者针对这种情况采用完全不同的方法。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:08:20.240

我们的工具中有一个类似的问题，并将计算放在域对象本身中。一个对象应该知道它的总数的原因是因为它知道它的孩子。我们的服务层中使用的业务逻辑特定于业务规则而不是计算。这是我们的代码示例（注意：我们使用 C#.Net 和 MVC3）：

```
public class Task : DomainBase
{
    public virtual ICollection<Subtask> Subtasks { get; set; }

    [Display(Name = "Subtask(s) Total Cost")]
    [DisplayFormat(DataFormatString = "{0:0.00}", ApplyFormatInEditMode = true)]
    //calculated property
    public virtual double TotalSubTaskCost
    {
        get
        {
            if (Subtasks == null)
                return 0;
            if (!Subtasks.Any())
                return 0;
            double it = Subtasks.Where(a => a != null).
                Aggregate<Subtask, double>
                    (0, (current, a) => current + a.TotalCost);
            return it;

        }

    }

 } 
```

每当查询 Task 的 TotalSubtaskCost 时，它都会执行计算。每个子任务都有自己的属性 TotalCost。所以我们为子子任务聚合和求和这些值。而且由于 Task 总是知道自己的 Subtasks，所以计算应该总是正确的。

# sitecore - Sitecore：基于其他字段的字段

> ID：16023810
> 
> 赞同：2
> 
> 时间：2013-04-15T20:02:26.500
> 
> 标签：sitecore, sitecore6

我想知道是否可以在 sitecore 中将一个字段建立在其他两个字段的基础上，反之亦然。

例如，我有一个包含以下字段的模板：

```
FullName
FirstName
LastName 
```

我想知道 sitecore 中是否有任何机制允许我使 FullName 等效于连接 FirstName 和 LastName 并在它们之间留一个空格。

有没有？如果有，我可以走另一条路吗？（例如，接受 FullName 作为 $name 并在空格上拆分以生成 FirstName 和 LastName）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:49:04.817

我可以想到做这样的事情是通过创建一个自定义复合字段。

[创建复合自定义字段](http://sdn.sitecore.net/Articles/API/Creating%20a%20Composite%20Custom%20Field.aspx)

对于反向，您需要查看创建自定义标准值令牌。

[在 Sitecore ASP.NET CMS 中添加自定义标准值标记](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2013/01/Add-Custom-Standard-Values-Tokens-in-the-Sitecore-ASPNET-CMS.aspx)

# jquery - @URL.Action 按钮单击以加载部分视图

> ID：16023814
> 
> 赞同：1
> 
> 时间：2013-04-15T20:02:42.417
> 
> 标签：jquery, asp.net-mvc-3

在我的表单中，我有电子邮件字段、搜索按钮和部分视图的占位符

```
@using (Html.BeginForm())
{   
    Html.TextBoxFor(model => model.emailAddress, new { style = "width:400px" , @class = "emailValue"})
    @Html.ValidationMessageFor(model => model.emailAddress) 

<button name="button" value="search" id="SearchResultbtn">
                    Search</button>
 <div id="searchResult">
                </div>

} 
```

使用 jquery 以局部视图显示搜索结果

```
$(document).ready(function (e) {
    $("#SearchResultbtn").click(function (e) {
        e.preventDefault();
        $("#searchResult").load('@Url.Action("AdminSearchResult", "Administration")');
    });
}); 
```

在我的控制器中，我有一个主要的 Action 方法

```
[HttpPost]
public ActionResult CreateAdmin(string button, Administration admin)
{
} 
```

和处理部分视图的 Action 方法

```
public ActionResult AdminSearchResult(string sortOrder, int? page)
{
    var result = Administration.GetAdministrationList();
    return PartialView("AdminSearchResult", result);
} 
```

现在我想要的是首先在按钮单击时验证电子邮件是否有效，然后如果不抛出错误消息则加载部分视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:25:37.083

你又来了，@ user2225604！你不需要任何脚本或任何花哨的东西来做到这一点。根据我之前的回答，您已经启用了不显眼的 js，所以...

从你提到的行为来看，我认为你只需要这样的东西：

```
@using (Ajax.BeginForm("AdminSearchResult", "ControllerName", null, new AjaxOptions { UpdateTargetId = "searchResult", InsertionMode = InsertionMode.Replace })) 
```

代替：

```
@using (Html.BeginForm()) 
```

然后你可以完全摆脱脚本。您可能必须在 Ajax.BeginForm 中为该 sortOrder 参数传递一个 routeValue，但除此之外，您应该很高兴。

# powershell - Powershell windows 7 更改背景

> ID：16023818
> 
> 赞同：2
> 
> 时间：2013-04-15T20:03:06.677
> 
> 标签：powershell, background, themes, desktop-wallpaper

之前在这里以不同的形式提出过这个问题（[Powershell - Change windows 7 background to image off a website](https://stackoverflow.com/questions/8523181/powershell-change-windows-7-background-to-image-off-a-website)）但我在这里仍然遇到了一些麻烦

我在 Windows 7 (PC) 中有一个变量： Set-Variable DEF_IMG -value 'C:\Windows\Web\Wallpaper\Windows\img0.jpg'

我已经尝试了很多事情：

```
set-ItemProperty -path "HKCU:Control Panel\Desktop" -name WallPaper -value $DEF_IMG
set-ItemProperty 'HKCU:\Software\Microsoft\Internet Explorer\Desktop\General' -name WallpaperSource -value $DEF_IMG
REG add 'HKCU\Control Panel\Desktop' /v Wallpaper /t REG_SZ /d $DEF_IMG /f
regedit /s $DEF_IMG 
```

最后，我总是尝试

```
RUNDLL32.exe user32.dll, UpdatePerUserSystemParameters, 1, True 
```

有一次，运行其中一些脚本似乎会改变实际背景，但大多数情况下，注册表中的值会发生变化，但图像保持不变。至于它什么时候变化，背后似乎没有任何韵律或原因。我想我遗漏了一些关于 Windows 如何处理其背景图像与主题的重要信息……还是什么？

我正在尝试直接在 Powershell 中完成所有这些工作（没有 C 代码，没有额外的插件或扩展，试图维护一个干净的系统）

# html - 缩小浏览器时如何避免导航菜单被包裹？

> ID：16023822
> 
> 赞同：0
> 
> 时间：2013-04-15T20:03:22.927
> 
> 标签：html, css

我有个问题。我用 HTML 和 CSS 编写了一个简单的下拉菜单程序，当缩小浏览器时，导航菜单项（列表）被包装起来（转到下一行）。我怎样才能避免它？这是代码：

```
<style>

#coolMenu,
#coolMenu ul {
    list-style: none;
}
#coolMenu {
    float: left;
}
#coolMenu > li {
    float: left;
}
#coolMenu li a {
display: block;
    height: 2em;
    line-height: 2em;
    padding: 0 1.5em;
    text-decoration: none;
}
#coolMenu ul {
    position: absolute;
    display: none;
    z-index: 999;
}
#coolMenu ul li a {
    width: 80px;
}
#coolMenu li:hover ul {
    display: block;
}

/* Main menu
------------------------------------------*/
#coolMenu {
    font-family: Arial;
    font-size: 12px;
    background: #2f8be8;
}
#coolMenu > li > a {
    color: #fff;
    font-weight: bold;
}
#coolMenu > li:hover > a {
    background: #f09d28;
    color: #000;
}

/* Submenu
------------------------------------------*/
#coolMenu ul {
    background: #f09d28;
}
#coolMenu ul li a {
    color: #000;
}
#coolMenu ul li:hover a {
    background: #ffc97c;
}

</style>

<ul id="coolMenu">
    <li><a href="#">Lorem</a></li>
    <li><a href="#">Mauricii</a></li>
    <li>
        <a href="#">Periher</a>
        <ul>
            <li><a href="#">Hellenico</a></li>
            <li><a href="#">Genere</a></li>
            <li><a href="#">Indulgentia</a></li>
        </ul>
    </li>
    <li><a href="#">Tyrio</a></li>
    <li><a href="#">Quicumque</a></li>
</ul> 
```

谢谢。

艾萨克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:15:17.587

如果您不想添加最小宽度（因为您可能事先不知道菜单的内容），您也可以选择带有`inline-block`s 的版本并添加`white-space: no-wrap`以防止换行。像这样的东西：http: [//jsfiddle.net/RpVpk/](http://jsfiddle.net/RpVpk/)

这些是您的 CSS 中更改的行：

```
#coolMenu {
    float: left;
    text-align: left;
    white-space: nowrap;
}
#coolMenu > li {
    display: inline-block;
} 
```

不过，我个人更喜欢浮动版本和换行。Nobady 喜欢水平滚动条，并且现在有各种屏幕尺寸……也许您应该考虑响应式并添加一些媒体查询？...

**编辑：**
为了完全兼容 IE，您可能必须将`li`css 更改为：

```
#coolMenu > li {
    display: inline-block;
    *display: inline;
    zoom: 1;
} 
```

`white-space`根据这个应该是 IE8+ 兼容的：[http](http://reference.sitepoint.com/css/white-space) ://reference.sitepoint.com/css/white-space ，但我无法测试这个，因为我在 Mac 上......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:07:57.680

只需添加`width: [pixels here]`到`#coolMenu`. 将其设置为所需的宽度，以便菜单始终显示为一行。您也可以`min-width:`根据布局的其余部分使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:12:44.970

只需添加`min-width`：

```
#coolMenu {
    float: left;
    min-width: 450px;
} 
```

见工作小提琴：[最小宽度菜单](http://jsfiddle.net/zHqcZ/1/)

# javascript - 如何在javascript中将字节格式化为人类可读的文本？

> ID：16023824
> 
> 赞同：2
> 
> 时间：2013-04-15T20:03:29.677
> 
> 标签：javascript

我正在尝试在 JavaScript 中转换以字节表示的文件大小，如下所示（HTML 5）。

```
function formatBytes(bytes)
{
    var sizes = ['Bytes', 'kB', 'MB', 'GB', 'TB'];
    if (bytes == 0) 
    {
        return 'n/a';
    }
    var i = parseInt(Math.log(bytes) / Math.log(1024));
    return Math.round(bytes / Math.pow(1024, i), 2) + sizes[i];
} 
```

但是我需要在需要时以 SI 和二进制单位表示文件大小，例如，

```
kB<--->KiB
MB<--->MiB
GB<--->GiB
TB<--->TiB
EB<--->EiB 
```

这可以在 Java 中完成，如下所示（对方法使用一个额外的布尔参数）。

```
public static String formatBytes(long size, boolean si)
{
    final int unitValue = si ? 1000 : 1024;
    if (size < unitValue) 
    {
        return size + " B";
    }
    int exp = (int) (Math.log(size) / Math.log(unitValue));
    String initLetter = (si ? "kMGTPE" : "KMGTPE").charAt(exp-1) + (si ? "" : "i");
    return String.format("%.1f %sB", size / Math.pow(unitValue, exp), initLetter);
} 
```

JavaScript 中的一些等效代码可能如下所示。

```
function formatBytes(size, si)
{
    var unitValue = si ? 1000 : 1024;
    if (size < unitValue) 
    {
        return size + " B";
    }
    var exp = parseInt((Math.log(size) / Math.log(unitValue)));
    var initLetter = (si ? "kMGTPE" : "KMGTPE").charAt(exp-1) + (si ? "" : "i");
    alert(size / Math.pow(unitValue, exp)+initLetter);
    //return String.format("%.1f %sB", size / Math.pow(unitValue, exp), initLetter);
} 
```

正如前面代码片段（最后一个）中的注释行所示，我无法在 JavaScript 中编写等效语句。当然，在 JavaScript 中还有其他方法可以做到这一点，但我正在寻找一种简洁的方法，更准确地说，是否可以在 JavaScript/jQuery 中编写等效的语句。可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T20:06:45.297

[http://jsbin.com/otecul/1/edit](http://jsbin.com/otecul/1/edit)

```
function humanFileSize(bytes, si) {
    var thresh = si ? 1000 : 1024;
    if(bytes < thresh) return bytes + ' B';
    var units = si ? ['kB','MB','GB','TB','PB','EB','ZB','YB'] : ['KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'];
    var u = -1;
    do {
        bytes /= thresh;
        ++u;
    } while(bytes >= thresh);
    return bytes.toFixed(1)+' '+units[u];
};

humanFileSize(6583748758); //6.1 GiB
humanFileSize(6583748758,1) //6.4 GB 
```

# objective-c - Objective-C/Cocoa/XCode 新手：如何接收通知？

> ID：16023827
> 
> 赞同：1
> 
> 时间：2013-04-15T20:03:36.247
> 
> 标签：objective-c, cocoa

我无法从可可编程书​​中得到一个例子来工作（我认为部分问题是 XCode 已经过时了）。除了在 IB 中建立适当的连接之外，它没有提到我必须做任何特别的事情来接收来自 NSTableView 的通知。该应用程序是一个带有用于用户输入的 NSTextField 的程序，当单击按钮时，NSSpeechSynthesizer 的实例将说出输入的行。我应该能够通过在表格视图上选择一行来切换说话的声音。我可以点击，该应用程序在技术上有效，但我无法通过点击 GUI 上 NSTableView 上的一行来更改默认语音：

![图形用户界面](https://i.stack.imgur.com/oG0CY.png)

appdelegate.h：

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate,NSSpeechSynthesizerDelegate,NSTableViewDelegate>
{
    NSArray *_voices;
    NSSpeechSynthesizer *_speechSynth;
}

@property (assign) IBOutlet NSWindow *window;
@property (weak) IBOutlet NSTextField *textField;
@property (assign) IBOutlet NSTextField *text;

@property (assign) IBOutlet NSButton *_speakButton;
@property (assign) IBOutlet NSButton *_stopButton;

@property (assign) IBOutlet NSTableView *table;

-(IBAction)sayIt:(id)sender;
-(IBAction)stopIt:(id)sender;

@end 
```

appdelegate.m:

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize textField = _textField;
@synthesize text = _text;
@synthesize _speakButton;
@synthesize _stopButton;

@synthesize table;

-(void)speechSynthesizer:(NSSpeechSynthesizer *)sender didFinishSpeaking:(BOOL)finishedSpeaking
{
    NSLog(@"finishedSpeaking=%d",finishedSpeaking);
    [_speakButton setEnabled:YES];
    [_stopButton setEnabled:NO];
    [table setEnabled:YES];
}

-(id)init
{
    NSLog(@"init called");
    self = [super init];
    if (self)
    {
        NSLog(@"init");
        _speechSynth = [[NSSpeechSynthesizer  alloc] initWithVoice:nil];
        [_speechSynth setDelegate:self];
        [_text setStringValue:@""];
        _voices = [NSSpeechSynthesizer availableVoices];
    }

    //I added this line myself as I was trying to figure it out
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(tableViewSelectionDidChange:) name:@"MyNotification" object:table];
    return self;
}
-(IBAction)sayIt:(id)sender
{
    NSString *string = [_textField stringValue];
    if([string length]==0)
    {
        NSLog(@"string from %@ is of zero-length",_textField);
        return;
    }
    [_speechSynth startSpeakingString:string];
    [_text setStringValue:[_speechSynth voice]];
    ...
}
-(IBAction)stopIt:(id)sender
{
    NSLog(@"stopping");
    ...
}
-(NSInteger)numberOfRowsInTableView:(NSTableView *)tv
{
    return (NSInteger)[_voices count];
}
-(id)tableView:(NSTableView *)tv
objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSString *v = [_voices objectAtIndex:row];
    NSDictionary *dict =[NSSpeechSynthesizer attributesForVoice:v];
    return [dict objectForKey:NSVoiceName];
}

-(void)tableViewSelectionDidChange:(NSNotification *)notification
{
    NSInteger row = [table selectedRow];
    if(row==-1) return;
    NSString *selectedVoice = [_voices objectAtIndex:row];
    [_speechSynth setVoice:selectedVoice];
    NSLog(@"new voice = %@",selectedVoice);
}

-(void)awakeFromNib
{
    NSLog(@"awakeFromNib");
    NSString *defaultVoice = [NSSpeechSynthesizer defaultVoice];
    NSInteger defaultRow = [_voices indexOfObject:defaultVoice];
    NSIndexSet *indices = [NSIndexSet indexSetWithIndex:defaultRow];
    [table selectRowIndexes:indices byExtendingSelection:NO];
    [table scrollRowToVisible:defaultRow];
}
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSLog(@"Appdidfinishlaunching called");
}

@end 
```

我猜我走错了这条路。我只需要有人指出我应该如何工作的正确方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:25:23.373

这里有几个可能的错误来源。

*   您可能忘记将 nib 中的表格视图作为其`delegate`.

*   您可能忘记将 nib 中的应用程序委托作为其`textField`.

    （还有其他可能性（与将东西连接到笔尖有关）但我不会列出所有这些......）

*   如果您的目标确实是将选择消息作为通知获取，那么此行是错误的：

    ```
    [[NSNotificationCenter defaultCenter] 
      addObserver:self selector:@selector(tableViewSelectionDidChange:) 
      name:@"MyNotification" object:table]; 
    ```

    此通知的名称不是`@"MyNotification"`；它是`NSTableViewSelectionDidChangeNotification`。

# sql-server - 如何更快地导入 .FAST 文件？

> ID：16023830
> 
> 赞同：1
> 
> 时间：2013-04-15T20:03:45.897
> 
> 标签：sql-server, fix-protocol

我需要将大量数据从 .fast 文件导入数据库。我已经能够使用一个快速兼容的解码器来做到这一点，该解码器流入一个应用程序，然后对数据库执行批量插入。这有效，但不够快。有没有一种方法可以直接从 .fast 文件中导入数据而无需中间步骤？

# java - 在java中通过vlcj播放视频失败

> ID：16023836
> 
> 赞同：1
> 
> 时间：2013-04-15T20:04:20.943
> 
> 标签：java, swing, video, media-player, vlcj

我想使用 vlcj 在 JPanel 中播放视频。此 JPanel 是 JFrame 中的六个 JPanel 之一。我使用下面的代码来显示视频，但未能成功。JPanel 不显示视频。如果有人能给我一些建议，我将不胜感激。

JPanel 中的代码如下：

```
public class VideoPanel extends JPanel {

private EmbeddedMediaPlayerComponent mymediaPlayer;
private String vlcPath = "d:/Program Files/VideoLAN/VLC";
private String mediaPath = "d:/testvideo/test2.mov";
private EmbeddedMediaPlayer mediaPlayer;

private Canvas canvas;

public VideoPanel() {
    setLayout(new BorderLayout(0, 0));

    Canvas canvas_1 = new Canvas();
    add(canvas_1, BorderLayout.CENTER);

        NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), vlcPath);
    Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class);

    MediaPlayerFactory mediaPlayerFactory = new MediaPlayerFactory();
    CanvasVideoSurface videoSurface = mediaPlayerFactory.newVideoSurface(canvas_1);
    mediaPlayer = mediaPlayerFactory.newEmbeddedMediaPlayer();
    mediaPlayer.setVideoSurface(videoSurface);

    mediaPlayer.playMedia(mediaPath);  
    this.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:03:26.433

问题已解决。这是因为我试图在框架设置整个面板可见之前播放视频，并且视频文件的 URL 应该在 vlcj 2.1.0 中正确设置。

我将 URL 更改为正确的格式并将 playMedia 移动到框架类并在框架初始化后调用它。

我发现这两个讨论非常有帮助： 1.[尝试将 vlcj 媒体播放器嵌入到 JPanel 内的 WindowsCanvas 中](https://stackoverflow.com/questions/10609338/trying-to-embed-vlcj-media-player-in-a-windowscanvas-inside-a-jpanel)

2.  [https://github.com/caprica/vlcj/issues/29](https://github.com/caprica/vlcj/issues/29)

# html - Selenium IDE：如何检测具有动态 ID 的菜单项

> ID：16023850
> 
> 赞同：1
> 
> 时间：2013-04-15T20:05:13.293
> 
> 标签：html, firefox, xpath, selenium, firebug

我正在与 Selenium IDE 一起使用 Firefox 执行一些测试用例记录和自动化。在我当前的测试用例中，我需要点击一个特定的菜单项。这个菜单项的 id 是动态生成的，所以我不能可靠地使用它来识别菜单项。

这是我正在使用的 HTML 代码的摘录（尽量保持简短，因为它相当大）：

```
<div class="mmenu-column last-child">
    <ul>
        <li id="liemx1271284633044.5005" class="submenu" menuuid="emx1271284633044.5005">
        <ul>
            <li id="liemx573969930099.0066" class="link" menuuid="emx573969930099.0066">
            <li id="liemx72897755668.1767" class="link" menuuid="emx72897755668.1767">
            <li id="liemx1355170643142.7795" class="link" menuuid="emx1355170643142.7795">
                <span class="icon">
                <span>Create Drawing Print...</span>
            </li>
            <li id="liemx1032692905053.1085" class="link" menuuid="emx1032692905053.1085">
        </ul>
        <li id="liemx625746376608.6172" class="submenu" menuuid="emx625746376608.6172">
        <ul>
        <li id="liemx696193179020.1482" class="submenu" menuuid="emx696193179020.1482">
        <ul>
    </ul>
</div>` 
```

我正在尝试获取“创建绘图打印...”元素。我使用了 Firebug 并获得了以下 XPath：

```
html/body/div[20]/div/div/div/div/div[2]/ul/ul[1]/li[3]/span[2] 
```

它可以工作，但它高度依赖于浏览器的宽度和高度（改变宽度或高度会导致菜单折叠，从而改变其组成菜单项的位置）。我需要帮助才能找到一种获得特定菜单项元素（XPath 或其他）以在我的 Selenium 测试用例中使用的好方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:00:11.793

我会尝试这样的 XPath 表达式：

```
//span[text() = 'Create Drawing Print...'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T07:53:11.967

试试这个 CSS 选择器

driver.findElement(By.cssSelector("li[id*='liemx'] > span.icon + span")).任何操作。

请让我知道上面的 CSS 是否正常工作。

# matlab - 从被调用脚本中获取调用 simulink 对象/模型引用

> ID：16023855
> 
> 赞同：0
> 
> 时间：2013-04-15T20:05:25.997
> 
> 标签：matlab, simulink

这是关于 Matlab 2011b Simulink 环境的：

我需要在模型上运行脚本作为回调。如何从脚本中获取对调用模型的引用？我正在保护调用模型不一定是“当前”或突出显示的模型。不确定突出显示和当前是否是不同的概念

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:48:12.860

回调脚本（或函数）没有自动确定从哪个模型调用它的机制。

如果可以，那么在回调中，但在调用脚本之前，在（基本）工作区中定义一个变量，其中包含模型名称作为字符串。或者，如果您的回调是一个函数，则将模型的名称作为字符串传递给它。

如果您真的想要/需要搜索模型名称，那么您可以使用 find_system 来获取所有打开模型的名称；然后查看模型的 SimulationStatus 属性以查看当前正在运行的模型。如果有多个运行，那么您需要确定其他东西来区分它们。

可能还有其他方法，具体取决于您正在使用的回调。

# wordpress - 带有粘性的一致随机帖子集

> ID：16023857
> 
> 赞同：3
> 
> 时间：2013-04-15T20:05:40.667
> 
> 标签：wordpress, random, pagination, sticky

使用 WordPress，在我的主页上，我希望能够查询在整个分页中保持一致的随机帖子，而粘性仍然首先显示。我已经尽可能地创建了一个一致的流程，但我错过了像其他帖子一样随机出现的便签。

```
function custom_query($query) {
    global $custom_query;
    if ( $custom_query && strpos($query, 'ORDER BY RAND()') !== false ) {
        $query = str_replace( 'ORDER BY RAND()', $custom_query, $query );
    }
    return $query;
}

add_filter( 'query', 'custom_query' );
$paged = ( get_query_var('paged') ) ? get_query_var('paged') : 1;
$seed = $_SESSION['seed'];

if ( empty($seed) ) {
    $seed = rand();
    $_SESSION['seed'] = $seed;
}

global $custom_query;
$custom_query = " ORDER BY rand($seed) ";

$args = array(
    'caller_get_posts' => 1,
    'orderby' => 'rand',
    'paged' => $paged,
);

query_posts($args);
$custom_query = ''; 
```

编辑：根据您的建议，我设法使用以下代码解决了它：

```
$sticky_post_ids = get_option('sticky_posts');
function mam_posts_query($query) {
   global $mam_posts_query;
   if ($mam_posts_query && strpos( $query, 'ORDER BY RAND()') !== false ) {
      $query = str_replace( 'ORDER BY RAND()', $mam_posts_query, $query );
   }
   return $query;
}
add_filter( 'query','mam_posts_query' );
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$seed = date('Ymdh'); // Sets an hourly random cache
global $mam_posts_query;
$mam_posts_query = " ORDER BY rand($seed) ";

$args = array(
    'orderby' => 'rand',
    'paged' => $paged,
    'post__not_in' => get_option( 'sticky_posts' )
);
$projects = query_posts($args);
$mam_posts_query = '';

if ( $paged === 1 ) {
    $stickies = get_posts( array('include' => $sticky_post_ids) );
    $projects = array_merge( $stickies, $projects );
} 
```

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:53:55.843

我知道[codex wp_query 页面](http://codex.wordpress.org/Class_Reference/WP_Query#Sticky_Post_Parameters)中的描述有点混乱，但我相信你需要做的就是设置

`'ignore_sticky_posts' => 0`.

这在我的实验中是有效的，但当然在处理查询时，我不知道您的查询可能在另一个位置的什么时候或什么时候发生变化..

无论如何，如果这对你不起作用，你也可以用

`$sticky = get_option( 'sticky_posts' );`

然后像这样设置查询：

`'post__in' => get_option('sticky_posts')`

甚至这样：（注意`not_in`）

```
 $query->set( 'post__not_in', get_option( 'sticky_posts' ) ); 
```

请注意，默认情况下，便笺仅显示在主页上。

您也可以使用双循环方法：

```
$stickyQuery = new WP_Query( array(
        'cat'                    => $your_category,// example   
        'ignore_sticky_posts'    => 0,
        'post__in'               => get_option( 'sticky_posts' ),
        'posts_per_page'         => -1             //Get ALL and ONLY the stickies, or how many you want
    );
while( $stickyQuery->have_posts() ) : $stickyQuery->the_post();

   //... ( Sticky Posts should show )

endwhile;
wp_reset_query();

//... ( Continue main query or start a new one excluding the last.... ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T15:31:36.430

如果您不介意向所有访问者显示相同的随机帖子，您可以使用瞬态和 get_posts()：

```
$my_random_posts = get_transient('my_random_posts');
if (!$my_random_posts) {
  $sticky_post_ids = get_option('sticky_posts');
  $my_random_posts = get_posts(array(
                                 'exclude' => $sticky_post_ids,
                                 'orderby' => 'rand',
                               ));

  if ($sticky_post_ids) {
    $sticky_posts = get_posts(array(
                                 'include' => $sticky_post_ids,
                               ));
    $my_random_posts = array_merge($sticky_posts, $my_random_posts);
  }

  set_transient('my_random_posts', $my_random_posts , 900); # 15 minutes
} 
```

# asp.net - DataSet 没有被填充，我不明白为什么......？

> ID：16023861
> 
> 赞同：0
> 
> 时间：2013-04-15T20:06:11.830
> 
> 标签：asp.net, sql-server, dataset, gridview-sorting

所以我对我正在从事的项目有疑问。由于我们的查询中有大量数据，我正在创建一个网格视图，它将由 SQL Server 处理分页和排序。我已经下载了一个如何执行此操作的示例，更改了示例 SQL 以适合我的表，并且它测试得很好。一旦我将此代码传输到我的主项目，数据集就不会被任何数据填充。事实上，我知道代码有效，我知道 SQL 返回 48 行，并且应该以每页 25 行进行分页。我什至尝试在返回 ArrayList 的函数中运行 SQL，然后将其转换为数据表并填充 DataSet，正在填充数据表，但 DataSet 上的数据计数返回为 0.... 我在完全的损失。我完全没有错误，它正在与我的数据库进行通信。

这是我填充数据集的代码；

```
public DataSet GetDataSet(string sql) {
    DataSet ds = new DataSet();

    using (SqlConnection conn = new SqlConnection(_connectionString))
    {
        SqlDataAdapter adapter = new SqlDataAdapter();
        adapter.SelectCommand = new SqlCommand(sql, conn);
        conn.Open();
        adapter.Fill(ds);
    } 

    return ds;
} 
```

我也试过这段代码；

```
 SqlConnection src = new SqlConnection(_connectionString);

        try
        {
            src.Open();
            using (SqlDataAdapter DA = new SqlDataAdapter(sql, src))
            {

                DataTable report = new DataTable();
                DA.Fill(report);
                DS = new DataSet();
                DS.Tables.Add(report);

            }

            src.Close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:35:24.613

在第一个代码中，首先像这样用表格填充 ds

```
con.open();
adapter.Fill(ds,"THE TABLE NAME EXACTLY IN  YOUR DB");
GridView1.DataSource= ds.Tables["THE TABLE NAME EXACTLY IN  YOUR DB"];
GridView1.DataBind(); 
```

# php - Joomla 获取在 URL 中传递的变量

> ID：16023865
> 
> 赞同：3
> 
> 时间：2013-04-15T20:06:18.797
> 
> 标签：php, joomla, url-rewriting

当它们被传递到我们的网站时，我试图从 Joomla 中的 URL 字符串中提取值。一个例子是：

?source=SEARCH%20&utm_source=google&utm_medium=cpc&utm_term=&utm_content={创意}&utm_campaign=&cpao=111&cpca=&cpag=&kw=

所以除此之外，我将希望 VAR=utm_source 抓取，utm_medium 抓取等。

我想在网站上携带这些值，并至少在访问者点击表单提交之前保持这些值，这样这些值将与表单一起传递，以跟踪这些区域以查看它们来自哪里、使用了哪些关键字等。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T20:10:46.360

要获取 URL（和 POST）值，您可以使用 JRequest 或 JInput。JRequest 已被 Joomla 3.0 弃用，因此最好使用 JInput :-) JRequest：[http ://docs.joomla.org/Retrieving_and_Filtering_GET_and_POST_requests_with_JRequest::getVar JInput：](http://docs.joomla.org/Retrieving_and_Filtering_GET_and_POST_requests_with_JRequest::getVar) [http](http://docs.joomla.org/Retrieving_request_data_using_JInput) : //docs.joomla.org/Retrieving_request_data_using_JInput

Joomla 还可以将值存储到用户会话中。如果您想在多个页面上跟踪某些内容，或者想保留用户所做的某些设置（如排序），这很方便。这些被称为用户状态，文档在这里：[http ://docs.joomla.org/How_to_use_user_state_variables](http://docs.joomla.org/How_to_use_user_state_variables)

# firefox - 如何使用 selenium IDE 为 firefox 身份验证弹出窗口自动填充用户名/密码

> ID：16023869
> 
> 赞同：2
> 
> 时间：2013-04-15T20:06:23.057
> 
> 标签：firefox, selenium-rc, selenium-ide

我有一个可以工作的 selenium 脚本，但是当它用 selenium-rc 打开时，它位于一个新的实例中，需要我重新登录。有没有办法自动填写弹出的“需要身份验证”窗口的用户名/密码？

我尝试了以下方法，但它不起作用：

`http://username:password@site.com/`代替`http://site.com/`

除了调用像 autohotkey 这样的另一个脚本之外还有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T16:17:37.947

你可以试试Firefox 插件[Integrated Authentication for Firefox 。](https://addons.mozilla.org/de/firefox/addon/integrated-auth-for-firefox/)安装后，您可以在 Firefox 的选项菜单中配置插件。只需将您的 site.com 添加到启用了集成身份验证的站点，然后查看它是否适合您。就我而言，它解决了问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T22:42:32.767

我最终将 AutoIT 与包含以下内容的登录脚本一起使用，并且它有效：

```
WinWaitActive("Authentication Required")

Send("Username")

Send("{TAB}")

Send("Password")

Send("{ENTER}") 
```

Firefox 环境设置的支持信息可在此处找到：

[http://www.passionatetester.com/2010/03/how-to-handle-windows-authentication.html](http://www.passionatetester.com/2010/03/how-to-handle-windows-authentication.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T09:17:01.503

你得到的问题的答案[这里得到的问题的答案](http://www.passionatetester.com/2010/03/how-to-handle-windows-authentication.html)

你必须为 selenium RC 创建 FF 配置文件，你可以从[这里创建配置文件](http://girliemangalo.wordpress.com/2009/02/05/creating-firefox-profile-for-your-selenium-rc-tests/)

# c++ - 将 VC++ 6.0 转换为 VC++ 2005

> ID：16023874
> 
> 赞同：2
> 
> 时间：2013-04-15T20:06:53.910
> 
> 标签：c++, visual-c++, visual-studio-2005

我已经使用 Visual Studio 2005 将一个为 VC++ 6.0 编写的 C++ 程序转换为 VC++ 2005。

这会引发很多错误，因为 VC++ 2005 在某种程度上比 6.0 更“严格”。

我能想到两种可能的解决方案，但我不知道是否可能。

是否可以更改 VS2005 中的“严格”级别，以便可以使用 VC++ 2005 编译应用程序？

在开发 .NET 应用程序时，可以更改特定应用程序的 .NET 框架版本。这是否适用于 VC++（升级解决方案后从 2005 年切换到 6.0）？

我是 VC++ 新手，所以我是“边编程边学习”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:21:50.713

VS 2005 不允许您“编译为”较旧的编译器版本。VS 2012 允许您编译为 VS 2010，但这是 VS 第一次拥有这样的功能。

如果您想将项目升级到 VS 2005，您将不得不硬着头皮解决问题。 **但这是一件好事！** 以我的经验，“更严格”的编译器确实在原始代码中指出了错误。

当您经历升级编译器的痛苦时，如果可以的话，您应该跳到最新的（VS 2012）。

* * *

另外：在 .NET 中，您的*目标*是特定的 .NET 版本，因为最终用户可能在他们的计算机上安装了不同的 .NET 版本。但是对于 C++，您“定位”的是 x86 或 x64，而不是特定的编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T09:46:32.823

当您第一次将用 Visual Studio 6.0 编写的项目打开到 Visual Studio 2005 中时，IDE 将转换项目并报告错误。

它将列出转换报告中的所有错误和警告并将其显示给您。

除非您删除所有这些错误，否则您将无法成功构建您的项目。但是，您可以更改设置以改变此规则，以便仅显示选定的错误列表。

请按照以下步骤进行操作： 1) 在 Visual Studio 2005 项目中打开 Visual Studio 6.0 项目。2) 转到 Visual Studio 菜单中的工具菜单项。3) 转到选项菜单项。4) 转到性能工具。5) 转到规则。您将找到所有错误/警告的列表以及需要如何报告它们。您可以根据自己的方便更改操作。

我希望这些信息对您有用。

# ios - 在这种情况下如何使按钮居中

> ID：16023878
> 
> 赞同：1
> 
> 时间：2013-04-15T20:07:32.067
> 
> 标签：ios, xcode, ios6

我有这些代码行将我的完成按钮放在工具栏中。我不知道如何居中。我在网上尝试了很多东西，但我找不到一个有效的。

```
self.closeButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(close)];
    self.closeButton.enabled = YES;
    self.closeButton.imageInsets = UIEdgeInsetsZero;
    self.closeButton.style = UIBarButtonItemStylePlain;
    self.closeButton.width = 32.000; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:10:51.807

您可以在您的 closeButton 之前和之后添加一个`UIBarButtonSystemItem`with 。`UIBarButtonSystemItemFlexibleSpace`

```
UIBarButtonItem* flexibleSpace = 
    [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil]; 
```

# php - 如何使base64图像保存更快？

> ID：16023880
> 
> 赞同：3
> 
> 时间：2013-04-15T20:07:50.210
> 
> 标签：php, image-processing, html5-canvas

目前我的网站允许用户保存画布图像，但问题是它需要很长时间。我将画布图像作为 base64 发送到我的 php，它对其进行解码并将其作为 png 图像保存在我的服务器上。另外，我读过 base64 解码将图像大小增加了 30%。有没有更好的方法可以花费更少的时间来保存画布图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T08:12:50.803

您可以通过将 jpg 指定为图像编码格式来减小 base64 的大小（因此上传时间）：

```
canvas.toDataURL('image/jpeg', 0.8); 
```

您可以进一步降低 jpeg 质量（从 0.0 => 质量差到 1.0 -> 质量好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T17:12:39.313

我在我的一个项目中遇到了类似的速度问题，无法弄清楚如何解决这个问题，嘿，皮埃尔，您提供的解决方案大大减少了图像数据的大小，但同时您将在保存的图像上遇到问题从这个数据。我做了同样的事情，当我尝试保存具有透明背景的 png 图像时，我得到了意想不到的图像，有些变成了黑色。所以我坚持不使用`canvas.toDataURL('image/jpeg', 0.8);`并仍在寻找其他替代品。

# css - 只有短段落浮动

> ID：16023884
> 
> 赞同：0
> 
> 时间：2013-04-15T20:08:04.963
> 
> 标签：css, css-float

我有一个页面，其中包含几个浮动元素，导致段落元素出现奇怪的行为。也就是说，只有非常短（小于屏幕宽度）的段落向右浮动。再长一点，段落就会被压下。这是有问题的页面：

[http://staging.pacificlean.net/about-pacificlean/pacificlean-of-washington/](http://staging.pacificlean.net/about-pacificlean/pacificlean-of-washington/)

页面上的元素是：

标题（向左浮动）

子页面链接框（右浮动）

内容段落（向左浮动）

正如您在页面上看到的，只有第一段正确浮动（在标题下方并环绕子页面链接框）。

我对此感到非常困惑，因此，任何帮助都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:10:59.623

删除规则：

```
.about-content p {
float: left;
} 
```

这实际上是防止段落在页面上浮动。正如[规范](http://www.w3.org/TR/CSS2/visuren.html#floats)所述：

> 浮动框的外部顶部不得高于源文档中早期元素生成的任何块或浮动框的外部顶部。

# c - 为什么 printf() 可以解析变量名以访问存储在其中的值，但 scanf() 不能（在 C 编程中）？

> ID：16023886
> 
> 赞同：0
> 
> 时间：2013-04-15T20:08:50.097
> 
> 标签：c, printf, scanf

scanf() 需要一个指针作为参数，但 printf 不需要。printf 只需要变量的名称，它似乎以某种方式获得了存储在变量内存位置的值。为什么不通过将变量名称解析到内存位置（与 printf 的工作方式相同）并将值存储在其中来使 scanf 以相同的方式运行？

1.  printf("%d",&var) 和 printf("%d",var) 有什么区别
2.  printf("%p",&var) 和 printf("%p",var) 有什么区别

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T20:11:30.670

C 是一种按值传递的语言。如果你要写：

```
int x;
scanf("%d", x); 
```

`scanf`将不知道将扫描结果放在哪里 - 您需要将指针传递给存储扫描值的内存位置：

```
scanf("%d", &x); 
```

如果这有助于您理解它，您还可以创建一个显式指针变量：

```
int *y = &x;
scanf("%d", y); 
```

相反，`printf`不关心值的位置，只关心值恰好是什么。所以传递值：

```
printf("%d", x); 
```

很好。至于您的具体问题（假设`int var;`）：

> `printf("%d",&var)`和有什么区别`printf("%d",var)`

严格来说，第一个会导致未定义的行为，第二个会打印 的值`var`。在实践中，很多实现都会`var`在第一种情况下打印地址。

> `printf("%p",&var)`和有什么区别`printf("%p",var)`

这种情况正好相反。第一个打印 的地址`var`，第二个导致未定义的行为。在实践中，它可能会打印 的值`var`，但您不应该依赖它。要真正正确，第一个也应该是`printf("%p", (void *)&var);`，但是我从未见过您在那里编写的内容无法正常工作的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T20:11:09.340

在第一种情况下，您正在打印的地址`var`。在第二种情况下， 的内容`val`。
`&val`是 的地址`val`。
`scanf`获取地址（指针）以获取值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:12:07.497

您通过值将变量传递给 printf，这就是 printf 需要知道的所有内容，它只应该打印变量（或表达式）的值。但这对于 scanf 来说是不够的，它需要修改变量所占用的内存，您希望将数据从例如标准输入中读取。这就是为什么 scanf 需要变量占用的内存地址的原因——没有其他方法可以修改变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T20:12:35.227

因为`scanf()`需要修改它的论点。而且，由于在 C 中，参数没有“按引用传递”语义，只有按值传递（这本质上意味着每个参数的值在传递给函数时被复制），因此，只能使用指针来让函数修改它们的参数。

> `printf("%d", &var)`和 和有什么不一样`printf("%d", var)`？

第一个总是调用未定义的行为，第二个不会 if `var`is an `int`, `short`or `char`。

> `printf("%p", &var)`和 和有什么不一样`printf("%p", var)`？

第一个总是调用未定义的行为，第二个不会 if `var`is a `void *`。

# java - 几个 Flume-ng hdfs sinks 写入同一路径

> ID：16023887
> 
> 赞同：0
> 
> 时间：2013-04-15T20:08:53.143
> 
> 标签：java, logging, hdfs, flume

我想了解 flume-ng 将如何处理文件名冲突方面的这种情况。假设我有几个配置相同的水槽代理实例，客户端将它们用作负载平衡组。

> a1.sinks.k1.hdfs.path = /flume/events/path

Flume 代理如何生成文件名以使它们在代理之间具有唯一性？它是否以某种方式将代理名称附加到它（名称看起来像数字，所以很难弄清楚）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:12:50.053

Flume 不会自动解决这个问题。默认情况下，HDFS sink 创建名称等于当前时间戳（以毫秒为单位）的新文件，因此如果同时创建两个文件，可能会发生冲突。

修复它的一种方法是在不同的接收器中手动设置不同的文件前缀：

```
a1.sinks.k1.hdfs.filePrefix = agentX 
```

您也可以在前缀定义中使用事件标头。例如，如果您使用[主机拦截器](http://flume.apache.org/FlumeUserGuide.html#host-interceptor)，它将代理主机名的值添加到事件“主机”标头中，您可以执行以下操作：

```
a1.sinks.k1.hdfs.filePrefix = ${host} 
```

如果您需要完全自动生成唯一的文件名，您可以开发自己的拦截器，它将 UUID 标头添加到事件中。[请参阅此处](https://git-wip-us.apache.org/repos/asf?p=flume.git;a=tree;f=flume-ng-core/src/main/java/org/apache/flume/interceptor;h=585cb721d1ae092d6cf43bc65f7d84f5eecd7e63;hb=trunk)的示例。

# cookies - Safari binarycookies 导出到 txt

> ID：16023889
> 
> 赞同：0
> 
> 时间：2013-04-15T20:09:06.947
> 
> 标签：cookies, safari

您能否推荐一些适用于 Windows 或 Unix 的工具，允许以 binarycookies 格式导出到 txt Safari cookie？

如果存在，它需要什么？如何运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T04:05:49.513

我在这里找到了要点：[MacRuby script to export Safari 5.1 cookies to a human-readable format](https://gist.github.com/sgonyea/1385008)。导出部分也与我在 OS X 10.8.3 上的 Safari 6.0.3 兼容。它需要安装 macruby。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T06:19:58.457

如果您可以访问 Xcode，您还可以编译以下 Swift 命令行实用程序。我曾经导出用于 CURL 和 youtube-dl 的 cookie：[https ://github.com/aseidlitz/CookieExporter](https://github.com/aseidlitz/CookieExporter)

# c# - 最初分配的变量

> ID：16023890
> 
> 赞同：3
> 
> 时间：2013-04-15T20:09:08.097
> 
> 标签：c#, variables, variable-assignment

最初分配了以下两类变量：

*   类实例的实例变量。

*   最初分配的结构变量的实例变量。

现在最初分配的结构变量是什么意思？

我们不是在谈论局部变量，对吧？所以我们谈论的是在函数成员定义中使用的字段变量（在这两个类别中）？

澄清这一点将不胜感激。并提前感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T20:59:47.267

> 最初分配了以下两类变量：（1）类实例的实例变量和（2）最初分配的结构变量的实例变量。“最初分配的结构变量”是什么意思？

这意味着*最初分配的结构类型变量*。

跟着。

```
class C 
{
    public int i;
}
...
C c = new C();
Console.WriteLine(c.i); 
```

`c.i`是一个类的实例变量，所以它*最初是赋值*的。

```
struct S 
{
    public int j;
}
class D 
{
    public S t;
}
...
D d = new D();
Console.WriteLine(d.t.j); 
```

`d.t`是一个类的实例变量，所以最初是赋值的。`d.t.j`是 struct 的实例变量，类型`S`变量是初始分配的，因此也是初始分配的。`d.t``S``d.t.j`

也就是说，如果保存结构值的变量*本身*是初始分配的，则结构的字段是初始分配的。

相比之下：

```
void M()
{
    int q;
    Console.WriteLine(q); // Error
    S u;
    Console.WriteLine(u.j); // Error 
```

既不`q`是也不`u`是最初分配的；它们不是任何类的字段。由于`u`最初没有分配，`u.j`因此也不是。

现在有意义吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:13:50.393

你的问题不是很清楚。但是始终将类或结构的*字段*（实例或静态）视为已分配是正确的。它将具有类型的默认值，`null`用于引用类型和可为空的类型，以及“零”或其他值类型类似于零的值。

相反，*局部变量*，即在方法（或构造函数，或访问器等）中声明的变量，必须在使用之前显式分配给它。

在示例中：

```
class Example
{
    int field;

    void Method()
    {
        int local;
        ...
        ...
    }
} 
```

被`field`认为是自动分配的，并且将具有初始值`0`，而变量`local`是未分配的，必须先分配给（稍后在同一方法中），然后才能使用（甚至稍后在同一方法中）。

但是，未分配的局部变量可以作为`out`方法的参数传递。

**编辑：（**在有用的评论后）

我上面的回答对类的（静态和非静态）字段和结构的静态字段给出了非常精确的描述。但是，正如评论所指出的，在结构的实例字段的情况下，缺少一些东西。

当结构实例的所有实例字段都被完全分配时，它就被完全分配了。给定以下（可变的！！）结构：

```
struct SomeStruct
{
    public int AlphaField;
    public int BetaField;
} 
```

那么以下是合法的：

```
void M()
{
    SomeStruct localSS;
    // localSS and its fields are not assigned, and can't be read yet

    localSS.AlphaField = 7;           // legal
    int useA = localSS.AlphaField;    // legal, AlphaField is assigned
    // localSS and its remaining field BetaField are not assigned

    localSS.BetaField = 13;
    string useB = localSS.ToString(); // legal, localSS variable is now fully assigned
} 
```

即使上面的例子看起来很疯狂（因为大多数人不鼓励可变结构），它仍然完全等同于在结构的用户定义实例构造函数中发生的事情。C#规范使用了这样一句话：结构的实例构造函数*的`this`变量与结构类型的参数的行为完全相同`out`——特别是，这意味着必须在实例构造函数的每个执行路径中明确地分配变量。*

请注意，结构的实例构造函数分配所有字段的一种方法是使用`: this(...)`构造函数链接语法链接另一个实例构造函数。

另请注意，结构的实例构造函数必须带参数。表达式`new SomeStruct()`（带有空参数列表）等效于并计算为所有字段都具有其默认值`default(SomeStruct)`的明确分配的实例。`SomeStruct`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T20:13:21.123

类（在 C# 中）是引用类型的定义。这意味着该类的任何成员都存储为引用。

结构（在 C# 中）是值类型的定义。此类的任何成员都存储为值，而不是引用。

引用类型可以取消分配，因为在使用它们之前不需要分配它们。使用未分配的类实例成员会导致运行时错误。

值类型需要一个值来存储，因为否则它们将无法确定它们的内存空间。使用未分配的结构成员会导致编译时错误。

# mysql - 获取最新序列号的 MAX 记录

> ID：16023894
> 
> 赞同：0
> 
> 时间：2013-04-15T20:09:23.003
> 
> 标签：mysql, sql, greatest-n-per-group

我有下表和一些示例数据。

```
Record_ID    Counter    Serial    Owner
1           0           AAA       Jack
2           1           AAA       Kevin
3           0           BBB       Jane
4           1           BBB       Wendy 
```

基于与上述类似的数据，我正在尝试为 MySQL 编写一个 SQL 查询，以获取`Counter`每个`Serial`数字的最大值的记录。 **我似乎遇到问题的部分是获取查询以获取最近更新的 50 个唯一序列号。**

下面是我基于[这个 StackOverflow question 提出](https://stackoverflow.com/questions/6860746/sql-selecting-multiple-columns-based-on-max-value-in-one-column)的查询。

```
SELECT * 
FROM   `history` his 
   INNER JOIN(SELECT serial, 
                     Max(counter) AS MaxCount 
              FROM   `tracking` 
              WHERE  serial IN (SELECT serial 
                                FROM   `history`) 
              GROUP  BY serial
              ORDER  BY record_id DESC) q 
           ON his.serial = q.serial 
              AND his.counter = q.maxcount 
LIMIT  0, 50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:12:36.597

它看起来像一个经典[的每组最大 n](/questions/tagged/greatest-n-per-group "显示标记为“每组最大数”的问题")问题，可以通过以下方式解决：

```
select his.Record_ID, his.Counter, his.Serial, his.Owner
from History his
inner join(
    select Serial, max(Counter) Counter
    from History
    group by Serial
) ss on his.Serial = ss.Serial and his.Counter = ss.Counter 
```

如果要对数据集使用特定过滤器，则应在子查询中应用所述过滤器。

另一个对此问题有更多解释的来源：[SQL Select only rows with Max Value on a Column](https://stackoverflow.com/questions/7745609/sql-select-only-rows-with-max-value-on-a-column/7745635#7745635)

# css - Twitter Bootstrap - 它不会破坏每一个好的现代网页设计原则吗？

> ID：16023896
> 
> 赞同：0
> 
> 时间：2013-04-15T20:09:36.123
> 
> 标签：css, twitter-bootstrap

我正在尝试[Twitter Bootstrap](http://twitter.github.io/bootstrap/)，因为我对所有那些响应迅速、设计精良的超级用户友好的东西都很着迷。看到一切都只是反良好的原则，我感到非常失望！我的意思是，我是不是弄错了，或者您必须将您想要样式化的所有内容都包装到`div`一个适当的类中？我已经看到了两个被破坏的原则：不要`div`对所有内容都使用 s 以及将内容与样式强烈混合。

我将不胜感激对我所说的进行任何更正（例如，是否可以为`header`标签提供一类`row`并且仍然受益于 Bootstrap 设计？）。

## 编辑

当我说“将内容与样式强烈混合”时，我的意思是你不应该通过给它一个类来设置哪个元素是一列或者它需要多少空间：你应该在 CSS 样式表中这样做！此外，Bootstrap 会迫使您过度使用`div`s，这非常不利于可访问性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:14:03.140

我认为自己没有足够的经验来判断它是否是反模式，但是对于您的第二个问题，是的，您可以将 .row 和 .span 类放在任何元素上，它们不受限制，请参阅源代码：

[https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L597](https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L597)
[https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L577](https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L577)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:15:09.527

经过一番深入研究，我最终得出的唯一可用折衷方案是使用较少版本的 Bootstrap，而不是纯 CSS 版本。这样，您无需将类添加`span*`到列中，而是将`makeColumn(*)`mixin 包含在列样式中（在您的 Less 样式表中）。

老实说，在深入研究之后，我刚搬到 SASS + Foundation，我从一个全新的角度看待这件事......当来到 Less + Bootstrap 时，我很确定一些聪明的老灰胡子的人会说:**跑，你们这些笨蛋！**

# sharepoint - 在 SharePoint 企业中查找 Microsoft Project 的数据

> ID：16023897
> 
> 赞同：0
> 
> 时间：2013-04-15T20:09:45.553
> 
> 标签：sharepoint, ms-project

目标：
从 SharePoint 2010 和/或 2013 企业版中查看 Microsoft Project 数据库的表数据。

问题：
我在哪里可以找到数据库中 Microsoft Project 的原始数据？我想查看时间、里程碑等项目的详细数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T10:06:18.750

SharePoint 不“了解”项目管理并将 MS-Project 文件保存为一个 BLOB。只有 Microsoft Project Server 能够解析 MS-Project 格式并将数据存储在 DB 中。

不过，有几种免费的选择：

*   解析 MS-Project XML 文件。这其实没那么难。
*   [http://mpxj.sourceforge.net/](http://mpxj.sourceforge.net/)是一个用于读写MS-Project的Java库
*   [http://www.project-open.org/](http://www.project-open.org/)包含一个 MS-Project 导入（由我自己编写），它将 MS-Project 结构存储在 PostgreSQL 数据库中。

# java - 使用 Java 在标签打印机中打印标签

> ID：16023904
> 
> 赞同：1
> 
> 时间：2013-04-15T20:10:14.790
> 
> 标签：java, printing

在过去的 3 个小时里，2 种碳素墨水和 2 卷标签，我仍然无法打印一个。为此苦苦挣扎了一整天，仍然没有弄清楚任何事情。从表面上看，似乎一切都建立在运气的基础上。

```
class MyPrintable implements Printable {
    public int print(Graphics g, PageFormat pf, int pageIndex) {
        if (pageIndex == 0) {
            Paper paper = new Paper();

            paper.setImageableArea(0, 0, 320, 115);
            paper.setSize(340, 128);

            pf.setPaper(paper);

            try {
                BufferedImage read = ImageIO.read(new File("tmp/conv/foo.png"));
                g.drawImage(read.getScaledInstance(220, 50, Image.SCALE_SMOOTH), 40, 10, null);
            } catch (IOException ex) {

            }

            return Printable.PAGE_EXISTS;
        }
        return Printable.NO_SUCH_PAGE;
    }
} 
```

我需要在一个标签上打印一个条形码。标签尺寸为 9 厘米宽和 3.4 厘米高。这使我达到了 340 像素宽和 128 像素高。这就是我将图像大小设置为这些值的原因。

问题是，当我告诉打印机打印时，它会在第 8 个标签上打印条形码。它一直经过 7 个第一个标签，并始终打印第 7 个和第 8 个标签之间的东西。我不知道为什么，我已经尝试过每一个可能的值。我将尺寸设置为 0 像素，可成像尺寸为 0 像素，图像缩放尺寸为 0 像素，但它仍然一直到第 7-8 个标签。

有人可以告诉我我做错了什么吗？

# sql - 在 SQL 查询中有条件地应用 WHERE 子句

> ID：16023907
> 
> 赞同：2
> 
> 时间：2013-04-15T20:10:26.063
> 
> 标签：sql, sql-server, where

我有一个预先存在的程序需要修改，并且以非常简化的方式编写，类似于下面的示例。

该过程通过@StudentID 和@SubjectID 传递，如果@SubjectID = 0，它执行查询而不过滤SubjectID，否则它执行完全相同的查询但过滤SubjectID。

```
CREATE PROCEDURE SomeProcedure
  @StudentID INT,   
  @SubjectID INT    
AS
BEGIN   
  IF(@SubjectID = 0)
  BEGIN  
    SELECT SomeColumns
    FROM SomeTable
    WHERE StudentID = @StudentID
  END 
  BEGIN  
    SELECT SomeColumns
    FROM SomeTable
    WHERE StudentID = @StudentID
    AND SubjectID = @SubjectID
  END 
END 
```

这对我来说似乎很荒谬；我们现在必须维护同一个查询的两个副本；一种根据 SubjectID 过滤，另一种不过滤。我无法控制应用程序希望通过 SubjectID = 0 来获得所有主题的结果这一事实。

鉴于我无法更改过程的签名，我该如何重写它以便不需要两个单独的查询？

我尝试在 WHERE 子句中使用 CASE 语句，但我不知道如何有条件地包含 WHERE 谓词的一部分。

这个问题的英文翻译是“IF @SubjectID = 0, return results with any SomeTable.SubjectID value, ELSE only return results where SomeTable.SubjectID = @SubjectID”

如何在单个查询中完成此操作（请不要提供动态 SQL 建议）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T20:11:46.450

虽然我认为拥有两个单独的查询并没有什么问题，但如果您只想使用一个查询，那么您可以执行以下操作：

```
SELECT SomeColumns
FROM SomeTable
WHERE StudentID = @StudentID
AND (SubjectID = @SubjectID OR @SubjectID = 0) 
```

# kendo-ui - Kendo TreeView 选择功能和事件不当行为

> ID：16023908
> 
> 赞同：0
> 
> 时间：2013-04-15T20:10:26.787
> 
> 标签：kendo-ui, kendo-treeview

对于那些可能花费数小时试图理解为什么他们没有从 select 回调中获得相同行为的人，无论它是由 select 事件还是由 select 方法触发的。

我不明白为什么当我手动选择一个项目时它工作得很好，而如果我使用这个方法没有反应。我试图在小部件本身上触发树元素上的事件，因为它似乎根本没有被触发。

```
select: function(e){
  var item = e.node;
  appui.f.post("admin/object_editor/obj/" +
    ( typeof(item.class) !== "undefined" ? "object" : "field" ) +
    "/" + item.id + "/" + item.uid, {partial:1}, $("#object_cfg_container"));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:10:26.787

该函数被触发，但在使用 select 方法时从第一行返回错误。

实际上发生的情况是事件作为函数的参数发送，您可以在其中找到节点属性，即新选择的对象。

但是，当您使用 select 方法时，事件参数不再具有节点属性。

因此，也许您发现不带参数使用的 select() 方法返回所选元素。

但是出现了一个新问题，这个函数在事件中启动时会返回旧的选中项，而作为方法启动时会返回新选中的项...

我的解决方案：

```
select: function(e){
  var item = e.node ? e.node : this.select(),  
      data = this.dataItem(item);
  ....
} 
```

# php - 如何在使用 Apache 查找图像时触发 [php] 脚本？

> ID：16023914
> 
> 赞同：0
> 
> 时间：2013-04-15T20:10:39.383
> 
> 标签：php, apache, .htaccess, magento

我有一个问题，我们从各种 html 源和直接图像请求加载图像，并且发生“文件不存在”。不幸的是，这是由于许多已调整大小/缓存的图像在此应用程序的缓存清理过程中被破坏，因此必须重新生成。对较小图像的直接 http 请求只会返回一个错误，因为 Apache 除了文件消失之外没有什么不同。

如果出现错误，我想编写一个脚本来重新生成这些图像。换句话说，如果请求特定的原始图像，则会触发错误，然后调用脚本从原始图像重新生成有问题的图像，然后将提供缓存的图像。如何使用 httpd 进行设置？

这是错误日志的片段：

```
[Mon Apr 15 13:51:36 2013] [error] [client xxx.xxx.xxx.xxx] File does not exist: /home/username/public_html/domain.tld/media/catalog/product/cache/1/small_image/180x180/4da38bab36523d0886e53b8d57126395/h/k/hk0412.jpg
[Mon Apr 15 13:57:24 2013] [error] [client xxx.xxx.xxx.xxx] File does not exist: /home/username/public_html/domain.tld/media/catalog/product/cache/1/image/4da38bab36523d0886e53b8d57126395/n/c/nca20212.jpg
[Mon Apr 15 13:57:47 2013] [error] [client xxx.xxx.xxx.xxx] File does not exist: /home/username/public_html/domain.tld/media/catalog/product/cache/1/image/4da38bab36523d0886e53b8d57126395/v/z/vz0612.jpg
[Mon Apr 15 13:58:42 2013] [error] [client xxx.xxx.xxx.xxx] File does not exist: /home/username/public_html/domain.tld/media/catalog/product/cache/1/small_image/220x220/4da38bab36523d0886e53b8d57126395/R/A/RA01112.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:28:04.603

例如，如果请求 URL 包含`/cache/images/abc.jpg`，你可以重写一些 PHP 脚本，如果它不存在

```
# if the file exists, just send it
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^cache/image/.*$ - [L]

# if it doesn't exists, rewrite to PHP script
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^cache/image/.*$ /path/to/script.php?url=$0 [L] 
```

`script.php`重新生成图像并将其发送给客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T20:46:58.913

如果图像不存在，Apache 将触发一个 404 错误页面，您可以将其用于此目的。您可能希望避免在每个请求上触发 PHP 脚本，或者必须使用重写规则检查文件是否存在。

```
ErrorDocument 404 /reCacheImage.php 
```

将类似的内容放在配置中，或者放在 vhost 的目录容器中，或者放在缺少图像的目录中的 .htaccess 中。如果他们不请求任何图像，则无需使用您的脚本回答所有 404 情况。

然后，您的脚本可以创建缓存版本，存储到磁盘，并将状态 200 和创建的图像本身发送回浏览器。下次请求图像时不应调用它。

# java - Sphinx 词法错误解析语法文件

> ID：16023917
> 
> 赞同：0
> 
> 时间：2013-04-15T20:10:44.173
> 
> 标签：java, speech-recognition, sphinx4, jsapi

我一直在用 Java 制作一个语音识别程序，只是为了看看它是如何工作的。直到一天前，一切都运行良好。我不知道发生了什么，因为我没有更改代码中的任何内容。

由于它出现了一个词法错误，我想我只需要粘贴我的语法文件。

控制.gram：

```
#JSGF V1.0;

grammar controls;

public <intro> = "Computer";

public <statement> = <open> | <ignore>;

public <open> = "open" ("chrome" | "word");

public <navigate> = "navigate" "to" (("face" book") | ("stack" "overflow"));

public <ignore> = ("don't" "worry") | ("never" "mind");

public <thanks> = "thanks"; 
```

错误日志：

```
Exception in thread "main" edu.cmu.sphinx.jsgf.parser.TokenMgrError: Lexical error at line 11, column 77\.  Encountered: "\r" (13), after : "\"));"
at edu.cmu.sphinx.jsgf.parser.JSGFParserTokenManager.getNextToken(JSGFParserTokenManager.java:1197)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.jj_ntk(JSGFParser.java:1012)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.item(JSGFParser.java:643)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.sequence(JSGFParser.java:568)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.alternatives(JSGFParser.java:484)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.item(JSGFParser.java:676)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.sequence(JSGFParser.java:568)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.alternatives(JSGFParser.java:484)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.item(JSGFParser.java:676)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.sequence(JSGFParser.java:568)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.alternatives(JSGFParser.java:484)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.RuleDeclaration(JSGFParser.java:450)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.GrammarUnit(JSGFParser.java:313)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.newGrammarFromJSGF(JSGFParser.java:128)
at edu.cmu.sphinx.jsgf.parser.JSGFParser.newGrammarFromJSGF(JSGFParser.java:241)
at edu.cmu.sphinx.jsgf.JSGFGrammar.loadNamedGrammar(JSGFGrammar.java:697)
at edu.cmu.sphinx.jsgf.JSGFGrammar.commitChanges(JSGFGrammar.java:613)
at edu.cmu.sphinx.jsgf.JSGFGrammar.createGrammar(JSGFGrammar.java:300)
at edu.cmu.sphinx.linguist.language.grammar.Grammar.allocate(Grammar.java:116)
at edu.cmu.sphinx.linguist.flat.FlatLinguist.allocate(FlatLinguist.java:300)
at edu.cmu.sphinx.decoder.search.SimpleBreadthFirstSearchManager.allocate(SimpleBreadthFirstSearchManager.java:646)
at edu.cmu.sphinx.decoder.AbstractDecoder.allocate(AbstractDecoder.java:87)
at edu.cmu.sphinx.recognizer.Recognizer.allocate(Recognizer.java:168)
at [MY PACKAGE].Utils.<init>(Utils.java:23)
at [MY PACKAGE].Launcher.<clinit>(Launcher.java:8) 
```

我尝试删除所有空白字符，将其编码为 ANSI、UTF（带和不带 BOM）。所有这些都无济于事......

有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:17:56.540

您缺少报价：

public = "navigate" "to" (("face" `"`book") | ("stack" "overflow"));

那应该解决它:-)

# java - Android：捕获所有可能类型的“Enter”键（硬键和软键）的代码？

> ID：16023920
> 
> 赞同：2
> 
> 时间：2013-04-15T20:10:57.490
> 
> 标签：java, android, android-edittext

再会！

我有一个 Android 应用程序（v2.3.3 及更高版本），可让您通过`EditText`控件进行搜索。我正在使用以下代码来检测用户何时完成并按下硬键或软键来执行搜索：

```
EditText editText = (EditText)findViewById(R.id.search_box);    
editText.setOnEditorActionListener(new TextView.OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {

        if (actionId == EditorInfo.IME_ACTION_SEARCH ||
            actionId == EditorInfo.IME_ACTION_DONE ||
            (event.getAction() == KeyEvent.ACTION_DOWN && event.getKeyCode() == KeyEvent.KEYCODE_ENTER)) 
        {
                performSearch();              
                return true;
        }

        return false;
    }
}); 
```

显然，这并没有捕捉到表达“Enter”的所有可能方式，因为 beta 测试人员只是告诉我他们的 HTC Evo 软键盘上的“Enter”键没有任何作用。搜索硬键（放大镜）有效，但此代码未从软键盘捕获事件。

阅读一些帖子，这类问题的大多数答案都包含上述部分或全部逻辑。我还读到 HTC 做一些不同的键盘操作。

有没有人有一些防弹代码来检测任何设备上的“Enter”输入？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T08:28:25.097

我认为 textchangelistener 可以捕获回车键，试试这个

```
 commentt.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub
            // if enter is added to your CharSequence 
            // { 
            //      do search

            // }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:09:31.910

```
@Override
public boolean dispatchKeyEvent(KeyEvent event)
{
    if (event.getKeyCode() == KeyEvent.KEYCODE_ENTER)
    {
         performSearch();              
         return true;
    }

    return false;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:29:00.863

我已经遇到了同样的问题。删除对 actionId 的检查，只需`event.getAction() == KeyEvent.ACTION_DOWN`在 if 语句中检查：

```
@Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {

        if (actionId == KeyEvent.ACTION_DOWN) 
        {
                performSearch();              
                return true;
        }

        return false;
    } 
```

# sql - 创建表检查电话号码（类型字符），所有字符都是数字？

> ID：16023924
> 
> 赞同：0
> 
> 时间：2013-04-15T20:11:12.203
> 
> 标签：sql, sql-server-2008

create table_name
(
    TelNum char(20) //all character is numbers
)
我是 Sql 服务器的新手。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:16:18.093

可能有更好的方法可以做到这一点，但我正在考虑`LIKE`一种双重否定，如下所示：

```
ADD CONSTRAINT CK_TelNum CHECK (TelNum NOT LIKE '%[^0-9]%') 
```

检查以确保`TelNum`不包含除 0 到 9 以外的任何字符。这听起来有点混乱，但最好指定允许的字符，*而**不是*不包含的字符。

[SQL Fiddle 示例在这里](http://sqlfiddle.com/#!3/86ef9/8)。

# actionscript-3 - Air for iOS - StageVideo - 索引超出范围错误

> ID：16023925
> 
> 赞同：0
> 
> 时间：2013-04-15T20:11:17.733
> 
> 标签：actionscript-3, video, air

当我在 Flash Pro CS5 中使用 StageVideo 时，我总是遇到错误：

> RangeError：错误 #1125：索引 0 超出范围 0

通过更新和使用 Flash Pro 中的调试播放器解决了这个问题，因为默认的 SWF 播放器（在测试电影时使用）不够新，无法支持 StageVideo。

现在，我正在使用 Flash Pro CS6 使用 Adob​​e Air 3.4 编译 iOS 应用程序。它在我的 iPad 上运行良好，但在我的台式机上测试 Air 应用程序时，无论是否处于调试模式，我总是遇到同样的错误。

有可能摆脱这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:18:02.913

答案很简单。Adobe Air 桌面版不支持 StageVideo...

> AIR 桌面或扩展桌面配置文件不支持 StageVideo 类。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageVideo.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageVideo.html)

# sql - sp_send_dbmail: FROM_ADDRESS

> ID：16023926
> 
> 赞同：14
> 
> 时间：2013-04-15T20:11:19.340
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。当我执行时，`sp_send_dbmail`我无法更改`FROM_ADDRESS`我们 DBA 指定的默认值。如果它不起作用，为什么会有这个参数？**如何指定“自定义” `FROM_ADDRESS`？**

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-15T20:17:47.553

您是否尝试过这种确切的格式：

```
@from_address = 'custom display name <custom_address@your_domain.com>' 
```

? 此外，[根据文档](http://msdn.microsoft.com/en-us/library/ms190307.aspx)，您需要确保您的 SMTP 服务器将接受覆盖 - 它可能在服务器上被拒绝并且与您的代码无关。

最后，有可能在 2005 兼容模式下，`@profile_name`将不可见。（我现在无法确认，但这是 SQL Server 2008 中添加的新参数。）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-11-10T13:08:58.073

`@from_address = 'custom_address@your_domain.com'`应该管用。

# ruby - Ruby：'case true'什么时候阻塞循环？

> ID：16023930
> 
> 赞同：2
> 
> 时间：2013-04-15T20:11:41.553
> 
> 标签：ruby

有一段代码

```
 A = "am"
    F = "fm"
    def fmam(n)
        return if n == 0
        loopy(n - 1)
        case true
        when n % 15 == 0
            puts B + L
        when n % 5 == 0
            puts L
        when n % 3 == 0
            puts B
        else
            puts n
        end
    end
    fmam(20) 
```

在这段代码中，这段代码是`case true` 做什么的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T20:29:03.390

`case`有两种形式。您使用的表单使用运算符将`case`​​关键字（`true`在本例中）之后的“目标”与每次比较（每个`when`关键字之后的部分）进行比较`===`。您最终得到一系列布尔表达式，并为第一个计算结果为`true`. 因此，它是多余的并且有点混乱。最好删除`true`并使用第二种形式`case`：

```
 case
    when n % 15 == 0
        puts B + L
    when n % 5 == 0
        puts L
    when n % 3 == 0
        puts B
    else
        puts n
    end 
```

这做同样的事情，但更清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T20:17:13.177

[`tutorialspoint`](http://www.tutorialspoint.com/ruby/ruby_if_else.htm):- 说

```
case expression
[when expression [, expression ...] [then]
   code ]...
[else
   code ]
end 
```

比较使用操作符时`expression`指定的`case`和指定的，`===`并执行`when`匹配的子句的代码。

说，看下面：

```
A = "am"
F = "fm"
L = "dd"
B = 'aa'
def fmam(n)
    return if n == 0

    case true
    when n % 15 == 0
        puts B + L
    when n % 5 == 0 # this evaluates to true first, which then matched with true value mentioned in the case statement.
        puts L
    when n % 3 == 0
        puts B
    else
        puts n
    end
end
fmam(20) #=> dd 
```

现在看下面的代码：

```
A = "am"
F = "fm"
L = "dd"
B = 'aa'
def fmam(n)
    return if n == 0

    case false
    when n % 25 == 0 # this evaluates to false first, which then matched with false value mentioned in the case statement.
        puts B + L
    when n % 5 == 0
        puts L
    when n % 3 == 0
        puts B
    else
        puts n
    end
end
fmam(30) #=> aadd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:31:53.287

您可以将 case 语句重构为

```
msg = case 0
when n % 15
  B + L
when n % 5
  L
when n % 3
  B
else
  n
end
puts msg 
```

# python - sockjs - 实现房间的例子

> ID：16023933
> 
> 赞同：1
> 
> 时间：2013-04-15T20:11:50.383
> 
> 标签：python, tornado, sockjs

我想让用户创建并加入一个“房间”，以便他们可以协作。

我正在查看[SockJs Multiplexer 服务器](https://github.com/sockjs/websocket-multiplex)，想知道我是否可以利用其中的一些来创建和广播到特定的频道/房间。

在示例中，[手动创建了一个通道](https://github.com/sockjs/sockjs-node/blob/master/examples/multiplex/server.js#L15)，[客户端连接到该通道](https://github.com/sockjs/sockjs-node/blob/master/examples/multiplex/index.html#L86)。

将这些频道视为房间有效吗？

有没有办法动态创建这些通道而不是在服务器上手动声明它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T09:24:42.067

免责声明：在我写完答案之前，我没有注意到您指的是服务器的 Javascript 版本。因此，我的代码示例是使用基于 Python 的[sockjs-tornado](https://github.com/MrJoes/sockjs-tornado)给出的，但我想原理应该是相同的。

`SockJSConnection`是的，您可以通过在每个派生类中保留一组引用连接来将通道视为房间。为此，您只需将每个连接类从

```
class AnnConnection(SockJSConnection):
    def on_open(self, info):
        self.send('Ann says hi!!')

    def on_message(self, message):
        self.broadcast(self.connected, 'Ann nods: ' + message) 
```

至

```
class AnnConnection(SockJSConnection):
    connected = WeakSet()

    def on_open(self, info):
        self.connected.add(self)
        self.send('Ann says hi!!')

    def on_message(self, message):
        self.broadcast(self.connected, 'Ann nods: ' + message)

    def on_close(self):
        self.connected.remove(self)
        super(AnnConnection, self).on_close() 
```

在[server.py](https://github.com/mrjoes/sockjs-tornado/blob/master/examples/multiplex/server.py#L24)中。

为了动态创建通道，我稍微更改了`__main__`代码和`MultiplexConnection`类，并添加了几个新类。在`if __name__ == "__main__":`街区，

```
# Create multiplexer
router = MultiplexConnection.get(ann=AnnConnection, bob=BobConnection,
                                 carl=CarlConnection) 
```

改为

```
# Create multiplexer
router = MultiplexConnection.get() 
```

尽管

```
class MultiplexConnection(conn.SockJSConnection):
    channels = dict()
    # …

    def on_message(self, msg):
        # …
        if chan not in self.channels:
            return 
```

在[MultiplexConnection](https://github.com/mrjoes/sockjs-tornado/blob/master/examples/multiplex/multiplex.py#L49)更改为

```
class MultiplexConnection(conn.SockJSConnection):
    channels = dict()
    _channel_factory = ChannelFactory()
    # …

    def on_message(self, msg):
        # …
        if chan not in self.channels:
            self.channels[chan] = self._channel_factory(chan) 
```

和班级

```
class DynamicConnection(SockJSConnection):
    def on_open(self, info):
        self.connected.add(self)
        self.send('{0} says hi!!'.format(self.name))

    def on_message(self, message):
        self.broadcast(self.connected, '{0} nods: {1}'
            .format(self.name, message))

    def on_close(self):
        self.connected.remove(self)
        super(DynamicConnection, self).on_close()

class ChannelFactory(object):
    _channels = dict()

    def __call__(self, channel_name):
        if channel_name not in self._channels:
            class Channel(DynamicConnection):
                connected = WeakSet()
                name = channel_name

            self._channels[channel_name] = Channel

        return self._channels[channel_name] 
```

被添加到[multiplex.py](https://github.com/mrjoes/sockjs-tornado/blob/master/examples/multiplex/multiplex.py)。

# c++ - 通过 libstdc++ 调试

> ID：16023934
> 
> 赞同：11
> 
> 时间：2013-04-15T20:11:53.093
> 
> 标签：c++, debugging, libstdc++

我在 GNU/Linux 上使用 gcc，并且安装了 libc 和 libstd++ 的调试文件和头文件。但我不知道如何告诉 gdb 使用它们的源代码，尤其是调试到 libstd++ 中。libstdc++ 本身的源代码似乎以复杂的结构提供。我认为*目录*命令是正确的选择。我在这里使用 Debian/Ubuntu 并将带有*apt-get source libstdc++6*的源代码下载到我的主目录中。

我很确定我不需要对 Fedora 采取特殊措施（几年前）。也许Fedora为此做了特殊的准备。所以我会很高兴看到适合每个发行版的一般说明。

谢谢

**更新**我发现，除了 之外
我还需要编译，所以编译命令看起来像.`-D_GLIBCXX_DEBUG``-g``$ g++ -o test test.cpp -g -D_GLIBCXX_DEBUG`

此外，我收到有关缺少*漂亮打印机*的警告，我按照此处所述解决了该问题：http: [//gcc.gnu.org/onlinedocs/libstdc++/manual/debug.html#debug.gdb](http://gcc.gnu.org/onlinedocs/libstdc++/manual/debug.html#debug.gdb)

现在我可以调试到 libstdc++，但我总是收到这条消息：

```
Breakpoint 1, main () at test.cpp:9
9       string str = "str";
(gdb) s
std::allocator<char>::allocator (this=0x7fffffffe1e0)
    at /build/buildd/gcc-4.7-4.7.2/build/x86_64-linux-gnu/libstdc++-v3/include/bits/allocator.h:104
104 /build/buildd/gcc-4.7-4.7.2/build/x86_64-linux-gnu/libstdc++-v3/include/bits/allocator.h: No such file or directory.
(gdb) s
std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string (
    this=0x7fffffffe1c0, __s=0x402930 "str", __a=...)
    at /usr/include/c++/4.7/bits/basic_string.tcc:217
217                    __s + npos, __a), __a) 
```

我不需要将 gdb 中的**目录**设置为我下载的源（我认为它会搜索我的主目录）。所以我想我需要一个不同的命令来解决这个问题并找到“设置替代路径”并将其指向**/home/username/gcc-4.7-4.7.2/gcc-4.7.2/libstdc++-v3**但我没有工作。为什么 gdb在完全错误的地方寻找**allocator.h ？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-22T06:51:46.690

首先找出来源：- [https://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/index.html](https://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/index.html)

稍后编译 libstdc++ 并将 DEBUG_FLAGS 设置为 ON。

然后，尝试使用 gdb 进行调试。

# jsf-2 - 完成过滤表结束时调用backingbean的方法

> ID：16023935
> 
> 赞同：0
> 
> 时间：2013-04-15T20:11:53.160
> 
> 标签：jsf-2, primefaces

完成过滤表结束时调用backingbean的方法。使用**Primefaces**，数据表如下所示：

```
<p:dataTable id="tabla_gral" rendered="#{consumoMaterial.verTabla}" var="item" paginator="true" rows="15" rowKey="#{item.no}" value="#{consumoMaterial.listadoConsumo}" filteredValue="#{consumoMaterial.listadoConsumoFiltered}">
  <p:ajax event="filter" listener="#{consumoMaterial.actualizarSaldos}" update=":form2:tabla_gral" />
  <f:facet name="header">
    <h:outputText value="Búsqueda de Consumo por: #{consumoMaterial.tipoBuscar}: '#{consumoMaterial.codigo}'" />
  </f:facet>
  <p:column exportable="#{consumoMaterial.no}" rendered="#{consumoMaterial.no}" id="cclave" sortBy="#{item.no}" filterBy="#{item.no}" filterMatchMode="contains">
    <f:facet name="header">
      <h:outputText value="Nro" />
    </f:facet>
    <h:outputText value="#{item.no}" />
  </p:column>
  <p:column exportable="#{consumoMaterial.centroCosto}" rendered="#{consumoMaterial.centroCosto}" id="cconcepto" sortBy="#{item.centroCosto}" filterBy="#{item.centroCosto}" filterMatchMode="contains">
    <f:facet name="header">
      <h:outputText value="Centro de Costo" />
    </f:facet>
    <h:outputText value="#{item.centroCosto}" />
  </p:column>
  <p:column exportable="#{consumoMaterial.codigoAlmacen}" rendered="#{consumoMaterial.codigoAlmacen}" id="ctipo" sortBy="#{item.codigoAlmacen}" filterBy="#{item.codigoAlmacen}" filterMatchMode="contains">
    <f:facet name="header">
      <h:outputText value="Almacén" />
    </f:facet>
    <h:outputText value="#{item.codigoAlmacen}" />
  </p:column>
</p:dataTable> 
```

`ajax event="filter"`不起作用，因为它在过滤时不是在完成时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:23:40.553

您可以：在过滤器事件中，您在 oncomplete 或 onsuccess 中调用 JavaScript 函数（这取决于您的目标），JavaScript 函数将触发 click 事件到命令按钮，然后将您想要的操作代码放入该命令按钮：

```
<h:form id="form">  
    <script type="text/javascript">
                    function test(){
                        $(PrimeFaces.escapeClientId('form:btn')).click();
                    }
                </script>
                <p:commandButton  style="display:none !important" id="btn" oncomplete="alert('ab');" value="SB"/>
                <p:dataTable   var="carr" value="#{tabview.l1}" id="carList" >  
                    <p:ajax event="filter" oncomplete="test();"/>
                    <p:column filterMatchMode="contains" filterBy="#{carr.model}" headerText="Model" style="width:30%">  
                        <h:outputText value="#{carr.model}" />  
                    </p:column>  
                    <p:column headerText="MANUFAC" style="width:20%">  
                        <h:outputText value="#{carr.manufacturer}" />  
                    </p:column>  
                </p:dataTable>
 </h:form> 
```

# java - 如何在 Java 中查找表达式、求值和替换？

> ID：16023938
> 
> 赞同：0
> 
> 时间：2013-04-15T20:12:00.957
> 
> 标签：java, regex

我在字符串中有以下表达式（来自文本文件）：

```
{gender=male#his#her}
{new=true#newer#older} 
```

我想：

1.  找到该模式的出现`{variable=value#if_true#if_false}`
2.  将这些变量临时存储在`variableName`、`variableValue`、`ifTrue`、`ifFalse`as等字段中`String`。
3.  根据局部变量（如 String gender = "male" 和 String new = "true"）`variableName`评估表达式。`variableValue`
4.  最后根据（3）用`ifTrue`或替换模式。`ifFalse`

我应该`String.replaceAll()`以某种方式使用，还是如何查找此表达式并保存其中的字符串？谢谢你的帮助

**更新**

它类似于 PHP 的[preg_match_all](http://php.net/manual/es/function.preg-match-all.php)。

**更新 2**

我通过使用`Pattern`和解决了这个问题，`Matcher`因为我在下面发布了答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:14:14.037

如果字符串总是采用这种格式，那么`string.split('#')`可能是要走的路。这将在 '#' 分隔符中返回一个字符串数组（例如 "{gender=male#his#her}".split('#') = {"{gender=male", "his", "her}" }; 用于`substring`删除第一个和最后一个字符以摆脱大括号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:23:14.283

经过一段时间的努力后，我设法使用它来完成这项工作`Pattern`，`Matcher`如下所示：

```
// \{variable=value#if_true#if_false\}
Pattern pattern = Pattern.compile(Pattern.quote("\\{") + "([\\w\\s]+)=([\\w\\s]+)#([\\w\\s]+)#([\\w\\s]+)" + Pattern.quote("\\}"));
Matcher matcher = pattern.matcher(doc);

// if we'll make multiple replacements we should keep an offset
int offset = 0;

// perform the search
while (matcher.find()) {
    // by default, replacement is the same expression
    String replacement = matcher.group(0);
    String field = matcher.group(1);
    String value = matcher.group(2);
    String ifTrue = matcher.group(3);
    String ifFalse = matcher.group(4);

    // verify if field is gender
    if (field.equalsIgnoreCase("Gender")) {
        replacement = value.equalsIgnoreCase("Female")?ifTrue:ifFalse;
    }

    // replace the string
    doc = doc.substring(0, matcher.start() + offset) + replacement + doc.substring(matcher.end() + offset);

    // adjust the offset
    offset += replacement.length() - matcher.group(0).length();
} 
```

# asp.net-mvc-4 - ASP.NET MVC HtmlHelper - 如何编写没有值的属性？

> ID：16023943
> 
> 赞同：2
> 
> 时间：2013-04-15T20:12:25.617
> 
> 标签：asp.net-mvc-4, html-helper

我希望能够编写没有值的属性，例如`autofocus`. 现在，我可以这样做：

```
@Html.TextBoxFor(m => m.UserName, new { autofocus = true }) 
```

但是，这当然写道：

```
<input id="UserName" type="text" value="" name="UserName" autofocus="True"> 
```

有没有办法让没有值的属性写入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T23:35:29.300

评论者 alok_dida 是正确的。

利用：

```
@Html.TextBoxFor(m => m.UserName, new { autofocus = "" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T20:30:18.310

这是实现您想要的目标的简单方法。请注意，这可以很容易地适用于多个属性、变量属性等。

```
public static class HtmlHelperExtensions
{
    private static readonly FieldInfo MvcStringValueField = 
                    typeof (MvcHtmlString).GetField("_value",
                            BindingFlags.Instance | BindingFlags.NonPublic);

    public static MvcHtmlString TextBoxAutoFocusFor<TModel, TProperty>(
                            this HtmlHelper<TModel> htmlHelper, 
                            Expression<Func<TModel, TProperty>> expression, 
                            object htmlAttributes = null)
    {
       if(htmlAttributes == null) htmlAttributes  = new { }

       var inputHtmlString =htmlHelper.TextBoxFor(expression, htmlAttributes);

       string inputHtml = (string) MvcStringValueField.GetValue(inputHtmlString);

       var newInputHtml = inputHtml.TrimEnd('>') + " autofocus >";

       return MvcHtmlString.Create(newInputHtml);
    }
} 
```

使用示例

```
@Html.TextBoxAutoFocusFor(m => m.UserName)

@Html.TextBoxAutoFocusFor(m => m.UserName, new { data-val-foo="bob"  }) 
```

我敢肯定有人会提到反射很慢，确实如此，但是如果读取该字符串的性能对您很重要。我怀疑你会使用 html 助手开始。

# c++ - 简单数组坐标显示匹配

> ID：16023944
> 
> 赞同：1
> 
> 时间：2013-04-15T20:12:34.590
> 
> 标签：c++, visual-studio, visual-c++, multidimensional-array

我正在尝试创建一个数组，该数组接受用户输入并在 99 99 处中断，但多维数组不会停止接受输入值。另一个问题是让值显示在视觉表示下方的网格上。如果需要更多说明，请告诉我。

![在此处输入图像描述](https://i.stack.imgur.com/M2ZrJ.png)

```
#include <iostream>
#include <ctime>

using namespace std;

int main()
{

srand(time(0));

int organisms[22][22];
int rows,
    columns;
int input[22][22];
int *output = new int[];

//filling array

for(int i=0;i<22;i++)
{

    for(int j=0;j<22;j++)
    {
        organisms[i][j]=0;
    }
}

//column output

cout<<"\t\t\t\t\t\t\t\t\t\t\t\t\tColumn\n\n";
for(columns=1;columns<21;columns++)
{
    cout<<"\t"<<columns;
}
cout<<"\n\n\n";

//Row and data output

    for(int i=0;i<20;i++)
    {

        cout<<"Row  "<<i+1<<"\t";

        for(int j=0;j<20;j++)
        {
            cout<<organisms[i][j]<<"\t";
        }
        cout<<endl;
    }
cout<<"\n\n\n";
cout<<"Enter each cell in first colony use row space column Enter format, 3 4, for example.\nEnter 99 99 to end entries.\n";

//input of values

cin.ignore(4);

int m=0;

do
{

    cin>>input[m][m];
    m++;

    if(input[m][m]!=99,99)
        break;

}while(m<20);

/*
while(input[m][m]!=99,99)
{
    cin>>input[m][m];
    m++;

}
 /*
for(int m=0;m<INT_MAX;m++)
{
    cin>>input[m][m];

    if(input[m][m]==99)
        break;
}
*/

//input array indexing

//output array

cout<<"\n\n\n";
cout<<"\t\t\t\t\t\t\t\t\t\t\t\t\tColumn\n\n";
for(columns=1;columns<21;columns++)
{
    cout<<"\t"<<columns;
}
cout<<"\n\n\n";

        for(int i=0;i<20;i++)
        {

        cout<<"Row  "<<i+1<<"\t";
        cout<<endl;

        for(int n=0;n<20;n++)
        {
            cout<<input[i][n]<<"\t";
        }

        cout<<endl;
}

cin.get();
cin.get();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:22:32.577

```
if(input[m][m]!=99,99) 
```

你的输入是一个int数组，`99,99`不是一个int。`5555`例如，使用有效的 int 值或简单`99`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:06:37.243

例如）

```
#include <iostream>
#include <iomanip>
#include <utility>
#include <vector>
#include <iterator>

using namespace std;

const size_t size=20;

char table[size][size];

void table_clear(void){
    for(int v = 0; v<size; ++v)
        for(int h = 0; h<size; ++h)
            table[v][h]=' ';
}

void table_put(pair<int, int> p){
    int v = p.first;
    int h = p.second;
    table[v-1][h-1] = '*';//to zero origin
}

void table_disp(){
    cout << "   ";
    for(int i=0; i<size;++i){
        cout << setw(3) << i + 1;
    }
    cout << "\n" << endl;
    for(int i=0;i<size;++i){
        cout << setw(3) << left << i + 1;
        for(int j=0;j<size;++j){
            cout << setw(3) << right << table[i][j];
        }
        cout << endl;
    }
}

int main(){
    vector<pair<int,int> > v;
    pair<int, int> end(99,99);
    pair<int, int> rc;

    cout << "Enter each cell in first colony use row space column Enter format, 3 4, for example.\n";
    cout << "Enter 99 99 to end entries." << endl;
    while(true){
        int row, column;
        cin >> row;
        cin >> column;
        rc = make_pair(row, column);
        if(rc == end)
            break;
        v.push_back(rc);
    }

    table_clear();
    for(vector<pair<int,int> >::const_iterator iter = v.begin();iter != v.end(); ++iter ) {
        table_put(*iter);
    }
    table_disp();
} 
```

# javascript - 播放框架scala模板中的Javascript确认

> ID：16023947
> 
> 赞同：1
> 
> 时间：2013-04-15T20:12:39.387
> 
> 标签：javascript, playframework-2.0

我想知道是否有办法在播放框架中使用带有 scala html 模板的传统 javascript 确认框。

```
@for(item <- listItems) {
            <li>
                <b>Item: </b>@item.name<br>

                @form(routes.Application.deleteItem(item.id)) {
                    <input type="submit" value="Delete" class="btn btn-danger">
                }
            </li><br>
        } 
```

这就是我目前正在使用的观点。正如您从代码中看到的那样，它会显示“项目”对象的列表，并且每个对象旁边都会出现一个删除按钮。我只是想在实际调用 deleteItem 方法之前提示某种确认对话框。

我知道如何使用一些标准的 HTML 和 javascript 来做到这一点，但这仅用于修改 html 元素，是否可以使用播放表单助手来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:31:06.593

为什么不？:)

其实我认为这个任务不需要使用单字段形式，你可以使用普通链接（当然它应该指向 GET 路由，也可以考虑在参数中添加一些哈希，以防止意外删除）：

```
<a href="@routes.Application.deleteItem(item.id)" 
   class="btn btn-danger" onclick="return confirm('Are you sure?');">Delete</a> 
```

# jquery - JQuery .get() 不从 Perl 脚本返回 HTML

> ID：16023952
> 
> 赞同：0
> 
> 时间：2013-04-15T20:12:52.210
> 
> 标签：jquery, html, ajax, get

我有一个小问题。我刚刚开始使用 JQuery .get() 来调用 pl 脚本并从脚本返回数据。我目前正在使用此功能进行电子邮件验证：

```
$('#billemail').blur(function() {
    if ($(this).val() != '') {
            $.get('./ajax_email_check.pl',{'email':$('#billemail').val() },function(data){
            if (data == "Not Valid") {
                    alert ("Billing email is " + data + "!");
            }
            });
    }
}); 
```

以上工作正常。现在我试图返回一些基于用户选择下拉选项并按下按钮而生成、打印和返回的 HTML。看起来我得到了一个空返回而不是没有返回。如果我运行 pl 脚本，它会毫无问题地返回我正在打印的内容。我正在执行以下操作：

查询：

```
$('body').on('click', '#promotionbtn', function() {
            $.get('./ajax_get_promotion.pl', {'promo':$('select.promoselect').val() }, function(data) {
                    $('.result').html(data);
            });
}); 
```

Perl: #!/usr/bin/perl

```
use DBI;
use CGI qw(:standard);
require "./lib/servervars.pl";
require "./lib/common.pl";

#my $cgi = new CGI;

#print $cgi->header;

our $dbh;

my $promotion_code = param('promo');

my $promo_handle = "select PromoCode, FirstBillDate, DaysWaivedBilling,  RegistrationFee, RegistrationFeePaidBy, RegistrationDiscountPct, InvoiceDiscountPct, ReferralFee, PromotionTitle, PromotionMessage from Promotion where PromoCode='COMATTACH1'";
my $promotion;

my $getpromo = &db_connect($promo_handle);
while (my @promos = $getpromo->fetchrow) {
    $promotion .= "$promos[0]";
}

$getpromo->finish;

print "content-type:text/html\n\n";
print $promotion; 
```

# java - 线程类中圆的状态参数不变

> ID：16023955
> 
> 赞同：0
> 
> 时间：2013-04-15T20:13:22.587
> 
> 标签：java, multithreading, java-2d

我正在尝试爆炸和内爆一个圆圈，但爆炸结束后圆圈的状态不会改变，因此它可以内爆。我正在为这个圈子使用一个线程。如果我从绘制圆形组件的面板类中手动更改状态，则 2 种方法（爆炸和内爆）将起作用。从圆形类爆炸完成后，如何将状态更改为内爆？

这是爆炸方法：

```
public void explode()
    {
        double xCenter=thisBall.x+15;
        double yCenter=thisBall.y+15;

        if( (thisBall.x>xCenter-40) &&(thisBall.y>yCenter-40)&&(size<80))
        {
            thisBall.x--;
            thisBall.y--;
            size+=2;
            thisBall.setFrame(thisBall.x,thisBall.y,size,size);
        }
        else {state=2;}

    } 
```

这是内爆方法：

```
public void implode()
    {
        double xCenter=thisBall.x+40;
        double yCenter=thisBall.y+40;

        if((thisBall.x<xCenter) &&(thisBall.y<yCenter)&&(size>0))
        {
            thisBall.x++;
            thisBall.y++;
            size-=2;
            thisBall.setFrame(thisBall.x,thisBall.y,size+1,size+1);
        }
        else{state=3; } 
```

这是该类的运行方法：

```
public void run()
    { while(state==1)
        {
            try {
                   Thread.sleep(40); 
                }
                catch (InterruptedException e)
                {  System.out.println("Thread Halted");}
            explode();

            controller.repaint(); // this is the panel where i draw the circle
        }
                while(state==2){
            try {
                   Thread.sleep(40); 
                }
                catch (InterruptedException e)
                {  System.out.println("Thread Halted");}
            implode();
            controller.repaint();
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:49:32.993

如果`state`在另一个线程执行该`run`方法时被一个线程更改，则很有可能这些更改不可见，因为`state`不会再次从内存中获取。让它`volatile`再试一次。或使用`AtomicInteger`.

# python - 在 Python 中将矩阵元素从 str 转换为 int

> ID：16023959
> 
> 赞同：0
> 
> 时间：2013-04-15T20:13:40.533
> 
> 标签：python, scripting

我需要将矩阵的元素从 str 转换为 int （在我从文件中读取它们之后）。我不想使用任何外部库。

这是我到目前为止制作的并且正在工作，但我对它不满意（不是很pythonic）：

```
def str2int(matrix):
    n = 1 
    m = 1 
    if type(matrix) is ListType:
        n = len(matrix)
        if type(matrix[0]) is ListType:
            m = len(matrix[0])
    new_matrix = []
    i = 0 
    while i < n:
        new_matrix.append([])
        j = 0 
        while j < m:
            new_matrix[i].append(int(matrix[i][j]))
            j += 1
        i += 1
    return new_matrix 
```

有更好的想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:14:56.367

使用[列表理解](http://www.youtube.com/watch?v=pShL9DCSIUw)：

```
return [[int(i) for i in row] for row in matrix] 
```

# ios - 如何强制我的应用始终全屏

> ID：16023964
> 
> 赞同：0
> 
> 时间：2013-04-15T20:13:59.743
> 
> 标签：ios, objective-c, ipad

你见过苹果商店每件产品旁边的 ipad 吗？他们正在显示产品的技术规格，即使您按下主页按钮也无法离开该屏幕，只是无法退出它，它总是在所有内容之上全屏显示......我想做对于我正在开发的一个应用程序也是如此，我不需要在应用商店中发布它，这样就不会成为问题，但我不确定如何完成这项任务，或者它是否可能......有什么建议吗？

谢谢！

# mysql - MySQL - 组合两条记录，每条记录的不同字段

> ID：16023968
> 
> 赞同：2
> 
> 时间：2013-04-15T20:14:08.980
> 
> 标签：mysql, merge, selection, records

我正在更新现有数据库以简化它并扩展其功能。我有一张如下表：

```
ID  Parent  increment     info 1    info 2
1   103        0            25        1
2   103        1             4        2
3   103        2            45        5
4   103        3            13        7
5   115        0            17        5
6   115        1            23        3
7   116        0            22        2
8   116        1            1         1
9   116        2            7         3
10  117        0            19        4 
```

我希望新表只包含每个“父”的一条记录，并且该记录应该包含大多数字段，来自具有最大“增量”数的父编号的记录中的数据，但对于信息 2 字段它应该以最小“增量”包含记录中的数据。

所需的输出如下：

```
ID  Parent  increment   info 1  info 2
4   103        3        13         1
6   115        1        23         5
9   116        2        7          2
10  117        0        19         4 
```

在 Mysql 中是否可以进行这种选择性合并记录？

我已经研究过使用 Group by Parent，但是有相当多的字段要带过来，所以我不确定这是否可行。我还查看了表的 LEFT OUTER JOIN 以突出显示每个父级中具有最大增量的记录，但这不允许我从具有相同父级但最小增量的记录中选择数据。

很难过，真的很感谢有人的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:27:29.183

是的，你可以这样做。假设您在附加字段中只有 1 到 9 的值：

```
select t.*
from t join
     (select left(parent, locate(' ', parent) - 1) as p,
             MAX(parent) as maxparent,
             max(len
      from t
      group by left(parent, locate(' ', parent))
     ) tp
     on left(t.parent, locate(' ', t.parent) - 1) = tp.p
where t.parent = tp.maxparent 
```

如果数字超过 9，则需要一些额外的摆弄，例如：

```
select *
from t join
     (select left(parent, locate(' ', parent) - 1) as p,
             max(SUBSTRING(parent, locate(' ', parent) + 1)) as maxval
      from t
      group by left(parent, locate(' ', parent))
     ) tp
     on left(t.parent, locate(' ', t.parent) - 1) = tp.p
where t.parent = concate(tp.p, ' ', maxval) 
```

使用修改后的数据结构：

```
select t.*
from t join
     (select parent, MAX(increment) as maxi
      from t
      group by parent
     ) tp
     on t.parent = tp.parent and t.increment = tp.maxi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T23:00:46.650

```
SELECT tt1.ID, tt1.Parent, MaxInc, tt1.info1, tt2.info2 FROM 
(SELECT ID, Parent, MaxInc, info1 FROM test INNER JOIN 
(SELECT Parent AS p, MAX(incr) AS MaxInc FROM test GROUP BY Parent) AS t1 
ON Parent = p AND incr = MaxInc) AS tt1 INNER JOIN
(SELECT Parent, info2 FROM test INNER JOIN 
(SELECT Parent AS p, MIN(incr) AS MinInc FROM test GROUP BY Parent) AS t2 
ON Parent = p AND incr = MinInc) AS tt2 ON tt1.Parent = tt2.Parent 
```

我将增量更改为增量

# android - 尝试访问字符串数组时收到 ArrayIndexOutOfBoundsException

> ID：16023973
> 
> 赞同：1
> 
> 时间：2013-04-15T20:14:28.790
> 
> 标签：android, android-arrayadapter, android-sqlite, android-cursor

我有一个模型，`lineModel`我用它来`items`为我的 gridAdapter 填充一个数组。**当我手动填充条目时，我的模型工作正常。**例如：

```
lineModel[] items = {
                new lineModel(2, "B", "", "#52D017", 5, 10, 30),
                new lineModel(3, "C", "", "#000000", 4, 8, 30),
}; 
```

`items`但是，当使用**SQLite**填充时，我会收到`ArrayIndexOutOfBoundsException`

具体来说：

```
04-15 15:50:21.322: E/AndroidRuntime(26804): java.lang.ArrayIndexOutOfBoundsException: length=0; index=0
04-15 15:50:21.322: E/AndroidRuntime(26804):    at com.idealiner.metrosleepuniversal.model.GridModel.getLines(GridModel.java:68) 
```

**第 68 行**是我调用 lineModel 并用光标中的值填充它。

```
 items[i] = new lineModel(i, c.getString(c_line), c.getString(c_name), c.getString(c_ccolor), 0, 0, 0); 
```

该方法`getLines()`应该返回对象数组，但`while()`我认为在循环中的某个地方存在问题，很可能是在填充数组时。

任何帮助/建议/指导将不胜感激。

整个方法`getLines`如下：

```
public lineModel[] getLines() {

    SQLiteDatabase db = getReadableDatabase();
    SQLiteQueryBuilder qb = new SQLiteQueryBuilder();

    String[] sqlSelect = {"*"}; 
    String sqlTables = "lines";

    qb.setTables(sqlTables);
    Cursor c = qb.query(db, sqlSelect, null, null,
            null, null, null);

    lineModel[] items = {};

    int i=0;

    int c_line      = c.getColumnIndex("line_id");
    int c_name      = c.getColumnIndex("line_name");
    int c_ccolor    = c.getColumnIndex("line_color");
    int c_tcolor    = c.getColumnIndex("text_color");

    c.moveToFirst();

    if (c != null) {
        while(c.moveToNext()) {
            items[i] = new lineModel(i, c.getString(c_line), c.getString(c_name), c.getString(c_ccolor), 0, 0, 0); 
            i++;
        }
        c.close();
    }

    return items;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:16:50.077

好吧，您正在创建一个长度为零的数组：

```
lineModel[] items = {}; 
```

所以`items[i]`当你尝试分配它时没有。

如果您可以使用`c.getCount()`Flavio Faria 建议的那样，请将初始长度设置为该值。否则，我建议您使用[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)，并在进行时使用`.add()`它的项目。您可以获得结果数组`.toArray()`

事实上，您可能会考虑使用 ArrayList 并将其作为返回值传递，这通常是一个好主意。

另一种选择——取决于你如何使用这些线模型项目——是传递一个迭代器而不是一个数组（因为你所做的本质上是迭代到一个数组中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T20:16:57.797

不能`"*"`与列名一起使用。您必须仅使用`"*"`或者必须声明数组中的每一列。所以，不要这样做：

```
String[] sqlSelect = {"0 _id", "*"}; 
```

改为添加它们中的每一个：

```
String[] sqlSelect = { "line_id", "line_name", "line_color", "text_color"}; 
```

或者：

```
String[] sqlSelect = { "*" }; 
```

您还必须删除`c.moveToFirst()`call 以避免跳过游标的第一行，因为`c.moveToNext()`已经为您完成了这项工作。

您的数组还必须足够大以容纳所有项目：

```
lineModel[] items = new lineModel[c.getCount()]; 
```

除此之外，请记住 Java 中的类名以大写字母开头。

# javascript - Javascript 如何维护单个全局命名空间

> ID：16023974
> 
> 赞同：0
> 
> 时间：2013-04-15T20:14:48.950
> 
> 标签：javascript

我想知道 Javascript 如何维护一个全局命名空间。它是否有任何链接器可以链接与该页面相关的所有 JS 并维护单个全局命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:48:05.473

这里要理解的重要一点是，页面中的所有 JavaScript（无论是内联的还是通过拉入的`<script src="...">`）本质上都是在同一个 VM 中连接和执行的。没有必要“维护一个全局命名空间”，因为所有代码都在同一个地方评估并共享同一个全局对象，`window`.

请记住，尽管现代引擎[确实在内部将 JS 编译为本机代码](https://developers.google.com/v8/design#mach_code)，但 JS 不像 C 那样是一种编译语言。因此，没有链接器。

有一个您可能想要理解的 VM 概念，称为[*context*](https://developers.google.com/v8/embed#contexts)。V8 VM 支持运行使用一个全局对象的代码以及使用不同全局对象的代码。这允许在 an`<iframe>`中运行的代码获取自己的全局对象，但仍可以从父页面的上下文访问和调用方法。

# c++ - 数组和比较的问题......在每回合将僵尸移向sp的if下放什么？

> ID：16023975
> 
> 赞同：0
> 
> 时间：2013-04-15T20:14:50.493
> 
> 标签：c++, arrays, if-statement, comparison

```
void moveZombie(char gr[][SIZEX], int sp[], int keyMove[], int zombie[][ZOMBIECOUNT]) {
for(int i(0); i < ZOMBIECOUNT; i++) { 
    if (( zombie[0][ZOMBIECOUNT] < (sp[0] + keyMove[0])) && (zombie[1][ZOMBIECOUNT] < (sp[1] + keyMove[1]))) {

    }
    if (( zombie[0][ZOMBIECOUNT] < (sp[0] + keyMove[0])) && (zombie[1][ZOMBIECOUNT] > (sp[1] + keyMove[1]))) {

    }
    if (( zombie[0][ZOMBIECOUNT] > (sp[0] + keyMove[0])) && (zombie[1][ZOMBIECOUNT] < (sp[1] + keyMove[1]))) {

    }
    if (( zombie[0][ZOMBIECOUNT] > (sp[0] + keyMove[0])) && (zombie[1][ZOMBIECOUNT] > (sp[1] + keyMove[1]))) {

    }
    if (( zombie[0][ZOMBIECOUNT] = (sp[0] + keyMove[0])) && (zombie[1][ZOMBIECOUNT] != (sp[1] + keyMove[1]))) {

    }
    if (( zombie[0][ZOMBIECOUNT] != (sp[0] + keyMove[0])) && (zombie[1][ZOMBIECOUNT] = (sp[1] + keyMove[1]))) {

    } 
```

上面的代码具有一个 for 循环和许多 if。对于 zobie 可能去的地方，每个 if 都应该是不同的选择。这是一个来自 pacman 风格游戏的程序的函数，其中 sp 是 pacman，僵尸盲目地跟随 sp。Sp由人类控制，但僵尸会自动跟随玩家移动。sp 向上、向下、向左、向右移动，但僵尸也可以沿对角线移动。一共有四个僵尸，ZOMBIECOUNT = 4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T20:25:31.520

首先，创建一个大小为 ZOMBIECOUNT 的数组，其中包含 ZOMBIE 的 X 和 Y 位置，而不是 X 和 Y 位置的数组，每个位置都有 ZOMBIECOUNT 条目。

第二，计算`sp[0] + keymove[0]`一次。对 做同样的事情`sp[1] + keymove[1]`。将其存储在具有描述性名称的变量中。

第三，`a = b`不是你想要的，你想要`a == b`的。

第四，计算`sp`x 是更高还是更低或在同一位置。然后计算出`sp`更高或更低或在 y 中的相同位置。将您计算出的内容存储在 中`int`，+1 表示“更高”，-1 表示“更低”，0 表示“相同”。 `zombieDirectionX`和`zombieDirectionY`，或相同的 2 元素数组。

第五，`zombie[0][ZOMBIECOUNT]`在你的条件下不是你想要的。你想要`zombie[0][i]`（或者即使`zombie[i][0]`你像我上面提到的那样颠倒顺序）。

最后，添加`zombiedirectionX`当前僵尸的 x 坐标，使其在 x 轴上向玩家移动 1 个方格，如下所示`zombie[0][i] += zombieDirectionX`：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:23:01.110

好吧`zombie[0][ZOMBIECOUNT]`是错误的。我猜你`zombie[0][i]`的意思是 一个明显的问题是为什么你有一个二维的僵尸数组。为什么一维不够？你做错了什么，但很难说是什么。

你使用的方式`sp`看起来`keyMove`也有点可疑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T20:26:30.813

`i` 在您的代码中不使用索引。

```
for(int i(0); i < ZOMBIECOUNT; i++) { 
if (( zombie[0][ZOMBIECOUNT] < (sp[0] + keyMove[0])) && (zombie[1][ZOMBIECOUNT] < (sp[1] + keyMove[1]))) 
```

可能您想在“某处”使用它；p，也许：

```
for(int i(0); i < ZOMBIECOUNT; i++) { 
    if (( zombie[0][i] < (sp[0] + keyMove[0])) && (zombie[1][i] < (sp[1] + keyMove[1]))) 
```

也改变这一行：

```
&& (zombie[1][ZOMBIECOUNT] = (sp[1] + keyMove[1]))) 
```

可能你想比较，所以使用`==`而不是 single `=`which *assigns*。

# c# - 如何使用电源管理功能 (PowerEnuimerate) 获取电源设置

> ID：16023978
> 
> 赞同：5
> 
> 时间：2013-04-15T20:14:58.817
> 
> 标签：c#, .net, windows, desktop

我需要我的应用程序读取诸如系统在关闭显示器、进入睡眠状态或进入休眠状态之前将等待的时间。据我所知，我需要使用电源管理功能（[http://msdn.microsoft.com/en-us/library/aa373163%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa373163%28v=vs.85%29.aspx)）特别是，它看起来像我需要使用 PowerEnumerate 方法（[http://msdn.microsoft.com/en-us/library/aa372730%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa372730%28v=vs.85%29.aspx)）。

我真的很困惑如何做到这一点。首先，我在 C# 中执行此操作，代码看起来是 C++。其次，C++ 代码似乎并没有真正告诉您如何具体阅读我想要的不同超时。

请注意，我是 Windows 编程和 C# 的新手。我的大部分经验都是在 Java 和 Android 方面。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T22:25:19.700

我[在 MSDN 上](http://social.msdn.microsoft.com/Forums/en-US/vblanguage/thread/4b3cbaa7-00dc-4dc1-bb03-00c4485d2111/)`PowerEnumerate`找到了一个在 VB中使用该函数的示例。

我已将该示例转换为 C#，并将友好名称添加到循环中每个视频设置的输出中。您可以将 更改为`GUID_VIDEO_SUBGROUP`其他子组之一以查看其他设置。

```
using System;
using System.ComponentModel;
using System.Runtime.InteropServices;
using System.Text;

namespace TestProject
{
    class PowerEnumerator
    {
        private static Guid NO_SUBGROUP_GUID = new Guid("fea3413e-7e05-4911-9a71-700331f1c294");
        private static Guid GUID_DISK_SUBGROUP = new Guid("0012ee47-9041-4b5d-9b77-535fba8b1442");
        private static Guid GUID_SYSTEM_BUTTON_SUBGROUP = new Guid("4f971e89-eebd-4455-a8de-9e59040e7347");
        private static Guid GUID_PROCESSOR_SETTINGS_SUBGROUP = new Guid("54533251-82be-4824-96c1-47b60b740d00");
        private static Guid GUID_VIDEO_SUBGROUP = new Guid("7516b95f-f776-4464-8c53-06167f40cc99");
        private static Guid GUID_BATTERY_SUBGROUP = new Guid("e73a048d-bf27-4f12-9731-8b2076e8891f");
        private static Guid GUID_SLEEP_SUBGROUP = new Guid("238C9FA8-0AAD-41ED-83F4-97BE242C8F20");
        private static Guid GUID_PCIEXPRESS_SETTINGS_SUBGROUP = new Guid("501a4d13-42af-4429-9fd1-a8218c268e20");

        [DllImport("powrprof.dll")]
        static extern uint PowerEnumerate(
            IntPtr RootPowerKey,
            IntPtr SchemeGuid,
            ref Guid SubGroupOfPowerSetting,
            uint AccessFlags,
            uint Index,
            ref Guid Buffer,
            ref uint BufferSize);

        [DllImport("powrprof.dll")]
        static extern uint PowerGetActiveScheme(
            IntPtr UserRootPowerKey,
            ref IntPtr ActivePolicyGuid);

        [DllImport("powrprof.dll")]
        static extern uint PowerReadACValue(
            IntPtr RootPowerKey,
            IntPtr SchemeGuid,
            IntPtr SubGroupOfPowerSettingGuid,
            ref Guid PowerSettingGuid,
            ref int Type,
            ref IntPtr Buffer,
            ref uint BufferSize
            );

        [DllImport("powrprof.dll", CharSet = CharSet.Unicode)]
        static extern uint PowerReadFriendlyName(
            IntPtr RootPowerKey,
            IntPtr SchemeGuid,
            IntPtr SubGroupOfPowerSettingGuid,
            IntPtr PowerSettingGuid,
            StringBuilder Buffer,
            ref uint BufferSize
            );

        [DllImport("kernel32.dll")]
        static extern IntPtr LocalFree(
            IntPtr hMem
            );

        private const uint ERROR_MORE_DATA = 234;

        public static void GetCurrentPowerEnumerateVistaAPI()
        {
            IntPtr activeGuidPtr = IntPtr.Zero;
            try
            {
                uint res = PowerGetActiveScheme(IntPtr.Zero, ref activeGuidPtr);
                if (res != 0)
                    throw new Win32Exception();

                //Get Friendly Name
                uint buffSize = 0;
                StringBuilder buffer = new StringBuilder();
                Guid subGroupGuid = Guid.Empty;
                Guid powerSettingGuid = Guid.Empty;
                res = PowerReadFriendlyName(IntPtr.Zero, activeGuidPtr,
                    IntPtr.Zero, IntPtr.Zero, buffer, ref buffSize);

                if (res == ERROR_MORE_DATA)
                {
                    buffer.Capacity = (int)buffSize;
                    res = PowerReadFriendlyName(IntPtr.Zero, activeGuidPtr,
                        IntPtr.Zero, IntPtr.Zero, buffer, ref buffSize);
                }

                if (res != 0)
                    throw new Win32Exception();

                Console.WriteLine("ReadFriendlyName = " +
                    buffer.ToString());

                //Get the Power Settings
                Guid VideoSettingGuid = Guid.Empty;
                uint index = 0;
                uint BufferSize = Convert.ToUInt32(Marshal.SizeOf(typeof(Guid)));

                while (
                    PowerEnumerate(IntPtr.Zero, activeGuidPtr, ref GUID_VIDEO_SUBGROUP,
                    18, index, ref VideoSettingGuid, ref BufferSize) == 0)
                {
                    uint size = 4;
                    IntPtr temp = IntPtr.Zero;
                    int type = 0;
                    res = PowerReadACValue(IntPtr.Zero, activeGuidPtr, IntPtr.Zero,
                        ref VideoSettingGuid, ref type, ref temp, ref size);

                    IntPtr pSubGroup = Marshal.AllocHGlobal(Marshal.SizeOf(GUID_VIDEO_SUBGROUP));
                    Marshal.StructureToPtr(GUID_VIDEO_SUBGROUP, pSubGroup, false);
                    IntPtr pSetting = Marshal.AllocHGlobal(Marshal.SizeOf(VideoSettingGuid));
                    Marshal.StructureToPtr(VideoSettingGuid, pSetting, false);

                    uint builderSize = 200;
                    StringBuilder builder = new StringBuilder((int)builderSize);
                    res = PowerReadFriendlyName(IntPtr.Zero, activeGuidPtr,
                        pSubGroup, pSetting, builder, ref builderSize);
                    Console.WriteLine(builder.ToString() + " = " + temp.ToString());

                    index++;
                }
            }
            finally
            {
                if (activeGuidPtr != IntPtr.Zero)
                {
                    IntPtr res = LocalFree(activeGuidPtr);
                    if (res != IntPtr.Zero)
                        throw new Win32Exception();
                }
            }
        }
    }
} 
```

此代码的结果输出：

![电源设置](https://i.stack.imgur.com/Bx7Zn.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-06T15:11:31.850

但是接受的答案仍然有效，我想指出其中存在一个错误，导致它枚举所有默认值而不是实际值。

读取 AC 值时，还需要传递子组 guid：

```
res = PowerReadACValue(IntPtr.Zero, activeGuidPtr, pSubGroup, ref settingGuid, ref type, ref temp, ref size); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-08T19:20:34.837

我跑过这篇文章寻找类似的解决方案，并发现并纠正了一些错误。

我的 IDE（visual studio 2019）需要一个 main 函数，所以我必须弄清楚这个相当复杂的代码应该在哪里。最后我尝试重命名`GetCurrentPowerEnumerateVistaAPI()`为`Main()`. 我还加入了@Martijn Spaan 修复程序，稍作改动。而不是`ref settingGuid`添加`ref videoSettingGuid`.

所以现在它看起来像这样并且按预期运行：

```
using System;
using System.ComponentModel;
using System.Runtime.InteropServices;
using System.Text;

namespace TestProject
{
    class PowerEnumerator
    {
        private static Guid NO_SUBGROUP_GUID = new Guid("fea3413e-7e05-4911-9a71-700331f1c294");
        private static Guid GUID_DISK_SUBGROUP = new Guid("0012ee47-9041-4b5d-9b77-535fba8b1442");
        private static Guid GUID_SYSTEM_BUTTON_SUBGROUP = new Guid("4f971e89-eebd-4455-a8de-9e59040e7347");
        private static Guid GUID_PROCESSOR_SETTINGS_SUBGROUP = new Guid("54533251-82be-4824-96c1-47b60b740d00");
        private static Guid GUID_VIDEO_SUBGROUP = new Guid("7516b95f-f776-4464-8c53-06167f40cc99");
        private static Guid GUID_BATTERY_SUBGROUP = new Guid("e73a048d-bf27-4f12-9731-8b2076e8891f");
        private static Guid GUID_SLEEP_SUBGROUP = new Guid("238C9FA8-0AAD-41ED-83F4-97BE242C8F20");
        private static Guid GUID_PCIEXPRESS_SETTINGS_SUBGROUP = new Guid("501a4d13-42af-4429-9fd1-a8218c268e20");

        [DllImport("powrprof.dll")]
        static extern uint PowerEnumerate(
            IntPtr RootPowerKey,
            IntPtr SchemeGuid,
            ref Guid SubGroupOfPowerSetting,
            uint AccessFlags,
            uint Index,
            ref Guid Buffer,
            ref uint BufferSize);

        [DllImport("powrprof.dll")]
        static extern uint PowerGetActiveScheme(
            IntPtr UserRootPowerKey,
            ref IntPtr ActivePolicyGuid);

        [DllImport("powrprof.dll")]
        static extern uint PowerReadACValue(
            IntPtr RootPowerKey,
            IntPtr SchemeGuid,
            IntPtr SubGroupOfPowerSettingGuid,
            ref Guid PowerSettingGuid,
            ref int Type,
            ref IntPtr Buffer,
            ref uint BufferSize
            );

        [DllImport("powrprof.dll", CharSet = CharSet.Unicode)]
        static extern uint PowerReadFriendlyName(
            IntPtr RootPowerKey,
            IntPtr SchemeGuid,
            IntPtr SubGroupOfPowerSettingGuid,
            IntPtr PowerSettingGuid,
            StringBuilder Buffer,
            ref uint BufferSize
            );

        [DllImport("kernel32.dll")]
        static extern IntPtr LocalFree(
            IntPtr hMem
            );

        private const uint ERROR_MORE_DATA = 234;

        public static void Main()
        //public static void GetCurrentPowerEnumerateVistaAPI()
        {
            IntPtr activeGuidPtr = IntPtr.Zero;
            try
            {
                uint res = PowerGetActiveScheme(IntPtr.Zero, ref activeGuidPtr);
                if (res != 0)
                    throw new Win32Exception();

                //Get Friendly Name
                uint buffSize = 0;
                StringBuilder buffer = new StringBuilder();
                Guid subGroupGuid = Guid.Empty;
                Guid powerSettingGuid = Guid.Empty;
                res = PowerReadFriendlyName(IntPtr.Zero, activeGuidPtr,
                    IntPtr.Zero, IntPtr.Zero, buffer, ref buffSize);

                if (res == ERROR_MORE_DATA)
                {
                    buffer.Capacity = (int)buffSize;
                    res = PowerReadFriendlyName(IntPtr.Zero, activeGuidPtr,
                        IntPtr.Zero, IntPtr.Zero, buffer, ref buffSize);
                }

                if (res != 0)
                    throw new Win32Exception();

                Console.WriteLine("ReadFriendlyName = " +
                    buffer.ToString());

                //Get the Power Settings
                Guid VideoSettingGuid = Guid.Empty;
                uint index = 0;
                uint BufferSize = Convert.ToUInt32(Marshal.SizeOf(typeof(Guid)));

                while (
                    PowerEnumerate(IntPtr.Zero, activeGuidPtr, ref GUID_VIDEO_SUBGROUP,
                    18, index, ref VideoSettingGuid, ref BufferSize) == 0)
                {
                    uint size = 4;
                    IntPtr temp = IntPtr.Zero;
                    int type = 0;

                    // My chenges
                    IntPtr pSubGroup = Marshal.AllocHGlobal(Marshal.SizeOf(GUID_VIDEO_SUBGROUP));
                    res = PowerReadACValue(IntPtr.Zero, activeGuidPtr, pSubGroup, ref VideoSettingGuid, ref type, ref temp, ref size);
                    // end my changes

                    Marshal.StructureToPtr(GUID_VIDEO_SUBGROUP, pSubGroup, false);
                    IntPtr pSetting = Marshal.AllocHGlobal(Marshal.SizeOf(VideoSettingGuid));
                    Marshal.StructureToPtr(VideoSettingGuid, pSetting, false);

                    uint builderSize = 200;
                    StringBuilder builder = new StringBuilder((int)builderSize);
                    res = PowerReadFriendlyName(IntPtr.Zero, activeGuidPtr,
                        pSubGroup, pSetting, builder, ref builderSize);
                    Console.WriteLine(builder.ToString() + " = " + temp.ToString());

                    index++;
                }
            }
            finally
            {
                if (activeGuidPtr != IntPtr.Zero)
                {
                    IntPtr res = LocalFree(activeGuidPtr);
                    if (res != IntPtr.Zero)
                        throw new Win32Exception();
                }
            }
            Console.ReadLine();
        }
    }
} 
```

# sencha-architect - 在 Sencha Architect 上找不到网格面板

> ID：16023980
> 
> 赞同：0
> 
> 时间：2013-04-15T20:15:06.200
> 
> 标签：sencha-architect

我开始使用 Sencha Architect 并且正在关注[Car Listing 教程](http://docs.sencha.com/architect/2/#!/guide/first_desktop_app)

我正在使用 Sencha Architect 2.2.1，在教程中它说要添加一个基于 ToolBox 标签的网格面板，但在我的工具箱上没有任何网格面板。

这个版本改名了？

这是我在面板上搜索网格的打印屏幕 ![在此处输入图像描述](https://i.stack.imgur.com/qxcal.png)

这里是大屏幕的链接[http://i.stack.imgur.com/qxcal.png](https://i.stack.imgur.com/qxcal.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-28T06:38:38.133

From your screenshot it seems that's a Sencha Touch project, and the grid widget is available only in ExtJs not in Sencha Touch. If you need a grid in Sencha Touch there is a third party extension found here : [Bryntum UberGrid](http://www.bryntum.com/products/ubergrid/)

Regards, Danny

# java - 在 Robotium 中进行单元测试时检查 WebView 的 URL

> ID：16023988
> 
> 赞同：1
> 
> 时间：2013-04-15T20:16:01.183
> 
> 标签：java, android, url, webview, robotium

我试图找出在我的（WebView）中检查我的主要活动 URL 的最简单方法。这将在使用 Robotium 4.1 框架的单元测试中进行。我只是想弄清楚如何与 webview 交互，例如向活动发送要加载的 URL，因此我可以对此进行测试并确保加载了正确的 URL，并检查我的操作栏项目。

任何代码、建议或建议将不胜感激。

```
public class ErrorHandling extends
    ActivityInstrumentationTestCase2<Webview_Main> {
        private Solo solo;
        private WebView web;
 ..
protected void setUp() throws Exception {
    super.setUp();
    solo = new Solo(getInstrumentation(),getActivity());
} 
```

根据建议更新（当前 - NullPointerException Erorrs）

```
public void testUrl() {
    String URL = solo.getString(com.example.webview.R.string.url);

         web = (WebView) getActivity().findViewById(R.id.webview_main); //Added

    try {
    solo.assertCurrentActivity("Launching Main Activity", Webview_Main.class);
    assertTrue(solo.getWebUrl().equals("URL")); } 
    catch (Error error) {
}
}
public void testWeb() {
    try {
                    web = (WebView) getActivity().findViewById(R.id.webview_main); //Added
        solo.getCurrentActivity().runOnUiThread(new Runnable() {
            public void run() {
                web.loadUrl("http://www.google.com");
            }
        });
        solo.sleep(1000);
    } catch (Error error) {

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:20:11.557

首先，调用

```
web.getSettings(); 
```

什么都没有给你。它为您提供 WebSettings，但您不对该对象执行任何操作。

要在 webview 中声明当前 url，您可以使用：

```
assertTrue(solo.getWebUrl().equals("your url")); 
```

要在您的 webview 中加载指定的 url，您必须在另一个线程中运行它（这里我不确定它应该是 runOnMainSync 还是 runOnUiThread，但是我尝试了 runOnUiThread 并且它工作正常），例如：

```
solo.getCurrentActivity().runOnUiThread(new Runnable() {
    public void run() {
        web.loadUrl("http://www.OTHER_url_TO_test_AGAINST");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T06:22:28.617

检查 URL 的步骤如下：

1）为特定应用创建webview对象

**obj = (WebView)getActivity().findViewById((源或apk的包名).R.id.(源webview的Id))**

注意：如果您没有编写测试用例的源应用程序的源代码，则使用层次结构查看器查找 webview 的 id。

2）添加一些睡眠，以便它会等待加载 **urlsolo.sleep（时间）所花费的时间**

3) 使用它来获取应用程序的当前值或状态。 **obj.getSettings()**

4) 取一个布尔变量并存储布尔变量的值 **= solo.getWebUrl().equals("待测试的 URL");**

5) **assertTrue(Boolean variable)** 验证值真假。

# java - 递归 If/Else

> ID：16023990
> 
> 赞同：0
> 
> 时间：2013-04-15T20:16:02.953
> 
> 标签：java, if-statement, methods

当`recurse()`在语句之后调用时，它周围`if`是否有暗示？`else{}`

```
public static void recurse(int[] a, int position) {
      // BASE
      if (position == a.length){  return;}
      // RECURSIVE

      recurse(a, position + 1);

      System.out.println(a[position]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:18:13.523

不，`else`没有暗示。只有在不`else`运行时才会运行**案例**。在这种情况下，由于您在 的主体中返回，因此将跳过该方法的其余部分。从逻辑上讲，它们可能是相同的，但这只是因为返回。如果您删除了它，则无论语句中的条件如何，递归调用都会运行。`if`**`if``recurse``if`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:27:00.360

看到递归函数不存在，你得把它重命名为reverse，像这样

```
public static void reverse(int[] a, int position) {
          // BASE
          if (position == a.length){  return;}
          // RECURSIVE

          reverse(a, position + 1);

          System.out.println(a[position]);
        } 
```

不是，程序中没有隐含的 else ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:19:19.687

没有任何暗示，但只有当 if 语句 ( ) 中的条件评估为 false（因为该语句）`recurse()`时才会发生调用，因此在这种情况下它的行为相同。`position == a.length``return`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T20:20:15.450

有点。“else”表示“仅在条件为假时执行”

如果条件 (position == a.length) 为真，则此函数将在调用“recurse”之前返回。

如果该条件为假，该函数将继续调用“递归”并打印。**

# logging - 日志框架真的应该吞下日志失败吗？

> ID：16023991
> 
> 赞同：1
> 
> 时间：2013-04-15T20:16:08.027
> 
> 标签：logging

虽然毫无疑问记录器不应该导致应用程序崩溃，但当我修复公司记录器的错误时，我不确定如何正确地处理由记录框架本身引发的异常。在元代码中：

```
public void write(TMessage message)
{
    try
    {
        writeUnsafely(message);
    }
    catch(Exception loggingException)
    {
        // what should I do here?
    }
} 
```

我应该忽略 loggingException（就像 log4net 一样）还是应该让客户端代码选择如何处理它（也许使用可配置的处理程序）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:21:28.753

这完全取决于你，但无论你决定什么，都要记录下来。除了增加代码和用户的复杂性之外，我认为使其可配置并没有什么坏处。

相反，您可以只编写没有错误且从不抛出任何异常的完美代码。`;-)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T20:25:27.807

NLog 有一个配置选项，允许将日志记录配置为抛出异常（或不抛出异常）：

[https://github.com/nlog/nlog/wiki/Configuration-file](https://github.com/nlog/nlog/wiki/Configuration-file)

（请参阅故障排除日志记录部分）。

似乎给客户端代码一个处理它的机会是一个合理的选择。关于客户端程序应如何处理异常的建议最好包含在您的文档中（如果您选择实现此类功能）。一个示例可能类似于“您可以在应用程序的未处理异常处理程序中捕获 LoggingException”。

# visual-studio-2012 - Visual Studio - Mylyn 等效

> ID：16023992
> 
> 赞同：0
> 
> 时间：2013-04-15T20:16:09.110
> 
> 标签：visual-studio-2012, bug-tracking, mylyn

之前在stackoverflow上已经问过这个问题，但答案非常不令人满意。

我正在寻找一个基于任务的 Visual Studio 插件，其运行方式与 Mylyn 为 Eclipse 所做的工作方式大致相同。我对团队可以用来管理 VS 中的问题和请求的东西感兴趣，如果它可以与 Eclipse 集成（使用 bugzilla 之类的东西）那就太棒了

VS2012。

有什么想法吗？

# sql - 直接通过 SQL 创建的自定义 Wordpress 用户不适用于 Wordpress 登录

> ID：16023993
> 
> 赞同：0
> 
> 时间：2013-04-15T20:16:18.013
> 
> 标签：sql, wordpress, login, passwords, customization

我使用以下代码对密码进行哈希处理：

```
$password = $_POST['user_pass'];
$hash = wp_hash_password('$password'); 
```

我错过了什么？我得到的错误是

> 错误：您为用户名**willshatner**输入的密码不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:28:12.000

由于单引号，此代码不会输入您发送的密码：

```
$hash = wp_hash_password('$password'); // here the password is set to the string $password 
```

请改用此代码：

```
$hash = wp_hash_password($password); // here the password is set to the value of the variable $password 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T20:19:34.640

由于密码是 MD5 加密的，您可能必须加密 POST 以匹配数据库

```
 $password = MD5($_POST['user_pass']); 
```

# c# - 移动虚线进行裁剪

> ID：16023995
> 
> 赞同：3
> 
> 时间：2013-04-15T20:16:29.607
> 
> 标签：c#, wpf, marching-ants

我知道我可以使用以下代码创建虚线。

```
<Window x:Class="MarchingAnts.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Rectangle x:Name="RubberBand" Stroke="Black" StrokeDashArray="10"></Rectangle>
    </Grid>
</Window> 
```

有没有办法让虚线在该区域周围移动以引起人们的注意？

这是为了裁剪图像，以便于区分裁剪的线条。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T20:18:46.930

```
<Storyboard x:Key="BorderAnimation">
    <DoubleAnimation To="200" Duration="0:0:10" RepeatBehavior="Forever" By="2" 
                     Storyboard.TargetProperty="StrokeDashOffset" Storyboard.TargetName="Border"/>
</Storyboard> 
```

# configuration - 如何在 Komodo Edit 中启用“大”文件的语法突出显示？

> ID：16023996
> 
> 赞同：2
> 
> 时间：2013-04-15T20:16:37.733
> 
> 标签：configuration, syntax-highlighting, komodo, komodoedit

出于性能原因，Komodo edit 8 禁用了大文件上的语法突出显示。是否有任何地方可以调整阈值，或完全禁用禁用？

我的 prefs.xml 有：

```
<long id="documentByteCountThreshold">1000000</long>
<long id="documentLineCountThreshold">20000</long>
<long id="documentLineLengthThreshold">32000</long>
<boolean id="donotask_treat_large_documents_as_text">0</boolean> 
```

我的测试文件是超过 1040 行 PHP 的 53520 个字符（CP1252），并且 Komodo Edit 拒绝语法高亮它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:38:28.640

前段时间我创建了以下**javascript 宏**。您需要将其添加到您的**工具箱中**

（即转到工具箱，右键单击，新建宏...并确保将 JavaScript 标记为语言，然后粘贴代码）

**宏代码**：

```
var gprefs = Components.classes["@activestate.com/koPrefService;1"].
          getService(Components.interfaces.koIPrefService).prefs;

var bUserIsSure = confirm(
    'Current max file size: '+(Math.floor(gprefs.getLongPref("documentByteCountThreshold")/1024/1024*100)/100)+'mb and '+gprefs.getLongPref("documentLineCountThreshold")+' lines. Do you want to increase it 10 times?'
);

if( bUserIsSure ){
    (function(){

        var gprefs = Components.classes["@activestate.com/koPrefService;1"].
          getService(Components.interfaces.koIPrefService).prefs;
        gprefs.setLongPref("documentByteCountThreshold", 10 * gprefs.getLongPref("documentByteCountThreshold"));
        gprefs.setLongPref("documentLineCountThreshold", 10 * gprefs.getLongPref("documentLineCountThreshold"));
        // No reason to change "documentLineLengthThreshold"
    })();
} 
```

然后根据需要从工具箱中多次执行它，或者随意更改乘法，以获得您自己的常量值。

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T20:57:55.917

[在prefs.p.xml](http://community.activestate.com/faq/getting-setting-komodo-preference)中使用以下设置：

```
<!--
These prefs are to keep Komodo from hanging when a document
that hits at least one of these limits is loaded.  Komodo will
treat the document as a Text file, meaning all language-specific
functions, including code-colorizing, are dropped.
The reason for the high first value is that long lines are
costlier than long documents.  2013-11: Increase limits to
2MB / 40K lines / 100K max line-length due to fixing bug 101267
probably too low.
Also, Komodo estimates that colorizing UDL-based documents
takes about twice as long as languages with C++-based lexers,
and adjusts the limits by 50% downward.
-->
<long id="documentByteCountThreshold">2000000</long> <!-- 2 MB -->
<long id="documentLineCountThreshold">40000</long> <!-- 40K * 40c/line => 1.6 MB -->
<long id="documentLineLengthThreshold">100000</long><!-- 100K -->
<boolean id="donotask_treat_large_documents_as_text">0</boolean> 
```

> Komodo 将首选项、宏、模板、键绑定方案和其他设置存储在称为用户数据目录的用户特定目录中。此目录的名称和位置因操作系统和 Komodo 版本而异：

```
Windows Vista, Windows 7, Windows 8 or newer
C:\Users\<user>\AppData\Local\ActiveState\Komodo[IDE|Edit]\<version>

Windows XP or older
C:\Documents and Settings\<username>\Local Settings\Application Data\ActiveState\Komodo[IDE|Edit]\<version>

Linux
/home/<user>/.komodo[ide|edit]/<version>

Mac OS X
/Users/<user>/Library/Application Support/Komodo[IDE|Edit]/<version> 
```

重新启动 Komodo 以测试更改。

**参考**

*   [KomodoEdit 存储库：prefs.p.xml](https://github.com/Komodo/KomodoEdit/blob/master/src/prefs/prefs.p.xml)
*   [Komodo 文件位置：Komodo 将设置数据保存在哪里？](http://community.activestate.com/faq/komodo-file-locations#appdata_dir)

# c# - 如何扩展控件

> ID：16023998
> 
> 赞同：1
> 
> 时间：2013-04-15T20:16:40.687
> 
> 标签：c#, .net, wpf, xaml, wpf-controls

我有一个用户控件，它有一个网格，其规格如下：

```
<Grid Name="fieldsGrid" Margin="15,0,0,10">
           <Grid.ColumnDefinitions>
               <ColumnDefinition Width="25"/>
               <ColumnDefinition Width="*"/>
               <ColumnDefinition Width="Auto"/>
               <ColumnDefinition Width="Auto"/>
               <ColumnDefinition Width="Auto"/>
           </Grid.ColumnDefinitions>
</Grid> 
```

第二列是感兴趣的列。它显示一个复选框，其文本包含在 TextBlock 中并且看起来`"Text..."`好像太长了。这是通过代码隐藏（我有我的理由）完成的，如下所示：

```
CheckBox currentCheckbox = new CheckBox();
TextBlock block = new TextBlock();
block.MaxWidth = 100;
block.Text = text;
block.TextWrapping = TextWrapping.NoWrap;
block.TextTrimming = TextTrimming.WordEllipsis;
currentCheckbox.Content = block;
currentCheckbox.ToolTip = metaText;
currentCheckbox.SetValue(Grid.RowProperty, rowNumber);
currentCheckbox.SetValue(Grid.ColumnProperty, 1);
currentCheckbox.Margin = new Thickness(0, 10, 10, 0);
currentCheckbox.VerticalAlignment = VerticalAlignment.Center;
fieldsGrid.Children.Add(currentCheckbox); 
```

问题是我想在调整 UserControl 大小时扩展此复选框，从而随着大小的增加显示更多文本。如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:26:45.477

你为什么不试试这个，从而删除代码隐藏？

```
<Grid Name="fieldsGrid"
      Margin="15,0,0,10">
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="25" />
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="Auto" />
    <ColumnDefinition Width="Auto" />
    <ColumnDefinition Width="Auto" />
  </Grid.ColumnDefinitions>
  <CheckBox Grid.Column="1"
            Margin="0 10 10 0">
    <CheckBox.Content>
      <!--  Make a binding for the Text of TextBlock below  -->
      <TextBlock MaxWidth="{Binding ActualWidth,
                                    RelativeSource={RelativeSource FindAncestor,
                                                                   AncestorType={x:Type CheckBox}}}"
                 Text="Some Text LOng FFFFFFF DDDDDDDDDDDD"
                 TextTrimming="WordEllipsis"
                 TextWrapping="NoWrap" />
    </CheckBox.Content>
  </CheckBox>
</Grid> 
```

这应该为您提供您正在寻找的行为并完成您的代码隐藏所做的一切（您需要将文本的绑定排序到`TextBlock`ofc）

**根据 OP 的特定要求**（如果可以，应避免使用代码隐藏）：

可以添加你得到的代码隐藏（最后）

```
currentCheckbox.SizeChanged += (sender, args) => block.MaxWidth = args.NewSize.Width;  // Subtract the checkbox indicator width from args.NewSize.Width here for accurate TextBlock Width measurement 
```

[视频链接](http://www.speedyshare.com/HHbZK/sample.avi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:13:51.747

这似乎对我有用。我使用 XAML 只是为了定义 CheckBox 和包含它的标签内容的 TextBlock，如下所示：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="603.433" Width="730.97">
    <Grid Name="fieldsGrid"
      Margin="15,0,0,10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="25" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <TextBlock Grid.Column="0" Text="Column 1"></TextBlock>
        <TextBlock Grid.Column="2" Text="Column 3, a bit bigger"></TextBlock>
        <TextBlock Grid.Column="3" Text="0" x:Name="txtWidth"></TextBlock>
        <TextBlock Grid.Column="4" Text="Column 5, really really really big"></TextBlock>
        <CheckBox Grid.Column="1" x:Name="testChk"
            Margin="0 10 10 0">
            <CheckBox.Content>
                <TextBlock x:Name="txtForCheckBox"></TextBlock>
            </CheckBox.Content>
        </CheckBox>
    </Grid>
</Window> 
```

然后代码隐藏看起来像这样：

公共主窗口（）{

```
 InitializeComponent();
    testChk.SizeChanged += testChk_SizeChanged;

    txtForCheckBox.Text = "Some text, test, test, test.";
    txtForCheckBox.TextTrimming = TextTrimming.WordEllipsis;
    txtForCheckBox.TextWrapping = TextWrapping.NoWrap;
}

void testChk_SizeChanged(object sender, SizeChangedEventArgs e)
{
    txtForCheckBox.MaxWidth = testChk.ActualWidth;
    txtWidth.Text = testChk.ActualWidth.ToString();
} 
```

希望有帮助...