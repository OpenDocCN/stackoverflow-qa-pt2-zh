# StackOverflow 问答 13966000-13966999

# jenkins - 构建部分中的选项（插件）用于詹金斯的后期构建

> ID：13966004
> 
> 赞同：1
> 
> 时间：2012-12-20T05:42:47.633
> 
> 标签：jenkins, jenkins-plugins

在詹金斯，我们有一个要求，比如在构建步骤下出现的选项（比如）

1.  执行外壳
2.  通过 ssh 执行命令
3.  调用蚂蚁

出现在后期构建部分。它应该做与构建部分相同的工作。

我通过我的插件使构建部分中的所有选项出现在后期构建部分下的 UI`it.getbuilddescriptors`中。`config.jelly`它作为异类列表出现在我的 jenkins UI 的 post build 部分。

但问题是我不知道如何让它作为一个构建步骤。

对于外壳，我们做了

```
Shell s = new Shell(command);
s.perform(build, listener, launcher); 
```

它奏效了。

如果这是可能的，那么它甚至可能适用于所有构建部分项目。有没有像我对“执行外壳”所做的那样的直接方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:46:42.390

您可以考虑查看[https://wiki.jenkins-ci.org/display/JENKINS/Any+Build+Step+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Any+Build+Step+Plugin)

它们提供了将构建步骤用作构建后操作的能力，反之亦然

# java - 用于对 apk 文件进行逆向工程的 dex2jar classes.dex 文件出错

> ID：13966008
> 
> 赞同：2
> 
> 时间：2012-12-20T05:43:53.320
> 
> 标签：java, android, reverse-engineering, dex2jar

我正在尝试从 apk 文件中提取源代码，我正在按照以下步骤 [操作有没有办法从 APK 文件中获取源代码？](https://stackoverflow.com/questions/3593420/android-getting-source-code-from-an-apk-file)

我的问题是，当我执行命令 dex2jar classes.dex 时，我得到一个文件未找到异常。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-20T05:58:00.477

我在命令提示符中发现错误，我不在正确的文件夹中。

# android - 如何在没有操作栏的情况下在 Honeycomb 上显示选项菜单？

> ID：13966017
> 
> 赞同：1
> 
> 时间：2012-12-20T05:44:50.070
> 
> 标签：android, android-actionbar, android-menu

如何在 Honeycomb 或 ICS 平板电脑上显示选项菜单，而没有操作栏？

`targetsdkversion`在玩了一些之后，如果没有操作栏并且> = 11 ，似乎没有办法在 Honeycomb 设备上设置选项菜单。即使您的主题是`Theme.Holo.NoActionBar`. 我可以看到在具有 >=11 的 Honeycomb 上显示选项菜单的唯一方法`targetsdkversion`是使用具有操作栏的主题，然后将其隐藏在`onCreate`. 我可以看到在 Honeycomb 上显示旧面板菜单的唯一方法是使用`targetsdkversion`<=10。

总之，***在 Honeycomb 中，如果您没有操作栏，则没有选项菜单***，除非您的目标低于 11。这似乎是一个错误。在 ICS 及更高版本中，无论您是否真的有操作栏，您都可以拥有任何您喜欢的选项菜单。

我最初的目标是能够在 Honeycomb 及更高版本上使用旧样式的面板菜单和新的 Action Bar 菜单（在不同的活动中），同时在 Honeycomb 下方的任何地方使用面板菜单。

原因是有一个活动需要有大的菜单按钮，但应用程序的其余部分可以完美地全息。

为了实现这一点，`Theme.Holo`除了我使用`Theme.NoTitlebar`. 我有`android:minSdkVersion="5" android:targetSdkVersion="14"`，所以不显示支持菜单键（因此不会在一些新的 HTC 手机上浪费屏幕空间）。如果设备没有硬件菜单按钮，我会提供自己的按钮来弹出面板菜单（通过[http://developer.android.com/reference/android/view/ViewConfiguration.html#hasPermanentMenuKey](http://developer.android.com/reference/android/view/ViewConfiguration.html#hasPermanentMenuKey) () ）

问题是，这不适用于 Honeycomb 平板电脑（Galaxy Tab，Honeycomb 3.2）。带有操作栏的正常活动工作正常，但在特殊活动上，当我按下菜单按钮（我在 UI 中提供的那个）时没有任何反应。

这在至少 2 部 ICS 手机和模拟器上运行良好（有和没有硬件菜单键）。除了在这个活动中，我得到大面板菜单之外的所有地方的正常操作栏菜单。

那么解决方案是什么？这是 Galaxy Tab 还是 Honeycomb 的问题？我应该使用不同的主题来提供面板菜单吗？

**编辑**：我获得了一个 ICS 平板电脑进行更多测试，发现面板菜单也没有出现在那里。*因此，在相同版本的 Android 上，完全相同的应用程序将在手机上显示面板菜单，而在平板电脑上则不显示任何内容*。嗯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-06T14:50:24.203

以下是 Honeycomb 及以上 Android 版本的 PhoneWindow 系统类的摘录。这是对 Android 目标版本和设备屏幕尺寸的硬编码检查。你能避免这个检查吗 - 菜单会正常显示。但不存在这种可能性。这就是为什么无法在目标 sdk 设置为 10 以上的 Honeycomb+ 设备上显示选项菜单的原因。有趣的是，如果可以显示操作栏菜单，它会更早显示，并且永远不会到达此代码。正因为如此，代码上方的注释看起来特别讽刺。

```
// Don't open an options panel for honeycomb apps on xlarge devices.
// (The app should be using an action bar for menu items.)
if (st.featureId == FEATURE_OPTIONS_PANEL) {
    Context context = getContext();
    Configuration config = context.getResources().getConfiguration();
    boolean isXLarge = (config.screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) ==
                 Configuration.SCREENLAYOUT_SIZE_XLARGE;
    boolean isHoneycombApp = context.getApplicationInfo().targetSdkVersion >=
            android.os.Build.VERSION_CODES.HONEYCOMB;

    if (isXLarge && isHoneycombApp) {
        return;
    }
} 
```

# asp.net - 无法在asp.net网页调用的批处理文件中执行svn.exe

> ID：13966019
> 
> 赞同：0
> 
> 时间：2012-12-20T05:44:55.530
> 
> 标签：asp.net, svn

我试图`svn update`通过 .NET 网页（C#）执行命令，我的代码是：

```
Process pro = new Process();
pro.StartInfo.FileName = @"D:\Code\Batch\RestrictedFiles.bat";
pro.StartInfo.CreateNoWindow = true;
pro.Start(); 
```

批处理文件中的每个命令行都可以成功执行，直到执行`svn update`命令。我发现任务管理器中有一个 svn.exe 进程。是否表明.NET网页已调用svn？但是这个进程（`svn.exe`）总是存在的，除非我手动杀死它并且`svn update`命令无法执行。并且没有出现错误消息。但是，如果我双击这个批处理文件，`svn update`命令可以很快成功执行。

我的系统是带有 IIS 6.0 的 Windows Server 2003，开发工具是 Visual Studio 2008。请帮帮我。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:27:27.700

我曾经遇到过这个问题。我刚刚为批处理添加了授权：

```
svn update --username login --password pass %source% 
```

为我工作。

# java - Android 1.5 sdk Android 虚拟设备模拟器错误 Java Eclipse

> ID：13966020
> 
> 赞同：0
> 
> 时间：2012-12-20T05:44:57.780
> 
> 标签：java, android, eclipse

大家好，我正在阅读这本名为《Beginning Android Games》的书，因为我在使用 Android 1.5 Android 虚拟设备时遇到了一些问题。

首先，Eclipse 的 SDK（我正在使用的程序）没有适用于 Android 的 1.5 SDK，所以当您第一次尝试运行 AVD 时我已经安装了它，它要求有一个 SDK 清单，如果您检查，将为您获取并安装盒子。我这样做了，安装了 1.5 SDK 但是当我尝试使用 1.5 sdk 运行 AVD 模拟器时，我得到了

（分配内存失败：8 此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。）

错误类型。但是当我为 AVD 模拟器使用默认的 4.2 SDK 时，模拟器出现了。我不明白我在这里做错了什么。

同样在 Eclipse 中，我安装了 Android ADT 和 SDK。在eclipse中，当我点击窗口然后Android虚拟设备管理器，我尝试启动一个新的模拟器，我安装的1.5 sdk没有显示。但是当我点击 window->sdk manager->tools->manage avds 时，我的 1.5 sdk 就会出现，我可以使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:48:47.440

**问题在于虚拟机的内存量。**

以下解决方案对我有用。在以下配置文件中：

```
C:\Users\<user>\.android\avd\<avd-profile-name>.avd\config.ini 
```

**代替**

hw.ramSize=1024

经过

hw.ramSize=1024MB

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T05:50:02.263

如果显示需要一些更新，请转到帮助 -> 检查更新，然后您可以安装它们。也许它会起作用。

# ruby-on-rails - RSpec，期望随着多个值而改变

> ID：13966022
> 
> 赞同：13
> 
> 时间：2012-12-20T05:45:08.293
> 
> 标签：ruby-on-rails, rspec

> **可能重复：**
> [RSpec 是否有可能期望在两个表中发生变化？](https://stackoverflow.com/questions/13616631/is-it-possible-for-rspec-to-expect-change-in-two-tables)

```
it "should create a new Recipe" do
  expect { click_button submit }.to change(Recipe, :count).by(1)
end 
```

这使我可以检查“食谱”模型是否还有一个条目，但我还想检查“成分”模型是否还有一个条目。expect 块只能执行一次，因为表单已经提交。

我知道我可以再做一个“它”块，但我觉得必须有一个 DRYer 方法。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-20T06:38:13.377

我建议通过重新定义测试对象（并使用[stabby lambdas](http://blog.dynamicprogrammer.com/2010/09/15/learning-about-the-stabby-lambda-syntax-in-ruby.html)来获得乐趣）来干燥它：

```
describe "recipe creation" do
  subject { -> { click_button submit } }
  it { should change(Recipe, :count).by(1) }
  it { should change(Ingredient, :count).by(1) }
end 
```

**更新**：虽然它可能看起来不那么 DRY，但这些天我可能仍会继续使用该`expect`语法，因为它是[推荐](http://myronmars.to/n/dev-blog/2012/06/rspecs-new-expectation-syntax)的，而且我通常会远离`should`，但可能会为规范可读性做一些小改动：

```
describe "recipe creation" do
  let(:creating_a_recipe) { -> { click_button submit } }

  it "changes the Recipe count" do
    expect(creating_a_recipe).to change(Recipe, :count).by(1)
  end

  it "changes the Ingredient count" do
    expect(creating_a_recipe).to change(Ingredient, :count).by(1)
  end
end 
```

**注意**：您可能会在[RSpec 文档中`change`](http://www.relishapp.com/rspec/rspec-expectations/v/3-3/docs/built-in-matchers/change-matcher)看到`expect`使用大括号的[匹配器。](http://www.relishapp.com/rspec/rspec-expectations/v/3-3/docs/built-in-matchers/change-matcher)这当然是正确的，但标准括号在此示例中起作用的原因是更改可变状态（包含在 中）的代码位于作为参数`creating_a_recipe`传入时被调用的 lambda 中。`expect`

无论如何，在这种情况下，`expect(creating_a_recipe)`或者`expect { creating_a_recipe }`可以成功使用，您使用哪个取决于个人喜好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:11:15.037

您可以将所有这些抽象为辅助方法

```
def test_creation_of(model)
  it "should create a new #{model}" do
    expect { click_button submit }.to change(model.constantize, :count).by(1)
  end
end 
```

但我只推荐它，如果你会为许多模型这样做。否则只会使代码更难阅读。如果这样做，最好将其放入规范助手中。

此外，根据您测试中的其他先例，您可以传递一个 Const 对象而不是字符串（正如我在上面的示例中使用的那样）。

然后

```
it "should create a new Recipe" do
  test_creation_of( 'Recipe' )
  test_creation_of( 'Ingredient' )
end 
```

# ruby-on-rails - 在共享主机上部署 ruby on rails - 路由问题

> ID：13966023
> 
> 赞同：0
> 
> 时间：2012-12-20T05:45:09.790
> 
> 标签：ruby-on-rails, shared-hosting

我是一名铁路新手。我正在努力让一个简单的 helloworld rails 应用程序（无数据库）在共享主机上工作。

开发日志

```
Processing ApplicationController#index (for 122.61.170.222 at 2012-12-17 17:46:09) [GET]

ActionController::RoutingError (No route matches "/Say/hello" with {:method=>:get}):

Rendering rescues/layout (not_found) 
```

我的导轨设置：[http ://scifiwear.com/rails_setup.png](http://scifiwear.com/rails_setup.png)

[导轨设置 http://scifiwear.com/rails_setup.png](http://scifiwear.com/rails_setup.png)

我的子域设置：[http ://scifiwear.com/subdomain.png](http://scifiwear.com/subdomain.png)

[子域设置 http://scifiwear.com/subdomain.png](http://scifiwear.com/subdomain.png)

服务器版本：

Ruby 版本：1.8.7 Gem 版本：1.8.16 Rails 是 2.3.14

我配置 helloWorld 应用程序的步骤：

1.  使用 Web 表单创建应用程序[http://scifiwear.com/rails_setup.png](http://scifiwear.com/rails_setup.png)

2.  cd myapp14

3.  ruby 脚本/生成控制器说再见

4.  [http://myapp14.scifiwear.com/](http://myapp14.scifiwear.com/) 快乐！

5 [http://myapp14.scifiwear.com/say/hello](http://myapp14.scifiwear.com/say/hello)不开心！

杂种日志：

```
Mon Dec 17 17:46:09 -0600 2012: Error calling Dispatcher.dispatch #<NoMethodError: You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.split>
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/cgi_process.rb:52:in `dispatch_cgi'
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:101:in `dispatch_cgi'
/usr/lib/ruby/gems/1.8/gems/actionpack-2.3.14/lib/action_controller/dispatcher.rb:27:in `dispatch'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:76:in `process'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:74:in `synchronize'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/rails.rb:74:in `process'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:159:in `process_client'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:158:in `each'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:158:in `process_client'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `initialize'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `new'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:285:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:268:in `initialize'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:268:in `new'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel.rb:268:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:282:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:281:in `each'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/configurator.rb:281:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:128:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/../lib/mongrel/command.rb:212:in `run'
/usr/lib/ruby/gems/1.8/gems/mongrel-1.1.5/bin/mongrel_rails:281
/usr/bin/mongrel_rails:19:in `load'
/usr/bin/mongrel_rails:19 
```

我的 routes.rb 的最后 4 行：（未触及）

```
# consider removing or commenting them out if you're using named routes and resources.

map.connect ':controller/:action/:id'

map.connect ':controller/:action/:id.:format'

end 
```

任何建议表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:35:38.300

尝试为上一个问题给出的答案：[在共享托管服务器上运行 Ruby on Rails 应用程序的问题](https://stackoverflow.com/questions/2911852/problems-running-ruby-on-rails-apps-on-shared-hosted-server)；在这种情况下，它们可能会有所帮助。

我尝试在本地重现相同的错误，使用`rails 2.3.14`and `ruby 1.8.7-p371`; 没有收到错误信息。路由文件与您所拥有的类似。

日志跟踪如下：

```
=> Booting Mongrel
=> Rails 2.3.14 application starting on http://0.0.0.0:3000
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /Users/hallelujah/.rvm/gems/ruby-1.8.7-p371@hallelujah/gems/rails-2.3.14/lib/rails/gem_dependency.rb:21.
NOTE: Gem::SourceIndex#initialize is deprecated with no replacement. It will be removed on or after 2011-11-01.
Gem::SourceIndex#initialize called from /Users/hallelujah/.rvm/gems/ruby-1.8.7-p371@hallelujah/gems/rails-2.3.14/lib/rails/vendor_gem_source_index.rb:100.
=> Call with -d to detach
=> Ctrl-C to shutdown server

Processing SayController#hello (for 127.0.0.1 at 2012-12-20 15:52:23) [GET]
Rendering say/hello
Completed in 35ms (View: 34, DB: 0) | 200 OK [http://localhost/say/hello] 
```

鉴于此托管服务器上的 ruby​​ 和 rails 版本非常旧，您可能很难获得有关此安装所面临问题的帮助。而且您在学习这些概念时也会遇到困难。

我的建议是让您切换到使用最新版本的 ruby​​ 和 rails（并了解使用 rails 进行 Web 开发的最佳实践），遵循 Michael Hartl 的优秀且免费提供的在线书籍：[Ruby on Rails 教程](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial)

# iphone - Ar metio 构建错误

> ID：13966025
> 
> 赞同：0
> 
> 时间：2012-12-20T05:45:14.723
> 
> 标签：iphone, build, augmented-reality

当我尝试运行该项目时，我收到以下错误

这是日志。

**架构 armv7 的未定义符号：** `__ZN6metaio40getScreenRotationForInterfaceOrientationE22UIInterfaceOrientation", referenced from: -[MetaioSDKViewController viewDidLoad] in MetaioSDKViewController.o -[MetaioSDKViewController willAnimateRotationToInterfaceOrientation:duration:] in MetaioSDKViewController.o -[ARELViewController willAnimateRotationToInterfaceOrientation:duration:] in ARELViewController.o ld: symbol(s) not found for architecture armv7 clang: error: linker command failed with exit code 1 (use -v to see invocation)`

有谁知道可能是什么原因。

该项目已与 Metio 绑定。增强现实框架。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:00:30.353

单击您的项目并转到**Build Settings并将****Build Active Architecture only**的值更改为**yes**。

让我知道它是否解决了错误:)

# c# - 在运行时动态创建具有与其所有者相同类型的字段的类型

> ID：13966029
> 
> 赞同：3
> 
> 时间：2012-12-20T05:45:39.540
> 
> 标签：c#, reflection

所以我目前正在编写在运行时生成对象的代码。就像在[这个问答](https://stackoverflow.com/questions/3862226/dynamically-create-a-class-in-c-sharp)中一样。

但是，我无法找到有关动态创建嵌入了相同类型的类型的任何信息。就像是：

```
public class Foo
{
    private Foo _Parent

    public Foo()
    {}

    public Foo Parent
    {
        get { return _Parent; }
        set { _Parent = value; }
    }
} 
```

有没有办法在 c# 中使用反射或发射来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:47:08.113

[今天我了解到](https://stackoverflow.com/questions/2230440/im-attempting-to-write-a-net-compiler-using-system-reflection-emit-how-do-i-do)你可以将 a`TypeBuilder`转换为 a`Type`来处理它要构建的类型：

```
TypeBuilder tb = // get from a ModuleBuilder or wherever
Type typeImAboutToBuild = (Type)tb;

FieldBuilder fb = tb.DefineField(
    "_Parent", typeImAboutToBuild, FieldAttributes.Private) 
```

编辑：`TypeBuilder`实际上*继承*自`Type`，而不是这是一个`explicit`or`implicit`转换操作；你甚至不需要演员表：

```
TypeBuilder tb = //whatever
FieldBuilder fb = tb.DefineField("_Parent", tb, FieldAttributes.Private) 
```

# java-me - 如何在 J2me 中处理网络线程调用和等待进度？

> ID：13966033
> 
> 赞同：2
> 
> 时间：2012-12-20T05:45:47.570
> 
> 标签：java-me, lwuit

在我的项目中，我在单独的线程中创建了一些对 servlet 的网络调用，在该线程启动之前，我将一个微调器显示为等待进度。在该网络线程完成之前，waitprogress 会显示在屏幕上，当我收到来自服务器的响应时，我必须显式调用进度条的 dispose() 方法来处理该进度条。因此，每当我在网络强度下降的情况下拨打电话建立 GPRS 连接时，这有点复杂，我发现有时需要大约 2-3 分钟来引发 IO 异常或从我处理 waitprogress、显示错误消息并继续的服务器接收响应。

上述情况很复杂，因为用户不会等待这么长时间才能得到响应。必须有某种方式，每当我调用网络线程并显示进度条时，用户应该能够取消包括网络线程在内的所有操作，返回到以前的状态并在没有连接或连接不良时进行另一个调用。

在这里，我使用的是 Lwuit。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:38:46.100

在 NetworkManager 类中，您可以添加此功能并从您的类中激活

只有当 lwuit 在您的应用程序中打开代码时，您才能添加此功能：

```
 public void killAll() {
            for (int i = 0; i < pending.size(); i++) {
                ((ConnectionRequest) pending.elementAt(i)).kill();
            }
            pending.removeAllElements();
            for (int i = 0; i < networkThreads.length; i++) {
                networkThreads[i].currentRequest.kill();
            }
        } 
```

在此之后或之前，您需要调用 dispose() 方法。

# java - 如何在 XQuery 中使用或实现数组？

> ID：13966038
> 
> 赞同：4
> 
> 时间：2012-12-20T05:46:31.133
> 
> 标签：java, xml, xquery, marklogic

XQuery 中是否有对数组的内置支持？例如，如果我们想在 xquery 中实现简单的 java 程序，我们会怎么做：

（我不是要求将整个程序翻译成 xquery，而只是询问如何将下面代码的第 2 行中的数组实现为 xquery？我也在使用 marklogic / xdmp 函数）。

```
java.lang.String test = new String("Hello XQuery");
char[] characters = test.toCharArray();

for(int i = 0; i<characters.length; i++) {
    if(character[i] == (char)13) { 
        character[i] = (char) 0x00;
    }
}

Legend:

hex 0x00 dec 0 : null
hex 0x0d dec 13: carriage return
hex 0x0a dec 10: line feed
hex 0x20 dec 22: dquote 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:44:48.533

将示例代码转换`XQuery`为的问题不是不支持数组，而是**x00**不是`XML`. 如果不是这个问题，您可以使用简单的函数调用来表达您的查询：

```
translate($input, '&#x13;', '&#x00;') 
```

现在，您可以争辩说这是作弊，它只是发生了，因此有一个功能可以完全按照您的手动操作来完成。但是如果这个函数不存在，你可以将它编程为`XQuery`：有足够的原语可用于字符串，允许你以任何你想要的方式操作它们。如果您需要（并且很少需要），您可以使用函数将字符串转换为整数序列`string-to-codepoints()`，然后利用所有`XQuery`工具来操作序列。

教训是，当您使用`XQuery`or之类的声明性语言时`XSLT`，不要尝试使用在更原始语言中被迫使用的相同**低级编程技术。**通常有一种更直接的方式来表达问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T07:26:04.243

XQuery 具有对序列的内置支持。该函数`tokenize()`（如@harish.ray 所建议）返回一个序列。您也可以使用大括号和逗号自己构造一个：

```
let $mysequence = (1, 2, 3, 4) 
```

序列是有序列表，因此您可以依赖它。这与从 an 返回的**节点集**略有不同`XPath`，它们通常是**按文档排序的**。

顺便说一句：实际上，XQuery 中的所有内容要么是**节点集**，要么是**序列**。即使函数被声明为返回一个字符串或整数，您也可以将该返回值视为一个项目的序列。不需要显式强制转换，无论如何在 XQuery 中没有构造。功能喜欢`fn:exists()`并且`fn:empty()`总是有效。

！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T18:39:58.450

`fn:translate`只是为了好玩，如果 XQuery不存在，这就是我将如何在 XQuery 中执行此操作。我认为 Michael Kay 的建议最终看起来很相似。

```
let $test := "Hello XQuery"
return codepoints-to-string(
  for $c in string-to-codepoints($test)
  return if ($c eq 32) then 44 else $c) 
```

请注意，由于他指出的问题，我更改了转换：0 不是合法的代码点。所以我把空格翻译成逗号。

对于 MarkLogic，另一种选择是使用[http://docs.marklogic.com/json:array](http://docs.marklogic.com/json:array)及其相关函数。该`json:set-item-at`函数将允许以模糊的命令式编码。对这两种变体进行编码可能是一个很好的学习练习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T06:33:23.467

有两种方法可以做到这一点。

*   首先，您可以使用 XmlManager.createResults() 创建一个 XmlResults 对象，然后使用 XmlResults.add() 将您的字符串添加到其中。然后，您可以使用 XmlResults 对象在 XmlQueryContext 中设置变量的值，该变量可在您的查询中使用。

    例子：

    ```
    XmlResults values = XMLManager.createResults();
    values.add(new XmlValue("value1"));
    values.add(new XmlValue("value2"));
    XmlQueryContext.setVariableValue("files", values); 
    ```

*   另一种方法是在 XQuery 中拆分字符串。您可以使用 tokenize() 函数执行此操作，该函数使用正则表达式来匹配字符串分隔符。

    [http://www.w3.org/TR/xpath-functions/#func-tokenize](http://www.w3.org/TR/xpath-functions/#func-tokenize)

谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-09T22:24:46.397

一点展望：XQuery 3.1 将为数组提供本机支持。有关详细信息，请参阅[http://www.w3.org/TR/xquery-31/ 。](http://www.w3.org/TR/xquery-31/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-25T13:58:23.130

你可以像这样构造一个数组：

```
$myArray = tokenize('a b c d e f g', '\s')
// $myArray[3] -> c 
```

请注意，这个伪数组的第一个索引是 1 而不是 0！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-28T21:12:32.090

由于问题“如何在 XQuery 中使用或实现数组？” 被认为是通用的（因此出现在有关该主题的搜索结果中），我想添加一个通用答案以供将来参考（使其成为社区 Wiki，以便其他人可以扩展）：

正如 Christian Grün 已经暗示的那样，在*XQuery 3.1*中， XQuery 获得了原生数组数据类型，它是函数数据类型的子类型。

由于数组是“值的有序列表”并且 XPath/XQuery 序列也是，因此可能出现的第一个问题是：“有什么区别？” 答案很简单：一个序列不能包含另一个序列。所有序列都会自动展平。不是这样的数组，可以是数组的数组。就像序列一样，XQuery 中的数组也可以混合任何其他数据类型。

本机 XQuery 数组数据类型可以用两种方式之一表示： As`[]`或 via `array {}`。不同之处在于，在使用前一个构造函数时，逗号被视为“硬”逗号，这意味着以下数组由两个成员组成：

```
[ ("apples", "oranges"), "plums" ] 
```

而以下将由三名成员组成：

```
array { ("apples", "oranges"), "plums" } 
```

这意味着，花括号内的数组表达式首先被解析为一个平面序列，然后被成员化为一个数组。

由于 Array 是函数的子类型，因此可以将数组视为匿名函数，它采用单个参数，即数字索引。为了获得数组的第三个成员，名为 $foo，我们可以这样写：

```
$foo(3) 
```

如果一个数组包含另一个数组作为成员，您可以将函数调用链接在一起，如下所示：

```
$foo(3)(5) 
```

除了数组数据类型之外，还添加了特殊运算符，可以轻松查找数组的值。一个这样的运算符（也被新的 Map 数据类型使用）是问号后跟一个整数（或计算结果为零或多个整数的表达式）。

```
$foo?(3) 
```

将再次返回数组中的第三个成员，而

```
$foo?(3, 6) 
```

将返回成员 3 和 6。

使用文字整数时，可以省略括号。但是，需要使用括号来从动态表达式中形成查找索引，例如：

```
$foo?(3 to 6) 
```

在这里，括号中的表达式被评估为一个整数序列，因此该表达式将返回从索引位置 3 到索引位置 6的*所有成员的序列。*

星号`*`用作通配符运算符。表达方式

```
$foo?* 
```

将返回数组中所有项目的序列。同样，链接是可能的：

```
$foo?3?5 
```

匹配前面的例子`$foo(3)(5)`。

更深入的信息可以在官方规范中找到：[XML Path Language (XPath) 3.1 / 3.11.2 Arrays](https://www.w3.org/TR/xpath-31/#id-arrays)

此外，还实现了一组特定于数组的新函数。命名空间中的这些函数resinde `http://www.w3.org/2005/xpath-functions/array`，通常以前缀为前缀`array`并且可以在此处找到引用：[XPath and XQuery Functions and Operators 3.1 / 17.3 Functions that Operate on Arrays](https://www.w3.org/TR/xpath-functions-31/#array-functions)

# r - R中的简单对应分析 - 并非所有对象都出现在图中？

> ID：13966042
> 
> 赞同：1
> 
> 时间：2012-12-20T05:46:50.780
> 
> 标签：r, vegan, correspondence-analysis

我觉得这可能是一个愚蠢的问题，但我花了很长时间寻找答案，但似乎找不到答案。甚至很难知道要搜索什么，所以如果在你知道的其他地方回答了这个问题，我只需要一个链接。

然而。我正在尝试使用 vegan 包在 R 中做一个简单的 CA，它工作正常。但是，我生成的图只显示了 60 个“站点”，而实际上我有 135 个。有谁知道为什么会发生这种情况？我需要能够显示所有的对象。我的代码如下

```
library(vegan)
CPUE.matrix <- read.csv("CPUE_Matrix_CA.csv", header=TRUE, row.names=1)
cpue.ca <- cca(CPUE.matrix)
plot(cpue.ca, type="n")
points(cpue.ca, display = "sites", cex = 1.3,  bg=labels, pch=20, col="red")
text(cpue.ca, display = "spec", cex=0.9, col="black") 
```

为了让您了解我的数据是什么样的：

```
head(CPUE.matrix)

       Black.Rockfish Brown.Rockfish Copper.Rockfish Pacific.Cod
1974_G57       0.000000      0.0000000       0.4731183        0.00
1974_H66       0.000000      1.6666667       2.0000000        0.00
1974_H67       0.000000      0.0000000       0.0000000        0.00
1974_H78       2.726236      0.0000000       2.6171869        0.00
1974_H79       0.000000      0.5660377       0.0000000        0.00
1974_H80       0.000000      0.1600000       0.0000000        0.08
         Quillback.Rockfish
1974_G57          0.5677419
1974_H66          0.6666667
1974_H67          0.6037736 
```

数据是 5 种鱼类、135 个位置以及每个物种在单元格中每个位置的单位努力捕获量。当我绘图时，绘图中显示的位置不够多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T12:44:04.980

只是为了解决这个问题：就像在评论线程中一样，事实证明许多站点相互重叠。正如其他 SO 问题中提到的那样，使这一点更加明显的一种方法是以部分透明度进行绘图。这样，重叠的项目会比单个项目看起来更暗。参见，例如，[R: Scatterplot with too many points](https://stackoverflow.com/questions/7714677/r-scatterplot-with-too-many-points)

# ios - 如果我在 TextField 中写入，则启用按钮

> ID：13966043
> 
> 赞同：3
> 
> 时间：2012-12-20T05:46:53.630
> 
> 标签：ios, uibutton, uitextfield

当您在 TextField 中编写内容时，我在启用按钮时遇到了一些问题。如果 TextField 中没有任何内容，我将其禁用，但当您在其中写入内容时，我无法再次启用它。

我有这样的事情：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSUInteger textLength = [_Name.text length];
    [_doneButton setEnabled:(textLength > 0)];

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T05:54:31.720

将委托设置为 UITextField 并在 ViewDidLoad 中创建一个用于文本更改的方法，如下所示。

```
[self.textFieldTemp addTarget:self action:@selector(textFieldDidChange:) forControlEvents:UIControlEventEditingChanged]; 
```

并添加方法如下。

```
- (void)textFieldDidChange:(UITextField *)textField {
    if(textField == self.textFieldTemp) 
        self.buttonTemp.enabled = ([self.textFieldTemp.text length] > 0) ? YES : NO; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T05:51:56.203

尝试这个

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
if([textField.text length]>0){
    [doneButton setEnabled:YES];        

}
else{
 [doneButton setEnabled:NO ;
} 
```

希望这可能对您有所帮助..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T05:54:09.840

将这些行放在文本字段委托方法中：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string { 
```

那它会起作用的。每次在文本字段中输入字符时都会调用此方法。但是 ViewDidLoad 仅在加载视图控制器时调用。

希望它对你有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T05:51:35.390

使用`UITextField`委托方法再次启用您的按钮。当你的`textField`角色改变时，委托方法将被调用，在这里启用你的按钮。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
     _doneButton.enabled = YES;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T06:11:08.633

您可以使用 UITextField 的委托来启用和禁用这样的按钮。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
{
if (textField.text.length!=0)
{
yourButton.enabled = YES;
}
else
{
yourButton.enabled = NO;
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T05:56:46.617

这两个功能将根据您的文本字段中的文本启用和禁用您的按钮

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
     _doneButton.enabled = YES;
}
- (BOOL)textFieldShouldEndEditing:(UITextField *)textField{
if([textField.text length]>0){
   [doneButton setEnabled:YES];        
}
else{
 [doneButton setEnabled:NO ;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-15T22:27:41.340

我使用的方法根本没有使用委托。我在控制器类中创建了这个方法：

```
- (IBAction)textFieldChanged:(id)sender
{
    self.doneButton.enabled = ([self.Name.text length] > 0) ? YES : NO;
} 
```

然后，在 Interface Builder 中，我将文本字段“Editing Changed”操作设置为针对新方法。然后，类似于@Paramasivan Samuttiram，我在`viewDidLoad:`.

```
[self textFieldChanged:self.Name]; 
```

该部分允许按钮最初处于正确状态。

# svn - svn commit 报错

> ID：13966045
> 
> 赞同：0
> 
> 时间：2012-12-20T05:47:04.290
> 
> 标签：svn, tortoisesvn

当我尝试

```
commit js code in svn(eclipse) 
```

我收到以下错误

```
org.tigris.subversion.javahl.ClientException: RA layer request failed
svn: Commit failed (details follow):
svn: Server sent unexpected return value (400 Bad Request) in response to MERGE request for ''/arty/arty/trunk/src/main/webapp/js/user

org.tigris.subversion.javahl.ClientException: RA layer request failed
svn: Commit failed (details follow):
svn: Server sent unexpected return value (400 Bad Request) in response to MERGE request for '/arty/arty/trunk/src/main/webapp/js/user 
```

# .htaccess - Joomla 链接错误：未指定输入文件

> ID：13966046
> 
> 赞同：1
> 
> 时间：2012-12-20T05:47:05.690
> 
> 标签：.htaccess, joomla, hyperlink, broken-links

我真的是 Joomla 的新手，在编辑原始内容后，我从一个工作的主站点开发（实际上我只是复制文件并复制数据库）并建立新站点。一切看起来都很好但是，新站点的链接和菜单给出错误或[**没有指定输入文件**](http://paristokyo.biz/trouvay-cauvin.co.uk/products.html)，如果我在地址栏上手动添加站点 url 和页面 url 之间的“/index.php/”那么它[**可以工作**](http://paristokyo.biz/trouvay-cauvin.co.uk/index.php/products.html)，我不知道发生了什么错了，这是根目录“http://paristokyo.biz/trouvay-cauvin.co.uk”上的“.htaccess”文件

```
##
# @version $Id: htaccess.txt 14401 2010-01-26 14:10:00Z louis $
# @package Joomla
# @copyright Copyright (C) 2005 - 2010 Open Source Matters. All rights reserved.
# @license http://www.gnu.org/copyleft/gpl.html GNU/GPL
# Joomla! is Free Software
##

#####################################################
#  READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE
#
# The line just below this section: 'Options +FollowSymLinks' may cause problems
# with some server configurations.  It is required for use of mod_rewrite, but may already
# be set by your server administrator in a way that dissallows changing it in
# your .htaccess file.  If using it causes your server to error out, comment it out (add # to
# beginning of line), reload your site in your browser and test your sef url's.  If they work,
# it has been set by your server administrator and you do not need it set here.
#
#####################################################

##  Can be commented out if causes errors, see notes above.
Options +FollowSymLinks

#
#  mod_rewrite in use

RewriteEngine On

########## Begin - Rewrite rules to block out some common exploits
## If you experience problems on your site block out the operations listed below
## This attempts to block the most common type of exploit `attempts` to Joomla!
#
## Deny access to extension xml files (uncomment out to activate)
#<Files ~ "\.xml$">
#Order allow,deny
#Deny from all
#Satisfy all
#</Files>
## End of deny access to extension xml files
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
# Block out any script trying to base64_encode crap to send via URL
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]
# Block out any script that includes a <script> tag in URL
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Send all blocked request to homepage with 403 Forbidden error!
RewriteRule ^(.*)$ index.php [F,L]
#
########## End - Rewrite rules to block out some common exploits

#  Uncomment following line if your webserver's URL
#  is not directly related to physical file paths.
#  Update Your Joomla! Directory (just / for root)

RewriteBase /

########## Begin - Joomla! core SEF Section
#
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]
#
########## End - Joomla! core SEF Section 
```

和“htaccess.txt”文件

```
##
# @version $Id: htaccess.txt 21064 2011-04-03 22:12:19Z dextercowley $
# @package Joomla
# @copyright Copyright (C) 2005 - 2010 Open Source Matters. All rights reserved.
# @license http://www.gnu.org/copyleft/gpl.html GNU/GPL
# Joomla! is Free Software
##

#####################################################
#  READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE
#
# The line just below this section: 'Options +FollowSymLinks' may cause problems
# with some server configurations.  It is required for use of mod_rewrite, but may already
# be set by your server administrator in a way that dissallows changing it in
# your .htaccess file.  If using it causes your server to error out, comment it out (add # to
# beginning of line), reload your site in your browser and test your sef url's.  If they work,
# it has been set by your server administrator and you do not need it set here.
#
#####################################################

##  Can be commented out if causes errors, see notes above.
Options +FollowSymLinks

#
#  mod_rewrite in use

RewriteEngine On

########## Begin - Rewrite rules to block out some common exploits
## If you experience problems on your site block out the operations listed below
## This attempts to block the most common type of exploit `attempts` to Joomla!
#
## Deny access to extension xml files (uncomment out to activate)
#<Files ~ "\.xml$">
#Order allow,deny
#Deny from all
#Satisfy all
#</Files>
## End of deny access to extension xml files
# Block out any script trying to set a mosConfig value through the URL
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
# Block out any script trying to base64_encode data within the URL
RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
# Block out any script that includes a <script> tag in URL
RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Return 403 Forbidden header and show the content of the root homepage
RewriteRule .* index.php [F]
#
########## End - Rewrite rules to block out some common exploits

########## Begin - Custom redirects
#
# If you need to redirect some pages, or set a canonical non-www to
# www redirect (or vice versa), place that code here. Ensure those
# redirects use the correct RewriteRule syntax and the [R=301,L] flags.
#
########## End - Custom redirects

#  Uncomment following line if your webserver's URL
#  is not directly related to physical file paths.
#  Update Your Joomla! Directory (just / for root)

# RewriteBase /

########## Begin - Joomla! core SEF Section
#
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
#
# If the requested path and file is not /index.php and the request
# has not already been internally rewritten to the index.php script
RewriteCond %{REQUEST_URI} !^/index\.php
# and the request is for root, or for an extensionless URL, or the
# requested URL ends with one of the listed extensions
RewriteCond %{REQUEST_URI} (/[^.]*|\.(php|html?|feed|pdf|raw))$ [NC]
# and the requested path and file doesn't directly match a physical file
RewriteCond %{REQUEST_FILENAME} !-f
# and the requested path and file doesn't directly match a physical folder
RewriteCond %{REQUEST_FILENAME} !-d
# internally rewrite the request to the index.php script
RewriteRule .* index.php [L]
#
########## End - Joomla! core SEF Section 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T09:24:16.880

在全局配置上禁用搜索引擎友好 URL 和 URL 重写选项。这将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:14:12.407

将目录索引更改为 index.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T02:38:17.713

首先，确保**mod_rewrite**已启用，然后：

1.  将 htaccess.txt 重命名为 .htaccess
2.  打开文件，找到有“#RewriteBase /”的那一行</li>
3.  删除 # 符号以取消注释
4.  上传 .htaccess 文件
5.  在全局配置中再次启用 SEF
6.  刷新浏览器并检查它是否正常工作。

还可以尝试以下方法：

波纹`RewriteEngine on`管

```
RewriteCond %{REQUEST_URI} ^/index\.php/
RewriteRule ^index.php/(.*) /$1 [R=301,L] 
```

希望这可以帮助

# ios - 是否有任何用于游戏的 UILabel 动画库？

> ID：13966047
> 
> 赞同：0
> 
> 时间：2012-12-20T05:47:14.780
> 
> 标签：ios, animation, uilabel

我想要某种方法，它需要一个点和文本，并显示一个 UILabel 并让它向上流动，直到它完全消失。我在很多游戏中都看到了这一点，并希望在我的游戏中拥有它。有没有这方面的库，还是我需要编写自己的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:27:04.763

最后只写了我自己的类，你可以在 Git 上找到它： [https ://github.com/theMonster/Game-Label-Animations.git](https://github.com/theMonster/Game-Label-Animations.git)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:00:35.363

我在可可控件中遇到了一个库，它包含一些基本但很酷的动画。[这是源代码的链接。](https://github.com/brunodecarvalho/BBCyclingLabel)

# ruby-on-rails-3 - Rails 查找关联控制器的 id

> ID：13966049
> 
> 赞同：0
> 
> 时间：2012-12-20T05:47:31.140
> 
> 标签：ruby-on-rails-3

我有一个belongs_to 关联，其中有几个月belongs_to 壁纸。Months 表有一个名为 :wallpaper_id 的列，用于获取墙纸的 id。

月控制器：
@wallpaper = Wallpaper.find(:wallpaper_id => params[:wallpaper_id])
@month = @wallpaper.months.find(params[:id])

但我得到一个错误：未知键：壁纸ID

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:58:04.407

```
@wallpaper = Wallpaper.find(params[:wallpaper_id])
@month = @wallpaper.months.find(params[:id]) 
```

或者

```
@month = Month.where(:wallpaper_id => params[:wallpaper_id], :id => params[:id]) 
```

# c# - 任何缩进asp.net代码的库？

> ID：13966051
> 
> 赞同：2
> 
> 时间：2012-12-20T05:47:37.420
> 
> 标签：c#, asp.net, code-generation

目前，我在我的代码生成器项目中手动添加“/t”但是，代码变得混乱且难以管理。我已经研究过 T4，但我需要一些更简单的东西。有没有可以帮助我缩进 asp.net 代码的库？例如，输入一串未缩进的代码，返回一串缩进的代码。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:08:18.293

你看过剃须刀引擎吗？有一些在 asp.mvc 之外工作并支持 tmplating，比如 t4。

看这里：

[http://razorengine.codeplex.com/](http://razorengine.codeplex.com/)

或在这里

[http://www.codeproject.com/Articles/423141/Razor-2-0-template-engine-supporting-layouts](http://www.codeproject.com/Articles/423141/Razor-2-0-template-engine-supporting-layouts)

# php - 更新 WordPress 3.4.2 安全吗？到 3.5？

> ID：13966053
> 
> 赞同：-1
> 
> 时间：2012-12-20T05:48:02.993
> 
> 标签：php, wordpress

我的 wordpress 3.4.2 站点有 25 个激活的插件，那么哪种更新方式最安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:50:08.093

*   在进行任何更新之前备份文件和数据库。

*   一个一个激活插件，然后检查情况如何。它将帮助您找出错误（如果有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:50:01.303

不是这个问题的正确位置，因为它与编程无关......
尝试在 Stack Exchanges [Wordpress](http://wordpress.stackexchange.com)网站上提问。

但是我要做的是将安装克隆到一个新的子域（beta.example.com），包括备份所有 SQL 数据，在新域上安装更新，看看是否一切正常。如果是这样，请将其复制回主服务器，或者只是在其上进行安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:58:38.557

我会等待一段时间，因为新版本可能会破坏一些插件（我有一个中断），直到它们得到更新。等待一段时间后，您可以查看[Wordpress 插件目录](http://wordpress.org/extend/plugins/)中每个插件的页面，每个插件描述页面的右下角都有一个“兼容性”部分，告诉您有多少其他用户报告每个版本都损坏了。

# php - 带接口的 PHP 多重继承

> ID：13966054
> 
> 赞同：16
> 
> 时间：2012-12-20T05:48:07.613
> 
> 标签：php, oop, inheritance, interface

我正在尝试了解使用接口如何为我提供多重继承，因为我一直在谷歌搜索。

```
class A
{
 function do1(){}
 function do2(){}
 function do3(){}
}

class B extends A
{
 function do4(){}
 function do5(){}
 function do6(){}
}

class C extends B
{
} 
```

在上面的示例中，C 类具有 A 类和 B 类的所有方法。但是，B 类也具有 A 类的所有方法，这不是必需的。

我的搜索已经通过将方法移动到类并创建接口来使用接口来解决这个问题，如下所示。

```
interface A
{
     function do1();
     function do2();
     function do3();
}

interface B
{
     function do4();
     function do5();
     function do6();
}

class C implements A, B
{
     function do1(){}
     function do2(){}
     function do3(){}
     function do4(){}
     function do5(){}
     function do6(){}
} 
```

我真的不明白这是如何解决问题的，因为所有代码都在新类中。如果我只想像原来一样使用 A 类，我将不得不创建一个实现接口 A 的新类并将相同的代码复制到新类。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-20T05:56:06.797

PHP没有多重继承。但是，如果您有 PHP 5.4，则可以使用[特征](http://php.net/manual/en/language.oop5.traits.php)至少避免每个类都必须复制代码。

```
interface A {
    public function do1();
    public function do2();
    public function do3();
}

trait Alike {
    public function do1() { }
    public function do2() { }
    public function do3() { }
}

interface B {
    public function do4();
    public function do5();
    public function do6();
}

trait Blike {
    public function do4() { }
    public function do5() { }
    public function do6() { }
}

class C implements A, B {
    use Alike, Blike;
}

class D implements A {
    use Alike;

    // You can even "override" methods defined in a trait
    public function do2() { }
} 
```

但是请注意，您必须同时实现接口并使用特征（或者，当然，提供您自己的实现）。和 C 和 D 完全没有关系，除了都实现了 A 接口。Traits 基本上只是解释器级别的复制和粘贴，不影响继承。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-07-20T00:02:32.180

首先要了解接口是它们不用于继承。理解这一点非常重要。如果您试图让多个类共享相同的具体代码，那不是接口的用途。

第二件要了解的是客户端代码和服务代码之间的区别。

客户端代码本质上是一系列数据请求中的“最后一步”。MVC 中的控制器或视图可以视为客户端代码。该模型同时可以被认为是服务代码。

接口旨在供客户端代码强制其从服务获取的数据类型的一致性。或者另一种思考方式——接口是服务确保它们与来自客户端代码的请求兼容的一种方式。这就是他们所做的一切。它们确实提供了一个访问数据的接口，而不是多个类可以共享的实现。

所以给你一个具体的例子：

**客户端代码 - 用户论坛个人资料的 ProfileViewController 类**

```
class ProfileViewController
{
    public function showProfile(User $user)
    {
         $user->getProfile();
    }
} 
```

**服务代码 - 一种用户模型，用于检索数据并将其传递给请求它的客户端代码**

```
class User
{
    public function getProfile()
    {
         $profile = Do some SQL query here or something
         return $profile;
    }
} 
```

现在假设稍后您决定将用户分为成员、管理员、推荐人、版主、作家、编辑等，并且每个人都有自己独特的个人资料类型。（例如它自己的自定义查询，或数据，或你有什么）

现在这里存在两个问题：

1.  您需要保证您传入的任何内容都将包含 getProfile() 方法。
2.  如果您传入 User 对象以外的任何内容，showProfile() 将失败。

1 通过抽象类和方法（或通过接口）很容易解决。2 起初听起来也很简单，因为您可以将 Moderators、Admins 和 Members 设为 User 基类的所有子类。

但是接下来会发生什么，除了用户配置文件之外，您还希望拥有通用配置文件。也许您想显示体育运动员的个人资料，甚至名人的个人资料。他们不是用户，但他们仍然有个人资料/详细信息页面。

因为他们不是用户，所以将他们视为 User 的子类可能没有任何意义。

所以现在你有点卡住了。showProfile() 需要能够接受的不仅仅是用户对象。实际上，您不知道最终要传入哪种类型的对象。但同时，由于您总是希望能够获取 $user->getProfile()，因此您传入的任何内容都必须足够通用才能传入，并实现具体的 getProfile() 方法。

解决方案？接口！！！！

**首先是一些服务代码**

```
// First define an interface for ANY service object that will have a profile

interface IHasProfile
{
    public function getProfile();
}

// Next, define the class for an object that should have a profile. I'll do a bunch for the sake of an example...

class User implements IHasProfile
{
    public function getProfile()
    {
         $profile = Your unique user profile query here
         return $profile;
    }
}

class Celebrity implements IHasProfile
{
    public function getProfile()
    {
         $profile = Your unique celebrity profile query here
         return $profile;
    }
}

class Car implements IHasProfile
{
    public function getProfile()
    {
         $profile = Your unique vehicle profile query goes here
         return $profile;
    }
} 
```

**接下来，将使用它的客户端代码**

```
class ProfileViewController
{
    public function showProfile(IHasProfile $obj)
    {
         $obj->getProfile();
    }
} 
```

你有它。showProfile() 现在已经足够抽象，它不关心它得到*什么*对象，它只关心对象有一个公共的 getProfile() 方法。因此，现在您可以根据自己的意愿创建新类型的对象，如果它们打算具有配置文件，您可以只给它们“实现 IHasProfile”，它们将自动与 showProfile() 一起使用。

有点人为的例子，但它至少应该说明接口的概念。

当然，您可以只是“懒惰”并且根本不对对象进行类型转换，从而允许传入任何对象。但这完全是一个单独的主题；）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-29T17:19:33.150

多重继承仅适用于接口！

比如我的输出：

```
php > interface A{};
php > interface B{};
php > interface C extends A,B{};
php > class D implements C{};
php > $d = new D();
php > echo ($d instanceof A);
1 
```

*   我创建了 A 和 B 接口，C 接口扩展了它们。
*   在我们有了实现 C 接口的 D 类之后
*   最后问一下$d对象是不是instanceof的接口，是啊是真的

对于 lulz，我尝试创建扩展 D 和 stdclass 类的 E 类并得到错误！

```
php > class E extends D, stdclass{};
PHP Parse error:  syntax error, unexpected ',', expecting '{' in php shell code on line 1

Parse error: syntax error, unexpected ',', expecting '{' in php shell code on line 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T05:54:55.910

`OOP`像许多受支持的语言一样，在 PHP 中不可能进行多重继承

[在此处](https://stackoverflow.com/questions/9107385/multiple-inheritance-in-actionscript-3/13553938#13553938)查看类似主题。主题在`AS3`但给你答案。

[在这里](https://stackoverflow.com/a/13553938/310967)的同一篇文章中回答了特别关于使用接口解决的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-08T08:40:14.290

正如[@tonicospinelli](https://stackoverflow.com/a/31121763/1400467)所说，似乎**PHP确实允许接口的多重继承**，但没有明确解释，只是[给出了一个例子](http://php.net/manual/en/language.oop5.interfaces.php#example-208)

多重继承的工作方式，PHP 使用实现*Interfaces的**Traits*传递这些。

 *一旦您声明了一个实现“多接口”的*类(1)，您就可以使用已经定义的**Traits*来确保继承性能良好。

> **(1)** : 说“多接口”我的意思是一个实现一个接口的类，它从多个其他接口扩展而来*

# unity3d - 如何将字符串变为整数

> ID：13966059
> 
> 赞同：0
> 
> 时间：2012-12-20T05:48:59.673
> 
> 标签：unity3d, monodevelop, unityscript, community-server

我必须将字符串更改为整数

```
var floorname = coll.collider.gameObject.name;   //output:block25

var cur = floorname.Substring(5);    //output: 25

var cu = parseInt(cur); 
```

但是在给 print(cu); 它正确显示了价值。但出现错误 FormatException：输入字符串的格式不正确 System.Int32.Parse (System.String s)

我怎样才能清除这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T22:42:04.810

微软的文档说整数字符串中的空格是可以的，但我不确定这是否包括换行符。

[http://msdn.microsoft.com/en-us/library/f56zcx39(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/f56zcx39(v=vs.90).aspx)

在解析整数之前使用 String.Trim() 是最安全的。

`cur = cur.Trim();`

# android - 按钮是否有任何属性让它看起来很时尚？

> ID：13966061
> 
> 赞同：1
> 
> 时间：2012-12-20T05:49:15.007
> 
> 标签：android

我正在使用以下内容。我想添加时尚的属性，例如颜色和样式。请帮忙

```
 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView2"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="43dp"
    android:text="OK" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:55:06.010

将以下代码粘贴到 drawable 文件夹中的新 xml 文件中，并将文件命名为 draw 和

并在按钮中给出此 xml 文件名的背景

```
 <?xml version="1.0" encoding="utf-8"?>
     <shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:padding="10dp"
    android:shape="rectangle" >

    <solid android:color="#1F2120" />
    <corners
        android:bottomLeftRadius="6dp"
        android:bottomRightRadius="6dp"
        android:textColor="@android:color/white"
        android:topLeftRadius="6dp"
        android:topRightRadius="6dp" />

</shape> 
```

这就是你如何使用它

```
 <Button
    android:id="@+id/force"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_margin="15dp"
    android:layout_weight="1"
    android:background="@drawable/draw"
    android:text="some txt"
    android:textColor="@android:color/white"
    android:textSize="20dp" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:53:05.633

您可以使用以下方法将图像添加到此按钮：

```
android:background="@drawable/image_name" 
```

如果你想简单地为这个按钮的背景添加一些颜色，你可以这样做：

```
android:background="#ff0000"  // color code for red color 
```

此外，您可以像这样指定文本颜色：

```
android:textColor="#0000ff"   // color code for blue color 
```

如果您想更改按钮在不同事件上的背景，例如当按钮被聚焦、按下等时，您需要`mybutton_style.xml`在`drawable`文件夹中创建一个 xml 文件。

```
// code for mybutton_style.xml

    <?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
     <item android:state_pressed="true"
           android:drawable="@drawable/btn_image_pressed" /> <!-- pressed -->
     <item android:state_focused="true"
           android:drawable="@drawable/btn_image_focussed" /> <!--focused -->
     <item android:drawable="@drawable/btn_image_default" /> <!-- default -->
 </selector> 
```

之后，您只需将其指定为按钮的背景：

```
android:background="@drawable/mybutton_style" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:53:36.177

**将以下 bg.xml 文件复制**到您的`drawable`文件夹中。

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">

        <item android:state_pressed="true"><shape android:shape="rectangle">
                <corners android:radius="10dp" />
    <gradient
                    android:endColor="#fffffa"
                    android:startColor="#ffffff"
                    android:angle="270" />
                <solid android:color="#00aa00" />

                <padding android:bottom="10.0dip" android:left="10.0dip" android:right="10.0dip" android:top="10.0dip" />

            </shape></item>
        <item android:state_pressed="false"><shape android:shape="rectangle">
                <corners android:radius="10dp" />

                <solid android:color="#ffffff" />
    <gradient
                    android:endColor="#fffffa"
                    android:startColor="#ffffff"
                    android:angle="270" />
                <padding android:bottom="10.0dip" android:left="10.0dip" android:right="10.0dip" android:top="10.0dip" />

            </shape></item>

    </selector>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView2"
 android:background="@drawable/bg"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="43dp"
    android:text="OK" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T05:54:08.710

```
<!-- Custom Style for bottom displaying confirm and cancel -->
<style name="Widget.GsMenuButton" parent="@style/Widget.Button"> 
    <item name="android:layout_height">36px</item>
    <item name="android:layout_width">82px</item>
            <item name="android:singleLine">true</item>
            <item name="android:ellipsize">end</item>
    <item name="background">@drawable/gs_menu_btn</item>
    <item name="android:textColor">#fff</item>
</style> 
```

这就是我为制作按钮所做的。它使用背景属性更改按钮背景颜色，并使用 更改文本颜色`android:textColor`。我认为您可以将这些添加到您的按钮属性中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T06:13:29.040

如果你想让你的按钮时尚但简单，那么你可以尝试以下方法：

```
android:background="@null"
android:typeface="serif" 
```

如果您不想要简单的东西，那么您可以根据需要自定义它。

# java - Java 中的 hasNext 代码

> ID：13966064
> 
> 赞同：0
> 
> 时间：2012-12-20T05:49:38.083
> 
> 标签：java

我在打开文件时遇到问题。`hasNext`似乎因以下错误而崩溃`java.lang.NullPointer`。这是我出错的代码（带有`hasNext`）。

```
import java.io.*;
import java.util.Scanner;
public class Customers{
private Scanner opener;

    public void openFile() {
        try {
            opener = new Scanner (new File ("customer.txt"));
        } catch (Exception f) {
            System.out.println("Can not read file.");
        }
    }

    public void readFile() {
        while(opener.hasNext()) {
            String a = opener.next();
            String b = opener.next();
            String c = opener.next();

            System.out.printf("%s %s %s\n", a, b, c);
        }
    }

    public void closeFile() {
        opener.close();
    }

} 
```

这是另一类：

```
public class fileTest {
public static void main (String args []) {
    Customers c = new Customers();
    c.openFile();
    c.readFile();
    c.closeFile();
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T05:52:18.187

**opener 可能为 null，因为打开文件时可能出现异常**

```
public void openFile() throws Exception{

            opener = new Scanner (new File ("customer.txt"));
    } 
```

如果打开文件有任何异常，则只打印一条消息，并且 opener 保持为空，这将导致 opener.hasNext() 中的 NPE

您不应该捕获异常而是抛出异常，因为如果您无法打开文件，那么代码应该会失败并且其他方法不应该执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T05:57:01.647

您的问题不清楚，但您*似乎*是在说这`opener.hasNext()`是在抛出 NPE。

如果是这样，那就意味着`opener`是`null`。这反过来意味着要么你没有打电话，要么你`openFile()`正在打电话但它不起作用。我怀疑后者，特别是因为该`main`方法确实调用了`openFile()`.

如果该`openFile()`方法无法打开文件（例如，因为它不存在给定的路径名​​），则打印一条消息并`opener`保留`null`。这可能就是正在发生的事情。

* * *

该`openFile()`方法有许多缺陷：

1.  它正在捕获`Exception`……它可能会捕获除您期望的异常之外的其他异常。
2.  它没有记录堆栈跟踪或实际的异常消息
3.  它*假设*问题是由于无法打开文件......当它可能是其他东西时（通常，如果不是在这种特殊情况下），
4.  一旦它打印了错误消息，它就会继续*，就好像没有发生任何不好的事情一样*。

NPE 问题是`openFile()`缺陷的结果。

请注意，如果您打印出实际的异常消息，它应该会告诉您应用程序无法打开文件的原因。

**更新**

错误消息`customer.txt (The system cannot find the file specified)`清楚地告诉您它找不到文件。您的应用程序的当前目录可能不是包含该文件的目录。由于您使用了相对路径名，因此您告诉它在当前目录中查找。解决方案是使用绝对（完整）路径名......或确保使用正确的当前目录启动您的应用程序。

* * *

一旦你解决了这个问题，你读取文件的方式就会出现问题。该`readFile()`方法假设它将能够从输入中读取 3 个标记（字符串）的倍数。如果文件格式有问题，您可能会遇到（未经检查的）异常。您可能应该捕获此异常并生成诊断信息……而不是假设不会发生任何不好的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:53:21.627

`File`第一：确保你的文件确实存在于磁盘中，即使文件不存在也可以创建对象。

第二：您正在通过 doin 签入一个元素`opener.hasNext()`并访问接下来的 3 个元素！

当列表中只有一个元素时`opener.hasNext()`返回`true`，但您正在访问接下来的 2 个不存在的元素！因此空指针异常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T06:02:01.740

你`opener`没有被初始化为什么空指针异常，确保文件存在在那里，只是尝试给出文件的绝对路径

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T06:06:45.570

在这里检查几点：

1.  您的程序是否正在读取指定的文件？如果您使用的是 eclipse，请将您的文件保存在 src 文件夹中，并将路径指定为 opener = new Scanner (new File ("src/customer.txt"));

2.您的代码的第二个问题是您只检查一次 while(opener.hasNext()) 的下一个元素，然后读取三个元素 String a = opener.next(); 字符串 b = opener.next(); 字符串 c = opener.next(); .如果文件中没有下一个元素，您将收到异常，请在访问之前检查每个元素。

请改用此代码：

public void readFile() { while(opener.hasNext()) { String a = opener.next(); System.out.printf("%s\n", a); } }

# wcf - WCF 错误“无法连接到远程服务器”

> ID：13966068
> 
> 赞同：3
> 
> 时间：2012-12-20T05:49:57.270
> 
> 标签：wcf, iis-7

我们有一个托管在 IIS 中的网站有一个具有以下设置的 wcf 服务

*   WCF（文件夹）在 IIS 中设置为应用程序
*   WCF的svc文件可以浏览

我们的服务正在连接，用于连接和检索文件。我们传递参数作为回报，我们得到一个文件。

问题

*   此服务在 Web 隔离环境中与代理一起使用
*   在启用 Web 的环境中失败

显示错误

`The server encountered an error processing the request. The exception message is 'Unable to connect to the remote server'. See server logs for more details.`

# android - 在果冻豆中使用相机 API

> ID：13966071
> 
> 赞同：0
> 
> 时间：2012-12-20T05:49:59.620
> 
> 标签：android, camera, android-4.2-jelly-bean, autofocus

任何人都可以提供使用此链接中给出的适用于 Android 4.1 和 4.2 的相机 API 的示例代码：[链接](http://developer.android.com/reference/android/hardware/Camera.AutoFocusMoveCallback.html)

我目前正在将此代码用于旧版本，但它不适用于 Jellybean 设备

```
AutoFocusCallback myAutoFocusCallback = new AutoFocusCallback() {

        @Override
        public void onAutoFocus(boolean arg0, Camera arg1) {
            // TODO Auto-generated method stub
            if (arg0) {
                if (mPreviewRunning) {
                    mCamera.takePicture(myShutterCallback, mPicture, mPicture);
                }

            } else {
                flKeepClean.setVisibility(View.VISIBLE);
                btnCamera.setEnabled(true);
                side.setEnabled(true);

            }

        }
    };

    ShutterCallback myShutterCallback = new ShutterCallback() {

        @Override
        public void onShutter() {
            // TODO Auto-generated method stub
        }
    }; 
```

[自动对焦移动回调](http://developer.android.com/reference/android/hardware/Camera.AutoFocusMoveCallback.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:01:09.430

抱歉更新晚了。问题是当设备没有自动对焦时。所以你需要先检查设备是否有自动对焦： boolean focus = getPackageManager().hasSystemFeature("android.hardware.camera.autofocus");

# php - 如果用户在未注销的情况下关闭浏览器，如何在聊天列表中显示用户离线？

> ID：13966074
> 
> 赞同：-1
> 
> 时间：2012-12-20T05:50:02.273
> 
> 标签：php, jquery

我正在用 php 创建一个应用程序，以允许用户相互聊天。现在我遇到的问题是用户没有注销，只是关闭浏览器，在他们的朋友聊天列表中他们仍然在线，因为他们没有注销，所以我无法在数据库中更新他们已注销。

无论如何，当他们关闭浏览器时，我是否可以在数据库中更新他们现在处于脱机状态，或者有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:20:18.373

一种解决方案是让应用程序自动注销在一定时间内没有任何活动的任何用户。客户端可以在浏览器打开时定期向服务器发送“活动”通知 - 如果服务器在 5 分钟内没有收到此类通知，它可以将该用户标记为“已注​​销”。

# c# - asp.net MVC 4 Telerik Grid Ajax 问题

> ID：13966078
> 
> 赞同：1
> 
> 时间：2012-12-20T05:50:32.443
> 
> 标签：c#, asp.net-mvc, telerik-grid

我正面临 mvc telerik grid 的问题，我的观点是：

```
@(Html.Telerik().Grid(Model.EmployeeList)
.Name("EmployeeGrid")
.Columns(colums =>
    {
        colums.Bound(e => e.First_Name);
        colums.Bound(e => e.Last_Name);
        colums.Bound(e => e.Hire_Date);
        colums.Bound(e => e.Home_Phone);
    })
    .DataBinding(dataBinding => dataBinding.Ajax().Select("_AjaxBinding", "Home"))
    .Groupable()
    .Sortable()
    .Pageable(paging=>paging.PageSize(10))
    .Filterable()
    ) 
```

还有我的控制器代码

```
[AcceptVerbs(HttpVerbs.Post)]
    [GridAction]
    public ActionResult _AjaxBinding(GridCommand command)
    {
        using (var contax=new NorthwindEntities()){
            int pagesize=command.PageSize;
            int page=command.Page;

            var EmployeeList = (from items in contax.Employees
                                select new
                                {
                                    items.First_Name,
                                    items.Last_Name,
                                    items.Hire_Date,
                                    items.Home_Phone
                                });
            return View(new GridModel
            {
                Data = EmployeeList
            });
        }
    } 
```

加载时数据已从数据库正确加载，但当我单击分页或排序数据时发生内部服务器错误 500。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:22:44.263

您在一次性范围内使用 Linq 查询。但是查询执行被推迟到使用它（当您离开`using {}`范围时）。并且您的上下文已处理！解决方案 ：

`.ToList`在查询末尾添加：

```
var EmployeeList = (from items in contax.Employees
                                select new
                                {
                                    items.First_Name,
                                    items.Last_Name,
                                    items.Hire_Date,
                                    items.Home_Phone
                                }).ToList(); 
```

# wordpress - 使用 home.php 时如何访问博客 index.php？

> ID：13966079
> 
> 赞同：0
> 
> 时间：2012-12-20T05:50:35.397
> 
> 标签：wordpress

我确信有一个简单的解决方案，但我找到了解决方案。

我创建了 homepage.php 以显示一些内容，然后创建了 index.php 以显示 blogroll 和为单个博客文章创建的 single.php - 现在我如何访问 index.php？我可以通过在 URL 中输入标题或单击管理员中的“查看帖子”按钮来查看各个帖子，但是我的博客列表所在的实际 index.php 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:16:48.067

Nvm，我只需要创建页面，相应地分配模板，并在设置的阅读部分设置首页和博客。希望这对其他人有帮助。

# hibernate - Hibernate4 中的批量更新

> ID：13966085
> 
> 赞同：2
> 
> 时间：2012-12-20T05:51:11.463
> 
> 标签：hibernate, batch-processing

我想对查询执行批量更新。这是我想在批处理中执行的 4 个查询：

```
Update Contact SET contactNumber = '876-128-9871' WHERE userId = 1 AND contactType = 'A';
Update Contact SET contactNumber = '615-165-9071' WHERE userId = 1 AND contactType = 'B';
Update Contact SET contactNumber = '816-897-5818' WHERE userId = 1 AND contactType = 'C';
Update Contact SET contactNumber = '151-891-7861' WHERE userId = 1 AND contactType = 'D'; 
```

是否可以针对这种情况执行批量更新？

如果是，那怎么办？

任何参考/链接表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:12:26.620

如果我理解正确，您只想进行 DML 样式的批处理。这是关于它的官方教程：http: [//docs.jboss.org/hibernate/orm/4.0/manual/en-US/html/batch.html](http://docs.jboss.org/hibernate/orm/4.0/manual/en-US/html/batch.html)

# java - JNA：函数及其参数映射是如何从 java 到 VC++ 发生的

> ID：13966090
> 
> 赞同：2
> 
> 时间：2012-12-20T05:51:47.483
> 
> 标签：java, visual-c++, jna, function-parameter

在 java 中，我使用 JNA 加载 VC++ dll 文件并在其中调用函数，在一个函数中我需要发送 6 个参数，在 VC++ 函数定义中，我得到前 3 个参数的正确值，但后 3 个参数的值为“0”，
第二个参数是字节数组，当我发送 1024 个字节时，我得到第 5 个**布尔**参数为**假**，但当我传递 10 个字节时，它被视为**真**
我的函数原型：

`int deviceupload(Pointer p, _byte[] data_, long startaddress, long datalength,_Boolean rt_,Pointer xyz);`

那么映射会根据参数的大小而改变吗？
或者 JNA 堆栈太小以至于不能容纳 6 个参数？但是根据 JNA 文档`MAX_NARGS`的`Function`类值是 256 所以我认为 6 个参数不是问题，
即使第 3 和第 4 个参数具有相同的数据类型，在 VC++ 函数定义`startaddress`中被正确接收但`datalength`接收到的值为 0

，所以知道为什么它的行为如此奇怪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:34:18.203

实际上我的问题已经解决了，VC++ 函数期望 long 是 4 字节，但是在 java 中我传递的是 8 字节的 long，但是根据 JNA[文档](https://github.com/twall/jna/blob/master/www/Mappings.md)VC++ long 等价于 Java 中的 NativeLong，但我们不能减去两个 NativeLong 变量我应该这样做。所以我通过了Long。

但后来我在 VC++`int`中为 (4bytes) 参数在 java 中传递了 (4bytes) 参数，然后它工作正常，但我不明白为什么其他参数受到影响，因为我的 que 中以前的参数数据类型未匹配，因为变量数据类型未匹配变量数据是生效了，所以我的问题仍然没有答案，任何人都可以帮助我理解它吗？，不幸的是只有我的错误被清除了`long`

`startaddress``datalength`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:39:24.560

参数被放置在堆栈上的内存“槽”中。一个小参数可能占用一个槽，或与另一个参数共享一个槽，而一个大参数可能占用两个槽。您可以看到，如果您将一个小参数误认为是一个大参数，它将如何将所有后续参数转移到不正确的位置。

无效 my_func（int32 p1，int64 p2）

```
|               |
+---------------+
| P2 (64-bit)   |
+---------------+
| P2            | (P2 takes up two slots)
+---------------+
+ P1 (32-bit)   |
+---------------+ <-- Top of stack 
```

现在，如果您错误地为 P1 使用了 64 位值，则会得到以下信息：

```
|               |
+---------------+
| P2 (64-bit)   |
+---------------+
| P2            | 
+---------------+
+ P1 (64-bit)   |
+---------------+ 
+ P1            |
+---------------+ <-- Top of stack 
```

被调用者（你调用的函数）不知道这种转变已经发生，因此试图从它们的预期位置读取参数。对于小的论点，它可能会得到一个更大的论点，而对于更大的论点，它可能会得到两个或多个其他论点的片段。

被调用者实际看到的是：

```
|               |
+---------------+
| (P2)          | 
+---------------+
+ (P1)          |
+---------------+ 
+ (P1)          |
+---------------+ <-- Top of stack 
```

您可以看到为 P1 读取的值实际上只是较大值的一半，而为 P2 读取的值包括 P1 的另一半和作为 P2 传入的值的一半。

（这个解释有些简化，但通常表明堆栈是如何工作的）

# javascript - 在javascript中排队一个片段？

> ID：13966092
> 
> 赞同：1
> 
> 时间：2012-12-20T05:51:59.207
> 
> 标签：javascript, queue

我需要对片段进行排队并在给定的时间（每秒一次）执行它们。这些片段实际上是玩家的动作，例如 jump()、attack()、walk('left') 等。

当用户按下一个键时，我需要将他的操作排队并每秒执行一次所有操作。

现在我的方法，因为没有更好的主意，就是将每个片段添加到一个数组中，然后用 eval() 循环遍历它。这是我的代码：

```
var queue = [];

// On player or AI action
queue.push('attack()'); // Could be walk('left'), jump() etc.

// On new frame
for(var i=0;i<queue.length;i++){
  eval(queue[i]);
  }
queue = []; 
```

我确定我的方法很糟糕，但我想澄清我想要做什么，我想这样的问题并不少见。任何信息/想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:54:43.837

这*是*可怕的 -`eval`是邪恶的。相反，使用[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)：

```
var queue = [];

queue.push(function() { attack(); });

while (queue.length) {
    queue.shift().call();
} 
```

这是一般情况，但在这种情况下可以简化：`function() { attack(); }`是一种更复杂且更慢的编写方式`attack`，因此`queue.push(attack)`也可以正常工作（如果您在`function attack() { ... }`可访问的地方定义了 aa）。显然，如果您的函数带有参数（或者更确切地说，如果每个函数带有不同的参数；您可以在`call(thisobj, param)`调用中提供统一的参数列表），您就不能这样做。

**编辑**您的附加查询：

在您编写的代码中，这应该已将变量捕获到闭包中；如果您更改变量，则该值将是您在执行它时获得的值。如果你得到了`undefined`，我猜你`closerEnemy = undefined`稍后会在某个地方执行。这是一个常见的错误来源，例如，人们试图将点击处理程序绑定到循环中的多个元素，并在处理程序中使用循环计数器 - 处理程序捕获计数器而不是它的值，并且总是稍后评估到元素的数量（循环结束时剩下的最后一个值）。

要捕获值而不是变量，请使用以下技巧：

```
(function(capturedCloserEnemy) {
  queue.push(function() {
    attack(capturedCloserEnemy);
  });
})(closerEnemy); 
```

（变量命名不同只是为了便于阅读；它们都可以命名相同，这并不重要，因为阴影。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:00:12.580

您的方法的问题在于：

1.  您正在使用评估

    您已经听说过使用 eval 的风险。如果没有，请[从 MDN 检查此文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)。

2.  您正在使用循环

    使用循环时，JavaScript 会尽可能快地完成循环。这将导致 UI 中的阻塞。这也意味着当您以这种方式开始循环时，您的动画将显示为仅在第一个动画处移动、冻结并在队列中的最后一个动画处结束。

作为对这两个问题的补救措施，为什么不将对您打算执行的函数的引用推送到队列中。此外，为了防止 UI 阻塞，请改用计时器：

```
var queue = [];

//actions as functions
function attack(params){...}
function block(params){...}
function walk(params){...}

//our animation timer
var animationTimer = setInterval(function(){
    //remove the action from the queue and execute
    var nextAction = queue.shift();
    //if we shifted something, execute
    if(nextAction){
        nextAction.call();
    }
},1000);

//to insert into the queue, push the reference of the function instead.
queue.push(attack); 
```

# php - 如何使用 php querypath 从 html 中删除锚点标签

> ID：13966093
> 
> 赞同：1
> 
> 时间：2012-12-20T05:52:13.620
> 
> 标签：php, html-parsing, querypath

我正在使用 php Querypath，并且正在尝试从 html 中删除具有特定 href 的锚标记。

例如

```
<html>
<body>
   <div>
      <a  href="#down"></a>
      <a href="#top" ><img src="img.png" /> </a>
      <a href="#top" ><img src="img.png" /> </a>
   </div>
</body>
</html> 
```

我的输出应该是

```
<html>
<body>
   <div>
      <a  href="#down"></a>
   </div>
</body>
</html> 
```

应删除带有 href 顶部的锚点。

我尝试使用以下代码

```
$html = qp($html)->find("a#top")->remove()->writeHTML(); 
```

但它并没有删除以下锚点。

请让我知道如何在 php 查询路径中实现这一点。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:16:59.303

这将删除带有`href=top`.

```
$("a[href^=#top]").remove(); 
```

# android - 如何在我的模拟器上运行 droidwall

> ID：13966095
> 
> 赞同：0
> 
> 时间：2012-12-20T05:52:30.557
> 
> 标签：android, android-emulator, iptables

当我尝试在我的 2.3 模拟器中运行 droid wall 应用程序时，它显示了一些错误

```
Error applying iptable rules.
exit code3
iptable v1.4.10
iptable v1.4.10:
cant inialize iptable 'Filter':
Table need no exist(Do you need insmod?) perhaps iptables or your kernel need to be upgraded. 
```

如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:59:12.907

Droidwall 是一个处理 iptables 的应用程序，设置规则和链来控制 android 设备中应用程序的网络权限。它需要 root 访问权限才能为 iptables 设置规则。因此，您的设备必须为此目的扎根。模拟器没有root权限，所以你不能在上面运行droidwall。

# facebook - 发布到用户的墙 - 墙和提要之间的区别？

> ID：13966096
> 
> 赞同：2
> 
> 时间：2012-12-20T05:52:33.293
> 
> 标签：facebook

我在我的网站上设置了 Facebook 登录，并在某些用户操作发生时做了几个测试墙帖子。我在我的 FB 帐户上对其进行了测试，并且帖子出现在我的墙上（好）。

立即我收到了几个朋友的电子邮件，说“我如何关闭这些通知，他们正在填满我的提要”。

我猜这不是推广我的应用程序的好方法——它会惹恼人们。除非我在应用操作时可以选择让用户说“是的，发布到我的墙上”。

我注意到我的帖子也出现在活动收报器中（在您的个人资料页面的右侧），并且许多游戏应用程序在那里发布玩家活动 - 是否可以只发布到那里而不是墙上？如果是这样，我应该编写什么代码而不是“/me/feed”、“post”？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:18:51.047

使用 Fb.ui 提要方法，而不是直接通过图形 API 发布帖子。这将打开一个弹出对话框，用户可以接受在墙上发布或取消：

```
FB.ui(
  {
    method: 'feed',
    name: 'Facebook Dialogs',
    link: 'https://developers.facebook.com/docs/reference/dialogs/',
    picture: 'http://fbrell.com/f8.jpg',
    caption: 'Reference Documentation',
    description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
  },
  function(response) {
    if (response && response.post_id) {
      alert('Post was published.');
    } else {
      alert('Post was not published.');
    }
  }
); 
```

注意：此处的所有链接都应指向您在画布 url 中指定的域

更好的方法是使用[开放图形操作](https://developers.facebook.com/docs/concepts/opengraph/)，而不是仅仅在墙上发布故事。打开图表操作显示在时间线的活动部分。这些故事很小，因此看起来不像是向用户墙发送垃圾邮件。如果帖子数量很高，则将其汇总/合并在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:07:55.407

在活动记录器中，实际上显示的是来自用户或页面或应用程序的更新，它们实际上来自，如果您回到他们的墙并查看他们各自的墙。

提要通常是更新，也来自墙上。

您可以做的一件事是，在为您的应用程序提供权限时，您可以使其仅对您可见（只有我选项），这样您的朋友就不会在他/她的提要中看到它。

否则暂时没有其他办法。

# jquery - 地理自动完成 jquery + 谷歌地图

> ID：13966097
> 
> 赞同：0
> 
> 时间：2012-12-20T05:52:33.213
> 
> 标签：jquery, google-maps

在这个插件[geo-autocomplete](http://geo-autocomplete.googlecode.com/svn-history/r16/trunk/demo/ui.demo.html)中，为什么当我输入“New”开头的“New York”时，他什么也没显示？

# amazon-s3 - S3 副本是否保留版本控制

> ID：13966104
> 
> 赞同：4
> 
> 时间：2012-12-20T05:53:32.603
> 
> 标签：amazon-s3, boto

根据[亚马逊](http://aws.amazon.com/about-aws/whats-new/2010/02/08/versioning-feature-for-amazon-s3-now-available/)

> 版本控制允许您保留、检索和恢复 Amazon S3 存储桶中每个对象的每个版本。为存储桶启用版本控制后，只要您对现有对象执行 PUT、POST、COPY 或 DELETE 操作，Amazon S3 就会保留它们。

我是否正确假设如果我将内容从区域 x 中的一个存储桶复制到区域 y 中的另一个存储桶，版本历史将被保留？

如果没有通过复制请求保留版本控制，我如何能够将版本控制转移到新存储桶？我想为此使用 boto，但会接受任何语言。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:40:02.263

很不幸的是，不行

版本历史记录会保存在启用了版本控制的存储桶中的每个文件。如果您修改文件，它将保留旧版本并为当前版本创建新修订。

如果您将文件复制到另一个存储桶，即使在同一区域内，目标文件也将是修订版 1。

我已经使用[Cloudberry S3 Explorer Pro对此进行了测试](http://www.cloudberrylab.com/amazon-s3-explorer-pro-cloudfront-IAM.aspx)

**编辑：**

您实际上可以直接访问文件的每个版本。所以你可以做的是逐个版本复制，在新存储桶上重播整个过程。这将间接复制文件，包括版本控制

# jquery - Jquery - 如何将 mouseleave 事件设置为 after() 生成 div？

> ID：13966110
> 
> 赞同：4
> 
> 时间：2012-12-20T05:53:58.173
> 
> 标签：jquery, html, css, mouseevent, mouseleave

我使用下面的函数从中心放大一个 div。导致jQuery无法再次访问jQuery生成元素，因此我将`onmouseout`属性添加到生成的`<div>`.但是当我将鼠标移动到div的子元素中时，会触发onmouseout事件，这不是我想要的.

那么，我该如何解决它，或者有没有其他方法可以达到同样的效果？

```
shows = $(".shows");
shows.bind('mouseenter', function() {
    enlargeCenter($(this), 1.8, 'bigger');
});

function enlargeCenter(des, ratio, nclass) {
    var oWidth  = des.width();
    var oHeight = des.height();
    var nHeight = oHeight * ratio;
    var nWidth  = oWidth * ratio;
    var left    = des.position().left;
    var top     = des.position().top;
    left        = (oWidth - nWidth) / 2 - oWidth;
    top         = (oHeight - nHeight) /2;

    des.after("<div class='" + nclass + "' onmouseout='remove()'>" + des.html() + "</div>");
    $("." + nclass).css({
        'width': nWidth,
        'height': nHeight,
        'left': left,
        'top': top
    });
} 
```

这是CSS代码

```
.shows, .bigger {
    float:left;
width:200px;
height:250px;
position: relative;
left:0;
top:0;
border:1px #ccc solid;
background: RGB(245,245,245);
overflow:hidden;
}

.bigger {
border:0;
background: white;
box-shadow: #ccc 0 0 5px;
-moz-box-shadow: #ccc 0 0 5px;
-ms-box-shadow: #ccc 0 0 5px;
-webkit-box-shadow: #ccc 0 0 5px;
} 
```

HTML

```
<div class="container">
    <div class="shows">
        <p>odfelakjfelkavjekvaelkfjjjj</p>
    </div>
</div> 
```

如果您移动鼠标，`<p>`该`onmouseout`事件将被触发并且较大的`div`将被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:49:51.260

只要鼠标离开目标元素或进入子元素，mouseout 事件就会触发。IE 有一个专有的 mouseleave 事件，只有当鼠标完全离开目标元素时才会触发。jQuery 用 mouseleave 函数模拟了这一点。我尝试了以下更改，我认为它会做你想要的：

```
...
des.after("<div class='" + nclass + "'>" + des.html() + "</div>");
    $("." + nclass).css({
        'width': nWidth,
        'height': nHeight,
        'left': left,
        'top': top
    }).mouseleave(function(){$(this).remove()});
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:15:25.717

由于我没有什么可看的，我猜这可能会解决您的问题，

更改您的`mouseenter`活动，

```
shows.bind('mouseenter', function() {
    enlargeCenter($(this), 1.8, 'bigger');
}); 
```

对此，

```
shows.bind('mouseenter', function(evt) {
    evt.stopPropagation();
    enlargeCenter($(this), 1.8, 'bigger');
}); 
```

# ruby-on-rails - Google OpenID 策略在 Rails 中不起作用

> ID：13966115
> 
> 赞同：1
> 
> 时间：2012-12-20T05:54:27.040
> 
> 标签：ruby-on-rails, ruby, openid, omniauth, google-openid

我想让用户使用 Google OpenID 登录我的 Rails 应用程序。所以我有这些宝石

```
gem 'omniauth'
gem 'omniauth-openid'
gem 'devise' 
```

**配置/初始化程序/omniauth.rb**

```
require 'openid/store/filesystem'
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :open_id, :store => OpenID::Store::Filesystem.new('/tmp'), :name => 'google', 
    :identifier => 'https://www.google.com/accounts/o8/id', :require => 'omniauth-openid'
end

OmniAuth.config.on_failure = Proc.new do |env|
    OmniAuth::FailureEndpoint.new(env).redirect_to_failure 
```

结尾

页面上还有一个链接

```
<% if current_user %>
  Welcome <%= current_user.name %>!
  <%= link_to "Sign Out", signout_path %>
<% else %>
  <%= link_to "Sign in with Google", "/auth/google" %>

<% end %> 
```

当我被重定向到谷歌登录页面时，我点击“允许”，我被重定向回 ... **/auth/failure?message=invalid_credentials&strategy=google**出于某种原因，尽管我登录正确。

这是来自 Webrick 的日志：

```
Started GET "/auth/google" for 127.0.0.1 at 2012-12-20 12:45:13 +0700
(google) Callback phase initiated.
Error attempting to use stored discovery information: OpenID::TypeURIMismatch
Attempting discovery to verify endpoint
Performing discovery on https://www.google.com/accounts/o8/id?id=323221212143243243
WARNING: making https request to https://www.google.com/accounts/o8/id?id=2121212143243243243243 without verifying server certificate; no CA path was specified.
(google) Callback phase initiated.
(google) Authentication failure! invalid_credentials encountered.

Started GET "/auth/google/callback?_method=post&openid.ns= .... very long string" for 127.0.0.1 at 2012-12-20 12:45:18 +0700

Started GET "/auth/failure?message=invalid_credentials&strategy=google" for 127.0.0.1 at 2012-12-20 12:45:18 +0700 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:51:57.070

你说的并没有做错什么。不幸的是，Google 对 OpenID 的响应是一个非常长的 URL。只要它超过了 webrick 可以处理的 256 个字符。

如果您将另一个服务器添加到您的 gemfile，例如：

```
gem 'thin' 
```

然后像这样启动服务器：

```
rails s thin 
```

那么您应该会发现通过 google 登录就可以了。

# android - as3 在对象下方显示 webview

> ID：13966117
> 
> 赞同：0
> 
> 时间：2012-12-20T05:54:34.263
> 
> 标签：android, actionscript-3, flash

我想知道是否有人知道在 as3 上显示 webview 外部 html 页面到显示对象背面的方法或方法？这是我的代码

```
import flash.filesystem.FileMode;
import flash.filesystem.FileStream;
import flash.filesystem.File;

var fPath:String = "http://mysite.com/demo.php";

var webView = new StageWebView();
webView.stage = stage;
webView.viewPort = new Rectangle(15, 283, 340, 327);
webView.addEventListener(Event.COMPLETE, onComplete);
webView.loadURL( fPath );

function onComplete(event:Event):void{
    trace("event = ", event);
    trace("event.target = ", event.target);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:06:25.207

StageWebView 始终位于显示列表的顶部。[有一种解决方法，您可以将其绘制到 BitmapData 对象，然后使用drawViewPortToBitmapData](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html#drawViewPortToBitmapData%28%29)在显示列表后面的位图中显示它

显然，绘制的版本不是交互式的。

hth。

# bash - 别名参数不起作用

> ID：13966118
> 
> 赞同：1
> 
> 时间：2012-12-20T05:54:40.467
> 
> 标签：bash, ssh

我试图让 scp 更容易使用，所以我今天了解了 alias ，我正在这样使用它：

```
alias loudie-scp="scp -i keys/aws.pem $1 ec2-user@ec2-107-20-68-112.compute-1.amazonaws.com:/home/ec2-user" 
```

$1 用于指定我要传输的文件。但是，这不起作用并给我一个错误：

```
scp: /home/ec2-user: not a regular file 
```

当我手动执行此命令以 $1 传入任何文件时，不会发生这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T05:58:01.307

BASH 常见问题解答条目 #80：[“如何创建带参数的别名？”](http://mywiki.wooledge.org/BashFAQ/080)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:01:33.653

不幸的是，BASH 别名有点像查找和替换——它们对于你描述的那种任务不是很强大。我建议改用脚本文件并将其放在可执行目录中；像这样：

```
#!/bin/bash
scp -i keys/aws.pem $1 ec2-user@ec2-107-20-68-112.compute-1.amazonaws.com:/home/ec2-user 
```

然后，鉴于它具有`loudie-scp`您可以这样称呼它的名称：

```
loudie-scp <parameter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:01:47.747

正如我确信 Ignacio 的链接会解释的那样，别名只不过是在文本上将别名扩展为它的值。它不带参数，您需要为此使用函数。

# c++ - 如何检查静态库以查看是否正在导出调试符号？

> ID：13966121
> 
> 赞同：21
> 
> 时间：2012-12-20T05:54:46.183
> 
> 标签：c++, c, static-libraries, debug-symbols

我有一个正在调试模式下构建的静态库，但是当我进入它时，我仍然会反汇编。我想知道如何使用 nm 或其他工具来确保调试符号不会被剥离。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-20T07:37:02.990

您可以使用`nm`'s option`--debug-syms`来`nm`列出打包到库中的对象的调试器符号（如果有）。

对于调试器符号，第二列表示`N`.

**示例（假设对象 example.o 在库中）**

```
nm --debug-syms libexample.a 
```

**输出（摘录）：**

```
example.o:
0000000000000000 b .bss
0000000000000000 n .comment
0000000000000000 d .data
0000000000000000 N .debug_abbrev    
0000000000000000 N .debug_aranges
0000000000000000 N .debug_info
0000000000000000 N .debug_line
0000000000000000 N .debug_loc
0000000000000000 N .debug_pubnames
0000000000000000 N .debug_str
0000000000000000 r .eh_frame
0000000000000000 n .note.GNU-stack
0000000000000000 r .rodata
0000000000000000 t .text
... 
```

有关这方面的更多信息，请参阅`man nm`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T06:14:52.690

您可以使用[file](http://linux.about.com/library/cmd/blcmdl1_file.htm)命令，该命令可用于许多操作系统，包括通过 Cygwin 的 Windows。
如果它说“未剥离”，则表示它具有调试信息。
作为旁注，对于静态库，使用[ar](http://linux.about.com/library/cmd/blcmdl1_ar.htm)来提取`.o`文件`file`并直接使用它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-07T03:32:49.333

您可以使用`strip -S libXX.a`来检查您的静态库大小是否已减小。如果不包含调试符号，则静态库大小不会改变。

它适用于 Mac OS 来检查 Xcode 生成的静态库。

[Linux 和 Unix 剥离命令](http://www.computerhope.com/unix/strip.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T06:00:48.190

为您的操作系统下载[Dependencywalker](http://www.dependencywalker.com/)

它会检测你的 dll 是否有调试符号。如果您在“符号”下看到“无效”，则表示调试符号已被删除。有效值为：PDB、CV、DBG 等。

# jquery - 在悬停或鼠标输入期间单击不起作用

> ID：13966125
> 
> 赞同：0
> 
> 时间：2012-12-20T05:55:14.593
> 
> 标签：jquery

我有这个 HTML：

```
<html>
<head>
<title>Mouseenter and Click combined</title>
</head>
<body>
<a id="linkselector" href="#">Click here</a>
</body>
</html> 
```

这是我的 jQuery 代码：

```
jQuery( document ).ready( function($) {

//This is the click event
$('#linkselector').live('click',(function() {        

alert('You are clicked!');

}));

//This is the mouseover event
$('#linkselector').live('mouseenter', (function(evt){

    $('<div class="popupx"></div>').appendTo(document.body);
    $('.popupx').html('<img src="http://' + $(this).data('id') + '.jpg.to/">');
    $('.popupx').css({left: evt.pageX+30, top: evt.pageY-15}).show();
    $('.popupx').css('border','0');        

    $(this).live('mouseleave', (function(){
        $('.popupx').hide();
    }));
}));

}); 
```

最后是我的 CSS：

```
.popupx{
position:absolute;
width:30px;
height:30px;
}
.popupx img{
width:30px;
height:30px;
} 
```

当我将链接悬停时，图像会正确显示，因此可以正常工作。问题是当我点击它时，它不再触发点击事件。但是，如果我删除 mouseenter/hover 机制。点击事件工作正常。

当用户将鼠标悬停在链接上时，如何触发 click 事件？可能我错过了代码中的一些重要内容。感谢您的任何提示。

**更新**：我已经成功地将三个事件组合在一个函数中，但我仍在使用 LIVE 和 IF/else，因为由于某种原因 ON 不起作用。无论如何，我让 mouseenter 和 mouseleave 在下面的逻辑中正常工作。但是当 mouseenter 被激活时单击仍然不起作用。可能我需要找到一种在仍然显示悬停或 mouseenter 事件时触发 click 事件的方法。

```
 $('#linkselector').live('click mouseleave mouseenter',(function(evt) {  

    if (evt.type === 'click') {
//This is a click event
    //This won't fire when the mouseenter or hover is shown

} else if (evt.type === 'mouseenter') { 

            //This is working nicely

        $('<div class="popupx"></div>').appendTo(document.body);
        $('.popupx').html('<img src="/image.png">');
        $('.popupx').css({left: evt.pageX-60, top: evt.pageY-60}).show();
        $('.popupx').css('border','0');

} else if (evt.type === 'mouseleave') {

         //This is also working nicely

        $('.popupx').remove();      

    }

})); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:01:52.780

尝试一种更现代的方法，使用`on()`jQuery 使用和创建元素：

```
$(function() {
    $(document).on({
        click: function() {        
            alert('You are clicked!');
        },
        mouseenter: function(evt){
            $('<div />', {
                'class' : 'popupx',
                   html : '<img src="http://' + $(this).data('id') + '.jpg.to/">',
                  style : 'left: '+(evt.pageX+30)+'px; top: '+(evt.pageY-15)+'px; border: 0; display: block'
            }).appendTo($('body'));
        },
        mouseleave: function(){
            $('.popupx').remove();
        }
    }, '#linkselector');
});​ 
```

[**小提琴**](http://jsfiddle.net/adeneo/QP5pt/1/)

`live()`已弃用，您应该使用`on()`. 从代码中也很清楚，每次链接悬停时，都会创建一个新元素，然后当鼠标离开时它会被隐藏，而不是被移除，所以你创建了一堆元素，每次链接悬停时都会创建一个元素，从来没有删除它们。您可能应该替换`hide()`为`remove()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:05:19.920

您的代码在 jQuery 1.7.2 和 firefox 17 中运行良好。您的 jQuery 版本和浏览器是什么？

我在这里复制并粘贴您的代码：jsfiddle.net/62Y64/

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T05:57:55.790

同时绑定它们，然后检查它是哪个事件。

```
$('#linkselector').live('mouseenter click', (function(evt) {
    if (evt.type === 'click') {
        alert('You are clicked!');
    } else {
        $('<div class="popupx"></div>').appendTo(document.body);
        $('.popupx').html('<img src="http://' + $(this).data('id') + '.jpg.to/">');
        $('.popupx').css({
            left: evt.pageX + 30,
            top: evt.pageY - 15
        }).show();
        $('.popupx').css('border', '0');

        $(this).live('mouseleave', (function() {
            $('.popupx').hide();
        }));
    }
})); 
```

# wcf - 为什么 WCF OperationContext 会出错 WindowsIdentity

> ID：13966130
> 
> 赞同：0
> 
> 时间：2012-12-20T05:55:54.447
> 
> 标签：wcf, windows-identity

我使用下面的代码片段在我的 WCF 服务中获取客户端用户名。在我的一台服务器上，我得到了错误的客户端名称。我的客户端是 Win7 在工作组配置中与 Server 2008R2 通信，两台机器都有用户`Dave`和`Dave_Admin`. 两者都是 Win7 上的管理员，只有后者是服务器上的管理员。问题是我启动我的客户端，`Dave`服务器将客户端显示为`Dave_Admin`. 我已将连接双方的身份调试为客户端上的 Dave 和服务器上的 Dave_Admin。声明资源还显示`Dave_Admin`SID。

我能想象发生这种情况的唯一两个原因是

1.  服务器以某种方式找到`Dave_Admin`了`Dave`我怀疑的用户，或者
2.  设置后，我可能已将管理用户重命名`Dave`为`Dave_Admin`，然后将新用户创建`Dave`为标准用户。

我只有模糊的回忆，我可能做过，但不确定我是否做过。该`c:\users`文件夹看起来很正常。如果我这样做了，这就是原因，还有什么要纠正的吗？

如果在用户重命名后发生这种情况，任何人都有另一种可能的解释或解决方法？

```
OperationContext lContext = OperationContext.Current;
RemoteEndpointMessageProperty mEndpointMessageProperties = lContext.IncomingMessageProperties[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;

mIdentity = lContext.ServiceSecurityContext.WindowsIdentity;
mUserName = mIdentity.Name;
mIPAddress = mEndpointMessageProperties.Address;
mPort = mEndpointMessageProperties.Port;
mConsoleID = string.Format("IP:{0}Port:{1}", mIPAddress, mPort);
mCallbackInterface = lContext.GetCallbackChannel<IConsoleCallbacks>();
mAuthority = TxWcfServer.sSelf.Authorized(mIdentity); // get the user's authority from the WcfServer when they logged on

// show client information
if (AppSupport.IsLogLevel(LogLevel.WCF))
{
   // show the various security contexts
   var x = lContext.ServiceSecurityContext;
   AppSupport.WriteLog(LogLevel.Note, "*** WCF WindowsIdentity is '{0}'.", x.WindowsIdentity.Name);
   AppSupport.WriteLog(LogLevel.Note, "*** WCF PrimaryIdentity is '{0}'.", x.PrimaryIdentity.Name);
   AppSupport.WriteLog(LogLevel.Note, "*** WCF IsAnonymous is '{0}'.", x.IsAnonymous);

   foreach (ClaimSet claimset in ServiceSecurityContext.Current.AuthorizationContext.ClaimSets)
   {
      foreach (System.IdentityModel.Claims.Claim claim in claimset)
      {
          // Write out each claim type, claim value, and the right. There are two 
          // possible values for the right: "identity" and "possessproperty". 
          AppSupport.WriteLog(LogLevel.Note, "*** WCF Claim Type: {0}, Resource: {1} Right: {2}",
                        claim.ClaimType, claim.Resource.ToString(), claim.Right);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:11:03.730

您需要在 WCF 服务上打开 Impersonation 以便您的代码能够获取客户端上下文，否则您将获得服务上下文（这可能是您获得 Dave_Admin 而不是 Dave 的原因，因为您的服务以 Dave_Admin 身份运行)

这篇文章有关于如何打开它的信息：http: [//msdn.microsoft.com/en-us/library/ms730088.aspx](http://msdn.microsoft.com/en-us/library/ms730088.aspx)

# jakarta-ee - 使用 jax-rs 服务时出现错误 503

> ID：13966135
> 
> 赞同：0
> 
> 时间：2012-12-20T05:56:18.613
> 
> 标签：jakarta-ee, jetty, jax-rs

这是不寻常的行为，我正在尝试简单的 jax-rs 实现，但它失败了。

```
17215 [29943420@qtp-14485739-7] WARN org.mortbay.log - Committed before 404 null
17215 [29943420@qtp-14485739-7] ERROR org.mortbay.log - /CribService/webresources/caas/doesAuthorIDsExist
java.lang.IllegalStateException: Committed
    at org.mortbay.jetty.Response.resetBuffer(Response.java:1024)
    at org.mortbay.jetty.Response.sendError(Response.java:240)
    at org.mortbay.jetty.Response.sendError(Response.java:342) 
```

命令 ：

```
curl -X POST -H "Content-Type: text/plain" -d '2093' http://localhost:8080/CribService/webresources/caas/doesAuthorIDsExist 
```

有人可以解释一下造成这种错误的原因吗，尤其是在重新启动之前，该服务运行时没有问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:20:14.787

需要重新启动系统并终止 jetty 进程，并确保如果您使用 netbeans 重新运行和部署，它不会部署在 netbeans 之外。

# android - 如何提高android中的图像质量..？

> ID：13966136
> 
> 赞同：0
> 
> 时间：2012-12-20T05:56:20.860
> 
> 标签：android, bitmap, imageview, decode

我正在做一个“图像编辑器”之类的应用程序。我使用默认的相机意图来捕捉图像。我曾经解析 URI 并将其设置为图像视图，如下所示：

```
imgCaptured.setImageURI(Uri.parse(filePath)); 
```

如果我使用这个原始图像，偶尔会出现内存不足的错误！所以我决定使用以下方法解码图像：

“从stackoverflow获得”

```
 BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 8;
    preview_bitmap = BitmapFactory.decodeStream(is, null, options);

private Bitmap decodeFile(File f) {
    try {
        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f), null, o);

        // The new size we want to scale to
        final int REQUIRED_SIZE = 95;

        // Find the correct scale value. It should be the power of 2.
        int scale = 1;
         while (o.outWidth / scale / 2 >= REQUIRED_SIZE
         && o.outHeight / scale / 2 >= REQUIRED_SIZE)
         scale *= 2;

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {
    }
    return null;
} 
```

如果我使用解码后的图像，则输出质量不佳。有些似乎是模糊的。我想要一个清晰的图像！将其设置为 ImageView 后。我需要拖放另一个视图。

*   我怎样才能实现上述目标？
*   有什么好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:26:34.963

您使用的方法不完整，您必须添加一些数学函数，以保持图像质量。

```
private static Bitmap decodeFile(File f) {
            Bitmap b = null;
            final int IMAGE_MAX_SIZE = 100;
            try {
                BitmapFactory.Options o = new BitmapFactory.Options();
                o.inJustDecodeBounds = true;
                FileInputStream fis = new FileInputStream(f);
                BitmapFactory.decodeStream(fis, null, o);
                fis.close();
                int scale = 1;
                if (o.outHeight > IMAGE_MAX_SIZE || o.outWidth > IMAGE_MAX_SIZE) {
                    scale = (int) Math.pow(
                            2.0,
                            (int) Math.round(Math.log(IMAGE_MAX_SIZE
                                    / (double) Math.max(o.outHeight, o.outWidth))
                                    / Math.log(0.5)));
                }
                BitmapFactory.Options o2 = new BitmapFactory.Options();
                o2.inSampleSize = scale;
                fis = new FileInputStream(f);
                b = BitmapFactory.decodeStream(fis, null, o2);
                fis.close();
            } catch (Exception e) {
                Log.v("Exception in decodeFile() ", e.toString() + "");
            }
            return b;
        } 
```

请让我知道，如果它对你有用...!!!! :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:21:38.600

将 options.inSampleSize = 8 更改为 options.inSampleSize = 4。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:03:17.660

在循环中除以 2 的原因是什么？尝试这个

```
while (o.outWidth / scale  >= REQUIRED_SIZE
         && o.outHeight / scale  >= REQUIRED_SIZE) 
```

可能您还想使用此方法将图像缩放到视图的大小 [http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap(android.graphics.Bitmap](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap(android.graphics.Bitmap) , int, int, boolean)

# wso2 - 在 WSO2 ESB 中使用类中介

> ID：13966140
> 
> 赞同：2
> 
> 时间：2012-12-20T05:56:42.433
> 
> 标签：wso2, wso2esb

我正在尝试将类调解器与 WSO2 ESB 一起使用。

以下是我的调解员课程。

```
package samples.mediators;

import org.apache.synapse.MessageContext;
import org.apache.synapse.mediators.AbstractMediator;

public class SiriBankMediator extends AbstractMediator {
    @Override
    public boolean mediate(MessageContext messageContext) {
        System.out.println("Hurraaaayyyy!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
        return false; 
    }
} 
```

正如Write [a WSO2 ESB Mediator](http://docs.wso2.org/wiki/display/ESB450/Writing+a+WSO2+ESB+Mediator)所建议的那样，我尝试了“更简单的方法”，创建了一个包含在类路径中的 synapse-core_2.1.0.wso2v8.jar 的 jar。

MANIFEST.MF 如下

```
Manifest-Version: 1.0
Class-Path: synapse-core_2.1.0.wso2v8.jar
Created-By: 1.7.0_07 (Oracle Corporation) 
```

然后按照文章的建议，将 jar 放到 ESB 中的 repository/components/lib 中。

但是在 ESB 重新启动后，当我尝试[加载类](http://docs.wso2.org/wiki/display/ESB450/Class+Mediator)时，它会给出错误**Class not found in the path** ![在路径中找不到类](../Images/d6c644b07a5a471587dcf94139b23831.png)

使用的 Jar 文件在[siri.jar共享](http://www.4shared.com/file/bDZbhKvs/siri.html)

想知道我遵循的步骤中缺少什么。

先感谢您。

注意：我使用的是*WSO2 Enterprise Service Bus 4.5.1*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T10:08:55.703

我已经使用 Maven 方法成功部署了您的自定义调解器。这就是我所做的。

我创建了以下目录结构并将您的 SiriBankMediator.java 放在 src/main/java 中：

```
.
├── pom.xml
├── src
│   └── main
│       └── java
│           └── SiriBankMediator.java 
```

pom.xml 文件如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>org.samples.mediator</groupId>
    <artifactId>siribankmediator</artifactId>
    <version>1.0</version>

    <repositories>
        <repository>
            <id>wso2-maven2-repository</id>
            <url>http://dist.wso2.org/maven2</url>
        </repository>
        <repository>
            <id>apache-Incubating-repo</id>
            <name>Maven Incubating Repository</name>
            <url>http://people.apache.org/repo/m2-incubating-repository</url>
        </repository>
        <repository>
            <id>apache-maven2-repo</id>
            <name>Apache Maven2 Repository</name>
            <url>http://repo1.maven.org/maven2/</url>
        </repository>
    </repositories>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0</version>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>1.4.0</version>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Bundle-SymbolicName>org.test</Bundle-SymbolicName>
                        <Bundle-Name>org.test</Bundle-Name>
                        <Export-Package>
                            org.test.mediator.*,
                        </Export-Package>
                        <Import-Package>
                            *; resolution:=optional
                        </Import-Package>
                        <Fragment-Host>synapse-core</Fragment-Host>
                    </instructions>
                </configuration>
            </plugin>
            <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <configuration>
        <archive>
            <manifest>
            <mainClass>fully.qualified.MainClass</mainClass>
            </manifest>
        </archive>
        <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
        </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>org.apache.synapse</groupId>
            <artifactId>synapse-core</artifactId>
            <version>1.3.0.wso2v1</version>
        </dependency>
    </dependencies>
</project> 
```

然后在包含 POM 文件的目录中，我们执行`mvn compile package`. 这应该构建您需要放入`$ESB_HOME/repository/components/lib`名为 target 的文件夹中的 jar 文件。

最后，您可以通过碳管理前端将该类加载为 org.samples.mediator.SiriBankMediator。不要忘记重新启动您的 ESB。希望有帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:11:09.973

我的自定义调解器 jar 清单如下所示：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.6.0_27-b07 (Sun Microsystems Inc.) 
```

因此，也许不要添加该类路径，如果这不起作用，请尝试使用 Java 1.6 版本进行构建。那么一切都应该没问题。

请记住将您的 jar 添加到“components/lib”中。如果 WSO2 ESB 已为您的 jar 创建了 OSGi 包，请在启动后检查“components/dropins”文件夹。然后该类应该可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T06:10:06.463

尝试使用至少三个字母的中介类包名称，

示例：包samples.mediators；

而不是那个包名，试试，包samples.mediators.anything；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T04:38:15.913

这个答案可能对你没有用，因为这是在 2 年前被问到的，但是遇到这个问题的其他人会发现我的答案很有用。

只需使用 samples.mediators 以外的包名称即可解决此问题。干杯..！

# jsf - Oracle ADF 框架中元数据提交阶段说明

> ID：13966147
> 
> 赞同：1
> 
> 时间：2012-12-20T05:57:11.000
> 
> 标签：jsf, oracle-adf

`meta data commit phase`在 ADF faces 组件的请求生命周期阶段扮演什么角色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:07:44.287

也许尝试谷歌搜索： [http ://www.oracle.com/technetwork/developer-tools/jdev/adfmds-128339.pdf](http://www.oracle.com/technetwork/developer-tools/jdev/adfmds-128339.pdf)

并阅读文档？

# javascript - 如何通过javascript从下拉列表中获取选定的值并设置在java bean中选择的值？

> ID：13966150
> 
> 赞同：0
> 
> 时间：2012-12-20T05:57:36.163
> 
> 标签：javascript, html, html-select

如何使用 Javascript 获取所选下拉列表值的当前值？
我有一个用户联系表单，其中有一个下拉列表，列表中选择的值必须由 javascript 函数捕获，然后将此值传递给控制器​​并设置 bean 值，然后将值保存在数据库中。

清单就像，

```
<select id="ddl">
    <option value="val1">Optoion 1</option>
    <option value="val2" selected="selected">Option 2</option>
    <option value="val3">Option 3</option>
</select> 
```

从列表中返回字符串

```
var e = document.getElementById("ddl");
var selected = e.options[e.selectedIndex].val(); 
```

这将`selected`是`val2`

如何在 Java 类中访问该值并将该值存储在数据库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:03:26.257

将表单提交到 servlet

要获取选定的值，请在您的 servlet 中使用此代码

> ```
> String str=(String)req.getParameter("selectboxname"); 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T06:02:57.457

如果你想获得下拉选择值的值，那么使用这个

```
document.getElementById("ddlViewBy").value; 
```

如果要获取选择索引的文本，则

```
document.getElementById("ddlViewBy").options[document.getElementById("ddlViewBy").selectedIndex].text; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T03:36:16.627

我用ajax调用处理请求并将控制权转移到Spring Controller..我在我的控制器中编写了这段代码..

```
@Controller
public class ContactController{
@RequestMapping(value = "/contact/processContact", produces = "application/json")
public @ResponseBody Map<String, Object> processWriteToUs(@ModelAttribute("contact") Contact contact,HttpServletRequest request, HttpServletResponse response, Model model){
Map<String, Object> responseMap = new HashMap<String, Object>();
    try { 
         Contact contact = new Contact();
         contact.setEmail(request.getParameter("email"));
         contact.setFirstName(request.getParameter("firstname"));
         contact.setLastName(request.getParameter("lastname"));
         contact.setType(request.getParameter("ddl"));
                     //process the form details...
                     //responseMap.put("key","value")
        }
        catch{Exception e){
          e.printStackTrace();
        }
            return responseMap;
          }
    } 
```

现在终于按预期工作了......

# java - 想要记录任何异常，而不是在 UI 中显示为意外异常

> ID：13966151
> 
> 赞同：0
> 
> 时间：2012-12-20T05:57:49.167
> 
> 标签：java, swing, exception, logging

我正在使用这段代码：

```
Logger.getLogger( SampleAction.class.getName() ).log( Level.SEVERE, null, ex ); 
```

用于在 Logger 中记录异常。

除了记录异常，它还在 UI 中显示异常。

如何避免显示此异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:17:12.183

如何创建另一个这样的类。

```
public class Log{
    FileConnection fc;
    OutputStream outStream;
    InputStream inStream;

      Log(String exceptionClass, String errorMessage){
           try{
              fc = (FileConnection)Connector.open("[path]");
              if(!fc.exists())            fc.create();

              inStream = fc.openInputStream();
              outStream = fc.openOutputStream();

               if(inStream!=null)             
                       outStream.write(IOUtilities.streamToBytes(instream)); //use this so overwriting is enabled

               outStream.write((exceptionClass+"\n").getBytes());
               outStream.write((errorMessage+"\n").getBytes()); 
           }
           catch(IOException e){}
           finally{
                  try{
                       inStream.close();
                       outStream.close();
                       fc.close();
                   }catch(Exception e){}
            }
      }

} 
```

然后只需在 try 块的每个捕获处调用您的 Log 类：

例如

```
try{
      //your process
}catch(Exception e){
       //call log
       new Log(e.getClassName(), e.getMessage());
} 
```

你可以修改它，如果你为每个日志写日期和时间会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T23:43:13.690

有两件事发生：

1.  记录器正在记录异常
2.  在另一段代码将其显示在对话框中之前，不会捕获或传播异常。如果您不希望显示对话框，则需要在异常显示之前对其进行处理。

请粘贴包含日志记录的整个方法。

# actionscript-3 - 在 AS3 中，如何覆盖 [] 运算符的 setter 和 getter？

> ID：13966153
> 
> 赞同：2
> 
> 时间：2012-12-20T05:57:51.797
> 
> 标签：actionscript-3, inheritance, dictionary, operators, overloading

我知道 AS3 通常不允许方法或运算符重载，但我确实认为我以前见过 [] 运算符的解决方法。基本上我正在尝试从字典继承或环绕字典 - 我不一定关心哪个 - 并为该运算符创建稍微特殊的行为，即在它连续使用两次的情况下（object [x] [y] ）。没有某种特殊的解决方法或漏洞我可以使用吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T06:10:11.663

您可以覆盖`getters`和`setters`使用[`Proxy`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Proxy.html?filter_flash=cs5&filter_flashplayer=10.2&filter_air=2.6)该类。

如果您扩展`Proxy`并创建您的类`dynamic`，您将能够覆盖这些方法：

*   [`getProperty()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Proxy.html#getProperty%28%29)
*   [`setProperty()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Proxy.html#setProperty%28%29)

使用`[]`运算符将​​按预期适用于此（即`thing.x`与`thing["x"]`您覆盖 getter for相同`x`）。

如果您查看我在上面添加到 Proxy 类的链接，就会发现一些示例代码块演示了如何实现您正在尝试做的事情。

# scala - Why does Option require explicit toList inside for loops?

> ID：13966164
> 
> 赞同：13
> 
> 时间：2012-12-20T05:58:38.573
> 
> 标签：scala, scala-option

Using a for loop with a simple Option works:

```
scala> for (lst <- Some(List(1,2,3))) yield lst
res68: Option[List[Int]] = Some(List(1, 2, 3)) 
```

But looping over the contents of the Option does not:

```
scala> for (lst <- Some(List(1,2,3)); x <- lst) yield x
<console>:8: error: type mismatch;
 found   : List[Int]
 required: Option[?]
              for (lst <- Some(List(1,2,3)); x <- lst) yield x
                                               ^ 
```

...unless the Option is explicitly converted to a List:

```
scala> for (lst <- Some(List(1,2,3)).toList; x <- lst) yield x
res66: List[Int] = List(1, 2, 3) 
```

Why is the explicit list conversion needed? Is this the idiomatic solution?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T06:29:18.750

```
for (lst <- Some(List(1,2,3)); x <- lst) yield x 
```

is translated to

```
Some(List(1,2,3)).flatMap(lst => lst.map(x => x)) 
```

The `flatMap` method on `Option` expects a function that returns an `Option`, but you're passing a function that returns a `List` and there is no implicit conversion from `List` to `Option`.

Now if you convert the `Option` to a list first, the `flatMap` method of `List` will be called instead, which expects a function returning a `List`, which is what you are passing to it.

In this particular case, I think the most idiomatic solution is

```
Some(List(1,2,3)).flatten.toList 
```

# postgresql - Postgresql 动态 SQL 查询执行

> ID：13966168
> 
> 赞同：5
> 
> 时间：2012-12-20T05:58:59.520
> 
> 标签：postgresql, dynamic

我有一个函数，它使用一些 If Else 条件动态生成 SELECT 查询。我将该查询存储在 TEXT 类型变量中

```
 CREATE OR REPLACE FUNCTION func_updateanswercodes(ans_id_param BIGINT, 
                              que_id_param BIGINT, 
                              overwrite_param INTEGER, 
                              new_ans_code_param CHARACTER VARYING)
    RETURNS INTEGER AS
    $BODY$
...................
................
...................
        dyn_sql = 'SELECT ' || que_col_name || ' INTO old_ans_col_val FROM';
                    IF SUBSTR(que_col_name, 0, 8) = 'pro_ans' THEN
                        dyn_sql = dyn_sql || ' profile_answers JOIN registrations ON (pro_ans_frn_pro_id = reg_frn_pro_id)';
                        ELSIF SUBSTR(que_col_name, 0, 8) = 'reg_ans' THEN
                        dyn_sql = dyn_sql || ' reg_answers ';
                        ELSIF SUBSTR(que_col_name, 0, 8) = 'tvl_ans' THEN
                        dyn_sql = dyn_sql || ' tvl_answers '; --35
                                END IF;
                    dyn_sql = dyn_sql || ' WHERE';
                    IF SUBSTR(que_col_name, 0, 8) = 'pro_ans' THEN
                        dyn_sql = dyn_sql || ' reg_id ';
                        ELSIF SUBSTR(que_col_name, 0, 8) = 'reg_ans' THEN
                        dyn_sql = dyn_sql || ' reg_ans_frn_reg_id ';
                        ELSIF SUBSTR(que_col_name, 0, 8) = 'tvl_ans' THEN
                        dyn_sql = dyn_sql || ' tvl_ans_frn_reg_id ';
                                END IF;
                        dyn_sql = dyn_sql || '= ' || CAST(temp_reg AS VARCHAR) ||';'

    /* Here want to execute that query in variable dync_sql
...........................
.............................
.......................
    END;
    $BODY$
    LANGUAGE plpgsql VOLATILE 
```

但是使用 plpgsql(PL/SQL for postgres) 我不知道如何在变量中执行相同的查询。请帮我解决一下这个 。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:35:54.390

从文档（Postgres 9.1）：

> ```
> EXECUTE command-string [ INTO [STRICT] target ] [ USING expression [, ... ] ]; 
> ```
> 
> 其中 command-string 是一个表达式，产生一个包含要执行的命令的字符串（文本类型）。可选目标是记录变量、行变量或简单变量和记录/行字段的逗号分隔列表，命令的结果将存储在其中。

换句话说：

Move the `INTO old_ans_col_val` from the String to the place where you `EXECUTE` it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:34:58.133

使用 EXECUTE 获取详细信息，请参阅[手册](http://www.postgresql.org/docs/9.2/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)

请注意，您必须从查询字符串中取出 INTO 部分并将其放在末尾。

```
EXECUTE dyn_sql INTO old_ans_col_val; 
```

# ruby-on-rails - 页面底部的Rails Var转储？

> ID：13966176
> 
> 赞同：1
> 
> 时间：2012-12-20T05:59:40.170
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 rails 3 我有以下型号

我的控制器

```
class ContactController < ApplicationController  
   def index    
    @surveys = Survey.active  
   end
end 
```

和我的看法

```
<%= @surveys.each do |p| %>  
    <li><%=p.id %>-<%=p.name %></li>
<%end%> 
```

我的预期结果是，它通过调查变量在 li 中输出 id 和 name。它确实如此，但是它也会将变量转储到页面底部。

```
1-name
[#<Survey id: 1, name: "name", is_active: true, user_id: nil, open_script: "Opening Script", voicemail_script: "Voice Mail Script", closing_script: "Closing Script", email_script: "Email Script", created_at: "2012-12-19 15:17:36", updated_at: "2012-12-20 03:46:35">] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T06:53:17.177

变量转储来自这一行

```
<%= @surveys.each do |p| %> 
```

这`<%=`意味着评估红宝石代码并输出它，当这`<%`只是评估时。将您的代码更改为以下内容：

```
<% @surveys.each do |p| %>  
    <li><%=p.id %>-<%=p.name %></li>
<%end%> 
```

# objective-c - 多个按钮调用相同的功能（并且功能知道哪个按钮进行了调用）

> ID：13966177
> 
> 赞同：0
> 
> 时间：2012-12-20T05:59:57.197
> 
> 标签：objective-c, ios, xcode

我有这个按钮代码，它在两个按钮中相似（部分代码）

```
btn.frame=CGRectMake(600,400,30,30);]
btn.addTarget:self actionL@selector(authButtonAction)forControlEvents:UIControlEventTouchUpInside] 
```

并在函数中（虚拟代码）

```
-(void)authButtonAction {
    if btn1 was clicked btn1.caption=y else btn1.caption=2
} 
```

我的按钮有效并且我的函数被调用，但我试图做的是以某种方式找出单击了哪个按钮...将其传递给`authButtonAction`. 因为这将使我免于编写 X 数量的函数，并且我可以在一个函数中使用 if 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:07:20.777

为您的按钮设置标签..

```
#define TAG_BUTTON_ONE 1
#define TAG_BUTTON_TWO 2

oneButton       =  [[UIButton alloc] ......];
oneButton.tag   =  TAG_BUTTON_ONE;
[oneButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
-----
-----

twoButton       = [[UIButton alloc] ....];
twoButton.tag   = TAG_BUTTON_TWO;
[twoButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
---
-- 
```

在按钮处理程序中，检查发件人的标签

```
-(void) buttonClicked:(UIButton*)sender{
   if(sender.tag == TAG_BUTTON_ONE){
      //handle button one click
   }else if(sender.tag == TAG_BUTTON_TWO){
      //handle button 2 click
   }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:05:51.683

您可以为按钮提供标签，然后可以在操作方法中检查 tappedButton 的标签。

```
-(IBAction)ButtonPressed:(id)sender
{
UIButton *pressedButton = (UIButton *)sender;
int buttonTag = pressedButton.tag;
if (buttonTag==1)
{
NSLog(@"Button 1 Pressed");
}
else
{
NSLog (@"Button 2 Pressed");
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:02:44.017

为您的按钮设置`btn.Tag`一个 id，然后使用它来确定按下了哪个按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T06:02:53.773

您的按钮方法名称的末尾应该有一个冒号。该按钮将自己作为发送者参数传递。您可以查询它以找出单击了哪个按钮（基于其标题或标签）。

# flex4 - 在 Flex Project 中实现 FlexPaper 库

> ID：13966178
> 
> 赞同：2
> 
> 时间：2012-12-20T05:59:59.143
> 
> 标签：flex4, flexpaper

我正在使用 Flexpaper 库开发 flex pdf 阅读器应用程序。我从[http://flexpaper.devaldi.com/download/](http://flexpaper.devaldi.com/download/)获得了 flexpaper 库并添加到我的项目构建路径中，它在 flex web、桌面和移动项目中都运行良好。

我从[http://code.google.com/p/flexpaper/downloads/list](http://code.google.com/p/flexpaper/downloads/list)获得源代码并在我的 flex 项目中实现以自定义应用程序。

对于 Flex Desktop 项目，编译时没有错误但无法正常工作。Swf 文件未加载，始终在右侧显示微调器。

对于显示编译错误的 Flex Mobile 项目。无法解析为组件实现

请给我解决方案..

谢谢和问候迪内什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T07:25:04.370

我得到了解决方案。我的 Flex 项目和 Flex 移动项目都与定制的 flexpaper 库配合良好。

我将代码更改为

```
<mx:VBox xmlns:mx="library://ns.adobe.com/flex/mx"
         xmlns:fx="http://ns.adobe.com/mxml/2009" 
```

谢谢和问候， 迪内什

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:36:37.310

Flex Desktop 和 Web 项目都已编译并运行，没有错误。

我将代码更改为

```
protected function button1_clickHandler(event:MouseEvent):void
{               myViewer.SwfFile="Paper.swf";                               
}
<flexpaper:FlexPaperViewer id="myViewer" x="10" y="44" >
</flexpaper:FlexPaperViewer>
<s:Button x="306" y="19" label="Load Swf" click="button1_clickHandler(event)"/> 
```

而不是这个

```
<flexpaper:FlexPaperViewer x="10" y="10" height="301" SwfFile="Paper1.swf">
</flexpaper:FlexPaperViewer> 
```

对于显示编译错误的 Flex Mobile 项目。无法解析为组件实现。帮我

# sql - 如何存储/组织 DDL 脚本？

> ID：13966180
> 
> 赞同：0
> 
> 时间：2012-12-20T06:00:01.583
> 
> 标签：sql, ddl, organization

首先，我在云上使用 MySQL (Amazon RDS)。我的数据库定义脚本包含创建视图、触发器、存储过程、用户、授予用户权限以及插入一些数据（例如查找表）等语句。该脚本有 2000 行 SQL 代码。我将此脚本保存在一个文件中，并使用以下命令执行它：mysql --user=myusername --password=mypassword << my.script.sql。此文件受 SVN 保护。

将所有 SQL 代码放在一个文件中的问题在于，很难仅查看一项的 SVN 历史记录（比如我想查看表 Task 和视图 TaskView 的 SVN 历史记录）......所以我的问题是: 人们如何存储这样的脚本？专业人员是否将每个项目（表，视图，存储过程）存储在目录中的自己的文件中？如果是这样，是否必须制作一个将所有迷你 SQL 脚本部署在一个文件夹中的脚本？人们是否只是制作一个脚本来查找每个 .SQL 文件并将其转储到数据库中？人们是否使用各种文件夹来组织这样的脚本？例如，一个文件夹用于视图，一个文件夹用于表，一个文件夹用于存储过程？

干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:34:49.337

我们有以下文件夹结构

```
+ddl
....group1_ddl.sql
....group2_ddl.sql
+procedures
---level1
......single_sp.sql
......another_sp.sql
---level2
......another_uses_level1_sp.sql
---leveln
......remaining_sp.sql
+views
--level1
......group_of_views.sql 
```

如您所见，我们有 3 个顶级文件夹，每个文件夹用于 ddl、sps 和视图

**DDL**

90% 的时间我们为所有表都有一个 ddl 脚本有时我们会单独维护 ddl 脚本，这些脚本可以在逻辑上分开，例如：staging_ddl.sql、agrigate_ddl.sql ddl 脚本包括 PK 和 FK 约束以及其他指标

**存储过程**

1.  注意多个文件夹（level1、level2），因为我们的整个 ETL 和业务都是在存储过程中实现的，所以我们有很多 sps（几十个）和数百行代码。由于我们编写了模块化编码，因此我们有一些依赖于其他 sps 的 sps。所以依赖于其他sps的sps会更上一层楼

    例如：在我们的场景中 main_sp.sql 是一个运行整个工作流程的 sp，这个 sp 实习生按顺序调用其余的 sps，他们实习生可能会或可能不会调用其他 sps

2.  所以 main_sp.sql 进入 level3，child_sp.sql 进入 level2，grand_child_sp.sql 进入 level1

3.  文件名与 sp 名称相同

**意见：**

1.  如果您的视图不那么复杂并且您认为可以轻松维护，您可以在单个脚本中管理它们。
2.  但在我们的例子中，它们是一些具有近 2000 行的视图，因此我们将它们维护在每个视图的一个脚本中。
3.  大多数情况下，我们会尽量避免在另一个视图中使用一个视图，如果我们这样做了，那么我们会维护如上所述的多层次层次结构，否则我们会为每个视图维护一个脚本
4.  文件名与视图名相同

这就是我 7 年多以来成功管理脚本的方式。

希望这可以帮助

# c# - 带有文本框的滚动查看器

> ID：13966185
> 
> 赞同：2
> 
> 时间：2012-12-20T06:00:14.700
> 
> 标签：c#, xaml, windows-8

我有一个包含在滚动查看器中的文本框，如下所示：

```
<ScrollViewer x:Name="myScrollViewer" Height="200" Width="500" HorizontalAlignment="Left">
    <TextBox x:Name="myTextBox" Width="500" TextWrapping="Wrap"/>
</ScrollViewer> 
```

当我在文本框中输入大量数据时，滚动查看器不会自动向下滚动，所以这个导致我现在在文本框中看不到我正在输入的内容，我必须手动向下滚动才能看到我的内容我正在输入。我有两个问题：

1.  如何让滚动条按照我现在写的那行自动向下滚动。
2.  TextBox有边框，但是如果我向下滚动，顶部边框会消失，看起来文本框向上滚动，如何使文本框不改变，4个边框总是出现，只有内容被包裹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:54:33.443

您需要使用 ScrollViewer，还是可以使用 TextBox 自己的滚动行为？这与您在普通 Silverlight 应用程序中的行为一样（无法在 Windows 8 应用程序右 atm 上对其进行测试）

例如

```
<TextBox
    Height="200"
    Width="500"
    TextWrapping="Wrap"
    AcceptsReturn="True"
    HorizontalScrollBarVisibility="Disabled"
    VerticalScrollBarVisibility="Auto"/> 
```

（请注意，您似乎无法从 Style 设置 Horizo​​ntalScrollBarVisibility 和 VerticalScrollBarVisibility 属性）

# javascript - Blob 会持续多久？

> ID：13966186
> 
> 赞同：20
> 
> 时间：2012-12-20T06:00:14.347
> 
> 标签：javascript, blob, persistent-storage

我正在尝试编写一个故障安全程序，该程序使用画布绘制非常大的图像（60 MB 可能是上限，而 10 MB 是下限）。很早以前就发现调用canvas的同步函数通常会导致页面在浏览器中崩溃，所以为了跨浏览器的兼容性`toDataURL`，我对程序进行了调整，使用了使用填充符的方法。`toBlob`我的问题是：使用该`URL.createObjectURL(blob)`方法的 Blob URL 能持续多久？

我想知道是否有一种方法可以缓存 Blob URL，以使其在浏览器会话之后持续存在，以防有人想在某一时刻渲染图像的一部分，关闭浏览器，然后回来完成它再次将 Blob URL 读取到画布中并从它停止的点恢复。我注意到[这个可选的 autoRevoke 参数](http://www.w3.org/TR/FileAPI/#examplesOfCreationRevocation)可能是我正在寻找的，但我想确认我正在尝试做的事情实际上是可能的。除非它涉及不同的解决方案，否则您的答案中不需要代码示例，如果可以使用此方法或其他方法使 Blob URL 在会话之外持续存在，我只需要一个是或否。（如果由于某种原因页面崩溃并且它也像“恢复会话”选项一样，这也会很方便。）

我在想这样的事情：

```
function saveCache() {
  var canvas = $("#canvas")[0];
  canvas.toBlob(function (blob) {
    /*if I understand correctly, this prevents it from unloading
      automatically after one asynchronous callback*/
    var blobURL = URL.createObjectURL(blob, {autoRevoke: false});
    localStorage.setItem("cache", blobURL);
  });
}

//assume that this might be a new browser session

function loadCache() {
  var url = localStorage.getItem("cache");
  if(typeof url=="string") {
    var img = new Image();
    img.onload = function () {
      $("#canvas")[0].getContext("2d").drawImage(img, 0, 0);
      //clear cache since it takes up a LOT unused of memory
      URL.revokeObjectURL(url);
      //remove reference to deleted cache
      localStorage.removeItem("cache");
      init(true); //cache successfully loaded, resume where it left off
    };
    img.onprogress = function (e) {
      //update progress bar
    };
    img.onerror = loadFailed; //notify user of failure
    img.src = url;
  } else {
    init(false); //nothing was cached, so start normally
  }
} 
```

请注意，我不确定这是否会按照我的意图进行，因此任何确认都会很棒。

**编辑**刚刚意识到这`sessionStorage`与`localStorage`:P不同

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-21T01:39:22.860

## Blob URL 可以跨会话持续吗？不是你想要的方式。

URL 是表示为字符串的引用，您可以像任何字符串一样将其保存在 localStorage 中。URL 指向的位置是您真正想要的，并且不会在会话中持续存在。

将 URL.toObjectUrl() 与`autoRevoke`参数结合使用时，URL 将持续存在，直到您调用`revokeObjectUrl`或“直到执行卸载文档清理步骤”。（此处概述的步骤：http: [//www.w3.org/TR/html51/browsers.html#unloading-document-cleanup-steps](http://www.w3.org/TR/html51/browsers.html#unloading-document-cleanup-steps)）

我的猜测是当浏览器会话到期时正在执行这些步骤，这就是为什么`blobURL`在后续会话中无法访问您的目标的原因。

关于此的其他一些论述：[如何保存 window.URL.createObjectURL() 结果以供将来使用？](https://stackoverflow.com/questions/7596515/how-to-save-the-window-url-createobjecturl-result-for-future-use)

以上导致建议使用 FileSystem API 来保存画布元素的 blob 表示。第一次请求文件系统时，您需要请求持久存储，并且用户必须同意让您将数据永久存储在他们的机器上。

[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)有一个很好的入门知识，你需要的一切。

# c# - 如何使用 Win32_Printer 等 Win32 类？

> ID：13966188
> 
> 赞同：2
> 
> 时间：2012-12-20T06:00:21.120
> 
> 标签：c#, winapi, wmi

我必须在 C#.net 中使用 Win32 类`Win32_PrintJob`，例如 等。`Win32_Printer`

我没有得到应该导入哪个命名空间以在我的 c#.net 应用程序中使用 Win32 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:11:56.790

这些是 WMI 类，因此您需要使用`System.Management`命名空间。

这是一篇关于打印机的好文章：[使用 C# 和 WMI 以编程方式管理打印机](http://www.codeproject.com/Articles/80680/Managing-Printers-Programatically-using-C-and-WMI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:28:43.257

为了从 C#（或 .Net）访问 WMI，您必须导入[`System.Management`](http://msdn.microsoft.com/en-us/library/ms257340%28v=vs.80%29.aspx) 命名空间。此外，如果您是使用 WMI 的新手，请尝试使用类似的工具，[`WMI Delphi Code Creator`](http://code.google.com/p/wmi-delphi-code-creator/)它可以帮助您创建 C# 片段来访问 WMI。

试试这个由工具创建的示例代码。

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";
                ManagementScope Scope;                

                if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase)) 
                {
                    ConnectionOptions Conn = new ConnectionOptions();
                    Conn.Username  = "";
                    Conn.Password  = "";
                    Conn.Authority = "ntlmdomain:DOMAIN";
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), Conn);
                }
                else
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT * FROM Win32_PrintJob");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0,-35} {1,-40}","Document",WmiObject["Document"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","Name",WmiObject["Name"]);// String

                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:20:52.013

尽管您尚未标记答案，但您可能正在寻找其他答案，为您提供 .NET 框架命名空间`System.Management`。

但是，*您*可能一直在阅读 WMI 文档并且您是从这个角度来的。基本概念之一是**WMI 命名空间**，它当然与 .NET 命名空间完全不同。所以这里有一个完全不同的答案，以防万一......

* * *

您可能需要的 #1 WMI 命名空间是`root\cimv2`. 仅当您深入挖掘时，您可能会使用`root\subscription`或某个公司选择的命名空间，该公司决定将自己的 WMI 提供程序放在“特殊”的某个地方。

通常，当您要连接到 WMI 命名空间时，它位于计算机名称之后，例如`\\<computer>\root\cimv2`. 本地连接时可以省略计算机，因此您只需输入名称空间路径，例如`root\cimv2`

在 .NET 中，您可以通过在字符串中使用 WMI 命名空间来构建一个`ManagementPath`，或在传递给`ManagementScope`构造函数的字符串中隐式使用它来指定 WMI 命名空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T06:23:56.600

.NET 中确实实现了这样的对象，因此您不需要使用这些对象。
如果您必须直接使用 winapi，您可以创建一个包含 winapi 结构中包含的所有内容的结构（它们是结构，而不是类）。

一些注意事项：
保持所有成员的确切顺序和类型。
用 .表示句柄（例如 HWND 等）`System.IntPtr`。
如果您需要传递结构的大小，请使用`Marshal.SizeOf()`.
您还可以添加`[StructLayout]`属性，您可以在其中指定字符集和其他重要属性。
命名空间`System.Runtime.InteropServices`有一些常见的 winapi 结构。

# asp.net - 通过asp MVC3 EntityFramework简单插入

> ID：13966191
> 
> 赞同：1
> 
> 时间：2012-12-20T06:00:39.563
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework

我有两个具有一对多关系的简单模型

```
public class X{
  public int id {get;set;}
  public virtual Y y{ get; set; }
  public string description{get;set;}
}
public class Y{
  public int id{get;set;}
  public string name{get;set;}
} 
```

并从实体框架中设置关系

我正在尝试提交一个创建`X`具有现有`Y`值的新记录的表单

从表单返回到操作的数据是`string description`and `y_id`。

当我尝试从参数中指定对象时的动作

```
public ActionResult sth(X x){} 
```

当我尝试以下操作时，将`x.y`设置为 null （这是预期的......）

```
x.y = (from i in Y where i.id == that_id select i).first(); 
...
db.saveChanges(); 
```

实体框架向数据库中插入了一条新`Y`记录...

我知道我做错了什么......您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:36:43.227

查看代码，您有一个 x 和 y 的 ID，x 中有一个虚拟 Y。除了 x 中的虚拟 Y，您还需要对 y 的 id 的引用。以及 y 中 x 的虚拟 ICollection。

```
public class X{
  public int x_id {get;set;}
  public int y_id {get;set}
  public virtual Y y{ get; set; }
  public string description{get;set;}
}
public class Y{
  public int y_id{get;set;}
  public string name{get;set;}
  public virtual ICollection<X> X {get;set;}
} 
```

这有助于实体中的关系。您可能还希望将 y(s) 列表传递给负责表单的控制器，除非您已经从表单的下拉列表中选择了 y 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T09:38:05.960

在 dbContext 中跟踪 Y 对象似乎存在问题。你如何生成你用 linq 查询的集合 Y？您是否使用 dbContext 从数据库中获取它？或来自其他来源？

如果没有，您需要使用上下文或使用 Attach() 函数来获取它，以便正确跟踪它。

另一个问题出现了。怎么会插入一个新的 Y？您没有在数据库中定义主键吗？还是尝试插入然后引发异常？

这些是我对此事的看法。

# html - Twitter Bootstrap 2 列图像网格

> ID：13966192
> 
> 赞同：1
> 
> 时间：2012-12-20T06:00:45.163
> 
> 标签：html, css, twitter-bootstrap

我想创建一个类似于此[示例](http://studionudge.com/)的 2 列图像网格。我正在寻找有关如何使用 Twitter Bootstrap 网格最好地实现这一目标的建议？我试图做到这一点并没有多大成功。我的主要问题是图像之间的间距不均匀，无法在页面中心线上对齐图像，以及如何处理纵向和横向图像。提前致谢。

编辑：按照建议，我提供了一个带有结果屏幕截图的示例。

```
 <div class="container">
  <div class="row">
    <div class="span12">
       <div class="row">
        <div class="span4"><img src="http://goo.gl/l9uUR"></div>
        <div class="span4"><img src="http://goo.gl/l9uUR"></div>
        <div class="span4"><img src="http://goo.gl/l9uUR"></div>
      </div>
      <div class="row">
        <div class="span8"><img src="http://goo.gl/mrllo"></div>
        <div class="span4"><img src="http://goo.gl/l9uUR"></div>
      </div>
      <div class="row">
        <div class="span4"><img src="http://goo.gl/l9uUR"></div>
        <div class="span8"><img src="http://goo.gl/mrllo"></div>
      </div>
    </div>
  </div>
</div> 
```

span4 的第一行完全对齐，但是如图所示，后两行中 span4 的底部并未与 span8 的底部对齐。

![在此处输入图像描述](../Images/fea1f43311de5dd5d0068d295821bdd2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:24:19.220

好吧，好像阅读引导程序中的嵌套列会帮助你，你想要实现的是相对简单的，只是需要时间来弄清楚

```
http://twitter.github.com/bootstrap/scaffolding.html#responsive 
```

我已经尝试过了，它可以工作，尽管您只需将适当的图像放在它们的位置，因为它们的大小都不同

```
 <div class="container">
   <div class="row">
    <div class="span8">
     <img src="http://example">
    </div>

    <div class="span4">
         <img src="http://example">
    </div>
   </div><!--row-->
      </div><!--container-->

     <div class="container">
  <div class="row">
   <div class="span6">
    <img src="http://example">
   </div>
     <div class="row">
      <div class="span6">
    <img src="http://example">
      </div>
    </div><!--row-->
     <div class="span6">
      <img src="http://example">
    </div>
          </div><!--row-->
        </div><!--container-->

        <div class="container">
     <div class="row">
      <div class="span9">
    <img src="http://example">
      </div>
    <div class="span3">
     <img src="http://example">
    </div>
    <div class="row">
     <div class="span3">
      <img src="http://example">
     </div>
    </div><!--row-->
           </div><!--row-->
          </div><!--container--> 
```

# objective-c - 等待屏幕旋转

> ID：13966199
> 
> 赞同：1
> 
> 时间：2012-12-20T06:01:40.943
> 
> 标签：objective-c, ios6, xcode4.5, ios-ui-automation

我希望等待 iPad 屏幕完成旋转，并希望在同一功能中同时旋转和等待。如果我不增加几秒钟的等待时间，那么应用程序的行为就不会像预期的那样。下面是函数：

```
LandScapeRight = function() 
{
   return UIATarget.localTarget().setDeviceOrientation(UIA_DEVICE_ORIENTATION_LANDSCAPERIGHT);
} 
```

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:07:14.550

检查这两种方法

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:51:26.327

您想`delay()`在`UIATarget`. 该课程的文档在[这里](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIATargetClassReference/UIATargetClass/UIATargetClass.html)

进行您想要的延迟的快速而肮脏的方法是这样的：

```
LandScapeRight = function() 
{
   var target = UIATarget.localTarget();
   target.setDeviceOrientation(UIA_DEVICE_ORIENTATION_LANDSCAPERIGHT);
   target.delay(1);   // Delay is in seconds, can be a fraction
} 
```

# c++ - 在opencv中检测人脸何时进入ROI

> ID：13966205
> 
> 赞同：0
> 
> 时间：2012-12-20T06:02:16.603
> 
> 标签：c++, opencv, roi

我有一个面部跟踪程序，它从相机读取视频并在人脸周围绘制一个矩形。我想要做的是让程序识别面部何时进入框架的特定区域，并初始化一些其他动作。我需要什么命令来做到这一点？（我正在使用 C++ 和 openCV 2.4.3）

例如

```
 detect face;
if (face is in ROI)
{
    close video feed;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:34:55.773

所以你有一个包围你的脸的矩形和一个定义图像 ROI 的矩形。要检查人脸是否进入 ROI，您只需检查两个矩形是否相交。最简单的方法是使用 cv::Rect_ 的重载运算符 & ，如此处所述（[http://docs.opencv.org/modules/core/doc/basic_structures.html#rect](http://docs.opencv.org/modules/core/doc/basic_structures.html#rect)），然后检查该区域是否得到的矩形是 > 0。

示例代码如下所示：

```
cv::Rect r1(0, 0, 10, 10);
cv::Rect r2(5, 5, 10, 10);
if ( (r1&r2).area() )
{
    // rects intersect
} 
```

如果您希望人脸以一定的百分比进入 ROI，您可以将交叉区域与两个输入区域的最小值进行比较：

```
cv::Rect r1(0, 0, 10, 10);
cv::Rect r2(5, 5, 10, 10);
double minFraction( 0.1 );
if ( (r1&r2).area() > minFraction * std::min(r1.area(), r2.area() ) )
{
    // rects intersect by at least minFraction
} 
```

# linux - 是否可以在 linux 上的 qt 中呈现 .doc 文件？

> ID：13966218
> 
> 赞同：1
> 
> 时间：2012-12-20T06:03:21.267
> 
> 标签：linux, qt, ms-office

我只需要`.doc`在 Linux 上的 qt 应用程序中显示文件。无需编辑/保存或其他。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:09:35.740

当然有可能。但是文件读取、解析和显示实际上将由底层语言执行，而不是 Qt。因此，如果您考虑一下，C++ 和 Python 以及其他任何东西都非常有能力解析和显示本质上是文本文件（或 .dox 是 XML 文件）的内容。

如何去做的实施细节是另一回事。您必须处理文件的很大一部分，这些文件仅用于呈现文件的样式等。

# ruby-on-rails - ROR：检查多态关联中的对象包含

> ID：13966220
> 
> 赞同：1
> 
> 时间：2012-12-20T06:03:25.780
> 
> 标签：ruby-on-rails, ruby

我正在寻找一种方法来检查某些对象是否包含在多态关联中。

我的例子是

**language.rb（这本质上是可用语言的列表）**

```
has_many :user_languages 
```

**用户语言.rb**

```
belongs_to :language
belongs_to :speakable, :polymorphic => true 
```

**用户.rb**

```
has_many :languages, :class_name => 'UserLanguage', :as => :speakable 
```

现在我想检查用户是否有某种语言。我的想法是以`include?`一种形式使用方法

```
u = User.find(1)
l = Language.find(1)
u.languages.include?(l) 
```

但它总是返回，`false`虽然`u.languages`给出

`#<UserLanguage id: 1, language_id: 1, speakable_id: 1, speakable_type: "User">`

安排此检查的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:17:55.597

看起来你的问题就在这里

```
has_many :languages, :class_name => 'UserLanguage', :as => :speakable 
```

因为您设置`class_name`为`UserLanguage`,`u.languages`是给您一组`UserLanguage`对象而不是`Language`对象。

如果你改变你的`user.rb`关联，如下所示，`u.languages`应该会给你你正在寻找的东西。

```
has_many :user_languages, :as => :speakable
has_many :languages, :through => :user_languages 
```

# c# - 删除用户控件并重绘？

> ID：13966222
> 
> 赞同：0
> 
> 时间：2012-12-20T06:03:35.407
> 
> 标签：c#, winforms, c#-4.0, graph

我有一个图形作为用户控件，我正在尝试重绘图形。如果我想重绘用户控件，为什么这不起作用？

```
userGraph.Dispose();
new UserControls.Graph(); 
```

它不应该处理整个图形并重新绘制用户控件并初始化所有组件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:07:36.880

应该有另一种重绘控件的方法，例如更新其数据源或手动更新其内容 - 您应该检查其代码或文档。

但是，如果您想从表单中删除控件，则应使用

```
myForm.Controls.Remove(userGraph); //assuming that control is on the form 
```

如果要添加新控件，则应如下所示：

```
UserControls.Graph newGraph = new UserControls.Graph();
//initialization of your new graph
myForm.Controls.Add(newGraph ); 
```

这是来自 msdn 的示例：[Control.ControlCollection.Add 方法](http://msdn.microsoft.com/library/system.windows.forms.control.controlcollection.add%28v=vs.90%29.aspx)

# javascript - Ajax如何做异步请求和响应一个同步结果

> ID：13966223
> 
> 赞同：1
> 
> 时间：2012-12-20T06:03:35.960
> 
> 标签：javascript, jquery, ajax, jsonp

当我使用 jQuery ajax 向 Web 服务发出请求时，我发现了一个奇妙的错误：

```
var AjaxResult;
login = function () {
    AjaxResult = "";
    $.ajax({
        type: "POST",
        url: KnutBase.getServiceUrl() + "ServiceInterface/HmsPlannerWebService.asmx/AuthenticateLogin",
        data: { username: this.username, password: this.password },
        dataType: 'jsonp',
        success: function (response) {
            //the response value is 'success'
            AjaxResult = response;
        },
        error: function (data, status, e) {
            alert("error:" + e);
        }
    });

    //alert(AjaxResult);
    //if i do not alert a message here, this function will return a null value
    //however, i do alert here, then i get a 'success' value.

    return AjaxResult;
} 
```

这怎么可能发生。我很困惑为什么 AjaxResult 在 ajax 方法设置响应值之前返回它的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:05:27.413

Ajax 是`asynchronous`对您的方法的调用，它在后面为服务器执行处理。`success`在调用该方法之前，您不会得到结果。**[您可以在此处](http://api.jquery.com/jQuery.ajax/)**阅读有关 jquery ajax的更多信息

您可以将`async`属性设置为`false`of`ajax()`以进行同步调用。

编辑：使用延迟 -

[`$.Deferred`](http://api.jquery.com/category/deferred-object/)可用于在其他代码完成后运行代码。Ajax 是一个很好的例子，所有的 jQuery ajax 方法（除了`.load`）都实现了这个`$.Deferred`接口。您可以使用`$.when`来观看延迟。例如：

```
login = function () {
   return $.ajax({... 
```

deferred 从上面的方法中返回，因此您可以执行以下操作：

```
$.when(login()).done(function (response) { ... }); 
```

任何需要与 ajax 响应同步的代码都必须放在`.done`回调中。

请注意，这与仅使用`success`回调并没有太大区别`$.ajax`。关键是所有依赖于从 Ajax 返回的内容的工作都需要在这些回调中完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T06:06:18.970

由于 ajax 是异步的，`return AjaxResult`实际上是在 ajax 结果完成之前执行的。你不能以这种方式返回；您需要在 ajax 请求的回调中执行一些操作或使用 deferred。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T06:05:29.517

这与 AJAX 是异步的这一事实有关（这实际上是其中第一个 A 的含义）。`alert`停止代码，直到您按下按钮，并且请求有时间完成。没有 no `alert`，函数立即执行，AJAX 才刚刚开始工作，当然值仍然是空的。

通常，您不能让函数返回它们从 AJAX 获得的值。给它设置一个回调，当它来的时候处理它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T06:08:52.193

> Ajax如何做异步请求并返回同步结果

你不能。这是不可能的。如果您的代码真的试图这样做，它将失败。

# r - 如何在 R 中的 lapply 中向函数添加可选参数

> ID：13966225
> 
> 赞同：1
> 
> 时间：2012-12-20T06:03:36.390
> 
> 标签：r, function, lapply

我正在使用以下内容：

```
qicout <- matrix(unlist(lapply(X = cand.set, FUN = qic)), length(cand.set), 4, byrow = TRUE) 
```

它已经奏效了，但是我更改了函数 qic 所以它现在有一个参数

```
qic(model, small = TRUE) 
```

我想调整上面的 lapply 函数以在 qic 中包含 TRUE 或 FALSE。这个计算 qicout 的 lapply 函数实际上在另一个函数中，我希望有一个 small = TRUE/FALSE 选项，以便可以将它传递给 lapply 中的 qic 函数。任何建议最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T06:07:05.083

我认为：

```
cout <- matrix(unlist(lapply(X = cand.set, FUN = qic, small = TRUE )), 
    length(cand.set), 4, byrow = TRUE) 
```

应该可以工作，或者`small = FALSE`我可能无法正确理解。

# json - 仅接受来自 JSON 的属性的数字格式

> ID：13966226
> 
> 赞同：1
> 
> 时间：2012-12-20T06:03:41.717
> 
> 标签：json, asp.net-web-api, number-formatting, jsonserializer

我正在开发 ASP.Net Web API 应用程序，我们正在为不同的客户端公开一个 REST API。我在获取用户的 JSON 文件并将它们转换为数据模型类时遇到问题。我的 JSON 如下所示。

```
{"engagementid":1,"clientname":"fsdfs","myno":"23,45","address1":"fsd","address2":"fsdfs","city":"fsdfs","zip":"fsdf","info":"fsdfs","country":"fsdfs","currency":"NOK"} 
```

您可以看到我的“myno”是作为字符串发送的。但在我的服务器数据模型中，“myno”是一个 double 值。所以这里发生的情况是，当我将“myno”的值发送为“23,45”时，它被分配给我的模型的 MyNo 属性为 2345。这是错误的，因为您可以看到数字已因此而更改错误的转换。我只需要限制这种转换。我的意思是，如果他为“myno”属性发送一个字符串，我想向他发送一个错误。由于它在我的服务器数据模型中是双精度值，因此我只想接受来自客户端的数字作为该属性。这意味着，我想要这样。

```
{"myno":2345} //correct
{"myno":"2345"} //wrong. I want to send a error to user by saying, "We only accept Numbers for this value" 
```

我该怎么做呢？

更新：如果我在服务器模型中使用 int，这个问题就会得到解决。我的意思是，如果客户端将字符串发送到在我的模型中表示为 int 的属性，那么它会给用户一个错误，即无法完成字符串到 int 的转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T07:00:17.497

我不知道它是否正确。我只是根据我的经验告诉我的建议。为什么不能创建自定义验证属性并检查数据的数据类型。

```
public class IsNumberAttribute : ValidationAttribute
{

    protected override ValidationResult IsValid(object value, ValidationContext context)
    {
       if(value.GetType() != Int)
          return new ValidationResult("Only Numbers Allowed");
        return null;
    }
} 
```

# javascript - 成功提交表单后将文本添加到 DIV 的 jQuery If/else 语句

> ID：13966232
> 
> 赞同：0
> 
> 时间：2012-12-20T06:04:37.193
> 
> 标签：javascript, jquery, html, forms, conditional-statements

我有一个完美的表格。但是，当成功提交消息时，用户会被重定向到一个新页面，其中包含我设置的“成功”消息。相反，我希望成功消息显示在表单旁边的 div 中，并在用户想要发送另一条消息时重置表单。同样，我也希望在失败时让我的“错误”消息显示在同一个 div 中。希望有人可以帮助我的 if/else 语句使这成为可能。

这是我的 HTML：

```
<div id="contact-area">

<form id="theform" name="theform" method="post" action="feedback.php">
<input type="hidden" name='sendflag' value="send">

<p>
<label for="Name">Name:</label>
<input type="text" name="name" id="name" value="" />
</p>

<p>
<label for="Email">Email:</label>
<input type="text" name="email" id="email" value="" />
</p>

<p>
<label for="Message">Message:</label><br />
<textarea name="message" rows="20" cols="20" id="message"></textarea>
</p>

<p>
<input type="submit" name="submit" value="Submit" class="submit-button" />
</p>

</form>     
</div>

<div class="message">
<p class="submitMessage"></p>
</div> 
```

这是我的PHP：

```
<?php

$mail_to_send_to = "myemail@gmail.com";
$your_feedbackmail = "noreply@domain.com";

$sendflag = $_REQUEST['sendflag'];
if ( $sendflag == "send" )
{
$name = $_REQUEST['name'] ;
$email = $_REQUEST['email'] ;
$message = $_REQUEST['message'] ;
$headers = "From: $name" . "\r\n" . "Reply-To: $email" . "\r\n" ;
$a = mail( $mail_to_send_to, "Feedback form", $message, $headers );
if ($a)
{
print("Message was sent, you can send another one");
} else {
print("Message wasn't sent, please check that you have changed emails in the bottom");
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:10:19.617

如果我正确理解您的问题，您希望永远不要离开页面，而是`div`根据成功的表单提交来显示或消失。如果是这样，看起来您将不得不使用 AJAX。幸运的是，jQuery 内置了这个！我建议如下：

```
$.post("url.php", { option1: value1, option2: value2 }, function(data) {
    if(data != '')
        $('#theDiv').html("Success!");
}); 
```

有关更多信息，[请阅读此处的文档](http://api.jquery.com/jQuery.post/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:12:11.190

在此处阅读并遵循示例：[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)

你基本上会做这样的事情。

```
$.ajax({
  url: /url/to/your/php,
  data: dataObjectPosting
  success: function(data){
    //the data object will have your PHP response;
    $('#divid').text('success message');
  },
  error: function(){
    alert('failure');
  }
}); 
```

请记住，成功只是意味着 HTTP 200，不一定是您的 PHP 代码如您所见那样成功运行。

# android - 无法暂停活动 {DroFeedsActivity}：java.lang.NullPointerException

> ID：13966236
> 
> 赞同：0
> 
> 时间：2012-12-20T06:04:47.130
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我的项目中有以下异常：

```
12-20 05:51:49.641: E/AndroidRuntime(426): java.lang.RuntimeException: Unable to pause activity {com.dz.dro/com.dz.dro.DroFeedsActivity}: java.lang.NullPointerException
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3162)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3119)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3102)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.app.ActivityThread.access$2400(ActivityThread.java:119)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1870)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.os.Looper.loop(Looper.java:123)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.app.ActivityThread.main(ActivityThread.java:4363)
12-20 05:51:49.641: E/AndroidRuntime(426):  at java.lang.reflect.Method.invokeNative(Native Method)
12-20 05:51:49.641: E/AndroidRuntime(426):  at java.lang.reflect.Method.invoke(Method.java:521)
12-20 05:51:49.641: E/AndroidRuntime(426):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-20 05:51:49.641: E/AndroidRuntime(426):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-20 05:51:49.641: E/AndroidRuntime(426):  at dalvik.system.NativeStart.main(Native Method)
12-20 05:51:49.641: E/AndroidRuntime(426): Caused by: java.lang.NullPointerException
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.support.v4.app.FragmentManagerImpl.saveFragmentBasicState(FragmentManager.java:1576)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.support.v4.app.FragmentManagerImpl.saveAllState(FragmentManager.java:1617)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:481)
12-20 05:51:49.641: E/AndroidRuntime(426):  at com.actionbarsherlock.app.SherlockFragmentActivity.onSaveInstanceState(SherlockFragmentActivity.java:127)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.app.Activity.performSaveInstanceState(Activity.java:1022)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1180)
12-20 05:51:49.641: E/AndroidRuntime(426):  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3144)
12-20 05:51:49.641: E/AndroidRuntime(426):  ... 12 more 
```

当我在我的项目中使用带有 carasoul 效果的寻呼机 adpater 的 action bar sherlock 库时。对于每个部分，我定义了单独的片段。在我的应用程序中，一切都很顺利，但是当我单击 sherlock 操作栏中的操作菜单项时，它会抛出上述错误，我尝试了几种解决此问题的方法。

`And I gone through several stackoverflow links which is similar to my issue, none of the links solves my probs`

我使用以下方法将片段添加到 sectionpageradapter 中：

```
 @Override
    public Fragment getItem(int position) {
        Fragment fragment = new Fragment();

      switch(position) {
         case 0 :
            fragment = new ListUserFeedFragment("some url");
            break;
         case 1 :
            fragment = new ListAllFeedFragment("some url");
            break;
      }
    return fragment;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:03:19.583

我认为你应该这样做：

```
@Override
public Fragment getItem(int position) {
    ListUserFeedFragment fragment;

  switch(position) {
     case 0 :
        fragment = new ListUserFeedFragment("some url");
        break;
     case 1 :
        fragment = new ListAllFeedFragment("some url");
        break;
  }
return fragment;
} 
```

# wpf - 如何从服务访问制作的对象

> ID：13966237
> 
> 赞同：1
> 
> 时间：2012-12-20T06:04:56.853
> 
> 标签：wpf, wcf, web-services, business-intelligence

我的解决方案中有 WCF 服务和 WPF 应用程序。

该应用程序包含我创建的对象（客户、产品等）、我的窗口和我的业务逻辑。

我需要检索使用该服务的客户列表，但该服务不知道什么是客户。

我可以将我的所有对象都放在两个项目中，或者从另一个项目中引用一个项目，但这似乎不是正确的方法。

知道我应该在这里做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:33:36.443

在您的服务中使用数据合同，例如。

```
[DataContract]
public class Customer
{
    [DataMember]
     public int CustomerID{ get; set; }    }

    [DataMember]
     public string CustomerName{ get; set; }    
}

public interface ICustomerService
{

    [OperationContract]
    List<Customer> GetAllCustomer();
}

 public Class CustomerService:ICustomerService
 {

    List<Customer> GetAllCustomer()
    {
           // write your own code to fill List<Customer> ans return it
    }
 } 
```

谢谢

CK 尼丁 (TinTin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:00:41.580

何时添加 WCF 的服务引用或添加定义 WCF 服务的 .dll 以防万一您使用 ServiceHost 类从代码中调用 WCF 服务，您可以为该客户类创建对象并轻松使用它。

谢谢

CK 尼丁 (TinTin)

# iphone - 获取有关尝试打开 Epub 的应用建议

> ID：13966239
> 
> 赞同：0
> 
> 时间：2012-12-20T06:05:19.183
> 
> 标签：iphone, objective-c, ios, ipad, file-association

> **可能重复：**
> [如何将文件类型与 iPhone 应用程序关联？](https://stackoverflow.com/questions/2774343/how-do-i-associate-file-types-with-an-iphone-application)

我正在开发一个应用程序，让每个人都可以阅读类似`Epub, PDF, ACSM`. 我在我的`IPAD`via上安装了该应用程序`testflight`，然后我去 safari 下载一个`ACSM`文件并尝试打开它。Safari 然后给了我一些应用程序的建议，但它不包括我的应用程序。我不确定这是如何工作的。任何信息都会非常有用。

我希望将文件复制到我的应用程序的文档目录中，以便用户能够从应用程序的库部分访问相同的文件。

![在此处输入图像描述](../Images/f5941844053b967d6f57fb29afa99cfe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:05:16.953

我的问题已在以下链接中得到解答：

[如何将文件类型与 iPhone 应用程序相关联？](https://stackoverflow.com/questions/2774343/how-do-i-associate-file-types-with-an-iphone-application)

它解决了我的问题。再次感谢！

# video - 使用 ffmpeg 进行 libopenjpeg 编码

> ID：13966242
> 
> 赞同：0
> 
> 时间：2012-12-20T06:05:26.070
> 
> 标签：video, ffmpeg, archiving, jpeg2000

ffmpeg 的 libopenjpeg 编解码器被认为是实验性的。有谁知道它是否可用于存储档案视频资料，即如果我用它写一大堆视频文件，我将来可能会打开它们吗？

除了使用 ffmpeg 编码 motionJpeg2000 或一般存档视频，还有其他 Free/OSS 替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:10:54.753

即使他们是实验性的，他们仍然会抱怨标准。因此，您应该始终能够打开它们。可能无法保证编码的质量，因此您可能会看到伪影，请尝试它们的最佳预设。

# c# - 不从实体框架返回集合

> ID：13966245
> 
> 赞同：0
> 
> 时间：2012-12-20T06:05:39.953
> 
> 标签：c#, sql-server, entity-framework-5

我是 EntityFramework 的大三学生，我遇到了这样的问题。我创建实体用户：

```
public class User:IdStatus

    {
        public string Info { get; set; }
        public string Email { get; set; }
        public string Login { get; set; }
        public int  Rating { get; set; }
        public ICollection<PlayedQuestion> PlayedQustions { get; set; }
    } 
```

和实体 PlayedQuestion：

```
public class PlayedQuestion:IdStatus
{
    public User User { get; set; }
    public Question Question { get; set; }
    public bool IsSolve { get; set; }
} 
```

当我在我的应用程序中向用户添加新的已播放问题时，此问题通常保存在我的数据库中，但是当我获取用户并尝试枚举其 PLAYEDQUESTIONS 集合时，出现错误：Null reference exception because PlayedQuestions collection is null。请探索我，为什么这个问题没有从用户的数据库中得到，谢谢

# sql - 需要 SSRS 参数帮助

> ID：13966246
> 
> 赞同：0
> 
> 时间：2012-12-20T06:05:40.940
> 
> 标签：sql, sql-server, ssrs-2008, reporting-services

我正在使用 T-SQl 在 SSRS 中创建报告。场景：我有 3 列

```
- time_a 
- time_b 
- Delta 
```

Delta 显示 (time_a - time_b) 之间的差异

所以 delta 有负值和正值。我需要在 SSRS 中创建一个参数，以便用户可以选择查看正值或负值或同时查看这两个值。

```
select 
 case
  when (time_a - time_b) > 0
   then 'positive'
  when (time_a - time_b) < 0
   then 'negative'
 end as differ
from time_entry 
```

我被困在这里如何在 SSRS 中创建参数。（就像 ??? 在@differ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:36:51.113

设置你的`@Delta`参数：

```
-1   Negative
0    All
1    Positive 
```

找到差异并根据您想要的差异进行选择：

```
SELECT time_a - time_b AS Delta
FROM time_entry
WHERE ((@Delta = 0) 
OR ((@Delta < 0) AND (time_a - time_b < 0))
OR ((@Delta > 0) AND (time_a - time_b > 0)) 
```

# ruby-on-rails - Capistrano 多级（capistrano-ext）在哪里获取舞台参数？

> ID：13966248
> 
> 赞同：1
> 
> 时间：2012-12-20T06:05:43.317
> 
> 标签：ruby-on-rails, capistrano

我阅读了 capistrano 多级（capistrano-ext）源代码。
但是我找不到从 ARGV 获取阶段参数的语句。

我使用 capistrano (2.5.13) 和 capistrano-ext (1.2.1)。我无法更新版本是有原因的。

它在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:09:39.860

[https://github.com/capistrano/capistrano/blob/master/lib/capistrano/ext/multistage.rb#L22](https://github.com/capistrano/capistrano/blob/master/lib/capistrano/ext/multistage.rb#L22)检查第一个参数，如果它是有效的阶段将设置阶段。

# twitter-bootstrap - 如何命名 Twitter Bootstrap，使样式不会冲突

> ID：13966259
> 
> 赞同：110
> 
> 时间：2012-12-20T06:06:36.277
> 
> 标签：twitter-bootstrap, less

我想使用 Twitter Bootstrap，但只在特定元素上使用，所以我需要想办法用我的前缀为所有 Twitter Bootstrap 类添加前缀，或者使用更少的 mixins。我还没有这方面的经验，所以我不太明白如何做到这一点。这是我尝试设置样式的 HTML 示例：

```
<div class="normal-styles">
  <h1>dont style this with bootstrap</h1>
  <div class="bootstrap-styles">
    <h1>use bootstrap</h1>
  </div>
</div> 
```

在此示例中，Twitter Bootstrap 将正常设置两个`h1`s 的样式，但我希望对应用 Twitter Bootstrap 样式的区域更具选择性。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-12-20T17:14:51.813

事实证明这比我想象的要容易。Less 和 Sass 都支持命名空间（甚至使用相同的语法）。当您包含引导程序时，您可以在选择器中执行此操作以对其命名：

```
.bootstrap-styles {
  @import 'bootstrap';
} 
```

**更新：**对于较新版本的 LESS，操作方法如下：

```
.bootstrap-styles {
  @import (less) url("bootstrap.css");
} 
```

[这里回答了一个类似的问题。](https://stackoverflow.com/a/11841957/48523)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-02-21T08:46:34.360

@Andrew 很好的答案。您还需要注意 bootstrap 修改了 body {}，主要是为了添加字体。因此，当您通过 LESS/SASS 为其命名时，您的输出 css 文件如下所示：（在引导程序 3 中）

```
.bootstrap-styles body {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 14px;
    line-height: 1.428571429;
    color: #333333;
    background-color: white;
} 
```

但显然你的 div 中不会有 body 标签，所以你的引导内容不会有引导字体（因为所有引导都从父级继承字体）

要修复，答案应该是：

```
.bootstrap-styles {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 14px;
    line-height: 1.428571429;
    color: #333333;
    background-color: white;

    @import 'bootstrap';
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-07-01T07:44:49.857

将@Andrew、@Kevin 和@adamj 的答案放在一起（加上其他一些样式），如果您在名为“bootstrap-namespaced.less”的文件中包含以下内容，您可以简单地将“bootstrap-namespaced.less”导入任何更少文件：

```
// bootstrap-namespaced.less

// This less file is intended to be imported from other less files. 
// Example usage:
// my-custom-namespace {
//  import 'bootstrap-namespaced.less';
// }

// Import bootstrap.css (but treat it as a less file) to avoid problems 
// with the way Bootstrap is using the parent operator (&).
@import (less) 'bootstrap.css';

// Manually include styles using selectors that will not work when namespaced.

@import 'variables.less';

& {
    // From normalize.less

    // Previously inside "html {"
    // font-family: sans-serif; // Overridden below
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;

    // Previously inside "body {"
    margin: 0;

    // From scaffolding.less

    // Previously inside "html {"
    // font-size: 10px; // Overridden below
    -webkit-tap-highlight-color: rgba(0,0,0,0);

    // Previously inside "body {"
    font-family: @font-family-base;
    font-size: @font-size-base;
    line-height: @line-height-base;
    color: @text-color;
    background-color: @body-bg;
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-04-24T05:43:14.597

将命名空间添加到引导 CSS 将破坏模式功能，因为引导将“模式背景”类直接添加到正文。一种解决方法是在打开模式后移动此元素，例如：

```
$('#myModal').modal();
var modalHolder = $('<div class="your-namespace"></div>');
$('body').append(modalHolder);
$('.modal-backdrop').first().appendTo(modalHolder); 
```

您可以在“hide.bs.modal”事件的处理程序中删除该元素。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-06-21T21:28:52.303

首先从 github 克隆引导程序：

```
git clone https://github.com/twbs/bootstrap.git 
```

安装要求：

```
npm install 
```

打开 scss/bootstrap.scss 并添加您的命名空间：

```
.your-namespace {
    @import "functions";
    ...
    @import "utilities/api";
} 
```

编译引导程序：

```
npm run dist 
```

从and标记中打开`dist/css/bootstrap.css`并删除命名空间。`html``body`

然后将 dist 文件夹的内容复制到您的项目中，一切就绪。

玩得开心！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-20T13:08:39.220

使用 .less 版本的文件。确定您需要哪些 less 文件，然后将这些 .less 文件包装为：

```
.bootstrap-styles {

    h1 { }

} 
```

这将为您提供以下输出：

```
.bootstrap-styles h1 { } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-12-28T20:20:17.547

我在一个名为 .bootstrap-wrapper [https://gist.github.com/onigetoc/20c4c3933cabd8672e3e的类中使用 Bootstrap 3 做了一个 GIST](https://gist.github.com/onigetoc/20c4c3933cabd8672e3e)

我从这个工具开始：[http](http://www.css-prefix.com/) ://www.css-prefix.com/ 并通过 PHPstorm 中的搜索和替换来修复其余部分。所有字体@font-face 都托管在 maxcdn 上。

第一行示例

```
.bootstrap-wrapper {font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-03-14T02:46:30.273

命名空间会破坏 Modal 插件的背景 div，因为它总是直接添加到 <body> 标签，绕过应用了样式的命名空间元素。

`$body`您可以通过在显示背景之前更改插件的引用来解决此问题：

```
myDialog.modal({
    show: false
});

myDialog.data("bs.modal").$body = $(myNamespacingElement);

myDialog.modal("show"); 
```

该`$body`属性决定将添加背景的位置。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-09-12T16:26:12.007

为了更好地解释 Andrew 为那些不知道 Less 是什么的人所谈论的所有步骤。这是一个链接，它很好地解释了它是如何一步一步完成的[如何隔离 Bootstrap 或其他 CSS 库](https://formden.com/blog/isolate-bootstrap)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-04-18T23:53:56.000

**最简单的解决方案 - 开始为 Bootstrap 使用自定义构建隔离 css 类。**

例如，对于 Bootstrap 4.1 从 css4.1 目录下载文件 -

[https://github.com/cryptoapi/Isolate-Bootstrap-4.1-CSS-Themes](https://github.com/cryptoapi/Isolate-Bootstrap-4.1-CSS-Themes)

并使用类 bootstrapiso 将您的 HTML 包装在 div 中：

```
<div class="bootstrapiso">
<!-- Any HTML here will be styled with Bootstrap CSS -->
</div> 
```

具有独立引导程序 4 的页面模板将是

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <title>Page1</title>

    <!-- Isolated Bootstrap4 CSS - -->
    <link rel="stylesheet" href="css4.1/bootstrapcustom.min.css" crossorigin="anonymous">   

    <!-- JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.9/js/all.js" crossorigin="anonymous"></script>

  </head>

  <body>

  <div class="bootstrapiso">
  <!-- Any HTML here will be styled with Bootstrap CSS -->
  </div>

  </body>
</html> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-10-02T18:22:42.160

作为大家的进一步说明。要让模态与背景一起使用，您可以简单地从 bootstrap3 复制这些样式

```
.modal-backdrop {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 1040;
  background-color: #000;
}
.modal-backdrop.fade {
  filter: alpha(opacity=0);
  opacity: 0;
}
.modal-backdrop.in {
  filter: alpha(opacity=50);
  opacity: .5;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-05T20:44:23.837

不幸的是，我遇到了@Andrew 提出的相同问题和方法，但对我的具体情况没有帮助。引导类与来自另一个框架的类发生冲突。这就是这个项目的启动方式[https://github.com/sneas/bootstrap-sass-namespace](https://github.com/sneas/bootstrap-sass-namespace)。随意使用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-30T11:41:48.933

## 前提条件

*   您没有设置 CSS 预处理器。

    → 否则试试这个：[https ://stackoverflow.com/a/13977230/2911452](https://stackoverflow.com/a/13977230/2911452)

*   您的 Bootstrap 版本早于 4.1。

    → 否则试试这个：[https ://stackoverflow.com/a/49910653/2911452](https://stackoverflow.com/a/49910653/2911452)

*   您不太可能更新 Bootstrap 版本。此解决方案仅适用于您的网站/应用程序的遗留部分。

*   您可以自托管 css

## 解决方案

使用类选择器为所有 css 选择器添加前缀：

1.  将 CDN 中的所有 CSS 复制到您的编辑器中（例如[http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css](http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css)）

2.  用选择器（SCSS 样式）包装整个内容，例如`.bootstrap-styles`：

```
.bootstrap-styles{
  html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside /* etc... */
} 
```

3.  使用工具将 SCSS 转换为 CSS。我使用[了 https://jsonformatter.org/scss-to-css](https://jsonformatter.org/scss-to-css)。（见最后截图）

4.  自托管生成的 CSS 文件并将其包含在您需要的页面中

5.  将需要 Bootstrap 样式的部分用`<div class="bootstrap-styles"> ... </div>`

    → Bootstrap 样式将仅应用于这些部分

6.  您可以选择最小化生成的 CSS。

## 注意事项

*   结果`.bootstrap-styles html {`选择器显然不起作用，因为 html 标记没有父标记。您可以通过将其更改为 just 来解决此问题`.bootstrap-styles {`。同样适用于`body`。

*   具有相对路径的图标和字体将被破坏。您可以通过搜索找到这些`url(`。

    *   **选项 1.**如果您不需要这些样式，请删除它们
    *   **选项 2.**更新 URls 以使用 CDN 的绝对路径（例如`https://netdna.bootstrapcdn.com/bootstrap/3.1.1/fonts/glyphicons-halflings-regular.svg#glyphicons_halflingsregular`
    *   **选项 3.**从 CDN 下载资产并自行托管这些资产。
*   你不能使用像 npm 这样的依赖管理工具。每次要更新 Bootstrap 时都必须执行这些步骤（请参阅前提条件）。

## 截屏

将 SCSS 转换为 CSS

[![将 SCSS 转换为 CSS](../Images/1226fd5dbf110cf666dac3bddcb838b4.png)](https://i.stack.imgur.com/xX5y9.png)

# jquery-ui - 在 jQuery UI datepicker 中删除日期和月份中的前导“0”

> ID：13966273
> 
> 赞同：6
> 
> 时间：2012-12-20T06:07:25.063
> 
> 标签：jquery-ui, datepicker

我的问题类似于[Remove Leading "0" in day of Month SimpleDateFormat](https://stackoverflow.com/questions/8836294/remove-leading-0-in-day-of-month-simpledateformat)

是否可以删除 jquery UI datepicker 中的前导“0”？

[DateFormat 选项](http://api.jqueryui.com/datepicker/#option-dateFormat)与我从文档中获得的一样接近：

```
$( ".selector" ).datepicker({ dateFormat: "yy-mm-dd" }); 
```

但我需要的是在 2012 年 12 月 5 日这样的日期，datepicker 将其显示为 12/05/2012，而我想要 12/5/2012。4 月 5 日也是如此：例如 2013 年 4 月 5 日。

这可以在没有广泛逻辑的情况下完成吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T06:10:17.893

尝试

$( ".selector" ).datepicker({ dateFormat: "yy-md" });

来源：[jQuery DateFormats](http://docs.jquery.com/UI/Datepicker/%24.datepicker.formatDate)

# android - 将通知从标准类型更改为自定义类型

> ID：13966277
> 
> 赞同：1
> 
> 时间：2012-12-20T06:07:44.197
> 
> 标签：android, notifications, custom-controls

从具有文本和图片的标准更改为`notification`具有自定义设计布局的更复杂类型需要使用 RemoteViews 类。由于自定义视图，我没有使用 setContentTitle()，而是使用了 setContent(remoteviews) 方法。

更改为自定义视图后，我删除了`setContent, setSmallIcon,`and `setContentTitle mehods`，但是在我这样做之后，通知就再也没有出现过。

如果我使用的是自定义视图，那么我必须使用 setContent() 方法对吗？他们为什么它不适用于我删除其他方法？

```
RemoteViews remoteviews = new RemoteViews("com.test.example", R.layout.custom_notifications);

 NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(AudioService.this)
           .setContent(remoteviews)
            .setSmallIcon(R.drawable.ic_launcher)
            .setContentTitle("My notification")
            .setContentText("Hello World!")
            .setOngoing(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:45:42.323

好吧，自从 ICS 以来，我还没有真正接触过 Notification Builder。直到今天，当 GB 更受欢迎时，我仍然以老式的方式进行操作。示例时间：

```
 String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

            // Setup an intent for when the user taps the notification
        Intent notificationIntent = new Intent(this, SomeActivity.class);
        PendingIntent contentIntent = PendingIntent.getActivity(
            this, 0, notificationIntent, 0);

            // `icona` is the icon shown in the status bar. 
        Notification notification = new Notification(icona,
            "Ticker Text", System.currentTimeMillis());

            // These flags should be self explanatory 
        notification.flags |= Notification.FLAG_NO_CLEAR;
        notification.flags |= Notification.FLAG_ONGOING_EVENT;

            // This is where you select the xml for you custm view
        RemoteViews contentView = new RemoteViews(getPackageName(),
            R.layout.custom_notification);

        notification.contentView   = contentView;
        notification.contentIntent = contentIntent;

            // Some ID number for the OS to keep track of your notification     
        int HELLO_ID = 123456;

            // Send the notification
        mNotificationManager.notify(HELLO_ID, notification); 
```

这应该适用于每个版本的 android。仅仅是因为`Notification.Builder`是一个包装器，可以更轻松地创建状态栏通知。如果您查看 androids 源代码，构建器也会调用这些方法。

# hadoop - 我在哪里可以看到我在 Hadoop HDFS 中的数据

> ID：13966280
> 
> 赞同：-1
> 
> 时间：2012-12-20T06:07:59.093
> 
> 标签：hadoop

我将主节点和从节点中的 dfs.name.dir 和 dfs.data.dir 设置为 /home/hduser/hadoop/hdfs/name /home/hduser/hadoop/hdfs/data 我将文件从本地磁盘复制到 HDFS。我在哪里可以看到 HDFS 中的文件数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:40:10.180

这些配置参数决定了 Hadoop 在本地文件系统中存储其图像和原始数据的位置。将文件数据导入 HDFS 时，不涉及这些值。通常，数据会在您指定的路径（当它是绝对路径时）或由您的用户名限定的路径（默认情况下，我相信这是 ）写入 HDFS，`/user/your_username`当您使用相对路径时。

所以，如果我有一个`example`在我的（本地）主目录中命名的文件并说

```
local:~ matt> hadoop fs -put example relative/path 
```

我应该可以在 HDFS 中找到它`/user/matt/relative/path/example`。另一方面，如果我这样做

```
local:~ matt> hadoop fs -put example /absolute/path/in/hdfs 
```

它将位于 HDFS 中`/absolute/path/in/hdfs/example`。

# qt - QThread 何时退出（）或完成（）？

> ID：13966284
> 
> 赞同：2
> 
> 时间：2012-12-20T06:08:14.727
> 
> 标签：qt, qthread

我是 Qt 新手，只想在 Qt GUI 中显示视频。除了处理 QThread 的一些细节，我基本上都弄清楚了，这真的很烦人。

我将我的问题重新表述为一个更简单的程序，希望它能更好地解释

首先我定义了这个 QObject 类

```
#include <QObject>
#include <QDebug>
class myObject : public QObject
{
    Q_OBJECT
public:
    explicit myObject(QObject *parent = 0);
    bool stop;

signals:
    void finishWork();

public slots:
    void dowork();
    void onfinishThread();

};

myObject::myObject(QObject *parent) :
QObject(parent)
{
    stop = true;
}

void myObject::dowork(){
    qDebug()<<"start working!";
    while(!stop){
        qDebug()<<"working...";
    }
    emit finishWork();
    qDebug()<<"finish do work!";
}
void myObject::onfinishThread(){
    qDebug()<<"thread is finished!";
} 
```

然后是主要功能

```
#include <QCoreApplication>
#include <QThread>

#include <iostream>
#include <windows.h>

#include "myobject.h"

using namespace std;
int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    myObject* myObj = new myObject();
    QThread* myThread = new QThread;

    myThread->connect(myObj, SIGNAL(finishWork()), SLOT(quit()));
    myObj->connect(myThread, SIGNAL(started()), SLOT(dowork()));
    myObj->connect(myThread, SIGNAL(finished()), SLOT(onfinishThread()));
    myObj->moveToThread(myThread);

    myObj->stop = false;

    myThread->start();

    cout<<"Press ENTER to continue....."<<endl<<endl;
    cin.ignore(1);

    myObj->stop = true;
    Sleep(10);

    if(myThread->isRunning()){
        qDebug()<<"The thread is still running?!!!";
    }

/*
    myObj->stop = false;
    Sleep(1000);
    myThread->start();
    myObj->stop = true;
*/

    myObj->deleteLater();
    myThread->deleteLater();
    return a.exec();
} 
```

如您所见，我什至使用 cin 尝试让**dowork()**先运行，但它根本不起作用，输出为

![输出](../Images/9ed06ccac2aa334aceb37b778a943054.png)

所以我真的很困惑 QThread 的调度是如何工作的......

此外，如果您**取消注释**该部分

```
/*
    myObj->stop = false;
    Sleep(1000);
    myThread->start();
    myObj->stop = true;
*/ 
```

输出完全一样！打印后只停留一段时间

> 线程还在运行？！！！

有人会帮我吗？非常感谢。您可以简单地复制所有代码并自己测试。

* * *

-------------原始问题，不好的解释，请**忽略**.....------------ --------------------------

我制作了一个只有一个函数来查询帧的 videoObj 类，函数定义为：

```
void videoObj::ProcessFrame(){
bool getframe;
qDebug()<<"get in ProcessFrame";
while(!stop_flag){
    getframe = capture_.read(imgOriginal_);
    if(!getframe){
        qDebug()<<"Video End!";
        break;
    }
    cv::cvtColor(imgOriginal_, imgOriginal_, CV_BGR2RGB);
    QImage qimgOriginal((uchar*)imgOriginal_.data, imgOriginal_.cols, imgOriginal_.rows, imgOriginal_.step, QImage::Format_RGB888);

    emit imgProcessed(qimgOriginal);
    this->thread()->msleep(10);
    //qDebug()<<"processing frames";
}

emit stopProcess();
qDebug()<<"Stop thread";
} 
```

基本上上面的代码只是查询帧，每当有一个发出

```
SIGNAL imgProcessed(qimgOriginal) 
```

并且每当设置了 stop_flag 时，停止 while 循环并发出

```
SIGNAL stopProcess() 
```

我在 MainWindow 类中使用这个类，这是我在构造函数中定义连接的方式：

```
MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
ui->setupUi(this);

video_obj_ = new videoObj();
video_thread_ = new QThread;
this->connect(video_obj_, SIGNAL(imgProcessed(QImage)), SLOT(onImgProcssed(QImage))); \\this is for displaying the image
video_obj_->connect(video_thread_, SIGNAL(started()), SLOT(ProcessFrame()));
video_obj_->moveToThread(video_thread_);
video_thread_->connect(video_obj_, SIGNAL(stopProcess()), SLOT(quit()));
} 
```

上面的代码在框架查询中工作正常。我不明白的问题是，如果我在任何 MainWiow 成员函数中设置 video_obj_->stop_flag，videoObj 类中的 ProcessFrame() 应该发出 stopProcess() 信号并触发 video_thread_ 的 quit()，然后线程应该完成，即 video_thread_->finished() 为真。

但是，如果我这样做：

```
connect(video_thread_, SIGNAL(finished()), this, SLOT(onStopProcess())); //onStopProcess() see below

void MainWindow::on_btnStart_clicked()
{
video_obj_->stop_flag = 1;
this->thread()->msleep(10);

video_obj_->capture_.open(ui->lineEditVidoeAddress->text().toStdString());
//... something about videoCapture setting here, not related

video_obj_->capture_.set(CV_CAP_PROP_POS_FRAMES, 0);
video_obj_->stop_flag = 0;
this->thread()->msleep(10);
if(video_thread_->isRunning()){
    qDebug()<<"The thread is still running?!!!";
}
video_thread_->start();
}

void MainWindow::onStopProcess(){
    qDebug()<<"thread is finished";
} 
```

它会给我输出：

```
Stop thread 
The thread is still running?!!!  
thread is finished 
```

这意味着触发quit() 不是完成线程，或者quit() 没有被触发。

如果我使用：

```
video_thread_->wait(); //instead of video_thread_->wait(10); 
```

该程序将冻结。

有谁可以帮我解决这个问题，这让我对这个 quit() 和 finished() 感到很困惑......谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T06:31:29.917

因为当您调用 stop_flag=1 时，video_thread_ 完成了当前函数，即

```
ProcessFrame 
```

在**ProcessFrame**完成之前，通过**发出 stopProcess()在****vi​​deo_thread_**上调用 quit 。

 **但是，quit 和 terminate 不同，terminate 可以随时退出线程（但并不安全），quit 与事件循环一起工作，如果线程没有事件循环，则退出无效。

我猜在 qthread 执行事件循环中的下一个事件之前，它会检查一些标志，可以通过退出设置，如果标志由退出设置，那么它不会执行事件循环中的下一个事件。或者也可以是在eventloop中插入了一个quit事件，eventloop中的下一个事件会被退出。

在**stop_flag = 1**之后，你调用**了 video_thread_->wait**，这将阻止 video_thread_ 执行 eventloop 中的下一个事件，因此在超时之前退出不会生效，但是下一行打印“未完成？！！！ " 立即执行。**如果您调用currentThread()->Sleep(some_enough_time)**而不是调用 video_thread->wait，那么video_thread_将有时间执行下一个事件并退出。

您可以阅读 QThread 的 Qt 文档，wait 与 terminate 一起用于同步终止线程。

=============================== 新代码================= ================

当你这样做时：

```
myObj->connect(myThread, SIGNAL(started()), SLOT(dowork())); 
```

信号源是myThread，slot也属于myThread，因为对象“myThread”是在主线程中创建的，所以它作为一个对象存在于主线程中。你可以调用 myThread->thread() 来查看，它会返回主线程而不是新线程。

但是，started 信号是从新线程即myThread 所代表的线程发出的，因此连接是一个Qt::QueuedConnection。dowork() 发布在主线程的事件队列中，只有在执行主线程事件循环的 a.exec() 之后才会执行。

其他 2 个连接调用也发生了同样的事情，所有的插槽都将在主线程的事件循环中执行。

**首先**在调用 myThread->start 时从新线程发出 start，dowork 被发布到主线程的事件队列中。

在你调用 a.exec(); 之前什么都没有发生。所以程序将继续执行 cin 然后将 stop 设置为 true，然后打印“线程仍在运行？！！”。

**其次**当调用a.exec()时，dowork在主线程中执行，并打印“start work”。什么都不做，因为停止标志已经为真，并且从主线程发出完成信号，打印“完成工作”；

**第三**步finishwork发出的最后一步，直接调用quit slot。然而，在新线程真正退出之前，主线程已经完成了事件队列，因为没有更多的事件被发布到主线程。应用程序退出而不等待 quit() 生效。

要测试这是真的，不要修改任何代码，只需在后面添加

```
emit finishWork();
currentThread()->sleep(1000); 
```

您将看到“线程已完成！” 打印出来，因为这为新线程发出finished()腾出时间，并且onfinishThread()将被添加到主线程的事件队列中。

顺便说一句，您使用线程的方式看起来像 java 风格，这不是标准的 qt 方式。您可以在使用 qt 线程之前阅读[此内容。](http://doc.qt.digia.com/qt/thread-basics.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T06:38:02.953

这不是调度问题。

您在代码中执行的操作如下所示：

1.  创建一个线程。
2.  **然后这个线程发出一个它开始的信号，运行 slot dowork()**
3.  开始一个线程。
4.  等待用户输入
5.  echo 关于线程正在运行
6.  **执行事件循环**

在第 3 点，线程已经在运行并发出信号。因为 myObj 是在主线程中创建的，并且没有移动到任何其他线程（在那里处理事件），所以您的线程现在不做任何其他事情，而只是旋转事件循环。同时，告诉您要运行 myObj 的 dowork() 的事件发布在**主线程**上。最后到了第 6 步，你开始执行它的事件循环，它首先找到的是需要在 myObj 上调用 dowork() 的事件。

为了让您清楚 Qt 线程和信号槽连接是如何工作的，我建议您阅读[Qt 博客上的这篇文章](http://blog.qt.digia.com/blog/2010/06/17/youre-doing-it-wrong/)。

简单地修复它，您可以将对象 myObj 移动到您不想运行的线程。

但要做到这一点，我敢打赌，你真正想要的是继承**QRunnable**并（重新）实现它的 run 方法来做你在 QThread 中不需要的东西，这样线程就可以完成它的工作，而不是正确完成，所以你可以加入它。或者根据您的目标，使用[QtConcurrent::run(aFunction)可能会更好](http://qt-project.org/doc/qt-4.8/qtconcurrentrun.html)**

# c# - 从 C# 列表中的字符串部分创建逗号分隔的字符串

> ID：13966285
> 
> 赞同：1
> 
> 时间：2012-12-20T06:08:21.997
> 
> 标签：c#

我有一个 C# 列表，我想创建一个逗号分隔的字符串。我在 SO 上找到了其他解决这个问题的答案，但我的特殊情况是我只想使用 List 中的一部分值来创建字符串。

如果我的列表包含这些值：

“Foo” “酒吧” “汽车”

我想创建一个字符串

```
Foo, Bar and Car. 
```

我可以使用这段代码：

```
string.Format("{0} and {1}.", 
              string.Join(", ", myList.Take(myList.Count - 1)), 
              myList.Last()); 
```

但是，我的列表实际上是由 JSON 值组成的，如下所示

```
{ Name = "Foo" }
{ Name = "Bar" }
{ Name = "Car" } 
```

所以上面的代码导致：

```
{ Name = "Foo" }, { Name = "Bar" } and { Name = "Car" }. 
```

我将如何构造字符串以便只使用列表中的`Foo`,`Bar`和`Car`值？

**更新**

感谢@StevePy，这就是我最终得到的结果：

```
string.Format("{0} and {1}.", 
              string.Join(", ", myList.Select(x => x.Name).ToList().Take(myList.Count - 1)), 
              myList.Select(x => x.Name).ToList().Last()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:21:24.503

如果您需要对字符串进行操作，只需使用例如[String.IndexOf](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx)和[String.LastIndexOf](http://msdn.microsoft.com/en-us/library/0w96zd3d.aspx)方法获取每个字符串的必要部分：

```
List<string> myList = new List<string> { 
    "{ Name = \"Foo\" }",
    "{ Name = \"Bar\" }",
    "{ Name = \"Car\" }"
};

var temp = myList.Select(x =>
    {
        int index = x.IndexOf("\"") + 1;
        return x.Substring(index, x.LastIndexOf("\"") - index);
    })
    .ToList();

string result = string.Format("{0} and {1}.",
                              string.Join(", ", temp.Take(myList.Count - 1)),
                              temp.Last()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:12:05.830

Linq 应该有帮助。

```
var nameList = myList.Select(x=>x.Name).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:14:58.220

您可以使用`JsonConvert.toString`来获取列表项的值，或者如果您使用 json 序列化，则可以使用 JsonConvert.Deserialization

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:36:35.750

我建立了一个方法可以为你做到这一点：

```
static string ConvertToMyStyle(List<string> input)
{
    string result = "";

    foreach(string item in input)
    {
        if(input.IndexOf(item) != input.ToArray().Length-1)
            result += item + ", ";
        else
            result += "and " + item + ".";
    }
    return result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-22T21:02:42.440

这处理单项情况

```
protected string FormatWithOxfordCommas(List<string> reasons)
        {
            string result = "";
            if (reasons.Count == 1)
                result += reasons[0];
            else
            {
                foreach (string item in reasons)
                {
                    if (reasons.IndexOf(item) != reasons.Count - 1)
                        result += item + ", ";
                    else
                        result += "and " + item + ".";
                }
            }
            return result;
        } 
```

# visual-studio - 不支持“地理”类型的 EntityKey 属性。实体框架 5，VS 2012 – 数据库优先

> ID：13966290
> 
> 赞同：0
> 
> 时间：2012-12-20T06:08:59.420
> 
> 标签：visual-studio, entity-framework, spatial

创建了一个 SQL Server 2008 数据库和表，其属性名为“坐标”，类型为“地理”。在 VS 2012 中创建了一个项目，添加了对 Microsoft.SqlServer.Types 和 EF V5 的引用。然后，使用 ADO.NET 实体数据模型向导生成 edmx。当我在 VS 2012 中编译时，出现以下错误：

```
Error   4   Error 129: The property 'Coordinates' in EntityType 'DBModel.GeoDestination' is not valid. EntityKey properties that are of type 'Geography' are currently not supported. 
```

Web 上的许多示例都是“代码优先”示例，它们在其 c# 代码中使用“DbGeography”类型作为类型，并从代码生成数据库，从而生成具有“geography”类型属性的表。

我如何先做这个数据库并修复类型？使用“表映射”视图时，“DBGeography”似乎不在类型的下拉列表中。

使用 EF 5、NET 4.5、VS 2012 SP 1、SQL Server 类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:48:02.233

我想通了。看起来像向导中的错误。如果 SQL 中的表没有主键，向导会在生成的 EF 模型中自动生成一个键。它看起来是随机的，有时会生成一个密钥，有时会生成多个属性密钥。Geography 数据类型不能是键。它不是桌子上的钥匙，但巫师把它做成了钥匙。

希望此回复对其他人有所帮助。

# ios - 在 UICollectionView 中实现按钮点击

> ID：13966291
> 
> 赞同：5
> 
> 时间：2012-12-20T06:09:18.093
> 
> 标签：ios, ipad, delegates, uicollectionview, uicollectionviewcell

有没有办法可以从 a 中的按钮获取按钮单击事件`UICollectionViewCell`？我用笔尖填充集合视图，单元格有按钮，但它的动作没有被调用。我认为问题在于被调用的代表。我怎样才能解决这个问题？

我是如何创建的：

1.  添加了一个空笔尖，创建了一个集合视图单元格
2.  添加了一个 .h 和 .m 文件，并将单元笔尖的文件所有者作为创建的类
3.  在课堂上写了一个动作。
4.  将按钮连接到动作

有没有办法让我采取行动？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-13T12:01:17.417

It is important that you create the cell in the Nib by dragging a "Collection View Cell" from the Objects panel. If you use an UIView and just change the class for this cell in the Identity Inspector then the action will not work.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-20T07:40:19.320

像这样添加按钮操作：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    CollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"CellId" forIndexPath:[indexPath row]]; 

    [[cell myButton] addTarget:self action:@selector(myClickEvent:event:) forControlEvents:UIControlEventTouchUpInside];

    return cell;

}

- (IBAction)myClickEvent:(id)sender event:(id)event {

    NSSet *touches = [event allTouches];

    UITouch *touch = [touches anyObject];

    CGPoint currentTouchPosition = [touch locationInView:_myCollectionArray];

    NSIndexPath *indexPath = [_myCollectionArray indexPathForItemAtPoint: currentTouchPosition];

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-31T06:30:33.137

这是 swift 3.1 代码

```
// make a cell for each cell index path
func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {

    // get a reference to our storyboard cell
    let cell = collectionView.dequeueReusableCell(withReuseIdentifier: reuseIdentifier, for: indexPath as IndexPath) as! BlueCircleViewCell

    // Use the outlet in our custom class to get a reference to the UILabel in the cell
    cell.bgImage.image = UIImage(named: items[indexPath.row])
    cell.addButton.addTarget(self, action: #selector(addCircle(_:)), for: .touchUpInside)

//        cell.backgroundColor = UIColor.cyan // make cell more visible in our example project

    return cell
}

func addCircle(_ sender:UIButton){
    //CGPoint buttonPosition = [sender convertPoint:CGPointZero toView:self.tableView];
    let buttonPosition:CGPoint = sender.convert(.zero, to: self.collectionView)
    let indexPath:IndexPath = self.collectionView.indexPathForItem(at: buttonPosition)!
    onAddBlueCircle(indexPath: indexPath)
} 
```

# linux - 如何在shell中动态添加和使用变量

> ID：13966292
> 
> 赞同：3
> 
> 时间：2012-12-20T06:09:33.587
> 
> 标签：linux, shell

例如，我有一个文件如下所示：

```
abc
def
ghi 
```

现在，我想使用一个 Linux shell 脚本来根据这个文件设置一些变量。我需要设置以下变量，例如：

```
export abc=abc111
export def=def111
export ghi=ghi111 
```

如您所见，变量名称也是从列表文件中检索的。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T06:12:26.173

```
while read var; do
    export $var=${var}111
done < vars.txt 
```

# extjs4.1 - extjs 4.1 如何重置项目选择器

> ID：13966299
> 
> 赞同：0
> 
> 时间：2012-12-20T06:10:24.703
> 
> 标签：extjs4.1

我正在使用 extjs 4.1.1a 开发一些应用程序。

我有一个由两个组合框和一个项目选择器组成的表单。

根据在第一个组合框中选择的值，itemselector 将从数据库中加载其数据。这工作正常。

我的问题是，如果我重新选择第一个组合框，新数据将显示在 itemselector 中，以及以前显示在 itemselector 中的数据。也就是说，以前显示在 itemselector 中的数据将保留在那里。

例如：名称“test1”由 ids 801,2088,5000 组成。在第一个组合框 itemselector 中选择 test1 时必须显示如下输出。

![](../Images/08422037665c971799e53eefea991311.png)

如果“test2”由 ids 6090,5040 组成。在第一个组合框 itemselector 中选择 test2 时必须显示如下输出。 ![](../Images/58bd4e733434917ae33608be00ee27df.png)

问题是。如果我第一次从 firstcombobox 中选择“test1”，输出将按预期进行。如果我从 firstcombobox 重新选择“test2”，输出将如下所示。

![](../Images/ff0adcb6ecc1bb7974d0fa6e4e91e675.png)

如您所见，显示的先前数据（以红色矩形标记）仍保留在那里，并显示新数据（以绿色矩形标记）。我希望每次重新选择第一个组合框，在 itemselector 上打印新数据之前删除 itemselector 中先前显示的数据。如何为第一个组合框的每次重新选择重置项目选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T13:46:04.550

您应该通过该命令从`store`中删除所有项目。之后你应该的.`itemselector``removeAll``load``store``itemselector`

```
itemselector.store.removeAll();
itemselector.store.load(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-22T13:30:12.173

上面的任何解决方案都可以解决我的问题。我从 Sencha 论坛找到了解决方案。 [https://www.sencha.com/forum/showthread.php?142276-closed-Ext-JS-4.0.2a-itemselector-not-reloading-the-store](https://www.sencha.com/forum/showthread.php?142276-closed-Ext-JS-4.0.2a-itemselector-not-reloading-the-store)

在 itemselector.js 文件中，更改下面标记的行。

```
populateFromStore: function(store) {
    var fromStore = this.fromField.store;

    // Flag set when the fromStore has been loaded
    this.fromStorePopulated = true;

    // THIS LINE BELOW MUST BE CHANGED!!!!!!!!!!!!
    fromStore.loadData(store.getRange()); //fromStore.add(store.getRange()); 

    // setValue waits for the from Store to be loaded
    fromStore.fireEvent('load', fromStore);
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:59:58.883

你需要插入...

```
this.reset(); 
```

在插入数据的函数的头部。

举个例子...

```
Ext.override( Ext.ux.ItemSelector, {
    setValue: function(val) {
        this.reset();
        if (!val) return;
        val = val instanceof Array ? val : val.split(this.delimiter);
        var rec, i, id;
        for (i = 0; i < val.length; i++) {
            var vf = this.fromMultiselect.valueField;
            id = val[i];
            idx = this.toMultiselect.view.store.findBy(function(record){
                return record.data[vf] == id;
            });
            if (idx != -1) continue;            
            idx = this.fromMultiselect.view.store.findBy(function(record){
                return record.data[vf] == id;
            });
            rec = this.fromMultiselect.view.store.getAt(idx);
            if (rec) {
                this.toMultiselect.view.store.add(rec);
                this.fromMultiselect.view.store.remove(rec);
            }
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T14:20:52.323

你明白了吗？当您通过参数存储加载后选择项目选择器的组合框第一个 stoe 为空时

例如

`store.load(null)`, `store.proxey.url='jso.php?id='+combobox.getrawvalue(),` `store.load();`

就像那样，所以当你在你的组合框中选择一个值时，你在上面的代码中使用了一个监听器来连接你的组合框，在你将一些值传递给 json.php 之后，在组合框中选择你的某个值，该时间第一次存储为空然后使用响应存储负载，以便删除旧数据并在该存储中加载新数据

如果你发布你的代码，我会给出正确的代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-16T14:52:06.090

我遇到了同样的问题，最后我决定修改 extjs 源代码，不认为这是一个大问题，因为 extjs 本身在文件开头就说

> 请注意，此控件很可能仍作为示例，而不是核心 Ext 表单控件。但是，该 API 将在未来的版本中发生变化，因此目前不应被视为最终的稳定 API。

基于此，正如 jstricker 猜测的那样（遗憾的是，我没有阅读并花了一段时间才得出相同的结论），在 fromStore.add() 之前添加 fromStore.removeAll() 可以解决问题。

在问题之外（但我认为它也可能很有趣），此外，我还在 MultiSelect 配置中添加了 listConfig: me.listConfig（在 createList 中），这样就可以格式化每个项目的附加选项（例如图像，等）在“itemselector”中设置选项 listConfig，如（不现实的）文档中所述。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-17T22:18:20.957

我在 ExtJS 4.2.1 中遇到了同样的问题。我通过调用`reload()`数据存储，然后在数据存储回调`setValue()`中的项目选择器上使用一个空字符串来使其工作。`reload()`

```
Ext.create("Ext.form.field.ComboBox", {
    // Other properties removed for brevity
    listeners: {
        change: function(field, newValue, oldValue, eOpts) {
            Ext.getStore("ExampleStore").reload({
                callback: function() {
                    Ext.getCmp("ExampleItemSelector").setValue("");
                }
            });
        }
    }
});

Ext.create("Ext.data.Store", {
    storeId: "ExampleStore",
    // Other properties removed for brevity
});

Ext.create("Ext.form.FormPanel", {
    // Other properties removed for brevity
    items:[{
        xtype: "itemselector",
        id: "ExampleItemSelector",
        // Other properties removed for brevity
    }]
}); 
```

对于任何好奇的人，我相当确信项目选择器的`populateFromStore()`功能中存在错误。调用该函数时，它会盲目地将绑定存储 ( `store`) 中的所有值添加到内部存储 ( `fromStore`)。我怀疑应该在调用 to`fromStore.removeAll()`之前调用 to `fromStore.add()`。这是来自 ItemSelector.js 的相关代码。

```
populateFromStore: function(store) {
    var fromStore = this.fromField.store;

    // Flag set when the fromStore has been loaded
    this.fromStorePopulated = true;

    fromStore.add(store.getRange());

    // setValue waits for the from Store to be loaded
    fromStore.fireEvent('load', fromStore);
}, 
```

**编辑 2013 年 12 月 18 日**

如果您在项目选择器上配置了任何回调事件（例如`change`），您可能希望在调用 时暂时禁用这些事件`setValue("")`。例如：

```
var selector = Ext.getCmp("ExampleItemSelector");
selector.suspendEvents();
selector.setValue("");
selector.resumeEvents(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-07T07:39:14.487

需要重置其中使用的存储`ItemSelector`，可以通过设置如下所示的空对象来完成。还需要调用组件`clearValue()`的方法`ItemSelector`。

```
store.setData({});
ItemSelectorComponent.clearValue(); 
```

# java - string.equals 不适合我

> ID：13966302
> 
> 赞同：5
> 
> 时间：2012-12-20T06:10:30.727
> 
> 标签：java, html, string, parsing, compare

这是代码的有用部分：

```
java.util.List<Element> elems = src.getAllElements();
Iterator it = elems.iterator();
Element el;
String key,value,date="",place="";
String [] data;
int k=0;
Segment content;
String contentstr;
String classname;

while(it.hasNext()){

    el = (Element)it.next();

    if(el.getName().equals("span"))
    {

            classname=el.getAttributeValue("class");
        if(classname.equals("edit_body"))
        {
            //java.util.List<Element> elemsinner = el.getChildElements();
            //Iterator itinner = elemsinner.iterator();

            content=el.getContent();

            contentstr=content.toString();

            if(true)
            {

                System.out.println("Done!");

                System.out.println(classname);

                System.out.println(contentstr);

            }
       }
    }

} 
```

没有输出。但是，如果我删除`if(classname.equals("edit_body"))`它确实打印的条件（在其中一次迭代中）：

```
Done!
edit_body
&quot;I honestly think it is better to be a failure at something you love than to be a success at something you hate.&quot; 
```

无法获取错误部分...帮助！

我正在使用外部 java 库 BTW 进行 html 解析。

顺便说一句，输出开始时有两个错误，在两种情况下都存在，有或没有 if 条件：

```
Dec 20, 2012 11:53:11 AM net.htmlparser.jericho.LoggerProviderJava$JavaLogger error SEVERE: EndTag br at (r1992,c60,p94048) not recognised as type '/normal' because its name and closing delimiter are separated by characters other than white space 

Dec 20, 2012 11:53:11 AM net.htmlparser.jericho.LoggerProviderJava$JavaLogger error SEVERE: Encountered possible EndTag at (r1992,c60,p94048) whose content does not match a registered EndTagType 
```

希望不会导致错误

好的伙计们，请有人解释我！"edit_body".equals(el.getAttributeValue("class")) 工作！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-05-30T10:53:27.557

我现在遇到了完全相同的问题。

我成功地通过使用来解决它：`SomeStringVar.replaceAll("\\P{Print}","");`。

此命令删除变体中的所有 Unicode 字符（您看不到的字符 - 字符串看起来相等，即使它们并不真正相等）。

我在均衡中需要的每个变体上都使用这个命令，它也适用于我。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-20T06:14:08.057

看起来您*的*. _ *_* *_*`classname`

尝试使用这个： -

```
if(classname.trim().equals("edit_body")) 
```

这将在末尾修剪任何这些空格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T08:08:02.953

首先，`String.equals()`不坏。它适用于*数百万*其他程序/程序员。这不是您的问题的原因（除非您或某人故意修改......并破坏了您的 Java 安装......）

那么为什么两个明显相等的字符串比较不相等呢？

1.  字符串上可能有前导或尾随空白字符。
2.  可能有嵌入的非打印字符。
3.  当您使用典型字体显示它们时，可能会有一对 Unicode 字符*看起来*相同，但实际上并不相同。例如，希腊代码页包含看起来像拉丁元音的字符......但实际上是不同的代码，因此不相等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T08:27:39.057

将代码更改为：

```
classname="edit_body"; //<- hardcode 

if(classname.equals("edit_body")) 
```

如果现在代码进入if语句，那么在使用原来的"classname=el.getAttributeValue("class");"时，字符串内容显然有一些不同。在这种情况下，循环遍历各个字符并比较它们以找出差异。

如果代码仍然没有进入 if 语句，要么您的代码没有编译并且您正在运行旧代码，或者您的 java 安装已损坏；-)

或者。

如果java类似于.net（我不知道java）是“el.getAttributeValue”键入为字符串吗？如果它被键入为对象，那么 if 语句将不会进入，因为它们是同一字符串的两个不同实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-03T07:39:09.553

equals() 是 String 类的方法。因此，它适用于双引号。

```
 if(someString.equals("something")) ✓
 if(someString.equals('something')) × 
```

# java - ExecutorService 关闭钩子

> ID：13966303
> 
> 赞同：8
> 
> 时间：2012-12-20T06:10:32.603
> 
> 标签：java, multithreading, concurrency, threadpool

我有带有以下线程代码的控制台应用程序。似乎当我***按 Ctrl+C***终止时它没有检测到控制键，我必须关闭命令提示符窗口。

***任何线索为什么它没有检测到 ctrl+c？***

```
 final ExecutorService executor = Executors.newFixedThreadPool(threadPoolSize);
        final long SHUTDOWN_TIME = TimeUnit.SECONDS.toMillis(10);
        for (int i = 0; i < threadPoolSize; i++) {
            executor.submit(new MessageWorker(topicSubscriber));
        }
        //--
        //Add JVM shutdown hook
        Runtime.getRuntime().addShutdownHook(new Thread() {
            /**
             * @see java.lang.Thread#run()
             */
            @Override
            public void run() {
                executor.shutdown();
                try {
                    if (!executor.awaitTermination(SHUTDOWN_TIME, TimeUnit.SECONDS)) {
                        log.warn("Executor did not terminate in the specified time.");
                        List<Runnable> droppedTasks = executor.shutdownNow();
                        log.warn("Executor was abruptly shut down. " + droppedTasks.size() + " tasks will not be executed.");
                    }
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T06:30:12.147

只是阅读代码的猜测，但是，看起来您的关闭时间设置为 10,000 秒，所以我并不惊讶您认为它没有退出！

```
 final long SHUTDOWN_TIME = TimeUnit.SECONDS.toMillis(10);
    ...
    if (!executor.awaitTermination(SHUTDOWN_TIME, TimeUnit.SECONDS)) { 
```

# php - 如果表单出现错误，则在提交后将值保留在 php 表单上

> ID：13966306
> 
> 赞同：0
> 
> 时间：2012-12-20T06:10:46.530
> 
> 标签：php, jquery

我使用此代码在下拉列表中选择多个值，其中包含一些 jquery

```
<script type="text/javascript">           
    $(document).ready(function() {
        $("#s1").dropdownchecklist();
        $("#s2").dropdownchecklist( {icon: {}, width: 150 } );
        $("#s3").dropdownchecklist( { width: 150 } );
        $("#s4").dropdownchecklist( { maxDropHeight: 150 } );
        $("#s5").dropdownchecklist( 
            { firstItemChecksAll: true, explicitClose: '...close' } );
        $("#s6").dropdownchecklist();
        $("#s7").dropdownchecklist();
        $("#s8").dropdownchecklist( { emptyText: "Please Select...", width: 150 } );
        $("#s9").dropdownchecklist( { textFormatFunction: function(options) {
            var selectedOptions = options.filter(":selected");
            var countOfSelected = selectedOptions.size();
            switch(countOfSelected) {
                case 0: return "<i>Nobody<i>";
                case 1: return selectedOptions.text();
                case options.size(): return "<b>Everybody</b>";
                default: return countOfSelected + " People";
            }
        } 
    });
    $("#pcity").dropdownchecklist({ emptyText: "Please select ...", width: 500 },{ maxDropHeight: 150 }, { forceMultiple: true
, onComplete: function(selector) {
    var values1 = "";
    for( i=0; i < selector.options.length; i++ ) {
        if (selector.options[i].selected && (selector.options[i].value != "")) {
            if ( values1 != "" ) values1 += ",";
                values1 += selector.options[i].value;               
        }
    }
    alert( values1 );
} 
, onItemClick: function(checkbox, selector){
    var justChecked = checkbox.prop("checked");
    var checkCount = (justChecked) ? 1 : -1;
    for( i = 0; i < selector.options.length; i++ ){
        if ( selector.options[i].selected ) checkCount += 1;
    }
    if ( checkCount > 3 ) {
        alert( "Limit is 3" );
        throw "too many";
    }
}
            }); 
```

我有这个城市下拉菜单的代码，但是当提交后表单上出现一些错误时，值不会保留在表单上，​​但是如果出现一些错误，我没有使用上述脚本值的其他下拉菜单上的相同代码会在提交后保留在表单上，请有一些建议，谢谢。

```
<tr>
    <td> 
        <select name="pcity[]" id="pcity" multiple="multiple" style="display: none">
        <?php
            $pcitylist =  array(
        'Andaman and Nicobar' => array(
        'North and Middle Andaman', 'South Andaman', 'Nicobar'
    ),
    'Andhra Pradesh' => array(
        'Adilabad', 'Anantapur', 'Chittoor', 'East Godavari', 'Guntur', 'Hyderabad', 'Kadapa', 'Karimnagar', 'Khammam', 'Krishna', 'Kurnool', 'Mahbubnagar', 'Medak', 'Nalgonda', 'Nellore', 'Nizamabad', 'Prakasam', 'Rangareddi', 'Srikakulam', 'Vishakhapatnam', 'Vizianagaram', 'Warangal', 'West Godavari'
    ),
    'Arunachal Pradesh' => array(
        'Anjaw', 'Changlang', 'East Kameng', 'Lohit', 'Lower Subansiri', 'Papum Pare', 'Tirap', 'Dibang Valley', 'Upper Subansiri', 'West Kameng'
    ),
    );

    foreach ($pcitylist as $key => $pcitylist1)
    {
      echo '<optgroup label="'.$key.'">';
      foreach ($pcitylist1 as $finalCity) {
          echo '<option value="' . $finalCity . '"' . (isset($_POST['pcity']) && $_POST['pcity'] == $finalCity ? ' selected' : '') . '>' . $finalCity . '</option>';
      }   
      echo '</optgroup>';
} 
?>
</select>

    </td>
</tr> 
```

# javascript - 使用 JavaScript 读取网页

> ID：13966307
> 
> 赞同：0
> 
> 时间：2012-12-20T06:10:47.403
> 
> 标签：javascript

我可以使用 JavaScript 或任何其他非服务器脚本来阅读网页吗？我希望我的本地 HTML 文件（带有 JavaScript 代码）读取托管在 Web 服务器上的内部网页，并获取其完整源代码。

我尝试了 XMLHttpRequest，但我面临跨域问题。有什么解决办法吗？或者我可以使用的任何其他非服务器脚本？我已经有一些我将要使用的 JavaScript 函数，因此希望将您建议的解决方案和我现有的 JavaScript 代码一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:32:06.293

请参考本文档中的示例。 [http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:18:29.933

这是由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，所以要从其他服务器获取数据，我们必须使用[JSONP](http://en.wikipedia.org/wiki/JSONP)

# ruby-on-rails-3 - 模型“update_attributes”返回 false，但 model.errors.messages.inspect 返回 {}

> ID：13966319
> 
> 赞同：2
> 
> 时间：2012-12-20T06:11:51.517
> 
> 标签：ruby-on-rails-3

我正在研究返回 false 的模型“update_attributes”，但 model.errors.messages.inspect 返回 {}。没有错误，只是事务回滚。以下是日志：

```
===========>>>>>>>>>>> @user.errors.messages.inspect ======
{}

Started PUT "/authentify/users/4" for 127.0.0.1 at 2012-12-20 00:01:57 -0600
Processing by Authentify::UsersController#update as HTML
  Parameters: {"utf8"=>"√", "authenticity_token"=>"Y01zI3oQmccemTJvBnHmff04w4raAcBLwdQ2k69wKjM=", "user"=>{"name"=>"Janexx", "login"=>"amine4", "update_password_checkbox"=>"[FILTERED]", "status"=>"active", "user_levels_attributes"=>{"0"=>{"sys_user_group_id"=>"admin", "manager_id"=>"admin", "id"=>"4"}}}, "commit"=>"Save", "id"=>"4"}
  Authentify::User Load (0.0ms)  SELECT "authentify_users".* FROM "authentify_users" WHERE "authentify_users"."id" = ? LIMIT 1  [["id", 1]]
  Authentify::Session Load (0.0ms)  SELECT "authentify_sessions".* FROM "authentify_sessions" LIMIT 1
  CACHE (0.0ms)  SELECT "authentify_sessions".* FROM "authentify_sessions" LIMIT 1
  Authentify::User Load (0.0ms)  SELECT "authentify_users".* FROM "authentify_users" WHERE "authentify_users"."id" = ? LIMIT 1  [["id", "4"]]
   (0.0ms)  begin transaction
  Authentify::UserLevel Load (0.0ms)  SELECT "authentify_user_levels".* FROM "authentify_user_levels" WHERE "authentify_user_levels"."user_id" = 4 AND "authentify_user_levels"."id" IN (4)
   (1.0ms)  UPDATE "authentify_users" SET "name" = 'Janexx', "updated_at" = '2012-12-20 06:01:57.100454' WHERE "authentify_users"."id" = 4
   (3.0ms)  rollback transaction
{} 
```

# javascript - object.addEventListener 的 useCapture 参数的用途是什么？

> ID：13966330
> 
> 赞同：3
> 
> 时间：2012-12-20T06:12:33.703
> 
> 标签：javascript, internet-explorer, addeventlistener

我试图了解在 Internet Explorer 中添加 addEventListener 时的操作`true`或操作。`false`根据微软的说法是`useCapture`。如果我添加一个事件，例如：

```
element.addEventListener('click', function_name, true); 
```

它似乎没有改变任何东西，监听器仍然有效。谁能解释一下`useCapture`参数的用途？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T06:15:16.477

它是可选`useCapture`参数，用于指定要为其添加事件处理程序的事件阶段：

> 事件分两个阶段处理：捕获和冒泡。在捕获阶段，事件在被分派到对象层次结构中较低的事件目标之前被分派给父对象。在冒泡阶段，事件首先被分派给目标元素，然后是父元素。您可以为任一事件阶段注册事件处理程序。

**true** 为捕获阶段注册事件处理程序。

**false** 注册冒泡阶段的事件处理程序。

您可以在此处阅读 eventPhase 文档：http: [//msdn.microsoft.com/en-gb/library/ie/ff974944 (v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/ie/ff974944(v=vs.85).aspx)

编辑：

请阅读以下内容，通过清晰的示例描述通过冒泡和捕获定义的事件顺序。[http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

# android - 从单独的类调用 asynctask 时，进度对话框未显示在异步任务中

> ID：13966343
> 
> 赞同：1
> 
> 时间：2012-12-20T06:14:12.783
> 
> 标签：android, json

我发布了一个问题 [Progress Dialog is not displayed while getting data from different thread class](https://stackoverflow.com/questions/13947310/progress-dialog-is-not-displaying-while-getting-data-from-separate-thread-class) 但我没有得到适当的答案。我已经使用异步任务来显示进度对话框，但它没有显示。这是示例代码

```
public class JsonData extends AsyncTask<String, String, String> {
private ProgressDialog mProgressDialog;
Context context;

public JsonData(Context context) 
{
        this.context=context;
     mProgressDialog = new ProgressDialog(context);
     mProgressDialog.setMessage("Loading Please Wait.");
     mProgressDialog.setIndeterminate(false);
     mProgressDialog.setMax(100);
     mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
     mProgressDialog.setCancelable(true);
}

@Override
protected void onPreExecute() {
    super.onPreExecute();
    mProgressDialog.show();
}

@Override
protected String doInBackground(String... aurl) {
    String results="";
    try {
         int k=0;
         URL url1;
             url1 = new URL(aurl[0]);
             InputStream input=url1.openStream();
             BufferedInputStream bis=new BufferedInputStream(input);
             ByteArrayBuffer baf=new ByteArrayBuffer(1000);
             while((k=bis.read())!=-1)
             {
             baf.append((byte)k);
             }
             results=new String(baf.toByteArray());
    } catch (Exception e) {
        e.printStackTrace();
    }
    return results;
}

@Override
protected void onPostExecute(String jsondata) {
   mProgressDialog.dismiss();
}
} 
```

这是我调用异步任务的方法

```
 private void getRecordsByCount(final String data) {
        try {
            int color=Color.BLACK;
            tableLayoutGrid.removeAllViews();
            final String[] details = data.split("_");
            SimpleDateFormat df = new SimpleDateFormat("MM/dd/yyyy");
            String formattedDate = df.format(new Date());
            String url = ipaddress + "/GrantLeavesList?Companyid=" + user_info.get("CompanyId") + "&divisionid=" + details[3] + "&userid=" + user_info.get("userid") + "&roleid="
                    + user_info.get("RoleId") + "&Employeeid=" + user_info.get("EmployeeId") + "&leavetypeid=" + staticDetails.get(details[0]) + "&strStatus=" + staticDetails.get(details[1])
                    + "&type=" + staticDetails.get(details[2]) + "&Date=" + formattedDate;

            String url2=ipaddress + "/GrantLeavesChildList?Companyid=" + user_info.get("CompanyId") + "&divisionid=" + details[3] + "&userid=" + user_info.get("userid") + "&roleid="
                    + user_info.get("RoleId") + "&Employeeid=" + user_info.get("EmployeeId") + "&leavetypeid=" + staticDetails.get(details[0]) + "&strStatus=" + staticDetails.get(details[1])
                    + "&type=" + staticDetails.get(details[2]) + "&Date=" + formattedDate;

            JsonData jdata=new JsonData(context);
            jdata.execute(url,null,null);
            String jsonString=jdata.get();
            JSONObject obj=new JSONObject(jsonString);

            JsonData jdataChild=new JsonData(context);
            jdataChild.execute(url2,null,null);
            String jsonChildString=jdataChild.get();
            JSONObject objchild=new JSONObject(jsonChildString);

            btnGrantSubmit.setVisibility(View.GONE);
            if (obj != null) {

                leaveforwardcounts = obj.getJSONArray("Table1");
                leaveforwardchildcounts=objchild.getJSONArray("Table11");
                ScrollView scrollGrid = new ScrollView(this);
                TableRow datarow = new TableRow(this);
                datarow.setWeightSum(100);
                TableLayout table = new TableLayout(this);
                for (int i = 0; i < leaveforwardcounts.length(); i++) {
                    btnGrantSubmit.setVisibility(View.VISIBLE);
                    JSONObject record = leaveforwardcounts.getJSONObject(i);
                    String applicantname = record.getString("Applicant");
                    String toDate = record.getString("ToDate");
                    String noofdays = record.getString("NumberOfDays");
                    String LOP = record.getString("LOP");
                    if(LOP!=null && LOP.trim().length()!=0)
                    {
                        color=Color.RED;
                    }
                    final int id = i;
                    final Button gridbutton = new Button(this);
                    gridbutton.setText(status);
                    gridbutton.setTextColor(Color.BLACK);
                    gridbutton.setBackgroundResource(R.drawable.grdbutton_30x30);
                    gridbutton.setGravity(Gravity.CENTER);
                    gridbutton.setPadding(2, 0, 2, 0);
                    gridbutton.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            changeRadioButtonState(gridbutton, id, data);
                        }
                    });
                    gridbutton.setOnLongClickListener(new OnLongClickListener() {

                        @Override
                        public boolean onLongClick(View v) {
                            setSelection(gridbutton);
                            return true;
                        }
                    });

                    TextView tvApplicantName = new TextView(this);

                    TextView tvToDate = new TextView(this);
                    TextView tvNoOfDays = new TextView(this);
                    TextView empty = new TextView(this);
                    TextView empty2 = new TextView(this);
                    if (applicantname.trim().length() >= 18) {
                        applicantname = applicantname.substring(0, 18);
                    }

                    tvApplicantName.setText(applicantname);
                    tvApplicantName.setTypeface(font2);
                    tvApplicantName.setWidth(70);
                    tvApplicantName.setTextColor(color);
                    tvApplicantName.setPadding(5, 0, 0, 0);

                    tvToDate.setText(toDate);
                    tvToDate.setTypeface(font2);
                    tvNoOfDays.setText(noofdays);
                    tvNoOfDays.setTypeface(font2);
                    tvNoOfDays.setGravity(Gravity.RIGHT);

                    Button ivDetails = new Button(this);
                    ivDetails.setText(" ");
                    ivDetails.setPadding(2, 0, 2, 0);
                    ivDetails.setBackgroundResource(R.drawable.detailsbutton_30x30);
                    ivDetails.setGravity(Gravity.CENTER);

                    ivDetails.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            leaveDetails = new PopupWindow(showLeaveDetails(id, leaveforwardcounts,data,leaveforwardchildcounts), (int) (width * 0.8), height / 2, true);
                            leaveDetails.showAtLocation(mainlayout, Gravity.CENTER, 0, 0);
                        }
                    });

                    TableRow row = new TableRow(this);

                    row.setPadding(0, 3, 0, 3);
                    row.setWeightSum(100);
                    row.addView(tvApplicantName, new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, 55));
                    row.addView(tvNoOfDays, new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, 5));
                    row.addView(empty2, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 20));
                    row.addView(ivDetails, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 5));
                    row.addView(empty, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 5));
                    row.addView(gridbutton, new TableRow.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 5));
                    table.addView(row);
                }
                scrollGrid.addView(table);
                datarow.addView(scrollGrid, new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, 100));
                tableLayoutGrid.addView(datarow);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

我需要根据来自服务的数据构建页面。在我的应用程序中，大约有 20-30 个服务..如果我使用异步任务作为内部类，它工作得很好......但是如何重用我的代码......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:29:21.810

用户，我认为您需要更好地了解使用 AsyncTask 的原因以及它提供的回调/挂钩方法的用途。

首先是原因：如果你有一个长时间运行的任务，你不能在主线程（也称为 UI 线程）上运行它，因为你的应用程序最终会显示 ANR 错误。现在，如果您的长时间运行的任务不需要在屏幕上显示输出（完成后，进度报告等），您可以很好地将它放在工作线程中并让它自己运行（甚至可能将其委托给保证运行到完成的服务，但这是另一回事）。但是，很多时候情况并非如此，您希望根据长期运行任务的结果/进度来更新 UI。为此，您必须以某种方式分支一个线程并在那里完成工作，但是，由于您只能从主线程操作 UI，因此您必须在完成后将结果发回主线程。

这是我们转向 AsyncTask 及其钩子方法的地方。AsyncTask 实际上只是一个实用程序类，它可以帮助您完全按照上面的说明进行操作：将您的工作放在单独的线程上，并在完成时在主线程上获得回调（并且结果可用）。检查文档你会发现：

onPreExecute()：保证在主线程上运行。允许您在工作开始之前做一些事情（例如显示进度对话框）。

doInBackground()：保证在后台线程上运行。你在这里长期运行的东西。

onPostExecute()：保证在 doInBackground() 完成后在主线程上运行。你的任务结果现在可用，你可以用它做一些事情（比如把它放在屏幕上）。

回到您对 .get() 方法有问题的建议：由于您在 AsyncTask 上调用 .execute() 并在之后立即对结果进行 .get()-ing，因此后台作业可能尚未完成。相反，您应该做任何您想做的事情，从 AsyncTask 的 onPostExecute 中的 .get() 开始。因此，如果您的任务下载了一个图像，并且您想在它运行时向用户显示“正在下载”消息，您应该执行以下操作：

```
//pseudo code
void exampleButtonClicked() {
  new AsyncImageDownloader.execute();
}

class AsyncImageDownloader extends AsyncTask {
  onPreExecute() {
    show "downloading";
  }

  doInBackground() {
    downloadImg();
  }

  onPostExecute() {
    hide "downloading";
    put downloaded img on ImageView;
  }
}
//end of pseudo code 
```

希望这会有所帮助.. 不会编写你的答案，因为那样你就什么也学不到了 ;-)

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T17:46:30.997

您不需要为 postExecute 启动后台方法。正如@baske 所写，.get() 有问题 - 即使您使用的是 AsyncTask，它也会阻塞您的线程。尝试与链接问题相关的[问题](https://stackoverflow.com/questions/9273989/how-do-i-retrieve-the-data-from-asynctasks-doinbackground)，因此仅将*YourActivityClass*作为参数添加到 JsonData 的*构造器中*

```
public JsonData(YourActivityClass activity) 
{
    this.activity=activity;
    mProgressDialog = new ProgressDialog(activity);

}
protected void onPostExecute(String jsondata) {
    if (mProgressDialog != null || mProgressDialog.isShowing()){
        mProgressDialog.dismiss();
    }
    if(jsondata!=null) {
        activity.yourcallback(jsondata)
    }

} 
```

并在*YourActivityClass*中定义*yourcallback()*

 *```
private void yourcallback(String data) {
    jsonRecordsData=data;
    showRecordsFromJson();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:17:53.027

您只能从 UI 线程执行 UI 操作。尝试在 UI 线程上运行它。

```
runOnUiThread(new Runnable() {

        public void run() {
            mProgressDialog.show();
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T06:19:37.220

尝试以下操作：

```
 @Override
   protected void onPreExecute() 
  {

 mProgressDialog =ProgressDialog.show(GmailInbox.this, "", "Please Wait",true,false);
 super.onPreExecute();
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T06:25:03.000

您可以覆盖方法 onPreExecute() 并为此代码实现，

```
@Override
    protected void onPreExecute() {
        super.onPreExecute();
        ProgressDialog mProgressDialog = ProgressDialog.show(ActivityName.this, "Wait", "Loading....");
    } 
```

和 onPostExecute() 方法实现和关闭对话框，

```
@Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        if (mProgressDialog != null || mProgressDialog.isShowing())
            mProgressDialog.dismiss();
    } 
```*

# java - 可执行 jar 文件后项目不显示图标

> ID：13966347
> 
> 赞同：1
> 
> 时间：2012-12-20T06:14:28.003
> 
> 标签：java, swing

我正在运行 net beans 应用程序，当我通过 net beans 运行它时，它会正确显示图标……但是当我将其转换为可执行的 .exe 时，它​​没有显示图标……我做了很多研究来解决这个问题，但一切徒劳而去。这是我见过的动态获取图标的最佳方法....

```
 ImageIcon icon = new ImageIcon(Main.Class.getClass().getResource("/com/idoccsmain/icons/"+"add_icon.p‌​ng") 
```

通过这条线，我得到了所有不同的图标..任何人都可以为我建议任何解决方案....？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T01:13:02.933

感谢大家在您的帮助下回复我想出了这个...解决方案将图像放在 Src 文件夹中，例如 src/icons/ 和图标文件夹中。![在此处输入图像描述](../Images/3472b1e4052b61deda54b3b50e1ffd7f.png)

比在 netbeans 中使用这条线来让你的图像工作......

```
 ImageIcon icon = new ImageIcon(getClass().getResource("/icons/AnyIconName.png")); 
```

并确保为每个图标使用此行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:46:26.347

**对于 J2ME 应用程序**

![在此处输入图像描述](../Images/0b92dc1da6391defc78c88cdc0324b42.png)

仔细检查此图像，**右键单击**项目然后**属性**。

选择**应用程序描述符**，然后选择**MIDlet**

如果它在那里显示任何内容，例如在这张图片中显示，则相应地进行编辑。

**注意： -**在上述场景`src/myproject/`中存在。`icon``.java`

**===== 更新 =====**

**基于桌面的可执行jar**

然后使用，这段代码

```
this.getFrame().setIconImage(new imageIcon(getClass().getClassLoader().getResource("add_icon.p‌​ng"))); 
```

**注意：**此行仅在图像位于 jar 文件的根目录中时才有效。如果没有，您必须在字符串上指定文件夹：

```
getResource("yourfolder/add_icon.p‌​ng") 
```

您可能还对此[链接](http://jsmooth.sourceforge.net/features.php)感兴趣，以创建可执行的 java 文件并将图标与其关联。

# java - 我可以在同一条语句中执行查询和 sql 函数吗？

> ID：13966350
> 
> 赞同：0
> 
> 时间：2012-12-20T06:14:37.807
> 
> 标签：java, sql, postgresql

我有一个 PreparedStatement 和 CallableStatement：

```
String sql = "INSERT INTO parcels (cadastr,the_geom,status_id) VALUES(?,PolygonFromText(?, 4326),?)";
PreparedStatement stmt = ce.prepareStatement(sql);
stmt.setString(1, ts.getPackage().getSpecifyParcels().getExistParcel()
        .get(0).getCadastralNumber());
stmt.setString(2, WKT);
// stmt.setString(3, deleted);
stmt.setInt(3, status_id);
stmt.execute();
stmt.close();

java.sql.CallableStatement proc1 = ce
        .prepareCall("{call insert_into_wgs()}");
proc1.execute();
proc1.close(); 
```

`insert_into_wgs()`是否可以在一条语句中执行此查询和功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:23:48.537

使用返回关键字！

```
INSERT INTO parcels (cadastr,the_geom,status_id) 
VALUES (?, PolygonFromText(?, 4326), ?)
RETURNING insert_into_wgs() 
```

# wordpress - 论文框架wordpress中的分页

> ID：13966354
> 
> 赞同：0
> 
> 时间：2012-12-20T06:15:05.913
> 
> 标签：wordpress, wordpress-thesis-theme

我为 blogpost 创建一个简码并在 custom_function.php 中创建函数。这是我的代码

```
add_shortcode('blogPost',blogpost);
function blogpost(){ 
$paged = (get_query_var('page')) ? get_query_var('page') : 1;
$archive_project = new WP_query(); $archive_project->query('cat=9&posts_per_page=9&paged='.$paged ); ?>
while ($archive_project->have_posts()) : $archive_project->the_post();
// my display code.
endwhile; 
```

此运行成功，但我无法在其中创建分页。请在 wordpress 的论文框架中解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:19:56.933

你应该这样做：

[http://wordpress.org/support/topic/setup-plugin-wp-pagenavi-for-thesis-2x?replies=3](http://wordpress.org/support/topic/setup-plugin-wp-pagenavi-for-thesis-2x?replies=3)

您发布的示例是针对 blogspot 而不是 WordPress 或论文。

# javascript - 开发 chrome 扩展

> ID：13966363
> 
> 赞同：3
> 
> 时间：2012-12-20T06:16:26.817
> 
> 标签：javascript, html, google-chrome, browser-extension

我是开发 chrome 扩展的初学者，我在我的扩展链接到的**popup.html**文件中编写了以下代码`default_popup``browser_action`

```
 <!DOCTYPE html>
  <html>
  <head>
  <script  type="text/javascript" >
  function returnname()
  {
        var x=document.getElementById("name").value;

        alert(x);
  };
  </script>
  </head>
  <body>

  <p>Username : <input type="text"  id="name" height="20" width="50" />
  </p>
  <p>Password : <input type="password"  id="password" height="20" width="50" />
  </p>

  <input type="button" name="submit" onclick="returnname()" value="login"></input>
  <textarea id="return_name" rows="2" columns="20"></textarea>

  </body>
  </html> 
```

但是，每当我单击登录按钮时，javascript 没有像 in 那样运行，它不会显示任何警报消息。我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:49:59.223

您应该尝试绑定您的代码，并避免在您的 chrome 扩展上使用 onclick，因为它在最新的 chrome 版本上不再有效。

使用 addEventListener 或者如果你使用 jQuery。使用那里的点击

```
$().click(function(){

}); 
```

[http://www.html5rocks.com/en/tutorials/security/content-security-policy/#inline-code-considered-harmful](http://www.html5rocks.com/en/tutorials/security/content-security-policy/#inline-code-considered-harmful)

# uinavigationcontroller - ZUUIRevealController - 内存分配不断增加和缓慢 UIAlertView 和 UIActionsheet

> ID：13966366
> 
> 赞同：0
> 
> 时间：2012-12-20T06:16:43.587
> 
> 标签：uinavigationcontroller, ios6, uialertview, uiactionsheet, sidebar

我从必须使用 Reveal 控件的新 iOS 应用程序开始。所以我打算使用很棒的 ZUUIRevealController 库。我刚刚为 2-3 个屏幕创建了 UI。在其中一个屏幕中，我必须显示 UIAlertView 和 UIActionsheet。但我意识到**UIAlertView & UIActionsheet 显示非常缓慢**（它首先添加黑色叠加层，然后显示 UIAlertView/UIActionsheet，显示时会挂起某种警报视图。动画不流畅）。我没有添加任何编码逻辑，只是创建了 UI。我没有使用任何后台线程/dispatch_asyn()。所以不存在从后台线程更新 UI 的问题。所以我检查了内存泄漏和分配。我没有看到任何内存泄漏，但是当我显示菜单并推送新的视图控制器时，内存分配不断增加。当我弹出视图控制器时它不会减少。以下是截图：

1) 应用启动时 ![在此处输入图像描述](../Images/ea0c3241c8b402fa1f6bfebe7fff1b68.png)

2）一段时间后，当我推送新的视图控制器时，弹出视图控制器

![在此处输入图像描述](../Images/3cba0b1cc5c55280aa3d2c1d4a518760.png)

我知道每次从菜单中选择一行时，ZUUIRevealController 库都会创建视图控制器的新实例。所以我在 .h 文件中创建了视图控制器的实例变量，但我仍然有同样的问题。

这是我的代码

// AppDelegate.m // 在 SplashViewController 上，我决定是显示菜单还是登录屏幕

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.splashViewController = [[SplashViewController alloc]initWithNibName:@"SplashViewController" bundle:nil];
    self.window.rootViewController = self.splashViewController;

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    [self customizeUIControlsAppearance];
    return YES;
} 
```

// SplashViewController.m

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    BOOL isLoggedIn = YES;
    if(isLoggedIn){
        [self showMenuViewController];
    }
    else{
        [self showStartUpViewController];
    }
}

-(void)showStartUpViewController
{
    StartUpViewController *startUpViewController = [[StartUpViewController alloc]initWithNibName:@"StartUpViewController" bundle:nil];
    UINavigationController *navController=[[UINavigationController alloc] initWithRootViewController:startUpViewController];
    [self presentViewController:navController animated:NO completion:^{

    }];
}

-(void)showMenuViewController
{
    MenuViewController *menuViewController=[[MenuViewController alloc] init];
    CategoryViewController *categoryViewController=[[CategoryViewController alloc]initWithNibName:@"CategoryViewController" bundle:nil];
    categoryViewController.isViewControllerShownFromMenu = YES;
    UINavigationController *navController=[[UINavigationController alloc] initWithRootViewController:categoryViewController];
    RevealController *revealController=[[RevealController alloc] initWithFrontViewController:navController rearViewController:menuViewController];
    [self presentViewController:revealController animated:NO completion:^{

    }];
} 
```

// 菜单视图控制器.m

// SettingsViewController 和 NewsViewController 在 .h 文件中带有属性和合成器

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    RevealController *revealController = [self.parentViewController isKindOfClass:[RevealController class]] ? (RevealController *)self.parentViewController : nil;

    // Switch using Section Number
    switch (indexPath.section) {
        case OTHER_SECTION:
            switch (indexPath.row) {
                case NEWS:
                    [self showNewsViewControllerUsingRevealController:revealController];
                    break;
                case SETTINGS:
                    [self showSettingsViewControllerUsingRevealController:revealController];
                    break;
                default:
                    break;
            }
            break;
        default:
            break;
    }

}

#pragma mark - Show News & Settings View Controllers

-(void)showNewsViewControllerUsingRevealController:(RevealController*)revealController
{
    if ([revealController.frontViewController isKindOfClass:[UINavigationController class]] && ![((UINavigationController *)revealController.frontViewController).topViewController isKindOfClass:[NewsViewController class]])
    {
        if(!self.newsViewController)
            self.newsViewController = [[NewsViewController alloc] initWithNibName:@"NewsViewController" bundle:nil];
        self.newsViewController.isViewControllerShownFromMenu = YES;
        UINavigationController *navigationController= [[UINavigationController alloc] initWithRootViewController:self.newsViewController];

        [revealController setFrontViewController:navigationController animated:NO];
    }
    else
    {
        [revealController revealToggle:self];
    }
}

-(void)showSettingsViewControllerUsingRevealController:(RevealController*)revealController
{
    if ([revealController.frontViewController isKindOfClass:[UINavigationController class]] && ![((UINavigationController *)revealController.frontViewController).topViewController isKindOfClass:[SettingsViewController class]])
    {
        if(!self.settingsViewController)
            self.settingsViewController= [[SettingsViewController alloc] initWithNibName:@"SettingsViewController" bundle:nil];
        self.settingsViewController.isViewControllerShownFromMenu = YES;
        UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:self.settingsViewController];

        [revealController setFrontViewController:navigationController animated:NO];
    }
    else
    {
        [revealController revealToggle:self];
    }
} 
```

// 显示 UIAlertView 和 UIActionsheet 的代码

```
-(void)showAlertWithTitle:(NSString*)title andMessage:(NSString*)message
{
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:title message:message delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];
}

-(void)btnInviteTapped:(id)sender event:(UIEvent*)event
{
    UIActionSheet *actionSheet = [[UIActionSheet alloc]initWithTitle:NSLocalizedString(@"FRIENDS_VC:INVIT_ACTIONSHEET_TITLE", nil) delegate:self cancelButtonTitle:NSLocalizedString(@"FRIENDS_VC:ACTIONSHEET_CANCEL_BUTTON",nil) destructiveButtonTitle:nil otherButtonTitles:NSLocalizedString(@"FRIENDS_VC:ACTIONSHEET_SMS_BUTTON",nil),NSLocalizedString(@"FRIENDS_VC:ACTIONSHEET_EMAIL_BUTTON",nil), nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
    [actionSheet showInView:self.view];
} 
```

顺便说一下，我有**11 个菜单项**。

**我的登录和注册流程未嵌入在 MenuViewController 中。在 Login & REgsiter ， UIAlertView & UIActionSheet 显示顺利。**

知道这里出了什么问题吗？我在编码中犯了一些错误吗？为什么我的 UIAlertView 和 UIActionsheet 显示不流畅？任何形式的帮助表示赞赏。谢谢。

# mysql - AWS MySQL RDS 与 AWS DynamoDB

> ID：13966368
> 
> 赞同：121
> 
> 时间：2012-12-20T06:17:05.573
> 
> 标签：mysql, database, amazon-web-services, amazon-dynamodb

我已经使用 MySQL 一段时间了，我对它的结构和 SQL 查询等感到满意。

目前在 AWS 中构建一个新系统，我一直在研究 DynamoDB。目前我只知道一点。

一个比另一个好吗？

DynamoDB 的优势是什么？

从 MySQL 查询等到这个平面样式数据库的过渡是什么样的？

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2012-12-20T16:33:16.377

真的 DynamoDB 和 MySQL 是苹果和橘子。DynamoDB 是 NoSQL 存储层，而 MySQL 用于关系存储。您应该根据应用程序的实际需求来选择使用什么。事实上，某些应用程序可能会同时使用两者。

例如，如果您存储的数据不适用于关系模式（树结构、无模式 JSON 表示等），可以针对单个键或键/范围组合进行查找，那么 DynamoDB (或其他一些 NoSQL 存储）可能是您最好的选择。

如果您的数据有一个定义明确的模式，可以很好地适应关系结构，并且您需要以多种不同方式查询数据的灵活性（当然，根据需要添加索引），那么 RDS 可能是一个更好的解决方案.

将 DynamoDB 用作 NoSQL 存储的主要好处是，您可以在所需的任何级别上获得保证的读/写吞吐量，而不必担心管理集群数据存储。因此，如果您的应用程序每秒需要 1000 次读取/写入，您只需为该级别的吞吐量配置您的 DynamoDB 表，而不必真正担心底层基础设施。

RDS 具有不必担心基础架构本身的许多相同好处，但是如果您最终需要执行大量写入操作，以至于最大的实例大小将不再跟上，那么您就没有办法了选项（您可以使用只读副本水平扩展读取）。

更新说明：DynamoDb 现在支持全局二级索引，因此您现在可以对除散列或散列和范围键组合之外的数据字段执行优化查找。

* * *

## 回答 #2

> 赞同：170
> 
> 时间：2013-07-30T07:46:58.033

我们刚刚将所有 DynamoDB 表迁移到 RDS MySQL。

虽然将 DynamoDB 用于特定任务可能很有意义，但在 DynamoDB 之上构建新系统确实是个坏主意。最好的计划等，您总是需要数据库提供额外的灵活性。

以下是我们从 DynamoDB 迁移的原因：

1.  索引 - 如果不创建新表，就不可能即时更改或添加键。
2.  查询 - 查询数据极为有限。特别是如果您想查询非索引数据。连接当然是不可能的，因此您必须在代码/缓存层上管理复杂的数据关系。
3.  备份 - 与 RDS 的流畅备份相比，如此繁琐的备份过程令人失望
4.  GUI - 糟糕的用户体验，有限的搜索，没有乐趣。
5.  速度 - 与 RDS 相比，响应时间是有问题的。您会发现自己在为 RDS 的内部缓存解决问题的地方构建了复杂的缓存机制来补偿它。
6.  数据完整性——虽然流体数据结构的概念一开始听起来不错，但您的一些数据最好“一成不变”。当一个小错误试图破坏您的数据库时，强类型是一种祝福。使用 DynamoDB，一切皆有可能，而且确实发生了任何可能出错的事情。

我们现在使用 DynamoDB 作为某些系统的备份，我相信我们将来会将它用于特定的、明确定义的任务。这不是一个糟糕的数据库，它只是不是为您的核心系统提供 100% 服务的数据库。

就优势而言，我会说可扩展性和耐用性。它的扩展令人难以置信且透明，并且（某种程度上）总是向上。这些确实是很棒的功能，但它们并不能以任何方式弥补不利方面。

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2012-12-20T15:25:17.993

[您可以在此处](http://aws.amazon.com/dynamodb/#whentousedynamodb)阅读 AWS 关于它的说明。

简而言之，如果您主要有**Lookup**查询（而不是 Join 查询），DynamoDB（和其他 NoSQL DB）会更好。如果需要处理**大量数据**，在使用 MySQL（和其他 RDBMS）时会受到限制。

你不能重用你的 MySQL 查询和你的数据模式，但是如果你花精力学习 NoSQL，你会在你的工具箱中添加一个重要的工具。在许多情况下，DynamoDB 提供了最简单的解决方案。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-01-29T09:14:47.970

使用 DynamoDB 时，您还应该知道 DynamoDB 中的项目/记录限制为 400KB（请参阅[DynamoDB 限制](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Limits.html#limits-items)）。对于许多用例，这将不起作用。所以 DynamoDB 对少数事情有好处，但不是全部。许多其他 NoSQL 数据库也是如此。

# javascript - joomla 的 IE9 云缩放插件扩展上的图像放大镜问题

> ID：13966371
> 
> 赞同：0
> 
> 时间：2012-12-20T06:17:13.573
> 
> 标签：javascript, jquery, html, internet-explorer-9, zooming

我一直在使用 joomla 名称云缩放插件，它为我们的画廊提供了当您将鼠标悬停在此链接[http://intangible-logic.com/amclassic/en上的大图像上时创建图像放大效果的能力/products/road-wheels/road-tubeless](http://intangible-logic.com/amclassic/en/products/road-wheels/road-tubeless)它几乎可以在所有浏览器上完美运行，但在 IE9 中，问题是当您将光标移动到无法移动的图像右侧时，它无法查看完整图像当你向下移动它时，它的边缘也是一样的。我认为这是一个 javascript 问题，但不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T08:31:26.870

感谢 Christopher Pelayo 为我指明了正确的方向。但是，我认为最好改变

```
cw = (sImg.outerWidth() / zoomImage.width) * zoomDiv.width();
ch = (sImg.outerHeight() / zoomImage.height) * zoomDiv.height(); 
```

到

```
cw = (sImg.outerWidth() / zoomImage.width) * zoomDiv.outerWidth();
ch = (sImg.outerHeight() / zoomImage.height) * zoomDiv.outerHeight(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:45:12.133

跟踪代码几个小时后，我发现了问题：

在名为 cloud-zoom.1.0.2.js 的文件的第 277 行附近，您会发现以下代码：

```
cw = (sImg.outerWidth() / zoomImage.width) * zoomDiv.width(); 
```

zoomDiv.width() 的行返回了错误的值，但这仅发生在 IE9 浏览器上，所以我所做的是更新此代码以解决问题：

```
cw = (sImg.outerWidth() / zoomImage.width) * sImg.outerWidth(); 
```

不确定这将如何影响插件的工作方式，但它以某种方式解决了我们在 IE9 中的问题，并且也可以与所有其他浏览器完美配合。我希望这会对遇到与我相同的问题的任何人有所帮助。

# drupal - 使用 hook_page_alter 时，哪个 ['content'] 与 $page 相关

> ID：13966382
> 
> 赞同：1
> 
> 时间：2012-12-20T06:17:39.277
> 
> 标签：drupal, drupal-7

背景：
我正在构建一个网站，该网站使用网络表单从用户那里收集信息，使用收集的值来计算一些结果，然后使用结果从列表中选择建议的解决方案（或抱怨程序无法提供从提供的参数中回答）。

当用户点击提交时，计算通过 hook_webform_submission_presave() 完成，我将计算结果存储在 $_SESSION 数组的元素中（容量数字，用负值编码，用于上述“无法提供答案”的情况)，以及带有建议型号的字符串（如果有解决方案）。在 web 表单提交发生后，Drupal 将链接到一个新的（标准内容页面），（我原本打算）将由 hook_page_alter() 更改。所以，现在解决问题：

我曾计划让 hook_page_alter 去寻找纯内容页面的元素（字符串 xxxxxx），并用该字符串替换页面实际应该包含的内容（关于所选解决方案的注释，或要求用户或者再试一次，或者通过电子邮件或其他方式与我们联系）。

问题：
hook_page_alter() 接收到一个庞大的数组 $page 来操作。我正在操作的部分是 $page['content]，但即使在其中，我的触发字符串 ('xxxxxx') 也经常出现（21 次，当我转储 $page['content']['system_main ']['节点'][$nid]）。

更有趣的是（对我来说，无论如何）如果我用下面的代码替换字符串 'yyyyyy' 为 'xxxxxx' （是的，它很丑，但是已经很晚了，我在这里处于完全调试模式：

```
 $xx = $page['content']['system_main']['nodes'][5]['body']['#object'];
    $yy = $xx->body['und'][0]['value'];
    $zz = str_replace("xxxxxx", "yyyyyy", $yy);
    $xx->body['und'][0]['value'] = $zz;
    // dpr() below is like print_r, from the handy dandy Drupal 'devel' module
    dpr($page['content']['system_main']['nodes'][5]); 
```

查看 dpr() 的输出并查看实际渲染的内容很有趣 - 通过这个小小的替换，xxxxxx 的出现次数减少到 11，并且（更有趣！）我发现 yyyyyy 出现了 8 次。不幸的是，页面呈现不受我替换的影响 - xxxxxx 仍然存在。

我有兴趣找到的是 $page 数组元素中的哪一个是被渲染的 - 我想明天我会通过消除来弄清楚（当我找到它时会发布）。你们那里的巫师有什么提示吗？

另外，我应该考虑一种更“drupal-esque”的方式来完成这件事吗？

第二个问题更具有学术兴趣——我是如何更改 $page 数组这一部分的一个元素的： $xx->body['und'][0]['value'] = $zz; 被复制到我找到的其他 7 个地方？洞察力？注释 ？（请保持礼貌——我已经使用 Drupal 大约 6 个月了，但编写软件的时间比这要长得多）

提前致谢，

德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:54:54.263

要在标题中回答您的问题，它`$page`本身就是。 `hook_page_alter`有一个参数，该参数是其第一级的区域数组。因此，如果您将参数命名为 $page，`$page['content']`则内容区域是内容（不要与此内容混淆）部分。其他元素也是内容）。

`hook_page_alter`如果不查看您的整个功能，很难说出确切的问题是什么。

作为旁注，我建议不要在这种情况下使用该钩子。对我来说，听起来应该有一个更好（在服务器资源使用方面更便宜）的解决方案。Webform 是另一个 Drupal 表单，所以所有 hook_form_alter 的东西都适用于此。您可以将额外的提交处理程序添加到现有的网络表单，甚至是菜单注册表中的新页面（使用通配符保留一些路径或一组路径），因此对于您的案例 IMO 确实不需要使用`hook_page_alter`。

PS：听听[LullaBot 的这个播客](http://www.lullabot.com/blog/podcasts/moshe-weitzman-page-rendering-drupal-7)。

# android - Achartengine 动态图不起作用

> ID：13966385
> 
> 赞同：1
> 
> 时间：2012-12-20T06:18:02.653
> 
> 标签：android, achartengine

我正在使用 achartengine 在 android 中绘制动态时间序列。下面是我的代码：

```
 public class RandomActivity extends Activity {
private XYMultipleSeriesDataset eeg1 = new XYMultipleSeriesDataset();
private XYMultipleSeriesRenderer renderer_eeg1 = new XYMultipleSeriesRenderer();
private TimeSeries series1;
private GraphicalView view_eeg1;
private static int a;

public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

renderer_eeg1.setAxisTitleTextSize(16);
renderer_eeg1.setChartTitleTextSize(20);
renderer_eeg1.setLabelsTextSize(15);
renderer_eeg1.setLegendTextSize(15);
renderer_eeg1.setMargins(new int[] {20, 30, 15, 0});
renderer_eeg1.setAxesColor(Color.BLUE);
renderer_eeg1.setXTitle("Time");
renderer_eeg1.setChartTitle("eeg1");
final XYSeriesRenderer seriesrenderer1 = new XYSeriesRenderer();
seriesrenderer1.setColor(Color.YELLOW);
renderer_eeg1.addSeriesRenderer(seriesrenderer1); 
series1= new TimeSeries("eeg1");
eeg1.addSeries(series1);

Thread timer = new Thread(){
    public void run(){
        try{
            for(int r=0;r<=600;r++)
            {
                sleep(500);
                if(r%2==0){
                    a=1;
                    seriesrenderer1.setColor(Color.RED);
                }
                else{
                    a=-1;
                    seriesrenderer1.setColor(Color.YELLOW);
                }
                Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT+1:00"));
                Date dt = cal.getTime();
                series1.add(dt, a);
                if(r<=50){
                    renderer_eeg1.setXAxisMax(50);
                }
                else if(r>50){
                    double maxX = series1.getMaxX();
                    double minX = maxX - 50;
                    renderer_eeg1.setXAxisMin(minX);
                    renderer_eeg1.setXAxisMax(maxX);
                }
                view_eeg1.repaint();

            } }catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
        }
    };
timer.start();
}

protected void onResume() {
    super.onResume();  
    if(view_eeg1==null){
    LinearLayout layout_eeg1 = (LinearLayout) findViewById(R.id.chart_container);
     view_eeg1 = (GraphicalView) ChartFactory.getTimeChartView(this, eeg1, renderer_eeg1,"hh:mm:ss");
    layout_eeg1.addView(view_eeg1);}
    else
         view_eeg1.repaint();
        } 
```

}

问题是这段代码挂起并且没有绘制任何东西。我使用了在这里找到的演示代码[https://www.box.com/s/65d1c23a01430e206342](https://www.box.com/s/65d1c23a01430e206342)。我只是将它从 XYSeries 更改为 Timeseries。请帮我解决问题

# apache - Apache 反向代理错误

> ID：13966387
> 
> 赞同：2
> 
> 时间：2012-12-20T06:18:05.900
> 
> 标签：apache, proxy, reverse-proxy

我的网络系统：

互联网<--->Apache 反向代理<---->Apache 应用服务器

客户端访问互联网的 URL：www.example.com

我的问题：

当我访问 www.example.com 并上传数据时（这是 excel 文件）。我收到以下错误：

> 代理错误
> 
> 代理服务器收到来自上游服务器的无效响应。代理服务器无法处理请求 POST /index.php/adminstrator/store/substore/import/。
> 
> 原因：从远程服务器读取错误
> 
> Apache/2.2.3 (CentOS) 服务器位于 www.example.com 端口 80

为了解决这个问题，我在 httpd.conf 中设置了配置：

```
KeepAlive On
MaxKeepAliveRequest 0
KeepAliveTimeout 7200 
```

但它仍然给我同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T18:44:27.250

我们通过在 httpd.conf 中设置以下内容解决了类似的错误：

```
SetEnv proxy-initial-not-pooled 
```

我相信这似乎是 Apache 2.2.x 的一个错误。

希望这可以帮助某人。

# php - 在同一个 html 页面上使用 ajax 变量

> ID：13966391
> 
> 赞同：0
> 
> 时间：2012-12-20T06:18:37.770
> 
> 标签：php, ajax, html, jquery

我在我的应用程序中使用了 Input type="date" 字段来接受用户的日期值。但是我必须将名为“sdate”的日期值发布到操作方法中使用的地址中，如下所示。我想将输入类型日期字段的值发布到表单发布方法的操作中。

我已通过 AJAX 将这些值存储到变量中，但是如何将这些 AJAX 变量用于

我的书面视图代码如下：

```
<form method="post" id="report" class="live" target="_blank" action="http://wcidevapps.com/salescentral/jm2/troute.php?custnum=<?php echo $KUNNR?>&staffid='+staffid+'&rdate='+sdate+'">

<fieldset><legend>Today's Tasks</legend></fieldset>

<div class="span5 well">
    <div class="form-inline">
        <label class="control-label"><b> For </b> </label>
            <input type="text" name="stech" id="stech"/>
    </div><br/><br/>

    <div class="form-inline">
        <label class="control-label"><b> On </b> </label>
            <input type="date" class="datefield" name="sdate" id="sdate"/>
    </div><br/><br/>

    <button type="submit" name="open" class="btn btn-primary offset4"><i class="icon-file"></i> Open</button>
</div>

</form>

<script type="text/javascript">

var onFilter = function () {
        var obj = {
            sdate: $("#sdate").val(),
            stech: $("#stech").val()
        };
        $.ajax({
            method: 'POST',
            dataType: "JSON",
            contentType: "application/json; charset=utf-8",
            url: root + 'standard_projects/?json',
            data: obj,
            success: function (d) {
            sdate=d.sdate,
            staffid=d.staffid
            }
        });
    }
    $("#sdate").live("change", onFilter);
    $("#stech").live("change",onFilter);
</script> 
```

如何使用这些 AJAX 变量？sdate & 员工

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:37:00.967

您不能在 ajax 之外使用 ajax 变量。而不是从脚本开头声明变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:47:59.293

只需在您的成功功能中使用它

```
<form method="post" id="report" class="live" target="_blank" action="http://wcidevapps.com/salescentral/jm2/troute.php?custnum=<?php echo $KUNNR?>&">

//...
var report=$('#report), 
    url=report.attr('action'), 
    useStaff = function(staffid, sdate){
        report.attr('action', url+'staffid='+staffid+'&rdate='+sdate);
        //submit report or so...
    };
$.ajax({
        method: 'POST',
        dataType: "JSON",
        contentType: "application/json; charset=utf-8",
        url: root + 'standard_projects/?json',
        data: obj,
        success: function (d) {
            useStaff(d.staffid, d.sdate);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:09:35.047

我认为你错过了`document ready handler`一切似乎都很好。在最新的 jQuery 版本中不推荐使用 of `live`，因此您可以使用`.on()`处理程序来代替它。

你错过了一些`';'`

来自 jQuery 文档：

> **从 jQuery 1.7 开始**，不推荐使用**.live()**方法。使用**.on()**附加事件处理程序。

试试这个，看看是否有帮助：

```
<script type="text/javascript">

var onFilter = function () {
        var obj = {
            sdate: $("#sdate").val(),
            stech: $("#stech").val()
        };
        $.ajax({
            method: 'POST',
            dataType: "JSON",
            contentType: "application/json; charset=utf-8",
            url: root + 'standard_projects/?json',
            data: obj,
            success: function (d) {
            sdate=d.sdate; //<--------------missing ';'
            staffid=d.staffid; //<----------missing ';'
            $('form#report').attr("action", "http://wcidevapps.com/salescentral/jm2/troute.php?custnum="+<?php echo $KUNNR?>+"&staffid=" + staffid + '&rdate=' + sdate + '"');
            }
        });
    }; //<----------------------------------missing ';'
    $(function(){
        $(document).on("change", "#sdate", onFilter);
        $(document).on("change", "#stech", onFilter);
    });
</script> 
```

# jquery - 相同的代码，在另一个页面的相同位置 - 不起作用

> ID：13966392
> 
> 赞同：-2
> 
> 时间：2012-12-20T06:18:42.337
> 
> 标签：jquery, html

在 index.php 的底部，我有这段代码，它可以工作：

```
<script type='text/javascript'>
$("#tbAlegro").click(function() {
    window.location = 'alegro.php';
});
</script> 
```

在 alegro.php 的底部，我有相同的代码，但它不起作用：

```
<script type='text/javascript'>
$("#logoCh").click(function() {
    window.location = 'index.php';
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:22:44.243

1.  jQuery 是否正在加载到 alegro.php
2.  `logoCh`alegro.php 上是否有 ID 为的元素
3.  是否有任何 javascript 错误？

# java - 从jsp调用一个aspx页面

> ID：13966395
> 
> 赞同：0
> 
> 时间：2012-12-20T06:18:57.937
> 
> 标签：java, asp.net, jsp

在一种情况下，我想调用一个第三方 aspx 页面从我的 jsp 页面发送一些数据（或说确认）。任何人都可以帮助我如何完成这个调用，我需要告诉第三方一些设置吗供应商从那里设置？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:34:10.660

尝试使用 JSTL`c:import`标签。例如

```
<c:import url="http://abc.com/info.aspx">
   <c:param name="user">sasha</c:param>
</c:import> 
```

此标记导致对外部资源的 GET 请求。因此，第 3 方 aspx 提供者必须期待 GET 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:51:41.363

如果您想在客户端执行此操作，则应使用 Ajax 请求，如果您想在服务器端执行此操作，则应使用 URL.createConnection()/Apache Http Client。我尝试编写一些代码，但这里有更好的示例[使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

# queue - 如何在python3中使用amqp镜像队列？

> ID：13966398
> 
> 赞同：1
> 
> 时间：2012-12-20T06:19:16.927
> 
> 标签：queue, rabbitmq, amqp, mirror, python-3.2

我使用rabbitmq作为amqp服务器（集群）和kombu + py-amqp作为amqp客户端。我可以发送/接收普通消息队列的消息，但我不知道如何发送/接收镜像队列的消息，我找不到谷歌的答案。如何发送/接收镜像队列消息？

我的代码：

```
 with Connection(hostname='192.168.1.10',userid='test',password='test',virtual_host='test') as conn:
        simple_queue = conn.SimpleQueue('test') 
```

并获得异常

```
 File "./test_amqp.py", line 38, in send
    simple_queue = conn.SimpleQueue('test')
  File "/usr/local/lib/python3.2/site-packages/kombu/connection.py", line 671, in SimpleQueue
    exchange_opts, **kwargs)
  File "/usr/local/lib/python3.2/site-packages/kombu/simple.py", line 122, in __init__
    consumer = messaging.Consumer(channel, queue)
  File "/usr/local/lib/python3.2/site-packages/kombu/messaging.py", line 338, in __init__
    self.revive(self.channel)
  File "/usr/local/lib/python3.2/site-packages/kombu/messaging.py", line 350, in revive
    self.declare()
  File "/usr/local/lib/python3.2/site-packages/kombu/messaging.py", line 360, in declare
    queue.declare()
  File "/usr/local/lib/python3.2/site-packages/kombu/entity.py", line 471, in declare
    self.queue_declare(nowait, passive=False)
  File "/usr/local/lib/python3.2/site-packages/kombu/entity.py", line 497, in queue_declare
    nowait=nowait)
  File "/usr/local/lib/python3.2/site-packages/amqp/channel.py", line 1240, in queue_declare
    (50, 11),  # Channel.queue_declare_ok
  File "/usr/local/lib/python3.2/site-packages/amqp/abstract_channel.py", line 70, in wait
    return self.dispatch_method(method_sig, args, content)
  File "/usr/local/lib/python3.2/site-packages/amqp/abstract_channel.py", line 88, in dispatch_method
    return amqp_method(self, args)
  File "/usr/local/lib/python3.2/site-packages/amqp/channel.py", line 222, in _close
    (class_id, method_id), ChannelError)
amqp.exceptions.PreconditionFailed: Queue.declare: (406) PRECONDITION_FAILED - inequivalent arg 'x-ha-policy'for queue 'smarton' in vhost 'smarton': received none but current is the value 'all' of type 'longstr' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:45:31.097

声明队列时，所有选项都必须与服务器上已经存在的选项相同。在这种情况下，服务器的额外选项是`'x-ha-policy': 'all'`.

尝试`simple_queue = conn.SimpleQueue('test', queue_opts={"x-ha-policy": "all"})`

我没有对此进行测试，但我认为它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T06:32:31.353

也许kombu有一些问题，参数：{“x-ha-policy”：“all”}应该发布到entity.Queue.queue_arguments，但是没有entity.Queue的方法来设置entity.Queue的值.queue_arguments，我改变了 kombu.simple.SimpleQueue 并得到了正确的结果：

```
112         if not isinstance(queue, entity.Queue):
113             exchange = entity.Exchange(name, 'direct', **exchange_opts)
114             queue = entity.Queue(name, exchange, name, **queue_opts)
115+            queue.queue_arguments={'x-ha-policy':'all'}
116         else:
117             name = queue.name
118             exchange = queue.exchange 
```

# sql - 合并语句插入行，但不更新

> ID：13966400
> 
> 赞同：1
> 
> 时间：2012-12-20T06:19:38.513
> 
> 标签：sql, oracle

我对 MERGE 语句有疑问。行没有按应有的方式更新，旧行被再次插入。这是一个使用 HR 模式的简单示例代码：

```
--CREATES A SEQUENCE FOR A HISTORY TABLE
CREATE SEQUENCE JOBHIS_SEQ
START WITH 1 
INCREMENT BY 1 
MINVALUE 1 
MAXVALUE 999999999999999999999999999 
NOCACHE  
NOORDER  
NOCYCLE;

--CREATES A HISTORY TABLE
CREATE TABLE JOBHIS  (  
ID NUMBER(10) NOT NULL,
LOAD_DATE DATE,
JOB_ID VARCHAR2(10) NOT NULL ENABLE, 
JOB_TITLE VARCHAR2(35) NOT NULL ENABLE, 
MIN_SALARY NUMBER(6,0), 
MAX_SALARY NUMBER(6,0), 
    CONSTRAINT JOBHIS_ID_PK PRIMARY KEY (ID) ENABLE
)

--this inserts 19 rows into jobhis
MERGE INTO JOBHIS JH
   USING (  SELECT SYSDATE AS LOAD_DATE, JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY 
            FROM JOBS
            ) J
   ON (JH.JOB_ID = J.JOB_ID AND JH.LOAD_DATE = J.LOAD_DATE)
   WHEN MATCHED THEN UPDATE SET JH.MIN_SALARY = J.MIN_SALARY
     WHERE JH.MIN_SALARY != J.MIN_SALARY
   WHEN NOT MATCHED THEN INSERT (JH.ID, JH.LOAD_DATE, JH.JOB_ID, JH.JOB_TITLE, JH.MIN_SALARY, JH.MAX_SALARY)
        VALUES(JOBHIS_SEQ.NEXTVAL, SYSDATE, J.JOB_ID, J.JOB_TITLE, J.MIN_SALARY, J.MAX_SALARY)

--lets update jobs to get a row update into jobhis
UPDATE JOBS
SET MIN_SALARY = 10000
WHERE JOB_ID = 'AC_ACCOUNT'

--lets merge again
MERGE INTO JOBHIS JH
   USING (  SELECT SYSDATE AS LOAD_DATE, JOB_ID, JOB_TITLE, MIN_SALARY, MAX_SALARY 
            FROM JOBS
            ) J
   ON (JH.JOB_ID = J.JOB_ID AND JH.LOAD_DATE = J.LOAD_DATE)
   WHEN MATCHED THEN UPDATE SET JH.MIN_SALARY = J.MIN_SALARY
     WHERE JH.MIN_SALARY != J.MIN_SALARY
   WHEN NOT MATCHED THEN INSERT (JH.ID, JH.LOAD_DATE, JH.JOB_ID, JH.JOB_TITLE, JH.MIN_SALARY, JH.MAX_SALARY)
        VALUES(JOBHIS_SEQ.NEXTVAL, SYSDATE, J.JOB_ID, J.JOB_TITLE, J.MIN_SALARY, J.MAX_SALARY)
--> 19 rows are inserted, no updates, why? Somehow LOAD_DATE does not seem to work

--lets update jobs to back its original state
UPDATE JOBS
SET MIN_SALARY = 4200
WHERE JOB_ID = 'AC_ACCOUNT' 
```

我有自动提交，所以这些语句被提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T06:43:11.887

尝试加入`trunc(JH.LOAD_DATE) = trunc(J.LOAD_DATE)`

每次尝试更新时，您都会有不同的 sysdate，因为您正在执行`Select Sysdate load_Date, ... from JOBS`子查询，这与历史表中的日期不匹配。

检查这个[SQL Fiddle](http://sqlfiddle.com/#!4/f2976/1)它适用于 trunc

# jquery - 有没有办法自定义 Twitter @Anywhere 的样式

> ID：13966408
> 
> 赞同：0
> 
> 时间：2012-12-20T06:20:38.360
> 
> 标签：jquery, twitter

我有@Anywhere 工作并且tweetBox 出现了，我用下面的代码定制了很多。我很好奇是否有自定义推文按钮，包括更改其位置、使用图像等。

```
twttr.anywhere(function (t) { 
  var me = this; 
  var a = t('#tweetControls').tweetBox({
   height : 75, 
   width : 480, 
   defaultContent : 'Default Text', 
   counter : false, 
   label : '&nbsp;', 
   complete : function (tweetBox) {
      me.tweetBox = tweetBox; 
      try {
         me.tweetBox.$editor.css({
            resize : 'none', 
            color : '#9B9B9B', 
            'font-family': 'Arial', 
            'font-size': '14px', 
            background : 'transparent', 
            'border-radius': 0, 
            '-webkit-border-radius': 0, 
            '-moz-border-radius': 0 
         }); 
         me.tweetBox.$button.css( {
            cursor : 'hand', 
            cursor : 'pointer' ,
            display: none
         }); 
    } catch (e) {
    //
    }
}, 
    onTweet : function () {
    me.tweetBox.setContent('Restore default text'); 
}
}); 
}); 
```

# qt - 如何从qt中的主窗口调用对话框？

> ID：13966409
> 
> 赞同：0
> 
> 时间：2012-12-20T06:20:44.413
> 
> 标签：qt, qt4, qcustomplot

```
//functions for plotting graph
void MainWindow::opengraph()
{
    QDialog* graphdialog = new QDialog;
    Ui::graph ui_graph ;
    ui_graph.setupUi(graphdialog);

    setGeometry(400, 250, 542, 390);
    setWindowTitle("Graph");
    //statusBar()->clearMessage();
    //currentDemoIndex = demoIndex;
   ui_graph.customPlot->replot();

    RealtimeDataGraph(ui_graph.customPlot);
}

void MainWindow::RealtimeDataGraph(QCustomPlot *customPlot)
{
#if QT_VERSION < QT_VERSION_CHECK(4, 7, 0)
  QMessageBox::critical(this, "", "You're using Qt < 4.7, the realtime data demo needs functions that are available with Qt 4.7 to work properly");
#endif
  //demoName = "Real Time Data Demo";

  // include this section to fully disable antialiasing for higher performance:
  /*
  customPlot->setNotAntialiasedElements(QCP::aeAll);
  QFont font;
  font.setStyleStrategy(QFont::NoAntialias);
  customPlot->xAxis->setTickLabelFont(font);
  customPlot->yAxis->setTickLabelFont(font);
  customPlot->legend->setFont(font);
  */
  customPlot->addGraph(); // blue line
  customPlot->graph(0)->setPen(QPen(Qt::blue));
  customPlot->graph(0)->setBrush(QBrush(QColor(240, 255, 200)));
  customPlot->graph(0)->setAntialiasedFill(false);
  customPlot->addGraph(); // red line
  customPlot->graph(1)->setPen(QPen(Qt::red));
  customPlot->graph(0)->setChannelFillGraph(customPlot->graph(1));
  //
//  customPlot->addGraph(); // green line
//  customPlot->graph(2)->setPen(QPen(Qt::green));
//  customPlot->graph(0)->setChannelFillGraph(customPlot->graph(2));
  //

  customPlot->addGraph(); // blue dot
  customPlot->graph(2)->setPen(QPen(Qt::blue));
  customPlot->graph(2)->setLineStyle(QCPGraph::lsNone);
  customPlot->graph(2)->setScatterStyle(QCP::ssDisc);
  customPlot->addGraph(); // red dot
  customPlot->graph(3)->setPen(QPen(Qt::red));
  customPlot->graph(3)->setLineStyle(QCPGraph::lsNone);
  customPlot->graph(3)->setScatterStyle(QCP::ssDisc);

//  customPlot->addGraph(); // green dot
//  customPlot->graph(5)->setPen(QPen(Qt::green));
//  customPlot->graph(5)->setLineStyle(QCPGraph::lsNone);
//  customPlot->graph(5)->setScatterStyle(QCP::ssDisc);
//
  customPlot->xAxis->setTickLabelType(QCPAxis::ltDateTime);
  customPlot->xAxis->setDateTimeFormat("hh:mm:ss");
  customPlot->xAxis->setAutoTickStep(false);
  customPlot->xAxis->setTickStep(2);
  customPlot->setupFullAxesBox();
  customPlot->xAxis->setLabel("Time(Sec)");
  customPlot->yAxis->setLabel("magnitude");

  // make left and bottom axes transfer their ranges to right and top axes:
  connect(customPlot->xAxis, SIGNAL(rangeChanged(QCPRange)), customPlot->xAxis2, SLOT(setRange(QCPRange)));
  connect(customPlot->yAxis, SIGNAL(rangeChanged(QCPRange)), customPlot->yAxis2, SLOT(setRange(QCPRange)));

  // setup a timer that repeatedly calls MainWindow::realtimeDataSlot:
  *connect(&dataTimer, SIGNAL(timeout()), this, SLOT(realtimeDataSlot(QCustomPlot *)));*
  dataTimer.start(0); // Interval 0 means to refresh as fast as possible
}

void MainWindow::realtimeDataSlot(QCustomPlot *customPlot)
{
  // calculate two new data points:
#if QT_VERSION < QT_VERSION_CHECK(4, 7, 0)
  double key = 0;
#else
  double key = QDateTime::currentDateTime().toMSecsSinceEpoch()/1000.0;
#endif
  static double lastPointKey = 0;
  if (key-lastPointKey > 0.01) // at most add point every 10 ms
  {
    double value0 = sin(key*1.6+cos(key*1.7)*2)*10 + sin(key*1.2+0.56)*20 + 26;
    double value1 = sin(key*1.3+cos(key*1.2)*1.2)*7 + sin(key*0.9+0.26)*24 + 26;
    //
    //double value2 = sin(key*2+cos(key*2.2)*3)*17 + sin(key*2.3+0.76)*30 + 26;
    //
    // add data to lines:
    customPlot->graph(0)->addData(key, value0);
    customPlot->graph(1)->addData(key, value1);
    //
//    ui->customPlot->graph(1)->addData(key, value2);
    // set data of dots:
    customPlot->graph(2)->clearData();
    customPlot->graph(2)->addData(key, value0);
    customPlot->graph(3)->clearData();
    customPlot->graph(3)->addData(key, value1);

//    ui->customPlot->graph(5)->clearData();
//    ui->customPlot->graph(5)->addData(key, value2);
    // remove data of lines that's outside visible range:
    customPlot->graph(0)->removeDataBefore(key-20);
    customPlot->graph(1)->removeDataBefore(key-20);
//    ui->customPlot->graph(2)->removeDataBefore(key-20);
    // rescale value (vertical) axis to fit the current data:
    customPlot->graph(0)->rescaleValueAxis();
    customPlot->graph(1)->rescaleValueAxis(true);
//    ui->customPlot->graph(2)->rescaleValueAxis(true);
    lastPointKey = key;
  }
  // make key axis range scroll with the data (at a constant range size of 8):
  customPlot->xAxis->setRange(key+0.25, 20, Qt::AlignRight);
  customPlot->replot();

  // calculate frames per second:
  static double lastFpsKey;
  static int frameCount;
  ++frameCount;
  if (key-lastFpsKey > 2) // average fps over 2 seconds
  {
    //ui->statusBar->showMessage(
//          QString("%1 FPS, Total Data points: %2")
//          .arg(frameCount/(key-lastFpsKey), 0, 'f', 0)
//          .arg(ui->customPlot->graph(0)->data()->count()+ui->customPlot->graph(1)->data()->count())
//          , 0);
    lastFpsKey = key;
    frameCount = 0;
  }
} 
```

在上面的代码中，我想在按下按钮时从主窗口调用图形对话框。当我运行此代码时，在函数中`RealtimeDataGraph()`

```
connect(&dataTimer, SIGNAL(timeout()), this, SLOT(realtimeDataSlot(QCustomPlot *))); 
```

在这一行，编译器说发送者接收者不兼容。

我认为，当数据计时器超时时，应该通过图形对话框接收信号。它是否收到它，我无法理解。可以请任何人查看此代码并让我知道如何调用插槽`realtimeDataSlot()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:35:27.097

```
QCustomPlot * ptr_CustomPlot; // pointer of QCustomPlot

//functions for plotting graph
void MainWindow::opengraph()
{
    QDialog* graphdialog = new QDialog;
    Ui::graph ui_graph ;
    ui_graph.setupUi(graphdialog);

    setGeometry(400, 250, 542, 390);
    setWindowTitle("Graph");
    ui_graph.customPlot->replot();
    RealtimeDataGraph(ui_graph.customPlot);
}

void MainWindow::RealtimeDataGraph(QCustomPlot *customPlot)
{
  ptr_CustomPlot = customPlot; // here, customPlot is saved to ptr_CustomPlot
  /* ... */

  // setup a timer that repeatedly calls MainWindow::realtimeDataSlot:
  connect(&dataTimer, SIGNAL(timeout()), this, SLOT(realtimeDataSlot()));

}

void MainWindow::realtimeDataSlot()
{
  /* use ptr_CustomPlot // here, ptr_CustomPlot is the same as customPlot which is also ui_graph.customPlot */
  /* ... */
} 
```

Slot 和 Signal 必须具有相同数量的参数和类型。

# ios - 获取谷歌电子表格ios

> ID：13966413
> 
> 赞同：1
> 
> 时间：2012-12-20T06:21:10.913
> 
> 标签：ios, google-sheets, google-drive-api

如何将谷歌电子表格获取到应用程序？我上传了一个转换为谷歌电子表格的 cdv 文件，但现在我正在尝试获取该文件，但它抛出了 1003 错误。

问题是不再有downloadUrl。它可能去了哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:58:12.393

无法下载电子表格等 Google 原生格式的文档，您必须使用该`exportLinks`集合以支持的格式导出它们：

[https://developers.google.com/drive/manage-downloads#downloading_google_documents](https://developers.google.com/drive/manage-downloads#downloading_google_documents)

# javascript - JavaScript 树

> ID：13966415
> 
> 赞同：0
> 
> 时间：2012-12-20T06:21:21.777
> 
> 标签：javascript

我尝试将所有类插入数组

例如

```
 <div class="class1">

   <div class="class2">

   <div class="class3">

   <div id="class4">

   </div> 
   </div> 
   </div> 

   </div> 
```

和 javascript

```
 var a=document.getElementById("class4");
  var b=new Array(a.parentNode.className,a.parentNode.parentNode.className,
  a.parentNode.parentNode.parentNode.className);
  for(i=0;i<b.length;i++)
  {alert(b[i])} 
```

这很好，但我的问题是，如果我不知道类中有多少 parentNode 我如何循环整个 parentNode 并将其插入数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:27:17.297

```
​function allParents(node) {
    var arr = [];
    while (node) {
        arr.push(node);
        node = node.parentNode;
    }
    return arr;
}

console.log(allParents(document.getElementsByClassName("class4")[0]));
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:30:51.903

您还可以使用 .parents() jquery 方法 [http://api.jquery.com/parents/](http://api.jquery.com/parents/)

# c++ - 注册表中的 Internet 设置 - 代理自动登录如何？

> ID：13966421
> 
> 赞同：3
> 
> 时间：2012-12-20T06:21:59.567
> 
> 标签：c++, winapi, visual-c++, proxy

我想自动登录到系统代理。

我可以在注册表中设置代理：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings 
```

键值：

```
ProxyEnable = 1
ProxyServer = IP:PORT 
```

但我不希望我的应用程序用户在他的浏览器中输入登录名和密码，我不希望他单击登录，我想自动执行此操作。

我试图将 ProxyServer 密钥设置为：

```
ProxyServer = username:password@IP:PORT 
```

但这不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:19:15.953

您将需要使用[WebProxy 类](http://msdn.microsoft.com/en-us/library/7a32x5aw.aspx)来设置凭据和代理 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:57:05.607

您还可以设置**ProxyUser**和**ProxyPass**值来指定用户名和密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:25:40.613

我之前忘记添加`http://`了，所以值`ProxyServer`应该是：

```
http://username:password@proxy_server:port 
```

有用！现在我的浏览器中没有代理登录框:)

# c - 如何在我自己的 php 扩展中使用 PDO 支持？

> ID：13966423
> 
> 赞同：1
> 
> 时间：2012-12-20T06:22:04.253
> 
> 标签：c, pdo, php-extension

我想在我的 php 扩展中使用 PDO MySQL（使用 c 语言，而不是 php 中的简单 pdo 包装类），但我不知道这种情况，任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T16:29:26.343

我的问题被谷歌解决了，按照这个指南可能会解决你的问题，它可以在其他 zend 类中使用。

注意：需要有关**如何在 c 中创建 php 扩展**的基本概念。

1.需要对源端zend_call_method打补丁，因为源端zend_call_method **只支持不到3个参数**，而PDO的构造函数使用1-4个参数。

> PDO::__construct() ( 字符串 $dsn [, 字符串 $username [, 字符串 $password [, 数组 $driver_options ]]] )

在您的 php 源目录中找到“zend_interfaces.c”（可能在“php-5.xx-src\Zend\zend_interfaces.c”中），定位到“zend_call_method”部分，将其复制粘贴到您的代码中并执行以下操作：

> ```
> /* {{{ zend_call_method
>  Only returns the returned zval if retval_ptr != NULL */
> ZEND_API zval* zend_call_method_n_params(
>   zval **object_pp, zend_class_entry *obj_ce,
>   zend_function **fn_proxy, const char *function_name,
>   int function_name_len, zval **retval_ptr_ptr,
>   int param_count, zval *** params TSRMLS_DC)
> // ↑↑↑new function definition
> // only change "zval* arg1, zval* arg2" to "zval *** params"
> // make a new function name "zend_call_method_n_params"
> {
>         ...
> 
>   //zval **params[2];            ← delete it!
>   //params[0] = &arg1;           ← delete it!
>   //params[1] = &arg2;           ← delete it! done.
> 
>         ...
> }
> /* }}} */ 
> ```

注意：您可能需要一些宏：

```
#define call_method(obj, obj_ce, fn_proxy, function_name, retval, param_count, params) \
    zend_call_method_n_params(obj, obj_ce, fn_proxy, function_name, sizeof(function_name)-1, retval, param_count, params TSRMLS_CC)

#define call_function(function_name, retval, param_count, params) \
    zend_call_method(NULL, NULL, NULL, function_name, retval, param_count, params)

#define call_construct(obj, obj_ce, param_count, params) \
    call_method(obj, obj_ce, &obj_ce->constructor, obj_ce->constructor->common.function_name, NULL, param_count, params) 
```

2.你好世界！

设置您的代码，我们需要一个属性“pdo”

```
PHP_MINIT_FUNCTION(yourextension)
{
    ...
    zend_declare_property_null(you_class_entry, ZEND_STRL("pdo"),
                               ZEND_ACC_PUBLIC TSRMLS_CC);
    ...
} 
```

> ```
> PHP_METHOD(foo, bar)
> {
>     char * dsn = "mysql:dbname=yourdb;host=127.0.0.1;port=3306";
>     char * usr = "username";
>     char * pwd = "password";
>     zval * zdsn = NULL;
>     zval * zusr = NULL;
>     zval * zpwd = NULL;
> 
>     zval ** params[3];
>     zend_class_entry * pdo_class_entry;
> 
>     if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "") == FAILURE) {
>         RETURN_FALSE;
>     }
> 
>     // get class entry for PDO
>     pdo_class_entry = zend_fetch_class(ZEND_STRL("PDO"),
>                                    ZEND_FETCH_CLASS_AUTO TSRMLS_CC);
> 
>     // initial PDO instance
>     MAKE_STD_ZVAL(pdo_inst);
>     object_init_ex(pdo_inst, pdo_class_entry);
> 
>     // arg1: dns string
>     ALLOC_INIT_ZVAL(zdns);
>     ZVAL_STRINGL(zdsn, dsn, sizeof(dsn)-1, 1);
> 
>     // arg2: username
>     ALLOC_INIT_ZVAL(zusr);
>     ZVAL_STRINGL(zusr, usr, sizeof(usr)-1, 1);
> 
>     // arg3: password
>     ALLOC_INIT_ZVAL(zpwd);
>     ZVAL_STRINGL(zpwd, pwd, sizeof(pwd)-1, 1);
> 
>     // put them in params array
>     params[0] = &zdsn;
>     params[1] = &zusr;
>     params[2] = &zpwd;
> 
>     // call PDO::__construct(zdns, zusr, zpwd)
>     zend_call_method_n_params(&pdo_inst,
>         pdo_class_entry,
>         &pdo_class_entry->constructor,
>         ZEND_STRL(pdo_class_entry->constructor->common.function_name),
>         NULL, 3,    // 3 params
>         params TSRMLS_CC);
>     // or simply use macro instead()
>     //call_construct(&pdo_inst, pdo_class_entry,3,params);
>     if (pdo_inst && Z_TYPE_P(pdo_inst) == IS_OBJECT) {
>         zend_update_property(your_class_entry, getThis(),
>                              ZEND_STRL("pdo") , pdo_inst TSRMLS_CC);
>         zend_printf("Success.\n");
>     } else {
>         zend_printf("Failure.\n");
>     }
> } 
> ```

在php中可以这样调用：

```
$foo = new foo();
$foo->bar(); // connect by PDO and update $foo->pdo
// you can use pdo property now
var_dump($foo->pdo->query("select * from table")->fetchAll()); 
```

它工作正常。干杯!

# solr - 在 SOLR 4 中查找最后一个可搜索文档的键

> ID：13966430
> 
> 赞同：0
> 
> 时间：2012-12-20T06:22:37.213
> 
> 标签：solr, solrj

我将 SOLR 4 用于应用程序，我需要在插入记录后立即搜索索引。

我正在使用下面的 solrj 代码来获取索引中的最后一个 ID。但是，我注意到当我通过 solr web admin 执行查询时看到的最后一个 id 经常落后于此。并且我的搜索不包括所有文档，直到我从下面的代码片段中获得的最后一个 ID。这是因为硬提交的延迟吗？我还不需要切换到软提交。我只是想确保获得最后一个可搜索文档的 ID。这可能吗？

```
 SolrQuery query = new SolrQuery();
     query.set("qt","/select");
     query.setQuery( "*:*" );
     query.setFields("id");
     query.set("rows","1");
     query.set("sort","id desc");

     QueryResponse rsp = m_Server.query( query );
     SolrDocumentList docs = rsp.getResults();
     SolrDocument doc = docs.get(0);
     long id = (Long) doc.getFieldValue("id"); 
```

更新：
我通过以下方式在 solrj 中提交文档：

```
 m_Server = new HttpSolrServer(m_Url);
    SolrInputDocument doc = new SolrInputDocument();
    doc.addField( "id", id);
    doc.addField( "text", text);
    m_Server.add(doc);      
    m_Server.commit(); 
```

是否有可能某些字段（在本例中为 id）在其他字段（在本例中为文本）之前变得可搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:50:17.807

你是如何提交索引的？您应该将 commit 与`waitSearcher=true`and一起使用，`waitFlush=true`以便它阻塞，直到新的搜索器可用于使用 Solrj 提交进​​行查询。

否则，在提交和打开新搜索器之间会有一些延迟，新索引可用。到那时，搜索将由具有旧数据的旧搜索执行。

# javascript - 如何使用 JavaScriptCore 从 C 调用 JavaScript 函数？

> ID：13966432
> 
> 赞同：2
> 
> 时间：2012-12-20T06:22:45.773
> 
> 标签：javascript, c, function, swig, javascriptcore

我用 JavaScript 编写了一个函数。例如：

```
function myName(a)
{
   var k=10;
   print(k);
} 
```

`myName`是否可以使用 JavaScriptCore 从 C调用？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:32:33.573

您可能想看看 Google 的 V8 项目（不过它是用 C++ 编写的）。它允许您在 C++ 程序中编译和执行 javascript 程序（在嵌入式 v8 引擎的帮助下）。这是它的[入门文档页面](https://developers.google.com/v8/get_started)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T19:44:55.237

是的你可以。一种方法是从 C 中调用 JSEvaluateScript。像这样的东西：

```
JSStringRef script = JSStringCreateWithUTF8CString("myName()");
JSEvaluateScript(ctx, script, NULL, NULL, 0, NULL); 
```

这假设您已经使用 JSGlobalContextCreate 创建了 ctx（一个 JSContextRef），并且已经在该上下文中评估了您的脚本（再次使用 JSEvaluateScript）以将 myName 函数添加到该 ctx。

# php - 运行查询时“不支持USE语句在数据库之间切换”

> ID：13966435
> 
> 赞同：4
> 
> 时间：2012-12-20T06:23:10.113
> 
> 标签：php, sql-server, azure-sql-database, freetds, ubuntu-12.10

尝试选择具有`php's`标准`mssql_select_db`功能的数据库时出现以下错误：`USE statement is not supported to switch between databases. Use a new connection to connect to a different Database. (severity 16)`. 所以我很困惑从这里去哪里。

**连接代码：**

```
$link = mssql_connect('dsn', 'user@server', 'password');

if (!$link) {
   die('Unable to connect!');
}

if (!mssql_select_db('db', $link)) {
   die('Unable to select database!');
}

$result = mssql_query('SELECT * FROM yourtable');

while ($row = mssql_fetch_array($result)) {
   var_dump($row);
} 
```

我的系统设置如下：

*   Ubuntu 12.10
*   PHP5
*   阿帕奇2
*   免费TDS
*   unixODBC
*   SQL Azure

我也在关注本[指南](http://davejamesmiller.com/blog/web-development/connecting-php-to-sql-server-on-debian-ubuntu)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T00:13:48.587

作为对@Pondlife 上面最后评论的回应，由于他没有给出答案，我会为他做这件事，直到他自己发布为止。

@Pondlife 评论：

> 我自己没有使用 Azure 的经验，但错误信息非常明确：您无法在 SQL Azure 中使用 USE 更改数据库。我不知道如何或是否可以阻止您的特定客户端库发出 USE 命令，但我会尝试完全删除 mssql_select_db() 调用并在您的 ODBC DSN 中指定正确的数据库名称。希望这会将您直接连接到您要使用的数据库。-**池塘生活**

# sql - 将多列连接成一列 (~) 分隔

> ID：13966437
> 
> 赞同：0
> 
> 时间：2012-12-20T06:23:21.623
> 
> 标签：sql, sql-server

询问

```
select DISTINCT(a.col1),b.col2
FROM tab1 a RIGHT OUTER JOIN  tab2 b
ON a.tab1_id=b.tab2_id
WHERE
a.tab1_id=105 
```

获取输出为

```
col1           col2
______________________
A               val1
A               val2 
```

我想将上述结果连接成一个`~`单独的值

例如。 `A~val1~val2`

请指导

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:39:25.587

您的查询：

```
SELECT a.col1+'~'+       
       STUFF((
        SELECT '~' + s2.col2
        FROM tab1 s1
        RIGHT OUTER JOIN tab2 s2 ON s1.tab1_id=s2.tab2_id
        WHERE a.col1 = s1.col1
        FOR XML PATH('')
      ), 1, 1, '')  AS columns2
FROM tab1 a
RIGHT OUTER JOIN tab2 b ON a.tab1_id=b.tab2_id
WHERE a.tab1_id=105
GROUP BY a.col1 
```

示例查询：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/2d517/2)**

```
SELECT
s.col1+'~'+
STUFF((
        SELECT '~' + col2
        FROM Table1 s2
        WHERE s2.col1 = s.col1
        FOR XML PATH('')
      ), 1, 1, '')  AS columns2
FROM Table1 s
GROUP BY s.col1 
```

结果：

```
|    COLUMNS2 |
---------------
| A~val1~val2 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:38:20.400

采用`GROUP_CONCAT(b.col2 SEPARATOR '~')`

整个查询：

```
select a.col1, GROUP_CONCAT(b.col2 SEPARATOR '~') AS grouped
FROM tab1 a RIGHT OUTER JOIN  tab2 b
ON a.tab1_id=b.tab2_id
WHERE
a.tab1_id=105
GROUP BY a.col1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:36:54.570

在 MySQL 中，您可以使用`GROUP_CONCAT`

```
select a.col1, GROUP_CONCAT(b.col2,'/')
FROM tab1 a RIGHT OUTER JOIN  tab2 b
ON a.tab1_id=b.tab2_id
WHERE
a.tab1_id=105
GROUP BY a.col1 
```

在 MySQL Server 中你可以使用`CROSS Apply`或者`Stuff`甚至这个简单的`Xml Path for`. 也许你已经得到了答案。但是，你去，更容易。可以将示例表视为您的联接查询的结果，而无需 col1 = 1 之类的条件。请在以下查询中合并您的联接表结构。

样品表：

```
COL1    COL2
1       john
2       tim
1       jack
3       rose 
```

询问：

```
SELECT col1, replace
((SELECT col2 AS [data()]
FROM tab1
WHERE  col1 = a.col1
ORDER BY col1 FOR xml path('')), ' ','/')
FROM  tab1 a
WHERE col1 IS NOT NULL
AND col1 = 1
GROUP BY col1
; 
```

结果：我的键盘没有您需要的特定字符。您可以用它替换正斜杠 ;)

```
COL1    COLUMN_1
1       john/jack 
```

## * [SQLFIDDLE](http://sqlfiddle.com/#!3/0403a/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T06:50:04.070

结果为单个字符串输出，请尝试：

```
DECLARE @output VARCHAR(MAX)
SELECT @output =COALESCE( @output + '~', Col1+'~')+Col2 FROM(
    SELECT DISTINCT(a.col1) Col1,b.col2 Col2
    FROM tab1 a RIGHT OUTER JOIN  tab2 b
    ON a.tab1_id=b.tab2_id
    WHERE
    a.tab1_id=105
)x
GROUP BY Col1,Col2

SELECT @output 
```

# rad - RAD 7.5、struts 1.1、JDK 1.6 部署上的 WAS 7 部署问题

> ID：13966442
> 
> 赞同：1
> 
> 时间：2012-12-20T06:23:52.203
> 
> 标签：rad, jdk1.6

我们正在尝试将 WAS 5 迁移到 WAS 7。以下是我们尝试迁移的版本详细信息：

WSAD 5.1 到 RAD 7.5、Struts 1.1 到 Struts 1.1、JDK 1.4 到 JDK 1.6 和 WAS 5 到 WAS 7

当我们使用 RAD 7.5 在 WAS 7 上部署 JDK 1.6 和 Struts 1.1 时，我们得到 java.lang.NoClassDefFoundError。我们尝试了所有可能的方法来检查类路径，并且看起来它是正确的。

# java - 来自标准输入的 BufferedReader readLine()

> ID：13966448
> 
> 赞同：6
> 
> 时间：2012-12-20T06:24:21.673
> 
> 标签：java

我需要从标准输入中读取。我对 BufferedReader 不太熟悉，到目前为止只使用过 Scanner。扫描仪（或者可能是我的代码中的某些东西）不断给我 TLE。现在的问题是 BufferedReader 似乎跳过了一些行，而我不断收到 NumberFormatException。

这是我的代码：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));

    int cases = Integer.parseInt(reader.readLine());

    for(int i = 0; i < cases && cases <= 10; i++) {
        int numLines = Integer.parseInt(reader.readLine());
        String[] lines = new String[numLines + 1];
        HashSet<String> pat = new HashSet<String>();

        for(int j = 0; j < numLines && j <= 10; j++) {
            String l = reader.readLine();

            String patternStr = "\\W+";
            String replaceStr = "";

            Pattern pattern = Pattern.compile(patternStr);
            Matcher matcher = pattern.matcher(l.toString());

            String m = matcher.replaceAll(replaceStr);

            lines[j] = m;
            getPatterns(m, pat);

            System.out.println(m);
        } 
```

错误发生在第二次输入之后。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T06:36:16.527

[`BufferedReader#readLine()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)方法不会读取行尾的换行符。因此，当您调用`readLine()`两次时，第一个将读取您的输入，第二个将读取第一个的`newline`剩余部分。

这就是为什么它会跳过您提供的输入。

您可以[`BufferedReader#skip()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#skip%28long%29)在.`readLine``for loop`

# iphone - 更改 3D 变换后如何合并两个图像？

> ID：13966449
> 
> 赞同：0
> 
> 时间：2012-12-20T06:24:25.357
> 
> 标签：iphone, ios, uiimage

> **可能重复：**
> [如何合并透视图像（3D 变换）？](https://stackoverflow.com/questions/12457047/how-to-merge-the-perspective-image3d-transform)

更改 3D 变换后如何合并两个图像？我正在使用两个图像

(i) 背景图像是正常图像。

(ii) 前景图像改变 3D 变换。

现在我合并这两个图像。但没有合并图像，我正在使用下面的代码。此代码在没有 3D 变换的情况下工作正常。

```
UIGraphicsBeginImageContext(backgroundImageView.frame.size);
CGContextRef ctx = UIGraphicsGetCurrentContext();
[imageView.layer renderInContext:ctx];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(newImage, nil, nil, nil);
return newImage; 
```

我搜索了很多，但是 3D 转换图像不支持该图层。

我如何获得此功能。我真的必须在我的应用程序上使用这个功能。任何想法、源代码、建议、建议，随时欢迎。请帮我。![在此处输入图像描述](../Images/80fa67629dbdccd9f0b09517cbfa1cb5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:31:39.423

试试这个。

```
- (UIImage*)mergeImage:(UIImage*)first withImage:(UIImage*)second
{
 // get size of the first image
 CGImageRef firstImageRef = first.CGImage;
 CGFloat firstWidth = CGImageGetWidth(firstImageRef);
 CGFloat firstHeight = CGImageGetHeight(firstImageRef);

 // get size of the second image
 CGImageRef secondImageRef = second.CGImage;
 CGFloat secondWidth = CGImageGetWidth(secondImageRef);
 CGFloat secondHeight = CGImageGetHeight(secondImageRef);

 // build merged size
 CGSize mergedSize = CGSizeMake(MAX(firstWidth, secondWidth), MAX(firstHeight, secondHeight));

 // capture image context ref
 UIGraphicsBeginImageContext(mergedSize);

 //Draw images onto the context
 [first drawInRect:CGRectMake(0, 0, firstWidth, firstHeight)];
 [second drawInRect:CGRectMake(0, 0, secondWidth, secondHeight)]; 

 // assign context to new UIImage
 UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

 // end context
 UIGraphicsEndImageContext();

 return newImage;
} 
```

# wordpress - WordPress 画廊没有出现

> ID：13966452
> 
> 赞同：0
> 
> 时间：2012-12-20T06:24:29.913
> 
> 标签：wordpress, gallery

我最近更新到 Wordpress 3.5，一切正常，新的 Media Uploader 看起来很棒。但是，当我将图片库添加到帖子或页面时，它不会显示在渲染 html 页面上，但它仍然会出现在编辑器中！

我正在使用定制的[Roots](http://www.rootstheme.com/)主题，可能与此有关，而与 Wordpress 完全无关。图像没有存储在 wp-content/uploads 中，而是存储在根级别的名为 assets 的文件夹中，但我认为这不是问题，因为将单个图像插入帖子没有问题，只有显然与画廊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:34:54.207

很可能您正在处理的插件或主题在新的默认结构下无法正常工作。尝试禁用所有插件，看看它是否有效。之后尝试切换到不同的主题（如二十二），看看是否有帮助。

如果那没有帮助，请告诉我。

**编辑**
所以这是你的主题。搜索 和 的`post_gallery`主题`gallery_shortcode`。
让我知道你发现了什么。

# c++ - 删除 std::list 中的项目，同时保持分配状态

> ID：13966453
> 
> 赞同：6
> 
> 时间：2012-12-20T06:24:38.117
> 
> 标签：c++, stl, linked-list, doubly-linked-list

我构建了一个`std::list`定期合并在一起的项目（图形组件结构）。这个想法是，如果我发现一个连接两个组件的节点，它们将成为一个单独的组件，并且我的列表会枚举我的组件。每个组件都有一个`std::list<component>::iterator`指向其“父”组件的句柄（在本例中为 ），该句柄在合并后设置。通过这种方式确定特定节点所属的组件，我沿着这条链走。

最后，我正在寻找的是`std::list`允许我获取 item 的迭代器`N`并将其从列表中*删除*但不释放它的操作：列表其余部分的结构的修改方式与正常删除它。

最好是比重新分配项目、从列表中复制它并调用真实的`remove`或`erase`.

也许我可以用`splice`. 我需要将要删除的元素拼接成“垃圾” `list`，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:24:15.307

你可以用拼接来做到这一点。例如，移动`*it`到垃圾列表：

```
junk.splice(junk.begin(),comp_list,it); 
```

您还可以将 move-ctor 添加到`component`. 然后，在从列表中删除内容到 tmp var 之前，如下所示：

```
component  tmp(*it);
li.erase(it); 
```

Fomin Arseniy 建议使用指向组件（或`std::shared_ptr`）的指针列表也很好。

# sql - 多选中的数字无效-BI Publisher 10.1.3.4

> ID：13966454
> 
> 赞同：3
> 
> 时间：2012-12-20T06:24:42.887
> 
> 标签：sql, regex, oracle10g

我在 BIP 中使用以下查询，它会引发**“无效号码”**错误。相同的查询在 Toad 中运行良好。有人能告诉我为什么我得到***ORA-01722: invalid number***。当只使用 1 个参数时，它工作正常，只有当我们选择超过 1 个选项时，才会出现此错误。

我们使用**String 数据类型**作为参数**ref_std**

以下是每个值包含哪些值的要点

**multilist01 - 包含 csv 值，例如 ',100,200,300,400,'**

**: ref_std - 将是一个参数（多选），如 EN 60439-1:1999、EN 60439-3:1991**

* * *

```
select * from
( 
select cert.multilist01
from
some_table 
) xx
join 
(

select id as input from some_table where item_number in 
(
select regexp_substr(:ref_std,'[^,]+', 1, level) ID
from dual
connect by regexp_substr(:ref_std,'[^,]+', 1, level) is not null
) 

)yy on xx.multilist01 like '%'||yy.input||'%' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:56:38.317

首先： Item_number 必须是 String 因为 ref_std 不是数字，否则您必须更改 '[^,]+' for 以提取数字。如果 cert.multilist01 是 100 200 300 的行，那么这是数字，您不能“加入”与“yy”即字符串。您必须将 cert.multilist01 转换为字符串（some_table 中的列），或者您必须仅提取 ref_std 中更改正则表达式的数字。

# date - 在 Powershell 中，当月份和日期小于 9 时，如何让美国文化信息（en-US）显示为带有 2 位小数的 mm/DD/yyyy？

> ID：13966455
> 
> 赞同：1
> 
> 时间：2012-12-20T06:24:42.153
> 
> 标签：date, powershell, format, cultureinfo

当月份和日期等于或小于 9 时，如何让美国文化信息 (en-US) 显示为带有 2 位小数的 mm/DD/yyyy？我想将日期显示为 09/03/2012 而不是 9/3/2012？请解释它是如何工作的，并提供一个准确的答案。谢谢！

```
[void] [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")
[void] [System.Reflection.Assembly]::LoadWithPartialName("System.Drawing") 

$objForm = New-Object Windows.Forms.Form 

$objForm.Text = "Select a Date" 
$objForm.Size = New-Object Drawing.Size @(190,190) 
$objForm.StartPosition = "CenterScreen"

$objForm.KeyPreview = $True

$objForm.Add_KeyDown({
    if ($_.KeyCode -eq "Enter") 
        {
            $dtmDate=$objCalendar.SelectionStart
            $objForm.Close()
        }
    })

$objForm.Add_KeyDown({
    if ($_.KeyCode -eq "Escape") 
        {
            $objForm.Close()
        }
    })

$us = New-Object system.globalization.cultureinfo("en-US")

$objCalendar = New-Object System.Windows.Forms.MonthCalendar
$objCalendar.ShowTodayCircle = $False
$objCalendar.MaxSelectionCount = 1
$objForm.Controls.Add($objCalendar) 

$objForm.Topmost = $True

$objForm.Add_Shown({$objForm.Activate()})  
[void] $objForm.ShowDialog() 

$finaldate = $dtmdate | Get-Date -format ($us.DateTimeFormat.ShortDatePattern) 

Write-Host $finaldate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:33:33.437

您只需使用正确的 DateTime 格式字符串，例如：

```
C:\PS> Get-Date -Format MM/dd/yyyy -Month 9 -Day 3
09/03/2012 
```

[请参阅有关自定义日期时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)的 MSDN 主题。

# javascript - Javascript函数动态DIV属性不包含div内容

> ID：13966456
> 
> 赞同：5
> 
> 时间：2012-12-20T06:24:47.463
> 
> 标签：javascript, html

在我的编码中，我使用 javascript 函数来动态创建 div 及其属性

这是我的html编码

```
<p >Poll Choice</p>

<input type=hidden name="choicecount" id="choicecount" value="1">

<input type=file name="choiceimg1" value ="Select"  onchange="readURL(this)" style="display:none;">

  <script language="JavaScript" type="text/javascript">

  function HandFileButtonClick()

  {

    document.addpoll.choiceimg1.click();

  }

  function HandleFileButtonClick(val)    
  {   
      var ss=val.name;

      document.forms["addpoll"]

      var n=ss.split("choiceimgs");

      document.forms["addpoll"]["choiceimg" + n[1]].click();
  }

  </script>

    <div>
    <div style="width:400px;height:85px;">
            <div id="imgbg" style="float:left;width: 110px;height: 80px;text-align: center;border: 1px solid #CCC;">  
                <input type="button" onclick="HandFileButtonClick();"  value="Browse" id="firstremove" style="margin-top: 30px;" class="addmultiple">
            </div>
            <div style="float:right;margin-top: 30px;">
                <input type=text name="choicename1" id="firstremove2">

                <input type="button" value="Remove" id="firstremove3" onclick="document.getElementById('imgbg').style.display='none';document.getElementById('firstremove').style.display='none';document.getElementById('viewimg1').style.display='none';document.getElementById('firstremove2').style.display='none';document.getElementById('firstremove3').style.display='none';" style="color: red; font-size: 12px; border: 0px; background: none; text-decoration: underline;">
            </div>
    </div>
<img src="#" name="viewimg1" class="addmultiple" id="viewimg1" height="70px" width="85px" style="display:none"/>

<br />
    </div>
<span id="file" ></span>

<input id="addchoice" type=button value="Add New Entry" onclick="addnew(document.forms['addpoll']['choicecount'].value);"> 
```

当用户单击 addnewentry 按钮时，它会调用函数 addnew(count)。计数表示用户添加的选项数。这是该 addpoll 函数的编码 - javascript

```
<script>
    function addnew(type)
    {

    type=parseInt(type)+1;
    var name="choiceimg"+type;
    var name10="choiceimgs"+type;
    var name1="choicename"+type;
    var name2="viewimg"+type;
    var name3="remover"+type;
    var name4="br"+type;
    var mydiv = document.createElement("div");
    mydiv.setAttribute("id",imgbg);
    mydiv.setAttribute("style","width:110px;height:80px;float:left;text-align:center;border:1px solid #ccc;");
    var text = document.createElement("input");
    text.setAttribute("id", name10);
    text.setAttribute("type", "button");
    text.setAttribute("class", "addmultiple");
    text.setAttribute("style", "width: 190px");
    text.setAttribute("style", "padding-left: 5px;&nbsp;");
    text.setAttribute("value", "Browse");
    text.setAttribute("onclick", "HandleFileButtonClick(this)");
    text.setAttribute("name", name10);
    var textf = document.createElement("input");
    textf.setAttribute("type", "file");
    textf.setAttribute("class", "addmultiple");
    textf.setAttribute("style", "width: 246px");
    textf.setAttribute("style", "display:none;");
    textf.setAttribute("name", name);
    textf.setAttribute("onChange", "readURL(this)");
    var file = document.createElement("input");
    file.setAttribute("type", "text");
    file.setAttribute("name", name1);
    file.setAttribute("style", "margin-top: 60px;");
    var viewimg = document.createElement("img");
    viewimg.setAttribute("src", "#");
    viewimg.setAttribute("id", name2);
    viewimg.setAttribute("width", "85px");
    viewimg.setAttribute("height", "70px");
    viewimg.setAttribute("name", name2);
    viewimg.setAttribute("style", "display:none");
    viewimg.setAttribute("class", "addmultiple");
    var remove = document.createElement("input");
    remove.setAttribute("type", "button");
    remove.setAttribute("value", "Remove");
    remove.setAttribute("style", "color: red; font-size: 12px; border: 0px; background: none; text-decoration: underline;");
    remove.setAttribute("name", name3);
    remove.setAttribute("onclick", "remove(this)");
    var br1 = document.createElement("br");
    br1.setAttribute("id", name4);
    document.forms['addpoll']['choicecount'].value=type;
    var addfile = document.getElementById("file");
    var addtext = document.getElementById("file");
    var view = document.getElementById("file");
    var remove1 = document.getElementById("file");
    var br2 = document.getElementById("file");
    var textf1 = document.getElementById("file");
    var myimgdiv = document.getElementById("file");
    myimgdiv.appendChild(mydiv);
    addtext.appendChild(text);
    addfile.appendChild(file);
    remove1.appendChild(remove);
    view.appendChild(viewimg);
    br2.appendChild(br1);
    textf1.appendChild(textf);

    }

    </script> 
```

我想在这里改变的是，

当 mydiv 附加到文件时，它将 div 作为单独的，图像作为单独的。

![由 addnew 函数动态创建的 Div](../Images/307c321c9cc13917973c626488974261.png)

在上图中，第一组包括带有浏览按钮的框、选择名称的文本框和删除按钮来自表单内的编码。以下三个集合是由 addnew 函数动态添加的。但该框不包括其中的浏览按钮。而且我想要与第一个 div 相同的样式。但是在我花了一整天的时间后，我无法将动态 div 更改为与第一个 div 相同。任何人都可以帮助我解决这个问题。感谢您阅读并帮助我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:18:54.100

在您的 javascript 函数中需要更改许多内容：

**参考**，

```
mydiv.setAttribute("id",imgbg) 
```

`imgbg`什么都没有，所以创建一个新*的唯一*变量

```
var name5="imgbg"+type
mydiv.setAttribute("id",name5) 
```

当您想要附加按钮时，这将允许稍后引用这个特定的 div。

**样式**，将所有样式放在一起，如下所示：

```
text.setAttribute("style", "padding-left: 5px;margin-top: 30px;"); 
```

**Sequencing**，只有在您附加了 contains 之后`div`，您才能将按钮附加到它：

```
var myimgdiv = document.getElementById("file");
myimgdiv.appendChild(mydiv);
var addtext = document.getElementById(name5);
addtext.appendChild(text); 
```

快速示例：http: [//jsfiddle.net/3Sd4W/](http://jsfiddle.net/3Sd4W/)

# java - 如何对包含对象列表的对象列表进行分页

> ID：13966459
> 
> 赞同：2
> 
> 时间：2012-12-20T06:24:53.230
> 
> 标签：java, struts, displaytag

我有一个名为 Person 的对象，它具有以下属性：

```
private String firstname;
private String lastname;
private List<UserDetails> userList; 
```

现在我必须显示人员列表，并且需要分页。我正在考虑使用显示标签。但是，我无法找到如何使用显示标签在对象列表中显示列表，因为我是显示标签的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:40:06.020

```
<display:table name="test" id="person">
   <c:set var="userListVar" value="test.item[${parent_rowNum -1}].userList" />

  <display:column title="Related address">

    <display:table name="${userListVar}" id="child${parent_rowNum}" class="simple sublist">
        <display:column property="name" />

    </display:table>
  </display:column>
</display:table> 
```

供您参考

[http://demo.displaytag.org/displaytag-examples-1.1/example-nestedtables.jsp](http://demo.displaytag.org/displaytag-examples-1.1/example-nestedtables.jsp)

# ruby-on-rails - 未初始化的常量 Mongoid::Taggable::Mongo

> ID：13966460
> 
> 赞同：3
> 
> 时间：2012-12-20T06:24:57.353
> 
> 标签：ruby-on-rails, mongoid

我将[mongoid-taggable](https://github.com/wilkerlucio/mongoid_taggable)添加到我的 Gemfile 中，然后添加`include Mongoid::Taggable`到我的模型中，但收到一条错误消息：

```
uninitialized constant Mongoid::Taggable::Mongo 
```

错误跟踪：

```
app/models/recipe.rb:13:in `include'
app/models/recipe.rb:13:in `<class:Recipe>'
app/models/recipe.rb:2:in `<top (required)>'
app/controllers/recipes_controller.rb:11:in `index' 
```

有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:36:23.403

无需过多挖掘 Mongoid Taggable 的来源，我的猜测是它是为 2.xx 版本的 Mongoid 构建的。在 Mongoid 3.xx 版本中，`mongo`移除了对 gem 的依赖。似乎没有人在一年多的时间里致力于这个 gem，所以我怀疑它是否支持 Mongoid 的 3.xx 版本。

如果您打算使用此 gem 进行标记，则需要回滚到 Mongoid 的早期版本。2.4.12 是 2.xx 分支中的最后一个稳定版本。

另一种解决方案是使用不同的宝石。我会推荐[mongoid-tags-arent-hard](http://rubygems.org/gems/mongoid-tags-arent-hard)。它与 Mongoid 3 兼容，并且运行良好。

# wordpress - WordPress 页面与 WordPress 类别

> ID：13966464
> 
> 赞同：0
> 
> 时间：2012-12-20T06:25:09.833
> 
> 标签：wordpress, categories

我在这里有几个问题，因为我是新手，`WordPress`所以我希望你能以一种不会让我在说明中混淆的方式帮助我。

1.  我的主菜单上有*页面*。我们都知道*页面*是静态的，只接受 1 个帖子。我的页面是主页、亲爱的日记、爱好、职业发展、关于和联系。每个帖子都转到首页。现在，如果我发布新帖子，我只想让它出现在这个特定页面中，而不会出现在主页中。比如说，我有一个标题为“WordPress 体验”的新帖子。我希望“WordPress 体验”帖子不会出现在主页中，而是直接出现在亲爱的日记页面中。这怎么可能？

2.  我已经阅读了关于我的 #1 问题的[教程](http://moshublog.com/2007/07/26/pages-and-categories/)，但我无法掌握该教程，我发现我很难遵循。

    我尝试这样做，但最终在我的主菜单上拥有所有*页面*和*类别。*如果在主菜单中我希望某个页面和某个类别出现在顶部，是否有可能？

3.  是否可以不将类别放在主菜单中，但是当帖子被分类时，它会立即转到该特定页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:05:36.030

这是您需要做的，以使您的新博客文章出现在“亲爱的日记页面”中

1) 登录到您的 wordress 仪表板（我假设您使用的是 Wordpress 3.0 及更高版本） 2) 在左侧的设置下，单击阅读设置。3）在中间，会有一个“首页显示”部分，这使您可以控制您希望您的首页（主页）显示什么以及您希望您的博客文章显示哪个页面。

将首页显示更改为：静态页面（这是单选按钮表单输入）

更改为“静态页面”后，您将有权更改其下方的 2 个下拉输入。

1) 第一个下拉菜单将为您提供您希望将哪个页面设置为首页或在本例中为主页的选项。**选择首页**

2) 第二个下拉菜单让您可以选择所有博客文章都将转到的页面。**选择亲爱的日记页面**

关于让菜单显示某些页面/类别的问题..是的，可以做到:) 只要您使用的主题支持 Wordpress 导航菜单。

[http://codex.wordpress.org/Navigation_Menus](http://codex.wordpress.org/Navigation_Menus)

如果不是，您将需要在主题中添加对它的支持，这需要一些主题调整知识。

如果您的主题确实支持它，这里有一个关于如何使用 Wordpress 3.0 的菜单选项的链接： http: [//codex.wordpress.org/WordPress_Menu_User_Guide](http://codex.wordpress.org/WordPress_Menu_User_Guide)

希望这可以帮助 ：）

# java - 如何避免锁定等待超时超出异常。？

> ID：13966467
> 
> 赞同：21
> 
> 时间：2012-12-20T06:25:15.483
> 
> 标签：java, mysql, hibernate

```
 java.sql.SQLException: Lock wait timeout exceeded; try restarting tra
nsaction at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1055)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3558)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3490)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1959)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2109)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2648)
        at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.ja
va:2077)
        at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:
2228)
        at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:
208)
        at org.hibernate.loader.Loader.getResultSet(Loader.java:1812)
        at org.hibernate.loader.Loader.doQuery(Loader.java:697)
        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Lo
ader.java:259)
        at org.hibernate.loader.Loader.loadEntity(Loader.java:1885)
        ... 131 more 
```

更新记录时，我收到重复的锁定超时超出异常。

我正在使用 Java Struts 2.1 Hibernate 配置。使用的数据库是 MYSQL。

任何人都知道如何解决它..??

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-20T07:40:32.050

以下是一些建议：

1.  “<strong>锁定等待超时”通常发生在事务正在等待更新已被其他事务锁定的数据行时。
2.  大多数时候，问题出在数据库方面。可能的原因可能是不适当的表设计、大量数据、约束等。
3.  请查看这个[详尽的答案](https://stackoverflow.com/a/6005564/750040)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-14T10:12:18.373

这也可能是由以下注释的滥用引起的，就像在[这篇](https://stackoverflow.com/questions/8847377/propagation-requires-new-causing-lockwaittimeoutexception)StackOverflow 文章中一样：

```
@Transactional(propagation = Propagation.REQUIRES_NEW) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-23T12:31:37.190

确保数据库表使用 InnoDB 存储引擎和 READ-COMMITTED 事务隔离级别。

您可以`SELECT @@GLOBAL.tx_isolation, @@tx_isolation;`在 mysql 控制台上进行检查。

如果未设置为 READ-COMMITTED，则必须设置它。在设置它之前，请确保您在 mysql 中具有 SUPER 权限。

您可以从[http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html 获得](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)帮助。

通过设置这个我认为你的问题会得到解决。

谢谢你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-22T10:44:38.977

（恭敬地忽略数据库特定的答案）

当使用正式的[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)模式和通过 Singleton 类引导的所有数据库流量时，您仍然会遇到线程锁定。这通常是由于您自己、大学和 Hibernate 团队之间的疏忽而发生的。因此，检查自己的代码是否有错误是最快的——特别注意hibernate 的核心规则。

通常，[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)接口具有共享公共*私有方法的**公共*“创建”、“读取”、“更新”和“删除”方法。这样做是为了[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)最佳实践。但是，在这样做的过程中，这些方法在大多数情况下都可以完美运行，但并非所有时间。

 *那么，*如何测试和解决线程锁定呢？*

**确保：**

*   `session.save(myObj)`行动首先检查PK的唯一性
*   所有`uniqueResult()`查询确实返回 1 个结果，并且；

    （重要！）关注测试用例：

    *   引入PK重复
    *   更新/读取/删除不存在的记录/条目/行

最后，使用`@AfterSuite`( [TestNG](http://testng.org/doc/index.html) ) 删除所有表条目。任何不充分的实现都会在上述操作上产生另一个线程锁......否则，你就是黄金。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-24T18:52:33.703

删除`@Transactional(propagation = Propagation.REQUIRES_NEW)`并检查。它会工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-29T18:21:07.000

检查您的 where 子句是否已优化.. 即使用主键和/或索引

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-03T17:13:50.977

如果以上所有方法都不起作用，请检查 mysql 日志中的错误消息。如果提到日志文件的大小，你需要在配置中增加它并重启mysql服务器。*

# c++ - 哪个 STL 对象或内存管理用于动态实体

> ID：13966468
> 
> 赞同：-2
> 
> 时间：2012-12-20T06:25:16.570
> 
> 标签：c++

我正在开发用于大规模计算的应用程序，并且对 STL 对象的选择和/或更好的内存管理技术以最小化计算资源有一些具体的问题。

具体来说，我的问题如下：我目前正在使用 STL 向量 obj 来存储文件中的数据，如下所示：

```
x x x x 0 0 0; x x x 0 0 0 0; x x x x x x x;......... 
```

我想把它变成：

```
x x x x; x x x; x x x x x x x;............ 
```

是否有一种内存有效且快速的方法来做到这一点（想尽可能少地使用内存）？我可以进行就地更改吗？文件中每个冒号之间的数据大小（包括零）是恒定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:37:45.953

您可以将数字及其偏移量存储在单独的`std::vector`实例中：

```
typedef std::vector<unsigned char> Data;
Data data;
std::vector<Data::size_type> offsets; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:21:33.977

您可以使用[`std::remove_if`](http://en.cppreference.com/w/cpp/algorithm/remove)and 之后`std::vector::erase`：

```
typedef std::vector<char> data_type;

data_type vec; // fill vector...

const data_type::size_type datasize;
const data_type::size_type zerosize;
const data_type::size_type packagesize = datasize + zerosize;
size_t i = 0;

auto newend = std::remove_if(vec.begin(), vec.end(), [&](data_type::value_type){
    if(i >= datasize && i < packagesize)
        return true; // remove all zeros
    if(i >= packagesize)
        i = 0;
    return false;    // keep all other values
});

vec.erase(newend,vec.end()); // remove old values
vec.shrink_to_fit(); 
```

# cuda - 为什么 CUDA 编译器内在函数 __fadd_rd 等对我不起作用？

> ID：13966469
> 
> 赞同：1
> 
> 时间：2012-12-20T06:25:17.637
> 
> 标签：cuda, compiler-errors, nvcc

为什么我不能在 CUDA 5.0 中使用[这些](http://docs.nvidia.com/cuda/cuda-math-api/index.html#group__CUDA__MATH__INTRINSIC__SINGLE)编译器内在函数？

在 Visual Studio 2010 中，安装了 CUDA 工具包 5.0 和 Nsight 后，我​​能够编译和运行大多数 CUDA 代码，但`__fadd_ru`报告为未定义等。[这](http://pastebin.com/4i1PyLQS)是我要编译的代码。

编辑：当在同一个项目中包含以下任一包含时，内在函数似乎变得未定义：

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:28:56.243

问题是由在项目中包含 CUDA 运行时标头引起的（不知何故）。

NVCC 编译器自动管理 cuda 运行时的包含，因此您无需手动包含它来编译。您要添加的主要原因

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h" 
```

对您的代码进行修改，这样您的 IDE 就不会显示错误的语法错误。由于某种原因添加`device_launch_parameters.h`（`cuda_runtime.h`取决于），将导致 NVCC 用于算术的内在编译器函数出现未定义。

所以修复：当你想编译时，从项目中删除这两个包含。

# iphone - 如何将 ARC 项目转换为非 ARC？

> ID：13966473
> 
> 赞同：8
> 
> 时间：2012-12-20T06:25:35.060
> 
> 标签：iphone, automatic-ref-counting

据我所知，我知道我们`-fno-objc-arc`在 ARC 项目中使用标志来禁用不支持 ARC 的文件的 ARC。

我们也可以使用`-fobjc-arc`flag 来启用 ARC，以便在非 ARC 项目中支持 ARC 的文件。

> 但是如果我想将我的 ARC 项目（不是特定文件）转换为非 ARC 项目，那么我应该如何继续呢？

任何人都请简要介绍一下。

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T06:28:50.417

你需要按照这个步骤

1.  转到您的项目目标 - 搜索 - Objective-C 自动引用计数器

2.  `NO`从 YES设置

享受编程！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T06:31:10.997

您必须在适当的位置插入手动内存管理方法调用。一般来说，每一个`new`, `alloc`, `retain`,`copy`和`mutableCopy`call 都应该由 a`release`或 an来平衡`autorelease`（后者主要用于返回值的情况），因此，例如，以下启用 ARC 的代码：

```
MyClass *myObj = [[MyClass alloc] init];
[myObj doStuff];

OtherClass *otherObj = [[OtherClass alloc] init];
return otherObj; 
```

在 MRC 下应该是这样的：

```
MyClass *myObj = [[MyClass alloc] init];
[myObj doStuff];
[myObj release];

OtherClass *otherObj = [[OtherClass alloc] init];
return [otherObj autorelease]; 
```

[官方文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)中有关内存管理的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-07T09:09:18.863

[![在此处输入图像描述](../Images/b2a9ee91b813d88ee5b53c713678540e.png)](https://i.stack.imgur.com/RVEwJ.png)

非常简单的方式编辑 -> 隐蔽 -> 到 Objective-C ARC

# ios - 如何导入常规（非库）xcode 项目？

> ID：13966483
> 
> 赞同：0
> 
> 时间：2012-12-20T06:27:16.453
> 
> 标签：ios, xcode

我正在编写 IOS 项目的一部分，称为 project1。我不想更改源代码和故事板的其他部分来测试我的代码，而是想创建一个名为 project2 的新项目，用于测试代码。但是，为了做到这一点，我需要导入 project1 使用的许多库和源文件。所以我想导入project1作为project2的库，我该怎么做呢？

我只是将project1拖到project2中，但它不起作用 ![在此处输入图像描述](../Images/587a8267b7f40a01444f0ce64ed8a00a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:30:55.617

您可能想要考虑而不是创建一个完全不同的项目，而只是在项目 1 中创建一个仅用于测试的新目标。它会获得不同的 appID、info.plist、编译设置以及您想要的任何其他内容。

您可以通过在项目信息视图中右键单击当前目标并选择“复制目标”来最轻松地开始。然后它从您在主项目中拥有的所有当前设置、库和源代码文件开始。

当您选择在新项目中包含单元测试时，这也是 XCode 的工作方式，因此该方法有一个很好的先例。

# android - 如何在服务中放置一个 onclick 侦听器

> ID：13966485
> 
> 赞同：4
> 
> 时间：2012-12-20T06:27:25.303
> 
> 标签：android, service, onclick, onclicklistener, android-notifications

我试图将此侦听器放在服务中，以在通知栏内的自定义视图中`onClick`注册点击。但是得到编译器错误。有谁知道为什么会出现编译错误？`button``xml``onClickListener`

```
 RemoteViews remoteviews = new RemoteViews("com.example.test", R.layout.custom_notifications);

     NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(AudioService.this)
               .setContent(remoteviews)
                .setSmallIcon(R.drawable.ic_launcher)
                .setContentTitle("My notification")
                .setContentText("Hello World!")
                .setOngoing(true);

     remoteviews.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

        Toast.makeText(AudioViewer.this, "play button was clicked", Toast.LENGTH_LONG).show();
            }
        }); 
```

编译器的错误如下图所示：

![在此处输入图像描述](../Images/69e25f26b06d6a51c3fe8bae3ece2dc4.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T06:39:25.787

你需要`setOnClickPendingIntent`改用。RemoteViews 类没有`setOnClickListener`定义方法。

你需要做这样的事情：

```
this.registerReceiver(new BroadcastReceiver() {
                @Override
                public void onReceive(Context context, Intent intent) {
                    Toast.makeText(AudioViewer.this,
                        "play button was clicked", Toast.LENGTH_LONG).show();
                }
            }, new IntentFilter("MyRemoteViewsBroadcast"));
PendingIntent pi = PendingIntent.getBroadcast(this, 0,
                       new Intent("MyRemoteViewsBroadcast"), 0);
remoteviews.setOnClickPendingIntent(R.layout.custom_notifications, pi); 
```

# jquery - 帖子ID的评论插件

> ID：13966486
> 
> 赞同：2
> 
> 时间：2012-12-20T06:27:31.603
> 
> 标签：jquery, facebook-like, facebook-comments, facebook-likebox

可能我不是第一个问这个的人。

我发现[这篇文章](http://facebook.stackoverflow.com/questions/11350304/populating-a-facebook-comments-box-social-plugin-fbcomments-with-comments-to)与我的查询匹配，但也没有得到答复。

基本上，我在 Facebook 上有一个自定义应用程序，我在其中显示了一个页面，该页面会在单击用户墙上的帖子后出现。现在我想在我的自定义页面上的墙上的帖子上显示任何评论/喜欢。我有帖子ID。

所以基本问题是如何使用评论/喜欢插件来显示帖子而不是 URL 的评论。

我本可以尝试 XID，但我注意到帖子没有 XID。

那么，有没有办法可以使用评论/喜欢插件来显示来自 post_id 的评论/喜欢？还是我必须为此制作自定义 HTML？

# c# - 在 C# 中将 Unicode 字符串转换为印度语言的 Unicode 字符

> ID：13966487
> 
> 赞同：8
> 
> 时间：2012-12-20T06:27:32.807
> 
> 标签：c#, .net, unicode, .net-2.0, tamil

我需要将 unicode 字符串转换为 unicode 字符。

例如：语言泰米尔语

**"கமலி"=>'க','ம','லி'**

我能够剥离 unicode 字节，但产生 unicode 字符成为问题。

```
byte[] stringBytes = Encoding.Unicode.GetBytes("கமலி");
char[] stringChars = Encoding.Unicode.GetChars(stringBytes);
foreach (var crt in stringChars)
 {
     Trace.WriteLine(crt);
 } 
```

它给出的结果为：

'க'=>0x0b95

'ம'=>0x0bae

'ல'=>0x0bb2

'ி'=>0x0bbf

*所以这里的问题是如何将字符'லி'剥离为'லி'而不像'ல'，'ி'那样分裂。*

因为在印度语言中通过将辅音和元音表示为单个字符是很自然的，但是用 c# 解析会很困难。

我只需要分成 3 个字符。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T07:08:31.130

要遍历字素，您可以使用[`StringInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.stringinfo.aspx)类的方法。

.NET 文档将基本字符 + 组合字符的每个组合称为“文本元素”，您可以使用以下命令对它们进行迭代[`TextElementEnumerator`](http://msdn.microsoft.com/en-us/library/system.globalization.textelementenumerator.aspx)：

```
var str = "கமலி";
var enumerator = System.Globalization.StringInfo.GetTextElementEnumerator(str);
while (enumerator.MoveNext())
{
    Console.WriteLine(enumerator.Current);
} 
```

输出：

```
க
ம
லி 
```

# jsf - 传入参数的问题 ViewScoped bean 的

> ID：13966490
> 
> 赞同：3
> 
> 时间：2012-12-20T06:28:11.097
> 
> 标签：jsf, jakarta-ee, jsf-2, managed-bean

我有一个 ViewScoped jsf 页面，其中列出了一组基于 accountId 的事务。当用户导航到页面时，accountId 会在 URL 中传递，例如 transactions_byaccount?accountId=3。这会在 @PostConstruct 循环中为提供的 accountId(bound to #{param.accountId}) 加载交易，并使用 .

在列出的每个事务上，用户还可以通过选择一个下拉菜单并单击一个按钮来更改事务的类别，该按钮调用一个在 EL 方法表达式中传递事务的操作。除了以下情况外，这按预期工作。

进入页面后，还可以使用下拉列表，其中包含其他帐户的列表，下拉值绑定到 accountId。当用户单击重新加载按钮时，将调用该操作以获取与新选择的帐户关联的交易。交易按预期列出。但是，当用户现在为事务选择一个新类别并单击按钮以更新事务时，EL 方法表达式将使用用户用于导航到页面的第一个事务列表中的事务调用该操作。

有人提到如果列表值更改不兼容可能会发生这种情况，但我的getter方法目前是一个非常简单的方法。

非常感激任何的帮助。

[jsf在方法表达式中传递参数在ViewScoped bean中失败](https://stackoverflow.com/questions/13910111/jsf-passing-parameters-in-a-method-expression-failes-in-viewscoped-bean)

完整代码如下

我的 bean 包 applogic.transactions；

```
import java.sql.Connection;
import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.RequestScoped;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import javax.faces.model.SelectItem;

import applogic.Conns;

import finance.bean.TransactionsListBean;
import finance.dao.AccountsDAO;
import finance.dao.TransactionsDAO;
import finance.daobase.BusinessDAO;
import finance.model.Accounts;
import finance.model.Transactions;
import java.io.Serializable;
import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

@ManagedBean(name = "transactions_byaccount")
@ViewScoped
public class Transactions_Byaccount extends TransactionsListBean implements Serializable {
    List<Transactions> resultList;

    boolean initialized;

    @ManagedProperty("#{param.accountId}")
    private int accountId;

    public SelectItem[] accountsSelections;

    @ManagedProperty("#{param.sortOrder}")
    private int sortOrder;

    public SelectItem[] sortOrderSelections;

    @ManagedProperty("#{param.orderColumn}")
    private int orderColumn;

    public SelectItem[] orderColumnSelections;

    public Transactions_Byaccount() {

    }

    public String updateCategories(String redirectURL) {
        String result = redirectURL;

        Connection cons = Conns.getConFinanceDB();
        for( Transactions temp : (List<Transactions>)this.getPageList() )
            TransactionsDAO.Update(cons, temp);

        resultList = null;

        if( redirectURL != null && redirectURL.length() == 0 )
            redirectURL = null;

        return redirectURL;
    }

    public String updateCategory(String redirectURL, Transactions arg) {
        String result = redirectURL;

        Connection cons = Conns.getConFinanceDB();
        TransactionsDAO.Update(cons, arg);

        resultList = null;

        if( redirectURL != null && redirectURL.length() == 0 )
            redirectURL = null;

        return result;
    }

    @PostConstruct
    public void init() {
        //if (FacesContext.getCurrentInstance().) {
            if(resultList == null || initialized == false) {
                 Connection cons = Conns.getConFinanceDB();
                 List<Accounts> accountsList = AccountsDAO.List(cons);
                 List<SelectItem> listOfAccountsSelectItems = new
                 ArrayList<SelectItem>();

                 for( Accounts temp : accountsList ) {
                     listOfAccountsSelectItems.add(new SelectItem(temp.getId(), temp.getTitle()));
                 }

                 accountsSelections = listOfAccountsSelectItems.toArray(new SelectItem[listOfAccountsSelectItems.size()]);

                 List<SelectItem> sortOrderList = new ArrayList<SelectItem>();
                 sortOrderList.add(new SelectItem(1, "Asc"));
                 sortOrderList.add(new SelectItem(2, "Desc"));       
                 sortOrderSelections = sortOrderList.toArray(new SelectItem[sortOrderList.size()]);

                 List<SelectItem> orderColumnList = new ArrayList<SelectItem>();
                 orderColumnList.add(new SelectItem(1, "Transaction Date"));
                 orderColumnList.add(new SelectItem(2, "Action Date"));      
                 orderColumnList.add(new SelectItem(3, "Reconciled Date"));
                 orderColumnSelections = orderColumnList.toArray(new SelectItem[orderColumnList.size()]);       

                resultList = TransactionsDAO.ListByaccount(cons, accountId, getCurrentPageNo(), getPageSize(), orderColumn, sortOrder);
                initialized = true;
            }
        // }

    }

    public void reload() {
        Connection con = Conns.getConFinanceDB();
        resultList = TransactionsDAO.ListByaccount(con, accountId, getCurrentPageNo(), getPageSize(), orderColumn, sortOrder);
        initialized = true;

    }

    public String reload(String returnUrl) {
        Connection con = Conns.getConFinanceDB();
        resultList = TransactionsDAO.ListByaccount(con, accountId, getCurrentPageNo(), getPageSize(), orderColumn, sortOrder);
        initialized = true;     
        return returnUrl;
    }

    public Object getPageList() {
        return resultList;
    }

    public int getMaxCount() {
        Connection con = Conns.getConFinanceDB();
        int result = TransactionsDAO.CountByaccount(con, accountId);
        return result;
    }

    public int getAccountId() {
        return accountId;
    }

    public void setAccountId(int accountId) {
        this.accountId = accountId;
    }

    public SelectItem[] getAccountsSelections() {
        return accountsSelections;
    }

    public void setAccountsSelections(SelectItem[] accountsSelections) {
        this.accountsSelections = accountsSelections;
    }

    public int getSortOrder() {
        return sortOrder;
    }

    public void setSortOrder(int sortOrder) {
        this.sortOrder = sortOrder;
    }

    public SelectItem[] getSortOrderSelections() {
        return sortOrderSelections;
    }

    public void setSortOrderSelections(SelectItem[] sortOrderSelections) {
        this.sortOrderSelections = sortOrderSelections;
    }

    public int getOrderColumn() {
        return orderColumn;
    }

    public void setOrderColumn(int orderColumn) {
        this.orderColumn = orderColumn;
    }

    public SelectItem[] getOrderColumnSelections() {
        return orderColumnSelections;
    }

    public void setOrderColumnSelections(SelectItem[] orderColumnSelections) {
        this.orderColumnSelections = orderColumnSelections;
    }   

    public boolean isInitialized() {
        return initialized;
    }

    public void setInitialized(boolean initialized) {
        this.initialized = initialized;
    }

    public List<Transactions> getResultList() {
        return resultList;
    }

    public void setResultList(List<Transactions> resultList) {
        this.resultList = resultList;
    }
} 
```

现在我的页面

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:f="http://java.sun.com/jsf/core" xml:lang="en" lang="en">

<ui:composition template="/WEB-INF/templates/template_main.xhtml">
    <ui:param name="title" value="transactions"></ui:param>
    <f:metadata>
        <f:viewParam name="pageNo" value="#{transactions_byaccount.pageNo}"/>
        <f:viewParam name="accountId" value="#{transactions_byaccount.accountId}"/>
        <f:viewParam name="sortOrder" value="#{transactions_byaccount.sortOrder}"/>
        <f:viewParam name="orderColumn" value="#{transactions_byaccount.orderColumn}"/>
        <f:event type="preRenderView" listener="#{transactions_byaccount.init}" />
    </f:metadata>
    <ui:define name="operationalbar">
        <div>
            <span >
                <h:selectOneMenu value="#{transactions_byaccount.accountId}" >
                    <f:selectItems value="#{transactions_byaccount.accountsSelections}"/>
                </h:selectOneMenu>
            </span>
            <span >
                <h:commandLink action="#{transactions_byaccount.reload('')}">
                    <h:outputText value="Reload"></h:outputText>
                    <f:param name="pageNo" value="1" />
                    <f:param name="accountId" value="#{transactions_byaccount.accountId}" />
                    <f:param name="sortOrder" value="#{transactions_byaccount.sortOrder}" />
                    <f:param name="orderColumn" value="#{transactions_byaccount.orderColumn}" />
                </h:commandLink>
            </span>         
            <span>
                <h:link outcome="transactions_byaccount_header">
                    <h:outputText value="Back to accounts list"></h:outputText>
                </h:link>
            </span>         
            <span>
                <h:commandLink action="#{transactions_byaccount.updateCategories('')}">
                    <h:outputText value="Update Categories"></h:outputText>
                    <f:param name="pageNo" value="#{param.pageNo}" />
                    <f:param name="accountId" value="#{param.accountId}" />
                    <f:param name="sortOrder" value="#{param.sortOrder}" />
                    <f:param name="orderColumn" value="#{param.orderColumn}" />
                </h:commandLink>        
            </span>
            <div></div> 
        </div>
    </ui:define>

    <ui:define name="pagingbar">
        <div>
            <span>
                <h:commandLink title="Go to page first page"  >
                    <h:outputText value="first"></h:outputText>
                        <f:param name="pageNo" value="#{transactions_byaccount.firstPage}" />
                        <f:param name="accountId" value="#{param.accountId}" />
                        <f:param name="sortOrder" value="#{param.sortOrder}" />
                        <f:param name="orderColumn" value="#{param.orderColumn}" />             
                </h:commandLink>
            </span>
            <span>
                <h:commandLink title="Go to page prev page">
                    <h:outputText value="prev"></h:outputText>
                        <f:param name="pageNo" value="#{transactions_byaccount.prevPage}" />
                        <f:param name="accountId" value="#{param.accountId}" />
                        <f:param name="sortOrder" value="#{param.sortOrder}" />
                        <f:param name="orderColumn" value="#{param.orderColumn}" />
                </h:commandLink>

            </span>
                <ui:repeat value="#{transactions_byaccount.pages}" var="itemx">
                    <span style="font-weight: #{itemx == transactions_byaccount.currentPageNo ? 'bold' : 'lighter' }">
                    <h:commandLink>
                        <h:outputText value="#{itemx}"></h:outputText>
                        <f:param name="pageNo" value="#{itemx}" />
                        <f:param name="accountId" value="#{param.accountId}" />
                        <f:param name="sortOrder" value="#{param.sortOrder}" />
                        <f:param name="orderColumn" value="#{param.orderColumn}" />

                    </h:commandLink>
                </span>
            </ui:repeat>                

        <span>
            <h:commandLink title="Go to page next page">
                <h:outputText value="next"></h:outputText>
                    <f:param name="pageNo" value="#{transactions_byaccount.nextPage}" />
                    <f:param name="accountId" value="#{param.accountId}" />
                    <f:param name="sortOrder" value="#{param.sortOrder}" />
                    <f:param name="orderColumn" value="#{param.orderColumn}" />
            </h:commandLink>
        </span>
        <span>
            <h:commandLink title="Go to page last page">
                <h:outputText value="last"></h:outputText>
                    <f:param name="pageNo" value="#{transactions_byaccount.lastPage}" />
                    <f:param name="accountId" value="#{param.accountId}" />
                    <f:param name="sortOrder" value="#{param.sortOrder}" />
                    <f:param name="orderColumn" value="#{param.orderColumn}" />

            </h:commandLink>                
        </span>         
    </div>
    <div class="currentPagerIndex">

    </div>
</ui:define>
<ui:define name="maincontent">
    <table class="datatable">
        <thead>
            <tr class="headRow">
                <td>datetransaction</td>
                <td>description</td>
                <td>amount</td>
                <td>Edit</td>
                <td>Delete</td>
            </tr>
        </thead>
        <ui:repeat value="#{transactions_byaccount.pageList}" var="itmy">
            <tr class="dataRow">
                <td class="dataCell cltdtransactionsdatetransaction">
                      <h:outputText value="#{itmy.datetransaction}" >
                            <f:convertDateTime pattern="EEE dd-MMM-yyyy HH:mm" />
                          </h:outputText>
                </td>
                <td class="dataCell cltdtransactionsdescription">#{itmy.description}</td>
                <td class="dataCell cltdtransactionsamount">#{itmy.amount}</td>
                <td style="width: 45px">
                    <span class="pagerDBspan" style="font-weight: bold;">                   
                        <h:link outcome="transactions_edit" style="font-weight: bold;">
                            <h:outputText value="Edit"></h:outputText>
                            <f:param name="pageNo" value="#{param.pageNo}" />
                            <f:param name="itemId" value="#{itmy.id}" />
                        </h:link>
                    </span>                 
                </td>
                <td style="width: 45px">
                    <span class="pagerDBspan" style="font-weight: bold;">
                        <h:link  outcome="transactions_edit" >
                            <h:outputText value="Delete"></h:outputText>
                            <f:param name="pageNo" value="#{param.pageNo}" />
                            <f:param name="itemId" value="#{itmy.id}" />
                            <f:param name="deleteFlag" value="true" />                                  
                        </h:link>       
                    </span>                 
                </td>
            </tr>
            <tr class="dataRow">
                <td class="dataCell"></td>
                <td class="dataCell" colspan="2">
                    <h:selectOneMenu value="#{itmy.fkCategoriesId}" >
                        <f:selectItems value="#{categories_edit.categories}"/>
                    </h:selectOneMenu>
                </td>
                <td colspan="2">
                    <span class="pagerDBspan" style="font-weight: bold;">
                            <h:commandLink action="#{transactions_byaccount.updateCategory('', itmy)}" >
                                <h:outputText value="Update"></h:outputText>        
                                <f:param name="pageNo" value="#{param.pageNo}" />
                                <f:param name="accountId" value="#{param.accountId}" />
                                <f:param name="sortOrder" value="#{param.sortOrder}" />
                                <f:param name="orderColumn" value="#{param.orderColumn}" />                                                                         
                            </h:commandLink>
                        </span>                                         
                    </td>
                </tr>
                <tr>
                    <td class="cssBottomLine" colspan="0"></td>
                </tr>                   
            </ui:repeat>
        </table>
    </ui:define>

    <ui:define name="bottomoperationalbarhost">
    </ui:define>

</ui:composition>
</html> 
```

# hadoop - Hadoop namenode 和 tasktracker 停止工作

> ID：13966498
> 
> 赞同：1
> 
> 时间：2012-12-20T06:28:54.380
> 
> 标签：hadoop

我有完美运行的 Hadoop 3 节点集群。第二天，namenode 和 jobtracker 停止工作，datanode 和 tasktracker 继续工作。启动hadoop后，它适用于那天，第二天我遇到了同样的问题。我每天都在启动集群。

# c# - 用于包含的 Linq to sql 代码

> ID：13966499
> 
> 赞同：0
> 
> 时间：2012-12-20T06:29:09.357
> 
> 标签：c#, wcf, linq, linq-to-sql

我有以下代码用于从 sql(linq to sql) 读取数据

对于 strSkillchk，我可以根据提供的值传递单个值或多个值，我需要输出

```
 string[] strSkillchk = new string[] {"10,11"};
 var getskilldim = (from tblskilldim in Skill_Dimensions
 where tblskilldim.Status == true && strSkillchk.Contains(tblskilldim.SkillSetId.ToString())
         select new Class
         {
             SkillDimenId = tblskilldim.SkillDimenId,
             SkillDimenName = tblskilldim.SkillDimenName
         }).ToList(); 
```

我的 sql 表看起来像

```
SkillDimenId    SkillDimenName   SkillSetId
  1                 Dimen1          10,11
  2                 Dimen2          11
  3                 Dimen3          10 
```

但是当我执行上面的查询时，它只给了我第 2 行和第 3 行但是我想要以下输出，

```
SkillDimenId      SkillDimenName      SkillSetId
  1                 Dimen1              10
  1                 Dimen1              11
  2                 Dimen2              11
  3                 Dimen3              10 
```

任何 1 都可以帮我解决 linq to sql c# 的这个问题吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:49:23.050

你需要做的是改变

```
strSkillchk.Contains(tblskilldim.SkillSetId.ToString()) 
```

至

```
tblskilldim.SkillSetId.Split(',').Any(x=>strSkillchk.Contains(x)) 
```

但我真诚地怀疑 liq to sql 会处理这样的请求，即使这样它也会返回

```
 1                 Dimen1          10,11
  2                 Dimen2          11
  3                 Dimen3          10 
```

您的数据库的问题在于您通过 id 的连接完成了多对多的映射。这种关系通常是通过引入第三个表来完成的，该表只包含其他两个表的 ID。在这种情况下，您的查询会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:43:01.383

你好，我能够得到与此类似的输出

```
 1                 Dimen1          10,11
  2                 Dimen2          11
  3                 Dimen3          10 
```

使用下面的代码，希望对你有帮助

```
 public class SKillIDDemo
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public string SkillSetID { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            List<SKillIDDemo> demos = new List<SKillIDDemo>();

            demos.Add(new SKillIDDemo() { ID = 1, Name = "demo1", SkillSetID = "10,1" });
            demos.Add(new SKillIDDemo() { ID = 2, Name = "demo2", SkillSetID = "10" });
            demos.Add(new SKillIDDemo() { ID = 3, Name = "demo3", SkillSetID = "1" });
            demos.Add(new SKillIDDemo() { ID = 4, Name = "demo4", SkillSetID = "12" });

            string[] skillset = { "10","1" };

            var testme =   demos.Where(x=> skillset.Any(a=> x.SkillSetID.Split(new char[] {','}, StringSplitOptions.RemoveEmptyEntries).Contains(a))).ToList();

            testme.ForEach(g=> Console.WriteLine(g.Name));  

            Console.ReadLine();
        }
    } 
```

# ruby-on-rails - 在rails 3中运行黄瓜时object.keys不是一个函数

> ID：13966503
> 
> 赞同：1
> 
> 时间：2012-12-20T06:29:48.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cucumber

我正在尝试在 rails 3 环境中运行几个黄瓜文件。以下是相关文件的列表。

**宝石文件：-**

```
group :test do
  # Pretty printed test output
  gem 'turn', '< 0.8.3'
  gem 'capybara'#,'1.1.2'
  gem 'launchy','2.0.5'
  gem 'cucumber-rails','1.2.1'
  gem 'cucumber','1.1.4'
  gem 'rspec-rails','2.8.1'
  gem 'rspec-cells','0.1.2'
  gem 'email_spec' 
  gem 'machinist', '>= 2.0.0.beta2'
  gem "factory_girl_rails"
  gem "guard-rspec"
  gem "minitest"
  gem 'headless'
  gem 'minitest-rails'
  gem 'minitest-rails-capybara'
  # gem 'minitest-rails',:git => "git://github.com/rawongithub/minitest-rails.git"  
  # gem 'capybara_minitest_spec'
  gem 'rails_sql_views', :git => 'https://github.com/mremolt/rails_sql_views.git'
 end 
```

**环境.rb**

```
require 'fakeweb' 
require 'simplecov'
SimpleCov.start 'rails'
require 'cucumber/rails'
require 'email_spec' # add this line if you use spork
require 'email_spec/cucumber'

Capybara.default_selector = :css
ActionController::Base.allow_rescue = false

begin
  DatabaseCleaner.strategy = :transaction
rescue NameError
  raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
end

  Before do
     DatabaseCleaner.strategy = :truncation, {:except => %w[widgets]}
     DatabaseCleaner.clean
     DatabaseCleaner.start
  end

   After do
     DatabaseCleaner.strategy = :transaction
     DatabaseCleaner.clean
   end

After('@javascript, @selenium') do
   wait_until { page.has_content? '' }
end    

end 
```

当我跑步时`rake ruby -S bundle exec cucumber -p default --require features features/running_files/login.feature:27`

我得到这个错误

```
 And I fill in "user[email]" with "admin@newadmin.com"               # features/step_definitions/web_steps.rb:109
      Object.keys is not a function (Selenium::WebDriver::Error::UnknownError)
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/driver_component.js:8169:in `unknown'
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/driver_component.js:388:in `unknown'
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/driver_component.js:390:in `unknown'
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/driver_component.js:8205:in `unknown'
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/driver_component.js:388:in `unknown'
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/driver_component.js:390:in `unknown'
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/driver_component.js:8206:in `injectAndExecuteScript'
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/driver_component.js:8211:in `unknown'
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/command_processor.js:263:in `unknown'
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/command_processor.js:10222:in `unknown'
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/command_processor.js:10227:in `unknown'
      [remote server] file:///tmp/webdriver-profile20121220-28325-14ft8a7/extensions/fxdriver@googlecode.com/components/command_processor.js:10167:in `unknown'
      ./features/step_definitions/web_steps.rb:110:in `/^I fill in "([^"]*)" with "([^"]*)"$/' 
```

我仍然无法弄清楚是什么原因。而且我还没有做任何重大改变。

# java - 如何在屏幕中央设置弹出列表

> ID：13966504
> 
> 赞同：1
> 
> 时间：2012-12-20T06:29:51.823
> 
> 标签：java, android

我想在水平和垂直模式下将我的弹出列表设置到屏幕的中心。

我使用了以下代码：

```
 android.view.WindowManager.LayoutParams params=popupDialog.getWindow().getAttributes();    
 params.x=heightIndp-120;params.y=top;
 params.gravity=Gravity.BOTTOM|Gravity.LEFT; 
```

# php - 将图表导出为图像/pdf 时发现融合图表变量“$defaultParameterValues”为空

> ID：13966506
> 
> 赞同：0
> 
> 时间：2012-12-20T06:30:03.977
> 
> 标签：php, pdf-generation, codeigniter-2, wkhtmltopdf, fusioncharts

我正在尝试在 PDF 导出报告中显示融合 3D 饼图。为此，我的目标是创建图表的图像并在图表渲染后自动将其保存在服务器中，以便我可以在我的 pdf 文件中调用该图像。我已经设置了导出的图表参数，如下面的代码 `<chart caption='testchart' exportEnabled='1' exportAtClient='0' exportAction='save' exportFileName='testimage'exportHandler='http://mysite.com/pdf/getChartExported'>`

在我的导出处理程序文件中，我还设置了“SAVE_PATH”和“HTTP_URI”常量的路径。

我的问题是 1\. 页面加载后我将如何导出图表并将其另存为图像 2\. 在导出处理程序中我得到错误（我正在使用 Codeigniter）

```
A PHP Error was encountered

Severity: Warning

Message: Invalid argument supplied for foreach()

Filename: libraries/FCExporter.php

Line Number: 304
 DOMId=
 height=0
 width=0
 fileName=
 statusMessage= Export Resource not found.
 statusCode=0 
```

当我检查全局变量`$defaultParameterValues`在 FCExport 处理程序文件函数中为空时`parseExportParams()`

最近几天我一直在做这个。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:13:13.697

不知何故，我不确定如何以及为什么，因为我不知道您是否修改了代码的任何部分，即 global `$defaultParameterValues`，我发​​现 php 文件定义如下：

```
$defaultParameterValues = array( 
"exportfilename"       => "FusionCharts",
"exportaction"         => "download",
"exporttargetwindow"   => "_self",
"exportformat"         => "PDF"
); 
```

没有在函数内部被引用`parseExportParams`，因此得到一个无法迭代的未定义数组！！

解决此问题的一种方法是`FCExporter.php`从 FusionCharts 包中获取原始文件，然后将其替换为您自己的文件或对这两个文件进行比较，以检查您是否在任何地方修改了任何破坏此文件的内容。

另一种方式是：

检查是否`$defaultParameterValues`是一个数组，如果不是 - 实例化它。

```
if (!isset($defaultParameterValues)) {
$defaultParameterValues = array();
} 
```

同时，还有另一种方法可以使用默认值扩展参数：

修改`parseExportParams` 替换现有的：

```
foreach ( $defaultParameterValues as $key => $value )
{
    // if a parameter from the default parameter array is not present
    // in the $params array take the parameter and value from default
    // parameter array and add it to params array
    // This is needed to ensure proper export  
    $params [$key ] =  @$params[$key ] ? $params[$key ] : $value ;
} 
```

和

```
if (isset($defaultParameterValues) && is_array($defaultParameterValues)) {
    $params = $params + $defaultParameterValues;
} 
```

# kendo-ui - 如何从窗口内容中关闭剑道窗口？

> ID：13966507
> 
> 赞同：7
> 
> 时间：2012-12-20T06:30:07.107
> 
> 标签：kendo-ui, window

我有一个应用程序。在单击一个按钮时，我尝试打开一个剑道模式窗口。它正在打开。我的应用程序位于一个域中，而 Kendo 窗口的内容来自另一个域。现在我想用剑道窗口内的按钮关闭模式窗口。问题从这里开始。我无法关闭模式窗口。我用谷歌搜索了它，但没有找到任何解决方案——你知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T16:11:40.253

在阅读了您对我之前回答的评论后，我认为您的问题具有误导性。您谈论*另一个域*`modal`，但从您的评论中似乎没有任何实际相关。我从您的评论中得出结论，您想在 KendoUI 中放置一个（实际上是一个，但可能是其他任何一个），此外您还想显示一个页面（顺便说一句）位于不同的域中。如果这是您真正想要的 - 并且预见到与跨域和安全相关的问题 - 我建议您实际使用并定义一个模板，包括您的和引用页面。*`close` `button``button``close` `button``window``content.template``button``iframe``www.xyz.com`*

 *像这样的东西...

```
var myWindow2 = $("#id2").kendoWindow({
    modal    : true,
    draggable: false,
    content  : {
        template: '<a href="javascript:void(0);" id="close2" class="k-button">Close</a>' +
                '<iframe src="http://www.xyz.com" frameborder="0" class="k-content-frame"></iframe>'
    },
    visible  : false,
    width    : 400,
    height   : 200,
    resizable: false,
    iframe   : true
}).data("kendoWindow");

$("#open2").on("click", function () {
    myWindow2.center();
    myWindow2.open();
});

$("#close2").on("click", function () {
    myWindow2.close();
}); 
```

您甚至可以`float`通过为`close` `button`.

```
#close2 {
    position: absolute;
    top: 10px;
    left: 10px;
    z-index: 10000;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T07:50:36.143

以下 JavaScript 代码定义了`button`用于打开`modal` `kendoWindow`. 单击后，您可以`button`在主体内部按 a 以根据`window`需要将其关闭。

JavaScript 代码：

```
var myWindow = $("#id1").kendoWindow({
    title  : "hi",
    visible: false,
    modal  : true
}).data("kendoWindow");

$("#open").on("click", function () {
    console.log("opening");
    myWindow.center();
    myWindow.open();
});
$("#close").on("click", function () {
    console.log("closing");
    myWindow.close();
}) 
```

和`HTML`：

```
<a href="#" id="open" class="k-button">Open</a>

<div id="id1">
    <p>this is the content of my window</p>
    <a href="#" id="close" class="k-button">Close</a>
</div> 
```*

# math - 马尔可夫链收敛的条件是什么？

> ID：13966520
> 
> 赞同：-3
> 
> 时间：2012-12-20T06:32:01.920
> 
> 标签：math, markov-chains, markov

我正在编写一些计算马尔可夫链限制的程序。

如果马尔可夫矩阵发散，我应该将其转换为 dA + (1-d)E 的形式，其中 A 和 E 都是 n * n 矩阵，并且 E 的所有元素都是 1/n。

但是，如果我在输入收敛时应用该转换，则会出现错误的值。

有没有简单的方法来检查马尔可夫矩阵是否收敛？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:26:20.133

我不打算详细介绍，因为它本身就是一个完整的领域。尽管一般收敛定理指出，任何非周期性且不可约的有限马尔可夫链都会收敛（收敛到其平稳分布）。不可约性很容易检查（相当于图中的连通性），周期性也很容易检查（两者的定义见下文第一章，收敛定理在本书第四章证明） .

值得注意的是，如果不存在在对称情况下可以通过将状态空间拆分为“连通分量”并分别考虑每个分量来轻松解决的不可约性。虽然可以通过执行类似于您建议的操作来修补周期性。它被称为创建*惰性马尔可夫链*。如果您想更好地理解整个主题（例如混合时间将对您的收敛算法非常有帮助），这是一本很棒的书（免费提供）：

[http://pages.uoregon.edu/dlevin/MARKOV/markovmixing.pdf](http://pages.uoregon.edu/dlevin/MARKOV/markovmixing.pdf)

# magento - 如何显示 Magento 管理员配置错误消息而不是成功消息？

> ID：13966525
> 
> 赞同：0
> 
> 时间：2012-12-20T06:32:11.997
> 
> 标签：magento

我已经使用管理面板配置部分开发了新的自定义模块。我还为我的自定义配置部分保存配置按钮编写了事件观察器。在这种情况下，我已经验证了一些数据以在我的配置部分显示错误消息。

默认情况下，当我单击自定义配置部分时，它会显示默认成功消息`"The configuration has been saved."`。但我需要显示错误消息而不是成功消息。

那么任何人都可以帮助我解决这种情况。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:53:01.293

使用 try - catch 构造来正确处理您的错误。成功时 - 输入您已经拥有的会话成功消息。在某些核心错误上，您可以使用：

```
$session = Mage::getSingleton('adminhtml/session');
try {
    .... 

} catch (Mage_Core_Exception $e) {
    foreach(explode("\n", $e->getMessage()) as $message) {
        $session->addError($message);
    }
} 
```

关于 PHP 异常：

```
catch (Exception $e) {
    $session->addException($e,
        Mage::helper('adminhtml')->__('An error occurred while saving this configuration:') . ' '
        . $e->getMessage());
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:06:00.913

如果您在“admin_system_config_changed_section_{$section}”事件上编写了一个观察者方法，您只需要在方法中抛出带有验证消息的 Mage_Core_Exception。有关详细信息，请参阅 Mage_Adminhtml_System_ConfigController::saveAction() 方法。

# jquery - Jquery filter() 只允许我访问通过 ajax 调用检索到的顶级响应元素

> ID：13966533
> 
> 赞同：0
> 
> 时间：2012-12-20T06:33:46.587
> 
> 标签：jquery, ajax

我正在使用 ajax 调用检索 html 响应，然后尝试使用以下内容检索响应中的嵌套元素`$(response).filter()`。

这是我检索的页面，以及我要过滤的元素：

//ajax调用

```
$.ajax({
   type: "GET",
   url: "http://www.flipkart.com/search-books?query=jQuery+Cookbook&from=all&searchGroup=all"
}).done(fnSuccess(prod_dts)).fail(fnFail); 
```

//fn成功

```
var fnSuccess = function(prod_dts) {
return function(response){
           //this returns results
            alert($(response).filter('div.fkart').html());

            // but this does not
            alert($(response).filter('#fk-mainbody-id').html());

  } // endof return
} // endof function 
```

唯一的区别是，它`div.fkart`是body的直系子代，`#fk-mainbody-id`是孙代。

过滤器不应该一直向下钻取树吗？我猜这与我如何包装返回的响应有关？如何以这种方式访问​​任何嵌套元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:42:56.677

过滤器旨在用于将匹配元素的集合减少为匹配选择器或通过函数测试的元素。如果您想深入了解，请改用 find 。IE

```
var fnSuccess = function(prod_dts) {
  return function(response){
        alert($(response).find('div.fkart').html());
        alert($(response).find('#fk-mainbody-id').html());
  } // endof return
} // endof function 
```

# java - 无法查看 ajax 内容

> ID：13966537
> 
> 赞同：0
> 
> 时间：2012-12-20T06:33:58.270
> 
> 标签：java, ajax, parsing

我还需要解析一个包含一些 ajax 内容的网页。为此，我需要在右键单击并查看源代码时显示 ajax 内容。或者，我需要程序上的 ajax 代码/内容进行解析。我正在用 Java 开发这个程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:37:18.537

您可以使用[http://htmlunit.sourceforge.net/ 之](http://htmlunit.sourceforge.net/)类的测试工具支持 javascript

# python - python for循环计数器返回0

> ID：13966541
> 
> 赞同：-1
> 
> 时间：2012-12-20T06:34:26.383
> 
> 标签：python, for-loop, counter

请原谅我的粗心。在过去的 6 个月里，我一直在访问 Python 书籍和网站，因为我真的非常想学习它，但有时我会遇到障碍，我就是不明白为什么最简单的代码不起作用。

我已经查看了很多关于此的堆栈溢出答案，但无济于事。

我正在做一些明确需要使用 python for 循环计数器系统的练习（我知道有一个叫做 itertools 和 enumerate 的东西）。请看下面：

```
>>> a = raw_input('Please enter a 7-digit number: ')    
Please enter a 7-digit number: 7893848    
>>> b = raw_input('Please enter a single digit number: ')    
Please enter a single digit number: 8    
    for i in a:            
        count = 0            
        if i == b:                
            count += 1            
        print count 
```

输出：

```
0
1
0
0
1
0
1 
```

我如何让它返回 3 的总和 - 即变量 a 中 8 的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:26:29.387

Python 字符串对象有一个`count()`方法可以满足您的需要：

```
print(a.count('8')) 
```

或者

```
print(a.count(b)) 
```

应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T06:35:46.963

您在每个循环周期中将计数器设置为零。您必须在循环之外定义它。尝试：

```
c=0
for i in range(10):
    print c    
    c+=1 
```

如果您只想打印 8 在变量中的次数，您还必须将 print 语句保留在循环之外，这样它只会在循环耗尽后打印：

```
a='7893848'
b='8'
count=0
for i in a:
    if i==b:
        count+=1
print count 
```

# actionscript - 如何将变量值从一个 MXML 传递到另一个 MXML？

> ID：13966545
> 
> 赞同：0
> 
> 时间：2012-12-20T06:34:40.567
> 
> 标签：actionscript, mxml

我正在使用 ActionScript 在 Flash Builder 中做一个项目。

我有两个 MXML 文件：login.mxml 和 welcome.mxml。

登录.mxml：

```
var username:String="sample";
var password:String="sample"; 
```

欢迎.mxml：

```
trace("welcome"+username); // o/p-welcome sample 
```

我必须将用户名值从 login.mxml 传递给 welcome.xml。是否可以将变量值从一个 MXML 传递到另一个 MXML 文件？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:28:30.460

对的，这是可能的。最好的方法是将视图绑定到对象值。

您的视图似乎与“一个聚合另一个”没有关联，但它们的父级（容器视图）两者都知道。因此，父级会将对象引用传递给两个视图，并且当更新此实例时，将通过数据绑定通知和更新视图。

如果视图彼此完全独立，那么通过应用程序通过应用程序分派事件将是最直接的方式。您应该引入由应用程序调度的新事件类型（即 SystemEvent）。为了使您的应用程序免受视图中使用的特定全局变量的过多引用，如果您要坚定使用 MVC，我建议您使用委托：

```
package de.guj.vila.delegates {
  import flash.events.Event;
  import flash.events.IEventDispatcher;

  import mx.core.FlexGlobals;

  import mx.core.IMXMLObject;
  import mx.core.UIComponent;

  public class ViewDelegate implements IEventDispatcher, IMXMLObject {

    //---------------------------------------------------------------------
    //
    //          Properties
    //
    //---------------------------------------------------------------------

    private var _bus:IEventDispatcher;

    private var _uiComponent:UIComponent;

    /**
     * The view which uses the delegate.
     */
    public function set uiComponent(value:UIComponent):void {
      _uiComponent = value;
    }

    //---------------------------------------------------------------------
    //
    //          Constructor
    //
    //---------------------------------------------------------------------

    public function ViewDelegate() {
      _bus = FlexGlobals.topLevelApplication as IEventDispatcher;
    }

    //---------------------------------------------------------------------
    //
    //          Implemented Methods
    //
    //---------------------------------------------------------------------

    /**
     * @inheritDoc
     *
     * @see flash.events.IEventDispatcher
     */
    public function addEventListener(type:String, listener:Function, useCapture:Boolean = false, priority:int = 0, useWeakReference:Boolean = false):void {
      _bus.addEventListener(type, listener, useCapture, priority, useWeakReference);
    }

    /**
     * @inheritDoc

     * @see flash.events.IEventDispatcher
     */
    public function removeEventListener(type:String, listener:Function, useCapture:Boolean = false):void {
      _bus.removeEventListener(type, listener, useCapture);
    }

    /**
     * @inheritDoc

     * @see flash.events.IEventDispatcher
     */
    public function dispatchEvent(event:Event):Boolean {
      return _bus.dispatchEvent(event);
    }

    /**
     * @inheritDoc
     *
     * @see flash.events.IEventDispatcher
     */
    public function hasEventListener(type:String):Boolean {
      return _bus.hasEventListener(type);
    }

    /**
     * @inheritDoc
     *
     * @see mx.core.IMXMLObject
     */
    public function initialized(document:Object, id:String):void {
      uiComponent = document as UIComponent;
    }

    /**
     * @inheritDoc
     *
     * @see flash.events.IEventDispatcher
     */
    public function willTrigger(type:String):Boolean {
      return _bus.willTrigger(type);
    }
  }
} 
```

您可以将其填充到 fx:Declarations 块中，给它一个 id 并在视图之间调度事件。你只需要设置监听器。通过这种方式，您可以轻松实现非常干净的结构，因为您只需要重构委托。使用委托作为基类，您可以事件处理委托中的任何事件，因此您的视图保持干净，最重要的是，它很容易移植到不同的 MVC 方法，因为您已经将视图行为与应用程序行为隔离开来。

最后，您将希望使用 MVC 框架（例如 RobotLegs）来轻松扩展您的应用程序。

# iphone - 将 AFIncrementalStore 与 Auth 令牌一起使用

> ID：13966548
> 
> 赞同：3
> 
> 时间：2012-12-20T06:34:50.863
> 
> 标签：iphone, ios, authentication, afnetworking, afincrementalstore

我正在为[App.net 开发](https://join.app.net)iOS 客户端，我想使用[AFIncrementalStore](https://github.com/AFNetworking/AFIncrementalStore)将 Web 服务与我在应用程序中的核心数据实现同步。

我已经让这两者适用于不需要身份验证令牌的 API 请求，但我不知道如何将身份验证令牌与 AFIncrementalStore 一起使用。

换句话说，我可以拉下全局提要，因为它不需要身份验证：

[https://alpha-api.app.net/stream/0/posts/stream/global](https://alpha-api.app.net/stream/0/posts/stream/global)

...但是，要获取用户的流，您需要 auth（您会注意到此链接给出了错误）：

[https://alpha-api.app.net/stream/0/posts/stream](https://alpha-api.app.net/stream/0/posts/stream/)

我知道我需要`auth_token`在 API 调用的末尾附加一个，但我不确定如何使用 AFIncrementalStore 来做到这一点。

**更新：**这是当前获取全局流的代码块：

这是直接从[AFIncrementalStore 中包含的示例 App.net 项目中提取](https://github.com/AFNetworking/AFIncrementalStore)的方法。

```
-(NSURLRequest *)requestForFetchRequest:(NSFetchRequest *)fetchRequest withContext:(NSManagedObjectContext *)context {
    NSMutableURLRequest *mutableURLRequest = nil;
    if ([fetchRequest.entityName isEqualToString:@"Post"]) {
        mutableURLRequest = [self requestWithMethod:@"GET" path:@"stream/0/posts/stream/global" parameters:nil];
    }

    return mutableURLRequest;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T16:35:09.350

要更改它以正确使用访问令牌，您所要做的就是向请求添加参数而不是传递 nil。

要构建参数，只需`NSDictionary`使用您需要的键和值创建一个。例如在我的一些 App.net 代码中，我有这个

```
NSDictionary *params = @{@"access_token": token}; 
```

使用新的[编译器指令](http://nshipster.com/at-compiler-directives/)，这将使用令牌中的值构建一个`NSDictionary`带有单个键（在本例中为“access_token”） 。`NSString`

完成后，只需提出您的请求，例如：

```
[self requestWithMethod:@"GET" path:@"stream/0/posts/stream" parameters:params]; 
```

在请求中传递参数。

如果这还不够清楚，请告诉我！

# java - 聊天应用在客户端弹出一个窗口

> ID：13966551
> 
> 赞同：1
> 
> 时间：2012-12-20T06:34:58.133
> 
> 标签：java, ajax, jquery, cometd

我做了一个简单的聊天应用程序。它使用数据库，这效率不高，因为客户端每隔几秒查询一次数据库。无论如何，我实现了我所需要的，有很好的方法，比如 polling 和 commet，我稍后会实施。请花点时间阅读这篇文章，我对此有一些疑问。1）考虑两个用户 100 和 101，当 100 向 101 发送消息时，我将 id 作为 100_101 保存在数据库中 2）当 101 将消息发送回 100 时，它在数据库中保存为 101_100。3）我能够按顺序获取消息。

问题-

1) 用户应保持特定窗口打开。

我希望在有新消息时打开弹出窗口。如何实现。

2) 当用户 (100) 正在键入时，如果仅打开 100 的 101 聊天窗口，则用户 (101) 应该看到文本为“100 正在键入”。这不应该涉及任何数据库的东西。

我做过的工作。当用户（100）开始向服务器输入数据时，我可以将数据发送到服务器。如何发送数据，即如何向用户推送数据（101）。

我现在的代码如下。

阿贾克斯

```
$.ajax( {
                    type : "POST",
                    data : "uName=" + uName +"&opName=" + opName + "&msg=" + msg + "&colorCode="
                            + colorCode,
                    url : "<%= path %>/chat/SaveChat",
                    error : function(xhr, ajaxOptions, thrownError) {
                        alert(xhr.status);
                        alert(thrownError);
                    },
                    success : function(data) {
                                      //      alert(data);
                        $("#chat-area").html(data);
                                            document.getElementById('chat-area').scrollTop = document.getElementById('chat-area').scrollHeight;
                                            }
                }); 
```

小服务程序

```
try {
                    String newline = System.getProperty("line.separator");
                        String uName = req.getParameter("uName");
                        String opName= req.getParameter("opName");
                        String msg = req.getParameter("msg");
                        String colorCode = req.getParameter("colorCode");
                        DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
                        Date date = new Date();
                        String dat =dateFormat.format(date);

                        PreparedStatement ps = db.conn.prepareStatement("INSERT INTO chatmessage"
                                + "(message,username,msgtime,colorselected) "
                                + " VALUES(?,?,?,?)");
                        ps.setString(1,msg);
                        ps.setString(2,uName+"_"+opName);
                        ps.setString(3,dat);
                        ps.setString(4,colorCode);
            ps.executeUpdate();
            ps.close();

                        ps = db.conn.prepareStatement("select * from chatmessage where username=? or username=? order by id asc");
                        ps.setString(1,uName+"_"+opName);
                        ps.setString(2,opName+"_"+uName);
                        ResultSet rs=ps.executeQuery();
                        String temp[];
                        StringBuilder sb = new StringBuilder();
                        while(rs.next())
                        {
                            temp=rs.getString("username").split("_");
                           /* out.println(newline);
                            out.print(temp[0]+":");
                            out.print(rs.getString("message"));
                            out.println(newline);*/

                            sb.append("<span style='background:#"
                    + rs.getString("colorselected") + "'>" + temp[0]
                    + "</span>" + rs.getString("message") + "<br/><br/>");
                        }
            db.conn.close();    
                        out.print(replaceEmoticons(sb.toString()));
            //out.print("success");
        }
        catch(Exception ce){
            out.println("<font size='30' color='red'>Error Code 004</font>");
        //  RequestDispatcher rd = req.getRequestDispatcher("../status/error.jsp");
        //  rd.forward(req, res);
        }finally{
                    try{
                        db.conn.close();
                    }catch(Exception e){}
                } 
```

感谢任何简单有效的想法。

# git - git log 没有显示更新的记录

> ID：13966559
> 
> 赞同：3
> 
> 时间：2012-12-20T06:35:34.047
> 
> 标签：git

我在本地和远程仓库中有两个分支“master”和“experiment”。它们都是同步的，即 HEAD 在本地和远程都是相同的提交。

我在本地提交“master”，然后将其推送到远程“master”。

然后我决定我想在当前状态下作为“主”进行“实验”（与主同步/合并，但将其作为单独的分支维护）。

所以在本地我移动到“实验”分支并做：- git fetch origin mainline

但是，在进行 fetch 之后，在“experiment”中执行“git log”现在确实会显示其中的新提交。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:47:05.190

这应该显示来自各个分支的所有提交：

```
git log --all --branches 
```

（你可以[在这里看到](https://stackoverflow.com/a/7430132/6309)[更紧凑`git log`](https://stackoverflow.com/a/7430132/6309)的）

单独的 git fetch 不会更新本地分支的提交，只会更新远程命名空间中的提交（即分支`origin/mainline`）。
要使用您已获取的远程分支更新您的本地 ' `experiment`' 分支，请添加：

```
git checkout experiment
git merge origin/mainline 
```

然后一个简单的`git log`将向您展示一个新的提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-11T14:09:24.123

如果您没有找到所有记录，您可以在 git **rootDir>.git>logs>HEAD**文件中找到所有日志。

# objective-c - 自动调整大小问题

> ID：13966567
> 
> 赞同：0
> 
> 时间：2012-12-20T06:36:04.763
> 
> 标签：objective-c, ios, uitableview, autoresizingmask

我添加了一个`UIImageview`作为`subview`。`UITableViewCell.contentview`它在单元格的左侧和右侧有边距。旋转设备时，`Autoresizing`对我不起作用。我在用：

```
UIImageView *imgviewcellBg=[[UIImageView alloc]initWithFrame:CGRectMake(9, 3,     self.view.bounds.size.width-18, 33)];
imgviewcellBg.autoresizesSubviews=UIViewAutoresizingFlexibleWidth;
[cell.contentView addSubview:imgviewcellBg]; 
```

帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:39:46.577

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SimpleTableIdentifier];
    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier]autorelease];
        cell.frame = CGRectMake(cell.frame.origin.x, cell.frame.origin.y, tblMyWines.frame.size.width, cell.frame.size.height);
    }

    UIImageView *imgviewcellBg=[[UIImageView alloc]initWithFrame:CGRectMake(tbl.frame.origin.x+5, 3, tbl.frame.size.width-10.0, 33)];
    [cell.contentView addSubview:imgviewcellBg];

    return cell;
} 
```

# javascript - 移动到可排序容器时，如何控制可拖动 div 的克隆样式？

> ID：13966568
> 
> 赞同：1
> 
> 时间：2012-12-20T06:36:04.633
> 
> 标签：javascript, jquery, draggable, jquery-ui-sortable, jeditable

我想做的是结合两个项目：

*   [一个是可拖动和可排序列表项的示例](http://jqueryui.com/draggable/#sortable)
*   [另一个是 jEditable，我用它来使列表项可编辑](http://www.appelsiini.net/projects/jeditable)

现在我可以毫无问题地将编辑类附加到第一个链接中的现有列表项中。当我去创建一个新的可拖动项目（克隆）并将其移动到可排序列表时，我希望它采用旧项目的 css 类。我尝试将代码添加到可拖动的停止事件和可排序的接收事件中，但没有成功。改变的是原版的风格，而不是克隆版的。

```
 receive: function(event, ui) {
                alert("dropped item ID: " + ui.item.attr('id'));
                $("#draggable").attr('class', 'edit');
                }

stop: function() {
                    if ( !$( "#draggable" ).hasClass( "ui-state-hover" ) ) {
                        $( "#draggable" ).removeClass( "ui-state-highlight" );
                        $( "#draggable" ).addClass( "ui-state-default" );
                        $( "#draggable" ).addClass( "edit" );
                    }
                } 
```

我怎样才能做到这一点？

[JSFiddle 在这里](http://jsfiddle.net/xvsMh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T20:55:36.067

您的事件是正确的，但正如您所意识到的，#draggable 是原始项目，而不是克隆项目。获取克隆项目的一种方法是在可排序列表中搜索具有相同类的项目。所以不要使用：

```
$("#draggable").attr('class', 'edit'); 
```

你用：

```
$('#sortable .ui-draggable')
  .removeClass('ui-state-highlight ui-draggable')
  .addClass('ui-state-default edit'); 
```

[JSFiddle 上的演示](http://jsfiddle.net/gxB5P/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T21:22:29.007

您实际上可以`ui`在您的可排序事件中使用`stop`。以下是它们的简短定义：

```
ui.
helper: The jQuery object representing the helper being sorted
item: The jQuery object representing the current dragged element
offset: The current absolute position of the helper represented as { top, left }
position: The current position of the helper represented as { top, left }
originalPosition: The original position of the element represented as { top, left }
sender: The sortable that the item comes from if moving from one sortable to another 
```

所以你需要使用停止事件并`ui.item`像这样改变样式：

```
$(ui.item).attr('class', 'ui-state-default edit'); 
```

你必须像这样重新启动可编辑：

```
$(document).ready(function() {
    initEditable();
});

function initEditable(){
    $('.edit').editable('http://www.example.com/save.php', {
        indicator : 'Saving...',
        tooltip   : 'Click to edit...'
    });
    $('.edit_area').editable('http://www.example.com/save.php', { 
        type      : 'textarea',
        cancel    : 'Cancel',
        submit    : 'OK',
        indicator : '<img src="img/indicator.gif">',
        tooltip   : 'Click to edit...'
    });
}

$(function() {
    $( "#sortable" ).sortable({
        revert: true,
        update: function() {
            var orders = [];
            $.each($(this).children(), function(i, item) {
                orders.push($(item).data("x"));
            });
            $("#info").text("Order: " + orders.join(","));
        },
        stop: function(event, ui) {
            $(ui.item).attr('class', 'ui-state-default edit');
            initEditable();
        }
    });
}); 
```

在此处查看修改后的代码：http: [//jsfiddle.net/xvsMh/1/](http://jsfiddle.net/xvsMh/1/)

# ef-code-first - EF 代码第一次更新不适用于一对多关系

> ID：13966575
> 
> 赞同：1
> 
> 时间：2012-12-20T06:36:53.910
> 
> 标签：ef-code-first

EF 代码第一次更新不适用于一对多关系

我有 2 个实体

```
 // Save
    public class Person 
    {    
        public int Id { get; set; } 
        public string Name{ get; set; } 
        public virtual List<Email> Emails { get; set; } 
    }

    public class Email 
    { 
        public int Id { get; set; } 
        public int PersonId { get; set; } 
    public virtual Person person { get; set; }
        public string EmailAddress { get; set; } 
    }

EFContext context = new EFContext(); 
    Person person; 
    Email email;

    person = new Person(); 
    person.Name = "Rocky"; 

    person.Emails = new List<Email>(); 
    email = new Email { EmailAddress = "rocky@frostbitefalls.com" }; 
    person.Emails.Add(email); 
    email = new Email { EmailAddress = "rocky@squirrel.com" }; 
    person.Emails.Add(email); 

    context.People.Add(person); 
    context.SaveChanges();

// Update
person = new Person(); 
person.Id=1;
    person.Name = "Rocky Altered"; 

    person.Emails = new List<Email>(); 
    email = new Email {Id=1, EmailAddress = "Altered_rocky@frostbitefalls.com" }; 
    person.Emails.Add(email); 
    email = new Email {Id=2, EmailAddress = "Altered_rocky@squirrel.com" }; 
    person.Emails.Add(email);

UpdatePerson(person);

public bool UpdatePerson(Person entity)
{
var updatePerson = GetPersonById(entity.Id);
updatePerson.Name=entity.Name;
updatePerson.Emails=entity.Emails;

    DataContext.Entry<Person>(updatePerson).State = EntityState.Modified;
DataContext.SaveChanges();
DataContext.Entry<Person>(updatePerson).Reload();
} 
```

具有 2 个电子邮件地址的人正在正确保存，但在更新插入的人的电子邮件地址时不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:22:57.850

你应该这样做：

```
 public class Person 
{    
    public int Id { get; set; } 
    public string Name{ get; set; } 
    public List<Email> Emails { get; set; } 
}

public class Email 
{ 
    public int Id { get; set; } //This will generate PKey.
    public virtual Person person { get; set; } //This will create the FKey.
    public string EmailAddress { get; set; } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T08:53:09.880

您遇到的问题是您需要将 ForeignKeyAttribute 应用于您明确包含的任何 FK：

```
 public class Person 
    {    
        public int Id { get; set; } 
        public string Name{ get; set; } 
        public virtual List<Email> Emails { get; set; } 
    }

    public class Email 
    { 
        public int Id { get; set; } 

        [ForeignKey("Person")]
        public int PersonId { get; set; } 
    public virtual Person Person { get; set; }

        public string EmailAddress { get; set; } 
    } 
```

通过应用该属性，您可以告诉 EF Migrations 使用“PersonId”作为“Person”关系的 FK 列名称。其余的应该按原样工作。

# asp.net-mvc - 如何测试不同的应用配置

> ID：13966580
> 
> 赞同：0
> 
> 时间：2012-12-20T06:37:30.483
> 
> 标签：asp.net-mvc, asp.net-mvc-3, testing, automated-tests, functional-testing

在我们的 ASP.NET MVC 3 应用程序中，我们有很少的设置可以改变几个页面的行为。我们想为每个配置运行功能测试。也就是说，我们有大量的通用测试和一些特定配置独有的测试。做这个的最好方式是什么？

# javascript - 如果 DT 不包含实际值，则删除 DT，DD

> ID：13966583
> 
> 赞同：0
> 
> 时间：2012-12-20T06:37:46.823
> 
> 标签：javascript, jquery, html

我使用标签 DL-DT-DD 在网站上列出商店信息。信息将由服务器生成和放置。

```
<dl class="description-cols">

<dt>Shop Name</dt>
<dd class="divider"> US Master Autos</dd>

<dt>Toll Free</dt>
<dd>Not Available</dd>

<dt>Fax</dt>
<dd>(305) 345-42324</dd>

<dt>Email</dt>
<dd class="divider"> Not Available</dd>

<dt>Website</dt>
<dd class="divider">
      <a target="_blank" href="http://www.google.com">http://www.google.com</a>
</dd>
</dl> 
```

如果任何行的值不可用，我想删除相应的行（DL & DT）。我想使用 jquery 或 javascript 来做到这一点。

这是用于测试的[jsfiddle](http://jsfiddle.net/umeshpatil86/y4S2B/4/)。我想删除免费电话和电子邮件的行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:45:19.917

这将有助于：

```
$('dd:contains("Not Available")').each(function() {
    $(this).prev().remove();
    $(this).remove();
});​ 
```

[更新小提琴](http://jsfiddle.net/y4S2B/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T06:42:09.223

你可以这样做，

**[现场演示](http://jsfiddle.net/y4S2B/5/)**

```
$('dd').each(function(){
   if($.trim($(this).text()) == "")
   {
      $(this).prev('dt').remove(); 
      $(this).remove();    
   } 
});​ 
```

# java - 我在 Eclipse 上有一个程序并将其导出为可运行的 JAR 文件，如何双击运行它？

> ID：13966590
> 
> 赞同：0
> 
> 时间：2012-12-20T06:38:28.103
> 
> 标签：java, eclipse, jar

```
import java.util.Scanner;

public class NumberAverager {

/**
 * Averages Inputted Numbers
 */
public static void main(String[] args) {

    int num1;
    int total = 0;
    int count = 0;
    //int[] numArray = new int[count];
    String input;
    Scanner keyboard = new Scanner(System.in);

    do
    {   
        if (count == 0)
        {
            System.out.println("Please enter the first number you wish to average.");
            input = keyboard.nextLine();
        }

        count++;

        System.out.println("Please enter your next number or 'calculate' to find the average.");
        input = keyboard.nextLine();

            try 
            {
                num1 = Integer.parseInt(input);
                total = total + num1;
                //numArray[count]=num1;  
            }

                catch (NumberFormatException e)
                {
                        System.out.println("You entered " + count + " numbers.");
                        System.out.println("The average is " + (float)total/count);
                        //System.out.println(numArray[count]);
                        input = "calculate";
                }

    } while (input!= "calculate");

    keyboard.close();
}
} 
```

有我的程序，如果有帮助的话，

清单显示以下内容：

```
Manifest-Version: 1.0
Main-Class: NumberAverager 
```

这只是一个尝试执行此操作的简短程序，但我不知道我还需要做什么才能使其工作，我不知道如何从命令行运行它以尝试这种方式，并且在双重单击它鼠标加载一秒钟，没有任何反应

谢谢

我对java很陌生，只有一个开始的学期，所以我需要非常详细的解释如何做到这一点，再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:49:31.200

```
java -jar <PATH_TO_YOUR_JAR_FILE> 
```

并确保 java 在 $PATH 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:41:05.373

您需要一个 UI 才能在双击时显示某些内容。否则它将运行代码，但不会显示任何内容。

[这是制作GUI的教程](http://docs.oracle.com/javase/tutorial/uiswing/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:43:27.413

用于`java -jar`在命令提示符下执行您的 jar 文件。

```
java -jar C:/path/to/jar/your_jar_file.jar 
```

# javascript - 围绕硬编码处理程序包装 jquery 事件处理程序

> ID：13966591
> 
> 赞同：3
> 
> 时间：2012-12-20T06:38:34.870
> 
> 标签：javascript, jquery, html, forms, validation

我有几种形式，如下所示：

```
<form id=myForm onsubmit="saveFormData(this);return false">
....
</form> 
```

提交后，执行自定义函数并取消默认操作（通过 http 发送数据）。

但是现在我需要验证表单，如果验证成功，则触发自定义函数（`saveFormData`在这种情况下，但对于其他表单可能会有所不同），否则什么也不做。

所以最终的事件处理程序应该像这样工作：

```
$('#myForm').submit(function(){
    if(formValidatesOk(this))
        saveFormData() ;
    return false ;
} 
```

但是，我无法对 HTML 代码进行更改，因此我需要一种通用方法，通过使用 jquery 事件处理程序包装硬编码处理程序来重新定义 onsubmit 事件。

我首先想到的是（未经测试）：

```
var hardcodedHandler = $('#myForm').prop('onsubmit') ; // save the current handler
$('#myForm').prop('onsubmit',null) ; // remove the current handler
$('#myForm').submit(function(){
    if(formValidatesOk(this)) // if the form is valid then...
        Function(hardcodedHandler).call(this) ; // trigger the original handler
    return false ;
}) ; 
```

但这不是很优雅（至少可以这么说）。

你知道更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:01:47.207

您可以只从`onsubmit`元素的属性中获取旧功能，您不需要`eval`它：

```
var form = $('#myForm');
var oldHandler = form.prop("onsubmit");
form.removeProp("onsubmit").submit(function(e){
    e.preventDefault();
    if(formValidatesOk(this))
        oldHandler.call(this, e);
}); 
```

[jsfiddle.net 上的演示](http://jsfiddle.net/xW4vj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:12:24.307

事件是不可预测的（以它们被触发的方式）。我认为受制于他们的搬运工也不能依赖秩序。因此，将处理程序绑定到更改先前添加的处理程序的事件肯定是（非常）不好的做法。实际上，正如您所建议的，您永远无法确定首先触发哪个处理程序。毕竟，事件不应该相互通知。应该使用事件和处理程序来避免代码的高度耦合。

解决这个问题的最好方法（考虑到你的限制）是用新的行为来装饰你的“旧”处理程序。Bergi 发布了一个很好的例子。

# android - 使用 Jenkins 构建 Unity 项目失败

> ID：13966595
> 
> 赞同：14
> 
> 时间：2012-12-20T06:39:13.870
> 
> 标签：android, iphone, macos, jenkins, unity3d

我正在尝试在 Mac OS Server 上使用 Jenkins 构建 Unity 项目。但是当我尝试运行以下脚本时

```
/Applications/Unity/Unity.app/Contents/MacOS/Unity -quit -batchmode ${PROJECT_PATH} -executeMethod BuildScript.DevelopmentBuild 
```

脚本显示了这一点，

> _RegisterApplication()，无法建立到 WindowServer 的默认连接，_CGSDefaultConnection() 为 NULL。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T13:15:51.993

尝试从终端写入：

```
sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist
sudo mv /Library/LaunchDaemons/org.jenkins-ci.plist /Library/LaunchAgents/org.jenkins-ci.plist 
```

然后注销并重新登录。

现在 Jenkins 将作为代理运行并且可以访问 WindowServer。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-26T14:04:20.590

确保您的启动参数中有 -nographics 参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-16T10:29:18.707

我试过

`sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist`

`sudo mv /Library/LaunchDaemons/org.jenkins-ci.plist /Library/LaunchAgents/org.jenkins-ci.plist`

然后重新启动我的Mac

然后`sudo launchctl load /Library/LaunchAgents/org.jenkins-ci.plist`重启后

有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-27T13:38:32.157

我有同样的问题。问题在于 Jenkins 和 Unity 如何单独工作。我能找到更清洁的工作的唯一方法是：

1.  理想情况下，让您的 Jenkins master 只为 slave 分配任务，而不要自己构建任何东西。所以你的奴隶会建立这个项目。
2.  如果上述情况不容易做到，这里有一个快速的解决方法：
    *   在您的 Jenkins 主服务器上创建一个从服务器。
    *   添加标签以在新创建的从站上执行您的 Unity 项目。
    *   将作业配置为在您上面创建的专用从站上运行。
    *   现在一切正常！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-28T13:45:19.063

如果您正在运行的用户当前未以图形方式登录，您也会收到此错误。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-14T11:14:09.583

在指定项目路径之前，您似乎缺少 --projectPath 选项？

# embedded-linux - 使用 CodeSourcery 和 Pandaboard 的交叉编译问题

> ID：13966597
> 
> 赞同：0
> 
> 时间：2012-12-20T06:39:23.413
> 
> 标签：embedded-linux, codesourcery, pandaboard

我是 Pandaboard 开发的新手。我正在使用 CodeSourcery 交叉编译器来交叉编译我的应用程序代码。我的应用程序是一个简单的“hello world”应用程序。我正在使用它进行交叉编译：

```
arm-none-linux-gnueabi-gcc  app.c -o app.out -march=armv5 
```

我能够生成`app.out`. 但是当我将这个 app.out 复制到我的熊猫板并尝试执行它时，我得到了这个异常：

```
-bash: ./app.out: No such file or directory 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T01:22:21.863

使用共享库的静态链接解决了此问题。执行相同操作的命令如下所示。

arm-none-linux-gnueabi-gcc app.c -o app.out -march=armv5 -static

# c++ - 使用 MACRO 在 for 循环中动态创建字符串（例如数组索引）

> ID：13966600
> 
> 赞同：0
> 
> 时间：2012-12-20T06:39:30.777
> 
> 标签：c++, macros

我想使用 MACRO 动态创建字符串。例如，如果我有 int i 在 1:n 的范围内和字符串“testArray”。我应该能够创建 testArray[0],testArray[1], ... testarray[n-1] 如果可能，请告诉我。

以下是示例代码：

```
void fun2(int x,std::string name)
{
/*do something*/
}

void fun1()
{

  for (unsigned int i = 0 ;i < 5 ; ++i )
    {
        // I want to create a MACRO such that it create "testArray[0]","testArray[1]",..."testArray[4]" etc.
        fun2(x,CREATE_ARRAY_ELEM ("testArray",i));
    }
 } 
```

我在下面尝试过，但它不起作用：

```
#define STR1(x) #x
#define CREATE_INDEX(paramName,elementIndex) #paramName << "[" << elementIndex << "]"
#define CREATE_ARRAY_ELEM(paramName,elementIndex) CREATE_INDEX(paramName,elementIndex)
#define STRINGIZE_1(x) STR1(x) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:20:03.723

您似乎想在编译时创建字符串*文字*“testArray[0]”、“testArray[1]”等。那不会发生。*您可以在运行时*使用轻松完成此操作`ostringstream`，但我认为这不是您想要的。

如果它*是*您正在寻找的，那么...

```
#include <iostream>
#include <sstream>
using namespace std;

static std::string array_str(const char* s, unsigned int i)
{
    std::ostringstream oss;
    oss << s << '[' << i << ']';
    return oss.str();
}

void fun2(int x, const std::string& name)
{
    std::cout << x << ':' << name << std::endl;
}

void fun1()
{
    for (unsigned int i = 0 ;i < 5 ; ++i )
    {
        fun2(i, array_str("testArray", i));
    }
} 
```

**测试输出**

```
0:testArray[0]
1:testArray[1]
2:testArray[2]
3:testArray[3]
4:testArray[4] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:24:38.593

您可以这样做..意味着在宏本身中您必须显示所需的字符串..

```
 #include<iostream>

    #define STR1(x) #x
    #define CREATE_INDEX(paramName,elementIndex) cout <<paramName<< "[" << elementIndex    << "]"
    #define CREATE_ARRAY_ELEM(paramName,elementIndex)      CREATE_INDEX(paramName,elementIndex)
    #define STRINGIZE_1(x) STR1(x)

    using namespace std;
    int main()
    {
    int testArray;
    for (unsigned int i = 0 ;i < 5 ; ++i )
    {
    // I want to create a MACRO such that it create  "testArray[0]","testArray[1]",..."testArray[4]" etc.
    CREATE_ARRAY_ELEM ("testArray",i);

    }
    return 1;
     } 
```

# python - 为什么“1e-i”在列表推导中不起作用？

> ID：13966603
> 
> 赞同：1
> 
> 时间：2012-12-20T06:39:44.803
> 
> 标签：python, python-2.7, list-comprehension

为什么下面的减号被视为无效标记？这里一定有什么我不明白的地方。

```
>>> [1e-i for i in range(-10,10)]
SyntaxError: invalid token 
```

通常这些东西像母亲一样评估：

```
>>> 1e-10
1e-10 
```

我只是好奇; 我解决了我的问题

```
>>> [10**i for i in range(-10,10)]
[1e-10, 1e-09, 1e-08, 1e-07, 1e-06, 1e-05, 0.0001, 0.001, 0.01, 0.1, 1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T06:44:04.647

`1e-01`等是数字文字。在脚本运行之前，它们就会被看到并标记化。此类数字的规则几乎可以肯定地说“可选（'E'或'e'，后跟可选的'+'或'-'，后跟数字）”。该定义中没有对变量的规定，并且更改定义会使其在运行时无法解析数字文字，这会变得非常麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T06:47:25.157

检查 Python 文档中的[浮点文字](http://docs.python.org/2/reference/lexical_analysis.html#floating-point-literals)：

```
floatnumber   ::=  pointfloat | exponentfloat
...
exponentfloat ::=  (intpart | pointfloat) exponent
...
exponent      ::=  ("e" | "E") ["+" | "-"] digit+ 
```

诀窍是**数字文字不包含符号**；像 -1 这样的短语实际上是由一元运算符 - 和文字 1 组成的表达式。因此，`i`这里被认为是`x - i`表达式中的变量，即使`x`是带有指数的数字。它`x`没有指数部分：`1e`. 这是一个无效的 Python 令牌。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T06:42:23.290

`float`文字中不能有变量。`1e-3`很好，`1e-i`直到运行时才能评估，因此是无效的文字。这就像期望`x.14`评估`3.14`when `x`is `3`。与列表推导无关。

解决方案如您所见。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T06:42:49.453

`1e-i`不是有效的 Python 语法。指数形式是文字形式，因此并非设计为动态的。词法分析器说明了一切：`invalid token`就像它不知道什么`1e-i`意思一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T06:49:47.170

正如其他人所提到的，`1e-i`是无效的。

您可以通过以下方式解决此问题`float("1e-%d" %i)`：

```
In [114]: [float("1e%d" %i) for i in range(-10,10)]
Out[114]: 
[1e-10,
 1e-09,
 1e-08,
 1e-07,
 1e-06,
 1e-05,
 0.0001,
 0.001,
 0.01,
 0.1,
 1.0,
 10.0,
 100.0,
 1000.0,
 10000.0,
 100000.0,
 1000000.0,
 10000000.0,
 100000000.0,
 1000000000.0] 
```

# asp.net-mvc - jQuery：将密钥/对列表发布到 ASP.NET MVC 控制器

> ID：13966605
> 
> 赞同：2
> 
> 时间：2012-12-20T06:39:48.387
> 
> 标签：asp.net-mvc, json, jquery

我在 StackOverflow 上搜索了有关将 kep/pair 数据列表发布到 MVC 控制器的信息。所有相关帖子都没有涵盖密钥/对列表，Bing 也没有帮助。这是我的示例代码：

**控制器**

```
 <HttpPost>
    Public Function Update(cart As List(Of String)) As JsonResult
        Dim x = 55
    End Function 
```

**JS**

```
 list = new Array();
    list.push({ "SKU": 1, "Quantity": 1 });
    list.push({ "SKU": 2, "Quantity": 2 });
    list.push({ "SKU": 3, "Quantity": 5 });

    $.ajax({
        type: 'POST',
        cache: false,
        url: 'something.com/controller/poo',
        dataType: 'json',
        url: me.attr('href'),
        data: JSON.stringify({ cart: list }),
        success: function (data) {
            console.debug(data);
        },
        error: function (data) {
            console.debug(data);
        }
    }); 
```

*控制器中购物车*的值是什么。我不知道为什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:42:12.177

在向控制器提交 json 值时，我尝试使用字典及其效果。

[$.toDictionary](http://erraticdev.blogspot.com/2010/12/sending-complex-json-objects-to-aspnet.html)

# mysql - MySQL触发器：检查主键ID是否在其他表中使用

> ID：13966610
> 
> 赞同：0
> 
> 时间：2012-12-20T06:40:18.390
> 
> 标签：mysql, triggers

我想为我的表创建一个触发器`table_master`。

的表模式`table_master`很简单：

```
master_id       INT(11)       AUTO_INCREMENT, PRIMARY, NOT NULL
title           VARCHAR(50)   NOT NULL 
```

这是另一个关系表`rel_master_another_tbl`

```
master_id       INT(11)       PRIMARY, NOT NULL
another_id      INT(11)       PRIMARY, NOT NULL 
```

我想要实现的是，当在`DELETE`上发出查询时`table_master`，触发器会检查是否`master_id`在`rel_master_another_tbl`. **更新：**如果是，回滚/取消`DELETE`查询。

我怎样才能做到这一点？

```
CREATE TRIGGER check_before_delete BEFORE DELETE ON table_master
// what should I put here?
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:44:21.903

您尝试实现的行为已经存在于数据库中，可以通过`ON DELETE RESTRICT`触发器使用。定义表以利用这一点的示例如下所示：

```
CREATE TABLE `master` (
    `master_id` int(11) NOT NULL AUTO_INCREMENT,
    `title` varchar(50) DEFAULT NULL,
    PRIMARY KEY (`master_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `rel_master_another_tbl` (
    `master_id` int(11) NOT NULL,
    `another_id` int(11) NOT NULL,
    KEY `i_master_id` (`master_id`),
    FOREIGN KEY `fk_rel_master_another_tbl_master` (`master_id`)
        REFERENCES `master` (`id`) ON DELETE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

`RESTRICT``master`在这种情况下，如果您的表中有相应的行`rel_master_another_tbl`引用了 master id 列，则尝试从表中删除行将失败。另外，请注意这是外键和触发器`RESTRICT`的默认选项，因此您实际上可以如下所示定义外键，并且它的功能仍然相同：`ON DELETE``ON UPDATE`

```
FOREIGN KEY `fk_rel_master_another_tbl_master` (`master_id`)
    REFERENCES `master` (`id`) 
```

有关更多信息，请参阅有关[外键约束的 MySQL 文档。](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:50:04.523

如果你想检查这个 id 是否存在于另一个表中，那么你可以这样做：

```
DELIMITER $$

CREATE TRIGGER check_before_delete BEFORE DELETE ON table_master
FOR EACH ROW
BEGIN

DECLARE has_row TINYINT;

SELECT 1
INTO has_row
FROM rel_master_another_tbl
WHERE master_id = OLD.master_id;

IF has_row IS NOT NULL THEN
// PUT YOUR CODE HERE
END IF;

END$$ 
```

但是，请查看 Perception 关于在表之间设置键约束和使用`ON DELETE RESTRICT`触发器的评论，因为这可能是您问题的正确解决方案。

# php - 预订时间锁定

> ID：13966612
> 
> 赞同：-2
> 
> 时间：2012-12-20T06:40:38.333
> 
> 标签：php, time, locking

我正在实施一个预订网站。所有预订数据都进入一个 XML 文件。

如果多个用户尝试在同一天同时预订，我如何锁定第一个用户选择的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:46:04.763

您可以将一个标志用作已锁定，并在可用时将其设为零..当第一个人预订时..您可以将其更改为 1 并通过检查此标志将消息显示为已锁定.. **fieldName (flag) - 锁定为在 sql/xml 节点中默认为 0..**

您的理解，

*创建一个锁定在 DB/XML NODE 中的新字段，默认值为 0...，当您预订的第一个人将该字段检查为 0 或 1 时，如果它为 0，则在预订后将该字段更改为 1。 . 好的.. 现在，当第二个人来预订时，您必须检查锁定字段是 0 还是 1，如果 1 您不应该预订并通知该人它已被预订*

为了在选择自身时锁定.. 请按照以下步骤操作，

**您可以做一件事..您可以在选择时将其锁定为 1 5 - 10 分钟.. 之后如果已预订，请将其保留为 1 no pblm.. 否则将其更改为 0.. 明白了吗？？？ ？？？？？？或为预订再创建一个字段并使用锁定进行选择......检查预订..如果没有检查锁定**

# objective-c - 检测 iOS 应用程序使用的语言

> ID：13966614
> 
> 赞同：2
> 
> 时间：2012-12-20T06:40:44.207
> 
> 标签：objective-c, nslocale

如何检测当前的应用程序语言？我不是在谈论`NSLocale`用户偏好。

在我的应用程序中，目前支持两种语言。默认的“en”和特定的“it”。

我只是想知道实际使用的是哪一个。如果相关，作为进一步的解释，我仅通过 Web 服务为两种受支持的语言提供内容。调用服务时，我需要传递一个语言参数。目前我正在这样做，它有效，但我完全不喜欢它：

```
NSString *preferredLanguage = [[NSLocale preferredLanguages] objectAtIndex:0];

if (![preferredLanguage isEqualToString:@"it"] && ![preferredLanguage isEqualToString:@"en"]) {
    return @"en";
}
return preferredLanguage; 
```

我看过`NSLocale` `class`and `UIApplication`，但没有找到任何有用的东西。

我还注意到它`NSBundle`有一些本地化方法，但它们似乎都没有具体说明使用的是哪一种。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:52:21.830

`[[[NSBundle mainBundle] preferredLocalizations] objectAtIndex:0]`会更好，因为它总是会返回您的应用支持的本地化。之后无需进行额外检查。

事实上，你的代码有一个错误。如果用户首选项中的第一种语言不是您的应用支持的语言，iOS 将继续在列表中向下查找，直到找到您的应用支持的语言。因此，如果用户的偏好是`"fr", "it", "en", ...`，iOS 将加载`it`您的资源版本。但是，您的代码将回退到`en`.

（这在 OS X 上可能更重要，用户可以轻松更改语言顺序。在 iOS 上[显然可以](https://stackoverflow.com/questions/4072349/non-english-default-language-for-ios-app#comment4458844_4094880)做到这一点，但它的工作原理并不明显。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T06:59:31.190

我通常在Localizable.strings中保留一个特殊的键，比如“HTTPAcceptLanguage”，我设置为“en”、“fr”等。现在告诉你的服务器应用程序显示的语言就像NSLocalizedString(@"HTTPAcceptLanguage "，无）。

# java - 在加载jar的情况下如何知道哪个是调用方

> ID：13966618
> 
> 赞同：2
> 
> 时间：2012-12-20T06:40:50.610
> 
> 标签：java, classloader

考虑存在三个应用程序的场景。A、B 和 C

A 由 B 使用 Class.LoadFrom 加载。A 也可以从 C 加载 A 也可以作为独立应用程序启动

问题是，A 能找到是谁加载了 A 还是它自己启动的。

我试图找到进程名称，但这没有帮助。试图找到使用类加载器是否可以告诉我。也没有帮助。尝试使用我想避免的 StackTraces，但这根本不是一个好习惯。设置属性文件是我想要避免的，因为它需要一些手动操作。

在 .Net/C# 中这很容易:(

**编辑：**

看看这个，这在Java中可能吗？

[System.Reflection.Assembly.GetEntryAssembly](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getentryassembly.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:39:41.733

您可以使用线程名称来识别哪个类启动进程，这里是一个示例。它拥有自己的访问权限的票务系统。

```
public class TicketingSystem {

    public TicketingSystem() {
        System.out.println("Accessing by : " + Thread.currentThread().getName());
    }
    public void bookATicket() {
        // some process
    }
    public static void main(String[] args) {
        Thread.currentThread().setName("T.System");
        TicketingSystem ticketingSystem = new TicketingSystem();
    }
} 
```

代理访问`TicketingSystem`

```
 public class TicketAgent {
      public static void main(String[] args) {
          Thread.currentThread().setName("Agent");
          TicketingSystem ts = new TicketingSystem();
          ts.bookATicket();
      }
   } 
```

一位客户访问`TicketingSystem`

```
 public class Customer {
        public static void main(String[] args) {
            Thread.currentThread().setName("Customer");
            TicketingSystem ts = new  TicketingSystem();
            ts.bookATicket();
        }
} 
```

希望这个答案对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T11:17:39.277

[`Thread.getAllStackTraces()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#getAllStackTraces%28%29)可能工作。- 或者将`ThreadGroup` [层次结构](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ThreadGroup.html#getParent%28%29)向上移动到顶部并从根`ThreadGroup`( `getParent() == null`) 获取所有线程。

然后检查该`main()`方法的堆栈跟踪并找出它的包/类名可能会对您有所帮助。

检测“独立”模式很容易：当您的`main()`方法在其他代码之前运行时，您就是独立的。

```
public class MyMainClass {

  private static boolean standalone = false;

  public static boolean isStandalone() {
    return standalone;
  }

  public static void main(String[] args) {
    standalone = true;

    // Run as usual...

  }

} 
```

然后您的任何代码都可以调用`MyMainClass.isStandalone()`以确定它是否独立运行。

确定*哪个*应用程序正在运行您的代码，当它不处于独立模式时，有点困难，并且可能无法在没有堆栈跟踪的情况下完成，这并不总是完全可靠的，而是某种启发式方法。

如果您知道应用程序 B 中存在哪些类但 C 中不存在，反之亦然，您也可以尝试通过`Class.forName()`;找到其中一个类。如果该调用失败并且`ClassNotFoundException`您知道当前运行时环境中*没有*相关类，并且可能能够推断出哪个应用程序正在运行。

为每个应用程序定义某种应用程序全局属性肯定是一个更好的主意，然后您的代码可以对其进行评估。

# asp.net - 回发后请求标头变量的生命周期

> ID：13966624
> 
> 赞同：1
> 
> 时间：2012-12-20T06:41:15.910
> 
> 标签：asp.net, c#-4.0, httprequest

`Asp.net`我通过对页面进行后调用`Cross platform`，在标题部分传递一些变量，请求成功并且页面渲染。

如果页面上的任何控件导致`Postback`页面提交给自身，那么，

之前`Post`的调用标头变量会在之后吗`PostBack`

# tcp - 如何仅通过 BIOS 访问 Internet？

> ID：13966626
> 
> 赞同：4
> 
> 时间：2012-12-20T06:41:50.207
> 
> 标签：tcp, operating-system, kernel, bios

我写一个迷你操作系统只是为了好玩。我想将一些关键信息保存到 Internet 上的一个安全服务器，并在启动我的操作系统之前获取它。

所以我的问题是：**如何仅通过 BIOS 访问 Internet？**ie**如何在BIOS 环境中使用TCP 协议？**

PS。

很明显，无盘工作站使用了这种技术。所以在技术上是可行的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:22:46.820

无盘工作站使用[PXE](http://en.wikipedia.org/wiki/Preboot_Execution_Environment)，它是 NIC（网卡）ROM 或 BIOS 扩展的一部分，它是一个实现 TCP/IP 堆栈的简单环境，可以通过 TFTP 获取可执行文件并运行它。

有一个开源的，您可以根据需要修改[iPXE](http://ipxe.org/)并替换现有的 PXE ROM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:45:45.487

我不认为这是可能的。您需要在 BIOS 中实现网络驱动程序才能实现这一点。所以我会说这是不可能的。顺便说一句，我从未读过有人编写了他/她自己的 BIOS。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2022-03-04T22:44:56.130

如果您的电脑/路由器上有以太网端口，请购买 Gil.Net 路由器并将其无线连接到您的家用路由器，然后插入路由器

# android - 在android中的谷歌地图上绘制多个标记

> ID：13966632
> 
> 赞同：4
> 
> 时间：2012-12-20T06:42:17.753
> 
> 标签：android, google-maps

我是android领域的新手。我编写了一个**android App1**，它将从 Network Provider 检索纬度和经度值并将其存储在我的本地服务器（LAMP）中。

我还创建了一个 MYSQL DB 表，该表具有 3 列（lat、lon、id），其中包含使用网络提供程序检索的值（lat 和 lon）。目前我的表中有 10 多个值。

我创建了 JSON 对象，用于在我的**Android App2中使用 PHP 脚本从 MYSQL DB 获取这些值**

所有这些事情都很好。我现在要做的是创建一个 MapActivity，它将使用 Marker 在地图上绘制这些纬度和经度值。我试图在地图上绘制它，但我在地图上只获得了我的最后一个位置（我表中的最后一个纬度和经度值）。

如何在地图上绘制我的所有点。以下是我尝试过的代码，但无法正常工作。请帮助我纠正我的错误。

```
public class ShowMapActivity extends MapActivity {
String returnString;
String returnString1;
double aa1 ;
double  aa2;

  private MapController mapController;
  private MapView mapView;
  private LocationManager locationManager;
  private MyOverlay itemizedoverlay;
  private MyLocationOverlay myLocationOverlay;

  public void onCreate(Bundle bundle) {

    super.onCreate(bundle);
    setContentView(R.layout.main); // bind the layout to the activity

    // Configure the Map
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    //mapView.setSatellite(true);
    mapController = mapView.getController();
    mapController.setZoom(14); // Zoon 1 is world view
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    myLocationOverlay = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(myLocationOverlay);

    myLocationOverlay.runOnFirstFix(new Runnable() {
      public void run() {
        mapView.getController().animateTo(myLocationOverlay.getMyLocation());
      }
    });

    Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
    itemizedoverlay = new MyOverlay(this, drawable);
    createMarker();
  }

  @Override
  protected boolean isRouteDisplayed() {
    return false;
  }
      private void createMarker() {
    GeoPoint p = mapView.getMapCenter();
    OverlayItem overlayitem = new OverlayItem(p, "", "");
    itemizedoverlay.addOverlay(overlayitem);
    if (itemizedoverlay.size() > 0) {
      mapView.getOverlays().add(itemizedoverlay);
    }
  }

  @Override
  protected void onResume() {
    super.onResume();
    myLocationOverlay.enableMyLocation();
    myLocationOverlay.enableCompass();
  }

  @Override
  protected void onPause() {
    super.onPause();
    myLocationOverlay.disableMyLocation();
    myLocationOverlay.disableCompass();
  }

  public class GetMethodEx {

        public String getInternetData() throws Exception {

            BufferedReader in = null;
            String data = "";

            //String returnString = null;

            // httpGet

            try {

                HttpClient client = new DefaultHttpClient();
                URI website = new URI("http://192.168.1.15/latlonret1.php");
                HttpGet request = new HttpGet();
                request.setURI(website);
                HttpResponse response = client.execute(request);
                in = new BufferedReader(new InputStreamReader(response
                        .getEntity().getContent()));
                StringBuffer sb = new StringBuffer("");
                String l = "";
                String nl = System.getProperty("line.separator");

                while ((l = in.readLine()) != null) {
                    sb.append(l + nl);
                }
                in.close();
                data = sb.toString();
                // return data;
            } catch (Exception e) {
                Log.e("log_tag", "Error converting result " + e.toString());
            }

            // parse json data
            try {

                JSONArray jArray = new JSONArray(data);

                for (int i = 0; i < jArray.length(); i++) {
                    JSONObject json_data = jArray.getJSONObject(i);
                    JSONObject json_data1 = jArray.getJSONObject(i);

                    returnString =json_data.getString("lat") + "\n";
                    returnString1 =json_data1.getString("lon") + "\n";
                    System.out.println(returnString);
                    System.out.println(returnString1);
              }

         Bundle bundle = new Bundle();
         bundle.putString("stuff", returnString); 
         bundle.putString("stuff1", returnString1); 

         try
         {
             aa1=Double.valueOf(returnString);
             aa2=Double.valueOf(returnString1);
         }
         catch(Exception e)
         {

         }

           System.out.println(returnString);
           System.out.println(returnString1);
            }

            catch (JSONException e) {
                Log.e("log_tag", "Error parsing data " + e.toString());
            }

            return returnString;

        }  
  }
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:04:28.663

[这](http://androidcodeplace.blogspot.com/2012/04/adding-multiple-markers-on-android-map.html)可能会有所帮助。SO上也有很多例子。

# mongodb - CKEditor：有没有办法做转义字符工作？

> ID：13966635
> 
> 赞同：0
> 
> 时间：2012-12-20T06:42:45.350
> 
> 标签：mongodb, ckeditor, html-escape-characters

编辑器输出的内容带有html标签，

但我想将它们存储到 中`Mongodb`，所以我想我需要做一个逃生角色的工作，

ckeditor自己的转义字符方法吗？

顺便说一句，有必要做转义字符工作吗？或者我最好将它们转换为其他数据格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:10:53.463

原生 JS 方法将解决您的问题：

```
escape( '<a href="#">Foo</a>' )
> %3Ca%20href%3D%22%23%22%3EFoo%3C/a%3E

unescape( '%3Ca%20href%3D%22%23%22%3EFoo%3C/a%3E' )
> <a href="#">Foo</a> 
```

# android - 使用 ActionBarSherlock 设置菜单项居中和全宽

> ID：13966639
> 
> 赞同：2
> 
> 时间：2012-12-20T06:42:59.843
> 
> 标签：android, actionbarsherlock

我正在尝试显示一个带有两个项目的操作栏，取消和保存，但我希望这些布局跨越操作栏的整个长度，如下所示：

```
______________________________
|____Cancel____|____Save ____|
|                            |
|                            |
|                            |
|                            | 
```

所以基本上我需要一种方法来只显示两个操作项，居中并跨越整个操作栏。

实现这一目标的最简单方法是什么？我正在考虑使用自定义布局，但由于我对使用操作栏和菜单还很陌生，所以我不确定如何才能做到这一点并且让这些仍然是菜单操作项。

有没有某种造型解决方案？完成此任务的最佳和最轻松的方法是什么？

**编辑**

因为这是我第一次使用操作栏和自定义布局，所以我不知道什么会起作用，什么是完全行不通的愚蠢方法。例如，将自定义布局设置为此：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="match_parent" 
    android:layout_gravity="center_horizontal">

    <item android:id="@+id/menu_item_cancel"
            android:showAsAction="always"
            android:title="Cancel"/>

    <item android:id="@+id/menu_item_save"
            android:showAsAction="always"
            android:title="Save" />
</menu> 
```

导致通货膨胀异常并且不起作用，尽管其他有更多经验的人会立即知道这行不通，但在我能感觉到自己的出路或有人指出正确的方向之前，我一直在浪费时间.

因此，对于那些问我尝试过什么的人，我会继续发帖，但期待很多。

**第二次尝试**

获取 ClassNotFoundException：在路径上找不到类“android.view.menu”

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent" 
        android:layout_height="match_parent"
        android:layout_gravity="center_horizontal">

    <menu android:layout_gravity="center_horizontal">

        <item android:id="@+id/menu_item_cancel"
                android:showAsAction="always"
                android:title="Cancel"/>

        <item android:id="@+id/menu_item_save"
                android:showAsAction="always"
                android:title="Save" />
    </menu>

</LinearLayout> 
```

**第三次尝试**

这几乎可以工作，除了我只看到每个按钮的上半部分。下半部分被切断，即使动作栏似乎有足够的空间让它正确地绘制自己。

我也失去了操作项样式，因为这些是普通按钮以及分隔线。我更愿意找到一个使用本机操作项的解决方案，因为它可以更轻松地与整个应用程序中的其他操作栏一起设置样式。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent" 
        android:layout_height="match_parent"
        android:layout_gravity="center_horizontal">

                <Button
                    android:id="@+id/cancel_btn"
                    android:layout_width="0dp"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="Cancel" />

                <Button
                    android:id="@+id/save_btn"
                    android:layout_width="0dp"
                    android:layout_height="fill_parent"
                    android:layout_weight="1"
                    android:text="Save" />
</LinearLayout> 
```

**第四次尝试**

这个非常接近。我正在浏览 ActionBarSherlock 演示项目，并注意到当使用拆分菜单栏时，布局往往会居中。所以我恢复到我一直在使用的原始菜单，并添加了 showAsAction ifRoom 值。

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/menu_item_cancel"
            android:showAsAction="ifRoom"
            android:title="Cancel"/>

    <item android:id="@+id/menu_item_save"
            android:showAsAction="ifRoom"
            android:title="Save"/>
</menu> 
```

我还将它添加到清单中的活动中：

```
android:uiOptions="splitActionBarWhenNarrow" 
```

这给了我想要的确切样式......但它在拆分操作栏中​​。我想要这个在顶部，而不是在底部。在带有 Android 2.2 的模拟器上运行它可以工作，但似乎将两个选项与文本长度成比例居中，因此取消的区域大于保存的区域。

如果有人知道一种获得这种精确样式的方法，但在顶部操作栏中，那将解决所有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:03:19.060

使用本机操作栏样式或选项似乎不是一种方法。不得不使用自定义视图，类似于我的第三次尝试，修改了样式和背景来模仿操作栏。

# c# - 如何编写 nUnit/Moq 来测试通用扩展方法？

> ID：13966641
> 
> 赞同：4
> 
> 时间：2012-12-20T06:43:12.963
> 
> 标签：c#, tdd, nunit, moq

我有以下通用扩展方法，用于从 ObjectContext 中删除所有 EntityObjects

```
public static void DeleleAllObjects<TEntity>(this ObjectContext context)
        where TEntity : EntityObject
    {
        var objectSet = context.CreateObjectSet<TEntity>();
        objectSet.ToList().ForEach(e => objectSet.DeleteObject(e));
    } 
```

我对 TDD 和使用 nUnit/Moq 还很陌生……但我不确定在哪里为这种方法编写测试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T07:30:21.137

我希望这有帮助：

```
[TestFixture]
public class ExtensionTest
{
    public class FakeEntity : EntityObject
    {

    }

    [Test]
    public void DeleteAllObjects()
    {
        //arrange
        var objectsToDelete = new List<FakeEntity>
            {
                new FakeEntity(),
                new FakeEntity()
            };
        var mockContext = new Mock<ObjectContext>();
        var mockObjectSet = new Mock<ObjectSet<FakeEntity>>();
        mockObjectSet.Setup(x => x.ToList()).Returns(objectsToDelete);
        mockContext.Setup(x => x.CreateObjectSet<FakeEntity>()).Returns(mockObjectSet.Object);

        //act
        mockContext.Object.DeleteAllObjects<FakeEntity>();

        //assert
        mockContext.Verify(x => x.CreateObjectSet<FakeEntity>(), Times.Once());
        mockObjectSet.Verify(x => x.ToList(), Times.Once());
        mockObjectSet.Verify(x => x.DeleteObject(It.IsAny<FakeEntity>()), Times.Exactly(2));

    }
} 
```

现在，这是假设您所有的模拟类型（上下文和对象集）都有您调用的方法声明为`virtual`或类是`abstract`. 模拟接口通常限制较少。

此外，如果您想对断言更加挑剔，以确保确实`DeleteObject`首先使用第一个实例调用，然后使用第二个实例调用，而不是第一个实例调用两次，那么您可以更改测试的那部分。但这应该是一个很好的起点。

**总结一下：**

这个特定的测试应该只真正测试你的扩展方法中的代码。意思是，它应该只确保您调用`CreateObjectSet<>()`，获取列表，然后调用`DeleteObject`每个。

它根本不应该关心是否确实`DeleteObject()`改变了`ObjectSet`（事实上它不会，因为它是一个模拟）。这应该是该`DeleteObject()`方法测试的责任，但由于我假设这实际上是一个 EF 方法，因此您不应该为第三方组件编写测试。

# ruby-on-rails - 带有 join_table 和 has_many 的模型的路由错误：在 RailsAdmin 中通过

> ID：13966643
> 
> 赞同：5
> 
> 时间：2012-12-20T06:43:39.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-admin

所以我有 3 个模型：`category`, `product`, `category_products`.

这是我的`category.rb`

```
 attr_accessible :name
    has_many :category_products do
         def with_products
           includes(:product)
         end
       end

  has_many :products, :through => :category_products 
```

这是我的`product.rb`

```
 attr_accessible :name, :description, :price, :vendor_id, :image, :category_ids

    belongs_to :vendor
    has_many :category_products do
           def with_categories
             includes(:category)
           end
    end

    has_many :categories, :through => :category_products 
```

这是我的`category_product.rb`

```
 attr_accessible :product_id, :category_id, :purchases_count

    belongs_to :product
  belongs_to :category

  validates_uniqueness_of :product_id, :scope => :category_id 
```

这是我的`routes.rb`

```
 mount RailsAdmin::Engine => '/admin', :as => 'rails_admin'
  resources :categories
  resources :vendors do
      resources :products
  end

  authenticated :user do
    root :to => 'home#index'
  end

  root :to => "home#index"
  devise_for :users
  resources :users 
```

`Categories`当我在查看 RailsAdmin 时单击时，出现此错误：

```
ActionController::RoutingError at /admin/category

Message No route matches {:action=>"show", :model_name=>"category_product", :id=>nil, :controller=>"rails_admin/main"} 
```

单击时我也收到此错误`Category Products`

```
ActiveRecord::StatementInvalid at /admin/category_product

Message SQLite3::SQLException: no such column: category_products.desc: SELECT "category_products".* FROM "category_products" ORDER BY category_products. desc LIMIT 20 OFFSET 0 
```

RailsAdmin 中用于我的其他“正常”（即非 HMT）模型的所有其他链接都有效。

这可能是什么原因造成的？

谢谢。

**编辑 1**

对于它的价值，这是我在 Rails Admin 中单击“类别”时的日志：

```
CodeRay::Scanners could not load plugin nil; falling back to :text
CodeRay::Scanners could not load plugin nil; falling back to :text

Started GET "/admin/category?_pjax=%5Bdata-pjax-container%5D" for 127.0.0.1 at 2012-12-20 22:23:38 -0500
Processing by RailsAdmin::MainController#index as HTML
  Parameters: {"_pjax"=>"[data-pjax-container]", "model_name"=>"category"}
  Category Load (0.3ms)  SELECT "categories".* FROM "categories" LIMIT 6
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Category Load (0.2ms)  SELECT "categories".* FROM "categories" ORDER BY categories.id desc LIMIT 20 OFFSET 0
  CategoryProduct Load (0.2ms)  SELECT "category_products".* FROM "category_products" WHERE "category_products"."category_id" = 2
  Rendered /.rvm/gems/ruby-1.9.3-p194@apt-605/gems/rails_admin-0.3.0/app/views/rails_admin/main/index.html.haml within layouts/rails_admin/pjax (29.4ms)
Completed 500 Internal Server Error in 43ms
CodeRay::Scanners could not load plugin nil; falling back to :text
CodeRay::Scanners could not load plugin nil; falling back to :text

Started GET "/admin/category" for 127.0.0.1 at 2012-12-20 22:23:40 -0500
Processing by RailsAdmin::MainController#index as HTML
  Parameters: {"model_name"=>"category"}
  Category Load (0.3ms)  SELECT "categories".* FROM "categories" LIMIT 6
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Category Load (0.2ms)  SELECT "categories".* FROM "categories" ORDER BY categories.id desc LIMIT 20 OFFSET 0
  CategoryProduct Load (0.2ms)  SELECT "category_products".* FROM "category_products" WHERE "category_products"."category_id" = 2
  Rendered /.rvm/gems/ruby-1.9.3-p194@apt-605/gems/rails_admin-0.3.0/app/views/rails_admin/main/index.html.haml within layouts/rails_admin/application (30.5ms)
Completed 500 Internal Server Error in 251ms 
```

**编辑 2**

这是错误[的完整跟踪的要点。](https://gist.github.com/e0f9e0d399791be038ef)我正在使用 gem better_errors，所以跟踪看起来不像标准的 Rails 跟踪错误。但是数据是一样的。

**编辑 3**

这是我的 3 个模型的架构：

`CategoryProducts`

```
# == Schema Information
#
# Table name: category_products
#
#  product_id      :integer
#  category_id     :integer
#  purchases_count :integer          default(0)
#  created_at      :datetime         not null
#  updated_at      :datetime         not null 
```

`Category`

```
# == Schema Information
#
# Table name: categories
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null 
```

`Product`

```
# == Schema Information
#
# Table name: products
#
#  id          :integer          not null, primary key
#  name        :string(255)
#  description :string(255)
#  price       :float
#  vendor_id   :integer
#  created_at  :datetime         not null
#  updated_at  :datetime         not null
#  image       :string(255) 
```

请注意，`CategoryProduct`它没有主键字段。是这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T02:44:22.917

检查所有 CategoryProduct 对象是否有外键：category_id 和 product_id。

```
CategoryProduct.all.each {|c| raise("Repair #{c.id}") unless c.category && c.product} 
```

**12月21日更新：**

我是如何安装带有 Category、Product 和 CategoryProduct 的全新 Rails 3.2.9 的。模型的关系代码是相同的，RailsAdmin 具有默认设置。

它没有任何问题！

我决定检验我的假设。我想也许当你从 HABTM 转到 HM2HM 时，你错过了（忘记）为 CategoryProduct 重新建立关键列 ID，它现在不仅仅是一个连接模型，而是一个独立的实体。

因此，路由错误如下：

```
No route matches {:action=>"show", :model_name=>"category_product", :id=>nil, :controller=>"rails_admin/main"} 
```

可能是*缺少 id*的结果。

好吧，我手动禁用了 CategoryProduct 的 id 字段（def id; nil; end）。

是的，它是：

```
No route matches {:action=>"show", :model_name=>"category_product", :id=>nil, :controller=>"rails_admin/main"} 
```

# android - 同一项目的android eclipse自定义版本

> ID：13966649
> 
> 赞同：0
> 
> 时间：2012-12-20T06:44:26.983
> 
> 标签：android, manifest

我想在我的平板电脑上尝试同一应用程序的 2 个不同版本。

所以在eclipse中导入了两个项目，项目名称不同。

我在清单中更改了应用程序的名称，我更改了图标以便能够在我的桌面上识别它们......

我只是不能同时接听电话。我可以同时执行它们，但安装一个会删除另一个。

我想我正在寻找的更改在 manifest.xml 中，但我仍然找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:50:02.383

在 Eclipse 中，在 Package Explorer 中选择 src/ 目录中的 com.xxxx.yyyy，该项目的清单已更改。右键单击-> 重构-> 重命名。输入一个新的包名，例如 com.abc.test

然后，在清单 XML 中，还将“com.xxxx.yyyy”的所有实例替换为新的“com.abc.test”包名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:50:08.167

您必须更改您的包名称。每个应用程序的包名称必须是唯一的。

来自[官方文档](http://developer.android.com/training/basics/firstapp/creating-project.html)

> **包名称**是您的应用程序的包命名空间（遵循与 Java 编程语言中的包相同的规则）。您的包名称在 Android 系统上安装的所有包中必须是唯一的。因此，通常最好使用以组织或发布者实体的反向域名开头的名称。

# javascript - 是什么阻止了这个动画是自动的？

> ID：13966651
> 
> 赞同：1
> 
> 时间：2012-12-20T06:44:53.463
> 
> 标签：javascript, jquery-animate, slider

我的客户希望他们网站上的这个“赞助商”滑块可以滚动、随机化或淡入淡出。我尝试了不同的方法来实现所有这些，但没有任何效果。现在，滑块由设置为“.click”命令的按钮控制。有没有办法用Javascript添加动画，我需要改变什么才能做到这一点？如果不是动画，有没有办法用Javascript随机化页面加载上的数组？我一直在尝试输入不同的更改，但没有任何效果。我觉得也许我需要“关闭其他东西”才能让它们工作......

我是 Javascript 的新手，所以我会很感激一些帮助。

这是代码：

```
// ============
// = SPONSORS =
// ============

if($('#sponsors').length>0){

    // let's make sure our logos are centered
    $(window).load(function(){
        $('#sponsor-logos li').each(function(){
            wrapper = $(this).find('span.logo');
            wrapper_height = wrapper.height();
            sponsor_logo = $(this).find('img');
            total_height = 84;
            logo_height = sponsor_logo.height();
            buffer = Math.floor(((total_height - logo_height) / 2));
            wrapper.css('paddingTop',buffer + 'px').height(wrapper_height-buffer);
        });
    });

    window_width = 656;
    slide_duration = 500;

    // get our arrows on there
    $('#sponsors .inner').prepend('<a class="prev" href="#">Prev</a>').append('<a class="next" href="#">Next</a>');

    // set our width
    thumbs = $('#sponsor-logos');
    thumbs.width(thumbs.children().length*164);
    thumbs.wrap('<div class="slider"></div>');

    // hook the arrows
    $('#sponsors  a.prev').click(function(){
        thumbs = $('#sponsor-logos');
        if((Math.abs(parseInt(thumbs.css('left').replace('px',''),10)))>1){
            if(!thumbs.data('animating')){
                thumbs.data('animating',true);
                thumbs.animate(
                        {left:'+='+window_width+'px'},
                        slide_duration, 'swing', function(){
                            thumbs.data('animating',false);
                        }
                    );
            }
        }else{
            // already too far, we'll bounce for feedback
            if(!thumbs.data('animating')){
                thumbs.data('animating',true);
                thumbs.animate(
                        {left:'+=15px'},
                        (slide_duration/5), 'swing', function(){
                            thumbs.animate(
                                    {left:'-=15px'},
                                    (slide_duration/5), 'swing', function(){
                                        thumbs.data('animating',false);
                                    }
                                );
                        }
                    );
            }
        }
        return false;
    });

    $('#sponsors a.next').click(function(){
        thumbs = $('#sponsor-logos');
        if(thumbs.width() - window_width - Math.abs(parseInt(thumbs.css('left').replace('px',''),10)) > 150){ // 150 represents at least one thumb (194 to be exact)
            if(!thumbs.data('animating')){
                thumbs.data('animating',true);
                thumbs.animate(
                        {left:'-='+window_width+'px'},
                        slide_duration, 'swing', function(){
                            thumbs.data('animating',false);
                        }
                    );
            }
        }else{
            // already too far, we'll bounce for feedback
            if(!thumbs.data('animating')){
                thumbs.data('animating',true);
                thumbs.animate(
                        {left:'-=15px'},
                        (slide_duration/5), 'swing', function(){
                            thumbs.animate(
                                    {left:'+=15px'},
                                    (slide_duration/5), 'swing', function(){
                                        thumbs.data('animating',false);
                                    }
                                );
                        }
                    );
            }
        }
        return false;
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:27:04.773

看起来您可能已经修改了预制 jquery 图像滑块的脚本。如果是这种情况，您很可能会遇到困难。通常你在你的头文件中包含提供的脚本，然后在你的 html 文件中，将它指向你的 DOM 中的一个元素，比如

```
$("#galleryContainerElement").imgSlider({ object:of, slider:preferences }); 
```

如果您在使用特定滑块时遇到问题，请告诉我们是哪一个。

如果您还没有，我建议您使用像[Orbit](http://www.zurb.com/playground/orbit-jquery-image-slider)这样的滑块（它现在是 Zurb 的*Foundation*框架的一部分，但您可以单独下载它）。或者，有几十个基于 jQuery 构建的滑块，如果您完全熟悉 jQuery，大多数都易于配置。

如果您想重新发明轮子，jQuery 有一个[animate()](http://api.jquery.com/animate/)函数（在您提供的代码中使用了几次）。您需要使用触发 onload / document.ready 的[setTimeout()](http://www.w3schools.com/jsref/met_win_settimeout.asp)或[setInterval()](http://www.w3schools.com/jsref/met_win_setinterval.asp)函数，并且声明的函数`$('#sponsors a.prev').click()`应该`$('#sponsors a.next').click()`移出，以便您可以回收它们。鉴于已经存在如此多的滑块，我不太愿意通过编写自己的滑块。

旁注：请注意 w3schools 与 W3C 没有任何关联；我在这里引用它们是因为它们的例子很简单。

# apache - 如何配置 apache 服务器以使用 cgi 程序？

> ID：13966658
> 
> 赞同：1
> 
> 时间：2012-12-20T06:45:39.077
> 
> 标签：apache, cgi

我想用 C++ 编写一个测试 cgi 程序。但是当我将配置文件设置如下：

```
ScriptAlias /cgi-bin/ "F:/workbench/cgi-bin/"
<Directory "F:/workbench/cgi-bin">
AllowOverride None
Options ExecCGI
Order allow,deny
Allow from all
</Directory>
AddHandler cgi-script .exe .pl .cgi 
```

然后编写一个helloworld程序如下：

```
#include <stdio.h>
int main(void)
{
    printf("\n");
    printf("Hello, World!\n");
    return 0;
} 
```

并在我重新启动服务器并访问 cgi 时使用 g++ hello.cpp -o hello.cgi 编译它：localhost\cgi-bin\hello.cgi 它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T17:42:25.393

您需要添加一个 HTTP 标头来描述输出。Http Header 和 Http body 由两个换行符分隔。我认为如果您包含一个简单的标题，例如“content-type：text/plain”，您的代码将起作用。换句话说，尝试：

```
#include <stdio.h>
int main(void) {
    printf("Content-type: text/plain\n");
    printf("\n");
    printf("Hello, World!\n");
    return 0;
} 
```

# c# - 如何选择标签的对象，如果它是 C# 中 Grid 的子对象

> ID：13966663
> 
> 赞同：0
> 
> 时间：2012-12-20T06:45:55.450
> 
> 标签：c#, silverlight, windows-phone-7

我有一个程序，我必须在其中更改作为网格子项的标签文本（单击按钮）

```
public class XLabel
{
 Grid uiGrid = null;
 TextBlock textblock = null;
 string emptyString = "";

 Public void createLabel()
 {
  uiGrid.Children.Add(textblock);   
  grid.Children.Add(uiGrid);     
 }

 public void cleartext()
 {                
  textblock.Text = emptyString;          
 }
} 
```

在其他课程中，我有一种清除文本的方法

```
public void clearText()
{         
  XLabel obj = new XLabel();
  obj.cleartext(indexi);          
} 
```

如果有许多网格并且每个网格都有一个标签，如何选择特定标签以清除特定网格中的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:56:12.450

Grid 对象具有*Name*或*Tag*等属性，可用于搜索。

如果您以编程方式创建网格，则应为每个网格创建一个唯一属性，然后在您的 clearText 方法中，您只需从 XLabel 对象接收所有 Grid 对象并搜索具有正确名称/标签的对象。

* * *

要从网格中获取标签列表，您可以像这样使用 lambda：

```
List<UIElement> list = 
          YourGrid.Children.Where(o => o.GetType() == typeof(Label)).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:18:01.430

为了扩展奥尔特的答案，

像这样创建您的文本块和网格

```
Grid uiGrid = new Grid() { Name = "uiGrid"+1 };
TextBlock textblock = new TextBlock() { Name = "textBlock"+1 }; 
```

每次更改您添加到网格和文本块的数字，并以某种方式计划跟踪该数字。

然后当你想清除文本时，

```
(this.FindName("textBlock"+1) as TextBlock).Text = ""; 
```

# php - DOMXPath 查询动态 HTML

> ID：13966668
> 
> 赞同：2
> 
> 时间：2012-12-20T06:46:17.457
> 
> 标签：php, xpath, domxpath

假设我有这个来自源的 HTML（报废它）：

```
<tr class="calendar_row" data-eventid="41675">
    <td class="alt2 eventDate smallfont" align="center"/>
    <td class="alt2 smallfont" align="center">9:00pm</td>
    <td class="alt2 smallfont" align="center">AUD</td>
    <td class="alt2 icon smallfont" align="center">
         <div class="cal_imp_medium" title="Medium Impact Expected"/>
    </td>
    <td class="alt2 eventHigh smallfont" align="center">
         <div class="calendar_detail level_1" data-level="1" title="Open Detail"/>
    </td>

    //I want to get this part below correctly

    <td class="alt2 pad_left eventHigh smallfont" align="center">0.2%</td>
    <td class="alt2 pad_left eventHigh smallfont" align="center"/>
    <td class="alt2 pad_left eventHigh smallfont" align="center">
        <span class="revised worse" title="Revised From -0.3%">-0.4%</span>
    </td>
</tr>​ 
```

我想通过 XPath 获取 td 的值（nodeValues）：

```
$query = $xpath->query('//tr[@data-eventid="41675"]/td[@class="alt2 pad_left eventHigh smallfont"]'); 
```

我不明白为什么我只得到**-0.4%**的值。尽管 html 似乎很复杂，并且与它的格式化方式无关，但是否有任何可能的方法（查询）来检索标签之间的值，包括第二个 td 上的空值？

完整代码

```
libxml_use_internal_errors(true);
$doc    = new DOMDocument();
$doc->loadHTML($html);
$xpath  = new DOMXPath($doc);

$query_results = $xpath->query('//tr[@data-eventid="'.$data_eventid.'"]/td[@class="alt2 pad_left eventHigh smallfont"]');
foreach($query_results as $values){
    if($values->nodeValue!=' ' and $values->nodeValue!='' and $values->nodeName!='#text') { //Discards Empty Arrays
        $table_values[$data_eventid][5] = $values->nodeValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:36:58.340

试试这个：`//tr[@data-eventid="41675"]/td[@class="alt2 pad_left eventHigh smallfont"]/descendant-or-self::*/text()`

好吧，您可能只想要节点，所以请`/text()`关闭：

```
//tr[@data-eventid="41675"]/td[@class="alt2 pad_left eventHigh smallfont"]/descendant-or-self::* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:19:48.070

您的 XPath 匹配三个`td`元素，第一个 contains `0.2%`，然后是一个空元素，最后一个 contains `<span class="revised worse" title="Revised From -0.3%">-0.4%</span>`。

您按顺序将这些节点的值（跳过空节点）分配给同一个变量`table_values[$data_eventid][5]`- 因此将包含最后一个（非空）节点的值 - 即`-0.4%`

如果您想要所有节点的值，您应该将它们附加到列表中，或者将它们放置在数组的不同元素中。

# c++ - 计算图像的模糊度和锐度

> ID：13966674
> 
> 赞同：0
> 
> 时间：2012-12-20T06:46:32.337
> 
> 标签：c++, image-processing, opencv, computer-vision

> **可能重复：**
> [有没有办法检测图像是否模糊？](https://stackoverflow.com/questions/7765810/is-there-a-way-to-detect-if-an-image-is-blurry)

如何使用opencv计算给定图像的模糊度和清晰度？opencv 中是否有任何功能可以做到这一点？如果opencv中没有函数我该如何实现它？不，想法会很棒..

输入将是图像，输出应该是图像的模糊度和清晰度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:05:12.103

我不知道opencv。

如果我试图获得一个图像在从锐利到模糊的光谱上的近似测量值，我会从观察开始，即图像部分的锐度从相邻像素之间的对比度中是显而易见的——比如`max(c1 * abs(r1 - r2), c2 * abs(g1 - g2), c3 * abs(b1 - b2))`在哪里c1-3对红、绿、蓝各通道的感知重要性进行加权，两个像素分别为(r1,g1,b1)和(r2,g2,b2))。

可以进行许多调整，例如提高每种颜色对功率的贡献，以强调亮度标度的黑暗（功率 <1）或明亮（功率 >1）端的变化。请注意，该`max()`方法分别考虑每个颜色通道的清晰度：尽管只有一个通道发生变化，但从 (255,255,255) 到 (0,255,255) 的变化非常显着。

您可能会发现从 RBG 转换为另一种颜色表示形式会更好，例如色相/饱和度/值（网上会有很多网站解释 HSV 空间和转换公式）。

在摄影方面，我们通常想知道图像的对焦部分是否清晰（由于浅景深导致的前景/背景模糊/散景是正常且经常需要的质量） - 最清楚的指示是高对比度在图像的某些部分，建议您想要相邻像素对比度的最大值。也就是说，一些聚焦的图像仍然可以具有非常低的局部对比度（例如纯色表面的图片）。此外，传感器上损坏的像素元件、镜头/传感器上的污垢以及高 ISO/长时间曝光噪声都可能表现为对比度极高的斑点。所以你的结果的有效性总是值得怀疑的，但它可能是正确的，有一定比例的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T09:10:13.967

我建议您对图像进行频繁分析。高波段的能量会告诉你图像非常清晰，而低波段的能量通常意味着图像模糊。对于计算频谱，您可以使用 FFTW 库。

问候，

# batch-file - 批处理：脚本已经获取文件夹和子文件夹的名称 - 如何获取没有扩展名的文件名？

> ID：13966676
> 
> 赞同：1
> 
> 时间：2012-12-20T06:46:38.447
> 
> 标签：batch-file, directory, filenames, output, subdirectory

该脚本获取文件夹名称及其子文件夹名称并将它们保存到 HTML 文件中。我还需要子文件夹中所有文件的文件名（不带扩展名）。我用一些 HTML 对脚本进行了拉皮条。

**列表.cmd**

```
@echo off
chcp 1252
del D:\list.html
for /f "tokens=*" %%G in ('dir /ad /b D:\packing') do (
echo ^<center^>^<b^>^<font size="4" color="#ffffff" face="Lucida Sans Unicode, Lucida Grande" style="background-color:#4682b4;"^>^&nbsp; >> D:\list.html
echo %%G ^&nbsp; >> D:\list.html
echo ^</b^>^<a href="#" style="color:#4682b4; text-decoration:none;"^> >> D:\list.html
echo ^</a^>^</font^>^<br^>^</center^> >> D:\list.html
echo ^<center^>^<font size="2" color="#000000" face="Verdana"^> >> D:\list.html
call D:\packing\list2.cmd "%%G"
echo ^</font^>^</center^>^<br^>^<br^> >> D:\list.html
) 
```

**list2.cmd**

```
for /f "tokens=*" %%H in ('dir /ad /b D:\packing\%1') do echo %%H ^<br^> >> D:\list.html
echo. >> D:\list.html 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:13:08.403

您可以使用所有子文件夹中的每个文件获取不带扩展名的文件名

```
for /r C:\dirname %%a in (*) do echo %%~na 
```

他们都会`echo`这样。只需在需要的地方修改并在脚本中使用它。

# image - 当我在 tomcat 上部署我的 gwt 应用程序并在 IE 中运行它时，资源包中的所有图像都会出现在屏幕上

> ID：13966677
> 
> 赞同：1
> 
> 时间：2012-12-20T06:46:48.747
> 
> 标签：image, internet-explorer, gwt, tomcat

嗨，我正在开发一个项目，我需要生成时间线之类的东西，我需要根据条件将图像动态放置在水平线上。图像实例会根据数据库中的条件而有所不同，并且实例的数量也会有所不同。我使用绝对面板来执行此操作，并将图像放置在水平轴之间 40 的差异处，以保持 y 轴不变。这些图像来自一个扩展 Client Bundle 的类，如下所示。

```
 public interface TimeLineWidgetResources extends ClientBundle {

TimeLineWidgetResources INSTANCE = GWT
        .create(TimeLineWidgetResources.class);

@Source("application-connection-point_big.png")
ImageResource getApplicationConnectionPointImage();

@Source("business-connection-point_big.png")
ImageResource getBusinessConnectionPointImage();

@Source("monitor_small.png")
ImageResource getMonitorImage(); 
```

}

我在这里只放了 3 张，但在我的资源文件中我有将近 15 张图片。时间线在 IE、Chrome 和 Safari 中的 jetty 服务器上看起来很完美。但是当我创建一个战争并将其部署在 tomcat 中时，它在 Chrome 和 safari 中看起来很完美，但所有图像都会出现并显示在 IE 的屏幕上。如果我创建它的 5 个实例，那么它将创建 5*15 = 75 个这些图像的实例。任何人都可以帮我解决这个问题。我在这里做错了什么？让我在这里也发布绝对面板代码。

```
 /** The method to build Time Line using an absolute Panel */

public void buildNewTimeLine(GWTTimeLine timeLine) {
    absolutePanel.setPixelSize((Window.getClientWidth() * 3) / 4, 200);
    absolutePanel.getElement().getStyle().setOverflow(Overflow.AUTO);
    String startDate = timeLine.getStartDate();
    String endDate = timeLine.getEndDate();
    List<GWTTimeLineComponent> timeLineComponents = new ArrayList<GWTTimeLineComponent>();
    timeLineComponents = timeLine.getComponents();
    buildTimeLineEvents(timeLineComponents);

    int i = 0;
    for (i = 0; i < timeLineComponents.size(); i++) {

        if (i == 0) {
            Image startImage = new Image();
            startImage
                    .setUrl(resources.getVerticalLineImage().getSafeUri());
            absolutePanel.add(startImage, 48, 70);

        }

        if (i == (timeLineComponents.size() - 1)) {
            Image continueImage = new Image();
            continueImage
                    .setUrl(resources.getLineArrowImage().getSafeUri());
            absolutePanel.add(continueImage, horizontalImageXAxis + 80, 70);

        }

        GWTTimeLineComponent timeLineComponent = new GWTTimeLineComponent();
        timeLineComponent = timeLineComponents.get(i);
        String icon = timeLineComponent.getIcon();
        int id = timeLineComponent.getId();
        String logicalId = timeLineComponent.getLogicalId();
        List<GWTTimeLineEvent> timeLineEvents = new ArrayList<GWTTimeLineEvent>();
        timeLineEvents = timeLineComponent.getEvents();

        if (icon.startsWith("infor.engine.monitor")) {

            if (isAbove == true) {
                isAbove = false;
                isBelow = true;
                Image monitorImage = new Image();
                monitorImage.setUrl(resources.getMonitorImage()
                        .getSafeUri());
                monitorImage.setTitle(timeLineComponent.getLogicalId());
                String downOrUpOrBiDirectionalArrow = "up";
                buildTimeLineComponents(downOrUpOrBiDirectionalArrow,
                        monitorImage, id, logicalId);
            }

            else if (isBelow == true) {
                isAbove = true;
                isBelow = false;
                Image monitorImage = new Image();
                monitorImage.setUrl(resources.getMonitorImage()
                        .getSafeUri());
                monitorImage.setTitle(timeLineComponent.getLogicalId());
                String downOrUpOrBiDirectionalArrow = "down";
                buildTimeLineComponents(downOrUpOrBiDirectionalArrow,
                        monitorImage, id, logicalId);

            }

        } else if (icon.startsWith("infor.database")) {

            if (isAbove == true) {
                isAbove = false;
                isBelow = true;
                Image databaseImage = new Image();
                databaseImage.setUrl(resources
                        .getDatabaseConnectionPointImage().getSafeUri());
                databaseImage.setTitle(timeLineComponent.getLogicalId());
                String downOrUpOrBiDirectionalArrow = "up";
                buildTimeLineComponents(downOrUpOrBiDirectionalArrow,
                        databaseImage, id, logicalId);

            }

            else if (isBelow == true) {
                isAbove = true;
                isBelow = false;
                Image databaseImage = new Image();
                databaseImage.setUrl(resources
                        .getDatabaseConnectionPointImage().getSafeUri());
                databaseImage.setTitle(timeLineComponent.getLogicalId());

                String downOrUpOrBiDirectionalArrow = "down";
                buildTimeLineComponents(downOrUpOrBiDirectionalArrow,
                        databaseImage, id, logicalId);

            }

        } else if (icon.startsWith("infor.jms")) {

            if (isAbove == true) {
                isAbove = false;
                isBelow = true;
                Image jmsImage = new Image();
                jmsImage.setUrl(resources.getJmsQueueConnectionPointImage()
                        .getSafeUri());
                jmsImage.setTitle(timeLineComponent.getLogicalId());
                String downOrUpOrBiDirectionalArrow = "up";
                buildTimeLineComponents(downOrUpOrBiDirectionalArrow,
                        jmsImage, id, logicalId);
            }

            else if (isBelow == true) {
                isAbove = true;
                isBelow = false;
                Image jmsImage = new Image();
                jmsImage.setUrl(resources.getJmsQueueConnectionPointImage()
                        .getSafeUri());
                jmsImage.setTitle(timeLineComponent.getLogicalId());
                String downOrUpOrBiDirectionalArrow = "down";
                buildTimeLineComponents(downOrUpOrBiDirectionalArrow,
                        jmsImage, id, logicalId);
            }

        } else if (icon.startsWith("infor.ws")) {

            if (isAbove == true) {
                isAbove = false;
                isBelow = true;
                Image webServiceImage = new Image();
                webServiceImage.setUrl(resources
                        .getWebServiceConnectionPointImage().getSafeUri());
                webServiceImage.setTitle(timeLineComponent.getLogicalId());
                String downOrUpOrBiDirectionalArrow = "up";
                buildTimeLineComponents(downOrUpOrBiDirectionalArrow,
                        webServiceImage, id, logicalId);

            }

            else if (isBelow == true) {
                isAbove = true;
                isBelow = false;
                Image webServiceImage = new Image();
                webServiceImage.setUrl(resources
                        .getWebServiceConnectionPointImage().getSafeUri());
                webServiceImage.setTitle(timeLineComponent.getLogicalId());
                String downOrUpOrBiDirectionalArrow = "down";
                buildTimeLineComponents(downOrUpOrBiDirectionalArrow,
                        webServiceImage, id, logicalId);

            }

        } else if (icon.startsWith("infor.sap")) {

            if (isAbove == true) {
                isAbove = false;
                isBelow = true;
                Image sapImage = new Image();
                sapImage.setUrl(resources.getBusinessConnectionPointImage()
                        .getSafeUri());
                sapImage.setTitle(timeLineComponent.getLogicalId());
                String downOrUpOrBiDirectionalArrow = "up";
                buildTimeLineComponents(downOrUpOrBiDirectionalArrow,
                        sapImage, id, logicalId);

            }

            else if (isBelow == true) {
                isAbove = true;
                isBelow = false;
                Image sapImage = new Image();
                sapImage.setUrl(resources.getBusinessConnectionPointImage()
                        .getSafeUri());
                sapImage.setTitle(timeLineComponent.getLogicalId());
                String downOrUpOrBiDirectionalArrow = "down";
                buildTimeLineComponents(downOrUpOrBiDirectionalArrow,
                        sapImage, id, logicalId);

            }

        }

        else if (icon.startsWith("infor.bod")) {
            Image horizontalLine = new Image();
            horizontalLine.setUrl(resources.getHorizontalLineImage()
                    .getSafeUri());

            Image bodImage = new Image();
            bodImage.setUrl(resources.getBodImage().getSafeUri());
            addBodImageClickHandlers(bodImage,
                    searchEvent.getSelectedMessageId());
            bodImageXAxis = horizontalImageXAxis + 40;
            horizontalImageXAxis = horizontalImageXAxis + 20;
            bodImageYAxis = 65;
            absolutePanel.add(bodImage, bodImageXAxis, bodImageYAxis);
        }
    }

}

/** The method to build Time Line components */

public void buildTimeLineComponents(String downOrUpOrBiDirectionalArrow,
        Image connectionPointImage, int id, String logicalId) {

    Image horizontalLine = new Image();
    horizontalLine.setUrl(resources.getHorizontalLineImage().getSafeUri());
    Image arrow = new Image();
    if (downOrUpOrBiDirectionalArrow.equals("down")) {
        arrow.setUrl(resources.getDownArrowImage().getSafeUri());
        connectionPointImageYAxis = 95;
        arrowImageYAxis = 72;
    }

    if (downOrUpOrBiDirectionalArrow.equals("up")) {
        arrow.setUrl(resources.getUpArrowImage().getSafeUri());
        connectionPointImageYAxis = 10;
        arrowImageYAxis = 46;
    }
    addConnectionPointImageClickHandlers(connectionPointImage, id,
            logicalId);
    horizontalImageXAxis = horizontalImageXAxis + widthBetweenTImages;
    absolutePanel.add(horizontalLine, horizontalImageXAxis,
            horizontalImageYAxis);
    connectionPointImageXAxis = horizontalImageXAxis + 7;
    arrowImageXAxis = horizontalImageXAxis + 15;
    absolutePanel.add(connectionPointImage, connectionPointImageXAxis,
            connectionPointImageYAxis);
    absolutePanel.add(arrow, arrowImageXAxis, arrowImageYAxis);

} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T12:57:02.537

我在设置为兼容模式的 IE8 及更高版本中遇到了同样的问题。为了确保您的精灵在 IE 中正确呈现，请通过添加`<meta http-equiv="X-UA-Compatible" content="IE=8" />`到项目 html 的标题部分将其设置为 IE8 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:48:24.773

你这样做是错的。

在 IE 6-7（或 IE8+ 中的等效文档模式）中，`getSafeUri()`返回合成图像（又名精灵图像）的 URL，如 Javadoc 中所述：http: [//google-web-toolkit.googlecode.com/svn/javadoc /latest/com/google/gwt/resources/client/ImageResource.html#getSafeUri%28%29](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/resources/client/ImageResource.html#getSafeUri%28%29)

使用[`Image#setResource`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Image.html#setResource%28com.google.gwt.resources.client.ImageResource%29)而不是`Image#setUrl`.

# sqlite - 有效匹配索引 SQLite 字段的第一个字符

> ID：13966678
> 
> 赞同：2
> 
> 时间：2012-12-20T06:46:50.403
> 
> 标签：sqlite, optimization, indexing, full-text-search

我在 SQLite 中有两个表：

```
CREATE TABLE article (body TEXT)
CREATE TABLE article_word (
    word TEXT, 
    article_rowid INTEGER,
    FOREIGN KEY(article_rowid) REFERENCES article(rowid),
    PRIMARY KEY(word, article_rowid)
) 
```

该程序将长字符串存储在，`article.body`并且对于字符串中的每个单词，它将单词的小写版本与文章的`rowid`in一起存储`article_word`。

我想让用户通过单词中的第一个不区分大小写的字符来搜索`baz`文章，因此搜索会产生包含`foobar Bazquux spambacon`.

如何修改表/添加更多（如有必要）并以最佳方式查询它们的匹配项？做

`SELECT a.rowid, a.body FROM article a, article_word w WHERE w.word LIKE "baz%" AND a.rowid = w.article_rowid`

利用`PRIMARY KEY`索引`article_word.word`还是天真地搜索每一行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T08:44:43.757

使用 NSPredicate 根据您的要求检索特定的属性，您也可以像在核心数据中一样使用 Sqlite 进行映射。

# algorithm - Apriori算法-A->B和B->A应用规则的区别

> ID：13966683
> 
> 赞同：0
> 
> 时间：2012-12-20T06:47:24.220
> 
> 标签：algorithm, data-mining, apriori

A->B 和 B->A 应用规则有什么区别..

如果事务数据库是这样的，

T1 面包、果冻、黄油

T2 面包、黄油

T3 面包、黄油、牛奶

T4 啤酒、面包

T5 啤酒、牛奶

如何计算面包->黄油和黄油->面包..的支持度和置信度？

请帮帮我。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T16:39:11.887

![这张图片有开始使用的信息希望它有帮助](../Images/a82cd395a3cdf4bcce795d34264a1362.png)这将为您计算支持因子和置信度因子。您可以在[此处](http://www.statsoft.com/textbook/association-rules/)阅读更多相关信息。

# objective-c - 从情节提要加载后更改类类型是否危险？

> ID：13966688
> 
> 赞同：0
> 
> 时间：2012-12-20T06:47:39.290
> 
> 标签：objective-c, uiviewcontroller, interface-builder

假设我有一个`storyboard`场景，其中有一个`UIViewController`自定义类设置为`ParentViewController`. 我想创建一个`ChildViewController`几乎所有事情都一样`ParentViewController`但只自定义一些行为的东西。`ParentViewController`'s`init`从情节提要中加载场景。

我现在拥有的是`ChildViewController`子类化`ParentViewController`。当`ChildViewController`通过[super init]`init`调用时`ParentViewController`，`init`ParentViewController 会加载场景，这反过来使我的类成为 a `ParentViewController`，即使它是一个`ChildViewController`. 之后，ParentViewController 的方法被调用。

我可以通过使用策略模式来解决这个问题，根据需要提供自定义行为的视图控制器对象。但是我正在使用的代码也是 Class 类型的键，所以我真的需要 a`ChildViewController`保持 a `ChildViewController`，否则逻辑下线会做错事。

问题 1：在这种情况下，`object_setClass`将课程设置回原来的状态是否安全？

问题2：如果我这样做了，我就不再需要这个策略了吗？我假设一旦类被设置回来，正确的子类方法就会被调用。

我只是担心在框架首先为我更改类时更改类可能会破坏其他内容。

# ruby-on-rails - getJson 未知密钥，但正在发送

> ID：13966691
> 
> 赞同：1
> 
> 时间：2012-12-20T06:47:56.967
> 
> 标签：ruby-on-rails, jquery, coffeescript, ruby-on-rails-3.2

好的，这是另一个挫折练习。我终其一生都无法弄清楚出了什么问题。

控制器：

```
class MapController < ApplicationController
layout "map"

  def index
    if params.has_key? :grade
      @students = Student.find(:grade => params[:grade])
      @subjects = Subject.where(:grade => @students.map(&:grade))
    else
      @students = Student.all
      @subjects = Subject.all
    end

    @json = @students.to_gmaps4rails do |student, marker|
      marker.infowindow render_to_string(:partial => "/map/infowindow", :locals => {:student => student})
                                          marker.title "#{student.name}"
                                          marker.json({:address => student.full_address, :grade => student.grade, :subjects => student.subjects})
    end
    respond_to do |format|
      format.html
      format.xml {render :xml => @subjects.to_xml}
      format.json {render :json => @subjects.to_json}
    end
    end
end 
```

咖啡脚本：

```
jQuery ->
  $(".mapDataGrade").append "<option value=-1>-</option>"
  $(".mapDataGrade").append "<option value=#{i}>#{i}</option>",
  i for i in [8..12]

  $(".mapDataSubject").append "<option value=-1>-</option>"

  grade = "grade": "#{$('.mapDataGrade').val()}", tagmode: "any", format: "json"

  $.getJSON "map.json",
    grade,
      (data)->
        console.log(data)
        $('.mapDataSubject').find('option').remove().end()
        $(".mapDataSubject").append "<option value=-1>-</option>"
        $.each data.items, (i,item) ->
          $(".mapDataSubject").append "<option value=#{i}>#{i}</option>" 
```

现在第一部分工作得很好，它的 .getJson 不是。在第一个页面加载时，它返回一个内部服务器错误（500），这是可以理解的，因为返回的 id 为 -1，但这仍然不能解释为什么 console.log(data) 正在记录学生数据而不是主题。这我觉得非常令人费解。另外，为什么控制器看不到明显正在发送的关键“等级”？此外，是否有另一种方法（更好地阅读）来测试参数哈希中是否存在密钥？简而言之，这里有什么问题才能真正起作用？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:39:25.457

您的部分问题就在这里：

```
format.json {render :json => @subjects.to_json} 
```

当你说 时`obj.to_json`，你得到一个字符串，一个包含 JSON 表示的字符串，`obj`但仍然是一个字符串。因此，当被要求时`map.json`，服务器最终会这样做：

```
render :json => some_string_that_is_already_json 
```

您最终会将双编码数据发送回客户端。该`$.getJSON`调用需要一个 JSON 字符串——而不是 JSON 编码的 JSON 字符串——所以我不希望发生任何合理的事情。您`console.log(data)`将向您展示一些看起来像 JavaScript 对象但看起来可能具有欺骗性的东西：JSON 字符串看起来非常像控制台中的对象。

至于为什么你的控制器没有得到`:grade`，看看里面有什么`param`，它应该立即在你的日志中可用。

并且[`params.has_key?`是正确的方法](https://stackoverflow.com/q/5629402/479863)，看看是否`params`有密钥，替代方案有问题。

# java - 如何禁用 PrinterJob.pringDialog() 中的微调器？

> ID：13966694
> 
> 赞同：1
> 
> 时间：2012-12-20T06:48:09.853
> 
> 标签：java, printing

通过调用不带任何参数的 PrinterJob 的 printDialog() 方法，我得到了更改打印作业属性的对话框。在此对话框的右下角有一个字段，用户可以在其中更改要打印的份数。

现在我想禁用这个字段（微调器）。那只是要打印的一份副本，用户不能更改它。

有什么想法吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:08:06.453

我认为没有任何方法（或者我不知道）来修改本机或跨平台 Java 打印对话框（最后一个可能对您有所帮助）。您可以做的可能是显示您自己的对话框（没有微调框）并在引擎盖下做任何您想做的事情（例如`PrinterJob.setCopies(1)`）。

[我在这里](http://www.applettalk.com/custom-print-dialog-vt14358.html)找到了更多信息。

另外，请查看[PrinterJobs 上的 Java 教程](http://docs.oracle.com/javase/tutorial/2d/printing/dialog.html)。

# jquery - Jquery 与 $this 混淆

> ID：13966696
> 
> 赞同：2
> 
> 时间：2012-12-20T06:48:17.563
> 
> 标签：jquery, html

有没有一种方法可以只显示我悬停的框的按钮，而不使用 addclass() 属性并切换可见性。有没有办法做一些`$(this).('.list_remove').fadeIn("200");`正确的方法来解决这个问题？

[http://jsfiddle.net/HjFPR/7/](http://jsfiddle.net/HjFPR/7/)

## jQuery

```
 (function(){

       $('.list_remove').hide();

      $(".boxes").hover(
      function () {
        $('.list_remove').fadeIn("200");
      },
      function () {
         $('.list_remove').fadeOut("200");
      }
    );

    })();​ 
```

## HTML

```
<div class="boxes"> 
<input type="button" class="list_remove" value="remove"> </div>
<div class="boxes"> 
    <input type="button" class="list_remove" value="remove">
    </div>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:51:27.963

您可以指定要搜索的上下文，以便`$('.list_remove', this).fadeIn("200");`在`.list_remove``.boxes`

```
$(".boxes").hover(
      function () {
        $('.list_remove', this).fadeIn("200");
      },
      function () {
         $('.list_remove', this).fadeOut("200");
      }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T06:51:53.713

您可以通过为 jQuery 指定上下文以在其中找到`list-remove`按钮来做到这一点。

```
$('.list_remove', this).fadeIn("200");
$('.list_remove', this).fadeOut("200"); 
```

[更新小提琴](http://jsfiddle.net/HjFPR/8/)

# javascript - 如何为 IE 定义不同的填充值？

> ID：13966697
> 
> 赞同：0
> 
> 时间：2012-12-20T06:48:34.690
> 
> 标签：javascript, html, css, cross-browser

我需要在 Internet Explorer 中分配不同的填充值，因为当我声明 a 的高度时，`<div>`它会将其计算为高度 + 填充（它在 Firefox 和 Chrome 中都可以正常工作）。

这是我的CSS：

```
#payment{
    width: 265px;
    border: 1px solid #cecece;
    border-radius: 8px;
    -webkit-box-shadow: 0 2px 7px rgba(50,50,50,0.46);
    -moz-box-shadow: 0 2px 7px rgba(50,50,50,0.46);
    box-shadow: 0 2px 7px rgba(50,50,50,0.46);
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
    /*display: block;*/
    position: absolute;
    /*float: right;*/
    height: 230px;
    padding: 10px;
    left: 549px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:51:22.960

您可以将 IE 条件添加到 html 元素并将类分配给特定的 IE 版本。

```
<!--[if lt IE 7]>      <html lang="en-us" class="lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en-us" class="lt-ie9 lt-ie8 ie7"> <![endif]-->
<!--[if IE 8]>         <html lang="en-us" class="lt-ie9 ie8"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en-us"> <!--<![endif]--> 
```

然后你可以在你的选择器前面加上 IE 类。

```
.lt-ie8 #payment { /* IE7 & below */
    padding: 5px;
} 
```

或者

```
.ie7 #payment { /* IE7 only */
    padding: 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:40:47.880

你应该这样使用：

```
#payment{
    padding: 10px; /* standard */
    padding: 17px\9; /* IE 8 and below */
    *padding: 15px\9; /* IE 7 and below */
    _padding: 16px\9; /* IE 6 */
} 
```

[参考链接 1](http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer)

[参考链接 2](https://stackoverflow.com/questions/3890740/are-there-any-ie9-css-hacks)

# mathematical-optimization - 隐马尔可夫模型初始猜测

> ID：13966699
> 
> 赞同：1
> 
> 时间：2012-12-20T06:48:42.113
> 
> 标签：mathematical-optimization, hidden-markov-models

我正在对大型英文文本（布朗语料库的前 50,000 个字符，仅包括字母和空格）训练 2 状态 HMM，我的算法遵循 Mark Stamp 的教程（www.cs.sjsu.edu/~stamp/RUA/ HMM.pdf）。

由于观察只包括 26 个字母和空格，最初我给每个观察（在一个状态内）的概率为 1/27，然后在保持行随机的同时将每个观察修改 0.0001。

将训练器运行 50 次迭代可以让我在 log[P(O|lambda)] 中获得非常微小的增量改进，其中 lambda 是更新后的模型。此外，在最终模型的观察矩阵中，每个观察的概率在两种状态下几乎相同（参见[http://pastebin.com/xVVYNhGs](http://pastebin.com/xVVYNhGs)）。

我想我被困在一个局部最大值上，所以我改变了观察矩阵的初始猜测以匹配 Stamp 的，它实际上给了我一个更新的观察矩阵，在相同的迭代次数内因状态*而不同。（50 次迭代： http: [//pastebin.com/U0AgrJ2N](http://pastebin.com/U0AgrJ2N)；100 次迭代： http: [//pastebin.com/yAkruNjs](http://pastebin.com/yAkruNjs)）

我的问题是，我改变的初始观察矩阵（发射概率）显然使我脱离了可悲的局部最大值；但是我将如何去寻找/优化这个最初的猜测？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T13:18:57.357

Rabiner的 HMM 教程[论文第 VC 节第 273 页给出了对此的答案：](http://www.cs.ubc.ca/%7Emurphyk/Bayes/rabiner.pdf)

> 基本上，上述问题没有简单或直接的答案。相反，经验表明，在几乎所有情况下，对先验概率和转移矩阵的随机（受随机和非零值约束）或统一初始估计都足以对这些参数进行有用的重新估计。
> 
> 然而，对于发射矩阵，经验表明良好的初始估计在离散符号情况下是有帮助的，并且在连续分布情况下是必不可少的（在处理多种混合物时）。**
> 
> **这种初始估计可以通过多种方式获得**，包括：
> 
> **1）**将观察序列手动分割成状态，并在状态内进行平均观察，
> 
> **2)**用平均法对观测值进行最大似然分割，
> 
> **3)**带聚类的分段 k 均值分割，
> 
> 等等

# javascript - jQuery获取生成的隐藏输入的值

> ID：13966709
> 
> 赞同：0
> 
> 时间：2012-12-20T06:49:56.703
> 
> 标签：javascript, jquery, input

我无法弄清楚如何获得之前附加的隐藏输入的值。我的意思是我有这样的东西：

```
$(document).ready(function () {
    $(".form").append('<input type="hidden" id="inputhidden1" value="myvalue"> ');
    $(".form").submit(function () {
        console.debug($("#inputhidden1").val())
    });
}); 
```

以下代码在提交表单时会将我的值调试为未定义。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:56:27.943

你的脚本有语法错误，试试这个

```
$(document).ready(function(){// missing function
     $(".form").append("<input type='hidden' id='inputhidden1' value='myvalue'>");//missing closing tag, quotes error
     $(".form").submit(function()
        {
            console.debug($("#inputhidden1").val())
        });
});​ 
```

工作[演示](http://jsfiddle.net/fsNZt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:07:45.873

您的代码中有错误，您没有正确使用 document.ready 并且您在双引号内使用双引号。您的表单是否有一个名为“form”的类？

给你的表格一个id，假设你给了

```
<form id="formid" action="#">
       <input type="submit" value="Click Me"/>
</form> 
```

现在在脚本中尝试这段代码：

```
<script type="text/javascript">

    $(document).ready(function(){
          $("#formid").append("<input type='hidden' id='inputhidden1' value='myvalue'/>");
          $("#formid").submit(function(){
              console.debug($("#inputhidden1").val());
          });
    });
</script> 
```

它在firebug的调试控制台上打印value = myvalue ..

# cobol - 按长度连接字符串 COBOL

> ID：13966716
> 
> 赞同：5
> 
> 时间：2012-12-20T06:50:18.370
> 
> 标签：cobol

需要将 4 个字符串连接到 cobol 中的目标变量。

像，

```
01 WS-S1 X(10) VALUE "HI ".
01 WS-S2 X(10) VALUE "HOW ".
01 WS-S3 X(10) VALUE "ARE ".
01 WS-S4 X(10) VALUE "YOU?". 
```

到一个结果字符串

```
"HI HOW ARE YOU?" 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-20T14:37:30.797

这是[STRING 动词](http://publibfp.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/IGY3LR31/6.2.37?DT=20060329140556)的一个工作示例，可以满足您的要求：

```
 IDENTIFICATION DIVISION.
   PROGRAM-ID. EXAMPLE.
   DATA DIVISION.
   WORKING-STORAGE SECTION.
   01    WS-S1 PIC X(10) VALUE 'HI '.
   01    WS-S2 PIC X(10) VALUE 'HOW '.
   01    WS-S3 PIC X(10) VALUE 'ARE '.
   01    WS-S4 PIC X(10) VALUE 'YOU?'.
   01    WS-CONCAT PIC X(43) VALUE SPACES.
   PROCEDURE DIVISION.
   MAIN-PARAGRAPH.
        STRING WS-S1 DELIMITED BY SPACE
               ' '   DELIMITED BY SIZE
               WS-S2 DELIMITED BY SPACE
               ' '   DELIMITED BY SIZE
               WS-S3 DELIMITED BY SPACE
               ' '   DELIMITED BY SIZE
               WS-S4 DELIMITED BY SPACE
          INTO WS-CONCAT
        END-STRING
        DISPLAY '>' WS-CONCAT '<'
        GOBACK
        . 
```

输出是：

```
>HI HOW ARE YOU?                            < 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T20:41:21.207

OpenCOBOL 有一个内在的 FUNCTION 扩展，CONCATENATE。

```
DISPLAY FUNCTION CONCATENATE(
    FUNCTION TRIM(WS-S1); SPACE;
    FUNCTION TRIM(WS-S2); SPACE;
    FUNCTION TRIM(WS-S3); SPACE;
    FUNCTION TRIM(WS-S4))
END-DISPLAY 
```

但我喜欢 STRING 动词 DELIMITED BY answer，因为它适用于大多数（如果不是全部）编译器。

*至于在 FUNCTION 参数列表中使用分号分隔符的原因，这不是绝对必要的，个人喜好，因为它有时会避免潜在的问题*

```
SPECIAL-NAMES.
DECIMAL POINT IS COMMA. 
```

和 COBOL，它是强大的词汇动物

```
DISPLAY FUNCTION CONCATENATE(WS-S1 WS-S2 WS-S3 WS-S4)
DISPLAY FUNCTION CONCATENATE(WS-S1, WS-S2, WS-S3, WS-S4) 
```

语法也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T18:18:51.633

“以空格分隔”存在问题。如果 ws-s1 = 'how are' - 用空格分隔将只放置 'how'。这里有些例子：

```
01  ws-string-test.
03 y1                pic x(10) value 'y1 a'.
03 y2                pic x(10) value 'y2 b'.
03 y3                pic x(10) value 'y3 c'. 
```

01 ws-工作图片 x(200)。

```
 move spaces   to ws-work 
       string y1 delimited by size
              y2 delimited by space
              y3 delimited by size
              into ws-work.
       ws-work = "y1 a      y2y3 c                "

       move spaces   to ws-work 
       string y1  
              y2  
              y3
              delimited by size into ws-work
        ws-work = "y1 a      y2 b           y3 c          "

       string y1  
              y2  
              y3
              delimited by spaces into ws-work. 
        ws-work = "y1y2y3   

       string  y1 y2 y3 into ws-work by csv-format. 
       ws-work = "y1 a,y2 b,y3 c      " 
```

希望它会有所帮助。

扎莱克

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-15T00:34:41.120

试一试。应该是平台无关的。

```
 DATA DIVISION.

   WORKING-STORAGE SECTION.

   01  result-string-text           X(100).
   01  result-string-length         9(03).
   01  result-string-datalength     9(03).

   01  new-string-text              X(20).
   01  new-string-length            9(03).
   01  new-string-datalength        9(03).

   01  hold-string-text             X(100).

   01  trailing-space-count         9(03).

   PROCEDURE DIVISION.

       MOVE SPACES TO result-string-text.
       MOVE FUNCTION LENGTH(result-string-text) TO result-string-length.
       MOVE FUNCTION LENGTH(new-string-text) TO new-string-length.

       MOVE ws-s1 TO new-string-text.
       PERFORM 5500-concatenate.

       MOVE ws-s2 TO new-string-text.
       PERFORM 5500-concatenate.

       MOVE ws-s3 TO new-string-text.
       PERFORM 5500-concatenate.

       MOVE ws-s4 TO new-string-text.
       PERFORM 5500-concatenate.

   5500-concatenate.
       MOVE ZERO TO trailing-space-count
       INSPECT FUNCTION REVERSE(result-string-text) TALLYING trailing-space-count FOR LEADING ' '
       COMPUTE result-string-datalength = result-string-length - trailing-space-count

       IF (result-string-datalength > ZERO)
           MOVE ZERO TO trailing-space-count
           INSPECT FUNCTION REVERSE(new-string-text) TALLYING trailing-space-count FOR LEADING ' '
           COMPUTE new-string-datalength = new-string-length - trailing-space-count

           MOVE SPACES TO hold-string-text
           STRING
               result-string-text(1:result-string-datalength)
               ' '
               new-string-text(1:new-string-datalength)
                   DELIMITED BY SIZE
           INTO
               hold-string-text
           END-STRING

           MOVE hold-string-text to result-string-text
       ELSE
           MOVE new-string-text TO result-string-text
       END-IF. 
```

# algorithm - 键盘上所有可能的数字

> ID：13966717
> 
> 赞同：1
> 
> 时间：2012-12-20T06:50:31.020
> 
> 标签：algorithm, graph

我正在尝试解决这个问题：

```
1  2  3
4  5  6
7  8  9
*  0  # 
```

给定一个起始号码，找出所有可能的 6 位号码，号码只能横拨或竖拨。不允许重复。数字不能从零开始，并且不包括 * 和 #。例如，如果最后拨打的号码是 3，则下一个号码可能是 1、2、6 或 9。

我正在尝试通过创建一个图表来实现这一点，其中一个数字只有在同一行和同一列中的相邻数字，然后从起始数字中找到长度为 5 的所有可能路径。但我还不知道有什么算法可以做到这一点..

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:05:25.170

假设数字存储在二维数组`NUMPAD`中，其中“1”在索引 [0][0] 处，“2”在索引 [0][1] 处，等等。

```
Func permute_nums(digits_so_far)
    If digits_so_far has 6 elements
        print digits_so_far
        return
    Let L = last element of digits_so_far
    Find index (x,y) of L in NUMPAD
    For i from -2 to +2
        if (x+i,y) is NOT out of bounds
            Find number n at (x+i,y)
            permute_nums(digits_so_far + [n])
        if (x,y+i) is NOT out of bounds
            Find number m at (x,y+i)
            permute_nums(digits_so_far + [m]) 
```

给定起始数字`s`，做`permute_nums([s])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:06:03.147

我认为你在正确的道路上。只需遍历树（标记每个访问过的节点，以避免重复），并输出长度为 5 的每条路径。

您在这里并不需要任何新东西，即使是限制为深度 5的基本[广度优先搜索也可以。](http://en.wikipedia.org/wiki/Graph_traversal#Breadth-first_search)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:46:56.743

嗯。那应该很容易。

```
static var a:Array=[[8],[2,4],[1,3,5],[2,6],[1,5,7],[2,4,6,8],[3,5,9],[4,8],[5,7,9,0],[6,8]];
function giveAllnumbers(numbersSoFar:String,lastSelectedNumber:int,:int) {
    if (howManyToSelectLeft==0) {
        trace(numbersSoFar); // output goes here
        return;
    }
    for (var i:int=a[lastSelectedNumber].length-1;i>=0;i--) 
        giveAllNumbers(numbersSoFar+a[lastSelectedNumber][i].toString(),
            a[lastSelectedNumber][i],
            howManyToSelectLeft-1);
} 
```

这是 Actionscript，但可以适应任何其他语言。调用`giveAllNumbers(''+yourNumber.toString(),yourNumber,desiredLength);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T19:04:49.500

这个问题可以递归解决，返回点在length == 6时。

```
private static void countMaxNumbers(String i) {
    if(i.length() == 6)
    {
        numberCount++;
        return;
    }
    if(i.charAt(i.length() - 1) == '1'){
        countMaxNumbers(i+'2');
        countMaxNumbers(i+'3');
        countMaxNumbers(i+'4');
        countMaxNumbers(i+'7');
    }
    else if(i.charAt(i.length() - 1) == '2'){
        countMaxNumbers(i+'5');
        countMaxNumbers(i+'8');
        countMaxNumbers(i+'0');
        countMaxNumbers(i+'1');
        countMaxNumbers(i+'3');
    }
    else if(i.charAt(i.length() - 1) == '3'){
        countMaxNumbers(i+'1');
        countMaxNumbers(i+'2');
        countMaxNumbers(i+'6');
        countMaxNumbers(i+'9');
    }
    else if(i.charAt(i.length() - 1) == '4'){
        countMaxNumbers(i+'1');
        countMaxNumbers(i+'7');
        countMaxNumbers(i+'5');
        countMaxNumbers(i+'6');
    }
    else if(i.charAt(i.length() - 1) == '5'){
        countMaxNumbers(i+'2');
        countMaxNumbers(i+'8');
        countMaxNumbers(i+'0');
        countMaxNumbers(i+'4');
        countMaxNumbers(i+'6');
    }
    else if(i.charAt(i.length() - 1) == '6'){
        countMaxNumbers(i+'3');
        countMaxNumbers(i+'9');
        countMaxNumbers(i+'4');
        countMaxNumbers(i+'5');

    }
    else if(i.charAt(i.length() - 1) == '7'){
        countMaxNumbers(i+'1');
        countMaxNumbers(i+'4');
        countMaxNumbers(i+'8');
        countMaxNumbers(i+'9');

    }else if(i.charAt(i.length() - 1) == '8'){
        countMaxNumbers(i+'7');
        countMaxNumbers(i+'9');
        countMaxNumbers(i+'2');
        countMaxNumbers(i+'5');
        countMaxNumbers(i+'0');
    }else if(i.charAt(i.length() - 1) == '9'){
        countMaxNumbers(i+'3');
        countMaxNumbers(i+'6');
        countMaxNumbers(i+'7');
        countMaxNumbers(i+'8');
    }else if(i.charAt(i.length() - 1) == '0'){
        countMaxNumbers(i+'2');
        countMaxNumbers(i+'8');
        countMaxNumbers(i+'5');
    }
} 
```

答案应该是：12855

# php - php array_filter 函数未找到或函数名称无效，无论我输入什么

> ID：13966718
> 
> 赞同：7
> 
> 时间：2012-12-20T06:40:29.100
> 
> 标签：php, arrays

我以前从未使用过 array_filter 函数，所以不管我使用什么作为函数名，它都会给我一个错误

```
Warning: array_filter() expects parameter 2 to be a valid callback, function 'odd' not found or invalid function name in 
```

我什至采取了直接从 php 手册页复制粘贴示例的步骤，它给了我同样的错误。代码：

```
function odd($var) {
    // returns whether the input integer is odd
    return($var & 1);
 }

function calculate($res, $period, $elements, $per, $total, $brand = false) {

    $array1 = array("a"=>1, "b"=>2, "c"=>3, "d"=>4, "e"=>5);
    $array2 = array(6, 7, 8, 9, 10, 11, 12);

    echo "Odd :\n";
    print_r(array_filter($array1, "odd"));
} 
```

我真的不知道该去哪里。通常，当我遇到问题时，我可以从 php 手册页中复制并粘贴代码，然后从那里返回，但如果他们的示例甚至不起作用，那就很难了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-10T14:02:59.683

我认为在你的情况下，函数奇数不是一个独立的函数，而是你的类的方法。在这种情况下，你应该写

```
print_r(array_filter($array1, array($this,"odd"))); 
```

从你的班级运行奇怪的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-23T07:28:28.803

如果您的类是相同的并且您以递归方式调用方法，那么 PHP 不知道该方法是否属于每个类，这就是 `$this`在数组中使用的原因：

```
array_filter($array1, array($this,"recursive"))

    public function customArrayFilter($logDate, $uid, $date)
    {
        $logDates = array($logDate);
        $result = array_filter($logDates, array($this, "recursive"));
        var_dump($result);
    }

    public function recursive($data)
    {
        return $data;
    }

   $this->customArrayFilter($data, 1, '2019-02-23'); 
```

# iphone - 检查webservice响应数据是否已经插入iphone中的sqlite的条件？

> ID：13966721
> 
> 赞同：0
> 
> 时间：2012-12-20T06:50:50.070
> 
> 标签：iphone, objective-c, ios

我*已经插入*了我的第一个数据。*我的问题*是当我去插入下一个数据时，循环从第一个数据开始计数并以最后一个数据结束

```
-(void)GetAllSplitDataHandler:(id)value { 
 int j; 
 // NSError error; 
 if([value isKindOfClass:[NSError class]])
 { 
     NSLog(@"%@", value); return; 
  } 
 // Handle faults 
 if([value isKindOfClass:[SoapFault class]]) 
 { 
  NSLog(@"%@", value); 
  return; 
 } 
 NSMutableArray result = (NSMutableArray*)value; 
 NSLog(@"GetAllAtheleteHandler returned the value: %@", result ); 
 if([[NSString stringWithFormat:@"%@",result] isEqualToString:@"1"]){ 

 NSLog(@"Result Count :: %d",[result count]); 
     for (int i =0; i<[result count]; i++) {

NSMutableDictionary *dic=[[NSMutableDictionary alloc]init];

    [dic setValue:[[result objectAtIndex:0] valueForKey:@"entity1"] forKey:@"entity1"];
    [dic setValue:[[result objectAtIndex:0] valueForKey:@"entity2"] forKey:@"entity2"];

    DAL *objDAL=[[DAL alloc]initDatabase:@"Abc.sqlite"];
    j = [objDAL insertRecord1:dic inTable:@"Abc"];

    if (j == 0) {
        NSLog(@"Inserted Successfully");

    }
    else if(j == -1)
    {
        NSLog(@"Insertion Failed");
       // NSAssert1(0, @"Insertion Failure '%@'.", [error localizedDescription]);
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:16:10.010

您可以使用其中一个数据值作为数据库中的唯一键约束。如果该键将被复制，那么它将不会在数据库中插入该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:01:34.477

您可以保存`NSUserDefaults`上次插入的 id (in ) 数据，当您下次调用 web 服务时，您只需将数据从之前保存的 id 旁边的 id 插入。

# c# - 需要将用户从 .aspx 页面重定向到 MVC 路由 url

> ID：13966722
> 
> 赞同：0
> 
> 时间：2012-12-20T06:50:50.007
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

在我工作时`Asp.Net MVC mixed mode authentication`，我需要`redirect`一个用户在从 NTLM windows auth 获得身份验证后`WinLogin.aspx page`。`MVC route url`

（我在同一个 Asp.Net MVC 项目应用程序中有 WinLogin.aspx 页面）

**我只需要有关如何将用户从 .aspx 页面重定向到 MVC 路由 url 的帮助。**（通过`.aspx.cs`后面的代码）

我尝试使用下面的代码，但没有任何效果。

**代码 1：**

```
Response.Redirect("/Home/Index");  // redirection NOT working, getting blank page with route url after redirection. 
```

**代码 2：**

```
System.Web.Routing.RouteValueDictionary routeDict = new System.Web.Routing.RouteValueDictionary();
routeDict.Add("controller", "home");
routeDict.Add("action", "index");
Response.RedirectToRoute(routeDict); // redirection NOT working, , getting blank page with route url after redirection. 
```

您能否就此向我提出您的建议？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:17:18.907

好吧，这是我的评论作为答案（哇，我是代表妓女）：

重定向到站点根目录的工作方式如下：

```
Response.Redirect("/"); 
```

为什么？也许你的路线坏了。如果您的路线是我所期望的默认路线，/Home/Index 应该可以工作。但是，如果您的默认控制器不是 Home 并且您的默认操作不是 Index，那么它将无法工作......而站点根目录会（因为 MVC 的默认设置只是接管）。

# c# - 笔式驱动器的序列号是唯一且通用的吗？

> ID：13966723
> 
> 赞同：0
> 
> 时间：2012-12-20T06:51:04.560
> 
> 标签：c#, .net, windows, pen

在我的应用程序中，我需要授予给定的笔式驱动器以允许访问或不访问的权限。我在这里使用笔式驱动器的序列号给予许可我想知道所有笔式驱动器是否都有序列号，如果它们有，那么序列号是否唯一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:27:20.513

即使它是独一无二的（它不是），你也不应该基于容易被欺骗的东西给予许可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:57:06.553

根据此[链接](http://digfor.blogspot.sg/2012/04/usb-flash-drive-serial-numbers-unique.html)，它不是。你可以浏览博文！

# ms-access - 访问子表单和引用

> ID：13966724
> 
> 赞同：-1
> 
> 时间：2012-12-20T06:51:08.103
> 
> 标签：ms-access, vba

为什么这段代码没有运行。我想为带有 number 的药物返回a`Mininimum (MIN_STOCK)`和`Maximum (Stock MAX_STOCK1)`a 。`>quantity``QTY_IHND1``(COMM_NUM)`

```
If DCount(QTY_IHND1, "Stores_Table") = 0 Then
    QTY_IHND1 = 0

ElseIf DCount(QTY_IHND1, "Stores_Table") > 1 Then
     QTY_IHND1 = DLast("QTY_IHND1", "Stores_Table", "COMM_NUM = [COMM_NUM]") _
          + ((SubStoresTable.Form!QTY_RECVD) - (SubStoresTable.Form!QTY_ISSUE))
Else
     QTY_IHND1 = 0
End If

Forms!Pharmacytally.Controls("QTY_IHND1").Value = QTY_IHND1
MAX_STOCK1 = DMin("QTY_IHND1", "Stores_Table", "COMM_NUM" = [COMM_NUM])
Forms!Pharmacytally.Controls("MAX_STOCK1").Value = MAX_STOCK1
MIN_STOCK1 = DMin("QTY_IHND1", "Stores_Table", "COMM_NUM" = [COMM_NUM])
Forms!Pharmacytally.Controls("MIN_STOCK1").Value = MIN_STOCK1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:54:08.083

我不知道您标题中的子表单部分在哪里出现了您的问题。[这里](http://access.mvps.org/access/forms/frm0031.htm)有一篇来自 MVP 站点的文章。

你在错误的地方有平等。

```
 MAX_STOCK1 = DMin("QTY_IHND1", "Stores_Table", "COMM_NUM =" & [COMM_NUM]) 
```

COMM_NUM 必须是数字，否则需要引号。

整个代码部分不好，可能需要返工。例如：

```
DCount(QTY_IHND1, "Stores_Table") 
```

这似乎是对 stores 表是否完全为空的一个相当奇怪的检查，而且 QTY_IHND1 没有被引用。

```
DLast("QTY_IHND1", "Stores_Table", "COMM_NUM = [COMM_NUM]" 
```

Comm_Num 始终等于自身。

此外，你有这么多的查找，你会更好的记录集。

然后是整个最后一件事。Last 是一种非常糟糕的获取值的方法，除了在单用户系统中，即使那样你也应该考虑它可能不会保持单用户。

无需引用控件属性即可获取控件：

```
Forms!Pharmacytally.Controls("QTY_IHND1") 
```

控件成为表单的属性：

```
Forms!Pharmacytally.QTY_IHND1 
```

或者

```
Forms!Pharmacytally!QTY_IHND1 
```

或者，如果代码在 Pharmacytally 表单上运行，

```
Me.QTY_IHND1 
```

这将使您能够利用智能感知。

编辑重新评论

从主窗体和名为 MySubformControl 的子窗体控件工作

```
 MyQty = Me.MySubformControl.Form.QTY_RECVD 
```

重要的是要注意 MySubformControl 是子表单控件的名称，而不是包含的表单。

# google-sheets - 如何扩展电子表格公式，使一个数字随行增加，而另一个数字是静态的？

> ID：13966725
> 
> 赞同：0
> 
> 时间：2012-12-20T06:51:09.880
> 
> 标签：google-sheets

这是一个基本的电子表格问题，因此感谢您的耐心等待。

假设我有一列数据。在该列中每个单元格的右侧，我想显示该列中的值减去另一个单元格中的值——假设列是 B2:B5，静态单元格是 A1。如果我输入

```
=(B2-A1) 
```

当然，我得到了正确的输出。但是，如果我将此公式拖到列的其余部分，则所需的输出是

```
=(B3-A1)
=(B4-A1)
=(B5-A1) 
```

但实际输出是

```
=(B3-A2)
=(B4-A3)
=(B5-A4) 
```

相信谷歌近乎有知觉的力量的力量，我想如果我只是从帮助它开始

```
=(B2-A1)
=(B3-A1)
=(B4-A1) 
```

然后它会识别模式并停止增加第二个单元格。可悲的是，同样的结果也发生了。

我想我可以为此编写一个 Google-Apps-Script 公式，或者在 Excel 中编写一个宏，但我想知道 - 有没有更简单的技巧？我可以教它扩展哪些字母以及不理会哪些字母吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:52:43.270

试试$A$1，而不是A1。$ 符号锁定行或列，在这种情况下，两者都锁定。

# javascript - 子元素点击事件触发父点击事件

> ID：13966734
> 
> 赞同：83
> 
> 时间：2012-12-20T06:51:51.517
> 
> 标签：javascript, jquery, dhtml

假设你有一些这样的代码：

```
<html>
  <head>
  </head>
  <body>
     <div id="parentDiv" onclick="alert('parentDiv');">
         <div id="childDiv" onclick="alert('childDiv');">
         </div>   
      </div>
  </body>
</html>
```

我不想在点击时触发`parentDiv`点击事件，我该`childDiv`怎么做？

**更新**

另外，这两个事件的执行顺序是什么？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-12-20T06:52:54.900

您需要使用[event.stopPropagation()](http://api.jquery.com/event.stopPropagation/)

**[现场演示](http://jsfiddle.net/G4XM4/1/)**

```
$('#childDiv').click(function(event){
    event.stopPropagation();
    alert(event.target.id);
});​ 
```

[event.stopPropagation()](http://api.jquery.com/event.stopPropagation/)

> 描述：防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-20T06:55:27.630

没有 jQuery：**[演示](http://jsbin.com/emason/1/)**

```
 <div id="parentDiv" onclick="alert('parentDiv');">
   <div id="childDiv" onclick="alert('childDiv');event.cancelBubble=true;">
     AAA
   </div>   
</div> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-11-23T12:35:08.043

我遇到了同样的问题并通过这种方法解决了。html：

```
<div id="parentDiv">
   <div id="childDiv">
     AAA
   </div>
    BBBB
</div> 
```

JS：

```
$(document).ready(function(){
 $("#parentDiv").click(function(e){
   if(e.target.id=="childDiv"){
     childEvent();
   } else {
     parentEvent();
   }
 });
});

function childEvent(){
    alert("child event");
}

function parentEvent(){
    alert("paren event");
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-20T06:56:53.543

该`stopPropagation()`方法停止将事件冒泡到父元素，防止任何父处理程序收到事件通知。

您可以使用该方法`event.isPropagationStopped()`来了解是否曾经调用过此方法（在该事件对象上）。

**句法：**

以下是使用此方法的简单语法：

```
event.stopPropagation() 
```

**例子：**

```
$("div").click(function(event) {
    alert("This is : " + $(this).prop('id'));

    // Comment the following to see the difference
    event.stopPropagation();
});​ 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-20T07:00:26.410

**点击事件 Bubbles**，现在是什么意思的冒泡，[这里](https://stackoverflow.com/questions/4616694/what-is-event-bubbling-and-capturing)是一个很好的开始点。`event.stopPropagation()`如果您不希望该事件进一步传播，您可以使用。

[也是MDN](https://developer.mozilla.org/en-US/docs/DOM_Client_Object_Cross-Reference/DOM_Events)上的一个很好的参考链接

# asp.net - RegisterClientScriptBlock CDATA 内联声明

> ID：13966736
> 
> 赞同：0
> 
> 时间：2012-12-20T06:51:59.960
> 
> 标签：asp.net, linq, server-side-includes, registerclientscriptblock

当从 aspx 页面迁移到 ascx 控件时，我将大量标题包含移动到代码隐藏中，我一直将它们包装在 RegisterClientScriptBlocks 中并使用 linq 来保持大型多行整洁。

但是已经注意到内联声明`<%serverside.code%>`现在没有被执行。

```
ClientScript.RegisterClientScriptBlock(GetType(Page), "test", <a><![CDATA[
        <script type="text/javascript">
            testValue = '<%=Page.Title%>';
        </script>]]></a>, True) 
```

生产；

```
<script type="text/javascript">
  testValue = '<%=Page.Title%>';
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:14:24.810

为了解决这个问题，我用 .Value 结束了 cdata 块并附加了 code 变量，然后用多行语句的其余部分开始了一个新的 cdata 块

```
ClientScript.RegisterClientScriptBlock(GetType(Page), "test", <![CDATA[
    <script type="text/javascript">
        testValue = ']]>.Value + Page.Title + <![CDATA[';
        //more code
    </script>
  ]]>.Value, True) 
```

# sql - 获取行数的 SQL 查询

> ID：13966737
> 
> 赞同：1
> 
> 时间：2012-12-20T06:52:02.473
> 
> 标签：sql, oracle

我有一个包含 3 列*sID*、*sUID*、*parentSUID*的表，其中包含如下数据：

```
 *sID*  |  *sUID*  |   *parentSUID*
----------------------------------
  sID1  |   sUID1  |     null
  sID1  |   sUID2  |     null
  sID1  |   sUID3  |    psUID2
  sID1  |   sUID4  |    psUID2
  sID2  |   sUID5  |     null
  sID2  |   sUID6  |    psUID5 
```

我想获取所有没有父母的 sUID 和每个孩子的数量，结果应该是这样的。

```
 *sID*  |  *sUID*  |    *count*
----------------------------------
  sID1  |   sUID1  |     0
  sID1  |   sUID2  |     2
  sID2  |   sUID5  |     1 
```

我写了一个查询，但它给了我没有计数列的结果，我不知道如何管理它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:01:39.380

```
SELECT p.sID, p.sUID, count(c.sUID)
FROM a189 p left outer join a189 c on 'p' + p.sUID =  c.ParentSUID
where p.ParentSUID is null
group by p.sID, p.sUID 
```

除了使用 group by，子查询是另一种选择。

```
SELECT p.sID, p.sUID, (select count(1) FROM a189 c where 'p' + p.sUID = c.ParentSUID)
FROM a189 p
where p.ParentSUID is null 
```

结果：

```
sID     sUID    Count
sID1    sUID1   0
sID1    sUID2   2
sID2    sUID5   1 
```

# iphone - 如何在 UIWebView 中下载 .epub 文件？

> ID：13966739
> 
> 赞同：2
> 
> 时间：2012-12-20T06:52:14.720
> 
> 标签：iphone, objective-c, uiwebview

嗨，我是 iPhone 开发的新手。我正在尝试从 .epub 文件的 webview 中的链接加载内容，但是 webview 无法加载请求的页面。我不知道是什么问题。

任何机构都可以提出解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:16:50.280

只需使用 `[[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"your url"];'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:57:33.287

epub 只是存储在 zipfile XML 中的 XHTML。获取一个 zip 库，您可以使用 a`UIWebView`来显示实际内容。

从此链接获取 iPhone SDK 的 zip 库 .. [ziparchive](http://code.google.com/p/ziparchive/)

这个 ZipArchive 是一个用于压缩或解压缩 zip 文件的 Objective-C 类，它基于开源代码“MiniZip”。

它可用于 iPhone 应用程序开发，也可用于 Mac OSX 上的可可。

我希望这对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:54:21.983

`EPUB`只是`XHTML`存储在`zipfile`一个`XML`清单中。获取一个`zip`库，您`unzip`可以使用它`WebView`来显示实际内容。

# java - 将资源/流转换为文件

> ID：13966742
> 
> 赞同：3
> 
> 时间：2012-12-20T06:52:27.600
> 
> 标签：java

我怎样才能做到这一点？

```
File myFile = getFile(this.getClass.getResourceAsStream("test.txt")) 
```

或者

```
File myFile = getFile(this.getClass.getResource("test.txt")) 
```

我将在`getFile()`方法中编写什么代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:04:19.903

这是功能：

```
public File getFile(FileInputStream inStream){

File file =new File("file.txt");
OutputStream outStream = null;
outStream = new FileOutputStream(file);

byte[] buffer = new byte[1024];

            int length;
            //copy the file content in bytes 
            while ((length = inStream.read(buffer)) > 0){

                outStream.write(buffer, 0, length);

            }

            outStream.close();

return file;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T06:59:49.867

哟可以这样做

```
 File f = new File(this.getClass().getResource("test.txt").toURI());
    System.out.println(f); 
```

输出（我的 Eclipse 测试）

```
D:\workspace1\x\target\classes\text.txt 
```

但它并不总是有效。如果你的资源在罐子里怎么办？你会得到

```
 java.lang.IllegalArgumentException: URI is not hierarchical 
```

# jasper-reports - 如何在 iReport 4.7 中合并 2 个不同数据源的数据集

> ID：13966750
> 
> 赞同：0
> 
> 时间：2012-12-20T06:52:56.630
> 
> 标签：jasper-reports, ireport

我有 2 个**数据源**A 和 B。我分别有 2 个**数据集**“a”和“b”。

我需要使用数据集“a”和“b”并从中生成报告。[即，创建一个表并使用数据集'a'和数据集'b'中的字段]

我**不能**使用子报表或罐子。

***iReport***中有没有办法满足我的要求？

我正在使用 Ireport 4.7。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:49:51.800

据我所知，您无法在 JaseperReports Server 4.7 的报告中执行此操作。2 个数据集可分别用于 2 个不同的图形小部件。

JasperReports Server 5.0 允许您基于多个数据源创建域，这可能会完成您想要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:16:37.550

在 Ireport 4.7 中你不可能做什么，像你已经做的那样创建两个数据集并并排使用两个表格元素，然后你只能显示来自不同数据集的两个字段。

# php - Jquery不会将内容加载到DIV区域..我哪里出错了

> ID：13966753
> 
> 赞同：0
> 
> 时间：2012-12-20T06:53:20.643
> 
> 标签：php, jquery, ajax, jquery-load

好的，所以我正在尝试使用 JQUERY LOAD 方法从另一个页面加载内容，这样内容就可以在没有刷新页面的情况下出现......我这样做了，但是当我点击链接时，它仍然将我重定向到另一个页面而不是加载到 div 中的内容。

下面是我的代码..

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title> MadScore, A Social Scoring Platform </title>
<link rel="stylesheet" type="text/css" href="css/madscore.css">
<link rel="stylesheet" type="text/css" href="css/skins/tango/skin.css" />
<script type="text/javascript" src="javascript/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="javascript/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="javascript/jquery.jcarousel.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery('#mycarousel').jcarousel({
        scroll: 1, buttonNextHTML:"<div></div>", buttonPrevHTML:"<div></div>"
    });
});
</script>

//Here is where I made the Jquery call for the div below with class "panel" but it won't load ..

<scrip type="text/javascript">
$(document).ready(function(){
  $("profile").click(function(){
    $(".panel").load("this.href");
  });
});
</script>
</head>

<body>
<div class="sliding-panel">
<div class="container">
<ul id="mycarousel" class="jcarousel-skin-tango">
<li>

<li>
<div class="panel"> //panel supposed to be triggered by Jquery
<h1> People </h1>
<?php
 database_connect();
$query = "select * from People";
$result = $connection->query($query);
$row_count =$result->num_rows;

for($i = 1; $i <= $row_count; $i++)
  {
   $row = $result->fetch_assoc();
    echo "<a href='/profile.php?id=".$row['ID']."' id='profile'><img src ='../".$row['Picture']."' width='100' height='100' /> </a>";

  }

?>
</div>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:54:53.590

`#`绑定点击事件时 您丢失了

```
$(document).ready(function(){
  $("#profile").click(function(){  // add # here
    $(".panel").load("this.href");
  });
}); 
```

也用于[`.on`](http://api.jquery.com/on/)将事件绑定到动态添加的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:59:46.323

首先，您的选择器丢失了`#`。此外，您只是将一个字符串传递给 load 方法：`"this.href"`，您需要传递实际的链接：`$this.attr('href')`

关于链接的问题，您需要**阻止默认操作**（即点击`a`）。为此，您有两个选择：

```
<script type="text/javascript">
   $(function(){
    alert('on ready works!');
      $("#profile").click(function(event){
        $(".panel").load($this.attr('href'), function(){
          alert('ajax called finished');
        });             
        return false; // or event.preventDefault();
      });
    });
    </script> 
```

# node.js - 并行异步读取文件

> ID：13966758
> 
> 赞同：1
> 
> 时间：2012-12-20T06:53:43.777
> 
> 标签：node.js, fs

我的 node.js 应用程序需要几个文件。我知道建议异步读取文件，所以，显然我必须这样做：

```
fs.readFile("file1", function(...) {
  fs.readFile("file2", function(...) {
    fs.readFile("file3", function(...) {
       [my application]
    }
  }
} 
```

但是，在这种情况下，文件将被顺序读取。

有没有办法并行读取许多文件，并且仍然确保应用程序在所有文件都加载后启动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:28:19.947

挺容易。

```
var files = [...], remaining = files.length;
var callback = function () {
    remaining--;
    if (!remaining) {
        go();
    }
};
files.forEach(function(file) {
    fs.readFile(file, callback);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-17T09:17:43.520

您可以使用现代的基于 Promise 的 API：

```
import {promises as fs} from 'fs';

function readFiles(files) {
  return Promise.all(
    files.map(path => fs.readFile(path))
  );
}

readFiles(['file1', 'file2', 'file3'])
  .then(fileContents => {
    console.log('All the files are read', fileContents);
  }); 
```

# java - 为 JSP 创建注销链接？

> ID：13966762
> 
> 赞同：0
> 
> 时间：2012-12-20T06:53:55.877
> 
> 标签：java, jsp, servlets

当用户登录到我的应用程序时，他提交了一个要通过 Servlet 处理的表单。servlet 为用户创建一个会话。我将如何创建一个链接以便用户可以注销？我似乎无法直接链接到 Servlet。如何删除会话并链接回主页？

```
HttpSession session = request.getSession(false);
if(session != null)
session.invalidate();
request.getRequestDispatcher("/index.jsp").forward(request,response); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:57:31.807

创建一个链接`<a href="/logout.jspx">Logout</a>`，该链接将有一个注销`Servlet`映射到此 url，您必须使会话无效，这将从服务器中删除会话并重定向到主页，服务器将为此创建一个新会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:18:42.960

我建议你写一个类似 logout.do 的方法

```
@RequestMapping("/logout.do")
 public ModelAndView logout(HttpSession session){
      session.invalidate();
      return new ModelAndView("/logout.jsp");//if you have two differenet web pages for login and logout else you can redirect to login.jsp
 } 
```

并从您的 headerFile.jsp 链接到

```
<a href="/logout.do">Logout</a> 
```

# android-intent - 处理屏幕关闭和屏幕打开意图

> ID：13966764
> 
> 赞同：2
> 
> 时间：2012-12-20T06:54:08.440
> 
> 标签：android-intent, android-service

我想在屏幕上显示消息打开或关闭。我已经创建了一个广播接收器和一个服务，如上：

广播接收器代码：

```
public class ScreenReceiver extends BroadcastReceiver {

private boolean screenOff;

@Override
public void onReceive(final Context context, Intent intent)
{
    if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) 
    {
        screenOff = true;
        //wasScreenOn = false;

        Log.v("$$$$$$", "In Method:  ACTION_SCREEN_OFF");
        Handler handler = new Handler() 
        {
            @Override
            public void handleMessage(Message msg) 
            {
                Toast.makeText(context, "OFF", Toast.LENGTH_SHORT).show();
            }
        };
        System.out.println("off");
       // context.startService(new Intent(context,UpdateService.class));
    } 
    else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON))
    {
        screenOff = false;
       // wasScreenOn = true;

        Log.v("$$$$$$", "In Method:  ACTION_SCREEN_ON");
        //context.startService(new Intent(context,UpdateService.class));
        Handler handler = new Handler() 
        {
            @Override
            public void handleMessage(Message msg) 
            {
                Toast.makeText(context, "ON", Toast.LENGTH_SHORT).show();
            }
        };
        System.out.println("off");
    }
    else if (intent.getAction().equals(Intent.ACTION_USER_PRESENT))
    {
        Log.v("$$$$$$", "In Method:  ACTION_USER_PRESENT");
    }
    Intent i = new Intent(context, UpdateService.class);
    i.putExtra("screen_state", screenOff);
    context.startService(i);

   /* if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        // do whatever you need to do here
        wasScreenOn = false;
    } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
        // and do whatever you need to do here
        wasScreenOn = true;
    }*/
}

}

public class UpdateService extends Service 
{
private BroadcastReceiver mReceiver;

@Override
public void onCreate() {
    super.onCreate();
    // register receiver that handles screen on and screen off logic
    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
    filter.addAction(Intent.ACTION_SCREEN_OFF);
    filter.addAction(Intent.ACTION_USER_PRESENT);
    mReceiver = new ScreenReceiver();
    registerReceiver(mReceiver, filter);
}

@Override
public void onStart(Intent intent, int startId) 
{
    boolean screenOn = intent.getBooleanExtra("screen_state", false);
    if (!screenOn) 
    {
        Toast.makeText(getApplication(), "OFFserv", Toast.LENGTH_SHORT).show();
        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) 
        {
        // your code
        Handler handler = new Handler() 
        {
            @Override
            public void handleMessage(Message msg) 
            {
                Toast.makeText(getApplication(), "OFFserv", Toast.LENGTH_SHORT).show();
            }
        };
        }

    } else 
    {
        if (intent.getAction().equals(Intent.ACTION_SCREEN_ON))
        {
        // your code
        Handler handler = new Handler() 
        {
            @Override
            public void handleMessage(Message msg) 
            {
                Toast.makeText(getApplication(), "ONserv",Toast.LENGTH_SHORT).show(); 
            }
        };
        }
    }
    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) 
    {
        Toast.makeText(getApplication(), "OFFserv", Toast.LENGTH_SHORT).show();
    // your code
    Handler handler = new Handler() 
    {
        @Override
        public void handleMessage(Message msg) 
        {
            Toast.makeText(getApplication(), "OFFserv", Toast.LENGTH_SHORT).show();
        }
    };
    }
    else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON))
        {
        // your code
        Handler handler = new Handler() 
        {
            @Override
            public void handleMessage(Message msg) 
            {
                Toast.makeText(getApplication(), "ONserv", Toast.LENGTH_SHORT).show();
            }
        };
        }
}

@Override
public void onDestroy()
{
      super.onDestroy();
      Log.v("$$$$$$", "In Method: onDestroy()");

      if (mReceiver != null)
      {
            unregisterReceiver(mReceiver);
            mReceiver = null;
      }          

}

@Override
public IBinder onBind(Intent intent)
{
    // TODO Auto-generated method stub
    return null;
}

} 
```

清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.screenreceiver"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
         android:name=".ExampleActivity"

     >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

 <receiver android:name="com.example.screenreceiver.ScreenReceiver">
    <intent-filter> 
        <action android:name="android.intent.action.SCREEN_ON" />
        <action android:name="android.intent.action.SCREEN_OFF" />
        <action android:name="android.Intent.ACTION_USER_PRESENT" />
    </intent-filter> 
</receiver>
    <service android:name=".UpdateService">

    </service> 

</application> 
```

我已经运行了我的代码，但是每当我打开/关闭屏幕时，屏幕上都没有任何消息。如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:38:25.610

我自己一直在研究同样的问题。我发现由于某种原因，Android 不希望通过清单声明 Screen_On 或 Screen_Off 意图。而不是重写一个已经很好的帖子，我只是链接我在这里找到的解决方案...... [http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-意图/](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)

# iphone - iPhone中的CNCopyCurrentNetworkInfo()函数返回什么信息

> ID：13966768
> 
> 赞同：2
> 
> 时间：2012-12-20T06:54:30.623
> 
> 标签：iphone, ipad, wifi

我正在开发一个应用程序，我想在其中获取该地区的信号强度等 Wi-Fi 信息。

在进行一些挖掘时，我在 Apple 文档中发现了[这一点。](https://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html)它没有指定函数返回什么信息。

[SO上的这个](https://stackoverflow.com/questions/4304942/cncopycurrentnetworkinfo-is-returning-bad-data)问题表明它给出了SSID和BSSID。

谁能告诉我这个函数还返回了哪些其他信息？或者就是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T05:28:37.553

从我发现它返回的代码中，正如您已经告诉**SSID**、**BSSID**以及**SSIDDATA 一样**。SSIDDATA 是 SSID 的十六进制表示。

就是这样。

无法从公共 API 获得信号强度、wifi 安全等。

# mysql - 要转换为 Rails 控制器的复杂 sql 查询

> ID：13966771
> 
> 赞同：0
> 
> 时间：2012-12-20T06:54:45.523
> 
> 标签：mysql, ruby-on-rails

我有这个 sql 查询，需要将其更改为 rails 控制器

```
SELECT * FROM ( SELECT vendorName,startTime,endTime,appsImported,result,logfile 
             FROM appmall_dev.data_imports d order by startTime desc)as t 
             group by t.vendorNAme; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:58:19.783

```
DataImport.select("vendorName,startTime,endTime,appsImported,
                   result,logfile").group("vendorName").order("startTime desc") 
```

# mysql - 如何自动更新mysql表？

> ID：13966772
> 
> 赞同：0
> 
> 时间：2012-12-20T06:54:51.327
> 
> 标签：mysql

这是我的问题：

```
 USER TABLE

id  uploader_name   email
1   abhijit         xxx@email.com
2   rahul           abc@email.com

    UPLOAD TABLE

ID  USER_ID     IMAGE_URL
1   1           UPLOAD/XXX.JPG
2   1           UPLOAD/ABC.JPG
3   2           UPLOAD/CD.JPG 
```

如何`USER_ID`在表中`UPLOAD TABLE`与`id`表中连接`USERS TABLE`？因此，该`USER_ID`字段会自动更新。
现在我的问题是如何`USER_ID`在表中添加数据`UPLOAD TABLE`。我可以在每个字段中添加数据，除了`USER_ID`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:05:38.370

在这种情况下，您可以添加一个触发器来更新上传表的 user_id 字段。请参考此[链接](https://stackoverflow.com/questions/6296313/mysql-trigger-after-update-only-if-row-has-changed)，这将帮助您了解触发器以及如何自动更新字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-15T09:58:04.140

如果您的问题是这样的：您首先将内容添加到 UPLOAD 表，而不知道 USER_ID。然后，一旦知道了 USER_ID，您就会尝试修补它。但是到那时，数据已经插入到数据库中。

可能的答案：每次插入后，您可以调用**LAST_INSERT_ID()**来获取最新插入表的 auto_increment 值。使用此 ID 稍后使用此 user_id 修补（更新）UPLOAD 表。 [http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

否则，如果场景是：如果修改了 USER 表，您想要更新 user_id 的 ID。在这种情况下，请使用带有外键约束的 innodb 表，以确保保持正确的关系。此外，使用**ON UPDATE CASCADE**将您对 ID 的更改带到另一个表。

无论如何，请进一步解释问题。

# sql-server-2008 - SQL Server 2008 中的日期时间转换错误？

> ID：13966774
> 
> 赞同：0
> 
> 时间：2012-12-20T06:54:54.477
> 
> 标签：sql-server-2008, tsql

在我的存储过程中，我正在尝试使用此代码传递参数

```
select @enddate = CONVERT(varchar, @days) + '-' + left(@P5, 4) + '20' + right(@P5, 2) 
```

这里`@enddate`数据类型是`varchar(12)`和`@days`数据类型是`int`和`@P5`数据类型是`varchar(20)`

它显示以下错误

> *从字符串转换日期和/或时间时转换失败*

对此有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:40:54.227

在尝试测试此代码时，我没有设法触发您看到的相同错误。

```
DECLARE @enddate AS VARCHAR(12) ,
    @days AS INT ,
    @P5 AS VARCHAR(20);

SELECT  @days = 5 ,
        @p5 = '2012-12-12';

SELECT  @enddate = CONVERT(VARCHAR, @days) + '-' + LEFT(@P5, 4) + '20' + RIGHT(@P5, 2);
PRINT @enddate; 
```

产生结果

```
5-20122012 
```

没有错误。

您建议这是一个更大的存储过程的一部分。变量中的数据不是您认为的那样，或者错误在您的程序中的其他地方。

# java - 如何使用非空字段实现“稍后完成”功能？

> ID：13966775
> 
> 赞同：7
> 
> 时间：2012-12-20T06:55:04.803
> 
> 标签：java, spring, hibernate, jakarta-ee

**环境**
Spring/hibernate/MySQL web 应用

**问题**
我有一个多步骤表格，应该可以在每一步保存以供以后完成。但不完整的步骤可能包含模型所需的字段，因此无法保存模型。

**我尝试过或想过尝试的事情**

1.  使字段可以为空。
2.  使用临时表保存不完整的表格

**但是..**
解决方案 1 破坏了数据库设计，解决方案 2 会用片段来膨胀我的代码，以便在临时模型和永久模型之间进行转换，如果我在保存表单后添加编辑表单的功能，这将变得很难看。

如何以无缝优雅的方式实现完整的后期功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:01:25.027

另一种选择是`boolean`在您的数据库表中有一个列`complete_edit`。对于那些在保存期间未首先输入的列，存储默认值或类似“NOT_COMPLETE”的字符串并将`complete_edit`列设置为false。只有在提交时，此列才应为 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T07:18:56.097

FWIW，我强烈反对临时表保存不完整的表格。我们在当前的应用程序中有一个类似的设置（以跨不同用户会话的多个步骤准备发票），这会导致可维护性问题以及对临时表和永久表的不连贯修改。

我们正朝着具有鉴别器状态列的单表方法发展，该方法将对这些进行中的发票进行分类，以便在状态翻转之前，后续工作流程步骤不会选择它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:51:30.350

我推荐解决方案 2：临时表：因为它清楚地区分了您的域模型（普通表）和一些 GUI 内容，例如持久向导。

如果您不分开，那么您需要在程序中的任何地方检查数据是域模型数据或 gui 数据（在每件事完成后将成为域数据）。

# php - 如何使用 PHP 动态添加或删除文本框？

> ID：13966779
> 
> 赞同：1
> 
> 时间：2012-12-20T06:55:17.813
> 
> 标签：php, html

这是我的代码，当我点击添加按钮时，新的文本字段即将到来，但总页面正在刷新，现有数据也在刷新，请帮助我。

```
<?php       
    if( !isset( $_POST['j'] ) ) {
        static $j = 1;
    } else {
        //j is a reference for $i in the loop. $i will loop while it is less than $j.
        if( isset( $_POST['plus'] ) ) {
           $j = $_POST['j']+1; //by incrementing $j, $i will loop one more time.
        }
        if( isset( $_POST['minus'] ) ) {
           if( @$j < 1 ) { //if there is only one box the user can't remove it
               $j = $_POST['j']-1;
           }
        }   
    }
?>
<?php echo '<input type="hidden" name="j" value="' . @$j . '"/>' ?>
<?php for( $i = 0; $i < @$j; $i++ ) { ?>
    <input id="txt_id" name="txt_id[]"  type="text" value="" readonly="readonly"/> 
<? } ?>
<input type ="submit" value="+" name="plus">
<input type ="submit" value="-" name="minus"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:58:28.107

那是因为您需要为正在生成的文本字段设置值。

尝试用这个替换你的 for 循环：

```
<?php for( $i = 0; $i < @$j; $i++ ) { ?>
      <input id="txt_id" name="txt_id[]"  type="text" value="<?php echo $_POST['txt_id'][$i];?>" readonly="readonly" />
<? } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:25:24.173

我发布了一个在服务器上实现的代码。因此，在您的本地服务器上尝试了此代码。它会起作用并帮助您找到解决方案。

```
<html>

    <head>
        <title> Add/Remove dynamic rows in HTML table </title>
        <script language="javascript">

            function addRow(tableID) {
                var numb = document.getElementById("numb").value;
                for($i=1;$i<=numb;$i++) {
                    var table = document.getElementById(tableID);

                    var rowCount = table.rows.length;
                    var row = table.insertRow(rowCount);

                    var cell1 = row.insertCell(0);
                    var element1 = document.createElement("input");
                    element1.type = "checkbox";
                    cell1.appendChild(element1)[$i];

                    var cell2 = row.insertCell(1);
                    cell2.innerHTML = rowCount + 1;

                    var cell3 = row.insertCell(2);
                    var element2 = document.createElement("input");
                    element2.type = "text";
                    element2.name = "firstname["+rowCount+"]";
                    cell3.appendChild(element2)[$i];

                    var cell4 = row.insertCell(3);
                    var element3 = document.createElement("input");
                    element3.type = "text";
                    element3.name = "lastname["+rowCount+"]";
                    cell4.appendChild(element3)[$i];

                    var cell5 = row.insertCell(3);
                    var element4 = document.createElement("input");
                    element4.type = "text";
                    element4.name = "town["+rowCount+"]";
                    cell5.appendChild(element4)[$i];

                    var cell6 = row.insertCell(3);
                    var element5 = document.createElement("input");
                    element5.type = "text";
                    element5.name = "state["+rowCount+"]";
                    cell6.appendChild(element5)[$i];
                }

            }
        </script>
    </head>
    <body>
     <form action="#" method="post">
        <input type="button" value="Add Row" onclick="addRow('dataTable')" />
        <input type="text" name="numb" id="numb" value="" />
        <input type="submit" name="submit" value="submit" />
        <table id="dataTable" width="350px" border="1">

        </table>
        </form>
    </body>
    </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:58:37.800

[http://viralpatel.net/blogs/dynamic-add-textbox-input-button-radio-element-html-javascript/](http://viralpatel.net/blogs/dynamic-add-textbox-input-button-radio-element-html-javascript/)

[http://jpsolution.wordpress.com/tag/add-text-box-dynamically-javascript/](http://jpsolution.wordpress.com/tag/add-text-box-dynamically-javascript/)

希望这些网站可能有用

# android - 在android中滚动Textview

> ID：13966782
> 
> 赞同：5
> 
> 时间：2012-12-20T06:55:31.357
> 
> 标签：android, textview

在我的应用程序中，我必须实现一个自动滚动的文本视图，我引用[了这个](http://androidbears.stellarpc.net/?p=185)链接。

现在我有一个滚动的 tetxview。但根据我的要求是我有一个字符串数组（我已经解析并且我有一些字符串）..考虑数组可能是

```
 string[] array=new string{"fgsdfd","gdfghdjhsd","gdfjhsgfhds"}; 
```

现在我希望这个数组显示在那个文本视图中（它将自动滚动）。

我想要这样：

```
 fgsdfd   gdfghdjhsd    gdfjhsgfhds------------------>this will scroll automatically 
```

这是我的文本视图（滚动）：

```
 <TextView
    android:text="Really Long Scrolling Text Goes Here.... ..... ............ .... ...."
    android:singleLine="true"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:id="@+id/TextView03"
    android:padding="5dip" 
    android:layout_width="wrap_content" 
    android:textColor="#000000"
    android:layout_height="wrap_content" /> 
```

如何将字符串数组设置为 tetxview ..请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:58:23.673

您可以将所有字符串合并到一个字符串中，[`StringBuilder`](http://developer.android.com/reference/java/lang/StringBuilder.html)并将其应用于`TextView`.

我已经通过包装 textview 实现了我自己的 TextView 滚动（也许还有其他一些视图）

```
private Runnable scrollRight = new Runnable()
{

    @Override
    public void run()
    {
                    // can control scrolling speed in on tick
        topScroll.smoothScrollBy(1, 0);
    }
}; 
```

在新线程中我调用：

```
while (!interruptScroll){
    try{
        Thread.sleep(50); // control ticking speed
    }
    catch (InterruptedException e){
        e.printStackTrace();
    }
    topScroll.post(scrollRight);
} 
```

并通过手动滚动 scrollView 我中断滚动（这样的自动滚动而不被用户中断）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:00:39.880

尝试使用 StringBuilder。

```
String[] array = { "fgsdfd", "gdfghdjhsd", "gdfjhsgfhds" };
StringBuilder sb = new StringBuilder();

for (int i = 0; i < array.length; i++) {
    sb.append(array[i]);
}
txtView.setText(sb.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:06:42.463

为此尝试，

```
<TextView
android:text="Really Long Scrolling Text Goes Here.... ..... ............ .... ...."
android:singleLine="true"
android:ellipsize="marquee"
android:marqueeRepeatLimit="marquee_forever"
android:scrollbars="horizontal"
android:id="@+id/TextView03"
android:padding="5dip" 
android:layout_width="wrap_content" 
android:textColor="#000000"
android:layout_height="wrap_content" /> 
```

# wpf - 如何将 imageBrush 应用于数据网格标题背景？

> ID：13966786
> 
> 赞同：1
> 
> 时间：2012-12-20T06:56:00.697
> 
> 标签：wpf, datagrid

我可以知道如何使用图像刷设置 Datagrid Header 背景吗？我知道如何设置背景颜色（如代码片段）。但我需要知道imagebrush怎么样？有什么建议吗？谢谢

p / s：我在这里找到了一个[样本](https://stackoverflow.com/questions/10721603/grid-background-image-using-imagebrush)，但不起作用.....

xml代码片段：

```
<DataGrid.Resources>
      <Style TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="Background" Value="Yellow"/>
      </Style>
</DataGrid.Resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:39:52.293

如果您的意思是如何编写 Setter，则可以对属性使用[属性元素语法](http://msdn.microsoft.com/en-us/library/ms788723.aspx#property_element_syntax)`Setter.Value`：

```
<DataGrid.Resources>
    <Style TargetType="{x:Type DataGridColumnHeader}">
        <Setter Property="Background">
            <Setter.Value>
                <ImageBrush ImageSource="..."/>
            </Setter.Value>
        </Setter>
    </Style>
</DataGrid.Resources> 
```

# ipad - Titanium 3.0 显示未找到 xcode

> ID：13966792
> 
> 赞同：0
> 
> 时间：2012-12-20T06:56:20.107
> 
> 标签：ipad, ios6, titanium

我正在使用`Titanium 2.1.3 SDK`并且我已将我的 Titanium 更新到 3.0 并安装了`Titanium 3.0 SDK`.

安装最新的 SDK 并选择 3.0 SDK 后`tiapp.xml`，当我尝试运行我的项目时，它显示 ERROR `xcode not found`。

但是 xcode 存在并安装在我的系统中，它的版本是`4.5.1`.

之后我尝试选择 2.1.3 SDK`tiapp.xml`并尝试运行该项目，但现在它没有加载并显示此错误。

```
[ERROR] Error: Traceback (most recent call last):
File "/Users/p132/Library/Application Support/Titanium/mobilesdk/osx/2.1.3.GA/iphone/builder.py", line 1325, in main
execute_xcode("iphonesimulator%s" % link_version,["GCC_PREPROCESSOR_DEFINITIONS=__LOG__ID__=%s DEPLOYTYPE=development TI_DEVELOPMENT=1 DEBUG=1 TI_VERSION=%s %s %s" % (log_id,sdk_version,debugstr,kroll_coverage)],False)
File "/Users/p132/Library/Application Support/Titanium/mobilesdk/osx/2.1.3.GA/iphone/builder.py", line 1231, in execute_xcode
output = run.run(args,False,False,o)
File "/Users/p132/Library/Application Support/Titanium/mobilesdk/osx/2.1.3.GA/iphone/run.py", line 41, in run
sys.exit(rc)
SystemExit: 65 
```

我试图删除 Titanium SDK 3.0，但问题就是这样。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T03:47:54.377

我有类似的问题。按照说明在终端中键入以下内容后设法解决：

`sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer`

# javascript - 将变量的值传递给函数参数？

> ID：13966795
> 
> 赞同：1
> 
> 时间：2012-12-20T06:56:37.240
> 
> 标签：javascript

我将函数调用存储在变量中。

```
var snippet = function { alert('a') };
snippet.call(); // Displays an alert 
```

我的问题是我需要传递一个变量作为函数的参数。

```
var snippet;
function() {
   var word1 = 'hello';
   var word2 = ' world';
   snippet = function() { alert( word1 + word2 ); };
} 
```

当我调用'snippet'时，变量是未定义的：

```
snippet.call(); // Cannot read property 'x' of undefined 
```

如何保存函数，以便保存 和 的值，`word1`因为`word2`它是参数而不是实际变量？（所以无论是否定义了变量，我都可以稍后调用它）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:00:59.720

这应该可以解决问题：

```
var snippet = function ( word1, word2 ) {
  alert ( word1 + word2 );
};

snippet ( "foo", "bar" );
// or
snippet.call ( ctx, "foo", "bar" ); // where `ctx` is the context you wish to use 
```

`call()`有关该功能的更多信息： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:13:13.090

在撰写本文时无法准确说出您的问题的去向，但您可以关闭闭包返回函数中的两个参数，如下所示：

```
var snippet = function (word1, word2) {
   return function() { alert( word1 + word2 ); };
};

snippet('hello', 'world').call(); 
```

返回一个闭包，然后`snippest('hello', 'word')`您可以调用或传递它。您还可以立即创建闭包并创建稍短的内容：

```
var snippet = function(word1, word2) {
    return function() {
        alert(word1 + word2);
    };
}('hello', 'world');

snippet.call(); 
```

这和之前的一样，但是外部函数会立即被调用，然后分配给`snippet`它的闭包可以被调用或传递。

# android - NFC 插件在 Eclipse 中不起作用

> ID：13966797
> 
> 赞同：1
> 
> 时间：2012-12-20T06:56:51.590
> 
> 标签：android, eclipse, nfc, ndef

我想测试一个为`NFC`基于设备编写的应用程序，在我`Eclipse`安装新软件并粘贴下面的链接时，我收到此错误：链接： http: [//nfc-eclipse-plugin.googlecode.com /git/nfc-eclipse-plugin-feature/update-site/](http://nfc-eclipse-plugin.googlecode.com/git/nfc-eclipse-plugin-feature/update-site/)

错误：

```
 Cannot complete the request.  See the error log for details.
 NDEF Editor will be ignored because it is already installed, and updates are not permitted. 
```

但是我无法运行我的应用程序，因为我的项目名称旁边有一个感叹号！

你能告诉我我该怎么做吗？我是安卓开发的新手！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:04:56.273

我是那个插件的作者。

1.  该插件似乎已经安装，因此您无法重新安装，并且（上个月）没有发布任何更新，因此也没有可用的更新。
2.  该插件不影响项目是否可以运行，它纯粹是一个不可执行格式的文件编辑器。不存在验证文件或项目的功能。

转到问题视图并查看那里列出的内容。

```
Window->Show View->Other->General->Problems. 
```

解决问题。它可能有助于关闭不相关的项目。如果您仍然觉得插件存在错误，请在网站上提交详细的错误报告。

您可能还想清理和重建您的工作区。

```
Project->Clean 
```

# ios - 对LLDB调试方法的质疑

> ID：13966799
> 
> 赞同：0
> 
> 时间：2012-12-20T06:56:56.537
> 
> 标签：ios

在`LLDB debugger`,`self.property`工作，但为什么不`self.property.property`工作。

例子：

宝`self.modelData.arrayOfChatMessages`

没有名为 . 的成员`arrayOfChatMessages`。当介入另一个类的函数时，我尝试这样做：

`po self.anotherClass`的属性（调试器所在的函数所在的类）它给出以下消息：

```
po self.anotherClassProperty 
```

没有名为 的成员`anotherClassProperty`。谁能帮帮我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:26:40.060

这是调试器的限制。要解决此问题，请使用常规消息语法：

```
po [[self modelData] arrayOfChatMessages]
po [self anotherClassProperty] 
```

# codeigniter - Codeigniter 表单验证 set_checkbox()

> ID：13966820
> 
> 赞同：0
> 
> 时间：2012-12-20T06:59:05.637
> 
> 标签：codeigniter

我正在使用 codeigniter 表单验证 set_checkbox() 函数。我想保持选中复选框，在提交之前选中，在提交之前取消选中。我应该怎么办 ？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:33:44.077

你可以这样使用

```
<input type="checkbox" name="mycheck[]" value="1" <?php echo set_checkbox('mycheck[]', '1'); ?> />
<input type="checkbox" name="mycheck[]" value="2" <?php echo set_checkbox('mycheck[]', '2'); ?> /> 
```

请参考这个网址：[http ://codeigniter.in.th/user_guide/libraries/form_validation.html](http://codeigniter.in.th/user_guide/libraries/form_validation.html)

# python - Tkinter 画布滚动条不跟随框架超过某个点

> ID：13966822
> 
> 赞同：2
> 
> 时间：2012-12-20T06:59:16.510
> 
> 标签：python, tkinter

我一直在尝试理解二叉树的绘制。我在

[http://billmill.org/pymag-trees/](http://billmill.org/pymag-trees/)

提供的代码使用了不属于我认识的任何 python 库的图形调用，因此我已将图形调用转换为 tkinter 并让代码运行，除了一个意外行为。当我调整框架的大小（使其更大）时，滚动条会在某些时候被抛在后面。当它重新调整大小时，它们不会留在框架中。这是代码：

```
from tkinter import *
from gen import Tree
from demo_trees import trees
from knuth import layout

r = 30
rh = r*1.5
rw = r*1.5

def drawt(canvas, root, depth):
    canvas.create_oval(root.x * rw, depth * rh, 
                   root.x * rw + r, depth * rh + r, 
                   fill = 'white',
                   width = 2)
    for child in root.children:
        drawt(canvas, child, depth+1)

def drawconn(canvas, root, depth):
    for child in root.children:
        canvas.create_line(root.x * rw + (r/2), depth * rh + (r/2),
         child.x * rw + (r/2), (depth+1) * rh + (r/2),
         width = 2)
        drawconn(canvas, child, depth+1)

def main():

    root = Tk()

    # Create the main frame. The frame will include a 
    # scrollable canvas.
    frame = Frame(root, width=500, height=309, relief=SUNKEN)
    frame.grid_rowconfigure(0, weight=1)
    frame.grid_columnconfigure(0, weight=1)

    # Add scroll bars
    xscrollbar = Scrollbar(frame, orient=HORIZONTAL)
    xscrollbar.grid(row=1, column=0, sticky=E+W)

    yscrollbar = Scrollbar(frame)
    yscrollbar.grid(row=0, column=1, sticky=N+S)

    # Add the canvas
    canvas = Canvas(frame, width=500, height=300,
                scrollregion=(-20, -20, 500, 300),
                xscrollcommand=xscrollbar.set,
                yscrollcommand=yscrollbar.set)

    canvas.grid(row=0, column=0, sticky=N+S+E+W)

    xscrollbar.config(command=canvas.xview)
    yscrollbar.config(command=canvas.yview)

    frame.pack()

    # Now draw the tree
    t = layout(trees[2])
    drawconn(canvas, t, 0)
    drawt(canvas, t, 0)

    root.mainloop()

if __name__ == '__main__':
    main() 
```

绘图正常滚动，一切都很好，直到调整框架大小（更大） 谁能告诉我为什么滚动条不随框架移动？

如果有人感兴趣，完整的树绘制代码来自上面的链接，并且对应于提供的下载的figure2.py中的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:17:51.633

很难确定，因为由于缺少依赖项，我无法运行您的代码，但如果我不得不猜测，我会说这是因为您没有打包框架以使其扩展和收缩。你说滚动条“落后”，但我敢打赌画布也有同样的问题。

尝试修改您打包框架的行：

```
frame.pack(side="top", fill="both", expand=True) 
```

# java - java中的'this'到底是什么意思？

> ID：13966823
> 
> 赞同：-3
> 
> 时间：2012-12-20T06:59:17.447
> 
> 标签：java

```
class A {

    void methodA {
        B b= new B();
        b.methodB();
        //point 1
    }

    private class B {
        void methodB(){
            //point 2
        }
    }
} 
```

如果我使用系统输出`this.toString()`在第 1 点和第 2 点进行打印，它会给出相同的值。谁能告诉我为什么？这两个不应该给出不同的值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:02:38.427

它们是不同的，试试这个：

```
public class Test {

    public static void main(String[] args) {
        new A().methodA();
    }
}

class A {

    void methodA() {
        B b= new B();
        b.methodB();
        //point 1
        System.out.println(this.toString());
    }

    private class B {

        void methodB(){
            //point 2
            System.out.println(this.toString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:03:29.240

> 如果我使用系统输出在第 1 点和第 2 点打印 this.toString() ，它会给出相同的值。

我不同意你的看法。

`this`总是引用 java 中的当前对象引用。

```
void methodA() {
    B b = new B();
    b.methodB();
    // point 1
    System.out.println(this.toString());
}

private class B {

    void methodB() {
        // point 2
        System.out.println(this.toString());
    }
} 
```

结果 -
样品$B@9304b1
样品@190d11

从它打印的内部类方法中可以看出`Sample$B@9304b1`，Sample 是基类，B 是内部类和哈希码。其中类方法使用`@`和哈希码打印类名。

**两个哈希码都不同，因此两个对象都不同**。所以这指的是不同的对象实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:21:23.080

简单的答案是第 1 点和第 2 点打印不同的东西......除非你重载了这些`toString()`方法：

你的程序：

```
class A {

    void methodA() {
        B b= new B();
        b.methodB();
        System.err.println("point 1 - " + this.toString());
    }

    private class B {
        void methodB(){
            System.err.println("point 2 - " + this.toString());
        }
    }

    public static void main(String[] args) {
        new A().methodA();
    }
} 
```

当我运行它时打印它。

```
point 2 - A$B@58c3d9ac
point 1 - A@2207d8bb 
```

事实上，输出清楚地告诉我们，`this`在点 1 和 2 表示不同的东西。在点 1，`this`指的是 的实例`A`。在第 2 点，`this`指的是 的一个实例`A.B`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:11:49.160

好吧，这是方法的行为。`toString()`您正在访问`this`引用该类的当前实例的关键字。
因为visal_aim在这种情况下在**point1** `this`关键字发布的答案将引用A类的实例，而`point 2` 它将引用B类的实例。
您得到相同的答案，因为在这两个点`this`都是类型`object`并且将返回相同的字符串. （直到您覆盖了基础对象类的 toString() 方法）。

# java - 如何从 java 检查 PATH 和 CLASSPATH 环境变量？

> ID：13966824
> 
> 赞同：8
> 
> 时间：2012-12-20T06:59:22.410
> 
> 标签：java, path, get, classpath, environment-variables

我正在制作一个 java 程序来使用 JMF 读取 audio.wav 文件。每次我的计算机像这样重新启动时，我都必须从 cmd 设置路径

```
 set CLASSPATH=%WINDIR%\java\classes\jmf.jar;%WINDIR%\java\classes\sound.jar;.;%CLASSPATH% 
```

和

```
 set PATH=%WINDIR%\System32;%PATH% 
```

否则程序将编译但不运行我想通过

```
 System.setProperty(key,value); 
```

我不知道 cmd 命令，所以为了在通过 cmd 设置后检查 CLASSPATH 和 PATH 的值，我试过了

```
 public void checkProperty (){
    System.setProperty("temporaryvar","blahblah");
    System.out.println(""+System.getProperty("temporaryvar"));//prints out blahblah
    System.out.println(""+System.getProperty("CLASSPATH"));//prints out null
    System.out.println(""+System.getProperty("PATH"));//prints out null
    } 
```

我把它打印出来

```
 blahblah
    null
    null 
```

是什么原因我得到了我从程序中设置的变量的值，而不是我从 cmd 中设置的值？这是正确的方法吗？我需要从 java..plz 帮助中设置这两个路径

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-20T07:02:59.227

使用`System.getenv`而不是`System.getProperty`. 请注意，您还可以通过以下方式获取当前 Java 进程的有效类路径：

```
System.getProperty("java.class.path"); 
```

并且该值可以并且在大多数情况下会与您`CLASSPATH`设置的环境变量不同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-20T07:02:56.150

因为`CLASSPATH`and`PATH`是环境变量，而不是 Java 系统属性。系统属性可以使用`-Dkey=value`.

尝试使用[System.getenv()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#getenv(java.lang.String))代替。

# java - Android - wav 文件播放速度快

> ID：13966826
> 
> 赞同：3
> 
> 时间：2012-12-20T06:59:40.510
> 
> 标签：java, android, audio-recording

我将麦克风的输入记录到 sample.wav。但是播放速度太快了。10 秒文件在 3 秒内。

```
int RECORDER_SAMPLERATE = 44100;
int RECORDER_BitsPerSample = 16;
int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_MONO;
int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;

int channels = 2;
long byteRate = RECORDER_BPP * RECORDER_SAMPLERATE * channels / 8; 
```

请解释哪里出错了。

byteRate 用于创建 wav 文件头。

wav 标头格式为 // RIFF/WAVE 标头

```
 header[0] = 'R'; 
    header[1] = 'I';
    header[2] = 'F';
    header[3] = 'F';
    header[4] = (byte) (totalDataLen & 0xff);
    header[5] = (byte) ((totalDataLen >> 8) & 0xff);
    header[6] = (byte) ((totalDataLen >> 16) & 0xff);
    header[7] = (byte) ((totalDataLen >> 24) & 0xff);
    header[8] = 'W';
    header[9] = 'A';
    header[10] = 'V';
    header[11] = 'E';
    header[12] = 'f'; // 'fmt ' chunk
    header[13] = 'm';
    header[14] = 't';
    header[15] = ' ';
    header[16] = 16; // 4 bytes: size of 'fmt ' chunk
    header[17] = 0;
    header[18] = 0;
    header[19] = 0;
    header[20] = 1; // format = 1
    header[21] = 0;
    header[22] = (byte) channels;
    header[23] = 0;
    header[24] = (byte) (longSampleRate & 0xff);
    header[25] = (byte) ((longSampleRate >> 8) & 0xff);
    header[26] = (byte) ((longSampleRate >> 16) & 0xff);
    header[27] = (byte) ((longSampleRate >> 24) & 0xff);
    header[28] = (byte) (byteRate & 0xff);
    header[29] = (byte) ((byteRate >> 8) & 0xff);
    header[30] = (byte) ((byteRate >> 16) & 0xff);
    header[31] = (byte) ((byteRate >> 24) & 0xff);
    header[32] = (byte) (2 * 16 / 8); // block align
    header[33] = 0;
    header[34] = RECORDER_BPP; // bits per sample
    header[35] = 0;
    header[36] = 'd';
    header[37] = 'a';
    header[38] = 't';
    header[39] = 'a';
    header[40] = (byte) (totalAudioLen & 0xff);
    header[41] = (byte) ((totalAudioLen >> 8) & 0xff);
    header[42] = (byte) ((totalAudioLen >> 16) & 0xff);
    header[43] = (byte) ((totalAudioLen >> 24) & 0xff); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:41:15.167

我找到了上述问题的解决方案。对于 AudioFormat.CHANNEL_IN_MONO，通道必须为 1。对于 AudioFormat.CHANNEL_IN_STEREO，通道必须为 2。

```
int channels = 1;
long byteRate = RECORDER_BPP * RECORDER_SAMPLERATE * channels / 8; 
```

现在它工作正常。

# ubuntu - 使用 vnc 连接 ubuntu

> ID：13966831
> 
> 赞同：4
> 
> 时间：2012-12-20T06:59:58.147
> 
> 标签：ubuntu, remote-desktop, remote-access, vnc, vnc-viewer

我需要从另一台 Ubuntu PC 和 Windows PC 远程连接到 Ubuntu PC（需要查看 UI）。我知道我们可以使用 VNC 来做到这一点。任何人都可以向我解释这些步骤或提供包含说明的正确链接。

我遵循了以下步骤： 在需要远程访问的 Ubuntu 机器上安装了 vnc 服务器。我按照以下链接中的说明进行操作

[http://www.ubuntu-unleashed.com/2007/10/setup-vnc-server-for-ubuntu-gutsy.html](http://www.ubuntu-unleashed.com/2007/10/setup-vnc-server-for-ubuntu-gutsy.html)

当我执行第 4 步时：

```
x11vnc -forever -usepw -httpdir /usr/share/vnc-java/ -httpport 5800 
```

我明白了

```
20/12/2012 02:12:02 passing arg to libvncserver: -httpport

20/12/2012 02:12:02 passing arg to libvncserver: 5801

20/12/2012 02:12:02 -usepw: found /home/sjayara5/.vnc/passwd

20/12/2012 02:12:02 x11vnc version: 0.9.12 lastmod: 2010-09-09  pid: 4821

20/12/2012 02:12:02 XOpenDisplay("") failed.

20/12/2012 02:12:02 Trying again with XAUTHLOCALHOSTNAME=localhost ...

20/12/2012 02:12:02 

20/12/2012 02:12:02 *** XOpenDisplay failed. No -display or DISPLAY.

20/12/2012 02:12:02 *** Trying ":0" in 4 seconds.  Press Ctrl-C to abort.

20/12/2012 02:12:02 *** 1 2 3 4 

20/12/2012 02:12:06 XOpenDisplay(":0") failed.

20/12/2012 02:12:06 Trying again with XAUTHLOCALHOSTNAME=localhost ...

20/12/2012 02:12:06 XOpenDisplay(":0") failed.

20/12/2012 02:12:06 Trying again with unset XAUTHLOCALHOSTNAME ...

20/12/2012 02:12:06 

20/12/2012 02:12:06 ***************************************

20/12/2012 02:12:06 *** XOpenDisplay failed (:0)

*** x11vnc was unable to open the X DISPLAY: ":0", it cannot continue.

*** There may be "Xlib:" error messages above with details about the failure. 
```

一些提示和指南：

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:26:06.470

阅读您的错误信息！似乎相当清楚您正在从 SSH 会话或类似会话中运行命令，因为未设置 DISPLAY。将其设置为正确的值（检查 /tmp 中的 X11 套接字；您可能想要“:0”）。

```
DISPLAY=":0"; export DISPLAY 
```

您还需要设置 XAUTHORITY 以便 x11vnc 可以连接！愚弄[这个](https://unix.stackexchange.com/questions/10121/open-a-window-on-a-remote-x-display-why-cannot-open-display)问题。

# python - 删除特定单词之后的所有单词

> ID：13966832
> 
> 赞同：3
> 
> 时间：2012-12-20T07:00:01.853
> 
> 标签：python, regex

我想删除特定单词“.c:”之后的所有单词、数字、十六进制数字

我的台词是这样的——

```
line = "Bags has a price.c:123
line = "Bags has a price.c:543ea 
```

我尝试过以下方法：

```
d = re.sub(r'[.c:\W+]', '', c) 
```

但它没有给出正确的答案，输出将是：

```
output: Bags has a price 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T07:09:01.300

```
>>> line = "Bags has a price.c:123"
>>> line.split(':')[0]
'Bags has a price.c'
>>> line.split('.c')[0]
'Bags has a price' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T07:01:18.490

```
>>> line = "Bags has a price.c:123"
>>> ''.join(line.partition('.c')[:2])
'Bags has a price.c' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:59:05.857

并且只使用一个简单的索引查找。

```
>>> line = "Bags has a price.c:543ea"
>>> after_word = ".c"
>>> cleaned_line = line[:line.index(after_word) + len(after_word) ]
>>> cleaned_line
Bags has a price.c 
```

要排除`.c`只是删除`+ len(after_word)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:26:34.740

如果你必须使用正则表达式——显然你不需要。你可以这样做：

```
re.sub(r'\.c:.*?$','', line) 
```

如果您可以避免使用正则表达式，请执行此操作。使用拆分可能会慢得多。

# c - 将数组作为参数传递给函数

> ID：13966834
> 
> 赞同：1
> 
> 时间：2012-12-20T07:00:14.590
> 
> 标签：c, arrays, pass-by-reference

我对将数组作为参数传递给函数有疑问，我的代码如下，

```
 #include <stdio.h>
  #include <string.h>

  void str_cpy(char a[], char b[])
  {
     a = b;
     printf("%s\n", a);
  }

  int main()
  {
     char a[] = "hello";
     char b[] = "world";

     str_cpy(a, b);
     printf ("%s\n", a);
     return 0;
  } 
```

在上面的代码中，我将数组传递给函数是通过引用传递的，所以它应该在主函数中打印“world”，因为我在函数定义中将 b 的值分配给 a 即 a = b 但它不是，所以请帮忙我 ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:04:36.823

当您将数组传递给函数时。它衰减为指向数组第一个元素的指针。

您的函数`str_cpy()`仅将传递的指针指向`a`另一个指针`b`。它不会修改原始字符数组的内容`a`。请注意指针`a`，并且`b`是函数的本地指针。

另外，请注意有关数组的基本规则是：
***“数组不可分配，您必须复制数组中的每个元素。”***

您拥有的代码[相当于](http://codepad.org/fY5z0FXN)：

```
 char a[] = "hello";
 char b[] = "world";

 char *ptr1 = a;
 char *ptr2 = b;

 ptr1 = ptr2;

 printf("[%s]",a); 
```

它不会改变原始数组的内容，它只是将一个指向该数组的指针指向另一个数组。

将一个数组的每个元素复制到另一个数组是**[strcpy()](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcpy.html)**提供的功能。您应该简单地使用标准库提供的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:05:18.670

你的`str_cpy()`函数可以写成：

```
void str_cpy(char *a, char *b)
{
    a = b;
    printf("%s\n", a);
} 
```

这在语义上等同于您编写的内容；你写的和我写的在操作上没有区别。数组作为指向数组第一个元素的指针传递。它们是方便地初始化的局部指针变量。在函数的范围内，您`a`指向同一个地方`b`，但这不会影响`main()`程序中的数组。

要在 C 中复制数组，您必须依次复制每个元素：

```
void str_cpy(char *a, char *b)
{
    while ((*a++ = *b++) != '\0')
        ;
    printf("%s\n", a);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:05:24.163

您将其解释为错误的，实际上是`pass by value`.

```
void str_cpy(char a[], char b[]) // it's same as str_cpy(char *a,char *b)
  {
     a = b;
     printf("%s\n", a); // here it will print "world" because it's a local
              // change in a but actually in main a still contains "hello"
  } 
```

由于您正在使用`<string.h>`，您可以直接使用`strcpy(a,b);`

或者，尝试这样的方法将字符一个字符地复制到目标数组中。

```
str_cpy(char *a,char *b)
{
 while(*b != '\0')
  {
  *a=*b;
  a++;
  b++;
  }
} 
```

但是如果数组`a`没有足够的空间来保存复制的字符，这可能是个问题。

# android - 日期选择器选择一周中的哪一天

> ID：13966839
> 
> 赞同：5
> 
> 时间：2012-12-20T07:00:35.760
> 
> 标签：android

我的应用程序中有日期选择器，它运行良好。但我需要选择星期几而不是日期（即，如果我选择日期 23，我需要得到像“星期五”这样的日期而不是数字）。我用于`OnDateSetListener`点击事件。

```
 private DatePickerDialog.OnDateSetListener datePickerListener = new         DatePickerDialog.OnDateSetListener() 
{       
    public void onDateSet(DatePicker view, int selectedYear,
        int selectedMonth, int selectedDay) 
    {   

               }
       } 
```

`selectedDay`在上面的代码中，我需要字符串中的一天（如星期一（或）星期二..）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T07:05:45.673

使用以下方法更改您的代码以获取星期几`SimpleDateFormat`：

```
private DatePickerDialog.OnDateSetListener 
     datePickerListener = new  DatePickerDialog.OnDateSetListener() 
{       
    public void onDateSet(DatePicker view, int selectedYear,
        int selectedMonth, int selectedDay) 
    {   
      SimpleDateFormat simpledateformat = new SimpleDateFormat("EEEE");
      Date date = new Date(selectedYear, selectedMonth, selectedDay-1);
      String dayOfWeek = simpledateformat.format(date);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:31:55.740

这将为您提供日期名称::

```
SimpleDateFormat sdf = new SimpleDateFormat("EEEE");
            Date d_name = new Date();
            String dayOfTheWeek = sdf.format(d_name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-28T14:46:18.527

不要使用：

```
Date date = new Date(selectedYear, selectedMonth, selectedDay-1); 
```

它已被弃用，在某些情况下会给出错误的输出。检查 2015 年 1 月 28 日和 1940 年 7 月 4 日，两者都是星期四，但星期五返回 1940 年 7 月 4 日。

利用：

```
GregorianCalendar GregorianCalendar = new GregorianCalendar(year, monthOfYear, dayOfMonth-1);

int dayOfWeek=date.get(date.DAY_OF_WEEK); 
```

上述方法将返回一个整数值：

*   1 - 星期一
*   2 - 星期二
*   ...
*   7 - 周日

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-24T09:03:12.160

用这个

```
 GregorianCalendar gregorianCalendar = new GregorianCalendar(year, month,dayOfMonth-1);
int week_number=gregorianCalendar.get(Calendar.DAY_OF_WEEK); 
```

您可以使用 switch case 以文字形式获取工作日。

# gtk - 如何使用在 GTK 中有行的树列表创建树视图？

> ID：13966843
> 
> 赞同：1
> 
> 时间：2012-12-20T07:01:03.637
> 
> 标签：gtk, pygtk, gtktreeview

就 GTK 而言，创建的树是这样的：

![](../Images/8aeed2078462d0c98b16ce8f5ac046ac.png)

这棵树的代码是从[这里](http://learngtk.org/pygtk-tutorial/treestore.html)获得的。

我想要实现的是：

![](../Images/c4d5e43a39782e9210c6dffdabd0e14b.png)

这是来自 Eclipse。大多数程序也有树的线条。这些行对我来说是必要的，因为我的程序将有一棵大树。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:30:39.497

[您可以使用gtk_tree_view_set_enable_tree_lines](http://developer.gnome.org/gtk3/3.2/GtkTreeView.html#gtk-tree-view-set-enable-tree-lines)启用这些虚线。因此，对于 Python，您只需调用

```
treeview.set_enable_tree_lines(True) 
```

# android - Appilcation停止响应，主线程做这么多工作..？

> ID：13966844
> 
> 赞同：-2
> 
> 时间：2012-12-20T07:01:14.343
> 
> 标签：android, crash

我创建了一个应用程序，单击按钮说 [next] 。我正在调用一个方法，该方法的工作是生成 5 个随机数并将它们随机设置为 5 个按钮，单击每个按钮时，它将随机选择一个小（2 秒）音频文件并播放它。如果我单击按钮 [next] 超过 8 次，我的整个应用程序将重新启动。

如果`nextChangeAdd();`一次又一次地调用方法，我的应用程序在 10 次函数调用后停止响应。请给我一些替代品？logcat 也没有显示任何错误

```
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import android.app.Activity;
import android.content.Context;
import android.graphics.Typeface;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class Addition extends Activity{

    TextView addNo1, addNo2;
    Button option1, option2, option3, option4, next;
    Random randomGenerator;
    Integer randomInt1, randomInt2;
    int flag = 0, setans;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.additionactivity);
        addNo1 = (TextView) findViewById(R.id.addNOOne);
        addNo2 = (TextView) findViewById(R.id.addNOTwo);
        option1 = (Button) findViewById(R.id.addoption1);
        option2 = (Button) findViewById(R.id.addoption2);
        option3 = (Button) findViewById(R.id.addoption3);
        option4 = (Button) findViewById(R.id.addoption4);
        next = (Button) findViewById(R.id.addNextBtn);
        next.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                nextChangeAdd();
            }
        });
        randomGenerator = new Random();
        Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/StefanieDots.ttf");
        addNo1.setTypeface(tf);
        nextChangeAdd();

    }

    public void nextChangeAdd() {
        randomInt1 = randomGenerator.nextInt(10);
        randomInt2 = randomGenerator.nextInt(10);
        setans = randomGenerator.nextInt(5);
        if (setans == 0) {
            setans++;
        }
        int ans = randomInt1 + randomInt2;
        String addans = Integer.toString(ans);
        addNo1.setText(randomInt1.toString());
        addNo2.setText(randomInt2.toString());
        List<Integer> generated = new ArrayList<Integer>();
        for (int i = 0; i < 3; i++) {
            while (true) {
                Integer next = randomGenerator.nextInt(19) + 1;
                if (!generated.contains(ans)) {
                    generated.add(next);
                    break;
                }
            }
        }

        switch (setans) {
        case 1:
            flag = 1;
            option1.setText(addans);
            option1.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //rightAns();
                }
            });

            break;
        case 2:
            flag = 2;
            option2.setText(addans);
            option2.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //rightAns();
                }
            });

            break;
        case 3:
            flag = 3;
            option3.setText(addans);
            option3.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //rightAns();
                }
            });
            break;
        case 4:
            flag = 4;
            option4.setText(addans);
            option4.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //rightAns();
                }
            });
                        break;
        }
        String a2 = generated.get(0).toString();
        String a3 = generated.get(1).toString();
        String a4 = generated.get(2).toString();

        if (flag == 1) {
            option2.setText(a2);
            option2.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
            option3.setText(a3);
            option3.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
            option4.setText(a4);
            option4.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
        }
        if (flag == 2) {
            option1.setText(a2);
            option2.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
            option3.setText(a3);
            option3.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
            option4.setText(a4);
            option4.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
        }
        if (flag == 3) {
            option2.setText(a2);
            option2.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
            option1.setText(a3);
            option1.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
            option4.setText(a4);
            option4.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
        }

        if (flag == 4) {
            option2.setText(a2);
            option2.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
            option3.setText(a3);
            option3.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
            option1.setText(a4);
            option1.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    //wrongAns();
                }
            });
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:19:08.127

代码中没有任何内容需要很长时间才能执行，因此 AsyncTask 不是答案。

事实上，这是一个逻辑错误，导致以下无限循环：

```
 while (true) {
     Integer next = randomGenerator.nextInt(19) + 1;
     if (!generated.contains(ans)) {
         generated.add(next);
         break;
     }
 } 
```

如果发生这种情况，即`ans`生成并插入到列表中，则循环将永远不会结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:06:18.960

[使用异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

异步任务由称为 Params、Progress 和 Result 的三种通用类型定义。

**Params**：Params 用于向异步任务发送参数。

**进度**：进度用于在任务进行时将数据从异步任务发送到 UI 线程（主线程）。

**Result** : Result 用于在异步任务执行后将数据从异步任务发送到 UI 线程。

异步任务分四步完成：

**onPreExecute**：启动任务时在 UI 线程上执行的回调方法。

**doInBackground**：在非 UI 线程上执行的回调方法，如果存在则在 onPreExecute 方法之后调用。

**onProgressUpdate**：在 UI 线程上执行的回调方法，由 doInBackground() 方法的 publishProgress() 调用。

**onPostExecute**：在 UI 线程上执行的回调方法，在任务完成后调用。

# iphone - 如何获取 Facebook 帖子 ID？

> ID：13966845
> 
> 赞同：0
> 
> 时间：2012-12-20T07:01:14.543
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我正在制作一个 iPhone 应用程序，其中可以使用 Facebook 帖子共享选项。现在我想显示该帖子的所有喜欢和评论。我知道我们可以通过[http://graph.facebook.com/post_id/comments](http://graph.facebook.com/post_id/comments)做到这一点。现在你能告诉我如何获取`post_id`我的帖子或共享链接吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:55:13.967

当您在 Facebook 上发布任何内容时。在你的

`- (void)request:(FBRequest *)request didLoad:(id)result`

方法你会得到结果..只需打印该结果。如果您使用的是 FB SSO，您将获得 post_id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T18:06:19.390

假设您的应用发布到 me/feed 端点，使用 Facebook SDK 3.1 您可以设置完成处理程序来获取帖子 ID：

```
[FBRequestConnection
 startWithGraphPath:@"me/feed"
 parameters:self.postParams
 HTTPMethod:@"POST"
 completionHandler:^(FBRequestConnection *connection,
                     id result,
                     NSError *error) {
     if (error) {
         // Handle error
     } else {
         NSString *postId = [result objectForKey:@"id"];
     }
 }]; 
```

有关如何发布的示例，请参阅：[https ://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/。](https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)

# c# - Windows Phone 7 调用 ASMX Web 服务

> ID：13966846
> 
> 赞同：3
> 
> 时间：2012-12-20T07:01:16.910
> 
> 标签：c#, web-services, windows-phone-7

我想在 Windows Phone 7 项目中使用 ASMX Web 服务。当我尝试添加 Web 服务引用时，我发现添加服务引用--> 高级中的添加 Web 引用按钮不见了。

当我将它添加为服务参考时，一些 Web 方法丢失了。我们可以将基于 ASMX 的 Web 服务添加到 Windows Phone 7 项目吗？

并在此问题上的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:05:56.140

在 Windows 手机编程中，您可以直接在解决方案资源管理器中右键单击项目名称并选择添加 -> 添加服务引用 - 然后添加您的 asmx 地址。

它应该工作。如果不是，请确保您的地址有效。尝试在浏览器中粘贴相同的内容并检查它是否提供了正确的详细信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T02:34:44.917

几个月前，我在一个 Windows Store 应用程序上找到了答案，这同样适用于 Windows Phone。向 ASMX 服务添加服务引用时，单击高级按钮，然后选择“始终生成消息合同”选项。这将导致服务被正确创建。

但是，当使用此方法时，您的服务类名称末尾将有“Soap”。例如，“MyService”将是“MyServiceSoap”，并且您调用的任何方法的名称末尾都会有“Async”。其他一切都应该像以前一样工作。

# java - JMXTools 源

> ID：13966847
> 
> 赞同：2
> 
> 时间：2012-12-20T07:01:18.347
> 
> 标签：java, jmx

我在使用 jmx 工具时遇到了过期问题（

> 引起：com.sun.jdmk.comm.HtmlAdaptorServer.setParser(HtmlAdaptorServer.java:232) 处的 java.lang.NullPointerException

) 我使用 jmxtools-1.2.1.jar。要调查问题，我需要 jmx 工具源（jmxtools-1.2.1-sources.jar）但我在互联网上找不到这样的=（请帮助我理解 NullPointerException 或下载源

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:53:56.063

这个项目的主站点是[OpenDMK](http://opendmk.java.net)。

他们的源代码在[java.net 的 Subversion 存储库](http://java.net/projects/opendmk/sources/svn/show)中。

[我在这里](https://github.com/nickman/OpenDMK/tree/master/OpenDMK/core/)发布了该子项目的 mavenized 版本。

mavenized 项目中该特定类的源代码在[此处](https://github.com/nickman/OpenDMK/blob/master/OpenDMK/core/src/main/java/com/sun/jdmk/comm/HtmlAdaptorServer.java)。

# security - 更改圆桌会议中的哈希函数值

> ID：13966852
> 
> 赞同：3
> 
> 时间：2012-12-20T07:01:32.480
> 
> 标签：security, hash, sha

假设出于某种原因我想使用 SHA512 作为我的散列函数。假设我也有它的源代码。

SHA512 包含常量表。如果我在此表中到处更改几个值（例如 5）怎么办？

这将如何影响散列函数的可靠性和对攻击的“抵抗力”（它不再是标准算法，攻击者可能不知道轮值已更改）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:26:25.660

SHA512 中的轮常数是随机选择的。（更准确地说，它们是前 64 个素数的立方根的小数部分——这种方法被用来表明这些数字没有隐藏漏洞；具体方法对安全证明并不重要。 )

除非您选择真正退化的值，例如零，否则更改它们应该不会影响算法的安全性。

# javascript - 如何制作平滑导航菜单以向上而不是向下显示子菜单

> ID：13966865
> 
> 赞同：0
> 
> 时间：2012-12-20T07:02:40.060
> 
> 标签：javascript, jquery, css, menu

我在我的 asp.net 项目中使用[平滑导航菜单（v1.51）](http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm)，到目前为止效果很好，我可以更改属性以使其成为垂直或水平菜单。

唯一的问题是我无法改变菜单的方向来打开它`up`。

如果此菜单位于页脚部分，则部分菜单将不会显示，如示例 [http://jsfiddle.net/JjbqA/7/中所示](http://jsfiddle.net/JjbqA/7/)

如何将子菜单的方向更改为`UP`方向而不是向下。

```
ddsmoothmenu.init({
    mainmenuid: "smoothmenu1", //Menu DIV id
    orientation: 'v', //Horizontal or vertical menu: Set to "h" or "v"
    classname: 'ddsmoothmenu', //class added to menu's outer DIV
    //customtheme: ["#804000", "#482400"],
    contentsource: "markup" //"markup" or ["container_id", "path_to_menu_file"]
}) 
```

# qt - 没有细化字体的 Qt 轮廓文本

> ID：13966868
> 
> 赞同：6
> 
> 时间：2012-12-20T07:03:09.817
> 
> 标签：qt, text

我想用 Qt4.8 绘制轮廓文本，但我也想保持字体的原始形状和可见性。目前，轮廓隐藏了文本字符，让它们看起来比原始字符“更薄”。

Qt 使用 QPen 绘制文本字符（和其他形状）的轮廓。QPen 在角色的实际边缘上移动并在边缘线的外部和**内部**绘制（参见 QPen 参考中的“连接样式”）。

如果您使用较粗的笔，则文本字符看起来更细，而轮廓所占用的字符总面积会增加。换句话说，轮廓侵蚀到文本字符中。

我想让文本字符保持其原始形状和可见性，同时从轮廓中获得“光环效果”。即，我只想画边缘线的外侧。

用 Qt 实现这种效果的最简单方法是什么？我想出了一些想法，但我想知道它们中的任何一个是否可能。

计划 A。

绘制带轮廓的文本，然后在轮廓上绘制相同的没有轮廓的文本。

不幸的是，QTextCursor 不支持“过度绘制”或“过度打字”，您可以使用经典打字机来做到这一点。也会有性能损失。

B计划。

修改 Qt 库，使其先用 QPen 绘制轮廓，然后用 QBrush 填充内部。QBrush 会在轮廓的内侧部分进行绘制，而只保留外侧完整的部分。

我不确定它是否有效，如果可能的话，我想避免修改 Qt 库。

C计划。

将用于绘制文本的 QPainter 的“CompositionMode”暂时切换为“QPainter::CompositionMode_DestinationOver”。

为此，我认为我需要控制 Qt 的文本操作小部件（如 QTextBrowser）创建和使用的私有和临时 QPainter，但我不知道如何做到这一点。

我是 Qt 编程新手，我在 X 窗口上使用 Qt 4.8.2。

您可以通过将以下代码行（第 156-164 行）添加到 /usr/lib64/qt4/examples/richtext/calendar/mainwindow.cpp，编译并运行它，并将字体大小增加到 40 或更大来查看我的问题。

```
 QTextCharFormat format = cursor.charFormat();
 format.setFontPointSize(fontSize);

 QTextCharFormat boldFormat = format;
 boldFormat.setFontWeight(QFont::Bold);

 // Additional code lines for green outline : line 156
 QPen    pen;
 pen.setStyle(Qt::SolidLine);
 pen.setWidthF(4);
 pen.setBrush(Qt::green);
 pen.setCapStyle(Qt::RoundCap);
 pen.setJoinStyle(Qt::RoundJoin);
 boldFormat.setTextOutline(pen);
 // The end of the additional code : line 164 
```

如果您能告诉我要走的路并给我初步线索，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-07T23:39:29.580

我找到了一种方法，如何为`QGraphicsView`文本对象进行这样的概述。我认为，您可以将它用于任何基于`QTextDocument`(`QTextEdit`例如) 的类。我创建了一个基于`QGraphicsTextItem`并重新实现其`paint`功能的类：

```
void paint (QPainter * painter, const QStyleOptionGraphicsItem * option, QWidget * widget)
{ QTextCharFormat format;
  format.setTextOutline (QPen (Qt::white, 3, Qt::SolidLine, Qt::RoundCap, Qt::RoundJoin)); // Color and width of outline
  QTextCursor cursor (this->document());
  cursor.select (QTextCursor::Document);
  cursor.mergeCharFormat (format);
  QGraphicsTextItem::paint (painter, option, widget);
  format.setTextOutline (QPen (Qt::transparent));
  cursor.mergeCharFormat (format);
  QGraphicsTextItem::paint (painter, option, widget);
} 
```

我注意到此解决方案的唯一错误 - 当您编辑文本并开始选择一些字母时，会发生剪切。但这几乎是不明显的。对于不可编辑的项目，我找不到任何错误。

但是如果你想勾勒`QPushButton`文本（例如），那么它是微不足道的（这个问题已经讨论过很多次了） - 内部重新实现`paintEvent`create `QPainterPath`， call `path.addText`，然后 use `painter.strokePath`，`painter.fillPath`-`strokePath`创建轮廓，并`fillPath`填充前景。

# java - GWT 中的提醒

> ID：13966873
> 
> 赞同：6
> 
> 时间：2012-12-20T07:03:36.213
> 
> 标签：java, gwt

我正在做一个关于*Java*和*GWT*的项目并且卡在一个部分我想创建一个提醒，就像用户输入日期和时间一样，那时应该显示一个弹出窗口来提醒用户他的事件。谁能建议我实现这一目标的任何方法。

当我搜索解决方案时，我在*GWT中发现了一些与***计时器**相关的东西，但我猜计时器有将毫秒作为参数的方法，但将日期和时间转换为毫秒似乎不是解决方案，因此高度赞赏任何其他替代方案。*`schedule()`*

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:39:39.810

你不能只用计时器来处理它。似乎您需要实现一些服务器端逻辑来实现这一点。

1.  *用户为客户端*上的事件选择时间和日期-> 调用*服务器*将其存储在某处（可以是简单的 RPC 或 Ajax 调用）
2.  通知用户可以通过以下几种方式实现：

    *   `Simple polling`- 使用 Ajax 调用从*客户端*询问*服务器*自上次检查后每 N（比方说 10）秒发生了什么事件。服务器需要比较当前时间并将事件列表发送回客户端

    **   `Long poll`或`Hidden Iframe`用于将事件推送到客户端 - 更复杂，但也可以实现* 

 *您还可以查看[GwtEventService](https://code.google.com/p/gwteventservice/)来管理*服务器*和*客户端*之间的事件。

最后，您的逻辑保持简单 -*客户端*需要从*服务器*侦听发生的**事件**并在处理程序中显示弹出对话框。**

# asp.net - MongoDB C# 驱动程序使用 AJAX 通过光标迭代检索 5000 个文档

> ID：13966874
> 
> 赞同：1
> 
> 时间：2012-12-20T07:03:41.010
> 
> 标签：asp.net, performance, mongodb, resultset

我正在开发一个 asp.net Web 应用程序，它应该为用户提供数千张 JPEG 图像。我的专用服务器包含 JPEG 文件并托管 MongoDB 来存储 JPEG 元数据。

```
Sample object in a collection named **JPEG_123** (this collection has 1 million such documents and each document has _id indexed)
{ 
    "_id" : "20121210185015000", //YYYYMMDDhhmmsslll 
    "Url" : "http:...", 
    "CameraId" : 123 
} 
```

我正在使用 Web 方法来查询 MongoDB。我使用正则表达式（例如“^2012121018*/）查询集合**JPEG_123**的 Utc 字段以获取一个小时的文档。它返回 MongoCursor 指向的大约 5000 条记录，在 MongoShell 上它显示检索此数据的时间仅为 3-4 毫秒.

**问**：如何通过 MongoCursor 在 ASP.NET 中以最佳和快速的方式从 MongoDB 迭代获取这些文档？优化使用 LIMIT、BATCHSIZE 和 NEXT 类似 MongoCursor 的属性。

我正在尝试做这样的事情：

*   上面执行 Find Query on MongoDB from ASP.NET
*   最初仅通过网络获取前 500 个文档，并将其余 4500 个文档保留在 RAM 中
*   在 9 次后续迭代中获取该 MongoCursor 中的其余 4500 个文档（每次获取 500）
*   或任何其他加快通过网络发送此数据的过程的可能性

**我的担忧**

1.  当我从 ASP.NET 查询 MongnoDB 时，这是否真的意味着 MongoDB 将所有 5000 条记录加载到 RAM 但不将所有 5000 条记录返回到 ASP.NET？

2.  发出上述查询后，它立即返回 MongoCursor 指向的记录总数。当我遍历 MongoCursor 中的所有文档时，大约需要 20-30 秒。这是否意味着，MongoDB 在应用程序中使用时会返回数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:51:14.533

我发现使用具有大集合大小的游标运行速度非常慢，除非该集合的索引非常好。您应该注意，在大多数情况下，Regex 会排除使用索引，并且您应该尽可能避免使用这些索引。

默认情况下，游标每批返回 101 个文档或 1 MB 数据。如果您可以通过查看集合统计信息来确定平均文档的大小，则可以利用它来设置最佳限制。您还可以在光标对象中使用一些设置来帮助在一定程度上扩展这些限制。

我可能建议的一件事是，因为与读取相比，写入已经很慢，所以将这些 UTC 字符串作为日期字段传递，让 Mongo 为您解析这些字符串。这样，您既可以索引该字段，又可以在查询中使用正常的日期范围比较。

# c# - C# windows 应用程序 - 想要将我的业务和数据层保存在单独的机器中并使用 WCF 访问它

> ID：13966875
> 
> 赞同：5
> 
> 时间：2012-12-20T07:03:47.477
> 
> 标签：c#, wcf

我正在开发一个已经分成多个层（UI、业务和数据层）的 Windows 应用程序。我想将我的业务和数据层保存在单独的机器中，以便用户需要在他的机器上安装 UI 层。使用 WCF Web 服务并通过它访问我的业务层和数据层是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:47:04.307

使用 wcf 是一个绝妙的主意，它会很好地工作，但是随着客户端数量的不断增长，维护软件并使其在多台机器上保持最新将成为一个问题.....如果您在本地网络中工作也许您应该考虑在终端服务器上安装应用程序并通过 rdp 会话进行连接，或者您可以创建 UI 的 Web 版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:07:22.993

其实这取决于...

如果它只是你想移动到用户机器的薄 UI 层，然后用每个用户操作调用你的服务，那么我认为这是一个非常糟糕的主意。因为在这种情况下，用户有一个 Windows 应用程序，它实际上像 Web 应用程序一样响应（当然，如果您考虑通过互联网而不是本地网络进行通信）。因此，如果我是你，我最好创建一个多租户 Web 应用程序，它使用你已经实现的所有业务逻辑。这也将防止您遇到很多版本控制问题，因为您可以完全控制您的 UI 应用程序，这与 Windows 应用程序不同，当您必须处理解决方案的多个版本或至少实施一些错误处理逻辑以使所有用户升级时到更新的版本继续工作。

但是，如果您的应用程序主要是离线工作，并且只有一些真正需要对所有用户通用的逻辑，那么您的选择应该是 WCF。它为您提供了用于在配置级别保护和配置通信通道的所有工具，甚至无需重新构建您的应用程序。还有很多用于绑定和行为配置的内置选项。

希望能帮助到你。

# xaml - 如何在 XAML 中将外部元素与列表视图项的中间对齐？

> ID：13966876
> 
> 赞同：0
> 
> 时间：2012-12-20T07:03:51.433
> 
> 标签：xaml, windows-8

我想做这样的事情-

![在此处输入图像描述](../Images/389770ed06d1f0b517ba7b66cdf50946.png)

标注的中间应与列表视图项的中间对齐。如何找到列表视图项目中间的实际坐标，以便我可以对齐只是一个路径元素的标注？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:08:45.120

你必须做这样的事情：

为 ListView 的选择更改事件创建处理程序。在该句柄中放入以下代码：

```
// step 1\. Get selected item's container (ListViewItem in case of ListView)
var dependencyObject = listView.ItemContainerGenerator.ContainerFromIndex(listView.SelectedIndex);
var listViewItem = dependencyObject as Windows.UI.Xaml.Controls.ListViewItem;

// step 2\. transform items rectangle into coordinates of containing control
var transform = listViewItem.TransformToVisual(parentContainer);
var rect = transform.TransformBounds(new Rect(0, 0, itemsControl.ActualWidth, itemsControl.ActualHeight));
var center = (rect.Top + rect.Bottom) / 2;

// step 3\. position callout using center value calculated above
// exact code depends on you container, ie. Grid, Canvas, etc. 
```

# linux - 在 Linux 中使用 .lib 文件

> ID：13966878
> 
> 赞同：-3
> 
> 时间：2012-12-20T07:04:06.073
> 
> 标签：linux, web-services, .lib

我得到了一个 dukpt.lib 文件和相应的头文件。我必须在 C++ (gSOAP) 中创建一个 Web 服务，它在内部使用来自 dukpt.lib 的方法

dukpt.lib 在内部使用 win api。所以我的问题是：有没有办法让我的网络服务在 linux 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:10:59.317

可能不是。您可能会通过 WINE 以某种方式使用它，但如果这对您来说不是很明显，那么您不太可能让它工作。

# asp.net - 从另一个本地主机网站调用一个本地主机网站时未经授权 (401)

> ID：13966886
> 
> 赞同：0
> 
> 时间：2012-12-20T07:04:46.240
> 
> 标签：asp.net, http-status-code-401

我在运行 IIS 5.1（在本地主机上）的本地系统上设置了两个网站。我正在从另一个网站调用一个网站。我正在使用 ASP.NET、C# 2.0。

```
public static String executeWebRequest(string url, Boolean esmRequest)
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        UTF8Encoding encoding = new UTF8Encoding();
        Stream requestStream = null;
        HttpWebResponse response = null;
        StreamReader responseStream = null;
        string responseString;

        try
        {
            //post request
            request.Method = "POST";

            if (esmRequest)
            {
                //request.UseDefaultCredentials = true;
                request.Credentials = new NetworkCredential(ConfigurationManager.AppSettings["ESMServerUserName"], ConfigurationManager.AppSettings["ESMServerPassword"]);
            }
            else
            {
                //request.UseDefaultCredentials = true;
                request.Credentials = new NetworkCredential(ConfigurationManager.AppSettings["ESMServerUserName"], ConfigurationManager.AppSettings["ESMServerPassword"]);
            }

            requestStream = request.GetRequestStream();
            requestStream.Write(new byte[0], 0, 0);
            requestStream.Close();

            //get response
            response = (HttpWebResponse)request.GetResponse();
            responseStream = new StreamReader(response.GetResponseStream(), encoding);
            responseString = responseStream.ReadToEnd();
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            if (requestStream != null)
            {
                requestStream.Close();
            }

            if (response != null)
            {
                response.Close();
            }

            if (responseStream != null)
            {
                responseStream.Close();
            }
        }

        return responseString;
    }
} 
```

我运行此代码并获得 401 HTTP 状态代码。1 个错误，而当我在浏览器中粘贴相同的 URL 时，它可以完美执行。

我已经使用[http://support.microsoft.com/kb/89686/en-us启用了 DisableLoopbackCheck](http://support.microsoft.com/kb/89686/en-us)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:47:54.693

我能够通过此更改修复它

```
var cache = new CredentialCache();

NetworkCredential credential = new NetworkCredential(ConfigurationManager.AppSettings["ESMServerUserName"], ConfigurationManager.AppSettings["ESMServerPassword"]);

cache.Add(new Uri(url), "Basic", credential);
request.Credentials = cache; 
```

# ruby-on-rails - 如何对非数据库支持的 ActiveModel 模型进行单元测试？

> ID：13966897
> 
> 赞同：0
> 
> 时间：2012-12-20T07:05:33.410
> 
> 标签：ruby-on-rails, unit-testing, testing

我有一个基于 ActiveModel 的类（基于[这个](http://railscasts.com/episodes/219-active-model)RailsCast）：

```
class ShareTransactionWizard
  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming

  attr_accessor :num_issue, :num_for, :type

  validates_presence_of :num_issue, :num_for, :type

  validate :issue_greater_than_for,  if: Proc.new {a | a.type == 'split' }

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  def persisted?
    false
  end

  def issue_greater_than_for
   if !(num_issue > num_for)
      errors.add(:num_issue, "Split must have issued greater than for")
    end
  end
end 
```

还有一个单元测试：

```
require 'test_helper'

class ShareTransactionWizardTest < ActiveSupport::TestCase
  test "Must have :issue greater than :for if type is 'split'" do
    stw = ShareTransactionWizard.new(num_issue: 1, num_for: 10, type: 'split')
    assert !stw.valid?
  end    
end 
```

当我去运行测试时，它说：

```
Error:  
test_Must_have_:issue_greater_than_:for_if_type_is_'split'(ShareTransactionWizardTest)
ActiveRecord::StatementInvalid: Mysql2::Error: Table
'companybox_test.share_transaction_wizards' doesn't exist: DELETE FROM    
`share_transaction_wizards` 
```

如何在不尝试删除不存在表中的记录的情况下运行测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:47:17.267

看起来是因为当我创建模型时，它在fixtures文件夹中放置了一些fixtures。删除这些固定装置会使错误消失。

# axapta - salesLine 价格字段中的四舍五入

> ID：13966899
> 
> 赞同：1
> 
> 时间：2012-12-20T07:05:37.620
> 
> 标签：axapta, dynamics-ax-2012, ax

我需要在销售行、采购行和项目主文件（销售选项卡）的价格字段中显示 5 位小数。我创建了带有 5 个小数位的新 EDT 来替换 salesLine.SalesPrice 和 InventTableModule.Price 字段。但是一旦创建了销售线。SalesPrice 字段中的值四舍五入到小数点后两位。例如，项目主数据中的值为 10.12345，但在销售行上显示为 10.12000。最后 3 位数字消失了。

到目前为止，我从各种帖子/博客中听到了多种方法。

1.  在 RealBase EDT 上将 NoOfDecimals 属性更改为 5，从而有效地更改应用程序中的 Amount 字段。我不想这样做。

2.  在 GL>Setup>Currency>Rounding rules 中更改舍入规则。这些字段不可编辑。

3.  我将 PriceDiscTable.Amount 字段的 EDT 更改为 5 位小数。但没有帮助。我猜我的情况下的 SalesPrice 不是来自贸易协议。

有什么我忽略/遗漏的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:20:25.523

看看 PriceDisc.price() 方法。即使您更改 EDT 中的小数或创建新的 EDT 方法，Dynamics 也会按代码四舍五入价格，无论您是从贸易协议还是从 InventTableModule 价格字段中获取价格。

PriceDisc.price() 方法稍后将调用 Currency.priceTypeRound(...) 方法，将四舍五入为 2 位小数：

```
private Price priceTyperound(Price          _price,
                         PriceRoundOff  _unit)
{
Price   price;
real    decimals;
;

switch (this.RoundOffTypePrice)
{
    case RoundOffType::Ordinary:
        if (_unit)
            price = round(_price, _unit);
        else
            price = round(_price,0.01);
        break;
        (...) 
```

舍入类型取决于汇率表格中最后一个选项卡（舍入）的值。因此，如果您希望小数正常工作，则必须修改更多内容。

我希望这可以帮到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T17:16:19.063

aariste i think you are refering to AX version 2009 since Currency.priceTypeRound method is deprecated in 2012\. But i did find similar methods in Currency table and in a new class called CurrencyExchangeHelper added in 2012\. Sadly, the whole pricing mechanism is too complex and i decided not to meddle with it. Another difference in 2012 is that few methods run in IL so normal debugger cant catch them until you change a setting in Tools called "Execute business operations in IL". I am now forcefully pushing the salesPrice and recalculating the lineAmount overriding the Trade agreements pricing logic. I am totally in favor of increasing the Price Unit as David Lawson suggested instead of code changes. Thank you both for looking into the problem and advising.

# ruby-on-rails - 如何查找记录并创建查询范围

> ID：13966903
> 
> 赞同：0
> 
> 时间：2012-12-20T07:05:49.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两个模型

**艺术家**

```
class Artist < ActiveRecord::Base
   has_many :photos, :as => :photoable, :dependent => :destroy

   def is_approved?
     self.admin_approve == true
   end
end 
```

**照片**

```
 class Photo < ActiveRecord::Base
    belongs_to :photoable, :polymorphic => true
  end 
```

我想找到（艺术家照片）admin_approve 为真的照片。我如何为此编写查询和范围。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:47:48.607

@jdoe，谢谢，但我按照以下方式完成了

```
class Photo < ActiveRecord::Base
  belongs_to :photoable, :polymorphic => true
    ...
  scope :approve_artists_photo, joins("Inner Join artists on artists.id = photos.photoable_id AND photos.photoable_type = 'Artist'").where("artists.admin_approved = 1")
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T07:17:43.757

您可以添加范围

```
class Artist < ActiveRecord::Base
   has_many :photos, :as => :photoable, :dependent => :destroy

   scope :approved, where(:admin_approve => true)

   def is_approved?
     self.admin_approve == true
   end
end 
```

然后将照片作为

```
Artist.approved.photos 
```

# android - android中的ViewPager正在全屏显示？

> ID：13966904
> 
> 赞同：13
> 
> 时间：2012-12-20T07:05:50.603
> 
> 标签：android, android-layout, android-viewpager

在我的 xml 文件中，我有一个线性布局，其中有一个 ViewPager 用于显示图像，另一个线性布局包含用于选择图像的上一个和下一个按钮。我的 xml 如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/goto_first"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="first" >
            </Button>

            <Button
                android:id="@+id/goto_last"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="last" >
            </Button>
        </LinearLayout>

    </LinearLayout> 
```

我的问题是 ViewPager 正在全屏显示，并且带有上一个下一个按钮的 Linearlayout 没有显示，因为没有空间来绘制这个 LinearLayout。

我正在使用 Fragments 用视图填充 ViewPager。进入 ViewPager 的片段视图的 xml 文件是：

```
<ImageView
    android:id="@+id/ItemImage"
    android:layout_width="320dp"
    android:layout_height="180dp" />

<TextView
    android:id="@+id/ItemText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="left|bottom"
    android:layout_marginBottom="5dp"
    android:textColor="#ffffffff"
    android:textStyle="bold" />
</FrameLayout> 
```

**渲染后我得到的输出是这样的：**
1.image （覆盖 45% 屏幕高度）
2.blank space（覆盖 45% 屏幕高度）
3.Textview（覆盖 10% 屏幕高度的其余部分）

**我想要的输出是：**
1.image （覆盖 45% 屏幕高度）
2.Textview（覆盖 10% 屏幕高度）
3.LinearLayout for Buttons（覆盖其余 45% 屏幕高度）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-07-21T19:16:18.780

使用相对布局。使用 将按钮添加到底部`alignParentBottom="true"`。然后添加 ViewPager`layout_above="@id/buttons"`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-02T20:52:59.340

把那些给viewpager：

```
 android:layout_height="0dp"
 android:layout_weight="1" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-02T19:50:25.760

viewpagers 的问题是他们不知道大小，因为每个片段可能是不同的大小。您必须手动设置 viewpager，而不是 wrap_content。我建议为外部线性布局中的所有项目设置权重。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-16T08:26:44.607

只需使用RelativeLayout 并使用像`

> 机器人：layout_below

直到你达到你想要的位置。在这些情况下，相对布局是您的朋友。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-04T21:52:20.700

就我而言，此代码有效：

```
<androidx.viewpager.widget.ViewPager
    android:id="@+id/myviewpager"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-12T16:05:40.020

我在实施 ap 时遇到了这个问题。对于将图像填充到 ViewPager 中，请使用**RelativeLayout**而不是**FrameLayout**。

在我的情况下，FrameLayout 占用了 30% 以上的空白空间。当我使用 RelativeLayout 时，空间已经消失了。

像这样

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent”&gt;
<ImageView
        android:id="@+id/itemImagePager"
        android:layout_width="match_parent"
        android:layout_height=“match_parent"
        android:scaleType="fitCenter" />
<ProgressBar
        android:id="@+id/loading"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true”/>
</RelativeLayout> 
```

希望对你有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-15T12:27:32.287

只需执行以下操作即可为下方或上方的其他视图腾出空间：

```
< android.support.v4.view.ViewPager **android:layout_width**="match_parent" **android:layout_height**="match_parent" **android:layout_weight**="1"/> 
```

此答案取自**Jave**根据以下链接给出的答案发表的评论。

**链接**：“ [Android ViewPager 维度](https://stackoverflow.com/questions/8532307/android-viewpager-dimension?rq=1)”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-25T12:03:19.997

```
public class WrapViewPager extends ViewPager {

    public WrapViewPager(Context context) {
        super(context);
    }

    public WrapViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

        int height = 0;
        for (int i = 0; i < getChildCount(); i++) {
            View child = getChildAt(i);
            child.measure(widthMeasureSpec, View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED));
            int h = child.getMeasuredHeight();
            if (h > height) height = h;
        }

        heightMeasureSpec = MeasureSpec.makeMeasureSpec(height, MeasureSpec.EXACTLY);

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

} 
```

# android - 应用程序为 Facebook 登录配置错误 - 在 util.java 中将 ENABLE_LOG 设置为 true 后未返回 logcat

> ID：13966906
> 
> 赞同：1
> 
> 时间：2012-12-20T07:05:56.063
> 
> 标签：android, facebook

很抱歉问了同样的问题，但我阅读了之前发布的所有主题并尝试了所有建议，但我仍然没有成功。

我也一样：

> 应用程序为 Facebook 登录配置错误。

![截屏](../Images/057ebc1fc857b6962fd78af33c6c26eb.png)

问题看起来和[这里](http://facebook.stackoverflow.com/questions/13049346/android-facebook-login-doesnt-work/13059177#13059177)一样，但是即使在 util.java 中将 ENABLE_LOG 设置为 true，我也无法将 Logcat 打印为红色错误。

我检查了我的 app_id 并复制了[developer.facebook](http://developers.facebook.com)中的哈希键，一切看起来都正确。但我不知道我哪里出错了，而且当我使用没有原生 Facebook 应用程序的应用程序时，我做对了。

但我想使用原生 Facebook 登录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:02:34.443

假设您使用的是最新的 3.0 SDK，请尝试以下两个选项：

选项 1：（Windows）

```
%KEYTOOLPATH%\keytool -exportcert -alias androiddebugkey -keystore %HOMEPATH%\.android\debug.keystore | %OPENSSLPATH%\openssl sha1 -binary | %OPENSSLPATH%\openssl base64 
```

例子：

```
C:\Program Files (x86)\Java\jdk1.7.0_09\bin\keytool" -exportcert -alias androiddebugkey -keystore "C:\Home\.android\debug.keystore" | "C:\OpenSSL\bin\openssl" sha1 -binary | "C:\OpenSSL\bin\openssl" base64 
```

使用密码：android

选项 2：（打印发送到 FB 的密钥哈希）

（[适用于 Android 的 Facebook SDK 的变体 - 示例应用程序不起作用](https://stackoverflow.com/questions/4424492/facebook-sdk-for-android-example-app-wont-work)）

将此代码添加到您的活动中：

```
 try {
        PackageInfo info = getPackageManager().getPackageInfo("your package name, e.g. com.yourcompany.yourapp]", PackageManager.GET_SIGNATURES);
        for (Signature signature : info.signatures) {
            MessageDigest md = MessageDigest.getInstance("SHA");
            md.update(signature.toByteArray());
            Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
            }
    } catch (NameNotFoundException e) {

    } catch (NoSuchAlgorithmException e) {

    } 
```

示例：在 HelloFacebookSampleActivity 中，对 onCreate() 方法进行如下临时修改

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {
        PackageInfo info = getPackageManager().getPackageInfo("com.facebook.samples.hellofacebook", PackageManager.GET_SIGNATURES);
        for (Signature signature : info.signatures) {
            MessageDigest md = MessageDigest.getInstance("SHA");
            md.update(signature.toByteArray());
            Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
            }
    } catch (NameNotFoundException e) {

    } catch (NoSuchAlgorithmException e) {

    }

    ...
} 
```

运行您的示例，您应该在 KeyHash 标记上获得 logcat 输出，类似于：

```
12-20 10:47:37.747: D/KeyHash:(936): 478uEnKQV+fMQT8Dy4AKvHkYibo= 
```

在 Facebook 的 App Dashboard 设置中为您的应用使用该值。

# jquery - 带有 jQ uery 问题的 Angular JS

> ID：13966909
> 
> 赞同：0
> 
> 时间：2012-12-20T07:05:59.107
> 
> 标签：jquery, angularjs, javascript-framework

我在我的 Ruby on Rails 应用程序中使用 Angular JS - v1.0.3 和 jQuery - 1.7.2。

我的 JS 文件中有实时和绑定事件。JS 绑定没有正确发生。

```
jQuery(id).live("click", function(){ alert('test');}); 
```

如果我在我的 chrome 控制台中再次定义事件，即使那样绑定也不会发生。但如果我这样做

```
jQuery(id).click(function(){ alert('test');}); 
```

然后发生绑定。谁能帮我解决这里的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:08:47.290

从 jQuery 1.7 开始不推荐使用 .live() 方法，而是改用 .on() 方法。 [http://api.jquery.com/live/](http://api.jquery.com/live/)

# android - 如何将 onItemClick 和 OnTouchListener 设置到视图

> ID：13966910
> 
> 赞同：0
> 
> 时间：2012-12-20T07:06:00.413
> 
> 标签：android, animation, gesture

我有一个`View`使用`ListAdapter`. 现在我想滑动`View`using `OnTouchListener`，但只要我触摸`View`，该`onItemClickListener`方法就会被触发。

我尝试同时添加`OnTouchListener`和`onItemClickListener`，`View`但`OnTouchListner`似乎只是被解雇了。请帮助我，以便我可以滑动整个`View`，并且能够通过`View`点击添加项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:11:01.313

我认为单击不起作用，只会触发触摸事件。您可以尝试长按触摸或查看下面的链接

[不能同时处理点击和触摸事件](https://stackoverflow.com/questions/5159366/cant-handle-both-click-and-touch-events-simultaneously)

或者看看[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)或[Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

# javascript - mouseenter 和 click 事件可以同时存在吗？

> ID：13966914
> 
> 赞同：5
> 
> 时间：2012-12-20T07:06:10.010
> 
> 标签：javascript

我想知道 mouseenter 和 click 事件是否可以一起存在，并且在检查时它们都可以存在为 TRUE：

```
if ((evt.type === 'mouseenter') && (evt.type === 'click')) 
```

这是因为当我将鼠标悬停在链接上时，mouseenter 会触发（设置为 TRUE），即使我单击它，仍然会显示悬停。可能它们可以一起存在，但我不是这方面的专家。

如果有人可以提供见解，我将不胜感激。

另外，如何在 mouseenter 事件期间触发单击事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:10:40.453

`mouseenter`当鼠标进入控件时触发该事件。单击鼠标时会触发单击事件。它们是两个独立的事件，它们调用两个独立的事件处理程序。如果您在鼠标进入元素时单击它们，它们将在很短的时间跨度内相互调用，但它们仍然是两个不同的事件。

区分事件`mouseenter`和`mouseover`事件也很重要。`mouseenter`当鼠标物理进入元素时触发，而`mouseover`当鼠标停留在元素上方时会持续触发。

虽然您本身无法触发 click 事件，但您可以调用 click 事件处理程序调用的相同函数。例如，如果你有这个：

```
var myfunc = function (e) { ... }
document.getElementById("id").onclick = myfunc; 
```

然后你可以简单地`myfunc`直接调用，你会得到与单击鼠标相同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-28T22:44:58.660

它们可以 100% 一起存在，这是一个很好的问题，没有很好的答案...当您在移动设备上时，点击时会引发 mouseenter 事件...如果您还检测到 onclick 和 mouseenter ，那么移动设备和台式机之间就会存在差异。

目前解决这么小的问题有点困难。

```
const x = document.getElementById('some_node')
x.onclick=(e)=>{
  e.stopPropagation()
  // this logic will be triggered on click for both desktop and mobile
}
x.onmouseenter=(e)=>{
  e.stopPropagation()
  // this logic will be triggered on click for mobile only (but will
  //have already been triggered on desktop when cursor entered node)
} 
```

我为此提出的唯一解决方法，我认为它非常聪明，是使用事件监听器进行点击/触摸。触发这些事件的顺序/优先级为：touch > mouseenter > click。

由于首先触发了触摸事件，因此您可以添加一个触摸事件侦听器（它只会在移动设备上注册），并更改一个防止触发 mouseenter 事件的变量（这是通常与onclick 逻辑）...像这样：

```
let isMobile = false
x.addEventListener('touchstart',(e)=>{
  isMobile = true
}, false); 
```

然后你的 mouseenter 需要看起来像这样：

```
x.onmouseenter=(e)=>{
  e.stopPropagation()
  if(!isMobile){
    // this logic will no longer cause a conflict between desktop and mobile
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:18:20.540

对于第一个问题，我想你得到了答案......

但是，对于*也如何在 mouseenter 事件期间触发单击事件？*

你可以使用`trigger()`功能..

[http://jsfiddle.net/PDhBW/2/](http://jsfiddle.net/PDhBW/2/)

如果你想阅读更多关于`trigger` 这里的链接

[http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:10:11.600

它们可以存在于同一个对象上，例如一个具有悬停状态的按钮，然后是一个单击动作。click 事件，虽然只会读取 click 事件，因为 enter 事件实际上发生得更早。

您可以创建一个类似的 var，`mouseIsOver`并在 enter 事件触发时将其设置为 true。我可以放心地假设，尽管如果发生点击，鼠标会在同一个目标上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T07:10:19.900

这两个事件可能同时发生，但它们仍将在另一个之后处理。因此，`if`您发布的内容将永远不会评估为`true`.

如果您再次查看您的代码，您会发现它没有意义。一个东西怎么可能同时是 X 和 Y？它不能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-03T16:07:36.050

使用 Jquery 事件委托，您可以一次使用绑定多个事件

```
$('#IdElement').on('mouseenter click', function () {
    //Your Code
}); 
```

[http://jqfundamentals.com/chapter/events](http://jqfundamentals.com/chapter/events)

# iphone - 滚动 UITableview 应用程序会崩溃？

> ID：13966916
> 
> 赞同：0
> 
> 时间：2012-12-20T07:06:13.147
> 
> 标签：iphone, objective-c, uitableview, scroll

在我的应用程序中，我正在使用`UITableview`. 在那个 TableView 中，我正在显示一个包含字典的数组。TableView 的最后一行包含一个按钮，指示用户加载更多事件。如果用户单击按钮，我们需要从服务中获取数据并将数据加载到`UITableview`.

为此，我试图像下面的代码一样实现它：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section**
{
    if (ifMore)
    {
        return [totalArray count];
    }
    else
    {
        return [tableArray count];
    }
    return 0;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    int count =[tableArray count];
    if (ifMore)
    {
        count= [totalArray count];
    }

    if (indexPath.row==count-1)
    { 
        return 96;
    } 

    return 56;
} 
```

行索引方法的单元格是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
     static NSString *CellIdentifier = @"Cell";

     TableCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

     cell = [[TableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

     NSMutableDictionary *dict=[[NSMutableDictionary alloc]init];

     if (ifMore) 
     {               
         dict=[totalArray objectAtIndex:indexPath.row];   
     }
     else
     {
         dict =[tableArray objectAtIndex:indexPath.row];
     }

     cell.hostLabel.text=[dict objectForKey:@"Event_Name"];

     cell.startTime.text=[dict objectForKey:@"Event_Startdate"]; 

     cell.endTime.text=  [dict objectForKey:@"Event_Enddate"]; 

     cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;

     int count=[tableArray count];

     if(ifMore)
     {
         count=[totalArray count];
     }
     if (indexPath.row==count-1)
     {
         [cell.contentView addSubview:moreBtn];   
     }
     return cell;  
} 
```

我正在使用这样的代码。现在我的主要问题是当我正常加载数据时，加载滚动时不会出现任何问题。它完美地工作。但是当我单击 TableView 单元格中的按钮并从服务中获取数据并重新加载数据时。它工作正常。但是当我滚动它时它崩溃了。我被这个困住了。

崩溃消息是：

```
2012-12-20 12:22:49.312 IAGDapp[3215:15e03] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 4 beyond bounds [0 .. 3]'
*** First throw call stack:
(0x4b5052 0x21c7d0a 0x4a1db8 0x2b9e6 0x2b7d2 0xc80a57 0xc80b92 0xc8669e 0x7402db 0x7401af 0x489966 0x489407 0x3ec7c0 0x3ebdb4 0x3ebccb 0x1f6b879 0x1f6b93e 0xc2ba9b 0x28e0 0x2105 0x1)
terminate called throwing an exceptionsharedlibrary apply-load-rules all
kill 
```

你能帮我找出错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:24:43.023

在这里，当您单击`UIButton`此处之后的单元格时，您会从服务中获取另一个数据，并且在您想将此数据加载到同一个表中之后，请按照此步骤操作。

1.  首先，当您获取数据时，然后将此数据添加到您的 tableArray 和 totalArray 中。

2.  在重新加载表之后。

它的崩溃是因为这里 numberOfRows 和其他方法都没有找到这个新的更新数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:09:28.923

我同意帕拉斯的观点。我看不到您将数据提取到数组中的部分，但如果您忽略正确重新加载数据/从错误的数组/设置`ifMore`变量中获取数据，您的应用程序将崩溃。首先，您应该检查它们。如果您认为没有问题，请在里面设置一个断点`numberOfRowsInSection`，看看为什么它会在您想要 4+ 个单元格的地方返回 4。

但实际上，我认为您不需要`ifMore`为此目的使用两个不同的数组和变量。有一个数组，在获取数据后更新它，重新加载表并删除 totalArray 和所有带有`ifMore`变量的 if 语句。简单可能有助于稳定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:40:41.970

似乎 ifMore 变量没有像您预期的那样工作。由于错误日志是 **index 4 beyond bounds [0 .. 3]**，很明显，tableview 的数据源仅包含 3 个元素，但您在 numberOfRowsInSection 中返回的计数为 4。

作为替代解决方案，如果您希望“*更多”*按钮始终作为数据源中的最后一行，为什么不能使用单个数组来完成。只需在方法中返回`tableArray.count + 1`（更多按钮）`numberOfRowsInSection`。在`cellForRowAtIndexPath`中，检查索引是否高于`tableArray.count`，然后创建按钮。`heightForRowAtIndex`方法也一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:15:59.307

问题是你的循环。

```
if (indexPath.row==count-1) 
{

return 96;

} 
```

您的数组计数为 4，您正在尝试在 tableview 中加载 96 行。因此，您的应用程序正在崩溃。

问题是不滚动 UITableView。问题是在表中加载数组。

# java - 在 Java 中处理音频

> ID：13966918
> 
> 赞同：2
> 
> 时间：2012-12-20T07:06:15.847
> 
> 标签：java, audio, javasound, mixer

我浏览了 Java 的声音教程，但不知何故，它对于初学者来说太复杂了。
就[在这里](http://docs.oracle.com/javase/tutorial/sound/accessing.html)
我的目标是：

*   检测所有音频输入和输出设备*   让用户选择音频**输入**设备*   捕捉用户所说的*   输出到**默认**的音频输出设备

现在我该怎么做呢？
有没有更好的教程？
**我试过的：**

```
import javax.sound.sampled.*;
public class SoundTrial {
    public static void main(String[] args) {
        Mixer.Info[] info = AudioSystem.getMixerInfo();
        int i =0;
        for(Mixer.Info print : info){

            System.out.println("Name: "+ i + " " + print.getName());
            i++;
        }
    }
} 
```

**输出：**

```
Name: 0 Primary Sound Driver
Name: 1 Speakers and Headphones (IDT High Definition Audio CODEC)
Name: 2 Independent Headphones (IDT High Definition Audio CODEC
Name: 3 SPDIF (Digital Out via HP Dock) (IDT High Definition Audio CODEC)
Name: 4 Primary Sound Capture Driver
Name: 5 Integrated Microphone Array (ID
Name: 6 Microphone (IDT High Definition
Name: 7 Stereo Mix (IDT High Definition
Name: 8 Port Speakers and Headphones (IDT Hi
Name: 9 Port SPDIF (Digital Out via HP Dock)
Name: 10 Port Integrated Microphone Array (ID
Name: 11 Port Microphone (IDT High Definition
Name: 12 Port Stereo Mix (IDT High Definition
Name: 13 Port Independent Headphones (IDT Hi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:24:27.383

此代码可能会对您有所帮助。请注意，这取自此链接：[音频视频](http://www.java2s.com/Code/Java/2D-Graphics-GUI/CaptureaudioorvideothroughdevicesconnectedtothePC.htm)。我发现使用谷歌搜索，我只是在这里发布代码以防链接变得过时。

```
导入 javax.media.*；
导入 javax.media.format.*；
导入 javax.media.protocol.*；
导入 java.util.*；

/************************************************* ******************************
 * 一个简单的应用程序，允许用户通过设备捕获音频或视频
 * 连接到电脑。通过命令行参数，用户指定是否
 * 音频（-a）或视频（-v）捕获，捕获的持续时间（-d）在
 * 秒，以及将媒体写入的文件 (-f)。
 *
 * 如果它提供控制，应用程序将更加有用和通用
 * 捕获的音频和视频的格式以及内容类型
 * 的输出。
 *
 * 该类搜索支持特定默认值的捕获设备
 * 轨道格式：音频为线性，视频为 Cinepak。作为后备二
 * 设备名称被硬编码到应用程序中，作为如何
 * 当设备名称已知时获取 DeviceInfo。用户可以强制
 * 应用程序通过使用 -k（已知设备）标志来使用这些名称。
 *
 * 该类是静态的，但使用了较早的 Location2Location 示例
 * 执行所有 Processor 和 DataSink 相关的工作。因此应用
 * 主要涉及 CaptureDevice 相关操作。
 *
 * @作者迈克尔（斯派克）巴洛
 ****************************************************** ******************************/
公共类 SimpleRecorder {

  ///////////////////////////////////////// ///////////
  // 音频和视频捕获设备的名称
  // 作者的系统。这些将因系统而异，但
  // 仅用作后备。
  ///////////////////////////////////////// ///////////
  私有静态最终字符串 AUDIO_DEVICE_NAME = "DirectSoundCapture";

  private static final String VIDEO_DEVICE_NAME = "vfw:Microsoft WDM Image Capture:0";

  ///////////////////////////////////////// /////////
  // 将输出写入的文件的默认名称 for
  // 用户不提供它们的情况。
  ///////////////////////////////////////// ////////
  私有静态最终字符串 DEFAULT_AUDIO_NAME = "file://./captured.wav";

  私有静态最终字符串 DEFAULT_VIDEO_NAME = "file://./captured.avi";

  ////////////////////////////////////
  // 用户请求的捕获类型。
  ///////////////////////////////////
  私有静态最终字符串音频=“音频”；

  私有静态最终字符串 VIDEO = "视频";

  private static final String BOTH = "音频和视频";

  ///////////////////////////////////////// /////////////////
  // 特定应用程序唯一的音频和视频格式
  // 支持。更好的程序将允许用户选择格式
  // 但会增长到超过小的示例大小。
  ///////////////////////////////////////// /////////////////
  私有静态最终格式 AUDIO_FORMAT = new AudioFormat(
      音频格式.LINEAR);

  私有静态最终格式 VIDEO_FORMAT = new VideoFormat(
      视频格式.CINEPAK);

  公共静态无效主要（字符串[]参数）{

    ///////////////////////////////////////// ////
    // 处理对象的处理和下沉
    // 从设备捕获的数据。
    ///////////////////////////////////////// ////
    Location2位置捕获；

    ////////////////////////////////
    // 音频和视频捕获设备。
    ///////////////////////////////
    CaptureDeviceInfo audioDevice = null;
    CaptureDeviceInfo videoDevice = null;

    ///////////////////////////////////////// ///////////
    // 捕获设备的“位置”加上名称和位置
    // 目的地。
    ///////////////////////////////////////// ///////////
    MediaLocator captureLocation = null;
    MediaLocator 目的地位置；
    字符串目的地名称=空；

    ///////////////////////////////////////// //////////
    // 处理器（在 Location2Location 中）必须匹配的格式。
    ///////////////////////////////////////// //////////
    格式 [] 格式 = 新格式 [1];

    ///////////////////////////////////////
    // 音频或视频捕获的内容类型。
    //////////////////////////////////////
    ContentDescriptor audioContainer = new ContentDescriptor(
        文件类型描述符.WAVE);
    ContentDescriptor videoContainer = new ContentDescriptor(
        文件类型描述符.MSVIDEO);
    ContentDescriptor 容器 = null;

    ///////////////////////////////////////// /////////////////
    // 记录的持续时间（以秒为单位）和之后等待的时间
    ///////////////////////////////////////// ////////////////
    双倍持续时间 = 10；
    诠释等待= 0；

    ///////////////////////
    // 音频或视频捕获？
    ///////////////////////
    选择的字符串 = 音频；

    ///////////////////////////////////////// //////
    // 支持相关格式的所有设备。
    // 一种“确保”程序在不同环境下工作的方法
    // 具有不同捕获设备的机器。
    ///////////////////////////////////////// //////
    矢量设备；

    ///////////////////////////////////////// ////////
    // 是否搜索支持的采集设备
    // 格式化或使用名字已经存在的设备
    // 应用程序已知。
    ///////////////////////////////////////// ////////
    boolean useKnownDevices = false;

    ///////////////////////////////////////// ///////
    // 处理有关音频或视频的命令行选项，
    // 持续时间和要保存到的文件。
    ///////////////////////////////////////// ///////
    for (int i = 0; i 0 && !useKnownDevices) {
        audioDevice = (CaptureDeviceInfo) devices.elementAt(0);
      } 别的
        audioDevice = CaptureDeviceManager.getDevice(AUDIO_DEVICE_NAME);
      if (audioDevice == null) {
        System.out.println("找不到合适的音频设备。正在退出");
        System.exit(1);
      }
      captureLocation = audioDevice.getLocator();
      格式[0] = 音频格式；
      if (destinationName == null)
        目的地名称 = DEFAULT_AUDIO_NAME；
      容器 = 音频容器；
    }
    ///////////////////////////////////////// ///////////////
    // 执行视频捕获设置。包括寻找合适的
    // 设备，获取其 MediaLocator 并设置内容
    // 类型。
    ///////////////////////////////////////// //////////////
    else if (selected.equals(VIDEO)) {
      设备 = CaptureDeviceManager.getDeviceList(VIDEO_FORMAT);
      if (devices.size() > 0 && !useKnownDevices)
        videoDevice = (CaptureDeviceInfo) devices.elementAt(0);
      别的
        videoDevice = CaptureDeviceManager.getDevice(VIDEO_DEVICE_NAME);
      if (videoDevice == null) {
        System.out.println("找不到合适的视频设备。正在退出");
        System.exit(1);
      }
      captureLocation = videoDevice.getLocator();
      格式[0] = VIDEO_FORMAT；
      if (destinationName == null)
        目的地名称 = DEFAULT_VIDEO_NAME；
      容器 = 视频容器；
    } else if (selected.equals(BOTH)) {
      捕获位置=空；
      格式=新格式[2]；
      格式[0] = 音频格式；
      格式[1] = VIDEO_FORMAT；
      容器 = 视频容器；
      if (destinationName == null)
        目的地名称 = DEFAULT_VIDEO_NAME；
    }

    ///////////////////////////////////////// /////////////////
    // 执行所有必要的处理器和数据接收器准备通过
    // Location2Location 类。
    ///////////////////////////////////////// /////////////////
    目的地位置 = 新媒体定位器（目的地名称）；
    System.out.println("正在配置捕获。请稍候。");
    捕获 = 新 Location2Location（捕获位置，目标位置，
        格式，容器，1.0）；

    ///////////////////////////////////////// ////////////////////////
    // 开始录制并告诉用户。指定长度
    // 记录。然后等待最多 4 倍的持续时间
    // 记录
    //（可能需要更长的时间来接收/写入数据，所以应该稍等一下）。
    ///////////////////////////////////////// ////////////////////////
    System.out.println("开始录制" + 持续时间 + " 秒数 "
        + 选定 + " ...");
    capture.setStopTime(new Time(duration));
    如果（等待 == 0）
      waitFor = (int) (4000 * 持续时间);
    别的
      等待 *= 1000;
    int 等待 = capture.transfer(waitFor);

    ///////////////////////////////////////// ///////
    // 报告录制成功（或其他）。
    ///////////////////////////////////////// ///////
    int state = capture.getState();
    如果（状态 == Location2Location.FINISHED）
      System.out.println(选中
          +“大约捕获成功”
          + ((int) ((等待 + 500) / 1000))
          + " 秒。数据写入 " + destinationName);
    否则如果（状态 == Location2Location.FAILED）
      System.out.println(选中
          +“大约在大约之后捕获失败”
          + ((int) ((等待 + 500) / 1000)) + "秒");
    别的 {
      System.out.println(选中
          +“大约在大约之后捕获仍在进行中”
          + ((int) ((等待 + 500) / 1000)) + "秒");
      System.out.println("进程可能失败");
    }

    System.exit(0);
  }
}

```

# vb.net - 禁用下一个按钮，直到加载所有方法

> ID：13966921
> 
> 赞同：0
> 
> 时间：2012-12-20T07:06:33.347
> 
> 标签：vb.net

net，我的页面加载中有一些方法。我的页面有上一个和下一个按钮。在这里，我想禁用下一个按钮，直到所有方法都成功加载。

在我的情况下，发生的事情是用户在成功加载所有方法之前单击下一步按钮并且他收到错误。因为下一页应该仅基于当前页面方法加载。

我没有使用ajax。在加载所有方法之前，有没有其他方法可以禁用下一个按钮？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:48:56.693

您需要在禁用按钮的情况下启动页面，然后在加载所有方法后激活它。

# widget - wordpress widgetlogic条件逻辑不适用于帖子页面

> ID：13966923
> 
> 赞同：1
> 
> 时间：2012-12-20T07:06:39.900
> 
> 标签：widget, wordpress, wordpress-theming

我只是在 wordpress 211 主题下开发一个主题。在那个主题中，我安装了[小部件逻辑](http://wordpress.org/extend/plugins/widget-logic/)插件以在不同页面上显示不同的小部件。但是当我想在帖子页面中显示一些小部件并为小部件逻辑制作条件标签时，小部件不会显示在帖子页面中。我已经尝试过一些像这样的条件标签

```
is_page('Blog')
is_page('246') // As 246 is the page id of my post page. 
```

我尝试了所有这些，但仍然没有显示。

我也试过`wp_reset_query();`我的functions.php文件。但没有运气。

**更新**

为了使博客页面作为我的帖子页面，我在 wordpress 中进行了更改`settings >> Reading >> A static page >> Post page -> Blog`

那么有人可以帮我解决这个问题吗？我已经花了一天的时间来解决这个问题。任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:30:53.057

尝试`is_page(246)`不带引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:13:35.140

只需在您的小部件条件下尝试此操作

```
is_home(Blog) 
```

这是链接[http://wordpress.org/extend/plugins/widget-logic/other_notes/](http://wordpress.org/extend/plugins/widget-logic/other_notes/)

去那里看看`is_home() -- just the main blog page`

# ios - 6.0.1 的基础 SDK 在 Xcode 中不是一个选项吗？

> ID：13966926
> 
> 赞同：1
> 
> 时间：2012-12-20T07:06:46.823
> 
> 标签：ios, xcode, base-sdk

我试图在 Xcode 中将我的项目的基本 SDK 设置为 6.0.1，但是它告诉我 6.0 是最新版本。我有最新版本的 Xcode (4.5.2)，所以我错过了什么吗？谁能告诉我他们的 Xcode 是否可以选择 6.0.1 作为他们的基础 SDK？我问的原因是因为我在尝试向 Apple 提交应用程序后收到了崩溃报告，他们已经在运行 ios 6.0.1 的设备上对其进行了测试。如果有人可以提供帮助，那就太好了。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:35:35.160

我不确定模拟器是否针对次要版本进行了更新。您需要在运行 6.0.1 的设备上运行该应用程序。Xcode 4.5.2 是最新的生产版本，附带 6.0 SDK。Xcode 4.6 Beta 4 是最新的开发者版本，附带 6.1 SDK。

底线是您无法在模拟器中针对 6.0.1 进行测试，您需要在安装了 6.0.1 的设备上进行测试。

要对此进行测试`NSLog`：

```
NSLog(@"iOSVersion = %@", [[UIDevice currentDevice] systemVersion]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:14:47.400

尝试安装 Xcode 4.6 Developer Preview。它在[https://developer.apple.com/xcode/上可用](https://developer.apple.com/xcode/)

# ruby-on-rails - 什么时候可以使用多个设计模型？

> ID：13966929
> 
> 赞同：0
> 
> 时间：2012-12-20T07:07:30.463
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth

什么时候可以使用多个设计模型？

我有 3 种类型的用户 - 用户、供应商和管理员。供应商的字段比用户多，所以我想为他们提供单独的表格。用户可以使用 facebook 注册和登录（供应商不能）。用户和供应商共享相同的登录页面/表单。

我从多个设计模型开始，对如何处理单个登录页面感到困惑，然后在这里阅读了很多关于使用多态关联和 STI 而不是离散模型的内容。我仍然对何时应该使用每种方法以及什么会在这里更好地工作感到困惑......我知道它有点含糊，但任何建议都会很棒，或者任何好的链接..

用户在注册时还填写了一堆额外的字段——即使是通过 facebook。如何跟踪omniauth 登录的这些字段？（我应该为此使用设计还是诸如omniauth身份之类的东西..？）

谢谢你看这个！我是第一次设置身份验证的 Rails 新手，非常感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:56:44.453

根据情况，建议分离或使用单个模型。替代方案：

1.  使用单独的模型，覆盖控制器，所以首先检查用户中的记录是否匹配，如果不匹配，请尝试与供应商
2.  使用单个模型存储用户和供应商，使用布尔值（如果是多态关联则为字符串）检查用户类型，并添加相关模型以存储附加字段

我认为选项＃1更容易但更大，选项＃2有点困难但更短。

此外，将模型分开是一个好主意，因为用户连接到 FB 和供应商没有，它代表了很多差异。

另一方面，使用选项 #2 搜索会更快，因为它只有 1 个查询，并且表会很轻，因为它不包含用户和供应商的特定字段；您还必须考虑这一点才能做出决定。

对于管理员，您可以遵循类似的标准。

看看这个：[https ://github.com/mkdynamic/omniauth-facebook](https://github.com/mkdynamic/omniauth-facebook)

# django - 在tastepie-swagger中，设置文件中“TASTYPIE_SWAGGER_API_MODULE”的值应该是多少？

> ID：13966931
> 
> 赞同：4
> 
> 时间：2012-12-20T07:07:37.747
> 
> 标签：django, tastypie

在，设置文件`tastypie-swagger`中的值应该是什么？`TASTYPIE_SWAGGER_API_MODULE`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:14:28.130

来自[django-tastypie-swagger](https://github.com/minism/django-tastypie-swagger)：

`TASTYPIE_SWAGGER_API_MODULE`在您的设置中定义。它应该是你的[nicepie.api.Api](https://django-tastypie.readthedocs.org/en/latest/api.html)实例的 python 路径：

```
TASTYPIE_SWAGGER_API_MODULE = 'mainsite.urls.api' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T03:52:31.377

就我而言，我将我的 api 实例命名为稍有不同。

在`ProjectName/urls.py`我有：

```
...
v1_api = Api(api_name='v1')
... 
```

这意味着我需要将其放入`settings.py`：

```
TASTYPIE_SWAGGER_API_MODULE = 'ProjectName.urls.v1_api' 
```

# java - 记录休眠查询不起作用

> ID：13966934
> 
> 赞同：2
> 
> 时间：2012-12-20T07:07:55.193
> 
> 标签：java, hibernate, logging, logback

我想使用 logback 日志记录框架记录休眠生成的 sql 查询，但问题是它正在生成日志文件但没有记录与休眠相关的任何内容。

这就是 logback.xml 的样子

```
<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${Project_HOME}\\module\\logs\\module.log</file>
        <append>true</append>
        <rollingPolicy     class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${Project_HOME}\\module\\logs\\module_%d{yyyy-    MM-dd}.%i.log.zip
            </fileNamePattern>
            <maxHistory>10</maxHistory>
            <timeBasedFileNamingAndTriggeringPolicy
                class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>10KB</maxFileSize>

            </timeBasedFileNamingAndTriggeringPolicy>
        </rollingPolicy>
        <encoder>
            <pattern>%date %-5level [%file:%line] - %msg%n
            </pattern>
        </encoder>
    </appender>
<logger name="org.hibernate.SQL">
        <level value="DEBUG" />
        <appender-ref ref="FILE" />
    </logger> 
```

此外，使用相同附加程序的所有其他日志记录工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:11:19.690

我建议你在 hibernate-cfg.xml 中添加一个属性

```
<property name="show_sql">true</property> 
```

希望这会帮助你 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:19:28.870

我建议您稍微更改一下记录器配置：

```
 <logger name="org.hibernate">
        <level value="info"/>
    </logger> 
```

# interpreter - 在 ast-walking 解释器中实现跳转语句

> ID：13966935
> 
> 赞同：4
> 
> 时间：2012-12-20T07:08:01.150
> 
> 标签：interpreter, abstract-syntax-tree, break, goto

在 ast-walking 解释器中，代码是逐个节点执行的。如何实现 goto、break 或 continue 等功能？我停止当前执行并跳转到另一个节点？有没有最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T09:16:13.747

最佳实践是“不要为带有 goto 的语言解释 AST”。

从根本上说，如果语言主要处理标量，则树遍历中的任何类型的不连续都会导致严重的减速。（如果您的语言主要处理复杂值，例如数组语言 APL，则无关紧要）。

您可以期望的最好的结果是预先遍历树并确定 goto 在 AST 中的实际位置，并将其记录在旁边的关联缓存中。然后，当您遇到 goto 时，只需查询缓存而不是搜索树。

但这是通往编译之路的第一步，例如，在执行之前预先计算您所能做的。

# windows-phone-7 - Window Phone 循环依赖

> ID：13966936
> 
> 赞同：0
> 
> 时间：2012-12-20T07:08:00.700
> 
> 标签：windows-phone-7, background-agents

我正在开发窗口电话应用程序。在其中我添加了另一个新项目，即在后台工作的调度代理。我在前台添加了代理的引用，但是当我在代理中添加前景的引用时，它会给出有关循环依赖的消息。我怎么解决这个问题？实际上我想在代理和前台访问本地数据库，但无法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:30:07.973

您可以创建一个新项目，其中包含要在主项目和计划任务之间共享的类，方法是向主项目和计划代理提供该类的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:15:44.413

您可以：

1.  将您的共享代码放入包含代理的库中，并且仅从应用程序中引用该代码，或者
2.  创建一个新的库项目，在其中放置共享代码，并从您的应用程序和代理中引用这个新项目。

正如@entropy 所指出的，在任何一种情况下，您都需要注意，从代理引用的任何代码或任何库都不能包含对[被代理禁止](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202962%28v=vs.105%29.aspx)的 API 的调用。

# mysql - 如何在mysql中选择今天前7天的生日

> ID：13966942
> 
> 赞同：1
> 
> 时间：2012-12-20T07:08:28.370
> 
> 标签：mysql, date

我有日期字段，我查询在 mysql 中选择 7 天之前的生日。

例如，如果

> 出生 = 1986-08-05

如果现在是 2012-07-30 这个查询提醒我。或者

> 出生 = 1986-01-05

如果现在是 2012-12-30 这个查询提醒我。出生是领域`user_table`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T18:06:39.697

如果您想要可重用的代码并希望让您的 SQL 易于阅读和维护，请使用 SQL 函数。生日就是纪念日，所以...

```
DROP FUNCTION IF EXISTS anniversary_after;
DELIMITER $$
CREATE FUNCTION anniversary_after(anydate DATE, after DATE)
RETURNS DATE DETERMINISTIC
BEGIN
  DECLARE anniversary DATE;
  DECLARE years INTEGER;
  SET years = YEAR(after) - YEAR(anydate);
  SET anniversary = DATE_ADD(anydate, INTERVAL years YEAR);
  IF anniversary < after THEN
    SET anniversary = DATE_ADD(anniversary, INTERVAL 1 YEAR);
  END IF;
  RETURN anniversary;
END
$$
DELIMITER ;

DROP FUNCTION IF EXISTS anniversary;
CREATE FUNCTION anniversary(anydate DATE)
RETURNS DATE DETERMINISTIC
RETURN anniversary_after(anydate, CURRENT_DATE()); 
```

显示下一个周年纪念日：

```
SELECT anniversary('1994-04-05'); 
```

显示距离下一个周年纪念日的天数：

```
SELECT DATEDIFF(anniversary('1994-04-05'), CURRENT_DATE()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:30:22.593

```
select * from user_table
where date_format(date_sub(birth, interval 7 days), "%m-%d")
    = date_format(now(), "%m-%d")
   or date_format(date_sub(birth, interval 7 days), "%m-%d") = '02-29'
  and month(now()) = 2 and month(date_add(now(), interval 1 day)) = 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T12:44:30.033

我为这个目标找到了我的选择。

```
select *,birthdate,
concat(if(date_format(birthdate, '%m') = '12',date_format(curdate(), "%Y")
,date_format(now(), "%Y")),
date_format(date_add(curdate(), interval 7 day), '%Y')) as birthday 
from users 
HAVING birthday BETWEEN curdate() and date_add(curdate(), interval 7 day) 
```

感谢您的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:17:11.497

像这样的东西？

```
SELECT user_name, DATE_SUB(birth, INTERVAL 7 DAYS) as SevenDaysBefore from user_table 
```

# token - 如何在应用程序节点之间同步令牌（字符串值）？

> ID：13966946
> 
> 赞同：1
> 
> 时间：2012-12-20T07:08:32.817
> 
> 标签：token, nodes, synchronizing

我们有一个 Spring 3 + REST 应用程序，我们在其中使用令牌来识别传入请求的来源。这个令牌保存在内存中（在哈希图中）并用于识别请求。当我们是我们的应用程序的多个实例（部署在不同机器上的多个 tomcat 实例上）时，我们如何在不同的应用程序节点之间共享/同步这个令牌？我们唯一的要求是在不同节点之间同步这个令牌。

我浏览并发现了一些 API/软件，例如 Redis、memcached、zookeeper。我无法决定选择哪一个。

任何形式的建议/评论都是有帮助的。

问候， 普拉莫德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:01:04.757

我从来没有使用过动物园管理员，所以我不能说什么。Redis（数据库）和 memcached（缓存）都适合你。哪个更好取决于您如何使用令牌。

在以下情况下选择 Redis：

*   令牌可能会存储很长时间
*   无需使令牌过期
*   想要处理比内存中存储更多的令牌
*   想要将令牌复制到其他服务器，因此如果一台服务器出现故障，其他服务器将提供令牌
*   令牌必须在服务器重启后存活

在以下情况下选择 memcached：

*   令牌仅在一定时间内有效并且应该过期
*   令牌数量耗尽内存容量 最近最少使用的令牌将被删除
*   所有令牌都可以存储在内存中
*   无需将令牌复制到其他服务器
*   令牌不必在服务器重启后继续存在
*   想使用 Spring Cache 抽象

# android - 自定义对话框中的 ListView 将按钮推离屏幕

> ID：13966949
> 
> 赞同：3
> 
> 时间：2012-12-20T07:08:42.443
> 
> 标签：android, android-layout, dialog, android-dialog, customdialog

我正在使用我自己的子类`Dialog`并尝试以这样的方式构建它，即如果没有足够的内容来填充屏幕，它将缩小以适应内容（即`wrap_content`）。我可以使用以下布局来做到这一点：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/dialog_bg">

    <RelativeLayout
        android:id="@+id/title_container"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:gravity="center_vertical"
        android:background="@drawable/dialog_title_bg">

        . . .

    </RelativeLayout>

    <LinearLayout
        android:id="@+id/button_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/content"
        android:orientation="horizontal">

        . . .

    </LinearLayout>

    <FrameLayout
        android:id="@+id/content"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/title_container">
    </FrameLayout>
</RelativeLayout> 
```

（我已经删除了我认为不重要的部分）。当内容没有填满屏幕时，这很有效：

![](../Images/83404cf71bd75e84b3c60ff46ca3b4a0.png)

但是当内容很大时，它会将按钮从底部推开：

![](../Images/ad8d2e95cdcc553e0cca0ec2a3f9415c.png)

稍作调整，我将其更改为它`button_container`的`layout_alignParentBottom="true"`上方*，*如下所示：`content`

 *```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/dialog_bg">

    <RelativeLayout
        android:id="@+id/title_container"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:gravity="center_vertical"
        android:background="@drawable/dialog_title_bg">

        . . .

    </RelativeLayout>

    <LinearLayout
        android:id="@+id/button_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal">

        . . .

    </LinearLayout>

    <FrameLayout
        android:id="@+id/content"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/title_container"
        android:layout_above="@+id/button_container">
    </FrameLayout>
</RelativeLayout> 
```

现在它适用于内容对于屏幕来说太大的情况：

![](../Images/e85fe8365614f7e1d2c87be3a151097b.png)

但是当内容没有填满屏幕时，对话框仍然会：

![](../Images/6453418041145549db4ccc59c1aded31.png)

我怎样才能两全其美？我可以通过将“maxHeight”设置为屏幕高度减去对话框边框以及标题和按钮的高度来在代码中做到这一点，但这对我来说似乎有点笨拙。我尝试查看 AlertDialog 的实现（它似乎可以正确处理这种情况），但对我来说它看起来像是黑魔法......

**编辑：**根据要求，这是我添加到`FrameLayout`代表对话框“内容”的布局文件的内容：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ListView
        android:id="@+id/report_items"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:22:48.870

而不是框架布局，最好使用线性。它会起作用..如果您发布xml代码，那么我可以检查..*

# shell - 通过 Args 删除文件扩展名

> ID：13966950
> 
> 赞同：2
> 
> 时间：2012-12-20T07:08:46.440
> 
> 标签：shell

我希望通过将扩展名类型作为参数来删除文件夹中的文件扩展名。

下面是我的代码，它没有按我的预期工作。

```
if [ $# -ne 1 ]
then
    echo -e "\nUsage: $0 Ext"
    echo -e "\nExt - Refers to the extension you want to remove"
    echo -e "\nExample1: $0 .txt\nExample2: $0 .doc\nExample3: $0 .pdf\n"
exit 1
fi

ext=$1

for i in *$ext
do
    echo $i
    filename=${i%\$ext}
    echo $i
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:37:48.663

您可以使用此脚本替换扩展名

```
#!/bin/bash

if [ $# -ne 1 ]
then
    echo -e "\nUsage: $0 Ext"
    echo -e "\nExt - Refers to the extension you want to remove"
    echo -e "\nExample1: $0 .txt\nExample2: $0 .doc\nExample3: $0 .pdf\n"
exit 1
fi

ext=$1

for i in *$ext
do
    echo $i
    new_name=`echo $i | sed 's/.'$ext'//g'`
    echo $new_name
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:26:07.763

您的代码几乎是正确的，但您需要删除转义并回显文件名。下面的代码还显示了 basename 的使用：

```
for i in *$ext
do
    echo $i
    filename1=${i%$ext}
    filename2=$(basename $i $ext)
    echo $filename1
    echo $filename2
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T09:32:10.167

您可以使用以下代码：

```
#!/bin/bash

if [ $# -ne 1 ]

then

    echo -e "\nUsage: $0 Ext"
    echo -e "\nExt - Refers to the extension you want to remove"
    echo -e "\nExample1: $0 .txt\nExample2: $0 .doc\nExample3: $0 .pdf\n"

exit 1
fi

ext=$1

for i in *$ext
do    
    echo $i

    new_name=`echo $i |rev|cut -d'.' -f2-|rev

    echo $new_name
done 
```

# wpf - WPF WrapPanel 水平内容对齐

> ID：13966952
> 
> 赞同：2
> 
> 时间：2012-12-20T07:08:50.117
> 
> 标签：wpf, alignment, wrappanel

有没有办法让 WrapPanel 中的所有项目对齐到中心？

WrapPanel 正常行为

```
|1234567  |
|890      | 
```

期望的行为

```
| 1234567 |
|   890   | 
```

可能的重复[链接](https://stackoverflow.com/questions/806777/wpf-how-can-i-center-all-items-in-a-wrappanel)

我只是不明白如何在答案上使用代码（在链接上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:17:10.510

该链接是一个自定义 WrapPanel。只需将其复制到一个空类中，并确保`using`在第一行设置所有类。

像使用普通 WrapPanel 一样使用此自定义面板。（在 Xaml 中有点不同）。在这个面板中有一个额外的属性：`HorizontalContentAlignment`. 它的默认值为`HorizontalAlignment.Left`. 你应该设置`HorizontalAlignment=HorizontalAlignment.Center`.

无需处理 MeasureOverride 或 ArrangeOverride 方法。

# c# - 在 for 循环中使用 LINQ 或 Yield Return 怎么样？

> ID：13966954
> 
> 赞同：4
> 
> 时间：2012-12-20T07:09:00.757
> 
> 标签：c#, linq, for-loop, xna, yield

目前我正在开发一款 2D XNA 游戏。它需要优化，因为多人模式表现不佳。在代码中，我们主要使用 foreach 循环，并没有在任何地方使用 LINQ 或 yield return 语句。我知道我们可以在这里赢得一些表现。由于 for 循环更快，我正在考虑替换所有 foreach 循环。

**但是，我不能从 for 循环中的 yield return 语句中受益，可以吗？
此外，在使用 for 循环进行迭代时，LINQ 是否仍然有用？**

* * *

例如，我有一个包含 1000 多个形状（正方形、三角形、圆形......）的列表，我想枚举某个位置的所有正方形（75%）。这样做的最佳方法是什么？
我应该使用什么？数组、列表、for 循环、foreach 循环、yield return 和/或 LINQ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:13:59.303

由于这是性能问题，唯一正确的答案是衡量。

一般来说，直接使用`for`可能是最快的方法，因为其余的为每次迭代添加更多代码。尝试衡量自己 - 看看它对你的情况是否重要，以及你最喜欢阅读哪个版本的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T07:43:55.350

在添加项目时执行您需要做的任何分组或排序，而不是在检索它们时。我这样说是因为您（我假设）只添加每个项目一次，但正如您所说，您要多次检索它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:30:48.210

绝对使用`For`循环。如果不是为了性能增益（这可以忽略不计），您将不会创建枚举器对象。所以你不会对 GC 施加不必要的压力。

# garbage-collection - fortran 有垃圾收集器（gc）吗？

> ID：13966955
> 
> 赞同：7
> 
> 时间：2012-12-20T07:09:06.850
> 
> 标签：garbage-collection, fortran

我最近和一个说他做过 Fortran 编程的人交谈过（从很久以前），但他不能告诉我 Fortran 是否有垃圾收集器。他告诉我他没有在 Fortran 中使用 malloc 或 free，所以我的假设是它确实有一个垃圾收集器？还是fortran没有垃圾收集器，只是泄漏内存，程序结束时会被操作系统回收？我对 Fortran 一无所知，只是它以前被使用过。我也尝试了快速谷歌搜索，但找不到任何东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-20T07:41:24.200

现代 Fortran 有多种声明变量的方法。简单声明的项目将在实体范围内存在。所以在一个过程中声明的“real, dimension (N) :: array”将在该过程返回时自动消失。自然地，在主程序或模块变量或公共（过时）中声明的变量将在程序期间持续存在。

可以使用“allocate”动态分配变量（为此，必须使用 allocatable 属性声明它们）。由于 Fortran 95 过程本地的可分配变量会在过程返回时自动释放！他们不会泄漏内存！（一些程序员可能认为显式释放变量是一种很好的做法，即使它不是绝对必要的。）（当然，如果不显式释放一个你知道你不知道的变量，你可能会浪费内存不再需要了。）

使用指针可能会泄漏内存。您可以使用指针分配内存，然后将指针分配给另一个变量，从而丢失先前的关联。如果您没有释放该内存，那么您就有泄漏。与其他语言相比，Fortran 对指针的需求更少……许多事情都可以使用可分配变量来完成，这些变量更安全——没有内存泄漏。

相关问题：[Fortran 可分配数组生存期](https://stackoverflow.com/questions/11837616/fortran-allocatable-array-lifetime)和[ALLOCATABLE 数组或 POINTER 数组？](https://stackoverflow.com/questions/2300199/allocatable-arrays-or-pointer-arrays)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T07:13:52.687

不，Fortran 没有垃圾收集器。但是，在这种程度上，F90有一个[附加包。](http://www.nag.com/nagware/np/r52_doc/f90_gc.html)不，我没有使用它。

# c - 多线程和互斥锁

> ID：13966959
> 
> 赞同：3
> 
> 时间：2012-12-20T07:09:44.810
> 
> 标签：c, multithreading, allegro5

我目前正在使用 Allegro 跨平台库开始开发 C 语言独立游戏。我想我会将诸如输入、声音、游戏引擎和图形之类的东西分离到它们自己独立的线程中，以提高程序的健壮性。没有任何多线程经验，我的问题是：

如果我在内存中有一段数据（例如，指向数据结构的指针），一个线程可以随意写入它，另一个线程随意读取它，还是每个线程都必须使用互斥锁锁定内存，然后读取或写入，然后解锁？

特别是，我在考虑游戏引擎和视频渲染器之间的交互。（这是二维的。）我的计划是让引擎处理用户输入，然后将适当的音频和视频输出到扬声器和监视器。我在想我会有一个指向要在屏幕上绘制的下一个位图的全局指针，游戏引擎和渲染器的代码将是这样的：

```
ALLEGRO_BITMAP *nextBitmap;
boolean using;

void GameEngine ()
  {

  ALLEGRO_BITMAP *oldBitmap;

  while (ContinueGameEngine())
    {
    ALLEGRO_BITMAP *bitmap = al_create_bitmap (width, height);
    MakeTheBitmap (bitmap);
    while (using) ; //The other thread is using the bitmap. Don't mess with it!
    al_destroy_bitmap (nextBitmap);
    nextBitmap = bitmap;
    }

  }

void Renderer ()
  {

  while (ContinueRenderer())
    {
    ALLEGRO_BITMAP *bitmap = al_clone_bitmap (nextBitmap);
    DrawBitmapOnScreen (bitmap);
    }

  } 
```

这似乎不稳定......也许在调用时会发生一些事情，`al_clone_bitmap`但我不太确定如何处理这样的事情。我会在位图上使用互斥锁，但互斥锁似乎需要时间来锁定和解锁，我希望这两个线程（尤其是游戏引擎线程）尽可能快地运行。我还阅读了一种称为条件的东西，但我完全不知道条件将如何适用或有用，尽管我确信它们是。有人可以指点我关于互斥锁和条件的教程（最好是 POSIX，而不是 Windows），这样我就可以尝试解决所有这些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:30:24.760

> 如果我在内存中有一段数据（例如，指向数据结构的指针），一个线程随意写入它而另一个线程随意读取它是否可以？

答案是“视情况而定”，这通常意味着“否”。

根据您正在写入/读取的内容以及程序的逻辑，如果您尝试在不同步的情况下进行写入和读取，并且您不确定写入和读取是否是原子的，则可能会导致疯狂的结果或损坏.

所以你应该只使用互斥锁，除非：

1.  您绝对确定写入和读取是原子的，并且您绝对确定一个线程只在读取（理想情况下，您会使用某种特定的对原子操作的支持，例如`Interlocked`WinAPI 中的函数族）。
2.  您绝对需要从不锁定中获得微小的性能提升。

还值得注意的是，如果您使用[自旋锁](http://en.wikipedia.org/wiki/Spin_lock)`while (using);`，您的构造会更加可靠、正确，甚至可能性能更好（同样，如果您绝对确定需要自旋锁，而不是互斥锁）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T08:17:38.030

您需要的工具称为*原子操作*，它将确保读取器线程仅读取另一个线程写入的整个数据。如果您不使用此类操作，则可能仅读取部分数据，因此读取的内容可能对您的应用程序毫无意义。

新标准 C11 有这些操作，但尚未广泛实施。但是许多编译器应该具有实现这些的扩展。例如 gcc 有一系列以`__sync`前缀开头的内置函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:29:44.197

“google”中有很多手册页。寻找他们。我在几分钟内找到了[http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html ：](http://www.yolinux.com/TUTORIALS/LinuxTutorialPosixThreads.html)

此外，从一个很小的例子开始，增加了难度。首先可以创建和终止线程，线程返回，线程sincronization。继续使用 posix 互斥锁和条件并理解所有这些术语。

一个重要的文档提要是 linux 手册和信息页面。

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-11T19:39:00.023

> 如果我在内存中有一段数据（例如，指向数据结构的指针），一个线程可以随意写入，另一个线程可以随意读取，还是每个线程都必须使用互斥锁锁定内存，然后读取或写入，然后解锁？

如果您在内存中有两个不同线程正在读取和写入的数据部分，则这称为临界区，并且是消费者和生产者的常见问题。

有很多资源可以解决这个问题：

*   [https://docs.oracle.com/cd/E19455-01/806-5257/sync-31/index.html](https://docs.oracle.com/cd/E19455-01/806-5257/sync-31/index.html)

*   [https://stackoverflow.com/questions/tagged/producer-consumer](https://stackoverflow.com/questions/tagged/producer-consumer)

但是是的，如果您要使用两个不同的线程来读取和写入，则必须实现互斥锁或其他形式的锁定和解锁的使用。

# android - android分享图片+AsyncTask

> ID：13966961
> 
> 赞同：0
> 
> 时间：2012-12-20T07:09:59.590
> 
> 标签：android, android-asynctask

您好，我是 android 新手，我需要使用 Share Intent 分享图片。为此，我使用以下 AsyncTask。

```
public class ShareImageTask extends AsyncTask<String, String, String> {
    private Context context;
    private ProgressDialog pDialog;
    String image_url;
    URL myFileUrl;

    String myFileUrl1;
    Bitmap bmImg = null;
    Intent share;
    File file;

    public ShareImageTask(Context context) {
        this.context = context;
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub

        super.onPreExecute();

        pDialog = new ProgressDialog(context);
        pDialog.setMessage("Downloading Image ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();

    }

    @Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub

        try {

            myFileUrl = new URL(args[0]);
            HttpURLConnection conn = (HttpURLConnection) myFileUrl
                    .openConnection();
            conn.setDoInput(true);
            conn.connect();
            InputStream is = conn.getInputStream();
            bmImg = BitmapFactory.decodeStream(is);
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {

            String path = myFileUrl.getPath();
            String idStr = path.substring(path.lastIndexOf('/') + 1);
            File filepath = Environment.getExternalStorageDirectory();
            File dir = new File(filepath.getAbsolutePath()
                    + "/Google Image Wallpaper/");
            dir.mkdirs();
            String fileName = idStr;
            file = new File(dir, fileName);
            FileOutputStream fos = new FileOutputStream(file);
            bmImg.compress(CompressFormat.JPEG, 75, fos);
            fos.flush();
            fos.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(String args) {
        // TODO Auto-generated method stub
        pDialog.dismiss();
        share = new Intent(Intent.ACTION_SEND);
        share.setType("image/jpeg");

        share.putExtra(Intent.EXTRA_STREAM, file);

        startActivity(Intent.createChooser(share, "Share Image"));

    }

} 
```

现在我必须通过传递图像 URL 来调用这个 ShareImageTask。但是我不知道怎么称呼这个？？？

例如 ：-

```
String Imageurl="my imageurl";
new ShareImageTask(Imageurl).execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:20:57.107

你可以这样称呼`ShareImageTask`：

```
String Imageurl="my imageurl";
new ShareImageTask(Curent_Activity.this).execute(Imageurl); 
```

并将您的 In`onPostExecute`代码更改为：

```
@Override
protected void onPostExecute(String args) {
    // TODO Auto-generated method stub
    pDialog.dismiss();
    share = new Intent(Intent.ACTION_SEND);
    share.setType("image/jpeg");

    share.putExtra(Intent.EXTRA_STREAM,Uri.parse(file.getAbsolutePath().toString()));

    context.startActivity(Intent.createChooser(share, "Share Image"));

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:19:20.133

只需这样做..

```
ShareImageTask task = new ShareImageTask();
task.execute(Imageurl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:20:51.553

只需要在您的代码中更改一些..

你这样写

```
new ShareImageTask(Imageurl).execute(); 
```

但你必须这样写

```
new ShareImageTask(getApplicationContext()).execute(Imageurl); 
```

您的 creat 构造函数仅带有`Context`参数，因此您只需在 intilize 时仅传递 Context`ShareImageTask class`

像下面的代码：

**类定义：**

```
public ShareImageTask(Context context) {
        this.context = context;
    } 
```

**类初始化；**

```
new ShareImageTask(getApplicationContext()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:17:07.780

将您的 AsyncTask 构造函数更改为这样

```
public ShareImageTask(Context context,String image_url) {
        this.context = context;
        this.image_url = image_url;
} 
```

所以，你可以这样打电话

```
String Imageurl="my imageurl";
new ShareImageTask(getApplicationContext(),Imageurl).execute(); 
```

# javascript - 指定一个div区域不使用js/jquery做功能

> ID：13966962
> 
> 赞同：3
> 
> 时间：2012-12-20T07:09:59.227
> 
> 标签：javascript, jquery, html

现在我有一个网页功能，它会在除restrictArea 之外的所有窗口中触发。我已经让restrictArea 与主要内容重叠。我怎样才能指定这个区域不触发该功能？我试过`e.preventDefault();`了，但似乎不起作用。谢谢

```
$(document).swipe(function(){
    ...............
};

$('#flip').swiperight(function(e){
 e.stopPropagation();
 e.preventDefault();
}); 
```

更新：所有相关代码：

**CSS：**

```
*
{
 -webkit-user-select: none;         /* disable auto selection (select/selectall when long tap)*/
 -webkit-touch-callout: none;       /* disable magnifier*/
}
#flip
{       
position:absolute;
background-color:red;
z-index:10;
height: 100%;
width:60%;
left:20%;
} 
```

**js：**

```
 $(document).swipeleft(function(){
        //check the case when popup and thumbnail slide bar is not exist
        if ($("#popup").length == '0' && parseInt($('#all_pages').css('left')) != '0'){  
            if (checkOrientation (orientation)== 'landscape'){
                    var pageLand = $('#book').turn('view');
                    pageLand = pageLand[1];
                    if (pageLand + 1 < countImage && pageLand != '0')
                        $('#book').turn('page', pageLand + 1);
            }
            else{
                    var pagePort = $('#book').turn('page');
                    if (pagePort + 1 < countImage && pagePort != '0')
                        $('#book').turn('page', pagePort + 1);
            }
        }
    });

    $(document).swiperight(function(){
        //check the case when popup and thumbnail slide bar is not exist
        if ($("#popup").length == '0' && parseInt($('#all_pages').css('left')) != '0'){ 
            if (checkOrientation (orientation)== 'landscape'){
                    var pageLand = $('#book').turn('view');
                    pageLand = pageLand[0];
                    if (pageLand - 1 > 0)
                        $('#book').turn('page', pageLand - 1);
            }
            else{
                    var pagePort = $('#book').turn('page');
                    if (pagePort - 1 > 0)
                        $('#book').turn('page', pagePort - 1);
            }
        }
    });

    $('#flip').swiperight(function(e){
      alert ('test');
      e.stopPropagation();
      e.preventDefault();
    });

    $('#flip').swipeleft(function(e){
      alert ('test');
      e.stopPropagation();
      e.preventDefault();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:14:00.687

试试下面的代码。您需要停止事件从子节点到父文档的冒泡。

```
$('#restrictArea').swipe(function(e){
  e.stopPropagation();
  e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:13:33.213

而`$(document)`不是你不能绑定 .swipe 一些`DIV`（可能是高度/宽度 100%）？然后，您只需使用比 the`#restrictArea`更高的值，就可以了。`z-index``DIV`

此外，在您的代码中，您尝试执行 preventDefault，但变量 e 未在您的函数中定义/传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:24:27.643

在您的代码中，您没有正确关闭函数：

```
 $(document).swipe(function(){
   ...............
  });
 //^-----------you missed out this

  $('#restrictArea').swipe(function(e){
                   //---------------^-----------you missed out this
      e.preventDefault();
  });
//-^---------------------------------this too 
```

jQuery 没有`.swipe`处理程序，但 jQuery mobile 有，所以你的代码应该是这样的：

```
$(document).bind("pageinit", function(event, data) {
    $('#restrictArea').swipe(function(e) {
        e.preventDefault();
    });
}); 
```

# java - SWT 应用程序：Java 堆空间：java.lang.OutOfMemory

> ID：13966970
> 
> 赞同：2
> 
> 时间：2012-12-20T07:10:21.833
> 
> 标签：java, eclipse, swt, heap-memory

我有一个 SWT 应用程序，它接受 java 类型项目并对所有文件执行一些解析机制，它工作正常，但在具有大量文件的大型项目中它开始产生错误：

**Java 堆空间：java.lang.OutOfMemory**

并终止解析。我怎么能通过java编程来处理它，而不是猜测用户的机器配置。

注意：直到现在我尝试了一种机制，如果项目文件超过我在这里取 1000 的 MAX 大小，我首先计算项目文件，将项目划分为包含 50 个文件的文件夹块并逐个解析它们，但它也没有点击，我解析某些文件夹后出现错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T08:01:33.240

拥有 Java 堆空间时最现实的方法（因为您没有共享任何代码）**：java.lang.OutOfMemory**将是分析您的 Java 应用程序，以便您可以更准确地了解您的应用程序在哪里耗尽了堆空间. 然后，您可以修改代码以减少应用程序的内存使用量。

[YourKit](http://www.yourkit.com/)和[VisualVM](http://visualvm.java.net/index.html)是可用于测试应用程序的 Java 分析软件的两个很好的示例。

此外，增加项目的堆大小可以被认为是一种可能的解决方案。您只需重新调整`-Xmx`设置堆最大大小的虚拟机选项。

# ios - UIColor，iPhone 5 与 iPhone 4

> ID：13966971
> 
> 赞同：0
> 
> 时间：2012-12-20T07:10:22.347
> 
> 标签：ios, photoshop, uicolor

> **可能重复：**
> [Retina 显示 VS 正常显示色差](https://stackoverflow.com/questions/11059797/retina-display-vs-normal-display-color-difference)

我的设计师为我提供了一个使用 Photoshop 设计的 iPhone 应用程序。

这些颜色在模拟器和 iMac 显示器上效果很好。

但是一旦这些设计进入设备，一切都看起来很糟糕。我知道/听说这与 iPhone 显示颜色的方式有关。

我认为我必须做的是使用 LiveView 之类的工具找到适用于设备的颜色。

问题是，颜色在 iPhone5 上很完美。但是对于其他所有设备，它们都处于关闭状态。我必须为每个设备挑选颜色吗？

这是 iPhone 上颜色的常见问题吗？还是只是一些颜色？

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:15:52.113

颜色在任何屏幕上都会以不同的方式出现 -您和您的视觉设计师应该使用一些很棒的工具（例如[XScope ）在 Photoshop 中进行设计时在设备上预览视觉设计。](http://iconfactory.com/software/xscope)

如果您的设计师将他们笔记本电脑上的内容与您的编码应用程序中的内容进行比较，那么他们做错了：他们需要一种方法来在工作时在设备上预览他们的 PSD。您在 iMac 上看到的内容与您在设备上看到的内容不同。

此外，Panic 制作了一个很棒的颜色选择器工具，你应该看看。它插入 OS X 的标准颜色选择器，但让您能够生成 UIColor 代码。您可以在此处找到该工具：http: [//panic.com/~wade/picker/](http://panic.com/~wade/picker/)

# php - PHP OOP vs Procedurial MySQL 函数参考

> ID：13966974
> 
> 赞同：-2
> 
> 时间：2012-12-20T07:10:53.870
> 
> 标签：php, mysqli, prepared-statement

我熟悉创建程序风格的 PHP 函数来从数据库中选择信息，但是在切换到使用面向对象的准备好的 SQL 语句时，我的函数不再工作了。我还没有像我做程序 PHP 那样理解 OOP，并且正在努力学习，所以这是我的问题：

这按预期工作：

```
if ($stmt = $mysqli->prepare("SELECT state FROM country WHERE city = ?")) {
    $stmt->bind_param("s", $city);
    $city = 'la';
    $stmt->execute();
    $stmt->bind_result($state);
    $stmt->fetch();
    $stmt->close();
    echo $state;
} 
```

然而，这不会：

```
function get_state( $city ) {
if ($stmt = $mysqli->prepare("SELECT state FROM country WHERE city = ?")) {
        $stmt->bind_param("s", $city);
        $stmt->execute();
        $stmt->bind_result($state);
        $stmt->fetch();
        $stmt->close();
        echo $state;
    }
}

get_state('la'); 
```

这两个示例都需要数据库 mysqli 连接，但功能版本由于某种原因不起作用，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:40:09.523

该变量`$mysqli`超出了函数的范围。如果您不想将其作为参数传递给函数，则必须将其声明为全局。

```
function get_state( $city ) {
    global $mysqli;

    if ($stmt = $mysqli->prepare("SELECT state FROM country WHERE city = ?")) {
        $stmt->bind_param("s", $city);
        $stmt->execute();
        $stmt->bind_result($state);
        $stmt->fetch();
        $stmt->close();
        echo $state;
    }
}

get_state('la'); 
```

函数外部可用的变量不能在用户定义的函数中访问，除非它被声明为全局变量或将其作为参数传递给函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:13:44.907

您应该做的第一件事是启用错误报告。这将告诉您您正在`prepare`对不是对象 () 的对象调用方法 ( `mysqli`)，因为函数范围内不存在 $mysqli。您必须将 $mysqli 传递给您的函数或设计一些其他机制来说明函数如何访问该变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T07:16:29.170

传递`$mysqli`in 参数，并将`mysqli`连接对象传递给查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:15:13.643

`$mysqli`没有定义，我猜。参见[范围手册](http://php.net/manual/en/language.variables.scope.php)

# json - 使用 JAX-RS 返回 JSON

> ID：13966975
> 
> 赞同：0
> 
> 时间：2012-12-20T07:10:56.023
> 
> 标签：json, jakarta-ee, jetty, jax-rs

我正在尝试返回 SOLRDocList 类型的 JSON，即：

```
{numFound=0,start=0,docs=[]}{"start":0,"empty":true,"class":"class org.apache.solr.common.SolrDocumentList","numFound":0} 
```

但是，由于我将 Service 类用作：

```
@POST
@Path("/userQuery")
@Consumes(MediaType.TEXT_PLAIN)
@Produces(MediaType.APPLICATION_JSON)
public SolrDocumentList userQuery(String p){  
  int sizy;
  String stry;
  StringBuilder sb = new StringBuilder();
  SolrDocument doc = null;
  SolrDocumentList docList = null;

  List<String> arr = new ArrayList();
  StringTokenizer token = new StringTokenizer(p,",");
  while(token.hasMoreElements()){
      stry = token.nextToken();
      arr.add(stry);
  }

  Set<String> xrr = new HashSet<String>(arr);

      SolrQuery query = new SolrQuery(createQuery(arr));
      query.setIncludeScore(false);
      query.setFields("country_code,last_name,raw_location");
      query.setParam("wt", "json");
      System.out.println(query);
      QueryResponse qr = authorSearcher.query(query);
      docList = qr.getResults();

  return docList;
} 
```

> ```
> Error is : 
> ```

```
SEVERE: A message body writer for Java class org.apache.solr.common.SolrDocumentList, and Java type class org.apache.solr.common.SolrDocumentList, and MIME media type application/json was not found
SEVERE: The registered message body writers compatible with the MIME media type are:
application/json ->
  com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$App
  com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$App
*/* -> 
```

我想知道是否有任何可能的方法可以将 JSON 的 SOLRDocList 类型转换为支持的类型来解决这个问题？谢谢你的时间 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:43:42.337

我想通了，因为我使用的是 solr4j ，所以这个库不支持 JSON 作为输出，在这种情况下使用外部库或：

```
Map<Integer,Object> solrDocMap = new HashMap<Integer,Object>();
              int counter = 1;
              for(Map singleDoc: docList)
              {
                  solrDocMap.put(counter, new JSONObject(singleDoc));
                  counter++;
              }
              try {
                  returnResults.put("docs",solrDocMap);
                    } 
```

当你想返回一个 JSON 字符串而不是使用 3rd party libraries 时，使用类似的东西：

```
 String x = ""+returnResults;
  return x; 
```

# ruby-on-rails - Rails 3.2.8 中的简单导航路由错误

> ID：13966976
> 
> 赞同：0
> 
> 时间：2012-12-20T07:10:56.090
> 
> 标签：ruby-on-rails

长期读者和第一次海报，所以如果你对我轻松一点，我将不胜感激。

最近开始自学 RoR，并且一直在破解个人项目/网站以掌握事情的窍门。这是我的问题：

**我正在使用简单导航 gem 来生成链接。在 navigation.rb 我试图调用：**

```
primary.item :home, 'Home', home_path 
```

... home 是显示我的首页的视图和控制器：

1.  home > index.html.erb （只包含一堆标准 HTML，但如果包含它有用的话请告诉我）
2.  和控制器 > home_controller.rb：

> ```
> class HomeController < ApplicationController
>   def index
>     @posts = Post.all
>   end
> end 
> ```

不过，我收到了这个错误：

> 路由错误
> 
> 没有路线匹配 {:action=>"show", :controller=>"home"}
> 
> 尝试运行 rake 路线以获取有关可用路线的更多信息。

...所以我运行 rake 路线，并且肯定可以在那里看到“home#show”。

我的 routes.rb 文件也有这个：

```
 get "projects/index"
  get "offer/index"
  get "space/index"
  get "home/index"

  resources :posts
  resources :home 
```

所以我有点困惑，我敢肯定这是因为我没有经验或一般无法理解我在做什么，但我真的很感激一些帮助，因为它或多或少是我没有的障碍能够克服。

欣赏它！

周杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:35:57.900

这是因为资源；如果您不使用资源，请删除**资源：home**

这可能是您的路线：

```
 get "projects/index"
  get "offer/index"
  get "space/index"
  get "home/index", :as => "home"

  resources :posts 
```

看看我如何删除**资源 :home**。在 home/index 中**:as**代表一个别名，因此您可以将别名用作方法，在名称末尾添加“路径”。

查看有关路线和资源的指南：http: [//guides.rubyonrails.org/routing.html#resource-routing-the-rails-default](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)

# nosql - cassandra 客户端 hector api java.lang.NoClassDefFoundError: org/apache/log4/Level

> ID：13966978
> 
> 赞同：0
> 
> 时间：2012-12-20T07:10:59.127
> 
> 标签：nosql, cassandra, hector, pelops

我收到 java.lang.NoClassDefFoundError: org/apache/log4/Level。

我不是java人，但可以阅读代码。我应该怎么做才能摆脱这个异常？这个异常真的和cassandra hector api无关，为什么困扰我？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:43:37.327

您在类路径中缺少 log4j jar。运行应用程序时，使用命令`-cp`上的选项指定类路径。`java`

# spring - Spring + Hibernate save() 不工作

> ID：13966985
> 
> 赞同：3
> 
> 时间：2012-12-20T07:11:43.113
> 
> 标签：spring, hibernate

我在下面附上了 Spring 服务（有问题的）代码：

```
@Async
    public void performSeismicOperations(Integer sessionUserId,
            int seismicFileId, String seismicFileName, ShClstr targetCluster,
            Collection<String> listOperations, String processedFolderName,
            Map<String, Object[]> args, String userNotes) throws IOException {

            .
            .
            .
            /*some code*/
            .
            .
        Date currentDate = new Date(System.currentTimeMillis());

            /*IMMEDIATE JOB ENTRY*/    
        log.info("Start : Inserting in sh_job to assure user");
        ShJob shJob = new ShJob(user, ClusterConstants.JOB_SUBMITTED,
                currentDate, null, null, null);
        shJobDAO.save(shJob);
        log.info("End : Inserting in sh_job to assure user");

        /*some time-consuming operation - 1*/

        SeismicFiles processedSeismicFile = new SeismicFiles(user,
                processedFolderName, 0, HDFSConstants.PROCESSED, currentDate);
        seismicFilesDAO.persist(processedSeismicFile);

        /*some time-consuming operation - 2*/

        log.info("Start : Updating the Hadoop job id");
        shJob.setShjHadoopJobId(hadoopJobId);
        shJobDAO.attachDirty(shJob);
        log.info("End : Updating the Hadoop job id");

            .
            .
            .
            /*some code*/
            .
            .

        log.info("Returning from SeismicHadoopServiceImpl.performSeismicOperations()");
    } 
```

**DAO 代码**

```
import java.util.List;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.hibernate.LockMode;
import org.hibernate.Query;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Example;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

import com.lnt.seismichadoop.pojo.ShJob;

@Repository
public class ShJobDAO {

    private static final Log log = LogFactory.getLog(ShJobDAO.class);

    @Autowired
    private SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public void persist(ShJob transientInstance) {
        log.debug("persisting ShJob instance");
        try {
            sessionFactory.getCurrentSession().persist(transientInstance);
            log.debug("persist successful");
        } catch (RuntimeException re) {
            log.error("persist failed", re);
            throw re;
        }
    }

    public void save(ShJob transientInstance) {
        log.debug("SAVING ShJob instance");
        try {
            sessionFactory.getCurrentSession().save(transientInstance);
            log.debug("save successful");
        } catch (RuntimeException re) {
            log.error("save failed", re);
            throw re;
        }
    }

    public void attachDirty(ShJob instance) {
        log.debug("attaching dirty ShJob instance");
        try {
            sessionFactory.getCurrentSession().saveOrUpdate(instance);
            log.debug("attach successful");
        } catch (RuntimeException re) {
            log.error("attach failed", re);
            throw re;
        }
    }

    public void attachClean(ShJob instance) {
        log.debug("attaching clean ShJob instance");
        try {
            sessionFactory.getCurrentSession().lock(instance, LockMode.NONE);
            log.debug("attach successful");
        } catch (RuntimeException re) {
            log.error("attach failed", re);
            throw re;
        }
    }

    public void delete(ShJob persistentInstance) {
        log.debug("deleting ShJob instance");
        try {
            sessionFactory.getCurrentSession().delete(persistentInstance);
            log.debug("delete successful");
        } catch (RuntimeException re) {
            log.error("delete failed", re);
            throw re;
        }
    }

    public ShJob merge(ShJob detachedInstance) {
        log.debug("merging ShJob instance");
        try {
            ShJob result = (ShJob) sessionFactory.getCurrentSession().merge(
                    detachedInstance);
            log.debug("merge successful");
            return result;
        } catch (RuntimeException re) {
            log.error("merge failed", re);
            throw re;
        }
    }

    public ShJob findById(java.lang.Integer id) {
        log.debug("getting ShJob instance with id: " + id);
        try {
            ShJob instance = (ShJob) sessionFactory.getCurrentSession().get(
                    "com.lnt.seismic.dao.ShJob", id);
            if (instance == null) {
                log.debug("get successful, no instance found");
            } else {
                log.debug("get successful, instance found");
            }
            return instance;
        } catch (RuntimeException re) {
            log.error("get failed", re);
            throw re;
        }
    }

    public List findByExample(ShJob instance) {
        log.debug("finding ShJob instance by example");
        try {
            List results = sessionFactory.getCurrentSession()
                    .createCriteria("com.lnt.seismic.dao.ShJob")
                    .add(Example.create(instance)).list();
            log.debug("find by example successful, result size: "
                    + results.size());
            return results;
        } catch (RuntimeException re) {
            log.error("find by example failed", re);
            throw re;
        }
    }

    public List<ShJob> findAll() {
        log.debug("finding JobStatus instance by findAll");
        try {
            Query query = sessionFactory.getCurrentSession().createQuery(
                    "from ShJob");
            List<ShJob> results = query.list();
            log.debug("find by findAll successful, result size: "
                    + results.size());
            return results;
        } catch (RuntimeException re) {
            log.error("find by example failed", re);
            throw re;
        }
    }
} 
```

我的要求是，一旦处理开始（**/ *IMMEDIATE JOB ENTRY* /**在代码中），条目必须立即进入作业表。在 /*一些耗时的操作 - 2* / 之后，我将更新相同的条目（具有适当的状态）。虽然我阅读了 save() 和 persist() 之间的区别，但我的 save() 仍然将插入推迟到 /*一些耗时的操作 - 2* / 反过来，这反映了前端很晚的条目。

请指导我在哪里犯了错误。

**第一次编辑**

在我的例子中，用户提交了一个操作请求，该操作请求来自上述标记为@Async 的服务方法——用户必须看到一个页面，其请求显示为“已提交”，而操作仍在服务方法中进行。在这种情况下，我应该使用 session.flush() 还是需要进行任何代码更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:03:08.073

`save`和`persist`，通常情况下，您对持久实体执行的每个操作都会延迟到真正需要时，以避免不必要的数据库往返。

您可以使用 让 Hibernate 将每个挂起的更改写入数据库`session.flush()`，但这不会使实体可用于前端，因为 ront-end 不使用与执行相同的事务来读取数据长时间操作和持久化实体。

并且由于事务是独立运行的（大多数情况下默认隔离为 READ_COMMITTED），因此在另一个事务提交到数据库之前，一个事务不会看到另一个事务写入的任何内容。

如果您想立即设置插入的实体，请将其保存在与其他长时间运行的操作不同的事务中，或者将隔离级别更改为 READ_UNCOMMITTED。

# prolog - 依靠规则秩序

> ID：13966987
> 
> 赞同：6
> 
> 时间：2012-12-20T07:11:44.620
> 
> 标签：prolog, meta-predicate

为了计算两个相同长度的列表之间的汉明距离，我使用`foldl(hamm, A, B, 0, R).`以下定义`hamm/4`：

```
hamm(A, A, V, V) :- !.
hamm(A, B, V0, V1) :- A \= B, V1 is V0 + 1. 
```

第一条规则中的剪切防止了不必要的回溯。然而，第二条规则可以用不同的方式写成：

```
hamm2(A, A, V, V) :- !.
hamm2(_, _, V0, V1) :- V1 is V0 + 1. 
```

并且对于 A 和 B 都接地的查询`hamm2/4`仍然是正确的。`foldl/5`

那么，是否有充分的理由偏爱其中一个而不是另一个呢？还是有理由保持规则的顺序或改变它们？

我知道查询

```
hamm(a, B, 0, 1). 
```

是假的，而

```
hamm2(a, B, 0, 1). 
```

是真的，但我不能完全决定哪一个更有意义。. .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-27T06:24:28.097

OP 实现了两个累加器式谓词来计算汉明距离 (`hamm/4`和`hamm2/4`)，但不确定哪个*更有*意义。

让我们阅读使 OP 感到困惑的查询：“是否有一个 X 使得距离（a，X）为 1？”。以下是 Prolog 给出的“答案”：

```
?- hamm(a,X,0,1). 
false.                          % wrong: should succeed conditionally
?- hamm2(a,X,0,1).              % wrong: should succeed, but not unconditionally
true. 
```

从逻辑的角度来看，*这两种*实现在上述测试中都表现不佳。让我们做一些*坚定性*的测试：

```
?- hamm(a,X,0,1),X=a.           % right
false.
?- hamm(a,X,0,1),X=b.           % wrong: should succeed as distance(a,b) is 1
false.

?- hamm2(a,X,0,1),X=a.          % wrong: should fail as distance(a,a) is 0
X = a.
?- hamm2(a,X,0,1),X=b.          % right 
X = b. 
```

请注意，在以前的查询中，错误成功`hamm/4`时正确地失败`hamm2/4`，反之亦然。所以*两者*都是半对半错，*没有*一个是坚定的。

* * *

*可以做什么？*

基于`if_/3`并由`(=)/3`@false 在[此答案](https://stackoverflow.com/a/27358600/4609915)中提出，我为谓词实现了以下纯代码`hamm3/4`：

```
:- use_module(library(clpfd)).

hamm3(A,B,V0,V) :-
   if_(A = B, V0 = V, V #= V0+1). 
```

现在让我们使用以下方法重复上述查询`hamm3/4`：

```
?- hamm3(a,X,0,1). 
dif(X,a).
?- hamm3(a,X,0,1),X=a.
false.
?- hamm3(a,X,0,1),X=b.
X = b. 
```

*有用！* 最后，让我们通过*最通用的查询*来查看整个解决方案集 `hamm3/4`：

```
?- hamm3(A,B,N0,N).
A = B,    N0 = N ;
dif(A,B), N0+1 #= N. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T08:52:03.053

您已经发现了这些定义之间的差异：除了效率之外，您应该决定您的需求。你打算在你的数据结构中接受变量吗？这种编程风格引入了一些高级的 Prolog 特性（不完整的数据结构）。

无论如何，我认为第一种形式更准确（不太确定，我会说*坚定的 4° 论点*）

```
?- hamm(a, B, 0, 1).
false.

?- hamm(a, B, 0, 0).
B = a. 
```

而hamm2是

```
?- hamm2(a, B, 0, 1).
true.

?- hamm2(a, B, 0, 0).
B = a. 
```

# javascript - 在javascript html中访问列表中的元素

> ID：13966990
> 
> 赞同：1
> 
> 时间：2012-12-20T07:11:58.240
> 
> 标签：javascript, html

我有一个列表 - `[getFamilyPkg, getActivePkg, getEligiblePkg, getActivePkgForDeactivation]`，想在 javascript 函数中获取此列表中的每个元素。
怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:14:02.627

假设列表存储在一个名为`arr`.

```
for (var i = 0; i < arr.length; i++) {
  var elem = arr[i];
  // elem is either getFamilyPkg, or getActivePkg, or ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:26:19.093

汤米的回答实际上是不正确的。`for (var i in arr)`循环遍历对象原型的所有属性/属性`arr`，其中包括内置函数等`slice()`。请参见此处的 jsfiddle 示例：http: [//jsfiddle.net/sEtMw/](http://jsfiddle.net/sEtMw/)（检查控制台，您将看到除了数组元素。

有几种方法（再次假设数组名为`arr`）：

```
var elem;
for (var i = 0, len = arr.length; i < len; i++) {
    elem = arr[i];
    // elem is actually one of the array elements here
} 
```

另一种选择如下：

```
var elem;
while (elem = arr.shift()) {
    // elem is one of the array elements
} 
```

请注意，第二种方法**不能**保持数组完整。即在循环结束时，数组将为空。但是，如果您对此感到满意，那么语法肯定会更干净。这两种方法都在这里说明：http: [//jsfiddle.net/z7zKK/](http://jsfiddle.net/z7zKK/)。最后记录变量`arr`以说明它是空的。

# c++ - 如何在 C++ 中模拟 NSData 对象？

> ID：13966994
> 
> 赞同：4
> 
> 时间：2012-12-20T07:12:34.487
> 
> 标签：c++, objective-c, type-conversion

我想知道如何在 NSData 对象（例如这样编码的 UIImage ）和它在 C++ 中的等价物之间进行转换，反之亦然。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:07:57.507

`std::vector<byte>`我认为是最接近的等价物。但是等效性有点松散。只是它们都用于保存任意字节的序列。

不过，很难看出你为什么真的想要这样做。就像 CodaFi 说的，如果你只需要通过一些 C++ 代码传递对象，只要它被保留在 Objective-C-land 中，你就可以使用 void 指针。无论如何，C++ 通常不能处理序列化的 Objective-C 对象。

# excel - 工作表打开错误

> ID：13966995
> 
> 赞同：2
> 
> 时间：2012-12-20T07:12:36.040
> 
> 标签：excel, vbscript, vba

当我试图创建一个工作表对象时，出现错误：

```
 Dim oFS   : Set oFS  = CreateObject("Scripting.FileSystemObject")
    Dim oXls  : Set oXls = CreateObject("Excel.Application")
    Dim oWb   : Set oWb  = oXls.Workbooks.Open(oFs.GetAbsolutePathName("Wing_To_Wing_Report.xlsx"))
    Dim aData ': aData    = oWb.Worksheets(1).Range("$A2:$C10")
    Dim dicP  : Set dicP = CreateObject("Scripting.Dictionary")
    Dim Range,ObSheet1,ObSheet2
    Dim TotalRows,LastCol

    ObSheet1=oWb.ActiveWorkbook.Worksheets("WingToWingMay25")
    ObSheet2=oWb.ActiveWorkbook.Worksheets("ParentChildLink") 
```

也试过这个：

```
 ObSheet1=oWb.Worksheets("WingToWingMay25")
   ObSheet2=oWb.Worksheets("ParentChildLink") 
```

**错误**对象不支持此属性或方法：“ActiveWorkbook”

你能帮我吗？为什么这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:30:28.320

1.  oWb 本身是一个工作簿对象您不需要该`ActiveWorkbook` 部分
2.  你错过了`set`关键字 `set ObSheet1=oWb.Worksheets("WingToWingMay25")`

另外，我从您的一个打印屏幕中看到，您正在使用 Notepad++ 进行开发，

而不是直接运行脚本，

请使用调试器来测试脚本。

[你可以在这里](https://stackoverflow.com/questions/13800794/excel-how-to-convert-bas-file-to-vbscript-exe-or-running-from-command-line/13802548#13802548)找到调试器

使用调试器，您可以逐行运行源代码，

并使用监视窗口在运行时查看每个对象的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:30:00.147

而不是`ObSheet1=oWb.ActiveWorkbook.Worksheets("WingToWingMay25")`，你应该这样做：

```
set ObSheet1=oWb.ActiveWorkbook.Worksheets("WingToWingMay25") 
```

# windows - 从父 Windows 操作系统调用在 mac vmware 上运行的应用程序

> ID：13966996
> 
> 赞同：2
> 
> 时间：2012-12-20T07:12:37.323
> 
> 标签：windows, macos, virtual-machine

有没有办法我们可以从 Windows 操作系统上运行的程序或 Web 应用程序调用安装在 mac lion vmware 上的应用程序？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:26:40.157

在 Mt Lion 实例上配置远程登录，

![共享设置](../Images/4edbff2ad19056b2781bf0cc7f8646c4.png)

现在您可以通过 SSH 连接并调用命令。（在 Windows 上使用[Putty / Plink](http://the.earth.li/~sgtatham/putty/0.53b/htmldoc/)）

例如，如果您的 VMWare 实例位于 10.0.0.1 上并且登录名是用户名。

```
plink 10.0.0.1 -l username "open -a Chromium.app http://google.com" 
```

设置[ssh 密钥](http://en.wikipedia.org/wiki/Secure_Shell)以在没有密码挑战的情况下执行此操作。

# 如果你没有运行windows...

只需进行 ssh 调用即可。

```
ssh username@10.0.0.1 "open -a Chromium.app http://google.com" 
```

# 或者

在 Mac 上运行一个非常简单的 Web 服务，并让它运行本地提供的命令。

[如果您使用Sinatra](http://sinatrarb.com)或类似的轻量级工具（节点的 sammy.js 显然基于 sinatra。），这非常容易。

从 Mac 终端执行以下操作：

```
sudo gem install sinatra 
```

创建一个名为`app.rb`

```
require 'sinatra'

get '/' {
   `#{params[:command]`
} 
```

然后启动它：

```
ruby app.rb 
```

现在在 windows 框中打开以下 URL

```
http://10.0.0.1:4567/?command=open%20-a%20TextEdit.app 
```

同样，假设 VM 实例 IP 地址为 10.0.0.1

TextEdit 将在 Mac VM 上打开。

# 安全和注意事项...

这将允许任何处于登录用户特权级别的命令，适用于启动应用程序，但不适用于需要进一步交互的任何命令，因为您最好在 Mac VM 上编写本地脚本并调用它通过与我所描述的类似的方式。

# 保护它...

当然这没有安全性，但是如果 ssh 不可能，您可以合理地简单地添加它，这取决于您的要求。

向请求中添加一个简单的安全令牌：

```
get '/' {
   `#{params[:command]` if params[:token] == "awSomEl3yS3cuReP4ssK3y"
} 
```

将请求发送为：

```
http://10.0.0.1:4567/?token=awSomEl3yS3cuReP4ssK3y&command=open%20-a%20Safari.app 
```

您可以通过各种方式进一步加强它，但这足以让您继续前进。Rack（sinatra 使用它来提供 http 服务，将允许您设置模块，即基本的 http 身份验证，或更高级的身份验证，只要您认为合适。

# .net - New AsyncCallback(AddressOf Function) 和 AddressOf Function 之间的区别

> ID：13966997
> 
> 赞同：1
> 
> 时间：2012-12-20T07:12:40.050
> 
> 标签：.net, vb.net

使用VB .Net异步socket方法时，回调函数应该如何定义？

```
Private Sub ServerRunTime(Optional ByRef ListeningAddress As String = "", Optional ByRef Port As Short = 31337)
        Dim Listener As Socket = ConfigListener(ListeningAddress, Port)
        Listener.Listen(32)
        Listener.BeginAccept(New AsyncCallback(AddressOf OnAccept), Listener)
End Sub

Private Sub OnAccept(ByVal AcceptResult As IAsyncResult)
        Dim Listener As Socket = CType(AcceptResult.AsyncState, Socket)
        Dim aClientObj As New ClientObj
        Dim ClientID As Integer = Clients.Count

        aClientObj.ClientSok = Listener.EndAccept(AcceptResult)
        aClientObj.ClientID = ClientID
        Clients.Add(aClientObj)

        Clients(ClientID).ClientSok.BeginReceive(Clients(ClientID).RecvBuffer, 0, Clients(ClientID).RecvBuffer.Length, SocketFlags.None, AddressOf OnReceive, ClientID)
        Listener.BeginAccept(New AsyncCallback(AddressOf OnAccept), Listener)
End Sub 
```

在上面的代码示例中，我都测试了

```
New AsyncCallback(AddressOf OnReceive) 
```

和

```
AddressOf OnReceive 
```

并且都产生相同的结果。

那么哪个是正确的？是否可以将 AsyncCallback 对象创建为变量以避免每次接收都创建一个新对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:20:34.220

两个选项都是正确的（[MSDN](http://msdn.microsoft.com/en-us/library/y72ewk2b.aspx)）：

> AddressOf 运算符可以用作委托构造函数的操作数，也可以在编译器确定委托类型的上下文中使用。

*   `New AsyncCallback(AddressOf OnReceive)`: 在这里，您使用 AddressOf 运算符作为委托构造函数的操作数。
*   `AddressOf OnReceive`: 在这里，委托 ( `AsyncCallback`) 的类型由编译器自动推断。

第一个选项更明确，后一个更紧凑。使用哪一个是口味问题。

* * *

关于缓存 AsyncCallback 对象：是的，这是可能的，但我真的怀疑性能优势（如果有的话）是否值得麻烦。

# android - 在android中的布局中调整两个视图之间的gridview

> ID：13966999
> 
> 赞同：1
> 
> 时间：2012-12-20T07:12:59.957
> 
> 标签：android, android-layout, gridview, alignment, android-linearlayout

在我的应用程序中，我有一个包含 a`LinearLayout--> Top`和`GridView--> Middle`a的布局`set of views which should be aligned to the bottom`。

**1.gridview内容不多时的布局**

**2.网格视图内容增加时的布局**

**3\. Gridview 内容很大时应该如何显示的布局**

![<code>**gridview 内容不多时的布局**</code>](../Images/7960e758e276fc9e7d4e79b8066ae487.png) ![增加网格视图内容时的布局](../Images/c53e947381b29dfbca9f8593255d56fa.png) ![当 Gridview 内容非常大时，布局应该如何显示](../Images/a3ed6d115a7dbd92c5a93bb951640beb.png)

目前我的网格视图正在扩展，当其中的内容增加时，较低级别的内容在屏幕中不可见。

我不想为网格视图分配特定的高度，因为它在不同尺寸的屏幕中看起来很奇怪。

`Is there any way that the gridview expands only upto the bottom views?`我的父布局是线性布局。我已经尝试过相对布局，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:33:23.323

我也遇到了同样的问题，并通过修改相应的xml找到了解决方案，如下所示：

1.  用作`RelativeLayout`父布局。
2.  将标题内容放入`RelativeLayout`
3.  用于`ScrollView`动态变化的 GridView。
4.  将页脚布局放在之后`ScrollView`

如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" >
 <TextView
    android:id="@+id/txtTextView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>
  <ScrollView
    android:id="@+id/scro1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/txtTextView" >
  <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
  <GridView
    android:id="@+id/scro1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>
  </LinearLayout>
  </ScrollView>
  </RelativeLayout> 
```

`android:layout_below`中的属性`ScrollView`有所不同。