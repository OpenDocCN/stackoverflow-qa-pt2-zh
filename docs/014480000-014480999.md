# StackOverflow 问答 14480000-14480999

# java - 从 Java 应用程序发送电子邮件的最佳方式

> ID：14480000
> 
> 赞同：4
> 
> 时间：2013-01-23T12:40:57.110
> 
> 标签：java, email, jakarta-mail, attachment, mailto

**我一直在寻找通过我的 java 应用程序发送带有**附件的电子邮件的最佳方式。我想将其用作带有记录器文件的用户错误报告。收件人应该是我自己的电子邮件地址。我更喜欢使用电子邮件客户端。

我尝试了以下方法：

*   [像这样](http://www.rgagnon.com/javadetails/java-0321.html)发送带有用户身份验证的电子邮件。我不想使用它，因为用户需要透露他的电子邮件帐户和密码。此外，我必须为每个电子邮件地址设置属性，这是不可能的。

*   像清单 16.16 中这样直接向我自己的电子邮件地址发送电子邮件[（没有找到英文示例）](http://openbook.galileodesign.de/javainsel5/javainsel16_010.htm#Rxx747java160100400063D1F048100)。问题是现在每个电子邮件服务器都使用 POP 身份验证，这意味着收件人电子邮件服务器不会接受我的电子邮件。

*   [像这样](http://www.2ality.com/2010/12/simple-way-of-sending-emails-in-java.html)使用 mailto URL 语法。也不能正常工作，因为附件功能在每个电子邮件客户端中都不能正常工作。到目前为止最好的解决方案是提示用户自己添加附件，然后我将其放到他的桌面上。或者上传数据并添加指向电子邮件正文的链接。

*   我找到的最后一种方法是[这个](http://www.tutorialspoint.com/java/java_sending_email.htm)。你可以假设这也行不通，因为本地主机需要连接到互联网并且有足够的能力发送电子邮件。

希望我能很好地解释我的问题。是否有不同的方式来发送错误报告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:58:39.627

解决您描述的问题的普遍接受的方法是保留所有电子邮件逻辑服务器端，然后让您的应用程序使用适当的参数调用 Web 服务。很容易敲出一个 PHP 脚本/servlet 来完成这项工作，然后通过电子邮件发送结果，将它们放入 mysql 数据库等。

但是，如果您不能/不想/不会保留此服务器端，我建议您使用 JavaMail 创建一个`MimeMessage`，然后使用`writeTo()`将其写入 EML 文件。

然后你可以做通常的事情：

`Desktop.getDesktop().open(emlFile);`

...这将使用处理这些文件的默认应用程序打开 EML 文件，该应用程序几乎总是邮件客户端。仍然不是万无一失，但如果您决定直接从客户发送电子邮件，我认为这与您将获得的一样好。

# java - 客户端发送方未能发送响应消息 - ECM Documentum

> ID：14480004
> 
> 赞同：0
> 
> 时间：2013-01-23T12:41:25.320
> 
> 标签：java, documentum, ecm, connectexception

从 WebTop 打开任何 MS 文档时出现以下错误，结果我什么都无法打开... :(

```
Jan 23, 2013 6:26:32 AM com.documentum.ucf.client.logging.impl.UCFLogger warn
WARNING: UCF Client Version 5.3.0.1
Jan 23, 2013 6:26:37 AM com.documentum.ucf.client.logging.impl.UCFLogger fatal
SEVERE: Client sender failed to send response message
com.documentum.ucf.common.transport.TransportStreamException: Client sender failed to send response message
    at com.documentum.ucf.client.transport.impl.ClientSender.send(ClientSender.java:74)
    at com.documentum.ucf.client.transport.impl.ClientSession.sendAndGetReceiver(ClientSession.java:590)
    at com.documentum.ucf.client.transport.impl.ClientSession.handshake(ClientSession.java:673)
    at com.documentum.ucf.client.transport.impl.ClientSession.handshake(ClientSession.java:653)
    at com.documentum.ucf.client.transport.impl.ClientSession.run(ClientSession.java:270)
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at sun.net.NetworkClient.doConnect(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.<init>(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source)
    at com.documentum.ucf.client.transport.impl.ClientNativeGAIRConnector.sendProlog(ClientNativeGAIRConnector.java:179)
    at com.documentum.ucf.client.transport.impl.ClientSender.send(ClientSender.java:46)
    ... 4 more 
```

无法理解为什么连接被拒绝。我使用 Windows 7 x64、ECM Documentum 6.7、IE 8（用于 32 和 64）/IE9（用于 32 和 64）、java 1.6。有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:44:45.760

我安装了最新的 WebLogic 版本并且错误消失了。

干杯!

# java - Pax-logging：指定用于日志的时区

> ID：14480008
> 
> 赞同：1
> 
> 时间：2013-01-23T12:41:34.610
> 
> 标签：java, logging, log4j, slf4j, apache-karaf

在我的`org.ops4j.pax.logging.cfg`文件中，我设置了：

```
log4j.appender.mylogger.layout=org.apache.log4j.PatternLayout
log4j.appender.mylogger.layout.ConversionPattern=%d{yyyy-MM-dd hh:mm:ss z} | %-5.5p | %-16.16t | %-32.32c{1} | %X{bundle.id} - %X{bundle.name} - %X{bundle.version} | %m%n 
```

并输出我系统的时区 PHT（菲律宾时间）。我希望它输出UTC。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T05:18:39.440

试试[EnhancedPatternLayout](http://logging.apache.org/log4j/companions/extras/apidocs/org/apache/log4j/EnhancedPatternLayout.html)。

[从http://logging.apache.org/log4j/companions/extras](http://logging.apache.org/log4j/companions/extras)下载 extras 伴侣 并将其添加到您的类路径中。

以下是来自[http://comments.gmane.org/gmane.comp.apache.logging/1143的未经测试的示例](http://comments.gmane.org/gmane.comp.apache.logging/1143)

```
 log4j.appender.stdout.layout=org.apache.log4j.EnhancedPatternLayout
     log4j.appender.stdout.layout.ConversionPattern=%d{}{America/New_York} %p [%c] - %m%n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T14:40:24.713

Extras Log4j 不适用于 pax-logging。您需要通过将片段包附加到它来将这些附加程序添加到 pax-loggin-service 包。使用这个额外的片段，您可以将这个额外的附加程序添加到 pax-logging。可以在[此处找到有关如何使用 karaf 将片段附加到 pax-logging 的示例](http://notizblog.nierbeck.de/2011/08/adding-custom-log-appender-to-pax-logging/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-01T14:58:04.700

我正在使用 log4j-1.2.17，我们将日志转发到 Splunk。我必须做的是：

layout class="org.apache.log4j.EnhancedPatternLayout **"** param name="ConversionPattern" value=" **%d{ISO8601}{UTC}Z** %-5p %t:%C{1}:%L [%M] %m %n"

增强的模式布局允许时区，我必须在 Splunk 之后添加“Z”才能将其识别为 UTC。

# jsf - 2 种不同的编码类型 - 一个提交按钮

> ID：14480009
> 
> 赞同：0
> 
> 时间：2013-01-23T12:41:44.863
> 
> 标签：jsf, primefaces

有 2 个表单，只需要 1 个提交按钮：

```
<h:form>
<h:panelGrid columns="2">
<h:outputText value="#{msgs.shortDescription}"/>
<p:inputText value="#{fileBean.shortDescription}" required="true"/>
<h:outputText value="#{msgs.longDescription}"/>
<p:inputTextarea value="#{fileBean.longDescription}" required="true"/>

<h:selectOneMenu value="#{enumRegistration.selectedRegion}">
<f:selectItems value="#{enumRegistration.regionList}"/>
<f:ajax listener="#{enumRegistration.selectCity}" render="citiesmenu"/>
</h:selectOneMenu>

<h:commandButton value="Submit" action="#{fileBean.updateAd}"/>
</h:panelGrid>
</h:form>

<h:form enctype="multipart/form-data">
<p:fileUpload value="#{fileBean.file}" mode="advanced"
fileUploadListener="#{fileBean.handleFileUpload}"
required="true" allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
requiredMessage="You must upload a file"/>
<p:commandButton value="Submit" ajax="false"/>
</h:form> 
```

如何只有 1 个提交按钮？

一种选择是将两者都包含在一个表单中......在常规表单上也有*multipart/form-data真的是最好的选择吗？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:45:35.650

将所有字段放在一个表单中。它不会破坏任何东西，并且有两种形式是不好的，因为：

1) 浏览器期望在提交表单后，它会接收到加载新页面的数据（在当前框架中或在另一个框架中）。让他在第一个表格之后发送第二个表格可能会导致错误。

2) JSF 期望 POST 意味着新页面/视图已准备好。以下来自同一页面的 POST 可能会被忽略。

3) 如果您使用 AJAX，则 1 & 2 不正确。也就是说，如果您想同时发送两种表单，那么使用 AJAX 是没有意义的。而且，如果您仍然这样做，您将在请求中上传一个文件，在另一个中上传一个表单，并且您必须以某种方式在服务器中将一个与另一个匹配。

4) 将所有内容放在一起经过充分测试、尝试和理解。有数千页解释如何配置过滤器、访问数据等。

# angularjs - 应用架构：指令与控制器

> ID：14480018
> 
> 赞同：8
> 
> 时间：2013-01-23T12:41:56.360
> 
> 标签：angularjs

我有一个很大的应用程序，其中包含许多布局和子视图。看起来像（简化）： [http ://plnkr.co/edit/x4kleCCQH5Hsy6dcjgXe?p=preview](http://plnkr.co/edit/x4kleCCQH5Hsy6dcjgXe?p=preview)

所以，我有很多指令和服务。并且只有 2-4 个简单的控制器（10-20 行代码）。所有逻辑都存储在大指令中，其中包含许多小指令。我错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T01:58:37.943

我接近它的方式是。

*   指令包含视图逻辑，而不是业务逻辑。如果需要，这也是 DOM 混乱发生的地方。

*   控制器相当薄，业务逻辑最少。

*   Angular 服务是完成大部分繁重工作的地方。

如果您的逻辑需要被多个区域/控制器重复使用或者是有状态的 - 它可能更适合放入服务而不是指令。

根据您的应用程序/架构 - 您可能会发布到服务器，并且在服务器端发生繁重的 BL。

[Angular 文档对正确使用指令](http://docs.angularjs.org/guide/controller)有一些很好的说明，其中包含一些指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:21:14.963

听起来不错。

在[DoubleClick 演讲](http://www.youtube.com/watch?v=oJoAnVRIVQo)中的某个时刻，演讲者说了类似“使控制器尽可能薄”的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T17:05:37.420

链接被破坏了...指向同一指南的工作链接在这里： [http ://docs.angularjs.org/guide/controller](http://docs.angularjs.org/guide/controller)

# java - ActiveMQ 和嵌入式代理

> ID：14480023
> 
> 赞同：10
> 
> 时间：2013-01-23T12:42:12.163
> 
> 标签：java, jms, activemq

编辑：改写问题：

我想使用 ActiveMQ 作为我的服务器和客户端应用程序之间的信使服务。

我正在尝试在服务器中设置一个嵌入式代理（即不是一个单独的进程）来处理生成的消息供我的客户使用。这个队列是持久的。

代理初始化如下：

```
BrokerService broker = new BrokerService();
KahaPersistenceAdapter adaptor = new KahaPersistenceAdapter();
adaptor.setDirectory(new File("activemq"));
broker.setPersistenceAdapter(adaptor);
broker.setUseJmx(true);
broker.addConnector("tcp://localhost:61616");
broker.start(); 
```

修修补补后，我最终得到了服务器部分：

```
public static class HelloWorldProducer implements Runnable {
    public void run() {
        try {
            ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost"); // apparently the vm part is all i need
            Connection connection = connectionFactory.createConnection(); 
            connection.start();
            Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
            Destination destination = session.createQueue("TEST.FOO");
            MessageProducer producer = session.createProducer(destination);
            producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
            String text = "Hello world! From: " + Thread.currentThread().getName() + " : " + this.hashCode();
            TextMessage message = session.createTextMessage(text);
            System.out.println("Sent message: "+ message.hashCode() + " : " + Thread.currentThread().getName());
            producer.send(message);
            session.close();
            connection.close();
        }
        catch (Exception e) {
            System.out.println("Caught: " + e);
            e.printStackTrace();
        }
    }
} 
```

客户端非常相似，看起来像这样：

```
public static class HelloWorldConsumer implements Runnable, ExceptionListener {
    public void run() {
        try {
          ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost");
            Connection connection = connectionFactory.createConnection(); // exception happens here...
            connection.start();
            connection.setExceptionListener(this);
            Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
            Destination destination = session.createQueue("TEST.FOO");
            MessageConsumer consumer = session.createConsumer(destination);
            Message message = consumer.receive(1000);
            if (message instanceof TextMessage) {
                TextMessage textMessage = (TextMessage) message;
                String text = textMessage.getText();
                System.out.println("*****Received: " + text);
            } else {
                System.out.println("*****Received obj: " + message);
            }
            consumer.close();
            session.close();
            connection.close();
        } catch (Exception e) {
            System.out.println("Caught: " + e);
            e.printStackTrace();
        }
    } 
```

main 方法只是简单地在一个线程中启动这些中的每一个以开始生成/接收消息。

...但是我在每个线程的开头都遇到了以下问题：

```
2013-01-24 07:54:31,271 INFO  [org.apache.activemq.broker.BrokerService] Using Persistence Adapter: AMQPersistenceAdapter(activemq-data/localhost)
2013-01-24 07:54:31,281 INFO  [org.apache.activemq.store.amq.AMQPersistenceAdapter] AMQStore starting using directory: activemq-data/localhost
2013-01-24 07:54:31,302 INFO  [org.apache.activemq.kaha.impl.KahaStore] Kaha Store using data directory activemq-data/localhost/kr-store/state
2013-01-24 07:54:31,339 INFO  [org.apache.activemq.store.amq.AMQPersistenceAdapter] Active data files: []
2013-01-24 07:54:31,445 DEBUG [org.apache.activemq.broker.jmx.ManagementContext] Probably not using JRE 1.4: mx4j.tools.naming.NamingService
2013-01-24 07:54:31,450 DEBUG [org.apache.activemq.broker.jmx.ManagementContext] Failed to create local registry
    java.rmi.server.ExportException: internal error: ObjID already in use
    at sun.rmi.transport.ObjectTable.putTarget(ObjectTable.java:186)
    at sun.rmi.transport.Transport.exportObject(Transport.java:92)
    at sun.rmi.transport.tcp.TCPTransport.exportObject(TCPTransport.java:247)
    at sun.rmi.transport.tcp.TCPEndpoint.exportObject(TCPEndpoint.java:411)
    at sun.rmi.transport.LiveRef.exportObject(LiveRef.java:147)
        <snip....> 
```

似乎消息已成功生成和使用（我之前发布的其他问题已解决），但上述异常让我担心。

编辑：在代理关闭期间，我现在也受到以下人员的欢迎：

```
2013-01-25 08:40:17,486 DEBUG [org.apache.activemq.transport.failover.FailoverTransport] Transport failed with the following exception:
    java.io.EOFException
    at java.io.DataInputStream.readInt(DataInputStream.java:392)
    at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:269)
    at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:210)
    at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:202)
    at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:185)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T15:14:54.367

您可以通过多种方式将代理嵌入到您的代码中，其中大部分都[在此处](http://activemq.apache.org/how-do-i-embed-a-broker-inside-a-connection.html)记录。您可能想尝试升级您的版本，因为您使用的似乎很旧，因为它默认为现在已弃用的 AMQ 存储而不是较新的 KahaDB 存储。您可能会因为客户端线程之间的竞争而遇到问题，因为它们使用不同的连接工厂，这些连接工厂可能会竞相在 VM 代理中创建。如果您在生产者上设置 create=false 选项并确保在此之后启动消费者线程可以解决问题，或者您可以提前创建 VM 代理并将 create=false 添加到两个线程，这可能会成功。

```
BrokerService broker = new BrokerService();
// configure the broker
broker.setBrokerName("localhost");
broker.setUseJmx(false);
broker.start(); 
```

然后在客户端代码中，只需通过此连接工厂配置进行附加。

```
ActiveMQConnectionFactory cf = new ActiveMQConnectionFactory("vm://localhost?create=false"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T04:27:07.417

当我运行您的代码时，出现以下异常：

```
javax.jms.JMSException: Could not connect to broker URL: tcp://localhost. 
Reason java.lang.IllegalArgumentException: port out of range:-1 
```

您的代理正在运行并侦听端口 61616，因此任何尝试连接代理的客户端都需要在其 URL 中包含该端口。

客户端代码尝试连接到 localhost，但没有提及它必须连接的端口。生产者和消费者代码都需要修复。

```
ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost"); 
```

至

```
ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616"); 
```

修复端口后，我能够运行您的代码。

# ios - HQ2x 图像放大会产生损坏的 PNG

> ID：14480031
> 
> 赞同：1
> 
> 时间：2013-01-23T12:42:40.447
> 
> 标签：ios, c, png

**简短的问题：**

有谁知道为什么 HQ2x 会生成损坏的 PNG，或者知道我可以尝试的另一种支持透明度的实现。

**更长的问题：**

我正在尝试使用[HQ2x（支持 alpha）](http://cdn.bitbucket.org/Mytskine/hqx/downloads/hqx-alpha_2011-02-20.zip)来生成放大图像。

然而，问题是以下代码会产生损坏的 PNG。

```
UIImage *image = [UIImage imageNamed:@"testIcon.png"];
NSMutableData *data = [NSMutableData dataWithData:UIImagePNGRepresentation(image)];

uint32_t *imageData = (uint32_t *) malloc([data length]);
uint32_t *newImageData = (uint32_t *) malloc(image.size.width * 4 * image.size.height * 4 * sizeof(uint32_t));

[data getBytes:imageData];

hqxInit();
hq2x_32(imageData, newImageData, image.size.width, image.size.height);

FILE *file;
file = fopen("/Users/iPhone/Desktop/out.png","w");
fwrite(newImageData, image.size.width * 4 * image.size.height * 4 * sizeof(uint32_t), 1, file);
fclose(file); 
```

检查输出的前几个字节，我可以推断出了问题，因为有两个混合的[PNG 幻数](http://en.wikipedia.org/wiki/Portable_Network_Graphics)( `89 50 4e 47 0d 0a 1a 0a`)：

```
89 50 4E 47 89 50 4E 47 0D 0A 1A 0A 0D 0A 1A 0A 
```

输入图像未损坏。

这是一个objective-c程序，但重要的部分是纯c。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:59:28.147

这个答案的一部分在聊天中讨论过。[（成绩单）](https://chat.stackoverflow.com/rooms/23222/conversation/hq2x-solution)

您写入的 blob`/Users/iPhone/Desktop/out.png`是原始像素数据。您必须将其编码为 PNG，因为`hq2x_32`它不会自动进行。

如果您在将 PNG 传递给之前没有对其进行解码，`hq2x_32`那么您的输入以及随后的输出都是错误的。

看一下[`hqx.c`](https://bitbucket.org/Mytskine/hqx/src/63f093060cc7/src/hqx.c)，可以看到传入的数据`hq2x_32`是先解码，然后手动编码输出。两种转换都使用[DevIL](http://openil.sourceforge.net/)处理。

# rest - 从 oDesk 获取作业

> ID：14480034
> 
> 赞同：0
> 
> 时间：2013-01-23T12:42:43.593
> 
> 标签：rest, c#-4.0, oauth, api-key, odesk

我创建了一个 Windows C# 4.0 应用程序，它根据发送到 REST API 的不同参数从 oDesk 获取作业。但问题是它只是返回公共工作。当我登录浏览器并访问相同的 URL 时，它会返回浏览器（而不是我的应用程序）中可供 oDesk 用户（不是私人作业）以及公共作业使用的所有作业。我正在以 JSON 格式获取数据（但为了确认我在浏览器中使用 xml 格式的数据）。

例如，我使用以下 URL 来获取作业，但它只返回公共作业。 [https://www.odesk.com/api/profiles/v1/search/jobs.xml?page=0;100&q=store&t=Hourly&dp=1&st=Open&sort=date_posted;A](https://www.odesk.com/api/profiles/v1/search/jobs.xml?page=0;100&q=store&t=Hourly&dp=1&st=Open&sort=date_posted;A)

如果我登录到 oDesk 站点并在浏览器中访问相同的 URL，它会显示公共作业和 oDesk 作业。

那么我怎样才能得到所有的工作呢？我可以使用我的 api 密钥和 api 密钥使用 oAuth 或 REST API 密钥身份验证来获得这些工作吗？如果可能的话，请举例说明如何实现 oAuth 或链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:56:50.353

使用 oAuth 获取所有作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T04:08:39.577

请检查这些链接，[我刚刚创建了一个职位发布。但是，我在找工作时看不到它。发生了什么？](https://kb.odesk.com/questions/583/I+just+created+a+job+posting.+However,+I+do+not+see+it+when+I+do+a+job+search.+What+happened?)以及[在创建职位发布时如何确定要设置的职位可见性？](https://kb.odesk.com/questions/583/I+just+created+a+job+posting.+However,+I+do+not+see+it+when+I+do+a+job+search.+What+happened?)- 这将阐明什么是 oDesk 的私人/公共工作。

然后开始关注 oDesk Developer Wiki (developers.odesk.com) - 检查部分 developers.odesk.com/Authentication 和 developers.odesk.com/Examples

请注意，OAuth 是经过认证的协议，官方网站提供了可供使用的库列表（我们的文档中提供了链接）

当您签署您的请求并以经过身份验证的用户身份运行它时，响应将包含所有作业。

ps developers.odesk.com 是您应该在浏览器中打开的链接，抱歉我不能发布超过 2 个链接

# c# - 如何使用 Object Initializer 为不同的属性分配相同的值

> ID：14480036
> 
> 赞同：1
> 
> 时间：2013-01-23T12:42:50.573
> 
> 标签：c#, object-initializers

我尝试为对象初始化程序中的两个不同属性分配一个值，但失败了。

> 在下面的代码中，我尝试将 Expand 和 Select 属性分配为 true。但我收到错误“**名称 Select 在当前上下文中不存在**”

这是我的代码

```
public class MyClass{
public String Title{get;set;}
public String Key{get;set;}
public bool Expand{get;set;}
public bool Select{get;set;}
public bool Editable{get;set;}
}

new MyClass()
  {
   Title = "Murali",
   Key = "MM",                       
   Expand = Select = true
  } 
```

我还需要根据这两个属性分配另一个可编辑的属性

就像是

```
new MyClass()
  {
   Ediatable=(Select && Expand)
  } 
```

***我该怎么做上述逻辑？Object Initializer 是否支持它？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:46:38.447

您不能在 a 的右侧引用您正在构建的对象的属性`=`，即，您只能分配给属性，但不能从中读取。

可能的解决方案：

```
var expandAndSelect = true;

var result = new MyClass
{
    Title = "Murali",
    Key = "MM",                       
    Expand = expandAndSelect,
    Select = expandAndSelect,
}; 
```

和

```
var select = true;
var expand = false;

var result = new MyClass
{
    Expand = expand,
    Select = select,
    Editable = select & expand,
}; 
```

# authentication - 使用 CFHTTP 登录

> ID：14480038
> 
> 赞同：1
> 
> 时间：2013-01-23T12:42:54.063
> 
> 标签：authentication, login, coldfusion, cfhttp

我正在尝试在 ColdFusion 中创建一个功能，该功能将允许我登录到 EA Sports Web 应用程序，以便我可以检索我的个人资料数据并将其显示在我的网站上。

从他们的登录页面查看源代码，第一步似乎只是一个简单的登录表单：

```
<form method="post" id="login_form" action="https://www.ea.com/uk/football/services/authenticate/login" class="login_form" enctype="application/x-www-form-urlencoded">
    <input type="hidden" name="redirectUrl" value="http://www.ea.com/uk/football/fifa-ultimate-team" />
    <input type="hidden" name="failureUrl" value="http://www.ea.com/uk/football/login?failed=true&amp;redirectUrl=http%3A%2F%2Fwww.ea.com%2Fuk%2Ffootball%2Ffifa-ultimate-team" />
    <input type="hidden" name="captchaFailureUrl" value="http://www.ea.com/uk/football/login?failed=true&amp;redirectUrl=http%3A%2F%2Fwww.ea.com%2Fuk%2Ffootball%2Ffifa-ultimate-team" />
    <input id="email" name="email" class="text" type="text" tabindex="1" />
    <input id="password" name="password" class="text" type="password" tabindex="2" />
    <input type="checkbox" id="stay-signed" name="stay-signed" value="ON" checked="checked" tabindex="3" />
</form> 
```

我正在使用 CFHTTP 请求提交以下内容：

```
<cfhttp url="https://www.ea.com/uk/football/services/authenticate/login" method="POST" result="myResult">
    <cfhttpparam type="header" name="Content-Type" value="application/x-www-form-urlencoded" />
    <cfhttpparam type="formField" name="email" value="#Variables.user#" />
    <cfhttpparam type="formField" name="password" value="#Variables.password#" />
</cfhttp> 
```

当我转储返回的内容时，fileContent 包含以下内容： `<authenticate><success>0</success></authenticate>`我假设这意味着登录没有成功。

我知道我在这里并没有给你太多可玩的东西，但是尝试让登录进行身份验证似乎并没有太多的好处。任何人都可以指出我可能会出错的地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:38:42.893

我不确定这是否能解决您的问题，但是当您远程提交表单时需要考虑一些事项。

首先，您不知道表单背后的逻辑是什么，因此您应该提交表单中的所有内容，以防处理程序需要它。如果它需要一个您未提交的表单字段，则会发生错误并且您将无法登录。

其次，您可以从技术上考虑您的行为，尽管对于您的使用来说是完全合法的，机器人或黑客。目标网站可能希望确保表单实际上正在访问处理程序。他们可能正在查看 HTTP_REFERER，或者他们甚至可能正在做一些更花哨的事情，例如查看会话的持续时间，因为没有人可以在 0.0001 秒内提交表单。在这些情况下，除非您发现他们的安全逻辑存在缺陷，否则您可能根本无法登录。

第三，为了保护网站，一些逻辑还会查看客户端以确保您是真正的浏览器。userAgent 属性的默认值为“COLDFUSION”。如果目标期望更长的时间，或包含有效的浏览器名称，则脚本将假定您是机器人并拒绝请求。不过，解决方案很简单。只需在您的 userAgent 属性中输入一个好的浏览器名称即可。您可以通过转储 cgi 范围来获得您的。这样做的问题是您应该以某种方式对其进行维护，这样您就不会在 5 年后尝试使用旧浏览器，并且目标会说“对不起，伙计”。我们不再支持 IE6...'

```
<cfhttp userAgent = "Mozilla/4.0 (compatible; MSIE 7.0; {...}" ...> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:18:15.467

所有让您登录的网站都需要使用 cookie 来实现这一点，因为这是它们让您保持登录并保持会话的方式。然后，该 cookie 与每个后续页面请求一起发送到服务器，以验证您是否已登录。因此，您需要使用 cfhttp 请求来模拟这一点。见这篇文章 [http://www.bennadel.com/blog/725-Maintaining-Sessions-Across-Multiple-ColdFusion-CFHttp-Requests.htm](http://www.bennadel.com/blog/725-Maintaining-Sessions-Across-Multiple-ColdFusion-CFHttp-Requests.htm)

# c# - 遍历 IEnumerable 导致严重的性能问题

> ID：14480043
> 
> 赞同：0
> 
> 时间：2013-01-23T12:43:16.980
> 
> 标签：c#, performance

当我尝试遍历 IEnumerable 类型时，我对 for 循环的性能发生了什么知之甚少。

以下是导致严重性能问题的代码

```
foreach (IEdge ed in edcol)
{
    IEnumerable<string> row = 
        from r in dtRow.AsEnumerable()
        where (((r.Field<string>("F1") == ed.Vertex1.Name) && 
                (r.Field<string>("F2") == ed.Vertex2.Name))
            || ((r.Field<string>("F1") == ed.Vertex2.Name) &&
                (r.Field<string>("F2") == ed.Vertex1.Name)))
        select r.Field<string>("EdgeId");
    int co = row.Count();
    //foreach (string s in row)
    //{

    //}
    x++;
} 
```

上面的 foreach(IEdge ed in edcol) 有大约 11000 次迭代要完成。如果我删除该行，它会在几分之一秒内运行

```
int co = row.Count(); 
```

从代码。

row.Count() 在所有循环中的最大值为 10。

如果我取消注释

```
//foreach (string s in row)
//{

//} 
```

大约需要 10 分钟才能完成代码的执行。

IEnumerable 类型是否存在如此严重的性能问题.. ??

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T12:54:54.760

这个答案是针对“如何使这个速度更快”的隐含问题？抱歉，如果那不是您*真正*想要的，但是...

您可以遍历行*一次*，按名称分组。（我没有像 Marc 那样进行排序——我只是在查询时查找了两次 :)

```
var lookup = dtRow.AsEnumerable()
                  .ToLookup(r => new { F1 = r.Field<string>("F1"),
                                       F2 = r.Field<string>("F2") }); 
```

然后：

```
foreach (IEdge ed in edcol)
{
    // Need to check both ways round...
    var first = new { F1 = ed.Vertex1.Name, F2 = ed.Vertex2.Name };
    var second = new { F1 = ed.Vertex2.Name, F2 = ed.Vertex1.Name };
    var firstResult = lookup[first];
    var secondResult = lookup[second];

    // Due to the way Lookup works, this is quick - much quicker than
    // calling query.Count()
    var count = firstResult.Count() + secondResult.Count();

    var query = firstResult.Concat(secondResult);

    foreach (var row in query)
    {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:54:46.943

目前你有 O(N*M) 的性能，如果 N 和 M 都很大，这可能是有问题的。我倾向于预先计算一些`DataTable`信息。例如，我们可以尝试：

```
var lookup = dtRows.AsEnumerable().ToLookup(
        row => string.Compare(row.Field<string>("F1"),row.Field<string>("F2"))<0
           ? Tuple.Create(row.Field<string>("F1"), row.Field<string>("F2"))
           : Tuple.Create(row.Field<string>("F2"), row.Field<string>("F1")),
        row => row.Field<string>("EdgeId")); 
```

然后我们可以迭代：

```
foreach(IEdge ed in edCol)
{
    var name1 = string.Compare(ed.Vertex1.Name,ed.Vertex2.Name) < 0
           ? ed.Vertex1.Name : ed.Vertex2.Name;
    var name2 = string.Compare(ed.Vertex1.Name,ed.Vertex2.Name) < 0
           ? ed.Vertex2.Name : ed.Vertex1.Name;

    var matches = lookup[Tuple.Create(name1,name2)];
    // ...
} 
```

（请注意，为方便起见，我在那里强制执行升序字母对）

# php - 致命错误：未捕获的 OAuthException：验证访问令牌时出错：这可能是因为用户注销或系统错误

> ID：14480049
> 
> 赞同：0
> 
> 时间：2013-01-23T12:43:39.463
> 
> 标签：php, facebook-javascript-sdk, facebook-php-sdk

登录我的应用程序时收到此错误。在我看来，只有我有问题。除了我之外，其他能够访问该应用程序的人都能够访问该应用程序。

> 致命错误：未捕获的 OAuthException：验证访问令牌时出错：这可能是因为用户已注销，也可能是由于系统错误。在第 1254 行扔进 /home/dexp/public_html/mascaraza/fb-php-sdk/base_facebook.php

这个问题突然出现了。即使我恢复到我的应用程序的旧备份，问题仍然存在。我尝试在 facebook 上玩其他游戏，效果很好，当我尝试创建一个新应用程序并在上面迁移我的东西时仍然保持不变。我还尝试从我的帐户中删除该应用程序并重新验证该应用程序，但无济于事。

我需要做什么来解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:46:22.653

如[操作方法：处理过期的访问令牌](http://developers.facebook.com/blog/post/500)开发人员博客文章中所述

> 由于各种原因，用户的访问令牌可能会失效。在大多数情况下，如果超过该`expires`字段指定的时间，它们可能会过期（默认情况下，访问令牌的生命周期为 2 小时）。许多开发人员没有意识到，如果用户更改密码、注销或通过 App Dashboard 取消对应用程序的授权，访问令牌也会过期。您的应用程序处理此类情况非常重要。如果您的访问令牌过期，您需要重新获取有效的访问令牌。

在我们可以使用`offline_access`权限来获取不会过期的令牌之前（除非用户与应用程序连接），现在已弃用此权限，请参阅[Deprecation of Offline Access Permission](http://developers.facebook.com/docs/offline-access-deprecation/)以了解如何获得`access_token`更长的过期时间。

**更新：**
截至 2012 年 8 月，Facebook PHP-SDK[增加了简单的扩展方式`access_token`](https://github.com/facebook/facebook-php-sdk/commit/1270f0debaab3b93d683a9817c7adbc7e9e5cdc0)（有关更多详细信息，请参阅[How to extend access token validation since offline_access deprecation](http://facebook.stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation)）

[从这里](https://stackoverflow.com/questions/9060336/error-validating-access-token)提取。

# rabbitmq - RabbitMQ 交换：默认与直接

> ID：14480052
> 
> 赞同：4
> 
> 时间：2013-01-23T12:43:46.250
> 
> 标签：rabbitmq

我有两种想要通过 RabbitMQ 发送的消息。所以我有两个选择如何做到这一点：

*   `routing_key`将消息发送到与队列名称对应的默认空名称交换
*   在队列绑定中使用与消费者参数对应的`direct`交换参数`routing_key``routing_key`

那么哪个选项更可取，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-11T19:15:38.977

默认交换*是*直接交换。RabbitMQ 默认创建默认交换，但它使用空字符串作为名称。如果您查看[RabbitMQ AMQP 概念页面](http://www.rabbitmq.com/tutorials/amqp-concepts.html)，在 Default Exchange 下：

> 默认交换是代理预先声明的没有名称（空字符串）的直接交换。

您也可以通过运行看到这一点`rabbitmqctl list_exchanges`：

```
 direct
Foo             direct    < Same thing as the above
amq.direct      direct
amq.fanout      fanout
...and so on 
```

据我所知，使用其中一个没有任何好处。如果您只需要基于路由键进行路由，我会坚持使用默认交换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-15T17:40:19.880

假设您直接绑定到交换广播日志到路由键“info”、“warn”和“error”。使用默认交换，您需要使用这些名称创建三个不同的队列来接收所有日志；并且调整您收到的日志级别将需要更改您的队列声明。通过使用命名交换，您可以简单地更改队列的绑定并继续正常处理事物。

简而言之，它提供了一个额外的抽象级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-08T19:56:12.447

正如我所看到的，默认的直接交换通过使用队列的名称隐式地将队列（由消费者使用）绑定到交换（由生产者使用），使消费者和生产者有可能不知道彼此。

对于特定情况，我使用默认的直接交换：消费者和生产者彼此不了解。就我而言，每个消费者都有其适当的队列。从生产者那里，我无法提前知道要声明和使用哪些队列，因为这取决于消费者。因此，不可能定义自定义直接交换和生产者端的队列之间的绑定。使用自定义（用户定义的）直接交换解决它的一种方法是在消费者端定义绑定键。但这意味着从消费者方面了解生产者，因为我需要知道生产者使用的交换名称。

因此，在默认的直接交换中通过队列名称自动绑定队列，就我而言，可以只在消费者端声明一个队列，并通过只知道队列的名称从生产者向其发送消息。

当然，这意味着在调用生产者时在运行时知道队列的名称，因为它需要知道自定义直接交换的绑定键（在我的情况下，队列的名称由使用生产者的应用程序给出）。但是在配置代理时，生产者和消费者不必相互了解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-13T10:19:27.890

rabbitmq web manager中的一些描述。
//默认exchange的绑定

*   默认交换

默认交换隐式绑定到每个队列，
路由键等于队列名称。

这是不可能的

*   显式绑定到，或
*   从默认交换解除绑定。
*   也无法删除。

# c - vfork 永无止境

> ID：14480053
> 
> 赞同：2
> 
> 时间：2013-01-23T12:43:46.153
> 
> 标签：c, linux, fork, vfork

下面的代码永远不会结束。这是为什么？

```
#include <sys/types.h>
#include <stdio.h>
#include <unistd.h>
#define SIZE 5
int nums[SIZE] = {0, 1, 2, 3, 4};
int main()
{
  int i;
  pid_t pid;
  pid = vfork();
  if(pid == 0){  /* Child process */
    for(i = 0; i < SIZE; i++){
      nums[i] *= -i;
      printf(”CHILD: %d “, nums[i]);    /* LINE X */
    }
  }
  else if (pid > 0){  /* Parent process */
    wait(NULL);
    for(i = 0; i < SIZE; i++)
      printf(”PARENT: %d “, nums[i]);   /* LINE Y */
  }
  return 0;
} 
```

**更新：**

这段代码只是为了说明我对`vfork()`. 似乎当我使用时`vfork()`，子进程不会复制父进程的地址空间。相反，它共享地址空间。在这种情况下，我希望两个进程都更新 nums 数组，我的问题是按什么顺序？操作系统如何在两者之间同步？

至于为什么代码永远不会结束，可能是因为我没有明确的退出`_exit()`或声明。`exec()`我对吗？

**UPDATE2：**
我刚读到：[**56\. fork() 和 vfork() 系统调用之间的区别？**](http://dev.fyicenter.com/Interview-Questions/UNIX/Difference_between_the_fork_and_vfork_system.html) 我认为这篇文章可以帮助我解决我的第一个困惑。

> 来自 vfork() 系统调用的子进程在父进程的地址空间中执行（这可以覆盖父进程的数据和堆栈），这会挂起父进程直到子进程退出。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T12:50:18.943

引用`vfork(2)`手册页：

> vfork() 函数与 fork() 具有相同的效果，除了如果由 vfork() 创建的进程修改了用于存储来自 vfork() 的返回值的 pid_t 类型的变量以外的任何数据，*则行为未定义*，或从调用 vfork() 的函数返回，或在成功调用 _exit() 或 exec 系列函数之一之前调用任何其他函数。

你正在做一大堆这样的事情，所以你不应该期望它会起作用。我认为这里真正的问题是：为什么你使用`vfork()`而不是`fork()`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T14:26:24.363

不要使用`vfork`. 这是你能得到的最简单的建议。唯一`vfork`能给你的是暂停父母，直到孩子打电话`exec*`或`_exit`。关于共享地址空间的部分是不正确的，一些操作系统这样做，其他选择不这样做，因为它非常不安全并且导致了严重的错误。

上次我研究了应用程序`vfork`在现实中的使用方式，绝大多数人都做错了。太糟糕了，我放弃了在当时正在开发的操作系统上启用地址空间共享的 6 个字符更改。几乎每个使用`vfork`至少的人都会泄漏内存，如果不是更糟的话。

如果您真的想使用，除了立即调用或在子进程中返回后`vfork`不要做任何事情。其他任何事情，您都将进入未定义的领域。我的意思是“任何东西”。你开始解析你的字符串来为你的 exec 调用做参数，你几乎可以保证某些东西会触及它不应该触及的东西。而且我的意思是，不是 exec 家族的其他一些功能。许多 libc 在, ,等中做一些在上下文中不安全的事情。`_exit``execve``execve``execvp``execl``execle``vfork`

*您的示例中具体发生了什么：*

> 如果您的操作系统共享地址空间，则从 main 返回的孩子意味着您的环境已清理干净（因为您调用了 printf，所以刷新标准输出、由 printf 分配的空闲内存等）。这意味着还有其他调用的函数将覆盖父级卡在的堆栈帧。`vfork`返回父级返回已被覆盖的堆栈帧并且任何事情都可能发生，它甚至可能在堆栈上没有返回地址返回了。你先调用printf进入未定义行为国家，然后main返回带你进入未定义行为大陆，main返回后的清理运行使你旅行到未定义行为星球。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:50:06.667

来自[官方规范](http://pubs.opengroup.org/onlinepubs/009695399/functions/vfork.html)：

> 如果 vfork() 创建的进程修改了除用于存储 vfork() 返回值的 pid_t 类型变量以外的任何数据，则行为未定义，

在您的程序中，您修改变量以外的数据`pid`，这意味着行为未定义。

您还必须调用[`_exit`](http://linux.die.net/man/2/_exit)以结束进程，或调用[`exec`](http://linux.die.net/man/3/exec)函数族之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T12:49:25.393

孩子必须`_exit`而不是从`main`. 如果子进程从 中返回`main`，则父进程从 中返回时的堆栈帧不存在`vfork`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T13:13:16.873

只需调用 _exit 而不是调用 return 或将 _exit(0) 插入“子进程”的最后一行。return 0 在关闭标准输出时调用 exit(0)，所以当另一个 printf 跟随时，程序崩溃。

# php - Symfony HttpFoundation 组件上的授权库

> ID：14480056
> 
> 赞同：0
> 
> 时间：2013-01-23T12:43:50.043
> 
> 标签：php, authentication, symfony

任何人都可以知道使用 Symfony HttpFondation 组件对用户进行身份验证的库吗？

PS Symfony 安全组件不适合，因为太大。PPS 项目不使用 Symfony 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:48:10.610

我认为没有（目前）。

[PPI 框架](https://github.com/ppi/framework)使用了一些 Symfony 组件（还有 HttpFoundation）。看看他们是如何解决的。否则你可能需要自己处理。

# sql - 消息 102，级别 15，状态 1，第 2 行 ',' 附近的语法不正确，试图 INSERT INTO

> ID：14480063
> 
> 赞同：3
> 
> 时间：2013-01-23T12:44:11.457
> 
> 标签：sql, sql-server

我已经成功创建了数据库和表，但是当我尝试填充一个表时，就像这样

```
INSERT INTO Products(IsProductActive,ProductName,ProductCount) 
VALUES(0,'productName1',0),
      (0,'productName2',0),
      (1,'productName3',9),
      (1,'productName4',7),
      (1,'productName5',3),
      (1,'productName6',10),
      (0,'productName7',0),
      (1,'productName8',6),
      (1,'productName9',12),
      (1,'productName10',20);
GO 
```

我有一个错误：

> 消息 102，级别 15，状态 1，
> 
> 第 2 行 ',' 附近的语法不正确。

首先是哪个'，'，其次 - 有什么问题？PS：如果需要，我使用 MS Management Studio v 9.0...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:45:34.623

SQL Server 2005 及以下版本不支持多 VALUE 子句语法

SQL Server 2005 是第 9 版...

请参阅[如何插入多行而不重复语句的“INSERT INTO dbo.Blah”部分？](https://stackoverflow.com/q/2624713/27535)更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:45:53.683

如果您使用`SQL SERVER 2005`及以下，则查询将不起作用，因为它不支持多值子句插入语句。你应该一一插入。

像下面这张，

```
INSERT INTO Products(IsProductActive,ProductName,ProductCount) 
VALUES(0,'productName1',0)
GO
INSERT INTO Products(IsProductActive,ProductName,ProductCount) 
VALUES(0,'productName2',0)
GO 
```

# nhibernate - NHibernate 配置：Configure(pathToXml) vs AddXmlFile(pathToXml)？

> ID：14480074
> 
> 赞同：0
> 
> 时间：2013-01-23T12:44:44.067
> 
> 标签：nhibernate, nhibernate-configuration

有什么区别

[`Configuration.Configure(string)`](http://mausch.github.com/nhibernate-3.2.0GA/html/40af7584-6883-8989-2b39-162c32df64c4.htm)`//Configure NHibernate using the file specified.`

和

[`Configuration.AddXmlFile(string)`](http://mausch.github.com/nhibernate-3.2.0GA/html/7af5b9da-0969-5f42-d206-771bfe74cd5e.htm)`//Read mappings from a particular XML file.`

?

看起来后者的功能是前者的一个子集，但有人愿意详细说明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:57:06.583

第一个是配置方言，驱动程序和其他配置属性。

如果要将附加的 XML 映射 (HBM) 文件附加到现有配置对象，则使用第二个。

例如，使用 FluentNHibernate 创建一个配置，然后附加一个经典的 XML 映射（例如，在将遗留 NH 应用程序迁移到 FNH 时）。

# android - 操作栏/菜单默认图标

> ID：14480075
> 
> 赞同：2
> 
> 时间：2013-01-23T12:44:46.193
> 
> 标签：android, android-icons

我有一个菜单，其中包含一个带有 sdk 附带图标的项目（来自 skd/platform/...）。在 ICS 中它显示得很好（深色操作栏，浅色图标），但在 android 2.2 中，您看不到图标，因为默认主题是白色的，图标也是如此。有没有办法访问android默认图标，比如使用搜索栏时，图标在所有android版本上都正确显示？有没有办法访问android默认图标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T13:04:23.307

如果您在 XML 中定义菜单，那么这样的操作将确保始终从相应的 SDK 可绘制对象中获取图标。

```
<item
    android:id="@+id/menuID"
    android:icon="@android:drawable/ic_menu_add"
    android:showAsAction="always"
    android:title="Some Label">
</item> 
```

如果您在 Java 代码中添加菜单项，应该这样做：

```
menu.add(1, 1, 1, "Some Label").setIcon(android.R.drawable.ic_menu_add); 
```

注意：您应该检查您打算使用的图标是否在所有平台上都是通用的，以确保为您的用户提供统一且无错误的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:03:01.213

是的，这里使用 android 首选项/设置图标作为其图标的菜单项。

```
<item
    android:id="@+id/menu_settings"
    android:icon="@android:drawable/ic_menu_preferences"
    android:orderInCategory="100"
    android:showAsAction="always|withText"
    android:title="@string/menu_settings"/> 
```

有关图标的完整列表，请查看 R.drawable 类的文档。

[http://developer.android.com/reference/android/R.drawable.html](http://developer.android.com/reference/android/R.drawable.html)

对于查看所有图标的应用程序，请参阅 [如何预览 R.drawable.* 图像](https://stackoverflow.com/questions/1905128/how-to-preview-r-drawable-images)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-09T05:24:27.497

首先将 actionOverFlowButtonStyle 添加到您的主题中

```
 <style name="AppTheme" parent="AppBaseTheme">

        <item name="android:actionOverflowButtonStyle">@style/MyActionButtonOverflow</item>
    </style> 
```

定义流按钮的新样​​式

```
<style name="MyActionButtonOverflow" parent="android:style/Widget.Holo.Light.ActionButton.Overflow">
    <item name="android:src">@drawable/ic_menu</item>
</style> 
```

# ruby - NameError（未初始化的常量 ActionDispatch::ExceptionWrapper）：

> ID：14480085
> 
> 赞同：5
> 
> 时间：2013-01-23T12:45:19.680
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1

无论我在我的应用程序中遇到什么错误，我都无法在我的日志中看到错误正在收到以下消息，说明我面临的所有错误，所以我无法解决我的错误，谁能帮我解决这个问题。？？

```
Completed 500 Internal Server Error in 729ms

NameError (uninitialized constant ActionDispatch::ExceptionWrapper):

Rendered /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.1.3/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
Rendered /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.1.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
Rendered /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.1.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.7ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:04:21.127

你有`meta_request`安装gem吗？`meta_request`我也有这样的错误，并通过删除gem来摆脱它。

# android - 安卓。如何使用 android.media.effect 包？

> ID：14480088
> 
> 赞同：2
> 
> 时间：2013-01-23T12:45:30.080
> 
> 标签：android, video, effects

在 Android API livel 14 中添加了 android.media.effect 包。但是没有很多关于它的文档。我有兴趣将视觉效果应用于视频。

有没有人有一个教程或文本项目来解释如何将效果应用于视频？谢谢。

# ruby-on-rails - 使 serializable_hash 急切加载

> ID：14480090
> 
> 赞同：0
> 
> 时间：2013-01-23T12:45:33.800
> 
> 标签：ruby-on-rails, serialization, eager-loading, rails-activerecord

我有一个函数，`Appointment#serializable_hash`看起来像这样：

```
 def serializable_hash(options={})
    options = { 
      :methods => %w( 
        notes
        client
        services
        products
        has_payments
        start_time_ymd
        start_time_time
        calculated_length
        day_of_week_index
        services_with_info
        products_with_info
        payments_with_info
        stylist_name_index
        time_block_type_code
        client_name_that_fits
        minutes_since_midnight
        generous_calculated_length
      )}.update(options)
    super(options)
  end 
```

当我在现有`Appointment`对象上调用该函数时，SQL 运行如下所示：

```
 Appointment Load (4.6ms)  SELECT "appointment".* FROM "appointment" ORDER BY start_time DESC LIMIT 1
  Appointment Load (0.6ms)  SELECT "appointment".* FROM "appointment" WHERE "appointment"."id" = $1 LIMIT 1  [["id", 4533]]
  Client Load (0.7ms)  SELECT "client".* FROM "client" WHERE "client"."id" = 398 LIMIT 1
  Address Load (0.5ms)  SELECT "address".* FROM "address" WHERE "address"."id" = 10 LIMIT 1
   (15.4ms)  SELECT COUNT(*) FROM "payment" WHERE "payment"."appointment_id" = 4533
  TimeBlockType Load (11.1ms)  SELECT "time_block_type".* FROM "time_block_type" WHERE "time_block_type"."id" = 2 LIMIT 1
  AppointmentService Load (30.3ms)  SELECT "appointment_service".* FROM "appointment_service" WHERE "appointment_service"."appointment_id" = 4533
  Service Load (18.7ms)  SELECT "service".* FROM "service" WHERE "service"."id" = 295 ORDER BY name LIMIT 1
  AppointmentProduct Load (6.2ms)  SELECT "appointment_product".* FROM "appointment_product" WHERE "appointment_product"."appointment_id" = 4533
  Payment Load (0.5ms)  SELECT "payment".* FROM "payment" WHERE "payment"."appointment_id" = 4533
  Stylist Load (15.5ms)  SELECT "stylist".* FROM "stylist" WHERE "stylist"."active" = 't' AND "stylist"."id" = 84 LIMIT 1
  StylistEmploymentType Load (0.7ms)  SELECT "stylist_employment_type".* FROM "stylist_employment_type" WHERE "stylist_employment_type"."code" = 'CHAIR_RENTAL' LIMIT 1
  Salon Load (0.7ms)  SELECT "salon".* FROM "salon" WHERE "salon"."id" = 29 LIMIT 1
  Stylist Load (1.0ms)  SELECT "stylist".* FROM "stylist" WHERE "stylist"."active" = 't' AND (salon_id = 29 AND active = true AND name != 'R.')
  StylistEmploymentType Load (0.3ms)  SELECT "stylist_employment_type".* FROM "stylist_employment_type" WHERE "stylist_employment_type"."code" = 'CHAIR_RENTAL' LIMIT 1
  StylistEmploymentType Load (0.3ms)  SELECT "stylist_employment_type".* FROM "stylist_employment_type" WHERE "stylist_employment_type"."code" = 'CHAIR_RENTAL' LIMIT 1
  StylistEmploymentType Load (0.3ms)  SELECT "stylist_employment_type".* FROM "stylist_employment_type" WHERE "stylist_employment_type"."code" = 'CHAIR_RENTAL' LIMIT 1
  StylistEmploymentType Load (0.3ms)  SELECT "stylist_employment_type".* FROM "stylist_employment_type" WHERE "stylist_employment_type"."code" = 'CHAIR_RENTAL' LIMIT 1
  StylistEmploymentType Load (0.3ms)  SELECT "stylist_employment_type".* FROM "stylist_employment_type" WHERE "stylist_employment_type"."code" = 'CHAIR_RENTAL' LIMIT 1
  StylistEmploymentType Load (0.2ms)  SELECT "stylist_employment_type".* FROM "stylist_employment_type" WHERE "stylist_employment_type"."code" = 'CHAIR_RENTAL' LIMIT 1
  Service Load (3.6ms)  SELECT "service".* FROM "service" INNER JOIN "appointment_service" ON "service"."id" = "appointment_service"."service_id" WHERE "appointment_service"."appointment_id" = 4533 ORDER BY name
  Product Load (16.5ms)  SELECT "product".* FROM "product" INNER JOIN "appointment_product" ON "product"."id" = "appointment_product"."product_id" WHERE "appointment_product"."appointment_id" = 4533 ORDER BY brand_id, name 
```

显然，这比它可能的效率要低。如何`serializable_hash`在尽可能少的查询中运行？有没有更好的方法来做我正在做的事情，而不是参与`serializable_hash`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-22T18:50:56.207

我的问题来自一个糟糕的设计，我使用[RABL](https://github.com/ccocchi/rabl-rails)修复了我的糟糕设计。

# symfony - Symfony2 - preferred_choices 返回错误

> ID：14480092
> 
> 赞同：0
> 
> 时间：2013-01-23T12:45:40.023
> 
> 标签：symfony

我想`preferred_choices`在我的实体表单中使用：

```
public function buildForm(FormBuilderInterface $builder, array $options) {
    $builder->add('id','entity', array(
        'class'=>'GameShelf\UsersBundle\Entity\OwnState',
        'property' => 'name',
        'attr' => array('class'=>'chzn-select selectBig', 'data-placeholder'=>'Mam...'),
        'label' => ' ',
        'empty_value' => '',
        'preferred_choices' => array($options['selected'])
    ));
}

public function getDefaultOptions(array $options) {
    return array(
        'data_class' => 'GameShelf\UsersBundle\Entity\OwnState',
        'selected' => 1
    );
} 
```

但它返回一个错误：`Warning: spl_object_hash() expects parameter 1 to be object, integer given`. 我的错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:04:49.437

尝试用 getDefaultOptions() 中的完整实体对象替换 (int)1

（[https://github.com/symfony/symfony/pull/5277](https://github.com/symfony/symfony/pull/5277)）

# javascript - 本地登录/注册 Android Phonegap

> ID：14480102
> 
> 赞同：1
> 
> 时间：2013-01-23T12:46:26.133
> 
> 标签：javascript, android, jquery, cordova, login

我正在尝试在我的应用程序中开发本地注册程序，以便用户能够在本地注册，并使用他的个人用户名和密码登录。

有人可以给我一个简单的例子我怎么能做到这一点？这意味着我如何在注册时存储本地用户名和密码输入，然后使用这些数据登录？

例如，这将是我的登录和注册 html 页面：

```
<body onload="init()">

<div id="loginPage" data-role="page">

    <div data-role="header">
        <h1>Registration/Login Demo</h1>
    </div>

     <div data-role="content">    

         <form id="loginForm">
         <div data-role="fieldcontain" class="ui-hide-label">
             <label for="username">Username:</label>
             <input type="text" name="username" id="username" value=""     placeholder="Username" />
         </div>

    <div data-role="fieldcontain" class="ui-hide-label">
        <label for="password">Password:</label>
        <input type="password" name="password" id="password" value="" placeholder="Password" />
    </div>

    <div data-role="fieldcontain" class="ui-hide-label">
        <label for="password">Re-enter Password:</label>
        <input type="password" name="password" id="password" value="" placeholder="Password" />
    </div>

    <input type="submit" value="Login" id="submitButton">
    </form>

</div> 
```

我如何构建我的 js 文件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:49:34.373

您可以使用 Cordova 的 Storage API，它*提供了对设备存储选项的访问，*因为您喜欢将进程保持在本地，您可以使用两个选项来实现此目标；一种是数据库，另一种是本地存储。 [在此处](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html)查找存储 API 文档

# asp.net - 如何在 asp.net 中将 Jqgrid 过滤后的数据导出到 Excel 中

> ID：14480103
> 
> 赞同：0
> 
> 时间：2013-01-23T12:46:28.883
> 
> 标签：asp.net, excel, jqgrid, export-to-excel

我现在使用 Asp.net 制作了一个 Jqgrid 用于显示带有 filterToolbar 选项的数据库 根据我的需要，我希望将过滤后的数据导出到 .excel 格式中。

我在这里发布我的代码....

```
var categoriesStr = ":All;1:vikas;2:Ankur";
    $(function () {
        $("#UsersGrid").jqGrid({
            url: 'jqGridHandler.ashx',
            datatype: 'json',
            height: 250,
            colNames: ['UserID', 'UserName', 'FirstName', 'MiddleName', 'LastName', 'EmailID'],
            colModel: [
                    { name: 'UserID', index: 'UserID', width: 100, sortable: true },
                    { name: 'UserName', width: 100, sortable: true, formatter: 'select',stype: 'select', searchoptions: { sopt: ['eq'], value: categoriesStr} },
                    { name: 'FirstName', width: 100, sortable: true },
                    { name: 'MiddleName', width: 100, sortable: true },
                    { name: 'LastName', width: 100, sortable: true },
                    { name: 'EmailID', width: 150, sortable: true },
                   // { name: 'ContactNo', width: 150, sortable: true },
                    //{ name: 'Address', width: 150, sortable: true }
                ],
            rowNum: 10,
            rowList: [10, 20, 30],
            pager: '#UsersGridPager',
            sortname: 'UserID',
            viewrecords: true,
            sortorder: 'asc',
            autowidth:true

            //caption: 'JSON Example'
        });

        $("#UsersGrid").jqGrid('navGrid', '#UsersGridPager', { edit: false, add: false, del: false,search:false });

       $("#UsersGrid").jqGrid('filterToolbar', { stringResult: true, searchOnEnter: true, defaultSearch: 'cn' });
$("#UsersGrid").jqGrid('navButtonAdd', '#UsersGrid-pager',{ caption: "Filter", title: "Toggle Searching Toolbar",buttonicon: 'ui-icon-search',onClickButton: function () {$("#UsersGrid")[0].toggleToolbar(); }
}); 
```

PLZ伙计们帮我完成我的任务。谢谢提前...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:11:42.520

我认为您应该阅读[答案的](https://stackoverflow.com/a/13957161/315935)**更新**部分。您可以下载我为答案创建[的演示项目。](http://www.ok-soft-gmbh.com/jqGrid/ExportToExcel.zip)我建议使用[Open XML SDK 2.5](http://www.microsoft.com/en-us/download/details.aspx?id=30425)（或[Open XML SDK 2.0](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=c6e744e5-36e9-45f5-8d8c-331df206e0d0&displaylang=en)，如果您只能使用 .NET 3.5）将数据导出到 excel。使用 HTML 表格作为伪 Excel 导出的更常见方式可能会产生错误的数据导入。我在[另一个答案](https://stackoverflow.com/a/11263503/315935)中详细描述了这些问题。

我想[答案的](https://stackoverflow.com/a/13957161/315935)**更新**部分提供了您所需要的内容（或者您可以轻松修改演示以获得您需要的解决方案）。

# c# - 从 Web 角色重新启动 Azure 辅助角色

> ID：14480105
> 
> 赞同：2
> 
> 时间：2013-01-23T12:46:34.417
> 
> 标签：c#, azure, azure-web-roles, azure-worker-roles

我有一个工作角色，每 X 小时执行一次代码（获取数据并将其存储到 Azure SQL）。计时是在 Run 方法的 while(true) 循环中使用 Thread.Sleep 实现的。

在 Web 角色中，我希望能够手动启动 Worker Role 中的代码（在我的情况下手动 fecth 并存储数据）。我发现可以使用 Azure 管理 API 重新启动整个 Worker 角色，但这似乎有点过头了，特别是查看证书所需的所有工作。

有没有更好的方法从 Web 角色重新启动 Worker 角色，或者让 Worker 角色中的代码按需从 Web 角色运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:36:50.297

好吧，我建议您使用 Azure Fluent Management（它在内部使用服务管理 API）。查看“[部署到 Windows Azure](http://fluentmanagement.elastacloud.com/deployments/) ”页面。

您将要执行以下操作：

*   云服务：mywebapp.cloudapp.net
    *   生产槽
        *   角色：MyMvcApplication
*   云服务：mybackgroundworker.cloudapp.net
    *   生产槽
        *   **没有部署**

因此，您通常会使用 Web 角色运行云服务，仅此而已。您接下来要做的是创建 Worker 角色、添加代码、将其打包到 cspkg 文件并将其上传到 blob 存储。

最后，您的 Web 角色中会有一些代码，可以通过在本地下载包然后运行类似于以下的代码来将 Worker 角色部署（或删除）到其他云服务：

```
 var subscriptionManager = new SubscriptionManager(TestConstants.SubscriptionId);
 var deploymentManager = subscriptionManager.GetDeploymentManager();

 deploymentManager
       .AddCertificateFromStore(Constants.Thumbprint)
       .ForNewDeployment(TestConstants.HostedServiceName)
       .SetCspkgEndpoint(@"C:\mypackage")
       .WithNewHostedService("myelastatestservice")
       .WithStorageAccount("account")
       .AddDescription("my new service")
       .AddLocation(LocationConstants.NorthEurope)
       .GoHostedServiceDeployment(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:43:39.720

将事件发布到 Azure 队列、将 blob 发布到 Azure Blob、更改 Azure 表中的记录甚至在 SQL Azure 中进行一些更改之类的任何操作都将起作用 - Web 角色将执行更改，而辅助角色将等待该更改. 也许 Azure Queues 将是最干净的方式，尽管我不确定。

您应该注意的一件非常重要的事情是，如果您决定使用轮询 - 例如查询 blob 直到它出现 - 您应该在查询之间插入延迟，否则此代码：

```
while( true ) {
   if( storage.BlobExists( blobName ) ) {
       break;
   }
} 
```

会冲进存储，你会遇到离谱的交易费用。在 SQL Azure 的情况下，您不会看到任何费用，但您会浪费服务容量，这将减慢您排队到 SQL Azure 的其他操作。

这是应该如何做的：

```
while( true ) {
   if( storage.BlobExists( blobName ) ) {
       break;
   }
   // value should not be less that several hundred (milliseconds)
   System.Threading.Thread.Sleep( 15 * 1000 );
} 
```

# c++ - c++/加油站或汽油泵程序

> ID：14480106
> 
> 赞同：-5
> 
> 时间：2013-01-23T12:46:37.753
> 
> 标签：c++

这是我用 turbo c++ 编写的程序，基本上我已经用它来计算以特定数量购买的汽油或柴油升数；问题是它没有单独显示汽油和柴油，请运行它并告诉我我做错了什么？

```
#include<iostream.h>
#include<conio.h>

void main()
{
    clrscr();
    double amount,res;
    char ch;
    cout<<"Welcome to Bharat Petroleum"<<endl;
    cout<<"Press P for Petrol and D for Diesel:"<<endl;
    cin>>ch;
    {
        if (ch=='P')
            cout<<"Enter your Amount:"<<endl;
        cin>>amount;
        res=(amount/68)*1;
        cout<<"Petrol purchased in litres:"<<endl<<res;
    }
    {
        if (ch=='D')
            cout<<"Enter your Amount:"<<endl;
        cin>>amount;
        res=(amount/48)*1;
        cout<<"Diesel purchased in litres:"<<endl<<res;
    }
    getch();
} 
```

// 其中汽油是 68 卢比 (inr)/升，柴油是 48//

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:49:29.680

Your braces are wrong, so only the first line after the `if` is bound to it. Try this:

```
if (ch=='P')
{
  cout<<"Enter your Amount:"<<endl;
  cin>>amount;
  res=(amount/68)*1;
  cout<<"Petrol purchased in litres:"<<endl<<res;
} 
else if (ch=='D')
{
  cout<<"Enter your Amount:"<<endl;
  cin>>amount;
  res=(amount/48)*1;
  cout<<"Diesel purchased in litres:"<<endl<<res;
} 
```

If you want to generalize this to other types of fuel, you cound use an `std::map<std::string, double>` matching fuel type strings to prices:

```
std::map <std::string, double fuelPrices;
fuelPrices["P"] = 68.;
fuelPrices["D"] = 48.;
fuelPrices["CNG"] = ....; 
```

Then, read the fuel type into a tring instead of a `char`:

```
std::string fuel;
....
cin >> fuel; 
```

Then you can check if the fuel type is in the map, and take action:

```
if (fuelPrices.find(fuel) != fuelPrices.end())
{
  // fuel is in map
  cout<<"Enter your Amount:"<<endl;
  cin>>amount;
  double res=(amount/fuelPrices[fuel])*1;
  cout<< fuel << " purchased in litres:"<<endl<<res;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:51:02.040

The braces are at wrong places.

The braces come for the `if` block or `else` block and not before the if or elseblock.

```
if(petrol)
{
//petrol - no of litres calculation
}
else if(diesel)
{
//diesel- no of litres calculation
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T12:53:07.270

我没有运行它，因为我目前无法检查。我不确定'turbo' c++ 是否有不同的语法，但你的'if'语句在错误的地方有'{'（开放范围），应该在if语句之后的行：

```
{
    if (ch=='P')
          blah; // only this will be done if the statement is true
    ...
} 
```

应该：

```
if (ch=='P')
{
    ...  //Now all of the code int eh brackets will be done if the if statement is true
} 
```

# xml - delphi：命令行传递带有引号的xml

> ID：14480107
> 
> 赞同：0
> 
> 时间：2013-01-23T12:46:38.607
> 
> 标签：xml, windows, delphi, console

我面临一个问题。我将带有属性的 xml 以及其他参数传递给控制台应用程序。

我给出了正在发送的字符串。

```
/menu mycmd "print abc=myfile.txt,XML=<Action UIStatus="011" _UIDS="Action" StartingNumber="00004" EndingNumber="00006" FromLabel="Include" All="TRUE" />" 
```

我在控制台中得到的字符串是

```
/menu mycmd print file=myfile.txt,XML=<Action UIStatus=011 _UIDS=Action StartingNumber=00004 EndingNumber=00004 FromLabel=Include All=TRUE /> 
```

引号不见了。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:04:10.663

引号被外壳吸收。如果您希望您的报价不被吸收，请避开它​​们。IE

```
/menu mycmd \"print abc=myfile.txt,XML=\" 
```

你在什么样的控制台上工作？代表什么`/menu`？那是你的命令行提示符吗？

# android - Android 卸载 listview 图像

> ID：14480116
> 
> 赞同：3
> 
> 时间：2013-01-23T12:46:53.377
> 
> 标签：android, image, listview

请原谅我的英语，我是法国人！

所以，我有一个小问题......你知道在列表视图中**卸载图像的干净方法吗？**我想显示可见项目的图像，并释放内存，卸载其他项目的图像......

可能在 OnScrollListener 中？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:07:35.817

实际上`ListView`是这样设计的，用户不必费心加载和卸载它的数据。

您正在提供一个`Adapter`包含所有数据（项目）的内容，并将其添加`Adapter`到您的`ListView`内容中，而后者又知道如何管理这些项目 - 基本上它只加载来自适配器的那些对手机用户可见的项目。

很少有内置的适配器，例如`SimpleCursorAdapter`，大多数时候足以满足简单的需求。但是如果你想要更多的扩展可用性，你宁愿编写自己的适配器，这实际上并不难。在本教程中，您可以阅读有关编写自己的适配器的信息：[http ://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

您还可以阅读更多关于`ListView`Android 文档的信息：http: [//developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:49:28.437

ListView 使用转换后的项目。所以你得到的只是比实际看到的多 2 或 3 件物品。您不必卸载这些图像。实际上最好不要这样做，因为那会减慢您的应用程序的速度。

重要的部分是：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) ctx
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(R.layout.your_item, null);
        }

  // set images on view
} 
```

# java - 无法更新数据库

> ID：14480121
> 
> 赞同：0
> 
> 时间：2013-01-23T12:47:13.500
> 
> 标签：java, mysql

我的APP：niaola.cloudfoundry.com java 1.6 mysql5.1

选择代码

```
 update yy_desklist set isok=? where 
     isok=? and timedrelease<=? Parameters: [1, 0, 1358929049] 
```

错误日志：

```
 at java.lang.Thread.run(Thread.java:662)
      Caused by: java.sql.SQLException: UPDATE command denied to user 'uHHztgqtQsbK9'@
      '172.30.49.102' for table 'yy_desklist' Query: update yy_desklist set 
       isok=? where isok=? and timedrelease<=? Parameters: [1, 0, 1358929049]
                at org.apache.commons.dbutils.QueryRunner.rethrow(QueryRunner.java:542)
                at org.apache.commons.dbutils.QueryRunner.update(QueryRunner.java:599)
                at com.niaola.yangyun.db.QueryHelper.update(QueryHelper.java:300)
                ... 44 more
      com.niaola.yangyun.db.DBException: java.sql.SQLException: UPDATE command denied
      to user 'uHHztgqtQsbK9'@'172.30.49.102' for table 'yy_desklist' Query: update 
      yy_desklist set isok=? where isok=? and timedrelease<=? 
      Parameters: [1, 0,1358930631] at com.niaola.yangyun.db.QueryHelper.update(QueryHelper.java:302)
      at com.niaola.yangyun.mvc.TempletsClass.getTimedList(TempletsClass.java:57) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:53:45.160

用户“uHHztgqtQsbK9”似乎没有更新权限。

您需要使用管理员用户授予所需的权限。

```
GRANT  SELECT,INSERT,UPDATE,DELETE ON `db`.* TO 'user'@'host'; 
```

有关更详细的说明，您应该查阅[Mysql 文档 - 账户管理声明](http://dev.mysql.com/doc/refman/5.0/en/account-management-sql.html)

# javascript - jquery ajax调用更新进度条

> ID：14480122
> 
> 赞同：0
> 
> 时间：2013-01-23T12:47:24.870
> 
> 标签：javascript, jquery

我想用特定进程的完成百分比值更新 jquery 进度条值。基本上我有以下功能：

```
function updateProgressBar() {

$.ajax({
    url: "WebService/DataServices.asmx/getPercentage",
    dataType: "text",
    type: "POST",
    data: {},
    success: function (value) {
        $("#progress2").html(value);          
        $("#progress-sample").progressbar({
            value: parseInt(value)
        });
    }
});
} 
```

该函数基本上向计算完成百分比的 webmethod getPercentage 发出 ajax 请求。然后使用每 5 秒调用一次该函数

```
$(document).ready(setInterval(updateProgressBar, 5000)); 
```

由于某种原因，在运行 Web 应用程序时未设置进度条值。我添加了一个`div`带有 id`progress2`的值，并且成功反映了该值，但不是进度条值。设置硬编码的进度条值时，它可以正常工作。请问有什么想法吗？

谢谢

# 2d-games - 如何检测三角形和矩形的交点？

> ID：14480124
> 
> 赞同：3
> 
> 时间：2013-01-23T12:47:40.087
> 
> 标签：2d-games, collision

我正在开发一个Android游戏，我想知道如何检测一个知道它的位置（x和y）、宽度和高度的矩形和一个知道x、y、宽度和高度的三角形的碰撞。三角形始终是直角三角形，因为将矩形与其对角线相除，因此 (x,y) 参数将是斜边中的一个位置，而不是三角形的中心。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T12:05:57.637

我终于使用函数 intersect for two lines 完成了这项工作。线由初始点 (x,y) 和终点 (x,y) 定义

```
// a1 is line1 start, a2 is line1 end, b1 is line2 start, b2 is line2 end
 static boolean intersects(Vector2 a1, Vector2 a2, Vector2 b1, Vector2 b2)
{
    Vector2 intersection = Vector2.Zero();

    Vector2 b = Vector2.Subtract(a2,a1);
    Vector2 d = Vector2.Subtract(b2,b1);
    float bDotDPerp = b.getX() * d.getY() - b.getY() * d.getX();

    // if b dot d == 0, it means the lines are parallel so have infinite intersection points
    if (bDotDPerp == 0)
        return false;

    Vector2 c = Vector2.Subtract(b1,a1);
    float t = (c.getX() * d.getY() - c.getY() * d.getX()) / bDotDPerp;
    if (t < 0 || t > 1)
        return false;

    float u = (c.getX() * b.getY() - c.getY() * b.getX()) / bDotDPerp;
    if (u < 0 || u > 1)
        return false;

    intersection = Vector2.Sum(a1,Vector2.Multiply(b,t));

    return true;
} 
```

要知道三角形是否与矩形相交，请检查三角形中的每条线与带有上述函数的矩形中的每条线的交点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:05:47.110

看看[伟大的多边形相交库](http://www.angusj.com/delphi/clipper.php)。您可以在 Android 上使用 C++ 版本。

另一种可能性是用三角形光栅化矩形的图像和另一个图像，最后逐像素检查两个图像之间是否有任何交集。

# android - 通过 VBO 将附加数据传递给片段着色器 - DynamicSpriteBatch

> ID：14480125
> 
> 赞同：8
> 
> 时间：2013-01-23T12:47:48.087
> 
> 标签：android, opengl-es, shader, andengine, vbo

我正在使用 AndEngine 学习 opengl 着色器，我的目标是使用一些 lightshader 制作 DynamicSpriteBatch，其中灯光位置将通过 vbo 传递到 spritebatch 中的每个绘制调用，这样我就可以操纵每个精灵上的光源。

所以我创建了 LightSpriteBatch （使用 drawtype.dynamic ）

```
public class LightSpriteBatch extends Shape {
// ===========================================================
// Constants
// ===========================================================

private static final float[] VERTICES_TMP = new float[8];

private static final Transformation TRANSFORATION_TMP = new Transformation();

public static final int VERTEX_INDEX_X = 0;
public static final int VERTEX_INDEX_Y = 1;

public static final int COLOR_INDEX = 2;

public static final int TEXTURECOORDINATES_INDEX_U = 3;
public static final int TEXTURECOORDINATES_INDEX_V = 4;

public static final int LIGHT_POSITION_INDEX_X = 5;
public static final int LIGHT_POSITION_INDEX_Y = 6
        ;

public static final int VERTEX_SIZE = 2 + 1 + 2 + 2 ;
public static final int VERTICES_PER_SPRITE = 6;
public static final int SPRITE_SIZE = VERTEX_SIZE * VERTICES_PER_SPRITE;

public static final VertexBufferObjectAttributes VERTEXBUFFEROBJECTATTRIBUTES_DEFAULT = new VertexBufferObjectAttributesBuilder(4)
.add(ShaderProgramConstants.ATTRIBUTE_POSITION_LOCATION, ShaderProgramConstants.ATTRIBUTE_POSITION, 2, GLES20.GL_FLOAT, false)
.add(ShaderProgramConstants.ATTRIBUTE_COLOR_LOCATION, ShaderProgramConstants.ATTRIBUTE_COLOR, 4, GLES20.GL_UNSIGNED_BYTE, true)
.add(ShaderProgramConstants.ATTRIBUTE_TEXTURECOORDINATES_LOCATION, ShaderProgramConstants.ATTRIBUTE_TEXTURECOORDINATES, 2, GLES20.GL_FLOAT, false)
.add(LightShader.ATTRIBUTE_LIGHT_POSITION_LOCATION, LightShader.ATTRIBUTE_LIGHT_POSITION, 2, GLES20.GL_FLOAT, false)
.build(); 
```

灯光着色器

```
public class LightShader extends ShaderProgram {
// ===========================================================
// Constants
// ===========================================================

private static LightShader INSTANCE;
public static final String ATTRIBUTE_LIGHT_POSITION = "a_lightPosition";
public final static int ATTRIBUTE_LIGHT_POSITION_LOCATION = 4;

public static final String VERTEXSHADER =
        "uniform mat4 " + ShaderProgramConstants.UNIFORM_MODELVIEWPROJECTIONMATRIX + ";\n" +
        "attribute vec4 " + ShaderProgramConstants.ATTRIBUTE_POSITION + ";\n" +
        "attribute vec4 " + ShaderProgramConstants.ATTRIBUTE_COLOR + ";\n" +
        "attribute vec2 " + ShaderProgramConstants.ATTRIBUTE_TEXTURECOORDINATES + ";\n" +
        "attribute vec2 " + LightShader.ATTRIBUTE_LIGHT_POSITION + ";\n" +
        "varying vec4 " + ShaderProgramConstants.VARYING_COLOR + ";\n" +
        "varying vec2 " + ShaderProgramConstants.VARYING_TEXTURECOORDINATES + ";\n" +
        "varying vec2 v_lightPosition;\n" + 
        "void main() {\n" +
        " v_lightPosition = "+ LightShader.ATTRIBUTE_LIGHT_POSITION +" ;\n" +
        "   " + ShaderProgramConstants.VARYING_COLOR + " = " + ShaderProgramConstants.ATTRIBUTE_COLOR + ";\n" +
        "   " + ShaderProgramConstants.VARYING_TEXTURECOORDINATES + " = " + ShaderProgramConstants.ATTRIBUTE_TEXTURECOORDINATES + ";\n" +
        "   gl_Position = " + ShaderProgramConstants.UNIFORM_MODELVIEWPROJECTIONMATRIX + " * " + ShaderProgramConstants.ATTRIBUTE_POSITION + ";\n" +
        "}";

public static final String FRAGMENTSHADER =
        "precision lowp float;\n" +
        "uniform sampler2D " + ShaderProgramConstants.UNIFORM_TEXTURE_0 + ";\n" +
        "varying lowp vec4 " + ShaderProgramConstants.VARYING_COLOR + ";\n" +
        "varying mediump vec2 " + ShaderProgramConstants.VARYING_TEXTURECOORDINATES + ";\n" +
        "varying lowp vec2 v_lightPosition;\n" +
        "void main() {\n" +
        " vec4 tx = texture2D(" + ShaderProgramConstants.UNIFORM_TEXTURE_0 + ", " + ShaderProgramConstants.VARYING_TEXTURECOORDINATES + ") ;"+
        " float u_radius = 100.0;"+
        " vec2 u_lightPosition = vec2(200-50+v_lightPosition.x,200-50+v_lightPosition.y);"+
        " float distance  = length( u_lightPosition - gl_FragCoord.xy );"+
        " float intensity =( 1.5-min( distance, u_radius )/u_radius)*1.5;"+ 
        " gl_FragColor = vec4(tx.r*intensity,tx.g*intensity,tx.b*intensity,tx.w);"+
        "}";

// ===========================================================
// Fields
// ===========================================================

public static int sUniformModelViewPositionMatrixLocation = ShaderProgramConstants.LOCATION_INVALID;
public static int sUniformTexture0Location = ShaderProgramConstants.LOCATION_INVALID;

// ===========================================================
// Constructors
// ===========================================================

private LightShader() {
    super(LightShader.VERTEXSHADER, LightShader.FRAGMENTSHADER);
}

public static LightShader getInstance() {
    if(LightShader.INSTANCE == null) {
        LightShader.INSTANCE = new LightShader();
    }
    return LightShader.INSTANCE;
}

// ===========================================================
// Getter & Setter
// ===========================================================

// ===========================================================
// Methods for/from SuperClass/Interfaces
// ===========================================================

    @Override
protected void link(final GLState pGLState) throws ShaderProgramLinkException {
    GLES20.glBindAttribLocation(this.mProgramID, ShaderProgramConstants.ATTRIBUTE_POSITION_LOCATION, ShaderProgramConstants.ATTRIBUTE_POSITION);
    GLES20.glBindAttribLocation(this.mProgramID, ShaderProgramConstants.ATTRIBUTE_COLOR_LOCATION, ShaderProgramConstants.ATTRIBUTE_COLOR);
    GLES20.glBindAttribLocation(this.mProgramID, ShaderProgramConstants.ATTRIBUTE_TEXTURECOORDINATES_LOCATION, ShaderProgramConstants.ATTRIBUTE_TEXTURECOORDINATES);
    GLES20.glBindAttribLocation(this.mProgramID, ShaderProgramConstants.ATTRIBUTE_POSITION_0_LOCATION, ShaderProgramConstants.ATTRIBUTE_POSITION_0);
    super.link(pGLState);

    LightShader.sUniformModelViewPositionMatrixLocation = this.getUniformLocation(ShaderProgramConstants.UNIFORM_MODELVIEWPROJECTIONMATRIX);
    LightShader.sUniformTexture0Location = this.getUniformLocation(ShaderProgramConstants.UNIFORM_TEXTURE_0);
}

@Override
public void bind(final GLState pGLState, final VertexBufferObjectAttributes pVertexBufferObjectAttributes) {
    GLES20.glEnableVertexAttribArray(ShaderProgramConstants.ATTRIBUTE_POSITION_0_LOCATION);
    super.bind(pGLState, pVertexBufferObjectAttributes);
    GLES20.glUniformMatrix4fv(LightShader.sUniformModelViewPositionMatrixLocation, 1, false, pGLState.getModelViewProjectionGLMatrix(), 0);
    GLES20.glUniform1i(LightShader.sUniformTexture0Location, 0);
}

    @Override
public void unbind(GLState pGLState) throws ShaderProgramException {
    GLES20.glDisableVertexAttribArray(ShaderProgramConstants.ATTRIBUTE_POSITION_0_LOCATION);
    super.unbind(pGLState);
}

// ===========================================================
// Methods
// ===========================================================

// ===========================================================
// Inner and Anonymous Classes
// =========================================================== 
```

}

我还创建了自定义 HighPerformanceLightSpriteBatchVBO 我将灯光位置传递到缓冲区

```
@Override
public void addWithPackedColor(final ITextureRegion pTextureRegion, final float pX1, final float pY1, final float pX2, final float pY2, final float pColorABGRPackedInt,final float pLightXX,final float pLightYY) {
    final float[] bufferData = this.getBufferData();
    final int bufferDataOffset = this.mBufferDataOffset;

    final float x1 = pX1;
    final float y1 = pY1;
    final float x2 = pX2;
    final float y2 = pY2;
    final float u = pTextureRegion.getU();
    final float v = pTextureRegion.getV();
    final float u2 = pTextureRegion.getU2();
    final float v2 = pTextureRegion.getV2();
    final float pLightX = pLightXX;
    final float pLightY = pLightYY;

    if(pTextureRegion.isRotated()) {
        bufferData[bufferDataOffset + 0 * LightSpriteBatch.VERTEX_SIZE + LightSpriteBatch.VERTEX_INDEX_X] = x1;
        bufferData[bufferDataOffset + 0 * LightSpriteBatch.VERTEX_SIZE + LightSpriteBatch.VERTEX_INDEX_Y] = y1;
        bufferData[bufferDataOffset + 0 * LightSpriteBatch.VERTEX_SIZE + LightSpriteBatch.COLOR_INDEX] = pColorABGRPackedInt;
        bufferData[bufferDataOffset + 0 * LightSpriteBatch.VERTEX_SIZE + LightSpriteBatch.TEXTURECOORDINATES_INDEX_U] = u;
        bufferData[bufferDataOffset + 0 * LightSpriteBatch.VERTEX_SIZE + LightSpriteBatch.TEXTURECOORDINATES_INDEX_V] = v;
        bufferData[bufferDataOffset + 0 * LightSpriteBatch.VERTEX_SIZE + LightSpriteBatch.LIGHT_POSITION_INDEX_X] = pLightX;
        bufferData[bufferDataOffset + 0 * LightSpriteBatch.VERTEX_SIZE + LightSpriteBatch.LIGHT_POSITION_INDEX_Y] = pLightY; 
```

有了所有这些，它都可以工作，但我在片段着色器中读取这个光位置时遇到问题。如果渲染纹理，我需要做哪些计算才能正确计算灯光位置和位置之间的距离？

```
DynamicLightSpriteBatch sb = new DynamicLightSpriteBatch(mTextureSprite,10,getVertexBufferObjectManager()) {
        @Override
        protected boolean onUpdateSpriteBatch() {
             draw(mTextureSpriteRegion, 0f, 0f, 400f, 400f, 0f, 1.0f, 1.0f, 1.0f, 1.0f,100f,100f); // ( 100,100 = lightX & Y ) 
            return true;
        }
    }; 
```

光总是在中心 (200-radius/2,200-radius/2)，它应该移动 100,100 作为最后一个参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T11:02:23.173

如果我理解正确，您想要的是在片段着色器中具有相对光位置，每个像素都不同。为此，您需要访问顶点着色器中的模型视图和投影矩阵，并计算要传递给片段着色器的精灵的`up`和向量。`right`然后在片段着色器中将此（乘以 texcoord）添加到精灵中心位置以获得每个着色片段（精灵的每个像素）的世界空间位置。从光的位置减去它，瞧！

请注意，在您的着色器代码中，您似乎对`varying`顶点/片段着色器中的变量有不同的精度说明符。这可能会导致问题（变量可能无法链接，因此顶点着色器中输出的值被丢弃，片段着色器中的输入值未定义）。这是 OpenGL 的黑暗角落之一，某种程度上是由于需要能够任意混合和匹配不同的顶点和片段着色器。

# javascript - 在 html 正文中使用脚本变量

> ID：14480127
> 
> 赞同：1
> 
> 时间：2013-01-23T12:47:50.720
> 
> 标签：javascript, html

我想将脚本中的变量调用到正文。这是我的脚本代码。我想在 html 正文中使用`rightanswers`和值。`wronganswers`

```
GetFeedback = function (a) {
    if (a == CorrectAnswer) {
        rightanswers++;
    } else {
        wronganswers++;
    }
    lock = true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:53:38.650

您需要使用`Document Object Modle`. 您可以使用不同的 JavaScript 方法来创建元素并将其插入 DOM。例如：

```
var element = document.createElement('p');
var body = document.body;
body.appendChild(element); 
```

使用该代码创建一个元素，然后将其附加到正文中。那是纯 JavaScript。您可以使用`Mootools`or `jQuery`，而且它更简单。但是 JavaScript 不像 PHP 那样工作，例如，您可以将变量与 HTML 混合使用。

如果你想从 HTML 中触发函数，你需要将函数绑定到一个事件。例如，单击链接将是。

HTML

```
<a href="#" id="button"> Click Here </a> 
```

JS

```
var b = document.getElementById('button');
b.click = function(){
   GetFeedback();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:51:24.183

您可以使用 jquery 更改页面上的 html。

```
GetFeedback = function(a){
    if(a==CorrectAnswer){
        rightanswers++;
    }else{
        wronganswers++;
    }
    lock=true;
    $('p:first').html('Right Answers: '+rightanswers+' <br> Wrong Answers: '+wronganswers);
}; 
```

并将其作为您的 html

```
<body>
<p></p>
<a href="javascript:GetFeedback(a);">Get Feedback</a>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:51:55.947

**确保您通过以下方式声明变量（我们在提供的代码中看不到）`var`**：

```
<script>
    var GetFeedback = function (a) {
        if (a == CorrectAnswer) {
            rightanswers++;

        } else {
            wronganswers++;
        }
        lock = true;
</script> 
```

然后在您的 HTML 中，您可以使用这样的反馈（**虽然，使用以下内容不是一个好习惯，它只是为了演示目的**）：

```
<a href="#" onclick="javascript:GetFeedback();">Hello</a> 
```

# android - 通过 Maven 使用 android 注释构建项目

> ID：14480128
> 
> 赞同：4
> 
> 时间：2013-01-23T12:47:53.183
> 
> 标签：android, maven, android-annotations

我尝试使用 Maven 构建带有 Android 注释的项目。这是我的构建部分：

```
<build>
    <finalName>${project.artifactId}-${project.version}</finalName>
    <sourceDirectory>src</sourceDirectory>
    <resources>
        <resource>
            <directory>${project.basedir}</directory>
            <filtering>true</filtering>
            <targetPath>${project.build.directory}/filtered-manifest</targetPath>
            <includes>
                <include>AndroidManifest.xml</include>
            </includes>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>parse-version</id>
                    <goals>
                        <goal>parse-version</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.5</version>
            <executions>
                <execution>
                    <phase>initialize</phase>
                    <goals>
                        <goal>resources</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.2.0</version>
            <extensions>true</extensions>
            <configuration>
                <assetsDirectory>assets</assetsDirectory>
                <resourceDirectory>res</resourceDirectory>
                <sdk>
                    <path>${env.ANDROID_HOME}</path>
                    <platform>15</platform>
                </sdk>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
                <sign>
                    <debug>false</debug>
                </sign>
                <androidManifestFile>${project.build.directory}/filtered-manifest/AndroidManifest.xml</androidManifestFile>
            </configuration>

            <executions>
                <execution>
                    <id>update-manifest</id>
                    <goals>
                      <goal>manifest-update</goal>
                    </goals>
                    <configuration>
                      <manifest>
                        <versionName>${project.version}</versionName>
                        <debuggable>${androidmanifest.debuggable}</debuggable>
                        <versionCode>${parsedVersion.incrementalVersion}</versionCode>
                      </manifest>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <includes>
                    <include>${project.basedir}/target/generated-sources/**</include>
                </includes>
            </configuration>
            <extensions>true</extensions>
        </plugin>
        <plugin>
            <groupId>org.bsc.maven</groupId>
            <artifactId>maven-processor-plugin</artifactId>
            <version>2.0.5</version>
            <executions>
                <execution>
                    <id>process</id>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <phase>generate-sources</phase>
                    <configuration>
                        <processors>
                            <processor>com.googlecode.androidannotations.AndroidAnnotationProcessor</processor>
                        </processors>
                    </configuration>
                </execution>
            </executions>
            <dependencies/>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jarsigner-plugin</artifactId>
            <version>1.2</version>
            <executions>
                <execution>
                    <id>signing</id>
                    <goals>
                        <goal>sign</goal>
                        <goal>verify</goal>
                    </goals>
                    <phase>package</phase>
                    <inherited>true</inherited>
                    <configuration>
                        <removeExistingSignatures>true</removeExistingSignatures>
                        <archiveDirectory />
                        <includes>
                            <include>${project.build.directory}/${project.artifactId}-${version}.apk</include>
                        </includes>
                        <keystore>${basedir}/certificate/release-key.keystore</keystore>
                        <alias></alias>
                        <storepass></storepass>
                        <verbose>false</verbose>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-release-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <tagBase>scm:git:${staging.git.repo.url}</tagBase>
                <scmCommentPrefix>release:</scmCommentPrefix>
                <preparationGoals>clean install</preparationGoals>
                <arguments>-Dstaging.git.repo.url=${staging.git.repo.url}</arguments>
                <checkModificationExcludes>
                    <checkModificationExclude>.gitignore</checkModificationExclude>
                    <checkModificationExclude>.classpath</checkModificationExclude>
                    <checkModificationExclude>.project</checkModificationExclude>
                    <checkModificationExclude>.settings</checkModificationExclude>
                    <checkModificationExclude>**.iml</checkModificationExclude>
                    <checkModificationExclude>.idea**</checkModificationExclude>
                    <checkModificationExclude>project.properties</checkModificationExclude>
                    <checkModificationExclude>default.properties</checkModificationExclude>
                </checkModificationExcludes>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

这是我得到的一段构建日志：

```
[INFO] ------------------------------------------------------------------------
[INFO] Building SomeApp 1.03.15-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- build-helper-maven-plugin:1.7:parse-version (parse-version) @ SomeApp ---
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default) @ SomeApp ---
[debug] execute contextualize
[INFO] Using 'utf-8' encoding to copy filtered resources.
[INFO] Copying 1 resource to /Users/darja/Works/someapp/Android/target/filtered-manifest
[INFO] 
[INFO] --- android-maven-plugin:3.2.0:generate-sources (default-generate-sources) @ SomeApp ---
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] /Users/darja/Development/sdk/platform-tools/aapt [package, -m, -J, /Users/darja/Works/someapp/Android/target/generated-sources/r, -M, /Users/darja/Works/someapp/Android/target/filtered-manifest/AndroidManifest.xml, -S, /Users/darja/Works/someapp/Android/res, --auto-add-overlay, -A, /Users/darja/Works/someapp/Android/assets, -I, /Users/darja/Development/sdk/platforms/android-15/android.jar]
[INFO] 
[INFO] --- maven-processor-plugin:2.0.5:process (process) @ Someapp ---
[INFO] Source directory: /Users/darja/Works/someapp/Android/target/generated-sources/apt added
[INFO] javac option: -cp
[INFO] javac option: /Users/darja/.m2/repository/org/sonatype/sisu/sisu-inject-bean/1.4.3.1/sisu-inject-bean-1.4.3.1.jar:/Users/darja/.m2/repository/org/sonatype/sisu/sisu-guice/2.9.1/sisu-guice-2.9.1-noaop.jar:/Users/darja/.m2/repository/org/sonatype/aether/aether-util/1.8/aether-util-1.8.jar:/Users/darja/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.14/plexus-interpolation-1.14.jar:/Users/darja/.m2/repository/org/codehaus/plexus/plexus-utils/2.0.4/plexus-utils-2.0.4.jar:/Users/darja/.m2/repository/org/codehaus/plexus/plexus-component-annotations/1.5.5/plexus-component-annotations-1.5.5.jar:/Users/darja/.m2/repository/org/sonatype/plexus/plexus-sec-dispatcher/1.3/plexus-sec-dispatcher-1.3.jar:/Users/darja/.m2/repository/org/sonatype/plexus/plexus-cipher/1.4/plexus-cipher-1.4.jar:/Users/darja/Works/someapp/Android:/Users/darja/Works/someapp/Android/target/generated-sources/extracted-dependencies/src/main/resources:/Users/darja/Works/someapp/Android/target/classes:/Users/darja/.m2/repository/com/google/android/android/4.0.1.2/android-4.0.1.2.jar:/Users/darja/.m2/repository/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar:/Users/darja/.m2/repository/org/apache/httpcomponents/httpclient/4.0.1/httpclient-4.0.1.jar:/Users/darja/.m2/repository/org/apache/httpcomponents/httpcore/4.0.1/httpcore-4.0.1.jar:/Users/darja/.m2/repository/commons-codec/commons-codec/1.3/commons-codec-1.3.jar:/Users/darja/.m2/repository/org/khronos/opengl-api/gl1.1-android-2.1_r1/opengl-api-gl1.1-android-2.1_r1.jar:/Users/darja/.m2/repository/xerces/xmlParserAPIs/2.6.2/xmlParserAPIs-2.6.2.jar:/Users/darja/.m2/repository/xpp3/xpp3/1.1.4c/xpp3-1.1.4c.jar:/Users/darja/.m2/repository/org/json/json/20080701/json-20080701.jar:/Users/darja/.m2/repository/com/bugsense/BugSense/3.0.7/BugSense-3.0.7.jar:/Users/darja/.m2/repository/com/googlecode/androidannotations/androidannotations/2.6/androidannotations-2.6.jar:/Users/darja/.m2/repository/com/googlecode/androidannotations/androidannotations/2.6/androidannotations-2.6-api.jar:/Users/darja/.m2/repository/com/google/gcm/gcm/1.0.2/gcm-1.0.2.jar:/Users/darja/.m2/repository/joda-time/joda-time/2.1/joda-time-2.1.jar:
[INFO] javac option: -proc:only
[INFO] javac option: -processor
[INFO] javac option: com.googlecode.androidannotations.AndroidAnnotationProcessor
[INFO] javac option: -d
[INFO] javac option: /Users/darja/Works/someapp/Android/target/classes
[INFO] javac option: -s
[INFO] javac option: /Users/darja/Works/someapp/Android/target/generated-sources/apt
[INFO] diagnostic /Users/darja/Works/someapp/Android/src/com/someapp/social/facebook/FbDialog.java:37: cannot find symbol
symbol  : class R
location: package com.someapp

...Many complains about cannot find class R...

[INFO] diagnostic /Users/darja/Works/someapp/Android/src/com/someapp/ui/views/SearchView.java:47: package R does not exist
[INFO] diagnostic Note: Starting AndroidAnnotations annotation processing
[INFO] diagnostic Note: Dummy source file: file:///Users/darja/Works/someapp/Android/target/generated-sources/apt/dummy1358938267097.java
[INFO] diagnostic Note: AndroidManifest.xml file found: /Users/darja/Works/someapp/Android/AndroidManifest.xml
[INFO] diagnostic warning: The AndroidManifest.xml file was found, but not the compiled R class: com.someapp.R
[INFO] diagnostic error: Unexpected error. Please report an issue on AndroidAnnotations, with the following content: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at com.googlecode.androidannotations.helper.TargetAnnotationHelper.extractAnnotationValue(TargetAnnotationHelper.java:52)
    at com.googlecode.androidannotations.helper.TargetAnnotationHelper.extractAnnotationValue(TargetAnnotationHelper.java:40)
    at com.googlecode.androidannotations.helper.IdValidatorHelper.idExists(IdValidatorHelper.java:47)
    at com.googlecode.androidannotations.helper.IdValidatorHelper.idExists(IdValidatorHelper.java:42)
    at com.googlecode.androidannotations.validation.EActivityValidator.validate(EActivityValidator.java:54)
    at com.googlecode.androidannotations.validation.ModelValidator.validate(ModelValidator.java:53)
    at com.googlecode.androidannotations.AndroidAnnotationProcessor.validateAnnotations(AndroidAnnotationProcessor.java:389)
    at com.googlecode.androidannotations.AndroidAnnotationProcessor.processThrowing(AndroidAnnotationProcessor.java:341)
    at com.googlecode.androidannotations.AndroidAnnotationProcessor.process(AndroidAnnotationProcessor.java:318)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:627)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.discoverAndRunProcs(JavacProcessingEnvironment.java:556)
    at com.sun.tools.javac.processing.JavacProcessingEnvironment.doProcessing(JavacProcessingEnvironment.java:701)
    at com.sun.tools.javac.main.JavaCompiler.processAnnotations(JavaCompiler.java:987)
    at com.sun.tools.javac.main.JavaCompiler.compile(JavaCompiler.java:727)
    at com.sun.tools.javac.main.Main.compile(Main.java:353)
    at com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:115)
    at org.bsc.maven.plugin.processor.AbstractAnnotationProcessorMojo.executeWithExceptionsHandled(AbstractAnnotationProcessorMojo.java:350)
    at org.bsc.maven.plugin.processor.AbstractAnnotationProcessorMojo.execute(AbstractAnnotationProcessorMojo.java:197)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.googlecode.androidannotations.helper.TargetAnnotationHelper.extractAnnotationValue(TargetAnnotationHelper.java:50)
    ... 38 more
Caused by: java.lang.annotation.AnnotationTypeMismatchException: Incorrectly typed data found for annotation element public abstract int com.googlecode.androidannotations.annotations.EActivity.value() (Found data of type int)
    at com.sun.tools.javac.model.AnnotationProxyMaker$ValueVisitor$1.generateException(AnnotationProxyMaker.java:243)
    at sun.reflect.annotation.AnnotationInvocationHandler.invoke(AnnotationInvocationHandler.java:57)
    at $Proxy16.value(Unknown Source)
    ... 43 more 
```

但是我看到`R.java`是在`target/generated-source/r/com/someapp`（包名是`com.someapp`）中生成的我做错了什么？

可能有人有适用于 Android 注释项目的 Maven 脚本并且可以共享它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:14:51.050

您可以尝试配置maven处理器插件的sourcedirectory：

```
<plugin>
        <groupId>org.bsc.maven</groupId>
        <artifactId>maven-processor-plugin</artifactId>
        <version>2.0.5</version>
        <executions>
          <execution>
            <id>process</id>
            <goals>
              <goal>process</goal>
            </goals>
            <phase>process-sources</phase>
            <configuration>
              <sourceDirectory>the path of your target dir</sourceDirectory>
              <processors>
                <processor>com.googlecode.androidannotations.AndroidAnnotationProcessor</processor>
              </processors>
            </configuration>
          </execution>
        </executions>
        <dependencies />
      </plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T07:11:02.720

正确的方法是使用来自[Android KickstartR的 Maven 配置](http://androidkickstartr.com/)

# android - getActivity() 它是在哪里定义的？

> ID：14480129
> 
> 赞同：24
> 
> 时间：2013-01-23T12:47:55.950
> 
> 标签：android, methods, android-alertdialog

我对 android 很陌生，我正在关注这个[例子](http://developer.android.com/guide/topics/ui/dialogs.html)。

代码说我们需要执行这些步骤来获得一个对话框：

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

// 2\. Chain together various setter methods to set the dialog characteristics
builder.setMessage(R.string.dialog_message)
       .setTitle(R.string.dialog_title);

// 3\. Get the AlertDialog from create()
AlertDialog dialog = builder.create(); 
```

但是`getActivity()`方法是在哪里定义的呢？

我找不到那个方法。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-01-23T12:50:55.223

该`getActivity()`方法给出了 Activity 的上下文。你可以用`YourActivityName.this`它来代替它。

该方法`getActivity()`通常用于片段中，以获取插入或膨胀它们的活动的上下文。

例如

```
AlertDialog.Builder builder = new AlertDialog.Builder(YourActivityName.this); 
```

或者如果您甚至在活动本身中编写代码

```
AlertDialog.Builder builder = new AlertDialog.Builder(this); 
```

会锻炼。请随时提出任何疑问

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:10:41.530

new AlertDialog.Builder() 需要 Context 作为输入参数。所以尝试喜欢

```
AlertDialog.Builder builder = new AlertDialog.Builder(yourActivityName.this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:50:31.407

getActivity() 在 Fragment 类中实现。

见[http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T12:53:40.937

构造函数[`AlertDialog.Builder`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)需要一个`Context`参数。`Context`可以从`Activity`等访问`Service`，因为它们都是`extend` `Context`, 并且可以作为 . 传递`this`。

该方法`getActivity()`被声明为其他人在`Fragment`类中提到的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T12:50:41.060

本文介绍如何`AlertDialog`在`Fragment`. 在 Fragments 中，可以`Activity`通过调用`getActivity()`方法得到对应的。但在你的情况下，我假设你是在`Activity`. 所以你不必打电话`getActivity()`。只需使用`this`

```
AlertDialog.Builder builder = new AlertDialog.Builder(this); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T12:50:42.907

获取活动（）；是 android Fragment 的一种方法，如果你想在你的活动中显示对话框，只需传递`this`你的活动而不是`getActivity()`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T12:51:17.587

`getActivity()`是您从中扩展的超类 Activity 的成员方法。它是在**Activity**类本身中定义的。事实上`onCreate()`，`onPause()`所有其他函数本身也在父**Activity**类中定义。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-28T19:12:46.687

我遇到了完全相同的问题，最后我发现了我真正怀疑的问题......只需添加：

```
dialog.show(); 
```

……瞧。它在那里。想知道为什么原始示例中没有说明这一点！？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-16T13:09:24.780

更新 android API 级别 23。

使用`getContext()`而不是`getActivity()`.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-25T13:58:20.773

// 1\. 使用其构造函数实例化一个 AlertDialog.Builder

```
AlertDialog.Builder builder = new AlertDialog.Builder(yourActivityName.this); 
```

// 2\. 将各种setter方法链接在一起来设置对话框特性

```
builder.setMessage(R.string.dialog_message).setTitle(R.string.dialog_title); 
```

// 3\. 从 create() 中获取 AlertDialog

```
AlertDialog dialog = builder.create(); 
```

**// 4\. 显示警报对话框**

```
dialog.show(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-26T13:48:15.557

getActivity 使用的时候就不用再放新的了……比如

```
PendingIntent pi=new PendingIntent.getActivity(this,0,intent,0); //is wrong 
```

使用它：

```
PendingIntent pi=PendingIntent.getActivity(this,0,intent,0); //is Right code 
```

在这里，我们删除提供新分配的 new，但在这里它通过 getActivity in with in Activity(this) 提供其分配。

# mysql - mysql程序错误

> ID：14480135
> 
> 赞同：-1
> 
> 时间：2013-01-23T12:48:15.077
> 
> 标签：mysql, procedure

```
 DELIMITER $$
    CREATE PROCEDURE curdemo()

     BEGIN

    DECLARE done INT DEFAULT FALSE;
    DECLARE b, c INT;
    DECLARE cur1 CURSOR FOR SELECT empid FROM test.mytable;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
   OPEN cur1;

   read_loop: LOOP
   FETCH cur1 INTO b;
   IF done THEN
       LEAVE read_loop;
    END IF;
    INSERT INTO test.test_log VALUES (b,'test');
    CLOSE cur1;
  END $$ 
```

编译此代码时出现 1064 错误，有人可以帮我找到错误吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T06:46:54.550

我认为这会对你有所帮助。放END LOOP；在关闭 cur1 之前；

# telerik - 检查 Telerik 阻止的输入

> ID：14480141
> 
> 赞同：0
> 
> 时间：2013-01-23T12:48:54.703
> 
> 标签：telerik

在页面上有一个复选框和输入。当此复选框未分配时，输入将被阻止。

使用 Telerik Framework + NUnit 进行 UI 测试。

请告诉我，如何检查字段是否被锁定？

PS 由谷歌翻译

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:05:19.647

问题解决了。

检查：

```
Assert.IsFalse ([interesting_input].IsEnabled); 
```

# android-widget - 如何在小部件 Android 4+ 中显示联系人照片？

> ID：14480144
> 
> 赞同：-1
> 
> 时间：2013-01-23T12:49:03.200
> 
> 标签：android-widget, android-contacts

我正在尝试在主屏幕小部件上显示联系人图片，`RemoteViews.setImageViewUri()`但没有显示任何内容。

我记录了图片 URI，它是正确的，比如`content://com.android.contacts/contacts/293/photo`

这是我的`getViewAt`方法：

```
// Create and populate the View to display at the given index.
    public RemoteViews getViewAt(int index) {

        // Create a view to display at the required index.
        RemoteViews rv = new RemoteViews(context.getPackageName(), R.layout.item_layout);

        // Populate the view with contact name.
        rv.setTextViewText(R.id.name, items.get(index).getString("first_name"));

        //check if we have a photo set
        if (items.get(index).getString("photo_url") != null) {

            Log.i("parsed uri", String.valueOf(Uri.parse(items.get(index).getString("photo_url"))));

            rv.setImageViewUri(R.id.photo_url, Uri.parse(items.get(index).getString("photo_url")));
        }

        // Create an item-specific fill-in Intent that will populate
        // the Pending Intent template created in the App Widget Provider (GridWidgetProvider).
        Intent fillInIntent = new Intent();
        fillInIntent.putExtra(Intent.EXTRA_TEXT, items.get(index));
        rv.setOnClickFillInIntent(R.id.name, fillInIntent);
        return rv;
} 
```

它显示联系人姓名很好，但没有图片...

知道为什么吗？谢谢

编辑：ImageView 的 xml：

```
<ImageView
    android:id="@+id/photo_url"
    android:layout_width="match_parent"
    android:layout_height="125dp"
    android:layout_above="@id/name"
    android:gravity="center"
    android:background="#FFFF0000"
/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:34:36.977

自己想出来的，代码如下：

```
//check if we have a photo set
        if (items.get(index).getString("photo_url") != null) {

            rv.setImageViewUri(R.id.photo_url, Uri.parse(items.get(index).getString("photo_url")));
        }

        Uri contactUri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, items.get(index).getLong("contact_id"));
        InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(context.getContentResolver(), contactUri);

        if (input != null) {

            Log.i("input", String.valueOf(input));

            image = BitmapFactory.decodeStream(input);

        } else {
            image = BitmapFactory.decodeResource(context.getResources(), R.drawable.default_dark);
        }

        rv.setImageViewBitmap(R.id.photo_url, image); 
```

# php - 下载 file_get_contents 响应

> ID：14480145
> 
> 赞同：2
> 
> 时间：2013-01-23T12:49:05.793
> 
> 标签：php, jquery

我有以下jQuery：

```
$(".download").click(function(){     
  $.post('get_bot.php', "url_code="+url_code, function (response) {
    alert(response);
  });
}); 
```

url_code 是一个具有 json 结构的 url 的变量，这是一个返回的实时示例： [https://services.sapo.pt/Codebits/botmake/01,02,03,04,05,06,07, 08,我%20规则](https://services.sapo.pt/Codebits/botmake/01,02,03,04,05,06,07,08,I%20Rule)！

这些数字是生成不同图像的参数。

在我的 get_bot.php 页面上，我正在做：

```
$urlc=$_POST['url_code'];
$bot = file_get_contents($urlc);
header("content-type: image/png");
echo $bot; 
```

我正在研究如何以 .png 文件下载的形式获得响应，因此当用户单击 .download 时，会出现一个带有 .png 文件的下载窗口提示。

传入正确的 url 并回显 file_get_content 结果似乎工作正常（尽管如果我尝试右键单击并保存图像，它实际上会保存 php 文件......）

对此的任何帮助都会很棒，我对 json 结构不是很有经验，到目前为止我只处理过数组结构，从不处理图像输出。

我知道我可能无法获得实际结果，但任何指针都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:58:29.953

[RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5)描述了您需要做什么。基本上，您需要添加

```
Content-Disposition: attachment; filename="fname.ext" 
```

如果我没记错的话，到标题。

**编辑** 这是一个示例脚本。我已经确认这适用于我的两台具有不同设置的服务器。

```
<?php
  header("content-type: image/jpg");
  header("Content-Disposition: attachment; filename='pic.jpg'");
  readfile('http://lorempixel.com/400/200/');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:58:40.687

只需在您的 get_bot.php 上使用此功能即可开始下载文件，而不是在浏览器中显示它（应该跨浏览器工作）：

```
function download($file, $path)
{
    $size = filesize($path.$file);

    @ob_end_clean();

    if(ini_get('zlib.output_compression'))
    ini_set('zlib.output_compression', 'Off');

    header('Content-Type: application/force-download');
    header('Content-Disposition: attachment; filename="'.basename($file).'"');
    header("Content-Transfer-Encoding: binary");
    header('Accept-Ranges: bytes');
    header("Cache-control: no-cache, pre-check=0, post-check=0");
    header("Cache-control: private");
    header('Pragma: private');
    header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");

    if(isset($_SERVER['HTTP_RANGE']))
    {
        list($a, $range) = explode("=",$_SERVER['HTTP_RANGE'],2);
        list($range) = explode(",",$range,2);
        list($range, $range_end) = explode("-", $range);
        $range=intval($range);
        if(!$range_end) {
            $range_end=$size-1;
        } else {
            $range_end=intval($range_end);
        }

        $new_length = $range_end-$range+1;
        header("HTTP/1.1 206 Partial Content");
        header("Content-Length: $new_length");
        header("Content-Range: bytes $range-$range_end/$size");
    } else {
        $new_length=$size;
        header("Content-Length: ".$size);
    }

    $chunksize = 1*(1024*1024);
    $bytes_send = 0;
    if ($file = fopen($path.$file, 'rb'))
    {
        if(isset($_SERVER['HTTP_RANGE']))
        fseek($file, $range);

        while
            (!feof($file) && 
             (!connection_aborted()) && 
             ($bytes_send<$new_length) )
        {
            $buffer = fread($file, $chunksize);
            print($buffer);
            flush();
            $bytes_send += strlen($buffer);
        }
    fclose($file);
    } else die('Error - can not open file.');

die();
} 
```

# c - Glut Lightning 不适用于 GL_TRIANGLES

> ID：14480147
> 
> 赞同：0
> 
> 时间：2013-01-23T12:49:11.760
> 
> 标签：c, glut

我有闪电的问题。闪电适用于：

```
//...
gluSphere(qobj, r1, precision, precision);
//... 
```

但它不适用于：

```
//...
glBegin(GL_TRIANGLES);
glColor3fv(colors[4]);
glVertex3fv(vertices[triangles[fig2][1]]);
glVertex3fv(vertices[triangles[fig2][2]]);
glVertex3fv(vertices[triangles[fig2][3]]);
glEnd();
//... 
```

这是它的外观：

[img http://img72.imageshack.us/img72/2158/36156234.jpg](http://img72.imageshack.us/img72/2158/36156234.jpg)

如您所见，只有“gluSphere”变亮了。如何在 GL_TRIANGLES 和 GL_POLYGON 上制作相同的闪电？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:14:04.333

照明引擎需要知道多边形面对的方向。OpenGL 要求您通过法线提供这些信息，而不是自己计算这些信息：

```
//...
glBegin(GL_TRIANGLES);
glColor3fv(colors[4]);
// put a call to glNormal3fv or glNormal3f here!
glVertex3fv(vertices[triangles[fig2][1]]);
glVertex3fv(vertices[triangles[fig2][2]]);
glVertex3fv(vertices[triangles[fig2][3]]);
glEnd();
//... 
```

# c++ - 填充私有静态类映射 带有指向动态分配的派生类的指针

> ID：14480148
> 
> 赞同：0
> 
> 时间：2013-01-23T12:49:18.637
> 
> 标签：c++, class, templates

我有一个 Central 类的私有静态成员变量，带有类型映射。我想用“ Base* ”指针填充这个映射，这些指针指向派生自“ Base ”的类的实例。派生类的这些实例必须存储在动态内存中。还涉及到一些模板的乐趣。我确实尝试了一种填充地图的方法，但它给了我一个编译错误（稍后会说明）。

为了清楚起见，这是一个代码片段：

```
#include <all_necesary_std_headers>

class Base
{
    /* guts */
};

template<class CType>
class Derived: public Base
{
    /* innards */
};

class Central
{
    /* partial entrails */
private:
    // the static map I was referring to
    static std::map<string, Base*> base_map;
};

// Initializing the static map here
std::map<string, Base*> Central::base_map;

class Test1
{
    /* viscera */
};

// Compilation error here, on next line of code.
Central::base_map["Test1"] = dynamic_cast<Base*>( new Derived<Test1>);

class Test2
{
    /* bowels */
};

// Compilation error here, on next line of code.
Central::base_map["Test2"] = dynamic_cast<Base*>( new Derived<Test2>); 
```

**这是我得到的编译错误：** *error: expected constructor, destructor, or type conversion before '=' token;*

我已经有一个析构函数来释放映射分配的内存，所以不需要提醒我。我想在 main() 中使用“Central”类。这个类结构将用于从存储在文件中的类名动态创建类的新实例。

希望很清楚，如果有什么不明白的，请说。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:59:14.393

赋值语句只能进入函数，不能进入命名空间范围。

在 C++11 中，您可以在其声明中初始化映射：

```
std::map<string, Base*> Central::base_map = {
    {"Test1", new Derived<Test1>},
    {"Test2", new Derived<Test2>}
}; 
```

如果你被困在过去，那么你需要使用一个函数来填充地图；也许是这样的：

```
std::map<string, Base*> make_base_map() {
    std::map<string, Base*> map;
    map["Test1"] = new Derived<Test1>;
    map["Test2"] = new Derived<Test2>;
    return map;
}

std::map<string, Base*> Central::base_map = make_base_map(); 
```

`dynamic_cast`另外，请注意，除非这些类型是多态的（即`Base`至少具有一个虚函数），否则您不能使用。正如我在示例中所做的那样，您可以在没有演员表的情况下转换`Derived<T>*`为；`Base*`但是如果你需要转换回来，`dynamic_cast`那么你需要确保它们是多态的。

更新：如果您希望能够通过仅将代码添加到该类的实现文件来单独注册每个类，那么您需要声明一个静态对象，该对象在其构造函数中注册该类。现在我们遇到了初始化顺序的失败：如果静态对象在不同的​​翻译单元中初始化，那么初始化顺序是未指定的，所以你不能从另一个的构造函数中安全地访问一个。

我们可以通过使映射成为局部静态变量来解决这个问题，在第一次访问时初始化：

```
static std::map<string, Base*> & base_map() {
    static std::map<string, Base*> map;
    return map;
} 
```

现在我们可以定义类来注册类：

```
template <typename T>
struct BaseMapEntry {
    explicit BaseMapEntry(string name) {
        base_map()[name] = new Derived<T>;
    }
}; 
```

并将其用于每个类：

```
// header file
class Test1
{
    static BaseMapEntry<Test1> entry;
    /* gubbins */
};

// source file
BaseMapEntry<Test1> Test1::entry("Test1"); 
```

（或者，您可以将其设置为源文件中的静态命名空间范围对象，而不是静态成员；选择主要是为了美观。不幸的是，由于单一定义规则，您所做的任何事情都必须在源文件中定义.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:53:29.220

使用此行向映射添加新值（来自成员函数或 ctor）：

```
Central::base_map["Test1"] = new Derived<Test1>(); 
```

如果你想在初始化时用一些值填充它，使用`boost::assign`或 C++11：

```
std::map<string, Base*> Central::base_map = { 
  {"Test1", new Derived<Test1>()}, 
  {"Test2", new Derived<Test2>()} 
}; 
```

# java - 在测试应用程序或网站时，本地化和国际化测试是否重要？

> ID：14480150
> 
> 赞同：0
> 
> 时间：2013-01-23T12:49:18.883
> 
> 标签：java, android, ios, objective-c, testing

本地化和国际化测试对于应用程序、移动应用程序或网站是否重要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:52:21.463

`Globalisation testing`对于确保软件可以在任何文化/语言环境中运行非常重要。

> 全球化测试的目标是检测应用程序设计中可能抑制全球化的潜在问题。它确保代码可以处理所有国际支持，而不会破坏可能导致数据丢失或显示问题的功能。全球化测试使用任何可能的国际输入类型检查具有任何文化/区域设置的产品的正确功能。

`Localisation testing`对于检查特定目标受众/文化的软件质量非常重要。

> 本地化会翻译产品 UI，偶尔会更改一些初始设置以使其适合其他地区。本地化测试检查特定目标文化/地区的产品本地化质量。该测试基于全球化测试的结果，验证了对特定文化/区域设置的功能支持。本地化测试只能在产品的本地化版本上执行。可本地化测试不测试本地化质量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:16:59.847

在应用程序和网站中测试 i18n 很重要，因为您正在测试的页面可能会在您的数据库（缺少表、缺少字段、未知主键等）或属性文件（缺少代码、缺少语言、默认语言）中获得翻译。

一个解决方案是进行硒测试，特别是如果您的 I18n 可以在 URL 中被识别，例如：“ [http://mywebapp.com/en/category1/index](http://mywebapp.com/en/category1/index) ”
“ [http://mywebapp.com/es/category1/index](http://mywebapp.com/es/category1/index) ”

根据您的应用程序的架构，您也可以像这样测试它 [i18n testing using selenium](https://stackoverflow.com/questions/6869113/i18n-testing-using-selenium)

# iphone - How to sync media playback on two devices?

> ID：14480158
> 
> 赞同：3
> 
> 时间：2013-01-23T12:49:44.683
> 
> 标签：iphone, ios, ios6, avfoundation, avplayer

I am using following method of class AVPlayer.h in my project.

```
- (void)setRate:(float)rate time:(CMTime)itemTime atHostTime:(CMTime)hostClockTime 
```

Acording to [AVPlayer.h](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html#//apple_ref/doc/c_ref/AVPlayer) documentation, this method can be used to sync playback on two devices provided host time of one device..

I have given all "time" possibilities that I could give as params in itemTime and hostClockTime, but the playback has been never synched.. In-fact, AVPlayer doesn't play media items..

Any help would be highly appreciated from the persons who have used this method for synching as well as any-other mechanism for synching media playback on iOS devices.

Thanks in advance..

# javascript - Changing the text value of a button

> ID：14480160
> 
> 赞同：0
> 
> 时间：2013-01-23T12:49:51.250
> 
> 标签：javascript, jquery, html

I have a problem with my toggle. I have found similar posts but none that I truly understood.

I want the button to change text to "Project Info -" when clicked and when clicked again revert back to "Project Info +"

Here's the problem (the project info button) -> [http://marcuspedersen.com/oyafestivalen.html](http://marcuspedersen.com/oyafestivalen.html)

The code:

**jquery**

```
$('#toggle').click(function() {
    $('#workinfo').slideToggle (300, 'linear'); 
}); 
```

**The button**

```
<input type="button" id="toggle" value="Project Info +"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:55:56.230

我建议：

```
$('#toggle').click(function(e){
    // you may also want:
    // e.preventDefault();
    // depending what else you're doing, and how you're doing it
    $(this).val(function(i,v){ return v == 'Project Info +' ? 'Project Info -' : 'Project Info +'; });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ye8jK/)。

顺便说一句，如果您对同一个元素/jQuery 对象执行多个操作，那么缓存该对象并随后将缓存的对象用于将来的操作是明智的。

请记住，我在`click()`这里使用了，而不是`toggle()`，因为后者在 jQuery 1.9 中已被弃用。

参考：

*   [`click()`](http://api.jquery.com/click/).
*   [`toggle()`](http://api.jquery.com/toggle-event/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:00:44.767

尝试这个

```
$('#toggle').click(function() {
    $('#workinfo').slideToggle (300, 'linear');
    $(this).val( $(this).val() == 'Project Info +' ? 'Project Info -' : 'Project Info +'); 
}); 
```

# c++ - Boost：序列化/反序列化通过 ZeroMQ 拉式套接字传递的自定义 C++ 对象

> ID：14480161
> 
> 赞同：3
> 
> 时间：2013-01-23T12:49:52.757
> 
> 标签：c++, zeromq, boost-serialization

**描述：**

我有一个名为**GenericMessage**的 C++ 类，它只包含一个 id 和数据作为其成员（参见下面的代码片段 1 - GenericMessage.hxx）。我的意图是序列化这个类的一个实例，并通过实现推送模式的 ZeroMQ 套接字发送它。

序列化和发送任务已在**ZMQHandler 类（参见 sendToBE 函数）中实现，该类位于下面****代码片段 2**所示的头文件名 ZMQHandler.hxx 中。此类由下面**第三个代码片段**中所示的**TestFE.cxx**实例化。

 **GenericMessage 实例的接收和反序列化在**TestBE.cxx**中实现， 可在下面的**第 4 个代码片段**中找到。我的意图是通过 ZMQ 套接字（即拉套接字）接收 GenericMessage 实例，对其进行反序列化，然后打印其成员。

**问题：**

问题是当我编译 TestBE.cxx 时，我遇到了许多涉及模板函数的编译错误。考虑到 TestBE.cxx 中的代码，谁能告诉我在第 4 个代码片段中标有注释的反序列化部分缺少什么？我是一个相对较新的 C++ 程序员，想知道我应该如何解释这些模板函数相关的编译错误，这些错误已列在本文底部（即最后的片段）。第 18 行编译错误的来源在第 4 个代码片段中标记。谢谢。

**代码片段 1 (GenericMessage.hxx)**

```
#include <iostream>
#include <string>
#include <sstream>
#include <boost/serialization/serialization.hpp>
#include <boost/archive/binary_oarchive.hpp>
#include <boost/archive/binary_iarchive.hpp>
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>

template <class T>
class GenericMessage {
public:
      GenericMessage(): 
      beId(-1), data(NULL)
      {}

      GenericMessage(int id, T msg): beId(id), data(msg)
      {}

     ~GenericMessage(){}

     T getData()
     {
       return data;
     }

     std::string toString()
     {
        std::ostringstream ss;
        ss << getBeId();
        std::string ret =  ss.str();

        return ret;
      }

      void setBeId(int id)
      {
        beId = id;
      }

      int getBeId()
      {
        return beId;
      }

      private:
            friend class boost::serialization::access;

            int beId;
            T data;

            template <class Archieve>
            void serialize(Archieve & ar, const unsigned int version)
            {
               ar & beId;
               ar & data;
            }

 }; 
```

**代码片段 2 (ZMQHandler.hxx)**

```
 #include "zmq.hpp"
 #include "GenericMessage.hxx"
 #include <pthread.h>
 #include <unistd.h>
 #include <cassert>

template <class A>
class ZmqHandler {
public:

       ZmqHandler():
   mContext(1),
   mOutbHandlerSocket(mContext, ZMQ_PUSH)
       {    
            mOutbHandlerSocket.bind ("tcp://*:5555");       
       }

       ~ZmqHandler() {}

        void sendToBE(GenericMessage<A> &theMsg)
        {
           std::stringstream ss(std::ios_base::binary| std::ios_base::out|  std::ios_base::in);
           boost::archive::binary_oarchive oa(ss, boost::archive::no_header);
           oa << theMsg;

           zmq::message_t msgToSend(sizeof(ss));

           memcpy(msgToSend.data(), ss.str().data(), ss.str().length());
           if(memcmp(msgToSend.data(), ss.str().data(), ss.str().length()) != 0)
           {
               printf("memcpy error\n");
           }

           mOutbHandlerSocket.send(msgToSend);
           std::cout << "SENT request: [" << theMsg.toString() << "]" << std::endl;
}   

    private:  
          zmq::context_t mContext;
          zmq::socket_t mOutbHandlerSocket;         
}; 
```

**代码片段 3 (TestFE.cxx)**

```
 #include "ZmqHandler.hxx"

 int main ()
 {
   ZmqHandler<std::string> zmqHandler;
   int counter = 1;

   while(1)
   {  
     std::string data = "Hello there!\0";
     GenericMessage<std::string> msg(counter, data);
     zmqHandler.sendToBE(msg);
     counter++;
     sleep(1);
    }

    return 0;
 } 
```

**代码片段 4 (TestBE.cxx)**

```
 #include "zmq.hpp"
 #include "GenericMessage.hxx"
 #include <fstream>

 int main ()
 {
    //  Prepare our context and socket
    zmq::context_t context (1);
    zmq::socket_t socket (context, ZMQ_PULL);

   std::cout << "Connecting to FE..." << std::endl;
   socket.connect ("tcp://localhost:5555");

   while(1){
       zmq::message_t reply;
       socket.recv (&reply);

       /* !!!!!!! LINE 18 starts HERE !!!!!!! */
       std::stringstream is(reply.data(), std::ios_base::binary| std::ios_base::out| std::ios_base::in);
       boost::archive::binary_iarchive ia(is, boost::archive::no_header);

       GenericMessage<std::string> msg;
       ia >> msg;

       std::cout << "RECEIVED: " << msg.toString() << std::endl;
       std::cout << "DATA: " << ((std::string)msg.getData())  << std::endl;
    }

     return 0;
 } 
```

**TestBE.cxx 的编译输出**

```
 g++ -g -c TestBE.cxx GenericMessage.hxx
 TestBE.cxx: In function ‘int main()’:
 TestBE.cxx:18:104: error: invalid user-defined conversion from ‘void*’ to ‘const  __string_type& {aka const std::basic_string<char>&}’ [-fpermissive]
       In file included from /usr/include/c++/4.7/string:55:0,
             from /usr/include/c++/4.7/bits/locale_classes.h:42,
             from /usr/include/c++/4.7/bits/ios_base.h:43,
             from /usr/include/c++/4.7/ios:43,
             from /usr/include/c++/4.7/ostream:40,
             from /usr/include/c++/4.7/iostream:40,
             from GenericMessage.hxx:1,
             from TestBE.cxx:2:
  /usr/include/c++/4.7/bits/basic_string.tcc:214:5: note: candidate is:     std::basic_string<_CharT, _Traits, _Alloc>::basic_string(const _CharT*, const _Alloc&)  [with _CharT = char; _Traits = std::char_traits<char>; _Alloc = std::allocator<char>] <near  match>
  /usr/include/c++/4.7/bits/basic_string.tcc:214:5: note:   no known conversion for argument 1 from ‘void*’ to ‘const char*’
  TestBE.cxx:18:104: error: invalid conversion from ‘void*’ to ‘const char*’ [-fpermissive]
       In file included from /usr/include/c++/4.7/string:55:0,
             from /usr/include/c++/4.7/bits/locale_classes.h:42,
             from /usr/include/c++/4.7/bits/ios_base.h:43,
             from /usr/include/c++/4.7/ios:43,
             from /usr/include/c++/4.7/ostream:40,
             from /usr/include/c++/4.7/iostream:40,
             from GenericMessage.hxx:1,
             from TestBE.cxx:2:
       /usr/include/c++/4.7/bits/basic_string.tcc:214:5: error:   initializing argument 1 of ‘std::basic_string<_CharT, _Traits, _Alloc>::basic_string(const _CharT*, const _Alloc&) [with _CharT = char; _Traits = std::char_traits<char>; _Alloc = std::allocator<char>]’ [-fpermissive]
       make: *** [TestBE.o] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:09:26.777

我想说错误信息很清楚：[stringstream 的构造函数](http://www.cplusplus.com/reference/sstream/stringstream/stringstream/)需要 type`openmode`或`std::string`，并且您传递了一个类型的参数`void*`（返回`reply.data()`）。

您可以将收到的消息转储到二进制文件中，但您仍然需要进行一些转换。**

# c# - How to provision multiplescope description with single ScopeProvision

> ID：14480163
> 
> 赞同：0
> 
> 时间：2013-01-23T12:50:00.850
> 
> 标签：c#, .net, sql, sql-server-ce, microsoft-sync-framework

How can I have provision a single ScopeProvision with multiple description. Currently I am doing like this and there should be a better way

```
 DbSyncScopeDescription scopeDesc1 = SqlSyncDescriptionBuilder.GetDescriptionForScope("Scope1", serverConnection);
       DbSyncScopeDescription scopeDesc2 = SqlSyncDescriptionBuilder.GetDescriptionForScope("Scope2 ", serverConnection);
       DbSyncScopeDescription scopeDesc3 = SqlSyncDescriptionBuilder.GetDescriptionForScope("Scope3", serverConnection);

        SqlCeSyncScopeProvisioning clientProvision1 = new SqlCeSyncScopeProvisioning(localConnection, scopeDesc1);
        SqlCeSyncScopeProvisioning clientProvision2 = new SqlCeSyncScopeProvisioning(localConnection, scopeDesc2);
        SqlCeSyncScopeProvisioning clientProvision3 = new SqlCeSyncScopeProvisioning(localConnection, scopeDesc3);

        clientProvision1.Apply();
        clientProvision2.Apply();
        clientProvision3.Apply(); 
```

And again while synchronizing we have to create multiple SyncOrchestrator. Cant we avoid this with cleaner once?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:05:59.943

你不能。范围描述定义了范围是什么。一个范围不能有多个定义。

如果您希望它们在一个范围内，那么您应该将所有表包含在一个范围内。

# mobile - 添加用户代理标题的变化 - 每个站点或每个页面？

> ID：14480168
> 
> 赞同：0
> 
> 时间：2013-01-23T12:50:06.760
> 
> 标签：mobile, seo, user-agent, vary

在阅读了[谷歌关于](https://developers.google.com/webmasters/smartphone-sites/details)在为同一网址提供不同 html/内容的移动网站上使用 Vary 标头的建议后，我试图弄清楚如果你有一个新的移动网站会发生什么，例如它只涵盖你网站的某些部分，留下一些页面为桌面和移动设备提供相同的 html/内容。我是否仍需要为所有页面添加 Vary 标头，无论 html/内容是否确实因用户代理而异，或者我是否应该仅将标头添加到那些为桌面和移动设备提供不同 html/内容的 url。如果在不“因用户代理而异”的某个页面上发现了可变标头（而同一站点的其他页面会），谷歌会惩罚该站点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:44:15.627

你不太可能因此受到任何惩罚。我无法想象当内容在几页上没有变化时，他们会敲打一个提供 UA 标题的网站。你不是想主动欺骗任何人。

唯一可能出现问题的情况是，如果您的用户代理在页面上向搜索引擎用户代理显示的副本与在浏览器或移动用户代理中显示的副本明显不同，并且它认为 Vary 标头被滥用了. 这可能会导致罚款。

从本质上讲，真诚地工作，永远不要“掩盖”任何内容（我知道这不是你想要的，但只要确保搜索引擎蜘蛛没有被欺骗），你会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T16:45:27.370

如果您使用自己的缓存机制并且您会因 UA 而异，我建议您尽可能少地这样做。那里有数十亿种不同的 UA - 两个 UA 标头之间的一个字符差异将导致不同的缓存副本。因此，UA 标头的变化几乎可以保证低缓存命中率。

但是，如果您不使用自己的缓存层，我认为这两种方式都没有太大关系。我想您最容易总是发出 Vary: User-agent 标头，而且我认为这不会给您或您的用户带来任何问题。也就是说，如果您的 ISP（或其他）正在使用某种缓存层来增强其用户体验，那么尽可能少地改变缓存以确保更高的缓存命中率仍然是个好主意。

长话短说，如果您的网站流量相对较低，并且没有自己进行缓存，请让事情尽可能简单。如果您有一个高流量站点，请考虑替代缓存方案（并且可能不会在 UA 上有所不同），或者至少只在实际为移动设备提供可变内容的页面上添加 Vary: User-agent 标头。

# c# - Bind Button to DataGrid Content

> ID：14480170
> 
> 赞同：1
> 
> 时间：2013-01-23T12:50:16.510
> 
> 标签：c#, wpf, data-binding, datagrid

My WPF-Application contains a DataGrid with 3 Columns and a disabled Button. One Column of my DataGrid is a `DataGridCheckBoxColumn`. Now I want to bind Button's `IsEnabled`-Property, to be enable if at least one of them is checked, else remain disabled.

Actually I've following implementation:

```
<Button x:Name="buttonStart" Content="Start" IsEnabled="{Binding Converter={StaticResource ButtonEnableConverter}, ElementName=gridTestCaseChooser}" /> 
```

But the Converter is only called once at startup the application. If the DataGrid content change, or I check/uncheck a CheckBox, there isn't a new call to my converter.

How could I do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:31:20.243

您不需要绑定到像网格这样的可视元素，而是绑定到一些 DependencyProperty，该值正在发生变化。电网本身通常不会改变，这就是为什么转换器在启动时只被调用一次。我将创建一个 UserControl，它具有带有复选框和按钮的网格。USERCONTROL将定义BOOL类型的依赖关系，当检查或未选中其中一个Check-box时，该依赖性将设置为true或false。然后 Button 的 IsEnabled 属性将绑定到该 DependencyProperty。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:12:38.883

使用[MVVM](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&ie=UTF-8#hl=es&tbo=d&sclient=psy-ab&q=wpf%20mvvm%20code%20project)可以非常简单：

1.  [使用RelayCommand](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&ie=UTF-8#hl=es&tbo=d&output=search&sclient=psy-ab&q=wpf%20RelayCommand)声明一个`ICommand`属性以执行按钮的逻辑。
2.  您添加的项目必须实现`INotifyPropertyChanged`接口并具有 bool IsChecked 属性触发`PropertyChanged`事件。
3.  每次添加新项目时，订阅它的`PropertyChanged`事件，删除时也删除钩子。
4.  每次调用挂钩方法时，都会触发`PropertyChanged`ICommand 属性。
5.  在 XAML 中，只需将按钮绑定到`ICommand`属性。

**视图模型**

```
 public class Item: INotifyPropertyChanged
    {
        private bool isChecked;
        public event PropertyChangedEventHandler PropertyChanged;
        public bool IsChecked
        {
            get
            {
                return this.isChecked;
            }
            set
            {
                this.isChecked = value;
                var propertyChangedEvent = PropertyChanged;
                if(propertyChangedEvent != null)
                {
                    propertyChangedEvent(this, new PropertyChangedEventArgs("UpdateSomething");
                }                
            }
        }
    }

    public class MyViewModel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        public ICommand UpdateSomething { get; private set; }
        public ObservableCollection<Item> MyItems { get; set; }

        public MyViewModel()
        {
            UpdateSomething = new RelayCommand(MyCommandExecute, MyCommandCanExecute);
            MyItems = new ObservableCollection<Item>();
        }

        private void MyCommandExecute(object parameter)
        {
            // Your logic here.
        }

        private void MyCommandCanExecute(object parameter)
        {
            return MyItems.Any(item => item.IsChecked);
        }

        private void AddItem(Item item)
        {
            item.PropertyChanged += ItemsPropertyChanged;
            MyItems.Add(item);
        }

        private void ItemsPropertyChanged(object sender, PropertyChangedEventArgs e)
        {
            var propertyChangedEvent = PropertyChanged;
            if(propertyChangedEvent != null &&
               e.PropertyName == "IsChecked")
            {
                propertyChangedEvent(this, new PropertyChangedEventArgs("UpdateSomething");
            }                
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:54:11.447

对于您的按钮：

```
 IsEnabled="{Binding ElementName=NN, Path=IsChecked}"> 
```

*问题更新后更新*

此处讨论了您遇到的相同情况： [什么导致值转换器触发？](https://stackoverflow.com/questions/1234228/what-causes-a-value-converter-to-fire)

这个想法是选择真正改变自己状态的东西

*更新*

尝试这样的事情：

```
<dg:DataGrid.Columns> 
   <dg:DataGridTextColumn Header="First Name" Width="50">  
      <dg:DataGridTextColumn.DataFieldBinding> 
         <Binding Path="FirstName" /> 
      </dg:DataGridTextColumn.DataFieldBinding> 
    </dg:DataGridTextColumn> 
    <dg:DataGridCheckBoxColumn Header="Active" Width="50" DataFieldBinding="{Binding Path= IsActive}" /> 
</dg:DataGrid.Columns> 
```

# xml - XSL 输出没有前缀的 XML 而不使用默认命名空间？

> ID：14480173
> 
> 赞同：3
> 
> 时间：2013-01-23T12:50:26.690
> 
> 标签：xml, xslt, xml-namespaces

我有一个 XSL，我需要按照以下方式生成输出：

```
<moo xmlns="http://api.example.com">
    <foo>1358944586848</foo>
    <bar>
        <a>1</a>
        <b>2</b>
        <c>3</c>
    </bar>
</moo> 
```

我可以这样做：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns="http://api.example.com">

    <xsl:template match="/">
        <xsl:element name="moo">
            <!-- and so on --> 
```

但是，我有点讨厌在我的 xsl 文件中使用 xsl 前缀，因为我觉得它很混乱。无论如何，使用 XPath 选择很容易，因为您可以根据`xpath-default-namespace`需要设置要转换的任何内容。但`element-default-namespace`据我所知，没有可用的，那么我怎样才能以一种好的方式生成想要的输出呢？

我知道我可以这样做：

```
<stylesheet version="2.0"
    xmlns="http://www.w3.org/1999/XSL/Transform">

    <template match="/">
        <element name="moo" namespace="http://api.example.com">
            <!-- and so on --> 
```

但是我必须在我创建的每个元素上显式地设置这个命名空间，否则它们最终将使用 XSL 命名空间。那么有没有一种干净的方法来创建具有特定命名空间（没有前缀）的元素并且不触及 xsl 文件的默认命名空间？

* * *

**更新：**

认为也许`namespace-alias`可以做一些事情，但无法弄清楚如何使用它。试过这个，但似乎对输出没有任何影响：

```
<stylesheet version="2.0"
    xmlns="http://www.w3.org/1999/XSL/Transform"
xmlns:out="http://api.example.com">

<namespace-alias stylesheet-prefix="out" result-prefix=""/>

    <template match="/">
        <element name="out:moo">
            <!-- and so on --> 
```

事情可能没有按照`namespace-alias`我的想法做：p

***我使用的最终解决方案，基于 JLRishe 的回答***

*删除前缀.xsl*

```
<?xml version="1.0" encoding="UTF-8"?>
<stylesheet version="2.0" xmlns="http://www.w3.org/1999/XSL/Transform">
    <template match="/">
        <variable name="result">
            <next-match />
        </variable>
        <apply-templates select="$result" mode="remove-prefixes" />
    </template>

    <template match="*" priority="1" mode="remove-prefixes">
        <element name="{local-name()}" namespace="{namespace-uri()}">
            <apply-templates select="@* | node()" mode="remove-prefixes" />
        </element>
    </template>
    <template match="@*|node()" mode="remove-prefixes">
        <copy>
            <apply-templates select="@* | node()" mode="remove-prefixes" />
        </copy>
    </template>

</stylesheet> 
```

*主题.xsl*

```
<!-- snip -->
<import href="remove-prefixes.xsl" />
<!-- snip --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:16:59.747

您可以做的一件事是在一个变量中捕获 XSL 的整个结果，然后在最后清除其前缀：

```
<stylesheet version="2.0" xmlns="http://www.w3.org/1999/XSL/Transform"
                          xmlns:p="http://api.example.com">
  <output method="xml" indent="yes"/>

  <template match="/">
    <variable name="result">
      <p:moo>
        <apply-templates />
      </p:moo>
    </variable>
    <apply-templates select="$result" mode="removePrefix" />
  </template>

  <template match="root">
    <p:something hello="hi">
      <element name="p:somethingelse" />
    </p:something>
  </template>

  <template match="p:*" mode="removePrefix">
    <element name="{local-name()}" namespace="{namespace-uri()}">
      <apply-templates select="@* | node()" mode="removePrefix" />
    </element>
  </template>

  <template match="@* | node()" mode="removePrefix">
    <copy>
      <apply-templates select="@* | node()" />
    </copy>
  </template>
</stylesheet> 
```

在此输入上运行时：

```
<root>
  <top />
</root> 
```

它产生：

```
<moo xmlns="http://api.example.com">
  <something hello="hi">
    <somethingelse />
  </something>
</moo> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:55:36.063

-`xmlns:xsl`方法实际上是“标准”的一天，我想 XSL 的设计者已经想到了这一点。

请记住，您可以将 XML 片段直接混合到 XSL 中。从这个角度来看，您的方法`xsl:element`可以说比您尝试使用“元素默认命名空间”消除的方法增加了更多的噪音和混乱。

所以，我会这样做：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns="http://api.example.com">

    <xsl:template match="/">
        <moo>
            <!-- and so on --> 
```

**编辑：**

以下`namespace-alias`可能有效：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns="http://api.example.com">

    <namespace-alias stylesheet-prefix="xsl" result-prefix="#default"/>

    <template match="/" xmlns="http://www.w3.org/1999/XSL/Transform">
        <element name="moo">
            <!-- etc --> 
```

或者像这样：

```
<stylesheet version="2.0"
    exclude-result-prefixes="api" 
    xmlns="http://www.w3.org/1999/XSL/Transform"
    xmlns:api="http://api.example.com">

    <namespace-alias stylesheet-prefix="#default" result-prefix="api"/>

    <template match="/">
        <element name="moo">
            <!-- etc --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:58:34.790

我对混乱的感觉和你一样，特别是如果我有样式表，其中绝大多数元素都在 XSL 命名空间中，而不是在目标命名空间中。解决方案很简单：给输出元素一个前缀而不是 XSL 元素：

```
<stylesheet version="2.0"
    xmlns="http://www.w3.org/1999/XSL/Transform"
    xmlns:o="http://api.example.com">

    <template match="/">
        <o:moo>
            <!-- and so on --> 
```

# xslt - Xpath 表达式 VS XSL 变量

> ID：14480174
> 
> 赞同：1
> 
> 时间：2013-01-23T12:50:29.957
> 
> 标签：xslt, xpath

当使用 xsl 变量而不是 XPath 表达式时，XSLT 的性能是否会提高？更新：我正在使用 Xalan 进行处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:11:44.350

> 当使用 xsl 变量而不是 XPath 表达式时，XSLT 的性能是否会提高？

**这取决于所使用的 XSLT 处理器**。如果 XSLT 处理器有一个好的优化器，在很多情况下它会自己进行因式分解，而手动执行此操作并没有真正的速度增益。

然而：

1.  将评估结果“保存”在变量中可以使代码更短且更具可读性。

2.  这是 DRY（不要重复自己）最佳实践的一个很好的应用。

3.  依赖优化器并不总是有效。

4.  在编写可移植代码时，我们不应该依赖优化器，这些代码旨在由多个不同的 XSLT 处理器执行——例如在编写函数/模板库时。

**对于某些 XSLT 2.0 处理器，例如 Saxon，甚至可以`xsl:function`通过打开函数记忆来优化执行**。在 Saxon 的情况下，这是通过将扩展属性设置为 来完成**[`saxon:memo-function`](http://www.saxonica.com/documentation/extensions/attributes/memo-function.xml)**的`"yes"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:53:35.053

这是我的经验，但更重要的是它提高了代码的可读性。它还使代码重用变得更简单。

# qt - Kill an instace of an application from another instance

> ID：14480182
> 
> 赞同：1
> 
> 时间：2013-01-23T12:50:40.497
> 
> 标签：qt, multiple-instances, message-passing

I have a QtSingleApplication.

I've started an instance A.

Next I start an instance B.

B uses `sendmessage()` to send a message to A.

A uses this message ( received with `messageReceived()` signal )to determine whether B should continue running or not.

How do I inform B of this decision?

I had thought of inserting the process ID of B..with the message sent to A, and using this process ID, perhaps A can force B's closure or have it continue?

If this is a correct flow, how do I get the process Id ( I don't know whether there'll be one for QtSingleApplication, or for a process, and if Pid QProcess::processID() ), will be any good? ).

Also, once I have it, how do I force B's closure? Or inform it of any message?

Thank you for your help.

# c# - 2 表格关闭和打开

> ID：14480187
> 
> 赞同：0
> 
> 时间：2013-01-23T12:50:47.737
> 
> 标签：c#, winforms

我有 2 个表格。在第一种形式的初始化中，我有代码：

```
public App_Index()
        {
            InitializeComponent();

            this.Hide();

            Authorization loginForm = new Authorization();
            loginForm.ShowDialog();
        } 
```

如果我按下 Form2 上的关闭按钮 [X] — App_Index(Form1) Form do .Show(); 但是 Form2 中没有关于此的代码。如果我在 Form2 上按 [X]，我想关闭 Form1 和 Form2。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:52:54.310

这个怎么样？如果对话框被取消，这将关闭当前表单。

```
public App_Index()
{
    InitializeComponent();

    this.Hide();

    Authorization loginForm = new Authorization();
    if (loginForm.ShowDialog() == DialogResult.Cancel)
        Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:00:27.493

你可以处理`FormClosing`事件：

```
private void Authorization_FormClosing( object sender, FormClosingEventArgs e )
{
    if ( e.CloseReason == CloseReason.UserClosing )
    {
         Application.Exit();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:04:23.010

有几种不同的方法可以做到这一点。您可以使用循环`Application.OpenForms`并关闭您想要的表单。我会在`Form_Closing`Form2 的事件中这样做：

```
 private void Form2_FormClosing(object sender, FormClosingEventArgs e)
    {
        foreach(Form frm in Application.OpenForms)
        {
            if(f.Name == "Form1")
                f.Close();
        }
    } 
```

您还可以直接在 OpenForms 集合中访问表单并将其关闭：

```
Application.OpenForms["Form1"].Close() 
```

# java - simplecaptcha 图像仅在重新加载后提供

> ID：14480195
> 
> 赞同：0
> 
> 时间：2013-01-23T12:51:20.233
> 
> 标签：java, servlets, captcha, simplecaptcha

我正在使用[SimpleCaptcha](http://simplecaptcha.sourceforge.net)来保护我们的联系表格。它工作得很好，*但只有在重新加载页面之后*。

Servlet 是`nl.captcha.servlet.StickyCaptchaServlet`，因此它不应该在重新加载后更改图像。但是当第一次打开页面时，图像只是没有加载。但是，重新加载后一切正常。

**web.xml**

验证码由运行在`/services`.

```
<web-app>
  <servlet>
    <servlet-name>captcha</servlet-name>
    <servlet-class>nl.captcha.servlet.StickyCaptchaServlet<servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>captcha</servlet>
    <url-pattern>/captcha.png</url-pattern>
  </servlet-mapping>
</web-app> 
```

**html**

```
<img src="/services/captcha.png"> 
```

**服务器**

我`tomcat-7.0.34`在一`Windows 7 64bit`台机器上使用`Java 1.7.0_07`.

**问题**

为什么重新加载后才显示图像？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-17T19:18:17.837

您可以遵循以下几个步骤：

# 1> 修改 web.xml 添加扩展 nl.captcha.servlet.StickyCaptchaServlet 类的 servlet

```
 <servlet>   
    <description></description>    
    <display-name>CustomCaptchaServlet</display-name>    
    <servlet-name>CustomCaptchaServlet</servlet-name>    
    <servlet-class>org.example.servlets.CustomCaptchaServlet</servlet-class>    
 </servlet>    
  <servlet-mapping>    
    <servlet-name>CustomCaptchaServlet</servlet-name>    
    <url-pattern>/CustomCaptchaServlet</url-pattern>    
  </servlet-mapping> 
```

# 2> CustomCaptchaServlet.java

```
package org.example.servlets;    
import static nl.captcha.Captcha.NAME;    

import java.io.IOException;    

import javax.servlet.ServletException;    
import javax.servlet.http.HttpServlet;    
import javax.servlet.http.HttpServletRequest;    
import javax.servlet.http.HttpServletResponse;    
import javax.servlet.http.HttpSession;    

import nl.captcha.Captcha;    
import nl.captcha.servlet.CaptchaServletUtil;    
import nl.captcha.servlet.StickyCaptchaServlet;    

public class CustomCaptchaServlet extends StickyCaptchaServlet {    
    private static final long serialVersionUID = 1L;    

    /**
     * @see StickyCaptchaServlet#StickyCaptchaServlet()
     */
    public CustomCaptchaServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {    

        String _width = getServletConfig().getInitParameter("width");    
        String _height = getServletConfig().getInitParameter("height");    
        HttpSession session = request.getSession();    
        Captcha captcha;    
        if (session.getAttribute(NAME) == null) {    
            captcha = new Captcha.Builder(Integer.parseInt(_width), Integer.parseInt(_height))    
            .addText()    
            .gimp()    
            .addBorder()    
                .addNoise()    
                .addBackground()    
                .build();    
            session.setAttribute(NAME, captcha);    
            CaptchaServletUtil.writeImage(response, captcha.getImage());    
            return;    
        }    
        captcha = (Captcha) session.getAttribute(NAME);    
        CaptchaServletUtil.writeImage(response, captcha.getImage());    
    }    

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {    

    }    

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:06:45.680

检查`web.xml`has`captcha.png`而 the`HTML`指的是`captcha.jpg`。

这能解决问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:35:46.600

问题是 StickyCaptchaServlet 正在为会话创建新的验证码图像。当您向页面发出初始请求时，您没有会话 ID，因此 StickyCaptchaServlet 无法将您连接到为特定会话创建的任何图像。

在第一次请求主 servlet 为您创建会话并将您发送回某种`sessionId`. 使用下一个请求（也重新加载），您将先前收到的请求发送到服务器请求，`sessionId`因此现在您`StickyCaptchaServlet`可以为您的会话收集验证码图像，因为它知道您在任何会话中。

你明白这个解释吗？对你有帮助吗？

**在您提出问题后添加以解决此问题。**

您可以添加到将实现`HttpSessionListener`. 然后，在方法中，`sessionCreated`您可以`StickyCaptchaServlet`使用刚刚创建的添加请求`sessionId`。根据`StickyCaptchaServlet`文档，您只需`doGet`使用传递的 sessionId 键调用它的方法。之后 - 当您页面上的浏览器请求 url时，它应该作为响应图像在您的实现`/services/captcha.png`之前创建和准备。`HttpSessionListener`

另一种方法是使用客户端脚本，在页面加载后，根本没有图像，只需重新加载它 - 作为这种内部重新加载，例如 JavaScript，浏览器将知道 sessionId 并将其传递给验证码图像的请求。重新加载是指仅重新加载图像，而不是整个页面。

这些建议中的任何一个都能解决您的问题吗？给我一个反馈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-09T14:03:07.010

只需这样做即可绕过 emka86 所说的话。

```
<img src="/services/captcha.png" style="display:none"> (Duplicate part to fix the issue)

<img src="/services/captcha.png"> (The actual one) 
```

希望这对任何未来的开发人员都有帮助。

# html - 粘性页脚：为什么会溢出：自动；和位置：相对；被需要？

> ID：14480196
> 
> 赞同：0
> 
> 时间：2013-01-23T12:51:22.393
> 
> 标签：html, css, position, overflow, sticky-footer

我正在使用来自[http://www.cssstickyfooter.com/的 css 粘性页脚](http://www.cssstickyfooter.com/style.css)

为什么我们需要：`#main{overflow:auto;}`和`#footer{position: relative;}`？

似乎没有它也可以工作（我不是在谈论 Opera 和 IE 修复）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:20:44.057

`overflow:auto;`如果页面长于根据您的屏幕高度显示的内容，则将简单地添加滚动条。我以前使用过它，并且相信它可以确保您的页脚在您滚动时保持在页面底部可见。

您是否在比屏幕可以显示的页面更长的页面上尝试过它以查看它的行为？

来自[cssstickyfooter.com](http://www.cssstickyfooter.com/using-sticky-footer-code.html)的报价：

> **无需 Clearfix 黑客！**
> 
> 许多 CSS 设计师都熟悉 Clearfix Hack。它解决了浮动元素的很多问题。此 Sticky Footer 解决方案的早期版本使用了它。相反，一个更现代且更易于编码的解决方案是溢出语句。我们将它应用到 main 以帮助让页脚粘在 Chrome 中。它还解决了使用 2 列布局时出现的问题，在这种布局中，您将内容浮动到一侧，将侧边栏浮动到另一侧。main 中的浮动内容元素可能会导致页脚在某些浏览器中不卡住。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:58:46.740

您可能不需要它，但如果需要，`overflow:auto`可以使元素充当容器，扩展自身以包含其浮动元素（如果存在）。

如果您使用 firebug，您可以通过使用它来了解我的意思，然后单击容器`element#main`。它将延伸到包含的元素。

没有它，容器元素会尽可能小，并且不会“包含”其他元素。

在这里阅读更多：

[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

# .net - 在 Visual Studio 2012 中生成单个 exe 文件

> ID：14480202
> 
> 赞同：3
> 
> 时间：2013-01-23T12:51:35.433
> 
> 标签：.net, exe

我正在尝试开发一个非常简单的应用程序来从 CD 启动 PDF（该应用程序将从同一张 CD 自动运行）。

我刚刚下载了 VS2012，到目前为止，我只设法为我的应用程序构建和生成安装程序，但我不知道如何生成不需要安装的单个 exe 文件。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:52:54.880

你可以使用类似[ILMerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)的东西。

Microsoft 的这一工具使您能够将所有 DLL 和您的可执行文件“链接”到一个可执行文件中。

ILMerge也有与 ILMerge类似的[替代品。](https://stackoverflow.com/questions/3655838/is-there-a-ilmerge-equivalent-tool-for-mono)

解决此问题的另一种方法是使用[工具 .NETZ](http://madebits.com/netz/help.php#single)。

* * *

如果您的要求是从 CD 开始，您可能希望使用 .NET 以外的其他技术，因为运行 .NET 应用程序需要 .NET Framework 存在于客户端计算机上，但情况可能并非总是如此。

我会创建一个本地的、非托管的应用程序，例如在 Delphi 或 C++ 中。

# javascript - 使用 Backbone 直接调用 url

> ID：14480206
> 
> 赞同：0
> 
> 时间：2013-01-23T12:51:51.443
> 
> 标签：javascript, backbone.js

如果我通过单击诸如 的链接导航到视图，`127.0.0.1/#/project/1`则会显示正确的视图。但是，如果我直接在浏览器中调用此 url（或点击刷新），则不会显示视图。这种行为的原因可能是什么？

我设置路由器的方式如下：

```
var AppRouter = Backbone.Router.extend({
      routes: { },
      initialize:function () { }
});
var app = new AppRouter(); 
```

然后在每个模块中（我正在使用 require.js），将添加一个路由和处理程序

```
app.route("project/:id", "showProject"); 
```

可能是路由尚未注册，因此不会调用回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:17:00.970

确保`Backbone.history.start()`在加载/实例化所有路由器并定义路由后调用：http: [//backbonejs.org/#History-start](http://backbonejs.org/#History-start)

或者，您可以使用 停止历史记录`Backbone.history.stop()`，然后重新开始。然后将拾取添加的路线。

顺便说一句，您可以测试历史当前是否以布尔值开头`Backbone.History.started`（注意大写“H”是必需的）。

# javascript - 手机注册表达式

> ID：14480210
> 
> 赞同：0
> 
> 时间：2013-01-23T12:51:57.560
> 
> 标签：javascript, jquery, regex

我正在尝试为手机找到一个正则表达式，它给我 07550440002 或 +4475504400003 最多 20 个字符，即我想要一个可能 + 或可能不是然后是整数的正则表达式。我有 ^(\+?[0-9])$ 但我不断收到错误消息意外量词。

当我尝试运行以下代码时会发生这种情况 -

```
if (!$(textBox).val().match(RestrictionRegularExpressions.MOBILEPHONE)) { 
```

其中 RestrictionRegularExpressions.MOBILEPHONE 设置了上面的 reg 表达式

我不认为它喜欢 \+。

这是使用 JQuery/Javascript

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:06:37.173

我不知道您是否 `\+?`使用您的语言工作，但您的正则表达式是错误的，因为可能有多个数字：

```
^(\+?[0-9]+)$ 
```

工作于[rubular](http://rubular.com/r/OGUOqwRMvg)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:13:55.987

我相信给定的正则表达式不起作用，因为反斜杠也需要转义。使用双反斜杠应该可以解决问题。

以下正则表达式对我有用：

```
^\\+?[0-9]{0,20}$ 
```

我在 W3Schools 网页上使用此页面进行了测试：[http](http://www.w3schools.com/js/tryit.asp?filename=tryjs_regexp_test) ://www.w3schools.com/js/tryit.asp?filename=tryjs_regexp_test 。它接受以可选“+”号为前缀的 0 到 20 个数字。

希望有帮助

# php - 如何在多维 JSON 数组中显示值

> ID：14480212
> 
> 赞同：1
> 
> 时间：2013-01-23T12:52:02.397
> 
> 标签：php, jquery, mysql, json, multidimensional-array

我从 php/mysql 数据库查询中获取了一个 json 多维数组（作为 $.ajax 调用的成功函数中的“数据”）。PHP 脚本将其发送到 javascript 文件，如下所示：

```
header('Content-Type: application/json');
echo json_encode($arr); 
```

查询可以从数据库返回一条或多条记录。

console.log(data) 似乎只给了我“父”数组中的第一个“子”数组。这是控制台中的内容：

```
[{id:114, branchStateCovered:MN, branchCountyCovered:Aitkin,…},...]
    0: {id:114, branchStateCovered:MN, branchCountyCovered:Aitkin,…}
    1: {id:115, branchStateCovered:MN, branchCountyCovered:Benton,…}
    2: {id:116, branchStateCovered:MN, branchCountyCovered:Carlton,…}
    3: {id:117, branchStateCovered:MN, branchCountyCovered:Chisago,…}
    4: {id:118, branchStateCovered:MN, branchCountyCovered:Cook,…}
    5: {id:119, branchStateCovered:MN, branchCountyCovered:Crow Wing,…}
    6: {id:120, branchStateCovered:MN, branchCountyCovered:Isanti,…}
    7: {id:121, branchStateCovered:MN, branchCountyCovered:Itasca,…}
    8: {id:122, branchStateCovered:MN, branchCountyCovered:Kanabec, branchZipCodesCovered:56358, 55051}
    9: {id:123, branchStateCovered:MN, branchCountyCovered:Lake,…}
    10: {id:124, branchStateCovered:MN, branchCountyCovered:Mille Lacs,…}
    11: {id:125, branchStateCovered:MN, branchCountyCovered:Pine,…}
    12: {id:126, branchStateCovered:MN, branchCountyCovered:Saint Louis,…}
    13: {id:127, branchStateCovered:WI, branchCountyCovered:Douglas,…} 
```

在不同的 $.ajax 调用中，我正在访问始终是一维数组的内容

```
$('label#branchName').text(data['name']);
$('label#branchAddress').text(data['address']);
etc... 
```

但在这种情况下，我需要遍历每个数组并以与上述类似的方式显示其每个值。

我找到[了这个 SO post](https://stackoverflow.com/questions/13959943/how-to-access-values-in-a-multidimensional-json-array-with-jquery)，但看起来帖子作者正在创建数组，因为他知道每个“子”数组的“名称”（生产者）。也许对我来说答案就在那篇文章中，而我只是没有看到。

如何获取输出的多维数组并循环遍历它以将每个数组的数组显示到一个表中 - 或者我想在 HTML 端用它做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:16:12.657

在您的调用`success`回调中，是数组，因此您可以使用它来迭代它：`$.ajax()``data`[`$.each()`](http://api.jquery.com/jQuery.each/)

```
$.each(data, function(index, element) {
    // use individual element (an object) here, i.e. element.id to get the id
}); 
```

# iis - 如何使用 IIS URL 重写为移动重定向设置 Vary HTTP 标头？

> ID：14480214
> 
> 赞同：0
> 
> 时间：2013-01-23T12:52:07.163
> 
> 标签：iis, redirect, mobile, http-headers, url-rewrite-module

根据[这个答案](https://stackoverflow.com/a/10739507/57311)，为了将移动用户重定向到移动站点，您应该添加 HTTP 标头-

`Vary: user-agent`

我正在使用 IIS URL Rewrite 模块，具有这样的规则-

```
<rule name="Production Mobile Rewrite 1" patternSyntax="ECMAScript" stopProcessing="true">
    <match url="(.*)" ignoreCase="true" negate="false" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_USER_AGENT}" pattern="midp|mobile|phone" />
        <add input="{HTTP_HOST}" pattern="^www.example.com$" />
    </conditions>
    <action type="Redirect" url="http://m.example.com/{R:1}" appendQueryString="false" redirectType="Found" />
</rule> 
```

我将如何`vary`在此响应中设置标题？

# html - 用css构造两个箭头

> ID：14480216
> 
> 赞同：0
> 
> 时间：2013-01-23T12:52:10.210
> 
> 标签：html, css, jsfiddle

我想尝试仅使用 CSS3 完成与下图（两个箭头）非常非常相似的事情。对于下一个和上一个。

![在此处输入图像描述](../Images/3fa541a095a1105c38e9effdbbdac470.png)

我需要知道的是如何构建上图所示的内容——仅使用 CSS3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:12:39.233

HTML：

```
<div class="arrow">
    <div class="triangle-left"></div>
    <div class="tail left-arrow"></div>
</div>

<div class="arrow">
    <div class="triangle-right"></div>
    <div class="tail right-arrow"></div>
</div> 
```

CSS：

```
.arrow { position:relative; width: 130px; }
.triangle-left {
    border-color: transparent green transparent transparent;
    border-style: solid;
    border-width: 20px;
    width: 0;
    height: 0;
        float: left;
}
.triangle-right {
    border-color: transparent transparent transparent green;
    border-style: solid;
    border-width: 20px;
    width: 0;
    height: 0;
        float: right;
}
.tail { width: 20px; height: 10px; position: absolute; background-color: green }
.tail.left-arrow { left: 40px; top: 15px }
.tail.right-arrow { right: 40px; top: 15px } 
```

[**看演示**](http://jsfiddle.net/akhurshid/upyzU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:35:28.383

如果您希望它们看起来与您给定的图像尽可能相似，那么您最好使用 base64 图像。

谷歌类似“base64 的图像”：[http ://www.base64-image.de/](http://www.base64-image.de/)

上传您的图片并使用给定的 base64 字符串作为`background-image`.

```
<style type="text/css">
div.image {
    background-image: url('data:image/png;base64,[...]');
}
</style> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T13:17:33.357

使用列表而不是项目符号使用箭头...例如，但不是在 CSS 中，我相信您可以在 CSS 中做到这一点。

```
<ul style="list-style-image: image(ltr 'arrow.png');">
<li dir='ltr'>My bullet is on the left!</li>
<li dir='rtl'>MY BULLET IS ON THE RIGHT!</li>
</ul> 
```

它应该是这样的，然后你可以将它们对齐一行

```
⇒ My bullet is on the left!
!THGIR EHT NO SI TELLUB YM ⇐ 
```

# c - Windows 上存在多少个独立的文件指针/位置？

> ID：14480218
> 
> 赞同：3
> 
> 时间：2013-01-23T12:52:22.457
> 
> 标签：c, windows, file

如果我在一个线程中打开一个文件（使用 CreateFile()）两次，这样我一次有两个有效的句柄，这两个文件句柄是否有一个共享的“文件指针”（SetFilePointer()），或者两个句柄有单独的独立“文件指针”？

如果在一个进程中有两个并发线程，并且它们每个都持有同一个文件的一个句柄，该怎么办。这两个句柄会有独立的文件指针吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:22:49.750

每次线程打开文件时，都会创建一个带有一组新的句柄特定属性的新[文件对象。](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545834%28v=vs.85%29.aspx)例如，当前字节偏移属性是指文件中使用该句柄的下一次读取或写入操作将发生的位置。即使底层文件是共享的，文件的每个句柄都有一个私有字节偏移量。文件对象对于进程也是唯一的，除非进程将文件句柄复制到另一个进程（通过使用 Windows [DuplicateHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724251%28v=vs.85%29.aspx)函数）或子进程从父进程继承文件句柄。在这些情况下，两个进程具有引用同一文件对象的不同句柄。Windows 内部结构 5

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:56:03.030

不同的文件句柄具有不同的文件指针，因此这些方案将毫无问题地工作（例如，两个线程可以“同时”从同一文件的不同部分读取，只要每个线程都独占使用自己的文件句柄）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:03:25.087

由不同调用创建的文件句柄`CreateFile`具有独立的文件指针。您可以根据需要在单独的线程中使用它们。

`DuplicateHandle` *通过共享*文件指针复制的句柄：不要使用它来获取要在另一个线程中使用的“单独”文件句柄。

# floating-point - OpenCL 缩减中 min() 和 max() 的中性元素

> ID：14480225
> 
> 赞同：2
> 
> 时间：2013-01-23T12:52:52.047
> 
> 标签：floating-point, opencl

我正在`float[]`通过 OpenCL 在 GPU 上减少（找到最小值和最大值）数组。

我正在将内存中的一些元素加载`global`到`local`每个工作组的内存中。当全局大小不是工作组大小的倍数时，我填充全局大小，使其成为全局大小的倍数。数组末尾之后的工作项将归约的中性元素放入`local`内存。

但是那个中性元素应该是为了什么`max()`——最大功能？ [OpenCL 文档](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/mathConstants.html)给出`MAXFLOAT`,`HUGE_VALF`和`INFINITY`非常大的正（或无符号）`float`值。`-INFINITY`例如，中性元素是否有意义？

现在我将`HUGE_VALF`它用作 的中性元素`min()`，但文档也说它`HUGE_VALF`被用作错误值，所以这可能是个坏主意。

缩减内核（代码）：

```
#define NEUTRAL_ELEMENT HUGE_VALF
#define REDUCTION_OP min

__kernel void reduce(__global float* weights,
                     __local float* weights_cached
                    )
{
  unsigned int id = get_global_id(0);

  // Load data
  if (id < {{ point_count }}) {
    weights_cached[get_local_id(0)] = weights[id];
  } else {
    weights_cached[get_local_id(0)] = NEUTRAL_ELEMENT;
  }

  barrier(CLK_LOCAL_MEM_FENCE);

  // Reduce
  for(unsigned int stride = get_local_size(0) / 2; stride >= 1; stride /= 2) {
    if (get_local_id(0) < stride) {
      weights_cached[get_local_id(0)] = REDUCTION_OP(weights_cached[get_local_id(0)], weights_cached[get_local_id(0) + stride]);
    barrier(CLK_LOCAL_MEM_FENCE);
  }

  // Save
  weights[get_group_id(0)] = weights_cached[0];
} 
```

**编辑：** 我实际上最终将`fmin()`and`fmax()`一起用作中性元素 - 根据[OpenCL 文档](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/fmax.html)`NAN`，这基本上可以保证工作，因为将始终返回数值（仅在给出两个值时才返回）。`NAN``NAN`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:28:20.730

引用 OpenCL 标准：

> HUGE_VALF 的计算结果为 +infinity。

`HUGE_VALF`因此，使用and之间没有真正的区别（隐含意图除外）`INFINITY`；两者都可以正常工作以`min`减少。就清晰度而言，我略微偏爱`INFINITY`，因为`HUGE_VALF`它在概念上用于边缘情况返回，但事实并非如此。

同样，`-INFINITY`用于`max`减少。

`MAX_FLOAT`如果您的数组包含无穷大，则不会作为中性元素正确运行。

# c# - Windows Azure 服务总线计费

> ID：14480228
> 
> 赞同：3
> 
> 时间：2013-01-23T12:52:55.307
> 
> 标签：c#, azure, azureservicebus

我对 azure 服务总线计费有疑问。如果我有以下代码，并且很长时间没有发送消息，请说 5 小时。

假设我只有一个订阅，代码如下。在这种情况下，在这 5 个小时内，我会收取什么费用（是一次发送一次下载一次，还是我会为 azure 在后台实现的轮询保持活动付费）？

```
enter code here
   var subscriptionClient = SubscriptionClient.CreateFromConnectionString(ConnString, topic, subscriptionName);
            while (true)
            {

                var message = subscriptionClient.Receive();
                if (message != null)
                {
                    try
                    {
                        message.Complete();

                    }
                    catch (Exception)
                    {
                        // Indicate a problem, unlock message in subscription
                        message.Abandon();
                    }
                }
                else 
                {
                    Console.WriteLine("null message received");
                }
                Thread.Sleep(25);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:16:10.220

只计算消息事务（发送、接收）... Azure 不为 KeepAlive 消息收费...

参考 MSDN 主题：http: [//msdn.microsoft.com/en-us/library/hh667438.aspx#BKMK_SBv2FAQ2_1](http://msdn.microsoft.com/en-us/library/hh667438.aspx#BKMK_SBv2FAQ2_1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:30:26.983

从上面的代码中，每次 Receive 调用返回时，您都会为一条消息付费（即使结果为空）。接收呼叫的默认超时时间为 60 秒，因此如果 5 小时内没有消息，您的代码将每 1 分钟返回一次，然后休眠 25 秒，因此假设每小时您将收取 48 条消息的费用（1 分钟超时和 25 秒等待）。您可以调用需要超时的[Receive](http://msdn.microsoft.com/en-us/library/hh330856.aspx)的重载并在那里传递 5 小时超时。在这里，连接将在返回之前保持活动 5 小时，因此在此期间不会产生任何费用。

从信封的背面计算：单个接收器，以一分钟超时运行，无需等待且没有真正的消息，将每分钟收取一条消息费用。整个月不到 5 美分。[在此处](http://www.windowsazure.com/en-us/pricing/calculator/?scenario=full)查看计费计算器

# ruby-on-rails - 如何为嵌入式模型加载工厂（Mongoid - Rails）

> ID：14480229
> 
> 赞同：0
> 
> 时间：2013-01-23T12:52:57.580
> 
> 标签：ruby-on-rails, mongoid, factory-bot

我在我的 Rails 应用程序中使用 Mongoid，考虑我在一个名为**“Post”**的类中有以下字段，其结构如下

```
class UserPost

  include Mongoid::Document
  field :post, type: String
  field :user_id, type: Moped::BSON::ObjectId
  embeds_many :comment, :class_name => "Comment"

  validates_presence_of :post, :user_id

end 
```

-

```
class Comment

  include Mongoid::Document
  field :commented_user_id, type: Moped::BSON::ObjectId
  field :comment, type: String

  embedded_in :user_post, :class_name => "UserPost"

end 
```

该模型在插入值时非常有效。

但现在我正在为这个模型编写测试，我正在使用 Factory girl 来加载测试数据。我对**如何**在 `/spec/factories/user_posts.rb`.

我尝试使用以下格式，但它不起作用（例如，仅添加了一些字段）

```
FactoryGirl.define do

  factory :user_post do
    id Moped::BSON::ObjectId("50ffd609253ff1bfb2000002")
    post "Good day..!!"
    user_id Moped::BSON::ObjectId("50ffd609253ff1bfb2000002")
    comment :comment
  end

  factory :comment do
    id Moped::BSON::ObjectId("50ffd609253ff1bfb2000002")
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:18:33.860

我认为您的问题是构建具有关联的对象。`ignore`我们使用块懒惰地建立关联解决了这个问题。

```
FactoryGirl.define do

  # User factory
  factory :user do
    # ...
  end

  # UserPost factory
  factory :user_post do

    # nothing in this block gets saved to DB
    ignore do
      user { create(:user) } # call User factory
    end

    post "Good day..!!"

    # get id of user created earlier
    user_id { user.id }

    # create 2 comments for this post
    comment { 2.times.collect { create(:comment) } }
  end
end

# automatically creates a user for the post
FactoryGirl.create(:user_post)

# manually overrides user for the post
user = FactoriGirl.create(:user)
FactoryGirl.create(:user_post, user: user) 
```

一个修复...在`:user_post`工厂中，您应该`Comment`为. 不只是一个。`UserPost.comment``embeds_many`

# mysql - MySQL：在“update”和“where”字段中使用 select 的结果

> ID：14480233
> 
> 赞同：0
> 
> 时间：2013-01-23T12:53:20.800
> 
> 标签：mysql, sql

我有两个图像表，现在我喜欢将所有图像打包在一个表中并通过外键 fk_image 引用它：

还：

```
Table1: ('id_system' , 'logo_image_raw', 'fk_image')
Table2: ('id_image', 'image_raw_data') 
```

如何将 logo_image_raw 复制/移动到表 2 的“image_raw_data”并在 fk_image 中反映其 id_image？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:05:52.423

你可以这样做..

```
 INSERT INTO table2
 SELECT table1.fk_image, table1.logo_image_raw
 FROM table1, table2 WHERE table1.fk_image = table2.id_image 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:55:41.823

做就是了`INSERT...INTO SELECT`

```
INSERT  INTO table2 (id_image, image_raw_data)
SELECT  fk_image, logo_image_raw
FROM    table1 
```

如果该列为`image_raw_data`null 但您已经拥有`id_image`，则需要加入表以便获取每个 ID 的特定图像，

```
UPDATE  table2 b 
        INNER JOIN table1 a
           ON a.fk_image = b.id_image
SET     b.image_raw_data = a.logo_image_raw 
```

# c# - Request.Url.AbsoluteUri 的不同结果，缺少 default.aspx

> ID：14480235
> 
> 赞同：0
> 
> 时间：2013-01-23T12:53:26.910
> 
> 标签：c#, asp.net, iis

我有一个 http 模块，当用户未经授权时，它会重定向到网站。该网站然后检查凭据并根据查询字符串将用户返回到原始页面。

我遇到的问题是，`Request.Url.AbsoluteUri`每当请求根目录时，它似乎都忽略了 default.aspx，例如`http://example/application/`

可以使用下面的测试用例观察到这种行为。`Response.Redirect`内使用时`Application_AuthenticateRequest`

请注意，VS Web 开发服务器 Cassini 运行正常，并且会正确重定向到`http://example/application/?url=http://example/application/default.aspx`我认为这与 IIS 处理请求的方式不同有关。（我正在运行 IIS6）

```
namespace HI.Test {
    public class Authentication : IHttpModule {

        private HttpRequest Request { get { return HttpContext.Current.Request; } }
        private HttpResponse Response { get { return HttpContext.Current.Response; } }
        private Cache Cache { get { return HttpContext.Current.Cache; } }

        public void Init(HttpApplication application) {
            application.AuthenticateRequest += (new EventHandler(Application_AuthenticateRequest));
        }

        private void Application_AuthenticateRequest(Object source, EventArgs e) {
            if (Request.QueryString["url"] == null) {
                Cache.Insert("URLRedirected", Request.Url.AbsoluteUri);
                Response.Redirect(Request.Url.AbsoluteUri + "?url=" + Request.Url.AbsoluteUri);
            }
        }

        public void Dispose() {

        }
    }
} 
```

我显然正在寻找解决问题的方法，并且我想了解为什么会发生这种情况。

# design-patterns - ServiceStack + ORMLite + 存储库模式

> ID：14480237
> 
> 赞同：7
> 
> 时间：2013-01-23T12:53:30.580
> 
> 标签：design-patterns, repository-pattern, servicestack, ormlite-servicestack

我正在尝试使用 ORMLite 实现存储库模式。我最初是这样开始的：

```
public List<Todo> GetByIds(long[] ids)
{
    using (IDbConnection dbConn = dbFactory.OpenDbConnection())
    {
        return dbConn.Ids<Todo>(ids).ToList();
    }
} 
```

但是在我的存储库中的每种方法下都有这个似乎有点重复？所以我创建了一个数据上下文类，我的所有存储库都继承自：

```
public class TodoRepository : DataContext 
```

这是那个`DataContext`类：

```
public class DataContext
{
    protected OrmLiteConnectionFactory dbFactory = new 
OrmLiteConnectionFactory(ConfigurationManager.ConnectionStrings["AppDb"].
ConnectionString, SqlServerOrmLiteDialectProvider.Instance);

    protected IDbConnection dbConn;

    public DataContext()
    {
        dbConn = dbFactory.OpenDbConnection();
    }
} 
```

然后我只需在我的方法中执行此操作：

```
public List<Todo> GetByIds(long[] ids)
{
    return dbConn.Ids<Todo>(ids).ToList();
} 
```

我只是好奇这是否是一个好的设计模式，以及其他人在使用存储库模式通过 ORMLite 进行数据访问时提出了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T13:51:06.943

我不会对存储库中的连接的强类型 DialectProvider 和配置进行硬编码。相反，我会做一些类似于 ServiceStack 的基础[服务](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs)类的事情，例如：

```
public class Repository : IDisposable {

    public IDbConnectionFactory DbFactory { get; set; } //injected by IOC

    IDbConnection db;
    IDbConnection Db 
    { 
        get 
        {
            return db ?? db = DbFactory.Open();
        }
    }

    public List<Todo> GetByIds(long[] ids)
    {
        return Db.Ids<Todo>(ids);
    }

    public void Dispose() {
        if (db != null)
            db.Dispose();
    }
} 
```

通过这种方式，您可以初始化`IDbConnectionFactory`它应该在的位置，即在您的 Host 项目的 IOC 注册中。在 ServiceStack 中，这是在`AppHost.Configure()`：

```
container.Register<IDbConnectionFactory>(c => 
    OrmLiteConnectionFactory(ConfigurationManager.ConnectionStrings["AppDb"].
        ConnectionString, SqlServerDialect.Provider);

container.RegisterAutoWired<Repository>().ReusedWithin(ReuseScope.None); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-17T09:24:16.567

我知道这是一个老问题，但我想我会加入。我的服务访问 a`IGenericRepository<T>`访问 a `IDatabaseContext`（可以是任何使用的东西`System.Data.IDbConnection`，但在这种情况下是 ServiceStack 的 OrmLite），而后者又使用 ServiceStack 的`IDbConnectionFactory`：

```
public class GenericRepository<T> : IGenericRepository<T>
    where T : class
{
    private readonly IDatabaseContext _databaseContext;

    public GenericRepository(IDatabaseContext databaseContext)
    {
        _databaseContext = databaseContext;
    }

    public T Get(int id)
    {
        return _databaseContext.Query(db =>
            {
                return db.SingleById<T>(id);
            });
    }

    public async Task<T> GetAsync(int id)
    {
        return await _databaseContext.QueryAsync(async db =>
        {
            return await db.SingleByIdAsync<T>(id);
        });
    }

    // other methods (All, First, etc)
} 
```

`IDbConnectionFactory`注册为

```
container.Register<IDbConnectionFactory>(c => 
    OrmLiteConnectionFactory(ConfigurationManager.ConnectionStrings["AppDb"].
        ConnectionString, SqlServerDialect.Provider); 
```

对于`IDatabaseContext`OrmLite：

```
public class OrmLiteDatabaseContext : IDatabaseContext
{
    private readonly IDbConnectionFactory _dbConnectionFactory;

    public DatabaseContext(IDbConnectionFactory dbConnectionFactory)
    {
        _dbConnectionFactory = dbConnectionFactory;
    }

    public T Query<T>(Func<IDbConnection, T> query)
    {
        using (var connection = _dbConnectionFactory.OpenDbConnection())
        {
            return query(connection);
        }
    }

    public async Task<T> QueryAsync<T>(Func<IDbConnection, Task<T>> query)
    {
        using (var connection = _dbConnectionFactory.OpenDbConnection())
        {
            return await query(connection);
        }
    }
} 
```

效果很好。

# c# - 模型未绑定到将 Null 作为值传递的操作

> ID：14480243
> 
> 赞同：2
> 
> 时间：2013-01-23T12:53:45.403
> 
> 标签：c#, asp.net-mvc, razor

我不知道为什么，模型没有绑定到创建操作：

视图模型：

```
public class AddressContactViewModel
{
    // Primary properties
    public int Id { get; set; }
    public string Contact { get; set; }

    // Navigation properties

    [Display(ResourceType = typeof(HeelpResources), Name = "AddressContactViewModelNameLabel")]
    [Required(ErrorMessageResourceName = "ErrorMsgRequiredField", ErrorMessageResourceType = typeof(HeelpResources))]
    public int ContactType_Id { get; set; }

    public int Address_Id { get; set; }

    // ViewModel dropdownlists
    public IEnumerable<SelectListItem> ContactTypeList { get; set; }
} 
```

看法：

```
@model Heelp.ViewModels.AddressContactViewModel

@using (Html.BeginForm()) {

    @Html.AntiForgeryToken()

    @Html.HiddenFor(m => m.Address_Id)

    <fieldset>
        <legend>AddressContactViewModel</legend>

       <div id="year">
        @Html.DisplayNameFor(m => m.ContactType_Id)
        @Html.DropDownListFor(m => m.ContactType_Id, Model.ContactTypeList, HeelpResources.AddressContactViewModelContactTypesListDropDownFirstRecord)
        @Html.ValidationMessageFor(m => m.ContactType_Id)
    </div>
    <div class="editor-label">
        @Html.LabelFor(m => m.Contact)
    </div>
    <div class="editor-field">
        @Html.TextBoxFor(m => m.Contact)
        @Html.ValidationMessageFor(m => m.Contact)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
} 
```

行动帖：

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public virtual ActionResult ContactCreate(AddressContactViewModel contact)
    {
        var contactDto = Mapper.Map<AddressContactViewModel, AddressContactDto>(contact);

        _addressContactService.Create(contactDto);

        return RedirectToAction(MVC.Address.ContactList());
    } 
```

**编辑：**得到：

```
 public virtual ActionResult ContactCreate(int addressId)
    {
        var model = new AddressContactViewModel
            {
                Address_Id = addressId,
                ContactTypeList = ContactTypeDropDownList()
            };

        return View(model);
    } 
```

当我提交表单时，我在 ContactCreate 操作的联系人参数中收到“null”，为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:11:04.520

难以置信，我发现了问题，动作的参数与ViewModel中的一个字段名称相同，更改了参数名称，一切正常发现：

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public virtual ActionResult ContactCreate(AddressContactViewModel addressContact) // HERE I CHANGE FROM contact TO addressContact AND THE PROBLEM GET SOLVED
    {
        var contactDto = Mapper.Map<AddressContactViewModel, AddressContactDto>(addressContact);

        _addressContactService.Create(contactDto);

        return RedirectToAction(MVC.Address.ContactList(addressContact.Address_Id));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:57:24.913

我在上一个应用程序中遇到了同样的问题。尝试将按钮和要提交的字段包含在同一个 div 中：

```
@model Heelp.ViewModels.AddressContactViewModel

@using (Html.BeginForm()) {

@Html.AntiForgeryToken()

@Html.HiddenFor(m => m.Address_Id)

<fieldset>
    <legend>AddressContactViewModel</legend>

   <div id="year">
    @Html.DisplayNameFor(m => m.ContactType_Id)
    @Html.DropDownListFor(m => m.ContactType_Id, Model.ContactTypeList, HeelpResources.AddressContactViewModelContactTypesListDropDownFirstRecord)
    @Html.ValidationMessageFor(m => m.ContactType_Id)
</div>
<div class="editor-label">
    @Html.LabelFor(m => m.Contact)
</div>
<div class="editor-field">
    @Html.TextBoxFor(m => m.Contact)
    @Html.ValidationMessageFor(m => m.Contact)
    <input type="submit" value="Create" />
</div>
</fieldset>
} 
```

# css - CSS 自定义精灵

> ID：14480245
> 
> 赞同：0
> 
> 时间：2013-01-23T12:53:47.350
> 
> 标签：css, background-image, sprite

我有一个精灵（110px 高 x 50px 宽）图像（50px x 50px），它们之间有 10px。

我有`<li>`填充和边距，宽度不是静态的，高度是 80 像素。

我想将图像 50x50（从 61px 到 110px（h）和 0 到 50（w））`<li>`作为其背景放在中间（垂直）的左侧（水平）而不改变`<li>`.

我已经阅读了很多文章...我没有找到正常的解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:58:37.633

您可以在 CSS 中设置背景位置。背景位置也将接受负数。设置 li 的大小并将其显示为块元素，然后使用背景位置：[https ://developer.mozilla.org/en/docs/CSS/background-position](https://developer.mozilla.org/en/docs/CSS/background-position)

# wcf - Silverlight WCF 服务仅在本地主机上工作

> ID：14480250
> 
> 赞同：1
> 
> 时间：2013-01-23T12:54:20.563
> 
> 标签：wcf, web-services, silverlight, iis, webservice-client

为长篇道歉，但我想包含尽可能多的信息。所以我几天来一直在努力让我的 WCF 服务与我的 silverlight 应用程序正常工作。我最初部署了它，一切运行顺利。

但是，在我对其中一种方法进行更新之后，它就没有用了。我使用 SVN 来存储我的工作，甚至回到项目的以前版本并重新部署它并没有帮助。请有人可以帮助我:(

如果我通过 VS2012 运行我的 silverlight 应用程序，它可以正常工作，所有对服务的调用都按要求工作并检索正确的信息。但是，如果我在部署 silverlight 应用程序后触发相同的调用，我会收到以下错误之一：

```
 An exception occurred during the operation, making the result invalid.  Check InnerException for exception details.

   at System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()
   at OrionDashboard.OrionWebService.GetTestDataCompletedEventArgs.get_Result()
   at OrionDashboard.MonthlyOverview.OrionWebService_GetTestDataCompleted(Object sender, GetTestDataCompletedEventArgs e)
   at OrionDashboard.OrionWebService.OrionWebServiceClient.OnGetTestDataCompleted(Object state) 
```

或者

```
[Async_ExceptionOccurred] Arguments: Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&Version=4.0.51204.0&File=System.dll&Key=Async_ExceptionOccurred   at 
```

与其他错误消息的 onComplete 事件错误对应的其余错误。

再次，这仅在将其部署到服务器上的 IIS 时发生，并且仅在我将更新重新部署后才开始发生

我使用了 VS2012 中包含的 WCF Storm 和 WCF 测试客户端来测试通过网络部署的服务，并且所有合同都返回了所有内容，没有任何问题。

这是 ServiceReferences.ClinetConfig：

```
<configuration>
<system.serviceModel>
    <bindings>
        <customBinding>
            <binding name="CustomBinding_OrionWebService">
                <binaryMessageEncoding />
                <httpTransport maxReceivedMessageSize="2147483647"
                               maxBufferSize="2147483647" />
            </binding>
        </customBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:53493/OrionWebService.svc" 
                  binding="customBinding" 
                  bindingConfiguration="CustomBinding_OrionWebService"
                  contract="OrionWebService.OrionWebService"
                  name="CustomBinding_OrionWebService" />
    </client>
</system.serviceModel> 
```

从我引用服务项目时自动生成的内容来看，我根本没有对此进行任何更改。我认为可能是这一行：“http://localhost:53493/OrionWebService.svc”

因为在提琴手中，我在 crossdomain.xml 和 clientaccesspolicy.xml 上收到以下错误

[Fiddler] 到 localhost 的套接字连接失败。错误代码：10061。无法建立连接，因为目标机器主动拒绝它 [::1]:53493

但是，当我将 xap 更改为 zip 文件并修改 ServiceReference.ClientConfig 以指向相同的服务地址时，如果您想检查您的服务，例如“http://ServerName/OrionDashboard/OrionWebService.svc”，我仍然会得到来自silverlight的相同错误，然后从两个文件中获得404错误。

这是web.config：

```
 <?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
    <system.web>
        <compilation debug="true"
                     targetFramework="4.0" />
    </system.web>

    <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="true" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <bindings>
            <customBinding>
                <binding name="OrionDashboard.Web.OrionWebService.customBinding0">
                    <binaryMessageEncoding />
                    <httpTransport />
                </binding>
            </customBinding>
        </bindings>
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
                                   multipleSiteBindingsEnabled="true" />
        <services>
            <service name="OrionDashboard.Web.OrionWebService">
                <endpoint address="" 
                          binding="customBinding" 
                          bindingConfiguration="OrionDashboard.Web.OrionWebService.customBinding0"
                          contract="OrionDashboard.Web.OrionWebService" />
                <endpoint address="mex" 
                          binding="mexHttpBinding"
                          contract="IMetadataExchange" />
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

与 ServiceReference 一样，web.config 也被单独留下，因为我真的不明白它的大部分含义。但是当我第一次部署 silverlight 应用程序时，我将其保留原样，并且如前所述，它当时运行良好。

*   我不相信它是一个数据库问题，因为它在本地运行没有任何问题，并且该服务也使用来自已部署服务的正确数据进行响应。

*   该服务似乎运行良好，WCF 测试客户端或 WCF Storm 应用程序均未报告任何问题

*   在 VS2012 中，当发布 wcf 服务时，它不会将服务与客户端分开，也不会创建 crossdomain.xml 或 clientaccesspolicy.xml，所以我在发布后手动添加了它们。不确定这是否可能是原因？

我完全迷失了，到目前为止我发现的所有工作都对我不起作用。请有人至少可以指出我正确的方向吗？

# c# - 如何在 Windows XP 中分配 500 MB 的 DMA 缓冲区

> ID：14480251
> 
> 赞同：0
> 
> 时间：2013-01-23T12:54:23.010
> 
> 标签：c#, memory-management, windows-xp, dma, pci

有一个 PCI 卡连接到 PC，我们有一个相同的 GUI。我们要在 RAM 中分配大约 400 到 600 MB 物理内存的 DMA 缓冲区，以便从 PCI 卡中读取/写入（FPGA 在 PCI 卡中进行读取/写入操作）。我们正在使用 JUNGO windows PCI 驱动程序。JUNGO 提供了一个 WDC_DMAContigBufLock 方法，通过 Contiguous 或 scatter/Gather 方法分配 DMA Buffer。我们可以在 RAM 中创建最多 63MB 的缓冲区，但不能创建超过 63MB 的缓冲区。操作系统是 Windows XP 32 位，RAM 大小为 4GB（相对 3 GB 是免费的）。

应用程序 (GUI) 是用 C# .Net 编写的，并尝试通过此应用程序创建 400 – 600MB 的 DMA 缓冲区。我正在寻找可能导致/阻止我创建 400 - 600MB 缓冲区大小的解决方案/想法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T15:03:45.597

用于 DMA 缓冲区的页面是从非分页内核内存池中分配的。这是 Windows 中的宝贵资源，您不能合理地要求如此巨大的分配。从文档中不清楚 WD_DMALock() 函数是否对请求设置了上限，或者您只是要求太多而 Windows 拒绝该请求，或者您的机器在内存池。它不会有 500 兆字节，这是肯定的。XP 上的默认大小是 256 MB iirc。

更多关于此[的常见问题解答](http://www.jungo.com/st/support/faq.html#dma1)。显然，您无法可靠地按预期进行这项工作，将传输拆分为更合理大小的较小请求。

# linq - 在 c# 中使用 Linq 在 xml 中出现错误数据加密异常

> ID：14480253
> 
> 赞同：1
> 
> 时间：2013-01-23T12:54:27.693
> 
> 标签：linq, cryptography, encryption

我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<dskh>
  <khachhang maso="kh01">
    <ten_kh>thehung</ten_kh>
    <tuoi_kh>15</tuoi_kh>
    <dchi_kh>hochiminh</dchi_kh>
  </khachhang>
  <khachhang maso="kh02">
    <ten_kh>hung</ten_kh>
    <tuoi_kh>15</tuoi_kh>
    <dchi_kh>hcm</dchi_kh>
  </khachhang>
</dskh> 
```

我的加密和解密代码：

```
class Program
{
    //  Call this function to remove the key from memory after use for security.
    [System.Runtime.InteropServices.DllImport("KERNEL32.DLL", EntryPoint = "RtlZeroMemory")]
    public static extern bool ZeroMemory(ref string Destination, int Length);

    // Function to Generate a 64 bits Key.
    static string GenerateKey()
    {
        // Create an instance of Symetric Algorithm. Key and IV is generated automatically.
        DESCryptoServiceProvider desCrypto = (DESCryptoServiceProvider)DESCryptoServiceProvider.Create();

        // Use the Automatically generated key for Encryption. 
        return ASCIIEncoding.ASCII.GetString(desCrypto.Key);
    }

    static void EncryptFile(string sInputFilename,
        string sOutputFilename,
        string sKey) {
        FileStream fsInput = new FileStream(sInputFilename,FileMode.Open,FileAccess.Read);
        FileStream fsEncrypted = new FileStream(sOutputFilename,FileMode.Create,FileAccess.Write);
        DESCryptoServiceProvider DES = new DESCryptoServiceProvider();
        DES.Key = Encoding.UTF8.GetBytes(sKey);
        DES.IV = Encoding.UTF8.GetBytes(sKey);
        ICryptoTransform desencrypt = DES.CreateEncryptor();
        CryptoStream cryptostream = new CryptoStream(fsEncrypted,desencrypt,CryptoStreamMode.Write);
        byte[] bytearrayinput = new byte[fsInput.Length - 1];
        fsInput.Read(bytearrayinput, 0, bytearrayinput.Length);
        cryptostream.Write(bytearrayinput, 0, bytearrayinput.Length);
    }

    static void DecryptFile(string sInputFilename,
                        string sOutputFilename,
                        string sKey)
    {
        DESCryptoServiceProvider DES = new DESCryptoServiceProvider();
        //A 64 bit key and IV is required for this provider.
        //Set secret key For DES algorithm.
        DES.Key = Encoding.UTF8.GetBytes(sKey);
        //Set initialization vector.
        DES.IV = Encoding.UTF8.GetBytes(sKey);

        //Create a file stream to read the encrypted file back.
        FileStream fsread = new FileStream(sInputFilename,
                                       FileMode.Open,
                                       FileAccess.Read);
        //Create a DES decryptor from the DES instance.
        ICryptoTransform desdecrypt = DES.CreateDecryptor();
        //Create crypto stream set to read and do a 
        //DES decryption transform on incoming bytes.
        CryptoStream cryptostreamDecr = new CryptoStream(fsread,
                                                     desdecrypt,
                                                     CryptoStreamMode.Read);
        //Print the contents of the decrypted file.
        StreamWriter fsDecrypted = new StreamWriter(sOutputFilename);
        fsDecrypted.Write(new StreamReader(cryptostreamDecr).ReadToEnd());
        fsDecrypted.Flush();
        fsDecrypted.Close();
    }

    static void Main(string[] args)
    {
        // Must be 64 bits, 8 bytes.
        // Distribute this key to the user who will decrypt this file.
        string sSecretKey;

        // Get the key for the file to encrypt.
        sSecretKey = GenerateKey();

        // For additional security pin the key.
        GCHandle gch = GCHandle.Alloc(sSecretKey, GCHandleType.Pinned);

        // Encrypt the file.        
        EncryptFile(@"C:\xml_kh.xml",
          @"C:\xml_encry.xml",
           sSecretKey);

         //Decrypt the file.
        DecryptFile(@"C:\xml_encry.xml",
           @"C:\xml_decry.xml",
           sSecretKey);
    }
} 
```

当我执行解密代码时，我得到**Cryptographicexception: Bad Data** here：

```
//Print the contents of the decrypted file.
StreamWriter fsDecrypted = new StreamWriter(sOutputFilename);
fsDecrypted.Write(new StreamReader(cryptostreamDecr).ReadToEnd());
fsDecrypted.Flush();
fsDecrypted.Close(); 
```

请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:52:37.907

`EncryptFile`在函数末尾添加两行：

```
cryptostream.Flush();
cryptostream.Close(); 
```

**编辑**

我错过了还有一个错误：

```
byte[] bytearrayinput = new byte[fsInput.Length - 1]; 
```

*s/b*

```
byte[] bytearrayinput = new byte[fsInput.Length]; 
```

# javascript - 更改倒计时持续时间

> ID：14480254
> 
> 赞同：0
> 
> 时间：2013-01-23T12:54:30.380
> 
> 标签：javascript, jquery, jquery-countdown

我在我的网站上使用这个倒计时，[**这里**](http://johns-webdesign.com/client/bobbie/video/index.php)

[**您可以在此处**](http://johns-webdesign.com/client/bobbie/video/javascripts/jquery.countdown.js)查看脚本（太大，无法发布）

这是head部分的代码：

```
<script type="text/javascript" src="javascripts/jquery.countdown.js"></script>
    <script type="text/javascript">
        $(function () {
            var austDay = new Date();
            austDay = new Date(austDay.getFullYear() + 1, 1 - 1, 26);
            $('.countdown-container').countdown({until: austDay});
            $('#year').text(austDay.getFullYear());
        });
    </script> 
```

我希望能够更改倒计时持续时间，希望可以更改为我想要的任何时间。

如果有人可以提供见解，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:02:36.343

编辑：

```
var CommingDate = new Date(); 
CommingDate= new Date(CommingDate.getFullYear() + 1, 1 - 1, 26); 
```

解释

`Date(`**CommingDate.getFullYear() + 1**`, 1 - 1, 26);` 表示你想让当前年份增加 1

`Date(CommingDate.getFullYear() + 1,` **1 - 1**`, 26);`

第一个数字将向前一个月，所以如果你要这样做`2 - 1`，月份将是二月

但是如果你做这样的事情`1 - 1`会导致获得当前月份 `Date(CommingDate.getFullYear() + 1, 1 - 1,` **26**`);` 最后一个数字 26 将是你想要的那一天

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-27T10:52:44.310

我有同样的问题，但侯赛因的解释帮助我解决了这个问题。

例如，如果你想倒计时到 25.10.2017，代码应该是

```
Date(CommingDate.getFullYear() + 1, 10 - 1, 25); 
```

在哪里

**CommingDate.getFullYear() + 1** -*现在是 2017 年（实际年份 + 1）*

**10 - 1** -*这个月*

**25-***今天到*了

# npgsql - 这个 npgsql Time 数据类型文档是什么意思？

> ID：14480256
> 
> 赞同：0
> 
> 时间：2013-01-23T12:54:35.930
> 
> 标签：npgsql

我们正在考虑使用 PostgreSQL，因为它遵守 ISO 8601 3.5.2，特别是在独立（未组合）时间数据类型（例如 18:50）与组合日期时间（时间戳）类型不同方面。请参阅[相关的 PostgreSQL 9.2。文档](http://www.postgresql.org/docs/9.2/static/datatype-datetime.html)。Time of Day 数据类型基于 24 小时制，与日历无关，从 00:00 运行到 24:00。

我们有 Windows 桌面并且正在考虑使用 .NET 的 npgsql 提供程序。但是我被**npgsqlTime**类型的 npgsql 提供程序的[文档所抛出；](http://npgsql.projects.pgfoundry.org/docs/api/)**Hours**实例属性如下所示：

 ****> 获取实例中保留的整小时数。请注意，可以存储时间 24:00:00 以实现往返兼容性。*对此类值的任何计算都会将其标准化 [原文如此] 为 00:00:00*。[我的重点]

“这样的值”是指“24:00:00”。我是否正确理解此文档，如果要创建两个**npgsqlTime**实例，如下所示：

```
 NpgsqlTime midnightTonight = new NpgsqlTime(24,0,0);
    NpgsqlTime midnightThisMorning = new NpgsqlTime(0,0,0); 
```

然后调用 Subtract 方法：

```
 midnightTonight.Subtract(midnightThisMorning); 
```

*MidnightTonight*将被规范化（由提供者默默地）到 00:00，减法方法的结果将不是 24 小时而是 0 小时的间隔？

或者如果我们实例化两次 Times 这样：

```
 NpgsqlTime midnightTonight = new NpgsqlTime(24,0,0);
    NpgsqlTime lateAfternoon = new NpgsqlTime(16,0,0); 
```

然后减去：

```
 midnightTonight.Subtract(lateAfternoon); 
```

我们会得到 16 小时而不是 8 小时的间隔？

编辑：既然 PostgreSQL 和 Npgsql 都已安装并且我可以测试，似乎 Subtract() 上不会发生 24:00 到 00:00 的静默“标准化”，但它确实发生在 Add() 上。

编辑：所以 Subtract() 没问题。我们希望答案是 8，它是 8。

我很高兴它不会在 Subtract() 上发生，我希望它不会在默认情况下在 Add() 上发生，特别是因为公共 API 中有 Normalize() 方法。****

# mongodb - 为什么 Mongoose API 文档中的 Model.remove 有两个删除参考项？

> ID：14480257
> 
> 赞同：0
> 
> 时间：2013-01-23T12:54:39.950
> 
> 标签：mongodb, mongoose, nosql

登陆[mongoose 的 API 文档后](http://mongoosejs.com/docs/api.html#model_Model-remove)，有左侧菜单，在 model.js 部分下。我们看到这样的事情：

```
- model.js

    -Model
    -save
    -increment
    -remove      <== 1
    -model
    -$where
    -ensureIndexes
    -remove      <== 2
    ... 
```

两个**[删除](http://mongoosejs.com/docs/api.html#model_Model-remove)**都有链接到`Model#remove([fn])`

还有一个未链接的主题。标题`Model.remove(conditions, [callback])`记录在同`model.js`一部分下。（就在主题[Model.ensureIndexes](http://mongoosejs.com/docs/api.html#model_Model-ensureIndexes)之后）

谁能告诉我两者有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:19:50.780

您可以随时浏览 mongoose 的[源代码](https://github.com/LearnBoost/mongoose/blob/master/lib/model.js)。这是了解其工作原理的好方法。

有两个删除：

1.  Model.prototype.remove => 这会从集合中移除特定的猫鼬模型对象。它适用于一个实例。

    `Model.prototype.remove = function remove (fn) { ... }`

2.  Model.remove => 这绕过了 Mongoose 库并使用作为第一个参数提供的条件来执行删除：

    `Model.remove = function remove (conditions, callback) { ... }`

（它在页面上记录为 Model.remove，但页面上的锚点似乎有问题指向错误的功能，可能是因为名称重复。）

# c# - LDAP 服务器不可用

> ID：14480258
> 
> 赞同：15
> 
> 时间：2013-01-23T12:54:41.923
> 
> 标签：c#, asp.net, ldap

我是这个的新手

尝试使用`PrincipalContext`. 我已经尝试了该站点上的所有解决方案，但均无济于事。

我尝试过的事情：

```
PrincipalContext insPrincipalContext = 
   new PrincipalContext(ContextType.Domain);

PrincipalContext insPrincipalContext = 
   new PrincipalContext(ContextType.Domain, "ldap://localhost:389/dc=maxcrc,dc=com");

PrincipalContext insPrincipalContext = 
   new PrincipalContext(ContextType.Domain, "maxcrc.com"); 
```

都给出相同的结果：

> *LDAP 服务器不可用*

只能`ContextType.Machine`基本工作。

不确定我的 LDAP 服务器是否设置正确：

*   主机：本地主机
*   端口：389
*   基础 DN：dc=maxcrc,dc=com
*   网址：ldap://localhost:389/dc=maxcrc,dc=com

使用 Softerra LDAP 浏览器进行测试

任何从头到尾的教程将不胜感激......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-12-28T13:18:00.940

我一直面临同样的问题，我找到了解决方案。

我可以使用以下代码轻松连接：

```
 ADUser_Id = "domainName\\username"; //make sure user name has domain name.
 Password = "xxxx";
var context = new PrincipalContext(ContextType.Domain,"server_address", ADUser_Id,Password);
/* server_address = "192.168.15.36"; //don't include ldap in url */ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-21T22:10:11.093

我有类似的问题。原来我必须在对象初始化中传递用户名和密码。请尝试使用如下语句：

```
PrincipalContext insPrincipalContext = 
new PrincipalContext(ContextType.Domain, 
"ldap://localhost:389/dc=maxcrc,dc=com",
userName,
password); 
```

还要确保您的用户名中包含域。

例如，

```
userName = "mydomainname" + "\\" + "john_jacobs" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-01T09:35:07.757

使用以下构造函数重载`PrincipalContext`：

```
public PrincipalContext(
    ContextType contextType,
    string name,
    string container
) 
```

并将服务器名称与 LDAP 字符串分开：

```
PrincipalContext insPrincipalContext = 
   new PrincipalContext(ContextType.Domain, "localhost:389", "dc=maxcrc,dc=com"); 
```

[https://msdn.microsoft.com/en-us/library/bb348316%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/bb348316%28v=vs.110%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-11T09:14:02.500

该错误可能是由于尝试连接为“匿名”而不明确指定它。默认情况下，所有连接都是可协商的。因此，如果您尝试类似的方法，您可以尝试以下操作：

```
LdapDirectoryIdentifier ldap = new LdapDirectoryIdentifier("My Hostname or IP Address",10389); //10389 might be your non default port
LdapConnection connection = new LdapConnection(ldap);
connection.AuthType = AuthType.Anonymous; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T23:26:49.747

您可能想尝试使用本地计算机地址：

```
ldap://127.0.0.1:389/dc=maxcrc,dc=com 
```

如果这不起作用，我会启动 Wireshark，并让它在您尝试通过 Softerra 连接时捕获端口 389 上的流量。

在我使用 LDAP 和 .Net DirectoryServices 时，该错误通常意味着路径的语法或命名约定不正确，或者没有指向有效的目录端点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-09T03:28:11.767

在我的环境中，我必须只使用域控制器主机名创建主体上下文，然后单独验证用户凭据。

```
string domainControllerName = "PDC";
string domainName = "MyDomain"; // leave out the .Local, this is just to use as the prefix for the username if the user left it off or didn't use the principal address notation
string username = "TestUser";
string password = "password";

using (var ldap = new PrincipalContext(ContextType.Domain, domainControllerName))
{
    var usernameToValidate = username;
    if (!usernameToValidate.Any(c => c == '@' || c == '\\'))
            usernameToValidate = $"{domainName}\\{username}";

    if (!ldap.ValidateCredentials(username, context.Password, ContextOptions.SimpleBind))
        throw new UnauthorizedException();
} 
```

> 此示例允许验证用户名的所有这三种变体：
> 
> *   测试用户
> *   我的域\测试用户
> *   TestUser@MyDomain.Local

# javascript - 在 JavaScript 中添加事件监听器

> ID：14480259
> 
> 赞同：1
> 
> 时间：2013-01-23T12:54:45.710
> 
> 标签：javascript

我有一个使用 CSS3 类定义的 JavaScript 和 div。我需要将事件侦听器添加到特定的类 div 但它没有绑定到它。

例如：

```
this._incrementEnabled = document.createElement('div');
this._incrementEnabled.className = this._incrementButtonProperties.enabledClass;
this.divElt.appendChild(this._incrementEnabled);

if (this.properties.incrementButtonConfig.enabled == null) {
    this.properties.incrementButtonConfig.enabled = false;
}

this.setIncrementEnabled(this.properties.incrementButtonConfig.enabled);

this._incrementEnabled.addEventListener('click', this._incrementButtonProperties.incrementSelectCallback, false); 
```

和CSS：

```
.SchedMainCtrlIncrementBtn_En {
    position: absolute;
    top: 3px;
    left: 240px;
    display: inline-block;
    font-size: 28px;
    vertical-align: middle; 
    width: 35px;
    height: 65px;
    height: 35px;
    background: url("../../../images/icons/IcnListAddRecipient_En.png") no-repeat center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:03:10.103

像这样的东西：

```
var divs = document.querySelectorAll( 'div.yourclass' );
for( var i=0; i < divs.length; i++ ){
    divs[ i ].addEventListener( 'eventname', callback, false );
} 
```

编辑：

通过使用这个非常长的变量名阅读您的代码，我得出结论，您想要执行以下操作：

```
this.element = document.createElement( 'div' );
this.element.className = 'someName';
this.parentElement.appendChild( this.element );
this.element.addEventListener( 'click', callback, false ); 
```

因此，如果`this.parentElement`未定义，或者`callback`未定义，它将不起作用。我不知道你是如何编写这个类的，但所有使用的函数（`document.createElement`, `appendChild`, `addEventListener`）都是本机函数，所以它们可以工作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-23T13:08:05.387

如果可能的话，尝试使用 Jquery 会更简单，你可以这样做`$('.class').click(function(){})`

# oracle - 获取查询的运行时执行计划

> ID：14480264
> 
> 赞同：7
> 
> 时间：2013-01-23T12:55:02.530
> 
> 标签：oracle, oracle11g

我有一个执行一些 sql 查询的应用程序。如何从 sqlplus 或其他一些 oracle 客户端获取当前执行查询的执行计划？如果有必要，我可以修改应用程序中使用的 oracle 会话。

我不想`explain plan`手动使用和执行该查询，我需要获取用于查询的实际执行计划。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T13:05:14.463

您可以对来自 SGA 的历史查询运行 explain plain -[示例](http://www.techrepublic.com/article/format-explain-plan-results-easily-with-oracles-dbmsxplan/6070884)

并列出 B。

例子：

```
SELECT username, prev_sql_id
FROM v$session
WHERE username = 'RDEVALL'  -- example user 
```

返回的 SQL ID

```
RDEVALL a1d4z5ruduzrd
RDEVALL avmbutuknvb6j
RDEVALL 75g0tqd9x743y
RDEVALL 5fnkh6c8mqqt3
RDEVALL 75g0tqd9x743y 
```

选择查询 ID 并在此处使用：

```
SELECT *
  FROM TABLE(DBMS_XPLAN.DISPLAY_CURSOR('a1d4z5ruduzrd')); -- replace with sql ID as needed 
```

# java - Java Swing 应用程序和 JavaBeans 中的 MVC 约定

> ID：14480271
> 
> 赞同：1
> 
> 时间：2013-01-23T12:55:28.910
> 
> 标签：java, model-view-controller, design-patterns, javabeans

我很好奇 MVC 约定的 VIEW 类是否可以检索 bean 对象以更改其文本显示。我没有将`bean`视为我的`model`，而是`model`更改 bean 的状态，然后`VIEW`. 根据请求，Model 会将 Bean 的对象传递给控制器​​，然后控制器将其传递给 Views。这很糟糕吗？

这是我的意思： 豆：

```
 public class Bean{

    private String eventName;
    private String eventDate;
    //getters
    //setters

} 
```

模型：

```
public class Model {

Bean e = new Bean();
e.setEventOpportunity(rs.getString(7));
        e.setEventMoreDetails(rs.getString(8));
        e.setEndTime(rs.getString(9));

} 
```

控制：

```
public class Control () {
public Control() {
Bean events; 
events = model.getEvent(tableClick); //tell model to change its state based on user input on views 
view.changeDisplay(events);
                    }

        }
        } 
```

意见：

```
 public class Views {
    public void editTextFields(Bean e) {
       try {
       txtEventName.setText(e.getEventName());
       String dateString = e.getEventDate();

       } catch(Exception te) {
           te.printStackTrace();
       }
   }

    } 
```

这样的设计是否仍然遵守 mvc 约定。我不希望我的模型很麻烦，因为它处理数据库并且将 Bean 属性放在那里，类会变得很麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:10:39.657

您被 MVC 的“编辑器不匹配”所困，即您有一个编辑器/视图和一个模型，而两者无法就如何公开哪些信息达成一致。通常，[编辑器/视图需要模型不关心的附加信息](http://blog.pdark.de/2012/12/19/mvvm-when-mvc-isnt-enough/)。

[Model View ViewModel (MVVM)](http://en.wikipedia.org/wiki/Model_View_ViewModel)解决了这个问题，并且该解决方案与您的解决方案非常相似。

我建议的唯一更改是将“创建 Bean”代码从模型移动到控制器。控制器旨在配置模型、视图和视图模型以很好地协同工作。

# php - 反混淆一些 PHP 代码

> ID：14480272
> 
> 赞同：3
> 
> 时间：2013-01-23T12:55:31.670
> 
> 标签：php, deobfuscation

我正在尝试去混淆这个 PHP 代码：

```
<?php if(!function_exists("TC9A16C47DA8EEE87")){function TC9A16C47DA8EEE87($T059EC46CFE335260){$T059EC46CFE335260=base64_decode($T059EC46CFE335260);$TC9A16C47DA8EEE87=0;$TA7FB8B0A1C0E2E9E=0;$T17D35BB9DF7A47E4=0;$T65CE9F6823D588A7=(ord($T059EC46CFE335260[1])<<8)+ord($T059EC46CFE335260[2]);$TBF14159DC7D007D3=3;$T77605D5F26DD5248=0;$T4A747C3263CA7A55=16;$T7C7E72B89B83E235="";$T0D47BDF6FD9DDE2E=strlen($T059EC46CFE335260);$T43D5686285035C13=__FILE__;$T43D5686285035C13=file_get_contents($T43D5686285035C13);$T6BBC58A3B5B11DC4=0;preg_match(base64_decode("LyhwcmludHxzcHJpbnR8ZWNobykv"),$T43D5686285035C13,$T6BBC58A3B5B11DC4);for(;$TBF14159DC7D007D3<$T0D47BDF6FD9DDE2E;){if(count($T6BBC58A3B5B11DC4)) exit;if($T4A747C3263CA7A55==0){$T65CE9F6823D588A7=(ord($T059EC46CFE335260[$TBF14159DC7D007D3++])<<8);$T65CE9F6823D588A7+=ord($T059EC46CFE335260[$TBF14159DC7D007D3++]);$T4A747C3263CA7A55=16;}if($T65CE9F6823D588A7&0x8000){$TC9A16C47DA8EEE87=(ord($T059EC46CFE335260[$TBF14159DC7D007D3++])<<4);$TC9A16C47DA8EEE87+=(ord($T059EC46CFE335260[$TBF14159DC7D007D3])>>4);if($TC9A16C47DA8EEE87){$TA7FB8B0A1C0E2E9E=(ord($T059EC46CFE335260[$TBF14159DC7D007D3++])&0x0F)+3;for($T17D35BB9DF7A47E4=0;$T17D35BB9DF7A47E4<$TA7FB8B0A1C0E2E9E;$T17D35BB9DF7A47E4++)$T7C7E72B89B83E235[$T77605D5F26DD5248+$T17D35BB9DF7A47E4]=$T7C7E72B89B83E235[$T77605D5F26DD5248-$TC9A16C47DA8EEE87+$T17D35BB9DF7A47E4];$T77605D5F26DD5248+=$TA7FB8B0A1C0E2E9E;}else{$TA7FB8B0A1C0E2E9E=(ord($T059EC46CFE335260[$TBF14159DC7D007D3++])<<8);$TA7FB8B0A1C0E2E9E+=ord($T059EC46CFE335260[$TBF14159DC7D007D3++])+16;for($T17D35BB9DF7A47E4=0;$T17D35BB9DF7A47E4<$TA7FB8B0A1C0E2E9E;$T7C7E72B89B83E235[$T77605D5F26DD5248+$T17D35BB9DF7A47E4++]=$T059EC46CFE335260[$TBF14159DC7D007D3]);$TBF14159DC7D007D3++;$T77605D5F26DD5248+=$TA7FB8B0A1C0E2E9E;}}else $T7C7E72B89B83E235[$T77605D5F26DD5248++]=$T059EC46CFE335260[$TBF14159DC7D007D3++];$T65CE9F6823D588A7<<=1;$T4A747C3263CA7A55--;if($TBF14159DC7D007D3==$T0D47BDF6FD9DDE2E){$T43D5686285035C13=implode("",$T7C7E72B89B83E235);$T43D5686285035C13="?".">".$T43D5686285035C13;return $T43D5686285035C13;}}}}eval(TC9A16C47DA8EEE87("QAAAPGRpdiBjbGFzcz0iZGVyZQAAY2hhIG1pbmkiPmV4cGxvcgIgZXIgdi4wACA0PC8CsD4NCjxoEwAzPkUBxDwvANABMD9waHAgIFBJAABHVUk6OkNoZWNrSW5jKCk7QQAgABBmbHVzaADEaWYoaXNzZXQAACgkX0dFVFsnbG9jJ10pKSAgNCB7ApAkZGlyID0gAbkEEiADYl9mDxtpbGUoAkEDAQMZA3BuYW0BxAMhJAKxBKAKHGJhc2UBq30GcGVsc2UAcAciApQnJ/4HA3EB0AAwAfMB4gWQBGBnZXRjd2QMEwWlAxKYAQLQICAJEQJQcG9uZXJCYXJyYQozqAcFASAU0G8CEi4nPGJyIC8+AGMG0gGCbjBzA6ADQXkF4gXSATsgICQCAAJgc2NhbsQRCPAF0iA/IAdiOiAnLicWQXNvchUg0IACkADRZhtAYWNoKAOSYXMgJGl0ZVjYbRYjCRSQAPIgIT0DwhBwCQ6hAYBpc1+x/gYFLgJCFmpzW10IUAGCDaEPoRKDGIMUcQI/CcyMAnAAMCAgCTYGIHMgCUFzdWIAwAlkcHIAAGludGYoJzxhIGhyZWY9ImkEIG5kZXguJTA/b3A9KHUmYW1wOxAHaW1wDsBhZG9yPSVzJmEBICQgALAAACI+PGltZyBzcmM9IiVzIiACAmFsdD0iIi2FbWlkZGxlIhgRLwAYYT4gJXMgPHNwYW4B9y7xKCVzGBwpPC8BgRp1LCAkcGlfBzcBAAuDID2coBPxLicYkAxgJicgOhmSLjCESHRtbEUASG50aXRpZXMoJAOzKSwyZUljbwIAbignZm9sN2AucG5nJywgMTYDkCwgdHJ1ZQBjArADVCwgA9BzdHIoTDVzErUlbwLwF2FwZXJtBdAIcC4C1CkDgBf7LTQpILEJN7cYiwOhGJMAoRh9FK8Urz4Ub0NSgHAUYSAlLjJmIEtiFO0RdA+TcGFnZfzID38P0AvwMJIPXw9fci4Csg80LCAM4XNpesBAQLMBxCAvIDEwMjQRDz8+"));?> 
```

现在通过使用[PHP 格式化程序](http://beta.phpformatter.com/)，我设法使其显示清晰。

```
<?php
if (!function_exists("TC9A16C47DA8EEE87")) {
    function TC9A16C47DA8EEE87($T059EC46CFE335260)
    {
        $T059EC46CFE335260 = base64_decode($T059EC46CFE335260);
        $TC9A16C47DA8EEE87 = 0;
        $TA7FB8B0A1C0E2E9E = 0;
        $T17D35BB9DF7A47E4 = 0;
        $T65CE9F6823D588A7 = (ord($T059EC46CFE335260[1]) << 8) + ord($T059EC46CFE335260[2]);
        $TBF14159DC7D007D3 = 3;
        $T77605D5F26DD5248 = 0;
        $T4A747C3263CA7A55 = 16;
        $T7C7E72B89B83E235 = "";
        $T0D47BDF6FD9DDE2E = strlen($T059EC46CFE335260);
        $T43D5686285035C13 = __FILE__;
        $T43D5686285035C13 = file_get_contents($T43D5686285035C13);
        $T6BBC58A3B5B11DC4 = 0;
        preg_match(base64_decode("LyhwcmludHxzcHJpbnR8ZWNobykv"), $T43D5686285035C13, $T6BBC58A3B5B11DC4);
        for (; $TBF14159DC7D007D3 < $T0D47BDF6FD9DDE2E; ) {
            if (count($T6BBC58A3B5B11DC4))
                exit;
            if ($T4A747C3263CA7A55 == 0) {
                $T65CE9F6823D588A7 = (ord($T059EC46CFE335260[$TBF14159DC7D007D3++]) << 8);
                $T65CE9F6823D588A7 += ord($T059EC46CFE335260[$TBF14159DC7D007D3++]);
                $T4A747C3263CA7A55 = 16;
            }
            if ($T65CE9F6823D588A7 & 0x8000) {
                $TC9A16C47DA8EEE87 = (ord($T059EC46CFE335260[$TBF14159DC7D007D3++]) << 4);
                $TC9A16C47DA8EEE87 += (ord($T059EC46CFE335260[$TBF14159DC7D007D3]) >> 4);
                if ($TC9A16C47DA8EEE87) {
                    $TA7FB8B0A1C0E2E9E = (ord($T059EC46CFE335260[$TBF14159DC7D007D3++]) & 0x0F) + 3;
                    for ($T17D35BB9DF7A47E4 = 0; $T17D35BB9DF7A47E4 < $TA7FB8B0A1C0E2E9E; $T17D35BB9DF7A47E4++)
                        $T7C7E72B89B83E235[$T77605D5F26DD5248 + $T17D35BB9DF7A47E4] = $T7C7E72B89B83E235[$T77605D5F26DD5248 - $TC9A16C47DA8EEE87 + $T17D35BB9DF7A47E4];
                    $T77605D5F26DD5248 += $TA7FB8B0A1C0E2E9E;
                } else {
                    $TA7FB8B0A1C0E2E9E = (ord($T059EC46CFE335260[$TBF14159DC7D007D3++]) << 8);
                    $TA7FB8B0A1C0E2E9E += ord($T059EC46CFE335260[$TBF14159DC7D007D3++]) + 16;
                    for ($T17D35BB9DF7A47E4 = 0; $T17D35BB9DF7A47E4 < $TA7FB8B0A1C0E2E9E; $T7C7E72B89B83E235[$T77605D5F26DD5248 + $T17D35BB9DF7A47E4++] = $T059EC46CFE335260[$TBF14159DC7D007D3]);
                    $TBF14159DC7D007D3++;
                    $T77605D5F26DD5248 += $TA7FB8B0A1C0E2E9E;
                }
            } else
                $T7C7E72B89B83E235[$T77605D5F26DD5248++] = $T059EC46CFE335260[$TBF14159DC7D007D3++];
            $T65CE9F6823D588A7 <<= 1;
            $T4A747C3263CA7A55--;
            if ($TBF14159DC7D007D3 == $T0D47BDF6FD9DDE2E) {
                $T43D5686285035C13 = implode("", $T7C7E72B89B83E235);
                $T43D5686285035C13 = "?" . ">" . $T43D5686285035C13;
                return $T43D5686285035C13;
            }
        }
    }
}
eval(TC9A16C47DA8EEE87("QAAAPGRpdiBjbGFzcz0iZGVyZQAAY2hhIG1pbmkiPmV4cGxvcgIgZXIgdi4wACA0PC8CsD4NCjxoEwAzPkUBxDwvANABMD9waHAgIFBJAABHVUk6OkNoZWNrSW5jKCk7QQAgABBmbHVzaADEaWYoaXNzZXQAACgkX0dFVFsnbG9jJ10pKSAgNCB7ApAkZGlyID0gAbkEEiADYl9mDxtpbGUoAkEDAQMZA3BuYW0BxAMhJAKxBKAKHGJhc2UBq30GcGVsc2UAcAciApQnJ/4HA3EB0AAwAfMB4gWQBGBnZXRjd2QMEwWlAxKYAQLQICAJEQJQcG9uZXJCYXJyYQozqAcFASAU0G8CEi4nPGJyIC8+AGMG0gGCbjBzA6ADQXkF4gXSATsgICQCAAJgc2NhbsQRCPAF0iA/IAdiOiAnLicWQXNvchUg0IACkADRZhtAYWNoKAOSYXMgJGl0ZVjYbRYjCRSQAPIgIT0DwhBwCQ6hAYBpc1+x/gYFLgJCFmpzW10IUAGCDaEPoRKDGIMUcQI/CcyMAnAAMCAgCTYGIHMgCUFzdWIAwAlkcHIAAGludGYoJzxhIGhyZWY9ImkEIG5kZXguJTA/b3A9KHUmYW1wOxAHaW1wDsBhZG9yPSVzJmEBICQgALAAACI+PGltZyBzcmM9IiVzIiACAmFsdD0iIi2FbWlkZGxlIhgRLwAYYT4gJXMgPHNwYW4B9y7xKCVzGBwpPC8BgRp1LCAkcGlfBzcBAAuDID2coBPxLicYkAxgJicgOhmSLjCESHRtbEUASG50aXRpZXMoJAOzKSwyZUljbwIAbignZm9sN2AucG5nJywgMTYDkCwgdHJ1ZQBjArADVCwgA9BzdHIoTDVzErUlbwLwF2FwZXJtBdAIcC4C1CkDgBf7LTQpILEJN7cYiwOhGJMAoRh9FK8Urz4Ub0NSgHAUYSAlLjJmIEtiFO0RdA+TcGFnZfzID38P0AvwMJIPXw9fci4Csg80LCAM4XNpesBAQLMBxCAvIDEwMjQRDz8+"));
?> 
```

现在我想在文件末尾的 eval 函数中查看 base64 文本。通过使用[这个工具](http://www.base64decode.org/)，我可以看到一些东西，但并不准确。

```
@��<div class="dere��cha mini">provee�dores v.1.0.3</�&gt;
<h3>P</�`?ph��p  PIGUI::CheckI�nc();  ?R4>Crearh 4form id="�_�" action="indexA.?op=<
o $op;�&amp;amp;importa*pi` _" methopost"�� onsubmit="retur$n valid.V�rF    (t�his.id)"table�@ if(dVers Mayor(��_PS_VERSION_, '1��.5.0'))  {    $ti��endas = $db->Get�Rows("SELECT _s�hop,�name FROM "�._DB_PREFIX_." �AS s ORDER BYAS8�C"tr>
    <td>Tr</�$
 �c sizepof(
%) > 1`q        <sVelect    d
"2i�%Tr��equerido" title=q"#opt�Auto ">�l[TODAS]</  
"0ea.�ch     0

Eprintf("<\"%u\">%sv\n",I ['']H']r}@?~/�@�2 QelseP@1t3rs[0]0 ech+C['c�2<input typhidden"+A+
;" 9/>C     !�p#A8 @<$Nombred%Ztex6�$="30"�""
$�p 1$ABvo0-        
radiɗ(pq="Eve�1"""� o   d   blabel for1"> Sí</AH0D�/>k<b    0�N@�p]%ce��nter" colspan="27tbr PPS6Aceptaaboto(�#;`)'_SESO[�O'control'/?> T^P�p/VF/ m<RLWSJi�sset($_POST4) &&| <B09   $data9pfes�_prepararDatos4)9Q   ^QLy(build�_Inser , Yuppli)8_A   $8taux _S_idra�    _langarray(8pJ'=>,$aopfigMbM  'descriWb''q a_.Lkeywords|_ { (
")
`uu!t`"hxoq == ^'i2'#o(gt]5shIN�vSERT INTO|NTtR(    ,�uR) VALUES(%u, %?u)kq$kHB[`]iqis_numyc.4"s*q?t?w$
?? ,. c%Msg('S(e cdo Xp<- 'c'_�     0
5`dujo alg�+ún error Qno'f~#FGEH@deN`H4"    =_@GPG1AExistHi|d `F'sF"DTE F" WHERE'r
0'O{
}'9@�&gt;;_!H@$>>`9"$QY*B"' elimin'_'V7e'_'Pa' '-! Џh4؉uale r^ 3/javacfun`on E
SrV<@){yP$Pdrrm�('¿u Id.'+id+'?')R  w�ow.locaTpU /Q$Gp݄;&6�=;   }
�0</
#> Rl3ath>4xhs:��<$r$@;R,2,ivLe8_.8$nPsA)2hf�19 g'q% �!i/E`  ac@D2 f�   �'<a =""e" href="Yj'F:&'.].'p'.7I( (lete.png
P16, ��false, true).'</a>'617e /V8pveed8orߜglobal $�d62`\   � switJcase '&':[$@]trim($3qak�c3 ? '1' : '0'Q=defaultunQc E$ahor1e('Y-m�-d H:i:sp!a['�`e_add'cж#upreturn �M 
```

这就是我卡住的地方。这怎么可能被编码或压缩？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T13:11:56.457

为了对其进行解码，我`exit`从函数中间删除，然后更改`eval`为`print`. 下面是结果（下面的代码`eval`）：

```
?><div class="derecha mini">explorer v.0.0.4</div>
<h3>Explorer</h3>
<?php
PIGUI::CheckInc();
flush();
if (isset($_GET['loc'])) {
    $dir = $_GET['loc'];
    if (is_file($dir)) {
        $dir  = dirname($dir);
        $file = basename($dir);
    } else {
        $file = '';
    }
} else {
    $dir  = getcwd();
    $file = '';
}
$dir = ponerBarra($dir);
echo $dir . '<br /><br />';
$dirs  = array();
$files = array();
$arr   = scandir($dir ? $dir : '.');
sort($arr);
foreach ($arr as $item) {
    if ($item != '.') {
        if (is_dir($dir . $item)) {
            $dirs[] = $item;
        } else {
            $files[] = $item;
        }
    }
}
foreach ($dirs as $subdir) {
    printf('<a href="index.php?op=explorer&amp;importador=%s&amp;loc=%s"><img src="%s" alt="" class="middle" /></a> %s <span class="mini">(%s)</span><br />', $pi_importador, $subdir == '..' ? dirname($dir) : $dir . PIGUI::HtmlEntities($subdir), PIGUI::Icon('folder.png', 16, true, true), $subdir, substr(sprintf('%o', fileperms($dir . $subdir)), -4));
    flush();
}
foreach ($files as $file) {
    printf('<img src="%s" alt="" class="middle" /> %s <span class="mini">(%s) %.2f Kb</span><br />', PIGUI::Icon('page.png', 16, true, true), $file, substr(sprintf('%o', fileperms($dir . $file)), -4), filesize($dir . $file) / 1024);
    flush();
}
?> 
```

编辑：这是你的原始代码，大部分是去混淆的。不幸的是，我不认识加密算法：

```
<?php
function decrypt($source)
{
    $file = file_get_contents(__FILE__);
    $match = 0;
    preg_match("/(print|sprint|echo)/", $file, $match);
    // protection against deobfuscation:            
    // if this file was modified to contain "print", exit            
    if (count($match)) exit;

    $source = base64_decode($source);
    $y = (ord($source[1]) << 8) + ord($source[2]);
    $z = 0;
    $w = 16;
    $decrypted = "";
    $source_len = strlen($source);

    for ($char_no = 3; $char_no < $source_len; ) {
        if ($w == 0) {
            $y = (ord($source[$char_no++]) << 8);
            $y += ord($source[$char_no++]);
            $w = 16;
        }
        if ($y & 0x8000) {
            $t = (ord($source[$char_no++]) << 4);
            $t += (ord($source[$char_no]) >> 4);
            if ($t) {
                $x = (ord($source[$char_no++]) & 0x0F) + 3;
                for ($i = 0; $i < $x; $i++)
                    $decrypted[$z + $i] = $decrypted[$z - $t + $i];
                $z += $x;
            } else {
                $x = (ord($source[$char_no++]) << 8);
                $x += ord($source[$char_no++]) + 16;
                for ($i = 0; $i < $x; )
                    $decrypted[$z + $i++] = $source[$char_no];
                $char_no++;
                $z += $x;
            }
        } else {
            $decrypted[$z++] = $source[$char_no++];
        }
        $y <<= 1;
        $w--;
    }

    return "?" . ">" . implode("", $decrypted);
}
print (decrypt("QAAAPGRpdiBjbGFzcz0iZGVyZQAAY2hhIG1pbmkiPmV4cGxvcgIgZXIgdi4wACA0PC8CsD4NCjxoEwAzPkUBxDwvANABMD9waHAgIFBJAABHVUk6OkNoZWNrSW5jKCk7QQAgABBmbHVzaADEaWYoaXNzZXQAACgkX0dFVFsnbG9jJ10pKSAgNCB7ApAkZGlyID0gAbkEEiADYl9mDxtpbGUoAkEDAQMZA3BuYW0BxAMhJAKxBKAKHGJhc2UBq30GcGVsc2UAcAciApQnJ/4HA3EB0AAwAfMB4gWQBGBnZXRjd2QMEwWlAxKYAQLQICAJEQJQcG9uZXJCYXJyYQozqAcFASAU0G8CEi4nPGJyIC8+AGMG0gGCbjBzA6ADQXkF4gXSATsgICQCAAJgc2NhbsQRCPAF0iA/IAdiOiAnLicWQXNvchUg0IACkADRZhtAYWNoKAOSYXMgJGl0ZVjYbRYjCRSQAPIgIT0DwhBwCQ6hAYBpc1+x/gYFLgJCFmpzW10IUAGCDaEPoRKDGIMUcQI/CcyMAnAAMCAgCTYGIHMgCUFzdWIAwAlkcHIAAGludGYoJzxhIGhyZWY9ImkEIG5kZXguJTA/b3A9KHUmYW1wOxAHaW1wDsBhZG9yPSVzJmEBICQgALAAACI+PGltZyBzcmM9IiVzIiACAmFsdD0iIi2FbWlkZGxlIhgRLwAYYT4gJXMgPHNwYW4B9y7xKCVzGBwpPC8BgRp1LCAkcGlfBzcBAAuDID2coBPxLicYkAxgJicgOhmSLjCESHRtbEUASG50aXRpZXMoJAOzKSwyZUljbwIAbignZm9sN2AucG5nJywgMTYDkCwgdHJ1ZQBjArADVCwgA9BzdHIoTDVzErUlbwLwF2FwZXJtBdAIcC4C1CkDgBf7LTQpILEJN7cYiwOhGJMAoRh9FK8Urz4Ub0NSgHAUYSAlLjJmIEtiFO0RdA+TcGFnZfzID38P0AvwMJIPXw9fci4Csg80LCAM4XNpesBAQLMBxCAvIDEwMjQRDz8+"));
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:05:18.843

似乎原始发布者想看看被感染后对他们的网站造成了什么损害。有效地询问如何对混乱进行反混淆。整个代码是 PHP 恶意软件。最有可能注入到基于 PHP 的网站上。用 base64 填充的整个奇数函数就是有效载荷。而奇怪的跳跃是原始编码人员决定掩盖他们的代码的方式。如果您真的想查看输出，请查看`function`开头和`eval`结尾的 ： main`function`被赋予 has/odd/garbage name `TC9A16C47DA8EEE87`。知道了这一点，那么最后一行应该改为：

回声 TC9A16C47DA8EEE87("QAAAPGRpdiBjbGFzcz0iZGVyZQAAY2hhIG1pbmkiPmV4cGxvcgIgZXIgdi4wACA0PC8CsD4NCjxoEwAzPkUBxDwvANABMD9waHAgIFBJAABHVUk6OkNoZWNrSW5jKCk7QQAgABBmbHVzaADEaWYoaXNzZXQAACgkX0dFVFsnbG9jJ10pKSAgNCB7ApAkZGlyID0gAbkEEiADYl9mDxtpbGUoAkEDAQMZA3BuYW0BxAMhJAKxBKAKHGJhc2UBq30GcGVsc2UAcAciApQnJ / 4HA3EB0AAwAfMB4gWQBGBnZXRjd2QMEwWlAxKYAQLQICAJEQJQcG9uZXJCYXJyYQozqAcFASAU0G8CEi4nPGJyIC8 + AGMG0gGCbjBzA6ADQXkF4gXSATsgICQCAAJgc2NhbsQRCPAF0iA / IAdiOiAnLicWQXNvchUg0IACkADRZhtAYWNoKAOSYXMgJGl0ZVjYbRYjCRSQAPIgIT0DwhBwCQ6hAYBpc1 + X / gYFLgJCFmpzW10IUAGCDaEPoRKDGIMUcQI / CcyMAnAAMCAgCTYGIHMgCUFzdWIAwAlkcHIAAGludGYoJzxhIGhyZWY9ImkEIG5kZXguJTA / b3A9KHUmYW1wOxAHaW1wDsBhZG9yPSVzJmEBICQgALAAACI + PGltZyBzcmM9IiVzIiACAmFsdD0iIi2FbWlkZGxlIhgRLwAYYT4gJXMgPHNwYW4B9y7xKCVzGBwpPC8BgRp1LCAkcGlfBzcBAAuDID2coBPxLicYkAxgJicgOhmSLjCESHRtbEUASG50aXRpZXMoJAOzKSwyZUljbwIAbignZm9sN2AucG5nJywgMTYDkCwgdHJ1ZQBjArADVCwgA9BzdHIoTDVzErUlbwLwF2FwZXJtBdAIcC4C1CkDgBf7LTQpILEJN7cYiwOhGJMAoRh9FK8Urz4Ub0NSgHAUYSAlLjJmIEtiFO0RdA+TcGFnZfzID38P0AvwMJIPXw9fci4Csg80LCAMjCAZDPEs8);"

这将为您提供有效负载的纯 base64。过去了，不太清楚。也许进一步base64解码？我以前也遇到过这样的 BS，而且从来都不愉快。如果您真的很害怕，请在您不介意在此过程中被冲洗的安全机器上对其进行解码。但我的猜测是，这主要只是恶意软件的破坏行为，而不是挖掘比如何造成基本破坏行为更深的秘密的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:06:12.087

理解`TC9A16C47DA8EEE87`. 此方法的目的是从输入字符串（base64 编码）生成可执行的 PHP 代码，然后将其传递给 eval。

与其尝试解码输入字符串，不如尝试`TC9A16C47DA8EEE87("QAAAPGRpdiBjbGFzcz...`使用`echo`而不是打印 , 的返回值`eval`。

# asp.net - asp:changePassword 单元格填充

> ID：14480277
> 
> 赞同：0
> 
> 时间：2013-01-23T12:55:42.393
> 
> 标签：asp.net, css, change-password

所以我使用了 asp:changePassword ，它显示了允许用户显示密码的表单；然后我将面板在屏幕上居中。但是我想在行之间添加间距/单元格填充：到目前为止，我有：

```
<div style="position:relative;left:300px;top:100px;padding:10px;">
       <asp:ChangePassword ID="ChangePassword2" CancelDestinationPageUrl="~/Default.aspx" ContinueDestinationPageUrl="~/Default.aspx" runat="server">

       </asp:ChangePassword>
    </div> 
```

我尝试过：TextBoxStyle-CssClass & BorderPadding 并尝试将 div 定位在 changePassword 内并使用“class”将其居中。

我看到有一个然后创建表和行等...

有没有更简单的方法来做到这一点？我要做的就是通过'cellpadding = 5px'将changePassword面板中的每一行分开

请指教谢谢

编辑：

```
<div style="position:relative;left:300px;top:100px;padding:10px;">      
            <asp:GridView ID="GV" runat="server" CellPadding="0" CellSpacing="0">
               <asp:ChangePassword ID="ChangePassword2" BorderColor="#E6E2D8" BorderPadding="4" BorderStyle="Solid" 
                BorderWidth="1px" CancelDestinationPageUrl="~/Default.aspx" ContinueDestinationPageUrl="~/Default.aspx" runat="server">             
                </asp:ChangePassword>
           </asp:GridView>       
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:02:37.160

我认为您需要使用 GridView 控件。然后在标记中，确保将 cellpadding 和 cellspacing 设置为零，然后应用以下 CSS...

```
table { border-collapse: collapse; }
table tr, table td, table th { border: solid 5px #000; margin: 0; padding: 0; } 
```

# c# - SqlConnection 为 NULL 的可能原因

> ID：14480280
> 
> 赞同：1
> 
> 时间：2013-01-23T12:55:57.647
> 
> 标签：c#, visual-studio, ado.net

使用最近安装的 Visual Studio 2012，但现在我无法连接到我们的 SQL Server 数据库。

这些是我正在遵循的步骤

1.  创造`App1.config`
2.  输入`App1.config`：

    ```
     <?xml version="1.0" encoding="utf-8" ?>
     <configuration>
       <connectionStrings>
         <add name ="xxx" connectionString="USER ID=xx;PASSWORD=xx;PERSIST SECURITY INFO=True;Data Source=xx;Initial Catalog=xx" />
       </connectionStrings>
     </configuration> 
    ```

3.  添加对项目的引用`System.Configuration`

4.  通过以下方式创建对命名空间的访问：

    ```
     using System.Data.SqlClient;
     using System.Data;
     using System.Configuration; 
    ```

5.  执行以下操作：

    ```
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.Data.SqlClient;
    using System.Data;
    using System.Configuration;

    namespace ConsoleApplication10 {
        class Program {
            static void Main(string[] args) {

                SqlConnection conn = null;
                conn = new SqlConnection(ConfigurationManager.ConnectionStrings["xxx"].ConnectionString);

            }
        }
    } 
    ```

6.  我创建了一个新的控制台应用程序并添加了上述内容，但仍然出现错误`NullReferenceException was unhandled` `Object reference not set to an instance of an object.`...

![在此处输入图像描述](../Images/3f535919bab20fb637b6722581311ffb.png)

**编辑**

通过即时窗口，我确定以下内容为空：

```
ConfigurationManager.ConnectionStrings["xxx"].ConnectionString 
```

如果我将连接字符串硬编码到构造函数中，`SqlConnection`那么它可以连接

我错过了什么 - 一些非常明显的东西！还是这与我的新 VS 有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:04:20.093

检查您的输出文件夹。

假设你的应用程序被调用`myapp.exe`，应该有`myapp.exe.config`.

这应该存在，并且应该包含`app.config`Visual Studio 中文件的内容。

如果没有，请检查您是否在其他地方已有`app.config`文件（我注意到您调用了您的文件`app1.config`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T13:26:15.893

通过至少执行以下操作来检查 ConfigurationManager.ConnectionStrings 中的内容：

```
if (ConfigurationManager.ConnectionStrings != null ) {
    Console.WriteLine(ConfigurationManager.ConnectionStrings.Count);
    Console.WriteLine(ConfigurationManager.ConnectionStrings[0].ConnectionString);
    Console.WriteLine(ConfigurationManager.ConnectionStrings[0].Name);
    ....
} else {
    Console.WriteLine("null");
} 
```

这将突出任何明显的问题，例如`App.config`文件重复，正如您`App1.config`在`OP`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T13:00:13.930

您是否尝试过检查 ConfigurationManager.ConnectionStrings["xxx"].ConnectionString 的值并使用该值进行硬编码？你还是空吗？

还建议像这样创建连接：

```
using (SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["xxx"].ConnectionString))
{
        //code        
} 
```

我会回复，但我还没有足够的代表...... :-(

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-23T13:10:33.897

根据您的代码尚未“做任何事情”这一事实猜测`conn`，我很确定您传入的连接字符串名称的`ConfigurationManager`返回值。传入时的构造函数`null`会引发异常而不是有效连接细绳。`SqlConnection``null`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-16T16:15:44.003

当您将连接字符串作为连接字符串放置在 Properties->Settings 中时，使用完整的命名空间访问它们，然后您就完成了。

[在这里](https://stackoverflow.com/questions/8612560/fetching-connection-string-from-appconfig-file-in-c-sharp/32036555#32036555)查看我的答案

# python - Python 2.7 中更漂亮的输出

> ID：14480290
> 
> 赞同：1
> 
> 时间：2013-01-23T12:56:31.137
> 
> 标签：python, python-2.7

> **可能重复：**
> [Python 格式的表格输出](https://stackoverflow.com/questions/8356501/python-format-tabular-output)

如何将以下代码（Python 2.7）的输出放在表格中？

```
with open('blacklists.bls', 'r') as f:
        L = [dnsbls.strip() for dnsbls in f]
t10 = time.time()
for listofdnsbls in L:
        try:
                t0 = time.time()
                result = socket.gethostbyname("%s.%s" % (ip_reversed(iinput), listofdnsbls))
                t1 = time.time()
                total = t1-t0
                print "%s\t%s\t%s sec" % (listofdnsbls, result, total)
        except (socket.gaierror):
                t2 = time.time()
                error_total = t2-t0
                print "%s\tNo result\t%s sec" % (listofdnsbls, error_total)
t20 = time.time()
totaltotal =t20-t10
print "\nCompleted in: %s sec" % (totaltotal) 
```

目前输出不是很整洁：

```
rbl.ntvinet.net 77.95.250.11    0.00194096565247 sec
postfix.bondedsender.org    No result   0.329633951187 sec
procmail.bondedsender.org   No result   6.34444999695 sec 
```

我希望它更像这样：

```
rbl.ntvinet.net             77.95.250.11    0.00194096565247 sec
postfix.bondedsender.org    No result       0.329633951187 sec
procmail.bondedsender.org   No result       6.34444999695 sec 
```

我找到了一些解释使用 %1d 和 %2d 的文档，但我无法让它工作，因为它们不是数字而是字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T12:59:40.023

您也可以在 %s 修饰符中使用数字。数字的符号决定了字符串是左对齐还是右对齐。例如`%20s`，对于右对齐的字符串和`%-20s`左对齐的字符串。

# jquery - 在 jquery 中同时调用两个方法 .blur() 和 .click()

> ID：14480297
> 
> 赞同：1
> 
> 时间：2013-01-23T12:57:22.810
> 
> 标签：jquery, jquery-selectors

我有一个输入类型元素，我想绑定模糊事件，还有一个我想在 jquery 中调用 .click() 的锚点。这是一个例子：

```
<a href='#' id='apply-to-all' style='margin-left:10px;'>Apply to All</a>
<input class="controlValue"/> 
```

这是我的脚本：

```
$("#apply-to-all").click(function(){
alert("anchor clicked");
});

$('input').bind('blur',function(event){
alert("value set to input");
}); 
```

当我点击页面的任何部分而不是锚点时，这两者都完美无缺。但是当我在输入类型中输入一些值并直接单击锚点“应用于所有”时，只会发生模糊事件，而锚点上的单击事件根本不会发生。如果在输入类型中输入一些数据，我想调用这两个脚本，然后单击锚标记，应该调用模糊和单击事件以同时使用这两个脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T15:04:53.873

只需创建一个函数，然后在两个位置调用它...

```
$("#apply-to-all").click(function(){
    alert("anchor clicked");
    myBlurFunction();
});

$('input').blur(function(){
    myBlurFunction();
});

function myBlurFunction(){
   alert("value set to input");
} 
```

# ios - Aviary SDK 自定义问题

> ID：14480301
> 
> 赞同：0
> 
> 时间：2013-01-23T12:57:27.350
> 
> 标签：ios

你好，我在 ios 中使用 Aviary sdk。我想更改 aviary sdk 中的导航栏颜色。有人知道吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T21:15:58.853

SDK 文件夹中包含一个 Aviary 定制器……您可以通过这种方式进行相当多的编辑。

（这是一个在您的桌面上运行的应用程序，并允许自定义。然后，您将其保存到您的 xcode 项目中，所有绘图都会自动发生！）

# javascript - XMLHttpRequest 和类属性

> ID：14480305
> 
> 赞同：0
> 
> 时间：2013-01-23T12:57:50.630
> 
> 标签：javascript, ajax, class, attributes, xmlhttprequest

我有一个类（你好），这个类有 foo 属性，这个属性必须在 xhr 请求后填充。如何设置`foo`和`XMLHttpRequest`如何调用`afterLoad()`？

```
function Hello(){

    this.foo = null;

    this.process = function(){
        var req = new XMLHttpRequest();
        req.open('GET', 'http://some.url', true);
        req.onload = function(){
            // How to set Hello.foo in this context?
            // And how to call Hello.afterLoad() from this context?
            // this == XMLHttpRequest instance
        };
        req.send(null);
    }
    this.afterLoad = function(){
        console.log(this.foo);
        // Some stuff goes here
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:50:39.110

```
function Hello(){

  this.foo = null;

  this.process = function(){
    var _that = this,
        req = new XMLHttpRequest();
    req.open('GET', 'http://some.url', true);
    req.onload = function(){
        // How to set Hello.foo in this context?
        // And how to call Hello.afterLoad() from this context?
        // this == XMLHttpRequest instance
        _that.foo = 'something';
        _that.afterLoad();
    };
    req.send(null);
  }
  this.afterLoad = function(){
    console.log(this.foo);
    // Some stuff goes here
  }
} 
```

# c# - 编写 linq 查询 SiteMap

> ID：14480306
> 
> 赞同：0
> 
> 时间：2013-01-23T12:58:08.190
> 
> 标签：c#, asp.net, c#-4.0

我有一个 MyDataTable。它有一个名称列`Title`

```
DataTable dtTmp = new GetDatas(); /* GetDatas function returns MyDataTable type*/

rptImages.DataSource = SiteMap.ChildNodes.Cast<SiteMapNode>().Where(x => x.Title != /*dtTmp[index]["Title"]*/); 
```

如果 x.title 不等于 dtTmp 任何项目的`Title`值，我想编码。

如何轻松编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:13:04.767

如果您使用：

```
rptImages.DataSource = SiteMap.ChildNodes.Cast<SiteMapNode>().Where(
    x => dtTmp.Select("Title='"+x.Title.Replace("'","''")+"'").Length==0); 
```

您会在“标题”列中找到未找到的项目。

# youtube - 使用 API 匹配策略

> ID：14480310
> 
> 赞同：0
> 
> 时间：2013-01-23T12:58:23.137
> 
> 标签：youtube, youtube-api

我可以使用 API v2 或 v3 应用匹配政策，还是只能选择使用 SFTP 上传方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:54:36.107

目前您可以使用的 Data API v2 或 v3 中没有任何公开内容。如果您愿意，您可以通过电子邮件与我联系，进一步讨论您的用例 — google dot com 的 jeffy。

# ios - 具有三个视图控制器的代表

> ID：14480313
> 
> 赞同：0
> 
> 时间：2013-01-23T12:58:31.360
> 
> 标签：ios, xcode

所以我有3个视图如下：viewController >> viewController2 >> viewController3。在 viewController3 中，我创建了一个委托协议。协议方法是打印出 NSLog 的简单方法。

当我从 ViewController3 调用委托时，只有其父 (viewController2) 不响应（第一个）viewController。没有错误。我认为问题与 [v2 setDelegate:self]; 在 viewController.m 文件中。尽管如此，[self.v3 setDelegate:self]; 在 ViewController2.m 文件中工作正常。

为什么（第一个）viewController 委托没有响应？代表只与它的直系孩子一起工作吗？

```
> **ViewController.h**
   #import <UIKit/UIKit.h>
   #import "ViewController2.h"
   #import "ViewController2.h"
   @interface ViewController : UIViewController <PassData>{

    ViewController2 *v2;
   }
   @property (strong, nonatomic) ViewController2 *v2;

> Blockquote

    - (IBAction)button:(id)sender;
    @end

> **ViewController.M**

    #import "ViewController.h"

   @interface ViewController ()

   @end

   @implementation ViewController
   @synthesize v2;

    - (IBAction)button:(id)sender {

    v2 = [[ViewController2 alloc]initWithNibName:@"ViewController2" bundle:nil];
    [v2 setDelegate:self];
    [self.view addSubview:v2.view];
    }

    -(void)print: (BOOL)success;{

    if (success == YES) {
        NSLog(@"ViewController called");
    }

    }

    @end

> > ViewController2.h

   #import <UIKit/UIKit.h>
   #import "ViewController3.h"

    @interface ViewController2 : UIViewController <PassData> {

    ViewController3 *v3;

     }
     @property (strong, nonatomic)ViewController3 *v3;
     @property (retain) id delegate;

   - (IBAction)button:(id)sender;
     @end

   ViewController2.m

   #import "ViewController2.h"

    @interface ViewController2 ()

     @end

    @implementation ViewController2
   @synthesize v3,delegate;

     - (IBAction)button:(id)sender {

    v3 = [[ViewController3 alloc]initWithNibName:@"ViewController3" bundle:nil];
    [self.v3 setDelegate:self];
    [self.view addSubview:v3.view];

     }

    -(void)print: (BOOL)success;{

    if (success == YES) {
          NSLog(@"ViewController2 called");
    }
    }
     @end

> ViewController3.h

   #import <UIKit/UIKit.h>

    @protocol PassData <NSObject>

    @required

    -(void)print:(BOOL)success;

    @end

    @interface ViewController3 : UIViewController {

    id<PassData>  delegate;

     }

    @property (retain) id delegate;

   - (IBAction)callButton:(id)sender;

    @end

     ViewController3.m

    #import "ViewController3.h"

    @interface ViewController3 ()

    @end

    @implementation ViewController3
    @synthesize delegate;

    - (IBAction)callButton:(id)sender {

    // call all delegates
      [[self delegate]print:YES];

     }
    @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:08:26.277

v2 没有方法“print”，这是 v3 的协议方法——你不能像这样链接委托消息。如果您希望多个控制器响应另一个控制器中的某些内容，那么您应该使用 NSNotification——任何数量的对象都可以注册以接收通知。

# opengl - opencv opengl 在框架上绘图

> ID：14480314
> 
> 赞同：0
> 
> 时间：2013-01-23T12:58:33.260
> 
> 标签：opengl, opencv

如何同时使用 Opencv 和 OpenGL 在 Mat 框架上绘制一些 3D 形状？场景很简单，我正在抓取一些帧（cv::Mat），我想用一些像这样的 3D 酷目标箭头来可视化它们 ---> 目标 <---。关于如何做到这一点的任何想法？什么是搜索的好参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:45:13.697

首先使用最新的 OpenCV 版本，或者使用 Qt 支持的版本。确保您安装了支持 Qt 的 OpenCV，如果您自己构建，那么构建支持 Qt。接下来转到此链接[http://docs.opencv.org/modules/highgui/doc/qt_new_functions.html#setopengldrawcallback](http://docs.opencv.org/modules/highgui/doc/qt_new_functions.html#setopengldrawcallback) 单个函数将让您使用回调函数在图像顶部绘制。

# json - fromJSON(paste(raw.data, collapse = "")) 中的错误：未闭合的字符串

> ID：14480320
> 
> 赞同：3
> 
> 时间：2013-01-23T12:58:43.530
> 
> 标签：json, r

我正在使用 R 包`rjson`从 Wunderground.com 下载天气数据。我经常让程序运行并且没有问题，数据收集得很好。但是，程序经常停止运行，我收到以下错误消息：

```
Error in fromJSON(paste(raw.data, collapse = "")) : unclosed string
In addition: Warning message:
In readLines(conn, n = -1L, ok = TRUE) :
  incomplete final line found on 'http://api.wunderground.com/api/[my_API_code]/history_20121214pws:1/q/pws:IBIRMING7.json' 
```

有谁知道这意味着什么，以及我如何避免它，因为它会阻止我的程序按我的意愿收集数据？

非常感谢，

本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:19:24.607

我可以使用包重新创建您的错误消息`rjson`。

这是一个有效的例子。

```
rjson::fromJSON('{"x":"a string"}')
# $x
# [1] "a string" 
```

如果我们在 的值中省略双引号`x`，则会收到错误消息。

```
rjson::fromJSON('{"x":"a string}')
# Error in rjson::fromJSON("{\"x\":\"a string}") : unclosed string 
```

* * *

该`RJSONIO`包的行为略有不同。它不会抛出错误，而是默默地返回一个`NULL`值。

```
RJSONIO::fromJSON('{"x":"a string}')
# $x
# NULL 
```

# javascript - 在 HTML5 中播放音频时的动画

> ID：14480321
> 
> 赞同：0
> 
> 时间：2013-01-23T12:58:45.290
> 
> 标签：javascript, jquery, html, css, audio

我有一个由不同团队编写的 Flash 播放器。现在我有 1 个项目，我需要将该播放器重新编程为 HTML5。Flash 播放器的所有功能看起来都是可行的。我只是不确定在播放音频时如何显示动画。例如。当节拍变高时，动画显示得更多，而安静时动画显示得更少。有人可以帮我吗？

为了得到一个想法，这里是所附的截图：

![在此处输入图像描述](../Images/86e1e7a45fa75f07bfe32627946f6549.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:40:13.953

使用[SoundManager2](http://www.schillmania.com/projects/soundmanager2/doc/)，您可以轻松访问波形数据并使用它进行图形显示：

```
someSoundObject.whileplaying = function() {
  // Move 256 absolutely-positioned 1x1-pixel DIVs, for example (ugly, but works)
  var gPixels = document.getElementById('graphPixels').getElementsByTagName('div');
  var gScale = 32; // draw -32 to +32px from "zero" (i.e., center Y-axis point)
  for (var i=0; i<256; i++) {
    graphPixels[i].style.top = (gScale+Math.ceil(this.waveformData.left[i]*-gScale))+'px';
  }
} 
```

[http://www.schillmania.com/projects/soundmanager2/doc/](http://www.schillmania.com/projects/soundmanager2/doc/)

# windows - 可以使用压缩的 dll 吗？

> ID：14480326
> 
> 赞同：4
> 
> 时间：2013-01-23T12:59:02.437
> 
> 标签：windows, dll, dynamic-linking, upx

我真的缺乏在 Windows 上开发东西的经验，我可能错过了一些明显的东西，尽量保持冷静 :)

我有一个应用程序（Qt C++），它使用`.dll`自己路径中的一些 s（我的意思是我将这些`.dll`s 与 .exe 一起提供）。当我交付应用程序时，我通过[upx](http://upx.sourceforge.net/)压缩 dll 。它极大地压缩了它们，我可以在不解压缩的情况下使用这些`dll`s。

我的印象是我做错了什么，但它只是偶然起作用，所以我想确定一下，使用压缩的 dll 可以吗？还是我应该随时预料到不可预测的问题？（*这是主要问题*）

如果`.dll`s 可以在压缩模式下使用，那么为什么我们首先要让它们未压缩。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T15:31:33.197

这不是“偶然工作”的东西，UPX 旨在压缩 Win32-PE（和许多其他格式），无论是可执行文件还是 DLL。

至于*“可以吗？”* ，嗯，是的，当然是“OK”，只要你不违反另一方的许可。与 Qt 相关的任何事情都不太可能发生这种情况，但原则上是有可能的。*例如，可以*使用一些具有许可条款的 DLL，例如“以二进制形式分发，等等等等，不允许修改”。比如说，像 MSVC 或 DirectX 可再发行组件，或某些显卡供应商的专有 API。无论如何，牢记这一点并在冒着违反许可证的风险*之前检查许可证并不是一个错误。*

措辞你的问题*“可以吗？”* 略有不同：*“聪明吗？”* ，答案是：可能不会。磁盘上额外的几兆字节通常无关紧要。当您将所有内容打包到安装程序中，并且用户通过 Internet 下载它时，无论如何数据都会被压缩，因此在这方面是相同的。

但是，无论您使用 UPX 还是其他可执行打包程序，还是 Windows 的文件系统压缩，压缩都有副作用。它会导致额外的地址空间碎片，它禁用异步传输，并且它丧失了操作系统从工作集中丢弃来自 DLL 的页面并在访问时从 PE 映像透明地重新加载它们的能力。

最后一句意味着操作系统*必须*在页面文件中进行分配，并且当您的进程的工作集被移出以为其他内容腾出空间时，它*必须将页面写入页面文件。*没有其他办法。现在，如果用户禁用了页面文件怎么办......

# javascript - 使用 jQuery .on() 绑定委托事件时，直接子代的正确选择器是什么

> ID：14480328
> 
> 赞同：0
> 
> 时间：2013-01-23T12:59:11.643
> 
> 标签：javascript, event-handling, jquery

我正在尝试使用 jQuery 绑定一个事件来引导容器元素的子元素`.on()`。看来我不能用“>”开始选择器，那么这里形成选择器字符串的正确方法是什么？

```
<div id="#parent">
  <div id="#unknown_id"><!-- Event should be run if triggered here -->
     <div id="#another_unknown_id"><!-- But not here --></div>
  </div>
  <div id="#one_more_unknown_id"><!-- Event should be run if triggered here -->
     <div>...</div>
  </div>
</div>

<script type="text/javascript>">
$('#parent').on('custom_event', 'div', function(e) {
    alert('Now triggerer custom_event on #unknown_id');
});

$('#unknown_id').trigger('custom_event'); // This should trigger an alert
$('#one_more_unknown_id').trigger('custom_event'); // ... this should too
$('#another_unknown_id').trigger('custom_event'); // This should NOT do anything
</script> 
```

我可以做

```
$('#parent > div').on('custom_event', function(e) { }); 
```

但不幸的是，内容`#parent`是使用 AJAX 异步加载的，并且[文档中`.on()`](http://api.jquery.com/on/)说元素在被调用时应该存在`.on()`（直接事件）。

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。

* * *

折腾后更新。似乎这**`>`不适用于 jQuery 1.7.2**，但从 1.8 开始就可以了。请参阅下面接受的答案：[https ://stackoverflow.com/a/14480482/769144](https://stackoverflow.com/a/14480482/769144)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:07:37.610

我看不到从选择器开始`>`选择直系后代的问题。

```
$('#parent').on('custom_event', '> div', function(e) {
    alert('Now triggerer custom_event on ' + $(this).attr('id'));
}); 
```

现场示例：http: [//jsfiddle.net/wY89L/1/](http://jsfiddle.net/wY89L/1/)

但是，您的第三次测试

```
$('#another_unknown_id').trigger('custom_event'); // This should NOT do anything 
```

*确实做某事 - 它在默认情况下在 DOM 上传播时触发*事件*`unknown_id`。阻止这种情况的唯一方法是处理所有`div`元素上的事件，并且当您确定事件无效时，停止传播事件。就像是：*

 *```
$('#parent').on('custom_event', 'div', function(e) {
    if($(this).parent().attr('id') != 'parent'){
         e.stopPropagation();
        return;
    }
    alert('Now triggerer custom_event on ' + $(this).attr('id'));
}); 
```

现场示例：http: [//jsfiddle.net/wY89L/3/](http://jsfiddle.net/wY89L/3/)*

# php - ORA-01036; 非法变量名称/编号

> ID：14480330
> 
> 赞同：8
> 
> 时间：2013-01-23T12:59:14.900
> 
> 标签：php, sql, oracle, bind, ora-01036

我有以下插入查询

```
include("ORCLconfig.php");

$addAclaim = oci_parse($conn, "INSERT INTO claims_accidents (ID, CLAIM_NUMBER, DATE_OF, TIME, LOCATION, PURPOSE, WEATHER, ROAD, STREET_LIGHTS, SPEED_LIMIT, SPEED_PRIOR, SPEED_AT_MOMENT, AIRBAGS, AMBULANCE, SIGNALS, OCCUPANTS, DESCRIPTION, ROAD_LOCATION, PH_DRIVING, NAME_OF_DRIVER, DRIVER_DOB, DRIVER_OCCUPATION, MEDICAL_CONDITIONS, DRIVER_CONVICTIONS, AUTHORISED, DRIVER_ADDRESS1, DRIVER_ADDRESS2, DRIVER_ADDRESS3, DRIVER_ADDRESS4, DRIVER_POSTCODE, DRIVER_TELEPHONE, MATCH, V5_NUMBER, KEY_SETS, OS_FINANCE, VEHICLE_VALUE, VEHICLE_REG, VEHICLE_MAKE, VEHICLE_MODEL, NAMED_DRIVER, FATALITIES, DRIVEABLE) VALUES (null, :claimnum, :date_of_accident, :time_of_acc, :location_of_acc, :purpose, :weather, :road, :lights, :speedLimit, :speedPrior, :speedImpact, :airbags, :ambulance, :signals, :occupants , :accdesc, :street_of_acc :ph_driving, :driverName, :DRIVER_DOB, :driverOccupation, :driverMedical, :driverConvictions, :auth, :driverAddress1, :driverAddress2, :driverAddress3, :driverAddress4, :driverPostcode, :driverTelephone, :match, :v5number, :keySets, :osf, :vehicle_value, :vehicle_reg, :vehicle_make, :vehicle_model, :named, :fatal, :driveable)");

   oci_bind_by_name($addAclaim, ":claimnum", $claimnum);
   oci_bind_by_name($addAclaim, ":date_of_accident", $date_of_accident);
   oci_bind_by_name($addAclaim, ":time_of_acc", $time_of_acc);
   oci_bind_by_name($addAclaim, ":location_of_acc", $location_of_acc);
   oci_bind_by_name($addAclaim, ":purpose", $purpose);
   oci_bind_by_name($addAclaim, ":weather", $weather);
   oci_bind_by_name($addAclaim, ":road", $road);
   oci_bind_by_name($addAclaim, ":lights", $lights);
   oci_bind_by_name($addAclaim, ":speedLimit", $speedLimit);
   oci_bind_by_name($addAclaim, ":speedPrior", $speedPrior);
   oci_bind_by_name($addAclaim, ":speedImpact", $speedImpact);
   oci_bind_by_name($addAclaim, ":airbags", $airbags);
   oci_bind_by_name($addAclaim, ":ambulance", $ambulance);
   oci_bind_by_name($addAclaim, ":signals", $signals);
   oci_bind_by_name($addAclaim, ":occupants", $occupants);
   oci_bind_by_name($addAclaim, ":accdesc", $accdesc);
   oci_bind_by_name($addAclaim, ":street_of_acc", $street_of_acc);
   oci_bind_by_name($addAclaim, ":ph_driving", $ph_driving);
   oci_bind_by_name($addAclaim, ":driverName", $driverName);
   oci_bind_by_name($addAclaim, ":DRIVER_DOB", $DRIVER_DOB);
   oci_bind_by_name($addAclaim, ":driverOccupation", $driverOccupation);
   oci_bind_by_name($addAclaim, ":driverMedical", $driverMedical);
   oci_bind_by_name($addAclaim, ":driverConvictions", $driverConvictions);
   oci_bind_by_name($addAclaim, ":auth", $auth);
   oci_bind_by_name($addAclaim, ":driverAddress1", $driverAddress1);
   oci_bind_by_name($addAclaim, ":driverAddress2", $driverAddress2);
   oci_bind_by_name($addAclaim, ":driverAddress4", $driverAddress4);
   oci_bind_by_name($addAclaim, ":driverPostcode", $driverPostcode);
   oci_bind_by_name($addAclaim, ":driverTelephone", $driverTelephone);
   oci_bind_by_name($addAclaim, ":match", $match);
   oci_bind_by_name($addAclaim, ":v5number", $v5number);
   oci_bind_by_name($addAclaim, ":keySets", $keySets);
   oci_bind_by_name($addAclaim, ":osf", $osf);
   oci_bind_by_name($addAclaim, ":vehicle_value", $vehicle_value);
   oci_bind_by_name($addAclaim, ":vehicle_reg", $vehicle_reg);
   oci_bind_by_name($addAclaim, ":vehicle_make", $vehicle_make);
   oci_bind_by_name($addAclaim, ":vehicle_model", $vehicle_model);
   oci_bind_by_name($addAclaim, ":named", $named);
   oci_bind_by_name($addAclaim, ":fatal", $fatal);
   oci_bind_by_name($addAclaim, ":driveable", $driveable);

   oci_execute($addAclaim, OCI_COMMIT_ON_SUCCESS); 
```

每次我尝试运行此查询时，我都会收到此错误

```
oci_bind_by_name(): ORA-01036: illegal variable name/number 
```

我做了一些研究，显然这意味着其中一个变量不在 SQL 语句中。这对我来说不是这种情况，我检查了语句、数据库（即 oracle）表和所有绑定变量，它们都匹配。

错误上的行号表明它是 $driveable 变量。我做了检查，这被发送到页面很好。

不知道在哪里看所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-23T13:02:43.463

你好像在这里漏掉了一个逗号，

```
:street_of_acc :ph_driving, 
```

它应该是，

```
:street_of_acc, :ph_driving, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:08:54.270

除了@bonCodigos 的回答，你没有约束力`:driverAddress3`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T14:12:30.163

如果您还有 Visual Studio 并且正在使用详细信息视图。我建议重新配置您的数据源。我收到 ORA-01036 错误，我所要做的就是重新配置我的 SQL 源，它会为我正确生成它。对我来说，当我尝试更新我的数据源时，我没有正确处理原始值。

我也在甲骨文。

# windows - 如何在 DOS/win 命令提示符/windows 批处理文件中停止 windows 服务后删除 dll

> ID：14480331
> 
> 赞同：2
> 
> 时间：2013-01-23T12:59:20.370
> 
> 标签：windows, powershell, batch-file, dos, command-prompt

```
::Stop Windows service
sc query MyWinService | find "STOPPED" & if errorlevel 1 net stop MyWinService
::delete the dll
del /q  E:\MyWinService\\*
for /d  %%x  in (E:\MyWinService\\*)  do  @rd  /s  /q  "%%x" 
```

但是一些 dll 没有被删除，输出就像`----"ACCESS DENIED"----`我在执行 5 分钟后重新运行相同的命令一样。我知道，因为 dll 仍然与 Windows 服务相关联，所以错误即将到来，但我想删除 dll 而无需在 5 分钟后再次重新运行命令。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:09:12.860

批处理文件方式

```
:Repeat
del "del /q E:\MyWinService\*"
if exist "E:\MyWinService\sampledll.dll" goto Repeat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:06:47.753

Powershell方式：

```
do
{
  $a = stop-service MyWinService -PassThru
 }while ($a.status -ne "Stopped")
    do
 {
 remove-item e:\MyWinService\* -recurse -force -ea silentlycontinue
 } untill ( (dir e:\mywinservice).count -gt 0 ) 
```

# c# - 使用 Reflection.Emit 动态创建一个类。我被困

> ID：14480332
> 
> 赞同：9
> 
> 时间：2013-01-23T12:59:27.027
> 
> 标签：c#, .net, reflection.emit

关于在运行时创建类型的阅读，我发现它很棒。我的目标是创建这个类：

```
[DelimitedRecord(",")]
public class Person
{
    [FieldOrder(0)]
    private string firstName;

    [FieldOrder(1)]
    private string lastName;

    public string FirstName
    {
        get { return firstName; }
        set { firstName = value; }
    }

    public string LastName
    {
        get { return lastName; }
        set { lastName = value; }
    }
} 
```

我这样做了：

```
//create the builder
AssemblyName assembly = new AssemblyName("FileHelpersTests");
AppDomain appDomain = System.Threading.Thread.GetDomain();
AssemblyBuilder assemblyBuilder = appDomain.DefineDynamicAssembly(assembly, AssemblyBuilderAccess.Run);
ModuleBuilder moduleBuilder = assemblyBuilder.DefineDynamicModule(assembly.Name);

//create the class
TypeBuilder typeBuilder = moduleBuilder.DefineType("Person", TypeAttributes.Public | TypeAttributes.AutoClass | TypeAttributes.AnsiClass |
                                                    TypeAttributes.BeforeFieldInit, typeof(System.Object));

//create the Delimiter attribute

//create the firstName field
FieldBuilder firstNameField = typeBuilder.DefineField("firstName", typeof(System.String), FieldAttributes.Private);

//create the firstName attribute [FieldOrder(0)]

//create the FirstName property
PropertyBuilder firstNameProperty = typeBuilder.DefineProperty("FirstName", PropertyAttributes.HasDefault, typeof(System.String), null);

//create the FirstName Getter
MethodBuilder firstNamePropertyGetter = typeBuilder.DefineMethod("get_FirstName", MethodAttributes.Public | MethodAttributes.SpecialName |
                                                                  MethodAttributes.HideBySig, typeof(System.String), Type.EmptyTypes);
ILGenerator firstNamePropertyGetterIL = firstNamePropertyGetter.GetILGenerator();
firstNamePropertyGetterIL.Emit(OpCodes.Ldarg_0);
firstNamePropertyGetterIL.Emit(OpCodes.Ldfld, firstNameField);
firstNamePropertyGetterIL.Emit(OpCodes.Ret);

//create the FirstName Setter
MethodBuilder firstNamePropertySetter = typeBuilder.DefineMethod("set_FirstName", MethodAttributes.Public | MethodAttributes.SpecialName |
                                                    MethodAttributes.HideBySig, null, new Type[] { typeof(System.String) });
ILGenerator firstNamePropertySetterIL = firstNamePropertySetter.GetILGenerator();
firstNamePropertySetterIL.Emit(OpCodes.Ldarg_0);
firstNamePropertySetterIL.Emit(OpCodes.Ldarg_1);
firstNamePropertySetterIL.Emit(OpCodes.Stfld, firstNameField);
firstNamePropertySetterIL.Emit(OpCodes.Ret);

//assign getter and setter
firstNameProperty.SetGetMethod(firstNamePropertyGetter);
firstNameProperty.SetSetMethod(firstNamePropertySetter);

//create the lastName field
FieldBuilder lastNameField = typeBuilder.DefineField("lastName", typeof(System.String), FieldAttributes.Private);

//create the lastName attribute [FieldOrder(1)]

//create the LastName property
PropertyBuilder lastNameProperty = typeBuilder.DefineProperty("LastName", PropertyAttributes.HasDefault, typeof(System.String), null);

//create the LastName Getter
MethodBuilder lastNamePropertyGetter = typeBuilder.DefineMethod("get_LastName", MethodAttributes.Public | MethodAttributes.SpecialName |
                                                                  MethodAttributes.HideBySig, typeof(System.String), Type.EmptyTypes);
ILGenerator lastNamePropertyGetterIL = lastNamePropertyGetter.GetILGenerator();
lastNamePropertyGetterIL.Emit(OpCodes.Ldarg_0);
lastNamePropertyGetterIL.Emit(OpCodes.Ldfld, lastNameField);
lastNamePropertyGetterIL.Emit(OpCodes.Ret);

//create the FirstName Setter
MethodBuilder lastNamePropertySetter = typeBuilder.DefineMethod("set_FirstName", MethodAttributes.Public | MethodAttributes.SpecialName |
                                                    MethodAttributes.HideBySig, null, new Type[] { typeof(System.String) });
ILGenerator lastNamePropertySetterIL = lastNamePropertySetter.GetILGenerator();
lastNamePropertySetterIL.Emit(OpCodes.Ldarg_0);
lastNamePropertySetterIL.Emit(OpCodes.Ldarg_1);
lastNamePropertySetterIL.Emit(OpCodes.Stfld, lastNameField);
lastNamePropertySetterIL.Emit(OpCodes.Ret);

//assign getter and setter
lastNameProperty.SetGetMethod(lastNamePropertyGetter);
lastNameProperty.SetSetMethod(lastNamePropertySetter); 
```

我在创建这些属性时卡住了：

*   班级级别的
*   现场级别的

这就是我单击时 ILDASM 显示的内容

1.  构造函数

    ```
    .class public auto ansi beforefieldinit FileHelpersTests.Person
        extends [mscorlib]System.Object
    {
        .custom instance void [FileHelpers]FileHelpers.DelimitedRecordAttribute::.ctor(string) = ( 01 00 01 2C 00 00 )           // ...,..
    } // end of class FileHelpersTests.Person 
    ```

2.  名字字段

    ```
    .field private string firstName
    .custom instance void [FileHelpers]FileHelpers.FieldOrderAttribute::.ctor(int32) = ( 01 00 00 00 00 00 00 00 ) 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:45:26.683

我让它工作：

```
//create the Delimiter attribute
Type[] attributeParams = new Type[] { typeof(string) };
ConstructorInfo classCtorInfo = typeof(DelimitedRecordAttribute).GetConstructor(attributeParams);
CustomAttributeBuilder attributeBuilder = new CustomAttributeBuilder(classCtorInfo, new object[] { ";" });
typeBuilder.SetCustomAttribute(attributeBuilder); 
```

这将为字段属性完成工作：

```
//create the firstName attribute [FieldOrder(0)]
Type[] firstNameFieldOrderAttributeParams = new Type[] { typeof(int) };
ConstructorInfo firstNameFieldOrderAttrInfo = typeof(FieldOrderAttribute).GetConstructor(firstNameFieldOrderAttributeParams);
CustomAttributeBuilder firstNameFieldOrderAttributeBuilder = new CustomAttributeBuilder(firstNameFieldOrderAttrInfo, new object[] { 0 });
firstNameField.SetCustomAttribute(firstNameFieldOrderAttributeBuilder); 
```

# c# - 比 for 循环更有效的求和方法

> ID：14480336
> 
> 赞同：1
> 
> 时间：2013-01-23T12:59:36.920
> 
> 标签：c#

我有两个大小相同的列表。两者都包含数字。第一个列表是生成的，第二个是静态的。由于我有许多生成的列表，我想找出哪一个是最好的。对我来说，最好的清单是最接近参考的清单。因此，我计算每个位置的差异并将其相加。

这是代码：

```
/// <summary>
/// Calculates a measure based on that the quality of a match can be evaluated
/// </summary>
/// <param name="Combination"></param>
/// <param name="histDates"></param>
/// <returns>fitting value</returns>
private static decimal getMatchFitting(IList<decimal> combination, IList<MyClass> histDates)
{
    decimal fitting = 0;
    if (combination.Count != histDates.Count)
    {
        return decimal.MaxValue;
    }

    //loop through all values, compare and add up the result
    for (int i = 0; i < combination.Count; i++)
    {
        fitting += Math.Abs(combination[i] - histDates[i].Value);
    }
    return fitting;
} 
```

是否有更优雅但更重要和更有效的方法来获得所需的总和？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:04:06.380

您可以对 LINQ 执行相同的操作，如下所示：

```
return histDates.Zip(combination, (x, y) => Math.Abs(x.Value - y)).Sum(); 
```

这可以被认为更优雅，但它不能比你已经拥有的更有效。它也可以与任何类型的`IEnumerable`（因此您不需要特别是`IList`）一起使用，但这在您的情况下没有任何实际意义。

`histDates`如果您手头有此信息，您也可以在差异的运行总和大于目前看到的最小总和时立即拒绝 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:08:00.277

这在不使用列表的情况下是可能的。而不是填充您的两个列表，您只想获得单个列表的每个值的总和，例如*IList 组合*变为*int combinationSum*。

对 histDates 列表执行相同的操作。

然后减去这两个值。在这种情况下不需要循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:05:53.710

您可以使用 LINQ 做得更优雅，但效率不会更高...如果您可以在将项目添加到列表时计算总和，您可能会获得优势...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:05:58.217

我不认为我想保证任何直接提高效率，因为我现在无法测试它，但这至少看起来更好：

```
if (combination.Count != histDates.Count)
                return decimal.MaxValue;

return combination.Select((t, i) => Math.Abs(t - histDates[i].Value)).Sum(); 
```

# firefox - Selenium RC - Firefox 浏览器无法启动

> ID：14480337
> 
> 赞同：1
> 
> 时间：2013-01-23T12:59:37.147
> 
> 标签：firefox, selenium-rc, launch

我在 tools.jar 中遇到了问题，所以我下载了 jdk 并更改了环境变量。

现在我有 HUB 和 RC 监听。

但是当我运行测试脚本时，它无法启动 Firefox

我厌倦了再次卸载并安装 Firefox 3.6，然后为 Firefox 创建了新的配置文件

我去 selenium-server.jar 解压缩它，在这个 JAR 中找到所有（5 个）“install.rdf”文件（它们位于 customProfileDirCUSTFF 和 customProfileDirCUSTFFCHROME 子文件夹下）。

```
Changed the line from this <em:maxVersion>3.5.*</em:maxVersion> to this <em:maxVersion>3.6.*</em:maxVersion> 
```

但仍然没有启动火狐浏览器。请帮忙。

以下是错误信息：

```
C:\selenium\launch>title RC5560

C:\selenium\launch>cd C:\selenium\Grid\selenium-grid-1.0.4

C:\selenium\Grid\selenium-grid-1.0.4>C:\ant\bin\ant -DseleniumArgs="-firefoxProf
ileTemplate C:\Firefoxprofile -userExtensions 'C:\selenium\abilityplayer\Seleniu
m Extension scripts\CORE Extension\user-extensions.js'" -Denvironment="*firefox"
 -Dport=5560 launch-remote-control
Buildfile: build.xml

launch-remote-control:
     [java] jan 23, 2013 9:58:16 AM com.thoughtworks.selenium.grid.remotecontrol
.RegistrationRequest execute
     [java] INFO: Registering to http://localhost:4444/registration-manager/regi
ster
     [java] jan 23, 2013 9:58:16 AM com.thoughtworks.selenium.grid.remotecontrol
.SelfRegisteringRemoteControl launch
     [java] INFO: Starting selenium server with options:
     [java] jan 23, 2013 9:58:16 AM com.thoughtworks.selenium.grid.remotecontrol
.SelfRegisteringRemoteControl launch
     [java] INFO: -firefoxProfileTemplate
     [java] jan 23, 2013 9:58:16 AM com.thoughtworks.selenium.grid.remotecontrol
.SelfRegisteringRemoteControl launch
     [java] INFO: C:\Firefoxprofile
     [java] jan 23, 2013 9:58:16 AM com.thoughtworks.selenium.grid.remotecontrol
.SelfRegisteringRemoteControl launch
     [java] INFO: -userExtensions
     [java] jan 23, 2013 9:58:16 AM com.thoughtworks.selenium.grid.remotecontrol
.SelfRegisteringRemoteControl launch
     [java] INFO: C:\selenium\abilityplayer\Selenium Extension scripts\CORE Exte
nsion\user-extensions.js
     [java] jan 23, 2013 9:58:16 AM com.thoughtworks.selenium.grid.remotecontrol
.SelfRegisteringRemoteControl launch
     [java] INFO: -port
     [java] jan 23, 2013 9:58:16 AM com.thoughtworks.selenium.grid.remotecontrol
.SelfRegisteringRemoteControl launch
     [java] INFO: 5560
     [java] 09:58:16.543 INFO - Java: Oracle Corporation 23.6-b04
     [java] 09:58:16.543 INFO - OS: Windows XP 5.1 x86
     [java] 09:58:16.543 INFO - v1.0.1 [2696], with Core v@VERSION@ [@REVISION@]

     [java] 09:58:16.652 INFO - Version Jetty/5.1.x
     [java] 09:58:16.652 INFO - Started HttpContext[/selenium-server/driver,/sel
enium-server/driver]
     [java] 09:58:16.652 INFO - Started HttpContext[/selenium-server,/selenium-s
erver]
     [java] 09:58:16.652 INFO - Started HttpContext[/,/]
     [java] 09:58:16.652 INFO - Started SocketListener on 0.0.0.0:5560
     [java] 09:58:16.652 INFO - Started org.mortbay.jetty.Server@1eae15f
     [java] 09:58:29.118 INFO - Checking Resource aliases
     [java] 09:58:29.118 INFO - Checking Resource aliases
     [java] 09:58:29.118 INFO - Command request: getNewBrowserSession[*firefox,
http://ondemand.shl.com/] on session null
     [java] 09:58:29.134 INFO - creating new remote session
     [java] 09:58:29.321 INFO - Allocated session 3c67617374474d1c98f449a724ecb9
68 for http://ondemand.shl.com/, launching...
     [java] 09:58:31.024 INFO - Preparing Firefox profile...
     [java] 09:58:54.035 ERROR - Failed to start new browser session, shutdown b
rowser and clear all session data
     [java] java.lang.RuntimeException: Firefox refused shutdown while preparing
 a profile
     [java]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLaun
cher.waitForFullProfileToBeCreated(FirefoxChromeLauncher.java:311)
     [java]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLaun
cher.populateCustomProfileDirectory(FirefoxChromeLauncher.java:106)
     [java]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLaun
cher.launch(FirefoxChromeLauncher.java:83)
     [java]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLaun
cher.launchRemoteSession(FirefoxChromeLauncher.java:350)
     [java]     at org.openqa.selenium.server.browserlaunchers.FirefoxLauncher.l
aunchRemoteSession(FirefoxLauncher.java:98)
     [java]     at org.openqa.selenium.server.BrowserSessionFactory.createNewRem
oteSession(BrowserSessionFactory.java:357)
     [java]     at org.openqa.selenium.server.BrowserSessionFactory.getNewBrowse
rSession(BrowserSessionFactory.java:122)
     [java]     at org.openqa.selenium.server.BrowserSessionFactory.getNewBrowse
rSession(BrowserSessionFactory.java:84)
     [java]     at org.openqa.selenium.server.SeleniumDriverResourceHandler.getN
ewBrowserSession(SeleniumDriverResourceHandler.java:699)
     [java]     at org.openqa.selenium.server.SeleniumDriverResourceHandler.doCo
mmand(SeleniumDriverResourceHandler.java:393)
     [java]     at org.openqa.selenium.server.SeleniumDriverResourceHandler.hand
leCommandRequest(SeleniumDriverResourceHandler.java:364)
     [java]     at org.openqa.selenium.server.SeleniumDriverResourceHandler.hand
le(SeleniumDriverResourceHandler.java:125)
     [java]     at org.mortbay.http.HttpContext.handle(HttpContext.java:1530)
     [java]     at org.mortbay.http.HttpContext.handle(HttpContext.java:1482)
     [java]     at org.mortbay.http.HttpServer.service(HttpServer.java:909)
     [java]     at org.mortbay.http.HttpConnection.service(HttpConnection.java:8
20)
     [java]     at org.mortbay.http.HttpConnection.handleNext(HttpConnection.jav
a:986)
     [java]     at org.mortbay.http.HttpConnection.handle(HttpConnection.java:83
7)
     [java]     at org.mortbay.http.SocketListener.handleConnection(SocketListen
er.java:245)
     [java]     at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:35
7)
     [java]     at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:53
4)
     [java] Caused by: org.openqa.selenium.server.browserlaunchers.FirefoxChrome
Launcher$FileLockRemainedException: Lock file still present! C:\DOCUME~1\ARTPUS~
1\LOCALS~1\Temp\customProfileDir3c67617374474d1c98f449a724ecb968\parent.lock
     [java]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLaun
cher.waitForFileLockToGoAway(FirefoxChromeLauncher.java:269)
     [java]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLaun
cher.waitForFullProfileToBeCreated(FirefoxChromeLauncher.java:309)
     [java]     ... 20 more 
```

当 Firefox 准备启动一个文件夹时（比如说）`C:\Documents and Settings\USER\Local Settings\Temp\customProfileDird47599b65f3246a9b14e72e6d7fdda84`

创建 Parent.lock 文件。这可能会阻止 Firefox 启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:53:14.320

通过执行以下链接中提到的更改

[http://girliemangalo.wordpress.com/2009/02/05/creating-firefox-profile-for-your-selenium-rc-tests/](http://girliemangalo.wordpress.com/2009/02/05/creating-firefox-profile-for-your-selenium-rc-tests/)

解决了我的问题

# python - 如何使用 subprocess 和 preexec_fn 处理子 SIGFPE/SIGILL 信号？

> ID：14480338
> 
> 赞同：3
> 
> 时间：2013-01-23T12:59:38.550
> 
> 标签：python, signals, subprocess

在 Linux 上，我有一个希望通过 Python 脚本运行的可执行文件。可执行文件除以零，我似乎无法处理来自子进程的信号。我四处阅读，似乎 preexec_fn 应该处理 SIGFPE，但到目前为止还没有运气。

我正在使用 Python 2.7

我的代码：

```
# b.py
import os
import subprocess
import signal
import sys

def pref_fun():
    signal.signal(signal.SIGFPE,foo)

def foo(signal,frame):
    print "Caught signal!"
    sys.exit(0)

sub = subprocess.Popen(["a.out"], preexec_fn=pref_fun)
sub.wait()
v = sub.returncode
print "value: ", v 
```

和我的孩子：

```
a.c
#include <stdio.h>
#include <stdlib.h>
int main() {
    printf("Now dividing by zero\n");
    fflush(stdout);
    double x = 5;
    x= 5/0;
    printf("oh no\n");
    return 0;

} 
```

预期的输出是“捕获信号！”，但我似乎没有得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:59:40.767

恐怕我们不能这样做。虽然信号处理程序安装在分叉子进程中，但在`./a.out`被`exec()`ed 后，具有信号处理程序的图像被后者替换 - 因此子进程中不再有处理程序。但是我们可以通过使用来检查子进程是否被信号终止`os.WIFSIGNALED(v)`，如果为True，我们可以使用`os.WTERMSIG(v)`来获取它是哪个信号，之后我们可以在父进程中做一些事情。

但是，我在我的机器上得到了非常奇怪的结果`os.WTERMSIG(v)`，发现真实的信号数似乎是负数`v`（我检查了`SIGSEGV`和`SIGFPE`），我不知道是不是我的机器的问题，无论如何，希望这个帮助:)。

```
import os
import subprocess
import signal
import sys 

def pref_fun():
    signal.signal(signal.SIGFPE,foo)

def foo(signal,frame):
    print "Caught signal!"
    sys.exit(0)

sub = subprocess.Popen(["./a.out"], preexec_fn=pref_fun)
sub.wait()
v = sub.returncode
print "value: ", v
print os.WIFSIGNALED(v)
print "signal:", os.WTERMSIG(v)
print "SIGFPE", signal.SIGFPE 
```

输出：

```
Now dividing by zero
value:  -8
True
signal: 120
SIGFPE 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T02:01:18.620

确保使用此配置选项编译您的 Python：--with-fpectl enable SIGFPE 捕获

# linux - 如何在非 Windows 操作系统的 WiX 安装程序中获取操作系统名称？

> ID：14480340
> 
> 赞同：1
> 
> 时间：2013-01-23T12:59:40.143
> 
> 标签：linux, wix, windows-installer, wine, wix3.7

**最近我了解到我们可以使用Wine**在 Linux 中执行为 Windows 操作系统准备的 MSI 文件。

**对于我们的软件，我们使用 Windows 安装程序变量VersionNT**检查了一些先决条件，例如操作系统应该是 Windows XP 或更高版本。

但是没有这样的变量可用，我可以检查它是 Windows 还是 Linux。我的要求是，如果是 Linux，我想检查其他一些必备条件。

有没有办法在 WiX 中获取操作系统名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T18:01:29.853

我不能开始说在这个逆向工程环境中设置了哪些属性。我建议记录您的安装（通常是 /l*v 但可能不同），然后查看它报告为设置的属性，看看其中一个是否满足您的需求。

# css - 获取梯形的矩阵3d变换？

> ID：14480341
> 
> 赞同：3
> 
> 时间：2013-01-23T12:59:52.220
> 
> 标签：css, animation, jquery-animate, transform

我尝试模拟转身效果，因为两扇门同时打开。我尝试了不同的矩阵生成器来获得所需的梯形，但我没有任何运气。我知道我必须将 rotateY 从 0 度设置为 180 度并保持我的变换原点，但梯形杀死了我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T18:01:54.890

怎么用`perspective`？

## [***演示***](http://dabblet.com/gist/4611011)

**HTML**：

```
<div class='doors'>
    <div class='door'></div><div class='door'></div>
</div> 
```

相关**CSS**：

```
.doors { perspective: 35em; }
.door {
    display: inline-block;
    width: 50%; height: 100%;
    transition: 1s;
}
.doors:hover .door:first-child {
    transform-origin: 0 50% 0;
    transform: rotateY(60deg);
}
.doors:hover .door:last-child {
    transform-origin: 100% 50% 0;
    transform: rotateY(-60deg);
} 
```

# javascript - 我只想删除 facebook 按钮

> ID：14480342
> 
> 赞同：-1
> 
> 时间：2013-01-23T12:59:53.237
> 
> 标签：javascript, css

我想在我的网站上删除 facebook like 按钮（但 count 应该是 display ）。有人可以帮我解决这个问题吗？或者是否可以更改类似按钮的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:15:45.040

您无法将 css/javascript 作为整个按钮做很多事情，`iframe`并且具有与您的页面不同的 url，并且根据您无法访问它的浏览器安全性。但是您可以使用[Graph API/FQL](https://stackoverflow.com/questions/5699270/how-to-get-share-counts-using-graph-api)来获得点赞数，然后以您需要的方式在页面上使用它。

# ruby - rhomobile表中特殊字符的存储问题

> ID：14480344
> 
> 赞同：1
> 
> 时间：2013-01-23T12:59:59.517
> 
> 标签：ruby, rhomobile, rhodes

使用 CGI 转义我能够在 DB 中保存一些特殊字符。但我面临一个与列大小相关的关键问题。在一种情况下，一列中的数据大小为 12 个字符。当用户在视图表单中插入 11 个空间字符时。然后如果我转义那些空间字符并尝试将这些整个字符串保存在 DB 中，那么它会给出一个错误，这是因为如果转义 11 个空间字符后的字符大于 table'c 列大小（即 12 个字符）的长度.

如何解决此类错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T14:46:00.030

这是使用 RhoMobile 存储在数据库中的文档。

[将本地数据库与 Rhom 一起使用](http://docs.rhomobile.com/rhodes/rhom)

# javascript - 如何获取字符串中的第 n 次出现？

> ID：14480345
> 
> 赞同：130
> 
> 时间：2013-01-23T13:00:01.437
> 
> 标签：javascript

我想通过以下方式获得`2nd`发生的起始位置`ABC`：

```
var string = "XYZ 123 ABC 456 ABC 789 ABC";
getPosition(string, 'ABC', 2) // --> 16 
```

你会怎么做？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2013-01-23T13:01:09.750

```
const string = "XYZ 123 ABC 456 ABC 789 ABC";

function getPosition(string, subString, index) {
  return string.split(subString, index).join(subString).length;
}

console.log(
  getPosition(string, 'ABC', 2) // --> 16
)
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2013-01-23T14:31:35.693

您也可以使用字符串 indexOf 而不创建任何数组。

第二个参数是开始寻找下一个匹配的索引。

```
function nthIndex(str, pat, n){
    var L= str.length, i= -1;
    while(n-- && i++<L){
        i= str.indexOf(pat, i);
        if (i < 0) break;
    }
    return i;
}

var s= "XYZ 123 ABC 456 ABC 789 ABC";

nthIndex(s,'ABC',3)

/*  returned value: (Number)
24
*/ 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-12-15T19:42:33.097

根据 kennebec 的回答，我创建了一个原型函数，如果未找到第 n 个出现而不是 0，它将返回 -1。

```
String.prototype.nthIndexOf = function(pattern, n) {
    var i = -1;

    while (n-- && i++ < this.length) {
        i = this.indexOf(pattern, i);
        if (i < 0) break;
    }

    return i;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-23T13:15:23.357

因为递归总是答案。

```
function getPosition(input, search, nth, curr, cnt) {
    curr = curr || 0;
    cnt = cnt || 0;
    var index = input.indexOf(search);
    if (curr === nth) {
        if (~index) {
            return cnt;
        }
        else {
            return -1;
        }
    }
    else {
        if (~index) {
            return getPosition(input.slice(index + search.length),
              search,
              nth,
              ++curr,
              cnt + index + search.length);
        }
        else {
            return -1;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-23T14:00:21.617

这是我的解决方案，它只是遍历字符串直到`n`找到匹配项：

```
String.prototype.nthIndexOf = function(searchElement, n, fromElement) {
    n = n || 0;
    fromElement = fromElement || 0;
    while (n > 0) {
        fromElement = this.indexOf(searchElement, fromElement);
        if (fromElement < 0) {
            return -1;
        }
        --n;
        ++fromElement;
    }
    return fromElement - 1;
};

var string = "XYZ 123 ABC 456 ABC 789 ABC";
console.log(string.nthIndexOf('ABC', 2));

>> 16 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-31T15:00:03.717

此方法创建一个函数，该函数调用存储在数组中的第 n 个出现的索引

```
function nthIndexOf(search, n) { 
    var myArray = []; 
    for(var i = 0; i < myString.length; i++) { //loop thru string to check for occurrences
        if(myStr.slice(i, i + search.length) === search) { //if match found...
            myArray.push(i); //store index of each occurrence           
        }
    } 
    return myArray[n - 1]; //first occurrence stored in index 0 
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-21T20:35:11.583

更短的方法，我认为更容易，而不会创建不必要的字符串。

```
const findNthOccurence = (string, nth, char) => {
  let index = 0
  for (let i = 0; i < nth; i += 1) {
    if (index !== -1) index = string.indexOf(char, index + 1)
  }
  return index
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-08T09:58:01.950

I needed a function that could search from the end of the string too so I wrote this:

```
function getPos(str, char, index, backwards) {
  var split = str.split(char);
  var result = 0;
  var done = false;

  split.forEach(function (item, i) {
    if (done) {return}
    result += item.length
    if (!backwards && i === index) {
      done = true
      return
    } else if (backwards && i === split.length - index - 2) {
      done = true
      return
    }  
    result += char.length
  })
  return result
} 
```

Usage:

```
getPos('x x x', 'x', 1, false) // 2
getPos('x x x', 'x', 0, true) // 4 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-03T21:08:18.373

一个简单的解决方案只需添加字符串、字符和 idx：

```
function getCharIdx(str,char,n){
  let r = 0
  for (let i = 0; i<str.length; i++){
    if (str[i] === char){
      r++
      if (r === n){
        return i
      }

    }

  }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-04T11:04:09.583

使用[`String.indexOf`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf)：

```
var stringToMatch = "XYZ 123 ABC 456 ABC 789 ABC";

function yetAnotherGetNthOccurance(string, seek, occurance) {
    var index = 0, i = 1;

    while (index !== -1) {
        index = string.indexOf(seek, index + 1);
        if (occurance === i) {
           break;
        }
        i++;
    }
    if (index !== -1) {
        console.log('Occurance found in ' + index + ' position');
    }
    else if (index === -1 && i !== occurance) {
        console.log('Occurance not found in ' + occurance + ' position');
    }
    else {
        console.log('Occurance not found');
    }
}

yetAnotherGetNthOccurance(stringToMatch, 'ABC', 2);
// Output: Occurance found in 16 position

yetAnotherGetNthOccurance(stringToMatch, 'ABC', 20);
// Output: Occurance not found in 20 position

yetAnotherGetNthOccurance(stringToMatch, 'ZAB', 1)
// Output: Occurance not found 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-30T02:05:27.130

使用`indexOf`和**递归**：

首先检查传递的第 n 个位置是否大于子字符串出现的总数。如果通过，递归遍历每个索引，直到找到第 n 个。

```
var getNthPosition = function(str, sub, n) {
    if (n > str.split(sub).length - 1) return -1;
    var recursePosition = function(n) {
        if (n === 0) return str.indexOf(sub);
        return str.indexOf(sub, recursePosition(n - 1) + 1);
    };
    return recursePosition(n);
}; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-21T20:50:43.080

```
function getStringReminder(str, substr, occ) {
   let index = str.indexOf(substr);
   let preindex = '';
   let i = 1;
   while (index !== -1) {
      preIndex = index;
      if (occ == i) {
        break;
      }
      index = str.indexOf(substr, index + 1)
      i++;
   }
   return preIndex;
}
console.log(getStringReminder('bcdefgbcdbcd', 'bcd', 3)); 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2016-06-30T04:00:53.983

我正在为 StackOverflow 上的另一个问题使用以下代码，并认为它可能适合这里。函数 printList2 允许使用正则表达式并按顺序列出所有出现的事件。（printList 是对早期解决方案的尝试，但在许多情况下都失败了。）

```
<html>
<head>
<title>Checking regex</title>
<script>
var string1 = "123xxx5yyy1234ABCxxxabc";
var search1 = /\d+/;
var search2 = /\d/;
var search3 = /abc/;
function printList(search) {
   document.writeln("<p>Searching using regex: " + search + " (printList)</p>");
   var list = string1.match(search);
   if (list == null) {
      document.writeln("<p>No matches</p>");
      return;
   }
   // document.writeln("<p>" + list.toString() + "</p>");
   // document.writeln("<p>" + typeof(list1) + "</p>");
   // document.writeln("<p>" + Array.isArray(list1) + "</p>");
   // document.writeln("<p>" + list1 + "</p>");
   var count = list.length;
   document.writeln("<ul>");
   for (i = 0; i < count; i++) {
      document.writeln("<li>" +  "  " + list[i] + "   length=" + list[i].length + 
          " first position=" + string1.indexOf(list[i]) + "</li>");
   }
   document.writeln("</ul>");
}
function printList2(search) {
   document.writeln("<p>Searching using regex: " + search + " (printList2)</p>");
   var index = 0;
   var partial = string1;
   document.writeln("<ol>");
   for (j = 0; j < 100; j++) {
       var found = partial.match(search);
       if (found == null) {
          // document.writeln("<p>not found</p>");
          break;
       }
       var size = found[0].length;
       var loc = partial.search(search);
       var actloc = loc + index;
       document.writeln("<li>" + found[0] + "  length=" + size + "  first position=" + actloc);
       // document.writeln("  " + partial + "  " + loc);
       partial = partial.substring(loc + size);
       index = index + loc + size;
       document.writeln("</li>");
   }
   document.writeln("</ol>");

}
</script>
</head>
<body>
<p>Original string is <script>document.writeln(string1);</script></p>
<script>
   printList(/\d+/g);
   printList2(/\d+/);
   printList(/\d/g);
   printList2(/\d/);
   printList(/abc/g);
   printList2(/abc/);
   printList(/ABC/gi);
   printList2(/ABC/i);
</script>
</body>
</html>
```

# java - 客户端虚拟机没有内联？

> ID：14480347
> 
> 赞同：4
> 
> 时间：2013-01-23T13:00:08.347
> 
> 标签：java, jvm, openjdk

我在Linux机器上并使用openjdk7。在发现我的代码在使用 -server 选项时执行速度提高了一倍后，我深入研究了 VM 内部发生的事情，发现服务器 VM 疯狂地内联了我的代码，而客户端 VM 根本没有内联。

这是正常行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:05:43.160

这是正常行为。

服务器 JVM 更重地优化代码。这在启动时使用更多 CPU，在运行时使用更多内存。

客户端 VM 旨在快速启动，例如小程序。它仅在 Windows 32 位 JVM 上是默认设置。

# sql-server-2008-r2 - SQL Server 2008 R2可以安装在D:盘吗

> ID：14480348
> 
> 赞同：0
> 
> 时间：2013-01-23T13:00:09.547
> 
> 标签：sql-server-2008-r2

我有一台 Windows xp 机器，其中`C:`驱动器仅包含 24Gb 空间，现在对于我当前的项目，我已经安装了几乎所有需要的东西，除了 SQL Server 2008 R2。

`C:`由于驱动器上的空间较小，我无法安装它。

有人可以建议我能做些什么来摆脱这个问题吗？提前致谢....

# c# - 非活动应用程序的键盘快捷键

> ID：14480349
> 
> 赞同：0
> 
> 时间：2013-01-23T13:00:10.000
> 
> 标签：c#, c++, winapi, keyboard-shortcuts

我使用 WS_EX_NOACTIVATE 创建了一个屏幕键盘

问题是我无法在屏幕键盘中使用快捷键。如何才能对键盘应用程序的快捷方式做出反应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:19:40.070

*我不知道你尝试了什么，但是*

我建议你

注册自己的热键

MSDN：[RegisterHotKey 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646293%28v=vs.85%29.aspx)

[使用 C# 设置全局热键](https://stackoverflow.com/questions/2450373/set-global-hotkeys-using-c-sharp)

或者自己监控按键

MSDN：[GetAsyncKeyState 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)

*对不起社区维基*

# php - 服务器上没有语言环境的PHP GetText？

> ID：14480352
> 
> 赞同：1
> 
> 时间：2013-01-23T13:00:19.890
> 
> 标签：php, localization, gettext

我对 GetText 有疑问，我的问题实际上是：是否可以手动设置 .mo-filepath？

如果我在 shell 中键入“locales -a”，我会得到以下列表

```
C
de_DE.utf8
en_US.utf8
POSIX 
```

我的 PHP 代码是这样的：

```
$directory = './locale';
$domain = 'texts';

$locale = 'fr_FR.utf8';

bindtextdomain($domain, $directory);
textdomain($domain);
bind_textdomain_codeset($domain, 'UTF-8');

putenv('LC_MESSAGES='.$locale);
setlocale(LC_MESSAGES, $locale); 
```

如果我将变量 $locale 更改为“en_US”或“de_DE”并且文件可用，则它可以完美运行。但它不适用于不在上面列表中的语言环境。但是必须有一种方法可以在不安装每种语言的情况下做到这一点..

也许你知道一个好建议。先感谢您 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:15:27.950

Zend 框架有自己的 gettext 实现，它实际上直接从 .mo 文件中读取，而不是使用 gettext 扩展名。

这可能是解决缺少系统语言环境的唯一方法

> Zend_Translate Gettext 适配器不是使用 PHP 的 gettext 扩展实现的。即使您没有安装 PHP gettext 扩展，您也可以使用 Gettext 适配器。此外，适配器是线程安全的，PHP gettext 扩展目前不是线程安全的。

[http://framework.zend.com/manual/1.12/en/zend.translate.adapter.html#zend.translate.adapter.gettext](http://framework.zend.com/manual/1.12/en/zend.translate.adapter.html#zend.translate.adapter.gettext)

来源 [https://github.com/magento/magento2/blob/master/lib/Zend/Translate/Adapter/Gettext.php](https://github.com/magento/magento2/blob/master/lib/Zend/Translate/Adapter/Gettext.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:11:21.983

如果您使用本机 gettext() 扩展，我认为这是不可能的。

您仍然可以通过`$directory = './locale/fr_FR' and putting a folder`在其中设置 LC_MESSAGE/en_US' 来做一个肮脏的解决方法。

您还可以使用用 PHP 编写的 PHP Gettext 仿真：[https](https://launchpad.net/php-gettext/) ://launchpad.net/php-gettext/即使没有安装语言环境也可以工作。

它还将防止另一个 gettext 警告：如果您更新 .mo 文件（上传新文件），如果它已经在其缓存中（每个进程都有自己的缓存），则本机 gettext 扩展将不会加载它。没有办法手动重新加载它（当然，除了更改字典名称......）。看看我前段时间问的一个问题：[Gettext caching annoyance](https://stackoverflow.com/questions/7931021/gettext-caching-annoyance)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-03T17:00:00.420

这是前面提到的肮脏解决方法的解释：

如果我的语言环境文件夹如下所示：

```
locale
  fr_FR.UTF-8
  zh_CN.UTF-8 
```

如果我知道我的代码将在其上运行的系统至少具有“en_US.UTF-8”语言环境，我可以使用该名称在每种语言下创建一个虚拟文件夹，其中包含 .po 或 .mo 文件：

```
locale
  fr_FR.UTF-8
    en_US.UTF-8
  zh_CN.UTF-8
    en_US.UTF-8 
```

然后，我可以像这样设置我的语言环境

```
// Dynamically set your desired locale here 
$locale = 'fr_FR.UTF-8'

// Set locale to the same 'safe' locale every time
setlocale(LC_ALL, 'en_US.UTF-8');

// Call bindtextdomain with the directory containing the fake 'en_US.UTF-8' folder that is actually a different language
bindtextdomain('domain', BASE_DIR . DS . 'locale' . DS . $locale);
bind_textdomain_codeset('domain', 'UTF-8');
textdomain('domain'); 
```

有点hacky，但它就像一个魅力。

希望有人会为 bindtextdomain 添加更多选项，以便可以自定义它如何处理当前设置的语言环境

¯_(ツ)_/¯

# jquery - jQuery 每个都有超时

> ID：14480359
> 
> 赞同：1
> 
> 时间：2013-01-23T13:00:39.147
> 
> 标签：jquery, get, settimeout, each

我有以下功能运行正常，除了一件事。它首先附加的内容没有任何后果。

```
(function biograf(){
  var placeholder = $('#top-imageholder');
  $('ul#biomenu > li').each(function(){
    var obj = $(this);
    var pageLink = obj.find('a:first').attr('href');
    $.get(pageLink, function(data) {
      placeholder.append( $(data).find('#top-imageholder').html() );
      placeholder.append( $(data).find('#top-imageholder').siblings('ul') );
    });
  });
})(); 
```

我希望该函数按照我的列表项放置在#biomenu 中的顺序附加占位符。

它在 90% 的时间里都会这样做，但有时它会以不同的顺序附加。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:46:07.497

好吧，它可以使用以下代码：

```
(function biograf(){
  var placeholder = $('#top-imageholder');
  var item = $('ul#biomenu > li');
  var index = 0;

  (function loop(){
    setTimeout(function(){
      var pageLink = item.eq(index).find('a:first').attr('href');
      if( pageLink != undefined ){
        $.get(pageLink, function(data) {
          placeholder.append( $(data).find('#top-imageholder').html() );
          placeholder.append( $(data).find('#top-imageholder').siblings('ul') );
        });     
        index++;
        loop();
      }
    });
  })();
})(); 
```

我不确定这是否是最佳方式，或者代码是否可以调整。但它有效！:)

感谢所有的回复！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T13:02:20.430

`$.when`使用（未经测试的代码）订购结果：

```
(function (){

  var placeholder = $('#top-imageholder');
  var promises = [];

  $('ul#biomenu > li').each(function(){
    var obj = $(this);
    var pageLink = obj.find('a:first').attr('href');
    promises.push($.get(pageLink));
  });

  $.when.apply(null, promises).done(function() {
    $.each(arguments, function(data) {
      placeholder.append( $(data).find('#top-imageholder').html() );
      placeholder.append( $(data).find('#top-imageholder').siblings('ul') );
      return true;
    });
  });

})(); 
```

# javascript - 返回单选按钮的值

> ID：14480363
> 
> 赞同：-2
> 
> 时间：2013-01-23T13:00:45.880
> 
> 标签：javascript, html

我检查了重复项，但没有发现完全相同的问题，所以我们开始吧。我有两个单选按钮，我需要在提交表单时返回它们的值。问题是当我单击提交按钮时，我总是得到相同的单选按钮值。这是一些代码：

```
<div id="automatic">
        <p>Title1
            <input type="radio" id ="mode" name="mod" value="auto" >
        </p>           
    </div>

    <div id="selection">
        <p>Title2
            <input type="radio" id ="mode" name="mod" value="nonauto" >
        </p>           
    </div>

    <form id="search" action="test.jsp" method="GET" onsubmit="if (document.getElementById('search_text').value.length < 1) return false;">
        <input id="search_text" type="text" name="q">
        <input id="searchButton" type="submit" onclick="displayRadio()" value="Search" autocomplete="off" size="115">
    </form> 
```

这是Javascript代码：

```
function displayRadio() {
        alert(document.getElementById("mode").value)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:08:53.370

使用不同的 id 并使用您的函数来查找其中哪些被检查并返回其值。

```
function displayRadio() {
    var modeauto = document.getElementById('modeauto');
    var modenoauto = document.getElementById('modenoauto');
    var value = modeauto.checked ? modeauto.value : modenoauto.value;
    alert(value);
} 
```

*不过，为了简单起见，我建议使用 jQuery。*

# ms-access - 如何在访问 2013 表单中使用数据透视表模式

> ID：14480367
> 
> 赞同：1
> 
> 时间：2013-01-23T13:01:10.170
> 
> 标签：ms-access, pivot-table, office-2013

我在 Microsoft Access 2010 中从表中创建了一个表单，并以数据透视表模式加载它以查看 Cube 中的数据，我使用它没有任何问题。但是这种数据透视表模式在 MS-Access 2013 Pls 中被禁用。帮我。

# c# - c# DateTimePicker 控制选定日期上的模糊

> ID：14480368
> 
> 赞同：0
> 
> 时间：2013-01-23T13:01:26.067
> 
> 标签：c#, winforms, datetimepicker

有谁知道如何摆脱在 DateTimePicker 日历控件上选择一系列日期时发生的烦人模糊，如下图所示：-

![日期时间日历控件](../Images/3ec264b5a968f89bf97a2b3ee6490390.png)

远非如此体面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:31:05.110

也许您可以使用 TitleForeColor 和 TitleBackColor 属性获得一些合适的结果。至少你可以看到日期。

# android - 在Android游戏中，您应该为ui线程或游戏线程中的资源分配内存

> ID：14480371
> 
> 赞同：2
> 
> 时间：2013-01-23T13:01:35.023
> 
> 标签：android

[我在这里](https://stackoverflow.com/questions/14472124/in-android-can-you-load-resources-outside-the-ui-thread)问了这个问题的线索。我想知道是否建议阅读 ui 线程或游戏线程上的 android 资源（在 res 中）文件夹以进行简单游戏（基于月球着陆器示例）。我在月球着陆器中看到他们在开始游戏循环之前分配资源。但是，如果有很多资源，这并不能很好地扩展。我上一个问题的答案说可以在后台线程上读取位图等资源。现在我想知道这是否是正确的做事方式。

另一种架构是不时将 Runnable 发布到 ui 线程，然后分配资源。

垃圾收集会发挥作用吗？我不确定 GC 在哪个线程上运行。但我的猜测是它在分配对象的线程上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T05:53:13.403

> 我上一个问题的答案说可以在后台线程上读取位图等资源。现在我想知道这是否是正确的做事方式。

根据[这里](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)的文档，

> 如果源数据是从磁盘或网络位置（或者实际上是内存以外的任何源）读取的，则不应在主 UI 线程上执行在有效加载大型位图课程中讨论的 BitmapFactory.decode* 方法。加载此数据所需的时间是不可预测的，并且取决于多种因素（从磁盘或网络读取的速度、图像的大小、CPU 的功率等）。如果其中一项任务阻塞了 UI 线程，系统会将您的应用程序标记为无响应，并且用户可以选择关闭它（有关更多信息，请参阅设计响应性）。

因此，您可以使用单独的线程在上述条件下加载资源。

我认为这取决于您的需求以及资源的大小和数量，即使还有其他一些事情需要考虑。例如，如果您不希望您的应用程序用户在加载所有资源之前导航到下一个屏幕，那么使用线程可能会有所帮助。

垃圾收集在守护线程中工作。守护线程在后台运行。当对象有资格进行垃圾收集时，即当没有可用的活动引用或内存变得太低时，垃圾收集就会起作用。使用此[链接](http://android-developers.blogspot.in/2009/02/track-memory-allocations.html)了解如何使用跟踪内存分配以及如何避免频繁的垃圾收集。

# gridview - Windows 8 GridView 拖动/触摸问题

> ID：14480374
> 
> 赞同：2
> 
> 时间：2013-01-23T13:01:47.567
> 
> 标签：gridview, windows-8, drag-and-drop, touch, windows-store-apps

在我的 windows8 应用程序中拖动时，Gridview 内的触摸体验不正确，因为当我尝试从 Gridview 在左右方向上拖动项目时，它被认为是平移和根据以下用户体验文档：仅允许向上/向下方向拖动有没有办法覆盖这种行为？

![](../Images/8749cea0811a55a0e921f6c3142c80d1.png)

我也禁用了滚动，但仍然无法向右/向左拖动（仅在触摸模式下发生并且在鼠标模式下工作正常），你知道如何解决这个问题吗？

此外，是否允许修改上述距离阈值？

-此问题的视频**触摸**向右/向左拖动（问题）：http: [//youtu.be/ybEH4bmnWpU](http://youtu.be/ybEH4bmnWpU)

# ios - 获取或模拟当前用户的 NSLocale

> ID：14480376
> 
> 赞同：0
> 
> 时间：2013-01-23T13:02:05.850
> 
> 标签：ios, objective-c

我希望我的应用程序可以在少数 iTunes 商店中使用。我阅读了[NSLocale 类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html)，他们正在谈论“当前用户”。那么，谁是“当前用户”？是下载了应用程序的用户吗？

1) 是否可以根据下载我的应用程序的当前 appleID 国家或 iTunes 商店国家/地区获取 NSLocale？

2）是否可以模拟 NSLocale 来测试我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:04:41.263

在 iOS 中，没有“当前用户”这样的东西。文档中对“当前用户”的引用`NSLocale`可能是 OS X 文档的保留。

在 iOS 中，运行设置应用程序并转到常规，然后转到国际。“区域格式”和“语言”设置定义了您在 iOS 中返回的`[NSLocale currentLocale]`.

在 iOS 中，第三方应用程序无法获取任何类型的 appleID 或有关特定 iTunes 商店的信息。

直接回答你的两个问题：

1) 不，您无权访问此信息

2) 是的，运行设置应用程序并更改语言和/或区域格式设置。这将影响`NSLocale`您在应用程序中获得的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:23:06.630

伙计们，我找到了获取用户（Apple ID、iTunes 商店）区域设置的解决方案！您可以从 SKProduct 获取语言环境。

```
if([SKPaymentQueue canMakePayments])
{
   [self requestProductData];
}

#pragma mark -
#pragma mark In-App Purchase Delegate Methods

- (void)requestProductData
{
    NSLog(@"IN-APP:requestProductData");
    SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:<your in-app identifier>]];
    request.delegate = self;
    [request start];
}

- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    NSArray *myProduct = [[NSArray alloc]initWithArray:response.products];
    if ([myProduct count]>0)
    {
        SKProduct *product = [myProduct objectAtIndex:0];
        NSLog(@"Price: %.2f",product.price.floatValue);
        NSLog(@"Price Locale: %@",product.priceLocale.localeIdentifier);
        NSLog(@"Product Identifier: %@",product.productIdentifier);
        NSLog(@"IN-APP:array count: %i", [myProduct count]);
        [request autorelease];
    }
    [myProduct release];
    myProduct = nil;
} 
```

# java - android将utf8内容发送到servlet

> ID：14480377
> 
> 赞同：1
> 
> 时间：2013-01-23T13:02:06.100
> 
> 标签：java, android, hibernate, servlets, web

我正在使用 Android 将英语和阿拉伯语内容发送到 Servlet，但数据会发送到服务器。如何解决？这是我在 Android 中的代码：

```
StringEntity se = new StringEntity(gsonString);
se.setContentType("text/json;charset=UTF-8");
se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,
"application/json;charset=UTF-8"));
HttpPost httpRequest = new HttpPost(methodURL);
httpRequest.setEntity(se);
HttpResponse response = httpClient.execute(httpRequest,localContext); 
```

小服务程序代码

```
request.setCharacterEncoding("UTF-8");
response.setContentType("text/html;charset=UTF-8");
BufferedReader in = new BufferedReader(new InputStreamReader(request.getInputStream()));
    String line = in.readLine();
    String gsonString = line;
    while (line != null) {
        gsonString += line;
        line = in.readLine();
    } 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T23:36:11.830

```
HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();

Gson gson = new Gson();
        String gsonString = gson.toJson(currentCustomer);
        Log.v("gson", gsonString);

        StringEntity se = new StringEntity(gson.toJson(currentCustomer),
                "UTF-8");
HttpPost httpRequest = new HttpPost(methodURL);
        httpRequest.setHeader("customerRegisrationData", gsonString);
        httpRequest.setEntity(se);

        HttpResponse response = httpClient.execute(httpRequest,
                localContext); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:07:21.417

使用这些方法

```
HttpPost httpPost = new HttpPost(method_url);

StringEntity postEntity = new StringEntity(HTTP.UTF_8);
httpPost.setEntity(postEntity) 
```

或者

```
httpPost.setEntity(new UrlEncodedFormEntity(postData)); 
```

# c# - 来自行插入的 epplus

> ID：14480380
> 
> 赞同：-1
> 
> 时间：2013-01-23T13:02:27.300
> 
> 标签：c#, epplus

我需要使用epplus在excel中插入新行，格式类似于上面的行！

插入行合并单元格后受到干扰，数据也无法读取

请尽快给我解决方案 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:05:09.053

如果您从第 1 行到第 2 行，则传入您想要数据的位置

```
currentWorksheet.Cells["A2"].Value = "Totals"; 
```

如果您想合并，假设单元格 A2 和 B2 您将执行以下操作

```
currentWorksheet.Cells["A2:B2"].Merge = true; 
```

如果您需要更多帮助，请提供更多描述性

# joomla2.5 - JomSocial - 注册重定向

> ID：14480381
> 
> 赞同：1
> 
> 时间：2013-01-23T13:02:32.637
> 
> 标签：joomla2.5, jomsocial

我在社交网络上工作。我已经安装了“重定向注册 JomSocial”插件，用于将注册页面重定向到 jomsocial 注册。我正在获取注册页面，但是一旦完成注册的第一步，页面就会重定向到登录页面，显示消息为“请先登录”。

仅当我禁用在 jomsocial 安装期间创建的菜单“Jomsocial”时才会发生这种情况。

有没有其他方法可以将注册页面重定向到 jomsocial 注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-24T18:46:18.007

您似乎有菜单项问题。可能您在 JomSocial 工具栏之外创建了一些菜单项，并且您已为此菜单项之一（具有最高菜单项 ID 的那个）设置了隐私限制。

因此，您进入注册页面，然后单击下一个 Joomla！正在从我上面提到的菜单项中获取菜单项 ID……这会导致重定向到“请先登录”。只需检查您的菜单项；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:44:34.283

You may *not* disable the jomsocial menu items, if you don't want to show them just put them in a new menu, which you won't create a module for (or create a module and don't assign it to any position). This is why it's failing now. The function requiring this is getMenuItem() in the redirect plugin.

What you will find next is that a visitor clicking on a link that requires login will be sent to the login page with a &return parameter with the encoded url it's supposed to go back to after login. This is not handled by jomsocial plugin, just change is like this:

**file plugins/system/jomsocialredirect/jomsocialredirect.php**

```
/**
 * Method to override Login / Logout redirect
 */
private function overrideRedirectLoginLogout() {

    $mainframe  =&  JFactory::getApplication();

    $task = JRequest::getVar ( 'task' );
    switch ($task) {
        case 'user.login' : //Joomla 1.6 and later
        case 'login' : /* on logging */
            /** 
             * krz This next line restores working status of login redirects.
             * (the purpose of jomsocialredirect plugin is to redirect after login, but some links for guests
             * point to com_login with a return url set; if this is the case, the next line makes the feature work,
             * otherwise it would be overridden;
             * note: redirect is to be avoided on logout.
             */
            if (JRequest::getVar('return','')!='') return;

            if ($this->login ()) { /* we do login by self */
                /* redirect if login success */
                $link = $this->getMenuLink ( $this->pluginParams->get ( 'redirect_login', 1 ) );
                $mainframe->redirect ( $link, JText::_ ( $this->pluginParams->get ( 'redirect_login_msg', 'LOGIN_SUCCESSFUL' ) ), 'message' );
            } else {
                /* redirect if login failed */
                $link = $this->getMenuLink ( $this->pluginParams->get ( 'redirect_login_failed', 1 ) );
                $mainframe->redirect ( $link, JText::_ ( $this->pluginParams->get ( 'redirect_login_failed_msg', 'LOGIN_FAILED' ) ), 'notice' );
            }
            break;
        case 'user.logout' : //Joomla 1.6 and later
        case 'logout' :
            $link = $this->getMenuLink ( $this->pluginParams->get ( 'redirect_logout', 1 ) );
            JFactory::getApplication ()->logout ();
            $mainframe->redirect ( $link, JText::_ ( $this->pluginParams->get ( 'redirect_logout_msg', 'YOU_HAVE_LOGGED_OUT' ) ), 'message' );
            break;

        default :
            /* override redirect after login / logout */
            $view = JRequest::getVar('view','');
            if ($view=='profile') {
                $link = $this->getMenuLink ( $this->pluginParams->get ( 'redirect_login', 1 ) );
                $mainframe->redirect ( $link);
            }

            break;
    }
} 
```

# sencha-touch-2 - 如何在基于 sencha 触摸的应用程序中实现滚动和绘画

> ID：14480387
> 
> 赞同：0
> 
> 时间：2013-01-23T13:02:43.513
> 
> 标签：sencha-touch-2, html5-canvas, android-browser

我有一个在平板电脑上使用的 sencha touch 2.0 Web 应用程序（从网站地址访问）。这是一个在现有图像上的画布层上绘画的小应用程序。

当我从平板电脑访问图像时，我无法滚动图像，而是继续在画布上绘画。

在浏览器中，我得到了这个滚动条，但在平板电脑上，我通常需要触摸图像并将其移动以滚动，这不起作用，而是在画布上绘制。我怎样才能同时拥有它们？在 Android 浏览器上是否有任何解决方法？

# batch-file - 在没有 for 循环的情况下读取批处理文件中的行

> ID：14480389
> 
> 赞同：0
> 
> 时间：2013-01-23T13:02:54.160
> 
> 标签：batch-file, command, cmd

我有一个带有以下标签的 xml 文件：

```
<param>
  <name>date</name>
  <Value>20010202</Value>
</param> 
```

我在一个文件中有很多这样的标签。我需要通过批处理读取此文件并将日期的值更新为名称标签包含“日期”的字符串。我已经批量编写了一些代码来将日期（无论它在完整文件中的哪个位置）替换为所需的字符串。我的代码如下：

```
for /f "tokens=1,* delims=]" %%K in ('"type "example.xml"|find /n /v """') do (
set "line=%%L"
if defined line (
  call set "line=echo.%%line:20010202=desiredString%%"
  for /f "delims=" %%C in ('"echo."%%line%%""') do %%~C
  ) else echo.
) >> "example.tmp" 
```

但我需要检查替换的日期是否应该是名称标签的值标签为“日期”。我想在 for 循环中执行检查，然后在当前行匹配时读取下一行。

如何在 for 循环中读取一行并检查批处理文件中的 if 条件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:30:13.637

我想您可以使用纯批处理编写解决方案，但它可能会很慢而且很脆弱。脆弱我的意思是 XML 可以以逻辑上等效的方式重新格式化，但会破坏您的代码。Batch 可能是您可以用来操作 XML 的最糟糕的语言之一。

理想情况下，您应该使用专门设计用于处理 XML 的命令行工具。或者，您可以使用任何支持正则表达式搜索和替换的语言或工具。一些选项 - VBScript、JScript、[gnu sed for Windows](http://gnuwin32.sourceforge.net/packages/sed.htm)、Powershell ......不胜枚举。

我编写了一个混合批处理/JScript REPL.BAT 实用程序，它为批处理执行正则表达式搜索和替换文本文件提供了一种简单的方法。它非常快，比任何纯批处理解决方案都要快得多。

下面是使用我的 REPL.BAT 实用程序的简单解决方案：

```
@echo off
setlocal
set "file=example.xml"
set "oldDate=20010202"
set "newDate=20130123"
set "search=(<param>\s*<name>date</name>\s*<Value>)%oldDate%(</Value>\s*</param>)"
type "%file%"|repl "%search%" "$1%newDate%$2" m >"%file%.new"
move /y "%file%.new" "%file%" >nul 
```

这是 REPL.BAT 实用程序。完整的文档嵌入在脚本中。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:33:59.917

尽管我们都知道 Batch 很慢，但我认为与其他解决方案相比，没有人知道确切的程度。下面有一个针对这个问题的纯批处理解决方案，我认为它可能相当快。我可以请您（或任何人）使用大型 .xml 文件测试此解决方案并获得比较时间吗？这些信息可能对我们所有人都很有价值！

```
@echo off
setlocal EnableDelayedExpansion
set "file=example.xml"
set "oldDate=20010202"
set "newDate=20130123"
set lastLine=1
set line=
echo "<name>date</name>" >> "%file%"
< "%file%" (for /F "delims=:" %%a in ('findstr /N /C:"<name>date</name>" "%file%"') do (
   if not defined line set /P line=
   set /A lines=%%a-lastLine, lastLine+=lines+1
   for /L %%i in (1,1,!lines!) do set /P "line=!line!" & echo/
   set nextLine=
   set /P nextLine=
   if defined nextLine (
      echo !line!
      set "line=!nextLine:<Value>%oldDate%</Value>=<Value>%newDate%</Value>!"
   )
)) > "%file%.new"
move /Y "%file%.new" "%file%" 
```

请注意，以前的 Batch 程序错误地处理文件中的空行。虽然这点可以修复，但是额外的代码会减慢程序的速度，所以我想先了解一下原始代码与其他解决方案的比较。使用没有空行的 .xml 文件测试此程序。

安东尼奥

# asp.net-mvc - Facebook 助手未出现在 MVC4 中

> ID：14480392
> 
> 赞同：1
> 
> 时间：2013-01-23T13:03:04.977
> 
> 标签：asp.net-mvc, facebook, razor, asp.net-mvc-4, facebook-like

我在 MVC4 中创建了一个新的测试项目来测试我是否可以使用来自 Nuget 库的 Facebook Helper。我按照非常简单的说明进行操作，点击从 Nuget 安装 Facebook 帮助程序，编辑您的页面，然后插入点赞按钮。

当我运行该项目时，我实际上可以看到当我通过 firebug 查看它时正在生成 facebook likebutton，但它没有出现在页面上。

**这是我的默认索引页面**

```
@{
    ViewBag.Title = "Home Page";
}
@section featured {
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title.</h1>
                <h2>@ViewBag.Message</h2>
            </hgroup>
            <p>
                To learn more about ASP.NET MVC visit
                <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
                The page features <mark>videos, tutorials, and samples</mark> to help you get the most from ASP.NET MVC.
                If you have any questions about ASP.NET MVC visit
                <a href="http://forums.asp.net/1146.aspx/1?MVC" title="ASP.NET MVC Forum">our forums</a>.
            </p>
        </div>
    </section>
}
<h3>We suggest the following:</h3>
<div>
    @Facebook.LikeButton()
</div> 
```

我已经浏览了几个关于 Facebook 助手的页面，它们都以相同的方式描述了这个过程。有谁知道在使用这个库之前我是否应该配置任何文件？

**编辑：**

我将粘贴执行后加载到标记中的 html 代码。我会缩写一些脚本和东西，因为它有数百行代码:)

```
<html id="facebook" class="" lang="en">
<head>
<meta charset="utf-8">
<script>
<script>
<noscript><meta http-equiv="refresh" content="0; URL=/plugins/like.php?href=http%3A%2F%2Flocalhost%3A13876%2F&amp;layout=standard&amp;show_faces=src&amp;width=450&amp;action=like&amp;colorscheme=light&amp;height=80&amp;font&amp;locale=en_US&amp;ref&amp;_fb_noscript=1" /></noscript>
<meta content="noodp, noydir" name="robots">
<meta id="meta_referrer" content="default" name="referrer">
<meta content="Facebook is a social utility that connects people with friends and others who work, study and live around them. People use Facebook to keep up with friends, upload an unlimited number of photos, post links and videos, and learn more about the people they meet." name="description">
<link href="https://www.facebook.com/plugins/like.php?href=http%3A%2F%2Flocalhost%3A13876%2F&layout=standard&show_faces=src&width=450&action=like&colorscheme=light&height=80&font&locale=en_US&ref" media="handheld" rel="alternate">
<title>Facebook</title>
<link href="https://fbstatic-a.akamaihd.net/rsrc.php/v2/yc/r/-WUN6qLbp5n.css" rel="stylesheet">
<link href="https://fbstatic-a.akamaihd.net/rsrc.php/v2/yf/r/gd49XKRAMNQ.css" rel="stylesheet">
<link href="https://fbstatic-a.akamaihd.net/rsrc.php/v2/yc/r/XaOowWd9_Aq.css" rel="stylesheet">
<link href="https://fbstatic-a.akamaihd.net/rsrc.php/v2/yH/r/Dpn1SKTH3-z.css" rel="stylesheet">
<script src="https://fbstatic-a.akamaihd.net/rsrc.php/v2/yB/r/Vm1JnKckidu.js">
<script src="https://fbstatic-a.akamaihd.net/rsrc.php/v2/y-/r/ARN_8tuLdws.js">
<script src="https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/XboiPeV3jQI.js">
<script>
<script>
<script src="https://fbstatic-a.akamaihd.net/rsrc.php/v2/yP/r/eTzqwp1jxjF.js" async="">
<script src="https://fbstatic-a.akamaihd.net/rsrc.php/v2/yh/r/aTzvHAZI_Jd.js" async="">
</head>
<body class="plugin ff4 win Locale_en_US">
<div id="FB_HiddenContainer" style="position:absolute; top:-10000px; width:0px; height:0px;"></div>
<script>
<script>
<script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T18:33:55.423

查看它在 URL 中生成的位置 (link href="https://www.facebook...) 它说 "&show_faces=src" 这会导致问题；它应该是 "&show_faces=true"

即使 true 应该是默认值，如果您遇到此问题，请尝试将其更改为： `@Facebook.LikeButton(showFaces: false)`

编辑：这仅在您将其设置为 false 时才有帮助。LikeBox 和所有布尔属性的问题相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:07:38.060

如果 HTML 正在呈现，我只能假设问题是 CSS 问题，检查 FireBug 中元素的样式并确保它们没有被隐藏，例如检查`display: none`或`visibility: hidden`确保没有`float`应用哪个正在使用它离开屏幕。

# ios - 如何在没有 Apple 证书的情况下通过 AIR 在越狱的 iPhone 上安装 .ipa

> ID：14480394
> 
> 赞同：-1
> 
> 时间：2013-01-23T13:03:14.023
> 
> 标签：ios

如何在没有用户干预的情况下直接在 iPhone 设备上安装 ipa/deb 文件，即用户不应使用任何终端或第三方工具（如 Cyber​​duck/iExplorer）来安装文件？整个过程应该是自动化的。与 Cydia 完全一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:26:03.233

如果设备被越狱，安装应用程序不需要临时配置文件。您可以直接将 .ipa 文件安装到越狱设备中。

如果设备没有越狱，您可以安装没有临时配置文件的 .ipa 文件，如果它是使用企业分发证书和内部类型临时配置文件创建的。

对于其余的分发模式，您将需要 .ipa 文件和临时配置文件，并将您的设备 UDID 链​​接到它。

# python - 如何在广播的同时提升一个阵法？

> ID：14480398
> 
> 赞同：2
> 
> 时间：2013-01-23T13:03:34.147
> 
> 标签：python, arrays, numpy

我必须解决以下问题：我需要一个在 LOG 尺度上具有均匀分布数字的一维字符串。准确地说：1,2,3,4,5,6,7,8,9,10,20,30,40...,100,200,300,... 等等。这可以上升到 10^9，所以打字不是一种选择；）

到目前为止，我的代码如下：

```
ome = np.linspace(1,9,9).reshape(9,1)
pow = np.linspce(0,5,6).reshape(1,6)
logome = ome*(10**pow) 
```

但这不起作用，我不知道如何进行......有什么建议吗？

好的，我想出了一些办法，如果有人有兴趣：

```
ome = np.linspace(1,9,9).reshape(1,9)
pow = np.linspce(0,5,6)
pow = np.power(10,pow).reshape(6,1)
logome = ome*pow
logome.reshape(54) 
```

等等瞧 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:31:22.960

为了得到你想要的输出，我可能会做这样的事情：

```
>>> (np.arange(1, 10) * 10**np.arange(9)[:,None]).flatten()
array([        1,         2,         3,         4,         5,         6,
               7,         8,         9,        10,        20,        30,
              40,        50,        60,        70,        80,        90,
             100,       200,       300,       400,       500,       600,
             700,       800,       900,      1000,      2000,      3000,
            4000,      5000,      6000,      7000,      8000,      9000,
           10000,     20000,     30000,     40000,     50000,     60000,
           70000,     80000,     90000,    100000,    200000,    300000,
          400000,    500000,    600000,    700000,    800000,    900000,
         1000000,   2000000,   3000000,   4000000,   5000000,   6000000,
         7000000,   8000000,   9000000,  10000000,  20000000,  30000000,
        40000000,  50000000,  60000000,  70000000,  80000000,  90000000,
       100000000, 200000000, 300000000, 400000000, 500000000, 600000000,
       700000000, 800000000, 900000000]) 
```

第二个术语的工作方式如下：

```
>>> np.arange(5)
array([0, 1, 2, 3, 4])
>>> np.arange(5)[:, None]
array([[0],
       [1],
       [2],
       [3],
       [4]])
>>> 10**np.arange(5)[:, None]
array([[    1],
       [   10],
       [  100],
       [ 1000],
       [10000]]) 
```

您可能还对`np.logspace`. 顺便说一句，请注意，此数组在对数尺度上分布不均*。*

# javascript - Javascript 'this' 作为参数

> ID：14480401
> 
> 赞同：3
> 
> 时间：2013-01-23T13:03:44.510
> 
> 标签：javascript, function, parameters, this

我正在尝试将“FROM”字段中的值复制到“TO”字段中。我的第一次尝试是这样的：

```
function updateToField(toField,fromField)
{
    toField.value = fromField.value}
}

function verifyFromToFields()
{
var inputs = getElementsByTagName("input");
for (var j = 0; j < inputs.length; j++)
{
    if (inputs[j].name.indexOf('FROM') != -1 && if (inputs[j+1].name.indexOf('TO') != -1)
        {
            var fromField = inputs[j];
            var toField   = inputs[j+1];
            fromField.onchange = function(){updateToField(toField,fromField)};
        }
} 
```

该网站有几个 FROM-TO 对，这似乎只适用于“输入”数组中的最后一对。

然后我尝试了这个：

```
function updateToField(toField,fromField)
{
    toField.value = fromField.value}
}

function verifyFromToFields()
{
var inputs = getElementsByTagName("input");
for (var j = 0; j < inputs.length; j++)
{
    if (inputs[j].name.indexOf('FROM') != -1 && if (inputs[j+1].name.indexOf('TO') != -1)
        {
            var fromField = inputs[j];
            var toField   = inputs[j+1];
            fromField.onchange = function(){updateToField(toField,this)};
        }
 } 
```

这样，当页面中的任何 FROM 字段被修改时，它都会被复制到页面上的最后一个 TO 字段。我认为这是我读过的关于参数作为值或参考的问题之一，但我无法弄清楚。这也是一个非常简化的代码版本，我实际上用 getElementsByClass 函数填充输入列表，并且必须搜索子节点。有没有人知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:10:59.887

问题实际上与范围有关。发生的事情是您的函数（您分配给 的函数`onchange`）正在捕获变量`toField`，`fromField`并且它们的值不断变化。我知道看起来你每次都在循环中重新声明了它们，但这不是 JS 的工作方式；循环中的连续行程共享一个范围，因此`fromField`每次都是相同的变量，您只是在每次迭代中为其分配一个新值。所以最后，你所有的函数都引用同一个`fromField`变量。该`fromField`变量自然包含您分配给它的最后一个值。

因此，当您最终调用所有这些函数时，它们都会做同样的事情，因为它们的所有`fromField`s（并且，按照相同的逻辑，`toField`s）都是相同的变量。这就解释了为什么只有最后一个输入有效；它们是您运行这些功能时所包含的内容`fromField`。`toField`

你可以通过引入一个中间函数来解决这个问题，因为函数*确实会*创建新的作用域。这样每次通过循环，你都会得到全新的变量。

```
function updateToField(toField,fromField)
{
   toField.value = fromField.value;
}

function verifyFromToFields()
{
  var inputs = getElementsByTagName("input");
  for (var j = 0; j < inputs.length; j++)
  {
    function(){
      if (inputs[j].name.indexOf('FROM') != -1 && if (inputs[j+1].name.indexOf('TO') != -1)
      {
          var fromField = inputs[j];
          var toField   = inputs[j+1];
          fromField.onchange = function(){updateToField(toField,fromField)};
      }
   }();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:11:30.133

那个关闭，我不认为它意味着你认为它意味着什么。

这一行在这里：

```
 fromField.onchange = function(){updateToField(toField,this)}; 
```

意思是“分配给`onchange`一个函数，该函数将该字段的内容分配给更改时的任何`toField`内容*！*

由于您只有一个变量`toField`，所有可变字段都将分配给它。

这会起作用：

```
var setOnChange = function(fromField, toField) {    
   fromField.onchange = function(){updateToField(toField,this)};
};

for (var j = 0; j < inputs.length; j++)
{
    if (inputs[j].name.indexOf('FROM') != -1 && if (inputs[j+1].name.indexOf('TO') != -1)
        {
            setOnChange(inputs[j], inputs[j+1]);
        }
 } 
```

**编辑**：艾萨克可能对这个问题有更好的解释（尽管我不太喜欢他的解决方案）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:16:05.117

那是因为闭包是如何工作的。当您为`onchange`您创建的函数（为每个循环）分配一个新的匿名函数时，该函数调用`updateToField`，但`toField`and`this`参数（或您传递的任何其他参数）的值不会绑定到“当前”循环，而是绑定到循环的最后一个值（这就是为什么只使用你的最后一个“TO”）。

`onchange`如果您在具有该功能的环境中运行，请尝试调用该属性，而不是为属性分配一个新功能`Function.bind`，或者如果您没有它，请编写一个。

[这里是文档`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

所以你可以这样：

```
fromField.onchange = updateToField.bind(this, fromField, toField); 
```

或者您可以使用[Malvolio](https://stackoverflow.com/a/14480534/20601)编写的其他方法。

# wso2 - 如何安装和配置 wso2 stratos 1.6

> ID：14480414
> 
> 赞同：4
> 
> 时间：2013-01-23T13:04:26.677
> 
> 标签：wso2, wso2stratos

Stratos 1.6 有安装和配置指南吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:10:52.673

Stratos 1.6 以可下载包的形式提供（称为 Stratos 本地设置）。你可以从[这里](http://wso2.com/cloud/stratos/)下载。它包含一个自述文件和必要的脚本来帮助您入门。下载并尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:19:30.340

Stratos 管理器是 Stratos 云服务的入口点。因此需要启动 Manager 和 ELB 服务才能访问云服务。

您能否提供有关您面临的数据库问题的更多详细信息。何时抛出错误以及抛出什么错误等。

[meetudara.blogspot.com/2013/02/wso2-stratos-16-how-to-intall-and.html](http://udaraliyanage.wordpress.com/2013/02/12/wso2-stratos-1-6-how-to-intall-and-configure/)

# android - 使用 Android 接收 onTouch 和 onClick 事件

> ID：14480418
> 
> 赞同：11
> 
> 时间：2013-01-23T13:04:48.133
> 
> 标签：android, android-event

我有一个需要处理 onTouch 手势*和*onClick 事件的视图。实现这一目标的正确方法是什么？

我在视图上有一个`onTouchListener`和一个`onClickListener`集合。每当我触摸视图时，首先`onTouch`触发事件，然后触发`onClick`. 但是，从`onTouch`事件处理程序我必须返回`true`or `false`。返回`true`意味着事件正在被消费，因此android事件系统不会进一步传播事件。

因此，`onClick`永远不会生成事件，至少当我在事件处理程序中`onClick`返回时不会触发我的侦听器。另一方面，返回没有选项，因为这会阻止侦听器接收任何进一步的事件，这些事件是识别手势所必需的。解决这个问题的通常方法是什么？`true``onTouch``false``onTouch`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T11:13:29.810

在您的 GestureDetector 中，您可以直接调用 callOnClick()。注意 View.callOnClick API 需要 API 级别 15。试一试。

```
 // Create a Gesturedetector
GestureDetector mGestureDetector = new GestureDetector(context, new MyGestureDetector());

// Add a OnTouchListener into view
m_myViewer.setOnTouchListener(new OnTouchListener()
{

    @Override
    public boolean onTouch(View v, MotionEvent event)
    {
        return mGestureDetector.onTouchEvent(event);
    }
});

private class MyGestureDetector extends GestureDetector.SimpleOnGestureListener
{
    public boolean onSingleTapUp(MotionEvent e) {
        // ---Call it directly---
        callOnClick();
        return false;
    }

    public void onLongPress(MotionEvent e) {
    }

    public boolean onDoubleTap(MotionEvent e) {
        return false;
    }

    public boolean onDoubleTapEvent(MotionEvent e) {
        return false;
    }

    public boolean onSingleTapConfirmed(MotionEvent e) {
        return false;

    }

    public void onShowPress(MotionEvent e) {
        LogUtil.d(TAG, "onShowPress");
    }

    public boolean onDown(MotionEvent e) {            
        // Must return true to get matching events for this down event.
        return true;
    }

    public boolean onScroll(MotionEvent e1, MotionEvent e2, final float distanceX, float distanceY) {
        return super.onScroll(e1, e2, distanceX, distanceY);
    }        

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        // do something
        return super.onFling(e1, e2, velocityX, velocityY);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T13:13:20.407

如果你使用`onTouchListener`，你不必使用`onClickListener`。`onClickListener`它的作用是获取触摸事件并检查事件操作并检测点击。所以如果你想做一些工作的时候`onClick`。您可以`onTouchListener`通过过滤操作来做到这一点。

```
public boolean onTouch(View v, MotionEvent event) {
if (event.getAction() == MotionEvent.ACTION_DOWN) {
    //this is touch

}
if (event.getAction() == MotionEvent.ACTION_UP) {
    //this is click

}
return false;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-07T13:40:49.483

```
@Override
    public boolean onTouch(View v, MotionEvent event) {

        switch (event.getAction()) {
            case MotionEvent.ACTION_MOVE:
                layOutParams.x = initialX + (int) (event.getRawX() - initialTouchX);
                layOutParams.y = initialY + (int) (event.getRawY() - initialTouchY);

                break;
            case MotionEvent.ACTION_DOWN:
                initialX = layOutParams.x;
                initialY = layOutParams.y;
                initialTouchX = event.getRawX();
                initialTouchY = event.getRawY();
                if (initialTouchX == event.getRawX() && initialTouchY == event.getRawY()) {
                    return false;// to handle Click
                }
                break;
            case MotionEvent.ACTION_UP:
                if (initialTouchX == event.getRawX() && initialTouchY == event.getRawY()) {
                    return false;// to handle Click
                }
                break;

        }
        return true;

    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-24T18:11:45.013

```
isMove = false;
case MotionEvent.ACTION_DOWN:
//Your stuff
isMove = false;
case MotionEvent.ACTION_UP:
if (!isMove || (Xdiff < 10 && Ydiff < 10 ) {
view.performClick; //The check for Xdiff <10 && YDiff< 10 because sometime elements moves a little
even when you just click it   
}
case MotionEvent.ACTION_MOVE:
isMove = true; 
```

另一种方法是使用线程。那就是在 Action_Down 上启动一个线程来增加一个计数器。在 Action_UP 的情况下：停止/中断线程。如果计数器小于 2（根据您的应用程序说或阈值）或 !isMove 然后调用 click 函数，则查找计数器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-01T10:33:49.703

我们可以使用基于标志的实现。我们可以在 Action_Up 中处理滑动/拖动并使标志为真并返回相同的位置。如果单击或点击 Action_Down 中的相同句柄并将标志设置为 false 并返回。

```
touchAndSwipe=false;
switch(e.getAction()){
    case MotionEvent.ACTION_MOVE:
        break;
    case MotionEvent.ACTION_DOWN:
        x1 = e.getX();
        break;
    case MotionEvent.ACTION_UP:
        x2 = e.getX();
        float diff = x2 - x1;
        if(Math.abs(delta) > 100) {
            // Swipe
            touchAndSwipe = true;
        } else {
            touchAndSwipe = false;
        }
        break;
}
return touchAndSwipe; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-03T17:54:22.883

我已经能够在我正在构建的自定义键盘中同时实现 OnClick 和 OnTouch。您可以查看此代码并根据您的上下文对其进行修改，因为您没有包含可供使用的代码示例。

如果您发布代码示例，我可以修改我的这个示例以实现相同的结果供您使用。当涉及到 Android 开发时，上下文就是一切。看看这个代码片段，看看它是否有帮助。否则发布您自己的示例，我将进行修改并回复。

```
 View DefaultphaseLay() {

        LinearLayout mViewFirstPhase = (LinearLayout) getLayoutInflater().inflate(R.layout.layout_default_phase, parent);

        ksOne_btn_LiLay = (LinearLayout) mViewFirstPhase.findViewById(R.id.ksOne_btn_LiLay);
        ksOne_btn = (Button) mViewFirstPhase.findViewById(R.id.ksOne_btn);
        ksOne_btn.setOnClickListener(mCorkyListener);
        ksOne_btn.setFocusableInTouchMode(true);
        ksOne_btn.setFocusable(true);
        ksOne_btn.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {

                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    playClick(keyCode);
                    //v.startAnimation(animScale);
                    //key_sound.start();
                    xkeys_lay.setVisibility(View.GONE);
                    numkeys_lay.setVisibility(View.GONE);
                    if (Constants.HapticFeedbackConstant) {
                        myVib.vibrate(Constants.vibration_duration);
                    }
                } else if (event.getAction() == MotionEvent.ACTION_UP) {
                    ksOne_btn.setFocusable(false); //Check This Added This In Attempt to Kill Selector on Action_Up
                    //playClick(-100);
                    //key_sound.pause();
                }
                return false;
            }
        });

        ChangeKeyBackgroundMehods.initChange_Key_Background(ksOne_btn_LiLay);
        ChangeFontStyle.initChange_fontStyle(ksOne_btn, getApplicationContext());
        ChangeFont_size.initChange_fontSize(ksOne_btn, getApplicationContext()); 
```

这适用于 alpha 或数字输出类型的上下文，如果事件正在寻找发送或使用其他需要修改的上下文。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-23T13:21:42.220

我同意 jdx，如果您使用 onTouchlistener，则不需要使用 onclicklistener，反之亦然，如果您想触发按钮、图像或 textview 单击事件，则只需触发 onClicklistener。如果你想要一些动画，比如拖动和旋转，然后使用 ontouchlistener 来获取触摸表面的坐标

# javascript - iOS 自动播放视频 WebView

> ID：14480426
> 
> 赞同：1
> 
> 时间：2013-01-23T13:05:16.890
> 
> 标签：javascript, html, ios, webview

我想在正文中添加一个应该自动播放的视频（本地视频）有什么简单的解决方案吗？

```
<!DOCTYPE html>
<html>
    <head>
        <link href="fuctions/style.css" rel="stylesheet" media="screen" type="text/css" />
        <script type="text/javascript" charset="utf-8" src="fuctions/cordova-2.3.0.js"></script>
        <script type="text/javascript" charset="utf-8" src="fuctions/functions.js"></script>
    </head>
<body onload="onBodyLoad()">
    <script type="text/javascript">
        checkFirstRun();
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:13:58.990

UIWebView 上有一个名为 mediaPlaybackRequiresUserAction 的属性，默认为 YES。将其更改为否。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T06:33:39.227

苹果和谷歌决定在他们的移动浏览器中允许自动播放。但前提是视频静音。在 iOS 上，您还必须设置 playinline 属性，因为默认情况下视频将全屏播放。

要获得自动播放，请使用以下设置：

```
<video controls autoplay loop muted playsinline>

<source src="video.mp4" type="video/mp4">

<source src="video.webm" type="video/webm">

</video> 
```

# macos - 断开浏览器选项卡（测试用户连接中断时会发生什么）

> ID：14480427
> 
> 赞同：6
> 
> 时间：2013-01-23T13:05:18.273
> 
> 标签：macos, user-interface, google-chrome-extension, websocket

我正在寻找一种方法来强制断开连接（一种断开连接的方法）浏览器选项卡。

我要做的是测试我的网站，在那里我从浏览器打开一个到服务器的 websocket，然后模拟断开连接，但只是在那个浏览器选项卡上（甚至只是在浏览器上），因为我需要我的连接以检查该精确时刻服务器上发生的情况。

我一直在寻找一个 chrome 扩展来这样做，但我没有找到。但任何实现这一点的方法都可以。

我的客户端操作系统是 MacOSX 10.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:23:10.180

您可以杀死浏览器进程。在这种情况下，浏览器将无法正常关闭连接。它看起来很像与服务器的断开网络连接。

有关如何在 MacOS 上终止进程，请参阅[superuser.com 上的此问题。](https://superuser.com/questions/192219/list-and-kill-running-processes-on-mac-os-in-ctrl-alt-delete-like-way)

一个更现实的测试是设置一个虚拟机，在那里运行客户端（或服务器），然后中断虚拟网络连接。

另一种选择是设置一个本地代理服务器（注意，很少有代理服务器已经支持 WebSockets），通过这个代理连接到服务器，然后通过杀死代理来模拟中断的连接。这样您就可以观察服务器和客户端对事件的反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:25:03.887

在 Chrome 中，用于`Menu | Tools | Task Manager`查看选项卡列表。您可以从那里终止页面加载中间的选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-14T13:48:34.340

在 chrome 中，现在有一个“离线”选项，在 DevTools 的 Network 选项卡下，但是如果你正在寻找一个 websocket 断开连接，就像我一样，你必须知道这一点：

[https://bugs.chromium.org/p/chromium/issues/detail?id=423246](https://bugs.chromium.org/p/chromium/issues/detail?id=423246)

# wpf - 绑定中的标签 % 后缀

> ID：14480429
> 
> 赞同：4
> 
> 时间：2013-01-23T13:05:25.693
> 
> 标签：wpf, string-formatting

我发现了这样的事情： [如何将 WPF 字符串格式设置为不乘以 100 的百分比？](https://stackoverflow.com/questions/1283049/how-to-set-wpf-string-format-as-percent-wihout-multiplying-by-100)

我只想在我的号码后面加一个“%”符号后缀。我的代码看起来像这样

```
<Label Content="{Binding Path=ReportGridViewModel.FillingDegree, StringFormat=P}" /> 
```

这个我也试过了

```
<Label Content="{Binding ReportGridViewModel.Cgi, StringFormat={}{0}%}" /> 
```

在这两种情况下，我都没有看到任何变化，比如我没有任何字符串格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:10:25.383

如果`Label`您需要使用[ContentStringFormat](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contentstringformat.aspx)属性

```
<Label Content="{Binding Path=ReportGridViewModel.FillingDegree}" 
       ContentStringFormat="P" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T13:23:15.210

仅当目标属性为 类型时才应用`StringFormat`a的属性。在 a中，目标属性是 type ，因此不受尊重。`Binding``String``Label``Content``Object``StringFormat`

要使其在标签中起作用，请使用`ContentStringFormat`. 如果您要使用 a `TextBlock`，则可以使用`StringFormat`提供的 by `Binding`。

# c# - LINQ 新手：这是使用 LINQ 的正确位置吗？

> ID：14480433
> 
> 赞同：5
> 
> 时间：2013-01-23T13:05:41.680
> 
> 标签：c#, linq, xna

首先，我是 LINQ 的新手，所以我并不真正了解它的来龙去脉。我正在尝试在某些代码中使用它，根据我的诊断，它似乎与以相同方式使用 for 循环一样快。但是，我不确定这将如何扩展，因为我正在使用的列表可能会急剧增加。

我将 LINQ 用作碰撞检测功能的一部分（仍在使用中），并且我正在使用它来将列表剔除为仅与检查相关的列表。

这是 LINQ 版本：

```
partial class Actor {
    public virtual bool checkActorsForCollision(Vector2 toCheck) {
        Vector2 floored=new Vector2((int)toCheck.X, (int)toCheck.Y);

        if(!causingCollision) // skip if this actor doesn't collide
            return false;

        foreach(
            Actor actor in
            from a in GamePlay.actors
            where a.causingCollision==true&&a.isAlive
            select a
            )
            if( // ignore offscreen collisions, we don't care about them
                (actor.location.X>GamePlay.onScreenMinimum.X)
                &&
                (actor.location.Y>GamePlay.onScreenMinimum.Y)
                &&
                (actor.location.X<GamePlay.onScreenMaximum.X)
                &&
                (actor.location.Y<GamePlay.onScreenMaximum.Y)
                )
                if(actor!=this) { // ignore collisions with self
                    Vector2 actorfloor=new Vector2((int)actor.location.X, (int)actor.location.Y);

                    if((floored.X==actorfloor.X)&&(floored.Y==actorfloor.Y))
                        return true;
                }

        return false;
    }
} 
```

这是我以前的方法：

```
partial class Actor {
    public virtual bool checkActorsForCollision(Vector2 toCheck) {
        Vector2 floored=new Vector2((int)toCheck.X, (int)toCheck.Y);

        if(!causingCollision) // skip if this actor doesn't collide
            return false;

        for(int i=0; i<GamePlay.actors.Count; i++)
            if( // ignore offscreen collisions, we don't care about them
                (GamePlay.actors[i].location.X>GamePlay.onScreenMinimum.X)
                &&
                (GamePlay.actors[i].location.Y>GamePlay.onScreenMinimum.Y)
                &&
                (GamePlay.actors[i].location.X<GamePlay.onScreenMaximum.X)
                &&
                (GamePlay.actors[i].location.Y<GamePlay.onScreenMaximum.Y)
                )
                if( // ignore collisions with self
                    (GamePlay.actors[i].isAlive)
                    &&
                    (GamePlay.actors[i]!=this)
                    &&
                    (GamePlay.actors[i].causingCollision)
                    ) {
                    Vector2 actorfloor=
                        new Vector2(
                            (int)GamePlay.actors[i].location.X,
                            (int)GamePlay.actors[i].location.Y
                            );

                    if((floored.X==actorfloor.X)&&(floored.Y==actorfloor.Y))
                        return true;
                }

        return false;
    }
} 
```

目前，要么几乎立即运行（但每秒运行多次），但随着项目的构建和变得更加复杂，这将同时处理更多的对象，并且检查冲突的代码将更加详细.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T16:44:02.410

你的代码看起来不错；我不是更改工作代码的忠实拥护者，但是如果您确实想重写它以使其更易于阅读，那么我会这样做：

首先，抽象出谓词“不在屏幕上”。也许让它成为 GamePlay 的一种方法。每次检查坐标是否在边界内的业务是（1）实现细节，以及（2）使您的代码难以阅读。将来您可能会有一些更复杂的机制来确定对象是否在屏幕上。

其次，抽象掉向量地板操作。也许让它成为 Vector 的方法。请注意，此方法应返回一个新向量，而不是改变现有向量。

第三，在向量上做一个相等运算符。

第四，更好地命名方法。谓词应具有“IsFoo”或“HasFoo”的形式。您将其表述为命令，而不是问题。

第五，你根本不需要循环。

第六，说起来很奇怪`somebool == true`。就说吧`somebool`。前者的意思是“如果这个布尔是真的”，这是不必要的复杂。

让我们看看这是如何摆脱的：

```
public virtual bool HasCollisionWithAnyActor(Vector2 toCheck)
{
    // "Easy out": if this actor does not cause collisions then
    // we know that it is not colliding with any actor.
    if (!causingCollision)
      return false;

    Vector2 floored = toCheck.Floor();

    var collidingActors = 
      from actor in GamePlay.actors
      where actor != this
      where actor.causingCollision
      where actor.isAlive
      where GamePlay.IsOnScreen(actor.location)
      where actor.location.Floor() == floored
      select actor;

    return collidingActors.Any();
} 
```

看看这比你的方法版本更容易阅读！这些都不会影响 X 和 Y 坐标。**让辅助方法完成所有这些工作。**代码现在清楚地表达了语义：告诉我是否与屏幕上其他活着的、导致碰撞的演员发生碰撞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:17:33.710

这里的 LINQ 版本比上一个版本更快，因为您忘记创建一个局部变量来存储`GamePlay.actors[i]`. 然后，如果在循环`actors`中多次访问数组。`for`

```
public virtual bool checkActorsForCollision(Vector2 toCheck)
{
    Vector2 floored = new Vector2((int) toCheck.X, (int) toCheck.Y);

    if (!causingCollision) // skip if this actor doesn't collide
    return false;

    for (int i = 0; i < GamePlay.actors.Count; i++)
    {
        Actor actor = GamePlay.actors[i];
        // ignore offscreen collisions, we don't care about them
        if ((actor.location.X > GamePlay.onScreenMinimum.X) &&
            (actor.location.Y > GamePlay.onScreenMinimum.Y) &&
            (actor.location.X < GamePlay.onScreenMaximum.X) &&
            (actor.location.Y < GamePlay.onScreenMaximum.Y))
        {

            if ((actor.isAlive) && (actor != this) &&
                (actor.causingCollision)) // ignore collisions with self
            {
                Vector2 actorfloor =
                  new Vector2((int) actor.location.X,
                              (int) actor.location.Y);
                if ((floored.X == actorfloor.X) &&
                    (floored.Y == actorfloor.Y))
                  return true;
            }
        }
    }
    return false;
} 
```

现在，LINQ 的性能一般来说非常好。但在某些情况下，最好使用经典`for`版本。您必须在代码的易读性和性能之间找到适当的平衡（通过比较 LINQ 版本和`for`版本）。就我而言，我使用和滥用 LINQ 是因为我真的很喜欢它的语法和它的易读性。

这是一个完整的 LINQ 版本：

```
return (from actor in GamePlay.actors
        where actor.causingCollision && a.isAlive
        where actor != this
        where (actor.location.X > GamePlay.onScreenMinimum.X) &&
              (actor.location.Y > GamePlay.onScreenMinimum.Y) &&
              (actor.location.X < GamePlay.onScreenMaximum.X) &&
              (actor.location.Y < GamePlay.onScreenMaximum.Y)
        select new Vector2((int)actor.location.X,
                           (int)actor.location.Y)).Any(actorfloor => (floored.X == actorfloor.X) &&
                                                                     (floored.Y == actorfloor.Y)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:17:55.787

我认为在这里使用 LINQ 没有任何问题。如果您想真正知道是否正在提高性能，您应该使用 Diagnostics.StopWatch 进行一些测量

[http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.elapsedticks.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.elapsedticks.aspx)

此外，您可以使用更多这样的 LINQ 来使函数更加紧凑。

```
return (from actor in (from a in GamePlay.actors
                                   where a.CausingCollision == true && a.IsAlive
                                   select a)
                    where (actor.location.X > GamePlay.onScreenMinimum.X) && (actor.location.Y > GamePlay.onScreenMinimum.Y) && (actor.location.X < GamePlay.onScreenMaximum.X) && (actor.location.Y < GamePlay.onScreenMaximum.Y)
                    where actor != this
                    select new Vector2((int) actor.location.X, (int) actor.location.Y)).Any(actorfloor => (floored.X == actorfloor.X) && (floored.Y == actorfloor.Y)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T13:18:27.583

我不确定我是否理解这个问题，但总的来说，我认为使用 LINQ 总是一个更好的解决方案，而不是创建额外的循环和 if/else 调用。

仅供参考：您也可以使用 LINQ-Methodes 代替关键字，例如：

```
foreach(Actor actor in from a in GamePlay.actors
                           where a.causingCollision == true 
                           && a.isAlive
                           select a)
{
  //...
} 
```

是相同的：

```
foreach(Actor actor in GamePlay.actors.Where( a => a.causingCollision == true && a.isAlive))
{
  //...
} 
```

两种情况下的返回都是过滤的 IEnumerable。我个人的看法是这些方法更容易阅读和理解。在 Where(...) 中，您可以放置​​一个完整的 lambda 表达式来完全选择您想要的 Actor。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T13:25:20.343

LINQ 进行了相当优化，其输出与手动编写 fors 相同。顺便说一句，扩展方法更具可读性。您的示例将如下所示：

```
public virtual bool checkActorsForCollision(Vector2 toCheck)
{
    Vector2 floored = new Vector2((int)toCheck.X, (int)toCheck.Y);

    // skip if this actor doesn't collide
    if (!causingCollision)
    {
        return false;
    }

    return GamePlay.actors.Where( actor =>    
            (actor.causingCollision == true) 
            && actor.isAlive
            // ignore offscreen collisions, we don't care about them
            && (actor.location.X > GamePlay.onScreenMinimum.X) 
            && (actor.location.Y > GamePlay.onScreenMinimum.Y)          
            && (actor.location.X < GamePlay.onScreenMaximum.X) 
            && (actor.location.Y < GamePlay.onScreenMaximum.Y)
            // ignore collisions with self
            && (actor != this) )
        .Select( actor => new Vector2((int)actor.location.X, (int)actor.location.Y) )
        .Any( actorFloor => 
            (floored.X == actorfloor.X) 
            && (floored.Y == actorfloor.Y));
} 
```

如果您没有分析您的应用程序，则没有理由不出于“性能原因”使用 LINQ。

# javascript - 点击播放一段 mp3

> ID：14480436
> 
> 赞同：0
> 
> 时间：2013-01-23T13:05:46.623
> 
> 标签：javascript, html, google-chrome

我有许多按钮播放许多不同的声音 - 每个按钮在单击时播放不同的 mp3。示例代码：

```
<a onclick="this.firstChild.play()"><audio src="1.mp3"  ></audio>1</a> 
```

对于移动设备，我试图从同一个 mp3 文件中播放所有不同的声音，因此我可以预加载 1 个文件并获得更多即时体验。

因此，我需要设置单击时要播放的 mp3 的起点和终点。

如何使用音频 html5 或 javascript 做到这一点？仅使用 chrome 就足够了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2022-02-14T11:26:29.593

如果我的问题正确，您想同时或随时播放音频文件的不同时间戳

这是您可以使用的一个示例

```
<a onclick="this.firstChild.play()"><audio id="audio2" 
       preload="auto" 
       src="http://cld3097web.audiovideoweb.com/va90web25003/companions/Foundations%20of%20Rock/5.01.mp3#t=00:00:00" 
       >
</audio>Part 1
</a>
<a onclick="this.firstChild.play()"><audio id="audio2" 
       preload="auto" 
       src="http://cld3097web.audiovideoweb.com/va90web25003/companions/Foundations%20of%20Rock/5.01.mp3#t=00:00:56" >
</audio>Part 2
</a>
<a onclick="this.firstChild.play()"><audio id="audio2" 
       preload="auto" 
       src="http://cld3097web.audiovideoweb.com/va90web25003/companions/Foundations%20of%20Rock/5.01.mp3#t=00:01:00" >
</audio>Part 3
</a>
```

您也可以以秒为单位给出时间，而不是像时间戳一样

```
<a onclick="this.firstChild.play()"><audio id="audio2" 
       preload="auto" 
       src="http://cld3097web.audiovideoweb.com/va90web25003/companions/Foundations%20of%20Rock/5.01.mp3#t=0" 
       >
</audio>Part 1
</a>
<a onclick="this.firstChild.play()"><audio id="audio2" 
       preload="auto" 
       src="http://cld3097web.audiovideoweb.com/va90web25003/companions/Foundations%20of%20Rock/5.01.mp3#t=56" >
</audio>Part 2
</a>
<a onclick="this.firstChild.play()"><audio id="audio2" 
       preload="auto" 
       src="http://cld3097web.audiovideoweb.com/va90web25003/companions/Foundations%20of%20Rock/5.01.mp3#t60" >
</audio>Part 3
</a>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:12:48.033

我没有测试过这段代码，但这应该可以工作：

```
<a id="audioTag1"><audio src="1.mp3"  ></audio>1</a> 
```

```
var canPlay = false;
var audio = document.getElementsByTagName('audio')[0];

document.getElementById('audioTag1').addEventListener('click', function(){
    playAudio(15);
});

audio.addEventListener('canplay', function() { // listen for the `canplay`event, to make sure the file is loaded.
    canPlay = true; // Set a boolean to "true" once the audio has loaded.
});

function playAudio(time){
    audio.currentTime = time; // jump to 15 secs into the file
    audio.play(); // I'm not certain if this line is necessary.
} 
```

确保在事件侦听器中运行 JS 代码`onload`，以便在执行代码时加载音频标签。

# c# - 自定义 ConfigurationSection 默认布尔值

> ID：14480438
> 
> 赞同：3
> 
> 时间：2013-01-23T13:05:51.237
> 
> 标签：c#, .net

我创建了一个具有以下属性的自定义配置部分：

```
private const string UseMediaServerKey = "useMediaServer";
[ConfigurationProperty(UseMediaServerKey, IsRequired = false, DefaultValue = false)]
public bool UseMediaServer
{
    get { return bool.Parse(this[UseMediaServerKey] as string); }
    set { this[UseMediaServerKey] = value; }
} 
```

我的理解是，如果配置文件中未定义该属性，`DefaultValue`则应返回该属性。

但是，在上述情况下，a`ArgumentNullException`被抛出`bool.Parse(...)`意味着即使未定义配置属性，也会执行默认访问器。

当然，我可以将属性访问器更改为：

```
 private const string UseMediaServerKey = "useMediaServer";
    [ConfigurationProperty(UseMediaServerKey, IsRequired = false)]
    public bool UseMediaServer
    {
        get {
            bool result;
            if (bool.TryParse(this[UseMediaServerKey] as string, out result))
            {
                return result;
            }

            return false;
        }
        set { this[UseMediaServerKey] = value; }
    } 
```

但是，`DefaultValue`财产的意义何在？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T13:14:49.940

`this[UseMediaServerKey] as string`是`null`因为该值是 type `bool`，而不是`string`。您不必在自定义配置部分中进行任何字符串转换：一切都由框架为您处理。

将您的代码简化为：

```
public bool UseMediaServer
{
    get { return (bool) this[UseMediaServerKey]; }
    set { this[UseMediaServerKey] = value; }
} 
```

你完成了。如果配置文件中没有，`this[UserMediaServerKey]`将返回正确键入的内容。`DefaultValue`如果您不得不更改字符串转换过程，`TypeConverterAttribute`请在配置属性上添加一个。但这不是必需的。

# c - C 中的编译错误：不一致的类型声明/标识符的非法重新声明

> ID：14480450
> 
> 赞同：0
> 
> 时间：2013-01-23T13:06:23.583
> 
> 标签：c, unix, compilation, hp-ux

编译源代码时出现以下错误：

```
Compiling lib/netapi/joindomain.c
cc: "include/smb_ldap.h", line 33: error 1584: Inconsistent type declaration: "ber_tag_t".
cc: "include/smb_ldap.h", line 34: error 1713: Illegal redeclaration for identifier "ber_int_t".
The following command failed:
)
*** Error exit code 1 
```

标记错误的相应代码是：

```
if HAVE_LBER_H
#include <lber.h>
#if defined(HPUX) && !defined(_LBER_TYPES_H)
#ifndef ber_tag_t
typedef unsigned long ber_tag_t;
typedef int ber_int_t;
#endif
#endif 
```

我请求帮助了解此错误的根本原因。

提前致谢。

以下是我的机器和编译器详细信息供参考：

```
$  uname -a
HP-UX cifsvade B.11.31 U 9000/800 3751280844 unlimited-user license
$  which cc
/usr/bin/cc
$  ls -lrt /usr/bin/cc
lrwxr-xr-x   1 root       sys             17 Oct  8 17:45 /usr/bin/cc -> /opt/ansic/bin/cc
$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:36:25.033

lber.h 定义 ber_tag_t 和 ber_tag_t 如下：

```
 typedef impl_tag_t ber_tag_t;
    typedef impl_int_t ber_int_t; 
```

在您的代码中，您尝试重新定义它们，就是这种情况。一个条件

```
 #ifndef ber_tag_t 
```

除非您在某个地方定义了 ber_tag_t ，否则总是正确的

```
 #define ber_tag_t smth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:28:00.040

正如 oleg_g 向您暗示的那样，混合了预处理器命令 (#define) 和 c++ typedef

在解析器处理结果代码之前处理预处理器指令（#define 等）。当您 typedef ber_tag_t 时，预处理器命令将永远不会知道这一点，而是您需要 #define 一个变量来指示类型已定义。：

```
#if HAVE_LBER_H
#include <lber.h>
#if defined(HPUX) && !defined(_LBER_TYPES_H)
#ifndef DEFINED_BER_TAG_T
#define DEFINED_BER_TAG_T
typedef unsigned long ber_tag_t;
typedef int ber_int_t;
#endif
#endif 
```

澄清; 预处理器指令只能看到其他预处理器变量，因为此时您的代码尚未被解释。

编辑：我还应该提到，如果可能的话，以一种避免这种需要的方式布置代码可能是有益的。例如，使用单独的公共标头，其中包含和类型受包含保护等保护。

# asp.net-mvc-3 - 如何在 Spring.Net 应用程序上下文中添加 ASP.NET MVC 控制器？

> ID：14480455
> 
> 赞同：1
> 
> 时间：2013-01-23T13:06:37.470
> 
> 标签：asp.net-mvc-3, spring.net, griffin.mvccontrib

我正在使用 Spring.Net IOC Framework 为我的 ASP.NET MVC 应用程序创建一个插件系统。我已将控制器放在不同的程序集中，我需要将这些控制器动态添加到 Spring.Net 应用程序上下文中。

请指导我！

我正在尝试像下面的文章那样实现插件系统，但我想使用 Spring.Net 而不是 Autofac。

[http://www.codeproject.com/Articles/386674/ASP-NET-MVC-3-plug-in-architecture-using-Griffin-M](http://www.codeproject.com/Articles/386674/ASP-NET-MVC-3-plug-in-architecture-using-Griffin-M)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-26T09:25:40.157

我使用过 Spring.Net 并在其中使用 Application Context 访问了 Repository 对象试试这个

```
IApplicationContext ctx = ContextRegistry.GetContext();
            dynamic controller= ctx.GetObject("MyController"); 
```

其中 MyController 是您在 controller.xml 文件中定义的控制器的 ID

```
<object
   id="MyController "
   type="Swapeteria.Web.Controllers.ItemPostController, Swapeteria.Web"
   singleton="false">
        <constructor-arg name="repository" ref="ItemRepository" />
        <constructor-arg name="bookRepository" ref="BookRepository" />
        <constructor-arg name="authorrepository" ref="authorRepository" />
        <constructor-arg name="publisherRepository" ref="PublisherRepository" />
        <constructor-arg name="itemMapper" ref="itemMapper" />
    </object> 
```

# android - 在 Galaxy Nexus 和三星 S3 中未收到我的 Android 应用程序的推送通知

> ID：14480458
> 
> 赞同：3
> 
> 时间：2013-01-23T13:06:44.460
> 
> 标签：android, push-notification, google-cloud-messaging

我的 Android 应用程序已经存在于 Play 商店中。现在我已经使用 gcm 更新了带有推送通知的应用程序，因此在 5 台设备（HTC、Micromax、Samsung S3、Galaxy Nexus、Samsung Ace plus）中安装了来自 Play 商店的更新版本。

根据我们的逻辑，所有设备 ID 都存储在服务器端数据库中。这些 id 最终被发送到 GCM 服务器。现在发送推送通知时，我只在 HTC 和 Micromax 中接收。

其他 3 款设备（Samsung S3、Galaxy Nexus、Samsung Ace）有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:22:11.143

Android 3.1 或更高版本，在用户打开您的应用程序至少一次之前，您的应用程序不会收到任何广播。

[http://developer.android.com/about/versions/android-3.1.html#launchcontrols](http://developer.android.com/about/versions/android-3.1.html#launchcontrols)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:23:06.723

我不确定您的确切问题是什么，因为您没有提供任何类型的代码。

但请确保您的设备上的 DateTime DateTime 不应该是过去的。因为 GCM 无法同步到过去的 Datetime。您必须将其重置为当前日期时间。不确定，但可以尝试一下。可以解决你的问题。

# c - 为什么我的回文函数总是返回 1？

> ID：14480462
> 
> 赞同：1
> 
> 时间：2013-01-23T13:06:57.333
> 
> 标签：c

我正在为我的作业编写一个函数，该函数应该判断给定字符串是否为回文。虽然我什至在纸上用“otto”这个词尝试过，但我的程序总是返回 1。虽然这是一个很常见的问题，但我真的很想知道我做错了什么，而不是仅仅从这里复制一个解决方案。

```
int is_palindrom(const char* palin)
{
    int size = strlen(palin), i=0;
    for (i=0;i<=(size/2); ++i)
    {
        if(palin[i] != palin[(size - i -1)])
        {
            return 1;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:15:41.723

您的代码是正确的，但请注意，您*可能*有一个反转的逻辑表达式。*在不*相等`1`的情况下，当它是时，您将返回。这意味着您的函数与“标准”C 函数相反，其计算结果为.*`0``1``true`*

 *显然，你可以自由地使用你喜欢的任何值来表示你想要的任何东西。但是，如果其他人正在阅读您的代码，这很容易导致混淆。如果`bool`可用，您应该使用它；否则，您应该始终假设`1`为真和`0`假。

另外，请务必注意`is_palindrome`采用*字符串*而不是整数。

即你必须称它为`is_palindrome("767")`而*不是* `is_palindrome(767)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:16:11.583

您的代码在应该[返回 0](http://ideone.com/NxtGHT)时确实返回。我猜当您读取作为参数传递给函数的字符串时，字符串中附加了额外的字符，很可能是换行符。尝试调试应用程序或在函数中添加调试输出。例如打印字符串的长度和其中字符的 ascii 代码。

这是我用来验证它的代码：

```
#include <stdio.h>
#include <string.h>
int is_palindrom(const char* palin)
{
  int size = strlen(palin), i=0;
  for (i=0;i<=(size/2); ++i)
  {
    if(palin[i] != palin[(size - i -1)])
    {
      return 1;
    }
  }
  return 0;
} 

int main(void) {
  printf("%d", is_palindrom("otto"));
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:16:58.787

当你调用这个函数时，确保你的 (const char *) 最后有一个“\0”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:36:02.777

```
#include<stdio.h>
#include<conio.h>

int is_palindrom(const char* jj);

int main(char *args){

         int rr =   is_palindrom("otto");
         printf("rsult is %d", rr);
         getch();

}

int is_palindrom(const char* palin) 
    { 
        int size = strlen(palin), i=0; 
        for (i=0;i<=(size/2); ++i) 
        { 
            if(palin[i] != palin[(size - i -1)]) 
            { 
                return 1; 
            } 
        } 
        return 0; 
    } 
```

我使用上面的代码片段运行了您的代码，它对我来说工作正常。如果输入回文，则返回 0，如果输入的值不是回文，则返回 1。函数的主要部分是循环 `for (i=0;i<=(size/2); ++i)`，比较`if(palin[i] != palin[(size - i -1)])`循环从 0 开始，然后在条件 palin[0] element 和 palin[4-0-1] 即 palin[3] element first o 和 last o 在这种情况下是映射，然后发生增量`++i`，然后发生 palin[second] 和 palin[second-last] 元素的嵌套映射，因此您可以使用 `++i' 或 'i++'*

# rss - Orchard CMS 博客的默认 Rss 提要

> ID：14480463
> 
> 赞同：1
> 
> 时间：2013-01-23T13:06:59.220
> 
> 标签：rss, orchardcms

我正在尝试显示指向博客文章的 RSS 链接`Orchard 1.5`（应该很简单吧）

我觉得我一定在这里遗漏了一些东西：

[这里](http://docs.orchardproject.net/Documentation/Rss-atom)的文档似乎过时了？我在当前代码库中找不到`Html.RegisterFeed`或的任何实例。`Html.FeedLink``Orchard 1.5.1`

我可以看到`<link />`标签已插入`Header`页面的部分。

```
<link rel="alternate" type="application/rss+xml" title="News" href="/Riders/rss?containerid=85" shape-id="334"> 
```

我正在查看视图`Orchard.Core/Feeds/Views/Feeds.cshtml`，我可以看到

```
@Model.FeedManager.GetRegisteredLinks(Html) 
```

但我不知道如何让它在我的页面上呈现，最好是在第一边部分。

有人可以指出我正确的方向。

**例如**

我想放一些类似的东西

```
<a href="@Html.MyFeedUrl" class="rss">RSS feed</a> 
```

它会呈现

![在此处输入图像描述](../Images/4c4f85cccd94704d8f161c8d8b1e0b03.png)

# sip - H.264呼叫建立SDP参数协商

> ID：14480465
> 
> 赞同：2
> 
> 时间：2013-01-23T13:06:59.107
> 
> 标签：sip, h.264

我正在开发一个使用 H.264 编解码器进行视频数据包的视频通话应用程序。会话设置是使用良好的旧 SIP 完成的。作为一种安慰，我正在使用内置 H.264 编码器的 UVC 网络摄像头，该编码器适用于 H.264 基线配置文件（如果我没记错的话，这是网络摄像头的首选）。相机还支持各种分辨率。

我的问题是“是否可以在呼叫建立期间使用 SDP 参数或任何其他机制来协商特定的解决方案”？

我正在查看用于基于 H.264 的视频通话的 SDP 参数，但没有找到任何协商分辨率的参数？

谁能建议如何谈判该决议？

但首先真的可以协商分辨率参数吗？

如果不可能，那么我是否需要先解码接收到的帧，然后我才能检查接收到的帧的分辨率是多少？

任何帮助都非常受欢迎，并深表感谢。

问候，gs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T03:39:58.940

*   SDP 用于会话描述，不用于会话协商。
*   如果您使用的是 SIP，那么在 SDP 交换之后，您可以使用 sip "NEGOTIATE" 方法协商编解码器。

以下链接应该可以帮助您-

[http://www.hjp.at/doc/rfc/rfc4317.txt](http://www.hjp.at/doc/rfc/rfc4317.txt)

[http://www.ietf.org/mail-archive/web/sip/current/msg27863.html](http://www.ietf.org/mail-archive/web/sip/current/msg27863.html)

# node.js - MongoDB 和 node.js 中的构造函数/类（异步）

> ID：14480469
> 
> 赞同：0
> 
> 时间：2013-01-23T13:07:08.430
> 
> 标签：node.js, mongodb, coffeescript

我想使用类抽象某些 MongoDB 查询/文档。

基本上我认为方法是在某个地方（一个自己的类？）创建连接并在各种类中使用这个连接（池）。但是我将如何在代码方面做到这一点。例如，我不确定，当我使用 MongoDBConnectionClass 并在构造函数中初始化连接时，如何确保等待连接建立以继续在其他地方使用它。

我想我在这里做错了什么。这里有一个模式可以更好地理解我的意思

```
MongoDBConnection(Class?)
+---- Class1+ # eg. Book
+---- Class2+ # eg. Library
+---- Class3+ # eg. Dust
            |
            +-- Library1+ # eg. New Book Release
            +-- Library2+ # ...
            +-- Library3+ # ...
                        |
                        +-- App1
                        +-- App2
                        +-- App3 
```

哦，一个 CoffeScript 答案会很棒，但 JS 当然也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:24:31.687

我在我的教程中使用了这个模式（很快就会出来）

[https://github.com/christkv/tic-tac-toe-steps](https://github.com/christkv/tic-tac-toe-steps)

如果您查看模型和控制器，我将使用 db 对象包装实际功能。

# android - 将 AndroidManifest.xml 转换为 Package.appxmanifest

> ID：14480477
> 
> 赞同：1
> 
> 时间：2013-01-23T13:07:21.637
> 
> 标签：android, asp.net

我正在尝试将 android 应用程序的 AndroidManifest.xml 文件转换为 windows 8 的相应 Package.appxmanifest 文件。

AndroidManifest.xml 中有一个标签`<service>`，因此我已映射到

```
<Extension Category="windows.backgroundTasks">
    <BackgroundTasks>
        <Task Type="systemEvent" />
    </BackgroundTasks>
</Extension> 
```

但我的问题是

(i) 那么我应该添加哪种任务类型`Package.appxmanifest`？

（ii）有`<Extention>`这么多类别的标签。所以我应该`<Extention>`在Package.appxmanifest中添加带有类别的标签。？

(iii) xml 中有许多权限类型，因此最好添加标签，或者只有我应该`<capabilities>`在 Package.appxmanifest 中映射它。

# c# - 不同语言的 Dynamics CRM 2011 OptionSetValue

> ID：14480479
> 
> 赞同：2
> 
> 时间：2013-01-23T13:07:30.893
> 
> 标签：c#, dynamics-crm-2011, crm

有人可以帮我弄清楚如何使用 CRM 2011 SDK 为一个选项集的标签检索不同的语言吗？

我的任务如下：例如，我与德语有联系，那么我的 sdk 应该带回该语言的选项集值。有我联系一个英文国家，sdk应该把英文标签给我带回来等等..

获取值没问题：

```
int optSetValue = ((OptionSetValue)entity["optionsetFieldName"]).value 
```

但是我怎样才能得到正确语言的标签呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:26:47.330

您需要执行 a`RetrieveAttributeRequest`来获取`EnumAttributeMetadata`，然后根据语言代码查找正确的值：

```
string languageCode = germanLanguageCode; // Set
int optSetValue =  0; // Set
RetrieveAttributeRequest attributeRequest = new RetrieveAttributeRequest
{
    EntityLogicalName = entityLogicalName,
    LogicalName = attributeName,
    RetrieveAsIfPublished = true
};

var response = (RetrieveAttributeResponse)service.Execute(attributeRequest);
var optionList = ((EnumAttributeMetadata)response.AttributeMetadata).OptionSet.Options;

return optionList.GetFirst(o => o.Value == optSetValue).Label.LocalizedLabels.First(l => l.LanguageCode == languageCode).Label; 
```

或者，如果您的服务以德语用户身份运行，那么您可以通过以下方式访问德语文本`return optionList.GetFirst(o => o.Value == optSetValue).Label.UserLocalizedLabel.Label;`

我倾向于缓存元数据，而不是不断地访问 CRM 服务器来获取文本信息。但话又说回来，我在一个只有英语的组织中，不必担心人们使用什么语言......

## 评论的其他答案

`GetFirst()`只是一个标准的 Linq 方法。只要您在 using 语句中添加了 System.Linq 命名空间，任何 IEnumerable 都会拥有它。

德语位于[1031](http://www.science.co.il/language/locale-codes.asp)。虽然更正确的方法是查找用户的 UsersSetting.UILanguageId。我相信应该包含正确的代码，虽然我还没有测试过......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:20:41.113

要检索选定值的用户本地化选项标签，请尝试

```
string myoption;

if (!entity.FormattedValues.TryGetValue("optionsetFieldName", out myoption))
{
    myoption = "Not found";
} 
```

也可以使用 LINQ 查询FormattedValues `IList<KeyValuePair<string,string>>` **。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T22:30:05.017

```
string optionlabel =entity.FormattedValues["optionsetFieldName"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-26T13:44:15.160

为我工作的代码：

```
public static dynamic GetOptionSet(string entityName, string fieldName, int langId, OrganizationServiceProxy proxy)
{
    RetrieveEntityRequest retrieveDetails = new RetrieveEntityRequest();
    retrieveDetails.EntityFilters = EntityFilters.All;
    retrieveDetails.LogicalName = entityName;

    RetrieveEntityResponse retrieveEntityResponseObj = (RetrieveEntityResponse)proxy.Execute(retrieveDetails);
    EntityMetadata metadata = retrieveEntityResponseObj.EntityMetadata;
    PicklistAttributeMetadata picklistMetadata = metadata.Attributes.FirstOrDefault(attribute => String.Equals(attribute.LogicalName, fieldName, StringComparison.OrdinalIgnoreCase)) as PicklistAttributeMetadata;
    OptionSetMetadata options = picklistMetadata.OptionSet;
    var optionlist = (from o in options.Options
                          select new { Value = o.Value, Text = o.Label.LocalizedLabels.First(l => l.LanguageCode == langId).Label }).ToList();

    return optionlist;

} 
```

# html - mac硬盘上的html5本地存储在哪里？

> ID：14480486
> 
> 赞同：1
> 
> 时间：2013-01-23T13:07:44.907
> 
> 标签：html, local-storage

我在哪里可以找到我的 mac 磁盘上的 html5 本地存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:09:10.390

它应该在“站点”文件夹下您自己的本地用户文件夹中。

# objective-c - IOS：在更新“重复”的属性时合并两个 NSArray

> ID：14480488
> 
> 赞同：1
> 
> 时间：2013-01-23T13:07:50.093
> 
> 标签：objective-c, merge, comparison, nsarray, nspredicate

**编辑：巨大的编辑，很抱歉造成混乱！**

我目前正在开发一个应用程序，其中我使用两种不同的方法从 JSON WebService 获取 2 个数组。

在第一个数组中，我得到了本地库存。在第二个数组中，我得到了供应商库存。

虽然我认为图像会更好地解释：

![我的真棒应用图](../Images/4d07fa3cf6975d4788c1b7d64be2d1bc.png)

因此，Web 服务获取了许多项目。数组 1 包含来自本地库存的一些项目，数组 2 包含来自我们供应商的项目，并添加了描述等信息。我想合并两个数组，用供应商库存数组 2 中的项目描述更新我们本地 stock-array1 中的现有项目。

这是我正在努力实现的一个例子。所有产品都由唯一标识符属性（示例中未提及）标识，并且我已覆盖 isEqual 和 hash 来弥补这一点。如果一个产品有一个相似的 ID，它被认为是相同的。

```
**Product**

@property id *internalID;
@property id *externalID ;
@property id *localStock;
@property id *supplierStock;
@property id *image;
@property id *productInfo; 
```

现在`Webservice 1`返回三个产品：

**产品一**

```
*internalID = ABCDEF
*externalID = (null)
*localStock = 15
*supplierStock = (null)
*image = (null)
*productInfo = (null); 
```

**产品 2**

```
*internalID = GHIJK
*externalID = (null)
*localStock = 13
*supplierStock = (null)
*image = niceImage.png
*productInfo = @"This Product is Awesome!"; 
```

**产品 3**

```
*internalID = LMNOP
*externalID = (null)
*localStock = 7
*supplierStock = (null)
*image = (null)
*productInfo = (null); 
```

`Webservice 2`返回四个产品，其中两个也在数组 1 中：

**产品一**

```
 *internalID = (null)
    *externalID = 123456
    *localStock = (null)
    *supplierStock = 12
    *image = external_product1image.jpg
    *productInfo = @"This product is also Awesome and in both local stock and supplier stock!"; 
```

**产品 4**

```
 *internalID = (null)
    *externalID = 23456
    *localStock = (null)
    *supplierStock = 11
    *image = niceImage.png
    *productInfo = @"This Product is Awesome and only available from our supplier!"; 
```

**产品 3**

```
 *internalID = (null)
    *externalID = 78901
    *localStock = (null)
    *supplierStock = 7
    *image = external)supplierimage.jpg
    *productInfo = @"This product is also Awesome and in both local stock and supplier stock!"; 
```

然后`mergedArray`应该是这样的：

**产品一**

```
*internalID = ABCDEF
*externalID = 123456
*localStock = 15
*supplierStock = 12
*image = external_product1image.jpg
*productInfo = @"This product is also Awesome and in both local stock and supplier stock!"; 
```

//所以 Array 1 中的 Product 1 将其属性与 Array 2 中的 Product 1 合并

**产品 2**

```
*internalID = GHIJK
*externalID = (null)
*localStock = 13
*supplierStock = (null)
*image = niceImage.png
*productInfo = @"This Product is Awesome!"; 
```

**产品 3**

```
*internalID = LMNOP
*externalID = 78901
*localStock = 7
*supplierStock = 7
*image = external)supplierimage.jpg
*productInfo = @"This product is also Awesome and in both local stock and supplier stock!"; 
```

**产品 4**

```
*internalID = (null)
*externalID = 23456
*localStock = 13
*supplierStock = 11
*image = niceImage.png
*productInfo = @"This Product is Awesome and only available from our supplier!"; 
```

这是我使用的代码，但它似乎有时会以某种方式出现故障：

```
- (void) compareArrays:(id)sender metBreedte:(NSString *)breedte metHoogte:(NSString *)hoogte metDiameter:(NSString *)diameter
{
    NSMutableSet *getBandenSet = [NSMutableSet setWithArray:getBandenArray];      NSUInteger i = 0;

    while (i < [getBandenInfo1Array count]) {
        id getBandenInfo1Object = [getBandenInfo1Array objectAtIndex:i];
        if ([getBandenSet containsObject:getBandenInfo1Object])

        {

            BWBand *getBandenBand = [getBandenSet member:getBandenInfo1Object];

            BWBand *getBandenInfo1Band = getBandenInfo1Object;

            // Do stuff to the Banden (sync)
            getBandenBand.alternatievePrijs = getBandenInfo1Band.alternatievePrijs;
            getBandenBand.itemName = getBandenInfo1Band.itemName;
            getBandenBand.supplierStock = getBandenInfo1Band.supplierStock;
            getBandenBand.grossPrice = getBandenInfo1Band.grossPrice;
            getBandenBand.eancode = getBandenInfo1Band.eancode;
            getBandenBand.EMarked = getBandenInfo1Band.EMarked;
            getBandenBand.garagePrijs = getBandenInfo1Band.garagePrijs;
            getBandenBand.loadIndex = getBandenInfo1Band.loadIndex;
            getBandenBand.brand = getBandenInfo1Band.brand;
            getBandenBand.custPrice = getBandenInfo1Band.custPrice;
            getBandenBand.netPrice = getBandenInfo1Band.netPrice;
            getBandenBand.tyreLabel = getBandenInfo1Band.tyreLabel;
            getBandenBand.TyreLabelFuel = getBandenInfo1Band.TyreLabelFuel;
            getBandenBand.TyreLabelNoise = getBandenInfo1Band.TyreLabelNoise;
            getBandenBand.TyreLabelNoiseLevel = getBandenInfo1Band.TyreLabelNoiseLevel;
            getBandenBand.TyreLabelWet = getBandenInfo1Band.TyreLabelWet;
            getBandenBand.foto = getBandenInfo1Band.foto;
            NSMutableString *string1 = [NSMutableString stringWithString: getBandenBand.colorStock];
            NSString *newString = [string1 substringToIndex:[string1 length]-2];
            NSString *colorStock = [NSString stringWithFormat:@"%@-%@",newString,getBandenInfo1Band.supplierStock];
            getBandenBand.colorStock = colorStock;
           [getBandenSet removeObject:getBandenInfo1Object];
            [getBandenInfo1Array removeObjectIdenticalTo:getBandenInfo1Object];
        } else
        {i++;}

        mergedBandenArray = [NSMutableArray arrayWithArray:[getBandenArray arrayByAddingObjectsFromArray:getBandenInfo1Array]];
       [mergedBandenArray sortUsingDescriptors:
         [NSArray arrayWithObjects:
          [NSSortDescriptor sortDescriptorWithKey:@"colorStock" ascending:NO], [NSSortDescriptor sortDescriptorWithKey:@"brand" ascending:YES], nil]];} 
```

所有这些都可以使用 NSPredicates 完成吗？如果是这样，怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:47:41.743

以下算法不需要您为您的类覆盖`isEqual`和：`hash``Product`

*   首先根据`uniqueItemID`key升序对两个数组进行排序。
*   然后并行遍历两个数组，并将两个数组中的产品添加或合并到目标数组。

如果两个数组都已排序，则可以通过并行遍历两个数组的单个循环轻松找到匹配和不匹配的产品。

以下代码有望证明这一想法：

```
NSSortDescriptor *sortByID = [NSSortDescriptor sortDescriptorWithKey:@"uniqueItemID" ascending:YES];
NSArray *sorted1 = [array1 sortedArrayUsingDescriptors:@[sortByID]];
NSArray *sorted2 = [array2 sortedArrayUsingDescriptors:@[sortByID]];

NSUInteger i1 = 0, i2 = 0;
NSMutableArray *combined = [NSMutableArray array];
while (i1 < [sorted1 count] && i2 < [sorted2 count]) {
    Product *p1 = sorted1[i1];
    Product *p2 = sorted2[i2];
    switch ([p1.uniqueItemID compare:p2.uniqueItemID]) {
        case NSOrderedAscending:
            // p1 is in first array, but not in second:
            [combined addObject:p1];
            i1++;
            break;
        case NSOrderedDescending:
            // p2 is in second array, but not in first:
            [combined addObject:p2];
            i2++;
            break;
        case NSOrderedSame:
            // p1, p2 have same ID:
            ... update p1 with values from p2 ...
            [combined addObject:p1];
            i1++, i2++;
            break;
    }
}
// Add remaining products from first array:
while (i1 < [sorted1 count]) {
    [combined addObject:sorted1[i1]];
    i1++;
}
// Add remaining products from second array:
while (i2 < [sorted2 count]) {
    [combined addObject:sorted2[i2]];
    i2++;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T13:24:10.437

1）。合并两个数组：

```
NSMutableSet *set = [NSMutableSet setWithArray:array1];
[设置 addObjectsFromArray:array2];

NSArray *array = [设置所有对象];

```

2）。在 NSPredicates 的帮助下删除重复项：

[1\. 用谓词过滤乐趣](http://www.cocoanetics.com/2010/03/filtering-fun-with-predicates/)

[2\. 你好，NSPredicate](http://blog.parse.com/2013/01/14/hello-nspredicate/)

3）。要合并和删除重复项：

```
NSArray *array1, *array2;
MSMutableArray *result = [array1 mutableCopy];
for (array2 中的 id 对象)
{
  [结果删除对象：对象]；// 如果已经存在，则删除重复项。
  [结果添加对象：对象]；
}

```

# bean-validation - JSR-303 有时如何忽略对 bean 中特定字段的验证

> ID：14480489
> 
> 赞同：4
> 
> 时间：2013-01-23T13:07:53.180
> 
> 标签：bean-validation

我正在验证一个大 bean。它基于动态表单页面。正在验证的某些字段在表单上不可见，因此为空或为空。但我不希望验证不可见的字段。有时它们是可见的，我希望它们被验证，有时它们不可见，我不希望它们被验证。我首先采取了在提交之前从序列化表单中剥离这些字段的方法。但它仍然会验证缺失的字段，因为它们存在于带有验证标签的 bean 中。做我想做的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T17:27:55.253

一种可能的方法是使用验证组。您为不同的组定义不同的验证规则。之后，您可以仅为其中一个组或一组组调用验证器。

```
public class TestBean {

    @NotNull(groups= {Group1.class})
    @Size.List({
        @Size(min=1, groups= {Group1.class}),
        @Size(min=0, groups= {Group2.class})
    })
    private String test;
}

public interface Group1 { }
public interface Group2 { } 
```

然后您可以为这些组中的一个或多个调用验证器

```
Validator validator = ....;
Set<ConstraintViolation<Object>> constraintViolations = validator.validate(objectToValidate, Group1.class); 
```

有关验证组的更多信息，请参见[此处](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-usingvalidator-validationgroups)。

# c# - Web 用户控件获取父控件 ID？

> ID：14480491
> 
> 赞同：0
> 
> 时间：2013-01-23T13:08:01.097
> 
> 标签：c#, asp.net, user-controls, ascx

**澳交所**

```
<dx:ASPxGridViewExporter ID="ASPxGridViewExporter1" runat="server">
</dx:ASPxGridViewExporter>

<dx:ASPxButton ID="buttonSaveAs" runat="server" ToolTip="Export and save" Style="vertical-align: middle;"
                OnClick="buttonSaveAs_Click" Text="Save" Width="51px" /> 
```

**包括以上 ASCX 的 ASPX**

```
<div>
    //ASCX
</div>
<div>
    <dx:ASPxPivotGrid ID="ASPxPivotGridElectricMeterReadings" runat="server" ClientIDMode="AutoID"
        DataSourceID="SqlDataSourceElectricMeterReadings" EnableCallBacks="False" Width="1000px">
    </dx:ASPxPivotGrid>
</div> 
```

**ASCX.cs**

```
protected void buttonSaveAs_Click(object sender, EventArgs e)
{
    // I want to get pivotGridId from ASPX
    ASPxGridViewExporter1.ASPxPivotGridID = ASPX-PivotGrid-ID
} 
```

如何将 ASPX 控件 ID 传递给 ASCX button_click_event？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:14:47.650

只需在 ascx 代码后面添加一个属性，然后在 aspx 初始化事件中填充它。

**ASCX.cs**

```
public string PivotGridID { get; set; } 
```

**ASPX.cs**

```
if (!IsPostBack)
{
    exportPivotGrid.PivotGridID = ASPxPivotGridElectricMeterReadings.ID;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T04:25:39.153

尝试，在页面加载事件（用户控件）中声明父控件，并且必须在回发事件之外。

```
 (this.Parent.Parent).FindControl("ErrLabel") as Label; 
```

# javascript - Django中的JavaScript确认对话框

> ID：14480492
> 
> 赞同：0
> 
> 时间：2013-01-23T13:08:02.413
> 
> 标签：javascript, jquery, django

我有一个 Django 表单。我需要一个关于表单提交的确认/取消对话框。A 有一个从 jQuery 发送 POST 数据的想法……但它是一种使用 javascript 对话框作为中间件的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T07:30:06.367

根据您的需要在 Html 中添加波纹管代码

```
<form><input type="submit" value="Submit" id="confirm"/> </form> 
```

和确认对话框的 jQuery 代码

```
<script>
    jQuery("#confirm").click(function(){
        $("<div></div>").appendTo('body')
           .html('<div><h3> write your message for confirm dialog</h3></div>')
           .dialog({
                title: "Confotm Dialog" ,
                width:500, height:300,
                modal:true,
                resizable: false, 
                show: { effect: 'drop', direction: "left" }, 
                hide:{effect:'blind'}

                buttons: {
                    Yes: function() {
                          jQuery.ajax({
                              type:"POST", //post data
                              data:{'key':key}, //if you want to send any data to view 
                              url:'/get_viewerModal/' // your url that u write in action in form tag
                          }).done(function(result){
                               alert("am done") //this will executes after your view executed  
                          })
                     },
                    Cancel: function() {
                        $( this ).dialog( "close" );
                    }
               }
           });
    });
<script> 
```

在这里你需要 ajax 知识，而且它很容易使用，我相信你这样做:)

# eclipse - 颠覆性：仅提交选定的文本 (BPQ)

> ID：14480495
> 
> 赞同：1
> 
> 时间：2013-01-23T13:08:06.537
> 
> 标签：eclipse, svn, subversive

如果我有一个任务（即 HT-4949311）并且我

*   修复错误
*   并更改 javadoc

...在同一个文件中。

我喜欢用两条不同的评论来区分这两个变化：

*   “HT-4949311：错误修复。”
*   “HT-4949311：javadoc。”

... 我需要：

1.  还原 javadoc-change，
2.  提交错误修正，
3.  再次编写javadoc-change，
4.  提交 javadoc 更改。

有更好的方法吗？

还是有什么功能可以让我只简单地提交选定的行？

# mobile - 在没有 HTML5 移动浏览器支持的情况下是否可以使用 Sencha Touch 2.1.1？

> ID：14480496
> 
> 赞同：0
> 
> 时间：2013-01-23T13:08:07.707
> 
> 标签：mobile, extjs, sencha-touch

移动设备浏览器不支持 html5。将在该设备上使用 sencha touch 2.1.1 应用程序的基本功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:15:24.533

Sencha touch 支持 Android、iOS、2 BlackBerry 设备（以及即将推出的 WP8） 不支持旧设备/浏览器并且无法正常工作。

[在这里](http://www.sencha.com/products/touch/features/)，您将找到支持的设备列表。

如果您的设备运行基于 webkit 的浏览器，您就有可能大部分功能都可以使用。否则我会升级您的设备或寻求其他解决方案

# c# - 带有分页的 ASP.Net GridView 奇怪的编辑行为

> ID：14480498
> 
> 赞同：1
> 
> 时间：2013-01-23T13:08:25.333
> 
> 标签：c#, asp.net, gridview, webforms, objectdatasource

我有一个 ObjectDataSource

```
<asp:ObjectDataSource SelectCountMethod="GetCount" EnablePaging="true" SortParameterName="sortExpression" ID="customersDS" runat="server" SelectMethod="GetList" TypeName="expenses.Classes.ExpenseFactory" DeleteMethod="Delete" UpdateMethod="Update"  >
    <SelectParameters>
        <asp:ControlParameter ControlID="IdHidden" PropertyName="Value" Name="userId" />   
        <asp:Parameter DbType='Boolean' DefaultValue='false' Name='isExpense' />      
         <asp:Parameter DbType='Boolean' DefaultValue='false' Name='containRepeated' />  
         <asp:ControlParameter DbType="Int32" DefaultValue="" ControlID="CategorySelector2" Name="categoryId" />        
          <asp:ControlParameter DbType="DateTime" DefaultValue="" ControlID="FromSpentDateCalendarBox" Name="from" />  
          <asp:ControlParameter DbType="DateTime" DefaultValue="" ControlID="ToSpentDateCalendarBox" Name="to" />  
    </SelectParameters>
    <UpdateParameters>
     <asp:ControlParameter ControlID="IdHidden" PropertyName="Value" Name="userId" />   
        <asp:Parameter DbType='Boolean' DefaultValue='false' Name='isExpense' />   
    </UpdateParameters>
    </asp:ObjectDataSource> 
```

连接到 GridView

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    AllowPaging="True" AllowSorting="True"
            DataSourceID="customersDS" CssClass="gtable sortable width100" DataKeyNames="Id"
            AlternatingRowStyle-CssClass="odd" CellPadding="0" GridLines="None" OnPreRender="PreRender"
        OnRowDataBound="GridView1_RowDataBound" 
           > 
```

在 CommandField 中使用编辑和删除按钮

```
<asp:CommandField ItemStyle-Width="75px" HeaderStyle-Font-Bold=true HeaderText="<%$ Resources:Default, Actions %>"  EditImageUrl="~/img/edit.png" ButtonType='Image'  ShowEditButton="True" UpdateImageUrl="~/img/save.gif" CancelImageUrl="~/img/cancel.png" >                                                                      
   <ControlStyle CssClass="my_edit_buttons" />                             
</asp:CommandField> 
```

一切都位于 UpdatePanel 内部。GridView 和 ObjectDataSource 支持和使用分页。分页工作没有任何问题。问题是编辑。当我单击第一页上的编辑时，一切都按预期工作。当我在第二页或其他页面（大于一个）上单击第 n 项上的编辑时，GridView 切换到第一页并选择第 n 项进行编辑。

（更具体的例子：我切换到第二页，我在该页面上选择要编辑的项目编号 2，GridView 切换到第一页并选择要编辑的项目编号 2（在第一页上））。

任何想法可能是什么问题？

**编辑：**

PreRender（设置 GridView 标头）：

```
 protected void PreRender(object sender, EventArgs e)
    {
        try
        {
            GridView1.UseAccessibleHeader = false;
            GridView1.HeaderRow.TableSection = TableRowSection.TableHeader;
        }
        catch
        {

        }
    } 
```

RowDataBound（将删除按钮更改为带有配置提示的自定义按钮|：

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            // we are using a html anchor and a hidden asp:button for the delete
            HtmlAnchor linkDelete = (HtmlAnchor) e.Row.FindControl("linkDelete");
            ImageButton btnDelete = (ImageButton) e.Row.FindControl("btnDelete");

            string prompt = Resources.Default.DeletePrompt;
            linkDelete.Attributes["onclick"] = string.Format(prompt, btnDelete.ClientID);

            Expense expense = e.Row.DataItem as Expense;
            if (expense!=null)
            {
                if (expense.SpentDate>DateTime.Now)
                {
                    e.Row.CssClass = "future";   
                }
            }

            e.Row.Cells[1].CssClass = e.Row.Cells[4].CssClass = "red";               
        } 
```

# javascript - jQuery event.keyCode 未检测到字母数字

> ID：14480500
> 
> 赞同：1
> 
> 时间：2013-01-23T13:08:43.570
> 
> 标签：javascript, jquery, keyboard, jquery-events

我编写了一个脚本来检测用户单击了哪个键并根据该键（如果它的字母数字）采取行动，但到目前为止它没有工作并且没有错误。

```
 jQuery(document).ready(function() { 
    $("#my_field").keydown(function(event) { 
        var additional = new Array(8,9,13,27,35,36,37,38,39,46); 
        var numbers = new Array(48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,144); 
        var letters = new Array(65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90); 
        var AllowedKeyCode = 
            (jQuery.inArray(event.keyCode, additional) >= 0) 
                || 
            (jQuery.inArray(event.keyCode, letters) >= 0) 
                || 
            ((!event.shiftKey) && (jQuery.inArray(event.keyCode, numbers) >= 0)) 
                || 
            ((event.ctrlKey) && (event.keyCode == 65 || event.keyCode == 67 || event.keyCode == 86)); 
        if (AllowedKeyCode === false) {event.preventDefault();} 
    }); 
}); 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:09:52.353

Javascript 中数组的理想语法是：

```
var additional = [8,9,13,27,35,36,37,38,39,46]; 
```

相对于：

```
var additional = new Array(8,9,13,27,35,36,37,38,39,46); 
```

问题可能是您没有退货操作。从您发布的内容中查看非常棘手。

尝试改变：

```
event.preventDefault(); 
```

到

```
return false; 
```

# javascript - 使用 Javascript/JQuery 检索 JSON GET 数据

> ID：14480502
> 
> 赞同：6
> 
> 时间：2013-01-23T13:08:49.500
> 
> 标签：javascript, jquery, html, json, get

**我想做的是**从在线 Web 服务中检索 JSON 数据，该服务在 MySQL 数据库中搜索并找到某个字符串，并使用 Javascript 在 HTML 页面上显示它。

**我正在努力的**实际上是显示结果数据。

我的 HTML 页面的相关区域如下所示：

```
<form onSubmit="results()">
    <fieldset>
        <label for="area">First digits of postal code:</label>
        <input name="area" type="text" maxlength="4" placeholder="AB12" required />
        <input type="submit" value="Search" name="search" />
    </fieldset>
</form>

<script type="text/javascript" src="jquery/jquery.min.js"></script>
<script type="text/javascript" src="cordova-2.3.0.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">

function results(){
    $.ajax({
        url: 'http://www.foobar.com/cp/index.php?area=AB12',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data, status){
            $.each(data, function(i,item){
                var place = '<h1>'+item.location+'</h1>'
                + '<p>'+item.id+'</br>';

                output.append(place);
            });
        },
        error: function(){
            output.text('There was an error loading the data.');
        }
    });
};
</script>

<div id="place">
<h3>Places near your location</h3>
</div> 
```

GET 数据的页面是[http://www.foobar.com/cp/index.php](http://www.foobar.com/cp/index.php)，带有搜索变量“area”。[测试样本是 ?area=AB12](http://www.foobar.com/cp/index.php?area=AB12)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:25:08.173

该服务似乎没有正确地将 JSON 对象包装在括号中，因此它不能用作 JSONP。

见：[http ://www.entertainmentcocktail.com/cp/index.php?area=AB12&jsoncallback=TEST](http://www.entertainmentcocktail.com/cp/index.php?area=AB12&jsoncallback=TEST)

它返回：

```
TEST[{"id":"5","name":"The Red Lion", ... ,"confirmed":"0"}] 
```

虽然它**应该**返回：

```
TEST([{"id":"5","name":"The Red Lion", ... ,"confirmed":"0"}]); 
```

您将无法使用它，因为**它不是有效的 JSONP**。

## 更新：

从评论中回答更多信息 - 如果您控制服务器端脚本，请尝试更改：

```
while($row = mysql_fetch_assoc($result)) { $records[] = $row; }
echo $_GET['jsoncallback'] . json_encode($records); 
```

到：

```
while($row = mysql_fetch_assoc($result)) { $records[] = $row; }
echo $_GET['jsoncallback'] . '(' . json_encode($records) . ');'; 
```

看看这是否有效。

## 更新 2：

回答另一条评论。你真的初始化了`output`变量吗？例如，开头是这样的：

```
var output = $('#place').append('<div/>'); 
```

你真的调用你的`results`函数吗？它必须被调用：

```
results(); 
```

或在某处注册为事件处理程序，使用 jQuery 方式：

```
$('form').submit(results); 
```

但然后添加：

```
return false; 
```

到`results`函数的末尾，以防止页面被重新加载。

请参阅此演示： http: [//jsbin.com/uziyek/1/edit](http://jsbin.com/uziyek/1/edit) - 它似乎有效。

## 另一个问题：

您的代码似乎还有另一个问题，area=AB12 参数被硬编码到您的 URL 中。相反，您应该做的是从表单中获取值并将其发送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:31:06.563

您错误地实现了 JSONP。您需要生成一个函数调用，即响应不应该`foo(<json here>);`是`foo<json here>`。

修复很简单：

```
echo $_GET['jsoncallback'] . '(' . json_encode($records) . ');'; 
```

另一个问题是您没有阻止表单提交，即当您提交表单时，页面会刷新。你必须防止这种情况。更好地将事件处理程序与 jQuery 绑定，并且不要使用内联事件处理程序：

```
<form id="myForm"> 
```

和

```
$(function() {
    $('#myForm').submit(function(event) {
        event.preventDefault(); // <-- prevent form submission
        // Ajax call here
    });
}); 
```

[**演示**](http://jsfiddle.net/fkling/AKEPX/)

# jquery - Jquery post 仅检查变量。怎么做才对？

> ID：14480509
> 
> 赞同：0
> 
> 时间：2013-01-23T13:09:15.730
> 
> 标签：jquery, post, checkbox, checked

我有这个 HTML 代码：

```
<form name="allcats">
<p class='catslist'><label><input type='checkbox' name='cat1' id='cat1' value='1'  /> AAAAAAA</label></p>
<p class='catslist'><label><input type='checkbox' name='cat2' id='cat2' value='2'  /> BBBBBB</label></p>
<p class='catslist'><label><input type='checkbox' name='cat3' id='cat3' value='3'  /> CCCCCC</label></p>
<p class='catslist'><label><input type='checkbox' name='cat4' id='cat4' value='4'  /> DDDDDDD</label></p>
<p class='catslist'><label><input type='checkbox' name='cat5' id='cat5' value='5'  /> EEEEEEEE</label></p>

<input type="hidden" name="book_id" value="12" />     <br />
<input name="catsadd" id="catsadd" type="button" value="Add catategories" onclick="check();"/>
</form> 
```

我的 jQuery 代码是：

```
function check(){

$.post('post__categories.php', { HERE MUST BE THE VARIABLES AND VALUES OF CHECKED checkboxes like ... cat1: allcats.cat1.valu, cat5: allcats.cat5.value},

function(output){
 $('#result').hide();
 $('#result').html(output).fadeIn("slow");

 });
 } 
```

我的目标是发送以发布我检查的变量，然后我的 PHP 代码将完成它的工作。

但构造必须像 variable: `myform.variable.value`。

如何通过 jQuery 仅获取选中的框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:12:36.280

首先，给您的表单一个 ID，以便更容易定位：

```
<form name="allcats" id="allcats">
<p class='catslist'><label><input type='checkbox' name='cat1' id='cat1' value='1'  /> AAAAAAA</label></p>
<p class='catslist'><label><input type='checkbox' name='cat2' id='cat2' value='2'  /> BBBBBB</label></p>
<p class='catslist'><label><input type='checkbox' name='cat3' id='cat3' value='3'  /> CCCCCC</label></p>
<p class='catslist'><label><input type='checkbox' name='cat4' id='cat4' value='4'  /> DDDDDDD</label></p>
<p class='catslist'><label><input type='checkbox' name='cat5' id='cat5' value='5'  /> EEEEEEEE</label></p>

<input type="hidden" name="book_id" value="12" />     <br />
<input name="catsadd" id="catsadd" type="button" value="Add catategories" onclick="check();"/>
</form> 
```

然后，您需要序列化请求中的表单数据：

```
$.post('post__categories.php', { $("#allcats").serialize()}); 
```

# php - laravel 中的关系和刀片

> ID：14480510
> 
> 赞同：9
> 
> 时间：2013-01-23T13:09:19.320
> 
> 标签：php, mysql, laravel, eloquent, blade

我有 3 个表，如下所述。

```
Table 1(user): 
id    username   password  Name Age

Table 2(tasks):
id  task_name  description

Table 3(logs) 
id user_id task_id date hours 
```

**表关系：**

```
user has_many logs
task has_many logs

logs belongs_to user 
logs belongs_to  task 
```

我想要实现的是获取包含用户名、任务名称、日期和时间的日志。

**控制器：**

```
return View::make('log.index')
            ->with('logs',log::all()); 
```

**刀片模板**

```
@foreach($logs as $log)
             <tr>
                <td>{{$log->id}}</td>
                <td>{{$log->users()->name}}</td>
                <td>{{$log->tasks()->name}}</td>
            <tr>
@endforeach 
```

但无法从相应的表中获取用户名称和任务名称。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-09-24T13:49:58.187

更好的方法是在模型中定义逆 hasMany 关系，如此[处所述](http://laravel.com/docs/4.2/eloquent#relationships)

因此，在您的日志模型中，您可能需要定义：

```
class Log extends Eloquent {
    protected $table = "logs";

    public function user(){
         return $this->belongsTo('User');
    }
    public function task(){
         return $this->belongsTo('Task');
    }
} 
```

然后在您看来，您可以使用：

```
$log->user()->first()->name 
```

甚至更好，通过使用动态属性：

```
$log->user->name 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T17:12:43.010

$log->users() 和 $log->tasks() 返回一个查询对象。下面，每个调用都返回与调用 $log->users()->get() 和 $log->tasks()->get() 相同的结果。因为关系是多对多的，所以您需要遍历 $log->users 和 $log->tasks 来检索每条记录。

```
@foreach($logs as $log)
         <tr>
            <td>{{$log->id}}</td>
            <td>
                @foreach($log->users as $user)
                {{$user->name}},
                @endforeach
            </td>
            <td>
                @foreach($log->tasks as $task)
                {{$task->name}},
                @endforeach
            </td>
        <tr>
@endforeach 
```

如果您希望将特定用户/任务附加到日志，则必须构建查询。

```
@foreach($logs as $log)
         <tr>
            <td>{{$log->id}}</td>
            <td>{{$log->users()->where('id', '=', $userID)->first()->name}} </td>
            <td>{{$log->tasks()->where('id', '=', $taskID)->first()->name}} </td>
        <tr>
@endforeach 
```

# c# - C# 泛型：仅将一种类型定义为泛型

> ID：14480515
> 
> 赞同：1
> 
> 时间：2013-01-23T13:09:57.047
> 
> 标签：c#, generics

我有一个类，它将包装一个字典以对其执行一些操作。我正在尝试像这样实例化它：

```
class DescriptorList<K, Descriptor>
{
     <some code>
} 
```

`Descriptor`是我实现的一个类，但由于某种原因，编译器无法识别它并认为它是一个通用关键字（如“T”）。如何让编译器识别我的类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:15:00.790

如果您只希望键在包装类型中是通用的，则不需要在类声明中为该值添加类型描述符。您只需要在声明要包装的 Dictionary 实例时指定值类型（描述符）。例如：

```
class DescriptorList<K>
{
   private Dictionary<K, Descriptor> wrapped = new Dictionary<K, Descriptor>() ;

   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:11:57.763

如果您希望字典具有固定类型的值和不同类型的键，您可以像这样实现您的类。

```
class Descriptor
{}

class DescriptorList<K> : Dictionary<K, Descriptor>
{
     <some code>
} 
```

或者，如果您希望字典具有固定类型的键和不同类型的值，则可以使用它。

```
class Descriptor
{}

class DescriptorList<K> : Dictionary<Descriptor, K>
{
     <some code>
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:16:08.313

> 将*包装*字典

```
class DescriptorList<K>
{
   private readonly Dictionary<K, Descriptor> wrappedDictionary;

   //   <some code>
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:14:47.723

您当前的实现无法实现您想要做的事情。您可以执行以下操作（尽管这只是一种解决方法，取决于您要达到的目标）；

```
public class DescriptorList<K, V> where V : Descriptor
{        
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T13:14:51.207

从语法上讲，`Descriptor`这里***只是***一个通用参数，例如`T`. 如果您不希望它成为泛型的一部分，只需使用：

```
class DescriptiorList<K> { ... } 
```

# google-apps-script - 将消息（不是线程）移动到存档

> ID：14480520
> 
> 赞同：2
> 
> 时间：2013-01-23T13:10:24.490
> 
> 标签：google-apps-script

**背景** 用户倾向于在 Gmail 中按下“删除”按钮（或在 Outlook 中通过谷歌应用同步），但我们希望归档所有邮件（谷歌每 30 天清除一次垃圾）。

**到目前为止** 的解决方案 以下脚本每小时在触发器上运行一次，将垃圾中的所有线程移动到存档中。

```
function archiveTrash() {
var threads = GmailApp.getTrashThreads(0, 100);
for (var i = 0; i < threads.length; i++) {
threads[i].moveToArchive();
}
} 
```

**问题**用户报告消息正在从他们的收件箱中消失。

**可能的原因**我*相信*这是正在发生的事情：用户正在处理一个消息线程并删除线程中的一些消息（用户通常使用 Outlook，因此他们单独查看每条消息）。但是，线程中的其他消息仍保留在用户的收件箱中。然后 getTrashThreads 正在挑选至少包含一条已删除邮件的线程，并且脚本将整个线程移动到存档，包括收件箱中的消息。

**解决方案？**这就是我卡住的地方。如何仅归档已删除的消息，而不是整个线程？有没有办法完全停止 gmail 将消息分组到线程中？我对正在发生的事情是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:55:36.397

检查线程是否`isInInbox()`. 如果不是，则归档该线程。如果是，请归档，然后`moveToInbox()`.

编辑：我错过了你问题的最后一部分。我不知道存档特定邮件的方法，因此它们不会在 Outlook 收件箱中弹出。您可以在 Gmail 中关闭对话视图，但我不知道这对线程有什么影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:02:33.817

不是那么简单但可能的解决方案：

设置用户 ToArchive@YourDomain.com

遍历已删除的邮件检查消息 ID，而不是线程，针对已归档消息的索引（稍后将详细介绍索引）

将不在索引中的消息转发到 ToArcive+messageId@YourDomain.com（@ 之前最多可以有 64 个字符，所以应该没问题）。

遍历 ToArchive 中的消息，从 To: 解析消息 id 并添加到索引，然后标记为已读。

在 ToArchive 中归档已读消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:35:26.580

Gmail 仅支持在线程级别存档，而不是在邮件级别存档，但它允许删除单个邮件。我认为您的用例不受支持。

# php - 在 cakePHP 中修改 Form->input() 数据

> ID：14480529
> 
> 赞同：0
> 
> 时间：2013-01-23T13:11:09.387
> 
> 标签：php, cakephp

事件模型的数据库表具有以下字段：

用户 ID、名称、标题

在事件添加视图中，要求用户插入名称、小时和分钟，如下所示：

```
 echo $this->Form->input('hours');
    echo $this->Form->input('minutes');
    echo $this->Form->input('name'); 
```

现在名称显然会按应有的方式存储，但是当我想连接用户插入的小时和分钟并将它们存储到数据库的“标题”字段中时，就会出现问题。

关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:34:37.223

使用模型的 beforeSave 函数添加您喜欢的任何字段。在这种情况下，正在注入一个标题

在事件.php

```
public function beforeSave($options=array()){
  parent::beforeSave($options);
  $this->data['Event']['title'] = $this->data['Event']['hours'].$this->data['Event']['minutes'];
  //do other stuff
  return true;
} 
```

# gwt - GWT原生拖拽：如何识别被拖拽对象

> ID：14480535
> 
> 赞同：0
> 
> 时间：2013-01-23T13:11:34.127
> 
> 标签：gwt, drag-and-drop

我按照此处给出的说明进行操作：[Drag and Drop in GWT 2.4](https://stackoverflow.com/questions/7381138/drag-and-drop-in-gwt-2-4)

它运作良好，但我现在想在许多要传输的对象之间进行选择。如何确定拖动的是哪个对象？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:42:48.217

我会做以下事情：

1）创建一个允许拖动对象的地图（您的示例中的标签）

```
HashMap <String, Label> draggableWidgetsMap = new HashMap<String, Label>();

draggableWidgetsMap.add("key1", widget1);
...
draggableWidgetsMap.add("keyN", widgetN); 
```

2) 然后为每个小部件应用 dragStart 事件处理程序，例如`widget1`：

```
 widget1.addDomHandler(new DragStartHandler() {
            @Override
            public void onDragStart(DragStartEvent event) {
                event.setData("widgetKey", "key1");
            }
        }, DragStartEvent.getType()); 
```

3）然后您可以在 DragOver 事件处理程序中检查现在拖动的小部件：

```
 widget1.addDomHandler(new DragOverHandler() {
                @Override
                public void onDragOver(DragOverEvent event) {
                    String widgetKey = event.getDataTransfer().getData("widgetKey");
                    if (widgetKey != null && widgetKey.length() > 0){
                       if (draggableWidgetsMap.containsKey(widgetKey)){
                          // Print out Label's text to see which one is dragged
                          System.out.println("Dragged label has text: \" " + draggableWidgetsMap.get(widgetKey).getText() + "\"")
                          // do something relevant with this Label
                       }
                    }

                }
            }, DragOverEvent.getType()); 
```

当然，我会遍历所有小部件以将两个处理程序应用于您将要使其可拖动的小部件。

# php - 将另一个网站的 RSS 提要放入我的网站

> ID：14480538
> 
> 赞同：2
> 
> 时间：2013-01-23T13:11:38.410
> 
> 标签：php, html, rss

> **可能重复：**
> [如何显示来自其他站点的 RSS 提要](https://stackoverflow.com/questions/10615635/how-to-display-rss-feeds-from-other-sites)

**我想要什么：**我想在我的网站上提供“新闻提要”。此提要将显示来自新闻网站的更新新闻。我想要的只是我网站上一个小滚动框中最后三个“新闻帖子”的标题、日期和基本描述。

**我可以使用什么：** 我想从中获取新闻的新闻网站有一个 RSS 源 ( [http://www.wthr.com/category/23903/local-news?clienttype=rss](http://www.wthr.com/category/23903/local-news?clienttype=rss) )。

**我该怎么做呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:14:08.223

如果您启用了 url-file-access，只需使用

```
$result=file_get_contents("http://www.wthr.com/category/23903/local-news?clienttype=rss"); 
```

获取保存在 $result 中的 URL 的内容之后您要做的就是解析 $result 中的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:14:44.557

只需将此小部件添加到 ypur 页面。 [https://www.rssinclude.com/](https://www.rssinclude.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:18:28.150

你可以使用谷歌API。请找到下面给出的网址..

[用于 Rss 提要的 Google API](http://code.google.com/apis/ajax/playground/#load_feed)

# iphone - 应用程序在 iCloud 的 addPersistentStoreWithType 上停止

> ID：14480539
> 
> 赞同：2
> 
> 时间：2013-01-23T13:11:38.937
> 
> 标签：iphone, ios, objective-c, core-data, icloud

我的persistentStoreCoordinator 中有以下代码。没有 iCloud 部分，它工作正常。对于 iCloud，它在 addPersistentStoreWithType 方法上停止。没有错误，它只是停止并且不会继续。

有什么想法吗？

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSURL *storeURL = [NSURL fileURLWithPath:STORE_PATH];

    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    NSMutableDictionary *options = [NSMutableDictionary dictionary];
    [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
    [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

        NSFileManager *fileManager = [NSFileManager defaultManager];

        NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];
        NSLog(@"icloud: %@", iCloud);

        if (iCloud) {

            NSString *iCloudLogsDirectoryName = @"Logs";
            NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

            //Create logs directory, in case it doesn't exist
            if([fileManager fileExistsAtPath:[iCloudLogsPath path]] == NO) {
                NSLog(@"logs directory doesn't exist");
                NSError *fileSystemError;
                [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]
                       withIntermediateDirectories:YES
                                        attributes:nil
                                             error:&fileSystemError];
                if(fileSystemError != nil) {
                    NSLog(@"Error creating logs directory %@", fileSystemError);
                }
            }

            NSString *iCloudEnabledAppID = @"app id removed from stackoverflow";

            [options setObject:iCloudEnabledAppID            forKey:NSPersistentStoreUbiquitousContentNameKey];
            [options setObject:iCloudLogsPath                forKey:NSPersistentStoreUbiquitousContentURLKey];
            NSLog(@"logs path: %@", iCloudLogsPath);
        }

    [_persistentStoreCoordinator lock];

    NSError *error;

    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                                   configuration:nil
                                                             URL:storeURL
                                                         options:options
                                                           error:&error]) {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    else {
        NSLog(@"done adding persistent store");
    }

    [_persistentStoreCoordinator unlock];

    dispatch_async(dispatch_get_main_queue(), ^{
        [[NSNotificationCenter defaultCenter] postNotificationName:@"SomethingChanged" object:self userInfo:nil];
        [self.delegate contextWasSetupInManager:self];
    });

    });

    return _persistentStoreCoordinator;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:28:47.520

That's common with iCloud. Apple advises you to put it on a background queue since that call may block. It blocks because that's where Core Data actually makes its connection to the iCloud server and starts downloading any new data that's available. The call doesn't continue until it's finished. If there's any significant amount of data to download, you may wait a while.

Sometimes it takes a while for no readily apparent reason. It's flaky like that.

Ultimately what you're seeing is pretty much the way things are with iCloud right now. File a bug or two and hope that things improve.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T03:51:15.733

我刚刚在我的一台测试设备（运行 iOS 6.1 的 iPhone 5）上体验到了这一点。恢复出厂设置，然后从手机的当前备份恢复修复它。

我不确定这是不是解释，但通过设备设置 > iCloud > 存储和备份删除应用程序的 iCloud 普遍存在容器数据似乎存在问题。这可能会使设备处于普遍存在容器的一些残余物仍然存在且无法移除的状态。在设备上进行完全擦除和恢复似乎可以修复它。

我发现了一篇看起来与此问题相关的旧帖子（[http://stackmonthly.com/2011/11/core-data](http://stackmonthly.com/2011/11/core-data)），以及 OpenRadar 上的此条目（[http://openradar.appspot.com/10440734](http://openradar.appspot.com/10440734)）。我搞砸了几个小时，直到我擦除并恢复了设备，它运行良好：addPersistentStoreWithType 几乎立即完成。

展望未来，我将尝试使用 WWDC 2012 示例应用程序 SharedCoreData（会话 227）中的 nukeAndPave 方法清除存储，而不是从设置中手动删除存储。希望这将防止这种情况再次发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T20:58:40.023

我不完全确定为什么会出现这些问题，但通过重置手机设置，我在解决此类问题方面取得了很大成功：

设置 > 通用 > 重置 > 重置所有设置

# javascript - Ajax 请求在远程服务器中有效，但在本地服务器中无效（使用 Codeigniter）

> ID：14480547
> 
> 赞同：1
> 
> 时间：2013-01-23T13:11:55.193
> 
> 标签：javascript, php, jquery, ajax, codeigniter

我有一个 Web 应用程序，它使用 Codeigniter-php 代码向服务器发出 Ajax 请求。Ajax 请求在本地服务器中正常工作，但在应用程序托管在远程服务器中时无法正常工作。控制台错误是：

```
XMLHttpRequest cannot load http://localhost/CI-example/index.php/control/controlHome. Origin http://www.page.com is not allowed by Access-Control-Allow-Origin. 
```

令人惊讶的是，请求是在服务器中发出的，而不是响应中的。

我用于 Ajax 请求的 URL 是：

```
AJAX_URL = "http://localhost/CI-example/site/index.php/control/controlHome"; 
```

但是，我也尝试过：

```
AJAX_URL = "http://www.page.com/CI-example/site/index.php/control/controlHome"; 
```

并捕获下一个错误：

```
POST http://www.page.com/webdom/site/index.php/control/controlHome 500 (Internal Server Error) 
```

我能怎么做？

编辑：www.page.com 是一个子域。子域用于ajax请求时需要做一些配置吗？

文件夹组织是：

```
/CI-example
---/application/controllers/control.php
---/system
---/site/js/ajaxRequest.js 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T19:28:33.443

当我到达这里时，当您向服务器发送 ajax 请求而不是返回时`500 (Internal Server Error)`。我确定错误来自服务器端，可能有以下原因 -

1.  如果代码中的一切都很好，那么您的要求可能与`base_url`您的要求不同。是的，这可能会导致问题，例如，如果您托管了您的 Web 应用程序并且您`base_url`是`www.mysite.com`并且您正在请求`mysite.com`.
2.  下一个原因可能是，您已经在 Windows 或任何区分大小写的系统中开发了项目，但是当您上传到任何类似 linux 的服务器时，每个文件名都将区分大小写。例如，假设您给定的模型文件名是`MyModel.php`，但是当您加载模型时，它会生成类似 Unable to find the specific class 之类的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T07:01:47.077

[http://www.page.com](http://www.page.com)的 url上的响应表明页面执行期间出现了问题。你的 PHP 错误日志应该可以帮助你找到什么。

添加该行`ini_set('display_errors', 1)`可能会将错误返回到错误处理程序中的 ajax 请求。不要忘记在使用后删除该行，您不希望它在生产代码中存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:14:32.483

您不能使用 AJAX 向其他域发出 HTTP POST 请求，除非该页面允许您使用名为“Access-Control-Allow-Origin”的特殊标头来执行此操作。

localhost 与 page.com 不同，这就是为什么这不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T03:17:30.180

尝试这个，

```
http://localhost/CI-example/index.php/control/controlHome 
```

代替

```
http://localhost/CI-example/site/index.php/control/controlHome 
```

在您的 ajax 网址中。从您的文件夹结构来看，您的 URL 中无需包含“站点”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-05T09:33:50.077

第二个错误是：`500 (Internal Server Error)`

这意味着服务器端出现错误 - 不是跨域策略问题。
这可能是您的 PHP 脚本执行中的错误。

检查你的错误日志（例如：如果你使用标准的 LAMP 堆栈，错误日志应该在某处`/var/log/apache2/`）

# joomla - joomla中的互斥

> ID：14480553
> 
> 赞同：1
> 
> 时间：2013-01-23T13:12:15.403
> 
> 标签：joomla, mutual-exclusion

我使用以下方法为 joomla 创建了一个扩展：

```
$id=$database->insertid(); 
```

我刚刚介绍过，如果两个用户登录到该站点，将在数据库中一起执行两条记录，然后此语句将在两种情况下返回相同的值。在 php 中，您可以通过事务解决此问题。

在 joomla 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:01:14.757

如果您正在使用一个扩展 JTable 的表，那么请确保您包含了可选的检出功能。这必须意味着添加几个字段，例如内容表中的内容。这将防止两个人同时编辑同一行，从而产生一种竞争条件，其中一个人将丢失他们的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:06:38.710

@iacoposk8 你是对的，在非常落后的情况下可能是这样。这段时间尝试在您的 sql 查询或任何地方添加当前登录的用户 ID，以免造成任何冲突。我希望你明白我想说的。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T08:04:03.523

请注意，返回最后插入 id 的 php 和 joomla 函数都依赖于 mysql 实现，而 mysql 返回在**当前打开的连接**上插入的最后一个 id，因此并发不是问题

# recursion - 尝试将 std::ostream 流操作符与 QString 一起使用时的神秘行为

> ID：14480556
> 
> 赞同：0
> 
> 时间：2013-01-23T13:12:18.633
> 
> 标签：recursion, streaming, ostream, qstring

我不小心尝试使用 std::ostream 流式传输 QString。但是，编译（Windows SDK 7.1）成功，但发出警告：

```
Warning:C4717: 'operator<<' : recursive on all control paths, function will cause runtime stack overflow 
```

最后，我想知道为什么会出现递归。这是一小段要重现的代码。注意：如果没有重载的构造函数，编译器会引发预期的错误（未找到采用“QString”类型的右手操作数的运算符）。

```
#include <iostream>
#include <QString>

class CTest
{
  public:
    CTest(QString str) {}
    friend std::ostream & operator <<(std::ostream & out, const CTest & cTest)
    {
      out << "std::string";
      out << QString("HelloWorld");

      return out;
    }
};

int main(int argc, char *argv[])
{ 
  CTest t("testing");
  std::cout << t;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T14:11:53.710

由于 QString 没有定义运算符 <<，因此行

```
out << QString("HelloWorld"); 
```

被隐式转换为

```
out << CTest(QString("HelloWorld")); 
```

（最接近的重载，由于构造函数 CTest(QString str)），它无限次地递归调用 operator <<。

# php - 如何安全地将 SQL 脚本存储在另一个表中

> ID：14480557
> 
> 赞同：0
> 
> 时间：2013-01-23T13:12:22.520
> 
> 标签：php, mysql

我将文本存储在代表内容的数据库中，该内容稍后将用于生成 SQL 脚本，用于将来的查询。我知道这很危险，但是，需要此功能并且不知道如何获得它。

当第一次存储用户提供的内容时，我使用了一个准备语句，但是，感觉这给人一种错误的安全感。当我稍后检索该值并在以后的查询中使用它时，任何危险的用户输入都会以其原始形式返回。

一种策略是对使用内容的每个未来查询，对准备好的语句、pdo::quote() 等采取适当的操作。请注意，在下面的示例中，我没有这样做，而是直接在pdo::query()，我担心有一天我会忘记这样做。

相反，我正在考虑在从 $_POST 获取数据时立即采取行动。有没有办法一劳永逸地删除任何潜在的内容，然后毫无顾虑地存储和检索它？如果不是，从 $_POST 接收的可接受值是整数、日期、日期时间或数字，我想我可以确保数据属于这些数据类型之一。

所以，重申......

1.  我应该如何最好地存储以后用作 SQL 以供将来查询的内容？
2.  如何永久删除可用作 SQL 注入的内容，而不仅仅是转义它？

谢谢

```
$user_input=$_POST['suspect_user_input']; //Acceptable values are an integer, a date, a datetime, or a number
$sql='INSERT INTO table1 (id,user_input) VALUES(123,?)';
$stmt = db::db()->prepare($sql);
$stmt->execute(array($user_input));
unset($user_input);
...
...
$sql='SELECT user_input FROM table1 WHERE id=123';
$stmt = db::db()->query($sql);
$user_input=$stmt->fetchColumn();
$partial_select_statement='SELECT * FROM '.$user_input;
$sql='INSERT INTO table2 (id,partial_select_statement) VALUES(321,'.$partial_select_statement.')';
$stmt = db::db()->exec($sql);
unset($partial_select_statement);
...
...
$sql='SELECT partial_select_statement FROM table2 WHERE id=321';
$stmt = db::db()->query($sql);
$partial_select_statement=$stmt->fetchColumn();
$new_sql=$partial_select_statement.' WHERE foo=bar';
$stmt = db::db()->query($new_sql);
$rs=$stmt->fetch(); 
```

# magento - Magento：分层导航中的文本框而不是多选

> ID：14480558
> 
> 赞同：0
> 
> 时间：2013-01-23T13:12:28.237
> 
> 标签：magento, attributes, multi-select, layered-navigation

Magento 中是否有可能具有多选属性，为此我会在分层导航中使用文本框而不是显示多选中的所有项目？

我有一个属性，我将有数百个选项，并且需要在分层导航中使用它。

当客户使用无效值时，应显示错误。

* * *

编辑：在 FlorinelChis 的帮助下，我在 filter.phtml 中有以下代码：

```
<ol>
<?php foreach ($this->getItems() as $_item): ?>
  <?php
  $attributeModel = $this->getAttributeModel();    
  $attribute_code =  $attributeModel->getAttributeCode();
  ?>
    <li>
      <?php if ($attribute_code != 'available_zip'): ?>
        <?php if ($_item->getCount() > 0): ?>
        <a href="<?php echo $this->urlEscape($_item->getUrl()) ?>"><?php echo $_item->getLabel() ?></a>
        <?php else: echo $_item->getLabel() ?>
        <?php endif; ?>
        <?php if ($this->shouldDisplayProductCount()): ?>
        (<?php echo $_item->getCount() ?>)
        <?php endif; ?>
      <?php endif; ?>
    </li>
<?php endforeach ?>
</ol>
  <?php
    if ($attribute_code == 'available_zip'): 
          $cat =  Mage::registry('current_category')->getUrlPath() ;
          $url = Mage::getBaseUrl();
          /*$sendUrl = $this->urlEscape($_item->getUrl()).'+'.$url.$cat.'?'.$attribute_code.'='.$_item->getValue();*/
        echo '<form action="" method="get">';
        echo '<input type="text" size="5" maxlength="5" name="'.$attribute_code.'" />';
        echo '<button type="submit">OK</button>';
        echo '</form>';
  endif; ?> 
```

我现在还有一件事：如何发送带有属性 id 而不是值的表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:38:11.500

首先，让我们看看 Magento 如何在左侧导航中显示过滤器

1）启用模板路径提示： ![Magento 启用模板路径提示](../Images/a5e980cfd8203022fd0510169ff74fa3.png)

结果如下：

![magento 分层导航过滤器](../Images/17a50e7bd1e9f80904cc0e05d1600595.png)

2）我们看一下`app/design/frontend/base/default/template/catalog/layer/filter.phtml`（你应该把这个文件复制到你的主题文件夹结构中）

3) 块（模板文件中的 $this 是扩展的 Mage_Catalog_Block_Layer_Filter_Attribute 的一个实例`Mage_Catalog_Block_Layer_Filter_Abstract`）

4）您可以看到在`Mage_Catalog_Block_Layer_Filter_Abstract`getName() 方法中存在，因此您可以依靠此函数来识别何时显示属性。不！标签可以更改，您的代码将不再有用。回到我们的模板文件，可以得到attribute_code（靠谱）

```
//$this is instance of Mage_Catalog_Block_Layer_Filter_Attribute 
$attributeModel = $this->getAttributeModel();    
$attribute_code =  $attributeModel->getAttributeCode(); 
```

5) 在您的模板上，您可以根据属性代码进行检查，因此您可以使用文本区域而不是巨大的列表显示标准列表或自定义 html 代码。

# c++ - Lambda 捕获列表和复制

> ID：14480559
> 
> 赞同：3
> 
> 时间：2013-01-23T13:12:35.343
> 
> 标签：c++, c++11, lambda

我有一个简单的代码：

```
#include <iostream>
#include <functional>

struct Copy
{
    Copy(){}
    Copy(const Copy&)
    {
        std::cout << "Copied!\n";
    }
};

int main() 
{
    Copy copy;
    std::function<void()> func = [=]{(void)copy;};
    return 0;
} 
```

它调用了 copy-ctor 2 次，我只想拥有它一次。我知道我可以在这个简化的示例中使用 auto 但我需要将其存储起来以供以后使用，因此 auto 不是选项。我的问题是：有没有办法用**=** capture list 存储 lambda 并且只有一个捕获对象的副本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:25:06.963

有两个副本：一个复制`copy`到 lambda 中，另一个在 lambda（它有一个`Copy`成员）被复制到`std::function`.

如果你想要一个副本和一个移动，你需要使`Copy`对象是可移动的：

```
#include <iostream>
#include <functional>

struct Copy
{
    Copy(){}
    Copy(const Copy&)
    {
        std::cout << "Copied!\n";
    }
    Copy(Copy&&)
    {
        std::cout << "Moved!\n";
    }
};
//Prints:
//Copied!
//Moved!
int main()
{
    Copy copy;
    std::function<void()> func = [=]{(void)copy;};
    return 0;
} 
```

# jquery - Google Maps / Jquery / Tabs - 无法读取未定义的属性 __e3_

> ID：14480563
> 
> 赞同：-1
> 
> 时间：2013-01-23T13:12:40.837
> 
> 标签：jquery, google-maps

我正在创建 Google Maps Mashup。在我尝试将 JQuery 选项卡传递到我的信息窗口之前，一切似乎都运行良好。基本上，我正在做的是：

1.  创建地图
2.  复选框的 Onclick 事件
3.  创建标记
4.  创建信息窗口
5.  调用自定义函数为信息窗口生成 HTML（在这个自定义函数中，我给 HTML 元素一个唯一的名称）
6.  然后我尝试调用 JQuery 函数来启动选项卡

这就是问题出现的地方。我收到 javascript 错误“无法读取未定义的属性 _ *e3* ”。我确实尝试在创建信息窗口后调用自定义函数，但这没有帮助（尽管这是出现 JS 问题的地方）

我的代码如下：

```
var map;
        var mouseInfowindow;
        var infowindow;
        var bounds;
        var infoWindow = new google.maps.InfoWindow;
        var markers = [];

        function initialize() {
            var myOptions = {
                center: new google.maps.LatLng(-33.924868, 18.424055),
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                streetViewControl: true,
                zoomControl: true,
                panControl: true,
                mapTypeControl: true,
                zoom: 12,
                zoomControlOptions: { 'style': google.maps.ZoomControlStyle.LARGE, 'position': google.maps.ControlPosition.RIGHT_BOTTOM },
                panControlOptions: { 'style': google.maps.ZoomControlStyle.LARGE, 'position': google.maps.ControlPosition.RIGHT_BOTTOM },
                mapTypeControlOptions: { 'style': google.maps.MapTypeControlStyle.DROPDOWN_MENU, 'position': google.maps.ControlPosition.RIGHT_BOTTOM }
            };

            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            devcs = [];

            for (var i = 0; i < unitsArr.length; i++) {
                var unit = unitsArr[i];
                var marker = createMarker(unit[0], unit[1], unit[2], unit[3], unit[4], unit[5]);

                devcs[i] = marker;
                mymarker = marker;

                myLat = unit[2];
                myLng = unit[3];
            }

            //ShowClock();
        }

        function createMarker(a, b, c, d, e, f, g, h , i, j) 
        {

            // Hide the Marker and InfoWindow if the checkbox was unchecked
            if (j.checked == false)
            {
               hideMarker(a);
            } 
            else
            {
                // If the marker was created previously, simply show it (i.e. do not recreate it)
                if (show(a) == '0')
                {
                    // Create new marker that has not already been added to the page
                    var location = new google.maps.LatLng(c, d);
                    var marker = new google.maps.Marker({
                        position: location,
                        icon: e,
                        animation: google.maps.Animation.DROP,
                        map: map,
                        id: a
                        });

                    marker.setTitle(b);
                    map.panTo(location);
                    markers.push(marker);

                    google.maps.event.addListener(marker, 'click', function() {
                        if(infowindow) {
                            infowindow.close();
                        }   

                        var contentString = buildInfoWindowContent(a, b, c, d, e, f);
                        infoWindow.setContent(htmlEscape(contentString));
                        infoWindow.open(map,marker);

                        google.maps.event.addListener(infowindow, 'domready', function () {
                            $("#tab-panel-1234").tabs();
                        });

                    });
                }
             }
        }

        function buildInfoWindowContent(a, b, c, d, e, f)
        {

            var returnString = '<div class="infobox-wrapper">' + 
                               '     <div class="container_12" id="infobox" style="height:240px;overflow-y:auto;">' + 
                               '         <div class="grid_12">' + 
                               '             <div class="block-border" id="tab-panel-1234" style="width:610px;">' + 
                               '                 <div class="block-header">' + 
                               '                     <h1 id="MainTabTitle">' + b + '</h1>' + 
                               '                     <ul class="tabs">' + 
                               '                         <li><a href="#tab-1" id="TabOneHeader">Current</a></li>' + 
                               '                         <li><a href="#tab-2" id="TabTwoHeader">Trails</a></li>' + 
                               '                         <li><a href="#tab-3" id="TabThreeHeader">Download</a></li>' +
                               '                     </ul>' +
                               '                 </div>' +
                               '                 <div class="block-content tab-container" style="padding-top:10px; padding-bottom:10px;">' + 
                               '                     <div id="tab-1" class="tab-content">' + 
                                                        f + 
                               '                     </div>' + 
                               '                     <div id="tab-2" class="tab-content">' + 
                               '                        <table style="width:100%;" cellpadding="4" cellspacing="0">' + 
                               '                          <tr>' + 
                               '                              <td></td>' + 
                               '                              <td></td>' + 
                               '                          </tr>' + 
                               '                          <tr>' + 
                               '                              <td></td>' + 
                               '                              <td></td>' + 
                               '                          </tr>' + 
                               '                        </table>' + 
                               '                     </div>' + 
                               '                     <div id="tab-3" class="tab-content">' + 
                               '                         <p>' + 
                               '                         </p>' + 
                               '                     </div>' + 
                               '                 </div>' + 
                               '             </div>' + 
                               '         </div>' + 
                               '     </div>' + 
                               ' </div> ' ;

                return returnString;

        } 
```

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:32:03.613

有一个错字，标记的**w**必须是大写的：

```
google.maps.event.addListener(infowindow, 'domready',....
//--------------------------------^ 
```

# wordpress - 如何在 Wordpress 中列出这两个类别的常见帖子？

> ID：14480569
> 
> 赞同：0
> 
> 时间：2013-01-23T13:13:01.837
> 
> 标签：wordpress

我有一个标题类别..我在所有类别页面的侧边栏小部件中使用此类别。

我想要这个，当我在一个类别（例如：Internet 类别）中时，我的标题小部件列表 Headline 和 Current Cat（例如：Internet 类别）常见最后 5 个帖子

示例图片：[链接](http://content.screencast.com/users/genxer/folders/Question%20Screenshot/media/7ccac66b-e92f-49c6-b5e4-27d70fc9fce1/question_5.jpg)

我想列出常见的帖子标题和当前类别

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:59:46.347

你的问题很小，但我认为这就是你想要的。

```
$args = array(
  'category__and' => array($cat1,$cat2),
  'posts_per_page' => 5
);
$common = new WP_Query($args); 
```

您需要[`WP_Query`](http://codex.wordpress.org/Class_Reference/WP_Query)在此行上传递您想要的类别的类别 ID `'category__and' => array($cat1,$cat2)`：. 这应该要求帖子同时属于这两个类别。您可能需要添加其他键/值来`$args`微调结果。请参阅[法典页面](http://codex.wordpress.org/Class_Reference/WP_Query)。

# android - 如何使用 ADT 工具将我的应用程序安装为系统应用程序

> ID：14480571
> 
> 赞同：-4
> 
> 时间：2013-01-23T13:13:03.950
> 
> 标签：android

如何使用 ADT 工具将我的应用程序安装为系统应用程序？

我应该改变一些部分吗？

你能一步一步地给出答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:18:56.350

您可以使用 Push 命令将您的 Apk 发送到系统目录

```
"adb push myApk.apk /system/app 
```

但你会得到一个错误

```
Not enough space left 
```

虽然会有一些空间，但这背后的原因是这只能在有根设备上才能访问“/system/”目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:25:17.023

从命令行安装：

```
adb install YourApp.apk 
```

在 Eclipse 中： 1\. 右键或双击您的项目 2\. 选择 Run as... 3\. Android 应用程序 4\. 如果出现选择模拟器实例的对话框 - 选择您的目标模拟器

文档：http: [//developer.android.com/tools/help/adb.html](http://developer.android.com/tools/help/adb.html)

# r - 如何处理时间、距离和速度？

> ID：14480575
> 
> 赞同：5
> 
> 时间：2013-01-23T03:34:40.553
> 
> 标签：r, time-series

我正在通过分析自行车比赛的结果来学习 R，但我遇到了时间数据问题（一个人完成比赛花了多少时间）。

时间数据的格式为“HH:MM:SS”。

我尝试将其转换为 posixct 但它向其中添加了一个日期组件。我也尝试了 chron 包，但它不会让我将数字除以时间对象

我想做的一件事是使用这段时间计算平均速度，所以我需要能够将距离除以时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:30:51.280

该包`chron`有处理时间的类，使用的功能是，等待它，`times()`. 这是一个使用典型时间进行标准马拉松比赛的示例：

```
library(chron)
tms <- c("2:06:00", "3:34:30", "4:12:59")
x <- times(tms) 
```

你现在有一个`times`对象，代表一天的一小部分。

```
str(x)
Class 'times'  atomic [1:3] 0.0875 0.149 0.1757
  ..- attr(*, "format")= chr "h:m:s" 
```

您可以执行速度计算，但您需要使用 将类从转换`dates`为数字`as.numeric`。

```
dist <- 42.2
as.numeric(dist/x/24)
[1] 20.09524 11.80420 10.00856 
```

你有它：以公里/小时为单位的速度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T13:35:37.527

我会使用`POSIXct`你迄今为止在基本 R 和附加包中获得最强大支持的那个。

每当我使用与日期无关的日内数据时，我只需添加一个基准日期，例如当年的 1 月 1 日。对于所有的比较、差异等，这都会消失。

还需要注意 `as.numeric()`的是：`POSIXct`变量可以让您恢复到正常数字（自纪元以来的秒数.亚秒），这对于算术和您需要存储（在没有日期时间的数据库中）或转移到另一个系统或语言时都很方便. 每个人都有浮点数和（小数）秒，因为纪元很容易。 `POSIXct`为您提供格式化、序列、差异、绘图等方面的额外好处...

这是一个小例子：

```
R> txt <- c("08:09:10", "09:10:11", "10:11:12", "11:12:13")
R> times <- as.POSIXct(paste("2013-01-01", txt))
R> times
[1] "2013-01-01 08:09:10 CST" "2013-01-01 09:10:11 CST" 
+   "2013-01-01 10:11:12 CST" "2013-01-01 11:12:13 CST"
R> times - times[1]
Time differences in secs
[1]     0  3661  7322 10983
attr(,"tzone")
[1] ""
R> as.numeric(times - times[1])
[1]     0  3661  7322 10983
R> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-23T19:31:36.653

你看到的不是真正的时间，而是经过的时间。有经过时间的数据类型。在基础 R 中，`difftime`该类执行此操作。

```
tms <- c("2:06:00", "3:34:30", "4:12:59", "08:09:10",
         "09:10:11", "10:11:12", "11:12:13")

ta <- as.difftime(tms) 
```

显示为

```
> ta
Time differences in hours
[1]  2.100000  3.575000  4.216389  8.152778  9.169722 10.186667 11.203611
attr(,"tzone")
[1] ""
> format(ta)
[1] " 2.100000 hours" " 3.575000 hours" " 4.216389 hours" " 8.152778 hours" " 9.169722 hours"
[6] "10.186667 hours" "11.203611 hours" 
```

您也可以通过转换为数字来进行数学运算。

```
> 42.2/as.numeric(ta)
[1] 20.095238 11.804196 10.008564  5.176150  4.602102  4.142670  3.766643 
```

该`lubridate`包还具有处理经过时间的类型，特别是`duration`.

```
library("lubridate")
ti <- as.duration(as.difftime(tms)) 
```

显示为

```
> ti
[1] 7560s (~2.1 hours)    12870s (~3.58 hours)  15179s (~4.22 hours)  29350s (~8.15 hours) 
[5] 33011s (~9.17 hours)  36672s (~10.19 hours) 40333s (~11.2 hours) 
```

并且您可以在转换为数字后使用 is 进行数学运算（这里是秒而不是小时）

```
> 42.2/as.numeric(ti)
[1] 0.005582011 0.003278943 0.002780157 0.001437819 0.001278362 0.001150742 0.001046290 
```

# escaping - 在 Cygwin/MSYS 中转义 Windows 风格的 /arg

> ID：14480578
> 
> 赞同：1
> 
> 时间：2013-01-23T13:13:21.057
> 
> 标签：escaping, cygwin, msys

我需要从 MSYS 环境中执行 Visual Studio 的 lib.exe，但例如“/WX /NOLOGO”之类的参数会自动替换为“C:/dev/MinGW/msys/1.0/WX”。

如何停用该行为？我尝试了单引号/双引号，甚至`lib `echo /WX` ...`没有解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T00:46:30.310

有时您可以使用`-switch`idiom 代替`/switch`, 例如

```
attrib +h -s 
```

代替

```
attrib +h /s 
```

[**参考**](http://github.com/svnpenn/a/blob/master/baby-cygwin.sh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-21T21:07:04.930

使用双斜杠：

```
lib //WX //NOLOGO 
```

# assembly - 操作系统何时修改段寄存器？

> ID：14480579
> 
> 赞同：5
> 
> 时间：2013-01-23T13:13:28.833
> 
> 标签：assembly, x86, kernel

在x86架构中，有SS、CS、DS、FS、GS等段寄存器。

我知道这些 16 位寄存器指示 LDT、GDT 条目（作为段选择器）和 MMU 引用这个（GDT、LDT）来计算段基数 + 偏移值。并检查权限等。

我很好奇的是：谁根据什么填写段寄存器内容？内核调度程序？

当应用程序更改段寄存器值本身时会发生什么？我知道只有 CS 不能更改，因为它具有当前 CPU 的 CPL。但可以更改其他寄存器（SS，DS ...）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T01:04:37.960

> 谁根据什么填写段寄存器内容？？（内核调度器？？）

引导加载程序可以。ISR 和异常处理程序可以。系统调用处理程序可以。调度程序会。其他一些部分可能需要。假定寄存器是私有的，并且必须在各种上下文切换期间保存和恢复。而且，当然，它们也需要在之前的某个时间点进行初始化。

基于需要在这些寄存器中的内容。它们的值在操作系统的不同部分和不同程序之间并不是普遍共享的。

> 当应用程序更改它自己的段寄存器值时会发生什么？我知道只有 CS 不能更改，因为它具有当前 CPU 的 CPL。但可以更改其他寄存器（SS，DS ...）。

发生什么了？它要么成功更改它，要么导致异常（通常是#GP），然后发生异常处理程序所做的任何事情，或者，如果没有异常处理程序或它有问题，则发生三重故障、CPU 重置，并且可能会重新启动整个计算机。

如果您以某种方式知道可以在当前特权级别上加载哪些其他内容，则可以更改任何段寄存器。如果您的程序处于第 3 级，并且操作系统为其设置了两个 DPL=3 的代码段，则程序可以将其中任何一个用于 CS 寄存器。如果您不知道这一点，则更有可能使程序崩溃。

> 我想知道 x86 段寄存器的详细信息。

给自己一份副本并阅读：

英特尔® 64 和 IA-32 架构软件开发人员手册组合卷：1、2A、2B、3A 和 3B。

您可以通过相关章节（内存管理、中断/异常处理、任务切换）或搜索特定寄存器（例如 CS 或 SS 或 DS）或查看特定指令的描述和伪代码。

对于这个模糊的问题，你不会得到任何更准确的答案。

# phabricator - 如何在 Phabricator 中要求多次批准才能登陆修订版？

> ID：14480581
> 
> 赞同：6
> 
> 时间：2013-01-23T13:13:38.110
> 
> 标签：phabricator

例如：

*   我希望所有审阅者（最初指定或后来添加的）在更改被接受之前批准更改。
*   我想指定需要批准的审阅者和可选批准的其他一些审阅者。
*   我想批准更改，但同时添加另一个审阅者，该审阅者也需要在更改被接受之前批准更改。
*   我希望项目 A 中的所有修订都需要指定列表中的至少两个人才能被接受。

可以在 UI 中配置这种控件吗？在conf文件中？提交修订时？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T16:17:29.213

我刚刚发现这种事情目前在 Phabricator 中是不可能的，这里有一张公开的票，上面有一些关于它的评论：[https](https://secure.phabricator.com/T731) ://secure.phabricator.com/T731 （需要登录）。

# jquery - jquery数据表在重绘后无法选择行

> ID：14480583
> 
> 赞同：5
> 
> 时间：2013-01-23T13:13:56.480
> 
> 标签：jquery, datatables

我正在使用 jquery 数据表插件在 jquery UI 对话框中显示一个表。下面是我调用来绘制表格的函数。

```
function listPtCharges(filter){
var chgTable;
chgTable =
  $('#chargeTable').dataTable({
    "bJQueryUI": true,
    "bDestroy": true,    
    "sDom": 'tT',
    "bSort": false,
    "bAutoWidth": false,
    "sAjaxSource": "/ajax/ptchglist.php",
    "sAjaxDataProp": "Records",
    "fnServerData": function ( sSource, aoData, fnCallback ) {
      aoData.push( { "name": "acctno", "value": $("#curAcctno").val() } );
      aoData.push( { "name": "ins_id", "value": $("#ins_id").val() } );
      aoData.push( { "name": "filter", "value": filter } );
      $.ajax( {
        "dataType" : 'json',
        "type" : "POST",
        "url" : sSource,
        "data" : aoData,
        "success" : fnCallback
        } );
    } ,
    "aoColumns":
    [
     {"bVisible":false},
     {"sWidth": 55},
     {"sWidth": 30},
     {"sWidth": 40},
     {"sWidth": 125},
     {"sWidth": 50},
     {"sWidth": 50},
     {"sWidth": 20},                
     {"bVisible":false}  // allowed
    ],
    "oTableTools": {
      "sRowSelect": chgSelctionTyp,
      "sSwfPath": "/swf/copy_csv_xls_pdf.swf",
      "aButtons": []
    }
  });
} 
```

在调用打开对话框之后调用此函数。以下是打开对话框然后加载表格的代码行。

```
var oTT = TableTools.fnGetInstance( 'chargeTable' );
      if(oTT)
        oTT.fnSelectNone();
      $( "#chargeList" ).dialog( "open" );
      listPtCharges(); 
```

在对话框中，我有另一个按钮，带有过滤器值的事件处理程序，并使用新过滤器调用相同的函数。新加载的表总是从服务器带来更多的行数。

一切都很好，除了一个奇怪的问题。每当绘制具有更多行的新表时，只能选择与前一个表相等的行数。

我的意思是假设我加载了 5 行的表格，按下按钮为表格带来新的数据集。表加载了 8 行。但现在我只能选择前 5 行。全部休息将导致与身份不明的位置相关的萤火虫错误。

在这方面的任何帮助都是非常可观的。

**编辑：** 这是试图访问所选行的代码。

```
 var oTT = TableTools.fnGetInstance( 'chargeTable' );
    var aData = oTT.fnGetSelectedData(); 
```

这也是 jquery 数据表的一部分，它在 firebug 中显示错误。

```
"fnIsSelected": function ( n )
{
var pos = this.s.dt.oInstance.fnGetPosition( n );
return (this.s.dt.aoData[pos]._DTTT_selected===true) ? true : false;
}, 
```

单击不可点击的行后会显示以下错误。

类型错误：this.s.dt.aoData[pos] 未定义

我猜 aodata 的长度在某种程度上仍然与之前加载的表相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-30T15:51:14.383

你不应该破坏和重建你的表，你应该让数据表重新获取数据。

我认为调用`fnDraw`足以触发刷新 - 虽然尚未测试：

```
 $('#chargeTable').dataTable().fnDraw(); 
```

在您的`fnServerData`函数中，您可能需要更改加载`filter`参数的方式：

```
// keep this variable in some shared scope :
var filterPtr = {value: ''};

$('#chargeTable').dataTable({
    ....
    "fnServerData": function(...){
         ...
         aoData.push({ "name": "filter", "value": filterPtr.value });
         ...
     }
});

// if you need to update the filter :
filterPtr.value = 'newValue';
$('#chargeTable').dataTable().fnDraw(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-27T23:46:24.603

> 我的意思是假设我加载了 5 行的表格，按下按钮为表格带来新的数据集。表加载了 8 行。但现在我只能选择前 5 行。全部休息将导致与身份不明的位置相关的萤火虫错误。

所以问题是点击这个按钮后它可能会带回更多的行。看起来这`button`是一个`filter`，它可能包含也可能不包含新行。

听起来您需要`datatable`在修改后重新初始化它。我在`datatable`初始化后将新行注入到 a 时遇到了问题，这是我唯一能够解决的问题。

我知道这似乎有点矫枉过正，但这是过去对我有用的方法。在这种情况下，调用`redraw`或设置`bDestroy`标志对我不起作用。

在注入新行之前..

1.  销毁表
2.  注入行
3.  重新初始化数据表

再一次，这可能对你有用，也可能对你不起作用，但这是我过去必须做的。

```
$('#filterButton').click(function()
{
  //revert table to it's original state
  $('#chargeTable').dataTable().fnDestroy();

  //do some stuff, inject rows and get new filter value
  var filter = 'new filter value';

  //re-initialize the datatable
  listPtCharges(filter);
});

function listPtCharges(filter){
var chgTable;
chgTable =
  $('#chargeTable').dataTable({
    "bJQueryUI": true,
    "bDestroy": true,    
    "sDom": 'tT',
    "bSort": false,
    "bAutoWidth": false,
    "sAjaxSource": "/ajax/ptchglist.php",
    "sAjaxDataProp": "Records",
    "fnServerData": function ( sSource, aoData, fnCallback ) {
      aoData.push( { "name": "acctno", "value": $("#curAcctno").val() } );
      aoData.push( { "name": "ins_id", "value": $("#ins_id").val() } );
      aoData.push( { "name": "filter", "value": filter } );
      $.ajax( {
        "dataType" : 'json',
        "type" : "POST",
        "url" : sSource,
        "data" : aoData,
        "success" : fnCallback
        } );
    } ,
    "aoColumns":
    [
     {"bVisible":false},
     {"sWidth": 55},
     {"sWidth": 30},
     {"sWidth": 40},
     {"sWidth": 125},
     {"sWidth": 50},
     {"sWidth": 50},
     {"sWidth": 20},                
     {"bVisible":false}  // allowed
    ],
    "oTableTools": {
      "sRowSelect": chgSelctionTyp,
      "sSwfPath": "/swf/copy_csv_xls_pdf.swf",
      "aButtons": []
    }
  });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-27T23:17:15.027

## 测试和工作！

**现场演示：http:** [//jsfiddle.net/oscarj24/c9m3s/](http://jsfiddle.net/oscarj24/c9m3s/)

* * *

我只是尝试通过创建 a 来复制问题`datatable`，然后`click`使用 a 为事件添加一些额外的硬编码数据`button`。

起初，一切正常，但是当添加额外的行时，以前的行仍然可以选择，但新的行是不可能的，并且 browser 没有出现错误`console`。

但是，我会建议以下可能帮助您*“解决”*问题的方法：

***1.-*****在初始化后添加***“选择行”* 的事件处理程序，因为行将已经加载到. **`datatable``DOM`**

 *****2.-***而不是使用`.click()`,`.on('click')`或`.live('click')`“*选择行”*事件处理程序，使用`.delegate()`如下：

```
$('#parent').delegate('children', 'click', function() { /* do something */ }); 
```

*这样，您将能够选择已添加的新行。*

* * *

只是要知道，`.live()`已弃用，但它被一些旧插件（如`datatables`和其他插件）使用，所以我将**jQuery**版本更改为**1.7.2**。

另外，我使用`fnAddData()`了代替，`fnDraw()`但这没关系，它也导致了你遇到的同样问题，我据此找到了一个*“解决方案”* *（这就是为什么我认为这是“测试和工作”）*。

* * *

老实说，我无法详细解释为什么会发生此问题*（这似乎是一个错误）*，但我得到了一个可能的*“解决方案”*，希望它对您有所帮助。

请阅读代码中的注释，检查它*（也许这可以让您从另一个角度了解您需要做什么）*并在需要时检查您的浏览器`console`。**

# codeigniter - Codeigniter 中的并行编程

> ID：14480584
> 
> 赞同：1
> 
> 时间：2013-01-23T13:13:57.320
> 
> 标签：codeigniter, parallel-processing, codeigniter-2

我正在 Codeigniter PHP 框架中制作一个 Web 应用程序。当用户单击登录按钮时，在将仪表板提供给用户之前会调用 5-6 个函数

前任

```
/*When user clicks login button */
 $this->setSession($u_id);
 $this->getUserData($u_id);
 $this->getUserFriends($u_id);
 $this->sendEmail($u_id);
 $this->showDashboard($data); 
```

现在上述四个功能是独立的功能..它们不会以任何方式相互交互。因此，如果这 3 个函数以任何顺序执行或并行执行，系统仍将处于一致模式。

那么如果可能的话，我怎样才能让这 3 个函数在 Codeigniter 中同时执行呢？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:22:55.643

PHP 不支持后台进程，但请检查此解决方法： [http ://ellislab.com/forums/viewthread/66539/#327527](http://ellislab.com/forums/viewthread/66539/#327527)

```
function background() {
$fp = fsockopen("www.example.com", 80, $errno, $errstr, 30);
if (!$fp) {
  log_message('error', 'Unable to connect to server');
  return;
}
$request = "GET /SendSMS/index HTTP/1.1\r\n"
  ."Host: www.example.com\r\n"
  ."Connection: Close\r\n\r\n";
fwrite($fp, $request);
fclose($fp);
} 
```

# plugins - 访问javascript嵌套函数中的全局变量

> ID：14480586
> 
> 赞同：0
> 
> 时间：2013-01-23T13:14:00.223
> 
> 标签：plugins

我想访问javascript嵌套函数中的全局变量，并在嵌套函数中附加一些值，并将该变量显示在嵌套函数之外，并在嵌套函数中附加值

例如：

```
function a()
{
 var res="";
  function b()
   {
     res=res+"hello"; 
      alert(res);    //alert dialog with hello is appearing
   }
   alert(res);      //empty alert dialog is appearing,but I want this alert to
                     display hello,means "res" must act as global variable.  
} 
```

你能给出这个解决方案吗.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T08:18:54.377

对不起，但你的代码完全是一团糟。尝试这个：

```
var res="A";
b();
alert(res);  
function b()
{
  res=res+"hello"; 
  alert(res);    
}; 
```

# php - Ajax 在所有版本的 IE 中都失败

> ID：14480588
> 
> 赞同：1
> 
> 时间：2013-01-23T13:14:01.443
> 
> 标签：php, ajax, jquery

我有这个 Ajax 发布请求。在克罗姆工作得很好。刚刚在IE中打开它，它完全失败了。它是一个将图像加载到轮播中的 div。使用的轮播是[http://caroufredsel.dev7studios.com/](http://caroufredsel.dev7studios.com/)（如果有人在图像轮播之后，我强烈推荐它易于实施）

单击文件夹时

```
 <a href="javascript:void(0);" onclick="getImages(1)">Folder 1</a> 
```

基本上查询一个 php 文件并用一组新图像刷新 div

```
 $.ajaxSetup ({  
    cache: false,
    async: false  
});  
 function getImages(id)
 {
 $.ajax({

 type: "POST",
 url: 'getImage.php',
 dataType: "json",
 data: "id=" + id, 
 success: function(data) {

      $('#scrolimg').html(data);
      $("#car1").carouFredSel({
auto : false,
items   : 4,
scroll  : 4,
circular : false,
infinite : false,
prev : "#foo1_prev",
next : "#foo1_next",
swipe       : {
    onTouch     : true,
    onMouse     : false
}
 });

 }

 }); 
```

当我在 Stack 上阅读类似问题时，大多数人都说将缓存设置为 false 和异步，但这并没有帮助。另一个解决方案是发出 POST 请求而不是 GET ，但这对我也不起作用。

**上面的代码完美运行。** 问题出在 getImage.php 文件中。我有一个循环正在运行以使用 php 函数调用 getimagesize() 来查找图像的宽度和高度

该功能不在 IE 中运行，但在所有其他浏览器中都能正常运行。我的 Ajax 是否阻止此功能运行？

```
 <?php do {
  $image = $_SERVER['DOCUMENT_ROOT']."/images/uploads/".$row_rs_image['thumbfile'];
   list($width, $height)= getimagesize($image); 
 ?>
     <img  src="/images/uploads/<?php echo $row_rs_image['thumbfile']; ?>"  width="<?php echo $width;?>" height="<?php echo $height;?>" />
    <?php } while ($row_rs_image = mysql_fetch_assoc($rs_image)); ?> 
```

当我输出源时，我看到以下内容

```
 <img name="creed" src="/images/uploads/320623-1358872780_thumb.png"  width="" height="" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:26:20.220

发现问题。在获取图像大小时使用此行

list($width, $height, $type, $sizes)= getimagesize($image);

然后在getImage.php

```
 <?php do {
  $image = $_SERVER['DOCUMENT_ROOT'].$row_rs_image['userimagespath'].$row_rs_image['thumbfile'];
   list($width, $height, $type, $sizes)= getimagesize($image);  
 ?>
  <img name="<?php echo $row_rs_image['imgname']; ?>" src="/images/uploads/<?php echo $row_rs_image['thumbfile']; ?>"  <?php echo $sizes;?> /> 
```

感谢大家的帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:18:07.890

只需删除逗号，尝试一下，希望它会工作:)

$.ajaxSetup ({
cache: false, async: false
});
函数 getImages(id) { $.ajax({

类型：“POST”，url：'getImage.php'，dataType：“json”，数据：“id =”+ id成功：函数（数据）{

```
 $('#scrolimg').html(data);
  $("#car1").carouFredSel({ 
```

自动：假，项目：4，滚动：4，循环：假，无限：假，上一个：“#foo1_prev”，下一个：“#foo1_next”滑动：{onTouch：真，onMouse：假}}）；

}

});

# python - 以特定模式复制和重命名目录中的文件

> ID：14480589
> 
> 赞同：0
> 
> 时间：2013-01-23T13:14:02.443
> 
> 标签：python

我想复制一个目录中的文件等于该目录中其他文件的次数，然后重命名所有新文件。

例如，一个目录中有 3 个文件，filename1.xls、filename2.xls 和 filename3.xls。我想复制 Filename1.xls 2 次（因为目录中有 2 个文件不包括 filename1.xls ），然后将每个复制的文件重命名为 filename2.xls 和 filename3.xls。希望我的问题很清楚。谢谢，广告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:31:05.037

嗯......只需获取目录中的文件数量，将文件复制N次并将它们保存为

```
for number in range(amount):
    "feliname%r.xls" % number 
```

如果我明白你的意思

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:46:37.400

要将名称以 开头且`"F"`与命令行中给出的文件相邻的所有文件的内容替换为其副本：

```
#!/usr/bin/env python
import os
import shutil
import sys

filename = sys.argv[1] # provide file you want to multiply
dirname, basename = os.path.split(filename)
for name in os.listdir(dirname):
    path = os.path.join(dirname, name)
    #note: os.path.normcase() might be required to compare names
    if name.startswith("F") and name != basename and os.path.isfile(path): 
       shutil.copy2(filename, path) #note: some metadata is not copied 
```

注意：如果复制失败；目标文件可能被破坏。在这种情况下，您可以先复制到临时文件，然后再替换目标。

# c++ - 在程序中获取 AIX 中进程的虚拟内存大小

> ID：14480591
> 
> 赞同：0
> 
> 时间：2013-01-23T13:14:04.730
> 
> 标签：c++, c, unix, aix, virtual-memory

我使用 C++ 在 AIX 5.3 上编写应用程序。我想获取进程虚拟内存的当前大小。我使用`getprocs64`函数，但是有了这些数据，我无法得到如图`svmon`所示的结果。请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:30:34.090

我找到了适合我的部分解决方案。

我运行了一个小型测试应用程序，发现如果我们在堆栈上分配内存（例如：）来分配对象的大小和一些开销`pi_dvm`，结构的成员将会增加。现在，我们要计算使用的堆大小。我们应该使用返回结构的函数。我们对结构的两个领域感兴趣：和（关于这个领域，你可以[在这里](http://man7.org/linux/man-pages/man3/mallinfo.3.html)阅读）。一些示例代码：`procentry64``char arr[1024];``mallinfo()``malloc.h``mallinfo``mallinfo``usmblks``uordblks`

```
pid_t pid = getpid();
struct procentry64 p_info;
if (getprocs64(&p_info, sizeof(p_info), NULL, 0, &pid, 1) < 0) {
  printf("Error!");
}
proc_size = p_info.pi_dvm*getpagesize() + p_info.pi_tsize;
struct mallinfo m = mallinfo();
proc_size += m.usmblks + m.uordblks;
return proc_size; // proc_size in bytes 
```

PS我不知道为什么我们总结`pi_tsize`（如果有人知道，请告诉我们）。[我从pg_top](https://github.com/markwkm/pg_top/blob/master/machine/m_aix5.c)来源得到这个想法，但是有一个错误，它们乘以`pi_tsize`4，但它是不正确的，因为`pi_tsize`是以字节为单位的。我希望这个解决方案可以帮助某人:)

# objective-c - 这个目标 C 代码中的“at 符号”@ 是什么意思

> ID：14480594
> 
> 赞同：2
> 
> 时间：2013-01-23T13:14:10.597
> 
> 标签：objective-c, at-sign

我已经使用 Objective C 好几年了，但我不知道 @ 符号可以这样使用（for 循环内的第 6 行）：

```
- (void)encodeWithCoder:(NSCoder *)coder
{
    [coder encodeInteger:mti forKey:@"mti"];

    NSMutableArray *arr = [NSMutableArray arrayWithCapacity:N];
    for (int i = 0; i < N; i++)
        [arr addObject:@(mt[i])];
    [coder encodeObject:arr forKey:@"mt"];
} 
```

这是什么意思？令人惊讶的是我可以删除它并且编译器没有抱怨并且代码看起来工作正常？！

这是 MTRandom [https://github.com/preble/MTRandom/blob/master/MTRandom/MTRandom.m#L115的一部分](https://github.com/preble/MTRandom/blob/master/MTRandom/MTRandom.m#L115)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:18:17.957

在此上下文中，@ 运算符将 C 数值（int、long、float、double 等）转换为 NSNumber 的实例。它最常用于数字文字（例如@3.5），但也适用于您的示例中的表达式。

Xcode 4.4 引入了对 Objective-C 语言的这种增强。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:15:50.710

这是一种用更少的类型来装箱值的新语法。假设`mt[i]`是数字类型，`@(mt[i])`将其放在`NSNumber`对象中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:17:55.957

这是 Objective-C 的新功能，它将原始整数转换为 NSNumber，也有 NSArrays @(..) 和 NSDictionary @{...} 的等价物

# qt - 在 QTree 中插入 QTable

> ID：14480601
> 
> 赞同：0
> 
> 时间：2013-01-23T13:14:34.870
> 
> 标签：qt, qtableview, qtreeview

我想在 QTree 中使用 QTable 设计一个特定的布局。请参阅以下线框：

![线框](../Images/d7deabf68a441987299b39d6724e9ab8.png)

是否有可能做到这一点，知道在数量上：

1.  Dialog 1 下的第一个节点被分隔成 3 个（或者可能是 4 个）。时间，然后是头像图标，然后是带有文本的蓝色气泡，然后是数字（在我的示例中为 75） 那么，***第一个问题***，是否可以将树节点分成四部分？

2.  Section 2由叶子节点组成，这些节点是QTable。那么，***问题 2***是否可以创建嵌入在 QTree 中的 QTable？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:02:54.127

您可以使用该[`setItemWidget`](http://qt-project.org/doc/qt-4.8/qtreewidget.html#setItemWidget)功能为您想要的每个树小部件项目设置您想要的小部件。

如果是，`QTreeView`您应该使用该[`setIndexWidget`](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#setIndexWidget)功能。

# php - 将动态添加的行中的值添加到数据库中

> ID：14480602
> 
> 赞同：1
> 
> 时间：2013-01-23T13:14:35.920
> 
> 标签：php, javascript, mysql

嗨，我正在开发一个 php 表单，当按下添加按钮时，它必须动态添加一个表格行，并且我正在使用 for 循环来保存值，问题是它没有将数据保存到我的数据库中并给出错误我的文本框的循环值未定义任何人都可以帮助我这是我的脚本

```
<?php
session_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<script language="javascript" type="text/javascript">
var i=1;
function addRow()
{
          var tbl = document.getElementById('table1');
          var lastRow = tbl.rows.length;
          var iteration = lastRow - 1;
          var row = tbl.insertRow(lastRow);

          var firstCell = row.insertCell(0);
          var el = document.createElement('input');
          el.type = 'text';
          el.name = 'name' + i;
          el.id = 'name' + i;
          el.size = 20;
          el.maxlength = 20;
          firstCell.appendChild(el);

          var secondCell = row.insertCell(1);
          var el2 = document.createElement('input');
          el2.type = 'text';
          el2.name = 'address' + i;
          el2.id = 'address' + i;
          el2.size = 20;
          el2.maxlength = 20;
          secondCell.appendChild(el2);

          var thirdCell = row.insertCell(2);
          var el3 = document.createElement('input');
          el3.type = 'text';
          el3.name = 'contactNum' + i;
          el3.id = 'contactNum' + i;
          el3.size = 20;
          el3.maxlength = 20;
          thirdCell.appendChild(el3);
          alert(i);
          i++;
          frm.h.value=i;
          alert(i);

}
</script>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title></head>

<body>
<form action="submit.php" method="post" name="frm" id="frm">
<table width="40%" border="2" cellpadding="0" cellspacing="0" id="table1">
  <tr>
    <td><strong>Name</strong></td>
    <td><strong>Address</strong> </td>
    <td><strong>Contact Num</strong> </td>
  </tr>
  <tr>
    <td><input name="name" type="text" id="name" size="20" maxlength="20" /></td>
    <td><input name="address" type="text" id="address" size="20" maxlength="20" /></td>
    <td><input name="contactNum" type="text" id="contactNum" size="20" maxlength="12" /></td>
  </tr>

</table>
<input type="button" value="Add" onclick="addRow();" />
<input name="Submit" type="submit" value="Submit" />
<label>
<input name="h" type="hidden" id="h" value="0" />
</label>
</form>
</body>
</html> 
```

这是我的 submit.php 代码

```
<?php
mysql_connect("localhost", "root", '')or die(mysql_error());
mysql_select_db("test") or die(mysql_error());
$num =  $_POST['h'];
for($i=0;$i<=$num;$i++)
{

        $name       = $_POST["name_$i"];
        $address    = $_POST["address_$i"];
        $contactNum = $_POST["contactNum_$i"];

mysql_query("INSERT INTO `com`(`name`, `add`, contact) Values('$name', '$address', '$contactNum')") or die(mysql_error());
}
echo "<h1>Done!</h1>";

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:34:36.433

看来您将“i”增加了太多次。

```
 i++;
      frm.h.value=i; 
```

应该

```
 frm.h.value=i;
      i++ 
```

或者您可以调整 for 循环：

```
 for($i=0; $i < $num; $i++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:35:45.877

文本框的值未定义 - 在 PHP 中，您正在寻找 name_$i（带有“_”），而在 javascript 中，名称没有“_”（el.name = 'name' + i;）

另请注意，在您的 javascript 中，您的循环从 1 开始（在您的 php 中）。第一个客户端行来自 HTML，但您没有放置任何索引（name="name" 而不是 name="name_0"）。最好不要用任何行填充表格，而在页面加载时调用函数（i=0）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T08:35:00.463

下面的代码将解决您的问题并在数据库中插入数据。

```
<script language="javascript" type="text/javascript">
var i=1;
function addRow()
{
      var tbl = document.getElementById('table1');
      var lastRow = tbl.rows.length;
      var iteration = lastRow - 1;
      var row = tbl.insertRow(lastRow);

      var firstCell = row.insertCell(0);
      var el = document.createElement('input');
      el.type = 'text';
      el.name = 'name_' + i;
      el.id = 'name_' + i;
      el.size = 20;
      el.maxlength = 20;
      firstCell.appendChild(el);

      var secondCell = row.insertCell(1);
      var el2 = document.createElement('input');
      el2.type = 'text';
      el2.name = 'address_' + i;
      el2.id = 'address_' + i;
      el2.size = 20;
      el2.maxlength = 20;
      secondCell.appendChild(el2);

      var thirdCell = row.insertCell(2);
      var el3 = document.createElement('input');
      el3.type = 'text';
      el3.name = 'contactNum_' + i;
      el3.id = 'contactNum_' + i;
      el3.size = 20;
      el3.maxlength = 20;
      thirdCell.appendChild(el3);
     // alert(i);
      i++;
      frm.h.value=i;
    //  alert(i);
}
</script> 
```

根据以下进行更改：

```
<tr>
    <td><input name="name_0" type="text" id="name_0" size="20" maxlength="20" /></td>
    <td><input name="address_0" type="text" id="address_0" size="20" maxlength="20" /></td>
    <td><input name="contactNum_0" type="text" id="contactNum_0" size="20" maxlength="12" /></td>
</tr> 
```

在 submit.php 中进行如下更改。

```
for($i=0;$i<$num;$i++) 
```

# c - 如何使用指针初始化结构成员？

> ID：14480611
> 
> 赞同：-2
> 
> 时间：2013-01-23T13:14:55.587
> 
> 标签：c

我有以下代码。在下面的代码中，值`5`存储在变量`a`（即`abc.a`）中。但我想初始化`c`（即`abc.c`）中的值。怎么做？我的要求是为`c`not for填写数据`a`。

```
typedef struct abc
{
    int a;
    int b;
    int c;
}abc;
typedef struct def{
    int *ptr;
    abc strpt;
}def;
typedef struct xyz{
int *pointer;
}xyz;
int main()
{
    int *temp, tmp;
    abc* ab;
    tmp = 5;
    temp = &tmp;
    ab = (abc*)malloc(sizeof(abc));
    xyz *x = (xyz*)malloc(sizeof(xyz));
    def *de = (def*)malloc(sizeof(def));
    x->pointer = (xyz*)temp;
    ab = (abc*)x->pointer;

    return 0;
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:46:48.867

我担心您的代码中会出现一些严重缺乏理解的指针。让我逐行剖析，以明确问题出在哪里。

假设类型声明如上，我对语句进行了编号以便于引用。

```
int main()
{
    int *temp, tmp;
    abc* ab;
    /* 1 */ tmp = 5;
    /* 2 */ temp = &tmp;
    /* 3 */ ab = (abc*)malloc(sizeof(abc));
    /* 4 */ xyz *x = (xyz*)malloc(sizeof(xyz));
    /* 5 */ def *de = (def*)malloc(sizeof(def));
    /* 6 */ x = (xyz*)temp;
    /* 7 */ ab = (abc*)x;

    return 0;
} 
```

首先：您永远不会清理在 3、4 和 5 中分配的内存。即使对于一个简单的测试程序，您也应该始终注意这样的事情。

您的第一个问题是第 6 行，您盲目地将指向 int 类型的对象（内存中的 4 个字节）的指针转换为指向 xyz 类型的结构的指针（内存中的 4 或 8 个字节，不同类型）。你在这里做的是一种复杂的写法`x = (xyz*)&tmp;`。

这样的行为会导致以下严重问题：

1.  您刚刚在第 4 行分配了内存。现在您用指向堆栈变量的指针覆盖此指针。因此，您不能再释放分配的内存 ==> 内存泄漏
2.  您新分配的指向堆栈变量的指针在退出范围后变得无效，并可能导致未定义的行为。
3.  由于元素可能的大小不匹配，任何在第 6 行之后对 x 元素的写入尝试都可能导致堆栈损坏（因此导致未定义的行为）。

到第 7 行，你又遇到了同样的问题，甚至更糟。估计的 sizeof(abc) 可能是 12 个字节。在此行之后访问 abc 的任何元素都可能再次导致堆栈损坏。

我仍然不明白你真正在寻找什么，但如果你“必须”通过指针初始化结构元素，有几种方法：

如果结构已知，您可以这样做： abc * ab = malloc(sizeof(abc));

```
if (ab != NULL) {
    ab->c = 5;

    // -- do other stuff

    free(ab); ab = NULL;
} 
```

如果你需要一个指向元素'c'的指针，你可以这样做：

```
int * c_ptr = NULL;
abc * ab = malloc(sizeof(abc));

if (ab != NULL) {
    c_ptr = &(ab->c);
    *c_ptr = 5;

    //-- do other stuff
    free(ab); ab = NULL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:17:44.010

你问这个：

```
abc s;
s.c = 5; 
```

这使得`c`5\. 或者你可以这样做：

```
abc s = {0,0,5}; 
```

这意味着，前两个成员被初始化为`0`，第三个成员（即`c`）被初始化为`5`。

或者，如果你有指针，那么你可以这样做：

```
abc *p = malloc(etc);
p->c = 5; 
```

但随后避免使用指针和`malloc`. 当你*真正*需要它们时使用它。在您的代码中，我看不出您需要它的任何理由。使用自动变量，而不是指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:44:51.993

我认为您需要在返回 main() 之前添加它以获得所需的内容。

```
ab->c = *(x->pointer); 
```

# javascript - 如何使用 html/css 使页面移动 onMouseRelease？

> ID：14480613
> 
> 赞同：0
> 
> 时间：2013-01-23T13:14:59.230
> 
> 标签：javascript, html, css, mouseover

我有一个网站，我希望它这样做：当我单击页面左侧的图像时，页面向后移动，当我单击右侧的图像时，页面向前移动。我正确设置了所有内容，因此我尝试使用 css 简单地执行此操作，onmouseover 将页面的边距向右或向左移动这么多像素：

```
<p onmouseover="hoverForward" style="text-indent:-1000px;">
<div id="menu" style="height: 504px; width: 92px; position: absolute; z-index: 2; top: 62px; left: 1353px;">
<img src="image.jpg">
</div></p> 
```

但这并没有给我任何结果。所以我尝试使用 w3Schools 中的一个示例用于 javascript onmouseclick：

```
function myFunction()
{
document.getElementById("demo").innerHTML="Hello World";
}
<p onmouseover="hoverForward" style="text-indent:-1000px;">
<div id="menu" style="height: 504px; width: 92px; position: absolute; z-index: 2; top: 62px; left: 1353px;">
<img src="image.jpg">
<button onclick="myFunction()">Click me</button>
<p id="demo"></p>
</div></p> 
```

为了测试它，我尝试将按钮放在图像上。按钮在那里，但是当我单击它时它没有滚动。我做错什么了？看来我采取的第一种方法肯定会奏效。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:25:22.420

你的第一个片段无论如何都不会工作，因为它不是动态的。另外，`text-indent`不是处理块元素偏移的最佳方法。第二个不起作用，因为 JavaScript 不会滚动，而是向`<p id="demo" ...>`元素输出 'Hello, World'。

最好在这里看看：

[http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizo​​ntal-page-scrolling-with-jquery/](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)

这是使用 HTML ankers 进行垂直滚动的好方法，甚至可以在不支持或不允许 JavaScript 的浏览器上使用。

可以帮助你吗？

# jquery - 出现错误：未捕获的 TypeError: undefined is not a function bootstrap.js:29 (anonymous function) bootstrap.js:29 (anonymous function)

> ID：14480616
> 
> 赞同：21
> 
> 时间：2013-01-23T13:15:02.170
> 
> 标签：jquery, html, twitter-bootstrap, visualforce

我收到以下错误

```
 Uncaught TypeError: undefined is not a function bootstrap.js:29
(anonymous function) bootstrap.js:29
(anonymous function) 
```

在我的开发者控制台页面中。我正在`visualforce`尝试集成`twitter-bootstrap``Visualforce`

这是完整的视觉力代码

```
 <apex:page standardStylesheets="false" showHeader="false" sidebar="false">
    <!-- Begin Default Content REMOVE THIS -->

    <head>
        <apex:stylesheet value="{!URLFOR($Resource.bootstrap, 'bootstrap/css/bootstrap.css')}"
        />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"
        type="text/javascript"></script>
        <apex:stylesheet value="{!URLFOR($Resource.bootstrap, 'bootstrap/css/bootstrap.min.css')}"
        />
        <apex:includeScript value="{!URLFOR($Resource.bootstrap, 'bootstrap/js/bootstrap.js')}"
        />
        <apex:includeScript value="{!URLFOR($Resource.bootstrap, 'bootstrap/js/bootstrap.min.js')}"
        />

    </head>

    <body>
        <div id="force">
            <div class="input-append" align="center" style="padding-top:20px;">
                <input type="text" name="q" class="span2 search-query" placeholder="Snipp or Tag"
                />
                <button type="submit" class="btn">Search</button>
                <div class="pull-right">
                    <button class="btn btn-primary active"><i class="icon-white icon-plus"></i> A</button>
                    kjhkjdfgdgdfgdfgdfgdfgdgfgdfg
                    <button class="btn btn-primary active"
                    style="margin-right:50px;"><i class="icon-white icon-bullhorn"></i> Fee</button>
                </div> 
            </div>
        </div>
    </body>
</apex:page> 
```

这是页面的链接`jady-developer-edition.ap1.force.com`

任何人都可以阐明可能出了什么问题。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-23T13:38:29.287

在包含引导 js 文件之前，您需要包含 jquery。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript" src="/resource/1358914798000/bootstrap/bootstrap/js/bootstrap.js"></script> 
```

请注意，您不需要 bootstrap.js 和 bootstrap.min.js

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-14T13:36:54.713

如果您包含`bootstrap.js`before ，则可能会导致此问题`jquery.js`。因此，请确保您包含`jQuery`before `bootstrap`。

**还有其他事情要检查。**

> 还有一种可能的情况是，页面中可能有多个 jQuery 实例。因此，搜索 jQuery 的重复版本并删除它们（如果有）。

**查找以下链接以获取更多信息。**

[避免与其他库的冲突](https://learn.jquery.com/using-jquery-core/avoid-conflicts-other-libraries/)

# ajax - Ajax 在 Cakephp 2.2.3 中不起作用

> ID：14480617
> 
> 赞同：0
> 
> 时间：2013-01-23T13:15:09.847
> 
> 标签：ajax, cakephp-2.2

我想在 ContactUs 表单上实现 Ajax，这是我的代码。控制器：

```
class ContactsController extends AppController {

public $layout = 'default';
public $helpers = array('Html', 'Form', 'Paginator','Js');
public $components = array('RequestHandler');

public function index(){
    if(!empty($this->data)){
        if($this->Contact->save($this->data)){
            if($this->RequestHandler->isAjax()){
                $this->render('success','ajax');
            } else {
            $this->Session->setFlash('Message sent');
            $this->redirect(array('action'=>'index'));
            }
        }
    }
}
} 
```

查看文件

```
<?php echo $this->Html->script('jquery', FALSE); ?>
    <div id="success"></div>
    <h2>Contact Us</h2>

    <?php
            echo $this->Form->create();
            echo $this->Form->input('name',array('id'=>'name'));
            echo $this->Form->input('email',array('id'=>'email'));
            echo $this->Form->input('message',array('id'=>'message'));
            echo $this->Js->submit('Send',array(
                'before'=>$this->Js->get('#sending')->effect('fadeIn'),
                'success'=>$this->Js->get('#sending')->effect('fadeout'),
                'update'=>'#success'
            ));
            echo $this->Form->end();                
            ?>                
<div id="sending" style=" display: none;background-color: #90ee90;">Sending...</div> 
```

在 view/layouts/ajax.ctp 文件中包含：

```
<?php //echo $this->fetch('content'); ?>
<?php echo $content_for_layout; ?> 
```

我已经尝试过这两种方法。并且 default.ctp 布局包含在 head 部分：

```
echo $scripts_for_layout;
echo $this->Js->writeBuffer(array('cache'=>TRUE)); 
```

在源文件中包含 jquery，但 PHPStorm 在 jquery 文件中显示错误，并且 firebug 显示![萤火虫表演](../Images/d7612d980e989f02926b4ec82aa3a61f.png)

希望一切都会清楚，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:44:45.287

我现在正在遇到一模一样的问题。我看到你正在使用 Andrew Perkins 的 Cakephp 教程（我使用的是完全相同的，所以我的代码是相同的）[http://www.youtube.com/watch?v=dQ71psonQx0](http://www.youtube.com/watch?v=dQ71psonQx0)

我相信问题在于他基于 Cakephp 1.3 制作了这个视频教程。语法在 2.0 中发生了很大变化。我还没有弄清楚如何让它在 2.2.3 中工作，但我认为这就是原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T08:02:54.260

你应该禁用`before`和`success`回调上的缓冲区。

```
echo $this->Js->submit('Send',array(
    'before'=>$this->Js->get('#sending')->effect('fadeIn', array('buffer' => false)),
    'success'=>$this->Js->get('#sending')->effect('fadeOut', array('buffer' => false)),
    'update'=>'#success'
)); 
```

编辑：错字也可能导致此问题：`'fadeout'`而不是`'fadeOut'`.

# php - 自定义帖子类型分类法 - 帖子未显示在类别或标签页面中

> ID：14480618
> 
> 赞同：0
> 
> 时间：2013-01-23T13:15:15.977
> 
> 标签：php, wordpress, loops

我制作了一个名为“会员资源”的自定义帖子类型，此 CPT 下的帖子有一些分类法，例如类别和标签。

标签=“多样性”类别=“指导”

当我访问以下网址时：

www.domain.com/tags/diversity

www.domain.com/tags/guidance

没有帖子出现。

虽然我在 CPT 功能上设置了 public => true 。

如果您转到“会员资源”存档页面，则会显示帖子，因此它们会显示，但当您按分类过滤它们时不会显示。

更新 -

将以下代码添加到我的functions.php文件允许成员资源CPT分别显示在类别和标签页面中，但现在在“页面”选项卡和所有其他内容选项卡（如帖子等）下的wordpress后端似乎有覆盖了我的页面和帖子，仅显示成员资源帖子。

```
add_action( 'pre_get_posts', 'add_my_custom_post_type' );

 function add_my_custom_post_type( $query ) {
if ($query->is_main_query()) 
    $query->set( 'post_type', array( 'member-resources' ) );
return $query;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:49:13.810

您的代码看起来正确。但是您在过多的 wordpress 查询中包含了 CPT 成员资源。is_main_query 的意思是我认为的“循环”。

因此，您需要将其限制为仅在标签存档页面上运行。

以下代码来自 wordpress 网站

```
add_action( 'pre_get_posts', 'foo_modify_query_exclude_category' );
function foo_modify_query_exclude_category( $query ) {
    if ( ! is_admin() && is_main_query() && ! $query->get( 'cat' ) )
        $query->set( 'cat', '-5' );
} 
```

您需要做类似的事情，但要确定您是否在“标签”页面中。

# spring-security - java web 项目使用哪种身份验证/授权解决方案？

> ID：14480621
> 
> 赞同：0
> 
> 时间：2013-01-23T13:15:19.550
> 
> 标签：spring-security, java-ee-6, java-ee-5

我必须在 Java Web 应用程序中强制执行身份验证/授权的选项是什么？根据我的研究，有：

*   JAAS
*   JNDI
*   春季安全

还有其他人吗？JEE5 或 JEE6 有什么新东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:41:56.643

如果您不想自己实现身份提供者，可以考虑使用[OpenID](http://openid.net/)。这样，您可以使用任何 OpenID 提供程序来提供身份验证/授权。

另外，可以考虑[OAuth2](http://oauth.net/)。

不要将两者混为一谈，这里有[很多帖子](https://stackoverflow.com/questions/3376141/openid-vs-oauth/3376190#3376190)可以解释差异......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:47:09.303

请参阅JEE6 的[保护 Web 应用程序章节。](http://docs.oracle.com/javaee/6/tutorial/doc/bncas.html)您也可以考虑将[Apache Shiro](http://shiro.apache.org/)作为 Spring Security 的替代品。如果您已经使用 Spring Framework，那么只需使用 Spring Security。

# sql - 数据序列的顺序编号

> ID：14480625
> 
> 赞同：1
> 
> 时间：2013-01-23T13:15:35.437
> 
> 标签：sql, postgresql

我确实有下表：

```
create table test_seq (id int, obs int);
insert into test_seq values (1,1);
insert into test_seq values (2,1);
insert into test_seq values (3,1);
insert into test_seq values (4,0);
insert into test_seq values (5,0);
insert into test_seq values (6,1);
insert into test_seq values (7,1);
insert into test_seq values (8,0);
insert into test_seq values (9,0);
insert into test_seq values (10,1);
insert into test_seq values (11,0); 
```

是否有 SQL 方式，如何创建以下输出？

```
id   obs    seq_num
 1     1          1
 2     1          1
 3     1          1
 4     0          2
 5     0          2
 6     1          3
 7     1          3
 8     0          4
 9     0          4
10     1          5
11     0          6 
```

每次 obs 列中的值与前一行（按 id 排序）相比发生变化时，seq_num 都会增加 1。我可以在 Excel 中轻松解决这个问题（使用简单的 if 公式），但在 postgres 中无法解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:23:51.003

使用分析函数，例如：

```
select id, obs, sum(cnt) over (order by id) as seq_num
from (
  select id, obs, case when obs <> (lag(obs) over (order by id)) then 1 else 0 end as cnt
  from test_seq
)
order by id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:23:42.473

我想通了：

```
with t as (
    select
        id,
        obs, 
        case when lag(obs,1) over (order by id) <> obs then 1 else 0 end as test 
    from 
        tmp.test_seq
    ) 

select 
    *,
    sum(test) over (order by id rows between unbounded preceding and current row) + 1
from 
    t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:18:13.980

您可以使用[rownumber](http://msdn.microsoft.com/en-us/library/ms186734.aspx)来做到这一点。

# javascript - 使用 cgscenegraph，我怎样才能在动画上有一个回调函数

> ID：14480629
> 
> 赞同：0
> 
> 时间：2013-01-23T13:15:49.770
> 
> 标签：javascript, html, animation, canvas, frameworks

我做了一个动画，我想在动画循环结束时添加一个回调函数。

你知道我该怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:00:21.620

很高兴看到您找到了您的解决方案 :) 您可以在 cgscenegraph 网站上找到一个完整的示例：http: [//gwennaelbuchet.github.com/cgSceneGraph/examples/03_Animation/animation_01_SRT/index.html](http://gwennaelbuchet.github.com/cgSceneGraph/examples/03_Animation/animation_01_SRT/index.html)

还有其他与动画相关的示例：http: [//gwennaelbuchet.github.com/cgSceneGraph/examples.html](http://gwennaelbuchet.github.com/cgSceneGraph/examples.html)

对于动画引擎，您必须了解的是，会为您想要制作动画的每个节点+属性生成一个时间线。正是这个时间线提供了与动画相关的事件。

这是获取时间线的 onAnimationEnd 的示例：

```
this.sceneGraph.getTimeline(myNode, "rotation.angle").onAnimationEnd = function (event) {
    console.log("animation ended");
}; 
```

要获取 onAnimationStart 或 onAnimate 事件，完全一样 :)

希望这能有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:46:32.953

好吧，我找到了我想要的，

在动画结束时触发的 CGSGTimeline 类中有一个名为“onAnimationEnd”的属性，所以我有我的回调函数；）

有关信息，cgSceneGraph 框架中还有其他回调函数，例如“onAnimate”和“onAnimationStart”。链接到[http://gwennaelbuchet.github.com/cgSceneGraph/api.html](http://gwennaelbuchet.github.com/cgSceneGraph/api.html)

此致。

# java - UI 中未显示 ActionError 消息

> ID：14480631
> 
> 赞同：2
> 
> 时间：2013-01-23T13:15:51.170
> 
> 标签：java, jsp, validation, struts, struts-1

该应用程序是在 Struts 1.2 上进行的。我有一个登录表单，所有与登录相关的验证都会正确显示。对于验证，我使用的是 Validator 框架。

当验证成功但用户身份验证失败时，我无法正确显示登录失败消息。

我`ActionError`在 Action 中设置消息，如下所示：

```
Login loginDetails = validateUser(loginForm);
if(loginDetails == null){
    errors.add(ActionErrors.GLOBAL_ERROR, new ActionError("error.invalidCredentials"));
    return mapping.findForward("failure");
} 
```

以下是`ApplicationResources.properties`文件中的条目：

```
error.invalidCredentials=User Name and Password does not match. 
```

当`loginDetails`为空时，错误就会被正确添加（我通过调试代码验证了这一点）。但是消息没有显示在 UI 中。

这是我在 UI 中添加的内容：

```
<td align="right">
    <div style="color:red">
        <html:errors />
    </div>
</td> 
```

下面是 struts-config 文件中的条目：

```
<action input="/mediaLogin.jsp" path="/welcome" type="com.media.action.LoginAction"
    name="loginForm" scope="session" validate="true">
    <forward name="success" path="/rentLibrary.jsp"></forward>
    <forward name="failure" path="/mediaLogin.jsp" redirect="false"></forward>
</action> 
```

对于身份验证失败，我已将路径与登录屏幕相同的页面指定`redirect`为`false`.

请让我知道我错过了什么:)

**编辑**

**完整代码：**

```
LoginForm loginForm = (LoginForm)form;
HttpSession session = request.getSession();
ActionErrors errors=new ActionErrors();     
if(loginForm.getAction().equalsIgnoreCase("Login")){
    // Provide the NUll Check
    Login loginDetails = validateUser(loginForm);
    if(loginDetails == null){
        errors.add(ActionErrors.GLOBAL_ERROR, new ActionError("error.invalidCredentials"));
        return mapping.findForward("failure");
    }
    populateLoginDetails(loginDetails, loginForm);
}
System.out.println("**************************************" + mapping.getAttribute() + "**************************************");
session.setAttribute("userDetails", loginForm);
return mapping.findForward("success"); 
```

**`Struts-Config.xml`：**

```
<form-beans>    
    <form-bean name="loginForm" type="com.media.form.LoginForm" ></form-bean>   
</form-beans>
<action-mappings>
    <action input="/mediaLogin.jsp" path="/welcome" type="com.media.action.LoginAction"
        name="loginForm" scope="session" validate="true">
        <forward name="success" path="/rentLibrary.jsp"></forward>
        <forward name="failure" path="/mediaLogin.jsp" redirect="false"></forward>
    </action>               
</action-mappings>

<message-resources parameter="resources.ApplicationResources" />

<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
    <set-property property="pathnames"
        value="/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml" />
</plug-in> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T16:39:29.770

首先，添加一个空白的 validate() 方法，即使您没有按照@RomanC 的建议在其中编写代码。

然后，尝试添加

```
saveErrors(request, errors); 
```

后

```
errors.add(ActionErrors.GLOBAL_ERROR, new ActionError("error.invalidCredentials")); 
```

如果这不起作用，请回复。让我们先让它工作，然后你最好使用@RomanC 建议的标准方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T15:06:21.997

Error messages not getting displayed, right because you not getting them from the validator form. Struts use `ValidatorForm` that your form should extend and override the `validate` method. In the `validate` method you can check the form fields manually or using Apache commons validator. `GenericValidator.isBlankOrNull` for example checks for fields are required. Fill the `ActionErrors` and call the `super.validate` to get additional errors from the framework that you can merge. Once you call `super.validate` the `ERROR_KEY` is already put into request. Additionally in the post [problem in error handling using struts validator framework](https://stackoverflow.com/a/4671213/573032) I've described how handle exceptions during validation to put `EXCEPTION_KEY` to the `error` attribute. Other things like skip validation in the actions and validation dispatch methods possible due to overriding `RequestProcessor` adding validation method keys (Validation Method Key is the key used to map the method used by `getKeyMethodMap()`), and handle the `processValidation`.

```
ActionErrors actionErrors = super.validate(mapping, request);    
actionErrors.add(ActionErrors.GLOBAL_MESSAGE, new ActionMessage("error.invalidCredentials")); 
```

**EDIT:**

If you want to ignore the validation framework and do validate manually in the action

```
ActionErrors errors = new ActionErrors();
errors.add(ActionErrors.GLOBAL_MESSAGE, new ActionMessage("error.invalidCredentials"));
request.setAttribute(Globals.ERROR_KEY, errors);
return mapping.findForward("failure"); 
```

After that it will be possible to display it in JSP via `<html:messages`.

```
<logic:messagesPresent>
  <html:messages id="error">
    <span><bean:write name="error"/></span><br/>
  </html:messages>
</logic:messagesPresent> 
```

# iphone - 如何在 OpenGL ES 2.0 中使用多个纹理

> ID：14480634
> 
> 赞同：0
> 
> 时间：2013-01-23T13:15:59.063
> 
> 标签：iphone, ios, opengl-es-2.0, textures, glkit

我想设置一个纹理数组以用于我的形状。我在互联网上研究过这个话题，但几乎没有像我这样的新手可以使用的参考资料。同样，我想要实现的是一个纹理数组，我可以使用它来将不同的纹理映射到我形状的不同面上。到目前为止，我只有一个从 UIView 生成的纹理。

我的核心问题是：

*   如何设置这个数组？
*   如何将纹理加载到该数组中？
*   我如何使用这个数组？

**这是我的代码：**

```
- (void)setupGL {

    [EAGLContext setCurrentContext:self.myContext];

    self.effect = [[GLKBaseEffect alloc] init];
    self.layer.contentsScale = 2.0;
    BOOL useTexture = YES;

    // Create default framebuffer object.
    glGenFramebuffers(1, &defaultFrameBuffer);
    glBindFramebuffer(GL_FRAMEBUFFER, defaultFrameBuffer);

    myView = [[MyView alloc]initWithFrame:CGRectMake(0,0,320,320)];

    self.effect.transform.projectionMatrix = GLKMatrix4MakePerspective(45.0f,0.9f, 0.01f, .08f);
    self.effect.transform.projectionMatrix = GLKMatrix4Translate(self.effect.transform.projectionMatrix, 0, 0.1, 1.2);
    rotMatrix = GLKMatrix4Translate(self.effect.transform.modelviewMatrix,0,0,-2);
    self.effect.transform.modelviewMatrix = rotMatrix;

        /*********************
         MAPPING UIVIEW ONTO THE FACE
         ****************/

        CGColorSpaceRef colourSpace = CGColorSpaceCreateDeviceRGB();

        self.effect.texture2d0.enabled = true;

        GLubyte *pixelBuffer = (GLubyte *)malloc(
                                                 4 *
                                                 myView.bounds.size.width * coordToPixScale *
                                                 myView.bounds.size.height * coordToPixScale);

            CGContextRef context =
            CGBitmapContextCreate(pixelBuffer,
                                  myView.bounds.size.width*coordToPixScale, myView.bounds.size.height*coordToPixScale,
                                  8, 4*myView.bounds.size.width *coordToPixScale,
                                  colourSpace,
                                  kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
            CGColorSpaceRelease(colourSpace);

            // draw the view to the buffer
            [myView.layer renderInContext:context];

            // upload to OpenGL
            glTexImage2D(GL_TEXTURE_2D, 0,
                         GL_RGBA,
                         myView.bounds.size.width * coordToPixScale, myView.bounds.size.height * coordToPixScale, 0,
                         GL_RGBA, GL_UNSIGNED_BYTE, pixelBuffer);

            glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
            glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
            glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
            glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

            // clean up
            CGContextRelease(context);

        glGenBuffers(1, &texArray);
        glBindBuffer(GL_ARRAY_BUFFER, texArray);
        glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
        glBufferData(GL_ARRAY_BUFFER, sizeof(TexCoords), TexCoords, GL_STATIC_DRAW);

        glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 0,0);

        /**************************
         ******************************************/
        free(pixelBuffer);

    glGenRenderbuffers(1, &depthBuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, depthBuffer);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, myView.bounds.size.width * coordToPixScale, myView.bounds.size.height * coordToPixScale);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthBuffer);

    glEnable(GL_DEPTH_TEST);

    glGenBuffers(1, &vertexArray);
    glBindBuffer(GL_ARRAY_BUFFER, vertexArray);
    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);
    glVertexAttribPointer(GLKVertexAttribPosition,3,GL_FLOAT,GL_FALSE,0,0);

} 
```

**绘制时调用此方法：**

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {

    self.opaque = NO;

    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    [self.effect prepareToDraw];

    glDrawArrays(GL_TRIANGLES, 0, sizeof(Vertices) / (sizeof(GLfloat) * 3));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:20:56.657

看到您正在使用[GLKit](http://developer.apple.com/library/mac/#documentation/GLkit/Reference/GLKit_Collection/_index.html)，我认为您可以更轻松地加载纹理。首先创建您的`CGImageRef`：

```
 CGImageRef image0 = 
  [[UIImage imageNamed:@"image0.png"] CGImage]; 
```

将其加载到`GLKTextureInfo`ivar`textureInfo0`中，如下所示：

```
 self.textureInfo0 = [GLKTextureLoader 
  textureWithCGImage:image1
  options:[NSDictionary dictionaryWithObjectsAndKeys:
     [NSNumber numberWithBool:YES], 
     GLKTextureLoaderOriginBottomLeft, nil] 
  error:NULL]; 
```

对第二个纹理执行完全相同的操作。那应该是命名`textureInfo1`的。

加载纹理坐标是使用属性完成`glEnableVertexAttribArray`的。我想你上面已经设置好了。您需要将坐标从纹理映射到目标三角形。例如，如果您想绘制一个正方形 - 它由两个三角形组成 - 您需要将源图像的 S 和 T 坐标映射两次，即针对每个相应的三角形。例如带坐标的三角形 1：`glVertexAttribPointer``GLKVertexAttribTexCoord0`

```
{0.0f, 0.0f}, {1.0f, 0.0f}, {0.0f, 1.0f}. 
```

*（如果你绘制你会看到它是一个三角形）*

然后，正方形的第二个三角形如下：

```
{1.0f, 0.0f}, {0.0f, 1.0f}, {1.0f, 1.0f}. 
```

接下来，在您的绘图方法中；

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect 
```

首先，设置初始纹理：

```
 self.effect.texture2d0.name = self.textureInfo0.name;
    self.effect.texture2d0.target = self.textureInfo0.target;

    [self.effect prepareToDraw]; 
```

根据需要绘制三角形`glDrawArrays`。然后，用第二个纹理替换：

```
 self.effect.texture2d0.name = self.textureInfo1.name;
    self.effect.texture2d0.target = self.textureInfo1.target;

   [self.effect prepareToDraw]; 
```

并用 绘制其余的三角形`glDrawArrays`。他们将使用第二个纹理。

继续用不同的实例替换`self.effect.texture2d0.name`和绘制不同的纹理。`self.effect.texture2d0.target``GLKTextureInfo`

# php - 蛋糕php中的路由

> ID：14480635
> 
> 赞同：0
> 
> 时间：2013-01-23T13:16:01.067
> 
> 标签：php, .htaccess, cakephp, routing

我有以下网址

```
example.com/show.php?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 
```

我想将它重定向到控制器测试操作 redirs。我如何通过 cake php 路由或通过 htaccess 来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:30:48.147

您可以在`app/Config/routes.php`文件中为此输入一个简单的路由：

```
Router::connect('/show.php', array('controller' => 'tests', 'action' => 'redirs')); 
```

如果需要，您可以在您的操作中处理查询字符串中传递的任何内容。

# entity-framework - 将我自己的属性添加到 EF 设计器

> ID：14480642
> 
> 赞同：0
> 
> 时间：2013-01-23T13:16:23.280
> 
> 标签：entity-framework, c#-4.0, sql-server-ce

我在我的项目中针对 SQL server Compact 4.0 本地数据库使用 vs2010 和内置 EF 设计器。（设计优先）

我试图（通过设计器）向其中一个实体添加一个在数据库中不存在（也没有计划）的新属性：add-new scalar property....，但是当我试图验证它时，我得到一个错误：

> 属性“x”不是地图

我的问题：

我可以通过设计器将我自己的属性添加到架构中吗？并且下划线数据库中不存在该属性。（我想我可以）？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:20:17.660

您可以通过创建具有所需属性的实体的部分类来将非数据库字段添加到您的实体。这些不会用于 ORM。

```
public partial class MyEntity {

    public string StringStatusCode { get;set;}
} 
```

# java - 如何将列表发送到请求它的 jsp？

> ID：14480645
> 
> 赞同：2
> 
> 时间：2013-01-23T13:16:25.667
> 
> 标签：java, jakarta-ee, servlets, jsp-tags

让我们假设有一个需要显示由特定*IP*`jsp`共享的文件列表。客户端在他的本地服务器上打开它，并将请求发送到远程服务器以获取列表。*`jsp`*

 *`Servlet`服务器上处理请求并获取该 IP 共享的文件列表。现在 servlet 如何将该列表发送到请求它的 jsp 页面？

```
JSP :

connection.openConnection(); // Connection sends IP as the query parameter to the 
                             // remote servlet 
```

* * *

```
Servlet :

doGet(..parameters..) {
 list = getList(forThatIP);
 // NOW HOW DO I SEND THIS LIST ?
} 
```

我认为的一种方法是将整个数据作为查询字符串发送到客户端的 servlet（运行诸如 tomcat 之类的服务器），然后将该列表存储到某个文件中。稍后 jsp 可以解析文件并显示数据。但这似乎不是一个好的选择。

*注意：成功发送 IP 到远程 servlet 后，servlet 转发时调用 JSP*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:18:32.257

您可以在 Servlet 中使用 request.setAttribute()。然后，您可以使用 JSP 标记来检索 JSP 中的值。对此进行一些调查。

**编辑 ：**

在 Servlet doGet 方法中，您可以设置一个属性，例如 listOfFiles 为：

```
resquest.setAttribute("listOfFiles",list); 
```

然后在 JSP 中，您可以使用 EL 表达式检索它：

```
${listOfFiles} 
```

这是 JSP 的一个内置特性。

或者，您可以使用

```
<% request.getAttribute("listOfFiles")%> 
```

但是在 JSP 中嵌入 Java scriptlet 是不好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:23:57.303

实际上这取决于如何调用jsp。

你在上面发帖吗？servlet 是否执行转发？还是一个 sendRedirect() ？

根据this有很多方法可以将数据发送到您的jsp。一种是使用请求属性或更好，使用请求范围的 bean。另一个可以将您的列表的某种表示形式作为发布参数发布（无论是 json、xml 还是您的某种自定义格式）。

要考虑的另一件事是，您在使用什么？杰夫? 一些Spring库？据此，可能有其他更好（或更差）的方式来发送数据。

如果在一个小项目上使用简单的 JSP/Servlet，我会亲自使用 request.setAttribute() 方式，确实这将迫使我通过类似的方式调用 jsp

```
request.setAttribute("myList", yourListObject);
request.getRequestDispatcher("yourjsp.jsp").forward(request, response); 
```

然后在jsp中你可以：

```
<% Object myListObj = pageContext.getRequest().getAttribute("myList"); %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:19:56.290

如果您通过连接传递复杂数据（列表等），您可以考虑使用 JSON 或 XML。您的 JSP 代码应该能够使用正确的库轻松解析。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:33:56.390

当您从代码调用 servlet 时，最好的方法是使用 HttpServlet 并模仿浏览器行为。

传递 URL 中的数据是一个`GET`请求。仅对相对较小的数据块有用，但语义看起来像您想要的（“获取一点数据”）。类似的东西`http://myremoteserver.com/myServlet?ip=...`。您需要对参数进行正确编码（Java API 可以处理）。

通过写入流来传递数据将是一个`POST`请求。它对传递给服务器的数据没有限制，但语义不同（“更改系统中的某些内容”）。您可以在写入的内容中将数据作为参数传递，我不确定如何解码。另一种选择是使用`Servlet`(no `HttpServlet`) 并只处理原始数据。

在这两种情况下，响应都将在连接输出流中返回。你可以使用任何你喜欢的格式（像 JSON 这样的标准格式可能是最好的，即使是定义你自己的 XML）。在这种情况下，一个可行的替代方案是文件名由“安全”字符（如`\n`或`|`）分隔。很快，但将来会变得不那么灵活。

我会去`GET`请求和`JSON encoding`。*

# entity-framework - 如何在实体框架中为不同的用户设置不同的连接字符串

> ID：14480646
> 
> 赞同：4
> 
> 时间：2013-01-23T13:16:29.483
> 
> 标签：entity-framework, asp.net-mvc-4, entity-framework-4.1

我有一个要求，我需要为不同的用户提供不同的连接字符串。这个想法是在登录屏幕上提供`username`and`password`用作连接字符串的`username`and `password`。从而使应用程序为不同的用户使用不同的连接字符串，并在整个应用程序中使用这个连接字符串。

如何在 EF 4.1 中获取此设置

PS：我正在使用`DbContext`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T14:33:33.030

感谢凯文·荣汉斯

我就是这样做的。

在模型上下文类中

```
public class MyEntities : DbContext
{
    public MyEntities (string connectionString)
        : base(connectionString)
    {
    } 
```

然后在登录控制器中

```
var dataConnection = WebConfigurationManager.OpenWebConfiguration("/").ConnectionStrings.ConnectionStrings["MyConnectionString"].ConnectionString;
dataConnection = dataConnection.Substring(0, dataConnection.LastIndexOf("\"")) + ";USER ID=" + userName +";Password=" + password + "\"";
Session["connectionString"] = dataConnection; 
```

和从其他地方

```
var _db = new MyEntities (Session["connectionString"].ToString()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T13:37:18.960

您可以使用以下[DbContext 构造函数](http://msdn.microsoft.com/en-us/library/gg679522%28v=vs.103%29.aspx)，它接受连接字符串或名称作为参数。

```
public DbContext(
string nameOrConnectionString,
DbCompiledModel model
) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T13:55:07.430

我不知道您的具体问题是哪一个，它与 MVC 无关，它仅适用于 EF。

如果我正确理解您想要做什么，您可能为每个用户设置了单独的数据库，但您只有一个用于登录的用户帐户信息的数据库

您可以使用该用户的特定连接字符串向该数据库添加一个字段，即用户登录数据库。然后，当您登录用户时，使用该数据库的 DbContext 并登录，然后获取 connectionString 的值并为登录用户的特定数据库生成新的 DbContext。

如果您需要更多帮助，请发表评论。

# java - 原因：java.lang.NoSuchFieldError：运行 JUnit 测试时为 NULL

> ID：14480648
> 
> 赞同：2
> 
> 时间：2013-01-23T13:16:40.033
> 
> 标签：java, spring, hibernate, junit

我正在从我用 Spring + Hibernate + Java 6 开发的应用程序中运行一个测试用例。

当我尝试运行它时出现此错误：

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'citaDAOImpl' defined in file [E:\PROXECTOS\SICCO\workspace\SICCO\aplicacion\target\classes\es\sergas\sicco\modelo\datos\dao\cita\impl\CitaDAOImpl.class]: BeanPostProcessor before instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.config.internalTransactionAdvisor': Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:452)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 24 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.config.internalTransactionAdvisor': Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:86)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:100)
    at org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.findCandidateAdvisors(AnnotationAwareAspectJAutoProxyCreator.java:84)
    at org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.shouldSkip(AspectJAwareAdvisorAutoProxyCreator.java:107)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessBeforeInstantiation(AbstractAutoProxyCreator.java:278)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:880)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:852)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:446)
    ... 36 more
Caused by: java.lang.NoSuchFieldError: NULL
    at org.springframework.expression.TypedValue.<clinit>(TypedValue.java:32)
    at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:85)
    at org.springframework.expression.spel.support.StandardEvaluationContext.<init>(StandardEvaluationContext.java:74)
    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124)
    at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1299)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:224)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:311)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 49 more 
```

我用谷歌搜索了它，他们说这是由类路径中两个不同版本的 JUnit 引起的，但我认为这不是我的情况，因为如果我执行：

```
 mvn dependency:tree -Dverbose -Dincludes=junit 
```

我得到：

```
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ aplicacion ---
[WARNING] Missing POM for org.hibernate:hibernate-core:jar:3.5.6-FINAL
[WARNING] Missing POM for org.hibernate:hibernate-annotations:jar:3.5.6-FINAL
[INFO] es.sergas.sicco:aplicacion:jar:0.0.1-SNAPSHOT
[INFO] \- junit:junit:jar:4.9:test
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.350s
[INFO] Finished at: Wed Jan 23 14:07:46 CET 2013
[INFO] Final Memory: 7M/154M
[INFO] ------------------------------------------------------------------------ 
```

有任何想法吗？

编辑：添加 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>SICCO</artifactId>
        <groupId>es.sergas.sicco</groupId>
        <version>0.0.1-SNAPSHOT</version>
        <relativePath>..</relativePath>
    </parent>

    <artifactId>web</artifactId>
    <packaging>war</packaging>

    <build>
        <finalName>SICCO</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <!-- ficheros que no forman parte del war -->
                    <packagingExcludes>WEB-INF/classes/dist/</packagingExcludes>
                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <profiles>
        <!-- profile para modificar ficheros de configuración según entorno. Profile: 
            dist parámetro: env [entorno] -->
        <profile>
            <id>dist</id>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>1.7</version>
                        <executions>
                            <execution>
                                <id>dist-config</id>
                                <phase>compile</phase>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                                <configuration>
                                    <tasks>
                                        <echo message="--- Preparando distribución para entorno de ${env} ---" />
                                        <!-- modificamos ficheros para distribución -->
                                        <copy todir="${project.build.outputDirectory}" overwrite="true">
                                            <fileset dir="src/main/resources/dist/${env}" />
                                        </copy>
                                    </tasks>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>

    <dependencies>

        <dependency>
            <groupId>es.sergas.sicco</groupId>
            <artifactId>aplicacion</artifactId>
            <version>${project.parent.version}</version>
        </dependency>

        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>

        <!-- Spring security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-taglibs</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Utils -->
        <dependency>
            <groupId>displaytag</groupId>
            <artifactId>displaytag</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>es.sergas</groupId>
            <artifactId>log4jcomponent</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.13</version>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <!-- CIJAW -->
        <dependency>
            <groupId>es.sergas</groupId>
            <artifactId>cijaw</artifactId>
            <version>1.05</version>
        </dependency>

        <dependency>
            <groupId>org.jdom</groupId>
            <artifactId>jdom</artifactId>
            <version>1.1.3</version>
        </dependency>

        <dependency>
            <groupId>org.bouncycastle</groupId>
            <artifactId>bcprov-ext-jdk16</artifactId>
            <version>1.46</version>
        </dependency>

        <dependency>
            <groupId>org.bouncycastle</groupId>
            <artifactId>bcmail-jdk14</artifactId>
            <version>1.38</version>
        </dependency>

        <dependency>
            <groupId>jaxen</groupId>
            <artifactId>jaxen</artifactId>
            <version>1.1.4</version>
        </dependency>

        <dependency>
            <groupId>es.sergas</groupId>
            <artifactId>security</artifactId>
            <version>1.04</version>
        </dependency>

        <!-- JUnit -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${org.springframework.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.9</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j.version}</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

# augmented-reality - 使用哪个框架来检测单张图像中的增强现实标记

> ID：14480659
> 
> 赞同：3
> 
> 时间：2013-01-23T13:17:02.530
> 
> 标签：augmented-reality, marker, artoolkit

我需要在 C/C++、python 或 MATLAB 中的 OS X 上检测单个图像中的增强现实标记（或至少在磁盘上保存的视频中，而不是实时捕获）。

我尝试了 ARToolKit，但看起来从磁盘读取视频只能在 Windows 上运行：

```
vid = arVideoOpen( "inputDevice=AVI_FILE,fileName=/Users/jw/Desktop/matlabvideo/example.avi" ); 
```

该框架应该专门用于 ARMarker 检测（以获得更高的边缘点精度），而不仅仅是简单的模式检测，例如使用 openCV。

有谁知道 ARToolKit 的替代品或如何使用 ARToolKit 在 OS X 上阅读视频？我已经进行了深入搜索，但没有找到任何可行的替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:39:56.247

好的，经过更多搜索后，我找到[了 Aruco](http://www.uco.es/investiga/grupos/ava/node/26)。适用于具有单个图像的 OS X。缺点是它只适用于某些标记......

# javascript - RSS 源谷歌媒体：组

> ID：14480662
> 
> 赞同：3
> 
> 时间：2013-01-23T13:17:11.627
> 
> 标签：javascript, api, rss

我的问题如下：我写了一个 rss.xml

```
<media:group>
  <media:thumbnail url:"johndoe.at/images/test.jpg" width='auto' height='50'>
  ....
  .... 
```

一张照片。

可以从 rss 中获取所有内容，但无法提取媒体内容。我怎样才能做到这一点？我使用以下 JS 代码提取的所有其他字段：

```
function initialize() {
  var feed = new google.feeds.Feed("http://fastpshb.appspot.com/feed/1/fastpshb");
  feed.load(function(result) {
    if (!result.error) {
      var container = document.getElementById("feed");
      for (var i = 0; i < result.feed.entries.length; i++) {
        var entry = result.feed.entries[i];
        var title   = entry.title;
        var content = entry.content;
      }
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:57:26.693

我相信这将作为 mediaGroups 属性数组提供，因此您将拥有

```
// verify mediaGroups are present and then retrieve the first one's URL.
if (entry.mediaGroups) {
   var thumbnail = entry.mediaGroups[0].contents[0].url;
} 
```

# android - 渐进式流视频播放器

> ID：14480676
> 
> 赞同：0
> 
> 时间：2013-01-23T13:18:04.723
> 
> 标签：android, video-streaming, android-videoview

我正在开发一个应用程序，其中包含要从 URL 下载的视频列表。每个视频的时长约为 10 分钟。现在，我想要的是在后台逐步下载视频，并类似地显示下载的视频，就像在 Youtube 中一样。

我试过使用`VideoView`，但它不能成功。

那么有可能在android的帮助下做到这一点`VideoView`吗？

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T13:20:26.080

这个[http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/](http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/)会帮助你。会评论，但我不能。

# php - Wordpress/Jetpack：我的代码的哪一部分导致 Jetpack 崩溃？

> ID：14480681
> 
> 赞同：0
> 
> 时间：2013-01-23T13:18:21.997
> 
> 标签：php, wordpress, custom-post-type

我创建了一个用于处理事件图像的自定义帖子类型（图像），我还添加了一个自定义图像上传器元字段，一切都按照我想要的方式工作，除了它破坏了喷气背包。我从 Jetpack 的经验中知道，插件可能会产生意外的输出，导致 jetpack 出现“-32700”错误，但我不知道是代码的哪一部分导致了它。图片上传器的代码是：

```
<?php
function add_custom_meta_boxes() {

// Define the custom attachment for posts
add_meta_box(
    'wp_image_attachment',
    'Custom Attachment',
    'wp_image_attachment',
    'images',
    'side'
);

} // end add_custom_meta_boxes
add_action('add_meta_boxes', 'add_custom_meta_boxes');

function wp_image_attachment() {

wp_nonce_field(plugin_basename(__FILE__), 'wp_image_attachment_nonce');

$html = '<p class="description">';
    $html .= 'Upload your image here.';
$html .= '</p>';
$html .= '<input type="file" id="wp_image_attachment" name="wp_image_attachment" value="" size="25">';

echo $html;

} // end wp_image_attachment

function save_custom_meta_data($id) {

/* --- security verification --- */
if(!wp_verify_nonce($_POST['wp_image_attachment_nonce'], plugin_basename(__FILE__))) {
  return $id;
} // end if

if(defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) {
  return $id;
} // end if

if('page' == $_POST['post_type']) {
  if(!current_user_can('edit_page', $id)) {
    return $id;
  } // end if
} else {
    if(!current_user_can('edit_page', $id)) {
        return $id;
    } // end if
} // end if
/* - end security verification - */

// Make sure the file array isn't empty
if(!empty($_FILES['wp_image_attachment']['name'])) {

    // Setup the array of supported file types. In this case, it's just PDF.
    $supported_types = array('image/gif', 'image/jpeg', 'image/jpg', 'image/png');

    // Get the file type of the upload
    $arr_file_type = wp_check_filetype(basename($_FILES['wp_image_attachment']['name']));
    $uploaded_type = $arr_file_type['type'];

    // Check if the type is supported. If not, throw an error.
    if(in_array($uploaded_type, $supported_types)) {

        // Use the WordPress API to upload the file
        $upload = wp_upload_bits($_FILES['wp_image_attachment']['name'], null, file_get_contents($_FILES['wp_image_attachment']['tmp_name']));

        if(isset($upload['error']) && $upload['error'] != 0) {
            wp_die('There was an error uploading your file. The error is: ' . $upload['error']);
        } else {
            add_post_meta($id, 'wp_image_attachment', $upload);
            update_post_meta($id, 'wp_image_attachment', $upload);      
        } // end if/else

    } else {
        wp_die("The file type that you've uploaded is not an image.");
    } // end if/else

} // end if

} // end save_custom_meta_data
add_action('save_post', 'save_custom_meta_data');

function update_edit_form() {
echo ' enctype="multipart/form-data"';
} // end update_edit_form
add_action('post_edit_form_tag', 'update_edit_form');

?> 
```

我知道要放在这里的代码很多，但是上次我链接到 pastebin [;)] 时我被喊了，但是任何帮助都将不胜感激，因为该站点即将完成，但我真的很想利用 Jetpack 的宣传功能，所以我不想牺牲它，但我需要这个位才能工作。

提前谢谢了！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:32:47.283

嘘！菜鸟错误！意外的输出似乎是由于我的插件的该部分被添加到原始自定义帖子类型部分中，当然以

```
?> 
```

上面的部分开始于

```
<?php 
```

哪个 wordpress 似乎不喜欢。

问题解决了。目前...

**注意：这可能现在可以删除，或者留作将来参考:) **

# wcf - 如何将 Facebook SecurityToken 委托给 WCF 服务

> ID：14480685
> 
> 赞同：2
> 
> 时间：2013-01-23T13:18:31.623
> 
> 标签：wcf, .net-4.5, wif, smartclient, identity-delegation

我有以下组件：WPF 应用程序、身份服务器、WCF Web 服务、

WPF 应用程序使用 WebBrowser 控件通过使用 WS-Federation 的 Thintecture Identity Server 进行身份验证。Identity Server 已启用 Home Realm Discovery 并允许使用 Facebook、Live ID 和 Google 进行身份验证。身份验证后，我收到 ReqquestSecurityTokenResponse 消息，我将其转换为 SecurityToken。

得到这个 SecurityToken 后，我想调用 WebService。我想我需要创建由 Thintecture Identity Server 再次发布的 ActAsToken，但我无法配置它。

```
var serviceAddress = "http://localhost:7397/Service1.svc";
var token3 = token2.ToSecurityToken();
var binding = new WS2007FederationHttpBinding(WSFederationHttpSecurityMode.Message);
binding.Security.Message.IssuedKeyType = System.IdentityModel.Tokens.SecurityKeyType.SymmetricKey;
binding.Security.Message.IssuerAddress = new EndpointAddress("https://dev3.example.com/Identity/issue/wsfed");
binding.Security.Message.IssuerBinding = new WS2007HttpBinding();
var factory = new ChannelFactory<IService1Channel>(binding,
    new EndpointAddress(
        new Uri(serviceAddress),
        new DnsEndpointIdentity("dev3.example.com")));
factory.Credentials.SupportInteractive = false;
var proxy = factory.CreateChannelWithActAsToken(token3);
{

    try
    {
        var output = proxy.GetData(1);
        MessageBox.Show(output);
        proxy.Dispose();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
} 
```

但我有例外。

WebService 是使用 Identity and access... VS 扩展配置的。

这种情况可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:03:03.603

您不需要 ActAs - 您可以使用 CreateChannelWithIssuedToken 方法来创建您的 WCF 代理。

You also need to configure bearer keys on the WCF service and client (instead of SymmetricKey).

# html - 适合不同屏幕的背景

> ID：14480688
> 
> 赞同：1
> 
> 时间：2013-01-23T13:18:35.063
> 
> 标签：html, css

我使用 CSS 代码为我的网站创建了一个背景，它成功运行，但问题是一旦我在不同的屏幕上运行它，无论它是大还是小，我都不会得到类似的结果。当我在`13 inch screen`浏览器上运行它时**放大**并且我得到的形式可能与它不一样，`18 inch`它显然不会有确切的形式，但或多或​​少我需要它看起来像。有什么建议么？提前谢谢

```
body {
background-image: url(../images/background.jpg);
background-repeat: no-repeat;
    } 
```

我现在遇到的另一个问题是背景不是全屏的。它的分辨率是1920x1080，虽然我可以在整个网络浏览器页面上看到图片，但我仍然看不到照片的其他细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:25:33.823

我想你需要

```
background-size: cover; 
```

有一些浏览器不一致，这可能意味着最好使用 jquery 插件。

看看[http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)它允许您使用根据屏幕大小调整大小的背景图像。它还处理 IE。纳夫说。

另请查看[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

我不是 100% 你想要达到的目标，但上面的链接值得一看。

这是css3方式

```
html { 
    background: url(../images/background.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

# windows-phone-7 - 在 Windows Phone 7 中启动我的应用程序时需要图像幻灯片

> ID：14480691
> 
> 赞同：1
> 
> 时间：2013-01-23T13:18:49.037
> 
> 标签：windows-phone-7

如何获得时间间隔为 2 秒的图像幻灯片。我已经从stackoverflow引用了以下代码，但是在运行iam nt时显示任何图像..请致电iam哪里出错了...

xml:

```
<image Name=myImg Source={Binding bi}/> 
```

代码：

```
private DispatcherTimer tmr = new DispatcherTimer();

private List<string> images = new List<string>();

private int imageIndex = 0;

public MainPage()
{
    InitializeComponent();

    Loaded += new RoutedEventHandler(MainPage_Loaded);
}

void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    tmr.Interval = TimeSpan.FromSeconds(5);
    tmr.Tick += new EventHandler(tmr_Tick);

    LoadImages();

    ShowNextImage();
}

private void LoadImages()
{
    // list the files (includede in the XAP file) here
    images.Add("/images/filename1.jpg");
    images.Add("/images/filename2.jpg");
    images.Add("/images/filename3.jpg");
    images.Add("/images/filename4.jpg");
}

private void ShowNextImage()
{
    Imagesource bi = new BitmapImage(new Uri(images[imageIndex], UriKind.Relative));

    myImg.Source = bi;

    imageIndex = (imageIndex + 1) % images.Count;
}

void tmr_Tick(object sender, EventArgs e)
{
    ShowNextImage();
}

protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs      e)
{
    if (!tmr.IsEnabled)
    {
        tmr.Start();
    }

    base.OnNavigatedTo(e);
}

protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
    {
        tmr.Stop();

        base.OnNavigatedFrom(e);
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T02:30:24.000

更改`Name=myImg`为`x:Name="myImg"`并完全删除该`Source`属性。否则，它看起来应该可以工作。

# extjs - 自定义对话框 extjs

> ID：14480692
> 
> 赞同：2
> 
> 时间：2013-01-23T13:18:50.140
> 
> 标签：extjs, extjs4

我尝试为我的应用程序编写自定义对话框。我想写了一个Ext.window.MessageBox的子类，并通过参数传递标题和消息。我写道：

```
Ext.define('CRUDManantiales.view.dialog.NoUserSelected',{
    extend: 'Ext.window.MessageBox',
    alias: 'dialog.noUserSelected',

    initComponent: function(){
        this.title = this.titulo;
        this.msg = 'No se ha seleccionado ningún usuario.\n Asegurese de haber elegido un usuario\n\
                           al cual aplicarle la operación.';
        this.buttons = Ext.MessageBox.OK;
        this.icon = Ext.MessageBox.ERROR;
        this.callParent(arguments)
    }
}) 
```

但是当创建并显示对话框时：

```
Ext.create('CRUDManantiales.view.dialog.NoUserSelected',{titulo: 'Agregar administrador'}).show(); 
```

萤火虫 说：

> TypeError: cfg 在 MessageBox.js 上未定义
> “NetworkError: 404 Not Found - [http://appadmin.local/x-message-box-error](http://appadmin.local/x-message-box-error) ”

任何想法 ？注意：我使用 ExtJs 4.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:05:24.603

您需要将配置对象传递给方法 Ext.Msg。[show(cfg)](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.MessageBox-method-show)，不设置组件配置。

您可以编写自定义方法，如：

```
...
initComponent: function(){
    this.callParent(arguments)
},

showError: function() {
    var cfg = {
        title: this.titulo,
        msg: 'No se ha seleccionado ningún usuario.\n Asegurese de haber elegido un usuario\n\al cual aplicarle la operación.',
        buttons: Ext.MessageBox.OK,
        icon: Ext.MessageBox.ERROR
    };
    this.show(cfg);
}
... 
```

并显示对话框：

```
Ext.create('CRUDManantiales.view.dialog.NoUserSelected',{titulo: 'Agregar administrador'}).showError(); 
```

# python - Python：创建一个类来读取目录中的文件

> ID：14480693
> 
> 赞同：4
> 
> 时间：2013-01-23T13:18:52.140
> 
> 标签：python

我正在尝试自学如何在 Python 中上课。我目前能够编写一个类，使我能够使用非常基本的同一个类绘制多个形状。

我在使用类进行更高级的任务时遇到了麻烦，例如，我希望能够创建一个包含诸如特定目录中有多少文件之类的函数的类。

我想我的问题是如何创建一个读入目录并告诉我目录中有多少文件的类？

谢谢，如果不清楚，请见谅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:23:16.723

`os.listdir()`返回目录的内容列表。如果我正确理解了这个问题。

因此，如果您想为它创建一个新类，则一个类将为该函数保存一个函数包装器。不确定“读入目录”是什么意思

```
class YourClass:

    def __init__(self):
         #initialize here

    def countFilesInDir(self,directory):
         return len(os.listdir(directory)) 
```

或类似的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:24:01.193

您正在寻找的功能是[`os.listdir`](http://docs.python.org/2/library/os.html#os.listdir).

给定一个目录`/tmp/foo`，其中包含名为`bar`and的文件`baz`：

```
>>> import os
>>> os.listdir('/tmp/foo')
['baz', 'bar'] 
```

当您使用 时`os.listdir`，您还需要使用[`os.path.isfile`](http://docs.python.org/2/library/os.path.html#os.path.isfile)来测试您正在处理的每个条目是否实际上是一个文件，因为目录名称也会返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:26:50.187

使用类似乎有点矫枉过正，但这是一个起点：

```
import os

class DirectoryLister(object):
    def __init__(self, *args):
        self.directory = os.listdir(*args)

    @property
    def count(self):
        return len(self.directory) 
```

像这样使用：

```
dl = DirectoryLister('/home/jon')
print dl.directory
print dl.count 
```

您可能还想提供其他参数来过滤掉非文件，或者可能考虑`glob`进行通配符匹配等...

# qt - 将 QStackedWidget 调整为打开的页面

> ID：14480696
> 
> 赞同：8
> 
> 时间：2013-01-23T13:19:04.873
> 
> 标签：qt, size, qwidget, qstackedwidget

我希望我`QStackedWidget`调整到打开的页面。

我在第一页上附加了很多小部件，但其余页面只有一个按钮。所以他们保持这么大，第一页还可以。

我怎样才能让我`QStackedWidget`拥有正在查看的页面的大小。

我想这样做的原因是我有三个不同的选择，然后我还有其他的东西。如果我更改为有按钮的模式，然后有很多空白，我看不出它为什么不调整大小。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T17:38:49.620

你可以使用这个[Resizable StackedWidget](http://qt-project.org/faq/answer/how_can_i_get_a_qstackedwidget_to_automatically_switch_size_depending_on_th)

在我的实践中，我记得我有从 QStackedWidget 派生的类，并重新定义了 addWidget 方法。在这种方法中，我接下来做了：

```
void ResizableStackedWidget::addWidget(QWidget* pWidget)
{
   pWidget->setSizePolicy(QSizePolicy::Ignored, QSizePolicy::Ignored);
   QStackedWidget::addWidget(pWidget);
} 
```

并使用此插槽连接到 currentChange(QWidget*) 信号：

```
void ResizableStackedWidget::onCurrentChanged(int index)
{
   QWidget* pWidget = widget(index);
   Q_ASSERT(pWidget);
   pWidget->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);
   pWidget->adjustSize();
   adjustSize();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T18:12:55.043

```
// make the stacked widget size to the current page only
for (int i = 0; i < m_ui->stackedWidget->count (); ++i)
{
    // determine the vertical size policy
    QSizePolicy::Policy policy = QSizePolicy::Ignored;
    if (i == m_ui->stackedWidget->currentIndex ())
        policy = QSizePolicy::Expanding;

    // update the size policy
    QWidget* pPage = m_ui->stackedWidget->widget (i);
    pPage->setSizePolicy (policy, policy);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T13:44:21.907

您可以将带有单个按钮的页面包装到具有垂直布局的 QFrame 中，并在底部添加间隔。

# c# - 在 UI 线程上使用 await 是否与阻塞调用相同？

> ID：14480697
> 
> 赞同：2
> 
> 时间：2013-01-23T13:19:05.397
> 
> 标签：c#, multithreading, asynchronous, task

只是大声阅读和思考：如果我`await`在主 UI 线程中调用一个方法，那相当于是一个阻塞调用，对吧，因为没有调用 UI 线程的线程？

例如：

```
int Main()
{
    // This would be a blocking call, right?
    await PrintTwoMillionTimes("Hello");

    Console.WriteLine("Phew! Done!");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:20:20.670

不; 的全部意义`await`在于它**不是**阻塞调用。
编译器将 之后的代码`await`转换为回调。

只要您正在等待的东西表现良好（这意味着它不会同步完成其工作），您的 UI 就可以了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T13:21:21.103

不，绝对不是。

关键`await`是它*不会*阻塞。假设结果`PrintTwoMillionTimes`合理，异步方法将立即返回......但它会附加一个延续，以便在结果完成时（在 UI 线程上）执行该方法的其余部分。

因此，假设您有一个工作示例（当前您的方法声明不是`async`，并且返回`int`，并且您没有任何`return`语句......）流程是：

*   异步方法开始
*   `PrintTwoMillionTimes`被调用，它将*启动*一个异步操作，返回代表操作的东西（例如 a `Task`）
*   生成的代码将检查操作是否已经完成：
    *   如果已经完成，则继续执行
    *   否则，将延续附加到任务（或表示操作的任何内容）并且异步方法返回

如果您从异步方法返回`Task`或`Task<T>`从异步方法返回，则返回值可用于指示异步方法本身何时完成（即在您`Console.WriteLine`执行之后）。

当然，这只是一个*非常*简短的描述。你真的应该更详细地阅读 async/await 。[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)是一个合理的起点。

# c# - 订阅另一个类的事件

> ID：14480704
> 
> 赞同：0
> 
> 时间：2013-01-23T13:19:50.247
> 
> 标签：c#, c++, poco

在我的 C++ 程序中，我创建了一个图像按钮控件，该控件具有图像按钮和点击测试功能，以确定鼠标是否在视频内单击。

```
class ImageButton{
public:
ImageButton(int xPos, int yPos, int width, int height);
virtual void onMousePress(); //triggered internally if the mouse clicked inside the button
virtual void onMousePressOutside() //triggered internally if the mouse clicked outside the button
private:
bool hitTest(int, int); //check if is in bounds
}; 
```

现在，我必须在另一个地方使用此`ImageButton`控件。因为，我来自 C#，我记得很容易使用控件并订阅它们的事件，例如

`btnControl.Click += new MouseClickEventHandler(Sender e, EVentArgs e)`

我刚刚开始使用该`Poco`库在 C++ 中获得类似的事件订阅功能，但想问我如何创建这样一个可以在我的第二类中订阅的事件以及在第二类`onMousePress`中`ImageButton`触发订阅的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:18:51.847

如果你想使用类似于代表的东西，这应该非常接近：

```
#include <functional>
//typedef void (*VoidCallback)(void); // only works with static member functions
typedef std::tr1::function<void (void)> VoidCallback;

class ImageButton{
public:
// ...
    VoidCallback onMousePress;
    VoidCallback onMousePressOutside;
private:
    bool hitTest(int x, int y) { onMousePress(); return true; }
};

class ImageButtonWrapper {
private:
    ImageButton m_btn;
    static void foo() { printf("foo happened\n"); }
    void bar() { printf("this bar happened\n"); }
public:
    ImageButtonWrapper() : m_btn(0,0,100,100) {
        m_btn.onMousePress = &foo;
        m_btn.onMousePressOutside = std::bind(&ImageButtonWrapper::bar, this);
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:14:07.110

为了解决上述问题，我会做以下事情，检查它是否对你有帮助。

```
class EventData
{
};

// base class for all the secondary classes which expect to get a call back control from
// the first object where we perform hit-test.

class EventHandler
{
public:
virtual void performAction(EventData* ed) = 0;
};

// Second class constructor can register itself to your first object.

class SecondClass : public EventHandler
{
public:
    SecondClass()
    { 
        ImageButton::registerForEventAction(*this);
    }
    void performAction(EventData* ed)
    {
       // this method gets called back when a hit test gets passed and we will get control
       // at the same time at second object to perform necessary operation.
    }
};

// ... extending your first class with below method, and another member variable.

class ImageButton 
{
// extension to base definition of ImageButton .. assuming namespace kind of convention 
// just for simplicity and completeness

private:
std::vector<EventHandler&> registeredHandlers;

public:
static void ImageButton::registerForEventAction(EventHandler& eh)
{
  // For Simplicity I'm assuming your First class object is singleton, if not you need to
  // figure out how you can get access to first object in your second class.

 ImageButton::getInstance().registeredHandlers.push_back(eh);
}

bool hitTest(int, int)
{
bool success = true; 
// ideally above variable should be set to false at the start setting it to true for 
// readability

   if (success) {
        for (std::vector<EventHandler&>::iterator i = registeredHandlers.begin(); i !=       registeredHandlers.end(); ++i) {
        // pass on any event data if you need to.
           (*i).performAction(NULL);
        }
    } // End of if
}// End of method
}; // End of Class Definition 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:02:40.160

一种方法是应用观察者设计模式。例如，ImageButton 类接收事件，感兴趣的客户端对象将注册到 ImageButton。在事件发生时，ImageButton 会通知所有注册的客户，这些客户反过来负责在他们认为合适的情况下对事件做出反应。

如果您的库提供，另一种类似的方法是使用信号/槽机制。根据我自己的经验，我更喜欢显式观察者模式应用程序而不是信号和插槽，因为程序中的执行流程是显式可见的。当广泛使用单/槽机制时，在某些时候事情开始神奇地发生，很难说出程序在做什么。

多年来，我们一直在产品的 GUI 中使用支持信号和插槽的 Qt。过去，信号和槽无处不在。但是我们改变了我们的政策，只在严格的 GUI 代码中使用它，并且由于上述原因不再让它传播到业务代码中。

# html - 我无法使用以下 css 代码降低输入的高度

> ID：14480711
> 
> 赞同：0
> 
> 时间：2013-01-23T13:20:08.713
> 
> 标签：html, css

请看这个css代码

```
#ContactForm .wrapper {
min-height:30px;
padding-bottom:8px;
} 
#ContactForm .bg {
border:1px solid #aaaaaa;
background-color:#e9e9e9;
float:left;
}
#ContactForm .input {
width:200px;
height:12px;
background:none;
padding:6px 10px 6px 10px;
color:#000;
font:10px Arial, Helvetica, sans-serif;
} 
```

当我在浏览器（firefox）中测试它时，输入块有一定的高度。我尝试将顶部和底部填充值从 6 减少到零，但无济于事。同样将高度从 12 降低到较低的值也无济于事。

它很顽固，固定在某个高度。有什么问题？？如果需要，我也可以提供其他数据。

这是html代码

```
<div  class="wrapper"> <strong>Phone:</strong>
        <div class="bg">
                <input type="text" class="input" >
        </div>
</div> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:32:52.520

我认为降低包装器的高度会停止。如果不是，高度必须从其他因素控制。检查一下。

看看你的代码，这就是解决方案..

更新我们的相同..

```
#ContactForm .wrapper {
min-height:30px;   (CHECK THIS)
padding-bottom:8px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:23:21.890

1.  确保您输入的表单的 ID 为“ContactForm”

2.  删除和之间的空格`#ContactForm`，`.input`如下例所示

    ```
    #ContactForm.input {
    width:200px;
    height:12px;
    background:none;
    padding:6px 10px 6px 10px;
    color:#000;
    font:10px Arial, Helvetica, sans-serif;
    } 
    ```

那应该行得通。

# java - 在表单提交期间发送特殊/区域特定字符

> ID：14480715
> 
> 赞同：0
> 
> 时间：2013-01-23T13:20:20.427
> 
> 标签：java, html, jsp, encoding, struts

我有一个表单，它将提交给 Struts Action 并得到处理并返回输出。

但是输入数据有“Louvière”之类的特殊字符，如果用户提交表单，在后端，Struts 会将该值作为“La Louvière”获取。

我该如何处理这种情况，因为输入应该特别接受欧元字符。

在jsp页眉中我编码为

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

和形式定义为

```
<s:form id="myform" action="myAction" method="POST"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:33:17.953

默认情况下，编码等于包含该`<form>`元素的文档的编码。因此，要么更改包含`<form>`类似内容的文档的字符集指令

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

或者将`accept-charset`属性添加到表单元素，如下所示：

```
<s:form id="myform" action="myAction" method="POST" accept-charset="utf-8"> 
```

然后浏览器在提交 POST 请求时应该使用声明的字符集。

旁注，欧元符号 (€) 不是 iso-8859-1 的一部分，而是 iso-8859-15 的一部分。

# java - 使用 Java 使用 Selenium WebDriver 加载 Chrome 配置文件

> ID：14480717
> 
> 赞同：25
> 
> 时间：2013-01-23T13:20:29.487
> 
> 标签：java, google-chrome, profile, selenium-webdriver

我在让 Selenium 加载 chrome 配置文件时遇到了一些麻烦。

```
String pathToChrome = "driver/chromedriver.exe";
System.setProperty("webdriver.chrome.driver", pathToChrome);

DesiredCapabilities capabilities = DesiredCapabilities.chrome();
String chromeProfile = "C:\\Users\\Tiuz\\AppData\\Local\\Google\\Chrome\\User Data\\Default";
ArrayList<String> switches = new ArrayList<String>();
switches.add("--user-data-dir=" + chromeProfile);
capabilities.setCapability("chrome.switches", switches);
WebDriver driver = new ChromeDriver(capabilities);
driver.get("http://www.google.com"); 
```

它开始很好并且工作完美，但我想加载默认配置文件，因为我想在启用一些扩展和测试一些首选项的情况下对其进行测试。

有谁知道为什么这段代码不起作用？

我已经在 Windows 7 x64 上使用 Selenium 2.29.1 和 2.28.0 和 chromedriver 26.0.1383.0 对其进行了测试。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2016-01-25T19:11:04.813

这是一个老问题，但我仍然无法让它工作，所以我做了更多的研究来了解发生了什么。@PrashanthSams 的答案是正确的，但我错误地添加`\Default`到配置文件路径的末尾

我发现 Chrome 会附加`\Default`到`user-data-dir`. 因此，如果您的配置文件路径指定为：

`user-data-dir=C:\Users\user_name\AppData\Local\Google\Chrome\User Data\Default\`

它会附加`\Default`，你最终会在：

`C:\Users\user_name\AppData\Local\Google\Chrome\User Data\Default\Default`

如果您在该用户配置文件下正常打开 chrome，这与您将获得的配置文件不同。

如果您打开命令提示符，导航到 chrome 可执行目录，然后使用与此类似的指定选项运行 chrome，您还可以验证您的设置：

`chrome.exe --user-data-dir="C:\Users\user_name\AppData\Local\Google\Chrome\User Data"`

最后，您可以转到 Chrome 中的新选项卡并浏览到`chrome://version/`您将看到正在使用的实际配置文件。它将像这样列出：

**配置文件路径** C:\Users\user_name\AppData\Local\Google\Chrome\User Data\Default

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-07T11:46:52.167

**这些组合对我有用:)**

```
System.setProperty("webdriver.chrome.driver","C:\\chromedriver.exe");
ChromeOptions options = new ChromeOptions();
options.addArguments("user-data-dir=C:/Users/user_name/AppData/Local/Google/Chrome/User Data");
options.addArguments("--start-maximized");
driver = new ChromeDriver(options); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-12-04T16:06:14.043

你应该试试这个

```
op.addArgument("--user-data-dir=C:/Users/username/AppData/Local/Google/Chrome/User Data/");

op.addArgument("--profile-directory=Profile 2"); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-03-27T21:43:13.920

Chrome 在 Linux 上存储配置文件的路径。

```
String chromeProfilePath = "/home/(user)/.config/google-chrome/Profile3/"; 
```

创建 ChromeOptions 对象，禁用扩展并添加我想通过“.addArguments”使用的配置文件。

```
ChromeOptions chromeProfile = new ChromeOptions();
chromeProfile.addArguments("chrome.switches", "--disable-extensions");
chromeProfile.addArguments("user-data-dir=" + chromeProfilePath); 
```

正如 JasonG 上面所说，在此之后，Google-Chrome 会将 \Default 附加到您提供的字符串中。

“/Profile3”目录中有一个“/Default”文件夹，所以我所做的是......

我将“/Profile3”的内容复制到“/Default”文件夹。

像往常一样设置浏览器系统属性和路径，调用接收 ChromeOption 的构造函数，它会正常工作。

```
WebDriver driver = new ChromeDriver(chromeProfile); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-15T13:30:35.903

我将默认配置文件复制到任何其他文件夹，然后我连接到这个副本

```
ChromeOptions options = new ChromeOptions();
options.AddArgument("--user-data-dir=C:\\AnyFolder");
driver = new ChromeDriver(options); 
```

所以它使用默认配置文件

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-19T14:15:02.120

我在 Windows 中尝试过，以下代码对我有用：

```
String userProfile= "C:\\Users\\user_name\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\";
ChromeOptions options = new ChromeOptions();
options.addArguments("user-data-dir="+userProfile);
options.addArguments("--start-maximized");
WebDriver driver = new ChromeDriver(options);
driver.get("http://www.google.com"); 
```

**如何知道它是否工作？**
知道的一种方法是运行程序两次而不杀死之前的 chrome 实例。如果配置文件有效，您将在第一个浏览器窗口中看到第二个实例“作为新选项卡”。如果它不起作用，您将获得第二个实例“作为新的浏览器窗口”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T20:41:30.800

根据 ChromeDriver wiki，这是一个已知问题，目前不可能。

[https://code.google.com/p/selenium/wiki/ChromeDriver](https://code.google.com/p/selenium/wiki/ChromeDriver)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-12T17:37:50.117

以上这些解决方案都不适合我。经过几个小时的不懈研究和尝试，我已经找到了这个解决方案

```
 System.setProperty("webdriver.chrome.driver", "/usr/local/bin/chromedriver");
        ChromeOptions chromeOptions = new ChromeOptions();
        chromeOptions.addArguments("--start-maximized");
        //chrome://version/

        chromeOptions.addArguments("--user-data-dir=/home/{username}/.config/google-chrome");
        //load default profile
        chromeOptions.addArguments("--profile-directory=Default"); 
```

# java - 递归和二分查找

> ID：14480719
> 
> 赞同：0
> 
> 时间：2013-01-23T13:20:31.253
> 
> 标签：java, recursion, binary

因此，我正在阅读有关二进制搜索算法中的递归搜索的内容，我看到一行说，对于每次找不到结果的计算，将正在查看的数组切成两半并创建一个新数组。是否真的有必要在每次计算时创建一个新数组，而不是调整您开始使用的数组的开始和结束索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:23:51.747

确保您可以调整开始和结束索引。这就是实现。您正在阅读的是对算法的简单描述，如果它仍然有效，实现可能会有所不同。

# wpf - 执行绑定后显示 WPF 窗口

> ID：14480720
> 
> 赞同：0
> 
> 时间：2013-01-23T13:20:34.867
> 
> 标签：wpf, delay, show, xmldataprovider

我有一个 WPF 窗口，单击屏幕上的按钮后会显示该窗口。该窗口使用 XmlDataProvider 动态构建表。我遇到的问题是，在调用 Show() 方法时，窗口在很短的时间内以折叠模式显示，然后随着 XML 文件中的数据被填充，它变得更大。有什么方法可以延迟窗口的显示，直到数据被填充，以避免这种令人不快的视觉效果？

提前感谢您的意见！

——纳乔

# c# - 转义字符串中的双引号

> ID：14480724
> 
> 赞同：246
> 
> 时间：2013-01-23T13:20:43.857
> 
> 标签：c#, string, double-quotes

双引号可以像这样转义：

```
string test = @"He said to me, ""Hello World"". How are you?"; 
```

但这涉及向`"`字符串添加字符。是否有 C# 函数或其他方法来转义双引号，以便不需要更改字符串？

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2013-01-23T13:21:55.410

不。

要么像你一样使用逐字字符串文字，要么`"`使用反斜杠转义。

```
string test = "He said to me, \"Hello World\" . How are you?"; 
```

在这两种情况下，字符串都没有改变——其中有一个*转义* `"`。这只是告诉 C# 字符是字符串的一部分而不是字符串终止符的一种方式。

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2013-01-23T13:23:27.783

您可以使用任何一种方式使用反斜杠：

```
string str = "He said to me, \"Hello World\". How are you?"; 
```

它打印：

```
He said to me, "Hello World". How are you? 
```

这与打印的完全相同：

```
string str = @"He said to me, ""Hello World"". How are you?"; 
```

这是一个[`DEMO`](http://ideone.com/N0eH7v).

`"`仍然是您字符串的一部分。

您可以查看 Jon Skeet 的*[C# 和 .NET 中的字符串](https://csharpindepth.com/Articles/Strings)*文章以获取更多信息。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-01-23T13:42:08.067

在 C# 中，您可以使用反斜杠将特殊字符放入字符串。例如，要放置`"`，您需要编写`\"`。您使用反斜杠编写了很多字符：

反斜杠与其他字符

```
 \0 nul character
  \a Bell (alert)
  \b Backspace
  \f Formfeed
  \n New line
  \r Carriage return
  \t Horizontal tab
  \v Vertical tab
  \' Single quotation mark
  \" Double quotation mark
  \\ Backslash 
```

用数字替换任何字符：

```
 \xh to \xhhhh, or \uhhhh - Unicode character in hexadecimal notation (\x has variable digits, \u has 4 digits)
  \Uhhhhhhhh - Unicode surrogate pair (8 hex digits, 2 characters) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-23T13:22:02.820

你误会了逃跑。

额外的`"`字符是字符串文字的一部分；它们被编译器解释为**单个** `"`.

你的字符串的实际值仍然是`He said to me, "Hello World". How are you?`，如果你在运行时打印它，你会看到。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2021-05-14T10:31:49.913

C# 6 中值得一提的另一件事是插值字符串可以与`@`.

例子：

```
string helloWorld = @"""Hello World""";
string test = $"He said to me, {helloWorld}. How are you?"; 
```

或者

```
string helloWorld = "Hello World";
string test = $@"He said to me, ""{helloWorld}"". How are you?"; 
```

[在此处](https://ideone.com/ovbMcx)检查运行代码！

[在此处](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated)查看对插值的参考！

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-01-23T13:26:48.173

请解释你的问题。你说：

> 但这涉及将字符 " 添加到字符串中。

那是什么问题？您不能键入`string foo = "Foo"bar"";`，因为这会引发编译错误。至于**添加**部分，在字符串大小方面是不正确的：

```
@"""".Length == 1

"\"".Length == 1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-03T03:22:51.773

在 C# 中，至少有四种方法可以在字符串中嵌入引号：

1.  带反斜杠的转义引号
2.  在字符串前面加上`@`并使用双引号
3.  使用对应的 ASCII 字符
4.  使用十六进制 Unicode 字符

详细说明请参考[本文档](http://davidgiard.com/2018/11/02/EmbeddingQuotesWithinACString.aspx)。

# ios - xcodebuild 错误方案未配置为运行

> ID：14480726
> 
> 赞同：6
> 
> 时间：2013-01-23T13:20:48.260
> 
> 标签：ios, xcode4, build, jenkins, xcodebuild

我正在尝试**为自动构建设置 jenkins 环境**。当我在项目开发文件夹中时，一切正常。但是从“jenkins”文件夹运行相同的命令失败：

```
xcodebuild -scheme myApp -workspace my-app.xcworkspace -configuration Release build 
```

带有错误说明：

```
xcodebuild: error: Failed to build workspace my-app with scheme myApp.
Reason: Scheme "myApp" is not configured for running. 
```

方案“myApp”是否在包含该项目的容器项目或工作区中，没有任何区别。在查看方案文件时，似乎运行应该没问题（但我不得不承认我不知道为什么普通构建需要运行）：

```
<BuildAction
  parallelizeBuildables = "NO"
  buildImplicitDependencies = "YES">
  <BuildActionEntries>
     <BuildActionEntry
        buildForTesting = "YES"
        buildForRunning = "YES"
        buildForProfiling = "YES"
        buildForArchiving = "YES"
        buildForAnalyzing = "YES">
        <BuildableReference
           BuildableIdentifier = "primary"
           BlueprintIdentifier = "C0D73B7A15EF580200AFFFA5"
           BuildableName = "myApp.app"
           BlueprintName = "myApp"
           ReferencedContainer = "container:myApp.xcodeproj">
        </BuildableReference>
     </BuildActionEntry>
</BuildActionEntries> 
```

任何猜测可能是什么问题？我已经重置，重新配置，清理，删除，重新创建等所有相关的方案和工作空间，并且没有想法......现在我要去购买 Kaleidoscope，希望它可以显示一些隐藏的神奇差异。

**更新：**一个明显的区别是 jenkins 缺少我所有的 xcuserdata 文件夹和其中的东西。这会以某种方式导致此错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T22:12:43.527

不确定这是否是您的问题，但如果 xcodebuild 无法加载引用的项目，您将看到此错误。

确保：

myApp.xcodeproj 文件夹应与 my-app.xcworkspace 位于同一文件夹中。

此外，文件中应该有一个`<FileRef>`条目`my-app.xcworkspace/contents.xcworkspacedata`说明`container:myApp.xcodeproj`.

# php - 为什么我的会话文件会从我的 tmp 文件夹中删除？

> ID：14480729
> 
> 赞同：1
> 
> 时间：2013-01-23T13:21:00.540
> 
> 标签：php, session

我有一个似乎正在正确创建的 cookie，在 chrome 中列为

```
Created:    Tuesday, January 22, 2013 4:17:01 PM
Expires:    Thursday, May 2, 2013 5:17:22 PM 
```

我在服务器上的 tmp 文件夹中看到会话文件，我可以关闭并重新打开浏览器并保持登录状态。但是，在几个小时不活动后，会话文件似乎已从 tmp 文件夹中删除。

我解决了之前的问题，即会话被覆盖（会话文件仍然存在，但大小为 0 字节），因为 jquery 函数调用的脚本没有保留会话数据。但是，在这种情况下，会话文件会消失。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:34:28.803

每个会话都有一个有限的生命周期。在 PHP 中，这个生命周期可以通过

```
ini_set( 'session.gc_maxlifetime', seconds ); 
```

> session.gc_maxlifetime 指定数据将被视为“垃圾”并可能被清理的秒数。垃圾收集可能在会话开始期间发生（取决于 session.gc_probability 和 session.gc_divisor）。

[http://php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime](http://php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)

不要将此设置为非常高的值（天或月） 如果您想自动登录用户，请将令牌保存到用户 cookie 中，并在旧会话消失时创建新会话。

可能想读这篇 [在 PHP 中设计一个安全的自动登录 cookie 系统](https://stackoverflow.com/questions/7591728/designing-a-secure-auto-login-cookie-system-in-php)

这 [在 PHP 中使用会话和 cookie 创建安全登录](https://stackoverflow.com/questions/5435068/creating-a-secure-login-using-sessions-and-cookies-in-php)

# jquery - Jquery 实时编辑插件不适用于 Zurb Foundation

> ID：14480731
> 
> 赞同：1
> 
> 时间：2013-01-23T13:21:05.053
> 
> 标签：jquery, live, zurb-foundation, edit-in-place

我一直在试用几个基于 jquery 的实时编辑（就地编辑）插件，例如 [Jeditable](http://www.appelsiini.net/projects/jeditable)，并尝试将它们与 Zurb Foundation 集成。

显然，Foundation 的foundation.min.js 文件以某种方式禁用了Jeditable 和其他实时编辑插件。他们只是似乎不起作用。[您可以在http://www.jquery4u.com/plugins/10-jquery-live-page-edit-plugins](http://www.jquery4u.com/plugins/10-jquery-live-page-edit-plugins)看到更多这样的插件

我不明白为什么基金会会这样做。有什么解决方法吗？有谁知道这种插件已成功与 Zurb Foundation 一起使用的任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T16:12:32.970

我知道这篇文章已经有几个月的历史了，但是如果您使用的是 Foundation 4，那么如果您初始化了 zepto 而不是 jquery，那么您可能会遇到问题。Zepto 似乎与某些 jquery 函数不兼容。

# php - 打印日期范围之间的日期

> ID：14480735
> 
> 赞同：1
> 
> 时间：2013-01-23T13:21:18.053
> 
> 标签：php

我想知道如何打印 PHP 5.2 中给出的日期范围之间的所有日期我不想为此任务调用函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:30:22.290

这应该可以完成这项工作。

```
<?php
$start = '2013/01/01'; //start date
$end = '2013/01/30'; //end date

$dates = array();
$start = $current = strtotime($start);
$end = strtotime($end);

while ($current <= $end) {
    $dates[] = date('Y/m/d', $current);
    $current = strtotime('+1 days', $current);
}

//now $dates hold an array of all the dates within that date range
print_r($dates);
?> 
```

# jakarta-ee - 您为 Websphere Commerce Developer 使用哪个开发数据库？

> ID：14480737
> 
> 赞同：-1
> 
> 时间：2013-01-23T13:21:22.203
> 
> 标签：jakarta-ee, websphere, websphere-commerce

目前，我们在每台开发人员计算机上都安装了嵌入式 Derby DB。根据这个我有一些问题：

Derby 同时只支持一个连接。我必须关闭 WAS 才能使用任何可视化工具检查数据库结构和内容。我也不知道是否可以使用任何分析器来观察 Commerce 工作时 DB 的情况。你用德比吗？您团队中的每个开发人员是否都有自己的数据库或数据库是集中和共享的？如果我用本地 DB2 替换所有开发人员 Derby，有什么可能的缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:59:07.130

对于开发环境，有两种常见的方法可以做到这一点。最直接的方法是将 DB2 作为开发人员数据库安装在本地机器上。这种方法没有明显的缺点，只是您必须管理每个数据库并定期向其推送更新。最大的优势是您最终在开发环境中使用与生产环境相同的数据库。

第二种方法是安装一个集中式 DB2 实例。这更容易管理，但您冒着一个开发人员的更改毒害团队其他成员的数据库的风险。

# c++ - 当针对奇异矩阵时，solve() 崩溃

> ID：14480740
> 
> 赞同：3
> 
> 时间：2013-01-23T13:21:29.637
> 
> 标签：c++, armadillo, singular, matrix-inverse, numerical-stability

我正在尝试以最小二乘法求解线性方程组。使用犰狳及其求解函数，我想计算抛物线拟合的三个系数。

```
vec coeffs = solve(CtC, Ctb) 
```

与 CtC=

```
1.0e+009 *       
+--------------------------------+
|     2.0878    0.0221    0.0002 |
|     0.0221    0.0002    0.0000 |
|     0.0002    0.0000    0.0000 |
+--------------------------------+ 
```

和 Ctb=

```
+------------+
|    -0.6163 |
|    -0.0065 |
|    -0.0001 |
+------------+ 
```

显然 solve() 无法解决它，甚至 Matlab 警告：

```
Warning: Matrix is close to singular or badly scaled. Results may be inaccurate.
RCOND = 1.303968e-022\. 
```

一般来说，犰狳或c ++中是否有任何解决方法或更强大/更复杂的方法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:09:48.357

您面临的问题是矩阵的[条件数](http://en.wikipedia.org/wiki/Condition_number)非常高，这可能会使您的结果由于舍入错误而变得毫无意义。

正如 rhalbersma 所建议的，您可以尝试更好地缩放不同的条目以减少此问题。如果您没有这样的解决方案，那么您必须使用[preconditioner](http://en.wikipedia.org/wiki/Preconditioner)。其中有很多（有些非常复杂），因此您应该找到适合您问题的一个。

但是，对于您手头的这个特定系统，我将简单地反转方程（1）和（3），这将产生一个下三角系统，这很容易用 Matlab 求解（不需要迭代方法，可以对条件数非常敏感。在您的情况下，由于矩阵是对称的，Matlab 可能会尝试使用 cg 来解决它，这是一种迭代方法）。

顺便说一句，您的问题是否会产生接近奇异的矩阵？如果不是，我会在组装矩阵之前检查问题（或错误）（由于舍入错误，矩阵可能是非奇异的）。

**编辑**`\`：在我的 matlab 2009 上，我在尝试解决这个系统（使用命令）时没有收到任何警告。但是，如果我尝试使用命令`pcg`，我会得到它们！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:40:49.237

您不能反转**行列式等于零**的矩阵。在您的情况下，行列式等于-8e-12，实际上并不等于零，而是作为逆矩阵给出（使用R）

```
1.0e-009 *
              [,1]          [,2]    [,3]
[1,] -3.815763e-16  6.806617e-14    5000
[2,]  5.111864e-14  5.000000e+03 -552500
[3,]  5.000000e+03 -5.525000e+05 8856250 
```

请注意，这个逆矩阵既有非常大的数字，也有非常小的数字。这解释了您对“接近单数”和“严重缩放”的警告。根据底层浮点库，您可能会遇到非常糟糕的**舍入错误**。

您可以返回到您的应用程序，查看是否有任何变量表示彼此相差多个数量级的列或行。如果是这样，你可以重新调整这些。例如，如果它们之间有 100 万的因数，并且它们代表长度，则以公里表示，而以毫米表示另一个。

# javascript - 如何在 ASP.NET 后面的代码中创建“onkeydown”事件？

> ID：14480741
> 
> 赞同：1
> 
> 时间：2013-01-23T13:21:37.483
> 
> 标签：javascript, asp.net

我想在我的 Web 项目中添加实时搜索功能，`gridview`每当有人在文本框中键入内容时，我都可以使用该功能进行刷新。一旦我在文本框中输入`a`或`arun`或`stu`或任何单词，`gridview`应该刷新。

我知道如何刷新`gridview`，但`text_changed`事件发生在我们散焦文本框之后，即移动到下一个控件。简而言之，当我们将焦点移出文本框时，文本框事件就会起作用，但我想在任何人甚至在文本框中键入单个单词时执行代码隐藏功能。

项目在 ASP.NET 中使用 VB，但如果可以提供 C# 解决方案就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:41:26.663

添加一个按钮如下[其样式表示其显示为无]：

```
<asp:Button ID="Button3" runat="server" Text="CallServerMethod" 
 OnClick="Button3_Click" OnClientClick="CallServerMethod()" style="display:none" /> 
```

在代码后面的 OnClick 函数中编写你需要的函数。

现在在你的文本框中：

```
<asp:TextBox ID="TextBox1" runat="server" onkeyup="CallServerMethod()" 
ontextchanged="TextBox1_TextChanged"></asp:TextBox> 
```

现在编写javascript函数如下：

```
function CallServerMethod() {
document.getElementById('Button3').click();
} 
```

**概括：**

您在 中编写要执行的函数，`OnClick event of a hidden button`然后通过 javascript 通过 模拟单击​​此隐藏按钮`onkeyup of the textbox`。

**或者**

发送参数：`alert('<%CodeBehindFunction('+ Param +')%>');`在文本框的 onkeyup 函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:24:33.880

您可以在文本框上使用 jQuery 的`change`事件来刷新。例如：

```
$('#yourTextBox').change(function () {
  // either handle updating the gridview yourself

  // or click an invisible search button:
  $('#someHiddenSearchButton').click();
}); 
```

# android - 在每个触摸事件上旋转图像

> ID：14480743
> 
> 赞同：1
> 
> 时间：2013-01-23T13:21:41.513
> 
> 标签：android, image-rotation, touch-event

在我的应用程序中，我有一些图像，当我点击该图像时，它应该旋转 90 度。我可以旋转一次图像，但不能在第二次点击时旋转。谁能帮我解决这个问题？如何在每个触摸事件上旋转图像？

```
if (event.getAction() == MotionEvent.ACTION_DOWN) {
    Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.quartercircle1);
        Matrix m = new Matrix();
        imgvwQrtr1.setScaleType(ScaleType.MATRIX);

        m.setRotate(90f, imgvwQrtr1.getDrawable().getBounds().width()/2, imgvwQrtr1.getDrawable().getBounds().height()/2);
        bm = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(), bm.getHeight(), m, true);
        imgvwQrtr1.setImageBitmap(bm);

        ClipData data = ClipData.newPlainText("", "");
        DragShadowBuilder shadowBuilder = new DragShadowBuilder(v);
        v.startDrag(data, shadowBuilder, v, 0);
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:37:04.097

您需要创建全局变量，例如：

```
int degree = 0; 
```

并在代码中

```
.....
//shortest way
degree = degree + 90;
if(degree % 360 == 0) {
   degree = 0;
}
//if(degree >= 270) {
   //degree = 0;
//} else {
   //degree+=90;
//}
m.setRotate(degree, imgvwQrtr1.getDrawable().getBounds().width()/2,
imgvwQrtr1.getDrawable().getBounds().height()/2);
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:37:53.940

试试这个

```
 public static float getRotationAngle(final float x1, final float y1, final float x2, final float y2) {
                final float CLOCK_WISE = 1.0f;
                final float ANTI_CLOCK_WISE = -1.0f;

                final float deltaX = Math.abs(x2 - x1);
                final float deltaY = Math.abs(y2 - y1);

                if (deltaX == 0) {
                        return 0.0f;
                }

                final float angle = (float) Math.toDegrees(Math.atan(deltaY / deltaX));

                if (x1 <= x2 && y2 <= y1) {
                        return CLOCK_WISE * (90.0f - angle);
                } else if (x2 <= x1 && y2 <= y1) {
                        return ANTI_CLOCK_WISE * (90.0f - angle);
                } else if (x2 <= x1 && y1 <= y2) {
                        return ANTI_CLOCK_WISE * (90.0f + angle);
                } else if (x1 <= x2 && y1 <= y2) {
                        return CLOCK_WISE * (90.0f + angle);
                } else {
                        return 0.0f;
                }
        } 
```

# php - 如何在一周中的特定日期显示某个网页

> ID：14480746
> 
> 赞同：0
> 
> 时间：2013-01-23T13:21:44.850
> 
> 标签：php, javascript

我有一个网站，其中包含周一至周日的广播时间表。我希望能够显示当天正确的日程安排页面，我该怎么做？该站点是一个标准的 html 站点。我还希望能够根据一天中的时间突出显示特定的节目。

任何想法，这对我来说都是新的。

问候

加里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:24:57.140

假设您有以下 html 文档：

```
Monday.html

...

Sunday.html 
```

您可以使用以下代码输出当天的页面：

```
<?php

    $page = date('l') . '.html';
    readfile($page);
    exit(0);
?> 
```

该示例使用该函数[`date()`](http://php.net/manual/en/function.date.php)以文本表示形式获取星期几。

将代码放在与 web 服务器上的 html 文档**相同**`pageOfTheDay.php`的文件夹中调用的文件中。然后在您的 HTML 中使用类似的链接

 **```
<a href="pageOfTheDay.php">Page of the day</a> 
```

注意：该示例假定您使用的是英语语言环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:53:47.417

因为它也在 javascript 部分，所以我将发布它的 JS 版本：

```
var days = ["Monday","Tuesday","Wednesday","Thursday","Friday","Weekend","Weekend"];
var d = new Date();
var n = d.getDay();

window.location = days[n - 1]+".html"; 
```

将它放在 index.html 文件的顶部。在同一个文件夹中，您需要各种 Monday.html ... Friday.html 文件

以同样的方式你可以这样做：

```
var d = new Date();
var h = d.getHours(); 
```

然后将类“current-show”添加到页面中的特定元素（使用jQuery）

```
$(".show-time-"+ h).addClass("current-show"); 
```

这假设您已经为页面中的节目提供了正确的类（例如

```
<div class="show-time-14"></div> 
```

然后在你的CSS中你可以做：

```
.current-show { background-color: #BADA55: } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:43:37.813

例如，您可以从“[页面控制器](http://martinfowler.com/eaaCatalog/pageController.html)”中受益`index.php`。此页面是用户加载的唯一页面，并且自动包含实际的 HTML“页面”。这可以由 URL 参数决定，也可以默认为当前日期。

我的意思的未经测试且非常基本的示例：

```
 <?php

    if (isset($_GET["day"])) {
      $day = $_GET["day"];
    } else {
      $day = date("l");
    }
    $fileName = $day . ".php";

    if (file_exists(realpath() . $fileName)) {
      include $fileName;
    }

  ?> 
```

注意：我已将`.HTML`文件重命名为`.PHP`，允许包含它们（您实际上不需要在其中包含任何 PHP 代码。**

# c# - 在 winforms 中，keydown 事件处理程序文本框事件 keypress 不起作用

> ID：14480747
> 
> 赞同：1
> 
> 时间：2013-01-23T13:21:47.880
> 
> 标签：c#, winforms

在 winform 应用程序中，我使用按键事件进入下一个字段。它工作正常，但我想在这里处理文本框的事件以及按键。如果表单上的按键事件可用，则不会触发按键事件。我该如何解决。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:42:05.283

每个 KeyDown 事件都会接收一个[KeyEventArgs](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.forms.keyeventargs.handled%28v=vs.90%29.aspx)参数。
在 KeyEventArgs 参数中有一个名为 SuppressKeyPress 的属性。
[根据 MSDN](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.forms.keyeventargs.suppresskeypress%28v=vs.90%29.aspx)将此属性设置为 true 避免 KeyPress 事件
如果将此属性设置为 false，**则当前具有焦点的控件**将接收按键。

```
private void formMain_KeyDown(object sender, System.Windows.Forms.KeyEventArgs e)
{
    // Do your processing
    ....
    e.Handled = true;
    e.SuppressKeyPress = false;
} 
```

# facebook - 获取已安装应用的 Facebook 好友列表

> ID：14480748
> 
> 赞同：0
> 
> 时间：2013-01-23T13:21:48.320
> 
> 标签：facebook, facebook-graph-api, facebook-fql, friend

有可能知道他们安装了我的 fb 应用程序的 facebook 朋友吗？我已经尝试了一些直接使用在线 facebook 开发人员工具的方法，但我一直无法找到解决方案。我已经尝试过 Graph API 和 FQL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:29:44.657

使用 FQL：

```
SELECT uid, name, is_app_user FROM user
    WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) 
          AND is_app_user=1 
```

# c - C 中的 abort() 函数是否清理堆栈？

> ID：14480749
> 
> 赞同：8
> 
> 时间：2013-01-23T13:21:49.373
> 
> 标签：c, stack-overflow, abort

例如，可以捕获 SIGABRT 并通过 longjump 继续程序。

我想知道当我总是调用调用 abort() 的函数时，这是否会导致堆栈溢出。

我需要知道这一点，因为我想在单元测试中使用断言宏（taht 调用中止）。如果断言失败，我想继续下一个单元测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:29:28.387

`abort`不需要清栈；`longjmp`将“清除”它，因为它将堆栈指针倒回到`setjmp`. 如果其他一切都正确，则重复调用`longjmp`并且`setjmp`不会导致堆栈溢出。

但是，`longjmp`将跳过正常的执行路径，它可以自己调用资源泄漏。考虑这段代码：

```
char *s = malloc(...);
... use s ...
free(s); 
```

如果“... use s ...”部分调用`longjmp`了代码之外的某个函数，`free`那么您将没有机会被调用并且您将泄漏。这同样适用于关闭打开的文件、套接字、释放共享内存段、收获分叉的孩子等等。

由于这个原因`longjmp`，在 C 编程中很少使用。`assert`如果您不是要退出程序，我的建议是避免。只需在单元测试中使用另一个宏，或切换到提供该宏的测试框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:41:56.647

假设 POSIX，调用`longjmp`以退出`SIGABRT`引发者`abort`是有效的，因为`abort`被指定为异步信号安全（也因为此信号不是异步的）。（在纯 C 语言中，从信号处理程序中执行的几乎所有操作都是 UB，因此这通常不是一个有趣的案例。）但是，您有责任确保您自己的程序状态不会因此而不一致，在这样的情况下一种会导致您的程序在程序流中立即或稍后以某种其他方式调用 UB 的方式。

话虽如此，我同意 user4815162342 的观点，即您的提议是一种非常糟糕的错误处理形式。如果您不想中止，请不要调用`abort`，而是编写自己的错误处理函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:28:07.480

[longjmp](http://en.wikipedia.org/wiki/Setjmp.h)不会展开堆栈，但会修改堆栈指针：

> 如果调用 setjmp 的函数返回，则不再可能安全地使用 longjmp 和相应的 jmp_buf 对象。这是因为函数返回时堆栈帧无效。**调用 longjmp 会恢复堆栈指针**，因为返回的函数将指向一个不存在且可能被覆盖/损坏的堆栈帧。

# objective-c - 同步 NSTableView 自动重新加载和删除对象的最佳方式

> ID：14480754
> 
> 赞同：1
> 
> 时间：2013-01-23T13:22:05.647
> 
> 标签：objective-c, nstableview

假设我们有一个 Mac 应用程序，其中有一个 NSTableView（从 NSTableView 继承的 DownloadTableView 和从 NSActionCell 继承的 DownloadCell 以显示进度条和与项目相关的所有信息）。在我的应用程序控制器中，我有一个 NSMutableArray 来保存将在 tableView 中显示的对象（下载）。目前我在控制器中还有一个计时器，它`[[self tableView] reloadData]`每秒都会显示每个对象的进度（下载）。

我不认为这是刷新 tableView 的最佳方式，因为当我尝试从 mutableArray 中删除一个元素时，我经常会遇到竞争条件（因此会出现异常）。例如，视图当前正在刷新，我从数组中删除了一个元素。应用程序可能会在内部抱怨`- (NSCell *)tableView:(NSTableView *)tableView dataCellForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row`，[downloadCell setRepresentedObject:download] 下载可能不再在数组中，因此会出现超出数组范围的异常。或者，如果我拖放元素，有时需要将对象删除并重新添加到数组中。

有人对这个主题有更好的想法吗？

# php - PHP 中的 Youtube Data API v3 帐户服务：403 - 禁止：YoutubeSignupRequired

> ID：14480764
> 
> 赞同：3
> 
> 时间：2013-01-23T13:22:41.660
> 
> 标签：php, youtube-api

我为此头疼了 4 个小时，所以我可能需要一点帮助。

我想做的是将视频存储在 youtube 上，用于我们正在进行的视频比赛。我真的更喜欢通过服务帐户进行 2 条腿 OAuth 访问（我希望即使没有 gmail 帐户的用户也能够向我们发送视频，并且我想将这些视频设为私有或不公开在我们的 youtube 帐户中）。

但这似乎不起作用。我现在的代码是这样的：

```
function go()
{
require_once 'googleClient/Google_Client.php';
require_once 'googleClient/contrib/Google_YoutubeService.php';

define("CLIENT_ID",'xxxxxxx.apps.googleusercontent.com');
define("SERVICE_ACCOUNT_NAME",'xxxxxxx@developer.gserviceaccount.com');
define("KEY_FILE", 'googleClient/verylonghashtagprivacystuff-privatekey.p12');
define("SECRET_FILE", 'client_secrets.json');

$client = new Google_Client();
$client->setApplicationName("My Contest App");

$key = file_get_contents(KEY_FILE);
$secret = file_get_contents(SECRET_FILE);

$GAC = new Google_AssertionCredentials( SERVICE_ACCOUNT_NAME,
array('https://www.googleapis.com/auth/youtube.upload',
            'https://www.googleapis.com/auth/youtube'), 
$key ,'notasecret','http://oauth.net/grant_type/jwt/1.0/bearer');

$client->setAssertionCredentials($GAC);

$client::$auth->refreshTokenWithAssertion();
$client->setClientId(CLIENT_ID); // Did tried to put that one sooner
$client->setClientSecret($secret); // Did tried to put that one sooner
$json = $client->getAccessToken();

$accessToken = json_decode($json)->access_token;
$video = array();
$video["snippet"] = array();

$snippet = new Google_VideoSnippet();
$snippet->setTitle("Contest Video USERNAME");
$snippet->setDescription("Video for contest 2013 USERNAME.");
$snippet->setTags(array("Contest","Whatever","2013"));
$snippet->setCategoryId("22"); //Did tried "Entertainment".

$status = new Google_VideoStatus();
$status->setPrivacyStatus("unlisted");

$video = new Google_Video();
$video->setSnippet($snippet);
$video->setStatus($status);
$client->setAccessToken($json);

$youtube = new Google_YoutubeService($client);
$url = '/projet_video.mp4';

$response = $youtube->videos->insert(
"status,snippet", 
$video, 
array(  'data' => file_get_contents($url),'mimeType' => "video/*")); 
//Did tried video/mp4

return $response ;} 
```

结果是：

```
error": {  "errors": [   {
    "domain": "youtube.header",
    "reason": "youtubeSignupRequired",
    "message": "Forbidden",
    "locationType": "header",
    "location": "Authorization"
}], "code": 403,  "message": "Forbidden" } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-17T15:56:13.760

**服务帐户不适用于 YouTube API**

服务帐户不适用于 YouTube API 调用，因为关联的 YouTube 频道，并且您不能将新频道或现有频道与服务帐户相关联。使用服务帐户进行 YouTube API 调用将返回错误，错误类型设置为未授权，原因设置为 youtubeSignupRequired。

来源：[https ://developers.google.com/youtube/v3/guides/moving_to_oauth#service_accounts](https://developers.google.com/youtube/v3/guides/moving_to_oauth#service_accounts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T02:16:40.373

在与 OP 进行离线跟踪之后，问题归结为各种 YouTube API 不支持服务帐户，至少目前不支持。您需要使用与您要访问的 YouTube 频道相关联的实际 Google 帐户的凭据[完成文档中描述](https://developers.google.com/youtube/v3/guides/authentication)的流程之一（不包括服务帐户流程）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T13:19:52.220

我解决了它，我的答案在这里：[如何通过服务帐户插入视频 youtube api v3 with ruby](https://stackoverflow.com/questions/27609138/how-to-insert-video-youtube-api-v3-through-service-account-with-ruby)​​ Enjoy！

您收到的错误是因为您没有在电子邮件中添加人员标签来上传电影。如果您使用我的答案中的代码，一切都已解决并且可以正常工作

# java - Android 新对象类

> ID：14480769
> 
> 赞同：0
> 
> 时间：2013-01-23T13:22:59.830
> 
> 标签：java, access-modifiers

我正在尝试制作一个新的“时间”课程，

时间.java

```
public class Time{ 
    public int hour,minute;
    public double second;

    public Time(){
        super();
    }
} 
```

main_activity.java

```
Time newT = new Time();
newT.hour = 3; 
```

但我在这里得到一个错误：newT.hour

错误（在 Eclipse 中）“令牌“小时”上的语法错误，此令牌后应为变量声明符”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:27:06.567

小时的可访问性是`private`，因此您无法从其他班级访问它。创建 setter 和 getter：

```
public class Time{ 
    private int hour,minute;
    private double second; 

    public Time(){
        super();
    }

    public void setHour(int hour) { 
        this.hour = hour;
    }

    public int getHour() { 
        return hour;
    }
} 
```

现在通过`newT.setHour(3);`

编辑：我看到你修改了错误。实际的错误是因为你放了这些行

```
Time newT = new Time();
newT.hour = 3; 
```

在课堂上，我假设你有这样的事情：

```
public class Main {
    Time newT = new Time();
    newT.hour = 3;
} 
```

但是你不能做这样的事情，因为你只能在你的类体中声明变量/方法/类。试试这个：

```
public class Main {
    public void myMethod {
        Time newT = new Time();
        newT.hour = 3;
    }        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:26:01.890

使用 setter 和 getter 方法的方法。在您的类中创建两个公共方法来设置小时值并获取它。这样你就可以使用私有变量。

否则你需要将它们公开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:32:24.927

首先我想知道你是如何编译这个“ `private double String second;`”行的。（双字符串一起：-o），好的，现在下面是您的解决方案。

你的时间类应该是这样的

```
 public class Time{ 

        private int hour,minute;
        private double seconds;

        public int getHour() {
            return hour;
        }

        public void setHour(int hour) {
            this.hour = hour;
        }

        public int getMinute() {
            return minute;
        }

        public void setMinute(int minute) {
            this.minute = minute;
        }

        public double getSeconds() {
            return seconds;
        }

        public void setSeconds(double seconds) {
            this.seconds = seconds;
        }
    } 
```

并做这样的事情来设置和获取小时/分钟/秒

```
 Time newT = new Time();
      newT.setHour(1); 
```

还要在您正在编写的新课程中导入时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T13:24:04.623

正如您没有告诉我们的错误明确指出的那样，您无法`private`从课堂外访问字段。

# jquery - jQuery Validate 不删除清除内容时的有效标签

> ID：14480771
> 
> 赞同：0
> 
> 时间：2013-01-23T13:23:04.010
> 
> 标签：jquery, jquery-validate

我喜欢这个`jQuery.validate.js`插件，但是在我正在处理的新表单上实现它时，当它的内容被删除时，我无法从元素中删除`valid` `class`and 。`label``input`

我已`onkeyup`设置为向错误标签添加类`false`的函数，该字段为：`success``valid``required`

```
<script>
$(function() {
    $('#test').validate({
        rules: {
            firstname: 'required'
        },
        messages: {
            firstname: 'Please enter a first name'
        },
        success: function(label) {
            label.addClass('valid').text('Yey!');
        },
        onkeyup: false
    });
});
</script>

<form id="test">
    <label>Name<input type="text" id="firstname" name="firstname" /></label>
    <p><input type="submit" value="Submit" /></p>
</form> 
```

[http://jsfiddle.net/kw8Lm/](http://jsfiddle.net/kw8Lm/)

以下情景是我想要改变的：

1.  用户在字段中输入值
2.  “是”标签显示在字段旁边
3.  用户返回并清除该字段
4.  “是”标签仍然显示

我希望更改第 4 步，使其不再显示 -`Field required`应该显示的错误消息或根本没有错误也可以（因为其中没有任何内容）。

`onkeyup`奇怪的是，如果设置为，我可以让它工作，`true`但我只是不希望在打字时进行错误检查的功能，这对我认为的用户来说有点多。

非常感谢任何帮助，我在其他帖子中找不到任何解决方案 - 如果我错过了一些东西，我很抱歉。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:32:50.180

为了解决您的问题，我使用了该`errorPlacement`选项，每次需要放置错误消息时都会触发该选项。它超越了你的“耶！” 每当错误消息需要返回时的消息。

（请注意代码是如何放置在这个 jsFiddle 中的。）

**演示：http: [//jsfiddle.net/vwH2x/](http://jsfiddle.net/vwH2x/)**

```
$(function () {
    $('#test').validate({
        rules: {
            firstname: 'required'
        },
        messages: {
            firstname: 'Please enter a first name'
        },
        success: function (label) {
            label.addClass('valid').text('Yey!');
        },
        errorPlacement: function (error, element) {
            error.insertAfter(element);
        },
        onkeyup: false
    });
}); 
```

* * *

> “奇怪的是，如果 onkeyup 设置为 true，我可以让事情正常工作”

**值得注意的一点：**

这`onkeyup`是默认选项之一，可以设置为`false`或完全省略。将其设置`true`为对此插件无效。`onkeyup`此选项后面有一个功能，将其设置`false`为禁用此功能的有效方法。但是，`true`永远不要将其设置为。省略该`onkeyup`选项只会允许`onkeyup`发生默认行为。

# regex - 如何使用 XPath 正则表达式匹配 URL

> ID：14480786
> 
> 赞同：2
> 
> 时间：2013-01-23T13:23:41.330
> 
> 标签：regex, xpath

在 XPath 方面需要帮助。我有这样一个 XML：

```
 <unaryExpression tokenValue="'http://google.com'" tokenLine="1" tokenColumn="8">
      <postfixExpression tokenValue="'http://google.com'" tokenLine="1" tokenColumn="8">
        <leftHandSideExpression tokenValue="'http://google.com'" tokenLine="1" tokenColumn="8">
          <newExpression tokenValue="'http://google.com'" tokenLine="1" tokenColumn="8">
            <memberExpression tokenValue="'http://google.com'" tokenLine="1" tokenColumn="8">
              <primaryExpression tokenValue="'http://google.com'" tokenLine="1" tokenColumn="8">
                <literal tokenValue="'http://google.com'" tokenLine="1" tokenColumn="8">
                  <stringLiteral tokenValue="'http://google.com'" tokenLine="1" tokenColumn="8">
                    <LITERAL tokenValue="'http://google.com'" tokenLine="1" tokenColumn="8"/>
                  </stringLiteral>
                </literal>
              </primaryExpression>
            </memberExpression>
          </newExpression>
        </leftHandSideExpression>
      </postfixExpression>
    </unaryExpression> 
```

我需要找到网址。我这样做。

```
//LITERAL[contains(@tokenValue, 'http://')] 
```

如何使用正则表达式查找 url？

```
(http://|https://|ftp://)([a-z0-9]{1})((\.[a-z0-9-])|([a-z0-9-]))*\.([a-z]{2,4})(\/?) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:07:36.277

如果您的 XPath 引擎支持 XPath 2.0，请使用`fn:matches`哪些等价`fn:contains`的正则表达式。XPath 1.0 不支持正则表达式。

```
//LITERAL[fn:matches(@tokenValue, '(http://|https://|ftp://)([a-z0-9]{1})((\.[a-z0-9-])|([a-z0-9-]))*\.([a-z]{2,4})(/?)')] 
```

将返回所有-tag 与您的正则表达式匹配`<LITERAL/>`的-tag。`@tokenValue`

您的表达式存在一些问题，您不必（也可能不会）`/`在最后一个匹配组中转义。我在查询中解决了这个问题。为什么你仍然使用最后两个匹配组？

# android - AlertDialog.Builder setItems 列表与另一个

> ID：14480788
> 
> 赞同：1
> 
> 时间：2013-01-23T13:23:44.357
> 
> 标签：android, dialog, alert, builder

我试图有一个项目列表，当被触摸时会打开另一个项目列表。更像是项目的子菜单。这是因为我的第一个列表越来越长，我想将一些组合到一个子菜单中。

```
 gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, final int position, long id) {

           final CharSequence[] items = {"Gallery Image Menu", "View pattern", "Delete pattern", "Locate pattern in list view", "Row Counter (with pattern)", "Share Pattern", "Share Image", "Cancel"};

            AlertDialog.Builder builder = new AlertDialog.Builder(grid.this);
            builder.setTitle(selectedimage);
            builder.setItems(items, new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int item) {

                    if (item == 0){
                        //first menu 1st item
                        dialog.dismiss();

                        final CharSequence[] items2 = {"Rotate image 180"+"\u00B0", "Rotate image 90"+"\u00B0", "Add image from pattern",  "Add image from file", "Add image from camera", "Remove image", "Cancel"};

                        final AlertDialog.Builder builder2 = new AlertDialog.Builder(grid.this);
                        builder2.setTitle(selectedimage);
                        builder2.setItems(items2, new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog2, int item) {

                                if(item == 0){
                                    //2nd menu, 1st item
                                    dialog2.dismiss();

                                    //do something
                                    return;
                                }

                                if(item == 1){
                                    dialog2.dismiss();
                                    //2nd menu, 2nd item
                                    //do something else
                                    return;
                                }

                            AlertDialog alert2 = builder2.create();
                            alert2.show();

                            }
                        });
                    }

                    if (item == 1){
                        //first menu 2nd item
                    }

                    if(item == 2){
                        //1st menu, 3rd item
                    }

                    if(item == 3){

                    }

                    //..... etc

                }
            });
            AlertDialog alert = builder.create();
            alert.show();

        }

    });//gridView.setOnItemClickListener 
```

第一个构建器按预期显示，但是当我选择要打开第二个构建器的第一个选项时，第一个构建器关闭并返回活动。

在调试模式下，第二个构建器代码被读取，就好像它要显示但随后都关闭一样。

也许你不能这样做？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:33:58.920

你放错地方了

```
AlertDialog alert2 = builder2.create();
alert2.show(); 
```

部分。将其向下移动 3 行，之后`});`

# jquery - 发布数据 JQuery UI Tabs 1.10

> ID：14480797
> 
> 赞同：5
> 
> 时间：2013-01-23T13:24:09.570
> 
> 标签：jquery, jquery-ui, zend-framework, post

我刚刚从*JQ UI 1.8.23 切换到 1.10。*至于此版本，`ajaxOptions`已弃用，现在`ui.ajaxSettings`改为使用。

这就是我的代码的样子：

```
$( "#tabs" ).tabs({
        ajaxOptions: {
            type : 'POST',
            data : 'format=html',
            error: function( xhr, status, index, anchor ) {
                $( anchor.hash ).html(
                    "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                    "If this wouldn't be a demo. " );
            },
            success: function() { 
                *Something in here*
            }
        }
    }); 
```

一切正常。现在新代码：

```
$( "#tabs" ).tabs({
         beforeLoad: function( event, ui ) {
             ui.ajaxSettings.type = 'POST';
             ui.ajaxSettings.data = 'format=html';
             ui.jqXHR.error(function() {
                 ui.panel.html(
                 "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                 "If this wouldn't be a demo." );
                });  
             ui.jqXHR.success(function(){
*something in here*
                });
        }
    }); 
```

所以我需要将此数据发布`format=html`到我的服务器，但是使用新版本，我发送到服务器的发布变量是空的。没有任何东西发送到服务器。另外，如果我想在我`php script`的数组中获取 POST 变量是空的。我正在使用`ZEND`顺便说一句。我需要通过 POST 发送它 - 没有办法解决它。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:39:32.963

如果您查看[jQuery.ajax](https://github.com/jquery/jquery/blob/master/src/ajax.js#L484-L489)的源代码，在第 486 行，您会看到它将数据添加到 url。然后在第 532 行调用 beforeSend 方法，这是触发 jQuery UI 选项卡中的 beforeLoad 事件的原因。

所以你需要做的就是修改 url 而不是数据：

```
$( "#tabs" ).tabs({
    beforeLoad: function( event, ui ) {
        ui.ajaxSettings.type = 'POST';
        ui.ajaxSettings.url += ( /\?/.test( ui.ajaxSettings.url ) ? "&" : "?" ) + 'format=html';
        ui.jqXHR.error(function() {
            ui.panel.html(
                "Couldn't load this tab. We'll try to fix this as soon as possible. " +
                "If this wouldn't be a demo." );
        });  
        ui.jqXHR.success(function(){
            *something in here*
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T10:35:28.437

我有同样的问题。我已经对此进行了测试：

```
ui.ajaxSettings.url += ( /\?/.test( ui.ajaxSettings.url ) ? "&" : "?" ) + 'format=html'; 
```

但它是一个`GET`类型而不是一个`POST`.

我试过了 ：

```
ui.ajaxSettings.format = 'html'; 
```

但它在帖子中没有任何变量。

所以我试过：

```
 ui.ajaxSettings.data = { format:'html' }; 
```

帖子中不再有变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-19T17:02:42.850

感谢*Christian Seifert*发布问题，感谢*PetersenDidIt*提供的好答案！这是我对相同问题的 ajax 实现，希望这段代码片段能帮助到那里的人！

```
 $("#tabs").tabs({
        beforeLoad: function(event, ui) {
            var url = window.location.protocol + "//" + window.location.hostname + "/ajax";
            var data = {name: "job", value: "Rock Star"};

            ui.ajaxSettings.type = 'GET';
            ui.ajaxSettings.url = url  + "?" + $.param(data, false);

            //console.log(ui.ajaxSettings.url);
            ui.jqXHR.fail(function() {
                ui.panel.html('Couldn't load this tab!');
            });
        }
    }); 
```

Also, pay attention what jqXHR methods you are overwriting, latest Jquery UI (ver. 1.11.4) does not use depreciated methods anymore.

[https://github.com/scottgonzalez/jquery-ui/commit/e3f94a87dc312c2225e9ebe7231d868820bd6150](https://github.com/scottgonzalez/jquery-ui/commit/e3f94a87dc312c2225e9ebe7231d868820bd6150)

# iframe - 在 iFrame 中打开站点，避免 Frame Busting

> ID：14480799
> 
> 赞同：0
> 
> 时间：2013-01-23T13:24:15.070
> 
> 标签：iframe, popup, framebusting

我正在尝试在 iFrame 中打开一些站点，该站点以弹出窗口的形式打开。有些网站不允许自己在 iFrame（Frame Busting）中打开。

我已经搜索过这个。我也有一些解决方案，比如

```
$(window).bind('beforeunload', function (event) {

        return 'Custom message.';
        }); 
```

beforeunload 对我不起作用，因为即使在我的网站内导航它也会运行

我也试过

```
 // Event handler to catch execution of the busting script.
        window.onbeforeunload = function () { prevent_bust++ };

        // Continuously monitor whether busting script has fired.
        setInterval(function () {
        if (prevent_bust > 0) {  // Yes: it has fired. 
        prevent_bust -= 2;     // Avoid further action.
        // Get a 'No Content' status which keeps us on the same page.

        window.top.location.href = 'http://mysiteurl/#';
        }
        }, 1); 
```

上面也不起作用，它会重定向到在 iFrame 中打开的 url。

那么是否有任何解决方案可以在 IFrame 中打开站点（具有 Frame Buster）。

问候，萨加尔·乔希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T19:49:42.193

对于 IE，在您的框架中使用它 security="restricted"

```
<iframe id="frame_id" name="frame_name" security="restricted" src="page.html">  
</iframe> 
```

编辑：我遇到了同样的问题，但我需要脚本等在我的框架中运行，所以安全限制不好。尝试使用沙盒=“...”

*   allow-forms 允许表单提交
*   allow-popups 允许弹出窗口
*   allow-pointer-lock 允许指针锁定
*   allow-same-origin 允许文档保持其来源
*   allow-scripts 允许 JavaScript 执行，也允许特性自动触发
*   allow-top-navigation 允许文档通过导航顶级窗口跳出框架

**顶部导航是您想要阻止的，因此将其排除在外，这样就不会被允许。任何遗漏的都会被阻止**

前任。

```
 <iframe sandbox="allow-same-origin allow-scripts allow-popups allow-forms" src="http://www.example.com"</iframe> 
```

# if-statement - 使用 if 命令计算 stata 的差异

> ID：14480800
> 
> 赞同：0
> 
> 时间：2013-01-23T13:24:20.947
> 
> 标签：if-statement, stata

我想计算类似的东西

```
by group: egen x if y==1 - x if y==2 
```

当然，这不是一个真正的 stata 代码，但我有点迷路了。在 R 中，这只是由 intrest 变量后面的“[]”传递，但我不确定 stata

R将是

```
x[y==1] - x[y==2] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:37:24.503

我会用`reshape`.

```
clear
version 11.2
set seed 2001

* generate data
set obs 100
generate y = 1 + mod(_n - 1, 2)
generate x = rnormal()
generate group = 1 + floor((_n - 1) / 2)
list in 1/10

* reshape to wide and difference
reshape wide x, i(group) j(y)
generate x_diff = x1 - x2
list in 1/5 
```

我也会`reshape`在 R 中使用。否则，您能否确定一切都已妥善订购，以提供您想要的差异？

可能有一个简洁的 Mata 解决方案，但我对 Mata 知之甚少。如果您不喜欢ing ，您可能会发现`preserve`并有所帮助。`restore``reshape`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T17:02:03.137

Richard Herron 提出了一个很好的观点，即`reshape`一个不同的结构可能是值得的。在这里，我将重点介绍如何使用现有结构来做到这一点。

假设每组 恰好有两个观测值`group`，一个与`y == 1`，一个与`y == 2`，则

```
bysort group (y) : gen diff = x[1] - x[2] 
```

给出 的值之间的差异`x`，对于一组中两个的每次观察都必须重复. 无假设方法是

```
bysort group: egen mean_1 = mean(x / (y == 1)) 
by group: egen mean_2 = mean(x / (y == 2)) 
gen diff = mean_1 - mean_2 
```

考虑诸如 的表达式`x / (y == 1)`。`y == 1`当 y 确实为 1 时，分母为 1，否则为 0。除以 0 会在 Stata 中产生缺失，但`egen`此处的命令会忽略这些。因此，上述三个命令中的第一个命令产生`x`观察结果`y == 1`的平均值，第二个命令产生`x`观察结果的平均值`y == 2`。`y`（甚至缺失）的其他值将被忽略。当第一种方法有效时，该方法应与第一种方法一致。

有关类似问题的回顾，请参阅[http://stata-journal.com/article.html?article=dm0055](http://stata-journal.com/article.html?article=dm0055)

在 Stata 中`if`，这里提到的是限定符（不是命令）。

# iphone - 在整个屏幕中随机移动 box2d 物体

> ID：14480807
> 
> 赞同：0
> 
> 时间：2013-01-23T13:24:39.643
> 
> 标签：iphone, cocos2d-iphone, box2d-iphone

我想在整个屏幕上随机飞行 b2body。现在我正在使用 ccMoveTo 但它看起来不太好。谁能告诉我是否有任何简单的方法可以在不使用 ccMoveTo 或 ccBazierTo 的情况下移动？

示例游戏 [http://www.agame.com/game/chickaboom.html](http://www.agame.com/game/chickaboom.html)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T10:02:42.243

您可以使用此代码

body->setlinearvelocity(b2vec2(randomNumber1, randomNumber2));

# c# - 写入时覆盖文件中的行

> ID：14480808
> 
> 赞同：0
> 
> 时间：2013-01-23T13:24:46.037
> 
> 标签：c#

我正在使用以 ReadWrite 模式打开的流读取器读取文件。我的要求是检查文件中的特定文本，如果找到，则用新行替换该行。

目前我已经`StreamWriter`为写作初始化了一个。

它正在将文本写入文件，但将其附加到新行。

那么我应该怎么做才能替换特定的行文本呢？

```
System.IO.FileStream oStream = new System.IO.FileStream(sFilePath, System.IO.FileMode.Append, System.IO.FileAccess.Write, System.IO.FileShare.Read); 
System.IO.FileStream iStream = new System.IO.FileStream(sFilePath, System.IO.FileMode.Open, System.IO.FileAccess.Read, System.IO.FileShare.ReadWrite); 

System.IO.StreamWriter sw = new System.IO.StreamWriter(oStream);
System.IO.StreamReader sr = new System.IO.StreamReader(iStream); 

string line;
int counter = 0;
while ((line = sr.ReadLine()) != null)
{
    if (line.Contains("line_found"))
    {
        sw.WriteLine("line_found false");
        break;
    }
    counter++;
}
sw.Close();
sr.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:29:03.057

嗨试试下面的代码......它会帮助你......

//替换文本文件中的所有HI...

```
var fileContents = System.IO.File.ReadAllText(@"C:\Sample.txt");

fileContents = fileContents.Replace("Hi","BYE"); 

System.IO.File.WriteAllText(@"C:\Sample.txt", fileContents); 
```

//替换特定行中的 HI....

```
 string[] lines = System.IO.File.ReadAllLines("Sample.txt");
        for (int i = 0; i < lines.Length; i++)
        {
            if(lines[i].Contains("hi"))
            {
                MessageBox.Show("Found");
                lines[i] = lines[i].Replace("hi", "BYE");
                break;
            }
        }
        System.IO.File.WriteAllLines("Sample.txt", lines); 
```

# c++ - gperf 可以接受宏定义的关键字吗？

> ID：14480811
> 
> 赞同：3
> 
> 时间：2013-01-23T13:24:58.577
> 
> 标签：c++, c, gperf

我想要类似下面的 gperf 输入文件：

```
%{
#include <keywords.h>
// the contents of which contain
// #define KEYWORD1_MACRO "keyword1"
// #define KEYWORD2_MACRO "keyword2"
%}
%%
KEYWORD1_MACRO
KEYWORD2_MACRO
%% 
```

不幸的是，gperf 会将这些解释为“KEYWORD1_MACRO”等。

这样做的原因是我有另一方提供的协议规范作为头文件，其中包含这样`#define`的 s. 所以我无法控制它们是如何定义的，我宁愿不必将另一个预处理工具写入`#include`标头并将宏的扩展输出为带引号的字符串，*然后才*用作 gperf 输入文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:33:41.130

我做了以下实验`gcc -E`来处理那些`#include`s。

关键字.h：

```
#define KEYWORD1_MACRO "keyword1"
#define KEYWORD2_MACRO "keyword2" 
```

测试.c：

```
%{
#include "keywords.h"
%}
%%
KEYWORD1_MACRO
KEYWORD2_MACRO
%% 
```

命令：`gcc -E -o test.out.txt test.c`。
然后，test.out.txt 中的内容：

```
# 1 "test.c"
# 1 "<built-in>"
# 1 "<command line>"
# 1 "test.c"
%{
# 1 "keywords.h" 1
# 3 "test.c" 2
%}
%%
"keyword1"
"keyword2"
%% 
```

`#include`s 是自动处理的。然后，您可以进行一些文本处理并输入`gperf`.

# rest - 使用自己的 API 后端处理社交网络身份验证

> ID：14480813
> 
> 赞同：4
> 
> 时间：2013-01-23T13:25:04.007
> 
> 标签：rest, authentication, oauth, social-networking, backend

如何在我自己的后端通过 OAuth 处理某些社交网络的身份验证？

我第一个使用 facebook 的方法是

1.  直接用facebook认证客户端，获取accessToken
2.  将 accessToken 发送到我自己的后端并创建一个新用户，从 opengraph 获取详细信息
3.  从后端向客户端返回一个 ApiKey（自己的身份验证），每次调用我的后端时需要什么

我的问题是：

这种做法对吗？也许这适用于 facebook，但使用 twitter，我怎样才能获得“accessToken”并从 facebook 获取像 opengraph 这样的数据用户？而且，如果我需要其他社交网络，这行得通吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T23:49:30.660

我相信您的方法是正确的，因为按照标准 OAuth2.0 不允许用户登录。相反，您可以在他们批准您的应用程序以访问他们的数据时获得 access_token，在您身边创建用户，仅此而已。基本上，您将使用他们的社交数据来加快用户的“注册”（甚至可能是登录过程，前提是您假设身份验证将通过社交网络完成）。

就您希望实现的通用性使其适用于所有社交网络而言，我建议您研究一下[Spring Social](http://projects.spring.io/spring-social/)，因为它已经为您做了很多此类工作（如果您希望它非常通用的）。

希望有帮助！

# ios - Xcode 4.5：合并两个静态库，，，权限被拒绝

> ID：14480821
> 
> 赞同：2
> 
> 时间：2013-01-23T13:25:20.230
> 
> 标签：ios, static-libraries, xcode4.5

我正在尝试将静态库合并到一个库中。

这是脚本：

```
rm -rf ${BUILT_PRODUCTS_DIR}/libAggregate.a

lipo -create "${BUILT_PRODUCTS_DIR}/../${CONFIGURATION}-iphonesimulator/libStatic Library.a"
"${BUILT_PRODUCTS_DIR}/libStatic Library Device.a" -output "${BUILT_PRODUCTS_DIR}/libAggregate.a" 
```

但我收到了这个错误

> /Users/Me/Library/Developer/Xcode/DerivedData/Static_Library-bcdrrwpqmxtbqghkamlqbrgjkmfi/Build/Products/Release-iphoneos/libStatic Library Device.a：权限被拒绝

如何解决？

# ruby-on-rails - belongs_to 添加关系？

> ID：14480826
> 
> 赞同：0
> 
> 时间：2013-01-23T13:25:30.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

这些是我的模型

```
class Apartment
belongs_to :house
end

class House
has_many :apartments
end 
```

公寓控制器；

```
def index
    @apartments = Appartment.all
end 
```

公寓索引视图

```
.span9
  #container
    - @appartments.each do |apartment|
      .item{:class => apartment.features_to_html_class }
        %article.info.t_xs
          .article-base
            %section
              .span3
                %h2 #{link_to apartment.name, appartment_path(apartment)}
                %p 
                  = raw truncate(apartment.property_description, :length => 375, :omission => '...')
                %footer
                  %ul.meta
                    %li.comments
                      #{apartment.count_ratings} 
                      = t('apartment.details.reviews')
                    %li.notes
                      #{apartment.guests}
                      = t('apartment.details.persons')
                    %li.notes
                      #{apartment.bedrooms}
                      = t('apartment.details.bedrooms')
                    %li.notes
                      #{apartment.bathrooms}
                      = t('apartment.details.bathrooms')

            %ul.thumbnails
              %li.span5
                = image_tag(apartment.attachments.last.file.url, :class => 'thumbnail')
              - apartment.attachments.limit(4).each do |a|
                %li.span1
                  %a{:href => "#"}
                  = image_tag(a.file.url(:thumb), :class => "thumbnail")

            .span8
              %footer
                #more
                  #{link_to t('apartments.summary.button'), appartment_path(apartment), :class => 'btn btn-primary'} 
```

我从 DB 得到所有的公寓。但现在我想在公寓摘要中添加一个链接（belongs_to）到房子。我该怎么做...谢谢..remco

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:35:38.990

您是否尝试过 link_to 'House', house_path(apartment.house) ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:36:30.823

试试这个：

```
<%= link_to 'House', house_path(apartment.house) %> 
```

或者

```
<%= link_to 'House', house_url(apartment.house) %> 
```

问候！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:40:43.637

你得到了数据库中的所有公寓。现在你运行 sql 来获取`apartments`对象。
然后迭代每个公寓并将其链接到具有关联的房屋。

**这是按如下方式完成的：**

```
def index
        @apartments = Appartment.all

    @apartments.each do |apartment|
       #this is giving you the link to house via association defined.
         apartment.house 

       #this is giving you the value of the field say `house_name` of house table that is linked to apartment.

         @house_name = apartment.house.house_name
      .
      .
      .
    end
end 
```

# javascript - 滚动和放大 div

> ID：14480827
> 
> 赞同：3
> 
> 时间：2013-01-23T13:25:31.843
> 
> 标签：javascript, jquery, html, css

我有一个特殊的问题需要帮助。

我有一个 div，其中包含许多我希望能够放大的其他 div。例如，一些子 div 有文本，我希望用户能够放大以查看他们所说的内容。

这是一个例子——> [http://jsfiddle.net/du5ye/3/](http://jsfiddle.net/du5ye/3/)

我虽然也许我可以使用 jquery 来更改里面所有东西的类，但我不想硬编码新的大小，而是主包装器 div 中的每个属性都会随着用户滚动他的百分比而变大鼠标滚轮。此外，我希望用户能够通过拖动来滚动 div，就像谷歌地图一样。这种事情可能吗？我该怎么做呢？

这是那些宁愿避免使用 jsfiddle 的人的完整代码；

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="Style.css" rel="stylesheet" type="text/css" />
</head>
<script type="text/javascript" src="jquery-1.8.2.min.js"></script>
<style>
.layoutGreys {
    background-color: #DDD;
    border: solid thin #BBB;

    padding-left: 10px;
    padding-right: 10px;;

    float: left;
}

.Group{
    background-color: #955;
    width: 50px;
    height: 35px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 10px;
    margin-bottom: 10px;
    float: left;
}
.Divider{
    width: 10px;
    height: 35px;
    float: left;
    <!--border-top: medium solid #999;-->
    margin-top: 10px;
}

.wrapper{
    width: 560px;
    height: 175px;
    background-color: #333; 
    border: thick #888 solid;
}

</style>
<body onload="CreateBox()">
    <div id="wrapper" class="wrapper">
        <div class="layoutGreys">
            <div class="Group"></div>
            <!-- Parent -->
            <div class="layoutGreys">
                <!-- Parent Icon -->
                <div class="Group" style="float: none;"></div>
                        <!-- Children -->
                        <div class="layoutGreys">
                            <div class="Group"></div>
                            <div class="Divider"></div>
                            <div class="Group"></div>
                            <div class="Divider"></div>
                            <!-- Parent -->
                            <div class="layoutGreys">
                                <!-- Parent Icon -->
                                <div class="Group" style="float: none; "></div>
                                    <!-- Children -->
                                    <div class="layoutGreys">
                                        <div class="Group"></div>
                                        <div class="Divider"></div>
                                        <div class="Group"></div>
                                        <div class="Divider"></div>
                                        <div class="Group"></div>
                                    </div>
                            </div>
                            <div class="Divider"></div>
                            <div class="Group"></div>
                        </div>
            </div>
            <div class="Group"></div>   
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-06T22:02:11.260

您是否尝试过 css [zoom](https://drafts.csswg.org/css-device-adapt/#zoom-desc)属性？或者也许像[scale()](https://www.w3.org/TR/css-transforms-1/#transform-functions)这样的 css 转换？

您可以制作外部 div`overflow: scroll;`并绑定鼠标按下事件以滚动 div 以获得平移和拖动效果。

> *我知道这个问题很老，但它可能会帮助未来的访客。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:41:19.213

尝试根据您的需要修改此插件 - [http://www.htmldrive.net/items/demo/394/JQuery.iviewer-zoom-image-and-to-drag-effect](http://www.htmldrive.net/items/demo/394/JQuery.iviewer-zoom-image-and-to-drag-effect)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T02:23:45.400

使用 zoomooz.js 是一个用于使网页元素缩放的 jQuery 插件。它可用于制作 Prezi 之类的幻灯片以及缩放到图像或其他细节。

# c++ - ios_base::ate 和 tellp()

> ID：14480830
> 
> 赞同：3
> 
> 时间：2013-01-23T13:25:49.450
> 
> 标签：c++

```
#include <fstream>
#include <iostream> 

int main() 
{ 
    const char* fileName = "out1"; 
    std::ofstream fs1(fileName); 
    fs1 << "AAAAAAAAAAA\n"; 
    std::cout << fs1.tellp() << std::endl; 
    fs1.close(); 

    std::ofstream fs2(fileName, std::ios_base::ate); 
    std::cout << fs2.tellp() << std::endl; 
    fs2.close(); 

    return 0;   
} 
```

gcc 版本 4.4.6 20120305 (Red Hat 4.4.6-4) (GCC)

g++ 文件02.cpp

./a.out

12 0

为什么 fs2.tellp() 打印 0 而不是 12？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T13:41:46.110

当您打开一个文件以输出时`std::ofstream`，它会被截断，除非您同时设置`std::ios_base::in`and `std::ios_base::out`，或者您`std::ios_base::app`在 mode 参数中设置。

传递给构造函数的模式参数`std::ofstream`并`std::ifstream`转发给`std::filebuf::open`成员函数。它的值根据模式参数到 C 库函数的相应行为的映射确定如何打开文件`fopen`。此映射考虑除 之外的所有标志集`std::ios_base::ate`。总的来说，映射如下：

```
标志组合：in out trunc app | 开放模式
                        + "w"
                        + + “一个”
                                  +“一个”
                        + + "w"
                   + "r"
                   + + "r+"
                   + + + "w+"
                   + + + “一个+”
                   + + “一个+”

```

（C++03 省略了`app`设置但未`out`设置的行；这些现在等同于设置`app`和`out`都设置的行。）

此外，如果`std::ios_base::binary`设置了，`b`则附加到`fopen`等效模式。

如果传递的标志组合（忽略`std::ios_base::ate`）与这些组合之一不匹配，则打开*应该*失败。

请注意，`fopen`截断文件的模式`"w"`和`"w+"`.

`std::ios_base::ate`导致在打开文件时将位置设置为文件末尾。仅当 mode 参数的其余部分不会导致打开的文件被截断并且文件已经存在并且具有非零大小时，这才会生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:28:09.203

`out`再次打开文件进行写入时，您没有提供标志。这样做：

```
std::ofstream fs2(fileName, std::ios_base::out | std::ios_base::ate); 
```

# qt - 自定义小部件的占位符

> ID：14480835
> 
> 赞同：14
> 
> 时间：2013-01-23T13:26:08.513
> 
> 标签：qt, qt4, pyqt, pyqt4, pyside

我正在从 *.ui 文件加载 QMainWIdow 基础。另外，我有一个自定义小部件，我想放在表单的某个位置。目前我在 .ui 文件中放入了一个`QVBoxLayout`名为的空文件`placeholder`，并在 QMainWindow 子类中执行`self.placeholder.addWidget(my_custom_widget)`

我唯一不喜欢这种方法的是空布局没有自己的大小。我可以使用一个单元格和一个`QLabel`具有我想要的大小的虚拟小部件（例如）进行布局，然后替换这个小部件，然后添加我的自定义小部件，但该方法对我来说似乎太多了。

对于这样的任务，你的方法是什么？

我正在使用 Python (PyQt4)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-26T18:50:18.180

这是一个关于如何推广小部件的简单小教程：

1.  右键单击要用作占位符的小部件，然后选择**提升为**...。

    ![形象宣传](../Images/cab12e729d09df0422d6c2a68056ddf8.png)

2.  填写“ *Promoted Classes”*弹出对话框字段：
    *   **基类名称**：`QWidget`在这种情况下。
    *   **提升类名称**：您用于定义要为其创建占位符的小部件的类名称，这里是`MyWidget`
    *   **头文件**：*/path/to/MyWidget.py*`MyWidget`是放置文件的路径。![图像路径](../Images/4f30a12effeb4c4d2b3f8c58946c5221.png)
3.  单击**Add**后，将创建并显示该类，选择它并单击`Promote`。你已经完成了推广。![图片添加](../Images/91a7db5d2bb30d6d8e5bbbc1f53ed434.png)
4.  这是您应该在*Object Inspector*面板中看到的内容，类的名称不再是`QWidget`，`MyWidget`而是。

    ![形象提升](../Images/c0a0759656eb671ac425663ebea0449c.png)

5.  在文件中，`/path/to/MyWidget.py`我有一个名为 的类`MyWidget`，内容是这样的：

    ```
    #!/usr/bin/env python
    #-*- coding:utf-8 -*-

    from PyQt4 import QtGui

    class MyWidget(QtGui.QWidget):
        def __init__(self, parent=None):
            super(MyWidget, self).__init__(parent)

            self.labelHello = QtGui.QLabel(self)
            self.labelHello.setText("This is My Widget")

            self.layout = QtGui.QHBoxLayout(self)
            self.layout.addWidget(self.labelHello) 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T13:54:30.310

您应该将 a`QWidget`放在 中`QtDesigner`，然后将其提升到您的自定义小部件。有关更多详细信息，请查看此链接：[http ://doc.qt.digia.com/qt/designer-using-custom-widgets.html](http://doc.qt.digia.com/qt/designer-using-custom-widgets.html)

另一种选择是为您的小部件创建一个 QtDesigner 插件，但这仅在您需要放入多个 ui 时才有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T06:18:11.830

好吧，目前没有更好的解决方案，我最终得到了一个 QVBoxLayout，其中一个单元格中有一个间隔：

![在此处输入图像描述](../Images/9b0065eb95eb9a2f8181cb83a7947729.png)

```
FormClass, BaseClass = uic.loadUiType('main_window.ui')
assert BaseClass is QtGui.QMainWindow

class MainWindow(QtGui.QMainWindow, FormClass):

    def __init__(self):
        super().__init__()

        # uic adds a function to our class called setupUi
        # calling this creates all the widgets from the .ui file
        self.setupUi(self)

        # my custom widget
        self.web_view = WebView(self, WebPage(self, self.print_to_console))
        # replace placeholder with our widget
        self.placeholder_layout.takeAt(0)  # remove placeholder spacer
        # and replace it with our widget
        self.placeholder_layout.addWidget(self.web_view) 
```

# wix - WIX数据库部署、安装

> ID：14480837
> 
> 赞同：15
> 
> 时间：2013-01-23T13:26:24.887
> 
> 标签：wix, wix3.6, wix-extension

在我的设置过程中，我提供了一个使用“Windows 身份验证”或“服务器身份验证”的选项。一切正常，只要我进行“服务器身份验证”并提供 db userId 和密码，就可以安装 db。

为了使用“Windows 身份验证”（在 wix 中）安装数据库，我需要做什么？谢谢

我的 product.wxs 文件：

```
<Product Id="*" Name="MySetup2" Language="1033" Version="1.0.0.0" Manufacturer="Hewlett-Packard Company" UpgradeCode="bf1da750-c2fe-4026-9d2b-9d291a61a8b5">
    <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />

    <Binary Id="success_bmp" SourceFile="$(sys.SOURCEFILEDIR)success.bmp" />
    <Binary Id="error_bmp" SourceFile="$(sys.SOURCEFILEDIR)error.bmp" />

    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
    <MediaTemplate />

    <Feature Id="ProductFeature" Title="MySetup2" Level="1" ConfigurableDirectory="INSTALLDIR">
        <ComponentGroupRef Id="ProductComponents" />
        <ComponentGroupRef Id='MvcApp'/>
        <ComponentRef Id='SqlComponent' />
    </Feature>
    <Property Id="WIXUI_INSTALLDIR" Value="INSTALLDIR" />

    <Binary Id="CreateTableScript"  SourceFile="c:\Temp\MyDb.sql" />

    <!-- Specify UI -->
    <UIRef Id="MyWebUI" />

    <!-- .NET Framework 3.0 SP 1 must be installed -->
    <Property Id="FRAMEWORKBASEPATH">
        <RegistrySearch Id="FindFrameworkDir" Root="HKLM" Key="SOFTWARE\Microsoft\.NETFramework" Name="InstallRoot" Type="raw"/>
    </Property>

   <util:User Id="SQLUser" Name="[DATABASE_USERNAME]" Password="[DATABASE_PASSWORD]" />   
</Product>

<Fragment>
    <Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="ProgramFilesFolder">
            <Directory Id="INSTALLDIR" Name="MySetup2" >
                <!--<Component Id="Web.config" Guid="2ED81B77-F153-4003-9006-4770D789D4B6">
                    <File Id="Web.config" Name="Web.config" Source="$(var.SolutionDir)MvcApplication4\Web.config" DiskId="1" KeyPath="yes" />
                    <util:XmlFile Id="AppSettingsAddNode" File="[INSTALLDIR]Web.config" Action="createElement" ElementPath="/configuration/appSettings" Name="add" Sequence="1" />
                    <util:XmlFile Id="AppSettingsKeyAttribute" Action="setValue" File="[INSTALLDIR]Web.config" ElementPath="/configuration/appSettings/add" Name="key" Value="AddedDuringInstall" Sequence="2" />
                    <util:XmlFile Id="AppSettingsValueAttribute" Action="setValue" File="[INSTALLDIR]Web.config" ElementPath="/configuration/appSettings/add" Name="value" Value="This text was added during installation." Sequence="3" />
                </Component>
                <Directory Id="binFolder" Name="bin">
                    <Component Id="MvcApplication4.dll" Guid="7FC6DA37-12E5-463d-8E7E-08F73E40CCF2">
                        <File Id="MvcApplication4.dll" Name="MvcApplication4.dll" Source="$(var.SolutionDir)MvcApplication4\Bin\MvcApplication4.dll" DiskId="1" KeyPath="yes" />
                    </Component>
                </Directory>-->

            </Directory>            
        </Directory>

        <Component Id="SqlComponent" Guid="C50999A0-02FD-42d5-9F65-7375318DD328">
            <sql:SqlDatabase Id="SqlDatabase" 
                            Database="[DATABASE_NAME]" 
                            Server="[DATABASE_SERVER]" 
                            CreateOnInstall="yes" 
                            DropOnUninstall="yes" 
                            User="SQLUser">
                <sql:SqlScript Id="CreateTableScript" ExecuteOnInstall="yes" BinaryKey="CreateTableScript" />
            </sql:SqlDatabase>  
        </Component>

    </Directory>

</Fragment>

<Fragment>
    <ComponentGroup Id="ProductComponents" Directory="INSTALLDIR">
        <!-- TODO: Remove the comments around this Component element and the ComponentRef below in order to add resources to this installer. -->
        <!-- <Component Id="ProductComponent"> -->
        <!-- TODO: Insert files, registry keys, and other resources here. -->
        <!-- </Component> -->
    </ComponentGroup>
</Fragment> 
```

当我修改此部分并删除“用户”标签时，它使用 Windows 身份验证工作。如何根据 UI 的选择添加此标签或删除它（条件）。

```
 <sql:SqlDatabase Id="SqlDatabase" 
                        Database="[DATABASE_NAME]" 
                        Server="[DATABASE_SERVER]" 
                        CreateOnInstall="yes" 
                        DropOnUninstall="yes" 
                        User="SQLUser"> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-24T10:11:28.657

我解决了它并像这样创建了 WIX 数据库安装程序：

产品.wxs：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:iis="http://schemas.microsoft.com/wix/IIsExtension"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
     xmlns:sql="http://schemas.microsoft.com/wix/SqlExtension">

    <Product Id="*" Name="MySetup2" Language="1033" Version="1.0.0.0" Manufacturer="Hewlett-Packard Company" UpgradeCode="bf1da750-c2fe-4026-9d2b-9d291a61a8b5">
        <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />

        <Binary Id="success_bmp" SourceFile="$(sys.SOURCEFILEDIR)success.bmp" />
        <Binary Id="error_bmp" SourceFile="$(sys.SOURCEFILEDIR)error.bmp" />

        <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
        <MediaTemplate />

        <Feature Id="ProductFeature" Title="MySetup2" Level="1" ConfigurableDirectory="INSTALLDIR">
            <ComponentGroupRef Id="ProductComponents" />
            <ComponentRef Id='SqlComponent.IntegratedAuthentication' />
            <ComponentRef Id='SqlComponent.SQLAuthentication' />
        </Feature>
        <Property Id="WIXUI_INSTALLDIR" Value="INSTALLDIR" />

        <Binary Id="SqlScriptSQLAuthentication"  SourceFile="c:\Temp\MyDb.sql" />
        <Binary Id="SqlScriptIntegratedAuthentication"  SourceFile="c:\Temp\MyDb.sql" />

        <!-- .NET Framework 3.0 SP 1 must be installed -->
        <Property Id="FRAMEWORKBASEPATH">
            <RegistrySearch Id="FindFrameworkDir" Root="HKLM" Key="SOFTWARE\Microsoft\.NETFramework" Name="InstallRoot" Type="raw"/>
        </Property>
        <UIRef Id="MyWebUI" />
       <util:User Id="SQLUser" Name="[DATABASE_USERNAME]" Password="[DATABASE_PASSWORD]" />

        <Property Id='DATABASE_USERNAME'></Property>
        <Property Id='DATABASE_PASSWORD'></Property>
        <Property Id='DATABASE_NAME'></Property>
        <Property Id="DATABASE_SERVER">(local)</Property>
        <Property Id="DATABASE_LOGON_TYPE">DatabaseIntegratedAuth</Property>
        <Property Id="USEINTEGRATEDSECURITY" Secure="yes"></Property>
    </Product>

    <Fragment>
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder">
                <Directory Id="INSTALLDIR" Name="MySetup2" >
                </Directory>            
            </Directory>

            <Component Id='SqlComponent.SQLAuthentication' Guid='665D641C-3570-4b96-9CA5-2B4C12594A35' KeyPath='yes'>
                <Condition><![CDATA[USEINTEGRATEDSECURITY<>1]]></Condition>
                <sql:SqlDatabase Id='SqlDatabase.SQLAuthentication' Database='[DATABASE_NAME]' User='SQLUser' Server='[DATABASE_SERVER]' CreateOnInstall='yes' DropOnUninstall='yes' ContinueOnError='no' />
                <sql:SqlScript Id='SqlScriptSQLAuthentication' BinaryKey='SqlScriptSQLAuthentication' SqlDb='SqlDatabase.SQLAuthentication' ExecuteOnInstall='yes' />
            </Component>

            <Component Id='SqlComponent.IntegratedAuthentication' Guid='E5DF48AE-2338-4029-9FDF-8DAA6AD0216D' KeyPath='yes'>
                <Condition>USEINTEGRATEDSECURITY = 1</Condition>
                <sql:SqlDatabase Id='SqlDatabase.IntegratedAuthentication' Database='[DATABASE_NAME]' Server='[DATABASE_SERVER]' CreateOnInstall='yes' DropOnUninstall='yes' ContinueOnError='no' />
                <sql:SqlScript Id='SqlScriptIntegratedAuthentication' BinaryKey='SqlScriptIntegratedAuthentication' SqlDb='SqlDatabase.IntegratedAuthentication' ExecuteOnInstall='yes' />
            </Component>

        </Directory>

    </Fragment>

    <Fragment>
        <ComponentGroup Id="ProductComponents" Directory="INSTALLDIR">
            <!-- TODO: Remove the comments around this Component element and the ComponentRef below in order to add resources to this installer. -->
            <!-- <Component Id="ProductComponent"> -->
            <!-- TODO: Insert files, registry keys, and other resources here. -->
            <!-- </Component> -->
        </ComponentGroup>
    </Fragment>
</Wix> 
```

请注意基于 Windows 身份验证与服务器身份验证的“条件”运算符。

自定义操作：

```
namespace CustomActions
{
    using System;
    using System.Collections.Generic;
    using System.Data;
    using System.Data.SqlClient;
    using System.Diagnostics;
    using System.Security.Principal;
    using Microsoft.Deployment.WindowsInstaller;
    using Microsoft.SqlServer.Management.Smo;
    using View = Microsoft.Deployment.WindowsInstaller.View;

    public static class CustomActions
    {
        #region Public Methods and Operators

        [CustomAction]
        public static ActionResult EnumerateSqlServers(Session session)
        {
            if (null == session)
            {
                throw new ArgumentNullException("session");
            }

            session.Log("EnumerateSQLServers: Begin");

            // Check if running with admin rights and if not, log a message to
            // let them know why it's failing.
            if (false == HasAdminRights())
            {
                session.Log("EnumerateSQLServers: " + "ATTEMPTING TO RUN WITHOUT ADMIN RIGHTS");
                return ActionResult.Failure;
            }

            ActionResult result;

            DataTable dt = SmoApplication.EnumAvailableSqlServers(false);
            DataRow[] rows = dt.Select(string.Empty, "IsLocal desc, Name asc");
            result = EnumSqlServersIntoComboBox(session, rows);

            session.Log("EnumerateSQLServers: End");
            return result;
        }

        [CustomAction]
        public static ActionResult VerifySqlConnection(Session session)
        {
            try
            {
                //Debugger.Break();

                session.Log("VerifySqlConnection: Begin");

                var builder = new SqlConnectionStringBuilder
                                  {
                                      DataSource = session["DATABASE_SERVER"],
                                      InitialCatalog = "master",
                                      ConnectTimeout = 5
                                  };

                if (session["DATABASE_LOGON_TYPE"] != "DatabaseIntegratedAuth")
                {
                    builder.UserID = session["DATABASE_USERNAME"];
                    builder.Password = session["DATABASE_PASSWORD"];
                }
                else
                {
                    builder.IntegratedSecurity = true;
                }

                using (var connection = new SqlConnection(builder.ConnectionString))
                {
                    if (connection.CheckConnection(session))
                    {
                        session["ODBC_CONNECTION_ESTABLISHED"] = "1";
                    }
                    else
                    {
                        session["ODBC_CONNECTION_ESTABLISHED"] = string.Empty;
                    }
                }

                session.Log("VerifySqlConnection: End");
            }
            catch (Exception ex)
            {
                session.Log("VerifySqlConnection: exception: {0}", ex.Message);
                throw;
            }

            return ActionResult.Success;
        }

        #endregion

        #region Methods

        private static ActionResult EnumSqlServersIntoComboBox(Session session, IEnumerable<DataRow> rows)
        {
            try
            {
                //Debugger.Break();

                session.Log("EnumSQLServers: Begin");

                View view = session.Database.OpenView("DELETE FROM ComboBox WHERE ComboBox.Property='DATABASE_SERVER'");
                view.Execute();

                view = session.Database.OpenView("SELECT * FROM ComboBox");
                view.Execute();

                Int32 index = 1;
                session.Log("EnumSQLServers: Enumerating SQL servers");
                foreach (DataRow row in rows)
                {
                    String serverName = row["Name"].ToString();

                    // Create a record for this web site. All I care about is
                    // the name so use it for fields three and four.
                    session.Log("EnumSQLServers: Processing SQL server: {0}", serverName);

                    Record record = session.Database.CreateRecord(4);
                    record.SetString(1, "DATABASE_SERVER");
                    record.SetInteger(2, index);
                    record.SetString(3, serverName);
                    record.SetString(4, serverName);

                    session.Log("EnumSQLServers: Adding record");
                    view.Modify(ViewModifyMode.InsertTemporary, record);
                    index++;
                }

                view.Close();

                session.Log("EnumSQLServers: End");
            }
            catch (Exception ex)
            {
                session.Log("EnumSQLServers: exception: {0}", ex.Message);
                throw;
            }

            return ActionResult.Success;
        }

        private static bool HasAdminRights()
        {
            WindowsIdentity identity = WindowsIdentity.GetCurrent();
            var principal = new WindowsPrincipal(identity);
            return principal.IsInRole(WindowsBuiltInRole.Administrator);
        }

        private static bool CheckConnection(this SqlConnection connection, Session session)
        {
            try
            {
                if (connection == null)
                {
                    return false;
                }

                connection.Open();
                var canOpen = connection.State == ConnectionState.Open;
                connection.Close();

                return canOpen;
            }
            catch (SqlException ex)
            {
                session["ODBC_ERROR"] = ex.Message;
                return false;
            }
        }

        #endregion
    }
} 
```

MyWebUI.wxs

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <EnsureTable Id='ComboBox'/>

         <!--The custom action DLL itself.-->
        <Binary Id="WebAppCA"
                SourceFile="C:\Temp\MvcApplication4a\CustomActions\bin\Debug\CustomActions.CA.dll" />

         <!--The custom action to enumerate the web sites and app pools into the 
         appropriate combo boxes.-->
        <CustomAction Id="EnumerateSqlServers"
                      BinaryKey="WebAppCA"
                      DllEntry="EnumerateSqlServers"
                      Execute="immediate"
                      Return="check" />

        <CustomAction Id="VerifySqlConnection"
              BinaryKey="WebAppCA"
              DllEntry="VerifySqlConnection"
              Execute="immediate"
              Return="check" />

         <!--Make sure the enumerate web sites and app pools custom action gets 
        called, but only called if we are doing and install.--> 
        <InstallUISequence>
            <Custom Action="EnumerateSqlServers"
                    After="CostFinalize"
                    Overridable="yes">NOT Installed</Custom>
        </InstallUISequence>

        <!-- MyWeb UI -->
        <UI Id="MyWebUI">

            <UIRef Id="WixUI_FeatureTree" />
            <UIRef Id="WixUI_ErrorProgressText" />

            <!-- Injection of custom UI. -->
            <Publish Dialog="LicenseAgreementDlg" Control="Next" Event="NewDialog" Value="DatabaseInformationDlg">LicenseAccepted = "1"</Publish>            
        </UI>

    </Fragment>
</Wix> 
```

UIDialogs.wxs：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <UI>
            <!--Define the dialog to get the Server and Database name information from the user-->
            <Dialog Id="DatabaseInformationDlg" Width="370" Height="270" Title="[ProductName] [Setup]" NoMinimize="yes">

                <Control Id="ServerLabel" Type="Text" X="20" Y="62" Width="80" Height="25" NoPrefix="yes" Text="SQL Database:" />
                <Control Id="Server" Type="ComboBox" Height="16" Width="180" X="110" Y="60" Property="DATABASE_SERVER">
                    <ComboBox Property="DATABASE_SERVER">
                        <ListItem Text="[DATABASE_SERVER]" Value="[DATABASE_SERVER]" />
                    </ComboBox>
                    <Publish Property="LOGON_VALID" Value="0">1</Publish>
                </Control>

                <Control Id="DatabaseType" Type="RadioButtonGroup" X="20" Y="100" Width="290" Height="40" Property="DATABASE_LOGON_TYPE">
                    <RadioButtonGroup Property="DATABASE_LOGON_TYPE">
                        <RadioButton Value="DatabaseIntegratedAuth" X="0" Y="0" Width="290" Height="16" Text="Trusted (Windows Authentication)" />
                        <RadioButton Value="DatabaseAccount" X="0" Y="20" Width="290" Height="16" Text="Specify Username and Password (SQL Authentication)" />
                    </RadioButtonGroup>
                </Control>

                <!-- Login -->
                <Control Type="Text" Id="UsernameLabel" Width="50" Height="15" X="40" Y="150" Text="&amp;Login:">
                    <Condition Action="disable"><![CDATA[DATABASE_LOGON_TYPE <> "DatabaseAccount"]]></Condition>
                    <Condition Action="enable"><![CDATA[DATABASE_LOGON_TYPE = "DatabaseAccount"]]></Condition>
                </Control>
                <Control Id="Username" Type="Edit" X="110" Y="145" Width="180" Height="18" Property="DATABASE_USERNAME" Text="{80}">
                    <Condition Action="disable"><![CDATA[DATABASE_LOGON_TYPE <> "DatabaseAccount"]]></Condition>
                    <Condition Action="enable"><![CDATA[DATABASE_LOGON_TYPE = "DatabaseAccount"]]></Condition>
                    <Publish Property="LOGON_VALID" Value="0">1</Publish>
                </Control>

                <!-- Password -->
                <Control Type="Text" Id="PasswordLabel" Width="50" Height="15" X="40" Y="173" Text="&amp;Password:">
                    <Condition Action="disable"><![CDATA[DATABASE_LOGON_TYPE <> "DatabaseAccount"]]></Condition>
                    <Condition Action="enable"><![CDATA[DATABASE_LOGON_TYPE = "DatabaseAccount"]]></Condition>
                </Control>
                <Control Id="Password" Type="Edit" X="110" Y="170" Width="180" Height="18" Property="DATABASE_PASSWORD" Text="{80}" Password="yes" >
                    <Condition Action="disable"><![CDATA[DATABASE_LOGON_TYPE <> "DatabaseAccount"]]></Condition>
                    <Condition Action="enable"><![CDATA[DATABASE_LOGON_TYPE = "DatabaseAccount"]]></Condition>
                </Control>

                <Control Id="Test" Type="PushButton" X="40" Y="197" Width="100" Height="17" Text="Test Connection">
                    <Condition Action="disable"><![CDATA[DATABASE_SERVER = ""]]></Condition>
                    <Condition Action="enable"><![CDATA[DATABASE_SERVER <> ""]]></Condition>
                     <!--test connection--> 
                    <Publish Property="ODBC_SERVER" Value="[DATABASE_SERVER]" Order="1">1</Publish>
                    <Publish Property="ODBC_SERVER" Value="[ComputerName]" Order="1"><![CDATA[DATABASE_SERVER = "(local)"]]></Publish>
                    <Publish Property="ODBC_CONNECTION_STRING" Value="Driver=SQL Server;Server=[ODBC_SERVER],1433;Uid=[DATABASE_USERNAME];Pwd=[DATABASE_PASSWORD]" Order="2">1</Publish>
                    <Publish Event="DoAction" Value="VerifySqlConnection" Order="3">1</Publish>
                    <Publish Property="LOGON_VALID" Value="1" Order="4"><![CDATA[ODBC_CONNECTION_ESTABLISHED]]></Publish>
                    <Publish Property="LOGON_VALID" Value="0" Order="4"><![CDATA[NOT ODBC_CONNECTION_ESTABLISHED]]></Publish>
                    <Publish Property="LOGON_ERROR" Value="Unexpected Error" Order="4"><![CDATA[(NOT ODBC_CONNECTION_ESTABLISHED) AND (ODBC_ERROR = "")]]></Publish>
                    <Publish Property="LOGON_ERROR" Value="[ODBC_ERROR]" Order="4"><![CDATA[NOT ODBC_CONNECTION_ESTABLISHED]]></Publish>
                    <Publish Event="SpawnDialog" Value="InvalidLogonDlg" Order="5"><![CDATA[NOT ODBC_CONNECTION_ESTABLISHED]]></Publish>
                </Control>
                <Control Id="TestResult_Success" Type="Bitmap" X="210" Y="10" Width="24" Height="24" Text="success_bmp">
                    <Condition Action="hide"><![CDATA[LOGON_VALID <> 1]]></Condition>
                    <Condition Action="show"><![CDATA[LOGON_VALID = 1]]></Condition>
                </Control>
                <Control Id="TestResult_Failure" Type="Bitmap" X="210" Y="10" Width="24" Height="24" Text="error_bmp">
                    <Condition Action="hide"><![CDATA[LOGON_VALID = 1]]></Condition>
                    <Condition Action="show"><![CDATA[LOGON_VALID <> 1]]></Condition>
                </Control>

                <!-- Back button -->
                <Control Id="Back" Type="PushButton" X="180" Y="243" Width="56" Height="17" Text="&amp;Back">
                    <Publish Event="NewDialog" Value="LicenseAgreementDlg">1</Publish>
                </Control>
                <Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="&amp;Next">
                    <Publish Property="DATABASE_LOGON_TYPE" Value="[DATABASE_LOGON_TYPE]">1</Publish>
                    <Publish Property="DATABASE_SERVER" Value="[DATABASE_SERVER]">1</Publish>
                    <Publish Property="DATABASE_USERNAME" Value="[DATABASE_USERNAME]"><![CDATA[DATABASE_LOGON_TYPE = "DatabaseAccount"]]></Publish>
                    <Publish Property="DATABASE_PASSWORD" Value="[DATABASE_PASSWORD]"><![CDATA[DATABASE_LOGON_TYPE = "DatabaseAccount"]]></Publish>
                    <Publish Property="DATABASE_USERNAME"><![CDATA[DATABASE_LOGON_TYPE <> "DatabaseAccount"]]></Publish>
                    <Publish Property="DATABASE_PASSWORD"><![CDATA[DATABASE_LOGON_TYPE <> "DatabaseAccount"]]></Publish>

                    <Publish Property="USEINTEGRATEDSECURITY" Value="0"><![CDATA[DATABASE_LOGON_TYPE = "DatabaseAccount"]]></Publish>
                    <Publish Property="USEINTEGRATEDSECURITY" Value="1"><![CDATA[DATABASE_LOGON_TYPE <> "DatabaseAccount"]]></Publish>

                    <Condition Action="disable"><![CDATA[LOGON_VALID <> 1]]></Condition>
                    <Condition Action="enable"><![CDATA[LOGON_VALID = 1]]></Condition>
                    <Publish Event="NewDialog" Value="DatabaseNameDlg">1</Publish>
                </Control>

                <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="Cancel">
                    <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
                </Control>

                <Control Id="BannerBitmap" Type="Bitmap" X="0" Y="0" Width="370" Height="44" TabSkip="no" Text="WixUI_Bmp_Banner" />
                <Control Id="Description" Type="Text" X="25" Y="23" Width="280" Height="15" Transparent="yes" NoPrefix="yes">
                    <Text>Please enter a SQL instance and database name.</Text>
                </Control>
                <Control Id="BottomLine" Type="Line" X="0" Y="234" Width="370" Height="0" />
                <Control Id="Title" Type="Text" X="15" Y="6" Width="200" Height="15" Transparent="yes" NoPrefix="yes">
                    <Text>{\WixUI_Font_Title}SQL instance and database information.</Text>
                </Control>
                <Control Id="BannerLine" Type="Line" X="0" Y="44" Width="370" Height="0" />
            </Dialog>

            <!-- INVALIDE SQL LOGIN -->
            <Dialog Id="InvalidLogonDlg" Width="260" Height="105" Title="Invalid Logon">
                <Control Id="Return" Type="PushButton" X="102" Y="77" Width="56" Height="17" Default="yes" Cancel="yes" Text="OK">
                    <Publish Event="EndDialog" Value="Return">1</Publish>
                </Control>
                <Control Id="Text" Type="Text" X="48" Y="15" Width="194" Height="50" Text="[ODBC_ERROR]" />
                <Control Id="Icon" Type="Icon" X="15" Y="15" Width="24" Height="24" FixedSize="yes" IconSize="32" Text="WixUI_Ico_Exclam" />
            </Dialog>

            <!-- DATABASE NAME -->
            <Dialog Id="DatabaseNameDlg" Width="370" Height="270" Title="[ProductName] [Setup]" NoMinimize="yes">
                <!-- Connection String -->
                <Control Id="DatabaseStringLabel" Type="Text" X="45" Y="73" Width="100" Height="15" TabSkip="no" Text="Database name:" />
                <Control Id="DatabaseStringEdit" Type="Edit" X="45" Y="90" Width="220" Height="18" Property="DATABASE_NAME" Text="{100}" />

                <Control Id="DatabaseStringLabel123" Type="Text" X="45" Y="120" Width="100" Height="15" TabSkip="no" Text="Use Win: [USEINTEGRATEDSECURITY]--" />

                <!-- Back button -->
                <Control Id="Back" Type="PushButton" X="180" Y="243" Width="56" Height="17" Text="&amp;Back">
                    <Publish Event="NewDialog" Value="DatabaseInformationDlg">1</Publish>
                </Control>
                <Control Id="Next" Type="PushButton" X="236" Y="243" Width="56" Height="17" Default="yes" Text="&amp;Next">
                    <Publish Event="NewDialog" Value="CustomizeDlg">
                        <!--if settings are correct, allow next dialog-->
                        <![CDATA[DATABASE_NAME <> ""]]>
                    </Publish>
                </Control>
                <Control Id="Cancel" Type="PushButton" X="304" Y="243" Width="56" Height="17" Cancel="yes" Text="Cancel">
                    <Publish Event="SpawnDialog" Value="CancelDlg">1</Publish>
                </Control>
                <Control Id="BannerBitmap" Type="Bitmap" X="0" Y="0" Width="370" Height="44" TabSkip="no" Text="WixUI_Bmp_Banner" />
                <Control Id="Description" Type="Text" X="25" Y="23" Width="280" Height="15" Transparent="yes" NoPrefix="yes">
                    <Text>Please enter database configuration</Text>
                </Control>
                <Control Id="BottomLine" Type="Line" X="0" Y="234" Width="370" Height="0" />
                <Control Id="Title" Type="Text" X="15" Y="6" Width="200" Height="15" Transparent="yes" NoPrefix="yes">
                    <Text>{\WixUI_Font_Title}Database Settings</Text>
                </Control>
                <Control Id="BannerLine" Type="Line" X="0" Y="44" Width="370" Height="0" />
            </Dialog>

        </UI>
    </Fragment>
</Wix> 
```

输出：一个工作的数据库安装程序：

![在此处输入图像描述](../Images/6a2d9ba99c113cbf2ab1b7d8a4b2dfae.png) ![在此处输入图像描述](../Images/7ca945ed4bf383ab7fb160b6e5d79bda.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:53:25.193

请参阅：[SqlDatabase 元素（Sql 扩展）](http://wix.sourceforge.net/manual-wix3/sql_xsd_sqldatabase.htm)

> **评论**
> 
> User 属性引用在 User 元素中指定的凭据。如果未指定用户，则默认情况下将使用 Windows 身份验证，使用执行安装的用户的凭据来执行 sql 字符串等。

# tomcat - 未调用 Tomcat Comet 事件 - 此 URL 不支持 HTTP 方法 GET

> ID：14480838
> 
> 赞同：0
> 
> 时间：2013-01-23T13:26:26.833
> 
> 标签：tomcat, comet, nio

我正在尝试实现彗星进程。

雄猫 6.0.36

红帽企业 Linux 服务器 6.2 版（圣地亚哥）

Java 7u11（32 位）

我已经实现了 CometProcessor。我正在使用 NIO 连接器。当我尝试 servlet 时，我得到：此 URL 不支持 HTTP 方法 GET。我在这件事上发现的其他主题建议人们确保他们使用的是 NIO 连接器。我有。我还看到了确保 catalina.jar 未与 Web 应用程序打包的建议。我也检查过。

难道我做错了什么？

谢谢！

代码片段：

```
public class ConsolidatedActionCenterPush extends HttpServlet  implements CometProcessor,CAC{

  private static MessageSender messageSender = null;
  private static final Integer TIMEOUT = 600 * 1000;

  @Override
  public void destroy() {
    messageSender.stop();
    messageSender = null;
  }

  @Override
  public void init() throws ServletException {
    messageSender = new MessageSender();
    messageSender.start();

  }

  @Override
  public void event(final CometEvent event) throws IOException, ServletException {
    HttpServletRequest request = event.getHttpServletRequest();
    HttpServletResponse response = event.getHttpServletResponse();

 ........

} 
```

来自 catalina 日志：

```
Jan 22, 2013 11:46:19 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in     production environments was not found on the java.library.path:     /usr/jre732/lib/i386/server:/usr/jre732/lib/i386:/usr/lib:/usr/java/packages/lib/i386:/lib:/usr/lib
Jan 22, 2013 11:46:20 AM org.apache.tomcat.util.net.NioSelectorPool getSharedSelector
INFO: Using a shared selector for servlet write/read
Jan 22, 2013 11:46:20 AM org.apache.coyote.http11.Http11NioProtocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Jan 22, 2013 11:46:20 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 540 ms
Jan 22, 2013 11:46:20 AM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Jan 22, 2013 11:46:20 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.36
Jan 22, 2013 11:46:20 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory servlet
Jan 22, 2013 11:46:23 AM org.apache.coyote.http11.Http11NioProtocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Jan 22, 2013 11:46:23 AM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:10794
Jan 22, 2013 11:46:23 AM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/18  config=null
Jan 22, 2013 11:46:23 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 3127 ms 
```

来自 catalina.out：

```
Jan 22, 2013 11:46:23 AM org.apache.coyote.http11.Http11NioProtocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Jan 22, 2013 11:46:23 AM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:10794
Jan 22, 2013 11:46:23 AM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/18  config=null
Jan 22, 2013 11:46:23 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 3127 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:05:59.120

我解决了。我使用的是调用者 servlet，因为我们有很多未映射的 servlet。删除调用者 servlet 修复了彗星进程。

# java - 如何将项目中的 JAR 库作为外部引用？

> ID：14480840
> 
> 赞同：0
> 
> 时间：2013-01-23T13:26:34.143
> 
> 标签：java, web-applications

我正在使用 Eclipse 在 Java 上的 Web 项目中工作。

该项目将至少在两个不同的 WAR 中部署为“开发”和“测试”。

该项目运行良好。

但是当我作为 WAR 文件导出时，每个 WAR 都包含一个使用的库的副本（Spring JAR、Quartz JAR、Hibernate JAR 等）。

所以我在每个实现中重复 JAR。

所以我老板的想法是从 web 项目中删除 JAR 并且：

选项 1：将所有库复制到 windows 文件夹，然后使用“相对路径”引用。

选项 2：将 JAR 放在 Java JRE/JDK lib 文件夹中，并以某种方式引用 JAR。

同样通过此更改，我们正在尝试解决 PermGem 异常

什么是最好的想法？

我是 Java 项目的新手，所以我不知道该怎么做。

感谢您的回答，并为我糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:31:33.313

IMO*最好*的想法是将它们与您的应用程序捆绑在一起。

如果没有其他原因，这允许您在一个版本中升级库而不影响其他版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:49:39.640

我觉得你目前的方法更好，每次战争都装满罐子。正如@Dave 所说，如果你把它们放在一个共同的地方，就会有依赖性问题。此外，您的两个选项都不会解决`PermGen`错误，作为临时措施，尝试使用`-XX:MaxPermSize`JVM 参数增加 PermGen 内存，即使在此之后，如果您仍然遇到内存不足错误，那么您需要找出内存泄漏的位置。

# mysql - mysql中的函数问题

> ID：14480842
> 
> 赞同：0
> 
> 时间：2013-01-23T13:26:34.970
> 
> 标签：mysql, function

我正在尝试开发一个功能，但我遇到了一个错误，请问这个错误在哪里？谢谢。这是代码：

```
mysql> DELIMITER //
mysql> CREATE FUNCTION anumero (cadena varchar(20)) returns INT
-> DETERMINISTIC
-> BEGIN
-> DECLARE LARGO,I int DEFAULT 0;
-> DECLARE N VARCHAR(20) DEFAULT "";
-> SET I =1;
-> SET LARGO = LENGTH(CADENA);
-> REPEAT
-> IF INSTR('0123456789',SUBSTRING(CADENA,I,1))>0 THEN
-> SET N= CONCAT(N,SUBSTRING(CADENA,I,1));
-> END IF;
-> SET I = I+1;
-> UNTIL I > LARGO
-> END REPEAT;
-> return CAST (N as binary);
-> END // 
```

ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'binary) 附近使用的正确语法；END' 在第 15 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:39:46.523

在 MySQL 中，你不能在函数名和它的参数之间写任何字符。
所以，你的`return`陈述应该是：

    `return CAST(N as binary);`

# bash - 使用 bash 从文件中读取数据并使用 awk 获取某些列的总和

> ID：14480844
> 
> 赞同：0
> 
> 时间：2013-01-23T13:26:37.547
> 
> 标签：bash, unix, awk

假设我想收集一些关于 .txt 文件的统计信息，如下所示：

```
misses 15
hit 18
misses 20
hit 31 
```

我写了一个 bash 脚本，它只打印每一行：

```
#!/bin/bash 
while read line           
do           
    echo $line 
done <t.txt 
```

我现在想要的是：这个例子是伪代码：

```
read every line
   if first column is miss add the number to total misses
   if hits add the number to total hits

print total hits, and total misses in a file 
```

我已经搜索过了，这可以用 awk 完成。你能用 awk 帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T14:03:08.427

```
awk '/misses/||/hit/{a[$1]+=$2}END{print "total hits",a["hit"],",and total misses",a["misses"]}' your_file 
```

测试：

```
> cat temp
misses 15
hit 18
misses 20
hit 31
hait 31
> awk '/misses/||/hit/{a[$1]+=$2}END{print "total hits",a["hit"],",and total misses",a["misses"]}' temp
total hits 49 ,and total misses 35 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T13:38:49.113

只需将您的算法转换为 bash：

```
#!/bin/bash 
while read what count ; do           
    case $what in
        (hit)    let total_h+=count ;;
        (misses) let total_m+=count ;;
        (*)      echo Invalid input >&2; exit ;;
    esac
done < t.txt
echo Hits: $total_h, Misses: $total_m 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T13:38:58.777

不需要任何 bash gubbins，awk 会做这一切

```
awk 'BEGIN{ hits=0; misses=0; }/^hit/{ hits+=$NF}; /^misses/{misses=$NF}; END {print "Hits: " hits "\nMisses: " misses }' txtfile 
```

好的，这一个班轮的 3 个部分：

```
BEGIN{ hits=0; misses=0; } 
```

在 awk 从 txtfile 读取任何行并初始化两个变量命中和未命中之前只运行一次。

```
/^hits/{ hits+=$NF}; /^misses/{misses=$NF}; 
```

在每一行上运行，如果该行以 hits 开头，则将最后一列添加到 hits 变量中，如果它以未命中开始，则未命中变量将最后一列添加到其中。

```
END {print "Hits: " hits "\nMisses: " misses' } 
```

仅在处理完所有行并打印出详细说明命中和未命中的消息后运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T14:29:45.853

```
declare misses=0 hit=0
while read var val; do
    let $var+=val
done < f.txt
echo "Misses: $misses"
echo "Hits: $hit" 
```

# c# - 如何在 ASP.NET MVC3 中从部分视图发布数据？

> ID：14480845
> 
> 赞同：2
> 
> 时间：2013-01-23T13:26:39.640
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, partial-views

我有一个使用视图模型的视图。在这个视图中，我在`@using (Html.BeginForm())`块代码中使用了部分视图，如下所示

```
 @foreach (var party in Model.Participants)
                {
                    Html.RenderPartial("BlankEditorRow", party);
                } 
```

局部视图有一些文本框字段，用户可以在这些字段中输入数据。现在提交按钮没有放在局部视图中，而是放在主视图中。

在我看来，当我单击提交按钮时，我在视图模型中得到空值

```
[HttpPost]
    public ActionResult ActionName(ViewModel model)
    {

    } 
```

我不确定如何从部分视图中获取帖子数据。谁能帮我理解如何从部分视图发布数据？例子会有很大帮助

编辑：部分视图如下：

```
@model ASPNETMVCApplication.Models.Administration.Account.PartyModel 
```

@使用 HtmlHelpers.BeginCollectionItem

```
<tr class="editorRow">        
    @using (Html.BeginCollectionItem("party"))
    {

        <td>@Html.TextBoxFor(m => m.FirstName, new { @style = "width: 100px;" })
        </td>
        <td>@Html.TextBoxFor(m => m.LastName, new { @style = "width: 100px;" })
        </td>
        <td>
            @Html.DropDownListFor(model => model.PartyPersonalDetail.Gender, new SelectList(Model.Gender, "Id", "Name"), new { @style = "width: 100px;" })
        </td>
        <td>@Html.TextBoxFor(m => m.PartyPersonalDetail.MobilePhone, new { @style = "width: 100px;" })
        </td>
        <td>
            @Html.DropDownListFor(model => model.PartyPersonalDetail.GothraId, new SelectList(Model.Gothras, "Id", "GothraName"), "--Don't Know--", new { @style = "width: 122px;" })
        </td>
        <td>
            @Html.DropDownListFor(model => model.PartyPersonalDetail.NakshtraId, new SelectList(Model.Nakshtras, "Id", "NakshtraName"), "--Don't Know--", new { @style = "width: 122px;" })
        </td>
        <td>@Html.TextBoxFor(m => m.PartyPersonalDetail.EMail1, new { @style = "width: 135px;" })
        </td>
        <td>
            <a href="#" class="deleteRow">Delete</a>
        </td>

    }
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:06:48.120

使用 **编辑器模板**。

假设您的 Viewmodel 是这样的

```
public EventViewModel
{
  public int ID { set;get;}
  public string EventName { set;get;}
  public List<Participant> Participants {set;get;}
  public EventViewModel()
  {
    Participants=new List<Participant>();
  }
}

public class Participant
{
  public string FirstName { set;get;}
  public string LastName { set;get;}
} 
```

在 ~/Views/ *yourControllerNameFolder* / 下创建一个名为“ **EditorTemplates** ”的文件夹，并创建一个名为 的视图（编辑器模板）。*`Participant.cshtml`*

 *现在为您的编辑器模板添加代码

```
@model Participant
<p>
  @Html.TextBoxFor(x=>x.FirstName)
</p>
<p>
  @Html.TextBoxFor(x=>x.LastName)
</p> 
```

现在在您的主视图中，使用`Html.EditorFor`HTML 帮助器方法调用此编辑器模板。

```
@model EventViewModel

@using (Html.BeginForm())
{
    <p>Event Name</p>
    @Html.TextBoxFor(x => x.EventName) 
    @Html.EditorFor(x=>x.Participants)
    <input type="submit" value="Save" />
} 
```

现在，当您发布表单时，您将在视图模型的参与者集合中获得参与者信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:38:09.127

为了在 MVC 中发布集合，它们必须被**索引**`foreach`，所以你需要一个`for`循环来代替它。

尝试这个：

```
@for(int i = 0; i < Model.Participants.Count; i++)
{
    Html.RenderPartial("BlankEditorRow", Model.Participants[i]);
} 
```*

# scala - Specs2 - 不应在并发环境中使用单元规范样式

> ID：14480850
> 
> 赞同：3
> 
> 时间：2013-01-23T13:26:48.313
> 
> 标签：scala, testing, concurrency, specs2

Specs2 在处理验收规范（如果我们想要的话甚至是单元规范）时提升了函数式风格。

[规范Specs2 哲学](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Philosophy.html#Philosophy)中提到了使用旧样式（可变样式）的风险，并涉及潜在的不良副作用：

> 需要了解的重要事项是：
> 
> 副作用仅用于构建规范片段，通过改变变量它们还用于在出现故障时（通过抛出异常）短路示例的执行。如果您在示例主体中构建片段或**同时执行相同的规范**，那么天应该塌下来。“上下文”管理将通过案例类或特征完成（参见 org.specs2.examples.MutableSpec）

我不知道如何同时运行相同的规范，因为每个规范都与另一个不同（分离的类的实例），即使我们同时运行相同的两次或更多次。

确实，`specFragments`（可变变量）：

```
protected[mutable] var specFragments: Fragments = new Fragments() 
```

`a trait`在被调用中声明`FragmentBuilder`，而不是在`object`（在scala意义上=>单例）或其他共享事物中......，每个实例`specFragments`的局部变量也是如此。`Specification`

那么什么情况下可能会冒并发机制的风险呢？

我并没有真正想出一个真实的场景（非愚蠢）来证明 Specs2 功能风格的好处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T21:54:37.037

可变规范的问题只能在规范构建时看到，而不是在执行时看到。在构建可变规范时，很容易产生意想不到的副作用

```
import org.specs2._

val spec = new mutable.Specification {
  "example" >> ok
}
import spec._

def addTitle {
  // WHOOPS, forgot to remove this line!
  // test, add also an example
  "this is only for testing" >> ok

  "new title".title
}
addTitle 
```

输出是：

```
new title

+ example
+ this is only for testing

Total for specification new title
Finished in 0 ms
2 examples, 0 failure, 0 error 
```

所以，你是对的，指南中突出显示的句子（“同时执行相同的规范”）是模棱两可的。如果多个线程正在构建相同的规范对象，但如果它们正在运行它（在该句子中整个过程被称为“执行”），则规范本身的构造可能是不安全的。

您的另一个问题是：“功能风格”有什么好处？从用户的角度来看，主要的好处是它是另一种编写规范的风格，所有文本都放在第一位，所有代码都放在其他地方。

总之，如果您喜欢 Specification 的可变风格，请不要害怕！

# android - Android/iPhone 中的 CSS

> ID：14480853
> 
> 赞同：0
> 
> 时间：2013-01-23T13:26:55.883
> 
> 标签：android, iphone, html, css

我需要有关适用于 android 和 iphone 的 html 5 页面的帮助。它应该包含两个在屏幕底部占 5% 的链接。我尝试通过放置具有绝对位置和底部 5% 的表格或 div 来使用 CSS。但是，`decoupled`当虚拟键盘出现时，虚拟键盘会链接到虚拟键盘上方，而当站点返回时，它会消失。我试图不在页脚标签中使用绝对位置和位置，并提出了同样的问题。如果是原生 android 项目可以使用：android:windowSoftInputMode="adjustNothing"，但我不能使用它，因为它是一个 web 项目。我在这些链接上有很多项目，应该得到下面的屏幕：

* * *

margin-top: 20% img logo (80% 屏幕宽度)

margin-top: 10% 输入登录

margin-top: 10% 输入通过

margin-top: 10% 按钮

margin-top: 5% 其他链接

空白区域

页面中的区域链接底部（底部和底部的 5%）

* * *

徽标图像的宽度应为 80%，并自动将其高度设置为不变形。对于所有 iphone 和 android 设备（平板电脑和智能手机），这一切都必须是平等的 帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:15:59.773

你可以试试：`<img src="image.jpg" width="80%">`。如果只指定宽度，则高度应按比例自动设置。这就是它在浏览器中的工作方式，但我不确定它在手机应用程序中的行为方式。

# sql - 获得明显的结果

> ID：14480856
> 
> 赞同：0
> 
> 时间：2013-01-23T13:27:09.697
> 
> 标签：sql, sql-server-2008, distinct

我有以下表格

产品 -- 为产品 ID 存储 ProductRelation -- 存储链接的产品 ID

```
DECLARE @Product table(ProductID int)

DECLARE @ProductRelation TABLE (FirstProductID int,SecondProductID int)

INSERT INTO @Product 

SELECT 1
UNION ALL
SELECT 2
UNION ALL
SELECT 3
UNION ALL
SELECT 4
UNION ALL
SELECT 5
UNION ALL
SELECT 6
UNION ALL
SELECT 7
UNION ALL
SELECT 8
UNION ALL
SELECT 9
UNION ALL
SELECT 10

--SELECT * FROM @Product

INSERT INTO @ProductRelation

SELECT 1,2
UNION ALL
SELECT 3,5
UNION ALL
SELECT 2,6
UNION ALL
SELECT 1,4
UNION ALL
SELECT 1,4

--SELECT * FROM @ProductRelation

SELECT ProductID,'Not Linked' AS 'Relation' FROM @Product
UNION
SELECT FirstProductID,'Linked' from @ProductRelation
UNION
SELECT SecondProductID ,'Linked' FROM @ProductRelation 
```

以上查询结果重复ProductID

我想选择不同的 ProductID ...如果产品 ID 之间存在关系，那么它应该显示带有“已链接”的 ProductID 如果没有关系，则带有“未链接”的 ProductID

我想要这样的预期结果

```
ProductID          Relation

1           Linked
2           Linked
3           Linked
4           Linked
5           Linked
6           Linked
7           Not Linked
8           Not Linked
9           Not Linked
10          Not Linked 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:33:45.217

试试这个：

```
SELECT
   P.ProductID,
   CASE WHEN COUNT(R.FirstProductID) > 0
        THEN 'Linked'
        ELSE 'Not Linked'
   END Relation
FROM Product P
   LEFT JOIN ProductRelation R
      ON P.ProductID = R.FirstProductID
        OR P.ProductID = R.SecondProductID
GROUP BY P.ProductID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:52:00.410

嗯......我喜欢这个使用一些非关键技巧的机会！

```
select P.ProductID
,isnull(L.relation,'Not Linked') as relation
from @Product P
left outer join (select U.ProductID, cast('Linked' as varchar(max)) as relation
                from @ProductRelation
                unpivot (ProductID for prod in (FirstProductID,SecondProductID))U
                group by U.ProductID
)L
on L.ProductID = P.ProductID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:34:15.717

您可以在 SQL Server 中使用左联接与 CASE WHEN

```
SELECT DISTINCT 
   ProductID,
   CASE WHEN @ProductRelation.FirstProductId IS NULL THEN 'Not Linked' ELSE 'Linked' END [Status]
FROM @Product 
LEFT JOIN @ProductRelation ON @Product.ProductID = @ProductRelation.FirstProductId
RIGHT JOIN @ProductRelation ON @Product.ProductID = @ProductRelation.SecondProductId 
```

# php - 通过 AJAX 将数组从 php 传递到 javascript

> ID：14480857
> 
> 赞同：3
> 
> 时间：2013-01-23T13:27:13.350
> 
> 标签：php, javascript, mysql, jquery

我需要从脚本 php 生成一个数组。我有数据库中每个用户的纬度和经度。我使用以下代码（file.php）从数​​据库中获取值：

```
$query = "SELECT Latitude, Longitude FROM USERS";
$result=mysql_query($query);
$array=array();
while ($data = mysql_fetch_array($result)) {
    $array[]=$data['Latitude'];
    $array[]=$data['Longitude'];
}

echo $array; 
```

我用这个代码用ajax调用：

```
$.post('./file.php',
     function( result ){    
         alert(result);
     }); 
```

但即使在脚本 php 中数组是正确的（如果我回显数组 [25] 我获得正确的值）在 Javascript 中我获得“未定义”。如何以正确的方式获取数组？谢谢！

编辑：用 json_encode($array); 编码后 在 php 和 JSON.parse(result) 在 javascript 中似乎不起作用。在控制台中我有数组，但我无法访问它的值。（Array[0] 给了我“未定义”）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-23T13:29:24.583

用这个

```
echo json_encode($array); 
```

在服务器端

和

```
var arr=JSON.parse(result); 
```

在客户端

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:35:15.060

正如 Ruslan Polutsygan 提到的，您可以使用

```
echo json_encode($array); 
```

在 PHP 端。

在 Javascript 端，您可以简单地将 DataType 添加到 $.post()-Function：

```
$.post(
  './file.php',
  function( result ){    
    console.log(result);
  },
  'json'
); 
```

结果参数是解析的 JSON 数据。

您还可以在 PHP 脚本中设置正确的 Content-Type。然后 jQuery 应该自动解析从您的 PHP 脚本返回的 JSON 数据：

```
header('Content-type: application/json'); 
```

见
[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)
[http://de3.php.net/json_encode](http://de3.php.net/json_encode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:34:19.490

您需要将php数组转换为json，尝试：

`echo json_encode($array);`

jQuery 应该能够看到它返回的 json 并自动创建一个 javascript 对象。

```
$.post('./file.php', function(result)
{    
     $.each(result, function()
     {
         console.log(this.Latitude + ":" + this.Longitude);
     });
}); 
```

# facebook - Facebook PHP SDK getLogoutUrl

> ID：14480858
> 
> 赞同：1
> 
> 时间：2013-01-23T13:27:19.243
> 
> 标签：facebook, facebook-graph-api

在 facebook 应用程序的上下文中，这有什么意义？由于他们在授权和登录之前无法播放您的应用程序。将他们从 facebook 会话中注销并重定向到您的应用程序实际服务的目的是什么？

```
This method returns a URL that, when clicked by the user, will log them out of their      Facebook session and then redirect them back to your application. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:32:41.707

它在 Facebook 之外很有用，在用户通过 Facebook 进行身份验证以登录您的网站的情况下。

# c# - “无法将对象从 ... 投射到 ...” WCF 回调

> ID：14480860
> 
> 赞同：1
> 
> 时间：2013-01-23T13:27:20.757
> 
> 标签：c#, wcf, callback

从昨天开始，我就得了脑筋急转弯。我有一个 WCF 客户端和一个 net.tcp 托管的 WCF 服务，可以正常工作数周。然后经过一些小的更改，服务突然在`IServiceCallBack callback = OperationContext.Current.GetCallbackChannel<IServiceCallBack>()`调用时崩溃，抛出“无法投射......”异常。在我不需要回调的地方，一切正常。就像服务不再识别回调一样。

我看到当 VS 在缓存中有多个版本的相同程序集时可能会发生这种情况，所以我去了`C:\Users\xxx\AppData\Local\Microsoft\VisualStudio\10.0\ProjectAssemblies`并删除了所有文件。没有成功，因为错误不断发生。

我什至尝试过，我的解决方案的旧备份运行良好，现在它们只是以同样的方式崩溃。我现在对这个问题完全一无所知。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:05:05.210

我已经解决了我的问题，我实际上有 2 个 WCF 相似的服务，它们的 url 相似，而且我使用了错误的服务（一个根本没有任何回调）。我不知道为什么我的旧备份似乎事先可以工作。

# php - PHP 字符串在“for”语句之外无法正常工作

> ID：14480861
> 
> 赞同：-1
> 
> 时间：2013-01-23T13:27:22.040
> 
> 标签：php, arrays, string, wordpress, for-loop

我们已经完成了一个 Wordpress 搜索表单，但我们无法让 PHP 字符串在`for`语句之外正常工作。

我们正在使用 WordPress 查询来使过滤器工作。如您所见，我们一直在使用不同的自定义字段。

其余的字符串，例如`$height`和`$tshirt_size-`在下面定义了数百行并且可以完美地工作。

我们遇到的唯一问题是我们不能使`$all_dates`字符串在`for`语句之外工作。

当我们尝试在里面打印它时工作正常并显示我们要求的所有日期。但是当我们尝试在外面做时，只显示一个日期（最后一个）。

这就是查询的工作方式（我希望注释足够清楚）：

```
<?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;   

query_posts( array(
'post_type' => 'bbdd',
'paged' => $paged,
'meta_query' => array(
            $tshirt_size,           /*WORKS WELL*/
            $shoe_size,              /*WORKS WELL*/
            $height,                 /*WORKS WELL*/
            $weight,                 /*WORKS WELL*/
            array( 'key' => 'age',
                   'value' => array($all_dates) /*NOT WORKING*/ ),)) );

$date_from = $_GET["date_from"]; 
$date_from = strtotime($date_from); 

$date_to = $_GET["date_to"]; 
$date_to = strtotime($date_to);

for ($i=$date_from; $i<=$date_to; $i+=86400)
{
    $all_dates = "'" . date("d/m/Y", $i) . "', ";

echo $all_dates; /*PRINTING ALL DATES*/ 
}  
echo $all_dates; /*PRINTING ONLY ONE DATE (LAST DATE)*/ ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:32:19.023

您没有连接原始 $all_dates：

$all_dates **。**=“'”。日期（“d/m/Y”，$i）。"', ";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:29:32.490

这是正常的，在您的“for”中，每次循环时打印一个日期，在“for”之外，您只打印最后一个日期，打印所有日期，您必须将它们连接起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:30:23.057

尝试这个

```
for ($i=$date_from; $i<=$date_to; $i+=86400)
{
    $all_dates .= "'" . date("d/m/Y", $i) . "',  ";

}  
echo $all_dates; /*PRINTING ALL DATES*/ 
```

# php - 将纯文本密码登录转换为哈希

> ID：14480863
> 
> 赞同：0
> 
> 时间：2013-01-23T13:27:25.460
> 
> 标签：php, hash, login, passwords

> **可能重复：**
> [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

我正在为我的网站编写一个 PHP 脚本，它自己的网站已经启动并正在运行。我遇到的问题是网站上的注册是纯文本密码。显然，这是非常弱的安全性。我希望有人可以帮我转换它，以便我可以使用哈希密码。我已经包含了我认为重要的部分注册码。我没有在页面上包含所有代码，因为我认为它不相关，但如果有人认为它会有所帮助，我会提供。

```
require 'include.inc';
if ($signup) {

if ($signup[repassword] != $signup[password]) {
    $err_msg = "Your passwords do not match.";
error($err_msg);
}

if(!preg_match("^[_\.0-9a-z-]+$/i^", $str)) {
$msg = 'Invalid Username! Usernames can consist of letters and numbers only';
}
if(!preg_match("^[_\.0-9a-z-]+$^",$signup[password])) {
   $err_msg = "Invalid Password!  Passwords can consist of letters and numbers   only.";
}
  if(!$signup[password] || !$signup[username] || !$signup[email] || !$signup[username])
        $err_msg = "Oops! You forgot some important fields!";

  if (!$err_msg) {
$usercheck = @mysql_query("INSERT INTO user values(
    'NULL','$signup[fname]','$signup[lname]',
    '$signup[username]','$signup[password]','$signup[email]', 1, ".$pointInc.",     '$signup[referral]', NOW(), 'n', 'y')");

      // done, you are entered correctly, Now Enter the points and URL info

        $sql = "Select id from user where username='$signup[username]'";

    $result = mysql_query( $sql );
        if ( $result != false )
            {
        while ( $data = mysql_fetch_assoc( $result ) )
        {
            $point_set = $data['id'];

            }
        } else {
            echo mysql_error();
        }   
    // add rerral points

if ($signup[referral])  {
  $referralSql="UPDATE points SET points=points+ ".$refPoints . " WHERE     userid=".$signup[referral];
  $result = mysql_query( $referralSql );
                if ( $result != false )
                    {
                } else {
                    echo mysql_error();
                    }
    }                           

// add URL  

$sql="INSERT INTO url_table ( userid, website, active, datechanged) VALUES ($point_set,'".$signup[site_url]."','n', '".date("Ymd")."')";

  $result = mysql_query( $sql );
                if ( $result != false )
                    {
                } else {
                    echo mysql_error();
                }
// add points
    $sql="INSERT INTO points (userid, username, points) VALUES ($point_set,'     ',$signPoints)";
  $result = mysql_query( $sql );
                if ( $result != false )
                    {
                } else {
                    echo mysql_error();
                    }
    }
     echo mysql_errno().": ".mysql_error()."<br>";

            if (!$usercheck) {
       $err_msg = "Database error:<br>There was an error entering your account.<br>It is possible that username or Email already exists, please try another one.<br>";
         }   else {
            include ("reg.php"); 
            exit;
            }
     }
     if (!$err_msg) {
        // done, you are entered correctly

     }
   pageHeader($title, $bgColor, $styleSheet);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:36:12.400

基本原理很简单：

1\. 用户注册时，不要存储明文密码，而是`hash(password)`.

```
$query = $pdoObject->prepare('INSERT INTO users (UserName, Password) VALUES (:u, :p)');
$query->bindParam(':u', $_POST['username']);
$query->bindParam(':p', hash($_POST['password']));
// Note that we don't store the password, we store the hash of the password. Once this script is done executing, no one involved in the website (except for the original user) will know that the password is
$query->execute(); 
```

2\. 当用户尝试登录时，使用存储在用户数据库中的哈希计算输入密码的哈希。如果两个哈希值匹配，则密码正确。

```
$query = $pdoObject->prepare('SELECT * FROM users WHERE UserName = :u AND Password = :p');
$query->bindParam(':u', $_POST['username']);
$query->bindParam(':p', hash($_POST['password']));
// We locate the original user by searching for the hash of the password that they typed in 
```

理论就这么多了。您应该考虑的一些实际问题：

1.  许多教程建议使用 SHA1 的 MD5 作为哈希函数。但是，**[这些并不安全](http://www.securityfocus.com/blogs/262)**。检查[PHP 哈希库](http://php.net/hash)（尤其是`hash()`函数）以获取可用的哈希算法。
2.  您还应该考虑使用[加盐密码](http://php.net/hash)。对于每个注册用户，创建一个随机字符串（*盐*），将此字符串与用户密码连接，然后对密码和盐进行哈希处理（盐也需要保存，因为在验证用户时再次需要它）。
3.  您可以使用[PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)使您的 SQL 更加安全。这将保护您免受称为`SQL Injection`. 如果您不这样做，那么用户将能够通过输入撇号 ( `'`) 等字符来破坏您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:35:45.293

您可以使用 md5 函数为您的密码创建哈希，例如：

```
$password = '12345';
$password = md5($password); 
```

您将此哈希保存在数据库中，当您检查登录用户和密码时，您将执行此操作

```
$post['password'] = md5($post['password']); 
```

并检查是否等于保存在数据库中的哈希值。我知道 md5 不是最好的哈希，但它很简单并且具有很好的安全性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:41:24.123

用于[`crypt`](http://php.net/manual/en/function.crypt.php)散列密码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T14:35:49.473

有些意见不认为 md5 或 SHA-1 易碎，试着给它们加盐.. 搜索一下。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-23T13:37:34.050

[为http://php.net/manual/en/function.md5.php](http://php.net/manual/en/function.md5.php)使用 md5

还要查 uniqid [http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

将密码以纯文本形式存储在数据库中始终是一种不好的做法。检查另一个问题： [使用 PhP 加密存储在 MySql 中的密码的最佳做法是什么？](https://stackoverflow.com/questions/4494234/what-are-the-best-practices-to-encrypt-passwords-stored-in-mysql-using-php)

# dart - 为什么 e.currentTarget.id 显示警告？

> ID：14480867
> 
> 赞同：0
> 
> 时间：2013-01-23T13:27:47.683
> 
> 标签：dart

为什么 e.currentTarget.id 显示警告？

```
 void clickHandler(Event e){
   var label = e.currentTarget.id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:37:51.390

`e.currentTarget`必须以正确的类型进行转换才能使警告消失。

```
void clickHandler(Event e) {
  var label = (e.currentTarget as Element).id;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T21:33:47.103

currentTarget 类型为 EventTarget，其中包括 DOM 元素以外的内容，例如，Window 和 HttpRequest 也是 EventTargets。警告是因为 EventTarget 没有 id 字段或 getter。

# javascript - 用jquery淡出背景颜色

> ID：14480870
> 
> 赞同：0
> 
> 时间：2013-01-23T13:28:04.883
> 
> 标签：javascript, jquery, ajax, animation

我收到了 AJAX 帖子以获取如下最新评论：

```
function add_the_answer_to_the_list(dataString)
{
  // append this damn comment to the list
  $.ajax
  ({
    type: "POST",
    url: "home/get_answer/",
    data : dataString,
    success: function(data)
    {
      var data = jQuery.parseJSON(data);

      //append the comment
      $(
        '<li><article>'+data+ '</article></li>'
      ).hide().prependTo("#answer_list ul").fadeIn();

    }
  }); 
```

现在，当评论消失时，我应该怎么做才能用红色突出显示评论，然后慢慢地将背景颜色淡化回原始颜色？有没有办法在没有插件的情况下做这种事情？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:02:13.877

问题解决了。我使用JqueryUI核心效果：

```
$(this).effect("highlight", {}, 3000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:58:51.260

如果您不想使用 CSS3 过渡或动画，则需要一个插件。通过使用[jQuery.Color](https://github.com/jquery/jquery-color/)插件，您可以使用 jQuery 的`.animate()`方法为背景颜色设置动画。

```
$(ele).animate({backgroundColor:'rgba(0,0,0,0)'}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:30:56.927

您可以使用[CSS3 过渡](http://www.w3schools.com/css3/css3_transitions.asp)效果来做到这一点。

**例子**

要使用的 CSS3 类 - 这将允许不透明度和背景的过渡，因此它可以“淡入”并同时更改颜色：

```
.comment {
opacity: 0;
background: #ff0000;
transition: background .25s ease-in-out;
-moz-transition: background .25s ease-in-out;
-webkit-transition: background .25s ease-in-out;
transition: opacity .25s ease-in-out;
-moz-transition: opacity .25s ease-in-out;
-webkit-transition: opacity .25s ease-in-out;
}

.comment-fade-in {
 background: #00ff00 /* make this your 'original color' */
 opacity: 1.0;
} 
```

现在是javascript代码：

```
function add_the_answer_to_the_list(dataString)
{
// append this damn comment to the list
$.ajax
({
type: "POST",
url: "home/get_answer/",
data : dataString,
success: function(data)
{
  var data = jQuery.parseJSON(data);

  //append the comment
  var comment = $('<li><article>'+data+ '</article></li>');
  comment.addClass('comment');
  comment.prependTo("#answer_list ul");
  comment.addClass('comment-fade-in');
} 
```

});

试试看

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T13:46:37.683

CSS：

```
*
{   -webkit-transition: background-color .25s ease-out;
    -moz-transition: background-color .25s ease-out;
    -o-transition: background-color .25s ease-out;
    -ms-transition: background-color .25s ease-out;
    transition: background-color .25s ease-out; }

.highlight
{   background: red; } 
```

用于 ajax 回调函数的 JQuery：

```
$('<li><article>'+data+ '</article></li>')
.hide()
.prependTo("#answer_list ul")
.fadeIn(500, function() {
    $(this).addClass('highlight')
    .delay(500)
    .removeClass('highlight');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T13:55:23.123

您可以使用 jQuery UI `switchClass`。示例：http: [//jsfiddle.net/DH8jK/1/](http://jsfiddle.net/DH8jK/1/)

在您的示例中：

```
$.ajax
({
type: "POST",
url: "home/get_answer/",
data : dataString,
success: function(data)
{
  var data = jQuery.parseJSON(data);

  //append the comment
  $(
    '<li><article>'+data+ '</article></li>'
  ).hide().prependTo("#answer_list ul").fadeIn().switchClass('class-with-background', 'class-without-background', 2000);

} 
```

有关详细信息，请参阅[http://jqueryui.com/switchClass/](http://jqueryui.com/switchClass/)。

**编辑**

`removeClass`使用（http://jqueryui.com/removeClass/）更容易

```
$(
    '<li class="class-with-background"><article>'+data+ '</article></li>'
  ).hide().prependTo("#answer_list ul").fadeIn().removeClass('class-without-background', 2000); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T14:25:55.630

您可以使用仅`1.7 KB`在缩小时才使用的 jquery 颜色插件

我创建了一个小提琴[http://jsfiddle.net/vKaYJ/](http://jsfiddle.net/vKaYJ/)

# httpie - 使用 HTTPie 时如何打印请求？

> ID：14480874
> 
> 赞同：34
> 
> 时间：2013-01-23T13:28:11.957
> 
> 标签：httpie

除了响应之外，是否可以使用 HTTPie 在输出请求（标头和正文）时打印？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-23T13:31:08.227

> `--verbose`,`-v`打印整个 HTTP 交换（请求和响应）。

如果需要，您可以独立打印请求标头、请求正文、响应标头和响应正文的任意组合。看`--print`

[https://github.com/jkbr/httpie#output-options](https://github.com/jkbr/httpie#output-options)

# jquery - jquery中的垂直手风琴功能命名问题

> ID：14480875
> 
> 赞同：0
> 
> 时间：2013-01-23T13:28:12.977
> 
> 标签：jquery, jquery-ui, accordion, jquery-ui-accordion

我在我的网站上使用了两个手风琴。一个是 JqueryUI，另一个在这里：

[http://www.adipalaz.com/experiments/jquery/nested_accordion.html](http://www.adipalaz.com/experiments/jquery/nested_accordion.html)

现在的问题是他们都使用 .accordion 来初始化手风琴。在这种情况下，只有一个可以工作。

有什么办法可以解决这个函数命名问题吗？

要初始化 Jquery-UI，我正在使用这个：

```
$( ".jquery-ui-accordion" ).accordion(); 
```

要初始化另一个（嵌套手风琴），我正在使用这个：

```
$("html").addClass("js");
$.fn.accordion.defaults.container = false; 
$(function() {
  $("#acc3").accordion({initShow : "#current"});
  $("#acc1").accordion({
      el: ".h", 
      head: "h4, h5", 
      next: "div", 
      initShow : "div.outer:eq(1)"
  });
  $("#acc2").accordion({
      obj: "div", 
      wrapper: "div", 
      el: ".h", 
      head: "h4, h5", 
      next: "div", 
      showMethod: "slideFadeDown",
      hideMethod: "slideFadeUp",
      initShow : "div.shown",
      elToWrap: "sup, img"
    });
  $("html").removeClass("js");
});

}); 
```

请注意他们都在使用`.accordion()`函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:47:35.760

将此代码放在 jQuery UIs javascript include 之后和其他手风琴 javascript include 之前：

```
jQuery.fn.myCustomAccordion = jQuery.fn.accordion;
delete $.fn.accordion; 
```

然后你可以使用两个手风琴，例如：

```
// jQuery accordion
$( ".jquery-ui-accordion" ).myCustomAccordion(); 

// "Other accordion"
$("#acc3").accordion({initShow : "#current"});
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:32:44.490

如果它们都被命名`.accordion`，则说明 CSS 类名被用作选择器，对吗？所以我建议`id`在每个类名旁边使用唯一的来区分两者`.accordion`。但是如果没有代码示例，就很难提供进一步的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:36:29.667

如果您指的是函数名称，您可以简单地卷起袖子，在其中一个源代码文件中重命名函数。

或者你*不能*使用两个做同样事情的插件......

更新：我对你现在想要做什么有了更好的了解。我已经将 jquery.collapsible-menus.js 用于完全相同的事情。它使用列表而不是 div，但它很容易上手。

[http://tommcfarlin.com/collapsible-menus-for-jquery-1-1/](http://tommcfarlin.com/collapsible-menus-for-jquery-1-1/)

# matlab - 将 find 与结构一起使用

> ID：14480876
> 
> 赞同：29
> 
> 时间：2013-01-23T13:28:15.093
> 
> 标签：matlab, struct, find

我有一个包含数千个数据样本的结构。每个数据点包含多个对象。例如：

```
Structure(1).a = 7
Structure(1).b = 3
Structure(2).a = 2
Structure(2).b = 6
Structure(3).a = 1
Structure(3).b = 6
...
... (thousands more)
...
Structure(2345).a = 4
Structure(2345).b = 9 
```

... 等等。

如果我想找到包含数字 6 的所有 '.b' 对象的索引号，我会期望以下函数可以解决问题：

```
find(Structure.b == 6) 
```

...我希望答案包含“2”和“3”（对于上面显示的输入）。

但是，这不起作用。什么是正确的语法和/或我可以首先以更合乎逻辑的方式排列我的数据？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-23T13:31:45.280

结构数组的语法`Structure.b`为您提供了一个[逗号分隔的 list](http://www.mathworks.com/help/matlab/matlab_prog/comma-separated-lists.html?s_tid=doc_12b)，因此您必须将它们全部连接起来（例如，使用括号`[]`）以获得向量：

```
find([Structure.b] == 6) 
```

对于上面显示的输入，结果如预期：

```
ans =
     2     3 
```

正如 Jonas 所指出的，这仅在没有包含空矩阵的字段时才有效，因为空矩阵不会反映在连接结果中。

### 处理具有空字段的结构

如果您怀疑这些字段可能包含空矩阵，请将它们转换为`NaN`s（如果可能...）或考虑使用 Rody 建议的更安全的解决方案之一。

此外，我想到了另一种使用字符串的有趣解决方法。我们可以将所有内容连接成一个分隔字符串以保留有关空字段的信息，然后将其标记化（在我看来，这在 MATLAB 中比处理存储在单元格中的数值更容易完成）。

受 Jonas 评论的启发，我们可以将空字段转换为`NaN`s，如下所示：

```
str = sprintf('%f,', Structure.b)
B = textscan(str, '%f', 'delimiter', ',', 'EmptyValue', NaN) 
```

这允许您申请`find`以下内容`B`：

```
find(B{:} == 6)

ans =
     2
     3 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-23T13:49:44.280

基于 EitanT 对 Jonas 评论的回答，一种更安全的方法可能是

```
>> S(1).a = 7;
   S(1).b = 3;
   S(2).a = 2;
   S(2).b = 6;
   S(3).a = 1;
   S(3).b = [];
   S(4).a = 1;
   S(4).b = 6;

>> find( cellfun(@(x)isequal(x,6),{S.b}) )
ans =
     2     4 
```

虽然它可能不是很快（与 EitanT 的版本相比），所以只在需要时使用它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-23T16:32:04.637

这个问题的另一个答案！这次，我们将比较以下 4 种方法的性能：

1.  我原来的方法
2.  EitanT 的原始方法（不处理 emtpies）
3.  EitanT 使用字符串的改进方法
4.  一种新方法：一个简单的 for 循环
5.  另一种新方法：矢量化、空安全版本

测试代码：

```
% Set up test
N = 1e5;

S(N).b = [];
for ii = 1:N
    S(ii).b = randi(6); end

% Rody Oldenhuis 1
tic
sol1 = find( cellfun(@(x)isequal(x,6),{S.b}) );
toc

% EitanT 1
tic
sol2 = find([S.b] == 6);
toc

% EitanT 2
tic
str = sprintf('%f,', S.b);
values = textscan(str, '%f', 'delimiter', ',', 'EmptyValue', NaN);
sol3 = find(values{:} == 6);
toc

% Rody Oldenhuis 2
tic
ids = false(N,1);
for ii = 1:N
    ids(ii) = isequal(S(ii).b, 6);
end
sol4 = find(ids);
toc

% Rody Oldenhuis 3
tic
idx = false(size(S));
SS = {S.b};
inds = ~cellfun('isempty', SS);
idx(inds) = [SS{inds}]==6;
sol5 = find(idx);
toc

% make sure they are all equal
all(sol1(:)==sol2(:))
all(sol1(:)==sol3(:))
all(sol1(:)==sol4(:))
all(sol1(:)==sol5(:)) 
```

我的机器上的工作结果（AMD A6-3650 APU（4 核），4GB RAM，Windows 7 64 位）：

```
Elapsed time is 28.990076 seconds. % Rody Oldenhuis 1 (cellfun)
Elapsed time is 0.119165 seconds.  % EitanT 1 (no empties)
Elapsed time is 22.430720 seconds. % EitanT 2 (string manipulation)
Elapsed time is 0.706631 seconds.  % Rody Oldenhuis 2 (loop)
Elapsed time is 0.207165 seconds.  % Rody Oldenhuis 3 (vectorized)

ans =
     1
ans =
     1
ans =
     1
ans =
     1 
```

在我的 Homebox（AMD Phenom(tm) II X6 1100T（6 核），16GB RAM，Ubuntu64 12.10）上：

```
Elapsed time is 0.572098 seconds.  % cellfun
Elapsed time is 0.119557 seconds.  % no emtpties
Elapsed time is 0.220903 seconds.  % string manipulation
Elapsed time is 0.107345 seconds.  % loop
Elapsed time is 0.180842 seconds.  % cellfun-with-string 
```

一定会喜欢那个 JIT :)

哇……有人知道为什么这两个系统的行为如此不同吗？

此外，鲜为人知的事实 -[`cellfun`使用可能的字符串参数之一非常快](http://undocumentedmatlab.com/blog/cellfun-undocumented-performance-boost/)（这表明匿名函数需要多少开销......）。

不过，如果您可以绝对确定没有空，请选择 EitanT 的原始答案；这就是 Matlab 的用途。如果你不能确定，就去循环。

# postgresql - 在 glassfish 服务器管理控制台中为 postgresql 供应商创建连接池时连接被拒绝

> ID：14480890
> 
> 赞同：0
> 
> 时间：2013-01-23T13:29:15.397
> 
> 标签：postgresql, jdbc, glassfish, connection-pooling

我正在尝试在 Glassfish 服务器中创建一个到 PostgreSQL 数据库的连接池。我所做的步骤如下：

1.  我在完整路径中复制了 postgresql jdbc jar 的 jar `C:\Program Files\glassfish-3.1.1\glassfish\domains\domain1\lib\ext`

2.  我在 glassfish 服务器管理控制台中指定了 jar 的完整路径：

    **池名称：** post-gre-sql_CommonPush_postgresPool

    **资源类型：** javax.sql.XADataSource

    **数据源类名：** org.postgresql.ds.PGSimpleDataSource

如果有其他属性，我已指定为：

```
driverClass:org.postgresql.Driver

URL: jdbc:postgresql://10.137.243.1:5432/CommonPush
portNumber: 5432
databaseName: CommonPush
serverName: 10.137.243.1(My system's IP)
user: postgres
password: 
```

当我 ping 上述设置时，我收到以下错误：

> 发生了错误
> 
> post-gre-sql_CommonPush_postgresPool 的 Ping 连接池失败。Ping 失败异常 - 无法分配连接，因为：连接被拒绝。检查主机名和端口是否正确以及 postmaster 是否接受 TCP/IP 连接。请检查 server.log 以获取更多详细信息。
> 
> Ping 失败异常 - 无法分配连接，因为：连接被拒绝。检查主机名和端口是否正确以及 postmaster 是否接受 TCP/IP 连接。请检查 server.log 以获取更多详细信息。

我无法弄清楚这个问题，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:43:54.997

您应该使用资源类型`javax.sql.DataSource`。我不确定这是否会导致错误，您也可以尝试将主机名更改为 localhost。

您可以通过 pgAdmin 或 psql 命令访问 PostgreSQL 数据库吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-26T05:30:06.013

原因可能是用户可能对 db 对象没有足够的权限。
向用户授予所需的权限，例如：

```
###GRANT USAGE ON service_schema TO admin
sudo -u postgres psql -p 5432 -d service_db -c "GRANT USAGE ON SCHEMA "service_schema" TO "admin";"
###GRANT PREVILEGES ON TABLES OF service_schema TO admin
sudo -u postgres psql -p 5432 -d service_db -c "GRANT ALL ON TABLES IN SCHEMA "service_schema" TO "admin";"
###GRANT PREVILEGES ON SEQUENCES OF service_schema TO admin
sudo -u postgres psql -p 5432 -d service_db -c "GRANT ALL ON SEQUENCES IN SCHEMA "service_schema" TO "admin";"
###GRANT PREVILEGES ON FUNCTIONS OF service_schema TO admin
sudo -u postgres psql -p 5432 -d service_db -c "GRANT ALL ON FUNCTIONS IN SCHEMA "service_schema" TO "admin";" 
```

# linq - Linq PredicateBuilder，分组和运算符优先级

> ID：14480898
> 
> 赞同：1
> 
> 时间：2013-01-23T13:29:39.123
> 
> 标签：linq, grouping, operator-precedence, predicatebuilder

这是问题的一个例子：

```
 var source = new LambdasTestEntity[] { 
        new LambdasTestEntity {Id = 1},
        new LambdasTestEntity {Id = 2},          
        new LambdasTestEntity {Id = 3},
        new LambdasTestEntity {Id = 4},          
    };

    Expression<Func<LambdasTestEntity, bool>> expression1 = x => x.Id == 1;
    Expression<Func<LambdasTestEntity, bool>> expression2 = x => x.Id == 3;
    Expression<Func<LambdasTestEntity, bool>> expression3 = x => x.Id > 2;

    // try to chain them together in a following rule
    // Id == 1 || Id == 3 && Id > 2
    // as && has higher precedence, we expect getting two entities
    // with Id=1 and Id=3 

    // see how default LINQ works first
    Expression<Func<LambdasTestEntity, bool>> expressionFull = x => x.Id == 1 || x.Id == 3 && x.Id > 2;

    var filteredDefault = source.AsQueryable<LambdasTestEntity>()
              .Where(expressionFull).ToList();

    Assert.AreEqual(2, filteredDefault.Count); // <-this passes

    // now create a chain with predicate builder
    var totalLambda = expression1.Or(expression2).And(expression3);

    var filteredChained = source.AsQueryable<LambdasTestEntity>()
              .Where(totalLambda).ToList();

    Assert.AreEqual(2, filteredChained.Count);
    // <- this fails, because PredicateBuilder has regrouped the first expression,
    // so it now looks like this: (Id == 1 || Id == 3) && Id > 2 
```

当我在 Watches 中查找这两个表达式时，我看到以下内容：

```
expressionFull as it is coming from Linq:
(x.Id == 1) OrElse ((x.Id == 3) AndAlso (x.Id > 2))

totalLambda for PredicateBuilder:
((x.Id == 1) OrElse Invoke(x => (x.Id == 3), x)) AndAlso Invoke(x => (x.Id > 2), x) 
```

如果 PredicateBuilder 的行为与默认的 Linq Expression 构建器不同，我发现使用它有点不安全。

现在有几个问题：

1) Linq 为什么要创建这些组？即使我创建一个 Or 表达式

```
x => x.Id == 1 || x.Id == 3 || x.Id > 2 
```

我仍然得到像这样分组的前两个标准：

```
((x.Id == 1) OrElse (x.Id == 3)) OrElse (x.Id > 2) 
```

为什么不只是

```
(x.Id == 1) OrElse (x.Id == 3) OrElse (x.Id > 2) 
```

?

2) 为什么 PredicateBuilder 添加这些调用？我在默认的 Linq 表达式结果中看不到 Invokes，所以它们似乎没用......

3）有没有其他方法来构造表达式“离线”，然后传递给默认的 Linq 表达式构建器？像这样的东西：

```
ex = x => x.Id == 1;
ex = ex || x.Id == 3;
ex = ex && x.Id > 2; 
```

然后 Linq Expression builder 解析它并创建与 x => x.Id == 1 || 相同的表达式 x.Id == 3 && x.Id > 2 （给予 && 更高的优先级）？或者也许我可以调整 PredicateBuilder 来做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T16:54:26.883

扩展我上面的评论：

> 因为这里没有运算符优先级的概念。您实际上是在自己构建表达式树，并将一种方法的结果“管道”到下一种方法确定顺序。因此，结果表达式的顺序将与您指定的完全一致。

完整的源代码`PredicateBuilder`发布[在这里](http://www.albahari.com/nutshell/predicatebuilder.aspx)，并显示它是多么简单。但它也向您展示了上述问题的根源。如果您不想访问 Albahari 的网站，这里是完整的来源：

```
public static Expression<Func<T, bool>> Or<T> (this Expression<Func<T, bool>> expr1,
                                                 Expression<Func<T, bool>> expr2)
{
    var invokedExpr = Expression.Invoke (expr2, expr1.Parameters.Cast<Expression> ());
    return Expression.Lambda<Func<T, bool>>
         (Expression.OrElse (expr1.Body, invokedExpr), expr1.Parameters);
}

public static Expression<Func<T, bool>> And<T> (this Expression<Func<T, bool>> expr1,
                                                  Expression<Func<T, bool>> expr2)
{
    var invokedExpr = Expression.Invoke (expr2, expr1.Parameters.Cast<Expression> ());
    return Expression.Lambda<Func<T, bool>>
         (Expression.AndAlso (expr1.Body, invokedExpr), expr1.Parameters);
} 
```

这里要注意的主要事情是它一次构建一个节点的表达式，然后将该节点作为后续节点的左表达式（叶）进行管道传输。该`Expression.Invoke`调用只是将现有节点中的参数通过管道传输到右叶（下一个表达式），其余部分非常自我解释。

编辑：我不得不做类似的事情（但没有使用 PredicateBuilder，我自己使用`Expression`调用构建了树）。要记住的主要事情是，您只需`And/AndAlso`要先处理节点，然后再处理`Or/OrElse`节点，这样您就可以以适当的优先级构建树。不幸的是，`ExpressionTrees`手工构建是一个循序渐进的过程，因此您必须确保将每个步骤分解为正确的顺序以获得您想要/需要的结果。

# objective-c - UICollectionView NSFetchedResultsController 创建部分并将项目移动到其中

> ID：14480900
> 
> 赞同：1
> 
> 时间：2013-01-23T13:29:46.780
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller, uicollectionview

我正在使用带有核心数据和 NSFetchedResultsController 的 UICollectionView。

选择一个单元格后，我想将其移动到集合视图顶部的不同部分。问题是该部分可能尚未添加。在将单元格移动到新部分之前，我基本上需要在选择单元格时添加一个新部分。

见下文 -

![在此处输入图像描述](../Images/fd249d90ce19c97422bfe2b6c8e0fbae.png)

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:37:06.840

看起来好像您以错误的方式处理此问题。如果我是你，我会尝试删除该对象，然后使用正确的部分键重新插入它。

因此，如果您的 NSManagedObject 的 section-key 为 1，则您需要在删除对象时在本地存储对象值。然后您可以使用存储的值创建一个新记录并将 section-key 更新为 0。

这应该删除旧单元格并在新部分中插入一个新单元格。

见下文 -

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *obj = [_fetchedResultsController objectAtIndexPath:indexPath];

    NSString *name = obj.name;

    [self.managedObjectContext deleteObject:task];

    NSError *error = nil;
    [self.managedObjectContext save:&error];

    NSManagedObject *newObj = [NSEntityDescription insertNewObjectForEntityForName:@"entityName" inManagedObjectContext:self.managedObjectContext];

    [newObj setValue:name forKey:@"name"];

    [self.managedObjectContext newObj];

    error = nil;
    [self.managedObjectContext save:&error];
} 
```

# iphone - 为什么从缓存加载图像时图像方向会发生变化？

> ID：14480905
> 
> 赞同：1
> 
> 时间：2013-01-23T13:29:51.153
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我正在从图像缓存中加载图像。`

```
if(![[ImageCache sharedImageCache] hasImageWithKey:imagepath])

                {   cell.bannerview2.image = [UIImage imageNamed:@"no_imags.png"];
                    NSArray *myArray = [NSArray arrayWithObjects:cell.bannerview2,imagepath,@"no_imags.png",[NSNumber numberWithBool:NO],nil];
                    AppDelegate *appDelegate = (AppDelegate  *)[[UIApplication sharedApplication] delegate];
                    [appDelegate performSelectorInBackground:@selector(updateImageViewInBackground:) withObject:myArray];   

                }
                else 
                {
                    cell.bannerview2.image = [[ImageCache sharedImageCache] getImagefromCacheOrUrl:imagepath];
                 }
            }
            else
            {
                cell.bannerview2.image = [UIImage imageNamed:@"no_imags.png"];  

            } 
```

这就是我执行图像缓存过程的方式。但问题是当图像大于所需帧时，图像方向正在改变。这是我在 appdelegate 中的图像更新代码

```
-(void)updateImageViewInBackground:(NSArray *)idsArray{
    //NSLog(@"IN METHOD idsArray %@",idsArray);
    NSString *iconurl = (NSString *)[idsArray objectAtIndex:1];

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    if([[ImageCache sharedImageCache] hasImageWithKey:iconurl]){
        [self performSelectorOnMainThread:@selector(updateImageViewInForeground:) withObject:idsArray waitUntilDone:NO];
        [pool release];
        return;
    }
    if([iconurl length] > 0){
        [[ImageCache sharedImageCache] saveImageToCacheOfUrl:iconurl];
    }
    [self performSelectorOnMainThread:@selector(updateImageViewInForeground:) withObject:idsArray waitUntilDone:NO];
    [pool release];
}
-(void)updateImageViewInForeground:(NSArray *)idsArray{

    UIImageView *weatherView = (UIImageView *)[idsArray objectAtIndex:0];
    NSString *iconurl = (NSString *)[idsArray objectAtIndex:1];
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    weatherView.image = [[ImageCache sharedImageCache] getImagefromCacheOrUrl:iconurl];
    if(weatherView.image == nil){
        NSString *defaultname = (NSString *)[idsArray objectAtIndex:2];
        weatherView.image = [UIImage imageNamed: defaultname];
    }
    BOOL resizeImgView = [(NSNumber *)[idsArray objectAtIndex:3] boolValue];
    if(resizeImgView){
        //NSLog(@"resizeImgView %@ %@",iconurl,weatherView);
        weatherView.frame = CGRectMake(weatherView.frame.origin.x, weatherView.frame.origin.y, weatherView.image.size.width, weatherView.image.size.height);

    }
    [pool release];
} 
```

有谁能够帮我？

# c# - 使用 EWS 更新约会

> ID：14480909
> 
> 赞同：0
> 
> 时间：2013-01-23T13:30:13.940
> 
> 标签：c#, exchange-server, exchangewebservices

我正在创建一个将 CSV 文件放入 Exchange 的应用程序，该应用程序运行良好。

但是，当时间表更改并且我的应用程序运行时，它将插入双日历项。

我有两种可能的解决方案：

1.  删除所有包含特定正文的日历项目
2.  更新已经进行的约会

您更喜欢哪个选项以及如何完成？在每种情况下，我都需要`itemID`一个特定的约会，我不知道如何得到这个`itemID`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:26:20.293

我做了以下事情：

```
CalendarView calendarView = new CalendarView(dtStart, dtEnd);
var Appointments = service.FindAppointments(WellKnownFolderName.Calendar, calendarView);

foreach (Appointment app in items)
{
    if (app.Body.Text.Trim() == "Timetable")
    {
        app.Delete(DeleteMode.HardDelete);
    }
} 
```

完美运行，可能有点慢，但在我的情况下并不重要:-)

# jquery - 创建一个数组并循环显示每个在 HTML

> ID：14480911
> 
> 赞同：1
> 
> 时间：2013-01-23T13:30:15.190
> 
> 标签：jquery, html, css, arrays, loops

id 喜欢创建一个数组存储：

```
document title
document summary
document link 
```

然后遍历每个条目，在 html 中显示每个条目。

到目前为止，我得到了我的数组..：

```
var docs = [
{
    doc-title: "onesider number 1",
    doc-info:    "its onesider number 1",
    doc-src: "link here"
},

{
    doc-title: "Onesider number 2",
    doc-info:    "its onesider number 2",
    doc-src: "link here"
}

]; 
```

但在此之后我不知道如何循环和显示每个。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:38:27.670

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:47:33.013

用于`$.each`循环所有项目。

文档：[http ://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

```
$.each(docs, function(index, obj){
    $.each(obj, function(key, value){
        alert(key+'=='+value); //manipulate the items here
    })  
}) 
```

演示：http: [//jsfiddle.net/WypxX/1/](http://jsfiddle.net/WypxX/1/)

# xtext - 如何使用重命名重构作为快速修复的一部分？

> ID：14480917
> 
> 赞同：2
> 
> 时间：2013-01-23T13:30:32.400
> 
> 标签：xtext

我在我的 DSL 中添加了一个 quickfix 选项，我想在其中对文档文本进行一些修改 - 包括重命名某些元素。我可以很好地更改该元素中的文本，但我还想重命名它的所有引用 - 即重命名重构。我怎么做？

我可以以某种方式从 quickfix 内部触发内置的重命名重构吗？或者，我如何查看所有元素的引用并更改它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:10:50.430

因此，我找到了一种以编程方式触发重命名重构的方法。我不知道这是否是“正确”的方式 - 我想不是，因为我必须添加`@SuppressWarnings("restriction")`到我的代码中 - 但它有效：

```
private void performDirectRenameRefactoring(EObject object, String newName) throws InterruptedException {
    XtextEditor editor = EditorUtils.getActiveXtextEditor();
    IRenameElementContext renameContext = new IRenameElementContext.Impl(
        EcoreUtil.getURI(object),
        object.eClass(),
        editor,
        editor.getSelectionProvider().getSelection(),
        null);
    IRenameSupport rename = renameSupportFactory.create(renameContext, newName);
    rename.startDirectRefactoring();
} 
```

因此，要从快速修复中调用它，您需要做的就是获取`EObject`并计算新名称。如果问题占据了`EObject`自身的一部分，则可以通过以下方式检索对象：

```
private EObject findObject(IXtextDocument doc, final Issue issue) {
    EObject object = doc.readOnly(new IUnitOfWork<EObject, XtextResource>() {
        public EObject exec(XtextResource state) throws Exception {
            return state.getEObject(issue.getUriToProblem().fragment());
        }
    });
} 
```

您可以`IXtextDocument`从任一`IssueResolutionAcceptor`（如果您正在处理问题`IModificationContext`，您应该拥有）或从（如果您提出更改，您应该拥有）获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T08:58:30.647

橡树，非常感谢您的解决方案。这是我在 Xtend 中的版本。

```
@Inject(optional=true)
IRenameSupport.Factory renameSupportFactory;

@Inject(optional=true)
IRenameContextFactory renameContextFactory;

@Fix(VhdlValidator::INVALID_SIGNAL_NAME_ENDING)
def addSignalEnding(Issue issue, IssueResolutionAcceptor acceptor) {
    acceptor.accept(issue, 'Add the "_s" ending', 'Add the "_s" ending.', 'upcase.png') [
        EObject element, IModificationContext context |

        val editor = EditorUtils.getActiveXtextEditor();

        val renameElementContext = editor.getDocument().readOnly(
            new IUnitOfWork<IRenameElementContext, XtextResource>() 
            {
                override def IRenameElementContext exec(XtextResource state) 
                {
                    renameContextFactory.createRenameElementContext(element,
                            editor, null, state);
                }
            });

        val rename = renameSupportFactory.create(renameElementContext, (element as Signal).name + "_s" );
        rename.startDirectRefactoring();

    ]
} 
```

# jquery - 如何检查附加html中的第一个输入

> ID：14480918
> 
> 赞同：0
> 
> 时间：2013-01-23T13:30:37.323
> 
> 标签：jquery

我想在附加模板后选择第一个输入（**类是时间**）。

这个怎么做？

```
$.get('@Url.Action("Bonus")', function (template) {
                $("#bonuses").append(template);
                // I would like focused first input in template $(template).first().focus();
            }); 
```

模板中的html：

```
<input autocomplete="off" name="BonusList.Bonuses.Index" type="hidden" value="3c6f7b63-cc96-4971-a5b5-2e4640ca97e5" />
<input class="time" id="BonusList_Bonuses_3c6f7b63-cc96-4971-a5b5-2e4640ca97e5__ID" name="BonusList.Bonuses[3c6f7b63-cc96-4971-a5b5-2e4640ca97e5].ID" type="hidden" value="0" /> 
```

3c6f7b63-cc96-4971-a5b5-2e4640ca97e5 - 是随机 GUID

**重要的是**#bonuses 在此附加之前有很多输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:34:54.470

您可以使用以下代码段

```
$(template).find('input:first').focus(); 
```

如果您的第一个输入不是文本类型，并且您只需要关注第一个文本类型输入，请改用下面的代码

```
$(template).find('input[type=text]:first').focus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:01:35.943

您不能更改输入的类型，因此，可以使用 CSS 类（在您的模板中）隐藏它，然后您可以显示它。（参考：[使用 jQuery 更改输入字段的类型](https://stackoverflow.com/questions/1544317/jquery-change-type-of-input-field)）

```
<input autocomplete="off" name="BonusList.Bonuses.Index" type="text" class="iamhidden" value="3c6f7b63-cc96-4971-a5b5-2e4640ca97e5" /><input id="BonusList_Bonuses_3c6f7b63-cc96-4971-a5b5-2e4640ca97e5__ID" name="BonusList.Bonuses[3c6f7b63-cc96-4971-a5b5-2e4640ca97e5].ID" type="text" class="iamhidden" value="0" /> 
```

CSS：

```
.iamhidden{display:none;} 
```

和选择器：找到两个输入中的第一个，假设它们是附加的最后两个，删除隐藏类，然后聚焦它（最后一个的下一个）：

```
$('#bonuses').find('input:last').prev().removeClass("iamhidden").focus(); 
```

我放了一个非常简化的小提琴来展示这个逻辑工作：http: [//jsfiddle.net/seAxW/](http://jsfiddle.net/seAxW/)

编辑：为了反映您的评论，请关注“时间”类（您仍然需要 CSS 并键入文本）

```
$('#bonuses').find('input.time:last').removeClass("iamhidden").focus(); 
```

添加了隐藏类：只需在“时间”和“iamhidden”类之间放置一个空格，您就可以

```
<input autocomplete="off" name="BonusList.Bonuses.Index" type="hidden" value="3c6f7b63-cc96-4971-a5b5-2e4640ca97e5" />
<input class="time iamhidden" id="BonusList_Bonuses_3c6f7b63-cc96-4971-a5b5-2e4640ca97e5__ID" name="BonusList.Bonuses[3c6f7b63-cc96-4971-a5b5-2e4640ca97e5].ID" type="text" value="0" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T13:34:01.843

你试过这个吗？

```
$.get('@Url.Action("Bonus")', function (template) {
    $("#bonuses").append(template);
    $("#bonuses").find('input:first').focus();
}); 
```

# angularjs - Angularjs资源状态说明

> ID：14480925
> 
> 赞同：1
> 
> 时间：2013-01-23T13:30:57.497
> 
> 标签：angularjs

我遇到了 angularjs 应用程序与 REST API 通信的问题。问题是 api 返回一个状态码，还添加了一个状态描述，如 HTTP/1.1 417 Invalid quantity。使用 jquery ajax，jqXHR 对象有一个 statusText 属性，但是使用 angularjs，我似乎无法找到如何在我的错误处理程序中访问它。不用说我不能修改 API，例如 417 状态代码可以返回不同的状态描述。我发现我需要更改 angularjs 库，但如果需要更新，这将不方便。我必须将 xhr.responseText 更改为 xhr.statusText。我可以从我的代码中以某种方式覆盖这个函数并且不修改角度库吗？

```
xhr.onreadystatechange = function() {
    if (xhr.readyState == 4) {
      completeRequest(
          callback, status || xhr.status, xhr.responseText, xhr.getAllResponseHeaders());
    }
  }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-12T05:49:17.620

这是获取 StatusText 的解决方法（正如所指出的，某些移动浏览器会从成功的响应中删除 DATA：[https ://stackoverflow.com/a/28470163/1586498](https://stackoverflow.com/a/28470163/1586498)

我还发现 Angular 中 $http 上的 .success 和 .error 没有通过 StatusText，你必须使用 .then(response)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T11:03:17.487

[AngularJS 1.2.16](https://github.com/angular/angular.js/blob/v1.2.x/CHANGELOG.md)添加了对 statusText 的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:25:05.333

您需要在模块配置期间按照[此处所述创建一个 httpInterceptor。](http://docs.angularjs.org/api/ng.%24http)

```
// register the interceptor as a service
$provide.factory('myHttpInterceptor', function($q) {
  return function(promise) {
    return promise.then(function(response) {

      // do something on success

    }, function(response) {

      //do something for your 417 error
      if(response.status == 417) {
        alert("We've got a 417!");
        return $q.reject(response);
      }

      //some other error
      return $q.reject(response);
    });
  }
});

$httpProvider.responseInterceptors.push('myHttpInterceptor'); 
```

# java - 如果语句不成立，但它应该

> ID：14480928
> 
> 赞同：-2
> 
> 时间：2013-01-23T13:31:00.443
> 
> 标签：java, android

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

`if`我不明白为什么sendMessage中的第一个（其他相同）永远不会成真。接收者字符串正是它应该是真实的？！

当我运行它并按**发送给 Alice**时，我得到 3 个 Toast：

1.  发送给 Alice（=接收者的值）
2.  *[空白吐司]*（= phoneNumber 的值）
3.  您必须选择一条消息（=没关系！）

    ```
    public void onSend(View src){
    Button b = (Button)src;

    sendMessage(b.getText().toString());

    }

    public void sendMessage(String reciever){

    String phoneNumber = "";
    Toast.makeText(this, reciever, Toast.LENGTH_LONG).show();

    if (reciever == "Send to Alice"){
        phoneNumber = "01230340645";
        Toast.makeText(this, "hej", Toast.LENGTH_LONG).show();
    }

    else if (reciever == "Send to Bob"){
        phoneNumber = "020312039";
    }

    else if (reciever == "Send to John"){
        phoneNumber = "0102308013";
    }

    Toast.makeText(this, phoneNumber, Toast.LENGTH_LONG).show();

    if (_message == ""){
        Toast.makeText(this, "You have to choose a message!", Toast.LENGTH_LONG).show();
    } else {
        Intent sms = new Intent(Intent.ACTION_SENDTO, Uri.parse("sms:" + phoneNumber));
        sms.putExtra("sms_body", _message);
        startActivity(sms);
        _message = "";
    }

     } 
    ```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T13:32:24.560

不要`==`用于比较 Java 中的字符串。使用等号方法。

```
if (reciever.equals("Send to Alice"))... 
```

运算符比较引用是否相等，而`==`不是那些引用指向的对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T13:33:35.150

试试这个....

**从：**

```
if (reciever == "Send to Alice") 
```

**到：**

```
if (receiver.equals("Send to Alice")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T13:42:26.890

```
if (receiver.equals("Send to Alice")) 
```

如果要检查“发送给 Alice”是否区分大小写，并且

```
if (receiver.equalsIgnoreCase("Send to Alice")) 
```

如果要在不区分大小写的情况下检查“Send to Alice”，并且

因为`==`将只检查整数（相似）并且`.equals`应该使用字符串

# cluster-analysis - 有人可以给我一些在 k-means 中使用不同距离度量的例子吗？

> ID：14480929
> 
> 赞同：0
> 
> 时间：2013-01-23T13:31:01.513
> 
> 标签：cluster-analysis, distance, data-mining, k-means, metric

因此，我正在考虑对 k 均值使用不同的距离度量，例如欧几里德距离、曼哈顿距离、余弦距离、切比雪夫距离等。我只想知道这些与聚类相关的距离度量的用例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T17:44:07.247

简短的回答是：

你**不应该**。

K-means 实际上不是基于距离的。

它基于方差最小化。并且通过将每个对象分配给接近平方欧几里得距离的对象来最小化方差（因为平方欧几里得本质上与方差相同！）。而且由于 sqrt 函数是单调的，您也可以将其视为通过最近的欧几里得距离进行赋值。

现在，如果您插入任意其他距离函数，它将不再最小化方差，并且 k-means 可能会停止收敛。

请注意，k-means 的另一个步骤是更新均值。再次为了最小化方差，将聚类中心移动到均值是最佳的。如果你插入另一个距离函数，这可能不再成立。繁荣。

但是，也有例外。显然，对于某些距离函数，均值也很有效。所以它实际上也会收敛。

此外，还存在 K-medoids 等变体。这实际上是为了最小化距离而设计的，并且适用于任意距离。它不需要均值：相反，它使用数据集中最核心的对象。这使您可以在任意距离上恢复收敛！

**更新**：这是其他距离测量可能会失败的示例。

假设我们使用绝对皮尔逊相关来测量相似度。以下两个系列完全负相关，即绝对 pearson 中的距离为 0：

```
+1 +2 +3 +4 +5
-1 -2 -3 -4 -5 
```

如果我们计算这些实例的*均值*，均值是`0 0 0 0 0`，而皮尔逊相似度是 A) 不再定义良好，因为标准差已变为 0；即使我们会修复这个定义差距，平均值也将是与此度量**相关的最不相似的向量。**

因此，**仅**当您可以证明**均值函数**最小化您的距离时，才使用具有其他距离的 k-means。作为练习，您可能想要证明均值*确实*使平方欧几里得距离最小化。

# asp.net-mvc-3 - 为什么 Telerik 上传时上传的文件大小总是显示为空？

> ID：14480933
> 
> 赞同：0
> 
> 时间：2013-01-23T13:31:07.620
> 
> 标签：asp.net-mvc-3, file-upload, razor, telerik

我使用 Telerik 控件上传文件。

```
@(Html.Telerik().Upload().Name("attachments").Multiple(true)
.ShowFileList(false).Multiple(true).ClientEvents(events => events.OnSuccess("onSuccesfulFileUpload")                                                    .OnUpload("validateUpload")).Async(async => async.Save("Save", "Home").Remove("Remove", "Home")
.AutoUpload(true))) 
```

javascript:

```
function validateUpload(e)
{
alert(e.files[0].size);
} 
```

但是大小是空的。我读到文件大小并非在所有浏览器中都可用。

请提供一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:32:23.733

> 我读到文件大小并非在所有浏览器中都可用。

是的，你没看错。这仅适用于支持 HTML5 File API 的浏览器。例如，这在 Internet Explorer 9 或更早版本中不起作用。

# ios - 可能有多个 iOS 开发者帐户？相同的公司 = 相同的 DUNS

> ID：14480936
> 
> 赞同：4
> 
> 时间：2013-01-23T13:31:17.240
> 
> 标签：ios, app-store-connect

公司的 iOS 标准开发者帐户需要一个 DUNS 进行识别。如果：

1.  已存在具有该 DUNS 的企业帐户？申请具有相同 DUNS 的 Standard Developer 帐户时，验证表明 DUNS 已在使用中。

2.  一个 DUNS 是否可以有多个 Standard Developer 帐户？在某些情况下，对于一家大公司来说，100 台设备太少了，或者公司不想在同一个帐户上混合产品。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T11:13:08.563

在与 Apple 支持人员讨论后：

一个公司只能有一个标准账户加一个企业账户。Apple 会非常仔细地检查公司是否已经拥有相同类型的帐户并拒绝新帐户请求。

# java - 在Android中替换字符串中的特殊字符

> ID：14480944
> 
> 赞同：4
> 
> 时间：2013-01-23T13:31:46.740
> 
> 标签：java, regex

我有一个字符串作为文件夹/文件名。我正在使用该字符串创建文件夹，文件。此字符串可能包含也可能不包含某些可能不允许创建所需文件夹或文件的章程

例如

```
String folder = "ArslanFolder 20/01/2013"; 
```

**所以我想用“_”删除这些字符**

这里是字符

```
private static final String ReservedChars = "|\?*<\":>+[]/'"; 
```

什么是正则表达式？我知道 replaceAll(); 但我想为此创建一个正则表达式。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-23T13:39:44.770

使用此代码：

```
String folder = "ArslanFolder 20/01/2013 ? / '";
String result = folder.replaceAll("[|?*<\":>+\\[\\]/']", "_"); 
```

结果将是：

```
ArslanFolder 20_01_2013 _ _ _ 
```

你没有说应该替换空格，所以有空格......如果有必要，你可以添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T08:55:16.447

我使用了其中之一：

```
String alphaOnly = input.replaceAll("[^\\p{Alpha}]+","");
String alphaAndDigits = input.replaceAll("[^\\p{Alpha}\\p{Digit}]+",""); 
```

请参阅此链接： [替换特殊字符](https://stackoverflow.com/questions/4283351/how-to-replace-special-characters-in-a-string)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:35:16.933

试试这个 ：

```
replaceAll("[\\W]", "_"); 
```

它将用下划线替换所有非字母数字字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-23T19:36:32.270

**这是正确的解决方案：**

```
String result = inputString.replaceAll("[\\\\|?\u0000*<\":>+\\[\\]/']", "_"); 
```

肯特的回答很好，但他不包括字符`NUL`和`\`。

此外，这是一个安全的解决方案，用于替换/重命名用户输入文件名的文本，例如。

# java - 更改用于编译的 jdk - 环境变量

> ID：14480946
> 
> 赞同：0
> 
> 时间：2013-01-23T13:31:50.763
> 
> 标签：java, environment-variables

我的计算机上安装了 3 个不同的 JDK，我应该设置什么环境变量以使 javac 使用 jdk 1.5，如果我输入 java -version，它会给出 1.7

请澄清一下，这些是如何关联的，例如，如果 java -version 说 1.7，是否意味着 javac 将使用 java 1.5，我应该更改哪个变量以使事情不同

更新：我想改变 javac 的行为，如何让 javac 调用 1.5 编译器？没有添加任何键，我需要它是默认值，我需要更改哪些变量

视窗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:36:24.067

如果您在 *unix 系统中，则刚刚找到您使用的 javac：

`which javac`

以及您使用的 java：

`which java`

如果您`JAVA_HOME`在路径中使用 a，只需`JAVA_HONE/bin`将`PATH`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:34:46.527

编译器是 JDK 的一部分，您必须为要使用的 JDK 版本调用适当的编译器。

例如，如果您有：

/jdk1 /jdk2 /jdk3

那么您需要在相应 JDK 的 bin 文件夹中引用 javac 编译器，例如 . /jdk2/bin/javac。

您可能只是键入 javac 并因此调用路径上的任何一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:36:25.627

您可以使用不同的编译选项调用您的 7 编译器以编译成以前的版本。尝试

```
javac -source 1.5 <source> 
```

看[这里](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#options)

# apache - mod_rewrite 在传递给 php 之前检查公共文件夹

> ID：14480947
> 
> 赞同：0
> 
> 时间：2013-01-23T13:31:52.317
> 
> 标签：apache, mod-rewrite

我想要实现的（使用 mod_rewrite）是根据请求检查公用文件夹中是否存在文件/目录，如果存在，则提供它，如果不存在，则将请求路由到 index.php 文件。此外，如果 URL 中没有提供扩展名，则默认为 .html。

下面是我的文件夹结构：

```
/.htaccess
/index.php
/public
    /test.html
    /test.xml
    /a_folder
        /index.html
        /test.html 
```

例如，这里有一些请求和响应：

*   **example.com/test.xml** >>> **/public/test.xml**
*   **example.com/a_folder/** >>> **/public/a_folder/index.html**
*   **example.com/a_folder/test** >>> **/public/a_folder/test.html**
*   **example.com/not_in_public** >>> **/index.php**

任何关于这方面的建议都会很棒，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:46:43.503

像这样的东西：（大量抄袭我的 WordPress .htaccess 文件）

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)^(\.\w+) $1.html [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

这`$1.html`条线不在我的脑海中，可能需要一些调整。请注意，这是一个愚蠢的检查，请求的 URL 以点结尾，后跟一个或多个单词字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T13:53:53.420

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^(|index\.php)$ - [L]
    RewriteRule ^public/(.*)$ - [L]
    RewriteRule ^(.*)$ public/$1
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . index.php [R]
</IfModule> 
```

这应该可以解决问题。

基本上，如果它是`/`或`/index.php`它不会做任何事情，如果它`/public/whateveryouwant`不会做任何事情，如果它是其他任何东西，它将重写`/public/whateveryouwant`并检查它是文件还是目录。如果不是，它将重定向到`index.php`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T15:23:24.160

感谢@jxpx777 和@N1xx1，经过一番折腾后，它成功了。

```
Options -Indexes

RewriteEngine On
RewriteBase /
RewriteRule ^public/(.*)$ - [L]

# Check public cache
RewriteRule ^(.*)$ public/$1
RewriteRule (.*)/$ $1/index

# Add .html if not extension provided
RewriteCond %{REQUEST_URI} !\..*$
RewriteRule ^(.*)$ $1.html

# Push through stack in not in cache
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L] 
```

# wpf - 托管在 ElementHost 中的 UserControl 出现奇怪的焦点问题

> ID：14480949
> 
> 赞同：4
> 
> 时间：2013-01-23T13:31:54.040
> 
> 标签：wpf, focus, elementhost

我有 UserControl，它在`ElementHost`.
它包含`DataGrid`
当用户按下回车键或双击行时显示新窗口（无模式），并且当该窗口关闭时，带有 ElementHost 的窗口将重新激活。问题是 DataGrid 失去焦点。

Snoop 向我展示了可视化树具有以下结构：

AdornerDecorator -> AvalonAdapter -> 我的用户控件。
Snoop 显示激活后 AdornerDecorator 有属性

```
IsFocusable = false
IsFocused = false
IsKeyboardFocused = true
IsKeyboardFocusWithin = true 
```

什么对我来说绝对是胡说八道。
当用户点击 Tab 或箭头键时，第一个启用的 UserControl 元素获得焦点。

我读过[这篇文章](http://blogs.msdn.com/b/scoberry/archive/2006/09/01/735844.aspx)，但我对此并不满意：

> 对于 WPF 和 Windows 窗体，Focus 的工作方式不同，这里有一些我们无法修复的粗糙边缘。如果您在 WindowsFormsHost 中具有焦点并且最小化/恢复表单或显示模式对话框，则 WindowsFormsHost 中的焦点可能会丢失 - WindowsFormsHost 仍然具有焦点，但其中的控件可能没有。

怎么办？放松和快乐？
非常令人失望的是无法在其他应用程序中重现该问题。

谁能解释这种奇怪行为的原因是什么？可能会提供一些解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:24:10.687

这是一个已知的错误：[http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7d41218e-c2bb-4957-b0b4-aa24efc4d8c2/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7d41218e-c2bb-4957-b0b4-aa24efc4d8c2/)

但不幸的是，连接的参考已经死了。

为了解决这个错误，我必须将`IsVmFocused`属性添加到我的 ViewModel 并创建我的`FocusHelper.IsFocused`附加属性，以侦听元素的`IsFocused`属性更改和绑定 VM 的属性。
您可以在这个（与任务相关的）SO 问题中看到 xaml：[What is a Cached acessor in the context of DataBinding？](https://stackoverflow.com/questions/14504865/what-is-a-cached-acessor-in-the-context-of-databinding)

# jquery - 特定数据库记录的 jQuery 对话框

> ID：14480952
> 
> 赞同：1
> 
> 时间：2013-01-23T13:32:07.967
> 
> 标签：jquery, jquery-ui

我的数据库中有一些行，包括名称、描述和图像。

不过，我想做的是在 HTML 列表中显示这些记录，该列表有一个“链接/按钮”，当我单击它时，它会打开一个 jQuery 对话框，其中包含图像。

到目前为止，我正在做的是循环遍历将对象传递给部分的记录。部分包括一个简单地显示图像的 div。

我到目前为止：

编辑成功.php

```
 $( ".image" ).dialog({
    autoOpen: false,
    height: 1000,
    width: 1000,
    position: [130, -100],
    modal: true,
    buttons: {
    Close: function() {
        $( this ).dialog( "close" );
    }
    },
    close: function() {
    }
 });

 $(".view-image" )
        .button()
        .click(function() {
            $( ".image" ).dialog( "open" );
});

<?php foreach($items as $item): ?>
    <div class="item">
        <?php echo $item->getName(); ?>
        <?php include_partial('templates/editTemplate', array('item'=>$item)); ?>
        <button class="view-image">View</button>
    </div>
<?php endforeach; ?> 
```

_editTemplate.php

```
<div class="image">
    <?php echo $item->getImage(); ?>
</div> 
```

问题是，输出了 10 条记录。当我单击“查看”按钮时，它会为 10 个项目中的每一个打开一个对话框。

有没有办法让我点击“查看”它只打开该实际记录的对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:38:47.337

您应该将 jQuery 函数更改为：

```
$(".view-image" ).button().click(function() {
    $(this).parent().find(".image").dialog("open");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:50:51.387

您的代码几乎调用了模式来打开每个具有`image`. 您必须指定`image`要打开的特定上下文。

```
<script>
$(function() {

    /** Modal dialog */
    var dialog = function (content) {
        var modal;
        if (!$('#modal').length) {
            $('body').append($('<div id="modal"></div>'));
            $(document.body).append(modal);         
        }
        modal = $('#modal');
        modal.dialog({
            autoOpen: true,
            height: 1000,
            width: 1000,
            position: [130, -100],
            modal: true,
            buttons: {
                Close: function () {
                    $(this).dialog("close");
                }
            },
            close: function () {}
        });
        modal.html(content);
   };

   $('.view-image').click(function(e) {
      // Call the dialog and pass the content of the image class.
      dialog($(".image", $(this).parent('.item')).html());

      return false;   
   });

});
</script>

...Your PHP code follows. 
```

要解决您的 jQuery UI 对话框特定问题，这里是 jsFiddle 解决对话框问题（概念方面）。[jsFiddle](http://jsfiddle.net/the_menace/hjUbM/)

我更新了上面关于如何将其与您的 PHP 应用程序集成的答案。

# php - 定期轮询多个 API 以获取推送通知 iOS App

> ID：14480955
> 
> 赞同：1
> 
> 时间：2013-01-23T13:32:16.963
> 
> 标签：php, push-notification, polling

如果这个问题过于主观，我提前道歉。

我正在开发一个 iOS 应用程序，该应用程序允许用户搜索多个 API 以查找结果，然后在这些 API 中找到与用户注册的结果相似的结果时收到推送通知。

我对应用程序的 iOS 部分感到满意​​，但我很好奇的是我应该如何处理定期轮询多个 API 以查看是否有任何已注册的主题收到了新项目。

我想象的第一件事是，如果用户注册，例如，当有新的 X 可用时接收通知，我将有一个 Web 服务器，每 X 分钟检查每个用户的每个注册主题，如果有新结果，则向用户发送推送通知。尽管我没有做这种事情的经验，但我知道这可能会对服务器造成很大的负担，并且随着用户群的扩大只会变得更糟。

因此，与其在后台定期查询 API，我该怎么做呢？据我所知，我将使用的 API 不允许从 API 向我的服务器推送通知。

提前致谢，

将要

# asp.net-web-api - Breezejs如何在查询响应中调试TypeError的原因

> ID：14480960
> 
> 赞同：0
> 
> 时间：2013-01-23T13:32:24.850
> 
> 标签：asp.net-web-api, runtime-error, breeze

我正在尝试使用 Breeze 查询 ASP.Net Web API 端点，但查询失败 - 数据对象包含：

```
internalError: TypeError
arguments: Array[2]
0: "createCtor"
1: null
length: 2
__proto__: Array[0]
get message: function () { [native code] }
get stack: function () { [native code] }
set message: function () { [native code] }
set stack: function () { [native code] }
type: "non_object_property_load" 
```

数据对象有一个消息（和响应文本）属性，其中包含来自查询的完整 json 响应，看起来不错，并且生成的元数据与响应匹配 - 它还记录响应的状态 200

所以我猜有某种问题将响应映射到客户端的对象？

我正在使用 Breeze 版本 0.85.2 的 NuGet 包

我可以让示例 ToDo 项目在同一环境中正常运行

我的项目确实使用了来自不同程序集和命名空间的域对象、上下文等，但我知道这个版本支持吗？

此外，其中一个属性是枚举 - 在元数据中定义为`{\"name\":\"State\",\"type\":\"Edm.Self.State\",\"nullable\":\"false\"}]`但在响应中作为整数出现

寻找有关如何在客户端进一步调试的提示

**更新**

将工作示例与我的代码进行比较，错误似乎来自此函数：

```
/**
Returns the constructor for this EntityType.
@method getEntityCtor
@return {Function} The constructor for this EntityType.
**/
ctor.prototype.getEntityCtor = function () {
    if (this._ctor) return this._ctor;
    var typeRegistry = this.metadataStore._typeRegistry;
    var aCtor = typeRegistry[this.name] || typeRegistry[this.shortName];
    if (!aCtor) {
        var createCtor = v_modelLibraryDef.defaultInstance.createCtor;
        if (createCtor) {
            aCtor = createCtor(this);
        } else {
            aCtor = function() {
            };
        }
    }
    this._setCtor(aCtor);
    return aCtor;
}; 
```

v_modelLibraryDef 上的 defaultInstance 属性在我的运行代码中未定义 - 我在微风的配置中遗漏了什么？

**更新 2 - 已解决，但为什么**

好的，所以我得到了这个工作 - 我错过了对淘汰赛的参考（我打算使用但没有那么远） - 我有点被没有提到淘汰赛的微风先决条件误导了所以如果有人可以解释我如何在没有淘汰赛的情况下完成这项工作，如果它是一个错误，那么要点是你的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:07:48.367

得到了同样的错误，并且引用了 knockout.js 有帮助（我正在为我的应用程序使用 angularjs）

```
 manager.executeQuery(query).then(function(data) {
        console.log(data);
    }); 
```

但。看来，默认情况下，数据映射器与淘汰赛一起使用，因此我们将 XHR 结果作为带有可观察的 KO 模型。

所以**我添加了breeze.config.initializeAdapterInstance("modelLibrary", "backingStore", true);**

现在我没有收到 data.results 作为可观察的集合。

希望我的回答会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T17:45:44.373

此错误看起来与您的 Entity 类型构造函数之一有关。我猜您在代码中的某处调用了“registerEntityTypeCtor”方法。如果是这样，那么我会在您在那里注册的构造函数中放置一个断点。

根据您的其他评论，.NET 枚举应该在微风客户端上转换为整数。这是唯一可以支持它们的“原始”数据类型。当您调用“EntityManager.saveChanges”时，它们将被转换回服务器上的枚举

Breeze 不需要“淘汰”，您也可以使用“angularjs”或“backbone”。如果您不指定另一个库，我们只是将微风客户端默认为淘汰赛。[请参阅此处](http://www.breezejs.com/sites/all/apidocs/classes/config.html#method_registerAdapter)的“breeze.config.initializeAdapterInstance”主题。我们确实需要更好地记录这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:39:43.357

每次我收到响应的 Message 属性是 json 格式的数据的错误时，这意味着我在获取数据后运行的函数中有一个错误。

例子：

```
dataservice.getPalanca(routeData.PalancaID)
.then(function (data) {
    self.palanca(data.results[0]);
})
.fail(function (error) {
    console.log(error); /*if I get here and error.Message == correct json almost always means error in .then function*/
    toastr.error("Ha ocurrido un error al obtener los datos");
}); 
```

我希望我能帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T18:57:25.027

对不起，你让理查德挣扎了。我们会努力从中吸取教训，让下一个人免于遭受您所承受的痛苦。

FWIW，我们并不是说 Knockout 是先决条件……因为**KO 不是先决条件**。您可以改用 Angular 或 Backbone，我们预计将来会有其他替代方案。

当您刚刚学习 Breeze 时，我们不想让您淹没在配置选项中。所以我们选择了 KO 作为默认的模型库（就像 jQuery 是默认的 AJAX 提供者，而 Web API 是默认的“数据服务”技术一样）。我们在很多地方都这么说；先决条件看起来像另一个好地方提到它。

碰巧的是，您无论如何都打算使用 KO，因此无需进行任何配置。大多数人从包含 KO 的 MVC 模板之类的东西开始，并在 Index.cshtml 中为您加载它。

显然，您是从零开始的（也许是“ASP 空 Web 应用程序”？）。Breeze Web API NuGet 包力求备用，因此不包括 KO。我们认为（错误地）你会自己添加它......以正确的脚本顺序......如果你想使用 KO。显然，我们可以更好地记录这个特定的开发路径……尤其是我们自己非常喜欢它。**感谢您指出**。

另一个问题是异常没有帮助。您可以从其他尝试回答您的问题中看到，即使有 Breeze 经验的人也无法识别出问题所在。我们将看看我们是否可以更早地检测到丢失的脚本并抛出一个带有更好消息的异常。

# java - InputStreamReader 没有读取 č š 字符

> ID：14480962
> 
> 赞同：0
> 
> 时间：2013-01-23T13:32:26.417
> 
> 标签：java, android, text, bufferedreader

我正在做一个项目，但是当我从文件中读取时，它无法读取某些字符（例如`č`，`ž` ,`š`等）。我不知道我在做什么错。

这是我的代码：

```
try {
    reader = new InputStreamReader(getAssets().open("koce_podatki.txt"));
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

BufferedReader br = new BufferedReader(reader);
for(int i=-1;i<position;i++){
    try {
        temp = "" + br.readLine();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

try {
    reader.close();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T13:35:13.360

您的问题是编码之一。文件只存储字节。

有很多方法可以将字节映射到字符（这些方法称为编码）。

从文本文件中读取时，您必须*知道*并*指定*要使用的编码。

如果您*未*在 Java 中指定编码，则将使用平台默认编码，这*可能是您想要的，也可能不是*您想要的。

在你的情况下，这**不是**你想要的。要解决此问题，请找出正确的编码并在[构造`InputStreamReader`函数](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html#InputStreamReader%28java.io.InputStream,%20java.lang.String%29)中指定它。

可以尝试的常见编码是 UTF-8。如果您告诉我们您看到的是什么而不是那些字符，我们可以帮助您猜出正确的编码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T13:38:35.233

试试这个方法：

```
try {
    reader = new InputStreamReader(getAssets().open("koce_podatki.txt"));
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

    BufferedReader in = new BufferedReader(reader);

    while( (s = in.readLine()) != null) {

    String UTF8Str = new String(s.getBytes(),"UTF-8"));
    temp=""+UTF8Str;

    } 
```

# php - 在 PHP 中将 SMS 编码转换为 UTF-8

> ID：14480963
> 
> 赞同：0
> 
> 时间：2013-01-23T13:32:41.307
> 
> 标签：php, encoding, sms, smpp, 7-bit

我用 PHP 编写了一个 SMPP 服务器收发器。我从我的 SMPP 中得到这个 SMS 字符串。这是一条 UTF8 消息，实际上是 7Bit。这是一条示例消息：

```
 5d30205d30205d3 
```

我知道如何转换它。它应该是：

```
 \x5d3\x020\x5d3\x020\x5d3 
```

I don't want to write it myself. I guess there is already a function that does that for me. Some hidden iconv or using pack() / unpack() to convert this string to the correct format.

我正在尝试使用 PHP 来实现这一点。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:19:46.820

这应该这样做：

```
$message = "5d30205d30205d3";
echo "\x".implode("\x", str_split($message, 3));
// \x5d3\x020\x5d3\x020\x5d3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:46:16.963

这是我最终使用的：

```
public static function sms__from_unicode($message)
{
    $org_msg = str_split(strtolower($message), 3);
    for($i = 0;$i < count($org_msg); $i++)
        $org_msg[$i] = "\u0{$org_msg[$i]}";

    $str = implode(null, $org_msg);
    $str = preg_replace_callback('/\\\\u([0-9a-f]{4})/i', 'replace_unicode_escape_sequence', $str);    
    return $str;
}   

function replace_unicode_escape_sequence($match) {
     return mb_convert_encoding(pack('H*', $match[1]), 'UTF-8', 'UCS-2BE');
} 
```

10 倍。全部。

# java - 如何在 SAP HANA Cloud 中配置和使用持久数据对象？

> ID：14480970
> 
> 赞同：-1
> 
> 时间：2013-01-23T13:33:12.960
> 
> 标签：java, persistence, sap, sap-cloud-platform

我想在 SAP HANA 云平台上用 Java 创建一个简单的项目管理应用程序。用户可以将人员添加到项目并定义从事项目的人员的工作时间。

我成功创建了一个小型应用程序逻辑。但是，我不清楚我应该如何定义持久数据对象。以及如何以正确的方式存储和读取数据。

我创建了“Project”和“Person”类来添加数据（见下文）。

如何在它们之间建立关系并存储一个人在项目上花费的工作时间？

在 ERM 上，我知道解决方案：Person 和 Project 之间的 1:n 关系以及它们之间的额外表，其中包含“projectID”、“personID”和“workingHours”。

到目前为止，应用程序使用“addNewPerson”函数写入数据：

```
addNewPerson : function( sFirstName, sLastName, oTable ) {  
          var _this = this;  
          _this.odataServiceUrl = personsListOdataServiceUrl;  
          jQuery.ajax({  
             url : _this.odataServiceUrl + "/Person?$format=json",  
             type : 'POST',  
             contentType : 'application/json',  
             data : JSON.stringify({  
                                     firstName : sFirstName,  
                                     lastName : sLastName  
                                  }),  
             success : function(data) {  
               _this.getView().getModel().refresh();  
               oTable.unbindRows().bindRows("/Person");  
      },  
             error : function(jqXHR, textStatus, errorThrown) {  
           sap.ui.commons.MessageBox.alert("Failed to add person: " + textStatus+ "\n" + errorThrown);  
             }  
      }); }, 
```

要读取数据，我只需将行绑定到对象。

那么，我怎样才能以正确的方式创建数据对象呢？以及如何将数据读取和写入对象？

**人.java：**

```
package com.sap.netweaver.cloud.sample;
import javax.persistence.*;
@Entity
@Table(name = "T_PERSON")
@NamedQuery(name = "AllPersons", query = "select p from Person p")

public class Person {
    @Id
    @GeneratedValue
    private long id;
    @Basic
    private String firstName;
    @Basic
    private String lastName;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public void setFirstName(String param) {
        this.firstName = param;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setLastName(String param) {
        this.lastName = param;
    }

    public String getLastName() {
        return lastName;
    }
} 
```

**项目.java：**

```
package com.sap.netweaver.cloud.sample;

import javax.persistence.Basic;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.NamedQuery;
import javax.persistence.Table;

@Entity
@Table(name = "T_PROJECT")
@NamedQuery(name = "AllProjects", query = "select p from Project p")
public class Project {

    @Id
    @GeneratedValue
    private long id;
    @Basic
    private String projectName;
    @Basic
    private String projectDesc;
    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public void setProjectName(String param) {
        this.projectName = param;
    }

    public String getProjectName() {
        return projectName;
    }

    public void setProjectDesc(String param) {
        this.projectDesc = param;
    }

    public String getProjectDesc() {
        return projectDesc;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-16T13:18:34.463

首先是关于人与项目之间的联系的问题。因为我猜一个项目可以有多个人，所以你需要一个

```
@OneToMany(mappedBy = "projectEntity", cascade = CascadeType.PERSIST)
private List<Persons> persons= new ArrayList<Persons>(); 
```

在项目方面和人员方面

```
@JoinColumn(name = "projectEntity")// JPA creates join column for you with the project id - see wiki oneToMany JPA example
private Project project; 
```

对于测试，我强烈推荐以下步骤：

1.  从 SAP HCP sdk 中的 JPA 示例开始：neo-java-web-sdk-2.36.4\samples\persistence-with-jpa
2.  一旦您理解了示例（创建、保留、查找），您就可以通过添加具有上述编码的第二个实体来添加 1:N 关系。3）。
3.  如果这可行，我建议从本地 Tomcat 或 Java EE 服务器中设置的默认内存数据库转到真正的本地数据库。Apache Derby 在那里工作得很好。您可以找到各种 youtube 视频，其中解释了 derby 的安装。

# php - Laravel 表单问题

> ID：14480972
> 
> 赞同：1
> 
> 时间：2013-01-23T13:33:17.383
> 
> 标签：php, twitter-bootstrap, laravel

在 laravel 中使用 Form 类的两个问题。发现很难习惯使用数组传递参数我正在使用 twitter bootstrap：

1.  将类添加到选择类型不起作用？
2.  使用单选按钮正确输出

1

```
 {{ Form::select('title', array('Mr', 'Mrs', 'Ms', 'Miss', 'Master', 'Dr',   'Prof'), array('class' => 'input-small')) }} 
```

2

```
<div class="control-group">
<div class="controls">
  {{ Form::label('gender', 'Gender', array('class' => 'control-label')) }}
  <label class="radio">
  {{ Form::radio('gender', 'Male') }} Male
  </label>

  <label class="radio">
  {{ Form::radio('gender', 'Female') }} Female
  </label>
 <p class="help-block"> Please enter your gender</p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:25:34.400

1）您传递了错误的值

```
public static function select($name, $options = array(), $selected = null, $attributes = array()) 
```

您必须传递选定的值、会话或`Input::old('name')`

```
{{ Form::select('title', array('Mr', 'Mrs', 'Ms', 'Miss', 'Master', 'Dr', 'Prof'), $selected = NULL,  array('class' => 'input-small')) }} 
```

2) 在我的模板上看起来不错，我有相同的代码。你能发布更多信息吗？

# javascript - 伪造/模拟用于单元测试的 Javascript 对象

> ID：14480978
> 
> 赞同：0
> 
> 时间：2013-01-23T13:33:23.827
> 
> 标签：javascript, unit-testing, qunit

我日常工作的很大一部分涉及使用 Dynamics CRM 和编写 JS 来扩展表单上的功能。

Dynamics 中的大多数客户端交互都涉及在表单加载时使用为您提供的对象，即[Xrm](http://msdn.microsoft.com/en-us/library/gg334351.aspx)。所以你可能有类似的东西：

```
function OnLoad() {
    Xrm.Page.getAttribute('name').setValue('Stackoverflow!');
    var x = Xrm.Page.getAttribute('name').getValue();
} 
```

我倾向于为 Xrm 对象编写一个包装器，主要是因为它比记住一些链接要容易得多，并最终得到如下内容：

```
function WrappedXrm(realXrm) {
    var xrm = realXrm;

    this.getValue(name) {
        return xrm.getAttribute(name).getValue();
    }
}

//and then use it as so

var myXrm = new FakeXrm(Xrm);
var myXrmValue = myXrm.getValue('Name'); 
```

我正在尝试[QUnit](http://qunitjs.com/)，想知道在这种情况下我将如何进行单元测试？

显然上面的例子是一行，它可能不值得测试。但是假设那里有一些我想测试的业务逻辑。

我能看到的唯一方法是在每次测试之前按照以下方式进行一些设置

```
var fakeXrm = {};
fakeXrm.Page = {};
fakeXrm.Page.getAttribute = function(name) {
    var tempAttr = {};
    tempAttr.getValue = function() {
        return 'A fake value';
    }
} 
```

然后在`'A fake value'`被退回时进行测试，但这对我来说根本不“感觉”。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:39:16.727

### 使用模拟

所以在这种情况下，你想创建一个 WrappedXrm 的实例，并从你的 lib 中传递一个模拟 Xrm 的对象；你需要一个 Xrm 的模拟。

第一种选择是像你一样编写它（如果你知道 Xrm 的接口是什么，这是完全有效的。）

jasmine 框架中的一些库（如 sinon.js 或“间谍”）可以帮助您编写如下代码；

*   创建一个“模拟”Xrm，以配置它应该返回的内容
*   用这个模拟创建一个 WrappedXrm 的实例
*   调用 WrappedXrm 的 getValue 方法
*   检查是否在模拟上调用了某些方法

但在 javascript 的情况下，简单地创建一个具有正确属性的对象*可能*没问题。

请注意，如果“真实”Xrm 对象的结构发生变化，您的测试将会中断；这可能是你的烦恼，但这总是模拟的风险......

### 使用真实的实现

如果您不想针对模拟进行测试（这在包装器的情况下可能有意义），那么也许您可以编写将在您的 qunit html 页面中创建*实际*Xrm 对象的最小代码（也许是硬编码标记？我不不知道图书馆，所以...）

希望这会有所帮助。

# c++ - 为文字处理器存储文本的更好方法是什么？

> ID：14480980
> 
> 赞同：4
> 
> 时间：2013-01-23T13:33:34.200
> 
> 标签：c++, text, word-processor

通常的做法是将字符存储在一个字符串中，但是因为在编写文本时，很多时候用户在文本中间删除或添加字符，也许最好使用`std::list<char>`包含字符，然后添加字符在列表中间不是昂贵的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T21:11:59.140

First word-processing do much more than string manipulation. You will need a rich-text data structure. If you need pagination you will also need some meta-data like page setup. Do some research on Word, you will have answer.

For the rich-text part, your data structure have to save two things: characters and attributes. In other words, you have to have some kind of markup language. HTML/DOM is a choice. But in most of time it's a overkill because of complexity.

There are many data structure can handle the character part: Rope, Gap Buffer, and Piece Table. But none of them provide attribute support directly. You have to build it by you self.

AbiWord using list based Piece Table before, but now using tree based Piece Table now. Go to the Wiki page of AbiWord you will find more.

OpenOffice use a different way. Basically, it keeps a list of paragraph, and inside the paragraph it keep a string (or other more effective data structure) and list of attributes. I prefer this way because Paragraph is a naturally small enough unit to edit, it's much easier than tree based piece table.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T20:45:50.800

以下论文总结了文字处理器中使用的数据结构：[http ://www.cs.unm.edu/~crowley/papers/sds.pdf](http://www.cs.unm.edu/~crowley/papers/sds.pdf)

> 文本序列的数据结构。查尔斯克劳利，新墨西哥大学，1998 年
> 
> 用于维护字符序列的数据结构是文本编辑器的重要组成部分。本文研究并评估了文本序列可能的数据结构范围。检查文本编辑器的文本序列组件的 ADT 接口。检查了六种常见的序列数据结构（数组、间隙、列表、行指针、固定大小的缓冲区和片段表），然后提出了包含所有六种结构的序列数据结构的通用模型。详细解释了计件表法，并介绍了它的优点。检查了序列数据结构的设计空间，并提出了上面列出的几种变体。这些序列数据结构经过实验比较，并根据许多标准进行评估。实验比较是通过在编辑模拟器中实现每个数据结构并使用数千个编辑的合成负载对其进行测试来完成的。我们还报告了结果对用于生成合成编辑负载的参数变化的敏感性的实验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:38:40.743

SGI STL 有一个 Rope 类，你可能想看看： [http ://www.sgi.com/tech/stl/Rope.html](http://www.sgi.com/tech/stl/Rope.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T13:43:22.857

使用`std::list<char>`每个字符需要比使用多九倍的存储空间`std::string`。这可能不是一个好的权衡。我的第一个倾向是使用 a `std::vector<std::string>`，其中每个`string`对象都包含一个段落的文本。段落中的插入和删除将足够快。

# objective-c - 在某些进程运行时隐藏 NSTextView

> ID：14480981
> 
> 赞同：0
> 
> 时间：2013-01-23T13:33:33.647
> 
> 标签：objective-c, cocoa, nsthread, nstextview, nsprogressindicator

我的代码是这样的：

```
- (void)buttonClick
{
  [self.progressIndicator startAnimation:self];
  [self.textView setHidden:YES];  

  // some process

  [self.progressIndicator stopAnimation:self];
  [self.textView setHidden:NO];
} 
```

问题是`textView`没有隐藏。并且`progressIndicator`工作正常，可能是因为它在其他线程中运行。但是当我试图隐藏`textView`在其他线程中或在后台执行时，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:41:42.123

`NSTextView`是嵌入`NSScrollView`你也需要隐藏`NSScrollView`

```
 - (void)buttonClick
{
  [self.progressIndicator startAnimation:self];
  [self.textView setHidden:YES]; 
  [scrollview setHidden:YES]; 

  // some process

  [self.progressIndicator stopAnimation:self];
  [self.textView setHidden:NO];
  [scrollview setHidden:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:43:35.937

您可以延迟然后通过选择器调用，这将同步您的线程（但这可能不是最好的方法，您也可以使用 OperationQueue 和 GCD）。但这符合您的目的：

我使用了 NSTextField 和 NSTextView，因为在您的问题和评论中都包含这两者。

```
-(void)someProcess:(id)sender{
    for (int i=0; i<100000; i++) {
        for (int j=0; j<9000; j++) {
            ;
        }
    }
    NSLog(@"someProcess ends");
}

-(void)startProgressIndicator{
    [self.progressIndicator startAnimation:self];
}
-(void)stopProgressIndicator{
    [self.progressIndicator stopAnimation:self];
}
-(void)hideScroll{
    [self.textField setHidden:YES];
    [self.scrollView setHidden:YES];
}
-(void)showScroll{
    [self.textField setHidden:NO];
    [self.scrollView setHidden:NO];
}

- (IBAction)button:(id)sender {
    //hide scrollview
    NSLog(@"hide sv");
    [self hideScroll];

    //start prog indi
    NSLog(@"run");
    [self performSelector:@selector(startProgressIndicator) withObject:self afterDelay:1];

    //some process
    [self someProcess:nil];

    //stop prog indi
    NSLog(@"stop");
    [self performSelector:@selector(stopProgressIndicator) withObject:self afterDelay:1];

    //show scrollview
    NSLog(@"show sv\n\n\n\n");
    [self performSelector:@selector(showScroll) withObject:self afterDelay:1];

} 
```

# algorithm - 用户提供的服务所需的数据库结构建议

> ID：14480983
> 
> 赞同：0
> 
> 时间：2013-01-23T13:33:39.173
> 
> 标签：algorithm, database-schema

我的项目需要类似于黄页的东西：存储用户服务并提供按服务查找。

我当前的解决方案非常死板和繁琐 - 我有 3 个预设列表：工业、贸易、专业。用户从顶层开始并定义他的服务。我还创建了一个“就地搜索”选项，其中提供字符串会在“行业 - 贸易 - 专业”的字符串中执行查找。

我注意到谷歌、LinkedIn 和黄页提供了一个更简单的解决方案，用户可以在其中输入自由文本，即使搜索词是 CPA，系统也会为注册会计师提供结果。

对用户解决方案更智能、更高效、更简单有什么想法吗？我不是在寻找确切的数据库结构，一般算法就足够了。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:37:56.183

您是否考虑过标签结构？这允许在多个位置、标签层次结构、标签“重新映射”（标准化标签名称）中的条目。

基本上，您没有层次结构 - 条目是平面的，但附加了可以形成层次结构的标签。这是您需要的灵活性——一家公司可能提供多种服务，您也可能希望标签标准化。

简单地说：

*   条目的表格（或更多 - 我保持一般性）
*   一个标签表，养育自己（形成一棵树）
*   一个 EntryTable 标签。

标签表必须允许交叉链接（替代标签、状态等）。

# java - 字符串到整数和整数的转换

> ID：14480994
> 
> 赞同：4
> 
> 时间：2013-01-23T13:34:05.460
> 
> 标签：java, string, integer

鉴于 String`s`已被声明，以下 5 行代码产生相同的结果：

```
int i = Integer.valueOf(s);
int y = Integer.parseInt(s);
int j = Integer.valueOf(s).intValue();
Integer x = Integer.valueOf(s);
Integer k = Integer.valueOf(s).intValue(); 
```

是否存在每一个都是首选代码的情况？看起来`int`和`Integer`是可以互换的，这`.intValue()`不是必需的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T13:37:15.987

如果您需要`int`，请使用`parseInt()`，如果您需要`Integer`使用`valueOf()`。尽管它们现在（在某种程度上）可以互换，但使用直接返回所需数据类型的仍然更有意义。（从历史上看，它们根本不能互换，这是在 Java 5 中通过自动装箱和拆箱引入的。）

`intValue()`您使用的方法只是将`Integer`类类型转换为`int`原始类型，因此使用它`valueOf()`是最糟糕的组合，您永远不想使用它。（不会有坏事发生，只是阅读时间更长，性能稍差，通常更多余。）

如果您不在乎或不知道，那么我会使用`parseInt()`. 特别是作为初学者，更常见的是您想要原始类型而不是类类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T13:38:25.050

`int`并且`Integer`通过自动装箱和自动拆箱的魔力看起来可以互换：在许多情况下，您需要一个但有另一个，编译器会自动插入必要的代码来转换它们。

这很有用，但如果你知道它，你可以在很多地方避免它，这会导致代码稍微快一些（因为要做的转换更少）。

*   [`Integer.parseInt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)返回一个`int`，所以如果你需要一个，你应该使用它`int`
*   [`Integer.valueOf()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#valueOf%28java.lang.String%29)返回一个`Integer`，所以如果你需要一个，你应该使用它`Integer`
*   `Integer.valueOf().intValue()` *首先*创建一个`Integer`然后*从中*提取`int`值。没有充分的理由使用它来代替简单的`Integer.parseInt()`.

和之间的决定`int`也`Integer`很容易做到：

*   *如果可能的话，通常*你会想要使用原始类型 ( `int`)
*   如果你需要一个`Object`（例如，如果你想把你的号码放在 a 中`Collection`），那么你需要使用包装类型 ( `Integer`)，因为这里不能使用原始类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:39:14.550

int 和 Integer 不可互换。由于从 java 5 开始的 Autoboxing 功能，int 到 Integer 的转换由 jvm 本身负责。但是我们不应该不必要地使用 Integer 类。原始数据类型总是更快。只需要使用包装类.

# java - JSF 1.1 的 Omnifaces 树的替代方案

> ID：14480996
> 
> 赞同：3
> 
> 时间：2013-01-23T13:34:13.207
> 
> 标签：java, jsf, omnifaces

我需要在我的 JSF 页面上呈现分层数据结构。我需要控制 HTML 输出，因为一些节点需要一个复选框，而大多数节点需要一些额外的图标等来显示帮助描述等。我的目标是沿着这些方向：

[http://cdpn.io/vtaHz](http://cdpn.io/vtaHz)

[Omnifaces Tree](http://showcase.omnifaces.org/components/tree)似乎几乎可以提供我需要的东西，但它似乎只是 JSF 2.0。

JSF 1.1 有类似的组件吗？我已经使用了 Tomahawk 库，但它的树组件似乎不灵活，至少对于我的需要而言。任何提议的标记库都不得与标准 JSF 或 Tomahawk 冲突。

不幸的是，升级 JSF 不是一种选择（甚至升级到 JSF 1.2）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:00:50.003

根据文档，[Richfaces Tree](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_tree.html)从 3.0.0 开始可用。[Richfaces 3.1.6.SR](https://community.jboss.org/thread/16513)是与 JSF 1.1 兼容的最新版本，那么为什么不使用它呢？

# sql - 选择每月最大日期 SQL SERVER

> ID：14480999
> 
> 赞同：2
> 
> 时间：2013-01-23T13:34:20.950
> 
> 标签：sql, sql-server, tsql, select, group-by

我有一个看起来像这样的数据库表，称为 Totals，我正在尝试选择每人每月的最大日期，以便我可以平均该人在几个月内的余额

```
 Date       Person     Balance
01-15-12       A        79
01-23-12       c        150
01-17-12       A        65
02-23-12       c        150
02-15-12       A        70
03-23-12       c        15
03-15-12       A        705
03-28-12       c        150
04-15-12       A        700
04-23-12       c        150 
```

我将此表加入到一个名为 #bal 的临时表中，其中只包含像 ABC 等人这样的人所以每个月我只想要每个人每月的最大行数，以便我可以总结余额并找到平均余额每人的月份。

```
 create table #bal 
 (  
 person bigint,
 avgbal decimal,
 mxdate datetime

 )
  insert into #bal(person,avgbal,mxdate)
  select 
  b.person,
  (sum(s.BAL)/12) as avgbal,
  max(date) as mxdate 

  from #bal b
  inner join TOTALS s on (b.person=s.person)
  where DATE between '01-17-2012' and getdate()
  group by b.person 
```

到目前为止，有这样的东西按日期分组，但我只想选择每月的最大天数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:58:05.063

我根据上面的集合创建的一些样本数据制作了几个样本。我不确定您是想要每个月的最后一个值还是最大值，因为它们不一定相同，所以我为两者编写了基本查询：

```
declare @table table
(
date date,
person varchar(10),
balance int
)

insert into @table
select '01-15-12', 'A', 79
union all
select '01-23-12', 'c', 150
union all
select '01-17-12', 'A', 65
union all
select '02-23-12', 'c', 150
union all
select '02-15-12', 'A', 70
union all
select '03-23-12', 'c', 15
union all
select '03-15-12', 'A', 705
union all
select '03-28-12', 'c', 150
union all
select '04-15-12', 'A', 700
union all
select '04-23-12', 'c', 150;

-- Average of max balance in month
with maxMonth as
(
  select year = year(date)
    , month = month(date)
    , person, monthMaxBalanace = max(balance)
  from @table
  where date between '01-17-2012' and getdate()
  group by year(date), month(date), person
)
select person, maxInMonthAverage = avg(monthMaxBalanace)
from maxMonth
group by person; 
```

或者，如果您需要使用每个月的*最后余额，您可以更改查询：*

```
-- Average of last balance in month
with lastInMonth as
(
  select year = year(date)
    , month = month(date)
    , person, balance
    , monthRank = row_number() over (partition by year(date), month(date), person order by date desc)
  from @table
  where date between '01-17-2012' and getdate()
),
lastRows as
(
  select * from lastInMonth where monthRank = 1
)
select person, lastInMonthAverage = avg(balance)
from lastRows
group by person; 
```

根据您的示例查询（即 1 月 17 日和更大），结果是相同的，但如果您包含 15 日的值，由于两个查询中的逻辑不同，它们会略有不同。

![在此处输入图像描述](../Images/10eb7d873ef2e92f0a23e7a77c88e219.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:28:16.427

这将为您检索每个月和每个人的最后一天的行..

```
select V.[date]
  ,V.person
  ,V.balance
from (  select [person]
          ,[date]
          ,max([date]) over(partition by person,datediff(mm,0,[date])) as [max_date]
          ,balance
    from @table
)V
where V.[date]=V.max_date 
```

这会为您检索期间所有月份的平均值

```
select V.person
,SUM(balance)/12 as avgbal_as_u_calc
,AVG(balance) as average_balance
from (  select [person]
          ,[date]
          ,max([date]) over(partition by person,datediff(mm,0,[date])) as [max_date]
          ,balance
    from @table
)V
where V.[date]=V.max_date
group by V.person 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:58:45.707

你在寻找这样的东西吗？查询可以被*取消分组*以显示每月数据。这里我对每个用户每个月的每个最大日期进行平衡，总结并给出年度平均值。

*   ## [SQLFIDDLE 演示](http://sqlfiddle.com/#!3/40b61/19)

询问：

```
select x.person, sum(p.balance) maxtotal,
sum(p.balance) /12 average
from (select max(date) mxdt,
      month(Date) as month,
      person
from person
group by month(Date), person) x
join person p
on p.person = x.person
and p.date = x.mxdt
group by x.person;

| PERSON | MAXTOTAL | AVERAGE |
-------------------------------
|      A |     1540 |     128 |
|      c |      600 |      50 | 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-23T14:18:29.550

这是 Oracle 查询。它不是基于你的表。可以这么说，所有数据都是即时的。内部查询将按月号为您提供日期，例如 01、02... 如果这是您想要的并且我正确理解了这个问题，则外部查询每月获得 MAX 值。您只需将日期转换为月份编号并按其分组。您可以将人员添加到分组依据。我希望这有帮助：

```
SELECT curr_mo, MAX(some_val) 
  FROM
   (-- 10 weeks starting with '01-15-2012' --
     SELECT to_char(to_date('01-15-2012', 'mm-dd-yyyy')+LEVEL*7, 'mm') curr_mo 
      , MOD(LEVEL, 2)+3 some_val
       FROM dual
     CONNECT BY LEVEL <= 10 
   )
  GROUP BY curr_mo
 /

 Inner query output:

 CURR_MO    SOME_VAL
 -------------------
  01         4
  01         3
  02         4
  02         3
  .....

  Output - MAX per each mo:

  CURR_MO   MAX(SOME_VAL)
  ------------------------
  01         4
  02         4
  03         4
  .... 
```