# StackOverflow 问答 14985000-14985999

# php - PHP 类名作为字符串

> ID：14985001
> 
> 赞同：5
> 
> 时间：2013-02-20T16:31:48.250
> 
> 标签：php, class

是否有内置的静态方法或属性来引用 PHP 类，以便在上下文中将其表示为字符串？例如：

而不是这个：

```
$obj->tempFn('MyClass') //MyClass being the name of the class 
```

我想做这个：

```
$obj->tempFn(MyClass) //Directly references the class name, instead of a string representation 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T16:38:01.947

不，但是您可以在您的类中定义一个包含类名的常量，例如：

```
class foo{
  const  
    NAME = 'foo';
} 
```

并像访问它一样`foo::NAME`。

在[PHP 5.5](https://wiki.php.net/rfc/class_name_scalars)中，您将能够使用：

```
foo::class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:33:51.247

`echo get_class($this);`应该在课堂内工作。

`echo __CLASS__;`我相信这是一个静态属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:53:53.967

如果真的想避免静态，我认为反射类可能会起作用。

```
function getClassName(ReflectionParameter $param) {
    preg_match('/\[\s\<\w+?>\s([\w]+)/s', $param->__toString(), $matches);
    return isset($matches[1]) ? $matches[1] : null;
} 
```

[这是来自http://www.php.net/manual/en/reflectionparameter.getclass.php](http://www.php.net/manual/en/reflectionparameter.getclass.php)的评论

# java - 如何通过使用 HttpsUrlConnection 的 SSL 连接使用代理身份验证？

> ID：14985002
> 
> 赞同：0
> 
> 时间：2013-02-20T16:31:48.803
> 
> 标签：java, http, ssl, proxy

我正在尝试连接到使用 SSL 的网站。此连接是通过代理 (squid) 进行的，该代理也需要代理身份验证。

我目前在我的应用程序中使用 HttpsUrlConnection 进行连接，如果可能的话，我更愿意继续使用它。

当您使用 connection.open(" [https://domain.com](https://domain.com) ") 建立连接时会出现问题，HTTP CONNECT 在您有机会设置任何标头（包括“代理身份验证”）之前立即发送，在正常情况下http 连接在调用 getOutputStream 之前不会发送任何内容，因此只需设置此标头即可。

可以为此设置一个 defaultAuthenticator 以返回正确的名称和密码。但这有两个问题：

1.  该应用程序是在 Web 服务器内运行的 Web 应用程序，具有未知的其他应用程序。如果我设置默认身份验证器，这会影响其他应用程序吗？（出于同样的原因，设置系统属性已退出）

2.  我还需要能够在不同的连接中使用不同的代理。例如，我可能有一个连接到proxy1.domain.com 和另一个连接到proxy2.domain.com，每个都有不同的凭据。

实现这一目标的正确方法是什么？鉴于 HttpUrlConnection 的广泛使用，如果这不可能，我会感到非常惊讶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:48:10.437

如果我没有完全弄错，这不能使用 JVM`URLConnection`和朋友来实现。此外，鉴于其在严重错误和内存泄漏方面的记录，它在我们的公司黑名单上已经有一段时间了。

使用[Apache HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)。

至于您的问题1，*通常*每个`ClassLoader`都有自己的类副本和类静态成员。因为，是一个 JVM 类，我假设它是由应用程序`Authenticator`的（其中一个）父级加载的，这确保JVM 内只有一个*类的副本。*`ClassLoader``ClassLoader``Authenticator`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T23:22:47.717

你设置了一个`java.net.Authenticator`.*

# c# - MVC4 使用什么加密？

> ID：14985003
> 
> 赞同：3
> 
> 时间：2013-02-20T16:31:51.553
> 
> 标签：c#, asp.net-mvc-4, asp.net-membership, simplemembership

我们如何找出 MVC4 使用的加密方式？我注意到有一个 SALT 选项，但这似乎也没有在`WebSecurity()`模块中使用。

我想知道使用的标准以及是否可以轻松升级到最新的 SHA

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T16:39:43.037

根据以下链接`Default Hashing Algorithm Is Now HMACSHA256`：

[http://www.asp.net/whitepapers/aspnet4/break-changes](http://www.asp.net/whitepapers/aspnet4/breaking-changes)

> # 默认哈希算法现在是 HMACSHA256
> 
> ASP.NET 使用加密和散列算法来帮助保护表单身份验证 cookie 和视图状态等数据的安全。默认情况下，ASP.NET 4 现在使用 HMACSHA256 算法对 cookie 和视图状态进行哈希运算。早期版本的 ASP.NET 使用较旧的 HMACSHA1 算法。
> 
> 如果您运行混合 ASP.NET 2.0/ASP.NET 4 环境，其中表单身份验证 cookie 等数据必须跨 .NET Framework 版本工作，您的应用程序可能会受到影响。要将 ASP.NET 4 Web 应用程序配置为使用旧的 HMACSHA1 算法，请在 Web.config 文件中添加以下设置：
> 
> ```
> <machineKey validation="SHA1" /> 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:59:49.400

WebSecurity 类在内部使用[Crypto 类](http://msdn.microsoft.com/en-us/library/gg538437%28v=vs.111%29.aspx)并对密码进行加盐，尽管您在生成的表中看不到它，更多详细信息可以在[这里](http://www.mikesdotnetting.com/Article/200/The-SimpleMembershipProvider-Secure-Passwords-And-The-Crypto-Helper)找到。这表示您可以使用 ilSpy 轻松检查`WebMatrix.WebData`以[查看](http://ilspy.net/)WebSecurity 类的内部结构。

# maps - 如何在 d3.js 中将地图置于本初子午线以外的位置？

> ID：14985004
> 
> 赞同：1
> 
> 时间：2013-02-20T16:31:58.273
> 
> 标签：maps, d3.js

这是一个与[这个](https://stackoverflow.com/questions/10620862/use-different-center-than-the-prime-meridian-in-plotting-a-world-map)问题（已为 ggplot2 回答）、[此问题（已为 R 回答）类似的问题，并且是](https://stackoverflow.com/questions/5353184/fixing-maps-library-data-for-pacific-centred-0-360-longitude-display)[此](https://stackoverflow.com/questions/14909054/zooming-and-panning-a-mercator-map-centered-on-the-pacific-using-d3-js)问题的后续问题（仍在寻找答案）。

我如何使用 Mike Bostock ( [http://bl.ocks.org/mbostock/4987520](http://bl.ocks.org/mbostock/4987520) ) 最近的这个受限缩放图，但将太平洋的起始位置放在中心而不是非洲？

像这样... ![在此处输入图像描述](../Images/10ec476182f0dbc5e2ec7627453b38fb.png)

显然，只需调整`.translate([0, 0])`代码中的值即可移动地图，但没有“包装”可以让地图如上所示。

我坚信必须有一种简单的方法来实现这一点，因为这似乎是一项基本能力，我只是看不到或找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:24:48.933

好的，最后答案很明显，非常感谢[Hashbang](http://hashbang.co.nz/blog/2013/2/25/d3_js_geo_fun)的人，他们的帖子让我走上了正确的道路。

我遇到的问题是假设我需要使用该`.translate()`函数将地图移动到正确的位置，而实际上该`.translate()`函数只是移动返回地图上的点。因此，换句话说，它将您所拥有的内容翻译到另一个位置（呃！）。

我应该做的是使用该`.rotate`函数通过使用这样的函数来围绕其经度旋转地图；

```
var projection = d3.geo.mercator()
    .translate([0, 0])
    .scale(width)
    .rotate([-180,0]); 
```

这只是简单地将地图包裹起来并根据需要提供完全控制。一个功能齐全的例子是[here](http://bl.ocks.org/d3noob/5036788)。

# facebook - 陌生人帐户的 Facebook access_token

> ID：14985011
> 
> 赞同：0
> 
> 时间：2013-02-20T16:32:10.567
> 
> 标签：facebook, facebook-graph-api

有没有办法`access_token`得到一个陌生人帐户的照片、相册和朋友？正如我所看到的，您可以使用以下方式获取（使用正确的`access_token`）属于您和您的朋友的所有信息：

```
https://graph.facebook.com/[User_ID]/friends?access_token=[A_T]
https://graph.facebook.com/[User_ID]/albums?access_token=[A_T]
https://graph.facebook.com/[User_ID]/photos?access_token=[A_T] 
```

你朋友的朋友和完全陌生的朋友呢？他们可以通过这种方式到达吗？

我问这个是因为使用普通浏览器我可以获取非好友帐户的公开照片，所以我认为这可以成为通过 API 获取该信息的一种方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:39:14.633

这是不可能的，facebook的隐私是严密的才能做这样的事情。

# typeahead - Bootstrap typeahead 结果进入一个div，可能吗？

> ID：14985026
> 
> 赞同：6
> 
> 时间：2013-02-20T16:32:48.230
> 
> 标签：typeahead, bootstrap-typeahead

我正在尝试将预先输入的结果放入我页面上的特定 div 中。我得到了 JSON 回调数据，但我不知道如何使用它来填充特定的 div。process 函数具有列出结果的唯一效果，无论它需要多长，就在搜索字段下方。

这是我的代码，你知道如何利用回调数据来填充特定的 div 吗？

```
$('#search').typeahead({
          source: function(query, process) {
              $.ajax({
                  url: '/action/search.php?action=autocomplete',
                  type: 'POST',
                  data: 'query=' + query,
                  dataType: 'JSON',
                  async: true,
                  success: function(data) {
                      //process(data);
                  },
                  minLength: 1
              });
          }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-06T02:13:11.627

实际上有一种非常简单的方法可以将结果放入特定的页面元素中，但是，我不确定它是否实际记录在案。

搜索源代码显示`menu`可以传入该选项，这似乎是为了让您可以定义包装菜单元素的外观，但是您可以传入一个选择器，它将使用它作为目标.

给定 html 片段：

```
<input id='#typeahead' type='text'>

<h2>Results</h2>
<ul id="typeahead-target"></ul> 
```

您可以使用以下内容使结果出现在`ul`元素中：

```
$('#typeahead').typeahead({menu: '#typeahead-target'}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T06:30:33.457

我有确切的问题。我已经写了关于相同的详细文章。

浏览文章：[http ://www.wrapcode.com/bootstrap/typeahead-json-objects/](http://www.wrapcode.com/bootstrap/typeahead-json-objects/)

当您单击搜索查询结果中的特定结果时。您可以使用更新器函数使用选定的 JSON 对象值填充数据。

```
$("#typeahead").typeahead({
   updater: function(item){
   //logic on selected item here.. e.g. append it to div in html
   return item;
   }
}); 
```

使用此功能：

```
$("#typeahead").typeahead({
    source: function (query, process) {
        var jsonObj = //PARSED JSON DATA 
        states = [];
        map = {};

        $.each(jsonObj, function (i, state) {
            map[state.KeyName] = state;
            states.push(state.KeyName); //from JSON Key value pair e.g. Name: "Rahul", 'Name' is key in this case
        });

        process(states);
    },
    updater:function (item) {
        $('#divID').html(" " + map[item].KeyName); //from JSON Key value pair

        return item;
        // set more fields

    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-10T14:58:03.663

首先创建名为 .hide {display:none;} 的 css 类

```
$(typeahead class or id name).typeahead(
        {
            hint: false,
            highlight: true,
            minLength: 1,
            classNames: {
                menu: 'hide' // add class name to menu so default dropdown does not show
            }
        },{
            name: 'names',
            display: 'name',
            source: names,
            templates: {
                suggestion: function (hints) {
                    return hints.name;
                }
            }
        }
    );
    $(typeahead class or id name).on('typeahead:render', function (e, datum) 
    {
       //empty suggestion div that you going to display all your result
        $(suggestion div id or class name').empty();
        var suggestions = Array.prototype.slice.call(arguments, 1);
        if(suggestions.length){
            for(var i = 0; i < suggestions.length; i++){
                $('#result').append(liveSearch.template(
                    suggestions[i].name,
                    suggestions[i].id));
            }
        }else{
            $('#result').append('<div><h1>Nothing found</h1></div>');
        }
    }); 
```

# c++ - C ++全局变量与局部变量作为链表中的标题

> ID：14985029
> 
> 赞同：0
> 
> 时间：2013-02-20T16:33:03.857
> 
> 标签：c++, linked-list

我最近一直在尝试学习 C/C++。我已经编写了一个简单的链表程序，它应该可以工作并且它实际上可以工作，但只有当链表的标题（`node* mother`）是一个全局变量并且不用作函数（`void new_node(int number)`）的参数时 - 这个函数是一个构造函数（我我使用 C 语法）。

下面的这个程序工作正常，但我不能创建多个链表：

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>

using namespace std;

struct node {
    node * next;
    int number;
};

node * mother = NULL;

void new_node(int number)
{
    node * newNode = (node*) malloc(sizeof(node));

    newNode -> next = NULL;
    newNode -> number = number;

    if (mother == NULL){
        mother = newNode;
    }
    else{
        node* temp = mother;
        while(temp->next != NULL){
            temp = temp->next;
        }
        temp->next = newNode;
    }
}

void destroy(){
    node* ntemp = mother;
    mother = NULL;
    node* t;

    while(ntemp != NULL){
        t = ntemp->next;
        free(ntemp);
        ntemp = t;
    }
}

void printAll(){
    node *tmp;
    tmp = mother;
    while (tmp != NULL){
        cout <<"value is : " << tmp->number <<endl;
        tmp = tmp->next;
    }

}

int main()
{
    cout <<"size is " << sizeof(node*) <<endl;

    new_node(5);
    new_node(17);
    new_node(-54);
    new_node(3);
    new_node(4);
    new_node(-24);
    new_node(10);
    printAll();
    return 0;
} 
```

* * *

但是，如果我将`node* mother`其用作 function 的参数`new_node`，则它不起作用-它仅打印节点的大小：

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>

using namespace std;

struct node {
    node * next;
    int number;
};

void new_node(node* mother, int number){
    node * newNode = (node*) malloc(sizeof(node));

    newNode -> next = NULL;
    newNode -> number = number;

    if (mother == NULL){
        mother = newNode;
    }
    else{
        node* temp = mother;
        while(temp->next != NULL){
            temp = temp->next;
        }
        temp->next = newNode;
    }
}

void destroy(node * mother){
    node* ntemp = mother;
    mother = NULL;
    node* t;

    while(ntemp != NULL){
        t = ntemp->next;
        free(ntemp);
        ntemp = t;
    }
}

void printAll(node * mother){
    node *tmp;
    tmp = mother;
    while (tmp != NULL){
        cout <<"value is : " << tmp->number <<endl;
        tmp = tmp->next;
    }

}

int main()
{
node * mother = NULL;

    cout <<"size is " << sizeof(node*) <<endl;

    new_node(mother, 5);
    new_node(mother, 17);
    new_node(mother, -54);
    new_node(mother, 3);
    new_node(mother, 4);
    new_node(mother, -24);
    new_node(mother, 10);
    printAll(mother);
    return 0;
} 
```

* * *

**第一个程序的输出：**

```
size is 8
value is : 5
value is : 17
value is : -54
value is : 3
value is : 4
value is : -24
value is : 10 
```

* * *

**第二个程序的输出：**

```
size is 8 
```

**问题是，为什么这个程序的行为如此不同？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:40:37.380

那是因为当你`mother`在这一行中设置时：

```
mother = newNode; 
```

在您的`new_node`函数中，它设置 的本地副本`mother`，而不是您传入的变量。

您将需要使用引用`node * &mother`或双指针`node ** mother`才能在`mother`传入原始文件时对其进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:47:07.990

尝试将 new_node 更改为此：

```
void new_node(node** mother, int number){
    node * newNode = (node*) malloc(sizeof(node));

    newNode -> next = NULL;
    newNode -> number = number;

    if (*mother == NULL){
        *mother = newNode;
    }
    else{
        node* temp = *mother;
        while(temp->next != NULL){
            temp = temp->next;
        }
        temp->next = newNode;
    }
} 
```

主要是：

```
int main()
{
node * mother = NULL;

    cout <<"size is " << sizeof(node*) <<endl;

    new_node(&mother, 5);
    new_node(&mother, 17);
    new_node(&mother, -54);
    new_node(&mother, 3);
    new_node(&mother, 4);
    new_node(&mother, -24);
    new_node(&mother, 10);
    printAll(mother);
    return 0;
} 
```

您应该在`new_node`函数中将指针传递给指向节点的指针，否则只有`mother`指针的副本会在`new_node`函数中更改，而`mother`在 main 中将是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:55:28.710

问题是在名为“new_node”的函数内部，您只使用指针的副本。因此函数退出后不会保存更改。要允许在函数内部修改指针而不是其副本，您应该使用以下函数声明：

`void new_node(node*& mother, int number)`

这是使您的第二个程序工作的唯一更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:01:35.113

每次调用`new_node()`时都会创建一个本地副本`mother`，并且在函数退出时对其所做的任何更改都会丢失。这就是为什么您的列表永远不会被创建的原因。

最简单的解决方法是简单地更改

```
void new_node(node* mother, int number) 
```

到

```
void new_node(node* &mother, int number) // pass-by-reference - Google it! 
```

你会得到你想要的结果。为什么？`&`in告诉编译器`node* &mother`您希望函数使用`mother`您传入的实际变量，而不是它的副本。

# c - 为什么不声明像 const 这样的矩阵就无法编译

> ID：14985030
> 
> 赞同：2
> 
> 时间：2013-02-20T16:33:06.023
> 
> 标签：c, vector, matrix, constants

我的疑问是：为什么在这段代码中：

```
/*Asignacion de valores en arreglos bidimensionales*/
#include <stdio.h>

/*Prototipos de funciones*/
void imprimir_arreglo( const int a[2][3] );

/*Inicia la ejecucion del programa*/
int main()
{
  int arreglo1[2][3] = { { 1, 2, 3 }, 
                     { 4, 5, 6 } };                         
  int arreglo2[2][3] = { 1, 2, 3, 4, 5 };
  int arreglo3[2][3] = { { 1, 2 }, { 4 } };

  printf( "Los valores en el arreglo 1 de 2 filas y 3 columnas son:\n" );
  imprimir_arreglo( arreglo1 );

  printf( "Los valores en el arreglo 2 de 2 filas y 3 columnas son:\n" );
  imprimir_arreglo( arreglo2 );

  printf( "Los valores en el arreglo 3 de 2 filas y 3 columnas son:\n" );
  imprimir_arreglo( arreglo3 );

  return 0;
}  /*Fin de main*/

/*Definiciones de funciones*/
void imprimir_arreglo( const int a[2][3] )
{
  int i;  /*Contador filas*/
  int j;  /*Contador columnas*/

  for (i = 0; i <=1; i++)
  {
    for (j = 0; j <= 2; j++)
    {
      printf( "%d ", a[i][j] );
    }

    printf( "\n" );
  }
} /*Fin de funcion imprime_arreglo*/ 
```

如果不声明 const 之类的矩阵变量，我就无法编译，而在向量中我可以...为什么会发生这种行为？对不起，如果我的英语不好，我会说西班牙语。我会非常感谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:38:52.587

从

```
void imprimir_arreglo( const int a[2][3] ); 
```

和

```
void imprimir_arreglo( const int a[2][3] )
{ 
```

并且您的代码将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:37:13.647

这个话题真的很乱。您不应该对间接指针使用常量修饰符，例如`const int**`，因为可能会出现混乱，例如：

1.  `int **`值是不能修改的吗？

2.  或者，它是一个指针（甚至是数组）`const int *`吗？

C-faq 上有一个[关于它的话题](http://c-faq.com/ansi/constmismatch.html)。

例子：

```
const int a = 10;
int *b;
const int **c = &b; /* should not be possible, gcc throw warning only */
*c = &a;
*b = 11;            /* changing the value of `a`! */
printf("%d\n", a); 
```

它不应该允许改变`a`'s 的值，`gcc`允许，并`clang`在警告下运行，但不改变值。

因此，我不确定为什么编译器（尝试使用`gcc`and `clang`）抱怨（带有警告，但有效）关于`const T[][x]`，因为它与上面的不*完全相同*。但是，一般来说，我可能会说这种问题会根据您的编译器（如`gcc`和`clang`）以不同的方式解决，所以**永远不要使用`const T[][x]`**！

在我看来，最好的选择是使用直接指针：

```
void imprimir_arreglo( const int *a, int nrows, int ncols )
{
  int i;  /*Contador filas*/
  int j;  /*Contador columnas*/

  for (i = 0; i < nrows; i++)
  {
    for (j = 0; j < ncols; j++)
    {
      printf( "%d ", *(a + i * ncols + j) );
    }

    printf( "\n" );
  }
} 
```

并致电：

```
imprimir_arreglo( arreglo1[0], 2, 3 ); 
```

这样，您的功能就更加动态和便携。

# bash - 运行 cron bash 脚本时的环境问题

> ID：14985035
> 
> 赞同：4
> 
> 时间：2013-02-20T16:33:23.897
> 
> 标签：bash, cron

我有一份由 cron 执行的夜间报告，其中包含以下几行：

```
PRINTFX="/usr/bin/printf"
<snip>
${PRINTFX} "%-11s %-11s %'d\n" ${F1} ${F2} ${F3} 
```

crontab 条目：

```
[ca-adm@homwpspect01 ~]$ crontab -l
55      01      *       *       *       /usr/local/sbin/CRONSQLEvents 
```

我的问题是，如果我以 root 身份手动运行它（即使用我的登录环境设置），我会得到这个 [CORRECT] 输出：

```
Date        Event       Count
2013-02-19  0x00010802  516,616
2013-02-19  0x00010D66  351,840
2013-02-19  0x00010D67  351,533 
```

当 cron 作为另一个用户运行时，我得到 [InCorrect]：

```
Date        Event       Count
2013-02-19  0x00010802  516616
2013-02-19  0x00010D66  351840
2013-02-19  0x00010D67  351533 
```

如果它由 cron 运行，则数字输出中缺少逗号。我记得读过一些关于 printf 的使用模棱两可的东西，因为有一个 bash 内部函数，但 /usr/bin 中也有一个外部函数：

```
[root@homwpspect01 sbin]# which printf
printf is a shell builtin
printf is /usr/bin/printf 
```

有人能告诉我如何避免 cron 与登录执行的这个问题吗？特别是考虑到我无论如何都在脚本中指定 /usr/bin/printf ？

在此先感谢，唐

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:40:15.813

打印数字的格式`%'d`取决于当前的语言环境，而不是（必然）`printf`您使用的命令。

如果您的脚本与您向我们展示的一样，那么您正在调用`/usr/bin/printf`.

在我的系统上：

```
$ echo $LANG
en_US.UTF-8
$ printf "%'d\n" 123456
123,456
$ /usr/bin/printf "%'d\n" 123456
123,456
$ LANG=C printf "%'d\n" 123456
123456
$ LANG=C /usr/bin/printf "%'d\n" 123456
123456
$ 
```

Bash 的内置`printf`和`/usr/bin/printf`（来自 GNU Coreutils）的行为一致。

您可能需要`$LANG`在脚本中进行设置以获得您想要的行为。

该`%'d`格式记录在[GNU libc 手册](http://www.gnu.org/software/libc/manual/html_node/Integer-Conversions.html)中：

> `'`
> 
> 根据为类别指定的区域设置将数字分成组`LC_NUMERIC`；**注意通用数字::*。这个标志是一个 GNU 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:08:23.103

因此，为了使其正常工作，我将在脚本中添加这一行：

```
export LANG=en_US.UTF-8
PRINTFX="/usr/bin/printf"
<snip>
${PRINTFX} "%-11s %-11s %'d\n" ${F1} ${F2} ${F3} 
```

# delphi - Delphi：如何确定和清空 TDatetime 值

> ID：14985037
> 
> 赞同：18
> 
> 时间：2013-02-20T16:33:29.923
> 
> 标签：delphi, datetime, null, unassigned-variable

似乎没有办法将*NULL*（或者“*未分配的值*”）分配给`TDateTime`变量。

我想象的唯一方法是使用这样的东西：

```
function isNull(aDate : TDateTime) : boolean;
const NullDate = 0.0;
var aNullDate : TDatetime;
    ms : Int64;
begin
  aNullDate := NullDate;
  ms := MilliSecondsBetween(aDate,aNullDate);
  result := (ms = Int64(0));
end; 
```

有没有人知道更好的解决方案什么不重叠 0 日期值？

负值`TDateTime`危险吗？（作为先前目的的有效资源）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-20T16:44:38.233

正如 Andreas 已经写的那样，该[`TDateTime`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.TDateTime)类型实际上是“可空的`double`”，因此不是“可空的”。我用

```
const
  c_UnassignedDate = -693594; 
```

对于空日期值，因为这表示不可能的日期`00/00/0000`。但是例如 DevExpress 使用

```
NullDate = -700000;
InvalidDate = NullDate + 1; 
```

所以似乎没有一致的标准vale，你应该选择一个适合你需要的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-20T16:35:26.237

首先，您需要定义“空`TDateTime`值”的含义。

一个`TDateTime`值是一个双精度值，日期编码在整数部分，时间编码在小数部分。因此，您可以获得的最接近“空日期”的可能是`0`.

因此，只需测试`ADate <> 0`以测试日期是否为“空”。

但要注意：如果你声明一个`TDateTime`局部变量，那么它不一定是`=0`在你给它一个值之前。它可以是任何东西。当然，同样的事情也适用于`integer`, `double`, `boolean`, ...类型的变量

另外，我相信`TDateTime`带有值`0`的 a 编码日期 1899-12-30。

最后，负值`TDateTime`是完全正常的。例如，`-5000`对应于`1886-04-22`。

我不太明白你的代码的重点。如果您想`0`用作“未分配”值（如果您对接近 1899-12-30 的日期感兴趣，这很糟糕），为什么不简单地做

```
function IsUnassigned(ADate: TDateTime): boolean;
begin
  result := ADate = 0;
end; 
```

或者，可能（但不等同！），

```
function IsUnassigned(ADate: TDateTime): boolean;
begin
  result := IsZero(Date);
end; 
```

在他的回答中，ain 为“未分配的日期”值提供了几个更合理的选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-23T10:59:43.017

在`Spring.Persistence.Core.Session.pas`库*Spring Framework for Delphi* ( [http://www.spring4d.org](http://www.spring4d.org) ) 的单元中`TSession.ExecuteScalar<T>`，在结果使用值为 NULL 的情况下的方法中`Default(T);`

我认为，您的功能可能看起来像

```
function IsNull(ADate: TDateTime): Boolean;
begin
  Result := ADate = Default(TDateTime);
end; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-24T12:03:10.600

使用 PDateTime 代替 TDateTime，并作为 nil 值发送。如果没有指向值的指针，则没有值。

要检查值，请使用 Assigned ptr ：

```
MyDatePointer := nil;
if ( Assigned(MyDatePointer)) then ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-03T14:44:16.803

tDateTime 对于 0 和 -1 之间的值是未定义的，这意味着 -0.5 的 tDateTime 是未定义的值，并且对于作为 NaN 的替代方法的空日期很有用。DateTimeToString 将显示 -0.5 与 +0.5 相同；

# javascript - Marionette - 应用程序和模块之间的关系

> ID：14985043
> 
> 赞同：8
> 
> 时间：2013-02-20T16:33:45.143
> 
> 标签：javascript, backbone.js, marionette

我们目前正在构建一个基于 Marionette 的应用程序。基本上，我们有一个 Marionette 应用程序，其中定义了多个区域。每个区域将充当不同模块的容器以显示其视图。我希望每个模块都可以完全控制其容器中显示的内容，但我希望应用程序分配这些区域。为简单起见，假设每个模块只有一个简单的 ItemView。

我正在考虑使用模块视图填充这些区域的 2 种方法。

**第一种方法**说，当每个模块初始化时，它会创建它的视图，并调用应用程序在指定区域显示它的视图，例如：

```
var app = new Marionette.Application();
app.addRegions({
    regionA: "#regionA",
    regionB: "#regionB"
});

app.module("moduleA", function(moduleA, app, ...){
    moduleA.on("start", function(){
        var viewA = new MyViewA();
        app.regionA.show(viewA);
    }
});

app.module("moduleB", function(moduleB, app, ...){
    moduleB.on("start", function(){
        var viewB = new MyViewB();
        app.regionB.show(viewB);
    }
}); 
```

**第二种方法**说每个模块都应该公开一些返回其视图的函数。应用程序将在准备好时调用该函数，并将视图粘贴在指定区域中。

我不确定哪种方法更好，并且很乐意听取意见。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T23:14:01.633

我肯定会采用第二种方法，在过去采用第一种方法之后，我现在遇到了这种方法的局限性并转向第二种方法。[我在这里](http://martinholman.co.nz/blog/2013/02/03/backbone-dot-marionette-anti-pattern/)写了一篇关于它的博客文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:24:39.203

这取决于您采用哪种方法，两者都很好，我们选择第二个选项，因为我们使用 require.js 来动态加载我们的模块。

```
 var dashboardPage = Backbone.Marionette.Layout.extend({

      template: Handlebars.compile(tmpl),

      regions: {
        graphWidget     : "#graphWidget",
        datePickerWidget: "#datePickerWidget",
        searchWidget    : "#searchWidget"
      },

      widget: {
          graphWidget: null,
          datePickerWidget: null,
          searchWidget: null,
      },

 initialize: function(options){

        this.someId= options.someId;

        //if have someId ID - fetch model;        
        if(this.someId){
            //fetch model if campaignId not null
            this.modelAjax = this.model.fetch();
         }

      onShow: function() {
          var that = this;

          if(this.modelAjax){
            this.modelAjax.done(function(){

                that.widget.graphWidget= new graphWidget(graphWidgetOptions);
                that.listenTo(that.widget.graphWidget, 'graphWidget', that.getGraphWidgetData, that);
                ....
                that.graphWidget.show(that.widget.graphWidget);
                that.datePickerWidget.show(that.widget.datePickerWidget); 
```

# javascript - html正文中的Javascript函数，不起作用

> ID：14985047
> 
> 赞同：-2
> 
> 时间：2013-02-20T16:33:58.833
> 
> 标签：javascript, html

在我的文档中，我在此示例中给出了一个 onLoad 函数：

```
<body onLoad="display()"> 
```

此外，我在文档末尾添加了一个函数，它改变了一些 CSS 属性：

```
<script>
window.onload = foo(), bar();
</script> 
```

不知何故，整个事情都不起作用！我试图在文档末尾添加所有功能，但我不明白，不知何故它们不会触发！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:37:06.347

在第一种情况下，我看不出它不应该工作的原因，只要`display()`定义的函数没有错误。

在第二种情况下，当通过 DOM 分配事件处理程序时，您需要传递函数引用（即，而不是`foo()`just `foo`）或将其包装在匿名函数中，如下所示：

```
window.onload = function() {
  foo();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T16:37:20.320

这将调用函数，但它不会分配任何有用的东西，`window.onload`除非你的最后一个函数恰好返回一个函数。

您需要分配一个函数，该函数将在准备好`window.onload`时调用您的函数。`window`

```
window.onload = function() {
    foo();
    bar();
}; 
```

另外，由于您将脚本放在底部，因此您可能不需要`window.onload`.

```
 <script>
        foo(); bar();
    </script>
</body> 
```

* * *

您还应该知道，直接分配给`window.onload`将覆盖在 中分配的脚本`<body onLoad=...>`，因此您不应该两者都做。目前， 的返回值`bar();`正在清除调用 的函数`display();`。

摆脱`window.onload`分配将解决这个问题。

# php - 如何将 URL 重定向到父 iframe

> ID：14985048
> 
> 赞同：3
> 
> 时间：2013-02-20T16:34:05.573
> 
> 标签：php, javascript

当我使用此（php）禁止他进入我的聊天框时，我试图重定向我页面的用户：

```
header("location: index.php");
exit; 
```

问题是**index.php**页面在已连接用户部分内打开，在本例中是在`div`. 如何重定向用户的主页？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T03:53:58.597

在 javascript 代码中试试这个：

```
window.top.location.href = "http://www.site.com"; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T03:35:33.567

这是使用javascript的答案：

```
window.parent.location = "http://www.example.com/index.php"; 
```

# android - Android从SDcard解析XML关于特殊标签

> ID：14985051
> 
> 赞同：0
> 
> 时间：2013-02-20T16:34:16.307
> 
> 标签：android, android-xml, android-parser

我通过解析一个 xml 文件遇到了一个小问题，该文件位于我的智能手机的 sdcard 上。

xml结构看起来像：

```
....
<nd ref="1364745028"/> 
<nd ref="1364745137"/> 
<nd ref="2121048622"/> 
<nd ref="2121048651"/> 
<tag v="forest" k="landuse"/> 
</way> 
-<way id="25089587"> 
<nd ref="273065498"/> 
<nd ref="273065777"/> 
<nd ref="1882290182"/> 
<nd ref="1882290194"/>
.... 
```

我特别想要“森林”的价值。我怎样才能获得价值？我目前的代码如下：

```
....
try {
   File root = android.os.Enviroment.getExternalStorageDirectory();
   Document document = builder.parse(new FileInputStream(root.getAbsolutePath() + "/xmls/xapi.xml");

NodeList tag = document.getElementsByTagName("tag");
for(int i = 0; i < tag.getLength(); i++) {
  Element element = (Element) tag.item(i);
  NodeList value = element.getElementsByTagName("k");
  Element line = (Element) value.item(0);
  parameter.setText(line.getTextContent());
}
}catch(SAXException e) {
....
}catch(IOException e) {
....
} 
```

当我单击一个按钮时，应用程序崩溃了，其中 onlick-method 是这些 try-catch 块。任何人的想法，如何解决它？提前致谢。

**EDIT1** 错误信息

```
02-20 17:54:42.495: E/AndroidRuntime(12627): FATAL EXCEPTION: main
02-20 17:54:42.495: E/AndroidRuntime(12627): java.lang.IllegalStateException: Could not execute method of the activity
02-20 17:54:42.495: E/AndroidRuntime(12627):    at android.view.View$1.onClick(View.java:3100)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at android.view.View.performClick(View.java:3627)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at android.view.View$PerformClick.run(View.java:14329)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at android.os.Handler.handleCallback(Handler.java:605)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at android.os.Looper.loop(Looper.java:137)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at android.app.ActivityThread.main(ActivityThread.java:4511)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at java.lang.reflect.Method.invokeNative(Native Method)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at java.lang.reflect.Method.invoke(Method.java:511)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at dalvik.system.NativeStart.main(Native Method)
02-20 17:54:42.495: E/AndroidRuntime(12627): Caused by: java.lang.reflect.InvocationTargetException
02-20 17:54:42.495: E/AndroidRuntime(12627):    at java.lang.reflect.Method.invokeNative(Native Method)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at java.lang.reflect.Method.invoke(Method.java:511)
02-20 17:54:42.495: E/AndroidRuntime(12627):    at android.view.View$1.onClick(View.java:3095)
02-20 17:54:42.495: E/AndroidRuntime(12627):    ... 11 more
02-20 17:54:42.495: E/AndroidRuntime(12627): Caused by: java.lang.NullPointerException
02-20 17:54:42.495: E/AndroidRuntime(12627):    at com.example.parsexml.MainActivity.ReadXMLFromSD(MainActivity.java:116)
02-20 17:54:42.495: E/AndroidRuntime(12627):    ... 14 more 
```

# symfony - 复合外键 symfony2 yml

> ID：14985054
> 
> 赞同：0
> 
> 时间：2013-02-20T16:34:30.660
> 
> 标签：symfony, model, doctrine, foreign-keys

我正在尝试使用正确的解决方案从 symfony2 中的 yml 生成我的实体。

这是YML中的部分代码：

```
 oneToMany:
    actions:
      targetEntity: Action
      mappedBy: testcaseid
  lifecycleCallbacks: {  } 
```

我正在寻找一种将复合键放入其中的方法

```
mappedBy:testcaseid,revision 
```

但它现在不起作用，我没有正确的语法，无法在网上找到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:04:11.647

事实上，我只是自己找到了答案。

在 manyToOne 端生成复合 pk。

学说可能遇到的另一个问题是使用复合键生成杂物......

# sql - 除数为0时出现sql报错“遇到除零错误”

> ID：14985067
> 
> 赞同：-1
> 
> 时间：2013-02-20T16:35:10.750
> 
> 标签：sql

我有一个错误出现“遇到除以零错误”。在 SQL Server 2005 中。我知道我有几行被零除，导致此错误。所以我想知道当除数为零时是否可以消除这个错误。如果除数为 0，它应该返回 0。我该怎么做？

```
sum(isnull(cast(S.S_AmountCollected as numeric(10, 2)), 0)) / sum(isnull(cast(S.AmountSold as numeric(10, 2)), 0)) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:36:42.640

使用 CASE 语句：

```
CASE WHEN SUM(ISNULL(CAST(S.AmountSold as numeric(10, 2)), 0) = 0
        THEN 0
      ELSE 
        SUM(ISNULL(CAST(S.S_AmountCollected as numeric(10, 2)), 0)) 
           / 
        SUM(ISNULL(CAST(S.AmountSold as numeric(10, 2)), 0))
     END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:37:09.937

您无法消除此错误，因为整数除以 0 具有未定义的值。您必须添加显式检查才能获得您期望的行为。

# vb.net - 如何从字符串字符返回 unicode 8 字节值

> ID：14985071
> 
> 赞同：0
> 
> 时间：2013-02-20T16:35:17.030
> 
> 标签：vb.net, unicode

我正在尝试返回通常不是英语的字符串字符的 2 字节 WORD 十六进制值。基本上是Unicode表示。使用 vb.net

前任：

FF5F = ((

FF06 = &

这些在 unicode 标准 6.2 中表示。我无法显示此集中显示的某些外语字符。

所以希望我的字符串字符转换为这个 2 字节值。我无法在 .net 中找到执行此操作的函数。

该代码目前只不过是一个循环遍历字符串字符的 for 循环，因此没有示例进度。

我试过 AscW 和 ChrW 函数，但它们不返回 2byte 值。ASCII 在 255 以上似乎不可靠。

如有必要，我可以隔离正在测试的可能语言，以便通过比较只考虑一种语言，尽管始终可以使用英文字符。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:40:50.063

我认为您可以将字符串转换为字节数组，在 C# 中看起来像这样：

```
static byte[] GetBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
} 
```

从那里你可以从数组中抓取两个第一个字节，然后你就拥有了它们。

如果您想在屏幕上显示它们，我想您应该将它们转换为十六进制或某种可显示的格式。

我从这里的[问题](https://stackoverflow.com/questions/472906/net-string-to-byte-array-c-sharp)中偷了这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:39:41.597

一位同事协助制定了解决方案。字符串的每个字符都先转换为字符数组，再转换为无符号整数，再转换为十六进制。

```
lt = myString
Dim sChars() As Char = lt.ToCharArray

For Each c As Char In sChars
     Dim intVal As UInteger = AscW(c)
     Debug.Print(c & "=" & Hex(intVal))
Next 
```

Note the AscW function... AscW returns the Unicode code point for the input character. This can be 0 through 65535\. The returned value is independent of the culture and code page settings for the current thread. [http://msdn.microsoft.com/en-us/library/zew1e4wc(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/zew1e4wc(v=vs.90).aspx)

I then compare the resulting Hex to the spec for reporting.

# android - 为什么要使用绑定服务？

> ID：14985077
> 
> 赞同：5
> 
> 时间：2013-02-20T16:35:31.727
> 
> 标签：android, android-service

对于应用程序和服务之间的通信，我为什么要使用绑定服务而不是在 Intent 中发送数据：

```
mServiceIntent = new Intent(getActivity(), RSSPullService.class);
mServiceIntent.setData(Uri.parse(dataUrl)); 
```

我读到“如果服务已经在运行，它将再次使用 onStartCommand() 调用，以传递新的 Intent，但不会创建第二个副本。” 这意味着我可以发送消息以影响服务的进度，这是在 google RandomMusicPlayer 示例中所做的：

```
public void onClick(View target) {
    // Send the correct intent to the MusicService, according to the 
    // button that was clicked
    if (target == mPlayButton)
        startService(new Intent(MusicService.ACTION_PLAY));
    else if (target == mPauseButton)
        startService(new Intent(MusicService.ACTION_PAUSE));
    else if (target == mSkipButton)
        startService(new Intent(MusicService.ACTION_SKIP));
    else if (target == mRewindButton)
        startService(new Intent(MusicService.ACTION_REWIND));
    else if (target == mStopButton)
        startService(new Intent(MusicService.ACTION_STOP));
    else if (target == mEjectButton) {
        showUrlDialog();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:41:34.833

绑定到服务而不是发送异步消息的原因有很多。一个重要的原因是它可以让您更好地控制服务的生命周期。如果您只是发送由服务处理的意图，那么服务很可能会在消息之间消失——丢失任何内部状态。当 Android 寻找可以释放的资源时，绑定服务会受到特殊处理。

另一个不相关的原因是，如果您绑定到进程内服务，您可以将 IBinder 强制转换为已知类并直接调用它的方法。这为服务提供了一个非常丰富（尽管紧密耦合）的接口。使用通过 Intent 传递消息来模拟这种丰富的交互是很困难的。

# c# - 模型状态验证始终使用下拉列表返回 false

> ID：14985079
> 
> 赞同：1
> 
> 时间：2013-02-20T16:35:40.213
> 
> 标签：c#, asp.net-mvc, drop-down-menu

**注意：更新代码以考虑下面的评论和答案。**

在我的 MVC 应用程序中，有时我需要引用其他对象（例如多对多关系或一对多关系）。

所以我有这个模型：

```
public class ObjInfo
    {
        [Required(ErrorMessage = "Obj ID is required.")]
        [Display(Name = "ObjID")]
        public int m_Id { get; set; }

        [Required(ErrorMessage = "Obj Name is required.")]
        [Display(Name = "Obj Name")]
        public string m_Name { get; set; }

        [Display(Name = "Obj Number")]
        public int m_Number { get; set; }

        (...)

        [Required(ErrorMessage = "Other Obj is required.")]
        [Display(Name = "OtherObj")]
        public int m_OtherObjID { get; set; }

        public OtherObjInfo m_OtherObj { get; set; }

        (...)
    } 
```

我也有默认和参数构造函数，可以根据需要显示它们，但我不确定它们是否有问题。反正。

在我的控制器中，我有两个 MVC 方法之后的创建方法：

```
 //
        // GET: /Obj/Create

        public ActionResult Create()
        {
            ViewBag.List = new SelectList(PopulateDDLs(), "OtherObj", "Other obj ID");
            return View();
        }

        //
        // POST: /Obj/Create

        [HttpPost]
        public ActionResult Create(Objinfo obj)
        {
            if (ModelState.IsValid)
            {
                m_ObjManager.CreateObj(obj);
                return RedirectToAction("SearchIndex");
            }

            ViewBag.List = new SelectList(PopulateDDLs(), "OtherObj", "Other obj ID");
            return View(obj);
        } 
```

最后，这是我的“创建”视图的编码方式：

```
@model MyApp.Models.ObjInfo

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>OBJ</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.m_Id)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.m_Id)
            @Html.ValidationMessageFor(model => model.m_Id)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.m_Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.m_Name)
            @Html.ValidationMessageFor(model => model.m_Name)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.m_Number)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.m_Number)
            @Html.ValidationMessageFor(model => model.m_Number)
        </div>

        (...)

        <div class="editor-label">
            @Html.LabelFor(model => model.m_OtherObj , "Other Obj")
        </div>
        <div class="editor-field">
            @Html.DropDownList(model => model.m_OtherObjID, ViewBag.List as SelectList, "--- Select Other Obj ---", new {@class = "OtherObjInfo "})
            @Html.ValidationMessageFor(model => model.m_OtherObj)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

基本上，问题是每次我单击“创建”按钮时，即使在下拉列表中选择了某些内容，ModelState 验证对于 OtherObj 始终为假。除了这个之外，其他所有值都是正确的。

我不明白为什么，我将非常感谢您对此的帮助，谢谢您的帮助！

****代码编辑后******

 **现在，当我进入“创建”视图时，我遇到了崩溃：

```
DataBinding: 'System.String' does not contain a property with the name 'OtherObj'. 
```

正好在我的 dropdownlistfor 所在的行上。

datavalueField 和 dataTextField 应该指的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:44:13.163

添加`otherObjectId`到您的模型

```
public class ObjInfo
{
    public int m_Id { get; set; }

    ...

    [Required(ErrorMessage = "Other Obj is required.")]
    [Display(Name = "OtherObj")]
    public int otherObjectId { get; set; }

    public OtherObjInfo m_OtherObj { get; set; }

    ...

} 
```

控制器

```
public ActionResult Create()
{
    ViewBag.List = new SelectList(PopulateDDLs(), "Id", "Name"); 
    return View();
}

[HttpPost]
public ActionResult Create(Objinfo obj)
{
    if (ModelState.IsValid)
    {
        m_ObjManager.CreateObj(obj);
        return RedirectToAction("SearchIndex");
    }

    ViewBag.List = new SelectList(PopulateDDLs(), "Id", "Name"); 
    return View(obj);
} 
```

看法

```
<div class="editor-label">
    @Html.LabelFor(model => model.m_OtherObj , "Other Obj")
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.otherObjectId, ViewBag.List as SelectList, "--- Select Category ---", new { @class = "some_class" })
    @Html.ValidationMessageFor(model => model.m_OtherObj)
</div> 
```

更好的方法是使用强类型助手。除了下拉列表之外，您所有的助手都是`strongly-typed`（editorfor、textboxfor、dropdownlistfor、...）。

如果你想将 DDL 值绑定到你的模型，你应该使用`dropdownlistfor`而不是`dropdownlist`.

您的模型状态无效，因为您没有将所需的值作为 DDL 绑定到模型。**

# c# - 将图像大小调整为字节数组

> ID：14985080
> 
> 赞同：0
> 
> 时间：2013-02-20T16:35:40.790
> 
> 标签：c#, file-upload, bytearray, image-resizing

我目前正在尝试将图像大小调整为缩略图，以便在上传完成后显示为预览。我正在使用 Fineuploader 插件来上传图片的部分。我一直收到“参数无效”。我看过很多与此相关的帖子，并尝试了大部分解决方案，但没有成功。这是代码片段：

```
 public static byte[] CreateThumbnail(byte[] PassedImage, int LargestSide)  
    {  
        byte[] ReturnedThumbnail = null;  

        using (MemoryStream StartMemoryStream = new MemoryStream(),  
                            NewMemoryStream = new MemoryStream())  
        {  
            StartMemoryStream.Write(PassedImage, 0, PassedImage.Length); //error being fire in this line 

            System.Drawing.Bitmap startBitmap = new Bitmap(StartMemoryStream);  

            int newHeight;  
            int newWidth;  
            double HW_ratio;  
            if (startBitmap.Height > startBitmap.Width)  
            {  
                newHeight = LargestSide;  
                HW_ratio = (double)((double)LargestSide / (double)startBitmap.Height);  
                newWidth = (int)(HW_ratio * (double)startBitmap.Width);  
            }  
            else 
            {  
                newWidth = LargestSide;  
                HW_ratio = (double)((double)LargestSide / (double)startBitmap.Width);  
                newHeight = (int)(HW_ratio * (double)startBitmap.Height);  
            }  

            System.Drawing.Bitmap newBitmap = new Bitmap(newWidth, newHeight);  

            newBitmap = ResizeImage(startBitmap, newWidth, newHeight);  

            newBitmap.Save(NewMemoryStream, System.Drawing.Imaging.ImageFormat.Jpeg);  

            ReturnedThumbnail = NewMemoryStream.ToArray(); 
        }  

        return ReturnedThumbnail;  
    } 
```

我没有想法，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:40:15.070

您的错误在该`new Bitmap(startMemoryStream)`行中，而不是在上面的行中。

该[文档](http://msdn.microsoft.com/en-us/library/z7ha67kw.aspx)指出，在以下情况下可能会发生此异常：

> 流不包含图像数据或为空。
> 
> -或者-
> 
> 流包含单个尺寸大于 65,535 像素的 PNG 图像文件。

您应该检查其中是否有有效的 PNG 文件。例如，将其写入文件并尝试在图像查看器中打开它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-30T14:47:14.233

该代码很危险 - System.Drawing 类的每个实例都**必须**放在 using(){} 子句中。

`ImageResizer`这是使用NuGet 包并安全地调整图像大小的替代解决方案。

```
var ms = new MemoryStream();
ImageResizer.Current.Build(PassedImage, ms, new ResizeSettings(){MaxWidth=LargestSide, MaxHeight=LargestSide});
return ImageResizer.ExtensionMethods.StreamExtensions.CopyToBytes(ms); 
```

# loops - 需要循环处理批处理文件中的无限字符

> ID：14985083
> 
> 赞同：0
> 
> 时间：2013-02-20T16:35:49.450
> 
> 标签：loops, batch-file

我有一个 Windows 批处理文件，它可以解码我拥有的密码（没有讨厌的评论，它只是为了看看 somthing 是如何工作的）。

密码是从一个没有问题的文件中读取的，但是我现在尝试对其进行解码，除了我不知道如何适应未知长度的密码字符之外，我不会有任何问题。

以下工作但仅适用于有限数量的字符我如何为未知（无限）大小的密码编程类似的东西？

如果您想知道为什么 ~0,2 ，因为字母表中的每个字母都由一个双数字字符集表示，例如 00 代表 A 或 01 代表 B 这些是在我之前构建的另一个程序中随机生成的。

```
IF %MYPASSWORD:~0,2% == %AA% msg * first letter is A
IF %MYPASSWORD:~0,2% == %BB% msg * first letter is B
IF %MYPASSWORD:~0,2% == %CC% msg * first letter is C
IF %MYPASSWORD:~0,2% == %DD% msg * first letter is D
IF %MYPASSWORD:~0,2% == %EE% msg * first letter is E
IF %MYPASSWORD:~0,2% == %FF% msg * first letter is F
IF %MYPASSWORD:~0,2% == %GG% msg * first letter is G
IF %MYPASSWORD:~0,2% == %HH% msg * first letter is H
IF %MYPASSWORD:~0,2% == %II% msg * first letter is I
IF %MYPASSWORD:~0,2% == %JJ% msg * first letter is J
IF %MYPASSWORD:~0,2% == %KK% msg * first letter is K
IF %MYPASSWORD:~0,2% == %LL% msg * first letter is L
IF %MYPASSWORD:~0,2% == %MM% msg * first letter is M
IF %MYPASSWORD:~0,2% == %NN% msg * first letter is N
IF %MYPASSWORD:~0,2% == %OO% msg * first letter is O
IF %MYPASSWORD:~0,2% == %PP% msg * first letter is P
IF %MYPASSWORD:~0,2% == %QQ% msg * first letter is Q
IF %MYPASSWORD:~0,2% == %RR% msg * first letter is R
IF %MYPASSWORD:~0,2% == %SS% msg * first letter is S
IF %MYPASSWORD:~0,2% == %TT% msg * first letter is T
IF %MYPASSWORD:~0,2% == %UU% msg * first letter is U
IF %MYPASSWORD:~0,2% == %VV% msg * first letter is V
IF %MYPASSWORD:~0,2% == %WW% msg * first letter is W
IF %MYPASSWORD:~0,2% == %XX% msg * first letter is X
IF %MYPASSWORD:~0,2% == %YY% msg * first letter is Y
IF %MYPASSWORD:~0,2% == %ZZ% msg * first letter is Z 
```

很好，因为这只涵盖了第一个字符。例如，如果我有 100 个字符，如果我有 1000 1000 倍以上，我将不得不重复上述 100 次（对不起，我认为这是循环的理想选择，但我总是遇到问题）

简而言之，如果密码中有 1000 个字符，我试图循环到 %MYPASSWORD:~998:2%，如果有一百万个字符，则尝试循环到 %MYPASSWORD:~99998:2%。显然没有人编码那个数量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:58:57.580

如果您颠倒字符映射变量的定义，您的工作会变得容易得多。您使用字母作为名称，使用代码作为值。我会使用名称中的代码，并使用字母作为值。该名称应以非数字字符为前缀，以便解析器不会混淆`%17%`参数`%1`。

例如，您可能已经定义了`set AA=21`，我会定义`set map21=A`

批处理变量的长度不是无限的 - 最大长度为 8192 个字符。将其除以 2，您就有了最大循环数。FOR /L 命令是一个快速循环结构。

您还将受益于使用延迟扩展。

如果您采用上述建议，这就是您所需要的一切：

```
setlocal enableDelayedExpansion
set "decodedPassword="
for /l %%N in (0 2 8191) do (
  for /f "delims=" %%C in ("!MYPASSWORD:~%%n,2!") do (
    set "decodedPassword=!map%%C!"
  )
) 
```

上面的代码可以进一步优化。例如，在处理完最后一个代码后继续寻找更多代码会浪费时间。但是在您的情况下，浪费的时间可能无关紧要。

# c# - 最初未选中时未触发复选框命令

> ID：14985085
> 
> 赞同：5
> 
> 时间：2013-02-20T16:35:58.133
> 
> 标签：c#, wpf, datagrid, command, checkbox

我在数据网格中有一列复选框。

```
<DataGridTemplateColumn CanUserResize="False" Header="" Width="auto">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <CheckBox Style="{StaticResource CheckBoxSelectTypeStyle}" IsChecked="{Binding Path=Selected}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

我有一个绑定到取消选中和检查的命令。

```
<Style x:Key="CheckBoxSelectTypeStyle" TargetType="{x:Type CheckBox}">
    <Setter Property="HorizontalAlignment" Value="Center" />
    <Setter Property="VerticalAlignment" Value="Center" />
    <Style.Triggers>
        <Trigger Property="IsChecked" Value="True">
            <Setter Property="Command" Value="{Binding DataContext.CheckedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" />
            <Setter Property="CommandParameter" Value="{Binding Path=SelectedItems, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" />
        </Trigger>
        <Trigger Property="IsChecked" Value="False">
            <Setter Property="Command" Value="{Binding DataContext.UncheckedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" />
            <Setter Property="CommandParameter" Value="{Binding Path=SelectedItems, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

我的问题是，如果复选框以未选中状态开始并且您选中一个，则不会触发任何命令（这就是问题）。如果您随后取消选中相同的复选框，则取消选中命令将触发（如预期的那样）。如果您再次选中相同的复选框，则检查命令将触发（如预期的那样）。那时，该复选框的一切都会正常工作，但其他复选框仍然存在同样的问题。

如果复选框以选中状态开始，它将正常工作。我的问题是当复选框开始未选中时如何使命令触发。我找不到任何理由让它不起作用。

**对建议的回应：**

我试图添加一个触发器`Null`，但它有完全相同的问题，没有任何改变。

```
<Style.Triggers>
    <Trigger Property="IsChecked" Value="True">
        <Setter Property="Command" Value="{Binding DataContext.CheckedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" />
        <Setter Property="CommandParameter" Value="{Binding Path=SelectedItems, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" />
    </Trigger>
    <Trigger Property="IsChecked" Value="False">
        <Setter Property="Command" Value="{Binding DataContext.UncheckedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" />
        <Setter Property="CommandParameter" Value="{Binding Path=SelectedItems, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" />
    </Trigger>
    <Trigger Property="IsChecked" Value="{x:Null}">
        <Setter Property="Command" Value="{Binding DataContext.UncheckedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" />
        <Setter Property="CommandParameter" Value="{Binding Path=SelectedItems, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" />
    </Trigger>
</Style.Triggers> 
```

**视图模型代码**

```
public ICommand CheckedCommand { get; set; }
public ICommand UncheckedCommand { get; set; } 
```

* * *

```
CheckedCommand = new RelayCommand<IList>(Checked);
UncheckedCommand = new RelayCommand<IList>(Unchecked); 
```

* * *

```
private void Checked(IList selectedItems)
{
    ChangedChecked(selectedItems, true);
}

private void Unchecked(IList selectedItems)
{
    ChangedChecked(selectedItems, false);
}

private void ChangedChecked(IList selectedItems, bool selected)
{
    if (selectedItems.HasValue())
        foreach (var item in selectedItems)
            if(item is SelectedTypeModel) (item as SelectedTypeModel).Selected = selected;
} 
```

RelayCommand 实现 ICommand。正如我之前提到的，`Checked`当复选框以未选中状态开始时不会调用该方法，但是当它*被*选中、未选中并再次选中时，或者如果它开始选中并且未选中时，它会被调用。

**我想做的事**

我有一个带有复选框列的 DataGrid。我希望能够突出显示多行，然后选中/取消选中所选行之一中的 CheckBox，并使所有其他行更新为相同。我还有一个用于数据网格的关键字过滤器，因此 DataGrid 绑定到 ListCollectionView。

**输出信息**

我启用了数据绑定的调试信息并收到此消息：

> System.Windows.Data 信息：10：无法使用绑定检索值，并且不存在有效的备用值；改用默认值。BindingExpression：路径=选定；数据项=空；目标元素是'CheckBox'（名称=''）；目标属性是“IsChecked”（类型“Nullable`1”）

不过，我仍然不确定如何使用这些信息来纠正问题。

**解决方案**

我没有解决我原来的问题，我仍然不知道为什么它不能正常工作，但我使用了另一种方法，得到了相同的预期结果。这是更改后的代码：

```
<Style x:Key="CheckBoxSelectTypeStyle" TargetType="{x:Type CheckBox}">
    <Setter Property="Command" Value="{Binding DataContext.CheckedChangedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" />
    <Setter Property="CommandParameter">
        <Setter.Value>
            <MultiBinding Converter="{StaticResource SelectedItemsCheckedMultiValueConverter}">
                <Binding RelativeSource="{RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}" Path="SelectedItems"/>
                <Binding RelativeSource="{RelativeSource Self}" Path="IsChecked"/>
            </MultiBinding>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

```
public ICommand CheckedChangedCommand { get; set; } 
```

* * *

```
CheckedChangedCommand = new RelayCommand<Tuple<IList, bool>>(CheckedChanged); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:00:24.133

**解决方案** 我认为你可以在不需要触发器的情况下实现你的目标（我已经在小示例应用程序中测试了这个解决方案）：所以你的风格看起来像这样：

```
<Style x:Key="CheckBoxSelectTypeStyle" TargetType="{x:Type CheckBox}">
    <Setter Property="Command" Value="{Binding DataContext.CheckedCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" />
    <Setter Property="CommandParameter" Value="{Binding Path=SelectedItems, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" />
  ... 
```

您的视图模型中只有一个命令。作为参数，该命令将接收所选项目的列表。所以只缺少一件事——用户是要选中还是取消选中复选框。目前，我可以想到一种与 SelectedItems 一起传递此信息的可能方法 - 使用自定义转换器编写 MultiBinding，它将 selectedItems 和 IsChecked 的当前值放入 Tuple<..., bool> 之类的东西中

```
 <Setter Property="CommandParameter">
            <Setter.Value>
                <MultiBinding Converter="{x:Static PackTupleConverter.Instance}">
                    <Binding RelativeSource="{RelativeSource AncestorType=DataGrid}" Path="SelectedItems"/>
                    <Binding RelativeSource="{x:Static RelativeSource.Self}" Path="IsChecked"/>
                </MultiBinding>
            </Setter.Value>
        </Setter> 
```

**结尾**

我可以通过简单地将相同的复选框放入 ListBox 来重现您的问题。一旦完成第一次我点击复选框 - 命令不会被调用

这是示例窗口 xaml：

```
<Window.Resources>
    <Style x:Key="CheckBoxSelectTypeStyle" TargetType="{x:Type CheckBox}">
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Style.Triggers>
            <Trigger Property="IsChecked" Value="True">
                <Setter Property="Command" Value="{Binding DataContext.Test, RelativeSource={RelativeSource AncestorType=Window}}" />
            </Trigger>
            <Trigger Property="IsChecked" Value="False">
                <Setter Property="Command" Value="{Binding DataContext.Test, RelativeSource={RelativeSource AncestorType=Window}}" />
            </Trigger>
        </Style.Triggers>
    </Style>
</Window.Resources>
<Grid>
    <ListBox>
        <ListBox.Items>
            <CheckBox Style="{StaticResource CheckBoxSelectTypeStyle}" />
        </ListBox.Items>
    </ListBox>

</Grid> 
```

落后：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        Test = new DelegateCommand(TestCommand);
    }

    public ICommand Test { get; set; }

    private void TestCommand()
    {
    }
} 
```

这是我在输出中发现的关于绑定的内容：

> System.Windows.Data 信息：10：无法使用绑定检索值，并且不存在有效的备用值；改用默认值。BindingExpression:Path=DataContext.Test; 数据项=空；目标元素是'CheckBox'（名称=''）；目标属性是“命令”（类型“ICommand”）

# mysql - 日期范围之间的mysql vars避免重复

> ID：14985088
> 
> 赞同：0
> 
> 时间：2013-02-20T16:36:09.047
> 
> 标签：mysql, variables, dry

我不确定它是否可能，但我可以使用 set vars 来避免在以下查询中重复日期范围吗？所以我只会声明一次 TY 和 LY 并在查询中重复使用？

```
// ThisYear -- '2013-02-04 00:00:00' AND '2013-02-10 23:59:59'
// LastYear -- '2012-02-06 00:00:00' AND '2013-02-12 23:59:59'

SELECT 
  count(*) as total_num_bookings,

  SUM(if(book_date BETWEEN '2013-02-04 00:00:00' AND '2013-02-10 23:59:59', 1, 0)) AS num_bookings_ty,
  SUM(if(book_date BETWEEN '2012-02-06 00:00:00' AND '2012-02-12 23:59:59', 1, 0)) AS num_bookings_ly,
  sj.pu_country

FROM 
  pc_tech.sales_journal_default sj

WHERE (book_date BETWEEN '2013-02-04 00:00:00' AND '2013-02-10 23:59:59') OR  (book_date BETWEEN '2012-02-06 00:00:00' AND '2012-02-12 23:59:59' )
group by pu_country
order by total_num_bookings DESC
LIMIT 25; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:40:16.363

是的：

```
SET @ThisYear1='2013-02-04 00:00:00', @ThisYear2='2013-02-10 23:59:59'
SET @LastYear1='2012-02-06 00:00:00', @LastYear2='2013-02-12 23:59:59'

SELECT 
  count(*) as total_num_bookings,

  SUM(if(book_date BETWEEN @ThisYear1 AND @ThisYear2, 1, 0)) AS num_bookings_ty,
... 
```

**编辑**

或者使用准备好的语句：

```
SET @ThisYear="'2013-02-04 00:00:00' AND '2013-02-10 23:59:59'";
SET @LastYear="'2012-02-06 00:00:00' AND '2013-02-12 23:59:59'";

SET @sql = CONCAT("SELECT count(*) as total_num_bookings, SUM(if(book_date BETWEEN ", @ThisYear, ", 1, 0)) AS num_bookings_ty, ...");
PREPARE stmt from @sql;
EXECUTE stmt;
...
DEALLOCATE PREPARE stmt; 
```

# sql - SQLite 根据列值从多个表中选择

> ID：14985097
> 
> 赞同：-1
> 
> 时间：2013-02-20T16:36:33.223
> 
> 标签：sql, sqlite

我有一个表，其中 id、product_type、product_id、quantity 列都是整数。我需要根据 product_type 从另一个表中选择数据。例如。如果 product_type 为 0，则从 tableA 中选择，如果 product_type 为 1，则从 tableB 中选择等。我试图找到如何创建选择但未成功的解决方案。有人能帮助我吗。我感谢每一个帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T19:11:52.867

将主表与各个产品表连接起来，但使用左连接并`product_type = x`在连接条件中包含过滤器，以便实际连接所需的记录。

这将产生许多`NULL`值；用于`coalesce`获取输出的非`NULL`值：

```
SELECT sales.id,
       sales.quantity,
       sales.product_type,
       coalesce(tableA.name, tableB.name) AS name,
       coalesce(tableA.color, tableB.color) AS color,
       tableA.numberOfAs                -- is NULL for other product types
FROM sales
  LEFT JOIN tableA ON sales.product_type = 0 AND
                      sales.product_id = tableA.product_id
  LEFT JOIN tableB ON sales.product_type = 1 AND
                      sales.product_id = tableB.product_id
WHERE ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:47:53.943

听起来你需要一个 CASE 声明

```
SELECT 
   CASE 
      WHEN product_type = 1 THEN (SELECT column FROM table1 WHERE ...)
      WHEN product_type = 2 THEN (SELECT column FROM table2 WHERE ...)
   END 
FROM table 
```

使用 JOINS 可能会提高效率，但这取决于您的架构。

# .net - 更改注册表项的 ACL，编辑值，然后将其改回

> ID：14985101
> 
> 赞同：2
> 
> 时间：2013-02-20T16:36:39.103
> 
> 标签：.net, powershell

*我有一个 Powershell 脚本，它更改了通常*由 TrustedInstaller 拥有的注册表值。基本工作流程是：

1.  尝试打开密钥进行编辑

    1.  如果失败，请尝试打开密钥以获得权限

        1.  如果失败，请尝试打开获取所有权的密钥
        2.  使用备份 ACL`if ($backupAcl -eq $null) { $backupAcl = $key.GetAccessControl(); }`
        3.  获取 ACL 的工作副本`$acl = $key.GetAccessControl();`
        4.  将所有者设置为`$acl.SetOwner($me);`
        5.  打开权限更改密钥
    2.  使用备份 ACL`if ($backupAcl -eq $null) { $backupAcl = $key.GetAccessControl(); }`

    3.  获取 ACL 的工作副本`$acl = $key.GetAccessControl();`
    4.  应用权限`$acl.AddAccessRule($rule); $acl.SetAccessControl($acl);`
    5.  打开密钥进行编辑
2.  更改我需要更改的值`$key.SetValue(...)`

3.  恢复之前对权限所做的任何更改。

我用来恢复权限的代码如下：

```
$key = [Microsoft.Win32.Registry]::ClassesRoot.OpenSubKey($subKeyName, $regOpenMode, $regTakeOwnChangePerms);

Write-Host "Setting permissions to:"
Format-List -InputObject $aclBackup;

$key.SetAccessControl($aclBackup);

Write-Host "Permissions set to:"
Format-List -InputObject $key.GetAccessControl();

$key.Close(); 
```

...但是，它实际上从未将 ACL 设置回原来的状态。

除此之外，脚本工作正常——ACL 设置为更改值所需的值（所以我知道我*可以*更改 ACL）并且值本身已更改（所以我知道我*已经*更改了 ACL） .

但回归永远不会发生。不会引发任何异常——它永远不会发生。

为什么不？以及如何将 ACL 恢复到脚本启动时的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:09:22.767

我得到了它。看来您不能以这种方式重用`ObjectSecurity`对象，所以我不得不使用该方法序列化备份 ACL`GetSecurityDescriptorBinaryForm()`并使用该方法再次反序列化它`SetSecurityDescriptorBinaryForm(...)`。

但是，一旦我这样做了，我得到了另一个错误 - *The security identifier is not allowed to be the owner of this object*。

我必须通过请求系统权限来克服这个问题`SeRestorePrivilege`，我使用`Enable-Privelege`来自[http://social.technet.microsoft.com/Forums/en/winserverpowershell/thread/e718a560-2908-4b91-ad42-d392e7f8f1ad](http://social.technet.microsoft.com/Forums/en/winserverpowershell/thread/e718a560-2908-4b91-ad42-d392e7f8f1ad)的函数（一个函数我已经在使用请求`SeTakeOwnershipPrivilege`首先获得所有权）。

一旦我有了这个权限，我就可以用我缓存中的反序列化的 ACL 覆盖 ACL。

因此，要备份 ACL：

```
if ($aclBackup -eq $null) { 
    $aclBackup = $key.GetAccessControl().GetSecurityDescriptorBinaryForm(); 
} 
```

并恢复它：

```
if (Enable-Privilege SeRestorePrivilege) {
    $acl = New-Object System.Security.AccessControl.RegistrySecurity;
    $acl.SetSecurityDescriptorBinaryForm($aclBackup, $aclIncludeAll);

    $key = $keyRoot.OpenSubKey($subKeyName, $regOpenMode, $regTakeOwnChangePerms);
    $key.SetAccessControl($acl);
    $key.Close();
} 
```

希望这对将来的其他人有所帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:43:39.323

由于您正在对内存中的对象进行修改，因此您需要使用该命令`Set-ACL`来影响对实际文件 ACL 的更改。

使用 Get ACL 将从注册表项中读取访问列表。我不认为你需要这条线。

```
$key = [Microsoft.Win32.Registry]::ClassesRoot.OpenSubKey($subKeyName, $regOpenMode, $regTakeOwnChangePerms); 
```

尝试

```
$ACLobject = Get-ACL -Path $RegKey
$ACLObject |Set-ACL -Path $newRegKey 
```

在这两者之间，您可以以任何您喜欢的方式操作 $ACLobject 的属性。

# extjs - ext 可以忽略它自己以外的样式表

> ID：14985105
> 
> 赞同：0
> 
> 时间：2013-02-20T16:36:49.930
> 
> 标签：extjs, extjs4.1

我有一个 extjs 应用程序，我使用 js 插件/css 等嵌入到现有的 HTML 模板中。

我的模板样式和 ext 之间存在 CSS 冲突。作为一个简单的解决方案，我想知道我是否可以告诉 ext 在创建其组件时只使用它自己的 css 文件。在加载我的应用程序之前，我已经实现了以下设置：

Ext = { buildSettings:{ "scopeResetCSS": true // 谢谢，但我会自己做范围界定 } };

这在某种程度上有效，但插件 css 文件覆盖了某些 ext 组件（表单字段、对齐问题等）。

这是我第一次尝试将 ext 应用程序集成到 html 模板中，所以我的知识非常有限。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:56:56.060

据我所知，没有办法在单个页面中限定 CSS，我想知道你是如何做到的。如果您想避免冲突，恐怕您必须进行一些重构。

一些建议：

*   使用页面中加载的 ExtJS 文件构建您的 CSS 规则，这意味着您当前正在使用最终环境。此外，您可以使用自己的重置规则。
*   不要使用标签选择器 ( `div`, `span`, `input`...) - 它适用于页面中的每个元素，包括 ExtJS 元素 - 除非目标元素从不承载任何 ExtJS 组件。
*   像 ExtJS ( , ) 一样，将命名空间添加到您自己的选择器 ( `#my-id`, )。`.my-class``.x-button``.x-container`

另一种解决方案是使用 iframe 对 ExtJS 进行沙箱处理，但这取决于项目的性质。我没有足够的信息来帮助你更多。

# android - 在Android中检测显示类型

> ID：14985128
> 
> 赞同：11
> 
> 时间：2013-02-20T16:38:04.020
> 
> 标签：android

是否有任何机制（在 SDK 或 NDK 中）来获取有关当前显示的供应商信息（或者实际上是任何信息）？特别是，我希望找出显示器是 OLED 还是 LCD 还是其他显示器，因为我测试过的每个 OLED 设备都具有可怕的色彩保真度（过饱和）；由于 Android 没有颜色校正，因此需要在应用程序级别进行校正。作为备用，手动列出流行的 OLED 设备并按设备类型进行查找在理论上是可行的，但是 (a) 那里有很多设备，并且 (b) 在设备而不是显示级别工作会增加额外的复杂性使用外部显示器的设备。即使把这份清单放在一起也是一个挑战......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T14:37:04.920

确实去了Android代码，我问了一个罐头，非常肯定地说没有返回显示类型的API方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-17T10:26:26.413

获取手机物理显示信息的一种简单方法是向站点发送获取请求并解析 HTML/JSON 信息。您可以将其保存到某种在线数据库以供将来使用。GSMarena.com 上的信息示例。当然，您可以使用其他来源。

[![我手机的一个样本（请注意，您可以寻找任何其他的，Lumia 只是一个示例。](../Images/9c5ffd526045acca1e65ccda80c3029f.png)](https://i.stack.imgur.com/9eqfX.png<br) 请注意，我没有在这里展示 Android 手机，但它的工作方式相同。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T18:07:47.613

许多Android`Build`信息来自查询`/proc`目录。我开始在这里四处寻找，希望能找到一些东西——但有很多信息需要翻阅。这将是一个很好的起点——或者在命令行的其他地方寻找。

您可以通过导航到`platform-tools`目录并键入来访问命令行

```
./adb shell 
```

连接设备时。您还可以从代码中执行 shell 命令：

```
Process p = Runtime.getRuntime().exec("cat /proc/whatever");
//you can then use p to get the command output. 
```

# python - python 中的闭包是否捕获对象引用，或者只是它们需要的属性？

> ID：14985133
> 
> 赞同：0
> 
> 时间：2013-02-20T16:38:17.187
> 
> 标签：python, closures

这个问题是关于python如何智能地进行逃逸分析。

可以说我有以下程序：

```
class Dog():
  breed = 'electronic dog'
  collar_type = 'microsoft'

sparky=Dog()
def get_dog_info():
  return sparky.breed 
```

函数 get_dog_info() 显然必须关闭 sparky.breed。但是，要这样做，实现是否也会转义整个 Dog 对象？也就是说，关闭collar_type 是否也会产生额外的内存成本？还是这是由实施决定的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:52:47.610

两者`Dog`和`sparky`都由构成模块的全局命名空间引用，并将它们保存在内存中。

如果您要运行`del Dog`，`sparky`仍然会引用该类（通过它的`__class__`引用）使其保持活动状态。该类引用了作为其定义一部分的两个属性，因此它们也保持活动状态。这完全*独立*于`get_dog_info`函数。

CPython 根据引用计数将对象保存在内存中；如果 Python 中的任何内容开始在*某处*引用某个对象，则该对象的引用计数将增加 1，并在删除引用时再次减少。当计数下降到 0 时，对象会从内存中删除，并且垃圾收集过程会根据需要分解循环引用以促进该过程。

注意因为`sparky`是全局的，所以函数代码不直接引用任何东西；在运行时查找全局变量。如果您也删除`sparky`，所有引用都将被清除。因为`sparky`in`get_dog_info()`是在全局命名空间中查找的，所以调用`get_dog_info()`会产生一个`NameError`.

如果您*确实*有一个闭包（对父函数范围中的变量的引用），则将适用相同的规则，*除了*闭包引用计为对实例的另一个引用，因此间接地指向类和包含的属性。

因此，考虑以下示例，我们确实在其中创建了一个闭包：

```
class Dog():
    breed = 'electronic dog'
    collar_type = 'microsoft'

def foo():
    sparky = Dog()
    def bar():
        return sparky.breed
    return bar

bar = foo()
del Dog 
```

在上面的示例中，`Dog`该类保留在内存中，因为`bar`闭包仍然引用该类的一个实例：

```
>>> bar.__closure__
(<cell at 0x1012b2280: Dog object at 0x1012b5110>,)
>>> bar.__closure__[0].cell_contents
<__main__.Dog object at 0x1012b5110>
>>> bar()
'electronic dog' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T20:57:01.307

作为对[Martijn 回答](https://stackoverflow.com/a/14985430/577088)的补充，我将添加以下内容，说明为什么将`Dog`对象 ( `sparky`) 存储在闭包中而不是字符串 ( `sparky.breed`) 中，我认为这至少是您问题的一部分。

这是因为`.`操作符的工作方式——它在函数调用时访问 的`breed`属性，因此必须存储`sparky`整个对象。`sparky`如果您只想在闭包中存储一个字符串，则必须更改函数代码以直接引用该字符串。

换句话说，鉴于以下...

```
>>> class Dog():
...   breed = 'electronic dog'
...   collar_type = 'microsoft'
... 
>>> def get_dog_info_closure():
...     sparky = Dog()
...     def get_dog_info():
...         return sparky.breed
...     return get_dog_info
>>> get_dog_info = get_dog_info_closure() 
```

...您可以看到函数的闭包包含一个`Dog`对象，而不是简单地返回的字符串`sparky.breed`：

```
>>> get_dog_info.func_closure
(<cell at 0x10049fa28: instance object at 0x1004a1cf8>,)
>>> get_dog_info.func_closure[0].cell_contents
<__main__.Dog instance at 0x1004a1cf8> 
```

这意味着您可以检索`Dog`对象并对其进行修改，并且将来的调用将反映该修改：

```
>>> get_dog_info.func_closure[0].cell_contents.breed = ('actual '
                                                        'flesh-and-blood dog!')
>>> get_dog_info()
'actual flesh-and-blood dog!' 
```

要仅存储`breed`字符串，您必须单独引用它：

```
>>> def get_dog_info_closure():
...     sparky = Dog()
...     sbreed = sparky.breed
...     def get_dog_info():
...         return sbreed
...     return get_dog_info
... 
>>> get_dog_info = get_dog_info_closure()
>>> get_dog_info.func_closure[0].cell_contents
'electronic dog' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:48:32.323

显然，在您向我们展示的代码中，根本没有闭包（由于 globals ）。我认为这只是一个片段。看看这段代码（例如）：

```
def test():
  class Dog():
    breed = 'electronic dog'
    collar_type = 'microsoft'

  sparky=Dog()
  def get_dog_info():
    return sparky.breed

  print get_dog_info.func_closure

test() 
```

这表明整个对象`sparky`已在`get_dog_info`. 确实必须是这样，因为检索对象的属性需要有关对象的一些知识（`breed`例如可以是属性）。所以没有地方可以改进。

# javascript - 如何计算独立 JavaScript 程序的运行速度？

> ID：14985134
> 
> 赞同：3
> 
> 时间：2013-02-20T16:38:20.237
> 
> 标签：javascript, performance

我正在做一些 JavaScript 练习，并考虑如何改进我[对练习](https://stackoverflow.com/q/4137350/165820)的解决方案（算法） 。我正在考虑在调整代码后计算运行时速度，这样我就会知道速度提高了多少。我搜索并找到[了这种方法](https://stackoverflow.com/a/11609165/165820)，并认为我可以这样做。这是我所做的，

```
var d = new Date();
var startTime = d.getTime();
var endTime;

function testTargeAlgorithm(){
  ....
  ....
}

testTargetAlgorithm();

endTime = d.getTime();
console.log(endTime-startTime); 
```

这是一个非常简单的算法，所以我预计时间之间不会有显着差异。但是如果毫秒不能衡量速度的提升，那我还能做什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:43:39.393

`performance.now()`如果引擎支持，您可以使用它。自页面加载或应用程序启动以来，这给出了以毫秒为单位的时间，精度为亚毫秒。

```
performance.now() // 26742.766999999956 
```

我知道 Chrome 支持它，但不确定其他浏览器、node.js 或其他引擎独立 js 引擎。

* * *

或者您可以在一个循环中多次运行您的代码，并测量所花费的总时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:41:48.387

一次又一次地运行相同的功能。

```
var startTime = (new Date()).getTime();
for(var i=0;i<1000;i++) {
    testTargeAlgorithm()
}
var endTime = (new Date()).getTime();
console.log(endTime-startTime); 
```

编辑以反映建议，谢谢马塞尔

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:13:52.487

我最终使用`process.hrtime()`提供纳秒精度来测量运行时性能。请注意，此方法仅适用于 Node.js。在 Chrome 和 Firefox 中，您可以使用`performance.now()`.

即使运行相同的算法/函数，返回的时间差仍然会变化（以纳秒为单位），可能是由于 CPU 使用率和其他未知影响，因此建议运行多次并计算平均值。例如：

```
function calAvgSpeed(timesToRun, targetAlgorithm){

var diffSum = 0;
for(var i = 1; i <= timesToRun; i++){
    var startTime = process.hrtime();
    targetAlgorithm();
    var diff = process.hrtime(startTime);
    diffSum += diff[1];
   }
   return Math.floor(diffSum / times);
} 
```

# c - C programming: how to fill an array?

> ID：14985138
> 
> 赞同：0
> 
> 时间：2013-02-20T16:38:24.633
> 
> 标签：c, arrays

I know strncpy(s1, s2, n) copies n elements of s2 into s1, but that only fills it from the beginning of s1. For example

```
s1[10] = "Teacher"
s2[20] = "Assisstant"
strncpy(s1, s2, 2) would yield s1[10] = "As", correct? 
```

Now what if I want s1 to contain "TeacherAs"? How would I do that? Is strncpy the appropriate thing to use in this case?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:40:48.563

您可以使用[`strcat()`](http://en.cppreference.com/w/c/string/byte/strcat)来连接字符串，但是在这种情况下您不希望复制所有源字符串，因此您需要使用以下内容：

```
size_t len = strlen(s1);
strncpy(s1 + len - 1, s2, 2);
s2[len + 2] = '\0'; 
```

（添加终止 nul；感谢@FatalError）。

这非常可怕，您需要担心目标数组中剩余的空间量。请注意，如果`s1`为空，则代码将中断！

有些系统下有`strncat()`（[manpage](http://linux.die.net/man/3/strncat)），使用起来要简单得多：

```
strncat(s1, s2, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:40:07.343

使用[strcat](http://www.cplusplus.com/reference/cstring/strcat/)。

确保您要附加的字符串足够大以容纳两个字符串。在你的情况下，它不是。

从上面的链接：
char * strcat ( char * destination, const char * source );

连接字符串 将源字符串的副本附加到目标字符串。目标中的终止空字符被源的第一个字符覆盖，并且在目标中由两者连接形成的新字符串的末尾包含一个空字符。

目的地和来源不得重叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:48:07.380

为了实现你需要的东西，你必须使用[`strlcat`](http://www.manpagez.com/man/3/strlcat/)（但要小心！它被[认为是不安全](https://stackoverflow.com/questions/2114896/why-is-strlcpy-and-strlcat-considered-to-be-insecure)的）

```
strlcat(s1, s2, sizeof(s1)); 
```

这将连接到字符串`s1`的一部分`s2`，直到`s1`达到 的大小（这避免了`memory overflow`）

然后你会进入`s1`字符串`TeacherAs`+ 一个 NUL 字符来终止它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T16:49:25.887

您需要确保为结果字符串分配了足够的内存

```
s1[10] 
```

没有足够的空间容纳“教师”。

从那里，你会想做类似的事情

```
//make sure s1 is big enough to hold s1+s2
s1[40]="Teacher";
s2[20]="Assistant";

//how many chars from second string you want to append
int offset = 2;
//allocate a temp buffer 
char subbuff[20];
//copy n chars to buffer
memcpy( subbuff, s2, offset );
//null terminate buff
subbuff[offset+1]='\0';

//do the actual cat
strcat(s1,subbuff); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T16:52:24.283

我建议使用`snprintf()`，例如：

```
size_t len = strlen(s1);
snprintf(s1 + len, sizeof(s1) - len, "%.2s", s2); 
```

`snprintf()`将始终 nul 终止并且不会超出您的缓冲区。另外，它是 C99 的标准配置。请注意，这假定它`s1`是在当前范围内声明的数组，以便`sizeof`工作，否则您需要提供大小。

# xml - XSLT 复制除 1 个元素之外的所有节点

> ID：14985139
> 
> 赞同：11
> 
> 时间：2013-02-20T16:38:25.610
> 
> 标签：xml, xslt

```
<events>
    <main>
        <action>modification</action>
        <subAction>weights</subAction>
    </main>
</events>
<SeriesSet>
    <Series id="Price_0">
        <seriesBodies>
            <SeriesBody>
                <DataSeriesBodyType>Do Not Copy</DataSeriesBodyType>
            </SeriesBody>
        </SeriesBodies>
    </Series>
</SeriesSet> 
```

如何复制所有 xml 并排除 DataSeriesBodyType 元素

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-20T17:13:23.520

您只需要使用身份模板（就像您使用的那样），然后使用与 DataSeriesBodyType 匹配的模板，它什么都不做。

代码将是：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" encoding="utf-8" indent="yes"/>

    <!-- Identity template : copy all text nodes, elements and attributes -->   
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()" />
        </xsl:copy>
    </xsl:template>

    <!-- When matching DataSeriesBodyType: do nothing -->
    <xsl:template match="DataSeriesBodyType" />

</xsl:stylesheet> 
```

如果要规范化输出以删除空数据文本节点，则将以下模板添加到先前的样式表中：

```
<xsl:template match="text()">
    <xsl:value-of select="normalize-space()" />
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-25T17:57:24.513

以下对我有用，因为有时我需要创建一个没有一个元素的树来创建一个变量，有时我需要删除另一个来创建另一个变量。请注意，主匹配不应匹配根元素“/”，因为如果这样做，它只会在仅处理一个根元素时复制整个三个。但请记住，我们对所有节点使用应用模板的这种解决方案会干扰您可能必须执行其他工作的其他模板，因此您需要使用“模式”选项来分隔它们。

```
 <xsl:template match="node()|@*">
       <xsl:copy>
         <xsl:apply-templates select="node()[not(self::DataSeriesBodyType)]|@*"/>
       </xsl:copy>
    </xsl:template> 
```

# java - 说一个列表在内部被锁定是什么意思？

> ID：14985141
> 
> 赞同：4
> 
> 时间：2013-02-20T16:38:28.987
> 
> 标签：java, arrays, multithreading, collections, effective-java

这段代码来自《Effective Java》一书

```
Object[] snapshot = list.toArray();// Locks list internally 
```

我主要对这里的评论感兴趣。它是否在列表中`unmodifiable`？说一个列表在内部被锁定是什么意思？这把锁能保存多久？将 List 转换为数组是否有更好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:40:28.517

我想这意味着列表不维护对返回数组的引用，这意味着可以修改数组而不影响它来自的原始列表。同样，对列表的任何修改都不会反映在数组中。

这在线程安全方面很重要，因为这意味着您可以从线程安全的角度迭代列表的内容，而不必担心另一个线程同时改变列表的状态。从这个意义上说，列表的状态在返回的数组中被“锁定”，无论之后对列表进行什么更改 - 您都可以将其视为拍摄快照。

`toArray();`不会改变列表的状态 - 所以它不会使它不可修改或类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:51:28.570

就像其他人说的那样，我认为这与并发有关：

来自 java.uitl.List 的 javadoc 的文本

> 返回的数组将是“安全的”，因为此列表不维护对它的引用。（换句话说，即使此列表由数组支持，此方法也必须分配一个新数组）。因此，调用者可以自由修改返回的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:44:32.787

它关于线程安全 - 即**列表到数组的转换将是线程安全的**

**编辑：**
以最简单的方式 - 你可以把它当作

*   何时`Thread one`转换**List -> Array**不允许其他线程更改列表，直到时间`Thread one`尚未完成转换

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-23T09:25:31.143

对于那些想知道“内部锁定”发生在哪里的人：

请注意，J. Bloch 作为给定代码的介绍写道：*“例如，假设您有一个**同步**列表（由`Collections.synchroniedList`) (...) 返回的排序”*

在那种情况下，`toArray()`真正“锁定内部”，因为同步列表的实现将做到这一点（使用互斥锁），防止在创建解耦数组时其他线程进行任何修改。

# git - Copy git repository to production from bitbuckets

> ID：14985146
> 
> 赞同：3
> 
> 时间：2013-02-20T16:38:37.660
> 
> 标签：git, bitbucket

I'm learning Git and implementing it across all my projects. I've successfully installed Git on my local machine, created git repo's for each project, and started pushing all the commits to my bitbucket account for each project.

Now, all of these projects are already live on my production server, where they do not have the corresponding git repo's... yet.

What I'd like to do is be able to pull down commits from bitbucket for each corresponding project so that changes are reflected... and also sets up the git repo on the production server for that project as well.

I hope I explained that right. I'm using SSH and I'm able to `git init`... also tried `git pull` and `git fetch` ... but then when I try to `git status` after the pull or fetch.... it shows all my files on the production server as untracked. However, they should be already tracked as reflected on my bitbucket repo. Right?

I'm a little confused as to how to do this properly despite hours of reading. Any help or direction pointing would be great!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:00:35.517

我的假设是您在生产服务器上进行了初始化。

```
git init 
```

然后添加 bitbucket 作为远程仓库

```
git remote add bitbucket git://bitbucket.com/project 
```

您应该做的就是在本地提交、获取以及合并或变基。

提交会将您的更改提交到本地存储库，并且不会反映在 bitbucket 上。

git commit -a -m '提交'

fetch 将任何更改从 bitbucket 拉到您的服务器。

```
git fetch bitbucket 
```

合并会将任何新更改合并到服务器上的存储库中。

```
git merge bitbucket/master 
```

但是，在这种情况下，我个人更喜欢 rebase 而不是合并，以便本地更改基本上附加到最后一次提交，而不是与 bitbucket/master 上的提交交织在一起。我发现变基可以减少冲突的数量。

git rebase bitbucket/master

可能会发生合并冲突。在这种情况下，您应该编辑冲突区域，对冲突的文件执行“git add”，然后再次提交它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T19:22:23.440

您可能会错误地配置 SSH。看这里[https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git](https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git) 并尝试做

*git remote add origin [链接到你的仓库]*

# php - 如何在回声中放置开始和结束 PHP 标记？

> ID：14985163
> 
> 赞同：2
> 
> 时间：2013-02-20T16:39:22.347
> 
> 标签：php, html, echo

我之前已经发布过这个问题，但人们总是问不必要的问题。我会用一种简单的方式来解释它。

我有**3 个**文件：

1.  一个 php 文件（仅包含 html，这很重要）：我们将其称为 X 文件作为示例。
2.  一个 php 文件，其中有一些数据库查询以在屏幕上插入数据库数据：Y 文件
3.  一个 php 文件（一个会进行一些操作的脚本）：Z 文件

所以，我想用**Z**的脚本将**Y**包含到**X**中。

 **在**Z**中，我做了一个`str_replace($text, $new, file_get_contents($file));`

唯一的事情是我需要在**X**中包含 PHP 打开和关闭标签，因为其中没有 php 标签。

所以，`$new = "<?php include('Y.php'); ?>";`。如果您尝试，将不会在字符串中考虑关闭标签，但这就是我想要的。

希望这个问题现在很清楚。我再清楚不过了。:D

谢谢你的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T16:41:10.710

您需要将`<`and`>`字符替换为它们的 HTML 实体：

```
<?php echo "&lt;?php include('this.php'); ?&gt;"; ?> 
```

如果要包含该文件，则不需要上述内容，运行以下代码就足够了：

```
<?php
include('this.php');
?> 
```

您不必使用两个大量的 PHP 标记...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:47:27.047

我不妨把这个作为答案。

如果您不想手动替换`<`and `>`：

```
<?php echo htmlentities("<?php include('this.php'); ?>"); ?> 
```**

# ravendb - 使用 RavenDB 对嵌套文档进行动态字段索引

> ID：14985164
> 
> 赞同：2
> 
> 时间：2013-02-20T16:39:24.050
> 
> 标签：ravendb

您将如何处理嵌套文档上的动态字段索引，以便您可以使用 RavenDB 查询深度图对象的动态字段？

使用文档中的示例：[http ://ravendb.net/docs/2.0/client-api/advanced/dynamic-fields](http://ravendb.net/docs/2.0/client-api/advanced/dynamic-fields)

如果一个产品的属性值也是一个产品呢？考虑一个具有动态字段的 CMS，其中所有内容都是*内容*，根实体内容（对于 DDD 人员）可能嵌入另一个内容，等等（深度图）。

这非常重要，因为聚合子内容而不是与它们相关（就像您在关系数据库世界中所做的那样）是文档数据库的核心概念之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:05:00.080

如果数据符合某种模式，例如分层数据，那么您可以[递归到该数据](http://ravendb.net/docs/client-api/querying/static-indexes/indexing-hierarchies)以根据递归模式进行索引。

您已经找到了如何[索引动态字段](http://ravendb.net/docs/2.0/client-api/advanced/dynamic-fields)。您可以结合这些技术来获得最多可以描述的任何模式。

如果数据是*任意*动态的（即您无法提前知道对象结构是什么），那么您将很难到达任何特定字段，因为您无法描述如何访问它。

您不能同时具有任意动态并完全可索引。

# php - 如何使它在 PHP 5.3.3 中工作

> ID：14985169
> 
> 赞同：-2
> 
> 时间：2013-02-20T16:39:41.513
> 
> 标签：php, joomla

我有这段代码，它适用于 PHP 5.2

```
if (realpath ( __FILE__ ) == realpath ( (isset ( $_SERVER ['PATH_TRANSLATED'] ) ? $_SERVER ['PATH_TRANSLATED'] : $_SERVER ['ORIG_PATH_TRANSLATED']) )) {
    $path_parts = pathinfo ( __FILE__ );
    trigger_error ( 'Direct call of file' . $path_parts ['basename'], E_USER_ERROR );
} 
```

但在 5.3.3 中我有错误：

> PHP 通知：未定义索引：/var/www/user/data/www/site/plugins/system/u24_je_plg_lytebox.php 第 16 行中的 ORIG_PATH_TRANSLATED

应该如何改变？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:44:43.427

这是一个 PHP4 变量使用`$_SERVER['SCRIPT_FILENAME']`or`dirname(__FILE__)`代替。

# c# - ASP.Net CreateUserWizard 中的当前上下文中不存在控件

> ID：14985171
> 
> 赞同：0
> 
> 时间：2013-02-20T16:39:48.830
> 
> 标签：c#, asp.net, asp.net-membership

我正在使用带有 C# 代码的 ASP.NET Web 应用程序在 Microsoft Visual Studio 中开发一个项目。我添加了一个 CreateUserWizard 并在步骤 1 中自定义了表单。从事件处理程序中，我将 CreatedUser 处理程序放入代码隐藏中以更新数据库表。我想从表单中提取处理程序的数据值，但代码隐藏文件由于某种原因看不到它们。帮助！

主页

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="PageControls" runat="server">
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="RightBox" runat="server">
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="SiteControl1" runat="server">
</asp:Content>
<asp:Content ID="Content5" ContentPlaceHolderID="SiteControl2" runat="server">
</asp:Content>
<asp:Content ID="Content6" ContentPlaceHolderID="SiteControl3" runat="server">
</asp:Content>
<asp:Content ID="Content7" ContentPlaceHolderID="CPMain" runat="server">
    <center>
        <asp:CreateUserWizard ID="CreateUserWizard1" runat="server" 
CreateUserButtonText="Submit"
            RequireEmail="False" OnCreatedUser="CreateUserWizard1_CreatedUser">
            <WizardSteps>
                <asp:CreateUserWizardStep ID="CreateUserWizardStep1" runat="server">
                    <ContentTemplate>
                        <table border="0" style="font-size: 100%">
                            <tr>
                                <td align="center" colspan="2" style="font-weight: 
bold; color: white; background-color: #5d7b9d">
                                    Register with Acme!
                                </td>
                            </tr>
                            <tr>
                                <td align="right">
                                    <asp:Label ID="Label1" runat="server" 
AssociatedControlID="UserName">
                        First Name:</asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox ID="FName" runat="server">
</asp:TextBox>
                                    <asp:RequiredFieldValidator 
ID="RequiredFieldValidator1" runat="server" ControlToValidate="FirstName"
                                        ErrorMessage="First Name is required." 
ToolTip="First Name is required." ValidationGroup="CreateUserWizard1">*
</asp:RequiredFieldValidator>
                                </td>
                                <tr>
                                    <td align="right">
                                        <asp:Label ID="Label2" runat="server">
                        Last Name:</asp:Label>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="LName" runat="server">
</asp:TextBox>
                                        <asp:RequiredFieldValidator 
ID="RequiredFieldValidator2" runat="server" ControlToValidate="LastName"
                                            ErrorMessage="Last Name is required." 
ToolTip="Last Name is required." ValidationGroup="CreateUserWizard1">*
</asp:RequiredFieldValidator>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right">
                                        <asp:Label ID="UserNameLabel" runat="server" 
AssociatedControlID="UserName">
                        User Name:</asp:Label>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="UserName" runat="server">
</asp:TextBox>
                                        <asp:RequiredFieldValidator 
ID="UserNameRequired" runat="server" ControlToValidate="UserName"
                                            ErrorMessage="User Name is required." 
ToolTip="User Name is required." ValidationGroup="CreateUserWizard1">*
</asp:RequiredFieldValidator>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right">
                                        <asp:Label ID="PasswordLabel" runat="server" 
AssociatedControlID="Password">
                        Password:</asp:Label>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="Password" runat="server" 
TextMode="Password"></asp:TextBox>
                                        <asp:RequiredFieldValidator 
ID="PasswordRequired" runat="server" ControlToValidate="Password"
                                            ErrorMessage="Password is required." 
ToolTip="Password is required." ValidationGroup="CreateUserWizard1">*
</asp:RequiredFieldValidator>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right">
                                        <asp:Label ID="ConfirmPasswordLabel" 
runat="server" AssociatedControlID="ConfirmPassword">
                        Confirm Password:</asp:Label>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="ConfirmPassword" 
runat="server" TextMode="Password"></asp:TextBox>
                                        <asp:RequiredFieldValidator 
ID="ConfirmPasswordRequired" runat="server" ControlToValidate="ConfirmPassword"
                                            ErrorMessage="Confirm Password is 
required." ToolTip="Confirm Password is required."
                                            ValidationGroup="CreateUserWizard1">*
</asp:RequiredFieldValidator>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" colspan="2">
                                        <asp:CompareValidator ID="PasswordCompare" 
runat="server" ControlToCompare="Password"
                                            ControlToValidate="ConfirmPassword" 
Display="Dynamic" ErrorMessage="The Password and Confirmation Password must match."
                                            ValidationGroup="CreateUserWizard1">
</asp:CompareValidator>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" colspan="2" style="color: red">
                                        <asp:Literal ID="ErrorMessage" runat="server" 
EnableViewState="False"></asp:Literal>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right">
                                        <asp:Label ID="Label3" runat="server" 
AssociatedControlID="UserName">
                        Role:</asp:Label>
                                    </td>
                                    <td>
                                        <asp:DropDownList ID="RoleSelector" 
runat="server">
                                            <asp:ListItem 
Value="Visitor">Visitor</asp:ListItem>
                                            <asp:ListItem 
Value="Employee">Employee</asp:ListItem>
                                            <asp:ListItem Value="PM">Project 
Manager</asp:ListItem>
                                            <asp:ListItem Value="DM">Department 
Manager</asp:ListItem>
                                            <asp:ListItem Value="Director">IT 
Director</asp:ListItem>
                                        </asp:DropDownList>
                                    </td>
                                </tr>
                        </table>
                    </ContentTemplate>
                </asp:CreateUserWizardStep>
                <asp:CompleteWizardStep ID="CompleteWizardStep1" runat="server">
                    <ContentTemplate>
                    </ContentTemplate>
                </asp:CompleteWizardStep>
            </WizardSteps>
        </asp:CreateUserWizard>
    </center>
</asp:Content> 
```

代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Security.Principal;

namespace Acme
{
    public partial class Register : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        public void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
        {
            RolesManager.InsertEmployee(FName.Text, LName.Text, RoleSelector.Value, 
User.Identity);
        }
    }
} 
```

我在编译时收到这些错误：

```
Error   1   The name 'FName' does not exist in the current context  C:\MV_Training\Jan2013\C#Projects\AcmePresentation\AcmePresentation\Register.aspx.cs    20  41  AcmePresentation
Error   2   The name 'LName' does not exist in the current context  C:\MV_Training\Jan2013\C#Projects\AcmePresentation\AcmePresentation\Register.aspx.cs    20  53  AcmePresentation
Error   3   The name 'RoleSelector' does not exist in the current context   C:\MV_Training\Jan2013\C#Projects\AcmePresentation\AcmePresentation\Register.aspx.cs    20  65  AcmePresentation 
```

这来自浏览器：

编译错误描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS1061：“ASP.register_aspx”不包含“CreateUserWizard1_CreatedUser”的定义，并且找不到接受“ASP.register_aspx”类型的第一个参数的扩展方法“CreateUserWizard1_CreatedUser”（您是否缺少 using 指令或装配参考？）

源错误：

```
Line 16: <asp:Content ID="Content7" ContentPlaceHolderID="CPMain" runat="server">
Line 17:     <center>
Line 18:         <asp:CreateUserWizard ID="CreateUserWizard1" runat="server" 
Line 19:             CreateUserButtonText="Submit" RequireEmail="False" 
Line 20:             oncreateduser="CreateUserWizard1_CreatedUser"> 
```

源文件：c:\MV_Training\Jan2013\C#Projects\AcmePresentation\AcmePresentation\Register.aspx 行：18

谢谢，比尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:04:50.710

你想明确地投射控制是这样的 -

```
public void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
{
   var fNameTextBox = (TextBox)CreateUserWizardStep1
          .ContentTemplateContainer.FindControl("FName");
   var lNameTextBox = (TextBox)CreateUserWizardStep1
          .ContentTemplateContainer.FindControl("LName");
   var usernameTextBox = (TextBox)CreateUserWizardStep1
          .ContentTemplateContainer.FindControl("UserName");

   MembershipUser user = Membership.GetUser(usernameTextBox.Text);
   Guid userId = (Guid)user.ProviderUserKey;
} 
```

# android - Android GridView 焦点顺序

> ID：14985172
> 
> 赞同：0
> 
> 时间：2013-02-20T16:39:58.467
> 
> 标签：android, gridview, focus

请帮帮我！如何使用edittexts设置更改gridview焦点的顺序？现在看起来像这样：

(1)(2)(3)

(4)(5)(6)

(7)(8)(9)

当我在键盘上按“下一步”时，焦点移动 1-4-7 完成 2-5-8 完成 3-6-9。我需要 1-2-3-4-5-6-7-8-9... 动态添加的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:59:14.583

在代码中获取 your 的实例`EditText`，然后调用`edittext1.setNextFocusDownId(R.id.edittext2);`并因此为 all youre 执行此操作`EditText`。

# java - 如何匹配这种模式？（Java/正则表达式）

> ID：14985177
> 
> 赞同：1
> 
> 时间：2013-02-20T16:40:14.063
> 
> 标签：java, regex

我需要转换字符串：

```
"%s blabla %s" 
```

进入：

```
"%1$s blabla %2$s" 
```

我的代码如下：

```
Pattern pattern = Pattern.compile("%s");
Matcher tokenMatcher = pattern.matcher(value);
int index = 1;
while(tokenMatcher.find()){
    String replacement = "%"+String.valueOf(index++)+"\\$s";        
    value = tokenMatcher.replaceFirst(replacement);
    System.out.println(value);
} 
```

问题是程序进入无限循环，我不明白为什么。不知何故`%1$s`匹配`%s`

```
%1$s blabla %s
%2$s blabla %s
%3$s blabla %s
%4$s blabla %s
%5$s blabla %s
%6$s blabla %s
%7$s blabla %s
%8$s blabla %s
%9$s blabla %s
%10$s blabla %s
etc... 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:48:06.980

尝试重置`tokenMatcher`循环中的。

```
while(tokenMatcher.find()){
    String replacement = "%"+String.valueOf(index++)+"\\$s";        
    value = tokenMatcher.replaceFirst(replacement);
    tokenMatcher = pattern.matcher(value);
}

System.out.println(value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:49:27.540

您必须使用新值重置匹配器：

```
while (tokenMatcher.find()) {
  String replacement = "%" + String.valueOf(index++) + "\\$s";
  value = tokenMatcher.replaceFirst(replacement);
  tokenMatcher.reset(value); // reset
  System.out.println(value);
} 
```

原因是 replaceFirst() 将匹配器重置到开头但不会更改它当前匹配的字符串，它仍然包含旧字符串。您必须自己执行此操作才能更新匹配器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:50:59.573

```
while(matcher.find()){
    matcher.appendReplacement(stringBuffer, "%" + String.valueOf(index++) + "\\$s");
}
matcher.appendTail(stringBuffer); 
```

[http://tutorials.jenkov.com/java-regex/matcher.html#8](http://tutorials.jenkov.com/java-regex/matcher.html#8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T16:49:39.100

试试下面的代码

```
 StringBuilder stringBuilder = new StringBuilder();
        int i = 1;

        for (String s : input.split("%s")) {
            stringBuilder.append(String.format("%s %d", s, "%"+i+++"$"));

       }

String newString = stringBuilder.toString(); 
```

# asp.net - facebook社交插件“Like box”不显示粉丝的帖子

> ID：14985188
> 
> 赞同：0
> 
> 时间：2013-02-20T16:40:33.207
> 
> 标签：asp.net, facebook, facebook-social-plugins, facebook-likebox

我在我在 asp.net 中创建的 Web 应用程序上使用 Facebook 社交插件“Like Box”（ [http://developers.facebook.com/docs/reference/plugins/like-box/ ）。](http://developers.facebook.com/docs/reference/plugins/like-box/)

该插件仅显示页面管理员发布的帖子，但不显示粉丝（喜欢该页面的用户）发布的帖子。

有谁知道是否有解决方法或者是这样设计的？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:07:43.687

这是不可能的。您无法在“赞”框中获得“其他人的帖子”。

如果您拥有一个应用程序，您可以在页面上获取每个墙帖，但是您必须为解析和格式化它而头疼。

示例：[https ://graph.facebook.com/cocacola/feed?access_token=your_access_token](https://graph.facebook.com/cocacola/feed?access_token=your_access_token)

# java - 计时器导致 Tomcat 服务器出现问题

> ID：14985191
> 
> 赞同：1
> 
> 时间：2013-02-20T16:40:36.417
> 
> 标签：java, tomcat, timer

我想在 Tomcat 上运行的 servlet 上每 22 分钟运行一次方法。所以我正在使用这段代码：

```
Timer timer = new Timer();

timer.schedule(new TimerTask() {
    @Override
    public void run() {

        try {
            update();
        } catch (SQLException | NamingException | InterruptedException e1) {
            e1.printStackTrace();
        }
    }
}, 22 * 60 * 1000, 22 * 60 * 1000); 
```

我有一种感觉，这是一种糟糕的方法，因为我一直在收到有关计时器的错误，并且每当我上传新版本的 servlet 时，我认为它不会停止前一个计时器。然后我收到数据库连接警告。如果我重置一切并重新开始，那很好。

```
javax.naming.NameNotFoundException: Name comp is not bound in this Context
    at org.apache.naming.NamingContext.lookup(NamingContext.java:770)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:153)
    at org.apache.naming.SelectorContext.lookup(SelectorContext.java:152)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at my.app.database.DatabaseManager.connect(DatabaseManager.java:44)
    at my.app.database.DatabaseManager.returnInfo(DatabaseManager.java:133)
    at my.app.genParse.Generate.updateHistory(Generate.java:89)
    at my.app.MyServer$1.run(MyServer.java:52)
    at java.util.TimerThread.mainLoop(Timer.java:555)
    at java.util.TimerThread.run(Timer.java:505) 
```

并且还与新版本一起重新启动：

```
SEVERE: The web application [/myApp] appears to have started a thread named [Timer-7] but has failed to stop it. This is very likely to create a memory leak. 
```

有什么更好的方法来实现或避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:54:41.177

An alternative to using timer tasks has been discussed [here](https://stackoverflow.com/a/4951059/1154145). Using the `ScheduledThreadpoolExecutor` class **MAY** help with the problem of having multiple threads still running when you upload a new version however I cannot say for sure that it will. This class is also preferred over the `Timer` class for various reasons discussed in the [javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:05:01.077

You shouldnt really use a `Timer` within a container - `Timer` spawn/reuse a thread thats managed outside of the container and this can cause problems.

Note too that as `Timer` uses a single thread if one instance of it takes too long the others accuracy can suffer.

Finally, if a `Timer` throws an unchecked exception the `Timer` thread is terminated.

For these (and other) reasons it has largely fallen out of favour - ScheduledThreadPoolExecutor is a better choice.

Again though, user managed threads within a container can be tricky. JSR-236 (Concurrency Utilities for the Java EE platform) will provide a mechanism to do so in the future, but for now its best avoided.

You can try schedule repeatable tasks via cron perhaps that could in turn call a dedicated servlet (or similar) on a regular basis

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:07:23.450

Use a ServletContextListener to start and stop your Timer when the web application starts and stops.

# c++ - 将矩阵从 c++ 移动到 Matlab

> ID：14985193
> 
> 赞同：0
> 
> 时间：2013-02-20T16:40:40.247
> 
> 标签：c++, matlab, import, matrix

我正在尝试从 c++ 中获取一个矩阵并将其导入 Matlab 以在该矩阵上运行 bintprog，称之为 m。我的 c++ 代码生成了这些特定类型的矩阵，我需要在它们上快速运行 bintprog，最好使用数百万个矩阵。

因此，以下任何一项都会很棒：一种一次导入一堆矩阵的方法，这样我就可以通过我的 Matlab 代码运行大量迭代。或者，如果我可以很好地在 C++ 中实现 Matlab 代码。

如果不清楚，请给我评论，我会更新我能做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:07:40.490

我建议使用简单的解决方案，假设您的矩阵保存在 3 维数组中：

在 C++ 中构建一个循环，以保存您的矩阵......这样的事情：

```
ofstream arquivoOut0("myMatrices.dat");
  for(int m=0;m<numberMatrices;m++){ 
      for (int i=0; i< numberlines;i++){
           for(int j=0;j<numberColumns;j++)
               if(j!=numberColumns-1) arquivoOut0<< matrices[m][i][j] << "\t";
               else arquivoOut0<< matrices[m][i][j] << "\n";
           }
       }
  }
arquivoOut0.close(); 
```

好的。您已将矩阵保存在 ascii 文件中！现在你必须在 Matlab 中阅读它！

```
load myMatrices.dat

  for m=1:numberMatrices
      for i=1:numberLines
           for j=1:numberColumns
               myMatricesInMatlab(m,i,j)=myMatrices((m-1)*numberLines+i,j);
           end
       end
  end 
```

现在，您可以使用所需的工具箱：

```
for i=1:numberMatrices
    Apply the toolbox for myMatricesInMatlab(i,:,:);
end 
```

我认为它有效，处理时间不是问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:53:07.947

您可以从 C++ 代码调用 Matlab 命令（反之亦然）：

1.  将 C++ 代码编译为`mex`函数并`bintprog`使用[`mexCallMatlab`](http://www.mathworks.com/help/matlab/apiref/mexcallmatlab.html).

2.  正如 Mark 所提议的，您可以使用[matlab engine 从本机 C++ 代码调用 Matlab 引擎](http://www.mathworks.com/help/matlab/calling-matlab-engine-from-c-c-and-fortran-programs.html)。

3.  您可以将您的 C++ 代码编译为共享库，并使用[`calllib`](http://www.mathworks.com/help/matlab/calling-matlab-engine-from-c-c-and-fortran-programs.html).

# microdata - 使用 Schema.org 和 Good Relations Product 标记一瓶葡萄酒

> ID：14985194
> 
> 赞同：0
> 
> 时间：2013-02-20T16:40:43.130
> 
> 标签：microdata, schema.org

我试图标记您在销售优质葡萄酒时提供的信息类型，如下所示：[http ://www.google.com/webmasters/tools/richsnippets?url=dekoninck.co .uk%2Fwine.html](http://www.google.com/webmasters/tools/richsnippets?url=dekoninck.co.uk/wine.html)。

Rich Snippets Tools 显示“*警告：schema.org 的微数据不完整*，我无法弄清楚缺少什么。

另外，我很想推荐

*   标记葡萄品种的最佳方式；目前通过`additionalType`
*   标记区域的最佳方式；目前通过`additionalType`
*   标记生产者的最佳方式；目前完成`manufacturer`的感觉很笨重
*   指定年份的最佳方式；目前完成`releaseDate`的感觉很笨重
*   指定葡萄酒储存的最佳方式；目前通过`businessFunction http://purl.org/goodrelations/v1#Maintain`
*   我如何在定价、存储、葡萄酒价格和交货价格中指定增值税/税金。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:52:59.860

我已经弄清楚了警告的含义。富网页摘要测试工具似乎不再接受要嵌套在 Product 中的 Offer。

在我有之前

```
<div itemscope itemtype="http://schema.org/Product">
... details
    <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
        ... details
    </div>
</div> 
```

修复（至少使警告消失）是将产品移到产品之外：

```
<div itemscope itemtype="http://schema.org/Product">
... details
</div>
<div itemscope itemtype="http://schema.org/Offer">
    ... details
</div> 
```

这看起来对吗？

# asp.net - Microsoft Jet 数据库引擎无法打开该文件。它已被其他用户独占打开，或者您需要权限才能查看其数据。

> ID：14985201
> 
> 赞同：3
> 
> 时间：2013-02-20T16:40:56.097
> 
> 标签：asp.net, ms-access-2010

我检查了上面的注释，但它们没有帮助。我使用 VS2008 for ASP.Net 和 MS Access 2010 作为数据库。我需要通过 ASP 网页将数据从 excel 上传到数据库。

但我收到如下错误：

“Microsoft Jet 数据库引擎无法打开文件 'C:\Users\poonamj\Documents\Visual Studio 2008\Projects\SmartTool\SmartTool\Uploads\'。它已被其他用户以独占方式打开，或者您需要权限才能查看其数据。”

```
 using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.IO;
using System.Collections.Generic;
using System.Data.OleDb;

namespace SmartTool
{

    public partial class WebForm2 : System.Web.UI.Page
    {
        protected void UploadFile(object sender, EventArgs e)
        {
            string fileName = Path.GetFileName(FileUpload1.PostedFile.FileName);
            FileUpload1.PostedFile.SaveAs(Server.MapPath("~/Uploads/") + fileName);
            Response.Redirect(Request.Url.AbsoluteUri);
        }
        protected void DownloadFile(object sender, EventArgs e)
        {
            string filePath = (sender as LinkButton).CommandArgument;
            Response.ContentType = ContentType;
            Response.AppendHeader("Content-Disposition", "attachment; filename=" + Path.GetFileName(filePath));
            Response.WriteFile(filePath);
            Response.End();
        }
        protected void DeleteFile(object sender, EventArgs e)
        {
            string filePath = (sender as LinkButton).CommandArgument;
            File.Delete(filePath);
            Response.Redirect(Request.Url.AbsoluteUri);
        }
        protected void ViewFile(object sender, EventArgs e)
        {
            //string filePath = (sender as LinkButton).CommandArgument;
           // File.ReadAllLines(filePath);
            //GridView2.DataSource = File.ReadAllLines(filePath);
            //GridView2.DataBind();
            //string[] content = File.ReadAllLines(filePath);

            //GridView2.DataSource = content.
           // OleDbConnection conn = new OleDbConnection();
           // conn.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:/Users/poonamj/Documents/Visual Studio 2008/Projects/SmartTool/SmartTool/fallout.accdb;User id=admin;Password=";
           // conn.Open();

            string Access = Server.MapPath("App_Data/fallout.accdb");
            string Excel = Server.MapPath("~/Uploads/");
            string connect = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Excel + ";Extended Properties=Excel 8.0;Mode=12;";
            using (OleDbConnection conn = new OleDbConnection(connect))
            {
                using (OleDbCommand cmd = new OleDbCommand())
                {
                    cmd.Connection = conn;
                    cmd.CommandText = "SELECT * INTO [MS Access;Database=" + Access + "].[New Table] FROM [Sheet1$]";
                    conn.Open();
                    cmd.ExecuteNonQuery();
                    conn.Close();
                }
            }

        }

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                string[] filePaths = Directory.GetFiles(Server.MapPath("~/Uploads/"));
                List<ListItem> files = new List<ListItem>();
                foreach (string filePath in filePaths)
                {
                    files.Add(new ListItem(Path.GetFileName(filePath), filePath));
                }
                GridView1.DataSource = files;
                GridView1.DataBind();
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:48:23.540

我想发表评论，但不能。

您检查了以下内容吗？每个人都列出了可以帮助您的可能解决方案。

**微软官方支持页面**：http: [//support.microsoft.com/kb/306269](http://support.microsoft.com/kb/306269)

*   [http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/3479cc5a-2bca-4e9c-9fdb-ec3f96065a52](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/3479cc5a-2bca-4e9c-9fdb-ec3f96065a52)

此外，请尝试使用包含数据源文件名的完整路径。以下是有缺陷的：

```
 string Excel = Server.MapPath("~/Uploads/"); 
```

您想在`Uploads/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:52:20.807

我过去曾使用过这样的工具来解决问题：[http](http://www.filehippo.com/download_unlocker/) ://www.filehippo.com/download_unlocker/ ，更重要的是它是对目录功能的视图锁定。

我不知道，如果我想太多了，但是 'C:\Users\poonamj\Documents\Visual Studio 2008\Projects\SmartTool\SmartTool\Uploads\' 是一个目录，它似乎需要一个文件。

例如，“C:\Users\poonamj\Documents\Visual Studio 2008\Projects\SmartTool\SmartTool\Uploads\db.mdb”是文件的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:21:38.227

您没有为 Excel 指定文件名，这导致了异常。

```
string Excel = Server.MapPath("~/Uploads/MyFile.xls");
string connect = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Excel + ";Extended Properties=Excel 8.0;Mode=12;"; 
```

将文件名添加到 Excel，应该可以解决此问题。

# java - 如何在 Grails 中调用 Java WS 客户端

> ID：14985203
> 
> 赞同：0
> 
> 时间：2013-02-20T16:41:05.327
> 
> 标签：java, grails

[我使用本教程http://java.dzone.com/articles/jax-ws-hello-world](http://java.dzone.com/articles/jax-ws-hello-world)设置了 WS 服务器（Java 客户端当然可以正常工作）并尝试像这样在 Grails 项目中调用客户端：

**客户端.java**

```
public class Client {
    public static void main(String[] args) {
        GreetingImplService service = new GreetingImplService();
        Greeting greeting = service.getGreetingImplPort();
        System.out.println("------->>  Call Started");
        System.out.println(greeting.sayHello("Ali"));
        System.out.println("------->>  Call Ended");
    }
} 
```

**测试控制器.groovy**

```
class TestController {
    def index() {
        Client.main(null);
    }
} 
```

对于 Grails，此命令会引发异常：

```
Greeting greeting = service.getGreetingImplPort(); 
```

完整的堆栈跟踪在这里[http://pastebin.ca/2316018](http://pastebin.ca/2316018)

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:18:43.537

为 Grails安装[WSClient 插件](http://www.grails.org/plugin/ws-client)，然后编写：

```
def proxy = webService.getClient(wsdlURL)
def result = proxy.getGreetingImplPort() 
```

# java - Android sqlite在onItemSelected中检索行

> ID：14985212
> 
> 赞同：-1
> 
> 时间：2013-02-20T16:41:51.757
> 
> 标签：java, android, sqlite, spinner

当以这种方式单击微调器时，我试图检索`_id`我的表格的真实内容：

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    String c = parent.getSelectedItem().toString();
    long id_mark = parent.getItemIdAtPosition(position);
    Toast.makeText(parent.getContext(), "Category: " + c + " | _id: " + id_mark, Toast.LENGTH_LONG).show();
} 
```

我的表：（用户删除了一些列）

```
_id | category_name
---------------------
1   | NAME_HERE_1
3   | NAME_HERE_2
4   | NAME_HERE_3
7   | NAME_HERE_4 
```

Toast 输出为：

```
Category: NAME_HERE_2 | _id: 2 
```

但与我的桌子`id_mark`不同`_id`。那么如何进行呢？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:07:49.990

> But the `id_mark` is different of `_id` of the my table. So how to proceed?

If you're using a CursorAdapter and want `_id` from your table, simply use the forth parameter `id` in `onItemSelected()`. `id` already holds the table's primary key for the selected row.

# r - 在分位数回归中测试斜率

> ID：14985214
> 
> 赞同：0
> 
> 时间：2013-02-20T16:41:57.513
> 
> 标签：r, regression, offset, quantile, quantreg

我正在使用`quantreg`R 中的包对一组数据运行分位数回归 (95%)。

我想将分位数回归的斜率设置为值 1.4，就像我在之前的分析中所做的那样，我想用它来比较我的结果。如果`lm()`使用函数可以做到这一点`offset()`，则使用`rq()`固定分位数（例如 0.025）这是行不通的。

代码没有给出错误，但 1.4 的值对我的结果没有影响。

```
fit.0.025<-rq(y~offset(1.4*x),tau=0.025, data=mydataframe) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:40:58.410

这不应该是这样的未经充分测试的代码吗？（.. 除非拦截列被抑制，否则它仍然是一个要估计的参数，无法“修复”它。）（已编辑，需要重复偏移并使用 -1 而不是 +0）

```
 dfrm <- data.frame(x=runif(1000, 1,100), y=runif(1000, 1,2))
   fit.0.025 < -rq(y ~ x*(1 + offset( rep(1.4, 1000) ) ) -1, tau=0.025, data=dfrm)

# Same as:
fit.0.025<-rq(y ~ x + offset( rep(1.4, 1000)) -1 , tau=0.025, data=dfrm) 
```

老实说，我质疑这是否具有任何统计意义。运行数学运算并不总是会产生可解释的输出。

我之前输入过：

```
fit.0.025<-rq(y ~ x+ offset(1.4), tau=0.025, data=mydataframe) 
```

....但这仅适用于乘法链接。

# bash - 一键打开多个终端

> ID：14985215
> 
> 赞同：0
> 
> 时间：2013-02-20T16:41:58.747
> 
> 标签：bash

```
#!/bin/bash

for ((n=0;n<3;n++))
do
gnome-terminal
done 
```

这是打开三个终端的代码。我在 Ubuntu 桌面上拥有它的图形资产。当我单击图标时，只有一个终端打开，当我关闭终端时，另一个终端打开，这继续到三个。但是当我在终端本身运行脚本时，所有三个终端同时打开。这就是我所追求的，让我在桌面上的图标同时打开它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:45:01.943

```
#!/bin/bash

for i in {0..3}; do
    gnome-terminal &
done 
```

`&`在后台运行命令。（默默地`fork()`）

# tomcat - 无法在 Tomcat 中部署 Grails 应用程序：“pluginManager”上的 MalformedParameterizedTypeException

> ID：14985216
> 
> 赞同：0
> 
> 时间：2013-02-20T16:42:02.530
> 
> 标签：tomcat, grails, deployment, war

我刚刚创建了一个 grails 应用程序（Grails 2.2.0）并构建了 war 文件以将其部署在 apache tomcat 中，但我无法启动该应用程序：

这实际上是我的 Catalina.out

> [http://pastebin.com/YiWPCqHZ](http://pastebin.com/YiWPCqHZ) <-- catalina.out 日志

和我的 BuildConfig.Groovy 文件：

```
grails.servlet.version = "2.5" // Change depending on target container compliance (2.5 or 3.0)
grails.project.class.dir = "target/classes"
grails.project.test.class.dir = "target/test-classes"
grails.project.test.reports.dir = "target/test-reports"
grails.project.target.level = 1.6
grails.project.source.level = 1.6
grails.project.war.file = "target/${appName}-${appVersion}.war"

grails.project.dependency.resolution = {
    // inherit Grails' default dependencies
    inherits("global") {
        // specify dependency exclusions here; for example, uncomment this to disable ehcache:
        // excludes 'ehcache'
    }
    log "error" // log level of Ivy resolver, either 'error', 'warn', 'info', 'debug' or 'verbose'
    checksums true // Whether to verify checksums on resolve

    repositories {
        inherits true // Whether to inherit repository definitions from plugins

        grailsPlugins()
        grailsHome()
        grailsCentral()

        mavenLocal()
        mavenCentral()

        // uncomment these (or add new ones) to enable remote dependency resolution from public Maven repositories
        mavenRepo "http://snapshots.repository.codehaus.org"
        //mavenRepo "http://repository.codehaus.org"
        //mavenRepo "http://download.java.net/maven/2/"
        //mavenRepo "http://repository.jboss.com/maven2/"
    }
    dependencies {
        // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.

        runtime 'mysql:mysql-connector-java:5.1.22'
    }

    plugins {
        runtime ":hibernate:$grailsVersion"
        runtime ":jquery:1.8.0"
        runtime ":resources:1.2.RC2"

        // Uncomment these (or add new ones) to enable additional resources capabilities
        //runtime ":zipped-resources:1.0"
        //runtime ":cached-resources:1.0"
        //runtime ":yui-minify-resources:0.1.5"

        build ":tomcat:$grailsVersion"
        runtime ":database-migration:1.2.1"
        compile ':cache:1.0.1'
       // compile ':db-reverse-engineer:0.5'
        compile ':shiro:1.1.4'
        compile ':jxl:0.54'
        compile ":facebook-sdk:0.4.8"
        compile ":twitter4j:0.3.2"
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T11:33:07.237

我有一个类似的例外，但我不确定我的解决方案是否也适用于你。我的问题是依赖项（在我的例子中是 http-builder）依赖于较旧的 Groovy 版本。因此，我在 war 文件的 WEB-INF/lib 中有两个不同版本的 Groovy。在 BuildConfig.groovy（见下文）中添加排除项后，问题消失了。

```
inherits("global") {
    excludes 'groovy'
} 
```

# python - 如果索引超出 Python 中 While 循环的范围，则中断循环

> ID：14985218
> 
> 赞同：1
> 
> 时间：2013-02-20T16:42:06.547
> 
> 标签：python, arrays, matrix, while-loop, indexoutofboundsexception

我有一个看起来像这样的while循环：

```
while a[xp][yp] - a[xp-1][yp] == 0  and a[xp][yp] - a[xp+1][yp] == 0 and a[xp][yp] - a[xp][yp-1] == 0 and a[xp][yp] - a[xp][yp+1] == 0:
    c=randint(0,3)
    if c==0:
        xp=xp+1; yp=yp
    elif c==1:
        xp=xp-1; yp=yp
    elif c==2:
        xp=xp; yp=yp+1
    else:
        xp=xp; yp=yp-1
    xp=xp; yp=yp 
```

问题是，如果 xp 或 yp = 0 或 n（数组在 x 方向或 y 上的长度，它是一个方阵），那么 while 循环中的条件就会失效，我会得到一个越界错误。如果 xp=0 或 xp=n 或 yp=0 或 yp=n （我有一段单独的代码可以做到这一点），我只想获得一组新的坐标，然后让 while 循环再次运行。

代码的性质似乎是每 4 次代码中约有 1 次运行而不会超出范围。我只需要它继续运行，直到它发生工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:06:09.447

您可以简单地检查该操作是否会将索引推出越界，如下所示：

```
if c==0 and xp < len(a)-1:
  xp += 1
elif c==1 and xp > 0:
  xp -= 1
# etc... 
```

这将确保在实际更改*之前*`xp`保持在界限内，而不是事后查看。

 ** * *

第二个问题在您的`while`声明中 - 即使您确保`xp`并且`yp`在数组的范围内，您也可以在初始条件下检查*外部：*

```
while a[xp][yp] - a[xp-1][yp] == 0 and a[xp][yp] - a[xp+1][yp] == 0  \ 
  and a[xp][yp] - a[xp][yp-1] == 0 and a[xp][yp] - a[xp][yp+1] == 0: 
```

在这里，我假设它`a`的大小为 10 x 10（索引从 0 到 9）。如果我们设置`xp`为 0 和`yp`9，那么这将是：

```
while a[0][9] - a[-1][9] == 0 and a[0][9] - a[1][9] == 0 \
      a[0][9] - a[0][10] == 0 and a[0][9] - a[0][10]: 
```

`a[10]`将抛出越界错误，因此您必须确定当索引位于数组边界上时如何更改循环。请注意，`a[9]`它仍然是数组的有效索引 - 它正在检查*下一个*存在问题的索引。

顺便说一句，实际上`a[-1]` *不会*引发异常，尽管这对您来说可能是一个逻辑错误 -[负索引将访问数组中的最后一个元素](http://effbot.org/zone/python-list.htm#accessing)。

* * *

修复它的一种可能方法，尽管它取决于您需要做什么：Python 会使[operator](http://docs.python.org/2/library/stdtypes.html?highlight=short%20circuit#boolean-operations-and-or-not)[短路`or`](http://docs.python.org/2/library/stdtypes.html?highlight=short%20circuit#boolean-operations-and-or-not)，因此可以编写类似这样的内容而不会引发异常：

```
while (xp <= len(a)-2 or a[xp][yp]-a[xp+1][yp] == 0) and \
      (xp > 1         or a[xp][yp]-a[xp-1][yp] == 0) and #etc... 
```

这里，如果小于`xp`（*第*`len(a)-2`一个子句求值为真），则语句的另一半`or`不会被求值，越界异常也不会发生，循环会继续运行（只要`xp`也是大于 1，并且语句的其余部分也计算为真）。*

# objective-c - 带有图像的 UIButton 中的标题

> ID：14985219
> 
> 赞同：0
> 
> 时间：2013-02-20T16:42:13.110
> 
> 标签：objective-c, cocoa-touch

我在 a 中设置了一张图片，`UIButton`但我需要在这张图片上方设置标题。我怎样才能做到这一点？

```
[button setImage:[UIImage imageNamed:@"btn_select_s.png"] forState:0];
[button setImage:[UIImage imageNamed:@"btn_select_p.png"] forState:1];
[button setTitle:@"my title" forState:0]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:47:39.460

您可以使用 UIButton 的 titleEdgeInsets 和 imageEdgeInsets 来根据需要定位标题和图像。

[请参阅 Apple 的 UIButton 参考文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html)

例如，在 UIButton 子类中：

```
[self setImageEdgeInsets:UIEdgeInsetsMake(imageFrame.origin.y, imageFrame.origin.x, 0, 0)];
[self setTitleEdgeInsets:UIEdgeInsetsMake(labelFrame.origin.y, labelFrame.origin.x, 0, 0)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:46:37.303

您需要设置按钮的背景图像：

```
[button setBackgroundImage:[UIImage imageNamed:@"foo"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:49:24.333

```
[button setContentHorizontalAlignment:UIControlContentHorizontalAlignmentLeft];
[button setContentVerticalAlignment:UIControlContentVerticalAlignmentTop];

//Use you values for edge insets here.
[button setTitleEdgeInsets:UIEdgeInsetsMake(20.0f, 10.0f, 0.0f, 0.0f)]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-08T02:51:34.597

这里有一个方便的 UIButton 子类：
[https ://github.com/lionhylra/FlexButton](https://github.com/lionhylra/FlexButton)

它具有以下功能： - 它提供 4 种布局样式。
- 它和 UIButton 一样简单。
- 当你调整按钮的大小时，imageView 和 titleLabel 的大小会相应地正确地改变。他们不会陷入混乱。这是使用边缘插图的本质区别。
- TitleLabel 和 imageView 将始终垂直和水平居中。

# java - Android，如何将变量作为指向函数的指针传递？

> ID：14985220
> 
> 赞同：0
> 
> 时间：2013-02-20T16:42:14.690
> 
> 标签：java, android

如何将变量作为指向函数的指针传递？我有以下要重构的代码

```
 public static HttpResponse getJSONEntityFromURL(Context context, String url) throws ClientProtocolException, IOException {
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(url);
        httpget.addHeader("Accept", "application/json");
        httpget.addHeader("Content-Type", "application/json; charset=UTF-8");
        HttpResponse response;

        response = httpclient.execute(httpget);
        return response;
    } 
```

像这样

```
 public static HttpResponse getJSONEntityFromURL(Context context, String url) throws ClientProtocolException, IOException {
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(url);
            setHeaders(httpget);
        HttpResponse response;

        response = httpclient.execute(httpget);
        return response;
    }

private static void setHeaders(HttpRequestBase httpget) {
    httpget.addHeader("Accept", "application/json");
    httpget.addHeader("Content-Type", "application/json; charset=UTF-8");
} 
```

我假设我需要将 httpget 参数作为指针传递？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:44:26.803

> 我假设我需要将 httpget 参数作为指针传递？

不，因为 Java 没有指针。

您那里的代码看起来不错——您正在将`HttpGet`对象传递`setHeaders()`给它并在其上调用方法。如果您当前的语法有特定问题，请解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:44:48.117

我会用那个

```
private static void setHeaders(final HttpRequestBase httpget) {
  httpget.addHeader("Accept", "application/json");
  httpget.addHeader("Content-Type", "application/json; charset=UTF-8");
} 
```

确定它不是一个指针，但在这种情况下，引用 httpget 被更改而不返回 HttpRequestBase。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:47:49.397

Java 只允许你传递引用，因为 Java 不实现指针算法

All primitive types are passed by copy, and all object types are passed by ref. (By copy, but the copy of the memory address instead of duplicating the whole object.)

the way you did i believe is the correct one:

```
private static void setHeaders(HttpRequestBase AGet) {
    AGet.addHeader("Accept", "application/json");
    AGet.addHeader("Content-Type", "application/json; charset=UTF-8");
} 
```

Unless you gonna need to use this method somewhere else I recommend the first code.

[http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html](http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html) <- documentation

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T16:54:35.260

You can use the HttpMessage interface as seen below: -

[http://developer.android.com/reference/org/apache/http/HttpMessage.html](http://developer.android.com/reference/org/apache/http/HttpMessage.html)

This will allow you to accept an implementation of this interface, i.e. an instance of HttpGet

i.e: -

```
private static void setHeaders(HttpMessage httpMessage) 
{
    httpMessage.addHeader("Accept", "application/json");
    httpMessage.addHeader("Content-Type", "application/json; charset=UTF-8");
} 
```

# c# - 动态 Linq 查询未按预期工作 - 我做错了什么？

> ID：14985223
> 
> 赞同：1
> 
> 时间：2013-02-20T16:42:22.123
> 
> 标签：c#, linq, dynamic-linq

我正在尝试使用 LinqPad 构建一个基本的动态 Linq 查询。我的方法要求用户选择 1 - 3 个选项，然后根据他们的输入动态构建查询。

```
public void FilteredPropertySearch()
{
    bool addAnotherOption = true;
    int option;
    Dictionary<int, bool> parameters = new Dictionary<int, bool>();
    var predicate = PredicateBuilder.False<ResidentialProperty>();

    Console.WriteLine("Follow instructions to filter property search results");

do
{
    // get user input

    option = int.Parse(Console.ReadLine());

    switch(option)
    {
        case 1:
            parameters.Add(1, true);
            break;

    // more cases - when case 0 addAnotherOption = false, loop ends

        default:
            Console.WriteLine("That was not a valid option");
            break;
    }

}while(addAnotherOption == true);

    foreach(KeyValuePair<int, bool> p in parameters)
{   
    if(p.Key == 1 && p.Value == true)
        predicate = predicate.Or (c => c.HasBackGarden);
    if(p.Key == 2 && p.Value == true)
        predicate = predicate.Or (c => c.HasFrontGarden);
    if(p.Key == 3 && p.Value == true)
        predicate = predicate.Or (c => c.HasSecureParking);
}

ResidentialProperties.Where (predicate).Dump();

} 
```

循环应该根据`foreach`用户的输入构建查询，但是，例如，当我将字典中的第一个值设为 true 并且不选择其他值时，它不会返回任何结果。据我所知，它绝对应该在我的数据库表中有一些满足`Key(1)`真实的值。

我应该在's`query`之后做其他事情吗？`if``foreach`

**编辑**

我改用了谓词构建器，当我使用（根据编辑的代码）时，它似乎（有点）工作`predicate.Or`，但它只返回我选择的第一个选项，而不是构建表达式树。我认为更改`predicate.Or`为`predicate.And`会将每个选定的用户输入添加到过滤器表达式中。

如果用户选择了所有三个选项，我希望只返回 HasBackGarden、HasFrontGarden 和 HasSecureParking 列为 true 的行。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:46:03.177

如果您想将结果集限制为满足**所有**条件的记录，那么您应该使用`.And`而不是正确的`.Or`，但为了做到这一点，您需要从`PredicateBuilder.True<ResidentialProperty>()`代替开始`False`。

这是因为在添加任何过滤器之前，正确的结果集包含所有记录，并且每个后续过滤器都会限制结果集。如果以 开头`False`，则没有任何记录可能满足谓词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:00:50.937

从您的代码看来，您正在对一个空的可枚举变量“查询”进行操作。请记住，您所说的查询是数据集，而 Where 语句是对该数据集的查询。因此，第一个查询是针对空数据集的，看起来来自 foreach 的其他查询只会优化该空集。

此外，您可以只做 .Where(q => q.HasWhatever) 因为这些是布尔值。

# javascript - 根据下拉列表中的选择设置 CSS 规则

> ID：14985225
> 
> 赞同：0
> 
> 时间：2013-02-20T16:42:32.733
> 
> 标签：javascript, jquery, css

我有文本框和下拉对，其 id 是动态生成的。我正在尝试根据下拉列表中的选择在文本框上设置 css 规则（类）。我在下拉列表中有一个索引，用于动态导出下拉列表的 id。如何在文本框上设置 CSS 规则。如果我尝试使用 JavaScript 设置类，则在刷新页面之前更改不会反映。

我愿意使用纯 javascript 或 jquery 或两者的混合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:54:02.380

将一个类添加到您的选择中，以便您可以更轻松地使用 jQuery 选择它们。

```
<div>
    <select id="Generated1234" class="cssRule">
        <option value="class1">Class #1</option>
        <option value="class2">Class #2</option>
    </select>
    <input type="text" name="Generated1234_text"/>
</div> 
```

jQuery 代码，假设您的输入文本框是选择的兄弟。您可能需要更改最后一行以选择正确的文本框。

```
$(document).ready(function(){
    $('select.cssRule').change(function(){
        var $this = $(this);
        var className = $this.val();
        $this.siblings('input[type=text]').attr('class', className);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:14:32.540

你可以尝试类似的东西；

HTML;

```
<select id="selectoptions" class="cssRule">
        <option class="class1" value="red">red</option>
        <option class="class2" value="blue">blue</option>
    </select>
<input id="mytext" type="text" name="mytext"/> 
```

JavaScript; //将代码包装在document.ready.function中

```
$("select").change(function () {
    var color = $("#selectoptions").val();
    $("#mytext").css("background",color);
}); 
```

CSS；

```
#mytext{
    background:red;
} 
```

这是一个**[工作现场演示](http://jsfiddle.net/qRJnE/)**

# c++ - 为什么 Win32 API 中不使用标准数据类型？

> ID：14985229
> 
> 赞同：17
> 
> 时间：2013-02-20T16:42:42.287
> 
> 标签：c++, c, winapi, types

我学习 Visual C++ Win32 编程已经有一段时间了。为什么使用 , 等数据类型`DWORD`而不是, 等`WCHAR`数据类型？`UINT``unsigned long``char``unsigned int`

我必须记住何时使用 WCHAR 而不是 const char *，这真的让我很烦。为什么不首先使用标准数据类型？如果我记住 Win32 等效项并将它们也用于我自己的变量会有帮助吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-20T16:51:03.467

是的，您应该为函数的参数使用正确的数据类型，否则您可能会遇到麻烦。

并且这些类型以它们的方式定义而不是使用`int`等等`char`的原因是它`int`从操作系统的接口中删除了“编译器认为应该调整大小的任何内容”。这是一件非常好的事情，因为如果您使用编译器 A、编译器 B 或编译器 C，它们都将使用相同的类型——只有库接口头文件需要做正确的事情来定义类型。

例如，通过定义非标准类型，很容易`int`从 16 位更改为 32 位。Windows 的第一个 C/C++ 编译器使用 16 位整数。直到 1990 年代中后期，Windows 才获得 32 位 API，直到那时，您使用`int`的是 16 位。想象一下，您有一个使用数百个`int`变量的运行良好的程序，突然之间，您必须将所有这些变量都更改为其他变量……这不是很好，对 - 尤其是其中一些变量不需要更改，因为将某些代码移至 32 位 int 不会产生任何影响，因此更改这些位没有意义。

应该注意的`WCHAR`是，与`const char`-不同`WCHAR`的是“宽字符”，`wchar_t`可比较的类型也是如此。

因此，基本上，“定义我们自己的类型”是一种保证可以更改底层编译器架构的方法，而无需更改（大部分）源代码。所有进行机器相关编码的大型项目都会做这种事情。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-20T16:52:00.467

内置类型的大小和其他特性（例如`int`和）`long`可能因编译器而异，通常取决于运行代码的系统的底层架构。

例如，在最初实现 Windows 的 16 位系统上，`int`只有 16 位。在更现代的系统上，`int`是 32 位。

Microsoft 开始定义类型，`DWORD`以便它们的大小在其编译器的不同版本或用于编译 Windows 代码的其他编译器的不同版本中保持相同。

这些名称旨在反映 Microsoft 定义的底层系统的概念。A`DWORD`是一个“双字”（如果我没记错的话，它在 Windows 上是 32 位，即使机器“字”在现代系统上可能是 32 位甚至 64 位）。

使用 中定义的固定宽度类型可能会更好`<stdint.h>`，例如`uint16_t`和`uint32_t`-- 但这些仅由 1999 ISO C 标准引入 C 语言（即使在今天，微软的编译器也不完全支持）。

如果您正在编写与 Win32 API 交互的代码，则绝对应该使用该 API 定义的类型。对于不与 Win32 交互的代码，请使用您喜欢的任何类型，或者您正在使用的接口建议的任何类型。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-20T16:53:18.200

我认为这是一个历史偶然。

我的理论是，最初的 Windows 开发人员知道标准 C 类型大小取决于编译器，也就是说，一个编译器可能有 16 位整数，而另一个编译器可能有 32 位整数。因此他们决定使用一系列 typedef 使 Window API 在不同编译器之间可移植：`DWORD`无论您使用什么编译器/架构，它都是一个 32 位无符号整数。当然，现在您将使用`uint32_t`from `<stdint.h>`，但当时不可用。

然后，通过 UNICODE 的事情，他们得到了`TCHAR`vs. `CHAR`vs.`WCHAR`的问题，但那是另一回事了。

然后，它失去了控制，你得到`typedef void VOID, *PVOID;`了完全无稽之谈的美好事物。

# python - 使用 numpy.loadtxt() 将文本文件作为字符串加载

> ID：14985233
> 
> 赞同：25
> 
> 时间：2013-02-20T16:42:44.247
> 
> 标签：python, numpy

我想将一个大文本文件（大约 1 GB，3*10^6 行和 10 - 100 列）加载为包含字符串的 2D np 数组。但是，似乎 numpy.loadtxt() 仅将浮点数作为默认值。是否可以为整个数组指定另一种数据类型？我试过以下没有运气：

```
loadedData = np.loadtxt(address, dtype=np.str) 
```

我收到以下错误消息：

```
/Library/Python/2.7/site-packages/numpy-1.8.0.dev_20224ea_20121123-py2.7-macosx-10.8-x86_64.egg/numpy/lib/npyio.pyc in loadtxt(fname, dtype, comments, delimiter, converters, skiprows, usecols, unpack, ndmin)
    833             fh.close()
    834
--> 835     X = np.array(X, dtype)
    836     # Multicolumn data are returned with shape (1, N, M), i.e.
    837     # (1, 1, M) for a single row - remove the singleton dimension there

ValueError: cannot set an array element with a sequence 
```

有任何想法吗？（我事先不知道我的文件中的确切列数。）

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-20T16:50:59.723

改为使用[`genfromtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)。这是一种比以下更通用的方法`loadtxt`：

```
import numpy as np
print np.genfromtxt('col.txt',dtype='str') 
```

使用文件`col.txt`：

```
foo bar
cat dog
man wine 
```

这给出了：

```
[['foo' 'bar']
 ['cat' 'dog']
 ['man' 'wine']] 
```

如果您希望每行具有相同的列数，请读取第一行并设置属性`filling_values`以修复任何缺失的行。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-20T19:44:00.213

[Pandas](https://en.wikipedia.org/wiki/Pandas_%28software%29)中也有[`read_csv`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html)，它速度快，支持非逗号列分隔符和按列自动键入：

```
import pandas as pd
df = pd.read_csv('your_file',sep='\t') 
```

如果您更喜欢该类型，则可以将其转换为 NumPy 数组：

```
import numpy as np
arr = np.array(df) 
```

这是迄今为止我遇到的最简单、最成熟的文本导入方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T14:56:03.380

您是否需要一个 NumPy 数组？否则，您可以通过将数据加载为嵌套列表来加快速度。

```
def load(fname):
    ''' Load the file using std open'''
    f = open(fname,'r')

    data = []
    for line in f.readlines():
        data.append(line.replace('\n','').split(' '))

    f.close()

    return data 
```

对于 4000x4000 字的文本文件，这比`loadtxt`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-11T08:45:28.343

`np.loadtxt(file_path, dtype=str)` ![在此处输入图像描述](../Images/817f7c6bfc656c4a37ef3e95d3b0c3b9.png)

# c# - CloubBlockBlob AcquireLease 为两个工作角色提供两个租约

> ID：14985234
> 
> 赞同：2
> 
> 时间：2013-02-20T16:42:45.267
> 
> 标签：c#, azure-blob-storage

我正在开发一个应用程序，但有时会出现错误，我必须将多个工作角色与 blob 上的租约同步。

下面是我的工人角色的初始化代码

```
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("StorageAccount"));
string blobContainerName = RoleEnvironment.GetConfigurationSettingValue("BlobContainer");
CloudBlobContainer blobContainer = storageAccount.CreateCloudBlobClient().GetContainerReference(blobContainerName);
blobContainer.CreateIfNotExists();
string blobName = RoleEnvironment.GetConfigurationSettingValue("BlobToBeLeased");
_blob = blobContainer.GetBlockBlobReference(blobName);

if (!_blob.Exists())
{
    using (var ms = new MemoryStream(Encoding.UTF8.GetBytes("This is dummy data")))
    {
        try
        {
            _blob.UploadFromStream(ms);
        }
        catch (StorageException storageException)
        {
            if (storageException.RequestInformation.HttpStatusCode != 412)
                throw;
        }
    }
} 
```

这是我的 AcquireLease 方法：

```
private void AcquireLease()
{
    try
    {
        var leaseId = _blob.AcquireLease(null, null);
        Trace.WriteLine("==========> Lease acquired! <========== ID => " + leaseId);
        _accessCondition = new AccessCondition {LeaseId = leaseId};
    }
    catch (Exception)
    {
        Trace.WriteLine("==========> Lease rejected! <==========");
    }
} 
```

问题截图： ![在此处输入图像描述](../Images/82791f992784b8ada8e0a2ada4cf7a77.png)

问题是当我调用 AcquireLease 方法时，它有时会给我两个租约......任何人都知道如何解决这个问题......

CloudBlockBlob 操作是原子的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:24:31.370

在与 Microsoft 的一位人员交谈后，该模拟器似乎与存储服务本身存在一些差异。

在 Azure 上运行相同的代码可以正常工作！

这个答案对模拟器 v1.8.0.0 有效。

# sql - 对 Oracle 表中的唯一记录集进行采样

> ID：14985236
> 
> 赞同：0
> 
> 时间：2013-02-20T16:42:55.597
> 
> 标签：sql, oracle11g, query-performance

我有一个 Oracle 表，我需要从中为给定的一组唯一列组合的每种类型选择给定百分比的记录。

例如，

```
SELECT distinct column1, column2, Column3 from TableX; 
```

为我提供了该表中唯一记录的所有组合。我需要每个此类组合中每行的百分比。目前我正在使用以下查询来完成此操作，这既冗长又缓慢。

```
SELECT *  
FROM tableX Sample ( 3 ) 
WHERE Column1 = ‘value1’ and       
      Column2 = ‘value2’ and       
      Column3 = ‘value3 

UNION 

SELECT *  
FROM tableX Sample ( 3 ) 
WHERE Column1 = ‘value1’ and       
Column2 = ‘value2’ and       
Column3 = ‘value4 

UNION  
 …   
 …  
SELECT *  
FROM tableX Sample ( 3 ) 
WHERE Column1 = ‘valueP’ and       
Column2 = ‘valueQ’ and       
Column3 = ‘valueR’ 
```

“值”中的后缀组合对于该表是唯一的（从第一个查询中获得）

如何提高查询的长度和速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:52:24.393

这是一种方法：

```
select t.*
from (select t.*,
             row_number() over (partition by column1, column2, column3 order by dbms_random()
                               ) as seqnum,
             count(*) over (partition by column1, column2, column3) as totcnt
      from tablex t
     ) t
where seqnum / totcnt <= 0.10 -- or whatever your threshold is 
```

它用于`row_number()`以随机顺序为每个组中的行分配一个序号。该`where`子句选择您想要的比例。

# java - 在 Java GWT 中的多个包之间共享相同的单例

> ID：14985237
> 
> 赞同：-1
> 
> 时间：2013-02-20T16:42:56.267
> 
> 标签：java, oop, gwt, singleton

我有一个 GWT 应用程序。该`client`包有许多子包，如`Foo1`,`Foo2`等（这些包包含多个其他类），以及普通类，如`class1`, `class2`。在其中一个类中`client`，我定义了一个`singleton` `Init`. 现在`client`（直接在它下面，以及在像`Foo1`under之类的包中`client`）下的所有类都共享相同的单例，并且在任何一个中修改它也会反映在其他类中。

但是，当我尝试在`server`包下的类中使用它时（`com.google.gwt.sample.StockWatcher.server`，客户端包正在`com.google.gwt.sample.StockWatcher.client`），该类总是获得未初始化的单例，也就是说，类中对其所做的更改（通过设置器和获取器）`client`没有反映在那里. 我怀疑这是因为`Init`已在下定义`client`并且我试图在不同的包中使用它`server`，这就是原因。

所以我`Init`从 中删除了该类`client`，并将其添加到基础`StockWatcher`包（`com.google.gwt.sample.StockWatcher`）中，以便`client`和下的所有类`server`都可以使用它。然后 Java 抛出一个错误消息，比如**No source code available for type `com.google.gwt.sample.StockWatcher.init`，你忘了继承一个必需的模块吗？**.

所以看起来除了`public`文件夹和`StockWatcher.gwt.xml`文件之外`StockWatcher`，我无法定义其他类。

那么有没有办法在一个包中定义一个单例并在其他包中使用相同的实例呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:59:33.370

奇怪的是，当您在我的计算机上更改单例[默认语言环境时，它并没有在我的计算机上更改。](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html#setDefault%28java.util.Locale%29)它甚至不被我单机上的不同 Java 应用程序共享。

更严重的是，它`client`与`server`包无关，它与代码执行的位置有关（在浏览器中，由 GWT 转换为 JavaScript，与在您的服务器上）

# appfog - 如何将应用程序分块推送到 Appfog？

> ID：14985239
> 
> 赞同：1
> 
> 时间：2013-02-20T16:43:02.373
> 
> 标签：appfog

我想知道是否有一种方法可以指定您在 appfog 上修改的任何特定部分的文件夹，当您在 appfog 上推送或更新应用程序时，[它](http://appfog.com)会从您推送的当前目录上传所有内容，但有时您会修改一些应用程序的一部分，但您不想上传整个应用程序

当您尝试上传时，Appfog 存在一些应用程序大小问题，我想知道是否有一种方法可以指定应用程序的一部分而不是整个应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T05:50:10.217

目前还不能这样做。每次更新时，您的应用程序的文件系统都会被销毁，并且应用程序会重新部署在一个或多个不同的应用程序实例上。这意味着部分更新会破坏先前更新的文件。

AppFog 的云控制器会在推送和更新期间缓存文件，这样 AF 工具就不必为每次更新重新发送未更改的文件。如果您的更新失败，请再试一次，它基本上会从中断的地方继续。有时可能需要多次更新重试来构建此缓存。缓存确实会过期，因此几天后可能需要重新开始更新。然而，100mb 或更大的文件仍然是一个问题。

如果您的应用程序内容丰富或媒体丰富，您可以使用像 amazon S3 这样的**CDN**来存储 zip、图像、视频和音乐。这将为您的应用提供更好的性能并加快您的自动更新。

# c# - 如何读取多列 ListView 控件的列名？

> ID：14985240
> 
> 赞同：3
> 
> 时间：2013-02-20T16:43:04.683
> 
> 标签：c#, listview, multiple-columns

查找 ListView 列名称的最佳方法是什么？

我使用在此论坛上找到的过程将 DataTable 转换为 List，但我无法将 Id 列放在首位，尤其是因为并非所有 DataTable 都有“Id”列。

我可以在集合 listView.Columns.ToString() 中搜索，但我看到的格式是：

“列标题：文本：ID”

我必须对其进行解析以找到正确的名称“Id”。这看起来不像 C# 的精神。

我也试过了：`listView.SelectedItems[0].SubItems["Id"]` 但这不会编译。

* * *

好的，这是完整的代码。确切的问题是用户在 listView 中使用 Courier Names 和 Ids 选择了一行，但它也可能是 Ids 和 Names，按此顺序。查找所选快递员 ID 的最快方法是：

```
ListViewItem si = listCouriers.SelectedItems[0];
CourierId = si.SubItems["Id"].Text; 
```

但这不起作用。硬编码的方式是这样的，但我不能保证有一天会使用错误的列：

```
ListViewItem si = listCouriers.SelectedItems[0];
CourierId = si.SubItems[1].Text; 
```

使用@HuorSwords 方法会导致这个不太简单的解决方案，它对我有用，但取决于合理的假设，即列中的列顺序`ColumnHeaderCollection`对应于表单上的显示：

```
ListViewItem si = listCouriers.SelectedItems[0];
string CourierId = null;
int icol = 0;
foreach (ColumnHeader header in listCouriers.Columns)
{
    if (header.Text == "Id")
    {
        CourierId = si.SubItems[icol].Text;
        break;
    }
    icol++;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T16:55:46.443

与`listView.Columns`type一样`ListView.ColumnHeaderCollection`，它包含`ColumnHeader`对象。

包含列`ColumnHeader.Text`标题，因此您可以使用以下命令检查具体列：

```
foreach (ColumnHeader header in listView.Columns)
{
      if (header.Text == "Id")
      {
           // Do something...
      }
} 
```

我不知道是否是最好的方法，但你不需要解析结果来找到“Id”值......

**更新**

另外，您是否尝试使用`String`索引器引用它？>`listView.Columns["Id"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T17:28:08.810

使用此代码：

```
private ColumnHeader GetColumn(string Text)
{
    for (int i = 0; i < listView1.Columns.Count; i++)
        for (int j = 0; j < listView1.Items.Count; j++)
            if (listView1.Items[j].SubItems.Count - 1 >= i)
                if (listView1.Items[j].SubItems[i].Text == Text)
                    return listView1.Columns[i];
    return null;
} 
```

只需将项目文本提供给此代码并获取您想要的列的所有内容。

享受 ;）

# jquery - Mouseenter/mouseleave 正确绑定以避免出现闪烁框

> ID：14985244
> 
> 赞同：0
> 
> 时间：2013-02-20T16:43:12.130
> 
> 标签：jquery, html

我有几个靠近的盒子，当任何盒子悬停在上面时，它们会显示一个不同的盒子，这是一个代码片段（不完整，所以没有小提琴）：

```
<div id="big_square_1" class="big_square" style="display:none;"></div>
<div id="big_square_2" class="big_square" style="display:none;"></div>
<div id="big_square_3" class="big_square" style="display:none;"></div>
<div id="big_square_4" class="big_square" style="display:none;"></div> 
```

和 jQuery：

```
 $("#big_square_1").mouseenter(function() {
        $('#big_square_1').css("border", "1px solid #191919").css("height", "98px").css("width","98px");
        $('#hover_Box').fadeIn('fast');
    });
    $("#big_square_1").mouseleave(function() {
        $('#big_square_1').css("border", "inherit").css("height", "100px").css("width", "100px");
        $('#hover_Box').fadeOut('fast');
    });
    $("#big_square_2").mouseenter(function() {
        $('#big_square_2').css("border", "1px solid #191919").css("height", "98px").css("width","98px");
        $('#hover_Box').fadeIn('fast');
        $('#side_box_1').append('<br><br><br><p>This is ARC</p>');
    });
    $("#big_square_2").mouseleave(function() {
        $('#big_square_2').css("border", "inherit").css("height", "100px").css("width", "100px");
        $('#hover_Box').fadeOut('fast');
    }); 
```

我已经分别配置了这些事件，以便以后可以将带有 .html 的内容添加到框中。然而，就目前而言，当这些盒子快速翻转时，“快”根本不够快，它们淡入的盒子最终会闪烁。如何修改我的 mouseenter/mouseleave 以防止这种闪烁？（我是 .stop/.bind 新手）。另外，我知道我可以对多个 CSS 更改使用速记，我只是更喜欢这样做，直到我解决了悬停问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:14:56.073

尝试`.stop(true,true)`在您的 fadeIn 和 fadeOuts 之前放置。

# winapi - 进程崩溃时未释放 Win32 命名互斥锁

> ID：14985247
> 
> 赞同：11
> 
> 时间：2013-02-20T16:43:15.797
> 
> 标签：winapi, win32-process

我有 2 个进程（A、B）共享相同的互斥锁（使用 WaitForSingleObject / ReleaseMutex 调用）。一切正常，但是当进程 A 崩溃时，进程 B 正在愉快地嗡嗡作响。当我重新启动进程 A 时，出现了死锁。

更深入的调查显示，在进程 A 崩溃后，进程 B 可以成功调用 ReleaseMutex() 两次。

我的解释：进程 A 崩溃后，互斥锁仍然被锁定，但互斥锁的所有权很容易转移到进程 B（这是一个错误）。这就是为什么它愉快地嗡嗡作响，调用 WaitForSingleObject（得到 WAIT_OBJECT_0 作为回报）和 ReleaseMutex（得到 TRUE 作为回报）。

是否可以使用类似于 Mutex 的命名同步原语，以使进程 A 中的崩溃将释放互斥锁？

一种解决方案是使用 SEH 并捕获崩溃并释放互斥锁，但我真的希望 Windows 有一个健壮的原语，不会像进程崩溃那样死锁。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-20T18:10:39.690

关于互斥锁在 Windows 上的工作方式，您必须在这里做出一些基本假设：

*   互斥锁是一个引用计数的操作系统对象。它不会消失，直到互斥体上的最后一个句柄关闭
*   进程终止时未关闭的任何句柄都会被操作系统关闭，从而减少引用计数
*   互斥体是可*重入*的，在同一线程上的互斥体上调用 WaitForSingleObject 成功，需要与相同数量的 ReleaseMutex 调用进行平衡
*   当拥有它的线程在没有调用 ReleaseMutex 的情况下终止时，拥有的互斥锁将*被放弃。*在此状态下对互斥体调用 WaitForSingleObject 会生成 WAIT_ABANDONED 错误返回码
*   它绝不是操作系统中的错误。

所以你可以根据你的观察得出结论。当 A 崩溃时，互斥体没有任何反应，B 仍然有一个句柄。B 可以注意到 A 崩溃的唯一可能方式是 A 在它拥有互斥锁时崩溃。由于 B 将死锁，因此这种可能性非常低并且很容易观察到。更有可能的是，B 会愉快地继续前进，因为它现在完全畅通无阻，没有其他人会再获得互斥体。

此外，A 重新开始时的死锁证明了您已经知道的事情：B 出于某种原因永久拥有互斥锁。可能是因为它递归地获取了互斥锁。您知道这一点是因为您注意到您必须调用 ReleaseMutex 两次。这是您需要修复的错误。

您需要保护自己免受崩溃的兄弟进程的影响，并且需要为此编写显式代码。在同级上调用 OpenProcess 以获取进程对象的句柄。当进程终止时，句柄上的 WaitForSingleObject 调用将完成。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-20T17:25:55.727

如果持有互斥锁的进程崩溃，那么它就会被放弃。如何处理从等待函数返回的状态取决于其他应用程序。

如果它`WAIT_ABANDONED`回来了，那么它可以继续进行，好像一切正​​常（大概是它现在所做的）或“可能不稳定的数据，谨慎行事”。所有权不会自动传递给另一个进程。

# c# - SlimDX 控制器，切换

> ID：14985251
> 
> 赞同：0
> 
> 时间：2013-02-20T16:43:33.943
> 
> 标签：c#, toggle, slimdx

我试图将切换到左方向键，但它不起作用

```
private void SerialTimer_Tick(object sender, EventArgs e)
    {
        bool PreviousCarHeadlights = false;

        if (controls.DPad.Left & !PreviousCarHeadlights)
        {
            CarHeadlightsCheckBox.Checked = !CarHeadlightsCheckBox.Checked;
            PreviousCarHeadlights = !PreviousCarHeadlights;
        }
    } 
```

请有人看看这个并提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:53:32.893

依次浏览您的代码，答案很明显：

首先，您设置`PreviousCarHeadlights`为`false`，然后检查是否`controls.DPad.Left`按下 AND （​​它是，因为您刚刚将其设置为`PreviousCarHeadlights`）。`false``false`

换句话说：只要按下 DPad，无论其先前的状态如何，您的前灯将始终切换，因为`if (!PreviousCarHeadlights)`它是重言式（意思是，它将始终解析为`true`）

此处给出的答案是：在处理切换时，您只需要[切换输入即可。](https://stackoverflow.com/questions/14959638/toggle-an-input)跟踪游戏手柄之前的状态意味着您将始终知道之前按下了哪个按钮。`bool`这比为每个可以切换的按钮跟踪许多要好得多。

# excel - 如何使用存储在 Excel 中的地址向多个收件人发送电子邮件？

> ID：14985261
> 
> 赞同：11
> 
> 时间：2013-02-20T16:44:07.450
> 
> 标签：excel, email, vba, outlook

我正在尝试在 Excel 表单上设置几个按钮来向不同的人群发送电子邮件。
我在一个单独的工作表上制作了几个单元格范围来列出电子邮件地址。

例如，我希望“按钮 A”打开 Outlook 并放入“工作表 B：单元格 D3-D6”中的电子邮件地址列表。然后只需在 Outlook 中点击“发送”即可。

```
Sub Mail_workbook_Outlook_1() 
    'Working in 2000-2010
    'This example send the last saved version of the Activeworkbook
    Dim OutApp As Object 
    Dim OutMail As Object 

    EmailTo = Worksheets("Selections").Range("D3:D6") 

    Set OutApp = CreateObject("Outlook.Application") 
    Set OutMail = OutApp.CreateItem(0) 

    On Error Resume Next 
    With OutMail 
        .To = EmailTo 
        .CC = "person1@email.com;person2@email.com" 
        .BCC = "" 
        .Subject = "RMA #" & Worksheets("RMA").Range("E1") 
        .Body = "Attached to this email is RMA #" & Worksheets("RMA").Range("E1") & ". Please follow the instructions for your department included in this form." 
        .Attachments.Add ActiveWorkbook.FullName 
        'You can add other files also like this
        '.Attachments.Add ("C:\test.txt")

        .Display 
    End With 
    On Error Goto 0 

    Set OutMail = Nothing 
    Set OutApp = Nothing 
End Sub 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T16:48:23.447

您必须遍历范围内的每个单元格`"D3:D6"`并构造您的`To`字符串。简单地将它分配给一个变体并不能解决这个目的。`EmailTo`如果您将范围直接分配给它，它将成为一个数组。你也可以这样做，但是你必须遍历数组来创建你的`To`字符串

**代码**

```
Option Explicit

Sub Mail_workbook_Outlook_1()
     'Working in 2000-2010
     'This example send the last saved version of the Activeworkbook
    Dim OutApp As Object
    Dim OutMail As Object
    Dim emailRng As Range, cl As Range
    Dim sTo As String

    Set emailRng = Worksheets("Selections").Range("D3:D6")

    For Each cl In emailRng 
        sTo = sTo & ";" & cl.Value
    Next

    sTo = Mid(sTo, 2)

    Set OutApp = CreateObject("Outlook.Application")
    Set OutMail = OutApp.CreateItem(0)

    On Error Resume Next
    With OutMail
        .To = sTo
        .CC = "person1@email.com;person2@email.com"
        .BCC = ""
        .Subject = "RMA #" & Worksheets("RMA").Range("E1")
        .Body = "Attached to this email is RMA #" & _
        Worksheets("RMA").Range("E1") & _
        ". Please follow the instructions for your department included in this form."
        .Attachments.Add ActiveWorkbook.FullName
         'You can add other files also like this
         '.Attachments.Add ("C:\test.txt")

        .Display
    End With
    On Error GoTo 0

    Set OutMail = Nothing
    Set OutApp = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-07T04:59:57.847

```
ToAddress = "test@test.com"
ToAddress1 = "test1@test.com"
ToAddress2 = "test@test.com"
MessageSubject = "It works!."
Set ol = CreateObject("Outlook.Application")
Set newMail = ol.CreateItem(olMailItem)
newMail.Subject = MessageSubject
newMail.RecipIents.Add(ToAddress)
newMail.RecipIents.Add(ToAddress1)
newMail.RecipIents.Add(ToAddress2)
newMail.Send 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-22T09:30:38.480

两个答案都是正确的。如果您使用 .TO 方法，则分列是可以的 - 但**不适**用于 addrecipients 方法。在那里你需要拆分，例如：

```
 Dim Splitter() As String
                Splitter = Split(AddrMail, ";")
                For Each Dest In Splitter
                    .Recipients.Add (Trim(Dest))
                Next 
```

# c# - WPF ComboBox 不允许选择

> ID：14985270
> 
> 赞同：0
> 
> 时间：2013-02-20T16:44:40.820
> 
> 标签：c#, wpf, combobox, filter

我有一个`ComboBox`声明如下：

```
<ComboBox 
    Name="cmb" Height="20" Width="125" Margin="5,3,0,0" 
    Text="{Binding SomeList}"
    UpdateSourceTrigger=PropertyChanged}" 
    Validation.ErrorTemplate="{StaticResource errorTemplate}"
    IsEditable ="True"
    IsSynchronizedWithCurrentItem="True"/> 
```

我正在尝试根据在`ComboBox`. 现在，我尝试了自定义控件，处理`KeyUp`事件`ComboBox`等等，但我经常遇到的一个问题是，当我在第一个匹配项中输入一个字母时，`ComboBox`第一个匹配项被填充，`TextBox`然后过滤器只返回使列表匹配的项目只有一项。这是`KeyUp`事件处理程序和`FilterPredicate`：

```
private bool FilterPredicate(object value)
{
    if (value == null)
        return false;

    if (cmb.Text.Length == 0)
        return true;

    string prefix = cmb.Text;

    return value.ToString().ToLower().Contains(prefix.ToLower());
}

private void cmb_KeyUp(object sender, System.Windows.Input.KeyEventArgs e)
{
    ComboBox cbSender = sender as ComboBox;
    cbSender.Items.Filter = null;
    if (e.Key == System.Windows.Input.Key.Escape || e.Key == System.Windows.Input.Key.Tab ||
        e.Key == System.Windows.Input.Key.Enter)
    {
        cbSender.IsDropDownOpen = false;
    }
    else if (e.Key == System.Windows.Input.Key.Down)
    {
        cbSender.IsDropDownOpen = true;
    }
    else
    {
        if (cbSender.HasItems)
        {
            cbSender.IsDropDownOpen = true;
        }
    }
} 
```

的过滤器`ComboBox`绑定到`FilterPredicate`构造函数中的 。

如果您需要更多信息，请与我们联系。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:21:03.657

禁用 isTextSearchEnabled 属性对我有用。

# javascript - Javascript键值数组存储

> ID：14985275
> 
> 赞同：1
> 
> 时间：2013-02-20T16:44:48.307
> 
> 标签：javascript, jquery, html

我今天在这里有一个与键值对数组有关的问题。

我的html如下

```
<input type="checkbox" class="data" id="task_checked" value="1" email="a@a.com">
<input type="checkbox" class="data" id="task_checked" value="2" email="b@b.com"> 
```

我想将以下数据存储为如下数组：

```
"1" => "a@a.com"
"2" => "b@b.com" 
```

我的Javascript目前如下：

```
var newTasksArr = new Array();

$("#task_checked:checked").each(function() {
    var email = $(this).attr("email");
    var id = $(this).val();
    newTasksArr['id'] = email;

}); 
```

也许我使用的 Jquery .each() 错误，有人可以解释一下我的问题吗？

谢谢你的阅读。问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:48:06.933

两个问题：

在 Javascript 中，数组可能只有顺序的数字键。如果你想使用字符串作为键，你需要一个对象。

如果你想插入一个键等于 的值的元素`id`，那么你需要`newTasksArr[id] = email;`不带引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:48:32.357

你几乎是对的，你只需要删除引号，`'id'`以便它使用 id 变量包含的值，而不是文字 string `'id'`。

您还应该使用对象 ( `{}`) 而不是数组 ( `[]`)。

```
var newTasks = {};
$("#task_checked:checked").each(function() {
    var email = $(this).attr("email");
    var id = $(this).val();
    newTasks[id] = email;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T16:53:02.817

避免在标记中重复 ID。以下应该会有所帮助，但是您可能希望将 jquery 选择器调整为包含上下文。

```
var arr = {};

$('input:checked').each(function() {
    var $t = $(this);

    var email = $t.attr("email");
    if (!email) {
        // you may wish to do something if email is missing
    }

    var id = $t.val();
    if (!id) {
        // deal with the error
    }

    arr[id] = email;
}); 
```

# java - 从 MySQL 中读取 Nutch 爬取的数据

> ID：14985276
> 
> 赞同：1
> 
> 时间：2013-02-20T16:44:49.743
> 
> 标签：java, mysql, nutch

我写了一个程序来在 MySQL 中存储 nutch(2.1) 爬取的结果。它工作正常。我得到了为搜索指定的文件格式。我得到几个`jpeg`文件。我想从数据库中获取这些图像（我不确定它们是否被存储）。我有一个带有图像 URL 的字段。我可以去那里取。但是，nutch 在 MySQL 中存储这么多数据有什么用。你能帮我解决这个问题吗？
我正在使用以下代码：

```
 String crawlArg = "urls  -threads 5";

    // Run Crawl tool

     try {
             ToolRunner.run(NutchConfiguration.create(), new org.apache.nutch.crawl.Crawler(),
                             tokenize(crawlArg));
     } catch (Exception e) {
             e.printStackTrace();
             return;
     } 
```

请询问您可能需要的更多详细信息。我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:19:35.360

我错过了存储图像的`MySQL`内容字段。`LongBlob`

# java - 尝试确认延迟加载是否有效

> ID：14985277
> 
> 赞同：3
> 
> 时间：2013-02-20T16:44:51.553
> 
> 标签：java, hibernate, lazy-loading

我正在学习休眠，并且正在使用调试器来了解休眠如何获取对象。我在我的 XML 中启用了延迟加载，并使用创建查询来获取对象。这个对象有一个与之关联的 Set。

当我在调试器中查看变量值时，它似乎完全加载了对象图，即没有懒惰地获取集合及其属性。我可以想到几个原因可能会出现这种情况。

1) 我的 xml / 配置有问题，我启用了急切获取。我不确定是不是这种情况，一切都是默认设置，即延迟获取。

2) IDE 调试器的工作方式是当我查看它们时导致休眠触发延迟加载。

3) Hibernate 正在从二级缓存中获取整个对象图。我试图禁用它，但这似乎没有效果

还有其他想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T16:47:16.687

调试（准确地说是显示延迟字段）已经触发延迟加载。获取实体，分离它并访问您的惰性字段。如果延迟加载有效，应该抛出某种异常。

如果您真的想知道hibernate 是*如何*做到的，请查看源代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T09:41:02.450

@atamanroman 的回答是完全正确的。我只是想补充一些细节。为了在 JavaEE 环境中测试延迟加载，我使用了 Arquillian 测试。在测试类中，使用 a`UserTransaction`来控制事务边界。提交事务后，访问延迟加载的属性并期望`Exception`

```
@Inject
private UserTransaction tx;

@Test(expected=Exception.class)
public void testLazyLoading() throws Exception {

    tx.begin();
    MyEntity entity = em.find(entityId);
    tx.commit();

    entity.getLazyLoadedProperty().someMethod();
} 
```

请注意，为了触发延迟加载属性的加载，通常仅在事务内部调用 getter 是不够的，您还必须对属性执行一些操作，例如调用`size()`列表。否则，getter 将简单地返回一个代理。

# struts2 - 无法使用 JFree 在 Struts 2 Action Class 中实现 ModelDriven 或 ServletRequestAware

> ID：14985281
> 
> 赞同：2
> 
> 时间：2013-02-20T16:45:01.710
> 
> 标签：struts2, jfreechart

我正在尝试根据用户输入生成图表。我在 Struts 2 框架中使用 JFree Charts。在图表生成动作类中，我无法实现这个`ModelDriven`概念；我也无法从`HttpServletRequest`对象中检索参数值。.

`ModelDriven`如果我用实现or调用图表生成操作类`ServletRequestAware`，它可以正常工作，但是它会在下一页显示图表。我需要根据用户输入生成图表。

我没有成功搜索有关 JFree an Struts 2 的信息；任何有用的教程链接也将不胜感激。

这是我的 struts.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd ">
<struts>
<package name="jfree" extends="jfreechart-default">
            <action name="chartAction" class="com.kogent.action.ChartAction">
                <result name="success" type="chart">
                    <param name="width">500</param>
                    <param name="height">300</param> 
                </result>
            </action>
    </package>          
</struts> 
```

这是我的动作课

```
package com.kogent.action;

import java.util.Random;

import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.axis.ValueAxis;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.StandardXYItemRenderer;

import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.ModelDriven;
import com.opensymphony.xwork2.Preparable;

public class ChartAction extends ActionSupport implements ModelDriven<FormBean>,Preparable{

    private JFreeChart chart;
    private FormBean bean;

    @Override
    public FormBean getModel() {
        // TODO Auto-generated method stub
        return bean;
    }
    @Override
    public void prepare() throws Exception {
        // TODO Auto-generated method stub
        bean=new FormBean();
    }

    public String execute() throws Exception {
        // chart creation logic...
        System.out.print(bean.getCategory()+"    "+bean.getChartType());
        //if remove this above line my action runs fine but i require this vales from the user
        XYSeries dataSeries = new XYSeries(new Integer(1)); 
        for (int i = 0; i <= 100; i++) {

            dataSeries.add(i, new Random().nextInt(50));
        }

        XYSeriesCollection xyDataSet = new XYSeriesCollection(dataSeries);

        ValueAxis xAxis = new NumberAxis("Marks");
        ValueAxis yAxis = new NumberAxis("Age");
        chart =
            new JFreeChart("Chart Title", JFreeChart.DEFAULT_TITLE_FONT,
                new XYPlot(xyDataSet,xAxis, yAxis,
                        new StandardXYItemRenderer(StandardXYItemRenderer.LINES)),
                false);
        chart.setBackgroundPaint(java.awt.Color.white);

        return super.SUCCESS;
    }

    public JFreeChart getChart() {
        return chart;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:31:16.270

基于这个 jfree 图表，有很多例子，我只是给这些链接检查一下。

`First``servlet request aware`: 实现任何 jfree 图表除了and之外什么都不需要`servlet response aware`，request 是为了从用户那里获取请求，response 是为了向用户提供输出。您希望使用`'ModelDriven' interface ( it gains the extra ability to transfer the form data into the object automatically)`.

只需使用此链接。

[创建图表并在 JSP 中动态显示它们](http://jspimageupload.blogspot.in/)。

[使用 JFreeChart 在 JSP 页面中创建面积图](http://www.roseindia.net/chartgraphs/areachart-jsppage.shtml)。

[使用 JFreeChart 创建饼图](http://www.vogella.com/articles/JFreeChart/article.html)

[已经讨论仅在堆栈溢出中](https://stackoverflow.com/questions/10908696/how-can-i-display-pie-chart-in-jsp-page)

[这是官方网站，它将为您提供全面的帮助](http://struts.apache.org/release/2.1.x/docs/jfreechart-plugin.html)

# iphone - 如何在一个圆圈中定位和裁剪 UIImage

> ID：14985284
> 
> 赞同：2
> 
> 时间：2013-02-20T16:45:04.003
> 
> 标签：iphone, ios, ios5, quartz-2d

我有一个界面，可让您将图像定位在一个圆圈内，然后当您确定它在正确的位置时，按下裁剪按钮并裁剪图像的可见区域。

在结构上，我有一个包含 UIImageView 的滚动视图的视图。第一个视图层有一个形状层作为一个形状为圆形的蒙版。这是我的初始化代码。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

_buttonView = [[UIView alloc]initWithFrame:CGRectMake(0, self.view.height - 136, 320, 136)];

[_buttonView setBackgroundColor:[UIColor whiteColor]];
_saveButton = [UIButton buttonWithType:UIButtonTypeCustom];
[_saveButton setTitle:@"Save image" forState:UIControlStateNormal];
[_saveButton setBackgroundImage:[[UIImage imageNamed:@"cntnt-button-defult-dark-grey.png"] resizableImageWithNormalCapInsets]  forState:UIControlStateNormal];
[_saveButton addTarget:self action:@selector(saveImageWasPressed:) forControlEvents:UIControlEventTouchUpInside];
[_saveButton setBackgroundImage:[[UIImage imageNamed:@"cntnt-button-pressed-dark-grey.png"] resizableImageWithNormalCapInsets]  forState:UIControlStateHighlighted];
[_saveButton setFrame:CGRectMake(10, 11, 300, 50)];
[_buttonView addSubview:_saveButton];

_cancelButton = [UIButton buttonWithType:UIButtonTypeCustom];
[_cancelButton setTitle:@"CANCEL" forState:UIControlStateNormal];
[_cancelButton setBackgroundImage:[[UIImage imageNamed:@"btm-button-defult-grey.png"] resizableImageWithNormalCapInsets]  forState:UIControlStateNormal];
[_cancelButton setBackgroundImage:[[UIImage imageNamed:@"btm-button-pressed-grey.png"] resizableImageWithNormalCapInsets]  forState:UIControlStateHighlighted];
[_cancelButton setFrame:CGRectMake(10, _saveButton.bottom+7, 300, 50)];
[_buttonView addSubview:_cancelButton];

[self.view addSubview:_buttonView];

_topView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, _buttonView.yOrigin)];
[self.view addSubview:_topView];

_scrollView = [[UIScrollView alloc]initWithFrame:_topView.bounds];
[self.topView addSubview:_scrollView];
[_scrollView setDecelerationRate:0.0];

_imageView = [[UIImageView alloc]initWithFrame:CGRectZero];
[_scrollView addSubview:_imageView];

UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(10, (self.topView.height - 300)/2, 300, 300)];
_imageOverlay = [CAShapeLayer layer];
[_imageOverlay setPath:path.CGPath];
[_imageOverlay setFrame:CGRectMake(0, 0, 320, 320)];
[_topView.layer setMask:_imageOverlay];

[_imageView setImage:[UIImage imageNamed:@"portrait.jpg"]];
[_imageView setSize:_imageView.image.size];
[_scrollView setContentOffset:_imageView.center];
[_scrollView setContentSize:_imageView.image.size];

} 
```

当按下“_saveButton”时，我希望在 _imageOverlay 的可见部分所在的位置裁剪图像。

如果您对以上内容有任何疑问，请随时提出。你能帮我么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:01:29.307

我在网上找到了一些可以完成工作的片段。首先，我在代表我的圆形叠加层的矩形中裁剪图像

```
- (UIImage *)getCroppedImage
{
    float zoomScale = 1.0 / [_scrollView zoomScale];
    CGRect rect;
    rect.origin.x = [_scrollView contentOffset].x * zoomScale;
    rect.origin.y = [_scrollView contentOffset].y * zoomScale;
    rect.size.width =_imageOverlay.bounds.size.width *zoomScale;
    rect.size.height =_imageOverlay.bounds.size.height *zoomScale;

    CGImageRef cr = CGImageCreateWithImageInRect([[_imageView image] CGImage], rect);
    UIImage *cropped = [UIImage imageWithCGImage:cr];
    CGImageRelease(cr);
    return [cropped roundedCornerImage:150 borderSize:0];
} 
```

然后在返回之前，我绕过图像的角落并再次裁剪它。

```
@implementation UIImage (RoundedCorner)

// Creates a copy of this image with rounded corners
// If borderSize is non-zero, a transparent border of the given size will also be added
// Original author: Björn Sållarp. Used with permission. See: http://blog.sallarp.com/iphone-uiimage-round-corners/
- (UIImage *)roundedCornerImage:(NSInteger)cornerSize borderSize:(NSInteger)borderSize {
    // If the image does not have an alpha layer, add one
    UIImage *image = [self imageWithAlpha];

    CGFloat scale = [[UIScreen mainScreen] scale];
    UIGraphicsBeginImageContextWithOptions(image.size, !image.hasAlpha, 0);

    // Build a context that's the same dimensions as the new size
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextTranslateCTM(context, 0, image.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    // Create a clipping path with rounded corners
    CGContextBeginPath(context);
    [self addRoundedRectToPath:CGRectMake(borderSize, borderSize, image.size.width - borderSize * 2, image.size.height - borderSize * 2)
                       context:context
                     ovalWidth:cornerSize * scale
                    ovalHeight:cornerSize * scale];
    CGContextClosePath(context);
    CGContextClip(context);

    // Draw the image to the context; the clipping path will make anything outside the rounded rect transparent
    CGContextDrawImage(context, CGRectMake(0, 0, image.size.width, image.size.height), image.CGImage);

    // Create a CGImage from the context
    UIImage *roundedImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return roundedImage;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:53:53.123

将视图裁剪为圆形后（下面的 renderingView）：

```
-(UIImage *)retrieveSingletonImage:(UIView *)renderingView
{
    UIGraphicsBeginImageContextWithOptions(renderingView.bounds.size, renderingView.opaque, 0.0);

    [renderingView.layer renderInContext: UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();
    return viewImage;
} 
```

在 renderingView 上使用 QuartzCore 层圆角半径使其成为圆形（直径/2 = 角）

# node.js - $.getjson 没有从 node.js response.write 返回对象

> ID：14985288
> 
> 赞同：0
> 
> 时间：2013-02-20T16:45:10.447
> 
> 标签：node.js, getjson

我是 node.js 和 json 的新手，无法将 JSON 对象返回到正在使用的客户端 html 页面`$.getjson`。

在下面的示例中，当我将相同的代码指向 api.twitter.... url 时，我可以查询并返回该值。但是当我将它指向我自己的 node.js 后端时，它吐出相同的 JSON`alert('inside callback: ' + data[0].is_translator);`并不会弹出。我在这里做错了什么？我真的很感激这里的一些帮助。

这是我的 test.html 中调用 $.getJSON 的脚本代码。

```
<script>
//var url = "http://localhost:5000/searchPlaces?callback=?";
function abc(result) {
//var url = "http://localhost:5000/random"
var url = "http://api.twitter.com/1/statuses/21947795900469248/retweeted_by.json?callback=?";
alert('before $.getjson');
$.getJSON(url, function(data) {
      alert('hello');
      alert('inside callback: ' + data[0].is_translator);
      abc(result.data);
})

}

abc();

</script> 
```

* * *

这是来自我的 node.js 后端的代码：

```
var http = require("http");
var url = require("url");
var port = process.env.PORT || 8888

function start(route, handle){

        function onRequest(request, response) {

                var postData = "";
                var pathname = url.parse(request.url).pathname;

                console.log("Request received for:" + pathname + " receieved.");

          response.writeHead(200, {"Content-Type": "application/json"});
          var otherObject = {"is_translator":false,"id":644233,"followers_count":77};

           response.write(
            JSON.stringify({
              anObject: otherObject
            })
          );
          response.end();

//              route(handle, pathname, response, request);

        }

        http.createServer(onRequest).listen(port);
        console.log("Server had started. Port:" + port);
}

exports.start = start; 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:02:27.687

Callback for `$.getJSON()` is called only if the JSON is valid. The url for your twitter api `http://api.twitter.com/1/statuses/21947795900469248/retweeted_by.json?callback=?` gives a JSON with the following error on JSONlint.org

```
Parse error on line 1:
([    {        "is
^
Expecting '{', '[' 
```

You should maybe $.get() the url and then validate JSON yourself before using it.

# vba - 如何在 vba 中添加库引用，以便每次打开新工作簿时都会添加它？

> ID：14985291
> 
> 赞同：5
> 
> 时间：2013-02-20T16:45:39.213
> 
> 标签：vba, excel

原谅我，我对此还是有点陌生​​，但是...

在 Excel 中的 vba 中，当我转到工具 - 引用时，我可以添加一个引用，它工作得很好。每次我重新打开该工作簿时，该框都会保持选中状态。

但是，如果我创建一个新工作簿，我必须重新建立对同一个库的引用。如何进行设置，以便始终检查我想要的库参考 - 在 Excel 应用程序级别而不是 Excel 工作簿级别？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:58:09.487

按照[以下](http://office.microsoft.com/en-in/excel-help/copy-your-macros-to-a-personal-macro-workbook-HA102174076.aspx)步骤创建个人工作簿。

创建工作簿后。只需转到个人工作簿的 VBA 编辑器并添加参考。关闭所有工作簿，现在打开一个新工作簿。您将看到引用已经存在。

以防上述链接中断。这是该链接的屏幕截图。

![在此处输入图像描述](../Images/716c0dbbefafd40bd4ca77166e721dd0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-03T15:54:14.957

我有同样的问题。我的解决方案是对我的 Outlook 对象设置[使用后期绑定而不是早期绑定](https://powerspreadsheets.com/send-email-excel-vba/)。通过后期绑定，我的代码变得与 Outlook 参考库无关。因此，代码可以很容易地在任何计算机上使用，而无需检查引用的库。这对于为不精通的用户制作宏要好得多。

# javascript - 粘贴时输入字符串值为零

> ID：14985298
> 
> 赞同：0
> 
> 时间：2013-02-20T16:45:54.730
> 
> 标签：javascript, jquery, html

当我将一些文本粘贴到这个输入中时，它会将 inputString 注册为 0，直到在那里实际输入了一些内容。有没有办法让 inputSting 在粘贴时更新？谢谢

```
$('#test').on('paste',function(){
  var inputString = this.value;
     if(inputString.length == 0) {
       $('#text').html('nothing');
    }else{
       $('#text').html('something'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:50:03.247

```
$('.myElements').each(function() {
   var elem = $(this);
   // Save current value
   elem.data('oldVal', elem.val());
   // Look for changes
   elem.bind("propertychange keyup input paste", function(event){
      // If value has changed
      if (elem.data('oldVal') != elem.val()) {
       // Updated stored value
       elem.data('oldVal', elem.val());
       // Do action
     }
   });
 }); 
```

这将捕获您输入的任何更改。

或者使用 setInterval：

```
setInterval(function() { inputValue = $('#input_id').val(); }, 100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:05:12.800

该`paste`事件在实际粘贴剪贴板内容之前触发。一个简单可靠的解决方案是使用计时器：

```
$('#test').on('paste', function() {
    var input = this;

    window.setTimeout(function() {
        var inputString = input.value;
        // Do stuff with inputString here
    }, 0);
}); 
```

# javascript - 使用 jQuery 向 HTML 表中添加行和列

> ID：14985302
> 
> 赞同：2
> 
> 时间：2013-02-20T16:46:26.823
> 
> 标签：javascript, jquery, html

我正在使用 jquery 向表中动态添加列和行。

我遇到的问题是我正在使用以下代码添加行：

```
 $('#colorgrid').append("<tr id='Row2' class='input-row'><td><input type='text' name='shade' placeholder='shade'/></td><td ><input type='checkbox' name='asdf'/></td><td ><input type='checkbox' name='shade'/></td><td ><input type='checkbox' name='color'/></td></tr>") 
```

所以在我添加一列然后添加一行之后，它缺少一个复选框。请看下面的屏幕截图：

理想情况下，每当添加新行时，我希望它用复选框填充许多列，并`name`用列名填充复选框的属性。

**问题**

如何以这种方式添加新行，使其真正动态并且我不会对行的内容进行硬编码。它应该用复选框填充所有列，并将它们命名为与列标题相对应。

![在此处输入图像描述](../Images/987d80de221ac74e03cca45d4969f652.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:56:20.763

您应该查看[JQuery 的 Clone function](http://api.jquery.com/clone/)。您可以克隆最后一行或第一行，而无需实际对要添加的元素进行硬编码。这将复制所有元素，包括新列。

```
<div class="container">
  <div class="hello">Hello</div>
  <div class="goodbye">Goodbye</div>
</div>

$('.hello').clone().appendTo('.container'); 
```

这应该产生

```
<div class="container">
  <div class="hello">Hello</div>
  <div class="goodbye">Goodbye</div>
  <div class="hello">Hello</div>
</div> 
```

在执行. _ `name`_ 您也可以使用 jQuery。要查找每个元素：`id``value``appendTo``input`

```
newRow.find('input').each(function () {
    var $inputElem = $(this);
    $inputElem.attr('id', 'newId'); //change this to something more dynamic
    $inputElem.attr('name', 'newName'); //change this to something more dynamic
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:06:14.553

Andy 的答案更简洁，您可能希望在修改其中的元素时这样做。但是，如果它不是“复制但不同”的情况，而更多的是“复制某些部分的新行”，[那么这个分叉可能会有所帮助](http://jsfiddle.net/barney/MMmQc/)。

[这里的技术涉及创建一个新行，然后使用jQuery 的 each 方法](http://api.jquery.com/each/)迭代每个所需的表头（在此处指定为`#Row1 th:not(.space)`在表中选择，即“`#Row1`不是的表头`.space`”），使用[jQuery 的修剪](http://api.jquery.com/jQuery.trim/)来获取它们的内部没有多余空格（换行符，缩进）的文本，然后附加一个新单元格并输入该值作为每个单元格的名称。

# excel - 根据 A 列和 D 列的数据和时间将单元格移动到 1 行

> ID：14985306
> 
> 赞同：1
> 
> 时间：2013-02-20T16:46:48.433
> 
> 标签：excel, excel-2007, excel-formula

我认为这张照片应该可以告诉你我想要达到的目标。

我仍然可以尝试解释一下。

我在顶部表 5 列 ABCDE

A 列是主要的，它包含 Num，其中包含单个数字的记录，它最多可以有 8 个记录。

我需要将所有记录按 NUM 放在 1 行中。

它按 A 和 D 排序。

我只需要根据它发生的时间移动 C 列。

我刚刚添加了额外的列，因为我最多可以有 8 个非创建记录和最多 4 个原因创建记录。

![在此处输入图像描述](../Images/684cd4eff3e32b4daf4e39dc923f17c2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:07:10.470

我假设以下情况

1.  表一在名为“输入”的工作表中
2.  输出将在名为“输出”的工作表中生成，该工作表已经有标题

将此代码粘贴到模块中并运行它

```
Option Explicit

Sub Sample()
    Dim wsInput As Worksheet, wsOutput As Worksheet
    Dim wsILrow As Long, wsOLrow As Long, i As Long, c As Long, nc As Long
    Dim wsIrng As Range, fltrdRng As Range, cl As Range
    Dim col As New Collection
    Dim itm

    Set wsInput = Sheets("Input")
    Set wsOutput = Sheets("Output")

    With wsInput
        wsILrow = .Range("A" & .Rows.Count).End(xlUp).Row

        Set wsIrng = .Range("A1:E" & wsILrow)

        With wsIrng
            .Sort Key1:=.Range("A2"), Order1:=xlAscending, Key2:=.Range("D2") _
            , Order2:=xlAscending, Header:=xlYes, OrderCustom:=1, MatchCase:=False _
            , Orientation:=xlTopToBottom, DataOption1:=xlSortNormal, DataOption2:= _
            xlSortNormal
        End With

        For i = 2 To wsILrow
            On Error Resume Next
            col.Add .Cells(i, 1).Value, Chr(34) & .Cells(i, 1).Value & Chr(34)
            On Error GoTo 0
        Next i
    End With

    wsOLrow = 2

    With wsOutput
        For Each itm In col
            .Cells(wsOLrow, 1).Value = itm
            wsOLrow = wsOLrow + 1
        Next

        wsOLrow = .Range("A" & .Rows.Count).End(xlUp).Row

        For i = 2 To wsOLrow
            With wsInput
                '~~> Remove any filters
                .AutoFilterMode = False

                With wsIrng '<~~ Filter, offset(to exclude headers)
                    .AutoFilter Field:=1, Criteria1:=wsOutput.Cells(i, 1).Value
                    Set fltrdRng = .Offset(1, 0).SpecialCells(xlCellTypeVisible)
                End With

                '~~> Remove any filters
                .AutoFilterMode = False
            End With

            '<~~ c is for Cause column and nc is for non cause
            c = 3: nc = 7

            For Each cl In fltrdRng.Cells
                If cl.Column = 3 And Len(Trim(cl.Value)) <> 0 Then
                    If InStr(1, cl.Value, "Cause", vbTextCompare) Then
                        .Cells(i, c).Value = wsInput.Cells(cl.Row, 3).Value
                        c = c + 1
                    ElseIf InStr(1, cl.Value, "Non", vbTextCompare) Then
                        .Cells(i, nc).Value = wsInput.Cells(cl.Row, 3).Value
                        nc = nc + 1
                    End If

                    .Cells(i, 2).Value = wsInput.Cells(cl.Row, 2).Value
                    .Cells(i, 15).Value = wsInput.Cells(cl.Row, 5).Value
                End If
            Next
        Next i
    End With
End Sub 
```

**截屏**

输入表

![在此处输入图像描述](../Images/07b2c15c0732ebe41a8c31f4dd58697d.png)

输出表

![在此处输入图像描述](../Images/59f9d112828c3fed62b150de73eef01a.png)

**注意**：将来对结构的任何更改也必须包含在代码中。

# python - 用 Python 编写 Fortran 无格式文件

> ID：14985311
> 
> 赞同：3
> 
> 时间：2013-02-20T16:46:59.320
> 
> 标签：python, fortran, hdf5, dataformat, paraview

我有一些由 Fortran77 编写的单精度 little-endian 无格式数据文件。我正在使用 Python 使用以下命令读取这些文件：

```
import numpy as np
original_data = np.dtype('float32')
f = open(file_name,'rb')                                                                                                 
original_data = np.fromfile(f,dtype='float32',count=-1)                                                                            
f.close() 
```

在 Python 中进行一些数据操作后，我（正在尝试）使用 Python 使用以下命令将它们以原始格式写回：

```
out_file = open(output_file,"wb")                                                                                             
s = struct.pack('f'*len(manipulated_data), *manipulated_data)                                                                     
out_file.write(s)
out_file.close() 
```

但这似乎不起作用。任何想法使用 Python 以原始 fortran 未格式化格式写回数据的正确方法是什么？

问题详情：

我能够使用来自 Fortran 的操作数据读取最终文件。但是，我想使用软件（Paraview）可视化这些数据。为此，我将未格式化的数据文件转换为 *h5 格式。我能够使用 h5 实用程序将原始数据和操作数据转换为 h5 格式。但是，虽然 Paraview 能够读取从原始数据创建的 *h5 文件，但 Paraview 无法读取从操纵数据创建的 *h5 文件。我猜有些东西在翻译中丢失了。

这就是我在 Fortran 中打开由 Python 编写的文件的方式（单精度数据）：

```
open (in_file_id,FILE=in_file,form='unformatted',access='direct',recl=4*n*n*n) 
```

这是我正在用 Fortran 编写原始的未格式化数据：

```
open(out_file_id,FILE=out_file,form="unformatted") 
```

这些信息是否足够？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:20:59.390

您是否尝试过使用操作数据数组的 .tofile 方法？它将按 C 顺序写入数组，但能够写入普通二进制文件。

.tofile 的文档也表明这与以下内容相同：

```
with open(outfile, 'wb') as fout:
    fout.write(manipulated_data.tostring()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:37:59.773

这是创建一个未格式化的顺序访问文件：

```
open(out_file_id,FILE=out_file,form="unformatted") 
```

假设您正在编写一个`real a(n,n,n)`简单的数组，`write(out_file_id)a`您应该会看到文件大小为 4*n^3+8 字节。额外的 8 个字节是一个 4 字节整数 (=4n^3)，在记录的开头和结尾重复。

第二种形式：

```
open (in_file_id,FILE=in_file,form='unformatted',access='direct',recl=4*n*n*n) 
```

打开没有这些标题的直接访问。对于现在写作，您将拥有`write(unit,rec=1)a`. 如果您使用*直接访问读取**顺序*访问文件，它将无错误地读取，但您会将该整数标头读取为浮点数（垃圾）作为 (1,1,1) 数组值，然后其他所有内容都会移位。你说你可以用 fortran 阅读，但你是否希望看到你真的在阅读你所期望的？

 *对此的最佳解决方法是修复您的原始 fortran 代码以使用未格式化的直接访问来进行读写。这为您提供了一个“普通”的原始二进制文件，没有标题。

或者，在您的 python 中，您需要首先读取该 4 字节整数，然后是您的数据。在输出时，您可以根据 paraview 过滤器的预期将整数标头放回或不放。

---------- 这是 python 读取/修改/写入包含单个记录的未格式化顺序 fortran 文件：

```
import struct
import numpy as np
f=open('infile','rb')
recl=struct.unpack('i',f.read(4))[0]
numval=recl/np.dtype('float32').itemsize
data=np.fromfile(f,dtype='float32',count=numval)
endrec=struct.unpack('i',f.read(4))[0]
if endrec is not recl: print "error unexpected end rec"
f.close()
f=open('outfile') 
f.write(struct.pack('i',recl))
for i in range(0,len(data)):data[i] = data[i]**2  #example data modification
data.tofile(f)
f.write(struct.pack('i',recl) 
```

只需循环多条记录。请注意，此处的数据被读取为向量并假定为所有浮点数。当然，您需要知道实际的数据类型才能使用它。另外请注意，您可能需要根据平台处理字节顺序问题。*

# python - pythonic方式来匹配字典

> ID：14985312
> 
> 赞同：3
> 
> 时间：2013-02-20T16:47:03.547
> 
> 标签：python, dictionary

我有两本词典

```
a = {'hola':4.6, 'bye':56.7, 'tres':52.1}
b = {'hola':7.1, 'tres':103.1} 
```

b 是 a 的子集。

我想创建一个新字典，c 与值，a/b，即，

```
c = {'hola'=7.1/4.6, 'tres':103.1/52.1} 
```

我可以对 b 到 a 的元素做一个 for 循环，然后创建一个新的，但是有没有更优雅的方法，没有循环？只是好奇。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T16:50:25.430

大多数pythonic可能是dict理解：

```
c = {k: a[k]/v for k,v in b.iteritems()} 
```

字典理解是在 Python 2.7 中引入的，对于旧版本使用这个：

```
c = dict((k, a[k]/v) for k,v in b.iteritems()) 
```

# jquery - jQuery使用图形工具flot一个月前导零

> ID：14985314
> 
> 赞同：1
> 
> 时间：2013-02-20T16:47:12.030
> 
> 标签：jquery, flot, time-format

是否有一种简单的方法可以在 jQuery 图形工具“flot”中沿 x 轴（0.7 版）显示一位数字月份/日期，前导（左填充）零？

```
xaxis: { mode: "time", timeformat: "%y-%m-%d/", TickSize: [1, "day"]} 
```

给出例如 2012-9-5，最好应该是 2012-09-05

更多代码....

```
<div id="placeholder" style="width:900px;height:200px;"></div>

<script>
$(function () {
    var d = [<?php echo $qforgraph; //[1203894000000, 288]
    ?>];

    var options = {
    lines: { show: true },
    points: { show: true },
    xaxis: { mode: "time", timeformat: "%y-%0-%0", minTickSize: [1, "month"]},
grid: { backgroundColor: { colors: ["#FFF", "#EEF"] }    }
};    
    var plot = $.plot($("#placeholder"), [d], options);
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:21:18.283

您使用的是 0.7 版吗？默认情况下，月份和日期在[master](https://github.com/flot/flot)中填充为零。

# google-maps - 具有名称参数的附近搜索和雷达搜索始终以“状态”失败：“ZERO_RESULTS

> ID：14985317
> 
> 赞同：1
> 
> 时间：2013-02-20T16:47:22.617
> 
> 标签：google-maps, google-places

我遇到了一个问题，无论参数是什么，Places Search API 在 m.site 上都会返回 ZERO_RESULTS。附上 API 响应。搜索功能一直正常工作，直到 1 月份我们开始遇到问题，尽管没有更改编码。我将不胜感激任何帮助。谢谢，凯尔。

```
GET https://maps.googleapis.com/maps/api/js/PlaceService.FindPlaces?1m6&1m2&1d53.46731217725638&2d-2.2817558287549673&2m2&1d53.46731217725638&2d-2.2817558287549673&2sen-GB&3sphones%204u&6sstore&8e1&callback=_xdc_._7otmgw&token=86621 HTTP/1.1
Host: maps.googleapis.com
Referer: http://m.phones4u.co.uk/stores/my-phones4u-stores/53.46731217725638/-2.2817558287550095/?mweb=640-0-3
Proxy-Connection: keep-alive
Accept-Encoding: gzip, deflate
Accept: */*
Accept-Language: en-gb
Connection: keep-alive
User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 6_0_1 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A525 Safari/8536.25

HTTP/1.1 200 OK
Content-Type: text/javascript; charset=UTF-8
Access-Control-Allow-Origin: *
Date: Fri, 25 Jan 2013 11:25:45 GMT
Server: mafe
Cache-Control: private
Content-Length: 115
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN

_xdc_._7otmgw && _xdc_._7otmgw( {
   "html_attributions" : [],
   "results" : [],
   "status" : "ZERO_RESULTS"
}
 ) 
```

# c# - LinQ Any() 是否投射集合中的所有项目？

> ID：14985322
> 
> 赞同：0
> 
> 时间：2013-02-20T16:47:33.803
> 
> 标签：c#, .net, linq

我知道当使用 Linq 的`Any()`扩展来确定一个可枚举对象是否至少有一个元素时，它只会消耗一个元素。但这实际上是如何工作的？它是否必须首先将所有项目都投射到可枚举中，还是一次只投射一个，从第一个开始并停在那里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T16:49:45.940

`Any()`工作，`IEnumerable<T>`所以不需要演员。它的实现非常简单，它只是遍历枚举并查看是否可以找到任何符合指定条件的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:53:57.430

简单的实现如下所示：

```
public bool Any<T>(IEnumerable<T> list)
{
    using (var enumerator = list.GetEnumerator())
    {
        return enumerator.MoveNext();
    }
} 
```

所以，不需要任何铸造

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:01:23.863

公共静态类中的代码`Enumerable`：

```
public static bool Any<TSource>(this IEnumerable<TSource> source) {
    if(source==null) {
        throw Error.ArgumentNull("source");
    }
    using(IEnumerator<TSource> enumerator=source.GetEnumerator()) {
        if(enumerator.MoveNext()) {
            return true;
        }
    }
    return false;
}

public static bool Any<TSource>(this IEnumerable<TSource> source, Func<TSource, bool> predicate) {
    if(source==null) {
        throw Error.ArgumentNull("source");
    }
    if(predicate==null) {
        throw Error.ArgumentNull("predicate");
    }
    foreach(TSource local in source) {
        if(predicate(local)) {
            return true;
        }
    }
    return false;
} 
```

没看过选角，但一般。

# java - 减少斯坦福 corenlp 的执行时间？

> ID：14985324
> 
> 赞同：1
> 
> 时间：2013-02-20T16:47:42.230
> 
> 标签：java, multithreading, nlp, stanford-nlp

我在我的项目中使用 Stanford Core NLP，我正在执行 Parsing、Pos tagging、Ner、COREF 解析近 100 个句子。但这太耗费时间了。

如何使用 Threads 减少斯坦福 coreNlp 的执行时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:16:17.667

最新版本的 CoreNLP 采用命令行参数`-threads N`。我已经成功地使用它来加快执行速度。我相信它一次可以处理尽可能多的`N`文件，因此如果您的数据都在一个文件中，您将看不到任何加速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:58:59.213

仅当您可以将工作负载拆分为独立的任务时，使用线程才有帮助。不确定这是否可能。如果是，请检查`ExecutorService`。

# mysql - MySQL每秒可以处理多少个查询

> ID：14985325
> 
> 赞同：5
> 
> 时间：2013-02-20T16:47:42.280
> 
> 标签：mysql

我有一个网页，其中某个 div 需要每 3 秒刷新一次。此 div 包含依赖于该页面其余内容的变量（例如，关于您是否登录到网站、您的用户名是什么等）

我已经通过 jQuery 实现了这种令人耳目一新的效果

```
setInterval(function()
{
$('#div').load('page.php #div');
}, 3000);
; 
```

我的问题是：在将所需的 div 块插入到位之前，ajax 会加载整个页面。整个页面有大约 15 个查询（可能更多）。这些查询非常简单，只需查找一行或一个字段 (SELECT)。

使用上面的脚本，这 15 个以上的查询将每 3 秒执行一次，即每秒 5 个查询。如果我有 100 个访问者，那就是每秒 500 个查询。在我走得更远之前，我需要知道这是否太多了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:54:54.097

我可以建议您为托管您的数据库的服务器做一个基准测试。

这里有一个基准示例供您参考：[基准](http://www.mysql.com/why-mysql/benchmarks/)

这一切都取决于您的服务器规格和带宽。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:09:53.200

如果您每 3 秒刷新一次 div 但不能保证有实际更改，那将是一种浪费。div中变量的值多久变化一次？假设每次都检查所有 15 个左右的查询及其结果是否安全？（例如，用户 A 在页面上停留 12 秒，然后关闭页面 - 这是 60 个浪费的查询）。

为什么不对某些事件（例如单击按钮或页面加载）进行必要的检查？（例如，用户 B 在页面上停留 12 秒，然后单击一个按钮 - 这是您唯一一次检查数据库。此时甚至可能不需要执行 15 次或更多查询）。

# java - 断言可以在生产中使用还是仅在开发时使用？

> ID：14985328
> 
> 赞同：0
> 
> 时间：2013-02-20T16:47:50.873
> 
> 标签：java, assertions

在这个问题之后： [避免！= null 语句](https://stackoverflow.com/questions/271526/avoiding-null-statements-in-java) 我问我们的一位高级开发人员为什么不使用断言。虽然他的回答被证明是合理的（我们使用自定义异常），但他还声称断言是在开发和测试时使用的，而不是在生产中使用的。

但是在 Oracle 的文档 [http://docs.oracle.com/javase/6/docs/technotes/guides/language/assert.html](http://docs.oracle.com/javase/6/docs/technotes/guides/language/assert.html) 中，断言似乎是为了在测试之外使用，甚至考虑到禁用它们的可能性。

那么，有没有更好的理由或良好的做法不使用断言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:56:54.087

断言的行为因语言而异。在 C 语言中，它们经常被错误地使用，而且错误的用法非常普遍，以至于许多人建议根本不要使用它们。它们不应该在生产中使用（即，C 的生产编译应该`NDEBUG`为预处理器定义），因为它们只会降低执行速度。

断言的目的是陈述逻辑必要性，而不是检查结果。例如，正确的（用 C 语言）写成：

```
f = malloc( s );
if( f == NULL ) {
   ...; exit( 1 );
}
assert( f != NULL );   # This is logically necessary. 
```

但是写完全错误：

```
f = malloc( x );        # THIS IS AN EXAMPLE OF INCORRECT USAGE
assert( f != NULL );    # DO NOT DO THIS 
```

这实际上很有用，因为这样写是完全有效的：

```
f = xmalloc( x );
assert( f != NULL ); 
```

它作为向读者提供的文档，说明 xmalloc 的定义方式使其永远不会返回空值。

它们通常用于函数的开头：

```
void f( void *p ) { assert( p != NULL ); ... } 
```

这种用法*不是*错误检查。相反，它用于指示函数`f`期望它永远不会被传递一个空指针。向开发人员传递空指针`f`是编程错误的文档。将其设为断言可以在启用断言时在运行时检测到错误。

# android - 传感器管理器错误

> ID：14985329
> 
> 赞同：0
> 
> 时间：2013-02-20T16:47:52.773
> 
> 标签：android, runtime-error, accelerometer, sensormanager

直到今天，我的 SensorManager 都运行良好。我没有更改任何代码，我所做的只是启动 eclipse，现在我收到一个错误，迫使我的应用程序退出；这是我得到的：

```
02-20 11:44:50.835: E/AndroidRuntime(23828): FATAL EXCEPTION: main
02-20 11:44:50.835: E/AndroidRuntime(23828): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.synlight_development.sleep_smart/com.synlight_development.sleep_smart.Sleep}: java.lang.NullPointerException
02-20 11:44:50.835: E/AndroidRuntime(23828):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2088)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at android.app.ActivityThread.access$700(ActivityThread.java:139)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at android.os.Looper.loop(Looper.java:137)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at android.app.ActivityThread.main(ActivityThread.java:4918)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at java.lang.reflect.Method.invokeNative(Native Method)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at java.lang.reflect.Method.invoke(Method.java:511)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at dalvik.system.NativeStart.main(Native Method)
02-20 11:44:50.835: E/AndroidRuntime(23828): Caused by: java.lang.NullPointerException
02-20 11:44:50.835: E/AndroidRuntime(23828):    at android.content.ContextWrapper.getSystemService(ContextWrapper.java:423)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at com.synlight_development.sleep_smart.Sleep$Accelerator.<init>(Sleep.java:173)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at com.synlight_development.sleep_smart.Sleep.onCreate(Sleep.java:104)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at android.app.Activity.performCreate(Activity.java:5048)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
02-20 11:44:50.835: E/AndroidRuntime(23828):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052)
02-20 11:44:50.835: E/AndroidRuntime(23828):    ... 11 more 
```

这是我的传感器类：

```
public class Accelerator extends Service implements SensorEventListener
    {
        public Accelerator()
        {
            SensorManager sm = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
            if(sm.getSensorList(Sensor.TYPE_GYROSCOPE).size() != 0)
            {
                Sensor s = sm.getSensorList(Sensor.TYPE_GYROSCOPE).get(0);
                sm.registerListener(this, s, SensorManager.SENSOR_DELAY_GAME);
            }
        }
        public void onAccuracyChanged(Sensor s, int i) 
        {

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:56:55.323

移动：

```
SensorManager sm = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
if(sm.getSensorList(Sensor.TYPE_GYROSCOPE).size() != 0)
{
    Sensor s = sm.getSensorList(Sensor.TYPE_GYROSCOPE).get(0);
    sm.registerListener(this, s, SensorManager.SENSOR_DELAY_GAME);
} 
```

进入你的服务的 onCreate()。`getSystemService()`是 Context 中的一个方法，Service 对其进行了扩展。但是，在调用 onCreate() 之前，您没有上下文。因此，这会导致构造函数中出现 NPE。

此外，请确保您使用 startService() 启动服务，而不是从中创建普通 Java 对象

# vb.net - VB.NET 登录表单 - 使用 Oracle

> ID：14985331
> 
> 赞同：0
> 
> 时间：2013-02-20T16:47:56.607
> 
> 标签：vb.net, oracle

在`VB.Net`连接到 Oracle 数据库的登录表单中。有没有办法插入 If 语句以将不同的用户引导到不同的表单。例如，会计主页的会计或驱动程序主页的驱动程序，即使所有这些都存在ID 和密码在数据库中的一个表中。数据库中有一个`POSITION`字段，我想用它来区分不同用户的访问级别。这是到目前为止工作的代码：

```
Dim conn As New OleDb.OleDbConnection

conn.ConnectionString = _
"Provider=msdaora;Data Source=orabis;User Id=112221800;Password=112221800;"

conn.Open()

Dim parmuser As New OleDb.OleDbParameter

parmuser.OleDbType = OleDb.OleDbType.Char

parmuser.Value = txtStaffNo.Text

Dim parmpass As New OleDb.OleDbParameter

parmpass.OleDbType = OleDb.OleDbType.Char

parmpass.Value = txtPassword.Text

Dim cmd As New OleDbCommand

cmd.Connection = conn

cmd = New OleDbCommand("select STAFFID,PASSWORD from STAFF where STAFFID ='" & txtStaffNo.Text & "' and PASSWORD ='" & txtPassword.Text & "'", conn)

cmd.CommandType = CommandType.Text

Dim dr As OleDb.OleDbDataReader

dr = cmd.ExecuteReader()

If txtStaffNo.Text = "" Or txtPassword.Text = "" Then

    MessageBox.Show("You have not entered any values!", "ERROR", MessageBoxButtons.OK, MessageBoxIcon.Error)

ElseIf dr.Read() Then

    txtStaffNo.Text = dr("STAFFID")

    txtPassword.Text = dr("PASSWORD")

    MsgBox("Access Allowed")

    CustOption.Show()
    Me.Hide()

Else

    'MessageBox.Show("Wrong Username and Password", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error)
    'intCount = intCount + 1

End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:48:09.053

在您的 SELECT 语句中，在此处添加位置，这样它将是：

```
cmd = New OleDbCommand("select POSITION, STAFFID,PASSWORD from STAFF where STAFFID ='" & txtStaffNo.Text & "' and PASSWORD ='" & txtPassword.Text & "'", conn) 
```

然后在验证用户之后，您只需使用如下选择案例：

```
Dim empPosition as string = dr("POSITION") ' assuming it's a string here
select case empPosition.toLower
   case "driver"
      ' open driver form
   case "accountant"
       'open accountant form
    ' more case statements for other positions.
End Select 
```

# c# - 降低 monotouch 中原生 <-> 托管交互的成本

> ID：14985336
> 
> 赞同：3
> 
> 时间：2013-02-20T16:48:08.767
> 
> 标签：c#, objective-c, performance, xamarin.ios

我正在玩一个本机库，我为此编写了 monotouch（我们现在应该命名那个 Xamarin.iOS 吗？）绑定。

覆盖 C# 中一些常用的方法会导致性能严重下降，即使函数的核心什么也不做或返回 base.X()。Instruments 确认了问题以及在托管<->本机交互中花费的时间。

有没有办法从一侧或另一侧（本地或托管）加快速度？或者这是在 MT 中 P/Invoking 时要缴纳的税款？

我达到的玻璃天花板约为 50000 次调用/秒。

**[更新 2013/02/22]** 给出一些上下文或示例，这就是我正在做的事情。我正在玩 cocos2d 运动学（没有花栗鼠）。为了管理我自己的精灵位置，我必须重写

```
CGAffineTransform NodeToParentTransform { get; } 
```

和

```
bool Dirty { get; } 
```

前者返回一个矩阵，戳原生端获取ScaleX、ScaleY、RotationX等参数。RotationY 和 AnchorPointInPoints，后者`true`无条件返回。

目前，我在降低成本方面的尝试取得了部分成功，因为通过将本机代码更改为有一个不涉及任何属性的单点覆盖，我获得了 25% 到 50% 的加速。

```
-(BOOL) dirty:(CGAffineTransform*)nodeToParentTransform rotationX:(float)rotX rotationY:(float)rotY scaleX:(float)scaleX scaleY:(float)scaleY anchorPointInPoints:(CGPoint)anchorPointInPoints; 
```

现在，我的 3500 个精灵得到了几乎可以接受的 25-30fps，但我仍然想走得更远。而且也不必修补原生资源。

**[更新 2013/02/22 2]** 这是一个可用于测试[https://github.com/StephaneDelcroix/mt-speed](https://github.com/StephaneDelcroix/mt-speed)的示例。它包含一个过度简化的一阶运动学引擎、3501 个身体和精灵。

这里有趣的课程是`KinematicSprite`. 代码原样适用于 cocos2d 的修改版本（包含在 Cocos2D.dll 中）。您可以通过注释掉新`Dirty`功能并取消注释`NodeToParentTransform`和旧的`Dirty`. 根据[Mono touch 中的子类绑定类型](https://stackoverflow.com/questions/14962741/subclassing-bound-type-in-mono-touch)，它仅适用于设备。我在 iPad mini 上获得 20 到 22.5 fps。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:49:36.287

> 我们现在应该命名那个 Xamarin.iOS 吗？

是的，现在是 Xamarin.iOS :-)

> 或者这是在 MT 中 P/Invoking 时要缴纳的税款？

从托管代码和非托管代码转换时，需要做很多事情。蹦床负责这个：编组参数和返回值，处理托管异常，处理本机异常......

此外，您可能会多次进行转换，例如`new Managed ();`调用 native`init*`调用（native）`setFoo:`返回到（托管）`Foo`setter（并返回......调用者）。

因此，即使每个部分都很快，如果您不执行任何操作（或只是调用`base`），它仍然会值得注意，因为没有太多的*用户时间*可以摊销。

> 有没有办法从一侧或另一侧（本地或托管）加快速度？

是的。首先确保你测量的是*真实*的东西。例如

*   上述任务与模拟器和设备不同，例如 JIT 与 AOT，x86 和 ARM 的 ABI 不同；

*   调试和发布构建配置也会使用不同的代码；

因此，您可能希望在 iOS (ARM) 设备上测量发布版本。

接下来您应该确保启用**链接所有程序集**（如果您有非 SDK 绑定，例如 Cocos2d）。这不会改变蹦床，但是当你打电话时，`base`你是在调用绑定代码。

事实证明，链接器在绑定方面*非常聪明*，并且可以删除您的情况不需要的代码。例如

*   [删除与相关的检查和分支`IsDirectBinding`](http://spouliot.wordpress.com/2012/05/07/linker-vs-bindings-and-isdirectbinding/)；
*   [删除与`NewRefCount`（sgen 选项）](http://spouliot.wordpress.com/2012/03/05/linker-vs-bindings-and-newrefcount/)相关的代码；
*   [删除与“Runtime.Arch”相关的检查和分支](http://spouliot.wordpress.com/2012/02/29/linker-vs-bindings-and-runtime-arch/)；
*   [删除对 UI 线程检查](http://spouliot.wordpress.com/2012/02/29/linker-vs-bindings-and-runtime-arch/)的检查（如果您从 UIKit 继承）；和
*   我们将来添加的任何未来优化:-)

**编辑**：启用链接器的另一个原因是它删除了绑定中的额外（未使用）方法 - 降低了本机代码需要回调到托管世界的可能性（并且更少的转换意味着更快的时间）

其他方式更具侵入性，可能需要更改代码以最大程度地减少托管代码和本机代码之间的干扰。例如，有时你可以打电话

```
var x = new X (1, 2, 3, 4); 
```

或者

```
var x = new X ();
x.a = 1;
x.b = 2;
x.c = 3;
x.d = 4; 
```

您可以猜测第一种情况需要更少的转换（并且更快）。如果这样的 API 不存在，那么*可以*添加它 - 但这应该是最少的选择（可能在其他地方进行优化会为您带来更大的回报）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:49:44.350

通过您奇怪的崩溃错误问题，我注意到 cocos2d 代码一直跳回单触领域，因为绑定导出了每个具有目标 c 名称的方法的所有单声道版本。我想知道你是否可以在不暴露的情况下重做绑定并获得巨大的速度提升？

除非您覆盖特定方法，否则您似乎不需要（或实际上不想要）那些公开的 - 在这种情况下，您可以为覆盖的方法添加 Objective-c 导出......我没有这样做，并且不知道是不是自找麻烦。如果 objc 端从不回调，除非您在那里有自定义代码，否则事情似乎会更好。

很想听听 poupou 或其他 xamarin 人对此发表评论！

# vba - Visio VBA 获取粘贴的形状

> ID：14985338
> 
> 赞同：0
> 
> 时间：2013-02-20T16:48:13.853
> 
> 标签：vba, visio

我有一个宏，它在 Visio 2003 和 2010 之间的工作方式不同。我正在将一个形状复制并粘贴到页面上，并尝试获取指向粘贴形状的指针。在 2003 年，该形状只是页面上的最后一个形状 ( `set ShpObj = PagObj.Shapes(PagObj.Shapes.Count)`)。然而，在 2010 年，似乎粘贴的形状并不总是设置为页面上的最后一个形状。

目前，我在粘贴操作之前记录页面上的所有独特形状，然后在粘贴操作之后识别新形状。

我尝试监视应用程序 ShapeAdded 事件，但它似乎没有触发粘贴操作。

我还有其他方法可以拾取粘贴的形状吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:31:20.503

你是怎么复制的？Visio 2010 获得了更多的枚举，从而在可能影响收集顺序的术语或位置、容器和标注行为方面更好地控制粘贴操作：

[Visio 2010 Page.Paste](http://msdn.microsoft.com/en-us/library/ff766937%28v=office.14%29.aspx)

[Visio 2007 Page.Paste](http://msdn.microsoft.com/en-us/library/ms427155%28v=office.12%29.aspx)

很遗憾 Paste 没有返回选择，但是你看过 Shape.Duplicate 和 Selection.Duplicate 分别返回形状和选择对象吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T00:05:22.230

通过在粘贴操作之前创建一个新的临时图层并将图层的活动单元格设置为 true，从而利用 Visio 的图层功能。将 Active 设置为 true 意味着添加到页面的任何新形状都将添加到该层。然后当粘贴操作完成后，你可以得到这一层的所有形状。要清理，您可以删除临时图层而不删除形状。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T14:14:28.077

在 Visio 2010 中，新粘贴的形状（或多个形状）在粘贴时始终处于选中状态。因此，在粘贴操作之后，ActiveWindow.Selection 或类似工具将为您提供新粘贴的形状。

# java - 编程新手 - 更有效的 sumOfDigits

> ID：14985339
> 
> 赞同：3
> 
> 时间：2013-02-20T16:48:15.373
> 
> 标签：java, performance

我提出了这个 Java 代码来解决 sumOfDigits。

```
 public static int sumOfDigits(int num){
        if (num == 0){
             return 0;
        }
        return num%10+ sumOfDigits(num/10);
    } 
```

好吧，我知道这是可行的，但我希望任何人都可以分享有关如何提高代码效率的见解或材料（一些正式的术语/知识），因为我知道 Java 不支持递归。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:07:27.953

递归在 Java 中根本不是一个坏工具。当然，理论上每个函数调用都有成本，但 JIT 编译器通常能够在运行时自行优化并提供良好的性能。你不应该优化一个明确地用递归编写的函数，如果没有它会更麻烦，除非你真的遇到问题，但我怀疑你会对那个代码有任何问题。根据经验，您会发现代码的易读性非常重要。

要回答您的问题，实现您想要的另一种方法是简单地循环直到 num 等于 0 并每次将每 10 的除法结果存储在 num 中：

```
int total = 0;
while (num != 0) {
    total += num % 10;
    num = num / 10;
} 
```

# angularjs - 设置 Angular-UI Select2 多个指令的初始值

> ID：14985346
> 
> 赞同：21
> 
> 时间：2013-02-20T16:48:22.517
> 
> 标签：angularjs, jquery-select2, angular-ui

我有一个 select2 指令，用于多个选择国家的自定义查询来获取数据：

```
// Directive
<input ng-model="filters.countries" ui-select2="filters.countryOptions"
    data-placeholder="Choose a country...">

// filters.countryOptions
{ 
    multiple: true,
    query: function() { 
        get_list_of_countries(); 
    }
}

// Formatted data from remote source
[
    {id: 'US', text: 'United States'},
    {id: 'CA', text: 'Canada'} ...
] 
```

我正在尝试使用以下方法在我的控制器中设置最初选择的值：

```
$scope.filters.countries = [{id: 'US', text: 'United States'}]; 
```

这确实正确设置了模型，但是这是在 select2 初始化发生之前发生的。当我逐步完成剩余的初始化代码时，输​​入会`[Object]`在最终消隐`$scope.filters.countries`和输入之前暂时显示，但它不会在输入中显示占位符文本。

为了解决这个问题，我使用以下方法来重置模型的初始值：

```
$scope.$on('$viewContentLoaded', function() {
    setTimeout(function() {
        $scope.filters.countries = [{id: 'US', text: 'United States'}];
    }, 100);
}); 
```

使用`setTimeout`. 有没有更好的方法让我想念？

# 更新 1

根据 ProLoser 的要求，这里有一个演示和 github 票。

演示：[http ://plnkr.co/edit/DgpGyegQxVm7zH1dZIJZ?p=preview](http://plnkr.co/edit/DgpGyegQxVm7zH1dZIJZ?p=preview)

GitHub问题：[https ://github.com/angular-ui/angular-ui/issues/455](https://github.com/angular-ui/angular-ui/issues/455)

按照 ProLoser 的建议，我开始使用 select2 的 initSelection 函数：

```
initSelection : function (element, callback) {
  callback($(element).data('$ngModelController').$modelValue);
}, 
```

它可以解决问题，但仍然感觉像是一种解决方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-16T05:00:57.330

根据 ProLoser 的要求，这里有一个演示和 github 票。

演示：[http ://plnkr.co/edit/DgpGyegQxVm7zH1dZIJZ?p=preview](http://plnkr.co/edit/DgpGyegQxVm7zH1dZIJZ?p=preview)

GitHub问题：[https ://github.com/angular-ui/angular-ui/issues/455](https://github.com/angular-ui/angular-ui/issues/455)

按照 ProLoser 的建议，我开始使用 select2 的 initSelection 函数：

```
initSelection : function (element, callback) {
  callback($(element).data('$ngModelController').$modelValue);
}, 
```

它可以解决问题，但仍然感觉像是一种解决方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-19T05:22:53.730

您是否尝试过将选项初始化为：

```
<option selected value="0">Name</option> 
```

# ios - 检测到 TouchesEnded，但未检测到 touchesBegan

> ID：14985348
> 
> 赞同：0
> 
> 时间：2013-02-20T16:48:27.977
> 
> 标签：ios, uiactionsheet

我正在使用 Tapku 库 ( [https://github.com/devinross/tapkulibrary](https://github.com/devinross/tapkulibrary) ) 中的日历视图并将其嵌入到 UIActionSheet - 现有 UIDatePicker 的替代方案。

我遇到的麻烦是当所选月份跨越 6 周时，底行没有从 中获取任何触摸`touchesBegan`，而是在`touchesEnded`和中获取它们`touchesMoved`。

[2013 年 5 月 - 5 周 http://imageshack.us/a/img62/6280/iossimulatorscreenshot2.png](http://imageshack.us/a/img62/6280/iossimulatorscreenshot2.png) [2013 年 6 月 - 6 周 http://imageshack.us/a/img41/6280/iossimulatorscreenshot2.png](http://imageshack.us/a/img41/6280/iossimulatorscreenshot2.png) 所以在上面的截图中从 6 月 30 日开始的行不会得到任何接触，除非它们起源于该行上方的某个位置，然后进入该行。

我认为边界或框架设置不正确，我尝试输出一些关于我在`touchesEnded`最后一行收到的触摸的信息并得到：

```
$0 = 0x1f869670 <UITouch: 0x1f869670> phase: Ended tap count: 1 
window: <_UIAlertOverlayWindow: 0x1e56b1e0; frame = (0 0; 320 568); layer = <UIWindowLayer: 0x1e56b300>> 
view: <TKCalendarMonthTiles: 0x1f86b6d0; 
frame = (0 1; 320 265); layer = <CALayer: 0x1f872fb0>> 
location in window: {67, 551.5} previous location in window: {67, 550} 
location in view: {67, 247.5} previous location in view: {67, 246} 
```

目标视图的框架看起来是正确的，还有什么可能丢失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:29:24.587

最终，日历超级视图的框架没有正确调整大小并导致这种不一致。需要注意的是，由于默认`UIView`属性`clipsToBounds`是`NO`，太小而无法容纳其内容的视图仍将显示内容，但不允许超出其范围的用户交互。

# c# - Windows phone webcontrol 格式异常

> ID：14985357
> 
> 赞同：0
> 
> 时间：2013-02-20T16:48:50.850
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我一直在使用这段代码一段时间，在我正在构建的 windows phone 7 应用程序中完美地工作。但是突然它停止工作并给我一个格式异常错误？我做错了什么，因为自从它上次完美运行以来我没有对这段代码进行任何更改？

```
String url = String.Format("http://www.bing.com/search?q={0}"); 
        webBrowser1.Source = (new Uri(string.Format(url), UriKind.Absolute)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:02:37.210

您使用该`String.Format`方法，但未在字符串后指定任何参数。

我认为您正在尝试做类似的事情

```
String url = String.Format("http://www.bing.com/search?q={0}", keyword); 
```

# javascript - onload 运行意外代码

> ID：14985359
> 
> 赞同：1
> 
> 时间：2013-02-20T16:49:00.733
> 
> 标签：javascript, forms

我正在编写一个将验证注册表单字段的 javascript 片段。由于某种原因，onsubmit 函数在页面加载时也会被调用。

window.onload = function validate_signup_form() {

```
var form_element = document.getElementById("signup_form");
var onload_values = document.forms["signup_form"];
var test = onload_values.elements[0].value;
var required_fields = new Array();

document.getElementById("signup_form").onsubmit = check_values();

function check_values() 
{
    var current_values = document.forms["signup_form"];
    for (x in current_values) 
    {
        if (current_values[x].value == onload_values[x].value) 
        {
            // Error: The form values match the initial ones
            return false;
        } 
        elseif (current_values[x].value.toLowerCase() == onload_values[x].value.toLowerCase()) 
        {
            // Error: The form values match the initial ones
            return false;           
        }
        elseif (current_values[x].value.toUpperCase() == onload_values[x].value.toUpperCase()) 
        {
            // Error: The form values match the initial ones
            return false;           
        }
    }
};
}; 
```

不应该 check_values(); 仅在提交时运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:53:19.047

您正在将 onsubmit 属性设置为check_values();*返回的值。*更改为以下内容：

```
document.getElementById("signup_form").onsubmit = check_values; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:52:48.880

与不久前提出的[这个问题](https://stackoverflow.com/questions/14985047/javascript-function-in-html-body-wont-work)相同的问题。

您正在分配 to 的返回*值*，而不是函数本身。应该是。`chekc_values``onsubmit``onsubmit = check_values;`

`check_values`仅在分配时执行，而不是在触发事件时执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:53:14.153

在以下行中，您将调用`check_values`signup_form 并将其设置`onsubmit`为函数返回的任何内容。

```
document.getElementById("signup_form").onsubmit = check_values(); 
```

如果要设置函数本身，请删除括号。

# eclipse - eclipse 是否支持自动替换破折号和其他字符？

> ID：14985363
> 
> 赞同：0
> 
> 时间：2013-02-20T16:49:05.303
> 
> 标签：eclipse, character-encoding, eclipse-plugin, eclipse-cdt

考虑以下 - 嗯 - 非常基本的代码片段：

`int a = b – 2`

中间的减号实际上不是减号（或“连字符”），而是一个破折号。正确的代码片段如下所示：

`int a = b - 2`- 正确的减号稍微短一些。

所以，当我从一些（在线）书籍或 PDF 中复制代码以在 java 中查看时，我已经多次偶然发现了这一点。在编写文档时，作者可能没有考虑文字处理器会自动将连字符替换为破折号。使用 java 这没什么大不了的——“非法字符”——我已经完成了。但是在使用 CDT 编码 C/C++ 时，这实际上并不那么容易看到。而且编译器错误也不是很有帮助。

所以：回到我的问题：有没有办法，一个检查器，一个插件，什么东西——能够用任何（配置的）正确值**自动替换这些无效字符？**具体来说，如果能与 CDT 一起工作，那就太好了。或者你会如何处理这个问题（如果这对你来说是个问题）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:51:27.483

防止使用破折号而不是连字符的唯一自动解决方案 - 以及大多数 C 编译器不允许的其他 UTF 符号是：将文本文件编码设置为“US-ASCII”。然而，这只能对 Eclipse 中的所有文件和语言进行。但是，如果不需要重音字符或任何其他花哨的箭头和破折号，这对我来说是目前防止意外插入这些字符的最佳选择。

这可以在**Window > Preferences > General > Workspace**和字段`Text file encoding`集**Other > US-ASCII**中完成。

之后破折号字符仍然可以插入到编辑器中，但是保存时eclipse会报错，其中一个选项是选择第一个字符，这不是`US-ASCII`编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:01:43.497

你总是可以在 eclipse 上使用 ctrl+f 并且你会看到两个框，find: 和 Replace with，这应该可以完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:47:28.333

Eclipse/Eclipse cdt 没有自动错字更正。我知道的唯一 - 非常整洁 - 自动替换是 . to -> 用于指针类型。我从不输入 -> 了。

请参阅此选项：**Windows > Preferences > C/C++ > Editor > Content Assist > Enable Auto-replace of '.' 使用 '->' 表示指针类型**

除此之外：没有。我也找不到这个插件。

# java - Android - NoClassDefFoundError

> ID：14985364
> 
> 赞同：0
> 
> 时间：2013-02-20T16:49:06.443
> 
> 标签：java, android, noclassdeffounderror

由于这行代码，我得到了 NoClassDefFoundError：

```
adapter = new SocialAuthAdapter(new ResponseListener()); 
```

我认为这可能是我的 ResponseListener() 方法的问题，但我找不到任何问题。这是代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Adapter initialization
    adapter = new SocialAuthAdapter(new ResponseListener());

    listview = (ListView) findViewById(R.id.listview);
    listview.setAdapter(new CustomAdapter(this, adapter));

    // Welcome Message
    TextView textview = (TextView) findViewById(R.id.text);
    textview.setText("Use SocialAuth by creating your own UI.");
    textview.setTextColor(Color.WHITE);
    textview.setGravity(Gravity.CENTER);
    textview.setPadding(0, 30, 0, 0);
}

// To receive the response after authentication
private final class ResponseListener implements DialogListener {
    @Override
    public void onComplete(Bundle values) {
        Log.d("Custom-UI", "Successful");

        // Changing Sign In Text to Sign Out
        // Code to refresh Single ListView Item : You can remove it for your
        // app
        View v = listview.getChildAt(pos
                - listview.getFirstVisiblePosition());
        TextView pText = (TextView) v.findViewById(R.id.signstatus);
        pText.setText("Sign Out");

        // Get the provider
        final String providerName = values
                .getString(SocialAuthAdapter.PROVIDER);
        Log.d("Custom-UI", "providername = " + providerName);

        int res = getResources().getIdentifier(providerName + "_array",
                "array", CustomUI.this.getPackageName());

        AlertDialog.Builder builder = new AlertDialog.Builder(CustomUI.this);
        builder.setTitle("Select Options");
        builder.setCancelable(true);
        builder.setIcon(android.R.drawable.ic_menu_more);

        builder.setSingleChoiceItems(new ArrayAdapter<String>(
                CustomUI.this, R.layout.provider_options, getResources()
                        .getStringArray(res)), 0,
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int item) {

                        Events(item, providerName);
                    }
                });
        dialog = builder.create();
        dialog.show();
    }

    @Override
    public void onError(SocialAuthError error) {
        Log.d("Custom-UI", "Error");
        error.printStackTrace();
    }

    @Override
    public void onCancel() {
        Log.d("Custom-UI", "Cancelled");
    }

    @Override
    public void onBack() {
        Log.d("Custom-UI", "Dialog Closed by pressing Back Key");

    }
} 
```

这是Logcat：

```
02-20 16:21:44.562: E/AndroidRuntime(932): FATAL EXCEPTION: main
02-20 16:21:44.562: E/AndroidRuntime(932): java.lang.NoClassDefFoundError: org.brickred.socialauth.android.SocialAuthAdapter
02-20 16:21:44.562: E/AndroidRuntime(932):  at com.socialauth.customui.CustomUI.onCreate(CustomUI.java:70)
02-20 16:21:44.562: E/AndroidRuntime(932):  at android.app.Activity.performCreate(Activity.java:5104)
02-20 16:21:44.562: E/AndroidRuntime(932):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-20 16:21:44.562: E/AndroidRuntime(932):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-20 16:21:44.562: E/AndroidRuntime(932):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-20 16:21:44.562: E/AndroidRuntime(932):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-20 16:21:44.562: E/AndroidRuntime(932):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-20 16:21:44.562: E/AndroidRuntime(932):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 16:21:44.562: E/AndroidRuntime(932):  at android.os.Looper.loop(Looper.java:137)
02-20 16:21:44.562: E/AndroidRuntime(932):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-20 16:21:44.562: E/AndroidRuntime(932):  at java.lang.reflect.Method.invokeNative(Native Method)
02-20 16:21:44.562: E/AndroidRuntime(932):  at java.lang.reflect.Method.invoke(Method.java:511)
02-20 16:21:44.562: E/AndroidRuntime(932):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-20 16:21:44.562: E/AndroidRuntime(932):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-20 16:21:44.562: E/AndroidRuntime(932):  at dalvik.system.NativeStart.main(Native Method) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:57:36.840

如果 DVM 在运行时无法找到类文件，则此错误与问题有关。这意味着它不包含在您的 apk 文件中。

我假设包含您正在使用的 SocialAuthAdapter 类的 jar 文件包含在您的 lib 文件夹中，而不是 libs 文件夹中。所以将jar文件移动到libs文件夹，然后重新编译apk文件。

# php - fancybox 上的图像翻转效果

> ID：14985367
> 
> 赞同：1
> 
> 时间：2013-02-20T16:49:11.357
> 
> 标签：php, javascript, jquery, fancybox

我在现有的 .jpg 精美框缩略图上覆盖 .png 时遇到了一些问题。其余的工作完美。

我有 9 张图片并编写了一个循环来在 PHP 中创建我的 fancybox 画廊。我在现有的 .jpg 缩略图上应用 .png 时遇到了一些困难。

这是我的 PHP 代码：

```
<?php
        $i=1;
        $title=array("", "t1", "t2", "t3", "t4", "t5", "t6", "t7", "t8", "t9");

        for($i; $i<10; $i++)
        {

        echo "<div id='galeria' class='one-third column alpha'>
            <a title='".$title[$i]."' class='fancybox' rel='group' href='../img/galeria/big".$i.".jpg'><img src='../img/galeria/thumb".$i.".jpg' alt='' /></a>
        </div><!--end 1\3 -->";

            $i++;
            echo "<div id='galeria' class='one-third column'>
            <a title='".$title[$i]."' class='fancybox' rel='group' href='../img/galeria/big".$i.".jpg'><img src='../img/galeria/thumb".$i.".jpg' alt='' /></a>
        </div><!--end 1\3 -->";
            $i++;
            echo "<div id='galeria' class='one-third column omega'>
            <a title='".$title[$i]."' class='fancybox' rel='group' href='../img/galeria/big".$i.".jpg'><img src='../img/galeria/thumb".$i.".jpg' alt='' /></a>
            </div><!--end 1\3 -->";
        }
    ?> 
```

我试过使用 onMouseOver 和 onMouseOut 没有成功。（我是 JS 和 jQuery 的新手，如果你能提供详细的帮助，我真的很感激）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:22:07.743

我不知道我是否理解你的问题，但试试这个：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>    
    $(function(){
        $(".fancybox").hover(
            function(){
                $(".imagem-hover",this).fadeIn(100);
            },
            function(){
                $(".imagem-hover",this).fadeOut(100);
            }
        );
    });
</script>
<style>
    * {position:relative;}
    .fancybox .imagem-hover {position:absolute; z-index:1; display:none;}
</style>
<div id="galeria">
    <a class="fancybox" href="imagemGrande.jpg">
        <img class="imagem-hover" src="over.png" />
        <img src="thumb.jpg" />
    </a>
    <a class="fancybox" href="imagemGrande.jpg">
        <img class="imagem-hover" src="over.png" />
        <img src="thumb.jpg" />
    </a>
    <a class="fancybox" href="imagemGrande.jpg">
        <img class="imagem-hover" src="over.png" />
        <img src="thumb.jpg" />
    </a>
</div> 
```

# powershell - 如何获得在每台电脑上运行服务的电脑列表？

> ID：14985368
> 
> 赞同：-2
> 
> 时间：2013-02-20T16:49:14.600
> 
> 标签：powershell, batch-file, powershell-2.0

我正在使用 psexec 在我们网络上的所有 PC 上从 cmd 自动运行，以检查某个进程是否正在运行。但我想要一个包含所有运行服务的电脑名称的列表。我怎么能从powershell做到这一点？

这就是我现在正在运行的。2个批处理文件和1个文本文件。

获取.bat

* * *

任务清单 | findstr pmill.exe >> dc-01\c$\0001.txt

* * *

run_get.bat

* * *

psexec @%1 -u 管理员 -p 密码 -c "C:\get.bat"

* * *

pclist.txt

* * *

我从结果中得到的只是所有 pmill.exe ，我想知道是否有任何方法可以输出运行 pmill.exe 的 PC 名称？

请提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:21:54.020

根据可用的远程处理类型：

*   如果 Windows 远程管理（例如 Services.msc 可以连接），那么只需使用

    ```
    Get-Service -Name theService -computer TheComputer 
    ```

    如果服务正在运行，则返回一个对象，其中包含有关该服务的信息（如其状态），如果未安装，则返回任何内容，因此假设`pclist.txt`每行一个计算机名称，以获取运行该服务的计算机列表（替换`serviceName`为正确的名称后：这可能与进程名称不同）：

    ```
    Get-Content pclist.txt | Where-Object {
      $s = Get-Service -name 'serviceName' -computer $_
      $s -or ($s.Status -eq Running)
    } 
    ```

*   如果使用上面的`Get-WmiObject win32_service -filter 'name="serviceName"' and the`State `member of the returned object in the`Where-Object 可以使用 WMI。

*   PowerShell 远程处理：使用在远程计算机上`Invoke-Command -ComputerName dev1 -ScriptBlock { Get-Service serviceName }` 运行`Get-Service`以返回相同的对象（但`PSComputerName` 添加了属性）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:16:22.510

如果所有计算机都安装了 powershell 并启用了远程处理，您可以尝试下面的脚本。它还输出无法访问的计算机，因此您可以稍后重新测试它们。如果您不需要它，只需删除`catch`-block（或全部`try/catch`）内的内容：

```
$out = @()
Get-Content "pclist.txt" | foreach {
    $pc = $_ 
    try {
        if((Get-Process -Name "pmill" -ComputerName $pc) -ne $null) {
            $out += $_
        }
    } catch { 
        #Unknown error
        $out += "ERROR: $pc was not checked. $_.Message"
    }
}

$out | Set-Content "out.txt" 
```

pclist.txt：

```
graimer-pc
pcwithoutprocesscalledpmill
testcomputer
testpc
graimer-pc 
```

Out.txt（日志）：

```
graimer-pc
ERROR: testcomputer is unreachable
ERROR: testpc is unreachable
graimer-pc 
```

# css - 在 bootstrap .container 中将四个图像定位在屏幕中央的同一位置

> ID：14985376
> 
> 赞同：0
> 
> 时间：2013-02-20T16:49:27.010
> 
> 标签：css, twitter-bootstrap, containers, center, layer

我想在屏幕上完全相同的位置有四个图像，居中并在引导程序`.container`中，这样如果图像太大，它们就会调整大小。

目标是制作包含完整徽标的网站的第一页，黑色和白色。

我使用地图/区域，以便在鼠标输入事件时，我可以在徽标后面显示图像，在特定区域的徽标下创建某种阴影（我不能通过 css 进行，因为它具有特定的形状）。

我的四个图像如下：

*   完整的徽标
*   左上角的阴影
*   右上角的阴影
*   底部阴影

它们都具有完全相同的尺寸。我认为仅将`.pagination-centered`它们全部结合使用就足够了，但它不起作用。

我为所有图像尝试了以下 CSS（全部嵌入在单独的 div 中）

```
position:absolute;
left:50%;
top:50%;
margin-left:-157px;
margin-right:-157px;
/* half of img real size */ 
```

它运行良好，但不适用于图像未正确调整大小且底部栏出现在屏幕中间的移动设备，因为我猜在定位时未考虑图像高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:24:23.547

没关系，我发现它并且实际上感觉很愚蠢：

我只是使用多个 css 类，并将背景应用于图像本身。

在响应式设计中，它不能很好地工作，因为背景没有调整大小，但我很确定我可以找到解决方法。如果不是，我将使用两组图像。而且由于回调是在`mouseenter`事件上，所以它在手机上并不重要！

希望它会帮助某人

# python - 将异步 urlfetch 与 urllib2 与谷歌应用引擎中的线程进行比较

> ID：14985396
> 
> 赞同：2
> 
> 时间：2013-02-20T16:50:42.843
> 
> 标签：python, google-app-engine, asynchronous, urlfetch

我必须让[suds](https://fedorahosted.org/suds)异步运行，我在想两个想法：

1.  （更容易）在单独​​的线程中运行每个 suds 调用，因为 GAE python 2.7 运行时[允许](https://developers.google.com/appengine/docs/python/python25/diff27#Multithreading)它。

2.  （更难）重写 suds lib 以在异步 url 获取之上运行

我想使用第一个选项，但不知道它是否会比第二个慢得多。

也许在 GAE 方面更有经验的人可以帮助我选择？

**更新**

结果必须在单个 Web 请求中，所以我不能使用任务队列/mapreduce/后端

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:35:33.163

根据[这个问题](https://stackoverflow.com/questions/2991864/using-suds-for-soap-in-python-are-suds-client-client-objects-thread-safe "这个问题")，suds 不是线程安全库。因此，您必须为每个想要使用 suds 客户端对象的线程创建一个新客户端。话虽如此，选择 1 将是您的最佳选择。

此外，请[在此处](http://omiethenull.blogspot.com/2010/08/suds-and-appengine.html)查找有关如何使 suds 库与 GAE 上的缓存一起使用的信息。

**更新**

其他可以尝试的技术（对于您不需要单个 Web 请求中的结果的用例）：

**[后端](https://developers.google.com/appengine/docs/python/backends/)和[拉队列](https://developers.google.com/appengine/docs/python/taskqueue/overview-pull)**：（如果您打算不断拨打电话，请使用此方法）

创建始终在线的后端，将 suds 客户端存储在内存中，并不断轮询拉取队列以查找您需要执行的任务。这样，您可以推送应用程序需要执行的许多任务/调用，并让多个后端以小块的形式消耗数据。

**[任务队列](https://developers.google.com/appengine/docs/python/taskqueue/overview-push)**：

（如果您想尝试将成本保持在最低限度并且不打算持续进行多次 SOAP 调用，请使用此方法）

创建任务并让 AppEngine 跨多个实例执行您的需求。只知道无法保证任务何时执行，但根据我的经验，这不是问题。

# python - python访问派生类中重新定义的属性

> ID：14985399
> 
> 赞同：0
> 
> 时间：2013-02-20T16:50:57.070
> 
> 标签：python, python-3.x

我对 python 的了解越多，我就越感到困惑。

例如下面的代码：

```
class A:
    def __init__ (self):
        self.test = "a"

    def dump(self):
        print("A.test: %s" % (self.test,))
        print("A.test: %s" % (self.__dict__["test"],))
        print("A.test: %s" % (getattr(self, "test"),))
        print()

class B (A):
    def __init__ (self):
        self.test = "b"

    def dump(self):
        print("B.test: %s" % (self.test,))
        print("B.test: %s" % (self.__dict__["test"],))
        print("B.test: %s" % (getattr(self, "test"),))
        print()

o = B ()
o.dump()
A.dump(o)
super(B, o).dump() 
```

印刷：

```
B.test: b
B.test: b
B.test: b

A.test: b
A.test: b
A.test: b

A.test: b
A.test: b
A.test: b 
```

这似乎表明您可以调用基类的函数，但是如果该类具有在某些派生类中也使用过的属性，则您无法使用普通的 object.attribute 表示法访问此属性，或者您可能不能完全访问它。

这是真的吗？如果是这样，它会杀死 - 恕我直言 - 整个 python 对象模型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T16:59:42.520

`o`是 的一个实例`B`，不是`A`。初始化时，它将其`test`属性的值设置为“b”。您甚至都不会调用超类`__init__`，因此它永远不会设置为“a” - 但即使您这样做了，它也只能具有值“a”或“b”中的一个，具体取决于您调用的是`super`first 还是 second .

不知道为什么您认为这会破坏 Python 对象模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:59:41.657

这是你想要的？

```
class A(object):
    def __init__ (self):
        self.__test = "a"

    def dump(self):
        print "A.test:", self.__test

class B (A):
    def __init__ (self):
        super(B, self).__init__()
        self.__test = "b"

    def dump(self):
        print "B.test:", self.__test

o = B()
o.dump()
super(B, o).dump() 
```

输出：

```
B.test: b
A.test: a 
```

（使用 Python 2，但你明白了..）

这是因为 Python 使用伪私有 __variables 进行了一些花哨的名称修饰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:40:13.540

你说

> 如果该类具有在某些派生类中也使用过的属性

在 A 的定义中

```
class A:
    def __init__ (self):
        self.test = "a" 
```

并不意味着将name的对象**测试**`test`创建为类 A 的属性
它意味着每次实例化一个对象时，都会在 THE INSTANCE 中创建一个属性**测试**

因此，您不可能希望访问不存在的 A 属性。

```
def A:
    attA = 13 
```

确实将对象**13**创建为 A 的属性：`print(A.attA)`将打印**13的值**

# jquery - jQuery Sortable 的奇怪行为：拖动时框不在同一个地方

> ID：14985406
> 
> 赞同：3
> 
> 时间：2013-02-20T16:51:09.123
> 
> 标签：jquery, jquery-ui-sortable, jquery-ui-draggable

我正在构建的仪表板上实现 jQuery 可排序，以便用户可以自定义他们的仪表板视图。

单击手柄时，仪表板左侧和中心的元素行为正确。然而，当我尝试拖动它们时，最右边的元素表现出奇怪的行为。我仍然可以将它们拖放到网格周围，但鼠标没有留在手柄上……盒子正在屏幕上跳跃。

这里发生了什么？为什么它只发生在边缘盒上，有没有办法解决这个问题？

[**这是实时仪表板。查看源代码以查看代码。**](http://jonathonmoore.com/work/mkt/index3.php)

这是正确行为的屏幕截图。鼠标通过移动符号位于框的一角：

![在此处输入图像描述](../Images/9476e8dfaf57981284d0277a6f9b768a.png)

这是奇怪行为的屏幕截图。鼠标其实是在空白的灰色空间，但是模块已经跳到了浏览器的左下角：

![在此处输入图像描述](../Images/892fc89d5b4a7dc658d2999da34d9472.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:50:10.953

这与浏览器对百分比值的计算有关。

您正试图在各种组件中使用 100% 的浏览器宽度。例如，如果浏览器尝试计算 23% 的浏览器宽度是 4 倍，然后计算 1% 的边距是 8 倍（加起来是预期的 100%），则不能保证这些总和舍入后组件不会超过浏览器窗口的实际宽度。某些总宽度会起作用，而其他的则不会。

让我们用一些数学来分解它。如果我们将宽度限制为 503px 的宽度，我们可以进行如下计算并看到我们超过了最大宽度。

> 503px * 0.23*宽度*= 115.69 ≈ 116px
> 
> 503px * 0.01*边距*= 5.03 ≈ 5px
> 
> （4 个*框***每个框*116 像素）+（4 个*框** 2 个*边距***每个边距*5 像素）= 464 像素 + 40 像素 = **504 像素**

**[演示（不正确的行为）](http://jsfiddle.net/Cs4YB/)** - 最大宽度设置为`503px`

但是，如果我们将宽度限制为 500 像素，则计算结果恰好符合我们的预期。

> 500 像素* 0.23*宽度*= 115 像素
> 
> 500 像素 * 0.01*边距*= 5 像素
> 
> （4 个*盒子***每个盒子*115px ）+（4 个*盒子** 2 个*边距***每个边距*5px ）= 460px + 40px = **500px**

**[演示（正确行为）](http://jsfiddle.net/Cs4YB/1/)** - 最大宽度设置为`500px`

这只发生在页面右边缘的项目上，因为那是发生换行的地方。`float: left`当没有足够的可用水平空间时，设置为的项目将换行。这就是为什么该项目基本上会转到下一行的第一个位置。

鉴于初始状态不受影响，实际问题似乎是由 jQuery UI 在排序期间执行的额外计算和 DOM 操作触发的。

# c# - 加载和保存时 XML 文件中的缩进

> ID：14985407
> 
> 赞同：0
> 
> 时间：2013-02-20T16:51:23.460
> 
> 标签：c#, xml, file-io, indentation

我知道这个主题之前已经发布过，但即使之前所有关于它的帖子我似乎也无法弄清楚如何去做。

因此，在我的代码中，我正在创建并用一些东西填充一个 xml 文件。代码返回到文件创建和关闭后的 xml 代码，以编写更多内容。问题是，无论我使用哪种流/xml 读取器/写入器组合，文本中某些地方的缩进都会变得很奇怪。

这是代码：

```
XmlDocument xml = new XmlDocument();
xml.PreserveWhitespace = true;
XmlElement root = null;

FileStream fs = null;

if (File.Exists(fileName))
{
    fs = new FileStream(fileName, FileMode.Open, FileAccess.ReadWrite);

    xml.Load(fs);
    if (xml.GetElementsByTagName("anndata").Count > 0)
         root = (XmlElement)xml.GetElementsByTagName("anndata").Item(0);
}
else
{
    fs = new FileStream(fileName, FileMode.CreateNew, FileAccess.ReadWrite);
    root = xml.CreateElement("anndata");
    xml.AppendChild(root);
}

    //some writing to the xml doc.

fs.SetLength(0);
xml.Save(fs);
fs.Close(); 
```

现在一切都在 xml 文件中的一行中，我希望有一些缩进，所以有什么提示吗？

编辑：

我将最后一点更改为：

```
fs.SetLength(0);
XmlTextWriter writer = new XmlTextWriter(fs, Encoding.Unicode);
writer.Formatting = Formatting.Indented;
xml.Save(writer);
writer.Close();
fs.Close(); 
```

但是现在在创建文件 1 次和另外两次写入后的结果，文件看起来像这样：

```
<?xml version="1.0" encoding="utf-16"?>

<anndata>
  <ann name="test1">
    <weights>
      <weight node1="7" node2="8" weight="-0.5699342" />
      <weight node1="3" node2="8" weight="-0.2840658" />
      <weight node1="0" node2="10" weight="-0.03812337" />
      <weight node1="7" node2="10" weight="0.2714444" />
      <weight node1="3" node2="10" weight="-0.2163633" />
      <weight node1="0" node2="2" weight="0.8593098" />
      <weight node1="7" node2="2" weight="-0.5274166" />
      <weight node1="3" node2="2" weight="-0.1043958" />
      <weight node1="8" node2="1" weight="0.5244942" />
      <weight node1="10" node2="1" weight="0.7568867" />
      <weight node1="2" node2="1" weight="0.7543423" />
      <weight node1="8" node2="5" weight="-0.1524385" />
      <weight node1="10" node2="5" weight="-0.09445882" />
      <weight node1="2" node2="5" weight="-0.2441895" />
      <weight node1="8" node2="11" weight="0.5473043" />
      <weight node1="10" node2="11" weight="-0.1439976" />
      <weight node1="2" node2="11" weight="0.1768849" />
      <weight node1="0" node2="1" weight="-0.4702233" />
    </weights>
  </ann>
<ann name="test1"><weights><weight node1="7" node2="8" weight="-0.5699342" /><weight node1="3" node2="8" weight="-0.2840658" /><weight nod.... //no new lines here. 
```

编辑2：

如果删除“fs.SetLength(0);” 它工作得更好，但现在`<anndata>`根元素在我第二次写入它时被复制，并且 XmlDocument 在我第三次加载它以进行第三次写入时引发异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:42:16.193

您尝试使用 xml 文档执行此操作的方式看起来不错。尝试从文件中读取文档（并关闭文件），然后将文档作为单独的步骤保存回文件（而不是使用读/写文件并尝试在加载和保存步骤之间截断它）

除此之外，只需在要求保存之前检查您是否在文档中设置了正确的格式属性。

# rotation - Android MapViewCompassDemo 闪烁，没有标题窗口

> ID：14985413
> 
> 赞同：1
> 
> 时间：2013-02-20T16:51:35.033
> 
> 标签：rotation, android-mapview, flicker, redraw

我正在尝试进行**旋转的地图视图活动**。我已将随 SDK 提供的示例复制到：

> \android-sdk\add-ons\addon-google_apis-google_inc_-3\samples\MapsDemo\src\com\example\android\apis\view

它工作得很好，但是，如果你只添加

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

在`public void onCreate(Bundle savedInstanceState)`示例活动中，地图会闪烁。我的意思是它重新绘制并再次重新绘制......

有什么技巧可以避免这种情况吗？

如果窗口上有标题，则该问题不可见。

# marionette - 如何在视图中获取对封闭应用程序的引用

> ID：14985414
> 
> 赞同：2
> 
> 时间：2013-02-20T16:51:39.253
> 
> 标签：marionette

我正在使用 Backbone.Marionette 和 RequireJS。我所有的应用程序对象都是完全模块化的。

我想使用封闭的 Marionette.Application 实例的`vent`对象作为应用程序范围的全局事件总线。我想做的是从`vent`某个子 ItemView/CollectionView/whatever 中触发一个事件，但据我所知，在子视图中没有对封闭应用程序实例的引用。是对的吗？

我知道我可以`require()`将实际的应用程序实例放入我的视图中（小心自然地避免循环依赖），但据我所知，这破坏了我的模块的封装。如果通用 ItemView 必须`require()`具有特定的应用程序模块/实例，那么我不能将该 ItemView 与恰好在我的代码库中的任何其他应用程序一起使用。

当然，Marionette.Application 在任何实例化的区域/布局/子视图中传播对自身的引用是有意义的吗？这样`vent`，任何子视图都可以触发全局事件，而不必知道哪个具体的 Marionette.Application 实现是父应用程序？

还是我错过了一些基本的东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:16:07.573

这在 wiki 中有介绍：[https ://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs](https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs)

请参阅避免循环依赖的部分

# java - GenericObjectPool 阈值

> ID：14985418
> 
> 赞同：1
> 
> 时间：2013-02-20T16:51:53.067
> 
> 标签：java, multithreading, spring, threadpool

GenericObjectPool 配置为 12 个线程。一旦 12 个线程用尽，我发现调用者线程变成了僵尸。我认为默认行为是将额外请求排入队列并在可用时提供服务，而不是杀死调用者线程。

```
private ImplClass implObject;

for (Iterator iter = anArrayList.iterator(); iter.hasNext();) {

    //Gets a GenericObjectPool Object
    implObject = (ImplClass) this.getImplPool().borrowObject();

    some code

} 
```

我已经尝试了以下两种配置来配置池。对我来说，阻塞是好的，只要它从借用语句和循环内它下面的进程行恢复。

```
 <bean id="ImplPool" class="org.apache.commons.pool.impl.GenericObjectPool">
    <constructor-arg>
        <ref local="ImplFactory"/>
    </constructor-arg>
    <constructor-arg>
        <value>12</value>
    </constructor-arg>    
</bean> 

<bean id="ImplPool" class="org.apache.commons.pool.impl.GenericObjectPool">
    <constructor-arg>
        <ref local="ImplFactory"/>
    </constructor-arg>
    <constructor-arg>
        <value>12</value>
    </constructor-arg>    
<constructor-arg>
         <bean id="org.apache.commons.pool.impl.GenericObjectPool.WHEN_EXHAUSTED_BLOCK" 
         class="org.springframework.beans.factory.config.FieldRetrievingFactoryBean" />
    </constructor-arg>      
<constructor-arg>
        <value>-1</value>
    </constructor-arg>
</bean> 
```

您能否为达到阈值的阻塞 GenericObjectPool 建议一个配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:19:28.210

我意识到我的设置没问题。由于没有再次创建线程，只有 Object 没有返回到池中。

# c - C中的函数指针相等

> ID：14985423
> 
> 赞同：15
> 
> 时间：2013-02-20T16:52:10.603
> 
> 标签：c, unix, function-pointers, elf, dynamic-loading

**我的问题：**

1.  C标准是否保证函数指针相等？
2.  如果（1）的答案是肯定的。无论在不同的最终编译单元（例如主可执行文件和共享库）中获得指针是否都是这种情况？
3.  动态加载器如何处理这个问题？（我可以考虑一些这可能很棘手的原因，所有这些都与 PIC 代码有关（例如，elf 中的 GOT 表和任何等效的 COFF 用于此的））。不管 (1) 和 (2)，linux 加载程序似乎都可以保证这一点。

**这是一个例子。**上面的问题归结为 C 是否保证`main.c`打印内容： `"Function equality: 1"`或者`"Function equality: 0"`，在第一种情况下，动态加载程序是如何实现的。

`common.h:`

```
extern void * getc_main;
extern void * getc_shared;
void assign_getc_shared(); 
```

`main.c:`

```
#include <stdio.h>
#include "common.h"

int main()
{
  getc_main = (void*) getc;
  assign_getc_shared();
  printf("Function equality: %d\n", getc_main == getc_shared);
  return 0;
} 
```

`shared.c:`

```
#include <stdio.h>
#include "common.h"

void assign_getc_shared()
{
   getc_shared = (void*) getc;
} 
```

在 Unix 中，这将使用以下命令编译：

```
cc -shared -fPIC -o libshared.so shared.c
cc -o main main.c -L. -lshared 
```

并执行：

```
LD_LIBRARY_PATH=. ./main 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T17:05:28.097

C 2011（N1570 委员会草案）6.5.9 6：“两个指针比较相等当且仅当……两者都是指向同一个……函数……的指针。所以，是的，指向同一个函数的两个指针比较相等。

当一个函数的地址被两个不同的目标模块获取时，编译器会在目标代码中放置一个占位符。当对象模块链接到可执行文件或在运行时与动态库链接时，将填充该占位符。

对于动态库，要么动态加载器根据需要填充可执行文件中的所有占位符，要么每个函数的地址实际上是一些跳转到实际函数的存根代码的位置，并填充该存根代码中或由该存根代码使用的占位符由动态加载器进入。

此外，请注意可执行文件可以包含多个函数实例。编译器可能会在几个地方内联插入函数，或者由于其自身的原因，可能包括函数的专门化以及通用版本。但是，在取函数地址时，编译器必须提供单个通用版本的地址。（或者编译器必须确保程序的行为就像已经完成一样。例如，如果编译器可以检测到程序没有比较指针，那么理论上它可能能够为地址的某些实例使用不同的地址的功能。）

# php - 如何在从 mysql 检索到的图像上添加水印

> ID：14985424
> 
> 赞同：1
> 
> 时间：2013-02-20T16:52:13.267
> 
> 标签：php, mysql, database, image, blob

我需要一些帮助。

**下面是我的代码，它检索存储在我的数据库中的所有图像，如果它运行保存为index.php**的第一块代码，它正在显示，但我想在检索到 ie 后添加水印；在显示这些图像之前。是否可以在之后集成水印，或者我们只能在之前这样做？

```
<?php
mysql_connect("localhost", "root", "") or die(mysql_error());
mysql_select_db("test") or die(mysql_error());
$query = mysql_query("SELECT * FROM images ORDER BY id DESC") or die(mysql_error());
while( $result = mysql_fetch_array($query) ){
$id = $result['id'];
echo "<img src=img.php?id=$id>";
?> 
```

在 img.php 中

```
<?php
mysql_connect("localhost", "root", "") or die(mysql_error());
mysql_select_db("test") or die(mysql_error());
$id = $_REQUEST['id'];
$query = mysql_query("SELECT * FROM images WHERE id='$id'") or die(mysql_error());
$image = mysql_fetch_assoc($query);
$image1 = $image['image'];
header('Content-type:image/jpeg');
echo $image1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T00:56:20.113

您应该将图像存储为链接而不是 blob。但是由于现有的图像数据库，以下代码会将水印放在存储为 blob 的图像上。它使用 PDO 而不是已弃用的 mysql_ 函数。

```
<?php
function ImageStringCenter($image, $fontSize, $lineNumber, $totalLines, $text, $color ) { 
    $centerX = ceil( ( imagesx($image) - ( ImageFontWidth($fontSize) * strlen($text) ) ) / 2 ); 
    $centerY = ceil( ( ( imagesy($image) - ( ImageFontHeight($fontSize) * $totalLines ) ) / 2)  + ( ($lineNumber-1) * ImageFontHeight($fontSize) ) ); 
    ImageString($image, $fontSize, $centerX, $centerY, $text, $color ); 
} 
require("dbinfo.php");
// Opens a connection to a mySQL server
$connection=mysql_connect ($host, $username, $password);
if (!$connection) {
  die("Not connected : " . mysql_error());
}

// Set the active mySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
  die ("Can\'t use db : " . mysql_error());
}

$id = 1;
$query = mysql_query("SELECT * FROM images WHERE id='$id'") or die(mysql_error());
$image = mysql_fetch_assoc($query);
$image1 = $image['image'];
//Use imagecreatefrompng,imagecreatefromgif, imagecreatefromjpeg ,etc for othertypes
$im = imagecreatefromstring($image1);////For blobs
$text_color = imagecolorallocate($im, 266, 266, 266);
ImageStringCenter($im, 5, 1, 2,  "Watermark", $text_color);
ImageStringCenter($im, 5, 2, 2,  "20/02/2013", $text_color);
header("Content-Type: image/png");//blob .png file
imagepng($im);
imagedestroy($image1);
?> 
```

**数据库**

![数据库](../Images/72a690a56a2b41dd758ad7aa55285405.png)

**图片上的水印**

![水印](../Images/f287c1f5d853a00440e7ab0c6b095882.png)

# java - 使用 Scanner 读取带空格的文件

> ID：14985432
> 
> 赞同：0
> 
> 时间：2013-02-20T16:53:00.150
> 
> 标签：java, java.util.scanner

我正在尝试使用扫描仪读取带有 * 和空格的 txt 文件。到目前为止，我已经为输入编写了以下代码：

```
**   S       ***

while(lineNum <= height){
            //System.out.println("Maze created");
            lineTokenizer = new Scanner(s.nextLine());

            for(int i=0;i<height;i++){
                for(int j=0;j<width;j++){
                    if (lineTokenizer.hasNext()) {
                        lineTokenizer.useDelimiter("\\s+");
                    maze[i][j]=lineTokenizer.next();
                }
            }
            }
            lineNum++;
            } 
```

但是，我仍然无法超越

> **

观点。你能告诉我哪里出错了吗？谢谢。

我已经编辑了 Q 以包含循环。lineNum 将跟踪行数（我从文件的第 2 行开始）并将读取的每个字符存储在 2d 数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:54:26.717

由于您有多个空格，因此您的分隔符应该是`\\s+`

```
 lineTokenizer.useDelimiter("\\s+"); 
```

# java - 返回列表时没有得到正确的 JSON

> ID：14985435
> 
> 赞同：0
> 
> 时间：2013-02-20T16:53:07.710
> 
> 标签：java, json, spring, jackson

以下是我用于以 JSON 形式返回模型列表的方法

```
 @RequestMapping(value = "/fetchAddress.htm", method = RequestMethod.GET)
@ResponseBody   
public  GenericEntity<List<Address>> fetchAddress(@RequestParam(value="addressId", required=true) int addressId){   
    logger.debug("fetchQueryDetails called");
    List<Address> al =queryDao.fetchAddress(addressId);

    GenericEntity<List<Address>> gal= new GenericEntity<List<Address>>(al){};   
    return gal;      
} 
```

}

以下是我的模型课

```
 @XmlRootElement(name = "Address")
    @XmlAccessorType(XmlAccessType.FIELD)
    public class AddressImpl implements Address {
     properties, setter, getter.
    } 
```

以下是我得到的 JSON 响应

```
 {"rawType":"java.util.ArrayList","type":{"actualTypeArguments":["com.mvp.Address"],"rawType":"java.util.List","ownerType":null},"entity":[{"flatno":"S-2","houseNo":"42","street":"mother dairy","sector":"sec-2A","city":"kashi","state":"U.P.","country":"India","pin":"200001"},{"flatno":"S-2222222","houseNo":"42","street":"mother dairrrrrrrry","sector":"sec-2AAaa","city":"varansi","state":"U.P.","country":"India","pin":"201101"}]} 
```

现在在 JSON 响应中，我不希望输出中的 rawType、type、ownerType 以及实体名称被更改，例如 addressList。还有任何想法如何避免 bean 类的某些属性不出现在 JSON 中。我正在使用 Jackson 库来创建 JSON。以下是我正在使用的罐子。

```
 jackson-mapper-asl-1.9.2.jar,
     jackson-xc-1.9.2.jar,
     jackson-jaxrs-1.9.2.jar,
     jackson-core-asl-1.9.2.jar 
```

有遇到同样情况的，求指教。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:55:14.250

您可以使用注释 @JsonProperty 自定义名称：

```
@JsonProperty("NameOfProperty")
public String getProperty() {
    return property;
} 
```

如果您不需要属性，请使用以下命令忽略它：@JsonIgnoreProperties

```
@JsonIgnoreProperties
public String getPropertyToExclude() {
    return propertyToExclude;
} 
```

# javascript - 图像加载事件未在 Windows Phone 8 上触发

> ID：14985436
> 
> 赞同：0
> 
> 时间：2013-02-20T16:53:13.333
> 
> 标签：javascript, jquery, html, windows-phone-8, windows-phone

我为正在开发的移动网站编写了一个图片库 jQuery 插件。对于画廊中的每张图片，我都有低分辨率和高分辨率。

画廊全屏显示，每个图像最初都填充了低分辨率图像。当用户向左/向右滑动到给定图像时，我想开始安静地加载高分辨率图像，并在完成后将其与低分辨率交换。

目前这在 iOS 和 Android 上运行，但在 Windows Phone 8 上，高分辨率图像的 onload 事件似乎没有触发，因此交换永远不会发生。

代码：

```
var image = images[images_i];
if (image.$el && image.full && image.$el.attr('src') != image.full) {
    var fullImage = new Image();
    fullImage.onload = function () {
        image.$el.attr('src', image.full);
    };
    fullImage.src = image.full;
} 
```

（图库生成包含每个图像 url、jQuery 对象、元数据等的“图像”哈希）

我最初也尝试在 DOM 中实际插入一个新的隐藏图像，并使用 jQuery 绑定到加载事件。但是，我发现如果图像已经被缓存，这不会一直触发，所以我不得不为 $image.prop('complete') 添加另一个检查。这在 WP8 上产生了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:37:48.783

显然，我的第一次尝试真的很接近，但犯了错误，弄错了事情的顺序。我在 SO 上看到的关于这个问题的所有答案只包括图像的 onload 事件处理，但没有考虑到如果 IE 已经缓存了图像，这个事件将不会触发。

完整解决方案：

```
var fullImage = new Image();
fullImage.onload = function () {
    $img.attr('src', fullImageUrl);
};
fullImage.src = image.full;
if ($(fullImage).prop('complete') {
    $img.attr('src', fullImageUrl);
} 
```

如果图像已经缓存，$(fullImage).prop('complete') 将返回 true。

# sql - 如何轻松编写数据库中的所有对象以搜索特定列和数据类型

> ID：14985439
> 
> 赞同：0
> 
> 时间：2013-02-20T16:53:16.030
> 
> 标签：sql, sql-server

**摘要：** 我需要编写所有数据库存储过程、函数和视图的脚本，以查找“customer_code char(3)”的所有实例。有没有一种简单的方法来编写所有对象的脚本？我有 7 台数据库服务器，每台都有 20-30 个数据库。我不想打开每个数据库并为每个数据库手动生成脚本，这将花费太长时间。

**背景：** 我们有一个经典问题要解决，类似于 W2K。我们在数据库中有一个代码列，即 char(3)。这填充了随机生成的字母和数字，以创建我们用来识别客户工作的唯一代码。它已经 25 年了，我们估计在我们完全用完组合之前大约有 4-5 个月的时间。我们需要将此列扩展为 varchar(10) 类型。

**奖励：** 理想情况下，我想要一个解决方案，它还允许我搜索每个数据库的对象，查找和计算“customer_code char(3)”的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:59:46.950

要在过程、视图和函数中搜索特定文本，您只需搜索 syscomments。这个简单的查询只会搜索一个数据库，但您可以修改以使其遍历服务器上的所有数据库。

```
DECLARE @sSearchString VARCHAR(30)

SELECT  @sSearchString = 'YMDEFF'

SELECT Distinct
    ss.name,
    so.Name,
    SO.Type
FROM sys.objects SO (NOLOCK)
INNER JOIN syscomments SC (NOLOCK) 
    on SO.object_id = SC.ID
INNER JOIN sys.schemas ss
    ON so.schema_id = ss.schema_id
WHERE SC.Text LIKE ('%'+@sSearchString+'%')
ORDER BY SO.Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:44:45.120

RedGate 做了一个插入管理工作室的名为 SQL Search 的免费软件，它索引数据库中的所有对象并真正快速地找到对对象的引用。

我发现它是一个非常方便的工具，可以处理这样的事情：

[http://www.red-gate.com/products/sql-development/sql-search/](http://www.red-gate.com/products/sql-development/sql-search/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T21:19:49.070

我开发了 2 个可能对您有所帮助的应用程序：

[SMOscript](http://devio.wordpress.com/2011/06/26/smoscript-0-19/)脚本出给定数据库中的所有对象。它还具有搜索功能，可在所有 T-SQL 模块中搜索字符串。

有时在实现更改时，我的做法是有意更改或删除要更改的项目，并让编译器检测依赖关系。在您的场景中，我将重命名该`customer_code`列并通过调用每个对象来检查所有对象是否依赖于该列。

应用程序[checktsql](http://devio.wordpress.com/2010/05/28/checking-ms-sql-server-objects/)就是这样做的：它遍历视图、SP 等，执行它们中的每一个，并记录错误。您还可以在我的博客上找到纯 T-SQL 解决方案。

# objective-c - NSInvocation setArgument 不适用于简单的 int32_t

> ID：14985440
> 
> 赞同：2
> 
> 时间：2013-02-20T16:53:15.983
> 
> 标签：objective-c, integer, nsinvocation

在将 NSInvocation 与不是对象的参数一起使用时，我遇到了一个问题。我传递的简单整数值被更改为不同的值。

这是我正在调用的方法：

```
+(NSString*) TestMethod2 :(int32_t) number
{
    NSLog(@"*************** %d ******************", number);
    return @"success";
} 
```

这就是我所说的：

```
-(void) TestInvocationUsingReflection
{
    id testClass = NSClassFromString(@"TestClass");
    NSMethodSignature * methodSignature = [testClass methodSignatureForSelector:@selector(TestMethod2:)];

    NSInvocation *inv = [NSInvocation invocationWithMethodSignature:methodSignature];
    [inv setSelector:@selector(TestMethod2:)];
    [inv setTarget:testClass];
    NSNumber * arg = [NSNumber numberWithInt:123456];

    [inv setArgument:&arg atIndex:2]; //arguments 0 and 1 are self and _cmd respectively, automatically set by NSInvocation
    [inv retainArguments];
    NSUInteger length = [[inv methodSignature] methodReturnLength];
    id result = (void *)malloc(length);

    [inv invoke];
    [inv getReturnValue:&result];

} 
```

结果是记录的不是我传递的简单的 123456 值，而是这样的：

****** *** *******180774176******* *** ** *** **********

 *****我做错了什么？

我对 Objective C 很陌生，但是我需要在运行时调用一个我无法控制的方法。它以 int64_t 作为参数类型。

请问有人可以帮忙吗？谢谢....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:29:32.973

您传递了错误的参数类型。由于该方法采用 type 的参数`int32_t`，这就是您需要传递的内容：

```
int32_t arg = 123456;

[inv setArgument:&arg atIndex:2]; //arguments 0 and 1 are self and _cmd respectively, automatically set by NSInvocation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:30:28.987

您将 NSNumber* 作为参数传递，而不是 int_32t。NSNumber 恰好包装了整数，但它不是整数。

请注意，`retainArguments`可能期望参数是可以保留的对象。它的文档确实提到了 C 字符串是被复制的，但是像 int 这样的标量会发生什么并不是很明显。您可能应该避免`retainArguments`并管理保留和释放自己。*****

# c# - Winform 设计器应用程序

> ID：14985450
> 
> 赞同：2
> 
> 时间：2013-02-20T16:53:41.193
> 
> 标签：c#, xml, winforms, visual-studio

朋友们，我需要一个用于设计表单的应用程序——采用 Visual Studio/winform Designer 的风格。有谁知道我可以用来学习或适应的任何项目？最后，我需要用 C# 开发一个工具来生成包含所有格式和屏幕元素的 XML。

欢迎任何帮助或建议。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:58:34.627

*   您拥有[SharpDevelop Winforms Designer](http://www.icsharpcode.net/opensource/sd/)，它可能会根据您的需要进行调整。
*   ...或者也许是[MonoDevelop Winforms Designer](http://www.mono-project.com/WinForms_Designer)
*   如果这还不够，请查看这篇描述如何使用[Microsoft Design Surface](http://msdn.microsoft.com/en-us/library/system.componentmodel.design.designsurface.aspx)实现客户表单设计器的[CodeProject 文章。](http://www.codeproject.com/Articles/24385/Have-a-Great-DesignTime-Experience-with-a-Powerful)

如果您仍需要更详细的控制，[这篇 MSDN 文章](http://msdn.microsoft.com/en-gb/magazine/cc163871.aspx)描述了如何或多或少地从头开始创建您自己的 .NET 表单设计器。它带有[源代码和预构建的可执行文件](http://msdn.microsoft.com/en-gb/magazine/cc164730.aspx)。

最后，解决方案取决于您的问题的详细信息以及您需要提供的用户支持类型。

# r - 用 R 绘制直方图；y轴不断从比例/概率变为频率

> ID：14985455
> 
> 赞同：2
> 
> 时间：2013-02-20T14:19:36.873
> 
> 标签：r, histogram

我尝试在同一平面上叠加两个直方图，但 hist() 中的选项 Probability=TRUE（相对频率）对下面的代码无效。这是一个问题，因为这两个样本的大小非常不同（长度（cl1）=9 和长度（cl2）=339），并且使用此脚本，我无法可视化两个直方图之间的差异，因为每个直方图都显示频率。如何重叠两个具有相同 bin 宽度的直方图，显示相对频率？

```
c1<-hist(dataList[["cl1"]],xlim=range(minx,maxx),breaks=seq(minx,maxx,pasx),col=rgb(1,0,0,1/4),main=paste(paramlab,"Group",groupnum,"cl1",sep=" "),xlab="",probability=TRUE) 
c2<-hist(dataList[["cl2"]],xlim=range(minx,maxx),breaks=seq(minx,maxx,pasx),col=rgb(0,0,1,1/4),main=paste(paramlab,"Group",groupnum,"cl2",sep=" "),xlab="",probability=TRUE)
plot(c1, col=rgb(1,0,0,1/4), xlim=c(minx,maxx), main=paste(paramlab,"Group",groupnum,sep=" "),xlab="")# first histogram
plot(c2, col=rgb(0,0,1,1/4), xlim=c(minx,maxx), add=T)
cl1Col <- rgb(1,0,0,1/4)
cl2Col <- rgb(0,0,1,1/4)
legend('topright',c('Cl1','Cl2'),
fill = c(cl1Col , cl2Col ), bty = 'n',
border = NA) 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T14:53:04.927

当您在类直方图（如 c1）的对象上调用 plot 时，它会调用直方图的 S3 方法。即，`plot.histogram`。如果您键入，您可以看到此函数的代码，`graphics:::plot.histogram`您可以在 下查看它的帮助`?plot.histogram`。该函数的帮助文件指出：

> 频率逻辑; 如果为TRUE，直方图图形将呈现频率的表示，即`x$counts`；如果为 FALSE，则绘制相对频率（概率），即 x$density。对于等距中断，默认值为 true，否则为 false。

因此，当 plot 呈现直方图时，它不使用先前指定的`probability`或`freq`参数，它会尝试自己找出答案。如果您在里面挖掘，其原因很明显`c1`，它包含绘图所需的所有数据，但没有指定应该如何渲染。

`freq=FALSE`因此，解决方案是在运行绘图函数时重申该论点。值得注意的是，`freq=FALSE`有效而`probability=TRUE`无效，因为`plot.histogram`没有概率选项。所以，你的情节代码将是：

```
plot(c1, col=rgb(1,0,0,1/4), xlim=c(minx,maxx), main=paste(paramlab,"Group",groupnum,sep=" "),xlab="",freq=FALSE)# first histogram
plot(c2, col=rgb(0,0,1,1/4), xlim=c(minx,maxx), add=T, freq=FALSE) 
```

这一切似乎都是 R 开发人员的疏忽/特殊决定（或缺乏决定）。值得称赞的是，它被适当地记录在案并且不是“意外行为”（尽管我当然没想到）。我不知道应该在哪里报告这种奇怪的事情，如果应该报告的话。

# ios - 将界面生成器中的 tableViews 连接到非出口变量

> ID：14985460
> 
> 赞同：0
> 
> 时间：2013-02-20T16:53:54.393
> 
> 标签：ios, uitableview, interface, interface-builder, tableview

我试图弄清楚如何将我在 NIB 文件中定义的 tableview 连接到头文件中的变量，唯一的是，变量定义为：

@property（强，非原子） UITableView *bimbitTableView;

并不是

@property（强，非原子）IBOutlet UITableView *recevtPlacesTableView;

出于某种原因，它只允许我连接到插座。另外我连接到变量的原因是我想以编程方式多次重新加载数据。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:57:53.803

只需将关键字添加`IBOutlet`到您的第一个声明的属性。

这只是对 Interface Builder 的一个提示，您希望能够将插座连接到它，并且没有其他理由不将它放在那里。它实际上是一个“变量”（技术上是声明的属性），与没有关键字的变量没有什么不同。

# java - Overlayitem 对象构造函数未定义

> ID：14985461
> 
> 赞同：0
> 
> 时间：2013-02-20T16:53:55.407
> 
> 标签：java, android, web-services, google-maps

我正在阅读 Web 服务教程，并遇到了我无法修复的最后一个错误。

当调用构造函数 OverlayItem(Drawable) 未定义的类构造函数时，我在 itemOverlay 对象上收到错误。

我真的不明白这一点，因为我正在向构造函数提供相关数据，我不敢相信构造函数不需要任何值传递给它？

这是发生错误的方法：

```
 MapActivity mapAct = (MapActivity)ctx;
        MapView map = (MapView)mapAct.findViewById(R.id.map);
        map.setScrollBarStyle(MapView.SCROLLBARS_INSIDE_INSET);
        map.setBuiltInZoomControls(Boolean.TRUE);
        map.displayZoomControls(Boolean.TRUE);

        GeoPoint point = new GeoPoint((int)(geoName.lat * 1E6), (int)(geoName.lng * 1E6));
        MapController mc = map.getController();
        mc.setZoom(17);
        mc.setCenter(point);
        mc.animateTo(point);

        List<Overlay> overlays = map.getOverlays();
        overlays.clear();

                    ***** ERROR on constructor*****
        OverlayItem items = new OverlayItem(ctx.getResources().getDrawable(R.drawable.marker));
        OverlayItem item = new OverlayItem(point, geoName.placeName, "" + geoName.postalCode);

        items.addOverlay(item);
        overlays.add(items); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:58:20.820

It's not clear why you're confused. Look at the [`OverlayItem` documentation](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/OverlayItem), and there's just a [single constructor](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/OverlayItem#OverlayItem%28com.google.android.maps.GeoPoint,%20java.lang.String,%20java.lang.String%29):

```
public OverlayItem(GeoPoint point,
                   java.lang.String title,
                   java.lang.String snippet) 
```

So your *second* constructor call (for `item`) is fine, as that's passing in a point, title and snippet, but this one (for `items`):

```
new OverlayItem(ctx.getResources().getDrawable(R.drawable.marker)) 
```

is trying to *just* pass a `Drawable`... and there's no constructor with a siganture of

```
// This doesn't exist!
public OverlayItem(Drawable drawable) 
```

Given the rest of your code, I suspect you *actually* wanted [`ItemizedOverlay`](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/ItemizedOverlay):

```
ItemizedOverlay items = new ItemizedOverlay(ctx.getResources().getDrawable(R.drawable.marker)); 
```

Rather than just change your code, you should take a step back and work out why you didn't spot this from the compiler error. It's giving you all the information you need to understand why your current code is wrong - although admittedly not the class that you should have been using instead.

# f# - 签名文件“AsyncSocket”没有对应的实现文件

> ID：14985467
> 
> 赞同：1
> 
> 时间：2013-02-20T16:54:12.323
> 
> 标签：f#, .net-4.5

我刚刚开始使用 F#，所以我可能缺少一些非常简单的东西，但是我遇到了一个似乎没有人遇到过的编译器错误：

> 签名文件“AsyncSocket”没有对应的实现文件。如果存在实现文件，则检查签名和实现文件中的“模块”和“命名空间”声明是否匹配。

我认为我的代码可能有问题，所以我[从 msdn 复制了这个例子，](http://msdn.microsoft.com/en-us/library/dd233196.aspx)我得到了完全相同的东西。知道发生了什么吗？

签名：

```
namespace Library1
  module Module1 = 
    val function1 : int -> int
    type Type1 =
        new : unit -> Type1
        member method1 : unit -> unit
        member method2 : unit -> unit

    [<Sealed>]
    type Type2 = 
        new : unit -> Type2
        member method1 : unit -> unit
        member method2 : unit -> unit

    [<Interface>]
    type InterfaceType1 =  
        abstract member method1 : int -> int
        abstract member method2 : string -> unit 
```

执行：

```
namespace Library1
module Module1 =

    let function1 x = x + 1

    type Type1() =
        member type1.method1() =
            printfn "test1.method1" 
        member type1.method2() =
            printfn "test1.method2"

    [<Sealed>]
    type Type2() =
        member type2.method1() =
            printfn "test1.method1" 
        member type1.method2() =
            printfn "test1.method2"

    [<Interface>]
    type InterfaceType1 =
        abstract member method1 : int -> int
        abstract member method2 : string -> unit 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:20:45.697

如果签名和实现文件具有不同的名称（无扩展名），则会发生此错误。签名和实现应分别位于名为`<same-name>.fsi`和的单独文件`<same-name>.fs`中。正如 pad 评论的那样，签名文件应该在构建顺序（或解决方案资源管理器树视图）中立即位于实现文件之前。

# ios - 从 UIPickerView 更改按钮图像

> ID：14985471
> 
> 赞同：0
> 
> 时间：2013-02-20T16:54:24.387
> 
> 标签：ios, objective-c, uipickerview

我有一个关于我一段时间以来一直在做的事情的问题。我有一个列出不同类型食物的 UIPickerView。我的数组看起来像这样：

```
food = [[NSMutableArray alloc] init];
    [activities addObject:@"Pasta"];
    [activities addObject:@"Pizza"];
    [activities addObject:@"Spaghetti"];
    [activities addObject:@"Salad"]; 
```

我的图像数组是：

```
foodImages = [[NSMutableArray alloc] init];
        [activities addObject:@"Pasta.png"];
        [activities addObject:@"Pizza.png"];
        [activities addObject:@"Spaghetti.png"];
        [activities addObject:@"Salad.png"]; 
```

我想知道的是，当用户从选择器视图中选择一个项目时，我是否可以更改按钮的图像。因此，如果从 UIPickerView 中选择了意大利面，它会将按钮的图像更改为“Pasta.png”。我怎样才能在 Xcode 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:02:19.410

Implement the `UIPickerViewDelegate` method ([docs](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerViewDelegate_Protocol/Reference/UIPickerViewDelegate.html)):

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    NSString *imageName = foodImages[row];

    [button setImage:[UIImage imageNamed:imageName] forState:UIControlStateNormal];

} 
```

Set your picker's delegate:

```
pickerView.delegate = self; 
```

Then add your images to your Xcode project (if you haven't done so already).

You may also want to set the image for different states, or use `setBackgroundImage:forState` if you also want text on the button (see [UIButton docs](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html) for more info).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:00:10.780

你当然可以这样做。首先，将图像链接和食物名称存储在一个数组中会更好。这将使您的应用程序更具可扩展性，并且对代码的更改不太可能导致错误。

你可以这样做：

```
food = [[NSMutableArray alloc] init];
[food insertObject:[NSMutableArray arrayWithObjects:@"Pasta",@"Pasta.png",nil] atIndex:[food count]];
[food insertObject:[NSMutableArray arrayWithObjects:@"Pizza",@"Pizza.png",nil] atIndex:[food count]]; 
```

虽然如果你的图片和你的名字一样但是扩展名为 .png 那么你真的需要两个对象吗？

* * *

至于为 a 设置图像，`UIPicker`你会做这样的事情（你需要添加`UIPickerViewDelegate`到 .h 并调用`[self setPickerValue];`你想显示的地方`UIPicker`- 也许是一个按钮或文本字段？）：

```
-(void)setPickerValue {
    pickerActionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil, nil];
    [pickerActionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];
    CGRect pickerFrame = CGRectMake(0, 44, 0, 0);
    UIPickerView *valuesPicker = [[UIPickerView alloc] initWithFrame:pickerFrame];

    [valuesPicker setDataSource: self];
    [valuesPicker setDelegate: self];
    valuesPicker.showsSelectionIndicator = YES;
    [pickerActionSheet addSubview:valuesPicker];

    UIToolbar *controlToolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    [controlToolBar setBarStyle:UIBarStyleBlack];
    [controlToolBar sizeToFit];

    UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    UIBarButtonItem *setButton = [[UIBarButtonItem alloc] initWithTitle:@"Set" style:UIBarButtonItemStyleDone target:self action:@selector(dismissPicker)];
    UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelPicker)];
    [controlToolBar setItems:[NSArray arrayWithObjects:cancelButton, spacer, setButton, nil] animated:NO];

    [pickerActionSheet addSubview:controlToolBar];
    [pickerActionSheet showInView:self.view];
    [pickerActionSheet setBounds:CGRectMake(0, 0, 320, 485)];
}
-(void)cancelPicker {
    [pickerActionSheet dismissWithClickedButtonIndex:0 animated:YES];
}
// Number of components.
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
    return 1;
}
// Total rows in our component.
-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{
    return [food count];
}
// Display each row's data.
-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component{
    return [[food objectAtIndex: row] objectAtIndex:0];
} 
```

上面的代码创建了一个不错的选择器视图，其中带有一个取消和确定按钮作为工具栏。您需要的最后一个功能是（假设您有一个`UIButton`名为“button1”）：

```
-(void)dismissPicker {
    [button1 setImage:[UIImage imageNamed: [[food objectAtIndex:row] objectAtIndex:1]] forState:UIControlStateNormal];
    [pickerActionSheet dismissWithClickedButtonIndex:0 animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:00:20.043

`[yourButton setImage:[UIImage imageNamed:[foodImages objectAtIndex:0]] forState:UIControlStateNormal];`// objectAtIndex 0 将返回“Pasta.PNG”，1 将返回 Pizza 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:05:29.133

我会使用一个 NSDictionary，其中食物的名称是键，食物的图片文件是值。然后当它被选中时，只需加载Key的值作为图片。

如果你想坚持使用两个数组，那么获取所选食物的索引，只要你的 foodImages 数组镜像食物数组，你就可以使用 objectAtIndex 的值来加载图像。

# ruby - 在 Ruby 中使用 HTTParty 编写 API 包装器时的设计决策

> ID：14985473
> 
> 赞同：0
> 
> 时间：2013-02-20T16:54:27.090
> 
> 标签：ruby, api, parsing, wrapper, httparty

我正在用 Ruby 编写 API 包装器，但不知道如何继续。`HTTParty`非常好，为我处理一切，但`HTTParty::get`它返回一个`HTTParty::Response`对象。

我想知道，是否更好：

1.  让用户`HTTParty::Response`直接使用对象
2.  以某种方式转换为哈希？
3.  创建一个具有属性/字段作为响应对象中的键的类的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:58:01.600

我正在做一个我实际上做#3的项目。我使用 HTTParty 将数据转换为散列，然后使用散列创建一组相关的 ActiveRecord 类。在 Ruby 类中操作数据（例如进行验证）比将其保留在原始哈希中更容易。

# python - 在 argparse 中设置互斥集

> ID：14985474
> 
> 赞同：9
> 
> 时间：2013-02-20T16:54:30.063
> 
> 标签：python, argparse

我正在使用一个互斥组，但我不止一个选项可以进入其中一个互斥组。我希望我的用法看起来像这样：

```
[--conf CONF | --hostname HOSTNAME --port PORT] 
```

知道如何做到这一点吗？我尝试将参数组添加到互斥组，但互斥部分不适用于子组，它允许`--conf file --hostname host --port 22`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:24:37.137

不是使用 argparse 的答案，但仍然可以解决您的问题：使用[docopt](http://docopt.org/)而不是 argparse 可以让您编写使用模式，并让 docopt 自动解析和验证传递给您的程序的 args。在你的情况下，

```
prog_name (--conf CONF | --hostname HOST --port PORT) 
```

会给你你想要的互斥组。

# python - 删除不存在的记录应该在 sqlalchemy 中引发错误

> ID：14985478
> 
> 赞同：5
> 
> 时间：2013-02-20T16:54:36.990
> 
> 标签：python, sqlalchemy

为什么删除不存在的记录不会在 sqlalchemy 中引发错误。没有关于记录是否被删除的反馈。

```
session.query(Element).filter(Element.id==ElementId).delete() 
```

谢谢你的澄清。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T16:58:11.637

我不认为这是一个错误。例如，发出查询以删除 sql 中“不存在”的记录是完全合法的

如果我有一个带有“id”列的“posts”表。没有记录

`DELETE FROM posts WHERE ID > 0;`

这是完全有效的sql，没有错误，即使没有行

我对 sqlalchmey 不太熟悉，但你能先检查一下 value 是否存在吗？

```
element = session.query(Element).filter(Element.id==ElementId).first()
if element:
   # delete element
else:
   # raise exception 
```

上面将发出一个额外的查询，但......

此外，如果您想要一个`delete`引发错误的方法，您可以创建自己的会话类 [更改 SQLAlchemy 的 Session.delete() 行为](https://stackoverflow.com/questions/8908571/change-sqlalchemys-session-delete-behaviour) 并覆盖`delete`

正如[zzzeek](https://stackoverflow.com/users/34549/zzzeek)[`delete`](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html#sqlalchemy.orm.query.Query.delete)用标准指出的那样

> 返回删除的行数，不包括任何级联。

这是查看是否删除任何行的另一个选项

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-07-04T09:04:26.570

实际上，sqlalchemy 删除操作返回受影响的行数。因此，您可以检查，如果受影响的行为 0，那么您可以引发错误。

```
effected_rows = session.query(Element).filter(Element.id==ElementId).delete()
if effected_rows == 0:
    # raise exception
else:
    # delete element 
```

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-05T06:54:31.497

向@madogan 添加一个答案，编辑队列已满，因此编写了一个新答案。

我在一个可行的解决方案中更详细地扩展了他的答案：

```
class NoEntryFoundException(Exception):
    pass

def delete_row_entry(element_id: int):
    effected_rows = session.query(Element).filter(Element.id == element_id).delete()

    if effected_rows == 0:
        raise NoEntryFoundException(f'No row entry found with id: {element_id}')
    else:
        session.commit() 
```

# vba - 创建将分钟转换为 hh:mm:ss 的 VBA 函数

> ID：14985481
> 
> 赞同：1
> 
> 时间：2013-02-20T16:54:43.717
> 
> 标签：vba, excel, time-format

我正在尝试取一个分钟值（例如 3.83 分钟）并将其转换为 hh:mm:ss 时间格式（我知道是 0:03:50）

出于某种原因，从宏记录的 .NumberFormat 不起作用并给我一个#VALUE！错误。

```
 Function MINtoHMS(MIN)
    MIN = MIN / (24 * 60)
    MINtoHMS = MIN
    MINtoHMS.NumberFormat = "[h]:mm:ss;@"
    End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:59:36.887

-编辑-用作加载项

Excel 插件：[http ://www.filedropper.com/mintohms](http://www.filedropper.com/mintohms)

使用以下代码创建一个名为 SheetChangeHandler 的类模块：

```
Option Explicit

Private WithEvents App As Application

Private Sub Class_Initialize()
    Set App = Application
End Sub

Private Sub App_SheetChange(ByVal Sh As Object, ByVal Target As Range)
    On Error GoTo Err
    If InStr(Target.Formula, "=MINtoHMS") Then
        Target.NumberFormat = "hh:mm:ss"
    End If
    On Error GoTo 0
    Exit Sub
Err:
End Sub 
```

使用以下代码添加模块：

```
Option Explicit

Public MySheetHandler As SheetChangeHandler

Sub Auto_Open()
   Set MySheetHandler = New SheetChangeHandler
End Sub

Function MINtoHMS(MIN)
    MIN = MIN / (24 * 60)
    MINtoHMS = MIN
End Function 
```

单击文件 > 另存为 > Excel 97-2003 加载项 (*.xla) > 保存

单击文件 > 选项 > 加载项

单击管理旁边的“开始...”：Excel 加载项

选中刚刚创建的加载项旁边的框

点击“确定”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:09:12.723

首先，您不能通过公式更改 Excel 单元格的格式。单元格的公式*只能*分配给单元格（或范围）的值。

其次，你真的应该在你的函数中声明一些数据类型，这将防止许多神秘的错误和其他奇怪的结果。

这样的事情应该没问题：

```
Function MINtoHMS(MIN As Double) As Date
    MIN = MIN / (24 * 60)
    MINtoHMS = MIN
End Function 
```

绝对控制通过函数看到的内容的唯一方法是返回格式化的字符串，正如 Ripster 在他/她的回答中所显示的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:20:12.940

试试以下这些方法。

```
DAYS = Format(Int([Expr3]/86400), "00") - will correctly display days
HOURS = Format(Int(([Expr3])/3600) - ((Int([Expr3]*86400)/3600), "00") - DOES NOT CORRECTLY display correct hours
HOURS = Format(Int([Expr3]/3600),"00") - What will display hours
MINUTES = Int(([Expr3]-(Int([Expr3]/3600)*3600))/60)
SECONDS = Format((([Expr3] Mod 60)),"00")

dTotalSeconds = DateDiff("S", Now(), dChristmasDate)
    iDays = Int(dTotalSeconds / 86400)
    iHours = Int((dTotalSeconds Mod 86400) / 3600)
    iMinutes = Int(((dTotalSeconds Mod 86400) Mod 3600) / 60)
    iSeconds = ((dTotalSeconds Mod 86400) Mod 3600) Mod 60 
```

' 通过使用此函数，您可以将分钟转换为 hh:mm:ss

```
 Public Function HMStoSec(strHMS As String) As Long
        HMStoSec = Split(strHMS, ":")(0) * 3600 + _
                   Split(strHMS, ":")(1) * 60 + _
                   Split(strHMS, ":")(2)
    End Function 
```

# knockout.js - 如果输入类型=密码的值由浏览器自动填充模式设置，则敲除可观察值未定义

> ID：14985484
> 
> 赞同：0
> 
> 时间：2013-02-20T16:54:55.700
> 
> 标签：knockout.js

如果 type="password" 的输入字段被浏览器的自动填充模式填充，则密码可观察值始终未定义。我只在用户名字段中输入第一个字符，然后从下拉列表中选择名称。密码字段由浏览器填写。

```
<script type="text/javascript">
        $(document).ready(function () {
            var viewModel = function () {
                var self = this;
                self.UserName = ko.observable();
                self.Password = ko.observable();
                self.Submit = function () {
                    var un = self.UserName();
                    var pw = self.Password(); // Password value is undefined!!!!
                    alert(pw);
                };
            };

            ko.applyBindings(new viewModel());
        });
    </script>

<form id="LoginForm" data-bind="submit: Submit">
<fieldset>
    <label for="UserName">Username</label>
    <input id="UserName" data-bind="value: UserName" name="UserName" type="text" />

    <label for="Password">Password</label>
    <input id="Password" data-bind="value: Password" type="password" />
    <button type="submit">Login</button>
</fieldset>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:13:31.977

我相信您的模型显示的行为是因为 Knockout 模型在 onChange 事件期间更新，并且输入在自动填充时没有收到 onChange 事件。我能想到的唯一解决方法是在您提交时手动触发 onChange 事件。

```
self.Submit = function () {
    var un = self.UserName();
    $("#Password").trigger("change");
    var pw = self.Password(); // Password value is no longer undefined!!!!
    alert(pw);
}; 
```

我从[这个问题](https://stackoverflow.com/questions/136617/how-do-i-programatically-force-an-onchange-event-on-an-input)中得到的这个解决方案（经过测试和工作）依赖于 jQuery。如果您不想要 jQuery 解决方案，链接的问题也提供了一些其他解决方案。

# spring - mybatis批处理执行期间的周期性刷新

> ID：14985494
> 
> 赞同：2
> 
> 时间：2013-02-20T16:55:38.413
> 
> 标签：spring, mybatis

我在 mybatis 中的批处理语句超时。我想通过定期刷新语句来限制我发送到数据库的负载。在 iBATIS 中，我使用了回调，如下所示：

```
 sqlMapClientTemplate.execute(new SqlMapClientCallback<Integer>() {
            @Override
            public Integer doInSqlMapClient(SqlMapExecutor executor)
                    throws SQLException {
                executor.startBatch();
                int tally = 0;
                for (Foo foo: foos) {
                        executor.insert("FooSql.insertFoo",foo.getData());
                        /* executes batch when > MAX_TALLY */
                    tally = BatchHelper.updateTallyOnMod(executor, tally);
                }
                return executor.executeBatch();
            }
        }); 
```

在mybatis中有没有更好的方法来做到这一点？还是我需要用 SqlSessionCallback 做同样的事情？这感觉很麻烦。我真正想做的是配置项目以刷新每 N 个批处理语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:02:06.160

我没有得到任何回复，所以我将分享我确定的解决方案。

Mybatis 提供了对语句刷新的直接访问。我自动装配了 SqlSession，使用 Guava 将集合划分为可管理的块，然后在每个块之后刷新语句。

```
Iterable<List<Foo>> partitions = Iterables.partition(foos, MAX_TALLY);
for (List<Foo> partition : partitions) {
    for (Foo foo : partition) {
        mapper.insertFoo(foo);
    }
    sqlSession.flushStatements();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-27T23:13:58.357

很抱歉回复晚了，但我现在偶然发现了这个问题。但是，希望它可以帮助其他有类似问题的人。

您不需要显式地自动装配 SqlSession。您可以使用映射器接口本身。在 mapper 接口中，只需定义一个使用注解进行`@Flush`注解的方法，并且返回类型为`List<BatchResult>`. 以下是映射器接口中的方法示例：

```
@Flush
List<BatchResult> flushBatchedStatements(); 
```

然后只需在您的映射器对象上调用此方法，如下所示：

```
Iterable<List<Foo>> partitions = Iterables.partition(foos, MAX_TALLY);
for (List<Foo> partition : partitions)
{
    for (Foo foo : partition)
    {
        mapper.insertFoo(foo);
    }
    mapper.flushBatchedStatements(); //this call will flush the all statements batched upto this point, into the table.
} 
```

请注意，您无需在映射器 XML 文件中添加任何特殊内容即可通过映射器接口支持此类语句刷新。您的 XML 映射器可能只是类似于

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace=".....">

    <insert id="bulkInsertIntoTable" parameterType="myPackage.Foo">

        insert into MyDatabaseTable(col1, col2, col3)
        values
        ( #{fooObj.data1}, #{fooObj.data2}, #{fooObj.data3} )

    </insert>

</mapper> 
```

唯一需要的是您使用 MyBatis 3.3 或更高版本。以下是 MyBatis 网站上的 MyBatis 文档状态：

> 如果使用这个注解，可以通过Mapper接口定义的方法调用SqlSession#flushStatements()。（MyBatis 3.3或以上）

更多详细信息请访问 MyBatis 官方文档站点：
[http ://www.mybatis.org/mybatis-3/java-api.html](http://www.mybatis.org/mybatis-3/java-api.html)

# ruby-on-rails-3 - Heroku：在任何来源中都找不到 libv8-3.15.11.1

> ID：14985498
> 
> 赞同：0
> 
> 时间：2013-02-20T16:55:50.250
> 
> 标签：ruby-on-rails-3, heroku

我知道 Github 上有很多这样的问题（我已经浏览了所有这些问题），但没有一个答案对我有用。

当我尝试“git push heroku master”时，我收到错误“在任何来源中都找不到 libv8-3.15.11.1”。我在我的 Gemfile 中指定了 libv8 的版本（使用 gem "libv8", "~> 3.11.8.13"），我认为这反映在我的 Gemfile.lock ("libv8 (3.11.8.13)") 中。当我指定 3.11.8.13 时，我不明白为什么它在寻找版本 3.15.11.1。

我确保我对 Gemfile 的所有更改都已提交（当我执行“git status”时，我得到“没有提交（工作目录干净）”。

我还尝试删除 heroku 并重新添加它（使用“git remote rm heroku”，然后使用“git push heroku master”）。

**宝石文件：**

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

group :development do
    gem 'sqlite3'
end

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'json'

gem 'rmagick'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem "twitter-bootstrap-rails"
  gem "less-rails"
  gem 'jquery-fileupload-rails'
end

gem 'jquery-rails'

gem 'activeadmin'
gem "meta_search",    '>= 1.1.0.pre'

gem 'friendly_id'

gem 'gon'

gem 'formtastic'

gem 'js-routes'

gem "therubyracer"

gem "libv8", "~> 3.11.8.13"

gem 'carrierwave'

gem 'ckeditor_rails'

gem 'font-awesome-rails'

group :production do
    gem 'pg', '0.12.2'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug' 
```

**Gemfile.lock**

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.8)
      actionpack (= 3.2.8)
      mail (~> 2.4.4)
    actionpack (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.3)
    activeadmin (0.5.1)
      arbre (>= 1.0.1)
      bourbon (>= 1.0.0)
      devise (>= 1.1.2)
      fastercsv
      formtastic (>= 2.0.0)
      inherited_resources (>= 1.3.1)
      jquery-rails (>= 1.0.0)
      kaminari (>= 0.13.0)
      meta_search (>= 0.9.2)
      rails (>= 3.0.0)
      sass (>= 3.1.0)
    activemodel (3.2.8)
      activesupport (= 3.2.8)
      builder (~> 3.0.0)
    activerecord (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
    activesupport (3.2.8)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arbre (1.0.1)
      activesupport (>= 3.0.0)
    arel (3.0.2)
    bcrypt-ruby (3.0.1)
    bourbon (3.1.1)
      sass (>= 3.2.0)
      thor
    builder (3.0.4)
    carrierwave (0.8.0)
      activemodel (>= 3.2.0)
      activesupport (>= 3.2.0)
    ckeditor_rails (4.0.1.1)
      railties (>= 3.0)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.4.0)
    commonjs (0.2.6)
    devise (2.2.3)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.1)
      railties (~> 3.1)
      warden (~> 1.2.1)
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    fastercsv (1.5.5)
    font-awesome-rails (3.0.2.0)
      railties (>= 3.1)
    formtastic (2.2.1)
      actionpack (>= 3.0)
    friendly_id (4.0.9)
    gon (4.0.2)
      actionpack (>= 2.3.0)
      json
    has_scope (0.5.1)
    hike (1.2.1)
    i18n (0.6.1)
    inherited_resources (1.3.1)
      has_scope (~> 0.5.0)
      responders (~> 0.6)
    journey (1.0.4)
    jquery-fileupload-rails (0.4.1)
      actionpack (>= 3.1)
      railties (>= 3.1)
    jquery-rails (2.2.1)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    js-routes (0.8.7)
      rails (>= 3.2)
    json (1.7.7)
    kaminari (0.14.1)
      actionpack (>= 3.0.0)
      activesupport (>= 3.0.0)
    less (2.2.2)
      commonjs (~> 0.2.6)
    less-rails (2.2.6)
      actionpack (>= 3.1)
      less (~> 2.2.0)
    libv8 (3.11.8.13)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    meta_search (1.1.3)
      actionpack (~> 3.1)
      activerecord (~> 3.1)
      activesupport (~> 3.1)
      polyamorous (~> 0.5.0)
    mime-types (1.21)
    multi_json (1.6.1)
    orm_adapter (0.4.0)
    pg (0.12.2)
    polyamorous (0.5.0)
      activerecord (~> 3.0)
    polyglot (0.3.3)
    rack (1.4.5)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.8)
      actionmailer (= 3.2.8)
      actionpack (= 3.2.8)
      activerecord (= 3.2.8)
      activeresource (= 3.2.8)
      activesupport (= 3.2.8)
      bundler (~> 1.0)
      railties (= 3.2.8)
    railties (3.2.8)
      actionpack (= 3.2.8)
      activesupport (= 3.2.8)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.3)
    rdoc (3.12.1)
      json (~> 1.4)
    ref (1.0.2)
    responders (0.9.3)
      railties (~> 3.1)
    rmagick (2.13.2)
    sass (3.2.5)
    sass-rails (3.2.6)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sprockets (2.1.3)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.7)
    therubyracer (0.11.3)
      libv8 (~> 3.11.8.12)
      ref
    thor (0.17.0)
    tilt (1.3.3)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    twitter-bootstrap-rails (2.2.4)
      actionpack (>= 3.1)
      execjs
      railties (>= 3.1)
    tzinfo (0.3.35)
    uglifier (1.3.0)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)
    warden (1.2.1)
      rack (>= 1.0)

PLATFORMS
  ruby

DEPENDENCIES
  activeadmin
  carrierwave
  ckeditor_rails
  coffee-rails (~> 3.2.1)
  font-awesome-rails
  formtastic
  friendly_id
  gon
  jquery-fileupload-rails
  jquery-rails
  js-routes
  json
  less-rails
  libv8 (~> 3.11.8.13)
  meta_search (>= 1.1.0.pre)
  pg (= 0.12.2)
  rails (= 3.2.8)
  rmagick
  sass-rails (~> 3.2.3)
  sqlite3
  therubyracer
  twitter-bootstrap-rails
  uglifier (>= 1.0.3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:57:33.477

根据此页面：

[https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)

“therubyracer 如果您之前使用的是 therubyracer 或 therubyracer-heroku，则不再需要这些 gem，并且强烈建议不要使用这些 gem，因为这些 gem 会占用大量内存。”

因此，我从我的测试应用程序中删除了这些。然后我在 ubuntu 本地机器上安装了 node.js 并像在 heroku 上一样运行良好。

也看到这个问题： [Rails - 找不到 JavaScript 运行时？](https://stackoverflow.com/questions/7092107/rails-3-1-error-could-not-find-a-javascript-runtime)

# javascript - 将 Yeoman/Brunch 工具与混合 Django/Backbone 应用程序一起使用？

> ID：14985500
> 
> 赞同：11
> 
> 时间：2013-02-20T16:55:57.073
> 
> 标签：javascript, django, gruntjs, yeoman, brunch

我正在使用后端的 Django 和前端的 Backbone 构建一个混合 Web 应用程序。

结构如下：我在 Django 模板中生成所有的 HTML，`request.is_ajax`用于决定返回哪些模板，并根据需要使用 Backbone 拉入 HTML（我这样做是因为我想支持非 JavaScript 用户）。

无论如何，我的问题是这个。随着我的 JavaScript 代码变得越来越复杂，我希望能够自动执行以下操作：

*   异步 JavaScript 加载
*   连接和缩小 CSS 文件
*   连接和缩小 JavaScript 文件
*   JS-linting

我不太担心图像优化或包管理。这可能与我的设置有关吗？目前它是一个标准的 Django 应用程序：

```
/media
  /js
    main.js <-- Backbone code is in here
    /plugins
      backbone.js
      underscore.js
  /css
    main.css 
    results.css
  /img
/myapp
  admin.py
  models.py
  views.py
/templates
  /myapp
    index.html <-- references to all JS and CSS files here 
```

我不确定我是否应该使用[Yeoman](http://yeoman.io/)（或只是[grunt](http://gruntjs.com/)）或[Brunch](http://brunch.io/)，或者是否有更简单的方法。无论我使用什么，我不确定是否可以将其放入`js`目录中，或者模板的位置是否会使事情复杂化。

目前我知道如何使用 require.js 来异步加载 JS，但我不知道如何连接、lint 等 - 因此寻找一个工具。也许我应该只写一个shell脚本:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T04:37:16.800

我可以建议从简单的早午餐开始。Brunch 比 grunt 更简单，因为它的插件开箱即用，无需编写 500 行代码 grunt 文件。它也更快，您的应用程序的重新编译将立即完成。

您的设置应如下所示

```
public/         # The directory with static files which is generated by brunch.
  app.js        # Ready to be served via webserver.
  app.css       # Don’t change it directly, just run `brunch watch --server`.
  assets/       # And then all changed files in your app dir will be compiled.
    images/

frontend/       # Main brunch application directory. Configurable, of course.
  app/          # Your code will reside here.
    assets/     # Static files that shall not be compiled
      images/   # will be just copied to `public` dir.
    views/      # Create any subdirectories inside `app` dir.
      file-1.js # JS files will be automatically concatenated to one file.
    file-2.js   # They will be also usable as modules, like require('file-2').
    file-1.css  # CSS files will be automatically concatenated to one file.
    stuff.css   # JS and CSS files may be linted before concatenation.
    tpl.jade    # You may have pre-compiled to JS templates. Also with `require`.
  vendor/       # All third-party libraries should be put here. JS, CSS, anything.
    scripts/    # They will be included BEFORE your scripts automatically.
      backbone.js
      underscore.js
  package.json  # Contains all brunch plugins, like jshint-brunch, css-brunch.
  config.coffee # All params (you can concat to 2, 5, 10 files etc.)
                # are set via this config. Just simple, 15 lines-of-code config. 
```

要创建新应用程序，请查看类似于基本样板的[早午餐骨架。](https://github.com/brunch/brunch/wiki/Skeletons)选择任何一个，然后使用`brunch new --skeleton <url>`，启动早午餐观察者，`brunch watch --server`你就准备好了。当您想要部署您的应用程序时，只需构建`brunch build --optimize`将自动缩小文件的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T20:04:26.747

I can advice to start with simply grunt. There are grunt task for all your needs:

*   [grunt-contrib-usemin](https://npmjs.org/package/grunt-usemin) will replaces references to your original files with optimized vers
*   [grunt-contrib-uglify](https://npmjs.org/package/grunt-contrib-uglify) will minify your JavaScript
*   [grunt-contrib-mincss](https://npmjs.org/package/grunt-contrib-cssmin) will minify your CSS
*   [grunt-contrib-jshint](https://npmjs.org/package/grunt-contrib-jshint) runs jshint on your JavaScript files
*   use requireJs to load your files ansynchronous and [grunt-contrib-requirejs](https://npmjs.org/package/grunt-contrib-requirejs) to compile the files into one file if needed

# html - 设置border-top-width: 0px；on Input 改变整个边框的外观

> ID：14985503
> 
> 赞同：0
> 
> 时间：2013-02-20T16:56:11.823
> 
> 标签：html, css

我想在彼此下方显示两个输入字段，没有边距、没有填充和没有双边框（所以它看起来很像一个常规表格，每个字段之间有一条分隔线）。

`margin-top: 0px; margin-bottom: 0px;`删除 边距很容易`border-top-width: 0px;`（这种效果在所有浏览器中都会发生。

这是一个示例：HTML

```
<div class="test">
    <input type="text" value="Test" />
    <br />
    <input type="text" value="Test" />
</div> 
```

CSS：

```
input {
    margin-top: 0px;
    margin-bottom: 0px;
}
.test input {
    border-top-width: 0px;
}
.test input:first-child {
    border-top-width: 2px;
} 
```

提琴手： http: [//fiddle.jshell.net/32een/1/](http://fiddle.jshell.net/32een/1/)

图片解释了我想要什么：

![在此处输入图像描述](../Images/c21474cd015de13df86a3eb02b809e7b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:03:46.610

试试这个：

```
.test input {
    border-top: 0;
}
.test input:first-child {
    border-top: 2px solid #ccc;
} 
```

此外，在您的代码中，您可以将“0px”替换为“0”，以进行优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:03:53.193

如果你对桌子没问题...

```
<table cellpadding="0" cellspacing="0" style="border-collapse:collapse;">
    <tr>
        <td style="border:1px solid red;"><input type="text" value="" style="border: 0; width: 100%;" /><br /></td>
    </tr>
    <tr>
        <td style="border:1px solid red;"><input type="text" value="" style="border: 0; width: 100%;" /></td>
    </tr>
</table> 
```

这是效果

![富](../Images/308835a1e6759964dc79e28dd5f4143e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:08:12.267

重新定义浏览器边框样式：

```
input {
    margin-top: 0px;
    margin-bottom: 0px;
    outline: 0;
    padding: 0;
    border: 1px solid #cccccc;
} 
```

**UPD：**并删除零值的“px”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:08:15.933

当您开始设置输入元素的样式时，就会发生这种情况。

浏览器通常有两个默认的输入。如果您根本不设置样式，则使用一种带有细边框（有时还有发光效果）的现代外观，以及在您触摸样式时默认使用的一种带有厚内嵌边框的古代外观。

所以，如果你想给边框设置样式，你必须指定一个完整的样式，包括样式、宽度和颜色，以获得你想要的外观。

就像是：

```
.test input {
  border: 1px solid #ccc;
  border-top-width: 0;
}
.test input:first-child {
  border-top-width: 1px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T17:11:55.087

您应该尝试使用内容可编辑的 div。这样，您可以根据需要设置输入样式。我在您的 jsfiddle 中执行了以下操作，并且有效。

HTML：

```
<div class="test">
    <div class="input" contenteditable="true">Test</div>
    <div class="input" contenteditable="true">Test</div>
</div> 
```

CSS：

```
.input {
    display: block;
    border: 1px solid #000;
    width: 100px;
    margin-bottom: -1px;
} 
```

这给出了您想要的外观

# actionscript-3 - 根据Flex中的多个条件更改数据网格单元格的背景颜色

> ID：14985504
> 
> 赞同：5
> 
> 时间：2013-02-20T16:56:16.677
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

嗨，我是 Adob​​e Flex 的新手，如果我的问题听起来很愚蠢，我深表歉意。无论如何它在这里。我正在尝试简单的数据网格，它基本上检查 2 个条件 1）如果艺术家是 01 并且专辑是“专辑 01”，则将背景设置为“年”列中的相应单元格。

使用下面的代码将“设置样式”设置为背景颜色，因为属性不起作用但更改字体颜色起作用，其次我不确定如何编写代码以使上述嵌套条件起作用？如果有人可以在这方面帮助我，我将不胜感激。谢谢！提前。

下面是代码：Newdatagrid.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 

           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955"          minHeight="600" >
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.controls.Alert;
        [Bindable]
        public static var initDG:ArrayCollection = new ArrayCollection([
            {Artist:'01', Album:'Album 01', Year:'2008'},
            {Artist:'01', Album:'Album 02', Year:'2009'},
            {Artist:'03', Album:'Album 03', Year:'2007'},
            {Artist:'03', Album:'Album 04', Year:'2003'},

        ]); 

    ]]>

</fx:Script>

<s:VGroup>
    <s:DataGrid id="myGrid" width="360" dataProvider="{initDG}">   
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="Artist"    headerText="Artist" itemRenderer="CellRenderer"/>
                <s:GridColumn dataField="Album" headerText="Album" itemRenderer="CellRenderer"/>
                <s:GridColumn dataField="Year" headerText="Year" itemRenderer="CellRenderer"/>
            </s:ArrayList>
        </s:columns>       
    </s:DataGrid> 
</s:VGroup>
</s:Application> 
```

渲染器：

```
<?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx" 
                    implements="mx.controls.listClasses.IDropInListItemRenderer">
<fx:Script>
    <![CDATA[
        import mx.controls.dataGridClasses.DataGridListData;
        import mx.controls.listClasses.BaseListData;
        import mx.controls.Alert;

        private var _listData:BaseListData;

        [Bindable]private var isSelected:Boolean = false;

        override public function set data( value:Object ) : void 
        {
            super.data = value;
            lblData.text = data[column.dataField];

            if (data[column.dataField].valueOf() >= 2008){
                //styleName="myStyles.BgColor";
                setStyle('backgroundColor',0xFFFF00);
            }else{
                setStyle('backgroundColor',0x32CD32);
            }

        }

        [Bindable]public function get listData() : BaseListData
        {
            return _listData;
        }
        public function set listData( value:BaseListData ) : void
        {
            _listData = value;
        }

    ]]>
</fx:Script>
<s:Label id="lblData" top="9" left="7" width="100%" height="100%"    textAlign="center"/>

</s:GridItemRenderer> 
```

我想要的输出：条件：如果 Artist=01 和 Year >= 2008 则单元格 Background of Year 更改为红色

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T17:40:07.887

GridItemRenderer 类没有这样的样式背景颜色。所以设置它没有效果。

您可以做的是将 Rect 添加到 ItemRenderer 并根据您的条件设置其颜色属性。

一个例子是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" 
                    xmlns:mx="library://ns.adobe.com/flex/mx" clipAndEnableScrolling="true">

    <fx:Script>
        <![CDATA[
            override public function prepare(hasBeenRecycled:Boolean):void {

                if(this.data) {

                    if(this.data.Year >= 2008 && this.data.Artist == '01' && column.dataField == 'Year') 
                        bgColor.color = 0xFF0000;
                    else
                        bgColor.color = 0xFFFFFF;
                }
            }
        ]]>
    </fx:Script>

    <s:Rect top="0" bottom="0" left="0" right="0">
        <s:fill>
            <s:SolidColor id="bgColor" color="0xFFFFFF"/>
        </s:fill>
    </s:Rect>
    <s:Label id="labelDisplay" top="9" left="7"/>

</s:GridItemRenderer> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T06:20:23.447

```
 <?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 

               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955"          minHeight="600" >
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;
            [Bindable]
            public static var initDG:ArrayCollection = new ArrayCollection([
                {Artist:'01', Album:'Album 01', Year:'2008'},
                {Artist:'01', Album:'Album 02', Year:'2009'},
                {Artist:'03', Album:'Album 03', Year:'2007'},
                {Artist:'03', Album:'Album 04', Year:'2003'},

            ]); 

        ]]>

    </fx:Script>

    <s:VGroup>
        <s:DataGrid id="myGrid" width="360" dataProvider="{initDG}">   
            <s:columns>
                <s:ArrayList>
                    <s:GridColumn dataField="Artist"    headerText="Artist"/>
                    <s:GridColumn dataField="Album" headerText="Album"/>
                    <s:GridColumn dataField="Year" headerText="Year" itemRenderer="CellRenderer"/>
                </s:ArrayList>
            </s:columns>       
        </s:DataGrid> 
    </s:VGroup>
</s:WindowedApplication>

----------------------------CellRenderer.mxml------------------------

    <?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" 
                    xmlns:mx="library://ns.adobe.com/flex/mx" clipAndEnableScrolling="true">

    <fx:Script>
        <![CDATA[
            override public function prepare(hasBeenRecycled:Boolean):void {
                lblData.text = data[column.dataField]
                if(this.data) {
                    lblData.text = data[column.dataField];

                    if(this.data.Year >= 2008&&this.data.Artist==01)
                        bgColor.color = 0xFF0000;
                    else
                        bgColor.color = 0xFFFFFF;
                }
            }
        ]]>
    </fx:Script>

    <s:Rect top="0" bottom="0" left="0" right="0">
        <s:fill>
            <s:SolidColor id="bgColor" color="0xFFFFFF"/>
        </s:fill>
    </s:Rect>
    <s:Label id="lblData" top="9" left="7" width="100%" height="100%" textAlign="center"/>

</s:GridItemRenderer> 
```

# ruby - 注入未按预期工作

> ID：14985507
> 
> 赞同：1
> 
> 时间：2013-02-20T16:56:19.837
> 
> 标签：ruby, inject

谁能解释为什么这两个代码片段不等价？要么我遗漏了一些东西，要么注入没有做我认为它做的事情。鉴于：

```
nodes = [{id: 1}, {id: 2}] 
```

这段代码：

```
result = Hash.new
nodes.each do |node|
  result[node[:id]] = node.inspect
end
result 
```

返回

```
 {
  1 => "{:id=>1}",
  2 => "{:id=>2}"
} 
```

但是这个：

```
nodes.inject({}) {|hash, node|hash[node[:id]] = node.inspect} 
```

返回：

```
"{:id=>2}" 
```

为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T16:58:59.003

> 注入未按预期工作

好吧，你的期望是错误的。:)

Block to `inject`/`reduce`应该返回累加器的新值。

```
nodes = [{id: 1}, {id: 2}]
res = nodes.inject({}) {|hash, node| hash[node[:id]] = node.inspect; hash}
res # => {1=>"{:id=>1}", 2=>"{:id=>2}"} 
```

# eclipse - 使用 IFile 修改文件后如何指示文件已更改

> ID：14985509
> 
> 赞同：1
> 
> 时间：2013-02-20T16:56:20.440
> 
> 标签：eclipse, eclipse-plugin

我已经能够通过我在右键单击文件时出现的源菜单下创建的弹出菜单扩展成功更新文件的内容。

我想指出该文件已更改并需要保存。现在，文件内容会自动更改并保存。我认为 IFile.touch 方法会导致文件处于需要保存的状态，但我没有看到这种情况发生。

这是我的代码...

```
public Object execute(ExecutionEvent event) throws ExecutionException {
    IWorkbenchWindow window = HandlerUtil.getActiveWorkbenchWindowChecked(event);
    IEditorPart editorPart = HandlerUtil.getActiveEditor(event);
    IEditorInput input = editorPart.getEditorInput();
    InputStream is = null;
    if (input instanceof FileEditorInput) {
        IFile file = ((FileEditorInput) input).getFile();
        try {
            is = file.getContents();
            String originalContents = convertStreamToString(is);
            String newContents = originalContents + "testing changing the contents...";
            InputStream newInput = new ByteArrayInputStream(newContents.getBytes());
            file.setContents(newInput, false, true, null);
            file.touch(null);
        } catch (CoreException e) {
            MessageDialog.openError(
                window.getShell(),
                "Generate Builder Error",
                "An Exception has been thrown when interacting with file " + file.getName() +
                ": " + e.getMessage());
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:17:04.523

如果您希望将文件的内容标记为需要保存，则需要与要提示需要保存的内存表示进行交互——您从中获取输入的编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:46:22.937

基于来自 nitind 的帮助和这篇文章 -[通过插件命令从 eclipse 编辑器中替换选定的代码](https://stackoverflow.com/questions/1233102/replace-selected-code-from-eclipse-editor-thru-plugin-comand)- 我能够更新文本编辑器并且文件显示为已修改。关键是使用 ITextEditor 和 IDocumentProvider 而不是 FileEditor。

这是更新的代码...

```
public Object execute(ExecutionEvent event) throws ExecutionException {
    IWorkbenchWindow window = HandlerUtil.getActiveWorkbenchWindowChecked(event);
    IEditorPart editorPart = HandlerUtil.getActiveEditor(event);
    if (editorPart instanceof ITextEditor ) {
        ITextEditor editor = (ITextEditor)editorPart;
        IDocumentProvider prov = editor.getDocumentProvider();
        IDocument doc = prov.getDocument( editor.getEditorInput() );
        String className = getClassName(doc.get());
        ISelection sel = editor.getSelectionProvider().getSelection();
        if (sel instanceof TextSelection ) {
            TextSelection textSel = (TextSelection)sel;
            String newText = generateBuilderText(className, textSel.getText());
            try {
                doc.replace(textSel.getOffset(), textSel.getLength(), newText);
            } catch (Exception e) {
                MessageDialog.openError(
                    window.getShell(),
                    "Generate Builder Error",
                    "An Exception has been thrown when attempting to replace " 
                    + "text in editor " + editor.getTitle() +
                    ": " + e.getMessage());
            }
        }
    }
    return null;
} 
```

# c# - Azure ACS 使用 RestSharp 415 错误获取令牌

> ID：14985510
> 
> 赞同：2
> 
> 时间：2013-02-20T16:56:21.690
> 
> 标签：c#, http, azure, restsharp

以下是 msdn 提供的用于从 azure ACS（访问控制服务）获取 SWT 令牌的代码示例：

```
private static string GetTokenFromACS(string scope)
{
    string wrapPassword = pwd;
    string wrapUsername = uid;

    // request a token from ACS
    WebClient client = new WebClient();
    client.BaseAddress = string.Format(
        "https://{0}.{1}", serviceNamespace, acsHostUrl);

    NameValueCollection values = new NameValueCollection();
    values.Add("wrap_name", wrapUsername);
    values.Add("wrap_password", wrapPassword);
    values.Add("wrap_scope", scope);

    byte[] responseBytes = client.UploadValues("WRAPv0.9/", "POST", values);

    string response = Encoding.UTF8.GetString(responseBytes);

    Console.WriteLine("\nreceived token from ACS: {0}\n", response);

    return HttpUtility.UrlDecode(
        response
        .Split('&')
        .Single(value => value.StartsWith("wrap_access_token=", StringComparison.OrdinalIgnoreCase))
        .Split('=')[1]);
} 
```

我正在尝试使用 RestSharp 复制代码：

```
var request = new RestRequest("WRAPv0.9", Method.POST);
request.AddHeader("Content-Type", "application/x-www-form-urlencoded");
request.AddParameter("wrap_name", uid, ParameterType.RequestBody);
request.AddParameter("wrap_password", pwd, ParameterType.RequestBody);
request.AddParameter("wrap_scope", realm, ParameterType.RequestBody);

RestClient client = new RestClient(
    string.Format(@"https://{0}.{1}", serviceNamespace, acsHostUrl));

client.ExecuteAsync(request, Callback); 
```

我尝试了上述代码的其他变体，但无济于事。我不断收到 415 错误，指出：

> 415 Unsupported Media Type T8000 Content-Type 'text/plain' 不受支持。请求内容类型必须是“application/x-www-form-urlencoded”。

我不是 Fiddler 专家，但由于我的经验有限，我无法检查我传出的 http 请求，因为它是加密的。

我将不胜感激有关解决问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:11:30.120

您可以尝试省略`AddHeader`方法调用，而是将 Content-Type 设置为 first `AddParameter`。[此处描述了](https://stackoverflow.com/questions/9432436/does-restsharp-overwrite-manually-set-content-type)
该问题。

# vba - 根据另一列填充特定列中的值的宏

> ID：14985511
> 
> 赞同：0
> 
> 时间：2013-02-20T16:56:24.327
> 
> 标签：vba, excel

我想寻求帮助。我正在寻找一个可以执行此类操作的宏：

我有一个名为 Comment 的列和其他五个应根据 Comment 列填充的列。如果在评论栏中有一条消息“重复”，我想在名为 Duplicate 1 的栏中标记如果不是，它应该是 0。同样在这种情况下，两个值可以指示要填充 1 - 即 Left - Replacement Found 和左 - 没有更换。对于这两个值，左列中应填充 1，其他值为 0。

我修改了用于 Vlookup 的宏，并且我能够获得 if 函数，但只能用于 1 个特定的逻辑测试（在本例中为“左 - 找到替换”）。我需要进行 1 个以上的逻辑测试。所以在这种情况下，我希望将 Left - Replacement Found 和 Left - No Replacement 标记为 1，其余标记为 0。

```
Sub Testing_if_function()
Dim FormulaCol As Long
Dim LookupCol As Long
Dim TotalRows As Long
Dim TotalCols As Long
Dim i As Long

Sheets("Data").Select
TotalRows = ActiveSheet.UsedRange.Rows.Count
TotalCols = ActiveSheet.UsedRange.Columns.Count

For i = 1 To TotalCols
    If Cells(1, i).Value = "Test" Then FormulaCol = i
    If Cells(1, i).Value = "Comment" Then LookupCol = i
Next

ActiveCell.FormulaR1C1 = "=IF(RC[-2]=""Left - Replacement Found"",1,0)"
Cells(2, FormulaCol).AutoFill Destination:=Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
With Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
    .Value = .Value
End With

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:28:16.527

我找到了这个问题的解决方案。因此，如果有人需要类似的宏，这里是代码：

```
Sub Testing_if_function()
Dim FormulaCol As Long
Dim LookupCol As Long
Dim TotalRows As Long
Dim TotalCols As Long
Dim i As Long

Sheets("Data").Select
TotalRows = ActiveSheet.UsedRange.Rows.Count
TotalCols = ActiveSheet.UsedRange.Columns.Count

For i = 1 To TotalCols
    If Cells(1, i).Value = "Test" Then FormulaCol = i
    If Cells(1, i).Value = "Comment" Then LookupCol = i
Next

ActiveCell.FormulaR1C1 = "=IF(RC[-2]=""Left - Replacement Found"", 1, IF(RC[-2]=""Left - No Replacement"", 1, 0 ))"
Cells(2, FormulaCol).AutoFill Destination:=Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
With Range(Cells(2, FormulaCol), Cells(TotalRows, FormulaCol))
    .Value = .Value
End With

End Sub 
```

# php - ajax数据错误

> ID：14985512
> 
> 赞同：0
> 
> 时间：2013-02-20T16:56:33.970
> 
> 标签：php, ajax, jquery, cakephp

我在 ajax 数据上有一个错误：值见我的代码

```
 <script>
$(document).ready(function(){
$("#pros").change(function(e){
 e.preventDefault()
var value = $("#pros").val();
$.ajax({
   type: "GET",
   url: "product.php",
  dataType: "html",
   data: value,
   success: function(msg){
     $("#products").html(msg);
   }
   });
 });
      });
</script> 
```

当我将值传递给产品页面时，当我回显时，我得到错误 Undefined index: value product.php on line 2 product.php page

```
$q = $_GET['value'];
echo $q; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:59:19.297

你必须发送一个哈希：

```
$.ajax({
   type: "GET",
    url: "product.php",
    dataType: "html",
    data: { 'value' : $("#pros").val() },
    success: function(msg){
        $("#products").html(msg);
    }
}); 
```

注意`{ 'value' : $("#pros").val() }`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:00:21.437

```
$(document).ready(function () {
    $("#pros").on('change', function (e) {
        e.preventDefault()
        $.ajax({
            type: "GET",
            url : "product.php",
            dataType: "html",
            data: {value: this.value} //key / value
        }).done(function(msg) {
            $("#products").html(msg);
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:03:34.020

```
<script>
$(document).ready(function(){
   $("#pros").change(function(e){
     e.preventDefault()
     var value = $("#pros").val();
     $.ajax({
       type: "GET",
       url: "product.php",
       dataType: "html",
       data: {'value':value},
       success: function(msg){
          $("#products").html(msg);
       }
     });
   });
 });
</script> 
```

# linux - 正则表达式的 Grep 顺序

> ID：14985515
> 
> 赞同：0
> 
> 时间：2013-02-20T16:56:48.780
> 
> 标签：linux, grep

我想知道如何完成以下任务：例如，我有一个包含以下内容的文件：

```
猴
驴
鸡
马

```

我想对它做一个 grep，所以`grep "horse\|donkey\|chicken"`，这会给我：

```
驴
鸡
马

```

但是，我真正想要的是以下内容：

```
马
驴
鸡

```

所以，我希望它按照我的“正则表达式”的顺序。我检查了手册页，但找不到任何参数。这可能（使用grep）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:43:27.347

尝试使用此解决方案`perl`。它可能以多种方式失败并且有严重的限制，例如不超过 9 个备选方案，或者`|`表达式中没有。`$1`这是因为脚本将每个单词括在括号中，并在、`$2`等中查找匹配项。

内容`script.pl`：

```
#!/usr/bin/env perl

use warnings;
use strict;

my (%matches, %words);

die qq|Usage: perl $0 <input-file> <regular-expression-PCRE>\n| unless @ARGV == 2;

my $re = pop;

## Assign an ordered number for each subexpression.
do {
    my $i = 0;
    %words = map { ++$i => $_ } split /\|/, $re;
};

## Surround each subexpression between parentheses to be able to select them
## later with $1, $2, etc.
$re =~ s/^/(/;
$re =~ s/$/)/;
$re =~ s/\|/)|(/g;

$re = qr/$re/;

## Process each line of the input file.
while ( <> ) { 
    chomp;

    ## If it matches any of the alternatives, search for it in any of the
    ## grouped expressions (limited to 9).
    if ( m/$re/o ) { 
        for my $i ( 1 .. 9 ) { 
            if ( eval '$' . $i ) { 
                $matches{ $i }++;
            }   
        }   
    }   
}

## Print them sorted.
for my $key ( sort keys %matches ) { 
    printf qq|%s\n|, $words{ $key } for ( 1 .. $matches{ $key } );
} 
```

假设`infile`有数据：

```
monkey
donkey
chicken
horse
dog
cat
chicken
horse 
```

像这样运行它：

```
perl script.pl infile 'horse|donkey|chicken' 
```

这会产生：

```
horse
horse
donkey
chicken
chicken 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:00:47.743

But `grep` will give you answers in order of appearance in the input. The order of the subexpressions in your regex has nothing to do with it. If you really want the answers in that order, you could grep the file three times:

```
for f in myfile
do
  grep horse $f
  grep donkey $f
  grep chicken $f
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T20:47:24.387

您也可以为此使用 awk。以下示例收集`op`数组中的匹配模式并在规则中按原始顺序输出它们`END`：

*模式有序的 grep.awk*

```
BEGIN { split(patterns, p) }

{ 
  for(i=1; i<=length(p); i++)
    if($0 ~ p[i])
      op[p[i]] = $0
}

END {
  for(i=1; i<=length(p); i++)
    if(p[i] in op) 
      print op[p[i]]
} 
```

像这样运行它：

```
awk -v patterns='horse chicken donkey' -f pattern-ordered-grep.awk infile 
```

输出：

```
horse
chicken
donkey 
```

请注意，如果您只想输出模式而不是匹配行，请将最后的代码行替换为`print p[i]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T16:46:52.500

只需创建一个你想要的字符串数组，当你找到每个字符串时，继续检查数组中的下一个元素：

```
$ cat tst.awk
BEGIN{ numStrings = split("horse donkey chicken",strings) }
$0 == strings[numFound+1] { numFound++ }
numFound == numStrings { print "Found them all!"; exit }

$ cat file2           
monkey
horse
donkey
chicken

$ awk -f tst.awk file2
Found them all!

$ cat file            
monkey
donkey
chicken
horse

$ awk -f tst.awk file
$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T17:20:06.560

这个怎么样？

```
cat file1.txt | grep -e horse -e donkey -e chicken | sort -r
horse
donkey
chicken 
```

# php - CloudFlare 并通过 PHP 记录访问者 IP 地址

> ID：14985518
> 
> 赞同：97
> 
> 时间：2013-02-20T16:56:52.750
> 
> 标签：php, logging, ip-address, cloudflare

我正在尝试跟踪和记录使用 PHP 访问我的网站的用户/访问者`$_SERVER['REMOTE_ADDR']`。PHP中IP地址跟踪的典型方法。

但是，我使用 CloudFlare 进行缓存等，并以 CloudFlare 的形式接收它们的 IP 地址：

> 108.162.212.* - 108.162.239.*

在仍在使用 CloudFlare 的同时检索实际用户/访问者 IP 地址的正确方法是什么？

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2013-02-20T17:03:08.153

Extra server variables that are available to cloud flare are:

`$_SERVER["HTTP_CF_CONNECTING_IP"]` real visitor ip address, this is what you want

`$_SERVER["HTTP_CF_IPCOUNTRY"]` country of visitor

[`$_SERVER["HTTP_CF_RAY"]`](https://support.cloudflare.com/entries/23046742-What-is-the-CF-RAY-header-)

`$_SERVER["HTTP_CF_VISITOR"]` this can help you know if its http or https

you can use it like this:

```
if (isset($_SERVER["HTTP_CF_CONNECTING_IP"])) {
  $_SERVER['REMOTE_ADDR'] = $_SERVER["HTTP_CF_CONNECTING_IP"];
} 
```

If you do this, and the validity of the visiting IP address is important, you might need to verify that the `$_SERVER["REMOTE_ADDR"]` contains an actual valid cloudflare IP address, because anyone can fake the header if he was able to connect directly to the server IP.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-07-11T01:37:54.330

**更新**：CloudFlare 发布了一个`mod_cloudflare`用于 apache 的模块，该模块将记录并显示实际的访问者 IP 地址，而不是 cloudflare 访问的那些！[https://www.cloudflare.com/resources-downloads#mod_cloudflare](https://www.cloudflare.com/resources-downloads#mod_cloudflare)（答案：[olimortimer](https://www.cloudflare.com/ips/)）

***如果您无权访问 apache 运行时，您可以使用下面的脚本，这将允许您检查连接是否通过 cloudflare 并获取用户 IP。***

我正在重写我用于另一个问题“ [CloudFlare DNS / 直接 IP 标识符](https://stackoverflow.com/a/38298000/2801045)”的答案

Cloudflare 的 ips 是公开存储的，因此您可以[在此处](https://www.cloudflare.com/ips/)查看它们，然后检查 ip 是否来自 cloudflare（这将允许我们从 http 标头获取真实 ip `HTTP_CF_CONNECTING_IP`）。

如果您使用它来禁用所有非 cf 连接，反之亦然，我建议您有一个 php 脚本文件，该文件在所有其他脚本（如 common.php 或 pagestart.php 等）之前调用。

```
function ip_in_range($ip, $range) {
    if (strpos($range, '/') == false)
        $range .= '/32';

    // $range is in IP/CIDR format eg 127.0.0.1/24
    list($range, $netmask) = explode('/', $range, 2);
    $range_decimal = ip2long($range);
    $ip_decimal = ip2long($ip);
    $wildcard_decimal = pow(2, (32 - $netmask)) - 1;
    $netmask_decimal = ~ $wildcard_decimal;
    return (($ip_decimal & $netmask_decimal) == ($range_decimal & $netmask_decimal));
}

function _cloudflare_CheckIP($ip) {
    $cf_ips = array(
        '199.27.128.0/21',
        '173.245.48.0/20',
        '103.21.244.0/22',
        '103.22.200.0/22',
        '103.31.4.0/22',
        '141.101.64.0/18',
        '108.162.192.0/18',
        '190.93.240.0/20',
        '188.114.96.0/20',
        '197.234.240.0/22',
        '198.41.128.0/17',
        '162.158.0.0/15',
        '104.16.0.0/12',
    );
    $is_cf_ip = false;
    foreach ($cf_ips as $cf_ip) {
        if (ip_in_range($ip, $cf_ip)) {
            $is_cf_ip = true;
            break;
        }
    } return $is_cf_ip;
}

function _cloudflare_Requests_Check() {
    $flag = true;

    if(!isset($_SERVER['HTTP_CF_CONNECTING_IP']))   $flag = false;
    if(!isset($_SERVER['HTTP_CF_IPCOUNTRY']))       $flag = false;
    if(!isset($_SERVER['HTTP_CF_RAY']))             $flag = false;
    if(!isset($_SERVER['HTTP_CF_VISITOR']))         $flag = false;
    return $flag;
}

function isCloudflare() {
    $ipCheck        = _cloudflare_CheckIP($_SERVER['REMOTE_ADDR']);
    $requestCheck   = _cloudflare_Requests_Check();
    return ($ipCheck && $requestCheck);
}

// Use when handling ip's
function getRequestIP() {
    $check = isCloudflare();

    if($check) {
        return $_SERVER['HTTP_CF_CONNECTING_IP'];
    } else {
        return $_SERVER['REMOTE_ADDR'];
    }
} 
```

使用脚本非常简单：

```
$ip = getRequestIP();
$cf = isCloudflare();

if($cf) echo "Connection is through cloudflare: <br>";
else    echo "Connection is not through cloudflare: <br>";

echo "Your actual ip address is: ". $ip;
echo "The server remote address header is: ". $_SERVER['REMOTE_ADDR']; 
```

该脚本将向您显示真实的 IP 地址以及请求是否为 CF！

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-05-06T13:49:06.803

自从提出并回答了这个问题，CloudFlare 发布`mod_cloudflare`了 Apache，它记录并显示实际的访问者 IP 地址，而不是 CloudFlare 地址：

[https://www.cloudflare.com/resources-downloads#mod_cloudflare](https://www.cloudflare.com/resources-downloads#mod_cloudflare)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-04-16T17:03:05.807

Cloudflare 会向您的服务器发送一些额外的请求标头，包括`CF-Connecting-IP`我们可以`$user_ip`使用以下简单的单线将其存储到 （如果已定义）中：

```
$user_ip = (isset($_SERVER["HTTP_CF_CONNECTING_IP"])?$_SERVER["HTTP_CF_CONNECTING_IP"]:$_SERVER['REMOTE_ADDR']); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-17T13:45:47.733

很难将 HTTP_CF_CONNECTING_IP 转换为 REMOTE_ADDR。所以你可以使用 apache (.htaccess) 自动前置来做到这一点。这样您就无需考虑是否`$_SERVER['REMOTE_ADDR']`在所有 PHP 脚本中都具有正确的值。

**.ht 访问代码**

```
php_value auto_prepend_file "/path/to/file.php" 
```

**php 代码 (file.php)**

```
<?php

define('CLIENT_IP', isset($_SERVER['HTTP_CF_CONNECTING_IP']) ? $_SERVER['HTTP_CF_CONNECTING_IP'] : $_SERVER['REMOTE_ADDR']); 
```

[在这里](https://developer.hyvor.com/php/use-htaccess-auto-prepending-effectively)了解更多

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-17T13:36:54.947

HTTP_CF_CONNECTING_IP 仅在您使用 cloudflare 时才有效，也许您转移您的站点或删除 cloudflare 您会忘记该值，因此请使用此代码。

```
$ip=$_SERVER["HTTP_CF_CONNECTING_IP"];
if (!isset($ip)) {
  $ip = $_SERVER['REMOTE_ADDR'];
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-11-20T12:38:03.407

在 Laravel 中将以下行添加到`AppServiceProvider`：

```
...
use Symfony\Component\HttpFoundation\Request;

...
public function boot()
{
    Request::setTrustedProxies(['REMOTE_ADDR'], Request::HEADER_X_FORWARDED_FOR);
} 
```

现在您可以使用`request()->ip()`.

[在这里](https://khalilst.medium.com/get-real-client-ip-behind-cloudflare-in-laravel-189cb89059ff)阅读更多。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-12T23:22:06.520

当您使用 CloudFlare 时，您的服务器和用户之间的所有请求都通过 CloudFlare 服务器进行路由。

在这种情况下，有两种方法可以获取用户的真实 IP 地址：

1.  通过 CloudFlare 服务器添加的额外服务器标头
2.  在您的服务器上添加 CloudFlare Apache/NGINX 模块。

# 方法 1：通过额外的服务器标头获取 IP

您可以使用以下代码获取用户的 IP 地址：

`$user_ip = (isset($_SERVER["HTTP_CF_CONNECTING_IP"]) $_SERVER["HTTP_CF_CONNECTING_IP"]:$_SERVER['REMOTE_ADDR']);`

## 它是如何工作的？

CloudFlare 在请求中添加了一些额外的服务器变量，如下所示：

`$_SERVER["HTTP_CF_CONNECTING_IP"]`- 用户的真实 IP 地址

`$_SERVER["HTTP_CF_IPCOUNTRY"]`- 用户的 ISO2 国家

`$_SERVER["HTTP_CF_RAY"]`用于登录目的的特殊字符串

在上面的代码中，我们正在检查是否`$_SERVER["HTTP_CF_CONNECTING_IP"]`已设置。如果它在那里，我们将考虑作为用户的 IP 地址，否则我们将使用默认代码作为`$_SERVER['REMOTE_ADDR']`

# 方法 2：在您的服务器上安装 Cloudflare 模块

*   [在 Apache 服务器上安装 CloudFlare 模块](https://support.cloudflare.com/hc/en-us/articles/203656534-How-do-I-restore-original-visitor-IP-with-Apache-2-4-)
*   [在 NGINX 服务器上安装 CloudFlare 模块](https://support.cloudflare.com/hc/en-us/articles/200170706-How-do-I-restore-original-visitor-IP-with-Nginx-)
*   [在 EasyApache+CPanel 上安装 CloudFlare 模块](https://support.cloudflare.com/hc/en-us/articles/206175737-How-do-I-restore-original-visitor-IP-with-EasyApache-cPanel-)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-07-16T05:33:21.127

Cloudflare 可以选择在域的网络管理页面的标头中使用“伪 IPv4”地址。您可以选择添加或覆盖发送到服务器的标头。

![Cloudflare 仪表板 |  网络](../Images/eb7c6993a78b7bd696c239a50f5f9210.png)

从文档中：

> **什么是伪 IPv4？**
> 
> 作为加速采用 IPv6 的权宜之计，Cloudflare 提供了 Pseudo IPv4，它在需要 IPv4 地址的遗留应用程序中支持 IPv6 地址。目标是使用 E 类 IPv4 地址空间为每个 IPv6 地址提供几乎唯一的 IPv4 地址，该地址空间被指定为实验性的，通常不会看到流量。要了解更多信息[，请参见此处](https://support.cloudflare.com/hc/articles/229666767)。
> 
> **选项**
> 
> *   **添加标头：**仅添加附加`Cf-Pseudo-IPv4`标头
> *   **覆盖标头：**用伪 IPv4 地址覆盖现有的标头`Cf-Connecting-IP`和标头。`X-Forwarded-For`
> 
> **注意：**我们建议将此设置保留为“关闭”，除非您有特殊需要。

[您可以从 Cloudflare 的这篇文章](https://support.cloudflare.com/hc/en-us/articles/202494830-Pseudo-IPv4-Supporting-IPv6-addresses-in-legacy-IPv4-applications)中了解有关此功能的更多信息，其中详细介绍了他们如何尝试在 IPv4 中的 32 位空间中容纳 IPv6 的 128 位地址空间。

如果您想知道 IPv6 地址和伪 IPv4，Cloudflare 会`Cf-Connecting-IPv6`在启用伪 IPv4 时添加一个标头。这可用于衡量有多少流量来自 IPv6 网络上的设备，如果在投资更新仍受 IPv4 限制的系统之前需要一个可靠的数字来显示管理，这将非常有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-31T03:44:38.457

对于 magento 1.x 用户（我还没有尝试过 magento 2.0），请查看[https://tall-paul.co.uk/2012/03/13/magento-show-remote-ip-in-cloudflare-the- right-way/](https://tall-paul.co.uk/2012/03/13/magento-show-remote-ip-in-cloudflare-the-right-way/)需要更改 app/etc/local.xml 并添加：HTTP_CF_CONNECTING_IP

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-10T06:14:02.153

最好在线检查 cloudflare ip 范围（因为它可能随时更改）然后检查它是否来自 cloudflare。

[Cloudflare IP txt](https://www.cloudflare.com/ips-v4)

如果源是 Cloudflare，您可以使用它`$_SERVER['HTTP_CF_CONNECTING_IP']`来获取您的客户端请求 IP 地址，但将其用于所有请求并不安全，因为它可以由任何用户在请求标头中发送来欺骗您。

您可以使用以下代码获取客户端请求的真实 IP 地址：

```
function _getUserRealIP() {
    $ipaddress = '';
    if(isset($_SERVER['REMOTE_ADDR']))
        $ipaddress = $_SERVER['REMOTE_ADDR'];
    else if (isset($_SERVER['HTTP_CLIENT_IP']))
        $ipaddress = $_SERVER['HTTP_CLIENT_IP'];
    else if(isset($_SERVER['HTTP_X_FORWARDED_FOR']))
        $ipaddress = $_SERVER['HTTP_X_FORWARDED_FOR'];
    else if(isset($_SERVER['HTTP_X_FORWARDED']))
        $ipaddress = $_SERVER['HTTP_X_FORWARDED'];
    else if(isset($_SERVER['HTTP_X_CLUSTER_CLIENT_IP']))
        $ipaddress = $_SERVER['HTTP_X_CLUSTER_CLIENT_IP'];
    else if(isset($_SERVER['HTTP_FORWARDED_FOR']))
        $ipaddress = $_SERVER['HTTP_FORWARDED_FOR'];
    else if(isset($_SERVER['HTTP_FORWARDED']))
        $ipaddress = $_SERVER['HTTP_FORWARDED'];
    else
        $ipaddress = 'UNKNOWN';
    return $ipaddress;
}

function _readCloudflareIps()
{
    $file = file("https://www.cloudflare.com/ips-v4",FILE_IGNORE_NEW_LINES);
    return $file;
}

function _checkIpInRange($ip, $range) {
    if (strpos($range, '/') == false)
        $range .= '/32';

    // $range is in IP/CIDR format eg 127.0.0.1/24
    list($range, $netmask) = explode('/', $range, 2);
    $range_decimal = ip2long($range);
    $ip_decimal = ip2long($ip);
    $wildcard_decimal = pow(2, (32 - $netmask)) - 1;
    $netmask_decimal = ~ $wildcard_decimal;
    return (($ip_decimal & $netmask_decimal) == ($range_decimal & $netmask_decimal));
}

function _checkIsCloudflare($ip) {
    $cf_ips = _readCloudflareIps();
    $is_cf_ip = false;
    foreach ($cf_ips as $cf_ip) {
        if (_checkIpInRange($ip, $cf_ip)) {
            $is_cf_ip = true;
            break;
        }
    }
    return $is_cf_ip;
}

function getRealIp()
{
    $httpIp = _getUserRealIP();
    $check = _checkIsCloudflare($httpIp);
    if ($check) {
        return $_SERVER['HTTP_CF_CONNECTING_IP'];
    }else{
        return $httpIp;
    }
} 
```

将此函数导入您的代码后，您只需调用`getRealIp()`如下函数：

```
$userIp = getRealIp();
echo $userIp(); 
```

# java - 关于将构造函数说明符从私有更改为受保护的单例

> ID：14985519
> 
> 赞同：0
> 
> 时间：2013-02-20T16:56:54.460
> 
> 标签：java, design-patterns

如果我们将单例的构造函数从私有更改为受保护会发生什么？在这种情况下，我们如何防止它破裂？

单身人士：

```
public class SingletonObject
{
    private static SingletonObject ref;

    private SingletonObject () //private constructor
    {
        System.setSecurityManager(new SecurityManager());
    }

    public  static synchronized   SingletonObject getSingletonObject()
    {
        if (ref == null)
            ref = new SingletonObject();
                return ref;
    }   

    public Object clone() throws CloneNotSupportedException
    {
        throw new CloneNotSupportedException ();
    }

} 
```

为了打破单例，以下 url 包含[使用其他方式破解单例](https://stackoverflow.com/questions/11654876/cracking-singleton-with-other-ways#comment15443658_11654876)所需的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:25:22.063

简单：将构造函数访问修饰符从更改`private`为`protected`允许同一包中的任何类实例化`SingletonObject`。`package`通过指定相应的语句，我们可以很容易地创建一个“在同一个包中”的类。

**编辑：** Carlos 的回答让我意识到了一个额外的问题，它是由构造函数`protected`而不是`public`：可以创建单例类的子类（在另一个包中），它可以自由实例化并调用其实例方法；单例类本身不再完全控制创建实例（或 1 个实例）的位置和方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:41:50.070

来自[Joshua Bloch 的 Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683) on Singletons Properties：

> 私有构造函数只被调用一次，以初始化公共静态最终字段 (...)。缺少公共或受保护的构造函数保证了一个“<em>monoinstance”宇宙：一旦*Singleton*类被初始化，就只有一个 (...) 实例存在——不多也不少。客户所做的任何事情都无法改变这一点。

所以，如果你让你的单例构造函数受到保护，你就会暴露你的构造函数，让同一个包中的任何类都可以将实例作为`SingletonObject`. 如果发生这种情况，您的单例模式将被破坏。

以任何方式放宽构造函数的访问修饰符——使其成为受保护的、公共的或默认的——是实例生成的敞开大门，这在单例实现中是不希望的。

# javascript - Javascript：获取标签中带有特定“for”的单选按钮标签

> ID：14985525
> 
> 赞同：2
> 
> 时间：2013-02-20T16:57:12.770
> 
> 标签：javascript, input, label

我有一个这样的表单元素：

```
<div id="myformelement">
   <input type="radio" id="option1">
   <label for="option2">Option 1</label>
   <input type="radio" id="option2">
   <label for="option2">Option 2</label> 
   <input type="radio" id="option3">
   <label for="option3">Option 3</label> 
   <input type="radio" id="option4">
   <label for="option4">Option 4</label>  
</div> 
```

我想隐藏输入字段“option2”和“option3”及其标签。

我可以通过寻址 id 来隐藏输入项目符号。不幸的是，输入字段的相应标签只有一个带有 id 的“for”标签。

我怎么能用javascript（没有jquery）来做到这一点。

我发现了这个问题（[Find html label associated with a given input](https://stackoverflow.com/questions/285522/find-html-label-associated-with-a-given-input)），但这似乎只适用于 ID 中的一个标签，我不能使用它。

提前致谢！亲切的问候，马耳他

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:01:31.693

在纯 JavaScript 中，您可以使用[`querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)：

```
document.querySelector("label[for='option2']").style.display = "none"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:01:23.160

你*可以*这样做`nextSibling`：

```
var rdo = document.getElementById("option2");
var lbl;

rdo.style.display = "none";
for (lbl = rdo.nextSibling; lbl && lbl.nodeName.toUpperCase() !== "LABEL"; lbl = lbl.nextSibling) {
}
if (lbl) {
    lbl.style.display = "none";
} 
```

`label`但我有一个更好的选择给你：元素可以*包含*它们相关的元素似乎是一个保守的秘密`input`，而当它们不包含时则根本不需要`for`。因此，如果您将 HTML 更改为：

```
<div id="myformelement">
   <label><input type="radio" id="option1"> Option 1</label>
   <label><input type="radio" id="option2"> Option 2</label> 
   <label><input type="radio" id="option3"> Option 3</label> 
   <label><input type="radio" id="option4"> Option 4</label>  
</div> 
```

...它变得容易*多了：*

```
document.getElementById("option2").parentNode.style.display = "none"; 
```

您只需找到`input`，遍历其父级`label`，然后隐藏它（这也将隐藏`input`）。

# git - 每次我 git push 时，我都会收到 /etc/ghrc-secrets: Permission denied 消息

> ID：14985528
> 
> 赞同：1
> 
> 时间：2013-02-20T16:57:18.650
> 
> 标签：git, github, permission-denied, git-push

每次我 git push 时，我都会收到一条神秘的错误消息。奇怪的是，推动似乎顺利通过！这是完整的输出：

```
$ git push
/data/github/shell/bin/gh-environment: line 84: /etc/ghrc-secrets: Permission denied
/data/github/shell/bin/gh-environment: line 84: /etc/ghrc-secrets: Permission denied
Counting objects: 9, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (6/6), done.
Writing objects: 100% (8/8), 1.02 KiB, done.
Total 8 (delta 0), reused 0 (delta 0)
To git@github.com:REDACTED/REDACTED.git
   0f6db16..0321871  master -> master 
```

错误消息每次都突然发生，在我在 github 上的每个 repos 中。然而我在网上查了一下，我的所有更改都被成功推送了。

连接时似乎有些奇怪，而不是实际推送数据时。因为当我没有什么要推送的时候，错误仍然存​​在，而且总是两次：

```
$ git push
/data/github/shell/bin/gh-environment: line 84: /etc/ghrc-secrets: Permission denied
/data/github/shell/bin/gh-environment: line 84: /etc/ghrc-secrets: Permission denied
Everything up-to-date 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:01:47.413

False alarm! This was a problem on github's end, and it's now been resolved.

# clojure - core.logic 中的 distincto 与 fd/distinct

> ID：14985530
> 
> 赞同：7
> 
> 时间：2013-02-20T16:57:23.400
> 
> 标签：clojure, clojure-core.logic

`fd/distinct`在元素位于有限域而不是 的情况下使用有什么好处`distincto`？

以下全部返回`([0 1] [1 0])`。

```
;;; With distincto
(run* [q]
  (fresh [x y]
    (fd/in x y (fd/interval 1))
      (distincto [x y])
      (== q [x y])))

;;; With fd/distinct
(run* [q]
  (fresh [x y]
    (fd/in x y (fd/interval 1))
      (fd/distinct [x y])
      (== q [x y])))

;;; Without fd at all. 
(let [interval [0 1]]
  (run* [q]
    (fresh [x y]
      (membero x interval)
      (membero y interval)
      (distincto [x y])
      (== q [x y])))) 
```

值得注意的是，虽然看起来你可以`distincto`在任何你可以使用的地方使用（但不是相反），但对于和`fd/distinct`却不能这样说。`membero``fd/in`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T21:29:25.053

`fd/distinct`比`distincto`必须接收任何类型的值的优化程度高得多。`fd/distinct`在底层使用集合同时处理约束变量的有效表示，以非常简单的方式`distincto`使用不等式运算符。`!=`

# php - 解析 WSDL：xx 已定义

> ID：14985531
> 
> 赞同：2
> 
> 时间：2013-02-20T16:57:30.553
> 
> 标签：php, soap-client, xtrf

当我尝试执行以下 PHP 代码时：

```
$client = new SoapClient("https://.../translationManagementService/XTRFService?wsdl"); 
```

我得到：

致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：'createCustomer' 已在 /data/r/e/reachlocalization.com/web/createuser.php:31 中定义 堆栈跟踪：#0 /data/r /e/reachlocalization.com/web/createuser.php(31): SoapClient->SoapClient('https://.......') #1 {main} 在 /data/r/e/reachlocalization 中抛出.com/web/createuser.php 第 31 行

我做错了什么还是与此服务器有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:31:40.020

这是[PHP 错误 #45282](https://bugs.php.net/bug.php?id=45282)。

您可以尝试[Pear SOAP](http://pear.php.net/package/SOAP)实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-18T19:50:06.747

尝试连接到`?singleWsdl`而不是`?wsdl`

# linq - Linq 处理异常

> ID：14985535
> 
> 赞同：1
> 
> 时间：2013-02-20T16:57:45.920
> 
> 标签：linq, entity-framework, exception, ef-model-first

我创建了一个项目，我将 EF 与 LINQ 和`Model first`. 因此，基于我的 edmx，我创建了我的数据库以及我的课程。

所以我遇到了一些问题。我创建了一个 Click 来测试我的代码是否正常工作。

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    ZUser Zusr = new ZUser();
    List<ZUser> lst = Zusr.ListAll();
    // Zusr.Id = 1;

    string test = "";
    foreach (ZUser item in lst)
    {
        test = item.Name;
    }
    lblName.Text = test;
} 
```

因此，在我的`ZUser`班级（*Controller*）中，我执行了以下代码：

```
[Serializable]
public class ZUser : User
{
    String connString = ConfigurationManager.ConnectionStrings["ConnectionString"].ToString();

    public List<ZUser> ListAll()
    {
        List<ZUser> lstUser = new List<ZUser>();
        using (DataContext db = new DataContext(connString))
        {
            Table<User> Users = db.GetTable<User>();
            var query =
                from usr in Users
                where usr.Name == "Test"
                select usr;

            foreach (ZUser usr in query)
                lstUser.Add(usr);
        }

        return lstUser;
    }
} 
```

还有我的模型（*由我的 edmx 生成的类*）

```
namespace System.Model
{
    //[Table]
    public partial class User
    {
        public int Codigo { get; set; }
        public string Name { get; set; }
        public string LastName { get; set; }
        public string Password { get; set; }
        public DateTime Created { get; set; }
        public DateTime LastLogin { get; set; }
    }
} 
```

## 问题

1.  如果我不让`[Table]`我的模型类（我添加了那个）我得到了这个错误。**我不确定这是否是纠正它的正确方法。**

> **类型“{0}”未映射为表。**

1.  从上面“解决”问题后。我在我的`foreach (ZUser usr in query)`.

> **成员“{0}.{1}”不支持 SQL 转换。**

我不知道如何修复或创建解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:16:32.237

太神奇了，linq 的这个功能！

真的很有趣！

在 msdn 上进行一些搜索并在应用程序中对其进行测试后，

也许您错过了所有单个类成员的**Column**属性：

`[Column(CanBeNull = false, DbType = "int")]`

也许您必须取消注释User 声明顶部的**Table属性**

希望这有帮助！

# spring - Hibernate HQL 查询不适用于选择子句

> ID：14985536
> 
> 赞同：0
> 
> 时间：2013-02-20T16:57:50.593
> 
> 标签：spring, hibernate

我是使用 Spring/hibernate 的初学者。我在一个方法中编写了以下查询，以便该方法根据查询结果返回一个布尔值。

```
public Boolean getStatus(){
    logger.debug("Get Emp Status");
    Session session = sessionFactory.getCurrentSession();
    String hql = "SELECT ec.IsEnable FROM Employee ec WHERE ec.UID=1";
    Query query = session.createQuery(hql);
    Boolean result = (Boolean) query.uniqueResult();
    return result;
} 
```

员工实体：

```
@Entity
@Table (name = "FS_Employee")
public class Employee {

@Id
@GeneratedValue
@Column (name = "UID")
private Integer UID;

@Column (name = "IsEnable")
private Boolean IsEnable;

public Employee(){ }

/**
 * @return
 */
public Boolean getIsEnable()
{
    return IsEnable;
}

/**
 * @param boolean1
 */
public void setIsEnable(Boolean boolean1)
{
    IsEnable = boolean1;
}

/*
*sets value of UID
* 
* @param Integer 
*/
public void setUID(Integer UID){
     this.UID = UID;
}

/*
*gets value of UID
* 
* @param 
*/
public Integer getUID(){
     return UID ;
}

} 
```

休眠上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        ">

<context:property-placeholder location="/WEB-INF/spring.properties" />

     <!-- Enable annotation style of managing transactions -->
<tx:annotation-driven transaction-manager="transactionManager" />   

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
             p:dataSource-ref="dataSource"
             p:configLocation="/WEB-INF/hibernate.cfg.xml"
             p:packagesToScan="test"/>
</beans> 
```

休眠.cfg.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
    "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
    "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
<session-factory>
 <property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
 <property name="show_sql">false</property>

</session-factory>
</hibernate-configuration> 
```

这不起作用，我收到以下错误。

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.hibernate.QueryException: could not resolve property: IsEnable of: test.spring.model.Employee [SELECT ec.IsEnable FROM test.spring.model.Employee ec WHERE ec.UID=1]
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:656)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:21:23.080

确保我们的 spring 配置为您的实体设置了注释扫描，您需要

```
<property name="annotatedClasses">
    <list>
      <value>com.path.to.entities.MyEntity</value>
    </list>
</property> 
```

在 hibernate.cfg.xml 的 sessionfactory bean 中

然后你会想要在你的 spring 配置中启用组件扫描

```
<!-- Auto scan the components -->
<context:component-scan base-package="com.YOUR.BASE.PATH" /> 
```

当然，请确保您有适当的 hibernate 组件进行注释。如果您正在使用，则需要以下 Maven 工件。否则将这些工件导入您的项目，但如果它没有抱怨，我假设您拥有它们。

```
<!-- Hibernate annotation -->
    <dependency>
        <groupId>hibernate-annotations</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.3.0.GA</version>
    </dependency>

    <dependency>
        <groupId>hibernate-commons-annotations</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
        <version>3.0.0.GA</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:32:12.910

将您的属性重命名`IsEnable`为`isEnable`. 我认为 Hibernate 与您的第一个大写字母混淆了，无论如何这是 Java 约定...

# jquery - 在单击指定按钮之前阻止提交表单（厚框对话框）

> ID：14985537
> 
> 赞同：2
> 
> 时间：2013-02-20T16:57:52.113
> 
> 标签：jquery, forms, submit, preventdefault, confirmation

我想在每个带有“确认”类的表单上使用 jQuery 和厚框制作一个模态确认窗口。

**这是 HTML 标记：**

```
<!-- The form below -->
<form id="myform" class="confirm" name="actionform" action="target.php">
<table>
  <tr>
    <td><input type="text" value="" placeholder="id" name="id" id="id"/></td>
    <td><input type="text" value="" placeholder="title" name="title" id="title"/></td>
    <td><input type="submit" value="Form elküldése"/></td>
  </tr>
</table>
</form>

<!-- The modal box and it's content below, called with tb_show() function -->
<div id="myModalConfirm" style="display:none">
    <div>
        <p>Are you sure?</p>
        <button id="yes">Yes, I'm sure</button><button id="cancel">No, cancel it</button>
    </div>
</div> 
```

**所以问题：**

模态对话框显示并且工作正常，取消按钮工作但单击 button#yes 不会提交表单，我认为这是因为 preventDefault() 函数。

**这是jQuery（我正在使用jquery.1.8.3 lib，所以请注意兼容性）**

```
$(document).ready(function(){
    $('form.confirm').submit(function(e){
        var form = $(this);
        e.preventDefault();
        tb_show("Megerősítés","#TB_inline?height=100&amp;width=200&amp;inlineId=myModalConfirm&amp;modal=true",null);
        $('button#yes').click(function(){
            $(form).submit;

            });
        $('button#cancel').click(function(){
            tb_remove();
            return false;
            });
    })

}); 
```

**=======| 解决方案|================================================ ===============** *这是给我的，但请在评论中查看下面的其他商品:)*

```
$('form.confirm').submit(function(e, submit){
        if (!submit) e.preventDefault();
        tb_show("Megerősítés","#TB_inline?height=100&amp;width=200&amp;inlineId=myModalConfirm&amp;modal=true",null);
    })

    $('#yes').click(function(){
        $('form.confirm').trigger('submit', [true]);
    });

    $('#cancel').click(function(){
        tb_remove();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:06:13.930

我认为最简单的方法是将用户是否单击“是”存储在一个变量中，如果他们这样做了，让表单像往常一样处理。

```
$(document).ready(function(){
    var userClickedYes = false;

    $('form.confirm').submit(function(e){    
        if(!userClickedYes){
            e.preventDefault();
            tb_show("Megerősítés","#TB_inline?height=100&amp;width=200&amp;inlineId=myModalConfirm&amp;modal=true",null);
        }            
    });

    $('button#yes').click(function(){
        userClickedYes = true;
        $('form.confirm').submit();
    });
    $('button#cancel').click(function(){
        tb_remove();
    });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:07:02.870

`submit`是一种方法而不是一种属性，您缺少`()`. 您可以使用`trigger`方法：

```
$(document).ready(function(){
    $('form.confirm').submit(function(e, submit){
        if (!submit) e.preventDefault();
        tb_show("Megerősítés","#TB_inline?height=100&amp;width=200&amp;inlineId=myModalConfirm&amp;modal=true",null);
    })

    $('#yes').click(function(){
        $('form.confirm').trigger('submit', [true]);
    });

    $('#cancel').click(function(){
        b_remove();
    });
}); 
```

# jsoup - Jsoup wrongly closes a tag and puts tag text out of tag

> ID：14985541
> 
> 赞同：0
> 
> 时间：2013-02-20T16:58:01.613
> 
> 标签：jsoup

I was parsing a feed but it wrongly closes a tag

```
<link />http://wwww 
```

Here is my code for getting HTML from a URL

```
 Document doc = Jsoup.connect(pURL).get();
    doc.outputSettings().outline(false);
    doc.outputSettings().prettyPrint(false);
    String html = doc.html(); 
```

It gives following XML

```
<!--?xml version="1.0" encoding="utf-8"?--><html><head></head><body><rss version="2.0">    <channel>
    <title>Fenopy rss</title>
    <link />http://fenopy.eu/ <----------@see this
    <description>Fenopy torrent rss</description>
    <language>en-us</language>

        <item>
        <title>Broken City 2013 CAMRip English</title>
        <guid ispermalink="true">http://fenopy.eu/torrent/broken+city+2013+camrip+english/OTU0MDI1MA</guid>
        <pubdate>Sun, 27 Jan 2013 19:23:21 GMT</pubdate>
        <category>Movies</category>
        <link />http://fenopy.eu/torrent/bnglish/OTU0MDI1MA <----------@see this
        <enclosure url="http://fenopy.eu/torrent/Broken-City-2013-CAMRip-English/OTU0MDI1MA==/download.torrent" length="783829383" type="application/x-bittorrent" />
        <description> Category: Movies&lt;br/&gt;Size: 747.5 MB&lt;br/&gt;Ratio: 60 seeds, 11 leechers&lt;br/&gt; </description>
        </item> 
```

but when I open it in browser it shows correct xml

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" >    <channel>
    <title>Fenopy rss</title>
    <link>http://fenopy.eu/</link>
    <description>Fenopy torrent rss</description>
    <language>en-us</language>

        <item>
        <title>Broken City 2013 CAMRip English</title>
        <guid isPermaLink='true'>http://fenopy.eu/torrent/broken+city+2013+camrip+english/OTU0MDI1MA</guid>
        <pubDate>Sun, 27 Jan 2013 19:23:21 GMT</pubDate>
        <category>Movies</category>
        <link>http://fenopy.eu/torrent/broken+city+2013+camrip+english/OTU0MDI1MA</link>
        <enclosure url="http://fenopy.eu/torrent/Broken-City-2013-CAMRip-English/OTU0MDI1MA==/download.torrent" length="783829383" type="application/x-bittorrent" />
        <description><![CDATA[ Category: Movies<br/>Size: 747.5 MB<br/>Ratio: 60 seeds, 11 leechers<br/> ]]></description>
        </item> 
```

I don't know what's going on. is there any bug in Jsoup 1.7.2 jar? help me ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:42:56.740

这不是一个错误。您的 GDATA 响应内容类型为`application/rss+xml`，因此您必须指定您的`Parser`is XML 解析器；否则，默认情况下，它是 HTML 解析器，其工作方式不同。

```
 // load Document
    Document doc = Jsoup.connect(URL_SOURCE).ignoreContentType(true).parser(Parser.xmlParser()).get(); 
```

> //如果你设置outline和prettyprint = true，那么你必须寻找\n和\t字符并且你必须删除它们所以让它们为假

```
 // config output
    doc.outputSettings().outline(false);
    doc.outputSettings().prettyPrint(false);

    // output result
    System.out.println(doc.html()); 
```

`<link>`如果指定 XML 解析器，则输出结果正确。

# python - 在应用程序之间共享套接字有什么好处？

> ID：14985551
> 
> 赞同：1
> 
> 时间：2013-02-20T16:58:38.037
> 
> 标签：python, linux, sockets, optimization

看着 Circus，一个用于管理套接字和进程的 Python 应用程序，我想知道在应用程序之间共享/重用套接字而不是允许每个应用程序有自己的私有套接字的技术优势是什么。有人可以解释一下吗？

Circus 的文档可以在这里找到：[http ://circus.readthedocs.org/en/0.6/sockets/#sockets](http://circus.readthedocs.org/en/0.6/sockets/#sockets)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:31:04.720

如果每个子进程都侦听自己的套接字，则父进程必须在子进程之间分配它们之前处理所有连接。这是不可扩展的，因为父进程有太多的工作。

当多个子进程与父进程共享一个套接字时（这是通过从父进程派生子进程来完成的），每个子进程都可以独立接受连接，分配由操作系统内核处理，效率很高。

# sql - PL/SQL 中的字符串拆分

> ID：14985552
> 
> 赞同：0
> 
> 时间：2013-02-20T16:58:39.893
> 
> 标签：sql, oracle, stored-procedures, plsql, oracle10g

我在 oracle 中有这样的表：

```
servername       description                                                    ObjectState
-----------------------------------------------------------------------------------------
vm1         SP LA -  W IN  S V R S #P19 99 9999 999999 999  QTY 1                   0
VM2         S PL A - V R STD #P29-9 9 99 QTY 2 : SPLVRENT #P3 999999 9 QTY 3        1 
```

等我想要这样的输出

```
servername   description             ponumber                  qty     objectstate
--------------------------------------------------------------------------------------
vm1          SP LA -  W IN  S V R S  P19 99 9999 999999 999    1        0
vm2          S PL A - V R STD        P29-9 9 99                2        1
vm2          SPLVRENT                P3 999999 9               3        1 
```

帮助我如何使用 pl/sql 存储过程来做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:51:29.840

试试这个程序！！

如果描述模式与指定的空格和描述、电话号码、数量等流程相同，这将起作用

```
create or replace procedure sp_split_str
as
     end_pos number:=0;
     strt_pos number :=1;
     CNT NUMBER:=0;
     v_desc varchar(200);
begin
     for i in (select * from table) loop
            if(instr(i.description,':',1,1)=0) then
                   dbms_output.put_line('Server Name : '||i.servername);
                   dbms_output.put_line('Description : '||substr(i.description,1,instr(i.description,'#',1,1)-2));
                   dbms_output.put_line('Phone Number : '||substr(i.description,instr(i.description,'#',1,1)+1,instr(i.description,'Q',-1,1)-2-instr(i.description,'#',1,1)));
                   dbms_output.put_line('Qty : '||substr(i.description,instr(i.description,'Q',-1,1)+4));           
                   dbms_output.put_line('Object State : '||i.objectstate);
            else
                   for J in 1..(length(i.description)-length(replace(i.description,':','')))+1 loop
                          IF(J=1) THEN
                                 end_pos := instr(i.description,':',1,1);
                                 v_desc := substr(i.description,strt_pos,end_pos-2);
                          ELSE
                                 end_pos := instr(i.description,':',1,j);
                                 strt_pos := instr(i.description,':',1,j-1);
                          END IF;
                          dbms_output.put_line('Server Name : '||i.servername);
                          dbms_output.put_line('Description : '||substr(v_desc,1,instr(v_desc,'#',1,1)-2));
                          dbms_output.put_line('Phone Number : '||substr(v_desc,instr(v_desc,'#',1,1)+1,instr(v_desc,'Q',-1,1)-2-instr(v_desc,'#',1,1)));
                          dbms_output.put_line('Qty : '||substr(v_desc,instr(v_desc,'Q',-1,1)+4));          
                          dbms_output.put_line('Object State : '||i.objectstate);

                          CNT := CNT+1;
                          IF(CNT=J) THEN
                                  v_desc := substr(i.description,strt_pos+2);
                          ELSE
                                  v_desc := substr(i.description,strt_pos+2,end_pos-2);
                          END IF;
                   END loop;
            end if;
      END LOOP;

END; 
```

# c++ - QVariant.value () 引起问题

> ID：14985553
> 
> 赞同：0
> 
> 时间：2013-02-20T16:58:44.837
> 
> 标签：c++, qt, qvariant

所以我有一个自定义类 Foo 已使用`Q_DECLARE_METATYPE(Foo)`类定义末尾的宏注册为元类型。

我可以在列表中设置项目，检查是否可以转换，但是当我尝试实际制作 Foo 类型的项目时，编译时会失败。

使用从 a 传入的 QVariant `QModelIndex &index`：

```
Foo item(index.data(Qt::DisplayRole).value<Foo>()) 
```

失败并出现以下错误：

```
no matching function for call to 'namespace::Foo::Foo(namespace::Foo)'
In instantiation of 'T qvariant_cast(const Foo&) [with T = namesapce::Foo]':
required from 'T QVariant::value() const [with T = namespace::Foo]'
no matching function for call to 'namespace::Foo::Foo(const namespace::Foo &)'
no matching function for call to 'namespace::Foo::Foo(const namespace::Foo&)'    
no matching function for call to 'namespace::Foo::Foo(const namespace::Foo)'
In member function 'T QVariant::value() const [with T = namespace::Foo]' 
```

全部来自文件 qvariant.h

我在这里做错了什么？我的类有以下构造函数：

```
Foo::Foo(const Foo &)
Foo::Foo() 
```

标题如下：

```
namespace a {
namespace b {
class Foo {
    explicit Foo();
    explicit Foo(const Foo &a);
    ...
};
} // b
} // a
Q_DECLARE_METATYPE(a::b::Foo) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:37:31.207

正如 Dan Milburn 建议的那样，删除`explicit`关键字解决了问题。似乎在值调用中发生了隐式转换，因此只有显式构造函数阻止了这种情况。

# java - 快速排序混乱

> ID：14985562
> 
> 赞同：0
> 
> 时间：2013-02-20T16:59:01.677
> 
> 标签：java, quicksort

我正在通过快速排序，无论我看到哪篇文章，我都会感到更加困惑。

1）这个实现真的很好[http://gauss.ececs.uc.edu/Courses/C321/html/quicksort.java.html](http://gauss.ececs.uc.edu/Courses/C321/html/quicksort.java.html)

但据我了解，每次通过后，枢轴索引都处于正确位置。

那么理想情况下，我们应该执行以下操作：

```
 public static void Quicksort(int A[], int f, int l)
   {
      if (f >= l) return;
      int pivot_index = partition(A, f, l);
      Quicksort(A, f, pivot_index-1); //*** pivot_index-1
      Quicksort(A, pivot_index+1, l);
   } 
```

但教程使用**Quicksort(A, f, pivot_index);** .

我 200% 确信进行更改“pivot_index-1”不会提高任何性能或降低复杂性；但只想让我的理解正确。

2）[这里](http://www.vogella.com/articles/JavaAlgorithmsQuicksort/article.html)的实现有效；但它不会在每次传递时将枢轴元素放置在正确的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:33:31.250

我见过的两个实现：

*   包含结束索引
*   结束索引独占

`Quicksort(A, f, pivot_index-1);`是针对第一种情况。

`Quicksort(A, f, pivot_index);`是针对第二种情况。

`Quicksort(A, f, pivot_index);`对第一种情况进行操作仍会产生排序列表，但会做一些额外的工作。

在第二种`Quicksort(A, f, pivot_index-1);`情况下进行操作**可能不会**一直产生一个完全排序的列表。

**[这个实现](http://www.vogella.com/articles/JavaAlgorithmsQuicksort/article.html)的分析：**

我可以看到它为什么起作用（它会用较低索引处的较大元素交换枢轴），但这不是我所知道的快速排序，它可能比需要做的工作略多。

# git - 使用逆向分支选择策略时如何检索 Jenkins 构建的 git 分支名称？

> ID：14985563
> 
> 赞同：6
> 
> 时间：2013-02-20T16:59:01.880
> 
> 标签：git, plugins, jenkins, branch, inverse

我们有一个 Jenkins 工作，当有新的提交时，它会构建除 master 之外的每个分支。可以通过 git 插件的“选​​择策略：反向”配置此行为，以便它侦听除指定分支之外的每个分支。

这功能非常好。但问题是 GIT_BRANCH 环境变量总是引用排除的分支（在我们的例子中是'origin/master'）。如何查询 Jenkins 构建的实际分支？

目前，我正在使用一种解决方法，即从生成的 changelog.xml 中对其进行 grep。但是有时当 Jenkins 在不同的分支之间切换时 changelog.xml 是空的，我找不到这个信息。从 Jenkins 检索/查询实际构建的分支的正确方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-01-08T12:38:32.190

我成功地使用了这个语法：

```
GIT_BRANCH=`git rev-parse HEAD | git branch -a --contains | grep remotes | sed s/.*remotes.origin.//` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:06:22.843

看起来这是一个詹金斯的错误？您可以使用以下命令在构建脚本中获取签出分支的名称：

```
git symbolic-ref -q --short HEAD 
```

实际上 Jenkins 在分离的 HEAD 中有工作副本，这就是为什么`git branch`返回“无分支”。请参阅[这个非常详细的答案](https://stackoverflow.com/q/5772192/11343)，以深入了解分离的 HEAD 和分支之间的协调。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-04T02:03:04.777

因为 git 从不直接签出一个分支，只是一个提交，你必须执行以下操作：

要获取签出提交的 sha：

```
git rev-parse HEAD 
```

要获取提交所在的所有分支：

```
git branch -a --contains SHA 
```

第二个命令的输出可能如下所示

```
master
remotes/origin/HEAD -> origin/master
remotes/origin/develop 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-02T20:59:06.897

我不敢相信这有多难。我也在为詹金斯做这个。我捎带了 Piotr Kuczynski 的解决方案：

```
branch=`git rev-parse HEAD | git branch -a --contains | grep remotes | sed s/.*remotes.origin.//`
branch=`echo $branch | awk '{print $NF}'` 
```

因为有时，正如 Matt Kantor 所指出的，Piotr 的解决方案会回馈大量垃圾。但是那个垃圾中的最后一句话似乎总是正确的。请注意，此解决方案仅在您使用的 ref 与远程存在的分支完全对应时才有效（因此本地分支将不起作用）。

# json - jersey jax rs 不返回为 0 的 xmlelement

> ID：14985568
> 
> 赞同：1
> 
> 时间：2013-02-20T16:59:21.283
> 
> 标签：json, rest, jersey, jax-rs

如果值为 0，我尝试为 XmlElement 返回 null。但如果我这样做，则会出现异常。我的意图是，如果它的值为 0，我生成的 JSON 中没有此列。那么我该如何实现呢？你能帮我么？

这是我在 District 班级中的 XmlElement。

```
@XmlElement(name="Car Quantity")
public long getCarsQuantity() {
      return carsQuantity == 0 ? null : carsQuantity;
} 
```

这是例外：

```
java.lang.NullPointerException
    at at.opendata.entitys.District.getCarsQuantity(District.java:71)
    at at.opendata.entitys.District$JaxbAccessorM_getCarsQuantity_setCarsQuantity_long.get(MethodAccessor_Long.java:59)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:131)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:344)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsSoleContent(XMLSerializer.java:597)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:328)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:498)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:320)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:177)
    at com.sun.jersey.json.impl.provider.entity.JSONListElementProvider.writeList(JSONListElementProvider.java:145)
    at com.sun.jersey.core.provider.jaxb.AbstractListElementProvider.writeTo(AbstractListElementProvider.java:264)
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1479)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1391)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1381)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:10:19.160

```
 return carsQuantity == 0 ? null : carsQuantity; 
```

当返回类型很长时，您试图返回 null。当您尝试调用超级构造函数并为一个参数传递 null 时，您也可以得到这种 NPE。

long 不能为空 :)

您可以尝试改用 java.lang.Long 。

# c# - 持久图形 WinForms

> ID：14985570
> 
> 赞同：2
> 
> 时间：2013-02-20T16:59:26.210
> 
> 标签：c#, winforms, graphics, persistent

我有一个 WinForms 应用程序，我必须在控件之间画一些线。这些行需要持久化，所以我覆盖了表单`OnPaint()`事件。

问题是，重新绘制的线条不是很流畅。

我正在按如下方式创建图形：

```
Graphics g;
g = this.CreateGraphics();
g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias;
g.FillRectangle(Brushes.White, this.ClientRectangle); 
```

并绘制如下线条：

```
public void lineDraw(Control L1, Control L2) {            
    using (Pen pen = new Pen(Color.Black, 4)) {
        pen.StartCap = System.Drawing.Drawing2D.LineCap.Flat;
        pen.EndCap = System.Drawing.Drawing2D.LineCap.ArrowAnchor;
        int x1, x2, y1, y2;
        //choose x/y coordinates
        g.DrawLine(pen, x1, y1, x2, y2);
    }
} 
```

我可以设置任何属性来提高绘制图形的平滑度吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:03:12.333

### 目标

> 图像显示在控件（或窗体）上。

### 失效

每当控件（或表单）被调整大小、最小化/最大化、部分被遮挡或四处移动时，都必须（部分）重绘它。当这种情况发生时，必须重绘的控件部分被称为*无效*。

无效时，控件会执行以下操作：

1.  Call `OnPaintBackground`：这用背景颜色填充无效区域。
2.  调用`OnPaint`：这会在背景上绘制文本和图形。

### 为什么`OnPaint`会导致闪烁

您已经覆盖了控件的[`OnPaint`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)。每次重绘控件时，您都会看到控件的闪烁，其中仅绘制了其背景颜色。即在`OnPaintBackground`被调用之后和之前`OnPaint`被调用。

### 解决方案

*   如果你有一个静态图像（即它永远不会改变）：

    1.  在`Load`事件中：创建一个新[`Bitmap`对象](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)。
    2.  用背景颜色填充它并在其上绘制线条和形状。
    3.  将此`Bitmap`对象分配给控件的[`BackgroundImage`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.backgroundimage.aspx)。
*   如果您有一个在控件调整大小时必须调整大小的静态图像：

    1.  覆盖该[`OnResize`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onresize.aspx)并在其中创建新方法`Bitmap`。使用控件的[`ClientSize`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.clientsize.aspx)来确定`Bitmap`.
    2.  用背景颜色填充它并在其上绘制线条和形状。
    3.  将此`Bitmap`对象分配给控件的`BackgroundImage`属性。
*   如果您有动画图像：

    1.  在`Load`事件中将控件的[`DoubleBuffered`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.doublebuffered.aspx)`true`设置为. 设置此项可防止您看到的闪烁，因为它使用不可见的缓冲区来绘制控件。
    2.  覆盖控件的[`OnPaint`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onpaint.aspx)。获取控件的[`Graphics`上下文](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)，直接在控件上绘制线条和形状。
    3.  创建并启用一个新[`Timer`对象](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)，并在其回调方法中调用控件的[`Invalidate`方法](http://msdn.microsoft.com/en-us/library/598t492a.aspx)，然后调用该[`Update`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.update.aspx)（[如此处所示](https://stackoverflow.com/a/2695790/146622)）。例如，将计时器设置为每 40 毫秒触发一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:13:53.447

您可能不应该`CreateGraphics`在这里使用，更重要的是，不要使用局部变量来存储图形对象。使用从绘制事件中获取的图形对象，并根据需要使之失效。

```
protected override void OnPaint(PaintEventArgs e) {
  e.Graphics.Clear(Color.White);
  e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;

  using (Pen pen = new Pen(Color.Black, 4)) {
    pen.StartCap = Drawing2D.LineCap.Flat;
    pen.EndCap = Drawing2D.LineCap.ArrowAnchor;
    int x1, x2, y1, y2;
    //choose x/y coordinates
    e.Graphics.DrawLine(pen, x1, y1, x2, y2);
  }

  base.OnPaint(e);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T08:31:52.540

这是我的方式，它对我有用

```
//FormMain.cs
private const float DisplayRatio = 6;

private Bitmap _bmpDisp; //use an in-memory bitmap to Persistent graphics
private Graphics _grpDisp4Ctl;
private Graphics _grpDisp4Bmp;
private Point _ptOldDsp;

private void FormMain_Shown(object sender, EventArgs e)
{
    _grpDisp4Ctl = CreateGraphics();
    _grpDisp4Ctl.SetHighQulity();

    _bmpDisp = new Bitmap(ClientSize.Width, ClientSize.Height);
    _grpDisp4Bmp = Graphics.FromImage(_bmpDisp);
    _grpDisp4Bmp.SetHighQulity();

    _ptOldDsp = new Point(
        (int)((MousePosition.X - SystemInformation.VirtualScreen.Left) / DisplayRatio),
        (int)((MousePosition.Y - SystemInformation.VirtualScreen.Top) / DisplayRatio)
    );
}

private void UpdateDisplay(MouseHookEvent mhep) //your implement
{        
    var ptNew = mhep.Position;
    ptNew.Offset(new Point(-SystemInformation.VirtualScreen.Left, -SystemInformation.VirtualScreen.Top));
    ptNew.X = (int)(ptNew.X / DisplayRatio);
    ptNew.Y = (int)(ptNew.Y / DisplayRatio);

    _grpDisp4Ctl.DrawLine(Pens.White, _ptOldDsp, ptNew); //draw smooth lines to mem and ui
    _grpDisp4Bmp.DrawLine(Pens.White, _ptOldDsp, ptNew);

    _ptOldDsp = ptNew;

}

private void FormMain_Paint(object sender, PaintEventArgs e)
{
    // like vb6's auto redraw :)
    e.Graphics.DrawImage(_bmpDisp, e.ClipRectangle, e.ClipRectangle, GraphicsUnit.Pixel);
}

//common.cs
internal static void SetHighQulity(this Graphics g)
{
    g.CompositingMode = System.Drawing.Drawing2D.CompositingMode.SourceOver;
    g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
    g.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighQuality;
    g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
    g.TextRenderingHint = System.Drawing.Text.TextRenderingHint.ClearTypeGridFit;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-17T20:33:56.963

我知道这是一篇较旧的帖子，但您也可以尝试将表单的 DoubleBuffered 属性设置为 TRUE，请阅读以下内容：

> “缓冲图形可以减少或消除由显示表面部分的渐进重绘引起的闪烁。缓冲图形要求首先将更新的图形数据写入缓冲区。然后将图形缓冲区中的数据快速写入显示的表面内存. 显示图形内存的相对快速切换通常会减少否则可能发生的闪烁。

# php - 使用 EXTJS 警报消息框调用 PHP 脚本

> ID：14985575
> 
> 赞同：0
> 
> 时间：2013-02-20T16:59:42.150
> 
> 标签：php, extjs, extjs4.1, jstree

我目前正在尝试通过单击 EXTJS 消息警报框上的 OK 按钮来调用 PHP 脚本。

由于某种原因，当我使用处理程序时，它甚至不显示警报框。但是，当我使用 Listener 时，它会显示警报框，但在单击 OK 按钮时不会调用 php 脚本。我在不同的博客上阅读并了解到 Handler 是前进的最佳方式

如果有人可以帮助我或指出正确的方向，我将不胜感激。我正在使用最新版本的 EXTJS4

下面是我使用处理程序编写的 EXTJS 树面板代码；

```
var treePanel = Ext.create('Ext.tree.Panel', {
    id: 'tree-panel',
    title: 'Available Database',
    region: 'north',
    split: true,
    height: 360,
    minSize: 150,
    rootVisible: false,
    autoScroll: true,
    store: store,

    handler: function() {
        if (treePanel.getSelectionModel().hasSelection()) {
            var selValue = treePanel.getSelectionModel().getSelection();

            Ext.MessageBox.alert('Press OK to confirm your subscription <br>' + selValue[0].data.text,
                function(btn, text) {
                    if (btn == 'ok') {
                        Ext.Ajax.request({
                            url: 'addSubscription.php',
                            params: {
                                nodetext: text,
                                parentid: selectedNode[0].data.id
                            },
                            success: function(response) {
                                var id = response.responseText;
                                grid.getView().refresh();
                            }
                        })
                    } else {
                        Ext.MessageBox.alert('Record already subscribed');
                    }
                });
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:02:48.743

Ext.tree.Panel 在配置中没有“处理程序”属性。处理程序是当您单击某些组件（例如按钮）时执行的功能。您可以在 treePanel 工具栏上添加按钮，并使用按钮处理程序：

```
...
tbar: [{
    xtype: 'button',
    text: 'Subscribe',
    handler: function(button) {
        ...
    }
}],
... 
```

参见 jsfiddle：http: [//jsfiddle.net/FFvLa/](http://jsfiddle.net/FFvLa/)

> 但单击“确定”按钮后不会调用 php 脚本。

该函数必须作为 Ext.Msg.alert 中的第三个参数传递：

[http://jsfiddle.net/FFvLa/2/](http://jsfiddle.net/FFvLa/2/)

# hibernate - 在前几行中验证失败后，primefaces 可编辑数据表更新

> ID：14985577
> 
> 赞同：1
> 
> 时间：2013-02-20T16:59:54.320
> 
> 标签：hibernate, validation, jsf-2, primefaces

我用谷歌搜索了很多我的问题，但似乎没有人有同样的问题，或者它没有按照我想要的方式解决

我有一个可编辑的`<p:dataTable editable="true" editMode="cell">`单元格或行（在 Primefaces 3.5 中）
我有一个验证，当我输入一个字符串> 4 验证错误发生在`<p:inputText>`仍然可编辑的地方
我有一个`<p:commandButton>`当我点击这个按钮时我正在添加一个行到此`<p:dataTable>`，我正在更新表格以显示该行
问题是当我添加一行并且在前一行中存在验证错误（单元格处于可编辑模式`<p:inputText>`）时，`<p:dataTable>`将按照我所说的进行更新，并且单元格具有验证错误将更改为`<p:outputText>`空值
，如果我按前一个单元格（具有错误验证并且为空），将显示错误的输入，如果我按 Tab，它将被提交（`<p:inputText>`更改为`<p:outputText>`输入错误）
我如何才能对可编辑

代码示例进行验证：

```
<h:form id="form">  

    <p:growl id="messages" showDetail="true"/>  

    <p:contextMenu for="cars" widgetVar="cMenu">     
        <p:menuitem value="Edit Cell" icon="ui-icon-search" onclick="carsTable.showCellEditor();return false;"/>    
        <p:menuitem value="Hide Menu" icon="ui-icon-close" onclick="cMenu.hide()"/>    
    </p:contextMenu>   

    <p:dataTable id="cars" var="car" value="#{tableBean.carsSmall}" editable="true" editMode="cell" widgetVar="carsTable">  

        <f:facet name="header">  
            In-Cell Editing  
        </f:facet>  

        <p:ajax event="cellEdit" listener="#{tableBean.onCellEdit}" update=":form:messages" />  

        <p:column headerText="Model" style="width:25%">  
               <p:cellEditor>  
                   <f:facet name="output">
                           <h:outputText value="#{car.model}" />
                   </f:facet>  
                   <f:facet name="input">
                           <p:inputText id="modelInput" value="#{car.model}" style="width:96%">
                                <f:validateLength minimum="0" maximum="4">
                           </p:inputText>
                   </f:facet>  
               </p:cellEditor>  
           </p:column>  

           <p:column headerText="Year" style="width:25%">  
            <p:cellEditor>  
                <f:facet name="output">
                     <h:outputText value="#{car.year}" />
                </f:facet>  
                <f:facet name="input">
                     <p:inputText value="#{car.year}" style="width:96%" label="Year"/>
                </f:facet>  
            </p:cellEditor>  
        </p:column> 

    </p:dataTable>   
    <p:commandButton action="#{tableBean.addCar}" update=":cars :messages" process="@this"/>
</h:form>

public class TableBean implements Serializable {  

    private List<Car> carsSmall;

    public TableBean() {  
        carsSmall = new ArrayList<Car>();  
    }  

    public List<Car> getCarsSmall() {  
        return carsSmall;  
    }  

    public void onCellEdit(CellEditEvent event) {  
        Object oldValue = event.getOldValue();  
        Object newValue = event.getNewValue();  

        if(newValue != null && !newValue.equals(oldValue)) {  
            FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Cell Changed", "Old: " + oldValue + ", New:" + newValue);  
            FacesContext.getCurrentInstance().addMessage(null, msg);  
        }  
    }  

    public String addCar(){
         carsSmall.add(new Car());
         return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:01:25.463

关于您的要求，我几乎没有澄清。（1）您是否一次向数据表添加一行（2）表中的单元格是否始终可编辑，或者只有您要添加的行才可编辑。（3）当您单击按钮时，您是验证所有行还是仅验证要添加到数据表的行？

# r - 计算一次在 R 中的另一列中指定的 3 个类别的条目

> ID：14985579
> 
> 赞同：0
> 
> 时间：2013-02-20T17:00:07.707
> 
> 标签：r, count

这可能非常简单，但我在任何地方都找不到简单的解决方案。我正在尝试在 R 中创建一个脚本来计算一列中属于指定另一列的 3 个类别之一的条目。我有一份带有 ID 号（同一 ID 有多个条目）的临床患者列表，这些患者已被两项服务（a 或 b）看到。我需要知道服务 a 和服务 b 和服务 c 看到了多少 ID，但只计算一次服务的重复访问（所以基本上是每个服务至少使用过一次的患者数量） - 希望这使得有道理，这里举个例子来说明。

例子：

```
     身份证类别
     A001一
     A002一
     A002一
     A002 乙
     A003 乙
     A003 乙
     A005 c
     A001一
     A004 乙
     A004 乙
     A006 c
     A006一

```

输出应该是这样的：

```
     a=3
     b=3
     c=2

```

这就是我所做的，但我很卡住，这可能一点都不好！

```
 DataString<- matrix(nrow=dim(refnum)[1], ncol=1)
 for (i in 1:dim(refnum)[1]){
   DataString[i,1]<- paste(refnum[i,], collapse = '')
 }

 #generate vector of unique strings
 uniqueID<- unique(DataString)

 #create new matrix to store new IDs
 newID<- matrix(nrow=dim(data)[1], ncol=1)

 #initiate index n
 n<-0
 #loop through unique strings
 for (i in 1:dim(refnum)[1]){
   #increment n by 1 for each increment through unique strings
   n<- n+1
   #loop through data rows
   for (j in 1:dim(data)[1]){    
     #find matches with string i
     index<- which(DataString == uniqueID[i,1])
     #assign new ID to matching rows
     newID[index,1]<- n
   }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:04:43.217

众多解决方案之一：

```
table(df[!duplicated(df), "Category"])

# a b c 
# 3 3 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T17:18:13.110

如果到目前为止我对问题的解释是正确的，您也许可以使用以下内容：

```
table(unique(mydf)$Category)
# 
# a b c 
# 3 3 2 
```

不过，我有点谨慎，因为您的句子*“所以基本上是至少使用过每项服务一次的患者数量”*，这听起来像是您想要使用所有三种服务的患者，在这种情况下，答案是没有任何！

因此，`aggregate`可能也很有趣，至少可以更轻松地看到您正在处理的内容：

```
temp <- aggregate(Category ~ ID, mydf, function(x) sort(unique(x)))
temp
#     ID Category
# 1 A001        a
# 2 A002     a, b
# 3 A003        b
# 4 A004        b
# 5 A005        c
# 6 A006     a, c 
```

这里的一个可能的优势是早期的表格（如果它是您需要的）也可以从`aggregate`by using的输出中`table(unlist(temp$Category))`获得，因此您可以通过 ID 查看服务的使用情况以及您需要的任何摘要。

# javascript - Dojo：构建自定义配置

> ID：14985581
> 
> 赞同：2
> 
> 时间：2013-02-20T17:00:19.143
> 
> 标签：javascript, html, dojo

我正在尝试构建自定义 dojo 配置。我不得不承认我没有完全理解官方文档。

不过，到目前为止，[本教程非常有帮助。](http://ivarconr.wordpress.com/2012/01/07/custom-build-in-dojo-1-7/)

这是我的文件结构：

*   dojo-release-1.8.3-src（未修改的 dojo 1.8.3 源代码）
*   我的公司
    *   应用程序（我的源文件，包括 html、js、css 文件和编译的 dojo 文件）
    *   mycompany.profile.js
    *   包.json
*   release // 构建文件应该放在这里
*   release.profile.js

**在这里你可以看到我是如何执行构建脚本的，我认为错误发生在第 10 行**

[http://pastebin.com/embed_js.php?i=XrXiUWf2](http://pastebin.com/embed_js.php?i=XrXiUWf2)

我的重要文件的内容：

**release.profile.js**

```
 var profile = {
    basePath: "./",
    releaseDir: "./release",

    packages:[
        {
            name: "dojo",
            location: "./dojo-release-1.8.3-src/dojo"
        },
        {
            name: "dijit",
            location: "./dojo-release-1.8.3-src/dijit"
        },
        {
            name: "dojox",
            location: "./dojo-release-1.8.3-src/dojox"
        },
        {
            name: "mycompany",
            location: "./mycompany"
        }
    ]
}; 
```

**我的公司/package.json**

```
 {
"name": "app",
"description": "My Application",
"version": "0.1"
} 
```

**我的公司/mycompany.profile.js**

```
 var profile = (function(){
  copyOnly = function(filename, mid){
    var list = {
    "mycompany/dojo.profile":1,
    "mycompany/package.json":1
    };
    return (mid in list) || /(css|png|jpg|jpeg|gif|tiff)$/.test(filename);
  };

   return {

    resourceTags:{
        test: function(filename, mid){
            return false;
        },

        copyOnly: function(filename, mid){
            return copyOnly(filename, mid);
        },

        amd: function(filename, mid){
            return !copyOnly(filename, mid) && /\.js$/.test(filename);
        }
    },

    trees:[
        [".", ".", /(\/\.)|(~$)/]
    ]
  };
})(); 
```

我希望我已经为您提供了必要的信息，我们可以解决问题。到目前为止确实花了我一整天的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:19:14.407

与教程相比，您包含了一个额外的目录 - 因此需要修改一些内容。

发布/profile.js

```
{
  name: "app",
  location: "./mycompany/app"
} 
```

*   mycompany/package.json 应该移动到 mycompany/app/package.json
*   mycompany/mycompany.profile.js 应该移动到 mycompany/app/app.profile.js

在 app.profile.js 中进行以下更改

```
var list = {
  "app/app.profile.js":1,
  "app/package.json":1
}; 
```

# android - sd卡中不显示下载的图片

> ID：14985587
> 
> 赞同：0
> 
> 时间：2013-02-20T17:00:43.730
> 
> 标签：android, android-sdcard, android-image

我将 10 张图片从 web 加载到 sd 卡，我的代码在 sd 卡中创建了子文件夹并加载了所有 10 张图片，但在那之后只有第 1 次它没有加载和存储任何图像，logcat 也没有错误。这是我的代码：

```
reviewImageLink = u_image;
                 URL reviewImageURL;
                String name = reviewImageLink.substring(reviewImageLink.lastIndexOf("/") + 1);
                    try {
                        reviewImageURL = new URL(reviewImageLink);
                        if (!hasExternalStoragePublicPicture(name)) {
                            isImage = false;
                            new DownloadImageTask().execute(reviewImageURL);
                            Log.v("log_tag", "if");
                            isImage = true;
                            File sdImageMainDirectory = new File(Environment.getExternalStorageDirectory(), getResources().getString(R.string.directory));
                            sdImageMainDirectory.mkdirs();
                            file = new File(sdImageMainDirectory, name);
                            Log.v("log_tag", "Directory created");
                        }

                    } catch (MalformedURLException e) {
                        Log.v(TAG, e.toString());
                    } 
```

下载图像任务：

```
class DownloadImageTask extends AsyncTask<URL, Integer, Bitmap> {
    // This class definition states that DownloadImageTask will take String
    // parameters, publish Integer progress updates, and return a Bitmap
    protected Bitmap doInBackground(URL... paths) {
        URL url;
        try {
            url = paths[0];
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            int length = connection.getContentLength();
            InputStream is = (InputStream) url.getContent();
            byte[] imageData = new byte[length];
            int buffersize = (int) Math.ceil(length / (double) 100);
            int downloaded = 0;
            int read;
            while (downloaded < length) {
                if (length < buffersize) {
                    read = is.read(imageData, downloaded, length);
                } else if ((length - downloaded) <= buffersize) {
                    read = is.read(imageData, downloaded, length
                            - downloaded);
                } else {
                    read = is.read(imageData, downloaded, buffersize);
                }
                downloaded += read;
                publishProgress((downloaded * 100) / length);
            }
            Bitmap bitmap = BitmapFactory.decodeByteArray(imageData, 0,
                    length);
            if (bitmap != null) {
                Log.i(TAG, "Bitmap created");
            } else {
                Log.i(TAG, "Bitmap not created");
            }
            is.close();
            return bitmap;
        } catch (MalformedURLException e) {
            Log.e(TAG, "Malformed exception: " + e.toString());
        } catch (IOException e) {
            Log.e(TAG, "IOException: " + e.toString());
        } catch (Exception e) {
            Log.e(TAG, "Exception: " + e.toString());
        }
        return null;

    }

    protected void onPostExecute(Bitmap result) {
        String name = reviewImageLink.substring(reviewImageLink
                .lastIndexOf("/") + 1);
        if (result != null) {
            hasExternalStoragePublicPicture(name);
            saveToSDCard(result, name);
            isImage = true;

        } else {
            isImage = false;

        }
    }
}

public void saveToSDCard(Bitmap bitmap, String name) {
    boolean mExternalStorageAvailable = false;
    boolean mExternalStorageWriteable = false;
    String state = Environment.getExternalStorageState();
    if (Environment.MEDIA_MOUNTED.equals(state)) {
        mExternalStorageAvailable = mExternalStorageWriteable = true;
        Log.v(TAG, "SD Card is available for read and write "+ mExternalStorageAvailable + mExternalStorageWriteable);
        saveFile(bitmap, name);
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        mExternalStorageAvailable = true;
        mExternalStorageWriteable = false;
        Log.v(TAG, "SD Card is available for read "+ mExternalStorageAvailable);
    } else {
        mExternalStorageAvailable = mExternalStorageWriteable = false;
        Log.v(TAG, "Please insert a SD Card to save your Video "+ mExternalStorageAvailable + mExternalStorageWriteable);
    }
}

private void saveFile(Bitmap bitmap, String name) 
{
    String filename = name;
    ContentValues values = new ContentValues();
    File sdImageMainDirectory = new File(Environment.getExternalStorageDirectory(), getResources().getString(R.string.directory));
    sdImageMainDirectory.mkdirs();
    File outputFile = new File(sdImageMainDirectory, filename);
    values.put(MediaStore.MediaColumns.DATA, outputFile.toString());
    values.put(MediaStore.MediaColumns.TITLE, filename);
    values.put(MediaStore.MediaColumns.DATE_ADDED, System.currentTimeMillis());
    values.put(MediaStore.MediaColumns.MIME_TYPE, "output.png");
    Uri uri = this.getContentResolver().insert(android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI,values);

    try 
    {
        OutputStream outStream = this.getContentResolver().openOutputStream(uri);
        bitmap.compress(Bitmap.CompressFormat.PNG, 95, outStream);
        outStream.flush();
        outStream.close();
    }
    catch (FileNotFoundException e) 
    {
        e.printStackTrace();
    } catch (IOException e) 
    {
        e.printStackTrace();
    }
}

private boolean hasExternalStoragePublicPicture(String name) {
    File sdImageMainDirectory = new File(Environment.getExternalStorageDirectory(), getResources().getString(R.string.directory));
    File file = new File(sdImageMainDirectory, name);
    if (file != null) 
    {
        file.delete();
    }
    return file.exists();
} 
```

这是 logcat ：

```
02-20 08:49:46.999: D/dalvikvm(346): GC_FOR_MALLOC freed 5254 objects / 245320 bytes in 69ms
02-20 08:50:00.138: I/Topten(346): Bitmap created
02-20 08:50:00.148: V/Topten(346): SD Card is available for read and write truetrue
02-20 08:50:03.628: D/dalvikvm(346): GC_EXTERNAL_ALLOC freed 4548 objects / 238192 bytes in 68ms
02-20 08:50:03.728: I/Topten(346): Bitmap created
02-20 08:50:03.738: V/Topten(346): SD Card is available for read and write truetrue
02-20 08:50:04.898: D/dalvikvm(346): GC_EXTERNAL_ALLOC freed 585 objects / 85272 bytes in 107ms
02-20 08:50:05.018: I/Topten(346): Bitmap created
02-20 08:50:05.049: V/Topten(346): SD Card is available for read and write truetrue
02-20 08:50:05.528: I/Topten(346): Bitmap created
02-20 08:50:06.409: V/Topten(346): SD Card is available for read and write truetrue
02-20 08:50:10.968: I/Topten(346): Bitmap created
02-20 08:50:10.968: V/Topten(346): SD Card is available for read and write truetrue
02-20 08:50:12.368: I/Topten(346): Bitmap created
02-20 08:50:12.380: V/Topten(346): SD Card is available for read and write truetrue
02-20 08:50:15.569: D/dalvikvm(346): GC_EXTERNAL_ALLOC freed 4584 objects / 358728 bytes in 58ms
02-20 08:50:15.619: I/Topten(346): Bitmap created
02-20 08:50:15.629: V/Topten(346): SD Card is available for read and write truetrue
02-20 08:50:22.179: I/Topten(346): Bitmap created
02-20 08:50:22.189: V/Topten(346): SD Card is available for read and write truetrue 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:52:21.853

**编辑：** 您的代码似乎是正确的..我没有发现任何错误。我不确定是否是原因但是..在创建目录之前检查目录是否存在

```
if(!sdImageMainDirectory.exists()){
sdImageMainDirectory.mkdirs();
} 
```

检查一次并回复我...进一步分析...我希望这会对您有所帮助。

* * *

您还没有将文件写入外部存储您刚刚创建了一个文件...尝试将文件写入外部存储并确保您已设置权限外部存储写入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T09:12:23.340

如果我没记错的话，你的变量**reviewImageLink**是一个类变量。然后，在您的 DownloadImageTask 中，您使用**reviewImageLink**生成文件名并将您的图像保存在此文件中。

问题是：如果你调用你的函数 10 次，一个接一个，你的类变量**reviewImageLink**将被最后一次调用覆盖。这可能会导致您的应用始终只保存一张图片。

我的建议是您可以在 DownloadImageTask 中生成图像文件名。所以下载完成后，它会将图像文件保存在单独的文件中。

这是我下载图像并保存在本地的方法。我把下载和保存放在 AsyncTask 类中。我还决定了 AsyncTask 中的文件名。所以其他下载过程之间没有冲突。请检查我的**DownloadImageTask**类。

[http://jmsliu.com/1929/android-progress-dialog-example.html](http://jmsliu.com/1929/android-progress-dialog-example.html)

# oracle - Zend Framework 2 - Oracle 驱动程序和 limit() 方法

> ID：14985588
> 
> 赞同：1
> 
> 时间：2013-02-20T17:00:45.673
> 
> 标签：oracle, zend-framework2

情况如下：我正在使用 Zend Framework 2 连接到 Oracle 数据库。我已将“Pdo_Oci”指定为适配器的驱动程序。我正在使用 Select 对象来构建查询并执行它们。

一切都很顺利，直到我尝试在 Select 对象上使用 limit 方法。由于我正在与 Oracle 交谈，并且 Oracle 没有 LIMIT，因此我希望该框架能够生成一个对 Oracle 有意义并模拟 LIMIT 的 sql 字符串（我猜是使用 ROWNUM）。

但是，生成的 sql 仅具有 LIMIT 关键字，执行时当然会出错，因为我的数据库不知道如何处理它。

所以，我看到了两种可能性：

1) 我的期望是错误的，limit() 方法只是对 LIMIT 的简单包装，不能用于 Oracle 数据库。[像这样](https://stackoverflow.com/questions/216673/emulate-mysql-limit-clause-in-microsoft-sql-server-2000)的帖子似乎表明情况并非如此，但我可能读错了。

2）我做错了其他事情。我应该使用其他驱动程序吗？

**编辑：**在回答 ZF2 学生的问题，但也希望为人们提供更多的背景来帮助我：

我没有明确地形成一个连接字符串。我在 local.php 中只有必要的数据库配置：

```
return array(
    'db' => array(
                'driver' => 'Pdo_Oci',
                'database' => 'my_database_host',
                'username' => 'my_user_name',
                'password' => 'my_password'

    ),  
); 
```

在我的 global.php 中，我设置了一个适配器工厂：

```
return array(     
    'service_manager' => array(
        'factories' => array(
            'Zend\Db\Adapter\Adapter' => 'Zend\Db\Adapter\AdapterServiceFactory',
        ),
            'aliases' => array(
                    'db' => 'Zend\Db\Adapter\Adapter',
            ),            
    ),

); 
```

我在我的控制器中检索适配器，如下所示：

```
$db = $this->getServiceLocator()->get('db'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:13:12.993

我设法解决了这个问题，但这要归功于 Zend Framework 的 2.1 更新。显然在 2.0 中没有提供特定于 oci 的驱动程序。我的“pdo_oci”尝试实际上默认为通用 pdo 驱动程序。

使用 zf 2.1.，我指定我的连接是这样的：

```
'db' => array(
            'driver' => 'oci8',
            'username' => 'myUser',
            'password' => 'myPW',
            'connection' => '(DESCRIPTION =
              (ADDRESS_LIST =
               (ADDRESS = (PROTOCOL = TCP)(HOST = myHost)(PORT = myPort))
              )
             (CONNECT_DATA =
              (SERVICE_NAME = myService)
             )
            )'
) 
```

然后，2.1 框架将使用 Zend\Db\Adapter\Driver\Oci8 命名空间中的类，它们将正确使用 oci8 扩展 - 仍然需要在您的 php.ini 中启用 - 并为限制和创建正确的 sql偏移方法。

我希望这对其他人有帮助。

# javascript - jquery jqgrid treegrid 展开到特定级别

> ID：14985590
> 
> 赞同：0
> 
> 时间：2013-02-20T17:00:48.347
> 
> 标签：javascript, jquery, jqgrid

这是 jQuery jqGrid 的一个问题。我们需要一个函数来将 treegrid 扩展到某个级别。我尝试直接使用collapseRow、expandRow、collapseNode 和expandRow。但是，collapseRow/expandRow 是递归的。因此，在每一行调用这些函数真的很慢。因此，我在 jqgrid 中添加了 hideRow 和 showRow 函数。我成功地将树展开和折叠到一定程度。但是，当树展开到第 3 级时，如果您通过单击顶层的三角形来关闭树。一些扩展的行仍然存在。

这是我在jqgrid下添加的功能。

```
hideRow: function (record) {
    this.each(function(){
        $( this.rows.namedItem(record.id)).css("display","none");
    });          
},
showRow: function (record) {
    this.each(function(){
        $( this.rows.namedItem(record.id)).css("display","");
    });          
}, 
```

这就是我调用这些函数的方式。（我省略了一些上下文，但这不应该是障碍。）

```
var len = me.gjson.datastr[me.reader_root].length;
for (var i=len-1; i>-1; i--) {
    var one_node = jQuery(me.gid).getInd(i+1,true);
    one_node._id_ = one_node.id;
    if (parseInt(me.gjson.datastr[me.reader_root][i].level)<me.expand_level) {
        jQuery(me.gid).jqGrid('expandNode',one_node);
    } else {
        jQuery(me.gid).jqGrid('collapseNode',one_node);
    }
}

for (var i=0; i<len; i++) {
    var one_node = jQuery(me.gid).getInd(i+1,true);
    one_node._id_ = one_node.id;
    if (parseInt(me.gjson.datastr[me.reader_root][i].level)<me.expand_level+1) {
        jQuery(me.gid).jqGrid('showRow',one_node);
    } else {
        jQuery(me.gid).jqGrid('hideRow',one_node);
    }
} 
```

我追踪到 jqGrid 代码。它表明在 collapseNode/expandNode 中正确设置了“扩展”值。但是，当您单击顶层的三角形以折叠整个树时，“扩展”值被设置为其他值。那么，问题是可能是什么原因？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:02:24.713

我自己有一个肮脏的解决方案。我在collapseNode 和expandNode 中添加了2 行。

```
expandNode : function(rc) {
    return this.each(function(){
        if(!this.grid || !this.p.treeGrid) {return;}
        var expanded = this.p.treeReader.expanded_field,
        parent = this.p.treeReader.parent_id_field,
        loaded = this.p.treeReader.loaded,
        level = this.p.treeReader.level_field,
        lft = this.p.treeReader.left_field,
        rgt = this.p.treeReader.right_field;

        if(!rc[expanded]) {
            var id = $.jgrid.getAccessor(rc,this.p.localReader.id);
            var rc1 = $("#"+$.jgrid.jqID(id),this.grid.bDiv)[0];
            var position = this.p._index[id];
            if( $(this).jqGrid("isNodeLoaded",this.p.data[position]) ) {
                rc[expanded] = true;
                this.p.data[position][expanded] = true; // <--- add this line in jqgrid.src.js
                $("div.treeclick",rc1).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");
            } else if (!this.grid.hDiv.loading) {
                rc[expanded] = true;
                $("div.treeclick",rc1).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");
                this.p.treeANode = rc1.rowIndex;
                this.p.datatype = this.p.treedatatype;
                if(this.p.treeGridModel == 'nested') {
                    $(this).jqGrid("setGridParam",{postData:{nodeid:id,n_left:rc[lft],n_right:rc[rgt],n_level:rc[level]}});
                } else {
                    $(this).jqGrid("setGridParam",{postData:{nodeid:id,parentid:rc[parent],n_level:rc[level]}} );
                }
                $(this).trigger("reloadGrid");
                rc[loaded] = true;
                if(this.p.treeGridModel == 'nested') {
                    $(this).jqGrid("setGridParam",{postData:{nodeid:'',n_left:'',n_right:'',n_level:''}});
                } else {
                    $(this).jqGrid("setGridParam",{postData:{nodeid:'',parentid:'',n_level:''}}); 
                }
            }
        }
    });
},
collapseNode : function(rc) {
    return this.each(function(){
        if(!this.grid || !this.p.treeGrid) {return;}
        var expanded = this.p.treeReader.expanded_field;
        if(rc[expanded]) {
            rc[expanded] = false;
            var id = $.jgrid.getAccessor(rc,this.p.localReader.id);
            this.p.data[this.p._index[id]][expanded] = false; // <--- add this line in jqgrid.src.js                
            var rc1 = $("#"+$.jgrid.jqID(id),this.grid.bDiv)[0];
            $("div.treeclick",rc1).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus");
        }
    });
}, 
```

顺便说一句，不要问我为什么需要这两行。我不认识自己。这就像一个家庭主妇通过将电线与颜色匹配来修复短路。但是，她可能不知道短路是什么意思。

# sass - sass syntax error when using placeholder

> ID：14985593
> 
> 赞同：0
> 
> 时间：2013-02-20T17:00:50.987
> 
> 标签：sass

I defined a placeholder selector in a .sass file as:

```
.bold,
%bold
  font-weight: bold
  font-weight: 500

```

Then I used extend:

```
.pane-share-of-day
  @extend %bold

```

When the css is generated, I get this error message: Syntax error: Invalid CSS after ".bold,": expected selector, was "%bold"

I am using Sass version 3.2.5. Any help please.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:52:41.340

```
.bold, %bold
  font-weight: bold
  font-weight: 500

.pane-share-of-day
  @extend %bold 
```

您不能将同一块的两个选择器放在`.sass`语法的不同行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:23:03.150

尝试这个：

```
.bold, bold
  font-weight: bold
  font-weight: 500 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:27:29.133

将这些声明添加到他们自己的文件中对我来说效果很好。也许您可以重新发布更多关于它的内容？

然而，更重要的是这个声明的冗余。引入了[% 占位符选择器](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#placeholders)，因此您可以拥有一个从未真正获得输出的基类。在这里，您将这样的类定义为与另一个显式输出类相同。换句话说，如果您已经需要`.bold`，则实际上不需要添加`%bold`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T08:36:04.367

尝试这个：

```
.bold, %bold
    font-weight: bold
    font-weight: 500 
```

列出的选择器（类、ID、占位符）之间不应有回车/新行

顺便提一句。你不需要使用占位符选择器来使用@extend。你可以这样做：

```
@extend .bold 
```

# c# - Faking protected members with Moq, with ability to call them directly

> ID：14985594
> 
> 赞同：1
> 
> 时间：2013-02-20T17:00:53.963
> 
> 标签：c#, unit-testing, moq

So, is there a better way to do something like this using Moq?

```
public class Mom{

    protected virtual Love DoLove(){
        ...
    }
}

[TestFixture]
public class MomTests{

   class FakeMom:Mom{
      public new Love DoLove(){
         return base.DoLove();
      }
   }

   [Test]
   public void DoLove_Test(){
      var fakeM = new FakeMom();
      Assert(_expectedLove,fakeM.DoLove());
   }
} 
```

# c++ - C++ 中的多态性，子类型？

> ID：14985595
> 
> 赞同：2
> 
> 时间：2013-02-20T17:00:54.750
> 
> 标签：c++, reference, polymorphism

有人可以向我解释最后 5 行，为什么当 Manager 是 Employee 的子对象时会发生这种情况？

```
ostream& operator << (
   ostream &, const Employee &
);
Employee  e;
Manager   m;
Employee &eRef1 = e;  // OK!     
Employee &eRef2 = m;  // OK!  
Manager  &mRef1 = e;  // Compile error!
Manager  &mRef2 = m;  // OK!
cout << e << m;       // OK! 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:03:18.160

这正是因为您所说的：`Manager`派生自`Employee`（我想这就是您说*"`Manager`是 " 的子对象时的`Employee`意思*）。这意味着 的所有实例`Manager`也是 的实例`Employee`，但反之则不然。

在这里，您试图将对 a 的引用绑定到`Manager`type 的对象`Employee`。但是由于一个实例`Employee`不是一个实例`Manager`（反之亦然！）你会得到一个错误。

如果您想了解为什么这是正确的，请尝试考虑如果您没有收到错误会发生*什么*：

```
Employee e;
// ...
Manager& m = e; // This won't work, but let's suppose it did...
int s = m.get_size_of_managed_team(); // Huh? 
```

如果您*可以*将对 a 的引用绑定到一个实际上*不是*a`Manager`的对象，您可以为它调用实际对象不支持的函数。这将是混乱。因此，编译器根本不会出现这种情况。*`Manager`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T17:03:05.207

引用表现出多态行为。也就是说，您可以引用使用派生类初始化的基类。但是，您不能引用使用基类初始化的派生类。

由于`Employee`是 的基础`Manager`，因此您无法`Manager`使用员工初始化引用。其余的初始化都很好。

```
Reference | Initialised with | Valid?
----------|------------------|--------
Base&     | Base             | Yes
Base&     | Derived          | Yes
Derived&  | Base             | No
Derived&  | Derived          | Yes 
```

这是直观的。为什么你会允许任何`Employee`人伪装成 a `Manager`？想象一下在这样的地方工作 - 会很混乱！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:13:34.337

在这样的层次结构中，类基于其他类，这样想。

A -> B -> C -> D

在该示例中，let -> 表示 B 继承自 A 等。

如果你这样想，类可以变成比它们少的类（向左）：D 可以变成 C、B 或 A。对于 B，右侧的类是不可访问的，因为它们“更高” “在链条上，因此你不能把 B 变成 C 或 D。

在你的例子中，

员工 -> 经理

Managers can move left to Employee, so you can morph it that way, but Manager is to the RIGHT of Employee, which as said earlier, makes that transition impossible.

The reasoning is because, when you inherit, you gain all the benefits of the base class; variables, functions, all of it. When you try to go up the chain, you're adding variables, classes, etc, and you essentially have to re-create your object to do so, as it now takes more memory and will behave differently than originally. But, going down the tree, you're essentially just stripping an onion; taking off layers to reveal the spot of the onion you're after. They're all there to begin with, they're just not directly visible since they make up the smaller parts.*

# jquery - Use jQuery Quicksand for multiple lists

> ID：14985598
> 
> 赞同：2
> 
> 时间：2013-02-20T17:00:58.500
> 
> 标签：jquery, jquery-plugins, quicksand

I am attempting to use [jQuery Quicksand](http://razorjack.net/quicksand) to filter more that one list of items from a single set of option.

I have the plugin functional based off of a simple class (instead of the id) as the documentation would suggest. Here is my JS code:

```
$(function() {

// get the action filter option item on page load
var $filterType = $('#filterOptions li.active a').attr('class');

// get and assign the ourHolder element to the $holder varible for use later
var $holder = $('ul.articles');

// clone all items within the pre-assigned $holder element
var $data = $holder.clone()
console.log($data);

// attempt to call Quicksand when a filter option item is clicked
$('#filterOptions li a').click(function(e) {
  // reset the active class on all the buttons
  $('#filterOptions li').removeClass('active');

  // assign the class of the clicked filter option element to our $filterType variable
  var $filterType = $(this).attr('class');
  $(this).parent().addClass('active');

  var $filteredData = $data.find('li[data-type=' + $filterType + ']');

  // call quicksand and assign transition parameters
  $holder.quicksand($filteredData, {
    duration: 800,
    easing: 'easeInOutQuad'
  });
  return false;
});

}); 
```

However, **when clicking one of the options, both lists are replaced with the results from the first list.** You can see this occurring via this JSFiddle: [http://jsfiddle.net/Dhk9T/](http://jsfiddle.net/Dhk9T/)

I presume that I need to edit the `.clone()` section, perhaps with `.each()`, buy I can't seem to get this working. Any suggestions!?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T12:44:28.720

尝试给 ul-list 一个进一步的类，例如

```
<ul class="articles one">
<ul class="articles two"> 
```

然后在您的 JS 代码中获取两个数据集，例如

```
var $holderOne = $('ul.articles.one');
var $holderTwo = $('ul.articles.two'); 
```

并克隆两者，以在正确的数据集中找到正确的项目。

# android - 如何保存图像以便稍后在使用 Android 的另一个活动中使用它？

> ID：14985599
> 
> 赞同：-1
> 
> 时间：2013-02-20T17:01:00.970
> 
> 标签：android, bitmap, android-camera

我有一个程序可以拍照然后将其存储在图库中。这是代码：

```
public void onPictureTaken(byte[] data, Camera camera) {

    try {
        SimpleDateFormat df = new SimpleDateFormat("yyyy_MM_dd_hh_mm_ss");
        String name = "foto_" + df.format(new Date());
        ContentValues werte = new ContentValues();
        werte.put(MediaColumns.TITLE, name);
        werte.put(ImageColumns.DESCRIPTION, "Aufgenommen mit CameraDemo");
        Uri uri = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI,
                werte);

        OutputStream ausgabe = getContentResolver().openOutputStream(uri);
        ausgabe.write(data);
        ausgabe.close();
        camera.startPreview();

    } catch (Exception ex) {
        Log.d(TAG, ex.getMessage());
    }

} 
```

现在我怎样才能在另一个活动中调用这个图像，以便我可以在那里使用它？我听说你可以将它保存在位图中，但我不明白如何。

我知道我缺少一些基本的编程技能，但这真的会帮助我。如果您需要更多代码，只需将其写在评论中。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:13:43.850

我不太了解您的代码，但您应该使用 Intent.putExtras 方法将字节传递给新活动（http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String， %20byte[]%29) 或简单地将图像保存到 sdcard 以备后用

# php - mySQL: Sub SELECT statement within UPDATE command

> ID：14985601
> 
> 赞同：1
> 
> 时间：2013-02-20T17:01:11.150
> 
> 标签：php, mysql, select, sql-update, subquery

I'm trying to update a column in `visitors`. I'm also using a sub select statement for the `SET` part of the update query.

```
UPDATE
    visitors AS v
SET
    v.IsFirstVisit = (SELECT COUNT(*) FROM visitors AS v2 WHERE ..... LIMIT 1) 
```

However, mySQL returns this error message

```
#1093 - You can't specify target table 'v' for update in FROM clause 
```

I have no clue why I can't access the 'v' object within the inner select statement. I also don't want to use multiple statements as this would cause a performance issue.

**Question:** How can I use the 'v' object within the inner select?

Update: This is the entire query

```
UPDATE
    visitors AS v
SET
    IsFirstVisit = (SELECT Count(*) FROM visitors AS v2 WHERE v2.VisitorId < v.VisitorId AND v2.IP = v.IP AND v2.DateTime > v.DateTime [TODO:SUBTRACT30MINUTES] LIMIT 1)
WHERE
    VisitorId = "991" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:03:02.717

i guess you looking for this

```
 UPDATE
    visitors 
 SET
    IsFirstVisit = (SELECT COUNT(*) FROM visitors  WHERE ..... LIMIT 1) 
```

edit:

try this

```
 UPDATE
       visitors
    SET
         IsFirstVisit = (SELECT Count(*) FROM visitors v2 inner join visitors v 
         ON v.VisitorId = v2.VisitorId WHERE v2.IP = v.IP AND v2.DateTime > v.DateTime AND v2.VisitorId < v.VisitorId [TODO:SUBTRACT30MINUTES] LIMIT 1)
    WHERE
    VisitorId = "991" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:10:35.743

`inner join`in`UPDATE`语句不会是一个坏主意。

```
UPDATE
    visitors inner join (SELECT COUNT(*) as test FROM visitors v) as v
 SET
    isfistvisit = v.test; 
```

另一个解决方法，我不是它的忠实粉丝。

```
update visitors
   set isfistvisit = (
      select count(*) from (
         select count(*) from visitors
      ) as x
      ) 
```

[演示](http://sqlfiddle.com/#!2/393a3)

# wget - Cannot download using wget (wget retry "unlimitedly")

> ID：14985603
> 
> 赞同：0
> 
> 时间：2013-02-20T17:01:14.837
> 
> 标签：wget, web-crawler

I've to crawl website [http://docbao.com.vn/](http://docbao.com.vn/) using wget, but wget always message

HTTP request sent, awaiting response... No data received.
Retrying.

For example, I crawled all webpages in a category [http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec](http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec) , then the result was

```
congnh@congnh-pc:~/Source/datasection/congnh-crawler/sh$ wget "http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec" -O -
--2013-02-20 23:53:16--  http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec
Resolving docbao.com.vn (docbao.com.vn)... 123.30.51.174
Connecting to docbao.com.vn (docbao.com.vn)|123.30.51.174|:80... connected.
HTTP request sent, awaiting response... No data received.
Retrying.

--2013-02-20 23:53:17--  (try: 2)  http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec
Connecting to docbao.com.vn (docbao.com.vn)|123.30.51.174|:80... connected.
HTTP request sent, awaiting response... No data received.
Retrying.

--2013-02-20 23:53:19--  (try: 3)  http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec
Connecting to docbao.com.vn (docbao.com.vn)|123.30.51.174|:80... connected.
HTTP request sent, awaiting response... No data received.
Retrying.

--2013-02-20 23:53:22--  (try: 4)  http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec
Connecting to docbao.com.vn (docbao.com.vn)|123.30.51.174|:80... connected.
HTTP request sent, awaiting response... No data received.
Retrying.

--2013-02-20 23:53:27--  (try: 5)  http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec
Connecting to docbao.com.vn (docbao.com.vn)|123.30.51.174|:80... connected.
HTTP request sent, awaiting response... No data received.
Retrying.

--2013-02-20 23:53:32--  (try: 6)  http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec
Connecting to docbao.com.vn (docbao.com.vn)|123.30.51.174|:80... connected.
HTTP request sent, awaiting response... No data received.
Retrying.

--2013-02-20 23:53:38--  (try: 7)  http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec
Connecting to docbao.com.vn (docbao.com.vn)|123.30.51.174|:80... connected.
HTTP request sent, awaiting response... No data received.
Retrying.

--2013-02-20 23:53:45--  (try: 8)  http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec
Connecting to docbao.com.vn (docbao.com.vn)|123.30.51.174|:80... connected.
HTTP request sent, awaiting response... No data received.
Retrying.

--2013-02-20 23:53:53--  (try: 9)  http://docbao.com.vn/chuyenmuc/muc-1/Quoc_te.dec
Connecting to docbao.com.vn (docbao.com.vn)|123.30.51.174|:80... connected.
HTTP request sent, awaiting response... No data received.
Retrying.
... 
```

Why wget retry "unlimitedly"? or what's the problem?
Thanks
Cong

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:13:54.170

很抱歉说的很明显，但是：`wget`重试，因为它没有收到任何数据。它发送 HTTP 标头，然后远程主机立即关闭连接。我只能猜测这种非标准行为是由于服务器端的错误配置，可能是故意的。

经过一番探索，我发现一旦您发出信号，您可以处理 gzip 编码的响应，内容*就会被提供。*您可以通过添加`--header="accept-encoding: gzip"`到您的`wget`命令来做到这一点。这对于使用 进行爬网也是有问题的`wget`，因为它不能递归到 gzip 压缩的内容中。您将需要编写一个脚本来处理这种情况，或者使用其他可以处理此类内容的工具。

附注：请注意，并非所有网站都允许抓取其内容。请在这样做之前检查他们的服务条款。

# mysql - 我应该创建另一个表吗？

> ID：14985609
> 
> 赞同：0
> 
> 时间：2013-02-20T17:01:37.250
> 
> 标签：mysql, database, database-design

我有一个具有这种结构的表：

![在此处输入图像描述](../Images/33d49913cb875d9b588b751e7a59aac7.png)

**col1**将是“product_name”和**col2** “product_name_abbrevified”。

忽略*id*列我有这个数据：

```
1 1 43
1 1 5
1 1 6
1 1 7
1 1 8
2 2 9
2 2 10
2 2 34
2 2 37
2 2 38
2 2 39
2 2 50 
```

我可以做另一个表并放在那里*col1*和*col2*列，因为它们是重复的。像这样的东西：

![在此处输入图像描述](../Images/4366eedefb73ebcc6722aefc1a4d1518.png)

但是**我确定**它不会重复超过15次，所以……值得吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:15:00.623

是的，您应该将它们拆分为单独的表格 - 这是规范化到[Second Normal Form](http://en.wikipedia.org/wiki/Second_normal_form)的一个示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:17:26.340

你现在确定了，但是你什么时候会在一年后延长你的申请呢？拆分表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:14:26.370

仅使用一个带有 ID 的表，两`VARCHAR`列用于名称和缩写，以及`NUMBER`用于价格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:21:04.260

规范化有利于避免重复数据。您的模型很小，数据很小，您不必担心并留下一个实体（表）。

在实际项目中，有时我们会正常化，然后意识到我们搞砸了。在重复数据和易于理解模型和查询之间取得平衡总是好的。更不用说在使用数据仓库数据库时......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T17:27:33.347

这是数据库设计中一个非常基础的问题，答案是响亮的“两张表”！以下是其中的一些原因：

1.  如果您有一个表，那么有人可能会错误地输入带有产品名称“1”和缩写产品名称“2”的新行 阻止这种情况的唯一方法是添加规则和约束 - 远比拆分表复杂得多首先。

2.  查看数据库模式应该可以有意义地告诉您它代表什么。如果事实是您不能拥有产品名称为“1”且产品名称缩写为“2”的产品，那么通过查看表结构应该清楚这一点。一张表告诉您相反的情况，即 UNTRUE。数据库应该说实话 - 否则会产生误导。

3.  如果您以外的任何人查看或针对此数据库进行开发，他们可能会因这种偏离此类基本设计规则的情况而感到困惑和误导。或者更糟的是，如果他们认为它没有经过精心设计，因此不小心自己的工作，可能会导致破窗综合症。

该原则被称为“规范化”，它是关系数据库的核心，而不仅仅是一堆数据：)

# batch-file - Batch file: sorting folders and files alphabetically

> ID：14985614
> 
> 赞同：3
> 
> 时间：2013-02-20T17:02:05.880
> 
> 标签：batch-file, alphabetical-sort

The batch file below recursively echos files and folders while adding some simple formatting, such as indenting to show the recursion depth, adding "/ " before folder names, "*" before certain files, and skipping folders named "Archive". It works great except that files and folders are sorted randomly, rather than alphabetically. How could this be changed to sort both files and folders alphabetically?

```
@echo off
setlocal disableDelayedExpansion
pushd %1
set "tab=   "
set "indent="
call :run
exit /b

:run

REM echo the root folder name
for %%F in (.) do echo %%~fF
echo ------------------------------------------------------------------

set "folderBullet=\"
set "fileBullet=*"

:listFolder
setlocal

REM echo the files in the folder
for %%F in (*.txt *.pdf *.doc* *.xls*) do echo %indent%%fileBullet% %%F  -  %%~tF

REM loop through the folders
for /d %%F in (*) do (

  REM skip "Archive" folder
  if /i not "%%F"=="Archive" (

  REM if in "Issued" folder change the file bullet
  if /i "%%F"=="Issued" set "fileBullet= "

  echo %indent%%folderBullet% %%F
  pushd "%%F"
  set "indent=%indent%%tab%"
  call :listFolder

  REM if leaving "Issued folder change fileBullet
  if /i "%%F"=="Issued" set "fileBullet=*"

  popd
))
exit /b 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T19:26:11.850

需要很少的改变。将 FOR 循环转换为 FOR /F 运行排序的 DIR 命令。该`/A-D`选项仅列出文件，仅`/AD`列出目录。

此版本按名称对文件进行排序

```
@echo off
setlocal disableDelayedExpansion
pushd %1
set "tab=   "
set "indent="
call :run
exit /b

:run

REM echo the root folder name
for %%F in (.) do echo %%~fF
echo ------------------------------------------------------------------

set "folderBullet=\"
set "fileBullet=*"

:listFolder
setlocal

REM echo the files in the folder
for /f "eol=: delims=" %%F in (
  'dir /b /a-d /one *.txt *.pdf *.doc* *.xls* 2^>nul'
) do echo %indent%%fileBullet% %%F  -  %%~tF

REM loop through the folders
for /f "eol=: delims=" %%F in ('dir /b /ad /one 2^>nul') do (

  REM skip "Archive" folder
  if /i not "%%F"=="Archive" (

  REM if in "Issued" folder change the file bullet
  if /i "%%F"=="Issued" set "fileBullet= "

  echo %indent%%folderBullet% %%F
  pushd "%%F"
  set "indent=%indent%%tab%"
  call :listFolder

  REM if leaving "Issued folder change fileBullet
  if /i "%%F"=="Issued" set "fileBullet=*"

  popd
))
exit /b 
```

要先按扩展名排序，然后按名称排序，只需更改`/ONE`为`/OEN`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T19:09:54.693

尝试改变你的`for /d`循环

```
for /d %%F in (*) do 
```

至

```
for /f "delims=" %%F in ('dir /b /o:n *.') do 
```

看看这是否有所作为。实际上，按名称排序是 的默认行为`dir`，因此您可能会侥幸逃脱

```
for /f "delims=" %%F in ('dir /b *.') do 
```

如果您的某些目录名称中有圆点，则需要稍作更改。

```
for /f "delims=" %%F in ('dir /b') do (
    rem Is this a directory?
    if exist "%%F\" (
        rem do your worst....
    )
) 
```

# jquery - 同一页面上有多个 jQuery 插件实例？

> ID：14985623
> 
> 赞同：4
> 
> 时间：2013-02-20T17:02:34.877
> 
> 标签：jquery, jquery-plugins

我看过很多不同的 jQuery 插件样板，并阅读了很多不同的 jQuery 插件创作文章，包括官方的一篇。但是，从根本上说，我似乎仍然缺少一些东西！

我使用了我在其他地方看到的混合代码和[jQuery 的官方创作指南](http://docs.jquery.com/Plugins/Authoring)。

从代码中可以看出，我在`return this.each(function() { });`. 这包括我的私人功能。我假设这意味着对于每个`.pluginName();`调用，代码都将运行并绑定到该实例。例如，我在`randID`每个元素 ID 的末尾添加一个，这样如果创建了多个实例，则该实例可以引用正确的元素。

**我的问题是，当我在同一页面上有两个实例时，第二个实例的函数（如`displayAvailableItems()`）正在使用第一个实例`randID`。**

我假设有两件事是错误的：函数在错误的位置，randID 是识别元素的不好方法。如果我移动`displayAvailableItems()`到`retun this.each(function() { });`, 则`availableItem`变量不再可用。

这是我的代码的缩写版本：（pastebin）[http://tny.cz/6d3d52a8](http://tny.cz/6d3d52a8)

```
$.pluginName = {
     id: 'PluginName'
    ,version: '1.0'
,defaults: { // default settings
    foo: 'bar'
}
};

(function($) {
    //Attach this new method to jQuery
    $.fn.extend({ 

            pluginName: function(params) {
            //Merge default and user parameters
                    var params =  $.extend($.pluginName.defaults, params)
            ,otherGeneralVars = 'example'
        ;

        return this.each(function() {       
            var $t = $(this);

            //Generate a random ID to attach to the elements, so we can have endless (up to 50k) quantities of the plugin on the page
                            var randID = 1 + Math.floor(Math.random() * 50000);
                            //Make sure the randID hasn't been previously used
                            while ($.inArray(randID, usedRandIDs) > -1)
                            {
                                    randID = 1 + Math.floor(Math.random() * 50000);
                            }
                            usedRandIDs.push(randID);
                            randID = '_PluginName' + randID;

            /*
                                    RUN INITIALIZATION SETTINGS
                            */
                            var availableItemsContainerID = 'availableItemsContainer' + randID
                ,tagSearchContainerID = 'tagSearchContainer' + randID
                ,tagSearchID = 'tagSearch' + randID
                ,availableItemsID = 'availableItems' + randID
                ,selectedItemsContainerID = 'selectedItemsContainer' + randID
                ,selectedItemsID = 'selectedItems' + randID
                ,selectedValuesID = 'selectedValuesInputName' + randID
            ;

            //Build element structure
                            $t.append('<div id="' + availableItemsContainerID + '">' +
                                                            '<div id="' + tagSearchContainerID + '">' +
                                                                    '<input id="' + tagSearchID + '" value="' + params.searchDefaultText + '" />' +
                                                            '</div>' +
                                                            '<div id="' + availableItemsID + '"></div>' +
                                                    '</div>' +
                                                    '<div id="' + selectedItemsContainerID + '">' +
                                                            '<div id="' + selectedValuesID + '"></div>' + 
                                                            '<div id="' + selectedItemsID + '"></div>' +
                                                    '</div>');      

            //Show the list of available items
                            displayAvailableItems();

            $('#' + availableItemsContainerID).css({
                              'width': params.availableItemsContainerWidth + params.unitOfMeasurement,
                              'height': params.availableItemsContainerHeight + params.unitOfMeasurement
                            });
                            $('#' + selectedItemsContainerID + ', #' + selectedItemsID).css({
                              'width': params.selectedItemsContainerWidth + params.unitOfMeasurement,
                              'height': params.selectedItemsContainerHeight + params.unitOfMeasurement
                            });

            function displayAvailableItems() {
                                    //Clear out the available items
                                    $("#" + availableItemsID).html('');

                                    //Do other stuff
                            }
        });
               }
       })
        })(jQuery); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T20:29:02.133

首先，您需要进入您的 this.each，但是由于使用参数名称作为变量名称`var params`，您将遇到一个变量提升问题*（不确定这是否真的发生了，但看起来就是这样）*导致参数未定义。要解决这个问题，只需将 this.each 中的参数重命名为其他名称。例子：

```
$.fn.extend({

    pluginName: function (params) {
        //Merge default and user parameters
        var otherGeneralVars = 'example';

        return this.each(function () {
            var $t = $(this), opts = $.extend({},$.pluginName.defaults, params);

            $t.text(opts.foo + uniqueId);
        });
    }
}) 
```

[http://jsfiddle.net/M99EY/1/](http://jsfiddle.net/M99EY/1/)

# google-apps-script - Importing csv to Google Spreadsheet

> ID：14985626
> 
> 赞同：0
> 
> 时间：2013-02-20T17:02:54.363
> 
> 标签：google-apps-script, google-sheets

I have to import a csv file in Google spreadsheet, from where the records have to push to Cloud SQL. I have following question:

1.  Google Spreadsheet limit is "Number of cells: 400,000" . My csv may have data larger than the limit.What could be the alternate to load the complete csv data to spreadsheet?
2.  I get Exceeded Maximum Execution time error when trying to import CSV to Google spreadsheet(referred the tutorial provided by Google).How the code provided can be improved to avoid the error.

# semantic-web - Modeling geographic co-ordinates in OWL

> ID：14985627
> 
> 赞同：0
> 
> 时间：2013-02-20T17:03:01.243
> 
> 标签：semantic-web, owl

I am developing an ontology and need to model geographic co-ordinates (lat/long) as part of an address of a person. Geo Names was the obvious choice, but it's too large and verbose for my use, which led me to W3C Geo vocabulary ([http://www.w3.org/2003/01/geo/](http://www.w3.org/2003/01/geo/)).

It has a Point class, and lat/long/alt properties which should suffice my need. However, I am not able to find it, let alone set it as properties in Protege. Further investigation reveaved that “Point” is an rdfs:Class and "lat/long/alt" are rdf:Properties. I am guessing this is the reason why it is not showing up in Protege.

Is there a way to use these properties in an OWL ontology? Or are there other vocabularies that would let me specify geographic Points, Lines etc?

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:21:20.753

假设您正在尝试打开页面[http://www.w3.org/2003/01/geo/上的文件](http://www.w3.org/2003/01/geo/)[wgs84_pos](http://www.w3.org/2003/01/geo/wgs84_pos#)，那么这些属性似乎使用了 Protege 4.1 无法理解的格式（纯 RDF）。查看第 143 行，您将看到：

```
<rdf:Property rdf:about="http://www.w3.org/2003/01/geo/wgs84_pos#lat">
  <rdfs:domain rdf:resource="http://www.w3.org/2003/01/geo/wgs84_pos#SpatialThing" />
  <rdfs:label>latitude</rdfs:label>
 <rdfs:comment>The WGS84 latitude of a SpatialThing (decimal degrees).</rdfs:comment>
</rdf:Property> 
```

`rdf:Property`不在 OWL 的范围内（太通用了，在 OWL 中属性要么是对象属性要么是数据属性），因此 Protege 4.1 不显示。

我建议您按照网页上的文档并查看 RDF 文件从头开始重新创建本体。只需添加您需要的属性（应该很快），保存，打开保存的文件并与您下载的文件进行比较以查看差异。

使用 Protege 制作的本体的大致结构如下：

```
<?xml version="1.0"?>
  <!DOCTYPE rdf:RDF [
  <!ENTITY owl "http://www.w3.org/2002/07/owl#" >
  <!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
  <!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" >
  <!ENTITY wgs84_pos "http://www.w3.org/2003/01/geo/wgs84_pos#" >
  <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" >
]>
<rdf:RDF xmlns="http://www.w3.org/2003/01/geo/wgs84_pos#"
 xml:base="http://www.w3.org/2003/01/geo/wgs84_pos"
 xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
 xmlns:wgs84_pos="http://www.w3.org/2003/01/geo/wgs84_pos#"
 xmlns:owl="http://www.w3.org/2002/07/owl#"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<owl:Ontology rdf:about="http://www.w3.org/2003/01/geo/wgs84_pos#"/>

<owl:DatatypeProperty rdf:about="&wgs84_pos;lat">
    <rdfs:domain rdf:resource="&wgs84_pos;SpatialThing"/>
</owl:DatatypeProperty>

<owl:DatatypeProperty rdf:about="&wgs84_pos;long">
    <rdfs:domain rdf:resource="&wgs84_pos;SpatialThing"/>
</owl:DatatypeProperty>

<owl:Class rdf:about="&wgs84_pos;Point">
    <rdfs:subClassOf rdf:resource="&wgs84_pos;SpatialThing"/>
</owl:Class>

<owl:Class rdf:about="&wgs84_pos;SpatialThing"/> 
```

# flash - RangeError：错误 #3609：流 0 没有足够的顶点

> ID：14985637
> 
> 赞同：2
> 
> 时间：2013-02-20T17:03:16.030
> 
> 标签：flash, stage3d

我正在使用 stage3D 开发一个 3D 旋转立方体。

我可以在 Firefox 中完美地看到结果，但在 Chrome 中我什么也看不到。当我设置：

```
context.enableErrorChecking = true; 
```

我从浏览器收到此回调

```
RangeError: Error #3609: Stream 0 does not have enough vertices 
```

顶点的数量虽然很好。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:30:55.763

这意味着您的索引缓冲区具有顶点缓冲区中不存在的顶点的索引。即使您不使用该索引进行绘制，您也会收到此错误。这很烦人，看起来像 Stage3D 错误。

# javascript - 网络浏览器中是否有 cookie 的“标准”事件？

> ID：14985640
> 
> 赞同：1
> 
> 时间：2013-02-20T17:03:22.747
> 
> 标签：javascript, cookies

有没有办法在不使用间隔的情况下知道 cookie 何时更改，也许是一些标准事件？

*除此之外*，这是针对单页应用程序，在任何给定时间进行各种 ajax 调用可能会增加 cookie 过期时间。

# java - Twitter OAuth getRequestToken 失败

> ID：14985647
> 
> 赞同：2
> 
> 时间：2013-02-20T17:03:50.133
> 
> 标签：java, twitter, twitter-oauth

今天，我的 Twitter OAuth 框架开始失败，任何想法下面的意思是什么？当我尝试使用“ [http://twitter.com/oauth/request_token](http://twitter.com/oauth/request_token) ”获取请求令牌时会发生这种情况......有什么想法吗？

**堆：**

```
 2013-02-20 14:24:47,954 [ajp-8009-67] WARN  org.apache.commons.httpclient.HttpMethodBase - Cookie rejected: "$Version=0; k=206.220.219.228.a1d883477ac32b42; $Path=/; $Domain=.com". Domain attribute ".com" violates RFC 2109: domain must contain an embedded dot
    2013-02-20 14:24:47,954 [ajp-8009-67] ERROR com.web.helper.TwitterDelegate - Fire Eagle authentication failure. Please try again later or contact customer service.
    net.oauth.OAuthProblemException: HTTP/1.1 301 Moved Permanently
            at net.oauth.client.OAuthResponseMessage.toOAuthProblemException(OAuthResponseMessage.java:83)
            at net.oauth.client.OAuthClient.invoke(OAuthClient.java:306)
            at net.oauth.client.OAuthClient.invoke(OAuthClient.java:260)
            at net.oauth.client.OAuthClient.getAccessToken(OAuthClient.java:229)
            at com.api.service.impl.GenericOAuthServiceImpl.getAccessToken(GenericOAuthServiceImpl.java:117)
            at com.api.service.impl.SocialNetworkingServiceImpl.getAuthTokens(SocialNetworkingServiceImpl.java:81)
            at sun.reflect.GeneratedMethodAccessor12755.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
            at java.lang.reflect.Method.invoke(Method.java:616)
            at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)
            at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
            at $Proxy150.getAuthTokens(Unknown Source)
            at com.web.helper.OAuthDelegate.retrieveAuthTokens(OAuthDelegate.java:82)
            at com.web.action.SocialNetwork.setCallbackForm(SocialNetwork.java:215)
            at sun.reflect.GeneratedMethodAccessor1981.invoke(Unknown Source)
            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
            at java.lang.reflect.Method.invoke(Method.java:616)
            at javax.el.BeanELResolver.setValue(BeanELResolver.java:108)
            at javax.el.CompositeELResolver.setValue(CompositeELResolver.java:69)
            at com.sun.faces.el.FacesCompositeELResolver.setValue(FacesCompositeELResolver.java:100)
            at org.apache.el.parser.AstValue.setValue(AstValue.java:143)
            at org.apache.el.ValueExpressionImpl.setValue(ValueExpressionImpl.java:249)
            at com.sun.facelets.el.TagValueExpression.setValue(TagValueExpression.java:93)
            at javax.faces.component.UIComponent.processEvent(UIComponent.java:2182)
            at javax.faces.component.UIViewRoot$1.visit(UIViewRoot.java:873)
            at com.sun.faces.component.visit.FullVisitContext.invokeVisitCallback(FullVisitContext.java:147)
            at javax.faces.component.UIComponent.visitTree(UIComponent.java:1443)
            at javax.faces.component.UIForm.visitTree(UIForm.java:333)
            at javax.faces.component.UIComponent.visitTree(UIComponent.java:1454)
            at javax.faces.component.UIViewRoot.processRestoreState(UIViewRoot.java:868)
            at org.ajax4jsf.component.AjaxViewRoot.processRestoreState(AjaxViewRoot.java:761)
            at com.sun.faces.application.StateManagerImpl.restoreView(StateManagerImpl.java:197)
            at javax.faces.application.StateManagerWrapper.restoreView(StateManagerWrapper.java:178)
            at com.sun.faces.application.view.ViewHandlingStrategy.restoreView(ViewHandlingStrategy.java:131)
            at com.sun.faces.application.view.MultiViewHandler.restoreView(MultiViewHandler.java:143)
            at com.sun.facelets.FaceletViewHandler.restoreView(FaceletViewHandler.java:316)
            at com.sun.facelets.FaceletViewHandler.restoreView(FaceletViewHandler.java:316)
            at org.ajax4jsf.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:107)
            at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:199)
            at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
            at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:110)
            at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
            at javax.faces.webapp.FacesServlet.service(FacesServlet.java:310)
            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
            at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
            at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
            at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
            at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:312)
            at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
            at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)
            at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)
            at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)
            at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)
            at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:146)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)
            at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)
            at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)
            at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)
            at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)
            at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324)
            at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:174)
            at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
            at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
            at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
            at org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:427)
            at org.apache.coyote.ajp.AjpAprProtocol$AjpConnectionHandler.process(AjpAprProtocol.java:384)
            at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1556)
            at java.lang.Thread.run(Thread.java:636)
    2013-02-20 14:24:47,976 [ajp-8009-67] INFO  com.api.service.impl.GenericOAuthServiceImpl - GETTING REQ TOKEN, CALLBACK URLhttps://login.findmecom.com/com-main-web/mobile/landing.html
    2013-02-20 14:24:48,014 [ajp-8009-67] WARN  org.apache.commons.httpclient.HttpMethodBase - Cookie rejected: "$Version=0; k=206.220.219.228.75dbd59bf0bb469e; $Path=/; $Domain=.com". Domain attribute ".com" violates RFC 2109: domain must contain an embedded dot 
```

**Twitter 在异常中返回以下内容：**

```
"HTTP request => GET /oauth/request_token?oauth_callback=http%3A%2F%2Flocalhost%3A8080%2Fmy-main-web%2Fmobile%2Flanding.html&oauth_consumer_key=UuuAUY41K974e3DDTvdN2Q&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1361376590&oauth_nonce=414154092249267&oauth_version=1.0&oauth_signature=DEQzMRl40KPqo9%2FVD5XG3R5v7EI%3D
User-Agent: Jakarta Commons-HttpClient/3.1
Host: twitter.com

"
"HTTP status => 301"

"Location => https://twitter.com/oauth/request_token?oauth_callback=http%3A%2F%2Flocalhost%3A8080%2Fmy-main-web%2Fmobile%2Flanding.html&oauth_consumer_key=UuuAUY41K974e3DDTvdN2Q&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1361376590&oauth_nonce=414154092249267&oauth_version=1.0&oauth_signature=DEQzMRl40KPqo9%2FVD5XG3R5v7EI%3D"

"HTTP response => HTTP/1.1 301 Moved Permanently
Location: https://twitter.com/oauth/request_token?oauth_callback=http%3A%2F%2Flocalhost%3A8080%2Fmy-main-web%2Fmobile%2Flanding.html&oauth_consumer_key=UuuAUY41K974e3DDTvdN2Q&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1361376590&oauth_nonce=414154092249267&oauth_version=1.0&oauth_signature=DEQzMRl40KPqo9%2FVD5XG3R5v7EI%3D
Content-Length: 0
Set-Cookie: k=206.220.220.206.dbf3e9c4278a09e7; path=/; expires=Wed, 27-Feb-2013 16:09:52 UTC; domain=.com; httponly
Date: Wed, 20 Feb 2013 16:09:52 UTC
Server: tfe

"

"URL => http://twitter.com/oauth/request_token?oauth_callback=http%3A%2F%2Flocalhost%3A8080%2Fmy-main-web%2Fmobile%2Flanding.html&oauth_consumer_key=UuuAUY41K974e3DDTvdN2Q&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1361376590&oauth_nonce=414154092249267&oauth_version=1.0&oauth_signature=DEQzMRl40KPqo9%2FVD5XG3R5v7EI%3D" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:27:06.137

问题是[http://api.twitter.com/oauth/request_token](http://api.twitter.com/oauth/request_token) 现在是正确的 url 而不是[http://twitter.com/oauth/request_token](http://twitter.com/oauth/request_token)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:50:29.700

尝试发出安全请求。而不是[http://twitter.com](http://twitter.com)，请始终使用[https://twitter.com](https://twitter.com)。它对我有用。我希望它有所帮助。

# android - 如何在android中更快地从收件箱中删除所有邮件？

> ID：14985650
> 
> 赞同：0
> 
> 时间：2013-02-20T17:04:07.490
> 
> 标签：android, sms, inbox

我正在开发一个 android 应用程序，我需要在其中删除收件箱中的所有消息。我按照获取单个id并删除相应消息的方法。当收件箱中的邮件较少时，这可以正常工作。如果消息数量更多，则需要很长时间。选择“全部删除”选项时，内置消息应用程序和 GoSMS 如何在几秒钟内删除甚至 4000 多条消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:12:29.077

我会假设所有项目都从适配器中删除，并放在单独的线程中进行删除。对用户来说，所有项目都不再存在，但后台线程仍将运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T18:37:02.997

这里的步骤：

使用“短信备份和恢复”应用程序将所有短信备份到您的 externalCard

您的设备必须植根

打开根资源管理器，转到

/data/data/com.android.providers.telephony/databeses/mmssms.db

如果你愿意，你也可以将当前的“mmssms.db”复制到externalCard进行备份删除当前的“mmssms.db”文件

重启手机

现在您所有的短信都会消失，如果您只想恢复一些短信线程，您可以使用“短信备份和恢复”应用程序从已经制作的备份短信数据中恢复它们

希望这有帮助

# java - 检查列表是否包含所有空值

> ID：14985652
> 
> 赞同：1
> 
> 时间：2013-02-20T17:04:14.860
> 
> 标签：java, jstl

我有一个包含属性的 bean 列表。我正在构建 2 个子列表以查看其中的内容并传递到页面。

我需要检查两个子列表中的所有值是否都是空值

爪哇：

```
beans = dao.getResourceExpended(filter);
List<BigDecimal> scheduledBeans = new ArrayList<BigDecimal>();
List<BigDecimal> realBeans = new ArrayList<BigDecimal>();
for (ResourceBean f : beans)
{
    scheduledBeans.add(f.getScheduledResource());
    realBeans.add(f.getRealResource());
}

request.setAttribute("scheduledBeans", scheduledBeans);
request.setAttribute("realBeans", realBeans); 
```

JSTL：

```
<c:choose>
    <c:when test="${empty scheduledBeans}">
        alert("scheduledBeans Empty");
    </c:when>
    <c:when test="${empty realBeans}">
        alert("realBeans Empty");
    </c:when>
</c:choose> 
```

上面的“选择”不起作用，因为值返回为：

```
alert("scheduledBeans =" +  scheduledBeans);
alert("realBeans =" +  realBeans); 
```

*   `scheduledBeans = [null, null, null]`
*   `realBeans = [null, null, null]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:22:12.610

只是不要将`null`值添加到列表中。

代替

```
scheduledBeans.add(f.getScheduledResource());
realBeans.add(f.getRealResource()); 
```

经过

```
if (f.getScheduledResource() != null) {
    gescheduledBeans.add(f.getScheduledResource());
}
if (f.getRealResource() != null) {
    realBeans.add(f.getRealResource());
} 
```

如果它们都是`null`，则列表保持为空，然后`empty`测试将通过。

# collections - 如何在 ZF2 中的表单集合上使用 setAttribute？

> ID：14985653
> 
> 赞同：2
> 
> 时间：2013-02-20T17:04:18.323
> 
> 标签：collections, zend-framework2

我还没有找到为 Zend Framework 2 表单集合设置字段属性的任何文档。我可以像这样设置单个输入字段的值：

`$form->get('title')->setAttribute('value', $value);`

我不知道如何设置集合的值。

`$form->get('sample_collection')`返回一个 Zend\Form\Element\Collection 对象

似乎我需要更深入一层并选择特定的字段，以便我可以使用`->setAttribute`它。

提前感谢您帮助解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T04:27:01.323

我遇到了一些真正的麻烦，我实际上可以访问集合中的字段集的唯一方法是使用以下方法。（如果集合有多个字段集，则必须在 foreach 循环内添加 if 语句才能获得所需的字段集。）

```
$array = array('keys'=>'values');
$collection = $form->get('name_of_collection');
foreach ($collection as $coll)
{
    $fieldset = $coll;
}

$element = $fieldset->get('name_of_element');
$element->setValueOptions($array); 
```

**我希望以下工作有效，但事实并非如此。我不确定这是 Zend 框架中的错误还是我做错了什么。**

```
$collection = $form->get('name_of_collection');
$fieldset = $collection->get('name_of_fieldset');
$element = $fieldset->get('name_of_element'); 
```

如果您只想访问字段集中而不是集合中的单个元素。以下对我来说效果很好。

```
$fieldset = $form->get('name_of_fieldset');
$element = $fieldset->get('name_of_element');
$element->setAttribute('id', 'name_of_element'); 
```

我希望这可以对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:02:15.103

使用表单集合作为数组：

```
$elements = $form->get('sample_collection');
foreach($elements as $element){
    $element->setAttribute('value', $value);
} 
```

# jquery - 超级鱼子菜单不显示

> ID：14985654
> 
> 赞同：1
> 
> 时间：2013-02-20T17:04:20.700
> 
> 标签：jquery, css, superfish

我正在努力使用 superfish 下拉菜单，它只是显示箭头，当鼠标悬停在它上面时，它下面不显示子菜单，无论是在 IE（7 到 9）还是 FF 中。我已经戴上眼镜并尝试使用许多参数更改函数的调用。这是我的代码

```
<link rel="stylesheet" type="text/css" href="assets/superfish.css" media="screen">
    <script type="text/javascript" src="assets/js/hoverIntent.js"></script>

    <script type="text/javascript" src="assets/js/superfish.js"></script>
    <script type="text/javascript">

        // initialise plugins
       jQuery(function () {
          jQuery('ul.sf-menu').superfish();
       });
        </script>

<div class="mainmenu clearfix"> <ul class="sf-menu sf-js-enabled"><li class=""><a href="/default.aspx?MenuId=430" class="sf-with-ul">Yrkesmesse 2012<span class="sf-sub-indicator"> »</span></a><ul style="display: none; visibility: hidden;"><li><a href="/default.aspx?MenuId=432">Messe i Indre Ryfylke 2012</a></li><li><a href="/default.aspx?MenuId=445">Invitasjon til yrkesmessa VILBLIIRYFYLKE, Tau 2012</a></li><li><a href="/default.aspx?MenuId=447">Program "Vilbliiryfylke" 2012</a></li><li><a href="/default.aspx?MenuId=446">Messekart 2012</a></li><li><a href="/default.aspx?MenuId=448">Invitasjon til føresette</a></li></ul></li><li><a href="/default.aspx?MenuId=431">Læring i Næring</a></li><li><a href="/default.aspx?MenuId=203">Kontakt oss</a></li><li><a href="/default.aspx?MenuId=429">Etablerardag</a></li><li><a href="/default.aspx?MenuId=372" class="sf-with-ul">Hospitering<span class="sf-sub-indicator"> »</span></a><ul style="display: none; visibility: hidden;"><li><a href="/default.aspx?MenuId=407">Hospitering 9\. trinn </a></li><li><a href="/default.aspx?MenuId=381">Hospitering for 10\. trinn Ryfylke</a></li><li><a href="/default.aspx?MenuId=415">Førebuing og etterarbeid 10\. trinn</a></li><li><a href="/default.aspx?MenuId=379">Val av utdanningsprogram i web-systemet</a></li></ul></li><li><a href="/default.aspx?MenuId=400">Yrkespraksis </a></li><li><a href="/default.aspx?MenuId=360">Arbeidsplassar</a></li><li><a href="/default.aspx?MenuId=359">Yrke </a></li><li><a href="/default.aspx?MenuId=442">Linkar</a></li><li class="sfHover"><a href="/default.aspx?MenuId=296" class="sf-with-ul">UTV og PTF<span class="sf-sub-indicator"> »</span></a><ul style="display: none; visibility: visible;"><li><a href="/default.aspx?MenuId=375">Årshjul karriererettleiing Ryfylke</a></li><li><a href="/default.aspx?MenuId=394">Intranett</a></li><li><a href="/default.aspx?MenuId=330">WEB-system - Brukarrettleiingar</a></li><li><a href="/default.aspx?MenuId=346">Kurs og Kursmatriell </a></li><li><a href="/default.aspx?MenuId=332">Tips, idear og litteratur</a></li></ul></li></ul></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:15:20.367

我没有在代码中提到 jquery refenece，但它现在解决了，错误是它使用了不兼容的 jquery refenece。

# php - 在 php 中授予 root 控制台访问权限

> ID：14985660
> 
> 赞同：-1
> 
> 时间：2013-02-20T17:04:48.347
> 
> 标签：php, bash, shell

我想在允许对 shell 的完全 root 访问的网站上“嵌入”一个 shell 控制台。这是在服务器每 5 分钟擦除一次的环境中。有没有办法在 PHP 中做到这一点？我也可以为 shell 提供用户/通行证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:09:13.220

有很多用 PHP 编写的[基于 Web 的 shell 。](https://www.google.com/search?q=php+shell)它们的范围从您只需输入命令并点击提交并返回输出的基本 shell，到允许您运行 IRC 客户端等交互式终端应用程序的复杂 AJAX shell。

如果你不坚持后端是 PHP（前端可以），那么[shellinabox](https://code.google.com/p/shellinabox/)是一个整洁的。

# c++ - 在crypto++中将加密的SHA256代码解密为字符串的代码

> ID：14985664
> 
> 赞同：0
> 
> 时间：2013-02-20T17:05:08.080
> 
> 标签：c++, crypto++

我正在使用crypto++对字符串进行加密和解密。代码如下所示。该代码加密了用户名和密码。但我不知道如何再次将其解密为字符串。将加密的 SHA256 代码解密为字符串的代码是什么。谁能帮我。

```
#include <cryptopp/hex.h>
#include <cryptopp/sha.h>
#include <cryptopp/base64.h>
#include <iostream>
#include <string>

int main()
{
  CryptoPP::SHA256 hash;
  byte digest[CryptoPP::SHA256::DIGESTSIZE];
  std::string username, password, salt, output;
  std::cout << "Enter username: ";
  std::getline(std::cin,username);
  std::cout << std::endl << "Enter password: ";
  std::getline(std::cin,password);
  salt = username + password;

  hash.CalculateDigest(digest,(const byte *)salt.c_str(),salt.size());

  CryptoPP::HexEncoder encoder;
  CryptoPP::StringSink *SS = new CryptoPP::StringSink(output);
  encoder.Attach(SS);
  encoder.Put(digest,sizeof(digest));
  encoder.MessageEnd();

  std::cout << "The username/password salted hash is => " << output << std::endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:27:19.530

正如评论者已经指出的那样，此代码不执行**加密，而是执行****散列**。主要区别在于，散列在设计上是不可逆的。这在密码应用程序中很重要，因为您明确不希望以任何可访问的形式存储用户的密码，而只是检查它们。

所以，简而言之：你不能“解密”你的哈希。

当您想检查提供的密码是否正确时，您可以像在代码中一样再次对其进行哈希处理，并将哈希值与原始密码的哈希值进行比较。

# c++ - 复制跨步数据（到和从 CUDA 设备）的有效方法？

> ID：14985667
> 
> 赞同：4
> 
> 时间：2013-02-20T17:05:12.630
> 
> 标签：c++, c, matrix, cuda, memcpy

是否有可能有效地将跨过常量（甚至非常量）值的数据复制到 CUDA 设备和从 CUDA 设备复制？

我想对一个大的对称矩阵进行对角化。

使用 jacobi 算法，在每次迭代中都有一堆使用两行两列的操作。

由于矩阵本身太大而无法完全复制到设备中，我正在寻找一种将两行和两列复制到设备的方法。

使用三角矩阵形式来存储数据会很好，但还有一些缺点，比如

*   非常量行长度[不是那种问题]
*   列值的非恒定步幅 [每行步幅增加 1。]

出现。[编辑：即使使用三角形形式，仍然不可能将整个矩阵存储在 GPU 上。]

我查看了一些时间，发现一个一个复制跨步值非常慢（同步和异步）。

// 编辑：删除的解决方案 - 添加了一个答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T15:40:06.483

感谢 Robert Crovella 给出了使用 cudamemcpy2d 的正确提示。我将附上我的测试代码，让每个人都有可能理解......

如果有人提出使用行主序三角矩阵解决复制问题的建议 - 请随时写另一个答案。

```
__global__ void setValues (double *arr, double value)
{
  arr[blockIdx.x] = value;
}

int main( void ) 
{
  // define consts
  static size_t const R = 10, C = 10, RC = R*C;

  // create matrices and initialize
  double * matrix = (double*) malloc(RC*sizeof(double)), 
    *final_matrix = (double*) malloc(RC*sizeof(double));
  for (size_t i=0; i<RC; ++i) matrix[i] = rand()%R+10;
  memcpy(final_matrix, matrix, RC*sizeof(double));

  // create vectors on the device
  double *dev_col, *dev_row, 
    *h_row = (double*) malloc(C*sizeof(double)), 
    *h_col = (double*) malloc(R*sizeof(double));
  cudaMalloc((void**)&dev_row, C * sizeof(double));
  cudaMalloc((void**)&dev_col, R * sizeof(double));

  // choose row / col to copy
  size_t selected_row = 7, selected_col = 3;

  // since we are in row-major order we can copy the row at once 
  cudaMemcpy(dev_row, &matrix[selected_row*C], 
    C * sizeof(double), cudaMemcpyHostToDevice);
  // the colum needs to be copied using cudaMemcpy2D 
  // with Columnsize*sizeof(type) as source pitch
  cudaMemcpy2D(dev_col, sizeof(double), &matrix[selected_col], 
    C*sizeof(double), sizeof(double), R, cudaMemcpyHostToDevice);

  // copy back to host to check whether we got the right column and row
  cudaMemcpy(h_row, dev_row, C * sizeof(double), cudaMemcpyDeviceToHost);
  cudaMemcpy(h_col, dev_col, R * sizeof(double), cudaMemcpyDeviceToHost);
  // change values to evaluate backcopy
  setValues<<<R, 1>>>(dev_col, 88.0); // column should be 88
  setValues<<<C, 1>>>(dev_row, 99.0); // row should be 99
  // backcopy
  cudaMemcpy(&final_matrix[selected_row*C], dev_row, 
    C * sizeof(double), cudaMemcpyDeviceToHost);
  cudaMemcpy2D(&final_matrix[selected_col], C*sizeof(double), dev_col, 
    sizeof(double), sizeof(double), R, cudaMemcpyDeviceToHost);

  cudaDeviceSynchronize();
  // output for checking functionality

  printf("Initial Matrix:\n");
  for (size_t i=0; i<R; ++i)
  {
    for (size_t j=0; j<C; ++j) printf(" %lf", matrix[i*C+j]);
    printf("\n");
  }
  printf("\nRow %u values: ", selected_row);
  for (size_t i=0; i<C; ++i) printf(" %lf", h_row[i]);
  printf("\nCol %u values: ", selected_col);
  for (size_t i=0; i<R; ++i) printf(" %lf", h_col[i]);
  printf("\n\n");

  printf("Final Matrix:\n");
  for (size_t i=0; i<R; ++i)
  {
    for (size_t j=0; j<C; ++j) printf(" %lf", final_matrix[i*C+j]);
    printf("\n");
  }

  cudaFree(dev_col);
  cudaFree(dev_row);
  free(matrix);
  free(final_matrix);
  free(h_row);
  free(h_col);
  cudaDeviceReset();
  return 0;

} 
```

# java - 使用同步块的同步队列

> ID：14985668
> 
> 赞同：0
> 
> 时间：2013-02-20T17:05:20.047
> 
> 标签：java, multithreading, sockets, synchronization

我想同步我的应用程序，因为有时服务器会向错误的用户发送消息。我使用同步块来同步队列，但我的解决方案不起作用 - 有时用户收到的消息不是给他的。

这是代码（server.java）：（InWorker - 接收来自用户的消息，`OutWorker`- 向用户发送消息）每个用户都有自己的类（线程） - `MiniServer`（包含两个线程：`InWorker`和`OutWorker`）。

```
 class InWorker implements Runnable{

 String slowo=null;
 ObjectOutputStream oos;
 ObjectInputStream ois;
 ConcurrentMap<String,LinkedBlockingQueue<Message>> map=new ConcurrentHashMap<String, LinkedBlockingQueue<Message>>();
 Message message=null;

InWorker(ObjectInputStream ois,ConcurrentMap<String,LinkedBlockingQueue<Message>> map) {
    this.ois=ois;
    this.map=map;
}

public void run() {

    while(true) {
            //synchronized(queue) {
        try {
            message = (Message) ois.readObject();
            slowo=message.msg;
            if(slowo!=null && !slowo.equals("Bye")) {
                        if(!map.containsKey(message.id)) {
                            map.putIfAbsent(message.id, new LinkedBlockingQueue<Message>());
                        try {
                            map.get(message.id).put(message);
                        } catch (InterruptedException ex) {
                            Logger.getLogger(Communicator.class.getName()).log(Level.SEVERE, null, ex);
                        }
                        }
                        else
                        {
                        try {
                            map.get(message.id).put(message);
                        } catch (InterruptedException ex) {
                            Logger.getLogger(Communicator.class.getName()).log(Level.SEVERE, null, ex);
                        }
                        }
                        }

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
        e.printStackTrace();
        }
            //}
        Thread.yield();
        } 
}
}

class OutWorker implements Runnable{

String tekst=null;
ObjectOutputStream oos=null;
String id;
Message message;
ConcurrentMap<String,LinkedBlockingQueue<Message>> map=new ConcurrentHashMap<String, LinkedBlockingQueue<Message>>();

OutWorker(ObjectOutputStream oos,String id,ConcurrentMap<String,LinkedBlockingQueue<Message>> map) {
    this.oos=oos;
    this.id=id;
    this.map=map;
}

public void run() {
    while(true) {
            //synchronized(queue) {
                if(map.containsKey(id)) {
                while(!map.get(id).isEmpty()) {
                        try {
                            message=map.get(id).take();
                        } catch (InterruptedException ex) {
                            Logger.getLogger(OutWorker.class.getName()).log(Level.SEVERE, null, ex);
                        }
                        try {
                            oos.writeObject(message);
                            oos.flush();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                }

                }
            //}
        Thread.yield();
}}} 
```

这是 MiniServer 和 Server 类：

```
class MiniSerwer implements Runnable{

    Socket socket=null;
    ExecutorService exec=Executors.newCachedThreadPool();
    ObjectOutputStream oos=null;
    ObjectInputStream ois=null;
    String id;
    Queue<Message> queue=new LinkedList<Message>();

    MiniSerwer(ObjectOutputStream oos,ObjectInputStream ois,String id,Queue<Message> queue) {
        this.oos=oos;
                this.ois=ois;
        this.id=id;
        this.queue=queue;
    }

    public void run() {
            exec.execute(new InWorker(ois,queue)); // input stream
            exec.execute(new OutWorker(oos,id,queue)); //output stream
            Thread.yield();
    }
}

public class Serwer implements Runnable{

ServerSocket serversocket=null;
ExecutorService exec= Executors.newCachedThreadPool();
int port;
String id=null;
Queue<Message> queue=new LinkedList<Message>();
BufferedReader odczyt=null;

ObjectInputStream ois=null;
Message message=null;
ObjectOutputStream oos=null;

Serwer(int port) {
    this.port=port;
}

public void run() {
    try {
        serversocket=new ServerSocket(port);
        while(true) {
            Socket socket=null;
            try {
                socket = serversocket.accept();                                
                                /* first message is login*/
                                oos=new ObjectOutputStream(socket.getOutputStream());
                                oos.flush();
                                ois=new ObjectInputStream(socket.getInputStream());
                                message = (Message) ois.readObject();
                                id=message.sender;
                                System.out.println(id+" log in to the server");

                                exec.execute(new MiniSerwer(oos,ois,id,queue)); // create new thread
            } catch (IOException e) {
                e.printStackTrace();
                throw new RuntimeException(e);
            }
                        catch (ClassNotFoundException e) {
                            e.printStackTrace();
                        }    
        }
    } catch (IOException e) {
        e.printStackTrace();
}
}

public static void main(String[] args) {
    int port;
        port=8821;
    ExecutorService exec=Executors.newCachedThreadPool();
    exec.execute(new Serwer(port));
} 
```

谁能帮我 ？

编辑：我将队列更改为 ConcurrentHashMap 但有时将消息发送给错误的用户。为什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:09:20.067

这是一个经典的生产者/消费者场景。放弃同步块并使用`BlockingQueue`（InWorker 调用`put()`和 OutWorker 调用`take()`）。

此外，在您的 Server 类中，您应该为*每个连接创建一个新队列，而不是在**所有*连接中共享同一个队列。

# sql-server - 将数据类型 numeric 转换为 int 时出错

> ID：14985670
> 
> 赞同：1
> 
> 时间：2013-02-20T17:05:23.393
> 
> 标签：sql-server, database, int, type-conversion, numeric

我在同一个 SQL Server 上有两个数据库。相同的代码。

我有一个带有输入参数的存储过程`@Test INT`。在一个数据库中，当我将一个`NUMERIC`值传递给该输入时，它会被截断并且一切正常。另一方面，在做同样的事情时，我收到以下错误：

> *将数据类型 numeric 转换为 int 时出错*

这是存储过程签名：

```
CREATE PROCEDURE [dbo].[blProductGetTariff]
(
    @CurrencyID             INT,
    @ProductID              INT,
    @TradeDate              DATETIME,
    @TotalDays              INT,
    @onTariff               NUMERIC(22, 10) OUTPUT
) 
```

以下是我调用该存储过程的方式：

```
EXEC blProductGetTariff @CurrencyID, 
                        @MTPLY_VolumeID, 
                        @TradeDate, 
                        @VolumeParam, 
                        @VolumeMultiplierRate OUTPUT 
```

`@VolumeParam`是数字，它可以很好地输入到`@TotalDays`一个分贝中，但不是在第二个分贝中。

对此负责的可能的数据库设置是什么，有吗？或者我遗漏了一些东西，这种奇怪的行为还有其他原因吗？

**更新**：达林在下面的评论中提出了一个很好的观点：“另外，看看你上面的代码，如果你传递一个数字（22,10），你可能会溢出 int。在这种情况下，你必须使数字更小或通过 bigint”.. 他是对的。因此将 INT 更改为 BIGINT 解决了问题，尽管我仍然不明白为什么它不会发生在第一个数据库中，在第一个数据库中一切正常，并且我使用完全相同的数据（实际上是相同的文件）进行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:17:22.973

我认为您正在处理 NUMERIC_ROUNDABORT、arithabort 或 arithignore 的数据库范围设置。你可以在这里阅读更多：

arithignore [http://msdn.microsoft.com/en-us/library/ms184341.aspx](http://msdn.microsoft.com/en-us/library/ms184341.aspx)

arithabort [http://msdn.microsoft.com/en-us/library/ms190306.aspx](http://msdn.microsoft.com/en-us/library/ms190306.aspx)

NUMERIC_ROUNDABORT [http://msdn.microsoft.com/en-us/library/ms188791.aspx](http://msdn.microsoft.com/en-us/library/ms188791.aspx)

我认为在您的查询之前这样做会忽略您的错误。不过，从长远来看，这可能不是您想要做的。修复proc可能是最好的。

```
SET NUMERIC_ROUNDABORT OFF 
```

数据库很可能具有不同的 NUMERIC_ROUNDABORT 值。右键单击 SSMS 中的数据库，然后单击属性。转到选项，您将在杂项下找到此设置。

# asp.net-mvc - 如何在 MVC4 中测试服务层？

> ID：14985671
> 
> 赞同：0
> 
> 时间：2013-02-20T17:05:25.673
> 
> 标签：asp.net-mvc, asp.net-mvc-3, unit-testing, asp.net-mvc-4

我有一个三层的 Web 应用程序：Web > Services > Core。我刚刚添加了一个 Services.Tests 单元测试项目，我正试图弄清楚如何开始。

我已将 Services.Tests 项目中的引用添加到 Services 项目中。然后，我在我的 Test 类中创建了 Services.service 类的实例：

```
[TestClass]
public class CrudTests
{
    private readonly SetServices _setService = new SetServices();

    [TestMethod]
    public void TestMethod()
    { 
```

但是我收到一个关于`_setService`需要引用我的核心项目的错误。

**第一个问题：**如果服务项目已经引用了我的核心项目，为什么我需要引用它？

我添加了引用并运行了空测试，它通过了。然后我尝试在我的服务类中调用其中一种基本方法：

```
[TestMethod]
public void TestMethod()
{
    _setService.CreateSet("Test Set", "Test Set Details", null); 
```

但我得到一个`providerIncompatileException`.

**第二个问题：**创建/使用专用测试数据库的推荐方法是什么？

**第三个问题：**我如何告诉我的测试项目使用哪个数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:44:47.487

按零件，

> 如果服务项目已经引用了我的核心项目，为什么我需要引用它？

根据[此答案](https://stackoverflow.com/a/13472189/1250033)，项目引用不可继承。`Services`依赖于的事实`Core`并不意味着消费的人`Services`需要知道任何关于的事情`Core`，或者为此使用专门定义在 中的任何逻辑`Core`。

> 创建/使用专用测试数据库的推荐方法是什么？

这完全取决于什么数据库、什么 ORM、什么框架等。没有固定的方法来做到这一点。

> 如何告诉我的测试项目使用哪个数据库？

以同样的方式告诉应用程序这样做：通过配置。只需创建一个`DatabaseStub`并在其中硬编码测试数据库信息。

# log4j - 如何在 docx4j 中关闭调试 log4j

> ID：14985677
> 
> 赞同：0
> 
> 时间：2013-02-20T17:05:31.137
> 
> 标签：log4j, ejb, docx4j

我已经尝试了几天在我的 EJB 中配置 log4j 没有运气。我有两个从未在类路径中拾取的属性文件。

docx4j.properties

```
docx4j.Log4j.Configurator.disabled=true 
```

log4j.properties

```
org.docx4j.convert.out.pdf.viaXSLFO=INFO
docx4j.convert.out.pdf.viaXSLFO=INFO
logger.log4j.docx4j.convert.out.pdf.viaXSLFO=INFO 
```

我尝试将这些文件放在每个可能的目录中，但没有一个位于 EJB 的类路径中。我尝试将它们放在父 EAR 项目中，这也不起作用。我尝试将它们放在除 EJB 模块的根目录之外的任何地方，因为 eclipse 不允许我将任何文件放在那里（我无法粘贴，它不是任何拖动文件的放置目标）。

我可以将这些文件放在哪里，以便我的 EJB 项目停止在我的 PDF 文件中放置红色的 DEBUG 文本？

即使我手动将属性文件移动到 EJB 模块的根目录，我也会收到一些 log4j 错误，它仍然会在我的 PDF 输出中打印调试消息。

```
 SystemErr     R log4j:WARN No appenders could be found for logger (org.docx4j.jaxb.NamespacePrefixMapperUtils).
 SystemErr     R log4j:WARN Please initialize the log4j system properly. 
```

更新 - log4j.debug 的输出

```
O log4j: Using URL [file:/path/sbp_gen_mso/ejbModule/log4j.properties] for automatic log4j configuration.
O log4j: Reading configuration from URL file:/path/sbp_gen_mso/ejbModule/log4j.properties
O log4j: Could not find root logger information. Is this OK?
O log4j: Parsing for [docx4j.convert.out.pdf.viaXSLFO] with value=[OFF].
O log4j: Level token is [OFF].
O log4j: Category docx4j.convert.out.pdf.viaXSLFO set to OFF
O log4j: Handling log4j.additivity.docx4j.convert.out.pdf.viaXSLFO=[null]
O log4j: Finished configuring.
R log4j:WARN No appenders could be found for logger (org.docx4j.jaxb.NamespacePrefixMapperUtils).
R log4j:WARN Please initialize the log4j system properly. 
```

这似乎表明我缺少一个额外的“组织”。在我的 log4j 属性键中。但是问题仍然存在，为什么 Eclipse 不允许我创建或将属性文件移动到 EJB 的根目录中，如果那是为其配置日志记录的唯一位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:41:49.943

启动服务器“-Dlog4j.debug”时将其放在 java 命令选项上

# android - 即使活动发生变化，如何保持 android 客户端连接到服务器并将数据发送到服务器？

> ID：14985678
> 
> 赞同：22
> 
> 时间：2013-02-20T17:05:42.120
> 
> 标签：android, sockets, client-server, asyncsocket

我最初在我的活动中实现了一个异步任务，它将数据发送到服务器。但是当我改变活动时，连接丢失了。为了避免这种情况，我的方法是实现一个集中网络操作并将数据发送到服务器的服务，该服务的代码如下所示

```
import java.io.BufferedWriter;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;

import android.app.Service;
import android.content.Intent;
import android.os.Binder;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class SocketService extends Service {
  public static final String SERVERIP = ""; //your computer IP address should be written here
  public static final int SERVERPORT = 5000;
  PrintWriter out;
  Socket socket;
  InetAddress serverAddr;

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    System.out.println("I am in Ibinder onBind method");
      return myBinder;
}

  private final IBinder myBinder = new LocalBinder();
  TCPClient mTcpClient = new TCPClient();

  public class LocalBinder extends Binder {
        public SocketService getService() {
            System.out.println("I am in Localbinder ");
            return SocketService.this;

        }
    }

  @Override
    public void onCreate() {
        super.onCreate();
        System.out.println("I am in on create");     
    }

  public void IsBoundable(){
        Toast.makeText(this,"I bind like butter", Toast.LENGTH_LONG).show();
    }

  public void sendMessage(String message){
        if (out != null && !out.checkError()) {
            System.out.println("in sendMessage"+message);
            out.println(message);
            out.flush();
        }
    }

    @Override
    public int onStartCommand(Intent intent,int flags, int startId){
        super.onStartCommand(intent, flags, startId);
        System.out.println("I am in on start");
      //  Toast.makeText(this,"Service created ...", Toast.LENGTH_LONG).show();
        Runnable connect = new connectSocket();
        new Thread(connect).start();
        return START_STICKY;
    }

    class connectSocket implements Runnable {

        @Override
        public void run() {

            try { 
                 //here you must put your computer's IP address.
                serverAddr = InetAddress.getByName(SERVERIP);
                Log.e("TCP Client", "C: Connecting...");
                //create a socket to make the connection with the server

                socket = new Socket(serverAddr, SERVERPORT);

                 try {

                     //send the message to the server
                     out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);

                     Log.e("TCP Client", "C: Sent.");

                     Log.e("TCP Client", "C: Done.");

                    } 
                 catch (Exception e) {

                     Log.e("TCP", "S: Error", e);

                 }
            } catch (Exception e) {

                Log.e("TCP", "C: Error", e);

            }

        }

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
          try {
              socket.close();
          } catch (Exception e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
          }
          socket = null;
      }

    } 
```

Rotator.java 是我绑定到该服务的活动。以下是我活动中的几段代码。

```
private ServiceConnection mConnection = new ServiceConnection() {
            //EDITED PART
    @Override
    public void onServiceConnected(ComponentName name, IBinder service) {
        // TODO Auto-generated method stub
         mBoundService = ((SocketService.LocalBinder)service).getService();

    }

    @Override
    public void onServiceDisconnected(ComponentName name) {
        // TODO Auto-generated method stub
         mBoundService = null;
    }

  };

   private void doBindService() {
       bindService(new Intent(Rotator.this, SocketService.class), mConnection, Context.BIND_AUTO_CREATE);
       mIsBound = true;
       if(mBoundService!=null){
       mBoundService.IsBoundable();
       }
   }

   private void doUnbindService() {
       if (mIsBound) {
           // Detach our existing connection.
           unbindService(mConnection);
           mIsBound = false;
       }
   }

@Override
public void onCreate(Bundle savedInstanceState)
{
      super.onCreate(savedInstanceState);
      gestureDetector = new GestureDetector(this, new GestureListener());
      setContentView(R.layout.activity_rotator);

      //Binding the activity to the service to perform client-server operations
      //start service on create
        startService(new Intent(Rotator.this,SocketService.class));
        doBindService();
                  ...........
                  ...........
}   

@Override
protected void onDestroy() {
    super.onDestroy();
    doUnbindService();
} 
```

现在，由于该服务在后台运行，如果我想向服务器发送一些数据，我使用以下

```
 if(mBoundService!=null)
{
    mBoundService.sendMessage("right");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T16:06:04.313

代码是对的。唯一的错误是我试图在 onServiceConnected() 方法和 onCreate() 方法中启动服务两次。

我将代码更改为仅在启动器活动的 onCreate() 方法中启动服务。其余活动通过使用 doBindService() 方法直接绑定到服务

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:54:59.767

当一个服务被绑定到一个`Activity`Activity 时，它会在 Activity 停止时被杀死，它就像一个只为`Activity`. 因此，要使其保持运行，请`onStartCommand()`在您的类中实现该方法`Service`并返回`this.START_STICKY`。并以这种方法管理您的服务。

# mysql - 组重复 ID，但显示其余信息

> ID：14985680
> 
> 赞同：1
> 
> 时间：2013-02-20T17:05:47.060
> 
> 标签：mysql

我有这两张桌子：

master（专业、SID、费用）

```
Biology, 13578, $500
Physics, 12460, $400 
```

学生（专业、SID、fname、lname、startDate、lastDate）

```
Science, 73589, Steven, Archer, 2010-09-02, null
Biology, 13578, Stacy, Diaz, 2009-09-02, null
Sociology, 21749, Gavin, Wall, 2011-01-05, null
Physics, 12460, Pat, Dunn, 2012-09-02, null 
```

我必须查询它显示按专业和费用分组的所有硕士生的信息。

我试过这样：

```
select * from from master, student 
where master.SID=student.SID AND master.major=student.major 
group by student.SID; 
```

但这会使 SID 和主要信息显示两次：

```
Biology, 13578, Stacy, Diaz, 2009-09-02, null, Biology, 13578
Physics, 12460, Pat, Dunn, 2012-09-02, null, Physics, 12460 
```

所以现在我有了这个：

```
select distinct student.sid, student.eid, fname, lname, startDate, lastDate, fee
from from master, student 
where master.SID=student.SID AND master.major=student.major 
group by student.SID; 
```

这将给出：

```
Biology, 13578, Stacy, Diaz, 2009-09-02, null
Physics, 12460, Pat, Dunn, 2012-09-02, null 
```

但我想知道是否有办法不指定选择哪个 SID 或专业。我希望它全选，但它会删除重复项。

对不起，如果这看起来很容易，我还是 mysql 的初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:41:59.107

如果我理解你的问题，你想要`select *`，但删除了多余的列。

这是不可能的，但您可以通过从 中返回所有列来采取捷径`student`，然后从 中添加附加列`master`。

```
select s.*, m.fee
from
  master m
  join student s 
    on s.sid = m.sid
    and s.major = m.major 
```

请注意，我对您的查询进行了一些其他更改：

1.  将隐式连接 ( `student, master`) 替换为显式连接 ( `master join student`)。
2.  删除了`group by`and `distinct`...我不相信它们对于你想要做的事情是必要的。
3.  添加了表别名（`m`和`s`）。

最后一个建议......由于各种原因，它被广泛认为是不好的做法`select *`......所以即使你想要做的事情有捷径，[最好列出你的所有列以供其他人使用原因](https://stackoverflow.com/questions/3639861/why-is-select-considered-harmful)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:09:13.007

不，如果有重复的列名，您必须指定从哪个表中提取，否则您会收到错误消息。当然，您可以同时指定两者：SELECT master.SID、student.SID。

# c# - 泛型方法如何工作？

> ID：14985681
> 
> 赞同：1
> 
> 时间：2013-02-20T17:05:47.277
> 
> 标签：c#, generics

我最近在 MSDN 上找到了本教程，该教程允许我的应用程序的用户更改和保存设置。经过一番挠头后，我想我明白了所有这些，除了一件事。让我们从原始代码中最相关的部分开始。一切都在一个名为 AppSettings 的类中。我用来测试的属性是son1。我的理解是这样的：

在代码的最后，你得到了这个：

```
 // Property to get and set son1 Key.
    public int son1
    {
        get
        {
            return GetValueOrDefault<int>(son1KeyName, son1Default);
        }
        set
        {
            if (AddOrUpdateValue(son1KeyName, value))
            {
                Save();
            }
        }
    } 
```

如果你设置属性，这很容易。它只是调用这个方法：

```
public bool AddOrUpdateValue(string Key, Object value)
    {
        bool valueChanged = false;
 // If the key exists
        if (settings.Contains(Key))
        {
            // If the value has changed
            if (settings[Key] != value)
            {
                // Store the new value
                settings[Key] = value;
                valueChanged = true;
            }
        }
        // Otherwise create the key.
        else
        {
            settings.Add(Key, value);
            valueChanged = true;
        }
        return valueChanged;
    } 
```

我只需要这样做，我就完成了：

```
AppSettings param = new AppSettings();
        param.son1 = 1; 
```

现在 GET 的语法对我来说似乎更奇怪了。过程是一样的，一个方法被一个属性使用。get 属性列在我的帖子顶部。如您所见，它调用了这个方法：

```
public T GetValueOrDefault<T>(string Key, T defaultValue)
    {
        T value;

        // If the key exists, retrieve the value.
        if (settings.Contains(Key))
        {
            value = (T)settings[Key];
        }
        // Otherwise, use the default value.
        else
        {
            value = defaultValue;
        }
        return value;
    } 
```

我对“T”感到不安，它也写在<和>之间。如果我能理解它，我应该能够将属性设置为默认值，我将在我的程序开始时执行此操作。任何提示表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:08:23.210

> 我对“T”感到不安，它也写在<和>之间。

这表明它是一个*泛型方法*。

基本上，如果不阅读有关[generics](http://msdn.microsoft.com/en-gb/library/512aeb7t.aspx)的内容，您将无法理解它，这是一个*太大*的话题，无法在 Stack Overflow 答案中充分涵盖。按照 MSDN 指南的链接 :)

*非常*简短的版本是这意味着该方法由*类型*和值参数化。泛型可以应用于类型和方法，因此 a`List<string>`是“字符串列表”，而 a`List<int>`是“整数列表”。泛型方法类似，但稍微难以理解——这里`GetValueOrDefault`可以描述为“根据给定的字符串键返回一个类型的值——或者如果设置中不存在该键，则`T`返回提供的默认值（也是类型） `T`。”

So`GetValueOrDefault<string>(key, "foo")`将从设置中返回 a `string`，默认为`"foo"`，并将从设置中`GetValueOrDefault<int>(key, 10)`返回 an `int`，默认为`10`。

不过，这只是 30 秒的演练——还有**很多**东西要学:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:13:15.407

[这是泛型](http://msdn.microsoft.com/en-us/library/512aeb7t.aspx)的语法。

这是一个复杂的主题，但它只是一句话：**它基本上意味着您的方法可以用于多种类型。为简化起见，您可以将 T 替换为任何类型。**而不是编写多个函数：

```
public string GetValueOrDefault(string Key, string defaultValue)
public int GetValueOrDefault(string Key, int defaultValue) 
```

你只写一个：

```
T GetValueOrDefault<T>(string Key, T defaultValue) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:09:19.907

这称为[泛型](http://msdn.microsoft.com/en-us/library/512aeb7t.aspx)。

泛型的一个突出示例是`List<T>`，它接受任何类型并充当该类型对象的容器。

```
List<int> intList; // a list of int
List<string> stringList; // a list of strings 
```

# javascript - javascript为变量分配错误的值

> ID：14985682
> 
> 赞同：0
> 
> 时间：2013-02-20T17:05:48.603
> 
> 标签：javascript, arrays, json, math, random

出于某种原因，这个 javascript 似乎无法正确计算，并不断给我一些数组值的无穷大。

```
var stock = {
        "data": {
            "portfolio": [
                [1298641715000, 1631.00],
                [1298656616000, 1311.00],
                [1299606578000, 1311.00],
                [1300381305000, 820.50],
                [1300813418000, 2074.80],
                [1300970915000, 3862.50],
                [1300985378000, 4597.35],
                [1301071778000, 3554.85],
                [1301505492000, 5653.05],
                [1302195878000, 4871.80],
                [1302368766000, 4079.80],
                [1306343616000, 5062.60],
                [1307036495000, 5062.60],
                [1307726770000, 7207.60],
                [1307727695000, 6372.60],
                [1312998095000, 5816.10],
                [1313430095000, 5816.10],
                [1316625492000, 7816.10],
                [1316711892000, 6566.10],
                [1316713295000, 7777.10],
                [1316713295000, 8921.60],
                [1316799695000, 10902.10],
                [1316886095000, 8627.10],
                [1318094770000, 7717.10],
                [1318267163000, 6807.10],
                [1326306370000, 8228.30],
                [1327429500000, 9228.30],
                [1328208664000, 10222.05],
                [1329503831000, 10188.65],
                [1330368095000, 11274.15],
                [1330541464000, 12006.75],
                [1330714264000, 13222.25],
                [1331059408000, 14029.75],
                [1331144806000, 15676.55],
                [1333648264000, 17256.02],
                [1334080424000, 18701.62],
                [1336672860000, 19745.42],
                [1336758824000, 20018.77],
                [1336773969000, 21130.77],
                [1337015320000, 20312.47],
                [1337277827000, 21650.02],
                [1339002758000, 22285.97],
                [1341934145000, 23972.67],
                [1341934243000, 24182.67],
                [1342103859000, 25830.67],
                [1342475250000, 25380.67],
                [1342654950000, 25669.09],
                [1343147542000, 25797.43],
                [1343412475000, 25994.43],
                [1343658668000, 26203.43],
                [1343804523000, 26342.43],
                [1343840755000, 26432.43],
                [1343922704000, 25914.43],
                [1343922759000, 26031.43],
                [1345053816000, 26156.43],
                [1345138832000, 26253.43],
                [1345576479000, 26483.43],
                [1345576537000, 26588.43],
                [1345656708000, 26628.43],
                [1346442006000, 26704.43],
                [1346953652000, 26456.43],
                [1347553896000, 26586.43],
                [1347554286000, 26865.43],
                [1347559351000, 27062.43],
                [1347560040000, 27533.43],
                [1347560369000, 27351.43],
                [1347641968000, 26577.43],
                [1348063653000, 26860.43],
                [1348591198000, 26588.43],
                [1348591500000, 26598.43],
                [1348668767000, 26728.43],
                [1348681823000, 27094.43],
                [1349367062000, 27254.43],
                [1349368159000, 27379.43],
                [1350310748000, 27675.43],
                [1350503445000, 27858.43],
                [1350923279000, 27979.43],
                [1352131960000, 27742.43],
                [1353522221000, 27997.43],
                [1353685832000, 28299.43],
                [1355157961000, 28545.43],
                [1355766797000, 28692.43],
                [1355947837000, 28913.43],
                [1357671266000, 29304.43],
                [1357672054000, 29531.44],
                [1358448645000, 28856.44],
                [1358448738000, 29036.44],
                [1358455579000, 29236.44],
                [1358540610000, 29430.44],
                [1360095697000, 30077.44],
                [1360596277000, 30154.44],
                [1360612771000, 30651.44],
                [1360860220000, 30789.44],
                [1360869993000, 31389.44]
            ],
                "portfolio2": [
                [1298641715000, 1631.00],
                [1298656616000, 1311.00],
                [1299606578000, 1311.00],
                [1300381305000, 820.50],
                [1300813418000, 2074.80],
                [1300970915000, 3862.50],
                [1300985378000, 4597.35],
                [1301071778000, 3554.85],
                [1301505492000, 5653.05],
                [1302195878000, 4871.80],
                [1302368766000, 4079.80],
                [1306343616000, 5062.60],
                [1307036495000, 5062.60],
                [1307726770000, 7207.60],
                [1307727695000, 6372.60],
                [1312998095000, 5816.10],
                [1313430095000, 5816.10],
                [1316625492000, 7816.10],
                [1316711892000, 6566.10],
                [1316713295000, 7777.10],
                [1316713295000, 8921.60],
                [1316799695000, 10902.10],
                [1316886095000, 8627.10],
                [1318094770000, 7717.10],
                [1318267163000, 6807.10],
                [1326306370000, 8228.30],
                [1327429500000, 9228.30],
                [1328208664000, 10222.05],
                [1329503831000, 10188.65],
                [1330368095000, 11274.15],
                [1330541464000, 12006.75],
                [1330714264000, 13222.25],
                [1331059408000, 14029.75],
                [1331144806000, 15676.55],
                [1333648264000, 17256.02],
                [1334080424000, 18701.62],
                [1336672860000, 19745.42],
                [1336758824000, 20018.77],
                [1336773969000, 21130.77],
                [1337015320000, 20312.47],
                [1337277827000, 21650.02],
                [1339002758000, 22285.97],
                [1341934145000, 23972.67],
                [1341934243000, 24182.67],
                [1342103859000, 25830.67],
                [1342475250000, 25380.67],
                [1342654950000, 25669.09],
                [1343147542000, 25797.43],
                [1343412475000, 25994.43],
                [1343658668000, 26203.43],
                [1343804523000, 26342.43],
                [1343840755000, 26432.43],
                [1343922704000, 25914.43],
                [1343922759000, 26031.43],
                [1345053816000, 26156.43],
                [1345138832000, 26253.43],
                [1345576479000, 26483.43],
                [1345576537000, 26588.43],
                [1345656708000, 26628.43],
                [1346442006000, 26704.43],
                [1346953652000, 26456.43],
                [1347553896000, 26586.43],
                [1347554286000, 26865.43],
                [1347559351000, 27062.43],
                [1347560040000, 27533.43],
                [1347560369000, 27351.43],
                [1347641968000, 26577.43],
                [1348063653000, 26860.43],
                [1348591198000, 26588.43],
                [1348591500000, 26598.43],
                [1348668767000, 26728.43],
                [1348681823000, 27094.43],
                [1349367062000, 27254.43],
                [1349368159000, 27379.43],
                [1350310748000, 27675.43],
                [1350503445000, 27858.43],
                [1350923279000, 27979.43],
                [1352131960000, 27742.43],
                [1353522221000, 27997.43],
                [1353685832000, 28299.43],
                [1355157961000, 28545.43],
                [1355766797000, 28692.43],
                [1355947837000, 28913.43],
                [1357671266000, 29304.43],
                [1357672054000, 29531.44],
                [1358448645000, 28856.44],
                [1358448738000, 29036.44],
                [1358455579000, 29236.44],
                [1358540610000, 29430.44],
                [1360095697000, 30077.44],
                [1360596277000, 30154.44],
                [1360612771000, 30651.44],
                [1360860220000, 30789.44],
                [1360869993000, 31389.44]
            ],
                "standard": []
        }
    };

    var stockbase = stock.data.portfolio;
    var stock1 = stock.data.portfolio2;

    for (i = 0; i < (stock.data.portfolio2.length); i++) {
        stock.data.portfolio2[i][1] = stock.data.portfolio2[i][1] * Math.random();
    }

    //var performance1 = stock.data.portfolio2;

    var i = 0;

    while(i<stockbase.length)
    {
            if (i == 0){
            stock1[i][0] = stockbase[i][0];
            stock1[i][1] = 0;
        } else if (stockbase[i][1] > stockbase[(i - 1)][1]) {
            stock1[i][0] = stockbase[i][0];
            stock1[i][1] = (stockbase[i][1]) / (stockbase[(i - 1)][1]);
            stock1[i][1] -= 1;
            stock1[i][1] *= 100;
        } else if (stockbase[i][1] < stockbase[(i - 1)][1]) {
            stock1[i][0] = stockbase[i][0];
            stock1[i][1] = ((stockbase[i][1]) / (stockbase[(i-1)][1]));
            stock1[i][1] -= 1;
            stock1[i][1] *= 100;
        } else {
            stock1[i][0] = stockbase[i][0];
            stock1[i][1] = 0;
        }
        i++;
    }

    //console.log(stockbase);
    //console.log(stock1);

    var stockbase = stock.data.portfolio2;
    var stock2 = stock.data.portfolio;

    i = 0;

    while(i<stockbase.length)
    {
            if (i == 0){
            stock2[i][0] = stockbase[i][0];
            stock2[i][1] = 0;
        } else if (stockbase[i][1] > stockbase[(i - 1)][1]) {
            stock2[i][0] = stockbase[i][0];
            stock2[i][1] = (stockbase[i][1]) / (stockbase[(i - 1)][1]);
            stock2[i][1] -= 1;
            stock2[i][1] *= 100;
        } else if (stockbase[i][1] < stockbase[(i - 1)][1]) {
            stock2[i][0] = stockbase[i][0];
            stock2[i][1] = ((stockbase[i][1]) / (stockbase[(i-1)][1]));
            stock2[i][1] -= 1;
            stock2[i][1] *= 100;
        } else {
            stock2[i][0] = stockbase[i][0];
            stock2[i][1] = 0;
        }
        i++;
    }

    console.log(stockbase);
    console.log(stockbase==stock.data.portfolio2); 
```

变量 stock 1 在循环后完美运行，没有任何问题。有趣的部分是在第一个 while 循环之后，stock.data.portfolio2 具有与 stock1 相同的数组值，即使不应该对 stock.data.portfolio2 进行任何更改。

我对自己做错了什么感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:18:56.013

执行以下操作时：

`var stock1 = stock.data.portfolio2;`

您正在分配`stock1`给数组的引用`stock.data.portfolio2`。这意味着对 的所有更改`stock.data.portfolio2`也将在`stock1`. 由于`stock.data.portfolio2`是一个数组数组，我建议创建一个函数来为您将数据复制到您的变量中`stock1`

```
function copyPortfolio(arr) {
    var s = [];
    for(i = 0; i < (arr.length); i++) { s.push(arr[i].slice()); }
    return s;
}

var stock1 = copyPortfolio(stock.data.portfolio2); 
```

# meteor - 在服务器运行时使用 tinytest 测试 Meteor 客户端

> ID：14985684
> 
> 赞同：3
> 
> 时间：2013-02-20T17:05:54.737
> 
> 标签：meteor

是否可以在服务器运行时使用 tinytest 测试 Meteor 客户端？这是我仅测试客户端的示例：

```
Tinytest.add("Add object to a collection", function(test) {
  var people = new Meteor.Collection("people");
  people.insert({"name": "Andrew"}, function(error, id) {
    test.isNull(error);
  });
}); 
```

这会在几分之一秒内过去，但随后会进入“等待”状态。我也很肯定错误不为空。

```
Meteor.Error {error: 404, reason: "Method not found", details: undefined} 
```

我知道这种情况正在发生，因为它们不是客户端可以与之通信的服务器。当我尝试在服务器和客户端上运行此测试时，我继续遇到与客户端相同的问题。有没有办法在服务器运行时测试客户端？

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T19:17:02.710

不带参数使用`new Meteor.Collection`创建不需要服务器的存根集合。请参阅[Collections 上的文档](http://docs.meteor.com/#meteor_collection)：

> 如果您将 null 作为名称传递，那么您正在创建一个本地集合。它在任何地方都不同步；它只是一个本地暂存器，支持 Mongo 风格的查找、插入、更新和删除操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T17:38:48.357

这是一个异步测试，所以你必须使用`addAsync`.

```
Tinytest.addAsync("Add object to a collection", function(test, next) {
  var people = new Meteor.Collection("people");
  people.insert({"name": "Andrew"}, function(error, id) {
    test.isNull(error);
    next();
  });
}); 
```

请注意下一个参数，它表明您已在回调中完成。

# css - CSS 根据是否在其父块元素的第一行中更改跨度的边框样式

> ID：14985685
> 
> 赞同：1
> 
> 时间：2013-02-20T17:05:55.800
> 
> 标签：css, codemirror, adobe-brackets

## 序幕

我有一个看起来有点像这样的布局： ![在此处输入图像描述](../Images/a81f4ec8c7fa616852d84460406d235b.png)

这是在["JSFiddle"](http://jsfiddle.net/vqZdK/40/)上。

它所涉及的 DIV 如下所示，并显示在一行文本下方：

```
<div class="container">
    <div>
        <span class="offset" style="width: 150px">&nbsp;</span>
        <span class="myText">First: Lorem ipsum dolor sit amet, consectetur adipiscing elit</span>
    </div>
    <div>
        <span class="offset" style="width: 500px">&nbsp;</span>
        <span class="myText">Second: Lorem ipsum dolor sit amet, consectetur adipiscing elit</span>
    </div>
    <div>
        <span class="offset" style="width: 50px">&nbsp;</span>
        <span class="myText">Third: Lorem ipsum dolor sit amet, consectetur adipiscing elit</span>
    </div>
    <div>
        <span class="offset" style="width: 233px">&nbsp;</span>
        <span class="myText">Fourth: Lorem ipsum dolor sit amet, consectetur adipiscing elit</span>
   </div>
</div> 
```

### 主意

使用读取错误范围突出显示上述文本中的错误。错误跨度的放置方式使其左上角指向文本中出现错误的字符位置。我在实际错误跨度（红色）前面使用跨度（黄色）将错误跨度向右移动正确的量。（这不是一个好方法，我将在下面解释原因，以防您感兴趣并且我愿意接受建议，但这不是当前的问题）

这样，我能够使跨度从左侧的特定位置开始，但如果没有足够的空间，则环绕并继续在行的开头。如果没有足够的空间（由于偏移）即使是一个单词，整个跨度也会移动到下一行。这是我想要的行为。

# 问题

当跨度由于右侧空间不足而完全移动到下一行时，它们左上角的“尖”角不再正确。在这种情况下，我想让跨度周围有圆角。但我找不到办法做到这一点。我想避免使用 Javascript/jquery，因为它看起来像很多繁琐的计算，每当调整包含窗口甚至 div 的大小时，我都必须重新计算它。

### 到目前为止尝试过

我主要看的是 CSS 伪元素`:first-line`，因为它听起来像是我想要的。但是[规范说](http://www.w3.org/TR/CSS2/selector.html#selector-syntax)该`:first-line`元素必须是选择器列表中的最后一个选择器。我试过了，确实

```
div:first-line .myText {
    # apply some layout
} 
```

不起作用。

也没有

```
.myText:first-line {
    # apply some layout
} 
```

因为 :`first-line`元素[只能附加到块容器元素](http://www.w3.org/TR/CSS2/selector.html#first-line-pseudo)上。

如果我将 .myText 作为一个`inline-block`元素，它会起作用，但这会导致它提前换行（如果它不完全适合第一行）。`display:block`只是使早期包装变得更糟（直接从下一行开始）。

我不能只是选择`div:first-line`，因为

1.  `:first-line` [不允许设置边框](http://www.w3.org/TR/CSS2/selector.html#first-line-pseudo)。
2.  即使这样做了，它也会修改 :first-line 块元素周围的边框，这不会改变它内部 span 的边框。

*任何想法如果跨度在 div 的第二行中，我如何使跨度的左上角变为圆形，而无需编写大量 Javascript 代码试图找出跨度是否已完全移动到下一行并注册一个调整监听器大小以每次重新计算它？*

### 为什么使用偏移跨度而不是`margin-left:200px`or `position:relative; left:200px`？

两者都导致容器 div 增长，我不能拥有它。此布局嵌入在滚动视图中，很像 JSFiddle 上的预览。尝试将span 设置`.offset`为`display:none`和`.myText`span 的margin-left 设置为较大的值（例如500 像素），然后调整JSFiddle 预览的大小，直到所有行都环绕到下一行（span 的第一个单词除外）。第一个单词将始终位于第一行，因此导致容器 div 比其他情况下更大。在我的情况下，容器 div 甚至不会调整大小，这会导致文本被截断。

因此，我在前面使用另一个跨度，具有自定义宽度（由 Javascript/jquery 根据错误的位置确定）。这样，如果第一行没有足够的空间，则完整的跨度可以换行到下一行（在这种情况下，它从行的开头开始，正如您在以“第二”开头的跨度中看到的那样）。

### 语境

[它是 Adob​​e Brackets](https://github.com/adobe/brackets)的扩展，我在其中使用 CodeMirror 编辑器的 addLineWidget() 方法向 div 注入错误消息。因此，任何使用 Brackets/CodeMirror API 来解决问题的方法都可以。

# iphone - 如何在某些 UITableViewCell 中隐藏底部分隔符

> ID：14985686
> 
> 赞同：1
> 
> 时间：2013-02-20T17:05:56.333
> 
> 标签：iphone, objective-c, uitableview, separator

我正在使用 UITableView Grouped Style 开发一个应用程序，我想隐藏一些单元格 bottomSeparator 但我不知道如何。

这是我想要的结果： [我想要的结果](http://img198.imageshack.us/img198/1852/capture1jh.png)

我试过这个：

```
[self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];
[self.tableView setSeparatorColor:[UIColor clearColor]]; 
```

和这个 ：

```
UIImageView *line = [[UIImageView alloc] initWithFrame:CGRectMake(12, HEIGHT_ROW_HEADER, 320-(12*2), 1)];
line.backgroundColor = [UIColor blackColor];
[cell addSubview:line]; 
```

但我在 UItableView 周围没有边框

我有这样的事情： [结果我有](http://img208.imageshack.us/img208/3927/capture2vw.png)

有人可以帮助我吗？

十分感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:11:33.977

首先，您需要删除`SeparatorColor`and `setSeparatorStyle`。

```
[self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];
[self.tableView setSeparatorColor:[UIColor clearColor]]; 
```

然后检查您的单元格是否是部分的最后一个单元格，然后您需要在单元格中添加图像。

```
viewNormal=[[UIView alloc] initWithFrame:CGRectMake(0, 59, cell.frame.size.width, 1)];

UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
btn.frame = viewNormal.bounds;
btn.enabled = NO;
[btn setBackgroundImage:[UIImage imageNamed:@"lineBgImage.png"] forState:UIControlStateNormal];
[viewNormal addSubview:btn];

[cell addSubview:viewNormal]; 
```

并删除`viewNormal`其他单元格。我正在以这种方式添加分隔符并且工作正常。希望它会帮助你。

# javascript - Galleria JS 无法使用 Rails 管道进行生产

> ID：14985694
> 
> 赞同：3
> 
> 时间：2013-02-20T17:06:16.217
> 
> 标签：javascript, ruby-on-rails, asset-pipeline, galleria

我在我的 rails 应用程序中运行 Galleria.IO 的 JavaScript 库，在开发中一切正常，在我特别包含 Galleria 代码的页面上的生产中一切正常。但是当你点击一个没有代码的页面时，它会不断抛出错误，比如

```
No theme CSS loaded
Fatal error: Theme CSS could not load after 20 sec. Please download the latest theme at http://galleria.io/customer/ 
```

我已经在我的管道中包含了 Galleria 文件：

```
// application.js
//= require galleria.min
//= require galleria.classic.min

/* application.css
*= require galleria.classic
*/ 
```

以下确实在有`#galleria`元素的页面上正确初始化了画廊，但在其他任何地方都会引发上述错误：

```
if ($("#galleria").length == 1) {
        Galleria.loadTheme('/assets/galleria.classic.min.js');
        Galleria.configure({
            debug: false,
            // imageCrop: true,
            dummy: '/assets/fallback/large_default.png',
            transition: 'fade'
        });
        Galleria.run('#galleria');
    } 
```

有没有办法让主题在资产管道中自动加载，而不必单独初始化它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:30:02.303

听起来你应该总是加载一个主题！

将以下内容放入 app/assets/javascripts/galleria_setup.js 中：

```
 Galleria.loadTheme('/assets/galleria.classic.min.js');
    Galleria.configure({
        debug: false,
        // imageCrop: true,
        dummy: '/assets/fallback/large_default.png',
        transition: 'fade'
    }); 
```

然后将您的清单更改为

```
// application.js
//= require galleria.min
//= require galleria.classic.min
//= require galleria_setup 
```

然后当你想要真正启动时：

```
if ($("#galleria").length == 1) {
    Galleria.run('#galleria');
} 
```

# jquery - 如何加载（）模板文件，作为变量传递？

> ID：14985698
> 
> 赞同：0
> 
> 时间：2013-02-20T17:06:25.327
> 
> 标签：jquery, load

我正在使用 php，需要将这个模板内容 php 文件加载（）到 jquery 中并将其传递给 #div ID 以呈现前端视图。

我不知道如何在 jquery 中加载 php 文件，然后将其作为名为 repeater 的变量传递，这有助于构建将加载的模板与 Ajax (obj) 查询结果相结合的所有行。

在设置警报中，它弹出为[object Object]，没有模板。当我将整个 php 模板内容作为 var repeater 写入 jquery 时，它可以工作，但我不希望 jquery 中的所有 html。只需 load() 然后阅读。

如果这有任何意义，这是代码

```
$('#pageContent').load('../includes/OrderLookup.php #pageContent');
alert ($('#pageContent').load('OrderLookup.html #pageContent'));
var url = $('#pageContent').load('../includes/OrderLookup.php');
var page = '<div id="pageContent"></div>';
var repeater = $('#pageContent').load('OrderLookup.html #pageContent');

var pageBuildUp='';
for (x in dataArray){
     pageBuildUp += obj.repeater;
    //alert(obj.repeater);
    //pageBuildUp += url;
    pageBuildUp = pageBuildUp.replace('##transactionId##',makeTextSmall(dataArray[x]['blockvalue'],20));
    if (dataArray[x]['description']==''){
        pageBuildUp = pageBuildUp.replace('##orderTotal##','no total amount');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:24:21.440

当您使用 jQuery`load`指定 URL 和 DOM 片段标识符时，它会返回 DOM 片段，这就是为什么它作为对象警报的原因。我的猜测是你期待一个字符串？为此，您需要从`var repeater`以下内容开始更改您的行：

```
var repeater = $('#pageContent').load('OrderLookup.html #pageContent')[0].outerHTML; 
```

但是，您正在实施的想法听起来很危险：听起来您正在尝试在前端手动解析 PHP。首先，PHP 不会在被交还给你之前执行，剥离你的令牌吗？其次，使用纯 Javascript 进行模板解析是一种痛苦。[JS 模板](https://developer.mozilla.org/en-US/docs/JavaScript_templates)最近获得了巨大的关注，试图使您刚才描述的任务更容易。我个人推荐[Mustache](http://mustache.github.com/)，这对我来说是一个福音。

# java - 如果将输出重定向到文件或显示到控制台，则相应地动态格式化输出

> ID：14985699
> 
> 赞同：2
> 
> 时间：2013-02-20T17:06:28.157
> 
> 标签：java

我想格式化我的 java 程序的输出，以便每当它被重定向到一个文件（xl 或 csv 文件）时，我希望输出用逗号分隔，但在控制台上显示时它不应该用逗号分隔。这些应该在运行时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:07:26.277

From Java 6 onwards we have the Console class. It's instance can be obtained by System.console() method. If no console device is available at runtime then invocation of this method will return null.

```
if(null == System.console()) {
    // write to file
    // code
}
else {
    // write to console
    // code
} 
```

# php - 检测 .htaccess 中的网站 URI

> ID：14985701
> 
> 赞同：0
> 
> 时间：2013-02-20T17:06:30.093
> 
> 标签：php, .htaccess

我有一个共享主机帐户，上面运行着 2 个网站，每个网站都有自己的域（example1.com 和 example2.com）。示例 1 是主站点，位于 html 文件夹的根目录，示例 2 位于名为 ex2 的文件夹中。我想要做的是确保无法访问 example1.com/ex2/ 来使用 example2，如果确实发生这种情况，请重定向到 example2.com。到目前为止，我已经用 PHP 做到了这一点：

```
if (strpos($_SERVER["REQUEST_URI"], "/ex2") !== false)
{
    header("Location: http://example2.com");
} 
```

但这很笨拙，因为您必须将它包含在每个页面上，并且在 html 标题之前。是否有使用 .htaccess 的解决方案（编辑：如果有，它是什么）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:18:04.890

菲利普给了我这个：

```
RewriteRule ^/ex2(.*)$ http://example2.com/$1 [R=301,L] 
```

效果很好 - 谢谢！

# magento - 如何使用 XML 通过管理面板在 Magento 中为类别设置块类和模板

> ID：14985704
> 
> 赞同：0
> 
> 时间：2013-02-20T17:06:58.753
> 
> 标签：magento, templates, block, categories, magento-1.6

我正在尝试覆盖 Magento 中特定类别的默认模板和块类。

以下代码仅更改模板，

```
<reference name="product_list">
  <action method="setTemplate"><template>catalog/product/list-foobar.phtml</template></action>
</reference> 
```

我还需要将默认块类从 Mage_Catalog_Block_Product_List 更改为 Mage_Catalog_Block_Product_List_Foobar。

这是否可以在类别的“自定义布局更新”字段中使用 XML？

我尝试了以下方法，它也不起作用，

```
<reference name="product_list">
  <block type="catalog/product_list_foobar" name="product_list" template="catalog/product/list-foobar.phtml" />
</reference> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:39:16.617

严格回答：

```
<CUSTOM_CATEGORY_DISPLAY>
    <reference name="category.products">
        <action method="unsetChild"><child>product_list</child></action>
        <block type="catalog/product_list_foobar" name="product_list" template="catalog/product/list-foobar.phtml" />
    </reference>
</CUSTOM_CATEGORY_DISPLAY> 
```

然后，您可以`<update handle="CUSTOM_CATEGORY_DISPLAY" />`在您希望应用这些指令的每个类别的自定义布局更新 XML 字段中使用。

但是，分层导航中涉及的模型和块之间存在一些奇怪/不幸的耦合，因此很可能存在一些错误行为。

# java - 使用 HttpServletRequest 类型的参数对方法进行单元测试

> ID：14985708
> 
> 赞同：0
> 
> 时间：2013-02-20T17:07:03.660
> 
> 标签：java, http, model-view-controller, request

正如标题所描述的，我的方法有一个 HttpServletRequest 类型的参数，我想做单元测试，这意味着我必须创建一个请求，绑定一个参数并将其传递给我想要测试的方法。但是，我无法在我的 java 代码中创建 HttpServletRequest 类型的实例并为其设置参数。当请求由 Web 服务器传递时，这工作正常，但是当我想在我的 java 代码中创建一个带有测试参数的 HTTP servlet 请求时，它似乎有问题。这个问题有解决方法吗？有人如何对接受 HTTPServletRequests 的方法进行单元测试？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:11:47.367

嘲笑。Spring 有一个 MockHttpServletRequest 或者你可以简单地使用 Mockito 之类的东西。然后为您感兴趣的方法设置返回值并忽略其他所有内容。

# c# - 通过元数据嵌入版本信息？

> ID：14985710
> 
> 赞同：2
> 
> 时间：2013-02-20T17:07:12.093
> 
> 标签：c#, metadata, mef, versioning

我有一个使用 MEF 加载扩展的应用程序，我希望能够在MEF 实际加载扩展***之前检索（程序集）版本信息。***我相信如果程序集信息嵌入到扩展的元数据中，这是可以做到的。不幸的是，元数据似乎只接受设计时间常数值。也许有人可以告诉我别的？

理想情况下，我希望能够声明类似于以下的元数据：

```
[Export(typeof(IExtension))]
[ExportMetadata("Description", "Spell Checker")]
[ExportMetadata("AssemblyVersionInformation", "???????")]
public class MyExtension : IExtension
{
   ...
} 
```

我的元数据接口定义为：

```
public interface IExtensionMetadata
{
   string Description { get; }
   string AssemblyVersionInformation { get; }
} 
```

我不知道如何处理“???????” 在第一部分。

我承认我的问题与以下内容非常相似： [如何获取具有我的 MEF 插件的每个 DLL 的版本号？](https://stackoverflow.com/questions/11848785/how-do-i-get-the-version-number-of-each-dll-that-has-my-mef-plugins?rq=1) 但我希望能够在加载插件 ***之前访问这些信息。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:56:35.863

所以你想在零件实例化之前得到它，对吧？您可以获取`ExportDefinition`零件的 ，然后使用`ReflectionModel.ReflectionModelServices.GetPartType`获取类型。从那里您可以获取程序集，并直接读取其版本信息。

这是VB中的一个例子：

```
 Dim objPartDef As Primitives.ComposablePartDefinition

 objPartDef = myCatalog.Parts.Where(
       Function(objPart) objPart.ExportDefinitions.Count > 0 AndAlso
           objPart.ExportDefinitions(0).Metadata.ContainsKey("Description") AndAlso
        CStr(objPart.ExportDefinitions(0).Metadata("Description")) = "Spell Checker"
            ).FirstOrDefault()

 Dim objVersion as System.Version = ReflectionModel.ReflectionModelServices.GetPartType(objPartDef).Value.Assembly.GetName.Version 
```

由于该问题被标记为 C#，因此这里尝试进行翻译。我没有 C# 编译器，也没有使用该语言，因此可能存在语法错误（我几乎肯定会弄错 lambda）：

```
Primitives.ComposablePartDefinition objPartDef;

objPartDef = myCatalog.Parts.Where( objPart => objPart.ExportDefinitions.Count > 0 &&
   objPart.ExportDefinitions(0).Metadata.ContainsKey("Description") && 
   Convert.ToString(objPart.ExportDefinitions(0).Metadata("Description")) == "Spell Checker").FirstOrDefault();

System.Version objVersion = ReflectionModel.ReflectionModelServices.GetPartType(objPartDef).Value.Assembly.GetName.Version 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-11T09:36:25.860

猫核心/maven-metadata.xml | 尾-5 | 头-1 | grep -o '[0-9].*' |awk -F '<' '{print $1}'

# c# - How to display new record database table in the Grd View without postback

> ID：14985711
> 
> 赞同：0
> 
> 时间：2013-02-20T17:07:12.763
> 
> 标签：c#, asp.net, gridview, obout

My current project is CRM based project, all the customer queries are stored in table.

All those records we are displaying in obout grid. To see the new query(new record) every time we are refreshing the entire page . Is their any way to show the new records with out postback

As the same functionality for mail inbox , when we receive the new mail it just show in out inbox without any post back . how to achieve this..

Thank You.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:13:57.437

您是否尝试过使用更新面板？

```
<asp:ScriptManager runat="server" />

<asp:UpdatePanel runat="server">
    <ContentTemplate>
       <obout:Grid id="grid1" runat="server"  CallbackMode="false" ... />
       <asp:Timer runat="server" id="Timer1" Interval="10000" OnTick="Timer1_Tick"></asp:Timer>
    </ContentTemplate>
</asp:UpdatePanel> 
```

如果网格已经存在，对您来说将是更简单的解决方案。更多信息[http://www.asp.net/web-forms/tutorials/aspnet-ajax](http://www.asp.net/web-forms/tutorials/aspnet-ajax)

要自动刷新更新面板，请在更新面板中放置一个`Timer`控件，并使用您希望刷新网格的时间（以毫秒为单位）设置 Interval 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:13:10.890

您可以使用**AJAX** [http://www.asp.net/ajax](http://www.asp.net/ajax)。我向您推荐 JQuery 库[http://jquery.com/](http://jquery.com/)来完成您的任务。

使用 JQuery ( [http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/) ) 的 AJAX 示例：

```
$.get('ajax/test.html', function(data) {
    $('.result').html(data);
    alert('Load was performed.');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:40:37.933

另请使用 jquery 和 Jqgrid 查看 SignalR。可以将通知推送到浏览器。谢谢

# javascript - Creating a counter using JavaScript dynamic object within switch()

> ID：14985712
> 
> 赞同：0
> 
> 时间：2013-02-20T17:07:13.220
> 
> 标签：javascript, object, dynamic, counter

I am trying to add a counter into the code below.

I am iterating over DOM elements in my page and converting a text string into an object. I am trying to create an object of the following prototype:

```
// my desired object layout:
eligList = {
    'perfect': {
        'id': 1,
        'qty': 3
    }
}

$(document).ready(function() {
    eligList = {};
    // FROM: http://www.jquery4u.com/jquery-functions/jquery-each-examples/
    $(selector).each(function(index, value) {
        $this = $(this);  // cache
        apr   = parseFloat($.trim($this.find('.apr .js-apr').text()));
        eligName  = $.trim($this.find('.eligibility .js-hist').text());

        eligList[eligName] = (eligList[eligName] || {});

        switch(eligName) {
            case 'perfect':
                eligID = 1;
                // THE PROBLEM!
                console.log('eligList', eligList.perfect); // empty :s
                eligList[eligName]['qty'] = (eligList[eligName]['qty']++ || 1); // eligList.perfect.qty never gets set (at all)
                break;  
            case 'excellent':
                eligID = 2;
                break;  
            case 'good':
                eligID = 3;
                break;  
            case 'average':
                eligID = 4;
                break;  

            default:
                eligID = 5;
                break;  
        }

        eligList[eligName] = {'id': eligID};

        $this.data({'apr': apr, 'elig': eligID});

        console.group('article ' + index);
            console.log(apr);
            console.log(eligID);
        console.groupEnd();
    });

    console.log(eligList);
}); 
```

I suspect this is a scope issue. So, my question is how can I make my script count the `quantity` of `perfect`, `excellent`, `good` etc?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:14:05.573

这是一个工作版本：

```
<ul>
    <li id="test1">
        <span class="apr"><span class="js-apr">465464564</span></span>
        <span class="eligibility"><span class="js-hist">perfect</span></span>
    </li>
    <li id="test2">
        <span class="apr"><span class="js-apr">465464564</span></span>
        <span class="eligibility"><span class="js-hist">good</span></span>
    </li>
    <li id="test3">
        <span class="apr"><span class="js-apr">4222222</span></span>
        <span class="eligibility"><span class="js-hist">excellent</span></span>
    </li>
    <li id="test4">
        <span class="apr"><span class="js-apr">12121</span></span>
        <span class="eligibility"><span class="js-hist">excellent</span></span>
    </li>
</ul>

$(document).ready(function() {
    eligList = {};
    // FROM: http://www.jquery4u.com/jquery-functions/jquery-each-examples/
    $('ul li').each(function(index, value) {
        $this = $(this);  // cache
        apr   = parseFloat($.trim($this.find('.apr .js-apr').text()));
        eligName  = $.trim($this.find('.eligibility .js-hist').text());

        if(!eligList[eligName]){
            eligList[eligName] = {
                id : null,
                qty : 0
            }
        } else {
            eligList[eligName] = eligList[eligName];
        }

        switch(eligName) {
            case 'perfect':
                eligID = 1;                
                break;  
            case 'excellent':
                eligID = 2;
                break;  
            case 'good':
                eligID = 3;
                break;  
            case 'average':
                eligID = 4;
                break;
            default:
                eligID = 5;
                break;  
        }

        eligList[eligName].id = eligID;
        eligList[eligName].qty++;

        $this.data({'apr': apr, 'elig': eligID});

        console.group('article ' + index);
            console.log(apr);
            console.log(eligID);
        console.groupEnd();
    });

    console.log(eligList);
}); 
```

[http://jsfiddle.net/JQEKz/](http://jsfiddle.net/JQEKz/)

# asp.net - Gridview Change background color based on date

> ID：14985713
> 
> 赞同：2
> 
> 时间：2013-02-20T17:07:14.907
> 
> 标签：asp.net, vb.net, gridview

I would like to change the background color on my gridview based on current date. The code below works, but the future date which will be colored in blue starts two days later instead of 1 day which is tomorrow. Am I missing something in the code or should it be modified differently? .

```
If e.Row.RowType = DataControlRowType.DataRow Then
                    Dim data As DateTime = Convert.ToDateTime(DirectCast(e.Row.DataItem, DataRowView)("Date").ToString())
                    Dim diff As TimeSpan
                    diff = DateTime.Now.Subtract(data)
                    Dim days As Integer = diff.Days
                    'Yellow = past date / White = current date / Blue = future date
                    If days > 0 Then
                        e.Row.BackColor = Drawing.ColorTranslator.FromHtml("#FFFFBB") 'past date'
                    ElseIf days < 0 Then
                        e.Row.BackColor = Drawing.ColorTranslator.FromHtml("#BAD8FF") 'future date'
                    ElseIf days = 0 Then 'present date
                        'do nothing
                    End If
                End If
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:15:39.203

您可能希望使用截断时间的`Date`属性：`DateTime`

```
Dim data = DirectCast(e.Row.DataItem, DataRowView)
Dim day As Date = data.Row.Field(Of Date)("Date").Date
Dim daysDiff As Int32 = (Now.Date - day).Days 
```

# css - CSS apply border to if it has an tag inside

> ID：14985717
> 
> 赞同：2
> 
> 时间：2013-02-20T17:07:27.917
> 
> 标签：css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:18:08.243

如果您无法编辑 HTML，那么纯粹使用 CSS 是不可能的。它涉及到下级联，到`a`，然后备份到样式`li`，这是 CSS 不能做的（还）。您需要使用 javascript/jquery 来获得“上升”功能。

或者，制作`a`100% 的宽度和高度`li`，然后将边框应用于`a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:29:16.733

尝试这样的事情：

```
li > a {
    border: 1px solid red;
    display: block;
    height: 100%;
    width: 100%;
} 
```

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/Lh2Su/1/)]]]

**更新：** CSS 选择器从右到左进行评估。所以，当浏览器在寻找`li`它时，它不会看它的孩子，而是看它的父母。[为什么我们没有父选择器](http://snook.ca/archives/html_and_css/css-parent-selectors)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:17:49.880

在它自己/您自己的 CSS 类中：

```
.hasLink{
    border-radius: 3px;
} 
```

引用你的 html 上的类（假设我们称之为 main.css）：

```
<link href="/Content/styles/main.css" rel="stylesheet" type="text/css" /> 
```

然后每当你有一个`<li>`with `<a>`：

```
<li class="hasLink">

  <a href="http://google.pt">Google</a>

</li> 
```

这有帮助吗？我不确定你是否想要比这更聪明的东西...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:20:03.950

你可以使用这个：

```
.someClass{ border: 1px solid #anycolor;} 
```

还有你的 html

```
<li class="someClass">
   <a href="#">Something</a>
</li>

<li>
   <h3>other</h3>
</li> 
```

# php - Single-Click Avatar Upload Problems

> ID：14985718
> 
> 赞同：0
> 
> 时间：2013-02-20T17:07:31.213
> 
> 标签：php, javascript, jquery, html, forms

I'm trying to make a single-click avatar upload form. This is the Javascript / php mixed code:

```
<script type="text/javascript">
function uploadavatar(){
    $('#frmuploadavatar').submit(); 
}
    <?php 
    if(isset($_POST["btnuploadavatar"])){
    $extension = pathinfo($_FILES["file"]["name"], PATHINFO_EXTENSION);
    $filename = pathinfo($_FILES["file"]["name"], PATHINFO_FILENAME);
    $allowedExts = array('jpg','png');
    if(!in_array($extension, $allowedExts)){
        ?>
        $('#smlavatar').html("The uploaded file is not a jpg / png image!");
        $('#smlavatar').attr("class","warning");
        <?php
    }else if($_FILES["file"]["size"]>2097152){
        ?>
        $('#smlavatar').html("The uploaded file shouldn't exceed 2 megabytes!");
        $('#smlavatar').attr("class","warning");
        <?php
    }else{
        $uploadpath = "avatars/" . $filename . rand(1,1000000) . "." . $extension;
        move_uploaded_file($_FILES["file"]["tmp_name"], $uploadpath);
        ?>
        $('#imgavatar').attr("src","<?php echo $uploadpath; ?>");
        $('#smlavatar').html("New avatar upload successfully!");
        <?php
    }
}
?>
</script> 
```

And here's the html code for form:

```
<form action="register.php" method="POST" id="frmuploadavatar">
<input type="file" class="avatarupload" id="inpuploadavatar" name="avatar" onchange="uploadavatar()" />
<input type="button" id="btnuploadavatar" value="Upload New Avatar" style="width: 150px;" />
</form> 
```

I didn't include the css code, but it's coded so that the file upload control is hidden and the button is visible but the user is actually clicking the file upload control instead of the button (file upload is on the front with z-index).
I know that the function uploadavatar() is being called by testing it with an alert. However, the form "frmuploadavatar" doesn't get submitted as the JQuery code tells it to. Help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:13:41.227

单击图片上传需要隐藏文件上传和表单中的按钮。确保表单没有嵌套在另一个表单中。

```
<form action="do_upload.php" id="frmupload">
<input type="file" id="inpupload" style="display:none" />
<input type="button" id="btnupload" value="Upload Avatar" />
</form> 
```

然后使用JQuery触发文件上传点击按钮点击：

```
$(document.body).ready(function(){
    $("#btnupload").click(function(){ $("#inpupload").trigger("click"); });
    $("#inpupload").change(function(){ $("#frmupload").submit(); });
}); 
```

完毕！如果您愿意，还可以用 ajax 上传代码替换 inpupload 的更改功能。

# php - Checkbox to be checked when condition satisfies

> ID：14985719
> 
> 赞同：0
> 
> 时间：2013-02-20T17:07:43.757
> 
> 标签：php, forms, checkbox

How to check the checkbox when condition satisfies?

```
<input name="pt_id[]" id="pt_id" type="checkbox" value="<?php echo the_ID(); ?>" <?php if(isset($_POST["pt_id"])) { echo 'checked="checked"'; } ?>/>&nbsp;<?php echo the_title(); ?> 
```

Please help me. Give me solution or suggestion for this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:19:40.430

好吧，您的代码已经完成了您需要的工作，但使用的是 PHP。如果你想捕捉一个事件，假设用户点击了一个 div 并且你想选中复选框，那么你需要使用**javascript/jquery**。

示例代码将是（使用 jquery）：

```
$(document).on('click', '#yourdiv', function() {
   $('#pt_id').attr('checked', true);
}); 
```

这将在单击**yourdiv**时选中复选框

如果您希望在单击**div2**时取消选中它，请执行以下操作：

```
$(document).on('click', '#div2', function() {
  $('#pt_id').attr('checked', false);
}); 
```

# java - How to call second class when button pressed?

> ID：14985722
> 
> 赞同：2
> 
> 时间：2013-02-20T17:07:50.777
> 
> 标签：java, swing

Iam making a simple program where the user enters name and description. If the user presses OK, the program will write the result to the file. Basically, i have 3 classes. I want to call my class2 from class1 and implement the method. I know how to do it in only one class but i would like to know this way too. Thanks in advance.

The problem is that the inputs cannot be added to the file. Maybe iam not calling the file name properly:

```
 if (result == JOptionPane.OK_OPTION){

class2 ad = new class2(this);
   } 
```

Below are my 3 classes:

Main

```
public class mainclass {
    public static void main(String[] args) {
        class1 a = new class1();
    }
} 
```

Class1

```
import javax.swing.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import javax.swing.table.*;
import java.util.*;

public class class1{

final JTextField field1 = new JTextField(10);
final JTextField field2 = new JTextField(10);
JPanel panel = new JPanel();

public  class1() {

        panel.add(new JLabel("Name:"));
        panel.add(field1);
        panel.setLayout(new GridLayout(5,2));
        panel.add(new JLabel("Description:"));
        panel.add(field2);

        int result = JOptionPane.showConfirmDialog(null, panel,"Enter Information", JOptionPane.OK_CANCEL_OPTION);

        if (result == JOptionPane.OK_OPTION) {
            class2 ad = new class2 ();
        }
    }
} 
```

Class2

```
import javax.swing.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import javax.swing.table.*;
import java.util.*;

 public class class2 {

    class1 a;

    public class2(class1 a) {

        this.a = a;

        a = new class1();

        BufferedWriter writer = null;

        try {

            writer = new BufferedWriter( new FileWriter("file.txt", true));

            String add1 = a.field1.getText();
            String add2 = a.field2.getText();

            writer.write(add1);
            writer.write("\t");
            writer.write(add2);
            writer.write("\t");

        } catch ( IOException e) {

        } finally {
            try {
            if ( writer != null)
                writer.close( );
            } catch ( IOException e) {
            }
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:02:03.767

in 中的行创建了一个与`a = new class1()`中`class2`创建的实例不同的实例`mainclass`。相反，将引用传递`class1`给您的`class2`构造函数。

```
if (result == JOptionPane.OK_OPTION) {
    class2 ad = new class2(this);
}
...
public class2(class1 a) {
    //a = new class1();
    this.a = a;
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T18:02:11.483

这是**一个**问题。

的构造函数在这里`class1`创建一个实例`class2`：

```
class2 ad = new class2(); 
```

它调用`class2`.

它创建了一个`class1`这里的实例：

```
a = new class1(); 
```

它调用`class1`.

这再次提示您。

因此，您只能`class2`在第二个提示之后（如果您取消）到达构造函数的其余部分。

# vb.net - 嵌套 TransactionScope 回滚 - 有可能吗？

> ID：14985723
> 
> 赞同：0
> 
> 时间：2013-02-20T17:07:53.510
> 
> 标签：vb.net, transactionscope, rollback

我试图将两个 TransactionScopes 包装在另一个 TransactionScope 中，但是当我运行程序并且在第二个事务范围内触发错误时，第一个事务不会回滚。是否可以回滚两者，或者我最好做点别的事情。由于表中的 TransactionScope 锁定行并且无法正常工作，我不得不将它们分开。

```
Using objTransaction As New Transactions.TransactionScope(Transactions.TransactionScopeOption.RequiresNew, New TimeSpan(0, 10, 0))

    Using objTransaction As New Transactions.TransactionScope(Transactions.TransactionScopeOption.RequiresNew, New TimeSpan(0, 10, 0))
    'Scope - 1
    End Using

    Using objTransaction As New Transactions.TransactionScope(Transactions.TransactionScopeOption.RequiresNew, New TimeSpan(0, 10, 0))
    'Scope - 2
    End Using

End Using 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:05:13.300

您使用了错误的事务范围选项。要让您的内部 TransactionScopes 在父范围中登记，您需要使用 TransactionScopeOption.Required。

当您使用必需的 TransactionScopeOption 时，它将在环境事务中登记（如果存在）。当您使用 RequiredNew 时，它不会参与环境事务。

[一篇解释差异的好文章在这里](http://msdn.microsoft.com/en-us/library/ms172152%28v=vs.90%29.aspx#Y1642)

# javascript - 正则表达式中的 / 是什么意思？

> ID：14985724
> 
> 赞同：0
> 
> 时间：2013-02-20T17:07:55.883
> 
> 标签：javascript, regex

我遇到了一些遗留代码，我们正在尝试使用 javascript 正则表达式对字符串进行完全匹配。

我试图了解他们为什么在匹配字符串之前和之后使用 / 。

例子

```
 var match = thinger.match(/stringToMatch/); 
```

这个角色是做什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:08:59.850

`/regex here/`是一种在 javascript 中声明正则表达式的方法。

字符是正则表达式声明的`/`分隔符，就像单引号或双引号是字符串声明的分隔符一样。

有关书面说明，请参阅[MDN 正则表达式参考页面](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。正则表达式可以在 javascript 中以以下两种方式之一声明：

```
var re = /match string here/i;
var re = new RegExp("match string here", "i"); 
```

使用该`/regex here/`方法的优点是：

1.  您可以在匹配中自由使用引号而不必转义它们，但`/`在使用此方法时您必须在 reg中转义 a
2.  打字更少，更紧凑

使用该`new RegExp("regex here")`方法的优点是：

1.  您可以使用 javascript 表达式来动态构造字符串或正则表达式参数，`new RegExp("first" + foo + "whatever")`而其他方法无法做到这一点。
2.  您不必担心转义正斜杠

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:09:03.397

`/`是正[则表达式文字分隔符](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Creating_a_Regular_Expression)[`'`，`"`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Syntax)类似于[字符串分隔符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Syntax)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:13:21.493

它是[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)的分隔符。就像您可以通过键入`'string'`而不是调用其构造函数来创建新的原始字符串一样，因此您可以使用而不是`new String('string')`指定 RegExp 。`/regexp/``new RegExp('regexp')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:10:44.397

它们是指定正则表达式开头和结尾的分隔符。您还可以附加诸如 /i 之类的运算符以使正则表达式大小写独立。

# mysql - 我应该如何使用 mysql 获得合作者的合作者？

> ID：14985725
> 
> 赞同：0
> 
> 时间：2013-02-20T17:07:56.403
> 
> 标签：mysql

目前我需要了解如何列出我的 (collaborator_a) 协作者的 (collaborator_b)**协作者**及其事件实例。

目前如何运作：

对于“*合作者B* ”

1.  *协作者 B*单击*协作者 A*项目页面上的“将我连接到项目”按钮。
2.  *协作者 A*的用户 ID保存为**collaborator_a**
3.  *协作者 B*的用户 ID保存为**collaborator_b**
4.  *Collaborator B*想要链接的项目ID ，保存为**event_instance_id_a**
5.  *为Collaborator B*创建了*Collaborator A*项目的一个实例。这个新项目实例的 ID 保存为**event_instance_id_b**

 ***这也是为“*协作者 A* ”创建的，但 ID 被镜像。

结尾。

我的表看起来像这样：

**合作者**

```
id  collaborator_a  collaborator_b  event_instance_id_a  event_instance_id_b
--  --------------  --------------  -------------------  -------------------
1   1               2               1                    2
2   2               1               2                    1
3   1               3               1                    3
4   3               1               3                    1
5   6               9               4                    5
6   9               6               5                    4
7   1               9               6                    5
8   9               1               5                    6 
```

**事件实例**

```
id  user_id  description
--  -------  --------------
1   1        Some event desc...               
2   2        Some event desc...     
3   3        Some event desc...     
4   6        Some event desc...    
5   9        Some event desc...   
6   1        Some event desc... 
```

**用户**

```
id  username  
--  --------  
1   username_1           
2   username_2           
3   username_3         
4   username_4     
5   username_5     
6   username_6
7   username_7     
8   username_8     
9   username_9 
```

我能够获得我的 (*collaborator_a*) 自己的协作者 (*collaborator_b*) 及其事件实例，如下所示：

变量

```
$user_id = 1
$event_instance_id_a = 2 
```

MySQL

```
SELECT c.*, u.*, e.* 
FROM (collaborator c) 
JOIN event_instance e ON c.event_instance_id_b = e.id 
JOIN user u ON c.collaborator_b = u.id 
WHERE c.event_instance_id_a = $event_instance_id_a 
AND c.collaborator_a = $user_id 
```

有任何友好的人可以帮助我将协作者的协作者获取到特定的事件实例 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:58:41.903

不完全确定你在追求什么......但如果你想获得一个事件的所有贡献者，这应该工作[http://sqlfiddle.com/#!3/2d1a0/1](http://sqlfiddle.com/#!3/2d1a0/1)：

```
create table event_collaborators (
  event_id int,
  collaborator_id int
);

create table events (
  id int, 
  user_id int,
  description varchar(255) not null
);

create table users (
  id int, 
  username varchar(25) not null
); 
```

我已经修改了您的专栏，以便更容易理解，尽管这样做可能无法完全回答您的问题。

```
SELECT ec.*, e.*, u.username
FROM event_collaborators AS ec
INNER JOIN events AS e ON ec.event_id = e.id
INNER JOIN users as u ON ec.collaborator_id = u.id
WHERE ec.event_id = 3; 
```

使用`*`是一个非常糟糕的主意，但出于演示目的，它是可以的。我也不喜欢两个大的想法，`INNER JOINS`所以我会在映射表上使用索引`event_collaborators`并尽可能分开查询。***

# java - 某项目安卓蓝牙遥控指导

> ID：14985726
> 
> 赞同：0
> 
> 时间：2013-02-20T17:08:02.953
> 
> 标签：java, android, bluetooth, client, controls

我急需一些关于如何构建安卓蓝牙遥控器的指导。

我知道需要做两件事。服务器将通过蓝牙从 android 设备接收请求，而 android 设备充当客户端。

我发现了这一点，我认为这在一定程度上会有所帮助。 [http://luugiathuy.com/2011/02/android-java-bluetooth/](http://luugiathuy.com/2011/02/android-java-bluetooth/)

我想要的只是一些关于我应该开始学习什么以及如何在大约两周内成功构建这个东西的指导。我在Java方面并不是那么强。因此，您可以为我提供有关如何开始使用它的链接和建议。帮助将不胜感激。谢谢！

附加细节：遥控器将用于控制 vlc 播放器、关闭、重启、控制幻灯片等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:56:38.730

[由于制造商蓝牙设备堆栈](http://en.wikipedia.org/wiki/Bluetooth_stack)之间缺乏专门的内聚标准，我建议您从小处着手，选择您希望执行的特定设备和操作。

我首先尝试在 Windows 设备上设置蓝牙服务器，并尝试让服务器接收简单的消息（如果这是你的方式）。

如果您决定走一条不同的路线并且正在考虑使用 linux，那么请查看[bluesZ](http://en.wikipedia.org/wiki/Bluetooth_stack#BlueZ)，它是官方的 Linux 蓝牙协议栈。

如果您想在池的深处做更多的事情，请查看[Ubertooth](http://ubertooth.sourceforge.net/)或 [Video Primer](http://hak5.org/episodes/hak5-920) and [library for android 使用](https://github.com/gnychis/ubertooth-android#readme)

[一个人去很危险 拿这个....](http://knowyourmeme.com/memes/its-dangerous-to-go-alone-take-this)帮助您入门的资源集

*   [用于处理原始套接字编程的 msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362932(v=vs.85).aspx)
*   [这个 SO Question 列出了一些 Windows api 包装器](https://stackoverflow.com/questions/144862/bluetooth-apis-in-windows-net)
*   [这显示了 java 中的蓝牙客户端和服务器示例](http://www.miniware.net/mobile/articles/viewarticle.php?id=22)
*   [32feet 有一个简单的方法来滚动你自己的简单蓝牙服务器](http://32feet.codeplex.com/wikipage?title=Bluetooth%20Server-side)
*   [这个问题似乎与您想要做的事情相似。](https://stackoverflow.com/questions/6353939/bluetooth-android-to-windows-7)
*   [BlueZ 简介](http://people.csail.mit.edu/albert/bluez-intro/)

# javascript - JavaScript - 从字符串中删除单位分隔符（Unicode：0x1f）字符

> ID：14985736
> 
> 赞同：3
> 
> 时间：2013-02-20T17:08:24.793
> 
> 标签：javascript, special-characters

如何使用 javascript 从字符串中删除单位分隔符（Unicode：0x1f）？

我有正在创建 xml 的字符串，但是单元分隔符字符使 XML 无效。JavaScript中有没有办法去掉这样的字符？

我已经尝试过了，但是它不起作用：

`input.replace('/\c_/g', '');`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:15:40.593

这应该有效：

```
input = input.replace(RegExp(String.fromCharCode(31),"g"),"") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:15:08.563

您可以在 javascript 字符串文字中使用`\xXX`.

这应该工作：

```
input = input.split("\0x1f").join(''); 
```

# c - 如何以随机顺序访问 C 数组，确保所有元素最多访问一次

> ID：14985737
> 
> 赞同：1
> 
> 时间：2013-02-20T17:08:26.083
> 
> 标签：c, arrays, random

假设我有一个非常大的 64 位整数数组，比如其中一百万个这样定义：

```
uint64_t myNumbers[1000000]; 
```

挑战在于如何随机访问这些元素中的每一个，以确保每个元素都被访问一次。因此，例如，我可以简单地使用 for 循环并遍历该数组并将所有数字相加以获得结果（这会溢出，但这并不重要）。

我想做的是重复这一点，但随机访问该数组中的元素，以便最终得到与正常迭代相同的结果。

那么我将如何创建另一个指向原始数组元素的指针数组，在迭代它时，它会随机访问每个元素。这不必实时完成，设置第二个阵列所需的时间也不必很快。

基本上我想不出一个好方法来生成指向第一个数组中元素的随机指针数组，并且可以真正使用专家的一些见解:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:17:13.803

您想要生成随机排列（索引数组或指向原始数组元素的指针数组，或者根据您的用例对原始数组本身进行洗牌是可以接受的） .

生成随机排列的一种好方法称为[Knuth shuffle](http://en.wikipedia.org/wiki/Knuth_shuffle)：

```
To shuffle an array a of n elements (indices 0..n-1):
  for i from n − 1 downto 1 do
       j ← random integer with 0 ≤ j ≤ i
       exchange a[j] and a[i] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:17:39.320

如果空间和性能不是问题，我想到的第一个解决方案是：创建一个与要访问的数组大小相同的数组；当您生成随机索引时，如果不存在则将其放入此新数组中，否则将其递增并再次检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:18:43.677

`0`您可以拥有一个包含从到 的数字的数组`length of the array`，然后对其进行洗牌，然后使用其元素作为索引对其进行迭代。

```
void shuffle(int *shuffled, int lenght, int times)
{
    int i,j,k;
    int aux;

    j = k = 0;
    for(i=0;i<times;i++)
    {
        do
        {
            j=rand() % length;
            k=rand() % length;
        } while j==k;

        aux = shuffled[j];
        shuffled[j] = shuffled[k];
        suffled[k] = aux;
    }
} 
```

然后，您可以按随机顺序访问元素。

```
for(i=0;i<lenght;i++)
{
    myNumbers[shuffled[i]];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:39:17.750

```
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
#define sz 100
uint64_t myNumbers[sz];
long ind[sz];
void shufle(long r){
    long pick,l,t;
    for(l=0;l<r;l++)ind[l]=l;
    l=r;
    while(--l>0){
        pick=((1LL*random())*l)/RAND_MAX;
        t=ind[l];
        ind[l]=ind[pick];
        ind[pick]=t;
    }
} 

main(){
    //tst;
    long i;
    for(i=0;i<10;i++)myNumbers[i]=i;
    shufle(10);
    for(i=0;i<10;i++)printf("%ld %ld\n",i,myNumbers[ind[i]]);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-20T17:21:40.130

使用 while 循环和一个计数器，伪代码应该是：

```
 uint64_t myNumbers[1000000];
 uint64_t visited[1000000];

 int counter = 0;
 while (counter!=1000000)
 {
  int r = random(0,1000000);
  if (visited.Contains(r))
      break;
  else
     {
      printf(myNumbers[r]); //the action to be performed on the numbers in your array
      visited.add(r);
      counter++;
      }
 } 
```

# c++ - Qt 启动 cmd.exe

> ID：14985739
> 
> 赞同：0
> 
> 时间：2013-02-20T17:08:34.113
> 
> 标签：c++, windows, qt, process, cmd

我想从没有开始`cmd.exe`，因为我需要与正在运行的 cmd 交互。并且 cmd 必须在前台。我想在第一个进程完成后获取，然后我将执行一些其他任务，例如显示一些消息框或启动另一个 cmd.exe 或在该 cmd 窗口中执行另一个命令。但是 cmd 窗口必须对用户可见。`QProcess``startDetached``readyRead()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:12:41.743

听起来您想运行一个（或多个）命令行进程，在运行时显示其输出，然后在完成后运行另一个进程。

我通常通过在我的主窗口中有一个只读的[QPlainTextEdit](http://qt-project.org/doc/qt-4.8/qplaintextedit.html)来将 io 显示到命令行来做到这一点。在堆上创建一个[QProcess](http://qt-project.org/doc/qt-4.8/qprocess.html)`connect` ，它的[readyReadStandardError](http://qt-project.org/doc/qt-4.8/qprocess.html#readyReadStandardError)和[readyReadStandardOutput](http://qt-project.org/doc/qt-4.8/qprocess.html#readyReadStandardOutput)信号发送到主窗口中的一个槽，该槽将文本打印到 QPlainTextEdit。[然后使用QProcess::start](http://qt-project.org/doc/qt-4.8/qprocess.html#start)参数启动命令行程序并等待它完成。完成后，以相同的方式开始下一个过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:39:03.557

您也可以在 GUI 旁边启用 Qt 中的控制台。

[Qt GUI 应用程序中的控制台输出？](https://stackoverflow.com/questions/3360548/console-output-in-a-qt-gui-app)

然后使用`qDebug`调用将文本输出到调试窗口或`iostream`使用`std::cout`and `std::cin`。

编辑：要显示控制台，请在您的 .pro 中添加“CONFIG += 控制台”，然后在您的项目 > 运行设置中，确保选中“在终端中运行”。

编辑2：

[https://www.google.com/search?q=qprocess+cmd](https://www.google.com/search?q=qprocess+cmd)

[http://www.qtcentre.org/threads/12757-QProcess-cmd](http://www.qtcentre.org/threads/12757-QProcess-cmd)

```
#include <QByteArray>
#include <QProcess>
#include <iostream>
#include <string>

using namespace std;

int main(int argc,char** argv)
{
    QProcess cmd;
    cmd.start("cmd");
    if (!cmd.waitForStarted())
        return false;
    cmd.waitForReadyRead();
    QByteArray result = cmd.readAll();
    cout << result.data();

    string str;
    getline(cin,str);
    while(str != string("exit"))
    {
        cmd.write(str.c_str());
        cmd.write("\n");
        cmd.waitForReadyRead();
        result = cmd.readAll();
        cout << result.data();
        getline(cin,str);
    }
} 
```

我在这里测试了代码，它允许您与命令行交互并通过 readyread() 获取输出，但是如果您使用 GUI 运行它，则需要将这个 while 循环从主线程移到另一个线程中.

# iphone - 模态演示样式中忽略的 UITableView 样式

> ID：14985740
> 
> 赞同：0
> 
> 时间：2013-02-20T17:08:42.010
> 
> 标签：iphone, objective-c, ipad, uitableview, uimodalpresentationstyle

当在 iPad 内部以模态方式呈现时，我对 a `UITableView`in a的样式有疑问。很简单，我希望表格单元格边框不出现，因此在 IB 中，我将分隔符样式设置为“无”，将分隔符颜色设置为“清除颜色”。在 NIB 中，我的分组表看起来像我想要的样子：`UIViewController``UINavigationController`

![在此处输入图像描述](../Images/824e8ee1e46150cc4b22093ce79547d9.png)

在 NIB 中，tableView 连接到文件的所有者，因为它是源和委托。它也被设置为 IBOutlet。文件所有者的类名已正确设置为我要加载此 NIB 的 VC。在启动时，我创建了这个 VC 的一个实例，然后我创建了一个`UINavigationController`. `UINavigationController`我用这个 VC（有）初始化`UITableView`，然后以`UINavigationController`模态方式呈现。在 iPad 上，我使用模态表单呈现样式呈现它。

在我的 AppDelegate 的`application:didFinishLaunchingWithOptions:`方法中，我实例化并保留对 VC 及其父级 UINavigationController 的引用：

```
self.loginViewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
self.loginViewNavigationController = [[UINavigationController alloc] initWithRootViewController:self.loginViewController]; 
```

然后......在执行了一些逻辑之后（仍在 AppDelegate 中），我以`UINavigationController`模态方式呈现：

```
if (self.loginViewNavigationController != nil) {

    if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad)
        self.loginViewNavigationController.modalPresentationStyle = UIModalPresentationFormSheet;

        [self.window.rootViewController presentViewController:self.loginViewNavigationController animated:YES completion:nil];
} 
```

iPhone 上的世界一切都很好，因为我的单元格边框不可见：

![在此处输入图像描述](../Images/99999d7a0012aacdc56a533f7df23c4a.png)

但是，在 iPad 上，单元格边框清晰可见，并且我的导航标题样式全部消失（这是另一天的问题）：

![在此处输入图像描述](../Images/914e660cc2a938fb406023091b7537e0.png)

我真的很想知道为什么`UITableView`在 iPad 上会忽略这样的分隔符样式。我尝试将其设置`modalPresentationStyle`为 PageSheet 和 FullScreen 并遇到同样的问题。我还尝试在 VC `viewDidLoad`（包含表格视图）中设置这些属性，但无济于事。我也尝试过创建一个特定于 iPad 的 NIB“LoginViewController~ipad”并以这种方式连接所有内容，但这似乎也没有什么不同。

这可能是我保留登录 VC 并且它包含的方式`UINavigationController`，但我不能确定，因为这在 iPhone 上工作得很好。

我猜这可能与 iPad 上的模态演示有关，对于我所有的搜索和尝试不同的组合，我无法弄清楚发生了什么。有任何想法吗？

[编辑]

我正在使用 iOS 6.1、5.1 和 5.0 的模拟器工作。我在所有版本中都看到了同样的问题。我现在坚持使用 iOS 6.1，并将向后移动以兼容。我还没有转移到设备上。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:39:23.970

事实证明，我的 UINavigationController 子类中有一些错误的样式代码（不好，我知道吗？），没有正确设置导航栏和表格的样式。我已经解决了这个问题，现在 UINavigationController 看起来应该如此。

# mysql - 两个表的 MySQL IF 语句部分

> ID：14985748
> 
> 赞同：1
> 
> 时间：2013-02-20T17:09:11.637
> 
> 标签：mysql, sql

我试图用 MySQL 语句说这样的话：

```
IF 
  table1.fieldA = "SearchText" AND 
  table2.fieldB = "FindThis" 
THEN 
  table2.fieldC = "Y" 
```

我很确定那里一定有一个`JOIN`，但我是新手，所以我不知道如何写它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:11:11.680

你可以这样做

```
SELECT yourfields
FROM table1 join table2 on table1.ID= table2.ID
WHERE CASE WHEN table1.fieldA = "SearchText" AND table2.fieldB = "FindThis" THEN table2.fieldC ELSE '' END = "Y" 
```

你可能需要也可能不需要`ELSE ''`MySQL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:37:53.673

我最终做的是`VIEW`为每组表创建一个。然后我`UPDATE`对这两列做了一个（因为它们现在在同一个表中），如下所示：

```
UPDATE view_table 
SET truehold = CONCAT('Y', truehold) 
WHERE columnA ='BLAH' AND columnB='12345' 
```

然后，在构建我的查询时，我可以说：

```
WHERE truehold NOT LIKE 'Y%' 
```

因为有一些重复，这使得列说“YY”或“YYY”。

无论如何，谢谢大家让我走上正确的道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:17:36.923

不是很清楚你的要求。对于连接表更新；

```
Update t2
Set t2.fieldC = "Y"
from table2 t2 join table1 t1
           on t2.colM = t1.colN --join with appropriate columns
where t1.fieldA = "SearchText" and  t2.fieldB = "FindThis" 
      and t2.fieldC is null -- if you need to update only nulls (as per comment) 
```

# wpf - 为什么 TouchDown、TouchUp 事件不出现在 WPF 中？

> ID：14985757
> 
> 赞同：1
> 
> 时间：2013-02-20T17:09:37.517
> 
> 标签：wpf, windows-phone

我正在开发一个 Windows Phone 7.1 应用程序。我使用 Expression Blend 4 进行设计，然后在 WPF 中编写代码。

我有一些 Path 对象，我想检测这些对象的 TouchDown 和 TouchUp 事件，但我的问题是这些事件没有出现！:O

我只有 Tap and Hold 事件，但没有 TouchDown 和 TouchUp（通常是使用 TouchEventArgs 类的事件）。

我需要一些外部库吗？正如我在 MSDN 中看到的，TouchEventArgs 类存在于 4.0 版（[http://msdn.microsoft.com/en-us/library/system.windows.input.toucheventargs(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.toucheventargs(v=vs.100).aspx)）。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:11:05.550

当您开发 Windows Phone 7.1 应用程序时，您使用的是[**Silverlight for Windows Phone**](http://msdn.microsoft.com/en-us/library/ff426934%28v=vs.95%29.aspx)。那不是WPF。

Silverlight 中的[UIElement](http://msdn.microsoft.com/en-us/library/ms590078%28v=vs.95%29.aspx)类没有`TouchDown`或`TouchUp`事件，就像WPF 中的[UIElement一样。](http://msdn.microsoft.com/en-us/library/ms590078.aspx)

您可以改用[操作事件](http://msdn.microsoft.com/en-us/library/ff426933%28v=vs.95%29.aspx)。

# python - 将多个文件转换为 .wav 的程序

> ID：14985758
> 
> 赞同：0
> 
> 时间：2013-02-20T17:09:38.890
> 
> 标签：python, converter, wav

我正在寻找将.FTM 文件转换为.WAV 的程序。.FTM 是一种专有格式，用于称为 Famitracker 的视频游戏音乐跟踪程序。我使用的创建 .FTM 文件的程序具有内置的 .WAV 导出功能，但问题是我一次只能做一个。我想制作一个程序，将选定文件夹中的多个 .FTM 文件连续转换为 .WAV。我有超过 3,000 个文件要转换，而简单地手动完成整个过程将花费很长时间。我很期待学习这个，只是不太确定从哪里开始。

任何帮助表示赞赏，非常感谢！

PS：对于它的价值，我在我的电脑上安装了 Python。这会是一个合理的环境来创建这样的程序吗？

我使用的是 Windows 7 系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:51:09.143

如果 .FTM 文件没有一些奇怪的编码，也许可以在 python 中尝试 Pymedia 模块，看看是否可以转换它们....

[http://pymedia.org/](http://pymedia.org/)

# c++ - 计算汽车付款金额未正确计算

> ID：14985759
> 
> 赞同：0
> 
> 时间：2013-02-20T17:09:40.160
> 
> 标签：c++

我正在为家庭作业创建一个小程序。程序运行正常，但计算不正确。

我用来计算付款金额的公式是：

付款 = (intRate * (1+intRate)^N / ((1+intRate)^N-1)) * L

其中“N”是支付次数，“L”是本金。我为此编写的代码是：

```
monthlyPayment = (intRate * pow ((1 + intRate), numberPayments) / (intRate * pow ((1 +     intRate), numberPayments)-1))*principal; 
```

完整的代码如下。

```
#include <iostream>
#include <string>
#include <cmath>
#include <iomanip>

using namespace std;

int main()
{
    double principal, intRate, paybackAmount, interestPaid,  monthlyPayment;
    int numberPayments;

    // Change the panel color.
    system ("color F0");

    cout << "\n";
    cout << "This application will calculate your loan amounts." << endl;
    cout << "Please enter the data below." << endl;
    cout << "\n";

    cout << "Loan Amount: ";
    cin >> principal;
    cout << "Monthly Interest Rate: ";
    cin >> intRate;
    cout << "Number of Payments: ";
    cin >> numberPayments;

    cout << "\n\n\n";

    monthlyPayment = (intRate * pow ((1 + intRate), numberPayments) / (intRate *     pow ((1 + intRate), numberPayments)-1))*principal;
    paybackAmount = monthlyPayment * numberPayments;

    cout << fixed << setprecision(2) << showpoint << left << setw(24) << "Loan     Amount:" << "$" << setw(11) << right << principal << endl;
    cout << fixed << setprecision(1) << showpoint<< left << setw(24) << "Monthly     Interest Rate:" << setw(11) << right << intRate << "%" << endl;
    cout << fixed << setprecision(0) << left << setw(24) << "Number of Payments:"     << setw(12) << right << numberPayments << endl;
    cout << fixed << setprecision(2) << showpoint<< left << setw(24) << "Monthly     Payment:" << "$" << setw(11) << right << monthlyPayment << endl;
    cout << fixed << setprecision(2) << showpoint<< left << setw(24) << "Amount     Paid Back:" << "$" << setw(11) << right << paybackAmount << endl;
    cout << fixed << setprecision(2) << showpoint<< left << setw(24) << "Interest     Paid:" << "$" << right << setw(11) << paybackAmount - principal << "\n\n" << endl;

    system("pause");
} 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:14:19.003

`intRate`根据您的方程式，当您只应将分子相乘时，您将分子和分母都乘以 。

您还从第二个的结果中减去 1`pow`而不是从`numberPayments`.

```
(intRate * pow ((1 + intRate), numberPayments)-1)
//  ^ Why is this here?            Wrong place ^ 
```

你真正想要的是：

```
monthlyPayment = (intRate * pow(1+intRate, numberPayments) /
                            pow(1+intRate, numberPayments-1)) * principal; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:14:38.280

我认为你有额外的 intRate

```
 `(intRate * pow ((1 +     intRate), numberPayments)-1))*principal;`
   ^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:23:19.070

似乎加入了一个额外的论点：

```
((1+intRate)^N-1)) * L => (intRate * pow ((1 + intRate), numberPayments)-1))*principal
//                         ^^^^^^^^^  Look Odd. 
```

此外：

```
(1+intRate)^N-1 
```

您将其表示为：

```
pow ((1 + intRate), numberPayments)-1 
```

我会以不同的方式做到这一点：

```
pow ((1 + intRate), (numberPayments-1)) 
```

# mocking - 方法内部的 FakeItEasy 模拟错误

> ID：14985761
> 
> 赞同：0
> 
> 时间：2013-02-20T17:09:50.507
> 
> 标签：mocking, fakeiteasy

我有一个我正在尝试测试的方法，需要测试是否引发错误。如果员工存储库抛出错误，我想确保我得到 EmployeeServiceError 回来。我正在使用 FakeItEasy 模拟框架。

这是 FakeItEasy 代码：

```
//  Arrange
        var service = new EmployeeService(mockEmployeeRepository, mockCryptographer, mockApplicationUserRepository, mockEmployeeAddressRepository);

        IEnumerable<EmployeeDTO> employeeDTOs;

        //  Act
        employeeDTOs = service.GetEmployees();

        //  Assert
// How do I check the EmployeeServiceException thrown?

        A.CallTo(() => mockEmployeeRepository.GetAllForUi())
            .Throws(new NullReferenceException()); 
```

这是我正在测试的方法：

```
public IEnumerable<EmployeeDTO> GetEmployees()
        {
            IEnumerable<EmployeeDTO> employeeDTOs = null;

            try
            {
                var employees = _employeeRepository.GetAllForUi();
                employeeDTOs = Mapper.Map(employees, employeeDTOs);
            }
            catch (Exception exception)
            {
                throw new EmployeeServiceException(exception);
            }

            return employeeDTOs;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:04:00.643

使用 xUnit.net，我会这样做：

```
//  Arrange
A.CallTo(() => mockEmployeeRepository.GetAllForUi())
    .Throws(new NullReferenceException());

var service = new EmployeeService(
    mockEmployeeRepository,
    mockCryptographer,
    mockApplicationUserRepository,
    mockEmployeeAddressRepository);

//  Act
var exception = Record.Exception(() => service.GetEmployees();

//  Assert
Assert.IsType<EmployeeServiceException>(exception); 
```

`Record.Exception()`是 xUnit.net 的一项功能。也许 NUnit 也有类似的东西。

顺便说一句 - 你不应该`Exception`在你的方法中捕捉到一般类型`GetEmployees()`，但这是一个单独的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:19:02.163

This is how I would write it with NUnit:

```
A.CallTo(() => fakeEmployeeRepository.GetAllForUi())
    .Throws(new NullReferenceException());

var service = new EmployeeService(fakeEmployeeRepository, fakeCryptographer, fakeApplicationUserRepository, fakeEmployeeAddressRepository);

Assert.Throws<EmployeeServiceException>(() => service.GetEmployees()); 
```

I renamed the variables since they are not mocks. To prefix them with stub would also work.

# grails - 如何让 grails platform-ui 正确读取属性

> ID：14985764
> 
> 赞同：0
> 
> 时间：2013-02-20T17:09:55.197
> 
> 标签：grails

我认为这是

```
<ui:field bean="${orderInstance}" name="twoDayTickets" labelArgs="${[raceInstance.twoDayPrice]}" /> 
```

其中 orderInstance 是

```
class Order { 
...
Integer twoDayTickets=0
... 
} 
```

我在 messages.properties 中有以下属性

```
order.twoDayTickets.label=Two Day Tickets @ £{0} 
```

鉴于[http://grailsrocks.github.com/grails-platform-ui/ref/Ui%20Tags/field.html](http://grailsrocks.github.com/grails-platform-ui/ref/Ui%20Tags/field.html)的 ui:field 的 platform-ui 文档说

```
If specifying a bean, the label defaults to:

i18n message retrieved using <bean's Class>.<name>.label
... 
```

我会说我应该正确地将标签解析为关键 order.twoDayTickets.label。相反，我得到了名称的默认人类可读解释。任何人都可以阐明这一点吗？

# hardware - 我的 BI 项目（DW 和应用程序）有多少台服务器？

> ID：14985771
> 
> 赞同：0
> 
> 时间：2013-02-20T17:10:27.570
> 
> 标签：hardware, business-intelligence, pentaho, jasperserver

我目前正在做我最后一年的实习。我的项目是为一家公司开发一个完整的 BI 项目。

我需要从几个地方（平面文件，数据库，...）获取数据，将其放入 DW（我将创建）并制作临时报告。我肯定会使用 pentaho 或 jasper。

当然，我将为我的 DW 提供一个服务器（物理）。问题是，我可以将整个 BI 应用程序安装在放置 DW 的同一台服务器（ETL、报告...）上吗？

如果是，我应该在我唯一的物理服务器上创建 2 个虚拟服务器还是没用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:11:07.803

您可以在同一台服务器上安装整个 BI 应用程序。您可以为每个 BI 组件创建多个文件夹，例如 BI Server、ETL、Reporting 等。您无需创建 2 个虚拟服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T09:40:23.810

您还可以将 Ctools 插件包含到 BI Server 中以获得更好的 GUI 用途。Saiku 和 CDE 很棒，你可以很好地自定义 CDE 中的东西。Saiku 是一种下一级的双服务器，所以它非常适合你 joris。

# jquery - 在 jquery 和 css 中操作选项卡

> ID：14985774
> 
> 赞同：0
> 
> 时间：2013-02-20T17:10:32.483
> 
> 标签：jquery, css

我有这些标签：

```
<ul class="tab-nav">
    <li class="wui-first"><a class="wui-link" href="index.html">Home </a></li>
    <li class="tab-content"><a class="wui-link" href="#" rel="tabs1">Data1</a></li>
    <li class="tab-content"><a class="wui-link" href="#" rel="tabs2">Data2</a></li>
    <li  class="tab-content"><a class="wui-link" href="#" rel="tabs3">Data3</a></li
    <li class="tab-content"><a class="wui-link" href="#"rel="tabs4">Data4</a></li>
</ul> 
```

CSS看起来像这样：

```
ul.tab-nav li a.selected {

    background-color: #E8E8E8;
    color: #980000   !important;
    font-weight: bold;
} 
```

这是html部分：

```
<div id="main_area">
    <div class="tab-content" id="tabs1">
        <div id="div1" class="vol"></div>
        <div id="div2" class="vol"></div>
        <div id="div3" class="vol"></div>
        <div id="div4" class="vol"></div>
   </div>
</div> 
```

我喜欢创建一个仅将 CSS 应用于所选选项卡并在 html main_area 中显示属于该选项卡的内容的脚本。有人可以帮我解决这个问题。现在，我选择每个选项卡，css 保持不变。当我在选项卡之间单击时，当前单击选项卡应该具有 .selected 属性。其他人应该回到默认状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:23:12.483

至于将 css 应用于您单击的那个，假设您使用的是 jQuery，请尝试以下操作：

```
$('.tab-nav li').click(function(){
    // remove selected class from any others
    $('.selected').removeClass('selected');
    // add selected class to the one you clicked
    $(this).addClass('selected');
}); 
```

要提取正确的内容，我可能会为内容 div 及其对应的选项卡设置相同的 rel 属性。然后当你点击tab时，它可以得到rel，然后找到下一个具有相同rel的div。

# javascript - 获取jQuery中选中复选框的值

> ID：14985775
> 
> 赞同：1
> 
> 时间：2013-02-20T17:10:32.860
> 
> 标签：javascript, jquery

在 jQuery 中单击提交按钮后，我试图获取一组选定的复选框，但我似乎无法显示任何内容。下面的代码：

jQuery：

```
$(".btn").live("click",function () {
    var ffirst = $('input:checkbox[name="first[]"]:checked').map(function () {
        return this.value;
    }).get();
});
$.each(ffirst, function(index, value) {
    alert(index + ': ' + value);
}); 
```

和下面的HTML：

```
<input type="checkbox" value="1" checked="checked" name="first[]">
<input type="checkbox" value="2" checked="checked" name="first[]">
<input type="button" class="btn" value="Go"> 
```

任何帮助，将不胜感激！

编辑：根据评论更改，但仍然损坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:13:24.533

你的 JS：

```
name=first 
```

您的 HTML：

```
name="first[]" 
```

这些不匹配。

添加方括号。您还需要引用它们，因为它们不是字母数字。

```
$('input:checkbox[name="first[]"]:checked') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:17:46.900

您使用了错误的选择器，请使用：

```
$('input:checkbox[name="first[]"]:checked') 
```

[现场演示](http://jsfiddle.net/YfdXZ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:28:35.267

尝试：

```
$(".btn").on("click",function () {
    $('input:checkbox[name="first[]"]:checked').each(function(index) {
        alert(index + ': ' + this);
        console.log(this);
        console.log($(this));
    });
}); 
```

如果真的需要，只需使用 (.live)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T17:43:13.907

您需要在单击处理程序之前声明 ffirst 数组，因为它超出了范围。每个循环必须在单击处理程序中发生，因为一旦填充了数组，它就需要执行。

不是最优化的代码，但这是一个有效的示例：

```
var ffirst = []; 
$(".btn").live("click",function () {
  ffirst = $('input[name="first[]"]:checked').map(function () {
    return $(this).val();
  });

  $.each(ffirst, function(index, value) {
    alert(index + ': ' + value);
  });
}); 
```

[工作演示](http://jsfiddle.net/BxsqN/)

# java - Java - 检查字符串是否在另一个字符串中

> ID：14985776
> 
> 赞同：-1
> 
> 时间：2013-02-20T17:10:35.743
> 
> 标签：java, string, substring

说我有这个...

```
 String one = "No";
 String two = "Yes, No, Maybe";

 if (one.contains(two))
 {
   System.out.println("yay");
 } 
```

当我运行它时，我认为 yay 会打印，因为字符串 1 在字符串 2 中，但事实并非如此。有没有另一种方法来检查一个字符串是否是另一个字符串的一部分，或者我只是错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:11:24.540

你的逻辑颠倒了。试试这个：

```
if (two.contains(one))
    . . . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:11:50.017

如果您反转检查，它将起作用`if (two.contains(one))`

从[**API**](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)：

```
public boolean contains(CharSequence s) 
```

> 返回：如果此字符串包含 s，则返回 true，否则返回 false

**在你的情况下：**

> 返回：如果两个包含一个，则返回 true，否则返回 false

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:12:15.197

你只是把它倒过来。

```
String one = "No";
String two = "Yes, No, Maybe";

if (two.contains(one))
{
  System.out.println("yay");
} 
```

# html - 如何在文本后面实现这一行？

> ID：14985779
> 
> 赞同：4
> 
> 时间：2013-02-20T17:10:49.560
> 
> 标签：html, css

![我说的效果](../Images/80fafcd65b16411874724748d5a50adc.png)

嘿！

我想创建如上图所示的效果。这些线条的宽度需要是动态的，因此它们会根据中间的文本进行调整。我用一张桌子试了一下：

```
 <table>
                <tr>
                    <td><hr /></td>
                    <td><p>The 20th of</p></td>
                    <td><hr /></td>
                </tr>
            </table> 
```

但是这些线条并不仅仅像我预期的那样填满了空间。我怎样才能解决这个问题？有比使用表格更好的方法吗？

编辑：刚刚注意到图像中的错字。请忽略它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:19:05.840

最简单的方法可能是使该行成为背景图像，然后在其前面放置另一个 HTML 元素以包含文本：

```
<div class='linebehind'>
    <span class='text'>The 20th of</span>
</div>

<style>
.linebehind {
    background: url('imageWithLine.gif') repeat-x;
    text-align: center;
}
.text {
    display: inline-block;
    background: white; /* or whatever colour the background of the line image is */
    padding: 0 5px;
}
</style> 
```

注意：这段代码可能并不完美，但它应该或多或少是您正在寻找的内容，只需稍加调整即可。

# php - 使用php创建linux用户？

> ID：14985780
> 
> 赞同：4
> 
> 时间：2013-02-20T17:10:50.627
> 
> 标签：php, linux, variables

我目前正在为我的 FTP 服务器创建一个成员系统，供我想要访问服务器的亲密朋友使用，但是我正在使用的 FTP 服务器（proFTPd）利用 linux 用户作为每个成员的帐户。因此，我当然需要使用带有 php 的 html 表单，它可以访问服务器并能够在系统上创建用户。

现在我已经完全设置了表单，它验证了电子邮件/用户名/密码并将其保存到我的 sql 数据库中。我唯一缺少的是创建新用户来完成它。

我知道这并不总是最安全的事情，但我确实想这样做，而且我知道危险，所以任何帮助都会很好......

截至目前，从我一直用来在 linux（或我的 Ubuntu 版本）上创建用户的情况来看，它是：

```
useradd [username] -p [password] -d [/path_to_home_directory] -s [/bin/false] 
```

当然没有括号。

我也知道 php 命令：shell_exec、exec、system() 但是我已经尝试了其中的每一个命令来在其中创建用户，但没有任何效果。

我做了更多的研究，并注意到网络服务器正在 www-data 上运行（它应该是）并且它无权访问 useradd 命令。所以我'viduso'它仍然没有改变。

从我所见，我可以让 www-data 访问服务器上的脚本，然后将用户创建为 root 但是我不知道如何将存储在 php 中的变量传输到脚本。

如果您需要更多详细信息来帮助，请询问。这是我完成最后两个月项目所需的最后一件事，其中包括桌面应用程序和所有这些。它是如此接近，但我似乎无法得到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:27:48.913

您不应该为 FTP 服务创建 Unix 用户帐户，您应该集成您的`proFTP`服务器以`MySQL`用于身份验证（在 MySQL 中存储帐户），因此在这种情况下您不需要创建 Unix 帐户，这将是更好和安全的解决方案：

[proFTP 与 MySQL](http://www.howtoforge.com/proftpd_mysql_virtual_hosting)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:17:40.253

您可以在 中设置该位[`setuid`，](http://en.wikipedia.org/wiki/Setuid)`useradd`因此它以 root 访问权限运行（例如）。但请注意：**这是非常冒险**的。这将允许服务器中的任何用户创建用户。

无论如何，我认为允许 web-php-script 创建帐户是安全漏洞！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-28T18:02:49.277

只是一个注释。对于控制面板类型的事情，您有时必须以 root 身份执行操作。我发现最好的方法是在没有任何升级权限的情况下运行 PHP 控制面板。在不暴露主机系统的情况下制作一个适当安全的 PHP Web 应用程序已经够难的了。

如果控制面板需要进行需要 root 访问权限或任何高于 Web 服务器用户的访问级别的更改，最好将有关需要进行的更改的信息存储在 Web 服务器用户可以正常访问的位置 - 在数据库或通过在 Web 用户可以写入文件的某处创建文本文件。在存储信息之前，可以对用户提交的数据进行通常的清理。

然后每分钟、每小时或任何适合场合的 cron 脚本运行一次，以 root 身份从存储的任何位置获取数据，并执行所需的操作。您还可以在此脚本中执行完整性检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-24T04:33:05.697

我认为最安全的方法是将您的网络服务器用户设置为 sudoer，仅适用于以 useradd 或 adduser 开头的命令，无论您的发行版是什么。所以你不必让你的网络用户成为root。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-31T08:26:26.323

脚本将是这样的：

```
<?php

$user_name = "uuttyy";
$user_pass = "passwer9911";

$ret_useradd = 0;
$ret_passwd = 0;

passthru('useradd -m '.$user_name, $ret_useradd);

if ($ret_useradd) {
        printf("Something wrong with useradd, code: %d\n", $ret_useradd);
        exit();
}

passthru('echo "'.$user_name.':'.$user_pass.'" | chpasswd', $ret_passwd);

if ($ret_passwd) {
        printf("Something wrong with chpasswd, code: %d\n", $ret_passwd);
        echo exec('userdel '.$user_name);
        exit();
}

printf("All done!\n");

?> 
```

但正确的答案不是那样做，它有安全问题！调整（或更改）您的 FTP 服务器以使用用户数据库，并将用户添加到该数据库。正如 Satish 所说，proftpd+mariadb（mariadb 是 mysql 的一个更好的分支）对此有好处

# android - ActionBarSherlock 和 Spinner 对话框主题

> ID：14985782
> 
> 赞同：1
> 
> 时间：2013-02-20T17:11:00.690
> 
> 标签：android, spinner, actionbarsherlock

我有一个应用程序，我在其中使用带有对话框样式下拉列表的自定义（样式）微调器。我从 Theme.Sherlock 继承了我的应用程序主题。我现在在 Jelly Bean 或 ICS 设备上进行测试。如果我在正常活动中使用微调器，微调器下拉菜单是可以的：它们具有全息深灰色背景和全息蓝色文本颜色。但是如果我在 SherlockFragmentActivity 中使用微调器，下拉菜单的样式是旧的：它们有黑色的标题栏和白色的背景。

问题是这在我的应用程序中看起来不一致，并且我的微调器下拉列表具有白色文本颜色。

到目前为止我发现了什么：

我的应用程序的主题最后继承自 android:Theme.Holo，但它可能被 SherlockFragmentActivity 的主题覆盖。但我不知道这是在哪里设计的，以及如何覆盖微调器的背景。

那么这是怎么做到的呢？

# playframework - 将 play 作为 war 文件部署到 servlet 容器中，即使它大量使用 JPA？

> ID：14985783
> 
> 赞同：5
> 
> 时间：2013-02-20T17:11:04.177
> 
> 标签：playframework, playframework-2.0

我是新手，事实上我现在就读到了它，我应该说什么......问题超过问题。目前，我正在启动一个依赖于许多特殊 Java 库（hibernate-spatial、jts 等）的项目。因为它还应该实现一个全面的 REST API，所以我不得不在 Django 和经典的 JavaEE Glassfish 应用程序之间做出选择。

但现在我认为通过比赛我可以两全其美，我真的很想更深入地研究这一点。

我真的无法想象，play 的一个特性就是将 play 应用程序作为 WAR 文件部署到一个简单的 Servlet Container 中，比如 tomcat。

那么，如果我的 play 应用程序使用基于 hibernate/hibernate-spatial 的 JPA 持久层仍然可以作为 WAR 文件部署到简单的 tomcat servlet 容器，对吗？或者我是否至少需要一个 JavaEE 应用服务器？

我不敢相信...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T23:55:15.933

Play 2 应用程序可以`war`使用[Play 2 War 插件](https://github.com/dlecan/play2-war-plugin)进行部署。我自己没有这方面的经验，但目前它似乎是一个可行的解决方案。从我从论坛中读到的内容来看，WAR 包装应该仍然存在于未来版本中。

将 Play 2 应用程序部署为战争并没有什么特别之处。Play 2 应用程序“只是”一个响应 HTTP 请求的 Java 程序*，就像任何 Java Servlet 应用程序一样。如果某些插件确保 servlet 容器响应的 HTTP 请求被正确转发到 Play 2 应用程序，则它可以在 servlet 容器中按原样运行。

一般来说，Play 2 允许您使用几乎所有可用的 Java 技术。但是，由于 Play 2 应用程序本身并不在 servlet 中运行，因此它禁止您使用一组假定您使用 Java servlet 来响应请求的 Java EE 库。这对于 Hibernate 或其他 ORM/数据库库来说没有问题，但如果您的库需要访问 HTTP 通信（例如 Spring Web Security），就会出现问题。

如果 Django 是您项目的一个选项，我怀疑您的 Java 需求是否包括这样一个特定的库。您还应该检查一个实际的 servlet 容器是否对您的应用程序来说是必需的——Play 应用程序在没有它的情况下运行得很好。

`*`我知道这是一种不正当的过度简化

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T23:18:55.880

您不需要完整的 Java EE 服务器，甚至不需要像 Tomcat 这样的独立 servlet 容器。玩基本上是自己的服务器！[更准确地说，Play 与JBoss Netty](http://en.wikipedia.org/wiki/JBoss_Netty)捆绑在一起……一个可嵌入的 Java 服务器，它使用与 Node.js 相同的一些概念。如果你以前使用过 Django，那么这个概念很像：

```
python manage.py runserver 
```

许多 Play 开发人员使用[PaaS（即“云”）服务](http://steveperkins.net/moving-from-shared-hosting-to-a-paas/)，例如 Heroku 或 AppFog。如果您要部署到您自己的传统专用服务器，那么您可以在该机器上安装 Play 框架，就像安装 Tomcat 一样。部署文档在[此处](http://www.playframework.com/documentation/2.1.0/Production)更详细地介绍。

Play 的第一个版本还可以选择将应用程序打包为 WAR 文件，以便部署到传统的 servlet 容器。Play 2.0 放弃了这种支持。它在 Play 2.1 中回归的路线图上，但显然没有成功。

我希望看到 WAR 文件功能恢复，因为大多数企业商店都在他们的部署基础设施上进行了大量投资，并且对快速变化持敌意。值得一提的是，由于使用了 API，Play 2.1 应用程序无论如何都不会在 Tomcat 7 之前的版本上运行。

但是，Play 2.1 确实能够将应用程序捆绑到[可部署的 ZIP 文件](http://www.playframework.com/documentation/2.1.0/ProductionDist)中，类似于 WAR 文件。这些独立的 ZIP 仍然需要您在服务器上安装 Play，但它们可以更轻松地将您的应用程序从一台机器打包和部署到另一台机器。

# c# - 每次我打开 Visual Studio 时，FileSystemWatcher EnableRaisingEvent 都会发生变化

> ID：14985786
> 
> 赞同：5
> 
> 时间：2013-02-20T17:11:13.277
> 
> 标签：c#, visual-studio-2010, visual-studio-2012, filesystemwatcher

我在带有框架 4.0 的 Visual Studio 2010 中使用 C#。

在我的项目中，以两种不同的形式，有两个`FileSystemWatcher`s 的属性`EnableRaisingEvent`设置为`false`. 如果我关闭 Visual Studio，当我重新打开它时，我会同时`FileSystemWatcher`进入`EnableRaisingEvent`设置为`true`.

在我的设计器文件中的两个表单中都有以下代码：

```
private void InitializeComponent()
{
     this.components = new System.ComponentModel.Container();
     System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Form1));
     this.fileSystemWatcher1 = new System.IO.FileSystemWatcher();
     ((System.ComponentModel.ISupportInitialize)(this.fileSystemWatcher1)).BeginInit();   
     this.SuspendLayout();

     this.fileSystemWatcher1.Filter = "my_filter";
     this.fileSystemWatcher1.NotifyFilter = System.IO.NotifyFilters.LastWrite;
     this.fileSystemWatcher1.SynchronizingObject = this;
     this.fileSystemWatcher1.Changed += new System.IO.FileSystemEventHandler(this.fileSystemWatcher1_Changed);
} 
```

该属性`EnableRaisingEvent`未设置，但默认为`false`.

知道为什么我会出现这种奇怪的行为吗？

**编辑**

我遵循了 Virtlink 的建议，添加了以下代码行：

```
this.fileSystemWatcher1.EnableRaisingEvents = false; 
```

它似乎解决了我的问题，但几天后（以及项目的一些打开、关闭和重建，但没有修改`fileSystemWatcher1`）我发现：

*   在设计器中，在 的属性中`fileSystemWatcher1`，`EnableRaisingEvents`被设置回`true`

*   在代码中，之前添加的行丢失了

我尝试迁移到 Visual Studio 2012（仍然是框架 4.0），解决方法又解决了几天的问题。然后我得到了与VS10相同的情况。

还有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:25:09.883

它也发生在 Visual Studio 2012 中，您不必关闭 Visual Studio。重新打开表单设计器足以`True`在设计器中和运行时将属性设置为 。

这似乎是`FileSystemWatcher`.

一种解决方法是将此行添加到您的`InitializeComponent`明确：

```
this.fileSystemWatcher1.EnableRaisingEvents = false; 
```

如果设计师不*与*您合作，您将不得不*反对*它。您输入的任何内容都`InitializeComponent`可能被设计师覆盖或删除，`InitializeComponent`设计师的领域也是如此。处理此问题的一种方法是在表单的构造函数中的调用*之后立即添加该行。*`InitializeComponent`

```
InitializeComponent();
this.fileSystemWatcher1.EnableRaisingEvents = false; 
```

这意味着设计师*不会*向您显示 的正确值`EnableRaisingEvents`，但由于它无论如何都不能很好地工作，这可能不是一个大问题。将线放入构造函数中可确保设计者在将来的任何时候都不会将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T01:47:20.420

现在我不希望这个答案被接受，但无论如何。我编写了一个小预处理程序，它读取和修改 Visual Studio 项目中的 C# 源文件，并做了一些有趣的事情，比如提供一些本地化服务和在我的日志记录语句中插入唯一的日志标记。这个预处理程序由我所有 .csproj 文件中的 BeforeBuild 目标调用，因此它作为每次编译的一部分运行。

我目前没有摆弄 .Designer.cs 文件，但我正在修改 .resx 文件，并且它们具有相同的不幸特征，即在 Visual Studio 设计器的主持下，因此每当我更改表单时，我的修改都会被丢弃，但后来我的预处理器程序只是重新修改了 .resx 文件。每当 Visual Studio 设计器丢弃它时，重新插入该语句以将 EnableRaisingEvents 设置为 false 的过程相同。

这将使用大锤将图钉放置到位，但它会起作用。

编辑：

对于任何考虑将其作为解决此问题或类似问题的技术的人，此线程包含有关如何使 Visual Studio 与预处理器共存的一些技巧：[如何让 Visual Studio 在 BeforeBuild 处理后重新读取源文件？](https://stackoverflow.com/questions/9261599/how-to-get-visual-studio-to-reread-source-files-after-beforebuild-processing)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T03:24:44.243

我使用 Virtlink 建议在代码中添加所需的行，例如：

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            this.fileSystemWatcher1.EnableRaisingEvents = false;
        }
    } 
```

以下是我可以找到的更多理由来辩护为什么你不应该（永远）编辑你的 Designer.cs

您可以从 Herenvardo 评论中找到更多[信息](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/29930c74-e2a9-459e-a38c-aa6a7f61185f/)。这是一个简短的..

编辑 .Designer.cs（或 Visual Basic 中的 .Designer.vb）文件是不可取的，无论您为什么要编辑它；而且几乎从不需要它。不建议编辑这些文件有两个主要原因：

1.  IDE 使用非常严格的编码约定来编写这些文件，并希望它们遵循这些约定（空格和制表符之类的东西不会引起问题，但是任何改变文件结构或代码分析树的东西很可能有讨厌的副作用）。
2.  IDE 可能会在许多情况下覆盖您的更改，甚至不会告诉您。通常，对于窗体或用户控件的 .designer 文件，只要您从设计器进行更改，该文件就会被覆盖。对于设置文件（我对这些没有太多实践），我猜当您从 IDE 本身（从项目属性的设置页面）编辑设置时，它们会被重写。确保安全的最简单方法是假设 IDE 可能出于任何原因随时更改任何 .designer 文件。尽管 IDE 何时写入每个文件已明确定义，但可能很难知道和记住何时以及为什么可以重新制作每个文件，所以安全总比后悔好。

# .net - 有没有办法让 Resharper 使用我的自定义模板创建一个不存在的 Razor 视图？

> ID：14985787
> 
> 赞同：1
> 
> 时间：2013-02-20T17:11:20.687
> 
> 标签：.net, asp.net-mvc, resharper

在开发 ASP.NET MVC 时，当一个 Action 没有对应的 View 时，Resharper 会显示选项：

*   `Edit`使用布局创建 Razor 视图
*   创建剃刀视图`Edit`
*   （其他选项）

我想要的是在此处添加我自己的 Resharper 文件模板作为选项，如下所示：

*   从“搜索表单”模板创建 Razor 视图
*   从“编辑表单”模板创建 Razor 视图

有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:35:25.900

我还没有测试过，但看起来你可以写一个插件来为你做这件事。我建议获取 ReSharper SDK，然后在反编译器（dotPeek，natch）的 %PROGRAMFILES%\JetBrains\ReSharper\v7.1\bin 文件夹中打开程序集。

查看 IMvcQuickFixTemplateProvider 和 JetBrains.ReSharper.Intentions.Razor.QuickFixes.Mvc 中的 MvcQuickFixTemplateProviderBase。

被调用以提示您创建新视图的 MVC 快速修复循环遍历所有向系统注册的提供程序，并添加了三个项目 - 部分视图、带布局的视图和简单视图。您可以为您感兴趣的每个模板创建一个实现 IMvcQuickFixTemplateProvider 的类。然后您需要创建 3 个模板，用于部分模板，带有布局和仅视图。不过，这需要在编译时了解所有模板。

如果您事先不知道所有模板，您可以尝试创建一个实现 IQuickFix 的类，并将 AspConfigurableNotResolvedErrorHighlighting 作为构造函数参数。这会将您的快速修复添加到未解决视图的错误突出显示中，您现在可以做任何您想做的事情，在菜单中为您拥有的任何模板显示任何操作。查看 MvcViewQuickFix 以了解 ReSharper 如何执行此操作的详细信息。

# angularjs - angularjs：如何更改特定 ng-view 或 ng-include 的模板？

> ID：14985790
> 
> 赞同：4
> 
> 时间：2013-02-20T17:11:35.953
> 
> 标签：angularjs

我在一个页面中几乎没有 ng-views 和 ng-includes，

我想在路由更改时更改特定 ng-include 的模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:48:01.343

您可能必须使用相同的模板，但在该模板中，结合使用 ng-switch 和 ng-include 来加载适当的模板。您的控制器可以设置一些 $scope 属性，ng-switch 将使用该属性来确定要加载的模板。

安迪已经在这里提供了一个例子：[https ://stackoverflow.com/a/12584774/215945](https://stackoverflow.com/a/12584774/215945)

# c# - 如何从 IAxaptaRecord::Call() 获取返回值？

> ID：14985797
> 
> 赞同：0
> 
> 时间：2013-02-20T17:12:06.867
> 
> 标签：c#, axapta, x++, ax, business-connector

在 Dynamics AX 4.0 中，我想在 Application Object Tree (AOT) > Data Dictionary > Tables > *CustTable* > Methods 下运行一些方法。（可以是任何桌子）

这主要是为了获取一些自定义的计算值，还有一部分是为了处理 SQL 注入 [Axapta.ExecuteStmt - 安全吗？](https://stackoverflow.com/questions/9788446/axapta-executestmt-is-it-safe)

我在这里找到[了 AxaptaRecord.Call](http://msdn.microsoft.com/en-US/library/microsoft.dynamics.businessconnectornet.axaptarecord.call%28v=ax.10%29.aspx)文档，但没有多大帮助。也不确定这是否是正确的方法。另外，就函数类型而言，方法调用有什么区别？例如公共、静态、服务器、返回值类型等。

希望给点建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:41:21.750

有几件事需要考虑

1.  看起来您正试图从 .Net 调用 Axapta 对象，因此最简单的方法是使用 Business Connectory (Microsoft.Dynamics.BusinessConnectorNet)
2.  使用静态方法创建一个包装类，该类了解如何实例化缓冲区并进行所需的计算（静态方法意味着您没有实例化该表的记录/缓冲区）

它（可能）看起来像这样

```
 Axapta ax = new Axapta();
    try
    {
        //Note this is getting UserId out of web.config for a web service
        ax.LogonAs(ConfigurationManager.AppSettings["uid"], "contoso.com", null, null, null, null, ConfigurationManager.AppSettings["config"]);

        string returnString = (string)ax.CallStaticClassMethod("WrapperClassName", "StaticMethodName", _parameterPassedToMethod);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:08:47.397

这些函数旨在解决 .NET 中可以从 X++ 轻松解决的不同问题：

*   `Axapta.ExecuteStmt`是将一些 SQL（在 X++ 内部 SQL 语法上）发送到数据库的方法，可以是 select、update_recordset 等。与在 X++ 代码中编写 SQL 命令完全相同的功能和结果。

*   `AxaptaRecord.Call`是一个类方法。这样，使用此函数，您只能在表内运行用 X++ 编码的记录方法（可以在 AOT 的*方法*节点内找到的方法，如通常的 .find() 方法）。

编辑：还有第三种有趣的方法：

*   `Axapta.CallStaticClassMethod` 是执行保存在类上的静态方法的方式。由于方法需要是静态的，因此您不必将对象传递给函数，而只需传递类名和方法名，因为它是在新的上下文中执行的。

# python - Python随机函数

> ID：14985798
> 
> 赞同：14
> 
> 时间：2013-02-20T17:12:09.737
> 
> 标签：python, random, import

我在使用 Python 的导入随机函数时遇到问题。似乎`import random`并且`from random import random`正在导入不同的东西。我目前正在使用 Python 2.7.3

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> random()

Traceback (most recent call last):
File "<pyshell#0>", line 1, in <module>
    random()
NameError: name 'random' is not defined
>>> random.randint(1,5)

Traceback (most recent call last):
File "<pyshell#1>", line 1, in <module>
random.randint(1,5)
NameError: name 'random' is not defined
>>> import random
>>> random()

Traceback (most recent call last):
File "<pyshell#3>", line 1, in <module>
random()

TypeError: 'module' object is not callable
>>> random.randint(1,5)
2
>>> from random import random
>>> random()
0.28242411635200193
>>> random.randint(1,5)

Traceback (most recent call last):
File "<pyshell#7>", line 1, in <module>
random.randint(1,5)
AttributeError: 'builtin_function_or_method' object has no attribute 'randint'
>>> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-20T17:14:46.667

`import random`导入 random*模块*，其中包含与随机数生成有关的各种事情。其中有 random()*函数*，它生成 0 到 1 之间的随机数。

以这种方式进行导入需要您使用语法`random.random()`。

random 函数也可以单独从模块中导入：

```
from random import random 
```

这使您可以`random()`直接调用。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-20T17:15:23.577

[random 模块](http://docs.python.org/2/library/random.html)包含一个名为 的函数，`random()`因此您需要知道您是否已将模块导入命名空间，或者从模块中导入函数。

`import random`将导入随机模块，而`from random import random`将专门从模块中导入随机函数。

因此，您将能够执行以下操作之一：

```
import random
a = random.random()
b = random.randint(1, 5)
# you can call any function from the random module using random.<function> 
```

或者...

```
from random import random, randint   # add any other functions you need here
a = random()
b = randint(1, 5)
# those function names from the import statement are added to your namespace 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-20T17:14:19.703

问题是这里有两个东西叫做随机：一个是模块本身，一个是该模块内的函数。您的命名空间中不能有两个具有相同名称的东西，因此您必须选择一个或另一个。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-20T17:16:47.840

```
import random 
```

将模块包含在名称“random”下的命名空间中。

```
from random import random 
```

将命名空间“random”中的函数“random”包含到全局命名空间中。

因此，在第一个示例中，您将调用 random.random，而在第二个示例中，您将调用 random.random。两者都将访问相同的功能。

相似地，

```
from random import randint 
```

会将 randint 导入全局命名空间，因此您可以简单地调用 randint 而不是 random.randint。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-20T17:15:32.790

嗯，是的，他们进口不同的东西。 `import random`导入`random`模块，从模块中`from random import random`导入`random`函数`random`。这实际上是一个很好的例子，说明为什么在 Python 中设计 API 时，尽量避免将模块及其成员命名为相同的东西通常是个好主意。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T17:19:31.117

'random' 模块是 python 标准库中的一个包，也是这个包中定义的一个函数。

使用“import random”导入包，然后您可以使用此包中的函数：“random.random()”。您也可以使用“随机”包中的任何其他功能。

您还可以告诉 python 仅从包 random 中专门导入 random 函数：'from random import random'。那么你只能使用函数'random()'，并且不应该指定它来自哪个包。但是，您不能使用随机包中的任何其他功能，因为如果您使用“从随机导入随机”，它们还没有被导入。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-20T17:18:53.907

如果你使用`from random import random`，你必须像这样调用 randint() `randint(1,5)`：如果你使用`import random`，你可以这样称呼它：`random.randint(1,5)`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-14T11:18:01.533

如果您使用 PyDev 或其他聪明的 IDE，请确保它没有自动导入模块，覆盖您的导入。当模块名称等于函数名称时，这里可能特别令人困惑，因为抛出的错误不是`NameError`. 就我而言，我添加了

```
import random 
```

后来使用它：

```
r = random.radom() 
```

但得到：

```
AttributeError: 'builtin_function_or_method' object has no attribute 'random' 
```

经过搜索才发现PyDev自动添加了该行

```
from random import random 
```

到我的导入结束，所以我实际上是在调用`random`方法的属性`random`。解决方法是删除自动导入或者`random()`直接调用该方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-10T19:23:57.700

您必须先从 random*模块导入 random**函数*，然后才能使用它。

 *```
In [1]: from random import random

In [2]: random()
Out[2]: 0.5607917948041573 
```*

# ibm-doors - 如何在以前未加载的模块中迭代 DXL 中传出链接的目标对象

> ID：14985800
> 
> 赞同：1
> 
> 时间：2013-02-20T17:12:12.413
> 
> 标签：ibm-doors

我想在 DXL 中编写一个循环，从名为“req”的对象链接的每个对象中读取一些内容。

天真的解决方案，省略 req 的初始化，将是这样的：

```
Object req 
Object parent
Link baselink

for baseLink in req -> "*" do{
        parent = target(baseLink)
        ...
} 
```

除非这些“父”对象所在的所有模块都已打开，否则这不起作用。对于任何仍未打开的，“父”变量只接收一个 Null 值。

鉴于这种情况，我想要一种以编程方式打开它们的方法。

DXL 参考手册提供了一个仅适用于传入链接（来自“子”对象）的解决方案：

```
ModName_ srcModRef
for srcModRef in o<-"*" do
    read(fullName(srcModRef), false) 
```

不幸的是，我找不到传出链接的解决方案。在上面的示例中将“<-”替换为“->”会失败。我在手册和网络上搜索过。

我想避免打开整个链接模块指向的所有链接，因为这涉及其他来源。

有人知道如何以编程方式打开对象链接的所有模块吗？我怀疑有没有办法在不打开它所在的模块的情况下访问一个对象，但这也可以解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:29:21.757

这是您的解决方案：

```
Object req
ModName_ parentModName
Module parentMod
Object parent
Link baselink

for baseLink in req -> "*" do{
    parentModName = target(baseLink)
    parentMod = read(fullName(parentModName), false)
    parent = target(baseLink)
    ...
    close parentMod
} 
```

即使模块未打开，您也可以获取 ModName_ 句柄然后打开它。然后就可以得到目标对象的引用了。完成后不要忘记关闭链接的模块以释放资源。

希望这可以帮助！

# android - 对多个 ListView 使用单个 BaseAdapter

> ID：14985811
> 
> 赞同：0
> 
> 时间：2013-02-20T17:12:40.563
> 
> 标签：android, android-listview, android-adapter, android-adapterview

我分别在三个选项卡 A、B 和 C 中有三个 ListView。它们都从一个通用的适配器类中获取数据。但是，当我添加搜索选项并尝试更改任何选项卡（例如 tabA）中的列表时，就会出现问题。一旦我完成并切换到tabB，在tabA中加载的数据也显示在tabB中。

我认识到这是由于对所有列表视图使用单个 BaseAdapter 类。在互联网上进行了繁琐的搜索后，我找到了[这个链接](http://qtcstation.com/2012/04/a-limitation-with-the-viewholder-pattern-on-listview-adapters)。这是具有更多视图类型的 ViewHolder 模式的限制。

我希望我没有混淆场景。谁能提供更好的出路？

我们如何使用单个适配器处理多个视图？

**编辑**：

我有三个选项卡 - A、B、C。每个选项卡都是一个 ActivityGroup 类。TabC 包含一个列表视图。TabA 和 TabB 具有转到 TabC 的按钮。

tabC 中类的 XML 文件（用于来自 Tab **A**的请求）

```
<LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

       <ListView
        android:id="@+id/enquiryListViewA"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="7dp" >
</LinearLayout> 
```

tabC 中的目标类是

```
public class TestClass extends Activity {
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         if(0 == Constants.requestID) { //requestID is used to identify the tab
             //request from tab A
             setContentView(R.layout.custom_fullpicture_A);
         } else { //request from tab B
             setContentView(R.layout.custom_fullpicture_B);
         }
} 
```

在 Handler 类中，我正在设置适配器。在这里，我还根据选项卡类型检查有效的 listView

```
 if(0 == Constants.requestID) {
   ListView enquiryView = (ListView) ((Activity) childContext).findViewById(R.id.enquiryListViewA);
   adapterA = new CustomFullPictureAdapter(childContext, msg.obj);
   enquiryView.setAdapter(adapterA);
 } else {
   ListView enquiryView = (ListView) ((Activity) childContext).findViewById(R.id.enquiryListViewB);
   adapterB = new CustomFullPictureAdapter(childContext, msg.obj);
   enquiryView.setAdapter(adapterB);
 } 
```

而adpater类的getView方法是

```
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    System.out.println("Full Picture adapter: CONVERT VIEW : :: " + convertView);
    System.out.println("Data count from DB :: " + getCount());
    int viewType = Constants.requestID;

    View viewAccounts = null;
    View viewCM = null;
    View view = null;
    View masterView = null;

    if(viewType == 0) {
        viewAccounts = convertView;
    } else if(viewType == 1) {
        viewCM = convertView;
    } else {
        view = convertView;
    }

    if(viewAccounts == null) {
        holder = new ViewHolder();
         if(!Constants.isLoggedInCustomer) { //logged in as user
             viewAccounts = mInflater.inflate(R.layout.custom_fullpicturerow_A, null);

            holder.salesCostAcc = (TextView) viewAccounts.findViewById(R.id.vSalesCostAcc);
            holder.profitAcc = (TextView) viewAccounts.findViewById(R.id.vProfitAcc);
             holder.gpAcc = (TextView) viewAccounts.findViewById(R.id.vGpAcc);
             holder.salesValueAcc = (TextView) viewAccounts.findViewById(R.id.vSalesValueAcc);
             holder.quantityAcc = (TextView) viewAccounts.findViewById(R.id.vQuantityAcc);
             holder.transactionCountAcc = (TextView) viewAccounts.findViewById(R.id.vTransAcc);
             holder.avgPriceAcc = (TextView) viewAccounts.findViewById(R.id.vAvgPriceAcc);
             holder.objectNameAcc = (TextView) viewAccounts.findViewById(R.id.vObjectNameAcc);
             holder.objectCodeAcc = (TextView) viewAccounts.findViewById(R.id.vObjectCodeAcc);

             holder.salesValueAcc.setText(searchArrayList.get(position).getSalesValue());
             holder.quantityAcc.setText(searchArrayList.get(position).getQuantity());
             holder.transactionCountAcc.setText(searchArrayList.get(position).getTransactionCount());
             holder.avgPriceAcc.setText(searchArrayList.get(position).getAvgPrice());     
             holder.objectNameAcc.setText(searchArrayList.get(position).getObjectName());
             holder.objectCodeAcc.setText(searchArrayList.get(position).getObjectCode());

             holder.salesCostAcc.setText(searchArrayList.get(position).getSalesCost());
            holder.profitAcc.setText(searchArrayList.get(position).getProfit());
             holder.gpAcc.setText(searchArrayList.get(position).getProfitMargin());

             masterView = viewAccounts;

             viewAccounts.setTag(holder);
         } else {

         }
    } 

    if(view == null) {
        holder = new ViewHolder();
         if(!Constants.isLoggedInCustomer) { //logged in as user
             viewCM = mInflater.inflate(R.layout.custom_fullpicturerow_B, null);

            holder.salesCost = (TextView) viewCM.findViewById(R.id.vSalesCost);
            holder.profit = (TextView) viewCM.findViewById(R.id.vProfit);
             holder.gp = (TextView) viewCM.findViewById(R.id.vGp);
             holder.salesValue = (TextView) viewCM.findViewById(R.id.vSalesValue);
             holder.quantity = (TextView) viewCM.findViewById(R.id.vQuantity);
             holder.transactionCount = (TextView) viewCM.findViewById(R.id.vTrans);
             holder.avgPrice = (TextView) viewCM.findViewById(R.id.vAvgPrice);
             holder.objectName = (TextView) viewCM.findViewById(R.id.vObjectName);
             holder.objectCode = (TextView) viewCM.findViewById(R.id.vObjectCode);

             holder.salesValue.setText(searchArrayList.get(position).getSalesValue());
             holder.quantity.setText(searchArrayList.get(position).getQuantity());
             holder.transactionCount.setText(searchArrayList.get(position).getTransactionCount());
             holder.avgPrice.setText(searchArrayList.get(position).getAvgPrice());     
             holder.objectName.setText(searchArrayList.get(position).getObjectName());
             holder.objectCode.setText(searchArrayList.get(position).getObjectCode());

             holder.salesCost.setText(searchArrayList.get(position).getSalesCost());
            holder.profit.setText(searchArrayList.get(position).getProfit());
             holder.gp.setText(searchArrayList.get(position).getProfitMargin());

             masterView = viewCM;

             viewCM.setTag(holder);
         } else {

         }
    }

    if(null != masterView)
    holder = (ViewHolder) masterView.getTag();

    if(0 == position % 2)
        masterView.setBackgroundResource(R.color.textColorWhite);
    else
        masterView.setBackgroundResource(R.color.textColorCyan);

    return masterView;
} 
```

这就是发生的事情。用户单击从 TabA 或 B 到 TabC 的按钮。这会将 TestClass 添加到选项卡的当前活动中。使用 requestID 变量，适配器在 TabA 和 TabB 中向 TestClass 提供不同的数据。但是，如果我在选项卡之间切换，它们都具有相同的值！

希望我没有混淆。如果您有疑问，请询问。你认为什么是阻塞？

# c# - 在代码隐藏中创建表行

> ID：14985812
> 
> 赞同：2
> 
> 时间：2013-02-20T17:12:45.953
> 
> 标签：c#, asp.net

有人可以帮我理解这里需要做什么，因为我是 C# 新手。

我有一个带有两个按钮和几个文本框的表单。

首先，用户在其中一个文本框中输入一个数字，然后按下其中一个按钮。这种形式也有一个空的，像这样：

```
<asp:Table id="tblInputs" runat="server" Border="1" Width="100%">
</asp:Table> 
```

因此，当用户点击第一个按钮时，后面的代码将向该表添加尽可能多的行，即文本框中的输入，如下所示：

```
for (int i = 0; i < numOfInputFields; i++) 
{
    TableRow row = new TableRow ();
    TableCell cell_inputA = new TableCell ();
    TableCell cell_inputB = new TableCell ();

    TextBox txtBox_input = new TextBox ();

    txtBox_input.ID = "txtInFld" + (i + 1);
    txtBox_input.Text = txtBox_input.ID;
    cell_inputA.Text = "Input " + (i + 1);
    cell_inputB.Controls.Add (txtBox_input);

    row.Cells.Add (cell_inputA);
    row.Cells.Add (cell_inputB);

    tblInputs.Rows.Add (row);
} 
```

现在到目前为止，这工作正常，列和行创建得很好。

我现在的问题是，由于文本框的 ID 是在上面的代码隐藏中创建的，我如何从其他代码隐藏函数中访问它们。

在帖子的顶部，我提到我有另一个相同形式的按钮，它只是更改了一个新创建的文本框中的文本值，但它不起作用。

说 txtInFld1.Text = "something"; 的常规方式 不再起作用，因为它看不到 txtInFld1 即使它已经在上面创建。我得到“当前上下文中不存在名称'txtInFld1'”。我怀疑这与重新提交相同的表格有关，但我不确定。

谁能解释一下这里发生了什么以及如何访问在代码隐藏中创建的新文本框的属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:36:13.317

一开始动态创建的控件有点难以理解。

1）您需要在 ViewState 中保存 id 以在回发后保留数据。

2）然后在回发页面时重新创建这些文本框。否则，您将无法访问它。

这是类似的答案（该问题使用 UserControl 而不是 TextBox）-

[https://stackoverflow.com/a/14449305/296861](https://stackoverflow.com/a/14449305/296861)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T23:28:59.457

您可以递归地挖掘表的控件集合，直到找到子控件。

传入父控件，后跟要查找的控件的 ID。

干杯，~Codewolfe

```
 private System.Web.UI.Control FindControlRecursive(Control root, string id)
    {
        if (root.ID == id)
        {
            return root;
        }

        foreach (Control c in root.Controls)
        {
            Control t = FindControlRecursive(c, id);
            if (t != null)
            {
                return t;
            }
        }

        return null;
    } 
```

# javascript - Greasemonkey 如何与 NoScript 等 javascript 拦截器交互？

> ID：14985813
> 
> 赞同：4
> 
> 时间：2013-02-20T17:12:48.980
> 
> 标签：javascript, security, greasemonkey, noscript

Greasemonkey Firefox 是在它自己的沙箱/层中运行 JS，还是在它运行的页面上需要全局 javascript？

我的意思是，如果我有另一个像 NoScript 这样的插件会阻止页面的 JS，那么使用 Greasemonkey 会导致页面的 JS 被解除阻止吗？或者，页面的 JavaScript 是否会保持阻塞，而 Greasemonkey 的 JavaScript 是否会在它自己的层中运行在它的顶部，而一切仍然是安全的？我确实给了它一个快速测试，页面 JS 似乎被阻止了，所以可能没问题。但是我不完全确定它是如何与网站/浏览器 JS 挂钩的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T22:47:16.860

是的，Greasemonkey 的优点之一是它可以在页面上运行脚本，即使该页面禁用了 javascript。而且，不，它不会解锁页面的 JS。

除非您使用[*Script Injection*](https://stackoverflow.com/a/13485650/331508) *，否则 Greasemonkey 脚本始终在单独的范围内运行 - NoScript*等不会关闭该范围。
此外，GM 脚本将根据有效[`@grant`设置](http://wiki.greasespot.net/@grant)从沙箱运行。请参阅[“为什么用户脚本中的窗口（和 unsafeWindow）与标签中的不同？”](https://stackoverflow.com/a/10828021/331508) 了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:32:22.960

我认为[http://wiki.greasespot.net/Security](http://wiki.greasespot.net/Security)应该回答你所有的问题。具体来说，

> [Firefox 1.5 更新] 用于将特权用户脚本代码与不安全的内容页面隔离开来

# wordpress - Wordpress WPSC 快速询问

> ID：14985816
> 
> 赞同：0
> 
> 时间：2013-02-20T17:12:59.557
> 
> 标签：wordpress

我正在通过 wpsc_start_category_query 进行查询，然后我只想从查询的产品中获取一种产品。

比如：查询类别 category1 查询产品 by category1 product1 查询类别 category2 查询产品 by category2 等等。

```
 <?php wpsc_start_category_query(array('category_group'=> get_option('wpsc_default_category'), 'show_thumbnails'=> 1)); ?>
                    $args = array(
                        'post_type' => 'wpsc-product',
                        'post_status' => 'publish',
                        'posts_per_page' => 3,
                        'orderby' => 'rand',
                        'tax_query' => array(
                        array(
                'taxonomy' => 'wpsc_product_category',
                'field' => 'id',
                'terms' => 'HERESOMECODE'
                        )
                            )
                    );
 $cat1_posts = get_posts($args);
 ?> 
```

我的问题是我不能给出 'wpsc_product_category' => wpsc_category_name(); 我的意思是我不能查询当前类别的帖子

有什么建议吗？非常简单的任务，我真的伤透了脑筋

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:46:14.403

在 WP 电子商务插件查询中查询帖子是不可能的，因为它们的结构不同并且 WPSC 的功能有限。

我已经通过使用 WordPress 内置查询来完成它。

```
//for each category, show latest post
$cat_args=array(
  'orderby' => 'name',
  'order' => 'ASC'
   );
$categories = get_terms( 'wpsc_product_category');
  foreach($categories as $category) {
    $args=array(
      'orderby' => 'ID',
      'order' => 'ASC',
      'showposts' => 1,
      'post_type' => 'wpsc-product',
      'wpsc_product_category' => $category->slug
    );
    $posts=get_posts($args);
      if ($posts) {
            foreach($posts as $post) {
            setup_postdata($post); 
          $date1 = get_the_time('U', $post->ID);
       }
        // post details goes here 
      } 
    } 
?> 
```

我在这里所做的事情，开始了第一个类别查询，在类别查询中我查询了帖子。

当然，这是一个有点广泛的查询，但如果你在 6 个类别中的帖子少于 100 个，它就完美了。

# java - 为什么瞬态变量的状态存储在单例对象中？

> ID：14985821
> 
> 赞同：0
> 
> 时间：2013-02-20T17:13:11.233
> 
> 标签：java, static, singleton, transient

```
package p1;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.ObjectStreamException;
import java.io.Serializable;

public class SerializationCheck {
    public static void main(String[] args) throws FileNotFoundException, IOException, ClassNotFoundException {
        SingletonCompanyCEO s1 = SingletonCompanyCEO.getSingleObject();
        SingletonCompanyCEO s2 = SingletonCompanyCEO.getSingleObject();
        System.out.println("s1==s2:"+(s1==s2));

        ObjectOutputStream obs = new ObjectOutputStream(new FileOutputStream("file.txt"));
        obs.writeObject(s1);

        //first read from file
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream("file.txt"));
        SingletonCompanyCEO ceo = (SingletonCompanyCEO)ois.readObject();

        //second read from file 
        ois = new ObjectInputStream(new FileInputStream("file.txt"));
        SingletonCompanyCEO ceo1 = (SingletonCompanyCEO)ois.readObject();

        System.out.println("ceo==ceo1:"+(ceo==ceo1)+" (read from file ie. de-serialized )");
        System.out.println(ceo1);

    }
}

class SingletonCompanyCEO implements Serializable
{
    public void setName(String name){
        this.name = name;
    }
    public Object readResolve() throws ObjectStreamException {
        return singleObject;
    }
    private static final long serialVersionUID = 1L;
    private transient int age = 55; // age should set to zero by default as age is transient. But it is not happening, any reason?
    private String name ="Amit";
    float salary = 0f;

    private static SingletonCompanyCEO singleObject;
    private SingletonCompanyCEO()
    {
        if(singleObject!=null)
        {
            throw new IllegalStateException();
        }
    }
    public static SingletonCompanyCEO getSingleObject()
    {
        if(singleObject==null)
        {
            singleObject = new SingletonCompanyCEO();
        }
        return singleObject;
    }
    public String toString()
    {
        return name+" is CEO of the company and his age is "+
        age+"(here 'age' is transient variable and did not set to zero while serialization)";
    }
} 
```

将此代码复制并粘贴到 Eclipse 编辑器中。序列化时'age'`transient`变量默认不设置为零的原因是什么？
序列化表示瞬态和静态变量在序列化时设置为零（或默认值）。
反序列化后，我得到`age = 55`的不是`age = 0`.
在 JLS 中，这背后一定是有原因的。它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:32:23.057

您正在使用方法提供静态`SingletonCompanyCEO`对象`getSingleObject`。`SingletonCompanyCEO`因此，您的ie`s1`的以下引用变量`s2`共享同一个`SingletonCompanyCEO`对象。对于这个独特的对象，您具有以下字段值：

```
age = 55; 
name ="Amit";
salary = 0f; 
```

但是您在类中也覆盖`readResolve`了方法`SingletonCompanyCEO`，您在其中返回`s1`和`s2`引用的相同对象。因此，在反序列化类时，JVM 会生成变量`ceo`并引用和`ceo1`引用的同一对象。所以基本上你在序列化之前和反序列化之后都有一个类的对象。这就是为什么打印为.`s1``s2``SingletonCompanyCEO``age``55`

**更新：**以下是在您的代码中删除
后涉及您的代码的步骤：`readResolve`

1.  JVM 从“file.txt”中读取对象 读取对象后 JVM`readResolve`在类中查找方法`SingletonCompanyCEO`。JVM 没有找到**新对象**并返回到反序列`readResolve`化返回的对象。**`ceo`**
***   JVM 再次从“file.txt”中读取对象。读取对象后，JVM 会`readResolve`在类中查找方法`SingletonCompanyCEO`。JVM 没有找到**新对象**并返回到反序列`readResolve`化返回的对象。**`ceo1`****

 ****> 因此，在两次反序列化之后，您有两个新的 `SingletonCompanyCEO`.
> => ceo==ceo1 返回错误。
> **注意**：在两个新创建的对象中`age`，JLS 指定的值为 0。

**UPDATE2**
如果您注释`writeobject`部分代码并使用已经存在的文件（`file.txt`）反序列化类，那么在反序列化时会执行以下步骤：

1.  JVM 使用 ObjectInputStream 从文件中读取对象。读取对象后，JVM 会在类中查找`readResolve()`方法。`SingletonCompanyCEO`JVM 仅将该对象返回给由`readResolve()`类中定义的方法返回的变量。
2.  JVM 找到该`readResolve()`方法。在`readResolve()`您返回的方法`singleObject`中`null`，目前该方法`getSingleObject()`仍未被调用。并且为了您的信息，在反序列化时也不会调用类的构造函数，否则它会`IllegalstateException`像您在构造函数中所做的那样抛出。
3.  由于`readResolve()`正在返回`null`因此 JVM 也正在返回`null`。结果`ceo1`和`ceo2`两者都是`null`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:59:30.190

每当反序列化 SingletonCompanyCEO 对象时，从 ObjectInputStream 获得的所有信息都将被丢弃，而是返回您的 singleObject，这取决于您的`readResolve`方法。singleObject 本身就是一个使用构造函数创建的实例，而不是反序列化，所以它的年龄是 55。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:16:59.710

```
private transient int age = 55; 
```

当您在声明时定义一个值时，这具有优先权。****

# ruby-on-rails - 相当新的 Rails 开发人员对 content_tag 和助手感到困惑

> ID：14985822
> 
> 赞同：1
> 
> 时间：2013-02-20T17:13:12.020
> 
> 标签：ruby-on-rails, ruby, block, helper, content-tag

我正在尝试创建一个日历表来显示公司每个员工的每日可用性。我认为我需要的是一个带有每月天数的标题，然后是每个工作人员的一行（与天数一样多的单元格）。每个单元格的不同背景颜色将代表不同的可用性状态，并且工作人员会发生变化，因此我希望所有这些都是动态生成的。

在网上研究并以[Ryan Bates 的 Railscast #213 (Calendars Revised)](http://railscasts.com/episodes/213-calendars)作为我的指南后，到目前为止，我已经成功地生成了我的表格标题，该表格在每个单元格中显示了月份中的日期。

到目前为止，这就是我的代码：

```
module ReceptionHelper
def reception(date = Date.today, &block)
    Reception.new(self, date, block).table
end

class Reception < Struct.new(:view, :date, :callback)
    delegate :content_tag, to: :view

    def table
        content_tag :table, class: "calendar" do
            daysHeader
        end
    end

    def daysHeader
        last_day = date.end_of_month.strftime("%d").to_i
        (0..last_day).to_a.map { |day| content_tag :th, day }.join.html_safe
    end
end 
```

现在，这里是问题和困惑开始的地方：

*   正如我发现的那样，删除`&block`并`:callback`带走了 { ... } 功能。我真的不能说我明白为什么。谁有好的解释？

*   为什么上面的工作，但我不能使用`(..).each do`和`content_tag`下面的块？

    ```
    (0..last_day).to_a.each do |day| 
        content_tag :th do
            day
        end
    end 
    ```

*   为了显示每个员工的行，我这样做了：

    ```
    def table
        content_tag :table, class: "calendar" do
            daysHeader + staffRows
        end
    end

    def staffRows
        staff.to_a.map { |staff| content_tag :tr, staff.name }.join.html_safe
    end 
    ```

    *我添加`staff`到`Reception`类定义中，我打电话给`<%= reception @staff %>`- 如果这不是一个很好的做法，请随时对我大喊大叫：D*

    但是，我没有让每个工作人员获得一排，而是将所有成员的姓名排成一排，并在标题的正上方。更改`content_tag :tr`为`content_tag :td`会在最后一个标题单元格之后生成一个包含每个员工姓名的单元格。

如您所知，我对此很迷茫，而且似乎我什至不清楚为什么按我想要的方式工作的部分是正确的。我希望这篇文章不会给人留下我希望把所有东西都放在盘子里的印象——我宁愿寻找可以帮助我理解的方向。:)

**编辑：**

`staffRows`通过将方法更改为此，我取得了一些进展：

```
def staffRows
    staff.to_a.in_groups_of(1).map do |staff|
        content_tag :tr do
            staff.map { |room| content_tag :th, staff.name }.join.html_safe
        end
    end.join.html_safe
end 
```

但是，这只会为每个房间生成一个单元格，而我想要一行与标题一样多的单元格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T00:07:05.683

首先是 ruby​​ 约定：使用 2 个空格作为间距，使用 _ 作为方法名称。

现在在编写复杂的助手时遇到你最好的朋友：`concat`. 它的作用是将字符串直接输出到 ERB 缓冲区。向您展示和示例：

```
def my_helper
  concat "hello world"
end
<% my_helper %> 
```

`hello world`即使我们使用`<%`而不是，也会以 html 格式输出`<%=`。

在处理助手中的块时这是非常重要的方法，因为这意味着您可以`concat`在块中多次调用并且两个字符串都会输出。这是一个例子：

```
def my_helper
  content_tag :div do
    concat "Hello "
    concat "World"
    concat "!"
  end
end
<%= my_helper %> 
```

会输出`<div>Hello World!</div>`. 因此，使用相同的想法，您可以执行以下操作：

```
def my_helper
  content_tag :ul do
    @people.each do |person|
      concat content_tag(:li, person.name)
    end
  end
end
<%= my_helper %> 
```

这将导致这样的事情：`<ul><li>John Doe</li><li>Mike Tyson</li></ul>`.

所以我会改写`days_helper`成这样的：

```
def days_header
  (0..date.end_of_month.day).each { |day| concat content_tag(:th, day) }
end 
```

用方法做类似的事情`staff_rows`，然后`table`方法看起来就像这样：

```
content_tag :table, class: "calendar" do
  days_header
  staff_rows
end 
```

至于问题的回调部分：`&block`将传递给方法的块捕获到 Proc 对象中。该对象稍后可以传递给其他方法或直接调用。由于您没有使用回调对象，我只是建议将其删除。

# javascript - Javascript拖放：当可拖动对象具有固定或绝对位置时，它会消失在可放置区域后面

> ID：14985824
> 
> 赞同：4
> 
> 时间：2013-02-20T17:13:15.877
> 
> 标签：javascript, jquery, css, jquery-ui-draggable, jquery-ui-droppable

我的问题如下：我想将元素拖放到另一个 div 区域内。我在这个特定示例中使用 jquery 可拖动和可放置元素。但是，当可拖动容器的位置设置为固定或绝对时，可拖动容器一旦结束就会消失在可放置容器后面，并且只要我在拖动。下降确实正常工作。

JS代码：

```
$(function() {
     $("#draggable1" ).draggable({helper:'clone'});
     $("#draggable2" ).draggable({helper:'clone'});
     $("#draggable3" ).draggable({helper:'clone'});
        $( "#droppable" ).droppable({
            drop: function( event, ui ) {
                    $("#droppable").css('background-image', 'url(' + $(ui.draggable).attr("src") + ')');                    
            }
        });
 }); 
```

html代码：

```
<table cellpadding="0" cellspacing="0" border="0" class="draggable_container">
        <tr>
            <td><img id="draggable1" class="draggable" src="someimage.jpg" width="100" height="100"></td>
            <td><img id="draggable2" class="draggable" src="someimage2.jpg" width="100" height="100"></td>
            <td><img id="draggable3" class="draggable" src="someimage3.jpg" width="100" height="100"></td>
        </tr>
    </table>

<div id="droppable" class="ui-widget-header">
    Drop here
</div> 
```

CSS：

```
#draggable_container {
    position:fixed;
}
#droppable {
    width: 400px; 
    height: 300px; 
    padding: 0.5em; 
    margin: 10px; 
    background-size: cover;
    margin-top:100px; 
    margin-left:80px;
    position:absolute;
} 
```

此处示例：http: [//jsfiddle.net/spairus/tXCjH/104/](http://jsfiddle.net/spairus/tXCjH/104/)

如何防止可拖动元素消失在可放置元素后面？我试过 z -indexing 但没有用（经过一些研究，在这个特定的例子中似乎没有任何区别）。我唯一能做到的就是在声明可拖动容器之前声明可放置区域，如下所示：http: [//jsfiddle.net/spairus/tXCjH/105/](http://jsfiddle.net/spairus/tXCjH/105/)

然而，这对我来说现在是个问题，因为我需要编辑的原始应用程序是一段较旧的代码，其中包含许多表和复杂的功能，需要几天的工作。

有什么快速的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T23:50:39.693

使用可拖动插件的“appendTo”选项。它会在拖动时将可拖动助手附加到选择的节点（从而防止您看到的问题）：

```
$("#draggable1" ).draggable({helper:'clone', appendTo:'body'});
$("#draggable2" ).draggable({helper:'clone', appendTo:'body'});
$("#draggable3" ).draggable({helper:'clone', appendTo:'body'});
$( "#droppable" ).droppable({
    drop: function( event, ui ) {
        document.getElementById('droppable').innerHTML = "test";
        $("#droppable").css('background-image', 'url(' + $(ui.draggable).attr("src") + ')');                    
    }
}); 
```

[请参阅jsfiddle](http://jsfiddle.net/martyk/veJy5/1/)的此链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-19T08:46:04.103

问题出在“克隆”助手和放置目标的 z-index 上。将此添加到您的可拖动元素中，以通过自定义 css 为克隆元素强制 z-index：

```
start: function (e, ui) {
    $(ui.helper).css({
       "z-index": "9"
    })
}, 
```

检查您的可放置元素是否具有 z-index。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:50:22.443

假设您想要一个不与 html 结构混淆的答案.. 这是一个仅 javascript 的答案[http://jsfiddle.net/abbood/tXCjH/106/](http://jsfiddle.net/abbood/tXCjH/106/)

```
var draggable = $('.draggable_container');
var parent = draggable.parent();
draggable.remove();
parent.append(draggable);

 $("#draggable1" ).draggable({helper:'clone'});
 $("#draggable2" ).draggable({helper:'clone'});
 $("#draggable3" ).draggable({helper:'clone'});

    $( "#droppable" ).droppable({
        drop: function( event, ui ) {
                document.getElementById('droppable').innerHTML = "test";
                $("#droppable").css('background-image', 'url(' + $(ui.draggable).attr("src") + ')');                    
        }
    }); 
```

我基本上从javascript的角度模仿了你所做的事情。这是假设`draggable`并且`droppable`都是同一个父母。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T14:39:05.587

看起来使这项工作没有问题的唯一方法是在 droppables 容器之后定义 draggables 容器，然后使用 CSS 将第一个容器放在页面上的后者之前。

# excel - 我可以使用公式从一个工作表中使用标准从一个工作表中提取行到另一个工作表吗？

> ID：14985825
> 
> 赞同：0
> 
> 时间：2013-02-20T17:13:14.940
> 
> 标签：excel, row, extract, formula, worksheet

我正在尝试从此工作表中提取具有相同卡车编号（例如：4）的行。我的问题是，当我使用“高级过滤器”时，它不会在我更改卡车号码时自动更新。我确定我需要使用公式，但似乎公式超出了我的专业知识或缺乏专业知识。任何建议将不胜感激。

```
   ABCDE
1 -设备-序列号---完成日期---到期日期---卡车号码                      
2 ------线圈 ----------991---10/1/2012----7/12/13-------------- 4                      
3 ------线圈 ----------992---10/1/2012----7/12/13-------------- 1                          
4 ------线圈 ----------994---10/1/2012----7/12/13-------------- 4

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:26:21.467

根据您的要求，数据透视表可能是最简单的 - 只需将其`Truck number`放入过滤器字段并过滤卡车 #4。将所有其他字段放在行字段中，并将数据透视表设计为“表格布局”、“不显示小计”、“不显示总计” - 您的结果将如下所示：

![在此处输入图像描述](../Images/44013f04d3003414642b3767a303f218.png)

现在，如果您有任何更新，您只需要刷新数据透视表！

# php - Selenium Web Driver：php-webdriver-bindings的findElementsBy（）函数返回错误

> ID：14985827
> 
> 赞同：0
> 
> 时间：2013-02-20T17:13:18.167
> 
> 标签：php, selenium, phpunit, selenium-webdriver

我正在编写代码自动生成的下拉菜单，例如谷歌搜索帮助，并尝试将该自动生成的下拉菜单的值打印为输出。

在 selenium WebDriver 中捕获多个与 xpath 定位器匹配的元素，我们必须使用 findElementsBy() 函数，

我写的代码如下

```
<?php 
require_once 'www/library/phpwebdriver/WebDriver.php';
class PHPWebDriverTest extends PHPUnit_Framework_TestCase {
 protected $webdriver;

    protected function setUp() {
        $this->webdriver = new WebDriver("localhost", 4444);
        $this->webdriver->connect("firefox");
    }

    protected function tearDown() {
    //    $this->webdriver->close();
    }
    public function testgooglesearch() {                          
    $this->webdriver->get("http://google.com");
    $element=$this->webdriver->findElementBy(LocatorStrategy::name, "q");           
    $element->sendKeys(array("selenium" ) );
    $result=$this->webdriver->findElementsBy(LocatorStrategy::xpath,"//*[@id=\'gsr\']/table/tbody/tr/td[2]/table/tbody/tr[*]/td/");
    echo $countresult=count($result);

    }
}
?> 
```

根据绑定 findElementsBy() 函数将假设返回一个数组。所以当我试图计算数组长度时，会返回一个错误。

**错误：试图获取非对象的属性。**

任何人都可以帮助我如何继续。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T11:07:55.363

最后我能够自己找到问题的解决方案。

我的主要座右铭是打印自动生成的下拉列表的值

主要问题是测试的运行速度。由于测试速度很快，所以“findElementsBy”功能无法正常工作。

所以我在该功能之前使用了 sleep 命令，以便它可以正常工作。

下面给出了适合我的代码

```
<?php
require_once "/phpwebdriver/WebDriver.php";
class WebdriverTest extends PHPUnit_Framework_TestCase

{
  protected $webdriver;

  protected function setUp()
  {   

$this->webdriver=new WebDriver("localhost", 4444);

    $this->webdriver->connect("firefox");
  }

   protected function tearDown() {
      $this->webdriver->close();
    }

  public function testSearch()
  {
    $this->webdriver->get("http://google.com");         

       $element=$this->webdriver->findElementBy(LocatorStrategy::name,"q");
    $element->sendKeys(array("selenium" ) );

sleep(2);
    $result=$this->webdriver->findElementsBy(LocatorStrategy::xpath,"//td[@class='gssb_a gbqfsf']");
    $countresult=count($result);
    echo "Records Count = ". $countresult ."\n";
        $x=1;
    $y=0;
    echo "\n";
     while($y<$countresult)
      {
        $output=$result[$y]->getText();
    echo $output."\n";
         $x++;
         $y++;
       }

    $r=$this->webdriver->findElementBy(LocatorStrategy::xpath,"//div[@class='gbqlca']");
    $r->click();

    }

}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T08:00:04.210

这可能对你有用。

点击[这里](http://santoshsarmajv.blogspot.in/2013/02/how-to-get-auto-populated-google-search.html)

仅供参考：上述实现在 java-selenium 绑定中。

# javascript - PhoneGap AJAX 登录

> ID：14985828
> 
> 赞同：0
> 
> 时间：2013-02-20T17:13:20.473
> 
> 标签：javascript, jquery, ajax, cordova

我正在尝试在 PhoneGap 中构建一个登录应用程序。我一直在寻找类似的东西，我发现它们很多......但我不明白为什么这段代码不起作用。当我按下 logIn_btn 时，它显示它无法到达“成功”的代码段。谢谢您的帮助！

```
 $('#logIn_btn').click(function(){

    user = $('#username').val();
    pass = $('#password').val(); 

     var ev = {'papa':true};

    if(user!='' && pass!=''){
        alert('trying login');
    $.ajax({ 
            url: 'https://localhost/server/IF/mobileApp/login.php',
            type: 'post',
            datatype: 'json',
            data: ev,
            success: function(data){
                alert('asd');       
            }
        });

        console.line('done.')
} else {
    alert('Please insert your username and password.');
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:20:47.527

您的服务器不应该是`https://localhost`，它应该是您将要登录的服务器的名称/IP。

有关其他信息，请使用 Chrome 查看您的网络选项卡，或安装故障处理程序

```
$.ajax({ 
    url: 'https://localhost/server/IF/mobileApp/login.php',
    type: 'post',
    datatype: 'json',
    data: ev,
    success: function(data){
        alert('asd');       
   }
}).fail(function(jqXHR, textStatus){

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:32:47.950

`console.line`?我想会的`console.log`。而是尝试提醒消息。还要确保 javascript 在`deviceready`. 在`localhost`android中也是一个非常不同的东西。尝试使用IP地址或域名访问服务器。

# java - 为什么在父方法中返回子类名？

> ID：14985839
> 
> 赞同：3
> 
> 时间：2013-02-20T17:13:45.553
> 
> 标签：java, inheritance

我有一个名为的类`Entity`，它是`abstract`我在整个程序中使用的许多其他对象的超类（对于这个例子，`Apple`类）。

在许多方法中，我打印调试语句，方法是打印语句所在的类名，然后是实际的调试消息。然而，令我惊讶的是，当我从 的实例调用继承的方法时`Apple`，`Apple`打印的是 的类名而不是 的类名`Entity`（这是方法实际所在的位置）。

举一个更容易发布代码片段的相关示例，我已经`toString()`像这样覆盖：

```
public abstract class Entity {

    private String name;

    @Override
    public String toString() {
        return getClass().getSimpleName() + " " + (name != null ? name : super.hashCode());
    }
} 
```

因为我没有在`Apple`类中进一步重写这个方法，所以我希望返回的 String 的第一部分是`Entity`，而不是`Apple`。然而它却返回了`Apple`（对于这个用例，它以这种方式工作实际上很好，但仍然有些令人困惑）。

我尝试查看 的实现`Object#getClass()`，但由于它被声明为`native`方法而无法查看。

`public final native Class<?> getClass();`

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T17:16:15.547

你在打电话`getClass()`。这总是返回对与对象的*实际*`Class`执行时类型关联的对象的引用，而不是您调用它的表达式的编译时类型的类。例如：

 *```
Object foo = "this is a string";
Class<?> clazz = foo.getClass(); 
```

`clazz`将引用 的类`String`，而不是 的类`Object`。

您无需查看*实现*-`getClass()`只需查看[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass%28%29)：

> 表示此对象的运行时类的 Class 对象。

请注意“运行时”位，如“在执行时确定，而不是在编译时确定”。

在这种情况下，我认为在 的结果中返回执行时类名是*完全*`toString()`合理的，但如果你*真的*想要这个`Entity`类，你可以`Entity.class`改用。*

# javascript - 验证两个条件时执行函数：ajax 响应和计时器

> ID：14985840
> 
> 赞同：2
> 
> 时间：2013-02-20T17:13:50.137
> 
> 标签：javascript, jquery, timer, request

我正在尝试模拟这样的事情：

*   单击按钮会显示一个模式弹出窗口，上面写着“正在加载东西”，并带有覆盖
*   与此同时，我用 jQuery 执行了一个 ajax 调用，并让一个 2 秒的计时器启动
*   ***一旦我从 ajax 调用得到响应并且***我的计时器结束，我需要隐藏模式弹出窗口。

我的 ajax 请求可能会在 2 秒内返回，但我需要用户阅读弹出窗口中的消息，并且可能会在 2 秒后返回（但我需要它返回以继续）。

我试图调查 $.when 但我找不到正确设置“计时器”部分的方法。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:18:15.907

如果您设置为 using `$.when`，您可以创建一个 Deferred ，它会在`x`几毫秒后解析；

```
function timedDeferred(n) {
    var deferred = jQuery.Deferred();

    setTimeout(function () {
        deferred.resolve();
    }, n);

    return deferred.promise();
} 
```

...然后您可以使用`$.when`;

```
$.when($.ajax(), timedDeferred(2000)).then(function (ajax) {
    // "ajax" is an array of the arguments that $.ajax() provides; see
    // the bottom of http://api.jquery.com/jQuery.when/
}); 
```

# android - 在符合 Honeycomb 的首选项屏幕中查找首选项

> ID：14985847
> 
> 赞同：1
> 
> 时间：2013-02-20T17:14:21.923
> 
> 标签：android, android-fragments, android-preferences

我的场景很简单：我的偏好之一是仅在用户购买了应用内产品时才激活的高级功能。

我有一个`PreferenceScreen`既符合 pre-Honeycomb 和 post-Honeycomb Fragment 模型的模型。

示例片段

```
 @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    public static class SocialPreferenceFragment extends PreferenceFragment {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);

            addPreferencesFromResource(R.xml.pref_social);
                    findPreference(getString(R.string.preference_donateBitcoin))
            .setOnPreferenceClickListener(new OnPreferenceClickListener() { 
```

示例片段 2

```
 private void setupSimplePreferencesScreen() {
    if (!isSimplePreferences(this)) {
        return;
    }

    // In the simplified UI, fragments are not used at all and we instead
    // use the older PreferenceActivity APIs.

    // Add 'general' preferences.

    addPreferencesFromResource(R.xml.pref_social);
            findPreference(getString(R.string.preference_donateBitcoin))
            .setOnPreferenceClickListener(new OnPreferenceClickListener() { 
```

这两个片段，一个在`PreferenceFragment`类中，另一个在 中`PreferenceActivity`，管理首选项的创建。

现在的问题是：我在回调方法中，如果购买了 SKU，我需要访问首选项以启用它

```
 @Override
public void onPurchasedAsyncListenerResult(String sku, boolean isPurchased) {
    if (PremiumManager.SKU_AUTO_CONNECT.equals(sku)) {
        Preference pref;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
            ///WHAAAAAAAAAAAAAAAT?;
        else
        pref = findPreference(getString(R.string.preference_autoconnect));
        pref.setEnabled(isPurchased);
    }

} 
```

调用`findPreference`ICS 平板电脑返回 null，因此抛出 NPE。在首选项屏幕中使用片段时如何检索首选项对象？

# php - 我需要 spl_autoload_register 来覆盖 __autoload

> ID：14985850
> 
> 赞同：0
> 
> 时间：2013-02-20T17:14:29.953
> 
> 标签：php, autoload

我正在用 php 中的更新对象替换一些旧对象。该站点当前有一个 __autoload 函数，它只调用`include`目录中的 .inc 文件。我使用 spl_autoload_register 为更新的对象创建了一个新的自动加载函数。它使用一个名为`lib`和命名空间的目录。

我有一个名为 Sample 的对象，旧对象（也称为 Sample）引用`include/sample.inc`. 然后新的对象路径是`lib/Sample.php`. 我的问题是，即使我在调用对象的页面上使用 spl_autoload_register，它仍在调用旧对象。这是我的代码（请注意 __autoload() 是在到达此页面之前定义的）。

```
<?php
spl_autoload_register('autoload_lib');
$sample_id = req('sample_id');
$alert = req('alert');

if (!empty($sample_id))
{
    $sample = new Sample($sample_id);
    var_dump($sample); die();
    $referral = $sample->Referral();

    matry::open (get_defined_vars());
}
else
        {
            matry::open(get_defined_vars());
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T18:09:10.913

当您开始使用 spl_... 方法时，它们会篡夺任何现有的 __autoload 函数：

> 如果您的代码具有现有的 __autoload() 函数，则必须在 __autoload 堆栈上显式注册此函数。这是因为 spl_autoload_register() 将通过 spl_autoload() 或 spl_autoload_call() 有效地替换 __autoload() 函数的引擎缓存。

可以在一个简单的示例中看到这一点：

```
<?php

ini_set('display_errors', 1);

function __autoload($className) {
    exit("__autoload");
}

spl_autoload_register(function($className) {
    exit("spl_autoload");
});

// try to create nonexistent class
new Foo();

?> 
```

上面的例子输出“spl_autoload”

您确定在脚本的那个阶段没有注册其他自动加载器吗？您可以通过添加 prepend 参数来测试这一点（例如， spl_autoload_register('autoload_lib', true, true); 脚本中当时是否可调用 autoload_lib （是否包含它的源代码？）

# entity-framework - EF Code First - 创建数据库 - 用户登录失败

> ID：14985854
> 
> 赞同：7
> 
> 时间：2013-02-20T17:14:34.723
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我最初设置了一个连接到现有数据库的 EF 代码。这工作正常。

然后，我对 POCO 进行了一些更改，并决定让代码首先为我生成新数据库。

出现错误：无法打开登录请求的数据库“MyDatabase”。登录失败。\r\n用户 'DOMAIN\username' 登录失败。

我删除了旧数据库，但没有更改连接字符串：

```
<add name="MyDatabaseContext" connectionString="Data Source=localhost;Initial Catalog=MyDatabase;Integrated Security=True;" providerName="System.Data.SqlClient" /> 
```

我的本地机器上有一个 sql server 2008 实例，我的域用户名是“sysadmin”角色。

我尝试了各种数据库初始化程序，但我得到了同样的错误。它在第一次查询调用时失败，但代码首先不会创建数据库。我可以将连接字符串指向旧数据库的副本（更改之前），它会运行良好，除了它是我的旧模式，即使我指定了 DropCreateDatabaseAlways 初始化程序。这是没有意义的，也没有遵循我在家用机器上首先使用代码的经验。

使用 Visual Studio 2012 和 EF5。

我需要能够让代码首先生成一个新数据库。到底是怎么回事？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T19:00:46.220

发现我的 DbContext 类中有一个静态构造函数，它覆盖了数据库初始化程序。

```
static MyDbContext()
        {
            Database.SetInitializer<MyDbContext>(null);
        } 
```

代码优先逆向工程师将把它放进去，这样你就不会覆盖你现有的数据库。我换的时候没有考虑。

希望这会帮助别人。

# asp.net-web-api - 在 WebAPI Formatter 中，如何从 HttpContent 获取 URL？

> ID：14985855
> 
> 赞同：4
> 
> 时间：2013-02-20T17:14:35.417
> 
> 标签：asp.net-web-api

在 WebAPI 服务中，我们使用 Formatter 来读取请求的内容参数。我们需要访问 URL 才能正确转换内容参数。HttpRequestMessage 不可用，我们不能使用 HttpContext.Current.Request 因为 HttpContext.Current 为空。[在http://aspnetwebstack.codeplex.com/workitem/82](http://aspnetwebstack.codeplex.com/workitem/82)请求在读取时访问 HttpRequestMessage ，但由于 HttpContent 在读取时可用，此问题已关闭。但是，我不知道如何从 HttpContent 获取 URL，或者即使有可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:33:52.340

格式化程序上有一个名为 GetPerRequestFormatterInstance 的方法，您可以覆盖该方法以创建格式化程序的新实例，其中包含有关请求的状态信息。顺便说一下，这个方法 GetPerRequestFormatterInstance 只在请求的反序列化阶段被调用。下面的例子：

```
public class TextPlainFormatter : BufferedMediaTypeFormatter
{
    public TextPlainFormatter()
    {
        this.SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/plain"));
    }

    public HttpRequestMessage CurrentRequest
    {
        get;
        private set;
    }

    public override MediaTypeFormatter GetPerRequestFormatterInstance(Type type, HttpRequestMessage request, MediaTypeHeaderValue mediaType)
    {
        TextPlainFormatter frmtr = new TextPlainFormatter();
        frmtr.CurrentRequest = request;

        //Copy from the original formatter instance to the new instance
        frmtr.MediaTypeMappings.Clear();
        foreach (MediaTypeMapping mediaTypeMapping in this.MediaTypeMappings)
        {
            frmtr.MediaTypeMappings.Add(mediaTypeMapping);
        }

        frmtr.RequiredMemberSelector = this.RequiredMemberSelector;

        frmtr.SupportedEncodings.Clear();
        foreach (Encoding supportedEncoding in this.SupportedEncodings)
        {
            frmtr.SupportedEncodings.Add(supportedEncoding);
        }

        frmtr.SupportedMediaTypes.Clear();
        foreach (MediaTypeHeaderValue supportedMediaType in this.SupportedMediaTypes)
        {
            frmtr.SupportedMediaTypes.Add(supportedMediaType);
        }

        return frmtr;
    } 
```

# java - 需要一个正则表达式来获取两个标签之间的值

> ID：14985856
> 
> 赞同：-1
> 
> 时间：2013-02-20T17:14:36.580
> 
> 标签：java, regex, perl

需要正则表达式来提取 >xxxxx< 之间的值。任何人都可以在这方面帮助我。

```
<ChangeID type="String">C10286</ChangeID>
<ChangeID type="String">C10296</ChangeID> 
```

是否可以在单个正则表达式中以逗号分隔格式（如**C10286、C10296 ）获取两个值？**

谢谢并恭祝安康

里亚斯·侯赛因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:26:13.577

尝试这个：

```
(?<=>)[^<]* 
```

测试它`grep -Po`：

```
kent$  echo '<ChangeID type="String">C10286</ChangeID>
<ChangeID type="String">C10296</ChangeID>'|grep -Po '(?<=>)[^<]*'
C10286
C10296 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:29:50.307

我的想法是查找所有单词并删除我们不需要的单词（如果您的标签中有超过 1 个值）：

```
(?!ChangeID\b)(?!type\b)(?!String\b)\b\w+ 
```

你可以试试：[http ://regexpal.com/](http://regexpal.com/)

# python - numpy 中的并行数组操作

> ID：14985864
> 
> 赞同：1
> 
> 时间：2013-02-20T17:14:49.687
> 
> 标签：python, numpy, parallel-processing

我有一个代码，我需要在其中处理一些大的 numpy 数组。例如，我有一个 3D 数组`A`，我需要`B`使用`A`. 然而，所有的元素`B`都是相互独立的。例子：

```
for i in np.arange(Nx):
  for j in np.arange(Ny):
   for k in np.arange(Nz):
       B[i][j][k] = A[i+1][j][k]*np.sqrt(A[i][j-1][k-1]) 
```

`B`因此，如果我可以并行构建数组，它将大大加快速度。在 python 中执行此操作的最简单方法是什么？

我也有类似的矩阵运算，比如标准化二维数组的每一行。例子

```
for i in np.arange(Nx):
   f[i,:] = f[i,:]/np.linalg.norm(f[i,:]) 
```

如果它为每一行并行运行，这也会加快速度。如何做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:21:18.933

你应该看看[Numpy 的`roll`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.roll.html)功能。我认为这相当于您的第一个代码块（尽管您需要决定在边缘发生什么 - `roll`“环绕”）：

```
B = np.roll(A,1,axis=0) * np.sqrt(np.roll(np.roll(A,-1,axis=1),-1,axis=2)) 
```

对于您的第二种情况，另一个相当可怕的单线是：

```
f /= np.sqrt(np.sum(f**2, axis=1))[...,np.newaxis] 
```

这条线的解释：

我们首先要计算每一行的范数。让我们

```
f = np.random.rand(5,6) 
```

平方的每个元素`f`

```
f**2 
```

将沿轴 1 的正方形相加，使该轴“变平”。

```
np.sum(f**2, axis=1) 
```

取平方和的平方根。

```
np.sqrt(np.sum(f**2, axis=1)) 
```

我们现在有了每一行的范数。

为了正确地除以原始的每一行，`f`我们需要利用 Numpy 广播规则来有效地添加一个维度：

```
np.sqrt(np.sum(f**2, axis=1))[...,np.newaxis] 
```

最后我们计算我们的结果

```
f /= np.sqrt(np.sum(f**2, axis=1))[...,np.newaxis] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:25:07.217

如果您对边缘进行了很好的处理，那么进行第一次矢量化的标准方法将是这样的：

```
B = np.zeros(A.shape)
B[:-1, 1:, 1:] = A[1:, 1:, 1:] * np.sqrt(A[:-1, :-1, :-1]) 
```

然后，您需要填写`B[-1, :, :]`,`B[:, 0, :]`和`B[:, :, 0]`适当的值。

将此扩展到其他索引应该非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:32:17.710

要在 中执行并行处理`numpy`，您应该查看[mpi4py](https://pypi.python.org/pypi/mpi4py)。它是 Python 的 MPI 绑定。它允许分布式处理。

# asp.net - AntiForgeryToken 验证 Asp.Net MVC 3

> ID：14985868
> 
> 赞同：1
> 
> 时间：2013-02-20T17:14:58.243
> 
> 标签：asp.net, asp.net-mvc-3, csrf, antiforgerytoken

AntiForgeryToken 如何失效？我已设置此令牌以防止对我的登录页面进行 CSRF 攻击，并已使用提琴手对其进行了检查。当我调用 GET 方法时，令牌生成为隐藏字段**__RequestVerificationToken**。当我发布登录数据时，是否应该在下一次 GET 调用时更改此令牌？我用 fiddler 捕捉到这个值与发布数据和重新发布/重播请求，这很有效。这是良好的行为，还是不应该发生这种重播，因为在我离开该表格后令牌值不应该是有效的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:51:48.977

令牌绑定到会话 cookie；当会话消失并且 cookie 消失时，令牌将变为无效。在 Fiddler 中重放工作的原因是 Fiddler 正在捕获（并重放）会话 cookie 和表单令牌。

您可以通过在重放之前从 Fiddler 中删除请求的*Cookie*标头来模拟会话到期。然后服务器应该拒绝表单的 __RequestVerificationToken 字段。

# ruby-on-rails - 如何从头开始将用户配置文件更新为用户身份验证

> ID：14985873
> 
> 赞同：0
> 
> 时间：2013-02-20T17:15:13.797
> 
> 标签：ruby-on-rails

我从头开始遵循修改后的 Railscast 进行用户身份验证。

我想知道如何添加部分供用户修改个人资料，因为我有其他字段需要他们在注册后输入，例如性别、种族、职业、关于我、孩子、身高等。

是否有教程向您展示如何执行此操作，或者有人可以帮助我指出正确的方向吗？

我的项目文件可以在[https://github.com/pwz2k/date查看](https://github.com/pwz2k/date)

**更新**

我已经开始研究它，不确定我是否做得对。我希望用户能够修改他们的帐户设置（注册时使用的字段）。

下面是我在 /users 文件夹中的 edit.html。

```
<h1>Account Information</h1>

<%= form_for @user do |f| %>
  <% if @user.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% @user.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

    <div class="field">
        <%= f.label :email %><br/>
        <%= f.text_field :email %>
    </div>
    <div class="field">
        <%= f.label :password %><br/>
        <%= f.password_field :password %>
    </div>
    <div class="field">
        <%= f.label :password_confirmation %><br/>
        <%= f.password_field :password_confirmation %>
    </div>
    <div class="field">
        <%= f.label :username %><br/>
        <%= f.text_field :username %>
    </div>
    <div class="field">
        <%= f.label :zip_code %><br/>
        <%= f.text_field :zip_code %>
    </div>
    <div class="field">
        <%= f.label :birthday %><br/>
        <%= f.text_field :birthday %>
    </div>  
    <div class="actions"><%= f.submit %></div>
<% end %> 
```

这是我的路线：

```
Dating::Application.routes.draw do
  get 'signup' => 'users#new'
  get 'login' => 'sessions#new'
  get 'logout' => 'sessions#destroy'
  get 'edit' => 'edit#edit'

  resources :users
  resources :sessions
  resources :password_resets

  root to: 'users#new' 
```

这是我添加到 users_controller 的内容，我不确定我是否做得正确：

```
 def edit
      @user = User.find(params[:user])
  end

  def update
    @user = User.find(params[:user])
    if @user.update_attributes(params[:user])
      flash[:success] = "Account updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
  end 
```

我最终将如何让一切正常工作是用户将转到 /edit 以使用注册期间填写的所有私人信息修改他们的帐户设置。然后用户可以直接在他们的个人资料页面上编辑个人资料信息（性别、种族、职业、关于我等）（将使用就地编辑）。所以我只需要知道我采取的步骤是否正确（我还没有使用终端），如果是，我如何让编辑页面显示，因为它显示路由错误 atm。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:08:05.703

只是一些一般性的指针。

在 Railscasts中，正在创建`users_controller`'s`new`和actions。`create`你想编辑一个用户，所以你可以构建这个控制器的`edit`和`update`操作。

```
# app/controllers/users_controller.rb
class UsersController < ...
  def new
    # exists
  end

  def create
    # exists
  end

  def edit
    # load the current_user; make sure a user can only edit his record!
  end

  def update
    # save edit for the current_user, same security as above
  end
end 
```

在您的路线中，您可以弄清楚如何路由`resource :profile`单一资源[（Rails 指南）](http://guides.rubyonrails.org/routing.html#singular-resources)以映射到适当的操作。

# android - textView 滚动文本

> ID：14985874
> 
> 赞同：1
> 
> 时间：2013-02-20T17:15:13.743
> 
> 标签：android, textview

我想创建一个文本视图。我这样做了。

```
<TextView
            android:id="@+id/TxttopTitle"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal"
            android:gravity="right"
            android:lines="1"
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="true"
            android:text="البحث البحثالبحثالبحثالبحثالبحثالبحثالبحثالبحثالبحثالبحثالبحثالبحث" /> 
```

问题是：我希望文本从右到左滚动（而不是从左到右）

我可以这样做吗？

# android - Android 类设计 - 每次我想显示它们时，我是否应该在我的活动中重新实例化对话框类？

> ID：14985876
> 
> 赞同：1
> 
> 时间：2013-02-20T17:15:16.943
> 
> 标签：android, class-design

主要活动：

```
GeneralDialogFragment history_dialog = new GeneralDialogFragment();
public void showHistory(View view) {

    Bundle bdl = new Bundle(1);
    bdl.putString("dialog_type", "history");

    history_dialog.setArguments(bdl);
    history_dialog.show(getSupportFragmentManager(), null);
} 
```

这段代码存在于我的活动中。

现在，我在犹豫是否应该把定义

```
GeneralDialogFragment history_dialog = new GeneralDialogFragment(); 
```

在 showHistory() 函数内部还是外部？

有什么不同？如果我把它放在外面，我会节省内存吗（所以它只实例化一次？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:26:43.527

您是否这样做主要取决于 Fragment 的功能。创建一个新的 Fragment 对象的开销是微不足道的，但可以根据您需要创建的数量加起来。如果 a`DialogFragment`是静态的并且每秒都会弹出（你为什么要这样做？！？！），那么可能值得保留它。如果`DialogFragment`每分钟都会弹出一个，那么最终用户可能不会注意到您是否每次都在重新创建对象。

不过一般来说，Android (Google) 建议使用延迟加载方法。因此，如果您在该方法的开头创建对象并调用`show()`，您将丢失对它的引用。在应用程序中仍然会有对它的引用`FragmentManager`，所以它会留在内存中。一旦你调用`dismiss()`，`Fragment`将被删除，它占用的内存将被垃圾回收。这样做会产生轻微的 CPU 开销，但可以最大限度地减少内存使用量。

如果需要为片段分配大量资源，则例外情况。在**这种**情况下，明智的做法是加载资源一次然后保留它们。例如，图像可以更好地缓存，因为它们可能需要很长时间才能解码。它们不必保存在 Fragment 本身中，但最好将大图像留在内存中并在创建新 Fragment 时传递给它们。

**编辑：** 只是一个旁注，如果您确实决定需要保留参考，最好检查一下以确保对话框尚未显示。`showHistory()`如果对话框当前已打开，如果您再次调用该应用程序当前将崩溃，因为您正在调用`setArguments()`附加`Fragment`到`Activity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:29:14.877

这取决于您要调用多少次 showHistoryMethod() 以及您是否需要 showHistory() 方法之外的对象 history_dialog。

因此，假设在 showHistory() 方法之外不需要该对象，并且它只会在 Activity 期间调用一次，或者根本不调用，然后将其放在 showHistory() 方法中。

如果你把它放在外面，那么 GeneralDialogFragment 的实例将在你的主要活动的生命周期内存在。而如果它在 showHistory 方法中，那么一旦不需要， GarabageCollector 就会释放内存。

# maven - 已应用 liquibase 标记变更集

> ID：14985882
> 
> 赞同：1
> 
> 时间：2013-02-20T17:15:35.303
> 
> 标签：maven, liquibase

如何将特定变更集标记为在 liquibase maven 插件中应用？文档中对此一无所知，命令**markNextChangeSetRan**似乎什么也没做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-07T13:26:34.000

这个问题有一个“hacky”解决方案：

1.  删除有问题的`changeSet`XML 元素的所有子元素。请记住将`changeSet`id 和 author 参数留在 liquibase XML 文件中。
2.  跑`mvn liquibase:update`
    *   它应该说它运行了所需的特定`changeSet`.
3.  还原您修改的 XML 文件。
4.  `mvn liquibase:update`再次 运行
    *   你会得到`Validation Failed: 1 change sets check sum`新的总和。从错误中复制新的校验和。
5.  将校验和手动粘贴到`DATABASECHANGELOG`目标数据库表中的正确记录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T16:34:23.353

查看当前主分支（当前为 3.0.0-beta2-SNAPSHOT）中的[源代码](https://github.com/liquibase/liquibase/tree/master/liquibase-maven-plugin)，似乎根本没有执行该`markNextChangeSetRan`命令。

所以我想，它根本不存在。

[您可以在liquibase JIRA](https://liquibase.jira.com)中添加一张票来请求这个，但似乎没有 maven 插件的项目（虽然不知道 liquibase 的 maven 插件是否在其他地方被跟踪）。

很抱歉没有更好的答案。[我刚刚从github](https://github.com/liquibase/liquibase)上查看了完整的 liquibase 代码，以实现一个缺失的功能，所以我想我只是快速检查一下。

# database - 我应该为数据库使用什么？

> ID：14985885
> 
> 赞同：1
> 
> 时间：2013-02-20T17:15:37.550
> 
> 标签：database, vb.net, excel, ms-access, database-design

我的 vb.net 代码计算了公司从 1901 年到现在每个季度的股价增长率，并将其存储在数据表中。这需要一段时间来执行（10-15 分钟）。我想在计算后将信息保存在数据表中，这样我每次运行程序时都不必重新计算过去的增长率。当我打开我的程序时，我希望数据表包含已经计算过的任何增长率，因此我只需要计算新季度的增长率。

我应该将我的数据表存储在某种数据库中还是有其他方法可以做到这一点？我的数据表很大。它目前有 450 列（从 1901 年到现在，每个季度一个）并且可以有数千行（每个公司一个）。这对于 Microsoft Access 来说太大了吗？Microsoft Excel 是一种选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:22:06.823

First of all, it's unclear you actually *need* a database. If you don't need things such as concurrent access, client/server operation, ACID transactions etc... you might as well just implement your cache using the file system.

If you conclude you do need a DBMS, there are many good choices, including free such as: PostgreSQL, MS SQL Server Express, Oracle Express, MySQL, Firebird, SQLite etc... or commercial such as: Oracle, MS SQL Server, IBM DB2, Sybase etc...

I suggest you make your data model flexible, so you don't have to add new column for each new quarter:

![enter image description here](../Images/39f0addb9308fb85d6a30b06c94efd91.png)

This model is also well suited for [clustering](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index) (if your DBMS of choice supports it), so the calculations belonging to the same company are stored physically close together in the database, potentially lowering the I/O during querying. Alternatively, you may choose to cluster on year/quarter.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T17:34:56.840

我会将数据库设计更改为：

*   ID
*   四分之一
*   年
*   公司名称
*   价值1
*   价值2
*   价值3

作为您的列并开始将其保存为垂直表。

然后，你没有你想象的那么多数据，所以我推荐一些免费的东西，比如 mysql，甚至 nosql，因为你除了存储和检索数据之外什么都不做。您使用的任何基于文本的文件：xml、csv、.xls 都会变慢，因为需要将整个文件加载到内存中才能解析它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T17:21:16.493

Excel 对工作表的大小有限制，对于希望移植到不同结构的任何内容，您都不应该真正将其用作明确的“数据库”。一般来说，它对电子表格和会计之类的东西很有用，但你不应该将它用于计算中所理解的绝对真实数据库。此外，Excel 对可以包含的记录数有限制：[截至 2003 年，工作表大小为 65,536 行 x 256 列](http://office.microsoft.com/en-ca/excel-help/excel-specifications-and-limits-HP005199291.aspx)

Access 可能适用于此，但随着您正在查看的记录数量，您可能会开始遇到文件大小、速度减慢以及类似问题的一般问题。在您开始一次拥有超过 3,000 条记录的情况下，使用大型 RDBM 或类似的东西可能会更好；Oracle、MySQL、SQL Server 等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T17:26:28.163

我认为主要问题可能是您设计数据库的方式。每个季度的列听起来不是很好的做法，特别是当您必须在每个新季度更改数据库架构时。

您可以从 MS Access 数据库开始，然后如果您对它有任何性能问题，请迁移到 SQL Server 数据库或其他东西。

同样，我认为您应该仔细查看您的数据库设计。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-20T17:39:12.303

我在股票数据方面拥有丰富的经验。在测试了很多方法之后，我认为对于一个简单的免费方法，您应该尝试 SQL Server。您正在使用的数据量对于 Access 来说太多了（我想这不是您想要的唯一计算）。您可以免费使用[SQL Server Express](https://www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx)。

对于这个设计，我将在 SQL Server 中创建一个名为 HistoricalGrowthRate 的数据库。我将为每个股票代码创建一个表格并将数据存储在其中。

实现此目的的一种方法是拥有一个单独的数据库，其中包含一个包含您希望遵循的所有符号的表（如果您没有，可以使用来自 Nasdaq 的 CompanyList.csv）。遍历该表中的每个符号并在 HistoricalGrowthRate 中运行创建表。当您希望填充值时，只需再次循环并插入您的值。您也可以只从 Access 中导出，这对您来说更快。

这将减少您调用信息时的负载并提供访问信息的简便方法。因此，如果您想要 AAPL 的历史增长率，您只需将连接字符串设置为您的 HistoricalGrowthRate 数据库、引用表 AAPL 并提取值。

# c# - 在不知道进程启动顺序的情况下在另一个进程上触发事件

> ID：14985888
> 
> 赞同：2
> 
> 时间：2013-02-20T17:15:40.447
> 
> 标签：c#, .net, ipc, mutex, memory-mapped-files

我需要最快的方式在其他进程中触发事件，我知道我可能会使用互斥锁，但是当我不知道启动两个进程的顺序时很难管理互斥锁，其中一个进程可能被关闭或者不运行，我想用FileSystemWatcher，但是开销很大，然后我想用MemoryMappedFiles，我可以监视一些命名的内存映射文件，并在该文件存在时触发事件，并在事件时删除文件被解雇了，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:26:22.423

在模式中使用[`EventWaitHandle`](http://msdn.microsoft.com/en-us/library/41acw8ct.aspx)带有名称的an。`EventResetMode.ManualReset`确保设置它的应用程序保持打开状态。请注意，一旦关闭它的所有句柄，该事件将不再存在，因此将恢复为默认值。

# visual-studio-2010 - TFS-2010 中的“合并”按钮不见了？

> ID：14985892
> 
> 赞同：3
> 
> 时间：2013-02-20T17:15:54.727
> 
> 标签：visual-studio-2010, visual-studio

我们`Vs2010` 使用`TFS 2010`

源代码管理的设置 [ `merge`|| `compare`] 是：

![在此处输入图像描述](../Images/a2375f04e8b9ef21251e7571d54f6024.png)

`cs`++`aspx`扩展一切正常`html`。

但是扩展存在问题`css`（我们不知道为什么）：

对于所有**其他**文件，它*确实*显示`merge`按钮（当有冲突时）：

![在此处输入图像描述](../Images/dcf5d5cef331ece3b74af769e8edd74b.png)

但是对于**css**扩展文件，**没有**合并按钮：

![在此处输入图像描述](../Images/f1e88f418df443e4f388a037e46c8e40.png)

这是为什么 ？我该如何改变它？（已经看过设置，但找不到任何相关部分）。

* * *

其他无关信息：

*   我们使用*Beyond compare*作为我们的比较工具
*   比较操作的确切设置：

    *   命令：`C:\Program Files\Beyond Compare 3\BComp.exe`
    *   论据`%1 %2 /title1=%6 /title2=%7 /solo`
*   合并操作的确切设置：

    *   命令：`C:\Program Files\Beyond Compare 3\BComp.exe`
    *   论据`%1 %2 %3 %4 /title1=%6 /title2=%7 /title3=%8 /title4=%9`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T18:33:41.767

连接到您的 TFS 服务器并转到您的团队资源管理器面板。选择`Settings->Source Control`

检查 .css 文件扩展名是否已注册。对我来说，它显示在`Common Web Files`类别下，但我在 2012 年

# asp.net - ASPNET 1.1 会话状态更新

> ID：14985895
> 
> 赞同：0
> 
> 时间：2013-02-20T17:16:02.380
> 
> 标签：asp.net, session-state

我计划开始将 Out-Of-Proc 会话状态（使用 NCACHE）用于会话密集型的 Web 应用程序（许多东西可以降级为视图状态）。我们需要做的初步审查有点简单（只需验证插入了哪些对象），但困难的部分是验证如果有人从会话中获取对象然后更新对象会发生什么。问题：该对象会自动更新会话包吗？还是我必须用新的更新版本再次更新会话包？如果使用 State Server 与 Sql Server 有区别吗？

只是一些基本的例子：

```
 private void Page_Load(object sender, System.EventArgs e)
    {
            MyClass c = (MyClass)Session["c"];
            if (c != null)
                Response.Write(c.Comments);

            if (!Page.IsPostBack)
            {
                c = new MyClass();
                c.Comments = "No Postback " + DateTime.Now.ToString("hhmmssff");
                Session["c"] = c;
            }
            else
            {
                c = (MyClass)Session["c"];
                if (c != null)
                {
                    c.Comments = "Postback " + DateTime.Now.ToString("hhmmssff");
                }
            }
    } 
```

我相信上面的代码不会更新会话（所以在以后的回发中，我总是会看到相同的值）。然而，确实如此！！！！所以我不确定为什么？我读了很多人说会话没有更新的 url，他们需要做一个明确的覆盖。

我正在做的测试是一个 ASPNET1.1 Web 应用程序，其中状态服务器配置为我的 LAN IP 地址（不是 localhost 或 127.0.0.1）。

谢谢你的关注，KAT LIM

# curl - curl 从文本文件中读取图像 URL 列表，将图像保存到本地文件夹

> ID：14985899
> 
> 赞同：0
> 
> 时间：2013-02-20T17:16:12.400
> 
> 标签：curl, notepad++, text-editor

在 Windows 上使用 curl.exe，这曾经可以工作：

我会有一个名为 imageURLs.txt 的文本文件，其中包含如下内容：

```
url = "http://image-website.com/43534?wid=800&fmt=jpg&qlt=80"
output = "43534.jpg"
url = "http://image-website.com/12345?wid=800&fmt=jpg&qlt=80"
output = "12345.jpg" 
```

然后我会运行这个命令：

```
curl.exe -K imageURLs.txt 
```

这用于将两个图像下载到我运行它的同一文件夹中。现在它似乎正在将图像数据输出到命令行。我不确定是什么导致了这种变化。有任何想法吗？

谢谢！

ps-我可以通过运行如下命令来下载单个图像：

```
curl.exe "http://image-website.com/43534?wid=800&fmt=jpg&qlt=80" -o 43534.jpg 
```

编辑：这似乎是某种行尾问题。有些文本文件有效，有些则无效。Notepad++ 似乎没有向我展示行尾的区别。对于其他可以在 Windows 上显示此信息的文本编辑器或工具有什么建议吗？

**编辑＃2：好的，我想通了。我需要在每行末尾的 LF，而不是 CR。在记事本++中这样做：查看->显示符号->显示所有字符。查找 \r 并将其替换为 \n。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:14:53.163

Curl 希望文本文件在每一行的末尾都有 LF，而不是 CR。在记事本++中这样做：查看->显示符号->显示所有字符。查找 \r 并将其替换为 \n。

# mysql - 返回一个 MySQL 表中存在但另一个表中不存在的项目，并考虑 2 列

> ID：14985903
> 
> 赞同：0
> 
> 时间：2013-02-20T17:16:20.743
> 
> 标签：mysql

我想返回 table1 中所有活动的邮政编码，并且 table2 中没有任何项目共享相同的坐标（lat，lng）。即在下面的回报中：

```
AB11AC 
```

我知道有几种方法只检查一列，但不确定如何适应两列。我应该在查询中将两列连接在一起还是有更有效的方法？我的每个表都有大约 200 万个条目。

表格1：

```
postcode  lat  lng active
-------------------------
AB11AA   55   1    Y
AB11AB   56   1    Y
AB11AC   57   1    Y 
```

表2：

```
postcode  lat  lng active
--------------------------
AB11AA   55   1   Y
AB11AD   56   1   Y
AB11AE   59   1   Y 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:22:47.137

您可以使用`LEFT JOIN`：

```
select *
from table1 t1
left join table2 t2
  on t1.lat = t2.lat
  and t1.lng = t2.lng
where t1.active = 'Y'
  and t2.postcode is null 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/a5d3c/1)

或者您可以`NOT EXISTS`在`WHERE`子句中使用 a：

```
select *
from table1 t1
where t1.active = 'Y'
  and not exists (select *
                  from table2 t2
                  where t1.lat = t2.lat
                    and t1.lng = t2.lng) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/a5d3c/3)

# java - 批量插入 CSV 文件

> ID：14985905
> 
> 赞同：0
> 
> 时间：2013-02-20T17:16:22.283
> 
> 标签：java, sql, sql-server, csv, bulkinsert

我有一个创建 CSV 文件的 Java 代码，然后我使用 SQL Sever“BULK INSERT”将数据插入数据库；我没有格式文件。SQL 服务器是 2008 年的。

当我通过单元测试运行代码然后运行以下 sql 代码时，一切正常，数据被插入到表中：

```
declare
@csvFileName VARCHAR (1024)= 'file.csv',
@csvFormatFileName VARCHAR (1024)= null,
@tableName VARCHAR (256) = 'tableName';

EXECUTE (       
'BULK INSERT '+ @tableName +' FROM ''' + @csvFileName + ''' WITH 
(FIRSTROW=2, FIELDTERMINATOR=''\t'', ROWTERMINATOR=''\n'', MAXERRORS=0);'); 
```

当我的 Java 代码在生产中运行并创建 CSV 文件时，如果我抓取创建的 CSV 文件之一并运行上述 SQL，它不会给我任何错误，但是没有数据插入到表中，我只是得到：

```
(0 row(s) affected) 
```

我首先认为是导致问题的生产数据库服务器与开发数据库服务器，但事实并非如此。

这是 CSV 文件中的示例数据：

```
ID  Date    number1 number2 number3

88  2013-01-14  2   0   0.00

64  2013-01-14  0   0   0.00 
```

我看不出有什么不同。运行没有问题的 CSV 文件和没有问题的 CSV 文件！毕竟它们是用相同的 Java 代码创建的。

是否有任何编辑器可以向我显示文件的内容，与选项卡、换行符、...完全一样？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:34:14.120

我的机器上在 Windows 上创建的那些在每行的末尾添加了 CRLF。在 Uinx 上创建的产品仅添加 LF。解决方案是使用可在任何平台上运行的 MS SQL Server bcp 实用程序创建的格式文件。

# javascript - 是否可以允许用户指定要在 PhoneGap 中下载的文件？

> ID：14985908
> 
> 赞同：0
> 
> 时间：2013-02-20T17:16:40.190
> 
> 标签：javascript, html, xcode, cordova

我正在开发一个 iPhone 应用程序（在 Xcode 上使用 JavaScript、HTML 和 PhoneGap/Cordova），单击按钮即可从保管箱下载文件并允许用户将其读入`<p>`标签。这一切都有效，但只有当我指定程序要遵循的特定文件的 URL 时。我希望用户能够选择自己的文件并将其下载到要阅读的应用程序中。我目前拥有的代码是；

```
 function downloadfile() {
        var fileTransfer = new FileTransfer();
        var uri = encodeURI("http://dl.dropbox.com/u/97184921/readme.txt");

        fileTransfer.download(
                uri,
                '/Users/administrator/Library/Application Support/iPhone Simulator/6.1/Applications/AF96D141-0CE5-4D60-9FA8-8A8F9A999C81/Documents/readme.txt',
                function(entry) {
                    console.log("download complete: " + entry.fullPath);
                              alert("File Downloaded. Click 'Read Downloaded File' to see text");
                },
                function(error) {
                    console.log("download error source " + error.source);
                    console.log("download error target " + error.target);
                    console.log("upload error code" + error.code);
                }
        );
    }

    function readDownloadedFile() {
        myFileSystem.root.getFile("readme.txt", {create: false, exclusive: false}, gotDownloadFileEntry, fail);
        $('#mytext').load('http://dl.dropbox.com/u/97184921/readme.txt', function(){
                                                                                console.log("read is done");
                                                                            });
    }

    function gotDownloadFileEntry(fileEntry) {
        console.log(fileEntry);
        fileEntry.file(gotFile, fail);
    } 
```

如果可以允许用户指定要下载的文件，我怎么能改变代码来做到这一点？我对 iPhone 开发相当陌生，所以任何帮助都会很棒:)

这是按钮的 HTML，以备不时之需；

```
 <button onclick="downloadfile();">Download Dropbox File</button>
    <button onclick="readDownloadedFile();">Read Downloaded File</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:14:32.483

使用输入字段允许用户指定他们想要下载的 url。

```
<input type="text" id="toDl"/> 
```

然后在您的 downloadFile() 方法中执行以下操作：

```
var fileUrl = document.getElementById("toDl").value; 
```

获取您要下载的网址。

# android - 在堆积条形图中以不同方式显示图表值

> ID：14985909
> 
> 赞同：0
> 
> 时间：2013-02-20T17:16:45.010
> 
> 标签：android, achartengine

我正在实现一个堆叠条形图，并希望在图表上显示值，就在堆叠条的每个段上方。

为了显示这些值，我调用`setDisplayChartValues(true)`了`SimpleSeriesRenderer`我添加到我的`XYMultipleSeriesRenderer`. 问题是，结果看起来像这样（这不是截图，而是手工制作的模型）：

![结果说明（不是屏幕截图）](../Images/0757f9dae4cd99b525faff5251f86d43.png)

我想在条形的蓝色段上方以蓝色显示“100”，从而代表蓝色段的值，而不是红色和蓝色的累积。

我该怎么做？

PS：我查看了[演示应用程序](http://code.google.com/p/achartengine/downloads/detail?name=achartengine-1.0.0-demo-source.zip&can=2&q=)的“销售堆积条形图”，它具有相同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:54:55.907

AChartEngine 中堆叠条的概念是每个条从零开始。这意味着您示例中的蓝色值显示正确。

但是，我同意 AChartEngine 有一天应该以您描述它们的方式支持堆叠条形图。

# java - 如何查询 Appengine Logs API 以获取来自所有应用版本的日志？

> ID：14985911
> 
> 赞同：5
> 
> 时间：2013-02-20T17:16:48.967
> 
> 标签：java, google-app-engine, logging

我正在尝试使用[Logs API](https://developers.google.com/appengine/docs/java/logs/)在我的应用程序中查询日志。但是，我想查询我的应用程序所有版本的日志。日志服务有一个名为 majorVersionIds 的查询参数，您可以将其设置为要查询的版本列表，或者将当前运行的版本设置为 null。

我想查询所有版本，但我没有作为参数提供的所有版本的静态列表。知道是否有一种编程方式来获取应用程序的所有版本吗？

我当前的解决方案是向我的所有版本添加一个过滤器，将当前版本添加到所有版本的列表中并使用它，但这似乎很hackey。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-15T00:16:28.717

[您可以使用appcfg.py](https://developers.google.com/appengine/docs/python/tools/uploadinganapp#Python_Downloading_logs)从命令行下载所有可用日志。

为了使用 Logs API，您需要维护可用版本 ID 的列表并将其提供给[logservice.fetch](https://developers.google.com/appengine/docs/python/logs/functions)。

# javascript - 不明白这个示例代码中路由器哈希如何变化[backbone.js]

> ID：14985913
> 
> 赞同：0
> 
> 时间：2013-02-20T17:16:56.417
> 
> 标签：javascript, backbone.js

这是示例代码 [https://github.com/derickbailey/todomvc/tree/marionette/labs/architecture-examples/backbone_marionette](https://github.com/derickbailey/todomvc/tree/marionette/labs/architecture-examples/backbone_marionette)

此示例代码在此处运行 [http://todomvc.com/labs/architecture-examples/backbone_marionette/#](http://todomvc.com/labs/architecture-examples/backbone_marionette/#)

我无法弄清楚单击过滤器时路线如何变化。我已经经历了很多次，但我似乎无法理解单击过滤器时路由本身是如何变化的。我所看到的只是路由更改时调用的函数，而不是实际路由更改本身。

例如，当当前过滤器为“全部”时，我单击“已完成”，URL 是如何变为#completed 的？

任何见解都会很棒

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:22:56.637

它只是一个锚标记，其 href 为`#` `#active`和`#completed`。

# jquery - 灯箱：Highslide 和 Colorbox

> ID：14985916
> 
> 赞同：0
> 
> 时间：2013-02-20T17:17:08.477
> 
> 标签：jquery, lightbox, colorbox, highslide

好吧，我正在使用的主要工具是 Highslide，但我现在都试过了。

我的问题是在灯箱窗口中弹出所选图像时背景不会褪色。

我已经尝试过 Highslide 和 Colorbox，同样的问题。我也尝试了所有浏览器，并且所有浏览器都发生了同样的事情。

Highslide 是我的首选。我有 highslide.js 和 highslide.css 都链接到我的页面，没有错误。我通过链接调用了 highslide `<a>`，它工作得很好。除了在选择时背景的半透明褪色没有发生。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T05:29:37.040

你有一个语法错误。HTML 中的 script 标签不是自动关闭的。你不能这样做：

```
<script type="text/javascript" src="/assets/js/highslide-full.min.js" /> 
```

肯定是：

```
<script type="text/javascript" src="/assets/js/highslide-full.min.js"></script> 
```

您应该始终通过验证器运行您的页面以捕获此类内容。它可以为您节省数小时的调试时间！

一旦该错误得到修复，请确保 highslide.css 正在加载（可能只是它之前的语法错误导致 highslide.css 无法加载）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:16:21.467

确保您使用的是 highslide-full.js，而不仅仅是 highslide.js，它只是完整脚本的一个子集，并且不包括您所追求的背景调光。然后在您的 Highslide 配置中，将调光不透明度设置为从 0（无调光）到 1（全黑）的值：

hs.dimmingOpacity=0.75;

如果它仍然不起作用，指向您的页面的链接会很有帮助。

# perl - 如何将所有出现的某些字符替换为其前辈？

> ID：14985919
> 
> 赞同：5
> 
> 时间：2013-02-20T17:17:21.460
> 
> 标签：perl, regex

```
$s = "bla..bla";
$s =~ s/([^%])\./$1/g; 
```

我认为它应该将所有出现的`.`that is not after`%`替换为 before 的字符`.`。

But `$s`is then: `bla.bla`, 但它应该是`blabla`. 问题出在哪里？我知道我可以使用量词，但我需要这样做。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T17:21:59.557

当全局正则表达式搜索字符串时，它不会找到重叠的匹配项。

字符串中的第一个匹配项将是`a.`，替换为`a`。当正则表达式引擎恢复搜索时，它从下一个开始，`.`所以它看到`.bla`视为字符串的其余部分，并且您的正则表达式需要一个字符在之前匹配，`.`因此它不能再次匹配。

相反，使用否定的lookbehind来执行前一个字符不是的断言`%`：

```
$s =~ s/(?<!%)\.//g; 
```

请注意，如果您使用积极的后视，如果它是字符串中的第一个字符`(?<=[^%])`，您将不会替换它。`.`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T17:21:59.400

问题是即使有了`/g`标志，每次替换都会开始查找前一个替换的位置。您尝试替换`a.`为`a`，然后`a.`替换为`a`，但第二次替换没有发生，因为`a`已经被前一次替换“吞下”。

一种解决方法是使用[零宽度后向断言](http://www.regular-expressions.info/lookaround.html)：

```
$s =~ s/(?<=[^%])\.//g; 
```

这将删除任何`.`不是字符串*中*第一个字符且前面*没有*.*`%`*

 *但你可能真的想要这个：

```
$s =~ s/(?<!%)\.//g; 
```

即使它*是*字符串中的第一个字符，它将删除任何*不*`.`以开头的字符。*`%`*

 *** * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T17:26:58.960

比look-behinds简单得多的是使用：

```
$s =~ s/([^%])\.+/$1/g; 
```

这将替换字符后的任何一个或多个点的字符串，而不是`%`什么都没有。***

# c++ - 使用 cURL 下载文件的简单方法

> ID：14985921
> 
> 赞同：1
> 
> 时间：2013-02-20T17:17:23.093
> 
> 标签：c++, macos, curl, download

在我的程序中，我想下载一些文件。[所以我使用了 cURL 并使用了这段代码（从这里下载](https://stackoverflow.com/questions/1636333/download-file-using-libcurl-in-c-c)并修改了一点使用 libcurl in C/C++ 的文件）：

```
#include "curl.h"
using namespace std;

size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) {
    size_t written;
    written = fwrite(ptr, size, nmemb, stream);
    return written;
}

int DlZip(){
    CURL *curl;
    FILE *fp;
    CURLcode res;
    string url = "http://wordpress.org/extend/plugins/about/readme.txt";
    char outfilename[FILENAME_MAX] = "/Users/Me/Desktop/bbb.txt";
    curl = curl_easy_init();
    if (curl) {
        fp = fopen(outfilename,"wb");
        curl_easy_setopt(curl, CURLOPT_URL, url.c_str());
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp);
        res = curl_easy_perform(curl);
        curl_easy_cleanup(curl);
        fclose(fp);
    }
    return 0;
} 
```

但是什么也没发生，我的桌面上也没有任何文件：-/

我的代码有什么问题？或者如果你有一个简单的功能可以使用，你能给我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T05:13:59.367

检查下面的代码

```
#include <cstdio>
#include <curl/curl.h>
#include <curl/types.h>
#include <curl/easy.h>
#include <string>

using namespace std;

size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) {
    size_t written;
    written = fwrite(ptr, size, nmemb, stream);
    return written;
}

int main(){
    CURL *curl;
    FILE *fp;
    CURLcode res;
    string url = "http://www.joes-hardware.com/tools.html";
    char outfilename[FILENAME_MAX] = "./MyText.txt";
    curl = curl_easy_init();
    if (curl) {
        fp = fopen(outfilename,"wb");
        curl_easy_setopt(curl, CURLOPT_URL, url.c_str());
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp);
        res = curl_easy_perform(curl);
        curl_easy_cleanup(curl);
        fclose(fp);
    }
    return 0;
} 
```

它工作正常。问题是 - 此代码无法使用`https`，因此当`url`您在浏览器中打开并通过上述代码提供时 - 会产生单独的响应。

# c++ - 内存转储分析（应用程序挂起）

> ID：14985923
> 
> 赞同：2
> 
> 时间：2013-02-20T17:17:27.040
> 
> 标签：c++, windows, debugging, freeze, directsound

我正在尝试分析在我的应用程序发生挂起后从我的一位最终用户那里收到的内存转储。它似乎与我的应用程序的音频播放部分有关。我相信这涉及到两个线程，即将开始播放声音的主线程，以及迭代链表中的声音以不断更新其状态的更新线程。但是，我不明白挂起的原因可能是什么。

我的 WinDbg 知识有限，但我设法弄清楚挂起似乎发生在音频库的 SetLoop 方法中（特别是在静态声音代码中）。我使用 DirectSound，在这种情况下，应用程序在 Windows 7 32 位上运行（我自己在 XP 上开发，我从来没有遇到过这样的问题）。静态声音类在检查声音是否正在播放之前锁定关键部分，如果不是，则将循环标志设置为真或假。在这种情况下，主线程正在调用 SetLoop 将其设置为 false，因为它希望以非循环状态播放声音。我可以看到，在挂起时，主线程被困在对 ntdll.dll 中的 EtwEventEnabled 的调用中，这显然是由静态声音类的 SetLoop 方法完成的。我想知道它是否卡在 EnterCriticalSection 调用中，或者当它调用 DirectSound 的 GetStatus 方法用于辅助缓冲区时，它是否卡在了更远的地方？这是我对内存转储分析的了解不足的地方，如果有人愿意花时间查看转储，我将不胜感激。

这是转储的链接，带有应用程序特定的符号： [https ://dl.dropbox.com/u/5121962/hangdump.zip](https://dl.dropbox.com/u/5121962/hangdump.zip)

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T09:00:47.933

您可以尝试使用 Microsoft 的[Debug Diagnostics Tool](http://www.microsoft.com/en-gb/download/details.aspx?id=26798)分析转储- 它似乎证实了您的怀疑，但在您不了解代码或您的 exe 的 Release 构建 PDB 的情况下，我无法从调用堆栈中获取更多信息。

从报告中（您可以使用该工具自行运行完整分析）涉及两个线程 - 总结如下：

![问题总结](../Images/8692fc3eb68fb6dc6a2139bfce273503.png)

线程0和4的调用栈如下：

![线程 0](../Images/296d785a6053f54fb88bf7ca11260971.png)

.. 和 ...

![线程 4](../Images/73bdd684a5ef74339277a61c2b0cd1fd.png)

这些可能会为您提供更多信息，让您再次行动......

希望有帮助，

罗杰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:03:05.193

两个线程（一个是`WinMain`）正在等待同一个`03cb6ffc`没有所有者的临界区。看`StaticSound::Update`和`StaticSound::SetLoop`。也许当前被终止的线程仍然拥有一个临界区。尝试使用[Application Verifier](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371695%28v=vs.85%29.aspx) with Locks Stop Details - 验证关键部分的正确用法。

```
0:000> !analyze -hang -v
[...] 
BUGCHECK_STR:  HANG
[...]

DERIVED_WAIT_CHAIN:  

Dl Eid Cid     WaitType
-- --- ------- --------------------------
   0   768.d1c Critical Section       (Self) 

WAIT_CHAIN_COMMAND:  ~0s;k;;

BLOCKING_THREAD:  00000d1c

DEFAULT_BUCKET_ID:  APPLICATION_HANG_SELF_Unowned_CriticalSection

PRIMARY_PROBLEM_CLASS:  APPLICATION_HANG_SELF_Unowned_CriticalSection

LAST_CONTROL_TRANSFER:  from 77d56a24 to 77d57094
[...]
0:000> !locks
CritSec +13af7d0 at 013af7d0
WaiterWoken        No
LockCount          0
RecursionCount     1
OwningThread       10a8
EntryCount         0
ContentionCount    2b7
*** Locked

CritSec +3cb6ffc at 03cb6ffc
WaiterWoken        No
LockCount          2
RecursionCount     0
OwningThread       0
EntryCount         0
ContentionCount    d
*** Locked

0:000> ~*
.  0  Id: 768.d1c Suspend: 0 Teb: 7ffde000 Unfrozen
      Start: pontefract_timer!WinMainCRTStartup (01299030) 
      Priority: 0  Priority class: 32  Affinity: f
   [...]
   4  Id: 768.10a8 Suspend: 0 Teb: 7ffdb000 Unfrozen
      Start: pontefract_timer!_threadstartex (012ae09f) 
      Priority: 2  Priority class: 32  Affinity: f
    [...]
0:004> kb
ChildEBP RetAddr  Args to Child              
021af9b4 77d56a24 77d42278 000002f0 00000000 ntdll!KiFastSystemCallRet
021af9b8 77d42278 000002f0 00000000 00000000 ntdll!ZwWaitForSingleObject+0xc
021afa1c 77d4215c 00000000 00000000 00000000 ntdll!RtlpWaitOnCriticalSection+0x13e
021afa44 012882c2 03cb6ffc 013af7cc 00326ee8 ntdll!RtlEnterCriticalSection+0x150
021afa60 0128a1ed 021afa8c 021afa80 013af810 pontefract_timer!StaticSound::Update+0x12
021afa84 012ae079 013af700 73a14e26 00000000 pontefract_timer!UpdaterTick+0x7d
021afabc 012ae103 00000000 021afad4 7750ed6c pontefract_timer!_callthreadstartex+0x1b 
021afac8 7750ed6c 013af810 021afb14 77d7377b pontefract_timer!_threadstartex+0x64 
021afad4 77d7377b 013af810 6b63b5bd 00000000 kernel32!BaseThreadInitThunk+0xe
021afb14 77d7374e 012ae09f 013af810 00000000 ntdll!__RtlUserThreadStart+0x70
021afb2c 00000000 012ae09f 013af810 00000000 ntdll!_RtlUserThreadStart+0x1b
0:000> kb
ChildEBP RetAddr  Args to Child              
0020c39c 77d56a24 77d42278 000002f0 00000000 ntdll!KiFastSystemCallRet
0020c3a0 77d42278 000002f0 00000000 00000000 ntdll!ZwWaitForSingleObject+0xc
0020c404 77d4215c 00000000 00000000 774f8e38 ntdll!RtlpWaitOnCriticalSection+0x13e
0020c42c 012881af 03cb6ffc 00000000 03cb6ff8 ntdll!RtlEnterCriticalSection+0x150
0020c440 0128682c 00000000 00000000 00000000 pontefract_timer!StaticSound::SetLoop+0xf
0020c460 012616ac 00000000 00000000 01765bac pontefract_timer!DeviceManager::SetLoop+0x6c
0020c474 0121a2ce 01a46ddc 00000000 0178ea9c pontefract_timer!BgtSound::play+0x6c 
0020c61c 01219d02 0178ea9c 01765bf4 01a46ddc pontefract_timer!CallSystemFunctionNative+0x42e
0020c64c 0121d450 00000000 00000000 0178ea9c pontefract_timer!CallSystemFunction+0xd2 
0020c6d4 0121c276 01a46dfc 77b6ea11 00000000 pontefract_timer!asCContext::ExecuteNext+0x930
0020c708 0127a293 719b431a 0020f780 00000000 pontefract_timer!asCContext::Execute+0x1d6
0020f780 0127a1d5 719b4c6a 77b1f2a9 0010000c pontefract_timer!execute+0x83
0020f8f0 0127acff 77b1f2a9 77b18d02 0020f958 pontefract_timer!RunApplication+0x805 
0020f908 0127b085 0020f908 0127b339 00000000 pontefract_timer!run_script+0x9f
0020f910 0127b339 00000000 00000000 7ffdf000 pontefract_timer!main_game+0x35
0020f958 01298fdd 01210000 00000000 00361f32 pontefract_timer!WinMain+0x2a9
0020f9e8 7750ed6c 7ffdf000 0020fa34 77d7377b pontefract_timer!__tmainCRTStartup+0x11a 
0020f9f4 77d7377b 7ffdf000 6959b49d 00000000 kernel32!BaseThreadInitThunk+0xe
0020fa34 77d7374e 01299030 7ffdf000 00000000 ntdll!__RtlUserThreadStart+0x70
0020fa4c 00000000 01299030 7ffdf000 00000000 ntdll!_RtlUserThreadStart+0x1b 
```

# windows-phone-7 - 在 Microsoft Surface 平板电脑上安装 wp7 应用程序

> ID：14985924
> 
> 赞同：0
> 
> 时间：2013-02-20T17:17:29.730
> 
> 标签：windows-phone-7, installation

有没有办法在 Surface 平板电脑中安装 wp7 应用程序？我已经尝试运行我的应用程序的 xap 文件，但操作系统不知道如何处理它。

如何将我的 wp7 应用程序部署到 Surface 平板电脑中？

我有“专业”版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:21:45.180

如果你有一个 Surface Pro，那么你可能会尝试安装 WP8 SDK，然后可能会尝试运行一个模拟器，然后你可能最终能够将你的 XAP 部署到那个模拟器。

但是目前没有办法直接在 Win8 上运行 WP 应用程序。

也许这可能会在下一个版本中出现 - 目前传闻被称为“蓝色”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:22:00.350

Surface Pro 运行 Windows，因此可以安装 Windows 应用程序。它运行 Windows Phone 并且不能运行 WP7 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T17:28:55.407

这不是直接可能的 - 正如另一位海报所说，您可以尝试测试模拟器。如果它是一个 windows phone 8 应用程序，你可能会更幸运，因为 Surface pro 上的 windows 8 与 windows phone 8 非常相似。windows phone 8 应用程序可以非常容易地移植到平板电脑 windows 商店应用程序，但如果你能不要这样做，模拟器是你最好的选择。

# c# - AutoFixture 无法创建匿名 MVC 控制器

> ID：14985930
> 
> 赞同：9
> 
> 时间：2013-02-20T17:17:42.207
> 
> 标签：c#, .net, unit-testing, autofixture, automoq

编码：

```
IFixture fixture = new Fixture().Customize(new AutoMoqCustomization());
fixture.Customize<ViewDataDictionary>(c => c.Without(x => x.ModelMetadata));
var target = fixture.CreateAnonymous<MyController>(); 
```

例外：

> System.Reflection.TargetInvocationException：System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.NotImplementedException：方法或操作未实现。

`MyController()`接受 3 个参数。

我已经尝试了[此处](https://stackoverflow.com/questions/3514102)答案中描述的修复程序，但它不起作用。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-20T21:03:58.140

[看起来](https://stackoverflow.com/questions/13869968/how-do-i-apply-autofixture-customizations-to-anything-inheriting-from-a-base-cla#comment19120515_13875306)，当使用 MVC 4 时，您必须以`Fixture`不同的方式自定义实例。

如果您**更换**测试应该通过：

```
fixture.Customize<ViewDataDictionary>(c => c
    .Without(x => x.ModelMetadata)); 
```

**与**：

```
fixture.Customize<ControllerContext>(c => c
    .Without(x => x.DisplayMode)); 
```

* * *

或者，您可以创建所需自定义的[组合：](http://en.wikipedia.org/wiki/Composite_pattern)

```
internal class WebModelCustomization : CompositeCustomization
{
    internal WebModelCustomization()
        : base(
            new MvcCustomization(),
            new AutoMoqCustomization())
    {
    }

    private class MvcCustomization : ICustomization
    {
        public void Customize(IFixture fixture)
        {
            fixture.Customize<ControllerContext>(c => c
                .Without(x => x.DisplayMode));
        }
    }
} 
```

然后，原始测试可以重写为：

```
[Fact]
public void Test()
{
    var fixture = new Fixture()
        .Customize(new WebModelCustomization());

    var sut = fixture.CreateAnonymous<MyController>();

    Assert.IsAssignableFrom<IController>(sut);
} 
```

# java - IllegalArgumentException：无法将 UserTransaction 字段设置为 ServerVMClientUserTransaction

> ID：14985931
> 
> 赞同：1
> 
> 时间：2013-02-20T17:17:41.377
> 
> 标签：java, jpa, transactions, persistence, jboss6.x

我正在将应用程序从 GlassFish 3.1 迁移到 JBoss 6.1。

这段代码在 GlassFish 上运行得非常好，但在 JBoss 上抛出了一个丑陋的错误：

自定义注释：

```
@Named
@ViewAccessScoped
@Stereotype
@Target( { ElementType.TYPE, ElementType.METHOD, ElementType.FIELD } )
@Retention(RetentionPolicy.RUNTIME)
public  @interface Model {        
} 
```

豆：

```
@Model
public class MyBean extends BaseBean {

    @Inject
    UserService userService

    public void save() {
        startTransaction();
        studioService.persist(studio);
        commitTransaction();
    }
} 
```

基础豆：

```
public class BaseBean implements Serializable {

    @Resource
    protected UserTransaction transaction;
    @PersistenceContext(unitName = "fits_PU")
    protected EntityManager entityManager;
    [...]

    protected void startTransaction() {
        try {
            transaction.begin();
            entityManager.joinTransaction();
        } catch [a few exceptions]
    }

    protected void commitTransaction() {
        try {
            transaction.commit();
        } catch [an awful lot of exceptions]
    }
} 
```

我得到以下异常：

```
Caused by: java.lang.IllegalArgumentException: Can not set javax.transaction.UserTransaction field my.company.project.BaseBean.transaction to org.jboss.tm.usertx.client.ServerVMClientUserTransaction
    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:164) [:1.7.0_11]
    at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:168) [:1.7.0_11]
    at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:81) [:1.7.0_11]
    at java.lang.reflect.Field.set(Field.java:680) [:1.7.0_11] 
```

我整个下午都在谷歌上搜索它，但找不到任何开始的提示。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:18:28.000

所以。我环顾四周，试错了，发现我错了。

`UserTransaction`如果我使用 EJB，我不需要管理任何事务，因为事务是由容器管理的。因此，

1.  我在我的 Beans 中删除了对它的所有引用
2.  我将我的`@Named`服务更改为`@Stateless`EJB
3.  `@EJB`我用注释而不是把它们注入到我的 Beans中`@Inject`

希望它会帮助别人。

# jquery - 使用 jQuery 获取绝对 DIV 的高度

> ID：14985936
> 
> 赞同：4
> 
> 时间：2013-02-20T17:17:53.487
> 
> 标签：jquery

我正在尝试`height`使用非预定义高度属性的绝对定位 DIV 的属性。

的高度`div`取决于其动态内容。

我已经看到`.height()`jQuery 的函数没有返回绝对定位的正确高度`div`。

```
$(this).height()  //not working well 
```

有什么办法可以得到它的高度吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:35:44.267

您需要在 div 中包含一些内容，或者至少定义一些最小高度才能获得 css height 属性——否则该属性是未定义的。

`.height()`获取元素的计算高度，因此需要一些预定义。

替代方法是`.innerHeight()`和`.outerHeight()`方法。如果您使用默认的内容框样式，它们可能会更好地工作。

# android - 如何在操作栏中添加搜索 sherlock

> ID：14985939
> 
> 赞同：1
> 
> 时间：2013-02-20T17:18:03.673
> 
> 标签：android, search, android-intent, actionbarsherlock

我正在使用操作栏夏洛克。现在我想将搜索选项添加到操作栏并将 Edittext 搜索意图添加到其他活动。

谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:40:22.097

做这样的事情

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    //Used to put dark icons on light action bar

    //Create the search view
    final SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());
    searchView.setQueryHint("Search");

    menu.add(Menu.NONE,Menu.NONE,1,"Search")
        .setIcon(R.drawable.abs__ic_search)
        .setActionView(searchView)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    searchView.setOnQueryTextListener(new OnQueryTextListener() {
        @Override
        public boolean onQueryTextChange(String newText) {
            if (newText.length() > 0) {
                // Search

            } else {
                // Do something when there's no input
            }
            return false;
        }
        @Override
        public boolean onQueryTextSubmit(String query) { 

            InputMethodManager imm = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(searchView.getWindowToken(), 0);

            Toast.makeText(getBaseContext(), "dummy Search", Toast.LENGTH_SHORT).show();
            setSupportProgressBarIndeterminateVisibility(true);

            Handler handler = new Handler(); 
            handler.postDelayed(new Runnable() { 
                 public void run() { 
                     setSupportProgressBarIndeterminateVisibility(false);
                 } 
            }, 2000);

            return false; }
    });

    return true;
} 
```

# php - MySQL UPDATE 或 INSERT 取决于 ID 的存在

> ID：14985941
> 
> 赞同：1
> 
> 时间：2013-02-20T17:18:05.203
> 
> 标签：php, mysql, arrays, multidimensional-array, mysqli

我正在跟踪许多类似网站上的访问者移动，并为每个目标分配了不同的值来跟踪目标。由于这些目标是动态创建的，我还需要动态更新它们。mysql 结构的相关部分如下，它在 2 个站点上描述了相同的 4 个目标。注意：每个站点的目标始终相同。

```
CREATE TABLE IF NOT EXISTS `goals` (
  `idsite` int(11) NOT NULL,
  `idgoal` int(11) NOT NULL,
  `name` varchar(50) NOT NULL,
  `allow_multiple` tinyint(4) NOT NULL,
  `revenue` float NOT NULL,
  PRIMARY KEY (`idsite`,`idgoal`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `goals` (`idsite`, `idgoal`, `name`, `allow_multiple`, `revenue`) VALUES
(10, 1, 'Product Benefits Video',   0,  2),
(10, 2, 'Agent Benefits Video',     0,  4),
(10, 3, 'Social Network Video',     0,  6),
(10, 4, 'MMP Overview Video',       1,  8),
(13, 1, 'Product Benefits Video',   0,  2),
(13, 2, 'Agent Benefits Video',     0,  4),
(13, 3, 'Social Network Video',     0,  6),
(13, 4, 'MMP Overview Video',       1,  8); 
```

上面的插入命令是从一个数组创建的，如下所示以及 site_id。

```
$config['trackings'][1] = array('name'=>'Product Benefits Video',   'value'=>'2',   'multi'=>'0');
$config['trackings'][2] = array('name'=>'Agent Benefits Video', 'value'=>'3',   'multi'=>'0');
$config['trackings'][3] = array('name'=>'Social Network Video', 'value'=>'4',   'multi'=>'0');
$config['trackings'][4] = array('name'=>'MMP Overview Video',       'value'=>'5',   'multi'=>'1'); 
```

我永远不需要删除目标，但我想知道如何更改值，如果目标不存在，请将其添加到所有站点。

例如，如果我提供一个新数组，如下所示：

```
$config['trackings'][1] = array('name'=>'Product Benefits Video',   'value'=>'6',   'multi'=>'0');
$config['trackings'][2] = array('name'=>'Agent Benefits Video', 'value'=>'7',   'multi'=>'0');
$config['trackings'][3] = array('name'=>'Social Network Video', 'value'=>'8',   'multi'=>'1');
$config['trackings'][4] = array('name'=>'MMP Overview Video',       'value'=>'9',   'multi'=>'1');
$config['trackings'][5] = array('name'=>'MMP Details Video',        'value'=>'10',  'multi'=>'1'); 
```

我想添加目标 5 并更新每个站点的现有目标的值和 allow_multiple。

我考虑过截断表格并从头开始重写所有值，但是有成千上万的站点。我也玩过替换、插入更新并最终拔掉了我的头发。

有没有比清空批次更简单的方法？

编辑：最终结果看起来像这样

```
(10, 1, 'Product Benefits Video',   0,  6),
(10, 2, 'Agent Benefits Video',     0,  7),
(10, 3, 'Social Network Video',     1,  8),
(10, 4, 'MMP Overview Video',       1,  9),
(10, 5, 'MMP Details Video',        1,  10),
(13, 1, 'Product Benefits Video',   0,  6),
(13, 2, 'Agent Benefits Video',     0,  7),
(13, 3, 'Social Network Video',     1,  8),
(13, 4, 'MMP Overview Video',       1,  9);
(13, 5, 'MMP Details Video',        1,  10); 
```

编辑：这将很容易完成所有更新

```
foreach($config['trackings'] as $id => $track)
{
    $s = "UPDATE `goals` SET `revenue` = ".$track['value'].", `allow_multiple` = ".$track['multi']." WHERE `idgoal` = '".$id."'";
} 
```

但是如何同时添加缺失的目标（5）呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:21:40.490

你有几个选择：

采用`INSERT IGNORE INTO table`

或者`INSERT … ON DUPLICATE KEY UPDATE`

查看 mysql 文档以获取有关任一命令的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:21:14.953

你有所有网站的表格吗？如果是，您可以`REPLACE`这样使用：

```
REPLACE INTO goals (idsite, idgoal, name, allow_multiple, revenue)
SELECT idsite, 5, 'MMP Details Video', 1, 10 FROM sites; 
```

这是一个包含与 table 中的 column具有相同含义的 column`sites`的所有站点的表。`idsite``idsite``goals`

This statement inserts new record into `goals` table for each site defined in `sites` table with values `idside, 5, 'MMP Details Video', 1, 10`, where `idsite` is a value taken from `idsite` column of `sites` table. If record with the same `idsite` and `idgoal` already exists, it is replaced with new one.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:10:46.480

好的，我想通了，我把它分成两部分。

```
$s = "SELECT MAX(`idgoal`) AS slice FROM goals";    //4
$slice = 4;
$track_update = array_slice($config['trackings'], 0, $slice, true);

foreach($track_update as $id => $track){ //4 queries
    $s = "UPDATE `goals` SET `revenue` = ".$track['value'].",
            `allow_multiple` = ".$track['multi']." WHERE `idgoal` = '".$id."'";
}

//now to add new values
$s = "SELECT DISTINCT(`idsite`) AS mid FROM goals";     //array(10,13)
$result = array(10,13);

$track_add = array_slice($config['trackings'], $slice, count($config['trackings']), true);

foreach($track_add as $id => $track){  //1 query for each site
    foreach($result as $idsite){
        $sx[] = "(
                        ".$idsite.", ".$id.",
                        '".$track['name']."',
                        ".$track['multi'].",
                        ".$track['value']."
                    )";
    }

    $s = "INSERT INTO `goals`
            (`idsite`, `idgoal`, `name`, `allow_multiple`, `revenue`) 
            VALUES ".implode(',',$sx);
} 
```

总共 5 个查询：

```
UPDATE `goals` SET `revenue` = 6, `allow_multiple` = 0 WHERE `idgoal` = '1'
UPDATE `goals` SET `revenue` = 7, `allow_multiple` = 0 WHERE `idgoal` = '2'
UPDATE `goals` SET `revenue` = 8, `allow_multiple` = 1 WHERE `idgoal` = '3'
UPDATE `goals` SET `revenue` = 9, `allow_multiple` = 1 WHERE `idgoal` = '4'
INSERT INTO `goals` (`idsite`, `idgoal`, `name`, `allow_multiple`, `revenue`) 
VALUES 
(10, 5, 'MMP Details Video', 1, 10),
(13, 5, 'MMP Details Video', 1, 10); 
```

# android - 使用 Eclipse 导入 Android 项目

> ID：14985943
> 
> 赞同：0
> 
> 时间：2013-02-20T17:18:11.490
> 
> 标签：android, eclipse, projects-and-solutions

我在尝试导入项目时遇到问题。这样做后，我得到 6 个错误项。其中4个相同（`Unable to resolve target 'Android-8'`）。

另一个是：`Project 'MyProject' is missing required Java project: 'org.json'`。即使该文件`org.json.jar`位于 libs 文件夹中。

最后一个是：`The project cannot be built until build path errors are resolved`。

我该怎么做才能让 Eclipse 正确导入我的项目？

我什至尝试创建一个新项目并手动复制文件，但结果不如预期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:20:00.647

![在此处输入图像描述](../Images/db1c1cd2e9319a8717d79aeab3701341.png)导入现有项目

```
Project Explorer-->new Android Project from Existing Resource-->select project and check copy to the work space option(if you need)--> finish. 
```

1.  问题

    无法解析目标“Android-8”

    右键项目-->android-->选择目标为8并保存。

2.  org.json.jar

从 Internet 下载此 jar 并将 jar 文件粘贴到 lib 文件夹中。

3.清理项目一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:26:02.927

> 无法解析目标“Android-8”

您的电脑上没有安装 Android-8 SDK。请考虑下载此 SDK，或者如果您有任何高于此版本的 SDK，请选择它。在项目属性下。

> 项目“MyProject”缺少必需的 Java 项目：“org.json”

此消息建议您该`org.json`项目在您的工作区中需要库项目，您应该将其包含为库项目。如果你有 jar 文件那么它很好，在项目属性下只需删除库项目依赖项并将 jar 文件包含在构建路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T17:43:09.840

你是如何安装 ADT 的？如果 Android 选项不可用，则可能是您没有正确安装 ADT 插件。

我会做以下事情：

1.  确保安装了 ADT
2.  删除项目并在“将现有 Android 代码导入工作区”选项下重新导入
3.  检查构建路径选项是否正确。Android 项目会自动将 lib 文件夹中的 jars 添加到项目中，但这值得一试。

随时通知我们！

# javascript - 将数组拆分为重叠的块（移动子组）

> ID：14985948
> 
> 赞同：5
> 
> 时间：2013-02-20T17:18:32.377
> 
> 标签：javascript, arrays, splice, moving-average

关于如何将[JavaScript 数组拆分为块](https://stackoverflow.com/questions/8495687/split-array-into-chunks)有一个很好的问题。我目前正在将它用于我正在编写的一些统计方法[，我正在使用的答案](https://stackoverflow.com/a/10456644/984239)如下（尽管我选择不像他们在答案中那样扩展 Array 原型）：

```
var chunk = function(array, chunkSize) {
    return [].concat.apply([],
        array.map(function(elem,i) {
            return i%chunkSize ? [] : [array.slice(i,i+chunkSize)];
        })
    );
}; 
```

这需要一个数组，例如`[1,2,3,4,5,6]`，并给定一个`chunkSize`2 个返回`[[1,2],[3,4],[5,6]]`。我很好奇如何修改它以创建一组“重叠”块（或者对于那些熟悉诸如移动平均线、“移动子组”等方法的人）。

提供与上面和 3 相同的数组`chunkSize`，它将返回`[[1,2,3],[2,3,4],[3,4,5],[4,5,6]]`. A `chunkSize`of 2 将返回`[[1,2],[2,3],[3,4],[4,5],[5,6]]`。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T17:26:36.053

```
function chunk (array, chunkSize) {
    var retArr = [];
    for (var i = 0; i < array.length - (chunkSize - 1); i++) {
        retArr.push(array.slice(i, i + chunkSize));
    }
    return retArr;
} 
```

如果您确实想扩展原型（可能会更好），它看起来像这样：

```
Array.prototype.chunk = function( chunkSize ) {
    var retArr = [];
    for (var i = 0; i < this.length - (chunkSize - 1); i++) {
        retArr.push( this.slice(i, i + chunkSize));
    }
    return retArr;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-09T08:29:05.623

使用更具声明性和简洁性（IMO）的方法。

```
const data = [1,2,3,4,5,6];

function getGroups(dataList, groupSize) {
  return dataList
    .slice(groupSize - 1)
    .map((_, index) => dataList.slice(index, index + groupSize));
}
console.log("2:", JSON.stringify(getGroups(data, 2)));
console.log("3:", JSON.stringify(getGroups(data, 3)));
```

首先，我从数组的开头删除元素的数量，因为输出中的元素数量会适当地减少。然后我遍历剩余的元素，将它们映射到适当的组。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T17:39:27.583

我对 javaScript 不是很擅长，但这在算法上很容易通过两个嵌套的 for 循环来实现。这是 C# 中的一个解决方案 - 您应该能够很容易地解决这个问题。

这使用了不太理想的数据结构，除了算法本身之外的一切都是显而易见的。

```
protected List<List<int>> Split(List<int> array, int chunkSize)
{
    List<List<int>> result = new List<List<int>>();

    for (int i = 0; i < array.Count - chunkSize; i++)
    {
        List<int> temp = new List<int>();
        for (int j = i; j < i + chunkSize; j++)
        {
            temp.Add(array[j]);
        }
        result.Add(temp);
    }

    return result;
} 
```

# asp.net - 4.0 的 Asp.net IIS 配置

> ID：14985949
> 
> 赞同：0
> 
> 时间：2013-02-20T17:18:35.840
> 
> 标签：asp.net, iis

我在 4.0 框架中创建了 Asp.net 应用程序。我必须在测试服务器机器上部署它。其中已经安装了2.0框架。因此，当我浏览页面时配置后，出现如下错误，

```
Line 9:    </connectionStrings>
Line 10:   <system.web>
Line 11:     <compilation debug="true" targetFramework="4.0">
Line 12:       <assemblies>
Line 13:         <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:21:12.660

4.0 框架需要安装在测试服务器机器上。如果是，请确保将 IIS 中网站的应用程序池设置为 .net 4.0（和 .net 2.0）。然后你的配置应该可以工作（2.0 期望 web.config 文件中有不同的元素）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:25:11.607

```
Line 9:    </connectionStrings>
Line 10:   <system.web>
Line 11:     <compilation debug="true">
Line 12:       <assemblies>
Line 13:         <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, 
```

删除目标版本时会发生什么？它仍然有效吗？

如果您将 .NET FW 1.1、2.0 之间的差异概念化。3.5,4.0... 等等...您会注意到很多阻碍向后兼容性的是 web.config 较新的代码。否则，如果命名空间都是该框架的一部分，则它不在乎。

# javascript - 使用 obj.addCls('foo') 添加类后，html 未更新

> ID：14985953
> 
> 赞同：0
> 
> 时间：2013-02-20T17:18:54.780
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我正在开发一个带有 sencha touch 2.2.0 alpha 的 webapp。我正在使用导航视图，我在其中推送其他视图。当设备离线时，这些视图的某些元素必须具有不同的外观。为此，我检查 navigator.onLine 并且 - 如果为 false - 我将“离线”类添加到元素中。这在我第一次在元素上执行时按预期工作。但是当我通过按下后退按钮弹出视图然后再次将视图推送到堆栈时，该类不会添加到 html 中。如代码所示，我在 dom 中查找所有 li 元素，如果它们的 id 以“link”开头，则添加该类。当我记录元素时，我可以看到没有添加类，但是当我记录对象（代码中的“obj”）时，“dom”属性告诉我它是。任何想法我做错了什么或误解？

```
if ( !navigator.onLine )
{
    lis = Ext.DomQuery.select('li');

    for ( i = 0; i < lis.length; i ++ )
    {
        if ( lis[i].id.substring(0, 4) == 'link' )
        {   
            obj = Ext.get(lis[i].id);   
            obj.addCls('offline');
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T12:22:09.920

正如我在上面的评论中提到的，您应该只添加一个 className`<body>`并在您的 CSS 选择器中使用它。

至于您的代码：它不起作用，因为 Sencha Touch 中的 DOM 结构是自动生成的，所以当您使用 Ext.DomQuery 手动添加一个类时，它可能不会留在元素上，因为它可能会再次被删除/创建。要将类添加到 Sencha Touch 中的视图/组件，您应该使用`cls`视图的配置：

```
{
    xtype: 'container',
    html: 'My view!',
    cls: 'myCustomClass'
} 
```

# git - 如何附加分支名称并提交到 git 归档输出文件？

> ID：14985956
> 
> 赞同：4
> 
> 时间：2013-02-20T17:19:01.097
> 
> 标签：git, git-archive

我正在使用 git archive 创建一个带有最新版本/HEAD 的 zip 文件，但想将分支名称和提交添加到 zip 文件名。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:30:43.260

您可以运行此脚本：

```
#!/bin/sh
sha1=`git rev-parse --short --verify HEAD`
branch=`git symbolic-ref -q --short HEAD`

git archive -o latest_${branch}_${sha1}.zip HEAD 
```

调用它`git-auto-archive`，例如，使其可执行，放入你的路径，然后运行它

```
git auto-archive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-11T01:43:22.123

除了[CharlesB](https://stackoverflow.com/users/11343/charlesb)的[脚本](https://stackoverflow.com/a/14986195/6309)之外，请确保使用 Git 2.20+（Q4 201），因为如果用于repo ，`git archive -o latest_${branch}_${sha1}.zip`可以生成*tar文件而不是 zip 文件（已修复的错误）。*`--remote`

请参阅[Josh Steadmon (``)的](https://github.com/)[提交 00436bf](https://github.com/git/git/commit/00436bf1b1c2a8fe6cf5d2c2457d419d683042f4)（2018 年 10 月 25 日） 。 帮助者：[Jeff King (](https://github.com/peff) [)](https://github.com/peff)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 a5ab66e](https://github.com/git/git/commit/a5ab66ee5f36fa3e90955f36f6451b3cf67943ed))^(中，2018 年 11 月 6 日）)
[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## 归档：提前初始化归档器
> 
> 运行时尽快初始化归档器`git archive`。
> 各种非显而易见的行为取决于存档器的初始化，例如从提供的文件名确定所需的存档格式。
> 
> Since [08716b3](https://github.com/git/git/commit/08716b3c11f4899c1be046eca735761b30ca686d) ("`archive`: refactor file extension format-guessing", 2011-06-21, Git v1.7.7-rc0), archive_format_from_filename() has used the registered archivers to match filenames (provided via `--output`) to archival formats.
> 
> However, when `git archive` is executed with `--remote`, format detection happens before the archivers have been registered.
> This causes archives from remotes to always be generated as TAR files, regardless of the actual filename (unless an explicit `--format` is provided).
> 
> This patch fixes that behavior; archival format is determined properly from the output filename, even when `--remote` is used.

# forms - 将动态值分配给查阅字段

> ID：14985958
> 
> 赞同：0
> 
> 时间：2013-02-20T17:19:01.770
> 
> 标签：forms, dynamic, case, crm, lookup

我正在创建一个对话框，根据用户的输入提出不同的问题。获得所有详细信息后，我将创建一个新记录（案例）并在新案例表单中填写用户详细信息。

我这样做主要是为了避免不必要的表单字段。例如，如果客户要求一般支持，我们不想询问他们从哪家商店购买商品，因为客户可能只想知道我们什么时候打烊。但是，如果客户打电话抱怨他们购买的产品，那么我们想要捕获产品的详细信息、购买的商店、故障类型等......

当我尝试将一些动态值分配给新案例表单中的字段时，会出现此问题。查找类型的字段不允许我动态分配值。我不想创建新字段，因为这会改变所有的关系和依赖关系。

**是否有任何解决方案可以动态地将这些值分配给查找？**

# xpages - XPages 显示错误控件未显示 - 出现弹出消息

> ID：14985959
> 
> 赞同：0
> 
> 时间：2013-02-20T17:19:03.407
> 
> 标签：xpages

我在我的 XPage 上有一个显示错误控件，使用此示例： [XPages 中的错误管理](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/error-management-in-xpages.htm#Display+Error+control)

这是代码：

```
<xp:td>
                            <xp:inputText value="#{document1.ac_Email}" id="ac_Email1"
                                style="width:250px">
                                <xp:this.validators>
                                    <xp:validateRequired message="Email is a required field.">
                                    </xp:validateRequired>
                                    <xp:validateExpression
                                        message="Email needs to be in this format: john@acme.com">
                                        <xp:this.expression><![CDATA[#{javascript:value.match(/^([0-9a-zA-Z]+([_.-]?[0-9a-zA-Z]+)*@[0-9a-zA-Z]+[0-9,a-z,A-Z,.,-]*(.){1}[a-zA-Z]{2,4})+$/)}]]></xp:this.expression>
                                    </xp:validateExpression>
                                </xp:this.validators>
                            </xp:inputText>
                        </xp:td>
                        <xp:td>
                            <xp:message id="message1" for="ac_Email1"></xp:message>
                        </xp:td> 
```

如果电子邮件格式不正确 - 使用 validateExpression - 显示错误消息将正确显示。如果该字段为空，则会出现一条弹出消息（在 Firefox 中）。根据示例和我编码的内容，应该出现显示错误控制消息，而不是弹出消息。

我很困惑，因为表单上还有另外两个字段，当它们为空时，它们可以正常工作——必填字段消息出现在字段右侧的显示错误控件中。是因为这个字段有 2 个验证器吗？

谢谢！

# java - 为什么可以在 Java 接口方法上调用方法？[可比]

> ID：14985963
> 
> 赞同：6
> 
> 时间：2013-02-20T17:19:22.163
> 
> 标签：java, interface, comparable

今天在 AP 计算机科学课上，我有这样的代码：

```
 Comparable x = 45;
    Comparable y = 56;
    System.out.println(x.compareTo(y)); 
```

这是有效的。它打印 1（或 -1，我忘记了），但可以比较它们。

我知道接口变量是指实现该接口的类的对象，但对我来说没有意义的是如何为接口变量分配一个整数，然后调用它的方法。在这种情况下，调用 compareTo() 方法的对象是什么？甚至没有实例化！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T17:20:59.447

这称为[*自动装箱*](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)，您的原始`int`类型会自动包装到一个`Integer`实例中，该实例是一个对象，它确实实现了`Comparable`接口。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T17:21:33.813

您的整数被装箱为整数（即`Objects`​​）。也就是说，原语正在被包装这些原语的对象所取代。请注意，[整数](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html)实现`Comparable`.

# java - GAE 发送带有 multipart/form-data 的 post 请求，来自 blobstore 的文件，带有 SSL

> ID：14985964
> 
> 赞同：1
> 
> 时间：2013-02-20T17:19:24.147
> 
> 标签：java, google-app-engine, blobstore

我想将文件从 blobstore 上传到名为 Wisita 的服务。这是上传 API 的文档：

[http://wistia.com/doc/upload-api](http://wistia.com/doc/upload-api)

到目前为止，这是我的代码（我想我可能会错过 ssl 选项）

```
FileService fileService = FileServiceFactory.getFileService();
AppEngineFile binaryFile = fileService.getBlobFile(new BlobKey("my blob key"));

String param = "api_password=" + URLEncoder.encode("my wisita key", "UTF-8") +
                "&project_id=" + URLEncoder.encode("folder_id", "UTF-8");
String charset = "UTF-8";

String boundary = Long.toHexString(System.currentTimeMillis()); // Just generate some unique random value.
String CRLF = "\r\n"; // Line separator required by multipart/form-data.

URLConnection connection = new URL("https://upload.wistia.com/").openConnection();
connection.setDoOutput(true);
connection.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + boundary);
PrintWriter writer = null;
try {
    OutputStream output = connection.getOutputStream();
    writer = new PrintWriter(new OutputStreamWriter(output, charset), true); // true = autoFlush, important!

    // Send normal param.
    writer.append("--" + boundary).append(CRLF);
    writer.append("Content-Disposition: form-data; name=\"param\"").append(CRLF);
    writer.append("Content-Type: text/plain; charset=" + charset).append(CRLF);
    writer.append(CRLF);
    writer.append(param).append(CRLF).flush();

    // Send binary file.
    writer.append("--" + boundary).append(CRLF);
    writer.append("Content-Disposition: form-data; name=\"binaryFile\"; filename=\"" + binaryFile.getNamePart() + "\"").append(CRLF);
    writer.append("Content-Type: " + URLConnection.guessContentTypeFromName(binaryFile.getNamePart())).append(CRLF);
    writer.append("Content-Transfer-Encoding: binary").append(CRLF);
    writer.append(CRLF).flush();
    InputStream input = null;
    try {
            FileReadChannel ch = fileService.openReadChannel(binaryFile, true);
            input = Channels.newInputStream(ch);
            byte[] buffer = new byte[1024];
            for (int length = 0; (length = input.read(buffer)) > 0;) {
                output.write(buffer, 0, length);
            }
            output.flush(); // Important! Output cannot be closed. Close of writer will close output as well.
    } finally {
            if (input != null) try { input.close(); } catch (IOException logOrIgnore) {}
            }
    writer.append(CRLF).flush(); // CRLF is important! It indicates end of binary boundary.

    // End of multipart/form-data.
    writer.append("--" + boundary + "--").append(CRLF);

    //resp part
    InputStream responseStream = new BufferedInputStream(connection.getInputStream());

    BufferedReader responseStreamReader = new BufferedReader(new InputStreamReader(responseStream));
    String line = "";
    StringBuilder stringBuilder = new StringBuilder();
    while ((line = responseStreamReader.readLine()) != null)
    {
        stringBuilder.append(line).append("\n");
    }
    responseStreamReader.close();
    String response = stringBuilder.toString();
    resp.getWriter().write(response);

    } finally {
        if (writer != null) writer.close();
    } 
```

我收到此代码的 500 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T21:36:10.173

Thank you for your question. As a reference it solved the issue I was having doing a similar task.

The first change I made to my code was to set both the doOutput and the doInput to true (not just the doOutput). I'm not sure if that makes a difference, since I believe true is the default.

```
con.setDoOutput(true);
con.setDoInput(true); 
```

Are you sure your content is being encoded correctly? I used the same setup and configuration you have, but instead of using a PrintWriter, I just called write and passed it the bytes from my String and bytes from my File contents:

```
connection.getOutputStream().write("Content-Disposition blah...".getBytes());
connection.getOutputStream().write(fileContentsByteArray);
connection.flush(); 
```

I then just read the data I needed back from my web service by reading from the connection's input stream like this:

```
FileOutputStream out = new FileOutputStream("received.bin");
InputStream in = connection.getInputStream();
byte[] buffer = new byte[1024];
int len;
while ((len = in.read(buffer)) != -1) {
    out.write(buffer, 0, len);
}
out.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T09:49:49.707

如何更改传递正常参数？

前：

```
param=..api_password...project_id...;
// Send normal param.
writer.append("--" + boundary).append(CRLF);
writer.append("Content-Disposition: form-data; name=\"param\"").append(CRLF);
writer.append("Content-Type: text/plain; charset=" + charset).append(CRLF);
writer.append(CRLF);
writer.append(param).append(CRLF).flush(); 
```

后：

```
// Send normal param.
writer.append("--" + boundary).append(CRLF);
writer.append("Content-Disposition: form-data; name=\"api_password\"").append(CRLF);
writer.append("Content-Type: text/plain; charset=" + charset).append(CRLF);
writer.append(CRLF);
writer.append(api_password).append(CRLF).flush();
// Send normal param.
writer.append("--" + boundary).append(CRLF);
writer.append("Content-Disposition: form-data; name=\"project_id\"").append(CRLF);
writer.append("Content-Type: text/plain; charset=" + charset).append(CRLF);
writer.append(CRLF);
writer.append(project_id).append(CRLF).flush(); 
```

# javascript - 如何提高 jQuery Tokeninput 插件的性能？

> ID：14985972
> 
> 赞同：2
> 
> 时间：2013-02-20T17:19:55.840
> 
> 标签：javascript, jquery, jquery-plugins, jquery-tokeninput

我正在使用来自[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)的 tokeninput 插件来实现一个自动完成文本框，其中所选项目显示为类似 Facebook 的标记化标签。

```
$("#Friends").tokenInput("MyPath/GetTokens", {
        theme: "facebook"
} 
```

但是，每次用户输入搜索字母时，加载搜索结果需要很长时间，这可能是因为每次都调用了 GetTokens。有什么办法可以提高速度吗？我可以将 GetTokens 响应存储到 javascript 数组中并将其用作我的源而不是每次都调用 GetTokens 吗？如果是这样，有人可以帮我解决语法吗？我不确定如何将 Javascript 数组用于 Get 调用。

# php - 如何在不使用 imageMagick 或 GD 的情况下压缩图像？

> ID：14985973
> 
> 赞同：0
> 
> 时间：2013-02-20T17:19:57.867
> 
> 标签：php

谁能告诉如何在不使用 imageMagick 和 GD 的情况下使用 PHP 压缩上传的图像？

也请告诉如何调整图像的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:33:57.817

`exec`您可以通过like`optipng`等使用使用命令行`Jpegtran`工具

```
exec("optipng largefie.png -out compressed.png"); 
```

# qt - Qt 父子关系

> ID：14985976
> 
> 赞同：1
> 
> 时间：2013-02-20T17:20:00.397
> 
> 标签：qt, qt-creator

我正在运行测试以了解 Qt 中的父/子关系，并且我有一个关于如何在 Qt Creator 调试器中查看这些关系的问题。

当我启动我的演示应用程序时，调试器显示如下：

![申请开始](../Images/91df68c341184760aef7a9c8ea12f5fc.png)

因为我在添加任何小部件之前调用了 Qt 的 dumpObjectTree()，所以树是空的，除了 MainWindow 的布局。这就是我所期望的。

当我关闭应用程序并调用 ~MainWindow 析构函数时，我再次调用 dumpObjectTree()，但这一次，我创建的所有小部件都显示在树中。如果我在窗口被销毁后调用 dumpObjectTree() ，树不应该再次为空吗？

![在此处输入图像描述](../Images/bf757495d3e989f6aff53b37e70825f3.png)

我没有正确销毁子小部件，还是我误解了 dumpObjecTree() 函数显示的信息？

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent)
{

    qDebug() << "WINDOW INITIALIZED-------------";
    dumpObjectTree();
    this->buildLayout();

}

void MainWindow::buildLayout() {

    QWidget *window = new QWidget(this);
    this->setObjectName("Main Window");

    layout = new QVBoxLayout();

    QSplitter *split = new QSplitter();
    split->setObjectName("Horizontal Split");
    split->setOrientation(Qt::Horizontal);
    QTextEdit *editor1 = new QTextEdit();
    editor1->setObjectName("Editor 1");
    QTextEdit *editor2 = new QTextEdit();
    editor2->setObjectName("Editor 2");
    split->addWidget(editor1);
    split->addWidget(editor2);

    QSplitter *split2 = new QSplitter();
    split2->setObjectName("Vertical Split");
    split2->setOrientation(Qt::Vertical);
    QTextEdit *editor3 = new QTextEdit();
    editor3->setObjectName("Editor 3");
    split2->addWidget(split);
    split2->addWidget(editor3);

    QToolBar *mainToolbar = new QToolBar();
    mainToolbar->setObjectName("Main Toolbar");
    mainToolbar->addAction("Main Button 1");
    mainToolbar->addSeparator();
    mainToolbar->addAction("Main Button 2");
    mainToolbar->setMovable(true);

    layout->addWidget(mainToolbar);
    layout->addWidget(split2);

    QToolBar *toolbar = new QToolBar(this);
    toolbar->setObjectName("Mini Toolbar");
    toolbar->addAction("Button 1");
    toolbar->addSeparator();
    toolbar->addAction("Button 2");
    toolbar->setMovable(true);

    QMenuBar *menu = new QMenuBar(this);
    menu->setObjectName("Menu Bar");
    menu->addAction("Menu 1");
    menu->addAction("Menu 2");
    menu->addAction("Menu 3");

    window->setLayout(layout);

    MainWindow::addToolBar(toolbar);
    MainWindow::setMenuBar(menu);
    MainWindow::setCentralWidget(window);

}

MainWindow::~MainWindow()
{

    delete layout;
    qDebug() << "DESTROYED " << this->metaObject()->className();
    qDebug() << "OBJECT TREE-------------";
    dumpObjectTree();
    qDebug() << "OBJECT INFO-------------";
    dumpObjectInfo();

} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:41:53.540

你的困惑是，当你的`MainWindow`析构函数被调用时，窗口只是被销毁的一部分。

特别是，在调用析构函数之前，子小部件不会通过父子机制被删除`QObject`，这会在此之后发生，因此在您调用 dumpObjectTree() 时，所有子小部件仍然存在。

# twitter-bootstrap - Simple_Form 和 Bootstrap ：输入日期如何指定月份和年份的不同宽度？

> ID：14985985
> 
> 赞同：1
> 
> 时间：2013-02-20T17:20:15.890
> 
> 标签：twitter-bootstrap, simple-form

我在 simple_form 中有一个日期字段，如下所示：

```
<%= f.input :dob, as: :date, start_year: Date.today.year - 12,
                      end_year: Date.today.year - 110, discard_day: true,
                      order: [:month, :year],
                      label: "Date of birth"  %> 
```

它工作正常，但每个选择（月和年）具有相同的宽度。

我想为年份部分指定不同的宽度，关于如何实现这一点的任何想法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T11:49:37.067

您可以在样式表中更改它，因为 Rails 和 simple_form 将使用 ID 标记输入表单。

例子。假设您有一个 Person 模型，并且您正试图抓住 dob。

**呈现片段表单部分 (_form.html.erb)**

```
<select class="date required" id="person_dob_3i" name="person[dob(3)]"> 
```

**人物样式表 person.css.scss**

```
#person_dob_3i {
  width: 50px;
  border: 1px solid #ccc;
} 
```

# grails - Grails Custom Scaffolding 可以访问控制器名称

> ID：14985986
> 
> 赞同：2
> 
> 时间：2013-02-20T17:20:16.563
> 
> 标签：grails

我正在尝试编写自定义`src/templates/scaffolding/Controller.groovy`，想知道是否有任何方法可以访问控制器名称？现在看来您只能获得“模型”类。我需要它的原因是我正在自定义渲染以根据控制器为模板目录添加前缀。

例如，我有一个名为的控制器`AuthorAdminController`，我需要自定义`list`以使用该`/admin/user/**`目录。

如果您有任何问题，请告诉我。我正准备研究如何定制`DefaultGrailsTemplateGenerator`，但我不确定这是否是正确的路线。

例子：

```
class UserAdminController {
      static scaffold = User 
} 
```

目前在我的`Controller.groovy`我得到 className='user' 所以我无法访问控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T17:48:58.550

我不认为你可以，因为脚手架的工作方式你的模板*总是*会生成一个名为*DomainClassName* Controller 的类（即`UserController`在你的例子中），它被加载到一个新的类加载器中，然后真正的控制器的元类（`UserAdminController`）变得新添加到它的操作委托给生成的`UserController`.

现在每个控制器都可以在执行操作期间访问该`controllerName`属性，因此这可能会为您提供一种解决方法。我还没有尝试过，但是您可以尝试将 a`log.info("controller: \${controllerName}")`放入模板中并查看它为您提供的名称（反斜杠使其在运行时而不是生成时解析）。

# database - 您能识别出创建此数据的旧版软件吗？

> ID：14985988
> 
> 赞同：-2
> 
> 时间：2013-02-20T17:20:20.277
> 
> 标签：database, erp

首先，我很抱歉偏离主题，因为这与编程没有直接关系，但只有程序员会知道。

市场上有很多[位图数据](http://i.stack.imgur.com/zam67.jpg)，您可以将这些数据输入文本格式。显然，生成这些的软件可以导出位图，但不能直接导出数据，需要人工再次手动输入。

我在网上做了一些研究，似乎 SAP 和 Lotus 123 都可以导出数据，几乎没有限制。会是这些还是别的什么？您能识别出创建此类数据的遗留软件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:26:23.253

这看起来像打印纸的扫描图像。

间接证据：
--我炸毁了图像，像“C”这样的字符并不相同。这表明印刷油墨。
——字母周围有噪音。这表明已扫描纸张和/或少量墨水。

证据并不能最终证明它是一份扫描文件。但我没有看到故意在图像中生成噪点和字体不一致的意义。

# php - d3 graph - 如何让 JS 从 PHP 脚本中获取 JSON，然后选择轴和绘图？

> ID：14985989
> 
> 赞同：0
> 
> 时间：2013-02-20T17:20:31.190
> 
> 标签：php, json, d3.js

我有一个名为“getdata.php”的 php 文件的 JSON 输出。此脚本从数据库中检索数据。

输出如下：

```
{"datex":"2013-02-19","value":"0"}{"datex":"2013-02-20","value":"1"}... 
```

我需要使用日期与情绪的 d3 绘制折线图。

我试过编辑这个 - [http://bl.ocks.org/mbostock/3883195#index.html](http://bl.ocks.org/mbostock/3883195#index.html) - 但我不明白我必须编辑javascript的哪一部分。

如何让 JS 从 getdata.php 获取数据，然后选择 x 轴和 y 轴并绘图？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:20:32.137

您想使用该示例正在使用[`d3.json`](https://github.com/mbostock/d3/wiki/Requests#wiki-d3_json)的而不是。`d3.tsv`

您的代码将如下所示：

```
d3.json('getdata.php', function(json) {
    // Same code here as in the tsv example.
}); 
```

有关如何使用 d3.json 的更多提示，请参阅[此示例。](http://bl.ocks.org/biovisualize/2322933)

# android - 从android通过指定的SIM卡调用

> ID：14985992
> 
> 赞同：6
> 
> 时间：2013-02-20T17:20:33.423
> 
> 标签：android, call

我想知道是否可以通过双 SIM 安卓设备上的选定 SIM 卡从 android 拨打电话。是否可以通过编程方式选择特定的 SIM 卡进行呼叫？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T17:55:05.487

Android SDK 不提供 API 来控制在双 SIM 手机上使用的 SIM。事实上，Android 甚至都不真正支持双 SIM 卡手机。制造商对所有双 SIM 卡设备进行了广泛修改。

您无法通过 Android SDK 控制 SIM。如果任何 OEM 为他们的设备提供这样的 API，我不知道，但您可以尝试直接询问双 SIM 设备的制造商，他们的设备上是否存在这样的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-25T16:58:49.327

使用 ACTION_DIAL 让人们选择他们的 SIM 卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T08:44:13.837

```
private void callBack(String phone, Context context) {
    Intent intent = new Intent(Intent.ACTION_CALL).setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    //check wheather it is dual sim or not then

    //if sim 1
    intent.putExtra("simSlot", 0);

    //else if sim 2
    intent.putExtra("simSlot", 1); 

    intent.setData(Uri.parse("tel:" + phone));
    context.startActivity(intent);
} 
```

检查它是否是双卡，通过下面的链接

[Android : 检查手机是否为双卡](https://stackoverflow.com/questions/14517338/android-check-whether-the-phone-is-dual-sim/17499889#17499889)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-23T12:58:35.053

如果手机是双卡，并且您想**从 sim2 拨打电话，则使用 1**如果您想使用 sim1，则在 intent.putextra 中使用 0

```
 Intent intentcall = new Intent(Intent.ACTION_CALL);

 intentcall.putExtra("simSlot", 1);
 intentcall.setData(Uri.parse("tel:"+dialNumber));
 startActivity(intentcall); 
```

# php - 将两张不同结构的表合并为一张

> ID：14985993
> 
> 赞同：0
> 
> 时间：2013-02-20T17:20:42.460
> 
> 标签：php, mysql

![在此处输入图像描述](../Images/9fe06a605558de8adc384ad1913c79c1.png)

那是我原来的雇员表的结构。

这是来自不同数据库的员工表，我想与我的原始员工表合并： ![在此处输入图像描述](../Images/010ff0062e01ee766b19fbdfaacd8233.png)

这很棘手，因为它们具有不同的结构。我正在考虑将新员工表中的列添加到原始员工表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:27:15.120

我要做的是删除两个表并创建**NORMALIZED TABLES**。现在这两个表都没有标准化，如果你对这些表执行很多查询，它会很慢。

相反，您可以拆分两个表并获取必要的信息，例如：

```
 Users Table Columns (ID, UserName, Password, CreateDate etc...)
   Users Info Table Columns (ID, FirstName, LastName, Gender, Age etc....)
   User Activation Table (ID, UserActive, ActivationDate, DeActivationDate etc.) 
```

并使用外键引用其他 2 个表中的 ID。阅读**关系数据库**

# linux - Linux IPC 选择？

> ID：14985999
> 
> 赞同：7
> 
> 时间：2013-02-20T17:20:50.260
> 
> 标签：linux, ipc, message-queue, semaphore, dbus

我有两个进程 A 和 B。A 和 B 有时需要通信（双向）以传递信号、消息等。
我已经对 Linux 中可用的 IPC 进行了一些基础研究，如信号量、消息队列、dbus 等。
现在我在决定使用哪一个时感到困惑，谁能告诉我哪个 IPC 更适合我的应用程序？

提前致谢

**已编辑：详细说明应用程序。（它是一个嵌入式应用程序）**
进程 A 将监控温度、速度计算等。进程 B 将驱动电机、读取传感器值（数字）等。有时我需要向进程 B 发送信号，告知达到最高温度，所以停止驱动电机。有时需要将从进程 A 中的传感器读取的数据发送到进程 B。像这样，数字数据需要跨进程传递。我在 ARM 架构中这样做。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T17:38:52.147

IPC 技术的选择取决于您尝试实现的应用程序。以下是基于性能的良好比较：

```
IPC name      Latency     Throughput   Description
-----------------------------------------------------------------------------------------
Signal        Low          n/a         Can be used only for notification, traditionally-
                                       to push process to change its state

Socket        Moderate     Moderate    Only one mechanism which works for remote nodes,
                                       not very fast but universal

D-Bus         High         High        A high-level protocol that increases latency and
                                       reduces throughput compared to when using base
                                       sockets, gains in increased ease of use

Shared        n/a          High        Data saved in-between process runs(due to swapping
memory                                 access time) can have non-constant access latency

Mapped files  n/a          High        Data can be saved in-between device boots

Message      Low           Moderate    Data saved in-between process runs. The message
queue                                  size is limited but there is less overhead
                                       to handle messages 
```

这是另一个很好的比较

[比较 Unix/Linux IPC](https://stackoverflow.com/questions/404604/comparing-unix-linux-ipc)