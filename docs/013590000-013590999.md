# StackOverflow 问答 13590000-13590999

# java - 了解缓冲区策略

> ID：13590002
> 
> 赞同：13
> 
> 时间：2012-11-27T17:43:10.077
> 
> 标签：java, graphics2d

我对java有点陌生。我想做一个游戏。经过大量研究，我无法理解缓冲策略的工作原理。我知道基础知识。它会创建一个离屏图像，您以后可以将其放入 Windows 对象中。我明白了

```
public class Marco extends JFrame {
    private static final long serialVersionUID = 1L;
    BufferStrategy bs; //create an strategy for multi-buffering.

    public Marco() {
       basicFunctions(); //just the clasics setSize,setVisible,etc
       createBufferStrategy(2);//jframe extends windows so i can call this method 
       bs = this.getBufferStrategy();//returns the buffer strategy used by this component
    }

   @Override
   public void paint(Graphics g){
      g.drawString("My game",20,40);//some string that I don't know why it does not show
      //guess is 'couse g2 overwrittes all the frame..
      Graphics2D g2=null;//create a child object of Graphics
      try{
         g2 = (Graphics2D) bs.getDrawGraphics();//this new object g2,will get the
         //buffer of this jframe?
         drawWhatEver(g2);//whatever I draw in this method will show in jframe,
         //but why??
      }finally{
         g2.dispose();//clean memory,but how? it cleans the buffer after
         //being copied to the jframe?? when did I copy to the jframe??
      }
      bs.show();//I never put anything on bs, so, why do I need to show its content??
      //I think it's a reference to g2, but when did I do this reference??
   }

   private void drawWhatEver(Graphics2D g2){
       g2.fillRect(20, 50, 20, 20);//now.. this I can show..
   }
  } 
```

我不知道..我已经研究了很长时间了..而且一点运气都没有..我不知道..也许它就在那里，而且它真的很清楚很简单，而且我'我太傻了没看到。。

感谢所有的帮助.. :)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-27T17:56:00.460

以下是它的工作原理：

1.  当您调用时`JFrame`构造 a 。知道它属于 的特定实例。您正在检索它并将其存储在该字段中。`BufferStrategy``createBufferStrategy(2);``BufferStrategy``JFrame``bs`
2.  当需要绘制你的东西时，你正在检索一个`Graphics2D`来自`bs`. 此`Graphics2D`对象绑定到 拥有的内部缓冲区之一`bs`。当您绘制时，所有内容都会进入该缓冲区。
3.  当你最终调用时`bs.show()`，`bs`会导致你刚刚绘制的缓冲区成为当前的缓冲区`JFrame`。它知道如何做到这一点，因为（参见第 1 点）它知道`JFrame`它的用途。

这就是正在发生的一切。

通过对您的代码的评论......您应该稍微改变您的绘图程序。而不是这个：

```
try{
    g2 = (Graphics2D) bs.getDrawGraphics();
    drawWhatEver(g2);
} finally {
       g2.dispose();
}
bs.show(); 
```

你应该有一个这样的循环：

```
do {
    try{
        g2 = (Graphics2D) bs.getDrawGraphics();
        drawWhatEver(g2);
    } finally {
           g2.dispose();
    }
    bs.show();
} while (bs.contentsLost()); 
```

这将防止丢失缓冲区帧，根据[文档](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferStrategy.html#contentsLost%28%29)，这种情况偶尔会发生。

# java - JavaScript 对 Java Applet 方法的调用仅在 Chrome 浏览器中不起作用

> ID：13590003
> 
> 赞同：2
> 
> 时间：2012-11-27T17:43:11.760
> 
> 标签：java, javascript, google-chrome, plugins, applet

我正在尝试运行一个小程序的小测试来调用 JavaScript 方法，反之亦然。该代码在 IE 9.0 和 Firefox 17.0 中运行良好，但在 Chrome 23.0.1271.91 m 中无法运行。

我不确定这是否是这个特定版本的 Chrome 的问题，但我想不是。

基本上，我有一个主 HTML 页面，它使用“对象”标签和“iframe”标签声明小程序。在另一个文件中，我有一个 HTML 页面，该页面将从主页面加载到 iframe 中，但由小程序控制。

在 main.html 文件中，我使用“object”标签而不是“applet”来符合 HTML5。我知道这个测试应该使用“applet”标签，但使用“applet”标签正是我想要避免的。

小程序代码：

```
package tests.javaplugin;

import java.applet.Applet;
import java.util.*;

import netscape.javascript.JSObject;

public class PluginTestApplet extends Applet {

   private static final long serialVersionUID = 492358995598940846L;
   private static Timer theTimer = new Timer(true);

   private static JSObject theWindow;

   @Override
   public void init() {
      System.out.println("entering init()");
      theWindow = JSObject.getWindow(this);
      System.out.println("exiting init()");
   }

   public void loadComplete() {
      System.out.println("calling loadComplete()");
      theTimer.schedule(new ShowPageTimerTask(), 100);
      System.out.println("returning loadComplete()");
   }

   public int getRandomInteger() {
      System.out.println("calling getRandomInteger()");
      final int random = (int) Math.abs(Math.random() * 100);
      System.out.println("returning getRandomInteger(): " + random);
      return random;
   }

   private class ShowPageTimerTask extends TimerTask {

      @Override
      public void run() {
         System.out.println("entering ShowPageTimerTask.run()");
         theWindow.call("showPage", new String[] { "./page.html" });
         System.out.println("exiting ShowPageTimerTask.run()");
      }

   }

} 
```

main.html 代码：

```
<!DOCTYPE html>
<html>
   <head>
      <meta charset="windows-1252">
      <title>Testing Java Plug-in in Java 7.0</title>
      <script src="./mainControl.js"></script>
   </head>
   <body onload="onBodyLoad()">
      <!--[if !IE]>-->
      <object id="applet_embed" width="0" height="0"
         type="application/x-java-applet;version=1.7">
      <!--<![endif]-->
      <!--[if IE]>
      <object id="applet_embed" width="0" height="0"
         classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93">
      <![endif]-->
         <param name="archive" value="PluginTestApplet.jar">
         <param name="codebase" value="./">
         <param name="code" value="tests.javaplugin.PluginTestApplet">
         <param name="scriptable" value="true">
         <param name="mayscript" value="true">
         No Java 2 SDK, Standard Edition v 1.7 support for APPLET!
      </object>
      <div id="principalDIV" style="position: absolute; width: 640px; height: 480px; top: 0px; left: 0px; scrolling: no; visibility: visible; z-index: 0; overflow: hidden; leftmargin=0px; topmargin=0px; background-color: #000000">
         <iframe id="ifPrincipal" style="position: absolute; width: 100%; height: 100%; visibility: visible; scrolling: no; overflow-x: hidden; overflow-y: hidden;">
         </iframe>
      </div>
   </body>
</html> 
```

mainControl.js 代码：

```
function getApplet() {
   return document.getElementById("applet_embed");
}

function onBodyLoad() {
   getApplet().loadComplete();
}

function getRandomInteger() {
   return getApplet().getRandomInteger();
}

function showPage(aURL) {
   var iframePrincipal = document.getElementById("ifPrincipal");
   if (iframePrincipal.src != null) {
      iframePrincipal.src = aURL;
   } else {
      alert("Error! iframe src = null! " + iframePrincipal.src);
   }
} 
```

page.html 代码：

```
<!DOCTYPE html>
<html>
   <head>
      <meta charset="windows-1252">
      <title>Testing Java Plug-in in Java 7.0</title>
      <script src="./control.js"></script>
   </head>
   <body onload="onBodyLoad()" style="background-color: #000000; color: #ffffff; font-family: Tahoma; font-size: 35px;" >
      <div>Testing dynamic HTML i-frame commanded by Java Plug-in.</div>
      <div style="float: left;">The random number is&nbsp;</div><div id="randomNum" style="float: left;">&nbsp;</div>
   </body>
</html> 
```

control.js 代码：

```
function onBodyLoad() {
   var randomNumber = parent.getRandomInteger();
   var randomNumberDiv = document.getElementById("randomNum");
   randomNumberDiv.innerHTML = randomNumber;
} 
```

控制台（在开发工具中）显示以下错误：

```
Uncaught TypeError: Object #<HTMLObjectElement> has no method 'loadComplete' mainControl.js:6
Failed to load resource file:///C:/Projects/Tests/javaplugintest/tests.javaplugin.PluginTestApplet 
```

那么，Chrome 需要在 'object' 标签声明中有什么技巧或特定参数吗？

# android - 在位图上绘图？

> ID：13590007
> 
> 赞同：1
> 
> 时间：2012-11-27T17:43:28.983
> 
> 标签：android, bitmap, android-canvas

我有一个位图，我想在上面画圆形或正方形。我需要使用画布还是可以在位图上绘制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:50:19.050

您可以使用`Canvas`将数据绘制到`Bitmap`实例中，只需创建一个`Canvas`实例并将 传递`Bitmap`给构造函数即可。 **但是**，`Bitmap`必须是**可变**的，否则您将无法编辑其像素数据。默认情况下，`Bitmap`通过加载图像文件等创建的任何内容都是**不可变**的。您可能需要使用`Bitmap.createBitmap()`将原始版本作为参数的版本之一，以便制作可以在其上绘制的可变副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:43:56.707

在现有位图上创建画布，您可以绘制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:50:59.223

你需要像这样在画布上绘制：

```
Bitmap bmp = Bitmap.createBitmap(width, height, Config.ARGB_8888);
Canvas canvas = new Canvas(bmp);

canvas.drawText("Test", 100, 100); 
```

# c++ - Visual Studio Copy Local on reference 不起作用

> ID：13590014
> 
> 赞同：10
> 
> 时间：2012-11-27T17:43:45.083
> 
> 标签：c++, visual-studio, reference, visual-studio-2012

我在一个解决方案中有两个非托管 C++ DLL，分别称为 A 和 B，并且 A 引用了 B。我想将 B.dll 复制到 A 的应用程序目录中。当我在 A 的引用上单击“复制本地”时“在其项目属性中的“框架和引用”选项卡中，它看起来设置为 true，但单击应用会将值恢复为 false。知道这里有什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-19T23:06:46.023

我知道已经有一段时间了，但我刚刚遇到了这个问题并找到了这个连接页面：

[https://connect.microsoft.com/VisualStudio/feedback/details/766064/visual-studio-2012-copy-local-cannot-be-set-via-the-property-pages](https://connect.microsoft.com/VisualStudio/feedback/details/766064/visual-studio-2012-copy-local-cannot-be-set-via-the-property-pages)

似乎这是一个已知问题。您可以通过编辑项目文件来解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-29T14:53:34.277

@HoopSomuah 即使您解决了连接错误并粘贴了“复制本地”设置，Visual Studio 仍然不会将依赖库或 dll 复制到 A 的目标文件夹中，无论您在项目中对 B 的引用设置了什么标志一个。

Visual Studio 2015 中的非托管引用处理仍然搞砸了，我相信 2017 年同样糟糕。

@JasonFry 正如@HansPassant 指出的那样，您需要向项目A 添加一个构建后事件，以将B.dll 复制到与A.dll 相同的文件夹中。

Visual Studio 没有提供任何从项目 A 获取 B.dll 路径的简单方法，因此我们可以让项目 B 将该路径写入文本文件，然后让项目 A 从该文本文件中读取路径并复制 B .dll 放入与 A.dll 相同的文件夹中。

打开 B 的项目属性并将其添加为构建后事件：

```
echo $(TargetPath)>$(SolutionDir)References.txt 
```

在 A 的项目属性中，添加为构建后事件：

```
for /f %%f in ($(SolutionDir)References.txt) do xcopy /y %%f $(TargetDir) 
```

如果您有第三个项目 C.dll 也需要复制到 A 的输出文件夹中，请在 C 的项目属性中添加一个类似的构建后事件（注意**>>**而不是**>**所以它附加到文本文件而不是覆盖它）：

```
echo $(TargetPath)>>$(SolutionDir)References.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T01:10:32.647

我前段时间遇到过这个问题。基本上，它是真的，所以它复制文件，然后将自己设置为 false 以防止自己重新复制它。

# eclipse - 如何让 Scalatest 进入 Eclipse？

> ID：13590015
> 
> 赞同：12
> 
> 时间：2012-11-27T17:43:44.710
> 
> 标签：eclipse, scala, scalatest

我安装了 Typesafe 堆栈，包括 ScalaTest for Scala IDE 0.9.3。我不知道如何将其附加到新项目中。我有其他项目（来自我刚刚学习的 Coursera Scala 课程）使用它，但我不能在新项目中使用它。导入 org.scalatest._ 只是告诉我“对象 scalatest 不是包 org 的成员”。Coursera 项目有一个我不知道如何重现的“引用库”元素。我可以将“lib_managed”文件夹复制到一个新项目中，但这无济于事。

必须有一种更简单的方法来启动一个使用 Scalatest 的新项目？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T04:01:48.187

遇到同样的情况后，我回去仔细阅读指南（[http://www.scalatest.org/user_guide/using_scalatest_with_eclipse](http://www.scalatest.org/user_guide/using_scalatest_with_eclipse)），因为它对我来说也不是很清楚......Eclipse的ScalaTest插件只准备Eclipse用于处理引用 ScalaTest jar 的项目。当您安装插件时，ScalaTest jar（根据我的发现）没有随 ScalaTest Eclipse 插件一起提供。因此，在 ScalaTest 插件说明之后，当它说：

> 要在您的 Scala 项目中使用 ScalaTest，您必须下载 ScalaTest 并将其包含在项目的构建路径中

它们实际上意味着您仍然必须单独下载 ScalaTest jar 并将其添加到您的构建路径（添加外部 Jar）。或者，更好的是，使用 SBT 将 ScalaTest 添加为依赖项。无论哪种方式，您都没有 jar，因为您安装了 Eclipse 插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T20:21:14.790

也许您已经从用户指南中提到了此页面，但以防万一：

[http://www.scalatest.org/user_guide/using_scalatest_with_eclipse](http://www.scalatest.org/user_guide/using_scalatest_with_eclipse)

我们上周更新了这个，所以它应该是最新的。（不，它不需要 sbt 知识。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T19:43:53.813

添加到已经说过的内容：

如果您安装了 SBT（因为您使用的是类型安全堆栈，所以应该安装），您可以按照此博客文章添加对 eclipse 的类路径的引用：

[http://comamitc.blogspot.com/2013/01/installing-library-dependencies-using.html](http://comamitc.blogspot.com/2013/01/installing-library-dependencies-using.html)

这是迄今为止我发现在任何这些项目中管理多个依赖项的最简单方法。如果您正在使用 Play，您可以将 'sbt' 命令替换为 'play' 命令并完成相同的操作。

使用构建工具，您不必手动管理自己的库依赖项，如果您计划共享您的项目/让其他人参与，您应该走这条路。

# arrays - 谷歌地图将标记显示为并非一次创建的数组

> ID：13590025
> 
> 赞同：0
> 
> 时间：2012-11-27T17:44:19.997
> 
> 标签：arrays, google-maps-markers, marker

如何在创建标记时显示它们？目前，它们被添加到数组中并一次显示。

感谢您的帮助......以及任何编码改进建议。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
<head>
<title>Maps</title>
<style type="text/css"> 
html, body { height: 100%; } 
</style>
</head>
<body onload="initialize()">
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

        <script type="text/javascript">
        var side_bar_html = ""; 
        var map = null;
        var markers = [];
        var sites = [['Action Family Counseling Alcohol & Drug Treatment', 34.2807649, -118.7094014, 1, 'Action Family Counseling Alcohol & Drug Treatment<br>4380 Apricot Road<br>Simi Valley, CA  93063', 'Company'],['AIM - Access for Infants and Mothers', 34.217982, -119.147809, 21, 'AIM - Access for Infants and Mothers<br>2220 East Gonzales Road<br>Oxnard, CA  93036', 'Company'],['Ananda Marga Universal Relief Team', 39.086355, -77.1889489, 111, 'Ananda Marga Universal Relief Team<br>2502 Lindley TER <br>Rockville, MD  20805', 'Company'],['Area Agency on Aging', 34.2698398, -119.2148903, 9, 'Area Agency on Aging<br>646 County Square Dr.<br>Ventura, CA  93003', 'Company'],['Area Christians Taking Initiative On Needs (ACTION', 34.2087312, -119.0315009, 2, 'Area Christians Taking Initiative On Needs (ACTION<br>406 Constitution Avenue<br>Camarillo, CA  93012', 'Company'],['Berylwood Family Resource Center', 34.2684132, -118.7516168, 3, 'Berylwood Family Resource Center<br>2300 Heywood Street<br>Simi Valley, CA  93065', 'Company'],['Big Brothers/Big Sisters of Ventura County', 34.220567, -119.062037, 5, 'Big Brothers/Big Sisters of Ventura County<br>445 Rosewood Avenue<br>Camarillo, CA  93010', 'Company'],['Boys and Girls Club of Camarillo ', 34.2293953, -119.0307973, 8, 'Boys and Girls Club of Camarillo <br>1500 Temple Ave. <br>Camarillo, CA  93010', 'Company'],['Boys and Girls Club of Moorpark', 34.288225, -118.884874, 6, 'Boys and Girls Club of Moorpark<br>200 Casey Road<br>Moorpark, CA  93021', 'Company']];
        var x = 121;
        var infowindow = new google.maps.InfoWindow({ 
            size: new google.maps.Size(150, 50)
        });
        var pinImage = [];
        var i = 0;
        var html = '';
        // company is green
        // lodging is red
        pinImage["Company"] = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=C|00AF33", new google.maps.Size(21, 34), new google.maps.Point(0,0), new google.maps.Point(10, 34));;
        pinImage["Lodging"] = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=L|FE7569", new google.maps.Size(21, 34), new google.maps.Point(0,0), new google.maps.Point(10, 34));;
        var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
            new google.maps.Size(40, 37),
            new google.maps.Point(0, 0),
            new google.maps.Point(12, 35)
        );

        function initialize() {
            var centerMap = new google.maps.LatLng(39.828175, -98.5795);
            var myOptions = {
                zoom: 4,
                center: centerMap,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            google.maps.event.addListener(map, 'click', function() {
                infowindow.close();
            });
            displayMarkers();
            show("Company");
            hide("Lodging");
            makeSidebar();
        }

        function displayMarkers() {
            var siteLatLng = new google.maps.LatLng(sites[i][1], sites[i][2]);
            var marker = new google.maps.Marker({
                position: siteLatLng,
                map: map,
                title: sites[i][0],
                zIndex: sites[i][3],
                html: sites[i][4],
                icon: pinImage[sites[i][5]],
                shadow: pinShadow
            });
            marker.mycategory = sites[i][5];
            marker.myname = sites[i][0];
            markers.setVisible = true;
            markers.push(marker);
            markers[i].setVisible(true);
            var contentString = "Some content";
            google.maps.event.addListener(marker, "click", function () {
                infowindow.setContent(this.html);
                infowindow.open(map, this);
            });
            html += '<a href="javascript:myclick(' + i + ')">' + markers[i].myname + '<\/a><br>';
            document.getElementById("side_bar").innerHTML = html;
            i++
            if (i < sites.length) {
                document.getElementById('counter').innerHTML = 'Loading record ' + i + ' of ' + sites.length;
                setTimeout("displayMarkers()", 10);
            }
            else {
                document.getElementById('counter').innerHTML = 'Check/Uncheck boxes for Markers to display.';
            }
        }

        function show(category) {
            for (var i=0; i < markers.length; i++) {
                if (markers[i].mycategory == category) {
                    markers[i].setVisible(true);
                }
            }
            document.getElementById(category+"box").checked = true;
        }

        function hide(category) {
            for (var i=0; i < markers.length; i++) {
                if (markers[i].mycategory == category) {
                    markers[i].setVisible(false);
                }
            }
            document.getElementById(category+"box").checked = false;
            infowindow.close();
        }

        function boxclick(box,category) {
            if (box.checked) {
                show(category);
            }
            else {
                hide(category);
            }
            makeSidebar();
        }

        function myclick(i) {
            google.maps.event.trigger(markers[i],"click");
        }

        function makeSidebar() {
            var html = "";
            for (var i = 0; i < markers.length; i++) {
                if (markers[i].getVisible()) {
                    html += '<a href="javascript:myclick(' + i + ')">' + markers[i].myname + '<\/a><br>';
                }
            }
            document.getElementById("side_bar").innerHTML = html;
        }
    </script>

    <form action="#">
        <table>
            <tr>
                <td>
                <p align="center">
                <img src="http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=C|00AF33">
                <br />
                <strong>Company:</strong>
                <input type="checkbox" id="Companybox" onclick="boxclick(this,'Company')" /><br>121 Records</p>
                </td>
                <td>
                <p align="center">
                <img src="http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=L|FE7569">
                <br />
                <strong>Lodging:</strong>
                <input type="checkbox" id="Lodgingbox" onclick="boxclick(this,'Lodging')" /><br>121 Records</p>
                </td>
            </tr>
        </table>
    </form>
    <div id="counter"></div>
    <table border="1" cellspacing="5" cellpadding="5" bgcolor="#990000" height="500">
        <tr>
            <td bordercolor="#000000" bgcolor="#000000" valign="top">
            <div class="notscrollable" id="map_canvas" style="width: 625px; height: 500px">
            </div>
            </td>
            <td valign="top" bgcolor="#EBEBEB" bordercolor="#000000">
            <div style="font-size:13px">
                <div class="scrollable" id="side_bar" style="height: 500px; overflow: scroll">
                </div>
            </div>
            </td>
        </tr>
    </table>

<body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:51:07.020

发现了问题。

从一开始就删除了 var map 并移动了一些东西。

# iis - 向 ARR 请求添加自定义标头

> ID：13590027
> 
> 赞同：16
> 
> 时间：2012-11-27T17:44:25.877
> 
> 标签：iis, reverse-proxy, iis-arr

我正在使用 ARR 作为反向代理在 IIS 后面运行服务。我知道有`x-forwarded-for`和`x-arr-log-id`标题被传递。但是，我想要的是传入的私钥，以便支持应用程序明确知道请求不是本地的（即使 ARR 服务器是）。我看过一些关于添加/替换服务器变量的帖子，但这似乎不是通过支持应用程序上的请求标头来实现的。

我猜肯定有一些 web.config 设置可以做到这一点，但到目前为止还没有找到它。

例子：`X-PRIVATE-TOKEN: We are the children of Korn!`

这样我就可以相信`x-forwarded-for`地址是实际地址，而不是简单地不信任所有代理请求的 IP 地址引用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-09T10:24:09.413

由[IIS.net](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-20-configuration-reference#Note_about_request_headers_)提供的答案似乎是相关 URL 重写模块的一部分：

> 请求标头的设置使用与服务器变量相同的机制，但具有特殊的命名约定。如果集合中的服务器变量名称以“HTTP_”开头，那么这将导致根据以下命名约定设置 HTTP 请求标头：
> 
> 名称中的所有下划线 ("_") 符号都将转换为破折号 ("-")。所有字母都转换为小写。“HTTP_”前缀被移除例如，以下配置用于设置请求的自定义 x-original-host 标头：
> 
> `<set name="HTTP_X_ORIGINAL_HOST" value="{HTTP_HOST}" />`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-11-27T15:31:35.633

尝试：

```
<rule name="myRule_01">
  ...
  <serverVariables>
    <set name="HTTP_X_PRIVATE_TOKEN" value="We are the children of Korn!" />
  </serverVariables>
  ...
</rule> 
```

http 请求的标头字段将是：x-private-token

# c++ - 确定给定的 PIDL 是否属于特定的 shell 虚拟文件夹（例如回收站）

> ID：13590029
> 
> 赞同：2
> 
> 时间：2012-11-27T17:44:34.443
> 
> 标签：c++, windows, winapi, windows-shell

> **可能重复：**
> [通过其 pIDL 识别 Windows Shell 特殊文件夹（即获取其 CSIDL）（现在确定 pIDL 是否与 C# 相等）](https://stackoverflow.com/questions/3572220/recognize-windows-shell-special-folder-i-e-get-its-csidl-via-its-pidl-now-de)

我有一个 shell 虚拟文件夹的 PIDL 我如何将 PIDL 与 CSIDL_BITBUCKET 进行比较？

# javascript - 从 IFRAME 分配主窗口中的字段值

> ID：13590030
> 
> 赞同：0
> 
> 时间：2012-11-27T17:44:33.850
> 
> 标签：javascript, iframe, dynamics-crm-2011, dynamics-crm-online

在*IFRAME*中有一个由`var blipp = 7;`. 在主窗口中，我有一个名为`new_blopp`. 我很高兴让*blipp*进入*blopp*。根据[this MSDN讨论](http://social.microsoft.com/Forums/is/crmdevelopment/thread/bfa0c9c3-16ed-4ed9-a30d-ff2a850b56db)，可以通过以下方法之一来完成。

1.  `parent.window.Xrm.Page.data.entity.attributes.get("new_blopp").setValue(blipp)`
2.  `_mainWindow.parent.parent.document.all["new_blopp"].innerText = blipp`

我不完全确定他为什么还建议输入以下内容。

```
_mainWindow.parent.parent.document.all["new_blopp"].value = "" 
```

无论如何，他们似乎都没有工作。第一个给了我*权限被拒绝*，第二个*'_mainWindow'没有定义*。当然，我没有勾选跨框架脚本。根据 F12，在*parent.window.Xrm.Page中有一个名为**data*的字段，但它是*null*。当我点击调试器时，我可以看到*parent*是可访问的，但不是*parent.window* -*权限被拒绝*是我得到的。

 ****我怎样才能将blipp*的智慧传达给*blopp*？

更令人沮丧的是，[这篇文章](http://social.microsoft.com/Forums/is/crmdevelopment/thread/bfa0c9c3-16ed-4ed9-a30d-ff2a850b56db)和[这篇](http://social.microsoft.com/Forums/en-US/crmdevelopment/thread/3e23486c-358a-4e80-b3e7-e13c77475ce4#4a172efc-35e1-44b1-b686-b21792b17eb2)文章表明我的代码**应该可以**工作。这与我运行在线版本有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:12:38.647

如果两者`iframe`都`parent`在同一个域中。（纯`javascript`）

`blipp (in iframe)`进入_`blopp (in parent)`

```
var blopp = document.getElementById("ifameId").contentWindow.blipp; 
```

`blopp (in parent)`进入_`blipp (in iframe)`

```
var blipp = self.parent.window.blopp; 
```***

# performance - Chrome：performance.memory 不支持 GC

> ID：13590035
> 
> 赞同：0
> 
> 时间：2012-11-27T17:44:52.387
> 
> 标签：performance, google-chrome, memory, garbage-collection, google-chrome-devtools

我正在运行性能测试以比较 Chrome 中的不同画布渲染方案。时间分析很简单，但我也在尝试比较内存性能。通过运行 Chrome，`--enable-memory-info`我可以`performance.memory.usedJSHeapSize`在运行前后观察内存使用情况。

问题是垃圾收集器可能会运行。很容易看出这是因为内存使用量的变化是负的，但是没有关于收集了多少垃圾的信息，所以我无法推断内存使用量。是否有一些程序访问来了解 gc 在做什么？

也许更好的是，我需要的所有信息都在开发者工具的 Timeline 选项卡中。以编程方式访问它会非常好；我唯一的选择是目视它，我想定量地做事情，而不是目不转睛。毕竟这一切都在计算机上运行。是否有程序访问权限？

（顺便说一句，我可以在我正在执行测试的紧密循环中监控内存，也许这是我能做的最好的事情，但我担心这本身会影响性能，这意味着将代码粘贴到一堆地方。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:37:41.703

有一个协议用于 Chrome DevTools 和被检查页面之间的交互。[https://developers.google.com/chrome-developer-tools/docs/protocol/tot/index](https://developers.google.com/chrome-developer-tools/docs/protocol/tot/index)

您可以使用它并做任何您想做的事情。例如，您可以在页面上下文中进行评估，甚至可以记录时间线。

# eclipse - Windows 8 上的 Eclipse 兼容性

> ID：13590036
> 
> 赞同：2
> 
> 时间：2012-11-27T17:44:57.403
> 
> 标签：eclipse, windows-8, java

我计划将我的 PC 升级到 Windows 8，但我对[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)和[JDK](http://en.wikipedia.org/wiki/Java_Development_Kit)的兼容性有些担心。

1.  特别是关于 Eclipse 中的 Android 开发
2.  用于增强现实兼容性的Qualcomm [SDK (](http://en.wikipedia.org/wiki/Software_development_kit) [Vuforia](https://developer.qualcomm.com/mobile-development/mobile-technologies/augmented-reality) )

Eclipse 是否可以在 Windows 8 上执行这些特定任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:34:32.653

自 Windows 8 消费者预览版以来，我一直在使用带有 ADK 的 Eclipse。迄今为止，我在使用 IDE 和在 Android 平台上工作时从未遇到过问题。

默认情况下，Windows 8 支持 Windows 7“桌面”应用程序，其中包括 Java 和任何附加功能，因此 Qualcomm SDK 也应该没有问题 - 但我没有亲自测试过它们。

# c# - 无法从字符串值加载类型

> ID：13590042
> 
> 赞同：1
> 
> 时间：2012-11-27T17:45:31.103
> 
> 标签：c#, .net, spring, spring.net

我正在开发一个使用 NHibernate 和 Spring.Net 框架的程序。当我执行应用程序时，会引发以下异常：

> 创建上下文“spring.root”时出错：无法从字符串值“BlackOpsP2.Data.EmployeeDao，BlackOpsP2.Data”加载类型。

**应用程序配置：**

```
<?xml version="1.0"?>
<configuration> 
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821"/>
        <sectionGroup name="spring">
            <section name="parsers" type="Spring.Context.Support.NamespaceParsersSectionHandler, Spring.Core" />
            <section name="context" type="Spring.Context.Support.ContextHandler, Spring.Core"/>
            <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core" />
        </sectionGroup>
    </configSections>

    <spring>
        <context>
            <resource uri="config://spring/objects"/>
        </context>
        <parsers>
            <parser type="Spring.Data.Config.DatabaseNamespaceParser, Spring.Data" />
            <parser type="Spring.Transaction.Config.TxNamespaceParser, Spring.Data"/>
        </parsers>

        <objects xmlns="http://www.springframework.net"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:tx="http://www.springframework.net/tx"
             xmlns:db="http://www.springframework.net/database">

            <db:provider id="DbProvider"
                           provider="SqlServer-2.0"
                           connectionString="Data Source=CHETUIWK123\SQL2008R2;Integrated Security=true;Database=TestNhibernate;"/>
            <object id="MySessionFactory" type="Spring.Data.NHibernate.LocalSessionFactoryObject, Spring.Data.NHibernate33">
                <property name="ExposeTransactionAwareSessionFactory" value="true" />
                <property name="DbProvider" ref="DbProvider"/>
                <property name="MappingAssemblies">
                    <list>
                        <value>BlackOpsP2.Core</value>
                    </list>
                </property>
                <property name="HibernateProperties">
                    <dictionary>

                        <entry key="hibernate.connection.provider"
                               value="NHibernate.Connection.DriverConnectionProvider"/>

                        <entry key="dialect"
                               value="NHibernate.Dialect.MsSql2008Dialect"/>

                        <entry key="hibernate.connection.driver_class"
                               value="NHibernate.Driver.SqlClientDriver"/>

                    </dictionary>
                </property>
            </object>

            <object id="HibernateTransactionManager"
            type="Spring.Data.NHibernate.HibernateTransactionManager, Spring.Data.NHibernate33">
                <property name="SessionFactory" ref="MySessionFactory"/>
            </object>

            <object id="EmployeeDao" xsi:schemaLocation="" type="BlackOpsP2.Data.EmployeeDao, BlackOpsP2.Data">
                <property name="SessionFactory" ref="MySessionFactory"/>
            </object>

            <object id="EmployeeService" type="BlackOpsP2.Services.ARModule.EmployeeService, BlackOpsP2.Services">
                <property name="TransactionManager" ref="HibernateTransactionManager"/>
                <property name="Dao" ref="EmployeeDao"/>
            </object>

            <object id="EmployeeController" type="BlackOpsP2.Presentation.Controller.ARModule.EmployeeController, BlackOpsP2.Presentation">
                <property name="Service" ref="EmployeeService"/>
            </object>

            <!--> manually added -->
            <object id="Form" type="BlackOpsP2.UI.Form1, BlackOpsP2.UI">
                <property name="Controller" ref="EmployeeController"/>
            </object>
            <!--> /****/ -->

            <tx:attribute-driven transaction-manager="HibernateTransactionManager"/>
        </objects>
    </spring>

    <log4net>
        <appender name="FileAppender" type="log4net.Appender.FileAppender,log4net">
            <file value="E:\Test\log.txt"/>
            <appendToFile value="true"/>
            <lockingModel type="log4net.Appender.FileAppender+MinimalLock"/>
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%date [%thread] %level %logger - %message%newline"/>
            </layout>
            <filter type="log4net.Filter.LevelRangeFilter">
                <levelMin value="INFO"/>
                <levelMax value="FATAL"/>
            </filter>
        </appender>

        <root>
            <level value="DEBUG"/>
            <appender-ref ref="FileAppender"/>
        </root>
    </log4net>
</configuration> 
```

我已经实现了以下目录结构：

1.  ABC核心
2.  ABC.数据
3.  ABC.简报
4.  ABC.服务
5.  ABC.UI

我已经浏览了很多关于 stackoverflow 和 google 的链接，但我无法找到解决我问题的相关信息。

我不知道为什么会抛出这个异常，也不知道如何解决。我认为这可能与输出目录有关，或者 Spring Framework 找不到 dll。

**详细的跟踪异常：**

```
System.Configuration.ConfigurationErrorsException was unhandled  
Message=Error creating context 'spring.root': Could not load type from
string value 'BlackOpsP2.Data.EmployeeDao, BlackOpsP2.Data'.  
Source=System.Configuration   BareMessage=Error creating context
'spring.root': Could not load type from string value
'BlackOpsP2.Data.EmployeeDao, BlackOpsP2.Data'.   Line=0   StackTrace:
       at System.Configuration.BaseConfigurationRecord.EvaluateOne(String[]
keys, SectionInput input, Boolean isTrusted, FactoryRecord
factoryRecord, SectionRecord sectionRecord, Object parentResult)
       at System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord
factoryRecord, SectionRecord sectionRecord, Object parentResult,
Boolean getLkg, Boolean getRuntimeObject, Object& result, Object&
resultRuntimeObject)
       at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String
configKey, Boolean getLkg, Boolean checkPermission, Boolean
getRuntimeObject, Boolean requestIsHere, Object& result, Object&
resultRuntimeObject)
       at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String
configKey, Boolean getLkg, Boolean checkPermission, Boolean
getRuntimeObject, Boolean requestIsHere, Object& result, Object&
resultRuntimeObject)
       at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String
configKey, Boolean getLkg, Boolean checkPermission, Boolean
getRuntimeObject, Boolean requestIsHere, Object& result, Object&
resultRuntimeObject)
       at System.Configuration.BaseConfigurationRecord.GetSection(String
configKey)
       at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String
sectionName)
       at System.Configuration.ConfigurationManager.GetSection(String sectionName)
       at Spring.Util.ConfigurationUtils.GetSection(String sectionName)
       at Spring.Context.Support.ContextRegistry.InitializeContextIfNeeded()
       at Spring.Context.Support.ContextRegistry.GetContext()
       at BlackOpsP2.UI.Program.Main() in E:\Project\BlackOps-P2\BlackOpsP2.UI\Program.cs:line 19
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean
ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()   InnerException: Spring.Core.CannotLoadObjectTypeException
       Message=Cannot resolve type [BlackOpsP2.Data.EmployeeDao, BlackOpsP2.Data] for object with name 'EmployeeDao' defined in config
[E:\Project\Bin\BlackOps-P2\BlackOpsP2.UI\BlackOpsP2.UI.vshost.exe.Config#spring/objects]
line 1
       Source=Spring.Core
       ObjectName=EmployeeDao
       ObjectTypeName=BlackOpsP2.Data.EmployeeDao, BlackOpsP2.Data
       ResourceDescription=config [E:\Project\Bin\BlackOps-P2\BlackOpsP2.UI\BlackOpsP2.UI.vshost.exe.Config#spring/objects]
line 1
       StackTrace:
            at Spring.Objects.Factory.Support.AbstractObjectFactory.ResolveObjectType(RootObjectDefinition
rod, String objectName)
            at Spring.Objects.Factory.Support.DefaultListableObjectFactory.PreInstantiateSingletons()
            at Spring.Context.Support.AbstractApplicationContext.Refresh()
            at Spring.Context.Support.XmlApplicationContext..ctor(XmlApplicationContextArgs
args)
            at Spring.Context.Support.XmlApplicationContext..ctor(String name,
Boolean caseSensitive, String[] configurationLocations)
            at _dynamic_Spring.Context.Support.XmlApplicationContext..ctor(Object[] )
            at Spring.Reflection.Dynamic.SafeConstructor.Invoke(Object[] arguments)
            at Spring.Context.Support.ContextHandler.RootContextInstantiator.InvokeContextConstructor(ConstructorInfo
ctor)
            at Spring.Context.Support.ContextHandler.ContextInstantiator.InstantiateContext()
            at Spring.Context.Support.ContextHandler.InstantiateContext(IApplicationContext
parentContext, Object configContext, String contextName, Type
contextType, Boolean caseSensitive, IList`1 resources)
            at Spring.Context.Support.ContextHandler.Create(Object parent, Object configContext, XmlNode section)
       InnerException: System.TypeLoadException
            Message=Could not load type from string value 'BlackOpsP2.Data.EmployeeDao, BlackOpsP2.Data'.
            Source=Spring.Core
            TypeName=""
            StackTrace:
                 at Spring.Core.TypeResolution.TypeResolver.Resolve(String typeName)
                 at Spring.Core.TypeResolution.GenericTypeResolver.Resolve(String
typeName)
                 at Spring.Core.TypeResolution.CachedTypeResolver.Resolve(String typeName)
                 at Spring.Core.TypeResolution.TypeResolutionUtils.ResolveType(String
typeName)
                 at Spring.Objects.Factory.Support.AbstractObjectDefinition.ResolveObjectType()
                 at Spring.Objects.Factory.Support.AbstractObjectFactory.ResolveObjectType(RootObjectDefinition
rod, String objectName)
            InnerException: 
```

**更新**

当我在中添加以下行时`app.config`：

```
<property name="MappingAssemblies">
                <list>
                    <value>BlackOpsP2.Core</value>
                    <value>BlackOpsP2.Data</value>
                </list>
</property> 
```

错误消息更改为：

> 创建上下文“spring.root”时出错：无法加载文件或程序集“BlackOpsP2.Data”或其依赖项之一。该系统找不到指定的文件。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T12:29:24.673

我已经解决了这个问题。其实有两个小错误。

1.  限定实体名称不正确。
2.  需要在 UI dll 中添加所有 dll 的引用。

# ios - 在 iOS6 中重置位置警告的方法？

> ID：13590043
> 
> 赞同：0
> 
> 时间：2012-11-27T17:45:37.030
> 
> 标签：ios, web-applications, safari, geolocation, ios6

在 iOS 5 中要重置位置警告，您可以执行以下操作：

`Settings.app -> General -> Reset -> Reset Location Warnings`

据我所知，这在 iOS 6 中不存在。需要通过网络应用程序中的“询问三遍，然后不再询问”提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T17:57:00.850

尝试...设置>常规>重置>重置位置和隐私

# python - 如何使用 split() 拆分单个单词

> ID：13590045
> 
> 赞同：0
> 
> 时间：2012-11-27T17:45:43.010
> 
> 标签：python

我有一个词

```
fef2\. 
```

我只需要那个词中的“f2”（第 3 和第 4 个字符的连接）。我如何从使用 split 给出的单词中提取它。当我看到拆分的功能时，它仅在有分隔符时才有效。如果单词中没有分隔符，如何拆分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T17:47:39.323

```
>>> 'fef2.'[2:4]
'f2' 
```

来自[Python 教程](http://docs.python.org/2/tutorial/introduction.html#strings)：

> 字符串可以下标（索引）；就像在 C 中一样，字符串的第一个字符的下标（索引）为 0。没有单独的字符类型；一个字符只是一个大小为 1 的字符串。就像在 Icon 中一样，子字符串可以用**切片表示法**指定：两个索引用冒号分隔。
> 
> ```
> >>> word
> 'HelpA'
> >>> word[4]
> 'A'
> >>> word[0:2]
> 'He'
> >>> word[2:4]
> 'lp' 
> ```
> 
> 切片索引具有有用的默认值；省略的第一个索引默认为零，省略的第二个索引默认为被切片的字符串的大小。
> 
> ```
> >>> word[:2]    # The first two characters
> 'He'
> >>> word[2:]    # Everything except the first two characters
> 'lpA' 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:47:33.537

你不需要`split()`这个：

```
s = 'fef2.'
print(s[2:4]) 
```

这里，`2`是开始索引，`4`是结束索引之后的索引。Python 使用从零开始的索引，因此第一个字符的索引为零。

该`start:end`构造称为*slice*。您可以在此处阅读有关切片的更多信息：[Explain Python's slice notation](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:53:44.717

使用子字符串 'fe' 作为分隔符来完成这项工作。

```
'fef2'.split(sep = 'fe') 
```

但是，这种方法无法处理字符串末尾的点。

# c# - 为什么我的流被同行关闭？

> ID：13590047
> 
> 赞同：0
> 
> 时间：2012-11-27T17:45:47.613
> 
> 标签：c#, .net, stomp, nms, apache-nms

我有以下控制台程序，它在 ActiveMQ Stomp 服务器上侦听目标（队列或主题，没关系），并将它收到的消息简单地记录到控制台：

```
using System;
using Apache.NMS.Stomp;
using Apache.NMS;
using Apache.NMS.Util;

namespace StompTest
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                var connectionFactory = new ConnectionFactory("stomp:tcp://mybroker:61613");

                var connection = connectionFactory.CreateConnection();
                connection.ExceptionListener += new ExceptionListener(connection_ExceptionListener);
                connection.Start();

                var session = connection.CreateSession(AcknowledgementMode.AutoAcknowledge);

                IDestination dest = SessionUtil.GetDestination(session, "queue://MyQueue");

                var consumer = session.CreateConsumer(dest);
                consumer.Listener += new MessageListener(consumer_Listener);

                Console.ReadKey();
            }
            catch (NMSException ex)
            {
                Console.WriteLine("NMSException !! ==> " + ex.Message);
            }
        }

        static void connection_ExceptionListener(Exception exception)
        {
            Console.WriteLine("Exception!! ==> " + exception.ToString());
        }

        static void consumer_Listener(IMessage message)
        {
            var textMessage = message as ITextMessage;
            if (textMessage == null)
                Console.WriteLine("No ITextMessage...");
            else
                Console.WriteLine("Received => " + textMessage.Text);
        }
    }
} 
```

当我启动它时，它工作正常，只要我继续发送消息。但是当有 30 秒不活动时，我得到一个异常。即使没有向队列发送消息也会发生这种情况：

```
Exception!! ==> Apache.NMS.Stomp.IOException: Peer closed the stream.
   at Apache.NMS.Stomp.Protocol.StompFrame.ReadLine(BinaryReader dataIn) in c:\d
ev\NMS.Stomp\src\main\csharp\Protocol\StompFrame.cs:line 284
   at Apache.NMS.Stomp.Protocol.StompFrame.ReadCommandHeader(BinaryReader dataIn
) in c:\dev\NMS.Stomp\src\main\csharp\Protocol\StompFrame.cs:line 208
   at Apache.NMS.Stomp.Protocol.StompFrame.FromStream(BinaryReader dataIn) in c:
\dev\NMS.Stomp\src\main\csharp\Protocol\StompFrame.cs:line 197
   at Apache.NMS.Stomp.Protocol.StompWireFormat.Unmarshal(BinaryReader dataIn) i
n c:\dev\NMS.Stomp\src\main\csharp\Protocol\StompWireFormat.cs:line 121
   at Apache.NMS.Stomp.Transport.Tcp.TcpTransport.ReadLoop() in c:\dev\NMS.Stomp
\src\main\csharp\Transport\Tcp\TcpTransport.cs:line 279 
```

通过谷歌搜索和阅读 Apache.NMS 源代码，我发现它必须对“InactivityMonitor”做一些事情，显然，当我`transport.useInactivityMonitor=false`在连接字符串上指定参数时，我没有得到异常，一切运行良好。

但据我想我了解一切，inactivityMonitor 有一个目的：确保检测到“死”连接并正确清理。

所以肯定有其他问题！我在上面的代码中添加了一个简单的控制台跟踪器，这是不带`transport.useInactivityMonitor=false`参数连接时的输出：

```
Info: Connecting to: tcp://mybroker:61613/
Debug: Opening socket to: mybroker on port: 61613
Debug: Connected to mybroker:61613 using InterNetwork protocol.
Debug: Creating Inactivity Monitor: 1
Debug: StompWireFormat - Marshaling: ConnectionInfo[ConnectionId=ID:mypc-309
6-634896376801461632-0:0, Host=mybroker, MaxInactivityDuration=30000, ReadChec
kInterval=30000, WriteCheckInterval=10000, MaxInactivityDurationInitialDelay=0,
ClientId=ID:mypc-3096-634896376801461632-1:0, Password=, UserName=]
Debug: StompWireFormat - Writing StompFrame[ Command=CONNECT, Properties={ heart
-beat=10000,30000 client-id=ID:mypc-3096-634896376801461632-1:0 accept-versi
on=1.0,1.1 host=mybroker}, Content=]
Debug: StompWireFormat - Received StompFrame[ Command=CONNECTED, Properties={ ve
rsion=1.1 server=ActiveMQ/5.6.0 session=ID:mypc-3096-634896376801461632-1:0
heart-beat=0,0}, Content=System.Byte[]]
Debug: InactivityMonitor[1]: Read Check time interval: 30000
Debug: InactivityMonitor[1]: Initial Delay time interval: 10000
Debug: InactivityMonitor[1]: Write Check time interval: 10000
Debug: InactivityMonitor[1]: Starting the Monitor Timer.
Debug: StompWireFormat - Received StompFrame[ Command=KEEPALIVE, Properties={},
Content=]
Debug: InactivityMonitor[1]: New Keep Alive Received at -> 18:28:00.419
Debug: StompWireFormat - Marshaling: ConsumerInfo[ConsumerId=ID:mypc-3096-63
4896376801461632-0:0:1:1, Destination=queue://MyQueue, Ack Mode=AutoAcknowledge,
 PrefetchSize=1000, MaximumPendingMessageLimit=0, DispatchAsync=True, Selector=,
 SubscriptionName=, NoLocal=False, Exclusive=False, Retroactive=False, Priority=
0, Transformation]
Debug: StompWireFormat - Writing StompFrame[ Command=SUBSCRIBE, Properties={ id=
ID:mypc-3096-634896376801461632-0:0:1:1 receipt=2 activemq.dispatchAsync=Tru
e activemq.maximumPendingMessageLimit=0 activemq.priority=0 ack=client activemq.
prefetchSize=1000 transformation=jms-xml destination=/queue/MyQueue}, Content=]
Debug: StompWireFormat - Received StompFrame[ Command=RECEIPT, Properties={ rece
ipt-id=2}, Content=System.Byte[]]
Debug: StompWireFormat - Received StompFrame[ Command=KEEPALIVE, Properties={},
Content=]
Debug: InactivityMonitor[1]: New Keep Alive Received at -> 18:28:00.508
Debug: CheckConnection: Timer Elapsed at 27/11/2012 18:28:10
Debug: InactivityMonitor[1]: Message sent since last write check. Resetting flag
.
Debug: InactivityMonitor[1]: A receive is in progress or already failed.
Debug: CheckConnection: Timer Elapsed at 27/11/2012 18:28:20
Debug: InactivityMonitor[1]: No Message sent since last write check. Sending a K
eepAliveInfo.
Debug: InactivityMonitor[1]: A read check is not currently allowed.
Debug: InactivityMonitor[1] perparing for another Write Check
Debug: InactivityMonitor[1] Write Check required sending KeepAlive.
Debug: StompWireFormat - Marshaling: KeepAliveInfo[ commandId = 0, responseRequi
red = False,  ]
Debug: StompWireFormat - Writing StompFrame[ Command=KEEPALIVE, Properties={}, C
ontent=]
Debug: CheckConnection: Timer Elapsed at 27/11/2012 18:28:30
Debug: InactivityMonitor[1]: No Message sent since last write check. Sending a K
eepAliveInfo.
Debug: InactivityMonitor[1]: A read check is not currently allowed.
Debug: InactivityMonitor[1] perparing for another Write Check
Debug: InactivityMonitor[1] Write Check required sending KeepAlive.
Debug: StompWireFormat - Marshaling: KeepAliveInfo[ commandId = 0, responseRequi
red = False,  ]
Debug: StompWireFormat - Writing StompFrame[ Command=KEEPALIVE, Properties={}, C
ontent=]
Debug: Exception received in the Inactivity Monitor: Apache.NMS.Stomp.IOExceptio
n: Peer closed the stream.
   at Apache.NMS.Stomp.Protocol.StompFrame.ReadLine(BinaryReader dataIn) in c:\d
ev\NMS.Stomp\src\main\csharp\Protocol\StompFrame.cs:line 284
   at Apache.NMS.Stomp.Protocol.StompFrame.ReadCommandHeader(BinaryReader dataIn
) in c:\dev\NMS.Stomp\src\main\csharp\Protocol\StompFrame.cs:line 208
   at Apache.NMS.Stomp.Protocol.StompFrame.FromStream(BinaryReader dataIn) in c:
\dev\NMS.Stomp\src\main\csharp\Protocol\StompFrame.cs:line 197
   at Apache.NMS.Stomp.Protocol.StompWireFormat.Unmarshal(BinaryReader dataIn) i
n c:\dev\NMS.Stomp\src\main\csharp\Protocol\StompWireFormat.cs:line 121
   at Apache.NMS.Stomp.Transport.Tcp.TcpTransport.ReadLoop() in c:\dev\NMS.Stomp
\src\main\csharp\Transport\Tcp\TcpTransport.cs:line 279
Exception!! ==> Apache.NMS.Stomp.IOException: Peer closed the stream.
   at Apache.NMS.Stomp.Protocol.StompFrame.ReadLine(BinaryReader dataIn) in c:\d
ev\NMS.Stomp\src\main\csharp\Protocol\StompFrame.cs:line 284
   at Apache.NMS.Stomp.Protocol.StompFrame.ReadCommandHeader(BinaryReader dataIn
) in c:\dev\NMS.Stomp\src\main\csharp\Protocol\StompFrame.cs:line 208
   at Apache.NMS.Stomp.Protocol.StompFrame.FromStream(BinaryReader dataIn) in c:
\dev\NMS.Stomp\src\main\csharp\Protocol\StompFrame.cs:line 197
   at Apache.NMS.Stomp.Protocol.StompWireFormat.Unmarshal(BinaryReader dataIn) i
n c:\dev\NMS.Stomp\src\main\csharp\Protocol\StompWireFormat.cs:line 121
   at Apache.NMS.Stomp.Transport.Tcp.TcpTransport.ReadLoop() in c:\dev\NMS.Stomp
\src\main\csharp\Transport\Tcp\TcpTransport.cs:line 279
Debug: TransportFilter disposing of next Transport: MutexTransport
Debug: TransportFilter disposing of next Transport: InactivityMonitor
Debug: TransportFilter disposing of next Transport: TcpTransport
Info: Closing The Session with Id ID:mypc-3096-634896376801461632-0:0:1
Debug: Closing down the Consumer
Error: Error during session close: Apache.NMS.Stomp.IOException: Channel was ina
ctive for too long: tcp://mybroker:61613/
   at Apache.NMS.Stomp.Connection.Oneway(Command command) in c:\dev\NMS.Stomp\sr
c\main\csharp\Connection.cs:line 539
   at Apache.NMS.Stomp.MessageConsumer.DoClose() in c:\dev\NMS.Stomp\src\main\cs
harp\MessageConsumer.cs:line 252
   at Apache.NMS.Stomp.Session.DoClose() in c:\dev\NMS.Stomp\src\main\csharp\Ses
sion.cs:line 307
Info: Closed The Session with Id ID:mypc-3096-634896376801461632-0:0:1 
```

所以我认为我的客户因为太长时间不活动而被经纪人“踢”了。但是我真的不明白为什么，从上面的日志中，我的客户实际上正在发送“keepalive”消息，这是应该的。所以它不应该是不活动的。

我没有选择如何继续处理这个问题。如果有人对此有所了解，将不胜感激！

**更新**：
版本号：

*   库：Apache.NMS.Stomp v1.5.3
*   代理：Apache ActiveMQ 5.6.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-29T21:38:00.557

Try using the stomp **failover** transport. So instead of...

```
var connectionFactory = new ConnectionFactory("stomp:tcp://mybroker:61613"); 
```

use...

```
var connectionFactory = new ConnectionFactory("failover:tcp://mybroker:61613"); 
```

Now instead of the ExceptionListener event being raised and it being up to you to sort out, the transport will automatically reconnect.

FYI: The ConnectionInterruptedListener and ConnectionResumedListener events on the Connection object will be raised should you need to be notified when the disconnect/reconnects occur.

**Also:**

I'd recommend using Session.CreateDurableConsumer rather than just Session.CreateConsumer. This way you won't lose any messages during the disconnect/reconnect period.

Hope this helps someone.

# ruby-on-rails - Rails：表单选择助手具有起始默认值

> ID：13590048
> 
> 赞同：4
> 
> 时间：2012-11-27T17:45:49.900
> 
> 标签：ruby-on-rails, ruby, forms, helpers

我有一个简单的表格。此外，作为表单的一部分，我有一个变量，其中包含所有国家/地区名称的数组/列表。表单很好地选择了列表，但是，它从第一个值开始，我认为它是`Afghanistan`，但是我希望它开始/默认为`United Kingdom`

这是我为国家/地区选择表格的代码。

```
<%= f.select(:country, @country_list.map { |value| [ value, value ] }) %> 
```

我试过没有成功：

```
<%= f.select(:country, @country_list.map { |value| [ value, value ] },['United Kingdom']) %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:52:21.460

您是否尝试过选择的选项

```
:selected =>  "United Kingdom" or your_country_id 
```

不确定语法，但希望它能起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:52:28.787

从[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)中：

> 指定 :selected => value 以使用不同的选择或 :selected => nil 使所有选项保持未选中状态。

因此，如果您希望选择默认值，请尝试以下操作：

```
f.select(:country, @country_list.map { |value| [ value, value ] }, selected: "United Kingdom") 
```

# api - Magento - 修改 wsdl 定义

> ID：13590049
> 
> 赞同：2
> 
> 时间：2012-11-27T17:45:53.863
> 
> 标签：api, magento, wsdl

我需要从 Magentos API 调用之一中获取一个额外的属性。准确的销售订单信息请求。我发现复杂对象的 wsi 文件中的定义（我正在为 Java 使用 WSI 合规性），并且我知道我需要为要在响应中返回的属性添加新的字段定义，但是，如何你能重写 WSI 文件来添加这个新属性吗？

我为我的自定义模块制作了自定义 API，并通过添加新函数扩展了现有 API，例如目录类别模块，但在这种情况下，我只需要返回一个附加属性，覆盖整个 API 似乎有点过头了一行 XML 定义！有人知道重写 wsdl 和 wsi 文件的方法，还是我需要创建自己的函数并扩展现有的东西？

非常感谢任何想法或建议。

# php - Magento 删除产品自定义选项

> ID：13590050
> 
> 赞同：0
> 
> 时间：2012-11-27T17:46:04.120
> 
> 标签：php, magento

您好我需要能够以编程方式删除产品自定义选项。

我做了这个功能：

```
public function removeOptions($option_name, $product_id) {

$product = Mage::getModel('catalog/product')->load($product_id); 
$options = $product->getOptions();
  foreach($options as $option) {

if(strtolower($option->getTitle()) == $option_name) {
    unset($product->getOptions());
    }

  }

} 
```

但我收到此错误“无法在写入上下文中使用方法返回值”

我需要改变什么 unset($product->getOptions()); 至？

杰森

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T19:15:22.780

一般的问题在于代码语法 -`unset($product->getOptions());`告诉 PHP 将名称（变量、数组索引或对象属性）与其存储的值取消链接。但是，方法/函数调用返回的实体没有名称。即它不是变量、对象属性或数组索引，它只是一个纯值。所以调用`unset()`它是没有意义的。

这不是 Magento 错误，它违反了一般的 PHP 语法。

如果您想在 Product 模型中取消设置选项，那么您需要采用其他方式。首先，您需要更改语法。其次，您需要注意 Product 模型并非旨在动态更改自定义选项。

您有两个选择，如何实现所需的功能：

1）如果您只需要删除选项并保存产品，那么您需要更改`unset($product->getOptions());`为

```
$optionsData = $option->getData();
$optionsData['is_delete'] = 1;

$product->setProductOptions(array($option->getId() => $optionsData));
$product->setCanSaveCustomOptions(true);
$product->save(); 
```

再次加载产品将返回您没有选项的产品：

```
$product = Mage::getModel('catalog/product')->load($product_id); 
```

2）如果您需要删除选项并继续使用相同的 Product 模型，那么您需要重写 Product 模型类（[本文](http://magedev.com/2009/06/03/magento-overriding-model-block-or-helper/)解释了如何做到这一点）并添加您的自定义方法以取消设置您想要的属性。这就是重写的类的样子：

```
class MageDev_NewCatalog_Model_Product extends Mage_Catalog_Model_Product {
    public function unsetOption($optionId) {
        unset($this->_options[$optionId];
    }
} 
```

然后，您需要更改`unset($product->getOptions());`为`$product->unsetOption($option->getId())`.

# java - 更简洁的正则表达式？

> ID：13590056
> 
> 赞同：1
> 
> 时间：2012-11-27T17:46:54.190
> 
> 标签：java, c#, html, asp.net, regex

我在 ASP.NET 客户端验证器中使用这个 RegEx：

```
\d{9}|A\d{8}|a\d{8} 
```

它成功地匹配了这些字符串（这是我想要的）：

```
123456789
a12345678
A12345678 
```

*但是*现在RegEx 中有一个我不喜欢的重复部分——***有没有更简洁的方法呢*****？**`A\d{8}|a\d{8}`

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T17:48:44.193

使用正则表达式模式`[aA\d]\d{8}`  

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:48:34.287

使用`\d{9}|[Aa]\d{8}`. `[Aa]`将匹配“A”或“a”。*

# eclipse - 如何在旧版本的 Eclipse 中使用“较新”的 Eclipse 插件？

> ID：13590062
> 
> 赞同：0
> 
> 时间：2012-11-27T17:47:27.957
> 
> 标签：eclipse, plugins, tfs, team-explorer-everywhere

我被迫使用旧版本的 Eclipse（我正在使用 QNX），我必须使用 TFS TEE 插件进行源代码控制。有一个 TEE 更新，我似乎无法使用。

我打开旧插件 zip 找到：site.xml、features 和 plugins 文件夹。我打开我的新插件 zip 找到：artifacts.jar 和 content.jar（加上 features 和 plugins 文件夹）

那么，有没有办法将这种新格式转换为旧格式，以便我可以使用这个插件更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:53:01.893

你没有。

Eclipse 插件是为特定版本的 Eclipse 构建的。它可能适用于更新的版本。

您必须使用旧版本的 TFS TEE，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T19:07:46.223

恐怕不是。较新版本的 Team Explorer Everywhere 对较新版本的 Eclipse 或 SWT 中的功能有很强的依赖性。即使您可以说服 Eclipse 安装和加载较新的插件，当尝试加载类或调用您的 Eclipse 和 SWT 版本中不存在的方法时，它也会经常崩溃。

虽然我们非常重视与旧版本 Eclipse 的向后兼容性，但在某些时候，支持这些旧版本的开发成本变得*非常*昂贵。但是，旧版本的 Team Explorer Everywhere 应该能够与较新的服务器通信。

# php - page.php 在单击 wordpress 时在框架中打开

> ID：13590067
> 
> 赞同：-3
> 
> 时间：2012-11-27T17:47:39.367
> 
> 标签：php, wordpress, wordpress-theming

我正在寻找一种方法来阻止 WordPress 在我单击链接时更改页面。

页面：[http](http://web318.login-11.hoststar.at/ben/kleinraum/wp/) ://web318.login-11.hoststar.at/ben/kleinraum/wp/ ->将鼠标悬停在电影图片上并单击“示例页面”。

他将更改为 page.php。

我希望 page.php 在黑色框架中加载，所以整个事情看起来很流畅。

有什么可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:02:27.863

您在链接的 href 上有一个明确的 URL。当然，这将加载一个新页面。你应该更换：

```
<a href="http://web318.login-11.hoststar.at/ben/kleinraum/wp/?page_id=2">Sample Page</a> 
```

使用虚构的链接，如下所示：

```
<a href="#" id="pagetrigger">Sample Page</a> 
```

然后使用 jQuery 将 .ajax() 函数绑定到 #pagetrigger 上的点击事件，例如。用 ajax 查询的结果填充目标容器。见[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# tridion - 如何使用 SDL Tridion SiteEdit 2009 SP2/3 修复代理错误

> ID：13590070
> 
> 赞同：2
> 
> 时间：2012-11-27T17:47:47.643
> 
> 标签：tridion, tridion-2011, siteedit

当我第一次访问 SiteEdit 的代理网站时，一切都正确加载，我可以启用 SiteEdit 并正常交互。但是，如果我单击页面上的任何链接、执行简单的 F5 刷新或直接为代理站点输入不同的 URL，我会收到错误消息。在错误页面上，我仍然看到启用 SiteEdit 模式的“SiteEdit”按钮，但在它后面（基本上是显示代理页面的框架）我有一个简单的“代理中发生错误”消息。

在内容管理器服务器上，我可以查看应用程序事件日志，发现 SiteEdit 报告的错误是“从传入请求读取错误。对象引用未设置为对象实例。”

如果我关闭浏览器然后加载我试图访问的页面，一切正常。但是，如果我刷新或尝试转到任何其他页面（链接或直接），我会再次收到错误消息。关闭浏览器并重复...

任何人都可以对此有所了解吗？我目前正在将 SiteEdit 2009 SP2 升级到 SP3，这是我们的生产 (SP2) 和沙盒 (SP3) 环境中存在的问题。自然，我们的内容编辑器不使用 SiteEdit（几乎正因为如此），我希望 SP3 升级可能已经解决了它的核心问题（但显然还没有）。

我假设我已经正确配置了 IE9（我的网站在我的 Intranet 区域中，我设置了适当的脚本权限，我允许弹出窗口等），因为它适用于初始渲染，但在同一个浏览器会话中的任何尝试转到另一个页面失败。

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:21:27.693

自从我联系支持部门以来已经有几个星期了，但在与配置和设置的几次来回过程中，他们最终要求我提供对象引用错误的堆栈跟踪。

这导致我与我的一位同事（最近一直在研究 Tridion 的日志记录）一起调整日志记录配置，以便查看堆栈跟踪输出。不幸的是，在向支持报告问题后，我重置了我正在处理的环境（因为我也一直在努力升级到 Tridion 2011），当他们提出这个请求时，SiteEdit 没有按照它的配置记录到应用程序事件日志中（我认为这可能是权限问题）。

为了获得堆栈跟踪，我的同事将 \Tridion\SiteEdit 2009\tridion.logging.config 更改为登录到文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" />
  </configSections>
  <loggingConfiguration name="Logging Application Block" tracingEnabled="true" defaultCategory="General" logWarningsWhenNoCategoriesMatch="false">
    <listeners>
      <add name="Log File" fileName="C:\Tridion\log\SiteEdit.log" formatter="Tridion Text Formatter" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" traceOutputOptions="None" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" />
    </listeners>
    <formatters>
      <add template="{timestamp} &lt;{win32ThreadId}&gt; {message}" type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" name="Trace Text Formatter" />
      <add template="{message}&#xA;&#xA;Component: {keyvalue(component)}&#xA;Errorcode: {keyvalue(errorcode)}&#xA;User: {keyvalue(username)}&#xA;&#xA;{keyvalue(stacktrace)}" type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=2.0.0.0, Culture=neutral, PublicKeyToken=349a39f202fa9b53" name="Tridion Text Formatter" />
    </formatters>
    <categorySources>
      <add switchValue="All" name="General" />
    </categorySources>
    <specialSources>
      <allEvents switchValue="All" name="All Events">
        <listeners>
          <add name="Log File" />
        </listeners>
      </allEvents>
      <notProcessed switchValue="All" name="Unprocessed Category" />
      <errors switchValue="All" name="Logging Errors &amp; Warnings" />
    </specialSources>
  </loggingConfiguration>
</configuration> 
```

一旦将日志记录配置为写入文件，我们就可以看到异常的堆栈跟踪：

> 读取传入请求时出错。
> 你调用的对象是空的。
> 
> 组件：SiteEdit.Proxy
> 错误代码：0
> 用户：NT AUTHORITY\IUSR
> 
> StackTrace 信息详细信息：
> 在 Tridion.Web.UI.SiteEdit.Proxy 的 Tridion.Web.UI.SiteEdit.Proxy.Helper.CopyRequestCookies(HttpRequest request, CookieContainer cookieContainer)
> 。
> Tridion.Web.UI.SiteEdit.Proxy.Request.RequestFactory.CreateRequest(HttpRequest request)的Request.RequestFactory.CreateRequest(HttpRequest 请求)
> Tridion.Web.UI.SiteEdit.Proxy.RedirectModule.context_BeginRequest(Object sender, EventArgs e)

由于对象引用错误出现在名为“CopyRequestCookies”的方法中，我们决定查看我们的 cookie（这是有道理的，因为关闭并重新打开浏览器导致 SiteEdit 再次工作，但仅针对单个请求）。

果然，我们有一个奇怪的 cookie，它被用来简单地验证用户是否打开了 cookie。javascript代码（我认为我的开发人员从网上某处获得）是：

```
document.cookie = 'CookieTest';
if (document.cookie == "") {
    $("form").append('<div class="master-error"><p>Cookies are not enabled</p></div>');
} 
```

注意 cookie 没有值（典型的 JS 是`document.cookie = 'name=value';`）。我们认为在代理逻辑中，它将为代理站点提交的 cookie 传递到暂存站点，有一些代码没有预期 cookie 没有价值（在 Fiddler 中，您可以看到 cookie 只是传递作为“CookieTest;”），但没有进行防御性编码来处理这种情况。

通过更改我们的代码以将值应用于 cookie `document.cookie = 'CookieTest=true'`，SiteEdit 代理可以正常工作。

# jquery - jQuery调整大小不触发和下拉丢失

> ID：13590073
> 
> 赞同：1
> 
> 时间：2012-11-27T17:47:54.673
> 
> 标签：jquery, css, drop-down-menu, resize, window

此脚本适用于带有下拉菜单的无序列表。第二部分控制在平板电脑/移动设备上查看时的包含元素。我遇到的问题是窗口调整大小事件没有在项目中一致地触发。

此外，当从一个小窗口大小的浏览器转到一个更大的大小时，下拉菜单突然无法摆脱包含的 Nav 元素。

```
$(document).ready(function () {
$('ul.primary li').click(function () {
    var a = this;
    if ($('ul', this).is(':visible')) {
        $('ul', this).slideUp(function () {
            $(a).removeClass('active')
        })
    } else {
        $('ul.drop').slideUp();
        $('ul.primary li').removeClass('active');
        $('ul', this).slideDown();
        $(a).addClass('active')
    }
});
$('body').click(function (a) {
    if (!$(a.target).is('a')) {
        $('ul.drop').slideUp();
        $('ul.primary li').removeClass('active')
    }
});
$(function () {
    $('.mobile-nav').click(function (e) {
        $('.primary').slideToggle(150, "swing");
        e.stopPropagation()
    });
    $(window).resize(function() {
        $('ul.drop').slideUp();
        $('ul.primary li').removeClass('active')
    });
})
}); 
```

这是标记：

```
<div class="nav">
    <div class="mobile-nav">Navigation</div>
        <ul class="primary">
            <li><a href="#link">Link</a></li>
            <li><a class="has-drop">Link w/ Children <span></span></a>
            <ul class="drop">
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
            </ul>
            </li>
            <li><a class="has-drop" href="#link">Link w/ Children <span></span></a>
            <ul class="drop">
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
                <li><a href="#link">Link</a></li>
            </ul>
            </li>
            <li><a href="#link">Link</a></li>
            <li><a href="#link">Link</a></li>
        </ul>
        <div class="clear"></div>
    </div>
</div> 
```

和CSS：

```
.clear { 
clear:both; }
.nav {
display:block;
width:100%; 
background:#222; }

.mobile-nav {
visibility: hidden;
padding: 0;
height: 0px; }

ul.primary {
background: #222;
list-style: none;
height: 45px;
min-width: 350px;
position: relative;
margin: 10px 0 0 0;
padding: 0;
float: right; }

ul.primary li {
    float: left;
    display: inline;
    font-weight: bold;
    font-size: 13px;
    max-width: 100%; }

    ul.primary li a, ul.drop li a {
        display: block;
        padding: 10px;
        color: white;
        text-decoration: none; }

ul.drop li a { padding: 5px; }

ul.primary li a:hover, ul.drop li a:hover { background: #444; }

ul.primary li, ul.drop li { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; }

ul.primary li.active > a { background: #444; }

a.has-drop { cursor: pointer; }

a.has-drop span {
    margin: -8px 0 0 5px;
    width: 10px;
    height: 5px;
    float: right;
    background: url("drop-caret.png") no-repeat center right; }

li.active > a.has-drop span {
margin: -8px 0 0 5px;
width: 10px;
height: 5px;
float: right;
background: url("drop-caret-up.png") no-repeat center right; }

ul.drop {
display: none;
z-index: 999;
position: relative;
margin: 0;
padding: 0;
min-width: 100%;
width: auto;
width: auto;
list-style: none;
background: #242424;
border: none; }

ul.drop li {
    float: none;
    font-weight: normal; }

@media only screen and (max-width: 767px) {
nav {
display: block;
width: 100%;
border: 0px solid white;
padding: 10px 0; }

.mobile-nav {
visibility: visible;
height: auto;
margin: 0 5px;
padding: 10px 0;
font-weight: bold;
color: white;
cursor: pointer;
background: url("mobile-nav.png") no-repeat center right; }

ul.primary {
float: none;
display: none;
height: auto;
margin: 0;
padding: 0; }

ul.primary li {
    display: block;
    float: none;
    border-bottom: 1px solid #444; }

    ul.primary li:last-child { border-bottom: none; }

ul.drop li, ul.primary li.active { border-bottom: none; }

ul.drop li a {
text-indent: 15px;
font-size: 12px;
font-style: italic; }

a.has-drop span {
margin: 5px 0 0 5px;
width: 10px;
height: 5px;
float: right;
background: url("drop-caret.png") no-repeat center right; }

li.active > a.has-drop span {
margin: 5px 0 0 5px;
width: 10px;
height: 5px;
float: right;
background: url("drop-caret-up.png") no-repeat center right; }
} 
```

# java - 将 system.out.print 放入框架 java [netbeans]

> ID：13590076
> 
> 赞同：0
> 
> 时间：2012-11-27T17:48:07.073
> 
> 标签：java, netbeans

第一个我是新手，英语不好，
是否可以将 system.out.print 放入框架中？假设我想在文本字段中查看我的所有输出打印或类似的东西。我可以将输出打印放在文本字段中，但它只是 settext 一个进程。我想在文本字段中记录我的所有输出，而不仅仅是一个输出。
对不起，如果它是一个虚拟问题，谢谢你在
我有代码之前的回答，我想把我所有的输出放在 text2(textfield)

```
 this is my whole code:

import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JTextPane;
import javax.swing.text.BadLocationException;
import javax.swing.text.Document;
import org.jpos.iso.BaseChannel;
import org.jpos.iso.ISOException;
import org.jpos.iso.ISOMsg;
import org.jpos.iso.ISOPackager;
import org.jpos.iso.ISORequestListener;
import org.jpos.iso.ISOServer;
import org.jpos.iso.ISOSource;
import org.jpos.iso.ServerChannel;
import org.jpos.iso.channel.ASCIIChannel;
import org.jpos.iso.packager.GenericPackager; 
import jpos.JPosServer;

public class server extends javax.swing.JFrame {

   public server() {
    initComponents();
}

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

    mulai = new javax.swing.JButton();
    text = new javax.swing.JScrollPane();
    text1 = new javax.swing.JTextArea();
    jScrollPane1 = new javax.swing.JScrollPane();
    JTextPane = new javax.swing.JTextPane();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

    mulai.setText("Star Server");
    mulai.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            mulaiActionPerformed(evt);
        }
      });
      getContentPane().add(mulai, new org.netbeans.lib.awtextra.AbsoluteConstraints(129, 66, -1, -1));

      text1.setColumns(20);
      text1.setRows(5);
      text.setViewportView(text1);

      getContentPane().add(text, new org.netbeans.lib.awtextra.AbsoluteConstraints(16, 96, 350, 130));

      jScrollPane1.setViewportView(JTextPane);

      getContentPane().add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 250, 330, 170));

    pack();
}// </editor-fold>

  private void log(String msg) {
    JTextPane guiConsole = new JTextPane();
  Document doc = guiConsole.getDocument();
  try {
      doc.insertString(doc.getLength(), msg + "\r\n", null);
   } catch (BadLocationException e) {}
  }

  private void setText2Text(String msg) {
  String toAppend = text1.getText();
  toAppend = toAppend + "/n" + msg;
  text1.setText(toAppend);
  }

private void mulaiActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:

}

   public boolean process1(ISOSource isoSrc, ISOMsg isoMsg) {
   try {
         log("Server menerima koneksi dari ["+((BaseChannel)isoSrc).getSocket().getInetAddress().getHostAddress()+"]");

        if (isoMsg.getMTI().equalsIgnoreCase("1800")) {
                acceptNetworkMsg(isoSrc, isoMsg);
        }
    } catch (IOException ex) {
        Logger.getLogger(JPosServer.class.getName()).log(Level.SEVERE, null, ex);
    } catch (ISOException ex) {
        Logger.getLogger(JPosServer.class.getName()).log(Level.SEVERE, null, ex);
    }
    return false;
}

    private void acceptNetworkMsg(ISOSource isoSrc, ISOMsg isoMsg) throws ISOException, IOException {

      log("Accepting Network Management Request");

    ISOMsg reply = (ISOMsg) isoMsg.clone();
    reply.setMTI("1810");
    reply.set(39, "00");
    isoSrc.send(reply);
} 

/**
 * @param args the command line arguments
 */
public static void main(String args[]) throws ISOException {

    String hostname = "localhost";
    int portNumber = 1234;

    // membuat sebuah packager
    ISOPackager packager = new GenericPackager("src/jpos/iso93ascii.xml");
    // membuat channel
    ServerChannel channel = new ASCIIChannel(hostname, portNumber, packager);
    // membuat server
    ISOServer server = new ISOServer(portNumber, channel, null);
    server.addISORequestListener(new JPosServer());
    new Thread(server).start();

    System.out.println("Server siap menerima koneksi pada port [" + portNumber+"]");

    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(server.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(server.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(server.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(server.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new server().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JTextPane JTextPane;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JButton mulai;
private javax.swing.JScrollPane text;
private javax.swing.JTextArea text1;
// End of variables declaration 
```

}

感谢您解决我的问题 yogendra，我非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:02:20.960

要在您的 GUI 上模拟控制台，您可能需要一个`JTextPane`因为`JTextField`只能显示一行文本。您需要创建自己的*“打印”*到文本窗格的方式（您不能使用 System.out.println 打印到 GUI）。

**代码示例：**

假设你有这个作为目标：

```
JTextPane guiConsole = new JTextPane(); 
```

你可以像这样创建一个函数：

```
private void log(String msg) {
    Document doc = guiConsole.getDocument();
    try {
        doc.insertString(doc.getLength(), msg + "\r\n", null);
    } catch (BadLocationException e) {}
} 
```

现在，无论您在哪里`System.out.println("Hello");`打印到控制台，只需调用`log("Hello");`以将相同的文本打印到您的文本窗格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:54:33.237

在每个 text2.setText() 之前，您可以先获取文本，然后将新字符串附加到原始字符串中。

```
String toAppend = text2.getText();
toAppend = toAppend + "/n" + "Your new string message here!";
text2.setText(toAppend); 
```

更新：

```
private void setText2Text(String msg) {
    String toAppend = text2.getText();
    toAppend = toAppend + "/n" + msg;
    text2.setText(toAppend);
} 
```

然后在您的代码中，替换

```
text2.setText("Your message here") 
```

至

```
setText2Text("Your message here") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:01:13.570

使用方法本身不断更新`text`附加文本。`setText`用于`getText`检索现有文本并将新文本附加到现有文本以新行分隔。

**用于`System.lineSeparator()`在下面追加新行：**

```
 String text = text2.getText();
  text= text + System.lineSeparator() + "New line text";//<--put the text here
  text2.setText(text);  //<--update the text field value with modified text 
```

编辑：

您正在线程内初始化服务器。尝试在外部实例化它并使用它来设置文本：

```
 final server myServer = new server();
 /* Create and display the form */
 java.awt.EventQueue.invokeLater(new Runnable() {
    public void run() {
        myServer.setVisible(true);
    }
  });

  JTextArea text1 = myServer.getText1().
  String text = text1.getText();
  text= text + System.lineSeparator() + "New line text";//<--put the text here
  text1.setText(text);  //<--update the text field value with modified text 
```

`text1`还要在你的类中定义一个 getter 方法：

```
 public JTextArea getText1(){
     return this.text1;
  } 
```

# django - Django：ForeignKey limit_choices_to 等于当前对象的客户端

> ID：13590079
> 
> 赞同：7
> 
> 时间：2012-11-27T17:48:22.817
> 
> 标签：django, django-models

鉴于这两个模型，我希望我的 url FK（在 ClientKeyword 中）只显示其客户端等于当前 ClientKeyword 客户端的 url。

我应该在 limit_choices_to 中添加什么？

现在它看起来像这样：

```
class ClientUrl(models.Model):
    client = models.ForeignKey(UpstreamClientModel)
    url = models.URLField(unique=True, null=False)
    active = models.BooleanField(default=True)

    def __unicode__(self):
        return self.url

    class Meta:
        verbose_name = 'url'

KEYWORD_TYPES = (
    ('MN', 'Money'),
    ('BR', 'Brand'),
    ('LT', 'Long Tail'),
)

class ClientKeyword(models.Model):
    client = models.ForeignKey(UpstreamClientModel)
    kw_type = models.CharField("keyword type", max_length=2, 
                choices=KEYWORD_TYPES, default='LT')
    keyword = models.CharField(max_length=150, unique=True)
    # TODO: keyword parent ManyToManyField("self")
    url = models.ForeignKey(ClientUrl, limit_choices_to={'client': client}) 
```

我可以进行迁移并且 django 没有抱怨，但是当我尝试从管理界面添加新关键字时，我得到以下回溯：

```
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/contrib/admin/options.py" in wrapper
  366\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/contrib/admin/sites.py" in inner
  196\.             return view(request, *args, **kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/utils/decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/transaction.py" in inner
  209\.                 return func(*args, **kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/contrib/admin/options.py" in add_view
  932\.         ModelForm = self.get_form(request)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/contrib/admin/options.py" in get_form
  459\.         return modelform_factory(self.model, **defaults)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/forms/models.py" in modelform_factory
  407\.     return form_metaclass(class_name, (form,), form_class_attrs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/forms/models.py" in __new__
  206\.                                       opts.exclude, opts.widgets, formfield_callback)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/forms/models.py" in fields_for_model
  164\.             formfield = formfield_callback(f, **kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/contrib/admin/options.py" in formfield_for_dbfield
  107\.                 formfield = self.formfield_for_foreignkey(db_field, request, **kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/contrib/admin/options.py" in formfield_for_foreignkey
  168\.         return db_field.formfield(**kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/models/fields/related.py" in formfield
  1005\.             'queryset': self.rel.to._default_manager.using(db).complex_filter(self.rel.limit_choices_to),
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/models/query.py" in complex_filter
  660\.             return self._filter_or_exclude(None, **filter_obj)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/models/query.py" in _filter_or_exclude
  642\.             clone.query.add_q(Q(*args, **kwargs))
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/models/sql/query.py" in add_q
  1250\.                             can_reuse=used_aliases, force_having=force_having)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/models/sql/query.py" in add_filter
  1185\.                 connector)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/models/sql/where.py" in add
  69\.             value = obj.prepare(lookup_type, value)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/models/sql/where.py" in prepare
  320\.             return self.field.get_prep_lookup(lookup_type, value)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/models/fields/related.py" in get_prep_lookup
  137\.             return self._pk_trace(value, 'get_prep_lookup', lookup_type)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/models/fields/related.py" in _pk_trace
  210\.         v = getattr(field, prep_func)(lookup_type, v, **kwargs)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/models/fields/__init__.py" in get_prep_lookup
  310\.             return self.get_prep_value(value)
File "/Users/mirkocrocop/.virtualenvs/upstream_backend/lib/python2.7/site-packages/django/db/models/fields/__init__.py" in get_prep_value
  537\.         return int(value)

Exception Type: TypeError at /admin/clients/clientkeyword/add/
Exception Value: int() argument must be a string or a number, not 'ForeignKey' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-28T04:45:28.307

更好的是：更“[官方](https://docs.djangoproject.com/en/1.5/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey)”的方法是`formfield_for_foreignkey()`在模型的管理类中覆盖。

```
class ClientKeywordAdmin(admin.ModelAdmin):
    def get_form(self, request, obj=None, **kwargs):
        # store the model instance for later
        request.obj = obj
        return super(ClientKeywordAdmin, self).get_form(request, obj, 
                                                        **kwargs)

    def formfield_for_foreignkey(self, db_field, request=None, **kwargs):
        if db_field.name == 'url':
            # set the query set to whatever you like
            kwargs['queryset'] = request._obj.client.clienturls.all()
        return super(ClientKeywordAdmin, 
                     self).formfield_for_foreignkey(request, obj, **kwargs) 
```

# c++ - 函数类型用于什么？

> ID：13590084
> 
> 赞同：14
> 
> 时间：2012-11-27T17:48:35.747
> 
> 标签：c++, function, function-pointers

给定以下两个`typedef`s：

```
typedef void (*pftype)(int);

typedef void ftype(int); 
```

我知道第一个定义`pftype`为指向一个函数的指针，该函数接受一个`int`参数并且不返回任何内容，第二个定义`ftype`为一个接受一个参数并且不返回任何内容的函数类型`int`。但是，我不明白第二个可能用于什么。

我可以创建一个匹配这些类型的函数：

```
void thefunc(int arg)
{
    cout << "called with " << arg << endl;
} 
```

然后我可以使用每个创建指向该函数的指针：

```
int main(int argc, char* argv[])
{
    pftype pointer_one = thefunc;
    ftype *pointer_two = thefunc;

    pointer_one(1);
    pointer_two(2);
} 
```

使用函数类型时，我必须指定我正在创建一个指针。使用函数指针类型，我没有。两者都可以互换用作参数类型：

```
void run_a_thing_1(ftype pf)
{
    pf(11);
}

void run_a_thing_2(pftype pf)
{
    pf(12);
} 
```

那么，函数类型有什么用呢？函数指针类型是不是覆盖了case，做起来更方便？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T18:06:08.847

除了您指出的用途（指针的基础类型或对函数的引用）外，函数类型最常见的用途是在函数声明中：

```
void f(); // declares a function f, of type void() 
```

可能想要使用的人`typedef`：

```
typedef void ft(some, complicated, signature);
ft f;
ft g;

// Although the typedef can't be used for definitions:
void f(some, complicated, signature) {...} 
```

并作为模板参数：

```
std::function<void()> fn = f;  // uses a function type to specify the signature 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T18:30:07.063

还要考虑这个

```
template<typename T>
void f(T*); 
```

由于我们希望它接受函数指针，因此通过模式匹配 T 成为函数类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-22T11:15:24.340

我只想指出，我认为`function_t *fptr ...`比`funcptr_t fptr...`. 第一种形式声明它必须是指针类型，这比任何东西都清楚，包括名称`funcptr_t`。

# android-fragments - 片段的上滑动画

> ID：13590088
> 
> 赞同：2
> 
> 时间：2012-11-27T17:48:44.660
> 
> 标签：android-fragments

如何实现片段的上滑动画？我有一个包含两个片段 A 和 B 的活动。A在左边，B在右边。最初只有 B 是可见的。B上有一个按钮。当点击时，片段A应该从屏幕底部向上滑动。再次单击按钮时，片段 A 应该向下滑动。如果片段是如何实现的这个动画？

# javascript - jQuery/Javascript：等待动画完成

> ID：13590089
> 
> 赞同：0
> 
> 时间：2012-11-27T17:48:46.130
> 
> 标签：javascript, jquery

让我先说我是 Javascript 新手，而不是编程新手。我调用`fadeOut`这样的 jQuery 对象：

```
$(x).fadeOut('fast'); 
```

我还有其他事情会淡出淡出，但我需要它们相互等待，我不一定知道有多少人会这样做。`x`是来自数组的字符串，其中包含淡入或淡出的项目。在我的第一次尝试中，我`fadeOut`像这样使用了回调函数：

```
$(x).fadeOut('fast', function(){ foo(modifiedArray); }) 
```

我想要的方法在哪里`foo`， modifiedArray 是数组 minus `x`。但这仍然没有让它等待，所以接下来我尝试了：

```
$(x).fadeOut('fast');
while( $(x).css('display') != 'none' ){}
foo(modifiedArray); 
```

但循环永远不会结束。如何让动画在我`foo(modifiedArray)`再次调用之前等待？

编辑：这是完整的代码

```
function animateElements(elements){
if (elements.length == 1){
    var x = elements[0];
    $(x).fadeIn('slow');
}
else{
    var x = elements.pop();
    $(x).fadeOut('fast');
    while(  $(x).css('display') != 'none' ){}
    animateElements(elements);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:58:22.070

见这里：http: [//jsfiddle.net/3cn3z/3/](http://jsfiddle.net/3cn3z/3/)

```
function sequentialFade(items, duration) {
    var arr = 'shift' in items ? items : items.get();
    var item = arr.shift();

    $(item).fadeOut(duration, function(){
        sequentialFade(arr, duration);
    });
}

sequentialFade($("div"), "slow"); 
```

如果您觉得这需要解释，请告诉我。

这也可以写成一个小的 jQuery 插件，如下所示：http: [//jsfiddle.net/3cn3z/1/](http://jsfiddle.net/3cn3z/1/)

```
(function($) {
    $.fn.seqFade = function(duration) {
        var items = this.get();

        (function fadeStep(){
            var item = items.shift();
            $(item).fadeOut(duration, fadeStep);
        })();

        return this;
    };
})(jQuery); 
```

并使用如下：

```
$("div").seqFade("slow"); 
```

更进一步，我们可以将插件泛化为使用任何内置的 jQuery 动画功能：http: [//jsfiddle.net/3cn3z/5/](http://jsfiddle.net/3cn3z/5/)

```
(function($) {
    $.fn.seqAnim = function(animFunc, duration, callback) {
        var items = this.get();
        var me = this;
        (function animStep(){
            var item = items.shift();

            if (item == undefined && callback != undefined)
                callback.call(me)
            else
                $(item)[animFunc](duration, animStep);
        })();

        return me;
    };
})(jQuery); 
```

像这样使用：

```
$("div").delay(500).seqAnim("slideToggle", "slow", function(){
    this.delay(500).seqAnim("fadeIn", 500);
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:12:16.380

将您的代码更正为：

```
 function animateElements(elements) {
        if (elements.length == 1) {
            var x = elements[0];
            $(x).fadeOut('slow');  // Should this be fade out?
        }
        else {
            var x = elements.pop();
            $(x).fadeOut('slow', function () { animateElements(elements) });
        }
    } 
```

您的代码存在三个问题。首先，您使用的是循环而不是回调函数。其次，回调函数必须是一个函数——即使它是匿名的。第三，你有`FadeIn()`而不是`fadeOut()`when `length == 1`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T18:12:36.973

为了完整起见。在您的代码中，您可以修复以下问题。

1.  使用`.fadeIn()`而不是`.fadeOut()`.

    ```
    $(x).fadeIn('slow');
      ---^--- 
    ```

2.  您可能想要使用`.shift()`而不是`.pop()`从左到右遍历数组，而不是从右到左。

    ```
    var x = elements.pop();
                  ---^--- 
    ```

3.  `.fadeOut()`在避免强制检查元素样式的完整回调中调用递归步骤。

    ```
    $(x).fadeOut('fast');
      ---^---
    while(  $(x).css('display') != 'none' ){}
    animateElements(elements); 
    ```

4.  用作`elements.length == 0`基本案例。这将提高可读性。

    ```
    if (elements.length == 1) {
      --^-- 
    ```

最后，代码将如下所示：

```
function animateElements(elements) {
  if (elements.length) {
    var x = elements.shift();
    $(x).fadeOut('fast', function(){
      animateElements(elements);
    });
  }
} 
```

[现场观看](http://jsfiddle.net/eJ8fP/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T18:25:01.473

试试这个：

```
function animateElements(elements) {
    if (elements.length == 1) {
        var x = elements[0];
        $(x).fadeIn('slow');
    }
    else {
        var x = elements.pop();
        $(x).fadeOut('fast', function() {
            animateElements(elements);
        });
    }
} 
```

[在这里演示](http://jsfiddle.net/PGea3/1/)

# sql - T-SQL 代码不会提供所需的输出

> ID：13590090
> 
> 赞同：0
> 
> 时间：2012-11-27T17:48:47.680
> 
> 标签：sql, sql-server, sql-server-2008, tsql

```
SELECT 
Counting = ISNULL(COUNT(A.Numbers), 0),
B.Date AS DateX
From Schema1.Table A INNER JOIN Schema2.Table B
ON A.xyz=B.xyz
Where B.Date = GetDate()
Group by B.Date 
```

有时，`B.Date`不会有今天的日期。我仍然希望使用`Counting = 0 and DateX = Todays date`.

我该怎么做？

谢谢

**按大众需求**编辑****

 **```
A.Numbers = 123;456;789;012,...etc
B.Date = 2012-11-24, 2012-11-24,-212-11-24,2012-11-26 
```

所以算了`2012-11-24 = 3`，`2012-11-26 = 1`但是当我设置`B.Date`为`2012-11-25` 我想显示`Counting = 0`时没有输出`B.Date = 2012-11-25`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:54:12.767

摆脱您的 where 子句并将您的选择更改为

```
Counting = (Case when B.Date = GETDATE() then ISNULL(COUNT(A.Numbers),0) else 0 end) 
```**

# integration-testing - 如何在 maven-failsafe 中运行非 Java 测试？

> ID：13590094
> 
> 赞同：5
> 
> 时间：2012-11-27T17:49:09.430
> 
> 标签：integration-testing, exec-maven-plugin, maven-failsafe-plugin

我正在使用 Maven 构建一个 webapp 项目，并使用 maven-failsafe-plugin 进行集成测试。货物 Glassfish3x 容器开始绑定到预集成测试阶段，并作为后集成测试阶段的一部分停止。

但是，我的集成测试在基于 pyUnit 的脚本中。我尝试使用 exec-maven-plugin 运行它们，并通过 maven-bdd-plugin 使用 nosetests/freshen。

两种方法都可以正常运行脚本，但如果测试失败，它们会立即使 Maven 构建失败。Maven 不运行 post-integration-test 阶段，留下一个正在运行的货柜，这会导致任何其他运行测试的尝试失败。

如何配置 maven-failsafe 以将失败的 exec 解释为失败的测试，以便它完成工作并运行集成测试后阶段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-09T01:41:16.520

不确定它是否回答了您的问题，但是：我们放弃了这种方法。我们有类似的情况：maven 后端和 angular 前端。理论上这可能是可能的，但这种集成永远不会像对 java 或 python 工具的原生支持那样好。你应该始终使用最好的工具来完成这项工作。那为什么要限制自己？为什么要由 maven 运行外国测试？您的 CI 服务器可以触发 2 个不同的作业。如果您在开发机器上进行一键式完整测试，然后创建 shell 脚本 - 会更容易

# c# - 更正 PInvoke 签名以使用带有 C# 保留内存的嵌套结构？

> ID：13590097
> 
> 赞同：2
> 
> 时间：2012-11-27T17:49:15.423
> 
> 标签：c#, c++, struct, pinvoke

我有一个我正在尝试使用的非托管 DLL，它使用了一些嵌套结构，并在它们的末尾保留了成员。我在将它们转换为 C# 时遇到问题。

我试图将代码精简到必要的部分。ParentStruct 具有三个不同子结构的四个实例的成员。所有这三个不同的子结构都有 void* 数组来保留内存以供将来使用。

我尝试将保留值作为 IntPtrs，我尝试打开不安全代码并使用 fixed 关键字（并将它们更改为整数）。我已经尝试在结构的末尾实际布置适当数量的连续 IntPtrs。似乎没有任何效果。

在其中一些情况下，我会收到一条错误消息（一条无信息的消息，表示某个线程的某个地址存在错误）。但是，大多数情况下，应用程序会在没有错误消息的情况下死掉。我确定那是因为我在这里搞乱了非托管内存。

仅供参考，实际的 Pinvoke 有一个类似的签名

```
[DllImport("MyDll.dll", SetLastError = true, CallingConvention = CallingConvention.StdCall)]
internal static extern void UseStructs([In,Out] ref ParentStruct parent); 
```

那么在 C# 中声明这些结构以便我可以使用它们的正确方法是什么？

```
typedef struct
{
    ChildStruct1           childOne;
    ChildStruct2           childTwo;
    ChildStruct2           childTwoB;
    ChildStruct3           childThree;

#if defined K_64_BIT
    /// Reserved for future implementation
    void*          Reserved[15];
#elif defined K_32_BIT
    /// Reserved for future implementation
    void*          Reserved[14];
#endif

} ParentStruct;

typedef struct
{

    bool  Valid;
    float x;
    float y;

    /// Reserved for future implementation.
    void*               Reserved[16];
} ChildStruct3;

typedef struct
{

    bool          Found;
    XYPairFloat xyPair;

    /// Reserved for future implementation.
    void*         Reserved[16];
} ChildStruct2;

typedef struct
{
    unsigned char* imageData;
    RectInt      rectInt;

#if defined QUICK_LINK_64_BIT
    /// Reserved for future implementation
    void*          Reserved[14];
#elif defined QUICK_LINK_32_BIT
    /// Reserved for future implementation
    void*          Reserved[12];
#endif

} ChildStruct1;

typedef struct
{

    int x;
    int y;
    int width;
    int height;
} RectInt;

typedef struct
{
    float x;
    float y;
} XYPairFloat; 
```

**编辑：**我想我已经更接近了，因为我现在收到一条至少是人类可读的错误消息。但它仍然不起作用。我在 Reserved 成员上使用了 fixed 关键字，并在成员上适当地设置了属性的 SizeConst 部分。我所做的其他一切都只是基本的 pinvoke 工作。但是，我收到了错误：

> 此字段的类型定义具有布局信息，但托管/非托管类型组合无效或不可编组。

关于 ChildStruct1 childOne 成员，这是第一个成员，所以我冒险猜测它也适用于其他成员。想法？

**编辑 2：**根据 Mark Heath 的要求，这是我用于 ChildStruct1 的实际定义：

```
[StructLayout(LayoutKind.Sequential)]
internal unsafe struct ChildStruct1
{
    [MarshalAs(UnmanagedType.LPStr)]
    public string imageData;
    public RectInt rectInt;
    [MarshalAs(UnmanagedType.LPArray, SizeConst=12)]
    public fixed int Reserved[12];
} 
```

**编辑3：**我做了更多的挖掘。如果我注释掉 Reserved 成员，我得到的那个错误就会消失。显然它不起作用。但我猜，那个特定的错误是由我定义该成员的方式引起的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:39:21.933

`IntPtr`您可以尝试根据[Essential P/Invoke](http://www.codeproject.com/Articles/12121/Essential-P-Invoke)将最后一个值更改为数组

所以改变：

```
[MarshalAs(UnmanagedType.LPArray, SizeConst=12)]
public fixed int Reserved[12]; 
```

到：

```
[MarshalAs(UnmanagedType.ByValArray, SizeConst = 12)]
public IntPtr[] Reserved; 
```

# css - 响应式布局 - 导航元素定位

> ID：13590099
> 
> 赞同：1
> 
> 时间：2012-11-27T17:49:21.210
> 
> 标签：css, layout, web, responsive-design, nav

我刚刚开始使用响应式布局，并且有一个与导航元素相关的特定问题。

如果我有这样的代码块：

```
<nav>
    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
    </ul>
</nav>
<nav>
    <ul>
        <li>4</li>
        <li>5</li>
        <li>6</li>
    </ul>
</nav> 
```

在高分辨率计算机屏幕上查看时，我们会看到导航创建的 2x3 网格。即，每个导航将位于其自己的“行”上，并且每个导航的所有三个元素都将位于彼此的右侧或左侧。

在响应式布局中，如果窗口的大小显着缩小到 iPhone 分辨率，假设比例正确，导航元素是否会笨拙地改变，从而使视图看起来像：

```
<nav>
    <ul>
        <li>1</li>
        <li>2</li>
    </ul>
</nav>
<nav>
    <ul>
        <li>3</li>
    </ul>
</nav>
<nav>
    <ul>
        <li>4</li>
        <li>5</li>
    </ul>
</nav>
<nav>
    <ul>
        <li>6</li>
    </ul>
</nav> 
```

我只是在寻找对这种新布局实践如何专门用于导航元素的高级理解。我希望为我正在制作的网站创建类似的东西，但如果发生这种情况，我想创建代码，这样我将拥有高分辨率的 2x3 矩阵和低分辨率的 3x2，移动到 6x1极小的分辨率。

如果是这种情况，有没有办法为特定的屏幕分辨率指定不同的 html？我知道我们可以为不同的分辨率指定特定的 CSS，但在这种情况下，我不确定更改 CSS 是否能满足我的需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:00:14.247

根据您的描述，我了解到您`ul`的 s 具有块显示，而`li`s 具有内联显示。这会导致 nav/ul 在其周围有一个矩形块，从而避免发生 2x3 布局。正如 Jrod 在评论中指出的那样，您真正想要的是将所有 li 项目包装起来的单个矩形块，并让浏览器排列它们。

您可以通过将所有 lis 放在一起来实现这一点，或者通过将 ul 和 nav 显示属性更改为内联来更好地实现这一点，同时在两个 nav 周围放置一个容器以确保它们最终按块分组。

```
div.container { display: block; }
nav, ul, li { display: inline; } 
```

请注意，此解决方案还可能会创建一个包含两个空单元格的 4x2 网格，因此请确保将外部块限制为三个 lis 的宽度：

```
li { width: 150px; /* or whatever */ }
div.container { max-width: 450px; /* three lis at most */ } 
```

# android - 在Android Activity onCreate中使用数据预填充组件而不会出现空指针异常

> ID：13590100
> 
> 赞同：0
> 
> 时间：2012-11-27T17:49:26.350
> 
> 标签：android, nullpointerexception, android-viewpager, oncreate

我有一个带有 ViewPager 的 FragmentActivity。在那个 ViewPager 里面总共有 3 个不同的视图。

用户选择包含信息的行。一旦被选中，FragmentActivity 将在 ViewPager 的视图中加载和呈现数据。

我希望预先加载数据，所以当活动最终出现时，一切都在正确的小部件中。我选择在 FragmentActivity 的 onCreate 方法中执行此操作。但是，当我尝试访问 ViewPager 中视图上的任何小部件时，我会收到 NullPointerException。

我不知道如何解决这个问题。

按要求：

这个代码块，处理调用 FragmentActivity - “co”是一个序列化的对象，包含将显示的信息。

```
 TimesheetEdit ts = new TimesheetEdit();     
    Intent result = new Intent(this, ts.getClass());
    result.putExtra("ClientObject", this.co);

    if (v != null) {
        result.putExtra("key", v.getId());
    }
    startActivityForResult(
            result,
            viewType == getResources().getInteger(R.integer.TIMESHEET) ? getResources()
                    .getInteger(R.integer.TIMESHEET) : getResources()
                    .getInteger(R.integer.EXPENSES)); 
```

下一组代码是 Fragmentactivity 的 onCreate 方法。最后的 Log.i 仅用于测试目的，但这也是我的 NullPointerException 发生的地方。我假设因为某种原因，视图没有从 ViewPager 正确获取。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.timesheetdb_displays_timesheet_edit);
    Log.i("info", "in timesheet edit onCreate");
    //getActionBar().setDisplayHomeAsUpEnabled(true); //Requires API 11 or
    // higher

    this.co = (ClientObject) getIntent().getExtras().get("ClientObject");
    if (getIntent().getExtras().get("key") != null) {
        this.key = (Integer) getIntent().getExtras().get("key");
        this.co.setRowKey(this.key);
    } else {
        key = 0;
    }

    this.vp = (ViewPager) findViewById(R.id.timePager);
    this.vp.setOffscreenPageLimit(2);
    this.vp.setAdapter(new ViewPagerAdapter());
    this.vp.setCurrentItem(0);

    View v = vp.getChildAt(0);
    Log.i("info", String.format("View id in Hex is: %X", v.getId()));

    //initComponents();
} 
```

最后，这个错误对应的LogCat是：

```
 11-27 13:21:57.857: W/dalvikvm(710): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
    11-27 13:21:57.917: E/AndroidRuntime(710): FATAL EXCEPTION: main
    11-27 13:21:57.917: E/AndroidRuntime(710): java.lang.RuntimeException: Unable to start activity ComponentInfo{timesheetdb.Login/timesheetdb.Displays.TimesheetEdit}: java.lang.NullPointerException
    11-27 13:21:57.917: E/AndroidRuntime(710):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at android.os.Handler.dispatchMessage(Handler.java:99)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at android.os.Looper.loop(Looper.java:137)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at android.app.ActivityThread.main(ActivityThread.java:4745)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at java.lang.reflect.Method.invokeNative(Native Method)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at java.lang.reflect.Method.invoke(Method.java:511)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at dalvik.system.NativeStart.main(Native Method)
    11-27 13:21:57.917: E/AndroidRuntime(710): Caused by: java.lang.NullPointerException
    11-27 13:21:57.917: E/AndroidRuntime(710):  at timesheetdb.Displays.TimesheetEdit.onCreate(TimesheetEdit.java:73)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at android.app.Activity.performCreate(Activity.java:5008)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
    11-27 13:21:57.917: E/AndroidRuntime(710):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
    11-27 13:21:57.917: E/AndroidRuntime(710):  ... 11 more 
```

# php - Mysql从一个表中选择列与另一个表匹配以提取ID

> ID：13590102
> 
> 赞同：1
> 
> 时间：2012-11-27T17:49:32.933
> 
> 标签：php, mysql

我试图做的是匹配存储在两个表中的用户名，`table1`然后`table2`拉`user_id`表 2。

`Table1`具有诸如`id`、`username`和其他随机信息之类的列

`Table2`具有诸如`user_id`、`username`和其他随机信息之类的列

我最终尝试做的是从 table1 中选择要显示的信息，但是当我单击链接时我可以转到正确的 id 我需要 table2 中的 user_id

以下是提取 user_id，但是我需要 Table1 中的所有其他信息，以便我可以在我的页面中回显它

```
select user_id
from login_users
where username IN ( select username  from cpanel)
ORDER BY username DESC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T17:53:37.533

进行如下连接：

```
 SELECT b.user_id, a.*
 from cpanel a, 
    login_users b
 where b.username = a.username
 ORDER BY a.username DESC 
```

或者

```
 SELECT b.user_id, a.*
 FROM cpanel a JOIN login_users b
   ON b.username = a.username
 ORDER BY a.username DESC 
```

这里`a.*`返回表的所有列`cpanel`，而`userid`从`login_users`表中检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:55:28.137

i think the correct thing is select user_id2 from table2 where tablle1.username = table2.username and username = 'myname'

# git - 如何从 gitweb 下载文件

> ID：13590103
> 
> 赞同：0
> 
> 时间：2012-11-27T17:49:41.197
> 
> 标签：git

我想从以下链接下载源代码：

[https://gitweb.torproject.org/tor.git/tree/b13c6becc892d9716d8645f16b5d03bdb0b34651:/src](https://gitweb.torproject.org/tor.git/tree/b13c6becc892d9716d8645f16b5d03bdb0b34651:/src)

但是我对git不熟悉，如何下载这个链接中的所有文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:57:35.967

不需要熟悉git，试试click in [snapshot](https://gitweb.torproject.org/tor.git/snapshot/b13c6becc892d9716d8645f16b5d03bdb0b34651.tar.gz)

# c++ - 跟踪这个递归代码

> ID：13590107
> 
> 赞同：1
> 
> 时间：2012-11-27T17:50:01.790
> 
> 标签：c++, visual-studio-2010

下面的代码是我的书，我需要跟踪它的执行，显示为每个递归调用创建的堆栈帧、存储在堆栈帧中的值以及返回的值。我感到困惑的地方是第 17 行`behead(s+1,n-1)`，因为`s`它是一个字符串变量，所以如何将它添加为一个整数。由于这个细节，我无法运行此代码。

```
#define Z 3 
string behead( string s, int n );

int main( void )
{
    string answer;
    char word[] = "distrust";
    printf( "\nBeheading the victim: %s?\n", word );
    answer = behead( word, Z );
    printf( "Now: %s!\n\n", answer );
}

string behead( string s, int n )
{
    if (n == 0) return s;
    else return behead( s + 1, n - 1 );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:02:20.250

我*认为*移植此内容的人完全无视实际*编译*的最终目标。它看起来像一个移植不良且从未测试/编译过的 C 递归函数。他们很可能想要这样的东西：

```
#include <string>
#include <cstdio>
using namespace std;

#define Z 3 
string behead( string s, int n );

int main( void )
{
    string answer;
    char word[] = "distrust";
    printf( "\nBeheading the victim: %s?\n", word );
    answer = behead( word, Z );
    printf( "Now: %s!\n\n", answer.c_str() );
}

string behead( string s, int n )
{
    if (n == 0) return s;
    return behead(s.substr(1), n-1);
} 
```

请注意`c_str()`在 printf 参数列表中，原始代码中的另一个缺陷。

你问这是做什么的：它递归地从输入字符串的开头拉出一个字符，重复直到`n`拉出字符。通过最终返回的 this 的调用堆栈如下，其中`s"..."`表示`std::string`对象按值：

```
behead(s"distrust", 3)
   behead(s"istrust", 2)
      behead(s"strust", 1)
         behead(s"trust", 0)  <<== return point. 
```

它也完全没用，因为：

```
string word = "distrust";
string answer = word.substr(Z); 
```

在没有递归的情况下完成同样的事情（并且更清楚）。

# maven - 无法使用 Maven 构建 Hudson 插件

> ID：13590115
> 
> 赞同：3
> 
> 时间：2012-11-27T17:50:56.640
> 
> 标签：maven, jenkins, hudson, maven-plugin, hudson-plugins

我无法设法使用 Maven 构建 Hudson 插件。

这是我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>

<parent>
    <groupId>org.jvnet.hudson.plugins</groupId>
    <artifactId>hudson-plugin-parent</artifactId>
    <version>2.2.1</version><!-- which version of Hudson is this plugin built against? -->
</parent>

<groupId>com.my-project</groupId>
<artifactId>my-project-hudson-asap-plugin</artifactId>
<version>2.0.1</version>
<packaging>hpi</packaging>
<name>my-project-hudson-asap-plugin</name>
<url>http://www.my-project.com</url>
</project> 
```

这是错误：

```
Failed to execute goal org.jvnet.hudson.tools:maven-hpi-plugin:3.0.1:run (default-cli) on project my-project-hudson-asap-plugin: Version of org.jvnet.hudson.main:gin:jar:2.1.2 is inconsistent with org.jvnet.hudson.main:hudson-war:war:2.2.1 -> [Help 1] 
```

我感觉它与迁移到 java 7 有关，它在 java 6 中工作，但自从我迁移到 java 7 以来我做了很多改变。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:39:13.080

尝试使用不同的父版本进行编译，例如错误中提到的 2.1.2。那至少应该改变错误信息......

或者您是否有特定的理由使用 2.2.1 父代，而不是较旧的父代？

# asp.net - UpdatePanel 中的 CustomValidator 在 IE9 中工作异常

> ID：13590117
> 
> 赞同：0
> 
> 时间：2012-11-27T17:51:00.527
> 
> 标签：asp.net, internet-explorer-9, updatepanel

我有一个`CustomValidator`位于`Wizard`控件内部的`UpdatePanel`.

没有`UpdatePanel`，一切都按预期工作，但只有在`UpdatePanel`添加 后，IE9 中的事情才会变得奇怪。

在向导的一个步骤中，我有一个`GridView`通过搜索填充的，所有这些都可以正常工作。

```
<asp:CustomValidator ID="cvSelectedUser" runat="server"
    CssClass="Validator"
    ErrorMessage="You must select a user to alter before you may continue"
    OnServerValidate="cvSelectedUser_ServerValidate">
</asp:CustomValidator>

<asp:Panel ID="pSearchExisting" runat="server"
    Height="120px"
    ScrollBars="Vertical">
    <asp:GridView ID="gvSearchExisting" runat="server"
        AutoGenerateColumns="false"
        DataKeyNames="UniqueID"
        EmptyDataText="No users found from your search."
        Width="95%">
        <AlternatingRowStyle CssClass="GridViewAlternatingRow" />
        <HeaderStyle CssClass="GridViewHeader" />
        <SelectedRowStyle CssClass="GridViewSelectedRow" />
        <Columns>
            <asp:CommandField ShowSelectButton="True" />
            <asp:BoundField DataField="EmployeeID" HeaderText="EmployeeID" SortExpression="EmployeeID" />
            <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
            <asp:BoundField DataField="UserID" HeaderText="User ID" SortExpression="UserID" />
        </Columns>
    </asp:GridView>
</asp:Panel> 
```

`CustomValidator`用于确保用户在继续之前选择了搜索结果，并且仅在用户不选择时阻止用户进入下一个向导步骤。

```
protected void cvSelectedUser_ServerValidate(object sender, ServerValidateEventArgs e)
{
    e.IsValid = true;
    if (gvSearchExisting.SelectedIndex == -1)
        e.IsValid = false;
} 
```

这在向导事件中得到证实。

```
protected void wUserID_NextButtonClick(object sender, WizardNavigationEventArgs e)
{
    if (Page.IsValid == false)
        return;

    // process navigation
} 
```

在 IE9（仅）中发生的奇怪事情是，如果您单击向导上的 Next 按钮并且您没有从 中选择记录`GridView`，它会阻止您进行下一步，但`CustomValidator`不会显示错误消息.

用户可以继续点击下一步并且错误消息不显示。但是，奇怪的是，如果您单击页面，失去 Next 按钮的焦点，然后再次单击 Next 按钮，则会显示错误消息。

更麻烦的是，这在 Chrome、Firefox、IE8 等中按预期工作，但不是 IE9。

作为回顾

**IE9 中不显示错误信息**

*   不要选择用户
*   根据需要多次单击“下一步”按钮
*   没有消息显示

**IE9 中确实显示错误消息**

*   不要选择用户
*   单击下一步按钮
*   取消下一步按钮的焦点（单击页面上的其他位置，例如背景上的空白）
*   再次单击下一步按钮
*   显示消息

关于如何解决这个问题的任何想法？

[我确实通过https://stackoverflow.com/a/12926317/935779](https://stackoverflow.com/a/12926317/935779)找到了一个看起来像是 hack 的变通方法。这只是强制 IE9 进入兼容模式。我宁愿一个适当的修复。

```
<meta http-equiv="X-UA-Compatible" content="IE=IE8" /> 
```

# ruby-on-rails - 监控与 Ubuntu 自己的诊断不同的内存利用率

> ID：13590119
> 
> 赞同：0
> 
> 时间：2012-11-27T17:51:04.660
> 
> 标签：ruby-on-rails, vps, linode, monit

我有一个运行 Ubuntu 12.04 的 Linode 512 VPS，我注意到 Monit 的内存利用率报告和 Ubuntu 的报告之间存在很大差异。当 monit 在超过某个阈值时尝试重新启动我的某些进程时，这会成为一个问题。有谁知道为什么会有这种差异？

![Ubuntu](../Images/1cf3f600df48d8d2b23fc6ae44ed88a8.png)

![监控](../Images/1388b5dc4f5bddbac285f8e090864c09.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:57:45.350

在不深入挖掘 monit 的源代码的情况下，monit 似乎在计算已用内存时考虑了内核使用的内存缓冲区。

从我的 Linode 上的监控：

```
 status                            Running
  monitoring status                 Monitored
  load average                      [0.00] [0.01] [0.05]
  cpu                               0.0%us 0.0%sy 0.0%wa
  memory usage                      264652 kB [52.0%]
  swap usage                        47096 kB [2.2%]
  data collected                    Tue, 11 Dec 2012 20:51:45 
```

并在`free`之后运行：

```
 total       used       free     shared    buffers     cached
  Mem:        508576     405572     103004          0      20288     120636
  -/+ buffers/cache:     264648     243928
  Swap:      2097148      47092    2050056 
```

考虑到 monit 的默认配置是每 120 秒刷新一次，与 monit 的 264652 kB 相比，264648 kB 相当准确。

# html - 如何从 VB.NET 中的文本框中获取特定数据

> ID：13590121
> 
> 赞同：-1
> 
> 时间：2012-11-27T17:51:07.600
> 
> 标签：html, vb.net, textbox, innertext

我从网页中抓取了文本，并使用以下方法将其放入 TextBox：

```
TextBox1.Text = WebBrowser1.Document.Body.InnerText 
```

现在在那个文本框中，我有：

告诉我如何设备状态
订购墨盒少于 700 页
帮助
暂停/恢复继续

我希望能够从文本框中获取“ORDER CARTRIDGE LESS THAN 700 PAGES”，并将其作为文本放入 TextBox2.Text 我一直在寻找方法来做到这一点，但我只是没有找到任何解决方案。这是我可以得到页面的最简单的文本量。该文本也可以根据打印机的状态而改变。所以我基本上是在寻找一种方法来获取状态和帮助之间的数据，并将其分配给另一个文本框的文本。我希望这是有道理的......如果从 HTML 中获取它更容易，请帮助我。以下是页面 HTML 中的一些代码。

```
<div  id="Text1"  style="font-size:14px; padding-top: .7em; padding-bottom: .7em;" >ORDER CARTRIDGE
LESS THAN 700 PAGES
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:19:08.487

要回答您的具体问题：

如果您有充分的理由在 textbox1 中显示整个文本，并且您需要的字符串始终是第二行：

```
TextBox2.Text = Textbox1.Lines(1) 
```

要直接从浏览器获取：

```
TextBox2.Text = WebBrowser1.Document.GetElementById("Text1").InnerText 
```

但正如其他人所提到的，可能有更好的方法来完成你的任务。你到底想做什么？

# java - Solr DataImportHandler - Oracle 日期 - 夏令时

> ID：13590124
> 
> 赞同：1
> 
> 时间：2012-11-27T17:51:25.820
> 
> 标签：java, date, solr, dataimporthandler

根据[这个问题](https://stackoverflow.com/questions/10111517/getting-correct-time-from-oracle-date-in-solr-dataimporthandler)和[我添加的答案](https://stackoverflow.com/a/13589395/1627613)（我的代码可以在那里查看），我可以从我的 Oracle DB 中正确检索正确的日期。但是，Solr 似乎根据夏令时转换了它。例如，我在 DB 上的日期之一是：

```
2011-09-30T 00:15:05Z 
```

但是，当插入 Solr 时，它看起来像：

```
2011-09-29T 23:15:05Z 
```

即减去一小时。作为解决方案的一部分，我`oracle.sql.TIMESTAMP`从`java.sql.Date`使用`dateValue()`. 当我从 DataImportHandler 的 ScriptTransformer 打印这个值时，它看起来仍然是我想要的格式。因此，我不认为我的转变有什么奇怪的。只有当我从 Solr 检索此文档时，我才能看到它已转换，例如：

```
<date name="STRT_DT">2011-09-29T23:15:05Z</date> 
```

这让我认为 Solr 正在考虑夏令时。

**有什么方法可以防止 Solr 转换日期并保持原样？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T18:15:05.963

Solr 以 UTC 格式存储所有 DateField 值。Solr 将您的值转换为 UTC，而不是夏令时。据我所知，除了创建自己的自定义日期字段类型之外，没有办法改变这种行为。有关详细信息，请参阅[DateField API 文档。](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/schema/DateField.html)

# python - ipython 笔记本服务器设置调试

> ID：13590125
> 
> 赞同：3
> 
> 时间：2012-11-27T17:51:29.653
> 
> 标签：python, ubuntu, ipython

我正在尝试在 Ubuntu 主机上设置[ipython 笔记本服务器](http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html)- 但似乎无法远程访问它。我按照教程设置了笔记本服务器，然后启动它——一切似乎都很好。但是`https://my-host-ip:9999/`我会在浏览器中收到超时（`error 118`）消息。

我的直觉是需要`9999`在我的主机上打开适当的端口（在设置教程中）。如何使用 Ubuntu（安全地）执行此操作？更一般地说，此时我应该通过调试清单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:42:30.930

您是否尝试将其作为 public 运行？（收听'*'？）

[http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html#running-a-public-notebook-server](http://ipython.org/ipython-doc/dev/interactive/htmlnotebook.html#running-a-public-notebook-server)

不要忘记通过 https 和密码进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:49:38.143

*   9999端口是否开放？
*   我不知道为什么，但我必须将 IP 设置为主机的 IP 才能使其工作。

# php - File_get_contents 在 Localhost 中返回空字符串

> ID：13590126
> 
> 赞同：0
> 
> 时间：2012-11-27T17:51:32.600
> 
> 标签：php, macos, localhost, file-get-contents

嗨，下面的代码在我的主机中运行良好，但在我的 localhost 中运行良好。

```
<?php 
$hi = file_get_contents("https://ojooo.com");
echo $hi;
?> 
```

但奇怪的是下面的代码在我的本地主机中工作。

```
<?php 
$hi = file_get_contents("https://yahoo.com");
echo $hi;
?> 
```

我真的很困惑为什么代码在我的主机中工作但不在我的本地主机中。有人请指导我出了什么问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:58:58.227

启用 Apache 模块**ssl_module**

如果您使用的是 wamp 单击 wamp 图标 > apache > apache 模块，然后选择 ssl_module

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:12:16.367

作为上述问题的解决方案，您需要在 php.ini 配置文件中将 allow_url_fopen 设置为 On。

此选项启用支持访问 URL 对象（如文件）的 URL 感知 fopen 包装器。

有关配置参数的更多说明，请参阅下面 url 中提到的文档。

[http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:59:47.883

这可能是由您的 PHP 设置文件（PHP.ini 或 conf）引起的

您正在寻找的设置可能是[allow_url_fopen](http://php.net/manual/en/filesystem.configuration.php)。

如果您想在不更改 php 设置文件的情况下获取内容，您可以使用 fsockopen 或使用启用 cURL 的 PHP。

# winforms - 如何使 Datagridview 基于行？

> ID：13590127
> 
> 赞同：1
> 
> 时间：2012-11-27T17:51:36.483
> 
> 标签：winforms

这是一个数据网格视图的示例图像。

我想以这一行为基础，而不是选择一个单元格，我希望选择整行。行/单元格是只读的，因此不需要编辑单元格。我也喜欢删除 > 所在的最左侧。

（通过谷歌找到的蹩脚图片）

![在此处输入图像描述](../Images/48d212767bb8b823cc1c4ac0cfbb5486.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:28:26.823

```
myGrid.RowHeadersVisible = false;
myGrid.SelectionMode = DataGridViewSelectionMode.FullRowSelect; 
```

您可以在上面的代码中或通过设计器设置这些属性。 `RowHeadersVisible`是在该`Appearance`部分之下。`SelectionMode`是在该`Behavior`部分之下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:07:52.360

对于问题的整行选择部分，DataGridView 控件有一个名为 SelectionMode 的属性。将该属性设置为 SelectionMode.FullRowSelect。

不确定是否可以删除最左边的部分，但您可以将其宽度更改为 1 或 2 个像素。不记得它叫什么，但 DataGrifView 控件上有一个属性，它控制第一个“行指示器”列的宽度。

# z3 - 使用 Z3_solver_get_unsat_core 获取未饱和核心

> ID：13590129
> 
> 赞同：2
> 
> 时间：2012-11-27T17:51:44.403
> 
> 标签：z3

假设这是非线性实数算术的一组约束，例如

```
pred1 = (> (- (* (- v2_x v0_x) (- v1_y v0_y)) (* (- v2_y v0_y) (- v1_x v0_x))) 0)
pred2 = (> (- (* (- v1_x v0_x) (- v2_y v0_y)) (* (- v1_y v0_y) (- v2_x v0_x))) 0) 
```

事实上，如果我们这样做

```
Z3_solver_assert(ctx,solver,pred1);
Z3_solver_assert(ctx,solver,pred2);
b = Z3_solver_check(ctx, solver); 
```

`b`会不满意。我想获得未饱和的核心（因为这个例子很简单）。因此，对于这些谓词中的每一个，我都定义了一个谓词变量。可以说它们是`p1`和`p2`。

```
Z3_ast p1 = mk_bool_var(ctx, "P1");
assumptions[i] = Z3_mk_not(ctx, p1);
Z3_ast g[2] = { pred1, p1 };
Z3_solver_assert(ctx,solver,Z3_mk_or(ctx, 2, g));
Z3_ast p2 = mk_bool_var(ctx, "P2");
assumptions[i] = Z3_mk_not(ctx, p2);
Z3_ast g[2] = { pred2, p2 };
Z3_solver_assert(ctx,solver,Z3_mk_or(ctx, 2, g)); 
```

然后我打电话`Z3_solver_check_assumptions(ctx, solver, 2 , assumptions);`

但这又回来`Z3_L_UNDEF`了，原因是`(incomplete (theory arithmetic))`

我想知道我在哪里犯了错误以及如何解决这个问题。

以下是事物的初始化方式：

```
 ctx = Z3_mk_context(cfg);
  Z3_symbol logic_symbol = Z3_mk_string_symbol(ctx, "QF_UFNRA");
  solver = Z3_mk_solver_for_logic((Z3_context)ctx, logic_symbol);
  Z3_solver_inc_ref(ctx, solver);
  Z3_params params = Z3_mk_params(ctx);
  Z3_symbol param_symbol = Z3_mk_string_symbol(ctx, "unsat_core");
  Z3_params_set_bool(ctx , params, param_symbol, Z3_L_TRUE);
  Z3_solver_set_params(ctx, solver, params); 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T07:45:47.063

Z3 包含许多求解器。对于非线性算术问题，它使用`nlsat`. 该求解器的实现位于该目录中，并在[此处](http://research.microsoft.com/en-us/um/people/leonardo/files/IJCAR2012.pdf)`src/nlsat`解释该算法。但是，当前的实现不支持 unsat 核心提取或证明生成。当用户要求提取 unsat core 时，Z3 切换到通用求解器，该求解器对于非线性算术是不完整的。也就是说，它可能会返回非线性算术问题。通用求解器支持许多理论、量词、未饱和核心提取和证明生成。它对于*线性*算术来说是完整的，但正如我所说，对于非线性片段来说它并不完整。在计划中，Z3将会有一个新版本的`nlsat``unknown`*`nlsat`这与其他理论相结合并支持 unsat 核心提取，但这是未来的工作。*

# wordpress - 如何在 wordpress 小部件中创建动态字段名称

> ID：13590130
> 
> 赞同：1
> 
> 时间：2012-11-27T17:51:47.700
> 
> 标签：wordpress

我正在编写一个带有 HTML 复选框设置形式的 WordPress 小部件插件。每个复选框对应一个不同的`post_type`. 这是我的代码：

```
function form($instance) {
   $defaults   = array( 'num_posts' => 5 );
   $instance   = wp_parse_args( (array) $instance, $defaults );
   $num_posts  = $instance['num_posts'];
   $post_types = get_post_types();
   $instance['post_types'] = $post_types;
   ?>

<p>Number of posts to show: <input class="widefat" name="<?php echo $this->get_field_name( 'num_posts' ); ?>" type="number" value="<?php echo esc_attr( $num_posts ); ?>" /></p>
    <p>Filter by Post Type: <ul>
    <?php foreach ($post_types as $post_type) { ?>
        <li><input name="<?php echo $post_type; ?>" type="checkbox" <?php checked( $post_types, 'on' ); ?> /><label for="<?php echo $post_type; ?>" /><?php echo $post_type; ?></label></li>
    <?php
    } ?>
    </ul></p> 
```

我的问题是，如何`$instance`为循环中的复选框生成动态名称？我意识到我应该能够做类似的事情`$this->get_field_name( 'myname' );`，但是如何让它变得动态呢？

**注意：**上面的代码示例只是输出`post_type`name 属性而不是使用`get_field_name`; 这不是解决方案，只是我撞到的一堵墙。

谢谢！

**编辑：** 我将问题缩小到小部件更新功能，在使用 foreach 循环时似乎不起作用。stackoverflow 上的另一个未解决的问题描述了类似的内容。[PHP - Wordpress - 插件小部件更新功能 - 更新数组值 [Foreach 循环不起作用]](https://stackoverflow.com/questions/11948682/php-wordpress-plugin-widget-update-function-update-array-values-foreach-l)

这是我的代码（稍作修改），包括更新功能。

```
 // build the widget settings form
function form( $instance ) {
    $defaults   = array( 'num_posts' => 5 );
    $instance   = wp_parse_args( (array) $instance, $defaults );
    $num_posts  = $instance['num_posts'];

    foreach ( get_post_types() as $post_type ) {
        $post_types_array[$post_type] = $post_type;
    }

    $instance['post_types'] = $post_types_array;
    $post_types = $instance['post_types'];

    echo '<pre>';
    print_r($instance);
    echo '</pre>';
    ?>

        <p>Number of posts to show: <input class="widefat" name="<?php echo $this->get_field_name( 'num_posts' ); ?>" type="number" value="<?php echo esc_attr( $num_posts ); ?>" /></p>
        <p>Filter by Post Type: <ul>
        <?php foreach ( $post_types as $post_type ) { ?>
            <li><input name="<?php echo $this->get_field_name( $post_type ); ?>" type="checkbox" <?php checked( $this->get_field_name( $post_type ) ); ?> /><label for="<?php echo $this->get_field_name( $post_type ); ?>" /><?php echo $post_type; ?></label></li>
        <?php
       } ?>
        </ul></p>

    <?php
}

// save the widget settings
function update( $new_instance, $old_instance ) {
    $instance = $old_instance;
    $instance['num_posts'] = strip_tags( $new_instance['num_posts'] );

    foreach ( $instance['post_types'] as $post_type ) {
        $instance['post_types'][$post_type] = strip_tags( $new_instance['post_types'][$post_type] );
    }

    return $instance;
} 
```

# java - 无状态在 AS 7 中不起作用

> ID：13590132
> 
> 赞同：0
> 
> 时间：2012-11-27T17:51:59.190
> 
> 标签：java, ejb, jboss7.x, stateless

我得到这个：

```
[org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/PontoComentario].[jsp]] (http--0.0.0.0-8080-2) Servlet.service() for servlet jsp threw exception: org.hibernate.LazyInitializationException: could not initialize proxy - no Session
at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:149) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:195) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:185) [hibernate-core-4.0.1.Final.jar:4.0.1.Final 
```

访问jsp之后。我的 EMFactory 是这样的：

```
import javax.ejb.Stateless;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.persistence.EntityManager;
import javax.transaction.UserTransaction;

@Stateless 
public class EMFactory {

public static EntityManager getEntityManager() {

    try {
        Context ctx = new InitialContext();
        return (EntityManager) ctx.lookup("java:comp/env/PontoComentario/EntityManager");
    } catch (Exception e) {
        return null;
    }
}

public static UserTransaction getUserTransaction() {

    try {
        Context ctx = new InitialContext();
        return (UserTransaction) ctx.lookup("java:comp/UserTransaction");
    } catch (Exception e) {
        return null;
    }
}   
} 
```

我不知道为什么会这样，我使用的是 AS 5，它运行良好。如果您需要任何其他代码，请询问。

这是在 jsp 中使用的 scriptlet 的一个可悲部分：

```
 <%
      UsuarioDao dao = new UsuarioDao();
  List<Usuario> lista;
      if (usuarioLogado.getAdministrador()) {
        lista = dao.getListOrder("codigo");
} else {
        lista = dao.getListCond("obj.administrador = true order by obj.codigo"); 
```

... 等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:20:30.457

为什么不简单地使用注释注入对 EntityManager 的引用：

@PersistenceContext EntityManager em;

你真的从 JSP 访问你的 SLSB 吗？不是来自 servlet 控制器？

# python - windows vista上的django部署

> ID：13590137
> 
> 赞同：0
> 
> 时间：2012-11-27T17:52:12.480
> 
> 标签：python, django, environment-variables

我已将 C:\Python27\ for python 和 C:\Python27\Lib\site-packages\django\bin\ for django 添加到环境设置的路径变量中。

但是每当我运行命令时

```
django-admin.py startproject myapp 
```

它只是在记事本中打开 django-admin.py 文件，而不是创建任何自定义 django 目录和文件结构。

我无法开始我的应用程序开发。我在 ubuntu 上工作时没有遇到任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:56:12.687

尝试`python django-admin.py startproject myapp`

还要确保您已正确安装 python ...它应该自动关联以 .py 结尾的文件

# database - 正确关闭 Hibernate 事务

> ID：13590138
> 
> 赞同：2
> 
> 时间：2012-11-27T17:52:16.763
> 
> 标签：database, hibernate, transactions, c3p0

我正在调查我的代码中的连接泄漏。我们使用 c3p0 来管理连接池，我的一般 Hibernate 使用模式是这样的：

```
EntityManager entityManager = entityManagerFactory.createEntityManager();

try {

    EntityTransaction transaction = entityManager.getTransaction();
    transaction.begin();

    //..Work involving calls to find() and merge()

    transaction.commit();

} catch (... e) {
   //..log message, throw nicer exceptions

} finally {
   entityManager.close();
} 
```

**此代码是否有可能泄漏数据库连接？**在失败的情况下我是否必须显式回滚事务，还是自动完成？entityManager.close() 是否确保将数据库连接返回到连接池？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:50:25.887

在所有 catch 块中使用 transaction.rollback()。事务将在没有提交的情况下关闭

# regex - 从字母数字字符中删除数字

> ID：13590139
> 
> 赞同：51
> 
> 时间：2012-11-27T17:52:16.663
> 
> 标签：regex, r

我有一个字母数字字符列表，如下所示：

```
x <-c('ACO2', 'BCKDHB456', 'CD444') 
```

我想要以下输出：

```
x <-c('ACO', 'BCKDHB', 'CD') 
```

有什么建议么？

```
# dput(tmp2)

structure(c(432L, 326L, 217L, 371L, 179L, 182L, 188L, 268L, 255L,..., 
), class = "factor") 
```

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-11-27T17:56:23.270

您可以`gsub`为此使用：

```
gsub('[[:digit:]]+', '', x) 
```

或者

```
gsub('[0-9]+', '', x)
# [1] "ACO"    "BCKDHB" "CD" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-05-31T19:09:11.177

如果您的目标只是删除数字，则该`removeNumbers()`函数会从文本中删除数字。使用它可以降低出错的风险。

```
library(tm)

x <-c('ACO2', 'BCKDHB456', 'CD444') 

x <- removeNumbers(x)

x

[1] "ACO"    "BCKDHB" "CD" 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-02-05T15:14:47.300

使用[字符串](https://stringr.tidyverse.org/index.html)

大多数 stringr 函数处理正则表达式

[str_replace_all](https://stringr.tidyverse.org/reference/str_replace.html)会做你需要的

```
str_replace_all(c('ACO2', 'BCKDHB456', 'CD444'), "[:digit:]", "") 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-10-07T09:27:29.250

使用[stringi](https://cran.r-project.org/web/packages/stringi/index.html)的解决方案：

```
# your data
x <-c('ACO2', 'BCKDHB456', 'CD444')

# extract capital letters
x <- stri_extract_all_regex(x, "[A-Z]+")

# unlist, so that you have a vector
x <- unlist(x) 
```

一行解决方案：

[![R中的在线截图](../Images/163303366fc49f25e1cdfbf0ab63d54a.png)](https://i.stack.imgur.com/asBXo.png)

# .net - Microsoft 便携式客户端库 - MessageContractAttribute isWrapped 未定义

> ID：13590144
> 
> 赞同：1
> 
> 时间：2012-11-27T17:52:43.613
> 
> 标签：.net, wpf, silverlight, portable-class-library

我正在尝试使用 Microsoft 的便携式库工具来创建一个可供 Silverlight 和 WPF 应用程序使用的通用“便携式”项目。

我在将第 3 方 WebService 的服务引用添加到可移植项目时遇到了麻烦。似乎可移植类库不支持 MessageContractAttribute 类的*isWrapped*属性，例如，如果我直接在 Silverlight 应用程序中创建客户端存根，存根看起来像这样：

```
[System.ServiceModel.MessageContractAttribute(IsWrapped=false)]
public partial class ServiceRequest1 { 
```

但在我的便携式项目中，它看起来像这样，缺少*IsWrapped*属性设置：

```
[System.ServiceModel.MessageContractAttribute()]
public partial class ServiceRequest1 { 
```

似乎也不能手动设置，只是不可用/未定义。结果是，我的 Web 服务 SOAP 请求周围有一个不需要的包装器标记，导致服务器响应格式错误的请求错误消息。

我想知道是否有任何已知的解决方法？有没有其他方法可以关闭包装器，或者有谁知道为什么 IsWrapped 属性不可用？

如果我能让它工作，那就太好了，因此我的 WPF 和 Silverlight 解决方案可以共享它。

# c++ - 关于清理此终止条件的建议

> ID：13590145
> 
> 赞同：1
> 
> 时间：2012-11-27T17:52:53.477
> 
> 标签：c++, c++11

我一直在使用 C++11 函数来做与 python 的 itertools.combinations(input, 2) 相同的操作，到目前为止，这就是我所拥有的：

**编辑**按照@DavidRodríguez-dribeas 的建议删除了外部 lambda

```
#include <iostream>
#include <functional>
#include <vector>

using namespace std;

template <class T>
function<pair<T*, T*>()> combinations(vector<T> & input) {
  auto it1 = input.begin();
  auto end = input.end();
  auto it2 = next(it1);
  return [=]() mutable {
      if (it2 == end) {
        it1++;
        it2 = next(it1);
      }   
      if (it2 != end)
        return pair<T*,T*>(&(*it1), &(*it2++));
      return pair<T*,T*>(&*end, &*end);
    };  
};

int main (void) {
  vector<int> numbers{1,2,3,4,5,6};
  auto func = combinations(numbers);
  while ( true ) { 
    auto i = func();
    if (i.first == &*(numbers.end())) break;
    cout << *(i.first) << ',' << *(i.second) << endl;
  }

  return 0;
}; 
```

我对用于迭代组合的方法不满意关于清理它的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:43:50.917

[这](http://home.roadrunner.com/~hinnant/bloomington/combinations.html)是我最喜欢的执行此操作方式的文档和代码。以下是该库将如何用于您的示例：

```
#include <iostream>
#include <vector>
#include "combinations"

using namespace std;

int main (void) {
  vector<int> numbers{1,2,3,4,5,6};
  for_each_combination(numbers.begin(), numbers.begin()+2, numbers.end(),
           [](vector<int>::const_iterator b, vector<int>::const_iterator e)
           {
              if (b != e)
              {
                cout << *b;
                for (auto i = b+1; i != e; ++i)
                    cout << ',' << *i;
                cout << endl;
              }
              return false;
           });
}

1,2
1,3
1,4
1,5
1,6
2,3
2,4
2,5
2,6
3,4
3,5
3,6
4,5
4,6
5,6 
```

如果需要，将示例使用更改为一次考虑 3 或 4 个项目而不是 2 个是微不足道的。还可以一次处理 N 个中的各种排列 k。

**更新**

添加一个间接级别来说明如何处理在向量中移动/交换效率不高的项目向量：

```
#include <iostream>
#include <vector>
#include "combinations"

using namespace std;

int main (void) {
  vector<int> numbers{1,2,3,4,5,6};
  vector<vector<int>::const_iterator> num_iters;
  num_iters.reserve(numbers.size());
  for (auto i = numbers.begin(); i != numbers.end(); ++i)
    num_iters.push_back(i);
  for_each_combination(num_iters.begin(), num_iters.begin()+2, num_iters.end(),
           [](vector<vector<int>::const_iterator>::const_iterator b,
              vector<vector<int>::const_iterator>::const_iterator e)
           {
              if (b != e)
              {
                cout << **b;
                for (auto i = b+1; i != e; ++i)
                    cout << ',' << **i;
                cout << endl;
              }
              return false;
           });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:38:53.740

我发现 Oliver Kowalke 的协程库已被 Boosts 同行评审接受，并有望包含在下一个版本中。稍微开枪，我通过使用 boost-dev repo (https://gitorious.org/boost-dev/boost-dev) 的协程分支来试一试。

`g++ -I path/to/boost-dev -std=c++11 test_code.cpp -o run_test_code -static -L path/to/boost-dev/stage/lib/ -lboost_context`

```
#include <boost/coroutine/all.hpp>
#include <boost/bind.hpp>
#include <boost/range.hpp>
#include <iostream>
#include <vector>

using namespace std;
using namespace boost;

template <typename T>
using coro_pairT_void = coroutines::coroutine<pair<T&,T&>(void)>;

template <typename T>
void combinations(typename coro_pairT_void<T>::caller_type & self, vector<T> & input ) { 
  for (auto it1 = input.begin(), itend = input.end(); it1 != itend; it1++) {
    for (auto it2 = std::next(it1); it2 != itend; it2++) {
      self(pair<T&, T&>(*it1,*it2));
    }   
  }
};

int main( void ) { 
  vector<int> numbers{1,2,3,4,5,6};
  coro_pairT_void<int> func(bind(combinations<int>, _1, numbers));
  for (auto it(begin(func)), itend(end(func)); it != itend; ++it) {
    cout << it->first << ',' << it->second << endl;
  }
  return 0;
}; 
```

# javascript - 输入不同的值后，文本框的默认值没有改变

> ID：13590147
> 
> 赞同：0
> 
> 时间：2012-11-27T17:52:53.137
> 
> 标签：javascript, html

在 previos 网页的查询字符串传递的值之后，我为文本框分配了默认值。

它看起来像这样：

```
<form method="post" name="create" onsubmit="return checkPercentValue()" style="font-size: medium; margin-top: 10%" dir="rtl" >
<input type="text" size="5px"  id="stocksPercents" name="stocksPercents" value="@stocks">
</form> 
```

现在，当用户在文本框中键入另一个值以更改默认值时，我调用 javascript 函数来验证某个范围内的值（0 - 100）。

功能：

```
<script type="text/javascript">
function checkPercentValue() {

    var value = parseInt(document.getElementById("stocksPercents").getAttribute("value"));
    if (value > 100 || value < 0) {
        window.alert("please insert value between 0 - 100");
        return false;
    }
    else {
        return true;
    }

}
</script> 
```

所以我检查了为什么当我输入值例如：200（大于 100）时，警报没有弹出（！！！）我在代码中添加了这一行：

```
document.write(value); 
```

而且我看到该值始终保持默认值....即使我之前在文本框中更改了它也不会更改。

所以我想问题是在文本框中输入值不能像那样改变默认值......

解决方案是什么？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:07:21.043

您可能还想考虑使用 jQuery。语法更简单，键入更短，并且跨浏览器兼容（也就是说，你不需要担心这个 b/c jQuery 为你保证。）

这是您在 jQuery 中的代码：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript">
        function checkPercentValue() {
            var value = parseInt($("#stocksPercents").val());
            if (value > 100 || value < 0) {
alert('I am GREATER');
                window.alert("please insert value between 0 - 100");
                return false;
            }
            else {
alert('I am LESS');
                return true;
            }

        }
        $(document).ready(function() {
            $('#stocksPercents').blur(function() {
                checkPercentValue();
//              alert('Yo!');
            });
        });
        </script>    
</head>
<body>

<form method="post" name="create" onsubmit="return checkPercentValue()" dir="rtl" >
    <input type="text" size="5px"  id="stocksPercents" name="stocksPercents" value="@stocks">
</form> 

</body></html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:55:51.097

替换这个

```
var value = parseInt(document.getElementById("stocksPercents").getAttribute("value")); 
```

和

```
var value = parseInt(document.getElementById("stocksPercents").value); 
```

这将解决您的问题。

# eclipse - 使用 TEE 从 TFS 结帐到 Eclipse 的最佳方法是什么？

> ID：13590153
> 
> 赞同：2
> 
> 时间：2012-11-27T17:53:23.623
> 
> 标签：eclipse, tfs, eclipse-cdt, team-explorer-everywhere

我正在开发一个 QNX 应用程序（因此我使用的是旧版本的 Eclipse-CDT C++ 等）。到目前为止，我一直在检查 TFS，然后通过 Import->General->ExistingProject 将项目文件导入工作区；这意味着我可以构建/调试等，但从 TFS 的角度来看，我只能通过 TeamExplorer 获得 TFS 功能。如果我通过 Import->Team->TFS 将相同的项目导入到不同的工作区，那么我有额外的 TEE 功能，但我无法构建/调试等。

那么，推荐的方法是什么？我想要这两个功能。

**编辑**---
我通过 Import->Team->TFS 一次一个地导入每个项目，它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:13:30.940

我不确定为什么从 TFS 导入不能正确检测到该项目的性质。（你没有签入`.project`文件吗？你在使用 Maven 吗？）

无论如何，如果您想从磁盘导入现有项目，只需转到团队菜单，选择共享，然后选择 TFS。它应该检测您的工作文件夹映射并简单地将 TFS 设置为该项目的源代码控制提供程序，这应该为您提供来自编辑器和视图的所有 TFS 绑定。

# c# - 停止使用 ThreadPool.QueueUserWorkItem 创建的具有特定任务的线程

> ID：13590154
> 
> 赞同：9
> 
> 时间：2012-11-27T17:53:25.310
> 
> 标签：c#, multithreading, abort

假设我将这两种方法排成一个`for`循环

```
for (int i = 0; i < 100; i++)
{
    ThreadPool.QueueUserWorkItem(s =>
    {
        Console.WriteLine("Output");
        Thread.Sleep(1000);
    });
}

for (int i = 0; i < 100; i++)
{
    ThreadPool.QueueUserWorkItem(s =>
    {
        Console.WriteLine("Output2");
        Thread.Sleep(1000);
    });
} 
```

有没有办法停止所有输出的线程`Console.WriteLine("Output2");`但保持那些运行输出的线程`Console.WriteLine("Output");`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-27T18:08:52.690

您可以使用 CancellationToken：

```
for (int i = 0; i < 100; i++)
{
    ThreadPool.QueueUserWorkItem(s =>
    {
        Console.WriteLine("Output");
        Thread.Sleep(1000);
    });
}

CancellationTokenSource cts = new CancellationTokenSource();

for (int i = 0; i < 100; i++)
{
    ThreadPool.QueueUserWorkItem(s =>
    {
        CancellationToken token = (CancellationToken) s;
        if (token.IsCancellationRequested)
            return;
        Console.WriteLine("Output2");
        token.WaitHandle.WaitOne(1000);
    }, cts.Token);
}

cts.Cancel(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T18:09:55.573

不，你不能那样做。如果你想做一些很长的事情，那么你必须编写一些代码来管理它。在最基本的层面上，你需要这样的东西：

```
object syncObject = new object();
bool shouldOutput2 = true;
ThreadPool.QueueUserWorkItem(s =>
{
    lock(syncObject)
    {
        if(!shouldOutput2)
        {
           return;
        }
    }
    Console.WriteLine("Output2");
    Thread.Sleep(1000);
}); 
```

将项目排队后，您可以设置标志以告诉剩余项目不要执行：

```
 lock(syncObject)
   {
        shouldOutput2 = false;
   } 
```

这是一种非常肮脏的方式，但对于您的示例来说，这似乎是唯一的方式。如果您可以告诉我们更多关于您尝试完成的实际实际行为是什么，那么可能会有一些更好的选择。

# php - 使用 Codeigniter 活动记录库时如何处理 MS SQL Server 中的日期时间字段？

> ID：13590165
> 
> 赞同：1
> 
> 时间：2012-11-27T17:54:06.017
> 
> 标签：php, sql-server, codeigniter, datetime, activerecord

我想要实现的是：

```
$since_yesterday = new DateTime();
$since_yesterday->sub(new DateInterval('P1D'));
$this->db->where('LastModified >= ', $since_yesterday);
return $this->db->get('Table1')->result_array(); 
```

> 消息：类 DateTime 的对象无法转换为字符串

构建一个 DateTime PHP 对象并使用它来过滤 MS SQL Server 行。我正在使用“mssql”驱动程序，我可以连接和执行查询，我只是不知道如何处理来自 CI Active Record 和 MS SQL Server 的 DateTime 数据转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:23:44.083

用于[`DateTime::format`](http://www.php.net/manual/en/datetime.format.php)将对象转换为字符串表示形式。您可以使用该模式`Y-m-d H:i:s`来获取 MySQL 样式的日期：

```
$since_yesterday = new DateTime();
$since_yesterday->sub(new DateInterval('P1D'));
// $since_yesterday->format('Y-m-d H:i:s') yields '2012-11-26 23:22:41'
$this->db->where('LastModified >= ', $since_yesterday->format('Y-m-d H:i:s')); 
```

# lua - 在设备上调试 Corona SDK 应用程序

> ID：13590167
> 
> 赞同：1
> 
> 时间：2012-11-27T17:54:09.007
> 
> 标签：lua, coronasdk

我使用 Corona SDK 已经有一段时间了，我真的很喜欢它，但有一件事我无法弄清楚：如何在真实设备上调试我的代码？

那时，当我的代码在模拟器中运行良好时，我通常会编译它，然后在手机上尝试。但是当出现一些错误时，这不会打扰模拟器，但会惹恼手机，我只会看到一条错误消息：

> “此应用程序遇到 Lua 错误（请参阅日志）等。”

我和我的老板花了一整天的时间弄清楚，我用大写而不是小写提出了要求。

我的问题是：如何真正“看到”该日志？我试图将我的设备连接到 DDMS，但我没有看到相关的输出。有没有办法访问该日志（我正在安卓设备上测试）？或者有没有办法在模拟器中模拟手机的确切行为？通常手机会因为 i/o 操作以及使用错误的外壳而崩溃。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T17:28:34.857

The best way to debug on iOS devices is to use XCode's Organizer with your device plugged in via the USB port. On the left hand panel of Organizer, there will be a block for each device that XCode knows about. You may have to click on a button "Use device for debugging" or something similar so XCode can gather all the information it needs.

Once done, then you can use XCode to install the app to the device (you don't need to make an .ipa file, just copy the app to the device via Organizer). In that panel on the left, there is a link for "Console Log", click that and you can your print statements and other errors issued by Corona SDK.

Rob

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T03:24:21.710

如果你没有 Xcode，你可以试试**iPhone 配置工具**。它比 xcode 更轻量级，而且您还可以在 windows 机器上使用它。

# linux - 在 Linux 上自动启动 gdb

> ID：13590174
> 
> 赞同：3
> 
> 时间：2012-11-27T17:54:27.550
> 
> 标签：linux, debugging, gdb

有没有办法在 Linux 上的 gdb 下自动启动一个进程？相当于[在 Windows 上设置图像文件执行选项](http://msdn.microsoft.com/en-us/library/a329t4ed.aspx)。

我正在尝试调试从另一个启动的进程的启动阶段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T18:01:57.700

我通常会将真正的程序移开，并将其替换为在 GDB 下使用相同参数启动程序的脚本。

```
#!/bin/bash

exec gdb -args <realprog> "$@" 
```

如果由于输出被重定向到文件或其他原因而无法正常工作，请尝试以下操作：

```
#!/bin/bash

exec xterm -e gdb -args <realprog> "$@" 
```

那应该会给你一个弹出终端，里面运行着 GDB。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T17:59:58.583

您不必在 Linux 上浏览所有注册表 voodoo :)

简单地：

1）重命名你的程序

2）编写一个shell脚本，用你的（重命名的）程序调用gdb并传递你想要的任何参数。确保你“chmod +rx”你的脚本。

3）将shell脚本命名为你的程序的原名，和你的程序放在同一个目录下

4) 执行！

# php - PHP 将多个数组分配给 $_SESSION

> ID：13590175
> 
> 赞同：3
> 
> 时间：2012-11-27T17:54:29.977
> 
> 标签：php, arrays, class, session, assign

我在设置会话时遇到问题，当我设置： $_SESSION["predefinedvar"] = "SOMETHING" 它会记住会话变量，但是，当我执行以下操作时： $_SESSION = $class->somearray; 它不会保存会话数组。

我在网上搜索过，并从这个搜索中尝试了谷歌的前几页： [php session assign array](https://www.google.no/webhp?sourceid=chrome-instant&ion=1&ie=UTF-8#hl=en&safe=off&tbo=d&sclient=psy-ab&q=php%20session%20assign%20array&oq=php%20session%20assign%20array&gs_l=hp.3..0i8i30l2.203407.2276319.0.2276455.73.59.9.0.0.9.437.7252.25j27j4j0j1.57.0.les;..1.0...1c.1.p1F4wXALQxA&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=b8689432b7f4d2e8&bpcl=38897761&ion=1&biw=1920&bih=955)

当我执行 print_r($_SESSION) 或 print_r($l->details); 时，输出与此类似。这是脚本给我的输出（来自 $_SESSION 和 $l->details）

```
Array
(
    [1] => Array
        (
            [id] => 1
            [username] => Usernamehere
            [password] => EnCryptedPasswordHere
            [mail] => em@il.com
            [ip] => ::1
            [registerred] => 1349111531
            [loggedin] => 0
            [vip] => 0
        )

    [2] => Array
        (
            [id] => 1
            [city] => 1
            [family] => 0
            [pm] => 0
            [mod] => 0
        )

    [3] => Array
        (
            [id] => 1
            [url] => images/pb/1.png
        )

    [4] => Array
        (
            [id] => 1
            [rank] => 1
            [subrank] => 5000
        )

    [5] => Array
        (
            [id] => 1
            [hp] => 100
            [str] => 0
            [def] => 0
        )

    [6] => Array
        (
            [id] => 1
            [money] => 0
            [bank] => 0
            [bullets] => 0
            [points] => 0
        )

) 
```

目前我有以下代码

登录.c.php

```
<?php
if(!$required) die("Du har ikke adgang til denne filen.");

class login {

    var $username, $password;
    var $details;
    var $salt = "SALTHIDDEN";
    var $error;
    var $justcheck;

    function onPost($username, $password, $justcheck = FALSE) {
        if($justcheck) $this->justcheck = $justcheck;
        if(!$username || !$password) die("Du må skrive inn både brukernavn og passord.");
        $this->username = htmlspecialchars(addslashes($username));
        $this->password = sha1(md5($this->salt . $password));
    }

    function checkDetails() {
        $query = mysql_query("SELECT * FROM users WHERE username = '".$this->username."' AND password = '".$this->password."' LIMIT 1");
        $num = mysql_num_rows($query);
        if($num > 0) {
            $this->details[1] = mysql_fetch_assoc($query);
            return TRUE;
        }
        else {
            $this->error[] = "Feil brukernavn eller passord.";
            return FALSE;
        }
    }

    function getEverything() {
        $this->details[2] = mysql_fetch_assoc(mysql_query("SELECT * FROM user_c WHERE id='".$this->details[1][id]."' LIMIT 1"));
        $this->details[3] = mysql_fetch_assoc(mysql_query("SELECT * FROM user_p WHERE id='".$this->details[1][id]."' LIMIT 1"));
        $this->details[4] = mysql_fetch_assoc(mysql_query("SELECT * FROM user_r WHERE id='".$this->details[1][id]."' LIMIT 1"));
        $this->details[5] = mysql_fetch_assoc(mysql_query("SELECT * FROM user_s WHERE id='".$this->details[1][id]."' LIMIT 1"));
        $this->details[6] = mysql_fetch_assoc(mysql_query("SELECT * FROM user_i WHERE id='".$this->details[1][id]."' LIMIT 1"));
    }
    function returnValue() {
        if($this->error) foreach($this->error as $e) echo "$e<br />";
        if(!$this->justcheck && !$this->error) die("<a href=\"#main\">Du er nå innlogget som $username<br />Klikk her hvis du ikke viderekobles til hovedkvarteret.</a><meta http-equiv=\"Refresh\" content=\"0; url=#main\">");
    }

} 
```

这个文件是 POST.php 文件：

```
<?php

require_once("path/hidden/db.php");

switch(key($_GET)) {
    default:
        echo "Nothing to do here";
    break;

    case "login":
        $required = TRUE;
        require_once("path/hidden/login.c.php");
        session_start();
        $l = new login();
        $l->onPost($_POST["username"], $_POST["password"]);
        if($l->checkDetails()) {
            $l->getEverything();
            session_start();
            $_SESSION = $l->details;
        }
        $_SESSION[RandomVar] = "RandomVal";
        //$l->returnValue();
        print_r($_SESSION);
        print_r($l->details);
        //echo session_id();
    break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:01:36.333

您需要为 Session 变量指定一个名称。您尝试了以下操作：

```
 $_SESSION = $class->somearray 
```

但是你需要为你的数组分配一个键：

```
$_SESSION['my_array'] = $class->somearray 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:28:54.863

要将数组存储到会话中，您需要将该数组与键绑定。

例如 $_SESSION['key']=$array_variable;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:04:29.137

代替：

```
$_SESSION = $l->details; 
```

尝试这个：

```
foreach($l->details as $strKey => $strValue) {
    $_SESSION[ $strKey ] = $strValue;
} 
```

# sockets - IP_MULTICAST_TTL 和 windows7

> ID：13590178
> 
> 赞同：1
> 
> 时间：2012-11-27T17:54:37.833
> 
> 标签：sockets, windows-7, setsockopt

我的应用程序正在创建一个 UDP 套接字并设置一些选项。一种选择是`IP_MULTICAST_TTL.`

当应用程序在 Windows 7 上运行时，我使用 wireshark 观察线路上的流量，我可以看到 TTL 始终为 1，这意味着它`setsockopt()`没有任何效果（虽然它不会返回错误）。

深入研究代码，我发现`IP_MULTICAST_TTL`Windows 7 上的值为 10，其他 Windows 版本上的值为 3。

如果我在 Windows 7 上强制该值为 3，`setsockopt()`则工作正常，wireshark 报告正确的值。

我找到了这篇文章： http: [//support.microsoft.com/kb/257460](http://support.microsoft.com/kb/257460)并且我确认我在 Winsock2.h 之后包含 Ws2tcpip.h 并且我正在链接 Ws2_32.lib

有什么建议么？

# matlab - BVP 的射击方法解决方案的 ode45/fsolve 问题

> ID：13590179
> 
> 赞同：1
> 
> 时间：2012-11-27T17:54:37.630
> 
> 标签：matlab, optimization, differential-equations, ode

我正在尝试使用拍摄方法解决 MATLAB 中的边界值问题。但是，当我尝试通过 fsolve 传递我的函数时，我收到如下警告：警告：在 t=-9.462647e+001 失败。如果不将步长减小到低于时间 t 允许的最小值 (2.273737e-013)，则无法满足积分容差。

我尝试了一些常见的解决方法，例如使用不同的 ODE 求解器并更改 ODE 求解和 fsolve 中的容差，但无济于事。目前，当我对我的参数运行 fsolve 时，它​​没有任何改变，这与我最初的猜测相同。

我已经包含了主脚本文件的代码以及 fsolve 调用的函数文件。

```
%% Main file
% PARAMETERS
% propanol (fig2, curve3, p337) 
E=6.5; %2.5
K=0.0474;

% GUESSES
infinity=100; % numerical approximation of infinity
x=0; % expanded around x=0
x0=3;
B0=-2*10^(-8);
B1=0.01;
% Guess for P
P=-1+3*B0*(1-(E/(K+1)))*exp((x-x0)*sqrt(3*E/(K+1)));
% Guess for P'
PI=sqrt(3*E/(K+1))*3*B0*(1-(E/(K+1)))*exp((x-x0)*sqrt(3*E/(K+1)));
% Guess for H
H=1+B0*exp((x-x0)*sqrt(3*E/(K+1)))+B1*exp((x-x0)*sqrt(3));
% Guess for H' (contact angle in degrees)
HI=sqrt(3*E/(K+1))*B0*exp((x-x0)*sqrt(3*E/(K+1)))+sqrt(3)*B1*exp((x-x0)*sqrt(3));

% FUNCTION
f=@(t,x) [x(2); ...
    3*E*(1+x(1))/((1+K*x(3))*(x(3))^3) - 3*x(2) * x(4)/(x(3));...
    x(4);...
    -1/(x(3)^3) - x(1)];

% SHOOTING METHOD
tspan=[-infinity, infinity];
myguess=[P, PI, H, HI]; % initial guess for P', H'
[actualvalue, Fval, exitflag]=fsolve('shootingfunc_thin_100',myguess);
init=actualvalue; % new initial paramaters
[t,X]=ode45(f,tspan,init);

%% Function file
function [ f ] = shootingfunc_thin_100( a )
%shootingfunc_thin: Shooting from thin to thick
%   optimizes P=0 at infinity only
E=6.5;
K=0.0474;

fun=@(t,x) [x(2); ...
    3*E*(1+x(1))/((1+K*x(3))*(x(3))^3) - 3*x(2) * x(4)/(x(3));...
    x(4);...
    -1/(x(3)^3) - x(1)];

infinity=10^2;
tspan=[-infinity, infinity];
init=[-1 a(2) 1 a(4)]; % initial conditions at thin
%options=odeset('RelTol',1e-10); %'RelTol',1e-16
[t,x]=ode45(fun,tspan,init);
f=x(end,1);
end 
```

# php - 在用户PHP的计算机中保存缓存

> ID：13590181
> 
> 赞同：-6
> 
> 时间：2012-11-27T17:54:47.373
> 
> 标签：php, caching

好的？

我正在开发一个在线签到系统，但是自从他出生以来，我也需要这个系统离线工作。

例如：我已连接，我加载了所有联系人，我希望他将它缓存在用户的设备上，因为互联网已关闭，我仍然可以访问这些数据。

我怎么能这样做？

拥抱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:56:48.977

HTML5 LocalStorage 是您的答案。从字面上看，在 JavaScript 中，如果`localStorage`对象不是未定义的，则可以使用它来永久存储变量。从那里，编写一个 JSON 导出并使用 JavaScript 将所有数据转储到此中以供以后重复使用。

# svg - 在点击事件中访问 D3 SVG 对象

> ID：13590184
> 
> 赞同：6
> 
> 时间：2012-11-27T17:55:03.660
> 
> 标签：svg, onclick, d3.js

我正在制作一个气泡图，并为每个圆圈附加了一个点击事件。单击圆圈时，气泡图将替换为表示更详细信息的新图。

以下是部分代码：

```
svg.selectAll("circle")
               .data(dataset)
               .enter()
               .append("circle")
               .attr("cx", function(d) {
                    return scaleX(d[2]);
               })
               .attr("cy", function(d) {
                    return scaleY(100 - d[1]);
               })
               .attr("r", function(d) {
                    return d[1];
               })
               .attr("fill", "#4eb157")
               .attr("stroke", "#00c4d4")
               .attr("stroke-width", function(d) {

                    return d[1]*(1-d[2]/100)*1.5;

               })
               .on("click", function ()
                                    {

                                       svg.selectAll("circle")
                                       .data(new_dataset)
                                       .enter()
                                       .append("circle")
                                       .attr("cx", function(d) {
                                            return scaleX(d[2]);
                                       })
                                       .attr("cy", function(d) {
                                            return scaleY(100 - d[1]);
                                       })
                                       .attr("r", function(d) {
                                            return d[1];
                                       })
                                       .attr("fill", "#4eb157")
                                       .attr("stroke", "#00c4d4")
                                       .attr("stroke-width", function(d) {

                                            return d[1]*(1-d[2]/100)*1.5;

                                        });             

                                    svg.selectAll("text")
                                       .data(new_dataset)
                                       .enter()
                                       .append("text")
                                       .text(function(d) {
                                            return d[0];
                                       })
                                       .attr("x", function(d) {
                                            return scaleX(d[2]);
                                       })
                                       .attr("y", function(d) {
                                            return scaleY(100 - d[1]);
                                       })
                                       .attr("font-family", "sans-serif")
                                       .attr("font-size", "11px")
                                       .attr("fill", "red");
                                    }); 
```

当我点击圆圈时，问题就来了，整个图表消失了，但没有新的图表被可视化。我发现在执行 on click 函数期间，svg 对象已从其初始状态更改，特别是一些属性，例如 baseURI、clientHeight、clientWidth 等不再设置，即使它们在最初创建 svg 时已设置目的。这是我创建 svg 对象的代码：

```
var svg = d3.select("body").append("svg")
                    .attr("width", w)
                    .attr("height", h); 
```

我的问题是为什么新图表没有出现？这是因为 svg 对象的属性发生了变化吗？为了使新图形成功可视化，我应该在点击功能中进行哪些更改？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:36:59.497

问题在于，`onclick`如果您选择`svg`元素下的所有圆圈并将它们与`new_dataset`. 您可能想要选择另一组圆元素并加入`new_dataset`这组圆。一种方法是在 下创建两个组`svg`，一个用于原始集，另一个用于 的圆圈`new_dataset`，另一种解决方案是为不同的圆圈组分配不同的类，并使用该类缩小每个选择。

在以下链接中，您可以找到有关加入机制的更清晰说明：

*   [D3 教程 - Scott Murray](http://alignedleft.com/tutorials/d3)
*   [用联接思考 - Mike Bostok](http://bost.ocks.org/mike/join/)

# c# - 将通用集合过滤到包含字符串集合中任何项目的记录

> ID：13590186
> 
> 赞同：0
> 
> 时间：2012-11-27T17:55:22.677
> 
> 标签：c#, linq, generic-list

```
string rep = "Joe Shmoe"

ObjectSet<StoreData> storeData = edmContext.StoreData;
ObjectSet<CallData> callData = edmContext.CallData;
IEnumerable<string> repStoreData = storeData.Where(r => r.RepName == rep).Select(s => s.Location);

IEnumerable<CallData> repCallData = Here is where I want to filter down the callData collection down to just the records that have a location that is contained in the repStoreData collection 
```

我尝试过使用某种形式的 Join 和 Any 但并不真正理解那些要求的论点。

这是我最好的尝试，这是不行的。

`... = callData.Join(d => d.LOCATION.Any(repStoreData));`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:59:00.073

好吧，您不必使用联接。你可以只使用：

```
callData.Where(d => repStoreData.Contains(d.LOCATION)) 
```

假设`d.LOCATION`是一个*字符串*。

但是，您可能不想使用当前的`repStoreData`as声明来执行此操作`IEnumerable<string>`- LINQ 将无法将其转换为要在数据库中执行*的查询*。

但是，如果您能够声明`repStoreData`为`IQueryable<string>`，那将更有可能运作良好。我不知道这是否适用于`ObjectSet<T>`，但我希望如此。

# python - 为什么 CouchDb-python（或者我）会混淆字符串和字典？

> ID：13590189
> 
> 赞同：0
> 
> 时间：2012-11-27T17:55:29.940
> 
> 标签：python, couchdb, couchdb-python

我正在尝试使用 CouchDB 的 Python 包装器来更新数据库。该文件的结构如下嵌套字典。

```
doc = { ...,
   'RLSoo': {'RT_freq': 2, 'tweet': "They're going to play monopoly now. 
     This makes me feel like an excellent mother. #Sandy #NYC"}, 
    'GiltCityNYC': {},
  ....} 
```

我想将较大字典的每个条目，例如`RLSoo`放入其自己的文档中。但是，当我尝试以下代码时收到错误消息。

```
 for key in doc:
      db.update(doc[key],all_or_nothing=True) 
```

**错误信息**

```
TypeError: expected dict, got <type 'str'> 
```

我不明白为什么 CouchDB 不接受字典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:07:55.903

根据[`Database.update()`](http://code.google.com/p/couchdb-python/source/browse/couchdb/client.py#714)方法实现和他的文档，第一个参数应该是文档对象列表（例如字典列表）。由于您`doc`的变量具有 dict 类型，因此直接迭代它实际上会迭代他所有的字符串类型的键。如果我理解你的情况正确，可能你`doc`包含嵌套文档作为[values](http://docs.python.org/2/library/stdtypes.html#dict.values)。所以，试试：

```
db.update(doc.values(), all_or_nothing=True) 
```

并且所有第一级值都是字典，它应该可以工作！

# webbrowser-control - 确定用户是否在 WebBrowser 控件中选择了刷新

> ID：13590191
> 
> 赞同：0
> 
> 时间：2012-11-27T17:55:39.617
> 
> 标签：webbrowser-control, autohotkey, beforenavigate2

如何检测用户是否`Refresh`通过上下文菜单选择？当用户选择它时，该`NavigateComplete2`方法不会被调用。

更重要的是，要设置自己的自定义用户代理，一种方法是挂钩`BeforeNavigate2`事件方法，并且需要知道用户是否选择了刷新或导航新的 url。

任何见解将不胜感激。

这表明该方法在被选中`NavigateComplete2`时不会被触发。`Refresh`

```
oWB := new WebBrowserControl("http://stackoverflow.com")
Class WebBrowserControl
{

    __New(strURL) { 
        static WB
        Gui, New, Resize 
        Gui, Add, ActiveX, vWB w780 h580, Shell.Explorer  
        Gui, show, w800 h600

        ComObjConnect(WB, this) 

        WB.Navigate(strURL)
        Loop
           Sleep 10
        Until (WB.readyState=4 && WB.document.readyState="complete" && !WB.busy)    
        Return
        GuiClose:
        ExitApp
    }

    NavigateComplete2(oParams*) {
        ComObjError(false)  
        WB := oParams[1]
        msgbox, 64, Navigate Completed
            , % "WB.locationURL :`t`t" WB.locationURL "`n"
            . "WB.Document.URL:`t`t" WB.Document.URL "`n"
            . "windowlocation.href:`t" WB.document.parentWindow.location.href
    }

    BeforeNavigate2(oParams*) {

        WB := oParams[8]
        strURL := oParams[2]        

        msgbox % "Loading URL:`t`t" strURL "`n"
            . "WB.locationURL :`t`t" WB.locationURL "`n"
            . "WB.Document.URL:`t`t" WB.Document.URL "`n"
            . "location.href:`t`t" WB.document.parentWindow.location.href "`n"
            . "WB.ReadyState:`t`t" WB.readystate "`n"
            . "WB.document.readystate:`t" WB.document.readystate "`n"
            . "WB.Busy:`t`t`t" WB.Busy "`n"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T12:26:04.597

查看是否已启动刷新（或新页面）的一种方法是使用以下命令监视鼠标状态（在 Chrome 中，不确定其他浏览器）： if/while (A_Cursor = "AppStarting")。当鼠标光标变成沙漏时，这是正确的。

比较以前的和新的 URL 会告诉您这是新请求还是刷新： ControlGetText CurrentURL, Chrome_OmniboxView1, Chrome

希望这可以帮助。

# python - 使用 python 网络服务器屏幕 SVG 文件

> ID：13590192
> 
> 赞同：0
> 
> 时间：2012-11-27T17:55:40.023
> 
> 标签：python, svg, cgi

我想筛选从服务器生成的网页中的 svg 文件。这是我的服务器：

```
#!/usr/bin/python

import BaseHTTPServer
import CGIHTTPServer
import cgitb; cgitb.enable() 

server = BaseHTTPServer.HTTPServer
handler = CGIHTTPServer.CGIHTTPRequestHandler
server_address = ("0.0.0.0", 8123)
handler.cgi_directories = ['/WEBSERVER']

httpd = server(server_address, handler)

try:    
    print "Running HTTP server"
    httpd.serve_forever()
except KeyboardInterrupt:
    print "Server Stoped" 
```

这是我的脚本：

```
import cgitb
import cgi
print 'Content-type: text/html'
    print '''
    <html>
    <head>
    </head>

    <body>
    '''
print """<embed data="http://0.0.0.0:8123/WEBSERVER/358336657.svg" type="image/svg+xml"></embed>""" 
```

我的服务器是从 WEBSERVER 之前的目录启动的。我尝试使用对象，使用 img，使用所有不同路径的 div，使用或不使用 http，是否在绝对路径中，在 /tmp 中，我尝试使用 777 chown 和 chmod 的所有组合，使用所有不同的 DOCTYPE...没有工作筛选它的唯一方法是打开 svg 文件并打印它，但我不希望这样，我想用地址调用它。

有解决办法吗？？？

# database - CakePHP 网站中的 CSS 和 JavaScript 文件未链接

> ID：13590193
> 
> 赞同：1
> 
> 时间：2012-11-27T17:55:43.127
> 
> 标签：database, .htaccess, cakephp, mod-rewrite, localhost

我正在使用 PHP v5.2.4 上的 MAMP 在本地主机上运行我的测试站点。我已经多次尝试备份在 CakePHP v1.2 中配置的两个网站，同时传输数据库并为数据库输入正确的凭据。网站如何连接到数据库是通过 app/config 文件夹中的 database.php 文件，将凭据放入以下：

```
class DATABASE_CONFIG {

    var $default = array(
            'driver' => 'mysqli',
            'persistent' => false,
            'host' => 'localhost',
            'login' => 'user',
            'password' => 'password',
            'database' => 'nameofdatabase',
            'prefix' => '',
    );
} 
```

输入用户名和密码后，我正确输入了数据库配置。

在主页上，它如下所示： ![无法读取 CSS 和 JavaScript 文件的主页](../Images/8bf93fd79cd8109dea4d432a6f202452.png)

但是，当我单击其中一个链接时，它看起来像普通页面，从 webroot 文件夹中读取 CSS 和 JavaScript 文件。

![单击链接，链接的 CSS 和 JavaScript 工作](../Images/27d7e0ec21994fc75478fe940f715081.png)

我尝试按照@EoinMurphy 的回答并`RewriteBase /`在所有 .htaccess 文件上编写代码，但没有成功。即使我的 CakePHP 版本错误，我仍然使用[这些说明](http://book.cakephp.org/2.0/en/installation/advanced-installation.html)来配置网站，因为它的说明比[这组](http://book.cakephp.org/1.2/en/view/35/Advanced-Installation)令我感到困惑的说明更清晰。

我不明白为什么似乎所有内部​​页面上都在读取 CSS 和 JavaScript，而不是网站的主页？我能弄清楚如何链接 CSS 和 JavaScript 文件的唯一方法是使用`<link src="" ... />`文件上的 输出索引页面内容。

*唯一的另一个较早的问题是链接之后的（[http://..](http://..) .）等链接的输出，但它只是 CSS 中的以下内容使其输出：*

```
a:link:after, a:visited:after {
content:" (" attr(href) ")"; /*the content CSS made it spill out the links*/
font-size:90%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:41:04.560

这与我将 CakePHP 网站从实时环境迁移到开发环境的最新发现有关。

将 CakePHP 放入 webroot 的子文件夹时，必须使用 Apache config、RewriteBase。

因此，如果您安装了 WAMP，启用了 MOD_REWRITE 扩展，并将“实时”网站移动到 C:\wamp\www\live

打开 \live.htaccess、\live\app.htaccess、\live\app\webroot.htaccess 中的 .htaccess 文件并添加“RewriteBase \live”行。

如此处所示：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)

只是回顾一些要记住的事情：

1.  启用 mod_rewrite
2.  RewriteBase 如果在子文件夹中
3.  确保数据库基础设置正确。

# javascript - Javascript 启用/禁用按钮未按预期工作

> ID：13590195
> 
> 赞同：0
> 
> 时间：2012-11-27T17:55:48.637
> 
> 标签：javascript, html, asp.net-mvc-3

这是我的登录视图：

```
@model SuburbanCustPortal.Models.LogOnModel

@{
    ViewBag.Title = "Log On";
}

<h2>Log On</h2>
<p>
  Please enter your user name and password. @Html.ActionLink("Register", "Register") if you don't have an account.
</p>

<p>
  If only you wish to make a payment on your account and do not want to create a website login, @Html.ActionLink("click here", "RedirectToPaymentPage", "Account").
</p>

@Html.ValidationSummary(true, "Login was unsuccessful. Please correct the errors and try again.")

@using (Html.BeginForm()) {
    <div>
        <fieldset>
            <legend>Account Information</legend>

            <div class="editor-label">
                @Html.LabelFor(m => m.UserName)
            </div>
            <div class="editor-field focus">
                @Html.TextBoxFor(m => m.UserName, new { @class = "GenericTextBox", onkeyup = "enableLogonButton()" })
                @Html.ValidationMessageFor(m => m.UserName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.Password)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.Password, new { @class = "GenericPasswordBox", onkeyup = "enableLogonButton()" })
                @Html.ValidationMessageFor(m => m.Password)
            </div>

            <div class="editor-label">
                @Html.CheckBoxFor(m => m.RememberMe)
                @Html.LabelFor(m => m.RememberMe)
            </div>

          <p>
            <button name="btn" value="Log On" onclick="disableButton()" disabled="disabled">Log On</button>
          </p>

          <p>
            If you need to retrieve your username @Html.ActionLink("click here.", "ForgotUsername", "Account")<br/>
            If you need to reset your password @Html.ActionLink("click here.", "ForgotPassword", "Account")
          </p>

        </fieldset>
    </div>
} 
```

这是我的 widget.js：

```
function enableLogonButton() {
  if ($('#UserName').val() == "") {
    $('#btn').attr('disabled', 'disabled');
    return;
  }
  if ($('#Password').val() == "") {
    $('#btn').attr('disabled', 'disabled');
    return;
  }
  $('#btn').removeAttr('disabled');
}

    function logonDisableSubmitButtons(clickedButton) {

        $("input[type='button']").each(function() {
          if (this.name != clickedButton)
            $(this).attr("disabled", "disabled");
          else {
            //hiding the actually clicked button
            $(this).hide();
            //Creating dummy button to same like clicked button
            $(this).after('<input type="button" disabled="disabled" value="' + $(this).val() + '" class="' + $(this).attr('class') + '" />');
          }
        });

      }

      function disableButton() {

        $('#btn').click(function (e) {
          $(this).attr('disabled', 'disabled');
        });

      } 
```

无论我做什么，我都没有启用按钮。

我想要的是两件事：

1.  当用户在登录名和用户名中有内容时，启用提交按钮。
2.  当他们单击提交时，该按钮被禁用，因此他们无法单击两次。

我也没有运气。

**我已经进行了下面建议的更改，但是一旦我在字段中输入了某些内容，该按钮仍未启用**

** 进一步测试**

我按照以下建议添加了警报（）：

```
function enableLogonButton() {
  alert("start");
  if ($('#UserName').val() == "") {
    alert("username");
    $('#btn').attr('disabled', 'disabled');
    return;
  }
  if ($('#Password').val() == "") {
    alert("password");
    $('#btn').attr('disabled', 'disabled');
    return;
  }
  alert("enabled");
  $('#btn').removeAttr('disabled');
} 
```

他们中没有一个正在开火。至少，我没有得到任何提示。

所以，然后我将调用更改为 this 以确保它甚至可以看到 JScript：

```
@Html.PasswordFor(m => m.Password, new { @class = "GenericPasswordBox", onkeyup = "enableLogonButtonX()" }) 
```

我收到这条消息：

> Microsoft JScript 运行时错误：“enableLogonButtonX”未定义

所以，我相信它正在看到 JScript。

然后我添加了这个：

```
<script>
    function myFunction() {
      alert("hit!");
    }
</script> 
```

并改变了这一点：

```
 <button name="btn" value="Log On" onclick="myFunction()" disabled="disabled">Log On</button> 
```

我的“命中”奏效了。所以，我相信 onclick 也有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:58:19.887

`disabled`是布尔属性，而不是属性。

设置：

```
$('#btn').attr('disabled', 'disabled'); 
```

清除：

```
$('#btn').removeAttr('disabled') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T23:08:50.663

除非我没有足够仔细地阅读您的问题（诚然，可能是这种情况，因为它是在 5 点之后......喝啤酒的时间）或者您的问题中有错字，我认为您的错误信息为您提供了一切需要调试这个。

这是您的留言：`Microsoft JScript runtime error: 'enableLogonButtonX' is undefined`

这是您的函数名称：`enableLogonButton`

因此，根据错误消息，您正在调用该函数`enableLogonButtonX()`，但您的函数名为`enableLogonButton`。改成这样：

```
@Html.PasswordFor(m => m.Password, new {
        @class = "GenericPasswordBox", 
        onkeyup = "enableLogonButton()" }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T17:59:00.260

而不是更改禁用属性的值，将其从元素中完全删除。

即替换这个

```
$('#btn').attr('disabled', false); 
```

和

```
$('#btn').removeAttr('disabled'); 
```

# ravendb - RavenDB 文档结构与关系模式

> ID：13590197
> 
> 赞同：1
> 
> 时间：2012-11-27T17:55:58.400
> 
> 标签：ravendb

我最近开始使用 RavenDB。

这是关系数据库中的一个传统示例：

## 员工类型

ID:1 类型:DEV ID:2 类型:QA

## 员工

姓名：弗雷德 TYPEID：1
姓名：JACK TYPEID：2

根据我对 RavenDB 的了解，该类型将包含在员工中：

## 员工

名称：FRED 类型：DEV
名称：JACK 类型：QA

那么是否需要 EmployeeType 表？

如果不是，如果您要显示员工类型的下拉列表，您会从 Employee 中选择 distinct(Type) 吗？

如果您要执行上述操作，您将如何在不输入新员工（或编辑现有员工）的情况下添加新员工类型？或者你会在某个地方的代码中保留一个列表吗？

最后，如果更改了员工类型的文本，您似乎需要更新所有员工记录。如果有 100,000 条员工记录怎么办？

我是 Raven（文档数据库）的新手，因此任何有助于我更好地掌握不同范式的见解将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:39:31.517

> 那么是否需要 EmployeeType 表？

将有满足下一个问题的要求。此外，这种类型的参考数据可以只存储在单个文档中，而不是文档集合中。您还可以维护一个硬编码列表，一起绕过数据库。

> 如果不是，如果您要显示员工类型的下拉列表，您会从 Employee 中选择 distinct(Type) 吗？

否。从员工类型文档中选择。从员工表中选择不同的选项会告诉您记录的员工类型，而不是可用的员工类型。

> 最后，如果更改了员工类型的文本，您似乎需要更新所有员工记录。如果有 100,000 条员工记录怎么办？

您正面临关系数据库和文档数据库之间的有效权衡。你有几个选择。您可以通过指向员工类型文档集合的 ID 从员工文档中引用员工类型。这样，您可以在一处更改员工类型名称。但是，权衡是 RavenDB 将需要包含（连接）这两个文档以返回具有类型的员工。另一种方法是避免使用员工类型 ID 并将类型直接存储在员工文档中，当需要更改名称时，您将在所有文档中运行更新。从 RavenDB 文档看[这里。](http://ravendb.net/docs/theory/document-structure-design)

# ios - 视网膜显示上的 glDrawArrays 问题

> ID：13590201
> 
> 赞同：1
> 
> 时间：2012-11-27T17:56:12.177
> 
> 标签：ios, cocos2d-iphone

我想在 cocos2d 中使用 glDrawArray 方法绘制全屏大小的简单正方形。当视网膜被禁用时，一切都按预期绘制，但启用时 - 一切都是应有的一半。（似乎 glDrawArray 中的坐标系不是以点为单位，而是以像素为单位）

其他绘图函数按预期工作，但由于我正在绘制复杂的形状，我们必须使用 glDrawArray，因为它要快得多。

任何想法如何解决这个问题？

```
-(void) draw
{
    CGPoint box[4];
    CGPoint boxTex[4];

    CGSize winSize = [[CCDirector sharedDirector] winSize];

    //float boxSize = winSize.width;

    box[0] = ccp(0,winSize.height); // top left
    box[1] = ccp(0,0); // bottom left
    box[2] = ccp(winSize.width,winSize.height);
    box[3] = ccp(winSize.width,0);

    boxTex[0] = ccp(0,1);
    boxTex[1] = ccp(0,0);
    boxTex[2] = ccp(1,1);
    boxTex[3] = ccp(1,0);

    // texture backround
    glBindTexture(GL_TEXTURE_2D, self.sprite.texture.name);
    glVertexPointer(2, GL_FLOAT, 0, box);
    glTexCoordPointer(2, GL_FLOAT, 0, boxTex);
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T02:48:54.903

是的，绘图是以像素为单位完成的，所以为了在视网膜显示器上也能正确渲染，您需要将顶点乘以 CC_CONTENT_SCALE_FACTOR()：

```
for (int i = 0; i < 3; i++)
    box[i] = ccpMult(box[i], CC_CONTENT_SCALE_FACTOR()); 
```

CC_CONTENT_SCALE_FACTOR 在视网膜设备上返回 2 而不是 1，因此使用它应该注意缩放。

# operating-system - 专门为游戏机仿真创建操作系统是否可行？

> ID：13590206
> 
> 赞同：1
> 
> 时间：2012-11-27T17:56:29.307
> 
> 标签：operating-system, emulation

由于当前模拟器在现有操作系统中运行，因此该操作系统并未 100% 优化以将尽可能多的资源提供给模拟器。

是否有可能创建或修改一个您可以启动的操作系统，并且可以立即选择加载 rom 等，而无需将系统资源花费在仿真所需之外的任何东西上。（也许是定制的 Linux 发行版？）

# python - How to Loop x Times With Functional Style?

> ID：13590210
> 
> 赞同：0
> 
> 时间：2012-11-27T17:56:31.600
> 
> 标签：python, functional-programming, iteration

I have this recursive function:

```
def lifecycle(population):
    ...
    lifecycle(new_population) 
```

I want to perform this loop 100 times. I want to use correct functional style. So, I cannot use a counter? Because assigning new values to a variable is not okay in functional programming. How does one do this functionally? I'm using Python.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:03:12.280

Technically, like this:

```
def lifecycle(population, i):
    if i == 100:
        return ...
    ...
    return lifecycle(new_population, i + 1) 
```

But this is a really, really silly thing to do in Python (and it fails for all but the smallest examples, due to tail calls being not optimized). Just use a loop, although that uses mutable state under the hood, the remaining program can be perfectly functional.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:58:09.757

You do it recursively, and by adding a decreasing (or increasing) loop variable.

```
def lifecycle(population, n):
    if n == 0:
        return population
    ...
    return lifecycle(new_population, n-1) 
```

You must return the population if you want it to be truly functional because functional programming frowns upon side-effects.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T17:58:39.430

Something like this for example:

```
def lifecycle(population, n, maxN):
    if n >= maxN: return
    new_population = population
    lifecycle(new_population, n+1, maxN)

lifecycle(['an initial population or something'], 0, 1000) 
```

# c++ - 对向量对象进行错误排序 C++

> ID：13590214
> 
> 赞同：1
> 
> 时间：2012-11-27T17:56:44.920
> 
> 标签：c++, sorting, vector

当我尝试对自定义对象的向量进行排序时，我遇到了一个奇怪的问题。我有这个代码：

```
class Chromosome {
public:
   Chromosome(int c_w);       
   void setFitness(double fit);
   double getFitness() const;                
}; 
```

和比较功能：

```
bool compareChromosomes(const Chromosome* l, const Chromosome* r) {
   return l->getFitness() <= r->getFitness();
} 
```

我创建了染色体的向量：`vector<Chromosome*> popv;`并添加了一些染色体。

当我尝试用`sort(popv.begin(), popv.end(), compareChromosomes);`

这是结果：

排序前：

染色体0：0.205595

染色体1：0.370121

染色体2：0.363655

染色体3：0.363655

**染色体4：0.858721**

染色体 5：0.192359

染色体6：0.582279

染色体7：0.202899

染色体 8：0.205105

染色体9：0.187058

排序后

**染色体0：-0.474942**

染色体1：0.187058

染色体2：0.192359

染色体3：0.202899

染色体4：0.205105

染色体5：0.205595

染色体6：0.363655

染色体7：0.363655

染色体 8：0.370121

染色体9：0.582279

问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:58:05.373

您的比较函数并不严格 - 对于两个相等的染色体，它返回`true`（`compareChromosomes`无论顺序如何）。**用strict less**替换您的条件：

```
bool compareChromosomes(const Chromosome* l, const Chromosome* r) {
   return l->getFitness() < r->getFitness();
   //                     |
   //                  <, not <=
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:58:01.130

将 0.858721 改为 -0.474942 的原因不是因为您的比较功能。您没有发布的代码肯定有其他原因。试试下面的代码：输出没问题。

```
#include <vector>
#include <iostream>
#include <algorithm>

using namespace std;

class Chromosome {
public:
  Chromosome(int c_w) :mCw(c_w) { }
  void setFitness(double fit) { mFit = fit; }
  double getFitness() const { return mFit; }
  int getCW() const { return mCw; }
private:
  int mCw;
  double mFit;
};

bool compareChromosomes(const Chromosome* l, const Chromosome* r) {
   return l->getFitness() <= r->getFitness();
}

int main( int argc, char *argv[] ) {
  // init your data
  vector<Chromosome *> popv;
  popv.push_back( new Chromosome( 0 ) );
  popv[ popv.size() - 1 ]->setFitness( 0.205595 );
  popv.push_back( new Chromosome( 1 ) );
  popv[ popv.size() - 1 ]->setFitness( 0.370121 );
  popv.push_back( new Chromosome( 2 ) );
  popv[ popv.size() - 1 ]->setFitness( 0.363655 );
  popv.push_back( new Chromosome( 3 ) );
  popv[ popv.size() - 1 ]->setFitness( 0.363655 );
  popv.push_back( new Chromosome( 4 ) );
  popv[ popv.size() - 1 ]->setFitness( 0.858721 );
  popv.push_back( new Chromosome( 5 ) );
  popv[ popv.size() - 1 ]->setFitness( 0.192359 );
  popv.push_back( new Chromosome( 6 ) );
  popv[ popv.size() - 1 ]->setFitness( 0.582279 );
  popv.push_back( new Chromosome( 7 ) );
  popv[ popv.size() - 1 ]->setFitness( 0.202899 );
  popv.push_back( new Chromosome( 8 ) );
  popv[ popv.size() - 1 ]->setFitness( 0.205105 );
  popv.push_back( new Chromosome( 9 ) );
  popv[ popv.size() - 1 ]->setFitness( 0.187058 );
  // sort
  sort( popv.begin(), popv.end(), compareChromosomes );
  for( size_t i = 0; i < popv.size(); i++ ) {
    cout << "cromosoma " << popv[i]->getCW() << ":" << popv[i]->getFitness() << endl;
  }

  return 0;
} 
```

# ffmpeg - FFMPEG - 组合视频时出错

> ID：13590221
> 
> 赞同：3
> 
> 时间：2012-11-27T17:57:00.883
> 
> 标签：ffmpeg

我有两个大小相似的 .OGG 文件，FPS 和持续时间。我的目标是使用 FFMPEG 将它们组合成一个并排的演示文稿。为此，我尝试了以下 cmd：

> ffmpeg -i subject.ogg -vf "[in]pad=3*iw:3*ih[left];movie=clinician.ogg[right];[left] [right]overlay=100:0[out]" 组合.ogg

可以说生成的视频是不可播放的。在组合过程中，FFMPEG 打印出许多错误，如下所示：

> [Parsed_overlay_2 @ 0x1eb7d3e0] 缓冲区队列溢出，丢弃

这是在告诉我什么？

笔记：

*   两个源文件都可以播放
*   为了理解参数，我将“输出”填充得相当大
*   第二个视频在 100:0 的位置是任意的。一旦我让 cmd 工作，我会将它移动到输出中更好的位置。
*   这两个视频都是从网络摄像机录制的 .FLV 开始的。我将它们转换为 .ogg，因为 FFMPEG 不想合并两个 .FLV 文件。如果有更好的途径，请告诉我。

那么 - 我的参数有什么问题，我在做什么来导致这些 FFMPEG 错误？

编辑：
ffmpeg -i Clinician.ogg

> 输入 #0，ogg，来自 'clinician.ogg'：
> 持续时间：00:05:20.98，开始：0.001000，比特率：2273 kb/s
> 流 #0:0：视频：theora，yuv420p，500x500 [SAR 1:1 DAR 1:1]，1k tbr，1k tbn，1k tbc
> 元数据：
> 服务器：Red5 服务器 1.0.0 RC1 $Rev：4193 $
> CANSEEKTOEND：真
> 编码器：Lavf54.31.100
> 流 #0:1：音频：vorbis，8000 Hz，立体声, s16
> 元数据：
> 服务器：Red5 服务器 1.0.0 RC1 $Rev：4193 $
> CANSEEKTOEND：真
> 编码器：Lavf54.31.100

ffmpeg -i 主题.ogg

> 输入 #0，ogg，来自“subject.ogg”：
> 持续时间：00:05:17.60，开始：0.001000，比特率：1341 kb/s
> 流 #0:0：视频：theora，yuv420p，300x300 [SAR 1:1 DAR 1:1]，83.33 tbr，1k tbn，1k tbc
> 元数据：
> 服务器：Red5 服务器 1.0.0 RC1 $Rev：4193 $
> CANSEEKTOEND：真
> 编码器：Lavf54.31.100
> 流 #0:1：音频：vorbis，8000 Hz，立体声, s16
> 元数据：
> 服务器：Red5 服务器 1.0.0 RC1 $Rev：4193 $
> CANSEEKTOEND：真
> 编码器：Lavf54.31.100

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T19:34:36.627

转换为 x264 是一个很好的建议。这似乎扭转了局势。

以下是一些后人的注意事项：

*   将 flv 转换为 x264 并纠正音频同步问题：

> ffmpeg -y -i subject_s_2242_r_1658.flv -async 1 -ac 2 -strict -2 -acodec vorbis \
> -c:v libx264 -preset slow -crf 22 subject.mkv

*   将两个 x264 文件合并到一个并排文件中，并将两个单声道音轨放入结果文件中的立体声：

> ffmpeg -y -i Clinician.mkv -vf: "movie=subject.mkv[right];pad=iw*2:ih:0:0[left];[left][right]overlay=500:0" \
> - filter_complex "amovie=clinician.mkv[l];amovie=subject.mkv[r];[l][r] amerge" final.mkv

我无法安装 AVISYNTH（在 CentOS 6.2 上运行），但它看起来确实是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:33:50.307

[使用Avisynth](http://avisynth.org/mediawiki/Main_Page)可能最容易做到这一点。

制作以下 input.avs 文件：

```
a = AviSource("first.avi")
b = AviSource("second.avi")
StackHorizontal(a,b) 
```

然后运行 ​​ffmpeg -i input.avs output.avi ... 以及您想要的任何其他选项。

**编辑：**另一种方法（不快）是将两个文件中的帧转储到 png 并将它们与 ImageMagick （例如`montage`）或类似的图像处理工具结合起来。

```
#!/bin/bash
ffmpeg -i first.avi first_%05d.png
ffmpeg -i second.avi second_%05d.png
for file in first_*.png ; do montage ${file} ${file/first/second} ${file/first/output} ; done
ffmpeg -i output_%05d.png output.avi 
```

这实际上使您可以进行更多的图像处理，而不仅仅是并排，您可以进行任意比例/叠加/背景/等。问题是来自一个文件的第 N 帧可能与来自另一个文件的第 N 帧不完全相同，如果它们是可变帧速率，那么 AviSynth 可以完美地为您处理。如果剪辑是恒定的帧速率，那不是问题。

通过制作包含这样的新剪辑（无论是否通过avisynth）来组合剪辑需要重新压缩视频，并降低视频质量/增加文件大小。

我不确定如何将 ogg 文件读入 Avisynth，但可能有一种方法。检查[输入格式的常见问题解答](http://avisynth.org/mediawiki/FAQ_loading_clips)。

旁注：theora/ogg 的选择很奇怪。更好：mp4 容器中的 H.264。

# c++ - 也许我误解了 C++ 异常？

> ID：13590223
> 
> 赞同：2
> 
> 时间：2012-11-27T17:57:06.327
> 
> 标签：c++, xml, exception, error-handling

我试图将我的头脑围绕着异常，我猜想他们可以做什么，更重要的是他们应该做什么和不应该做什么。

所以，我将举一个例子来说明我是如何思考一个非常具体的问题的，并希望人们会祝福或抨击我的想法。

我正在从 xml 文件中读取设置，所以我可能有这些设置，但也存在特定设置可能不存在的情况，这会产生一些麻烦和很多“点错误处理”或者叫什么，类型：（注意：这不是“真正的代码”，而只是一些伪代码，希望能说明我的观点）。

```
if (xml.attribute("some_attrib")) {
    settingForSomeAttrib = xml.attribute("some_attrib")->value();
} else {
    settingForSomeAttrib = "some default value";
} 
```

所以这会让我或多或少地为我想做的每件事和任何事情留下支票和分配，这是不可取的。

然后我在想，也许我可以通过这一切，获取任何出错的东西并将其交给默认值，有点只是尝试让它正确，任何不成功的东西我们会在之后处理..

引导我进行一种`try/catch`思考。

然后我在想也许我可以做一个尝试块：

```
try {
    setting1 = xml.attribute("attr1")->value(); // throws some kind of "attr1" exception?
    setting2 = xml.attribute("attr2")->value(); // -||-                "attr2" exception?
} catch (???) {
    //go through the things which went wrong and set them settings straight!
} 
```

希望这有某种意义，或者至少可以遵循我的思路。我觉得这并不是真正应该如何使用异常。

我在想我的问题是这样的：

1）异常可以像这样使用还是只是一个坏主意？2）人们通常如何在 C++ 中进行此操作以获取在检查有效性时并不臃肿的代码？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T18:01:01.607

我当然不会使用异常来处理仅仅是可选的设置。

相反，我会按照以下方式做一些事情：

```
string getString(const XML& xml, const string& attrib, const string& defaultAttrib) {
  if (xml.attribute(attrib)) {
    return xml.attribute(attrib)->value();
  } else {
    return defaultAttrib;
  }
}

...
setting1 = getString(xml, "attrib1", "attrib1_default");
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T18:01:06.850

我偶尔会看到以这种方式使用异常，但我认为这里没有必要或可取，尤其是因为您似乎必须完成所有各种设置，或者手动跟踪您的位置停了下来。

怎么样

```
setting1 = attribute_value(xml, "attr1", default1);
setting2 = attribute_value(xml, "attr2", default2); 
```

where`attribute_value`将包含判断是否`"attr1"`存在的逻辑。

# c# - 如何在不删除所有条件的情况下覆盖现有绑定？

> ID：13590224
> 
> 赞同：12
> 
> 时间：2012-11-27T17:57:09.413
> 
> 标签：c#, .net, ninject

我目前在使用 Ninject 时面临的挑战是，当我使用`Rebind<>()`它时，它**会删除所有**绑定，即使是有条件的绑定。让我在下面给你一个愚蠢的例子。基本上，在我的情况下，我发现不受欢迎的行为是，当调用 Rebind 时，它将删除条件`WhenInjectedInto<T>`绑定，而不是仅仅覆盖 non-conditional `Bind<T>`。在下面的示例中，ctor 中的合约`Contract.Assert(cat is Wild);`在 Rebind 后将失败。

有没有办法做我想做的事 - 能够保持已经注入的条件绑定并只覆盖非条件绑定？

PS：实际上，我正在尝试使用 DataContext 范围做一些有趣的事情，具体取决于它们的注入位置（在请求中或在异步命令中）

```
void Main()
{
    StandardKernel kernel = new StandardKernel();

    kernel.Bind<ICat>().To<Wild>();
    kernel.Bind<ICat>().To<Wild>()
        .WhenInjectedInto<EvilCat>();

    kernel.Rebind<ICat>().To<Domestic>();

    Contract.Assert(kernel.Get<ICat>() is Domestic);
    kernel.Get<EvilCat>();
}

interface ICat {}

class Domestic : ICat {}

class Wild : ICat { }

class EvilCat
{
    public EvilCat(ICat cat) {
        Contract.Assert(cat is Wild);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T21:10:07.877

尝试这个：

```
kernel.GetBindings(typeof(ICat)).
            Where(binding => !binding.IsConditional).
            ToList().
            ForEach(
                binding => 
                    kernel.RemoveBinding(binding)
            )

kernel.Bind<ICat>().To<Domestic>(); 
```

当然，你可以在 foreach 中不使用 LINQ：

```
var bindings = kernel.GetBindings(typeof(ICat)).ToList();
foreach(var binding in bindings)
{
     if (!binding.IsConditional)
          kernel.RemoveBinding(binding);
}

kernel.Bind<ICat>().To<Domestic>(); 
```

# sql - 为什么这个程序会生成两封电子邮件？

> ID：13590225
> 
> 赞同：0
> 
> 时间：2012-11-27T17:57:14.097
> 
> 标签：sql, sql-server, tsql

以下存储过程由我们的代理每 5 分钟运行一次 - 它`Control_EmailQueue`使用此过程扫描表以查看是否有任何新电子邮件要发送。

我想测试在表格中输入不正确的电子邮件信息时 proc 的行为`Control_EmailQueue`。下面详细介绍了两个测试及其结果。

**TEST1**
我添加了一条在所有 3 个字段`Control_EmailQueue`中都有`NULL`条目的记录`EmailTO/EmailCC and EmailBCC`。这工作正常，即错误被捕获并`CATCH`执行其中的代码，因此我收到一封标题为`'ERROR OCCURED DURING EMAIL CREATION'`

**TEST2**
我向`Control_EmailQueue`. 在该字段中`EmailTO`，我输入此字符串`'me@me.co.uk; xxxxxxx@xxxxx'`，即第一个电子邮件地址有效，但第二个电子邮件地址*无效*。当代理运行该过程时，收到一封电子邮件，`me@me.co.uk`但半秒后收到另一封相同的电子邮件`me@me.co.uk`。由于未收到`CATCH`标题为标题的电子邮件，因此在此测试中不执行代码`'ERROR OCCURED DURING EMAIL CREATION'`。

```
BEGIN TRY

    DECLARE @Exit TINYINT = 0
    WHILE @Exit = 0
        BEGIN

        BEGIN TRANSACTION

            DECLARE @MailIdFound INT =
            (
            SELECT 
                    CASE 
                            WHEN MIN([EmailId]) IS NULL THEN 0
                            ELSE MIN([EmailId])
                    END
            FROM [xxx].[console].[Control_EmailQueue]
            WHERE
                    [DateInsertKey] IS NOT NULL 
                    AND
                        ( --the following gives option to re-run past mails by updating DateEmailKey to NULL
                        [DateEmailKey] IS NULL
                        OR
                        [DateEmailKey] < [DateInsertKey]
                        )
                    AND 
                    ErrorOccured = 0
                    AND 
                    EmailActive = 1
            )

            IF @MailIdFound = 0 
            BEGIN SET @Exit = 1 END --exit here as  
            ELSE

            BEGIN --send the mail here

                    --DECLARE @EmailId INT
                    DECLARE @DateInsertKey INT
                    DECLARE @DateEmailKey INT
                    DECLARE @CallingReportName NVARCHAR(1000)
                    DECLARE @EmailBCC  NVARCHAR(1000)
                    DECLARE @EmailTO  NVARCHAR(1000)
                    DECLARE @EmailCC NVARCHAR(1000)
                    DECLARE @EmailBody NVARCHAR(MAX)
                    DECLARE @EmailAttachmentPath NVARCHAR(1000)
                    DECLARE @EmailImportance VARCHAR(6)
                    DECLARE @EmailSubject NVARCHAR(1000)

                    ;WITH myMostUrgentMail_cte
                    AS
                            (
                            SELECT 
                                    TOP 1
                                    --[EmailId],
                                    [DateInsertKey],
                                    [DateEmailKey],
                                    [CallingReportName],
                                    [EmailBCC],
                                    [EmailTO],
                                    [EmailCC],
                                    [EmailBody],
                                    [EmailAttachmentPath],
                                    [EmailImportance],
                                    [EmailSubject]
                            FROM [xxx].[console].[Control_EmailQueue]
                            WHERE [EmailId] = @MailIdFound
                            )
                    SELECT 
                            @DateInsertKey          = [DateInsertKey],
                            @DateEmailKey           = [DateEmailKey],
                            @CallingReportName = [CallingReportName],
                            @EmailTO                    = [EmailTO],        
                            @EmailCC                    = [EmailCC],                        
                            @EmailBCC               = [EmailBCC],
                            @EmailBody              = [EmailBody],
                            @EmailAttachmentPath = [EmailAttachmentPath],
                            @EmailImportance        = CASE 
                                                                                WHEN [EmailImportance] = 0 THEN 'Low'
                                                                                WHEN [EmailImportance] = 1 THEN 'Normal'
                                                                                WHEN [EmailImportance] = 2 THEN 'High'
                                                                    END,
                            @EmailSubject           = [EmailSubject]
                    FROM myMostUrgentMail_cte

                    SET @EmailBody = @EmailBody + '<b>Please contact us with any questions</b></p></span></html>'
                    EXEC msdb..sp_send_dbmail
                            @recipients                     = @EmailTO,  
                            @copy_recipients            = @EmailCC,
                            @blind_copy_recipients  = @EmailBCC,
                            @subject                            = @EmailSubject,
                            @file_attachments          = @EmailAttachmentPath,
                            @Importance                 = @EmailImportance,
                            @body_format                    = 'html',
                            @body                               = @EmailBody    

                    UPDATE x
                    SET 
                                x.[DateEmailKey]        = (CONVERT(CHAR(8),GETDATE(),(112))),
                                x.[DateEmailTime]   = (CONVERT([time](7),left(CONVERT([char](12),GETDATE(),(114)),(8)),(0)))
                    FROM [xxx].[console].[Control_EmailQueue] x
                    WHERE x.[EmailId] = @MailIdFound

            END

        COMMIT TRANSACTION

        END

END TRY

BEGIN CATCH

     IF @@trancount>0 
        BEGIN
                ROLLBACK TRANSACTION
        END

    -- handle error here
    DECLARE @ErrorMessage VARCHAR(100) =  '<html><p>Error occured during creation of EmailId: ' + CONVERT(VARCHAR(10),@MailIdFound) + '</p><p>xxx.console.Control_EmailQueue</p></html>'
    EXEC msdb..sp_send_dbmail
            @recipients = 'me@me.co.uk;'
            , @subject = 'ERROR OCCURED DURING EMAIL CREATION'
            , @body_format = 'html'
            , @body = @ErrorMessage

    UPDATE x
    SET x.ErrorOccured = 1
    FROM [xxx].[console].[Control_EmailQueue] x
    WHERE x.[EmailId] = @MailIdFound

END CATCH;
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:58:05.063

问题似乎与交易的时间安排有关。通过在提交后添加延迟，事务能够在执行下一个循环之前完成并提交。

您可能应该做的一件事是从[sp_send_dbmail](http://msdn.microsoft.com/en-us/library/ms190307.aspx)获取 mailitem_id 。也许您是正确的并且它失败了，但没有出错，但这不应该影响交易。我唯一能想到的是你正在弄脏或幻读，因为事务实际上还没有提交，所以小的延迟允许数据实际被提交。

# ruby - 如何让我的模块方法测试通过 - RSPEC 错误

> ID：13590227
> 
> 赞同：0
> 
> 时间：2012-11-27T17:57:18.713
> 
> 标签：ruby, rspec

好的，所以我是一个 rspec 菜鸟，我正在尝试测试一个位于模块内部的方法。下面是我的测试文件、我正在测试的代码以及我遇到的错误。任何指导将不胜感激。

提前致谢。

这是我的规格文件 gamestat_spec.rb

```
require 'gamestate'
require 'board'

describe 'Gamestate module' do
  before (:each) do
    @player_human = Player.get_player('X')
    @player_computer = Player.get_player('O')    
  end
  describe 'is_a_human_win' do
    it 'receives current board' do
      class GamestateTester
        include ::GameState
      end
      human_win_test = GamestateTester.new
      myboard = Board.new
      myboard.grid[:a1] = "X"
      myboard.grid[:b2] = "X"
      myboard.grid[:c3] = "X"
      human_win_tester.is_a_human_win(@myboard).should_receive(:puts)
    end
    xit 'looks for human win'
    xit 'if win found returns...Human Wins'
  end
  describe 'is_a_computer_win' do
    xit 'receives current board'
    xit 'looks for computer win'
    xit 'if win found returns...Computer Wins'
  end
end 
```

这是我正在测试的模块文件...gamestate.rb ....

```
module GameState

  def is_a_human_win(board)

  win_moves = {
    :wm01 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"X"},
    :wm02 => {:a1=>" ", :a2=>"X", :a3=>" ", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>" ", :c2=>"X", :c3=>" "},
    :wm03 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>"X", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>" "},
    :wm04 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>"X", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>" "},
    :wm05 => {:a1=>"X", :a2=>"X", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
    :wm06 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>"X", :c3=>"X"},
    :wm07 => {:a1=>"X", :a2=>" ", :a3=>" ", :b1=>"X", :b2=>" ", :b3=>" ", :c1=>"X", :c2=>" ", :c3=>" "},
    :wm08 => {:a1=>" ", :a2=>" ", :a3=>"X", :b1=>" ", :b2=>" ", :b3=>"X", :c1=>" ", :c2=>" ", :c3=>"X"}
  }

  x_on_the_gameboard = board.grid.select{ |k, v| v == "X" }.keys

    win_moves.each do |k,v|
      win_moves_keys = v.select{ |k, v| v == "X"}.keys

      matching_moves = win_moves_keys & x_on_the_gameboard

      if matching_moves.length >= 3 

        p 'key: '+k.to_s

        string_contains = k.to_s
        if string_contains =~ /wm/ 
          puts "Human Wins"
          # return 1
          exit
        else

        end
      end
    end
  end

  def is_a_computer_win(board)

  ai_winmoves = {
    :wm01 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>"O"},
    :wm02 => {:a1=>" ", :a2=>"O", :a3=>" ", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>" ", :c2=>"O", :c3=>" "},
    :wm03 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>"O", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
    :wm04 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>"O", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>" "},
    :wm05 => {:a1=>"O", :a2=>"O", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>" ", :c2=>" ", :c3=>" "},
    :wm06 => {:a1=>" ", :a2=>" ", :a3=>" ", :b1=>" ", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>"O", :c3=>"O"},
    :wm07 => {:a1=>"O", :a2=>" ", :a3=>" ", :b1=>"O", :b2=>" ", :b3=>" ", :c1=>"O", :c2=>" ", :c3=>" "},
    :wm08 => {:a1=>" ", :a2=>" ", :a3=>"O", :b1=>" ", :b2=>" ", :b3=>"O", :c1=>" ", :c2=>" ", :c3=>"O"}
  }

  o_on_the_gameboard = board.grid.select{ |k, v| v == "O" }.keys

    ai_winmoves.each do |k,v|
      ai_winmoves_keys = v.select{ |k, v| v == "O"}.keys

      matching_moves = ai_winmoves_keys & o_on_the_gameboard

      if matching_moves.length >= 3 

        p 'key: '+k.to_s

        test_string_contains = k.to_s
        if test_string_contains =~ /wm/ 
          puts "Computer Wins"
          # return -1
          exit
        else

        end
      end
    end
  end
end 
```

这是我得到的错误....

```
Failures:

  1) Gamestate module is_a_human_win receives current board
     Failure/Error: human_win_tester.is_a_human_win(@myboard).should_receive(:puts)
     NameError:
       undefined local variable or method `human_win_tester' for #<RSpec::Core::ExampleGroup::Nested_3::Nested_1:0x007f8ef43fa0b8>
     # ./spec/gamestate_spec.rb:20:in `block (3 levels) in <top (required)>'

Finished in 0.01865 seconds
23 examples, 1 failure, 6 pending 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:05:39.257

看起来它甚至不是 Rspec 问题，只是 ruby​​ 语法。:)

这部分：

```
 class GamestateTester
   include 'gamestate'
 end 
```

应该：

```
 class GamestateTester
   include ::GameState
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:52:39.447

简单的旧错字。你的对象中有一个额外的 er ;)

```
human_win_test = GamestateTester.new
...
human_win_tester.should .... 
```

# android - XML 文件错误 - 找不到资源

> ID：13590230
> 
> 赞同：0
> 
> 时间：2012-11-27T17:57:31.180
> 
> 标签：android, xml, r.java-file

这是我的问题。

我目前正在为井字游戏设置相对布局。它由 9 个 ImageButtons 和 8 个用于获取网格的 Views 组成。

我的 xmlfile 中有错误，说“找不到资源”（即使 id 已正确构建到我的 r.class 中），或者当我将布局引用重新输入到其他视图时错误消失。但是，如果我重新键入它，清理项目并再次构建它，eclipse 会让我的 R.class 消失。

这是我的 XML 文件：

```
 `<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/notepad2" >    

    <View 
    android:layout_width="5dp" 
    android:layout_height="160dp"
    android:background="#FF0000"
    android:layout_toLeftOf="@id/hor2"
    android:id="@+id/vert1"
    />

 <View 
    android:layout_width="5dp" 
    android:layout_height="160dp"
    android:background="#FF0000"
    android:layout_toLeftOf="@id/hor3"
    android:id="@+id/vert2"
    />

 <View 
    android:layout_width="50dp" 
    android:layout_height="5dp"
    android:background="#FF0000"

    android:layout_alignLeft="@id/feld4"
    android:layout_above="@id/feld4"
    android:id="@+id/hor1"
    />

 <View 
    android:layout_width="50dp" 
    android:layout_height="5dp"
    android:background="#FF0000"

    android:layout_alignLeft="@id/feld5"
    android:layout_above="@id/feld5"
    android:id="@+id/hor2"
    />

 <View 
    android:layout_width="50dp" 
    android:layout_height="5dp"
    android:background="#FF0000"

    android:layout_alignLeft="@id/feld6"
    android:layout_above="@id/feld6"
    android:id="@+id/hor3"
    />

  <View 
    android:layout_width="50dp" 
    android:layout_height="5dp"
    android:background="#FF0000"

    android:layout_alignLeft="@id/feld4"
    android:layout_below="@id/feld4"
    android:id="@+id/hor4"
    />

 <View 
    android:layout_width="50dp" 
    android:layout_height="5dp"
    android:background="#FF0000"

    android:layout_alignLeft="@id/feld5"
    android:layout_below="@id/feld5"
    android:id="@+id/hor5"
    />

 <View 
    android:layout_width="50dp" 
    android:layout_height="5dp"
    android:background="#FF0000"

    android:layout_alignLeft="@id/feld5"
    android:layout_below="@id/feld6"
    android:id="@+id/hor6"
    />

<ImageButton
    android:id="@+id/feld1"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:background="@drawable/leer"
    android:contentDescription="@string/feld"
    android:layout_toLeftOf="@id/vert1"
    android:layout_alignTop="@id/vert1"
    />

<ImageButton
    android:id="@+id/feld2"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:background="@drawable/leer"
    android:contentDescription="@string/feld"
    android:layout_above="@id/hor2"
    android:layout_alignLeft="@id/hor2"
     />

 <ImageButton
    android:id="@+id/feld3"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:background="@drawable/leer"
    android:contentDescription="@string/feld"
    android:layout_toRightOf="@id/vert2"
    android:layout_alignTop="@id/vert2"
    />

  <ImageButton
    android:id="@+id/feld4"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:background="@drawable/leer"
    android:contentDescription="@string/feld"
    android:layout_toLeftOf="@id/vert1"
    android:layout_alignTop="@id/feld5"
    />

 <ImageButton
    android:id="@+id/feld5"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:background="@drawable/leer"
    android:contentDescription="@string/feld"
    android:layout_centerInParent="true"
    />

<ImageButton
    android:id="@+id/feld6"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:background="@drawable/leer"
    android:contentDescription="@string/feld"
    android:layout_toRightOf="@id/vert2"
    android:layout_alignTop="@id/feld5"
    />

<ImageButton
    android:id="@+id/feld7"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:background="@drawable/leer"
    android:contentDescription="@string/feld"
    android:layout_toLeftOf="@id/vert1"
    android:layout_below="@id/hor4"
    />

<ImageButton
    android:id="@+id/feld8"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:background="@drawable/leer"
    android:contentDescription="@string/feld"
    android:layout_toRightOf="@id/vert1"
    android:layout_below="@id/hor4"
    />

<ImageButton
    android:id="@+id/feld9"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:background="@drawable/leer"
    android:contentDescription="@string/feld"
    android:layout_toRightOf="@id/vert2"
    android:layout_below="@id/hor4"
    />

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/winners"
    android:text="@string/winner"
    android:layout_alignParentBottom="true"
    android:textColor="#FFFFFF"
/>

<Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/anotherGame"
    android:visibility="invisible"
    android:layout_above="@id/winners"
    android:text="@string/newGameButton"
/> 
```

`

有人知道如何解决吗？

我已经尝试过通常的方法。更正了 xml 文件中的“错误”，清理了项目，重新构建了它等等。没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:12:02.680

从您的第一个视图中，我看到了很多这样的问题：

```
<View 
    android:layout_width="5dp" 
    android:layout_height="160dp"
    android:background="#FF0000"
    android:layout_toLeftOf="@id/hor2"
    android:id="@+id/vert1"
    /> 
```

`hor2`尚未声明，您必须使用`@+id`：

```
 android:layout_toLeftOf="@+id/hor2" 
```

您需要更新所有这些以使用正确的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:31:59.553

`@+id/`虽然 Sam 走在正确的轨道上，但当您不设置`android:id`属性 时，这对用户来说实际上是一种不好的做法。`@+id/`如果它不存在，实际上会尝试将该 id 添加到您的 R 文件中。这可能会导致您删除另一个对齐的元素时出现问题，但由于您正在使用，因此不会引发错误`@+id/`

相反，您应该在 xml 文件中定义基于它们对齐的视图上方的布局。例如，`winners`应该去下面`anotherGame`

```
<Button
    android:id="@+id/anotherGame"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/winners"
    android:text="@string/newGameButton"
    android:visibility="invisible" />

<TextView
    android:id="@+id/winners"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:text="@string/winner"
    android:textColor="#FFFFFF" /> 
```

如果您绝对无法将所有视图声明在基于它们对齐的视图之上，则可以使用`@+id/`

# asp.net - 将文件从视图发布到控制器

> ID：13590236
> 
> 赞同：0
> 
> 时间：2012-11-27T17:58:15.420
> 
> 标签：asp.net, asp.net-mvc, file, post

我有以下代码：

```
<div>
  <input type="file" name ="file" onchange="location.href='<%: Url.Action("ChangeImage", new{Id = Model.Id}) %>'" />
</div> 
```

在控制器中我有 ChangeImage 方法：

```
 public ActionResult ChangeImage(FormCollection collection, int Id,Products products)
    {
        var file = Request.Files["file"];

        //Do something
    } 
```

但所选文件不会发布到控制器。问题是什么？如何将文件内容发送到控制器以使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:01:29.093

因为您没有发布表单数据可能是原因。

在创建用于提交文件的 MVC 表单时，您必须指定“enctype”，使用助手您可以这样做：

```
@using (Html.BeginForm("MyAction", "MyController", new { @Id = Model.Id }, FormMethod.Post, new { name = "Form", enctype = "multipart/form-data" }))
{
    //all form fields code in here
} 
```

然后你会想要改变你的 javascript 来发布表单，比如：

```
document.forms[0].submit();//assuming you only have one form 
```

此外，您的操作参数似乎与任何内容都不匹配。具体`ShopID`和`products`。您可能会收到错误消息，因为您没有它们的默认值。不过，我不是 100% 确定那部分。或者也许你在表格的其他部分有，所以可能没问题

# java - 输出前导零一个 int 变量

> ID：13590237
> 
> 赞同：-3
> 
> 时间：2012-11-27T17:58:19.133
> 
> 标签：java

我正在尝试输出一系列二进制数字，下一系列二进制数字取决于前一系列二进制数字。其中一些系列以一个或多个零开头。我只能使用`int`变量。

因此，如果程序以 开头`0`，则下一个输出将是`01`然后`0110`，依此类推。如果 int 以零开头，我是否必须硬编码前导零，或者有其他方法可以做到这一点吗？

另外，`Integer.toBinaryString()`将数字输出为二进制的唯一方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:02:05.037

只需[格式化](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)输出，您的语法没有意义，因为 is 的值`01`，`1`编译器只是将值存储为数字，而不是数字序列。尝试：

```
int x = 1;
System.out.printf("%02d", x); 
```

更准确地说，当您放置前导 0 时，数字文字被解释为八进制（以 8 为基数）。所以`01`没关系，但`08`会是非法的（因为 8 不是有效的八进制数字）。这适用于许多编程语言。

在任何情况下都不要将数字*文字*与数值*混淆*。编译器将文字转换为一个值，并且该值是在运行时有效使用的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:59:43.377

如果你的问题真的这么简单，那么你应该试试这个：

```
System.out.print("0"+x); 
```

您可能知道，整数存储值。输出到屏幕的内容被转换为字符串。整数将被转换为没有前导零的字符串。

顺便说一句，如果你以 0 开头的数字常量，在 Java 中这意味着你指定了一个八进制数。

推荐阅读：[Java 字面量](http://en.wikibooks.org/wiki/Java_Programming/Literals/Numeric_Literals/Integer_Literals)

但是，如果您的问题更严重，例如您应该以给定格式输出数字，那么您绝对应该阅读[DecimalFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)

```
System.out.println(new DecimalFormat("00").format(x)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T18:00:36.933

该类型`int`只存储一个数字整数值，仅此而已。`int`变量不存储前导零，也不存储输入数字的基数。在您的情况下，前导零表示八进制文字，无论如何这可能不是您的意思。

如果要存储前导零，则必须使用不同的方法，例如按照您的建议使用字符串。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-11-27T18:03:29.427

据我所知，没有，因为 java 试图通过删除不需要的 0 来节省内存使用。最好的方法是将它创建为一个字符串并创建一个方法，该方法可以计时、添加、删除、将字符串整数除以字符串整数（乘以 no，然后将 0 读取到开头）。

编辑

```
public String addStringInteger(String x1, Integer i){
    String leading0 = "";
    String nol = "";
    boolean onLeading = true;
    for(char c : x1.toCharArray()){
        String l = Character.toString(c);
        if(onLeading && l.equals("0")){
            leading0 += "0";
        }else{
            onLeading = false;
            nol += l;
        }
    }
    int intO = Integer.parseInt(nol) + i; //you can change + to x, -, / etc
    return leading0 + ""+ intO;
} 
```

此示例将允许您执行 addStringInteger("001", 20) 并且您将返回 0021，可以编辑该方法以便您返回 021，但我将其作为一个快速示例，这种方法应该能够执行任何操作。

# win32-process - PE部分字段位值IMAGE_SCN_MEM_SHARED是什么意思？

> ID：13590240
> 
> 赞同：2
> 
> 时间：2012-11-27T17:58:23.440
> 
> 标签：win32-process

在 PE/COFF 格式文件（例如，Windows 可执行文件）的部分标题中有一个名为特性的字段，其位掩码值为 IMAGE_SCN_MEM_SHARED (0x10000000)，规范将其描述为“该部分可以在记忆。” 这是什么意思？与什么共享？

另外，只要我们在这个话题上，IMAGE_SCN_MEM_EXECUTE 设置和 IMAGE_SCN_CNT_CODE 设置有什么区别？

读/写设置是否会导致在内存上设置标志以使其可读/可写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:34:18.767

这意味着此部分内存可以与同一映像的另一个进程实例共享。

# xcode - 如何重命名工作区？

> ID：13590241
> 
> 赞同：1
> 
> 时间：2012-11-27T17:58:23.453
> 
> 标签：xcode

我需要将我的工作区从“ABC DEF”重命名为“ABCDEF”，关闭它然后简单地在文件系统中重命名它（如此处所建议，[在 xcode 4 中重命名工作区](https://stackoverflow.com/questions/10977179/rename-a-workspace-in-xcode-4)）不起作用，因为当我随后构建它时我得到了错误提示“ABC DEF.xcworkspace”是一个丢失的文件。

在重命名它之前和之后，我清理了构建并删除了 Organizer 中的派生数据，但是一定有一些残留的东西叫做“ABC DEF”，但是在哪里？

4.5 版

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:41:39.767

在文件系统中重命名确实有效，但我必须清理/退出/重新启动/Xcode 两次以删除对旧名称的残留引用！

# machine-learning - 在 scikit 中使用 libsvm 格式

> ID：13590247
> 
> 赞同：3
> 
> 时间：2012-11-27T17:58:46.800
> 
> 标签：machine-learning, libsvm, scikit-learn, pca

我对所有这些工具都很陌生。我一直在使用 libsvm 并想使用 scikit。但我所有的输入都是 libsvm 格式。像这样的东西

```
 +1 1:1 36:1
 +1 1:1 11:1 25:1 36:1 
```

我使用load_svmlight_files函数加载，加载我加载的训练数据后看起来像这样 (1, 0) 1.0 (1, 35) 1.0 (2, 0) 1.0 (2, 10) 1.0 (2, 24) 1.0 (2, 35) 1.0

但是当我尝试使用 pylab scatter 它返回

```
 ValueError: setting an array element with a sequence. 
```

如何将我的数据更改为 scikit 二维数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T22:35:00.670

`sklearn.datasets.load_svmlight_file`, 会将数据加载为`scipy.sparse`CSR 矩阵，而 matplotlib 散点图需要一个 NumPy 数组。如果您认为将稀疏数据具体化为密集的 NumPy 数组将适合内存，您可以`.toarray()`在其上调用该方法。

此外，散点图仅对二维数组数据有意义。

# python - 使用 Python Bottle 的网络助手

> ID：13590253
> 
> 赞同：2
> 
> 时间：2012-11-27T17:59:09.247
> 
> 标签：python, html, bottle, mako

我已经使用 Mako 模板启动并运行了一个 Python Bottle 应用程序。我想使用 webhelpers 模块（在 Pylons Web 应用程序中使用），但我不确定如何去做。我希望能够在我的 mako 模板中执行此操作：

```
${h.stylesheet_link("some_link_url_text")} 
```

并让它生成正确的链接 HTML。但是当我运行它时，h 是未定义的，正如你所想象的那样。

关于如何做到这一点的任何想法或指示？在此先感谢道格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:54:38.760

Webhelpers 是一个单独的模块，可以轻松安装。

```
pip install webhelpers 
```

然后你可以创建一个名为 helpers.py 的 python 模块。然后在模块中导入您想要的所有功能，如下所示

```
"""
helpers.py
Import all webhelpers that you want to have access to
"""
from webhelpers.html.tags import stylesheet_link 
```

然后在您的瓶子应用程序中导入助手模块，然后将其作为 h.h 传递给您的模板。

```
import helpers

@route('/')
def index():
    return Template("template_name").render(h=helpers) 
```

然后在你的模板中像上面一样使用它

```
${h.stylesheet_link("some_link_url_text")} 
```

# maven - 部署在具有快照策略但版本中没有 SNAPSHOT 字符串的关系工件上

> ID：13590257
> 
> 赞同：6
> 
> 时间：2012-11-27T17:59:27.857
> 
> 标签：maven, deployment, jenkins, nexus, snapshot

显然，如果工件在版本中没有 -SNAPSHOT，我的 Nexus 会拒绝我向他投掷的每一次部署。

数据：

*   失败工件的名称：entando-core-engine-experiment-bundles_with_bootstrap.jar 其中 Experiment **-bundles_with_bootstrap**是*pom.xml 的 version 元素中的版本*
*   在我的 Nexus 上托管存储库策略：快照、允许重新部署等（快照的经典配置）
*   部署者：詹金斯 1.481
*   相同的 Jenkins 工作，但 entando-core-engine- **SNAPSHOT** .jar ---> SUCCESS

我需要这个命名约定，因为我正在构建我们在内部运行的几个实验之一，这与生成正确 entando-core-engine-SNAPSHOT.jar 的规范开发分支相反

有什么建议吗？我完全迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:29:48.247

问题是通常您的 Nexus 配置为不允许重新部署版本。从 Maven 的角度来看，发布是一个工件，它的版本不是**-SNAPSHOT**。与此相反，SNAPSHOT 旨在多次部署到关系中。
这听起来像您没有使用 Maven 的发布插件，也没有使用 Jenkins 的发布插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:12:43.493

Nexus 是一个存储库管理器，它使用不同的存储库格式，主要格式是 Maven 存储库格式。更改服务器上工件的名称是不可能的，因为它违反了格式。它们必须位于由 groupId、artifactId 和 version 建立的目录结构中，并使用 artifactId-version-classifier.packaging 作为文件名。

如果您需要在服务器上使用不同的文件名，则必须查看不同的存储库格式（坏主意）。如果您需要客户端上的文件名，只需从正确的名称下载并重命名..

# dynamics-crm-2011 - 如何在 Dynamics CRM 中开发这样的工具？

> ID：13590268
> 
> 赞同：0
> 
> 时间：2012-11-27T18:00:06.227
> 
> 标签：dynamics-crm-2011, dynamics-crm

我已经实现了视频[http://screenr.com/LgS7](http://screenr.com/LgS7) (Salesforce) 中说明的功能。

现在我需要在 Dynamics CRM 中做同样的事情。我已经阅读了许多有关 Dynamics 的内容，并且对它越来越熟悉，但仍在努力找到完成这项特定任务的方法。

如何在 Dynamics CRM 中实现这样的时间跟踪工具？我应该通过创建插件、自定义操作还是两者兼而有之？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:57:45.260

您只能使用 Javascript 和一些功能区按钮来完成。

这是一篇文章，解释了一点 JavaScript 与 Dynamics CRM。它基于 SOAP 和 REST。

[在 Microsoft Dynamics CRM 2011 中使用 JavaScript](http://msdn.microsoft.com/en-us/library/hh771584.aspx)

我建议的方法是让 2 个功能区按钮与电影中的按钮相同。然后将包含按钮背后逻辑的 JAvascript 文件添加到您将使用的实体的表单中。

这是在 Dynamics CRM 中将功能区按钮添加到功能区的链接

[可视化功能区编辑器](http://crmvisualribbonedit.codeplex.com/)

# .htaccess - htaccess 重定向从凌乱的 url 到清理一个

> ID：13590275
> 
> 赞同：0
> 
> 时间：2012-11-27T18:00:30.917
> 
> 标签：.htaccess, redirect

一封带有一些 URL 的电子邮件被发送到我的网站，不幸的是，这些链接以某种方式显示了我使用的工具的一些跟踪，并且该网站在 URL 上阻塞。

如何重定向传入的请求

```
http://www.mysite.com/?utm_source=mysite+List&utm_campaign=xxxxxxxx-blah_blah_blah_blah&utm_medium=email#!/clients/myclient/ 
```

到

```
http://www.mysite.com/folder/page/ 
```

我尝试使用

```
Redirect http://www\\.mysite\\.com/\\?utm_source=mysite\\+List\\&utm_campaign=xxxxxxxx-blah_blah_blah_blah\\&utm_medium=email#!/clients/myclient/ http://www\\.mysite\\.com/folder/page/ 
```

但它没有用。

该站点已经有一些规则，因此它应该仅在需要时重定向并让其他规则起作用

我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:05:15.137

我不知道你需要多精确，但它不起作用的原因是它不理解查询字符串。您需要使用 rewritecond 和 rewrite。

```
RewriteCond %{QUERY_STRING} ^utm_source
RewriteRule (.*) http://www.mysite.com/folder/page/? [R=301,L] 
```

如果查询字符串中有 utm_source，这将重定向所有流量。

# c# - 从基类调用子类的构造函数

> ID：13590278
> 
> 赞同：0
> 
> 时间：2012-11-27T18:00:37.833
> 
> 标签：c#, oop, constructor

假设您有一个抽象基类：

```
abstract class abstractBaseClass {
    public abstractBaseClass(object argument);

    public abstractBaseClass instanceMethod() {
         //call the constructor of the concrete class here.
    }
} 
```

你有一个基类：

```
class baseClass {
    public baseClass(object argument) : abstractBaseClass(object argument)
} 
```

如果你有一个实例方法，`abstractBaseClass`有没有办法在实例方法中调用该具体类的构造函数而不求助于反射？

`concreteBaseClass(object)`假设在任何给定的具体基类上至少有一个带有签名的构造函数似乎是合理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:03:42.820

> 如果您在 abstractBaseClass 上有一个实例方法，是否有任何方法可以调用该具体类的构造函数

实际上，您已经这样做了。`Abstract`如果不是由它的派生类，则无法初始化类。

```
abstractBaseClass  abs  = new baseClass(); 
```

这里**真正的**对象类型是`baseClass`，所以按照`ctor`惯例会调用它的 。

**编辑**

**如果**您的意思是构造 * 一个新的 * 真实对象，该对象托管在抽象引用中（Sevy 在评论中提到的东西），我建议在这一点上使用覆盖模式。像这样的东西：

```
abstract class abstractBaseClass {
    public abstract abstractBaseClass(object argument);
    public abstract abstractBaseClass CreateMe();
}

class baseClass : abstractBaseClass
{
   ...
   public override abstractBaseClass CreateMe(){
      return new baseClass();
   }
} 
```

使用后喜欢

```
abstractBaseClass  newAbs = abs.CreateMe(); 
```

像这样的东西，只是一个想法。您应该自己找出适合您需求的真实、具体的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:10:49.600

如果你的意思是，“我可以`new baseClass()`在里面打电话`abstractBaseClass`，那么是的，你可以。

如果您的意思是“我可以动态地找出从我那里继承的类和新的类”，那么不，不是不使用反射。您无法知道是否有多个类型从您那里继承。

This is, by the way, a pretty weird scenario and sounds like it violates a whole lot of best practices for OOP. Perhaps you would be better off creating a factory class to create your objects?

# jquery - 我的网页上的横幅滑块出现问题

> ID：13590279
> 
> 赞同：0
> 
> 时间：2012-11-27T18:00:44.177
> 
> 标签：jquery, magento

我试图让我的横幅在我的 Magento 网站上运行，但它正在引发这个错误，阻止它运行。![在此处输入图像描述](../Images/a8b1a9c1f4b64608099328992c68ea62.png)

我见过一些有类似问题的案例，但似乎无法弄清楚出了什么问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:19:56.103

您好，我认为您的页面上有多个 jQuery 实例

像 jquery.js ,jquery.min.js ,jquery 1.5.2.min.js 检查哪些 js 适用于您的页面以运行滑块

# opencv - iPhoto人脸识别算法

> ID：13590281
> 
> 赞同：0
> 
> 时间：2012-11-27T18:00:56.767
> 
> 标签：opencv, face-recognition

我正在编写一个项目，我们需要能够使用 OpenCV 识别人脸。我正在根据照片训练我的基地，然后将测试照片提供给我们参加的人的计划。识别效果很好（80-90%）。但！如果我给程序一张我们在基地教学中没有使用的人的照片，程序会在我们的基地找到一个距离很近的人。同时，Apple iPhoto 适用于所有照片。谁能知道他们用什么算法来识别人脸？还是有我的问题？请帮忙。

PS 测试算法：LBPHFaceRecognizer、FisherFaceRecognizer、EigenFaceRecognizer。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:38:22.753

你提到了 iPhoto，所以我假设你使用的是 OS X 或 iOS。如果是这样，您可能想尝试[Apple 的内置人脸检测](http://www.panic.com/blog/2012/11/fun-with-face-recognition/)。

# ruby-on-rails - 为什么在回调中保存属性/更新记录会给我一个“堆栈级别太深”的错误？

> ID：13590283
> 
> 赞同：1
> 
> 时间：2012-11-27T18:01:05.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3

**更新 2**

顺便说一句，当我打字时， `Update 1`@muffinista 发布了我得出的相同结论`Update 1`，我只是想澄清一下，我不是在扼杀他的答案并随机更新问题。在发布问题后，我仔细考虑了一些问题，我意识到问题出在哪里。虽然@muffinista 发布了原因，但他的解决方案是不充分的——这就是我保持`Update 1`原样的原因——因为我找到了一个更好的解决方案，并且其他人获得完整的上下文是有意义的。

**更新 1**

所以我想出了是什么导致了这个错误，一个无限循环。

我正在尝试将记录保存在客户端记录`client`的`after_save`回调中。所以它不断尝试保存客户端记录并执行尝试保存客户端记录的 after_save 回调。

我怎样才能实现我想要的，即`client.weighted_score`每当更新记录时更新这个属性而不跳入这个循环？

**原始问题**

我有这个回调：

```
after_save :calculate_weighted_score, :if => Proc.new { |c| c.score.present? }

def calculate_weighted_score
    # Sum products of weight & scores of each attribute
        client = self
        weight = Weight.first
        score = self.score
        client.weighted_score = (weight.firm_size * score.firm_size) + (weight.priority_level * score.priority_level) + 
                (weight.inflection_point * score.inflection_point) + (weight.personal_priority * score.personal_priority) +
                (weight.sales_priority * score.sales_priority) + (weight.sales_team_priority * score.sales_team_priority) +
                (weight.days_since_contact * score.days_since_contact) + (weight.does_client_vote * score.does_client_vote) +
                (weight.did_client_vote_for_us * score.did_client_vote_for_us) + (weight.days_until_next_vote * score.days_until_next_vote) +
                (weight.does_client_vote_ii * score.does_client_vote_ii) + (weight.did_client_vote_ii_for_us * score.did_client_vote_ii_for_us) + 
                (weight.days_until_vote_ii * score.days_until_vote_ii)
        client.o
            # self.save
        # client.update_attributes(:weighted_score => weighted_score)
end 
```

这是运行此回调之前客户端记录状态的示例：

```
#<Client:0x007fe00dbcea90> {
                   :id => 10,
                 :name => "Manta-Jar Gale",
                :email => "mj@gmail.com",
                :phone => 8769876435,
              :firm_id => 1,
           :created_at => Fri, 23 Nov 2012 23:50:09 UTC +00:00,
           :updated_at => Tue, 27 Nov 2012 17:50:01 UTC +00:00,
              :user_id => 1,
    :personal_priority => true,
         :last_contact => Sat, 08 Jan 2011,
                 :vote => true,
        :vote_for_user => false,
            :next_vote => Thu, 02 Jan 2014,
              :vote_ii => true,
       :vote_ii_for_us => true,
         :next_vote_ii => Mon, 01 Jul 2013,
       :weighted_score => nil,
            :firm_size => 100.0
} 
```

注意`weighted_score => nil`属性。

回调之后，同样的记录如下所示：

```
#<Client:0x007fe00dbcea90> {
                   :id => 10,
                 :name => "Manta-Jar Gale",
                :email => "mj@gmail.com",
                :phone => 8769876435,
              :firm_id => 1,
           :created_at => Fri, 23 Nov 2012 23:50:09 UTC +00:00,
           :updated_at => Tue, 27 Nov 2012 17:50:01 UTC +00:00,
              :user_id => 1,
    :personal_priority => true,
         :last_contact => Sat, 08 Jan 2011,
                 :vote => true,
        :vote_for_user => false,
            :next_vote => Thu, 02 Jan 2014,
              :vote_ii => true,
       :vote_ii_for_us => true,
         :next_vote_ii => Mon, 01 Jul 2013,
       :weighted_score => 9808,
            :firm_size => 100.0
} 
```

注意`weighted_score => 9808`属性。

所以我知道回调`calculate_weighted_score`正在运行，整个回调似乎是正确的，直到分配`client.weighted_score`. 问题是，日志显示`UPDATE`该属性没有数据库事务：

```
Started PUT "/clients/10" for 127.0.0.1 at 2012-11-27 12:50:01 -0500
Processing by ClientsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"J172LuZQ=", "client"=>{"name"=>"Manta-Jar Gale", "email"=>"mj@gmail.com", "phone"=>"8769876435", "firm_id"=>"1", "topic_ids"=>["1", "2", "9"], "personal_priority"=>"1", "last_contact"=>"2011-01-08", "vote"=>"1", "vote_for_user"=>"0", "next_vote"=>"2014-01-02", "vote_ii"=>"1", "vote_ii_for_us"=>"1"}, "commit"=>"Update Client", "id"=>"10"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Client Load (0.2ms)  SELECT "clients".* FROM "clients" WHERE "clients"."user_id" = 1 AND "clients"."id" = ? LIMIT 1  [["id", "10"]]
  Topic Load (0.3ms)  SELECT "topics".* FROM "topics" 
   (0.1ms)  begin transaction
  Topic Load (0.2ms)  SELECT "topics".* FROM "topics" WHERE "topics"."id" IN (1, 2, 9)
  Topic Load (0.1ms)  SELECT "topics".* FROM "topics" INNER JOIN "clients_topics" ON "topics"."id" = "clients_topics"."topic_id" WHERE "clients_topics"."client_id" = 10
   (0.5ms)  UPDATE "clients" SET "name" = 'Manta-Jar Gale', "updated_at" = '2012-11-27 17:50:01.856893' WHERE "clients"."id" = 10
  Firm Load (0.2ms)  SELECT "firms".* FROM "firms" WHERE "firms"."id" = 1 LIMIT 1
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Score Load (0.2ms)  SELECT "scores".* FROM "scores" WHERE "scores"."client_id" = 10 LIMIT 1
  SalesTeam Load (0.1ms)  SELECT "sales_teams".* FROM "sales_teams" WHERE "sales_teams"."id" = 2 LIMIT 1
  PriorityLevel Load (0.1ms)  SELECT "priority_levels".* FROM "priority_levels" WHERE "priority_levels"."id" = 1 LIMIT 1
  CACHE (0.0ms)  SELECT "scores".* FROM "scores" WHERE "scores"."client_id" = 10 LIMIT 1
  Max Load (0.2ms)  SELECT "maxes".* FROM "maxes" WHERE "maxes"."user_id" = 1 LIMIT 1
  CACHE (0.0ms)  SELECT "scores".* FROM "scores" WHERE "scores"."client_id" = 10 LIMIT 1
  Weight Load (0.2ms)  SELECT "weights".* FROM "weights" LIMIT 1
   (3.2ms)  commit transaction
Redirected to http://localhost:3000/clients
Completed 302 Found in 796ms (ActiveRecord: 26.4ms) 
```

唯一的`UPDATE`交易是对我为测试回调所做的名称进行编辑。

我知道没有`UPDATE`交易，因为从技术上讲，我没有保存记录。

但是，当我尝试执行任何已注释掉的语句时——即`client.save`，或者`client.update_attributes(....)`我得到一个`Stack Level Too Deep`错误。

是什么原因造成的，如何保存此记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:30:07.150

正如@muffinista 所指出的（并在问题本身的更新中指定），这里的问题是回调正在尝试保存正在调用回调的记录，该回调正在尝试保存记录...创建一个`Stack Overflow`（偷了那个@ivan 关于[这个类似问题](https://stackoverflow.com/questions/215885/using-the-after-save-callback-to-modify-the-same-object-without-triggering-the-c)的笑话）。

似乎最好的答案是使用`update_column`-[可以在此处查看文档](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_column)。

这与做的事情相同`update_attributes`，但不做验证或回调——这对我在这个特定实例中想要的很好。

需要特别说明的`update_column`是， 的格式与`update_attributes`.

你要做的是：

```
client.update_column(:weighted_score, weighted_score) 
```

`:weighted_score`我的列名在哪里，并且`weighted_score`是我在上面的代码示例中设置的为我计算的局部变量。

对于它的价值，我从[这个 SO answer](https://stackoverflow.com/a/8662204/91970)得到了这个答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:07:47.850

保存原始记录后，您的回调正在运行，但您正在修改记录并尝试重新保存它，这会无限期地再次触发回调。这基本上是一个重复的问题，例如在这里介绍：[保存后何时更新记录？](https://stackoverflow.com/questions/7824606/when-to-update-record-after-save)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T18:18:45.347

改用 before_save 过滤器怎么样？

# json - 我如何从 taglib 读取到 <% ... %>

> ID：13590289
> 
> 赞同：0
> 
> 时间：2012-11-27T18:01:23.043
> 
> 标签：json, jsp, taglib

你能帮忙吗？，我怎样才能读取在foreach中分配的<% ... %>中的变量objd？

```
 <c:forEach var="objd" items="${beanDreqproducto}">
                <% 
                Gson j = new Gson();
                String data = j.toJson(objd);
                %>

                console.log("${objd.cantidad}, data: "+'${data}');
            </c:forEach> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:47:57.613

`${}`基本上翻译[`PageContext#findAttribute()`](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/JspContext.html#findAttribute%28java.lang.String%29)为. 所以，这应该这样做：

```
<%
    Object objd = pageContext.findAttribute("objd");
    // ...
%> 
```

请注意，您还应该[设置](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/JspContext.html#setAttribute%28java.lang.String,%20java.lang.Object%29) `data`页面范围才能开始`${data}`工作：

```
<%
    // ...
    pageContext.setAttribute("data", data);
%> 
```

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

* * *

**与具体问题无关**，这种方法最终是不好的。您应该选择仅使用*JSTL* /EL*或*scriptlet，而不是同时使用两者。如果您更喜欢 JSTL/EL，只需创建一个自定义 EL 函数来完成所需的工作，这样您就可以得到如下结果：

```
<c:forEach var="objd" items="${beanDreqproducto}">
    console.log("${objd.cantidad}, data: ${my:toJson(objd)}");
</c:forEach> 
```

我们的 EL wiki 页面包含如何创建 EL 函数的部分。

# date - 播放 2.0 日期格式

> ID：13590291
> 
> 赞同：2
> 
> 时间：2012-11-27T18:01:29.533
> 
> 标签：date, internationalization, playframework-2.0

我正在尝试在 Play 中的 Scala 模板中格式化日期。到目前为止，我已经写了这个：

```
<p>@DateFormat.getInstance().format(deadline)</p> 
```

截止日期是我输出到网页的日期。但是，这使用了 JVM 的语言环境，而不是用户选择的语言环境。

我的应用程序目前支持两种语言环境，挪威语 (no) 和英语 (en)。这适用于消息，但不适用于`Date`s。所以我尝试添加一个`GlobalSettings`来拦截每个请求，如下所示，但显然它从未被调用过：

```
import java.lang.reflect.Method;
import java.util.Locale;
import org.springframework.context.i18n.LocaleContext;
import org.springframework.context.i18n.LocaleContextHolder;
import play.GlobalSettings;
import play.i18n.Lang;
import play.mvc.Action;
import play.mvc.Http.Request; 

public class Global extends GlobalSettings {

    @SuppressWarnings("rawtypes")
    @Override
    public Action onRequest(final Request request, final Method actionMethod) {

        LocaleContextHolder.setLocaleContext(new LocaleContext() {
            public Locale getLocale() {
                Lang preferred = Lang.preferred(request.acceptLanguages());
                return preferred.toLocale();
            }
        });
        return super.onRequest(request, actionMethod);
    }
} 
```

有人有解决这个问题的方法吗？这是 Play 中的已知错误吗？我使用的是 2.0.4 版。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T11:08:08.607

我尝试了 estmatic 的解决方案，但它没有正确区分同一语言的国家变体，例如，如果我的浏览器的首选语言按顺序是“en_AU”和“en_US”，那么它只会使用“en”部分，这导致了美式日期（月份在前）而不是澳式日期（日期在前，这是正确和正确的）。

我的解决方案是创建一个辅助类，如下所示：

```
public class Formatter extends Controller {

    private static final int DATE_STYLE = LONG;
    private static final int TIME_STYLE = SHORT;

    /**
     * Formats the given Date as a date and time, using the locale of the current
     * request's first accepted language.
     *
     * @param date the date to format (required)
     * @return the formatted date
     * @see play.mvc.Http.Request#acceptLanguages()
     */
    public static String formatDateTime(final Date date) {
        final Locale locale = getPreferredLocale();
        return DateFormat.getDateTimeInstance(
                DATE_STYLE, TIME_STYLE, locale).format(date);
    }

    private static Locale getPreferredLocale() {
        final List<Lang> acceptedLanguages = request().acceptLanguages();
        final Lang preferredLanguage = acceptedLanguages.isEmpty() ?
                Lang.preferred(acceptedLanguages) : acceptedLanguages.get(0);
        return new Locale(preferredLanguage.language(), preferredLanguage.country());
    }
} 
```

然后在我的 Scala 模板中，我所要做的就是使用（例如）：

```
@import my.package.Formatter
...
Date = @Formatter.formatDateTime(someDate) 
```

这对我来说似乎比在模板中有很多 Locale 构造逻辑更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T23:22:35.620

好吧，您需要在获取 DateFormat 实例时提供语言环境；否则它将只使用系统默认语言环境，而不是 Play 从浏览器获取的内容。

像这样的东西似乎有效：

```
@DateFormat.getDateInstance(DateFormat.LONG, (implicitly[Lang]).toLocale).format(deadline) 
```

该`implicitly[Lang]`位基本上`Lang.preferred(request.acceptLanguages()`就像您在 onRequest() 方法中所做的那样调用。

# core-data - 核心数据和 UIPickerView - 默认值

> ID：13590293
> 
> 赞同：1
> 
> 时间：2012-11-27T18:01:36.957
> 
> 标签：core-data, model, uipickerview

我正在开发一个使用核心数据的 iPhone/iPad 应用程序。我有一个表（实体），希望用户从另一个表中进行选择（关系在模型中设置）。我已经完成了几个教程，并且效果很好。选择第二个表项之一，保存记录。当我重新编辑记录时，正确的值会正确显示。太好了（因为我对此很陌生，我喜欢其中一些工作原理！）。

但是，如果我再次单击以调出 Picker - 它默认回到列表顶部，而不是之前选择的第二条记录。我能找到的所有示例在 viewDidLoad 的 Picker 类中都有一些东西可以将选定的行设置为整数？我怎么知道要选择哪一行，因为这是一个表 - 而不是一个固定值数组？

# php - 文本文件的最后一行和字符

> ID：13590294
> 
> 赞同：1
> 
> 时间：2012-11-27T18:01:37.860
> 
> 标签：php, fopen

我想显示文本文件中的最后一个字符。文本文件来自温度 1 线系统。文件有时很大。我用这个显示最后一行：

```
<?php 
$file = file("file.txt");
for ($i = count($file)-1; $i < count($file); $i++) {
echo $file[$i] . "\n";
}
?> 
```

效果很好！

但是我如何阅读该行的最后 5 个字符？我想将它们回显到 html 页面上的 div 中？

问候安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:04:52.650

在 for 循环中尝试以下

```
echo substr($file[$i], -5) . "\n"; 
```

更多信息：[PHP 手册](http://php.net/manual/en/function.substr.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:05:26.657

您可以使用[`substr()`](http://php.net/manual/en/function.substr.php)为参数传递负值`start`。

```
echo "last 5 chars: " . substr($file[$i], -5); 
```

从[文档](http://php.net/manual/en/function.substr.php)：

> 如果 start 为负数，则返回的字符串将从字符串末尾的第 start 个字符开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T06:47:49.693

谢谢你的帮助！我现在用这个 PHP 阅读、四舍五入并显示温度：

```
<?php 
$file = file("file.txt");
for ($i = count($file)-1; $i < count($file); $i++) {
echo round(substr($file[$i], -5) . "\n", 1);
} 
```

但是，当有更多或更少的字符时会出现问题。有没有办法读取最后一行分号后的最后一个字符？三个例子：

07.07.2012; 06:19:23;25.63 - 显示 25.6

09.12.2012; 06:19:23;-5.63 - 显示 -5.6

12.09.2012; 22:58:49;-17.86 - 显示 -17.9

问候安德斯

# phpunit - smarty phpunit 空取

> ID：13590299
> 
> 赞同：1
> 
> 时间：2012-11-27T18:02:12.120
> 
> 标签：phpunit, smarty, fetch

我需要帮助。

我正在将 Smarty 与 PHPUnit 一起使用，但遇到了麻烦。

例如：

在某些检查中，我多次调用 fetch 函数，我只收到第一次调用，其他只返回空。为什么？？？

我在这里以一些代码为例：

```
 /**
     * @dataProvider provider_test
     */
   public function test_field($field) {

                // with this I instance smarty
      $front = $this->get_template();

      $front->assign('function', 'fb_user_field');
      $front->assign('field', $field);

                // this fetch only return right widh the first value of field
      $result = $front->fetch('tests/generic.tpl');

      $this->assertNotNull($result);
   }

   public function provider_test() {

      return array(
         array('field' => 'subdomain'),
         array('field' => 'login')
      );
   } 
```

我检查 $field 并在每次迭代中收到正确的值，但在第一次之后，获取返回只为空。

为什么？？？？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:59:27.850

我的建议是使用 MakeGood 或类似的方法来逐步调试您的 php 代码。否则就是猜测和检查，直到你死！

这是一些链接

[http://blog.loftdigital.com/running-phpunit-tests-in-eclipse-pdt](http://blog.loftdigital.com/running-phpunit-tests-in-eclipse-pdt)

[http://www.youtube.com/watch?v=1qnWL52wt58](http://www.youtube.com/watch?v=1qnWL52wt58)

我曾经花费数小时猜测和检查 phpunit，直到我发现 MakeGood。希望能帮助到你！

# templates - 模板的成语类似于 Velocity 等其他模板引擎？

> ID：13590301
> 
> 赞同：2
> 
> 时间：2012-11-27T18:02:20.520
> 
> 标签：templates, xslt, velocity

我有一个 XSLT(2.0) 文件；它接受一个输入 XML 数据文件并创建 DDL/SQL 语句。它工作得很好。但是维护起来有点困难，因为它在 'concat' 语句中包含很多格式信息，如下所示：

```
<xsl:value-of select="concat('CREATE USER ',$username,' IDENTIFIED BY ',$password,';',$nl)"/> 
```

我更愿意做的是以这样的方式对我的 SQL 语句进行编码：

```
<some-enclosing-elements>[...]CREATE USER <username/>, identified by <password/>; [literally a newline here][...]</some-enclosing-elements> 
```

我可能会将这种格式保留在 XML 数据文件本身的上方的“查找”表中，该表位于 XSLT 或数据文档本身顶部的“查找”表中（我还不知道是哪一个）。

是否有允许这种模板的标准习语？有任何想法吗 ？

顺便一提; 数据文档当然包含许多不同的用户来创建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T22:34:52.653

AVT 方法对我的口味来说有点过于曲折了。我倾向于依赖 xsl:value-of 完成的隐式连接（在 2.0 中）：

```
<xsl:value-of select="'CREATE USER', $username, 'identified by', $password"/> 
```

我在这种文本模板很重要的应用程序中使用的另一种方法是在 XSLT 中编写我自己的模板引擎。有一个“消息文件”，其中包含表单中的消息模板

```
<message nr="1">CREATE USER <p:user/> IDENTIFIED BY <p:password/></message> 
```

然后编写模板规则，通过替换参数来扩展消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T21:26:11.203

@xiaoyi 是对的，展示了 using 的主要替代方案`concat()`。然而，这甚至比 更重符号`concat()`，因为你必须不断重复`<xsl:value-of select="..." />`。

一个不错的选择是使用[属性值模板](http://www.w3.org/TR/xslt20/#attribute-value-templates)（AVT）：

```
[...]CREATE USER {username}, identified by {password};
[...] 
```

但是 ATV 仅适用于（某些）属性，而不适用于文本节点（直接）。您如何将它们用于此目的？

XSLT 2.0 中的一种方法是使用 AVT 创建具有属性的新文字结果元素；使用 AVT 指定该属性的值；然后选择新属性的值：

```
<xsl:variable name="query">
  <dummy val="[...]CREATE USER {username}, identified by {password};
[...]" />
</xsl:variable>
<xsl:value-of select="$query//@val" /> 
```

是的，每个格式化字符串都有一些显着的开销，但是字符串中每个字段的开销很小。你可以像这样一起做几个字符串：

```
<xsl:variable name="queries">
  <q val="[...]CREATE USER {username}, identified by {password}; &#10;[...]" />
  <q val="[...]CREATE TABLE {tablename}, blah blah; &#10;[...]" />
</xsl:variable>
<xsl:value-of select="$queries/q[1]/@val" />
<xsl:value-of select="$queries/q[2]/@val" /> 
```

您可以使用上述位置索引，或使用`id`属性来标识每个字符串。

我没有看到其他地方提倡这种方法，所以我很想知道其他人对此有何看法。

# 没关系，除了...

鉴于迈克尔凯的回答所显示的更简单的方法，我认为这样做没有任何意义。我想这解释了为什么其他人不提倡这种方法。:-)

我能想到的唯一可能仍然使用这种方法的情况是，如果您不能使用 XSLT 2.0，但您确实可以访问`nodeset()`扩展功能（例如，在 IE 或 .NET 环境中）。在这种情况下，您需要在之前在 XPath 表达式中使用它的任何地方`nodeset( )`环绕。`$queries``/`

# javascript - 尝试在 Windows 8 应用程序中获取画布上下文时出现异常

> ID：13590306
> 
> 赞同：0
> 
> 时间：2012-11-27T18:02:39.793
> 
> 标签：javascript, canvas, windows-8, html5-canvas

当我尝试运行以下代码时，我刚刚在 Windows 8 上安装了 vs 2012，并为 Windows 8 创建了一个示例 javascript 应用程序

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>App1</title>

<!-- WinJS references -->
<link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
<script src="//Microsoft.WinJS.1.0/js/base.js"></script>
<script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

<!-- App1 references -->
<script src="js/jquery-1.5.1.min.js"></script>
<link href="/css/default.css" rel="stylesheet" />

<script src="/js/default.js"></script>
  <script type="text/javascript" >
      var c = $("myCanvas");
      var ctx = c.getContext("2d");
      var grd = ctx.createLinearGradient(0, 0, 175, 50);
      grd.addColorStop(0, "#000000");
      grd.addColorStop(1, "#00FF00");
      ctx.fillStyle = grd;
      ctx.fillRect(0, 0, 150, 75);
</script>
</head>
<body>
<form>
    <input type="url" />
    <input type="submit" value="ok" />
    <canvas id="myCanvas" width="200" height="200">
        Your browser doesn't support canvas
    </canvas>
</form> 
```

它给出了以下例外

```
Unhandled exception at line 19, column 11 in ms-appx://ce20ab64-b644-451a-a60f-cafdc7afb4f9/default.html

0x800a01b6 - JavaScript runtime error: Object doesn't support property or method 'getContext'

If there is a handler for this exception, the program may be safely continued. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:06:00.587

改变

```
var c = $("myCanvas"); 
```

至

```
var c = document.getElementById("myCanvas"); 
```

接着

```
var ctx = c.getContext("2d"); 
```

您可以使用 jQuery 来获取带有 $('#myCanvas').get(0) 的元素，以访问实际的 HTML 元素对象。不过，标准的文档 api 在这里也能正常工作。

[http://diveintohtml5.info/canvas.html](http://diveintohtml5.info/canvas.html)

更新：

将代码包装在准备好的文档中

```
$(function(){
    //code here
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-19T16:34:00.930

改变

```
var c = $("myCanvas"); 
```

至

```
var c = $("#myCanvas"); 
```

# functional-programming - ocaml中的“相等（=）”和“相同（==）”有什么区别？

> ID：13590307
> 
> 赞同：30
> 
> 时间：2012-11-27T18:02:43.103
> 
> 标签：functional-programming, ocaml

在`OCaml`中，我们有两种`equity comparisons`：

`x = y`和`x == y`,

那么它们之间的确切区别是什么？

在 ocaml 中是不是`x = y`就像`x.equals(y)`在 Java 中一样？

`x == y`就像`x == y (comparing the address)`在Java中一样？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-27T18:11:39.590

我不知道`x.equals(y)`在 Java 中是如何工作的。如果它进行“深度”比较，那么类比非常接近。需要注意的一件事是，物理平等是 OCaml（以及一般的函数式语言）中的一个模糊概念。编译器和运行时系统将移动值，并且可以随意合并和取消合并纯（非可变）值。所以你应该只`==`在你真的知道你在做什么的情况下使用。在某种程度上，它需要熟悉实现（除非必要，否则应避免这样做）。

OCaml 做出的具体保证`==`很弱。可变值以您期望的方式比较物理上相等（即，如果改变两者中的一个实际上也会改变另一个）。但是对于非可变值，唯一的保证是物理上比较相等的值 ( `==`) 也将比较相等 ( `=`)。请注意，反之亦然，*因为*sepp2k 指出浮点值。

本质上，对于非可变值，语言规范告诉您的是，您可以将`==`其用作快速检查来确定两个非可变值是否相等（`=`）。如果它们在物理上比较相等，那么它们在价值方面是相等的。如果它们在物理上不相等，您将不知道它们在价值方面是否相等。你还是得`=`用来决定。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-28T01:20:54.877

`Obj`编辑：这个答案基于模块深入探讨了 OCaml 内部工作的细节。这些知识不应该在没有**额外注意**的情况下使用（让我再次强调这个非常重要的一点：不要将它用于您的程序，但前提是您希望*尝试*使用 OCaml 运行时）。该信息也可用，尽管在 O'Reilly 关于 OCaml 的书中可能以更易于理解的形式，可[在线获取](http://caml.inria.fr/pub/docs/oreilly-book/)（相当不错的书，虽然现在有点过时了）。

`=`运算符正在检查结构相等性，而仅`==`检查物理相等性。

相等检查基于值在内存中的分配和存储方式。OCaml 中的运行时值可能大致适合 2 个不同的类别：*装箱*或未*装箱*。前者意味着该值在内存中可以通过间接访问，后者意味着该值可以直接访问。

由于`int`（32 位系统上的 int31 或 64 位系统上的 int63）是未装箱的值，因此两个运算符对它们的行为相同。一些其他类型或值，其运行时实现实际上是`int`，也将看到两个运算符的行为与它们相同，例如 unit `()`、空列表`[]`、代数数据类型中的常量和多态变体等。

一旦你开始使用涉及结构的更复杂的值，比如列表、数组、元组、记录（C 结构等价物），这两个运算符之间的区别就出现了：结构中的值将被装箱，除非它们可以在运行时表示为原生整数(1)。这种必要性源于运行时系统必须如何处理值，并有效地管理内存。当从其他值构造时分配结构化值，这些值本身可能是结构化值，在这种情况下使用引用（因为它们被装箱）。

由于分配，在程序的不同点实例化的两个值不太可能在物理上相等，尽管它们在结构上是相等的。值中的每个字段或内部元素可以相同，甚至可以是物理标识，但是如果这两个值是动态构建的，那么它们最终将使用内存中的不同空间，因此在物理上是不同的，但在结构上是相等的.

运行时会尝试避免不必要的分配：例如，如果您有一个函数总是返回相同的值（换句话说，如果函数是常量），无论是简单的还是结构化的，该函数将始终返回相同的物理值（即，内存中的相同数据），以便测试物理相等性，该函数的两次调用的结果将成功。

观察物理运算符何时实际返回的一种方法`true`是在其运行时表示上使用该`Obj.is_block`函数（也就是说，`Obj.repr`它的结果）。这个函数只是告诉它的参数运行时表示是否被装箱。

一种更人为的方法是使用以下函数：

```
let phy x : int = Obj.magic (Obj.repr x);; 
```

如果该值被*装箱*，则此函数将返回一个指向内存中`int`绑定的值的指针的实际值。如果您在文字上尝试它，您将获得完全相同的值！那是因为 int 没有*装箱*（即，值直接存储在内存中，而不是通过引用）。`x`*`int`*

 **现在我们知道装箱值实际上是“引用”值，我们可以推断这些值可以修改，即使语言说它们是不可变的。

例如考虑引用类型：

```
# type 'a ref = {mutable contents : 'a };; 
```

我们可以像这样定义一个不可变的 ref：

```
# type 'a imm = {i : 'a };;
type 'a imm = {i : 'a; } 
```

然后使用该`Obj.magic`函数将一种类型强制转换为另一种类型，因为在结构上，这些类型将被简化为相同的运行时表示。

例如：

```
# let x = { i = 1 };;
- : val x : int imm = { i = 1 }
# let y : int ref = Obj.magic x;;
- : val y : int ref = { contents = 1 }
# y := 2;;
- : unit = ()
# x
- : int imm = { i = 2 } 
```

有几个例外：

*   如果值是对象，那么即使看似结构相同的值也会`false`在结构比较中返回

    ```
    # let o1 = object end;;
    val o1 : < > = <obj>
    # let o2 = object end;;
    val o2 : < > = <obj>
    # o1 = o2;;
    - :  bool = false
    # o1 = o1;;
    - :  bool = true 
    ```

    在这里，我们看到它`=`恢复到物理等效。

*   如果值是函数，则无法在结构上比较它们，但物理比较可以按预期进行。

*   惰性值在结构上可能具有可比性，也可能不具有可比性，具体取决于它们是否被强制（分别）。

    ```
    # let l1 = lazy (40 + 2);;
    val l1 : lazy_t = <lazy>
    # let l2 = lazy (40 + 2);;
    val l2 : lazy_t = <lazy>
    # l1 = l2;;
    Exception: Invalid_argument "equal: functional value".
    # Lazy.force l1;;
    - :  int = 42
    # Lazy.force l2;;
    - :  int = 42
    # l1 = l2;;
    - :  bool = true 
    ```

*   如果模块或记录值不包含任何功能值，它们也是可比较的。

一般来说，我想可以肯定地说，与函数相关的值，或者内部可能包含函数的值不能与 比较`=`，但可以与 比较`==`。

您显然**应该对所有这些都非常谨慎**：依赖运行时的实现细节是*不正确*的（注意：我在该答案的初始版本中开玩笑地使用了*邪恶*这个词，但由于担心它被过于认真而改变了它）。正如您在评论中恰当地指出的那样，javascript 实现的行为对于浮点数是不同的（在 javascript 中结构等效，但在参考实现中不一样，那么 java 呢？）。

* * *

(1) 如果我没记错的话，浮点数在存储在*数组*中以避免双重间接时也会被取消装箱，但是一旦提取它们就会被装箱，所以你不应该看到装箱值的行为差异。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-27T18:06:41.290

> ocaml 中的 x = y 就像 Java 中的 x.equals(y) 一样吗？
> 
> 和 x == y 就像 Java 中的 x == y （比较地址）一样？

对，就是那样。除了在 OCaml 中您可以使用`=`各种值，而在 Java 中您不能`equals`在原始类型上使用。另一个区别是 OCaml 中的浮点数是引用类型，因此您不应该使用它们来比较它们`==`（并不是说直接比较浮点数是否相等通常是个好主意）。

所以总而言之，你基本上应该总是`=`用来比较任何类型的值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T18:07:13.340

根据[http://rigaux.org/language-study/syntax-across-languages-per-language/OCaml.html](http://rigaux.org/language-study/syntax-across-languages-per-language/OCaml.html)，`==`检查浅层相等，并`=`检查深层相等**

# spring - 406 中的无缓存结果？

> ID：13590308
> 
> 赞同：0
> 
> 时间：2012-11-27T18:02:55.347
> 
> 标签：spring, browser-cache

我们的客户端使用 IE8，它的缓存方式使事情变得困难。为了解决这个问题，我添加了一个 bean 来防止缓存

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="cacheSeconds" value="0" />
</bean> 
```

根据 Chrome 的（非常有用的）开发工具，我可以看到**响应标头**是：

```
Cache-Control:no-cache
Cache-Control:no-store
Content-Length:1070
Content-Type:text/html;charset=utf-8
Date:Tue, 27 Nov 2012 17:21:31 GMT
Expires:Thu, 01 Jan 1970 00:00:00 GMT
Pragma:no-cache 
```

但是，现在我得到了`406`回应。为什么我会得到这个？

**请求标头**是：

```
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:redacted
Host:localhost:8040
Referer:http://localhost:8040/redacted
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
X-Requested-With:XMLHttpRequest 
```

我看了一下[这个答案](https://stackoverflow.com/questions/11429808/spring-rest-consumption-results-in-http-status-406-not-acceptable)，但我已经在使用杰克逊了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:51:47.603

找到了答案。再一次，如何订购豆子是个问题。如果我将无缓存 bean 放在杰克逊 bean 之后，那么它可以工作。

# javascript - 将 Javascript 放入 Google 站点

> ID：13590310
> 
> 赞同：1
> 
> 时间：2012-11-27T18:03:12.227
> 
> 标签：javascript, google-sites

我在将我的查询从 google fusion 嵌入到 google 网站时遇到问题。我已经创建了查询，它作为一个保存在记事本中的 html 文件工作，但是当我将它放入我的 Google 协作平台网站时它不起作用。

查询代码为：

```
 <html>
   <head>
     <style>
 #map-canvas { width:850px; height:650px; }
</style>
<script type="text/javascript"
src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
var map;
var layerl0;
function initialize() {
  map = new google.maps.Map(document.getElementById('map-canvas'), {
    center: new google.maps.LatLng(43.89591323557617, -79.77653503417969),
    zoom: 11,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  layerl0 = new google.maps.FusionTablesLayer({
    query: {
      select: "'col2'",
      from: '1eMaZWdi5QhF1252KH2e7xOiNyJoBFOzpStMP-Ks'
    },
    map: map,
    styleId: -1,
    templateId: -1
  });
}
function changeMapl0() {
  var searchString = document.getElementById('search-string-l0').value.replace(/'/g, "\\'");
  layerl0.setOptions({
    query: {
      select: "'col2'",
      from: '1eMaZWdi5QhF1252KH2e7xOiNyJoBFOzpStMP-Ks',
      where: "'description' CONTAINS IGNORING CASE '" + searchString + "'"
    }
  });
}
google.maps.event.addDomListener(window, 'load', initialize);
 </script>
 </head>
 <body>

<div id="map-canvas"></div>
<div style="margin-top: 10px;">
  <label>Land use:</label><input type="text" id="search-string-l0">
  <input type="button" onclick="changeMapl0()" value="Search">
 </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T00:54:11.047

您是否尝试过使用 Google 小工具让您的代码在 Google 协作平台中运行？也就是说，将代码放入 Google 小工具中，然后通过编辑器中的插入菜单将该小工具添加到您的站点页面）。

如果您还没有，请从这里开始： [https ://developers.google.com/gadgets/](https://developers.google.com/gadgets/)

另一种选择是使用 HTML 框，或制作 Apps 脚本。

# c# - 在 .NET Request.Form 的 POST 请求正文中设置测试信息

> ID：13590312
> 
> 赞同：0
> 
> 时间：2012-11-27T18:03:16.213
> 
> 标签：c#, asp.net-mvc, testing, http-post, fiddler

我不完全确定如何用最好的方式来表达标题。但我知道我以前做过这个，似乎无法找到如何做到这一点。

我有这样的方法

```
[HttpPost]
public string doSomething()
{
   string formValue = Request.Form["MyKey"];
   return formValue;
} 
```

然后我发送一个提琴手 POST 示例请求。

我在请求正文中放了这样的东西

```
MyKey=SomeValue 
```

但是，当我调用提琴手时，我得到一个空的 formValue 字符串。

我知道我以前做过这个，我似乎不记得如何在请求正文中传递这些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:23:41.050

根据要求，这是我以答案形式发表的评论：

* * *

可能您忘记将内容类型设置为`application/x-www-form-urlencoded`？

为了让正文被理解为包含表单数据，这是必要的。

# hibernate - 持久化引用一个的两个实体

> ID：13590317
> 
> 赞同：0
> 
> 时间：2012-11-27T18:03:26.610
> 
> 标签：hibernate, jpa

![在此处输入图像描述](../Images/b7e76d5097518f1cc4e91cafe421aec3.png)

如图所示，我有三个实体。

我正在尝试保留对象，如此伪代码所示

```
EA = new EA
EB = new EB
EC = new EC
EB.link(EA)
EC.link(EA)
persist(EB)
persist(EC) 
```

持久化实体 B 时，实体 A 得到持久化，但实体 C 无法持久化，并出现以下错误：

```
java.lang.IllegalStateException: org.hibernate.TransientObjectException: object is an unsaved transient instance - save the transient instance before merging: 
```

我控制实体 C。我不想更改实体 A 和 B 中的任何内容。我怎样才能让所有这些实体都被持久化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:07:38.477

我认为这会起作用：

```
EA = new EA
EB = new EB
EC = new EC
EB.link(EA)
persist(EB)
EC.link(EB.getEA())
persist(EC) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:43:06.720

![在此处输入图像描述](../Images/9bfd20b180be9a4a0170fb8f440844e5.png)

我必须更改模型才能使其正常工作。

伪代码是

```
EA=new EA
EB=new EB
EC=new EC
EB.link(EA)
EB.link(EC)
persist(EB) 
```

# flash - Falsh Builder 4 - 切换调试模式 - 到 Flash 透视图

> ID：13590320
> 
> 赞同：0
> 
> 时间：2012-11-27T18:03:37.727
> 
> 标签：flash, flash-builder, flashbuilder4

在 Flash Builder 4 中进行调试时，如何从 Flash 透视图切换回 Flash 调试透视图？早些时候，我收到一个对话框提示我是否要记住该设置。但到目前为止我似乎无法找到该设置。

目前它正在进入这个视图：

![在此处输入图像描述](../Images/7df04a35ed2db14555d88326f46a624d.png)

但我想从 Flash 调试角度进行调试：

![在此处输入图像描述](../Images/d24e5b631a06adce3873dd70e0cc00e6.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:06:51.567

可以从 Flash Builder 右上角的工具栏中选择透视：

![看法](../Images/c3aa83c18ae5a01a1363df48c108aab7.png)

或者，通过*Window* » *Open Perspective*下拉菜单：

![窗口透视](../Images/318442c90a967bbd883c4088c6dae235.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:48:21.327

我想我找到了？![在此处输入图像描述](../Images/28be592100922a0c5bf8f7c13542617b.png)

它藏起来了。。

# jquery - 根据另一个 div 的高度设置一个 div 的高度

> ID：13590322
> 
> 赞同：1
> 
> 时间：2012-11-27T18:03:42.853
> 
> 标签：jquery

我有两列 div 布局

```
<div id="site-wrapper">
<div id="leftSidebar">

</div>

<div id="rightSide">

</div>
</div> 
```

**我的js**

```
 $('#leftSidebar').height($('#rightSide').height()); 
```

然而，在 IE7 中，它在底部添加了一大块空白。我的jquery正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:29:55.043

是的，outerHeight 应该为您执行此操作。

[http://api.jquery.com/outerHeight](http://api.jquery.com/outerHeight)说：

> .outerHeight() 计算中始终包含顶部和底部填充和边框；如果 includeMargin 参数设置为 true，则还包括边距（顶部和底部）。

因此，如果您有边距：

```
$('#leftSidebar').height($('#rightSide').outerHeight(true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:10:14.507

除非您对这些 div（通常可能是 div）或什至或您在其中拥有的任何标签有某种 CSS 规则，否则`p`这应该没有问题。

[http://jsfiddle.net/LzHHe/](http://jsfiddle.net/LzHHe/)

你可以试试outerHeight()：

`$('#leftSidebar').height($('#rightSide').outerHeight());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T09:51:03.503

是的，outerHeight 应该为您执行此操作。

[http://api.jquery.com/outerHeight](http://api.jquery.com/outerHeight)说：

> .outerHeight() 计算中始终包含顶部和底部填充和边框；如果 includeMargin 参数设置为 true，则还包括边距（顶部和底部）。

因此，如果您有边距：

```
$('#leftSidebar').height($('#rightSide').outerHeight(true)); 
```

放在哪里？

# macos - 简单的系统事件 AppleScript 在 NSAppleScript 中不起作用

> ID：13590323
> 
> 赞同：0
> 
> 时间：2012-11-27T18:03:45.713
> 
> 标签：macos, applescript

这在 Apple Script 应用程序中运行良好：

```
tell application "System Events" to key code 124 using command down 
```

但在 NSAppleScript 中，它在“关键代码”上出错。引号被正确转义，几种不同的语法都做同样的事情。应用程序中有前面的东西来激活接收击键的应用程序，但项目中不需要，如果它在那里，它会编译，所以很明显 NSAppleScript 正在拾取字典。我难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:46:13.163

弄清楚了。应用程序是具有跨脚本权利的沙盒，系统事件应用程序没有捆绑 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T23:16:36.153

我可以毫无错误地运行此代码。结果和errorDict都记录为null，所以没有问题。你一定有其他问题......它不是applescript。

```
NSString* cmd = @"tell application \"System Events\" to key code 124 using command down";
NSAppleScript* theScript = [[NSAppleScript alloc] initWithSource:cmd];
NSDictionary* errorDict = nil;
NSAppleEventDescriptor* result = [theScript executeAndReturnError:&errorDict];
[theScript release];
NSLog(@"result: %@", result);
NSLog(@"error: %@", errorDict); 
```

# php - 将引导文件复制到嵌套目录

> ID：13590325
> 
> 赞同：0
> 
> 时间：2012-11-27T18:03:49.793
> 
> 标签：php, magento, session

所以我已经复制`index.php`并`directory/index.php`修改了它，所以它看起来如下：

```
<?php

require_once '../app/Mage.php';

umask(0);

Mage::app();

$itemCount = Mage::helper('checkout/cart')->getCart()->getItemsCount();
echo "Items in cart: " . $itemCount . "<br />";

$isLoggedIn = Mage::helper('customer')->isLoggedIn();
echo "User logged in: " . (int)$isLoggedIn; 
```

不过，我遇到了会话问题，如果我在主站点上注销并重新登录我复制的文件，则会说我已注销。

我能找到的唯一罪魁祸首是两个`PHPSESSID`饼干，一个放在 中`/`，另一个放在 中`/directory`。删除它们并重试将解决问题。

如何使这个复制的文件反映主要的准确会话数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:53:48.433

看起来需要做的就是在 System > Configuration > Web 中设置 cookie 路径

请参阅[http://www.magentocommerce.com/boards/viewthread/19582/#t66564](http://www.magentocommerce.com/boards/viewthread/19582/#t66564)

# php - jquery ajax 将字符串发送到 php 和特殊字符，例如 #

> ID：13590328
> 
> 赞同：1
> 
> 时间：2012-11-27T18:03:56.320
> 
> 标签：php, jquery

我从 Jquery 开始，所以我想做一些非常简单的事情：从输入标签中获取一个字符串并将其放入 div 标签中。

我的 Jquery 代码：

```
$(document).ready(function(){
    $("#recherche").keyup(function(){
    var recherche = $(this).val();
    var data = 'motclef=' + recherche;
    $.ajax({
        type : "GET",
        url : "result.php",
            data : data,
            contentType: "application/x-www-form-urlencoded;charset=UTF-8",
            success: function(server_response){
            $("#resultat").html(server_response).show();
    }
    }); 
```

});

});

我的PHP代码：

```
<?php

if(isset($_GET['motclef'])){
    $motclef = $_GET['motclef'];
    echo $motclef;
}
?> 
```

它甚至适用于诸如 éàç... 甚至中文字符之类的字符，但它不适用于 # 或 &。我怎样才能让它工作？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:48:47.883

尝试这个

```
$(document).ready(function(){
    $("#recherche").keyup(function(){
    var recherche = $(this).val();
    var data = 'motclef=' + recherche;
    $.ajax({
        type : "GET",
        url : "result.php",
            data : {motclef: data},
            contentType: "application/x-www-form-urlencoded;charset=UTF-8",
            success: function(server_response){
            $("#resultat").html(server_response).show();
    }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:08:11.020

因为您使用 GET 发送数据，所以您需要在使用 Ajax 发送数据之前对数据进行 URL 编码。使用 javascript 函数“转义”

```
escape('&# '); // "%26%23%20" 
```

# wireshark - 尝试执行“Nmake -f Makefile.nmake verify_tools”来构建wireshark

> ID：13590329
> 
> 赞同：0
> 
> 时间：2012-11-27T18:03:59.950
> 
> 标签：wireshark, wireshark-dissector

有人知道 WireShark 解剖器吗？

我正在尝试构建 WireShark 并安装了所有必要的程序（cygwin、python、Windows Server 2003 R2 ...）但是当我在 WireShark 目录中尝试做的时候`Nmake -f Makefile.nmake verify_tools`，我得到的只是：`"NMAKE : fatal error U1073: don't know how to make 'צf'"`

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:36:17.433

我怀疑这个问题与 Wireshark 没有特别的关系。

问题可能与字符集或其他有关吗？

如果您尝试：

nmake - ？##这应该给出一个nmake选项列表等

关于什么：

制作/？

如果nmake /？工作然后也许 nmake /f Makefile.nmake 可能工作.....

# css - Z-index 组织策略

> ID：13590335
> 
> 赞同：6
> 
> 时间：2012-11-27T18:04:39.007
> 
> 标签：css, sass

处理网页上的 z 索引的良好组织策略是什么？

我正在开发一个单页应用程序，由于错误消息、加载 gif 和模式框等原因，它有很多层，当它没有任何视觉意义时，我总是发现自己的元素彼此重叠。

是否有一种普遍接受的方法来组织各种元素的 z 索引？我已经搜索了谷歌和 SO，但没有看到任何看起来足够普遍的东西。

我在我的项目中使用 SASS，因此我可以轻松地基于基本 z-index 进行添加，但一般的 CSS 策略会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:01:41.930

我通常更喜欢为我的顶级元素指定一个大的 z-index。我发现最好的方法是从

*   确定哪些元素**必须**位于其他元素之上
*   由于您使用的是 SASS，因此您可以为各种 z-index 级别指定一些变量：

    .tierBottom { 位置：[无论你需要什么]; z-index：1；}

    .tierMiddle { 位置：[无论你需要什么]; z 指数：100；}

    .tierTop{ 位置：[随便你]; z 指数：1000；}

*   正如其他一些人所说，您不必担心大多数容器/包装器 z-index。如果您遇到一些问题，例如内容位于顶部，请将低层 z-index 类添加到有问题的元素中，一切都应该是正确的。

对此可能有很多不同的意见，对某些人来说这可能不是最佳实践，但这是过去对我有用的方法。希望能帮助到你！

# ruby-on-rails-3 - 带有用户代理的 Rails 3 Group 移动和平板电脑？

> ID：13590336
> 
> 赞同：2
> 
> 时间：2012-11-27T18:04:48.117
> 
> 标签：ruby-on-rails-3, mobile, user-agent, tablet

我正在尝试在我的平板电脑和移动设备（如 android 手机和平板电脑、iPhone、iPad 等）的一个视图中有条件地渲染/隐藏一些 html。到目前为止，我有这个设置：

```
def mobile_agent?
  request.user_agent =~ /Mobile|webOS/
end 
```

这似乎工作得很好，但目前它只支持移动设备而不是平板电脑。我知道[mobile_fu](https://github.com/brendanlim/mobile-fu)将移动设备和平板电脑都归为移动设备类别，但它也会更改我不想要的请求格式。我的 Web 应用程序正在使用响应式主题，因此视图可以在任何设备下工作，但我希望隐藏在单个视图中的嵌入式 Unity Web 播放器除外。

有什么办法可以将上述方法扩展到包括平板电脑和移动设备？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T18:07:30.197

我用这个

```
def mobile_agent?
  request.env["HTTP_USER_AGENT"] && request.env["HTTP_USER_AGENT"][/(iPhone|iPad|iPod|BlackBerry|Android)/]
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T21:10:20.847

试试这个：[https ://github.com/neighborland/mobu](https://github.com/neighborland/mobu)

> Mobu 提供了一个名为 DetectMobile 的 Rails 控制器关注点。Mobu 进行服务器端用户代理检测以将请求分类为移动设备、平板电脑或默认请求。
> 
> Mobu 根据请求类型修改你的 Rails 视图路径。它不需要自定义 MIME 类型或单独的子域。

# c++ - 提升不同std::vectors的融合向量来实现数据框

> ID：13590340
> 
> 赞同：3
> 
> 时间：2012-11-27T18:05:11.133
> 
> 标签：c++, boost, vector, stl, boost-fusion

我正在尝试在 C++ 中实现一个“数据框架”类型类（如在 S+/R 中），类似于：

```
template<typename T1, typename T2, typename T3>
class data_frame; 
```

我的目标是将数据作为“列向量”（而不是简单的元组向量）存储在内存中，原因与问题并不真正相关。

（假设我没有可变参数模板，而且我现在不担心参数的固定数量——我可以稍后解决这个问题）。

使用 MPL 和融合，到目前为止，我已经能够创建 std:vectors 的融合序列：

```
template <typename T> 
struct make_vector 
{ 
    typedef std::vector<T> type; 
}; 
typedef boost::mpl::vector<T1, T2, T3> data_types;
typedef boost::mpl::transform1<data_types, make_vector<_1> >  vector_types;
typedef boost::fusion::result_of::as_vector<vector_types>::type vectors; 
```

我还设法定义了一个 tuple_type，它是 boost::tuple 的特化，具有与 data_frame 相同的签名。

```
typedef details_not_shown tuple_type; 
```

现在，我想定义一个允许我将 tuple_type 添加到 data_frame 的成员函数。这是我的想法：

```
vectors the_vectors;

struct append
{
    typedef void result_type;

    template<typename U>
    void operator()(const U & d, std::vector<U> & v) const
    {
        v.push_back(d);
    }
}

void push_back(tuple_type & t)
{
    fusion::for_each(fusion::zip(t,the_vectors), fusion::make_fused_function_object(append())) ;
} 
```

当我编译它时（在 VS2010 C++ 上），我得到以下错误：

```
error C2664: 'void some_class<T0,T1,T2>::append::operator ()<const T>(const U &,std::vector<_Ty> &) const'
: cannot convert parameter 2 from 'const std::vector<_Ty>' to 'std::vector<_Ty> &' 
```

显然 zip 正在复制 std:vector 元素`the_vectors`而不是传递引用，因此`push_back`失败了。

有谁知道我如何让 fusion zip 传递参考而不是副本？

# mysql - MYSQL - 更新 SET 值

> ID：13590346
> 
> 赞同：1
> 
> 时间：2012-11-27T18:05:30.573
> 
> 标签：mysql, database, set

例如，假设您有一个 CD 数据库，您希望将所有类型为“流行”的 CD 的 CD 价格提高 10%。然而类型 Genre 是一个 SET。它可以是多种流派，例如 RnB 和摇滚。

我的代码如下：

```
UPDATE CD
set price = price * 1.1
WHERE genre = 'Pop'; 
```

但是，我的代码仅更新流派仅流行的行。如果流派是“摇滚、流行、RnB”，则不会更新。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:07:37.170

您需要使用`LIKE`（[文档](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)）：

```
... WHERE genre LIKE '%Pop%' 
```

如果您的流派是“摇滚、流行、RnB”，这将匹配。

您应该知道您使用的是非规范化结构。更好的设计是有一个流派参考表：

**CD_Genre**（CD，流派）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:07:19.910

使用like关键字

```
UPDATE CD set price = price * 1.1 WHERE genre like '%Pop%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T09:10:47.140

在查询中访问 SET 值的最佳方法是 FIND_IN_SET：

```
UPDATE CD
set price = price * 1.1
where FIND_IN_SET('Pop', `genre`) 
```

关于 FIND_IN_SET 的更多信息可以在这里找到：http: [//dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_find-in-set](http://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_find-in-set)

# ios - 屏幕方向 Xcode 4.3 iOS5.1

> ID：13590349
> 
> 赞同：1
> 
> 时间：2012-11-27T18:05:42.343
> 
> 标签：ios, xcode, rotation, uiinterfaceorientation

我试图让这个视图旋转，以便在播放 youtube 视频时，可以全屏查看。

该视图嵌入在导航视图控制器和 tabBar 视图控制器中。

使用 Xcode 4.3 的目标部署是 iOS 5.1，在系留的 iPhone 4 和 iPhone 上的模拟器上进行测试。

我已经添加了：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

到我的视图控制器，它应该允许屏幕根据设备方向旋转。

另请注意：我在信息设置中启用了横向，并在我的 plist 中进行了验证。这是我第一次在 stackoverflow 上发帖。我希望以上是清楚的。

这是完整的 .m 供参考：

```
//  Created by Jacob Topping on 12-03-20.
//  Copyright (c) 2012 The Melon Inc. All rights reserved.
//

#import "WebOneViewController.h"

@interface WebOneViewController ()

@end

@implementation WebOneViewController
@synthesize webOne;
@synthesize rotateWeb;
@synthesize follow;
@synthesize earnestWeb;
@synthesize ronWeb;
@synthesize richardWeb;
@synthesize davidWeb;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    NSString *david = @"http://www.youtube.com/embed/YSbQ1SDwtgM";
    NSURL *url7 = [NSURL URLWithString:david];
    NSURLRequest *davidUrl = [NSURLRequest requestWithURL:url7];
    [davidWeb loadRequest:davidUrl];

    NSString *richard = @"http://www.youtube.com/embed/6jL_1kJ6pno";
    NSURL *url6 = [NSURL URLWithString:richard];
    NSURLRequest *richardUrl = [NSURLRequest requestWithURL:url6];
    [richardWeb loadRequest:richardUrl];

    NSString *ron = @"http://www.youtube.com/embed/E0EmDSg3YXY";
    NSURL *url5 = [NSURL URLWithString:ron];
    NSURLRequest *ronUrl = [NSURLRequest requestWithURL:url5];
    [ronWeb loadRequest:ronUrl];

    NSString *earnest = @"http://www.youtube.com/embed/oTG7JtdSpT8";
    NSURL *url4 = [NSURL URLWithString:earnest];
    NSURLRequest *earnestUrl = [NSURLRequest requestWithURL:url4];
    [earnestWeb loadRequest:earnestUrl];

    NSString *website3 = @"http://twitter.com/search/?src=hash&q=%23creb13";
    NSURL *url3 = [NSURL URLWithString:website3];
    NSURLRequest *requestUrl3 = [NSURLRequest requestWithURL:url3];
    [follow loadRequest:requestUrl3];

    NSString *website2 = @"http://themeloninc.com/The_Melon_Inc./app/Slider/demo/rotate.php";
    NSURL *url2 = [NSURL URLWithString:website2];
    NSURLRequest *requestUrl2 = [NSURLRequest requestWithURL:url2];
    [rotateWeb loadRequest:requestUrl2];

    NSString *website = @"http://www.youtube.com/embed/J2EWRG-epes";
    NSURL *url = [NSURL URLWithString:website];
    NSURLRequest *requestUrl = [NSURLRequest requestWithURL:url];
    [webOne loadRequest:requestUrl];

    //<iframe width="560" height="315" src="http://www.youtube.com/embed/J2EWRG-epes" frameborder="0" allowfullscreen></iframe>

    [scroller setScrollEnabled:YES];
    [scroller setContentSize:CGSizeMake(320,1150)];

    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)viewDidUnload
{
    [self setRichardWeb:nil];
    [self setRonWeb:nil];
    [self setEarnestWeb:nil];
    [self setFollow:nil];
    [self setRotateWeb:nil];
    [self setWebOne:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

@end 
```

# jquery - 在手风琴头上使用 jquery 停止传播

> ID：13590353
> 
> 赞同：1
> 
> 时间：2012-11-27T18:06:05.167
> 
> 标签：jquery, html, stoppropagation

我试图让一个复选框在相应的标题（包括点击事件）中正常工作，我在[http:// jsfiddle.net/CkL2r/1/](http://jsfiddle.net/CkL2r/1/)或代码如下；

```
<div id="accordion">
<h3><a href="#">Text <span id="id">More text <input type="checkbox"/></span></a></h3>
<div>content etc</div>
<h3><a href="#">Text <span id="id">More text <input type="checkbox"/></span></a></h3>
<div>content etc</div> 
```

​</p>

```
$('#accordion').accordion();
$('#accordion input[type="checkbox"]').click(function(e) {
e.stopPropagation();
});​ 
```

我只是无法让它与较新版本的 jquery 一起工作，我搜索了 jquery 文档，据我所知，这个函数在版本之间应该没有任何区别。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:20:25.637

我认为你的问题是一个微不足道的问题..

当您选择 时`jQuery 1.6.3`，您有一个复选框，上面写着要包含`jQueryUI library`在小提琴中。

但是当您选择时，`jQuery 1.8.2`您没有选项。因此，您需要**在“添加资源”部分手动包含该文件。**

**[更新小提琴](http://jsfiddle.net/sushanth009/CkL2r/207/)**

# android - Android- 通过 Http post 上传的 Zip 文件包含标题

> ID：13590354
> 
> 赞同：2
> 
> 时间：2012-11-27T18:06:05.407
> 
> 标签：android, upload, zip

我正在使用以下代码将 zip 文件从 android 应用程序上传到某个位置。观察是： 1.服务器上传的zip文件没有用windows explorer打开。2\. Winzip、7-zip等工具可以打开上传到服务器的zip。3.直接从安卓设备（通过adb）拉取的文件可以用windows explorer打开。（意味着它没有腐败）。

我分析了上传的 zip 的十六进制转储，发现它在开头包含 http 标头。手动删除标题并重新保存它就可以完成这项工作。看起来它们是在正文中发送的，或者整个标题部分被误解为正文的一部分。我无法避免这些标头，因为服务器脚本需要这些标头。

谢谢

服务器上文件的十六进制：-B8m4yaqs_DBT3duNEuQUqEqqIdnyHYXEtwW 内容处置：表单数据；名称="文件上传"; filename="crashLogs.ZIP" 内容类型：application/zip 内容传输编码：二进制

如何在不保存标题的情况下上传 Zip 文件？

```
 HttpClient httpclient = new DefaultHttpClient();

            HttpPost postRequest;
            MultipartEntity reqEntity;
            FileBody fileBody;

            postRequest = new HttpPost(serverUrl);
            postRequest.addHeader("Content-Type", "application/zip");
            postRequest
                    .addHeader(
                            "X-BRB-Custom",
                            "veT14BAttolUAgiosgaultfOrTH93TAD30sag48feYbUlk45COInneBcaDegEARhowOfAYs10HELpsmump23");

            File zipFile = new File(Zip);
            try
            {
                reqEntity = new MultipartEntity();

                fileBody = new FileBody(zipFile, "application/zip");
                reqEntity.addPart("fileupload", fileBody);

                postRequest.setEntity(reqEntity);

                HttpResponse response = httpclient.execute(postRequest);

                if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK)
                {
                    httpclient.getConnectionManager().shutdown();
                    return deleteFiles();
                }

            }
            catch (UnsupportedEncodingException e)
            {
                e.printStackTrace();
            }
            catch (ClientProtocolException e)
            {
                e.printStackTrace();
            }
            catch (IOException e)
            {
                e.printStackTrace();
            }

            httpclient.getConnectionManager().shutdown();

            return false; 
```

# javascript - 如何选择没有任何类的选择框

> ID：13590363
> 
> 赞同：-4
> 
> 时间：2012-11-27T18:06:41.740
> 
> 标签：javascript, jquery

我需要选择一个没有任何类名的选择框

```
 Minute : <select name="dob_minute'+$i+'[]" class="" style="width: 56px">
  <option value="">--------</option></select> 
```

我无法使用名称选择它。我还有其他一些问题。这就是我不按名称选择的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:10:58.097

这将选择具有以“dob_minute”开头的名称属性的任何选择元素，因此之后添加的变量无关紧要。

```
$('select[name^="dob_minute"]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:09:16.910

您可以使用*属性选择器*：

```
$('select[class=""]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:09:30.000

您可以使用[属性等于选择器](http://api.jquery.com/attribute-equals-selector/)找到选择，如下所示，

对于像下面这样的选择，

```
<select name="mySelect">
   <option>...</option>
</select> 
```

您可以在下面找到使用属性等于选择器的选择，

```
$('select[name="mySelect"]').val(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T18:10:24.897

```
var select = document.getElementsByName("dob_minute'+$i+'[]")[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T18:10:47.240

像这样使用选择

```
$('select[name=dob_minute]').val() 
```

# java - 我没有让循环在每个循环之后获取一个新值？

> ID：13590364
> 
> 赞同：1
> 
> 时间：2012-11-27T18:06:48.527
> 
> 标签：java

我正在尝试解决一个问题，即我尝试让我的循环在每个循环之后取一个新值。该程序假设我的利息支付罚款，本金支付当前余额，这样做我的利息假设每次循环时都会减少，但它只会循环第一个答案超过

这是第一个答案是正确的输出，但其他三个是

```
 Enter Loan Amount:500
    Enter Annual Interest:50
    Total payment:4
    Enter Loan Length :1
    Interest PaymentPrincipal PaymentCurrent Balance
    Interest Payment Principal Payment Current Balance 62.5
    62.5
    62.5
    62.5 
```

它应该是第一次付款后余额的 12.5%。

```
 public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        //variabled decleared
        double rate;
        double payment;
        int amt = 1;
       //input
       System.out.print("Enter Loan Amount:");
        double principal = input.nextDouble();
        System.out.print("Enter Annual Interest:");
        double interest = input.nextDouble();
        System.out.print("Total payment:");//12=monthly,4= quartely,2=semi-annually and 1=annually
        double period = input.nextDouble();
        System.out.print("Enter Loan Length :");
        int length = input.nextInt();

        //proces
        rate = interest / 100;
        double period_rate = rate / period;
          double n = period * length;
        payment = (principal*Math.pow((1+period_rate),n))/n;

        System.out.printf("\n"+"Interest Payment"+"     Principal Payment       "+"         Current Balance     ");

        for(int i=1; i<=n; i++){
        double principal_payment=0;
        double current_balance;
        double payment_interest;

        current_balance=(principal-principal_payment);
         payment_interest=(principal*period_rate);
        principal_payment=(payment-payment_interest);
        principal=current_balance;

         System.out.println(payment_interest+"");

         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:09:19.587

您为 for 的所有迭代赋予相同的值。这就是为什么你总是得到相同的输出。

如果您每次都想要新值，您可以提示用户为每次迭代提供新的输入。或者您在 for 之前执行此操作，将输入存储在数组中并在循环内处理它们。

像这样的伪代码：

```
for(i = 0; i < N; i++)
{
    //read principal from user input
    //read payment from user input
    // ect...
    payment_interest=(principal*period_rate);
    ...

} 
```

你可以[在这里](http://cs.middlesexcc.edu/~schatz/csc211/handouts/readdouble.html)看到如何**从键盘读取双精度**。请注意，在循环内部，您只需要向用户询问可以变化的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:19:24.617

忘记编程。拿铅笔和纸，用几个月的时间计算。然后将这些计算转移到代码中。当您在了解问题所在之前开始编码时，您就会超越自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:36:27.860

换行试试：

本金=当前余额；

至：

本金=本金-本金付款；

或将循环更改为：

```
double current_balance = principal;
    for (int i = 1; i <= n; i++)
    {
        double principal_payment = 0;

        double payment_interest;

        //current_balance = (principal - principal_payment);
        payment_interest = (current_balance * period_rate);
        principal_payment = (payment - payment_interest);
        current_balance = current_balance - principal_payment;

        System.out.println(payment_interest + "");

    } 
```

# php - 如何使用 php 邮件发送附件

> ID：13590366
> 
> 赞同：1
> 
> 时间：2012-11-27T18:07:00.807
> 
> 标签：php

我已经导出了一个 xls 文件，但我想将此 xls 文件作为邮件的附件邮寄。

导出excel.php

```
<?php
session_start();

//export format
$fileNamed = $username."_".$date_time; 
header ("Content-type: application/x-msexcel"); 
header ("Content-Disposition: attachment; filename=$fileNamed.xls" ); 
header ("Content-Description: PHP/INTERBASE Generated Data" );

echo $data;
?> 
```

上面的 php 文件在 xls 中导出 $data 中的内容。但我想用附加的 xls 文件邮寄这个 xls 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:52:57.177

一封电子邮件可以分成许多部分，由一个边界分隔，后跟一个 Content-Type 和一个 Content-Disposition。

边界初始化如下：

```
<?php
$boundary = '-----=' . md5( uniqid ( rand() ) );
?> 
```

如果您指定，您可以附加 Word 文档：

```
<?php
$message .= "Content-Type: application/msword; name=\"my attachment\"\n";
$message .= "Content-Transfer-Encoding: base64\n";
$message .= "Content-Disposition: attachment; filename=\"$theFile\"\n\n";
?> 
```

添加文件时，您必须打开它并使用 fopen 读取它并将内容添加到消息中：

```
<?php
$path = "whatever the path to the file is";
$fp = fopen($path, 'r');
do //we loop until there is no data left
{
        $data = fread($fp, 8192);
        if (strlen($data) == 0) break;
        $content .= $data;
      } while (true);
$content_encode = chunk_split(base64_encode($content));
$message .= $content_encode . "\n";
$message .= "--" . $boundary . "\n";
?> 
```

添加所需的标题并发送！

```
<?php
$headers  = "From: \"Me\"<me@example.com>\n";
$headers .= "MIME-Version: 1.0\n";
$headers .= "Content-Type: multipart/mixed; boundary=\"$boundary\"";
mail('myAddress@example.com', 'Email with attachment from PHP', $message, $headers); 
```

# php - 使用 sql 检查特定时间的餐厅餐桌可用性

> ID：13590373
> 
> 赞同：6
> 
> 时间：2012-11-27T18:07:24.347
> 
> 标签：php, mysql, sql, yii

我正在尝试使用 yii 框架构建餐厅餐桌管理应用程序，目前我被困在检索特定时间的餐桌可用性

我有以下表格

下图显示了我的表结构

![在此处输入图像描述](../Images/e0cd187f4a42c5c7db2731d957629632.png)

我正在使用以下代码获取可用表

```
 $model = new Table;
    $criteria = new CDbCriteria;
    $criteria->condition = 'floor_id=' . $floorid;
    $rows = $model->model()->with(array(
                'bookingTables' => array(
                    'condition' => 'bookingTables.table_id IS NULL'
                    )))->findAll($criteria); 
```

这仅在 booking_table 表中不存在表 ID 时才有效

假设如果说 booking_table 表填充了表 ID，那么上面的代码将不起作用，它将始终返回为不可用（不知道如何使用时间来获取可用表）

那么如何获取特定时间段的可用表 yii 或 sql 中的任何解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:27:01.000

既然你接受 SQL 和 YII，我给你一个 SQL 的解决方案。

如果您想查看给定时间的空房情况，您需要知道预订日期（包括小时），所以让我们考虑在您的“booking_table”表中添加字段“reservation_date”，让我们考虑预订结束 2在它开始几个小时后。这就是我将在 SQL 中执行的操作：

```
SELECT t.table_id
FROM TABLE AS t
LEFT OUTER JOIN booking_table AS b ON b.booking_table_id = t.table_id
WHERE b.booking_id IS NULL
    OR DATE_ADD(NOW(), INTERVAL 2 HOUR) > b.reservation_date 
```

此查询列出执行时的所有可用表。如果您想在特定时间检查可用性，请将“NOW()”替换为您需要的任何内容。

# testing - Grails 服务的 Spock 测试中的交互太少

> ID：13590382
> 
> 赞同：2
> 
> 时间：2012-11-27T18:07:56.453
> 
> 标签：testing, grails, service, spock

我以为我已经理解了 Spock 的交互，但我必须管理我仍然缺少一些图片。

好吧，这是我的问题：我在 Grails 服务中有一个方法，它执行一些操作，包括调用同一服务类的 void 方法。这是代码：

```
class myService {
    void myStuff(def myObj, params) {
        // do my stuff

        anotherMethod(myObj)

        //do my stuff again
    }

    void anotherMethod(myObj) {
        // do other stuff
    }
} 
```

我想确保 myStuff 方法调用另一个方法，以测试和记录正确的行为。

所以，这是我的 Spock Specification 类中的测试：

```
void 'test myStuff method'() {
    given: 'my object and some params'    
        // doesn't really matter what I'm doing here
        MyObject myObj = new MyObject()
        params = [title: 'my object']

    when: 'we call myStuff()'
        service.myStuff(myObj, params)

    then: 'anotherMethod() is called exactly one times'
        1 * service.anotherMethod(myObj)
    }
} 
```

我得到的错误是：

```
Too few invocations for:

1 * service.anotherMethod(myObj)   (0 invocations) 
```

你怎么看？怎么了？

与往常一样，提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T20:12:52.623

您要求一种非常特殊且通常不鼓励使用的模拟形式，称为*部分模拟，其中模拟了**被测类*上的方法。Spock 从 0.7 开始支持这一点，但您必须创建 a`Spy()`而不是`Mock()`. 另请注意，您不能模拟私有方法。有关间谍的更多信息，请参阅[参考文档](http://docs.spockframework.org/en/latest/interaction_based_testing.html#spies)。

# javascript - .click() 在 ie 中的 iframe 中不起作用

> ID：13590383
> 
> 赞同：1
> 
> 时间：2012-11-27T18:08:02.380
> 
> 标签：javascript, asp.net, internet-explorer, iframe

我的项目是一个`asp.net`项目，我有一个名为“Districting”的单独页面，它是从`iframe`. 在 Districting.aspx 页面中，有一个为按钮触发 .click() 事件的函数：

用户点击的按钮：

```
<button id="b1" onclick="DoneClicked();">Done</button> 
```

功能是：

```
function DoneClicked(){
    $("#button1").click();
} 
```

button1 是一个asp按钮的id，它从服务器端调用一个函数：

```
<asp:Button id="button1" cssClass="invisiblebutton" OnClick="AddingDistrict" runat="server" /> 
```

cssClass, invisiblebutton 包含属性：`display:none`。

问题是`$("#button1").click()`事件不仅仅在 IE 中起作用，所以它没有`AddingDistrict()`从 cs 页面调用函数。它在 chrome 和 FireFox 中运行良好。谁能帮我解决这个问题？

提前致谢：）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T18:23:09.370

也许ie中的javascript被禁用检查它

# wpf - WPF Xaml 转换器错误

> ID：13590386
> 
> 赞同：1
> 
> 时间：2012-11-27T18:08:21.863
> 
> 标签：wpf

我收到一个编译错误

> 错误 1 ​​找不到类型或命名空间名称“转换器”（您是否缺少 using 指令或程序集引用？） G:\C#\Practice\DataGrid\DataGrid\obj\x86\Debug\MainWindow.g.cs 12 7 数据网格

下面是我的 Xaml 代码，我是 WPF 新手，请帮帮我。我有转换器类。

```
<Window  x:Class="DataGrid.MainWindow "
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Height="500" Width="700"
xmlns:c="clr-namespace:Converters">
<Window.Resources>
   <c:BoolToStringConverter x:Key="BoolToStringConverter" />
</Window.Resources>
    <Grid>

    <Grid.RowDefinitions>
        <RowDefinition Height="59*" />
        <RowDefinition Height="402*" />
    </Grid.RowDefinitions>
    <StackPanel Margin="0,55,0,0" Grid.RowSpan="2">
        <DataGrid ItemsSource="{Binding Path=Courses}" AutoGenerateColumns="False" HorizontalAlignment="Left" Name="datagrid1" CanUserAddRows="False" HeadersVisibility="Column" RowDetailsVisibilityMode="Visible" VerticalScrollBarVisibility="Auto" CanUserSortColumns="True" CanUserResizeColumns="False" Height="339" Width="610">
            <DataGrid.Resources>
                <Style TargetType="{x:Type CheckBox}" x:Key="DataGridCheckBox">
                    <Setter Property="HorizontalAlignment" Value="Center" />
                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                    <Setter Property="IsEnabled" Value="True" />
                    <Setter Property="Margin" Value="4" />
                    <Setter Property="VerticalAlignment" Value="Center" />
                    <Setter Property="VerticalContentAlignment" Value="Center" />
                </Style>
            </DataGrid.Resources>
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Course Title" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <TextBlock Text="{Binding Path=Code}" VerticalAlignment="Center" />
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Course Description" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <TextBlock Text="{Binding Path=Descrption}" VerticalAlignment="Center" />
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="Required" Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                                <TextBlock Text="{Binding Path=IsRequired, Converter={StaticResource BoolToStringConverter}}" 
                                       VerticalAlignment="Center" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </StackPanel>
    <StackPanel Margin="0,0,539,32">
        <TextBlock Text="Select Enroolment:" FontSize="15" 
                   Height="26"
                   Grid.RowSpan="1"
                   Width="134">
        </TextBlock>

    </StackPanel>
    <TextBlock DockPanel.Dock="Left"
               HorizontalAlignment="Left" 
               Text="Select Course:" 
               Width="139" FontSize="15" 
               Margin="0,32,0,0">
               </TextBlock>
    <ComboBox HorizontalAlignment="Right"
              Margin="0,0,69,33"
              Name="comboBox1"
              Width="476"
              Height="23"
              VerticalAlignment="Bottom" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:11:17.500

`xmlns:c="clr-namespace:Converters"`

您应该检查您的 Converters 类的命名空间，这就是您应该放置的`Converters`. 如果`Converters`是你的班级，那么你应该把它所说的任何东西放在你的`.cs`文件中的命名空间之后。

例子：

```
 namepsace MyNamespace {
      public class Converters { }
 } 
```

那么您的 XAML 将是：

```
 xmlns:c="clr-namespace:MyNamespace" 
```

额外：如果您想更具体，也可以添加装配参数。

```
 xmlns:window="clr-namespace:MyNamespace;assembly=MyNamespace" 
```

可以在 Build Properties 中找到 Assembly（右键单击 Project、Properties、Application、Assembly Information）

您的默认命名空间也可以在 Build Properties 中找到。

# schema.org - 我可以在一页上使用多个 Schema.org itemscope 吗？

> ID：13590387
> 
> 赞同：2
> 
> 时间：2012-11-27T18:08:22.007
> 
> 标签：schema.org

我一直在 Schema.org 上四处寻找，但我不明白一件事。一个 HTML 页面可以由多个模式组成吗？如果是这样，它们是否需要嵌套？

我们正在处理一个单页登陆/销售页面。我想在上面放置以下架构：

*   组织
*   产品
*   产品评论

我猜产品评论需要嵌套在产品中？或者它们可以在页面的完全不同的部分？

查看了有哪些小文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T05:48:42.667

您可以拥有多个模式，也可以混合使用其他标记类型。

一些模式类型自然会嵌套其他类型，例如产品可能包含产品评论。可以在产品之外标记评论，但您可能会发现较少的系统会正确提取关联。

# php - Kohana 验证 3.3

> ID：13590388
> 
> 赞同：2
> 
> 时间：2012-11-27T18:08:28.967
> 
> 标签：php, kohana, kohana-auth

如何正确验证提交的表单？我一直在查看[http://kohanaframework.org/3.3/guide/orm/validation](http://kohanaframework.org/3.3/guide/orm/validation)和[http://kohanaframework.org/3.3/guide/kohana/security/validation](http://kohanaframework.org/3.3/guide/kohana/security/validation)的文档，后者还告诉我*“这开发团队需要检查页面的准确性。更好的示例会有所帮助。”*

我想要实现的是注册一个用户（Auth 模块）我不太确定哪个也使用以及为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:04:40.107

[http://kohanaframework.org/3.3/guide/orm/validation](http://kohanaframework.org/3.3/guide/orm/validation) 这是您验证模型的方式

[http://kohanaframework.org/3.3/guide/kohana/security/validation](http://kohanaframework.org/3.3/guide/kohana/security/validation) 这就是您验证用户输入的方式。

在阅读了上述链接上的示例后，我在几个项目中都使用了这两种方法，并且一切正常。

# php - 当 MYSQL 列值递增 100 时做一些事情

> ID：13590389
> 
> 赞同：0
> 
> 时间：2012-11-27T18:08:32.437
> 
> 标签：php, mysql, database, database-design

当站点成员的帖子数达到 100 的倍数时，我需要提醒他们。当 mysql 表中的值达到 100、200、300 等时，是否可以运行函数或回显某些内容？

表结构：

```
username | password | email | posts 
```

我目前正在显示他们的帖子计数：

```
$sql = mysql_query("SELECT `posts` FROM `user` WHERE username='$username'") or die(mysql_error());
$row = mysql_fetch_array($sql);

echo "<br /><h4>Your posts:</h4>" . " " . $row['posts']; 
```

**已解决：我同意**Marc 提出的使用模数的建议，这符合我的需要。

```
$sql = mysql_query("SELECT `posts` AS posts FROM `user` WHERE username='$username'") or die(mysql_error());
$row = mysql_fetch_array($sql);
$post = $row['posts'];

    if($post % 100 == 0) {

        mysql_query("INSERT INTO `posts` (name, message, message_raw) VALUES ('System', '$name has reached $post posts!', '$name has reached $post posts!')");

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:13:05.023

你需要一个[模数](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_mod)

> 模运算。返回 N 除以 M 的余数。

像这样

```
SELECT username
FROM `user` 
WHERE username='$username' AND MOD(posts,100) = 0 
```

每次用户发布新帖子时，您都可以检查条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:10:24.123

您可以使用触发器：

[http://dev.mysql.com/doc/refman/5.5/en/triggers.html](http://dev.mysql.com/doc/refman/5.5/en/triggers.html)

或者

只需创建一个 cron 作业

# c# - asp.net 下拉列表选择的值

> ID：13590396
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:08:59.787
> 
> 标签：c#, asp.net

当我从下拉列表中选择一个值时，我希望将该值保存在所需的 @TimeZone 值中

```
 InsertCommand="INSERT INTO [Companies] ([TimeZone]) VALUES ( @TimeZone)" 
```

我不知道该怎么做。

这是我的代码：

在我的页面加载中，我有以下代码为下拉列表赋值：

```
 ddlTimeZone.DataSource = from p in TimeZoneInfo.GetZones()
                             select new { p.Id };
    ddlTimeZone.DataTextField = "Id";
    ddlTimeZone.DataValueField = "Id";             
    ddlTimeZone.DataBind(); 
```

接下来，在我的 .aspx 文件中，我有以下内容：

```
 <EditItemTemplate>
      <asp:DropDownList ID="ddlTimeZone" runat="server">
      </asp:DropDownList>
    </EditItemTemplate> 
```

…………

```
 InsertCommand="INSERT INTO [Companies] ([TimeZone]) VALUES ( @TimeZone)"

     <InsertParameters>                 
         <asp:Parameter Name="TimeZone" Type="String" />           
     </InsertParameters> 
```

同样，我需要知道的是如何将下拉列表（ddlTimeZone）中的选定值绑定到@TimeZone

我试过：

```
 <asp:DropDownList ID="ddlTimeZone" SelectedValue='<%# Bind("TimeZone") %>' runat="server">
      </asp:DropDownList> 
```

但这没有用。请注意，我在网格视图中使用下拉列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:14:24.243

试试这个方法

```
var command = new SqlCommand("INSERT INTO [Companies] ([TimeZone]) VALUES ( @TimeZone)", connection);
command.Parameters.Add(new SqlParameter("@TimeZone", valuetopass)); 
```

# javascript - html 使页面设置分辨率

> ID：13590397
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:09:12.083
> 
> 标签：javascript, html, css

大家好，只是想知道一些 html、css 和 javascript 中的代码。但是我想知道如何使该页面显示在我选择的分辨率中。

```
 <div class = "Web">
        <img src="../images/Web.png" alt="Web">
    </div> 
```

因此，例如，如果该人在 19200 x 1200 的屏幕分辨率上观看它，我希望那个人以 1024 x 768 的分辨率观看它，那么如果他愿意，他可以自己放大和缩小。

我给出的代码只是一个例子。谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:13:34.967

为什么你希望它出现在另一个资源中？对我来说没有意义。

如果是我，我会使用媒体查询来定义观看体验并将@2x 用于 iDevices。

或使用响应式网页设计

[http://www.getskeleton.com/](http://www.getskeleton.com/)这是我使用的。

# internet-explorer - Google 的 jsapi - google 仅在 IE 中是未定义的错误

> ID：13590401
> 
> 赞同：4
> 
> 时间：2012-11-27T18:09:21.310
> 
> 标签：internet-explorer, google-visualization

我正在使用谷歌`jsapi`绘制图表。当我使用 FireFox 查看我的页面时，我的图表可以工作，但在 IE 中，我的控制台中出现以下错误：

```
SCRIPT5009: 'google' is undefined 
```

这是我的代码在`head`我的 HTML 文档的标记中的外观：

```
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("visualization", "1", {packages:["corechart"]});
</script> 
```

但它在`google.load`通话中失败。

我能找到的唯一“解决方案”是将 URL 协议从 更改`http`为`https`. 我的网站没有使用`https`其他地方。无论如何我尝试使用它`jsapi`，但该错误一直出现在 IE 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T15:40:46.577

如果在新的 Internet Explorer 选项卡中加载[https://www.google.com/jsapi](https://www.google.com/jsapi)会显示有关 TLS 的错误消息，[则需要启用它](http://www.bauer-power.net/2014/06/how-to-enabled-tls-11-and-tls-12-in.html)。

好消息是它只影响了您的计算机。坏消息是修复是客户端的，您无法为您网站的访问者启用 TLS。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T13:30:45.813

Internet Explorer 在阅读 js 代码时出现了一些问题。问题的最可能原因是 IE 不能很好地处理代码中的换行符。如果您尝试这样的事情，它将起作用：

```
<script type="text/javascript">google.load("visualization", "1", {packages:["corechart"]});</script> 
```

# jquery - 如何在添加 ajax 的元素上绑定触摸事件

> ID：13590404
> 
> 赞同：1
> 
> 时间：2012-11-27T18:09:29.503
> 
> 标签：jquery, jquery-plugins

我正在将[touchSwipe jQuery 插件](https://github.com/mattbryson/TouchSwipe-Jquery-Plugin)用于一个小的 WebApp。不幸的是，它不适用于动态添加的元素（例如通过 AJAX）。

好吧，我查看了代码并发现了类似的内容：

```
$element.bind(START_EV, touchStart);
$element.bind(CANCEL_EV, touchCancel); 
```

如何绑定事件以便它们也可用于动态添加的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:11:13.493

使用`on`和委托事件：

```
$(document).on('event', 'element_selector', function(){
    // do when event happens
}); 
```

但是对于该插件，您*可能*必须在将事件添加到页面时将它们附加到新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-30T12:05:29.440

`.on`有关用于此场景的更多详细信息，如本文中的[示例](https://eureka.ykyuen.info/2013/12/11/touchswipe-implement-delegated-swipe-event-for-inner-elements/)所示：

```
$("#boxes").on('mouseover','.box', function() {
    $(this).trigger('swiping');
});

$("#boxes").on('swiping','.box', function() {
    var $this = $(this);
    $this.swipe({
        swipe: function(event, direction, distance, duration, fingerCount) {
            $this.text("You swiped " + direction );
        }
}); 
```

在上面的代码片段中，新`.box`元素是动态创建的。您创建一个`'swiping'`事件并在悬停`.box`元素时触发它（包括通过 AJAX 添加的新元素等）。然后第二部分监视`'swiping'`事件并附加插件的元素的全部内容。`.swipe()``.box`

# javascript - Javascript function into input

> ID：13590413
> 
> 赞同：1
> 
> 时间：2012-11-27T18:09:57.030
> 
> 标签：javascript, html

```
<form name="test_form">
    <input id="demo" type="text" value=""> 
</form>

<button onclick="data()">GO</button>
<script>
var x=document.getElementById("demo");  
function data()
  {
    x.innerHTML="TEST"; 
  }
</script> 
```

I am trying to input JavaScript function into input field but I've got a problem with that, nothing is happening, any ideas how to fix it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:13:54.090

```
x.innerHTML="TEST"; 
```

should be

```
x.value="TEST"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:03:25.637

```
<script>

function data()
{
  var x=document.getElementById("demo");
  x.value="TEST"; 
}
</script>
<form name="test_form">
  <input id="demo" type="text" value=""> 
</form>
<button onclick="data();">GO</button> 
```

[http://jsfiddle.net/vdAY7/](http://jsfiddle.net/vdAY7/)

# java - 豆机 Galton Box Java 展示

> ID：13590414
> 
> 赞同：2
> 
> 时间：2012-11-27T18:10:08.247
> 
> 标签：java, multidimensional-array

磨豆机是一块直立的木板，带有均匀分布的三角形钉子。球从板的开口处落下。每次球击中钉子时，它有 50% 的机会向左或向右下落。成堆的球堆积在板底部的插槽中。

我将程序写入生成随机左或右的位置。我希望输出是类似的基础：

```
Drop a ball? Yes...
LRLRLRR
Drop a ball? Yes...
RRLLLRR
Drop a ball? Yes...
LLRLLRR
Drop a ball? Yes...
RRLLLLL
Drop a ball? Yes...
LRLRRLR

    0
    0
0 0 0 
```

我有它显示 Bean Machine 的球路径输出的位置，但我不明白我应该如何显示具有球和插槽的数组以及插槽中的球......

这是我的代码的主要部分，我没有发布典型的显示方法等，因为我确定他们没有出现这个问题

```
 import java.util.Scanner;
    import java.util.Random;

    public class BeanMachine {

        //constants 
        static final int LEFT = 0;
        static final int RIGHT = 1;
        static final char BALL = 'O';
        //constants for options
        static final int STANDARD_GAME = 0;
        static final int QUIT = -1;

        //Scanner for input
        static Scanner keyboard = new Scanner(System.in);

        //two-dimensional array to represent the bean machine
        int ballsNo;
        int slotsNo;
        char[][]slots = new char[ballsNo][slotsNo];

//***MAIN METHOD***********************************************************

public static void main(String[] args) {
    displayBanner();

    int userChoice = QUIT;
    boolean done = false;

    System.out.print("Enter the number of balls you want to drop: ");
    int ballsNo = keyboard.nextInt();

    System.out.print("Enter the number of slots you want in the bean machine: ");
    int slotsNo = keyboard.nextInt();

    do {
        displayMenu();
        userChoice = getUserChoice();

        switch (userChoice) {

            case STANDARD_GAME:
                dropBall(slotsNo);
                break;
            case QUIT:
                done = true;
                break;
            default:
                System.out.println("Continue playing?");
        }
    } while(!done);
}//end of main method   

//***CLEAR SLOTS*********************************************************** 

public void clearSlots(int ballsNo1, int slotsNo1){
    for (ballsNo = 0; ballsNo < ballsNo1; ballsNo++) {
        for (ballsNo = 0; slotsNo < slotsNo1; slotsNo++) {
            slots[ballsNo][slotsNo] = 0;
        }
    }   
}

//***DROP BALL*****************************************************************

static int dropBall(int slotsNo) {

    int rights = 0;
    int position = 0;

    while (position < slotsNo-1){
        if (Math.random() < 0.5) {
                    System.out.println("L");
        }
                            else{                     
                            System.out.println("R");
                            rights++;   
                  }
                  position++;
    }

      return rights;

}//end of dropBall

//***DISPLAY BOARD**********************************************************    

static void displayBoard(int ballsNo, int slotsNo, char [][] slots){

    int count = 0;
    while(count<=slotsNo){
        System.out.println(slots[ballsNo][slotsNo]);
        count++;
    }
}   

    }//end of class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:46:31.637

这只是正确循环数组的问题。您需要将其视为一个网格，并根据您如何看待它，确定您如何打印它：例如，假设您有一个网格，`char[3][4]`您可以将其可视化为：

```
 0 1 2   <- this would be your columns
0 | | | |
1 | | | |
2 | | | |
3 |_|_|_|
^
| 
this would be your rows 
```

或者你可以像这样想象它：

```
 0 1 2   <- this would be your columns
3 | | | |
2 | | | |
1 | | | |
0 |_|_|_|
^
| 
this would be your rows 
```

因此，这取决于您认为该物品`(0,0)`所在的位置。以下示例假设`(0,0)`位于右下角：

```
public class BeanMachine {

    static final char BALL = 'O';
    static char[][] slots;

    public static void main(String[] args) {
        int height = 10;
        int width = 5;
        slots = new char[height][width];

        // just adding some stuff in here so we have something to print
        slots[0][0] = BALL; // bottom left
        slots[9][4] = BALL; // top right

        displayBoard();
    }

    static void displayBoard() {
        // we need to loop through each row
        String columnSeperator = "|";
        for (int i = slots.length - 1; i >= 0; i = i - 1) {
            String row = columnSeperator;
            for (int j = 0; j < slots[i].length; j = j + 1) {
                // char seems to be initialized to ' ' so we do not need to do
                // any checks and just add the value in the array.
                row = row + slots[i][j] + columnSeperator;
            }
            System.out.println(row);
        }
    }

} 
```

# scala - 全栈模板？

> ID：13590422
> 
> 赞同：4
> 
> 时间：2012-11-27T18:10:41.207
> 
> 标签：scala, backbone.js, frameworks, coffeescript, marionette

可重用性和抽象性正在扼杀我；我显然一直在做很多客户端开发。CoffeeScript、Backbone 和 Marionette 提供了帮助。尽管如此，构建完全可重用、模块化的“模板”——从服务器端到更高——仍然是不可能的。让我从上到下描述一个问题，然后也许你可以帮助描述最好的堆栈。

我想构建一个登录小部件，可以使用相同的框架在多个应用程序中进行版本控制和重用（这是一个基本的异想天开的例子，用一些盐来处理）。一个大型应用程序是个坏主意，无论如何它们都是单独托管的。所有单独的应用程序都使用相同的 API，托管在其他地方，并且不接受 JSONP。

**客户端**

登录表单将由 Marionette ItemView、一些处理所有花哨交互的 jQuery 函数、一个处理 POST、GET、DELETE 各个方面的 Backbone “Account”模型以及一些带有 View 的基本 html 组成. **通常，我必须为 AJAX 交互显式设置 urlRoot（见下文），但我只想说 '/' + @attributes.email，因为 ROUTE 是什么并不重要，因为一切都捆绑在一起。**

```
class Account extends Backbone.Model  
  # Normal
  create: () ->
    @urlRoot = () ->
      '/account/' + @attributes.email
    @save()

  # Ideal
  create: () ->
    @urlRoot = () ->
      '/' + @attributes.email
    @save() 
```

**服务器端**

这是根据客户端（希望在 Scala 中）构建的，而不是在某处显式定义 ROUTE：

```
POST /account/:email controllers.Account.create(password: String) # Play 2.0 syntax 
```

我只能说：

```
@POST(/:email?password=[String]) # Made up syntax
create(email, password) = {

  # Hit external API 
  val json = WS.url('https://someapi/v1/account').withQueryParams('email=' + email + '&password=' + password).get()

  # Return some response
  Ok(json)

} 
```

应用程序框架可能会知道这个模块或模板，`@account()`如果我想构建一个具有登录功能的主页，我只需执行以下操作：

```
<html>
  Oh hey cool stuffz, sign up or login please
  <right column>
    @account()
  <end right column>
  @social() <!-- perhaps another template -->
<html> 
```

我的设想是应用层将客户端到服务器的调用从模块抽象为 GUID，也许，因此进行“创建帐户”调用实际上会执行以下操作：

```
POST /35395235/:email account.create(password: String) 
```

虽然我知道这不一定存在，但我偶然发现了 Lift，它似乎相对有前途，但仍然不像我希望的那样抽象。想法？

# javascript - 从 div 获取链接地址并使用 javascript 重定向到它

> ID：13590427
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:11:10.123
> 
> 标签：javascript, redirect

这是代码：

```
<div class="thank_you">
   <p>
     <strong>Title</strong> – <a href="product-link">Product Link</a>
   </p>
</div> 
```

我正在尝试创建一个延时重定向到产品链接（链接到按次付费内容）。我猜下载链接需要在页面加载后被抓取，因为链接是动态提供的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:17:38.647

[这个](http://www.tizag.com/javascriptT/javascriptredirect.php)页面有你想要的：

```
setTimeout(function() {
    window.location = document.getElementById('myElement').getAttribute('href');
}, 5000); 
```

# extjs - Extjs 4 为什么不允许隐藏所有可隐藏的列？

> ID：13590430
> 
> 赞同：0
> 
> 时间：2012-11-27T18:11:15.270
> 
> 标签：extjs, hide, gridpanel

我注意到用户无法隐藏网格面板中的所有列。似乎网格必须至少显示一列。我可以想象这是一个不错的功能，但是在处理可隐藏和不可隐藏的列时，它并没有像我预期的那样工作。似乎规则是至少需要显示一个可*隐藏*的列，即使网格中有不可隐藏的列。

当至少显示一个不可隐藏的列时，不允许隐藏所有可隐藏的列对我来说没有意义。这种行为是可配置的吗？

我基于显示问题的**有状态数组网格示例 **创建了一个演示：http :
[//jsfiddle.net/p9zqK/](http://jsfiddle.net/p9zqK/)

```
var grid = Ext.create('Ext.grid.Panel', {
store: store,
stateful: true,
stateId: 'stateGrid',
columns: [
    {
        text     : 'Company',
        flex     : 1,
        sortable : false,
        hideable : false,
        dataIndex: 'company'
    },
    {
        text     : 'Price',
        width    : 75,
        sortable : true,
        renderer : 'usMoney',
        dataIndex: 'price'
    },
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:57:18.420

一个简单的技巧是允许无条件隐藏所有列（在我的应用程序中，我不关心是否存在可隐藏列，因为我知道它们确实存在......）

```
Ext.override(Ext.grid.header.Container,
{
    updateMenuDisabledState: function()
    {
        var me = this,
        result = me.getLeafMenuItems(),
        total = result.checkedCount,
        items = result.items,
        len = items.length,
        i = 0,
        rootItem = me.getMenu().child('#columnItem');

        //if (total <= 1)
        if (total <= 0) /* Allow all columns to be hidden unconditionally */
        {
            me.disableMenuItems(rootItem, Ext.ComponentQuery.query('[checked=true]', items)[0]);
        }
        else
        {
            for (; i < len; ++i)
            {
                me.setMenuItemState(total, rootItem, items[i]);
            }
        }
    }
}); 
```

# r - 计算没有循环的样本方差

> ID：13590434
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:11:43.197
> 
> 标签：r, loops

这是我想做的事情：

我有一个时间序列数据框，让我们说 100 个长度为 600 的时间序列 - 每个都在数据框的一列中。

我想随机选取 10 个时间序列，然后为它们分配总和为 1 的随机权重。使用那些我想计算 10 个加权时间序列变量（例如凸组合）之和的方差。

df 的形式为

```
v1,v2,v2.....v100
1,5,6,.......9
2,4,6,.......10
3,5,8,.......6
2,2,8,.......2
etc 
```

我可以在循环内计算它，但 r 是面向矢量的，效率不高。

```
ntrials = 10000
ts.sd = NULL
for (x in 1:ntrials))
  {
  temp = t(weights[,x]) %*% cov(df[, samples[, x]]) %*% weights[, x]
  ts.sd = cbind(ts.sd, temp)
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:36:47.630

不确定您的权重需要哪种“随机”类型...所以我将使用按比例缩放的正态分布，它总和为 1：

```
x=as.data.frame(matrix(sample(1:20, 100*600, replace=TRUE), ncol=100))

myfun <- function(inc, DF=x) {
  w = runif(10)
  w = w / sum(w)
  t(w) %*% cov(DF[, sample(seq_along(DF), 10)]) %*% w
}

lapply(1:ntrials, myfun) 
```

然而，这并不能真正避免循环，因为`lapply`它只是一个有效的循环结构。也就是说，`for loops`在 R 中并不是明确的坏或低效的。然而，就像你正在做的那样，增长一个数据结构`cbind`是。

但在这种情况下，因为你只是通过附加一个元素来增长它，它真的不会改变太多。“正确”的版本是`ts.sd`使用`ntrials`.

```
ts.sd = vector(mode='numeric', length=ntrials) 
```

在你的循环中分配给它使用`i`：

```
for (x in 1:ntrials))
  {
  temp = t(weights[,x]) %*% cov(df[, samples[, x]]) %*% weights[, x]
  ts.sd[i] = temp
  } 
```

# ruby-on-rails - redis local SocketError: getaddrinfo: nodename nor servname provided, or not known

> ID：13590436
> 
> 赞同：3
> 
> 时间：2012-11-27T18:11:55.910
> 
> 标签：ruby-on-rails, redis

我在我的 rails 应用程序中安装了 redis。一切似乎都很好，我正在控制台中运行 redis 服务器。所有端口匹配。在我的初始化程序中：

```
REDIS = Redis.new(:host => 'localhost', :port => 6379) 
```

在控制台中：

```
[3] pry(main)> REDIS
=> #<Redis client v3.0.2 for redis://localhost:6379/0> 
```

但是当我尝试设置一些东西时：

```
[4] pry(main)> REDIS.set("hello", "goodbye")
SocketError: getaddrinfo: nodename nor servname provided, or not known
from /usr/local/rvm/gems/ruby-1.9.3-p0@stacksocial/gems/redis-3.0.2/lib/redis/connection/ruby.rb:112:in `getaddrinfo' 
```

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:27:33.610

终于想通了。我很久以前编辑了我的主机文件，所以 127.0.0.1 非常自定义，并且不能很好地与 redis 配合使用。我将我的主机文件恢复为默认值，它现在可以工作了。

# f# - 试图理解 F# 活动模式，为什么我可以这样做：

> ID：13590439
> 
> 赞同：9
> 
> 时间：2012-11-27T18:12:09.347
> 
> 标签：f#, active-pattern

我有一个`Dictionary`我最初这样迭代的：

`myDictionary |> Seq.iter (fun kvp -> doSomething kvp.Key kvp.Value)`

后来，我发现我可以利用`KeyValue`活动模式，并这样做：

`myDictionary |> Seq.iter (fun (KeyValue (k, v)) -> doSomething k v)`

知道活动模式不是某种形式的预处理器指令，我如何能够`kvp`将 lambda 中的参数替换为分解它的函数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-27T18:16:52.213

函数参数调用总是使用模式匹配进行解构。例如：

```
let getSingleton = fun [x] -> x
let getFirst = fun (a,b) -> a
let failIfNotOne = fun 1 -> ()
let failIfNeitherOne = fun (x,1 | 1,x) -> () 
```

从语义上讲，`fun`<pat> `->`<body> 大致等价于

`fun x ->`
`match x with`
`|`<拍> `->`<身体>
`| _ -> raise MatchFailureException(...)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T18:43:25.190

我认为@kvb 的答案涵盖了足够详细的信息，为什么您可以在`fun`. 这不是一个特别的功能 - 在 F# 中，您可以在任何可以绑定变量的地方使用模式。要在其他上下文中显示@kvb 的一些示例：

```
// When declaring normal functions     
let foo [it] = it    // Return the value from a singleton list
let fst (a, b) = a   // Return first element of a pair

// When assigning value to a pattern using let
let [it] = list
let (a, b) = pair 
```

同样，您可以在编写时使用模式`fun`。该`match`结构更强大一些，因为您可以指定多个子句。

现在，主动模式并没有那么神奇。它们只是具有特殊名称的普通函数。编译器在找到命名模式时搜索范围内的活动模式。例如，您使用的模式只是一个函数：

```
val (|KeyValue|) : KeyValuePair<'a,'b> -> 'a * 'b 
```

该模式将`KevValuePair`对象转换为普通的 F# 元组，然后由嵌套模式匹配`(k, v)`（将第一个元素分配给`k`，将第二个元素分配给`v`）。编译器基本上将您的代码转换为：

```
myDictionary |> Seq.iter (fun _arg0 ->
  let _arg1 = (|KeyValue|) _arg0
  let (k, v) = _arg1 
  doSomething k v ) 
```

# c# - 将 P/Invokes 移至 NativeMethods 类因为它是 P/Invoke 方法消息

> ID：13590447
> 
> 赞同：4
> 
> 时间：2012-11-27T18:12:39.067
> 
> 标签：c#, .net, pinvoke

有人可以建议我与此消息有什么关系吗？

> CA1060 将 P/Invokes 移至 NativeMethods 类 因为它是 P/Invoke 方法，所以应在名为 NativeMethods、SafeNativeMethods 或 UnsafeNativeMethods 的类中定义“UControl.InternetGetConnectedState(out int, int)”。兆。UControl.xaml.cs 33

**代码：**

```
namespace Mega
{
    /// <summary>
    /// Interaction logic for UserControl1.xaml
    /// </summary>
    public partial class UControl 
    { 
        [DllImport("wininet.dll")]
        private extern static bool InternetGetConnectedState(out int description, int reservedValue); 
```

谢谢你！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-11-10T10:03:16.730

要摆脱警告，只需将您的`P/Invoke`方法添加到以下类之一（通常`NativeMethods`）。如果你正在创建一个可重用的库，你应该把它们放在`UnsafeNativeMethods`或`SafeNativeMethods`中。

* * *

msdn[页面](https://msdn.microsoft.com/library/ms182161.aspx)说

> 要修复违反此规则的行为，请将方法移至相应的**NativeMethods**类。**对于大多数应用程序，将 P/Invokes 移至名为NativeMethods**的新类就足够了。

`NativeMethods`他们推荐使用3 个类：

> **NativeMethods** - 此类不禁止非托管代码权限的堆栈遍历。（System.Security.SuppressUnmanagedCodeSecurityAttribute 不得应用于此类。）此类用于可在任何地方使用的方法，因为将执行堆栈遍历。
> 
> **SafeNativeMethods** - 此类抑制非托管代码权限的堆栈遍历。（System.Security.SuppressUnmanagedCodeSecurityAttribute 应用于此类。）此类用于任何人都可以安全调用的方法。这些方法的调用者不需要执行完整的安全审查以确保使用安全，因为这些方法对任何调用者都是无害的。
> 
> **UnsafeNativeMethods** - 此类抑制非托管代码权限的堆栈遍历。（System.Security.SuppressUnmanagedCodeSecurityAttribute 应用于此类。）此类用于具有潜在危险的方法。这些方法的任何调用者都必须执行完整的安全审查，以确保使用是安全的，因为不会执行堆栈遍历。

但大多数时候只使用`NativeMethods`类是可以的（这至少会摆脱你看到的警告）：

```
internal static class NativeMethods    
{        
    [DllImport("kernel32.dll")]
    internal static extern bool RemoveDirectory(string name);   
} 
```

[这里](https://stackoverflow.com/questions/4511418/how-to-know-if-native-method-is-safe-unsafe)有一些关于这个的讨论，上面链接的文章就何时使用这 3 个类中的每一个给出了一些建议：

**本机方法**

> 由于不应使用**SuppressUnmanagedCodeSecurityAttribute标记****NativeMethods**类，因此放入其中的 P/Invokes 将需要**UnmanagedCode**权限。因为大多数应用程序从本地计算机运行并以完全信任的方式一起运行，所以这通常不是问题。但是，如果您正在开发可重用库，则应考虑定义**SafeNativeMethods**或**UnsafeNativeMethods**类。

 ********安全原生方法**

> 可以安全地向任何应用程序公开并且没有任何副作用的 P/Invoke 方法应该放在名为**SafeNativeMethods**的类中。您不必要求权限，也不必太注意它们的调用位置。

**不安全的原生方法**

> 不能安全调用且可能导致副作用的 P/Invoke 方法应放在名为**UnsafeNativeMethods**的类中。应严格检查这些方法，以确保它们不会无意中暴露给用户。规则[CA2118: Review SuppressUnmanagedCodeSecurityAttribute usage](https://msdn.microsoft.com/en-us/library/ms182311.aspx)可以帮助解决这个问题。或者，这些方法在使用它们时应该有另一个需要的权限，而不是**UnmanagedCode 。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T18:24:40.393

哦！

我找到了答案

[https://msdn.microsoft.com/library/ms182161.aspx](https://msdn.microsoft.com/library/ms182161.aspx)

```
using System;
using System.Runtime.InteropServices;

    namespace DesignLibrary
    {
    // Violates rule: MovePInvokesToNativeMethodsClass.
        internal class UnmanagedApi
        {
            [DllImport("kernel32.dll")]
            internal static extern bool RemoveDirectory(string name);
        }
    } 
```******

# asp.net - asp login - 如果身份验证成功，则打开一个新窗口

> ID：13590457
> 
> 赞同：1
> 
> 时间：2012-11-27T18:13:33.493
> 
> 标签：asp.net, html, forms, forms-authentication

如果用户登录的身份验证成功，我需要打开一个新窗口。有没有一种简单的方法可以使用类似 target="_blank" 在新窗口中打开 DestinationPageUrl ？下面是我的代码：

```
<body>
    <form id="form1" runat="server">
    <div>
       <br />
        <asp:LoginView ID="LoginView1" runat="server">
            <AnonymousTemplate>
                <asp:Login ID="Login1" runat="server" DestinationPageUrl="~/Public/Index.aspx" OnAuthenticate="Login1_Authenticate">
                </asp:Login>
            </AnonymousTemplate>
            <LoggedInTemplate>
                Welcome User
            </LoggedInTemplate>
        </asp:LoginView>
        <br />        
    </div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:51:41.187

我会用两个控件对页面进行编码，一个用于登录。登录成功后，隐藏登录并显示您的表单。无需重定向。

# javascript - 如何记录函数（不是构造函数）返回的类型及其方法

> ID：13590459
> 
> 赞同：0
> 
> 时间：2012-11-27T18:13:48.460
> 
> 标签：javascript, documentation-generation, google-closure-compiler, jsdoc

我正在使用[JsDoc3](https://github.com/jsdoc3/jsdoc)和[Closure Compiler](https://developers.google.com/closure/compiler/)。我使用了一个[JsDoc 模板，它](https://github.com/jsdoc3/jsdoc/tree/master/templates/haruki)为我输出 JSON，以便使用自定义脚本从中生成 HTML。

我有一个返回自定义类的函数（但我没有也不需要构造函数），并且我希望能够记录它（函数）以及返回对象中存在的函数。

```
myLib.defer = function() {

    return {
        'then':    function() {},
        'resolve': function() {},
        'reject':  function() {},
        'notify':  function() {},
        'promise': function() {}
    };

}; 
```

**我该如何记录？**我没有构造函数，**也不需要构造函数。**我不太关心记录“类”（**我不需要一个**，此外，返回的对象记录在`@return`这个函数中），***我唯一需要的是记录存在于返回了 object***，所以它们最终会出现在 JsDoc 的 JSON 输出中供我抓取。

另外，我使用的是 Closure Compiler 的`AVANCED_OPTIMIZATIONS`模式，所以如果任何变通方法的副作用（例如无用的代码）会被抑制，这是一个很好的变通方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:11:42.457

不幸的是，没有办法做到这一点看起来不尴尬，但这是可行的。

首先，正如乍得[提到](https://stackoverflow.com/a/13593577/124119)的，可以记录一个没有带有[接口](https://developers.google.com/closure/compiler/docs/js-for-compiler#tag-interface)的构造函数的类。它看起来像这样：

```
/**
 * Description of the Deferred interface.
 * @interface Deferred
 */
function Deferred() {} 
```

并且可以像这样记录它的方法（例如）：

```
/**
 * Returns a Promise
 * @function Deferred.promise
 * @return {Promise} A Promise.
 */
Deferred.prototype.promise = function() {}; 
```

然后，在返回无构造函数类的函数上，像这样注释返回：

```
myLib.defer = function() {

    /** @type {Deferred} */
    return {
        'then':    function() {},
        'resolve': function() {},
        'reject':  function() {},
        'notify':  function() {},
        'promise': function() {}
    };

}; 
```

但是，这只会通过 Closure Compiler；它不会被[JsDoc3 JSON 导出模板](https://github.com/jsdoc3/jsdoc/tree/master/templates/haruki)（也可能是常规模板）正确转换，所以我们需要这个[`@class`注释](http://usejsdoc.org/tags-class.html)（CC 忽略）：

```
/**
 * Description of the Deferred interface.
 * @interface Deferred
 * @class Deferred
 */
function Deferred() {} 
```

有了所有这些，我们的文档将正确生成，并且我们的代码将编译为与之前相同的 - 所有样板在编译时都作为死代码被删除。

**更新：**正如乍得提到的，如果您尝试直接实例化非接口，您不会收到警告，这可能很糟糕，您可能不喜欢这样（如果实例化，接口*会*抛出错误）。

解决此问题的一种方法是将接口构造函数`@private`设置为`@const`对象文字，如他[对该问题](https://stackoverflow.com/questions/13187909/how-to-have-a-type-in-closure-compiler-externs-without-a-constructor)[的回答](https://stackoverflow.com/a/13196539/124119)中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:40:06.810

重复的问题。请参阅[如何在 JavaScript 中记录返回](https://stackoverflow.com/questions/11117294/how-to-document-return-in-javascript/11119116)。

在这种情况下，由于它看起来像一个库，您可能需要声明和使用一个接口。有关示例，请参阅[jQuery externs](https://code.google.com/p/closure-compiler/source/browse/trunk/contrib/externs/jquery-1.8.js#1735)。

# php - 拆分数组

> ID：13590463
> 
> 赞同：0
> 
> 时间：2012-11-27T18:14:06.410
> 
> 标签：php, arrays

我有一个对象数组。

我需要将`[name]`每个对象放入另一个数组中，但我不想重复。

我该怎么做？

```
Array (
    [0] => ADOFetchObj Object
        (
            [name] => Team 1
            [att] => None
            [idGrupo] => 1
            [idModulo] => 4
            [ler] => 1
            [escrever] => 1
            [excluir] => 1
        )

    [1] => ADOFetchObj Object
        (
            [name] => Team 1
            [nomeModulo] => Aplicar Juros
            [idGrupo] => 1
            [idModulo] => 1006
            [ler] => 1
            [escrever] => 1
            [excluir] => 1
        )

    [2] => ADOFetchObj Object
        (
            [name] => Team 2
            [att] => None
            [idGrupo] => 1
            [idModulo] => 10
            [ler] => 1
            [escrever] => 1
            [excluir] => 1
        )

    [3] => ADOFetchObj Object
        (
            [name] => Team 2
            [att] => None
            [idGrupo] => 1
            [idModulo] => 1012
            [ler] => 1
            [escrever] => 1
            [excluir] => 1
        )
) 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T18:17:54.320

你可以这样做：

```
$names = array();
foreach($arr as $list) {
    $names[$list->name] = true; // can be *any* arbitrary value
}
$names = array_keys($names); 
```

这将起作用，因为根据定义，数组键必须是唯一的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T18:17:08.517

```
array_unique(array_map(function($element) {
    return $element->name;
}, $my_array)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T18:17:10.067

给你

```
$res = array();

foreach($arr as $var)
{
    if(!in_array($var->name, $res))
    {
      $res[] = $var->name;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T18:16:51.223

首先，将名称复制到一个新数组中：

```
$arrNames = array();

foreach($arrOriginal as $objObject) {
    array_push(
        $arrNames,
        $objObject->name
    );
} 
```

然后删除重复的名称：

```
$arrNames = array_unique($arrNames); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T18:28:04.010

```
$n = array();

foreach($array as $d) $n[] = $d->name;

$n = array_unique($n); 
```

# java - 如何从 CVS 中删除文件？

> ID：13590464
> 
> 赞同：2
> 
> 时间：2012-11-27T18:14:07.253
> 
> 标签：java, intellij-idea, project, cvs, delete-file

我是一名长期的代码开发人员，但对 IntelliJ Idea 来说相对较新。

在一个 Web 服务项目中，我删除了一个 CSS 文件，并立即被提示从 CVS 中删除该文件。我回答“否”，直到我可以从我的网络源文件中提取出旧的 css。后来我从版本控制中处理了一个“更新项目...”以合并我完成的更改，并且从 CVS 存储库中恢复了删除的 CSS 文件。

我知道有通过命令行从 CVS 中删除文件的手动方法，但我想知道在最初的“从 CVS 中删除？”之后是否有更快的方法通过 IntelliJ Idea 中的 CVS 插件来执行此操作？对话框已被跳过。

背景资料：

*   IDE：IntelliJ Idea 8.1.4
*   语言：Java 1.6
*   操作系统：Windows XP SP3
*   源代码控制：CVS

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:24:21.647

如果您执行“提交更改”，删除的文件将从 CVS 中删除。如果我记得屏幕下方有一个版本控制视图，您可以在其中看到您的更改。对不起，我很久以前才用过Idea，但我希望你能找到它......

# c# - 早上 7 点到 11 点之间时间的随机时间生成器

> ID：13590465
> 
> 赞同：9
> 
> 时间：2012-11-27T18:14:21.933
> 
> 标签：c#, winforms, random-time-generation

我正在创建一个测试文件，我需要用早上 7 点到 11 点之间的随机时间填充它。重复条目是可以的，只要它们不完全相同

我也只对 HH:MM 感兴趣（没有秒数）

我不知道从哪里开始。我在发帖前做了谷歌，发现了一个有趣的搜索结果

```
www.random.org/clock-times/ 
```

唯一的问题是所有“随机”生成的时间都是按顺序排列的。我可以把它打乱一次，但我需要生成 100 到 10,000 个条目。

我希望创建一个 WinForm C# 应用程序来帮助我做到这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T18:20:10.387

计算开始和停止时间之间的分钟数，然后生成一个介于 0 和最大分钟数之间的随机数：

```
Random random = new Random();
TimeSpan start = TimeSpan.FromHours(7);
TimeSpan end = TimeSpan.FromHours(11);
int maxMinutes = (int)((end - start).TotalMinutes);

for (int i = 0; i < 100; ++i) {
   int minutes = random.Next(maxMinutes);
   TimeSpan t = start.Add(TimeSpan.FromMinutes(minutes));
   // Do something with t...
} 
```

笔记：

*   您应该只创建一个随机对象，否则您将连续获得许多重复对象。
*   开始时间包括在内，但结束时间不包括在内。如果您还想包括结束时间，请将 1 添加到 maxMinutes。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-27T18:18:34.117

`DateTime`为下限创建一个值，以及一个随机生成器：

```
DateTime start = DateTime.Today.AddHours(7);
Random rnd = new Random(); 
```

现在您可以通过添加分钟来创建随机时间：

```
DateTime value = start.AddMinutes(rnd.Next(241)); 
```

要将其格式化为 HH:MM，您可以使用自定义格式：

```
string time = value.ToString("HH:mm"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T18:19:01.867

这是一种通用方法，可在给定的开始日期和结束日期之间为您提供随机日期。

```
public static DateTime RandomDate(Random generator, DateTime rangeStart, DateTime rangeEnd)
{
    TimeSpan span = rangeEnd - rangeStart;

    int randomMinutes = generator.Next(0, (int)span.TotalMinutes);
    return rangeStart + TimeSpan.FromMinutes(randomMinutes);
} 
```

如果你经常使用这样的东西，你可以让它成为`Random`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T18:18:13.453

创建一个`Random`对象并使用它来创建一个新的`DateTime`

```
Random rand = new Random();
//Note that Random.Next(int, int) is inclusive lower bound, exclusive upper bound
DateTime myDateTime = new DateTime(2012, 11, 27, 
    rand.Next(7, 11), rand.Next(0, 60), 0); 
```

然后在你想要的地方使用时间输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T18:23:19.693

```
List<DateTime> randomTimes = new List<DateTime>();
Random r = new Random();
DateTime d = new DateTime(2012, 11, 27, 7, 0, 0);

for (int i = 0; i < 100; i++)
{
    TimeSpan t = TimeSpan.FromSeconds(r.Next(0, 14400));
    randomTimes.Add(d.Add(t));
}

randomTimes.Sort(); 
```

该数字`14400`是早上 7 点到 11 点之间的秒数，用作随机数生成的基础。

该`randomTimes`列表可以与 DateTime 格式一起使用以实现所需的输出格式，例如：

```
Console.WriteLine("HH:mm", randomTimes[0]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T18:23:34.157

```
var random = new Random();
var startDateTime = new DateTime(2000, 1, 1, 7, 0, 0, 0);
var maxDuration = TimeSpan.FromHours(4);

var values = Enumerable.Range(0, 100)
    .Select(x => {
        var duration = random.Next(0, (int)maxDuration.TotalMinutes);
        return startDateTime.AddMinutes(duration).ToString("HH:mm");
    })
    .ToList();

values = values.Distinct().ToList();

Console.WriteLine("{0} values found. Min: {1}, Max: {2}", values.Count, values.Min(), values.Max()); 
```

把我的帽子扔进戒指:)

编辑：看到这么多答案有点尴尬，因为这是一个简单的问题。无论如何，很高兴看到不同的风格。阅读这个问题，我很惊讶地看到 OP 要求创建 Win Forms 应用程序来执行此操作。任务看起来很简单，我想在 LinqPad 中编写解决方案！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-27T18:29:15.323

一个简单的选项（随机选择小时和分钟`ints`）：

```
Random r = new Random();

//pick the hour
int h = r.Next(7,12);

//pick the minute
int m = 0;
if(h < 11)
    m = r.Next(0,60);

//compose the DateTime
DateTime randomDT = new DateTime(year, month, day, h, m, 0); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-27T18:30:45.637

像这样的东西：

```
private static Random rng = new Random();
public IEnumerable<DateTime> RandomDateTimes( DateTime lowerBound , DateTime upperBound , int count )
{
    TimeSpan period = upperBound - lowerBound ;

    if ( period <= TimeSpan.Zero || period > new TimeSpan(1,0,0,0) ) throw new ArgumentException();
    if ( count < 0 ) throw new ArgumentException() ;

    int rangeInMinutes = (int) period.TotalMinutes ; // period is 0 through 1440

    for ( int i = 0 ; i < count ; ++i )
    {
        int offset = rng.Next(rangeInMinutes) ;
        yield return lowerBound.AddMinutes(offset) ;
    }
}
public IEnumerable<DateTime> OrderedRandomDateTimes( DateTime lowerbound , DateTime upperBound , int count )
{
    yield return RandomDateTimes( lowerbound , upperBound , count ).OrderBy( x = x ) ;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-27T18:46:11.607

也许我错过了一些东西，但它不是这么简单吗......

```
Random rand = new Random();

// Range can be any number from 100 to 10000
Enumerable.Range(1, 10000).Select(v => TimeSpan.FromMinutes(rand.Next(420, 661))) 
```

如果你想让它更容易理解数字，你可以扩展它......

```
Random rand = new Random();
int startTime = Convert.ToInt32(TimeSpan.FromHours(7).TotalMinutes);
int endTime = Convert.ToInt32(TimeSpan.FromHours(11).TotalMinutes) + 1;     // To make 11:00 inclusive

Enumerable.Range(1, 10000).Select(v => TimeSpan.FromMinutes(rand.Next(startTime, endTime))).Dump(); 
```

# php - 在 PHP 中为 SQL 查询转换 URL 中的 UTF-8 字符

> ID：13590467
> 
> 赞同：0
> 
> 时间：2012-11-27T18:14:28.517
> 
> 标签：php, wordpress, utf-8

我在 Wordpress 博客上运行 SQL 查询以获取帖子的 json 提要。这是我的代码： http: [//pastebin.com/jvaM9ySr](http://pastebin.com/jvaM9ySr)

它工作正常，但一些帖子网址正在通过我认为是 UTF-8 特殊字符，如

```
ranking-of-the-country%e2%80%99s-101-best-desserts 
```

我猜是一个博客编辑贴了一个花哨的撇号。

其他示例在 url 中间有 %e2%84%a2 用于商标符号，甚至 %cf%83 用于希腊 sigma 字母。

我想将这些转换为显示 json 提要中的实际特殊字符。

我正在使用它来[匹配 Google Analytics API 中的 url，](https://stackoverflow.com/questions/13575576/join-two-associative-arrays-with-php)并且相应的 Analytics url 包含特殊字符本身，而不是如下代码：

```
 ranking-of-the-country’s-101-best-desserts 
```

因此，由于这个特殊字符问题，这几个案例不匹配。

我尝试在 pastebin 中的代码的各个位置使用 utf8_encode 和 utf8_decode ，但没​​有成功。

有人有想法么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:23:28.850

所有你需要的是

```
$text = "ranking-of-the-country%e2%80%99s-101-best-desserts";
echo 'TRANSLIT : ', iconv("UTF-8", "ISO-8859-1//TRANSLIT", $text), PHP_EOL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:24:26.223

我在另一种编程语言中遇到过和你类似的问题。

这不是`utf8 encode`但是`url encode`。

尝试使用：

```
urlencode(string) 
```

和

```
urldecode(string) 
```

在 2 种情况下（使用`%char`正确的 utf char 解码所有更改）。

在这里您可以找到更多信息和示例： http: [//php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

**更新**：对于您的代码：我尚未测试，但是当您在此处存储响应值时，您必须或解码 url

```
 while($r = mysql_fetch_assoc($sth)) {
    if $r is a url
    $rows = decode($r);
    else
    $rows[] = $r;   
    } 
```

或区分代码末尾的打印（类似于之前的代码）：为数组中的每个变量进行适当的打印（当您“捕获”“url”时进行解码），在这里：

```
print strip_tags(json_encode($rows)); 
```

# javascript - 无法删除跨度输入框

> ID：13590469
> 
> 赞同：0
> 
> 时间：2012-11-27T18:14:39.420
> 
> 标签：javascript, html

嗨，我真的是 Javascript 的新手...当用户选择选项时，我正在尝试构建输入文本框列表。但是，当用户更改选项时，输入文本框会在之前的输入文本框旁边创建。因此，如果用户不断更改选项，可能会有 100 个输入框。我希望我的程序删除 span 中的所有内容并生成输入文本框列表。请给我任何建议！

```
function myInputs() {

        alert('writing inputs'); 
        var value = document.getElementById("name").value; 
        var split = value.split(",");
        var size = split.length;
        var out = document.getElementById("inputBox");
        $(this).parent('display').remove(); //doesn't delete any...
        for (var j=0; j<size; j++){
            if (split[j] != ""){
            var element = document.createElement("input");
            //Assign different attributes to the element.
            element.setAttribute("type", "text");
            element.setAttribute("value", split[j]);
            element.setAttribute("name", split[j]);
            out.appendChild(element);}
      }
};

//html
<table border="0">
<tr>
        <td>Select run : </td>
        <td><select id="name" name="name" onchange="myInputs()">
             <option value="time" name="timer">timer</option>
             <option value="date,time" name="Performance">Performance</option>
             <option value="location,time" name="Copy">Copy</option>
             </select>
        </td>
 </tr>
 </table>
 <div id="display"><span id = "inputBox"></span></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:23:34.637

因为页面上有 jQuery 代码，所以我使用了 jQuery。下面是更正后的 jsFiddle

缓存选择器以提高速度

```
var $select = $('#name');
var $input = $('#inputBox'); 
```

我曾经做过点​​击处理程序

```
$select.on("change",function(event){

    $input.empty();

    var value = $select.val().split(",");
    var size = value.length;

    for (var j=0; j<size; j++){
        if (value[j] != ""){
            var element = document.createElement("input");
            element.setAttribute("type", "text");
            element.setAttribute("value", value[j]);
            element.setAttribute("name", value[j]);
            $input.append(element);

            // could also do this but it is slower
            // var $element = $('<input/>',{
            //     type: "text",
            //     name: value[j],
            //     value: value[j]
            // });
            //$input.append($element);
        }
    }                
}); 
```

我还使用了 jQuery 值函数

```
$select.val(); 
```

您不想删除显示，因为 inputBox 被删除并且您无法再访问它。所以我只是在输入框上使用了empty。

```
$input.empty(); 
```

所有这一切也都准备好了，包装在文档中，有两种语法，我使用 $(function(){})，但这取决于你。您必须使用准备好的文档，以便您的元素在 DOM 中进行查询

让我知道这是否有帮助。

[http://jsfiddle.net/UR4H8/](http://jsfiddle.net/UR4H8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:23:01.143

您的选择器看起来不正确，请尝试：

```
$('#display input').remove(); // remove all input's under #display 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T18:23:12.257

您可以使用 删除每个孩子`empty()`。只需在`span`使用 jQuery选择后调用它

```
var out = $("#inputBox");
out.empty(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T18:25:20.407

使用 vanilla JavaScript，您可以`removeChild()`在添加新元素之前简单地添加。

与 JQuery 一起使用该`html()`方法，该方法替换现有内容而不是附加它。

# scala - 递归在scala中创建字符串的所有旋转

> ID：13590471
> 
> 赞同：2
> 
> 时间：2012-11-27T18:14:47.753
> 
> 标签：scala, recursion, burrows-wheeler-transform

我一直在尝试在[wikipedia](http://en.wikipedia.org/wiki/Burrows-Wheeler_transform)上重新创建 Burrows-Wheeler 变换的示例。为了增加乐趣，我试图通过递归策略来做到这一点。但是，我陷入了第一步，创建了字符串的所有旋转。这是我的代码：

```
object SimpleBW extends App {

  val string = "^BANANA|"

  val list = tranformStringStart(string)
  list.foreach(println)

  def tranformStringStart(string: String): List[String] = { transformString(string, string.length) }

  def transformString(string: String, splitIndex: Int): List[String] = {
    if (splitIndex == 0) {
      // Recursion base case
      Nil
    } else {
      val (firstString, secondString) = string.splitAt(splitIndex)
      val newString = secondString + firstString
      newString :: transformString(secondString + firstString, splitIndex - 1)
    }
  }

} 
```

这会生成以下输出：

```
^BANANA|
|^BANANA
NA|^BANA
ANANA|^B
A|^BANAN
BANANA|^
NANA|^BA
ANA|^BAN 
```

这类似于维基百科的例子，但不完全相同，我似乎无法弄清楚为什么。根据示例，输出应如下所示：

```
^BANANA|
|^BANANA
A|^BANAN
NA|^BANA
ANA|^BAN
NANA|^BA
ANANA|^B
BANANA|^ 
```

我已经盯着这个有一段时间了，虽然问题应该是相当直接的，但我似乎无法弄清楚。你能看出我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T22:59:33.027

这是一个较短的函数，它不使用递归，但在计算中也是如此。

```
def transformString(s:String):List[String] = 
  for(i <- s.length until 0 by - 1 toList) yield s.drop(i)+ s.take(i) 
```

另一个：

```
def transformString(s:String):List[String] = s.inits.toList zip(s.tails.toSeq.reverse) map(z=> z._2+z._1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T18:20:22.943

当您将 splitIndex 一个字符移到前面时，您必须将其应用于原始字符串：

```
newString :: transformString(string, splitIndex - 1) 
```

另一种解决方案是删除拆分索引参数并始终拆分最后一个字符，但是您必须再次将其应用于转换后的字符串。

# c# - 类似于 R 中的 data.frames 的数据结构

> ID：13590478
> 
> 赞同：4
> 
> 时间：2012-11-27T18:15:18.553
> 
> 标签：c#, data-structures, datatable

我想在 C# 中有一个灵活的数据结构，它可以像 R 和 Python 中的数据框一样工作（或像 Excel 表）。

我能找到的最接近的是 C# 中的本机数据表。

是否有更好的表结构可以在不同的列中保存来自不同类型的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:59:07.967

您可以[`DataTable`](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)在 .NET 中使用。它将允许您定义一组类型化的列（参见[`Columns`属性](http://msdn.microsoft.com/en-us/library/system.data.datatable.columns.aspx)）以及添加行数（参见[`Rows`属性](http://msdn.microsoft.com/en-us/library/bb397696.aspx)）。

一旦你有了它，你可以通过以下方式轻松访问任何行：

*   [指数](http://msdn.microsoft.com/en-us/library/kwfe1t7z.aspx)
*   [列名](http://msdn.microsoft.com/en-us/library/146h6tk5.aspx)
*   [`DataColumn`代表列的实例](http://msdn.microsoft.com/en-us/library/5akhx035.aspx)

但是，请考虑以下事项：[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)匿名[类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)（来自 LINQ 中的查询的投影）或强类型可能同样好，如果不是更好（不需要字符串来获取列），具体取决于您的需要（如果您*需要*动态访问由用户输入决定，然后使用 a`DataTable`会更好）。

如果你只是想要一个值的交叉矩阵，匿名类型是一种获得强类型、编译时检查的值列表的简单方法，它比动态查找值有更多的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-29T01:26:20.163

蓝山资本的开源项目[Deedle可能值得一看：](https://github.com/BlueMountainCapital/Deedle)

> 易于使用的 .NET 库，用于数据和时间序列操作以及科学编程

它是在 F# 中实现的，但他们也致力于使其可以从 C# 访问。

然而，近几个月来，开发工作有点平静。

# sql-server - 为变量赋值的 SELECT 语句不能与数据检索结合使用吗？

> ID：13590480
> 
> 赞同：1
> 
> 时间：2012-11-27T18:15:28.893
> 
> 标签：sql-server, stored-procedures

错误：为变量赋值的 SELECT 语句不得与数据检索操作结合使用。我从下面的 MS SQL 存储过程子查询中得到错误。这是什么意思？以及如何解决这个问题？

```
declare @pool_ids varchar(20);
    select @pool_ids = Pool_ID from wcpacker.Fruit_Pools 
                                   where Pool_ID-@Pool_ID >= -2
                                     AND Pool_ID-@Pool_ID <>  0
                                     AND Pool_ID < @Pool_ID  
     union  select top 3 Pool_ID from wcpacker.Fruit_Pools
                                   where Pool_ID >= @Pool_ID) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:02:08.933

我认为您需要重新组织选择...做：

```
set @pool_ids = (select Pool_ID from .... ) 
```

那应该有效。

# signalr - 如何使用 SignalR 配置 ELMAH

> ID：13590481
> 
> 赞同：16
> 
> 时间：2012-11-27T18:15:29.443
> 
> 标签：signalr, elmah

我在我的 MVC4 应用程序中使用 SignalR 集线器。我添加了 ELMAH 来处理所有错误。问题是集线器中发生的错误没有记录在 ELMAH axd 中。有没有办法配置它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-26T04:55:59.317

您必须添加一个`HubPipelineModule`，并确保在您的 errorLog 元素中设置一个 ApplicationName ，否则 Elmah 将无法记录错误，因为它没有 HttpContext 或 AppName 来记录。

```
<errorLog type="Elmah.SqlErrorLog, Elmah" applicationName="MyAppName" connectionStringName="myConnString" /> 
```

[我使用](https://gist.github.com/andreabalducci/5641743)的HubPipelineModule 代码如下：

```
public class ElmahPipelineModule : HubPipelineModule
{
    private static bool RaiseErrorSignal(Exception e)
    {
        var context = HttpContext.Current;
        if (context == null)
            return false;
        var signal = ErrorSignal.FromContext(context);
        if (signal == null)
            return false;
        signal.Raise(e, context);
        return true;
    }

    private static void LogException(Exception e, IHubIncomingInvokerContext invokerContext)
    {
        var context = HttpContext.Current;
        ErrorLog el = ErrorLog.GetDefault(context);
        el.Log(new Error(e));
    }

    protected override void OnIncomingError(Exception ex, IHubIncomingInvokerContext context)
    {
        var exception = ex;
        if (ex is TargetInvocationException)
        {
            exception = ex.InnerException;
        }
        else if (ex is AggregateException)
        {
            exception = ex.InnerException;
        }

        if (!RaiseErrorSignal(exception))
            LogException(exception, context);
    }
} 
```

确保将模块添加到集线器管道：

```
GlobalHost.HubPipeline.AddModule(new ElmahPipelineModule()); 
```

**编辑**

*SignalR 2+*

我注意到我最近从事的一个项目中没有记录任何 SignalR 异常，并且发现在尝试从当前上下文中获取 ErrorSignal 时会引发 ArgumentNullException。以下方法正确处理此异常，以便再次记录 SignalR 错误。

```
private static bool RaiseErrorSignal(Exception e)
{
    var context = HttpContext.Current;
    if (context == null)
        return false;

    try
    {
        var signal = ErrorSignal.FromCurrentContext();
        if (signal == null)
            return false;
        signal.Raise(e, context);
        return true;
    }
    catch (ArgumentNullException)
    {
        return false;
    }
} 
```

# sql - 查询和子查询 SQL DML

> ID：13590482
> 
> 赞同：0
> 
> 时间：2012-11-27T18:15:32.027
> 
> 标签：sql, oracle-sqldeveloper, dml

我试过这个查询：在这个国家工作的所有医生都工作的医院的名称是什么。但结果不是我所期望的，并且有语法错误。

我有这些表：

```
CREATE TABLE Hospital (
    hid INT PRIMARY KEY,
    name VARCHAR(127) UNIQUE,
    country VARCHAR(127),
    area INT
);
CREATE TABLE Doctor (
    ic INT PRIMARY KEY,
    name VARCHAR(127),
    date_of_birth INT,
);
CREATE TABLE Work (
    hid INT,
    ic INT,
    since INT,
    FOREIGN KEY (hid) REFERENCES Hospital (hid),
    FOREIGN KEY (ic) REFERENCES Doctor (ic),
    PRIMARY KEY (hid,ic)
); 
```

我试过这个：

```
SELECT DISTINCT H.name
FROM Hospital H, Doctor D, Work W
WHERE H.hid = W.hid 
AND   D.ic = W.ic 
AND NOT EXISTS (SELECT DISTINCT H2.name 
                FROM Hospital H2
                WHERE H2.country = H.country AND W.hid = H2.hid AND D.ic != W.ic) 
```

我当时的想法是在同一个国家寻找一家医院 H2，但医生 D 不工作。

谢谢。

# python - 用numpy计算数组的连续点之间的欧几里得距离

> ID：13590484
> 
> 赞同：6
> 
> 时间：2012-11-27T18:15:33.970
> 
> 标签：python, numpy, scipy, euclidean-distance

我有一个数组，它描述了一条折线（连接的直线段的有序列表），如下所示：

```
points = ((0,0),
          (1,2),
          (3,4),
          (6,5),
          (10,3),
          (15,4))
points = numpy.array(points, dtype=float) 
```

目前，我使用以下循环获取段距离列表：

```
segdists = []
for seg in xrange(points.shape[0]-1):
    seg = numpy.diff(points[seg:seg+2], axis=0)
    segdists.append(numpy.linalg.norm(seg)) 
```

相反，我想使用一些本机 Scipy/Numpy 函数应用一个没有循环的函数调用。

我能得到的最接近的是：

```
from scipy.spatial.distance import pdist
segdists = pdist(points, metric='euclidean') 
```

但在后一种情况下，segdists 提供了每一个距离，我只想获得相邻行之间的距离。

另外，我宁愿避免创建自定义函数（因为我已经有了一个可行的解决方案），而是使用更多“numpythonic”使用本机函数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T20:11:42.480

这是一种方法：

使用矢量化[`np.diff`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.diff.html)来计算增量：

```
d = np.diff(points, axis=0) 
```

然后用于[`np.hypot`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.hypot.html)计算长度：

```
segdists = np.hypot(d[:,0], d[:,1]) 
```

或者使用更明确的计算：

```
segdists = np.sqrt((d ** 2).sum(axis=1)) 
```

# django - 将unicode字符串传递给django模板中的templatetag会导致错误

> ID：13590486
> 
> 赞同：0
> 
> 时间：2012-11-27T18:15:49.610
> 
> 标签：django, django-templates

我使用夹层来构建我的网站。在模板中我使用模板标签。当我像“categorytofilter”这样传递给这个模板标签词时，没关系，但是当我尝试传递unicode字符串时：

```
{% blog_recent_posts limit=6 category='Статьи' as recent_posts %} 
```

我看到了错误：

```
'ascii' codec can't encode characters in position 10-15: ordinal not in range(128) 
```

我该如何解决？蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:24:45.740

似乎您将类别传递为 ascii，而不是 unicode。

尝试

```
{% blog_recent_posts limit=6 category=u'Статьи' as recent_posts %} 
```

如果您正在对类别进行硬编码，否则，请在传递给模板之前在您的视图中指定/转换它。

# ruby-on-rails - 让 PostgreSQL 在 OSX 10.8.2 上运行（与 OS X 版本的 PostgreSQL 冲突）

> ID：13590487
> 
> 赞同：0
> 
> 时间：2012-11-27T18:15:56.550
> 
> 标签：ruby-on-rails, macos, postgresql, unix

> **可能重复：**
> [Unix 域套接字“/var/pgsql_socket/.s.PGSQL.5432”上的 PostgreSQL 权限被拒绝错误 - Lion Server 10.7.3 或 Lion Server 10.7.4](https://stackoverflow.com/questions/11377416/postgresql-permission-denied-error-on-unix-domain-socket-var-pgsql-socket-s-p)

我正在尝试自学 Rails，并希望能够部署到 Heroku。Heroku 希望我使用 PostgreSQL，所以我尝试使用自制软件安装它。

现在，当我尝试与数据库交互时，它告诉我：

```
psql: could not connect to server: No such file or directory
      Is the server running locally and accepting
      connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

这让我想到了这个[问题/答案](https://dba.stackexchange.com/questions/21587/postgresql-is-running-locally-but-i-cannot-connect-why)。我试图遵循 wolftron 的解决方案，但是当我到达最后一步时：

> 然后使用 /usr/local/bin 中的 pg_ctl 二进制文件成功启动正确的 postgres 服务器（这是 $PATH 的来源——确保哪个 pg_ctl 解析为 /usr/local/bin/pg_ctl，或者总是显式调用它） .

我遇到了另一个有趣的问题：

```
localhost: which pg_ctl
pg_ctl not found 
```

所以现在我尝试追踪 pg_ctl：

```
sudo find / -name pg_ctl
find: /dev/fd/3: Not a directory
find: /dev/fd/4: Not a directory
/usr/local/bin/archive/pg_ctl 
```

所以 pg_ctl 在 /usr/local/bin/archive/? 为什么会在那里？我搞砸了自制软件安装吗？在这一点上，我开始尝试考虑如何将它移动到 /usr/local/bin，但它开始感觉我正在进入一个兔子洞。

任何想法如何解决这一问题？我即将擦除 OSX 并进行全新安装，但恐怕我会再次遇到同样的问题......

# facebook - facebook fql 查询在 page_fan 上返回 null

> ID：13590489
> 
> 赞同：0
> 
> 时间：2012-11-27T18:16:03.820
> 
> 标签：facebook, facebook-like, facebook-fql, facebook-php-sdk

我在 facebook 上有一个应用程序请求 user_likes 权限，然后检查用户是否喜欢 facebook 上的特定页面。它适用于 80% 的用户，但对其余用户有问题：

运行此 fql 查询时：

```
"SELECT uid FROM page_fan WHERE page_id='XXXXXXXXXXXXXXX' and uid = me()" 
```

响应为空。这些用户已授予该应用程序的所有必要权限。可能是什么情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:18:56.977

这是由于隐私设置。有些人不使用“公共”之类的设置，仅此而已。经测试。

# android - Android 背景颜色 XML 布局

> ID：13590495
> 
> 赞同：4
> 
> 时间：2012-11-27T18:16:45.097
> 
> 标签：android, android-layout, background-color, transparent

我有一个`dialog`在不同布局上弹出的布局。`Dialog`布局颜色列为透明。

将背景颜色设置为透明与根本不设置背景颜色有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:34:47.627

以及透明的背景：- 它是透明的。非彩色背景/对话框：- 对话框将自动获取电话主题并显示它。如果它在 HC 及以上，它将显示蓝色，如果它较少，它将显示关于 android 版本的默认主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:19:58.927

我可以告诉两个简单的点

1.  将 background 设置为 transparent ，背景将是透明的，顾名思义。

2.  不设置任何背景，默认情况下它会采用一种黑色的背景颜色。

# php - 显示 x 小时的警报

> ID：13590500
> 
> 赞同：1
> 
> 时间：2012-11-27T18:17:03.397
> 
> 标签：php, javascript

我在 PHP 中有一个警报脚本，它用某种紧急文本向应用程序发出警报。现在我需要以某种方式添加一些代码，允许管理员将警报设置为定时警报。目前他们可以设置警报，然后发送另一个请求来删除警报。

下面的代码已被更改以反映我当前使用的内容，我大部分都在工作，除了时间到期后的删除，也就是 goto a; 常规。

```
$filename = "alertCheck.php";
 $timedalertsingle = $_POST['timedalertsingle'];
 $timedalerthours = $_POST['timedalertchoice'];
 $timestamp = time(); 
 $timedalertseconds = $timedalerthours * 3600;

 // Testing the variables
 echo $timedalertsingle."<br />";
 echo $timedalerthours."<br />";
 echo $timestamp."<br />";
 echo $timedalertseconds."<br />";
 echo ($timestamp + $timedalertseconds)."<br />";

// write the file
$fp = fopen ($filename, "w"); 
if ($fp) {
    fwrite ($fp, $timedalertsingle);
    fclose ($fp);
    echo ("<span style='color: #6FF;'>File written:</span> " . " This alert will last for " .$timedalerthours . " Hour(s)" . "<br />");
    echo date('m-d-y') ."<br />";
}
else {
    echo ("File was not written");
}

// test the time
a:
if (time() > ($timestamp + $timedalertseconds)){ 

    // overwrite the file 
    fwrite ($fp);
    fclose ($fp);
    echo ("<span style='color: #6FF;'>There are no alerts.</span> ");
}
else {
    goto a;
} 
```

我的输入（更改以反映新的变量名称：

```
<form action="processtime.php" method="post" name="timedalert">
<strong>Post a Timed Alert: &nbsp;&nbsp;</strong><input name="timedalertsingle" size="60" type="text" /><br />
<strong>How many hours this alert will be displayed: </strong>
<select name="timedalertchoice" />
  <option value=".0833">5 Minutes</option>
  <option selected="selected" value="1">1 hour</option>
  <option value="2">2 hours</option>
  <option value="4">4 hours</option>
  <option value="6">6 hours</option>
  <option value="8">8 hours</option>
  <option value="12">12 hours</option>
  <option value="18">18 hours</option>
  <option value="24">24 hours</option>
</select>
 &nbsp;&nbsp;&nbsp;&nbsp;<input name="submit" type="submit" value="submit" /><br />
</form> 
```

所以这是我的 processtime.php 页面运行后的样子：

树木倒下 93 号楼的一半在 Cuppertino
24
1354217471
86400
1354303871
文件写入：此警报将持续 24 小时
11-29-12

问题是它不会在给定时间后停止警报。帮助！TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:31:35.643

保存警报后，设置“过期”字段（停止显示的日期/时间）。当页面加载如果过期 > 现在，显示警报。

您不能将 PHP 代码放入 Javascript 中。PHP 在服务器上执行，客户端 Javascript 只看到 PHP 代码的 RESULT。您不能让 JS 代码执行 PHP 代码，除非向服务器发送一个新的 http 请求（页面重新加载或 ajax 请求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:12:30.780

```
class RadamsAlert {
const ALERT_FILE = 'alerts.dat';

function addAlert($alertMessage, $expirationTime){
    $alert = array('alert' => $alertMessage, 'expiration' => $expirationTime);
    $alerts = $this->readAlerts();
    $alerts[] = $alert;
    $this->writeAlerts($alerts);
}

function readAlerts(){
    $alerts = array();
    if(file_exists(self::ALERT_FILE)){
        $contents = file_get_contents(self::ALERT_FILE);
        $readAlerts = unserialize($contents);
        if(count($readAlerts) > 0){
            foreach($readAlerts as $alert){
                if($alert['expiration'] > time()){
                    $alerts[] = $alert;
                }
            }
        }
    }
    return $alerts;
}

function writeAlerts(array $alerts){
    file_put_contents(self::ALERT_FILE, serialize($alerts));
}

}

$timedalertsingle = isset($_POST['timedalertsingle']) ? $_POST['timedalertsingle'] : false;
$timedalertseconds = isset($_POST['timedalertchoice']) ?    (int)$_POST['timedalertchoice'] : 0;
$timestamp = time();

if($timedalertsingle !== false && $timedalertseconds > 0){
$radAlert = new RadamsAlert();
$radAlert->addAlert($timedalertsingle, $timedalertseconds + $timestamp);
}

header('Location: sec.html');
exit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:28:03.510

如果您希望在特定时间段后运行“警报”，请说现在 2 小时。我想您必须从用户那里获取一个输入字段作为日期/时间，要求他指定警报的开始时间

然后每 2-5 分钟运行一次 Cron 脚本并执行所需的操作

# python - Python中的加权概率

> ID：13590505
> 
> 赞同：-2
> 
> 时间：2012-11-27T18:17:25.643
> 
> 标签：python, python-3.x, probability

我正在尝试在 Python 中模拟一个游戏，考虑到这些概率，我该如何对其进行编程，以便它给我一个列表，列出每个人从总共 10 场游戏中获胜的次数？

A 获胜的概率是 0.416667 B 获胜的概率是 0.583333

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:27:14.237

这样的事情应该这样做：

```
for x in range(0, 9):
    if expression(random.uniform(0.0, 1.0) < 0.416667):
        print "A wins"
    else:
        print "B wins" 
```

如果它必须非常精确，这不是一个好主意，因为边界没有正确处理。

# jquery - 模态窗口为空

> ID：13590506
> 
> 赞同：1
> 
> 时间：2012-11-27T18:17:31.260
> 
> 标签：jquery, google-chrome, simplemodal

如果我在调试器中尝试一些简单的东西

```
a=$.modal("<div><h1>SimpleModal</h1></div>"); 
```

对于我加载 jquery 1.8.3 和 simplemodal 1.4.3（最新）和正确 css 的页面，我有一个弹出的模式窗口，但它不包含任何内容。在 Chrome 中是这种情况，但在 Firefox 中则不然。不知道为什么...

# ruby-on-rails - RABL的JSON输出不符合标准吗？它可以？

> ID：13590508
> 
> 赞同：0
> 
> 时间：2012-11-27T18:17:37.953
> 
> 标签：ruby-on-rails, json, rabl

所以我有一个非常简单的 rabl 视图，它将支持 xml 和 json (curr.rabl) 的输出：

```
collection @currencies => "currencies"

attributes :code, :name 
```

我的 rabl 配置：

```
Rabl.configure do |config|
    config.include_json_root = false
    config.include_child_root = false
    config.xml_options = { :skip_types => true, :camelize => :lower }
    config.include_xml_root = false
end 
```

rabl 为 xml 和 json 提供的输出：

XML:

```
<currencies>
<currency>
<code>AFN</code>
<name>Afghan Afghani</name>
</currency>
<currency>
<code>AFA</code>
<name>Afghanistan Afghani</name>
</currency>
</currencies> 
```

JSON：

```
{
currencies: [
{
code: "AFN",
name: "Afghan Afghani"
},
{
code: "AFA",
name: "Afghanistan Afghani"
}]} 
```

对我来说，**这是不正确的**。根据我一直在阅读的内容，JSON 应该如下所示：

```
{
currencies: {currency: [
{
code: "AFN",
name: "Afghan Afghani"
},
{
code: "AFA",
name: "Afghanistan Afghani"
} ] }
} 
```

如果我设置`config.include_child_root(/include_json_root) = true`，那么我得到以下（仍然不正确）

```
{
currencies: [
{
currency: {
code: "AFN",
name: "Afghan Afghani"
}
},
{
currency: {
code: "AFA",
name: "Afghanistan Afghani"
} } ] } 
```

首先，我对 RABL 输出错误 json 的假设是否正确？其次，有没有办法让 RABL 为这个视图做我想要的，以及任何其他可能有许多嵌套子对象的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T03:30:43.733

需要明确的是，这绝对**不是标准**的：

```
{
currencies: {currency: [
{
code: "AFN",
name: "Afghan Afghani"
},
{
code: "AFA",
name: "Afghanistan Afghani"
} ] }
} 
```

RABL 产生的两种形式都是标准的。一无根，一有。上面这件事没有任何意义，我从未见过任何 API 那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:24:10.520

我总是使用上面的第二种形式：

```
{
   currencies: [
   {
      currency: {  ... },
   },
   { 
      currency: { ... }
   }]
} 
```

如果你真的想这样做：

```
{
   currencies: { currency: [ { ... }, { ... }] }
} 
```

我认为您可以将 include_json_root 设置为 false 并使用[自定义节点](https://github.com/nesquena/rabl#custom-nodes)，但它可能会变得复杂。

# vb.net - 如何通过 VB.NET 更改浏览器主页

> ID：13590512
> 
> 赞同：1
> 
> 时间：2012-11-27T18:18:06.567
> 
> 标签：vb.net, firefox, browser

我将此代码添加到 prefs.js 文件：

```
user_pref("browser.startup.homepage", "http://www.google.com/"); 
```

它不起作用。Firefox 打开通常的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:55:24.300

使用 JavaScript 将 BookMark it Link 添加到您的网站

function setHomepage() { //设置IE主页的条件 if (document.all) { document.body.style.behavior = 'url(#default#homepage)'; document.body.setHomePage('http://www.aspdotnet-suresh.com'); } //在Mozilla中设置主页的条件 else if (window.sidebar) { if (window.netscape) { try { netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"); } catch (e) { } } var prefs = Components.classes['@mozilla.org/preferences-service;1'].getService(Components.interfaces.nsIPrefBranch); prefs.setCharPref('browser.startup.homepage', 'http://www.google.com'); } }

# liferay - 如何在liferay中打印portlet的内容

> ID：13590514
> 
> 赞同：1
> 
> 时间：2012-11-27T18:18:13.247
> 
> 标签：liferay, portlet

我想要liferay portlet 的**打印**功能，这样如果我们单击打印图标，它将打印portlet 的内容，并且在打印portlet 的内容时还会显示一个新的弹出窗口。

当前显示该图标，但单击打印图标会显示一个空页面。谁能详细告诉我我们如何实现此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T07:14:11.073

当用户按下打印按钮时，您需要执行以下操作：

1- 在最大化模式下打开 portlet。

2-检查您的 Portlet 模式是否已最大化。

3-如果使用：`window.print();`

# xcode - 在 automator 中使用“Build Xcode Project.action”

> ID：13590515
> 
> 赞同：0
> 
> 时间：2012-11-27T18:18:19.217
> 
> 标签：xcode, bash, xcodebuild, automator

我成功地用`xcodebuild`bash 脚本构建了我的项目。我正在尝试将我的脚本移植到 automator 中，因此我正在尝试使用“Build Xcode Project.action”来受益

在 bash 脚本中，我移动到项目所在的文件夹并运行`xcodebuild`. 我怎样才能在automator中获得相同的结果？我想设置一个`projectFolder`在前面步骤中命名的变量并将其传递给构建操作。

我知道我可以将脚本的整个构建片段作为自动化的 shell 脚本操作，但这不是我想要的。

# c# - 变量名不明确的奇怪 C# 编译器问题

> ID：13590516
> 
> 赞同：12
> 
> 时间：2012-11-27T18:18:20.363
> 
> 标签：c#

让我们看下面的代码：

```
class Foo
{
   string bar;

   public void Method()
   {
      if (!String.IsNullOrEmpty(this.bar))
      {
         string bar = "Hello";
         Console.Write(bar);
      }
   }
} 
```

这将编译，一切都很好。但是，现在让我们删除`this.`前缀：

```
class Foo
{
   string bar;

   public void Method()
   {
      if (!String.IsNullOrEmpty(bar)) // <-- Removed "this."
      {
         string bar = "Hello";
         Console.Write(bar);
      }
   }
} 
```

在这种情况下，我得到一个编译器错误。我同意这是一个错误，但是让我感到困惑的是错误的位置。错误发生在线：

```
string bar = "Hello"; 
```

随着消息：

> 不能在此范围内声明名为“bar”的局部变量，因为它会给“bar”赋予不同的含义，而“bar”已在“父或当前”范围中用于表示其他内容

根据我对编译器的了解，声明`bar`被*提升*到`Method()`方法的顶部。但是，如果是这种情况，则该行：

```
if (!String.IsNullOrEmpty(bar)) 
```

应该被认为是模棱两可的，因为`bar`可能是对实例字段或尚未声明的局部变量的引用。

`this.`对我来说，删除可能会导致另一行的编译错误似乎很奇怪。换句话说，声明一个局部`bar`变量是完全有效的，*只要*之前在范围内没有进行过潜在的*模棱两可*的引用`bar`（注意，如果我注释掉，`if (!String.IsNullOrEmpty(bar))`那么错误就会消失）。

**这一切似乎都很迂腐，所以你的问题是什么？：**

我的问题是为什么编译器允许在范围内声明变量之前对变量进行模棱两可的引用，但随后将声明本身标记为*冗余*。`bar`对in的模棱两可的引用不应该`String.IsNullOrEmpty()`是错误的更精确位置吗？在我的示例中，它当然很容易发现，但是当我在野外遇到这个问题时，参考是向上的页面并且更难追踪。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T18:25:21.040

> 根据我对编译器的了解， bar 的声明被提升到 Method() 方法的顶部。

不，事实并非如此。

错误消息在这里非常精确：

> 不能在此范围内声明名为“bar”的局部变量，因为它会给“bar”赋予不同的含义，后者已在“父或当前”范围**中用于表示其他内容**。

被违反的 C# 规范部分是第 7.6.2.1 节（C# 4 和 5 规范）：

> **块中的不变含义**
> 对于在表达式或声明符中作为完整简单名称（没有类型参数列表）的给定标识符的每次出现，在立即封闭该出现的局部变量声明空间（第 3.3 节）内，每隔一次出现与表达式或声明符中的完整简单名称相同的标识符必须引用相同的实体。此规则确保名称的含义在给定块、switch 块、for-、foreach-或 using-statement 或匿名函数中始终相同。

在带注释的 C# 规范中，这有来自 Eric Lippert 的有用注释：

> 该规则的一个更微妙的理想结果是，进行涉及移动局部变量声明的重构变得更安全。任何会导致简单名称更改其语义的重构都将被编译器捕获。

但除此之外，在我看来，这只是为了清楚起见。即使第二个版本被允许，第一个更清晰的 IMO。编译器确保您不会编写病态不清楚的代码，当您可以很容易地修复它以明确您的意思时。

换句话说：你*真的*想写第二个版本吗？

尤其：

> 在我的示例中，它当然很容易发现，但是当我在野外遇到这个问题时，参考是向上的页面并且更难追踪。

...这使得允许它*更合理？*恰恰相反，我会说 - 您还应该将其视为强烈鼓励重构您的代码，以便单个方法不会“页面”长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:26:17.893

bar 的第二个定义没有拉到方法级别，它的作用域是 if 块。例如，这是完全有效的。

```
class Foo
{
    private string bar;

    public void Method()
    {
        if (!String.IsNullOrEmpty(bar)) // <-- No more this.
        {
            string bar1 = "Hello";
            Console.Write(bar);
        }

        if (!String.IsNullOrEmpty(bar)) // <-- No more this.
        {
            string bar1 = "Hello";
            Console.Write(bar);
        }
    }
} 
```

原因是`bar`不再模棱两可，在`bar`/的外部和内部范围之间有明确的名称区别 - 编译器不允许通过本地定义`bar1`覆盖外部范围。`bar`

# c - 内核模块：访问另一个模块头中定义的结构成员

> ID：13590517
> 
> 赞同：6
> 
> 时间：2012-11-27T18:18:23.267
> 
> 标签：c, linux-kernel, linux-device-driver

我正在尝试编写一个内核模块，但我坚持访问另一个模块头中定义的结构成员。我将尝试解释：

假设另一个模块是：

```
<kernel-src>/drivers/xxx/xxx.c|.h 
```

在 xxx.c 中有一些我在驱动程序中使用的导出函数。但是我想从 xxx.h 中定义的struct **s_xxx访问成员****m1**：

 **```
struct s_xxx {
    ...
    int m1;
}; 
```

接下来我在 /usr/include/linux/yyy.h 中有这个：

```
struct s_xxx;
struct s_yyy {
    ...
    struct s_xxx *p_xxx;
}; 
```

我是我的司机：

```
#include <linux/yyy.h> 
```

我成功地使用了**xxx**驱动程序中的导出符号。但是当然，如​​果我尝试从**s_xxx**访问成员，编译器会抱怨：

```
struct s_yyy *p_yyy;
...
m = p_yyy->p_xxx->m1; /* error */ 
```

在 /usr/include/linux/ 中找不到 xxx.h。到目前为止，我找到了 2 个解决方法：

1) 下载内核源代码并在我的模块中包含 xxx.h 的完整路径

2) 将 s_xxx 定义从 xxx.h 复制/粘贴到我的模块

这样做的正确方法是什么？

（对不起，冗长而蹩脚的解释：@）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T11:33:47.513

```
struct s_xxx;
struct s_yyy {
    ...
    struct s_xxx *p_xxx;
}; 
```

在没有 xxx.h 的情况下，这意味着您有一个前向声明`struct s_xxx`并且您可以声明指向它的指针，但是您还不能使用它的成员或实例化一个，因为编译器不知道它的大小或成员。您需要通过在编译单元中包含 xxx.h 来包含完整的结构定义。

如果 xxx.h 不是 xxx 的公共接口的一部分，但您仍然坚持访问模块的内部，那么如果 xxx 的内部结构发生更改，您将来将面临灾难性的兼容性中断的风险。

不建议将结构定义复制到您自己的代码中，因为无法保证结构之间的二进制兼容性，*除非*您自己使用相同的编译器和选项构建了所有内容。**

# django - EmailBackend 用于在 Django 中通过多个 SMTP 发送电子邮件

> ID：13590518
> 
> 赞同：32
> 
> 时间：2012-11-27T18:18:24.863
> 
> 标签：django, email, smtp

[使用标准设置很好地解释了](https://docs.djangoproject.com/en/dev/topics/email/?#smtp-backend)让 Django 发送电子邮件，如下所示。

> ```
> EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
> EMAIL_HOST = "mail.mysmtpserver.somewhere"
> #EMAIL_PORT
> EMAIL_HOST_USER = "my@login"
> EMAIL_HOST_PASSWORD = "mypassword"
> #EMAIL_USE_TLS = True 
> ```

然后使用`django.core.mail.EmailMessage`发送它。

但是，如果您正在运行多个站点并且需要每个站点通过它们自己的 SMTP 服务器发送电子邮件（或者只是在同一个 SMTP 服务器中进行不同的登录），该怎么办？

搜索这样的 EmailBackend 或使用当前后端执行此操作的方法并没有产生任何令人满意的结果。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-18T11:38:19.257

如果您想覆盖提供的设置，您可以创建自己的连接并将其提供给`send_email`或`EmailMessage`

```
from django.core.mail import get_connection, send_mail
from django.core.mail.message import EmailMessage
# TODO: Insert clever settings mechanism
my_host = ''
my_port = 587
my_username = ''
my_password = ''
my_use_tls = True
connection = get_connection(host=my_host, 
                            port=my_port, 
                            username=my_username, 
                            password=my_password, 
                            use_tls=my_use_tls) 

send_mail('diditwork?', 'test message', 'from_email', ['to'], connection=connection)
# or
EmailMessage('diditwork?', 'test message', 'from_email', ['to'], connection=connection).send(fail_silently=False) 
```

**更新：**确保在使用后关闭连接，@michel.iamit 答案指向显示连接已缓存以供 smpt 的代码。@dhackner 答案显示了如何使用 with 语句自动关闭连接。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-04-28T20:50:35.250

我会稍微修改 Daniel Backman 的答案以使用文档中的上下文管理器。它将自己处理 open() 和 close() 调用。

```
from django.core.mail import get_connection, send_mail
from django.core.mail.message import EmailMessage

with get_connection(
    host=my_host, 
    port=my_port, 
    username=my_username, 
    password=my_password, 
    use_tls=my_use_tls
) as connection:
    EmailMessage(subject1, body1, from1, [to1],
                 connection=connection).send() 
```

[https://docs.djangoproject.com/en/dev/topics/email/#email-backends](https://docs.djangoproject.com/en/dev/topics/email/#email-backends)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-03T08:12:24.463

对不起，不能直接评论其余的答案，没有足够的代表。

只需添加一项：

```
connection = get_connection(host=my_host, 
                                port=my_port, 
                                username=my_username, 
                                password=my_password, 
                                user_tls=my_use_tls) 
```

应该

```
connection = get_connection(host=my_host, 
                                port=my_port, 
                                username=my_username, 
                                password=my_password, 
                                use_tls=my_use_tls) 
```

如果您不使用 TLS（并且您应该），这只是一个问题，因为它默认为 True。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T20:14:06.953

看看 django 的电子邮件后端，并创建一个自定义的可能是一个想法。

这是代码：[https ://github.com/django/django/blob/master/django/core/mail/backends/smtp.py](https://github.com/django/django/blob/master/django/core/mail/backends/smtp.py)

这个例子展示了如何定制一个（这个使用 SMTP_SSL 而不是 SMTP）：

[https://gist.github.com/jsummerfield/1486891](https://gist.github.com/jsummerfield/1486891)

我分叉了一个，将两者结合起来（这样我就可以将一个后端用于具有不同邮件设置的不同站点）：

[https://gist.github.com/iamit/5415771](https://gist.github.com/iamit/5415771)

不确定这是否可行，但是正如您所看到的，如果已经有连接，则上面的所有代码都会在打开连接时返回...所以也许您的解决方案已经开始了....不要那样做，关闭打开连接并使用不同的设置重新打开...（不确定是否有效）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T19:18:58.913

为每个站点使用不同的配置。

一种方法是，除了你`settings.py`的，`settings_SITENAME.py`每个站点都有一个。这些文件将具有自定义邮件服务器设置。每个站点都有`settings_local.py`一个指向它自己的自定义设置文件的符号链接

然后把这节放在下面`settings.py`：

```
try:                                                                                                                                                                            
    from settings_local import *                                                                                                                                                
except ImportError:                                                                                                                                                             
    pass 
```

现在您拥有每个站点的自定义设置

# c++ - 在上面的“float i = 0.7”初始化之后，“i < 0.7”是真的吗？

> ID：13590519
> 
> 赞同：1
> 
> 时间：2012-11-27T18:18:27.210
> 
> 标签：c++, c

> **可能重复：**
> [浮点比较](https://stackoverflow.com/questions/7011184/floating-point-comparison)

```
#include<stdio.h>
#include<conio.h>
int main()
{
float i=0.7;
clrscr();
if(i < 0.7)
     printf("If Block");
else
     printf("Else Block");
getch();
return 0;
} 
```

我不明白为什么输出会是“如果块”.....请帮助为什么执行 if 部分？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T18:19:40.603

实际上`i`是`0.69999999998`在它的浮动表示中。

当您`i=0.7`在内存中分配时，0.7 不能`double precision`像您想象的那样表示。

`float`因此，和之间的比较`double`导致类型提升，在这种情况下`i`小于`0.7`哪个是双倍的。

# django - 如何找到属性数量最多的对象

> ID：13590520
> 
> 赞同：0
> 
> 时间：2012-11-27T18:18:27.997
> 
> 标签：django, django-queryset

例如，假设我有一个名为“ClassRoom”的模型和一个名为“Student”的模型，并且 Student 与 ClassRoom 有外键关系。

```
Class Student(models.Model):
    classroom = models.ForeignKey(ClassRoom, related_name='student') 
```

如何使用基本的 Django 查询找到哪个教室的学生最多。我为找到答案所做的工作似乎应该更容易。

```
max = 0    
for c in ClassRoom.objects.all():
        if c.student.count() > max:
            print 'ID: %s' % c.id
            max = c.student.count() 
```

然后我会打印最后一个 ID 并对教室 ID 进行 .get() 查询。反正有没有用注释或聚合来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:25:13.383

尝试将这样的内容添加到您的`ClassRoom`对象中：

```
def num_students(self):
    return Students.objects.filter(classroom=self).count() 
```

显然替换`classroom`为您所称的任何内容。然后你应该能够使用`__max`查询。

免责声明：我没有尝试过，但它在我的脑海中起作用:)

# regex - perl 中的音译

> ID：13590527
> 
> 赞同：0
> 
> 时间：2012-11-27T18:19:18.980
> 
> 标签：regex, perl

我正在尝试通过以下方式音译 DNA 字符串以生成反向补码...然后使用生成的输出作为模式在大 DNA 字符串中查找匹配项

`$revcomp = reverse($dna);`

`$revcomp =~ tr/ACGTacgt[]{}N/TGCAtgca][}{./;`

例如：如果这是我的输入字符串，

`C[AG]{7,10}[ACGT]{5,8}ATGC`

我希望我的输出是

`GCAT[ACGT]{5,8}[CT]{7,10}G`

但是，我最终得到的是：`GCAT{8,5}[ACGT]{01,7}[CT]G`

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:18:09.917

我不知道您使用的 DNA 字符串表示，但此代码适用于您的数据。

它在 DNA 字符串中查找单个项目，其中一个项目可以是一个或多个`ACGT`碱基的序列，或方括号中的序列，后跟一对大括号中的重复计数。我假设永远不会只有一个重复计数，但是如果可能的话，这段代码很容易修改。

```
use strict;
use warnings;

my $seq = 'C[AG]{7,10}[ACGT]{5,8}ATGC';
my $rev = '';

while (1) {
  if ($seq =~ /\G([ATGC]+)/igc) {
    (my $new = reverse $1) =~ tr/ACGTacgt/TGCAtgca/;
    $rev = $new.$rev;
  }
  elsif ($seq =~ /\G\[([ATGC]+)\]\{(\d+),(\d+)\}/igc) {
    (my $new = reverse $1) =~ tr/ACGTacgt/TGCAtgca/;
    $rev = "[$new]{$2,$3}".$rev;
  }
  else {
    last;
  }
}

print $rev; 
```

**输出**

```
GCAT[ACGT]{5,8}[CT]{7,10}G 
```

# javascript - 在文本区域顶部留出空间会在将生成的文本应用于字段时引入语法错误

> ID：13590532
> 
> 赞同：0
> 
> 时间：2012-11-27T18:19:38.707
> 
> 标签：javascript, jquery, xml

从 xml 文件读回文本时出现语法错误。

在使用以下代码在消息前添加几行以允许在文本区域顶部键入回复后，提取以创建 xml 的数据保存在数据库中。

```
$('#message_Text').val(function(index, old) { return '\n\nOriginal Message:\n ' + old ; }); 
```

创建的这个 xml 是

```
<selector>$("#message_Text")</selector>
<message>.attr("value","This is a reply Original Message: Hi There")</message> 
```

控制台报告

```
SyntaxError: unterminated string literal

$("#message_Text").attr("value","This is a reply 
```

我已经尝试过使用换行符 \n 它没有区别。

但是，如果我删除该函数并在文本末尾附加一条消息，则语法错误就会消失。

那么当试图在文本区域的顶部腾出空间时，是否有一些东西被添加到文本区域？

**编辑**

我在我留下最后一个 \n 的原始测试中犯了一个错误，这导致了问题。

所以我现在要回答的问题是——

我可以在写入数据库时​​替换 \n ，
这消除了语法错误，但 textarea 当然不会保留它的布局。

显然我现在看到：

> `Test with newline stripped.<br/><br/>Original Message: <br/>Hi There`

我当然可以完全剥离它们。

但我真的想要一种将它们包含在 XML 中并保留消息格式的方法。....我想我会尝试逃避 \n 也许 \n 看看会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:04:43.130

好的，我有。

因此，要在 textarea 顶部引入行，您需要使用 \n

但是 \n 在尝试回写到 textarea 时会导致语法错误。

因此，在 php 中写入数据库之前，使用 \\n 添加转义 \n

> $message->set_Message(str_replace(chr(10), '\\n', $_POST['msg']));

这当从 xml 读回时，这正确地创建了消息

> 尝试使用转义的换行符。
> 
> 原始信息：
> 
> 你好呀

# vim - 查看 Vim 帮助缓冲区时设置 foldmethod=manual

> ID：13590538
> 
> 赞同：1
> 
> 时间：2012-11-27T18:19:55.657
> 
> 标签：vim

我的 .vimrc 中有以下内容：

```
foldmethod=indent
au FileType help setlocal foldmethod=manual 
```

但是当我打开 Vim 帮助时，例如`:h foldmethod`仍然`:set foldmethod?`返回缩进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:13:05.837

`'foldmethod'`可能已由模式行设置。检查帮助文件是否包含这样的行：

```
vim:tw=78:ts=8:ft=help:fdm=indent: 
```

要调查，还可以使用命令

```
:verbose setlocal foldmethod? 
```

如果它说`Last set from modeline`，您需要从那里删除设置，因为模式总是会否决自动命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:07:00.113

using`FileType`没有用，但 using`BufReadPre`和`buftype`做。以下是相关代码：

```
au BufReadPre * if (&buftype == 'help') | setlocal foldmethod=manual | endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T23:27:09.940

我决定把它放在一个答案中，这样我就可以格式化它：

```
augroup filetype_help
    autocmd!
    autocmd FileType help setlocal foldmethod=manual
augroup END 
```

希望这有效。:)

# ruby-on-rails - 为模块内的类定义工厂

> ID：13590547
> 
> 赞同：19
> 
> 时间：2012-11-27T18:20:18.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unit-testing, factory-bot

我对 factory_girl 很陌生，我有以下问题。

我有一个类的形式：

```
class Fruit::Apple < ActiveRecord::Base
  ...
end 
```

假设我需要为这个类创建工厂。我该怎么做？换句话说，工厂是否有 set_fixture_class 等价物？

我的 apple_factory.rb 如下：

```
FactoryGirl.define do |f|
  factory 'apple' do
    variety : washington
  end
end 
```

我拥有所有必需的 gem，并且我的文件夹结构为`test/factory/apple_factory.rb`. 当我执行测试时，我得到`uninitialized constant Apple`. 我在哪里设置类定义？我需要设置工厂助手吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-27T18:28:38.480

看起来您正在为模型使用命名空间。

看看这个问题和答案： [Using factory_girl_rails with Rspec on namespaced models](https://stackoverflow.com/questions/6349378/using-factory-girl-rails-with-rspec-on-namespaced-models)

```
Factory.define :apple, :class => Fruit::Apple do |f|
  f.variety 'Fuji'
end 
```

# php - 将 JSON 解析数组转换为 CSV

> ID：13590553
> 
> 赞同：1
> 
> 时间：2012-11-27T18:20:31.827
> 
> 标签：php, javascript, json, csv, d3.js

首先，我看到了 The Other Threads，我认为它们都不是使用 PHP 或 javascript。

好吧，在我编码并添加斜杠以转义 JSON 非法字符后，我有了这个数组：

```
"#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12" "#Tahrir","2012-Oct-12"  "#Tahrir","2012-Oct-19" "#Tahrir","2012-Oct-19" "#Tahrir","2012-Oct-19" 
```

想要将其更改为 CSV 或找到一种方法将此示例与该图一起使用：http: [//bl.ocks.org/3883245#data.tsv](http://bl.ocks.org/3883245#data.tsv)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T22:05:30.157

要将 json 数据转换为 CSV，请尝试使用此[http://jsfiddle.net/sturtevant/vUnF9/](http://jsfiddle.net/sturtevant/vUnF9/)（不是我的代码）

```
function JSON2CSV(objArray) {
var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;

var str = '';
var line = '';

if ($("#labels").is(':checked')) {
    var head = array[0];
    if ($("#quote").is(':checked')) {
        for (var index in array[0]) {
            var value = index + "";
            line += '"' + value.replace(/"/g, '""') + '",';
        }
    } else {
        for (var index in array[0]) {
            line += index + ',';
        }
    }

    line = line.slice(0, -1);
    str += line + '\r\n';
}

for (var i = 0; i < array.length; i++) {
    var line = '';

    if ($("#quote").is(':checked')) {
        for (var index in array[i]) {
            var value = array[i][index] + "";
            line += '"' + value.replace(/"/g, '""') + '",';
        }
    } else {
        for (var index in array[i]) {
            line += array[i][index] + ',';
        }
    }

    line = line.slice(0, -1);
    str += line + '\r\n';
}
return str;
} 
```

# android - 无法阻止 Eclipse 抱怨我已经修复的错误

> ID：13590555
> 
> 赞同：1
> 
> 时间：2012-11-27T18:20:35.377
> 
> 标签：android, c++, eclipse, android-ndk

Eclipse 不断为我的一个 C++ 文件提供此错误：

'handroid::Thread' 类型必须实现继承的纯虚方法 'hgame::Thread::getImplementationName'

它标记的行是带有新语句的行（这是在命名空间handroid中）：

```
hgame::Thread *ThreadFactory::createThread(hgame::Runnable *r,
        const char *name)
{
    return new Thread(mJVM, r, name);
} 
```

android::Thread 派生自 hgame::Thread。问题是我几天前通过完全删除 getImplementationName 方法修复了该错误。我已经找到了整个工作区，字符串没有出现在它的任何地方！但是无论我尝试重建和清理项目多少次、删除错误、重新启动 Eclipse 等，Eclipse 都会不断地复活这个错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:45:01.087

“Project -> Clean”将解决您的问题。

# java - JUnit4 根据自定义 java 注释跳过测试

> ID：13590557
> 
> 赞同：10
> 
> 时间：2012-11-27T18:20:43.003
> 
> 标签：java, junit, annotations

我希望根据我用 Java 创建的自定义注释执行我的 JUnit4 测试。这个自定义注解的目的是让 JUnit4 注意到只有当机器的平台与注解中指定的平台匹配时才应该运行测试。

假设我有以下注释：

```
public @interface Annotations {
    String OS();
    ...
} 
```

以及以下测试：

```
public class myTests{

    @BeforeClass
    public setUp() { ... }

    @Annotations(OS="mac")
    @Test
    public myTest1() { ... }

    @Annotations(OS="windows")
    @Test
    public myTest2() { ... }

    @Annotation(OS="unix")
    @Test
    public myTest3() { ... }

} 
```

如果我要在 Mac 机器上执行这些测试，那么只有 myTest1() 应该被执行，其余的应该被忽略。但是，我目前坚持如何实现这一点。如何让 JUnit 读取我的自定义注释并检查是否应该运行测试。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T18:29:39.590

您可以使用类别，也可以实现自己的自定义 JUnit 运行器。扩展默认的 JUnit 运行器非常简单，并且允许您定义要以您可能想要的任何方式运行的测试列表。这包括仅查找具有特定注释的那些测试方法。我在下面包含代码示例，您可以将它们用作您自己实现的基础：

**注解：**

```
@Retention(RetentionPolicy.RUNTIME)
public @interface MyCustomAnnotation {
   String OS();
} 
```

**自定义跑步者类：**

```
public class MyCustomTestRunner extends BlockJUnit4ClassRunner {

   public MyCustomTestRunner(final Class<?> klass) throws InitializationError {
      super(klass);
   }

   @Override
   protected List<FrameworkMethod> computeTestMethods() {
      // First, get the base list of tests
      final List<FrameworkMethod> allMethods = getTestClass()
            .getAnnotatedMethods(Test.class);
      if (allMethods == null || allMethods.size() == 0)
         return allMethods;

      // Filter the list down
      final List<FrameworkMethod> filteredMethods = new ArrayList<FrameworkMethod>(
            allMethods.size());
      for (final FrameworkMethod method : allMethods) {
         final MyCustomAnnotation customAnnotation = method
               .getAnnotation(MyCustomAnnotation.class);
         if (customAnnotation != null) {
            // Add to accepted test methods, if matching criteria met
            // For example `if(currentOs.equals(customAnnotation.OS()))`
            filteredMethods.add(method);
         } else {
            // If test method doesnt have the custom annotation, either add it to
            // the accepted methods, or not, depending on what the 'default' behavior
            // should be
            filteredMethods.add(method);
         }
      }

      return filteredMethods;
   }
} 
```

**样本测试类：**

```
@RunWith(MyCustomTestRunner.class)
public class MyCustomTest {
   public MyCustomTest() {
      super();
   }

   @Test
   @MyCustomAnnotation(OS = "Mac")
   public void testCustomViaAnnotation() {
      return;
   }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-14T15:35:30.227

我发现完全具有这种行为并将它们作为报告中的意识跳过测试的最佳方法是使用您自己的跑步者（如在 AlexR 的答案中）但覆盖 runChild 方法，该方法允许选择测试但像处理忽略而不是完全排除。

要使用的注解

```
@Retention(RetentionPolicy.RUNTIME)
public @interface TargetOS {
    String family();

    String name() default "";

    String arch() default "";

    String version() default "";
} 
```

JUnit 跑步者

```
public class OSSensitiveRunner extends BlockJUnit4ClassRunner {
    public OSSensitiveRunner(Class<?> klass) throws InitializationError {
        super(klass);
    }

    @Override
    protected void runChild(final FrameworkMethod method, RunNotifier notifier) {
        Description description = describeChild(method);
        if (method.getAnnotation(Ignore.class) != null) {
            notifier.fireTestIgnored(description);
        } else if (method.getAnnotation(TargetOS.class) != null) {
            final TargetOS tos = method.getAnnotation(TargetOS.class);
            String name = tos.name().equals("") ? null : tos.name();
            String arch = tos.arch().equals("") ? null : tos.arch();
            String version = tos.version().equals("") ? null : tos.version();
            if (OS.isOs(tos.family(), name, arch, version)) {
                runLeaf(methodBlock(method), description, notifier);
            } else {
                notifier.fireTestIgnored(description);
            }
        } else {
            runLeaf(methodBlock(method), description, notifier);
        }
    }
} 
```

测试中的使用

```
@RunWith(OSSensitiveRunner.class)
public class SeleniumDownloadHelperTest {
... 
```

并限制特定方法

```
@Test
@TargetOS(family = "windows")
public void testGetFileFromUrlInternetExplorer() throws Exception {
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-26T14:29:36.787

到目前为止，我发现的最佳选择是通过[JUnit Rule](http://www.codeaffine.com/2013/11/18/a-junit-rule-to-conditionally-ignore-tests/)。有一个[指向 GitHub 的链接，](https://gist.github.com/rherrmann/7447571) 其中包含一个可立即使用的文件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-11T17:18:31.033

这正是 JUnit 类别（请参阅此[简短介绍](http://www.vogella.com/tutorials/JUnit/article.html#junitadvanced_categories)）的用途。

在使用适当的类别（使用@Category）标记所有测试之后，您可以创建运行所有测试但类别错误的测试或所有具有正确类别的测试的套件。（使用@IncludeCategory 和@ExcludeCategory，您可以将它们组合起来以缩小您的选择范围）

类别可用于套件、测试类甚至测试方法级别。

以下是有关[JUnit 类别的更多信息](https://dzone.com/articles/closer-look-junit-categories)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-01T16:27:45.010

您可以使用此注释来启用和禁用测试方法`@DisabledOnOs(OS.LINUX)`或`@EnabledOnOs({OS.WINDOWS, OS.MAC})`

# asp.net - 创建包含方法的 Web 服务时出错返回 ArrayList 类型

> ID：13590559
> 
> 赞同：0
> 
> 时间：2012-11-27T18:20:47.273
> 
> 标签：asp.net, web-services, arraylist

我已经创建了一个 Web 服务看起来像

```
Public Class NameAndvalue
    Public name As String
    Public value As String
End Class
<WebMethod()> _
Public Function ReturnNames_1() As ArrayList
    Dim names As New List(Of NameAndvalue)
    Dim nv As NameAndvalue
    nv = New NameAndvalue With {.name = "AAA", .value = "1"} : names.Add(nv)
    nv = New NameAndvalue With {.name = "BBB", .value = "2"} : names.Add(nv)
    nv = New NameAndvalue With {.name = "CCC", .value = "3"} : names.Add(nv)
    Dim Arr As ArrayList = New ArrayList(names)
    Return Arr
End Function 
```

当我在浏览器中调用时（给我一个错误......）

> System.InvalidOperationException：生成 XML 文档时出错。---> System.InvalidOperationException：类型 TMR.AndroidMethods+NameAndvalue 不是预期的。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型。在 System.Xml.Serialization.XmlSerializationWriter.WriteTypedPrimitive（字符串名称，字符串 ns，对象 o，布尔 xsiType）在 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write1_Object（字符串 n，字符串 ns，对象 o，布尔 isNullable，布尔需要类型) 在 Microsoft.Xml.Serialization.GeneratedAssembly.ArrayListSerializer.Serialize(Object objectToSerialize, XmlSerializationWriter writer) 在 System.Xml 的 Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write2_ArrayOfAnyType(Object o)。

知道这个错误我在返回`list(of string)`from 方法时看到了它，因为我改变了从`List(Of String)`To的返回`ArrayList`但发生了同样的问题。

问题是什么 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:58:06.567

尝试`List(Of NameAndvalue)`改用。下面的例子

```
<WebMethod()> _
Public Function HelloWorld() As List(Of NameAndvalue)
    Dim names As New List(Of NameAndvalue)
    Dim nv As NameAndvalue
    nv = New NameAndvalue With {.name = "AAA", .value = "1"} : names.Add(nv)
    nv = New NameAndvalue With {.name = "BBB", .value = "2"} : names.Add(nv)
    nv = New NameAndvalue With {.name = "CCC", .value = "3"} : names.Add(nv)

    Return names
End Function 
```

返回

```
<?xml version="1.0" encoding="utf-8"?>
<ArrayOfNameAndvalue xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
  <NameAndvalue>
    <name>AAA</name>
    <value>1</value>
  </NameAndvalue>
  <NameAndvalue>
    <name>BBB</name>
    <value>2</value>
  </NameAndvalue>
  <NameAndvalue>
    <name>CCC</name>
    <value>3</value>
  </NameAndvalue>
</ArrayOfNameAndvalue> 
```

# php - 为什么我的上传脚本不起作用？运行时出现服务器错误

> ID：13590562
> 
> 赞同：0
> 
> 时间：2012-11-27T18:20:57.353
> 
> 标签：php, upload

代码在[这里](https://gist.github.com/4155885)：

```
// In PHP versions earlier than 4.1.0, $HTTP_POST_FILES should be used instead
// of $_FILES.

$uploaddir = '/var/www/upload/';
$uploadfile = $uploaddir . basename($_FILES['uploaded'].['name']);

echo '<pre>';
if (move_uploaded_file($_FILES['uploaded']['tmp_name'], $uploadfile)) {
    echo "File is valid, and was successfully uploaded.\n";
} else {
    echo "Possible file upload attack!\n";
}

echo 'Here is some more debugging info:<br>';
print_r($_FILES);
echo "<br>";
print_r($uploadfile);
print "</pre>"; 
```

它给出了[这个](http://i.imgur.com/1XALG.png)错误。我知道它真的不安全，我要撤消它，但我将网站的整个目录都放在公共读/写目录中，只是为了看看它是否可以工作。它仍然没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:29:52.677

第 6 行你有一个`.`介于`$_FILES['uploaded'].['name']`

# wpf - 使用 CellEditEnding 事件验证 WPF DataGrid 中的 DatePicker 值

> ID：13590563
> 
> 赞同：1
> 
> 时间：2012-11-27T18:20:59.043
> 
> 标签：wpf, datagrid

我正在使用 WPF DataGrid 的 CellEditEnding 事件来验证数据并执行其他计算。我有 TextBoxes 和 DatePickers 作为 DataGridTemplateColumns。

这是我调用事件处理程序的方式

```
 private void OnCellEditEnding(object sender, DataGridCellEditEndingEventArgs e)
    {
        if (e.EditAction == DataGridEditAction.Cancel) return;

        DataGridCellEditEndingCommandParameter p = new DataGridCellEditEndingCommandParameter();
        if (e.Column != null)
        {
            p.BindingPropertyName = e.Column.SortMemberPath;
            if (e.Column.Header != null)
                p.ColumnHeaderName = e.Column.Header.ToString();
        }

        TextBox t = e.EditingElement as TextBox;
        if (t != null) 
            p.EndingElementValue = t.Text;
        //else if (e.EditingElement as DatePicker) 

        if (e.Row != null) p.RowItem = e.Row.Item;

        p.EventArgs = e;
        p.Sender = sender as DataGrid;

        CommandParameter = p;
        ExecuteCommand();
    } 
```

我将 EditingElement 转换为 TextBox 以读取用户输入的值，对 DatePicker 执行相同的操作，但在编辑 DatePicker 时结果为 null。

```
<DataGridTemplateColumn x:Name="fxFwd"  Header="Value Date" Width="70" SortMemberPath = "fwFwdDate" CanUsersort = "True">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path= fxFwdDate, 
            ConverterCulture={x:Static gl:CultureInfo.CurrentCulture}, 
            StringFormat=\{0:d\}}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <DatePicker SelectedDate="{Binding Path=fxFwdDate,
                ConverterCulture={x:Static gl:CultureInfo.CurrentCulture}, Mode=TwoWay,
                ValidatesOnExceptions=true, NotifyOnValidationError=true}" />
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
</DataGridTemplateColumn> 
```

当我在更改 DatePicker 的值后检查 EditingElement 时，它作为 ContentPresenter 而不是 DatePicker 被接收。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:26:53.340

设置`x:Name`在您的`DatePicker`控制 -

```
<DataGridTemplateColumn.CellEditingTemplate>
    <DataTemplate>
        <DatePicker x:Name="datePicker" />
    </DataTemplate>
</DataGridTemplateColumn.CellEditingTemplate> 
```

您可以像这样在代码隐藏中获取 DatePicker 控件 -

```
ContentPresenter contentPresenter = e.EditingElement as ContentPresenter;
DataTemplate editingTemplate = contentPresenter.ContentTemplate;
DatePicker dp = editingTemplate.FindName("datePicker", contentPresenter)
                            as DatePicker ; 
```

# php - Javascript：如何更改为不在新页面中打开

> ID：13590565
> 
> 赞同：0
> 
> 时间：2012-11-27T18:21:04.933
> 
> 标签：php, javascript, header

我需要更改我的 header.php 文件并希望在同一窗口中打开我的“社交”图标。现在，wnen 点击然后他们在新窗口中打开。你能帮我编辑 header.php，而不是在同一个窗口中打开吗？

这是源代码：

```
<!doctype html>

<!--[if IEMobile 7 ]> <html <?php language_attributes(); ?>class="no-js iem7"> <![endif]-->
<!--[if lt IE 7 ]> <html <?php language_attributes(); ?> class="no-js ie6 oldie"> <![endif]-->
<!--[if IE 7 ]>    <html <?php language_attributes(); ?> class="no-js ie7 oldie"> <![endif]-->
<!--[if IE 8 ]>    <html <?php language_attributes(); ?> class="no-js ie8 oldie"> <![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html <?php language_attributes(); ?> class="no-js"><!--<![endif]-->

    <head>
        <meta charset="utf-8">
        <!--[if ie]><meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'/><![endif]-->

        <title><?php wp_title( ' - ', true, 'right' ); ?> <?php bloginfo('name'); ?></title>

        <?php if ( of_get_option('sc_enablemeta')== '1') { ?>

        <!-- meta -->
        <meta name="description" content="<?php echo of_get_option('sc_metadescription')  ?>">
        <meta name="keywords" content="<?php wp_title(); ?>, <?php echo of_get_option('sc_metakeywords')  ?>" />
        <meta name="revisit-after" content="<?php echo of_get_option('sc_revisitafter')  ?> days" />
        <meta name="author" content="www.site5.com">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <?php } ?>

        <?php if ( of_get_option('sc_enablerobot')== '1') { ?>

        <!-- robots -->
        <meta name="robots" content="<?php echo of_get_option('sc_metabots')  ?>" />
        <meta name="googlebot" content="<?php echo of_get_option('sc_metagooglebot')  ?>" />
        <?php } ?>

        <!-- icons & favicons (for more: http://themble.com/support/adding-icons-favicons/) -->
        <link rel="shortcut icon" href="<?php echo get_template_directory_uri(); ?>/favicon.ico">   

        <link rel="pingback" href="<?php bloginfo('pingback_url'); ?>">

        <!--[if lt IE 9]>
        <script src="<?php echo get_template_directory_uri(); ?>/library/js/html5.js"></script>
        <![endif]-->

        <link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>">

        <!-- wordpress head functions -->
        <?php wp_head(); ?>
        <!-- end of wordpress head -->

        <?php if(of_get_option('sc_css_code') != '') { ?> 
        <!-- custom css -->  
            <?php load_template( get_template_directory() . '/custom.css.php' );?>
        <!-- custom css -->
        <?php } ?>

        <?php if(of_get_option('sc_customtypography') == '1') { ?>     
        <!-- custom typography-->   
            <?php if(of_get_option('sc_headingfontlink') != '') { ?>
            <?php echo stripslashes(html_entity_decode(of_get_option('sc_headingfontlink')));?>
        <!-- custom typography -->
            <?php } ?>
            <?php load_template( get_template_directory() . '/custom.typography.css.php' );?>
        <?php } ?>

        <?php if(of_get_option('sc_colorscheme') != '') { ?> 
            <!-- custom color scheme css -->  
            <link rel="stylesheet" href="<?php bloginfo('template_directory');?>/library/css/color-schemes/<?php echo of_get_option('sc_colorscheme') ?>/styles.css">
        <?php } ?>

    </head>

    <body <?php body_class(); ?>>

        <div id="page">

            <div class="container clearfix">

                <div id="pre-header">
                    <!-- begin #socialIcons -->
                    <div id="social-icons">
                        <ul id="social-links">
                            <?php if(of_get_option('sc_facebook')!='') : ?>
                            <li class="facebook-link"><a href="<?php echo of_get_option('sc_facebook') ?>" class="facebook" id="social-01" title="<?php _e( 'Join Us on Facebook!', 'site5framework' ); ?>">Facebook</a></li>
                            <?php endif ?>
                            <?php if(of_get_option('sc_twitter')!=''): ?>
                            <li class="twitter-link"><a href="<?php echo of_get_option('sc_twitter') ?>" class="twitter" id="social-02" title="<?php _e( 'Follow Us on Twitter', 'site5framework' ); ?>">Twitter</a></li>
                            <?php endif ?>
                            <?php if(of_get_option('sc_googleplus')!=''): ?>
                            <li class="google-link"><a href="<?php echo of_get_option('sc_googleplus') ?>" id="social-03" title="<?php _e( 'Google+', 'site5framework' ); ?>" class="google">Google</a></li>
                            <?php endif ?>
                            <?php if(of_get_option('sc_dribble')!=''): ?>
                            <li class="dribbble-link"><a href="<?php echo of_get_option('sc_dribble') ?>" id="social-04" title="<?php _e( 'Dribble', 'site5framework' ); ?>" class="dribbble">Dribble</a></li>
                            <?php endif ?>
                            <?php if(of_get_option('sc_vimeo')!=''): ?>
                            <li class="vimeo-link"><a href="<?php echo of_get_option('sc_vimeo') ?>" id="social-05" title="<?php _e( 'Vimeo', 'site5framework' ); ?>" class="vimeo">Vimeo</a></li>
                            <?php endif ?>
                            <?php if(of_get_option('sc_skype')!=''): ?>
                            <li class="skype-link"><a href="<?php echo of_get_option('sc_skype') ?>" id="social-06" title="<?php _e( 'Skype', 'site5framework' ); ?>" class="skype">Skype</a></li>
                            <?php endif ?>
                            <?php if(of_get_option('sc_linkedin')!=''): ?>
                            <li class="linkedin-link"><a href="<?php echo of_get_option('sc_linkedin') ?>" id="social-07" title="<?php _e( ' LinkedIn', 'site5framework' ); ?>" class="linkedin">Linkedin</a></li>
                            <?php endif ?>
                            <?php if(of_get_option('sc_pinterest')!=''): ?>
                            <li class="pinterest-link"><a href="<?php echo of_get_option('sc_pinterest') ?>" id="social-09" title="<?php _e( 'Pinterest', 'site5framework' ); ?>" class="pinterest">Pinterest</a></li>
                            <?php endif ?>
                            <?php if(of_get_option('sc_rss')=='1'): ?>
                                <li class="rss-link"><a href="<?php echo of_get_option('sc_extrss') ?  of_get_option('sc_extrss') : bloginfo('rss_url'); ?>" id="social-08" title="<?php _e( 'RSS', 'site5framework' ); ?>" class="rss">RSS Feeds</a></li>
                        <?php endif ?>
                        </ul>
                    </div>
                     <select id="responsive-social-menu" onchange = "javascript:window.location.replace(this.value);"><option selected="selected" ><?php _e('Social Links', 'site5framework'); ?></select>
                     <!-- end #socialIcons -->
                </div>
                <!-- end #pre-header -->

                <header role="banner" id="header" class="clearfix">

                        <!-- begin #logo -->
                        <?php if ( !of_get_option('sc_clogo')== '') { ?>
                        <hgroup id="logo-wrapper">
                            <h1><a id="logo" href="<?php echo home_url( '/' ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home">
                                <img src="<?php echo of_get_option('sc_clogo'); ?>" alt="<?php echo bloginfo( 'name' ) ?>" />
                            </a></h1>

                        </hgroup>

                        <?php } else { ?>

                        <hgroup id="logo-wrapper">
                            <h1><a id="logo" href="<?php echo home_url( '/' ); ?>" title="<?php echo esc_attr( get_bloginfo( 'name', 'display' ) ); ?>" rel="home">
                                <?php if( !of_get_option('sc_clogo_text')== '') {
                                    echo of_get_option('sc_clogo_text'); 
                                    } else {
                                    bloginfo( 'name' );
                                }
                                ?>
                            </a></h1>
                            <h5 id="tagline"><?php bloginfo('description'); ?></h5>
                        </hgroup>

                        <?php }?>
                        <!-- end #logo -->

                        <!-- begin #topMenu -->
                        <div id="navigation-wrapper" class="clearfix">
                            <select id = "responsive-main-nav-menu" onchange = "javascript:window.location.replace(this.value);"><option selected="selected" ><?php _e('Menu', 'site5framework'); ?></option></select>

                            <nav id="main-navigation" class="main-menu">
                            <?php
                            site5_main_nav( array(
                             'container' =>false,
                             'menu_class' => '',
                             'echo' => true,
                             'before' => '',
                             'after' => '',
                             'link_before' => '',
                             'link_after' => '',
                             'depth' => 0
                             )
                             );
                             // Adjust using Menus in Wordpress Admin ?>
                            </nav>
                        </div>
                        <!-- end #topMenu -->

                </header> <!-- end header -->

            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:49:04.623

查看您网站上的源代码： http: [//spravka.eu/delivery/](http://spravka.eu/delivery/)我可以看到`target="_blank"`锚元素上设置的属性。这将导致链接在新选项卡或窗口中打开（取决于浏览器）。

如果您删除该`target`属性，那么您将不会遇到此问题。除非你也在用 JavaScript 做一些时髦的事情。

# c - 尝试使用 execvp 在 C 中执行外部命令（在类似 shell 的程序中）

> ID：13590568
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:21:14.233
> 
> 标签：c, unix, segmentation-fault, execvp

所以我必须实现对执行外部命令的支持（对于 C 编程语言中的 linux）。这就是我到目前为止所拥有的，我将 readline 库用于历史功能，但这无关紧要......有人可以告诉我我做错了什么吗？（我认为这是我称之为“execvp”的方式）所以这是我的代码：

```
#include<fcntl.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h> 
#include <readline/readline.h>
#include <readline/history.h>
#define BUFFER_SIZE 256
#define READFILE_SIZE 4096

char ** parseCMD( char * );
void  EXEC(char *, char *);

int main(int argc, char ** argv)
{
    char  myPrompt[]= {'>', '_', '\0'};
    char *currLine = (char* ) malloc(sizeof(char) * BUFFER_SIZE),
                 *command = (char* ) malloc(sizeof(char) * BUFFER_SIZE),
                            *argument = (char* ) malloc(sizeof(char) * BUFFER_SIZE);

    currLine = readline(myPrompt);
    while((strcmp(currLine, "exit") != 0))
    {
        command = strtok(currLine, " ");
        argument = strtok( NULL, "");
        EXEC(command, argument);
        currLine = readline(myPrompt);
    }
return 0;
}

char ** parseCMD( char * buff )
{
    int i = 0, n = strlen(buff), j, count = 0;
    char ** CMDargs = (char **) malloc( sizeof( char ) * 100 * 100);
    if( buff == NULL )
        return NULL;
    for(i; i < n; i ++)
    {
        j = 0;
        char * aux = (char *) malloc( sizeof( char ) * 100);
        while( buff[i] != ' ' || buff[i] != '\t' || buff[i] != '\n')
        aux[j++] = buff[i++];
        aux[j] = '\0';
        CMDargs[count] = strdup( aux );
        count++;
        //printf("Argument %d is: %s", count - 1, CMDargs[count - 1]);
        free(aux);
    }
CMDargs[ count ] = NULL;
return CMDargs;
}

void  EXEC(char *command, char *argBuffer)
{
    pid_t  pid;
    int status, fd[2], n;
    char s[255];
    char ** Args;
    pipe( fd );
    Args = parseCMD( argBuffer );
    if ((pid = fork()) < 0)
    {
        printf("ERROR: forking child process failed\n");
        exit(1);
    }
    else if (pid == 0)
    {
        close(fd[0]);
        dup2(fd[1],1);
        if (execvp(command, Args) < 0)
        {
            printf("ERROR: execvp call failed\n");
            exit(1);
        }
        close(fd[1]);
    }
    else
    {
        close(fd[1]);
        while( ( n = read( fd[0], s, 255 ) ) > 0 )
        {
            s[n] = '\0';
            printf("%s",s);

        }
        while (wait(&status) != pid);
        close(fd[0]);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:10:04.603

这个bug太多了，问问自己，当我输入空命令时会发生什么（变量命令为NULL，稍后会出现段错误），如果我输入不带参数的命令会发生什么（变量参数为NULL，你稍后会出现段错误），如果我输入带有参数的命令会发生什么？（而函数 parseCMD 中的循环将永远不会终止，最终您将访问不应该访问的内容）。也许是时候让你学习使用调试器了。尝试逐行执行程序并观察发生了什么。

# excel - excel行功能：在同一单元格内以不同方式增加多个数字

> ID：13590574
> 
> 赞同：0
> 
> 时间：2012-11-27T18:21:48.430
> 
> 标签：excel, excel-formula, rows, worksheet-function

我正在使用 Excel 电子表格来自动增加文本中的数字。我一直在使用 rows 函数将数字自动增加 1：`="text"&ROWS(A$1:A1)&"text"

这会产生以下输出：

(CELL A:1) text1 (CELL A:2) text2 (CELL A:3) text3..etc

我现在需要添加另一个重复 7 次然后增加 1 的数字。我还需要另一个从 1 到 6 的数字，然后重复这个循环。这将产生以下输出：

(单元格 A:1) 文本 1 文本 1 文本 1

(单元格 A:2) 文本 2 文本 1 文本 2

（单元格 A：3） 文本 3 文本 1 文本 3

(CELL A:4) text4 text1 text4

(CELL A:5) text5 text1 text5

(CELL A:6) text6 text1 text6

(CELL A:7) text7 text1 text7

(CELL A:8) text8 text2 text1

(CELL A:9) text9 text2 text2

(CELL A:10) text10 text2 text3

(CELL A:11) text11 text2 text4

(CELL A:12) text12 text2 text5

(CELL A:13) text13 text2 text6

(CELL A:14) text14 text2 text7 ...等

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:38:02.340

你能澄清一下编号模式吗？

第 1 节（第 1 列）是正确的行吗？第 2 节（第 2 列）每 7 行递增第 3 节（第 3 列）每行递增，但第 2 列索引？

```
 ="text " & ROW() & " text " & ROUNDUP(ROW() / 7,0) & " text " & IF(MOD(ROW(), 7) = 0, 7, MOD(ROW(), 7)) 
```

这产生了你提供的东西..我认为......

# apache - 为端口创建别名

> ID：13590576
> 
> 赞同：4
> 
> 时间：2012-11-27T18:22:14.707
> 
> 标签：apache, dns, alias, virtualhost

我真的不知道如何解决这个问题。我需要在地址[http://sub.domain.com/上加载页面](http://sub.domain.com/)[http://domain.com:12345/](http://domain.com:12345/)。

当我只有一个 IP 地址时，我应该如何在 Apache 上设置 VirtualHost 或 Alias？

非常感谢。

* * *

现在我只有这个：

端口.conf：

```
NameVirtualHost domain.com:80
NameVirtualHost sub.domain.com:80
Listen *:80

<IfModule mod_ssl.c>
    Listen *:443
</IfModule>

<IfModule mod_gnutls.c>
    Listen *:443
</IfModule> 
```

.../网站可用/默认：

```
<VirtualHost domain.com:80>
        ServerAdmin admin@domain.com
        ServerName domain.com
        DocumentRoot /var/www
        ...
</VirtualHost>

<VirtualHost sub.domain.com:80>
        ServerAdmin admin@domain.com
        ServerName sub.domain.com
        ProxyPass / http://www.domain.com:12345/
        ProxyPassReverse / http://www.domain.com:12345/
</VirtualHost> 
```

但这不起作用。sub.domain.com 返回 500 内部服务器错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T18:27:06.723

解决方案是虚拟主机：

> 如果你想在你的机器上维护多个域/主机名，你可以为它们设置 VirtualHost 容器。大多数配置仅使用基于名称的虚拟主机，因此服务器无需担心 IP 地址。这由以下指令中的星号表示。
> 
> 在尝试设置虚拟主机之前，请参阅[http://httpd.apache.org/docs/2.2/vhosts/](http://httpd.apache.org/docs/2.2/vhosts/)上的文档以 获取更多详细信息。
> 
> 您可以使用命令行选项“-S”来验证您的虚拟主机配置。

这是一个配置示例：

```
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
<VirtualHost *:80>
    ServerAdmin postmaster@dummy-host.localhost
    DocumentRoot "C:/Program Files (x86)/www/htdocs/dummy-host.localhost"
    ServerName dummy-host.localhost
    ServerAlias www.dummy-host.localhost
    ErrorLog "logs/dummy-host.localhost-error.log"
    CustomLog "logs/dummy-host.localhost-access.log" combined
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin postmaster@dummy-host2.localhost
    DocumentRoot "C:/Program Files (x86)/www/htdocs/dummy-host2.localhost"
    ServerName dummy-host2.localhost
    ServerAlias www.dummy-host2.localhost
    ErrorLog "logs/dummy-host2.localhost-error.log"
    CustomLog "logs/dummy-host2.localhost-access.log" combined
</VirtualHost> 
```

# php - 空白标签名称是否会导致解析错误？

> ID：13590577
> 
> 赞同：0
> 
> 时间：2012-11-27T18:22:15.590
> 
> 标签：php, xml, xml-parsing, domdocument

在保存输出之前，我试图通过获取数据、创建 DOM 文档并仅传输我需要的位来重组一些 XML，但是我不断收到“XML 解析错误：未找到元素：第 1 行，第 1 列：“错误。我认为这与第一个里面的空白标签有关：

```
<?xml version="1.0" encoding="UTF-8"?>
<report title="My Programs" name="aAffiliateMyProgramsReport" time="2012-11-27 16:06">
<matrix rowcount="2">
<rows>
 <row>
  <>You must select one or more sale events before editing</>
 </row>
</rows>
</matrix>
<matrix rowcount="2343">
    <rows>
        <row>
            <siteName>thewebsite.com</siteName>
            <affiliateId>123456</affiliateId>
            <programName>TheProgram.com</programName>
            <currentStatusExcel>Ok</currentStatusExcel>
            <programId>203866</programId>
            <applicationDate>2012-09-15</applicationDate>
            <programTariffAmount>0.0</programTariffAmount>
            <programTariffCurrency>GBP</programTariffCurrency>
            <programTariffPercentage>0.0</programTariffPercentage>
            <status>Accepted</status>
            <event>Unique visitor</event>
            <eventIdView>2</eventIdView>
            <eventLastModified>2011-03-15</eventLastModified>
            <segmentID>1</segmentID>
            <segmentName>General</segmentName>
            <lastModified>2012-09-15</lastModified>
        </row>........ 
```

这是我要运行的 PHP：

```
//contents of MyPrograms report - tested $query in browser many times: it is correct
$query = $q1.$siteID.$q2.$rKey.$q3;

//create DOM document for newTree
$newTree = new DOMDocument();
$newTree->formatOutput =true;
$r = $newTree->createElement ("ProgramTariffs");
$newTree->appendChild($r);

//load contents of MyPrograms report into an xml element
//$oldTree = simplexml_load_file($query);
//that wasn't working so tried file_get_contents instead
$oldTree = file_get_contents($query);

//the above is now at least allowing this script to produce an xml file, but it just contains 
"<?xml version="1.0"?> <ProgramTariffs/>" 
//and still throws the no element found error.................................

//for each instance of a program id in $oldTree.....
foreach($oldTree->matrix->rows->row as $program)
    { //an attempt to skip over first $program if nothing is set
    if (!empty($program->programId)) {

//create the top line container tag
        $row = $newTree->createElement ("programTariff");

//create the container tag for programId
        $progID = $newTree->createElement("programId");
        //fill it with the information you want
        $progID->appendChild ( $newTree->createTextNode ( $program->programId ) );
        //attach this information to the row
        $row->appendChild($progID);

//create the container tag for eventName
        $eventName = $newTree->createElement("eventName");
        //fill it with the information you want
        $eventName->appendChild ( $newTree->createTextNode ( $program->event ) );
        //attach this information to the row
        $row->appendChild($eventName);

//create the container tag for eventAmount
        $eventPercent = $newTree->createElement("eventPercent");
        //fill it with the information you want
        $eventPercent->appendChild ( $newTree->createTextNode ( $program->programTariffPercentage ) );
    //attach this information to the row
        $row->appendChild($eventPercent);

  //attach all of the above to a row in NewTree
    $r->appendChild ($row);
     }
}
//save the output
$newTree->save("ProgramTariffs.xml"); 
```

我在访问原始 XML 时是否犯了一个基本错误，或者我是否需要找到一种更好的方法来解决包含 "<>" 标记名称的行？

我等待你的愤怒/救赎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:37:10.190

您始终可以这样做以从文档中删除空白标签：

```
$oldTree = file_get_contents($query);
$oldTree = str_replace(array('<>', '</>'), '', $oldTree); 
```

# python - 打印和预期日志记录

> ID：13590578
> 
> 赞同：7
> 
> 时间：2012-11-27T18:22:19.460
> 
> 标签：python, pexpect

我有一些代码用于`pexpect`控制进程和代码中的一些打印。主要目标（在这个问题中）是将`pexpect`输出和打印记录到某个日志文件中。我遇到的问题是`pexpect`行（发送和接收的数据）与没有明显逻辑的打印混合在一起。我期待打印字符串和`pexpect`输出将按照它们发出的顺序记录。

示例代码如下：

```
#!/usr/bin/env python

import pexpect
import time, sys, os

###############################################################################
# Subclass of file object to avoid recording extensive whitespace characters
class CleanFile(file):
    def write (self, text):
        # Remove the whitespaces
        out_text = ''
        # process the backspace properly
        bline = ''
        for c in text:
            if (ord(c) == 0x8):
                if (len(bline) == 0):
                    # Move the file pointer.
                    file.seek(self, -1, os.SEEK_CUR);
                else:
                    bline = bline[:-1]
            else:
                bline += c

        # remove whitespaces from inside a line
        out_text += ''.join(c for c in bline if (ord(c) >= 32 or ord(c) == 10));

        file.write(self, out_text);

###############################################################################
def main():
    fout = CleanFile ("options.log_file.log", 'w')

    sys.stdout = os.fdopen (sys.stdout.fileno(), 'w', 0)
    os.dup2 (fout.fileno(), sys.stdout.fileno());

    p = pexpect.spawn ('tclsh')
    p.logfile = fout

    print "Got into tclsh."
    p.sendline('ls');
    p.expect (['%',pexpect.EOF])

    p.sendline('info tclversion');
    p.expect (['%',pexpect.EOF])

    print "Got the version\n"

    p.sendline('info commands %');
    p.expect (['%',pexpect.EOF])

    p.sendline('exit');

    print 'Ended session'

###############################################################################
if __name__ == "__main__":
    main() 
```

这是输出日志文件内容：

```
Got into tclsh.
ls
% lsinfo tclversion

log  options.log_file.log  pexpect_test.py  runtests.py  runtests_steinway.py
% info tclversionGot the version

info commands %

8.4
% info commands %exit
Ended session 
```

有什么方法可以使`pexpect`输出和打印输出顺序？

* * *

*更新*：基于`pexpect` [手册页](http://pexpect.sourceforge.net/pexpect.html#spawn-expect)：“但是请注意，缓冲会影响此行为，因为输入以不可预测的块的形式到达”。所以它可能会影响日志记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:36:30.220

如果您可以等到脚本结束才能看到结果，请不要为 pexpect 命令设置日志文件，将命令的结果保存到变量中，最后打印所有内容。

另请注意，您缺少`info commands`命令的输出。这可以通过添加一个 expect() 来等待 tclsh 解释器启动并从命令末尾删除 '%' 来解决。我以为那是一个错字。

修改主函数为：

```
def main():                                                          
    fout = CleanFile ("options.log_file.log", 'w')                   

    sys.stdout = os.fdopen (sys.stdout.fileno(), 'w', 0)             
    os.dup2 (fout.fileno(), sys.stdout.fileno());                    

    p = pexpect.spawn ('tclsh')                                      
    p.expect (['%',pexpect.EOF])                                     

    p.sendline('ls');                                                
    p.expect (['%',pexpect.EOF])                                     
    ls = p.before                                                    

    p.sendline('info tclversion');                                   
    p.expect (['%',pexpect.EOF])                                     
    tclversion = p.before                                            

    p.sendline('info commands');                                     
    p.expect (['%',pexpect.EOF])                                     
    commands = p.before                                              

    p.sendline('exit');                                              
    p.close()                                                        

    print "Got into tclsh."                                          
    print ls                                                         
    print tclversion                                                 
    print "Got the version\n"                                        
    print commands                                                   
    print "Ended session" 
```

那么输出是：

```
Got into tclsh.                                                      
 ls                                                                  
options.log_file.log  pexpect_test.py                                

 info tclversion                                                     
8.5                                                                  

Got the version                                                      

 info commands                                           
tell socket subst open eof pwd glob list pid exec auto_load_index time unknown  
eval lassign lrange fblocked lsearch auto_import gets case lappend proc break v 
ariable llength auto_execok return linsert error catch clock info split array i 
f fconfigure concat join lreplace source fcopy global switch auto_qualify updat 
e close cd for auto_load file append lreverse format unload read package set bi 
nary namespace scan apply trace seek while chan flush after vwait dict continue 
 uplevel foreach lset rename fileevent regexp lrepeat upvar encoding expr unset 
 load regsub history interp exit puts incr lindex lsort tclLog string           

Ended session 
```

# c# - 如何从数据绑定中的转换器获取依赖属性

> ID：13590580
> 
> 赞同：2
> 
> 时间：2012-11-27T18:22:33.297
> 
> 标签：c#, wpf, xaml

```
Rectangle rectangle = new Rectangle();
rectangle.StrokeThickness = 10;
rectangle.Height = 200;
rectangle.Width = 100;

//Self defined propety
Boolean AutoSize = false;
rectangle.DataContext = AutoSize;

//Add binding
Binding bind = new Binding(rectangle.DataContext);
bind.Mode = BindingMode.OneWay;
bind.Converter = ConvertAutoSize2Height;
bindingList.Add(bind);

canvas.Children.Insert(0, rectangle);

//Value converter
[ValueConversion(typeof(Boolean), typeof(Double))]
public class ConvertAutoSize2Height : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        Boolean autoSize = (Boolean)value;
        if (autoSize)
            return Double.NaN;
        else
            return **<<<I wanna return original height if autosize is false>>>**;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

**请检查转换器，如果autosize**为 false ，我想返回矩形的原始高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:15:24.067

这似乎是一个首选的解决方案，所以我发布我的评论作为答案。

您可以使用多重绑定和`IMultiValueConverter`. 然后，您可以绑定 autosize 和原始高度值并在转换器中处理它。

查看此链接以获取有关多重绑定的更多信息：http: [//blog.csainty.com/2009/12/wpf-multibinding-and.html](http://blog.csainty.com/2009/12/wpf-multibinding-and.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:12:09.697

你应该考虑 IMultiValueConverter 而不是 IValueConverter

# java - 使用 JButton 问题打开一个新的 JFrame

> ID：13590583
> 
> 赞同：3
> 
> 时间：2012-11-27T18:22:56.330
> 
> 标签：java, swing, jframe, jbutton, multiple-instances

我正在创建一个简单的任务管理器，我遇到的问题是我想在单击 JButton 时打开一个新的 JFrame。窗口打开，但问题是打开了多个窗口。我有两个类 App(Main) 和 NewTask。如果有人可以查看代码并查看我做错了什么，那就太好了，对不起，如果我发布了太多代码，在此先感谢。

```
App Class

    JButton btnNewTask = new JButton("New Task");
    btnNewTask.addActionListener(new ActionListener() 
{
     public void actionPerformed(ActionEvent e)
{
     JFrame frame = new JFrame ("New Task");
     frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
     //frame.getContentPane().add (new NewTask());
     frame.pack();
     frame.setVisible (true);
}
});

btnNewTask.setBounds(10, 216, 116, 23);
contentPane.add(btnNewTask);

   NewTask Class

     /**
 * Launch the application.
 */
//public static void main(String[] args) 
{
    EventQueue.invokeLater(new Runnable() 
    {
        public void run() 
        {
            try 
            {
                NewTask frame = new NewTask();
                frame.setVisible(true);
            } 
            catch (Exception e) 
            {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public NewTask() 
{

    setTitle("New Task");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:23:15.183

仅创建一次新框架作为 ActionListener 的字段，并使用按钮更改其可见性。

```
 JFrame frame = null;

  public void actionPerformed(ActionEvent e) {
    if ( frame == null ) {
      frame = new NewTask();
      frame.pack();
    }
    frame.setVisible( !frame.isVisible() );
  } 
```

但仍然是个坏主意，因为有多个帧 =)

[如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:12:03.590

创建多个 JFrame 最终实际上是不好的做法。您的程序最终看起来不连贯，而代码最终看起来很丑陋。

我建议使用 CardLayout。它非常易于使用，最终超级方便。另外，如果这是为了学校，我肯定会建议 CardLayout，因为教授们真的不喜欢当你有特定的函数调用新 JFrame 的打开时。;)

# jquery - 使用 Ajax jQuery 检查提交的值并返回另一个值

> ID：13590587
> 
> 赞同：0
> 
> 时间：2012-11-27T18:23:03.140
> 
> 标签：jquery, ajax

您好，我是初学者，需要一些有关如何使用 jQuery 实现此目的的指导

我想使用 Ajax 将一个文本字段值发布到一个 PHP 脚本，该脚本将采用该值并根据数据库查询对其进行检查。如果该值存在，我希望查询还检索其他匹配的行数据。

然后应该将这些数据发送回 Ajax 脚本。然后我需要访问这些数据，以便可以使用 jQuery 对其进行操作。

谁能给我一个如何实现这一目标的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:42:01.480

你需要使用jQuery的AJAX功能

```
 var request = $.ajax({
     url: "yourscript.php",
     data: {

     }
 });

 request.done(function(data){

 }); 
```

# javascript - 选择和选项不是默认值

> ID：13590590
> 
> 赞同：-3
> 
> 时间：2012-11-27T18:23:15.543
> 
> 标签：javascript

在用户单击提交按钮从选择框中选择一个选项而不是使用javascript的默认值后，我将如何提醒他们这是我的代码

```
<select id = "Sel">
    <option value ="Song1">default value<br>
    <option value ="Song2">Break on through<br>
    <option value ="Song3">Time<br>
    <option value ="Song4">Money<br>
    <option value="Song5">Saucerful of Secrets
</select><br><br> 
```

继承人我的 javascript 代码我不知道从哪里开始，但这不运行

```
if(document.getElementByID("Sel").value = "default value")
{
    alert("Pick another option besides default value");
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:28:40.767

首先，您的标记不正确..将其更正为

```
<select id = "Sel">
    <option value ="Song1">default value</option>
    <option value ="Song2">Break on through</option>
    <option value ="Song3">Time</option>
    <option value ="Song4">Money</option>
    <option value="Song5">Saucerful of Secrets</option>
</select><br><br> 
```

然后在表单提交检查为

```
if(document.getElementById('Sel').value=="Song1")
    return false; 
```

或者

```
if(document.getElementById('Sel').selectedIndex ==0)
    return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:29:16.810

```
<script>
     $(document).ready(function() {
        $("#Sel").live('click', function (event) {
        var myval=$(this).val;
        alert(myval);
        });
    </script>   
    <select id = "Sel">
            <option name="opSel" value ="Song1">default value</option>
            <option name="opSel" value ="Song2">Break on through</option>
            <option name="opSel" value ="Song3">Time</option>
            <option name="opSel" value ="Song4">Money</option>
            <option name="opSel" value="Song5">Saucerful of Secrets</option>
        </select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:27:17.780

您的标记首先是错误的..需要关闭**打开选项标签**

在更改事件中检查值...如果`value is Song1` 然后向用户发出警报

**HTML**

```
<select id = "Sel">
    <option value ="Song1">default value</option>
    <option value ="Song2">Break on through</option>
    <option value ="Song3">Time</option>
    <option value ="Song4">Money</option>
    <option value="Song5">Saucerful of Secrets</option>
</select>​ 
```

**Javascript**

```
var elem = document.getElementById('submit');

elem.addEventListener('click', function(){
   var selectElem = document.getElementById('Sel');
   var val = selectElem.value;
    if(val == 'Song1'){
        alert('Select an option!!');
        return false;
    }        
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/9Pem8/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T18:28:20.843

尝试这个：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $('#Sel').change(function() {
                    if($(this).val()=="Song1"){
                        alert('bad');
                    }else{
                        alert('good');
                    }
                });
                $('#button-test').click(function() {
                    var bob = $('#Sel').val();
                    if (bob=='Song1'){
                        alert('bad');
                    }else{
                        alert('good');
                    }
                });
            });
        </script>
    </head>
<body>

<select id = "Sel">
    <option value ="Song1">default value</option>
    <option value ="Song2">Break on through</option>
    <option value ="Song3">Time</option>
    <option value ="Song4">Money</option>
    <option value="Song5">Saucerful of Secrets</option>
</select><br>
<br>
<button id="button-test"> 
```

# javascript - HTML5 Javascript 旋转

> ID：13590592
> 
> 赞同：0
> 
> 时间：2012-11-27T18:23:20.370
> 
> 标签：javascript, html, canvas, html5-canvas

我是 JavaScript（和编程）的新手，并且正在努力解决如何在 HTML5 Canvas 中添加旋转。我基本上是想让 JavaScript 对象围绕另一个对象旋转。就我而言，我需要让一颗行星围绕太阳运行。

我目前在绘图函数中声明了行星，它们显示得很好。我只需要有关如何添加旋转的帮助。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:56:03.677

这是一个简单的例子：http: [//jsfiddle.net/FTMCv/1/](http://jsfiddle.net/FTMCv/1/)

`CelestialBody`我创建的类只考虑圆形轨道，所以它不是一个完美的模拟，但在大多数情况下它可能就足够了。

```
(function(){

    var can = document.getElementById('planetarium'),
        ctx = can.getContext('2d'),
        bodies = [];

    (function init(){
        var orbCenter = {x:can.width/2, y:can.height/2};

        bodies.push(new CelestialBody(
            50, orbCenter , 0, 0));

        bodies.push(new CelestialBody(
            15, orbCenter , 250, -.2));
        bodies.push(new CelestialBody(
            6, orbCenter , 200, .3));
        bodies.push(new CelestialBody(
            7, orbCenter , 150, .5));
        bodies.push(new CelestialBody(
            5, orbCenter , 100, 1));
        bodies.push(new CelestialBody(
            4, orbCenter , 75, 3));
    })();

    function CelestialBody(radius, orbitalCenter, orbitalDistance, orbitalVelocity){
        var pos = {x:0, y:0},
            rad = radius,
            orb = {x: orbitalCenter.x, y:orbitalCenter.y},
            ove = orbitalVelocity,
            odi = orbitalDistance;

        var update = function(){
            var cAng = Math.atan2(pos.y - orb.y, pos.x - orb.x);
            var rAng = cAng + ove * Math.PI/180;

            pos.x = orb.x + Math.cos(rAng) * odi;
            pos.y = orb.y + Math.sin(rAng) * odi;
        };

        this.draw = function(ctx){
            update();

            ctx.beginPath();
            ctx.fillStyle = "#fff";
            ctx.arc(pos.x,pos.y, rad, 0, 2*Math.PI);
            ctx.fill();
        };

        (function init(){
            pos.y = orb.y;
            pos.x = orb.x + odi;
        })();
    }

    (function draw(){
        ctx.clearRect(0,0,can.width,can.height);

        for(var i = 0; i < bodies.length; i++)
            bodies[i].draw(ctx);

        webkitRequestAnimationFrame(draw);
    })();

})();​ 
```

# android - Android：从设备向计算机发送通知

> ID：13590596
> 
> 赞同：0
> 
> 时间：2012-11-27T18:23:29.637
> 
> 标签：android, testing, adb

我们的持续集成环境在 Windows 机器上运行来自 ADB 的自定义测试框架。测试可能通过或失败，但在这两种情况下我们如何通知 Windows？

我们必须在物理设备上运行，所以模拟器不是一个选项。

我玩弄了一个想法，即在框架完成后将文件写入设备，并在 Windows 上运行某些东西定期轮询设备以获取文件。我敢肯定，大多数人都会同意这有点难看，但我很难过这一点。

欢迎任何建议，P

# java - NoSuchDefinitionException：没有匹配的 bean 类型

> ID：13590597
> 
> 赞同：2
> 
> 时间：2012-11-27T18:23:31.160
> 
> 标签：java, spring, maven, spring-mvc

所以我搜索和谷歌搜索，但没有任何答案或我发现可以帮助我。

```
Nov 27, 2012 11:24:32 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet dispatcher threw exception
org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.nimchip.project.data.service.CustomerSearchService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1093)
    at org.springframework.web.method.HandlerMethod.createWithResolvedBean(HandlerMethod.java:191)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:227)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:1)
    at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:288)
    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1063)
    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1048)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:886)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

控制器类：

```
@Controller
public class SearchController {
    protected Logger logger = LoggerFactory.getLogger(this.getClass());
    private static final String VIEW_SEARCH = "customerSearch";

    @Autowired
    private CustomerSearchService customerSearchService;

//snip 
```

服务实现（接口没有注释）：

```
@Service("customerSearchService")
public class CustomerSearchServiceImpl implements CustomerSearchService{

    @Autowired
    private HistoryTxService historyTxService;

    @Autowired
    private CustomerTxService customerTxService;

//snip 
```

据我了解：

```
 @Service
 @Qualifier("customerSearchService") 
```

和

```
 @Service("customerSearchService") 
```

行为相同，它们也会产生相同的错误。

这是我的 datasource-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:annotation-config/>
    <context:component-scan base-package="com.nimchip.project.data.dao.impl"/>
    <context:component-scan base-package="com.nimchip.project.data.tx.impl"/>
    <context:component-scan base-package="com.nimchip.project.data.service.impl"/>

    <bean id="initScript" class="org.springframework.core.io.ClassPathResource">
        <constructor-arg index="0" value="sql/schema.sql"/>
    </bean>

    <bean name="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="net.sourceforge.jtds.jdbc.Driver"/>
        <property name="url" value="jdbc:jtds:sqlserver://test/project2;instance=DEV"/>
        <property name="username" value="username"/>
        <property name="password" value="password"/>
    </bean>

    <bean name="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <constructor-arg ref="dataSource"/>
    </bean>

    <bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource"/>
    </bean>

</beans> 
```

有什么线索吗？当然，我的控制器在`project-webapp`，我的 tx/services/daos 在`project-dataacess`，当然这些都包含在全局 pom 和 webapp pom 中。

我应该补充一点，我已经从数据访问模块中对服务进行了单元测试，它们运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:25:05.477

糟糕，我的 web.xml 似乎缺少一些听众。我的 web.xml 是：

```
<web-app id="WebApp_ID" version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <display-name>New Project</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/datasource-context.xml
        </param-value>
    </context-param>    

     <!-- Spring MVC -->
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

所以我补充说：

```
 <listener>
        <listener-class>
            org.springframework.security.web.session.HttpSessionEventPublisher
        </listener-class>
    </listener>

    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

    <listener>
        <listener-class>
            ch.qos.logback.classic.selector.servlet.ContextDetachingSCL
        </listener-class>
    </listener> 
```

这解决了它。因此，如果您遇到此问题，请确保您有这些设置！

# php - Preg_match 无论如何

> ID：13590604
> 
> 赞同：0
> 
> 时间：2012-11-27T18:23:56.077
> 
> 标签：php

我一直在尝试将我的一个变量与另一个变量匹配。我想要的所有变量让我们说`$word`包含无论它与另一个变量匹配的内容，让我们说`$search_in`并相应地回显结果。

我一直在使用`if (preg_match("/$word/i", $search_in)) echo "matches";`，但是当我对从数据库返回的值应用正则表达式时，我收到了很多类似以下的警告。

> 警告：preg_match() [function.preg-match]: 未知修饰符 '('
> 
> 警告：preg_match() [function.preg-match]：未知修饰符 'T'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:27:07.830

如果只需要检查是否`$word`存在于 中`$search_in`，可以使用：

```
if(stripos($search_in, $word) !== FALSE) echo "matches"; 
```

正如[PHP 手册](http://www.php.net/manual/en/function.preg-match.php)所说：

> 如果您只想检查一个字符串是否包含在另一个字符串中，请不要使用 preg_match()。请改用 strpos() 或 strstr() ，因为它们会更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T18:28:03.657

`$word`很可能包含一个斜线。

你应该使用[`stripos`](http://php.net/stripos)它，因为你根本不需要正则表达式的力量：

```
if (stripos($search_in, $word) !== false) echo 'matches'; 
```

为了记录，`preg_match`这样做的方式是：

```
if (preg_match('/'.preg_quote($word, '/').'/i', $search_in)) echo 'matches'; 
```

当前者可以完成工作时，总是更喜欢字符串函数而不是正则表达式。

# mysql - 仅当用户有权限时才返回结果

> ID：13590606
> 
> 赞同：0
> 
> 时间：2012-11-27T18:24:17.413
> 
> 标签：mysql, permissions

我想知道是否有更好的方法来处理这种情况。虽然，它很简单，记住点击次数，但我试图消除一个查询。

我有清单`Books`。只有分配给这本书的用户才能看到其中的书籍和其他内容。它基本上是 API 调用。`/Books/`, `/Books/Chapters/`,`/Books/Chapters/Pages/`等。权限附加到`Books`数据库中的条目。

`Books`，“章节`,`页面”等都在不同的表格中。用户权限存储在不同的表中。桌子是这样的。

```
 UserID,  BookID
    --------------
     101      1
     102      1
     102      2
     ... 
```

用户信息是从 API 调用本身（基本身份验证）中获取的。`401 Unauthorized`如果请求存在， API 应该返回，`Book`但用户没有权限`Book`。如果请求“`does not exist, then it should return`未找到图书 404”。

通常，首先我需要通过查询检查该用户和请求的权限`Book`。如果该用户的用户权限表中存在该记录，那么我应该运行另一个查询以获取`Book`“章节”等。

目前，我正在将这两个查询与`condition that checks for the existence of the record for this user for the requested`权限表中的“WHERE EXISTS Book”结合起来。所以只有在用户权限表中有记录时才会返回记录。

但是有了这个，我不知道`Book`是不存在还是用户没有权限，尽管我可以减少一个数据库调用来单独检查用户权限。有了这个，我无法区分`401`和`404`。

有没有更好的方法来做到这一点，同时能够区分`401`并`404`使用单个查询？还是最好进行两次数据库调用？

你的意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:32:22.797

我建议您嵌入这样的子查询。

```
SELECT 
    (SELECT
         1
     FROM
         permissions
     WHERE
         permissions.user_id=<user ID> AND permissions.book_id=<book ID>)
    ) AS Permission,
    *
FROM
    books
WHERE
    books.id=<book ID> 
```

您将有一个名为“Permission”的新列，如果用户有权限，则该列为 1，如果用户没有该书的权限，则为 NULL。

**编辑：**我通过让它返回“1”或“NULL”来简化子查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:28:24.587

您需要拥有您的应用程序 ACL（访问控制列表），这样您就可以将权限分配给数据库中的各种实体。看看[这个问题](https://stackoverflow.com/questions/4415663/implementing-acl-for-my-php-application)

# mysql - 在其他语句中使用 SQL 查询的结果

> ID：13590610
> 
> 赞同：1
> 
> 时间：2012-11-27T18:24:22.117
> 
> 标签：mysql, sql, join

我似乎无法弄清楚要做出加入声明。

```
select usrs.*
from
    students s
    join system_users usrs on
        s.father=usrs.user_id
        OR s.mother=usrs.user_id
        OR s.guardian=usrs.user_id
where s.user_id = '201209083' 
```

我有这个查询，它返回：

```
+------------+---------+--------+--------+
| user_id    | contact | status | rights |
+------------+---------+--------+--------+
| f201209083 |    4093 | active | NULL   |
| g201209083 |    4095 | active | NULL   |
| m201209083 |    4094 | active | NULL   |
+------------+---------+--------+--------+ 
```

现在我需要的是使用联系人列的信息来检索更多信息并将其与此表连接：

```
select
    *
from
    address
where
    contact_id = (contact column); 
```

我需要在一个查询中实现它的帮助。

PS有人能告诉我这种技术叫什么吗？我无法通过仅搜索 JOIN 找到这方面的信息。或者学习的链接会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:29:02.030

一旦您在连接中有多个表，您可以继续连接到更多表，如下所示：

```
Select a.*,usrs.*
from students s
join system_users usrs on s.father=usrs.user_id OR s.mother=usrs.user_id OR s.guardian=usrs.user_id
join addresses a on a.contact_id=usrs.contact
where s.user_id = '201209083' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:29:09.853

您可以将该当前语句作为子查询并将其加入：

```
SELECT * FROM address 
JOIN (
    SELECT 
        usrs.* 
    FROM 
        students s 
        JOIN system_users usrs ON s.father=usrs.user_id OR s.mother=usrs.user_id OR s.guardian=usrs.user_id 
    WHERE 
        s.user_id = '201209083'
) AS temp 
ON contact_id = (contact column); 
```

这应该会给你原始结果与`address`表格中的结果相结合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T18:35:15.260

一种选择是更改第一条语句以仅返回您正在评估的列：

```
select usrs.contact
from
    students s
    join system_users usrs on
        s.father=usrs.user_id
        OR s.mother=usrs.user_id
        OR s.guardian=usrs.user_id
where s.user_id = '201209083' 
```

...然后将其用作评估contact_id的条件：

```
SELECT
    *
FROM
    address
WHERE
    contact_id IN (
        SELECT usrs.contact
        FROM
            students s
            JOIN system_users usrs ON
                s.father=usrs.user_id
                OR s.mother=usrs.user_id
                OR s.guardian=usrs.user_id
        WHERE s.user_id = '201209083'
    ) 
```

这通常称为子查询或子选择，并且自 4.1 起[在 MySQL 中得到支持。](http://dev.mysql.com/doc/refman/5.0/en/subqueries.html)如果contact_id 匹配内部查询返回的任何值，则“IN”谓词将为真[。](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)

# php - 在 CakePHP 2 中引发自定义 503 异常

> ID：13590614
> 
> 赞同：2
> 
> 时间：2012-11-27T18:24:40.023
> 
> 标签：php, cakephp, exception-handling, cakephp-2.0, http-status-code-503

我需要提供一个**503 Service Unavailable** HTTP 标头。

通常我将这些用于 404 和 500 代码

```
throw new NotFoundException();
throw new InternalErrorException(); 
```

但是我在 CakePHP 2.2 中找不到 503 的相关异常？

在我的“app/lib/AppExceptionHandler.php”文件中，我有这个类/函数来处理错误。

```
class AppExceptionHandler {
    public static function handle($error) {
     } 
```

编辑：

*   在“ **app/Lib** ”文件夹中，我创建了一个名为“ **MyExceptions.php** ”的文件。我在这个文件中写了以下代码：

    ```
    class ServiceUnavailableException extends CakeException {

    protected $_messageTemplate = 'Service is not available now';

    } 
    ```

*   在“ **bootstrap.php** ”中，我写道：

    应用::uses('MyExceptions', 'Lib');

*   然后在“ **MyNewController.php** ”文件中我写了这个：

    throw new ServiceUnavailableException("只是尝试");

但是当我抛出这个异常时，我得到了这个错误：

```
Fatal error: Class 'ServiceUnavailableException' not found in
 /var/www/vhosts/example.com/httpdocs/app/Controller/MyNewController.php
 on line 3560

Warning (2): Cannot modify header information - headers already sent by
(output started at 
/var/www/vhosts/example.com/httpdocs/app/Controller/MyNewController.php:3560)
[APP/Lib/AppExceptionHandler.php, line 19] 
```

我想念什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:33:51.910

[Cake 2.0 书中的 Exceptions 页面](http://book.cakephp.org/2.0/en/development/exceptions.html#creating-your-own-application-exceptions)值得一读。

这是我的简短测试：

```
// in bootstrap.php
require(APP . 'Lib' . DS . 'MyExceptions.php');

// in /Lib/MyExceptions.php
class ServiceUnavailableException extends CakeException {

    protected $_messageTemplate = 'Test';
}

// in controller
throw new ServiceUnavailableException('Service unavailable', 503); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:28:35.893

[http://api22.cakephp.org/class/cake-response#method-CakeResponsestatusCode](http://api22.cakephp.org/class/cake-response#method-CakeResponsestatusCode)

将允许您设置状态代码。

# c# - 从 ViewModel 中选择列表视图中的所有项目

> ID：13590617
> 
> 赞同：0
> 
> 时间：2012-11-27T18:24:43.067
> 
> 标签：c#, wpf, mvvm, visual-studio-2012

我的 WPF 窗口上有一个 ListView，我有一个按钮可以全选。首先，您如何获得按钮来选择列表视图中的所有项目。

其次，我需要我的 ViewModel 来检查所有选定的项目。如何在我的 ViewModel 中获取这些信息？

我读过您可以使用 IsSelected 属性执行此操作，但有一个错误，其中本地属性会覆盖绑定属性，因此如果之前已经选择了它，那么它似乎不会再次被选择 - 或类似的东西。看起来很复杂。[研究这个问题的博客](http://joshsmithonwpf.wordpress.com/2008/09/)

然后我读了这篇博客[Data binding to selected items](http://blog.functionalfun.net/2009/02/how-to-databind-to-selecteditems.html)这似乎也很复杂。

我想知道它是否必须如此复杂，并且这些例子是唯一的出路。

XAML：

```
 <ListView Name="sources_ListView" Grid.RowSpan="1" ItemsSource="{Binding Path=Sources}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="290" Header="Name">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=OriginalPath}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Width="80" Header="Type">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Path=Type}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>

<Button Grid.Row="0" Grid.Column="0" Content="Select All" Name="selectAllSources_Button" Margin="3" />
<Button Grid.Row="0" Grid.Column="1" Content="Deselect All" Name="deselectAllSources_Button" Margin="3" />
<Button Grid.Row="0" Grid.Column="3" Content="Remove Selected" Name="removeSelected_Button" Margin="3" Width="100" HorizontalAlignment="Right" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:37:10.490

在您的按钮上附加一个处理程序 -

```
<Button Click="Button_Click"/> 
```

`SelectAll`在您的 ListView 实例上调用方法 -

```
private void Button_Click(object sender, RoutedEventArgs e)
{
   sources_ListView.SelectAll();
} 
```

其次，如果在 View 上选择了所有项目，在这种情况下`ItemsSource`将始终等于`SelectedItems`. 因此，只需迭代 ItemsSource 即`Sources`在您的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:26:00.493

我创建了一种行为，以允许控件中的属性绑定到项目集合的属性，其方式如下：

*   如果更改控件中的属性，则会更新所有项。
*   如果您更改项目中的属性，如果所有项目都具有相同的属性，则控件将反映它。如果没有，控件的属性将被赋予一个后备值（如 null）。

您可以使用它来将 CheckBox.IsChecked 绑定到该类型元素集合中的 IsSelected 类型属性。我向一个想要做与您想要的类似的事情但使用 DataGrid 的人建议它。你可以看看[这里](https://stackoverflow.com/questions/13540566/check-box-in-datagrid-wpf-c-sharp-application/13541741#13541741)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T21:29:59.510

我很久以前创建了一个附加行为来处理这个问题。它允许您将 SelectedItems 列表绑定到 View Model 上的可观察集合并处理来回穿梭更改。

使用附加行为是将功能扩展到现有控件（而不是子类化控件）的首选方法，否则将需要扩展视图逻辑。

我不会说您应该始终使用这种方法而不是在视图中放置逻辑。但这是一种捕获行为以便于重用的简单方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:22:52.593

@ RV1987 感谢您的回答，这绝对是其中很大一部分。但是对于其余部分，我发现这个博客详细说明了如何使用源代码进行操作。绝对值得一读。

[坏熵博客](http://grokys.blogspot.co.uk/2012/02/mvvm-and-multiple-selection-part-iv.html)

谢谢

# java - 如何在 Google OAuth 中使用资源所有者密码凭据？

> ID：13590624
> 
> 赞同：1
> 
> 时间：2012-11-27T18:25:05.437
> 
> 标签：java, oauth-2.0, google-oauth

伙计们，

我正在寻找一个使用`com.google.api.client.auth.oauth2.draft10.AccessTokenRequest.ResourceOwnerPasswordCredentialsGrant`, 来**验证用户而不使用基于 Web 的 UI**的功能示例。尝试了课程中提供的示例（将[https://server.example.com/authorize](https://server.example.com/authorize)替换为[https://accounts.google.com/o/oauth2/auth](https://accounts.google.com/o/oauth2/auth)），但得到了 invalid_request 响应。这是发布到的正确 URL 吗？请求是否需要在其上设置其他属性？尝试像这样设置范围，但没有运气 request.set("scope", " [https://www.googleapis.com/auth/calendar](https://www.googleapis.com/auth/calendar) ")。还尝试设置 response_type，grant_type，任何帮助将不胜感激。这是代码（也附有maven项目）：

测试.java

```
import com.google.api.client.auth.oauth2.draft10.AccessTokenErrorResponse;
import com.google.api.client.auth.oauth2.draft10.AccessTokenRequest.ResourceOwnerPasswordCredentialsGrant;
import com.google.api.client.auth.oauth2.draft10.AccessTokenResponse;
import com.google.api.client.http.HttpResponseException;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.jackson.JacksonFactory;
public class Test {
  public static void main(String[] args) throws Exception {
    try {
      ResourceOwnerPasswordCredentialsGrant request =
          new ResourceOwnerPasswordCredentialsGrant(
              new NetHttpTransport(), 
              new JacksonFactory(),
              "https://accounts.google.com/o/oauth2/auth", 
              "<client_id>", 
              "<client_secret>",
              "<user_username>", 
              "<user_password>");
      AccessTokenResponse response = request.execute();
      System.out.println("Access token: " + response.accessToken);
    } catch (HttpResponseException e) {
      AccessTokenErrorResponse response = e.response.parseAs(AccessTokenErrorResponse.class);
      System.out.println("Error: " + response.error);
    }
  }
} 
```

pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.acme</groupId>
    <artifactId>google-oauth</artifactId>
    <version>1</version>
    <name>Google OAuth</name>
    <dependencies>
        <dependency>
            <groupId>com.google.api.client</groupId>
            <artifactId>google-api-client</artifactId>
            <version>1.4.1-beta</version>
        </dependency>
    </dependencies>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:16:45.207

Google OAuth2.0 授权服务器不支持资源所有者密码凭据流。如果您提供了避免使用基于 Web 的 UI 的原因，则可能有一些可用的解决方法 - 例如，企业设置中的[服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)，您的应用可以代表用户执行操作。

# nhibernate - 不能让我的非键引用使用 Fluent NHibernate 的左连接

> ID：13590625
> 
> 赞同：1
> 
> 时间：2012-11-27T18:25:11.757
> 
> 标签：nhibernate, reference, fluent-nhibernate, left-join, fluent-nhibernate-mapping

TripSent 和 ReturnCode

我想在这些表中进行左连接，例如

**“在 TripSent.ReturnCode = ReturnCode.Id 上左加入 TripSent”**

这是我的 TripSent 映射类

```
public TripSentMap()
{
    ImportType<RemittanceDetailTransHeader>();
    Schema(Dao.DataAccess.Schema);
    Table("EI_TRIP_SENT");
    LazyLoad();
    Id(x => x.Id)
      .Column("ID")
      .CustomType("Int64")
      .Access.Property()
      .CustomSqlType("NUMBER")
      .Not.Nullable()
      .Precision(12)
      .GeneratedBy.Sequence("EI_TRIP_SENT_ID_SEQ");
    //EDIT : Removed redundant Mapping Info
    References(x => x.ReturnCode)
      .Class<ReturnCode>()
      .Access.Property()
      .Cascade.None()
      .LazyLoad()
      .Columns("EI_RETURN_CODE_ID"); 
} 
```

这是我的 HQL

```
String hql = @"SELECT ts.PartialTripNumber, ts.Sequence, ts.TagIssuer, ts.TagNumber, ts.DateTime, ts.PlazaNumber, ts.LaneNumber, ts.RealCategory, ts.DetectedCategory,
    ts.TabulatedCategory, ts.Amount, ts.PassMode, ts.LicensePlate, ts.ImageReason, ts.ReturnCode, ts.TripSentStatus
    FROM TripSent ts
    WHERE ts.Remittance.Id = :remId";

var transactionDetailsHql = _session.CreateQuery(hql)
                .SetParameter("remId", remId)
                .List(); 
```

这会生成这样的查询

```
select tripsent0_.PARTIAL_TRIP_NUMBER    as col_0_0_,
       tripsent0_.SEQUENCE               as col_1_0_,
       tripsent0_.EI_TAG_ISSUER_ID       as col_2_0_,
       tripsent0_.TAG_NUMBER             as col_3_0_,
       tripsent0_.DATE_TIME              as col_4_0_,
       tripsent0_.PLAZA_NUMBER           as col_5_0_,
       tripsent0_.LANE_NUMBER            as col_6_0_,
       tripsent0_.REAL_CATEGORY          as col_7_0_,
       tripsent0_.DETECTED_CATEGORY      as col_8_0_,
       tripsent0_.TABULATED_CATEGORY     as col_9_0_,
       tripsent0_.AMOUNT                 as col_10_0_,
       tripsent0_.EI_PASS_MODE_ID        as col_11_0_,
       tripsent0_.LICENSE_PLATE          as col_12_0_,
       tripsent0_.EI_IMAGE_REASON_ID     as col_13_0_,
       tripsent0_.EI_RETURN_CODE_ID      as col_14_0_,
       tripsent0_.EI_TRIP_SENT_STATUS_ID as col_15_0_,
       tagissuer1_.ID                    as ID36_0_,
       passmode2_.ID                     as ID14_1_,
       imagereaso3_.ID                   as ID12_2_,
       returncode4_.ID                   as ID28_3_,
       tripsentst5_.ID                   as ID48_4_,
       tagissuer1_.DESCRIPTION           as DESCRIPT2_36_0_,
       tagissuer1_.EI_TAG_CHECK_TYPE_ID  as EI3_36_0_,
       tagissuer1_.EI_TAG_OSA_ID         as EI4_36_0_,
       passmode2_.DESCRIPTION            as DESCRIPT2_14_1_,
       imagereaso3_.DESCRIPTION          as DESCRIPT2_12_2_,
       returncode4_.DESCRIPTION          as DESCRIPT2_28_3_,
       tripsentst5_.DESCRIPTION          as DESCRIPT2_48_4_
from   CENTRO.EI_TRIP_SENT tripsent0_
       inner join CENTRO.EI_TAG_ISSUER tagissuer1_
         on tripsent0_.EI_TAG_ISSUER_ID = tagissuer1_.ID
       inner join CENTRO.EI_PASS_MODE passmode2_
         on tripsent0_.EI_PASS_MODE_ID = passmode2_.ID
       inner join CENTRO.EI_IMAGE_REASON imagereaso3_
         on tripsent0_.EI_IMAGE_REASON_ID = imagereaso3_.ID
       inner join CENTRO.EI_RETURN_CODE returncode4_
         on tripsent0_.EI_RETURN_CODE_ID = returncode4_.ID
       inner join CENTRO.EI_TRIP_SENT_STATUS tripsentst5_
         on tripsent0_.EI_TRIP_SENT_STATUS_ID = tripsentst5_.ID
where  tripsent0_.EI_REMITTANCE_ID = 12 /* :p0 */ 
```

但我想要一个 LEFT OUTER JOIN 而不是

```
inner join CENTRO.EI_RETURN_CODE returncode4_ on tripsent0_.EI_RETURN_CODE_ID = returncode4_.ID 
```

我找不到如何做到这一点我也尝试过映射

```
References(x => x.ReturnCode)
      .Class<ReturnCode>()
      .Access.Property()
      .Cascade.None()
      .NotFound.Ignore().Nullabe()
      .Not.LazyLoad()
      .Columns("EI_RETURN_CODE_ID"); 
```

没有成功 D：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:40:46.513

您应该从映射中删除冗余信息以使其更易于阅读。

此外，像 NHibernate 这样的对象/关系映射器旨在从关系数据库返回对象。如果您尝试指定诸如 LEFT JOIN 之类的内容，那么您似乎不是在尝试拉取对象，而是在尝试一些自定义视图。

您仍然可以这样做，但是您需要一个数据传输对象 (DTO)，它基本上是一个对象，表示查询中的每一行将返回的内容。您仍然可以利用 NHibernate 的数据库连接并用于`CreateSqlQuery`运行原始 SQL，然后根据需要将结果转换为对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T21:26:03.397

在这种情况下，我需要编写一个纯 sql 查询。但它是一个孤立的。

# java - Android ListView 标头

> ID：13590627
> 
> 赞同：122
> 
> 时间：2012-11-27T18:25:13.367
> 
> 标签：java, android, listview, header, android-arrayadapter

我有 ListView，上面有某种事件。事件按天排序，我希望每天都有带有日期的标题，然后事件在下面收听。

这是我填充该列表的方式：

```
ArrayList<TwoText> crs = new ArrayList<TwoText>();

crs.add(new TwoText("This will be header", event.getDate()));

for (Event event : events) {
    crs.add(new TwoText(event.getStartString() + "-" + event.getEndString(), event.getSubject()));
}

arrayAdapter = new TwoTextArrayAdapter(this, R.layout.my_list_item, crs);
lv1.setAdapter(arrayAdapter); 
```

这就是我的类 TwoText 的样子：

```
public class TwoText {
    public String classID;
    public String state;

    public TwoText(String classID, String state) {
        this.classID = classID;
        this.state = state;
    }
} 
```

这就是我的 TwoTextArrayAdapter 类的外观：

```
import java.util.ArrayList;
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class TwoTextArrayAdapter extends ArrayAdapter<TwoText> {

    private ArrayList<TwoText> classes;
    private Activity con;
    TextView seperator;

    public TwoTextArrayAdapter(Activity context, int textViewResourceId, ArrayList<TwoText> classes) {
        super(context, textViewResourceId, classes);
        this.con = context;
        this.classes = classes;

    }

    @Override

    public View getView(int position, View convertView, ViewGroup parent) {

        View v = convertView;

        if (v == null) {

            LayoutInflater vi = (LayoutInflater) con.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            v = vi.inflate(R.layout.my_list_item, null);

        }

        TwoText user = classes.get(position);

        if (user != null) {

            TextView content1 = (TextView) v.findViewById(R.id.list_content1);

            TextView content2 = (TextView) v.findViewById(R.id.list_content2);

            if (content1 != null) {

                content1.setText(user.classID);
            }   
            if(content2 != null) {

                content2.setText(user.state);
            }
        }
        return v;
    }
} 
```

这是 my_list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        style="?android:attr/listSeparatorTextViewStyle"
        android:id="@+id/separator"
        android:text="Header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#757678"
        android:textColor="#f5c227" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/list_content1"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_margin="5dip"
            android:clickable="false"
            android:gravity="center"
            android:longClickable="false"
            android:paddingBottom="1dip"
            android:paddingTop="1dip"
            android:text="sample"
            android:textColor="#ff7f1d"
            android:textSize="17dip"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/list_content2"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_margin="5dip"
            android:clickable="false"
            android:gravity="center"
            android:linksClickable="false"
            android:longClickable="false"
            android:paddingBottom="1dip"
            android:paddingTop="1dip"
            android:text="sample"
            android:textColor="#6d6d6d"
            android:textSize="17dip" />
    </LinearLayout>

</LinearLayout> 
```

我目前所做的是我将标题添加为常规列表对象，但我希望它作为标题并且在我的情况下有一个日期。

我的 xml 中有此代码作为标题：

```
<TextView
        style="?android:attr/listSeparatorTextViewStyle"
        android:id="@+id/separator"
        android:text="Header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#757678"
        android:textColor="#f5c227" /> 
```

我尝试在不必要时隐藏它并在必要时显示它，但我只是弄乱了我的其余代码。我尝试了更多教程，但它们也具有相同的效果。

谁能指导我如何做到这一点？

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2012-11-29T21:11:44.283

我是这样做的，关键是类中的[getItemViewType](http://developer.android.com/reference/android/widget/Adapter.html#getItemViewType%28int%29)和[getViewTypeCount](http://developer.android.com/reference/android/widget/Adapter.html#getViewTypeCount%28%29)`Adapter`。 `getViewTypeCount`返回列表中有多少类型的项目，在这种情况下，我们有一个标题项目和一个事件项目，所以两个。 `getItemViewType`应该返回`View`我们在输入处拥有的类型`position`。

然后，Android 会自动为您传递正确的输入`View`类型`convertView`。

以下代码的结果如下所示：

![](../Images/d9515c1e81318006a4ad34d5bbad18fe.png)

首先，我们有一个接口，我们的两个列表项类型将实现该接口

```
public interface Item {
    public int getViewType();
    public View getView(LayoutInflater inflater, View convertView);
} 
```

然后我们有一个适配器，它需要一个列表`Item`

```
public class TwoTextArrayAdapter extends ArrayAdapter<Item> {
    private LayoutInflater mInflater;

    public enum RowType {
        LIST_ITEM, HEADER_ITEM
    }

    public TwoTextArrayAdapter(Context context, List<Item> items) {
        super(context, 0, items);
        mInflater = LayoutInflater.from(context);
    }

    @Override
    public int getViewTypeCount() {
        return RowType.values().length;

    }

    @Override
    public int getItemViewType(int position) {
        return getItem(position).getViewType();
    } 
```

> ```
> @Override
> public View getView(int position, View convertView, ViewGroup parent) {
>    return getItem(position).getView(mInflater, convertView);
> } 
> ```

**编辑** **更好的性能..滚动时可以注意到**

```
private static final int TYPE_ITEM = 0; 
private static final int TYPE_SEPARATOR = 1; 

public View getView(int position, View convertView, ViewGroup parent)  {
    ViewHolder holder = null;
    int rowType = getItemViewType(position);
    View View;
    if (convertView == null) {
        holder = new ViewHolder();
        switch (rowType) {
            case TYPE_ITEM:
                convertView = mInflater.inflate(R.layout.task_details_row, null);
                holder.View=getItem(position).getView(mInflater, convertView);
                break;
            case TYPE_SEPARATOR:
                convertView = mInflater.inflate(R.layout.task_detail_header, null);
                holder.View=getItem(position).getView(mInflater, convertView);
                break;
        }
        convertView.setTag(holder);
    }
    else
    {
        holder = (ViewHolder) convertView.getTag();
    }
    return convertView; 
} 

public static class ViewHolder {
    public  View View; } 
} 
```

然后我们有类来实现`Item`并膨胀正确的布局。在您的情况下，您将拥有一个`Header`类和一个`ListItem`类。

```
 public class Header implements Item {
    private final String         name;

    public Header(String name) {
        this.name = name;
    }

    @Override
    public int getViewType() {
        return RowType.HEADER_ITEM.ordinal();
    }

    @Override
    public View getView(LayoutInflater inflater, View convertView) {
        View view;
        if (convertView == null) {
            view = (View) inflater.inflate(R.layout.header, null);
            // Do some initialization
        } else {
            view = convertView;
        }

        TextView text = (TextView) view.findViewById(R.id.separator);
        text.setText(name);

        return view;
    }

} 
```

然后`ListItem`上课

```
 public class ListItem implements Item {
    private final String         str1;
    private final String         str2;

    public ListItem(String text1, String text2) {
        this.str1 = text1;
        this.str2 = text2;
    }

    @Override
    public int getViewType() {
        return RowType.LIST_ITEM.ordinal();
    }

    @Override
    public View getView(LayoutInflater inflater, View convertView) {
        View view;
        if (convertView == null) {
            view = (View) inflater.inflate(R.layout.my_list_item, null);
            // Do some initialization
        } else {
            view = convertView;
        }

        TextView text1 = (TextView) view.findViewById(R.id.list_content1);
        TextView text2 = (TextView) view.findViewById(R.id.list_content2);
        text1.setText(str1);
        text2.setText(str2);

        return view;
    }

} 
```

并简单`Activity`地显示它

```
public class MainActivity extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        List<Item> items = new ArrayList<Item>();
        items.add(new Header("Header 1"));
        items.add(new ListItem("Text 1", "Rabble rabble"));
        items.add(new ListItem("Text 2", "Rabble rabble"));
        items.add(new ListItem("Text 3", "Rabble rabble"));
        items.add(new ListItem("Text 4", "Rabble rabble"));
        items.add(new Header("Header 2"));
        items.add(new ListItem("Text 5", "Rabble rabble"));
        items.add(new ListItem("Text 6", "Rabble rabble"));
        items.add(new ListItem("Text 7", "Rabble rabble"));
        items.add(new ListItem("Text 8", "Rabble rabble"));

        TwoTextArrayAdapter adapter = new TwoTextArrayAdapter(this, items);
        setListAdapter(adapter);
    }

} 
```

布局为`R.layout.header`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        style="?android:attr/listSeparatorTextViewStyle"
        android:id="@+id/separator"
        android:text="Header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#757678"
        android:textColor="#f5c227" />

</LinearLayout> 
```

布局为`R.layout.my_list_item`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/list_content1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_margin="5dip"
        android:clickable="false"
        android:gravity="center"
        android:longClickable="false"
        android:paddingBottom="1dip"
        android:paddingTop="1dip"
        android:text="sample"
        android:textColor="#ff7f1d"
        android:textSize="17dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/list_content2"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_margin="5dip"
        android:clickable="false"
        android:gravity="center"
        android:linksClickable="false"
        android:longClickable="false"
        android:paddingBottom="1dip"
        android:paddingTop="1dip"
        android:text="sample"
        android:textColor="#6d6d6d"
        android:textSize="17dip" />

</LinearLayout> 
```

布局为`R.layout.activity_main.xml`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</RelativeLayout> 
```

您还可以更高级地使用`ViewHolders`、异步加载内容或任何您喜欢的方式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-27T18:29:46.243

您可能正在寻找一个[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)，它具有标题（组）来分隔项目（子项）。

关于这个主题的很好的教程：[这里](http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-13T00:58:54.930

作为替代方案，有一个很好的[3rd 方库](https://github.com/JaySoyer/Advanced-Adapters)专为此用例而设计。因此，您需要根据存储在适配器中的数据生成标头。它们称为 Rolodex 适配器，与`ExpandableListViews`. 它们可以很容易地定制为像带有标题的普通列表一样。

使用 OP 的`Event`对象并知道标头是基于`Date`与之关联的...代码看起来像这样：

**活动**

```
 //There's no need to pre-compute what the headers are. Just pass in your List of objects. 
    EventDateAdapter adapter = new EventDateAdapter(this, mEvents);
    mExpandableListView.setAdapter(adapter); 
```

**适配器**

```
private class EventDateAdapter extends NFRolodexArrayAdapter<Date, Event> {

    public EventDateAdapter(Context activity, Collection<Event> items) {
        super(activity, items);
    }

    @Override
    public Date createGroupFor(Event childItem) {
        //This is how the adapter determines what the headers are and what child items belong to it
        return (Date) childItem.getDate().clone();
    }

    @Override
    public View getChildView(LayoutInflater inflater, int groupPosition, int childPosition,
                             boolean isLastChild, View convertView, ViewGroup parent) {
        //Inflate your view

        //Gets the Event data for this view
        Event event = getChild(groupPosition, childPosition);

        //Fill view with event data
    }

    @Override
    public View getGroupView(LayoutInflater inflater, int groupPosition, boolean isExpanded,
                             View convertView, ViewGroup parent) {
        //Inflate your header view

        //Gets the Date for this view
        Date date = getGroup(groupPosition);

        //Fill view with date data
    }

    @Override
    public boolean hasAutoExpandingGroups() {
        //This forces our group views (headers) to always render expanded.
        //Even attempting to programmatically collapse a group will not work.
        return true;
    }

    @Override
    public boolean isGroupSelectable(int groupPosition) {
        //This prevents a user from seeing any touch feedback when a group (header) is clicked.
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-08T09:21:28.703

我做了什么使日期（例如 2016 年 12 月 1 日）作为标题。我使用了 StickyHeaderListView 库

[https://github.com/emilsjolander/StickyListHeaders](https://github.com/emilsjolander/StickyListHeaders)

将日期转换为以毫秒为单位的长 [不包括时间] 并将其作为标题 ID。

```
@Override
public long getHeaderId(int position) {
    return <date in millis>;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-12T01:40:04.280

[这是一个示例项目](https://github.com/stevehs17/ListViewHeaders)，基于 antew 的详细而有用的答案，它实现了一个`ListView`带有多个标题的 a，该标题包含视图持有者以提高滚动性能。

在这个项目中， 中表示的对象是 class或 class`ListView`的实例，两者都是抽象类的子类。的每个子类对应于自定义适配器中的不同视图类型，. on方法将每个列表项的视图的创建委托给or上的个性化方法，具体取决于传递给适配器上方法的位置处使用的子类。每个子类都提供自己的视图持有者。`HeaderItem``RowItem``Item``Item``ItemAdapter``getView()``ItemAdapter``getView()``HeaderItem``RowItem``Item``getView()``Item`

视图持有者的实现如下。子类上的`getView()`方法`Item`检查传递给方法的`View`对象是否为空。如果是这样，则适当的布局被膨胀，并且视图持有者对象被实例化并通过膨胀的视图关联。如果对象不为 null，则视图持有者对象已经与视图相关联，并且视图持有者通过 检索。可以在以下代码片段中看到使用视图持有者的方式：`getView()``ItemAdapter``View.setTag()``View``View.getTag()``HeaderItem`

```
@Override
View getView(LayoutInflater i, View v) {
    ViewHolder h;
    if (v == null) {
        v = i.inflate(R.layout.header, null);
        h = new ViewHolder(v);
        v.setTag(h);
    } else {
        h = (ViewHolder) v.getTag();
    }
    h.category.setText(text());
    return v;
}

private class ViewHolder {
    final TextView category;

    ViewHolder(View v) {
        category = v.findViewById(R.id.category);
    }
} 
```

ListView 的完整实现如下。这是Java代码：

```
import android.app.ListActivity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

public class MainActivity extends ListActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new ItemAdapter(getItems()));
    }

    class ItemAdapter extends ArrayAdapter<Item> {
        final private List<Class<?>> viewTypes;

        ItemAdapter(List<Item> items) {
            super(MainActivity.this, 0, items);
            if (items.contains(null))
                throw new IllegalArgumentException("null item");
            viewTypes = getViewTypes(items);
        }

        private List<Class<?>> getViewTypes(List<Item> items) {
            Set<Class<?>> set = new HashSet<>();
            for (Item i : items) 
                set.add(i.getClass());
            List<Class<?>> list = new ArrayList<>(set);
            return Collections.unmodifiableList(list);
        }

        @Override
        public int getViewTypeCount() {
            return viewTypes.size();
        }

        @Override
        public int getItemViewType(int position) {
            Item t = getItem(position);
            return viewTypes.indexOf(t.getClass());
        }

        @Override
        public View getView(int position, View v, ViewGroup unused) {
            return getItem(position).getView(getLayoutInflater(), v);
        }
    }

    abstract private class Item {
        final private String text;

        Item(String text) {
            this.text = text;
        }

        String text() { return text; }

        abstract View getView(LayoutInflater i, View v);
    }

    private class HeaderItem extends Item {
        HeaderItem(String text) {
            super(text);
        }

        @Override
        View getView(LayoutInflater i, View v) {
            ViewHolder h;
            if (v == null) {
                v = i.inflate(R.layout.header, null);
                h = new ViewHolder(v);
                v.setTag(h);
            } else {
                h = (ViewHolder) v.getTag();
            }
            h.category.setText(text());
            return v;
        }

        private class ViewHolder {
            final TextView category;

            ViewHolder(View v) {
                category = v.findViewById(R.id.category);
            }
        }
    }

    private class RowItem extends Item {
        RowItem(String text) {
            super(text);
        }

        @Override
        View getView(LayoutInflater i, View v) {
            ViewHolder h;
            if (v == null) {
                v = i.inflate(R.layout.row, null);
                h = new ViewHolder(v);
                v.setTag(h);
            } else {
                h = (ViewHolder) v.getTag();
            }
            h.option.setText(text());
            return v;
        }

        private class ViewHolder {
            final TextView option;

            ViewHolder(View v) {
                option = v.findViewById(R.id.option);
            }
        }
    }

    private List<Item> getItems() {
        List<Item> t = new ArrayList<>();
        t.add(new HeaderItem("Header 1"));
        t.add(new RowItem("Row 2"));
        t.add(new HeaderItem("Header 3"));
        t.add(new RowItem("Row 4"));

        t.add(new HeaderItem("Header 5"));
        t.add(new RowItem("Row 6"));
        t.add(new HeaderItem("Header 7"));
        t.add(new RowItem("Row 8"));

        t.add(new HeaderItem("Header 9"));
        t.add(new RowItem("Row 10"));
        t.add(new HeaderItem("Header 11"));
        t.add(new RowItem("Row 12"));

        t.add(new HeaderItem("Header 13"));
        t.add(new RowItem("Row 14"));
        t.add(new HeaderItem("Header 15"));
        t.add(new RowItem("Row 16"));

        t.add(new HeaderItem("Header 17"));
        t.add(new RowItem("Row 18"));
        t.add(new HeaderItem("Header 19"));
        t.add(new RowItem("Row 20"));

        t.add(new HeaderItem("Header 21"));
        t.add(new RowItem("Row 22"));
        t.add(new HeaderItem("Header 23"));
        t.add(new RowItem("Row 24"));

        t.add(new HeaderItem("Header 25"));
        t.add(new RowItem("Row 26"));
        t.add(new HeaderItem("Header 27"));
        t.add(new RowItem("Row 28"));
        t.add(new RowItem("Row 29"));
        t.add(new RowItem("Row 30"));

        t.add(new HeaderItem("Header 31"));
        t.add(new RowItem("Row 32"));
        t.add(new HeaderItem("Header 33"));
        t.add(new RowItem("Row 34"));
        t.add(new RowItem("Row 35"));
        t.add(new RowItem("Row 36"));

        return t;
    }

} 
```

还有两个列表项布局，一个用于每个 Item 子类。这是`header`HeaderItem 使用的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#FFAAAAAA"
    >
    <TextView
        android:id="@+id/category"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="4dp"
        android:textColor="#FF000000"
        android:textSize="20sp"
        android:textStyle="bold"
        />
 </LinearLayout> 
```

这是`row`RowItem 使用的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    >
    <TextView
        android:id="@+id/option"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="15sp"
        />
</LinearLayout> 
```

这是生成的 ListView 的一部分的图像：

[![具有多个标题的 ListView](../Images/87420e41706b8820673321c6b1df9313.png)](https://i.stack.imgur.com/xurw1.png)

# android - Android中的对话框显示

> ID：13590631
> 
> 赞同：0
> 
> 时间：2012-11-27T18:25:20.587
> 
> 标签：android

这是我的显示对话框代码。

```
 @Override
    protected Dialog onCreateDialog(int id) {
    switch (id) {
    case 0:
        return new AlertDialog.Builder(this)
        .setIcon(R.drawable.ic_launcher)
        .setTitle("Select Reminder which you want to delete")
        .setPositiveButton("OK",
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton)
            {
                Toast.makeText(getBaseContext(), "OK clicked!", Toast.LENGTH_SHORT).show();
                check  = 1;
            }
        }
        )

        .setNegativeButton("Cancel",
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton)
            {
                Toast.makeText(getBaseContext(), "Cancel clicked!", Toast.LENGTH_SHORT).show();
                check = 2;
            }
        }
        )

        .setMultiChoiceItems(items, itemsChecked,
        new DialogInterface.OnMultiChoiceClickListener() {
            public void onClick(DialogInterface dialog,
                    int which, boolean isChecked) {

                Toast.makeText(getBaseContext(), items[which] + (isChecked ? " checked!":" unchecked!") + which, Toast.LENGTH_SHORT).show();
            }
        }
        ).create();
    }
        return null;
    } 
```

这是我称之为的功能。

```
 public void show()
    {

        showDialog(0);

        if(check == 1)
        {
            Toast.makeText(this, "ok" + check, Toast.LENGTH_LONG).show();
        }
        else if (check == 2)
        {
            Toast.makeText(this, "Cancel" + check, Toast.LENGTH_LONG).show();
        }
    } 
```

我面临着一些问题，我对“showDialog(0);”发生的事情感到困惑。功能运行良好，但是当我按下“ok”按钮时，对话框消失，它只显示用“ok”按钮的 onclicklistener 编写的 toast，但在“showDialog(0);”之后编写的代码 显示另一个 toast 就像无法访问，表示变量“check”（它是全局的），我在“ok”和“cancel”按钮的 onclicklisteners 中将其值设置为 1 或 2，并在“showDialog（0）之后在 if-else 条件下使用它们);" 显示不同的吐司，但功能“显示”结束而不检查 if-else 条件。我不明白这里到底发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:55:23.447

什么时候

`showDialog(0)`叫做。然后在执行此代码之后（在按下按钮 OK 之前）

```
if(check == 1)
    {
        Toast.makeText(this, "ok" + check, Toast.LENGTH_LONG).show();
    }
    else if (check == 2)
    {
        Toast.makeText(this, "Cancel" + check, Toast.LENGTH_LONG).show();
    } 
```

然后我猜`check=0`，所以没有`Toast`显示。

**更新**

如果你想对用户按下做一些动作，`OK`那么你需要在这里做

```
new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton)
            {
                Toast.makeText(getBaseContext(), "OK clicked!", Toast.LENGTH_SHORT).show();
                check  = 1;
                //here do your work
            }
        } 
```

# .net - .net 将许多形状绘制到面板时闪烁效果（需要优化）

> ID：13590633
> 
> 赞同：0
> 
> 时间：2012-11-27T18:25:27.377
> 
> 标签：.net, panel, system.drawing, drawing2d

为了实现这种类型的交互式艺术品，您可以在其中拖动框并在它们之间绘制连接线，我正在使用下面的代码。

![在此处输入图像描述](../Images/67736928c4e0eddde6e05a54d51181bc.png)

基本上，当鼠标被拖动（移动框）或通过单击新框在面板上进行新选择时，我清除面板，绘制所有矩形，所有文本，然后使用计时器绘制所有线连接（大约每秒 20 次）。然而，重新绘制面板组件似乎很慢，并且会产生非常烦人的闪烁效果。有没有办法优化这段代码？/ 让绘图更有效率？

```
 public MainForm()
    {
        // Create surface and pen to use for all drawing
        surface = NodesPanel.CreateGraphics();
        surface.InterpolationMode = InterpolationMode.Default;
        surface.SmoothingMode = SmoothingMode.Default;

        penl = new Pen(Color.Blue, 2.0f);
        ....

        timer.Tick += new EventHandler(timer_Tick);
        timer.Interval = 60;              // Timer call
        timer.Enabled = true;                       // Enable the timer
        timer.Start();
     }

    void timer_Tick(object sender, EventArgs e)
    {
        if (refreshScreen) // when dragging a box of making a new selection
        {
            RenderScreen();
        }
    }

    public void RenderScreen()
    {
        surface.Clear(Color.White);

        drawUnselectedNodes();

        if (showSearchGate)
        {
            drawGates();
        }

        if (currentlyClickedNode != null && !(currentlyClickedNode is Gate))
        {
            currentlyClickedNode.drawMyConnections(surface, penl); // Draw in a different colour
            currentlyClickedNode.drawMe(surface, penl);

            if (drawingLine)
            {
                DrawingHelper.DrawLine(surface, penl, currentlyClickedNode.getGatePosition(), linePosition, "regular");
            }
        }
    }

    private void drawUnselectedNodes()
    {
        foreach (QuestNode q in nodes)
        {
            if (q != currentlyClickedNode)
            {
                q.drawMe(surface, penl);
            }
        }

    }

 // The node structure
public class QuestNode
{
    ...
    public void drawMe(Graphics g, Pen p)
    {
        DrawingHelper.DrawRoundRectWithText
             (g, p, pos.x, pos.y, NODE_WIDTH * currentScale, NODE_HEIGHT *
                  currentScale, GATE_RADIUS * currentScale, name, description, true,
                       (selected ? RECTANGLE_SELECTED_COLOR : ANGLE_UNSELECTED_COLOR));
    }

    public void drawMyConnections(Graphics g, Pen p) 
    {
        foreach (QuestNode qn in relatedQuests)
        {
            DrawingHelper.DrawLine(g, p, pos, qn.getGatePosition(), "regular");
        }
    }
 }

static class DrawingHelper
{
    public static SolidBrush STANDARD_BRUSH = new SolidBrush(RECTANGLE_COLOR);
    public static int PRIMARY_TEXT_FONT_SIZE = 10;
    public static Font PRIMARY_FONT_STYLE = new Font("Arial", PRIMARY_TEXT_FONT_SIZE);
    public static int SECONDARY_TEXT_FONT_SIZE = 8;
    public static Font SECONDARY_FONT_STYLE = new Font("Arial", SECONDARY_TEXT_FONT_SIZE);

     public static void DrawRoundRectWithText(Graphics g, Pen p, float x, float y,
             float width, float height, float gateRadius, string textFirstLike, 
                 string textSecondsLine, bool hasGate, Color color)
    {
        Graphics formGraphics = g;
        g.InterpolationMode = InterpolationMode.Default;
        g.SmoothingMode = SmoothingMode.Default;

        SolidBrush myBrush = STANDARD_BRUSH;
        myBrush.Color = color;

        p.DashPattern = new float[] { 1 };
        Rectangle rect = new Rectangle((int)x, (int)y, (int)width, (int)height);
        p.Width = RECTANGLE_BORDER;

        formGraphics.FillRectangle(myBrush, rect);
        p.Color = RECTANGLE_COLOR;
        formGraphics.DrawRectangle(p, rect);

        DrawString(g, textFirstLike, x + TEXT_OFFSET_X, y + height / 4, PRIMARY_TEXT_FONT_SIZE, (int)width);
        DrawString(g, textSecondsLine, x + TEXT_OFFSET_X, y + height / 2, SECONDARY_TEXT_FONT_SIZE, (int)width);

        int gateWidth = (int)gateRadius;
        int gateHeight = (int)gateRadius;

        if (hasGate)
        {

            myBrush.Color = GATE_COLOR;
            Rectangle circle = new Rectangle((int)(x + width) - gateWidth/2, (int)(y + height) - gateHeight/2, gateWidth, gateHeight);

            formGraphics.FillEllipse(myBrush, circle);
            formGraphics.DrawEllipse(p, circle);

        }

        Point[] diamondPoints = new Point[4];
        diamondPoints[0] = new Point((int)(x - gateWidth / 2), (int)y);
        diamondPoints[1] = new Point((int)x, (int)(y - gateHeight / 2));
        diamondPoints[2] = new Point((int)(x + gateWidth / 2), (int)y);
        diamondPoints[3] = new Point((int)x, (int)(y + gateHeight / 2));

        myBrush.Color = Color.LightGray;
        formGraphics.FillPolygon(myBrush, diamondPoints);
        formGraphics.DrawPolygon(p, diamondPoints);
    }
  }

    public static void DrawLine(Graphics g, Pen p, Vector2D origin, Vector2D end, string style)
    {
        Pen myPen = p;
        p.Color = Color.Black;

        Graphics formGraphics = g;

        g.InterpolationMode = InterpolationMode.Default;
        g.SmoothingMode = SmoothingMode.Default;

        myPen.Width = LINE_BORDER;
        if (style == "dotted")
        {
            myPen.DashPattern = new float[] { 1, 1, 0.5f };
        }

        formGraphics.DrawLine(myPen, origin.x, origin.y, end.x, end.y);

    }

    private static void DrawString(Graphics g, string text, float posX, float posY, int fontSize, int stringMaxWidth)
    {

        string drawString = text;
        Font drawFont = (fontSize == PRIMARY_TEXT_FONT_SIZE) ? PRIMARY_FONT_STYLE : SECONDARY_FONT_STYLE;
        SolidBrush drawBrush = STANDARD_BRUSH;
        drawBrush.Color = Color.Black;

        float x = posX;
        float y = posY;

        float charHeight = drawFont.GetHeight() / 2;
        int maxChars = (int)(stringMaxWidth / charHeight);

        if (drawString.Length > (maxChars - 3))
        {
            drawString = drawString.Substring(0, maxChars - 3) + "...";
        }

        g.DrawString(drawString, drawFont, drawBrush, x, y);
    } 
```

# android - 进度对话框在布局onPreExecute（）之上膨胀？

> ID：13590634
> 
> 赞同：0
> 
> 时间：2012-11-27T18:25:40.203
> 
> 标签：android, android-asynctask, android-activity, progressdialog, android-progressbar

我的 ProgressDialog 适用于我在我的 oncreate 方法中使用 show() 的情况。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        pd = ProgressDialog.show(this, "Working", "Retreiving Neaby Restaurants", true, true);  // initializes the progress dialog
        pd.setCanceledOnTouchOutside(false);  // on newer versions of android touching outside of the screen will close the dialog. I decided to make it only cancelable when the back button is pressed.
        setContentView(R.layout.nearby_places_list); 
```

但是，如果我在异步任务中使用它，对话框代码将不起作用，因为它不在 on create() 中。争论显示（this, "Working", "Retriiving Neaby Restaurants", true, true) arnt 允许在 onCreate() 之外：

```
class MyAsync extends AsyncTask<Void, Integer, Boolean>{  // this task is for populating the listview

        @Override 
        protected void onPreExecute() {
            //ProgressDialog.show(context, "Working", "Retreiving Neaby Restaurants");
            pd = ProgressDialog.show(this, "Working", "Retreiving Neaby Restaurants", true, true);  // initializes the progress dialog
            pd.setCanceledOnTouchOutside(false);  // on newer versions of android touching outside of the screen will close the dialog. I decided to make it only cancelable when the back button is pressed.
        } 
```

这有点令人不安，因为我想在异步任务开始时显示对话框，但在调用该任务之前不久。

所以我的问题是如何在 onPreExecute() 的异步任务中完成这项工作，我不想在用户真正开始使用异步任务之前显示()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:45:34.760

采用

```
pd = ProgressDialog.show(yourActivitName.this, "Working", "Retreiving Neaby Restaurants", true, true); 
```

在`onPreExecute()`

**这**实际上是`Context`活动的。一个重要的东西，你需要在未来经常使用。

您还可以制作一个`Class level variable` **上下文活动上下文**

然后`setContentView`像`onCreate`这样初始化它

`activityContext=this`

然后你也可以使用

`pd = ProgressDialog.show(activityContext, "Working", "Retreiving Neaby Restaurants", true, true);`

# android - ListView 适配器和 ArrayAdapter

> ID：13590635
> 
> 赞同：0
> 
> 时间：2012-11-27T18:25:42.560
> 
> 标签：android, string, listview, android-arrayadapter, listadapter

首先，我是一个编程菜鸟，我想做一些事情，比如当他/她选择 Clear_data 时带用户去，它会带这个人去 Clear_data 活动。

我遇到了 try and catch 的问题，因为我在一般编程中仍然有点迷失。当我选择第一个选项 Text_Colour 时测试它，它会打开 Clear_data 活动而不是 Text_Colour。

这是代码：

```
public class Settings extends ListActivity {

String classes[] = { "Text_Colour", "Clear_data", "Contact Developer" };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(Settings.this, android.R.layout.simple_list_item_1, classes));
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);

    String colours = classes[0];
    String cdata = classes[1];

    try {
    Class Class1 = Class.forName("com.example.test1." + colours);
    Intent intent1 = new Intent(Settings.this, Class1);
    startActivity(intent1);
    }catch(ClassNotFoundException e) {
        e.printStackTrace();
    }
    try {
    Class Class2 = Class.forName("com.example.test1." + cdata);
    Intent intent2 = new Intent(Settings.this, Class2);
    startActivity(intent2);
    } 
    catch(ClassNotFoundException d) {
        d.printStackTrace();
    }   

} 
```

谢谢你们的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:32:52.377

您可能应该像这样添加一个 switch 运算符：

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);

    String colours = classes[0];
    String cdata = classes[1];

switch(position){
case 0:
    try {
    Class Class1 = Class.forName("com.example.test1." + colours);
    Intent intent1 = new Intent(Settings.this, Class1);
    startActivity(intent1);
    }catch(ClassNotFoundException e) {
        e.printStackTrace();
    }
break;
case 1:
    try {
    Class Class2 = Class.forName("com.example.test1." + cdata);
    Intent intent2 = new Intent(Settings.this, Class2);
    startActivity(intent2);
    } 
    catch(ClassNotFoundException d) {
        d.printStackTrace();
    }   
break;
}

} 
```

# automated-tests - 测试自动化编排工具/语言

> ID：13590637
> 
> 赞同：0
> 
> 时间：2012-11-27T18:25:46.100
> 
> 标签：automated-tests, orchestration

此场景的测试工具包括：（在 ubuntu 上）

1.  监控和报告一些先决条件，如数据库表、守护进程运行等。
2.  运行脚本将数据注入 mysql。此脚本插入少量数据，需要根据一些 FINISH Criteria 运行 N 次
3.  监视一些表并为其创建图形结果

然后，我们可以使用各种数据集运行此测试，并查看结果。

这种工作流程在许多测试用例中都很常见。是否有一个工具已经提供了这个编排，这是所有基于命令行的环境。

我搜索但找不到任何此类用于测试编排的工具。

现在我可以自己用 Java 或 Perl 或任何其他语言开发它，但如果有一些东西已经可用，我会很高兴，所以我不必从头开始。

现在[Jenkins](http://jenkins-ci.org/)确实提供了一种测试编排，但就像是在类固醇上拥有一个命令行工具，并且测试结果需要与可用的 Jenkins 插件和工具集成。我想知道是否有可用的 java 库或 perl 包，它们具有事件驱动/结果驱动的编排

我还包括了“语言”，因为我想知道是否有最适合开发这个框架的语言，因为有很多语言可供选择。同时，如果 AUT（被测应用程序）是用 Perl 开发的，那么选择（比方说）Java 来开发这个测试编排框架是一个好主意吗？

我意识到这是一个两部分的问题，可以作为两个单独的问题，但我不想在这里松散主题。

至于部署编排，有很多选择，如[Fabric](http://docs.fabfile.org/en/1.5/)、[Kokki](http://samuelks.com/kokki/)、[Poni](http://melor.github.com/poni/)、[puppet](http://puppetlabs.com/)等，但对于测试编排则没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T22:27:09.007

我不清楚您对*orchestration*的确切含义。如果您的意思是控制由多个组件组成的系统，您可以使用[Robot Framework](http://code.google.com/p/robotframework/)或[Cucumber](http://cukes.info)等工具。

# mongodb - mongoDB 2.2.1 - 数据库无效

> ID：13590638
> 
> 赞同：2
> 
> 时间：2012-11-27T18:25:46.533
> 
> 标签：mongodb, ubuntu

当我`db.users.validate();`在 mongo 终端中运行时，我得到了回复：`{ "errmsg" : "ns not found", "ok" : 0, "valid" : false }`.

这是正常的吗？我该如何解决它，因为`mongod --repair`并且`db.repairDatabase()`无济于事？

使用 Ubuntu 12.04 LTS x64、mongoDB x86_64 2.2.1（全新安装）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:28:55.527

我认为数据库中没有此类名称的集合。如果您尝试在新数据库中执行此操作，您将收到相同的错误。

# objective-c - CGContextRef 没有被创建

> ID：13590643
> 
> 赞同：0
> 
> 时间：2012-11-27T18:26:14.273
> 
> 标签：objective-c, ios, cocoa-touch, core-graphics, quartz-2d

```
-(CGImageRef)drawing{

CGContextRef    context;
GLubyte         *bitmapData;
size_t          width, height;

width=super.size.width;
height=super.size.height;

bitmapData = (GLubyte *) calloc(width * height * 4, sizeof(GLubyte));

context = CGBitmapContextCreate(bitmapData, width, height, 8, width * 4, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaPremultipliedLast);

if (context==NULL){
    NSLog(@"context not created?!   (o_*) ");
}

free(bitmapData);

CGContextSetRGBFillColor (context, 1, 0, 0, 1);
CGContextFillRect (context, CGRectMake (0, 0, 200, 100 ));
CGContextSetRGBFillColor (context, 0, 0, 1, .5);
CGContextFillRect (context, CGRectMake (0, 0, 100, 200 ));

CGImageRef myImage = CGBitmapContextCreateImage (context);

CGContextRelease(context);

return myImage;

} 
```

因此，我试图在上下文中渲染屏幕外的绘图，然后将其作为 a`CGImageRef`但由于某种原因上下文始终为 NULL，并且当我读取图像输出时应用程序崩溃。

有人可以解释这里发生了什么和/或指出一个可行的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:26:04.197

我不知道为什么上下文为空 - 宽度和高度可能不好。

但...

1.  您在使用之前释放位图！
2.  您无法释放您创建的色彩空间。

`CGBitmapContextCreate`Quartz 2D Programming Guide 中有一个使用示例。

# jquery - 花式框标题作为元素和缩略图助手

> ID：13590646
> 
> 赞同：1
> 
> 时间：2012-11-27T18:26:18.470
> 
> 标签：jquery, jquery-plugins, fancybox, fancybox-2

我正在尝试将标题与缩略图助手一起用作元素脚本。如果我对两者使用相同的类名，即.. (.fancybox-thumb)，则只有标题作为元素有效。

提前感谢您的任何帮助。

标题作为元素

```
$(".fancybox-thumb")
        .attr('rel', 'gallery')
        .fancybox({
            beforeLoad: function() {
                var el, id = $(this.element).data('title-id');

                if (id) {
                    el = $('#' + id);

                    if (el.length) {
                        this.title = el.html();
                    }
                }
            }
        }); 
```

缩略图助手

```
 $(".fancybox-thumb")
        .attr('rel', 'gallery')
        .fancybox({
             prevEffect : 'none',
             nextEffect : 'none',
             helpers    : {
                 title  : {
                     type: 'outside'
                },
                 thumbs : {
                     width  : 60,
                     height : 60
                }
            }

        }); 
```

如果我对两者使用相同的类名，即.. (.fancybox-thumb)，则只有标题作为元素有效。

```
<div id="main" class="wrapper clearfix">              
      <a class="fancybox-thumb" rel="fancybox-thumb" href="http://farm7.staticflickr.com/6111/6285920681_67917e8062_b.jpg" title="walk in the park (ewitsoe)">
        <img src="http://farm7.staticflickr.com/6111/6285920681_67917e8062_m.jpg" alt="" />
    </a>

    <a class="fancybox-thumb" rel="fancybox-thumb" href="http://farm7.staticflickr.com/6106/6347065961_bb73745e70_b.jpg" data-title-id="title-1">
        <img src="http://farm7.staticflickr.com/6106/6347065961_bb73745e70_m.jpg" alt="" />
    </a>
    <div id="title-1" class="hidden">
        This is 1st title. <a href="http://google.com" target="blank">Some link</a>
    </div><!--title-1-->
</div> <!-- #main --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:55:21.430

将两个 API 选项集成到一个脚本中，例如：

```
$(".fancybox-thumb").attr('rel', 'gallery').fancybox({
    prevEffect: 'none',
    nextEffect: 'none',
    helpers: {
        title: {
            type: 'outside'
        },
        thumbs: {
            width: 60,
            height: 60
        }
    },
    beforeLoad: function() {
        var el, id = $(this.element).data('title-id');
        if (id) {
            el = $('#' + id);
            if (el.length) {
                this.title = el.html();
            }
        }
    }
});​ 
```

当然，不要忘记加载 fancybox 的缩略图助手 css 和 js 文件，例如：

```
<!-- Add fancyBox - thumbnail helper -->
<link rel="stylesheet" type="text/css" href="/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=2.1.3" />
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=2.1.3"></script> 
```

**编辑**：您可以创建不同的画廊，将画廊元素分组在不同的父容器下，例如

```
<div id="gallery1" class="gallery">
    <p>gallery one</p>
    <a class="fancybox-thumb" href="http://farm8.staticflickr.com/7100/6917703112_d18e3e1b95_b.jpg">one</a>
    <a class="fancybox-thumb" href="http://farm8.staticflickr.com/7140/7061825385_0ccedf2a8e_b.jpg">two</a>
</div>
<div id="gallery2" class="gallery">
    <p>gallery two</p>
    <a class="fancybox-thumb" href="http://farm8.staticflickr.com/7065/7058141285_064170310e_b.jpg">one</a>
    <a class="fancybox-thumb" href="http://farm6.staticflickr.com/5333/7061356373_1af921fd78_b.jpg">two</a>
</div>
<div id="gallery3" class="gallery">
    <p>gallery three</p>
    <a class="fancybox-thumb" href="http://farm8.staticflickr.com/7069/7060779347_fbee5aae15_b.jpg">one</a>
    <a class="fancybox-thumb" href="http://farm8.staticflickr.com/7053/6918451990_20fa76f338_b.jpg">two</a>
</div> 
```

**​注意** ，我`class`对父容器使用了相同但不同的`ID`，这将用于区分画廊。

然后使用一点 jQuery，创建 fancybox 画廊，而不需要为每个画廊使用不同的脚本：

```
// loop through each parent container and set rel attribute accordingly
$("div.gallery").each(function() {
    var thisID = this.id;
    $(this).find(".fancybox-thumb").attr("rel", thisID).fancybox({
        // API options here
    });
}); // each​​​​​ 
```

查看**[jsfiddle 演示](http://jsfiddle.net/RJajg/)**

# python - 基于数字模式的增量列表

> ID：13590647
> 
> 赞同：2
> 
> 时间：2012-11-27T18:26:20.793
> 
> 标签：python, list

我有一个看起来像这样的零和一个列表：

```
lst = [0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1] 
```

我怎样才能把这个 lst 变成这个：

```
transformed_lst = lst = [0, 1, 1, 1, 1, 0, 0, 0, 2, 2, 0, 0, 0, 3, 0, 4, 4] 
```

基本上，在每次出现 1 时，将其转换为 n+1 整数。我确信使用 itertools/groupby/functools 有一种优雅的方法可以做到这一点。这是一个尝试，但并不完全正确：

```
from itertools import cycle

ints = cycle(range(len(lst))) 
transformed_lst = [next(ints) if i != 0 in lst else 0 for i in lst]  

>>> [0, 0, 1, 2, 3, 0, 0, 0, 4, 5, 0, 0, 0, 6, 0, 7, 8] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T18:39:56.167

您基本上有两种状态-“正在读取`0`s”和“正在读取`1`s”-当您在 then（即从 1 到 0）之间切换时，将应用于后续`1`s 更改的增量：

```
reading_zeroes = True
delta = 0
for x in input:
    if x:
        reading_zeroes = False
        x += delta
    elif not reading_zeroes:
        delta += 1
        reading_zeroes = True
    yield x 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T18:33:37.903

使用`itertools.count()`,`itertools.chain()`和`itertools.groupby()`:

```
In [14]: from itertools import *

In [15]: c=count(1)

In [16]: lis=[0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1]

In [17]: list(chain(*[list(g) if k!=1 else [next(c)]*len(list(g)) for k,g in groupby(lis)]))

Out[17]: [0, 1, 1, 1, 1, 0, 0, 0, 2, 2, 0, 0, 0, 3, 0, 4, 4] 
```

在这里你也可以使用`sum(1 for _ in g)`代替`len(list(g))`

根据要求，使用生成器功能的可读版本：

```
In [27]: def func(l):
    c=count(1)
    for k,g in groupby(l):
        if k==1:
            for x in [next(c)]*sum(1 for _ in g):
                yield x
        else:
            for x in g:
                yield x
   ....:                 

In [28]: list(func(lis))
Out[28]: [0, 1, 1, 1, 1, 0, 0, 0, 2, 2, 0, 0, 0, 3, 0, 4, 4] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T19:00:50.703

请注意，当当前元素为 1 且前一个元素为 0 时，您只有“下一个组”。

```
previous = 0
grp = 0
for elem in lst:
    if elem and not previous:
         grp += 1
    previous = elem
    yield (grp if elem else 0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T18:52:43.803

```
>>> lst = [0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1]
>>> from itertools import groupby
>>> [i//2 if k else 0 for i, (k, g) in enumerate(groupby(lst), 2) for j in g]
[0, 1, 1, 1, 1, 0, 0, 0, 2, 2, 0, 0, 0, 3, 0, 4, 4] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T18:40:31.533

```
>>> lst = [0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1]
>>> transformed = []
>>> idx = 1
>>> for key, grp in groupby(lst):
...    if key:
...       transformed += [idx] * len(list(grp))
...       idx += 1
...    else:
...       transformed += list(grp)
... 
>>> transformed
[0, 1, 1, 1, 1, 0, 0, 0, 2, 2, 0, 0, 0, 3, 0, 4, 4]
>>> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T18:52:00.293

我发现这是可读性和简洁性之间的良好结合（不需要跟踪状态）：

```
from itertools import groupby

def transform(numbers):
    counter = 0
    for value, iterator in groupby(numbers):
        if value:
            counter += 1

        for i in iterator:
            if value:
                yield counter
            else:
                yield 0

pre_transformed = [0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1]
print list(transform(pre_transformed)) 
```

返回：

```
[0, 1, 1, 1, 1, 0, 0, 0, 2, 2, 0, 0, 0, 3, 0, 4, 4] 
```

# performance - 从 SQL Server 中的另一个 SProc 调用 SProc 的性能影响

> ID：13590654
> 
> 赞同：4
> 
> 时间：2012-11-27T18:26:53.883
> 
> 标签：performance, sql-server-2008, stored-procedures

从另一个存储过程中调用一个存储过程是否会影响性能？我一直无法找到有关此的任何答案。如果它确实对性能产生负面影响，我想唯一的选择是将这些程序合并为一个更大的程序。

我知道由于 SQL 计划查询统计信息的方式，它会对 Sprocs 中的函数调用性能产生负面影响（最好只在 SProc 中重新键入代码），但我想这仅适用于函数。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:37:37.287

我从未见过存储过程本身调用另一个存储过程的性能问题。

然而，我看到事务远远大于必要的——导致严重的性能问题——因为开发人员在不了解后果的情况下扩展了内部存储过程。

这是另一个问题示例：有一个“不错”的存储过程，对于许多场景来说几乎是完美的，编码器到处都在使用它。但是，存储过程实际上返回的列数是 90% 的调用者实际需要的列数的两倍。调用代码未优化。

这就是为什么存储过程应该只有简单的基于集合的逻辑，以及为什么我反对具有过程逻辑和调用其他存储过程的复杂存储过程。

所以...最好避免恕我直言。

# python - python中线程示例中的锁定问题

> ID：13590663
> 
> 赞同：1
> 
> 时间：2012-11-27T18:27:32.050
> 
> 标签：python, multithreading

我只是在玩 python 中的线程，对 python 也很陌生。我有一个创建线程的生产者类。这些线程都访问作为公共资源的单个对象。下面是代码

```
class Producer (threading.Thread):
    def __init__(self, threadId, source):
    threading.Thread.__init__(self)
    self.source = source
    self.threadId = threadId

    def produce(self):
    while 1:
        data = self.source.getData()
        if data == False:
            print "===== Data finished for "+self.threadId+" ====="
            break
        else:
            print data

    def run(self):
        self.produce()
#class

class A:
    def __init__(self):
        self.dataLimit = 5
        self.dataStart = 1

    def getData(self):
        lock = Lock()
        lock.acquire()
        if self.dataStart > self.dataLimit:
           return False
        lock.release()

        data = "data from A :: "+str(self.dataStart)+" Accessor thread :: "+thread.threadId
        time.sleep(0.5)

        lock.acquire()
        self.dataStart += 1
        lock.release()

        return data
   #def
#class

source = A()
for i in range(2):
    thread = Producer( "t_producer"+str(i), source )
    thread.start()

print "Main thread exiting..." 
```

所以 A 类的 dataStart 是从 1 到 5 计数的。现在由于它是一个公共资源，getData 方法也实现了锁定，生产者类的线程将交替访问 getData 方法，预期输出如下：

```
data from A :: 1 Accessor thread :: t_producer0
data from A :: 2 Accessor thread :: t_producer1
data from A :: 3 Accessor thread :: t_producer1
data from A :: 4 Accessor thread :: t_producer0
data from A :: 5 Accessor thread :: t_producer0
===== Data finished for t_producer0 =====
===== Data finished for t_producer1 ===== 
```

但我得到了这个：

```
data from A :: 1 Accessor thread :: t_producer0
data from A :: 1 Accessor thread :: t_producer1
data from A :: 3 Accessor thread :: t_producer1
data from A :: 3 Accessor thread :: t_producer1
data from A :: 5 Accessor thread :: t_producer1
===== Data finished for t_producer0 =====
data from A :: 5 Accessor thread :: t_producer1
===== Data finished for t_producer1 ===== 
```

如您所见，数据计数重复，随机计数丢失。这里如何处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:24:12.490

```
def getData(self):
    lock = Lock()
    lock.acquire()
    if self.dataStart > self.dataLimit:
       return False
    lock.release()

    data = "data from A :: "+str(self.dataStart)+" Accessor thread :: "+thread.threadId
    time.sleep(0.5) 
```

您在发布调用之前返回 False 。尝试使用这样的`with`语句：

```
with lock:
    # Do stuff 
```

这将确保获取然后释放它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-17T12:08:51.113

```
def getData(self):
        lock = threading.Lock()
        with lock:
            if self.dataStart > self.dataLimit:
                return False

            data = "data from A :: " + str(self.dataStart) + " Accessor thread :: " + thread.threadId
            self.dataStart += 1
        return data 
```

# html - 媒体屏幕 - Google Chrome 不使用条件 CSS

> ID：13590664
> 
> 赞同：1
> 
> 时间：2012-11-27T18:27:34.260
> 
> 标签：html, css

我正在尝试使用条件 CSS 来呈现我的页面。使用 Firefox 时，它会按预期显示，但使用 Google Chrome 时则不然。它似乎正在拉动“@media all and (min-width: 960px) and (max-width: 1920px)”部分而不是“@media screen and (min-width: 1920px)”部分的样式，即使屏幕尺寸比 1920px 宽得多。

我的HTML如下：

```
<div id="hpBody">
    <div id="hpHeader"><div id="siteLogo"><img src='/images/logo.png' /></div></div>
    <div id="hpContainer">
        <div id="hpEvent">
            <div id="hpEventImage"><img src='/images/home_img.png' /></div>
            <div id="hpEventInfo"><h1 class="home_H1">My Title</h1><h2 class="home_H2">Subtitle</h2></div>
        </div>
        <div id="hpActions">
            <div id="hpEventBtn" class="btn"><img src='/images/inv.png' /></div>
            <div id="hpTenantBtn" class="btn"><img src='/images/inv.png' /></div>
            <div class='clear'></div>
            <div id="hpTourBtn" class="btn"><img src='/images/inv.png' /></div>
            <div id="hpAboutBtn" class="btn"><img src='/images/inv.png' /></div>
            <div class='clear'></div>
        </div>
    </div>
</div> 
```

我的CSS如下：

```
@charset "UTF-8";
/* CSS Home*/
html, body { margin:0; padding:0;}
html { min-height:100%;position:relative }
body{ height:100%; font-family: Helvetica, Arial, sans-serif; font-size: 1em; color: #333333t; text-shadow:0px -1px 0px rgba(000,000,000,0.1),0px 1px 0px rgba(255,255,255,1); }
div.clear { clear:both; }
img {height:auto; max-width:100%:}

#hpBody { position:absolute; top:0; bottom:0; left:0; right:0; overflow:hidden;z-index:-1; background:#fc0; }
    #hpHeader { background: url('/images/home_topbk_bar.png') repeat-x; width:100%; }
    #siteLogo { position:absolute; z-index:15;}
    #hpContainer { }

/* tablet landscape */
@media all and (min-width: 960px) and (max-width: 1920px ) {
    #hpBody { background:red; }
        #hpHeader { min-height:210px; }
        #siteLogo { height:302px; width:846px; }
        #hpContainer { width:100%; }
}

@media screen and (min-width: 1920px) {
    #hpBody { background:#ddd; }
    #hpHeader { height:15%; }
        #siteLogo { height:302px; width:846px; }
    #hpContainer { height:85%;}
}

    .home_H1{ font-size: 2.1em; font-weight: bold; }
    .home_H2{ font-size: 1.1em; }

/* CSS Events + Tour + About us + Tenants*/
H1, H2 { 
    font-family: Helvetica, Arial, sans-serif;
    text-shadow:0px -1px 0px rgba(000,000,000,0.1),0px 1px 0px rgba(255,255,255,1);
}
    H1{ font-size: 2.3em; color: #000000f; }
    H2{ font-size: 1.7em; color: #7090c1;  margin-bottom:.5em; } 
```

# shell - Shell 脚本 - C 中的输入和输出文件

> ID：13590666
> 
> 赞同：2
> 
> 时间：2012-11-27T18:27:43.277
> 
> 标签：shell, input, output

```
c_file=$( echo $2 | sed 's/\.c//g')
$c_file < $in_file > tempFile.out 
```

参数 $5 是带我进入 C 程序的路径。我的 C 程序名称的“.c”。例如路径：/..../A3Solution.c

这会让我：

```
A3Solution < input.in > output.out 
```

我得到一个运行时错误：

> A3解决方案：找不到命令

我不知道为什么，但是当我在其他路径中运行其他 C 程序时它可以工作......关于如何更改我的程序的任何想法？我真的没有看到问题。我试过这样做：`cat $5 and ls $5`所以，我知道 $5 的路径是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:59:20.293

当前路径通常不在运行程序时搜索的路径中。例如

```
$ ls -l bla
-rwxr-xr-x 1 me me 17036 13\. Okt 2012  bla
$ bla
bash: bla: command not found
$ 
```

诀窍是告诉你的shell在当前目录中查找，通过前缀`./`

```
$ ./bla
hello world
$ 
```

因为您真的不知道给定的文件是在当前目录中还是在其他目录中（除非您解析为“/”），您可以简单地为当前工作目录添加前缀（但如果您指定它将不起作用绝对路径）或使用类似`realpath`实用程序的工具将任何相对路径规范化为绝对路径。

您也可以使用 bash 的强大功能（如果您正在使用它，请去除尾随的 .c）。就像是：

```
exe_file=$(realpath ${2%.c})
if [ -e "${exe_file}" ]; then
   "${exe_file}" < "${in_file}" > tempFile.out
else
   echo "file '$2' not found or not executable" 1>&2
fi 
```

# php - 不考虑范围访问数组中的数据（全球模拟）PHP

> ID：13590667
> 
> 赞同：0
> 
> 时间：2012-11-27T18:27:48.607
> 
> 标签：php, arrays, global-variables

我在模板顶部插入了一些安全的用户信息（我使用的是 CMS Made Simple，页面由各种组件部分构建，因此代码在不同位置之间拆分）。

我想访问站点中多个点的用户属性数组，想到的解决方案是，在到达点时，将属性存储在 MySQL 中，然后直接从我在站点中的任何位置调用它们.

**我的简单问题：**这是做事的好方法吗？或者是否有一种可接受的方式来获取全局可访问的数组（我听说这些天实际上使用全局数组是不受欢迎的？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:30:16.743

如果会话的用户特定数据，您可以使用会话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:34:57.393

如果您正在访问的变量是用户特定的，那么这正是[`$_SESSION`](http://php.net/manual/en/reserved.variables.session.php)创建变量的目的。不要忘记`session_start()`在访问它的每个脚本的开头进行调用，否则您之前设置的值将不存在（并且您设置的任何值都不会被保存）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:32:01.833

在开发 OOP 应用程序时避免使用全局变量是一个好主意，但这并不意味着严格意义上的 $GLOBALS。

这意味着您应该避免依赖全局范围的设计。

所以不要避免 $GLOBALS 数组，避免需要它。如果你“模拟”它，那实际上可能更糟。

简单的答案：只需创建一个返回数据的函数，或者一个具有返回数据的方法的类。

# asp.net-mvc-3 - 角度路由与 Asp.Net MVC 3 不匹配

> ID：13590668
> 
> 赞同：0
> 
> 时间：2012-11-27T18:27:50.383
> 
> 标签：asp.net-mvc-3, angularjs, angular-routing

我正在尝试在已经存在的 MVC 3 站点中使用 Angular。我已经让我的主要 ngApp 使用第一个加载的项目，但是一旦我添加一个模块并尝试实现`$routeParams`它，路由提供程序似乎开始崩溃。在我的 MVC 3 应用程序中，我有一个`/Article/ReadArticle/key`允许 key 为 null 的有效路由路由，并且我有一个相应的控制器/操作来传递请求的文章。如果`key`为 null 或为空，则提供最新输入的文章。我有另一个发布操作，它做同样的事情，只是它返回一个`JsonResult`而不是一个视图。

我修改了我的视图以排除任何 MVC 构造的模型，因此该操作仅返回本质上是一个包含所有角度模板的 html 页面。角度控制器调用 JsonResult 的 post 操作，一切都很顺利。我根据示例在角度模块中添加了路由，但由于某种原因，它似乎没有捕捉到路由：

```
'use strict';

/* App Module */

angular.module('je', []).
  config(['$routeProvider', function ($routeProvider) {
      $routeProvider.
      when('/Article/ReadArticle/:key', { templateUrl: '/Angular/ArticleView.html', controller: ArticleCtrl }) //.
      //otherwise({ templateUrl: '/Angular/ArticleView.html', controller: ArticleCtrl });
  } ]); 
```

我评论了这个`otherwise`电话。如果我把它留在那里，它会起作用，但只会带来默认文章。手动输入一个有效的路线如`/Article/ReadArticle/Some_Valid_Key`不会产生任何合适`$routeParams`的。注释掉，似乎没有匹配的路线，因此没有加载模板并且页面是空白的。

```
function ArticleCtrl($scope, $routeParams, $http) {
    console.log($routeParams.key);
    $http.post("/Article/GetArticleText", { "textkey": $routeParams.key }).success(function (data) {
        console.log(data);
        $scope.article = data;
    }).
    error(function (data, status) {
        console.log(data);
        console.log("Request failed");
        console.log(status);
    });
} 
```

根据样本，我的期望是此时`$routeParams.key`应该填充`Some_Valid_Key`。显然，我的期望与现实不符，但我缺少什么来获得表现的路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:52:57.610

AngularJS 路由是在 URL 的哈希之后定义的。因此，在您的基本 URL 所在的场景中，`/Article/ReadArticle/key`当前没有定义路由。这就是为什么要遵循您的默认路线（在注释掉该`otherwise`行之前）。为了让 AngularJS 遵循您定义的路线，您的 URL 必须如下所示`http://mysite.com/someurl/#/Article/ReadArticle/Some_Valid_Key`：

# java - 为什么按“y”并输入时不打印任何内容？

> ID：13590677
> 
> 赞同：-2
> 
> 时间：2012-11-27T18:28:25.720
> 
> 标签：java, string, if-statement

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我真的不明白为什么当我写“y”并按回车时下面的程序没有显示任何内容。

```
import java.util.Scanner;

public class desmond {
    public static void main(String[] args){
        String test;
        System.out.println("welcome in our quiz, for continue write y and press enter");
        Scanner scan = new Scanner(System.in);
        test = scan.nextLine();
        if (test == "y") {
            System.out.println("1\. question for you");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:29:02.897

用于`equals()`比较字符串

喜欢

```
test.equals("y") 
```

[更好](https://stackoverflow.com/questions/5712100/interview-java-equals/5712112#5712112)

```
"y".equals(test) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T18:29:10.070

您（通常）需要将字符串与`equals`Java 中的字符串进行比较：

```
if ("y".equals(test)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T18:46:42.803

您可以使用 == 比较字符串吗？是的。100% 的工作时间？不。

当我开始用 java 编程时，我学到的第一件事就是永远不要使用 == 来比较字符串，但是为什么呢？让我们进行技术解释。

String 是一个对象，如果两个字符串具有相同的对象，则方法 equals(Object) 将返回 true。== 运算符仅在两个引用 String 引用指向同一个对象时才返回 true。

当我们创建一个 String 时，实际上是创建了一个字符串池，当我们创建另一个具有相同值的 String 字面量时，如果 JVM 需求在 String 池中已经存在一个具有相同值的 String，如果有的话，你的变量是否指向相同的内存地址。

因此，当您使用“==”测试变量“a”和“b”的相等性时，可能会返回 true。

例子：

```
String a = "abc" / / string pool
String b = "abc"; / * already exists a string with the same content in the pool,
                                  go to the same reference in memory * /
String c = "dda" / / go to a new reference of memory as there is in pool 
```

如果您创建字符串以便在内存中创建一个新对象并使用“==”测试变量 a 和 b 的相等性，则它返回 false，它不指向内存中的同一位置。

```
String d = new String ("abc") / / Create a new object in memory

String a = "abc";
String b = "abc";
String c = "dda";
String d = new String ("abc");

a == b = true
a == c = false
a == d = false
a.equals (d) = true 
```

# solaris - 在日志文件的文件名中包含小时

> ID：13590681
> 
> 赞同：0
> 
> 时间：2012-11-27T18:28:37.880
> 
> 标签：solaris, ksh

我有一个 ksh 脚本，我在其中创建了一个 logFileName，如下所示：

```
logFileName=result_`date +%y%m%d_%k%M%S`.log 
```

这会在大多数情况下产生正确的文件名，如下所示：

```
result_121127_121010.log 
```

但是，在午夜，它会产生以下文件名：

```
result_121127_ 01010.log 
```

关于如何解决这个问题的想法？基本上，我正在寻找除了`%k`在 ksh 中使用 date 命令查找小时之外的其他内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:56:50.170

将 %k 替换为 %H ，因为前者不会用 0 填充单位小时数。

```
logFileName=result_`date +%y%m%d_%H%M%S`.log 
```

或同等的

```
logFileName=result_$(date +%y%m%d_%H%M%S).log 
```

请注意，著名的 Y2K 错误表明最好使用一整年，例如：

```
logFileName=result_$(date +%Y%m%d_%H%M%S).log 
```

# visual-studio-2010 - 在服务器上找不到 Crystal Reports dll 部署 VS2010 应用程序

> ID：13590683
> 
> 赞同：0
> 
> 时间：2012-11-27T18:28:39.970
> 
> 标签：visual-studio-2010, deployment, crystal-reports-2008

我创建了一个小型 c# 应用程序，它打开一个水晶报表，将其保存为 pdf，然后通过电子邮件发送。一切都很好。

我试图将此应用程序部署到具有水晶运行时的服务器上。但是当我尝试在服务器上运行我的应用程序时，它会抛出一个错误，告诉我它找不到 dll 引用。果然，服务器上没有dll。

我在 VS2010 Express 中为 CR2008 开发了应用程序。我尝试运行它时遇到的错误是

“无法加载文件或程序集 'CrystalDecisions.ReportAppServer.CommLayer, Version=11.5.3300.0, Culture=neutral,PublicKeytoken=692fbea5521e1304' 或其依赖项之一。系统找不到指定的文件。”

我想解决这个问题，我需要做的就是引用服务器上的 dll。可惜！服务器没有dll。它确实有程序集，但没有 dll。程序集的版本是 12.0.1100.0，但我不知道如何在我的应用程序中修复版本号。

有没有办法来解决这个问题？对不起，我的问题不是更具体。我在寻找选项和信息，就像我在寻找解决方案一样。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:34:03.710

您是否在项目文件中设置了“复制本地”？参考？这应该在发布时部署依赖项。

# php - php没有从as3接收变量？

> ID：13590685
> 
> 赞同：1
> 
> 时间：2012-11-27T18:28:46.233
> 
> 标签：php, actionscript-3, flash

这是我作为闪光者经历过的最奇怪的事情。php 程序员说我的代码没有传递任何变量（变量名称和电子邮件）。这是as3。我会放 php 但程序员告诉我 php 与它无关，我没有解决上传文件，地址是正确的（当我输入时）

```
texti.visible = false; 

var loader : URLLoader = new URLLoader;
var urlreq:URLRequest = new URLRequest("https://[someadress]/upload.php");
var urlvars:URLVariables = new URLVariables();
loader.dataFormat = URLLoaderDataFormat.VARIABLES;
urlreq.method = URLRequestMethod.POST;    

    //var urlreq:urlreq = new URLRequest("https://localhost/upload/upload.php");

    var imageTypes:FileFilter = new FileFilter("Images (*.jpg, *.jpeg,  *.png)", "*.jpg; *.jpeg; *.gif; *.png");

    var allTypes:Array = new Array(imageTypes);

    var fileRef:FileReference = new FileReference();

    fileRef.addEventListener(Event.SELECT, syncVariables);
    fileRef.addEventListener(Event.COMPLETE, completeHandler);
    fileRef.addEventListener(ProgressEvent.PROGRESS, progressHandler);

    btn_browse.addEventListener(MouseEvent.CLICK, browseBox);
    btn_upload.addEventListener(MouseEvent.CLICK, uploadVars);        

    function browseBox(event:MouseEvent):void {
        fileRef.browse(allTypes);
    }

    function uploadVars(event:MouseEvent):void {            
        urlvars.Name = "somename"; 
        urlvars.Email = "some@someEmail.com"; 
        //urlvars.fb_id = Main.facebook1;
        urlvars.picname = fileRef.name;
        trace(urlvars.Name);
        trace(urlvars.Email);
        loader.load(urlreq);
        fileRef.upload(urlreq);
        btn_upload.visible = true;
    }

    function syncVariables(event:Event):void {
         texti.text = "" + fileRef.name;
         //blocker.visible = false;
         btn_upload.visible = true;         
    }

    function completeHandler(event:Event):void {
        trace("h1");

        var bytestoLoad:Number = loaderInfo.bytesTotal;
        var numberLoaded:Number = loaderInfo.bytesLoaded;
        if (bytestoLoad == numberLoaded)
        {
        gotoAndStop(2);

        trace(fileRef.name);                

        t_status.gotoAndPlay(2);
        btn_upload.removeEventListener(MouseEvent.CLICK, uploadVars);
        btn_browse.removeEventListener(MouseEvent.CLICK, browseBox);

        }   
        else
        {               
            trace("wtf?");              
        }

    }

    function progressHandler(event:ProgressEvent):void {
         trace("inprogress")
    } 
```

任何帮助将不胜感激，因为我已经更改代码中的小东西几个小时了，但仍然没有进展

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:37:26.853

您在调用负载之前忘记了一行代码：

```
urlreq.data = urlvars; 
```

您需要将变量分配给请求。

# git - 使用 sbt 0.11.3 通过 git 在 cloudbees 上部署 scala/lift 应用程序

> ID：13590694
> 
> 赞同：0
> 
> 时间：2012-11-27T18:29:11.587
> 
> 标签：git, scala, sbt, lift, cloudbees

我开始使用 scala 编写的一个小应用程序，并在 cloudbees 上进行提升。目前没有涉及scala，我只想在lift模板的静态文件夹中部署一个网站。我使用 sbt 在 cloudbees 上创建了一个构建作业，但它给出了以下错误：

```
[error] {file:/scratch/jenkins/workspace/igem%20sbt/project/}default-81f689/*:update: 
sbt.ResolveException: unresolved dependency: com.github.siasia#xsbt-web-plugin_2.9.1;0.12.0-0.2.11.1: not found 
```

我可以通过 sbt->package 在我的本地机器上编译应用程序（也从 git 获取）并通过“bees app:deploy”将其部署到 cloudbees。这些文件也可以从 git 的工作区中获得。

我在本地机器上使用 sbt 0.12，在 cloudbees (/opt/sbt/sbt-launch-0.11.3-2.jar) 上使用 0.11.3。那是因为我不知道如何找出 cloudbees 上的最新版本，也不知道如何在 cloudbees 上使用我自己的 sbt 罐子。我也不知道我必须编辑哪些配置文件才能针对 0.11.3 进行调整，或者这毕竟是错误。如果我必须改变它，我还需要知道如何在我的本地机器上降级（OS X -> 使用自制软件）。

这里是完整的错误和我的 build.sbt：[http ://pastebin.com/bwAu1hGr](http://pastebin.com/bwAu1hGr)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:45:24.317

SBT 在插件版本方面非常脆弱。需要为每个 SBT 版本发布每个插件的单独 jar，类似于 Scala 交叉构建。如果你使用不同版本的 SBT 在不同的环境中构建，这意味着你要么需要

*   仅使用为您将使用的每个 SBT 版本发布的插件版本，或
*   根据使用的 SBT 版本，在您的 plugins.sbt 文件中动态选择正确的插件版本。

就个人而言，我只是为您的项目标准化一个特定的 SBT 版本，并将 sbt-launch.jar 文件与引用它的脚本一起添加到您的项目中。我对 Cloudbees 做的不多，但是使用 Jenkins，您可以配置一个 SBT 启动器，其值如下：${WORKSPACE}/sbt-launch.jar。假设 sbt-launch.jar 在你的 git repo 的根目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T16:07:08.717

通过 sbt-plugin 在 CloudBees 上使用任意版本的 sbt 非常容易：

1.  去管理詹金斯
2.  在名为 'project-specific sbt' 的 sbt-plugin 部分添加一个新的 sbt 版本，路径为 'sbt-launch.jar'；此路径将相对于您项目的工作区根目录，并且可以是您想要的任何路径——我有一个 play2 项目，所以我实际上使用 'project/sbt-launch.jar'
3.  将 sbt-launch.jar 的副本放入您的项目中以与 #3 中的路径对齐
4.  重新配置您的项目构建作业以使用 sbt-plugin 下拉列表中的“项目特定 sbt”
5.  推动你的改变

这本质上是对 Dave Whittaker 方法的改进，但纠正了使用 ${WORKSPACE}/sbt-launch.jar 不起作用的问题，因为 ${WORKSPACE} 没有被 Jenkins 取代。

关键的变化是在项目工作区中定义一个到 sbt-launch.jar 的相对路径，因为 Jenkins 从作业工作区的根目录执行构建。

PS谢谢，@dave-whittaker！我用你的答案来解决我自己的构建问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T00:14:27.370

如果您不想使用内置的 SBT，则不必使用 - 您可以使用使用 shell 的构建步骤，并下载所需的版本（如果它尚未缓存在您的工作区中，并使用该版本）一。

使用类似的东西：

```
if [ ! -e $sbt ]
then
    wget $sbt_url 
    #install it
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T08:01:43.167

很不方便。现在有两种解决方法。我成功地尝试了第一个。

**在 plugin.sbt 中选择正确的 sbt 版本**

基于[http://repo1.maven.org/maven2/com/github/siasia/](http://repo1.maven.org/maven2/com/github/siasia/)我找出了每个 sbt 版本的正确依赖项。所以现在我可以在本地机器上运行 0.12.1，在 cloudbees 上使用相同的文件运行 0.11.3。我希望其他版本也是正确的。我想如果我将 scala 版本从 2.9.1 更改为 2.9.2 它可能会再次造成麻烦，因为那时你需要 0.12.*

这是我的 project/plugin.sbt 的样子

```
libraryDependencies <+= sbtVersion(v => v match {
case "0.11.0" => "com.github.siasia" %% "xsbt-web-plugin" % "0.11.0-0.2.8"
case "0.11.1" => "com.github.siasia" %% "xsbt-web-plugin" % "0.11.1-0.2.10"
case "0.11.2" => "com.github.siasia" %% "xsbt-web-plugin" % "0.11.2-0.2.10"
case "0.11.3" => "com.github.siasia" %% "xsbt-web-plugin" % "0.11.3-0.2.11.1"
case "0.12.0" => "com.github.siasia" %% "xsbt-web-plugin" % "0.12.0-0.2.11.1"
case "0.12.1" => "com.github.siasia" %% "xsbt-web-plugin" % "0.12.0-0.2.11.1"
}) 
```

**上传最新的 SBT 插件到 cloudbees**

您还可以通过 WebDav 将文件上传到 privat 文件夹（我认为只有这种方式）：

```
 https://repository-{account-id}.forge.cloudbees.com/private/ 
```

这样你就可以上传 sbt-launch-0.12.jar。从中获取（该模板也可以很好地启动项目）：

```
 https://github.com/lift/lift_25_sbt/tree/master/scala_29/lift_basic 
```

这个我没有测试过：现在你应该在 cloudbees 中配置 sbt。所以登录并：

```
 Builds->Manage Jenkins->Configure System 
```

并在 sbt 部分添加 /private/{account-id}/{sbt-launch-your-version}.jar 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T02:32:49.683

CloudBees 使您可以轻松地将自己的工具放在构建服务器上，即使您不能直接通过 ssh 进入它们。您可以使用 WebDav 将可执行文件上传到安装在每个构建机器上的私有存储库中。您可以使用它来上传更新版本的 SBT，然后从 Jenkins SBT 插件中引用它。

有关设置 WebDav 连接的更多详细信息，请参阅此页面的“私人存储库”部分：[http ://wiki.cloudbees.com/bin/view/DEV/Custom+Build+Tools](http://wiki.cloudbees.com/bin/view/DEV/Custom+Build+Tools)

# django - 将 url 标签迁移到 django 1.5

> ID：13590699
> 
> 赞同：24
> 
> 时间：2012-11-27T18:29:30.940
> 
> 标签：django, django-templates, django-1.5

我正在尝试将旧的 django 应用程序迁移到 django 1.5，不同的 html 文件中有 745 个 url，如下所示：

```
{% url url_name %} 
```

如果我没记错的话，这已被弃用，不能再从 django 1.5 开始使用（如此[处](https://docs.djangoproject.com/en/1.3/releases/1.3/#changes-to-url-and-ssi)所述），我必须将它们全部转换为：

```
{% url 'url_name' %} 
```

有什么想法可以做到这一点而不会发疯吗？也许，某种脚本，我不知道......我无法想象用路径中的替换来做到这一点。

我可能遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-27T20:48:34.177

**注意：**此命令具有破坏性。在运行之前使用版本控制或备份您的模板目录。

您可以使用 sed。从您的模板目录（或目录）运行

```
sed -i -r -e "s#\{% url ([a-zA-Z0-9_.:-]+)#\{% url '\1'#g" * 
```

表达式匹配`{% url [view name]`，因此提供给 url 模板标签的参数将不受影响/不变。

要递归运行它，

```
find . -type f -print0 | xargs -0 sed -i -r -e "s#\{% url ([a-zA-Z0-9_.:-]+)#\{% url '\1'#g" 
```

此 sed 命令假定您的视图名称仅包含字母数字、冒号、破折号、句点和下划线 - 没有其他特殊字符。现在支持命名空间视图。

针对此[Django 1.4 url​​ 模板标签 Gist中的标签进行测试](https://gist.github.com/doubleo2/5624110)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-27T06:34:00.670

[在http://djangosnippets.org/snippets/2905/](http://djangosnippets.org/snippets/2905/)上还有一个带有 python 解决方案的片段

只是一个警告， find 。-type f -print0 将在您的 .git/ 或 .hg/ 目录中查找“隐藏”的文件，并且可能会损坏您的存储库或其他二进制文件。

如果你在 django 中使用通常的约定，你的模板文件以 .html 结尾，你可以更谨慎地搜索：

```
find . -iname '*.html' -type f -print > file.list 
```

首先检查 file.list 以检查哪些文件正在被修改，然后再将其与 sed 命令放在一起

# ios - 具有国际键盘支持的自动大写文本字段

> ID：13590706
> 
> 赞同：0
> 
> 时间：2012-11-27T18:29:49.270
> 
> 标签：ios, uitextfield

到目前为止，我正在尝试将输入到 UITextField 中的所有字符大写（非常适合美国键盘）：

```
self.textField = UITextAutocapitalizationTypeAllCharacters;
...
// delegate
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSRange lowercaseCharRange = [string rangeOfCharacterFromSet:[NSCharacterSet lowercaseLetterCharacterSet]];

    if (lowercaseCharRange.location != NSNotFound) {
        textField.text = [textField.text stringByReplacingCharactersInRange:range
                                                                 withString:[string uppercaseString]];
        return NO;
    }

    return YES;
} 
```

使用诸如中文（拼音）之类的国际键盘时会出现此问题，因为字符的行为方式（以小写形式排列）。是否有这种/方式来检查键盘内部化类型的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T00:38:40.843

跳过检查并始终将文本替换为大写版本会简单得多。 **请注意，我还使用了当前语言环境，以便在转换为大写时会考虑其语言环境**：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    textField.text = [textField.text stringByReplacingCharactersInRange:range
                                                             withString:[string uppercaseStringWithLocale:[NSLocale currentLocale]]];
    return NO;
} 
```

在这种情况下，性能应该不是问题，并且您不需要原始搜索。

# python - 从 Python 列表中删除对象。（问题集问题）。代码没有达到结果

> ID：13590707
> 
> 赞同：0
> 
> 时间：2012-11-27T18:29:47.823
> 
> 标签：python, python-3.x

温克尔森在这里寻找一个非常简单的问题的帮助......我现在已经很忙了，但我想弄清楚我在这个问题上做错了什么:)当然还有其他方法来解决这个问题会很棒！先感谢您！

问题：

* * *

> **除去项目**
> 
> 创建一个函数，该函数接受一个列表和一个值并返回一个列表，其中删除了所有出现的给定值。

很简单吧？当我面对手掌时，我的头会很痛......无论如何，这里有电话。

来电：

* * *

```
>>> remove(['a','b','c','d','e'],'e') 
['a','b','c','d'] 
>>> remove([4,2,7,6,7,8,3,1,3,5],3) 
[4,2,7,6,7,8,1,5] 
>>> remove([4,4,4,4],4) 
[] 
>>> remove([1,2,3,4,5,6,7],'hi') 
[1,2,3,4,5,6,7] 
```

我的代码：

* * *

```
def remove(l,o): #l is list, o is object
    for i in l:
        if i == o: #If the current item is the object to be removed...
            l.remove(o) #Remove the object      
    return l #Finally return the list. 
```

所以......这是问题所在：

* * *

调用：remove([4,4,4,4],4)

应该返回：[]

返回的内容：[4, 4]

正确：错误

* * *

所以...如果有人知道发生了什么，那么如果您要分享您的知识，那就太好了！此外，任何其他解决方法也会很好。如果它们不太模糊，提示也会很棒。无论如何，提前谢谢！- 温克尔森

Ps 我仍然是一个初学者程序员所以请不要对我太苛刻 :P 非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:37:52.887

您的问题是您在更改列表的同时尝试迭代列表。在第一次迭代中：

```
l = [4, 4, 4, 4] 
```

Python 查看 l[0] 并将其删除。

现在名单是：

```
l = [4, 4, 4] 
```

因为它只是做了 l[0]，Python 现在想看看 l[1]。但由于列表已更改，以前位于 l[1] 的值改为位于 l[0]，并被跳过。

一种选择是在你去的时候建立一个新的列表：

```
def remove(l,o):  
    new_list = []  
    for i in l:        
        if i != o:
            new_list.append(i)       
    return new_list 
```

由于这是一种常见的操作，Python 允许您使用“列表推导”做同样的事情，这非常方便：

```
def remove(l,o)
    new_list = [item for item in l if item != o] 
```

（附带说明一下，使用 1 个字母的变量名称通常不是一个好主意。使用“o”和“l”*尤其*糟糕，它们很容易分别被误认为是“0”和“1”。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T18:44:47.707

一次删除一个项目`list.remove()`效率不高，因为每次调用 remove() 时都需要沿列表移动剩余元素。仅使用您想要的元素创建一个新列表效率更高，并且避免了在循环遍历列表时修改列表的问题。

正如您在问题中所做的那样，此变体会修改列表

```
def remove(L, o):
    L[:] = (item for item in L if item != o)
    return L 
```

非就地变体返回一个新列表

```
def remove(L, o):
    return [item for item in L if item != o] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T18:35:01.317

您不应该在遍历其元素时改变列表。[http://unspecified.wordpress.com/2009/02/12/thou-shalt-not-modify-a-list-during-iteration/](http://unspecified.wordpress.com/2009/02/12/thou-shalt-not-modify-a-list-during-iteration/)解释了原因。

使用列表理解创建一个新列表并返回：http: [//docs.python.org/tutorial/datastructures.html#list-comprehensions](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T18:36:00.143

您在迭代列表的同时修改列表。这意味着列表迭代器很可能与底层列表不同步。

开始时，列表如下所示：

```
[4, 4, 4, 4]
 ^-iterator 
```

检查第一个元素时，迭代器已移动到下一个元素：

```
[4, 4, 4, 4]
    ^-iterator 
```

调用时`remove`（请注意，不能保证此行为）：

```
[4, 4, 4, 4]
 ^  ^-iterator
 |
 `this item is removed 
```

调用后`remove`：

```
[4, 4, 4]
    ^-iterator 
```

此外，实施`remove`方面`remove`不太可能获得很多分数。尝试建立一个只包含适当项目的*新列表。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T18:38:45.110

您非常接近，但创建一个新列表可能比仅使用该`remove`函数更好，即

```
def remove(l,o): #l is list, o is object
    newlist = []
    for i in l:
        if i != o: #If the current item is the object to be removed...
            newlist.append(i)      
    return newlist #Finally return the list. 
```

# java - Java中用于序列的正则表达式（5个字母，1个数字，2个字母）

> ID：13590711
> 
> 赞同：-4
> 
> 时间：2012-11-27T18:29:55.417
> 
> 标签：java, regex

我需要一个正则表达式来检查输入字符串是否在这个序列中（5 个字母，1 个数字，2 个字母）例如：ABCDE1FG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:31:24.220

试试下面的正则表达式：

```
[A-Z]{5}[0-9][A-Z]{2} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:31:39.630

这是你的正则表达式

```
"^[a-zA-Z]{5}[0-9][a-zA-Z]{2}$" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:34:04.847

这是表达它的最简单的方式：

```
[A-Z]{5}\d[A-Z]{2} 
```

如果您希望通过“字母”也允许使用小写字母，请添加“不区分大小写”开关：

```
(?i)[A-Z]{5}\d[A-Z]{2} 
```

请注意，对于 java，在编码字符串时必须将反斜杠加倍，`"[A-Z]{5}\\d[A-Z]{2}"`等等

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T18:31:07.963

一个可能的例子：`\\w{5}\\d\\w{2}`

# listview - 片段加载器未在 ListView 中显示数据

> ID：13590716
> 
> 赞同：0
> 
> 时间：2012-11-27T18:30:09.350
> 
> 标签：listview, fragment, loader

我已经实现了自己的加载器并尝试在片段中使用它。

我知道 ContentProvider 代码正在运行，因为我已经使用 LOG 消息对其进行了跟踪。错误必须在我的片段代码中。

比我更有经验的人可以找出故意的错误。

```
 public class StorePickerFragment extends ListFragment implements
 LoaderManager.LoaderCallbacks<Cursor> {

 private SimpleCursorAdapter adapter;

 /** Called when the Fragment is first created. */
 @Override
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
                     Bundle savedInstanceState) {
fillData();
 // Inflate the layout for this fragment

 return inflater.inflate(R.layout.store_list, container, false);
 }

 private void fillData() {

 // Fields from the database (projection)
 // Must include the _id column for the adapter to work
 String[] from = new String[] {StoreTable.COLUMN_ID, StoreTable.COLUMN_NAME };
 // Fields on the UI to which we map
 int[] to = new int[] { R.id.label };

 getLoaderManager().initLoader(0, null, this);
 adapter = new SimpleCursorAdapter(getActivity(), R.layout.store_row, null, from,
 to, 0);

        setListAdapter(adapter);
 }

 // Creates a new loader after the initLoader () call
 @Override
 public Loader<Cursor> onCreateLoader(int id, Bundle args) {
 String[] projection = { StoreTable.COLUMN_ID, StoreTable.COLUMN_NAME };
 CursorLoader cursorLoader = new CursorLoader(getActivity(),
    MyContentProvider.STORE_URI, projection,null,null, StoreTable.COLUMN_NAME);
 return cursorLoader;
 }

 @Override
 public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
 adapter.swapCursor(data);
 }

 @Override
 public void onLoaderReset(Loader<Cursor> loader) {
 // data is not available anymore, delete reference
 adapter.swapCursor(null);
 }

 } 
```

# android - 查找视图的布局类型

> ID：13590720
> 
> 赞同：1
> 
> 时间：2012-11-27T18:30:29.077
> 
> 标签：android, layout, view, expandablelistadapter

我有一个自定义 ExpandableListAdapter 我指定 getGroup(...) 如下：

```
@Override
public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {

    //do stuff
    if(something) {
        if (convertView == null) {
            LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = vi.inflate(R.layout.tasks_list_group_with_child, null);
        }

        TextView taskNameText = (TextView) convertView.findViewById(R.id.tlgwc_task_name);
        //do stuff

    } else {
        if (convertView == null) {
            LayoutInflater vi = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = vi.inflate(R.layout.tasks_list_group_without_child, null);        
        }

        TextView taskNameText = (TextView) convertView.findViewById(R.id.tlgwoc_task_name);
        //do stuff

    }

    return convertView;
} 
```

现在的问题是，当我更改在适配器中使用的数据时，getGroup(...) 方法的参数（被重用的视图对象）“convertView”可能不再具有正确的布局。如何检查它是具有 R.layout.tasks_list_group_without_child 还是 R.layout.tasks_list_group_with_child 布局的视图？

正如 API 所说“convertView：如果可能的话，要重用的旧视图。你应该在使用之前检查这个视图是非空的并且是适当的类型”，但是怎么做？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:40:07.237

您可以将标签附加到视图

`view.setTag( "TAG" );`

并从 convertView 中检索它。

了解更多信息：[这里](http://developer.android.com/reference/android/view/View.html#Tags)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:51:43.500

如果您使用 BaseExpandableListAdapter 您可以使用视图类型，因此在您的情况下，组必须：
- 覆盖 getGroupTypeCount 以返回 2 或更多（[1](http://developer.android.com/reference/android/widget/BaseExpandableListAdapter.html#getGroupTypeCount%28%29)）
- 覆盖 getGroupType 以为您需要的每个不同布局返回不同的数字（[2](http://developer.android.com/reference/android/widget/BaseExpandableListAdapter.html#getGroupType%28int%29)）
- 然后当你调用 getGroupType 来了解视图的类型时，如果 convertView 不为空，它上面的视图将是你想要的类型的视图，因为 android 使用它来跟踪你定义的不同类型的视图并回收您需要的相同类型的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:33:47.583

执行此操作的“正确”方法是使用 nininho 提到的 getGroupTypeCount 技术。但是，如果您想要一种快速而肮脏的方式来执行此操作，则可以通过为 R.layout.tasks_list_group_with_child 和 R.layout.tasks_list_group_without_child 设置一个布局来实现相同的效果，但使某些元素在一种情况下消失而在另一种情况下可见。

# jquery - Yii 自动完成依赖于另一个字段

> ID：13590721
> 
> 赞同：1
> 
> 时间：2012-11-27T18:30:34.813
> 
> 标签：jquery, autocomplete, yii

我正在尝试为两个输入字段自动完成：City 和 locality。我希望本地提示基于 City 字段中的值：这是我拥有的当前代码：

```
 $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
                                 'name'=>'Address[locality]',
                                 'value'=>$Address->locality,
                                 'source'=>CController::createUrl('site/suggestLocation'),
                                 'options'=>array(
                                     'minLength'=>'2',
                                     'focus'=>'js:function( event, ui ) {
                                      $( "#Users_locality" ).val( ui.item.label );
                               return false;
                              }',
                                     'select'=>'js:function( event, ui ) {$("#Users_locality").val( ui.item.label );$("#User_church").val( ui.item.value ); return false; }',
                                 ),
                                 'htmlOptions'=>array(
                                     'class' => 'login_textbox', 'autocomplete'=>'off',
                                 ),
                            )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:21:18.820

在`focus`javascript 事件中，您应该在源 url 中添加一个参数 city ，其中包含用户填写的城市值。

然后在控制器的“actionSuggestLocation”方法中处理这个参数：

*   检查参数是否存在
*   如果仅建议给定城市中的位置
*   如果不是，则显示所有位置，例如

# asp.net-mvc - MVC4：第一个控制器/操作上的 Windows 身份验证

> ID：13590725
> 
> 赞同：1
> 
> 时间：2012-11-27T18:30:46.917
> 
> 标签：asp.net-mvc, asp.net-mvc-4, windows-authentication

我为这个 Windows-Integrated MVC4 网站设置了一个全局授权：

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
        filters.Add(new System.Web.Mvc.AuthorizeAttribute());
    } 
```

默认控制器是一个简单的欢迎页面，IE8 要求输入用户名密码。问题是，无论使用什么用户名/密码登录，在 4 次尝试后都会失败，并出现 HTTP 错误 401.0 - 未经授权。

只有当我将第一个默认控制器设置为 [AllowAnonymous] 时，它才会让我进入，这样当我导航到另一个操作时，提示的用户名/密码才能工作。

就像网站必须“热身”一样？

问题：如何设置**默认**控制器/操作以要求**并接受**用户名/密码？

![在此处输入图像描述](../Images/6031b00eb1231a3fce2446e9615fcc1d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:39:12.280

您可以添加`[Authorize]`为欢迎页面的属性。只要用户具有有效的网络凭据，就不应提示输入用户名/密码。

# reportviewer - 我应该按照哪些步骤将使用 ReportViewer 控件的 .rdlc 报告部署到服务器中

> ID：13590730
> 
> 赞同：1
> 
> 时间：2012-11-27T18:31:11.897
> 
> 标签：reportviewer

我正在尝试将在 Web 应用程序中使用 ReportViewer 控件的 .rdlc 报告部署到服务器中。

使用 Visual Studio Development Server 在我的本地计算机上一切正常，但我在服务器中收到 500 错误。部署 .rdlc 报告需要遵循的任何标准步骤？我正在使用 IIS 7.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:55:33.610

您必须将可再发行组件安装到您的服务器上

[http://www.microsoft.com/en-us/download/details.aspx?id=6442](http://www.microsoft.com/en-us/download/details.aspx?id=6442)

# sorting - 按方案中对的第二个元素对对列表进行排序

> ID：13590732
> 
> 赞同：1
> 
> 时间：2012-11-27T18:31:28.570
> 
> 标签：sorting, scheme

我在方案中有一个程序，它给了我一个配对列表，我需要按配对的第二个元素对这个列表进行降序排序。像这样：

```
((1 . 1) (2 . 3) (3 . 2)) --> ((2 . 3) (3 . 2) (1 . 1))
((1 . 1) (x . 3) (2 . 1) (3 . 1)) --> ((x . 3) (1 . 1) (2 . 1) (3 . 1))
((1 . 3) (3 . 4) (2 . 2)) --> ((3 . 4) (1 . 3) (2 . 2)) 
```

我不知道我应该如何使用排序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T18:37:15.413

只需使用内置[`sort`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/private/list..rkt%29._sort%29%29)程序：

```
(define (sort-desc-by-second lst)
  (sort lst
        (lambda (x y) (> (cdr x) (cdr y)))))

(sort-desc-by-second '((1 . 1) (2 . 3) (3 . 2)))
=> '((2 . 3) (3 . 2) (1 . 1)) 
```

这里的诀窍是作为第二个参数传递给`sort`适当的比较过程。

# c - 使用 GCC 的 C 语言中的 Printf long long int？

> ID：13590735
> 
> 赞同：68
> 
> 时间：2012-11-27T18:31:40.113
> 
> 标签：c, gcc, printf, c99

如何使用 GCC printf`long long int`以及`unsigned long long int`在 C99 中？

我已经搜索了其他建议使用的帖子，`%lld`但它给出了这些警告：

> 警告#1：格式为 [-Wformat]| 的未知转换类型字符“l”|
> 警告#2：格式参数过多 [-Wformat-extra-args]|

对于以下尝试：

```
#include <stdio.h>

int main()
{
   long long int x = 0;
   unsigned long long int y = 0;
   printf("%lld\n", x);
   printf("%llu\n", y);
} 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-27T18:36:34.803

如果您在 Windows 上使用 mingw，gcc 使用 win32 运行时，其中 printf 需要`%I64d`64 位整数。（并且`%I64u`对于一个无符号的 64 位整数）

对于大多数其他`%lld`用于打印 long long 的平台。（`%llu`如果它没有签名）。这是在 C99 中标准化的。

gcc 没有提供完整的 C 运行时，它依赖于它运行的平台 - 所以一般情况是您需要查阅特定平台的文档 - 独立于 gcc。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-04-09T18:40:45.580

对于可移植代码，可以使用[inttypes.h中的宏。](https://en.cppreference.com/w/c/types/integer)它们扩展到平台的正确的。

例如对于 64 位整数，`PRId64`可以使用宏。

```
int64_t n = 7;
printf("n is %" PRId64 "\n", n); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T20:55:04.843

尝试更新您的编译器，我在带有 MinGW 的 Windows 7 Starter x86 上使用 GCC 4.7，它在 C99 和 C11 中使用相同的选项编译得很好。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-07-28T11:39:53.673

您可以尝试设置`code::block`，有一个编译器...，然后您在C模式下选择。

![在此处输入图像描述](../Images/eb72911f3f2c24af8c4d40483329787c.png)

# twilio - 使用 Twilio 代表我自动执行呼叫

> ID：13590736
> 
> 赞同：1
> 
> 时间：2012-11-27T18:31:43.953
> 
> 标签：twilio

我想让 Twilio 代表我自动进行语音呼叫，直到结束方接听（通常是忙音）。结束方成功接听后，我希望 Twilio 自动拨打我的电话并将我连接到该电话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T22:31:22.333

Twilio 可以做到这一点。您可以使用他们的[REST API](https://www.twilio.com/docs/api/rest)发起对所需号码的呼叫。

您将进行类似于以下的 REST API 调用：

```
POST /2010-04-01/Accounts/AC30947.../Calls.json
From=YOUR_TELEPHONE_NUMBER&To=RECIPIENT_NUMBER&Url=http://www.myapp.com/myhandler.php& IfMachine=true 
```

该参数`IfMachine=true`将告诉 Twilio 将参数：传递给您指定的 URL：`AnsweredBy`这将是：

*   人类
*   机器

在您的 myhandler.php 文件中，您将拥有 TwiML（Twilio 标记语言）和一些 PHP：

**处理程序.php**

```
<?xml version="1.0" encoding="UTF-8"?>
<Response>
    <?php
    if($_GET['AnsweredBy'] == 'human'){
    ?>
    <Say>Hi! We are going to connect you to... YOUR NAME</Say>
    <Dial>415-123-4567</Dial>
    <?php
    }else{
        // There was no answer - so we just hangup.
    ?>
    <Hangup/>
    <?php
    }
    ?>
</Response> 
```

# git - 在 git 中显示未提交合并的父级

> ID：13590740
> 
> 赞同：5
> 
> 时间：2012-11-27T18:31:50.520
> 
> 标签：git

如何在 git 中查看未提交合并的父级？我可以通过这样做看到一个父母，`git log -1`但我如何看到另一位父母？

这在 Mercurial 中很容易做到：

```
$ hg parents
changeset:   2:b65656dbfff6
tag:         tip
parent:      0:1806d848df54
user:        Stephen Rasku 
date:        Tue Nov 27 10:14:31 2012 -0800
summary:     c

changeset:   1:9aaa22944f41
user:        Stephen Rasku 
date:        Tue Nov 27 10:14:01 2012 -0800
summary:     b 
```

git中有什么等价的吗？我知道您可以在 git 中看到已提交合并的父级。这专门用于查看未提交合并的父级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:58:21.923

未提交合并的源存储在`.git/MERGE_HEAD`. 如果您正在执行章鱼合并，您将在此文件中有多个提交 ID，以换行符分隔。合并的目标当然是`HEAD`.

如果您想要详细的输出，类似于您从 Mercurial 提供的示例，您可以将其输入`git log`，如您所述。编写一个 shell 脚本来处理这个可能是最简单的。

如果您要命名此脚本`git-parents`并将其放置在您的路径中，您可以简单地运行`git parents`以获得与您描述的类似的体验：

```
#!/bin/sh
git --no-pager log -1

WORKDIR=`git rev-parse --show-toplevel`
if [ -f "${WORKDIR}/.git/MERGE_HEAD" ]; then
    for a in `cat "${WORKDIR}/.git/MERGE_HEAD" | xargs` ; do
        git --no-pager log -1 $a
    done
fi 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-27T18:57:18.920

我没有回购可以在这里尝试，但这不起作用吗？

```
$ git show HEAD^ # shows first parent
$ git show HEAD^2 # shows second parent
$ git show HEAD^3 # and so on... 
```

你需要给*所有*的父母看，不管有多少？我想你可以做一些脚本`git log -1 --parents`或类似的东西。

# javascript - 在three.js中创建具有矩形底的圆锥几何？

> ID：13590745
> 
> 赞同：3
> 
> 时间：2012-11-27T18:32:17.470
> 
> 标签：javascript, three.js

我想在 three.js 中创建具有矩形底座的锥形几何体。我怎么能那样做？

我在这里提供图像，以便我能理解我在说什么。

![在此处输入图像描述](../Images/3d61f2967bdd45c0def432c7d90e8631.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T19:33:14.437

具有方形底的圆锥是具有 4 个边且底半径之一等于 0 的圆柱的特定情况。

您可以使用以下方法创建通用圆柱体：

```
THREE.CylinderGeometry(radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded) 
```

一个具体的例子是：

```
THREE.CylinderGeometry(0, 30, 80, 4, 1, true); 
```

# jquery - 通过 jquery ajax 使用用户名和密码进行身份验证

> ID：13590747
> 
> 赞同：0
> 
> 时间：2012-11-27T18:32:20.537
> 
> 标签：jquery, ajax, api, jsonp

有没有人对为什么我仍然收到以下代码块的 403 错误有任何建议。

```
$.ajax({
    url: "https://api.bitbucket.org/1.0/repositories/jeffreycwitt/privaterepository/tags",
    dataType: "jsonp",
    password: "password",
    username: "username",
    crossDomain: true,
    success: function
      (returndata){
        $.each(returndata, function(key, value){
          console.log(key)
    });
}); 
```

我正在尝试使用他们的 api 从托管在 bitbucket 上的私有存储库中检索信息。以下代码适用于公共存储库。但是，尽管我使用 jquery 设置“密钥”传递了正确的用户名和密码，但我无法获得在私有存储库上进行身份验证的请求。

我的代码有问题还是 bitbucket 需要澄清他们希望如何接收用户名和密码值。（我已经直接联系了他们，他们只会帮助我通过“curl”获得访问权限——我可以这样做：

```
curl --user username:password https://api.bitbucket.org/1.0/repositories/jeffreycwitt/privaterepository/tags 
```

但这在我尝试通过 ajax 访问信息时无济于事。有什么建议么？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:24:42.803

我认为答案是需要一个 Authorization Header，这是 jquery 和 jsonp 无法做到的。

请参阅此链接了解我如何使用 php 脚本解决问题：stackoverflow.com/a/13612654/731085

# python - 在 Python 中使用 BOM 字符读取 Unicode 文件数据

> ID：13590749
> 
> 赞同：58
> 
> 时间：2012-11-27T18:32:28.763
> 
> 标签：python, unicode

我正在使用 Python 阅读一系列源代码文件并遇到 unicode BOM 错误。这是我的代码：

```
bytes = min(32, os.path.getsize(filename))
raw = open(filename, 'rb').read(bytes)
result = chardet.detect(raw)
encoding = result['encoding']

infile = open(filename, mode, encoding=encoding)
data = infile.read()
infile.close()

print(data) 
```

如您所见，我正在使用 检测编码`chardet`，然后读取内存中的文件并尝试打印它。print 语句在包含 BOM 的 Unicode 文件上失败，并出现以下错误：

> UnicodeEncodeError：“charmap”编解码器无法对位置 0-2 中的字符进行编码：
> 字符映射到 <undefined>

我猜它正在尝试使用默认字符集解码 BOM，但它失败了。如何从字符串中删除 BOM 以防止这种情况发生？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2017-06-15T17:50:28.097

没有理由检查 BOM 是否存在`utf-8-sig`，为您管理它并且行为`utf-8`与 BOM 不存在完全一样：

```
# Standard UTF-8 without BOM
>>> b'hello'.decode('utf-8')
'hello'
>>> b'hello'.decode('utf-8-sig')
'hello'

# BOM encoded UTF-8
>>> b'\xef\xbb\xbfhello'.decode('utf-8')
'\ufeffhello'
>>> b'\xef\xbb\xbfhello'.decode('utf-8-sig')
'hello' 
```

在上面的示例中，您可以看到`utf-8-sig`无论 BOM 是否存在，都可以正确解码给定的字符串。如果您认为您正在阅读的文件中可能存在 BOM 字符的可能性很小，请使用`utf-8-sig`而不用担心它

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-11-27T19:16:19.647

解码 UTF-16 而非 UTF-8 时应自动去除 BOM 字符，除非您明确使用`utf-8-sig`编码。你可以尝试这样的事情：

```
import io
import chardet
import codecs

bytes = min(32, os.path.getsize(filename))
raw = open(filename, 'rb').read(bytes)

if raw.startswith(codecs.BOM_UTF8):
    encoding = 'utf-8-sig'
else:
    result = chardet.detect(raw)
    encoding = result['encoding']

infile = io.open(filename, mode, encoding=encoding)
data = infile.read()
infile.close()

print(data) 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-06-23T16:14:18.873

我根据 Chewie 的回答编写了一个漂亮的基于 BOM 的检测器。在数据可以是已知的本地编码或带有 BOM 的 Unicode（这是文本编辑器通常产生的）的常见用例中就足够了。更重要的是，不像`chardet`，它不做任何随机猜测，所以它给出了可预测的结果：

```
def detect_by_bom(path, default):
    with open(path, 'rb') as f:
        raw = f.read(4)    # will read less if the file is smaller
    # BOM_UTF32_LE's start is equal to BOM_UTF16_LE so need to try the former first
    for enc, boms in \
            ('utf-8-sig', (codecs.BOM_UTF8,)), \
            ('utf-32', (codecs.BOM_UTF32_LE, codecs.BOM_UTF32_BE)), \
            ('utf-16', (codecs.BOM_UTF16_LE, codecs.BOM_UTF16_BE)):
        if any(raw.startswith(bom) for bom in boms):
            return enc
    return default 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-09-25T04:18:07.910

[`chardet`](https://github.com/chardet/chardet/blob/3bf910a14fe05f26597cc9495b42473e64215d5d/chardet/universaldetector.py#L119-L149)从[2014 年 10 月 7 日发布的 2.3.0 版本](https://github.com/chardet/chardet/commit/0f9030139ceeaa4c3bf590de299fe84a5895c218)[开始自动检测 BOM_UTF8](https://github.com/chardet/chardet/blob/3bf910a14fe05f26597cc9495b42473e64215d5d/chardet/universaldetector.py#L119-L149)：

```
#!/usr/bin/env python
import chardet # $ pip install chardet

# detect file encoding
with open(filename, 'rb') as file:
    raw = file.read(32) # at most 32 bytes are returned
    encoding = chardet.detect(raw)['encoding']

with open(filename, encoding=encoding) as file:
    text = file.read()
print(text) 
```

注意：`chardet`可能会返回`'UTF-XXLE'`,`'UTF-XXBE'`将 BOM 留在文本中的编码。`'LE'`,`'BE'`应该被剥离以避免它 - 尽管此时更容易自己检测 BOM，例如，如[@ivan_pozdeev 的回答](https://stackoverflow.com/a/24370596/4279)。

要避免`UnicodeEncodeError`将 Unicode 文本打印到 Windows 控制台，请参阅[Python、Unicode 和 Windows 控制台](https://stackoverflow.com/a/32176732/4279)。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-04-29T23:41:55.087

我发现其他答案过于复杂。有一种更简单的方法，不需要下降到二进制文件 I/O 的低级习惯用法，不依赖`chardet`不属于 Python 标准库的字符集启发式 ( )，也不需要一种罕见的替代编码签名（`utf-8-sig`与 common 相比`utf-8`），似乎在 UTF-16 系列中没有类似物。

我发现的最简单的方法是处理 Unicode 中的 BOM 字符，并让编解码器完成繁重的工作。只有一个 Unicode[字节顺序标记](https://en.wikipedia.org/wiki/Byte_order_mark#UTF-16)，因此一旦将数据转换为 Unicode 字符，确定它是否存在和/或添加/删除它很容易。要读取具有可能 BOM 的文件：

```
BOM = '\ufeff'
with open(filepath, mode='r', encoding='utf-8') as f:
    text = f.read()
    if text.startswith(BOM):
        text = text[1:] 
```

这适用于所有有趣的 UTF 编解码器（例如`utf-8`, `utf-16le`, `utf-16be`, ...），不需要额外的模块，也不需要进入二进制文件处理或特定`codec`常量。

要编写 BOM：

```
text_with_BOM = text if text.startswith(BOM) else BOM + text
with open(filepath, mode='w', encoding='utf-16be') as f:
    f.write(text_with_BOM) 
```

这适用于任何编码。UTF-16 大端只是一个例子。

顺便说一句，这不是解雇`chardet`。当您不知道文件使用什么编码时，它会有所帮助。添加/删除 BOM 不需要它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-24T22:28:56.617

@ivan_pozdeev 对字符串/异常（而不是文件）的回答的变体。我正在处理填充在 python 异常中的 unicode HTML 内容（请参阅[http://bugs.python.org/issue2517](http://bugs.python.org/issue2517)）

```
def detect_encoding(bytes_str):
  for enc, boms in \
      ('utf-8-sig',(codecs.BOM_UTF8,)),\
      ('utf-16',(codecs.BOM_UTF16_LE,codecs.BOM_UTF16_BE)),\
      ('utf-32',(codecs.BOM_UTF32_LE,codecs.BOM_UTF32_BE)):
    if (any(bytes_str.startswith(bom) for bom in boms): return enc
  return 'utf-8' # default

def safe_exc_to_str(exc):
  try:
    return str(exc)
  except UnicodeEncodeError:
    return unicode(exc).encode(detect_encoding(exc.content)) 
```

或者，这个更简单的代码能够毫不费力地删除非 ascii 字符：

```
def just_ascii(str):
  return unicode(str).encode('ascii', 'ignore') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-16T11:12:20.653

如果您想编辑文件，您将想知道使用了哪个 BOM。此版本的@ivan_pozdeev 答案返回编码和可选 BOM：

```
def encoding_by_bom(path, default='utf-8') -> Tuple[str, Optional[bytes]]:
    """Adapted from https://stackoverflow.com/questions/13590749/reading-unicode-file-data-with-bom-chars-in-python/24370596#24370596 """

    with open(path, 'rb') as f:
        raw = f.read(4)    # will read less if the file is smaller
    # BOM_UTF32_LE's start is equal to BOM_UTF16_LE so need to try the former first
    for enc, boms in \
            ('utf-8-sig', (codecs.BOM_UTF8,)), \
            ('utf-32', (codecs.BOM_UTF32_LE, codecs.BOM_UTF32_BE)), \
            ('utf-16', (codecs.BOM_UTF16_LE, codecs.BOM_UTF16_BE)):
        for bom in boms:
            if raw.startswith(bom):
                return enc, bom
    return default, None 
```

# c# - 如何使用 iTextSharp c# 将 FDF 写入 PDF

> ID：13590750
> 
> 赞同：1
> 
> 时间：2012-11-27T18:32:30.570
> 
> 标签：c#, pdf, itextsharp, fdf

我有这个例子以编程方式填充 FDF 并将其可视化。

```
private readonly string pdfFormFileName = "PDFForm.pdf";

protected void OpenPDF_Click(object sender, EventArgs e)
{
    Response.Clear();
    Response.ContentType = "application/vnd.fdf";

    FdfWriter fdfWriter = new FdfWriter();

    fdfWriter.File = GetAbsolutePath() + pdfFormFileName;

    fdfWriter.SetFieldAsName("txtFirstName", FirstName.Text);
    fdfWriter.SetFieldAsName("txtLastName", LastName.Text);

    Response.AddHeader("Content-disposition", "inline; filename=FlatPDFForm.fdf");        
    fdfWriter.WriteTo(Response.OutputStream);        
    Response.End();
} 
```

我需要将其保存到文件中，而不是显示文件。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:16:09.680

我找到了解决方案！

```
string newFile = Server.MapPath("~/") + "ModF23_Final.pdf";
string pdfTemplate = Server.MapPath("~/") + "ModF23.pdf";

PdfReader pdfReader = new PdfReader(pdfTemplate);
PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileStream(newFile, FileMode.Create));
AcroFields pdfFormFields = pdfStamper.AcroFields;
pdfFormFields.SetField("2", FirstName.Text);
pdfFormFields.SetField("2-1", LastName.Text);
pdfStamper.FormFlattening = true;
pdfStamper.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:50:50.510

安德里亚你能尝试使用这行代码吗

```
Response.ClearHeaders();
Response.ContentType = "application/vnd.fdf";
Response.Clear();
Response.AppendHeader("Content-Disposition", "attachment;Filename=FlatPDFForm.fdf");
Response.TransmitFile("FlatPDFForm.fdf");
Response.End(); 
```

注释掉这一行 **fdfWriter.WriteTo(Response.OutputStream);**

添加了正确的 ContentType

# android - 如何在我的布局中显示画布？

> ID：13590751
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:32:31.973
> 
> 标签：android, layout, android-canvas

你知道吗，如何在这里显示画布： ![在此处输入图像描述](../Images/2ae4d8edc5dffbcc30ba3d90f7412ad2.png)

我应该在这里放什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:37:08.707

如果您想使用 onDraw 方法直接在画布上绘图，只需创建一个扩展 View 的新类并在那里进行绘图。
在 xml 中，您使用类的全名（包括包）将您的类作为布局中的一个项目。

例子：

```
<com.example.MyCanvas
    android:layoutWidth="match_parent"
    android:layoutHeight="match_parent"
/> 
```

然后在您的项目中，您在包 com.example 上有 MyCanvas 类，它扩展了 View 并覆盖 onDraw() ，您有一个画布并可以在其上绘制任何您想要的东西。

# git - 为什么不 git 版本目录？

> ID：13590753
> 
> 赞同：9
> 
> 时间：2012-11-27T18:32:34.797
> 
> 标签：git

我很清楚 git 不适用于空目录（这里是更流行的 git 问题之一），但我想问是否有特定的理由或理由（如果可能的话是官方的）不跟踪目录。

我问是因为在某些情况下，目录本身可以拥有有意义的元数据。例如，如果使用粘性模式，目录的文件模式可能很重要。目录为空这一事实可能对应用程序很重要。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T19:10:49.290

没有官方的理由。[Git FAQ](https://git.wiki.kernel.org/index.php/GitFaq#Can_I_add_empty_directories.3F)简单地指出：

> 没有人有足够的能力进行更改以允许空目录已经足够关心这种情况来补救它

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T18:38:25.267

Git 跟踪内容，文件夹/目录不是内容。尽管您是对的，但某些元数据可能对您来说很有趣。在这种情况下，建议将`.gitignore`文件或其他一些*无意义*的文件添加到目录中，以提供 git 可以识别的内容。

请参阅[如何将空目录添加到 Git 存储库？](https://stackoverflow.com/questions/115983/how-do-i-add-an-empty-directory-to-a-git-repository)

这正是 Git 设计的工作方式。

在我曾经做过的一些 Web 项目中，我需要一个用于我的 php 的日志目录，这当然也忽略了 .log 文件，所以本质上我有一个空的日志目录，由于我的 vhost 设置，Apache 需要它才能正确运行。

在这种情况下，我添加了一个 readme.txt，里面什么都没有。

我确定您已经在另一个线程上遇到过这个答案，仍然值得一个链接：[https ://stackoverflow.com/a/115992/662605](https://stackoverflow.com/a/115992/662605)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-27T19:25:50.180

Git 是“愚蠢的内容跟踪器”。它的大部分设计都是基于“愚蠢”；也就是说，有一个相当简单（因此是通用的）内部表示，并依靠围绕它构建的工具来做任何花哨的事情。它也是为跟踪源代码而设计的；它的设计目的不是让您可以跟踪具有任意权限的任意目录树，因为这会使您陷入与跟踪源代码无关的一大堆问题（您是否存储用户和组 ID？名称？硬链接？xattrs ? 资源分叉? 等等)。

愚蠢的一部分只是跟踪文件的内容。它确实存储了一些元数据，这些元数据对于在 Unix 环境中处理源代码至关重要：符号链接和可执行位。人们签入的脚本足够多，您想要跟踪可执行位，因为否则每个人都必须实现它。但除了这两条元数据之外，Git 只跟踪文件的内容及其名称。

如果您有除此之外的用例，您应该创建自己的[瓷器](http://git-scm.com/book/ch9-1.html)，包装现有的瓷器，或使用 Git 提供的扩展点，如[钩子](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)和[属性](http://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)。

如果您想要更丰富地跟踪权限和目录，我建议您使用像[etckeeper](http://joeyh.name/code/etckeeper/)这样的包装器。

# mysql - mySQL - 多个 LEFT JOIN 需要针对特殊的 null 出现进行调整

> ID：13590754
> 
> 赞同：0
> 
> 时间：2012-11-27T18:32:35.347
> 
> 标签：mysql

**在 sub_category_id 为 NULL 的情况下，我也尝试选择 report_id 和 report_name**

示例数据：

```
table research_category

category_id | category name
---------------------------
1           | category_one
2           | category_two
3           | category_three

table research_sub_category

sub_category_id | category_id | sub_category name
-------------------------------------------------
1               | 1           | sub_category_one
2               | 3           | sub_category_two

table research_report_detail

category_id | sub_category_id | report_id | report_name
-----------------------------------------------------------------------------
1           | 1               | 1         | Awesome Report
2           | NULL            | 2         | Awesome? We'll Never Know, Report
3           | 2               | 3         | Another Boring Report, yo 
```

**下面的查询返回我想要的结构，但我似乎无法返回report_id | sub_category_id 为 NULL 的情况的报告名称。**

```
SELECT c.category_id, c.category_name, s.sub_category_id, s.sub_category_name, r.report_id, r.report_name
FROM research_category AS c
LEFT JOIN research_sub_category AS s
ON c.category_id = s.category_id
LEFT JOIN research_report_detail AS r
ON s.sub_category_id = r.sub_category_id
LEFT JOIN research_report_detail AS r2
ON c.category_id = r2.category_id
AND r2.sub_category_id IS NULL 
```

**返回数据：**

```
category_id|category_name |sub_category_id|sub_category_name|report_id|report_name
-------------------------------------------------------------------------------------
1          |category_one  |1              |sub_category_one |1        |Awesome report
2          |category_two  |NULL           |NULL             |NULL     |NULL
3          |category_three|2              |sub_category_two |3        |Boring Report 
```

我究竟做错了什么？

**编辑：更改了以下内容**

```
AND r2.sub_category_id = NULL 
```

至

```
AND r2.sub_category_id IS NULL 
```

但是得到了同样的结果......

**双重编辑：向数据添加了另一个报告以使问题更加清晰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:41:08.333

尝试使用“is null”我认为问题在于您正在尝试使用等号（=）。Null 不存在，因此您无法检查它是否等于某个值。

查看此链接[http://www.w3schools.com/sql/sql_null_values.asp](http://www.w3schools.com/sql/sql_null_values.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:42:26.873

改变

```
SELECT c.category_id, ... r.report_id, r.report_name 
```

至

```
SELECT c.category_id, ... r2.report_id, r2.report_name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T19:06:35.650

此查询应与更新后的问题匹配：您不应使用两个 research_report_detail 实例，而应仅使用一个实例，当且仅当给定 sub_category_id（非空）时，将其连接到 research_sub_category 的连接条件。

```
SELECT c.category_id, c.category_name,
       s.sub_category_id, s.sub_category_name,
       r.report_id, r.report_name
FROM research_category AS c
LEFT JOIN research_sub_category AS s
ON s.category_id = c.category_id
LEFT JOIN research_report_detail AS r
ON r.category_id = c.category_id
AND (r.sub_category_id = s.sub_category_id OR r.sub_category_id IS NULL) 
```

# php - EventSource 在第一条消息后断开连接

> ID：13590755
> 
> 赞同：1
> 
> 时间：2012-11-27T18:32:42.113
> 
> 标签：php, http, server-sent-events

对`EventSource`行为有点困惑。

它连接良好并保持连接，直到收到第一条消息。

当我发送一条`data: something\n\n`消息时，连接被断开并创建了一个新连接。

使用`Content-Type: text/event-stream`标头和连接被识别为事件流，并且检查器显示`pending`状态。

正如我所说，在我发送第一条消息之前，一切正常。

在此之后，连接被中断并创建了新的连接，并且消息没有发送到浏览器（至少页面没有按应有的方式更新）。

我的服务器和客户端代码与此处完全相同：http: [//www.html5rocks.com/en/tutorials/eventsource/basics/](http://www.html5rocks.com/en/tutorials/eventsource/basics/)

这发生在任何浏览器上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:05:08.617

确保您的服务器代码没有发送`Transfer-Encoding`标头。

或者如果它发送它，请确保它没有设置为分块。

**`EventSource`在分块时表现奇怪`Transfer-Encoding`**

您可以删除`Transfer-Encoding`标题或将其设置为`identity`.

如果这没有帮助，请确保您的 Web 服务器没有将该标头设置为分块。

如果是这样并且您无法更新其配置，请确保您的代码将标`identity`头设置为（您的代码设置的标头将覆盖 Web 服务器设置的标头）。

如果您只是删除代码中的标头，浏览器将使用 Web 服务器设置的一组，
因此请确保将其设置为`identity`而不是删除。

# windows-8 - 如何配置客户端 Hyper-V（在 Windows 8 上）以在没有网络连接的情况下连接到主机和其他 VM？

> ID：13590758
> 
> 赞同：0
> 
> 时间：2012-11-27T18:32:46.370
> 
> 标签：windows-8, hyper-v

我正在尝试为不在 Windows 8 上运行的应用程序开发一个接口。因此，我创建了一个运行 Windows 7 的 VM，运行集成服务和另一个运行在 Windows 8 主机上的服务。

我为 Hyper-V 配置了三个虚拟网络方案：无线、共享和内部。无线允许所有虚拟机和主机连接到无线网络（外部），共享让虚拟机通过 VPN （内部）通过主机连接，内部在主机内创建一个虚拟机无法访问网络的网络（私人的）。

当我处于无线（外部）模式并且有无线网络要连接时，一切正常，就好像我正在使用无线网络上的物理 PC 进行测试一样。但是，今天我遇到了一种情况，即我没有连接到网络但仍想进行一些测试，但我无法让 VM 看到主机，反之亦然。这个场景在我切换到 Hyper-V 之前使用的 VMware 上创建非常简单......

有没有人设法让客户端 Hyper-V 虚拟机和主机在没有网络的情况下进行通信？你能指导我如何设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T04:06:21.277

可能想试试这个。我遇到了与您类似的问题，所有迹象都表明该特定解决方案有效，但对我而言并非如此。不过可能对你有帮助。

[http://blogs.technet.com/b/doxley/archive/2008/07/07/disconnecting-hyper-v.aspx](http://blogs.technet.com/b/doxley/archive/2008/07/07/disconnecting-hyper-v.aspx)

DID 最终为我工作的解决方案是： [http ://www.elmajdal.net/Win2k8/Enabling_Wireless_Network_For_Hyper_V_Virtual_Machine.aspx](http://www.elmajdal.net/Win2k8/Enabling_Wireless_Network_For_Hyper_V_Virtual_Machine.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T17:11:31.817

Windows 8 Hyper V 下的无线网络无法与多个 VM 通信，无线网卡仅分配给一个 Hyper V 互联网连接，

这意味着只有一个 Hyper V 可以连接到 Internet，除非您使用多个 Nic 的无线网卡或 USB 无线网络，否则其他人无法连​​接。

只有在您重新启动或关闭计算机后，Hyper-V 问题才会开始。

因此，如果您无法连接任何 Hyper VM，那么您的问题可能是由于 Hyper-v 计数的关闭错误尝试重新启动整个计算机，然后 Hyper-VM 您的问题应该会自行解决。

# sql - SQL Server 2008 R2 中的字符串操作难题

> ID：13590761
> 
> 赞同：0
> 
> 时间：2012-11-27T18:32:59.670
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有这些信息：

```
Column workflowname has this value ='12STD_Orientations_Workflow'
Column canceldate has a date value 
```

我需要为列活动名称分配一个值，如下所示：

假设 canceldate 中的值是 2012 年 11 月，该值必须是 '12STD_Orientations_2012_Nov'。如果该值为 2013 年 1 月，则该值必须为“12STD_Orientations_2013_Jan”。等等。

我正在考虑做一个函数并通过调用来分配 canceldate 的值（在 INSERT 子句中）`MyFunction(workflowname,canceldate)`。但我不知道如何在函数内部编写代码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:52:18.813

这是一个可以产生您想要的结果的版本。此版本反转值的当前值，然后在字符串中`@str`查找第一个：`_`

```
declare @str varchar(100) = '12STD_Orientations_Workflow'
declare @dt datetime = '2012-01-01'

select left(@str, len(@str) - charindex('_', REVERSE(@str))) 
    + '_'
    + cast(YEAR(@dt) as char(4))
    + '_'
    + CONVERT(char(3), @dt, 109) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/6692)

然后如果你想把它放在一个函数中，你可以使用：

```
create function dbo.New_Workflow
(
  @origName varchar(200), 
  @dt datetime
)
RETURNS varchar(200) 
AS 
BEGIN
    declare @newvalue varchar(100)
    select @newvalue = left(@origName, len(@origName) - charindex('_', REVERSE(@origName))) 
            + '_'
            + cast(YEAR(@dt) as char(4))
            + '_'
            + CONVERT(char(3), @dt, 109)
    RETURN @newvalue
END; 
```

然后调用它你可以使用：

```
declare @str varchar(100) = '12STD_Orientations_Workflow'
declare @dt datetime = '2012-11-01'

select dbo.New_Workflow(@str, @dt) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9a00f/2)

结果是：

```
|                    COLUMN_0 |
-------------------------------
| 12STD_Orientations_2012_Nov | 
```

现在，如果您需要从表中提取它，您将使用：

```
select dbo.New_Workflow(yourWorkFlowNameCol, yourDateColumn)
from yourtable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:03:55.527

```
CREATE FUNCTION dbo.MyFunction
(
    @originalString VARCHAR(200), 
    @dateFromField DATETIME
)
RETURNS varchar(200) 
AS
BEGIN 
    DECLARE @newString VARCHAR(200)
    SELECT @newString = LEFT(@originalString,19) + LEFT(CONVERT(VARCHAR(19),@dateFromField,109),3)
    RETURN @newString
END; 
```

# css - DIV chrome上的CSS样式忽略隐藏的溢出

> ID：13590766
> 
> 赞同：3
> 
> 时间：2012-11-27T18:33:31.783
> 
> 标签：css, google-chrome

![在此处输入图像描述](../Images/226b37f2e8ee3edc6154e753059e30bd.png)我有一个宽度为 200 像素的 div，溢出设置为隐藏。在 Firefox、Safari 和 IE 中，选择遵循样式规则并正确显示。但是在 chrome 中，选择元素不遵循规则集并流过 div。

该网站位于[http://conaty.hailstormcommerce.com/index.php?route=product/category&path=20](http://conaty.hailstormcommerce.com/index.php?route=product/category&path=20)

这个问题与 select 元素的背景属性有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:57:41.363

除了 Diodeus 答案之外，您还为此元素指定了 220px 的最小宽度。

做这个：

```
width:100%;
min-width:0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:37:32.200

`SELECT`已知行为是这样的。它的行为更像是操作系统中的控件，而不是 HTML 中的元素（单选按钮和复选框也是如此）。您所能做的就是对宽度进行硬编码以防止其溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T00:18:56.897

我认为您可能在问题中错误地描述了该问题。

`select`看起来您正在尝试为元素创建自定义下拉箭头。该`select`元素是您设置的正确宽度，并且溢出被 div 隐藏。但是，在 Chrome 中，它`select`有一个白色背景，覆盖了您的自定义箭头，并且不受您的`background: transparent !important;`声明的影响。

要解决此问题，以便您的自定义箭头显示出来，您只需添加`-webkit-appearance: none;`如下：

```
.selectContainer select {
    background: transparent !important;
    cursor: pointer;
    -webkit-appearance: none; /* add this */
} 
```

# php - php cURL表单发布登录然后在嵌入标签中显示站点

> ID：13590770
> 
> 赞同：0
> 
> 时间：2012-11-27T18:33:48.837
> 
> 标签：php, forms, curl, embed

我希望能够从我的站点登录到站点（表单 POST），然后在我的站点上显示登录的站点。

是否会使用 cURL（表单 POST）登录网站并成功显示该网站，就好像我使用嵌入标签登录我的网站一样有效？这是做我想做的事情的正确方法吗？

例子会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:35:18.530

如果您添加`<base>`指向您正在显示的网站的标记以加载具有相对路径的所有 css 和 js 文件，那么这可以工作。

此外，如果您将 cookie 存储在文件或数据库中，您甚至可能不需要每次都登录。

# php - php图片上传设置png、gifs转黑

> ID：13590771
> 
> 赞同：1
> 
> 时间：2012-11-27T18:33:49.537
> 
> 标签：php, image-upload

我有一个很好用的图像上传脚本，但当然有一个小问题......由于某种原因（我确定它是一个 imagecreatetruecolor 的东西），当我上传 png 和 gif 时，我只得到一张黑色图片......

这是功能

```
function ak_img_resize($target, $newcopy, $w, $h, $ext) {
list($w_orig, $h_orig) = getimagesize($target);
$scale_ratio = $w_orig / $h_orig;
if (($w / $h) > $scale_ratio) {
       $w = $h * $scale_ratio;
} else {
       $h = $w / $scale_ratio;
}
$img = "";
$ext = strtolower($ext);
if ($ext == "gif"){ 
  $img = imagecreatefromgif($target);
} else if($ext =="png"){ 
  $img = imagecreatefrompng($target);
} else { 
  $img = imagecreatefromjpeg($target);
}
$tci = imagecreatetruecolor($w, $h);
imagecopyresampled($tci, $img, 0, 0, 0, 0, $w, $h, $w_orig, $h_orig);
imagejpeg($tci, $newcopy, 80);
}
function ak_img_thumb($target, $newcopy, $w, $h, $ext) {
list($w_orig, $h_orig) = getimagesize($target);
$src_x = ($w_orig / 2) - ($w / 2);
$src_y = ($h_orig / 2) - ($h / 2);
$ext = strtolower($ext);
$img = "";
if ($ext == "gif"){ 
$img = imagecreatefromgif($target);
} else if($ext =="png"){ 
$img = imagecreatefrompng($target);
} else { 
$img = imagecreatefromjpeg($target);
}
$tci = imagecreatetruecolor($w, $h);
imagecopyresampled($tci, $img, 0, 0, $src_x, $src_y, $w, $h, $w, $h);
if ($ext == "gif"){ 
    imagegif($tci, $newcopy);
} else if($ext =="png"){ 
    imagepng($tci, $newcopy);
} else { 
    imagejpeg($tci, $newcopy, 80);
}
} 
```

任何帮助都会很棒

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:01:04.727

我在使用 GD 时使用以下代码：

```
$newImage = "the new image name goes here"; //full path

$dst_img = imagecreatetruecolor($new_w,$new_h);

                /* fix PNG transparency issues */                       
                imagefill($dst_img, 0, 0, IMG_COLOR_TRANSPARENT);         
                imagesavealpha($dst_img, true);      
                imagealphablending($dst_img, true);                 
                imagecopyresampled($dst_img,$img,0,0,0,0,$new_w,$new_h,imagesx($img),imagesy($img));

    switch($ext)
                      {
                       case 'png' : $img = imagepng($dst_img,"$newImage",9);
                       break;
                       case 'jpg' : $img = imagejpeg($dst_img,"$newImage",100);
                       break;
                       case 'jpeg' : $img = imagejpeg($dst_img,"$newImage",100);
                       break;
                       case 'gif' : $img = imagegif($dst_img,"$newImage");
                       break;
                      }
     imagedestroy($dst_img); 
```

请注意 imagepng 使用 3 个参数。

# java - simpledateformat 意外结果

> ID：13590778
> 
> 赞同：0
> 
> 时间：2012-11-27T18:34:46.207
> 
> 标签：java, simpledateformat

我正在尝试按如下方式格式化字符串日期：

```
DateFormat df = new SimpleDateFormat("MM-dd-yyyy");
Date d = df.parse("11-02-2012"); 
```

但是，当我检查 d 变量时，它是：“Wed Dec 02 00:00:00 EST 16”（12/02/2016）

谁能帮我正确格式化它，这样我就能得到正确的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:44:16.707

我看到了正确的值：

```
import java.text.*;
import java.util.*;

public class Test
{
  public static void main(String args[])
  {
    new Test();
  }

  public Test()
  {
    try
    {
    DateFormat df = new SimpleDateFormat("MM-dd-yyyy");
    Date d = df.parse("11-02-2012");

    System.out.println(d);
    }
    catch(Exception e) { }
  }
} 
```

我得到

```
Fri Nov 02 00:00:00 UTC 2012 
```

你设置了什么时区？

# jquery - jquery fancybox——它是如何工作的以及它需要什么？

> ID：13590779
> 
> 赞同：1
> 
> 时间：2012-11-27T18:34:45.193
> 
> 标签：jquery, html, fancybox

请原谅我的愚蠢问题，但我是 javascript 的菜鸟，只是好奇。

我有一个插入了 fancybox 的本地 html 文件，该文件在本地工作得很好，但前提是建立了互联网连接。所以我想知道为什么？

脚本是否发送某种请求？如果是这样，到哪个服务器？

这是代码（它显示模态窗口）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>title</title>
    <link href="css/main.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/fancybox.css" rel="stylesheet" type="text/css" media="all" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/fancybox.js"></script>
    <script type="text/javascript" src="js/fancybox.pack.js"></script>
    <script type="text/javascript" src="js/jquery.mousewheel.js"></script>
    <script type="text/javascript" src="js/jScrollPane.js"></script>
    <script type="text/javascript" src="js/cusel.js"></script>
    <script type="text/javascript" src="js/fns.js"></script>

 </head>
    <body>
    <!-- This one triggers modal window -->
        <div class="order_call"><a href="#popup1" class="pseudolink popup_link"><span    class="order_call_icon"></span>Order</a></div>

<!-- and this one is window itself -->  

<div class="popup_reduser">
                        <h2 class="border">Обратный звонок<span class="popup_close">ЗАКРЫТЬ<em></em></span></h2>
                        <form action="" id="feedback">
                            <table class="form_table">
                                <tr>
                                    <td class="label_td">
                                        <label for="popup_tel_num" class="label">Номер телефона: <span>*</span></label>
                                    </td>
                                    <td><input type="text" id="popup_tel_num" class="input" /></td>
                                </tr>
                                <tr>
                                    <td class="label_td"><label for="name"  class="label">Имя:</label></td>
                                    <td><input type="text" id="name" class="input" /></td>
                                </tr>
                                <tr>
                                    <td class="label_td">Позвоните мне:</td>
                                    <td>
                                        <input type="radio" id="feedback1" class="radio" name="radio" />
                                        <label for="feedback1" class="radio_label">прямо сейчас</label>
                                    </td>
                                </tr>
                                <tr class="tr_last">
                                    <td class="label_td">&nbsp;</td>
                                    <td class="time_select">
                                        <input type="radio" id="feedback2" class="radio" name="radio" />
                                        <span class="txt">с</span>
                                        <div class="short">
                                            <select name="" id="select10" class="">
                                                <option value="">10:00</option>
                                                <option value="">11:00</option>
                                                <option value="">12:00</option>
                                            </select>
                                        </div>
                                        <span class="txt">до</span>
                                        <div class="short">
                                            <select name="" id="select11" class="">
                                                <option value="">10:00</option>
                                                <option value="">11:00</option>
                                                <option value="">12:00</option>
                                            </select>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                            <div class="submit"><input type="submit" value="Заказать" /></div>
                            <div class="reset"><input type="reset" value="Отменить" /></div>
                        </form>
                        <div class="clear"></div>
                    </div>
                </div>    

        </body>
        </html> 
```

感谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:38:19.983

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script> 
```

因为您引用的是 Google 的 CDN，所以您需要 Internet 连接来调用 jQuery 和 jQuery UI 库。下载文件并将其保存在本地并像这样调用路径。

例子：

```
 <script type="text/javascript" src="PATH/jquery.min.js"></script>
 <script type="text/javascript" src="PATH/jquery-ui.min.js"></script> 
```

# jquery - jQuery 抓取特定的 img src 文件夹名称

> ID：13590780
> 
> 赞同：0
> 
> 时间：2012-11-27T18:34:48.657
> 
> 标签：jquery

所以我的 img src 像这样生成`img/0001/name0001/img0001.jpg`并且我试图抓住`/name0001/`任何想法？谢谢！

我的代码：

```
var parent = $('.img');
    $(parent, document).click(function() {

        var dirz = this.src;
            var dirb = dirz.split('/')[2];
            alert(dirb);
}); 
```

它以空白警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:36:36.557

如果文件名都是这种格式，

```
var dir = filename.split('/')[2]; 
```

请注意，如果您使用图像的`.src` *属性*，那么它将包含完整的 URL，包括方案和主机名，这与问题中显示的输入不同。

要解析 HTML 中提供的路径，您*需要*使用`.attr('src')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:36:26.363

```
var src = 'img/0001/name0001/img0001.jpg';

var items = src.split('/')[2]  ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T18:36:49.503

拆分`/`并抓取相应的段怎么样？

```
var src = "img/0001/name0001/img0001.jpg",
    segment = src.split('/')[2]; // "name0001" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T18:38:22.573

使用拆分方法：

```
str = "img/0001/name0001/img0001.jpg";    
var n=str.split("/"); 
```

然后抓住 n[2]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T18:38:54.667

您可以使用以下代码

```
var src = "img/0001/name0001/img0001.jpg",
segment = src.split('/')[2]; // "name0001" 
```

谢谢

# android - NoClassDefFoundError 而类路径中的 .jar

> ID：13590784
> 
> 赞同：1
> 
> 时间：2012-11-27T18:35:01.753
> 
> 标签：android

我正在尝试使用 json-lib-2.4-jdk15.json。我的代码没有任何错误，但是当我运行程序时， catlog ：

```
Caused by: java.lang.NoClassDefFoundError: net.sf.json.JSONSerializer 
```

而我有“import net.sf.json.JSONSerializer;” 并且 eclipse 在这一行没有显示任何错误。我像这样添加了.jar：配置构建路径->添加外部jar ..（所以现在jar出现在引用库中）

我的课 ：

```
package com.example.androidgridweb;
import java.io.IOException;
import java.io.UnsupportedEncodingException;

import net.sf.json.JSONException;
import net.sf.json.JSONObject;
import net.sf.json.JSONSerializer;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.ParseException;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;

import android.os.AsyncTask;

public class eSearchElastic{

public void ESE (final ImageAdapter imgAdapter)throws ClientProtocolException, IOException {

AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>(){

    @Override
    protected Void doInBackground(Void... params) {
        String server = "servename";
        String index = "images";
        String type = "images_schema_1";
        StringEntity query = null;
        try {
            query = new StringEntity("{\"sort\" : [ {\"confidence_level\" : {\"order\" : \"desc\"} }],\"from\" : 0, \"size\" : 10,\"query\" : {\"text_phrase\" : { \"keyword\" : \"finding nemo\"}},\"filter\" : {\"numeric_range\" : {\"confidence_level\" : { \"from\" : 10, \"to\" : 100, \"include_lower\" : true, \"include_upper\" : true}}}}'");
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        int i=0;
        HttpClient httpclient = new DefaultHttpClient();
        StringBuilder urlStr = new StringBuilder("http://");
         urlStr.append(server)
                .append("/" + index)
                .append("/" + type + "/_search");
         System.out.println(urlStr.toString());
         while (i < 5) {
            HttpPost httpost = new HttpPost(urlStr.toString());
            httpost.setEntity((HttpEntity)query);

         httpost.setHeader("Accept", "application/json");
            httpost.setHeader("Content-type", "application/json");

             HttpResponse response = null;
            try {
                response = httpclient.execute(httpost);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

             String answer = null;
            try {
                answer = org.apache.http.util.EntityUtils.toString(response.getEntity());
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println(answer);
            i++;

            JSONObject answerJson = (JSONObject) JSONSerializer.toJSON(answer);
            String urlImage;
            try {
                urlImage = answerJson.getString("hits");
                JSONObject answerJson1 = (JSONObject) JSONSerializer.toJSON(urlImage);
                String urlImage1 = answerJson1.getString("hits").replace("[", "").replace("]","");
                JSONObject answerJson2 = (JSONObject) JSONSerializer.toJSON(urlImage1);
                String urlImage2 = answerJson2.getString("_source");
                JSONObject answerJson3 = (JSONObject) JSONSerializer.toJSON(urlImage2);
                String urlImage3 = answerJson3.getString("url");
                System.out.println(urlImage3);
                imgAdapter.addmThumbIds(urlImage3);
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

         }
        return null;
    }

};
task.execute();

}

} 
```

目录：

```
FATAL EXCEPTION: AsyncTask #1
java.lang.RuntimeException: An error occured while executing doInBackground()
    at android.os.AsyncTask$3.done(AsyncTask.java:278)
    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
    at java.lang.Thread.run(Thread.java:864)
Caused by: java.lang.NoClassDefFoundError: net.sf.json.JSONSerializer
    at com.example.androidgridweb.eSearchElastic$1.doInBackground(eSearchElastic.java:82)
    at com.example.androidgridweb.eSearchElastic$1.doInBackground(eSearchElastic.java:1)
    at   android.os.AsyncTask$2.call(AsyncTask.java:264)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:40:49.600

将 jar 添加到构建路径并不意味着该 jar 将包含在应用程序 apk 中。这就是为什么它在编译时（eclipse）起作用，而在运行时不起作用。

在您的 android 应用程序项目的顶层创建一个“libs”文件夹，并将 jar 复制到该文件夹​​中。ADT 插件会自动将该文件夹中的任何 jar 添加到您的 eclipse 构建路径和构建的 apk 文件中。

# wpf - 如何将对象的布尔属性绑定到 CheckBox 的 IsChecked 属性？

> ID：13590785
> 
> 赞同：2
> 
> 时间：2012-11-27T18:35:01.487
> 
> 标签：wpf, xaml, binding, checkbox

我有一个 ObservableCollection 具有布尔属性的对象。

在 GUI 中，我有一个 CheckBox，我想将其 IsChecked 属性绑定到每个对象的布尔属性。

是否可以仅使用 XAML？如何？

**我只想通过绑定来执行此操作，因为出价比循环快**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T18:42:00.000

尝试这个：

```
<ListBox ItemsSource={Binding path}>
  <ListBox.ItemTemplate>
    <DataTemplate>
      <CheckBox IsChecked="{Binding yourBoolPropertyName, Mode = TwoWay}" />
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

这将创建将绑定到您的集合的复选框列表。当然，您必须正确设置绑定路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:13:01.040

我创建了一种行为，以允许控件中的属性绑定到项目集合的属性，其方式如下：

*   如果更改控件中的属性，则会更新所有项。
*   如果您更改项目中的属性，如果所有项目都具有相同的属性，则控件将反映它。如果没有，控件的属性将被赋予一个后备值（如 null）。

    ```
    public class CollectionPropertyBehavior : Behavior<DependencyObject>
    {

    private IEnumerable<ValueProxy> proxies;
    private bool syncking;

    public string SourcePropertyPath
    {
        get { return (string)GetValue(SourcePropertyPathProperty); }
        set { SetValue(SourcePropertyPathProperty, value); }
    }
    public static readonly DependencyProperty SourcePropertyPathProperty =
        DependencyProperty.Register("SourcePropertyPath", typeof(string), typeof(CollectionPropertyBehavior), new PropertyMetadata(null));

    public string CollectionPropertyPath
    {
        get { return (string)GetValue(CollectionPropertyPathProperty); }
        set { SetValue(CollectionPropertyPathProperty, value); }
    }
    public static readonly DependencyProperty CollectionPropertyPathProperty =
        DependencyProperty.Register("CollectionPropertyPath", typeof(string), typeof(CollectionPropertyBehavior), new PropertyMetadata(null));

    private IEnumerable<object> Items { get { return  this.ItemsSource == null ? null : this.ItemsSource.OfType<object>(); } }
    public IEnumerable ItemsSource
    {
        get { return (IEnumerable)GetValue(ItemsSourceProperty); }
        set { SetValue(ItemsSourceProperty, value); }
    }
    public static readonly DependencyProperty ItemsSourceProperty =
        DependencyProperty.Register("ItemsSource", typeof(IEnumerable), typeof(CollectionPropertyBehavior), new PropertyMetadata(null, ItemsSourceChanged));

    private object Value
    {
        get { return (object)GetValue(ValueProperty); }
        set { SetValue(ValueProperty, value); }
    }
    private static readonly DependencyProperty ValueProperty =
        DependencyProperty.Register("Value", typeof(object), typeof(CollectionPropertyBehavior), new PropertyMetadata(null, ValueChanged));

    public object DefaultValue
    {
        get { return (object)GetValue(DefaultValueProperty); }
        set { SetValue(DefaultValueProperty, value); }
    }
    public static readonly DependencyProperty DefaultValueProperty =
        DependencyProperty.Register("DefaultValue", typeof(object), typeof(CollectionPropertyBehavior), new PropertyMetadata(null));

    private static void ValueChanged(object sender, DependencyPropertyChangedEventArgs args)
    {
        var element = sender as CollectionPropertyBehavior;
        if (element == null || element.ItemsSource == null) return;

        element.UpdateCollection();
    }

    private static void ItemsSourceChanged(object sender, DependencyPropertyChangedEventArgs args)
    {
        var element = sender as CollectionPropertyBehavior;
        if (element == null || element.ItemsSource == null) return;
        element.ItemsSourceChanged();
    }

    private void ItemsSourceChanged()
    {
        this.proxies = null;

        if (this.Items == null || !this.Items.Any() || this.CollectionPropertyPath == null) return;

        // Cria os proxies
        this.proxies = this.Items.Select(o =>
        {
            var proxy = new ValueProxy();
            proxy.Bind(o, this.CollectionPropertyPath);
            proxy.ValueChanged += (s, e) => this.UpdateSource();
            return proxy;
        }).ToArray();

        this.UpdateSource();
    }

    private void UpdateSource()
    {
        if (this.syncking) return;

        // Atualiza o valor 
        using (new SynckingScope(this))
        {
            object value = this.proxies.First().Value;
            foreach (var proxy in this.proxies.Skip(1))
            {
                value = object.Equals(proxy.Value, value) ? value : this.DefaultValue;
            }

            this.Value = value;
        }
    }

    private void UpdateCollection()
    {
        // Se o valor estiver mudando em função da atualização de algum 
        // elemento da coleção, não faz nada
        if (this.syncking) return;

        using (new SynckingScope(this))
        {
            // Atualiza todos os elementos da coleção,
            // atrávés dos proxies
            if (this.proxies != null)
                foreach (var proxy in this.proxies)
                    proxy.Value = this.Value;
        }
    }

    protected override void OnAttached()
    {
        base.OnAttached();

        // Bind da propriedade do objeto fonte para o behavior
        var binding = new Binding(this.SourcePropertyPath);
        binding.Source = this.AssociatedObject;
        binding.Mode = BindingMode.TwoWay;
        BindingOperations.SetBinding(this, ValueProperty, binding);
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();

        // Limpa o binding de value para a propriedade do objeto associado
        this.ClearValue(ValueProperty);
    }

    internal class SynckingScope : IDisposable
    {
        private readonly CollectionPropertyBehavior parent;

        public SynckingScope(CollectionPropertyBehavior parent)
        {
            this.parent = parent;
            this.parent.syncking = true;
        }

        public void Dispose()
        {
            this.parent.syncking = false;
        }
    }

    internal class ValueProxy : DependencyObject
    {
        public event EventHandler ValueChanged;

        public object Value
        {
            get { return (object)GetValue(ValueProperty); }
            set { SetValue(ValueProperty, value); }
        }
        public static readonly DependencyProperty ValueProperty =
            DependencyProperty.Register("Value", typeof(object), typeof(ValueProxy), new PropertyMetadata(null, OnValueChanged));

        private static void OnValueChanged(object sender, DependencyPropertyChangedEventArgs args)
        {
            var element = sender as ValueProxy;
            if (element == null || element.ValueChanged == null) return;

            element.ValueChanged(element, EventArgs.Empty);
        }

        public void Bind(object source, string path)
        {
            // Realiza o binding de value com o objeto desejado
            var binding = new Binding(path);
            binding.Source = source;
            binding.Mode = BindingMode.TwoWay;

            BindingOperations.SetBinding(this, ValueProperty, binding);
        }
    }
    } 
    ```

你可以像这样使用它：

```
<CheckBox>
    <i:Interaction.Behaviors>
        <local:CollectionPropertyBehavior CollectionPropertyPath="MyBooleanProperty" SourcePropertyPath="IsChecked" ItemsSource="{Binding CollectionInViewModel}"/>
    </i:Interaction.Behaviors>
</CheckBox> 
```

它还不支持集合更改（只是集合交换），但我相信它可以很容易地修改为。如果你想开箱即用，你可以在 ObservableCollection 的 CollectionChanged 事件中添加一个处理程序，这样它就会触发 ItemsSource 更新：

```
observableCollection.CollectionChanged += (s,e) => this.OnPropertyChanged("ItemsSource); 
```

我在[这里](https://stackoverflow.com/questions/13540566/check-box-in-datagrid-wpf-c-sharp-application/13541741#13541741)发布了另一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T19:01:11.140

在您的 ViewModel 上创建一个 bool 属性，它将遍历`Objects`您的所有 ObservableCollection 以查看每个对象的属性是否为 true -

```
public bool AllTrue
{
   get
   {
      return Objects.All(o => o.Selected);
   }
} 
```

这`Objects`是您的实例，`ObservableCollection`并且`Selected`是对象中的布尔属性。

**XAML**

```
<CheckBox IsChecked="{Binding AllTrue}"/> 
```

# r - 方差分析的对比

> ID：13590788
> 
> 赞同：6
> 
> 时间：2012-11-27T18:35:24.593
> 
> 标签：r, statistics, anova

我理解与之前帖子的对比，我认为我在做正确的事情，但它并没有给我我所期望的。

```
x <- c(11.80856, 11.89269, 11.42944, 12.03155, 10.40744,
       12.48229, 12.1188, 11.76914, 0, 0,
       13.65773, 13.83269, 13.2401, 14.54421, 13.40312)
type <- factor(c(rep("g",5),rep("i",5),rep("t",5)))
type
 [1] g g g g g i i i i i t t t t t
Levels: g i t 
```

当我运行这个：

```
> summary.lm(aov(x ~ type))

Call:
aov(formula = x ~ type)

Residuals:
    Min      1Q  Median      3Q     Max 
-7.2740 -0.4140  0.0971  0.6631  5.2082 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)   11.514      1.729   6.659 2.33e-05 ***
typei         -4.240      2.445  -1.734    0.109    
typet          2.222      2.445   0.909    0.381    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 3.866 on 12 degrees of freedom
Multiple R-squared: 0.3753,     Adjusted R-squared: 0.2712 
F-statistic: 3.605 on 2 and 12 DF,  p-value: 0.05943 
```

这里我的参考是我的类型“g”，所以my`typei`是类型“g”和类型“i”`typet`的区别，my是类型“g”和类型“t”的区别。

我想在这里再看两个对比，`typei+typeg` 和类型“t”之间的区别以及类型“i”和类型“t”之间的区别

所以对比

```
> contrasts(type) <- cbind( c(-1,-1,2),c(0,-1,1))
> summary.lm(aov(x~type))

Call:
aov(formula = x ~ type)

Residuals:
    Min      1Q  Median      3Q     Max 
-7.2740 -0.4140  0.0971  0.6631  5.2082 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  10.8412     0.9983  10.860 1.46e-07 ***
type1        -0.6728     1.4118  -0.477    0.642    
type2         4.2399     2.4453   1.734    0.109    
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 3.866 on 12 degrees of freedom
Multiple R-squared: 0.3753,     Adjusted R-squared: 0.2712 
F-statistic: 3.605 on 2 and 12 DF,  p-value: 0.05943 
```

当我尝试通过更改参考来进行第二次对比时，我得到了不同的结果。我不明白我的对比有什么问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T19:55:02.717

参考：http : [//www.ats.ucla.edu/stat/r/library/contrast_coding.htm](http://www.ats.ucla.edu/stat/r/library/contrast_coding.htm)

```
mat <- cbind(rep(1/3, 3), "g+i vs t"=c(-1/2, -1/2, 1),"i vs t"=c(0, -1, 1))
mymat <- solve(t(mat))
my.contrast <- mymat[,2:3]
contrasts(type) <- my.contrast
summary.lm(aov(x ~ type))

my.contrast
>      g+i vs t i vs t
[1,]  -1.3333      1
[2,]   0.6667     -1
[3,]   0.6667      0
> contrasts(type) <- my.contrast
> summary.lm(aov(x ~ type))

Call:
aov(formula = x ~ type)

Residuals:
   Min     1Q Median     3Q    Max 
-7.274 -0.414  0.097  0.663  5.208 

Coefficients:
             Estimate Std. Error t value Pr(>|t|)    
(Intercept)    10.841      0.998   10.86  1.5e-07 ***
typeg+i vs t    4.342      2.118    2.05    0.063 .  
typei vs t      6.462      2.445    2.64    0.021 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 

Residual standard error: 3.87 on 12 degrees of freedom
Multiple R-squared: 0.375,  Adjusted R-squared: 0.271 
F-statistic:  3.6 on 2 and 12 DF,  p-value: 0.0594 
```

# c# - 调度程序开始调用

> ID：13590794
> 
> 赞同：1
> 
> 时间：2012-11-27T18:35:42.243
> 
> 标签：c#, wpf

关于 Dispatcher.BeginInvoke 的问题

如果我有如下方法：

```
private void DoSomeWork()
{
   MyCanvas.Dispatcher.BeginInvoke(DispatcherPriority.Background, new DispatcherOperationCallback(delegate
        {
            //Do something

            return null;

        }), null);
    } 
```

我多次调用该方法，然后按照文档创建的顺序执行多个调用：*如果在同一个 DispatcherPriority 进行多个 BeginInvoke 调用，它们将按照调用的顺序执行。* [Dispatcher.BeginInvoke 方法 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.begininvoke.aspx)

如何清除这一点以停止另一个呼叫或将队列重置为一个呼叫？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:40:35.963

> 如何清除这一点以停止另一个呼叫或将队列重置为一个呼叫？

你没有。您无法控制调度程序队列。您*可以*做的是保留“待处理请求”的计数（当然，确保自动更新它）并且仅在这是队列中的最后一次调用时执行（即当递减计数时为 0）。

另一种选择是为最后一次通话的时间保留某种计时器，并在一段时间内忽略进一步的通话。

如果您可以提供有关您要实现的目标的更多详细信息，我们可以提供更具体的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:41:51.197

您提供的 MSDN 链接通过更多挖掘为您提供了答案。

此操作返回可用于取消的[DispatcherOperation对象。](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcheroperation.aspx)但是，这是基于每次调用的，因为您无法完全控制队列。

# concurrency - 在 OpenCL 中创建线程网格

> ID：13590795
> 
> 赞同：0
> 
> 时间：2012-11-27T18:35:42.043
> 
> 标签：concurrency, opencl

我为 OpenCL 编写了一个内核，将 3D 数组的所有元素初始化为 -> i*i*i + j*j*j。我现在在创建线程网格来初始化元素（同时）时遇到问题。我知道我现在的代码只使用了 3 个线程，我该如何扩展呢？

请帮忙。我是 OpenCL 的新手，所以任何建议或解释都可能很方便。谢谢！

这是代码：

```
_kernel void initialize (
int X;
int Y;
int Z;
_global float*A) {

// Get global position in X direction
int dirX = get_global_id(0);
// Get global position in Y direction
int dirY = get_global_id(1);
// Get global position in Z direction
int dirZ = get_global_id(2);

int A[2000][100][4];
int i,j,k;
for (i=0;i<2000;i++)
{
    for (j=0;j<100;j++)
    {
        for (k=0;k<4;k++)
        {
            A[dirX*X+i][dirY*Y+j][dirZ*Z+k] = i*i*i + j*j*j;
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:23:58.363

*   您创建缓冲区以将输出“A”存储在*调用*（主机）代码中。这作为指针传递给您的内核，这在您上面的函数定义中是正确的。但是，您不需要在内核函数中再次声明它，因此请删除`int A[2000][100][4];`.

*   您可以大大简化代码。使用 3D 全局 ID 来指示每个工作项的数组中的 3D 索引，您可以按如下方式更改循环（假设对于给定的 i 和 j，沿 Z 的所有元素应该具有相同的值）：

    ```
    __kernel void initialize (__global float* A) {
      // cast required so that kernel compiler knows the array dimensions
      __global float (*a)[2000][100][4] = A;

      // Get global position in X direction
      int i = get_global_id(0);
      // Get global position in Y direction
      int j = get_global_id(1);
      // Get global position in Z direction
      int k = get_global_id(2);

      (*a)[i][j][k] = i*i*i + j*j*j;
    } 
    ```

然后，在您的调用代码中，您将创建全局工作大小为 2000x100x4 的内核。

*   实际上，这是要安排的*很多*工作项，因此您可能会从 2000 的全局（一维）工作大小和内核内部的循环中获得更好的性能，例如：

    ```
    __kernel void initialize (__global float* A) {
      // cast required so that kernel compiler knows the array dimensions
      __global float (*a)[2000][100][4] = A;

      // Get global position in X direction
      int i = get_global_id(0);

      for (j=0;j<100;j++) {
        for (k=0;k<4;k++) {
          (*a)[i][j][k] = i*i*i + j*j*j;
        }
      }
    } 
    ```

# c++ - 仅使用 C 为目标交叉编译 C++ 应用程序

> ID：13590796
> 
> 赞同：2
> 
> 时间：2012-11-27T18:35:44.470
> 
> 标签：c++, dependencies, cross-compiling

我正在交叉编译一个 C++ 程序。但是当我尝试在目标计算机上运行时，它找不到 C++ 库（即 libstdc++.so.5）。

有没有办法捆绑所有依赖项以便我可以在目标计算机上运行？

还是我必须将它们安装在目标计算机上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:37:59.253

试试`g++ -static x.cc -o x`。这会将您的所有库（包括 libstdc++）链接到您的可执行文件中。

当然，生成的图像会比动态链接的图像大。

# android - Android：使用 Twitter 搜索 API

> ID：13590798
> 
> 赞同：1
> 
> 时间：2012-11-27T18:35:46.440
> 
> 标签：android, twitter

我正在开发一个与 Twitter 搜索 api 密切合作的 Android 应用程序，检索包含某些关键字的 twitts，然后标记其中的其他单词。我的问题如下：从架构的角度来看，是在应用程序内部完成所有工作还是从 Web 服务中检索信息更好？（我在 f 首先考虑了最后一个选项，但我担心即使缓存结果也不足以绕过 Twitter api 的限制速率）。

# import - 如何使用 sas 宏导入和导出多个数据？

> ID：13590799
> 
> 赞同：1
> 
> 时间：2012-11-27T18:35:46.737
> 
> 标签：import, dataset, export, sas

嗨我正在尝试在 sas 中对以下函数做一个宏

我有多个 sas 文件（apr12part1、apr12part2、...、aug12part1、aug12part2），对于每个文件（例如：apr12part1），我会做一些处理，这会给我三个输出（例如：apr12part1out1、apr12part1out2、pr12part1out3） .

我试图使用宏，但不是很成功。有人可以帮我吗？非常感谢！我使用的代码是这样的

```
%macro test(month=,part=);
   ...FROM EC100002.&month_part_&part
   ...
   proc export data=SASUSER.Out1 outfile='G:\Output\Output1_&month_&part.csv' dbms=csv replace;
   proc export data=SASUSER.Out2 outfile='G:\Output\Output2_&month_&part.csv' dbms=csv replace;
   proc export data=SASUSER.Out3 outfile='G:\Output\Output3_&month_&part.csv' dbms=csv replace;
   run;
%mend test 
```

%test(月=apr12,part=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:45:15.427

尝试添加“点”以将宏变量连接成一个完整的字符串。此外，您必须使用双引号，而不是单引号。像这样的东西：

```
proc export data=SASUSER.Out1 
     outfile="G:\Output\Output1_&month._&part..csv" dbms=csv replace; 
```

`&part`请注意，变量后面有两个“点” ；第一个是连接运算符，第二个是文件名的一部分。

您可能对未显示的代码有类似的问题，所以也要检查一下。

# ef-code-first - EF Code-First 迁移工具如何确定对模型进行了哪些更改？

> ID：13590802
> 
> 赞同：1
> 
> 时间：2012-11-27T18:35:58.660
> 
> 标签：ef-code-first, entity-framework-5, entity-framework-migrations

我正在学习迁移，我很好奇迁移工具如何确定在创建最后一次迁移后对我们的模型进行了哪些更改。

例如，假设我们创建了一个迁移**M1**并通过发出命令应用它`Update-Database`。应用后`M1`，如果我们`P`向一个类添加一个新属性并通过发出命令`C`创建另一个迁移**M2**`Add-Migration M2`，那么迁移工具将能够以某种方式找出我们对模型所做的唯一更改（在创建**M1**之后）是添加一个新属性。`P`上课`C`。迁移工具如何解决这个问题？

谢谢你

**回复：**

Migrations 使用**__Migrations**表来确定哪些迁移已经应用以及哪些尚未应用，但我认为它不会使用该表来确定从一个迁移到另一个迁移的变化，因为迁移表中的数据是一个**哈希**，这意味着它不能被解密，我认为这是必要的，以便可以将当前模型元数据与存储在迁移表中的最新元数据进行比较？！

或者您是否暗示它能够仅通过比较（当前和存储版本的）哈希值来确定哪些属性已更改或被删除或添加到实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T01:34:13.430

它将您的模型版本存储在数据库（迁移历史表）中，并将您当前的模型与存储在数据库中的模型进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T08:45:08.480

该模型存储在 .resx 文件中，位于 Target 资源值中的每个 mifration 下。它是一个编码（序列化）模型。它用于比较您当前的模型并生成下一次迁移。

# emacs - 如何在 emacs 中获取当前小部件次要模式缓冲区中所有小部件的值？

> ID：13590811
> 
> 赞同：0
> 
> 时间：2012-11-27T18:36:35.790
> 
> 标签：emacs, widget, elisp

例如，我们有[emacs 小部件示例](http://www.gnu.org/software/emacs/manual/html_node/widget/Programming-Example.html)提供的缓冲区。所以我想获得将返回关联列表的函数'((widget-name .widget-value) ...)

就像是：

```
(widget-create 'push-button
               :notify 'get-widgets-alist
               "Get Widgets") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T13:17:42.127

我不完全确定你在问什么。在您的第一段中，您似乎要求一个函数将返回缓冲区中的所有小部件。但是你的例子表明你想要一个小部件通知功能。那么，你真正想要的是什么？

```
(require 'cl)
(defun get-widgets ()
  "Return a list of widgets in the current buffer."
  (save-excursion
    (goto-char (point-min))
    (loop while (not (eobp))
          for new = (widget-at)
          and old = nil then new
          when (and new (not (eq new old))) collect new
          do (goto-char (next-overlay-change (point)))))) 
```

# c - C - 释放结构

> ID：13590812
> 
> 赞同：73
> 
> 时间：2012-11-27T18:36:38.423
> 
> 标签：c, struct, malloc

假设我有这个结构

```
typedef struct person{
    char firstName[100], surName[51]
} PERSON; 
```

我正在通过 malloc 分配空间并用一些值填充它

```
PERSON *testPerson = (PERSON*) malloc(sizeof(PERSON));
strcpy(testPerson->firstName, "Jack");
strcpy(testPerson->surName, "Daniels"); 
```

释放该结构占用的所有内存的正确且安全的方法是什么？是“免费的（testPerson）；” 足够了还是我需要一个一个地释放每个结构的属性？

它引出了另一个问题——结构是如何存储在内存中的？我注意到一个奇怪的行为 - 当我尝试打印结构地址时，它等于它的第一个属性的地址。

```
printf("Structure address %d == firstName address %d", testPerson, testPerson->firstName); 
```

这意味着这个 free(testPerson) 应该等于这个 free(testPerson->firstName);

这不是我想做的。

谢谢

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-11-27T18:40:29.223

简单的回答：`free(testPerson)`就够了。

请记住，只有`free()`在使用或分配内存时才能使用。`malloc``calloc``realloc`

在您的情况下，您只有 malloced 内存，`testPerson`因此释放就足够了。

如果您在这种情况下使用`char * firstname , *last surName`then 来存储名称，则您必须分配内存，这就是您必须单独释放每个成员的原因。

这里还有一点应该是相反的；这意味着，为元素分配的内存稍后完成，因此`free()`它首先释放指向对象的指针。

释放每个元素，您可以看到如下所示的演示：

```
typedef struct Person
{
char * firstname , *last surName;
}Person;
Person *ptrobj =malloc(sizeof(Person)); // memory allocation for struct
ptrobj->firstname = malloc(n); // memory allocation for firstname
ptrobj->surName = malloc(m); // memory allocation for surName

.
. // do whatever you want

free(ptrobj->surName);
free(ptrobj->firstname);
free(ptrobj); 
```

这背后的原因是，如果你释放第`ptrobj`一个，那么就会有内存泄漏，这是由指针分配`firstname`的内存。`suName`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-27T18:49:50.857

首先您应该知道，在以下情况下定义和分配内存时分配了多少内存。

```
 typedef struct person{
       char firstName[100], surName[51]
  } PERSON;
  PERSON *testPerson = (PERSON*) malloc(sizeof(PERSON)); 
```

1) sizeof(PERSON) 现在返回 151 个字节（不包括填充）

2）151字节的内存分配在堆中。

3）要免费，请致电免费（testPerson）。

但是如果您将结构声明为

```
 typedef struct person{
      char *firstName, *surName;
  } PERSON;
  PERSON *testPerson = (PERSON*) malloc(sizeof(PERSON)); 
```

然后

1) sizeof(PERSON) 现在返回 8 个字节（不包括填充）

2) 需要通过调用 malloc() 或 calloc() 为 firstName 和 surName 分配内存。喜欢

```
 testPerson->firstName = (char *)malloc(100); 
```

3）要释放，首先释放结构中的成员，而不是释放结构。即，免费（testPerson->firstName）；免费（testPerson->surName）；免费（测试人员）；

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-27T18:41:10.787

因为您将 定义`struct`为由`char`数组组成，所以这两个字符串*是*结构并且释放`struct`就足够了，也没有办法释放`struct`但保留数组。对于这种情况，您可能想做类似的事情`struct { char *firstName, *lastName; }`，但是您需要分别为名称分配内存并处理何时释放*该*内存的问题。

旁白：你有什么*理由*想在`struct`释放之后保留这些名字吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-27T18:42:32.497

这样，您只需要释放结构，因为字段是具有静态大小的数组，将作为结构的一部分分配。这也是您看到的地址匹配的原因：数组是该结构中的第一件事。如果您将字段声明为 char *，您将不得不手动 malloc 并释放它们。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-02T04:30:43.867

`free`还不够，`free`只是将内存标记为未使用，结构数据将在那里直到覆盖。为了安全起见，将指针设置为`NULL`after `free`。

前任：

```
if (testPerson) {
    free(testPerson);
    testPerson = NULL;
} 
```

`struct`类似于数组，它是一块内存。您可以通过其偏移量访问结构成员。第一个结构的成员放置在偏移处，`0`因此第一个结构的成员的地址与结构的地址相同。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-27T18:41:22.480

Mallocs 和 frees 需要配对。

malloc 为 Person 抓取了一块足够大的内存。

当您释放时，您告诉 malloc 不再需要从“这里”开始的那块内存，它知道它分配了多少并释放它。

无论你打电话

```
 free(testPerson) 
```

或者

```
 free(testPerson->firstName) 
```

free() 实际接收到的只是一个地址，同一个地址，它不知道你调用的是哪个地址。如果您使用 free(testPerson)，您的代码会更清晰 - 它显然与 malloc 匹配。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-27T18:42:52.600

您不能释放未动态分配的类型。尽管数组在语法上相似（`int* x = malloc(sizeof(int) * 4)`可以以相同的方式使用`int x[4]`），但调用`free(firstName)`可能会导致后者出错。

例如，使用以下代码：

```
int x;
free(&x); 
```

`free()`是一个接收指针的函数。`&x`是一个指针。这段代码可以编译，即使它根本不起作用。

如果我们假设所有内存都以相同的方式`x`分配，在定义处“分配”，在第二行“释放”，然后在作用域结束后再次“释放”。你不能两次释放同一个资源；它会给你一个错误。

这甚至没有提到由于某些原因，您可能无法在`x`不关闭程序的情况下释放内存。

tl;博士：只要释放`struct`你就会没事的。*不要*在数组上调用 free ；仅在动态分配的内存上调用它。

# c++ - enable_shared_from_this：在成员中共享使用计数

> ID：13590813
> 
> 赞同：3
> 
> 时间：2012-11-27T18:36:39.423
> 
> 标签：c++, c++11, shared-ptr

假设我有两个课程：`Thing`和`Holder`：

```
struct Thing :
        std::enable_shared_from_this<Thing>
{
    std::shared_ptr<Thing> self()
    {
        return shared_from_this();
    }
};

struct Holder :
        std::enable_shared_from_this<Holder>
{
    Thing t;
};

int main()
{
    auto h = std::make_shared<Holder>();
    // will throw std::bad_weak_ptr
    h->t.self();
} 
```

我希望`Thing`'s internal`weak_ptr`使用共享计数`Holder`，而不是*要求* `Holder`保持 a `shared_ptr`to `Thing`。在相反的方向上，`Thing`需要能够在不知道 a`Holder`是什么的情况下存在（`std::make_shared<Thing>().self()`应该仍然有效）。有没有一种体面的方法来完成我正在寻找的东西？

* * *

### 不起作用的事情

说类似的东西是`std::shared_ptr<Thing> t(h, &h->t);`行不通的，因为 a 的别名构造函数`std::shared_ptr`不使用`enable_shared_from_this`访问者。

使用 Boost，可以通过重载来解决这个问题`sp_enable_shared_from_this`；然而，对于 g++ 的实现，如何做同样的事情并不明显`__enable_shared_from_this_helper`（更不用说我们正在跳入“不要那样做”的土地）。

* * *

### 提升解决方法

在 Boost 中，通过直接调用来解决这个问题并不难`_internal_accept_owner`：

```
int main()
{
    auto h = boost::make_shared<Holder>();
    h->t._internal_accept_owner(&h, &h->t);
    h->t.self();
} 
```

使用`boost::enable_shared_from_this2`，可以将所需的代码嵌入到构造函数中，`Holder`如下所示：

```
Holder()
{
    boost::shared_ptr<Holder> self = shared_from_this();
    t._internal_accept_owner(&self, &t);
} 
```

我正在寻找与`std::enable_shared_from_this`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:44:57.900

好的，现在我明白你在问什么，这是一个替代方案。您可以传入一个`shared_ptr< Holder >`to `Thing`，允许它创建自己的别名 shared_ptr。像这样的东西：

```
struct Thing : std::enable_shared_from_this<Holder>
{
     Thing() {};

     Thing( std::shared_ptr< Holder >& holderPtr ) :
     m_holder( holderPtr )
     {
     }

     std::shared_ptr< Holder > m_holder;

     std::shared_ptr<Thing> self()
     {
         try 
         { 
              return shared_from_this(); 
         }
         catch( const std::bad_weak_ptr& )
         {
              return std::shared_ptr< Thing >( m_holder, this );    
         }
     }
};

struct Holder : std::enable_shared_from_this<Holder>
{
    Thing t;
}; 
```

个人认为最好只保留一个`shared_ptr< Thing >`inside `Holder`，但如果你喜欢它，这似乎会起作用。除了 和 之间的循环`Holder`引用`Thing`。猜猜你可以用一个`weak_ptr< Holder >`内部`Thing`来代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:47:41.500

如果您不介意，则可以通过私有继承而不是使用成员对象对 a`Thing`内部的组合进行建模。`Holder`然后在你的一个成员中，你可以通过向下转换`Thing`“检索”封闭- 然后使用它来访问共享计数。`Holder``static_cast<Holder&>(*this)``shared_from_this`

但是，因为它是 的私有基础`Holder`，所以`Thing`需要一个朋友声明才能进行向下转换。由于除此之外，两个类之间的依赖关系是循环的，这导致了一些严重的耦合。

# android - Android：如何在当前类中调用一个类

> ID：13590817
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:36:47.167
> 
> 标签：android, android-intent, android-activity, extends, intentfilter

我正在开发一个具有多个活动的应用程序，并且我厌倦了在清单和 XML 布局和其他东西之间来回运行。有没有办法

```
Intent intent = new Intent(MainActivity.this, MainActivity.Settings.class); 
```

或者其他的东西？因为我已经尝试过了，它不会给我一个错误，但它只是强制关闭应用程序。例如，我可以将来自不同 .java 的所有类捆绑到一个中。

```
public class MainActivity extends Activity
{
    ...
    @Override
    protected void onCreate(Bundle MainActivityState)
    {
        ...
    }

    public class Settings extends ...
    {
        ...
    }

    public class Register extends ...
    {
        ...
    }

    public class Login extends ...
    {
        ...
    }

    public class BeautifulLady extends personality ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:51:57.937

简单的。只是不要尝试。

一个活动松散地代表一个屏幕——用户与之交互的东西。Android 是围绕这个概念构建的，试图规避它会导致流泪。

坚持下去。将您的类放在单独的文件中，并为每个活动单独设置 XML 布局，这将成为您的朋友，并且一旦您熟悉，实际上会加快速度。

从Activity生命周期文档开始，读几遍，直到一分钱一分货。然后从那里向外扩展。

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

面向对象的编程，具有自给自足的类，是一种乐趣，无论您选择在哪个平台上进行开发都是可预见的未来的发展方向（老手，请不要就 OOP 与功能进行辩论；））。

如果你要做移动开发，那么活动、类和 UI 的分离是同一个概念，只是做的不同。

另请参阅 MVC 编程及其表亲。

[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:57:36.777

也许你可以定义 your `Activity`as ' `Single Top'`，然后从她自己 like 发起你的活动`MainActivity.this.startActivity(new Intent(MainActivity.this, MainActivity.class)`。然后它将进入`onNewIntent()`，您将重新显示您想要重新显示的内容。这样，您将只有一个屏幕。

# asp.net-mvc - MVC 重定向正在将虚拟目录添加到 URL

> ID：13590821
> 
> 赞同：1
> 
> 时间：2012-11-27T18:36:49.877
> 
> 标签：asp.net-mvc, iis-7

我的网站托管在具有多个虚拟目录的服务器上，并且我有不同的域名指向它们各自的虚拟目录。我的网站在 Visual Studio 的调试模式下运行良好，没有任何异常发生。

URL 类似于[http://www.greatsite.com](http://www.greatsite.com)，但 RedirectToAction 链接是这样的：

```
 return RedirectToAction("Profile", "Account"); 
```

我想去这里...

[http://www.greatsite.com/Account/Profile](http://www.greatsite.com/Account/Profile)

...改为这里：

[http://www.greatsite.com/greatsite/Account/Profile](http://www.greatsite.com/greatsite/Account/Profile)

...其中“greatsite”是虚拟目录的名称。

该站点正在使用 FTP 发布，并且 FTP 地址直接指向“greatsite”文件夹。因此，就 FTP 而言，该站点已发布到根目录。

页面以任何一种方式显示。URL 指向虚拟目录，我很困惑为什么它们都可以工作。

**编辑**

我最终在这里找到了答案： [https ://stackoverflow.com/questions/364637/asp-net-mvc-on-godaddy-not-working-not-primary-domain-deployment](https://stackoverflow.com/questions/364637/asp-net-mvc-on-godaddy-not-working-not-primary-domain-deployment)

所以你可能想把它作为一个重复的问题关闭，抱歉。除非有人可以更详细地解释此解决方案。

```
<rewrite>
    <rules>
        <rule name="Remove Virtual Directory">
            <match url=".*" />
            <action type="Rewrite" url="{R:0}" />
        </rule>
    </rules>
</rewrite> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:43:52.027

RedirectToAction 将重定向到当前 asp.net mvc 应用程序中的另一个 Action/Controller。您可以使用 Redirect 方法重定向到外部 URL。

```
return Redirect("http://www.externalurl.com"); 
```

或另一个虚拟目录：

```
return Redirect("http://www.externalurl.com/directory"); 
```

# c++ - 恒定 r 值示例

> ID：13590823
> 
> 赞同：0
> 
> 时间：2012-11-27T18:37:00.853
> 
> 标签：c++, c++11

有人可以给我一个恒定 r 值的例子吗？

因为显然即使是文字也是 r-values 而不是 const r-values。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:41:41.280

```
const T f(); 
```

根据该定义，表达式`f()`是类型的 r 值表达式`const T`，即常量 r 值。

# sql-server - SQL Server 2012 中的全文搜索

> ID：13590828
> 
> 赞同：1
> 
> 时间：2012-11-27T18:37:13.073
> 
> 标签：sql-server, amazon-ec2, full-text-search, sql-server-2012

我在这个问题上花了几个小时，找不到解决方案。我有三个工作环境，我们使用 SQL Server 2012。问题是 FTS 无法正常工作。

我已经为同一张表提取了 FTS 的属性，唯一的区别在于“全文索引文件组”。

假设 FTS 目录名为 hello。它工作的环境将“全文索引文件组”属性设置为：ftfg_hello，而不起作用的环境设置为：PRIMARY。

当我说它不起作用时，我的意思是我得到了结果，但要得到它们需要很长时间。

我想知道这个属性有问题吗？我应该寻找其他东西吗？

顺便说一句：在 Amazon Instance RDS 上设置了不起作用的环境。

感谢您的时间

# javascript - 将“主页”哈希插入浏览器历史记录

> ID：13590836
> 
> 赞同：0
> 
> 时间：2012-11-27T18:37:28.073
> 
> 标签：javascript, webpage, browser-history

我想实现以下目标：

如果用户打开指向我网站中某个子页面的链接，例如 index.html#Contact，我想在 index.html#Contact 令牌之前将 index.html# 令牌添加到历史堆栈中，以便用户，当单击浏览器的`back`- 按钮首先出现在我网站的起始页上，然后在下一个`back`实际上离开页面正常。

我认为我可以使用以下“onload”执行的 javascript 轻松实现这一点：

```
var href = window.location.href;
var hashPos = href.indexOf("#");
if ((hashPos > 0) & (hashPos+1 < href.length)) {
    window.location.replace(href.substring(0, hashPos+1));
    window.location.assign (href);
} 
```

但由于某种原因，这根本没有做任何事情......

我让它在 Firefox 中像这样工作：

```
var href = window.location.href;
var hashPos = href.indexOf("#");
if ((hashPos > 0) & (hashPos+1 < href.length)) {
    window.location.replace(href.substring(0, hashPos+1));
    setTimeout(function() { 
        window.location.assign(href);
    }, 0);
} 
```

但在 IE 和 Chrome 中，这也无济于事......

任何建议（除了“不要这样做！”）？

# c# - WPF DataGrid 无法选择一行

> ID：13590837
> 
> 赞同：0
> 
> 时间：2012-11-27T18:37:30.363
> 
> 标签：c#, wpf, datagrid

我用包含对象`DataGrid`的绑定填充了一个。`List<>`我可以让它们出现在 中 `DataGrid`，但问题是，我无法选择一行。当我添加`IsSynchronizedWithCurrentItem`时，第一行似乎被选中（行的蓝色背景），但我无法更改它，甚至无法删除它。这是我`DataGrid`在 XAML 中的样子：

```
<Window x:Class="ClientTrackerWPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="560" Width="594" KeyDown="Window_KeyDown">
    <Grid>
         <DataGrid AutoGenerateColumns="False" Height="231" HorizontalAlignment="Left" Margin="1,2,0,0" Name="datagridClients"
                  VerticalAlignment="Top" Width="500" HorizontalScrollBarVisibility="Disabled" SelectionChanged="datagridClients_SelectionChanged"
                  SelectionMode="Single" IsSynchronizedWithCurrentItem="True">
                <DataGrid.Columns>
                      <DataGridTextColumn Header="Prénom" MinWidth="175" Binding="{Binding Path=_prenom}" />
                      <DataGridTextColumn Header="Nom" MinWidth="175" Binding="{Binding Path=_nom}" />
                      <DataGridTextColumn Header="Téléphone" MinWidth="150" Binding="{Binding Path=_telephone}" />
                </DataGrid.Columns>
         </DataGrid>
     </Grid>
</Window> 
```

我试着在这里和谷歌上寻找，但找不到对我有用的东西。顺便说一句，我正在使用 C#。

这是 C# 部分。

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Data;
    using System.Windows.Documents;
    using System.Windows.Input;
    using System.Windows.Media;
    using System.Windows.Media.Imaging;
    using System.Windows.Navigation;
    using System.Windows.Shapes;

    namespace ClientTrackerWPF
    {
        /// <summary>
        /// Logique d'interaction pour MainWindow.xaml
        /// </summary>
        public partial class MainWindow : Window
        {
            BDD bdd;
            List<Client> listeClients;
            bool started = false;

            public MainWindow()
            {
                InitializeComponent();
            }

            private void initilisationApp()
            {
                bdd = new BDD();
                bdd.startConnection("clients.sqlite");

                listeClients = new List<Client>();
                listeClients = bdd.getAllClients();
                datagridClients.ItemsSource = listeClients; //The source of the binding

                tabMain.IsEnabled = true;
                menuFileInit.Visibility = Visibility.Collapsed;
                menuFileNewClient.Visibility = Visibility.Visible;
                started = true;
            }

            private void menuFileInit_Click(object sender, RoutedEventArgs e)
            {
                initilisationApp();
            }
            private void datagridClients_SelectionChanged(object sender, SelectionChangedEventArgs e)
            {
                Console.WriteLine(e.Source);
            }
        }
    } 
```

谢谢 ！

# c# - 为什么将 XAML 图像源设置为 URI 比使用 HttpClient 获取图像更快？

> ID：13590844
> 
> 赞同：2
> 
> 时间：2012-11-27T18:37:47.607
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我正在构建一个 Windows 应用商店应用程序并同时学习 XAML。我想在 GridView 中显示的 http URI 上有远程图像。

我最初的解决方案涉及使用`HttpClient`从 URI 下载图像字节数组，获取 a `RandomAccessStreamReference`，构造 a `BitmapImage`，然后将 XAML`Image`控件的源属性设置为构造的`BitmapImage`。然而，这个解决方案被证明是相当慢的（1-2 整秒来获得一张图像）。

我的下一个解决方案是将原始 URI 直接绑定到 XAML`Image`控件的源属性，XAML 引擎似乎自行解决。过去需要 10 秒才能加载大约 8-10 张图像的瞬间变得瞬间完成。

有谁知道 XAML`Image`控件的默认 URI 转换器究竟是如何解析远程图像数据的？我的第一个解决方案完全有可能实施得不好，但差异大到足以激起我的好奇心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:57:18.047

假设我从[`ImageSourceConverter`](http://msdn.microsoft.com/en-us/library/system.windows.media.imagesourceconverter%28v=vs.100%29.aspx)类中找到了正确的代码，当您将源指定为字符串时，转换器正在尝试执行此操作：

```
 if (((value is string) && !string.IsNullOrEmpty((string) value)) || (value is Uri))
    {
        UriHolder uriFromUriContext = TypeConverterHelper.GetUriFromUriContext(context, value);
        return BitmapFrame.CreateFromUriOrStream(uriFromUriContext.BaseUri, uriFromUriContext.OriginalUri, null, BitmapCreateOptions.None, BitmapCacheOption.Default, null);
    } 
```

[`BitmapFrame`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapframe%28v=vs.100%29.aspx)反过来使用 a[`BitmapDecoder`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapdecoder%28v=vs.100%29.aspx)来加载图像。当源是 a`Uri`时`BitmapDecoder`，在一堆安全和健全性检查中，使用 a `WpfWebRequestHelper`（未记录的）来请求或“下载”图像。如果生成的响应流是有效文件，它会直接将流加载到新的`FileStream`.

之后，本机 Windows 图像解码功能将接管您的图像。另请注意，它`BitmapDecoder`会被缓存，因此如果您连续加载多个图像，则无需重新初始化新的`BitmapDecoder`. 我不能说这是否与您的性能问题有关。

总之，我猜测 WPF 在内部使用来加载图像的方法是一种高度优化的方法。我没有研究过简单下载图像的实现`HttpClient`与可能使用简单[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.100%29.aspx)下载图像的可能性，但我怀疑您的方法的开销大于内置方法的开销，并且是导致性能下降的原因。

如果您想知道我是如何破译这些信息的，我只是使用名为[Reflector](http://www.reflector.net)`System.Windows.Media`的工具检查了程序集中命名空间中的几个类。`PresentationCore`

# web-services - 通过相同的 JAX-WS 服务同时支持 SOAP 1.1 和 1.2

> ID：13590845
> 
> 赞同：6
> 
> 时间：2012-11-27T18:37:51.750
> 
> 标签：web-services, soap, websphere, jax-ws

我有一个 JAX-WS`@WebServiceProvider`并且希望同时支持 SOAP 1.1 和 1.2 协议。我手动处理创建正确版本的响应`SOAPMessage`。我有 WSDL 描述 1.1 和 1.2 协议的绑定。但是服务端点一次只能支持任一版本。

我将不胜感激一个解决方案或指向一段文档的指针，其中指出这是不可能的。

PS 我正在使用 WebSphere 7 应用服务器，它与 JAX-WS 2.0（基于 Axis2）捆绑在一起

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T09:10:27.650

我遇到了同样的问题。对我而言，主要问题是无法同时使用`@BindingType(value = SOAPBinding.SOAP12HTTP_BINDING)`和编译该类`@BindingType(value = SOAPBinding.SOAP11HTTP_BINDING)`。看看这个[http://www-01.ibm.com/support/docview.wss?uid=swg1PK96819](http://www-01.ibm.com/support/docview.wss?uid=swg1PK96819)和这个[http://www-01.ibm.com/support/docview.wss?uid=swg1PK83482](http://www-01.ibm.com/support/docview.wss?uid=swg1PK83482)，应该可以设置`@BindingType(SOAPBinding.SOAP_HTTP_BINDING)`为同时交付两个 SOAP 版本。不幸的是，我也没有使用 Websphere 运行时环境进行编译，我不明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:11:24.553

我最近处理了一个与尝试同时为服务启用 SOAP 1.1 和 1.2 相关的服务部署问题（在 WebSphere v7.0 上）。不幸的是，我认为您的问题没有提供足够的信息来提供特定的解决方案。

可以同时支持两种绑定，但有一些注意事项。我认为主要是服务器必须能够监听每个绑定的单独端点（URL）。据我所知，这需要您的 web.xml 和/或 webservices.xml 配置文件中的适当条目。

对于基于注解的服务，这些配置条目理论上是可选的；但是当您尝试在没有“可选”配置条目的情况下为给定服务启用多个绑定时，WAS Axis2 扩展会失败并出现各种可能的异常。

如果您可以提供有关 wsdl 的更多详细信息，以及 web.xml 和 webservices.xml 的相关部分（如果有），以及在部署和应用程序启动期间 WAS 日志中报告的任何错误消息，那么我可以可能会给出更好的答案。

# php - RegExp 获取带有换行符的行

> ID：13590857
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:38:39.993
> 
> 标签：php, regex, preg-split

我正在尝试从我们的数据库中获取一些注释行，它们存储为字符串，以“\n”分隔。不幸的是，在某些评论中包含文本 - 也带有“\n”，我没有将它们相应地分开。

示例注释如下所示：

```
27.11.2012 13:19 (MB): test123
27.11.2012 13:20 (MB): test456
27.11.2012 13:21 (JA): test789
lalala
lululu
27.11.2012 13:22 (JA): test10 
```

现在我尝试使用 reg exp 和 preg_split() 将它们分开：

```
#(\d{2}\.\d{2}\.20[0123]{2} \d{2}:\d{2} \([A-Z]{2,3}\): .*)#
(PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE) 
```

但我明白了

```
Array
(
    [0] => 27.11.2012 13:19 (MB): test123
    [1] => 
    [2] => 27.11.2012 13:20 (MB): test456
    [3] => 
    [4] => 27.11.2012 13:21 (JA): test789
    [5] => 
lalala
lululu
    [6] => 27.11.2012 13:22 (JA): test10
) 
```

我如何将它们结合起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:18:03.300

正则表达式中的点与换行符不匹配，因此您`.*`将转到行尾；看似空的行包含换行符。因此，从拆分模式中删除`.*`，并将其余部分与`PREG_SPLIT_DELIM_CAPTURE`.

```
(\d{2}\.\d{2}\.20[0123]{2} \d{2}:\d{2} \([A-Z]{2,3}\):) 
```

每行将在冒号处分成两部分。然后，您可以成对加入您的字符串以获得原始行（或者当您需要分隔字段时，您可以在程序的下一步中省去拆分它们的麻烦）。

如果您真的讨厌拆分输入行的想法：

1.  使用`preg_match_all`而不是拆分。
2.  添加`PCRE_DOTALL`( `s`) 标志来修改 的含义`.`，使其也匹配换行符。
3.  这将使第一个`.*`匹配一直到文件末尾，所以让它不贪婪：`.*?`.

现在，您需要匹配所有内容，直到下一个日期模式，但在它*之前*停止。您可以通过用前瞻表达式结束正则表达式来表达这一点。由于它将分隔您的匹配组，因此您不再需要将其显式放入匹配的模式中。

换句话说，试试这个模式（我已经添加了`s`标志作为后缀，但当然你可以单独传递它）：

```
/(.*?)\n(?=\d{2}\.\d{2}\.20[0123]{2} \d{2}:\d{2} \([A-Z]{2,3}\):)/s 
```

评论：我尽可能避免前瞻/后瞻，你可能会明白为什么。我发现两部分的解决方案更简单，更易于维护，但这里的前瞻是有意义的。

PS。如果更改文件格式仍然是一种选择，请考虑转换为 csv 格式并使用`fgetcsv`或类似的方式读取它。

# javascript - 处理 HTTP 状态 Ajax 响应

> ID：13590871
> 
> 赞同：0
> 
> 时间：2012-11-27T18:39:31.320
> 
> 标签：javascript, ajax, http, instapaper

我正在尝试将 Instapaper Simple API 集成到某些东西中，但我很难理解如何处理 API 在 Javascript 中发回的响应。这篇文章很好地添加到 Instapaper，所以我知道提交工作只是不是我的响应处理程序。

这是我到目前为止的代码，我猜测成功函数不是处理响应的正确方法。

```
$.ajax({
    type: 'GET',
    url: url,
    dataType: 'jsonp',
    success: function( data, status ) {
        alert("yay");
    },

    error: function(status) {
        alert("oh noes");
    }
});
return false; 
```

添加文章后，Instapaper 返回 201。我可以在 Google Chrome 网络工具中看到 GET 返回了 201 状态。只是想知道我如何在上面的代码中处理该状态。

谢谢。

**编辑** 当我单击链接以激活下面的代码时，即使它已经工作，它现在也会在错误功能下弹出更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:45:41.840

```
$.ajax({
  statusCode: {
    201: function() {
      alert("201!");
    }
  }
}); 
```

这应该适用于任何 http 状态代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:46:04.620

jQuery.ajax() 为这些目的提供了 statusCode 映射：

```
$.ajax({
    type: 'GET',
    url: url,
    dataType: 'jsonp',
    statusCode: {
      200: function( data ) {
          alert("yay");
      },
      201: function( data ) {

      }
    },
    error: function(status) {
        alert("oh noes");
    }
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# compilation - Makefile 用于编译不同目录下的文件

> ID：13590876
> 
> 赞同：0
> 
> 时间：2012-11-27T18:40:05.947
> 
> 标签：compilation, makefile

* * *

```
 projectroot/
                                         |
          +------------------------------+----------------------------+
          |                              |                            |
       include/                        libs/                     helloworld/
          |                              |                            |
     shader_utils.h                shader_utils.c                 triangle.c 
```

* * *

项目根目录下有三个目录。helloworld 目录包含 triangle.c，它依赖于 shader_utils.h（在 projectroot/include 下），其定义在 projectroot/libs 下。这是我的 make 文件。这有什么问题。

```
#!bin/sh
CC=gcc
LDLIBS=-lglut -lGLEW -lGL
ROOT=/media/programming/experiments/projectroot

VPATH=../libs:../include
INC=-I$(ROOT)/include

all: triangle
triangle: triangle.o shader_utils.o
         cc -c $(CFLAGS) $< -o $@ $(INC)
shader_utils.o: shader_utils.h
         cc -c $(CFLAGS) $< -o $@ $(INC)    
clean:
        rm -f *.o triangle
.PHONY: all clean 
```

尝试制作时。它告诉这个

```
cc -c  ../include/shader_utils.h -o shader_utils.o -I/media/programming/experiments/projectroot/include 
cc -c  triangle.o -o triangle -I/media/programming/experiments/projectroot/include
cc: warning: triangle.o: linker input file unused because linking not done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:31:42.757

这个规则没有意义：

```
triangle: triangle.o shader_utils.o
         cc -c $(CFLAGS) $< -o $@ $(INC) 
```

您是在告诉 Make 构造一个可执行文件，但要求它使用`-c`. 只需删除所有规则并让默认设置为您工作。重写 Makefile：

```
CC=gcc
LDLIBS=-lglut -lGLEW -lGL
ROOT=/media/programming/experiments/projectroot
VPATH=../libs:../include
CFLAGS=-I$(ROOT)/include

all: triangle
triangle: triangle.o shader_utils.o
shader_utils.o: shader_utils.h 
clean:
        rm -f *.o triangle
.PHONY: all clean 
```

# c++ - 委托构造函数：委托构造函数的初始化器必须单独出现

> ID：13590880
> 
> 赞同：15
> 
> 时间：2012-11-27T18:40:30.143
> 
> 标签：c++, constructor, c++11, superclass, delegation

我有一对在 C++03 风格下工作得很好的构造函数。其中一个构造函数调用超类（或基类）构造函数...

```
class Window : public Rectangle
{
public: 
    Window() : win(new RawWindow(*this))
    {
        refresh();  
    }

    Window(Rectangle _rect) : Rectangle(_rect), win(new RawWindow(*this))
    {
        refresh();
    }
... 
```

我试图弄清楚如何使用新的 C++11 委派 ctor 功能来稍微整理一下。但是，以下代码给出了以下编译器错误...

```
class Window : public Rectangle
{
public: 
    Window() : win(new RawWindow(*this))
    {
        refresh();  
    }

    Window(Rectangle _rect) : Rectangle(_rect), Window(){} 
```

> “委托构造函数的初始化程序必须单独出现” ...

有没有办法解决？？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T18:45:11.620

问题是`Rectangle`被初始化了两次。

您可以尝试更改哪一个代表什么：

```
Window(Rectangle _rect) : Rectangle(_rect), win(new RawWindow(*this))
{
    refresh();  
}

Window() : Window(Rectangle()) {} 
```

最好的解决方案可能是在此示例中避免委托构造函数。

# asp.net-mvc-3 - MVC 3，ModelMetadata 导航期间的奇怪行为

> ID：13590886
> 
> 赞同：0
> 
> 时间：2012-11-27T18:40:37.563
> 
> 标签：asp.net-mvc-3, modelmetadata

我的模型中的属性之一是用`Hide`属性装饰的。当我加载页面时，不显示此属性（如预期的那样）。当我单击“后退”然后单击“前进”按钮时，基本上是导航离开然后返回，然后显示此属性。当我进行刷新时，属性会被隐藏起来。为什么？

模型通过自定义编辑模板呈现。

# r - 打印列对齐的数据框（如 R 所示）

> ID：13590887
> 
> 赞同：14
> 
> 时间：2012-11-27T18:40:44.070
> 
> 标签：r, dataframe, text-alignment, output-formatting

我在 R 中有以下数据框：

```
> dframe
                Mean Median
Candidates     85.68     60
NonCands        9.21      4
Multi          27.48     17
Mono            4.43      3
Multi NonCands 22.23     15 
```

我想将它打印到一个文件中并保持它的格式和对齐方式，如上所示。我用：

```
write.table(dframe,file="test",sep="\t", quote=F) 
```

产生以下输出：

```
Mean    Median
Candidates  85.68   60
NonCands    9.21    4
Multi   27.48   17
Mono    4.43    3
Multi NonCands  22.23   15 
```

由于数据在 R 环境中以正确格式显示，我认为将其写入具有相同格式的文件应该很简单。显然我错了。我尝试过使用MASS 库`format()`并`write.matrix`从 MASS 库中玩，但都没有产生预期的结果。

我已经看到了一些类似[这样的](https://stackoverflow.com/a/10588266/1081936)建议，但它似乎太复杂了，更重要的是，在使用`write.table()`.

那么，如何将我的数据框打印到文本文件并让它看起来就像在 R 中一样？

* * *

更新

按照贾斯汀在下面评论中的建议，我安装了 gdata 库并使用了`write.fwf`. 这*几乎*是我需要的：

```
write.fwf(dframe,file="test",sep="\t", quote=F, rownames=T) 
```

产生以下输出：

```
Mean    Median
Candidates      85.68   60
NonCands         9.21    4
Multi           27.48   17
Mono             4.43    3
Multi NonCands  22.23   15 
```

那么，关于如何让“平均值”和“中位数”向右移动以使其与各自的列对齐的任何想法？

由于它现在可能是相关的，因此 data.frame 的创建方式如下：

```
labels<-c("Candidates","NonCands","Multi", "Mono", "Multi NonCands")
Mean <- c(mean(cands), mean(non),mean(multi),mean(mono),mean(multi_non))
Median <- c(median(cands), median(non),median(multi),median(mono),median(multi_non))
names(Mean)<-labels
dframe<-data.frame(Mean,Median) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T22:51:44.783

你也可以`capture.output`使用`cat`

```
cat(capture.output(dframe), file = 'dframe.txt', sep = '\n') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T18:51:09.420

您可以将输出重定向`print`到文件。

```
max.print <- getOption('max.print')
options(max.print=nrow(dframe) * ncol(dframe))
sink('dframe.txt')
dframe
sink()
options(max.print=max.print) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-05T08:48:44.113

要控制输出，`print.data.frame`请根据您的需要进行调整并将输出捕获到文件中，例如：

```
capture.output(
  print.data.frame(df, row.names=F, print.gap=3, quote=F, right=F),
  sep="\n", file="out.txt"
) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T19:10:58.030

```
# Add the row names to the data frame, if you want them included
dframe2 <- data.frame("Row"=rownames(dframe), dframe, stringsAsFactors=FALSE)

# apply format over each column
dframe2 <- apply(dframe2, 2, format)

# print it out, make sure not to use quotes
write.table(dframe2, "test.txt", quote=FALSE, row.names=FALSE) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-31T05:58:30.053

我喜欢 Matthew Plourde 的简单[回答](https://stackoverflow.com/a/13591039/557884)，但不幸的是，它并没有为我的情况提供摆脱行名/编号的方法；所以，我稍微修改了里卡多的[答案：](https://stackoverflow.com/a/13591329/557884)

```
print.to.file <- function(df, filename) {
  cnames <- colnames(df)
  n      <- as.matrix(nchar(cnames))

  d <- apply(df, 2, format)
  n <- apply(cbind(n, nchar(d[1,])), 1, max)

  fmts <- paste0("%",n, "s")
  for(i in 1:length(cnames)) {
    cnames[i] <- sprintf(fmts[i], cnames[i])
    d[,i] <- sprintf(fmts[i], trimws(d[,i]))
  }
  d <- rbind(cnames, d)
  write.table(d, filename, quote=F, row.names=F, col.names=F)
} 
```

除了行名/编号之外，这给出了与 Matthew 相同的输出。

**编辑：**替换`trim`为`trimws`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-22T11:28:33.960

[根据 mnel 的答案](https://stackoverflow.com/a/13594659)，另一种没有行名的方法：

```
prettyprint.df <- function(x, filename='dframe.txt', width=200)  
   # Pretty-print data frame without row names  
{  
   op.w <- options("width")  
   options("width"=width)  

   first <- max(nchar(rownames(x))) + 2  
   cat(substring(capture.output(x), first), file=filename, sep="\n")  

   options(op.w)  
} 
```

# php - 在 jquery click() 中使用 PHP 变量？

> ID：13590891
> 
> 赞同：0
> 
> 时间：2012-11-27T18:40:52.180
> 
> 标签：php, jquery

我有这个，

```
 $(document).ready(function(){

        $('#link').click(function(){
            var user_login = <?php $base_url; ?>;
            window.location = user_login + '/login';
        });

    }); 
```

请注意，这`$base_url`是全局变量。这适用于 FF，但不适用于 Chrome 和 IE。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T18:42:14.263

您需要在 php 标签周围添加引号以指定 $base_url 的值是一个字符串：

```
$(document).ready(function(){

    $('#link').click(function(){
        var user_login = "<?php echo $base_url; ?>";
        window.location = user_login + '/login';
    });

}); 
```

这样，当浏览器获取这个块时，它看起来像：

```
$(document).ready(function(){

    $('#link').click(function(){
        var user_login = "http://www.example.com"; // after php is executed
        window.location = user_login + '/login';
    });

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T18:42:56.210

您需要回显该变量，而不仅仅是将其放在代码块中。为了安全起见，为了防止引入 JS 语法错误，您应该对值进行 json 编码：

```
 var login = <?php echo json_encode($base_url); ?>; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T18:43:08.373

见下文，注意 PHP 回声周围的引号

```
$(document).ready(function(){
    $('#link').click(function(){
        var login = '<?php echo $base_url; ?>';
        window.location = user_login + '/login';
    });

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T18:43:51.133

我想它是一个 PHP 文件，你需要用 javascript 的引号将你的变量内容括起来

```
 $(document).ready(function(){

        $('#link').click(function(){
            var login = <?php '\''.$base_url.'\''; ?>;
            window.location = user_login + '/login';
        });

    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T18:53:59.800

**在 PHP 文件中运行此脚本**，而不是在 .js 文件中，并且不要忘记 ECHO 您的变量并添加引号（在 javascript 中），如其他答案中所述！

# wordpress - 在 Wordpress 中使用 MediaElement.js 2.9.1 显示 YouTube 视频？

> ID：13590901
> 
> 赞同：1
> 
> 时间：2012-11-27T18:41:21.957
> 
> 标签：wordpress, youtube, mediaelement.js

我已经通过 wordpress 安装了插件，并且音频播放器工作正常，但我正在尝试使用[MediaElement](http://mediaelementjs.com)来显示 youtube 视频。我使用以下代码无济于事：

```
video autoplay="false" src="http://http://youtu.be/GXxfAygoVLM" type="video/youtube" width="500" height="275" 
```

我安装的版本是 2.9.1 版本。

你能告诉我哪里出错了，我是否需要在'mediaelement-js-wp.php'中添加一些东西？

编辑：这是网站上的当前简码（不起作用）：

```
[video autoplay="true" src="http://www.youtube.com/watch?v=GXxfAygoVLM" type="video/youtube" width="500" height="275"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:27:12.370

我不知道 Wordpress 中的 MediaElement.js 2.9.1，但您的链接没有指向视频（它不是链接到视频文件本身，而是链接到 html 页面）

尝试直接链接，您可以借助任何 youtube 下载工具来获取它们（我不能给你任何东西，因为它们很长）。

[也许这样](http://r7---sn-gvnuxaxjvh-n8vz.c.youtube.com/videoplayback?cp=U0hVRVNTV19IUENONV9LTUFCOmJOZlBMTjFzUXZT&mt=1360365912&newshard=yes&key=yt1&id=00ca59d131a36d61&expire=1360389136&ratebypass=yes&source=youtube&ipbits=8&ip=195.69.191.203&sver=3&fexp=914040,916613,920704,912806,902000,922403,922405,929901,913605,925710,929114,920201,930101,911116,910221,901451,919114&mv=m&sparams=cp,id,ip,ipbits,itag,ratebypass,source,upn,expire&ms=au&upn=2A9H-XUQw84&itag=18&signature=6F913AF10CCBA631E37B0422E851357794E70FFA.25E49B685E2A00752DBCB9BF106FF27354D8BC2B&title=Official%20Ram%20Trucks%20Super%20Bowl%20Commercial%20Farmer)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T19:54:08.720

好吧，我能看到的最明显的事情是您在 src 属性中包含了两次**http:// 。**尝试删除其中之一。

如果这不能解决问题，您可能希望更进一步。在使用“youtu.be”链接而不是实际的“youtube.com”链接时，我在使用其他 Wordpress/Youtube 集成之前遇到过这个问题。

尝试更改：http: [//youtu.be/GXxfAygoVLM](http://youtu.be/GXxfAygoVLM)

至： [http ://www.youtube.com/watch?v=GXxfAygoVLM](http://www.youtube.com/watch?v=GXxfAygoVLM)

看看这是否适合你。

# objective-c - 为 UISegmentedControl 设置外观会破坏禁用状态

> ID：13590903
> 
> 赞同：0
> 
> 时间：2012-11-27T18:41:28.827
> 
> 标签：objective-c

我正在全局设置我所有 UISegmentedControl 的外观。但是我注意到，当我这样做时，它会破坏禁用状态。

这是我必须更改 titleTextAttributes 的代码

```
NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                [UIFont boldSystemFontOfSize:12], UITextAttributeFont,
                                [UIColor whiteColor], UITextAttributeTextColor,
                                [UIColor colorWithRed:0x49/255.0 green:0x49/255.0 blue:0x49/255.0 alpha:1], UITextAttributeTextShadowColor,
                                [NSValue valueWithUIOffset:UIOffsetMake(0, -1)], UITextAttributeTextShadowOffset,
                                nil];
[[UISegmentedControl appearance] setTitleTextAttributes:attributes forState:UIControlStateNormal]; 
```

现在这很好用，并且所有分段控制器都已更新。

但是我使用 setEnabled:forSegmentAtIndex: 禁用的项目不再被禁用并且可以点击。为什么会这样？我怎样才能让他们再次被禁用。我也尝试将其应用于禁用状态，但它不起作用。

```
[[UISegmentedControl appearance] setTitleTextAttributes:attributes forState:UIControlStateDisabled]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:14:19.610

看来为 UISegmentedControl 设置全局外观并不是最好的方法，因为它不尊重 UIControlStateDisabled。

我以为我必须使用 UIControlStateDisabled ，因为没有任何效果，但似乎直接设置背景是有效的。所以我刚刚创建了一个初始化背景的 UISegmentedControlExtended 类，现在 setEnabled 函数可以正常工作。

# algorithm - 如何在图像中找到这种几何形状

> ID：13590907
> 
> 赞同：5
> 
> 时间：2012-11-27T18:41:42.450
> 
> 标签：algorithm, image-processing, machine-learning, computer-vision

![场景](../Images/1ab00d3a5352c96d99d6392d866aebbf.png)

假设我有一个如上图所示的场景图像。一种带有斑点的杆子，旁边可能是类似的没有斑点的物体。如何找到由红色圆圈标记的 blob（指示哪些像素属于 blob 的二进制图像）。

请注意，与斑点一起的极点可以任意旋转，并且大小也可能不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:43:38.013

一种方法是使用[Viola-Jones 对象检测框架](http://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework)。

尽管该框架主要用于人脸检测 - 它实际上是为您提供给算法的通用对象而设计的。

* * *

该算法的基本思想是将“好对象”（您正在寻找的）和“坏对象”的样本提供给机器学习算法 - 该算法从图像中生成模式作为其特征。

在分类期间 - 使用滑动窗口，算法将搜索对象的“匹配”（分类器返回肯定答案）。

* * *

该算法使用[监督学习](http://en.wikipedia.org/wiki/Supervised_learning)，因此需要一组标记的示例（正例和负例）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T23:41:55.853

您可以尝试通过以下 4 个步骤来完成吗？

1.  圆形检测，例如：[使用 opencv 编写鲁棒（颜色和大小不变）圆形检测（基于霍夫变换或其他特征）](https://stackoverflow.com/questions/9860667/writing-robust-color-and-size-invariant-circle-detection-with-opencv-based-on)
2.  线检测，例如：[使用 OpenCV 查找图像中矩形的位置](https://stackoverflow.com/questions/2068013/finding-location-of-rectangles-in-an-image-with-opencv)
3.  通过组合相邻线来识别矩形位置（对于每条线段，您都有起点和终点位置，您还知道每条线段的方向。这样您就可以确定两条连接线段（端点靠近）是否正交. 你的目标是为每个矩形找到 3 个这样的段。）

4.  检查每个圆形和矩形的相对位置，看看是否有任何一对可以形成`knob`形状。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T22:35:53.277

我确信在图像处理中有一些边界映射算法可以做到这一点。

否则，这里有一个快速解决方法：在“未发现区域”的中心选择一个像素，最初是整个图像。在 4 个方向上跟踪水平和垂直线，每个方向都在区域的边界处结束，发现值从 0 变为 1，反之亦然。

跟踪每个这样的值开关并完成每个图形的边界（步骤-A）。对仍未发现的区域执行相同操作：从某个中心点开始，浏览连接中心与图像边界或已知区域边界像素的线。

在 Step-A 中，您还可以检查您追踪的边界是直线还是曲线。每当它是一条曲线时，您只需要它上面的两个点——为了计算的准确性，这些点彼此相距一定距离。

垂直于这两个切点的线在图中红色圆圈的中心相交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T22:08:08.750

您可以分割图像。然后仅使用线段中的像素来进行霍夫变换以找到圆圈。然后，您将只有带有圆圈的段。您可以使用修改后的霍夫变换来查找矩形。“最佳”矩形和正方形组合将成为您的匹配项。这是非常注重计算的。

如果您已经拥有这些二进制图片，另一种方法是通过将到质心的距离与沿边缘行进的距离进行比较来转换为（例如 256 个 bin）样本。如果您从距质心最远的点开始，您将拥有一个相当旋转的鲁棒特征向量。

# sass - 按文件删除 Sass 注释？

> ID：13590913
> 
> 赞同：3
> 
> 时间：2012-11-27T18:42:07.920
> 
> 标签：sass, compass-sass

我想删除 SASS 在 CSS 文件中仅为一个文件生成的注释，同时允许我的其余 CSS 文件具有这些注释。有没有办法做到这一点？我所知道的是否是`line_comments = false`config.rb 中的选项，但这会为整个项目禁用它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T03:10:08.680

我真的相信你认为你想要的解决方案并不是你真正想要的。它增加了一层复杂性。

根据定义，注释不会影响 CSS 的呈现方式。它们不影响“ `example.sass`/ `example.css`”，也不影响您的任何其他样式表。在开发过程中，您可以打开它们来帮助您，但它们不会改变任何渲染的方式。

对于生产不应该有评论，一切都应该缩小。

所以，当你开发设置你的`config.rb`

```
output_style   = :expanded
environment    = :development 
```

当您准备好上线时：

```
output_style   = :compressed
environment    = :production 
```

更改`output_style`并且`environment`不更改目录或文件名，它们只是删除注释并取出无关的空格。

在开发过程中，您`example.css`的时间会稍长一些，但如果它被缓存并且您不更改它，则编译将不再需要任何时间，并且由于您要删除评论并缩小生产范围，您的用户将获得最快的下载次。

# c++ - while 循环中的 C++ 浮点精度

> ID：13590920
> 
> 赞同：2
> 
> 时间：2012-11-27T18:42:26.587
> 
> 标签：c++, floating-point, while-loop, floating-accuracy

我试图通过使用一系列 while 循环来计算美元和硬币面额的总数。然而，当我拿到硬币时，我差了一分钱。当我输入 99.95 时，我得到 3 个四分之一、1 个硬币、1 个镍和 4 个便士的输出。我已将问题缩小到浮点精度问题。但是，我研究过的所有解决方案都不适用于我的情况。任何指针？

```
#include <iostream>
using namespace std;

int main()

{
   float amount;
   cout<<"enter amount" << endl;
   cin>>amount;
   int pennies=0, nickels=0, dimes=0, quarters=0, ones=0, fives=0, 
tens=0, 
twenties=0, fifties=0, hundreds=0;

   while (amount >= 100) 
   {
      hundreds = hundreds +1;
      amount = amount - 100;

   }
   while (amount >= 50)
   {
      fifties = fifties +1;
      amount = amount - 50;

   }
   while (amount >= 20)
   {
      twenties = twenties +1;
      amount = amount - 20;

   }
   while (amount >= 10)
   {
      tens = tens +1;
      amount = amount - 10;

   }
   while (amount >= 5)
   {
      fives = fives +1;
      amount = amount - 5;

   }
   while (amount >= 1)
   {
      ones = ones +1;
      amount = amount - 1;

   }
   while (amount >= .25)
   {
      quarters = quarters +1;
      amount = amount - .25;

   }
   while (amount >= .10)
   {
      dimes = dimes +1;
      amount = amount - .10;

   }
   while (amount >= .05)
   {
      nickels = nickels +1;
      amount = amount - .05;

   }
   while (amount >= .01)
   {
      pennies = pennies +1;
      amount = amount - .01;

   }

   cout<<endl<<"pennies:"<< pennies;
   cout<<endl<<"nickels:"<<nickels;
   cout<<endl<<"dimes:"<<dimes;
   cout<<endl<<"quarters:"<<quarters;
   cout<<endl<<"ones:"<<ones;
   cout<<endl<<"fives:"<<fives;
   cout<<endl<<"tens:"<<tens;
   cout<<endl<<"twenties:"<<twenties;
   cout<<endl<<"fifties:"<<fifties;
   cout<<endl<<"hundreds:"<<hundreds<<endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:45:03.437

在需要精确值的情况下不要使用浮点数。99.95 不能用浮点数或双精度数精确表示，有点像 1/3 不能用有限数量的普通十进制数字精确表示。

正如 Doug T. 所建议的，您可以使用整数来保存便士的数量。当用户键入 123.45 时，将其读取为两个整数，然后将其存储为 12345 便士，而不是 123.45 美元。

在这种情况下，您还可以尝试将您的最后一个更改`while (amount >= .01)`为类似`while (amount >= .005)`. 这不是一个可以普遍推荐的解决方案，如果这是一个真实的银行应用程序，你真的应该避免它，但它至少有助于防止一些错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:50:32.703

在这种情况下，您应该使用定点值，而不是浮点值。

尽管人们以不精确的美元来考虑金钱，但金钱以美分衡量，这是精确的。只计算美分的数量，除以 100 得到美元金额，然后取模得到美分金额。在这种情况下，浮点不是合适的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:59:14.287

二进制浮点数通常不能表示小数，即使小数的总数很小。例如，`0.1`不能准确表示。

为了处理精确值，存在不同的方法，它们都相当于使用不同的基数`2`。根据 tge 的具体需求，这些方法或多或少涉及到这些方法。对于您的情况，最简单的方法是使用固定精度而不是可变精度。要以固定精度进行计算，您只需使用一个整数，该整数表示您实际想要的值乘以 的合适幂`10`。根据您执行的计算量，您可以将逻辑打包到一个类中，也可以将其分布在整个代码中。在一个“真正的”应用程序中，我会将它打包到一个类中，在一个作业（家庭作业、面试等）中，我可能只是将逻辑直接应用于`int`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T19:05:14.217

这是固定代码，我使用了 TJD 的建议，而不是使用 .01，而是使用 .0099。对于我的问题似乎有效，谢谢大家！

```
 #include <iostream>
using namespace std;

int main()

{
   float amount;
   cout<<"enter amount" << endl;
   cin>>amount;
   int pennies=0, nickels=0, dimes=0, quarters=0, ones=0, fives=0, 
tens=0, 
twenties=0, fifties=0, hundreds=0;
   float p = .0099, n = .0499, d = .099, q = .2499;   
   while (amount >= 100) 
   {
      hundreds = hundreds +1;
      amount = amount - 100;

   }
   while (amount >= 50)
   {
      fifties = fifties +1;
      amount = amount - 50;

   }
   while (amount >= 20)
   {
      twenties = twenties +1;
      amount = amount - 20;

   }
   while (amount >= 10)
   {
      tens = tens +1;
      amount = amount - 10;

   }
   while (amount >= 5)
   {
      fives = fives +1;
      amount = amount - 5;

   }
   while (amount >= 1)
   {
      ones = ones +1;
      amount = amount - 1;

   }
   while (amount >= q)
   {
      quarters = quarters +1;
      amount = amount - q;

   }
   while (amount >= d)
   {
      dimes = dimes +1;
      amount = amount - d;

   }
   while (amount >= n)
   {
      nickels = nickels +1;
      amount = amount - n;

   }
   while (amount >= p)
   {
      pennies = pennies +1;
      amount = amount - p;

   }

   cout<<endl<<"pennies:"<< pennies;
   cout<<endl<<"nickels:"<<nickels;
   cout<<endl<<"dimes:"<<dimes;
   cout<<endl<<"quarters:"<<quarters;
   cout<<endl<<"ones:"<<ones;
   cout<<endl<<"fives:"<<fives;
   cout<<endl<<"tens:"<<tens;
   cout<<endl<<"twenties:"<<twenties;
   cout<<endl<<"fifties:"<<fifties;
   cout<<endl<<"hundreds:"<<hundreds<<endl;

return 0;
} 
```

# javascript - 如何使用 d3.js 创建趋势/指数回归线？

> ID：13590922
> 
> 赞同：6
> 
> 时间：2012-11-27T18:42:32.747
> 
> 标签：javascript, math, d3.js

我正在尝试创建一条曲线来显示图表中的数据趋势，但我无法弄清楚如何生成必要的数据点，类似于此图像中的第二个图表：

![最小二乘拟合图](../Images/e744163cbf9ad99a7f2f3e6ca52b93af.png)

我发现的所有文档和示例都使用了我头脑中的数学，任何伪代码都会很棒。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T19:59:04.673

我能够使用以下代码绘制指数回归线：

```
function square(x){return Math.pow(x,2);};

function array_sum(arr){
  var total = 0;
  arr.forEach(function(d){total+=d;});
  return total;
}

function exp_regression(Y){
  var n = Y.length;
  var X = d3.range(1,n+1);

  var sum_x = array_sum(X);
  var sum_y = array_sum(Y);
  var y_mean = array_sum(Y) / n;
  var log_y = Y.map(function(d){return Math.log(d)});
  var x_squared = X.map(function(d){return square(d)});
  var sum_x_squared = array_sum(x_squared);
  var sum_log_y = array_sum(log_y);
  var x_log_y = X.map(function(d,i){return d*log_y[i]});
  var sum_x_log_y = array_sum(x_log_y);

  a = (sum_log_y*sum_x_squared - sum_x*sum_x_log_y) /
      (n * sum_x_squared - square(sum_x));

  b = (n * sum_x_log_y - sum_x*sum_log_y) /
      (n * sum_x_squared - square(sum_x));

  var y_fit = [];
  X.forEach(function(x){
    y_fit.push(Math.exp(a)*Math.exp(b*x));
  });

  return y_fit;
} 
```

# python - Python Web 服务器 lxml.etree 符号错误导致导入错误

> ID：13590923
> 
> 赞同：0
> 
> 时间：2012-11-27T18:42:37.897
> 
> 标签：python, webserver, lxml, elementtree

`XMLModel.py`我在一个名为解析 XML 对象的模块中有一些代码`lxml.etree`。`lxml.etree`当我尝试在 IPython 或常规 Python shell 中进行一般导入时，它工作正常。我的代码的命令行版本都可以正常工作。

但是当我尝试让 Apache 将代码作为网页的一部分执行时，我得到一个奇怪的导入错误：

```
File "/var/www/html/../ws/python-util/src/util/XMLModel.py", line 4, in <module>
    import lxml.etree
ImportError: /opt/epd/7.3-2/lib/libxslt.so.1: undefined symbol: xmlXPathCompiledEvalToBoolean 
```

我已经搜索过这个“未定义的符号”问题，但对此毫无意义。它可能与构建静态版本而不是动态版本有关，`lxml`但我找不到任何清楚地说明它的东西。

有没有其他人专门在浏览器设置中遇到过这种问题？当以这种方式使用代码时，什么会导致导入突然失败？

我的操作系统是 Red Hat 4.1.2-48。目录 /opt/epd 就是我存储 Enthought Python 发行版的地方，然后还放置相关模块、.so 内容等。这一切都非常标准。

# c++ - 单个图像的超分辨率 C/C++ 源代码？

> ID：13590925
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:42:51.727
> 
> 标签：c++, c, image, image-resizing

我正在尝试构建一个使用超分辨率对单个低分辨率图像进行上采样/放大的应用程序。这种算法称为单图像超分辨率。我正在寻找该算法的任何现有的基于 C/C++ 的实现，以进行快速原型设计。如果你遇到了代码，你能帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T19:01:39.930

一个简单的 Google 搜索 ( `super resolution c++`) 会指向[这个](https://github.com/Palethorn/SuperResolution)github 存储库。这似乎是您正在寻找的东西。

# sql - 使用 MSSQL Server 查询返回每个库的图像计数时遇到问题

> ID：13590930
> 
> 赞同：1
> 
> 时间：2012-11-27T18:43:07.827
> 
> 标签：sql, sql-server, database, tsql

我目前正在尝试将另一列 (PictureCount) 添加到我的结果集中，该列从另一个表返回位于每个唯一图库中的图像计数。（GalleryID 将它们链接在一起。）每个 GalleryID 可以有 3 到 20 个与之关联的 MediaID。

我不是 SQL 专家，所以我可以使用一些帮助。我什至不确定是否可以返回我正在寻找的计数。

谢谢！

![这是 2 个表的简单视图。](../Images/c69a1706016ed3116fef9bd5af0a6671.png)

帮助您的 SQL Fiddle：[http ://sqlfiddle.com/#!3/72935/16](http://sqlfiddle.com/#!3/72935/16)

这是我当前的查询，它返回我需要的所有内容，除了我不知道该怎么做的 Count 列。

```
WITH CTE AS (
    SELECT a.GalleryTitle, a.GalleryDate, b.*,  
    ROW_NUMBER() OVER (PARTITION BY  a.GalleryID, a.GalleryTitle, a.GalleryDate 
    ORDER BY b.MediaThumb DESC) AS Rn
    FROM Media b
    INNER JOIN Galleries A
    ON a.GalleryID = b.GalleryID
    WHERE b.IsPlug = 0 AND b.IsHidden = 0
),

CTE2 AS
(
    SELECT a.GalleryTitle, a.GalleryDate, b.*,  
    1 Rn
    FROM Media b
    LEFT OUTER JOIN Galleries A
    ON a.GalleryID = b.GalleryID
)

SELECT *, NewID = NEWID() FROM CTE WHERE rn = 1 and MediaTypeID = 4

UNION ALL

SELECT *, NewID = NEWID() FROM CTE2 WHERE rn = 1 and MediaTypeID = 4 and GalleryID is NULL
ORDER BY GalleryDate DESC, GalleryID DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:07:19.507

这应该有效：

```
WITH cte As
(
   SELECT
      a.GalleryID As GalleryID_A,
      a.GalleryTitle,
      a.GalleryDate,
      b.*,

      -- You only need to partition by GalleryID:
      ROW_NUMBER() OVER (PARTITION BY b.GalleryID ORDER BY b.MediaThumb DESC) As Rn,

      -- This will return the number of media records per gallery:
      COUNT(1) OVER (PARTITION BY b.GalleryID) As Rc
   FROM
      Media As b
      -- The LEFT JOIN will include media with no gallery,
      -- so your second CTE is not needed:
      LEFT JOIN Gallery As A
      ON b.GalleryID = A.GalleryID
   WHERE
      -- This filter needs to be within the CTE,
      -- otherwise you'll exclude galleries where the last
      -- media is not type 4:
      b.MediaTypeID = 4
)
SELECT
   *
FROM
   cte
WHERE
   rn = 1
ORDER BY 
   GalleryDate DESC, 
   GalleryID DESC
; 
```

# iphone - 对 Xcode 愤怒的担忧

> ID：13590933
> 
> 赞同：2
> 
> 时间：2012-11-27T18:43:31.920
> 
> 标签：iphone, ios, xcode, ipad, irate

我很生气，它只会在模拟器中显示以下代码。

```
 [iRate sharedInstance].previewMode = YES; 
```

但是没有它就不会出现在模拟器中，这正常吗？这是视图中确实加载的整个代码。

```
 [iRate sharedInstance].applicationBundleID = @"com.example.example";// Replace this
   [iRate sharedInstance].usesUntilPrompt = 4;
   [iRate sharedInstance].previewMode = YES; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:33:11.487

它与模拟器无关。

[文档](https://github.com/nicklockwood/iRate)指定默认天数和使用直到提示是 10 天。这可能就是为什么它没有出现在你面前的原因。

无论您有什么设置，您使用的预览模式总是在启动时显示 iRate 提示。这是出于测试目的。如果您删除预览模式，并将您的天数和使用前设置为 0，它将在您第一次启动时显示。

# string - 如何在C中保存没有格式字符串的文本文件

> ID：13590937
> 
> 赞同：2
> 
> 时间：2012-11-27T18:43:46.330
> 
> 标签：string, file, format

我想使用以下功能将文本保存到文件中：

```
 void wl (char* buff[],char lp[],char mt[])
 {
  FILE *fp;
  fp=fopen(lp, mt);

  fprintf(fp, buff);
  fclose (fp);
  } 
```

如果我通过像“abcd”这样的简单输入缓冲区运行它......“abcd”将保存到目标文件中。

但是，如果我包含包含“%s %d ....”或其他 C 格式字符串的文本...它将保存错误的数据。

我想知道如何将像“ab%cd”这样的字符串保存到文件中。我知道如果我用 %% 替换 %，它会正确保存，但我无法编写正确的替换代码`%`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:33:19.633

你可以做`fprintf(fp, "%s", buff)`或使用`fputs(buff, fp)`它做同样的事情。

您可能永远不应该使用任何输入作为格式化字符串 - 这可能会导致漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:33:21.677

检查[fputs](http://www.cplusplus.com/reference/cstdio/fputs/)和[fwrite](http://www.cplusplus.com/reference/cstdio/fwrite/) - 它们都不执行任何替换。前者可能是您所需要的，并且也更易于使用，但如果您需要，fwrite 可以为您提供更多功能（它通常用于将任意二进制文件写入文件）。

希望有帮助！

**PS：** 或者，对于一个非常蹩脚的、骇人听闻的解决方案，请尝试：

```
fprintf(fp, "%s", buff); //Yuck! 
```

# .net - 将jpg文件转换为映射文件

> ID：13590941
> 
> 赞同：1
> 
> 时间：2012-11-27T18:44:01.323
> 
> 标签：.net, image, map, gis

我有一个 JPEG 文件扩展名的图像映射文件。我想将此文件转换为以下任一文件：

1.  .shp 文件
2.  .tiff (geotiff) 文件和 tcw 文件

对于第一个，使用 QuantumGIS，我能够获得 shp 文件，但它与原始地图不相似。

对于第二个，使用 QuantumGIS，我可以获得 tiff 文件，但我没有所需的 tcw 文件。

这是我第一次在 GIS 应用软件上工作，因此任何提示/建议如何进行将不胜感激。

我正在使用 .NET dotspatial 来开发这个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:03:10.920

您不能从光栅图像创建形状文件。* shp 文件通常包含一些简单的矢量和元数据。您可以使用与地图具有相同坐标的矩形自行创建形状文件（以便矩形的角点与地图图像的角点具有相同的坐标）。我不确定这在 qGIS 中是如何工作的，但您可以将 jpg 然后引用到您创建的矩形 shp。在您引用它之后，您必须自己添加所有需要的信息（街道等）。但请记住，不可能从光栅图像自动创建包含所有信息的形状文件。

在此处了解有关 shp 文件的更多信息：http: [//www.esri.com/library/whitepapers/pdfs/shapefile.pdf](http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf)

对于与 GIS 相关的问题，请查看[https://gis.stackexchange.com/（*](https://gis.stackexchange.com/) 如果您找到了一个好的、干净且简单的方法，您会赚很多钱）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T05:36:56.587

首先，您需要在 QuantumGIS 中对您的 jpeg 栅格进行地理配准，所以您已经完成了。您也可以查看此[视频](http://www.youtube.com/watch?v=xcqzEpoRuok&lr=1)。

假设您需要的不是 .tcw 而是 .tfw 世界文件，您可以尝试通过 File > Export > Export Raster > r.out.gdal 导出 tiff。实际上，您可以为您的 tiff 手动编写[world 文件。](http://en.wikipedia.org/wiki/World_file)

要获取 shapefile，您可以自动对栅格进行矢量化（Raster > Conversion > Polygonize (Raster to vector) 菜单，选中[此项](http://confound.me.uk/maps/ppv4.pdf)）或手动（再次查看视频）。

# ruby - Ruby OpenSSL AES 生成随机密钥

> ID：13590942
> 
> 赞同：3
> 
> 时间：2012-11-27T18:44:09.710
> 
> 标签：ruby, openssl, key, aes, encryption

我有一个我似乎无法弄清楚的基本问题。我正在尝试在 AES-256-CBC 中生成一个可用于加密/解密数据的随机密钥。

这是我正在做的事情：

```
require 'openssl'
cipher = OpenSSL::Cipher::AES256.new(:CBC)
cipher.encrypt
puts cipher.random_key
>> "\xACOM:\xCF\xB3@o)<&y!\x16A\xA1\xB5m?\xF1 \xC9\x1F>\xDB[Uhz)\v0" 
```

这给了我上面的字符串，它看起来不像我过去使用的键。正如您可能会说的那样，我对加密非常陌生，但我试图了解是否需要进一步准备字符串。我在 Rails 中创建了一个快速视图，因此我可以转到 /generate，它会呈现一个带有随机键的简单 html 页面。它甚至不会呈现页面并抱怨无效的 uTF8。我可以让页面显示的唯一方法是首先对密钥进行 Base64 编码。

我知道我错过了一些愚蠢的东西。任何想法都会很棒。

编辑：如果我进行 Base64 编码，这就是它的样子。我应该去掉 = 标志还是什么？

```
AES-128-CBC
Random Key: 0xdq+IZdmYHHbLC9Uv8jgQ== 
Random IV: vp08d/nFGE3R8HsmOzYzOA==

AES-256-CBC
Random Key: BW0wY5fUkcwszV5GIczI+D45eFOz/Ehvw5XdZIavVOQ= 
Random IV: D0pXdwQAqu+XSOv8E/dqBw== 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-09T20:21:41.437

要回答您的问题（引自维基百科）：

> '==' 序列表示最后一组只包含一个字节，而'=' 表示它包含两个字节。
> 
> 理论上，解码不需要填充字符，因为可以从 Base64 位数计算出丢失字节数。在某些实现中，填充字符是强制性的，而对于其他实现则不使用。

对于 Ruby 和您的用例，答案是：剥离`=`

# ruby-on-rails - 使用 oauth-plugin 在 Rails 中使用 Jira 2L0 在 oauth 中出现 401 未经授权的错误

> ID：13590946
> 
> 赞同：3
> 
> 时间：2012-11-27T18:44:15.313
> 
> 标签：ruby-on-rails, oauth, jira, 2-legged

我正在尝试使用 2-legged 身份验证来连接 OAuth 使用者。我有两个问题：

1) 是否可以将 Oauth 与自定义 REST 插件一起使用（而不是内置 API）

2) 作为内置 REST API 的测试，我正在尝试以下操作并收到：

```
<Net::HTTPUnauthorized 401 Unauthorized readbody=true>
{"errorMessages":["You do not have the permission to see the specified issue","Login Required"],"errors":{}} 
```

下面是测试方法：

```
jira_url = "http://localhost:2990/jira"

consumer_key = "hardcoded-consumer"
consumer_secret = OpenSSL::PKey::RSA.new(IO.read(File.dirname(__FILE__) + "/../rsakey.pem"))

@consumer ||= OAuth::Consumer.new(consumer_key, consumer_secret, {
    :site => 'http://localhost:2990',
    :context_path       => '/jira',
    :signature_method   => 'RSA-SHA1',
    :auth_type          => :oauth,
    :scheme => :header,
    :oauth_callback => false,
    :ssl_verify_mode    => OpenSSL::SSL::VERIFY_PEER,
    :use_ssl            => true,
    :http_method => :post,
    :request_token_path => jira_url + '/plugins/servlet/oauth/request-token',
    :access_token_path  => jira_url + '/plugins/servlet/oauth/access-token',
    :authorize_path     => jira_url + '/plugins/servlet/oauth/authorize'
})

testurl = jira_url + "/rest/api/latest/issue/SPI-1"

puts "1 #################################### first method"
req = @consumer.create_signed_request(:get, testurl, nil)
res = Net::HTTP.start('localhost', '2990') { |http| http.request(req) }
puts res.inspect
puts res.body

puts "2 #################################### second method"
@acc_tok = OAuth::AccessToken.new @consumer
resp = @acc_tok.get(testurl)
puts @acc_tok.inspect
puts resp.inspect
puts resp.body 
```

两种方法都输出相同的错误。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T09:09:33.967

答案 1\. [OAuth](http://en.wikipedia.org/wiki/OAuth)是一种授权框架，而[REST](https://stackoverflow.com/questions/671118/what-exactly-is-restful-programming)是一种无状态、客户端-服务器、可缓存的通信协议。所以是的，您可以通过自定义 REST 插件使用 OAuth 进行身份验证。

回答 2。您可以尝试不使用 SSL 或使用`:ssl_verify_mode => OpenSSL::SSL::VERIFY_NONE`如果它有效，那么问题在于您的 SSL 连接。或者，您可以尝试基本身份验证：

```
{
     :username => "*Your JIRA username*",
     :password => "*Your JIRA password*",
     :site     => 'http://localhost:2990/',
     :context_path => 'jira',
     :auth_type => :basic,
     :use_ssl => true,
     :signature_method   => 'RSA-SHA1',
     :ssl_verify_mode    => OpenSSL::SSL::VERIFY_NONE
} 
```

我发现[这个宝石](https://github.com/sumoheavy/jira-ruby)非常有用。

# javascript - 在javascript中通过引用传递

> ID：13590948
> 
> 赞同：0
> 
> 时间：2012-11-27T18:44:23.980
> 
> 标签：javascript, pass-by-reference, jsplumb

大家好，我正在使用 javascript 和 jsplumb 库我遇到了问题，需要专家的帮助。

这是我的场景。

我有使用 jsplumb 库创建连接的功能。

```
createlink = function (arg1, arg2 , con) {
  // doing some thing ;
    con = jsPlumb.connect({
             source: arg1,
             target: arg2
             });
 // doing some thing   
} 
```

但问题是我想访问该函数之外的函数中`con`创建的相同`creatlink()`内容，所以我所做的是

```
/*calling the function by passing the con as refrence*/
var con;
createlink("a", "b", con);
con.setParameter('name', "mycon"); // error as con is undefined 
```

我已经读过，在 JS 中对象可以作为输出参数传递或通过引用传递。

那么在我不想返回它的函数之外访问我的 con 的正确和正确的方法应该是什么，因为这将创建一个单独的副本。

感谢任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:49:03.550

您可以从函数返回连接对象：

```
createlink = function (arg1, arg2) {
    return jsPlumb.connect({
        source: arg1,
        target: arg2
    });
}

var con = createlink("a", "b"); 
```

# ajax - 如何在提交时中止远程 Jquery Validator 方法

> ID：13590949
> 
> 赞同：0
> 
> 时间：2012-11-27T18:44:27.267
> 
> 标签：ajax, jquery, jquery-validate

我的网站是[http://www.extrabux.com/users/login](http://www.extrabux.com/users/login)

当用户登录时，Jquery Validate 插件使用“远程”功能来检查提供的电子邮件地址是否作为用户存在于我们的数据库中。如果连接和我们的服务器很快，用户甚至在输入密码之前就会看到反馈。

```
email: { 
    required: true, 
    email: true, 
    remote: {//http://docs.jquery.com/Plugins/Validation/Methods/remote
        url: 'check-signin-email-address',
            type: "post",
            data: {
                emailAddress: function() {
                    return $("#email").val();
                }
            }
        }
} 
```

但是，如果连接或我们的服务器很慢，则会在提交表单之前导致不希望的延迟（因为 Jquery Validate 插件会一直等到表单被确认有效）。

我想要的是：

*   如果远程查询在用户提交表单之前完成，它应该阻止提交（在它发现电子邮件地址不在数据库中的情况下）。
*   如果用户在远程查询完成之前提交表单，远程查询验证规则应该被忽略（这样就没有延迟——服务器端验证会发现用户不存在）。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:59:57.310

```
 function checkEmail(){  
   $("#email").removeClass('email'); // this stops validation during ajax
   //might want to add a loading image to let user know 
     $.ajax({
       type: //type
       url: //url to check email,
       data: //email to check,
       success: function (msg) {
           $("#email").addClass('email'); //turns validation back on
               //take away loading image

            if (msg.GoodEmail != "GoodEmail" ) { //however you check for existing email
              $("#email").addClass('error'); //forces failed validation
               }
         }
      });
 } 
```

这是一个使用 jquery 的 ajax 的例子，通过它你可以在 ajax 之前处理事件，成功时，错误时，多一点控制这种方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:46:57.150

我想我想通了。我没有使用“remote”选项，而是使用 addMethod 创建了一个我称之为“isExtrabuxMember”的规则。我还创建了一些全局变量并使用绑定到#email 字段更改的ajax 来检查提供的电子邮件地址是否属于任何现有的Extrabux 成员。

如果这对您有帮助或者您有更好的想法，请发表评论。

我现在在“验证”插件调用上方有这个：

```
jQuery.validator.addMethod("isExtrabuxMember", function(value, element) {
    var emailRemoteFuncResult = checkSigninEmailAddressResult === null ? true : checkSigninEmailAddressResult;
    return emailRemoteFuncResult;
});

var checkSigninEmailAddressResult = null;
var emailXhrCheck;
$('#email').bind('change keyup', function(){
    checkSigninEmailAddressResult = null;
    if(emailXhrCheck){
        emailXhrCheck.abort();
    }
    emailXhrCheck = $.ajax({
        url: '/users/check-signin-email-address',
        type: "post",
        async: true,
        data: {
            emailAddress: function() {
                return $("#email").val();
            }
        },
        success: function(data){
            checkSigninEmailAddressResult = data;
            $("#email").valid();
        }
    });
});
$('#loginForm').submit(function(){
    if(emailXhrCheck){
        emailXhrCheck.abort();
    }
}); 
```

然后在“验证”插件调用中：

```
rules: {              
    email: { 
        required: true, 
        email: true, 
        isExtrabuxMember: true                     
    }, 
    password: { 
        required: true, 
        minlength: 4 
    }      
}, 
messages: {
    email: {
        isExtrabuxMember: function(){
            var currentEmail = $('#email').val();
            return $.validator.format('<b>{0}<\/b> does not yet have an Extrabux account. <a href="\/users\/register?emailAddress={0}">Sign up?<\/a>', currentEmail);
        }
    },
    password: { 
        required: "Oops, you forgot to enter your password!"
    }                    
} 
```

# java - Java 如何创建一个 UTC 并将几毫秒添加到同一个 UTC 对象

> ID：13590957
> 
> 赞同：0
> 
> 时间：2012-11-27T18:45:09.507
> 
> 标签：java, utc

```
static String createUTCTime()
{
    Calendar cal = new GregorianCalendar(TimeZone.getTimeZone("UTC"));
    cal.add(Calendar.SECOND, 10);

    SimpleDateFormat f = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss");
    f.setCalendar(cal);

    return f.format(new Date());
} 
```

基本上我想在下面做

```
Calendar objectX = createUTCTime();
//2012-Nov-27 18:35:40

x.addMS(10);
//2012-Nov-27 18:35:50 
```

您如何处理 UTC 时间来操纵它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T18:49:55.400

`Date`只是一个时间点，它不包含任何时区信息。如果您想使用时区和日期，您需要`Calendar`：

```
Calendar cal = new GregorianCalendar(TimeZone.getTimeZone("UTC"));
cal.add(Calendar.SECONDS, 10); 
```

现在是棘手的部分，您不能*只*将其转换为`Date`( `cal.getTime()`)，因为它会丢失时区（但仍会代表相同的时间点）。您应该做的是创建一个配置为使用 UTC 的 SimpleDateFormat`。

另一方面，如果您只需要几秒钟或几毫秒，`Date`就可以了。只要记住在正确的时区**格式化它**。但是你不应该使用`Date`几个小时和上面的所有东西（假设小时是 3600000 毫秒有时是错误的，因为闰秒，DST 等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T18:48:49.677

真的不清楚您要做*什么*-但是如果您要创建一个对象以进一步使用，则不应将其转换为字符串表示形式，这就是这样`SimpleDateFormat.format`做的。

老实说，用于处理日期和时间的 Java API 非常糟糕——你最好使用[Joda Time](http://joda-time.sf.net)。例如：

```
DateTime x = new DateTime(DateTimeZone.UTC);
x = x.plusMillis(10); 
```

Joda Time 为日期和时间提供了大量的*不可变*类型，它们的可读性明显优于可变`Calendar`和`Date`类型。此外，它支持更多类型来表示不同类型的值。

真的，避免像瘟疫一样的 java.util.Date/Calendar :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T19:04:46.447

您可以使用以下代码。

```
 Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
    cal.add(Calendar.MILLISECOND, 10);

    DateFormat df = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss");
    SimpleDateFormat f = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss");
    f.setTimeZone(cal.getTimeZone());
    System.out.println(f.format(cal.getTime())); 
```

getTime 提供 Date 对象，它没有关于 timeZone 的任何信息。By Date 对象可以在 GMT(toGMTString()) 和本地时区 (toLocalString()) 中显示日期。

此代码将以所需格式为您提供 UTC 时间。

# java - 如何使用 JUNG 的注释系统注释我的图表？

> ID：13590960
> 
> 赞同：1
> 
> 时间：2012-11-27T18:45:14.697
> 
> 标签：java, swing, jung

我似乎找不到任何关于注释我的 JUNG 图的文档。我拼凑的最多的是：

```
AnnotationRenderer renderer = new AnnotationRenderer();
AnnotationPaintable annotate = new AnnotationPaintable(viewer.getRenderContext(), renderer);

Shape square = new Rectangle(0, 0, 50, 50);
Annotation<Shape> a = new Annotation<Shape>(square, Annotation.Layer.UPPER, null, true,
                new Point2D.Double(0, 0));
annotate.add(a); 
```

我该如何接受并开始在 AnnotationPaintable 对象中绘制实际注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:04:08.087

答案是将其添加到您的可视化查看器中：

```
viewer.addPostRenderPaintable(...) 
```

# sql - 查询与单行表的CROSS JOIN

> ID：13590966
> 
> 赞同：1
> 
> 时间：2012-11-27T18:45:38.887
> 
> 标签：sql, ms-access, join, ms-access-2007, cross-join

我有一个大查询和一个单行表（我在其中存储了一些常量）。

考虑到 Access 不支持与查询的交叉联接，将表的行与查询的每一行联接的最佳方法是什么？

```
SELECT * from (subquery), table -- Invalid in Access 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:01:16.297

`some_query`Access 将接受一个名为的查询和一个像这样命名的表之间的交叉连接`some_table`......

```
SELECT *
FROM some_query, some_table; 
```

用你的名字，试试这种方式...

```
SELECT * from [some query], [table] 
```

IOW，去掉括号，将数据源名称括在方括号中，因为里面有空格`some query`，因为`table`是保留字。

OTOH，如果您打算`some query`成为 SQL 语句文本的占位符而不是已保存查询的名称，请考虑此示例。

```
SELECT *
FROM 
(SELECT * FROM agents) AS sub, Dual; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T19:00:06.553

根据[Microsoft](http://office.microsoft.com/en-us/access-help/join-tables-and-queries-HA010096320.aspx)和[this previous question](https://stackoverflow.com/questions/1231676/how-to-use-cross-join-in-access)，交叉连接是合法的。你说它是**无效**的，但你尝试时是否收到错误消息？

# java - 使用 MySQL 的 Hibernate 类中的未知实体错误

> ID：13590968
> 
> 赞同：0
> 
> 时间：2012-11-27T18:45:46.580
> 
> 标签：java, mysql, hibernate

我正在做一个项目，这是我第一次使用休眠技术。我将休眠配置文件设置为

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE hibernate-configuration PUBLIC
            "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
            "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
    <hibernate-configuration>
        <session-factory>
            <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
            <property name="hibernate.connection.password">diobookbla</property>
            <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/mobil</property>
            <property name="hibernate.connection.username">root</property>
            <property name="hibernate.default_schema">mobil</property>
            <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>

        </session-factory>
    </hibernate-configuration> 
```

我已经完成了逆向工程配置，因此我将 MySQL 表作为 Java 类。这是我的用户类；

```
 package Tables;
    // default package
    // Generated Nov 24, 2012 1:08:44 AM by Hibernate Tools 3.4.0.CR1

    import java.util.HashSet;
    import java.util.Set;

    /**
     * Users generated by hbm2java
     */
    public class Users implements java.io.Serializable {

private Integer userId;
private Integer userFbId;
private String userFbToken;
private String userName;
private String userLastName;
private String userEmail;
private String userAdress;
private String userFavouritedTopicsCount;
private String userCreatedTopicsCount;
private String userRecommendedTopicsCount;
private Integer userFollowingsCount;
private Integer userFollowersCount;
private String userBio;
private String userProfilePicUrl;
private Boolean userIsOnline;
private Integer userPoint;
private Set topicses = new HashSet(0);
private Set mentionsForMentionedId = new HashSet(0);
private Set favouritetopicses = new HashSet(0);
private Set mentionsForMentionerId = new HashSet(0);
private Set postlikes = new HashSet(0);
private Set userfollowsForFollowingId = new HashSet(0);
private Set topicrecommends = new HashSet(0);
private Set userfollowsForFollowerId = new HashSet(0);

public Users() {
}

public Users(Integer userFbId, String userFbToken, String userName,
        String userLastName, String userEmail, String userAdress,
        String userFavouritedTopicsCount, String userCreatedTopicsCount,
        String userRecommendedTopicsCount, Integer userFollowingsCount,
        Integer userFollowersCount, String userBio,
        String userProfilePicUrl, Boolean userIsOnline, Integer userPoint,
        Set topicses, Set mentionsForMentionedId, Set favouritetopicses,
        Set mentionsForMentionerId, Set postlikes,
        Set userfollowsForFollowingId, Set topicrecommends,
        Set userfollowsForFollowerId) {
    this.userFbId = userFbId;
    this.userFbToken = userFbToken;
    this.userName = userName;
    this.userLastName = userLastName;
    this.userEmail = userEmail;
    this.userAdress = userAdress;
    this.userFavouritedTopicsCount = userFavouritedTopicsCount;
    this.userCreatedTopicsCount = userCreatedTopicsCount;
    this.userRecommendedTopicsCount = userRecommendedTopicsCount;
    this.userFollowingsCount = userFollowingsCount;
    this.userFollowersCount = userFollowersCount;
    this.userBio = userBio;
    this.userProfilePicUrl = userProfilePicUrl;
    this.userIsOnline = userIsOnline;
    this.userPoint = userPoint;
    this.topicses = topicses;
    this.mentionsForMentionedId = mentionsForMentionedId;
    this.favouritetopicses = favouritetopicses;
    this.mentionsForMentionerId = mentionsForMentionerId;
    this.postlikes = postlikes;
    this.userfollowsForFollowingId = userfollowsForFollowingId;
    this.topicrecommends = topicrecommends;
    this.userfollowsForFollowerId = userfollowsForFollowerId;
}

public Integer getUserId() {
    return this.userId;
}

public void setUserId(Integer userId) {
    this.userId = userId;
}

public Integer getUserFbId() {
    return this.userFbId;
}

public void setUserFbId(Integer userFbId) {
    this.userFbId = userFbId;
}

public String getUserFbToken() {
    return this.userFbToken;
}

public void setUserFbToken(String userFbToken) {
    this.userFbToken = userFbToken;
}

public String getUserName() {
    return this.userName;
}

public void setUserName(String userName) {
    this.userName = userName;
}

public String getUserLastName() {
    return this.userLastName;
}

public void setUserLastName(String userLastName) {
    this.userLastName = userLastName;
}

public String getUserEmail() {
    return this.userEmail;
}

public void setUserEmail(String userEmail) {
    this.userEmail = userEmail;
}

public String getUserAdress() {
    return this.userAdress;
}

public void setUserAdress(String userAdress) {
    this.userAdress = userAdress;
}

public String getUserFavouritedTopicsCount() {
    return this.userFavouritedTopicsCount;
}

public void setUserFavouritedTopicsCount(String userFavouritedTopicsCount) {
    this.userFavouritedTopicsCount = userFavouritedTopicsCount;
}

public String getUserCreatedTopicsCount() {
    return this.userCreatedTopicsCount;
}

public void setUserCreatedTopicsCount(String userCreatedTopicsCount) {
    this.userCreatedTopicsCount = userCreatedTopicsCount;
}

public String getUserRecommendedTopicsCount() {
    return this.userRecommendedTopicsCount;
}

public void setUserRecommendedTopicsCount(String userRecommendedTopicsCount) {
    this.userRecommendedTopicsCount = userRecommendedTopicsCount;
}

public Integer getUserFollowingsCount() {
    return this.userFollowingsCount;
}

public void setUserFollowingsCount(Integer userFollowingsCount) {
    this.userFollowingsCount = userFollowingsCount;
}

public Integer getUserFollowersCount() {
    return this.userFollowersCount;
}

public void setUserFollowersCount(Integer userFollowersCount) {
    this.userFollowersCount = userFollowersCount;
}

public String getUserBio() {
    return this.userBio;
}

public void setUserBio(String userBio) {
    this.userBio = userBio;
}

public String getUserProfilePicUrl() {
    return this.userProfilePicUrl;
}

public void setUserProfilePicUrl(String userProfilePicUrl) {
    this.userProfilePicUrl = userProfilePicUrl;
}

public Boolean getUserIsOnline() {
    return this.userIsOnline;
}

public void setUserIsOnline(Boolean userIsOnline) {
    this.userIsOnline = userIsOnline;
}

public Integer getUserPoint() {
    return this.userPoint;
}

public void setUserPoint(Integer userPoint) {
    this.userPoint = userPoint;
}

public Set getTopicses() {
    return this.topicses;
}

public void setTopicses(Set topicses) {
    this.topicses = topicses;
}

public Set getMentionsForMentionedId() {
    return this.mentionsForMentionedId;
}

public void setMentionsForMentionedId(Set mentionsForMentionedId) {
    this.mentionsForMentionedId = mentionsForMentionedId;
}

public Set getFavouritetopicses() {
    return this.favouritetopicses;
}

public void setFavouritetopicses(Set favouritetopicses) {
    this.favouritetopicses = favouritetopicses;
}

public Set getMentionsForMentionerId() {
    return this.mentionsForMentionerId;
}

public void setMentionsForMentionerId(Set mentionsForMentionerId) {
    this.mentionsForMentionerId = mentionsForMentionerId;
}

public Set getPostlikes() {
    return this.postlikes;
}

public void setPostlikes(Set postlikes) {
    this.postlikes = postlikes;
}

public Set getUserfollowsForFollowingId() {
    return this.userfollowsForFollowingId;
}

public void setUserfollowsForFollowingId(Set userfollowsForFollowingId) {
    this.userfollowsForFollowingId = userfollowsForFollowingId;
}

public Set getTopicrecommends() {
    return this.topicrecommends;
}

public void setTopicrecommends(Set topicrecommends) {
    this.topicrecommends = topicrecommends;
}

public Set getUserfollowsForFollowerId() {
    return this.userfollowsForFollowerId;
}

public void setUserfollowsForFollowerId(Set userfollowsForFollowerId) {
    this.userfollowsForFollowerId = userfollowsForFollowerId;
}

    } 
```

这是我的使用我的用户类的类

```
 public boolean SaveDatabase(Object object) {        
    try {

        SessionFactory sessionfactory = new Configuration().configure()
                .buildSessionFactory();
        session = sessionfactory.openSession();
        try {
            session.save(object);
            session.flush();
        } catch (Exception e) {
            System.out.println(e.getMessage());
            return false;
        }
    } catch (Exception e) {
        System.out.println(e.getMessage());
        return false;
    } finally {

        session.close();
    }
    return true;
    } 
```

和

```
public boolean RegisterUsers(Users user) {

    if (SaveDatabase(user)) {
        return true;
    } else {
        return false;
    }

} 
```

至少这是我的测试课。

```
import Tables.Users;
import DAO.LogIn;

public class Test {
public static void main(String[] args) {
        //Test RegisterUser and GetUsersWithId in here

    LogIn test = new LogIn();
    Users user = new Users();

    user.setUserEmail("email");
    user.setUserAdress("adres here");
    user.setUserFbId(3);

    test.RegisterUsers(user);

}
} 
```

当我执行我的测试类时，我得到了这个错误；

未知实体： Tables.Users 。我已经对此进行了一些研究，并且我认为我必须创建persistence.xml 文件或使用spring 技术。

抱歉发了很长的帖子，我正在等待任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:03:05.497

您需要让 Hibernate 知道哪个类将映射到持久层（例如数据库表）。您可以使用注释或使用 hbm.xml 方法来做到这一点。在您的 User 类中，我没有看到任何休眠注释。因此，我猜你想用 hbm.xml 来做。你需要添加类似的东西

```
<mapping resource="path/to/your/User.hbm.xml"/> 
```

到你的 hibernate.cfg.xml。

当然，您还必须创建 User.hbm.xml。对此进行一些研究，如何进行休眠映射。

我个人建议您使用注释进行休眠映射。网上有很多关于这方面的资源。

祝你好运！

# android - 当我发布新版本的数据库应用程序时，数据库会是新版本吗？

> ID：13590971
> 
> 赞同：0
> 
> 时间：2012-11-27T18:45:51.767
> 
> 标签：android, database, assets

我正在构建一个新应用程序，它使用我预先创建的数据库。我将数据库放在资产文件夹中，因此当用户首次下载应用程序时，数据库将从应用程序内部的资产文件夹中复制。

**现在的问题是，当我使用新的更新（预先创建的）数据库（相同的数据库架构，只有更多的记录）发布我的应用程序的新版本时会发生什么**。

我认为会有一个问题，因为数据**（数据库）在升级期间保留**（？？）。因此，当用户**第一次运行我的应用程序的新版本**时，程序不会从资产文件夹复制新数据库，因为已经有一个具有相同文件名的数据库。

（每次程序运行时，它都会检查是否已经存在数据库，如果没有 - 第一次 - 它会在内部复制数据库）

在我发布我的申请之前，我想知道上述问题的答案，所以我会做好准备..

谢谢你提前。

# python - Python：使用多个 .png 图像制作视频

> ID：13590976
> 
> 赞同：47
> 
> 时间：2012-11-27T18:46:23.907
> 
> 标签：python

我正在尝试使用一系列 .png 图像制作视频。我找到了这个 Python 脚本，但我不完全确定如何使用它：

[https://sites.google.com/site/timelapsepy/home](https://sites.google.com/site/timelapsepy/home)

我也试图研究opencv，但它似乎没有为我正确安装。关于将多个图像串在一起以创建延时视频的简单程序的任何想法？如果可能的话，我想为此使用 Python。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-27T19:19:49.610

如果你真的需要一个脚本化的 python 解决方案，你可以考虑使用[PIL](http://www.pythonware.com/products/pil/)

但是如果你只是想轻松地将一系列 png 图像转换为电影，你可以简单地使用 ffmpeg：

```
ffmpeg -f image2 -r 1/5 -i image%05d.png -vcodec mpeg4 -y movie.mp4 
```

此命令获取具有 5 位填充的图像 (image00001.png) 并将它们压缩为 mpeg4 quicktime，以保持每帧 5 秒的速率。如果您的图像更大，您可以使用不同的 fps：（`-r 24`每秒 24 帧）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-02T12:32:35.823

而不是**ffmpeg**，您可能想使用**avconv**

```
avconv -f image2 -i figMatplotlib%d.png -r 76 -s 800x600 foo.avi 
```

# c++ - 在进程外使用 MiniDumpWriteDump 时如何获取异常信息？

> ID：13590980
> 
> 赞同：8
> 
> 时间：2012-11-27T18:46:41.950
> 
> 标签：c++, windows, visual-c++, unhandled-exception, minidump

当使用 MiniDumpWriteDump 函数在 Windows 上创建进程的核心转储时，建议（例如[here](https://groups.google.com/forum/?fromgroups=#!topic/microsoft.public.windbg/Kca8A-pV914)和[here](https://stackoverflow.com/a/10672472/321013)）`MiniDumpWriteDump`从另一个“看门狗”进程运行，因为从同一进程中调用它可能无法正常工作。

目前，我们的应用程序在一个未处理的异常*上*调用它（我们从一个看门狗线程执行它）。由于我们有时会遇到无法正常工作的问题，因此我们希望将其移至单独的进程。

现在，通知另一个进程开始写入转储是微不足道的（只需使用一个事件，信号量，你可以命名它）但是我如何将`LPEXCEPTION_POINTERS`我为我注册的回调函数获得的信息传递`SetUnhandledExceptionFilter`给另一个进程，以便它可以传递给`MiniDumpWriteDump`s`ExceptionParam`参数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T19:50:03.470

您还需要 MINIDUMP_EXCEPTION_INFORMATION.ThreadId 值。最简单的方法，也是我让它工作的方法，是使用内存映射文件来传输 ThreadId 和 ExceptionPointers。以及一个唤醒看门狗的命名事件。指针在看门狗进程的上下文中无效并不重要。

在被监视的进程中使用 CreateFileMapping + MapViewOfFile 作为其初始化的一部分，在看门狗中使用 OpenFileMapping + MapViewOfFile。然后，您的 SetUnhandledExceptionFilter 应该只调用 GetCurrentThreadId() 并将 tid 和 pExcept 复制到内存映射文件视图，调用 SetEvent() 唤醒看门狗并永远阻塞，直到看门狗终止它。

# c - 屏幕上看不到实心球体

> ID：13590981
> 
> 赞同：1
> 
> 时间：2012-11-27T18:46:45.960
> 
> 标签：c, opengl, glut

我正在尝试将照明与 3D 图形结合起来。球体的深度为 100，半径为 100。我使用 translatef 使其远离眼睛位置。
但是屏幕上什么也没有显示：

```
#import <OpenGL/OpenGL.h>
#import <GLUT/GLUT.h>

GLfloat width=500, height=500;
GLfloat angle=0.0;

void makeRound (GLfloat* angle)
{
    if(*angle>360.0)
    {
        *angle-=360.0;
    }
    else if(*angle<0.0)
    {
        *angle+=360.0;
    }
}

void init(void)
{
    GLfloat mat_specular[]   = { 1.0, 0.0, 0.0, 0.0 };
    GLfloat mat_diffuse[]    = { 0.9, 0.0, 0.0, 0.0 };
    GLfloat mat_shininess[]  = { 50.0 };
    GLfloat light_position[] = { 5.0, 5.0, 5.0, 1.0 };
    GLfloat white_light[]    = { 1.0, 1.0, 1.0, 1.0 };
    GLfloat lmodel_ambient[] = { 0.1, 0.5, 0.1, 1.0 };

    glEnable(GL_DEPTH_TEST);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(0, 0, 0, 0, 0, 100, 0, 1, 0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45, 1, 1, 1000);

    glClearColor (0.0, 0.0, 0.0, 0.0);
    glShadeModel (GL_SMOOTH);

    glMaterialfv(GL_FRONT, GL_DIFFUSE, mat_diffuse);
    glMaterialfv(GL_FRONT, GL_SPECULAR, mat_specular);
    glMaterialfv(GL_FRONT, GL_SHININESS, mat_shininess);

    glLightfv(GL_LIGHT0, GL_POSITION, light_position);
    glLightfv(GL_LIGHT0, GL_DIFFUSE, white_light);
    glLightfv(GL_LIGHT0, GL_SPECULAR,white_light);
    glLightModelfv(GL_LIGHT_MODEL_AMBIENT,lmodel_ambient);

    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
}

void display(void)
{
    glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glPushMatrix();
    glRotatef(angle, 0, 1, 0);
    glTranslatef(0, 0, 100);
    glutSolidSphere (100.0, 80, 64);
    glPopMatrix();

    glutSwapBuffers();
}

void keyboard(unsigned char key, int x, int y)
{
    switch (key)
    {
        case '+':
            angle+=5.0;
            makeRound(&angle);
            glutPostRedisplay();
            break;
        case '-':
            angle-=5.0;
            makeRound(&angle);
            glutPostRedisplay();
            break;
        default:
            break;
    }
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode (GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowSize (width, height);
    glutInitWindowPosition (100, 100);
    glutCreateWindow (argv[0]);
    glutDisplayFunc(display);
    glutKeyboardFunc(keyboard);
    init ();
    glutMainLoop();
    return 0;
} 
```

**更新**

这就是我看到的：

```
glTranslatef(0,0,-200); 
```

![在此处输入图像描述](../Images/8153437d509493e3c101094b68afe73a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T18:59:54.957

由于您的翻译，您实际上位于球体的边缘。这意味着多边形实际上会通过“你”。由于靠近剪切平面，您将看不到任何东西，并且由于背面剔除，您看不到球体另一侧的 tris。

设置：

```
glCullFace( GL_FRONT ); 
```

或者设置变换以将球体推得更远：

```
glTranslatef(0, 0, -200); 
```

# php - 一般来说，在 Symfony2 或 PHP/MySQL 中进行批量/批量更新的最佳方法是什么？

> ID：13590983
> 
> 赞同：2
> 
> 时间：2012-11-27T18:46:58.440
> 
> 标签：php, mysql, symfony

我在服务中有一个函数，它基本上从几个表中提取数据并构建一个索引表。

问题是我有超过 6000 条记录，所以它只需要很长时间，有时会达到内存限制。

是否有设计模式或方法可以通过批处理或 Web 服务来实现？理想情况下，我希望能够不断更新用户的进度。

任何想法或指示将不胜感激。

**更新：**

我拥有的表格基本上是与电子商务网站上的产品一起使用的表格。我有以下表格：

*   产品（基本产品信息）
*   产品描述（描述和元信息）
*   产品价格（产品的价格信息）
*   产品图片（产品的图片信息）
*   产品功能（任何产品功能）
*   产品选项（任何产品选项）

然后，我有一个产品索引表，它从所有这些表中提取一些信息，以便在不需要大量连接的情况下更快、更轻松地搜索和过滤结果。

我需要一些关于开发重建索引表的方法/函数/进程/服务的最佳方法的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:38:19.510

我无法告诉您如何重建索引，但我可以向您展示我一直用于处理大型结果集的方法。

```
$em = $this->getContainer()->get('doctrine')->getEntityManager();
$repo = $em->getRepository('MyBundle:Item');
$qb = $repo->createQueryBuilder('i') // build query ...

// get iterator for query; this way only a single row is
// hydrated at a time.
$it = $qb->getQuery()->iterate();
foreach ($it as $row) {
    // $row[0] will be the fetched entity.
    $ent = $row[0];

    // do stuff with entity ...
    // ...

    // Once you're done with the entity detach it to
    // save memory and speed up the doctrine ORM.
    // make sure you DO NOT use the detached entity
    // in any way after this call (unless you re-merge() it).
    $em->detach($row[0]);
} 
```

# c# - 如何在 MonoDevelop/.Net 中自动生成单元测试？

> ID：13590985
> 
> 赞同：2
> 
> 时间：2012-11-27T18:47:07.373
> 
> 标签：c#, .net, unit-testing, testing, monodevelop

我希望在 MonoDevelop/.Net 中自动生成单元测试。

我试过 NUnit，但它不会生成测试。在 Eclipse 中，插件[randoop](http://randoop.googlecode.com/hg/doc/index.html)执行此操作，但是它针对 Java 和 JUnit。

如何在 MonoDevelop 和/或 .Net 中自动生成单元测试？或者也许有一个我不知道的现有工具......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T20:40:08.170

调用具有不同（随机）输入的方法只是该过程的一部分。您还需要为每个输入定义正确的结果，我认为工具无法为您做到这一点。

randoop 似乎只检查很少的非常基本的属性`equal`，这在 imo 中用处不大，还可能导致正确性的错误印象（“嘿，看，所有测试都通过了，我的软件没问题”......）

同样，只是随机生成代码（和输入）具有不确定测试结果的风险。您可能会或可能不会得到真正发现代码缺陷的测试。

也就是说，快速谷歌搜索为您可能想要采取的方法提供了以下起点：

*   您可能对使用测试用例生成器感兴趣（这篇[CodeProject 文章](http://www.codeproject.com/Articles/28461/NUnit-Test-Case-Code-Generator)描述了一个非常简单的）。他们支持您生成“样板”代码，并且可以确保您不会错过任何要测试的类/方法。当然，生成的测试需要通过定义正确的（即有意义的）输入和（正确的）输出值来进行调整。谷歌搜索“NUnit Test generators”将为您提供其他链接，也适用于商业软件，我不想在这里重复......
*   NUnit（和其他测试框架）支持*参数化*测试：这些可以用来测试一整类输入场景。对于 NUnit，我找到了[Random](http://www.nunit.org/index.php?p=random&r=2.5.9)属性，它可以让您为您的方法生成随机输入（在一定范围内）。记住我上面写的关于随机测试输入的内容：这些测试的结果将无法重现，这使得它们对于自动或回归测试毫无用处。

也就是说，还要看看[这个问题](https://stackoverflow.com/questions/357059/unit-test-case-generator)（当然还有其他关于 SO 的问题），这可能支持我*反对*自动单元测试生成的论点。

# python - Scipy样条曲线中的峰值曲率

> ID：13590989
> 
> 赞同：3
> 
> 时间：2012-11-27T18:47:39.567
> 
> 标签：python, scipy

如何找到使用 scipy 拟合的样条曲线的峰值曲率？（实际上，峰值二阶微分就足够了）

我使用我的 1d和向量计算了`tck`如下值：`xs``ys`

```
tck = splrep(xs, ys, s=0) 
```

我知道我可以`x`根据我的任何选择评估二阶微分：

```
ddy = splev([x], tck, 2) 
```

所以我可以遍历 的许多值`x`，计算曲率并取最大值。但我更愿意解释这些值`tck`以获得各个三次函数的系数，从而直接计算峰值曲率。但是，`tck`看起来相当不透明 - 我如何从中提取三次函数系数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:58:55.653

只需`der`在函数上使用关键字参数`splev`：

```
ddy = splev(X, tck, der=2) 
```

并且最好不要遍历 的许多值`x`，而是创建一个包含您要评估的每个值的 Nx1 数组`X`，以便返回一个值数组，而不是您必须放入一个序列中的单个值。

此外，非常建议您绘制结果作为调试它的一种方式。如果情节有意义，那么事情很可能会像您期望的那样工作（如果没有，它们肯定不会工作）。

编辑：如果使用 X 的插值仅给出一个近似值并且您想要 TRUE 最大值，则可以使用定义最大值（局部插值最大值及其邻居）的三个点的抛物线插值，考虑到样条是局部平滑的：

```
def parabolic_interpolation(p1, p2, p3):
    x1, y1 = p1
    x2, y2 = p2
    x3, y3 = p3

    denom = (x1-x2)*(x1-x3)*(x2-x3);
    a = (x3*(y2-y1)+x2*(y1-y3)+x1*(y3-y2))/denom
    b = (x3*x3*(y1-y2)+x2*x2*(y3-y1)+x1*x1*(y2-y3))/denom
    c = (x2*x3*(x2-x3)*y1+x3*x1*(x3-x1)*y2+x1*x2*(x1-x2)*y3)/denom

    xv = -b/(2*a)
    yv = c-b**2/(4*a)

    return (xv, yv)  # coordinates of the vertex 
```

希望这可以帮助！

# c# - 我可以以某种方式整理这个（过度使用？）泛型吗？

> ID：13590992
> 
> 赞同：7
> 
> 时间：2012-11-27T18:48:04.340
> 
> 标签：c#, design-patterns, generics, types

我正在构建一个看起来像这样的通用平面文件阅读器。

```
 public class GenericReader<TComposite, THeader, TData, TTrailer> 
    where TComposite : GenericComposite<THeader, TData, TTrailer>, new()
    where THeader : new()
    where TData : new()
    where TTrailer : new()
{
    public TComposite Read()
    {
        var composite = new TComposite();

        composite.Header = new THeader();
        composite.Data = new TData();
        composite.Trailer = new TTrailer();

        return composite;
    }        
} 
```

可以这样吃。

```
var reader = new GenericReader<Composite<Header, Data, Trailer>, Header, Data, Trailer> ();

var composite = reader.Read();
Console.WriteLine(composite.Data.SomeProperty);

Console.ReadLine(); 
```

这是使用的类。

```
public class Composite<THeader, TData, TTrailer> : GenericComposite<THeader, TData, TTrailer>
{

}

public class GenericComposite<THeader, TData, TTrailer>
{
    public THeader Header { get; set; }

    public TData Data { get; set; }

    public TTrailer Trailer { get; set; }
}

public class Header {
    public string SomeProperty { get { return "SomeProperty"; } } 
}

public class Data {
    public string SomeProperty { get { return "SomeProperty"; } } 
}

public class Trailer {
    public string SomeProperty { get { return "SomeProperty"; } } 
} 
```

有没有办法可以在 GenericReader 中删除或封装该泛型类型信息？我正在寻找一双额外的眼睛来向我展示我一直缺少的东西。我们已经在返回接口方面做了一些事情，并让消费者进行强制转换，但在我看来，这只是将责任转移到了错误的位置，另外还有一点性能损失。

谢谢。

编辑：我不需要 TComposite，我可以返回 GenericComposite。我怎么能错过呢？

```
public class GenericReader<THeader, TData, TTrailer> 
    where THeader : new()
    where TData : new()
    where TTrailer : new()
{
    public GenericComposite<THeader, TData, TTrailer> Read()
    {
        var composite = new GenericComposite<THeader, TData, TTrailer>();

        composite.Header = new THeader();
        composite.Data = new TData();
        composite.Trailer = new TTrailer();

        return composite;
    }        
}

public class GenericComposite<THeader, TData, TTrailer>
{
    public THeader Header { get; set; }

    public TData Data { get; set; }

    public TTrailer Trailer { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:14:35.670

没有办法消除对您拥有的通用约束的类型声明的需要。

但是，您的用例表明这是最常见的行为：

```
var reader = new GenericReader<Composite<Header, Data, Trailer>, 
    Header, Data, Trailer>(); 
```

如果是这种情况，您可以对某些模式的使用频率做出假设，您可以从具有更容易使用的封闭类型定义的泛型类继承一个类型（或一组类型）。

在上述情况下，您可以为基本的、最常见的情况（除了通用定义）提供这些类：

```
public class Composite : GenericComposite<Header, Data, Trailer> { }

public class GenericReader : GenericReader<
    Composite, Header, Data, Trailer>
{ } 
```

然后将像这样使用它：

```
var reader = new GenericReader();

var composite = reader.Read();

Console.WriteLine(composite.Data.SomeProperty);

Console.ReadLine(); 
```

您仍然可以使用具有通用参数的类型来用于高度专业化的案例，但是对于常见的用例（您通过分析/领域知识确定），您可以确定最常见的是什么并提供具有集合类型的类辅助参数。

# c# - 用 C# 输出 PHP 脚本

> ID：13590994
> 
> 赞同：-1
> 
> 时间：2012-11-27T18:48:12.417
> 
> 标签：c#, get

我认为的主要问题是我试图在受 ssl 保护的网站上获取 php 脚本的输出。为什么下面的代码不起作用？

```
 string URL = "https://mtgox.com/api/0/data/ticker.php";
            HttpWebRequest myRequest =
             (HttpWebRequest)WebRequest.Create(URL);
            myRequest.Method = "GET";
            WebResponse myResponse = myRequest.GetResponse();
            StreamReader _sr = new StreamReader(myResponse.GetResponseStream(),
System.Text.Encoding.UTF8);
            string result = _sr.ReadToEnd();
            //Console.WriteLine(result);
            result = result.Replace('\n', ' ');
            _sr.Close();
            myResponse.Close();
            Console.WriteLine(result); 
```

它挂在 WebException was unhandeled 操作已超时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:53:09.060

你打错了网址。ssl 是`https://`，但你正在打`http://`（注意缺少**S**）。该站点确实重定向到页面的 SSL 版本，但您的代码显然没有遵循该重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T22:17:43.143

添加了 myRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11"; 一切开始工作

# perl - 从 Perl 的属性文件中读取 JAR 值，然后将其与本地版本进行比较

> ID：13590995
> 
> 赞同：1
> 
> 时间：2012-11-27T18:48:23.820
> 
> 标签：perl, maven, nexus

用 perl 做这可能有点太难了，但我希望有人至少可以帮助我找到正确的方向来完成这个。

目前我们有一个 Nexus 服务器，它保存着我们所有的 .jar 文件。其中一个应用程序需要使用在 .properties 文件中定义的第 3 方公共 jar。

属性文件如下所示

```
commons-logging=commons-logging-1.1.1.jar
commons-io=commons-io-2.3.jar
httpcore=httpcore-4.2.1.jar 
```

我被要求创建一个将浏览此属性文件的 Perl 脚本，然后将该版本（即 commons-logging-1.1.1.jar）与位于其他地方的版本进行比较。如果属性文件中的版本不同，则会将新的 .jar 文件复制到公共 jar 位置。

一个例子 在 C:\commons 中有一个 commons-logging-1.1.0

在属性文件中，指定需要 commons-logging=commons-logging-1.1.1.jar。然后 perl 脚本将读取 .properties 文件，确定 commons-logging-1.1.1 与 commons 文件夹中的 commons-logging-1.1.0 不同，并将替换它。

我们也可以将 maven 用于这样的事情，但我不确定我们如何制作它，以便开发人员可以在属性文件中定义需要什么 jar 并将其替换到特定文件夹中。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:51:33.513

很难知道您对此有什么问题。也许这个程序会有所帮助？

```
use strict;
use warnings;

open my $fh, '<', '.properties' or die $!;

while (<$fh>) {
  if (/^([\w-]+)=\1-([\d.]+)\.jar$/) {
    my ($lib, $ver) = ($1, $2);
    print qq(Library "$lib" needs version $ver\n);
  }
  else {
    warn "Error in .properties line $.: $_";
  }
} 
```

**输出**

```
Library "commons-logging" needs version 1.1.1
Library "commons-io" needs version 2.3
Library "httpcore" needs version 4.2.1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:08:12.043

听起来你被要求编写一个依赖管理客户端。

我建议使用 Apache ivy，它有一个方便的[命令行客户端](http://ant.apache.org/ivy/history/latest-milestone/standalone.html)。

# 例子

这个常春藤命令：

```
java -jar ivy.jar -ivy ivy.xml -retrieve "lib/[artifact]-[revision](-[classifier]).[ext]" 
```

创建一个“lib”目录，其中包含 ivy 文件中列出的 jars：

```
├── ivy.xml
└── lib
    ├── commons-io-2.3.jar
    ├── commons-logging-1.1.1.jar
    └── httpcore-4.2.1.jar 
```

这种方法的真正优势在于 ivy 还将下载传递依赖项。

此外，常春藤将缓存以前下载的文件。这意味着删除一个旧目录并让 ivy 创建一个包含 jar 的新目录会更简单。（而不是去比较文件的努力）

## 常春藤.xml

```
<ivy-module version="2.0">
    <info organisation="myorg" module="mymodule" />
    <dependencies>
        <dependency org="commons-logging" name="commons-logging" rev="1.1.1" conf="default"/>
        <dependency org="commons-io" name="commons-io" rev="2.3" conf="default"/>
        <dependency org="org.apache.httpcomponents" name="httpcore" rev="4.2.1" conf="default"/>
    </dependencies>
</ivy-module> 
```

# sql - 生成查看多个表的查询

> ID：13590996
> 
> 赞同：0
> 
> 时间：2012-11-27T18:48:24.897
> 
> 标签：sql, task

我得到了一个数据库，结构和数据值都是不可更改的，并且已经提供了一个问题。

生成查询以列出访问站点代码 101 的所有假期的假期代码、假期描述、假期持续时间和站点描述。您的答案不能假定站点代码 101 将始终具有相同的站点描述。

我对如何解决这个问题感到困惑。我尝试了多个连接，不同的点表示法，并在谷歌上搜索了这个问题并返回。有什么帮助吗？

表 1 - Holiday_Details

Holiday_Code - Country_Visited - Holiday_Duration - Holiday_Desc - Rating_Code - 成本

表 2 - Site_Of_Holiday

Site_Description - Site_Code

表 3 - Site_Visited

Holiday_Code - Site_Code

评论要求以前的尝试。这是我的第一次。

```
SELECT holiday_code, 
       holiday_desc, 
       holiday_duration site_of_holiday.Site_Name 
FROM   holiday_details 
       JOIN site_visited 
         ON holiday_code = site_visited.holiday_code 
       JOIN site_of_holiday 
         ON site_visited.site_code = site_of_holiday.site_code 
WHERE  site_of_holiday.site_code = 101; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:10:55.943

为了将来参考，如果您发布有关失败尝试的更多详细信息，您将获得更好的回复。我的意思是代码。使用 SO 来解决你的家庭作业是不受欢迎的，但正如评论者所说，一旦你破坏了你的大脑，我们愿意提供帮助。

你看起来可能真的很努力，所以我会扔给你一根骨头......

导航多个表的技巧是找到匹配列的“对”。在这种情况下，您希望在表 Site_Of_Holiday（包含 Site_Description）和 Holiday_Details（包含其他所有内容）之间找到一条路径。

每对表之间匹配的列是：

*   在 Site_Visited 和 Holiday_Details 中都可以找到 Holiday_Code
*   Site_Code 在 Site_Of_Holiday 和 Site_Visited 中都可以找到

这允许您在包含我们想要在输出中的所有列的表之间构建路径。在这种情况下，您将在这些匹配的列对中使用 INNER JOIN 来执行此操作。

连接表后，将结果想象成一个巨大的表，其列包括所有三个表中的所有列（以您在连接期间“命名”表的任何前缀）。现在您只需使用通常的 WHERE 子句过滤 Site_Code。

这是完整的示例 - 让我知道它是否适合您：

```
SELECT hd.Holiday_Code, hd.Holiday_Desc, hd.Holiday_Duration, soh.Site_Description
FROM Holiday_Details hd
INNER JOIN Site_Visited sv ON hd.Holiday_Code = sv.Holiday_Code
INNER JOIN Site_Of_Holiday soh ON sv.Site_Code = soh.Site_Code
WHERE sv.Site_Code = 101 
```

祝你好运！

PS如果任何美国人得到类似的任务，这里是翻译;-)

```
SELECT vd.Vacation_Code, vd.Vacation_Desc, vd.Vacation_Duration, sov.Site_Description
FROM Vacation_Details vd
INNER JOIN Site_Visited sv ON vd.Vacation_Code = sv.Vacation_Code
INNER JOIN Site_Of_Vacation sov ON sv.Site_Code = sov.Site_Code
WHERE sv.Site_Code = 101 
```

# java - Java 错误 - 找不到符号 - 变量是

> ID：13590998
> 
> 赞同：1
> 
> 时间：2012-11-27T18:48:45.680
> 
> 标签：java, variables, input, find, symbols

我试图为 print、println 和扫描仪创建一个“快捷方式”。所以我创建了一个不同的类，这就是它的内容：

```
import java.util.*;
public class ShortCutClass {
    Scanner input = new Scanner(System.in);
    public void p (String text){
        System.out.print (text);
    }
    public void pl (String text){
        System.out.println (text);
    }
    public String is (){
        String a= input.nextLine();
        return a;
    }
    public double id (){
        double b= input.nextDouble();
        return b;
    }
    public int ii (){
        int c= input.nextInt();
        return c;
    }
} 
```

所以，我试图检查它是否有效——使用这个：

```
import java.util.*;
class ShortcutTest{
    Scanner input = new Scanner(System.in);
    public static void main(String args[]){
        ShortCutClass scc = new ShortCutClass();
        scc.pl("So ummmm... How ya doin?");
        scc.p("Connected1 ");
        scc.p("Connected2 ");
        String a=scc.is;
        double b=scc.id;
        int c=scc.ii;
        scc.pl (a);
        scc.pl (b);
        scc.pl (c);        
    }
} 
```

它给了我以下错误：“找不到符号变量是

我究竟做错了什么？我怎样才能解决这个问题？

*** 编辑：

我修复了它，然后遇到了另一个问题......我无法打印出 b 或 c 因为我写的打印需要一个字符串，而 b 和 c 只能是 double 和 int，所以这不起作用。有什么方法可以更改打印（scc.p 和 scc.pr），以便它能够接收任何类型的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T18:51:01.113

这里：

```
String a=scc.is;
double b=scc.id;
int c=scc.ii; 
```

...你试图引用*方法*，就好像它们是*变量*一样。您需要调用以下方法：

```
String a=scc.is();
double b=scc.id();
int c=scc.ii(); 
```

作为旁注，我*强烈*建议您不要一开始就这样做。即使你想要一个方便的类，也请给方法起合理的名称 -`writeInt`等`readInt`。使用这样的缩写会使代码很难阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:51:13.197

那是因为“is”是一种方法，而您正试图将其作为公共变量进行访问。

尝试：

```
String a = scc.is(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:52:11.573

排队

```
String a=scc.is;
double b=scc.id; 
```

() 丢失：

正确的是：

```
String a=scc.is();
double b=scc.id(); 
```

进一步提示：请删除快捷方式，该代码可读性较差

# javascript - 使用 Web Audio API 进行离线/非实时渲染

> ID：13590999
> 
> 赞同：8
> 
> 时间：2012-11-27T18:48:46.833
> 
> 标签：javascript, google-chrome, web-audio-api

## 问题

我正在开发一个 Web 应用程序，用户可以在其中对音频样本进行排序，并可以选择将效果应用于他们使用 Web Audio API 创建的音乐模式。模式存储为 JSON 数据，我想对每个模式服务器端的渲染音频进行一些分析。据我所知，这给我留下了两个选择：

1.  在服务器端运行我自己的渲染代码，尽量使其忠实于浏览器内的渲染。也许我什至可以从 Chromium 项目中提取 Web Audio 代码并对其进行修改，但这似乎可能需要大量工作。

2.  在客户端进行渲染，希望比实时更快，然后将渲染的音频发送到服务器。这是理想的（和干燥的），因为只有一个引擎用于模式渲染。

## *可能*的解决方案

[这个问题](https://stackoverflow.com/q/8074152/1015178)将我引向[Chromium 存储库中的这个代码示例](http://code.google.com/p/chromium/source/browse/trunk/samples/audio/offline-convolution.html?r=2997)，这似乎表明可以进行离线处理。诀窍似乎是`webkitAudioContext`用一些参数构造 a （通常使用零参数构造函数）。以下是我对参数含义的猜测：

```
new webkitAudioContext(2,          // channels
                       10 * 44100, // length in samples
                       44100);     // sample rate 
```

我稍微修改了示例，并在 Windows、Mac 和 Linux 上的 Chrome 23.0.1271.91 中对其进行了测试。 [这是现场示例](http://johnvinyard.com/offline-convolution.html)和结果（打开 Dev Tools Javascript 控制台以查看发生了什么）：

*   麦克 -**它的工作原理！**
*   Windows -**失败** - SYNTAX_ERR：DOM 异常 12
*   Linux -**失败** - SYNTAX_ERR：DOM 异常 12

我上面描述的`webkitAudioContext`构造函数会导致 Windows 和 Linux 上的异​​常。

## 我的问题

离线渲染对于我正在尝试做的事情来说是*完美*的，但我在任何地方都找不到文档，而且支持也不太理想。有没有人有这方面的更多信息？我应该期待很快在 Windows 和/或 Linux 中对此提供支持，还是应该期待在 Mac 上的支持很快*消失？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:40:41.533

几个月前我对此进行了一些研究，并且在 audioContext 上有一个 startRendering 函数，但谷歌的人告诉我，当时的实现是由于更改。我认为这还没有发生，它仍然不是官方文档的一部分，所以我会小心构建一个依赖它的应用程序。

当前的实现也不会比实时渲染更快（在非常轻量级的应用程序中可能会稍微快一点），有时甚至比实时渲染还要慢。

如果您需要非实时渲染，最好的选择是在服务器端实现 Web Audio。如果您可以使用实时渲染，那么[https://github.com/mattdiamond/Recorderjs](https://github.com/mattdiamond/Recorderjs)上的一个项目可能会引起您的兴趣。

请注意，我本人不是谷歌用户，我被告知的内容绝不是承诺。