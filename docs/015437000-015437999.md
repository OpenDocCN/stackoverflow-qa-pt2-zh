# StackOverflow 问答 15437000-15437999

# oauth - 如何将 Twitter OAuth Echo 更新到 API v. 1.1 (PHP)

> ID：15437002
> 
> 赞同：0
> 
> 时间：2013-03-15T16:05:46.957
> 
> 标签：oauth, twitter, twitter-oauth

我有一个小应用程序，它使用（使用）OAuth Echo 和 Tweetbot 的自定义图像端点来自托管我发布到 Twitter 的媒体。最近的 API 更新破坏了该应用程序，我似乎找不到任何有关如何修复它的信息。

这是我在更新之前使用的类：

```
// Twitter oAuth Echo Class
// Author: http://shikii.net/blog/creating-a-custom-image-service-for-twitter-for-iphone/
class namespace_TwitterOAuthEcho
{
  public $verificationUrl = "https://api.twitter.com/1/account/verify_credentials.json";
  //isset($_SERVER['X-AUTH-SERVICE-PROVIDER']) ? $_SERVER['X-AUTH-SERVICE-PROVIDER'] : false;

  public $userAgent = __CLASS__;

  public $verificationCredentials;

  /**
   *
   * @var int
   */
  public $resultHttpCode;
  /**
   *
   * @var array
   */
  public $resultHttpInfo;
  public $responseText;

  /**
   * Save the OAuth credentials sent by the Consumer (e.g. Twitter for iPhone, Twitterrific)
   */
  public function setCredentialsFromRequestHeaders()
  {
    $this->verificationCredentials = isset($_SERVER['HTTP_X_VERIFY_CREDENTIALS_AUTHORIZATION'])
      ? $_SERVER['HTTP_X_VERIFY_CREDENTIALS_AUTHORIZATION'] : false;
  }

  /**
   * Verify the given OAuth credentials with Twitter
   * @return boolean
   */
  public function verify()
  {
    $curl = curl_init($this->verificationUrl);
    curl_setopt($curl, CURLOPT_USERAGENT, $this->userAgent);
    curl_setopt($curl, CURLOPT_HEADER, false);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($curl, CURLOPT_HTTPHEADER, array(
        'Authorization: ' . $this->verificationCredentials,
      ));

    $this->responseText = curl_exec($curl);
    $this->resultHttpCode = curl_getinfo($curl, CURLINFO_HTTP_CODE);
    $this->resultHttpInfo = curl_getinfo($curl);
    curl_close($curl);

    return $this->resultHttpCode == 200;
  }
} 
```

作为一个 twitter API 新手，我不确定要改变什么才能让它再次工作。[Twitter 的 OAuth Echo](https://dev.twitter.com/docs/auth/oauth/oauth-echo)文档自 2012 年 8 月以来一直没有更新，所以这无济于事。

Twitter 的 API 1.1 概述页面确实说[所有端点现在都需要授权](https://dev.twitter.com/docs/api/1.1/overview#Authentication_required_on_all_endpoints)。美好的。我设置了一个新应用程序；得到了我的消费者密钥/秘密。但是，我不确定它们的去向。在 Twitter 上编辑应用程序设置时，我也不确定这里应该设置哪些设置。我的应用程序（在我看来）实际上不需要与 Twitter 交互。我只是想将一个 URL 发送回 Tweetbot（任何 Twitter 客户端），以便它可以将它放在推文中。

任何帮助更新此更新将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T17:12:32.517

代替

```
public $verificationUrl = "https://api.twitter.com/1/account/verify_credentials.json"; 

with

public $verificationUrl = "https://api.twitter.com/1.1/account/verify_credentials.json"; 
```

而已。您只需要更改 URL。您的推特应用程序也无需更改。它也将与您的旧 APP 一起使用。

# jquery - 部分视图单击事件未触发

> ID：15437007
> 
> 赞同：3
> 
> 时间：2013-03-15T16:06:14.853
> 
> 标签：jquery, asp.net-mvc-2, jquery-load

我的 *.aspx 页面（主页）：

```
function getEmployeeHours(employeeId,year,month) {
 $('#clocked-details').load('/Employees/GetEmployeeClockedHours/',{ 'employeeId': employeeId,'year': year,'month': month });
    }; 
```

我的部分观点 *.ascx ：

```
 <td>
   <button id="btnSave" type="button" class="actionButton">
     Save</button>
  </td> 
```

如上面的代码片段，我需要从主视图访问部分视图**btnSave**以触发点击事件。

我在主视图中编写了以下代码。

```
$('#btnSave').off('click').on('click', function () {

         var yearValue = $("#year").val();
         var monthValue = $("#month").val();

         $.ajax({
             url: "/Employees/UpdateEmployeeClockedHoursByProvider",
             type: 'POST',
             cache: false,
             data: { employeeId: employeeId, year: yearValue, month: monthValue },
             success: function (result) {

             },
             error: function (xhr, ajaxOptions, thrownError) {
                 alert(xhr.status);
                 alert(thrownError);
             }
         });

         return false;
     }); 
```

但它不会触发。这里我使用**加载**jquery 方法来异步加载我的部分视图。

所以我的问题是我应该如何触发部分视图的点击事件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T16:17:22.133

由于您的 html 是动态加载到页面中的，因此您必须为`DOM`查询提供更多上下文。

尝试这个。

```
$(document).on('click', '#bntSave', function(){
  //do stuff
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:22:07.883

由于包含按钮的用户控件是动态加载的，因此您可以`("#btnSave").live("click"){...}`在将脚本保留在主视图中的同时使用 jquery 的事件，这样可以跟踪将来添加到 DOM 中的控件。因此，只要出现与“live(..)”的指定选择器匹配的控件，该事件就会自动连接起来。

希望这对您有所帮助。

# javascript - 为什么 Android WebView 在第二页加载时重置 JavaScript 上下文？

> ID：15437008
> 
> 赞同：2
> 
> 时间：2013-03-15T16:06:19.863
> 
> 标签：javascript, android, webview

我通过首先设置 JavaScript 环境然后加载依赖于 JavaScript 环境存在的 Web 内容来使用带有本地数据的 Android WebView：

**测试.js：**

```
alert("test.js: type of window.myVar is: " + (typeof window.myVar));
window.myVar = {}; 
```

**测试.html：**

```
<!DOCTYPE>
<html><head>
<script>
alert("test.html: type of window.myVar is: " + (typeof window.myVar));
</script>
</head><body></body></html> 
```

**Java中的加载过程：**

```
private void loadData() {
    _webView.loadUrl("javascript:" + testJSContent);
    _webView.loadDataWithBaseURL(null, testHTMLContent, "text/html", "utf-8", null);
} 
```

第一次触发*loadData()时，* *window.myVar*可从加载的 HTML 页面获得，但在任何后续尝试中*未定义。*这是三个调用的警报输出：

-> loadData() 称为
*“test.js：window.myVar 的类型为：未定义”*
*“test.html：window.myVar 的类型为：对象”*
-> loadData() 称为
*“test.js：window.myVar 的类型”是：对象”*
*“test.html：window.myVar 的类型是：未定义”*
-> loadData() 称为
*“test.js：window.myVar 的类型是：未定义”*
*“test.html：window.myVar 的类型是：不明确的”*

有什么想法为什么通过注入创建的 JavaScript 对象只在第二个页面加载之前是持久的？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:28:28.463

您应该首先加载 html，然后在该页面完全加载后注入 javascript。在 WebViewClient 的 OnPageFinished 中执行此操作。

# java - DOM4j 不适用于 Android

> ID：15437010
> 
> 赞同：0
> 
> 时间：2013-03-15T16:06:21.697
> 
> 标签：java, android, xml, rss, dom4j

我尝试使用 DOM4j 在 Android 上调整 XML RSS 提要。我确实将 dom4j.jar 添加到 lib\ 和用户权限。

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

我也在纯Java项目中编译了这个源代码，它可以工作！我很困惑Android是否有任何限制（如果有，我可以使用什么方法），或者只是我犯了一些错误。

Logcat 的部分内容：

```
03-15 23:27:10.611: W/System.err(10453): org.dom4j.DocumentException: Couldn't open http://tw.news.yahoo.com/rss/ Nested exception: Couldn't open http://tw.news.yahoo.com/rss/
03-15 23:27:10.621: W/System.err(10453):    at org.dom4j.io.SAXReader.read(SAXReader.java:484)
03-15 23:27:10.621: W/System.err(10453):    at org.dom4j.io.SAXReader.read(SAXReader.java:291)
03-15 23:27:10.621: W/System.err(10453):    at tw.danny.rss_dom4j.RSSDom4jMainActivity.onCreate(RSSDom4jMainActivity.java:28)
03-15 23:27:10.621: W/System.err(10453):    at android.app.Activity.performCreate(Activity.java:5206)
03-15 23:27:10.626: W/System.err(10453):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-15 23:27:10.626: W/System.err(10453):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2074)
... 
```

这是主要活动中的 onCreate 函数：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_rssdom4j_main);

    try {
        URL url = new URL("http://tw.news.yahoo.com/rss/");
        SAXReader saxReader = new SAXReader();
        //?
        Document document = saxReader.read(url);
        Element channel = (Element) document.getRootElement().element(
                "channel");
        for (Iterator i = channel.elementIterator("item"); i.hasNext();) {
            Element element = (Element) i.next();
            System.out.println("title: " + element.elementText("title"));

            String descrip_original = element.elementText("description");
            if (descrip_original.startsWith("<p>")) {
                // address html-like layout
                System.out.println(descrip_original.substring(
                        descrip_original.indexOf("</a>") + 4,
                        descrip_original.length() - 1));

            }

            System.out.println("link: " + element.elementText("link"));
            System.out
                    .println("pubDate: " + element.elementText("pubDate"));

            System.out.println();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

这一行可能会出现问题：

```
SAXReader saxReader = new SAXReader(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:10:24.943

您正在主 UI 线程上访问互联网。这是自 Android 4.0.x 以来的禁忌。将访问网络的代码放在 AsyncTask 中或为其创建一个新线程。

```
new Thread( new Runnable() {
    @Override
    public void run() {
        try {
            URL url = new URL("http://tw.news.yahoo.com/rss/");
            SAXReader saxReader = new SAXReader();

            Document document = saxReader.read(url);
            Element channel = (Element) document.getRootElement().element(
                    "channel");
            for (Iterator i = channel.elementIterator("item"); i.hasNext();) {
                Element element = (Element) i.next();
                System.out.println("title: " + element.elementText("title"));

                String descrip_original = element.elementText("description");
                if (descrip_original.startsWith("<p>")) {
                    // address html-like layout
                    System.out.println(descrip_original.substring(
                            descrip_original.indexOf("</a>") + 4,
                            descrip_original.length() - 1));

                }

                System.out.println("link: " + element.elementText("link"));
                System.out
                        .println("pubDate: " + element.elementText("pubDate"));

                System.out.println();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} ).start(); 
```

# java - Java HashMap 机制

> ID：15437012
> 
> 赞同：1
> 
> 时间：2013-03-15T16:06:28.847
> 
> 标签：java, hashmap

在Java中，如果我有`HashMap<Integer, int[]> map`并且想要查找给定的`int key`like `map.get(key)`，那么算法将计算`key.hashCode()`，转到相应的存储桶并线性搜索类型的对象`int[]`并使用`equals()`？因此存储桶中的那些`int[]`对象将具有相同的键（由 计算`hashCode`），它们将由 进行比较`equals()`。那正确吗？

我在网上找不到一个例子，它显示得很清楚。只有文字。

您正在重定向我的内容不包含正常的可理解示例，我不需要理论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:10:16.567

更正： ...转到相应的存储桶并线性搜索键（整数）等于给定键的条目。这就是这个搜索在 HashMap 中实际实现的方式

```
final Entry<K,V> getEntry(Object key) {
    int hash = (key == null) ? 0 : hash(key);
    for (Entry<K,V> e = table[indexFor(hash, table.length)]; e != null; e = e.next) {
        Object k;
        if (e.hash == hash && ((k = e.key) == key || (key != null && key.equals(k))))
            return e;
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:12:08.170

当您可以清楚地单独使用数据结构时，我认为这不是将数组作为值混合的好解决方案。哈希映射的想法是相对于表压缩索引。您可以轻松地将所有整数保存在单独的数据结构中，并使用 for 循环进行枚举，并将键与 put 配对。无论引用存储在何处，此基础构造都将为您提供引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:27:34.093

有 2^32 个可能的哈希码，但桶的最大数量是`Integer.MAX_VALUE`，最大可能的 int。这意味着 HashMap**必须**将多个哈希码映射到同一个存储桶。

要查找探测键，在您的情况下是整数，它首先计算探测的哈希码。它进入包含该哈希码的存储桶。它扫描桶中（键，值）对中的键，以查找其哈希码与探测哈希码匹配的键。它只对那些确实具有所需哈希码的键运行等于测试。

如果它找到一个 (key, value) 对，其键等于探测器，它会返回该值，在您的情况下是一个 int[] 引用。

有关处理 null 的详细信息，请参阅@Evgeniy 的答案中引用的代码。

# java - 为什么编译器无法推断我的方法的返回类型？

> ID：15437016
> 
> 赞同：3
> 
> 时间：2013-03-15T16:06:37.070
> 
> 标签：java, generics

这是我的代码。基本上我试图从我的方法返回一个 Map。`intToEnumMap`但是编译器不允许这样做。为什么编译器不能推断我的方法的返回类型？

```
 public enum  INVALIDTHRESHOLDSTATE{
        ONE(0,GAUGE_MIN_LOWER_THRESHOLD1_MESSAGE),
        TWO(1,GAUGE_THRESHOLD1_LOWER_THRESHOLD2_MESSAGE),
        THREE(2,GAUGE_THRESHOLD2_LOWER_MAX_MESSAGE);

        private static final Map<Integer,INVALIDTHRESHOLDSTATE> intToEnum = new HashMap<Integer, INVALIDTHRESHOLDSTATE>();
        static {

            int i=0;
            for (INVALIDTHRESHOLDSTATE invalidState : values()){
                i++;
                intToEnum.put(Integer.valueOf(i), invalidState);
            }      
        }

        private int value;
        private String message;

        private INVALIDTHRESHOLDSTATE(int value,String message){
            this.value = value;
            this.message = message;
        }
        public int getValue() {
             return value;
          }
        public String getString() {
             return message;
          }

        // Generic method
        public static <K,V> Map<K,V> intToEnumMap() {
           return intToEnum;  //doesn't compile
                 ^^^^^^^^^
        }

    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T16:09:18.743

您已经创建了一个*通用*方法，因此任何人都可以调用：

```
Map<String, Long> map = INVALIDTHRESHOLDSTATE.<String, Long> intToEnumMap(); 
```

我认为这不是您想要的 - 如果您要返回`intToEnum`它，在我看来，您根本不希望调用者指定泛型类型参数，它应该只是：

```
public static Map<Integer, INVALIDTHRESHOLDSTATE> intToEnumMap() {
    return intToEnum;
} 
```

（我还强烈建议重命名您的枚举以遵循正常的 Java 命名约定，但这是另一回事。）

# silverlight - ValidatesOnExceptions 在 Silverlight VS2010 中不起作用

> ID：15437017
> 
> 赞同：1
> 
> 时间：2013-03-15T16:06:39.360
> 
> 标签：silverlight, validation, data-binding

我正在使用 VS2010 和 Silverlight 5。

我有一个单一的 Silverlight 项目，它声明了一个类（学生）和一个带有绑定到学生属性的文本框的视图。

如果输入的年龄 < 100 或 < 0，Student 类会抛出异常，然后在绑定到 Age 的文本框中，我标记：ValidatesOnException = True。

**我使用 VS2010 运行该应用程序，并且异常没有被“绑定引擎”拦截，它只是冒泡给用户。**

**但如果我用 VS2012 运行它，一切都会好起来的。如果输入错误，文本框会以红色突出显示并显示错误**

我希望能够使用 VS2010。

难道是我在同一台机器上安装了 VS2010 和 VS2012 的事实。我已经安装了一段时间，没有任何其他问题。

这是我的学生课：

```
public class Student {
    private string _name;
    public string Name {
        get { return _name; }
        set { _name = value; }
    }

    private int _age;
    public int Age {
        get { return _age; }
        set {
            if (value > 100 || value < 0) {
                throw new Exception("Please enter an age between 0 and 100");
            }
            _age = value;
        }
    }
} 
```

这是视图：

```
<Grid x:Name="LayoutRoot"
      Background="White">
    <TextBlock Height="23"
               HorizontalAlignment="Left"
               Margin="66,48,0,0"
               Name="textBlock1"
               Text="Name"
               VerticalAlignment="Top" />
    <TextBox Name="txtName"
             Text="{Binding Name, Mode=TwoWay, ValidatesOnExceptions=True}"
             Height="23"
             HorizontalAlignment="Left"
             VerticalAlignment="Top"
             Width="185"
             Margin="121,44,0,0" />
    <TextBlock Height="23"
               HorizontalAlignment="Left"
               Margin="78,77,0,0"
               Name="textBlock2"
               Text="Age"
               VerticalAlignment="Top" />
    <TextBox Name="txtAge"
             Text="{Binding Age, Mode=TwoWay, ValidatesOnExceptions=True}"
             Height="23"
             HorizontalAlignment="Left"
             VerticalAlignment="Top"
             Width="120"
             Margin="121,73,0,0" />

</Grid> 
```

会是什么呢？

# ruby - 如何按多个键排序，其中一些键按降序排列

> ID：15437025
> 
> 赞同：1
> 
> 时间：2013-03-15T16:07:03.233
> 
> 标签：ruby

我有一个哈希数组：

```
a = [
  { :id => 10, :name => 'bush' },
  { :id => 2, :name => 'sugar' },
  { :id => 10, :name => 'mountain' },
  { :id => 10, :name => 'bug' },
  { :id => 8, :name => 'sugar' }
] 
```

我想先按 id 升序对数组进行排序，然后按名称按字母降序对数组进行排序，这样最终结果将是：

```
a = [
  { :id => 2, :name => 'sugar' },
  { :id => 8, :name => 'sugar' },
  { :id => 10, :name => 'mountain' },
  { :id => 10, :name => 'bush' },
  { :id => 10, :name => 'bug' }
] 
```

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:13:21.537

根据对您的问题所做的编辑，进行您将使用的传统排序

```
a.sort { |a, b| [a[:id], a[:name]] <=> [b[:id], b[:name]] }
=> [
  {:id=>2, :name=>"sugar"},
  {:id=>8, :name=>"sugar"},
  {:id=>10, :name=>"bug"},
  {:id=>10, :name=>"bush"},
  {:id=>10, :name=>"mountain"}
] 
```

您可以通过交换条件检查来切换排序顺序。

```
a.sort { |a, b| [a[:id], b[:name]] <=> [b[:id], a[:name]] }
=> [
  {:id=>2, :name=>"sugar"},
  {:id=>8, :name=>"sugar"},
  {:id=>10, :name=>"mountain"},
  {:id=>10, :name=>"bush"},
  {:id=>10, :name=>"bug"}
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:11:42.987

a.sort {|a,b| (a[:id] != b[:id]) ？a[:id] <=> b[:id] : b[:name] <=> a[:name] }

```
>> a
=> [{:id=>10, :name=>"bush"}, {:id=>2, :name=>"sugar"}, {:id=>10, :name=>"mountain"}, {:id=>10, :name=>"bug"}, {:id=>8, :name=>"sugar"}]
>> a.sort {|a,b| (a[:id] != b[:id]) ? a[:id] <=> b[:id] : b[:name] <=> a[:name] }
=> [{:id=>2, :name=>"sugar"}, {:id=>8, :name=>"sugar"}, {:id=>10, :name=>"mountain"}, {:id=>10, :name=>"bush"}, {:id=>10, :name=>"bug"}]
>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T19:09:09.947

我认为@DanReedy 的答案非常清楚，但是如果您将其应用于大型列表，则可能会出现性能问题，因为制作了很多（ O(N logN) 的小型中间数组和重复的哈希查找。 `sort_by`可以通过使排序键一次 O(N) 以便在 O(N logN) 比较中重复使用。为了完成辅助键的降序，我们需要一种方法来反转比较方法的顺序。

```
module DescendingComparable
  def <=>(other)
    - super
  end
end

pry(main)> a.sort_by {|e| [ e[:id], e[:name].dup.extend(DescendingComparable) ] }
=> [{:id=>2, :name=>"sugar"},
 {:id=>8, :name=>"sugar"},
 {:id=>10, :name=>"mountain"},
 {:id=>10, :name=>"bush"},
 {:id=>10, :name=>"bug"}] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T19:55:54.847

只是为了好玩，这里有一个已经存在多年的模式：

```
class SortByInverter < Struct.new(:value)
  def <=>(other)
    other.value <=> value
  end
end

class Object
  def desc
    SortByInverter.new(self)
  end
end 
```

现在让我们使用它：

```
hs.sort_by { |h| [h[:id], h[:name].desc] } 
```

当然我们可以直接使用容器类（更详细但没有可怕的扩展`Object`）：

```
hs.sort_by { |h| [h[:id], SortByInverter.new(h[:name])] } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T16:12:21.520

你可以尝试类似的东西

```
a.sort do |a1, a2|
  comparison = a1[:id] <=> a2[:id]
  (comparison != 0) ? comparison : a1[:name] <=> a2[:name]
end 
```

# css - 制作始终处于“顶部”的部分

> ID：15437027
> 
> 赞同：1
> 
> 时间：2013-03-15T16:07:16.990
> 
> 标签：css, html, properties, always-on-top

有什么方法可以`section`在 html 中制作始终显示为“顶部”的内容？有点像菜单栏，只是为了说明这意味着什么，但适用于整个部分。在我的特殊情况下，我有一个 html 主要分为两部分：上部有一个列表，这应该是可滚动的，下部有几个按钮，但是这个应该**总是**被用户看到，因为他/她可能想在不向下滚动（可能很多）的情况下单击其中一个按钮以到达按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:09:33.477

您可以使用`position: fixed`固定相对于浏览器窗口的元素。这会给你你想要的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:12:39.667

你可以试试 ：

```
 postion:fixed;
 display: block; 
 top: 0px; 
```

# angularjs - AngularJs - 控制器中的绑定复选框集合

> ID：15437029
> 
> 赞同：0
> 
> 时间：2013-03-15T16:07:21.937
> 
> 标签：angularjs

**我的HTML：**

```
 <ol  ng-model="gcwr.checked" ng-repeat="gcwr in gcwrs" id="gcwr">                         
 <label class="checkbox" for="{{gcwr.Id}}">  
 {{gcwr.Description}}
 <input ng-model="gcwr.checked" type="checkbox"  /></label>
 </ol> 
```

**我的容器控制器：**

```
 // initialize section
    $scope.gcwrs = API.GetGCWRs();

   // in the save/submit function
    var newContainer = $scope.newContainer;
    var myGCWRS;
    var tmp = angular.forEach($scope.gcwrs, function (gcwr) {
        myGCWRS += gcwr.checked ? gcwr : null;
        });

    newContainer.GCWRs = [
        angular.copy(myGCWRS)
    ]; 
```

**问题：**

GCWR 填充在表单中，但我在提交/保存函数广告中收集检查的 gcwrs 时做错了，将集合添加到 newContainer。

有任何想法吗？

**-- 在 Angular 的世界里永远不会有无聊的一天 :(**

**解决了：**

好痛啊！！！TGIF 因为现在我有一个理由。

这是解决方案：（对不起，我从原始帖子中更改了一些名称）

```
 var selectedGCWRs = [];        
    var tmp = angular.forEach($scope.gcwrs, function (gcwr) {            
        if (gcwr.checked) {      
            selectedGCWRs.push(gcwr);
        }
    });

    newContainer.GCWRs = selectedGCWRs;

   .... then go on and save the newContainer. 
```

[注意：如果我使用了 angular.copy，Angular 在 ng-repeat 中创建的 $$hashkeys 就不会被剥离；因此，服务器将拒绝此集合，因为它有一个额外的属性，即 $$hashkey，它与服务器上的模型类不匹配。通过简单地将集合传递给容器，$$hashkeys 被剥离并且服务器很高兴。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:15:06.390

我认为你需要使用

```
var myGCWRS = [];
var tmp = angular.forEach($scope.gcwrs, function (gcwr) {
    if(gcwr.checked) {
        myGCWRS.push(gcwr);
    }
});
newContainer.GCWRs = angular.copy(myGCWRS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T19:07:20.170

我不确定您是否需要一个新容器来存放任何东西。通过 angular 的双向绑定，gcwrs 数组始终是最新的。当您准备好处理选定的元素时，只需查看数组即可。

这是一个演示的 plnkr：http: [//plnkr.co/edit/DxQY74XBxzOU66X18xqH](http://plnkr.co/edit/DxQY74XBxzOU66X18xqH)

请注意，当复选框被选中/取消选中时，对象状态会发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:09:05.977

**解决了：**

好痛啊！！！TGIF 因为现在我有一个理由。

这是解决方案：（对不起，我从原始帖子中更改了一些名称）

```
var selectedGCWRs = [];        
var tmp = angular.forEach($scope.gcwrs, function (gcwr) {            
    if (gcwr.checked) {      
        selectedGCWRs.push(gcwr);
    }
});

newContainer.GCWRs = selectedGCWRs; 
```

.... 然后继续保存 newContainer。

[**注意：**如果我使用了 angular.copy，Angular 在 ng-repeat 中创建的 $$hashkeys 就不会被剥离；因此，服务器将拒绝此集合，因为它有一个额外的属性，即 $$hashkey，它与服务器上的模型类不匹配。通过简单地将集合传递给容器，$$hashkeys 被剥离并且服务器很高兴。]

# mysql - 将内存表用于静态值集

> ID：15437030
> 
> 赞同：0
> 
> 时间：2013-03-15T16:07:23.567
> 
> 标签：mysql

我在设计数据库模式方面没有很多经验，当然在 MySQL 中也没有。

所以我的问题是：“如果我有静态数据集，如国家、城市、性别 - 男性/女性/未定：P 等。如果我在内存中创建这个相对较小的表格，这对我来说会是一个优势吗？ "

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:15:14.393

长话短说：不。因为少量的主要读取数据将根据其访问频率被缓存或放置到缓冲区中。

内存表也会在 MySQL 服务重新启动时清空，因此每次服务启动时您必须至少填充一次它们。

当您真的想避免 IO 时，MySQL 内存表最有用，因为您有大量的算术或 IO 以特定表为中心，并且如果服务器崩溃或重新启动，可能会丢失数据。由于在服务重新启动时被清除而使用有限的 MEMORY 表。

InnoDB 表将是最安全的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:15:07.097

如果您需要在服务器关闭期间保留数据，它不会帮助您在内存中创建这些表。内存表应该只用于存储临时数据。然而，没有什么可说的，您不能将基础数据存储在基于磁盘的表中，并使用一些过程将数据加载到内存表中以便更快地访问。

然而，这对我来说似乎是很多工作，因为，如果：

*   您使用正确索引的基于磁盘的表

*   您为整个索引分配足够的内存以驻留在内存中

*   你设计你的查询总是正确地利用你的索引

*   你利用 MySQL 的查询缓存

对于相对较小的表，您不太可能看到这些可能的显着性能提升。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:15:28.327

这是一个很好的问题，但它不是一个容易回答的问题，因为它确实取决于个人用例。在大多数情况下，答案是否定的。

MEMORY 引擎与普通存储有点不同，顾名思义，它将数据存储在内存中而不是磁盘上——它默认使用基于散列的索引系统，速度非常快（尽管您也可以使用二叉树索引）。

MEMORY 引擎非常适合创建临时表，但是当服务器关闭时，数据会丢失。这将在您的应用程序逻辑中创建额外的工作来检查它是否存在并具有数据，如果不存在则填充它。

更好的方法是使用普通的数据库存储类型并具有良好的索引，因此它很快，如果经常使用，甚至可以查看缓存。

MEMORY 表有一些重要的限制：

*   MEMORY 表使用固定的行大小，因此如果您使用可变长度数据类型（例如 VARCHAR），它实际上将是固定的，并为每行使用可能的整个空间。
*   MEMORY 表不能包含 TEXT / BLOB 类型
*   没有为了回收内存而进行垃圾收集的概念。如果从 MEMORY 表中删除单个行，则在删除整个表之前，以前使用的内存不会返回给操作系统。您可以使用 ALTER TABLE 命令强制执行此操作，但通常值得考虑是否要保留 MEMORY 表一段时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T21:08:54.900

不可以。创建一个普通的表并使用 SQL_CACHE 来提高性能。

```
SELECT SQL_CACHE id, name FROM customer; 
```

结果将被缓存在内存中以获得更好的性能，但数据仍会持久保存在硬盘中。

参考：[http ://dev.mysql.com/doc/refman/4.1/en/query-cache-in-select.html](http://dev.mysql.com/doc/refman/4.1/en/query-cache-in-select.html)

**更新**[添加更多信息]

[参考链接](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_query_cache_type)

在 my.cnf 中，您可以为查询缓存类型设置 3 个可能的值：

```
query_cache_type = 0 --> query cache is totally off. MySQL won't cache anything at all.
query_cache_type = 1 --> query cache is on by default. you have to use SQL_NO_CACHE hint to disallow caching some queries (e.g., highly dynamic queries)
query_cache_type = 2 --> query cache is off by default. you have to use SQL_CACHE hint to allow caching. 
```

默认情况下，该值为 1（打开）。

但是，您的记忆力将受到限制。因此，您更愿意告诉 mysql 您要缓存哪些查询，以及您不想缓存哪些查询。例如，您想缓存国家/地区列表，但如果您已经有内存缓存，您可能不想缓存配置文件查询。在这里使用缓存提示很有意义。

# neo4j - Neo4j：在密码中查找来自同一父母的孩子

> ID：15437036
> 
> 赞同：3
> 
> 时间：2013-03-15T16:07:34.930
> 
> 标签：neo4j, cypher

我们如何在密码中做到这一点？
有**n 个父母 p1, p2, p3.... pn**和**m 个孩子 c1, c2,c3... cm**。
假设**c1**派生自 (child of) **p1,p2 and p3**并且**c2**派生自 (child of) **p1, p2 and p3**。
给定**c1**我们可以找到**c2**吗？（从与 c1 相同的父节点派生的节点）
一个子节点可以有 1...n 个父节点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T19:33:30.833

实际上，几周前我在这里问[了一个非常相似的问题，然后我得到的答案也对你有用，只需稍作调整。](https://stackoverflow.com/questions/14657265/finding-nodes-that-have-all-common-intermediaries)

```
START c1=node(*), c2=node(*)
MATCH c1-[:ChildOf]->parent<-[:ChildOf]-c2 
WITH c1, c2, count(parent) AS parentsFound
WHERE length(c1-[:ChildOf]->()) = parentsFound
  AND length(c2-[:ChildOf]->()) = parentsFound
  AND c1 <> c2
RETURN c1, c2 
```

*注意：大概你会有一个更好的方式来选择你的`c1`and 而`c2`不是使用`node(*)`.*

逐行查询的逻辑：

1.  从所有孩子开始`c1`，`c2`
2.  查找和`parent`共享的所有 s`c1``c2`
3.  `parent`统计找到的 shared 数量
4.  确保找到的 s 数与已找到的s`parent`总数相匹配。`parent``c1`
5.  确保找到的 s 数与已找到的s`parent`总数相匹配。`parent``c2`
6.  （可选）不要费心将节点与自己进行比较
7.  返回结果！

# java - 如何使用 log4j 查看 Jersey

> ID：15437043
> 
> 赞同：7
> 
> 时间：2013-03-15T16:07:49.340
> 
> 标签：java, log4j, jersey

我是 log4j 的新手，正在尝试使用它来更好地理解我的资源为什么提供`415 Media Type Not Supported`标头。

我正在使用以下内容：

```
log4j.rootCategory=WARN, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %t %c:%L - %m%n

log4j.category.com.sun.jersey=DEBUG,stdout 
```

这**似乎**应该可以工作，但我在控制台中没有显示任何关于 POST 到达此应用程序的信息。我知道它正在到达应用程序，因为如果我关闭应用程序，POSTer 在尝试 POST 时会抛出“连接被拒绝”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T16:51:03.740

恐怕这不像将 Jersey 包添加到 Log4J 配置那么简单。Jersey 内部不使用 Log4J；相反，它使用[Java 日志记录](http://docs.oracle.com/javase/6/docs/api/java/util/logging/package-summary.html)。

如果您更喜欢使用 Log4J，那么您的选择是将 Java 日志配置为使用[SLF4JBridgeHandler](http://www.slf4j.org/api/org/slf4j/bridge/SLF4JBridgeHandler.html)作为日志处理程序。

通常，这是通过通过 JVM 属性指定日志记录属性文件并将处理程序添加到属性文件来完成的，如下所示：

1.  指定日志记录属性文件

    `-Djava.util.logging.config.file=/path/to/logging.properties`

2.  在文件中添加`SLF4JBridgeHandler`作为日志处理程序`logging.properties`

    ```
    handlers=org.slf4j.bridge.SLF4JBridgeHandler
    ```

然后 SLF4J 可以绑定到 Log4J，然后您可以`log4j.properties`像往常一样使用您的来指定 Jersey 类的日志记录级别。

顺便说一句，我的建议——如果你只是为了快速调试而这样做——是：

1.  将调试器附加到您的应用程序（假设您有应用程序源代码）；

2.  或直接使用 Java 日志记录。要将[Java 日志记录配置为输出到文件](http://docs.oracle.com/javase/6/docs/api/java/util/logging/FileHandler.html)，请将以下内容添加到您`logging.properties`之前指定的文件中 --

    ```
    com.sun.jersey.level=DEBUG
    com.sun.jersey.handlers=java.util.logging.FileHandler
    java.util.logging.FileHandler.pattern=/path/to/debugging.log
    java.util.logging.FileHandler.formatter=java.util.logging.SimpleFormatter
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-04T12:56:46.640

您可以`JUL to SLF4J Bridge`为此首先将其添加到您的类路径中。如果您使用的是 maven，则可以使用它：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>jul-to-slf4j</artifactId>
    <version>1.7.5</version>
</dependency> 
```

将这些行添加到静态初始化程序块或 main 方法中：

```
LogManager.getLogManager().reset();
SLF4JBridgeHandler.install(); 
```

现在您可以从`log4j.properties`文件中控制球衣日志：

```
log4j.category.org.glassfish.jersey=WARN,stdout 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:15:14.010

你可以在 [这里](http://www.avajava.com/tutorials/lessons/how-do-i-initialize-log4j-in-a-web-application.html)看到 它正在运行你必须配置你的

*   web.xml
*   log4j.properties
*   Log4JInitServlet.java
*   Log4JTestServlet.java

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-03-15T17:24:04.060

我无法让日志记录工作，但我能够确定如何获得我需要的 ContentType。我不得不把这个添加到我的课堂上......

```
@Context
UriInfo uriInfo;

@PostConstruct
public void myfunc() {
    if (uriInfo == null) { //breakpoint on this line, so I can see what uriInfo is

    }
} 
```

# ios - 甚至可以自定义 iOS 闹钟？

> ID：15437047
> 
> 赞同：5
> 
> 时间：2013-03-15T16:07:55.720
> 
> 标签：ios, alert, uilocalnotification, alarm

过去几天我一直在为 Android 构建一个自定义闹钟。到目前为止一切顺利，警报响起，我使用 HTTP 流播放一些远程声音（当然需要网络，否则，有本地声音的后备）。现在是时候把这个应用程序带到 iOS 上了，我是一个完全的初学者，但我不害怕学习 Objective-C，因为客户端部分非常简单。但在我看来，这似乎是不可能的。如果可能的话，我想在这里得到一些帮助：

*   在 iOS 开发人员文档中，我看到“对于 iOS 中的远程通知，您可以指定 iOS 在为应用程序呈现本地或远程通知时播放的自定义声音。声音文件必须位于客户端应用程序的主包中。 ”。这对我来说很糟糕，我想播放 1 到多个声音，并且可能超过 30 秒。有解决办法吗？
*   在另一个问题中，我看到“它们可能是支持后台的音频应用程序（在应用程序的 plist 中使用 UIBackgroundModes）并使用音频队列或 RemoteIO 音频单元播放静音，甚至在后台，直到有时间混合一些警报声音或音乐.”，但之后有人说 AppStore 验证不允许这样做。这仍然准确吗？
*   在一个普遍的问题中，现在（或在不久的将来的 iOS 版本中）是否有可能制作一个能够不受限制地播放远程声音的简单闹钟？

我会很感激这里的任何反馈，我对我看到这个简单的功能似乎不可能做到感到非常失望。除非我在某个地方弄错了，我希望有人能给我一个提示！

谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T15:55:54.390

我认为没有办法解决这个问题，因为 Apple 不允许在没有用户交互的情况下启动应用程序。尽管您可以更改工作流程，以便用户必须保持应用程序运行（屏幕仍然可以锁定）才能使警报正常工作。这就是其他警报应用程序的工作方式。

我怀疑您提到的第二种解决方案不适用于Apple，因为它会耗尽用户的电池。您在不做任何事情的情况下占用 CPU 周期（播放静音）。

# css - CSS中的发光文字+文字轮廓（已经使用文字阴影发光）

> ID：15437048
> 
> 赞同：2
> 
> 时间：2013-03-15T16:07:56.207
> 
> 标签：css, css-animations

所以我碰到了一堵砖墙。我正在为某些文本使用关键帧发光，但我还需要应用文本轮廓。这在 CSS 中可能吗？

请参照附件。文本是绿色的，所以找到一种颜色来补充它已经够难的了。我在 Excel 中演示了一些东西，找到了我喜欢的东西，但不知道如何在 CSS 中重新创建它。

这是我想要的：

![在此处输入图像描述](../Images/6c2a700d99e22eda20feb8b5aba47060.png) [http://www.flickr.com/photos/68814612@N05/8560198200/](http://www.flickr.com/photos/68814612@N05/8560198200/)

这是我目前使用的代码：

```
.metric {
    font-size: 240%;
    font-family:Arial Narrow;
    font-weight:700;
    color:#138200;

    text-shadow: -1px -1px 0 #92d050, 1px -1px 0 #92d050, -1px 1px 0 #92d050, 1px 1px 0 #92d050;
    -webkit-animation-name: glow;
    -webkit-animation-duration: 3s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
}

@-webkit-keyframes glow {

    0% { text-shadow: 0 0 4px green; }
    50% {text-shadow: 0 0 20px rgba(19,130,0, 0.5), 0 0 20px rgba(19,130,0, 0.5), 0 0 20px rgba(19,130,0, 0.6),0 0 15px rgba(19,130,0, 0.6) ;}
    100% { text-shadow: 0 0 4px green; }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:51:38.670

只是为了后代，这是我对上述 Jeff 提议的回应：

[http://jsfiddle.net/Osceana/cNYZa/](http://jsfiddle.net/Osceana/cNYZa/)

HTML：

```
<div id="Percentage">
    <div class="metric">98.3%</div>
    <div class="metric2">98.3%</div>
</div> 
```

然后我只是在 CSS 中设置关键帧发光：

```
.metric {
    position: absolute;

    font-size: 37pt;
    font-family:Segoe UI Light;
    color:#138200;

    text-shadow: -1px -1px 0 #92d050, 1px -1px 0 #92d050, -1px 1px 0 #92d050, 1px 1px 0 #92d050;
    -webkit-animation-name: glow;
    -webkit-animation-duration: 3s;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
}

@-webkit-keyframes glow {

    0% { text-shadow: 0 0 20px rgba(19,130,0, 0.7); }
    50% {text-shadow: 0 0 20px rgba(19,130,0, 0.7), 0 0 20px rgba(19,130,0, 1), 0 0 20px rgba(19,130,0, 1),0 0 20px rgba(19,130,0, 1),0 0 20px rgba(19,130,0, 1),0 0 20px rgba(19,130,0, 1), 0 0 30px rgba(19,130,0, 1);}
    100% { text-shadow: 0 0 20px rgba(19,130,0, 0.5)/*0 0 4px green*/; }
        }

.metric2 {
    position:absolute;

    font-size: 37pt;
    font-family:Segoe UI Light;
    color:#138200;

    text-shadow: -1px -1px 0 #92d050, 1px -1px 0 #92d050, -1px 1px 0 #92d050, 1px 1px 0 #92d050;

} 
```

# matlab - 在 Matlab 中对来自 4D 矩阵的向量进行操作

> ID：15437052
> 
> 赞同：0
> 
> 时间：2013-03-15T16:08:03.757
> 
> 标签：matlab

我正在尝试对图像中的每个像素进行如下操作：

![方程](../Images/3b934240e3a4f52dc174278b94255fa3.png)

A 是 x*y*4 矩阵，w 只是一个 1x9 向量。

我有一个矩阵 L，它是 200x200x4x9。

L 的前两个维度是像素的 (x,y) 位置。每个位置有 4 个不同的子像素（第三维）。每个子像素都有一个向量 m，最后一个维度是我方程中的 m。

我计划获得整个图像的第一个子像素的结果，这就是我尝试过的：

```
A (:,:,1) = w * L (:, :, 1, :)  ====> Inputs must be 2-D, or at least one input must be scalar.
A (:,:,1) = w * L (:, :, 1, :)' ====> Transpose on ND array is not defined.
A (:,:,1) = w * reshape (L (:, :, 1, :), 1, 9)' ===> To RESHAPE the number of elements must not change. 
```

如果我只打印 L (1,1,1,:) 我会得到单个元素的值（看起来不像向量）：

```
ans(:,:,1,1) = 0.8980
ans(:,:,1,2) = 0.8065
ans(:,:,1,3) = 0.8471
ans(:,:,1,4) = 0.7607
ans(:,:,1,5) = 0.7175
ans(:,:,1,6) = 0.9020
ans(:,:,1,7) = 0.8100
ans(:,:,1,8) = 0.7640
ans(:,:,1,9) = 0.8135 
```

编辑：供参考，

```
Size(A) = [200 200 4]
Size(L) = [200 200 4 9] 
Size(w) = [1 9] 
```

编辑：这就是我使用循环的方式

![环形](../Images/213fbb8d8512e3d6879ae797ae3edba7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T03:23:39.493

与其在双 for 循环中使用带有 reshape 等的矩阵乘法，不如在更短的维度上反转过程并循环，如下所示：

```
A=zeros(size(L)(1:3));
for i=1:9
    A(:,:,:)=A(:,:,:)+w(i).*L(:,:,:,i);
end 
```

结果，不是通过双 for 循环进行 40000 次循环，而是总共进行了 9 次循环。而且我怀疑 Matlab 的 JITA 也会在这样的循环上工作，以产生更好的结果（我使用八度音阶，所以我不能确定 - 这也不值得我做任何时序测试，因为八度音阶的时序不会对matlab有效）。

也可以通过简单地使用向量索引而不是矩阵索引来纯粹以向量形式进行。它是这样工作的：

```
A=zeros(size(L)(1:3));
A(:)=reshape(L,numel(A),9)*w'; 
```

这个版本当然使用了 reshape，但它避免了 bsxfun 和挤压，我怀疑它会比其他解决方案更快，除了前面提到的 for 循环超过 9 个值。

（当然，如果要将其限制为仅“第一个子像素”，则需要限制数据。对于 for 循环选项，只需在适当的位置放置一个 1 代替冒号即可。对于重塑和矩阵相乘选项，在它出现的两个地方用 L(:,:,1,:) 替换 L）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:17:23.987

我最近成为了它的忠实粉丝`bsxfun`，假设我对您的理解正确，这似乎非常适合它。我们只需要重塑`w`然后利用`bsxfun`' 自动扩展单例维度的能力来使其输入的大小匹配。

```
w = reshape(w, [1, 1, 1, length(w)]);
A = sum(bsxfun(@times, L, w), 4); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:15:37.013

您应该使用`squeeze`来获得矢量形式。尝试

```
a=squeeze(L(1,1,1,:)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:24:33.973

*多维乘法在 Matlab 中不起作用，这就是为什么你不能这样做`A = L * w`*！

从 Mathworks 页面（[如何在 MATLAB 中执行多维矩阵乘法？](http://www.mathworks.com/support/solutions/en/data/1-171X2/index.html?product=ML&solution=1-171X2)）：

> 解决方案：
> 
> 在 MATLAB 中执行多维矩阵乘法的功能不可用。
> 
> 作为一种解决方法，请使用 FOR 循环。
> 
> 此外，还有一个名为 NDFUN 的用户创建函数，用于执行 ND 矩阵乘法。有关详细信息，请参阅以下 URL 中有关 NDFUN 的部分：
> 
> [http://www.mit.edu/~pwb/matlab/](http://www.mit.edu/~pwb/matlab/)

带有循环的解决方案应如下所示：

```
A = zeros( size(L)(1:3) );
for i = 1:size(L,1)
    for j = 1 : size(L,2)
        A(i,j,:) = squeeze( L(i,j,:,:) ) * w';
    end
end 
```

* * *

但是，如果您更喜欢简洁的解决方案而不是更快的解决方案（循环应该很快），您可以使用答案中的方法[将 3D 矩阵与 2D 矩阵相乘](https://stackoverflow.com/questions/1745299/multiply-a-3d-matrix-with-a-2d-matrix)（假设`size(L) == [200 200 4 9]`和`size(w) = [1 9]`）：

```
Ac = cellfun( @(x) squeeze(x)' * w', num2cell(L,4), 'UniformOutput', false);
A = cell2mat( squeeze(Ac) ); 
```

# java - 删除csv文件java

> ID：15437055
> 
> 赞同：0
> 
> 时间：2013-03-15T16:08:09.923
> 
> 标签：java, csv, file-io

我有一个 CSV 文件，我只是从中读取值，还有另一个我放置这些值并更新的地方。我想删除第一个 CSV，并重命名更新后的 CSV。这就是我所拥有的：

```
try
{
    if(file.delete())
    {
        System.out.println("Successfully deleted!");
    }
    else
    {
        System.out.println("Delete Operation didn't work.");
    }

    newFile.renameTo(new File("Book1.csv"));
}

catch (IOException ioe)
{
    System.out.println("ERROR. IO Exception: " + ioe.toString());
} 
```

我已经检查了自己，由于某种原因，删除功能并不总是有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:10:30.810

如果没有更多信息，就不可能说出您的删除失败的原因。但是，至少您应该检查以确保删除成功：

```
if(file.delete()) {
    //Handle success
} else {
    //Handle failure
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T10:04:28.317

我遇到了类似的问题，原来我在阅读后没有关闭 csv 文件。关闭它并解决问题:-) ...

# sql - 将值插入行

> ID：15437059
> 
> 赞同：0
> 
> 时间：2013-03-15T16:08:20.060
> 
> 标签：sql, asp.net-mvc-3, razor, insert

所以我有一个包含几列的表，其中两个是“FirstName”和“LastName”。我想创建第三列，将这两列组合成一个用户名。所以我在我的模型中创建了一个用户名字段，但我对 C#、MVC 和编程真的很陌生，不知道如何告诉我的控制器组合“名字”和“姓氏”值并将它们插入到行中。

这些是我迄今为止的尝试。我接近了吗？

```
//AdministrationController:

          [HttpPost]
    public ActionResult Create(Administration administration)
    {
        if (ModelState.IsValid)
        {
            var f = administration.FirstName;
            var l = administration.LastName;
            var fl = f + l;

            foreach (var w in administration.Username)
            {
                db.Administrations.Add(fl);
            }
            db.Administrations.Add(administration);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(administration);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:20:41.900

在 Sql server 上，您可以创建一个计算列

```
ALTER TABLE [tablename]
ADD username AS firstName + lastName 
```

不确定其他数据库的语法

# c# - 将多个 C# dll 合并为一个并导出合并后的 dll 以在另一个项目中使用

> ID：15437062
> 
> 赞同：1
> 
> 时间：2013-03-15T16:08:25.003
> 
> 标签：c#, dll, windows-phone-8, ilmerge

我有一个用于 Windows Phone 8（VS 2012 Pro）的大型 C# 解决方案，由 12 个项目组成，这些项目使用独立存储和几个外部库，如 Newtonsoft.JSON、RestSharp、Unity for Dependency Injection 等

其中一个项目公开了几个功能接口并充当主项目。我想将解决方案中所有项目产生的所有 DLL 合并到一个 DLL 中，并在另一个项目中使用它。

我正在寻找类似于 C++ 静态库的东西。我想包含所有 DLL 中的所有代码，包括我正在使用的第 3 方 DLL 中的代码。

最终目的是将我合并的 DLL 用作其他项目的可分发 DLL。

我怎样才能正确地做到这一点？

我尝试过使用 ILMerge 命令行，但它会引发错误，因为我使用的是独立存储。我还尝试使用 ILMergeGUI，它似乎接受了我使用独立存储的事实，但是当我尝试使用生成的 DLL 时，我收到与我的第 3 方 DLL 相关的“未找到”错误。

有任何想法吗？将解决方案中的所有项目合并为一个是可能的，但不是首选（另外我仍然需要静态包含第 3 方 DLL）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:11:27.700

**ilmerge**不适用于 WPF 应用程序**。**你可以看看 [http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx)

# asp.net - 谷歌地图标记工具提示无法正常工作，mvc 4

> ID：15437068
> 
> 赞同：0
> 
> 时间：2013-03-15T16:08:31.607
> 
> 标签：asp.net, asp.net-mvc, google-maps, razor, asp.net-mvc-4

我的谷歌地图有点问题。我知道问题与循环有关，并且想要一些有关解决问题的更好方法的信息

所以让我为你画一幅画；我有一张通过 lat/lng 显示位置的地图（从数据库中提取）。这些标记有一个附加侦听器，允许您单击它们以显示信息，问题是，当我单击任何标记时，工具提示将集中在添加到地图中的最后一项并显示该标记的信息. 这是可笑的！（不是说唱歌手）

我想拿一把锤子把我的地图敲回原形，而不是在你们提出一些明智的建议之前。下面是编码。

```
 function initialize() {
      var mapOptions = {
          center: new google.maps.LatLng([REMOVED], [REMOVED]),
          zoom: 11,
          mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      var map = new google.maps.Map(document.getElementById("map-canvas"),
          mapOptions);
      // RAZOR BEGIN

       @foreach (var item in Model) {
<text>
      var markerlatLng = new google.maps.LatLng(@(item.latitude), @(item.longitude));
      var title = '@(item.address1)';
      var description = '@(item.averageRating)';
      var contentString = '<h3>' + title + '</h3>' + '<p>' + description + '</p>'

      var infowindow = new google.maps.InfoWindow({
          content: contentString
      });

      var marker = new google.maps.Marker({
          position: markerlatLng,
          title: title,
          map: map,
          draggable: false
      });

      google.maps.event.addListener(marker, 'click', function () {
          map.setZoom(15);
          map.setCenter(marker.getPosition());
          //open a div on the mouse location?
          infowindow.open(map, marker);
      });

      </text>
  }     
      //RAZOR END 
```

如您所见，它循环遍历模型并获取要放置在地图上的相关信息。

我试过将监听器放在剃刀循环之外，但这只是让它根本不起作用。

与往常一样，Stackoverflow，您的帮助将非常非常感谢。

PS。这次没有饼干。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:25:15.203

我认为您对 Razor/JS 如何协同工作感到困惑。

请记住，Razor 是在服务器端执行的，而 javascript 是在客户端执行的，如果您在加载后转到该页面并查看源代码，您将看到您的问题。您基本上是为模型中的每个元素生成大部分 javascript 代码，这意味着每个变量将被声明多次。

我会做什么（不确定这是否是最好的方法）是这样的：

```
<text>
// these are javascript arrays
var locations = [];
var descriptions = [];
</text>

@* This is the razor loop *@
@foreach (var item in Model) {
  <text>
    locations.push(google.maps.LatLng(@(item.latitude), @(item.longitude)));
    descriptions.push('<h3>@(item.address1)</h3><p>@(item.averageRating)</p>');
  </text>
}

// Now using javascript, create a loop that will create the markers and assign the listeners
<text>
for(var i : locations){

  var infowindow = new google.maps.InfoWindow({
      content: descriptions[i];
  });

  var marker = new google.maps.Marker({
      position: locations[i],
      title: title,
      map: map,
      draggable: false
  });

  google.maps.event.addListener(marker, 'click', function () {
      map.setZoom(15);
      map.setCenter(marker.getPosition());
      //open a div on the mouse location?
      infowindow.open(map, marker);
  });
}
</text> 
```

另一种选择是在 Razor 代码中使用 JSON 序列化程序，因此您将整个模型打印为 JSON 字符串，然后只需在 javascript 中解析它，而不是手动构建数组。

请注意，我没有测试此代码，因此可能会有一些错误，但我们的想法是让您走上正轨。

希望这可以帮助。

# c# - 在运行时更改云服务 web.config

> ID：15437072
> 
> 赞同：1
> 
> 时间：2013-03-15T16:08:39.497
> 
> 标签：c#, asp.net, wcf, azure

我正在尝试更改 Windows Azure 上已部署的云服务（在本例中为 WCF）的 web.config，当我尝试在运行时更改 web.config 中的 appSettings 时，出现权限被拒绝错误：

```
Access to the path 'E:\sitesroot\0\web.config' is denied. 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:21:31.623

[强尼 S](https://stackoverflow.com/users/1793911/jonny-s)是对的。您应该将要在运行时更改的设置存储在角色配置中。如果 Azure 移动您的`web.config`VM，更改将丢失，并且在多实例方案中，您的实例将不同步。您可以使用`roleenvironmentchanging`事件来管理角色实例如何响应配置更改。

有关`roleenvironmentchanging`事件检查的更多信息[http://msdn.microsoft.com/en-us/library/windowsazure/gg432963.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg432963.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:54:33.430

您应该将运行时需要更改的任何设置存储在角色的 ServiceConfiguration (cscfg) 中，然后在代码中使用以下内容来检索设置：

```
string setting = RoleEnvironment.GetConfigurationSettingValue("myConfigSetting"); 
```

部署后，您可以通过管理门户更改 ServiceConfiguration 中的值。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-15T16:53:52.270

如果您 RDP 进入 web 角色，您应该能够为登录用户添加权限到 web.config 文件。然后您可以修改 web.config。正如@Adil 提到的那样，这将导致 AppDomain 回收，因此只能作为最后的手段。

# c# - C# SQL 在左连接中选择右表仅返回唯一值，而不是每个值的一个实例

> ID：15437079
> 
> 赞同：1
> 
> 时间：2013-03-15T16:09:05.147
> 
> 标签：c#, sql, datagridview, datasource, on-duplicate-key

使用以下内容：

```
string strSelectSql = "SELECT Table1.ID, Table1.Status,  
    Table1.CustomerName,Table1.Date, Table1.LocationID, 
    Table2.LocationID As [LocationID 2] FROM Table1 LEFT JOIN 
    Table2 ON Table1.ID = Table2.ID 
    WHERE (Date Is Null AND ID= @SearchForString AND 
    Status != 'Archived') OR 
    ((Date Between @FromDate AND @ToDate) 
     AND ID= @SearchForString AND Status != 'Archived')";

        SqlConnection SqlConn = new SqlConnection(cstrDatabaseConnection);
        SqlDataAdapter SqlAdpt = new SqlDataAdapter();
        SqlCommand SqlCom = new SqlCommand(strSelectSql,SqlConn);
        SqlCom.Parameters.AddWithValue("@SearchForString",strSearchString);
        SqlCom.Parameters.AddWithValue("@FromDate",strFromDate);
        SqlCom.Parameters.AddWithValue("@ToDate",strToDate );

        SqlAdpt.SelectCommand = SqlCom;
        try
        {
            DataSet TempDS = new DataSet();
            SqlConn.Open();
            SqlAdpt.Fill(TempDS);
            SqlConn.Close();
            SqlConn.Dispose();
            if (Convert.ToInt32(TempDS.Tables[0].Rows.Count) > 0)
            {
                dgvQueryResult.DataSource = TempDS.Tables[0];
                dgvQueryResult.Refresh();
                dgvQueryResult.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCells);
                TempDS.Dispose();
            }

        }
        catch (SqlException sqlE)
        {
            MessageBox.Show(sqlE.Message);
            SqlConn.Close();
            SqlConn.Dispose();
        }
        catch (Exception UnknownE)
        {
            MessageBox.Show(string.Format("Unknown Exception: {0}",UnknownE.Message);
            SqlConn.Close();
            SqlConn.Dispose();
        }
        finally
        {
            if (SqlConn != null) SqlConn.Dispose();
        } 
```

现在这一切都很好，除非 Table2 有多个 LocationID 值

```
Table2
+----+------------+
| ID | LocationID |
+----+------------+
| 1  |     1      |
| 2  |     2      |
| 3  |     3      |
| 4  |     4      |
| 5  |     5      |
| 6  |     6      |
| 6  |     7      |
| 6  |     7      |
| 7  |     8      |
| 7  |     9      |
+----+------------+ 
```

我想忽略：

```
Table2
+----+------------+
| ID | LocationID |
+----+------------+
| 6  |     7      |
| 6  |     7      |
+----+------------+ 
```

得到这个：

```
Table2
+----+------------+
| ID | LocationID |
+----+------------+
| 1  |     1      |
| 2  |     2      |
| 3  |     3      |
| 4  |     4      |
| 5  |     5      |
| 6  |     6      |
| 7  |     8      |
| 7  |     9      |
+----+------------+ 
```

但我确实想要：

```
Table2
+----+------------+
| ID | LocationID |
+----+------------+
| 6  |     6      |
+----+------------+ 
```

因为 LocationID 没有重复。

另外，我确实想要：

```
Table2
+----+------------+
| ID | LocationID |
+----+------------+
| 7  |     8      |
| 7  |     9      |
+----+------------+ 
```

再次因为 LocationID 不重复。

如果我必须这样做或者它会更有效，我也愿意在之前从 TempDS 中删除这些行：

```
 dgvQueryResult.DataSource = TempDS.Tables[0]; 
```

如果即使需要或者最有效地从 dgvQueryResult 中删除条目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:18:02.960

代替

`LEFT JOIN Table2`

尝试：

`LEFT JOIN (Select id, locationId from table2 group by id, locationId having count(*) = 1) as table2`

# security - 持续部署/交付和安全

> ID：15437084
> 
> 赞同：4
> 
> 时间：2013-03-15T16:09:11.060
> 
> 标签：security, continuous-integration, continuous-deployment, continuous-delivery

我知道这是一个模糊的问题，但我正在寻找有关团队如何将安全性与持续交付/部署集成的博客或信息。我们每天多次部署到 AWS，我正在寻找团队为流程增加安全性的一些方法。

我看过一个演示文稿，其中一个团队使用 cucumber 进行了一些 nmap 测试，这并不是我想要的，但可能是在应用程序节点部署后，在它们进入负载均衡器接受流量之前对它们进行一些自动化测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:50:11.903

这可能不是您想要的，但*有效*安全测试的关键是在设计、实施等时将其构建到产品中。在应用程序的所有级别上，就像单元测试一样编码安全测试。使用这种方法，安全测试与一般应用程序测试没有什么不同。

预打包的安全测试很好，您应该使用它们（大多数组织在 QA 检查之前这样做），但它们不如您的内置测试有效。这是因为没有人像您的开发人员那样知道安全“危险区域”（或者至少他们应该知道。如果他们没有让他们读一本书。对于 Web 应用程序，我强烈推荐[“Web 应用程序黑客手册”](https://rads.stackoverflow.com/amzn/click/com/1118026470)，对于其他应用程序我推荐[Robert Seacord 的“Secure Coding in C and C++”](https://rads.stackoverflow.com/amzn/click/com/0321335724)，即使你不使用 C/C++。如果你可以等待的话[，Seacord 的书的第 2 版](https://rads.stackoverflow.com/amzn/click/com/0321822137)将于 4 月出版）。

除非在设计时考虑，否则安全性永远不会有效。如果您已经搞砸了，请尝试将安全测试集成到您的常规应用程序测试中。

编辑：

一些很棒的预装扫描仪（一些像语音一样免费，另一些像啤酒一样免费，还有一些根本不免费）可以针对您的 Web 应用程序运行（无特定顺序）。这些将找到常见和现有的漏洞，但不会找到您的 Web 应用程序的独特漏洞：

1.  [内苏斯](http://www.tenable.com/products/nessus)
2.  [开放式增值服务](http://www.openvas.org/)
3.  [尼克托](http://www.cirt.net/nikto2)
4.  [Acunetix](http://www.acunetix.com/)
5.  [打嗝套房](http://portswigger.net/burp/)
6.  [W3af](http://w3af.org/)
7.  [视网膜](http://www.beyondtrust.com/Products/RetinaNetworkSecurityScanner/)
8.  [曝光](https://www.rapid7.com/products/nexpose/compare-downloads.jsp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:21:56.290

在我的上一家公司 LMAX 中，我们像对待任何其他公司一样对待安全特性，并对这些特性进行自动化验收测试。

我们编写了验收测试，通过与系统的任何其他用户相同的渠道与系统交互，并证明系统的安全规定按预期工作。

因此，一项测试会断言，如果登录成功，则系统的其他功能可用。另一个人会断言，如果登录不成功，您将无法访问任何安全功能 - 真的很简单。

诀窍是确保您的验收测试通过与真实用户相同的通信渠道与系统交互，或者尽可能接近，没有特殊的技巧或后门进入应用程序的主要逻辑 - 特别是没有技巧或后门- 允许您绕过安全功能的门 ;-)

登录是一个简单的例子，但这种方法适用于任何用户级安全功能——实际上是任何功能。

当然还有其他类别的安全问题，检查缓冲区溢出、sql 注入等。其中很多是关于将您的应用程序架构成安全的——例如，通过分层应用程序来明确职责分离。

如果适用于您的应用程序，您也可以在验收测试中包含针对这些安全要求类别的测试，或者在部署管道中添加一个额外的步骤来针对这些类型的暴露运行测试。这取决于您的应用程序的性质，我可能会添加到大多数应用程序的验收测试中，并为应用程序采用专用的管道阶段方法，我可以在其中自动生成测试用例以尝试注入 - 例如在 Web 应用程序中搜索所有输入字段并试图注入垃圾？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T10:28:39.370

作为持续集成的一部分，可以做两件事——一是通过 check marx 等工具对安全故障进行静态代码分析，还可以将其集成到 WAPiti 等运行时漏洞评估工具中。在这种情况下，您始终处于安全问题之上。有时，您可以运行第三方的重量级安全评估。

本质上是在更改时（或尽可能频繁地）执行此操作，而不是将其作为发布前的最后一步。

我们为我们的日常构建做这些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T09:14:07.683

我们在 Mozilla 中处理这个问题的方法是通过 OWASP ZAP 代理我们的（功能）回归测试，然后使用 ZAP 蜘蛛、主动和被动扫描仪，这些都可以通过 REST API 进行控制。

我录制了一段关于这个过程的视频：[http](http://www.youtube.com/watch?v=ZWSLFHpg1So) ://www.youtube.com/watch?v= ZWSLFHpg1So，还有更多关于 ZAP wiki 的详细信息：[http ://code.google.com/p/zaproxy/wiki/ SecRegTests](http://code.google.com/p/zaproxy/wiki/SecRegTests)

这种方法允许安全工具（在这种情况下为 ZAP）“学习”应用程序“应该”如何使用，并且通常比爬取更有效。

当然，自动扫描只会发现潜在漏洞的一个子集，但这确实意味着安全人员可以专注于更“有趣”的问题:)

# xml - kml 文件中不显示任何内容

> ID：15437086
> 
> 赞同：0
> 
> 时间：2013-03-15T16:09:21.383
> 
> 标签：xml, kml

我有以下 kml 文件，但由于某种原因没有显示任何内容。

```
<?xml version="1.0" encoding="utf-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <Name>route</Name>
    <Placemark>
      <Linestring>
        <coordinates>14.5061117878199,35.8990365284545 14.5058167878199,35.8988670284544 14.5058167878199,35.8988670284544 14.5056558878199,35.8986975284544 14.5055646878199,35.8985889284545 14.5055109878199,35.8984238284544 14.5055163878199,35.8982543284544 14.5066562791164,35.8947140342037 14.5080133654525,35.895601956291 14.508068577642,35.895789456493 14.508202677642,35.895859056493 14.508374277642,35.895867756493 14.5085480700319,35.895743910548 14.5095892187563,35.8963904057043 14.5097121366401,35.8964673008673 14.5099171033588,35.8965955242694 14.510177777549,35.8967585972391 14.5102952126176,35.8968320624539 14.5105811353316,35.8965219258386 14.5106740188636,35.89642697518 14.5113605685456,35.8968622167023 14.5117147886365,35.8964875258677 14.5121309325049,35.8960473326169 14.5124913761678,35.8956660585436 14.512196695274,35.8954626335993 14.5118252855419,35.8952732535598 14.5123172,35.8948561 14.5119631,35.8943868 14.5125328991464,35.8939939330881 14.5122582,35.8937675 14.5120731,35.8936502 14.511888,35.8935589 14.5117351,35.8934981 14.5111936945862,35.8932897590689 14.5111102,35.8932439 14.510166,35.8926224 14.5100588,35.8925529 14.5100051885259,35.8924930260251 14.5099247,35.8923877 14.5095384,35.8914317 14.5094732358671,35.8913470355122 14.5094088414534,35.8912696267139 14.5093444414534,35.8912088267139 14.5092237960692,35.8911561036586 14.5091602101316,35.890886091117 14.5086586,35.8905972 14.5084548,35.8904756 14.5082724,35.8903626 14.5079935,35.8901366 14.5077789,35.8899367 14.5075321,35.8896064 14.5072424,35.8891718 14.5067302817904,35.8883782588094 14.5065451887012,35.8882243887012 </coordinates>
      </Linestring>
    </Placemark>
  </Document>
</kml> 
```

知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:25:37.840

XML（以及作为它的一种方言的 KML）是区分大小写的。<`Linestring>`不是 KML 标记。正确的标签是`<LineString>`

[KML 参考](https://developers.google.com/kml/documentation/kmlreference#linestring)

[修复了谷歌地图上的 KML](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FSO_emptyKMLa.xml&hl=en&sll=32.824552,-117.108978&sspn=0.691256,0.883026&t=m&z=15)

在 Google Maps API v3 地图上修复了 KML： [http ://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_emptyKMLa.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_emptyKMLa.xml)

# css - 嵌套时重置 css 列表计数和样式

> ID：15437088
> 
> 赞同：1
> 
> 时间：2013-03-15T16:09:32.840
> 
> 标签：css

我有以下 html 代码（简化

```
<ol class="step">
<li><p>some content</p></li>
<li><p>some content</p>
    <ul class="bull">
   <li><p>some nested content</p></li>
   <li><p>some nested content</p></li>
   <li><p>some nested content</p></li>
</ul>
</li>
<li><p>some content</p></li>
</ol> 
```

我创建了一些 css 来使 step 类的列表项比正常字体大小大一倍。我已经使用 :before 类来实现这一点，并且在我的树中有一个嵌套列表、有序或无序之前一切正常。

出于某种原因，我无法“重置”级联样式，因此欢迎提供有关如何正确执行此操作的任何建议。

这是我的css，如果你使用它，你会注意到ul 也有很大的数字，而实际上我只想再有一个基本的简单光盘。

```
ol.step{
    counter-reset: li;
    list-style: none;
    -webkit-padding-start: 20px;
}

ol.step li:before{
    content: counter(li);
    counter-increment: li;
    font-size:  200%;
    font: Arial;
    position: absolute; 
    left: -20px;
    padding-top : 1px;
}

ol.step li{
display: block;
position: relative;
padding-left : 10px;
padding-top : 1px;
}

ul.bull {
    list-style-type: disc;
    counter-reset: li;
} 
```

那么我必须做些什么来“重置”我的嵌套列表并让它们表现得很好？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:15:22.960

如果您希望`li`样式仅应用于`li`直接下的`ol.step`使用直接后代 CSS 选择器：

```
ol.step > li:before {
    content: counter(li);
    counter-increment: li;
    font-size:  200%;
    font: Arial;
    position: absolute; 
    left: -20px;
    padding-top : 1px;
}

ol.step > li{
    display: block;
    position: relative;
    padding-left : 10px;
    padding-top : 1px;
} 
```

# javascript - jsDatePick - 使用选定的日期

> ID：15437091
> 
> 赞同：0
> 
> 时间：2013-03-15T16:09:41.510
> 
> 标签：javascript, jquery

使用 jsDatePick Full JQuery 示例，我无法使用选定的指定日期加载日历，我收到未定义的消息或语法错误

完整代码可以从[JsDatePick下载](http://javascriptcalendar.org/)

他们提供的代码

```
g_globalObject2 = new JsDatePick({
useMode:1,
isStripped:false,
target:"div4_example",
cellColorScheme:"beige"
/*          
selectedDate:{
day:16,
month:3,
year:2013
},
yearsRange:[1978,2020],
limitToToday:false,
dateFormat:"%m-%d-%Y",
imgPath:"img/",
weekStartDay:1*/
}); 
```

如果我然后取消评论选定的日期部分，我会在加载后在日历上未定义，或者由于语法问题而无法加载

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T17:14:16.270

我遇到了同样的问题，并从这个德国人（[http://www.viathinksoft.de/?page=news&id=184](http://www.viathinksoft.de/?page=news&id=184)）的帖子中找到了以下解决方案。这篇文章是德文的，如果你翻译成英文，它会弄乱他提供的代码，所以先复制代码，或者你可以在下面复制。这是他的修复，你需要修改“jsDatePick.full.1.3.js”脚本，函数“setConfiguration”如下：

```
 this.selectedDayObject = {};
 this.flag_DayMarkedBeforeRepopulation = false;
 this.flag_aDayWasSelected = false;
 this.lastMarkedDayObject = null;

 if (!this.oConfiguration.selectedDate){
      this.currentYear      = this.oCurrentDay.year;
      this.currentMonth     = this.oCurrentDay.month;
      this.currentDay          = this.oCurrentDay.day;
 } else {
      this.currentYear      = this.oConfiguration.selectedDate.year;
      this.currentMonth     = this.oConfiguration.selectedDate.month;
      this.currentDay          = this.oConfiguration.selectedDate.day;
      this.selectedDayObject = this.oConfiguration.selectedDate;
      this.flag_aDayWasSelected = true;                                   
 } 
```

基本上，他在代码中添加了“else”条件和操作。

在您的 HTML 中，您需要使用“jsDatePick.full.1.3.js”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:09:50.130

取消注释所选日期部分时，您是否`,`在末尾添加了一个`cellColorScheme:"beige"`？如果不是，您将收到语法错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T17:42:03.787

我遇到了同样的问题，我的在编辑页面上，所以我需要在 jsDatePick 日期中设置正在编辑的记录，并将其显示在目标文本框中（我不能只在文本框中设置日期，这导致首先是NaN问题）。所以我的决议是塞萨尔的一个延伸：

```
this.selectedDayObject = {};  
this.flag_DayMarkedBeforeRepopulation = false;  
this.flag_aDayWasSelected = false;  
this.lastMarkedDayObject = null;

 if (!this.oConfiguration.selectedDate){
      this.currentYear      = this.oCurrentDay.year;
      this.currentMonth     = this.oCurrentDay.month;
      this.currentDay          = this.oCurrentDay.day;  } else {
      this.currentYear      = this.oConfiguration.selectedDate.year;
      this.currentMonth     = this.oConfiguration.selectedDate.month;
      this.currentDay          = this.oConfiguration.selectedDate.day;
      this.selectedDayObject = this.oConfiguration.selectedDate;
      this.flag_aDayWasSelected = true; 
      this.populateFieldWithSelectedDate();
} 
```

这会导致 closeCalendar 函数出现问题，需要将其更改为：

```
JsDatePick.prototype.closeCalendar = function () {
    if (this.JsDatePickBox) {
        this.JsDatePickBox.style.display = "none";
        document.onclick = function() {};
    }
}; 
```

# php - 无论真/假规则如何，空库回显消息显示 3 倍

> ID：15437092
> 
> 赞同：0
> 
> 时间：2013-03-15T16:09:44.510
> 
> 标签：php, html

好的，我对 php 很陌生，我的问题可能非常愚蠢，但我已经尝试了所有我能想到的组合，但无法让它正常工作。

它要么根本不在空画廊中显示消息，要么在每个画廊中显示三遍，无论它是否包含图像。

我知道缩略图周边不是最理想的，但我尝试使用自动图像裁剪周边来创建缩略图，但无法让它为我的生活工作。

我现在主要关心的是空的画廊消息，但如果你能帮助我合并一个可靠的图像裁剪片段来创建更好的缩略图.. 请做:)

```
function lightbox_display($dir_to_search, $rel){
    $image_dir = $dir_to_search;
    $dir_to_search = scandir($dir_to_search);
    $image_exts = array('gif', 'jpg', 'jpeg', 'png');
    $excluded_filename = '_t';
    foreach ($dir_to_search as $image_file){
        $dot = strrpos($image_file, '.');
        $filename = substr($image_file, 0, $dot);
        $filetype = substr($image_file, $dot+1);
        $thumbnail_file = strrpos($filename, $excluded_filename);
        if ((!$thumbnail_file) and array_search($filetype, $image_exts) !== false){
            echo "<a href='".$image_dir.$image_file."' rel='".$rel."'>
                  <img src='".$image_dir.$image_file."' alt='".$filename."' width='100' height='80' title='' border='none'/>
                  </a>"."\n";
        } else {
            echo 'Currently there are no machines available for sale, please check back with us soon.';
        }
    }
} 
```

更新了 php 编码：

我尝试将一个数组添加到 $imagesFound 以排除可能包含文件夹服务器端。

```
 function lightbox_display($dir_to_search, $rel){
    $image_dir = $dir_to_search;
    $dir_to_search = scandir($dir_to_search);
    $image_exts = array('gif', 'jpg', 'jpeg', 'png');
    $excluded_filename = '_t';
    $imagesFound = array('gif', 'jpg', 'jpeg', 'png') && 0;
        foreach ($dir_to_search as $image_file){
        $dot = strrpos($image_file, '.');
        $filename = substr($image_file, 0, $dot);
        $filetype = substr($image_file, $dot+1);
        $thumbnail_file = strrpos($filename, $excluded_filename);
    if ((!$thumbnail_file) && array_search($filetype, $image_exts) !== false) {
    $imagesFound++;
    echo "<a href='$image_dir$image_file' rel='$rel'>
          <img src='$image_dir$image_file' alt='$filename' width='100' height='80' title='' border='none'/>
          </a>\n";
}

    if ((0 === $imagesFound) !== true){
    echo 'Currently there are no machines available for sale, please check back with us soon.';
}
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:30:20.013

如果它三次显示相同的消息，我假设其中有三个文件，`$dir_to_search`但没有一个是图像。他们可能是`.`，`..`和其他东西。每次找到不是有效图像的文件时，您都会输出消息，所以您可以做的是记录您找到的图像数量，并且仅在以下情况下输出文本你没有找到。例如

```
$imagesFound = 0;
foreach ($dir_to_search as $image_file){
    $dot = strrpos($image_file, '.');
    $filename = substr($image_file, 0, $dot);
    $filetype = substr($image_file, $dot+1);
    $thumbnail_file = strrpos($filename, $excluded_filename);
    if ((!$thumbnail_file) and array_search($filetype, $image_exts) !== false) {
        $imagesFound++;
        echo "<a href='$image_dir$image_file' rel='$rel'>
              <img src='$image_dir$image_file' alt='$filename' width='100' height='80' title='' border='none'/>
              </a>\n";
    }
}

if (0 === $imagesFound) {
    echo 'Currently there are no machines available for sale, please check back with us soon.';
} 
```

更新以回应以下评论：

如果您多次调用 lightbox_display()，并且仍然只希望消息显示一次，则可以返回找到的图像数量并使用它。像这样的东西：

```
function lightbox_display($dir_to_search, $rel) {
    $imagesFound = 0;
    foreach ($dir_to_search as $image_file){
        if ((!$thumbnail_file) and array_search($filetype, $image_exts) !== false) {
            $imagesFound++;
            echo "<img...";
        }
    }
    return $imagesFound;
}

$totalImagesFound = 0;
foreach ($galleries as $gallery) {
    $totalImagesFound += lightbox_display($gallery['dir'], $rel);
}

if (0 === $totalImagesFound ) {
    echo 'Currently there are no machines available for sale, please check back with us soon.';
} 
```

也许这会有所帮助，尽管我不了解您的系统的更多信息，但我真的不知道。

# python - 如何使用 tweepy 获取最新的用户状态

> ID：15437097
> 
> 赞同：4
> 
> 时间：2013-03-15T16:09:56.103
> 
> 标签：python, twitter, tweepy

我正在尝试使用 tweepy 获取最新的用户状态

我的代码是

```
api = tweepy.API(auth)
for status in tweepy.Cursor(api.user_timeline).items():
    lastid = status.id
    laststatus = api.get_status(lastid).text
    break 
```

有用。但我必须使用循环。有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:12:18.880

`.items()`返回一个迭代器，因此您可以简单地调用`next()`以获取第一项：

```
status = next(tweepy.Cursor(api.user_timeline).items()) 
```

如果根本没有项目，这*可能会*引发异常。`StopIteration`您可以添加一个默认值`next()`来防止这种情况：

```
status = next(tweepy.Cursor(api.user_timeline).items(), None) 
```

# meteor - 当另一个相关集合更改时如何重新订阅 Meteor 集合

> ID：15437102
> 
> 赞同：1
> 
> 时间：2013-03-15T16:10:09.620
> 
> 标签：meteor

每当创建新活动时，我都想重新订阅 ActivitySteps，否则用户无权访问该活动的新创建步骤。我试过这个：

```
Activities.find().observeChanges {
  added: -> 
    console.log 'activity added'
    Meteor.subscribe 'activitySteps'
} 
```

但是当重新订阅发生时，创建的活动似乎没有向发布功能注册。如果我尝试在其中设置 setTimeout 以将重新订阅延迟几毫秒，那么我当然会收到 Meteor 错误，说我无法在模拟中设置计时器，但是它可以工作并且新步骤可用！

我也试过这个：

```
Deps.autorun ->
  Meteor.subscribe 'activitySteps', Activities.find().count() 
```

即使在发布函数中不需要传入的计数值以确定当前用户应该可以使用哪些步骤，这也有效。但这也会在删除活动时重新订阅，并且似乎这可能不是最好的方法。

我还在 Meteor 文档中看到可以从发布函数中观察变化，但这似乎相当复杂。

实现正确重新订阅的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:56:32.147

我相信通过将参数传递给发布函数应该可以解决问题。这在我当前的项目中对我有用。

## 服务器

```
Meteor.publish("Activities", function () {
    return Activities.find({});
});

Meteor.publish("ActivitySteps", function (activityId) {
    return ActivitySteps.find({activityId: activityId});
}); 
```

## 客户

```
Meteor.subscribe("Activities");
// I think this is now Deps.autorun but I haven't used it that way yet.
Meteor.autorun(function () {
    Meteor.subscribe("ActivitySteps", Session.get("activityId"));
}); 
```

# c# - 非表格图形操作

> ID：15437107
> 
> 赞同：0
> 
> 时间：2013-03-15T16:10:17.750
> 
> 标签：c#, image, graphics, service

我需要能够创建图像，但不是在 Windows 窗体应用程序中。我正在研究一种将 ZPL Zebra 打印机语言转换为图像的方法。严格来说，它将是 Windows 服务中使用的一个类。我所看到的一切都展示了如何在 Windows 窗体中显示图像或操作图形，但我绝对不需要创建图像的视觉组件。

是否有人对在 Windows 服务中使用 GDI+ 或用于图形操作的负担得起的 .NET 库有任何建议、建议或教程？

# asp.net-mvc - 如何查看属于 MVC 项目的文件？

> ID：15437115
> 
> 赞同：0
> 
> 时间：2013-03-15T16:10:39.060
> 
> 标签：asp.net-mvc, visual-studio, pdf, filenotfoundexception, server-error

我有一个文件，`eulatest.pdf`我希望能够通过我的网站查看。在这一点上，我真的不在乎它是否在`mywebsite.com/eulatest.pdf`或`mywebsite.com/eula/eulatest.pdf`任何变化；我无法让这些工作。如何查看此文件？我什至没有尝试通过代码访问它；我根本不知道它在哪里或如何访问它。

我不断收到此错误：

![没有找到您要查的资源](../Images/dac822d096f020c66e1a7211549be098.png)

我已经尝试将文件放在所有这些位置：

![解决方案资源管理器](../Images/2d8459362305a6be574e3e08a1f33dc2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:13:45.577

您需要在其中一个控制器中添加一个操作以流出该文件。

```
public class EULAController : Controller
{
    public ActionResult Index()
    {
        return File("eulatest.pdf","application/pdf");
    }
} 
```

假设该文件位于应用程序的根文件夹中。有关文件结帐的更多[信息](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.file%28v=vs.98%29.aspx)

如果这是在 EULA 控制器中，请使用：

```
 mywebsite.com/eula/ 
```

或者，您可以将该文件添加到路由映射中的忽略列表。

# c# - 如何检查传入的无效 guid 参数

> ID：15437120
> 
> 赞同：4
> 
> 时间：2013-03-15T16:11:06.330
> 
> 标签：c#, guid

我正在尝试创建一些测试数据，并且我想向用户返回错误消息，即传入的 guid 格式不正确 - 如何应用它的示例将会很棒

我正在使用的正确 guid 格式：

```
Guid user = new Guid("FF2214F8-5393-4B5A-B1CA-3620F85D9131"); 
```

我传入测试并希望向用户返回消息以通知而不是中断的无效 guid：

```
Guid user2 = new Guid("UserName"); 
```

我用来传入的方法：

```
public void UserName(user2)
{
....  
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T16:13:06.137

如果我理解正确`user2`是您要测试的 Guid，请尝试[Guid.TryParse](http://msdn.microsoft.com/en-us/library/system.guid.tryparse.aspx)：

```
 Guid result;
    if(Guid.TryParse(user2, out result))
    {
    //success (result variable has been assigned the Guid value)
    }
    else
    {
    //error
    } 
```

**编辑：**根据您的评论，我知道问题在于您正在向该方法传递一个无效的 Guid，因此当您创建要作为参数传递给该方法的变量时会发生异常。这有帮助吗？

```
Guid user2; 
if(Guid.TryParse("UserName", out user2))
{
 UserName(user2)
}
else
{
//do whatever you need to report the error
} 
```

我不确定你从哪里得到“用户名”，但这里的重点是，无论你在哪里尝试`Guid`从字符串创建一个并且你不确定字符串是否有效，你都需要使用`Guid.TryParse`方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:14:00.427

使用[Guid.TryParse](http://msdn.microsoft.com/en-GB/library/system.guid.tryparse.aspx)方法

```
Guid userGuid;
if (Guid.TryParse(user2, out userGuid))
{
   // Do something with the guid
}
else
{
   //throw exception...
} 
```

# sql - SQL“IN”关键字和在关系代数中引用重命名表

> ID：15437121
> 
> 赞同：2
> 
> 时间：2013-03-15T16:11:09.540
> 
> 标签：sql, rename, relational-algebra, temp-tables

我一直在尝试将 SQL 查询（列出 ID 号为 1000 的人的朋友的朋友的名称）转换为关系代数，但运气不佳。查询如下：

```
CREATE TEMPORARY TABLE Temp1 AS (
SELECT * FROM ( 
SELECT ID2 AS ID FROM isFriend WHERE ID1 = 1000 
UNION
SELECT ID1 AS ID FROM isFriend WHERE ID2 = 1000
) temp 
);

CREATE TEMPORARY TABLE Temp2 AS (SELECT * FROM MyTable);

SELECT Name FROM People WHERE ID IN (
SELECT ID2 AS ID FROM isFriend WHERE ID1 IN (SELECT * FROM Temp1)
UNION
SELECT ID1 AS ID FROM isFriend WHERE ID2 IN (SELECT * FROM Temp2)
); 
```

我做的第一件事是使用重命名操作创建临时表：

```
ρ(Temp1,∏ID1(σID2=1000(isFriend)) U (∏ID2(σID1=1000(isFriend))) 
```

我不太确定在那之后对“SELECT Name ...”做什么，除了

```
∏Name(σID.....) 
```

我将如何在 Select 操作中引用重命名的临时表“Temp1”，以及如何翻译“IN”关键字（WHERE ID1 IN ...）？

我对整个关系代数有点陌生，所以如果我完全忽略了一些非常明显的事情（对于那些有 RA 经验的人），我不会感到惊讶。

任何帮助将不胜感激，谢谢！

# c# - Csc.exe 从相同的 .cs 编译“不同”的 .dll

> ID：15437122
> 
> 赞同：1
> 
> 时间：2013-03-15T16:11:09.953
> 
> 标签：c#, msbuild, diff, csc, binary-reproducibility

提供如下简单的源 .cs 文件，有没有办法使用 MSBuild（或至少使用 csc.exe）生成相同的 .dll，以便它们的二进制哈希匹配？

**foo.cs**

```
public class Foo
{
    public int Bar;
} 
```

**foo.bat**

```
del foo*.dll

csc /t:library foo.cs
move foo.dll foo1.dll

csc /t:library foo.cs
move foo.dll foo2.dll

powershell -Command "Get-ChildItem foo*.dll | ForEach-Object { $_.CreationTime = $_.LastWriteTime = $_.LastAccessTime = \"2013-03-15\" }" 
```

示例二进制差异报告位于[https://dl.dropbox.com/u/65419748/CscBin.html](https://dl.dropbox.com/u/65419748/CscBin.html)

有谁知道这些差异是什么以及如何解决它们？

# python - Windows 上是否有替代 time.clock() 的精确计时器？

> ID：15437124
> 
> 赞同：3
> 
> 时间：2013-03-15T16:11:17.093
> 
> 标签：python, windows, time, python-2.7, virtual-machine

在某些虚拟机平台上的 Windows 中运行，Python 的 time.clock() 函数不准确。
我使用以下测试脚本在几个不同的平台上进行了一些测试：

```
import datetime
import time
import timeit

startClock = time.clock()
startTime = time.time()

while (True):
    currentClock = time.clock()
    currentTime = time.time()

    clockDiff = currentClock - startClock
    timeDiff = currentTime - startTime

    print (datetime.datetime.now())
    print ('time.clock() Seconds: %s' % str(clockDiff))
    print ('time.time() Seconds:  %s' % str(timeDiff))
    print ('Diff:              %s' % str(clockDiff - timeDiff))
    print ''

    time.sleep(5) 
```

根据我运行的虚拟机平台的不同，clockDiff 和 timeDiff 之间的差异差异很大。我尝试了 Parallels Desktop 8 for Mac、VMWare Fusion 5 和 Hyper-V。

请参阅[此相关问题](https://stackoverflow.com/questions/2395677/why-time-clock-returns-such-a-large-value-on-windows-server-2008-x64)。问题在于管理程序如何处理低级[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904(v=vs.85).aspx)函数。

我希望我的时间准确，不管这可能在什么管理程序上运行。我可以只使用 time.time()，尽管它没有我从 time.clock() 获得的精度。

是否有 time.clock() 的替代计时器可以提供相同的精度？我在 Windows 上运行 Python 2.7。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:12:09.223

`timeit`提供了[`default_timer`](http://docs.python.org/2/library/timeit.html#timeit.default_timer)据称返回当前系统上最准确的便携式计时机制。

# android - Tablet PreferenceFragments 两列

> ID：15437127
> 
> 赞同：2
> 
> 时间：2013-03-15T16:11:29.217
> 
> 标签：android

我正在努力实现这一目标：

![在此处输入图像描述](../Images/86d673e001a27d22013a7a4374932894.png)

但是我为 PreferenceFragments 找到的所有教程和技巧仅适用于手机，它在进入设置时会切换屏幕。任何想法如何实现这一目标？

# asp.net-mvc - iis7 asp.net mvc webapi重写

> ID：15437131
> 
> 赞同：3
> 
> 时间：2013-03-15T16:11:37.920
> 
> 标签：asp.net-mvc, rewrite

我遇到了与引用的帖子相同的问题（ WebAPI 的[重写规则因 ExtensionlessUrlHandler 而失败](https://stackoverflow.com/questions/13885343/rewrite-rule-for-webapi-fails-because-of-extensionlessurlhandler)），并尝试了几次尝试以成功解决该问题。我现在遇到的问题如下：

背景：

*   IIS7、重写模块和 ARR（我是重写和 ARR 的新手）
*   Site1 使用 ASP.Net MVC4 (www.foo.com) 托管我的 Web 前端
*   Site2 使用 ASP.Net MVC4 (svc.foo.com) 托管我的 webapi
*   我可以完全控制两个站点的代码和站点配置

目标：

*   将 www.foo.com/svc/* 重写为 svc.foo.com/api/*

在职的：

*   www.foo.com/svc/somecontroller/0 成功映射到 svc.foo.com/api/somecontroller/0

不工作：

*   www.foo.com/svc/somecontroller?id=0
*   我打开了失败的请求跟踪，似乎重写模块正在重写 url，但由于某种原因，从未向 svc.foo.com 发出请求

细节：

*   为了解决引用帖子中的问题，我在每次调用 webapi 的末尾附加了一个“.s”（我有完全的控制权，所以我可以做到这一点 - 不理想，但我现在需要这个工作正常）
*   没有 QS： www.foo.com/svc/somecontroller/0 变成 www.foo.com/svc/somecontroller.s
*   使用 QS：www.foo.com/svc/somecontroller?id=0 变为 www.foo.com/svc/somecontroller?id=0.s
*   然后我使用重写规则剥离“.s”并真正调用 svc.foo.com/api/somecontroller/0 或 svc.foo.com/api/somecontroller?id=0

我一生都无法弄清楚为什么使用查询字符串格式时这不起作用。

重写规则：

```
< rule name="Route requests with QS" stopProcessing="true">
    < match url="^svc/(.*)" />
    < conditions>
        < add input="{QUERY_STRING}" pattern="(.*).s" />
    < / conditions>
    < action type="Rewrite" url="http://svc.foo.com/api/{R:1}?{C:1}" appendQueryString="false" logRewrittenUrl="true" />
< / rule>
< rule name="Route the requests without QS" stopProcessing="true"> 
    < match url="^svc/(.*).s" /> 
    < conditions>
        < add input="{CACHE_URL}" pattern="^(https?)://" /> 
    < / conditions> 
    < action type="Rewrite" url="{C:1}://svc.foo.com/api/{R:1}" logRewrittenUrl="true" /> 
< / rule> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-14T15:22:14.763

这篇文章对我有用。 [.net Web API 应用程序中的 ARR/URL 重写器](https://stackoverflow.com/questions/21667270/arr-url-rewriter-within-a-net-web-api-application?lq=1)

添加 ignoreRoutes 完美地完成了这项工作。

# android - 将字符串从服务传递到意图

> ID：15437137
> 
> 赞同：1
> 
> 时间：2013-03-15T16:11:57.393
> 
> 标签：android, string, android-intent, service

要将数据从我的服务传递到我的意图，我使用以下代码：

```
private String stringVar;
    Bundle extras = intent.getExtras();
            if (extras != null) {
                Messenger messenger = (Messenger) extras.get("MESSENGER");

                try {

                    Message message = new Message();

                    int arg = var;
                    message.arg1 = arg;

                                //how can i add stringVar?

                    messenger.send(message);
                } catch (android.os.RemoteException e1) {
                    Log.w(getClass().getName(), "Exception sending message", e1);
                }
            } 
```

并在活动中：

```
private Handler handler = new Handler() {
        public void handleMessage(Message message) {

            int i = message.arg1;

            Log.e("Handler", "Succesfully transfered: " + (Integer.toString(i)));
        };
    }; 
```

但是现在你可以看到我只检索 arg1，它是一个 int。我怎样才能确保我将字符串值传递给我的 Intent？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:25:17.223

您可以创建一个 Bundle 并将多个值放入该包中，然后将其传递。

```
Bundle bundle = new Bundle();
bundle.putString("name", str);
message.setData(bundle); 
```

# php - PHP递归收集SimpleXMLElement数据并展平数组数组

> ID：15437139
> 
> 赞同：0
> 
> 时间：2013-03-15T16:12:00.720
> 
> 标签：php, xml, recursion, simplexml

我试图建立一个基于 xmldata 的数组结构。我相信这个问题与我如何处理有关`$finalData`。我最终想要一个包含三个记录数组的展平数组，但我想我需要先正确解析 XML 数据，然后再展平数据数组。我想修复解析 XML 数据的代码，所以我最初的问题是如何修复这段代码来解析 XML 数据，但随后我将研究如何展平最终的数据数组（我需要单独的`record`结构包含我最终需要的相关信息。我想你可以说我试图处理用户导入数据并最终只检索包含数据的各个组件。

```
public function processXml($xmldata,$finalData=array())
{
    $finalData = array();
    if($xmldata instanceof SimpleXMLElement){
        foreach($xmldata as $idata){
            $this->processXml($idata,$finalData);
        }
    } else {
        array_push($finalData,$xmldata);
    }
    return $finalData;  
} 
```

这是 XML 数据（请注意，我不知道用户将在他的 XML 数据中导入什么，这只是我创建的测试数据）：

```
`<?xml version="1.0" encoding="UTF-8"?>
     <configdata>
        <records>
             <somekey>
                <record>
                    <firstname>Jonathan</firstname>
                    <lastname>Kushner</lastname>
                </record>
                <record>
                    <firstname>Dustin</firstname>
                    <lastname>Kushner</lastname>
                </record>
                <record>
                    <firstname>Cameron</firstname>
                    <lastname>Kushner</lastname>
                </record>
            </somekey>
        </records>
    </configdata>` 
```

注意：提供的答案使用 xpath 和 domdocument。我试图学习递归和展平，所以虽然它是一种更好的方法，但我仍然希望弄清楚如何仅使用递归和展平来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:42:21.880

[与递归循环地毯式炸弹方法相比，使用XPath](http://www.php.net/manual/en/simplexmlelement.xpath.php)以精确的方式仅提取您想要的数据要好得多。

以下是您可以实现您想要的东西的方法：

```
// Create the document object
$xml = simplexml_load_string($xmlData);

$result = array();

// Get the <record> nodes and loop them
foreach ($xml->xpath('//record') as $record) {
    // to get the text data from a node in SimpleXML, just cast it to a string
    $result[] = array(
        'firstname' => (string) $record->firstname,
        'lastname' => (string) $record->lastname,
    );
}

print_r($result); 
```

[看到它工作](http://codepad.org/KKndkXEo)

要在`$record`不知道其名称的情况下从 中获取所有子元素，您可以使用：

```
$result[] = array_map(
    'strval', 
     iterator_to_array($record->children())
); 
```

请注意，同名元素（在 XML 中可能）在数组中不起作用。这里只有最后一个具有相同名称的元素会存在。

*编辑*

这仍然可以使用 XPath 完成，但是您需要使用 DOM 而不是 SimpleXML（这应该不是问题，它随处可用）。你可以这样做：

```
// Create the document object
$doc = new DOMDocument;

// This is required in order to ignore the pretty-print whitspace
$doc->preserveWhiteSpace = false;

// load the data into the object
$doc->loadXML($xmlData);
$xpath = new DOMXpath($doc);

$result = array();

// Get the text nodes and loop them
foreach ($xpath->query('//text()') as $record) {
    $result[] = $record->data;
}

print_r($result); 
```

[看到它工作](http://codepad.org/RdyDBaKt)

# php - Mysql 和 php 查询成另一个查询

> ID：15437140
> 
> 赞同：0
> 
> 时间：2013-03-15T16:12:04.127
> 
> 标签：php, mysql, sql, foreach

我有一个大问题，在网上阅读也许我找到了解决方案，但我认为它的逻辑太难理解了:)

我的 mysql 数据库中有一个表，它是：

```
CREATE TABLE eventi (
id INT(12) NOT NULL AUTO_INCREMENT,
autore VARCHAR(100) NOT NULL,
tipo VARCHAR(50) NOT NULL,
titolo VARCHAR(50) NOT NULL,
contenuto VARCHAR(2000) NOT NULL,
data_evento VARCHAR(30) NOT NULL,
fine_evento VARCHAR(30) NOT NULL,
data_finale VARCHAR(40) NOT NULL,
ora_evento VARCHAR(8) NOT NULL,
ora_fevento VARCHAR(8) NOT NULL,
img VARCHAR(255) NOT NULL,
accessi int(10) unsigned NOT NULL default '0',
pagato SET(  '0',  '1' ) NOT NULL default '0',
pacchetto SET(  '1',  '2', '3' ) DEFAULT NULL , -- Offerta 1=7gg, 2=14gg, 3=31gg
data DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
PRIMARY KEY (id)
); 
```

好的，问题是这样的：

我向我的客户出售一个活动，如果他们使用一种“pacchetto”，他们支付的费用或多或少。从表中可以看到有一个名为“pacchetto”（数据包）的列，可以设置为 1、2 或 3。如果他们选择第一个 (1)，他们的事件将在日期前 7 天显示（即是“data_finale”——英文：last_date）；如果他们选择第二 (2) 天，14 天，第三 (3) 天，31 天。我有很多客户端，如果一个客户端选择了数据包 1 并且事件应该在线，而另一个客户端选择了数据包 3 并且事件应该在线，我必须显示两个客户端的两个事件。我认为它“困难”但是我已经这样做了，但似乎没有运行，它只显示了 1 个正确的事件： pastebin 。com / RscmQJ7L 感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:32:50.103

我建议您重新编写 SQL 查询。所有这些都可以在 1 个查询中完成，性能更高。只需将您的条件与 OR 连接起来，如下所示：

```
... WHERE (pacchetto = '1' AND (data_finale >= NOW() AND data_finale <= (NOW() + INTERVAL 7 DAY)) OR
pacchetto = '2' AND (data_finale >= NOW() AND data_finale <= (NOW() + INTERVAL 14 DAY)) OR
pacchetto = '3' AND (data_finale >= NOW() AND data_finale <= (NOW() + INTERVAL 31 DAY)) 
```

未经测试，但你应该明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:35:04.190

在 mysql_fetch 中执行 mysql_query 时，我遇到了类似的问题。最好避免。要么在一个 SQL 语句中执行，要么将查询带回一个数组，然后遍历该数组。此外，最好避免使用 mysql_query。哟应该使用mysqli或PDO。

# facebook - 发布 OpenGraph 操作时出错“必须指定至少一个引用对象”

> ID：15437146
> 
> 赞同：1
> 
> 时间：2013-03-15T16:12:12.320
> 
> 标签：facebook, facebook-opengraph

通过打开图发布操作时出现以下错误。我有大约 10 个完美发布的动作。只有这个给了我错误：

```
code: 100
"At least one reference object must be specified" 
```

这是我的发布代码：

```
FB.api(
        '/me/'+fAction,
        'post',
        sObject,
    function(response) 
    {
           if (!response || response.error) 
           {
              for (var prop in response) 
              {
                console.log(response[prop]);
                callbackToFlash(0);
              }
           } else 
           {
              console.log('success'+object);
              callbackToFlash(1);
           }
        }
); 
```

我的应用程序中存在对象和操作对，我已经验证了这一点。在网上搜索后似乎是由于 facebook 错误引起的。哪个 facebook 已标记为已关闭。

关于如何处理它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-29T13:37:50.473

使用此代码

```
var obj = {"og:title": title, "og:image": imgurl,"og:description": des};

        FB.ui({
            method: 'share_open_graph',
            action_type: 'og.likes',
            action_properties: JSON.stringify({
                    object:obj

            })
        }, function (response) {
            // Debug response (optional)
            console.log(response);
        }); 
```

# perl - Command output and perl output different

> ID：15437148
> 
> 赞同：0
> 
> 时间：2013-03-15T16:12:19.277
> 
> 标签：perl, shell

I am having an issue with retrieving the correct information when attempting to run a shell command. When i run the command on the server i get the correct output, but i do not get the same when it is run through a perl script.

```
$test = `pkginfo | grep TestPackage | awk '{print $2}'`;
print "$test\n"; 
```

the output when running directly from the shell is:

```
TestPackage 
```

While the output from the perl script is:

```
application TestPackage       Description 
```

Why would this be different?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:16:32.530

The `$2` is being interpolated by perl so that `awk` is only seeing the string `print`. Try:

```
$test = qx( pkginfo | awk '/TestPackage/{print \$2}' );
print "$test"; 
```

You can also prevent the interpolation by using single quotes as the delimiter to `qx`:

```
$test = qx' pkginfo | awk \'/TestPackage/{print $2}\' '; 
```

Note that `$test` will have a trailing newline unless you `chop` it.

But, invoking `awk` from `perl` is not very perlish. Although using `awk` feels a lot cleaner, it may be better to do something like:

```
@test = map { m/^\S+\s+(\S+)/; $_ = $1 } grep { /TestPackage/ } qx( pkginfo ); 
```

# javascript - 尝试使用 Javascript 进行一些简单的计算以显示在网站上

> ID：15437152
> 
> 赞同：1
> 
> 时间：2013-03-15T16:12:27.760
> 
> 标签：javascript, forms, calculated-field

我希望有人可以帮助我 - 我肯定是一个 Javascript 新手。我主要专注于前端网站开发，但一位客户问我是否可以根据用户输入在线显示一些“成本”选项。我能够在第一遍中成功，但是一旦我不得不根据选择值进行计算，事情就会停止工作。

这是我的第一次通过，它适用于我的客户并且计算正确，因为只有一个单位：

```
<script type="text/javascript"> 
function calcform() { 
    with (document.form1)
        { result.value = +number1.value * .75+ +number3.value} /*Calculates Option 1 One Year     Costs.*/
        { result2.value = +number1.value * .75+ +number3.value + +number3.value} /*Calculates     Option 1 Two Years.*/
        { result3.value = +number1.value * .75}/*Calculates Option 1 Leasing Fees.*/
        { result4.value = +number1.value * .08}/*Calculates Option 2 Leasing Fees.*/
        { result5.value = +number1.value * .08 *12 +500}/*Calculates Option 2 One Year Costs.*/
        { result6.value = +number1.value * .08 *24 +500}/*Calculates Option 2 Two Years.*/
    } 
</script> 
<table>
    <form name="form1" action=""> 
        <tr>
            <h5>Prospective Owners Cost Calculator:</h5><br/>
            <h4>Enter Your Anticipated Monthly Rent Here:<br/>
                <input type="text" id="number1" value="" size="20" />
            </h4><br/> 
            <input type="button" id="Calculate" value="Calculate" onclick="calcform()" />
            <input type="reset" id="reset" value=" Clear "/>
        </tr><br/>
        <tr>
            <td>
                <h4>
                    <strong>Option 1</strong>
                </h4><br/>
                <h4>Leasing Fee (75% of one month's rent):<br /> 
                    <input type="text" id="result3" value="" size="40" />
                </h4><br/>
                <h4>Monthly Management Fee (Fixed $79 x 12 months):<br />
                    <input type="text" id="number3" value="948" size="40" />
                </h4><br/> 
                <h4>Total First Year:<br /> 
                    <input type="text" id="result" value="" size="40" />
                </h4><br/> 
                <h4>Total After 2 Years (assuming lease renewal):<br />
                    <input type="text" id="result2" value="" size="40" />
                </h4><br/>
            </td>
            <br/><br/>
            <td>
                <br><br>
            </td>
            <td>
                <h4>
                    <strong>Option 2</strong>
                </h4><br/>
                <h4>Leasing Fee ($500 fixed):<br />
                    <input type="text" id="number5" value="500" size="40" />
                </h4><br/>
                <h4>Monthly Management Fee (8% of Gross Rents):<br />
                    <input type="text" id="result4" value="" size="40" />
                </h4><br/>
                <h4>Total First Year:<br />
                    <input type="text" id="result5" value="" size="40" />
                </h4><br/>
                <h4>Total After 2 Years (assuming lease renewal):<br />
                    <input type="text" id="result6" value="" size="40" />
                </h4><br/>
            </td> 
        </form>
    </table> 
```

我正在尝试添加第二个表单，该表单将出现在不同的 HTML 页面上，该页面将使用选择下拉菜单驱动额外的计算，以便用户可以指示单位数，这将驱动不同的计算。告诉你——我是新手！非常感谢您的帮助！

```
<script type="text/javascript"> 
function calcform() 
{ 
with (document.form1) 

{ result1.value = +number1.value * .75}/*Calculates Option 1 Leasing Fees.*/
{ result2.value = +number3.value * +number2.value}/*Calculates Option 1 Mgmt Fees all     units.*/

} 
</script> 
<table><form name="form1" action=""> 
<tr><h5>Prospective Owners Cost Calculator:</h5><br/>

<h4>Enter Your Anticipated Monthly Rent Here (Total for all units):<br/>
<input type="text" id="number1" value="" size="20" /></h4><br/>

<h4>Enter the number of units (from 2-6)<br/>
<input type="number" name="number2" value="2" min="2" max="6"/></h4><br/> 

<input type="button" id="Calculate" value="Calculate" 
onclick="calcform()" /><input type="reset" id="reset" value=" Clear "/></tr>

<br/><tr><td><h4><strong>Option 1</strong></h4><br/>

<h4>Leasing Fee (75% of one month's rent):<br /> 
<input type="text" id="result1" value="" size="40" /></h4><br/> 

<h4>Monthly Management Fee per unit (Fixed[enter link description here][1] $69 x 12 months):<br /> 
<input type="text" id="number3" value="828" size="40" /></h4><br/> 

<h4>Monthly Management Fee all units:<br /> 
<input type="text" id="result2" value="" size="40" /></h4><br/>
</form> </table> 
```

你可以在 dev1.beastlyweb.com 看到这个。我还在那里上传了 Excel 电子表格，其中包含客户希望在线复制的计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:13:54.850

看起来计算失败了，因为您`name="number2"`输入了“输入单位数（从 2-6）”，而不是`id="number2"`. 您在计算中调用该字段`id`( `+number2.value`)。

# node.js - http://domain.local/socket.io/1/?t=1363363318728 永久移动

> ID：15437156
> 
> 赞同：0
> 
> 时间：2013-03-15T16:12:37.923
> 
> 标签：node.js, socket.io

我有一个 CodeIgniter 驱动的网站。我想实现一个基于 NodeJS+Socket.IO 的网络聊天。

我在主文件夹的其他本地域上进行了聊天，但是当我将其移至 CodeIgniter 时，它停止了工作。我想这是因为我更改了文件夹关系以适应 CodeIgniter 的结构。

我已经放置了`node_modules`根文件夹。是在
文件夹里面。 客户端javascript放置在文件夹中 我的视图文件在 此视图可在位置访问`server.js``node_modules`
`chat.js``public/js`
`application/views/chat.php`
`domain.local/conversation/room`

当我在控制台中打开页面时，我看到：

`http://domain.local/socket.io/1/?t=1363363318728 moved permanently`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:41:57.937

我发现出了什么问题。

连接脚本指向
`var socket = io.connect('http://domain.local/node:8080')`
并且应该指向根域
`var socket = io.connect('http://domain.local:8080')`

# c# - 加密方案的建议

> ID：15437160
> 
> 赞同：1
> 
> 时间：2013-03-15T16:12:40.603
> 
> 标签：c#, aes, rsa

我有一个客户正在向企业分发音乐。他拥有发行权，所有合法的东西都得到了照顾。我正在为他构建一个支持加密文件的媒体播放器。这样做是为了使企业无法将音乐转让给第三方。

我已经做了一些研究并实施了一个方案，其中大文件使用 AES 对称密钥加密，对称密钥使用 RSA 公钥加密，播放器使用 RSA 私钥解密 AES 密钥。我已经开始工作了。

我的问题是，通过这种设置，私钥在播放器端（在证书中），可以与播放器和文件一起复制到另一台机器上。我想在这个方案中再增加一层，让它变得更难。我是这些类型的安全实现的新手。有什么已知的方案吗？

顺便说一句：我正在为播放器使用 C#/WPF。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:28:20.437

加密音乐=la脚。

除此之外，当您谈论媒体时，总会有一个漏洞，因为人们总是可以挖掘模拟信号。如果您设法在那里放置一些难以破解的方案，我什至不会打扰它，只需将音频循环输入到输入，从那里录制并重新广播。有已知的方案，并且所有方案都有已知的裂缝。

但是，如果您真的坚持更“安全”的方法是为每个客户生成一个随机密钥。在客户端，您可以使用 DPAPI 来存储公共部分，这样就不能轻易地将其复制到其他机器上。

您可以使用对称或非对称加密来做到这一点，将私钥保存在服务器上。后者需要巨大的处理能力，可能不可行，前者仍然需要强大的服务器。

无论哪种方式 - 这都是浪费时间，但我知道可能存在要求您提供此类功能的法律语言

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:21:21.493

最终，这是一个没有真正技术解决方案的问题，这就是 DMCA 存在的原因。iTunes 尝试做类似的事情，除了从在线商店检索个人密钥，然后使用部分基于他们设计的某种机器标识符的密钥加密保存在本地 - DMCA 使逆向工程非法。由于并非每个人都始终遵守法律，因此他们一再改变计算密钥的方式。

# html - Bootstrap 非流体 IE7 布局

> ID：15437161
> 
> 赞同：2
> 
> 时间：2013-03-15T16:12:43.257
> 
> 标签：html, css, twitter-bootstrap, internet-explorer-7

我正在使用[Bootstrap 的非响应式网格](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)来布局数据输入表单。尽管表单在 Chrome 中看起来很完美，但 IE7 显示的表单带有额外的“填充”，这会占用可用的垂直空间。我的组织[仍然（！）使用 IE7](https://softwareengineering.stackexchange.com/questions/186863/justify-moving-beyond-ie7)，所以**我需要帮助纠正以下问题**：

1.  为什么输入与上面的标签不对齐？
2.  为什么行不跨越整个容器？

![IE7 用额外的填充来布局表单](../Images/34df0af76658af914417928bb0a9ccbe.png)

相关HTML：

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DS-11</title>
    <link href="http://10.20.17.226:7080/bootstrap.min.css" rel="stylesheet" type="text/css" media="all" />
    <link href="http://10.20.17.226:7080/main.css" rel="stylesheet" type="text/css" media="all" />
</head>
<body>
<form id="frm_referral_ds11" action="frm_referral_ds11.process" method="post">
    <div class="row coral-background border-side">
        <div class="span12">
            <label for="p_mailing_address"><strong>8\. Mailing Address:</strong> Line 1: (Street/RFD#, URB, or P.O. Box, Apt./Unit, In Care Of or Attn (<em>e.g. in Care of - Jane Doe, Apt # 100</em>))</label>
            <br />
            <input type="text" name="p_mailing_address" id="p_mailing_address" class="span12" maxlength="200" />
        </div>
    </div>
</form>
</body>
</html> 
```

主.css：

```
input.span12 {
    margin: 0;
    margin-left: 0;
}

label {
    display: inline-block;
}

.coral-background {
    background-color: #FFD595;
}

.border-side {
    border-left: 3px #000 solid;
    border-right: 3px #000 solid;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:00:01.377

这是您想要达到的[结果（jsfiddle.net）吗？](http://jsfiddle.net/andreymir/TbpxX/embedded/result/)

HTML：

```
<form id="frm_referral_ds11" action="frm_referral_ds11.process" method="post">
    <div class="row coral-background border-side span12">
        <label for="p_mailing_address"><strong>8\. Mailing Address:</strong> Line 1: (Street/RFD#, URB, or P.O. Box, Apt./Unit, In Care Of or Attn (<em>e.g. in Care of - Jane Doe, Apt # 100</em>))</label>
        <input type="text" name="p_mailing_address" id="p_mailing_address" class="span12" maxlength="200" />
    </div>
</form> 
```

CSS：

```
@import url('http://twitter.github.io/bootstrap/assets/css/bootstrap.css');
 .coral-background {
    background-color: #FFD595;
}
.border-side {
    border-left: 3px #000 solid;
    border-right: 3px #000 solid;
} 
```

# html - 我可以在同一个元素上使用多个伪选择器焦点和之前/之后吗？

> ID：15437163
> 
> 赞同：6
> 
> 时间：2013-03-15T16:12:45.880
> 
> 标签：html, css, pseudo-class

我正在尝试将伪选择器与伪元素结合使用来创建自定义工具提示。

我的 HTML：

```
<input id='test'/> 
```

我的 CSS：

```
#test {
    position: relative;
}

#test:focus {
    background-color: #08c;
}

#test:focus:before {
    position: absolute;
    left: 100%;
    width: 10px;
    height: 10px;
    background-color: black;
} 
```

运行代码的小提琴：http: [//jsfiddle.net/9ujEH/](http://jsfiddle.net/9ujEH/)

当前，由于#test:focus，输入将在聚焦时变为蓝色，但黑色方块并没有像我认为的#test:focus:before 那样出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:15:46.670

伪元素只能在容器元素上定义。由于它们在容器本身中呈现为 DOM 元素的方式。输入不能包含其他元素，因此它们不受支持。另一方面，按钮虽然是表单元素，但支持它们，因为它是其他子元素的容器。

[更多来自 2.1 规范](http://www.w3.org/TR/CSS2/generate.html#before-after-content)

和伪元素现在使用双冒号来避免与伪类（显然使用`::after`）混淆，尽管旧版本的 IE (7,8) 不会识别双冒号.. 请记住这一点，如果你试图支持他们。`::before``:`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T16:15:51.433

这不起作用`input`，因为`img`元素是无效/替换元素，并且没有“内容”可言，因此似乎没有地方可以在元素中插入伪元素。

`div`例如，使用 a ，您*可以*使用多个伪选择器，例如：

```
div:hover::before {
    /* CSS */
} 
```

[JS Fiddle 概念验证](http://jsfiddle.net/9ujEH/1/)。

参考：

*   [替换元素，来自 MDN](https://developer.mozilla.org/en-US/docs/CSS/Replaced_element)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-18T15:54:46.863

**[`:focus-within`](https://developer.mozilla.org/en-US/docs/Web/CSS/:focus-within)您可以通过使用CSS 伪类来实现您想要做的事情。**

**只需将您的元素包装`input`在一个`<div>`（或任何容器元素）中，如下所示：**

```
<style>
    #test {
        position: relative;
    }

    #test:focus {
        background-color: #08c;
    }

    #mydiv:focus-within::after {
        content: "Careful! This field is case-sensitive!";
    }
</style>

<div id='mydiv'>
    <input id='test' />
</div>
```

有关的：

*   [`:focus`](https://developer.mozilla.org/en-US/docs/Web/CSS/:focus)CSS 伪类
*   [`::after`](https://developer.mozilla.org/en-US/docs/Web/CSS/::after)CSS 伪元素

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T16:15:35.160

**:after** & **:before**不适用于**替换**元素 &`input`是**替换**元素。

检查这个[http://reference.sitepoint.com/css/replacedelements](http://reference.sitepoint.com/css/replacedelements)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-14T17:00:31.723

如果您不需要`placeholder`，这里有一个简单的跨浏览器选项。也适用于 IE。 [jsfiddle](http://jsfiddle.net/ktsx82d3/)

此外，您可以根据需要设置样式。

```
i[data-hint]::after      {
  /* position: absolute; */
  display: inline-block;
  content: attr(data-hint);
  vertical-align: middle;
  font-style: normal;
  width: 0;
  white-space: nowrap;
  overflow: hidden;
  opacity: 0;
  transition: 0.45s ease-out;
}

input:focus + i[data-hint]::after {
  width: auto;
  opacity: 1;
  margin-left: 10px;
}
```

```
<input /><i data-hint="Here my hint for input.."></i>
```

# .net - Google Drive SDK 线程安全

> ID：15437165
> 
> 赞同：0
> 
> 时间：2013-03-15T16:12:51.213
> 
> 标签：.net, thread-safety, google-drive-api

我想在多线程环境中使用 Google drive SDK。类线程`Files.Insert`中的函数是否安全？`DriveService`我在文档中找不到与此相关的任何内容。我什至找不到那里的单词**线程**。

有人知道 Google SDK 中的多线程是如何处理的吗？我需要`DriveService`为每个线程创建单独的对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:32:44.287

我一直在为我正在开发的使用它的 winforms 应用程序在 Google Drive SDK 上进行一些性能测试。我看到这篇文章并意识到我从未想过要检查这个问题，因为我一直认为 API 是线程安全的。所以我进行了一些测试。我一直在对文件重命名方法进行一些性能测试，如下所示：

```
 public static bool SetFileName(string gFileID, string filename, int attempt)
    {
        File sourcefile;
        File replacement = new File();
        bool save = false;
        replacement.Title = filename;
        replacement.Description = filename;
        try
        {
            FilesResource.PatchRequest request = DriveService.Files.Patch(replacement, gFileID);
            sourcefile = request.Fetch();
        }
        catch (Exception e)
        {
            if (attempt < 10)
            {
                return SetFileName(gFileID, filename, attempt + 1);
            }
            throw e;
        }
        bool result = sourcefile.Title == replacement.Title & sourcefile.Description == replacement.Description;
        if(!result && attempt<10)
            return SetFileName(gFileID, filename, attempt + 1);
        return result;
    } 
```

我正在运行顺序测试以获取此方法的错误率和执行时间。当我阅读您的帖子时，我决定在后台工作人员上运行测试，以了解该方法在多线程环境中的工作方式。在上面的示例中，DriveService 对象的实例化如下：

```
 private static DriveService DriveService
    {
        get
        {
            if (_service == null)
            {
                try
                {
                    _service = new DriveService(Auth);
                }
                catch (Exception)
                {
                }
            }
            return _service;
        }
    } 
```

如您所见，我的 DriveService 对象被实例化了一次，因此当多个后台工作人员同时运行时，他们都使用同一个 DriveService 实例。我用 1000 个并发线程运行了测试，虽然它确实产生了一些错误，但这些错误都是从谷歌驱动服务器返回的“（500）内部服务器错误”。似乎所有文件名都已正确设置，并且所有线程都在没有挂起的情况下完成。

但是，在单独的性能测试中，我试图确定每次需要时实例化 DriveService 是否存在重大性能问题。所以我修改了我的代码如下：

```
 private static DriveService DriveService
    {
        get
        {
            return new DriveService(Auth);
        }
    } 
```

我再次进行了一些性能测试，这次是想看看在单例 DriveService 实例和为每个线程创建新驱动器实例之间运行 100 个并发线程所需的时间是否存在显着差异。我没有看到任何显着的性能差异。尽管运行之间存在差异，但在我看来，这些差异与运行 PatchRequest 的服务器端处理时间有关，几乎与您是否在需要时创建 DriveService 的新实例无关。

我知道这不是确定的，但在我看来 Google Drive SDK 是线程安全的。但是，如果不是，则将其视为不是线程安全的似乎不会出现任何性能问题。

我希望这有帮助。

# django - 在所有视图中获取请求

> ID：15437166
> 
> 赞同：1
> 
> 时间：2013-03-15T16:12:52.840
> 
> 标签：django

如何确保模板中始终包含“**请求**”？例如，如果我想在模板中调用以下内容：

```
request.get_full_path 
```

我总是必须像这样将它包含在我的上下文中（在视图中）......

```
context = {'form': form,'request':request}
return render_to_response('contacts/group.html', context, context_instance=RequestContext(request)) 
```

必须有一种更优雅的方式同时为我的所有视图执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:26:25.843

我刚刚在这里回答了类似的问题：[django 模板中的 request.path](https://stackoverflow.com/questions/15436407/request-path-in-django-template/15436846#15436846)（由于尚未接受答案，因此无法将其标记为重复）。

基本上你需要在你的**settings.py**中定义 TEMPLATE_CONTEXT_PROCESSORS 变量：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    // DEFAULT
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.tz",
    "django.contrib.messages.context_processors.messages",
    // for request
    "django.core.context_processors.request"
) 
```

现在`request`将在所有模板中可用。

# sql-server - 自定义 sp_who 而不授予查看服务器状态

> ID：15437168
> 
> 赞同：3
> 
> 时间：2013-03-15T16:13:03.013
> 
> 标签：sql-server

我需要一个可以提供给一组用户的存储过程，该过程将允许他们查看所有正在运行的进程（例如`sp_who`），但我不希望这些用户拥有`VIEW SERVER STATE`权限，因为这会暴露太多元数据。

我还需要允许用户终止进程。

这是专用于该组的开发服务器，我的目标是在不暴露不必要的信息的情况下允许此功能。

有人有想法么？

到目前为止，我已经尝试创建一个`sp_who`以我身份调用 (DBA) 的存储过程，但结果仅显示调用者当前进程。

蒂亚！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T15:47:44.767

您需要创建一个带有 EXECUTE AS LOGIN SomeLogin 权限的存储过程，并授予用户访问该权限以满足此类需求的权限。与您应该包装到此类代码中的 kill 命令相同 + 首先进行一些安全检查

# node.js - 如何在express中的子目录上设置缓存标头

> ID：15437171
> 
> 赞同：4
> 
> 时间：2013-03-15T16:13:08.143
> 
> 标签：node.js, caching, express

将 express 与 node.js 一起使用时，您可以控制公共资源的缓存标头，如下所示：

```
app.use(express.static(path.join(__dirname, 'public'), { maxAge: 31557600000 })); 
```

这会将公用文件夹下的所有内容设置为静态可用，缓存超时为 1 年。但是，如果我想为公共下的其他文件设置不同的超时值怎么办？假设我在 public/images/icons 下有一些图像，我希望其值小于 1 年？我尝试像这样添加第二个静态调用：

```
app.use(express.static(path.join(__dirname, 'public'), { maxAge: 31557600000 }));
app.use(express.static(path.join(__dirname, 'public/images/icons'), { maxAge: 12345 })); 
```

但它没有用。它似乎只是忽略了第二个陈述。想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T18:02:06.807

Express 按顺序测试中间件，因此如果您首先放置最具体的 express.static 调用，那么它应该可以工作，即

```
app.use(express.static(path.join(__dirname, 'public/images/icons'), { maxAge: 12345 }));
app.use(express.static(path.join(__dirname, 'public/images'), { maxAge: 1234567 }));
app.use(express.static(path.join(__dirname, 'public/else'), { maxAge: 9874567 }));
app.use(express.static(path.join(__dirname, 'public'), { maxAge: 31557600000 })); 
```

等等

编辑：

这不会保持路径，所以我会这样做

```
function static(dirname, age) {
    return express.static(path.join(__dirname, dirname), { maxAge: age });
} 
```

然后打电话

```
app.use('/public/images/icons', static('public/images/icons', 12345));
app.use('/public/images/', static('public/images', 1234567); 
```

等等

这背后的原因是我以前的解决方案将所有静态文件安装在根目录，而这个解决方案将每个目录安装在具有正确 maxAge 的文件路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:19:18.323

静态中间件的[源代码](http://www.senchalabs.org/connect/static.html)显示，它从 url 的路径部分截取任何看起来像文件路径的东西，从配置的根目录中统计文件，并在它存在时提供它。

无法使用 vanilla 中间件更改 maxAge 选项。

我建议您制作自己的中间件（只是一个函数）并创建适当数量的静态中间件（在每个目录上）并将您的`req, res, next`参数转发给正确的中间件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-03T23:21:42.683

您需要将其中的每个文件夹安装`public`到其路径上，因为它将是服务器。也就是说，没有`public`.

```
app.use('/css', express.static(__dirname + '/public/css', {  maxAge: '1h'}));
app.use('/img', express.static(__dirname + '/public/img', {  maxAge: '1h'}));
app.use('/fonts', express.static(__dirname + '/public/fonts', {  maxAge: '1h'}));
app.use(express.static(path.join(__dirname, 'public'))); 
```

# php - 将活动状态添加到 wordpress 管理栏元素

> ID：15437172
> 
> 赞同：0
> 
> 时间：2013-03-15T16:13:08.583
> 
> 标签：php, wordpress

我为特定用户组创建了一个自定义 wordpress 管理栏。有谁知道将活动状态添加到 wordpress 管理栏元素的方法，以便如果用户在我链接到的特定页面上，我可以突出显示它？我一个都找不到。。

这是我如何创建自定义菜单的示例代码：

```
$wp_admin_bar->add_menu( array( 
        'id' => 'benutzerprofil_link',
        'title' => __( 'Ihr Benutzer Profil' ), 
        'href' => get_page_link(507) ) );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:28:35.057

如果您的主题正在使用该功能[**`body_class`**](http://codex.wordpress.org/Function_Reference/body_class)：

```
<body <?php body_class(); ?>> 
```

只需将以下规则添加到`style.css`主题文件中即可：

```
body.page-id-507 #wp-admin-bar-benutzerprofil_link { background: #c00; } 
```

另一种解决方案：

```
add_action( 'wp_head', 'style_so_15437172' );
function style_so_15437172() 
{
    if( is_page(507) )
    {
        echo '<style>#wp-admin-bar-benutzerprofil_link { background: #c00 !important;}</style>';
    }
} 
```

# android - 片段的 onCreateView() 导致我的应用程序崩溃

> ID：15437178
> 
> 赞同：1
> 
> 时间：2013-03-15T16:13:37.643
> 
> 标签：android, fragment

我有一个奇怪的问题。我在具有主机 FragmentActivity 的应用程序中使用 Fragments，在该应用程序中我实现了`class FragmentPagerAdapater`构造 Fragment 并将它们放入我的活动选项卡的内部。

在应用程序中，我需要将一个对象从我的 Activity 传递给 Fragments。我不太确定这样做的正确方法是什么，所以我即兴创作，并`newInstance(Object obj)`在我的片段中选择了一个静态片段。此方法只是调用默认 Fragment 的构造函数并设置一个实例变量以将 Object 保存在 Fragment 中。

现在在 Fragment 的`createView()`方法中，我使用实例的对象信息来填充布局。这在应用程序启动时工作正常，但是当我将屏幕方向从纵向更改为横向（或相反）时应用程序崩溃。日志表明在 中的实例对象上出现 NullPointerException `createView()`。我觉得我错过了生命周期中的某些东西，但我找不到答案。有什么特别的事情要做，所以我的 Fragments 无论如何都会保存它们的实例变量？

这是一个代码示例，可帮助您了解问题所在：

```
public class MyFragment extends Fragment {

private Object obj;

public static MyFragment newInstance(Object obj) {
    MyFragment fragment = new MyFragment();
    fragment.setObject(obj);
    return fragment;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View rootView = inflater.inflate(R.layout.layout_fragment, container, false);
    MyType res = ((Type) (obj)).getSomething(); // This line causes the crash because obj is null when I switch to another orientation

    // I Do something with res to fill rootView

    return rootView;
}

private void setObject(Object obj) {
    this.obj = obj;
}
}

// In the Activity I simply create the Fragment using
MyFragment fragment = MyFragment.newInstance(myObjectToPass); 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:49:42.283

当方向切换时（实际上是当 Android 决定重新创建 时`Fragment`），现有`Fragment`的被销毁然后重新创建。

但是，当 Android 重新创建您的 时`Fragment`，它不会调用您的自定义`newInstance()`方法。它使用空的无参数构造函数。

这意味着您`Fragment` *不会*对任何您想要的自定义进行非空引用`Object`，从而导致 NPE 被抛出。

你需要想办法通过`Object`. 如果`Object`是简单数据`Object`，请考虑通过`setArguments()`方法传递其字段或对其进行序列化。

```
MyFragment fragment = new MyFragment();
Bundle data = new Bundle();
data.putString ("key_string", "your string here");
fragment.setArguments (data); 
```

您还可以创建一个`interface`查询对象的活动。例如：

```
public class MyFragment extends Fragment {

  public interface ObjectProvider
  {
    public CustomObject getCustomObject();
  }

  private ObjectProvider provider;

  @Override
  public void onAttach (Activity activity)
  {
    super.onAttach(activity);
    try{
      provider = (ObjectProvider) activity;//get an instance of the ObjectProvider
    }
    catch (ClassCastException e)
    {
      e.printStackTrace();
      throw new RuntimeException ("This isn't an ObjectProvider.");
    }
  }

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View rootView = inflater.inflate(R.layout.layout_fragment, container, false);

    provider.getCustomObject().getSomething(); 

    return rootView;
  }
} 
```

那么你的Activity需要实现接口：

```
public class MainActivity implements MyFragment.ObjectProvider{

 @Override
 public CustomObject getCustomObject()
 {
   return new CustomObject();
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:58:15.010

您也可以只使用 setRetainInstance(true) ，如下所示：

```
public static MyFragment newInstance(Object obj) {
    MyFragment fragment = new MyFragment();
    fragment.setObject(obj);
    fragment.setRetainInstance(true);
    return fragment;
} 
```

这将使您的对象在方向更改时保持不变，只需确保该对象没有对活动上下文的引用，否则您将发生内存泄漏。

# batch-file - 在for循环中将两个数字相加

> ID：15437181
> 
> 赞同：0
> 
> 时间：2013-03-15T16:13:47.177
> 
> 标签：batch-file

好的，所以我正在创建一个简单的批处理文件，该文件旨在从文本文件中获取行，然后将输出通过管道传输到 wget 并下载它们（使用 Windows 端口）。我遇到的唯一问题是将数字添加到 for 循环中的数字。

```
SETLOCAL ENABLEDELAYEDEXPANSION
set sum=0
%ECHO% "Reading %1... "

for /f "eol=# tokens=* delims= " %%a in (%1) do ( 
    echo %%a | bin\wget -q %%a
    SET /a sum=%sum%+1
    echo Hit:%sum% %%a 
)

%ECHO% "Done!"
ENDLOCAL 
```

它被称为'call read_line.bat myfile.txt

是的，我知道我可以只使用 wget -i myfile.txt，但我宁愿不使用它并控制其他事情（输出和明显的 HIT：函数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:39:28.070

尝试使用`!`而不是`%`for`sum`以真正使用延迟扩展：

```
for /f "eol=# tokens=* delims= " %%a in (%1) do ( 
  echo %%a | bin\wget -q %%a
  SET /a sum=!sum!+1
  echo Hit:!sum! %%a 
) 
```

# jquery - 检查空输入 jquery - 循环遍历元素数组

> ID：15437183
> 
> 赞同：1
> 
> 时间：2013-03-15T16:14:00.387
> 
> 标签：jquery, string

我在需要填写的输入中添加了一个新属性：（`data-required`西班牙语）。

我的表格中有 3 或 4 个，我这样循环它们：

```
$('#impFormularios').submit( function() {
    $(":input[data-requerido]").each( function() {
      if( $(this).val == '' ) {
        alert('hola');
      }
    });
  }); 
```

但是我的警报没有显示。我认为这是因为我做错了什么，`val`因为控制台日志显示了每个 item.val 值（在 console.log 中）的 JQuery 代码。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:15:05.817

您必须使用[val()](http://api.jquery.com/val/)而不是`val`jQuery 对象。您也可以使用 value 属性，但要使用 DOM 对象。

改变

```
if( $(this).val == '' ) { 
```

至

```
if( $(this).val() == '' ) { 
```

或者

```
if( this.value == '' ) { 
```

# java - 解密 IllegalBlockSizeException

> ID：15437189
> 
> 赞同：-5
> 
> 时间：2013-03-15T16:14:22.673
> 
> 标签：java, encryption

以下代码基于密码学。在我的构造函数中，我初始化了这个：

```
try{
        //To generate the secret key
        KeyGenerator keyGen = KeyGenerator.getInstance("DES");
        sKey = keyGen.generateKey();
        //Initialize the cipher instance to use DES algorithm, ECB mode,
        //and PKCS#5 padding scheme.
        cipherObj = Cipher.getInstance("DES/ECB/PKCS5Padding");
    }
    catch(NoSuchAlgorithmException nsae){nsae.printStackTrace();

    }
    catch(NoSuchPaddingException nspe){nspe.printStackTrace();} 
```

我在一个名为 Encrypt 的按钮下有这段代码，它实际上在工作

```
try{
    //Initialize the cipher with secret key to encrypt the data.
    cipherObj.init(Cipher.ENCRYPT_MODE, sKey);
    //Read the data into byte array
    byte[] textToEncrypt = txtTobeEncrypted.getText().getBytes();
    //To encrypt the data
    byte[] encryptedData = cipherObj.doFinal(textToEncrypt);
    //Display the encrypted data
    String encryptedText = new String(encryptedData);
    txtEncryptOutput.setText(encryptedText);
}
catch(InvalidKeyException ivkey){ivkey.printStackTrace();}
catch(BadPaddingException bpe){bpe.printStackTrace();}
catch(IllegalBlockSizeException ilbs){ilbs.printStackTrace();} 
```

但是下面的 Decrypt 按钮下的代码不起作用

```
try{
    //Initialize the cipher with secret key to encrypt the data.
    cipherObj.init(Cipher.DECRYPT_MODE, sKey);
    //Read the data into byte array
    byte[] textToDecrypt = txtEncryptOutput.getText().getBytes();
    //To decrypt the data
    byte[] plainData = cipherObj.doFinal(textToDecrypt);
    //Display the encrypted data
    String thePlainText = new String(plainData);
    txtDecrypt.setText(thePlainText);
}
catch(InvalidKeyException ivkey){ivkey.printStackTrace();}
catch(BadPaddingException bpe){bpe.printStackTrace();}
catch(IllegalBlockSizeException ilbs){ilbs.printStackTrace();} 
```

我得到的异常如下：

```
javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher
at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:750)
at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:676)
at com.sun.crypto.provider.DESCipher.engineDoFinal(DESCipher.java:314)
at javax.crypto.Cipher.doFinal(Cipher.java:2086)
at cryptography.FileEncryption.cmdDecryptActionPerformed(FileEncryption.java:209) 
```

所以请谁能解释我为什么会收到这个异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:27:49.657

您无法将随机字节序列解码为`String`. 大多数字符编码不会将每个字节或字节序列映射到一个字符。这些将用 �（替换字符）替换信息。

相反，将密文转换为可打印的字符串，然后使用合适的编码（如 Base-64）再次返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:20:31.213

您可能会遇到此异常，因为 的长度`txtEncryptOutput.getText().getBytes()`不是 8 的倍数。

您可以通过在调试器下检查它来确认这一点，或者将长度输出到日志系统的终端。

# html - 响应式 2 列 CSS 布局，包括固定宽度的侧边栏？

> ID：15437201
> 
> 赞同：4
> 
> 时间：2013-03-15T16:14:51.377
> 
> 标签：html, css, layout, fluid-layout

在任何地方都找不到解决方案（我猜这一定是一个很常见的问题）。

我正在创建一个带有侧边栏的响应式设计，其中侧边栏需要具有 200 像素的固定宽度并且具有未知的高度。我怎样才能做到这一点，以便主要内容区域占据所有剩余的宽度，而没有任何行为不端。

我最接近它的是以下，但它的问题是侧边栏可以与页脚重叠。任何人都可以建议我的代码修复，或与我分享一些有效的代码吗？

```
 * {
            padding: 0;
            margin: 0;
            outline: 0;
            -moz-box-sizing: content-box;
            -webkit-box-sizing: content-box;
            box-sizing: content-box;
        }
        body {
            background: orange;
        }
        #container {
            max-width: 1000px;
            min-width: 768px;
            margin: 0 auto;
            background: yellow;
            position: relative;
            height: 100%;
        }
        #header {
            background: purple;
            color: white;
            text-align: center;
            padding: 10px;
        }
        #main {
            position: relative;
        }
        aside {
            background: blue;
            width: 200px;
            color: white;

            position: absolute;
            top: 0;

            /* change this to "right: 0;" if you want the aside on the right. Also, change the "margin-left" code, below. */
            left: 0;

            padding-top: 20px;
            padding-bottom: 20px;

            padding-left: 10px; /* If you change this value, remember to change the margin-left value of #primary */
            padding-right: 10px; /* ditto */
        }
        #primary {
            background: red;

            /* change this to margin-right if you want the aside on the right. Also change the "left" code, above. */
            margin-left: 220px; /* aside_width + aside_left_padding + aside_right_padding = 200px + 10px + 10px */
            padding: 1em; /* whatever */
        }
        #footer {
            background: green;
            color: white;
            padding: 10px;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
        }

        <div id="container">
        <div id="header">
            <h1>LAYOUT TEST #2</h1>
        </div>
        <div id="main">
            <div id="primary">
                <h2>THIS IS THE MAIN CONTENT ** THIS IS THE MAIN CONTENT ** THIS IS THE MAIN CONTENT</h2>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <h2>sub heading</h2>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <h2>sub heading</h2>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
            </div>
            <aside>
                <h3>navigation (left)</h3>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
                <p>lorem ipsum</p>
            </aside>
        </div>
        <div id="footer">
            <h1>LAYOUT TEST #2</h1>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T17:07:36.360

1 = 使用弹性框：http: [//jsfiddle.net/rudiedirkx/CjWbv/2/](http://jsfiddle.net/rudiedirkx/CjWbv/2/)

```
#main {
    display: flex;
}
#primary {
    background: #bbb;
    flex: 1;
}
aside {
    background: #ddd;
    flex: 0 0 200px;
} 
```

2 = 与`calc()`：http: [//jsfiddle.net/rudiedirkx/CjWbv/](http://jsfiddle.net/rudiedirkx/CjWbv/)

```
#main:after { clearfix here }
#primary {
    float: left;
    background: #bbb;
    width: calc(100% - 200px);
}
aside {
    background: #ddd;
    float: right;
    width: 200px;
} 
```

两者都需要对旧浏览器（和供应商前缀）进行后备。从其他答案中选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T16:36:06.013

我认为所有这些`position: absolute`方法都不是最好的方法。

1.  您想要一个带有`max-width`和的容器元素`margin: 0 auto`。不知道你为什么也想要一个`min-width`；你当然可以。

2.  您放置的任何块元素都会自动获取所有`width`父元素。**因此，页眉**和**页脚**没有问题，只需将它们放置在正确的位置，它们就会正确渲染。

3.  正如您所做的那样，为您的主要部分使用容器元素。由于元素是从左到右呈现的，您可能需要`aside`在`#primary`.

4.  应用`float: left`到`aside`您想要的固定宽度。

5.  主要内容`#primary`元素会自动占用剩余空间（或者只是 apply `width: auto`。**注意：***剩余空间*是父元素的剩余空间，所以，如果你在父元素上设置，`min-width`不要指望你`#primary`会更窄！

6.  现在你会遇到一个问题：容器元素`#main`不会得到正确的高度。[**那是因为`float`**](http://coding.smashingmagazine.com/2009/10/19/the-mystery-of-css-float-property/). 要强制父元素达到其浮动子元素的高度，请使用`overflow: hidden`.

你应该准备好了。这是[您的代码稍作修改的版本](http://jsbin.com/eninax/1)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-27T17:38:29.747

在我们得到 flexbox 之前，我相信做你正在寻找的最好的方法是简单地使用 css `display: table;`。您需要将容器设置为`display: table;`，然后将每个列设置为`display: table-cell;`。这将消除使用浮点数或任何其他 JS 魔法的需要。此外，这适用于 IE8。我知道使用任何带有“表格”一词的布局都感觉很粗略，但试一试。

[查看此链接了解更多信息。](http://www.onenaught.com/posts/201/use-css-displaytable-for-layout)

[这是您的代码的更新版本。](http://jsbin.com/kaqixedi/1)

**编辑：示例代码**

**html:**假设这个标记

```
<div id="main">
    <div id="sidebar"></div>
    <div id="content"></div>
</div> 
```

**CSS：**

```
#main {
    display: table;
    width: 100%;
}
#sidebar {
    display: table-cell;
    width: 200px;
}
#content {
    display: table-cell;
    /* no need to specify width. 
     * width will auto fill remaining width of parent `table` #main.
     * so 100% - 200px */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:22:03.150

```
#main { position: relative; overflow:hidden;} 
```

这会阻止侧边栏行为不端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T16:31:07.183

您可以通过添加或使用以下方法来`margin-bottom: FOOTER_HEIGHT`修复它：`aside`

```
<div id="container">
    <div id="header">
        YOUR_HEADER
    </div>
    <div id="body>
        <div id="sidebar">
            YOUR_SIDE_BAR_CONTENT
        </div>
        <div id="main">
            YOUR_CONTENT
        </div>
        <br />
    </div>
    <div id="footer">
        YOUR_FOOTER
    </div>
</div> 
```

和CSS：

```
#sidebar {
    width: ...;
    height: ...;
    float: right;
}
#main {
    margin-right: WIDTH_OF_SIDE_BAR;
}
#body > br {
    clear: both;
} 
```

# ios - 使用 RegEx 删除括号之间的文本

> ID：15437203
> 
> 赞同：2
> 
> 时间：2013-03-15T16:14:55.637
> 
> 标签：ios, objective-c, regex, string

我正在开发一个 iOS 应用程序，需要从字符串中删除括号之间的所有文本，包括括号。示例：“看这张图片 [960x640]”应该是“看这张图片”

如果只有一组括号，我的代码可以正常工作，但如果有多个，它只会删除第一组。

```
+ (NSString *)stringWithoutBrackets:(NSString *)input{
    NSString *expression = @"\\[[\\w]+\\]";
    while ([input rangeOfString:expression options:NSRegularExpressionSearch|NSCaseInsensitiveSearch].location!=NSNotFound){
        input = [input stringByReplacingOccurrencesOfString:expression withString:@"" options:NSRegularExpressionSearch|NSCaseInsensitiveSearch range:NSMakeRange(0, [input length])];
    }
    return input;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:31:25.480

尝试使用[NSRegularExpression](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)类。

```
NSError *error;
NSMutableString *string = [NSMutableString stringWithString:@"Look at this image [960x640] and [somethingelse]"];
NSRegularExpression *regularExpression = [NSRegularExpression regularExpressionWithPattern:@"\\\[[\\\w]+\\\]" options:0 error:&error];
[regularExpression replaceMatchesInString:string options:0 range:NSMakeRange(0, string.length) withTemplate:@""];

NSLog(@"String %@", string); 
```

打印：看看这张图片，然后

# sharepoint-2010 - 如果用户不是指定 SharePoint 组的成员，则使用 SPServices 禁用字段

> ID：15437204
> 
> 赞同：1
> 
> 时间：2013-03-15T16:14:55.767
> 
> 标签：sharepoint-2010, spservices

在 SharePoint 2010 Foundation 中工作时，我试图为不是特定组成员的用户禁用自定义 editform.aspx 上的字段。

因此，如果当前用户不是“更改控制 - 管理员”组的成员，请禁用 CCID 字段。

我在 SPServices codeplex 讨论区找到了似乎是解决方案的方法，但它没有按预期工作。不知道我在这里缺少什么。

它确实禁用了正确的字段，但当前用户是否在指定的组中并不重要。

如果我改变这个：

if($(xData.responseXML).find("Group[Name='Change Control - Admins']").length != 1)

对此：

if($(xData.responseXML).find("Group[Name='Change Control - Admins']").length == 1)

...然后该字段不会被禁用。但是，当前用户是否在指定组中也无关紧要。

任何帮助将非常感激。

这是我的代码：

```
<script language="javascript" type="text/javascript" src="/CodeLibrary/jquery-1.7.2.min.js"></script>
<script language="javascript" type="text/javascript" src="/CodeLibrary/jquery.SPServices-0.7.2.min.ssl.js"></script>
<script language="javascript" type="text/javascript">
$(document).ready(function() {
var groupName;

 $().SPServices({  
      operation: "GetGroupCollectionFromUser",  
      userLoginName: $().SPServices.SPGetCurrentUser(),  
      async: false,  
      completefunc: function(xData, Status) { 
        //if current user is not a member of this group...  
        if($(xData.responseXML).find("Group[Name='Change Control - Admins']").length != 1)  
        {  
              //...disable the following fields
              $("input[Title='CCID']").prop("disabled", "disabled");
              }  
      }  
    });  
});

function PreSaveAction() {
    $("input[Title='CCID']").removeProp("disabled");
    return true;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T00:59:25.237

我正在做一些非常相似的事情。就我而言，我正在检查以“GCP”开头的组的组成员身份，并从匹配的组中提取一些文本。真正有用的是使用`console.log()`. Firefox 控制台允许您深入了解您登录到控制台的对象 - IE 未提供的内容（此日志记录代码不应包含在发布代码中，特别是因为它可能在 IE 中失败）。该控制台可从Firefox的*Web Developer菜单中获得。*

```
 $(document).ready(function() {
   $().SPServices({
     operation: "GetGroupCollectionFromUser",
     userLoginName: $().SPServices.SPGetCurrentUser(),
     async: false,
     completefunc: function(xData, Status) {
        console.log(xData.responseXML);
        var $groups = $(xData.responseXML).find("Group[Name^='GCP']");
        console.log("$groups.length:" + $groups.length);
        if ($groups.length) console.log($groups.get(0).outerHTML);
        var re = /GCP ((?:[^ ]*)(?:(?! Managers) [^ *]*)*) Managers/i;
        var org = "";
        $groups.each(function(index, elt){
            var name = $(this).attr("Name");
            var matches = re.exec(name);
            if (matches){
                org = matches[1];
                return false;
            }
        });
        setOrg(org);
     }
   });
}); 
```

# sql-server - 子查询没有返回正确的结果 T-SQL

> ID：15437205
> 
> 赞同：0
> 
> 时间：2013-03-15T16:14:56.253
> 
> 标签：sql-server, tsql

我有一个不返回我正在寻找的结果的子查询。在最后一个子查询中，我有 3 个部分在我的条件下没有日期范围的订单计数，并且它们没有返回结果为 0。相反，我丢失了这些部分的所有其他数据。我确信有更好的方法来查询数据，所以这是我的查询。

```
 SELECT b.Part, b.Last_12_Mo, b.Last_6_Mo,
       COUNT(sd.SBINV) AS Order_Count
  FROM (
        SELECT a.Part, a.Last_12_Mo,
               ISNULL(SUM(sd.SBQSHP), 0) AS Last_6_Mo
          FROM (
                SELECT t3.Part, ISNULL(SUM(sd.SBQSHP),0) AS Last_12_Mo
                  FROM Top300 AS t3
                  LEFT JOIN SalesData AS sd 
                    ON t3.Part   = sd.SBITEM
                   AND sd.SBINDT > '20120315'
                 GROUP BY t3.Part, sd.SBLOC
                ) AS a 
          LEFT JOIN SalesData AS sd
            ON a.Part       = sd.SBITEM
           AND sd.SBINDT    > '20121015'
         GROUP BY a.Part, a.Last_12_Mo
        ) AS b 
  LEFT JOIN SalesData AS sd
    ON b.Part       = sd.SBITEM
   AND sd.SBINDT    > '20130110'
 GROUP BY b.Part, b.Last_12_Mo, b.Last_6_Mo
 ORDER BY b.Part 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:13:42.443

干得好。这应该这样做。

*   由于您始终希望 Top300 中的所有项目无论其销售数据如何，您始终必须将每个子查询的结果保留在 LEFT JOIN 的 LEFT 侧。
*   您可以将 NULL SUM 聚合解析为零
*   日期过滤器需要在 JOIN 中，因为您不想限制未加入的 Top300 项。如果将它们放在 WHERE 子句中，那么它将排除不与销售数据连接的 Top300 项目，因为这些记录的日期将为 NULL。

首先设置测试表和数据

```
 IF OBJECT_ID('Top300', 'U') IS NOT NULL DROP TABLE Top300;
    GO
    IF OBJECT_ID('SalesData', 'U') IS NOT NULL DROP TABLE SalesData;
    GO
    CREATE TABLE Top300 (
        Part  varchar(10)
    )
    GO
    CREATE TABLE SalesData (
        SBITEM  varchar(10)
       ,SBQSHP  int
       ,SBINV   int
       ,SBINDT  int
    )
    GO

    INSERT Top300
    SELECT A.*
      FROM (
            SELECT * FROM Top300 WHERE 1=2
            UNION ALL SELECT 'Widget1'
            UNION ALL SELECT 'Widget2'
            UNION ALL SELECT 'Widget3'
            UNION ALL SELECT 'Widget4'
            UNION ALL SELECT 'Widget5'
            UNION ALL SELECT 'Widget6'
           ) A

    INSERT SalesData
    SELECT A.*
      FROM (
            SELECT * FROM SalesData WHERE 1=2
            UNION ALL SELECT 'Widget1', 100, 1000, '20120316'
            UNION ALL SELECT 'Widget2', 100, 1000, '20120316'

            UNION ALL SELECT 'Widget3', 100, 1000, '20121016'
            UNION ALL SELECT 'Widget4', 100, 1000, '20121016'
            UNION ALL SELECT 'Widget5', 100, 1000, '20121016'
           ) A 
```

现在让我们运行原始查询的更正版本

```
 SELECT b.Part, b.Last_12_Mo, b.Last_6_Mo,
           COUNT(sd.SBINV) AS Order_Count
      FROM (
            SELECT a.Part, a.Last_12_Mo,
                   ISNULL(SUM(sd.SBQSHP), 0) AS Last_6_Mo
              FROM (
                    SELECT t3.Part, ISNULL(SUM(sd.SBQSHP),0) AS Last_12_Mo
                      FROM Top300 AS t3
                      LEFT JOIN SalesData AS sd 
                        ON t3.Part   = sd.SBITEM
                       AND sd.SBINDT > '20120315'
                     GROUP BY t3.Part
                    ) AS a 
              LEFT JOIN SalesData AS sd
                ON a.Part       = sd.SBITEM
               AND sd.SBINDT    > '20121015'
             GROUP BY a.Part, a.Last_12_Mo
            ) AS b 
      LEFT JOIN SalesData AS sd
        ON b.Part       = sd.SBITEM
       AND sd.SBINDT    > '20130110'
     GROUP BY b.Part, b.Last_12_Mo, b.Last_6_Mo
     ORDER BY b.Part 
```

最后，让我们运行一个更简单、更优化的查询，生成相同的结果

```
 SELECT b.Part
          ,SUM(CASE WHEN sd.SBINDT > '20120315' THEN sd.SBQSHP ELSE 0 END) as [Last_12_Mo]
          ,SUM(CASE WHEN sd.SBINDT > '20121015' THEN sd.SBQSHP ELSE 0 END) as [Last_6_Mo]
          ,SUM(CASE WHEN sd.SBINDT > '20130110' THEN 1 ELSE 0 END) as [Order_Count]
      FROM Top300 b
      LEFT JOIN SalesData AS sd
        ON b.Part       = sd.SBITEM
       AND sd.SBINDT    > '20120315'
     GROUP BY b.Part
     ORDER BY b.Part 
```

# c# - 当 DataContext 停留在同一个对象上时，MVVMLight 工具包 RaisePropertyChanged 似乎没有更新 UI

> ID：15437206
> 
> 赞同：0
> 
> 时间：2013-03-15T16:14:56.317
> 
> 标签：c#, wpf, xaml, mvvm, mvvm-light

我很难理解我做错了什么。基本上我正在尝试在表单上实现“取消”功能。

我有一个模型，它实现了工具包的 ObservableObject 并映射到一个 EF 实体类。当我调用我的 CancelChanges() 方法时，它基本上使用 StoreWins 执行 context.Refresh()。

现在我有一个具有以下属性的 ViewModel：

```
 /// <summary>
    /// The <see cref="CurrentDairyProduct" /> property's name.
    /// </summary>
    public const string CurrentDairyProductPropertyName = "CurrentDairyProduct";

    private DairyProduct _currentDairyProduct = null;

    /// <summary>
    /// Sets and gets the CurrentDairyProduct property.
    /// Changes to that property's value raise the PropertyChanged event. 
    /// </summary>
    public DairyProduct CurrentDairyProduct
    {
        get
        {
            return _currentDairyProduct;
        }

        set
        {
            RaisePropertyChanging(CurrentDairyProductPropertyName);
            _currentDairyProduct = value;
            RaisePropertyChanged(CurrentDairyProductPropertyName);
        }
    } 
```

和这种形式的视图

```
<Grid HorizontalAlignment="Left" Margin="27,14,0,0" Name="grid1" VerticalAlignment="Top"  DataContext="{Binding Path=CurrentDairyProduct, Mode=OneWay, NotifyOnSourceUpdated=True}">

        <Grid.Resources>
            <Style TargetType="{x:Type TextBox}">
                <Style.Triggers>
                    <Trigger Property="Validation.HasError" Value="true">
                        <Setter Property="ToolTip" 
Value="{Binding RelativeSource={RelativeSource Self},
  Path=(Validation.Errors)[0].ErrorContent}"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
        <Label Content="DAIRY PRODUCT CODE:" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
        <TextBox Grid.Column="1" Grid.Row="0" Height="23" HorizontalAlignment="Left" Margin="3" Text="{Binding Path=DairyProductCode, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" VerticalAlignment="Center" Width="120" />
        <Label Content="DAIRY PRODUCT NAME EN:" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
        <TextBox Grid.Column="1" Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="3" Text="{Binding Path=DairyProductNameEn, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" VerticalAlignment="Center" Width="120" />
        <Label Content="DAIRY PRODUCT NAME FR:" Grid.Column="0" Grid.Row="2" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
        <TextBox Grid.Column="1" Grid.Row="2" Height="23" HorizontalAlignment="Left" Margin="3" Text="{Binding Path=DairyProductNameFr, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" VerticalAlignment="Center" Width="120" />

    </Grid>
    <Button Content="Save" Height="29" HorizontalAlignment="Left" Margin="342,332,0,0" Name="button1" 
              VerticalAlignment="Top" Width="87" Command="{Binding Path=SaveCommand}" />
    <Button Content="Cancel" Height="29" HorizontalAlignment="Left" Margin="442,332,0,0" Name="button2" 
              VerticalAlignment="Top" Width="87" Command="{Binding Path=CancelCommand}" /> 
```

当我调用以下语句从数据库中获取数据时，一切正常

```
CurrentDairyProduct = _dairyProductRepository.GetObservableObjectById(_currentDairyProductId); 
```

视图会使用我的模型中的所有数据进行更新。

我可以对视图进行更改，然后毫无问题地转移到我的模型中

现在取消命令

```
protected override void CancelChanges()
{
    CurrentDairyProduct = _dairyProductRepository.CancelChanges(_currentDairyProduct);

} 
```

这在理论上应该调用 CurrentDairyProduct 的设置器，而后者又调用 RaisePropertyChanged。这有效，因为我可以调试它。不幸的是，视图根本没有更新。

出于好奇，我将 CancelCommand 代码更改为以下内容：

```
protected override void CancelChanges()
{
    //CurrentDairyProduct = _dairyProductRepository.CancelChanges(_currentDairyProduct);
    DairyProduct temp = _dairyProductRepository.CancelChanges(_currentDairyProduct);
    CurrentDairyProduct = null;
    CurrentDairyProduct = temp;
 } 
```

使用此代码，视图确实会更新...

我的问题是，如果实际的 DataContext 保持在同一个对象上但它的属性发生变化，我应该怎么做才能更新视图。有没有办法在不使用这个临时变量的情况下强制更新？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:30:22.947

您似乎正在尝试使用自己的支持字段更新 CurrentDairyProduct 。我猜您将 _currentDairyProduct 传递给您的存储库方法并直接操作它，然后返回它。通过这样做，您不会触发 INPC，因此不会发生视图更新。当您尝试将其分配回 CurrentDairyProduct 时，该值现在是相同的，因此 INPC 也不会触发。当您将其设置为 null 并重新分配 CurrentDairyProduct 时，会检测到更改并因此触发 INPC。

解决此问题的一种方法是在存储库的 CancelChanges 方法中创建一个新实例 DairyProduct 并返回它，而不是操作 _currentDairyProduct。CurrentDairyProduct 然后将检测到一个新值并触发 INPC。

更好的选择可能是传递 CurrentDairyProduct 而不是 _currentDairyProduct。CurrentDairyProduct 的更改将触发 INPC。

我相信，如果您将变量设为私有，则不会在其范围之外进行操作。我的意思是这就是为什么你有一个公共版本对吧？

# php - PDO 和 MySQL 类型切换

> ID：15437212
> 
> 赞同：0
> 
> 时间：2013-03-15T16:15:14.247
> 
> 标签：php, mysql, pdo

我在表 1 中有一个字段“年”，它被定义为 VARCHAR(255)，我需要用“年”的值更新表 2 中的“num_years”。'num_years' 被定义为一个 INT。

当我尝试用 'year' 更新 'num_years' 时，如果 'year' 被定义为 3 它可以正常工作，但是如果我将 'year' 定义为 'foo' 它将用 0 更新 'num_years'。

当我过去使用`mysql_query`函数时，它会生成关于无效列“foo”或类似列的错误，但使用 PDO，它不会在我期望的时候抛出异常。

通过这种方式，如果“years”是数字，我们希望确保“num_years”不更新为 0。如果是这种情况，PDO 是否有任何内置的东西会引发异常？

我正在使用 PDO 事务和准备好的语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:18:23.617

在将其放入 sql 语句之前验证它是否为字符串，如果 table1 中的年份包含类似“1 年”的内容，则可以爆炸或以其他方式剥离字符和空格并仅返回 1 以插入表 2 中的 int 列。

同样这样做，您可以仅在输入字段中特殊处理文本等事件，并将其设置为 0 或 -1 或 int 字段中的其他内容，您可以稍后捕获并在显示上验证以显示“未指定”或其他内容等价的。

希望这是有道理的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:24:06.777

除了将字符串变量插入 PDO 之外，您还可以插入类似`$delta = $year + 0`. 如果它是“foo”，你得到`$delta = 0`并将其添加到`num_years`不会改变它们。

另一种方式当然是类型转换，所以使用`(int)$year`.

这应该在 PHP 中完成，而不是 PDO。

# r - 从 MFCC 训练 GMM 的图书馆

> ID：15437214
> 
> 赞同：4
> 
> 时间：2013-03-15T16:15:15.890
> 
> 标签：r, audio, speech-recognition, gaussian, mfcc

我正在尝试使用 MFCC、它们的 delta 和 delta-delta 从语音中构建一个基本的情绪检测器。许多论文谈到通过在这些特征上训练 GMM 来获得良好的准确性。

我似乎找不到一个现成的包来做同样的事情。我确实玩过 Python 中的 scilearn、Matlab 中的 Voicebox 和类似工具包以及 Rmixmod、stochmod、mclust、mixtools 和 R 中的其他一些包。从训练数据计算 GMM 的最佳库是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-05T18:43:23.147

具有挑战性的问题是训练数据，其中包含嵌入特征集中的情感信息。在测试信号中应该使用封装情绪的相同特征。使用 GMM 进行测试只会作为您的通用背景模型好。根据我通常使用 GMM 的经验，您只能区分男性女性和一些独特的演讲者。简单地将 MFCC 输入 GMM 是不够的，因为 GMM 不保存时变信息。因为除了频率变化 MFCC 参数之外，情感语音还包含时变参数，例如音调和音调随时间段的变化。我并不是说以目前的技术状态不可能，而是以一种好的方式挑战。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T12:38:16.900

如果你想使用 Python，这里是著名的语音识别工具包 Sphinx 中的代码。

[http://sourceforge.net/p/cmusphinx/code/HEAD/tree/trunk/sphinxtrain/python/cmusphinx/gmm.py](http://sourceforge.net/p/cmusphinx/code/HEAD/tree/trunk/sphinxtrain/python/cmusphinx/gmm.py)

# javascript - loadComplete 和 gridComplete 事件有什么区别？

> ID：15437218
> 
> 赞同：16
> 
> 时间：2013-03-15T16:15:27.507
> 
> 标签：javascript, datagrid, jqgrid

这个问题起源于我在其中查看了[Oleg](https://stackoverflow.com/users/315935/oleg)和 demo-grids 的[这个](https://stackoverflow.com/a/4943722/1818608)答案。

`gridComplete`：

> 在所有数据加载到网格中并且所有其他过程都完成后触发。此外，事件的触发独立于数据类型参数和分页排序等之后。

`loadComplete`：

> 此事件在每次服务器请求后立即执行。数据来自响应的数据取决于数据类型网格参数

从该文档中，我了解到`gridComplete`在绘制网格结束时`loadComplete`触发，并在 jqGrid 完成与后端的通信后触发。

所以我想知道 - 为什么在演示中，`loadComplete`用于改变单元格的颜色而不是`gridComplete`？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-15T18:05:03.693

我认为这个问题是由 jqGrid 的许多用户提出的。所以知道答案很有趣。

我个人更喜欢使用`loadComplete`. 如果您检查我发布的所有示例中的代码，您只会发现`gridComplete`原始海报在问题中发布它并且我会修改一些代码。`loadComplete`我`loadComplete`更喜欢使用`gridComplete`.

以下是以下优点`loadComplete`：

*   *如果整个网格体*将被重新加载，这是最后一个回调。例如，在从服务器加载网格上的页面之后。重要的是要理解，如果用户更改某些列的排序或设置过滤器或选择网格的另一页；网格体将被重新加载。
*   `loadComplete`具有`data`表示本地数据的完整页面或从服务器加载的完整数据的参数。

另一方面`gridComplete`将从内部`updatepager`（参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L1736)）调用（在当前版本的 jqGrid 4.4.4 中），**它将从`delRowData`（参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L2861)）、`addRowData`（参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L3057)）和`clearGridData`（参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L3468)）方法调用；除了**（`addXmlData`见[这里](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L1289)）和`addJSONData`（见[这里](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L1471)）。这不是人们最想要的。

另一个缺点是`gridComplete`可以查看是否从调用的位置检查*（*`addXmlData`参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L1289)）和`addJSONData`（参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.base.js#L1471)）的代码，因此将被调用。如果使用和内部参数，将填充从服务器返回的完整数据。使用时一目了然；**从服务器加载第一页数据后，将调用**回调。此时，只包含页面的数据。另一端**将在服务器返回的所有数据都经过处理并在本地保存**后调用。 *`updatepager``gridComplete``loadonce: true``data``_index``loadonce: true`**`gridComplete`**`data``_index`**`loadComplete`**`data``_index`*

 *如果您从服务器加载数据并且不使用选项`loadonce: true`，`clearGridData`那么您可以使用而不是.`addRowData``delRowData``gridComplete``loadComplete`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T16:48:15.903

查看 jqGrid 的源代码[（source）](https://github.com/tonytomov/jqGrid/blob/master/js/grid.base.js)，您可以看到 gridComplete 仅在 grid.base 的一行上被调用。

`1725: if($.isFunction(ts.p.gridComplete)) {ts.p.gridComplete.call(ts);}`

这条线来自函数`updatePager`。

您可以`loadComplete`在`populate`函数中找到（第 1757 行）。与 不同`gridComplete`的是，它传递了一个额外的参数。两个回调都接收对 的引用`this`，但`loadComplete`也接收从服务器返回的数据（或在本地传入）：

```
1858: case "xmlstring": 
if(lcf) {ts.p.loadComplete.call(ts,dstr);}

1869: case "jsonstring": 
if(lcf) {ts.p.loadComplete.call(ts,dstr);}

1881: 
case "local":
case "clientside":
if(lc) { lc.call(ts,req); } 
```

问题是，函数`populate`和`updatePager`经常串联发生，所以你看到在排序和分页时，两个回调都被调用了。再次，不同之处在于`loadComplete`传递了一个额外的参数。

可能有一些我还没有遇到过的细微差别......并且可能存在一个被调用而另一个没有被调用的情况，但我注意到在排序和分页时，两者都被调用。*

# installshield - 使用 ProductVersion 安装 Shield msiexec INSTALLDIR

> ID：15437221
> 
> 赞同：0
> 
> 时间：2013-03-15T16:15:36.477
> 
> 标签：installshield, windows-installer

我是否可以使用 MsiExec 并将安装目录与 ProductVersion 属性设置为路径的一部分？

msiexec /i C:\myapp.msi INSTALLDIR=C:\MyApp\[ProductVersion]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T05:50:36.513

您不能像这样在命令行上使用属性。如果在目录表中使用 [ProductVersion] 或将 INSTALLDIR 构建为 MSI 的一部分，则可以正常工作。但是，MSI 属性对命令解释器没有任何意义。

您可以在命令行上设置属性，例如

```
msiexec /i PROPERTY=VALUE A:\Example.msi 
```

（来自： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa367988](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367988(v=vs.85).aspx) (v=vs.85).aspx ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:19:08.123

您需要一个脚本来查询 MSI 的属性表以获取 ProductVersion，然后使用它来构建您的命令行。

如果这是您的安装并且这是您想要的行为，那么您最好编写一个自定义操作来自动改变 INSTALLDIR。如果这不是您的安装，而这正是您喜欢安装产品的方式，那么 ServerFault 是一个更好的地方来询问这个问题。

# api - 通过 API 获取 Shopify 计划名称和限制

> ID：15437222
> 
> 赞同：1
> 
> 时间：2013-03-15T16:15:36.660
> 
> 标签：api, e-commerce, shopify

有没有办法通过 API 找出当前可用的计划及其相应的限制？当前的 API 有一个`GET /admin/shop.json`返回`plan_name`字段的点，但没有枚举这些计划是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T04:37:26.167

无法通过 API。您真正能做的最好的事情是使用来自[http://www.shopify.com/pricing](http://www.shopify.com/pricing)的数据构建一个静态列表，因为它不会经常更改。

# android - ClassNotFoundException 解组时真的不知道为什么

> ID：15437226
> 
> 赞同：26
> 
> 时间：2013-03-15T16:15:42.757
> 
> 标签：android, unmarshalling, parcelable

**固定：底部的答案**

我正在为一个项目编写一个 android 应用程序，并且我正在尝试使用 parcelable 对象。我有2个parcalable类。第一个是只有 2 个参数的普通类。第二个是具有附加属性的类和具有第一个类的类型和它的附加对象的列表。

每次我尝试将第二类的对象传递给另一个 Activity 时，我都会在解组时得到 android.os.BadParcelableException: ClassNotFoundException

应用程序关闭。

我现在搜索了几个小时并尝试了多种解决方案，但没有任何帮助。当我只将第一类的对象传递给另一个活动时，错误不会出现..

这是我的代码：

```
package de.softwareproject.v3.testclasses;

import android.os.Parcel;
import android.os.Parcelable;

public class Cart implements Parcelable {

private String name;
private Integer priceInCents;

public Cart() {}

public Cart(Parcel in){
    readFromParcel(in);
}

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public Integer getPriceInCents() {
    return priceInCents;
}
public void setPriceInCents(Integer priceInCents) {
    this.priceInCents = priceInCents;
}

public static final Parcelable.Creator<Cart> CREATOR = new Parcelable.Creator<Cart>() {

            @Override
            public Cart createFromParcel(Parcel source) {
                return new Cart(source);
            }

            @Override
            public Cart[] newArray(int size) {
                return new Cart[size];
            }
};

@Override
public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
}
@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(name);
    dest.writeInt(priceInCents);
}

private void readFromParcel(Parcel in) {
    name = in.readString();
    priceInCents = in.readInt();
}
} 
```

我的第二课：

```
package de.softwareproject.v3.testclasses;

import java.util.ArrayList;
import java.util.List;
import android.os.Parcel;
import android.os.Parcelable;

public class CurrentUser implements Parcelable {

private String username;
private String eMail;
private String password;
private List<Cart> carts;
private Cart activeCart;

public CurrentUser() {}

public CurrentUser(Parcel in) {
    readFromParcel(in);
}

private void readFromParcel(Parcel in) {
    username = in.readString();
    eMail = in.readString();
    password = in.readString();
    activeCart = in.readParcelable(de.softwareproject.v3.testclasses.Cart.class.getClassLoader());
    if (carts == null){ carts = new ArrayList<Cart>(); }
    in.readTypedList(carts, Cart.CREATOR);
}

public String getUsername() {
    return username;
}
public void setUsername(String username) {
    this.username = username;
}
public String geteMail() {
    return eMail;
}
public void seteMail(String eMail) {
    this.eMail = eMail;
}
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
}
public List<Cart> getCarts() {
    return carts;
}
public void setCarts(List<Cart> carts) {
    this.carts = carts;
}
public Cart getActiveCart() {
    return activeCart;
}
public void setActiveCart(Cart activeCart) {
    this.activeCart = activeCart;
}

@Override
public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
}
@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(username);
    dest.writeString(eMail);
    dest.writeString(password);
    dest.writeTypedList(carts);
    dest.writeParcelable(activeCart, flags);
}

public static final Parcelable.Creator<CurrentUser> CREATOR = new Parcelable.Creator<CurrentUser>() {

    @Override
    public CurrentUser createFromParcel(Parcel in) {
        return new CurrentUser(in);
    }

    @Override
    public CurrentUser[] newArray(int size) {
        return new CurrentUser[size];
    }
};
} 
```

请帮我。

编辑：这里是我的 Logcat

```
 03-15 16:24:08.139: E/Parcel(689): Class not found when unmarshalling: ??, e: java.lang.ClassNotFoundException: ??
    03-15 16:24:08.149: D/AndroidRuntime(689): Shutting down VM
    03-15 16:24:08.149: W/dalvikvm(689): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
    03-15 16:24:08.229: E/AndroidRuntime(689): FATAL EXCEPTION: main
    03-15 16:24:08.229: E/AndroidRuntime(689): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.softwareproject.v3/de.softwareproject.v3.Startpage}: android.os.BadParcelableException: ClassNotFoundException when unmarshalling: ??
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.os.Handler.dispatchMessage(Handler.java:99)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.os.Looper.loop(Looper.java:137)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.app.ActivityThread.main(ActivityThread.java:4340)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at java.lang.reflect.Method.invokeNative(Native Method)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at java.lang.reflect.Method.invoke(Method.java:511)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at dalvik.system.NativeStart.main(Native Method)
    03-15 16:24:08.229: E/AndroidRuntime(689): Caused by: android.os.BadParcelableException: ClassNotFoundException when unmarshalling: ??
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.os.Parcel.readParcelable(Parcel.java:1966)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at de.softwareproject.v3.testclasses.CurrentUser.readFromParcel(CurrentUser.java:26)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at de.softwareproject.v3.testclasses.CurrentUser.<init>(CurrentUser.java:19)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at de.softwareproject.v3.testclasses.CurrentUser$1.createFromParcel(CurrentUser.java:80)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at de.softwareproject.v3.testclasses.CurrentUser$1.createFromParcel(CurrentUser.java:1)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.os.Parcel.readParcelable(Parcel.java:1992)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.os.Parcel.readValue(Parcel.java:1854)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.os.Parcel.readMapInternal(Parcel.java:2094)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.os.Bundle.unparcel(Bundle.java:223)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.os.Bundle.getParcelable(Bundle.java:1158)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at de.softwareproject.v3.Startpage.onCreate(Startpage.java:34)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.app.Activity.performCreate(Activity.java:4465)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    03-15 16:24:08.229: E/AndroidRuntime(689):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
    03-15 16:24:08.229: E/AndroidRuntime(689):  ... 11 more
    03-15 16:24:10.289: I/Process(689): Sending signal. PID: 689 SIG: 9 
```

**FIX** 我终于找到了错误，我简直不敢相信！！！

搜索了将近 1 1/2 天，它所需要的只是切换 readFromParcel 或 writeToParcel 中的最后两个方法，因为它们的顺序不完全相同！

不敢相信，但现在它起作用了。对于每一个遇到相同错误的人，请检查 writeToParcel 和 readFromParcel 的顺序。Thay 的顺序必须相同。

祝你有美好的一天，克里斯蒂安**

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-15T22:32:31.520

FIX 我终于找到了错误，我简直不敢相信！！！

搜索了将近 1 1/2 天，它所需要的只是切换 readFromParcel 或 writeToParcel 中的最后两个方法，因为它们的顺序不完全相同！

不敢相信，但现在它起作用了。对于每一个遇到相同错误的人，请检查 writeToParcel 和 readFromParcel 的顺序。Thay 的顺序必须相同。

（Christian Risch 自己解决了。不过，我相信这个网站的整洁。也许他会自己关闭答案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-12T08:11:28.560

@Override public void writeToParcel(Parcel dest, int flags) { // 也可以先捆绑...

```
 dest.writeString(songs_id);
    dest.writeInt(check_song_favorite);
    dest.writeString(name);
    dest.writeString(track_image);
    dest.writeString(created_date);
    dest.writeString(status);
    dest.writeString(track);
    dest.writeString(artist_name);
    dest.writeString(uploader_name);
    dest.writeString(play_count);
    dest.writeString(share_count);
    dest.writeString(favorite_count);
    dest.writeString(genre);
    dest.writeString(user_id);
    dest.writeString(offline_download);
    dest.writeString(slug);
}

/**
 * Creates ArtistParcelable model from Parcel.
 */
public static final Parcelable.Creator<PlayerData> CREATOR = new Creator<PlayerData>() {
    @Override
    public PlayerData createFromParcel(Parcel source) {
        String songs_id = source.readString();
        int check_song_favorite = source.readInt();
        String name = source.readString();
        String track_image = source.readString();
        String created_date = source.readString();
        String status = source.readString();
        String track = source.readString();
        String artist_name = source.readString();
        String uploader_name = source.readString();
        String play_count = source.readString();
        String share_count = source.readString();
        String favorite_count = source.readString();
        String genre = source.readString();
        String user_id = source.readString();
        String offline_download = source.readString();
        String slug = source.readString();

        return new PlayerData(check_song_favorite,songs_id, name, created_date, track_image, status, track,
                artist_name, uploader_name, play_count, share_count, favorite_count,genre,user_id,offline_download,slug);
    }

    @Override
    public PlayerData[] newArray(int size) {
        return new PlayerData[size];
    }
}; 
```

尝试以相同的方式管理 writeToParcel 和 readFromParcel。解决了我的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-08T22:08:07.863

对于偶然发现这个问题的人来说，上面的答案对我有用，但并不完全正确。我的问题是我的字段初始化程序的顺序不正确。

代码是这样的：

```
protected Shop(Parcel in) {
    id = in.readInt();
    contactInfo = in.readParcelable(ShopContactInfo.class.getClassLoader());
    name = in.readString();
} 
```

在我的班级中，这些字段按以下顺序声明：

```
@SerializedName("Id")
public int id;

@SerializedName("Name")
public String name;

@SerializedName("ContactInfo")
public ShopContactInfo contactInfo; 
```

注意

```
name = in.readString(); 
```

在下面

```
contactInfo = in.readParcelable(ShopContactInfo.class.getClassLoader()); 
```

以下代码修复了它：

```
protected Shop(Parcel in) {
    id = in.readInt();
    name = in.readString();
    contactInfo = in.readParcelable(ShopContactInfo.class.getClassLoader());
} 
```

# firebase - setPriority() 有时似乎不会触发 startAt().endAt().on("child_added")

> ID：15437229
> 
> 赞同：2
> 
> 时间：2013-03-15T16:15:48.480
> 
> 标签：firebase

`on("child_added")`与某些地区一起使用`startAt()`并`endAt()`用于某些地区。

```
rootRef.startAt(0).endAt(1).on("child_added", function(snapshot) {...});
rootRef.startAt(10).endAt(20).on("child_added", function(snapshot) {...}); 
```

`setPriority()`并使用或将项目从一个区域移动到另一个区域`setWithPriority()`。一些案例“child_added”被触发，但其他一些案例没有触发。

在 jsfiddle 上尝试一个示例。 [http://jsfiddle.net/Q9SJv/16/](http://jsfiddle.net/Q9SJv/16/)

你可能会看到：

移动`12`->`0.2`将被添加到`startAt(0).endAt(1).on("child_added"`

移动`12`->`0.8`不会被添加进去`startAt(0).endAt(1).on("child_added"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:58:48.707

感谢您的报告。这绝对是我们这边的一个错误。我已将其归档在我们的内部跟踪器中，以及重现的步骤。这可能需要一点时间，但我们会修复它。

同时，如果该位置没有大量数据，您可以在 rootRef 使用值事件。

希望有帮助！

# css - 在css中创建一个带有渐变背景的三角形

> ID：15437233
> 
> 赞同：6
> 
> 时间：2013-03-15T16:15:58.420
> 
> 标签：css, css-shapes, psd

我正在尝试在具有渐变背景的 CSS 中创建一个三角形。我还没有取得任何成功。有没有办法做到这一点来消除下图中看到的这种效果。（附加到错误密码错误框的三角形。）

**在 Photoshop 中设计** ![在此处输入图像描述](../Images/2ad642a7f6b0204a4d2ae242691f6bc7.png)

**这是我目前在 HTML 和 CSS 中的设计。**

![在此处输入图像描述](../Images/797f8044f6bb5a6404b589e8a874c061.png)

这是我目前为三角形准备的 css。

```
.error-triangle {
    wwidth: 0;
    height: 0;
    border-top:    10px solid transparent;
    border-bottom: 10px solid transparent;
    border-right:  10px solid blue;
    margin-top: 64px;
    margin-left: 350px;
    position: fixed;
    -webkit-box-shadow: 0 0 3px rgba(102,65,65,.25), 2px 3px 5px rgba(70,34,34,.25), inset 1px 2px rgba(255,255,255,.25);
       -moz-box-shadow: 0 0 3px rgba(102,65,65,.25), 2px 3px 5px rgba(70,34,34,.25), inset 1px 2px rgba(255,255,255,.25);
            box-shadow: 0 0 3px rgba(102,65,65,.25), 2px 3px 5px rgba(70,34,34,.25), inset 1px 2px rgba(255,255,255,.25);
    background-image: -webkit-linear-gradient(bottom, #eb6767, #d94040 35%, #eb6767);
    background-image:    -moz-linear-gradient(bottom, #eb6767, #d94040 35%, #eb6767);
    background-image:      -o-linear-gradient(bottom, #eb6767, #d94040 35%, #eb6767);
    background-image:     -ms-linear-gradient(bottom, #eb6767, #d94040 35%, #eb6767);
    background-image:         linear-gradient(to top, #eb6767, #d94040 35%, #eb6767);
} 
```

我[在 CSS 技巧上使用本教程。](http://css-tricks.com/snippets/css/css-triangle/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T17:52:02.560

使用 CSS 转换创建具有渐变（或任何其他类型的图像背景）的三角形（或其他形状 -[五边形、六边形](http://dabblet.com/gist/3805071)、八边形、十边形、[十二边](http://codepen.io/thebabydino/pen/pAlJg)形、[十](http://codepen.io/thebabydino/pen/fzFcu)[四边形](http://codepen.io/thebabydino/pen/lDLwG)、[十八](http://codepen.io/thebabydino/pen/LuIJx)边形等）非常容易。

但在这种情况下，您甚至不需要三角形。您只需要将方形伪元素旋转 45 度，然后将渐变应用到从一个角到另一个角。

# [*演示*](http://codepen.io/thebabydino/pen/Ajscx)

```
<div class='warn'></div> 
```

**CSS**：

```
.warn {
  position: relative;
  margin: 0 auto;
  border: solid 1px darkred;
  width: 12em; height: 3em;
  border-radius: .2em;
  background: linear-gradient(lightcoral, firebrick);
}
.warn:before {
  position: absolute;
  top: 50%; left: 0;
  margin: -.35em -.45em;
  border-left: inherit; border-bottom: inherit;
  /* pick width & height such that 
     the diagonal of the square is 1em = 1/3 the height of the warn bubble */
  width: .7em; height: .7em;
  border-radius: 0 0 0 .2em;
  transform: rotate(45deg);
  background: linear-gradient(-45deg, firebrick -100%, lightcoral 200%);
  content: '';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:18:56.470

您可以创建 CSS 三角形，但不能创建本身就是渐变的 CSS 三角形。我建议的唯一技巧是选择与渐变背景中的颜色最相似的颜色。这仅取决于您的渐变实际上有多大，以及三角形融合的程度。

对于红色的 div，您可以尝试使用颜色#d94040，但它会缺少边框和阴影。但是，可以添加这些。要为 CSS 三角形添加边框，您可以在您的内部放置一个同样大小的 CSS 三角形。这需要使用绝对定位和 z-index 来重叠它们。

或者您可以使用 ::after 或 ::before 来创建您的 CSS 三角形，而无需添加 HTML 代码，但这仅适用于现代浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:38:45.713

在 CSS3 中，您可以使用“边框技巧”创建一个三角形。此边框可以着色并且可以有背景。

WebKit 现在（至少 Chrome 12）支持渐变作为边框图像。

对于更受支持的解决方案，我建议您对 :before 女巫伪元素的背景进行“渐变”，您将应用“背景渐变”+（带边框的 css 三角形）技巧。

[这是一个 cssTriangle 生成器](http://apps.eky.hk/css-triangle-generator/)供您试验。

# c - llvalue 需要作为赋值的左操作数

> ID：15437241
> 
> 赞同：1
> 
> 时间：2013-03-15T16:16:17.007
> 
> 标签：c

我不想以附加模式打开文件或基于 $flag 擦除它的所有内容

```
static void do_redirect(int filedes, const char *filename, int flag){
int rc;
int fd;

flag == 1 ? fd = open(filename, O_CREAT|O_RDWR|O_TRUNC, 0644) : 
            fd = open(filename, O_CREAT| O_RDWR, 0644);

} 
```

为什么我需要 llvalue 作为赋值的左操作数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:18:34.483

因为优先。表达式被隐式括起来

```
(flag == 1 ? fd = open(filename, O_CREAT|O_RDWR|O_TRUNC, 0644) : fd) = open(filename, O_CREAT| O_RDWR, 0644); 
```

并且条件表达式的值不是左值。

写

```
flag == 1 ? (fd = open(filename, O_CREAT|O_RDWR|O_TRUNC, 0644)) : 
            (fd = open(filename, O_CREAT| O_RDWR, 0644)); 
```

或在`open`调用中移动条件表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:18:38.317

这是一个优先级的问题。

我建议你这样重写它：

```
fd = open(filename, O_CREATE | O_RDWR | (flag == 1 ? O_TRUNC : 0), 0644); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:34:27.093

> **为什么你得到左值错误？**

您的条件表达式类似于：

```
flag == 1 ? fp = 1 : fp = 2; 
```

在 C 中解析如下：

```
(flag == 1 ? fp = 1 : fp) = 2;  

  ^ expression            = value 
```

并且您不能将值分配给导致左值错误的表达式。

@Daniel Fischer 通过添加括号给出正确答案，您可以纠正您的条件表达式（*实际上覆盖优先级*）。

但有趣的是，这个你的表达在 C++ 语言中是正确的！
在此处阅读 Charles Bailey 的回答：[*C 和 C++ 之间的条件运算符差异*](https://stackoverflow.com/questions/1082655/conditional-operator-differences-between-c-and-c)。您还将在那里找到详细的答案，为什么您会收到左值错误。
（*我的回答只是对那里的参考*）

尽管@Daniel Fischer 和@Joachim Pileborg 回答了你两个技巧，但你也可以像这样实现：

```
fd = flag == 1 ? -2 : 3 ; 
```

[是的，但这仅在您的情况下才有可能，因为您`fd`在真/假表达式中都使用]

# hibernate - 从 persistence.xml 引用 maven 依赖 jar 的 artifactId

> ID：15437242
> 
> 赞同：7
> 
> 时间：2013-03-15T16:16:18.880
> 
> 标签：hibernate, maven, jpa, pom.xml

我们正在使用 JPA 并试图坚持标准规范（并避免特定于 Hibernate 的功能）。

我们在另一个项目 (A) 中使用一个项目（我们称之为 X）作为 Maven 依赖项。

我们需要 JPA 来扫描项目 X 中的实体以及扫描项目 A。

为此，我们添加了一行

```
<jar-file>lib/X-v5-4.0.jar</jar-file> 
```

里面

```
<persistence-unit> 
```

在persistence.xml 中。这工作正常。

我们仍然存在的问题是，我们现在需要在 pom.xml 和 persistence.xml 中指定项目 X 的​​版本。这是未来部署问题的秘诀。

我们提出了一个使用 Maven 资源过滤的系统：

```
<jar-file>lib/X-v5-${x-version}.jar</jar-file> 
```

在 persistence.xml 和

```
<properties>
  <x-version>4.0</x-version>
</properties> 
```

和 pom.xml 中的 ${x-version}。

这可行但仍不完美，因为每次项目 X 获得新版本时，我们必须记住在非标准位置更新版本号。

理想情况下，我们希望有这样一种情况，我们可以在 pom.xml 的依赖部分中调整版本信息，并且更改会自动传播到 persistence.xml。通过这种方式，我们将在未来的部署中减少很多可能的错误。

这可能吗？

编辑（我们的解决方案）：

我们添加了一个名为 jpa.xml 的文件。我们在其中定义了一个 entityManagerFactory、一个 persistenceAnnotationBeanPostProcessor 和一个 transactionManager。这里重要的部分是 entityManagerFactory bean。它有一个属性“packagesToScan”，允许您指示要扫描的特定包以查找要放入持久性上下文的实体。

一段代码：

```
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="jpaDataSource" />
    <property name="loadTimeWeaver">
        <bean
            class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" />
    </property>
    <property name="packagesToScan">
        <list>
            <value>org.com.our.external.library.package1</value>
            <value>org.com.our.external.library.package2</value>
            <value>org.com.our.external.library.package3</value>
        </list>
    </property>
</bean> 
```

我相信你看到了它的优势：当我们通过包签名来引用这些库时，我们不再需要担心 jar 版本号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-16T22:44:31.960

我已经这样解决了：

代替`persistence.xml`整个`<jar-file>`标签，即

```
<persistence-unit name="PersistenceUnit">
    ...
    <!-- here is where the jar file is supposed to go -->
    ${importjarfile}
    ...
</persistence-unit> 
```

最后，像这样设置你的属性：

```
<properties>
    <x-version>4.0</x-version>
    <importjarfile><![CDATA[<jar-file>lib/X-v5-${x-version}.jar</jar-file>]]></importjarfile>
</properties> 
```

这样 Eclipse 就不会看到`jar-file`标签，也不会抱怨。

我的解决方案实际上更干净一些，因为我使用的是`.properties`文件，所以我不必使用 CDATA，我希望它仍然有效。

我的解决方案：

```
importjarfile = <jar-file>lib/X-v5-${x-version}.jar</jar-file> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T08:01:44.053

我可以建议您添加一个单元测试来验证`jar-file`预期的 by`persistence.xml`是否确实到位？

`persistence.xml`从`dependency`. _

它会反过来工作，因此可以`dependency.version`从 POM 中的属性进行设置。这满足了您仅在一个地方定义版本的要求，并且想要更新的开发人员`dependency`可能会遇到该属性，检查并更新该属性，而不是用更新的版本号覆盖它。

[Versions Maven Plugin](http://mojo.codehaus.org/versions-maven-plugin/)可以进一步支持这一点。

# powershell - 如何在 Powershell 中通过管道传输 .exe 执行的所有输出？

> ID：15437244
> 
> 赞同：23
> 
> 时间：2013-03-15T16:16:31.490
> 
> 标签：powershell, output

在 Powershell 中，我正在运行`psftp.exe`PuTTy 的主页。我正在这样做：

```
$cmd = "psftp.exe"
$args = '"username@ssh"@ftp.domain.com -b psftp.txt';
$output = & $cmd $args 
```

这行得通；我正在打印出来`$output`。但它只捕获该变量中的一些输出（如“远程工作目录是 [...]”）并将其他输出抛出到如下错误类型：

```
psftp.exe : Using username "username@ssh".
At C:\full_script.ps1:37 char:20
+         $output = & <<<<  $cmd $args
    + CategoryInfo          : NotSpecified: (Using username "username@ssh".:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError 
```

这个“使用用户名...”等看起来像一个普通的 FTP 消息。如何确保所有输出都输入`$output`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T17:04:06.660

问题是一些输出被发送到 STDERR 并且重定向在 PowerShell 中的工作方式与在 CMD.EXE 中不同。

[如何将控制台程序的输出重定向到 PowerShell 中的文件](http://chuchuva.com/pavel/2010/03/how-to-redirect-output-of-console-program-to-a-file-in-powershell/)有一个很好的问题描述和一个巧妙的解决方法。

基本上，`CMD`使用您的可执行文件作为参数调用。像这样：

## 更新

我修复了我的代码，所以它实际上可以工作。:)

```
$args = '"username@ssh"@ftp.domain.com -b psftp.txt';
$output = cmd /c psftp.exe $args 2`>`&1 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-15T22:15:11.837

试试这个

```
$output = [string] (& psftp.exe 'username@ssh@ftp.domain.com' -b psftp.txt 2>&1) 
```

有一个关于制作错误记录的 PowerShell[错误。](http://connect.microsoft.com/PowerShell/feedback/details/765551/in-powershell-v3-you-cant-redirect-stderr-to-stdout-without-generating-error-records)演员围绕它工作`2>&1`。`[string]`

# c# - C#中的子菜单使用WindowsForm？

> ID：15437250
> 
> 赞同：1
> 
> 时间：2013-03-15T16:16:53.523
> 
> 标签：c#, arrays, split, submenu, menustrip

我有一个由菜单和工具组成的菜单条

在“菜单”中，我有 msO1、msO2、msO3 等子菜单，在“工具”中，我有 msP1、msP2、msP3 等子菜单......

在表单上加载所有可见的子菜单都是假的......，在按钮上单击用户想要选择他想要的子菜单......，

在 textBox(txtSelect) 中，如果用户输入 1,3...，他会得到 msO1、msO3 ...、

我的代码是硬代码...，如果我有 20 个子菜单意味着此代码对任何人都没有帮助...，

```
 private void btnSelect_Click_1(object sender, EventArgs e)
    {
        msO1.Visible = false;//msO1 is a submenu
        msO2.Visible = false;
        msO3.Visible = false;
        msP1.Visible = false;
        msP2.Visible = false;
        msP3.Visible = false;
        string word = txtSelect.Text;
        string[] splt = word.Split(',');
        int[] arrayItms = new int[splt.Length];
        for (int x = 0; x < splt.Length; x++)
        {
            arrayItms[x]=Convert.ToInt32(splt[x].ToString());
            if (splt.Length > 0)
            {
                switch (arrayItms[x])
                {
                    case 1:
                        msO1.Visible = true; break;
                    case 2:
                        msO2.Visible = true; break;
                    case 3:
                        msO3.Visible = true; break;
                    case 4:
                        msP1.Visible = true; break;
                    case 5:
                        msP2.Visible = true; break;
                    case 6:
                        msP3.Visible = true; break;
                }
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:29:26.733

创建一个 MenuStrip 数组

```
MenuStrip[] mstrip = new MenuStrip[] 
{
    msO1,msO2, msO3, msP1, msP2, msP3 // add other menus here when needed
}; 
```

现在您可以将阵列作为一个整体进行处理，以使您的菜单可见或不可见

```
 for(int x = 0; x < menus.Length; x++)
      mstrip[x].Visible = false; 
```

并且您的代码可以简化为

```
 for (int x = 0; x < splt.Length; x++)
    {
        int menuIndex;
        if(Int32.TryParse(splt[x], out menuIndex))
        {
            menuIndex--;
            if(menuIndex >= 0 && menuIndex < mstrip.Length)
                mstrip[menuIndex].Visible = true;
       }
    } 
```

请记住，数组索引从零开始（而您的用户可能会从 1 开始计数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:23:36.393

循环遍历菜单条项中的每个 ToolStripMenuItem 控件并将它们设置为可见。您可以在循环内添加更多条件，以根据用户的选择定义哪些菜单项应该可见。

```
 foreach (ToolStripMenuItem mi in menuStrip1.Items)
        {
            mi.Visible = true;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:25:48.333

你可以使用这样的东西

```
 string word = txtSelect.Text;
    string[] splt = word.Split(',');
    for (int x = 0; x < splt.Length; x++)
    {
       Control myControl1 = FindControl("ms" + splt[x]);
       if ( myControl1 != null )
         (ToolStripMenuItem)myControl1.Visible = true;
    } 
```

未经测试，但我希望这应该能让你成功。

# php - 下一个 jquery 不起作用，我的代码是真的

> ID：15437252
> 
> 赞同：1
> 
> 时间：2013-03-15T16:17:01.507
> 
> 标签：php, jquery, html

我的 jQuery 代码不起作用，我找不到原因。代码似乎没问题。

我的html代码

```
<html>
<head>
    <title>Learning Jquery</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <input type="file">
    <br />
    <input type="submit" disabled="disabled">
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="myjquery.js"></script>
</body>
</html> 
```

javascript代码

```
$(document).ready(function (){
    $('input[type=file]').change(function(){
        $(this).next().removeAttr('disabled');
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:23:07.680

如果您想启用提交按钮，请尝试以下 javascript 代码：

```
$(document).ready(function (){
    $('input[type=file]').change(function(){
        $(this).closest('form').find('[type=submit]').prop('disabled', false);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:23:43.657

[`.next()`](http://api.jquery.com/next/)选择您选择的元素的紧随其后的兄弟，在您的情况下，这将是一个 break ( `<br />`)。请尝试：

```
$(this).siblings('input[type=submit]').removeAttr('disabled'); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/UMRvw/)**

# svg - d3 中的垂直文本（未旋转）

> ID：15437256
> 
> 赞同：6
> 
> 时间：2013-03-15T16:17:10.143
> 
> 标签：svg, d3.js, vertical-text

我正在尝试使用 d3 让文本在 svg 中垂直显示。但是，我不想旋转它：我希望字母保持水平，但一个在另一个之上。设置`writing-mode=tb`似乎没有做任何事情。这是我尝试过的：

```
svg.append("text")
  .attr("x", 1000)
  .attr("y", 400)
  .attr("id", "title")
  .attr("font-size", 50)
  .attr("style", "font-family: arial; fill: lightgreen; writing-mode: tb")
  .text("Top 100 Mentions"); 
```

文本显示在正确的位置，使用正确的字体等，但它是水平的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-28T03:53:26.790

当谈到旋转 SVG 文本时，有多个不同的方面：

*   浏览器如何根据前一个字符的位置确定下一个字符的位置；

*   字符如何相对于基线（`rotate`属性）旋转；

*   最终文本块作为一个整体如何相对于坐标系（`transform`属性）旋转。

[完整的，相当难以理解的规格在这里](http://www.w3.org/TR/SVG11/text.html#TextLayout)。

**'writing-mode' 属性**应该改变第一个方面而不影响其他方面，但正如您发现[它根本没有在 Firefox 中实现](https://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode)，而 IE 旋转文本但不遵守水平字形规则。

从理论上讲，**您应该能够通过组合旋转和变换属性来获得相同的效果**：变换整个`<text>`元素以将其旋转到垂直位置，然后反向旋转单个字符以使其恢复水平。但在实践中，它变得混乱......

对于初学者来说，双重旋转会导致文本位于 (x,y) 点的左侧，因此如果 (x,y) 为 (0,0) 它将被剪切到 SVG 之外而无需补充移位。由于变换，您需要一个*负值`dy`*来将文本移回锚点的右侧*。*

其次，旋转应用于每个字符的位置，字符的间距没有调整以解释“l”比它的宽度高得多的事实。所以除非你使用等宽，否则事情看起来很混乱。您应该能够使用`kerning`and`letterspacing`属性更改字母间距，但浏览器对这些属性的支持也很差：IE11 似乎不承认字距调整值，而 Firefox 也不承认。

最后一种选择是自己控制布局：**使用 d3 的强大功能和 string`.split("")`方法将标题分解为单字符`<tspan>`元素**，这些元素可以彼此下方放置并在`<text>`元素内整齐地居中。缺点是这增加了额外的 DOM 元素，您仍然可以选择整个文本块，就像您可以在 HTML 段落中选择一个短语一样，即使每个字母都设置为单独的`<span>`. 我不确定屏幕阅读器是否会自动假设字母之间有空格，但......

# 比较

这个小提琴尝试了三种在垂直文本标签中获取水平字符的方法（写作模式*vs*双旋转*vs*拆分成`<tspan>`s）：http:
[//jsfiddle.net/hx5Th/11/](http://jsfiddle.net/hx5Th/11/)

代码：

```
var svg = d3.select("body").append("svg");

//Green text, uses writing-mode property //
svg.append("text")
  .attr("x", 40)
  .attr("y", 40)
  .attr("id", "title")
  .attr("font-size", 50)
  .attr("style", "fill: lightgreen; writing-mode: tb; glyph-orientation-vertical: 0")
  .text("Top 100 Mentions");

//Black text, uses a double rotate //
svg.append("text")
  .attr("x", 40)
  .attr("y", 40)
  .attr("id", "title")
  .attr("font-size", 50)
  .attr("rotate", -90)
  .attr("dx", "1em")
  .attr("dy", "-1em")
  .attr("kerning", 0)
  .attr("letter-spacing", "0.5em")
  .attr("transform", "translate(150,0) rotate(90)")
  .text("Top 100 Mentions");

//Blue text, uses d3 to create a series of tspans//
svg.append("text")
  .attr("x", 40)
  .attr("y", 40)
  .attr("font-size", 50)
  .attr("id", "title")
  .style("fill", "blue")
  .attr("transform", "translate(300,0)")
  .attr("text-anchor", "middle")
  .selectAll("tspan")
      .data("Top 100 Mentions".split(""))
  .enter().append("tspan")
      .attr("x", 0)
      .attr("dy", "0.8em")
      .text(function(d){return d;}); 
```

结果（全部在 Windows 7 系统上）：

**铬 33** ![在此处输入图像描述](../Images/14fd043cb3d076ca0eb1378f2d2d4742.png)

**即 11** ![在此处输入图像描述](../Images/646c8ef9745e0ee0a4e51b7450283a7f.png)

**火狐** ![在此处输入图像描述](../Images/ddb31c741fb2c413591add6ba4489711.png)

我认为这是胜利的d3...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-04T06:35:45.417

嵌入在svg中的html：

```
<svg
  x="0px" y="0px"
  width="200px" height="200px" 
  viewbox="0 0 200 200"
>

  <foreignObject
    x="20" y="20"
    width="160" height="160"
  >

    <!-- we must set xmlns attribute
      for foreignObject.childNode -->
    <div
      xmlns="http://www.w3.org/1999/xhtml"
      style="

        /* HTML-CSS vertical text */
        writing-mode: vertical-lr;
        text-orientation: upright;

        line-height: 2em;
        font-family: sans-serif;
        font-size: 150%;
      "
    >Hello<br/>&nbsp;World</div>

  </foreignObject>

</svg>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:07:34.653

您可以通过将文本绑定到路径元素来控制文本的位置和方向。下面的示例[在 jsFiddle 上运行版本](http://jsfiddle.net/2EypA/)：

```
var svg = d3.select("body").append("svg"),
    pi = Math.PI;

var arc = d3.svg.arc()
    .innerRadius(150)
    .outerRadius(180)
    .startAngle(0)
    .endAngle(-pi/2)

var path = svg.append("path")
    .attr("id","path1")
    .attr("d","M150 150 L150 20 Z")
    .attr("style","stroke:rgb(255,0,0);stroke-width:2")

// Add a text label.
var text = svg.append("text")
    .attr("x", 6)
    .attr("dy", 15);

text.append("textPath")
   .attr("stroke","black")
   .attr("xlink:href","#path1")
   .text("abc"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T13:24:35.360

这应该做你想做的（虽然我不知道如何在 d3 中表达）：

<text x="100" y="100" transform="rotate(90, 100, 100)" style="glyph-orientation-horizo​​ntal: 270;">一些垂直文本没有旋转</text>

显然将 x 和 y 坐标更改为您自己的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-08T12:59:41.933

对于 Firefox，我能发现他们从 FF 30 开始实现的唯一内容是 textLength。我在 AmeliaBR 的 jsfiddle 中添加了第四个附加文本以进行演示。看起来仍然像废话，D3仍然是赢家。 [http://jsfiddle.net/hx5Th/11/](http://jsfiddle.net/hx5Th/11/)

```
//Black text, uses a double rotate //
svg.append("text")
  .attr("x", 40)
  .attr("y", 40)
  .attr("id", "title")
  .attr("font-size", 50)
  .attr("rotate", -90)
  .attr("dx", "1em")
  .attr("dy", "-1em")
  .attr("textLength", "12.8em")
  .attr("transform", "translate(450,0) rotate(90)")
  .text("Top 100 Mentions"); 
```

# linux - Selenium@library 的代理设置与机器人框架和 VNCserver

> ID：15437263
> 
> 赞同：0
> 
> 时间：2013-03-15T16:17:23.350
> 
> 标签：linux, selenium, proxy, robotframework

嗨，我正在使用 Selenum2Library 在机器人框架中编写测试用例。我正在使用代理设置和 Selenium 在另一台机器上运行我的产品。如果没有代理，我可以在一个上运行 selenium，在另一个上运行产品。有什么方法可以绕过代理设置，访问产品？？？

我正在使用 Fedora 并尝试访问 red hat ironport 帐户。

任何帮助都更受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T14:57:59.663

您可以尝试生成自定义 firefox 配置文件，您可以在其中设置自定义 firefox 设置。

在我的系统中，firefox 的配置文件（机器人框架默认使用）位于 /usr/local/lib/python2.6/site-packages/SeleniumLibrary/firefoxprofile/。

正如我从 /usr/local/lib/python2.6/site-packages/SeleniumLibrary/init .py 的文档中了解到的**那样**，您可以复制该目录，编辑然后使用它：

Start Selenium Server -firefoxProfileTemplate C:\\the\\path # 使用自定义 Firefox 配置文件

# typescript - 在导出的函数中返回一个新的立即执行的函数

> ID：15437265
> 
> 赞同：0
> 
> 时间：2013-03-15T16:17:27.887
> 
> 标签：typescript

我无法编译：

```
 export function Parse(jsonData) {
        try {
            if (jsonData.d != undefined) {
                if (jsonData.d != "") {
                    return (new function("return " + jsonData.d))();
                }
            }
            else {
                if (jsonData != "") {
                    return (new  function("return " + jsonData))();
                }
            }
            return {};
        }
        catch (e) {
            return { exception: e.Message };
        }
    } 
```

**它在（“return”**语句说）或 }下都标记了一个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T09:43:43.180

总的来说，在 JavaScript 中最好避免使用`new`关键字。您可以在没有它的情况下创建立即执行的匿名函数，如下所示：

```
function Parse(jsonData) {
    try {
        if (typeof jsonData.d !== 'undefined') {
            if (jsonData.d != "") {
                    return (function(j) { 
                        return "return " + j.d;
                    }(jsonData));
                }
            } else {
                if (jsonData != "") {
                    return (function(j) { 
                        return "return " + j;
                    }(jsonData));
                }
            }
            return {};
        }
        catch (e) {
            return { exception: e.Message };
        }
}

var data = { d: 'x' }; // 'test';
var result = Parse(data);
alert(result); 
```

在此示例中，我删除了`new`关键字，将 jsonData 传递给立即执行的函数并添加了一个`return`just 以便我可以测试结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:10:06.463

你想要`new Function`，不是`new function`，在这两个地方（与 JavaScript 相同）。

# algorithm - 手工完成的强加密

> ID：15437268
> 
> 赞同：-3
> 
> 时间：2013-03-15T16:17:38.717
> 
> 标签：algorithm, encryption

一个好的加密算法的显着特征之一是易于加密，难以破解。是否有任何足够容易让普通人记住和手动计算的方法，并且仍然能够经受对计算机的暴力攻击。

想象一下，一名囚犯（用笔和纸）向另一名囚犯发送信息，看守抓住手写信息 - 并将他们的监狱密码破解部门放在上面。

目前，我认为 TEA 是最好的候选人，但我认为很难记住。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:35:48.917

是的，有一些可以手动实现的强密码算法的例子。例如，在 Neal Stephenson 的经典著作 Cryptonomicon 中，Bruce Schneier 开发了一种名为 Solitaire（或 Pontifex）的算法，用于一副扑克牌。[这](https://en.wikipedia.org/wiki/Solitaire_%28cipher%29)是维基百科的解释，[这里](https://www.schneier.com/solitaire.html)是作者主页的描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:21:22.067

[一次性垫](http://en.wikipedia.org/wiki/One-time_pad)可以用手做，不可能破解，除非对手拿到一次性垫。让每个囚犯组成一堆一次性垫，根据某种方案对它们进行编号，让他们交换垫，然后在传输消息时有一组关于将使用哪个垫的提示，例如，如果你把它交给监狱的这一部分或用这个手势然后使用这个垫子，等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:36:06.107

Bruce Schneier 的[纸牌](http://www.schneier.com/solitaire.html)密码设计为仅使用一副纸牌手动操作。还有一个苏联间谍在 1950 年代实际使用的[VIC密码。](http://en.wikipedia.org/wiki/VIC_cipher)尽管有可能，但实际上手动操作两者都很麻烦。

# facebook-graph-api - 检查facebook帖子是否是专辑帖子？

> ID：15437270
> 
> 赞同：1
> 
> 时间：2013-03-15T16:17:40.510
> 
> 标签：facebook-graph-api, ios6

从与图形 api 连接的新闻提要获取提要时，我如何知道某些提要是专辑提要而不是图片？

我在我的应用程序中使用图形 api 和 fql。

提前致谢

# php - 如何使特殊字符与 mailto: 链接（PHP）兼容？

> ID：15437276
> 
> 赞同：1
> 
> 时间：2013-03-15T16:18:13.207
> 
> 标签：php, escaping, special-characters, html-escape-characters

我正在尝试将 html 放入[mailto](http://en.wikipedia.org/wiki/Mailto)链接 ( `<a href='mailto:...`) 并使用 htmlescapechars() 但这似乎不是我需要的。

```
<a href='mailto:?subject=<?echo $subject_e=htmlspecialchars($subject, ENT_QUOTES)?>&body=<?=$subject_e?>%20via%20https&#58;&#47;&#47;mySite.com&#47;<?=htmlspecialchars($subjectLink, ENT_QUOTES)?>%20'>some text</a> 
```

谁能解释[PHP 文档的 htmlspecialchars() 部分中的示例 #1 在](http://php.net/manual/en/function.htmlspecialchars.php#example-4704)什么条件下有效？

```
$new = htmlspecialchars("<a href='test'>Test</a>", ENT_QUOTES);
echo $new; // &lt;a href=&#039;test&#039;&gt;Test&lt;/a&gt; 
```

[在我自己的服务器或http://writecodeonline.com/php/](http://writecodeonline.com/php/)上运行此函数似乎不会转换特殊字符。

因此，这似乎不是 PHP 版本问题。包括`encoding`参数也没有效果。什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:19:56.327

> 在我自己的服务器上运行此功能 [...] 似乎不会转换特殊字符。

我敢打赌，您只是在*想*，因为您将脚本输出视为 HTML……而 < 是什么？显示为 HTML？对了，一个`<`角色……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:26:40.150

你看错了！您看到 HTML 标记的原因*是*因为神奇的 php 函数正在工作。否则，它只会呈现为实际的 HTML。发生这种情况是因为您可能正在打印到 HTML 页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:35:56.080

所以在寻找[其他地方](https://stackoverflow.com/questions/987199/mailto-special-characters)之后，我意识到`htmlspecialchars()`我只是需要`rawurlencode()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:20:51.507

它实际上正在工作。如果您查看源代码，您会发现它工作正常。虽然 HTML 正在呈现特殊字符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T16:23:04.037

如果您查看页面的代码，您会发现生成的内容正是预期的内容。厕所：

```
 <div class="page-body">
        <div id="code-output" class="code-output">&lt;a href=&#039;test&#039;&gt;Test&lt;/a&gt;</div>
     </div> 
```

问题是当您呈现页面时，html 实体会再次转换为文本。如果这不是您想要的，您应该将输出放在`<pre>`标签内。

# git - 仅获取已更改的文件

> ID：15437279
> 
> 赞同：0
> 
> 时间：2013-03-15T16:18:22.583
> 
> 标签：git, github

我正在构建一个具有更新（或升级）能力的应用程序，我想使用 git 仅提取和压缩已更改的文件（这将通过命令行完成）。这样做的过程是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:48:50.850

如果您不必编译代码（例如，只要有源代码就可以了），我认为 SVN 可以更好地适应您的需求。

使用 git，默认行为是下载远程仓库中缺少的每个对象。

SVN 只会下载在您当前版本和目标版本之间更改的文件。

我不认为我已经理解了“拉上拉链”的部分——你想拉什么？即将到来的变化？对本地文件进行了更改？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:39:43.730

你可以这样做：

```
git pull
zip modified-files.zip $(git diff --name-only HEAD HEAD~1) 
```

# c++ - Boost Spirit Karma 多种选择

> ID：15437282
> 
> 赞同：2
> 
> 时间：2013-03-15T16:18:24.660
> 
> 标签：c++, boost, boost-spirit, boost-spirit-karma, boost-optional

我看到一个我没有看到解决方案的错误。一、相关代码：

```
namespace C {

    struct RangeEntry {
        size_t byte;
        boost::optional<size_t> bit;
    };

    struct Range {
        RangeEntry firstPart;
        boost::optional<RangeEntry> secondPart;
        boost::optional<size_t> shift;
    };
}

BOOST_FUSION_ADAPT_STRUCT(
    C::RangeEntry,
    (size_t, byte)
    (boost::optional<size_t>, bit)
)

BOOST_FUSION_ADAPT_STRUCT(
    C::Range,
    (C::RangeEntry , firstPart)
    (boost::optional<C::RangeEntry> , secondPart)
    (boost::optional<size_t> , shift)
)

... Declare the rules ...

karma::rule<Iterator, C::Range()> range;
karma::rule<Iterator, C::RangeEntry()> range_part;

... Define rules ...

range_part %= no_delimit[ulong_ << -(lit(":") << ulong_)];
range %= no_delimit[range_part << -(lit("-") << range_part)] << -(lit("<<") << ulong_); 
```

在这`range %=`部分，我得到编译错误

```
/usr/include/boost/spirit/home/karma/numeric/detail/numeric_utils.hpp:504:30: error:
invalid operands to binary expression 
('C::RangeEntry' and 'C::RangeEntry')
    return floor(num / spirit::traits::pow10<T>(exp));
                 ~~~ ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

我猜它正在尝试将 RangeEntry 与 ulong_ 规则匹配，但我不知道为什么？我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T17:07:39.523

该`no_delimit`指令正在重新组合您暴露的融合序列。请注意，以下内容会编译：

```
 range %= range_part << -(lit("-") << range_part) << -(lit("<<") << ulong_); 
```

甚至

```
 range %= no_delimit[range_part << -(lit("-") << range_part) << -(lit("<<") << ulong_)]; 
```

AFAICT 规则是在没有分隔符的情况下定义的，因此 no_delimit 无论如何在这里应该是多余的。

* * *

我“幻想”了一个 RangeEntry 类型，只是为了使它成为一个独立的样本：

```
#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/karma.hpp>

namespace karma = boost::spirit::karma;

namespace C {
    typedef std::pair<unsigned long, boost::optional<unsigned long> > RangeEntry;

    struct Range {
        RangeEntry firstPart;
        boost::optional<RangeEntry> secondPart;
        boost::optional<size_t> shift;
    };
}

BOOST_FUSION_ADAPT_STRUCT(
    C::Range,
    (C::RangeEntry , firstPart)
    (boost::optional<C::RangeEntry> , secondPart)
    (boost::optional<size_t> , shift)
    );

//... Declare the rules ...

int main()
{
    typedef char* Iterator;
    karma::rule<Iterator, C::Range()> range;
    karma::rule<Iterator, C::RangeEntry()> range_part;

    //... Define rules ...

    using namespace karma;
    range_part %= no_delimit[ulong_ << -(lit(":") << ulong_)];
    range %= no_delimit[range_part << -(lit("-") << range_part) << -(lit("<<") << ulong_)];
} 
```

# php - PHP SoapClient 和读取属性

> ID：15437287
> 
> 赞同：7
> 
> 时间：2013-03-15T16:18:50.100
> 
> 标签：php, attributes, get, soap-client

我找到了许多关于 SoapClient 期望您如何在请求中*设置*属性的解释，但我根本找不到从响应中*读取属性的方法。*

例如，我的 SoapClient 响应中包含以下元素：

```
...
<ns:index>
   <ns:uid expdate="2013-09-03 14:30:00">JOWtest002</ns:uid>
   <ns:uid expdate="2013-02-07 15:00:00">JOWtest003</ns:uid>
</ns:index>
... 
```

但是，“expdate”属性永远不会附加到“index”stdClass

```
["index"]=>
  object(stdClass)#80 (1) {
  ["uid"]=>
    array(2) {
    [0]=>
      string(10) "JOWtest002"
    [1]=>
      string(10) "JOWtest003"
    }
} 
```

我尝试使用 SoapClient 类映射将其绑定到对象，但不幸的是，WSDL 没有将“uid”元素定义为 complexType，因此它也没有映射属性。将“索引”本身绑定到一个类不起作用。

有什么建议么？我真的想通过将 XML 提供给 SimpleXML 或 DOMDocument 来避免解析 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-28T13:37:51.727

我在 XML 上工作了很多，这是一件真正的苦差事。以我的经验，如果您愿意使用一个编写了处理 SOAP 响应的优秀包装器的库，那么您将实现在此[链接](http://sabre.io/xml/)上找到的 Sabre 的 XML 库。

发送和阅读回复真的很容易。文档非常好，他们的网站上有很多示例，可以帮助您有效地使用该库。

# android - threadid=1 线程以未捕获的异常退出 (group=0x410702a0)

> ID：15437291
> 
> 赞同：0
> 
> 时间：2013-03-15T16:19:01.697
> 
> 标签：android, multithreading, exception, networking

我开发了 android 应用程序，一切都是正确的，没有错误，但是当我运行代码时，我在下面发现了这个错误，当我跟踪代码时，它停在这一行：

```
HttpResponse httpResponse = httpClient.execute(httpPost); 
```

代码的一部分：

```
try {
        // defaultHttpClient

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));
        Log.d("w", "2a json...................");
        HttpResponse httpResponse = httpClient.execute(httpPost);
        Log.d("w", "2b json...................");
        HttpEntity httpEntity = httpResponse.getEntity();
        Log.d("w", "2c json...................");
        is = httpEntity.getContent();
        Log.d("w", "3 json...................");
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

错误：

```
threadid=1: thread exiting with uncaught exception (group=0x410702a0)
FATAL EXCEPTION: main
android.os.NetworkOnMainThreadException
    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
    at libcore.io.IoBridge.connect(IoBridge.java:112)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
    at java.net.Socket.connect(Socket.java:842)
    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:07:25.107

创建一个 Asynctask 并在 doInBackground 方法中进行网络调用

这是你的代码

```
class ABCTask extends AsyncTask<String, Void, Void> {

    private Exception exception;

    protected void doInBackground(String... urls) {
       try {
        // defaultHttpClient

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));
        Log.d("w", "2a json...................");
        HttpResponse httpResponse = httpClient.execute(httpPost);
        Log.d("w", "2b json...................");
        HttpEntity httpEntity = httpResponse.getEntity();
        Log.d("w", "2c json...................");
        is = httpEntity.getContent();
        Log.d("w", "3 json...................");
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    }

    protected void onPostExecute() {

// write what u want to do after completion of the doInBackground method
    }
 }

 new ABCTask().execute(); 
```

# image-processing - 每厘米像素数与图像的缩放和像素化有何关系

> ID：15437294
> 
> 赞同：0
> 
> 时间：2013-03-15T16:19:12.570
> 
> 标签：image-processing, imagemagick, resolution

我正在研究管理员为图像的 PPI 设置阈值，例如 35。如果上传的图像的 PPI 大于 35，则返回 true，否则返回 false。

所以我正在使用 imageMagick 找出图像的 PPI：

```
identify -format "%x x %y" myimg.png 
```

这给了我数字，例如 5.51 PixelsPerCentimeter，我将它们转换为 PixelsPerInch`5.51 * 2.35`

这一切都很好。但是，我很好奇 PPI 如何与图像的缩放因子相关。

**问题**

低分辨率（例如，10 PPI）图像是否意味着它不能像高分辨率图像（例如，72 PPI）那样放大？

好吧，我敢肯定低分辨率可以以很高的百分比放大，但图像质量不会那么好，即它会被像素化？

是否有更好的指标我应该查看而不是 PPI 来确定图像是高分辨率还是低分辨率。

# html - 我希望每个 HTML 行在文本框中来回交替颜色

> ID：15437295
> 
> 赞同：0
> 
> 时间：2013-03-15T16:19:14.063
> 
> 标签：html, colors, textbox, alternate

我在 Actionscript 2 中有滚动 HTML 文本。如何使每行来回交替颜色（以达到预期的可读性）？如果可能的话，我不想为所有 600 行编码颜色或使用批量替换功能！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:21:50.683

看看[斑马条纹](http://csswizardry.com/2010/08/zebra-striping-rows-and-columns/)。您不需要为此使用 Javascript。在`:nth-child(odd)`CSS 中应该足够了。

# css - zurb基础3中div中的滚动条

> ID：15437298
> 
> 赞同：4
> 
> 时间：2013-03-15T16:19:22.743
> 
> 标签：css, html, zurb-foundation

我的问题很简单。但我已经用谷歌搜索和谷歌搜索，但没有找到答案。

我在 zurb Foundation 3 中有一个简单的布局

```
<div class="row" id="wcont1">
    <div class="three columns" id="wcont1a">

    </div>
    <div class="six columns" id="wcont1b">

    </div>
    <div class="three columns" id="wcont1c">

    </div>
</div> 
```

我希望当 wcontb 列被填充时，它不应该扩展超出特定点（由我定义），而是应该可以使用向上和向下箭头图标垂直滚动。

我是新手。我将非常感谢使用 zurb Foundation 3 的详细答案和工作示例。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T01:52:59.327

**你有两个顾虑：**

1.  您想限制中间 div ( `wcont1b`) 的高度，以便内容在到达特定点时可滚动。
2.  你想要一个**漂亮**的方式来做这件事

请注意，这两个问题是分开的问题。所以让我们解决第一个问题，使用 Zurb Foundation 3.2.2 你可以像这样布局你的三个 div：

```
 <div class="row" id="wcont1">
        <div class="three columns" id="wcont1a">
            <div class="panel">
            Content goes here...
            </div>
        </div>
        <div class="six columns" id="wcont1b">
            <div class="panel">
                <h4>Content goes here...</h4>
                <ul>
                    <li>1</li>
                    <li>2</li>
                    <li>3</li>
                    <li>4</li>
                    <li>5</li>
                    <li>6</li>
                    <li>7</li>
                    <li>8</li>
                    <li>9</li>
                    <li>10</li>
                </ul>

            </div>
        </div>
        <div class="three columns" id="wcont1c">
            <div class="panel">
            Content goes here...
            </div>
        </div>
    </div> 
```

我填充`wcont1b`了，所以我们可以看到滚动条在运行。我还将示例内容放在 a 中`zurb panel`（使用`panel`类），这样您就可以更好地了解 div 是如何分隔的以及滚动条的行为方式（我将向您展示两种方法）。

好的，现在您在中心有一个高 div ('wcont1b`)，我们希望它具有一定的高度，这样它就不会占用太多空间，尤其是在移动设备上查看时（尽管我个人更喜欢高 div一个带有滚动条的短的，**尤其是在 div 之外及其下方有内容的情况下**）。要控制 div 的高度，您需要在 css 中使用：

**方法#1**

`#wcont1b .panel { max-height: 150px; overflow-y: scroll; }`

max-height 值是高度限制，`wcont1b`绝对应该根据您的要求更改它。overflow-y 负责处理滚动条。`wcont1b`如果您有一个标题并且您不希望它与内容一起滚动，那么这种方法将是不可取的。所以为了更漂亮，你应该这样做：

**方法#2**

`#wcont1b .panel ul { max-height: 150px; overflow-y: scroll; }`

现在请注意，只有列表滚动并且标题保持在顶部。不同之处在于您的 css 现在以 .list 为目标`ul`，而不是整个内容或整个`wcont1b`.

有了它，你现在有了一个高度控制的 div。但是我认为您希望滚动条看起来不错，这就是 jquery 插件的用武之地。您告诉我们您已经尝试过**`millions`**，但您没有向我们展示任何代码，您这样做很重要。但是，无论如何，让我举一个例子[，你可以在这里找到使用 jscrollpane](http://jscrollpane.kelvinluck.com/index.html)的例子。下载必要的文件并在页面上引用它们后，您需要执行以下操作：

**方法 #1 所需的代码：**

```
<script>
$(window).load(function(){
    $('#wcont1b .panel').jScrollPane();
});
</script> 
```

**方法 #2 所需的代码：**

```
<script>
$(window).load(function(){
    $('#wcont1b .panel ul').jScrollPane();
});
</script> 
```

就是这样，它应该可以解决您的问题。如果您遇到更多问题，您需要提供尽可能多的信息，以便这里的人们可以更好地帮助您。

# javascript - 仅使用 javascript/jquery 更改图像扩展名？

> ID：15437300
> 
> 赞同：1
> 
> 时间：2013-03-15T16:19:30.507
> 
> 标签：javascript, jquery

我正在制作一个简单的滑块来为我的一个朋友展示艺术品。我真的只熟悉 javascript/jquery，所以我现在不是 100% 习惯使用其他东西。

由于我的朋友没有任何编程知识，我试图让她更新的过程非常简单（即，每当她向文件夹添加新图像时自动创建新图像）。她会将图像上传到一个文件夹，并且必须对它们进行编号（即 1.jpg、2.jpg）。我的 javascript 使用 for 循环遍历数字（每当她添加新图像时，她都必须更新循环）并将它们插入到文件名中。然而，这限制了她只上传一种类型的文件。有没有办法只使用javascript来更改扩展名？

这是我到目前为止所拥有的：

```
function callImages(){
    //create the image div
    $('.artslider').append('<div class="image"></div>');

    //create the files array
    var files = [];

    //start the loop, starting position will have to be updated as images are added
    for (i=8;i>=0;i--){

        //create the img src for a jpg img
        var imgJPG = 'arts/'+i+'.jpg';

        //find the natural width of the image after it loads to see if it actually exists
        var imgWidth = $('imgJPG').load().naturalWidth;

        //if the width is undefined, replace the jpg extension with gif
        if (imgWidth===undefined){
            var imgGIF = imgJPG.replace('jpg', 'gif');
            files[i] = '<img src="'+imgGIF+'" class="artsliderimg"/>';
        }

        //otherwise keep the jpg extension
        else {
            files[i] = '<img src="'+imgJPG+'" class="artsliderimg"/>';
        }

        //then add the images to the img div
        $('.image').append(files[i]);
    }
}; 
```

这个 if/else 的问题是它只会创建一个 gif 图像。如果您切换顺序，它只会创建一个jpg图像。

编辑：这是此代码产生的内容：[https ://googledrive.com/host/0B1lNgklCWTGwV1N5cWNlNUJqMzg/index.html](https://googledrive.com/host/0B1lNgklCWTGwV1N5cWNlNUJqMzg/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:40:46.493

问题在于这段代码：

```
var imgJPG = 'arts/'+i+'.jpg';
var imgWidth = $('imgJPG').load().naturalWidth; 
```

`imgWidth`将始终未定义。

首先，您传递的是字符串 'imgJPG' 而不是参数`imgJPG`。其次我想你误解了 jQuery 选择器，它是用来选择 HTML 元素的，在这里输入一个文件路径不会有任何效果。第三，我认为您误解了该`load`功能，它用于将数据从服务器加载到 HTML 元素中。

我建议使用如下函数来检查图像是否存在：

```
function urlExists(url) {
  var http = jQuery.ajax({
    type:"HEAD",
    url: url,
    async: false
  });
  return http.status == 200;
} 
```

然后在您的代码中：

```
if (!urlExists(imgJPG)){
    var imgGIF = imgJPG.replace('jpg', 'gif');
    files[i] = '<img src="'+imgGIF+'" class="artsliderimg"/>';
}
else {
    files[i] = '<img src="'+imgJPG+'" class="artsliderimg"/>';
} 
```

# maven - 在计算机之间共享 tycho 构建结果

> ID：15437301
> 
> 赞同：0
> 
> 时间：2013-03-15T16:19:36.777
> 
> 标签：maven, nexus, tycho

我已经使用 tycho 成功构建了 Core 模块，并使用“maven clean deploy”命令将其部署到 Nexus。现在我想使用这个核心模块工件来构建我的 Live 模块（放置在其他 PC 上），但是 tycho 使用基于清单的方法看不到这个核心模块。

核心模块构建工件放置在 Nexus 上（标准，不是 p2 格式）。如果 Core 和 Live 共享相同的本地 .m2/repository 文件夹，它可以工作，但在使用 Nexus 共享的情况下它不起作用。

是否可以在不创建新的 p2 存储库且不使用基于标准 maven 的依赖管理方法的情况下共享构建工件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:28:01.703

看看[http://wiki.eclipse.org/Tycho/Nexus_Unzip_Plugin](http://wiki.eclipse.org/Tycho/Nexus_Unzip_Plugin)。这个 Nexus 插件允许使用标准`maven2`格式存储库通过 Nexus 在项目之间交换二进制 p2 工件。`p2`如果您使用此插件，则无需在 Nexus 中创建具有格式的存储库。

# css - 请帮助无法在 css 中居中 div，需要帮助

> ID：15437302
> 
> 赞同：-3
> 
> 时间：2013-03-15T16:19:36.953
> 
> 标签：css, html, center

我已经使用切片将 div 标签从 Photoshop 设计导出到 Dreamweaver 中，从头部提取 css 并创建了一个样式表。页面中的所有 div 标签都为每个标签设置了绝对位置。我已经尝试了所有我能想到的将页面上的所有内容居中的方法，但没有任何效果。有人可以看看代码并告诉我我缺少什么。

```
<HTML>

<html>

<head>

<title>Packet Access</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<link href="css/style_sheet.css" rel="stylesheet" type="text/css" />

</head>
<body style="background-color:#FFFFFF; margin-top: 0px; margin-bottom: 0px; 
margin-left: 0px; margin-right: 0px`enter code here`;">
<div id="Table_01">
<div id="topper">
</div>
<div id="Topper-2">
</div>
<div id="search">
    <img src="images/search.png" width="133" height="19" alt="">
</div>
<div id="topper-side2"></div>
<div id="topper-side"></div>
<div id="Logo">
    <img src="images/Logo.png" width="254" height="37" alt="">
</div>
<div id="side-logo-right"></div>
<div id="under-search"></div>
<div id="index-09"></div>
<div id="navigation">
    <img src="images/navigation.png" width="457" height="20" alt="">
</div>
<div id="under-logo"></div>
<div id="under-navigation"></div>
<div id="divider">
    <img src="images/divider.jpg" width="1024" height="3" alt="">
</div>
<div id="bg-left">
    <img src="images/bg_left.jpg" width="131" height="147" alt="">
</div>
<div id="index-15">
    <img src="images/index_15.png" width="764" height="52" alt="">
</div>
<div id="bg-right">
    <img src="images/bg_right.jpg" width="129" height="147" alt="">
</div>
<div id="index-17">
    <img src="images/index_17.jpg" width="764" height="243" alt="">
</div>
<div id="index-18">
    <img src="images/index_18.jpg" width="130" height="519" alt="">
</div>
<div id="index-19">
    <img src="images/index_19.jpg" width="1" height="148" alt="">
</div>
<div id="index-20">
    <img src="images/index_20.jpg" width="1" height="148" alt="">
</div>
<div id="index-21">
    <img src="images/index_21.jpg" width="128" height="519" alt="">
</div>
<div id="index-22">
    <img src="images/index_22.png" width="766" height="43" alt="">
</div>
<div id="index-23">
    <img src="images/index_23.png" width="12" height="1" alt="">
</div>
<div id="OTT-box">
    <img src="images/OTT_box.jpg" width="242" height="99" alt="">
</div>
<div id="index-25">
    <img src="images/index_25.png" width="9" height="1" alt="">
</div>
<div id="XFP">
    <img src="images/XFP.jpg" width="242" height="99" alt="">
</div>
<div id="index-27">
    <img src="images/index_27.png" width="10" height="1" alt="">
</div>
<div id="Cache">
    <img src="images/Cache.jpg" width="242" height="99" alt="">
</div>
<div id="index-29">
    <img src="images/index_29.png" width="9" height="1" alt="">
</div>
<div id="index-30">
    <img src="images/index_30.jpg" width="12" height="327" alt="">
</div>
<div id="index-31">
    <img src="images/index_31.jpg" width="9" height="327" alt="">
</div>
<div id="index-32">
    <img src="images/index_32.jpg" width="10" height="327" alt="">
</div>
<div id="index-33">
    <img src="images/index_33.jpg" width="9" height="327" alt="">
</div>
<div id="index-34">
    <img src="images/index_34.png" width="242" height="81" alt="">
</div>
<div id="index-35">
    <img src="images/index_35.png" width="242" height="81" alt="">
</div>
<div id="index-36">
    <img src="images/index_36.png" width="242" height="81" alt="">
</div>
<div id="index-37">
    <img src="images/index_37.jpg" width="242" height="148" alt="">
</div>
<div id="index-38">
    <img src="images/index_38.jpg" width="242" height="148" alt="">
</div>
<div id="index-39">
    <img src="images/index_39.jpg" width="242" height="148" alt="">
</div>
<div id="footer">Copyright © 2012 Packet Access</div>
</div>
<!-- End Save for Web Slices -->
</body>
</html>

<!--The CSS is below-->

<CSS>

@charset "utf-8";

*{  
   margin:0;  
   padding:0;  

}  

.body {
background-color: #000;
text-align:center; /*For IE6 Shenanigans*/

}

#Table_01 {
margin: 0 auto;
text-align: center;
width: 1024px;

}

#topper {
position:absolute;
left:0px;
top:0px;
width:1024px;
height:10px;
background-color:#000000;

}

#Topper-2 {
position:absolute;
left:0px;
top:10px;
width:763px;
height:6px;
background-color:#000000;

}

#search {
position:absolute;
left:763px;
top:10px;
width:133px;
height:19px;
background-color:#000000;

}

#topper-side2 {
position:absolute;
left:896px;
top:10px;
width:128px;
height:59px;
background-color:#000000;

}

#topper-side {
position:absolute;
left:0px;
top:16px;
width:130px;
height:53px;
background-color:#000000;

}

#Logo {
position:absolute;
left:130px;
top:16px;
width:254px;
height:37px;

}

#side-logo-right {
position:absolute;
left:384px;
top:16px;
width:379px;
height:26px;
background-color:#000000;

}

#under-search {
position:absolute;
left:763px;
top:29px;
width:133px;
height:13px;
background-color:#000000;

}

#index-09 {
position: absolute;
left: 384px;
top: 42px;
width: 55px;
height: 27px;
background-color: #000;

}

#navigation {
position:absolute;
left:439px;
top:42px;
width:457px;
height:20px;
background-color:#000000;

}

#under-logo {
position:absolute;
left:130px;
top:53px;
width:254px;
height:16px;
background-color:#000000;

}

#under-navigation {
position:absolute;
left:439px;
top:62px;
width:457px;
height:7px;
background-color:#000000;

}

#divider {
position:absolute;
left:0px;
top:69px;
width:1024px;
height:3px;
background-color:#000000;

}

#bg-left {
position:absolute;
left:0px;
top:72px;
width:131px;
height:147px;

}

#index-15 {
position:absolute;
left:131px;
top:72px;
width:764px;
height:52px;

}

#bg-right {
position:absolute;
left:895px;
top:72px;
width:129px;
height:147px;

}

#index-17 {
position:absolute;
left:131px;
top:124px;
width:764px;
height:243px;

}

#index-18 {
position:absolute;
left:0px;
top:219px;
width:130px;
height:519px;

}

#index-19 {
position:absolute;
left:130px;
top:219px;
width:1px;
height:148px;

}

#index-20 {
position:absolute;
left:895px;
top:219px;
width:1px;
height:148px;

}

#index-21 {
position:absolute;
left:896px;
top:219px;
width:128px;
height:519px;

}

#index-22 {
position:absolute;
left:130px;
top:367px;
width:766px;
height:43px;

}

#index-23 {
position:absolute;
left:130px;
top:410px;
width:12px;
height:1px;

}

#OTT-box {
position:absolute;
left:142px;
top:410px;
width:242px;
height:99px;

}

#index-25 {
position:absolute;
left:384px;
top:410px;
width:9px;
height:1px;

}

#XFP {
position:absolute;
left:393px;
top:410px;
width:242px;
height:99px;

}

#index-27 {
position:absolute;
left:635px;
top:410px;
width:10px;
height:1px;

}

#Cache {
position:absolute;
left:645px;
top:410px;
width:242px;
height:99px;

}

#index-29 {
position:absolute;
left:887px;
top:410px;
width:9px;
height:1px;

}

#index-30 {
position:absolute;
left:130px;
top:411px;
width:12px;
height:327px;

}

#index-31 {
position:absolute;
left:384px;
top:411px;
width:9px;
height:327px;

}

#index-32 {
position:absolute;
left:635px;
top:411px;
width:10px;
height:327px;

}

#index-33 {
position:absolute;
left:887px;
top:411px;
width:9px;
height:327px;

}

#index-34 {
position:absolute;
left:142px;
top:509px;
width:242px;
height:81px;

}

#index-35 {
position:absolute;
left:393px;
top:509px;
width:242px;
height:81px;

}

#index-36 {
position:absolute;
left:645px;
top:509px;
width:242px;
height:81px;

}

#index-37 {
position:absolute;
left:142px;
top:590px;
width:242px;
height:148px;

#index-38 {
position:absolute;
left:393px;
top:590px;
width:242px;
height:148px;

}

#index-39 {
position:absolute;
left:645px;
top:590px;
width:242px;
height:148px;

}

#footer {
position: absolute;
left: 0px;
top: 738px;
width: 100%;
height: 21px;
background-color: #000000;
font-family: "Helvetica LT Std";
font-size: 14px;
color: #999;
text-decoration: none;
text-align: center;
padding-top: 3px;
padding-bottom: 2px;

}

</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:17:12.767

要回答如何使页面上的所有内容居中的直接问题，请`#Table_01`从以下位置更改：

```
#Table_01 {
margin: 0 auto;
text-align: center;
width: 1024px;
} 
```

至：

```
#Table_01 {
margin: 0 auto;
text-align: center;
width: 1024px;
position: relative;
} 
```

# c# - 编译器错误消息：CS0103：当前上下文中不存在名称“BusinessLogic”

> ID：15437309
> 
> 赞同：3
> 
> 时间：2013-03-15T16:20:08.107
> 
> 标签：c#, asp.net, iis, iis-7.5, iis-express

像很多人一样，我遇到了 CS0103 问题，但是在使用 IIS7.5 时我还没有找到关于现有主题的好的解决方案

奇怪的是：

*   该站点**在 IIS5.1 / XP 下运行良好**（至少没有这个问题）
*   该站点在 IIS7.5 Express / XP 下运行良好（从 Visual Studio 2010 运行时）
*   该站点**在 IIS7.5 Express / W7 下**运行良好（从 Visual Studio 2010 运行时）
*   但是我在使用 IIS7.5 / W7 时遇到了这个错误

涉及此错误的类位于 App_Code 文件夹中的 BusinessLogicWrapper.cs 中（**在 Visual Studio 中哪个图标是灰色的**。这是否意味着它没有被考虑在内？或者仅仅是因为它是一个特殊文件夹？）。

我试图在 SessionProcessing.ashx 的开头添加一个`include BusinessLogic;`但它没有工作：编译器只是停在第 3 行而不是第 30 行，说它不知道它必须包含什么......

我感谢你的帮助，

* * *

更多信息：

*   我正在运行网站的预编译版本
*   一开始它是为IIS5.1设计的

* * *

**部分解决方法是将我的虚拟目录的 bin 文件夹放入根目录。**

请注意，我不再有“服务器错误”（至少目前），但该网站仍然无法正常工作（我认为不同文件的路径存在问题......）。

这不是一个明确的答案（从我自己到我自己和其他人），但也许它可以为更多实验用户提供一些想法！

* * *

网站显示的500错误：

```
Compilation Error

Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. 

Compiler Error Message: CS0103: The name 'BusinessLogic' does not exist in the current context

Source Error:

Line 28:                                 (context.Request.HttpMethod == "POST" && context.Request.Params["action"] == "DELETE"))
Line 29:                 {
Line 30:                     BusinessLogic.Wrapper.WRITE_TRACE(BusinessLogic.TraceLevel.MEDIUM, "SessionProcessing.ashx End session", "sid:" + sid);
Line 31:                     int res = BusinessLogic.Wrapper.removeSession(sid);
Line 32: 

Source File: c:\Users\blabla\PrecompiledWeb\Web2\SessionProcessing.ashx    Line: 30 
```

SessionProcessing.ashx 的开头：

```
<%@ WebHandler Language="C#" Class="getsession" %>

using System;
using System.Web;
using System.Text;

public class getsession : IHttpHandler, System.Web.SessionState.IReadOnlySessionState
{

    public void ProcessRequest (HttpContext context) {
        context.Response.Clear();
        context.Response.TrySkipIisCustomErrors = true;

        String sid = context.Request.Params["sessionid"];

        try
        {
            if (sid != null)
            {
                //###############################################
                //###############################################
                if (context.Request.HttpMethod == "DELETE" ||
                                (context.Request.HttpMethod == "POST" && context.Request.Params["action"] == "DELETE"))
                {
                    BusinessLogic.Wrapper.WRITE_TRACE(BusinessLogic.TraceLevel.MEDIUM, "SessionProcessing.ashx End session", "sid:" + sid);
                    int res = BusinessLogic.Wrapper.removeSession(sid); 
```

最后是树的图像：http: [//i.stack.imgur.com/szbhA.png](http://i.stack.imgur.com/szbhA.png)

* * *

App_Code/BusinessLogicWrapper.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Text;
using System.Runtime.InteropServices;

namespace BusinessLogic
{
    /// <summary>
    /// Summary description for BusinessLogicWrapper
    /// </summary>
    public class Wrapper
    {
        //Init
        [DllImport("BusinessLogicLib.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
        public static extern int init(string loginFilePath, string remoteServerName, string[] itemsConnection, int cItems); 
```

web.config（实际上有9条重写规则）

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <httpCookies domain="localhost"/>
  </system.web>
  <system.webServer>
    <!-- add support for ogg files-->
    <staticContent>
      <mimeMap fileExtension=".oga" mimeType="audio/ogg"/>
      <mimeMap fileExtension=".spx" mimeType="audio/ogg"/>
      <!-- <mimeMap fileExtension=".svg" mimeType="image/svg+xml"/> -->
    </staticContent>
    <!--Disable gzip compression (otherwise server pushed data is cut when arriving on the client) -->
    <urlCompression doStaticCompression="true" doDynamicCompression="false"/>
    <rewrite>
      <rules>
        <rule name="COW API session creation">
          <match url="^session$"/>
          <action type="Rewrite" url="SessionProcessing.ashx"/>
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:48:06.760

为你的`BusinessLogic(Wrapper)`类添加适当的命名空间怎么样？

```
<%@ WebHandler Language="C#" Class="getsession" %>

using System;
using System.Web;
using System.Text;
using [YourProjectName].App_Code 
```

如果是网站项目，请尝试在`BusinessLogicWrapper.cs`文件中完全删除命名空间：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Text;
using System.Runtime.InteropServices;

    public class Wrapper
    {
        //Init
        [DllImport("BusinessLogicLib.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
        public static extern int init(string loginFilePath, string remoteServerName, string[] itemsConnection, int cItems); 
```

然后访问您的 Wrapper 类，如：`Wrapper.WRITE_TRACE...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:47:15.363

一种解决方法（如果您有更好的想法，请发表评论）是将我的虚拟目录的 bin 文件夹放入根目录。

请注意，我不再有“服务器错误”（至少目前），但该网站仍然无法正常工作（我认为不同文件的路径存在问题......）。

这不是一个明确的答案（从我自己到我自己和其他人），但也许它可以为更多实验用户提供一些想法！

# java - Spring Data：服务层单元测试

> ID：15437310
> 
> 赞同：26
> 
> 时间：2013-03-15T16:20:14.600
> 
> 标签：java, spring, unit-testing, spring-data

在我的项目中，我在进行单元测试时遇到了麻烦。一个问题是，仅进行集成测试编写起来要快得多，并且还可以测试组件是否实际协同工作。单元测试新颖的“算法”左右似乎要容易得多。单元测试服务类它只是感觉错误和无用。

我正在使用 mockito 来模拟 spring 数据存储库（因此是数据库访问）。问题是，如果我告诉模拟存储库在方法调用 getById 上返回实体 A，它显然会返回它，并且服务也会返回它。是的，该服务做了一些额外的事情，但非常小的事情，比如加载惰性集合（来自休眠）。显然我在单元测试中没有任何惰性集合（代理）。

例子：

```
@Test
public void testGetById() {
    System.out.println("getById");
    TestCompound expResult = new TestCompound(id, "Test Compound", "9999-99-9", null, null, null);

    TestCompoundRepository mockedRepository = mock(TestCompoundRepository.class);
    when(mockedRepository.findOne(id)).thenReturn(expResult);

    ReflectionTestUtils.setField(testCompoundService, "testCompoundRepository",
            mockedRepository, TestCompoundRepository.class);

    TestCompound result = testCompoundService.getById(id);
    assertEquals(expResult, result);
} 
```

万岁，其余的成功。多么惊喜！不是真的没有。

有人可以向我解释我做错了什么吗？否则这种测试的意义何在？我的意思是我告诉返回 expResult 然后它被返回。哇。多么惊喜！感觉就像我在测试 mockito 是否有效，而不是我的服务。

编辑：

如果出现一些愚蠢的错误，我看到的唯一好处就是在那里留下了一条不需要的行，将返回值设置为 null 或类似的愚蠢的东西。这种情况将被单元测试捕获。“回报-努力”比率仍然看起来很糟糕吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-15T04:23:14.633

问题可能有点老，但我会回答以防有人偶然发现。

*   我正在使用 Mockito 和 JUnit。
*   AccountRepository 是一个扩展 JPARepository 的普通 Spring 数据存储库。
*   Account 是一个普通的 JPA 实体。

要测试您的服务和模拟 Spring Data 存储库，您需要以下内容。

```
package foo.bar.service.impl;

import foo.bar.data.entity.Account;
import foo.bar.data.repository.AccountRepository;
import foo.bar.service.AccountService;

import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.Mockito;
import org.mockito.runners.MockitoJUnitRunner;

@RunWith(MockitoJUnitRunner.class)
public class AccountServiceImplTest {

    @Mock
    private static AccountRepository accountRepository;

    @InjectMocks
    private static AccountService accountService = new AccountServiceImpl();

    private Account account;

    @Test
    public void testFindAccount() {

        Integer accountId = new Integer(1);

        account = new Account();
        account.setId(accountId);
        account.setName("Account name");
        account.setCode("Accont code");
        account.setDescription("Account description");

        Mockito.when(accountRepository.findOne(accountId)).thenReturn(account);

        Account retrivedAccount = accountService.findAccount(accountId);

        Assert.assertEquals(account, retrivedAccount);

    }

} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-15T16:25:28.483

我喜欢测试我的 Spring Data 存储库的原因之一是测试我是否正确定义了我的 JPA 映射。我没有为这些测试使用模拟框架，我使用 Spring Test 框架，它实际上引导容器允许我将实际存储库自动连接到 Junit 测试中，以便我可以针对它执行测试。

我同意你的想法，即嘲笑存储库是毫无用处的。由于您使用 Spring，我建议您利用 Spring Test 框架对您的存储库执行真实测试，这些测试可以以更基于单元测试的方式对嵌入式数据库（如 H2）或您的实际数据库实现（如 Oracle 或 MySql）执行，以进行更多的集成测试。（针对开发数据库的副本执行这些测试）这些测试将揭示您的 JPA 映射和其他项目中的谬误，例如数据库中不正确的级联设置。

这是我在 GitHub 上进行的一项测试的[示例。](https://github.com/kmb385/ToThoughtDataLayer/blob/master/src/test/java/org/tothought/repositories/PostRepositoryTest.java)注意框架实际上是如何将存储库自动装配到测试中的。该存储库还包含一个如何配置 Spring Test 框架的示例，我也在这篇[博](http://blog-tothought.rhcloud.com/post/4)文中进行了演示。

**总之，我不相信你会从使用存储库的模拟中获得我讨论过的测试存储库的任何好处。**

我想补充的另一点是，模拟并不是真正打算在实际测试类中使用。它们的用途是为被测类提供所需的依赖项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-21T06:47:20.563

你可以使用这个库：[https ://github.com/agileapes/spring-data-mock](https://github.com/agileapes/spring-data-mock)

这将为您模拟您的存储库，同时允许您为任何方法以及您的本机查询方法实现自定义功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T16:54:43.083

你完全正确。这是明确的单元测试。而且它永远不会失败（所以，它没用）我认为您需要在集成测试中使用**真实**数据库（例如在内存中）测试**真实的**JPA 存储库（就像我一直做的那样）。**`H2`**

 **最好测试您的服务（他们的接口）。如果一段时间后您将更改您的存储（例如 Mongo） - 您将能够使用您的服务测试来确保所有工作都像以前一样。

一段时间后，您会惊讶地发现有多少与 DB\JPA 相关的问题（约束、乐观锁、延迟加载、重复 id、一些休眠问题等等）。

此外，尝试通过测试进行开发 - 而不仅仅是在实施后编写测试。而不是在服务中创建新方法之前 - 为它创建测试，实现服务方法，并且只有在实际应用程序中重新检查它之后。至少启动测试比服务器快得多。

所以，不要创建有很多测试的测试。了解他们如何帮助您。

对存储库使用模拟不是一个好主意。测试您的服务如何与 Hibernate\JPA\Database 一起工作。大部分问题位于**两层之间**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-03T08:45:58.570

您可以模拟存储库并将其注入服务，这就是方式；但是，如果您只是使用`@Mock`存储库实例化服务，最好将存储库定义为`private final`服务中的字段并使用所有存储库的构造函数。这样，如果您向服务添加另一个存储库，测试将失败，您必须更改它，这就是目的。

想象一下这个服务：

```
class OrderService {
    private final UserRepository userRepos;

    public OrderService(UserRepository userRepos) {
        this.userRepos = userRepos;
    }

    ...

} 
```

而这个测试：

```
class OrderServiceTests {
    @Mock
    private UserRepository userRepos;

    private OrderService service;

    private OrderServiceTests() {
        this.service = new OrderService(this.userRepos);
    }
} 
```

现在，如果我们向服务添加另一个依赖项：

```
class OrderService {
    private final UserRepository userRepos;
    private final AddressRepository addRepos;

    public OrderService(UserRepository userRepos, AddressRepository addRepos) {
        this.userRepos = userRepos;
        this.addRepos = addRepos;

    ...

} 
```

之前的测试将失败，因为构造函数已更改。如果你使用`@InjectMocks`这将不会发生；注射发生在幕后，我们不清楚会发生什么；这可能是不可取的。

另一件事是，我不同意集成测试将涵盖单元测试将涵盖的所有情况。可能但并非总是如此。甚至控制器也可以使用 mock 进行单元测试；毕竟所有的测试都是为了覆盖我们编写的所有代码，所以它们必须是细粒度的；想象一下，当我们遵循 TTD 并且只完成控制器和服务级别时：如果没有控制器单元测试，我们将如何进行？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-19T11:50:59.980

假设我们有以下*服务*类

```
@Service 
public class EmployeeServiceImpl implements EmployeeService {

    @Autowired
    private EmployeeRepository employeeRepository;

    @Override
    public Employee getEmployeeByName(String name) {
        return employeeRepository.findByName(name);
    }
} 
```

*测试*类：

```
@RunWith(SpringRunner.class)
public class EmployeeServiceImplIntegrationTest {

    @TestConfiguration
    static class EmployeeServiceImplTestContextConfiguration {

       @Bean
       public EmployeeService employeeService() {
           return new EmployeeServiceImpl();
        }
    }

    @Autowired
    private EmployeeService employeeService;

    @MockBean
    private EmployeeRepository employeeRepository;

// write test cases here
} 
```

要检查 Service 类，我们需要创建一个 Service 类的实例并将其作为**@Bean**使用，以便我们可以在测试类中**@Autowire**它。此配置是通过使用**@TestConfiguration**注释来实现的。

在组件扫描过程中，我们可能会发现仅为特定测试创建的组件或配置意外地随处可见。为了帮助防止这种情况，Spring Boot 提供了**@TestConfiguration**注释，可以在**src/test/java**中的类上使用，以指示它们不应该被扫描拾取。

这里另一个有趣的事情是**@MockBean**的使用。它为 EmployeeRepository 创建了一个 Mock，可用于绕过对实际 EmployeeRepository 的调用：

```
@Before
public void setUp() {
    Employee alex = new Employee("alex");

    Mockito.when(employeeRepository.findByName(alex.getName()))
      .thenReturn(alex);
} 
```

设置完成后，我们可以轻松地测试我们的服务，例如：

```
@Test
public void whenValidName_thenEmployeeShouldBeFound() {
    String name = "alex";
    Employee found = employeeService.getEmployeeByName(name);

    assertThat(found.getName())isEqualTo(name);
} 
```

如需更深入的知识检查： [https ://www.baeldung.com/spring-boot-testing](https://www.baeldung.com/spring-boot-testing)**

# android - ArrayAdapter NullPointerException

> ID：15437312
> 
> 赞同：4
> 
> 时间：2013-03-15T16:20:21.053
> 
> 标签：android

在 myListView.setAdapter(aa); 的第 42 行获取 nullpointerexception；该代码应该可以工作，但无法真正看到阻止适配器填充的内容。如果我注释掉 arrayadapter 部分，它可以工作，但不能使用它，所以任何帮助将不胜感激。

我尝试将布局更改为仅一个 ListView，并让该类扩展 ListActivity，但这也不起作用。

```
 package ie.ucc.bis.is4432calculator;

import java.util.ArrayList;

 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.widget.ArrayAdapter;
 import android.widget.ListView;
 import android.widget.TextView;

    public class secondActivity extends Activity {

protected double latestResult = 0.0;
protected TextView Results;
public String ResultString;
ArrayList<String> ListItems;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.secondactivity);

   Results= (TextView)findViewById(R.id.textView1);

   Intent i = this.getIntent(); /*delete "this."*/
   latestResult = i.getDoubleExtra("latestResult", 0.0);

   Results.setText(String.valueOf(latestResult));

   ListItems = i.getStringArrayListExtra("ListItems");
   Results.setText(getResultString());

   ListView myListView = (ListView)findViewById(R.id.listView1);

   final ArrayAdapter<String> aa;
   aa = new ArrayAdapter<String>(this,
           android.R.layout.simple_list_item_1,ListItems);
            myListView.setAdapter(aa); 
}

   public void setResultString(String ResultString) {
       this.ResultString = ResultString;
   }

   public String getResultString(){
       return ResultString;
   }

} 
```

xml代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" 
    />

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

不太确定出了什么问题，我假设 ArrayAdapter 不会填充，但不能真正理解为什么该代码在不同的项目中有效，但不是在这里。Logcat 结果发布在下面。

```
03-15 16:11:12.104: E/AndroidRuntime(844): FATAL EXCEPTION: main
03-15 16:11:12.104: E/AndroidRuntime(844): java.lang.RuntimeException: Unable to start activity ComponentInfo{ie.ucc.bis.is4432calculator/ie.ucc.bis.is4432calculator.secondActivity}: java.lang.NullPointerException
03-15 16:11:12.104: E/AndroidRuntime(844):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-15 16:11:12.104: E/AndroidRuntime(844):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-15 16:11:12.104: E/AndroidRuntime(844):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-15 16:11:12.104: E/AndroidRuntime(844):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-15 16:11:12.104: E/AndroidRuntime(844):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-15 16:11:12.104: E/AndroidRuntime(844):  at android.os.Looper.loop(Looper.java:123)
03-15 16:11:12.104: E/AndroidRuntime(844):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-15 16:11:12.104: E/AndroidRuntime(844):  at java.lang.reflect.Method.invokeNative(Native Method)
03-15 16:11:12.104: E/AndroidRuntime(844):  at java.lang.reflect.Method.invoke(Method.java:507)
03-15 16:11:12.104: E/AndroidRuntime(844):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-15 16:11:12.104: E/AndroidRuntime(844):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-15 16:11:12.104: E/AndroidRuntime(844):  at dalvik.system.NativeStart.main(Native Method)
03-15 16:11:12.104: E/AndroidRuntime(844): Caused by: java.lang.NullPointerException
03-15 16:11:12.104: E/AndroidRuntime(844):  at android.widget.ArrayAdapter.getCount(ArrayAdapter.java:291)
03-15 16:11:12.104: E/AndroidRuntime(844):  at android.widget.ListView.setAdapter(ListView.java:454)
03-15 16:11:12.104: E/AndroidRuntime(844):  at ie.ucc.bis.is4432calculator.secondActivity.onCreate(secondActivity.java:42)
03-15 16:11:12.104: E/AndroidRuntime(844):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-15 16:11:12.104: E/AndroidRuntime(844):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-15 16:11:12.104: E/AndroidRuntime(844):  ... 11 more 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T16:25:10.067

logcat 说“引起：android.widget.ArrayAdapter.getCount 的 java.lang.NullPointerException”

如果您传入的 ArrayList 为空，则会发生这种情况。`ListItems`在创建 ArrayAdapter 之前进行空检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:46:57.713

ListItems 为 null 并导致问题，忘记将其设置为其他活动的值。

# visual-studio - 在 Microsoft 测试管理器中从探索会话创建测试用例仅显示最后 10 个步骤

> ID：15437313
> 
> 赞同：0
> 
> 时间：2013-03-15T16:20:21.323
> 
> 标签：visual-studio, testing, visual-studio-2012, qa, microsoft-test-manager

探索性测试会话似乎是生成某些类型测试用例的好工具；记录会话非常有用，单击以创建一个预先填充了大部分信息的新测试用例可以节省大量时间。

但是，当我点击“创建测试用例”时，只显示最后十个步骤。通常，我需要的不止这些，而且我不知道如何更改记录的数字。“更改设置”对话框仅允许我调整屏幕截图工具和录音设置，并且在开始测试时唯一可用的选项是构建和环境选择。

如何在新的测试用例中记录超过最后十个步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T06:45:46.083

这是默认值。如果您单击更改步骤按钮，您可以在此处选择更多步骤。此外，您可以通过在您的机器上编辑 mtm.exe.config 来更改默认设置。它可以在`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE`默认情况下找到。

感谢[这篇文章](http://donovanbrown.com/post/I-only-see-the-last-10-steps-of-my-Exploratory-Testing-in-MTM-when-I-create-a-test-case)和[这篇](http://www.codeproject.com/Articles/300009/MTM-11-Configuration-Settings-Customization-Troubl)文章。

# ruby - 如何在二叉树上的 ruby 中实现就地映射方法（map！）？

> ID：15437316
> 
> 赞同：1
> 
> 时间：2013-03-15T16:20:29.063
> 
> 标签：ruby, methods, binary-tree

我正在尝试在对象上实现就地方法，但出现以下错误：

```
Can't change the value of self (SyntaxError) 
```

当试图做

```
self = map(&block) 
```

在以下对象上

```
class Node
  include Enumerable

  # binary tree representation
  attr_accessor :value, :left, :right
  def initialize(value=nil, left=nil, right=nil)
    @value, @left, @right = value, left, right
  end

  def map(&block)
    res = Array.new
    res << yield(value) if value
    res << left.map(&block) if left 
    res << right.map(&block) if right
    res.flatten
  end

  def map!(&block)
    self = self.map(&block)
  end

  def to_a
    map { |a| a }
  end
end 
```

我也尝试过使用 Enumerable 的一些破坏性方法无济于事

```
map(&block).collect! 
```

我的方法有什么问题，您将如何实现这样的功能？

**更新**

为了澄清这个想法是在二叉树上实现映射，上面的映射方法成功地做到了，我的问题是将该方法转换为就地版本。

```
irb(main):001:0> require './node.rb'
=> true
irb(main):002:0> root = @root = Node.new(1, Node.new(2, Node.new(3), Node.new(4)),Node.new(5, Node.new(6), Node.new(7)))
=> #<Node:0x78803f58 @value=1, @left=#<Node:0x78abc090 @value=2, @left=#<Node:0x78abc0f0 @value=3, @left=nil, @right=nil>, @right=#<Node:0x78abc0c0 @value=4, @left=nil, @right=nil>>, @right=#<Node:0x78803f88 @value=5, @left=#<Node:0x78abc060 @value=6, @left=nil, @right=nil>, @right=#<Node:0x78abc030 @value=7, @left=nil, @right=nil>>>
irb(main):003:0> root.map { |a| a * 3 }
=> [3, 6, 9, 12, 15, 18, 21]
irb(main):004:0> root
=> #<Node:0x778fb828 @value=1, @left=#<Node:0x778fb9c0 @value=2, @left=#<Node:0x778fba68 @value=3, @left=nil, @right=nil>, @right=#<Node:0x778fb9f0 @value=4, @left=nil, @right=nil>>, @right=#<Node:0x778fb888 @value=5, @left=#<Node:0x778fb930 @value=6, @left=nil, @right=nil>, @right=#<Node:0x778fb8b8 @value=7, @left=nil, @right=nil>>>
irb(main):005:0> root.map! { |a| a * 3 }
=> [3, 6, 9, 12, 15, 18, 21]]
irb(main):006:0> root
=> [3, 6, 9, 12, 15, 18, 21] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:30:35.117

它通常是这样实现的：

```
class Node

  attr_accessor :value, :left, :right

  def initialize_copy(source)
    super
    @value = @value.dup
    @left = @left.dup
    @right = @right.dup
  end

  def map(&block)
    dup.map!(&block)
  end

  def map!(&block)
    @value.map!(&block) if @value
    @left.map!(&block) if @left
    @right.map!(&block) if @right
    self
  end

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:39:52.327

`self` is a keyword, and it is not a variable. That is why you cannot do assignment to it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:59:25.153

这样的事情呢？

```
class Foo
  attr_accessor :bar

  def initialize(bar)
    @bar = bar
  end

  def update!
    self.instance_variables.each do |i| 
      self.instance_variable_set(i, yield(self.instance_variable_get(i)))
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:23:31.817

[Enumerable 模块](http://ruby-doc.org/core-2.0/Enumerable.html)根据您的领域特定方法为您提供了一堆`each`方法。这些方法都不是破坏性的。

相反，我会使用 Enumerable 定义您自己的方法：

```
class Node

  # define each and include, or do it by hand to customize:

  Enumerable.instance_methods(false).each do |method|
    define_method(method) do |*args|
      # apply method to each instance variable
    end
  end

  %w( map reject etc.. ).each do |method|
    define_method("#{method}!") do |*args|
      results = send(method)
      # modify instance vars based on results
    end
  end

end 
```

# python - AppEngine/Python NDB 密钥顺序

> ID：15437320
> 
> 赞同：3
> 
> 时间：2013-03-15T16:20:50.730
> 
> 标签：python, google-app-engine, google-cloud-datastore, gae-sessions

我有一个有趣的问题，仅在升级我的代码以使用 NDB 后才出现。

我正在使用[gae-sessions](https://github.com/dound/gae-sessions)，它将会话到期时间编码为存储在数据库中的每个 Session 的密钥。例如，密钥将具有以下格式：1363968220_6ea52c936f16fc557c0c03a5f276a056 其中前 10 个字符表示会话到期的时间戳（值 1363968220 编码“2013-03-22 16:03:40”）。

在升级到 NDB 之前，删除过期会话的代码可以正常工作。升级后，代码错误地消除了未过期的会话。代码如下：

```
time_time = time.time()
now_str = unicode(int(time_time))
now_str_datetime = datetime.datetime.fromtimestamp(time_time) 
q = SessionModel.query(namespace='')
key = ndb.Key(SessionModel, now_str + u'\ufffd', namespace='')
logging.info("Deleting sessions with key values less than %s [%s]" % (key, now_str_datetime))
q.filter(SessionModel._key < key)
results = q.fetch(500, keys_only=True)
# This is for debugging purposes
for r_key in results:
    logging.warning("Deleting key %s" % (r_key)) 
```

这将产生以下输出：

```
Deleting sessions with key values less than Key('SessionModel', '1363362698\xef\xbf\xbd') [2013-03-15 15:51:38.767947]
Deleting key Key('SessionModel', '1363924467_e0240e38b4047ef821ac62e07466351b') 
```

如果这些键被视为字符串（使用字符串排序/优先规则），那么被删除的键（以 1363924467 开头）不应*被*视为小于我们要过滤的键（以 1363362698 开头），所以我是对 NDB 中发生的事情感到困惑，这会导致它无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T03:29:52.697

很难解释，根据文档

[https://developers.google.com/appengine/docs/python/ndb/keyclass?hl=zh-tw](https://developers.google.com/appengine/docs/python/ndb/keyclass?hl=zh-tw)

> 键支持比较，例如 key1 == key2 或 key1 < key2。这些运算符比较应用程序 ID、命名空间和完整的“祖先路径”。在按键属性或键排序时，它们使用与数据存储区用于查询的相同排序。

备忘单 [https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/mobilebasic](https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/mobilebasic)

和源代码。都说明使用应该没问题。密钥按顺序对 app_id、名称空间和密钥对进行比较。也许您可以尝试打印 (key.app(), key.namespace(), key.pairs()) 以查看详细信息。

[https://code.google.com/p/appengine-ndb-experiment/source/browse/ndb/key.py](https://code.google.com/p/appengine-ndb-experiment/source/browse/ndb/key.py)

```
def __gt__(self, other):
    """Greater than ordering."""
    if not isinstance(other, Key):
      return NotImplemented
    return self.__tuple() > other.__tuple()

def __tuple(self):
    """Helper to return an orderable tuple."""
    return (self.app(), self.namespace(), self.pairs()) 
```

# php - 有没有办法将 html id 属性发送到函数？

> ID：15437322
> 
> 赞同：0
> 
> 时间：2013-03-15T16:20:53.047
> 
> 标签：php, javascript, ajax, xmlhttprequest

我的代码如下。我想将 id=content 发送给函数 mr。然后将结果写入传递的 id=result。虽然只是针对这个 html 文件，但我想让这个函数可用于另一个 html 页面，并且想在另一个 util.js 文件中添加这个函数。

```
Add Item:
        <input type="text" name="name" id="content">
        <br>
        <button onclick="javascript:mr('POST',content,result,'post.php');"     
type="button"      

id="btn1">
            Submit
        </button>
<br>
        <button onclick="javascript:mr('GET',content,result,'get.php');" type="button"    

id="btn2" >
            List Jobs
        </button>
        <div id="result"></div> 
```

函数mr是这样的，用于ajax post和get操作：

```
function mr(type,content,result,URL) {

            var hr = new XMLHttpRequest();

            //var content = document.getElementById("content").value;
            var vars = "content=" +content;

            if (type == 'GET')
                URL = URL + '?' + vars;

            hr.onreadystatechange = function() {
                if (hr.readyState == 4 && hr.status == 200) {
                    var return_data = hr.responseText;
                    document.getElementById("result").innerHTML = return_data;
                }

            }

            hr.open(type, URL, true);

            hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

            switch(type) {
                case 'GET':
                    hr.send();
                    break;
                case 'POST':
                     hr.send(vars);
                    break;
            }

            document.getElementById("result").innerHTML = "Processing...";

        }
    </script> 
```

post.php

```
<?php echo "POST\n"; if(isset($_POST)) print_r($_POST); ?> 
```

获取.php

```
<?php echo "GET\n"; if(isset($_GET)) print_r($_GET); ?> 
```

当我单击提交时，我得到以下输出。

```
POST Array ( [content] => [object HTMLInputElement] ) 
```

并单击列表按钮输出：

```
GET Array ( [content] => [object HTMLInputElement] ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:28:22.870

这是因为这条线：

```
var vars = "content=" +content; 
```

您发送的是实际`<input>`元素而不是它的值或 id。你在正确的轨道上，上面有注释行。

要发送值，而不是输入对象：

```
var content = document.getElementById("content");
var vars = "content=" + content.value; 
```

要发送 id：

```
var content = document.getElementById("content");
var vars = "content=" + content.id; 
```

# php - 从一个表中选择多个数据并使用 PHP 表单插入到另一个表中

> ID：15437324
> 
> 赞同：1
> 
> 时间：2013-03-15T16:21:02.723
> 
> 标签：php, mysql, database, select, insert

我创建了一个将数据提交到多个表中的表单。我的字段是名字、姓氏、电子邮件、城市/地区/国家，它们都插入到 3 个不同的表（用户、电子邮件、位置）中。

数据进入用户和电子邮件就好了，但我对如何处理位置感到困惑。

我有 3 个单独的位置表（城市、地区、国家）。我要做的是将 CityID、RegionID 和 CountryID 插入 Location 表中。我设置了 City/Region/Country 字段，因此它会根据城市自动完成，如下所示：

![http://i.stack.imgur.com/CYvJG.png](../Images/5850370c7e357c83d7f67d81317167a2.png)

我的 Cities 表包含所有必要的信息（CityID、RegionID、CountryID）。如何从 Cities 表中提取该数据并将其插入到我的 Location 表中？

这是我的代码的一部分。我对 PHP 和 MySQL 非常陌生，所以我为这个草率道歉。代码的第一部分有效，但第二部分无效（将数据插入 Location 表中）。

```
//Insert static values into people table
$sql_user = sprintf("INSERT INTO User (FirstName, LastName,) VALUES ('%s','%s')",
                    mysql_real_escape_string($_POST['FirstName']),
                    mysql_real_escape_string($_POST['LastName']),
$result_user = $db->query($sql_user);

//get last inserted userid
    $inserted_user_id = $db->last_insert_id();

//Insert values into location table
$sql_city = sprintf("INSERT INTO Location (UserID, CityID, RegionID, CountryID) 
VALUES ('$inserted_user_id',(SELECT CityID, RegionID, CountryID, FROM Cities))");
$result_city = $db->query($sql_city); 
```

我想也许我需要在 FROM Cities 之后输入“WHERE ...”，但我不知道我的情况会怎样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:36:01.523

这个条件取决于你。如果您从输入框中获取值，您似乎需要找出从输入字段中读取位置的最佳方法。照原样考虑，您可能希望首先将输入分解为数组：

```
$location = explode(',',$_POST['location'])
$city = $location[0];
$region = $location[1];
$country = $location[2]; 
```

现在在您的查询中 -

```
"...WHERE city_name = '{$city}' AND region_name = '{$region_name}' AND country_name = '{$country}'"; 
```

*编辑

更详细地说，您需要设置一个单独的查询来使用 SQL 连接获取位置。您的加入与 WHERE 约束相结合应该返回您正在寻找的城市。所以在这里：

```
"SELECT Cities.CityID,Cities.RegionID,Cities.CountryID FROM Cities JOIN (Regions,Countries) ON Cities.RegionID = Regions.RegionID AND Cities.CountryID = Countries.CountryID WHERE Cities.CityName = '{city}' AND Regions.RegionName = '{$region}' AND Countries.CountryName = '{$country}' LIMIT 1" 
```

**更新

这是非常基本的东西，您可以通过查看 MySQL 上的 PHP 手册来获得。 [http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

既然你是新人，我就给你通行证。

运行此查询后：

```
$location_result = mysql_query("SELECT Cities.CityID,Cities.RegionID,Cities.CountryID FROM Cities JOIN (Regions,Countries) ON Cities.RegionID = Regions.RegionID AND Cities.CountryID = Countries.CountryID WHERE Cities.CityName = '{$city}' AND Regions.RegionName = '{$region}' AND Countries.CountryName = '{$country}' LIMIT 1"); 
```

您需要访问结果。所以：

```
while ($row = mysql_fetch_assoc($location_result)) {
   $cityID =  $location_result['CityID'];
   //etc... for each associative column
} 
```

然后在您的插入查询中，为 CityID 列插入 $cityID 变量等...

# android - 两种颜色的进度条

> ID：15437326
> 
> 赞同：0
> 
> 时间：2013-03-15T16:21:09.413
> 
> 标签：android, progress-bar, android-progressbar

我有一个带有问题的应用程序，并希望显示一个进度条来显示有多少问题还没有回答/回答。如果问题回答正确，我希望进度条的颜色为绿色，如果答案错误，我希望进度条的颜色为红色。

假设有5个问题。例如 3 个问题后，进度条应该是

```
green|red|red|grey|grey 
```

如果问题 1 是正确的，而问题 2 和 3 是错误的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:25:42.280

我找到了一个可行的解决方案.. 可能不是最好的，所以评论很受欢迎！

在我的**xml 文件中**

```
 <TextView
        android:id="@+id/info"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/info"
      />

    <LinearLayout
        android:id="@+id/take_test_progress_bar_linear_layout"
        android:layout_width="match_parent"
        android:layout_height="10dp"
        android:paddingLeft="20dp"
        android:paddingRight="20dp"
        android:layout_below="@+id/info"
        android:orientation="horizontal" >
    </LinearLayout>

    <TextView
        android:id="@+id/question"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/take_test_progress_bar_linear_layout"
        android:text="@string/stt1"
        /> 
```

在我的**活动**中：

```
oncreate(){
....

LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
for(int k=0; k<mTotalQuestionNum; k++)
{
    View v = new View(this);
    v.setBackgroundColor(Color.GRAY);

    params.weight = (float)1.0/( (float) mTotalQuestionNum);
    v.setLayoutParams(params);
    mProgressLayout.addView(v,k);

}
...
} 
```

然后，在处理答案时...

```
if(correct)
    mProgressLayout.getChildAt(mQuestionNum-1).setBackgroundColor(Color.GREEN);
else
    mProgressLayout.getChildAt(mQuestionNum-1).setBackgroundColor(Color.RED); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:31:59.937

正如 njzk2 在评论中所说， a`ProgressBar`不是该工作的正确组件。

我建议使用`LinearLayout`.

您可以根据需要以编程方式在其中添加任意`Views`数量的内容，使用权重进行相等的水平分布，并且您可以`Views`在用户处理您的问题时更改它们的背景颜色。

# jquery - 如何使用 twitter bootstrap popover 获取动态内容

> ID：15437332
> 
> 赞同：5
> 
> 时间：2013-03-15T16:21:28.920
> 
> 标签：jquery, google-maps, twitter-bootstrap, popover

我想在弹出窗口上显示谷歌地图

但是弹出窗口无法更改地图

仅在地图固定时有效

我的代码：

```
$(function(){

// getmap function from http://stackoverflow.com/questions/10545768/google-map-in-twitter-bootstrap-popver
var getMap = function(opts) {
  var src = "http://maps.googleapis.com/maps/api/staticmap?",
  params = $.extend({
    center: 'New York, NY',
    zoom: 14,
    size: '512x512',
    maptype: 'roadmap',
    sensor: false
  }, opts),
  query = [];

  $.each(params, function(k, v) {
query.push(k + '=' + encodeURIComponent(v));
  });

  src += query.join('&');
  return '<img src="' + src + '" />';
}

$('.map').click(function(){
    location = $(this).text();
    $("#map").html(getMap({center: location}));
    });

$('.map').popover({trigger:'click',placement:'left',html:true,content:function(){
    return $("#map").html();
    }});    

    }); 
```

我对这个功能的问题：

```
$('.map').click(function(){...}); 
```

单击链接（.map），因为#map已更改，弹出框已损坏且不起作用

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T20:29:21.680

我认为您不需要分两个单独的步骤来执行此操作（单击然后弹出窗口），也不需要 div 除非有您未提及的某些原因。这对我有用：

JavaScript：

```
$('.map').popover({trigger:'click',placement:'left',html:true,content:function(){
     return getMap({center: $(this).text()})
  }});    
}); 
```

`center: 'New York, NY',`然后，您可以从 getMap 参数中删除该行。

HTML：

```
<a href="#" class="map">New York, NY</a> 
```

如果您使用#map div 使弹出框更大，只需更改弹出框的 CSS，方法如下：

```
.popover { width: 512px; height: 512px; } 
```

我建议为此使用更具体的选择器，否则它会影响您网站上其他地方的弹出框。

# java - 如何告诉客户端新的 Redis 主服务器在哪里使用 Sentinel

> ID：15437334
> 
> 赞同：10
> 
> 时间：2013-03-15T16:21:36.400
> 
> 标签：java, redis, sentinel

好的，我觉得我错过了一些重要的信息。

在本地，我有 1 个主和 1 个从 redis 服务器在不同的端口上运行 [http://redis.io/topics/sentinel](http://redis.io/topics/sentinel)

我也有 3 个哨兵，他们似乎都知道彼此并按预期工作。

现在我有一大段java代码指向我的主redis服务器所在的127.0.0.1:6379。

如果我拿下主人，哨兵会按预期做任何事情，将奴隶提升为主人，所以现在新主人开始了

127.0.0.1:6380

我的问题是我的代码如何知道这一点并自动切换？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T16:26:37.623

您必须在他们的 pubsub 频道之一上订阅哨兵消息。您可以在您发布的链接中看到哨兵将发布消息，例如

```
+odown <instance details> -- The specified instance is now in Objectively Down state.
-odown <instance details> -- The specified instance is no longer in Objectively Down state.
+failover-takedown <instance details> -- 25% of the configured failover timeout has elapsed, but this sentinel can't see any progress, and is the new leader. It starts to act as the new leader reconfiguring the remaining slaves to replicate with the new master.
+failover-triggered <instance details> -- We are starting a new failover as a the leader sentinel. 
```

因此，当您在其中一个频道上看到哨兵发布时，您需要解析消息并让您的客户做出相应的响应。Redis 并不聪明——你必须使用客户端库来处理这些事情。

具体来说，最有用的渠道是

```
+odown
+failover-detected
+switch-master 
```

# javascript - Google Maps API 示例不起作用

> ID：15437338
> 
> 赞同：0
> 
> 时间：2013-03-15T16:21:51.353
> 
> 标签：javascript, html

我是使用 Google Maps API 的新手，我正在使用一些不起作用的 Google 文档的示例代码，我想知道是否有人可以帮助我解决为什么它对我不起作用？这是代码本身：`<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true" ></script>`

```
 <script>
  var directionDisplay;
  var directionsService = new google.maps.DirectionsService();
  var map;

  function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var chicago = new google.maps.LatLng(41.850033, -87.6500523);
    var mapOptions = {
      zoom:7,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: chicago
    }
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
    directionsDisplay.setMap(map);
  }

  function calcRoute() {
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;
    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  }
</script> 
```

这是HTML：

```
`  <body onload="initialize()">
<div>
<b>Start: </b>
<select id="start" onchange="calcRoute();">
  <option value="chicago, il">Chicago</option>
  <option value="st louis, mo">St Louis</option>
  <option value="joplin, mo">Joplin, MO</option>
  <option value="oklahoma city, ok">Oklahoma City</option>
  <option value="amarillo, tx">Amarillo</option>
  <option value="gallup, nm">Gallup, NM</option>
  <option value="flagstaff, az">Flagstaff, AZ</option>
  <option value="winona, az">Winona</option>
  <option value="kingman, az">Kingman</option>
  <option value="barstow, ca">Barstow</option>
  <option value="san bernardino, ca">San Bernardino</option>
  <option value="los angeles, ca">Los Angeles</option>
</select>
<b>End: </b>
<select id="end" onchange="calcRoute();">
  <option value="chicago, il">Chicago</option>
  <option value="st louis, mo">St Louis</option>
  <option value="joplin, mo">Joplin, MO</option>
  <option value="oklahoma city, ok">Oklahoma City</option>
  <option value="amarillo, tx">Amarillo</option>
  <option value="gallup, nm">Gallup, NM</option>
  <option value="flagstaff, az">Flagstaff, AZ</option>
  <option value="winona, az">Winona</option>
  <option value="kingman, az">Kingman</option>
  <option value="barstow, ca">Barstow</option>
  <option value="san bernardino, ca">San Bernardino</option>
  <option value="los angeles, ca">Los Angeles</option>
</select>
</div>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:32:07.267

你有元素来获取`start`和`end`值吗？当我从joliet到naperville时，此代码有效：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<style>
#map-canvas {height:500px;width:500px;}
</style>
</head>

<body onload="initialize()">
<div id="map-canvas"></div>
<div>
<b>Start: </b>
<select id="start" onchange="calcRoute();">
  <option value="chicago, il">Chicago</option>
  <option value="st louis, mo">St Louis</option>
  <option value="joplin, mo">Joplin, MO</option>
  <option value="oklahoma city, ok">Oklahoma City</option>
  <option value="amarillo, tx">Amarillo</option>
  <option value="gallup, nm">Gallup, NM</option>
  <option value="flagstaff, az">Flagstaff, AZ</option>
  <option value="winona, az">Winona</option>
  <option value="kingman, az">Kingman</option>
  <option value="barstow, ca">Barstow</option>
  <option value="san bernardino, ca">San Bernardino</option>
  <option value="los angeles, ca">Los Angeles</option>
</select>
<b>End: </b>
<select id="end" onchange="calcRoute();">
  <option value="chicago, il">Chicago</option>
  <option value="st louis, mo">St Louis</option>
  <option value="joplin, mo">Joplin, MO</option>
  <option value="oklahoma city, ok">Oklahoma City</option>
  <option value="amarillo, tx">Amarillo</option>
  <option value="gallup, nm">Gallup, NM</option>
  <option value="flagstaff, az">Flagstaff, AZ</option>
  <option value="winona, az">Winona</option>
  <option value="kingman, az">Kingman</option>
  <option value="barstow, ca">Barstow</option>
  <option value="san bernardino, ca">San Bernardino</option>
  <option value="los angeles, ca">Los Angeles</option>
</select>
</div>`
        <script>
  var directionDisplay;
  var directionsService = new google.maps.DirectionsService();
  var map;

  function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var chicago = new google.maps.LatLng(41.850033, -87.6500523);
    var mapOptions = {
      zoom:7,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: chicago
    }
    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
    directionsDisplay.setMap(map);
  }

  function calcRoute() {
    var start = document.getElementById('start').value;
    var end = document.getElementById('end').value;
    var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  }
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:54:05.753

在结束组合框的 div 之后，似乎也有一个错误的 `。不会造成伤害，但不属于。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:27:39.837

需要调用 initialize() 函数。它可以在这样的`<body>`标签中：

```
<body onload="initialize();"> 
```

# java - Java：HashMap 大小是“素数”还是“2 的幂”？

> ID：15437345
> 
> 赞同：31
> 
> 时间：2013-03-15T16:22:14.793
> 
> 标签：java, hash, hashmap, hashtable, hashcode

许多书籍和教程都说哈希表的大小必须是一个素数，才能在所有桶中均匀分布密钥。但是 Java`HashMap`总是使用 2 的幂的大小。不应该使用素数吗？哪个更好，“素数”或“2 的幂”作为哈希表大小？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-15T16:23:41.650

使用 2 的幂有效地掩盖了哈希码的最高位。因此，质量差的散列函数在这种情况下可能表现得特别差。

Java通过不信任对象的实现并[对其结果应用第二级散列来](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#256)`HashMap`缓解这种情况：`hashCode()`

> 对给定的 hashCode 应用补充散列函数，以防止质量差的散列函数。这很关键，因为 HashMap 使用长度为二的幂的哈希表，否则会遇到低位没有差异的 hashCode 的冲突。

如果你有一个好的散列函数，或者做一些类似的事情`HashMap`，你是否使用素数等作为表大小都没有关系。

另一方面，如果散列函数未知或质量差，那么使用质数将是更安全的选择。但是，它会使动态大小的表格难以实现，因为突然之间，您需要能够生成素数，而不是仅仅将大小乘以一个常数因子。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T16:24:43.690

标准的 HashMap 实现有一个`hash`方法可以重新散列对象的哈希码以避免这种陷阱。[方法前](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/HashMap.java#255)[的`hash()`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/HashMap.java#255)注释如下：

```
/**
 * Retrieve object hash code and applies a supplemental hash function to the
 * result hash, which defends against poor quality hash functions.  This is
 * critical because HashMap uses power-of-two length hash tables, that
 * otherwise encounter collisions for hashCodes that do not differ
 * in lower bits. Note: Null keys always map to hash 0, thus index 0.
 */ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-15T16:36:30.757

了解素数和二次幂之间哪个更好的唯一方法是对其进行基准测试。

许多年前，在编写一个性能强烈依赖于符号表查找的汇编程序时，我使用大量生成的标识符对其进行了测试。即使使用简单的映射，我发现与预期的一样，与类似大小的素数桶相比，二次幂的分布更不均匀，链更长。由于位掩码的桶选择速度，它仍然运行得更快。

我强烈怀疑 java.util 开发人员不会使用额外的散列和二次幂，而不是针对使用质数桶进行基准测试。在设计散列数据结构时，这是一件非常明显的事情。

出于这个原因，我确信 rehash 和二次幂大小为典型的 Java 哈希映射提供了比质数桶更好的性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T16:27:47.247

从性能/计算时间的角度来看，可以仅使用位掩码来计算二次方大小，这比否则需要的整数除法更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-08T14:41:22.847

如果您使用[二次探测](http://en.wikipedia.org/wiki/Quadratic_probing)来解决冲突，您可能应该使用素数大小的哈希表。如果您有一个素数大小的表，二次探测将命中一半的条目，如果不是素数则更少。因此，即使您的哈希表未满一半，您也可能找不到合适的位置来存储您的条目。由于 Java 哈希映射不使用二次探测，因此不需要使用素数作为大小。

# java - 如何在java中设置存储唯一数据

> ID：15437351
> 
> 赞同：0
> 
> 时间：2013-03-15T16:22:32.150
> 
> 标签：java, set

我想知道如何在java中设置存储唯一数据而不是重复值？设置存储数据时是否有任何机制

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:29:30.493

`java.util.Set#add(E)`内部调用`jav.util.Map#put(K,V)`将您尝试添加的元素作为键传递，其中它检查当前集合中是否存在与**键的** 哈希码具有相同哈希码的元素（其中键是您尝试插入的元素）并且它还检查是否相等使用 equals() 方法。它只在哈希码或相等测试失败时添加到 Set。如果哈希码和相等测试都通过，那么它只是用当前值替换旧值。下面是 Set#add() 和 Map#put() 的来源。

[**设置#add(E)**](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashSet.java#HashSet.add%28java.lang.Object%29)

```
public boolean add(E e) {
217        return map.put(e, PRESENT)==null;
218    } 
```

[**地图#put(K,V)**](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap.put%28java.lang.Object,java.lang.Object%29)

```
 public V put(K key, V value) {
387         if (key == null)
388             return putForNullKey(value);
389         int hash = hash(key.hashCode());
390         int i = indexFor(hash, table.length);
391         for (Entry<K,V> e = table[i]; e != null; e = e.next) {
392             Object k;
393             if (e.hash == hash && ((k = e.key) == key || key.equals(k))) {
394                 V oldValue = e.value;
395                 e.value = value;
396                 e.recordAccess(this);
397                 return oldValue;
398             }
399         }
400 
401         modCount++;
402         addEntry(hash, key, value, i);
403         return null;
404     } 
```

# sql - 从 sql server 2005 中的字符串转换日期时间时出错

> ID：15437352
> 
> 赞同：0
> 
> 时间：2013-03-15T16:22:33.450
> 
> 标签：sql, sql-server

我在传递日期参数时遇到问题。

我收到错误

> *从字符串转换日期时间时转换失败。*

我的存储过程如下，请告诉我该怎么做，

```
ALTER PROCEDURE [dbo].[WEEKLY_REPORT_PROC](
    @START_DATE DATETIME,
    @END_DATE     DATETIME,@PRACTISE_NAME NVARCHAR(MAX))--,
    -- @D1 DECIMAL(5,2),
    -- @D2 DECIMAL(5,2),
    -- @D3 DECIMAL(5,2),
    -- @D4 DECIMAL(5,2),
    -- @D5 DECIMAL(5,2),
    -- @D6 DECIMAL(5,2),
    -- @D7 DECIMAL(5,2))
AS 
BEGIN

EXEC SP_EXECUTESQL @QUERY

DECLARE CP_DETAILS CURSOR FOR SELECT * FROM #TEMP

OPEN CP_DETAILS
FETCH NEXT FROM CP_DETAILS INTO     @RESOURCE_NAME,@DAY1,@DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7,@UTILIZATION

WHILE (@@FETCH_STATUS =0)
BEGIN
    SET @UTILIZATION = dbo.UTILIZATION(@START_DATE,@END_DATE,@DAY1,                                         @DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7)
    --INSERT INTO @WEEKLY_REPORT_DETAILS_INFORMATION VALUES(@RESOURCE_NAME,
    --          @DAY1,@DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7,@UTILIZATION)
    UPDATE #TEMP SET UTILIZATION = @UTILIZATION WHERE RESOURCE_NAME=@RESOURCE_NAME

    FETCH NEXT FROM CP_DETAILS INTO @RESOURCE_NAME,@DAY1,@DAY2,@DAY3,@DAY4,@DAY5,@DAY6,@DAY7
END
CLOSE CP_DETAILS
DEALLOCATE CP_DETAILS
SELECT * FROM #TEMP
--SELECT DBO.RETRIEVE(@QUERY) AS QUERY FROM CP_DETAILS
PRINT @QUERY
DROP TABLE #TEMP
RETURN 
END 
END 
```

在中间我使用一个用户定义的函数`utilization`，并将参数作为日期字段传递

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T18:34:34.520

尝试...

```
DECLARE @startdate varchar(30), @enddate varchar(30)

SET @startdate = CONVERT(varchar(10), '2012-03-31', 101)
SET @enddate = CONVERT(varchar(10),'2012-04-06', 101)

EXEC WEEKLY_REPORT_PROC @startdate, @enddate,'CS' 
```

您的问题是您传入的内容： YYY-MM-dd 不会被 SQL 自动转换为日期时间，如“MM/dd/YYYY”，将其转换为 101 格式应该可以解决您的问题。

# map - 创建在配色方案中正确显示分位数类范围值和相关颜色的等值线图图例？

> ID：15437354
> 
> 赞同：3
> 
> 时间：2013-03-15T16:22:36.487
> 
> 标签：map, d3.js, legend, colorbrewer

我是一名新手程序员，试图制作交互式等值线图。在这里获得了几个问题的帮助后，最后一个大问题是地图图例不正确。图例应为每个分位数类别显示不同的颜色，但到目前为止，将最暗的颜色与第二大类别相关联（而不是仅用于最大类别），然后为最大类别重复该颜色。此外，对于大多数可用的分位数选择选项，图例中没有最浅的阴影。这是一个[屏幕截图](http://s1299.beta.photobucket.com/user/geomapper123/media/MapLegendInfoIncorrect_zps84a42132.png.html)，显示所有颜色范围（示例中为 5 个类别）在地图本身上正确显示，但在图例上显示不正确。

我认为问题出在以下代码中，尤其是在标题“根据下拉菜单中的选择计算分位数并更新图例”下的最后一个长代码块中。我想知道将值标签添加到图例的方式是否有问题，这可能会混淆颜色的关联方式。任何见解将不胜感激！

下拉菜单：

```
 <div id="mapcontrols" style="position:absolute; top: 35px; left:625px;">
    <div>
        <p>Data to map:
        <select id="NumerSelection" class="MainData" style="width:225px;">
        <option value="d.OneFill" selected>Inverse (numerator set to 1)</option>
        <option value="d.pop11">County Population, July 2011</option>
        <option value="d.Members">Total Enrollees</option>
        <option value="d.Patients">Total Patients</option>
        <option value="d.MemberMonths">Member-months of Enrollment</option>
        <option value="d.AvgMembers">Average Number of Enrollees</option>

        <option value="d.id">County ID</option>
        </select></p>
        <p>Denominator:         
        <select id="DenomSelection" class="MainData" style="width:225px;">
        <option value="d.OneFill" selected>raw rate</option>
        <option value="d.pop11">County Population, July 2011</option>
        <option value="d.Members">Total Enrollees</option>
        <option value="d.Patients">Total Patients</option>
        <option value="d.MemberMonths">Member-months of Enrollment</option>
        <option value="d.AvgMembers">Average Number of Enrollees</option>
        <option value="d.id">County ID</option>
        </select></p>

        <p>Color Scheme: 
        <select id="ColorSelection">
        <option value="Blues" selected>Blues</option>
        <option value="Greys">Greys</option>
        <option value="Greens">Greens</option>
        <option value="Oranges">Oranges</option>
        <option value="Reds">Reds</option>
        <option value="Purples">Purples</option>
        <option value="YlGn">Yellow-Green</option>
        <option value="YlGnBu">Yellow-Green-Blue</option>
        <option value="GnBu">Green-Blue</option>
        <option value="BuGn">Blue-Green</option>
        <option value="PuBuGn">Purple-Blue-Green</option>
        <option value="PuBu">Purple-Blue</option>
        <option value="BuPu">Blue-Purple</option>
        <option value="RdPu">Red-Purple</option>
        <option value="PuRd">Purple-Red</option>
        <option value="OrRd">Orange-Red</option>
        <option value="YlOrRd">Yellow-Orange-Red</option>
        <option value="YlOrBr">Yellow-Orange-Brown</option>
        </select></br>

        Number of quantiles:            
        <select id="TileSelection" class="MainData"">
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5" Selected>5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        </select></p>
    </div>
    <div id="legenddiv"><p>Legend:</p></div>
    </div> 
```

设置图例 SVG 和默认配色方案：

```
 var LegendContainer = d3.select('div#legenddiv')
.append('svg')
.attr('width', 100) 
.attr('height', 300)
.attr('id', 'Legendsvg')
.attr('class', 'Blues')
; 
```

根据从配色方案下拉菜单中的选择同时更新地图多边形的配色方案以及图例框：

```
 d3.select("select#ColorSelection")
.on("keyup", function() {d3.selectAll("svg#Mapsvg, svg#Legendsvg").attr("class", this.value)})
.on("change", function() {d3.selectAll("svg#Mapsvg, svg#Legendsvg").attr("class", this.value)}); 
```

格式化要显示的值：

```
 function makenice(d) {
if(d==0){return 0;}
dec = Math.ceil(Math.log(d < 0 ? -d: d)/Math.log(10))
magnitude = Math.pow(10,3-dec)
n = Math.round(d*magnitude)/magnitude

if(dec>3){ d= numeral(n).format('0,0.[0]');}
    else{ d = numeral(n).format('0.00[0000000000]');}

return d
}; 
```

从外部 CSV 文件中获取数据：

```
 d3.csv('testdata.csv', function(data)
{
    ... 
```

根据下拉菜单中的选择计算分位数并更新图例：

```
 d3.selectAll('select.MainData').on('change', function() {

    var Nu = document.getElementById('NumerSelection')
        Numer = Nu.options[Nu.selectedIndex].value;

    var Nd = document.getElementById('DenomSelection')
        Denom = Nd.options[Nd.selectedIndex].value;

    var Qt = document.getElementById('TileSelection')
        ntiles = Qt.options[Qt.selectedIndex].value;

    var DataArray =(data.map(function(d, i) {return +eval(Numer) / +eval(Denom);})).sort(function(a,b){return a-b});

    //set up quantiles
    var quants = d3.scale.quantile()
        .domain(DataArray)
        .range(d3.range(0,ntiles).map(function(i) {return 'q' + i + '-' + ntiles;}))
        ;

    var legendquant = quants.copy();

    //regenerate values for legend
    var legend = legendquant.quantiles();
        legend.unshift(d3.min(DataArray));
        legend.push(d3.max(DataArray));
        legend.reverse();

    //Create the legend
    var delabeltext = d3.select('svg#Legendsvg').selectAll('text').remove();
    var delabelboxes = d3.select('svg#Legendsvg').selectAll('rect').remove();

    console.log(legend)
    var legends = d3.select('svg#Legendsvg')
    var legendbars = legends.selectAll('text')
        .data(legend)
        .enter()
        .append('text')
        .attr('x', 40) 
        .attr('y', function(d, i) {return (i*30+30)})
        .text(function (d) {return d})
        ;

    legend.pop();
    legend.reverse();

    if (Nu.options[Nu.selectedIndex].text != 'Inverse (numerator set to 1)') {
       legend.reverse(); }

    var legends = d3.select('svg#Legendsvg')
    var legendbars = legends.selectAll('rect')
        .data(legend)
        .enter()
        .append('rect')
        .attr('x', 5)
        .attr('y', function(d, i) {return (i*30)+25})
        .attr('height',28)
        .attr('width',30)
        .attr('class', function (d) {return quants(d)} )
        ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:13:37.587

分位数刻度的`quantiles()`方法返回每个分位数的阈值（请参阅[文档](https://github.com/mbostock/d3/wiki/Quantitative-Scales#wiki-quantile_quantiles)）。去引用，

> 在第一个分位数中考虑小于阈值数组中第一个元素 quantiles()[0] 的值...

这意味着阈值将映射到上面的相应间隔。在您的情况下发生的是您传入最后一个分位数阈值，该阈值映射到最高分位数，然后是最大值，该最大值也映射到最高分位数。

解决此问题的最简单方法可能是删除第一个元素，而不是删除图例数组 ( `legend.pop()`) 的最后一个元素。也就是说，只需交换弹出最后一个元素的行并反转数组。

# java - TableModel，导致 Java JFrame 中出现重复的数据库信息

> ID：15437355
> 
> 赞同：0
> 
> 时间：2013-03-15T16:22:37.827
> 
> 标签：java, swing, jdbc, jframe, tablemodel

当用户按下按钮“加载文件”时，我在 JFrame 中设置了这个方法；但是，当用户第二次按下按钮时。. . 他们在第一个表格下方获得了另一个表格，因此所有信息都被复制，并且超出了我的“不可调整大小”框架。

无论用户按下按钮多少次，我怎样才能让它只加载一张桌子？

```
 JButton btnLoad = new JButton("Load File")

private void GetAction()
{
    ActionHandler handler = new ActionHandler();
    btnLoad.addActionListener(handler);
}

    private class ActionHandler implements ActionListener
{       
    public void actionPerformed(ActionEvent evt) 
    {
        String incmd = evt.getActionCommand();
        if (incmd.equals("Load File")) // If Load File button is pressed
            DatabaseLoad();
        else if (incmd.equals("Exit")) // If Exit button is pressed
            System.exit(0);  
    }
}
    private void DatabaseLoad()
    {
        try 
        {
            // The driver allows you to query the database with Java
            // forName dynamically loads the class for you           
            Class.forName("com.mysql.jdbc.Driver");

            // DriverManager is used to handle a set of JDBC drivers
            // getConnection establishes a connection to the database
            // You must also pass the userid and password for the database            
            String url = "jdbc:mysql://localhost:3306/charity";
            conn = DriverManager.getConnection (url,"root","password");

            // Statement objects executes a SQL query
            // createStatement returns a Statement object            
            Statement sqlState = conn.createStatement();

            // This is the query I'm sending to the database
            String selectStuff = "SELECT `name`, `charity`, `amount` FROM `charity`.`donations` ";                  

            // A ResultSet contains a table of data representing the
            // results of the query. It can not be changed and can 
            // only be read in one direction            
            rows = sqlState.executeQuery(selectStuff);

            // Temporarily holds the row results            
            Object[] tempRow;

            // next is used to iterate through the results of a query            
            while(rows.next()){

            // Gets the column values based on class type expected
            tempRow = new Object[]{rows.getString(1), rows.getString(2), rows.getDouble(3) };

            // Adds the row of data to the end of the model             
            dTableModel.addRow(tempRow);                

        }
            // Successfully loaded, message the user
            message1.setText("<html><font color='red'>Database Info Loaded</font>");
            message2.setText("");
    } 
        catch (SQLException ex) 
        {            
            // String describing the error          
            System.out.println("SQLException: " + ex.getMessage());

            // Vendor specific error code            
            System.out.println("VendorError: " + ex.getErrorCode());
        } 
        catch (ClassNotFoundException e) 
        {
            // Executes if the driver can't be found
            System.out.println("Driver Cannot be found");
            e.printStackTrace();
        }

        // Create a JTable using the custom DefaultTableModel       
        JTable table = new JTable(dTableModel);

        // Increase the font size for the cells in the table        
        table.setFont(new Font("Serif", Font.PLAIN, 16));

        // Increase the size of the cells to allow for bigger fonts        
        table.setRowHeight(table.getRowHeight()+5);

        // Allows the user to sort the data     
        table.setAutoCreateRowSorter(true);

        // right justify amount column
        TableColumn tc = table.getColumn("amount");
        RightTableCellRenderer rightRenderer = new RightTableCellRenderer();
        tc.setCellRenderer(rightRenderer);      

        // Disable auto resizing
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);

        // Set the width for the columns        
        TableColumn col1 = table.getColumnModel().getColumn(0);
        col1.setPreferredWidth(200);

        TableColumn col2 = table.getColumnModel().getColumn(1);
        col2.setPreferredWidth(275);

        TableColumn col3 = table.getColumnModel().getColumn(2);
        col3.setPreferredWidth(75);     

        // Put the table in a scrollpane and add scrollpane to the frame          
        JScrollPane scrollPane = new JScrollPane(table);
        scrollPane.setPreferredSize(new Dimension(552, 400));
        this.add(scrollPane, BorderLayout.CENTER);
    }   

    // To change justification to the right
    class RightTableCellRenderer extends DefaultTableCellRenderer {   
          public RightTableCellRenderer() {  
            setHorizontalAlignment(JLabel.RIGHT);  
        }           
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:08:40.703

> 无论用户按下按钮多少次，我怎样才能让它只加载一张桌子？

当您构建 GUI 组件时，应该只创建一次表格和滚动窗格。然后，当您要更改数据时，只需更改现有表的模型：

```
table.setModel( updatedModel ); 
```

# jquery - img 类型的参数

> ID：15437359
> 
> 赞同：0
> 
> 时间：2013-03-15T16:22:53.513
> 
> 标签：jquery, parameter-passing, image

我有一个在屏幕上移动的主图像，还有一个`isOverlap`检查两个图像是否完全重叠的功能。目前，我必须单独调用具有不同参数的方法，具体取决于其他对象的类，例如`isOverlap("#mainObj", ".secondObject);`.

我想知道，有没有办法将类型的通用输入`img`（不管类）传递给函数？喜欢`isOverlap("#mainObj", "<img>");`？

***编辑***这里是 jsFiddle 链接[http://jsfiddle.net/Zeaklous/zpThx/1/](http://jsfiddle.net/Zeaklous/zpThx/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:29:27.973

为什么不使用包含所有可能图像的通用选择器？

```
isOverlap('#mainObj', 'img') 
```

在您的 isOverlap 函数内部，您只需要遍历所有找到的图像。

这只会找到一个具有给定 id 的对象：

```
$('#mainObj') 
```

这会找到所有 img-tags：

```
$('img') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:29:52.553

如果我理解正确你想使用元素选择器：[http ://api.jquery.com/element-selector/](http://api.jquery.com/element-selector/)

你的例子是：

```
 isOverlap("#mainObj", "img"); 
```

# android - 从资产设置壁纸

> ID：15437362
> 
> 赞同：2
> 
> 时间：2013-03-15T16:23:04.750
> 
> 标签：android, assets, wallpaper

当我尝试从资产设置墙纸时，完成工作需要时间所以也许有更简单的方法而不是我的硬代码

```
public void Setwallpaper(int position , Context context) throws IOException{    
    AssetManager am = mContext.getAssets();
    nlist = am.list("Gallary");
     BufferedInputStream buf = new BufferedInputStream(am.open(nlist[position]));
     bitmap = BitmapFactory.decodeStream(buf);

     buf.close();
    WallpaperManager myWallpaperManager = WallpaperManager
            .getInstance(context);
    try {
        myWallpaperManager.setBitmap(bitmap);
        Toast.makeText(context, "Wallpaper set",
                0).show();
    } catch (IOException e) {
        Toast.makeText(context,
                "Error setting wallpaper", Toast.LENGTH_SHORT)
                .show();
    }
} 
```

完成它需要大约 3 秒，而我已经看到其他应用程序能够在不到一秒的时间内完成它任何建议我将不胜感激谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:29:02.987

尝试这个

```
 WallpaperManager myWallpaperManager =WallpaperManager.getInstance(getApplicationContext());
    InputStream ims = getAssets().open("yourimage.jpg");
    myWallpapaerManager.setStream(ims) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T06:05:48.803

上面的例子有效，不要忘记添加权限

# c# - 选择一个值后，Winforms 组合框更改显示文本

> ID：15437364
> 
> 赞同：0
> 
> 时间：2013-03-15T16:23:06.703
> 
> 标签：c#, winforms, combobox

我有一个可编辑的组合框绑定到 Winform 应用程序中的列表。

```
public class Address
    {
        public string DisplayText { get; set; }
        public string DropDownText { get; set; }
    } 
```

我想在用户展开组合框时显示 DropDownText，但我想在用户选择下拉项后将 DisplayText 显示为组合框的文本。

我可以通过使用 TextSearch.SetTextPath 属性在 WPF 中执行此操作。Winforms可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:56:27.337

找到了答案：

```
private void comboBox1_SelectionChangeCommitted(object sender, EventArgs e)
{
    var value = comboBox1.SelectedValue.ToString();
    BeginInvoke(new MethodInvoker(delegate()
    {
        comboBox1.Text = value;
    }));
} 
```

# java - Java：为什么这个线程已经持有锁还要等待？

> ID：15437366
> 
> 赞同：0
> 
> 时间：2013-03-15T16:23:08.653
> 
> 标签：java, multithreading, osgi

这是来自转储的单个线程，说明了该问题。没有其他线程持有锁 0x00000007d7f78430 但它仍在等待。

```
"main" prio=6 tid=0x000000000033b800 nid=0x2478 in Object.wait() [0x000000000257d000]          java.lang.Thread.State: TIMED_WAITING (on object monitor)
at java.lang.Object.wait(Native Method)
- waiting on <0x00000007d7f78430> (a org.osgi.util.tracker.ServiceTracker$AllTracked)
at org.osgi.util.tracker.ServiceTracker.waitForService(ServiceTracker.java:456)
- locked <0x00000007d7f78430> (a org.osgi.util.tracker.ServiceTracker$AllTracked)
at org.apache.camel.test.blueprint.CamelBlueprintHelper.getOsgiService(CamelBlueprintHelper.java:190)
at org.apache.camel.test.blueprint.CamelBlueprintHelper.getOsgiService(CamelBlueprintHelper.java:165)
at org.apache.camel.test.blueprint.CamelBlueprintTestSupport.createCamelContext(CamelBlueprintTestSupport.java:116)
at org.apache.camel.test.junit4.CamelTestSupport.doSetUp(CamelTestSupport.java:247)
at org.apache.camel.test.junit4.CamelTestSupport.setUp(CamelTestSupport.java:217)
at org.apache.camel.test.blueprint.CamelBlueprintTestSupport.setUp(CamelBlueprintTestSupport.java:50)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:31:54.863

看一下[org.osgi.util.tracker.ServiceTracker.waitForService(long timeout)](http://www.osgi.org/javadoc/r4v42/org/osgi/util/tracker/ServiceTracker.html#waitForService%28long%29)方法。

您将看到它旨在：

> 等待此 ServiceTracker 至少跟踪一项服务。

所以这不是锁争用 - 底层系统正在使用锁来等待东西 - 在大多数情况下这实际上是一个非常好的主意。

# php - 为什么 PHP 在输出时转换 15+ 位长整数

> ID：15437372
> 
> 赞同：9
> 
> 时间：2013-03-15T16:23:26.727
> 
> 标签：php, integer

为什么`echo 100000000000000;`输出`1.0E+14`而不是`100000000000000`？

这种输出整数的*转换*只发生在 15 位或更长的整数上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T16:31:03.553

如果整数大于 PHP_INT_MAX，PHP 会将整数转换为浮点数。对于 32 位系统，这是 2147483647。

问题的答案与 PHP 中浮点数的字符串表示有关。

[如果科学计数法](http://en.wikipedia.org/wiki/Scientific_notation)中的指数大于`13`或小于`-4`，PHP 将在打印浮点数时使用科学表示。

例子：

```
echo 0.0001; // 0.0001;

echo 0.00001; // 1.0E-5

// 14 digits
echo 10000000000000; // 10000000000000

// 15 digits
echo 100000000000000; // 1.0E+14 
```

请参阅[浮点与双精度](https://stackoverflow.com/questions/5098558/float-vs-double-precision)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T16:25:17.670

该数字太大而无法放入 32 位整数，因此 PHP 将其存储在浮点数中。

[请参阅php 手册](http://php.net/manual/en/language.types.integer.php)中的整数溢出部分。

如果您需要非常大的整数，请查看[GMP](http://www.php.net/manual/en/book.gmp.php)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T16:25:28.270

PHP 无法处理那么大的整数，因此将它们视为浮点数。浮点数通常以科学记数法表示，以考虑超过一定数量的有效数字的不准确性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T16:31:34.840

该数字太大而无法在您的平台上通过 PHP 存储为整数，因此将其存储为浮点数。浮点数和整数转换为字符串的规则不同。

尝试以下操作：

```
var_dump(100000000000000);
echo(is_int(100000000000000) ? 'an integer' : 'not an integer'); 
```

输出：

```
float(1.0E+14) 
not an integer 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T16:26:15.330

任何大于 PHP 内置整数大小的数字都被存储并表示为浮点数。

要在输出中以特定方式格式化数字，请使用诸如`printf`.

# vb.net - 格式化或填充 DataGridView 控件中的数字列 (DefaultCellStyle.Format)

> ID：15437373
> 
> 赞同：1
> 
> 时间：2013-03-15T16:23:29.230
> 
> 标签：vb.net, winforms, datagridview

我的表单上有一个 DatagridView 控件。

第一列是记录 ID，它可以在 db 上介于 3 到 5 位之间，但应在前端格式化为 5 位数字，并带有填充零/前导零。

所以它看起来像**901**，我希望它看起来像**00901**

我看着

*   [MSDN 库：如何：在 Windows 窗体 DataGridView 控件中格式化数据](http://msdn.microsoft.com/en-us/library/f9x2790s.aspx)

和

*   [MSDN 库：如何：在 Windows 窗体 DataGridView 控件中自定义数据格式](http://msdn.microsoft.com/en-us/library/z1cc356h.aspx)

我试过了：

```
dgvDeletedRecords.Columns(0).DefaultCellStyle.Format = "00000" 
```

在数据加载到网格后在我的表单加载事件中

但它不起作用。

请问我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:25:33.447

尝试以下操作；

```
dgvDeletedRecord.Columns(0).DefaultCellStyle.Format = "{0:N4}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:45:25.140

试试这个数字格式“#####00000”我用过的测试代码：

```
Me.RichTextBox.Text &= String.Format("{0:#####00000}",123)
Me.RichTextBox.Text &= Environment.NewLine
Me.RichTextBox.Text &= String.Format("{0:#####00000}",12345) 
```

在 RichTextBox 中测试，但确定相同的格式适用`DefaultCellStyle.Format`

```
 dgvDeletedRecord.Columns(0).DefaultCellStyle.Format = "#####00000" 
```

在格式字符串中，“#”-sign 告诉如何显示糊状数字（前缀零不显示）然后“0”-sign 告诉如何显示糊状零，这里将显示前缀零

[MSDN 号码格式](http://msdn.microsoft.com/en-US/library/0c899ak8%28v=vs.80%29.aspx)

# sockets - 促进 io_service 停止？

> ID：15437376
> 
> 赞同：1
> 
> 时间：2013-03-15T16:23:37.923
> 
> 标签：sockets, boost-asio, boost-thread

我正在开发一个 NPAPI 插件，它允许在浏览器内部使用本地套接字，我正在为此使用 Boost 套接字。

我现在的用法只是打开套接字写入消息，读取，发送关闭消息并关闭然后重复（我知道每次关闭和打开都很愚蠢，但我无法更改）。

问题是在第二次打开后我无法从套接字读取，直到 las 更改我能够打开写入但从未得到信息，现在看来 io_service 线程正在死去。

我已经阅读了很多教程和信息，但似乎没有人像我试图做的那样打开多个客户端套接字。

这是存储套接字信息和处理程序的类：

套接字信息.hpp

```
class SocketInfo
{
public:
    void start_read();
    void handle_read(const boost::system::error_code& error, std::size_t bytes_transferred);

    FB::JSObjectPtr m_callback;
    boost::shared_ptr<boost::asio::ip::tcp::socket> m_socket;
    char data_[SOCKETS_API_BUFFER];
    int key;
    boost::shared_ptr<SocketsAPI> parent;
}; 
```

套接字信息.cpp

```
void SocketInfo::start_read()
{
    parent->log("start_read" + boost::lexical_cast<std::string>(key));
    m_socket->async_receive(boost::asio::buffer(data_, SOCKETS_API_BUFFER),
        boost::bind(&SocketInfo::handle_read, this, 
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));
}

void SocketInfo::handle_read(const boost::system::error_code& error,
        std::size_t bytes_transferred)
{
    if (!error) {
        parent->log("handle_read" + boost::lexical_cast<std::string>(key));
        std::string str(&data_[0], &data_[0] + bytes_transferred);
        m_callback->InvokeAsync("processData", FB::variant_list_of(str));
        start_read();
    } else {
        parent->log("error closing " + boost::lexical_cast<std::string>(key));
        m_callback->InvokeAsync("processCancel", FB::variant_list_of());
        parent->do_close(*this);
    }
} 
```

套接字API.h

```
class SocketsAPI : public FB::JSAPIAuto
{
public:
    SocketsAPI(const SocketsPtr& plugin, const FB::BrowserHostPtr& host) :
        m_plugin(plugin), m_host(host)          
    {
... FireBreath code here ...

        //Start thread with work
        workPtr.reset( new boost::asio::io_service::work(io_service));
        ioThreadPtr.reset(new boost::thread(boost::bind(&boost::asio::io_service::run, &io_service)));

    }

    virtual ~SocketsAPI() {
        workPtr.reset();
        if (ioThreadPtr) {
            ioThreadPtr->join();
        }
    };

    //Socket Methods
    int open(const int port, const FB::JSObjectPtr &callback );
    void close(const int key);
    void write(const int key, const std::string data);

    // Method echo
    FB::variant echo(const FB::variant& msg);
    void do_close(const SocketInfo socket);
    void log(const std::string &str);

private:

    mapType sockets;

    boost::asio::io_service io_service;
    boost::shared_ptr<boost::thread> ioThreadPtr;
    boost::shared_ptr<boost::asio::io_service::work> workPtr;

    void checkOpen(const SocketInfo socket);
    void do_write(const std::string data, const SocketInfo socket);
    void start_read(const SocketInfo socket);
    void empty_handle(const boost::system::error_code& error);
    int getFirstEmpty();
    SocketInfo getSocket(const int key);
}; 
```

套接字API.cpp

```
int SocketsAPI::open(const int port, const FB::JSObjectPtr &callback )
{
    log("open");
    boost::shared_ptr<SocketInfo> socket;
    socket.reset(new SocketInfo);
    socket->m_socket.reset(new boost::asio::ip::tcp::socket(io_service));
    socket->m_callback = callback;
    ip::tcp::endpoint tcp(ip::address::from_string("127.0.0.1"), port);

    boost::system::error_code errorcode;
    socket->m_socket->connect(tcp, errorcode);
    if (errorcode) {
        trace("Connection failed: ", errorcode.message());
        return -1;
    }
    log("conenected");
    boost::asio::socket_base::keep_alive o(true);
    socket->m_socket->set_option(o);
    int key = getFirstEmpty();
    socket->key = key;
    socket->parent.reset(this);
    sockets.insert ( std::pair<int,boost::shared_ptr<SocketInfo>>(key,socket));
    socket->start_read();
    if (io_service.stopped()) {
        log("Resetting service");
        io_service.reset();
    }
    return key;
}

void SocketsAPI::close(const int key)
{
    SocketInfo socket = getSocket(key);
    checkOpen(socket);
    log("close");
    io_service.post(boost::bind(&SocketsAPI::do_close, this, socket));
}

void SocketsAPI::write(const int key, const std::string data)
{
    log("write socket " + boost::lexical_cast<std::string>(key));
    SocketInfo socket = getSocket(key);
    checkOpen(socket);
    io_service.post(boost::bind(&SocketsAPI::do_write, this, Base64::decode(data), socket));
}

void SocketsAPI::checkOpen(const SocketInfo socket)
{
    log("checkOpen");
    if (!socket.m_socket || !socket.m_socket->is_open()) {
        trace("Socket not opened", "");
        throw FB::script_error("There is no open socket");
    }
}

void SocketsAPI::do_write(const std::string data,
                            const SocketInfo socket)
{
    log("do_write " + boost::lexical_cast<std::string>(socket.key));
    if (!socket.m_socket->is_open()) {
        return;
    }
    boost::asio::async_write(*(socket.m_socket.get()),
        boost::asio::buffer(&data[0], data.size()),
        boost::bind(&SocketsAPI::empty_handle, this, boost::asio::placeholders::error)
    );
}

void SocketsAPI::empty_handle(const boost::system::error_code& error)
{
    if (error) {
        trace("Error writing: ", error.message());
    }
}

void SocketsAPI::do_close(const SocketInfo socket)
{
    log("do_close");
    if (!socket.m_socket || !socket.m_socket->is_open()) {
        return;
    }   
    boost::system::error_code errorcode;
    socket.m_socket->shutdown(boost::asio::ip::tcp::socket::shutdown_both, errorcode);
    if (errorcode) {
        trace("Closing failed: ", errorcode.message());
    }
    socket.m_socket->close(errorcode);
    if (errorcode) {
        trace("Closing2 failed: ", errorcode.message());
    }
    mapType::iterator iter = sockets.find(socket.key);
    if (iter != sockets.end()) {
        sockets.erase (iter);
    }
    log("do_close end");
}

int SocketsAPI::getFirstEmpty() {
    int i = 0;
    mapType::iterator iter;
    while(true) {
        iter = sockets.find(i);
        if (iter == sockets.end()) {
            return i;
        }
        i++;
    }
}

SocketInfo SocketsAPI::getSocket(const int key) {
    mapType::iterator iter = sockets.find(key);
    if (iter == sockets.end()) {
        trace("Socket not found", "");
        throw FB::script_error("Socket not found");
    }
    log("socket " + boost::lexical_cast<std::string>(key) +" found");
    return *iter->second.get();
} 
```

我确信可以改进某些东西（请告诉我），但我找不到错误，为什么在第二次打开后它就不起作用了。

行刑痕迹：

```
open 
conenected 
start_read0 
write socket 0 
socket 0 found 
checkOpen 
do_write 0 
handle_read0 
start_read0 
write socket 0 
socket 0 found 
checkOpen 
do_write 0 
socket 0 found 
checkOpen 
close 
do_close 
do_close end 
open 
conenected 
start_read0 
write socket 0 
socket 0 found 
checkOpen 
```

似乎 io_service.run() 刚刚停止，但线程仍在工作并且 io_service 没有停止，所以我不确定会发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:21:12.200

好的，我发现错误比我想象的要简单得多，它只是抛出一个异常并停止一切，但是当我在浏览器中使用它时，我没有注意到这一点。

我仍然无法解决问题，因此您可以检查：[Boost bind object freed on read handler](https://stackoverflow.com/questions/15439382/boost-bind-object-freed-on-read-handler)以分享一些见解。

# bash - Bash：循环读取具有已定义文件扩展名的文件

> ID：15437384
> 
> 赞同：1
> 
> 时间：2013-03-15T16:24:00.037
> 
> 标签：bash

虽然此代码有效

```
#!/bin/bash
d="test_files/*"
for f in $d.{mp3,txt} ;do
do something 
done 
```

将 {mp3,txt} 放入变量中不会，请参见下面的代码。

```
#!/bin/bash
a={mp3,txt}
d="test_files/*"
for f in $d."$a" ;do
do smoething
done 
```

这里的输出是 /*.{mp3,txt}

将 {mp3,txt} 放入数组

```
a=({mp3,txt}) 
```

仅输出带有 *.mp3 扩展名的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:40:36.263

它不起作用，因为大括号扩展发生在所有其他扩展之前。

来自`man bash`：

> 大括号扩展在任何其他扩展之前执行，并且任何其他扩展的特殊字符都保留在结果中。它是严格的文本。Bash 不对扩展的上下文或大括号之间的文本应用任何句法解释。为避免与参数扩展发生冲突，字符串 '${' 不适合大括号扩展

您可以使用`eval`存储在变量中的大括号展开，但不建议这样做。例如：

```
eval echo "$d.$a" 
```

# java - 是否可以在模型之外控制 EAGER/LAZY 加载？

> ID：15437393
> 
> 赞同：0
> 
> 时间：2013-03-15T16:24:30.757
> 
> 标签：java, spring

我们正在使用 Spring Framework 并正在设置一个站点，该站点将通过 jersey 直接与应用程序的服务层进行通信。我们遇到了这样的场景：模型中的某些东西是延迟加载的（因为我们需要它们），但我们希望能够在服务或 dao 中“翻转开关”，告诉模型获取模型急切地这样我们就不必编写一堆代码来获取我们需要的关系。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:34:23.050

例如，您可以使用`Criteria`'s覆盖它`FetchMode`：

```
List parents = session.createCriteria(Parent.class)
.add( Restrictions.like("prop", value) )
.setFetchMode("childs", FetchMode.EAGER)
.list(); 
```

这将急切地加载*子*属性集合，即使默认情况下它是延迟获取的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:37:06.673

我不知道有任何预先构建的东西可以为你做这件事，也不想用谷歌搜索它，但我可以想象一个你可以编码的设置......

*   您想要来回翻转的 POJO 的可加载界面...
*   包含所有类插槽的插槽类。Slot 可以有一个方法 Slot.load() 来告诉 slot 加载。在本机上，Slot 会延迟加载。这个类可能需要大量时间和大量子类才能正确...
*   SlotLoader 抽象类，其目的是告诉 Slot 何时加载。具有抽象方法 onAssign()。具有最终方法 assign(Slot slot)，将加载程序分配给插槽并调用 onAssign。
*   LazyLoader 类实现 SlotLoader。当 onAssign() 被调用时，什么都不做
*   EagerLoader 类实现了 SlotLoader。当 onAssign() 被调用时， slot.load() 被调用。

您想要来回切换的所有方法都需要重新编码以使用 Slot 包装它们的插槽，并且您的 Spring 配置需要知道是使用 LazyLoader 还是 EagerLoader。

# asp.net - 将html标签放在图片标签的title属性中（图片标签中的文本格式）

> ID：15437401
> 
> 赞同：-1
> 
> 时间：2013-03-15T16:24:47.283
> 
> 标签：asp.net

```
using (SqlConnection conn = DataAccess.GetConnected())
        {
            SqlCommand cmd = new SqlCommand("GetImageForSlider", conn);
            cmd.CommandType = CommandType.StoredProcedure;
            SqlDataReader sqr = cmd.ExecuteReader();
            while (sqr.Read())
            {
                string image_path = sqr.GetString(0);
                string description = sqr.GetString(1);
                string action = sqr.GetString(2);
                HtmlImage += "<img src=\"" + image_path + "\" title=\"" + "<h3>" + description + action + "\".</h3><p><br></p><ahref=http://www.giftotravels.com >Thisislink</a>" + "/>";

            }
        } 
```

我正在尝试如上所述，但这无法正常工作，任何人都可以提供帮助？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:48:31.523

您不能在图像标签内插入 html 标签；它变成无效的格式。你想像这样渲染 html。

```
HtmlImage += string.Format("<img src=\"{0}\" title=\"/><h3>{1}{2}.</h3>" +
   "<p><br></p><a href='http://www.giftotravels.com'>Thisislink</a>", 
    image_path, description, action); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:29:06.137

你不能。标题属性被呈现为纯文本。如果您想做文本标记，请自己创建一个元素，并在鼠标悬停时让它漂浮在图片上方。

# paypal - 数字商品的快速结帐：可以点击几次立即付款按钮

> ID：15437403
> 
> 赞同：0
> 
> 时间：2013-03-15T16:24:55.527
> 
> 标签：paypal, express-checkout

**问题：** 当您想使用 Express Checkout Digital Goods 购物时，Paypal 会打开一个灯箱。在此灯箱上，您可以多次单击“立即付款”按钮，这是糟糕的用户体验，并且会破坏我的后端脚本。

**脚步 ：**

1.  我在我的 Flash 网站中集成了数字商品的 Express Checkout。我使用 Paypal 脚本“ [https://www.paypalobjects.com/js/external/dg.js](https://www.paypalobjects.com/js/external/dg.js) ”，然后打开 Paypal 灯箱：

    ```
    dg = new PAYPAL.apps.DGFlow();
    dg.startFlow(setup_url); 
    ```

    然后我的网站在掩码下，并出现一个灯箱。

    setup_url 是我设置 Paypal 交易的 php 脚本的 url。当设置正常时，它会重定向到[https://www.sandbox.paypal.com/incontext?token=...&useraction=commit](https://www.sandbox.paypal.com/incontext?token=...&useraction=commit)

2.  Paypal不记得我，灯箱显示一个“登录”按钮，我点击它。

3.  灯箱上会出现一个弹出窗口，用于登录。我选中“记住我”复选框并登录。

4.  弹出窗口显示购物车，我点击“立即付款”按钮。

5.  弹出窗口立即关闭，灯箱显示“正在加载”，而我设置为“return_url”的脚本正在执行。

6.  我再次启动 Paypal DGFlow，但现在我被记住了。

7.  灯箱出现并显示购物车（没有添加弹出窗口），我点击“立即付款”

8.  好像什么都没有发生！！实际上，我设置为“return_url”的脚本正在执行，但 Paypal 灯箱没有显示“正在加载”消息，只是停留在购物车上。我可以一次又一次地点击“立即付款”，每次点击这个按钮，Paypal 都会调用 return_url。

**问题：** 这是一个错误吗？你看到同样的行为吗？您知道防止用户多次单击“立即付款”按钮的解决方法吗？

# clojure - Msbuild 将项目引用解析为自定义项目类型

> ID：15437404
> 
> 赞同：1
> 
> 时间：2013-03-15T16:24:56.740
> 
> 标签：clojure, msbuild

我为一种名为 clojure 的编程语言创建了一个自定义项目类型（cljproj 而不是 csproj）。当项目编译时，它会输出多个 .dll 文件以及一些依赖的 .clj 文件。

这是通过覆盖 cljproj 文件中的默认 CoreCompile 目标来完成的。它基本上将所有需要编译的文件复制到 bin 目录，然后执行一个单独的应用程序来编译它们。

```
<Target Name="CoreCompile">
  <PropertyGroup>
    <ClojureNamespaces>@(Compile -> '%(RelativeDir)%(Filename)', ' ')</ClojureNamespaces>
  </PropertyGroup>
  <Copy SourceFiles="@(Compile)" SkipUnchangedFiles="true" OverwriteReadOnlyFiles="true" DestinationFiles="@(Compile -> '$(OutDir)%(RelativeDir)%(Filename)%(Extension)')" />
  <Exec WorkingDirectory="$(OutDir)" Command="&quot;$(ClojureRuntimesDirectory)\$(ClojureVersion)\Clojure.Compile&quot; $(ClojureNamespaces.Replace('\', '.'))" />
</Target> 
```

我已将 ac# 项目 (csproj) 的引用添加到我的 clojure 项目 (cljproj) 中。

```
<ProjectReference Include="..\Clojure ASP.Net MVC Controller Library1\Clojure ASP.Net MVC Controller Library1.cljproj">
  <Project>{8fe1995b-4b6d-4911-b563-a759467fdf53}</Project>
  <Name>Clojure ASP.Net MVC Controller Library1</Name>
</ProjectReference> 
```

默认情况下，Visual Studio 不能正确解析项目引用，因为它假定只有一个输出 Clojure ASP.Net MVC Controller Library1.dll。实际输出文件的示例是 MvcApplication1.Controllers.HomeController.dll 和 HomeController.clj

我想在不对 C# .csproj 文件进行任何更改的情况下完成这项工作，以便可以轻松地从任何 .csproj 文件中引用 .cljproj 。

我尝试通过覆盖 GetTargetPath 目标来解决项目引用。

```
<Target Name="GetTargetPath" DependsOnTargets="$(GetTargetPathDependsOn)" Returns="@(TargetPath)">
  <ItemGroup>
    <TargetPath Include="$(TargetDir)\**\*.dll" />
    <!-- <TargetPath Include="$(TargetDir)\**\*.clj" /> -->
  </ItemGroup>
</Target> 
```

如果我使用 *.dll 设置 TargetPath，它会起作用并将 .dll 文件复制到 c#.csproj 输出目录。它甚至将 .pdb 文件复制到该目录，尽管我没有将它们添加到 TargetPath。但是，如果我取消注释 *.clj TargetPath，CSC 会抱怨 .clj 文件已损坏（可能是因为它们是纯文本，而不是 .net 程序集）。

我很高兴使用复制命令而不是覆盖 TargetPath，但是我不确定将哪个变量用于将它们输出到的目录，因为 $(outdir) 给了我自定义项目 (.cljproj) 的 bin，而不是尝试解析项目引用 (.csproj) 的 c# 项目的 bin。我不确定除了 GetTargetPath 还需要覆盖什么其他目标，因为在编译 c# (.csjproj) 项目时不会调用大多数 clojure 项目 (.cljproj) 目标，例如： .cljproj:AfterBuild 仅在直接编译 cljproj 时调用，不是在编译具有对 .cljproj 的项目引用的 .csproj 时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:58:20.800

我能够通过覆盖 GetCopyToOutputDirectoryItems 目标来使其工作。

```
<Target Name="GetCopyToOutputDirectoryItems" Returns="@(CopyToOutputDirectoryItemsWithTargetPath)">
  <ItemGroup>
    <CopyToOutputDirectoryItems Include="$(TargetDir)\**\*.clj">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </CopyToOutputDirectoryItems>
  </ItemGroup>
  <AssignTargetPath Files="@(CopyToOutputDirectoryItems)" RootFolder="$(TargetDir)">
    <Output TaskParameter="AssignedFiles" ItemName="CopyToOutputDirectoryItemsWithTargetPath" />
  </AssignTargetPath>
</Target> 
```

# ios - iOS 屏幕旋转

> ID：15437411
> 
> 赞同：-1
> 
> 时间：2013-03-15T16:25:17.407
> 
> 标签：ios, uiviewcontroller, landscape-portrait

我有一个有多个 ViewControllers 的程序。

在某些情况下，我**只**需要纵向模式，而在其他情况下，我只需要**横向**模式。

当我来自纵向视图控制器时，系统应自动将新视图控制器置于横向。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:32:41.250

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeLeft;
} 
```

这可能会有所帮助

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)

# directx - DirectX 纹理采样函数 SampleCmpLevelZero 间歇性返回空白？

> ID：15437413
> 
> 赞同：0
> 
> 时间：2013-03-15T16:25:20.320
> 
> 标签：directx, hlsl

我正在尝试编写一个像素着色器 - 我想使用 Texture.SampleCmpLevelZero 因为这可用于没有 Texture.Sample 的循环构造。

我已经构建了一个纹理，并且可以使用 Texture.Sample 对其进行精细采样，但是切换到 SampleCmpLevelZero 在前几帧有效，然后变为空白，然后很少但间歇性地正确渲染。

我的场景是静态的（还有纹理数据）——我正在渲染一个四边形并且没有任何类型的相机移动——我可以通过更改 PS 着色器功能中的单行来可靠地重现这一点。

有人见过这个吗？

谢谢

```
SamplerState sampPointClamp
{
    Filter = MIN_MAG_MIP_POINT;
    AddressU = Clamp;
    AddressV = Clamp;
};

SamplerComparisonState ShadowSampler
{
   // sampler state
   Filter = MIN_MAG_MIP_POINT;
   AddressU = Clamp;
   AddressV = Clamp;

   // sampler comparison state
   ComparisonFunc = LESS;
   //ComparisonFilter = COMPARISON_MIN_MAG_MIP_POINT;
};

texture2D tex;

//on the fly full screen quad
PS_IN VS(uint id : SV_VertexID)
{
    PS_IN ret;
    ret.uv = float2( id & 1, (id & 2) >> 1 );
    ret.pos = float4( ret.uv * float2( 2.0f, -2.0f ) + float2( -1.0f, 1.0f), 0.0f, 1.0f );
    return ret;
}

float4 PS( PS_IN input ) : SV_Target
{
    //return float4(tex.SampleCmpLevelZero(ShadowSampler, input.uv, 0), 0, 0, 1); // Does not work properly
    return float4(tex.Sample(sampPointClamp, input.uv).x, 0, 0, 1); // Works fine
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:34:04.133

示例应该可以在循环中正常工作：

```
float4 PSColUV(COLUV_PIXEL input) : SV_Target
{
    float4 output;
    for (int i = 0; i < 4; i++)
    {
        float f = float(i) / 256.0;
        float2 uv = input.UV + float2(i,i);

        output += g_txDiffuse.Sample(g_samLinear, uv);
    }
    return input.Col * output/4.0;
} 
```

产生：

```
 ps_4_0
      dcl_sampler s0, mode_default
      dcl_resource_texture2d (float,float,float,float) t0
      dcl_input_ps linear v1.xyzw
      dcl_input_ps linear v2.xy
      dcl_output o0.xyzw
      dcl_temps 3
   0: mov r0.xyzw, l(0,0,0,0)
   1: mov r1.x, l(0)
   2: loop
   3:   ige r1.y, r1.x, l(4)
   4:   breakc_nz r1.y
   5:   itof r1.y, r1.x
   6:   add r1.yz, r1.yyyy, v2.xxyx
   7:   sample r2.xyzw, r1.yzyy, t0.xyzw, s0
   8:   add r0.xyzw, r0.xyzw, r2.xyzw
   9:   iadd r1.x, r1.x, l(1)
  10: endloop
  11: mul r0.xyzw, r0.xyzw, v1.xyzw
  12: mul o0.xyzw, r0.xyzw, l(0.250000, 0.250000, 0.250000, 0.250000)
  13: ret 
```

此外，您确实意识到您正在执行 PCF 查找而不是普通纹理样本，并且这不会为您提供纹理中的数据，而是会比较所有的纹素子样本（例如双线性中的 8 个）使用您的参考值 (0)，计算 0 或 1，具体取决于它们是否小于或大于您的参考值，将这些布尔值过滤为 0 和 1 之间的数字

回复评论：

> 谢谢 - 我认为 Sample 不能处于可变长度或编译时未知长度的循环中（？）。我得到的错误是“错误 X4014：不能在循环中进行发散梯度操作错误：编译表达式时出错”。在您的另一点上-我确实想要一个精确的样本-我认为这就是我得到的-我只是尝试使用纹理缓冲区作为值表来进行一些程序纹理生成，以让我计算真实的纹素值基于 (u,v) 等。 – AnonDev

[http://msdn.microsoft.com/en-gb/library/windows/desktop/bb219848%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb219848%28v=vs.85%29.aspx) “每像素流控制与屏幕渐变的交互”

请记住，像素在（至少）2x2 块中执行。您不能拥有会导致某些像素采样而其他像素不会采样的控制流，也不能在控制流内进行会导致采样操作获得不同梯度的计算。

（嗯，你可以，但你需要为此使用[SampleGrad](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509698%28v=vs.85%29.aspx)。但是！在这种情况下，这不是你想要的。）

你说“精确”的样本。你的意思是你的资源只有一个mip map，你想在不过滤的情况下获取资源中的每个纹素？（即你正在做一个点过滤器？）。鉴于您对纹理作为值表的解释，那么我不明白为什么您需要纹理成为 mipchain，并且只有顶层包含有用的信息。在这种情况下，您可以使用LOD 为 0 的[SampleLevel()](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509699%28v=vs.85%29.aspx)。这意味着导数中不会有分歧，因为示例操作没有使用导数！

这与[SampleCmpLevelZero](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509697%28v=vs.85%29.aspx)工作的原因相同，但[SampleCmp](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509696%28v=vs.85%29.aspx)不会:) 如果您是点采样，那么另一个好的候选者将是 Load()，因为您给它精确的纹素位置，因为您甚至可以在缓冲区上使用它。因此，如果您的纹理查找位置例如基于像素 (X,Y)，那么您可以将这些直接传递给 Load（在考虑了半纹素偏移之后..）。

无论如何，你**真的**不想使用 SampleCmp/LevelZero。它做错了你所追求的事情！它用于阴影贴图等。请改用LOD 为 0 的[SampleLevel](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb509699%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T17:00:39.987

问题是：

```
SamplerComparisonState ShadowSampler
{
   // sampler state
   Filter = MIN_MAG_MIP_POINT;
   AddressU = Clamp;
   AddressV = Clamp;

   // sampler comparison state
   ComparisonFunc = LESS;
   //ComparisonFilter = COMPARISON_MIN_MAG_MIP_POINT;
}; 
```

看起来有一段时间，ComparisonFilter 作为属性存在（正如它在文档中出现的那样），例如[http://msdn.microsoft.com/en-gb/library/windows/desktop/的 build 3/5/2013 bb509644(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb509644(v=vs.85).aspx) 但如果存在则不会编译。

我通过将 Filter 属性更改为具有值 COMPARISON_MIN_MAG_MIP_POINT 来修复上述行为 - 那时一切正常

# ios - iOS 应用内购买无后端

> ID：15437420
> 
> 赞同：5
> 
> 时间：2013-03-15T16:25:40.760
> 
> 标签：ios, objective-c, in-app-purchase, backend

我正在调查应用内购买的使用，这基本上是我的应用的“专业”版本。该应用程序本身是免费的，但一旦进入，用户就可以选择购买专业内容（只有一件事）。“专业”内容已经在应用程序上，无需下载，只需“解锁”即可。

1.  Apple指南允许这样做吗？
2.  由于只会购买 1 个非消耗品，我认为不需要使用后端服务器。
    *   这又是指南允许的吗？
    *   将结果存储在 NSUserDefaults 中是否安全且简单，如果安装在另一台设备上，则从购买的 SKPayment 恢复等中提取结果？

我看过其他几个问题。

*   [应用内购买？](https://stackoverflow.com/questions/10669393/in-app-purchasing)
*   [在应用内购买中检索购买信息](https://stackoverflow.com/questions/2979475/retrieve-purchased-information-in-in-app-purchase)
*   [如何使用 NSUserDefaults 而不是我自己的服务器添加消耗品应用内购买？](https://stackoverflow.com/questions/13465804/how-do-i-add-consumable-in-app-purchases-using-nsuserdefaults-and-not-my-own-ser)

这些似乎表明我的方法是有效的，但我知道这些事情最近发生了变化，我想确保我采取了正确的方法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:51:07.210

1.  内置内容没问题。

2.  最佳实践是在应用程序和服务器之间使用身份验证协议的服务器上执行收据验证（这也适用于其他几个移动应用商店）。如果您在设备上执行验证，人们可以使用现有工具绕过您的 IAP 检查并窃取内容。查看[https://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/](https://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/)了解一些信息。

因此，虽然不需要服务器，但建议使用。只有您可以说保护您的内容是否值得维护服务器的麻烦。

我同意 J. Freeman 的观点，即 NSUserDefaults 中的直接存储似乎很弱。我将内容存储在本地文件中，但格式与设备相关，并且需要服务器计算的密钥来创建它。最后，是的，您应该使用 SKPaymentQueue restoreCompletedTransactions 在另一台设备上购买东西。意识到恢复的交易也应该在您的服务器上验证其收据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:50:46.527

是的，这很好。您不需要后端来进行应用内购买，并且可以内置您的内容。

我要说的一件事是要小心，将解锁信息存储在 NSUserDefaults 中，因为有人可以很容易地以这种方式伪造购买。您应该将解锁信息存储在钥匙串中。

# .htaccess - Mod_rewrite 带有来自 Form by GET 的附加的、未声明的参数

> ID：15437426
> 
> 赞同：1
> 
> 时间：2013-03-15T16:26:08.530
> 
> 标签：.htaccess, mod-rewrite, parameters, get, rewrite

我在我的页面上使用 mod_rewrites，它工作得很好，但是我遇到了通过 GET 方法从 FORM 发送的其他未声明参数的问题。

检查此代码：

这是我的 mod_rewrites 规则：

```
Options FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Main
RewriteRule ^index.html$                                            index.php                           [NC,L]
RewriteRule ^([a-z\_]+).html$                                       index.php?page=$1                   [NC,L]
RewriteRule ^([a-z\_]+)-([a-z\_]+).html$                            index.php?page=$1&method=$2         [NC,L]
RewriteRule ^([a-z\_]+)-([a-z\_]+).([0-9\_]+).html$                 index.php?page=$1&method=$2&id=$3   [NC,L] 
```

我的链接看起来像这样：

```
http://www.mywebsite.com/projects-add.html 
```

从：

```
http://www.mywebsite.com/index.php?page=projects&method=add 
```

当我通过 GET 方法示例链接发送表单时：

```
http://www.mywebsite.com/projects-add.html?param1=value1&param2=value2&param3=value3 
```

我的脚本没有看到其他参数。关键是，我不想在 .httacces 中声明参数，因为参数的数量是未知的。也许是一个，也许是十个。它取决于表中的数量列。

我真的很乐意提供帮助。

问候！

# web - 我可以从我的网站 url 创建一个项目吗

> ID：15437433
> 
> 赞同：0
> 
> 时间：2013-03-15T16:26:48.130
> 
> 标签：web, copy, project

我刚开始使用 Aptana，我的网站没有原始 HTML 文件。有没有办法可以将我的整个网站作为一个项目导入，或者我是否必须使用 Aptana 打开每个页面并使用原始网址保存？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T12:49:58.830

我使用的是商业 Mac 选项 Interachy。一种开源 Windows 程序是[HTTrack](http://download.cnet.com/HTTrack-Website-Copier/3000-2377_4-10039773.html)。

如果您的站点不大，通常可以逐页浏览并将每个站点保存为源。您还需要保存所有图像和 CSS 文件，并重建文件夹目录，尽管它比您想象的要快。

祝你好运！

# javascript - AngularJS：如何在控制器中手动将输入设置为 $valid？

> ID：15437435
> 
> 赞同：93
> 
> 时间：2013-03-15T16:27:02.683
> 
> 标签：javascript, validation, angularjs

使用[TokenInput](http://loopj.com/jquery-tokeninput/)插件并使用 AngularJS 内置的 formController 验证。

现在我正在尝试检查该字段是否包含文本，然后将字段设置为有效。使用插件的问题是它创建了自己的输入，然后创建了一个 ul+li 用于 stlying。

我可以访问控制器中的 addItem (formname) 和我的能力，我只需要将其设置为 $valid。

标记。

```
<form class="form-horizontal add-inventory-item" name="addItem">
     <input id="capabilities" name="capabilities" token-input data-ng-model="inventoryCapabilitiesAutoComplete" data-on-add="addCapability()" data-on-delete="removeCapability()" required>
     <div class="required" data-ng-show="addItem.capabilities.$error.required" title="Please enter capability."></div>
</form> 
```

JS。

```
$scope.capabilityValidation = function (capability) {
  if (capability.name !== "") {
    addItem.capabilities.$valid = true;
    addItem.capabilities.$error.required = false;
  } else {
    addItem.capabilities.$valid = false;
    addItem.capabilities.$error.required = true;
  }
}; 
```

当 TokenInput 输入并传入对象时，我正在运行 capabilityValidation 函数。

**编辑：**

在我的输入中发现 ng-model 做了一些事情并获得了自动完成结果，这就是为什么我不能让 ng-valid 工作，因为它是基于模型的。

```
$scope.inventoryCapabilitiesAutoComplete = {
  options: {
    tokenLimit: null
  },
  source: urlHelper.getAutoComplete('capability')
}; 
```

我没有编写这个自动完成实现，是否有另一种方法可以访问 ng-model attr 并将模型函数移动到其他地方？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-03-16T09:50:01.953

您不能直接更改表单的有效性。如果所有后代输入都有效，则表单有效，否则无效。

您应该做的是设置输入元素的有效性。像这样；

```
addItem.capabilities.$setValidity("youAreFat", false); 
```

现在输入（以及表单）无效。您还可以查看导致失效的错误。

```
addItem.capabilities.errors.youAreFat == true; 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2014-03-26T15:24:35.043

上面的答案并没有帮助我解决我的问题。经过长时间的搜索，我遇到了这个[部分解决方案](http://www.kendar.org/?p=/tutorials/angularjs/part07)。

我终于用这段代码解决了我的问题，将输入字段手动设置为 ng-invalid（设置为 ng-valid，将其设置为“true”）：

```
$scope.myForm.inputName.$setValidity('required', false); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-03-18T00:13:16.897

我遇到了这篇带有类似问题的帖子。我的解决方法是添加一个隐藏字段来为我保存无效状态。

```
<input type="hidden" ng-model="vm.application.isValid" required="" /> 
```

在我的情况下，我有一个可以为空的布尔值，一个人必须选择两个不同的按钮之一。如果他们回答是，则将一个实体添加到集合中，并且按钮的状态会更改。在所有问题都得到回答之前，（每对中的一个按钮都有一个点击）该表格无效。

```
vm.hasHighSchool = function (attended) { 
  vm.application.hasHighSchool = attended;
  applicationSvc.addSchool(attended, 1, vm.application);
} 
```

```
<input type="hidden" ng-model="vm.application.hasHighSchool" required="" />
<div class="row">
  <div class="col-lg-3"><label>Did You Attend High School?</label><label class="required" ng-hide="vm.application.hasHighSchool != undefined">*</label></div>
  <div class="col-lg-2">
    <button value="Yes" title="Yes" ng-click="vm.hasHighSchool(true)" class="btn btn-default" ng-class="{'btn-success': vm.application.hasHighSchool == true}">Yes</button>
    <button value="No" title="No" ng-click="vm.hasHighSchool(false)" class="btn btn-default" ng-class="{'btn-success':  vm.application.hasHighSchool == false}">No</button>
  </div>
</div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-19T16:41:17.727

这很简单。例如：在你的 JS 控制器中使用这个：

```
$scope.inputngmodel.$valid = false; 
```

或者

```
$scope.inputngmodel.$invalid = true; 
```

或者

```
$scope.formname.inputngmodel.$valid = false; 
```

或者

```
$scope.formname.inputngmodel.$invalid = true; 
```

所有适合我的不同要求。如果这解决了您的问题，请点击。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-14T23:14:16.110

为了让这个适用于日期错误，我必须先删除错误，然后再调用 $setValidity 以将表单标记为有效。

```
delete currentmodal.form.$error.date;
currentmodal.form.$setValidity('myDate', true); 
```

# vb.net - SQLite 使用另一个表更新一个表中的列

> ID：15437437
> 
> 赞同：1
> 
> 时间：2013-03-15T16:27:11.710
> 
> 标签：vb.net, ado.net, sqlite

好的，我是 SQLite 的新手，并且已经使用以下查询成功地做到了这一点：

```
 UPDATE stuff
 SET UserName = (SELECT UserName FROM Temp_Stuff WHERE Temp_Stuff.EmpID = stuff.EmployeeID 
```

当`stuff`有 4995 行和`Temp_Stuff`1814 行并在大约 2 秒内执行时，这很有效。

`stuff`当我在有 60,000 行和55,000 行时尝试这个完全相同的查询时`Temp_Stuff`，它似乎在查询期间被锁定并且不处理任何东西（我等了 20 多分钟。）

我正在使用 vb.net 来实现这一点，并将 ExecuteNonQuery 方法包装在事务中，如果发生任何错误，我会回滚事务（我没有达到这一点。）在 SQLite 中是否有更有效的方法来实现这一点？我已经尝试并意识到在 Update 语句中不允许加入，所以这个想法被抛弃了。这似乎是 SQLite 特定的问题。

****查询计划：* ***

```
0   0   0   SCAN TABLE stuff(~1000000 rows)
0   0   0   EXECUTE CORRELATED SCALAR SUBQUERY 0
0   0   0   SCAN TABLE Temp_Stuff(~100000 rows) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:39:46.110

查询计划显示对`Temp_Stuff`表中的*每条*记录都进行了*完全*扫描。*`stuff`*

 *在列上添加索引，`EmpID`以便查找运行得更快。（为了获得稍高的性能，请在`EmpID`和`UserName`列上使用覆盖索引。）

SQLite 从不自动为命名表创建索引；您必须使用`UNIQUE`或`PRIMARY KEY`约束显式或隐式定义它们。*

# php - json解码未定义索引

> ID：15437440
> 
> 赞同：1
> 
> 时间：2013-03-15T16:27:23.473
> 
> 标签：php, javascript, ajax, json

我正在调用一个函数 save 并在此函数中将 $.post 发送到“upp.php”：

```
function save(){

var oldItems = JSON.parse(localStorage.getItem('itemsArray')) || [];

var newItem = {};
var num = document.getElementById("num").value;

newItem[num] = {
    "methv": document.getElementById("methv").value
    ,'q1': document.getElementById("q1").value,
    'q2':document.getElementById("q2").value,
    'q3':document.getElementById("q3").value,
    'q4':document.getElementById("q4").value,
    'comm':document.getElementById("comm").value
};
oldItems.push(newItem);
localStorage.setItem('itemsArray', JSON.stringify(oldItems));}

$.post('upp.php',{ items: JSON.stringify(oldItems) }, function(response) { 
```

在 upp.php 我正在使用：

```
<?php 
$array = json_decode($_POST['items'], True);
foreach ($array as $key=>$line) {

}
?> 
```

但我得到了一个未定义的“项目”索引

编辑：

发布回复后我得到了什么

```
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="css.css" media="all">
<meta name="viewport" content="initial-scale=1.0"/>
<script src="alan.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<title>Data Collection</title>
</head>

<body>
<!--Wrapper-->
<div id="wrap">

<!--Header-->
<div id="header">
<h1> Data Collection </h1>
</div>

<div id="menu">
    <ul>
        <li><a href="homepage.php">Home</a></li>
        <li><a href="comment.php">Comments</a></li>
        <li><a href="logout.php">Logout</a></li>

    </ul>
</div><input type="text" id="data"/>

<div id="heading">
<h3> Welcome, alan </h3>
</div>
array(1) {
  ["items"]=>
  string(167) "[{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}}]"
}

<div id="footer">
<h1> Footer </h1>
</div>

</div> <!--End of wrapper-->

</body>
</html> 
```

是的，我得到了所有这些，但信息在那里，但它也显示其他信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:30:21.990

在您的 Ajax 请求成功后，您`window.location.href = "upp.php";`将向同一 URL 发出 GET 请求。

由于它是一个 GET 请求，`$_POST`是空的，所以应该可以预料到错误。

测试是否`$_POST['items']`是一个数组键并为这两种状态分支你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:37:29.770

您转换为 JSON 来发帖的任何特殊原因？为什么不只是序列化表单并使用 jQuery 发布，那么您就可以在 PHP 中使用该对象而无需任何额外的工作..

**html...**

```
<form id="myForm">
   <input name="q1"></input>
   <input name="q2"></input>
   ...
</form> 
```

* ***js...* ***

```
var formdata = $("#myForm").serialize();
$.ajax({
   type:'POST',
   url:'upp.php',
   data:formData,
   success:function(){ /* ... */ }
}); 
```

php...

```
echo $_POST['q1'];
echo $_POST['q2']; 
```

# coffeescript - 根据元素的奇数/偶数位置变换数组

> ID：15437442
> 
> 赞同：2
> 
> 时间：2013-03-15T16:27:26.663
> 
> 标签：coffeescript

给定一个具有偶数个元素的数组，我如何将其转换为属性“id”等于奇数元素和“分数”等于偶数元素的对象数组。

例子：

```
originalArray = [0,1,2,3,4,5]
targetArray   = [{ id: 0, score: 1 }, { id: 2, score: 3 }, { id:4, score: 5 }] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:03:41.317

我认为没有什么比直接循环更好的了：

```
targetArray = for i in [0 ... originalArray.length ] by 2
    { id: originalArray[i], score: originalArray[i + 1] } 
```

您可以用不同的方式编写它或将其包装在一个函数中，但它最终可能会成为第 2 步循环。

演示：http: [//jsfiddle.net/ambiguous/gW3xj/](http://jsfiddle.net/ambiguous/gW3xj/)

# django - 在 Django 中的同一字段上指定多个“通过”表

> ID：15437448
> 
> 赞同：0
> 
> 时间：2013-03-15T16:27:40.290
> 
> 标签：django, django-models

我正在创建一个带有两个指向同一字段的 ManyToManyFields 的 Django 模型。

在我的示例中，人才和兴趣都是“技能”，但通过表不同。

```
class Skills(models.Model):

    def __unicode__(self):
        return self.name

    name = models.CharField(max_length=255, unique=True)
    users = models.ManyToManyField(UserProfile, default=None,
            through='TalentDetails', related_name='talents')
    users = models.ManyToManyField(UserProfile, default=None,
            through='InterestDetails', related_name='interests') 
```

尝试通过相关名称访问人才时出现错误

```
UserProfile.interests.all()    #[<Skills: Guitar>]
UserProfile.talents.all() # AttributeError: 'UserProfile' object has no attribute 'talents'
# the following works
UserProfile.talentdetails_set.all() # [<TalentDetails: (u'Architecture',)>] 
```

所以有几个问题：

*   为什么第二个查询失败？
*   这是在同一字段上指定多个“通过”表的一种犹太方式，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:29:49.403

您有两个具有相同名称的模型字段，`users`第二个（到 InterestDetails）正在替换第一个，只需给它们不同的名称，它就会起作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T17:05:53.587

你问的真的没有意义。显然，一个字段只能有一组选项，而您正试图拥有两组。但不清楚你为什么要这样做：我知道这两个字段都链接相同的两个表，但它们在建模不同的东西：第一个字段是“拥有此技能的用户”，另一个是“将此技能作为兴趣的用户。出于这个原因，您应该有两个字段，都指向 UserProfile 但具有不同的名称 - 例如`users_with_talent`和`users_with_interest`.

（请注意，除非您定义有关关系的额外信息，否则您不需要显式定义直通表。）

# c# - 实体注释属性不起作用

> ID：15437452
> 
> 赞同：6
> 
> 时间：2013-03-15T16:27:48.817
> 
> 标签：c#, entity-framework, ef-code-first, storing-data

这是我的实体：

```
[Table( Name = "PdfMeta" )]
public class Meta
{
    [Key()]
    public int Id { get; set; }

    [Column(Name = "TotalPages")]
    public int TotalPages { get; set; }

    [Column(Name = "PdfPath")]
    public string PdfUri { get; set; }

    [Column(Name = "ImagePath")]
    public string ImageUri { get; set; }

    [Column(Name = "SplittedPdfPath")]
    public string SplittedFolderUri { get; set; }

} 
```

这是上下文中的代码：

```
 public DbSet<Meta> PdfMeta { get; set; } 
```

为什么使用 ImageUri、PdfUri ... 列创建新表（Metas）？我知道这是按惯例完成的，但我已经明确指定了表和列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:33:01.163

`Name`的属性`ColumnAttribute`只定义了 getter。在构造函数中传递列名：

```
[Table("PdfMeta")]
public class Meta
{
    [Key]
    public int Id { get; set; }

    [Column("TotalPages")]
    public int TotalPages { get; set; }

    [Column("PdfPath")]
    public string PdfUri { get; set; }

    [Column("ImagePath")]
    public string ImageUri { get; set; }

    [Column("SplittedPdfPath")]
    public string SplittedFolderUri { get; set; }
} 
```

BTW`ColumnAttribute`在 EntityFramework.dll 中定义。看起来您`ColumnAttribute`已从 System.Data.Linq.dll引用

# sharepoint - SharePoint 2007 视图，如何使用附加筛选器？

> ID：15437455
> 
> 赞同：0
> 
> 时间：2013-03-15T16:27:59.090
> 
> 标签：sharepoint, sharepoint-2007, infopath-2007

我的 SP 站点中有一个 InfoPath 表单库，并且需要使用超过 8 个（我猜这是限制）过滤器创建视图。如果我可以`Field Contains 'ABC' OR 'DEF' OR 'GHI'`通过在视图中使用一个过滤器列以某种方式实现一种功能，那将会有所帮助。或者，如果某种方式我可以使用尽可能多的过滤器而不是限制！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:33:49.793

对于更多过滤器，您需要使用数据视图 webpart。

请使用共享点设计器添加 Web 部件并进行相应配置。

谢谢

# ios - 找不到在哪里添加 UIBarButtonItem

> ID：15437458
> 
> 赞同：0
> 
> 时间：2013-03-15T16:28:10.757
> 
> 标签：ios, objective-c, uinavigationcontroller, uibarbuttonitem, uipageviewcontroller

我在 NavigationController 中有一个 UIPageViewController，并且 UIPageViewController 提供的 ViewController 之一需要能够向导航栏添加一个“保存”按钮。

问题是我找不到对导航栏的任何访问权限，因此我设置了一个断点并开始对其进行挖掘，但我似乎无法找到对 NavigationController 或其属性的访问权限的位置。

这是我发现的：

```
(lldb) po self.toolbarItems
    $9 = 0x00000000 <nil>

(lldb) po self.parentViewController
    $10 = 0x1e070bc0 <UIPageViewController: 0x1e070bc0>

(lldb) po self.parentViewController.toolbarItems
    $11 = 0x00000000 <nil>

(lldb) po self.parentViewController.navigationController
    $12 = 0x00000000 <nil>

(lldb) po self.parentViewController.view
    $13 = 0x1d585960 <_UIPageViewControllerContentView: 0x1d585960; frame = (0 0; 320 
    416); clipsToBounds = YES; opaque = NO; autoresize = W+H; layer = <CALayer: 
    0x1d5a1090>>

(lldb) po self.parentViewController.view.window
    $14 = 0x1e073750 <UIWindow: 0x1e073750; frame = (0 0; 320 480); layer = 
    <UIWindowLayer: 0x1e0756a0>>

(lldb) po self.parentViewController.view.window.rootViewController
    error: property 'rootViewController' not found on object of type 'id'
    error: 1 errors parsing expression

(lldb) po self.presentingViewController
    $15 = 0x00000000 <nil> 
```

我尝试在我的 VC 和父 VC 中设置我的 rightBarButtonItem，甚至尝试转到 topViewController 和 rootViewController。

任何人都可以就我在哪里可以访问 NavigationController 提供任何其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:15:35.443

你需要把它放在 UIViewController 子类中

```
-(void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    self.parentViewController.navigationItem.rightBarButtonItem = ...
} 
```

该解决方案的唯一问题是 Apple 可以随时更改 UIPageViewController 实现以拥有更多级别的视图控制器包含。更安全的解决方案是：

在 UIViewController 子类**.h**添加：

```
@property (nonatomic, weak) UIPageViewController *pageViewController; 
```

在**.m**中添加：

```
-(void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    _pageViewController.navigationItem.rightBarButtonItem = ...
} 
```

然后不要忘记将 pageViewController 分配给适当位置的属性

```
myViewController.pageViewController = myPageViewController; 
```

您可以在 UIPageViewControllerDelegate 方法中重置 UIPageViewController 导航项的属性，如下所示：

```
- (void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray *)previousViewControllers transitionCompleted:(BOOL)completed {
    if (completed) {
        UIViewController *viewController = [pageViewController.viewControllers lastObject];
        if (![viewController isKindOfClass:[CustomBarButtonItemViewController class]]) {
            pageViewController.navigationItem.rightBarButtonItem = nil;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T10:29:41.327

最终得到了另一种可能比 parentViewController 更可靠的方法。

因为它似乎嵌套在 UIViewControllers 中，例如 UIPageViewController 无法通过直接贡献其 UIBarButtonItem 项

```
self.navigationItem 
```

只有 UINavigationController 的直接孩子可以做到这一点。

但是嵌套的 UIViewControllers 可以通过访问 UINavigationController

```
self.navigationController 
```

至少在 viewWillAppear / viewDidAppear 中 - 不幸的是 viewDidLoad 中为零。

UINavigationController 中最顶层的 UIViewController 肯定在嵌套 UIViewController 的 parentViewController 层次结构中。

因此，不要使用 UINavigationController 的最顶层 UIViewController 来设置导航项，而不是步进到（也许更多）parentViewControllers：

```
[[[self.navigationController.viewControllers lastObject] navigationItem] setLeftBarButtonItem:barButton]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-14T08:44:23.957

我建议您创建一种方法来获取如下所示的 navigationItem。无论您的 pageViewController 位于何处，它都将始终有效。

```
- (UINavigationItem*) getNavigationItem{
UIViewController* viewController = self;
do
{
    if ([viewController.parentViewController isKindOfClass:[UINavigationController class]])
        return viewController.navigationItem;

    viewController = viewController.parentViewController;
}
while (viewController.parentViewController);

return nil; 
```

}

比你可以这样使用它：

```
[self getNavigationItem].rightBarButtonItem = ... 
```

# java - 应用程序关闭时如何清除我的数据库？

> ID：15437461
> 
> 赞同：3
> 
> 时间：2013-03-15T16:28:22.667
> 
> 标签：java, android, android-activity, android-sqlite

关闭应用程序后，我需要清除应用程序的数据库（删除所有表）。我决定在一些 Activity 的 onDestroy() 中实现这一点。据我所知，所有 onDestroy() 方法都是在应用程序完成运行时调用的。

但如果这是一个不好的做法 - 请在应用程序关闭时建议其他一些清除数据库的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:34:34.610

这不是一个好的选择，因为无法保证在您的应用关闭时会调用[onDestroy() 。](http://developer.android.com/reference/android/app/Activity.html#onDestroy%28%29)它可能会被系统立即终止，在这种情况下，您将无法清除您的数据。如文档中所述：

> 注意：不要指望这个方法被称为保存数据的地方！例如，如果一个活动正在内容提供者中编辑数据，那么这些编辑应该在 onPause() 或 onSaveInstanceState(Bundle) 中提交，而不是在这里。此方法通常用于释放资源，例如与活动相关联的线程，以便被破坏的活动不会在其应用程序的其余部分仍在运行时留下这些东西。在某些情况下，系统会简单地终止 Activity 的宿主进程，而不会在其中调用此方法（或任何其他方法），因此不应使用它来执行打算在进程消失后保留的事情。

相反，您应该创建一个扩展[Application的类，并在](http://developer.android.com/reference/android/app/Application.html)[onCreate()](http://developer.android.com/reference/android/app/Application.html#onCreate%28%29)方法中删除您的表（如果它们存在），因为该方法在应用程序的生命周期中仅调用一次。

但是，如果您觉得每次应用程序停止运行时都需要清除数据，您应该重新考虑使用数据库，因为它们用于持久存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:53:50.267

Would an [in-memory database](http://www.sqlite.org/inmemorydb.html) work for you? The database is never saved to persistent storage in the first place, and only exists as long as your process is alive and the database connection is open.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:37:24.657

看看[这个答案](https://stackoverflow.com/a/11867566/1958659)。

至于何时删除所有表，最佳实践将要求您这样做，或释放任何其他资源，`onPause()`如果[`isFinishing()`](http://developer.android.com/reference/android/app/Activity.html#isFinishing%28%29)返回 true。

快速说明：如果您的应用程序包含许多活动，那么您当然应该只在根活动的`onPause()`.

祝你好运！

# android - 模拟器无法运行我的应用程序

> ID：15437463
> 
> 赞同：0
> 
> 时间：2013-03-15T16:28:31.343
> 
> 标签：android, eclipse, emulation

在 eclipse/android AVD 中，我收到消息“不幸的是，已停止”。

我已经检查了有关此的其他问题，但我假设它特定于我的应用程序。我不确定错误在哪里，因为代码显示代码中没有问题或错误。我想知道这是否可能是我设置模拟器的方式有问题，或者是我的代码中的特定问题。

以下是我的代码部分：

活动主.xml：

```
 <?xml version="1.0" encoding="utf-8"?> 
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:clickable="true"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<ImageButton
    android:id="@+id/btn_schedule"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/btn_facebook"
    android:layout_below="@+id/btn_facebook"
    android:layout_marginTop="64dp"
    android:src="@drawable/schedule"
    android:background="@null" 
    android:contentDescription="@string/none"/>

<ImageButton
    android:id="@+id/btn_cfrc"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/btn_schedule"
    android:layout_marginLeft="73dp"
    android:layout_toRightOf="@+id/btn_schedule"
    android:background="@null"
    android:src="@drawable/website"
    android:contentDescription="@string/none"/>

<ImageButton
    android:id="@+id/btn_twitter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/btn_cfrc"
    android:layout_alignParentTop="true"
    android:layout_marginTop="64dp"
    android:background="@null"
    android:src="@drawable/twitter"
    android:contentDescription="@string/none"/>

<ImageButton
    android:id="@+id/btn_facebook"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@+id/btn_twitter"
    android:layout_marginLeft="64dp"
    android:background="@null"
    android:src="@drawable/facebook"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/none"/>

</RelativeLayout> 
```

Main_Activity.java：

```
 package com.example.cfrcradio;
import android.app.Activity; 
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle; 
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {    
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button btn1 = (Button) findViewById(R.id.btn_twitter);
    btn1.setOnClickListener(new OnClickListener() {
      public void onClick(View v) {
            Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
            myWebLink.setData(Uri.parse("http://www.twitter.com/CFRC"));
                startActivity(myWebLink); 

        } 
    });

    Button btn2 = (Button) findViewById(R.id.btn_facebook);
    btn2.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
            myWebLink.setData(Uri.parse("http://www.facebook.com/cfrc.kingston
fref=ts"));
                startActivity(myWebLink);
        }
    });

    Button btn3 = (Button) findViewById(R.id.btn_cfrc);
    btn3.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);
            myWebLink.setData(Uri.parse("http://www.cfrc.ca/blog/"));
                startActivity(myWebLink);
        }
    });

    Button btn4 = (Button) findViewById(R.id.btn_schedule);
    btn4.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Intent myWebLink = new Intent(android.content.Intent.ACTION_VIEW);

myWebLink.setData(Uri.parse("http://www.cfrc.ca/blog/programming/schedule"));
                startActivity(myWebLink);
        }
    });
}
} 
```

显现：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.cfrcradio"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.example.cfrcradio.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:33:37.270

[`Button`](https://developer.android.com/reference/android/widget/Button.html)s 和[`ImageButton`](https://developer.android.com/reference/android/widget/ImageButton.html)s 不一样。实际上从而**不是**`ImageButton`延伸。`ImageView` **`Button`**

 **A`ClassCastException`应该与您当前的实现一起抛出。

在您的情况下，您将需要更改所有出现的`Button`，所以它是`ImageButton`。例如

```
Button btn1 = (Button) findViewById(R.id.btn_twitter); 
```

应该

```
ImageButton btn1 = (ImageButton) findViewById(R.id.btn_twitter); 
```**

# c# - 从数字 C# 的开头获取数字

> ID：15437465
> 
> 赞同：-8
> 
> 时间：2013-03-15T16:28:36.457
> 
> 标签：c#

我想从数字的开头开始依次获取一个长数字的数字。我想通过使用 while、for 或 if 来做到这一点。任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:35:29.623

```
int i = 123456;
foreach (char c in i.ToString())
{
    Console.Write(c);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:32:11.827

假设你有一个数字 n

```
 int n = 12345; 
```

得到数字

```
int n = 12345;
for (int i = 1; i <= n; i*=10)
{
    int d = (n % (i*10))/i;
    Console.WriteLine(d);
} 
```

# javascript - 尝试使用 Maps API 创建 DOM 元素

> ID：15437467
> 
> 赞同：-1
> 
> 时间：2013-03-15T16:28:41.647
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我正在尝试使用 Google Maps API 在信息框内创建一个 DOM 元素，但是在我希望找到我的元素的地方，浏览器不会呈现元素，而是呈现关于对象的纯文本。我怀疑这与我混合 JS 和 HTML 的方式有关，因为如果我*只*包含 Javascript（没有 HTML），则元素显示没有问题。

我的信息框内容变量如下所示：

```
var content = '<strong>Title</strong>' + document.createElement('button'); 
```

呈现的内容如下所示：

```
Title [object HTMLButtonElement] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:41:18.633

> 我怀疑这与我混合 JS 和 HTML 的方式有关

确切地。

```
var content = '<strong>Title</strong>' + document.createElement('button'); 
```

您的变量在这里首先被分配了一个字符串值 - 然后您尝试使用`+`运算符向其附加一些内容，该运算符代表此上下文中的字符串连接。由于 HTML 元素在这里是“虚构的”，因此必须将其转换为字符串才能执行操作。当您将 HTML 元素隐式“转换”为字符串时，浏览器会做出类似的事情`[object HTMLButtonElement]`（不同浏览器之间的确切文本可能会略有不同）。

使用 DOM 方法创建所有元素（createElement for`strong`和 createTextNode 用于其中的文本内容） - 或使用`innerHTML`，如果在您的上下文中可能的话。

# objective-c - 选择 sqLite 表中的所有列并将其存储在（可变）数组中 - 并将数组返回给调用者

> ID：15437469
> 
> 赞同：1
> 
> 时间：2013-03-15T16:28:44.683
> 
> 标签：objective-c, c, arrays, sqlite, tableview

我已经搜索了几天的解决方案，不幸的是找不到任何适合我的应用程序需求的相关信息。

**我要做的是：**
调用一个 sqLite 查询方法
方法查询 sqLite 表（选择所有列）
将选定的行和列保存在数组
数组中必须返回给调用者
UITableView 必须显示返回的值

我的代码：

FirstViewController.m:

```
result = [queryObject myQueryMethod]; //result is of type NSMutableArray 
```

查询.m：

```
NSString *myUsername;  
NSString *from;  
NSString *to;  
NSString *message;  

querySQL = [NSString stringWithFormat:@"SELECT * FROM messages WHERE to = '%@'" , myUsername];  
query_stmt = [querySQL UTF8String];  

NSMutableArray *allMessages = [[NSMutableArray alloc] init];  
if(sqlite3_prepare_v2(_userDB, query_stmt, -1, &statement, NULL) == SQLITE_OK ) {  

        while (sqlite3_step(statement) == SQLITE_ROW) {  
            from = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 1)];  
            to = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 2)];  
            message = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 3)];  
            [allMessages addObject:message];  //MY PROBLEM..
        }

        return allMessages; //return to caller in FirstViewController.m

    } 
```

**我的问题是：**如何将所有列（三）添加到数组中，并将数组返回给 FirstViewController.m 中的调用者，以便对 UITableView 的索引进行排序？
要在表格视图中显示信息，我使用：

```
cell.textLabel.text = [result objectAtIndex:indexPath.row]; 
```

如果能得到任何帮助，我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:32:02.570

要保留所有 3 列的值，您应该使用字典。

```
while (sqlite3_step(statement) == SQLITE_ROW)
 {  
      from = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 1)];  
      to = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 2)];  
      message = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 3)];  

      NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys: from, @"From", to, @"To", message, @"Message", nil];
      [allMessages addObject:dict];  //MY PROBLEM..
} 
```

现在在获取值时，从字典中获取它：

```
cell.textLabel.text = [[result objectAtIndex:indexPath.row] objectForKey:@"To"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:39:20.317

您只是将消息值添加到数组中。您应该为三列中的每一列创建一个具有属性的对象，并改为返回这些对象的数组。

或者，您可以将三个字符串添加到数组并根据其位置检索每个值：

```
cell.textLabel.text = [result objectAtIndex:indexPath.row * 3];
NSString *to = [result objectAtIndex:indexPath.row * 3 + 1];
NSString *message = [result objectAtIndex:indexPath.row * 3 + 2]; 
```

当然，您需要将其他值添加到数组中：

```
[allMessages addObject:from];  //MY PROBLEM..
[allMessages addObject:to];
[allMessages addObject:message]; 
```

# c# - 创建相册查看器

> ID：15437471
> 
> 赞同：2
> 
> 时间：2013-03-15T16:28:52.707
> 
> 标签：c#, .net, photo, viewer

我想在 C# 中创建一个看起来像 iTunes 中的专辑查看器的表单。

我正在设想一个有很多图片缩略图的网格，每个缩略图下面都有一两行文本来显示图片的名称。当我点击图片缩略图时，我想显示一个包含图片信息的表单。

C# 中有一个控件可以让我这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:31:24.463

您可以使用[DataGridView](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)进行足够的修改，但它不会为您生成缩略图。你必须自己做缩略图。（您也可以将图像加载到网格控件中并让它们进行缩放，但是您会看到没有太多图像的严重性能问题。）

像您描述的应用程序通常与 Telerik 的网格（以及许多其他）和 3rd 方图形包等 3rd 方 UI 库放在一起。这是因为尽管 Microsoft 提供了一些不错的开箱即用控件，但从这些控件中组装更高级的应用程序可能会变得更加困难。

如果您不想或不能为 3rd 方控件付费，您可以查看开源和演示项目，例如[生成缩略图](http://www.codeproject.com/Articles/33929/Thumbnails-Generation)和[网格控件](http://www.codeproject.com/Articles/3531/SourceGrid-Open-Source-C-Grid-Control)。

# sorting - IE8中的数据表和按日期排序

> ID：15437482
> 
> 赞同：2
> 
> 时间：2013-03-15T16:29:18.503
> 
> 标签：sorting, datatables

让[dataTables](http://datatables.net/)排序日期字段（具有`{"sType":"date"}`.`null`排序类型（仅对数据进行排序，就好像它是纯字符串一样）在 IE8 中工作正常时遇到了一些麻烦。

适用于 IE 9 和 10，以及最新版本的 Chrome、Safari、Firefox。这个应用程序没有在移动客户端上使用，所以我没有在那里测试它。

IE8 有什么特别之处需要我研究吗？在 IE8 中的 JavaScript 控制台上没有错误，所以我有点不知道在哪里看。检查了[dataTables](http://datatables.net/)文档并搜索 SO，但尚未找到任何特定于 IE8 的内容。

**更新：**

这是我用来初始化数据表的 JavaScript。

```
//sprv results table
$("#sprv_report_table").livequery(function(){$(this).dataTable({
  "aoColumns": [{"sType":"date"},null,null,null,null,{"sType":"date"}],
  "iDisplayLength": 10, 
  "sPaginationType": "full_numbers"
});});1 
```

由于数据表代码确实应用于表，并且我可以对其他列进行排序，所以我没有任何理由相信这个事件没有被触发——它似乎很明显是被浏览器触发的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:02:19.903

尝试这样的事情：

```
$(this).dataTable({
  "aoColumns": [{
    mData: function(data, type) {
       var realDate = Date.parse(data); //data will be a string
       switch(type) {
         case 'display':
            return realDate.toString('MM/dd/yyyy'); //note that this line needs to be implemented by you (however you format dates)
         default:
            return realDate;
       }
    }
   },null,null,null,null,{"sType":"date"}],
  "iDisplayLength": 10, 
  "sPaginationType": "full_numbers"
}); 
```

请参阅`mData`此处的使用参考：http: [//datatables.net/ref](http://datatables.net/ref)

> 整数 - 被视为数据源的数组索引。这是 DataTables 使用的默认值（每列递增）。
> 
> 字符串 - 从数据源读取对象属性。请注意，您可以使用 Javascript 点分表示法从数据源中读取深层属性/数组。
> 
> null - sDefaultContent 选项将用于单元格（默认为 null，因此您需要指定所需的默认内容 - 通常为空字符串）。这对生成的列（例如编辑/删除操作列）很有用。
> 
> **function - 只要 DataTables 需要设置或获取列中单元格的数据，就会执行给定的函数。该函数接受三个参数： {array|object} 行的数据源 {string} 请求的类型调用数据 - 当设置数据或 'filter', 'display', 'type', 'sort' 时这将是 'set' ' 或在收集数据时未定义。请注意，当为 DataTables 期望获取对象的原始数据的类型给出未定义时**
> 
> {*} 第二个参数为“set”时要设置的数据。
> 
> 当 'set' 是调用类型时，函数的返回值不是必需的，否则返回值将用于请求的数据。

# asp.net-mvc-4 - 将 Maproute 更改为 {controller} 路由以外的令牌到主页？

> ID：15437483
> 
> 赞同：0
> 
> 时间：2013-03-15T16:29:20.227
> 
> 标签：asp.net-mvc-4

这是我的路线配置

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}/",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
        //routes.MapRoute(
        //    name: "Default2",
        //    url: "{controller}/{action}/",
        //    defaults: new { controller = "Home", action = "Index" }
        //);
    } 
```

如果我输入

```
http://localhost:62378/thiscontrollerdoesnotexist 
```

它给了我这个信息

“/”应用程序中的服务器错误。无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的 URL：/thiscontrollerdoesnotexist

但是如果我改变我的路线到这个

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                name: "Default",
                url: "{controllerhithere}/{action}/{id}/",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );
            //routes.MapRoute(
            //    name: "Default2",
            //    url: "{controller}/{action}/",
            //    defaults: new { controller = "Home", action = "Index" }
            //);
        } 
```

我将 {controller} 更改为 {controllerhithere}。现在当我输入

```
http://localhost:62378/thiscontrollerdoesnotexist 
```

它需要我

```
http://localhost:62378/thiscontrollerdoesnotexist 
```

但显示主页？

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:39:05.137

这个项目： http: [//www.codeproject.com/Articles/299531/Custom-routes-for-MVC-Application#premain7](http://www.codeproject.com/Articles/299531/Custom-routes-for-MVC-Application#premain7)

允许您将以下行添加到 global.asax

```
RouteDebug.RouteDebugger.RewriteRoutesForTesting(RouteTable.Routes); 
```

这将允许您调试路由，并且您可以确定匹配的内容和覆盖的内容。

![在此处输入图像描述](../Images/a9c1b3f1c76a936974d698cc9797d1e3.png)

# performance - EhCache 数据到磁盘而不刷新

> ID：15437487
> 
> 赞同：2
> 
> 时间：2013-03-15T16:29:29.827
> 
> 标签：performance, persistence, ehcache

你好我有一个特定的任务要在 EhCache 中解决，但我无法实现它。

我想建立一个“永恒的缓存”，它将在内存中有少量项目以供立即使用，其余的将保留在磁盘上。我通常将数据写入多个线程中的缓存，并希望将这些项目一直保存在磁盘上，这样即使在重新启动后我也可以使用它们。

```
<cache name="eternal_cache" maxBytesLocalHeap="1%" maxBytesLocalDisk="2G"
       eternal="false" timeToLiveSeconds="0"
       timeToIdleSeconds="120" overflowToDisk="true"
       diskPersistent="true" memoryStoreEvictionPolicy="LFU"
       transactionalMode="off"/> 
```

基本上我想要 EhCache 中的持久性功能，它是通过 定义的，但有大小限制，这是持久性不允许的。

我遇到了一个问题，即我的配置在内存中有项目，但没有正确关闭 ehcache 管理器会丢失我的数据。我阅读了有关 flush() 的信息，但它会将项目保留在磁盘上，但我希望至少有一些数据在内存中。

你能告诉我如何根据我的需要配置缓存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:10:05.623

阅读官方手册后，我找到了解决方案。

可以仅使用 Ehcache Persistence 策略进行持久化，但在 Enterprise 版本中。

在普通版本中，只有调用`flush()`or才有可能`shutdown()`。

# actionscript-3 - 对图像进行大量处理时应用程序崩溃

> ID：15437490
> 
> 赞同：1
> 
> 时间：2013-03-15T16:29:34.453
> 
> 标签：actionscript-3, air, flex4

我正在编写一个应该批量调整文件夹中图像大小的应用程序。我的问题是我的代码适用于具有小图像的目录或具有少量图像的目录，但是当我在有许多需要更多处理的大图像的目录上运行我的代码时，应用程序崩溃而不报告任何错误。这是我的代码：

```
function BatchResizeDirectory(){
        var dir : File = new File;

        dir.addEventListener(Event.SELECT,function(){
            var files = dir.getDirectoryListing();

            for each (var file:File in files) 
            {
                if(["png","jpg","bmp","jpeg"].indexOf(file.extension.toLocaleLowerCase()) != -1){

                    file.addEventListener(Event.COMPLETE,function(e:Event){
                        var f:File = File(e.target);    
                        var loader:Loader = new Loader();
                        loader.contentLoaderInfo.addEventListener(Event.COMPLETE,function(e:Event){

                            //init bmp data
                            var bmpd:BitmapData = new BitmapData(loader.content.width,loader.content.height);
                            bmpd.draw(loader);

                            //resize
                            var result:BitmapData = ImageResizer.bilinearIterative(bmpd, 64,64,
                                ResizeMath.METHOD_PAN_AND_SCAN);

                            //write to disk
                            var pnge:JPEGEncoder = new JPEGEncoder();
                            var bytes:ByteArray = pnge.encode(result);

                            var name = f.name.replace("."+f.extension,"");
                            var outputFilename = dir.nativePath+"/"+ name + "_resized." + f.extension;
                            var outputFile:File = dir.resolvePath(outputFilename);
                            var fs:FileStream = new FileStream();
                            try{
                                //open file in write mode
                                fs.open(outputFile,FileMode.WRITE);
                                //write bytes from the byte array
                                fs.writeBytes(bytes);
                                //close the file
                                fs.close();
                            }catch(e:Error){
                                trace(e.message);
                            }

                        });
                        loader.loadBytes(f.data);

                    });

                    file.load();

                }

            }
        });

        dir.browseForDirectory("Choose the input folder");

    } 
```

我的问题是。为什么我的应用程序在繁重的处理中崩溃？它与事件处理程序的匿名声明有什么关系吗？我很困惑。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:36:15.220

检查您的内存使用情况，您也可以`bitmapData.dispose`在调整图像大小后调用以释放内存。

我还会将这些匿名函数移出，以使其更易于阅读，并且由于 for 循环而不易出错。

编辑：我认为问题在于文件数组没有其他引用，因此您丢失了对文件的引用。试试下面的代码，看看它是否有帮助。

```
package 
{
    import flash.display.BitmapData;
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.filesystem.File;
    import flash.filesystem.FileStream;

    public class Main extends Sprite 
    {
        private var _files:Array;

        public function Main():void 
        {
            BatchResizeDirectory();
        }

        private function BatchResizeDirectory():void{
            var dir : File = new File;

            dir.addEventListener(Event.SELECT,function():void{
                _files = dir.getDirectoryListing();

                for each (var file:File in _files) 
                {
                    loadFile(file);

                }
            });

            dir.browseForDirectory("Choose the input folder");

        }

        private function loadFile(file:File):void 
        {
            if(file.extension && ["png","jpg","bmp","jpeg"].indexOf(file.extension.toLocaleLowerCase()) != -1){

                file.addEventListener(Event.COMPLETE, onComplete);

                file.load();
            }
        }

        private function onComplete(e:Event):void 
        {
            var f:File = File(e.target);    
            var loader:Loader = new Loader();
            loader.contentLoaderInfo.addEventListener(Event.INIT,function(e:Event):void{

                trace(f.name);
            });
            loader.loadBytes(f.data);

        }
    }
} 
```

# jquery - 如果我使用溢出，jQuery 航路点不会触发：隐藏

> ID：15437493
> 
> 赞同：0
> 
> 时间：2013-03-15T16:29:41.347
> 
> 标签：jquery, overflow, jquery-waypoints

我有一个以全窗口 div 布局的页面。导航是通过点击导航按钮完成的，我不希望用户能够滚动到 div 之间的某个位置，所以我在容器上设置了溢出：隐藏。那部分工作正常。

HTML：

```
<body>
    <div id="container">
        <div class="slide" id="slide1"> <span class="content">page 1</span>

        </div>
        <div class="slide" id="slide2"> <span class="content">page 2</span>

        </div>
        <div class="slide" id="slide3"> <span class="content">page 3</span>

        </div>
    </div>
<div id="navigation">
    <ul>
    <li><a href="#slide1" class="navbtn1" class="scroll">&nbsp;</a>
    </li>
    <li><a href="#slide2" class="navbtn2" class="scroll">&nbsp;</a>
    </li>
    <li><a href="#slide3" class="navbtn3" class="scroll">&nbsp;</a>
    </li>
    </ul>
</div>
</body> 
```

这是我正在使用的javascript：

```
$(document).ready(function(){
// Make navbtn active when page is scrolled down to slide
$('#slide1').waypoint(function(down){
  $('#main .active').removeClass('active'); // remove the class from the currently selected
  $('#main a.navbtn1').addClass('active'); // add the class to the newly clicked link
});

$('#slide2').waypoint(function(down){
  $('#main .active').removeClass('active'); // remove the class from the currently selected
  $('#main a.navbtn2').addClass('active'); // add the class to the newly clicked link
});

$('#slide3').waypoint(function(down){
  $('#main .active').removeClass('active'); // remove the class from the currently selected
  $('#main a.navbtn3').addClass('active'); // add the class to the newly clicked link
}); 
}); 
```

当我向上滚动时，我确实有一段代码用于触发，但它看起来就像这样，但使用“向上”而不是“向下”和偏移量：-1。

问题是，我正在使用 Waypoints jQuery 插件来检测#slide 何时位于视口顶部并在关联的 navbtn 上设置活动状态。Waypoints 不再开火了。如果我打开删除溢出：隐藏，它可以工作，但是在那里，当我加载页面时它只会触发一次。

知道为什么当我使用溢出时航点会停止发射：隐藏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T08:44:48.923

尝试应用 overflow:hidden 仅在 body 元素上，而不是在 html 和 body 元素上。为我工作

# parsing - Rexx - 解析 CSV 行（';' 分隔符）

> ID：15437494
> 
> 赞同：2
> 
> 时间：2013-03-15T16:29:43.173
> 
> 标签：parsing, csv, rexx

我知道我们可以用类似的东西解析一个 CSV 行（';' 分隔符）：

```
delim = ';'
myline="i;want;to;know;what;love;is"
parse var myline w1 (delim) w2 (delim) w3 (delim) w4 (delim) w5 (delim) w6 (delim) w7
say w1 w2 w3 w4 w5 w6 w7 
```

我想知道是否有一种方法可以简化“w#（delim）”的迭代，以便执行以下操作：

```
parse var myline w1 (delim) w2 (delim) ... (delim) w6 (delim) w7
/* then we will have all w1 to w7 defined 
```

我可以用一些数组做一个函数来做到这一点，但它是否可以在 rexx 上本地实现，我只是想知道

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T22:29:07.200

当然，如果您真正想要的是名为, , ...的`n`变量：`w1``w2``wn`

```
do i = 1 by 1 while myline <> ''
    parse var myline word (delim) myline
    interpret "w" || i "= word"
end 
```

但是 Rexx-y 的方法是使用“stem array”：

```
delim = ';'
do i = 1 by 1 while myline <> ''
    parse var myline w.i (delim) myline
end
w.0 = i-1 
```

甚至：

```
do i = 1 by 1 while myline <> ''
    parse var myline w.i ';' myline
end
w.0 = i-1 
```

完成后，您将拥有一个数组`w.`，其中包含计数`w.0`以及, , ... 中的`n`单词直至. 这更好，因为 Rexx 对 : 后面的部分进行了特殊处理，您可以使用任何变量，并且将使用它的值来代替。所以打印所有这些词只是：`w.1``w.2``w.n``.`

```
do i = 1 to w.0
    say w.i
end 
```

或者重新组装它们只是：

```
line = ""
do i = 1 to w.0
    line = line || w.i || ';'
end 
```

# javascript - 如何获取鼠标悬停在链接上的文本？

> ID：15437499
> 
> 赞同：0
> 
> 时间：2013-03-15T16:30:04.647
> 
> 标签：javascript, html, tags, mouseover

我的 HTML 页面上有以下链接，所有链接标签之间都有不同的 url 和不同的文本。

```
<a onmouseover="myFunction()" class="green" href="url.com">word here</a> 
```

myFunction 是一个显示单词定义的脚本。我只需要弄清楚如何得到这个词。

我想得到我的鼠标悬停在上面的单词，而不是页面上带有“绿色”类的标签之间的其他单词。有没有办法在我的鼠标所在的标签之间获取当前单词悬停？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:33:40.833

只需将节点传递给函数：

```
<a onmouseover="myFunction(this)" class="green" href="url.com">word here</a> 
```

并且，在您的功能中：

```
myFunction(nodeReference){
    var text = nodeReference.innerText || nodeReference.textContent;
    console.log('the text is: ' + text);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/SrZeK/1/)。

或者，如果您更喜欢简单地传递文本，则可以：

```
<a onmouseover="myFunction(this.innerText || this.textContent)" class="green" href="url.com">word here</a> 
```

这使您的函数可以直接访问文本：

```
myFunction(elementText){
    console.log('the text is: ' + elementText);
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/SrZeK/2/)。

不过，更好的是从内联处理程序中删除您的事件处理，如果只是为了便于更新/维护，请使用以下方法：

```
function myFunction(nodeReference){
    var text = nodeReference.innerText || nodeReference.textContent;
    console.log('The text is: ' + text);
}

var As = document.links;

for (var i = 0, len = As.length; i<len; i++){
    As[i].onmouseover = function(e){
        myFunction(this);
    };
}

<a class="green" href="url.com">word here</a> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/SrZeK/3/)。

正如下面的评论中所指出的，没有必要将函数调用包装在匿名函数中，而是允许像这样调用：

```
function myFunction(evt){
    var text = this.innerText || this.textContent;
    console.log('The ' + evt.type + ' text is: ' + text);
}

var As = document.links;

for (var i = 0, len = As.length; i<len; i++){
    As[i].onmouseover = myFunction;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/SrZeK/7/)。

或者可能：

```
function myFunction(nodeReference){
    var text = nodeReference.innerText || nodeReference.textContent;
    console.log('The text is: ' + text);
}

var body = document.body;

body.addEventListener('mouseover',function(e){
    if (e.target.tagName.toLowerCase() == 'a'){
        myFunction(e.target);
    }
}, false); 
```

（以上内容在 IE 中不起作用，它使用`attachEvent()`代替`addEventListener()`，但没有 IE，我无法试验/改进 IE 兼容性。）

[JS 小提琴演示](http://jsfiddle.net/davidThomas/SrZeK/4/)。

顺便说一句，我使用了 ，`body`因为这是唯一的祖先元素，将事件绑定到最接近`event.target`元素的祖先元素时性能更高（CPU 密集度/消耗量更少） `mouseover`，因为您可能会或多或少地不断触发想象一下，*每一次*鼠标移动。）

当然，您可以在兼容的浏览器中使用 CSS：

```
<a class="green" href="url.com" data-definition="The definition of the phrase in this attribute..!">word here</a> <!-- note the custom data-* attribute --> 
```

使用 CSS：

```
a {
    position: relative;
    margin: 1em;
}

a:hover::after {
    content: attr(data-definition);
    position: absolute;
    top: 50%;
    left: 50%;
    color: #000;
    background-color: #fff; /* Old IE */
    background-color: rgba(255,255,255,0.5);
    width: 8em;
    border: 1px solid #000;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/SrZeK/6/)。

参考：

*   [`Element.addEventListener()`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener).
*   [`innerText`财产](http://msdn.microsoft.com/en-us/library/ie/ms533899%28v=vs.85%29.aspx)。
*   [`Node.textContent`](https://developer.mozilla.org/en/docs/DOM/Node.textContent).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:33:23.157

因为您使用的是内联处理程序属性，所以您可以只传递您想要的属性。

```
<a onmouseover="myFunction(textContent)" class="green" href="url.com">word here</a> 
```

然后在你的函数上定义一个参数。

```
function myFunction(txt) {
    alert(txt);
} 
```

***演示：http:*** [//jsfiddle.net/z4Pbj/](http://jsfiddle.net/z4Pbj/)

* * *

如果您愿意，可以改为传递整个元素

```
<a onmouseover="myFunction(this)" class="green" href="url.com">word here</a> 
```

然后查找属性

```
function myFunction(el) {
    alert(el.textContent);
} 
```

***演示：http:*** [//jsfiddle.net/z4Pbj/1/](http://jsfiddle.net/z4Pbj/1/)

* * *

*请注意，这演示了这些技术。根据您支持的浏览器，您可能希望使用不同的属性来实现兼容性。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:44:19.803

我将改写问题以确保我理解：您想访问

```
<element>THIS TEXT</element> 
```

在您的函数中，以便您可以将其与定义匹配。有多种方法：使用您当前的内联样式，您可以将“this”参数传递给您的函数

```
<element call=myFunction(this)>Content you want to access</element> 
```

然后，在您的 js 函数中，您可以使用节点的“.innerText()”方法访问内部字符串：

```
function myFunction(elementWithGuts) {
    var whatYouWant = elementWithGuts.innerText();
} 
```

# casperjs - 运行多个 casperjs 实例

> ID：15437512
> 
> 赞同：1
> 
> 时间：2013-03-15T16:30:39.607
> 
> 标签：casperjs

我需要同时运行 3 个 url 请求。我想运行 3 个 casper 实例，每个实例获取一个 url。作为一个简单的例子，我尝试了 2 个实例。

```
var casper=require('casper').create();
casper.start('http://www.google.com');

var casper1=require('casper').create();
casper1.start('http://www.google.com');

casper1.then(function() {
    casper1.echo('inside');
});
casper1.echo('outside');

casper1.run();
casper.run(); 
```

输出仅显示“外部”。为什么它不运行 casper1.echo('inside');

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:11:46.673

CasperJS 使用一组命令，这些命令在您使用其 api 中的一个函数（start、then、thenOpen 等）时创建。一旦所有项目都在堆栈中排队，您可以通过执行 casper.run() 来按顺序执行它们。如果没有添加到堆栈中，Casper 将不会执行它。

简单地说， casper1.echo('outside') 没有被执行，因为它从未被添加到堆栈中。

他们关于该主题的[常见问题解答](http://casperjs.org/faq.html#faq-step-stack "常问问题")更详细地对其进行了细分。

# c++ - 正余弦图表绘图仪.....一些算法错误 C++

> ID：15437513
> 
> 赞同：0
> 
> 时间：2013-03-15T16:30:44.430
> 
> 标签：c++, plot, trigonometry

所以我在这里创建了这个图表绘图程序。但是我有一些小故障。首先我应该描述这个程序是如何工作的。基本上使用 stdscr 并创建一个新的胜利我必须创建一个“函数生成器”程序。字符将打印在模拟正弦和余弦波形的屏幕上。随着字符向下滚动窗口，窗口将滚动。其中一个窗口将包含框架（页眉、行、页脚）。另一个窗口将滚动和打印正弦和余弦波形。我一直在检查我的代码很长一段时间，无论我有什么错误，我都无法弄清楚。

如果您仍然无法想象程序，请考虑 pong...2 条垂直线顶部和底部，然后一条线穿过中间。在这个“球场”/屏幕上，正弦波和余弦波将被打印出来。

我的错误是 sin 和 cosine 没有按照我想要的方式打印……似乎它们超出了 Newwin 窗口的范围。此外，将从 1 0 -1 指定的页脚不会移动到我希望它在页脚中的位置。

```
#include <curses.h>
#include <math.h>
#include "fmttime.h"
#include <sys/time.h>
#include <time.h>
#include <unistd.h>

enum colors
        {
        BLACK,
        RED,
        GREEN,
        YELLOW,
        BLUE,
        MAGENTA,
        CYAN,
        WHITE,
        };

void Sim_Advance(int degrees);          // Function prototype declarations
double Sim_Cos();
double Sim_Sin();
void frame(const char* title, int gridcolor, int labelcolor);
void mark(WINDOW* window, char ch, int color, double value);

static const double PI = (3.1415927/180); // Degrees to radian factor
static double PA = 0;                   // Phase angle
static int x;                           // X dimension of screen
static int y;                           // Y dimension of screen
static int delay1 = 300000;             // 300ms Delay

struct timeval tv;                      // Timeval object declaration

int main(void)
{
    initscr();                          // Curses.h initilizations
    cbreak();
    nodelay(stdscr, TRUE);
    noecho();

    int keyhit;
    int ctr = 1;                        // Exit flag
    int degrees = 10;                   // Interval to be added to phase
    int tempcounter = 1;
    char buf[32];                       // Buffer being sent to formattime
    size_t len = sizeof(buf);           // Size of buffer being passed
    gettimeofday(&tv, NULL);            // calling function for epoch time
    formatTime(&tv, buf, len);          // Calling formaTime for timestamp

    getmaxyx(stdscr,y,x);
    WINDOW* Window = newwin(y-4, x-2, 2, 5);
    scrollok(Window, TRUE);
    char cTitle[] = {"Real time Sine/ Cosine Plot"};  // Title string for plot

        while (ctr == 1)                // This will run the program till
        {                               // exit is detected (CTRL-X)
            usleep(delay1/6);           // Delays program execution
            keyhit = getch();

            mark(Window,'C', WHITE, Sim_Cos());

            mark(Window,'S', RED, Sim_Sin());

            Sim_Advance(degrees);       // Advances PA by "degrees" value (10)

                if (tempcounter == 1)
                {
                    frame(cTitle, WHITE, RED);  // Prints out the frame once
                    --tempcounter;
                }

                if (keyhit == 24)
                {
                    ctr = 0;            // Exit flag set
                }
        }
    endwin();
    return 0;
}

// Function will advance the Phase angle by assigned value of degrees
// The value of degrees must be an int and must be in radians

void Sim_Advance(int degrees)
{
    PA = PA + degrees;

    if (PA >=  360)
    {
        PA = PA - 360;

    }
}

// Calculates the Cos of the Phase angle and returns value to main

double Sim_Cos()
{
    double PARad;                       // Need to convert degrees into Radian
    PARad = (PA*PI);

    return cos(PARad);
}

// Calculates the Sin of the Phase angle and returns value to main

double Sim_Sin()
{
    double PARad2;                      // Variable to hold radian value
    PARad2 = (PA*PI);
    return sin(PARad2);
}

// Will print the grid and Axis of the display as well as a title for the display
// with variable background and/or foreground colors

void frame(const char* title, int gridcolor, int labelcolor)
{

    int offset = 27/2;                  // Middle of string
    int col = 0;
    int row = 0;
    int botline = 0;

    start_color();
    init_pair(0, labelcolor, BLACK);
    init_pair(1, gridcolor, BLACK);

    wmove(stdscr, 0, (x / 2)- offset);

    wprintw(stdscr,"%s\n", title);
    wrefresh(stdscr);

    while (row != x)                    // This prints the top line
    {
        attrset(COLOR_PAIR(1));
        wprintw(stdscr,"-");

        wrefresh(stdscr);
        ++row;
    }

    while (col != y-4)                  // This prints the middle line
    {
        wmove(stdscr, col + 2, x/2);
        wprintw(stdscr, "|\n");
        wrefresh(stdscr);
        ++col;
    }

    while (botline != x)                // Prints the bottom line
    {
        wprintw(stdscr, "-");
        wrefresh(stdscr);
        ++botline;
    }

    attrset(COLOR_PAIR(0));

    wmove(stdscr, y, 0);                // These three things commands
    wprintw(stdscr, "-1");              // Will print out the proper footer
    wrefresh(stdscr);

    wmove(stdscr, y, x/2);
    wprintw(stdscr, "0");
    wrefresh(stdscr);

    wmove(stdscr, y, x);
    wprintw(stdscr, "1");
    wrefresh(stdscr);

}

// Will print out the characters passed to it in the designated
// window to which it points to.

void mark(WINDOW* window, char ch, int color, double value)
{
    int cursep = (((x/2) * value) + (x/2)); // Prints character from middle
    int currenty = getcury(window);         // of screen
    wmove(window, currenty+1, cursep-3);    // Moves cursor to desired location
    wrefresh(window);
    usleep(delay1);
    waddch(window, ch);
    wrefresh(window);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T03:10:28.380

部分解决方案（简化的帖子将有助于 OP 和 SO）

1.  使用`double PI = (M_PI/ 180);` 或 3.141592653589793/180

2.  将正 double 转换为 int 向下舍入，将负 double 转换为 int 向上舍入。所以避免在 0 的两边加倍到整数。

3.  宽度为`x`。把屏幕想象成`x`盒子。框 0的*中心*是 -1.0 的值。框 x-1的*中心*是 +1.0 的值。因此，从中心到中心是 x-1 个盒子的距离。

改变

```
int cursep = (((x / 2) * value) + (x / 2)); 
```

至

```
void mark() {
...
// value = -1.0 --> cursep = 0
// value = +1.0 --> cursep = x - 1
// ** Adjust these 4 vars as needed to re-map your translation **
double val_min = -1.0;
double val_max = +1.0;
int  cur_min = 0;
int  cur_max = x - 1;
//  y = (y1-y0)/(x1-x0)*(x-x0) + y0
double cur_d = (cur_max - cur_min)/(val_max - val_min)*(value - val_min) + cur_min;
int cursep = floor(cur_d + 0.5); 
```

`-3`4不清楚`wmove(window, currenty + 1, cursep - 3);`

# ios - UIScrollView 里面的 UIScrollView

> ID：15437515
> 
> 赞同：29
> 
> 时间：2013-03-15T16:30:51.603
> 
> 标签：ios, ipad, cocoa-touch, uiscrollview, uikit

我有一个`UIScrollView`和另一个`UIScrollView`里面。它们都水平滚动并具有`pagingEnabled = YES`. 假设我开始滚动内部滚动视图并到达最右边的边界。如果我继续在其中滚动，则外部 scrollView 开始移动。我需要避免这种情况。内视图应以橡皮筋效果跳跃，外视图应保持原位。

希望它很清楚，但这里有一个草图： ![在此处输入图像描述](../Images/ec18f08555fd185de0cb4746f53d7e20.png)

我试过这样设置`outerView.scrollEnabled = NO;`：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    outerView.scrollEnabled = NO;
} 
```

，如果只在innerView中滚动，它完全符合我的需要。OuterView 不再滚动。但是`scrollEnabled`如果我想再次滚动outerView，我必须在某个地方设置回YES。我试过在这里做：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    outerView.scrollEnabled = YES;
} 
```

，但我遇到了同样的问题：在到达 innerView 的最右边边界后，outerView 滚动而不是 innerView 跳转，并带有橡皮筋效果。

任何建议如何解决问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-18T19:25:01.143

**更新**

此解决方案始终有效：

```
@implementation InnerScrollViewController <UIScrollViewDelegate, UIGestureRecognizerDelegate>

- (void)viewDidLoad
{
    UISwipeGestureRecognizer*   swipeGesture = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipe:)] autorelease];
    swipeGesture.delegate = self;
    [self.view addGestureRecognizer:swipeGesture];
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    _outerScrollView.scrollEnabled = NO;
    return YES;
}

- (void)handleSwipe:(UIGestureRecognizer*)gestureRecognizer
{

}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{   
    _outerScrollView.scrollEnabled = NO;
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if (!decelerate)
    {
        _outerScrollView.scrollEnabled = YES;
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    _outerScrollView.scrollEnabled = YES;
}

@end 
```

**-------------------------------------------------- ---------------------**

旧答案：并不总是有效

这是我解决问题的方法：

```
@implementation InnerView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.delaysContentTouches = NO;
    }
    return self;
}

- (BOOL)touchesShouldBegin:(NSSet *)touches withEvent:(UIEvent *)event inContentView:(UIView *)view
{
    return NO;
} 
```

据我了解，`self.delaysContentTouches = NO;`使所有事件立即传递，并`- (BOOL)touchesShouldBegin:(NSSet *)touches withEvent:(UIEvent *)event inContentView:(UIView *)view`防止响应者链传递这些事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:48:02.040

通过以下方式修改您的方法：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    if(scrollView == innerView)
        outerView.scrollEnabled = NO;
    else
        outerView.scrollEnabled = YES;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    if(scrollView == innerView)
    {
         if(innerView.contentOffset.x + innerView.frame.size.width == innerView.contentSize.width)
         {
              outerView.scrollEnabled = NO;
         }
         else
         {
              outerView.scrollEnabled = YES;
         }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-10T20:36:19.943

我有一个类似的问题。我找到了解决方案，但它仅适用于`innerScrollView.bounces = NO`.

```
@interface PageCtrl ()
    @property (weak, nonatomic) IBOutlet UIScrollView *innerScrollView;
    @property(nonatomic) UIPanGestureRecognizer *panLockScroll;
@end

@implementation PageCtrl
- (void)viewDidLoad {
    // ...
    self.innerScrollView.delegate = self;   

    self.innerScrollView.bounces = NO;   // disable bounces!

    self.panLockScroll = [[UIPanGestureRecognizer alloc]initWithTarget:self action:nil];
    self.panLockScroll.delegate = self;
    [self.innerScrollView addGestureRecognizer:self.panLockScroll];
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer*)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer*)otherGestureRecognizer{
    if( gestureRecognizer == self.panLockScroll && 
        otherGestureRecognizer == self.innerScrollView.panGestureRecognizer ){
        return YES;
    }
    return NO;
}

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-10T00:26:06.923

这对我很有效：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
  outerScrollView.scrollEnabled = NO;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
  [NSTimer scheduledTimerWithTimeInterval:0.3
                                     target:[NSBlockOperation blockOperationWithBlock:^{ outerScrollView.scrollEnabled = YES; }]
                                   selector:@selector(main)
                                   userInfo:nil
                                    repeats:NO];
} 
```

请记住在您的类声明中采用 UIScrollViewDelegate 并将 innerScrollView 的委托设置为 self（不要分配 outerScrollView 的委托）

# paypal - 关于 Paypal ExpressCheckout 上返回消息的问题

> ID：15437519
> 
> 赞同：0
> 
> 时间：2013-03-15T16:30:59.700
> 
> 标签：paypal, express-checkout

我收到了 ACK 消息“成功”，但 PAYMENTSTATUS 消息是“拒绝”。而且我找不到交易记录。

本次支付失败？或者是否可以更改为“已完成”？

我不明白有“成功”和“拒绝”的消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:34:14.373

查看[此页面以了解付款状态定义](https://www.paypal.com/webapps/helpcenter/article/?articleID=94021&m=SRE)。

您是否设置了欺诈过滤器，可以在某些情况下自动拒绝付款？

# angularjs - Angular JS异步两个API请求

> ID：15437520
> 
> 赞同：0
> 
> 时间：2013-03-15T16:30:59.957
> 
> 标签：angularjs

目前在Angular中我有这个：

```
app.factory("myService", function($http, $q) {
    return {
        doBoth: function(data) {
            return $q.all([$http.post("/search/local", data), $http.post("/search/shape", data)]);
        }
    };
}); 
```

我这样称呼它：

```
$scope.$on("localSearch", function(event, data) {
    return myService.doBoth(data);
}); 
```

但是我不认为它是异步发生的。它们都需要相当长的时间才能完成，所以我需要 Angular 同时请求两者，所以完整的请求不是一个 + 另一个 - 而是它们都返回的最快时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:31:33.007

如果要在两个查询完成后触发回调，请将其放在`$q.then()`方法中。

```
$scope.$on("localSearch", function(event, data) {
  return myService
    .doBoth(data)
    .then(function (response) {
      // both deffered completed
    });
}); 
```

我在这里创建了示例[http://plnkr.co/edit/7G8oFMSx8cPC98zDhlNq?p=preview](http://plnkr.co/edit/7G8oFMSx8cPC98zDhlNq?p=preview)

# internet-explorer-9 - 如果 IE9 用户在调用正在进行时离开页面，则 AJAX POST 的 ManagedPipelineHandler 崩溃

> ID：15437524
> 
> 赞同：8
> 
> 时间：2013-03-15T16:31:10.137
> 
> 标签：internet-explorer-9, asp.net-4.5, iis-8

设想：

*   用户正在使用 IE9（IE8/10 不受影响）。
*   用户有一个活动会话。
*   `SessionState(SessionStateBehavior.Required)`页面向具有属性（不受影响）的控制器发起 AJAX POST（GET 不受影响）请求`ReadOnly`。有些东西阻止了这个请求被立即处理（例如另一个正在进行的请求，它已经锁定了会话）。
*   当 AJAX POST 正在进行时，用户会离开页面（GET 或 POST - 无关紧要）

结果：

*   AJAX POST 终止并返回 HTTP 500（浏览器已退出侦听，但您可以在 IIS 日志中看到它）。IIS 失败的请求跟踪显示错误为“指定的网络名称不再可用。(0x80070040)。”
*   在执行下一个需要读/写会话访问权限的请求之前，用户的会话被锁定 80 到 120 秒（通常约为 100 秒）。

进一步挖掘 IIS Failed Request Tracing 创建的日志表明，AJAX POST在会话状态被锁定*后*`REQUEST_ACQUIRE_STATE`（在该阶段期间）像这样崩溃，但由于该`REQUEST_RELEASE_STATE`阶段没有发生，因此不会释放会话锁。我假设有一些安全机制可以在 80-120 秒后解锁会话，但是这种很长的挂起显然对我的用户来说是不希望的。

我有一个简单的 VS2012/.Net 4.5/MVC4 项目，演示了[https://github.com/jorupp/Ie9SessionCrash](https://github.com/jorupp/Ie9SessionCrash)上的问题（有一个页面，通过睡眠调用发布了一系列关于操作的帖子）。显示问题的 IIS 失败请求跟踪位于[https://github.com/jorupp/Ie9SessionCrash/tree/master/Ie9SessionCrash/TraceOfHttp500](https://github.com/jorupp/Ie9SessionCrash/tree/master/Ie9SessionCrash/TraceOfHttp500)的项目中。

为了解决这个问题，我们计划确保我们永远不会对需要会话的操作进行任何 AJAX POST 调用，并且：

*   尽可能使用 GET 调用
*   `SessionState(SessionStateBehavior.ReadOnly)`对具有该属性的控制器使用 POST 调用。

有没有更好的方法来处理这个问题，或者我是否缺少与此相关的 IIS/.Net 补丁？还是由于其他原因，这种情况无效？我不愿意为此责怪框架/IIS，但我认为我已经消除了我的代码错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T18:39:42.823

这似乎是 ASP.NET 4.5 中的回归。我们的团队正在开发补丁，但作为临时解决方法，请尝试将此行放在 Web.config 中（更多信息[在这里](http://www.iis.net/configreference/system.webserver/serverruntime)）：

```
<system.webServer>
  <serverRuntime uploadReadAheadSize="0" />
</system.webServer> 
```

请让我们知道这是否适合您！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-15T14:37:57.743

Levi 的答案在 IIS 7.5 或更高版本中效果很好。但如果您运行的是 Server 2008 R1，以下命令也将设置设置：

```
c:\windows\system32\inetsrv\appcmd.exe set config "sitename" -section:system.webServer/serverRuntime /uploadReadAheadSize:"0" /commit:apphost 
```

但是，更好的解决方法是应用 Microsoft 的修补程序来解决问题（所附知识库文章中的#6）

[http://support.microsoft.com/kb/2828841/EN-US](http://support.microsoft.com/kb/2828841/EN-US)
[http://support.microsoft.com/kb/2828842/EN-US](http://support.microsoft.com/kb/2828842/EN-US)

# oauth - Box.api oauth2 在使用 POSTMAN 时访问令牌请求错误“无效的 grant_type 参数或参数丢失”

> ID：15437525
> 
> 赞同：2
> 
> 时间：2013-03-15T16:31:10.320
> 
> 标签：oauth, box-api

文档 ( [http://developers.box.com/oauth/](http://developers.box.com/oauth/) ) 建议使用 POSTMAN 或 curl。

在这个例子中，clientID 是 123，密码是 456 等等。

我正在使用邮递员。在上一步中，我通过以下方式获得了访问代码： [https://www.box.com/api/oauth2/authorize?response_type=code&client_id=123](https://www.box.com/api/oauth2/authorize?response_type=code&client_id=123) 假设响应是 xyz

在下一步中，我使用 POSTMAN 发出 POST 命令（urlencoded） [https://www.box.com/api/oauth2/token?grant_type=authorization_code&client_id=123&client_secret=456&code=xyz](https://www.box.com/api/oauth2/token?grant_type=authorization_code&client_id=123&client_secret=456&code=xyz)

我在步骤 1 中获得代码后的 30 秒内完成了所有这些工作。

错误是 {"error":"invalid_request","error_description":"Invalid grant_type parameter or parameter missing"}

我尝试过的替代方案：添加redirect_uri，添加response_type，仅使用%D~% 括号对正文进行编码。

我注意到 stackoverflow 上的 Box 至少有 5 个类似的问题，没有公认的解决方案，尽管没有 POSTMAN（文档建议）。

通过 POSTMAN 为 BOX API 获取访问令牌的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:07:11.603

我认为`/token`请求的问题在于您将参数放入查询字符串中。这些应该包含在 POST 请求正文中。

# wpf - 如何让 XAML 设计器（VS 2010）将 UserControl 属性绑定到内部 XAML 元素？

> ID：15437527
> 
> 赞同：1
> 
> 时间：2013-03-15T16:31:21.710
> 
> 标签：wpf, visual-studio-2010

我创建了一个带有方向属性的 UserControl。所有的定位工作都应该由内部堆栈面板完成，所以我将它绑定到属性。

这在运行时工作正常，但 WPF 设计器显示堆栈面板的默认值（垂直）而不是方向属性的默认值（水平）。

这是简化的示例。XAML：

```
<UserControl x:Class="MyWpf.MyUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:MyWpf="clr-namespace:MyWpf"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <StackPanel Orientation="{Binding Path=Orientation, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type MyWpf:MyUserControl}}}">
        <TextBlock>A</TextBlock>
        <TextBlock>B</TextBlock>
        <TextBlock>C</TextBlock>
    </StackPanel>
</UserControl> 
```

后面的代码：

```
public partial class MyUserControl : UserControl
{
    public static readonly DependencyProperty OrientationProperty;

    static MyUserControl()
    {
        OrientationProperty = DependencyProperty.Register( "Orientation", typeof( Orientation ), typeof( MyUserControl ), new FrameworkPropertyMetadata( Orientation.Horizontal ) );
    }

    public Orientation Orientation
    {
        get
        {
            return (Orientation)GetValue( OrientationProperty );
        }
        set
        {
            SetValue( OrientationProperty, value );
        }
    }

    public MyUserControl()
    {
        InitializeComponent();
    }
} 
```

我看到的唯一解决方案是将方向包含在 ViewModel 中（并使用 DesignData），但我希望它是干净的。我希望有像 DesignData 这样的东西，但对于控件本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:00:28.297

也许这会有所帮助

[有哪些方法可用于 WPF 中的虚拟设计时数据？](https://stackoverflow.com/questions/1889966/what-approaches-are-available-to-dummy-design-time-data-in-wpf)

我猜你可以尝试设置`d:Orientation`你的`StackPanel`.

大多数绑定扩展在运行时发挥它们的魔力（有时您需要，有时在编译时）。我不是 100%，但你可以尝试`{Binding ElementName=_userControl, Path=Orientation}`- 但即使它“有效”，我认为这对你不起作用，因为那是你的自定义属性。

这是一个关于类似内容的链接，它解释了一点（但对您的情况没有帮助）。
[WPF TemplateBinding 与 RelativeSource TemplatedParent](https://stackoverflow.com/questions/1131222/wpf-templatebinding-vs-relativesource-templatedparent)

# python - 使用 os.walk 读取多个输入文件，以及 GetMessage 进度更新消息

> ID：15437534
> 
> 赞同：3
> 
> 时间：2013-03-14T13:49:26.097
> 
> 标签：python, arcpy, csv

我找不到这个问题的解决方案，所以我们开始吧。我正在编写一个脚本，该脚本将从 CSV 文件中读取数据，并且我想自动化代码以重复并通读一个文件夹中的多个 CSV 文件。我正在尝试使用 os.walk，但遇到错误。

问题： 1、如何正确使用os.walk？2\. 在通过输入 CSV 文件时插入进度更新的最佳方式是什么？

脚本的第一部分，我需要实现 os.walk，如下：

```
import sys
import os
import arcpy
import csv
from arcpy import env

## Set overwrite 
arcpy.env.overwriteOutput = True
print arcpy.env.overwriteOutput

## Set workspace 
arcpy.env.workspace = "C:\\Home\\directory\\"
workspace = "C:\\Home\\directory\\"
print workspace

for root, dirs, files in os.walk('C:\\Home\\directory\\CSV\\'):  
    print root, dirs, files
    ## Directory where I'm keeping the CSVs
    full_path = os.path.join(root, files)       

    rows = csv.DictReader(open(full_path, "rb"))
    if os.path.exists(outpath)==False:
         os.mkdir(outpath)

    for row in rows: # here begin reading through the CSV for the rest of the script 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:13:59.950

哦，我刚看到你的问题。您将加入整个列表`files`以创建您的`full_path`变量。如果您不需要深入了解 csv 文件所在的子目录，我可能会使用该`glob`模块。我还使用了 rawstring 字符`r`；这个小家伙很有帮助，因为它允许您复制和粘贴路径，而无需为每个目录添加另一个反斜杠或将它们更改为正斜杠：

```
import sys
import os
import arcpy
import csv
from arcpy import env
import glob

## Set overwrite 
arcpy.env.overwriteOutput = True
print arcpy.env.overwriteOutput

## Set workspace 
workspace = r"C:\Home\directory"
arcpy.env.workspace = workspace
csv_dir = os.path.join(workspace,'CSV')

print workspace

csvList = glob.glob(os.path.join(csv_dir,'*.csv'))
csvNameList = []
for full_path in csvList:

    ## Append csv file name to list
    csvNameList.append(os.path.basename(full_path))

    ## Directory where I'm keeping the CSVs
    arcpy.AddMessage(full_path)       

    rows = csv.DictReader(open(full_path, "rb"))
    if os.path.exists(outpath)==False:
         os.mkdir(outpath)

    for row in rows: # here begin reading through the CSV for the rest of the script 
```

要回答问题的第二部分，请使用该`arcpy.AddMessage(csv_name)`功能将 csv 文件的名称打印到工具进度屏幕（如果您在脚本工具中使用它）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T15:17:18.943

如果您想坚持使用 os.walk 作为 Jason 回答的替代方案，那么我通常会执行以下操作来查找 CSV 文件，然后使用它们

```
fileList = []
count = 0

directorypath = "C:\Home\directory\CSV"

for dirname, dirnames, filesnames in os.walk(directorypath):
    for filename in filenames:
       if filename.endswith(".csv"):
          fileList.append(filename)
          count = count + 1 
```

这样你就可以使用 fileList 来处理

# java - Java simpleDateFormat 转换

> ID：15437541
> 
> 赞同：3
> 
> 时间：2013-03-15T16:32:02.227
> 
> 标签：java, date, simpledateformat

但是尝试执行日期比较：

`date1=new SimpleDateFormat("yy-MM-dd HH").parse("12-03-25 02")`等于

`date2=new SimpleDateFormat("yy-MM-dd HH").parse("12-03-25 03")`

问题是什么？以`date1.getHour`我得到`3`。

欢迎提出想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:41:37.287

2012 年 3 月 25 日是许多国家/地区完成夏令时切换的日子，通常是 2 点钟。因此，在您所在的地区，凌晨 2 点和凌晨 3 点是同一时间。这就是你看到这个的原因。

# mysql - 子查询仅当它包含行时

> ID：15437546
> 
> 赞同：0
> 
> 时间：2013-03-15T16:32:15.233
> 
> 标签：mysql

好的，所以我在查询中内置了一个子查询。但我希望只有在子查询表（shop_stock）中实际上有行时才会发生这种情况。

```
SELECT id
FROM item
WHERE restocks_at = ?
AND rarity > ?
AND rarity < ?
AND price > 0
AND amount < (SELECT COUNT(id)
   FROM shop_stock
   WHERE item_id = item.id
   AND shop_id = ?)
ORDER BY rand()
LIMIT 1 
```

我希望项目表中的金额列仅小于表 (shop_stock) 中具有该项目 ID 的行，如果它实际上包含行。因为因为它没有行开头，所以它甚至根本不会从查询中提取任何内容。但是我正在循环循环我想要插入多少项目，并且在一开始，该表（shop_stock）中将没有任何内容。

如果它从不将该 ID 插入到该表中，则该查询将永远不会运行。所以我很困惑。我想基本上计算项目 ID 以及它在子查询中出现的次数（如果它甚至在表中）。

所以总的来说，每个项目都有一个数量 (2-30)，这意味着项目 ID 21 的数量可能是 5 意思是我只希望最多 5 个项目来补充该项目。所以我试图不进行两次查询，我必须选择一个项目，然后检查它是否已经在 shop_stock 表中 5 次，如果不是，将项目插入到 shop_stock 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:24:05.730

好吧哇老实说..标志只是放错了方向。如果金额>子查询表中已有的内容，则插入..不少于...：/对不起..

```
SELECT id
FROM item
WHERE restocks_at = 1
AND rarity > 5
AND rarity < 60
AND price > 0
AND amount > (SELECT COUNT(id)
    FROM shop_stock
    WHERE item_id = item.id
    AND shop_id = 1)
ORDER BY rand()
LIMIT 1 
```

# android - 进度条不显示进度条

> ID：15437548
> 
> 赞同：1
> 
> 时间：2013-03-15T16:32:32.793
> 
> 标签：android, progress-bar, progressdialog

我正在使用进度条，但它没有显示持续的进度。它给出一个绿色条并且不显示连续进度（即 10 倍进度）。

```
private ProgressBar mProgress;
private int mProgressStatus = 0;

private Handler mHandler = new Handler();

protected void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.fetchee_distance);
    mProgress = (ProgressBar) findViewById(R.id.p);

    Thread timer = new Thread() {
        public void run() {
            try {
                sleep(1000);
                while (mProgressStatus < 100) {
                    mProgress.setProgress(mProgressStatus);
                    // mProgress.setMax(100);
                    mProgressStatus += 10;

                    System.out.println("count" + mProgressStatus);

                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                /*
                 * Intent openMainList = new Intent(StartPoint.this,
                 * in.isuru.caf.MainList.class);
                 * startActivity(openMainList);
                 */
            }
        }
    };
    timer.start();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:47:51.350

在循环中移动了睡眠线程，在您的代码中，它首先睡眠，然后进入 while 循环，在那里它非常快速地通过迭代并导致直接显示完整的 100% 条，而不是睡眠。

> 私有进度条 mProgress；私有int mProgressStatus = 0；
> 
> 私有处理程序 mHandler = new Handler();
> 
> protected void onCreate(Bundle icicle) { super.onCreate(icicle);
> 
> ```
> setContentView(R.layout.fetchee_distance);
> mProgress = (ProgressBar) findViewById(R.id.p);
> 
> Thread timer = new Thread() {
>     public void run() {
>         try {
> 
>             while (mProgressStatus < 100) {
>                   sleep(1000);//Sleep moved to while thread
>                 mProgress.setProgress(mProgressStatus);
>                 // mProgress.setMax(100);
>                 mProgressStatus += 10;
> 
>                 System.out.println("count" + mProgressStatus);
> 
>             }
>         } catch (InterruptedException e) {
>             e.printStackTrace();
>         } finally {
>             /*
>              * Intent openMainList = new Intent(StartPoint.this,
>              * in.isuru.caf.MainList.class);
>              * startActivity(openMainList);
>              */
>         }
>     }
> };
> timer.start(); } 
> ```

# ruby - 是否可以从 set_trace_func 中获取即将返回的值？

> ID：15437549
> 
> 赞同：2
> 
> 时间：2013-03-15T16:32:37.810
> 
> 标签：ruby, trace

我想编写一些这样的 Ruby 代码来查看每个调用的方法（例如，脚本）返回的值：

```
set_trace_func proc { |event, file, line, id, binding, classname|
  if event == "return"
    puts "returning #{return_value} from #{classname}.#{id}"
  end
} 
```

这可能吗？`return_value`不知何故，我可以在上面的代码范围内吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:43:01.477

Ruby 2.0 有一个[`TracePoint`](http://ruby-doc.org/core-2.0/TracePoint.html)包含`return_value`实例方法的新类。你可以像这样使用它：

```
trace_point = TracePoint.new(:return) do |t| # event type specification is optional
  puts "returning #{t.return_value} from #{t.defined_class}.#{t.method_id}"
end

trace_point.enable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T01:26:33.003

如果有人仍然对 1.9.3 感兴趣，有一种笨拙的方法可以做到这一点：

您可以使用`eval(code, binding)`从`set_trace_func`处理程序中评估调用的函数，然后`eval`评估您记下的返回值。

您必须自己重构调用者代码。就像是：

```
arg_arr = []
params = eval('method(__method__).parameters', binding)
params.each do |param|
  case param[0]
        when :req, :opt
          arg_arr << param[1]
        when :rest
          arg_arr << '*' + param[1]
        else
          puts "Need handler for type #{param[0]}"
      end
end

call_expr = "#{id} #{arg_arr.join(',')}"
puts "Call with <#{call_expr}>"
res = eval(call_expr, binding)
puts "sub-method #{id} returned #{res}"
eval("return #{res.inspect}", binding) 
```

您只能在下一级执行此操作，因为`set_trace_func`在其处理程序的持续时间内已关闭。加上 的输出`arguments`似乎没有记录。此外，它使用邪恶。

# jquery - .height 上的准确数字

> ID：15437556
> 
> 赞同：2
> 
> 时间：2013-03-15T16:32:51.023
> 
> 标签：jquery, css, html, resize

我在 jquery 中制作了一个宽度为 100% 且高度为 width*.1 的 div。

尽管有这个比例，我设法扩大了高度，但我无法准确地扩大它。

我实际上想将它扩展到 400px，这可能吗？

这是我的代码：http: [//jsfiddle.net/2drYk/3/](http://jsfiddle.net/2drYk/3/)

```
* 
{
margin:0; 
padding:0; 
border:0
}

.container
{
    width:100%;
    background:black;

}

<figure class="container">
</figure>

$('.container').height($(this).width()*0.1);
  var toggleCheck =0;
$('.container').click(function(){

    if(toggleCheck ==1){
         $(this).stop().animate({height: ( $(this).height()-$(this).width()*0.1 )});
        toggleCheck = 0;
    }else{
 $(this).stop().animate({height: ($(this).width()*0.1 + $(this).height())});
        toggleCheck = 1;
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:45:12.190

`**[LIVE DEMO](http://jsfiddle.net/2drYk/7/)**`

```
var $cont = $('.container'),
    init_size = $cont.width() * 0.1,
    c = 0,                // counter
    s = [400,init_size];  // sizes array

$cont.height( init_size );

$cont.click(function(){   
  $(this).stop().animate({ height: s[c++%2] });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:58:53.923

如果您只想将容器增加 400px，您可以使用以下 js：

```
var container = $('.container');
container.height(container.width()*0.1);
var originalHeight = container.height();
var newHeight = 400 + originalHeight;

container.click(function(){
  if($(this).height() == originalHeight){
     $(this).stop().animate({height: newHeight});
  }else{
     $(this).stop().animate({height: originalHeight});
  }
}); 
```

[http://jsfiddle.net/2drYk/16/](http://jsfiddle.net/2drYk/16/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:45:00.003

```
$(this).stop().animate({height: 400}); 
```

# php - Preg_replace 或 JavaScript .remove 删除 wordpress 网站中的元素？

> ID：15437558
> 
> 赞同：0
> 
> 时间：2013-03-15T16:32:52.910
> 
> 标签：php, jquery

哪种方法是删除需要删除的非常特定的 div 的更好方法？

jQuery 的 .remove？还是在内容加载之前通过 preg_replace 函数？

我问的原因是，因为 jQuery 在创建元素后删除了元素，我想也许 1,000 个（随机数）中有 1 个 jQuery 可能加载缓慢，用户会在页面加载的前半秒内看到元素消失或其他.

还是这个假设完全错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:38:44.100

将评论转换为答案：

删除元素的最简单方法是使用合适的 CSS 选择器定位它并赋予它`display:none`。然后，除非 FOUC（无论如何都会分散用户的注意力），否则该元素将不会显示，即使只有几分之一秒。

话虽如此，首先不生成元素更为合理。源中的某些东西必须创建它，所以只需从源中删除它。

# qt - 如何在 Qt Fakevim 中设置用户命令？

> ID：15437559
> 
> 赞同：8
> 
> 时间：2013-03-15T16:32:55.430
> 
> 标签：qt, vim, qt-creator

(1) 例如，我想`map gd g*`在 Qt 的 Fakevim 中设置如下，但失败了。 ![在此处输入图像描述](../Images/9059007a7934ae617e91c949cdd9a3cb.png)

(2) 还有我想把F3设置为保存命令，怎么做？

(3) 在 Fakevim 中，它提供了一个选项“Read .vimrc”，但是在哪里可以找到文件 .vimrc？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T19:47:55.760

看起来 FakeVim 的文档并不多，因此可能不存在官方来源。其中大部分是通过实验获得的。

如果你想深入挖掘，我想没有像实际*来源*那样官方的来源：http : [//qt.gitorious.org/qt-creator/qt-creator/blobs/0809986e501415fe2c8508800b94b5b3169dc048/src/plugins/fakevim/fakevimplugin.cpp](http://qt.gitorious.org/qt-creator/qt-creator/blobs/0809986e501415fe2c8508800b94b5b3169dc048/src/plugins/fakevim/fakevimplugin.cpp)

**用户命令**

首先，要意识到在 Tools>Options>FakeVim>User Command Mapping 中，您只是在设置用户操作将执行什么，而不是如何执行它们。

默认情况下，用户命令 #1 通过按 Alt-V 触发，然后按 1。

Alt-V，然后是 2，触发用户操作 #2，依此类推。

您可以通过通用 QtCreator 配置界面更改键盘快捷键，位于 Tools>Options>Environment>Keyboard 下。有一个“FakeVim”部分列出了所有用户操作。选择您选择的用户操作，按“快捷方式”下输入字段中的小“擦除”图标，然后按所需的快捷键，该快捷键应出现在输入字段中。

其次，要在您通常按 Enter 键的位置完成命令，您应该在命令后按字面意思输入 <CR>。您还需要输入 ':' 才能进入命令模式。

因此，如果您想通过 FakeVim 将 vim 保存命令 ":w" 映射到 F3，您可以：

*   转到工具>选项>FakeVim>用户命令映射。
*   输入 ":w<CR>" 作为用户命令之一（比如 #7）。
*   转到工具>选项>环境>键盘。
*   找到 FakeVim 动作“UserAction7”。
*   将 F3 设置为它的快捷方式。

现在，每次您在编辑器中时，您都应该能够单击 F3 并执行 FakeVim :w 命令，这将保存您的文件。

请注意，还有一个选项可以直接在 QtCreator 键盘设置中设置“保存”的快捷方式，因此对于这个特定的快捷方式，您实际上不需要通过 FakeVim。

其他 vim 命令的快捷键设置应该类似。请注意，您仅限于 FakeVim 实现的 vim 命令子集。请参阅上面链接的源代码，以检查您想知道的任何特定命令。

**.vimrc 文件**

在 Linux 上，这将是 ~/.vimrc，一个位于用户主目录中的文件。我想你问的是Windows。

我能找到的最好的来源是这个关于在 Windows 上很难使用 Fakevim 的 vimrc 的错误报告：[https ://bugreports.qt.io/browse/QTCREATORBUG-8748](https://bugreports.qt.io/browse/QTCREATORBUG-8748)

之后，Fakevim 查找的文件是 %USERPROFILE% 中的“.vimrc”（您可以在资源管理器中输入类似的名称以转到该文件夹​​）。但是，在 Windows 上访问具有类似名称的文件是很棘手的。（这就是为什么真正的 vim 在 Windows 上使用 '_vimrc' —— 但 FakeVim 显然没有，至少目前是这样。）

这是一个超级用户页面，其中包含如何在 Windows 上创建此类文件的解决方法：[https ://superuser.com/questions/64471/create-rename-a-file-folder-that-begins-with-a-dot-in-视窗](https://superuser.com/questions/64471/create-rename-a-file-folder-that-begins-with-a-dot-in-windows)

# java - LazyInitializationException：延迟初始化角色集合失败

> ID：15437564
> 
> 赞同：0
> 
> 时间：2013-03-15T16:33:08.030
> 
> 标签：java, spring, hibernate

嗨，我有这样的 hbm

```
<hibernate-mapping package="com.mydomain.demand" default-access="field">
  <class name="DemandHistory" table="DMND_PROFL_HIST">
    <id name="id" column="DMND_PROFL_HIST_ID" type="long">
      <generator class="sequence">
        <param name="sequence">DMND_PROFL_HIST_ID_SEQ</param>
      </generator>
    </id>
    <version name="version" column="WRITE_COUNT" type="long" unsaved-value="null" />
    ................
            ...............
    <property name="demandHistSyncId" column="DMND_PROFL_HIST_SYNC_ID" type="long" />
    <many-to-one name="demandStatType" column="DMND_PROFL_STAT_TYP_ID" class="com.mydomain.types.DemandProfileStatusType"
      insert="false" update="false" />
    <bag name="demandHistLineItems" **fetch="select"**>
      <key property-ref="demandHistSyncId" column="DMND_PROFL_HIST_SYNC_ID" />
      <one-to-many class="com.mydomain.demand.DemandLineItemHistory" />
    </bag>
    <property name="demandId" column="DMND_PROFL_ID" type="long" />
    <property name="clmRcvblId" column="CLM_RECVBL_ID" type="long" />
    <property name="renterResponsible" column="RENTR_RSPBL_IND" type="boolean" />
    <property name="billerNoticeSent" column="BILLER_NOTC_SNT_IND" type="boolean" />
    <property name="subroPartyId" column="SUBRO_PRTY_ID" type="long" />
    <property name="demandCreateAdjusterId" column="DMND_PROFL_CRTE_ADJR_ID" type="string" />
    <property name="demandCreateDt" column="DMND_PROFL_CRTE_DTE" type="calendar" />
  </class>
</hibernate-mapping> 
```

它抛出

> LazyInitializationException：延迟初始化角色集合失败

例外。如果我将获取更改为“加入”它可以工作，但没有获得所需的记录。不了解确切的问题。请指教

堆栈跟踪是

```
2013-03-15 11:40:32,878|WARN|dev|||http-8081-1|com.myapp.webservice.demand.DemandHistoryWebServiceImpl|DH_WEBSERV_FAILED
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.mydomain.demand.DemandHistory.demandHistLineItems, no session or session was closed
    at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:380)
    at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:372)
    at org.hibernate.collection.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:119)
    at org.hibernate.collection.PersistentBag.isEmpty(PersistentBag.java:255)
    at org.apache.commons.collections.CollectionUtils.isEmpty(CollectionUtils.java:979)
    at org.apache.commons.collections.CollectionUtils.isNotEmpty(CollectionUtils.java:992)
    at com.myapp.service.demand.DemandHistorySearchResults.toResultItems(DemandHistorySearchResults.java:65)
    at com.myapp.service.demand.DemandHistorySearchResults.<init>(DemandHistorySearchResults.java:39)
    at com.myapp.domain.demand.DemandHistoryDao.search(DemandHistoryDao.java:93)
    at com.myapp.service.demand.DemandHistoryServiceImpl.searchDemandHistory(DemandHistoryServiceImpl.java:38)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy12.searchDemandHistory(Unknown Source)
    at com.myapp.webservice.demand.DemandHistoryWebServiceImpl.getDemandHistory(DemandHistoryWebServiceImpl.java:79)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.myappserver.ws.RequestHandler.invokeEndpoint(RequestHandler.java:459)
    at com.myapp.server.ws.RequestHandler.service(RequestHandler.java:260)
    at com.myapp.server.ws.RsiEndpointServlet.doPost(RsiEndpointServlet.java:91)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:619) 
```

以及 DemandHistorySearchResults 中的代码：

```
public class DemandHistorySearchResults
    extends PageableSearchResults<DemandHistorySearchResultItem> {
  public DemandHistorySearchResults(List<DemandHistory> profiles, PaginationDetail pageDetail) {
    // set pagedetails
    setPaginationDetail(pageDetail);

    List<DemandHistorySearchResultItem> items = toResultItems(profiles);
    setPagableData(items);
    setSearchPerformed(true);
  }

  private List<DemandHistorySearchResultItem> toResultItems(List<DemandHistory> profiles) {
    List<DemandHistorySearchResultItem> items = CollectionFactory.newArrayList();

    if (CollectionUtils.isEmpty(profiles)) {
      return items;
    }

    for (int i = 0; i < profiles.size(); i++) {
      DemandHistory profile = profiles.get(i);
      DemandHistorySearchResultItem item = new DemandHistorySearchResultItem();
      item.setDemandHistId(profile.getId());
      item.setDemandId(profile.getDemandId());
      item.setDemandCreateAdjusterId(profile.getDemandCreateAdjusterId());
      item.setDemandCreateDt(profile.getDemandCreateDt());

      if (profile.getDemandStatType() != null) {
        item.setDemandStatTypeDesc(profile.getDemandStatType().getDescription());
      }

      ***List<DemandLineItemHistory> lineItems = profile.getDemandHistLineItems();***

      if (CollectionUtils.isNotEmpty(lineItems)) {
        List<DemandLineHistoryResultItem> resultItems = CollectionFactory.newArrayList();

        for (DemandLineItemHistory lineItem : lineItems) {
          DemandLineHistoryResultItem resultItem = new DemandLineHistoryResultItem();

          CostType costType = lineItem.getCostType();

          if (costType != null) {
            resultItem.setCostTypeId(costType.getId());
            resultItem.setCostTypeCode(costType.getCode());

            // Rule - If cost type is Misc Charge then cost description would be Line Item Misc Charge Descriprion
            if (costType.isMiscCharge()) {
              resultItem.setCostTypeDesc(lineItem.getMiscChargDsc());
            }
            else {
              resultItem.setCostTypeDesc(costType.getDescription());
            }
          }

          resultItem.setLineItemAmt(lineItem.getLineItemAmt());
          resultItem.setLineItemAmtDelta(lineItem.getLineItemAmtDelta());

          resultItems.add(resultItem);
        }

        item.setDemandHistLineItems(resultItems);
      }

      item.setBillerNoticeSent(profile.getBillerNoticeSent());
      item.setClmRcvblId(profile.getClmRcvblId());
      item.setRenterResponsible(profile.getRenterResponsible());
      item.setSubroPartyId(profile.getSubroPartyId());
      item.setRowNumber(i + getPaginationDetail().getRecordStart());
      item.setTotalCount(getPaginationDetail().getTotalRecords());

      items.add(item);
    }

    return items;
  } 
```

# javascript - PhantomJS 中的窗口对象

> ID：15437565
> 
> 赞同：2
> 
> 时间：2013-03-15T16:33:10.240
> 
> 标签：javascript, node.js, phantomjs

我在 PhantomJS 的一些文档中看到它可以访问全局“文档”对象，但我不知道是否也可以访问全局“窗口”对象。

所以我的问题是，有没有一种特殊的方法，或者我可以在使用 PhantomJS 初始化页面后直接调用窗口对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T17:08:43.417

从终端运行`phantomjs`为您提供了一个可以玩的交互式会话。

如果您随后运行`console.log(window)`，您将看到您可以访问该`window`对象。

```
phantomjs> console.log(window);
[object DOMWindow] 
```

# java - 生成动态 URL

> ID：15437566
> 
> 赞同：0
> 
> 时间：2013-03-15T16:33:10.703
> 
> 标签：java, jakarta-ee

我有一个使用我们网站提供的功能之一的不同公司的用户列表。每当他们联系我们的业务组时，我们需要通过电子邮件向请求者发送一个 url，以便他们上传一些数据。所有这些外部用户都没有任何专用帐户。但是，我们不希望向他们提供静态链接，因为任何人都可以通过 Internet 访问该链接。我们希望生成动态链接。这是通常做的事情吗？是否有行业接受的方式来做到这一点？我们是否应该确保动态链接在一定时间后过期 - 如果是，是否有任何设计选项？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:37:28.880

您可能有一个将令牌作为参数的静态 URL。例如。`http://www.mycompany.com/exchange/<UUID>`或`http://www.mycompany.com/exchange?token=<UUID>`。

UUID 可以在一个时间范围内有效，或者仅限于一次使用（一次访问或一次上传）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:42:32.857

通常， url 的*参数*而不是实际的 url 是动态的。基本上，您生成存储在某处的参数，通常在数据库中，并使用 url 和参数发送电子邮件。此 url 仅在有限的时间段内有效，并且可能仅对一个请求有效。

问题解答：

*   是的，这是非常常用的，例如，取消订阅邮件列表或使用有效的电子邮件地址验证帐户
*   我不知道“行业接受”的任何单一方式，有很多方法可以做到，但这个想法并不复杂 - 你只需要决定一个合适的令牌格式
*   通常，您应该确保链接在一定时间后过期。取决于可能是几天、一周或其他时间的用例。在实践中，您会删除或禁用数据库中生成的参数。但是，如果这些数据可能需要很长一段时间，您可能需要考虑一个功能，以便以后可以检索它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T17:14:15.933

其他变体是在 Web 浏览器中使用该站点上存在的 cookie（当然，如果有的话）。
但是这个解决方案有一些缺点：
用户可以在不同的机器、不同的浏览器中打开链接。用户可以清除所有 cookie，或者当用户尝试继续授予的 URL 时，它们可以在上次访问您的站点后过期。在这些情况下，用户将无法访问您的页面。

# c# - 如何使用回溯算法获得所有可能的解决方案？

> ID：15437568
> 
> 赞同：2
> 
> 时间：2013-03-15T16:33:15.150
> 
> 标签：c#, solution, sudoku, backtracking

我正在使用[这个 youtube 视频](http://www.youtube.com/watch?v=p-gpaIGRCQI)中描述的回溯算法。

现在，我应该能够获得所有可能的解决方案。我能用回溯算法做到这一点吗？如何做到的？如果不可能，我应该使用哪种其他（简单）算法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T17:08:57.673

这个问题不太适合这个网站，因为它似乎与实际代码无关。

但无论如何我都会试一试。

当然，您可以使用回溯算法获得所有可能的解决方案。记住回溯算法的工作原理：

```
而（仍有猜测可用）
    做一个猜想
    用猜测解决难题
    如果有解决方案，则记录解决方案并退出循环。
    从可能的猜测列表中划掉猜测
如果你记录了一个解决方案，那么这个难题是可以解决的。
```

如果您想要所有解决方案，则只需将算法修改为：

```
而（仍有猜测可用）
    做一个猜想
    用猜测解决难题
    如果有解决方案，则记录解决方案。不要放弃。
    从可能的猜测列表中划掉猜测
如果您记录了任何解决方案，那么这个难题是可以解决的。
```

顺便说一句，我写了一系列关于在 C# 中使用图形着色回溯算法解决数独的博客文章；您可能会感兴趣：

[https://docs.microsoft.com/en-us/archive/blogs/ericlippert/graph-colouring-with-simple-backtracking-part-one](https://docs.microsoft.com/en-us/archive/blogs/ericlippert/graph-colouring-with-simple-backtracking-part-one)

在此代码中，您将看到以下行：

```
return solutions.FirstOrDefault(); 
```

“解决方案”包含一个枚举所有解决方案的查询。我只想要第一个这样的解决方案，所以这就是我要求的。如果您想要每个解决方案，只需重写程序，使其不会调用`FirstOrDefault`. 请参阅下面的评论以获取一些注释。

# facebook - 如何从时间线中隐藏 Facebook 帖子？

> ID：15437570
> 
> 赞同：1
> 
> 时间：2013-03-15T16:33:20.857
> 
> 标签：facebook, hide, facebook-timeline

我迫切希望在自己的时间线上隐藏 Facebook 帖子（我的或朋友的帖子），但它不起作用，我什至不知道这是否可能！

我所做的是：

1.  首先，我检查了特定帖子的时间线是否可以隐藏
2.  我实现了这段代码：

    ```
    facebookClient.publish(String.format("%s", postKey), Post.class, Parameter.with("is_hidden", "true")); 
    ```

我实际上有这样的回应：

```
 missing parameter reorder_pids[] 
```

如果我指定它，它会要求我提供有效的合并照片 ID 等。但我不确定我是否走错了方向。我的一位同事告诉我，这对他有用，但无法确定有什么区别。

我在普通帐户和 Facebook 页面上尝试了此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T01:24:59.997

这里是：

```
String _mode = "hidden";    // or "normal" or "starred"
facebookClient.publish(_post, FacebookType.class, Parameter.with("timeline_visibility", _mode)); 
```

一旦 Post 被隐藏 - 您将无法通过 FQL 请求检索它，即使是 post_id。这几乎就像“删除”。但是您仍然可以使用timeline_visibility=normal 进行发布。

# mips - MIPS noOps 和气泡

> ID：15437574
> 
> 赞同：0
> 
> 时间：2013-03-15T16:33:26.907
> 
> 标签：mips, noop

是否有一组特定的 MIPS 操作会导致气泡或无操作？还是仅取决于后续调用需要哪些寄存器？在分支预测方法之外，一个分支是否总是导致两个 noOps？

```
LW R2 0(R1)
Label1:         BEQ R2 R0 Label2    #not taken once then taken
        LW R3 0(R2)
        BEQ R3 R0 Label1    #taken
        ADD R1 R3 R1
Label2      AS R1 0(R2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:30:33.420

据此[，](http://en.wikipedia.org/wiki/MIPS_architecture) NOP *（无操作）*：

```
sll $0,$0,0 
```

我也相信每条以 $0 作为目标寄存器的指令都是 NOOP。

# php - 分组...（mysql加入）

> ID：15437578
> 
> 赞同：0
> 
> 时间：2013-03-15T16:33:48.723
> 
> 标签：php, mysql, left-join

我不知道如何总结分组汽车的颜色。品牌（不同）...请帮助。

我的问题不能简单地解释（很多代码）所以看看：[http ://sqlfiddle.com/#!2/17bac6/2](http://sqlfiddle.com/#!2/17bac6/2)

我想：

```
品牌 蓝色 红色 绿色 黑色
沃尔沃 320 7289 3313 1198
雪铁龙 538 3286
座位 1245
奥迪 1076 2153 2595
宝马 135 5637 864 282

```

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:49:46.953

据我了解，这应该是您正在寻找的。

```
SELECT  cars.brand,
(
  SELECT COUNT(*) FROM blue 
  WHERE blue.prr = cars.id_p
) as "blue",
(
  SELECT COUNT(*) FROM red 
  WHERE red.prr = cars.id_p
) as "red",
(
  SELECT COUNT(*) FROM green 
  WHERE green.prr = cars.id_p
) as "green",
(
  SELECT COUNT(*) FROM black 
  WHERE black.prr = cars.id_p
) as "black"
FROM    cars
WHERE   cars.user_id = 54 
AND     cars.pend between '2012-01-01' AND '2012-12-31' 
GROUP BY cars.brand 
```

如果您设计了该架构，请查看数据库规范化，并了解关系，因为设计不是很好（无意冒犯）

# regex - VBScript 正则表达式：负向后查找：匹配不在注释中的 VBScript 方法声明

> ID：15437581
> 
> 赞同：1
> 
> 时间：2013-03-15T16:34:05.163
> 
> 标签：regex, vbscript

我正在尝试使用 VBScript 构造一个正则表达式来提取未注释掉的 VBScript 方法声明。例如，考虑以下方法：

```
Public Function thisContainsACommentedRoutine()
''   Public Sub myRoutine1()
''       print "hello"
''   End Sub
    thisContainsACommentedRoutine = 1 + 1
End Function

'Public Sub myRoutine2()
'    print "routine2"
'End Sub

    Private Sub sub1()
        print "sub1"
    End Sub 
```

我希望提取以下方法声明：

```
Public Function thisContainsACommentedRoutine()
Private Sub sub1() 
```

我尝试使用以下正则表达式（以及其他许多正则表达式；我尝试使用否定的后视进行研究，但 VBScript 不支持它们，因此我也尝试了否定的前瞻）：

```
(?!')(Public|Private) (Function|Sub) .* 
```

使用[http://regexpal.com](http://regexpal.com)，但正在提取所有方法声明，我想忽略在方法声明之前包含注释字符的任何行。

上面第一个代码块中的代码作为整个字符串返回给我，我正在使用 VBScript 的正则表达式对象在整个方法字符串上执行模式。另外，我想避免一次处理一行以节省时间。

我尝试查找类似的问题（[Regular Expression Negative Lookbehind Alternative for VBScript](https://stackoverflow.com/questions/1357769/regular-expression-negative-lookbehind-alternative-for-vbscript)），但不知何故，我正在使用的负前瞻正则表达式仍在获取被注释掉的方法。

有什么建议么？

**编辑：**我改用.NET 的正则表达式对象，它支持否定的后向断言。我现在使用以下正则表达式：

```
\s*?(?<!')\s*?(Public|Private) (Function|Sub) .* 
```

但是，我仍然得到不正确的匹配：

```
Public Function thisContainsACommentedRoutine()
Public Sub myRoutine1()
Private Sub sub1() 
```

匹配“Public Sub myRoutine1()”不应该出现；不管方法前有多少个空格，如果方法声明前至少有一个注释字符（行中的任何位置），我不希望方法匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:48:45.977

VBScript 是面向行的。因此，您可以尝试通过使用 Multiline (VBScript) RegExp 来利用该功能，如下所示：

```
 Dim sAll : sAll = goFS.OpenTextFile("..\testdata\subfnc.txt").ReadAll()
  WScript.Echo sAll
  WScript.Echo "--------------"
  Dim reSF : Set reSF = New RegExp
  reSF.Global     = True
  reSF.IgnoreCase = True
  reSF.Multiline  = True
  reSF.Pattern    = "^\s*((?:(?:Public|Private)\s+)?(?:default\s+)?(?:Sub|Function).+)\r$"
  Dim oMT
  For Each oMT in reSF.Execute(sAll)
      WScript.Echo qq(oMT.SubMatches(0))
  Next 
```

输出：

```
Public Function thisContainsACommentedRoutine()
''   Public Sub myRoutine1()
''       print "hello"
''   End Sub
    thisContainsACommentedRoutine = 1 + 1
End Function

'Public Sub myRoutine2()
'    print "routine2"
'End Sub

    Private Sub sub1()
        print "sub1"
        print "Private Sub Sub2(abc)"
    End Sub

         Sub Nix
         End Sub ' Nix

 Public Default Function Zilch(Whatever)
End Function

--------------
"Public Function thisContainsACommentedRoutine()"
"Private Sub sub1()"
"Sub Nix"
"Public Default Function Zilch(Whatever)" 
```

如果您的代码包含跨行的子/函数声明（_abomination），则必须预处理文件；然后你可以彻底删除评论（并且仍然使用上面给出的模式）。

# tsql - 你可以让 DateAdd 间隔根据你要添加的项目的价值而变化吗？

> ID：15437583
> 
> 赞同：0
> 
> 时间：2013-03-15T16:34:14.393
> 
> 标签：tsql

我在 sql 查询中有以下元素

```
datediff(d, dateadd(day, -14 - thing.daystoadd, getdate()), thing.EndTime) as DateExpDiff 
```

我可以根据 thing.EndTime 使 -14 有所不同吗？

例如，如果一行 thing.EndTime<'3/15/2013' 我希望它是-14，但如果它> 3/15/2013 我希望它是-10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:38:06.840

`CASE`声明应该有效：

```
datediff(d, dateadd(day, CASE WHEN thing.EndTime<'3/15/2013' THEN -14 ELSE -10 END - thing.daystoadd, getdate()), thing.EndTime) as DateExpDiff 
```

# php - 将文本动态插入字符串 (PHP)

> ID：15437587
> 
> 赞同：0
> 
> 时间：2013-03-15T16:34:25.783
> 
> 标签：php, regex, search-engine

我有一个 PHP 脚本，它根据放入网站搜索框中的术语在我的数据库上运行搜索。这将返回一个文本块。假设我现在的搜索词是`"test block"`。我的结果的一个例子是这个文本块：

> 这是使用搜索查询从数据库中收集的文本测试块。

**现在，我的问题是**：如何在文本块中“突出显示”搜索词，以便用户可以看到为什么首先拉出这个结果。使用上面的示例，类似以下内容就足够了：

> 这是通过搜索查询从数据库中收集的文本**测试块。**

到目前为止，我已经尝试了一些可以更改文本的方法，但我遇到的真正问题与区分大小写有关。例如，如果我使用以下代码：

```
$exploded = explode(' ', $search_terms);
foreach($exploded as $word) {
    // I have to use str_ireplace so the word is actually found
    $result = str_ireplace($word, '<b>' . $word . '</b>', $result);
} 
```

它会通过我`$result`和`bold`任何单词的实例。这看起来是正确的，正如我在搜索结果的第二个示例中所希望的那样。但是，在用户使用`"Test Block"`而不是 的情况下`"test block"`，搜索词将大写并显示为：

> 这是通过搜索查询从数据库中收集的文本**测试块。**

这对我不起作用，尤其是当用户使用小写搜索词并且它们恰好落在句子的开头时。

本质上，我需要做的是在字符串中找到单词，`<b>`直接在单词前面插入文本（在本例中），然后在单词后直接插入文本（`</b>`在本例中），同时保留单词本身不被替换. 我相信这个规则`preg_replace`，`str_replace`所以我真的被困在做什么上。

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:43:12.613

```
$exploded = explode(' ', $search_terms);
foreach($exploded as $word) {
    // I have to use str_ireplace so the word is actually found
    $result = preg_replace("/(".preg_quote($word).")/i", "<b>$1</b>", $result);
} 
```

模式匹配[http://www.php.net/manual/en/reference.pcre.pattern.syntax.php](http://www.php.net/manual/en/reference.pcre.pattern.syntax.php)使用某些字符，如 . [ ] / * + 等.. 所以如果这些出现在模式中，它们需要首先转义`pre_quote();`

模式以分隔符开始和结束以识别模式[http://www.php.net/manual/en/regexp.reference.delimiters.php](http://www.php.net/manual/en/regexp.reference.delimiters.php)

跟着我的修饰符[http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php) 在这种情况下，我表示不区分大小写

（括号）中的任何内容都将被捕获以供以后使用，无论是在 $matched 参数中还是在替换中作为 $1 或 \\1 用于第一个，$2 第二个等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:42:59.820

使用`preg_replace`. 在你的例子中

```
$result = preg_replace("/\\b(" . preg_quote($word) . ")\\b/i", '<b>$1</b>', $result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:42:39.767

您可以使用 preg_replace：

```
foreach ($exploded as $word) {
    $text = preg_replace("`(" . preg_quote($word) . ")`Ui" , "<b>$1</b>" , $text);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:45:13.117

```
$string = 'The quick brown fox jumped over the lazy dog.';
$search = "brown";
$pattern = "/".$search."/";
$replacement = "<strong>".$search."</strong>";
echo preg_replace($pattern, $replacement, $string); 
```

敏捷的**棕色**狐狸跳过了懒惰的狗

# python - 从字符串中删除小写子字符串的快速方法？

> ID：15437589
> 
> 赞同：16
> 
> 时间：2013-03-15T16:34:27.397
> 
> 标签：python, string, numpy

Python（普通或使用numpy）从字符串中删除所有小写子字符串的有效方法是什么`s`？

```
s = "FOObarFOOObBAR"
remove_lower(s) => "FOOFOOBAR" 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-15T16:35:18.917

Python3.x 答案：

您可以制作一个字符串翻译表。创建该转换表后，您可以重复使用它：

```
>>> import string
>>> table = str.maketrans('', '', string.ascii_lowercase)
>>> s = 'FOObarFOOObBAR'
>>> s.translate(table)
'FOOFOOOBAR' 
```

当以这种方式使用时，第一个参数值映射到第二个参数值（如果存在）。如果不存在，则假定为恒等映射。第三个参数是要删除的值的集合。

* * *

对于关心的人来说，旧的 python2.x 答案：

我会用`str.translate`. `None`如果您通过转换表，则仅执行删除步骤。在这种情况下，我将`ascii_lowercase`作为要删除的字母传递。

```
>>> import string
>>> s = 'FOObarFOOObBAR'
>>> s.translate(None, string.ascii_lowercase)
'FOOFOOOBAR' 
```

我怀疑您会找到更快的方法，但是`timeit`如果有人有动力，总会比较不同的选择:)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-15T16:37:11.193

我的第一种方法是`''.join(x for x in s if not x.islower())`

如果您需要速度，请使用 mgilson 答案，它会快很多。

```
>>> timeit.timeit("''.join(x for x in 'FOOBarBaz' if not x.islower())")
3.318969964981079

>>> timeit.timeit("'FOOBarBaz'.translate(None, string.ascii_lowercase)", "import string")
0.5369198322296143

>>> timeit.timeit("re.sub('[a-z]', '', 'FOOBarBaz')", "import re")
3.631659984588623

>>> timeit.timeit("r.sub('', 'FOOBarBaz')", "import re; r = re.compile('[a-z]')")
1.9642360210418701

>>> timeit.timeit("''.join(x for x in 'FOOBarBaz' if x not in lowercase)", "lowercase = set('abcdefghijklmnopqrstuvwxyz')")
2.9605889320373535 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T16:51:37.470

```
import re

remove_lower = lambda text: re.sub('[a-z]', '', text)

s = "FOObarFOOObBAR"
s = remove_lower(s)

print(s) 
```

# php - 尽管在 php.ini 中启用了 PDO 连接，但它无法正常工作

> ID：15437592
> 
> 赞同：0
> 
> 时间：2013-03-15T16:34:38.427
> 
> 标签：php, pdo

我的连接参数是正确的，因为我使用 mysqli 成功连接。但是自从切换到 PDO 后，我遇到了麻烦，并且`Unknown MySQL server host`总是抛出异常。

我的相关代码是这样的：

```
class UpdateStock{
     public function __construct(){
        try{
           $connection = new PDO('mysql:host=localhost:8889;dbname=mydatabasename', 'root', 'root');   
           $connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

           echo 'connection succedded'; 

        }catch(PDOException $e){
         echo $e;//Always got exception
        }
    }

}//End of class

$updateStock = new UpdateStock; 
```

我的 php.ini 文件为 mysql 启用了 PDO 选项： `extension=pdo_mysql.so`

MAMP 运行良好，因此 PDO 无法连接似乎有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:56:14.033

我检查了 phpinfo 以查看 MySQL 服务器正在侦听的端口，我发现它为空值（未指定端口）：

![在此处输入图像描述](../Images/3644641b663de3f1f9c75b88cc5c50b9.png)

所以我简单地从主机值中删除了端口以使其工作：

```
 $connection = new PDO('mysql:host=localhost;dbname=mydatabasename', 'root', 'root'); 
```

`mysqli`但是使用了端口`3306`。我以为 PDO 和 mysqli 将使用相同的端口，但似乎我错了:)

# visual-studio-2010 - 使用 .net 4.0 在测试项目中编译 pex 和 moles 的问题

> ID：15437594
> 
> 赞同：1
> 
> 时间：2013-03-15T16:34:42.020
> 
> 标签：visual-studio-2010, unit-testing, c#-4.0, moles, pex

工具：VS 2010、C# 4.0、测试项目、Pex 和 Moles

在编译使用 moles 的测试项目时，我面临以下问题。主要场景是

*   当我在 .net 3.5 中编译项目引用时，它工作正常
*   当我在 .net 4.0 中编译项目引用时，它会引发以下异常

“命名空间‘xxxxxxxxxxxxxxx’中不存在类型或命名空间名称‘xxxxx’（您是否缺少程序集引用？）[C:\xxxx.csproj] C:\xxx\mgcs 17275 93 XXXX.Test”

更多细节：导致根本问题的 dll 在 .net 2.0 中，但我无法在 4.0 中编译它，因为我无法控制它。

如果有人过去遇到过这个问题，请帮助我！！

# svn - SVN 包含和忽略另一个存储库

> ID：15437595
> 
> 赞同：0
> 
> 时间：2013-03-15T16:34:46.747
> 
> 标签：svn

我有两个存储库，一个具有设置和安装脚本，用于配置项目中的各种内容。第二个回购是项目本身。

设置脚本需要放在项目中，但我不希望它们提交给项目。

我通常通过 svn-ignore 忽略设置脚本，然后手动将脚本复制到项目中，以便它们可以执行。

这样做的问题是脚本可能会随着时间而改变，我想让它们都保持最新。

我正在寻找一种方法来将设置脚本检出到项目工作目录中，同时忽略它们。

这样，我在每个项目中保持安装脚本是最新的，但同时不会将它们包含在任何导出或部署中。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:57:02.360

你能给我们一个脚本和项目的 URL 示例吗？它会帮助我们想出一些东西。

在我的脑海中，我会说你正在使用的任何构建脚本都应该负责将设置脚本（通过 a `svn export`）复制到你的工作目录。你用什么语言编程？

另外，看看我的[pre-commit hook](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)。`svn:ignore`仅适用于当前目录，本质上是*建议*性的。它不会阻止某人提交文件，如果文件已提交，`svn:ignore`则什么也不做。我的预提交钩子允许您阻止某人提交整个目录树。

假设您的 Subversion 存储库是这样布局的：`http://svnserver/svn/trunk/myproject`. 您`dist`在项目根目录下的目录下构建您的项目。因此，您不希望用户添加`http://svnserver/svn/trunk/myproject/dist`目录或该目录下的任何子目录。

使用我的预提交挂钩，您可以将控制文件设置为如下所示：

```
[file You can't add files into the in the build area of your project.]
file=/*/*/dist/**
access=read-only
users=@ALL 
```

现在，用户将无法添加该`dist`目录下的`myproject`目录，或该目录下的任何子目录或文件。

如果我明白你想要什么，这应该会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:29:09.033

作为一种解决方案，我更改了安装脚本中的路径，并添加了一些提示问题，例如项目的位置。

数据库脚本仍然与项目 repo 一起保存，但运行这些脚本的脚本不是。

我基本上将安装脚本与项目分离，现在我可以在项目之外运行安装。

运行安装时，它首先会扫描项目文件夹并提示我选择项目。

# embedded-linux - 在沙盒中的 Linux 上运行不受信任的应用程序

> ID：15437603
> 
> 赞同：7
> 
> 时间：2013-03-15T16:35:18.463
> 
> 标签：embedded-linux, selinux, sandbox

我们有一台运行 Linux 的设备，我们需要在此设备上运行不受信任的应用程序。我们正在努力缓解以下安全问题 -

1.  不受信任的应用程序不应对核心操作系统数据和二进制文件产生不利影响
2.  不受信任的应用程序不应对另一个应用程序的数据和二进制文件产生不利影响
3.  不受信任的应用程序不应消耗过多的 CPU、内存或磁盘，并导致核心操作系统或其他应用程序出现 DoS/资源不足的情况

从不受信任的应用程序的角度来看，它只需要能够读取和写入自己的目录，也许还需要挂载的 USB 驱动器

我们正在考虑使用以下方法之一 -

**方法 1 - 将 SELinux 用作沙箱**

*   这可能吗？我已经阅读了一些 SELinux，它在设置策略文件和在运行时强制执行等方面看起来有点复杂。SELinux 可以做到这一点并将不受信任的应用程序限制为只读/写自己的目录，并且还能够设置配额限制？

**方法 2 - 我们自己创建一个新的沙箱**

*   在安装期间

    *   为每个不受信任的应用程序创建一个新的应用程序用户
    *   给整个应用程序目录和文件加盖权限，这样只有应用程序用户可以读写
    *   使用 ulimit/quota 为应用程序用户设置配额
*   在运行时，使用启动不受信任的应用程序

    *   关闭所有打开的文件描述符/句柄
    *   使用 chroot 将根设置为应用程序目录
    *   在应用程序用户的上下文中启动应用程序

对上面的想法？哪种方法比另一种更安全？还有另一种可能效果更好的方法吗？由于某些原因，我们无法选择迁移 Android，因此我们无法使用 Android 原生提供的沙盒功能......

让我知道

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T08:24:04.263

SELinux 是一组规则，其应用有点类似于用户权限，甚至更复杂。您可以为每个进程使用它来设置该进程的域并允许或拒绝几乎任何访问。这意味着访问文件、网络或进程/线程。这样它就可以用作一种沙盒。但是，您必须为每个进程准备一个规则集，或者您可以制作一个必须在沙盒应用程序之前运行的脚本来准备规则本身。

如果您想控制 CPU 消耗，SELinux 没有 CPU 规划器，因为任何规则都只有两个逻辑结果“允许”或“拒绝”访问之一。我建议您使用“cgroups”来控制 CPU 消耗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-23T03:06:17.787

[legato 项目](https://github.com/legatoproject/legato-af)使用更高级别的沙盒。它使用 chroot 和绑定挂载来包含应用程序。它的一个关键特性是正式的声明性 API，因此应用程序组件可以在托管安全配置下与系统服务组件通信。服务和应用程序可以根据需要添加和删除，也可以无线更新。应用程序内存使用、处理器共享、存储等也受到密切管理。它声称使应用程序开发更容易。

# javascript - 如何使用 javascript 控制 HTML5 音频标签

> ID：15437607
> 
> 赞同：0
> 
> 时间：2013-03-15T16:35:35.487
> 
> 标签：javascript, html

我正在尝试在 s JS 幻灯片放映期间播放 mp3。当幻灯片开始播放时，我无法操作要播放的音频标签。

我尝试了一些 JS 和 HTML 标准音频标签，但在幻灯片开始时难以控制音乐播放。

欢迎任何想法（ps 我的 JS 非常基础）！

下面的代码（包括 eivers88 脚本）：添加音频脚本时幻灯片无法加载..

```
<script type="text/javascript" 
src="http://slideshow.triptracker.net/slide.js"></script>
<script type="text/javascript">
<!-- 

//3rd attempt to play audio with slideshow for stackoverflow
var audioType='.mp3';
var audioPlayer = document.createElement('audio');

audioPlayer.setAttribute('src', 'images/Music/Oceans.mp3');
$('body').append(audioPlayer);
audioPlayer.load();
audioPlayer.play();

var viewer = new PhotoViewer();
viewer.enablePhotoFading()
viewer.enableAutoPlay();
viewer.disableToolbarAnimator();
viewer.randomize();
viewer.setOnClickEvent(viewer.permalink);

 viewer.add('images/Gallery/image1.jpg');`enter code here`

 //images enetered as arguments here viewer.add('images/Gallery/image1.jpg');... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:43:20.777

您是否尝试过一些简单的事情，例如：

```
var audioType = '.mp3';
var audioPlayer = document.createElement('audio');

if(!!audioPlayer.canPlayType('audio/ogg') === true){
    audioType = '.ogg' //For firefox and others who do not support .mp3
}

audioPlayer.setAttribute('src', 'path/to/song' + audioType);
$('body').append(audioPlayer);
audioPlayer.load();
audioPlayer.play(); //put this where your slide show starts 
```

# c++ - 如何调试 QXmlSchema 的加载方法？

> ID：15437610
> 
> 赞同：1
> 
> 时间：2013-03-15T16:35:48.440
> 
> 标签：c++, qt, load, xsd

我正在尝试使用 加载以下 XML Schema `QXmlSchema`，但`QXmlSchema::load(const QUrl & source)`总是返回`false`。有什么方法可以让 Qt 提供一些关于实际出了什么问题的信息？据我所知，该模式在几个验证器中检查得很好（w3c 提供的神秘输出看起来像是通过了）。

```
<?xml version="1.0" ?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">

<xsd:element name="message">
<xsd:complexType>
  <xsd:choice>

    <xsd:element name="login-reply">
      <xsd:simpleType>
        <xsd:restriction base="xsd:string">
          <xsd:enumeration value="Accepted" />
          <xsd:enumeration value="Rejected" />
        </xsd:restriction>
      </xsd:simpleType>
    </xsd:element>

    <xsd:element name="login-request" >
      <xsd:complexType>
        <xsd:sequence>
          <xsd:element name="username" type="xsd:string" nillable="false"/>
          <xsd:element name="password" type="xsd:string" nillable="false"/>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:element>

    <xsd:element name="logout-request">
      <xsd:complexType>
        <xsd:sequence>
          <xsd:element name="username" type="xsd:string" nillable="false"/>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:element>

    <xsd:element name="logout-reply">
      <xsd:simpleType>
        <xsd:restriction base="xsd:string">
          <xsd:enumeration value="Accepted" />
          <xsd:enumeration value="Rejected" />
        </xsd:restriction>
      </xsd:simpleType>
    </xsd:element>

    <xsd:element name="tasklist-request" />

    <xsd:element name="tasklist-reply">
      <xsd:complexType>
        <xsd:sequence minOccurs="1">
          <xsd:element name="package" minOccurs="1" nillable="false">
            <xsd:complexType>
              <xsd:sequence>
                <xsd:element name="taskgroup" minOccurs="1" nillable="false">
                  <xsd:complexType>
                    <xsd:sequence>
                      <xsd:element name="id" type="xsd:integer" minOccurs="1" />
                      <xsd:element name="task" type="xsd:string" minOccurs="1" />
                    </xsd:sequence>
                    <xsd:attribute name="id" type="xsd:integer" />
                    <xsd:attribute name="name" type="xsd:string" />
                  </xsd:complexType>
                </xsd:element>
              </xsd:sequence>
              <xsd:attribute name="id" type="xsd:integer" />
              <xsd:attribute name="name" type="xsd:string" />
            </xsd:complexType>
          </xsd:element>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:element>

    <xsd:element name="starttask-request">
      <xsd:complexType>
        <xsd:sequence>
          <xsd:element name="task-id" />
        </xsd:sequence>
      </xsd:complexType>
    </xsd:element>

    <xsd:element name="starttask-reply">
      <xsd:simpleType>
        <xsd:restriction base="xsd:string">
          <xsd:enumeration value="Accepted" />
          <xsd:enumeration value="Rejected" />
        </xsd:restriction>
      </xsd:simpleType>
    </xsd:element>

  </xsd:choice>

</xsd:complexType>
</xsd:element>
</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-02T18:40:58.310

bool QXmlSchema::load() 本身只返回对调试没有用的布尔结果。但是这是获得更合适的错误消息的更好方法。

您可以使用方法[void QXmlSchema::setMessageHandler(QAbstractMessageHandler *handler)](https://doc.qt.io/qt-5/qxmlschema.html#setMessageHandler)。

这是我项目中的示例。

第一个子类**化 QAbstractMessageHandler**

```
class MessageHandler : public QAbstractMessageHandler
{
public:
    MessageHandler() 
      : QAbstractMessageHandler(), 
        m_messageType(QtMsgType()), 
        m_description(),
        m_sourceLocation(QSourceLocation())
    {}

    QString statusMessage() const
    {
        return m_description;
    }

    qint64  line() const
    {
        return m_sourceLocation.line();
    }

    qint64  column() const
    {
        return m_sourceLocation.column();
    }
protected:
    virtual void handleMessage(QtMsgType type, 
                               const QString &description,
                               const QUrl &identifier, 
                               const QSourceLocation &sourceLocation) Q_DECL_OVERRIDE
    {
        Q_UNUSED(type);
        Q_UNUSED(identifier);

        m_messageType = type;
        m_description = description;
        m_sourceLocation = sourceLocation;
    }
private:
    QtMsgType       m_messageType;
    QString         m_description;
    QSourceLocation m_sourceLocation;
}; 
```

然后在加载设置消息处理程序之前。

```
QFile file("myschema.xsd");
file.open(QIODevice::ReadOnly);

MessageHandler messageHandler;
QXmlSchema sch;
sch.setMessageHandler(&messageHandler);
if (sch.load(&file, QUrl::fromLocalFile(file.fileName()))==false)
{
    QString error = messageHandler.statusMessage();
    qint64 line = messageHandler.line();
    qint64 column = messageHandler.column();
    /*Do what need if error*/   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:48:36.470

bool QXmlSchema::load() 根据[此源文档在多个条件下返回 false](http://harmattan-dev.nokia.com/docs/library/html/qt4/qxmlschema.html#load)

所以我的问题的答案：不，没有办法从 Qt 4.7.3 的 Qts 解析器中获取错误消息，也没有办法通过 Qts API 来区分 I/O 错误和模式错误，因为负载返回两者都是错误的。

# c# - 在 Web 应用程序的哪个时间点，我可以每 24 小时调用一次方法？

> ID：15437615
> 
> 赞同：0
> 
> 时间：2013-03-15T16:35:57.037
> 
> 标签：c#, .net, asp.net-mvc-3

我只需要每 24 小时运行一次代码。

因此，在 Global.asax 文件中：我尝试输入，`Application_Start`但是当会话结束时，再次调用代码。我尝试输入一个静态变量，但我遇到了同样的问题。那么，我在哪里可以将代码放在我的网络应用程序中每 24 小时运行一次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T16:37:54.027

没有可靠的托管方式[`recurring background tasks in ASP.NET applications`](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)。正确的方法是将代码托管在 Windows 服务或控制台应用程序中，该应用程序计划使用 Windows 调度程序定期执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:38:09.273

为什么这是一个 Web 应用程序？如果您想每天运行一次，这不是更适合像 Windows 服务这样的适当应用程序吗？

如果您必须使用 Web 应用程序，您将需要将上次运行的日期和时间存储在某个地方，例如配置文件或数据库。完成后，您可以设置计划任务以每天调用您网站上的链接，它应该可以正常工作，但是您随后添加了对另一个外部服务的依赖。

# mysql - 带有异步从属的 Percona xtradb 集群

> ID：15437618
> 
> 赞同：0
> 
> 时间：2013-03-15T16:36:04.547
> 
> 标签：mysql, replication, master-slave, percona

我有一个设置了 3 个节点的 Percona xtradb 集群。节点 1 也设置为具有异步从属的主控。当我对节点 1 进行更新时，它会被复制到集群以及从站。但是，当我对节点 2 或节点 3 进行更新时，从站不会复制节点 1。

在节点 2 或节点 3 上进行更新时，节点 1 不会更新他的 bin-log。

如何让 bin 日志保持最新？

如果所有三个节点都是异步从属的主节点，我怎样才能保持所有 3 个 bin-logs 相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:59:15.893

您可以通过在 node1 上添加 log-slave-updates 设置来获取 node2 和 node3 的 node1 日志中的 binlog 条目。

但是二进制日志在节点之间不会是一致的，因此您不能在不重建从站的情况下将异步从站失败到节点 2 和节点 3。

# javascript - 获取准确的插入符号位置

> ID：15437622
> 
> 赞同：3
> 
> 时间：2013-03-15T16:36:09.207
> 
> 标签：javascript, tinymce, getselection

如何在 tinyMCE 中获取当前插入符号的位置？参考这个问题“ [Get cursor position or number of line of which cursor is in TinyMCE](https://stackoverflow.com/questions/11860175/get-cursor-position-or-number-of-line-on-which-the-cursor-is-in-tinymce) ”提到了如何在tinyMCE中获取行号，但是我找不到关于如何获取实际插入符号位置的参考？我需要这个，因为我使用 tinyMCE 作为实时协作的文档，因此我需要知道客户在同一个文档中书写的插入符号的位置，以便我在某些事件（击键、点击等）上广播位置。 ) 并在位置上绘制自定义插入符号，以便一位客户知道另一位客户在哪里写作或编辑。

我找到的唯一解决方案是在内容之后添加一个跨度，选择它并删除它，如下所示：

```
 <span id="caret_pos_holder"></span> 
```

然后插入后，执行此操作...

```
 ed.selection.select(ed.dom.select('span#caret_pos_holder')[0]); //select the span
     ed.dom.remove(ed.dom.select('span#caret_pos_holder')[0]); //remove the span 
```

这是解决它的唯一方法吗？

**编辑**：实际上上面只是将光标的位置设置到内容的末尾，我已经使用书签处理了一些事情。

是否有可能没有任何东西可以获取光标的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T15:57:23.033

```
var sel = ed.selection.getSel(); 
```

将当前选择作为选择对象返回。然后您可以查询`sel.anchorNode`并`sel.anchorOffset`获取当前插入符号的位置。

将此数据广播到其他客户端比尝试将位置提取为数字更容易，但如果确实有必要，您可以从上面给出的位置爬上 DOM。

# jquery - 通过单击一行内的按钮访问 DataTable 中的数据

> ID：15437625
> 
> 赞同：2
> 
> 时间：2013-03-15T16:36:12.783
> 
> 标签：jquery, datatables

我可以通过以下简单方法访问数据行：

```
$('#received-body tr').click( function(){
    aData = received_table.fnGetData(this);
    selected_received_id = aData[0];
    alert( selected_received_id );
}); 
```

但我无法从`.received-update`其中一行中调用的按钮访问它们：

```
$('#received-body .received-update').click( function(){
    alert( 'update' ); // works
    aData = received_table.fnGetData( $(this).parents('tr')); // fails
    selected_received_id = aData[0];
    alert( 'update:' + selected_received_id );                      
}); 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-16T16:47:04.967

您可以通过更换来解决您的问题

```
 aData = received_table.fnGetData($(this).parents('tr')); 
```

和

```
 aData = received_table.fnGetData($(this).parents('tr')[0]); 
```

调用也需要相同的语法`received_table.fnGetPosition()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-10T10:16:23.133

下面的代码将有所帮助，

```
var table = $('#tableID').DataTable();
var row_data;
$('#tableID tbody').on( 'click', 'button', function () {
    row_data = table.row( $(this).parents('tr') ).data();
    console.log(row_data); // you will get the row data
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:41:21.157

您可能需要使用最接近的，因为[parents()](http://api.jquery.com/parents/)可能会给出多于一行。虽然最接近，但首先匹配 DOM 层次结构。

```
aData = recieved_table.fnGetData($(this).closest('tr')); // fails 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:42:46.273

```
aData = recieved_table.fnGetData($(this).parent('tr')); 
```

尝试`.parent()`代替，`.parents()`因为`.parents()`获取当前匹配元素集中每个元素的父级。`.parent()`仅当 tr 是 tr 的直接子级时才有效。在那种情况下`.closest()`将是理想的，如下所示。

```
aData = recieved_table.fnGetData($(this).closest('tr')); 
```

如果上述方法不适合您，请尝试使用[filter](http://api.jquery.com/filter/)方法来减少匹配元素的集合。

# python - 用额外的上下文装饰 as_view()

> ID：15437628
> 
> 赞同：0
> 
> 时间：2013-03-15T16:36:21.453
> 
> 标签：python, django

我想从我的方法（视图）中调用具有额外上下文的基于类的通用视图。我得到的错误是`as_view() takes exactly 1 argument (4 given)`. 我正在使用`django-userena`.

执行此操作的代码是：

```
return userena_views.ProfileListView.as_view(request,template_name='userena/profil.html', extra_context=projekti) 
```

在 urls.py 我有这一行：

```
url(r'^accounts/(?P<username>[\.\w-]+)', userena_views.ProfileListView.as_view(template_name='userena/profil.html', extra_context=Projekat.objects.all), name='userena_profile_list'), 
```

为什么这两个不同？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:45:58.130

这是由于[url](https://docs.djangoproject.com/en/dev/ref/urls/#url)的功能。您可以使用[kwargs 传递参数](https://docs.djangoproject.com/en/dev/topics/http/urls/#views-extra-options)，并定义一个 url 模式，如下所示：

```
url(r'^accounts/(?P<username>[\.\w-]+)', userena_views.ProfileListView.as_view(), name='userena_profile_list', kwargs={'template_name':'userena/profil.html', 'extra_context':Projekat.objects.all}), 
```

* * *

**编辑**

我误解了你的问题，对不起。然后，尝试正确回答您的问题......您的代码应该是这样的：

```
your_callable_view = userena_views.ProfileListView.as_view()
return your_callable_view(request, template_name='userena/profil.html', extra_context=projekti) 
```

原因是`ProfileListView.as_view()`返回一个必须使用参数调用的函数。`url()`为您执行此操作，这就是它在您的 ulrpatterns 中而不是在您的代码中有效的原因。as_view() 唯一需要的参数是`self`.

# mysql - 对可能不存在的行执行连接查询

> ID：15437631
> 
> 赞同：0
> 
> 时间：2013-03-15T16:36:47.727
> 
> 标签：mysql, join

我有一个查询：

```
SELECT `gigs`.*, COUNT(`signups`.`signupID`) AS `signupsPending` FROM `gigs` NATURAL JOIN `signups` WHERE (`signupStatus` = 4) GROUP BY `gigID` 
```

那是查询一个看起来像这样的数据库：

```
+-------+---------+------------+
| gigID | gigName | gigDate    |
+-------+---------+------------+
| 1     | Foo     | 01/01/2014 |
+-------+---------+------------+
| 2     | Bar     | 16/01/2014 |
+-------+---------+------------+

+----------+-------+--------------+--------------+
| signupID | gigID | signedUserID | signupStatus |
+----------+-------+--------------+--------------+
| 1        | 1     | 1            | 1            |
+----------+-------+--------------+--------------+
| 2        | 1     | 2            | 4            |
+----------+-------+--------------+--------------+
| 3        | 1     | 3            | 2            |
+----------+-------+--------------+--------------+
| 4        | 2     | 1            | 2            |
+----------+-------+--------------+--------------+ 
```

但是当我执行上面的查询时，它只显示 gigID = 1 的一行。我怎样才能改变上面的查询，以便它在行的其余部分显示 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:39:50.417

使用 LEFT OUTER JOIN 而不是 NATURAL JOIN。

```
SELECT `gigs`.*, COUNT(`signups`.`signupID`) AS `signupsPending` 
FROM `gigs` 
LEFT OUTER JOIN `signups` 
WHERE (`signupStatus` = 4) GROUP BY `gigID` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:40:45.917

您想使用`LEFT JOIN`（您可以添加它`OUTER`以实现 ANSI-92 兼容性）

```
SELECT
  gig.*
, COUNT(sig.signupID) AS "signupsPending"
FROM gigs AS gig
LEFT JOIN signups AS sig ON (gig.gigID = sig.gigID)
WHERE sig.signupStatus = 4
GROUP BY gig.gigID 
```

顺便说一句，我建议您不要使用`NATURAL JOIN`，因为它会带来一些风险

*   它基于字段名称，您可能有不同的字段名称作为外键
*   可以使用不同的外键来 JOIN 2 个表（即使可以添加`USING`语句）
*   在您的数据库生命周期中，表可能会添加字段更改，并且您将始终必须检查两个表是否没有获得具有相同名称的新字段
*   如果您同时使用`NATURAL`和 standard `JOIN`，则可能很难通过脚本自动执行查询
*   ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:46:17.467

我一直在尝试 OUTER JOIN，但没有产生任何结果，但我现在尝试了：

```
SELECT `gigs`.*, COUNT(`signups`.`signupID`) AS `signupsPending` FROM `gigs` LEFT JOIN `signups` ON `gigs`.`gigID` = `signups`.`gigID` AND `signupStatus` = 4 GROUP BY `gigID` 
```

这很好用

# mpi - 减少中的 MPI min 函数

> ID：15437637
> 
> 赞同：0
> 
> 时间：2013-03-15T16:36:55.360
> 
> 标签：mpi, min, reduce

我试图在我的整数数组中找到最小数字，但是，它返回 0。

```
import mpi.*;
import java.util.Random;

class AddIntSR
{
public static void main(String[] params) throws Exception
{
    MPI.Init(params);
    int me = MPI.COMM_WORLD.Rank();
    int size = MPI.COMM_WORLD.Size();
    final int CHUNKSIZE = 1;
    final int ROOT = 0;
    Random rg = new Random();

    int [] bigBuf = new int[CHUNKSIZE *size];
    int [] smallBuf = new int[CHUNKSIZE];
    int [] minBuf = new int[1];

    int localTotal = 0;

    if (me == ROOT)
    {
        for(int i = 0; i< bigBuf.length; i++)
            bigBuf[i] = rg.nextInt(10);

        for(int i = 0; i< bigBuf.length; i++)
            System.out.println("bigBuf "+bigBuf[i]);    
    }

    MPI.COMM_WORLD.Scatter(bigBuf,0,CHUNKSIZE,MPI.INT,smallBuf,0,CHUNKSIZE,MPI.INT,ROOT);

    if(me!= ROOT)
    {
        System.out.println("smallBuf "+me+ ": "+smallBuf[0]);
        for(int i = 0; i < smallBuf.length; i++)
            localTotal += smallBuf[i];
    }

    MPI.COMM_WORLD.Reduce(new int[]{localTotal},0,bigBuf,0,1,MPI.INT,MPI.MAX,ROOT);
    MPI.COMM_WORLD.Reduce(new int[]{localTotal},0,minBuf,0,1,MPI.INT,MPI.MIN,ROOT);

    if(me == ROOT)
    {   
        System.out.println(bigBuf[0]);
        System.out.println(minBuf[0]);
    }
}
} 
```

我不确定为什么它不起作用。最大功能似乎工作正常。另外，我如何能够访问发送到处理器 0 的整数，以便将其包含在最小/最大比较中？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:06:33.610

`MIN`减少总是导致`0`因为`localTotal`总是`0`在等级中，这`ROOT`确实是最小值。

调用之后`MPI.COMM_WORLD.Scatter`，所有的进程，包括`ROOT`在他们的`smallBuf`. 因此，您应该删除以下条件，即：

```
if(me!= ROOT)
{
    System.out.println("smallBuf "+me+ ": "+smallBuf[0]);
    for(int i = 0; i < smallBuf.length; i++)
        localTotal += smallBuf[i];
} 
```

应该变得简单：

```
System.out.println("smallBuf "+me+ ": "+smallBuf[0]);
for(int i = 0; i < smallBuf.length; i++)
    localTotal += smallBuf[i]; 
```

# cakephp - cakephp：authen 函数自动定向到用户/登录

> ID：15437641
> 
> 赞同：0
> 
> 时间：2013-03-15T16:37:05.793
> 
> 标签：cakephp, authentication, cakephp-2.1

我从 cakephp 框架开始，我使用 auth 创建登录表单，在我的 appcontroller 中添加：

```
class AppController extends Controller {
    public $components = array('Auth', 'Cookie');
    public function beforeFilter(){
        $this->Auth->authenticate = array(
                'Form' => array(
                    'userModel' => 'User',
                    'fields' => array('name' => 'name', 'password' => 'password'),
                )
            );
            $this->Auth->loginAction = array('controller' => 'TestOnlineSystem', 'action' => 'P001');
            $this->Auth->loginRedirect = array('controller' => 'TestOnlineSystem', 'action' => 'index');
            $this->Auth->loginError = 'Failed to login';
            $this->Auth->authError = ' ';           
    }   
} 
```

但是当我运行 TestOnlineSystem/P001 时，它会自动重定向到用户/登录 anh 显示消息网络控制器用户控制器。我该如何解决它，P001 是我的登录页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:04:23.143

我同意 thaJeztah，尝试来自[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)的标准配置：

```
public $components = array(
    'Auth' => array(
        'loginAction' => array(
            'controller' => 'TestOnlineSystem',
            'action' => 'P001',
            'plugin' => 'users'
        )
    )
); 
```

并摆脱你的 beforeFilter()。

# knockout.js - 如何使用 KO 显示嵌套数组中的下拉值

> ID：15437645
> 
> 赞同：0
> 
> 时间：2013-03-15T16:37:11.570
> 
> 标签：knockout.js

我有一个这样的数组 - 注意“选项”数组不包括[]；这是服务器通过 MVC 返回的数据 - 最初我得到这个数组，如下面的注释代码：

```
//var initialData = @Html.Raw(Json.Encode(Model.FieldList));):

var initialData = [{ "DisplayName": "Service Status",
"Options": { "123": "Active", "127": "Scrapped", "121": "Inactive" },
"Value": "123"
        }]; 
```

我想将选项中的值放入带有标签“活动”、“报废”、“非活动”的下拉列表中，每个都映射到数组选项中列出的相应数值。

我想在该下拉列表中预先选择对应于 123 的值“活动”。我的下拉列表的标签将是“服务状态”。

这是我到目前为止的代码。但它只显示我的服务状态下拉菜单，其中包含 1 个元素，活动。如何将其他 2 个元素添加到下拉列表中？

如果您能在这方面帮助我，我将不胜感激。谢谢！

```
<script type="text/javascript">
    var viewModel;
    $(document).ready(function() {
           var initialData = [{ "DisplayName": "Service Status",
                  "Options": { "123": "Active", "127": "Scrapped", "121": "Inactive" },
                  "Value": "123"
           }];
        viewModel = { fields: ko.observableArray(initialData) };
        ko.applyBindings(viewModel);
    });
</script>

<span data-bind="foreach: viewModel.fields">
<span data-bind="text:DisplayName"></span>
<select data-bind="options: Options,                                
                         optionsValue: Value"></select>
</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:55:25.007

您可能希望将包含您的值的对象映射到可以与选项绑定一起使用的数组中。

就像是：

```
var optionsFromServer = data[0].Options,
    options = [];

for (var prop in optionsFromServer) {
    if (optionsFromServer.hasOwnProperty(prop)) {
        options.push({ id: prop, text: optionsFromServer[prop] });   
    }
} 
```

然后，您可以绑定这个新的选项数组，例如：

```
<select data-bind="options: options, optionsValue: 'id', optionsText: 'text'"></select> 
```

# c# - C# Timer 不会跑下来形成冻结

> ID：15437656
> 
> 赞同：1
> 
> 时间：2013-03-15T16:37:43.730
> 
> 标签：c#, forms, timer

所以当我尝试按下“按钮 2”时，我预计会发生两件事 a)“dowsomething”应该在“now”类中做它的事情。b）虽然它在做某事，但我希望它计算这件事需要多长时间。然而，因为“dosomething”是程序饥饿的 Form1 冻结，它不会运行计时器。我是 c# 的菜鸟，所以我不知道如何在后台运行它。那么有什么开箱即用的想法吗？谢谢。

```
 int time = 0;
    private void button2_Click(object sender, EventArgs e)
    {
            timer1.Start();
            nowthen now = new nowthen();
            now.dosomething(withthis); //This task is program hungry and causes the form to freeze
            timer1.Stop();
            time = 0;  
    }
    private void timer1_Tick(object sender, EventArgs e)
    {
        time = time + 1;
        label2.Text = time.ToString();
        label2.Refresh();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:47:00.157

在 Windows 窗体中，您的所有 UI 内容都在一个线程上运行。这包括计时器 - 计时器是在幕后使用 Windows 消息实现的。

您的问题实际上是两个问题：-

1.  如何在 C#/Windows 窗体中为操作计时？

如何计时取决于您正在寻找的精度。对于 +/- 10ms 范围内的精度，您可以使用 Environment.TickCount - 在操作之前存储它的值，然后再次获取该值，然后减去存储的值 - 你就有了持续时间。

更精确的是 System.Threading 中的 Stopwatch 类 - 请参阅[http://www.dotnetperls.com/stopwatch](http://www.dotnetperls.com/stopwatch)

1.  如何“在后台”运行任务？

要在后台运行您的操作，您需要在不同的线程中运行它。最简单、设计友好（但可能不是那么灵活的方式）是使用 BackgroundWorker 组件。这包含使用工作线程为您执行操作。请参阅[http://www.dotnetperls.com/backgroundworker](http://www.dotnetperls.com/backgroundworker)以获得有关如何执行此操作的详细说明。

更高级，更灵活，是创建自己的线程来做这项工作。但是，这将产生一些需要考虑的重要问题，以考虑如何同步正在发生的事情 - 一旦启动线程，您的方法调用就会完成（它是异步的），并且您需要有一种机制来通知您的 UI 代码该进程具有完成的。这个例子似乎和如何创建自己的线程一样好：[http ://www.daveoncsharp.com/2009/09/create-a-worker-thread-for-your-windows-form-in-csharp/](http://www.daveoncsharp.com/2009/09/create-a-worker-thread-for-your-windows-form-in-csharp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:42:05.603

对于 .NET 4 使用：

```
Task.Factory.StartNew((Action) delegate()
{
    // this code is now executing on a new thread.
    nowthen now = new nowthen();
    now.dosomething(withthis);

    // to update the UI from here, you must use Invoke to make the call on UI thread
    textBox1.Invoke((Action) delegate()
    {
          textBox1.Text = "This update occurs on the UI thread";
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T16:45:31.357

如果您只想计算某件事需要多长时间，请使用[System.Diagnostics.Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)。

```
Stopwatch sw = Stopwatch.StartNew();
nowThen = new nowThen();
no.dosomething(withthis);
sw.Stop();
// you can get the time it took from sw.Elapsed 
```

但是，这不会用经过的时间更新标签。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T17:03:44.300

我想我也会把它扔进去，虽然它不像@paul 的解决方案那样优雅。

```
timer1.Start();
var bw = new BackgroundWorker();
bw.DoWork += (s, e) => { now.dosomething((myArgumentType)e.Argument); };
bw.RunWorkerCompleted += (s, e) => { timer1.Stop(); };
bw.RunWorkerAsync(withthis); 
```

这会启动你的计时器，创建一个新的 BackgroundWorker 线程，告诉它在`DoWork`方法中运行什么（dosomething 在单独的线程中运行），然后在`RunWorkerCompleted`方法中停止计时器（dsomething 完成后，控制返回到 RunWorkerCompleted 中的主线程） .

# c# - 如果在强类型类上使用 IEnumerator 是否会多次访问服务器

> ID：15437657
> 
> 赞同：0
> 
> 时间：2013-03-15T16:37:46.427
> 
> 标签：c#

这是具有枚举器属性的 var 类型的一个非常简单（且毫无意义）的示例。该片段的重点是使用实现`IEnumerator`接口的强类型类来试验集合。

```
public class num { public int value { get; set; } }

class Program {

    private int[] data = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };

    static void Main(string[] args) {

        Program p = new Program();
        var numbers = selectNumbers(p.data);

        foreach(num x in numbers) {
            Console.WriteLine("Found {0}", x.value.ToString());
        }

        Console.WriteLine("press [enter] to exit");
        Console.Read();
    }

    static IEnumerable<num> selectNumbers(int[] x) {
        //in production app the following would use a reader to get data from database
        for(int i = 0; i < x.Length; i++) {
            yield return new num { value = x[i] };
            Console.WriteLine("Found {0}", x[i].ToString()); // <<<(1)
        }
    }
} 
```

返回到控制台的结果有些奇怪。结果似乎表明每次`foreach`循环的迭代执行第 (1) 行也会执行。

这是否意味着如果我将这种结构实现到数据库设置应用程序，其中`selectNumbers`涉及与我们的数据库取得联系，那么每次使用 IEnumerator 时都会建立连接吗？例如，每次它`foreach`在强类型上使用循环时，`num`它会与我们的数据库取得联系吗？这个例子的结果似乎表明它会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:43:28.337

就是这样[`yield return`](http://msdn.microsoft.com/en-us/library/vstudio/9k7k7cf0.aspx)工作的。编译器构造一个状态机来实现`IEnumerable<T>`接口。我向您展示的具有数据库访问权限的示例位于[`this post`](https://stackoverflow.com/a/12446960/29407). 在这个例子中，状态机将继续它先前在`while`循环内部而不是在方法开始处的上一次迭代中离开的位置：

```
static IEnumerable<MyModel> SelectTop100Models() 
{
    var connectionString = ConfigurationManager.ConnectionStrings["XXX"].ConnectionString;
    using (var conn = new SqlConnection(connectionString))
    using (var cmd = conn.CreateCommand())
    {
        conn.Open();
        cmd.CommandText = "SELECT top 100 * FROM x";
        using (var reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                // EXECUTION WILL CONTINUE FROM HERE AND NOT AT THE BEGINNING
                // OF THE METHOD
                yield return new MyModel
                {
                    Id = reader.GetInt32(reader.GetOrdinal("ID")),
                    Name = reader.GetString(reader.GetOrdinal("Name")),
                };
            }
        }
    }
} 
```

因此，您完全不必担心与数据库建立多个连接。这段代码非常优化。

# mysql - 在sql中获取玩家MAX（分数）的game_id

> ID：15437661
> 
> 赞同：0
> 
> 时间：2013-03-15T16:38:05.950
> 
> 标签：mysql, sql

这是[这个](https://stackoverflow.com/questions/15418496/get-max-value-and-corresponding-column/15419084?noredirect=1#comment21829964_15419084)问题的后续。

我想获取玩家得分最高的游戏 id。在选择 max(score) 时，我正在努力获取相应的 game_id 列值

我的表如下：

```
id    game_id    player_id    score
1       1            1         345
2       1            2         234
3       2            1         190
4       2            2         167
5       3            4         230
6       3            1         230
7       4            2         453
8       4            3         230 
```

到目前为止，我的查询看起来像这样：

```
SELECT s.id, t.game_id, t.score
FROM    (
        SELECT game_id, score
        FROM stats
        WHERE player_id =2
    ) t
LEFT JOIN stats s on s.game_id = t.game_id AND s.score = t.score
WHERE s.player_id = 2 
```

这给了我

```
id    game_id    score
 2        1       234
 4        2       167
 7        4       453 
```

然后我需要将整个查询作为最大分数（id = 7）的子查询加入，以便获得game_id，但我不知道怎么说加入这个最大值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:41:17.367

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  player_ID, MAX(Score) max_score
            FROM    TableName
            GROUP   BY Player_ID
        ) b ON a.Player_ID = b.player_ID AND
                a.Score = b.max_score 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:25:31.137

在这里我创建了[sql feedle](http://sqlfiddle.com/#!2/cdaa4/13)你可以删除

```
SELECT s.id, t.game_id, t.score
FROM    (
        SELECT game_id, score
        FROM game
        WHERE player_id =2 order by score desc limit 0,1
    ) t
LEFT JOIN game s on s.game_id = t.game_id AND s.score = t.score 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:40:45.733

希望这可以帮到你。

```
 select game_id, player_id, score 
    from (
         select rank() over (partition by player_id order by score desc) as rank_id, game_id, player_id, score
         from stats
         ) a
    where rank_id=1 and player_id = 2 
```

# performance - 从服务器接收数据超过 6 秒。包括截图，找不到原因。WordPress、W3TC、Cloudflare 等

> ID：15437667
> 
> 赞同：1
> 
> 时间：2013-03-15T16:38:11.600
> 
> 标签：performance, wordpress, caching, cloudflare

我正在使用 cloudflare、W3 Total Cache 和 amazon s3。我通过 W3TC 使用数据库、页面、对象和浏览器缓存。

是什么导致了从服务器接收数据的延迟，如此处所示？这太不可思议了，我觉得没有安装 W3TC 可能会更快。

标题截图
[![在此处输入图像描述](../Images/f6640991227c5458fa9ffedb4b739cd3.png)](https://i.stack.imgur.com/kiwwD.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:23:20.360

几个想法。

在我看来，主页上有两个 404，所以修复它们可能很好：

[http://cdn.thedigitalhippies.com/wp-content/themes/sahifa/fonts/BebasNeue-webfont.woff](http://cdn.thedigitalhippies.com/wp-content/themes/sahifa/fonts/BebasNeue-webfont.woff)
[http://cdn.thedigitalhippies.com/wp-content/themes/sahifa/fonts/BebasNeue-webfont.eot](http://cdn.thedigitalhippies.com/wp-content/themes/sahifa/fonts/BebasNeue-webfont.eot) ?

页面上有 20 多个 CSS 文件和大量的 js 文件。我认为如果你将它们组合并缩小为单个 CSS 和 JS 文件，使用类似[http://wordpress.org/extend/plugins/wp-minify/之类的东西，你会得到很好的改进](http://wordpress.org/extend/plugins/wp-minify/)

希望这可以帮助！

# xaml - 如何在 XAML 中更改视图时更改网格行和列

> ID：15437670
> 
> 赞同：1
> 
> 时间：2013-03-15T16:38:26.947
> 
> 标签：xaml

我在横向视图模式下的 XAML 中创建了 3 x 4 网格。表示 3 行 4 列。现在在视图更改为纵向时，我想将其设为 4 x 3 表示 4 行和 3 列。怎么做。请帮我做。先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:02:56.530

我不太确定你的意思是如何做到这一点，但定义新的网格行和列将是：

```
<Grid>
<Grid.RowDefinitions>
    <RowDefinition Height="Auto" />
    <RowDefinition Height="Auto" />
    <RowDefinition Height="Auto" />
    <RowDefinition Height="Auto" />
</Grid.RowDefinitions>
<Grid.ColumnDefinitions>
    <ColumnDefinition Width="Auto" />
    <ColumnDefinition Width="Auto" />
    <ColumnDefinition Width="Auto" />
</Grid.ColumnDefinitions>
</Grid> 
```

这将创建一个 4x3 网格面板，其中宽度和高度可以更改为预定大小或 *. 如果这不是您要找的东西，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T07:54:36.513

最后我使用后面的代码解决它。

我制作了两个网格，一个是 3 * 4，一个是 4 * 3，在页面的 size_changed 事件上标识 applicationViewstate 并显示隐藏所需的网格

# ruby-on-rails - Rails：未初始化的常量 MODEL_NAME

> ID：15437673
> 
> 赞同：0
> 
> 时间：2013-03-15T16:38:40.663
> 
> 标签：ruby-on-rails, mailman

我有一个 ruby​​ on rails 脚本，我通过发出以下命令运行：sudo ruby​​ script/mailman_server 该文件的内容是：

```
#!/usr/bin/env ruby
require "rubygems"
require "bundler/setup"
require "mailman"
require "rb-inotify"
require "#{File.dirname __FILE__}/../config/environment"

Mailman.config.maildir = '/var/mail'

Mailman::Application.run do
    default do
        begin
            # call a model
            Bin.receive_mail(message)
        end
    end
end 
```

我收到一条错误消息：

```
E, [2013-03-15T02:06:39.555346 #6351] ERROR -- : uninitialized constant Bin
/var/www/beebin/script/mailman_server:14 
```

Bin 是一个模型，receive_mail() 是该模型中的一个函数。为什么我的脚本看不到模型？

我觉得 rails 环境没有正确加载。我从代码中遗漏了什么或启动应用程序的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:43:51.590

我不确定它是否能解决您的问题，但这是一个更漂亮的语法

```
require File.expand_path(File.dirname(__FILE__) + '/../config/environment') 
```

为确保您的环境已加载，请尝试`Bin`在您的要求之后执行。

# silverlight - 如何知道树视图项目何时在屏幕上可见？

> ID：15437679
> 
> 赞同：0
> 
> 时间：2013-03-15T16:38:58.133
> 
> 标签：silverlight, silverlight-5.0

我能以某种方式找到树视图项目是否在屏幕上可见吗？

我有一些数据要处理，这些数据很重，如果我对所有项目都这样做，我会遇到我想避免的延迟。

我需要**有效**的方法来测试一个项目是否在树的可见部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:29:33.880

```
GeneralTransform gt = treeView.TransformToVisual(null);
var treeRect = gt.TransformBounds(new Rect(0, 0, treeView.ActualWidth, treeView.ActualHeight));
var visibleElements = VisualTreeHelper.FindElementsInHostCoordinates(treeRect, treeView);
var treeViewItemsVisibleOnScreen = visibleElements.OfType<TreeViewItem>(); 
```

# alfresco - 如何在露天方面属性中表示多值属性？

> ID：15437680
> 
> 赞同：2
> 
> 时间：2013-03-15T16:39:01.707
> 
> 标签：alfresco

我希望通过一个方面扩展具有附加属性的人员对象，但是几个方面属性需要是多值的，即包含多个值。例如一个人的技能。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T23:50:03.207

您想要做的是定义您的属性，`multiple="true"`使其具有多值性。这[在此处的文档中](http://docs.alfresco.com/4.0/index.jsp?topic=%2Fcom.alfresco.enterprise.doc%2Fconcepts%2Fmetadata-model-props.html)有详细说明。

如果您不熟悉创建 Alfesco 模型，您可能会发现[这](http://wiki.alfresco.com/wiki/Step-By-Step%3a_Creating_A_Custom_Model) [两个](http://wiki.alfresco.com/wiki/Data_Dictionary_Guide#Step_by_Step_Model_Definition)wiki 页面很有帮助。还推荐了 Professional Alfresco 这本书，建模部分自编写以来就没有改变（尽管其他一些领域有）

# jquery - 如何在网站上的任何其他内容之前加载特定的 div？

> ID：15437682
> 
> 赞同：1
> 
> 时间：2013-03-15T16:39:04.133
> 
> 标签：jquery

我在网站上有两个 div 面板（left_panel 和 right_panel）。左面板有数百种食物，右面板有小盒子，我们可以看到用户从左面板添加了多少项目。现在的问题是当页面加载左侧面板需要很长时间才能从数据库中获取数据并且当它完全加载时而不是右侧面板出现。是否有任何 jquery 可以帮助我在左面板或网站上的任何其他内容之前先加载右面板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:46:11.397

那里的东西很少

> 左面板有数百种食物，右面板有小盒子，我们可以看到用户从左面板添加了多少项目。

您可以通过使用分页、建议/推荐或搜索来延迟加载一些数据。我不希望用户从数百条记录中搜索 reqd 项目会有非常愉快的体验

> 页面加载左侧面板需要很长时间才能从数据库中获取数据

当 html 开始呈现时，从数据库中获取记录已经完成，除非您稍后从 XHR/Ajax 请求中推迟这样做。即使通过 AJAX 完成，也会同时完成，可能不会严重影响其他 DOM 元素的加载。

我会：

1.  首先加载右侧面板。
2.  通过 AJAX 加载左侧面板并实现分页或实时搜索功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:41:59.707

最初隐藏右列，并在您的 ajax 函数（或您正在加载内容的任何内容）中放置一个回调，使右列可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:42:35.197

我建议在主页加载后使用 AJAX 加载左侧内容。基本概念是有一个空的左面板，填充的右面板作为页面的核心 HTML。然后，当页面在浏览器中加载时，使用 AJAX (jQuery.load) 来引入左侧列的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:42:40.203

```
 $(document).ready(function() {
  $("div").show(); 
}); 
```

并在 Css 中隐藏了 div 权利

或者使用 ajax 向左加载，完成后显示 div 吗？

```
$.ajax({
  url: "test.php",
//stuff
}).done(function() {
 $("#rdiv").show(); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T16:42:59.787

```
$(function)() {
  $("#left").load("leftcontent.html");
});

<div id="right" style="float:right">....</div>
<div id="left"></div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T16:43:20.253

如果您`.load(callback)`在尝试加载的 div 上使用该方法，然后将用于呈现页面其余部分的函数放入回调中，它将执行您想要的操作。请注意，这是一种不同于基于 url 加载数据的 jQuery 加载方法。

参考：[http ://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

# c# - KeyDown 和 KeyUp 多个

> ID：15437684
> 
> 赞同：5
> 
> 时间：2013-03-15T16:39:09.520
> 
> 标签：c#, keydown

我正在用 C Sharp 创建一架钢琴，目前我有键盘键来播放声音。例如键 A 播放音符 C。我遇到的问题是我想同时按下多个键并发出声音。显然我不想将所有组合都放在 keyDown 类中，因为我将不得不做出数千个 if 语句。有没有办法解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:55:26.553

Windows 仅使用一个消息队列，因此每次在一个时间单位内只处理一个按键消息。您可以做的是在很短的时间间隔内获取所有按键事件（实例为 0.5 秒），将所有按下的按键保存在列表或队列中，然后根据按键异步播放所有声音（使用线程）。我以前从未这样做过，但我认为应该可行。希望有帮助...

**编辑**

* * *

好的，让我们看看：首先是保存密钥的列表

`List<Key> _keys = new List<Key>();`

然后启动一个计时器来检查在一个时间间隔内按下的键：

```
 var t = new System.Timers.Timer(500);    //you may try using an smaller value
        t.Elapsed += t_Elapsed;
        t.Start(); 
```

然后`t_Elapsed`方法（请注意，如果您在 WPF 中`DispatcherTimer`应该使用 an ，此计时器是 on `System.Timers`）

```
 void t_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        if (_keys.Count > 0)
        {
             //Here get all keys and play the sound using threads
             _keys.Clear();
        }
    } 
```

然后是 on key down 方法：

```
void OnKeyDownMethod(object sender, KeyPressedEventArgs e)  //not sure this is the name of the EventArgs class
 {
    _keys.Add(e.Key);    //need to check
 } 
```

你可以试试这个，希望对你有帮助。

# language-agnostic - 超越类型论

> ID：15437688
> 
> 赞同：4
> 
> 时间：2013-03-15T16:39:17.137
> 
> 标签：language-agnostic, type-theory

关于动态类型语言与静态类型语言的争论很多。然而，在我看来，虽然静态类型语言使编译器（或解释器）能够更多地了解您的意图，但它们只是触及了可以传达的内容的表面。实际上，某些语言具有正交机制，可以在注释中提供更多信息。

我知道像 Agda 和 Coq 这样的强类型语言对它们允许你做什么非常挑剔。我对那些不是很感兴趣。相反，我想知道存在哪些语言或理论可以扩展您可以向编译器解释您想要什么的丰富性。例如，如果您有一个*可变*向量并将其转换为单位向量，为什么您的编译器不能选择向量投影的单位向量形式而不是计算量更大的通用形式？类型没有改变——构建所有必需类型所需的工作即使在像 Haskell 这样的打字非常容易的语言中也会令人反感——但似乎编译器可以知道很多关于情况。

某些语言是否已经在标准类型理论之外或在其更高级的分支之一中实现了这样的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T00:46:32.000

有些语言具有图灵完备的系统类型。这意味着您的类型可以表达任何可计算的属性。例如长度为 6 的列表或有效的信用卡号。但是大多数主流语言使用更简单的系统类型。haskell 被认为具有非常强大的系统类型

# ios - 顺时针旋转 iOS 图像

> ID：15437689
> 
> 赞同：0
> 
> 时间：2013-03-15T16:39:17.257
> 
> 标签：ios, uiimageview, uianimation

我正在尝试通过顺时针旋转来为我的图像设置动画，然后缩小。到目前为止，它只是逆时针方向。我已经为沿 Z 旋转的值/键路径尝试了正值和负值，但它没有改变。

```
[window addSubview:splashView];
    [window bringSubviewToFront:splashView];
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:2.0];

    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(startupAnimationDone:finished:context:)];
    splashView.frame = CGRectMake(160, 284, 0, 0);
    [splashView.layer setValue:[NSNumber numberWithInt:-360]
                       forKeyPath:@"transform.rotation.z"];

    [UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:48:03.583

或者直接使用 M_PI。

*   `M_PI_4`= 45度
*   `M_PI_2`= 90 度
*   `M_PI`= 180 度
*   `M_PI*2`= 360 度

您还可以更轻松地设置转换。

```
// set transform
splashView.layer.transform = CATransform3DMakeRotation(-M_PI*2, 0, 0, 1); 
```

代替

```
[splashView.layer setValue:[NSNumber numberWithInt:-360] 
                forKeyPath:@"transform.rotation.z"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:58:55.260

要**在特定方向**旋转超过 360°，请使用`CAKeyframeAnimation`. 在那里，您不仅可以设置最终值，还可以设置一些**中间值**。

```
// consider this to be pseudo code
keyFrameAnimation.values = @[ 90, 180, 270, 360, 450, 540, ... ]; 
```

我没有任何代码可以给你看，但这绝对是这样做的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:43:38.337

那是因为当动画需要弧度时，您正在将度数传递给动画。这是如何进行转换的示例。

```
float degrees = 90.0f;
float radians = degrees * (180.0f / M_PI); 
```

# vim - 如何从 .vim 文件打印？

> ID：15437691
> 
> 赞同：0
> 
> 时间：2013-03-15T16:39:22.313
> 
> 标签：vim

我想打印内部变量，例如文件`s:myvar`内部`.vim`。我的第一直觉是使用`echo s:myvar`and `:source %`，但我没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:03:47.310

我可以理解如何`:echo`导致错误（当给定一个 invalid 时`{expression}`），但没什么好`:print`抱怨的；它只允许 3 个不同的`[flags]`. （而且它不会输出到打印机，那是`:hardcopy`！！！）*编辑：在完全改写问题后，这看起来不合适*

任何状况之下：

*   您可以通过附加“减慢”输出`| sleep 10`
*   用于`:echomsg`记录输出，然后调用以前的错误和输出`:messages`
*   增加错误空间`:set cmdheight=5`

对于更高级的调试解决方案，有[Decho 插件](http://vim.sourceforge.net/scripts/script.php?script_id=120)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:45:54.027

事实证明`finish`在我的回声消息之前被调用。

# c++ - 错误：预期的不合格 ID

> ID：15437692
> 
> 赞同：2
> 
> 时间：2013-03-15T16:39:27.997
> 
> 标签：c++

所以，我四处寻找答案，多人得到相同的错误响应，但我看不出他们的错误如何修复我的代码。

我昨天开始尝试 C++，但我对 Python 和 C# 都很有经验

我正在制作一个简单的通讯录，只是为了学习。我没有完成类或任何其他实现，只需要先修复它。

确切的错误是

```
kontaktbok.cpp:9: error: expected unqualified-id before 'public' 
```

代码在这里

```
#include <iostream>
#include <string>
#include <sstream>

using namespace std;

bool running = true;

public class Contact
{
    private:
        string firstname   = "";
        string lastname    = "";
        string phonenumber = "";

    public:
        Contact()
        {
            this.firstname = "Alfred";
        }
};

int main()
{
        cout << "Welcome to the Contact book!" << endl <<
                "Made by X";
    while (running)
    {
        cout << "1\. Add contact"    << endl
             << "2\. List contacts"  << endl
             << "3\. Quit"           << endl;
        cout << "Choice: ";
        string mystr;
        getline(cin, mystr);
        int choice;
        stringstream(mystr) >> choice;
        switch (choice)
        {
            case 1: cout << "asd";
            case 2: cout << "asd2";
            case 3: running = false;
            default : cout << "Invalid integer";
        }
    }
    return 0;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T16:40:29.530

`public class Contact`不是有效的 C++，请`class Contact`改用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T16:41:41.970

这些更改将解决您的问题，`public Class`不是有效的 C++，它应该只是`class`：

```
class Contact
{
  private:
      string firstname ;
      string lastname  ;
      string phonenumber ;

  public:
    Contact()
    {
        this->firstname = "Alfred";
    }

  }; 
```

`->`此外，当取消引用`this`它是一个指针而不是普通指针`struct`或`class`using`.`有效时，您应该使用它。此外，成员变量应该在构造函数中初始化，如果你想要 empty `string`s 默认构造函数构造一个[空字符串](http://www.cplusplus.com/reference/string/string/string/)。

# asterisk - 星号 - 在调用 phpagi 期间获取 dtmf

> ID：15437696
> 
> 赞同：0
> 
> 时间：2013-03-15T16:39:30.300
> 
> 标签：asterisk, dtmf

我在 phpagi 中使用星号 - 我想创建一个变量 $pressedsomething = TRUE; 如果被叫方在通话时按下了某些东西。我一直在环顾四周，不知道从哪里开始。请记住，我想要来自被叫方的 DTMF，而不是来自我的端......

非常感谢我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:18:15.940

你不能从 AGI 做到这一点。但是您可以使用 features.conf 来做到这一点

[http://www.voip-info.org/wiki/view/Asterisk+config+features.conf](http://www.voip-info.org/wiki/view/Asterisk+config+features.conf)

# flask - 找不到记录器“paramiko.transport”的处理程序

> ID：15437700
> 
> 赞同：-1
> 
> 时间：2013-03-15T16:39:40.480
> 
> 标签：flask, fabric, pycrypto

我正在烧瓶内运行一些织物任务。Flask 在 apache 的 wsgi 内部运行。有时我会在 apache 日志中收到此错误：

找不到记录器“paramiko.transport”的处理程序

然后，我必须重新启动 apache，以便通过烧瓶调用的结构任务再次工作。

这里有任何想法......我正在运行 Ubuntu 12.04

```
Fabric==1.5.3

paramiko==1.9.0

pycrypto==2.6

Flask==0.9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:51:06.103

似乎答案是将 disconnect_all() 添加到我的所有结构函数中。现在问题似乎已经消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T08:12:10.323

我从这个网站找到了 paramiko 的解决方案：[https ://translate.google.com/translate?hl=en&sl=zh-CN&tl=en&u=http%3A%2F%2Fwww.ouvps.com%2F%3Fp%3D869](https://translate.google.com/translate?hl=en&sl=zh-CN&tl=en&u=http%3A%2F%2Fwww.ouvps.com%2F%3Fp%3D869)

基本上，您只需要添加一行

paramiko.util.log_to_file("filename.log")

然后所有连接都将记录到文件中

不知道在哪里把那条线放在织物上

# java - Java中的调用方法

> ID：15437701
> 
> 赞同：0
> 
> 时间：2013-03-15T16:39:42.737
> 
> 标签：java, mysql, methods

我想通过使用文件 aplikacja.properties 中的主机、用户名、密码来连接 mysql db。但是我有问题 bcs 那些方法返回 null 我不知道为什么？

获取主机（）

获取用户名（）

获取密码（）

获取数据库（）

```
package aplikacja.mysql;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;

public class Mysql {

    private String host;
    private String username;
    private String password;
    private String db;

    public void readConnectionParam() throws FileNotFoundException, IOException {
        Properties mysqlAplikacjaProperties = new Properties();
        FileInputStream mysqlPlik = new FileInputStream("aplikacja.properties");
        mysqlAplikacjaProperties.load(mysqlPlik);
        host = mysqlAplikacjaProperties.getProperty("jdbc.host");
        username = mysqlAplikacjaProperties.getProperty("jdbc.username");
        password = mysqlAplikacjaProperties.getProperty("jdbc.password");
        db = mysqlAplikacjaProperties.getProperty("jdbc.db");
    }

    public String getHost() {
        return host;
    }

    public String getUsername() {
        return username;
    }

    public String getPassword() {
        return password;
    }

    public String getDb() {
        return db;
    }

    public static void main(String[] args) throws SQLException {

        Mysql baza = new Mysql();
        System.out.println(baza.getUsername());

        Connection polaczenie = null;
        String driver = "com.mysql.jdbc.Driver";
        try {
            Class.forName(driver).newInstance();
            polaczenie = DriverManager.getConnection(
                    "jdbc:mysql://" + baza.getHost() + "/" + baza.getDb(),
                    baza.getUsername(), baza.getPassword());
        } catch (Exception e) {
            e.printStackTrace();
        }
        Statement statement = polaczenie.createStatement();
        String command = "INSERT INTO users (id, name, surname) VALUES (2, 'Tom', 'Suszek')";
        statement.executeUpdate(command);
    }
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:41:58.323

我没有看到任何调用该`readConnectionParam`方法的代码，这是唯一可以初始化返回的方法中返回的变量的方法`null`。叫它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:45:42.237

利用 -

```
baza.readConnectionParam(); 
```

后

```
Mysql baza = new Mysql(); 
```

陈述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:43:27.143

你应该首先初始化你的变量调用方法

```
readConnectionParam 
```

主内

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:44:26.893

您必须调用`readConnectionParam()`Method，因为这些字段已在此处初始化。

尝试：

```
Mysql baza = new Mysql();
baza.readConnectionParam();
System.out.println(baza.getUsername()); 
```

将上面的代码包含在 a 中，`try catch`因为该方法`readConnectionParam()`会抛出`Exception`s

# sql - 将已在 CASE 语句中计算的两列相乘

> ID：15437704
> 
> 赞同：2
> 
> 时间：2013-03-15T16:39:50.197
> 
> 标签：sql, postgresql, group-by, case, case-when

我正在使用`CASE`如下语句在 PostgreSQL 中执行 SQL 查询：

```
SELECT
    CASE column1
        WHEN something THEN 10
        ELSE 20
        END AS newcol1
    CASE column12
        WHEN something THEN 30
        ELSE 40
        END AS newcol2
COUNT(column3) newcol3
FROM table
GROUP BY newcol1,newcol2,newcol3 
```

我需要第四列，它必须是 的结果`newcol2 * newcol3`，我该怎么做？

如果我把`(newcol2 * newcol3) AS newcol4`我得到一个语法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:56:50.027

如果有帮助，您始终可以使用 CTE 将事物抽象到不同的级别 - 类似于...

```
With CTE as
(
 SELECT
  CASE column1
    WHEN something THEN 10
    ELSE 20
    END AS newcol1,
  CASE column12
    WHEN something THEN 30
    ELSE 40
    END AS newcol2,
  column3,
 FROM table
)
SELECT
  newcol1, newcol2,
  count(column3) as newcol3,
 (newcol2 * newcol3) AS newcol4
FROM CTE 
GROUP BY newcol1,newcol2,newcol3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T01:03:54.223

CTE 是一种有效的方法，提供了额外的选择。
对于像这样的简单情况，普通**子查询**更简单且速度稍快。

```
SELECT *, (newcol2 * newcol3) AS newcol4
FROM  (
   SELECT CASE column1
            WHEN something THEN 10
            ELSE 20
            END AS newcol1
         ,CASE column12
            WHEN something THEN 30
            ELSE 40
            END AS newcol2
        ,COUNT(column3) AS newcol3
   FROM  table
   GROUP BY 1, 2
   ) AS sub 
```

顺便说一句：我`newcol3`从中删除`GROUP BY`，因为您在其上运行聚合函数`count()`，这有点荒谬。

# mysql - phpmyadmin 中的 MySQL“命令不同步”

> ID：15437707
> 
> 赞同：-1
> 
> 时间：2013-03-15T16:40:00.523
> 
> 标签：mysql

我刚刚遇到[不同步的 MySQL 命令；您现在无法运行此命令](http://dev.mysql.com/doc/refman/5.0/en/commands-out-of-sync.html)错误。它以前出现过，但这些问题和答案是指应用程序级代码。

这是我试图通过 phpmyadmin 导入的文件。（它是从真实代码中简化而来的。）**我很困惑，因为我在其他文件中有其他组的 drop/create/call 语句可以很好地导入。**

是什么导致了错误？

```
DROP PROCEDURE IF EXISTS `c9gtd`.`select_changes`;

CREATE PROCEDURE `c9gtd`.`select_changes`
(
    IN `user_id` INT,
    IN `days`    INT
)
SELECT
    0 AS `id`
;

CALL `c9gtd`.`select_changes`(-1,-1); -- Test

DROP PROCEDURE IF EXISTS `c9gtd`.`select_info`;

CREATE PROCEDURE `c9gtd`.`select_info` (IN `id` INT) -- ERROR IS HERE
    SELECT
    0 AS `id`
;

CALL `c9gtd`.`select_info`(-1); -- Test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:11:22.247

这是因为两个存储过程都是 SELECT。到目前为止，所有存储过程都是 UPDATE：当没有数据返回时，一个连接中有多个 CALL 是可以的。

# ios - 更改语言后 ios 应用程序崩溃

> ID：15437708
> 
> 赞同：1
> 
> 时间：2013-03-15T16:40:24.347
> 
> 标签：ios, uiviewcontroller, localization, crash, uistoryboard

我有一个包含 StoryboardID 为“PendingToursVC”的 ViewController 的故事板。在我的代码中，我执行以下操作：

```
@try {
        self.pendingToursVC = [storyboard instantiateViewControllerWithIdentifier:@"PendingToursVC"]; <-- app crashes on this line
    }
    @catch (NSException *exception) {
        NSLog(@"exception:\n%@", [exception description]);
    } 
```

程序在这一行停止，在崩溃堆栈中，您可以看到抛出了 objc_exception_throw（无论是什么）。

![在此处输入图像描述](../Images/665491ed8c27b8e7cd68994af7b03837.png)

那么，为什么控制台中没有显示异常。这样我不明白这里发生了什么。任何提示如何找出都表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:53:10.797

谢谢阅读。解决方案是，我有两个故事板（德语和英语）。在英文故事板中存在视图控制器。但是我昨天把我的iphone从西班牙语变成了德语。因此，该应用程序尝试从德语情节提要中检索视图控制器。因此它不存在并崩溃。那是个大错特错。

# ios - 如何在 iOS 设置捆绑 plist 中创建“组合框”类型的选择/文本输入？

> ID：15437715
> 
> 赞同：1
> 
> 时间：2013-03-15T16:40:55.870
> 
> 标签：ios, settings.bundle

我需要使用在我的应用程序设置面板上输入自定义值的选项来创建多值选择。那可能吗？

注意：我询问的是在 iOS 设置中为我的应用程序显示的面板，而不是在我的一个 ViewController 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:48:44.200

不幸的是，不，这是不可能的。以下是文档页面，其中列出了您可以提供的不同类型的设置：

[http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)

# git - Git 推送错误：“origin 似乎不是 git 存储库”

> ID：15437719
> 
> 赞同：82
> 
> 时间：2013-03-15T16:41:07.430
> 
> 标签：git, git-remote

我正在按照[此处给出的说明](http://qugstart.com/blog/ruby-and-rails/create-a-new-git-remote-repository-from-some-local-files-or-local-git-repository/)创建一个 Git 存储库。一切顺利，直到最后一行：

```
$ git push -u origin master 
```

> 致命：'origin' 似乎不是 git 存储库
> 致命：远程端意外挂断

我在 OS X 10.6.8 上使用 git 版本 1.7.11.3

```
$ git remote -v 
```

什么都不返回

存储库的配置文件：

```
[core]
repositoryformatversion = 0  
filemode = true  
bare = false
logallrefupdates = true  
ignorecase = true 
```

我不得不使用 sudo visudo 命令打开 sudoers 文件并向其中添加以下内容（在 # User privilege specification 下）：

```
git ALL=(ALL) ALL. 
```

现在，如果我这样做：

```
$ git remote add origin /Volumes/500GB/git-repository/myproject.git 
```

它返回时没有错误，但我在存储库中看不到任何代码（它具有上述目录，如分支、钩子等）

如果我做：

```
$ git push -u origin master  
fatal: 'origin' does not appear to be a git repository
fatal: The remote end hung up unexpectedly

$ git remote -v   
origin /Volumes/500GB/git-repository/myproject.git (fetch)     
origin /Volumes/500GB/git-repository/myproject.git (push) 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-16T02:56:48.887

[正如che 关于添加远程部分的回答](https://stackoverflow.com/a/15439950/829571)中已经提到的那样，我相信你仍然缺少它。

关于在本地 USB 驱动器上添加遥控器的编辑。首先，如果您希望您的存储库成为共享存储库，即能够推送/拉取/获取/合并等，您必须拥有一个“裸存储库”。

要创建裸/共享存储库，请转到您想要的位置。在你的情况下：

```
$ cd /Volumes/500gb/   
$ git init --bare myproject.git 
```

有关创建裸存储库的更多信息，请参见[此处](http://www.gitguys.com/topics/creating-a-shared-repository-users-sharing-the-repository/)

一旦你在你想要的位置设置了一个裸存储库，你现在可以将它作为远程添加到你的工作副本中。

```
$ git remote add origin /Volumes/500gb/myproject.git 
```

现在您可以将更改推送到您的存储库

```
$ git push origin master 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-05-16T17:17:02.050

以下是来自 github 的说明：

```
touch README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin https://github.com/tqisjim/google-oauth.git
git push -u origin master 
```

这是实际工作的：

```
touch README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin https://github.com/tqisjim/google-oauth.git
git clone origin master 
```

克隆后，推送命令成功，提示输入用户名和密码

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-07-04T22:06:41.063

很可能远程存储库不存在，或者您添加了错误的存储库。

您必须首先删除原点并重新添加它：

```
git remote remove origin
git remote add origin https://github.com/username/repository 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-15T18:44:30.700

您的配置文件不包含对“原始”远程的任何引用。该部分如下所示：

```
[remote "origin"]
    url = git@foo.com:repository.git
    fetch = +refs/heads/*:refs/remotes/origin/* 
```

您需要先添加遥控器 using`git remote add`才能使用它。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-07-31T09:41:08.737

当您在[bitbucket.org](https://bitbucket.org/)**创建**存储库时，它会为您提供有关如何设置本地目录的说明。很可能，您只是忘记运行代码：

`git remote add origin https://username@bitbucket.org/username/reponame.git`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-02-25T23:04:49.990

可能是你忘了`git --bare init`在遥控器上运行“”？那是我的问题

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-02-16T16:39:24.210

我仍然会谦虚地分享我的简短答案，因为我知道我回答这个问题已经很晚了。

**[这是一个简单明了的解释，解决了我的问题](https://confluence.atlassian.com/bbkb/fatal-origin-does-not-appear-to-be-a-git-repository-306348429.html)**

此外，由于我使用的是**SSH 密钥**，因此我使用了以下命令：

*   **$ git remote add origin git@github.com:{your-username}/{your-remote-repo-branch}**

例如它看起来像：

*   **$ git remote add origin git@github.com:aniketrb-github/microservices.git**

如果您使用的是 HTTPS URL，请参阅上面**@sunny-jim**提供的答案。

如果我错了，请纠正我。谢谢。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-09-18T06:59:13.403

我的情况有点不同 - 我无意中更改了 git 存储库的所有者（在我的情况下为 project.git 目录），将所有者更改回**git**用户有帮助

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-11-28T18:19:33.833

如果您使用 HTTPS，请执行此操作 -

```
git remote add origin URL_TO_YOUR_REPO 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-08-12T21:08:33.097

我遇到了这个问题，因为我已经在本地定义了远程源。所以只需将“ **origin** ”更改为另一个名称：

*git remote add **originNew** [https://github.com/UAwebM](https://github.com/UAwebM) ...*

*git push -u **originNew***

或者您可以删除您的本地来源。检查您的远程名称类型：

*远程git*

删除远程 - 登录您的克隆存储库并输入：

*git remote remove origin*（取决于您的遥控器名称）

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-11-30T14:43:23.633

为了解决这个问题。我只是创建一个新文件夹并放置一些新文件。然后使用这些command。

```
* git add .
* git commit 
* git remote add master `your address` 
```

然后它告诉我登录。输入您的用户名和密码。之后

```
git pull 
git push origin master 
```

完成你已经将你的代码推送到你的 github

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-10-20T12:44:36.693

这是我解决此问题的方法

转到 Github 上的远程存储库并复制项目的存储库 url。

在 git bash 上键入： git remote add origin***远程存储库 url 在这里***

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-11-30T08:23:23.573

设置远程存储库 URL 对我有用：

`git remote set-url origin https://github.com/path-to-repo/MyRepo.git`

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-03-16T14:48:59.800

看到这是我们遇到的问题，因为您的存储库无法从 CLI 访问，或者您无权执行第二种情况很简单，您只需请求访问权限，然后您就可以执行此操作。对于第一种情况，如果**`git push origin <private_branch_name>`**不工作，那么它将在 CLI 本身中给出解决方案，只需执行一个步骤：

1.  `git remote add <name> <URL>`. [在此处输入图像描述](https://i.stack.imgur.com/braQH.png) `<URL>`可以使用 Gitlab/Github 的 UI -> 克隆 -> 复制 https 进行访问。链接然后
2.  `git push origin <private_branch name>` 现在提高 MR。参考图片。

# java - 需要帮助在 Eclipse 中使用 ACM Java 库运行程序

> ID：15437723
> 
> 赞同：1
> 
> 时间：2013-03-15T16:41:21.757
> 
> 标签：java, eclipse, acm-java-libraries

我刚开始在 iTunes 上参加斯坦福 CS106a 课程，但我遇到了 Eclipse 的问题。这是我的代码：

```
/*
 * File: Add2Integers.java
 * -----------------------
 * A simple ConsoleProgram to add two integers
 * and display their total.
 */

import acm.program.*;

public class Add2Integers extends ConsoleProgram {

public void run() {
    /* So all y'all in the back can see! */
    setFont("DejaVuSerif-BOLD-24");

    println("This program adds two numbers.");
    int n1 = readInt("Enter n1: ");
    int n2 = readInt("Enter n2: ");
    int total = n1 + n2;
    println("The total is " + total + ".");
}

} 
```

当我尝试运行它时，我收到该部分不包含小程序的消息。我认为这与`import acm.program`.

我下载了 acm 工具包并尝试将`program.java`文件添加到我的根文件夹，构建路径，对整个 acm 文件夹执行相同操作，但没有任何效果。

我只需要帮助启动并运行这个简单的程序，这样我就可以开始学习了。

我正在运行 OSX 10.8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:45:46.203

要运行 Java 应用程序，您需要一个*main*方法：

```
public static void main(String[] args) {
    Add2Integers add2Integers = new Add2Integers();
    add2Integers.run();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:48:39.530

您需要从一个方法*开始：*`ConsoleProgram``main`

```
public static void main(String[] args) {
   new Add2Integers().start(args);
} 
```

请参阅：[JTF 包简介](http://jtf.acm.org/tutorial/Introduction.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T10:51:37.487

> 当我尝试运行时，我收到该部分不包含小程序的消息。

那是因为它不是小程序。它是一个普通的 Java 应用程序。

做图形的例子是小程序。但这是纯文本 - 它扩展`ConsoleProgram`- 所以它不是一个小程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-26T20:46:35.017

我知道为时已晚，但是您不需要 main(String[] args)，您只需在项目中按右键，转到属性，然后 java 构建路径、库、添加外部 Jars，然后搜索 acm .jar 文件在您的 PC 中。

# vim - 如何在启动时暂停 vim 错误消息？

> ID：15437724
> 
> 赞同：42
> 
> 时间：2013-03-15T16:41:26.103
> 
> 标签：vim

我在一个文件中有一个错误`.vim`，所以当我运行加载该错误的命令时，它会在我读取它们之前将错误闪烁到屏幕上一毫秒。我想暂停此显示或延长超时，以便我可以阅读它们。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-15T17:00:27.263

使用`:messages`，您可以调用以前的（错误）消息。（但请注意，Vim 只保留最后 200 个。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:55:47.463

你能重定向stderr吗？

```
<programname> 2> error.log 
```

我想这取决于您的情况，但可以使它起作用。

# android - 带有 Sprite 池的随机 Sprite

> ID：15437725
> 
> 赞同：0
> 
> 时间：2013-03-15T16:41:26.513
> 
> 标签：android, sprite, andengine, pool

我想知道 Sprite Pool 是如何工作的，因为我不太了解它们。我要做的是在每次用户触摸按钮时显示随机精灵（我已经管理了控件），但我的代码似乎不正确，因为它只会一遍又一遍地显示相同的精灵。

这是我的代码：

```
public class SpritePool extends GenericPool<Sprite> {
    private ITextureRegion mTexture1, mTexture2, mTexture3, mTexture4, mTexture5;

    private VertexBufferObjectManager mVertexBufferObjectManager;

    private Sprite sprite = null;

    public SpritePool(ITextureRegion pTextureRegion1, ITextureRegion pTextureRegion2, ITextureRegion pTextureRegion3
                    , ITextureRegion pTextureRegion4, ITextureRegion pTextureRegion5, VertexBufferObjectManager pVerTexBufferObjectManager){
                    this.mTexture1 = pTextureRegion1;
                    this.mTexture2 = pTextureRegion2;
                    this.mTexture3 = pTextureRegion3;
                    this.mTexture4 = pTextureRegion4;
                    this.mTexture5 = pTextureRegion5;
                    this.mVertexBufferObjectManager = pVerTexBufferObjectManager;          
            }

    @Override
    protected Sprite onAllocatePoolItem() {

            YesOrNoActivity.setRoll_1(MathUtils.RANDOM.nextInt(5) + 1);

            switch(YesOrNoActivity.getRoll_1()){
                    case 1:
                                    sprite = new Sprite(0, 0, this.mTexture1, this.mVertexBufferObjectManager);
                                    break;
                    case 2:
                                    sprite = new Sprite(0, 0, this.mTexture2, this.mVertexBufferObjectManager);
                                    break;
                    case 3:
                                    sprite = new Sprite(0, 0, this.mTexture3, this.mVertexBufferObjectManager);
                            break;
                    case 4:
                                    sprite = new Sprite(0, 0, this.mTexture4, this.mVertexBufferObjectManager);
                                    break;
                    case 5:
                                    sprite = new Sprite(0, 0, this.mTexture5, this.mVertexBufferObjectManager);
                            break;
            }
            return sprite;
    }

    public synchronized Sprite obtainPoolItem(final float pX, final float pY) {
            Sprite sprite = super.obtainPoolItem();
            sprite.setPosition(pX, pY);
            sprite.setVisible(true);        
            sprite.setIgnoreUpdate(false);
            sprite.setColor(1,1,1);
            return sprite;
    }

    @Override
    protected void onHandleRecycleItem(Sprite pItem) {
            super.onHandleRecycleItem(pItem);
            pItem.setVisible(false);
            pItem.setIgnoreUpdate(true);
            pItem.clearEntityModifiers();
            pItem.clearUpdateHandlers();
    }
} 
```

希望大家能帮帮我，谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:52:26.247

我将从我的应用程序中向您展示一个简单的奶牛池，让您了解池的工作原理。我的 CowPool 用作生成 CowCritters（四处走动、吃草并通常做你期望奶牛做的事情的 NPC 奶牛）的来源。这是代码：

```
public class CowPool extends GenericPool<CowCritter> {
private final String        TAG = this.getClass().getSimpleName();

public CowPool() {
    super();
}

@Override
protected CowCritter onAllocatePoolItem() {
    return new CowCritter();
}

protected void recycle(CowCritter cow) {
    this.recyclePoolItem(cow);
}

} 
```

您会看到有两种方法，一种是分配池项目（生成一头新奶牛），另一种是回收奶牛。当我需要一头牛时，我不会调用这两种方法，而是调用cowPool.obtainPoolItem()。如果池中有奶牛，它将归还奶牛。如果没有，它将调用 onAllocatePoolItem()，创建一头新奶牛，并将返回该奶牛。当我处理完一头奶牛后，我使用 recycle() 方法将它扔回池中。

**这一切有什么意义？**

好吧，首先请注意，我不必做任何这些。相反，我可以在需要时实例化一头新牛，然后将其丢弃。要理解的关键点是，当我实例化一头新奶牛时，会有开销。它分配内存资源。等等。同样，当我处理一头牛时，它也有资源。在某些时候，垃圾收集将不得不清理所说的牛，这需要一点处理时间。

池化本质上只是一种回收形式。我知道我将来会再次需要一头牛，所以我没有永久处理这头牛，而是把它放在水池里，然后，当我需要一头牛时，牛就在我身边。不涉及垃圾收集，因为池正在保留额外的牛。并且实例化一头新奶牛更快，因为我并没有真正实例化一头新奶牛，奶牛已经在池中（除非奶牛不在，然后它会制造一头奶牛）。

理解池化是一种优化形式也很重要。您不会通过池化获得新功能；相反，您可能会更智能地处理资源。我说可能，因为池化对象并不总是有意义的。

I would suggest that you avoid pooling just for pooling's sake. In other words, make sure you're addressing an actual issue. Profile your code and find out where the real bottlenecks are. If the creation or disposal of objects is taking real time or memory, you may want to start pooling. A perfect opportunity for pooling would be bullets. Imagine you're spraying tons of bullets, creating new ones and disposing of the old ones. In such a case, you might get a real performance benefit by pooling instead.

Hope this helps.

# c# - 在c#中，是否可以将两个不同的类作为返回类型从一层传递到另一层？

> ID：15437726
> 
> 赞同：1
> 
> 时间：2013-03-15T16:41:28.690
> 
> 标签：c#, n-tier-architecture

我的应用程序具有 n 层架构。我有不同的层（业务逻辑和数据链接和 GUI）。我正在使用一些通用类将数据从一层传递到另一层。我有一个`RetrnValueCls`只有两个变量`Return value`和`Return Message`. 当我将数据从一层传递到另一层时，我需要返回这个`Return Value`类以及`MasterItemsCls`具有其他变量的另一个类（比如）。

下面是方法

```
public MasterItemsCls GetMasterItemsMDL()
{
    /* Does some computations and assign them to
    attributes of MasterItemsCls and pass it other methods in other layers. */
}

public ReturnValueCls GetMasterItemsMDL()
{
    /* Does some computations and assign them to
    attributes of ReturnValueCls and pass it other methods in other layers. */
} 
```

我想同时返回上述两个类（`MasterItemsCls`& `ReturnValueCls`）作为该方法`GetMasterItemsMDL`的返回类型，而且我不想将这两个类结合起来。请让我知道是否有任何方法可以做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T16:44:12.577

一个函数只能返回一个值，所以从这个意义上说，答案是否定的。

函数可以有`out`参数，因此您可以通过参数返回两个值之一`out`。

在我看来，最干净的处理方法是使用第三类来包含其他两个。 [`Tuple<T1,T2>`](http://msdn.microsoft.com/en-us/library/dd268536.aspx)可用于此目的：

```
public Tuple<MasterItemsCls, ReturnValueCls> MyFunction()
{
    // Do stuff
    return new 
    Tuple<MasterItemsCls, ReturnValueCls>(myMasterItemsCls, myReturnValueCls);
} 
```

的一个缺点`Tuple<T1,T2>`是这些值被访问为相当不直观的`Item1`和`Item2`。

如果您不想使用`Tuple<T1,T2>`，很容易创建自己的类来包含`MasterItemsCls`和`ReturnValueCls`。这是我的首选方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T16:43:24.820

您不需要组合这两个类，但一种可能且直接的方法是生成一个类，该类包含您尝试返回的每个类的一个实例。

```
public class YouClassName
{
     public MasterItemsCls MasterItemsCls {get; set;}
     public ReturnValueCls ReturnValueCls {get; set;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:49:30.597

泛型作为返回元素的包装器可能会有所帮助。

您可以执行以下操作：

```
public ReturnValueCls<MasterItemsCls> GetMasterItemsMDL()
{

} 
```

您`ReturnValueCls<T>`期望其返回类型有一个类型参数。因此，您的 retun 类型可以充当您所需返回的包装器，并能够保存您的返回消息。

* * *

您的类定义示例。可能需要一些约束：

```
public class ReturnValueCls<T>
{
    public T Value { et; set;}
    public string Message {get; set;}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:44:01.183

一个方法只能返回一个对象。您可能会创建一些其他类，其中包含每个其他类的实例。

# c# - 一键上传多个文件

> ID：15437730
> 
> 赞同：0
> 
> 时间：2013-03-15T16:41:39.413
> 
> 标签：c#, jquery, asp.net, file-upload

这个元素，

```
<asp:FileUpload ID="FileUploadEventosCasal" runat="server" /> 
```

可以按时间上传一个文件（按钮单击）。

我想知道如何一键上传多个文件（排队）。我不能使用 .net 4.5。我想要这样的例子：[http](http://www.aspdotnet-suresh.com/2012/12/aspnet-upload-multiple-files-using.html) ://www.aspdotnet-suresh.com/2012/12/aspnet-upload-multiple-files-using.html为了使它工作，我做了这些改变：

```
<script src="js/jquery-1.8.2.js"></script>
<script>$(function () {/* jquery.MultiFile.js code pasted here */});</script>

<asp:FileUpload ID="FileUploadEventosCasal" CssClass:"multi" runat="server" /> 
```

但这种变化只是为了运行。当我尝试上传时，它不起作用。这是按钮事件：

```
protected void ButtonInsMultipleUpload_Click(object sender, EventArgs e)
{
    HttpFileCollection fileCollection = Request.Files;
    List<byte[]> imgs = new List<byte[]>();
    for (int i = 0; i < fileCollection.Count; i++)
    {
        HttpPostedFile uploadfile = fileCollection[i];
        imgs.Add(new byte[uploadfile.InputStream.Length]);
        uploadfile.InputStream.Read(imgs[i], 0, imgs[i].Length);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:45:13.573

从我的头顶上掉下来？我会研究类似[plupload](http://www.plupload.com/)的东西。

您可以选择多个文件，它支持分块...是的，您可能需要做的不仅仅是在页面上放置一个控件，但您将拥有更多的控制权和更流畅的体验。

检查[示例](http://www.plupload.com/example_queuewidget.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:49:07.317

在 ASP.NET 4.5 FileUpload 控件支持上传多个文件：

```
<asp:FileUpload ID="FileUpload1" runat="server" AllowMultiple="true" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:24:59.547

我发现了我的错误。在按钮单击方法中，我进行了以下更改：

```
HttpFileCollection fileCollection = Request.Files;
List<byte[]> imgs = new List<byte[]>();
for (int i = 0; i < fileCollection.Count; i++)
{
    HttpPostedFile uploadfile = fileCollection[i];
    byte[] imageBytes = new byte[uploadfile.InputStream.Length];
    uploadfile.InputStream.Read(imageBytes, 0, imageBytes.Length);
    if(imageBytes.Length > 0)
       imgs.Add(imageBytes);
} 
```

谢谢帮忙！！

# php - 如何从 Drupal 模块文件中的 .js 文件调用 javascript 函数

> ID：15437732
> 
> 赞同：0
> 
> 时间：2013-03-15T16:41:51.153
> 
> 标签：php, javascript, drupal, drupal-6, drupal-modules

我正在尝试修改现有模块以插入可折叠 div。我的 javascript 函数位于文件“my_module.js”中，如下所示：

```
my_module.js

function myFunction1(param){
...
}

function myFunction2(paramA, paramB){
...
} 
```

我使用 drupal_add_js 在模块文件中添加了 my_module.js，然后我不知道下一步该做什么！

```
<?php

    drupal_add_js(drupal_get_path('module', 'my_module') . '/my_module.js');
    // -----> I want to call myFunction2 here !!
?> 
```

该网站具有 Drupal 核心 6.24。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T06:00:12.640

只需将 my_module.js 作为普通的 javascript 文件继续。您可以尝试使用 JQuery 插入 div。

```
$("#foo").append("<div id='my_collapsible'>hello world</div>") 
```

并通过 JQuery 附加到 #my_collapsible 一些您想要的操作（使其可折叠）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:51:36.803

该方法应该确实有效。

你：

*   检查文件路径是否正确
*   在 firebug/webkit 检查器中检查了 JS 文件正在加载吗？

# ant - Jenkins仅在必要时触发依赖构建？

> ID：15437735
> 
> 赞同：2
> 
> 时间：2013-03-15T16:41:59.380
> 
> 标签：ant, jenkins

我有以下构建场景：

项目 C 依赖于项目 B，而项目 B 又依赖于项目 A

项目 X 依赖于 C，项目 Y 依赖于 B，项目 Z 依赖于 A。

还有许多其他具有依赖关系的模块，但最“复杂”的构建关系是与项目 X。为了在 Jenkins 中进行设置，我使用了参数化触发器插件，带有“阻塞直到触发项目完成构建”选项。每个可构建模块都有自己的 Jenkins 作业，该插件用于阻止必要的依赖构建作业。

我在这个设置中遇到了 2 个问题。

1.  项目 A 和 B 被多次构建，因为它们在项目 X、Y、Z 等的传递依赖链中。
2.  Jenkins 有时会完全阻止构建项目，因为 X、Y、Z 等作业的构建已经填满了所有可用的执行程序（由 scm 更改触发），并且依赖的项目在等待构建的队列中。

我正在寻找有关如何为此类构建环境配置 Jenkins 的建议。我是 Jenkins 的新手，所以我不知道有哪些选项可以解决这个问题。

编辑：

所有作业都由 SCM 更改触发。依赖项目也由 Parameterized Trigger Plugin 触发；“阻止直到触发的项目完成构建”选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:12:49.270

Jenkins 有多种触发构建的方式。最常见的是通过监视存储库更改。

但是，您也可以在另一个作业完成构建后自动触发构建。这是内置在 Jenkins 中的。查看*Build Triggers*下并选中复选框`Build after other projects are built`，或在 Post-Build 部分中，选择*Build Other Projects* post-build action。并且，您可以在构建中使用多个触发器，因此如果来自另一个项目的依赖项发生更改或源文件发生更改，则可能会发生构建。

如果您使用 Maven 或 Ivy，如果项目使用的 Maven/Ivy jar 依赖项发生更改，则可以使用插件来触发构建。

另一个有用的插件是[Copy Artifacts Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)。这允许您将构建工件从项目“X”复制到项目“Y”，以便项目“Y”用于构建。

# asp.net-mvc-4 - MVC 控制器操作是否可以在不涉及 jQuery 的情况下直接订阅 SignalR Hub 事件？作为纯 .NET SignalR 客户端，没有 JavaScript？

> ID：15437738
> 
> 赞同：1
> 
> 时间：2013-03-15T16:42:01.327
> 
> 标签：asp.net-mvc-4, signalr, signalr-hub, signalr.client

我正在尝试确定客户端对 jQuery 的依赖。基本上，我希望控制器订阅集线器并在触发集线器方法/事件时更新控制器操作（重定向、ViewBag 等）。到目前为止，我只找到对视图执行一些更新的 jQuery 集线器连接示例，例如将 <li> 附加到 <ul> 以进行消息输出。

我一直听说您可以从 Channel9 上的演示文稿中执行 SignalR 的纯 .NET 客户端实现，但似乎无法找到它是如何实现的。代码参考/文章会很好。

# java - 为什么这不会导致死锁

> ID：15437741
> 
> 赞同：1
> 
> 时间：2013-03-15T16:42:09.773
> 
> 标签：java, deadlock, synchronized

为什么下面这段代码不会导致死锁？

根据我对多线程编程的有限理解，当`getBar1()`被调用时，`sharedBuffer`将被“锁定”，因此，当方法尝试调用`getBar2()`时，线程将不得不等待`sharedBuffer`（它自己持有！）。换句话说，直到has （和 release ）`getBar2()`才能返回。但另一方面，也不能返回，因为它正在等待返回。`getBar1()``sharedBuffer``getBar1()``getBar2()`

==> 死锁。（但实际上并非如此，这就是我感到困惑的原因）

```
...
Foo sharedBuffer = new Foo();

Bar1 getBar1()
{
     Bar1 bar1;
     synchronized (sharedBuffer)
     {
            bar1 = sharedBuffer.getBar1();
            if (bar1 == null)
                bar1 = new Bar1(sharedBuffer, getBat2());
            sharedBuffer.setBar1(bar1);
     }
     return bar1;
}

Bar2 getBar2()
{
    Bar2 bar2;
    synchronized (sharedBuffer)
    {
        bar2 = sharedBuffer.getBar2();
        if (bar2 == null)
            bar2 = new Bar2();
    }
    return bar2;
}
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:44:36.820

Java 的监视器是递归的，这意味着同一个线程可以多次获取相同的锁。

从 JLS（[§17.1 同步](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.1)）：

> 一个线程 t 可能会多次锁定一个特定的监视器；每次解锁都会反转一次锁定操作的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:47:46.667

它不会死锁，因为您实际上只有一个锁。在这两个函数中，您都锁定了 sharedBuffer。当第一个线程调用 getBar1() 时，它锁定 sharedBuffer。当同一个线程调用 getBar2() 时，它会命中同步块并且已经拥有锁，所以它只是进入锁。

如果要导致死锁，请使用两个不同的值来锁定。然后，只有当时间安排正确时，您才会看到它。如果要强制执行死锁，请确保第一个线程的睡眠时间足够长，以便第二个线程获得锁。

这是一些会死锁的代码......（未经测试，prolly 有错别字）。这应该有效，因为不同的线程拥有锁而不是想要锁的线程。

```
public class Deadlock extends Thread
{
    private Deadlock other;
    private String name;

    public static void main(String[] args)
    {
        Deadlock one = new Deadlock("one");
        Deadlock two = new Deadlock("two");
        one.setOther(two);
        two.setOther(one);
        one.start();
        two.start();
    }

    public setOther(Deadlock other){ this.other = other; }

    public void run() {
       deadlock();
    }

    public synchronized deadlock() {
         System.out.println("thread " + this.name + " entering this.deadlock()");
         sleep(1000); // adjust as needed to guarantee deadlock
         System.out.println("thread " + this.name + " calling other.deadlock()");
         other.deadlock(this.name);
         System.out.println(name + " - deadlock avoided!");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:44:50.437

当并发操作试图以不同的顺序锁定两个或更多资源时，就会发生死锁，并且它们都被卡住等待被另一个锁定的资源。

例如，线程 T1 和 T2 在资源 R1 和 R2 上同步：

*   T1 在 R1 上同步。
*   *调度程序决定 T2 应该运行*
*   T2 在 R2 上同步。
*   T2 尝试在 R1 上同步；它被迫等到 T1 放弃锁定。
*   *调度器看到 T2 不能继续运行，所以允许 T1 运行*
*   T1 尝试在 R2 上同步；它被迫等到 T2 放弃锁定。
*   *两个线程都无法继续*

您在这里所做的是基本同步，一次只允许一个对象访问`sharedBuffer`。

# mysql - MySQL按两列排序（之前和之后）

> ID：15437743
> 
> 赞同：0
> 
> 时间：2013-03-15T16:42:12.590
> 
> 标签：mysql, sorting, sql-order-by

如果我有两个列：

```
number | vip_date 
22     | 22.03.2013
32     | 12.01.2013
38     | NULL
44     | 06.01.2013
20     | 30.03.2013
10     | NULL 
```

我想按数字和日期排序，所以我做类似...的事情`ORDER BY number DESC, vip_date DESC`。

结果按日期排序，日期为 NULL 的 2 行按数字排序。问题是，如何在 NOW() 之后的日期按数字行排序，在 NOW() 之前的日期按数字排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:43:41.750

您可以比较该行是否为空，然后排序：

```
ORDER BY number DESC, (vip_date IS NULL) ASC, vip_date DESC 
```

`(vip_date IS NULL)`将是`1`如果该行是`NULL`，`0`如果不是。因此，0 在 1 之前（这就是我们升序排序的原因）。

# sql - 更新声明 - 导入照片

> ID：15437747
> 
> 赞同：-1
> 
> 时间：2013-03-15T16:42:21.037
> 
> 标签：sql, tsql

我正在尝试将桌面上的文件夹中的照片导入 SQL 数据库，我已经创建了下面的 SQL，但我似乎遗漏了一些东西，我不知道是什么（我对这一切都很陌生）。

你能帮助我吗？

```
USE Racing
Update RaceTracks 
SET RaceTrackPicture
SELECT * FROM OPENROWSET(BULK N'C:\Users\Administrator\Desktop\Pictures for Database\Racecourses\Cheltenham-Racecourse.jpg', SINGLE_BLOB) rs
WHERE RaceTracksID = '11' 
```

谢谢

韦恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:45:17.073

```
USE Racing
Update RaceTracks 
SET RaceTrackPicture =
   (SELECT * 
   FROM OPENROWSET(BULK N'C:\Users\Administrator\Desktop\Pictures for Database\Racecourses\Cheltenham-Racecourse.jpg', SINGLE_BLOB) as rs)
WHERE RaceTracksID = '11' 
```

# jquery - 使用highstocks的散点图？

> ID：15437751
> 
> 赞同：0
> 
> 时间：2013-03-15T16:42:33.087
> 
> 标签：jquery, graph, highstock

![在此处输入图像描述](../Images/c746a39b980ef477483cb12f9c4edcbe.png)

我需要使用 highstocks 创建一个像上面这样的图表。我试过烛台，但它不起作用，即它没有显示任何数据。我究竟做错了什么 ？任何人都可以指导我完成它吗？

谢谢

# jquery - 我可以使用 yepnope/modernizer.load() 检测 DOM 插入吗

> ID：15437763
> 
> 赞同：0
> 
> 时间：2013-03-15T16:42:53.220
> 
> 标签：jquery, modernizr, yepnope

在 Windows 窗体应用程序中，我们有一个 Master.js 文件，在加载 modernizr 后会引用该文件。

我在 masterpage.js 底部的 $(document).ready 函数中声明了我的 modernizer.load 测试，它可以根据我需要的测试加载我的 js 文件。

IE

```
 $(document).ready(function () {
        Modernizr.addTest('mytest', $('section #myid').length > 0);    
        Modernizr.load({
            test: Modernizr.mytest,
            yep: ["custom1.js",
                "customjs2.js"],
            complete: {
                //do stuff
                }
            }
        });
    }); 
```

但是，我希望在 document.ready 和可能在这之后可能发生的 DOM 插入点上都进行此测试。Modernizr 或 jQuery 可以做到这一点吗？

我的目标是在我的 masterpage.js 中声明所有modernizr 测试，而不是在我可能插入需要在测试中加载资源的 DOM 元素之后重新声明测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T18:53:01.703

首先，`Modernizr.addTest()`在您的情况下并不是必需的（它会锁定并可能导致不良行为）。你可以简单地做：

```
Modernizr.load({
    test: $('section #myid').length > 0,
    ...
}); 
```

尽管您可能完全可以跳过它，这取决于您监控 DOM 的方式。**[Livequery](https://github.com/brandonaaron/livequery)**对此有好处：

```
$('section #myid').livequery(function () {
    // This will run whenever a new element matches the selector: either now
    // (if the element already exists), or when it's inserted into the DOM later
    Modernizr.load({
        // no test needed - just use it as an async loader
        load: ['custom1.js', 'custom2.js'],
        complete: function () {
            // do stuff
        }
    });

    // Presumably you only want the above to run once, so remove the Livequery
    // handler now (`arguments.callee` is the current function, i.e. the event
    // handler)
    $('section #myid').expire(arguments.callee);
}); 
```

# jsf - 带有 Facelets 视图的 Spring MVC

> ID：15437768
> 
> 赞同：2
> 
> 时间：2013-03-15T16:43:13.430
> 
> 标签：jsf, spring-mvc, facelets

我尝试了一个愚蠢的解决方案，它使用两个“DispatcherServlets”来使用 facelets 作为 Spring MVC Web 应用程序的视图技术，这暂时很好，facelets 页面可以从控制器获取模型，问题是当 facelets 页面发送一个表单对象，这是这个 Web 应用程序的设置方式：

网页.xml：

```
<servlet>
    <servlet-name>Example</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring/mvc-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet>
  <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Example</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

使用此配置，此控制器的方法可以正常工作：

```
@RequestMapping(value = "/garage", method = RequestMethod.GET)
public ModelAndView get(){
       ModelAndView mav = new ModelAndView() ;
       mav.setViewName("/faces/garage.xhtml") ;
       mav.addObject("listOfCars", carService.getCarList()) ;
       mav.addObject("hello", "Hello World From Spring Controller") ;
       return mav ;  
} 
```

此应用程序中的问题是，在提交表单时，jsf 标签总是试图解析“faces/*.xhtml”视图。像这样的解决方案根本不会改变任何东西。

```
 <h:form>
      <p>
         <h:inputText                    
             id="carMarque"
             title="Quelle est la marque du nouveau véhicule"
             value="#{NewCar.marque}">
             </h:inputText>                  
             <h:commandButton id="submit" value="Ajouter" action="/garage/new" />
      </p>  
 </h:form> 
```

它只是以 ServletException 结束

```
 javax.servlet.ServletException: /newcar.xhtml @22,50 value="#{NewCar.marque}": Target Unreachable, identifier 'NewCar' resolved to null 
```

我不知道有没有办法解决这个问题。

# mysql - MySQL表中的重复数据

> ID：15437769
> 
> 赞同：0
> 
> 时间：2013-03-15T16:43:18.673
> 
> 标签：mysql

假设，在我的带有列的表中

```
id | email     | name
1  | aa@aa.com | aa
2  | aa@aa.com | aaa
3  | bb@b.com  | bb 
```

假设我想删除重复的条目，最好的方法是什么？（如果存在多个条目，则保留第一个记录）。我的表也是 40GB+ / 数十亿条记录。

我们的选择是：

1)

```
ALTER IGNORE TABLE table_name ADD UNIQUE INDEX (email); 
```

这甚至是不可想象的，因为我们 4 小时的停机时间是无法承受的。

2)

*   确定您必须使用 group by 删除的 id 并推送到临时表。
*   使用临时表内部连接基表并删除行

这将产生漏洞和性能问题。

3）我们所做的解决方案是，

*   使用插入忽略选项进行表转储（在从属设备上完成以减少负载）
*   将数据恢复到 diff DB
*   用重命名表交换了两个表
*   增量数据更改也被复制（我们这里有停机时间）这可以通过几分钟的停机时间来完成。它对我有用，因为表上没有更新（我们只有插入）。

如果还支持更新，最好的解决方案是什么。我的主要限制是停机时间？

也许我可以通过启用更新查询（包括表）的日志来扩展 3，并在恢复后运行相同的日志。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:04:57.873

**使用 mysqldump 并将整个表导出到一个文本文件中，该文件为“|” 分开。**

如下图所示，

表.dat

```
1|aa@aa.com|aa
2|aa@aa.com|aaa
3|bb@b.com|bb 
```

假设 table.dat 有 10 亿条记录。

> 1.  将 table.dat 文件拆分为 1000 个子文件。
> 2.  使用 AWK、SED、SHELL、PERL 或 RUBY（我喜欢 ruby​​）并从 PARALLEL 中的所有 1000 个文件中删除重复的行。请参阅“unix 中的后台进程”
> 3.  将 1000 个文件整合到 1 个 dat 文件中。
> 4.  再次删除重复。（效率有点低，这部分，思考和优化）
> 5.  确保您的最终 dat 文件没有任何重复的行。

* * *

将 final.dat 加载到表中！

这可以快一点！无论如何，不​​要停止寻找最好的方法。

# css - Reusing nested classes in LESS for sprite icon reuse

> ID：15437772
> 
> 赞同：3
> 
> 时间：2013-03-15T16:43:21.270
> 
> 标签：css, less, css-sprites, nested-class

I have a `.less` file that contains classes to manage my sprites, such as:

```
.icon-16 { 
    background: url('/Content/images/app/icons-16.png') no-repeat top left; 
    width: 16px; 
    height: 16px;  

    &.about { background-position: 0px 0px;  } 
    &.add { background-position: 0px -16px;  } 
    &.add2 { background-position: 0px -32px;  }
} 
```

Later on in another `.less` file that is being linked, I need to set background images using these sprites.

I know it is possible to reuse a class like this:

```
.myClass {
  .mySharedClass;
} 
```

However I'm unable to work out the correct syntax to reuse a class in a nested hierarchy.

What I would like to do is something like the following:

```
.myClass {
  .icon-16.about;
} 
```

Giving the following output (from **both** `.icon-16` and `.about`):

```
.myClass {
    background: url('/Content/images/app/icons-16.png') no-repeat top left; 
    width: 16px; 
    height: 16px;
    background-position: 0px 0px; 
} 
```

However this doesn't compile.

1.  How can I achieve this nested class reuse?

2.  If what I'm trying to do is not possible, what would be the best alternative to allow my sprites to be used in other classes?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:42:26.057

## Specific Solution in This Case

I recommend making a master mixin to generate what you need, as you need it. Here is a solution that works with your current version of LESS 1.3.1:

**LESS**

```
.make-icon-16(@form: all) { 
    background: url('/Content/images/app/icons-16.png') no-repeat top left; 
    width: 16px; 
    height: 16px;

    @about: 0px 0px;
    @add: 0px -16px;
    @add2: 0px -32px;

    .makePositioning() when (@form = all) {
      &.about { background-position: @about;  } 
      &.add { background-position: @add;  } 
      &.add2 { background-position: @add2;  }
    }

    .makePositioning() when (@form = about) {
      background-position: @about;  
    } 
    .makePositioning() when (@form = add) {
      background-position: @add;  
    }
    .makePositioning() when (@form = add2) {
      background-position: @about;  
    } 

    .makePositioning();  
}

//to generate icon classes
.icon-16 {
  .make-icon-16;
}

//to include as you want in your class
.myClass {
  .make-icon-16(about);
} 
```

**CSS Output**

```
.icon-16 {
  background: url('/Content/images/app/icons-16.png') no-repeat top left;
  width: 16px;
  height: 16px;
}
.icon-16.about {
  background-position: 0px 0px;
}
.icon-16.add {
  background-position: 0px -16px;
}
.icon-16.add2 {
  background-position: 0px -32px;
}
.myClass {
  background: url('/Content/images/app/icons-16.png') no-repeat top left;
  width: 16px;
  height: 16px;
  background-position: 0px 0px;
} 
```

If you don't need or want the actual `.icon-16` classes, skip the step that makes those as it is not necessary for you to do that.

## More General Solution?

***If your icons have the right logic to them***, then this can be more generalized to accommodate any size icon.

**LESS**

```
.make-icon(@form: all, @size: 16) { 
    background: url('/Content/images/app/icons-@{size}.png') no-repeat top left; 
    width: @size*1px; 
    height: @size*1px;

    @about: 0px 0px;
    @add: 0px (@size*-1px);
    @add2: 0px (@size*-2px);

    .makePositioning() when (@form = all) {
      &.about { background-position: @about;  } 
      &.add { background-position: @add;  } 
      &.add2 { background-position: @add2;  }
    }

    .makePositioning() when (@form = about) {
      background-position: @about;  
    } 
    .makePositioning() when (@form = add) {
      background-position: @add;  
    }
    .makePositioning() when (@form = add2) {
      background-position: @about;  
    } 

    .makePositioning();  
}

//to generate icon classes for 32px size
.icon-32 {
  .make-icon(all, 32);
} 
```

**CSS Output**

```
.icon-32 {
  background: url('/Content/images/app/icons-32.png') no-repeat top left;
  width: 32px;
  height: 32px;
}
.icon-32.about {
  background-position: 0px 0px;
}
.icon-32.add {
  background-position: 0px -32px;
}
.icon-32.add2 {
  background-position: 0px -64px;
} 
```

# ios - iTunes Connect 开发者资料提交

> ID：15437777
> 
> 赞同：1
> 
> 时间：2013-03-15T16:43:30.187
> 
> 标签：ios, distribution, app-store-connect

我刚刚想到，在向 iTunes Connect 中的现有应用程序提交更新之前，我没有在 Xcode 中正确设置我的项目。

在 Xcode 中，在构建属性下，我已将代码签名身份设置为开发人员。我存档了该构建，然后将其提交到 iTunes Connect，但在提交过程中从下拉列表中选择了分发证书。

这是否意味着我的应用程序的一部分使用开发者证书签名，而另一部分使用分发证书？或者，是用分发证书签署的整个事情。

任何帮助，将不胜感激！

# multithreading - Haskell Windows hPutStrLn 不会阻止网络句柄

> ID：15437778
> 
> 赞同：2
> 
> 时间：2013-03-15T16:43:31.400
> 
> 标签：multithreading, haskell, network-programming

注意：我在 Windows 中运行（尽管我希望在解决此类问题的方法中尽可能跨平台）

我了解它不阻塞是一件好事，但在我的特殊情况下，我希望它阻塞，是否有任何技巧可以导致它阻塞，或者有更好的方法来处理我正在做的事情：

```
hPutStrLn hdl "bye\n"
hClose hdl 
```

问题是，在`hClose`通过线路发送完整的“bye\n”之前调用get，在网络的另一端它只是得到“b”或“by”，然后终止`hClose`连接。

那么，我该如何确保在`hClose`切断线路之前通过线路发送完整的“bye\n”？

我是否只是短暂地使用睡眠并接受解决方案的不完美之处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:30:01.673

答案在上面来自@DanielFischer 的评论中，只是在这里为下一个想知道的人发布，因为他不想写答案。

需要一个 hFlush hdl。

我假设输出函数的 Ln 版本会自动刷新。大多数控制台都是行缓冲的，在这种情况下这是真的，但不是全部。还值得注意的是 hClose 在关闭之前不会执行刷新。

# ios - Nsarray 摘要不可用（EXC_BAD_ACCESS 代码 1）

> ID：15437781
> 
> 赞同：0
> 
> 时间：2013-03-15T16:43:37.747
> 
> 标签：ios, objective-c, animation, nsarray, exc-bad-access

我正在尝试制作一个使用动画（UIImages）的游戏，但我有一个非常不寻常的（对我来说）错误：当两个 CGRects 之间发生交叉时，我试图为图像制作动画。检测很棒，但动画的行为很奇怪。这是代码：

Coin.h : (UIView 类)

```
@property (retain) NSArray * imagesCoinEclate; 
```

我在一些教程中读到错误可能来自我的变量的无保留状态，所以我把它放在了保留中

硬币.m：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

CGImageRef imageToSplitEclate = [UIImage imageNamed:@"Coin_Anim2_Spritesheet4x4_110x100.png"].CGImage;

    int x2 = 300;
    int y2 = 0;
    CGImageRef partOfImgEclate1 = CGImageCreateWithImageInRect(imageToSplitEclate, CGRectMake(x2, y2, 100, 110));
    UIImage *imgEclate1 = [UIImage imageWithCGImage:partOfImgEclate1];
    CGImageRelease(partOfImgEclate1);

    ...

    x2 = 0;
    y2 = 330;
    CGImageRef partOfImgEclate16 = CGImageCreateWithImageInRect(imageToSplitEclate, CGRectMake(x2, y2, 100, 110));
    UIImage *imgEclate16 = [UIImage imageWithCGImage:partOfImgEclate16];
    CGImageRelease(partOfImgEclate16);

    _imagesCoinEclate = [NSArray arrayWithObjects:imgEclate1,imgEclate2,imgEclate3,imgEclate4,imgEclate5,imgEclate6,imgEclate7,imgEclate8,imgEclate9,imgEclate10,imgEclate11,imgEclate12,imgEclate13,imgEclate14,imgEclate15,imgEclate16, nil];

 }
    return self;
} 
```

这个数组在一个方法中被调用：

```
-(void)AnimationCoinExplose:(UIImageView *)imageViewCoin withCurrentX:(float)current
{
    [imageViewCoin stopAnimating];
    CGPoint centerCoin;
    centerCoin.x = currentX;
    centerCoin.y = imageViewCoin.center.y - ((imageViewCoin.frame.size.height)/2);
    UIImageView * Explode = [[UIImageView alloc] initWithFrame:CGRectMake(currentX + imageViewCoin.center.x, centerCoin.y, imageViewCoin.frame.size.width + 10, imageViewCoin.frame.size.height + 10)];
     //NSLog(@"CurrentX : %f\nX : %f\nY : %f\nX size : %f\nY size : %f", currentX, currentX + imageViewCoin.center.x, centerCoin.y, imageViewCoin.frame.size.width + 10, imageViewCoin.frame.size.height + 10);
    imageViewCoin.alpha = 0.0f;
    [Explode setAnimationImages:_imagesCoinEclate];
    [Explode setAnimationRepeatCount:1];
    [Explode setAnimationDuration:(1/24)];
    [Explode startAnimating];
    [self addSubview:Explode];
    [Explode release];
    _IntersectionCheck = -1;
} 
```

这个方法在 UIViewController 中调用，之前初始化如下：

```
View = [[Coin alloc] init];
[self.view addSubview:View]; 
```

并像这样与加速度计一起使用：

```
if (View.IntersectionCheck == -1)
    {
        if (Test.alpha == 1.0f)
        {
            [View CoinIntersection:Test becausePigX:current.x andPigY:current.y];
        }
        if (Test2.alpha == 1.0f)
        {
            [View CoinIntersection:Test2 becausePigX:current.x andPigY:current.y];
        }
    }
    else if (View.IntersectionCheck == 0)
    {

} 
```

当我将 Coin.m 中的所有代码放入方法中时

```
-(void)AnimationCoinExplose:(UIImageView *)imageViewCoin withCurrentX:(float)current 
```

这是完美的工作，但不是在初始化时。错误是“EXC_BAD_ACCESS（代码 1）”并且在调试控制台中“Nsarray 摘要不可用”

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:51:40.743

> 我在一些教程中读到错误可能来自我的变量的无保留状态，所以我把它放在了保留中

没错，只是你没有做正确的任务。

```
_imagesCoinEclate = [NSArray arrayWithObjects:imgEclate1, ..., nil]; 
```

这直接分配给实例变量，绕过了 setter 方法，因此您创建的自动释放实例不会被保留（setter 会这样做），并且会过早地释放它。改用属性设置器，不要指望它不是魔法：

```
self.imagesCoinEclate = [NSArray arrayWithObjects:imgEclate1, ..., nil]; 
```

或者，如果您希望直接使用 ivar，请为其分配一个已分配初始化的对象，并避免自动释放：

```
_imagesCointEclate = [[NSArray alloc] initWithObjects:imgEclate1, ..., nil]; 
```

顺便说一句，您***应该***重构这 16 个对象的创建。这太糟糕了。

# css - 仅使用内联 css 操作表格中的单元格边框

> ID：15437782
> 
> 赞同：7
> 
> 时间：2013-03-15T16:43:37.733
> 
> 标签：css, css-tables

我需要更改已构建的表格的边框属性，但我在内容管理系统后面操作，该系统不允许我编辑样式表，只能编辑页面的 HTML。

所以我可以使用 来操作一些表格属性`<table style="....">`，但是当我使用该`border`属性时，它只会影响外边框，而不影响单个单元格之间存在的边框。

显然，我可以将 HTML 规则添加到`<table>`标记中`<table border="1px">`，但这些不会覆盖影响边框的外部样式表，因此我需要一个内联 CSS 解决方案。

更改单元间边框的唯一方法真的是手动为每个边框添加一个边框属性`td`还是我错过了什么？

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-31T20:37:54.067

我还没有找到真正的内联解决方案，但`scoped`HTML5 属性非常接近。

特别是，使用此功能，您不必为表发明一个新的 ID/类，并希望它不会与其他任何东西冲突。

例子：

```
<table>
    <style scoped>td {padding:1px;}</style>
    <tr>
        <td>0</td>
        <td>1</td>
    </tr>
</table> 
```

不幸的是，在撰写本文时，它仅受 Firefox 支持。

2019 年编辑：后来在采用之前被放弃的功能：[https](https://developer.mozilla.org/en-US/docs/Web/API/HTMLStyleElement/scoped) ://developer.mozilla.org/en-US/docs/Web/API/HTMLStyleElement/scoped ，现在标记为“过时”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T23:23:19.230

您是否要覆盖外部样式表？如果您的内联 CSS 不起作用，您可能想尝试使用 -

```
!important 
```

所以你可以做这样的事情 -

```
<table style="border: none!important;"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:47:45.327

“改变单元间边框的唯一方法真的是手动为每个 td 添加一个边框属性......？”

是的。

除非您可以添加样式标签：

```
<style>
table td {...}
</style> 
```

当然，总是有 JavaScript。jQuery：

```
$('table td').css('border', '1px solid red'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:51:57.100

由于您可以使用 html，因此您可以插入样式表并定位`td`元素。
您应该添加一个类以避免弄乱页面中的其他表

```
<table class="some-class">.. 
```

和

```
<style type="text/css">
  table.some-class td{
      border:1px solid black;
  }
</style> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-23T06:03:34.730

```
<style>
table { border: 1px solid red; }
td { border: 1px solid red; }
</style>
<table border="1" cellpadding="2" cellspacing="0" width="50%">
<tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>
</table> 
```

# c++ - c++从模板派生的类如何调用模板的构造函数？

> ID：15437784
> 
> 赞同：0
> 
> 时间：2013-03-15T16:43:40.080
> 
> 标签：c++, templates, constructor, template-specialization

我真的不知道如何调用这个线程。情况如下。我有一个模板类`Array<T>`：

```
template <typename T> class Array{
private:
    T* m_cData;
    int m_nSize;
    static int s_iDefualtSize;
public:
    Array();
    Array(int nSize);
} 
```

现在，我想编写一个派生自 的专用类，包含以下`Array<T>`对象`class Boxes`：

```
class Boxes{
private:
    double m_dFull;
public:
    Boxes(double dFull=0): m_dFull(dFull) {}
}; 
```

我通过以下方式做到这一点：

```
class BoxesArray : public Array<Boxes>{
public:
    BoxesArray() : Array<Boxes>::Array() {}
    BoxesArray(int nValue) : Array<Boxes>::Array(nValue) {}
} 
```

我添加了一些专门用于`Boxes`. 好的，所以这是第一个混乱。调用`ArrayBoxes()`似乎实例化了一个对象数组并“准备”这个对象来保存盒子，对吧？但是它是如何发生的（即，上面代码的哪一部分）在创建和对象之后`ArrayBoxes`我已经用 Boxes 填充了它？而且，第二个问题，我可以看到填充 ArrayBoxes 的这些 Boxes 是使用 Boxes 的默认构造函数构造的（Boxes`m_dFull`被设置为 0），但是如果我希望使用 Boxes 的参数构造函数默认实例化 ArrayBoxes 怎么办（给，比如说，盒子`m_dFull = 0.5`）？希望所有的编辑我的问题现在都清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:50:32.343

您需要`Boxes`在默认构造函数的主体中放入满足您要求的代码来填充数组，或者调用一个非默认构造函数，`Array<Boxes>`该构造函数采用`Boxes`您希望在成员初始化列表中拥有的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T23:05:01.670

> 但是它是如何发生的（即上面代码的哪一部分）在创建和对象 ArrayBoxes 之后我已经用 Boxes 填充了它？

看来您的`BoxesArray`构造函数调用`Array<Boxes>`构造函数。即使没有，C++ 也会为您隐式调用它。

> 而且，第二个问题，我可以看到填充 ArrayBoxes 的这些 Boxes 是使用 Boxes 的默认构造函数构造的（Boxes m_dFull 被设置为 0），但是如果我希望使用 Boxes 的参数构造函数默认实例化 ArrayBoxes 怎么办？ （例如，盒子 m_dFull = 0.5）？

您需要像这样添加一个构造函数`Array<T>`： `Array(int nsize, double defval);`

在内部，您将使用调用默认值的框构造数组。

# android - Android 隐藏后在顶部显示活动标题/状态栏

> ID：15437786
> 
> 赞同：6
> 
> 时间：2013-03-15T16:43:41.763
> 
> 标签：android, android-activity, statusbar

目前在我的 中`FragmentActivity`，我通过在`onCreate`方法中执行以下操作来隐藏状态栏：

```
 requestWindowFeature(Window.FEATURE_NO_TITLE);
 getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

这没问题。

但是在全屏时，假设用户点击一个按钮，我会想要换入另一个片段（记住我们在 中`FragmentActivity`），我的意思是替换当前全屏显示的片段。

但我希望显示标题栏/状态。

这可能吗？如果是这样，我该如何以编程方式进行

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-15T17:49:51.593

Here you can change your title bar dynamically using following two methods. I called them from my `Activity`. So to call from `Fragment` you need the `Activity` instance.

```
public void hideTitle() {
        try {
            ((View) findViewById(android.R.id.title).getParent())
                    .setVisibility(View.GONE);
        } catch (Exception e) {
        }
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
        getWindow().clearFlags(
                WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
    }

    public void showTitle() {
        try {
            ((View) findViewById(android.R.id.title).getParent())
                    .setVisibility(View.VISIBLE);
        } catch (Exception e) {
        }
        getWindow().addFlags(
                WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:08:48.497

有几种方法可以这样做：

**第一种方法：**

[FEATURE_CUSTOM_TITLE](http://developer.android.com/reference/android/view/Window.html#FEATURE_CUSTOM_TITLE)

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
setContentView(R.layout.foo_layout);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title_bar); 
or

youractivity.setTitle(); 
```

**笔记！**`TextView`您可以在布局中包含一个简单的内容`custom_title_bar`

让你`custom_title_bar`布局如下：

```
 <LinearLayout           
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
      <TextView
         android:id="@+id/titleTextView"
         style="@android:style/WindowTitle"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="TextView"
      />
    </LinearLayout> 
```

**第二种方法：**

[活动.setTitle](http://developer.android.com/reference/android/app/Activity.html#setTitle%28java.lang.CharSequence%29)

```
this.setTitle("My Title!"); 
```

# c - 如何在 Vxworks 中实现 C 定时器

> ID：15437789
> 
> 赞同：1
> 
> 时间：2013-03-15T16:43:47.217
> 
> 标签：c, timer, performance-testing, vxworks, powerpc

我已经实现了[计时器](http://www.songho.ca/misc/timer/timer.html)功能来查找我的任务在 windows 和 linux 中的性能。但是 linux 实现在 Vxworks PPC 750 板上不起作用。`gettimeofday`在 Vxworks 中不可用。

```
t1 = vxworks_start_timer(); //How to implement ?
my_task();
t2 = vxworks_stop_timer(); //How to implement ?
elapsedtime = t2-t1; 
```

如何在 Vxworks 中实现这个计时器来计算任务的经过时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T10:18:33.260

如果系统计时器滴答分辨率足够，您可以使用`tickGet()`and`sysClkRateGet()` 或`clock_gettime()`，但分辨率仍仅限于系统时钟滴答

否则，您可以阅读*TBL*和*TBU* (arch-specific)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-06T10:36:53.720

有多种方法可以解决此问题，具体取决于您的需求。

如果要测量的活动长时间运行，您可能更喜欢使用系统滴答计数器，可通过`tickGet()`或访问`tickGet64()`。

这会以系统时钟频率（即调度程序的频率，而不是 CPU 频率）递增，因此分辨率仅限于单个滴答声 - 可能高达 1/60 秒。您可以使用`sysClkRateGet()`来确定频率。

对于长时间运行的任务，以上可能就足够了，但是如果您需要更高的分辨率，可能会以有限的持续时间为代价，您可以使用系统时间戳计数器（如果已配置）。为此，您可以使用`sysTimestamp()`(或`sysTimestamp64()`)，也可以使用`sysTimestampFreq()`来获取频率。

根据您的系统配置，计数器可能会频繁重置，您可以`sysTimestampPeriod()`在发生这种情况时用于锻炼 - 您需要在计时代码中处理此问题。

当然，您可以同时使用这两种方法来提供一个长时间运行但高分辨率的计时器

# android - 如何在 Android 应用程序中访问 Opera mini 和 Firefox 浏览历史记录

> ID：15437792
> 
> 赞同：0
> 
> 时间：2013-03-15T16:44:03.950
> 
> 标签：android, firefox, browser

无论如何可以访问opera mini和Firefox的浏览历史记录吗？我想从其他应用程序访问这些历史记录，所以你能建议我如何做这件事吗？

这可以读取firefox sqlite数据库并从那里获取吗？

谢谢

# asp.net-mvc-3 - 无法让 tinyMCE 文本区域在 MVC3 中验证

> ID：15437793
> 
> 赞同：0
> 
> 时间：2013-03-15T16:44:07.943
> 
> 标签：asp.net-mvc-3, validation, tinymce

我在一个视图中有三个部分视图，它们通过单选按钮选择进行切换。每个部分视图都有自己的提交输入，其中两个部分视图包含一个 tinyMCE 文本区域。当我只有一个包含 tinyMCE 文本区域的部分时，我能够使用 .triggerSave() 来验证该文本区域，但现在我已经添加了第二个 tinyMCE 文本区域，我无法让任何一个 tinyMCE 文本区域通过验证。

我尝试了许多关于 SO 上类似问题的解决方案，但我没有成功让这些文本区域通过验证。

这是第一部分的tinyMCE相关代码：

```
<script type="text/javascript">
$(document).ready(function () {
    tinyMCE.init({
        mode: "specific_textareas",
        editor_selector: "mceEditorForAddRow",
        theme: "simple",
        width: "500",
        height: "300"
    });
}); 
```

```
 @using(Html.BeginForm("_AddSchemaRow","Database_Schema")
{
@Html.ValidationSummary(true)
    <script type="text/javascript">
    $("#CreateRow").click(function () {
        tinyMCE.triggerSave();
    });
</script>
<table>
....
....
            <tr>
            <td>
                @Html.LabelFor(model => model.SchemaElement)
            </td>
            <td>
                @Html.TextAreaFor(model => model.SchemaElement, new { @class = "mceEditorForAddRow" })
                @Html.ValidationMessageFor(model => model.SchemaElement)
            </td>
        </tr>
....
....
</table>
<p>
        <input id="CreateRow" type="submit" value="Create" />
    </p>
} 
```

这是控制器对第一个部分的操作：

```
 public ActionResult _AddSchemaRow(int id)
    {
        SchemaRow schemaRow = new SchemaRow();
        schemaRow.DatabaseSchemaID = id;
        schemaRow.SchemaIndex = DatabaseSchema.GetSchemaHeadersByDatabaseSchemaID(id).Count() + 1;
        return PartialView(schemaRow);
    } 
```

这是第一部分控制器的 POST 操作：

```
 [HttpPost]
    [ValidateInput(false)]
    public ActionResult _AddSchemaRow(SchemaRow schemaRow)
    {
        if (ModelState.IsValid)
        {
            DatabaseSchemaViewModel vm = new DatabaseSchemaViewModel(DatabaseSchema.GetDatabaseSchemaByID(schemaRow.DatabaseSchemaID));
            vm.SchemaRowsAndHeaders = DatabaseSchemaViewModel.GetSchemaRowsAndHeadersBySchemaID(schemaRow.DatabaseSchemaID);
            if (SchemaRow.Create_SchemaRow(schemaRow))
            {
                return RedirectToAction("Edit", new { id = schemaRow.DatabaseSchemaID });
            }
            else
                return PartialView(schemaRow);
        }
        else
            return PartialView(schemaRow);
    } 
```

第二部分的设置与上面的第一部分一样，除了在所有适用字段中包含“SchemaHeader”而不是“SchemaRow”，包括提交输入 id 为“CreateSchemaHeader”。我认为示例代码应该对我的问题提供足够的描述。如果需要，我可以添加其他部分的代码。提前感谢您在寻找解决方案方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:09:50.393

我终于能够弄清楚了。解决方案是在导致回发的输入之后添加点击功能。

例子：

```
<p>
    <input id="CreateRow" type="submit" value="Create" />
</p>
    <script type="text/javascript">
        $("#CreateRow").click(function () {
            tinyMCE.triggerSave();
        });
    </script> 
```

# java - 我使用了同步列表，但我仍然得到 ConcurrentModificationException

> ID：15437799
> 
> 赞同：15
> 
> 时间：2013-03-15T16:44:21.123
> 
> 标签：java, multithreading, vector, synchronized

我正在使用`Vector`而不是`ArrayList`在多线程环境中使列表安全。`ConcurrentModificationException`但是当我尝试`Vector`在迭代时添加项目时，我不断得到它。为什么会这样，我该如何预防？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T16:46:03.953

您不能在迭代 Vector 时对其进行修改。将要添加的项目存储在单独的向量中，并在循环完成时将它们移动到向量中或在原始向量的副本上循环。

添加：要在 java 中获取 Vector 周围的互斥锁，请在两个函数中执行此操作：

```
synchronized (list) {
  // modifying list
} 
```

和：

```
synchronized (list) {
  // iterating over list
} 
```

当然，我假设该列表已命名`list`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:47:10.040

如果您想在迭代时添加项目，您将需要使用[`ListIterator`](http://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html). 通过使用`Vector`，你并没有绕过这个规则（*显然*），所以我建议使用`ArrayList`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T16:56:53.143

如果您需要迭代并同时添加到您的列表中，您应该使用并发列表，例如[`CopyOnWriteArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html). 请注意，如果您在列表中写入很多内容，则效率不会很高。

否则，如果使用 Vector 或 synchronizedList，则需要在迭代时保持列表的锁定。这将防止异常，但也会防止并发......

# html - 在 div 中渲染 Ext.application

> ID：15437801
> 
> 赞同：17
> 
> 时间：2013-03-15T16:44:27.710
> 
> 标签：html, css, extjs, extjs4

我正在尝试`Ext.application`在我们现有的网站模板中运行 ExtJS4。我们有一个`div #content`，我想将应用程序放入其中以进行开发。如何将应用程序渲染到这个区域，而不是替换现有的 html 页面？

```
Ext.application({
    name: 'HelloExt',
    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: 'fit',
       //   renderTo: Ext.Element.get('#content')  doesn't work
            items: [
                {
                    title: 'Hello Ext',
                    html : 'Hello! Welcome to Ext JS.'
                }
            ]
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T16:48:39.990

您需要使用除`Ext.container.Viewport`. 通过定义`Ext.container.Viewport`将始终占据整个浏览器窗口。

从文档：

> 视口将自身呈现给文档主体，并自动调整自身大小以适应浏览器视口的大小并管理窗口大小调整。一个页面中可能只创建一个视口。

改用`Ext.panel.Panel`_

```
Ext.application({
    name: 'HelloExt',
    launch: function() {
        Ext.create('Ext.panel.Panel', {
            layout: 'fit',
            renderTo: Ext.get('content')
            items: [
                {
                    title: 'Hello Ext',
                    html : 'Hello! Welcome to Ext JS.'
                }
            ]
        });
    }
}); 
```

# php - Symfony：使日期时间表单字段真正只读

> ID：15437802
> 
> 赞同：1
> 
> 时间：2013-03-15T16:44:34.513
> 
> 标签：php, symfony, twig, fieldtype

我将日期时间表单字段标记为只读。由于这个接缝没有效果，我否决了默认的树枝模板。这工作正常。

```
{% block datetime_widget %}
    {% if read_only %}
        {{ value.date.year }}-{{ value.date.month }}-{{ value.date.day }} {{ value.time.hour }}:{{ value.time.minute }}
    {% else %}
        {{ parent() }}
    {% endif %}
{% endblock %} 
```

这是我正在使用的表单类型：

```
/**
 * @ORM\Entity
 */
abstract class BusinessClass
{

    /**
     * @ORM\Column(type="datetime")
     * @var \DateTime
     */
    private $created;

    /**
     * @return \DateTime
     */
    public function getCreated()
    {
        return $this->created;
    }

} 
```

这就是将日期时间字段添加到表单构建器的方式：

```
$formBuilder->add('created', 'datetime', array('read_only' => true)); 
```

但是，symfony 仍然尝试将未更改的值设置回我的表单类型。由于它是只读的，我只实现了一个 get 方法，但没有实现 set 方法。这就是我收到此错误消息的原因：

```
InvalidPropertyException: Neither element "created" nor method "setCreated()" exists in class "Cinergy\ShopBundle\Tests\Functional\TestBundle\Entity\RecurringProduct"

    in /Users/ernst/Source/php/cinergy/shop/vendor/symfony/symfony/src/Symfony/Component/Form/Util/PropertyPath.php line 552
    at PropertyPath->writeProperty(object(RecurringProduct), 'created', null, false, null) in /Users/ernst/Source/php/cinergy/shop/vendor/symfony/symfony/src/Symfony/Component/Form/Util/PropertyPath.php line 318
    at PropertyPath->setValue(object(RecurringProduct), null) in /Users/ernst/Source/php/cinergy/shop/vendor/symfony/symfony/src/Symfony/Component/Form/Extension/Core/DataMapper/PropertyPathMapper.php line 74
    at PropertyPathMapper->mapFormsToData(array('created' => object(Form), 'duration' => object(Form), 'id' => object(Form), 'name' => object(Form), 'price' => object(Form), 'sku' => object(Form), 'updated' => object(Form), '__entity' => object(Form), '__id' => object(Form)), object(RecurringProduct)) in /Users/ernst/Source/php/cinergy/shop/vendor/symfony/symfony/src/Symfony/Component/Form/Form.php line 569
    at Form->bind(object(Request)) in /Users/ernst/Source/php/cinergy/shop/src/Cinergy/DaylightBundle/Controller/BrowserController.php line 123
    at BrowserController->updateAction(object(Request))
    at call_user_func_array(array(object(BrowserController), 'updateAction'), array(object(Request))) in /Users/ernst/Source/php/cinergy/shop/src/Cinergy/CommonBundle/EventListener/TransactionWrapper.php line 34
    at TransactionWrapper->wrappedExecution(object(Request))
    at call_user_func_array(array(object(TransactionWrapper), 'wrappedExecution'), array(object(Request))) in /Users/ernst/Source/php/cinergy/shop/app/bootstrap.php.cache line 1426
    at HttpKernel->handleRaw(object(Request), '1') in /Users/ernst/Source/php/cinergy/shop/app/bootstrap.php.cache line 1390
    at HttpKernel->handle(object(Request), '1', true) in /Users/ernst/Source/php/cinergy/shop/app/bootstrap.php.cache line 1566
    at HttpKernel->handle(object(Request), '1', true) in /Users/ernst/Source/php/cinergy/shop/app/bootstrap.php.cache line 617
    at Kernel->handle(object(Request)) in /Users/ernst/Source/php/cinergy/shop/web/app_dev.php line 28 
```

由于这是我的业务逻辑的一部分，我不想实现 setCreate 方法。还值得一提的是，同样的事情也适用于文本字段。

如果设置了选项，关于如何阻止 symfony 设置值的任何想法`read_only`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T08:11:46.483

简短的回答是：使用`disabled`而不是`read_only`.

[在文档中](http://symfony.com/doc/current/reference/forms/types/datetime.html#read-only)找到相关部分后，我认为日期时间的呈现`read_only`不正确。只有设置`read_only`没有改变。根据文档，它应该被重新定义为只读 HTML。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-09T20:07:24.763

不幸的是，如果将映射字段设置为禁用，则不会保留它。它的值变为空，这可能不是 OP 正在寻找的。另一种解决方案是在您的模板中执行以下操作：

```
{% if household.dateAdded is not null %}{{ household.dateAdded|date('m/d/Y') }}
<input type="hidden" name="household[dateAdded]" value="{{ household.dateAdded|date('m/d/Y') }}">
{% endif %} 
```

其中family 是表单名称，dateAdded 是映射的字段名称。

# python - 结构将参数传递给角色定义

> ID：15437818
> 
> 赞同：0
> 
> 时间：2013-03-15T16:45:05.420
> 
> 标签：python, fabric

我知道使用织物，您可以将参数传递给织物任务，例如：

```
def task(something=''):
    print "You said %s" % something

fab task:something='hello' 
```

如果我想将一些参数传递给角色定义怎么办。这是我的例子：

```
env.roledefs = {
    'node1':          ['node1.%s' % DOMAIN],
    'node2':          ['node2.%s' % DOMAIN]
} 
```

无论如何我可以通过运行以下内容来传递域：

```
fab task -argument='mydomain.com' (pseudo code) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:07:21.023

您可以通过[--set](http://docs.fabfile.org/en/1.4.0/usage/fab.html#cmdoption--set) cmd 选项设置自定义环境变量：

```
fabric task --set domain='mydomain.com' 
```

然后在 fabfile 中，只需从以下内容读取`env.domain`：

```
env.roledefs = {
    'node1':          ['node1.%s' % env.domain],
    'node2':          ['node2.%s' % env.domain]
} 
```

希望对您有所帮助。

# api - 如何使用 Spotify Web API 搜索具有通用标题的专辑？

> ID：15437820
> 
> 赞同：0
> 
> 时间：2013-03-15T16:45:12.450
> 
> 标签：api, search, spotify

[可以使用Spotify Web API](http://developer.spotify.com/technologies/web-api/search/)按名称搜索 Spotify 目录中的专辑。

但是，如果专辑名称是常用词或短语，则搜索响应可能包含数千个结果。我看不到按艺术家姓名缩小搜索范围的方法。

下面是一个例子：搜索艺术家**Giant Panda Guerilla Dub Squad的专辑**[**Country**](http://open.spotify.com/album/6BV9jXkxZjpb31OK3rUep0)。

 **API请求是：

```
http://ws.spotify.com/search/1/album?q=country 
```

回应是：

```
<?xml version="1.0" encoding="UTF-8"?>
<albums xmlns="http://www.spotify.com/ns/music/1" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/">
  <opensearch:Query role="request" startPage="1" searchTerms="country" />
  <opensearch:totalResults>11861</opensearch:totalResults>
  <opensearch:startIndex>0</opensearch:startIndex>
  <opensearch:itemsPerPage>100</opensearch:itemsPerPage>
  <album href="spotify:album:1Wcnyz2zYWLIPZ1K63RXdW">
    <name>How Country Feels</name>
    <artist href="spotify:artist:56x8mYvS3cyDGAi8N2FxbB">
      <name>Randy Houser</name>
    </artist>
    <id type="upc">886443789852</id>
    <popularity>0.73964</popularity>
    <availability>
      <territories>CA US</territories>
    </availability>
  </album>
  ...more albums...
</albums> 
```

有 11861 个结果，结果是分页的，每页有 100 个相册。可以发出请求以获取下一页，但如果我要查找的专辑在最后一页上，我将不得不向 API 发出 118 个单独的请求，然后才能找到它。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:57:35.597

您可以使用高级搜索查询语言来提供帮助，特别是如果您提前认识艺术家。例如：

[http://ws.spotify.com/search/1/album?q=artist:大熊猫游击队配音队](http://ws.spotify.com/search/1/album?q=artist%3aGiant%20Panda%20Guerilla%20Dub%20Squad)

...将搜索限制为该艺术家的专辑。

[http://ws.spotify.com/search/1/album?q=artist:Giant Panda Guerilla Dub Squad Country](http://ws.spotify.com/search/1/album?q=artist%3aGiant%20Panda%20Guerilla%20Dub%20Squad%20Country)

...将只返回您想要的专辑。

在新的 Spotify 重新设计的混乱中，目前无法获得完整的高级搜索参考，但您可以在[此处](http://web.archive.org/web/20120704131650/http://www.spotify.com/us/about/features/advanced-search-syntax/)的 Wayback 机器中找到它。**

# python - 狮身人面像更改目录 HTML

> ID：15437827
> 
> 赞同：3
> 
> 时间：2013-03-15T16:45:28.097
> 
> 标签：python, html, twitter-bootstrap, python-sphinx, tableofcontents

我正在对我的文档进行主题化，并且我正在尝试让 sphinx 将一个类添加到`<ul>`目录的元素中。不幸的是，看起来 HTML 的生成方式与任何其他列表相同。

有没有办法在 TOC 中添加一个类？

我要添加的课程（仅供参考）是`nav nav-tabs nav-stacked`；我正在使用引导主题。

**更新：**我目前的技巧是覆盖`localtoc.html`模板以拥有

```
{{ toc|replace("<ul>", "<ul class='nav nav-tabs nav-stacked'>") }} 
```

但是感觉很丑。。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T06:47:29.207

TOC 会单独转换为 HTML，然后插入到文档中，而无需您对其进行控制。检查`render_partial`方法`sphinx.builds.html.StandaloneHTMLBuilder`。

您的 hack 是最简单的方法，另一种选择是子类化`StandaloneHTMLBuilder`并覆盖`render_partial`以控制 docutils' `HTMLWriter`。

# linq - 如果数据库表没有记录，则无法显示视图

> ID：15437833
> 
> 赞同：1
> 
> 时间：2013-03-15T16:45:47.630
> 
> 标签：linq, asp.net-mvc-4

`db.Profits`此方法在没有任何记录时抛出异常。如何防止爆炸页面

```
public double getProfitSum()
{
   return db.Profits.Where(p => p.IdUser.UserId == WebSecurity.CurrentUserId).Sum(p => p.Value);
} 
```

错误 ：

> *转换为值类型“Double”失败，因为具体化值为 null。结果类型的泛型参数或查询必须使用可为空的类型。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:48:17.843

试试看：

```
 var result = db.Profits.Where(p => p.IdUser.UserId == WebSecurity.CurrentUserId).Sum(p => p.Value);

    if(result != null)
      {
          return result;
      }
    return 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:03:33.277

原因必须是 Sum() 期望不可为空的值。但是您的结果可能会给出 null。

尝试

```
return db.Profits.Where(p => p.IdUser.UserId == WebSecurity.CurrentUserId
   && p.Value != null).Select(x=>(double?)x.Value).Sum() ?? 0.0M; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:51:50.053

甚至更好

```
 public double getProfitSum()
                {
        var result = db.Profits.Where(p => p.IdUser.UserId == WebSecurity.CurrentUserId
               && p.Value != null).Sum(p => p.Value);

 return result == null ? 0 : result;
        } 
```

# linq - Linq 左连接不起作用

> ID：15437834
> 
> 赞同：0
> 
> 时间：2013-03-15T16:45:51.057
> 
> 标签：linq

我正在尝试将此查询放入 Linq

```
SELECT [ID], [Name], LastSync, Phase
FROM [Store] 
LEFT JOIN (
    SELECT GLog.[StoreId] AS [StoreId], LastSync, Phase
    FROM [GGCSyncLog] AS GLog 
    INNER JOIN (
        SELECT MAX(G1.[DateTime]) AS LastSync, G1.[StoreId]
        FROM [GGCSyncLog] AS G1
        GROUP BY G1.[StoreId]
        ) AS G2 ON (GLog.[StoreId] = G2.[StoreId]) AND (GLog.[DateTime] = G2.[LastSync])
    ) AS MostRecentLog ON Store.[ID] = MostRecentLog.[StoreId] 
```

其结果是

```
ID  Name                 LastSync     Phase
1   Sarasota             2010-07-31   5
2   Wellington           2010-07-31   8
3   Tampa International  2013-03-12   8
5   Events               NULL         NULL
6   PO Holding Store     NULL         NULL 
```

我的 Linq 返回正确的结果，除了我缺少 LastSync 和 Phase 为空的两行。知道有什么问题吗？

```
from s in Stores
join gLog in 
(from g1 in GGCSyncLogs.DefaultIfEmpty()
join g in 
(from g in GGCSyncLogs
group g by g.StoreId into gM
   select new {
   StoreId = gM.Key, LastSync = gM.Max(gg=>gg.DateTime) })
   on new {g1.StoreId, LastSync = g1.DateTime} equals new {g.StoreId,  g.LastSync}
     select new {g1.StoreId, g.LastSync, g1.Phase})
     on s.ID equals gLog.StoreId
        select new {s.ID, s.Name, 
            LastSync = (gLog != null ? (DateTime?)gLog.LastSync : null), 
            Phase = (gLog != null ? (int?)gLog.Phase : null) } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:03:50.553

您应该阅读 about[`join`子句](http://msdn.microsoft.com/en-us/library/bb311040.aspx)和[How to: Perform Left Outer Joins](http://msdn.microsoft.com/en-us/library/bb397895.aspx)。

在没有数据库的情况下很难找到有效的解决方案，但希望这能帮助您重回正轨：

```
var g2 = from g1 in GGCSyncLogs
         group g1 by g1.StoreId into gM;

var MostRecentLogs = from gLog in GGCSyncLogs
                     join g in g2 on new { gLog.StoreId, LastSync = gLog.DateTime} equals new { g.StoreId, g.LastSync }
                     select new { gLog.StoreId, LastSync = gLog.Date, Phase = gLog.Phase };

var results = from s in Stores
              join gLog in MostRecentLogs on s.Id equals gLog.StoreId into gl
              from l in gl.DefaultIfEmpty(new { LastSync = null, Phase = null })
              select new {
                  s.Id,
                  s.Name,
                  l.LastSync,
                  l.Phase
              }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:57:00.110

我不得不使用“进入”

```
from s in Stores
join gRec in
(from g in GGCSyncLogs
join g2 in 
(from g1 in GGCSyncLogs
group g1 by g1.StoreId into gM
  select new {StoreId = gM.Key,LastSync = gM.Max(gg=>gg.DateTime)})
  on new {g.StoreId, LastSync = g.DateTime} equals new {g2.StoreId, g2.LastSync}
    select new {g.StoreId, g2.LastSync, g.Phase})
    on s.ID equals gRec.StoreId into gRec2
    from gRec3 in gRec2.DefaultIfEmpty()
    select new {s.ID, s.Name, 
                    LastSync = (gRec3 != null ? (DateTime?)gRec3.LastSync : null),
                    Phase = (gRec3 != null ? (int?)gRec3.Phase : null) } 
```

# certificate - 在哪里可以找到颁发者证书

> ID：15437849
> 
> 赞同：1
> 
> 时间：2013-03-15T16:46:49.960
> 
> 标签：certificate, saml-2.0, xml-signature, opensso

我正在使用我自己没有配置的 OpenSSO 8。它已完全配置，没有任何问题。我的问题是我需要找到用于验证 SAML 凭据上的数字签名的颁发者证书。你能告诉我应该去哪里找吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:19:04.643

您通常会在元数据中获得证书。[这](http://docs.oracle.com/cd/E19316-01/820-5986/ghmlp/index.html)是有关如何从 OpenSSO 交换元数据的链接

证书实际上存储在 opensso/opensso 文件夹中，可以使用 keytool 导出

# css - 无法将内容放入子 div 框并自动展开父框

> ID：15437850
> 
> 赞同：1
> 
> 时间：2013-03-15T16:46:53.050
> 
> 标签：css, css-float

我一直在尝试调整 div 高度，以便它可以优雅地将所有其他内容推到其下方并且不会重叠，但没有任何成功。

我有两个消息框，每个消息框都位于一个包装器（时隙）div 中，该 div 用作每个消息框的容器。

我试过在时间段上设置浮动，然后清除什么但没有成功

我尝试过设置但`min-height`也`display: block;`没有成功

```
<div class='timeslot'>
   <div class='message'>
      <span class='header'>Header text</span>
      <span>Some really long long text</span>
   </div>
</div> 
```

我们的目标是试图将所有东西都放在盒子里并很好地推动东西。

这是一个小提琴

[http://jsfiddle.net/nawar/qjDPp/](http://jsfiddle.net/nawar/qjDPp/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:30:50.650

给你，伙计，我为你重写了它：

[http://jsfiddle.net/wAhnB/](http://jsfiddle.net/wAhnB/)

```
<style>
.clear {clear:both}
.message-wrap {width:500px}
.message {width:150px; font-size:12px; background:#EDF6FB; border:2px solid #67C2EF; padding:5px; 
-webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px;}
.message, .circle, .message-time {float:left; margin-right:20px}
.message-time {background:#F9F9F9; padding:5px; width:150px}
</style>

<h1>Lorem ipsum</h1>

<div class="message-wrap">

    <div class="message">
    <h2>Message</h2>
    <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Curabitur sed tortor. Integer aliquam adipiscing lacus. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Curabitur sed tortor. Integer aliquam adipiscing lacus.</p>
    </div><!-- message -->

    <img class="circle" src="http://i47.tinypic.com/2pt1lag.jpg" alt="" />

    <div class="message-time">
    <p><span class="date">2012-10-19</span><br />
    08:31:38</p>
    </div><!-- message-time -->

</div><!-- message-wrap -->

<br class="clear" />
<br />

<div class="response-wrap">

    <div class="message-time">
    <p><span class="date">2012-10-19</span><br />
    08:31:38</p>
    </div><!-- message-time -->

    <img class="circle" src="http://i47.tinypic.com/2pt1lag.jpg" alt="" />

    <div class="message">
    <h2>Response</h2>
    <p>This is a response</p>
    </div><!-- message -->

</div><!-- response-wrap --> 
```

# dapper - 指定的强制转换不是无效的（具有 int 值的枚举，Dapper）

> ID：15437851
> 
> 赞同：3
> 
> 时间：2013-03-15T16:46:53.617
> 
> 标签：dapper

我有一个具有（简单，第一次）用户角色实现的类：

```
class User { 
  public Role Role { get; set; }
  // ...
  public User() { this.Role = Role.Normal; }
  public void Save() { Membership.CreateUser(...) } // System.Web.Security.Membership
} 

enum Role : int {
  Invalid = 0,
  Normal = 1,
  SuperUser = 4096
} 
```

在添加角色之前，一切正常（如果重要的话）。

现在，当我尝试获取用户时，此行失败：

```
toReturn = conn.Query<User>("SELECT TOP 1 * FROM dbo.UserProfile WHERE 1=1"); 
```

堆栈跟踪（来自 ELMAH）：

```
System.Data.DataException: Error parsing column 2 (Role=1 - Int16) ---> System.InvalidCastException: Specified cast is not valid.
   at Deserialize06df745b-4fad-4d55-aada-632ce72e3607(IDataReader )
   --- End of inner exception stack trace ---
   at Dapper.SqlMapper.ThrowDataException(Exception ex, Int32 index, IDataReader reader) in c:\Dev\Dapper\Dapper\SqlMapper.cs:line 2126
   at Deserialize06df745b-4fad-4d55-aada-632ce72e3607(IDataReader )
   at Dapper.SqlMapper.<QueryInternal>d__d`1.MoveNext() in c:\Dev\Dapper\Dapper\SqlMapper.cs:line 827
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Dapper.SqlMapper.Query[T](IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Boolean buffered, Nullable`1 commandTimeout, Nullable`1 commandType) in c:\Dev\Dapper\Dapper\SqlMapper.cs:line 770 
```

在数据库中，列类型`Role`为`smallint`。

我正在使用 NuGet 的 Dapper 1.12.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T21:39:15.783

嘎。答案是使数据库和类定义匹配。

对于`smallint`（这是 MigratorDotNet 为我生成的），我需要枚举来自`short`，而不是`int`. 现在一切正常。

可能有用的 Google 代码问题：[https ://code.google.com/p/dapper-dot-net/issues/detail?id=32](https://code.google.com/p/dapper-dot-net/issues/detail?id=32)

# mysql - Laravel 和使用 Eloquent 的多个计数查询

> ID：15437854
> 
> 赞同：3
> 
> 时间：2013-03-15T16:47:04.357
> 
> 标签：mysql, laravel, eloquent

我正在尝试优化我的代码，其中我在过去 7 天内生成统计信息。

目前我正在使用 eloquent & 查询计数来记录每天的数据，这导致我在一个循环中进行 7 个单独的查询。

例子：

```
// loop for number of days
for($i = 0; $i < $days; $i++){
    // some logic to set comparitive unix times
    $oldest = $newest - $dayDuration;

    // count number of objects between oldest time and newest time
    $counts[$i] = Object::where('objecttime','>',$oldest)
                          ->where('objecttime','<',$newest)->count();

    // more logic to set comparitive unix times
    $newest = $newest - $dayDuration;
} 
```

我知道可以使用[此处](https://dba.stackexchange.com/questions/23068/how-to-make-multiple-counts-in-one-query)描述的类似语法对 sql 中的查询进行分组；我想知道的是是否可以在 Laravel 中使用 eloquent/fluent 来做同样的事情，还是只能使用原始查询来做到这一点？

编辑：我不知道是否需要澄清，但这是 Laravel 3 的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:17:44.077

每当您在模型类上调用静态方法时，它都会返回一个 Fluent 查询，例如`DB::table('yourmodeltable')->method`. 如果您牢记这一点，您很快就会意识到可以使用 Eloquent 模型进行任何查询。

现在，为了获得更高的性能，您可以使用 SQL 的[DATE()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-types.html)函数。我下面的示例未经测试，因此请随时更正。

```
// tomorrow -1 week returns tomorrow's 00:00:00 minus 7 days
// you may want to come up with your own date tho
$date = new DateTime('tomorrow -1 week');

// DATE(objecttime) turns it into a 'YYYY-MM-DD' string
// records are then grouped by that string
$days = Object::where('objecttime', '>', $date)
    ->group_by('date')
    ->order_by('date', 'DESC') // or ASC
    ->get(array(
        DB::raw('DATE(`objecttime`) AS `date`'),
        DB::raw('COUNT(*) as `count`')
    ));

foreach ($days as $day) {
    print($day->date . ' - '. $day->count);
} 
```

这应该打印如下内容：

```
2013-03-09 - 13
2013-03-10 - 30
2013-03-11 - 93
2013-03-12 - 69
2013-03-13 - 131
2013-03-14 - 185
2013-03-15 - 69 
```

**编辑：**

上面建议的方法返回 Eloquent 模型的实例，这可能看起来很奇怪，特别是如果你`var_dump($days)`. 你也可以使用 Fluent 的`list()`方法来达到同样的效果。

```
$date = new DateTime('tomorrow -1 week');

// lists() does not accept raw queries,
// so you have to specify the SELECT clause
$days = Object::select(array(
        DB::raw('DATE(`objecttime`) as `date`'),
        DB::raw('COUNT(*) as `count`')
    ))
    ->where('created_at', '>', $date)
    ->group_by('date')
    ->order_by('date', 'DESC') // or ASC
    ->lists('count', 'date');

// Notice lists returns an associative array with its second and
// optional param as the key, and the first param as the value
foreach ($days as $date => $count) {
    print($date . ' - ' . $count);
} 
```

# excel - 将记录从一个表附加到另一个表（具有不同的列）

> ID：15437856
> 
> 赞同：0
> 
> 时间：2013-03-15T16:47:10.007
> 
> 标签：excel, vba, ms-access

我正在寻找一种有效地将记录从一个表添加到另一个表的方法。这些表相似，但不同。假设我正在尝试将 Employee 表 B 中的所有数据附加到 Employee 表 A 中。

```
 Employee Table B
   ---------------
   EmpID (int), fname (text), lname(text)
   1            Bob           Dole 
```

我希望将此数据附加到

```
 Employee Table A
   empid (int)  fname(text)    lname(text)     DateOfBirth (DateTime) 
```

作为

```
 1             Bob           Dole              null / blank 
```

我必须为大约 30 多张桌子执行此操作，并且正在寻找一种快速的方法来执行此操作。

而不是写一个`INSERT INTO table_a(empid, fname, lname) SELECT empid, fname,lname FROM table_b`，我想使用一些 Access 的导入功能来节省时间。我尝试将每个表转储为 excel 并附加到必要的表中，但我得到了一个`Subscript out of range error`. 我也尝试复制粘贴记录无济于事。

是否有 Access 提供的工具可以省去为每个表编写附加查询的麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:10:59.020

如果两个表中的字段名称相同（缺少的除外），您可以编写一些代码来为您完成。使用`TableDefs`( [http://msdn.microsoft.com/en-us/library/office/bb220949(v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb220949(v=office.12).aspx) ) 对象循环遍历表并查找要附加到的“_a”表并创建通过查询 TableDef 的`.Fields`集合即时插入语句。

例如，这样的东西应该可以工作（未经测试，手写！）：

```
Dim dbs As DAO.Database
Dim tdfLoop As TableDef
Dim strSql As String
Dim i as Integer
Dim strSourceTable as String
Dim strFieldList as String

Set dbs = CurrentDb

With dbs
  For Each tdfLoop In .TableDefs
     If Right(tdfLoop.Name, 2) = "_a" Then            
         strSourceTable = Mid(tdfLoop.Name, 1, Len(tdfLoop.Name)-2) & "_b"
         strSql = "INSERT INTO " & tdfLoop.Name & "("
         strFieldList = ""
         For i = 0 To tdfLoop.Fields.Count - 1
             strFieldList = strFieldList & tdfLoop.Fields(i).Name & ","
         Next i
         If strFieldList <> "" Then
             strFieldList = Mid(strFieldList, 1, Len(strFieldList) - 2)
         End If

         strSql = strSql & strFieldList & ") SELECT " & strFieldList & " FROM " & strSourceTable

         dbs.Execute(strSql)
     End If
  Next tdfLoop
End With

dbs.Close
Set dbs = Nothing 
```

如果“缺失字段”没有在表中定义默认值，那么您可以修改上面的内容以`NULL`在其列中返回值，但我假设它们有。

# java - 得到方法的答案到小数点后两位

> ID：15437860
> 
> 赞同：1
> 
> 时间：2013-03-15T16:47:24.193
> 
> 标签：java, methods

我正在使用下面的代码来获得我在两个十进制位置创建的方法的答案。但是当我这样做并编译时，我收到一条错误消息，提示需要标识符。2 错误出现一个指向 2 和另一个就在之前。我的问题是什么？

```
 import java.text.NumberFormat;

  NumberFormat nf = NumberFormat.getNumberInstance();
 nf.setMaximumFractionDigits(2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:50:28.013

您所展示的内容是正确的，假设这些行并非全部在一起（`import`语句必须在任何类之外）。例如，这是有效的：

```
import java.text.NumberFormat;

class MyClass {

    void someMethod() {
        NumberFormat nf = NumberFormat.getNumberInstance();
        nf.setMaximumFractionDigits(2);
        // ...
    }
} 
```

...但是您的问题中显示的那些行不是。

如果不是这样，您说错误似乎集中在`2`. 有时当我们在 SO 上看到这样的问题时，这是因为一些零宽度或类似空格的特殊字符意外地出现在源代码中。因此，如果您删除该行并重新键入它，您可能会删除有问题的字符。（实际上出现这种情况的频率令人惊讶。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T17:07:21.027

您可以编写一个通用函数，如下所示：

```
public static double round(double inputNumber, int fractionDigits, int roundingMode) {
        BigDecimal bigDecimal = new BigDecimal(inputNumber);
        BigDecimal rounded = bigDecimal.setScale(fractionDigits, roundingMode);
        return rounded.doubleValue();
} 
```

请在下面找到示例测试结果：

```
import java.math.BigDecimal;

public class RoundHelper {

    public static void main(String[] args) {
        System.out.println(RoundHelper.round(123.98980, 2, BigDecimal.ROUND_HALF_UP));
        System.out.println(RoundHelper.round(123.98000, 2, BigDecimal.ROUND_HALF_UP));
        System.out.println(RoundHelper.round(123.98000, 2, BigDecimal.ROUND_HALF_UP));
        System.out.println(RoundHelper.round(123.55087, 2, BigDecimal.ROUND_HALF_UP));
        System.out.println(RoundHelper.round(123.14000, 2, BigDecimal.ROUND_HALF_UP));
    }

    public static double round(double inputNumber, int fractionDigits, int roundingMode) {
        BigDecimal bigDecimal = new BigDecimal(inputNumber);
        BigDecimal rounded = bigDecimal.setScale(fractionDigits, roundingMode);
        return rounded.doubleValue();
    }

} 
```

**输出：**

```
123.99
123.98
123.98
123.55
123.14 
```

# mongodb - mongodb聚合转换为int

> ID：15437863
> 
> 赞同：5
> 
> 时间：2013-03-15T16:47:40.590
> 
> 标签：mongodb, aggregation-framework

使用聚合框架的 mongo 有以下问题。假设和项目以秒为单位，t 和发生的事件 id，e，如：item:{t:11433, e:some_id}

我想要的是根据 t 和 e 进行聚合。这意味着在时间 t 内计算 id 'e' 的数量。使用 $group 的聚合很容易做到这一点。

但是，我想有一个不同的时间课程。例如，我想计算一个时间段中相同事件 id 的数量，例如。5秒。我可以在 js 或 python 中以编程方式执行此操作。我只是想知道它是否可以仅使用 mongo 使用级联组来工作。

我尝试使用 $divide[t,10] 进行投影。对于 11433，这将给出 1143.3 但似乎我无法删除 Mongo 中的 0.3（否则我可以按其他比例分组）。

有什么提示吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T05:30:31.580

要获得 5 秒间隔的整数组键，您可以使用公式

```
t = t - (t % 5)  // % is the modula operator 
```

在聚合框架中，这看起来像这样：

```
db.xx.aggregate([
     // you need two projections, as they can not be nested
     // this does not work:
     // { $project: { _id: 0, e: 1, t: 1, tk: { $subtract: [ "$t", $mod: [ "$t", 5 ] ] } } },
     //
     // get modula 5 of time in seconds:
     { $project: { _id: 0, e: 1, t: 1, tm5: { $mod: [ "$t", 5 ] } } }, 
     // subtract it from time:
     { $project: { _id: 0, e: 1, ti: { $subtract: [ "$t", "$tm5" ] } } }, 
     // now group on e and interval, 
     { $group: { _id: { e: "$e", interval: "$ti" }, count: { $sum: 1 } } },
]) 
```

对于此示例集合：

```
> db.xx.find()
{ "_id" : ObjectId("515e5a7157a0887a97cc8d1d"), "t" : 11433, "e" : "some_id" }
{ "_id" : ObjectId("515e60d457a0887a97cc8d1e"), "t" : 11434, "e" : "some_id" }
{ "_id" : ObjectId("515e60d857a0887a97cc8d1f"), "t" : 11438, "e" : "some_id" } 
```

结果是：

```
{
    "result" : [
        {
            "_id" : {
                "e" : "some_id",
                "interval" : 11435
            },
            "count" : 1
        },
        {
            "_id" : {
                "e" : "some_id",
                "interval" : 11430
            },
            "count" : 2
        }
    ],
    "ok" : 1
} 
```

# java - 如何验证字符串是否是有效的java变量？

> ID：15437866
> 
> 赞同：14
> 
> 时间：2013-03-15T16:47:50.543
> 
> 标签：java, regex

如何最好地检查字符串输入是否是用于编码的有效 Java 变量？我敢肯定，我不是第一个愿意这样做的人。但也许我错过了正确的关键字来找到有用的东西。

最好的可能是 RegEx，它检查：

*   以字母开头

*   然后可以包含数字、字母

*   可以包含一些特殊字符，例如“_”（哪个？）

*   可能不包含空格分隔符

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T16:52:12.637

```
public static boolean isValidJavaIdentifier(String s) {
    if (s.isEmpty()) {
        return false;
    }
    if (!Character.isJavaIdentifierStart(s.charAt(0))) {
        return false;
    }
    for (int i = 1; i < s.length(); i++) {
        if (!Character.isJavaIdentifierPart(s.charAt(i))) {
            return false;
        }
    }
    return true;
} 
```

编辑：并且，正如@Joey 所指出的，您还应该过滤掉关键字和保留字。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-12-10T14:24:14.070

## Java 6+

采用

```
import javax.lang.model.SourceVersion;

boolean isValidVariableName(CharSequence name) {
    return SourceVersion.isIdentifier(name) && !SourceVersion.isKeyword(name);
} 
```

如果您需要检查字符串是否是**最新**版本 Java 中的有效 Java 变量名，或者

```
import javax.lang.model.SourceVersion;

boolean isValidVariableNameInVersion(CharSequence name, SourceVersion version) {
    return SourceVersion.isIdentifier(name) && !SourceVersion.isKeyword(name, version);
} 
```

如果您需要检查字符串是否是**特定**Java 版本中的有效 Java 变量名。

例如，[下划线从 Java 9 开始成为保留关键字](https://bugs.openjdk.java.net/browse/JDK-8065599)，因此在`isValidVariableNameInVersion("_", SourceVersion.RELEASE_9)`返回`false`时`isValidVariableNameInVersion("_", SourceVersion.RELEASE_8)`返回`true`。

**这个怎么运作**

[`SourceVersion.isIdentifier(CharSequence name)`](https://docs.oracle.com/javase/8/docs/api/javax/lang/model/SourceVersion.html#isIdentifier-java.lang.CharSequence-)检查 name 在最新源版本中是否是语法上有效的标识符（简单名称）或关键字。[`!SourceVersion.isKeyword(name)`](https://docs.oracle.com/javase/8/docs/api/javax/lang/model/SourceVersion.html#isKeyword-java.lang.CharSequence-)为关键字返回 false。因此，`SourceVersion.isIdentifier(name) && !SourceVersion.isKeyword(name)`对于有效的标识符返回 true，并且只对它们返回。

内置方法中使用了相同的方法[`SourceVersion.isName(CharSequence name, SourceVersion version)`](https://docs.oracle.com/javase/8/docs/api/javax/lang/model/SourceVersion.html#isName-java.lang.CharSequence-)来检查 name 是否是语法上有效的**限定**名称，这意味着它将返回`true`诸如“apple.color”之类的字符串：

```
public static boolean isName(CharSequence name, SourceVersion version) {
    String id = name.toString();

    for(String s : id.split("\\.", -1)) {
        if (!isIdentifier(s) || isKeyword(s, version))
            return false;
    }
    return true;
} 
```

**测试**

```
import org.junit.jupiter.api.Test;

import javax.lang.model.SourceVersion;

import static org.assertj.core.api.Assertions.assertThat;

public class ValidVariableNameTest {
    boolean isValidVariableName(CharSequence name) {
        return isValidVariableNameInVersion(name, SourceVersion.RELEASE_8);
    }

    boolean isValidVariableNameInVersion(CharSequence name, SourceVersion version) {
        return SourceVersion.isIdentifier(name) && !SourceVersion.isKeyword(name, version);
    }

    @Test
    void variableNamesCanBeginWithLetters() {
        assertThat(isValidVariableName("test")).isTrue();
        assertThat(isValidVariableName("e2")).isTrue();
        assertThat(isValidVariableName("w")).isTrue();
        assertThat(isValidVariableName("привет")).isTrue();
    }

    @Test
    void variableNamesCanBeginWithDollarSign() {
        assertThat(isValidVariableName("$test")).isTrue();
        assertThat(isValidVariableName("$e2")).isTrue();
        assertThat(isValidVariableName("$w")).isTrue();
        assertThat(isValidVariableName("$привет")).isTrue();
        assertThat(isValidVariableName("$")).isTrue();
        assertThat(isValidVariableName("$55")).isTrue();
    }

    @Test
    void variableNamesCanBeginWithUnderscore() {
        assertThat(isValidVariableName("_test")).isTrue();
        assertThat(isValidVariableName("_e2")).isTrue();
        assertThat(isValidVariableName("_w")).isTrue();
        assertThat(isValidVariableName("_привет")).isTrue();
        assertThat(isValidVariableName("_55")).isTrue();
    }

    @Test
    void variableNamesCannotContainCharactersThatAreNotLettersOrDigits() {
        assertThat(isValidVariableName("apple.color")).isFalse();
        assertThat(isValidVariableName("my var")).isFalse();
        assertThat(isValidVariableName(" ")).isFalse();
        assertThat(isValidVariableName("apple%color")).isFalse();
        assertThat(isValidVariableName("apple,color")).isFalse();
        assertThat(isValidVariableName(",applecolor")).isFalse();
    }

    @Test
    void variableNamesCannotStartWithDigit() {
        assertThat(isValidVariableName("2e")).isFalse();
        assertThat(isValidVariableName("5")).isFalse();
        assertThat(isValidVariableName("123test")).isFalse();
    }

    @Test
    void differentSourceVersionsAreHandledCorrectly() {
        assertThat(isValidVariableNameInVersion("_", SourceVersion.RELEASE_9)).isFalse();
        assertThat(isValidVariableNameInVersion("_", SourceVersion.RELEASE_8)).isTrue();

        assertThat(isValidVariableNameInVersion("enum", SourceVersion.RELEASE_9)).isFalse();
        assertThat(isValidVariableNameInVersion("enum", SourceVersion.RELEASE_4)).isTrue();
    }

    @Test
    void keywordsCannotBeUsedAsVariableNames() {
        assertThat(isValidVariableName("strictfp")).isFalse();
        assertThat(isValidVariableName("assert")).isFalse();
        assertThat(isValidVariableName("enum")).isFalse();

        // Modifiers
        assertThat(isValidVariableName("public")).isFalse();
        assertThat(isValidVariableName("protected")).isFalse();
        assertThat(isValidVariableName("private")).isFalse();

        assertThat(isValidVariableName("abstract")).isFalse();
        assertThat(isValidVariableName("static")).isFalse();
        assertThat(isValidVariableName("final")).isFalse();

        assertThat(isValidVariableName("transient")).isFalse();
        assertThat(isValidVariableName("volatile")).isFalse();
        assertThat(isValidVariableName("synchronized")).isFalse();

        assertThat(isValidVariableName("native")).isFalse();

        // Declarations
        assertThat(isValidVariableName("class")).isFalse();
        assertThat(isValidVariableName("interface")).isFalse();
        assertThat(isValidVariableName("extends")).isFalse();
        assertThat(isValidVariableName("package")).isFalse();
        assertThat(isValidVariableName("throws")).isFalse();
        assertThat(isValidVariableName("implements")).isFalse();

        // Primitive types and void
        assertThat(isValidVariableName("boolean")).isFalse();
        assertThat(isValidVariableName("byte")).isFalse();
        assertThat(isValidVariableName("char")).isFalse();
        assertThat(isValidVariableName("short")).isFalse();
        assertThat(isValidVariableName("int")).isFalse();
        assertThat(isValidVariableName("long")).isFalse();
        assertThat(isValidVariableName("float")).isFalse();
        assertThat(isValidVariableName("double")).isFalse();
        assertThat(isValidVariableName("void")).isFalse();

        // Control flow
        assertThat(isValidVariableName("if")).isFalse();
        assertThat(isValidVariableName("else")).isFalse();

        assertThat(isValidVariableName("try")).isFalse();
        assertThat(isValidVariableName("catch")).isFalse();
        assertThat(isValidVariableName("finally")).isFalse();

        assertThat(isValidVariableName("do")).isFalse();
        assertThat(isValidVariableName("while")).isFalse();
        assertThat(isValidVariableName("for")).isFalse();
        assertThat(isValidVariableName("continue")).isFalse();

        assertThat(isValidVariableName("switch")).isFalse();
        assertThat(isValidVariableName("case")).isFalse();
        assertThat(isValidVariableName("default")).isFalse();
        assertThat(isValidVariableName("break")).isFalse();
        assertThat(isValidVariableName("throw")).isFalse();

        assertThat(isValidVariableName("return")).isFalse();

        // Other keywords
        assertThat(isValidVariableName("this")).isFalse();
        assertThat(isValidVariableName("new")).isFalse();
        assertThat(isValidVariableName("super")).isFalse();
        assertThat(isValidVariableName("import")).isFalse();
        assertThat(isValidVariableName("instanceof")).isFalse();

        // Reserved keywords
        assertThat(isValidVariableName("goto")).isFalse();
        assertThat(isValidVariableName("const")).isFalse();
    }

    @Test
    void literalsCannotBeUsedAsVariableNames() {
        assertThat(isValidVariableName("null")).isFalse();
        assertThat(isValidVariableName("true")).isFalse();
        assertThat(isValidVariableName("false")).isFalse();
    }
} 
```

# python - 使用 Python 替换文本文件中的字符串会添加奇怪的字符

> ID：15437869
> 
> 赞同：1
> 
> 时间：2013-03-15T16:47:57.987
> 
> 标签：python, text

我想使用 Python 在文本文件的每一行中用路径替换文本，但是在输出文件的路径中出现奇怪的字符（正方形）。

当前代码：

```
#!/usr/bin/env python

f1 = open('input.txt', 'r')
f2 = open('output.txt', 'w')
for line in f1:
    f2.write(line.replace('test/software', 'C:\Software\api\render\3bit\sim>'))
f1.close()
f2.close() 
```

在输出文本中，路径中的以下内容被替换为正方形（奇怪的字符）：

*   \a = 改为正方形
*   \r = 改为正方形
*   \3 = 改为正方形

我的代码有问题还是上述字母是为系统保留的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:50:07.647

Python 字符串支持转义码；带有某些字符的反斜杠被它们所代表的代码替换。`\r`被解释为 ASCII 换行符，例如，`\a`是 ASCII BELL，并被`\3`解释为 ascii 代码点 3（八进制编号）。请参阅 Python[字符串文字文档](http://docs.python.org/2/reference/lexical_analysis.html#grammar-token-stringliteral)。

要禁用正在解释的转义码，请通过在字符串定义前加上一个 : 来使用原始 python 字符串`r`：

```
r'C:\Software\api\render\3bit\sim>' 
```

所以你的行是：

```
f2.write(line.replace('test/software', r'C:\Software\api\render\3bit\sim>')) 
```

或者，将反斜杠加倍以将它们解释为文字反斜杠：

```
'C:\\Software\\api\\render\\3bit\\sim>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:51:06.350

您的字符串有反斜杠，在 Python 中作为转义码读取。这些是将反斜杠前面的字符更改为特殊字符时。例如，`\n`是换行符。您将需要转义它们（使用另一个反斜杠）或只使用原始字符串。

```
r'C:\Software\api\render\3bit\sim>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:52:14.103

在每个路径文件之前，添加一个“r”字符来创建一个原始字符串，这可能会解决问题。例子：

```
f2.write(line.replace('test/software', r'C:\Software\api\render\3bit\sim>')) 
```

或者，转义你的反斜杠：

```
f2.write(line.replace('test/software', 'C:\\Software\\api\\render\\3bit\\sim>')) 
```

# nsis - 完成页面上的自定义字体不起作用

> ID：15437876
> 
> 赞同：1
> 
> 时间：2013-03-15T16:48:12.900
> 
> 标签：nsis

我有这样的代码

```
!define MUI_FINISHPAGE_TITLE_3LINES
!define MUI_PAGE_CUSTOMFUNCTION_SHOW WelcomeAndFinishPageShow
!insertmacro MUI_PAGE_FINISH

Function WelcomeAndFinishPageShow
   FindWindow $1 "#32770" "" $HWNDPARENT
   GetDlgItem $R0 $1 1201
   CreateFont $R1 $(^Font) 10 600
   SendMessage $R0 ${WM_SETFONT} $R1 0
FunctionEnd 
```

但是有些如何在完成页面上我没有看到更改的字体大小。

有什么想法我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:07:19.547

您应该做的第一件事是检查 $R0，如果它为 0，则 GetDlgItem 没有找到标签（这些 ID 可能并不完全稳定，不同的 MUI 设置可能会改变创建控件的顺序）

如果您使用的是 MUI2，则可以使用一些（文档不足的）变量：

```
Function WelcomeAndFinishPageShow
   CreateFont $R1 "Comic Sans MS" 10 600
   SendMessage $mui.WelcomePage.Title ${WM_SETFONT} $R1 0
   SendMessage $mui.FinishPage.Title ${WM_SETFONT} $R1 0
FunctionEnd 
```

# linux - OpenCL + SDL 2.0（带有 OpenGL 上下文）在 SDL_Quit() 上崩溃

> ID：15437886
> 
> 赞同：1
> 
> 时间：2013-03-15T16:48:35.710
> 
> 标签：linux, opengl, sdl, opencl, glfw

如果我调用 clGetPlatformIDs 并在它之后直接调用 SDL_Quit()，则程序崩溃（段错误）。OpenGL 版本似乎根本不重要（尝试了 2.1、3.1、3.2、3.3）。操作系统是 Fedora 18，完全更新。我已经安装了 fglrx 驱动程序。

问题似乎不仅仅是 SDL。GLFW 在 glfwTerminate() 上有一个非常相似的崩溃。GLFW 没有告诉我有关崩溃的任何信息，只是说这是一个段错误。但幸运的是，SDL 提供了更多信息：

```
*** glibc detected *** bin/Debug/voxel renderer: double free or corruption (fasttop): 0x0000000001086220 ***
======= Backtrace: =========
/lib64/libc.so.6[0x322c87ca8e]
/usr/local/lib/libSDL2-2.0.so.0(+0xb0a56)[0x7f256e97ba56]
/usr/local/lib/libSDL2-2.0.so.0(SDL_VideoQuit+0x6e)[0x7f256e960d4e]
/usr/local/lib/libSDL2-2.0.so.0(SDL_QuitSubSystem+0x18d)[0x7f256e8daded]
/usr/local/lib/libSDL2-2.0.so.0(SDL_Quit+0x18)[0x7f256e8daf18]
/usr/local/lib/libSDL2-2.0.so.0(+0x10d5f)[0x7f256e8dbd5f]
/lib64/libpthread.so.0[0x322d00f000]
======= Memory map: ========
00400000-00408000 r-xp 00000000 fd:02 13762941                           /home/julius/Ohjelmointi/Raytracer/bin/Debug/voxel renderer
00607000-00608000 r--p 00007000 fd:02 13762941                           /home/julius/Ohjelmointi/Raytracer/bin/Debug/voxel renderer
00608000-00609000 rw-p 00008000 fd:02 13762941                           /home/julius/Ohjelmointi/Raytracer/bin/Debug/voxel renderer
01083000-028e5000 rw-p 00000000 00:00 0                                  [heap]
322c400000-322c420000 r-xp 00000000 fd:01 669659                         /usr/lib64/ld-2.16.so
322c620000-322c621000 r--p 00020000 fd:01 669659                         /usr/lib64/ld-2.16.so
322c621000-322c622000 rw-p 00021000 fd:01 669659                         /usr/lib64/ld-2.16.so
322c622000-322c623000 rw-p 00000000 00:00 0 
322c800000-322c9ad000 r-xp 00000000 fd:01 669660                         /usr/lib64/libc-2.16.so
322c9ad000-322cbad000 ---p 001ad000 fd:01 669660                         /usr/lib64/libc-2.16.so
322cbad000-322cbb1000 r--p 001ad000 fd:01 669660                         /usr/lib64/libc-2.16.so
322cbb1000-322cbb3000 rw-p 001b1000 fd:01 669660                         /usr/lib64/libc-2.16.so
322cbb3000-322cbb8000 rw-p 00000000 00:00 0 
322cc00000-322cc03000 r-xp 00000000 fd:01 669661                         /usr/lib64/libdl-2.16.so
322cc03000-322ce02000 ---p 00003000 fd:01 669661                         /usr/lib64/libdl-2.16.so
322ce02000-322ce03000 r--p 00002000 fd:01 669661                         /usr/lib64/libdl-2.16.so
322ce03000-322ce04000 rw-p 00003000 fd:01 669661                         /usr/lib64/libdl-2.16.so
322d000000-322d016000 r-xp 00000000 fd:01 669662                         /usr/lib64/libpthread-2.16.so
322d016000-322d216000 ---p 00016000 fd:01 669662                         /usr/lib64/libpthread-2.16.so
322d216000-322d217000 r--p 00016000 fd:01 669662                         /usr/lib64/libpthread-2.16.so
322d217000-322d218000 rw-p 00017000 fd:01 669662                         /usr/lib64/libpthread-2.16.so
322d218000-322d21c000 rw-p 00000000 00:00 0 
322d400000-322d407000 r-xp 00000000 fd:01 669663                         /usr/lib64/librt-2.16.so
322d407000-322d606000 ---p 00007000 fd:01 669663                         /usr/lib64/librt-2.16.so
322d606000-322d607000 r--p 00006000 fd:01 669663                         /usr/lib64/librt-2.16.so
322d607000-322d608000 rw-p 00007000 fd:01 669663                         /usr/lib64/librt-2.16.so
322dc00000-322dd00000 r-xp 00000000 fd:01 663279                         /usr/lib64/libm-2.16.so
322dd00000-322deff000 ---p 00100000 fd:01 663279                         /usr/lib64/libm-2.16.so
322deff000-322df00000 r--p 000ff000 fd:01 663279                         /usr/lib64/libm-2.16.so
322df00000-322df01000 rw-p 00100000 fd:01 663279                         /usr/lib64/libm-2.16.so
322e800000-322e815000 r-xp 00000000 fd:01 669679                         /usr/lib64/libgcc_s-4.7.2-20121109.so.1
322e815000-322ea14000 ---p 00015000 fd:01 669679                         /usr/lib64/libgcc_s-4.7.2-20121109.so.1
322ea14000-322ea15000 r--p 00014000 fd:01 669679                         /usr/lib64/libgcc_s-4.7.2-20121109.so.1
322ea15000-322ea16000 rw-p 00015000 fd:01 669679                         /usr/lib64/libgcc_s-4.7.2-20121109.so.1
3230800000-32308e5000 r-xp 00000000 fd:01 669721                         /usr/lib64/libstdc++.so.6.0.17
32308e5000-3230ae4000 ---p 000e5000 fd:01 669721                         /usr/lib64/libstdc++.so.6.0.17
3230ae4000-3230aec000 r--p 000e4000 fd:01 669721                         /usr/lib64/libstdc++.so.6.0.17
3230aec000-3230aee000 rw-p 000ec000 fd:01 669721                         /usr/lib64/libstdc++.so.6.0.17
3230aee000-3230b03000 rw-p 00000000 00:00 0 
3230c00000-3230d34000 r-xp 00000000 fd:01 669700                         /usr/lib64/libX11.so.6.3.0
3230d34000-3230f34000 ---p 00134000 fd:01 669700                         /usr/lib64/libX11.so.6.3.0
3230f34000-3230f35000 r--p 00134000 fd:01 669700                         /usr/lib64/libX11.so.6.3.0
3230f35000-3230f3a000 rw-p 00135000 fd:01 669700                         /usr/lib64/libX11.so.6.3.0
3231000000-3231002000 r-xp 00000000 fd:01 669698                         /usr/lib64/libXau.so.6.0.0
3231002000-3231202000 ---p 00002000 fd:01 669698                         /usr/lib64/libXau.so.6.0.0
3231202000-3231203000 r--p 00002000 fd:01 669698                         /usr/lib64/libXau.so.6.0.0
3231203000-3231204000 rw-p 00003000 fd:01 669698                         /usr/lib64/libXau.so.6.0.0
3231400000-323141d000 r-xp 00000000 fd:01 669699                         /usr/lib64/libxcb.so.1.1.0
323141d000-323161c000 ---p 0001d000 fd:01 669699                         /usr/lib64/libxcb.so.1.1.0
323161c000-323161d000 r--p 0001c000 fd:01 669699                         /usr/lib64/libxcb.so.1.1.0
323161d000-323161e000 rw-p 0001d000 fd:01 669699                         /usr/lib64/libxcb.so.1.1.0
3231c00000-3231c11000 r-xp 00000000 fd:01 669716                         /usr/lib64/libXext.so.6.4.0
3231c11000-3231e10000 ---p 00011000 fd:01 669716                         /usr/lib64/libXext.so.6.4.0
3231e10000-3231e11000 r--p 00010000 fd:01 669716                         /usr/lib64/libXext.so.6.4.0
3231e11000-3231e12000 rw-p 00011000 fd:01 669716                         /usr/lib64/libXext.so.6.4.0
3232c00000-3232c09000 r-xp 00000000 fd:01 669715                         /usr/lib64/libXrender.so.1.3.0
3232c09000-3232e08000 ---p 00009000 fd:01 669715                         /usr/lib64/libXrender.so.1.3.0
3232e08000-3232e09000 r--p 00008000 fd:01 669715                         /usr/lib64/libXrender.so.1.3.0
3232e09000-3232e0a000 rw-p 00009000 fd:01 669715                         /usr/lib64/libXrender.so.1.3.0
3233000000-3233002000 r-xp 00000000 fd:01 669729                         /usr/lib64/libXinerama.so.1.0.0
3233002000-3233201000 ---p 00002000 fd:01 669729                         /usr/lib64/libXinerama.so.1.0.0
3233201000-3233202000 r--p 00001000 fd:01 669729                         /usr/lib64/libXinerama.so.1.0.0
3233202000-3233203000 rw-p 00002000 fd:01 669729                         /usr/lib64/libXinerama.so.1.0.0
3233c00000-3233c09000 r-xp 00000000 fd:01 669731                         /usr/lib64/libXrandr.so.2.2.0
3233c09000-3233e08000 ---p 00009000 fd:01 669731                         /usr/lib64/libXrandr.so.2.2.0
3233e08000-3233e09000 r--p 00008000 fd:01 669731                         /usr/lib64/libXrandr.so.2.2.0
3233e09000-3233e0a000 rw-p 00009000 fd:01 669731                         /usr/lib64/libXrandr.so.2.2.0
3235800000-32358bf000 r-xp 00000000 fd:01 794670                         /usr/lib64/catalyst/libGL.so.1.2
32358bf000-32359bf000 ---p 000bf000 fd:01 794670                         /usr/lib64/catalyst/libGL.so.1.2
32359bf000-32359e6000 rwxp 000bf000 fd:01 794670                         /usr/lib64/catalyst/libGL.so.1.2
32359e6000-3235a08000 rwxp 00000000 00:00 0 
3235c00000-3235c0f000 r-xp 00000000 fd:01 794669                         /usr/lib64/catalyst/libatiuki.so.1.0
3235c0f000-3235d0e000 ---p 0000f000 fd:01 794669                         /usr/lib64/catalyst/libatiuki.so.1.0
3235d0e000-3235d1a000 rw-p 0000e000 fd:01 794669                         /usr/lib64/catalyst/libatiuki.so.1.0
323f600000-323f604000 r-xp 00000000 fd:01 669766                         /usr/lib64/libXxf86vm.so.1.0.0
323f604000-323f804000 ---p 00004000 fd:01 669766                         /usr/lib64/libXxf86vm.so.1.0.0
323f804000-323f805000 r--p 00004000 fd:01 669766                         /usr/lib64/libXxf86vm.so.1.0.0
323f805000-323f806000 rw-p 00005000 fd:01 669766                         /usr/lib64/libXxf86vm.so.1.0.0
3a2e200000-3a2e276000 r-xp 00000000 fd:01 655591                         /usr/lib64/libGLEW.so.1.7.0
3a2e276000-3a2e475000 ---p 00076000 fd:01 655591                         /usr/lib64/libGLEW.so.1.7.0
3a2e475000-3a2e47b000 r--p 00075000 fd:01 655591                         /usr/lib64/libGLEW.so.1.7.0
3a2e47b000-3a2e47c000 rw-p 0007b000 fd:01 655591                         /usr/lib64/libGLEW.so.1.7.0
3a2e47c000-3a2e480000 rw-p 00000000 00:00 0 
3c2ce00000-3c2ce7d000 r-xp 00000000 fd:01 663378                         /usr/lib64/libGLU.so.1.3.1
3c2ce7d000-3c2d07c000 ---p 0007d000 fd:01 663378                         /usr/lib64/libGLU.so.1.3.1
3c2d07c000-3c2d07e000 r--p 0007c000 fd:01 663378                         /usr/lib64/libGLU.so.1.3.1
3c2d07e000-3c2d07f000 rw-p 0007e000 fd:01 663378                         /usr/lib64/libGLU.so.1.3.1
7f2564000000-7f25644c2000 rw-p 00000000 00:00 0 
7f25644c2000-7f2568000000 ---p 00000000 00:00 0 
7f25688c3000-7f25688c4000 ---p 00000000 00:00 0 
7f25688c4000-7f2568904000 rw-p 00000000 00:00 0 
7f2568904000-7f2568905000 rw-s 1cee5000 00:05 19449                      /dev/ati/card0
7f2568905000-7f2568966000 rw-s 1cee4000 00:05 19449                      /dev/ati/card0
7f2568966000-7f2568986000 rw-s 00004000 00:05 19449                      /dev/ati/card0
7f2568986000-7f2568988000 rw-s 00002000 00:05 19449                      /dev/ati/card0
7f2568988000-7f256ab96000 r-xp 00000000 fd:01 926157                     /opt/AMDAPP/lib/x86_64/libamdocl64.so
7f256ab96000-7f256ad96000 ---p 0220e000 fd:01 926157                     /opt/AMDAPP/lib/x86_64/libamdocl64.so
7f256ad96000-7f256afa9000 rw-p 0220e000 fd:01 926157                     /opt/AMDAPP/lib/x86_64/libamdocl64.so
7f256afa9000-7f256b0bd000 rw-p 00000000 00:00 0 
7f256b2bf000-7f256b308000 rw-p 00000000 00:00 0 
7f256b308000-7f256b348000 rw-s 00027000 00:05 19449                      /dev/ati/card0
7f256b348000-7f256ba48000 rw-s 00006000 00:05 19449                      /dev/ati/card0
7f256ba82000-7f256ba89000 r--s 00000000 fd:01 791548                     /usr/lib64/gconv/gconv-modules.cache
7f256ba89000-7f256bd09000 rw-p 00000000 00:00 0 
7f256bd09000-7f256bd5a000 r-xp 00000000 fd:01 794075                     /usr/lib64/catalyst/libatiadlxx.so
7f256bd5a000-7f256be5a000 ---p 00051000 fd:01 794075                     /usr/lib64/catalyst/libatiadlxx.so
7f256be5a000-7f256be66000 rw-p 00051000 fd:01 794075                     /usr/lib64/catalyst/libatiadlxx.so
7f256be66000-7f256be76000 rw-p 00000000 00:00 0 
7f256be94000-7f256be95000 rw-s 00005000 00:05 19449                      /dev/ati/card0
7f256be95000-7f256beb5000 rw-s 00004000 00:05 19449                      /dev/ati/card0
7f256beb5000-7f256db10000 r-xp 00000000 fd:01 794085                     /usr/lib64/dri/fglrx_dri.so
7f256db10000-7f256dc10000 ---p 01c5b000 fd:01 794085                     /usr/lib64/dri/fglrx_dri.so
7f256dc10000-7f256dd76000 rwxp 01c5b000 fd:01 794085                     /usr/lib64/dri/fglrx_dri.so
7f256dd76000-7f256de9a000 rwxp 00000000 00:00 0 
7f256de9a000-7f256de9b000 ---p 00000000 00:00 0 
7f256de9b000-7f256e6a5000 rw-p 00000000 00:00 0                          [stack:27487]
7f256e6a5000-7f256e6ab000 r-xp 00000000 fd:01 926159                     /opt/AMDAPP/lib/x86_64/libOpenCL.so.1
7f256e6ab000-7f256e8aa000 ---p 00006000 fd:01 926159                     /opt/AMDAPP/lib/x86_64/libOpenCL.so.1
7f256e8aa000-7f256e8ab000 rw-p 00005000 fd:01 926159                     /opt/AMDAPP/lib/x86_64/libOpenCL.so.1
7f256e8ab000-7f256e8ad000 rw-p 00000000 00:00 0 
7f256e8b5000-7f256e8b6000 rw-p 00000000 00:00 0 
7f256e8c8000-7f256e8c9000 rw-p 00000000 00:00 0 
7f256e8c9000-7f256e8cb000 rw-s 00002000 00:05 19449                      /dev/ati/card0
7f256e8cb000-7f256e9a7000 r-xp 00000000 fd:01 656113                     /usr/local/lib/libSDL2-2.0.so.0.0.0
7f256e9a7000-7f256eba7000 ---p 000dc000 fd:01 656113                     /usr/local/lib/libSDL2-2.0.so.0.0.0
7f256eba7000-7f256ebaa000 r--p 000dc000 fd:01 656113                     /usr/local/lib/libSDL2-2.0.so.0.0.0
7f256ebaa000-7f256ebb5000 rw-p 000df000 fd:01 656113                     /usr/local/lib/libSDL2-2.0.so.0.0.0
7f256ebb5000-7f256ebb9000 rw-p 00000000 00:00 0 
7ffff46c4000-7ffff46e5000 rw-p 00000000 00:00 0                          [stack]
7ffff47ff000-7ffff4800000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall] 
```

尽管如此，我还是找不到它应该崩溃的确切原因。OpenCL、OpenGL 和 SDL 在崩溃前都按预期工作。

那么，有谁知道什么可能导致 OpenCL 发生这种崩溃？

# linux - Linux 远程调试线程错误 (GDBServer)

> ID：15437893
> 
> 赞同：0
> 
> 时间：2013-03-15T16:48:51.580
> 
> 标签：linux, multithreading, gdbserver

我有一个 ARM 设备，我想调试它。我的主机是 Linux 12.04，我使用的是 Eclipse。GDBServer 在我的目标设备上运行。

我可以调试单进程应用程序。但是当我想调试包含 pthread 对象的多线程应用程序时，调试失败。我一步一步地跑，但当我来到

```
pthread_create(&timerSettings.timerThread, NULL, &timerThread, NULL); 
```

行调试器给出以下错误“0x40174c84”没有可用的源。

所以我该怎么做？

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:18:33.870

通过逐步运行，您实际上要求调试器进入 pread_create() 函数，当然您没有源代码。如果我怀疑您预计调试器会将您带到线程的源头，那么我有一些坏消息；它不是那样工作的。

如果您跳过将创建线程的 pthread_create()，如果您在 Debugger 透视图中，该线程应该显示在 Eclipse 的任务列表中。您可以从那里选择您的线程。如果你这样做，源代码视图将跳转到该线程到达的任何地方（更多坏消息来了）。请记住，所有这些都需要相对现代的 gdb 版本（我记得 6 及更高版本）。

现在你的问题真的开始了。在 gdb 中使用线程进行调试不是很好。当您选择线程时，您可能会发现没有显示任何源代码。这是因为尽管您已经跳过了 pthread_create()，但这并不意味着线程已经进展到您的源代码的第一行。这是因为当 gdb 挂起一个程序时，该程序中的每个线程都被挂起，而新线程可能还没有脱离标准库的线程初始代码。所以你必须在你的线程的源代码的第一行设置一个断点，并让程序自由运行，直到断点被命中。

但是等等——与此同时，你的主线程已经跳到远处，而你已经失去了对它的控制。您不能在其上设置断点，因为每当遇到任何断点时，gdb 都会暂停您的程序。

简而言之，这是阿森纳的正确痛苦。

您可以在 Eclipse 中键入 gdb 命令。这会有所帮助，因为您可以执行诸如设置线程特定断点之类的操作，并将 gdb 设置为不间断模式和后台异步模式。这些总比没有好，但根据我的经验，不要完成全部工作。更糟糕的是，Eclipse 似乎完全不知道它们（我可能已经过时了），所以您只能手动输入命令。在这种情况下，您最好不要一开始就在 Eclipse 中运行。

我建议你看看[这个](http://www.sourceware.org/gdb/onlinedocs/gdb/Non_002dStop-Mode.html#Non_002dStop-Mode)。一个好的技巧是在所有线程的开头将睡眠放入一个循环中，循环条件是一些永远不会改变的变量。这样，当创建线程时，您可以切换到它，设置您想要的任何断点，然后自己更改循环变量的值，这样当您继续线程时，它会退出循环并运行到您的断点。

- 编辑 -

看来我已经过时了。看看[这个](http://www.eclipse.org/community/training/webinars/090526_CDT_Webinar.pdf)。看起来 Eclipse 现在知道不间断模式和线程特定的断点。那些在每个线程中耦合了一个启动时的睡眠循环（也许 Eclipse 现在也可以解决这个问题）将使调试线程变得可以容忍。

# r - 在 R 中读取长文本文件时出现问题

> ID：15437895
> 
> 赞同：0
> 
> 时间：2013-03-15T16:48:57.910
> 
> 标签：r

我抓取了所有 youtube 的评论并存储在下面给出的文本文件中（很多奇怪的字符）

我正在尝试`R`使用以下方式加载文件：

```
doc <- read.table("C:/Users/schatterjee/Desktop/projects/text mining/youtube_comments.txt") 
```

我收到以下错误：

```
Error in scan (file, what, nmax, sep, dec, quote, skip, nlines, na.strings,: Line 1 was not 17 elements 
```

如何在 doc 变量中加载此文本？

youtube_comments.txt：

```
High levelï»¿ fshion film,like a movie even it is short but not mediocre
Most People.....
Look at people with money and think they "got lucky" or have a skill most peopleï»¿ don't have.....
Is belief, A plan & Action .....
Learn how a fed up Wal-Mart Cashier quit his job 60 days after learning this simple secret.....
Visit:
MysteryToSuccess(dot)com
ã€?è˜‹æžœæ—¥å ±ã€‘å†?æœ‰å•†æˆ¶è¢«æ³•åœ‹å??ç‰ŒLVï¼ˆLOUIS VUITTONï¼‰æŒ‡ä¾µçŠ¯ç‰ˆæ¬Šï¼Œè¦?æ±‚è³ å„Ÿå?Šç™»å ±é?“æ­‰ã€‚å…©é–“åˆ†åˆ¥åœ¨æ—ºè§’å?Šæ·±æ°´åŸ—çš„å•†æˆ¶æŒ‡ï¼Œæ—©å‰?æ”¶åˆ°LVä¾†ä¿¡ï¼ŒæŒ‡å…©åº—å”®è³£çš„æ‰‹è¢‹ä¾µçŠ¯LVè¢‹æ‰£ï¼ˆS-Lockï¼‰ç‰ˆæ¬Šã€‚æœ‰åº—æ?±è?²ç¨±ï¼Œä¸?çŸ¥è©²æ¬¾è¨­è¨ˆæ˜¯LVå°ˆåˆ©ï¼Œå¸Œæœ›å°?æ–¹é«˜æŠ¬è²´æ‰‹ã€‚è¨˜è€…ï¼šå¾?é›²åº­ã€€æ¢?ç‘žå¸†

å…©é–“è¢«æŒ‡ä¾µæ¬Šçš„åº—èˆ–ï¼Œåˆ†åˆ¥æ˜¯æ—ºè§’å…†è?¬å•†å ´ä¸€æ¨“çš„æ™‚è£?åº—ã€Œnabu nabuã€?å?Šæ·±æ°´åŸ—æ±?å·žè¡—ã€Œæº?æ³°ç´?æ‰£ã€?ã€‚å‰?è€…è¢«æŒ‡å‡ºå”®çš„ä¸€æ¬¾æ‰‹è¢‹ä¾µæ¬ŠLVè¢‹æ‰£è¨­è¨ˆï¼ˆS-Lockï¼‰ï¼›å¾Œè€…äº¦æŒ‡å‡ºå”®çš„ä¸€å€‹é¡žä¼¼ç…™ç›’å°?è¢‹è¢‹æ‰£å?Œæ¨£ä¾µæ¬Šã€‚S-Lockæ˜¯LVå…¶ä¸­ä¸€æ¬¾åœ¨é¦™æ¸¯è¨»å†Šå•†æ¨™ï¼Œåœ¨å¤šæ¬¾æ‰‹è¢‹å?Šæ‰‹è…•çš®å¸¶å?‡è¦‹è©²è¨­è¨ˆã€‚ï»¿
Arizona muse.ï»¿ (: 
```

# java - 我自己的数组列表

> ID：15437896
> 
> 赞同：0
> 
> 时间：2013-03-15T16:48:57.920
> 
> 标签：java, methods, insert, arraylist

我需要做我自己的arraylist 类。我正在尝试编写插入方法，如果此索引中已经存在对象，我将面临将对象添加到索引 0 的问题。它适用于其他指数，但不适用于 0。任何帮助将不胜感激？

```
public void insert(int index, Object object) throws IndexOutOfBoundsException {

    if(index < 0) {
        System.out.println("Niepoprawny index!");
        throw new IndexOutOfBoundsException();
    }

    if(index > array.length - 1 || array[index] != null) {
        // zwiększenie rozmiaru tablicy
        // jeśli jest zbyta mała lub na danym miejscu istnieje jakiś obiekt
        Object[] temp = new Object[array.length + index];
        System.arraycopy(array, 0, temp, 0, array.length);
        array = temp;
    }

    // przesunięcie o 1 w prawo wszystkich elementów
    System.arraycopy(array, index - 1, array, index, array.length - index);
    array[index] = object;
    size++;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:52:02.760

1.  的大小`temp`不对。由于您要添加单个元素，因此它应该是`array.length + 1`.

2.  第二个索引`arraycopy`是错误的。

3.  我不太明白`array[index] != null`支票。

最后，整个主体`if`都可以替换为对 的单个调用[`Arrays.copyOfRange()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOfRange%28T%5B%5D,%20int,%20int%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:53:27.537

使用这一行，您尝试在索引 -1 处插入数据：

```
System.arraycopy(array, index - 1, array, index, array.length - index); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T00:53:39.530

```
import java.util.Arrays;

public class MyArrayList<E> {
    private int listSize = 0; // arraySize
    private int initialArraySize = 1;//initial size
    @SuppressWarnings("unchecked")
    private E[] data = (E[]) new Object[initialArraySize];//initialize array

    /**
     * auto increase array upon every added element
     * @return 
     */
    private  void IncreaseArraySize() {
        //increase the size of the array by one element when element is added
        data = Arrays.copyOf(data, data.length+1);
        }

    /**
     * add elements to myArrayList
     */

    public void add(E toBeAdded) {
        //add to array then change the array size by one element
        int i= data.length;
        if(listSize == data.length){
            IncreaseArraySize();
        }
        data[listSize] = toBeAdded;
        listSize++;
    }   

    /**
     * 
     * @param remove item from MyarrayList
     * 
     */
    public void remove(E ItemToRemove) {
        //remove the element you and then shrinks the array to new size after removal
        for (int i = 0; i < data.length; ++i) {
            if (data[i]==ItemToRemove) {
                for (int j = i; j < data.length-1; j++) {
                    data[j] = data[j + 1];
                }
            }
        }
        listSize--;
    }

    /**
     * to check if list contains the item
     */
    public boolean contains(E toCheck) {
        //iterate all elements of array while comparing element you want to the one in the index
        boolean b = false;
        for (int i = 0; i < data.length; i++) {
            if (data[i]==toCheck) {
                b = true;
            }
        }
        return b;
    }
/**
 * checks if list is empty
 */
    public boolean isEmpty() {
        //return false if list is not empty else true if if it is
        boolean b = false;
        if ((data.length == 1) && (data[0] == null)) {
            b = true;
        }
        return b;
    }

    /**
     * pass index you want to check contents
     */
    public E get(int index) {
        //make sure the index is not empty and not out of the array
        if (index < data.length && null != data[index]) {
            E ElementPos = data[index];
            return  ElementPos;
        } else if (index < 0 || index > data.length) {
            throw new IndexOutOfBoundsException();
        }
        return null;
    }

    /**
     * get the size of array
     */
    public int size() {
        return listSize;    

    }
} 
```

# c# - 实时观察在 WPF 中写入的 CSV

> ID：15437897
> 
> 赞同：2
> 
> 时间：2013-03-15T16:49:06.893
> 
> 标签：c#, wpf, entity-framework, mvvm

我们有一台实验室设备，它始终将制表符分隔的记录写入 CSV 文件，而我的任务是编写一个应用程序来使用该数据。那部分很容易。但是，除此之外，我还负责寻找一种方法，通过使用数据绑定的 WPF 应用程序“实时”“观看”该文件。有两个优点我必须帮助使这项任务变得更容易。

1.  写入 CSV 的记录以 8 秒的间隔发生。

2.  在我需要观看 CSV 的总时间段内，文件本身几乎不会增长到大于 100mb - 如果那样的话。我见过的大多数文件都是20-30mb。

**我的问题**

有没有办法打开文件并保持“恒定”读取或监视其内容，还是我必须使用经典文件 IO 轮询来做到这一点？

**我试图解决这个问题的思考过程**

在修辞上，我想，“这个 CSV 与数据库有什么不同？” 但进一步的[研究](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/a0e9e20f-66d2-447c-8b7e-75de18535e63)表明，EF 不能直接使用 CSV。如果实体框架中的 DbContext 可以与数据绑定一起使用来报告属性的变化，我是否也可以设置类似的东西来观察 CSV 变化？但无论我走哪条路，任何解决方案都会不断回到“轮询”。例如，我可以使用 Linq 定期访问 CSV 并将结果返回给属性，并且当属性的值发生更改（已将某些内容添加到 CSV）时，数据绑定会知道它并且应用程序可以相应地采取行动。是的，这听起来像投票。

**综上所述**

如果有一个更简单的解决方案可以利用 WPF/数据绑定或 EF（如果可能）或一些我没有想到或在这里提到的 .NET 类来回答我的问题或解决我的问题，我很想听听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:54:22.280

您可以使用 FileSystemWatcher 来检测文件长度或上次修改时间何时发生变化，只要您知道 FSW 在无法读取其指向的目录时表现不佳（例如因为您与共享的连接被中断；那里有解决方法）。

您最好不要让文件保持打开状态，否则您可能会干扰编写器。我的建议是在检测到更改时打开-读取-关闭。

EF 不是为直接处理文件而设计的；它旨在与可能是文件支持的数据库引擎一起使用，这是完全不同的事情。幸运的是，读取 CSV 行并不难，并且假设它是仅附加的，那么跟踪到目前为止您已经阅读了多远并在那时开始下一次阅读也不是一个难题。

# joomla - joomla查询语法有什么区别

> ID：15437899
> 
> 赞同：0
> 
> 时间：2013-03-15T16:49:14.033
> 
> 标签：joomla

joomla查询语法有什么区别

```
$db->setQuery //and
$db->getQuery 
```

我到处寻找，但找不到应该在哪里使用哪一个，并且在以下情况下会有所不同：

```
$db = FabrikWorker::getDbo(false, 2);
$query = $db->getQuery(true); //if I change $query =$db->setQuery(true);
$query = "SELECT sum(r57.`amount`) AS total_fee
FROM `registration` AS r, registration_57_repeat AS r57
WHERE r.id = r57.parent_id
AND r.id = '{registration___id_raw}'"; 
$db->setQuery($query);
$a = $db->loadResult();
return $a; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:01:20.383

> setQuery($query) 方法设置数据库查询以供以后通过 query() 方法或 Load 结果方法之一执行。

```
$db = JFactory::getDBO();
$query = "/* some valid sql string */";
$db->setQuery($query); 
```

链接到[setQuery 文档](http://docs.joomla.org/Accessing_the_database_using_JDatabase/1.5#setQuery.28.24query.29)

从[getQuery](http://docs.joomla.org/API16%3aJDatabase/getQuery)方法的文档中：

> 获取当前或查询，或新的 JDatabaseQuery 对象。

所以`setQuery`方法设置查询以供以后执行，同时`getQuery`返回新查询对象或当前查询

# hibernate - 休眠错误？错误处理结果列，查询数据库中不存在的 ID

> ID：15437900
> 
> 赞同：0
> 
> 时间：2013-03-15T16:49:21.550
> 
> 标签：hibernate, jpa, foreign-keys, fetch

我观察到 Hibernate 的一种奇怪行为。

我有一个[JPA/JPQL 中描述的实体图：Fill a collection/map based on related object's collection/map? （原型样）](https://stackoverflow.com/questions/14493642/jpa-jpql-fill-a-collection-map-based-on-related-objects-collection-map)

然后我查询这个模型：

```
this.em.createQuery("SELECT rel FROM Release rel "
            + " LEFT JOIN FETCH rel.product pr "
            + "   LEFT JOIN FETCH pr.customFields "
            + " LEFT JOIN FETCH rel.customFields "
            + (withDeps ? " LEFT JOIN FETCH rel.deps" : "")
            + " WHERE rel.product.name = ?1 AND rel.version = ?2", Release.class)
            .setParameter(1, prodName)
            .setParameter(2, version)
            .getSingleResult(); 
```

Hibernate 将其转换为两个查询：

```
select release0_.id as rel, product1_.id as prod, customfiel2_.id as prodCF, customfiel3_.id as relCF,  
release0_.product_id as rel_prod, ...
from `release` release0_  
left outer join product product1_ on release0_.product_id=product1_.id  
left outer join prod_custField customfiel2_ on product1_.id=customfiel2_.product_id  
left outer join rel_custField customfiel3_ on release0_.id=customfiel3_.release_id  
cross join product product4_  
where release0_.product_id=product4_.id and product4_.name='EAP' and release0_.version='6.0.1.GA' 
```

哪个返回

'1', '1', '3', '2', '1', '4', ...

进而

```
select productcus0_.id as id59_0_, productcus0_.label as label59_0_, productcus0_.name as name59_0_ from prod_custField productcus0_ where productcus0_.id=1; 
```

问题是 Hibernate 加载 ID 为“1”的 ProductCustomField，这是一个错误 - 因为返回的列都没有引用 PCF；有一个 ID“1”对应于 ReleaseCustomField。

这是减去不相关文本字段的结果：

```
{
    'rel' : 1,
    'prod' : 1,
    'prodCF' : 3,
    'relCF' : 2,
    'rel_prodid' : 1,
    'status' : 4,
    'prodCFname' : 'jarRpmLic',
    'prodCF_prodid' : 1,
    'prodCF_id' : 3,
    'prodCF_name' : 'jarRpmLic',
    'relCF_id' : 1,
    'relCF_name' : 'eapCustField1',
    'relCF_relid' : 1,
    'relCF_val' : 'wdqdwqwdqd',
    'relCF_relID' : 1,
    'relCF_id' : 2,
    'relCF_name' : 'eapCustField1'
} 
```

如您所见，ProductCustomField 唯一可用的值是 3。

Is this a bug? How should I verify? What would be the workaround? I consider using some Hibernate-specific @Fetch strategy, or hydrating the entity partially and load the other collections manually via another DAO call.

Stacktrace:

```
javax.persistence.EntityNotFoundException: Unable to find org.jboss.essc.web.model.ProductCustomField with id 1
 at org.hibernate.ejb.Ejb3Configuration$Ejb3EntityNotFoundDelegate.handleEntityNotFound(Ejb3Configuration.java:155)
 at org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:210)
 at org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:260)
 at org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:148)
 at org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:1079)
 at org.hibernate.internal.SessionImpl.internalLoad(SessionImpl.java:1006)
 at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:613)
 at org.hibernate.type.EntityType.resolve(EntityType.java:441)
 at org.hibernate.engine.internal.TwoPhaseLoad.doInitializeEntity(TwoPhaseLoad.java:168)
 at org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:134)
 at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:999)
 at org.hibernate.loader.Loader.doQuery(Loader.java:878)
 at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293)
 at org.hibernate.loader.Loader.doList(Loader.java:2382)
 at org.hibernate.loader.Loader.doList(Loader.java:2368)
 at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2198)
 at org.hibernate.loader.Loader.list(Loader.java:2193)
 at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
 at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
 at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195)
 at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1248)
 at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
 at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:285) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:40:47.263

It turned out to be caused by HHH-6361 and HHH-7928 and I overlooked inconsistent data. I relied on that FK constraints would warn me, but the particular one was missing.

```
HHH-6361 
```

Collection events may contain wrong stored snapshot after merging a detached entity into the persistencecontext

# mysql - my.cnf 中忽略 expire_logs_days

> ID：15437908
> 
> 赞同：15
> 
> 时间：2013-03-15T16:49:31.540
> 
> 标签：mysql, database-replication

我有一对为主从复制设置的 MySQL 数据库。奴隶做得很好。

另一方面，尽管我尽了最大的努力（自动化），但主人一直在囤积二进制日志。

我正在尝试在 MySQL 的 my.cnf 文件中设置“expire_logs_days”变量，但由于某种原因，它似乎被忽略了。我的 my.cnf 文件看起来像：

```
[mysqld]
...
log-bin=/var/log/mysql/mysql-bin.log
server-id=1
expire_logs_days=3
log_bin_trust_function_creators=TRUE
sync_binlog=1

[mysqld_safe]
... 
```

但是当我`SHOW VARIABLES WHERE Variable_Name='expire_logs_days'`在 MySQL 中运行时，它会返回一个值`0`

我试过了：

*   重启 MySQL
*   使用这条线：`expire_logs_days='3'`
*   检查其他 my.cnf 文件：
    *   `mysqld --help --verbose | grep cnf`
    *   找到了这条线：`/etc/mysql/my.cnf /etc/my.cnf ~/.my.cnf order of preference`
    *   我的`my.cnf`文件位于`/etc/my.cnf`
    *   在其他位置没有名为 my.cnf 的文件
*   `SET GLOBAL expire_logs_days=3`可以在 MySQL 中工作，但本身并不能真正解决我的问题

这就是我能想到的所有事情。我已经运行了手动 PURGE 命令，它工作得很好，但我更喜欢（虽然，如果没有办法解决它，我还是会这样做）不使用 cron 运行 PURGE 命令。

有人有什么想法吗？我只是被轻拍了。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T22:06:14.423

# 您的问题中的事实

*   二进制日志不能循环出
*   你说你可以运行 PURGE BINARY LOGS

# 这是我的工作理论

由于您可以使用 擦除二进制日志`PURGE BINARY LOGS;`，因此我有两个您没有提到的地方供您查看

## 地点#1：`mysql-bin.index`

该文件包含所有二进制日志的位置。设置 expire_logs_days 后，mysqld 将打开此文本文件，检查每个文件中的日期时间戳，直到遇到时间戳小于`NOW() - INTERVAL expire_logs_days DAY)`.

mysql-bin.index 中的二进制日志预计在数字上是连续的。如果二进制日志在数字上不是连续的，则禁用日志轮换。

## 地点#2：`/var/log/mysql`文件夹

根据您的说法`my.cnf`，此文件夹包含所有二进制日志。

这里有2个问题：

1.  是否有任何`/var/log/mysql`数字上不连续的二进制日志？
2.  是否有任何二进制日志`/var/log/mysql`不在**？** `mysql-bin.index`

# 为什么会出现这些情况？

有时，人们会删除操作系统中的二进制日志。这可以摆脱 mysqld，因为 mysqld 用于`mysql-bin.index`在内部跟踪二进制日志的存在。简单地删除二进制日志，并在`rm -f`逻辑上破坏 mysqld 所知道的日志轮换机制。

# 推荐

如果其中一种或两种情况都存在，您可以按如下方式进行清理：

```
mysql -ANe"RESET MASTER"
service mysql stop
cd /var/log/mysql
rm -f mysql-bin.*
cd
service mysql start 
```

在此之后，您应该有一个全新的二进制日志设置。

试试看 ！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-05T08:15:39.413

Mysql（社区）版本 8.0.17-1.sles12 - OpenSUSE tumbleweed 2019.10.02

```
mysql> SET GLOBAL expire_logs_days = 4;
ERROR 3683 (HY000): The option expire_logs_days and binlog_expire_logs_seconds
cannot be used together. Please use binlog_expire_logs_seconds to set the expire
time (expire_logs_days is deprecated) 
```

..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T21:58:42.303

我不确定您的 my.cnf 发生了什么，但对于更大的问题，您似乎有几个选择：

1.  运行 mysqldump 并指定要刷新/清除文件
2.  运行“清除”（就像你一样）
3.  设置`max_binlog_size`。根据文档：

> 可能的删除发生在启动和刷新二进制日志时。

和

> 此外，当二进制日志的大小达到 max_binlog_size 系统变量的值时，它会被刷新。

听起来#3 会`expire_logs_days`在它进行冲洗/清除时执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T21:00:48.490

更改该配置文件中的任何 OTHER 选项是否有任何影响？我们需要确定我们正在使用正确的配置文件。更改 server-id 的值可能是一个不错的选择。

如果没有效果，让我们通过运行找到正确的文件：

ps辅助| grep mysqld

并查看 --defaults-file 或 --defaults-extra-file 的值

如果您仍然感到困惑，请确保没有 --init-file 设置某处将值设置为 0。

# nsis - 如何在 NSIS 中将文字换行符转换为 $\n？

> ID：15437910
> 
> 赞同：1
> 
> 时间：2013-03-15T16:49:36.957
> 
> 标签：nsis

我正在编写一个 NSIS 安装程序，它记录一些外部命令的输出（请参阅[如何使此功能在 NSIS 中实际工作？](https://stackoverflow.com/questions/15420224/how-can-i-make-this-function-actually-work-in-nsis/15433551)。）不幸的是，当 nsis 存储输出时，它会吃掉文字换行符，大概是因为它正在寻找一个文字 $\n （我实际上并不知道。）

谁能告诉我如何在以下代码段中正确地将换行符从 $0 转换？

```
nsExec::ExecToStack '...'
Pop $0 
```

我会将存储的字符串写入文件和 DetailPrint。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:06:26.207

我不相信 ExecToStack 会吃换行符，但它仅限于 ${NSIS_MAX_STRLEN} 的输出。

ExecDos[插件](http://nsis.sourceforge.net/ExecDos_plug-in)有一个/TOFUNC 参数，可以为每一行调用一个NSIS 函数。

或者您可以自己解析它：

```
Function nsExecLine
Pop $0
DetailPrint Line|$0|
; FileWrite ...
FunctionEnd  

!include LogicLib.nsh
nsExec::ExecToStack 'ping -n 2 localhost'
Pop $0
${If} $0 != "error"
    Pop $0
    StrCpy $1 -1
    StrCpy $3 "" ; \r \n merge
    more:
        IntOp $1 $1 + 1
        StrCpy $2 $0 1 $1
        StrCmp $2 "" done ; Can also be printlast if desired
        StrCmp $2 "$\n" +2
        StrCmp $2 "$\r" +1 more
        StrCpy $2 $0 $1
        StrCpy $4 $0 1 $1
        StrCmp $3 "" +2
        StrCmp $3 $4 0 more
        StrCpy $3 $4
        IntOp $1 $1 + 1
    ;printlast:
        StrCpy $0 $0 "" $1
        Push $0
        Push $3
        Push $2
        Call nsExecLine
        Pop $3
        Pop $0
        StrCpy $1 -1
        StrCmp $0 "" +1 more
    done:
${EndIf} 
```

...或者作为一个小技巧，使用 ExecToLog：

```
!include LogicLib.nsh
!include WinMessages.nsh
!ifndef LVM_GETITEM
!ifndef LVM_FIRST
!define LVM_FIRST 0x00001000
!endif
!define /math LVM_GETITEMCOUNT ${LVM_FIRST} +  4
!ifndef NSIS_UNICODE
!define /math LVM_GETITEM ${LVM_FIRST} +  5
!else
!define /math LVM_GETITEM ${LVM_FIRST} + 75
!endif
!endif
FindWindow $9 "#32770" "" $HWNDPARENT
GetDlgItem $9 $9 0x3F8
SendMessage $9 ${LVM_GETITEMCOUNT} 0 0 $7
nsExec::ExecToLog 'ping -n 2 localhost'
Pop $0
${If} $0 != "error"
    !define MAXEXECLINE 5000
    System::Call '*(i,i,i,i,i,i,i,i,i,&t${MAXEXECLINE})i.r6'
    IntOp $8 $6 + 36
    System::Call '*$6(i,i,i,i,i,ir8,i${MAXEXECLINE},i,i)'
    SendMessage $9 ${LVM_GETITEMCOUNT} 0 0 $8
    ${DoWhile} $7 < $8
        Push $6
        Push $7
        Push $8
        Push $9
        System::Call '*$6(i1,i$7,i0)'
        SendMessage $9 ${LVM_GETITEM} 0 $6
        System::Call '*$6(i,i,i,i,i,t.r7)' ; (i,i,i,i,i,i,i,i,i,&t${MAXEXECLINE} .r7)'
        Push $7
        Call nsExecLine ; nsExecLine should not DetailPrint in this case...
        Pop $9
        Pop $8
        Pop $7
        Pop $6
        IntOp $7 $7 + 1
    ${Loop}
    System::Free $6
${EndIf} 
```

# iphone - 如何在 NSNumber 上做数学运算

> ID：15437913
> 
> 赞同：10
> 
> 时间：2013-03-15T16:49:41.950
> 
> 标签：iphone, ios, objective-c, cocoa, nsnumber

我正在尝试从传感器读取读数并将其显示为百分比。[某个值] 将始终介于 0 和 1 之间。

这是我的代码：

```
NSNumber *reading = [some value];
reading = [reading floatValue] * 100; 
```

但是，我得到“从不兼容的浮点类型分配给 NSNumber *_strong”

我是工作 NSNumber 对象的新手，并且很难理解如何将我的传感器读数显示为用户的百分比。例如：75%

谢谢你的帮助

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-15T16:51:23.703

您需要将整数或浮点值装箱以将其存储在 NSNumber 中，

作为：

```
NSNumber *reading = @(10.123);
reading = @([reading floatValue] * 100); 
```

在此之后，您可以将其打印/转换为字符串：

```
NSString *display=[NSString stringWithFormat:@"%@%%",reading]; 
```

**注意 %% 双百分比符号**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T16:52:22.443

您应该首先将值保留在 float 中，并且需要从中创建 NSNumber。

```
NSNumber *reading = [NSNumber numberWithFloat:someValue];
float newNum = [reading floatValue] * 100;
reading = [NSNumber numberWithFloat:newNum]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T07:51:44.303

我不喜欢写多行代码，因为我有点懒得写多行代码。我一直在寻找压缩解决方案。请在下面找到以下解决方案。

```
 float testValue=5.00032;
    NSString *resultValue=[NSString stringWithFormat:@"%@%%",[NSNumber numberWithFloat:(testValue*100)]]; 
```

以上解决方案适用于浮点值。如果您想以整数值提供输入，请将“numberWithFloat”替换为“numberWithInt”。

我希望这个解决方案对您有所帮助。谢谢。

# ruby-on-rails - 未初始化的常量 ActiveSupport::Concern (NameError)

> ID：15437915
> 
> 赞同：3
> 
> 时间：2013-03-15T16:49:45.703
> 
> 标签：ruby-on-rails, rubygems, activesupport

我正在使用 rbenv、Bundler 1.0.21、rubygems 1.8.1、Ruby v1.8.7、rails 2.3.15 和 rails 3.0.18。我正在将我的 rails 应用程序从 2.3.15 迁移到 rails 3.0.18。当我在这些版本之间切换时，我运行“捆绑安装”以指向正确的 gem 集。这一直很好，直到我从 rails 3.0.18 切换回 2.3.15 并运行规范，我得到：

```
/Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/activesupport-2.3.15/lib/active_support/dependencies.rb:466:in 
`load_missing_constant': uninitialized constant ActiveSupport::Concern (NameError)
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/activesupport-2.3.15/lib/active_support/dependencies.rb:106:in `const_missing'
from /Users/me/Code/repos/microplace/vendor/plugins/verification/lib/action_controller/verification.rb:3
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/actionpack-2.3.15/lib/action_controller/base.rb:1418
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/actionpack-2.3.15/lib/action_controller/base.rb:1416:in `class_eval'
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/actionpack-2.3.15/lib/action_controller/base.rb:1416
from /Users/me/Code/repos/microplace/config/environments/development.rb:12:in `load_environment'
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/initializer.rb:386:in `load_environment'
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/activesupport-2.3.15/lib/active_support/core_ext/kernel/reporting.rb:11:in `silence_warnings'
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/initializer.rb:379:in `load_environment'
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/initializer.rb:137:in `process'
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/initializer.rb:113:in `send'
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/initializer.rb:113:in `run'
from /Users/me/Dropbox/Code/repos/microplace/config/environment.rb:15
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/commands/runner.rb:39:in `require'
from /Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/rails-2.3.15/lib/commands/runner.rb:39
from script/runner:3:in `require'
from script/runner:3 
```

考虑到 ruby​​gems 可能存在一些不兼容问题，我尝试降级到 1.3.4、1.4.5 和 1.5.0 版本，结果相同。

当我运行 gem which rails 时，它给出了：

```
/Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/railties-3.0.18/lib/rails.rb 
```

所以，我卸载了railties。结果相同。

activesupport 返回的 gem：

```
/Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/activesupport-2.3.15/lib/activesupport.rb 
```

我还尝试使用以下脚本删除 .rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems/ 目录中的所有宝石：[https](https://gist.github.com/IanVaughan/2902499) ://gist.github.com/IanVaughan/2902499和使用 bundle install 重新安装，结果相同。

这是我的 Gemfile

```
source :gemcutter
gem "rails", "2.3.15"
gem 'activesupport', '2.3.15'
gem "mysql"
gem "rake", "0.9.2"
gem "rack", "1.1.3"
gem "mongrel"

# bundler requires these gems in all environments
gem "nokogiri"
gem "money", "5.0.0"
gem "memcache-client"
gem "oauth"
gem "fastercsv"
gem "pdf-writer"
gem "json", "1.5.3"
gem "rmagick", :require => 'RMagick'
gem "twitter"
gem "will_paginate", "2.3.15"
gem "image_science"
gem "RubyInline"
gem "sentry"
gem "netaddr"
gem "hashie"
gem "activemerchant", "~>1.24.0"
gem "httparty"
gem "httmultiparty"
gem "ruby-hmac"
gem "mogli"
gem "SystemTimer"
gem "net-sftp"
gem "roxml"
gem "rdoc"
gem "omniauth-salesforce"
gem "xml-simple"
gem "rcov"
gem "ZenTest", "4.8.3"

group :development do
  # bundler requires these gems in development
  # gem "rails-footnotes"
end

group :test do
  # bundler requires these gems while running tests
  gem "rdoc"
  gem "rcov"
  gem "factory_girl", '2.6.4'
  gem "mocha", '< 0.13.0', :require => false
  gem "timecop"
  gem "rspec", '~> 1.3.0'
  gem "rspec-rails", '~> 1.3.4'
  gem "cucumber-rails", '~> 0.3.2'
  gem "database_cleaner", '~> 0.5.0'
  gem "webrat", '~> 0.7.0'
  gem "redgreen"
  gem "launchy"
  gem 'shoulda', :require => false
end

group :development, :test do
  gem "ruby-debug"
  #gem "ruby-debug-ide"
end

group :production, :salesforce_staging do
  gem "mongrel_cluster"
  gem "daemons"
end 
```

Gemfile.lock:

```
GEM
  remote: http://rubygems.org/
  specs:
    RubyInline (3.12.1)
      ZenTest (~> 4.3)
    SystemTimer (1.2.3)
    ZenTest (4.8.3)
    actionmailer (2.3.15)
      actionpack (= 2.3.15)
    actionpack (2.3.15)
      activesupport (= 2.3.15)
      rack (~> 1.1.3)
    active_utils (1.0.5)
      activesupport (>= 2.3.11)
      i18n
    activemerchant (1.24.0)
      active_utils (>= 1.0.2)
      activesupport (>= 2.3.11)
      builder (>= 2.0.0)
      i18n
      json (>= 1.5.1)
      money
      nokogiri
    activerecord (2.3.15)
      activesupport (= 2.3.15)
    activeresource (2.3.15)
      activesupport (= 2.3.15)
    activesupport (2.3.15)
    addressable (2.3.3)
    builder (3.2.0)
    cgi_multipart_eof_fix (2.5.0)
    color (1.4.1)
    columnize (0.3.6)
    cucumber (1.2.1)
      builder (>= 2.1.2)
      diff-lcs (>= 1.1.3)
      gherkin (~> 2.11.0)
      json (>= 1.4.6)
    cucumber-rails (0.3.2)
      cucumber (>= 0.8.0)
    daemons (1.1.9)
    database_cleaner (0.5.2)
    diff-lcs (1.2.1)
    factory_girl (2.6.4)
      activesupport (>= 2.3.9)
    faraday (0.8.6)
      multipart-post (~> 1.1)
    fastercsv (1.5.5)
    fastthread (1.0.7)
    gem_plugin (0.2.3)
    gherkin (2.11.5)
      json (>= 1.4.6)
    hashie (1.2.0)
    httmultiparty (0.3.8)
      httparty (>= 0.7.3)
      multipart-post
    httparty (0.10.2)
      multi_json (~> 1.0)
      multi_xml (>= 0.5.2)
    httpauth (0.2.0)
    i18n (0.6.4)
    image_science (1.2.4)
      RubyInline (~> 3.9)
    json (1.5.3)
    launchy (2.2.0)
      addressable (~> 2.3)
    linecache (0.46)
      rbx-require-relative (> 0.0.4)
    memcache-client (1.8.5)
    metaclass (0.0.1)
    mocha (0.12.10)
      metaclass (~> 0.0.1)
    mogli (0.0.28)
      httparty (>= 0.4.3)
    money (5.0.0)
      i18n (~> 0.4)
      json
    mongrel (1.1.5)
      cgi_multipart_eof_fix (>= 2.4)
      daemons (>= 1.0.3)
      fastthread (>= 1.0.1)
      gem_plugin (>= 0.2.3)
    mongrel_cluster (1.0.5)
      gem_plugin (>= 0.2.3)
      mongrel (>= 1.0.2)
    multi_json (1.6.1)
    multi_xml (0.5.3)
    multipart-post (1.2.0)
    mysql (2.9.1)
    net-sftp (2.1.1)
      net-ssh (>= 2.6.5)
    net-ssh (2.6.6)
    netaddr (1.5.0)
    nokogiri (1.5.6)
    oauth (0.4.7)
    oauth2 (0.6.1)
      faraday (~> 0.7)
      httpauth (~> 0.1)
      multi_json (~> 1.3)
    omniauth (1.1.3)
      hashie (~> 1.2)
      rack
    omniauth-oauth2 (1.0.2)
      oauth2 (~> 0.6.0)
      omniauth (~> 1.0)
    omniauth-salesforce (1.0.3)
      omniauth (~> 1.0)
      omniauth-oauth2 (~> 1.0)
    pdf-writer (1.1.8)
      color (>= 1.4.0)
      transaction-simple (~> 1.3)
    rack (1.1.3)
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (2.3.15)
      actionmailer (= 2.3.15)
      actionpack (= 2.3.15)
      activerecord (= 2.3.15)
      activeresource (= 2.3.15)
      activesupport (= 2.3.15)
      rake (>= 0.8.3)
    rake (0.9.2)
    rbx-require-relative (0.0.9)
    rcov (1.0.0)
    rdoc (4.0.0)
      json (~> 1.4)
    redgreen (1.2.2)
    rmagick (2.13.2)
    roxml (3.3.1)
      activesupport (>= 2.3.0)
      nokogiri (>= 1.3.3)
    rspec (1.3.2)
    rspec-rails (1.3.4)
      rack (>= 1.0.0)
      rspec (~> 1.3.1)
    ruby-debug (0.10.4)
      columnize (>= 0.1)
      ruby-debug-base (~> 0.10.4.0)
    ruby-debug-base (0.10.4)
      linecache (>= 0.3)
    ruby-hmac (0.4.0)
    sentry (0.5.3)
    shoulda (3.0.1)
      shoulda-context (~> 1.0.0)
      shoulda-matchers (~> 1.0.0)
    shoulda-context (1.0.2)
    shoulda-matchers (1.0.0)
    simple_oauth (0.2.0)
    timecop (0.6.0)
    transaction-simple (1.4.0.2)
    twitter (4.6.0)
      faraday (~> 0.8, < 0.10)
      multi_json (~> 1.0)
      simple_oauth (~> 0.2)
    webrat (0.7.3)
      nokogiri (>= 1.2.0)
      rack (>= 1.0)
      rack-test (>= 0.5.3)
    will_paginate (2.3.15)
    xml-simple (1.1.2)

PLATFORMS
  ruby

DEPENDENCIES
  RubyInline
  SystemTimer
  ZenTest (= 4.8.3)
  activemerchant (~> 1.24.0)
  activesupport (= 2.3.15)
  cucumber-rails (~> 0.3.2)
  daemons
  database_cleaner (~> 0.5.0)
  factory_girl (= 2.6.4)
  fastercsv
  hashie
  httmultiparty
  httparty
  image_science
  json (= 1.5.3)
  launchy
  memcache-client
  mocha (< 0.13.0)
  mogli
  money (= 5.0.0)
  mongrel
  mongrel_cluster
  mysql
  net-sftp
  netaddr
  nokogiri
  oauth
  omniauth-salesforce
  pdf-writer
  rack (= 1.1.3)
  rails (= 2.3.15)
  rake (= 0.9.2)
  rcov
  rdoc
  redgreen
  rmagick
  roxml
  rspec (~> 1.3.0)
  rspec-rails (~> 1.3.4)
  ruby-debug
  ruby-hmac
  sentry
  shoulda
  timecop
  twitter
  webrat (~> 0.7.0)
  will_paginate (= 2.3.15)
  xml-simple 
```

我难住了。在此先感谢您对我如何克服这个问题的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:00:17.567

事实证明这个问题是由我安装的 Rails 3 插件引起的，但没有提交给 git。所以当我切换回我的 Rails 2.3.15 分支时，插件仍然存在。（验证插件）

我通过简单地在我的项目根目录中对“ActiveSupport::Concern”执行递归 grep 发现了这一点。我也在我的

```
/Users/me/.rbenv/versions/1.8.7-p357/lib/ruby/gems/1.8/gems 
```

目录，并发现 cucumber-rails gem 实例化了 ActiveSupport::Concern。从那里，我放松了 Gemfile 中的版本控制并重新运行捆绑安装。这降低了 cucumber-rails 版本。我不知道 cucumber-rails 是否也导致了错误，但我怀疑是这样，因为它正在调用 ActiveSupport::Concern。

希望这对将来的其他人有所帮助！

# javascript - 助手是否包含在dust-full-1.2.0.js 中？

> ID：15437917
> 
> 赞同：0
> 
> 时间：2013-03-15T16:50:03.317
> 
> 标签：javascript, linkedin, helpers, dust.js

我认为 helpers 包含在dust-full-1.2.0.js 文件中，但是当我尝试使用一个时出现错误：

和 ：`{@select key=P_Brand} Ok {/select}`

从控制台：

> 未捕获的类型错误：无法读取未定义的属性“选择”-dust-full-1.2.0.js:523

与 ：`{@if cond="{P_Brand}"} Ok {/if}`

从控制台：

> 未捕获的类型错误：无法读取未定义的属性“如果”-dust-full-1.2.0.js:523

包括在内吗？或者也许我用错了......

感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:08:32.257

助手不包括在满尘或尘芯中。它们可以在这里找到：[https ://github.com/linkedin/dustjs-helpers](https://github.com/linkedin/dustjs-helpers)

# html - 覆盖特定元素的链接样式

> ID：15437919
> 
> 赞同：0
> 
> 时间：2013-03-15T16:50:11.413
> 
> 标签：html, css

我知道这个问题以前在这里被问过，但那里提供的答案似乎都不适合我。

我有一个样式表将所有链接的颜色设置为红色。页面上的所有其余文本都是纯黑色的。我有一个特定的 H1 元素是一个链接，但我*不*希望这个 H1 元素像所有其他链接一样是红色的。相反，我只希望它是普通的黑色，就像所有其他文本一样。不过，无论我尝试什么，它都会像所有其他链接一样保持红色。

这是我的样式表中的代码：

```
a:link {text-decoration: none; color: #B83131;}
a:visited {color: #B83131;} 
```

我已经为特定的 H1 标签尝试了特定的样式，但它没有帮助。我尝试给 H1 标签一个类名并设置该类的样式，但没有帮助。我觉得我在这里错过了一些东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:52:32.797

你把它放在锚上吗？

```
h1 a:link { color: black; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:53:27.590

如果您的标记类似于以下内容：

```
<h1>
   <a href="#">Bleh</a>
</h1> 
```

然后您应该能够将 CSS 规则添加为：

```
h1 a { color: #000; } 
```

# html - Facebook - 元标签可能是错误的？

> ID：15437921
> 
> 赞同：0
> 
> 时间：2013-03-15T16:50:12.340
> 
> 标签：html, facebook, facebook-graph-api

我刚刚检查了我的网站在 facebook 中不起作用。我为标题、描述、缩略图添加了 facebook 元标记。

我检查了我的网站，发现它正在运行，我可以在 Windows 7 中共享链接

但我今天检查了 Windows 8 和 linux。（ubuntu 和 fedora）他们不工作，我无法分享链接。

我检查了调试链接，它也在运行，并在 windows 7 中废弃了链接详细信息。但它在 linux 和 windows 8 中不起作用。

我的网站可能有什么问题？我怀疑元标签。

元标记包含在头标记中。那是我的 doctype 和 html 标签

```
<meta property="og:title" content="<?php echo $fb_title; ?>"/>
<meta property="og:url" content="<?php echo $fb_url;?>"/>
<meta property="og:image" content="images/<?php echo $fb_images;?>"/>
<meta property="og:site_name" content="<?php echo $fb_page_name;?>"/>
<meta property="fb:admins" content="my_id"/>
<meta property="og:description" content="<?php echo $fb_description;?>"/>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:54:54.743

您可以使用此[facebook 链接](https://developers.facebook.com/tools/debug)测试结果。

如果您还不知道，您正在使用[Open Graph Protocol](http://opengraphprotocol.org/)。

你必须把`meta`里面`<head />`的一部分。

就我而言，当我不想添加 Facebook 按钮时，我会使用这个 DOM：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" >
<head>
<title>My site</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="author" content="JoDev, France" />
<meta name="keywords" content="some, word, that, can, resume, the, site" />
<meta property="og:title" content="My site title" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://url.to/your/site" />
<meta property="og:image" content="http://url.to/your/preview/image" />
<meta property="og:site-name" content="My Site name" />
<meta property="og:description" content="Using this, you will be able to reach for the moon" /> 
```

# c++ - 在内存网格上应用 Assimp 后处理

> ID：15437924
> 
> 赞同：2
> 
> 时间：2013-03-15T16:50:27.840
> 
> 标签：c++, opengl, assimp

如何在 Assimp 中加载网格，编辑顶点，然后让 assimp 重新计算顶点并进行其他后处理？

导入器可以导入场景并支持一些标志，其中包括生成法线的标志。然而，在我加载网格之后，我稍微编辑了网格（添加了一些皱纹，没什么特别的）并且想使用 Assimp 重新计算网格的法线。但是，我无法将网格放回 Assimp。据我所知，只有导入器可以应用后处理，我不能将网格添加到导入器，并且没有对内存中的网格进行后处理的功能。

如何将 Assimp 的后处理应用于我在程序中生成的顶点数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-13T23:36:08.540

我不确定在您提出问题时此功能是否可用，但此时您可以在[assimp 文档中找到以下参考资料：](http://www.assimp.org/lib_html/class_assimp_1_1_importer.html#details)

### Assimp::Importer 类参考

```
const aiScene * ApplyPostProcessing (unsigned int pFlags)
// Apply post-processing to an already-imported scene. 
```

还有一个[C-API 风格的](http://www.assimp.org/lib_html/cimport_8h.html#a683b19fdda7fec063d07a412268a7a24)函数`cimport.h`

### cimport.h 文件参考

```
ASSIMP_API const aiScene * aiApplyPostProcessing (const aiScene *pScene, unsigned int pFlags)
//Apply post-processing to an already-imported scene. 
```

# fine-uploader - 如何处理 FineUploaderBasic 中的空正文响应

> ID：15437928
> 
> 赞同：0
> 
> 时间：2013-03-15T16:50:34.443
> 
> 标签：fine-uploader

我的服务器返回带有空正文的上传状态代码（201）。我可以将数据上传到服务器，但是我得到了 onComplete 回调

```
Error when attempting to parse xhr response text (SyntaxError: Unexpected end of input) 
```

FineUploader 期望我没有提供的 JSON 响应，有没有办法（除了手动修改 FinneUploader JS 文件）告诉 FineUploader 不要尝试解析响应并检查有效状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:10:22.800

不会。您会发现在 IE9 和更早版本中依赖状态代码会导致问题，因为在这些浏览器中为每个文件提交隐藏 iframe 内的表单，并且无法通过 javascript 确定响应代码这样的要求。

# extjs - Extjs 可点击工具提示

> ID：15437932
> 
> 赞同：1
> 
> 时间：2013-03-15T16:50:45.823
> 
> 标签：extjs, tooltip, clickable

我有一种情况，我在网格中滚动一行，我想显示一个菜单。我将菜单放在工具提示中。但是除非我使工具提示可关闭，否则无法单击菜单。如果我使工具提示可关闭，我无法提供使用自动隐藏功能，我必须单击以关闭工具提示。有什么方法可以将鼠标悬停在网格中的行上，显示包含可点击项目的工具提示，然后在您滚动离开时让工具提示消失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:51:28.343

您可能需要从工具提示扩展您自己的组件。

# sql - 为给定月份生成一系列周间隔

> ID：15437940
> 
> 赞同：13
> 
> 时间：2013-03-15T16:51:06.800
> 
> 标签：sql, postgresql, time-series, weekday, generate-series

在 Postgres 9.1 数据库中，我试图为给定月份生成一系列周，但有一些限制。我需要所有的星期都从星期一开始，并在他们开始或在另一个月结束时被削减。

例子：

对于 2013 年 2 月，我想生成一个这样的系列：

```
 start
------------------------
2013-02-01 00:00:00+00
2013-02-04 00:00:00+00
2013-02-11 00:00:00+00
2013-02-18 00:00:00+00
2013-02-25 00:00:00+00 
```

我现在的查询如下所示：

```
SELECT GREATEST(date_trunc('week', dates.d),
                date_trunc('month',dates.d)) as start
FROM generate_series(to_timestamp(1359676800),to_timestamp(1362095999), '1 week') as dates(d) 
```

这个查询在前 4 周得到了我，但从 25 日起就错过了这一周。有可能拿到最后一周吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T17:22:48.677

```
SELECT generate_series(date_trunc('week', date '2013-02-01' + interval '6 days')
                     , date_trunc('week', date '2013-02-01' + interval '1 month - 1 day')
                     , interval '1 week')::date AS day
UNION  SELECT date '2013-02-01'
ORDER  BY 1; 
```

此变体不需要子选择，`GREATEST`或者`GROUP BY`只生成所需的行。更简单，更快。`UNION`一排更便宜。

*   将前*一个月的第一天*加上 6 天来`date_trunc('week', ...)`计算该月的**第一个星期一**。

*   加 1 个月并减去 1 天前`date_trunc('week', ...)`得到该**月的最后一个星期一**。
    这可以方便地填充到单个`interval`表达式中：`'1 month - 1 day'`

*   `UNION`（*不是* `UNION ALL`）每月的第一天添加它，除非它已经包含在星期一。

*   请注意，`date`+`interval`导致`timestamp`，这是此处的最佳值。详细解释：

    *   [在 PostgreSQL 中生成两个日期之间的时间序列](https://stackoverflow.com/questions/14113469/generating-time-series-between-two-dates-in-postgresql/46499873#46499873)

### 自动化

您可以在 CTE 中提供日期系列的开始：

```
WITH t(d) AS (SELECT date '2013-02-01')  -- enter 1st of month once
SELECT generate_series(date_trunc('week', d + interval '6 days')
                     , date_trunc('week', d + interval '1 month - 1 day')
                     , interval '1 week')::date AS day
FROM   t
UNION  SELECT d FROM t
ORDER  BY 1; 
```

或者将其包装成一个简单的 SQL 函数，以方便重复调用：

```
CREATE OR REPLACE FUNCTION f_week_starts_this_month(date)
  RETURNS SETOF date AS
$func$
SELECT generate_series(date_trunc('week', $1 + interval '6 days')
                     , date_trunc('week', $1 + interval '1 month - 1 day')
                     , interval '1 week')::date AS day
UNION
SELECT $1
ORDER  BY 1
$func$  LANGUAGE sql IMMUTABLE; 
```

称呼：

```
SELECT * FROM f_week_starts_this_month('2013-02-01'); 
```

您将通过该月的第一天的日期，但它适用于*任何*日期。您是下个月的第一天和所有星期一。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T17:11:07.103

```
select
    greatest(date_trunc('week', dates.d), date_trunc('month',dates.d)) as start
from generate_series('2013-02-01'::date, '2013-02-28', '1 day') as dates(d)
group by 1
order by 1 
```

# typo3 - 从页面获取记录时，“子页面菜单”在 Typo3 Fluid 模板中不起作用

> ID：15437943
> 
> 赞同：1
> 
> 时间：2013-03-15T16:51:25.217
> 
> 标签：typo3, typoscript, fluid

我正在尝试在基于*Typo3 Fluid*的模板的主布局中添加“用户控制”页脚。
这意味着我在一个称为“页脚页面”的特殊后端页面中添加了一个包含四列的*后端布局。*用户可以使用*WEB > PAGE*模块在这些列中添加内容元素。
每当用户在其中一列中添加内容元素（*文本、带图像的文本、项目符号列表等*）时，一切正常并且内容正确显示。但是当用户尝试添加一个*特殊的菜单*内容元素时，菜单不会显示并且列容器保持为空。

### 主要布局

```
<body>
    ...
    <div id="footer">
        <f:cObject typoscriptObjectPath="lib.footer" />
    </div>
</body> 
```

* * *

### 主页面排版

```
page = PAGE
page {
    # Regular pages always have typeNum = 0
    typeNum = 0
    10 = FLUIDTEMPLATE
    10 {
        #file = {$filepaths.templates}index_f.html
        partialRootPath = {$filepaths.templates}partials/
        layoutRootPath = {$filepaths.templates}layouts/
        variables {
            ...
            footer < lib.footer
            ...
        }
     }
} 
```

* * *

### lib.footer 排版

```
lib.footer = COA
lib.footer {
    10 = CONTENT
    10 {
        table = tt_content
        select.pidInList = {$contentpage.footerPID}
        select.where = colPos = 901
        select.orderBy = sorting
        stdWrap.wrap = <div id="footer-widget-1" class="col205">|</div>
    }
    20 = CONTENT
    20 {
        table = tt_content
        select.pidInList = {$contentpage.footerPID}
        select.where = colPos = 902
        select.orderBy = sorting
        stdWrap.wrap = <div id="footer-widget-2" class="col205">|</div>
    }
    ...
} 
```

我做错了什么还是一个错误？Typo3 版本为 6.0.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T23:20:57.767

您可能想看看 TYPO3 的 VHS 扩展 - 它特别包含一个 ViewHelper，它可以让您从任何页面上的任何列（通过 UID）呈现内容元素。它甚至可以从内容元素 UID 列表中呈现内容元素（您可以在 TypoScript 中指定，在 FlexForm 中选择，在常量编辑器中进行编辑等）：

[http://fedext.net/viewhelpers/vhs/Content/RenderViewHelper.html](http://fedext.net/viewhelpers/vhs/Content/RenderViewHelper.html)

很多时候，来自 VHS 的 ViewHelpers 会让您做与 TS 让您做的完全相同的事情，但直接在 Fluid 中这样做，并且可以选择手动控制输出的 HTML。

干杯，
克劳斯。无名编码者

# html - iframe 溢出在 IE 中无法正常工作

> ID：15437954
> 
> 赞同：-1
> 
> 时间：2013-03-15T16:52:14.147
> 
> 标签：html, css

如何在 IE 中创建溢出 div？看来我的方法可以使用其他浏览器（chrome、firefox）正常工作，但不能在 IE 中正常工作。这是我的代码：

```
<div style="height:400px;overflow:auto">
<div class="fb-comments fb_iframe_widget" style="overflow:hidden;position:relative" data-href="#" data-width="470" data-num-posts="10" fb-xfbml-state="rendered">
<span style="height: 905px; width: 470px;position:relative;">
<iframe id="f225f010c" name="fe2e48c68" scrolling="yes" style="position:relative;border: none; overflow: hidden; height: 905px; width: 470px;" class="fb_ltr" src="#"></iframe>
</span>
</div>
</div> 
```

我尝试了很多方法，但没有一个有效。有什么建议吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:56:39.360

尝试设置 MIN-HEIGHT 而不是 HEIGHT。然后将其与 OVERFLOW:AUTO 结合使用。

# python - 用(out) eval() 执行用户给定的操作

> ID：15437955
> 
> 赞同：3
> 
> 时间：2013-03-15T16:52:17.633
> 
> 标签：python, eval

我有许多处理大文件的python代码。在其中一些中，我在列之间执行操作或根据它们的内容进行选择。由于输入文件可以具有不同的结构，因此操作是通过命令行提供的，其语法类似于`c3 + c5 -1`或`(c3<4) & (c5>4)`（或组合）。`c4`被解释为*输入文件的第四列*。

我的文件看起来像这样（'input_file.txt'）：

```
21.3   4321.34   34.12   4   343.3  2  324
34.34  67.56     764.45  2   54.768 6  45265
986.96 87.98     234.09  1   54.456 3  5262
[...] 
```

假设我想将第 4 列与第 5 列相加并减去 1。
我会这样做

```
import re
import numpy as np

operation = "c3 + c5 -1"  #in reality given from command line
pattern = re.compile(r"c(\d+?)") # compile the regex that matches the column number
# get the actual expression to evaluate
to_evaluate = pattern.sub("ifile[:,\\1]", operation) 
#to_evaluate is: "ifile[:,3] + ifile[:,5] -1"

ifile = np.loadtxt('input_file.txt')
result = eval(to_evaluate)  #evaluate the operation required
print(result)
# do the rest 
```

输出

> [5, 7, 3, ...]

我想出了这个实现，因为：

1.  `numpy`如果我想改变读取文件的方法（目前我可以决定使用or `pandas`）或者如果我想添加操作，它很容易编写和修改
2.  在我能做的事情上给了我很大的自由。我可以治疗`c3 + c5 -1`，`(c3<4) & (c5>4)`或`(c2+c4)>0`以同样的方式。
3.  我在所有代码中都有相同的签名：出错的可能性较小

我知道这`eval`可能是不安全的（尽管目前我是这些代码的唯一用户）并且可能比相应的代码慢，但我想不出更好的方法。

有没有人知道更好/更安全的方法来实施此类操作？

额外编辑：如果重要的话，我正在运行 python 2.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:12:26.463

您可以进行更安全的评估

```
def safe_eval(eval_str, variable_dict = None):
    '''welll... mostly safe:
        http://lybniz2.sourceforge.net/safeeval.html
    '''
    if variable_dict == None:
        variable_dict = {}
    return eval(eval_str, {"__builtins__" : None}, variable_dict) 
```

尽管它永远不会让非常了解 python 的人完全安全（参见[http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html](http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)示例）

你的申请让我很困惑，所以我不确定我还能帮助你多少！

* * *

我不确定这是否有助于解决您正在做的事情，但是您可以做的一件事是将模块中的所有函数编译到字典中。

因此，您可以通过以下方式编译要使用的函数：

```
module_dict = {}
for n in dir(module):
 module_dict[n] = eval('module.'+n) 
```

（我相信这个功能在 python 3 中是标准的。即所有模块模块字典都可以访问。）这将所有函数调用都放在字典形式中，从而加快调用速度。它还解决了评估安全问题。

如果您尝试使用 '+' 或 '=' 之类的操作，则可以从 object 获取它们的函数调用。**添加**和对象。**当量**_ 您可以将这些调用存储到您的字符串语法中。

不确定这是否有帮助。

# php - 使用 IIS 7 和 FastCGI PHP 在 Windows Server 2008 上安装时，ExtJS 4 和 PHP 多文件上传小部件配置不正确

> ID：15437956
> 
> 赞同：0
> 
> 时间：2013-03-15T16:52:18.540
> 
> 标签：php, upload, extjs4, fastcgi

有人可以帮助我在 IIS 7 中使用 PHP FastCGI 中的 ExtJS 4 进行必要的配置（或帮助解决）文件上传吗？应用程序用户界面运行良好，但文件没有移动到`\file_upload\public\tmp\upload`文件夹中。

***更多详情：***

在过去的几天里，我一直在为 ExtJS 4 尝试不同的多文件上传小部件。有些只适用于新的 HTML 5 文件 API，但在 Internet Explorer 中被破坏了。有些只是用户界面不能很好地与 ExtJS 4 配合使用，所以我认为它们看起来有点傻。我终于找到了一个适用于所有浏览器的，尽管它很简单！我已经在 IIS 7 上的 Windows Server 2008 中使用 PHP FastCGI 配置了下面的 ExtJS/PHP 多文件上传应用程序（博客链接）。我有一些设置说明。除了配置和其他一些让应用程序用户界面正常工作的事情外，我并没有真正改变应用程序的任何内容。

# ***Windows 安装说明：***

**1.) 小部件在这里找到：**

[http://blog.debug.cz/2012/05/file-upload-widget-for-extjs-4x.html](http://blog.debug.cz/2012/05/file-upload-widget-for-extjs-4x.html)

**这是演示：**

[http://debug.cz/demo/upload/](http://debug.cz/demo/upload/)

**在 GitHub 上下载源代码：**

[https://github.com/ivan-novakov/extjs-upload-widget](https://github.com/ivan-novakov/extjs-upload-widget)

**2.) 为简单起见，将提取的文件放在桌面上并重命名根文件夹“file_upload”**

**3.) 下载 ExtJS 4 并将根 ExtJS 4 文件夹重命名为“extjs”并放置在此文件夹中：**

```
\file_upload\public\[extjs] 
```

**下载并解压：**

[http://cdn.sencha.io/ext-4.1.0-gpl.zip](http://cdn.sencha.io/ext-4.1.0-gpl.zip)

**4.) （在 Windows 中）将“上传”快捷方式文件重命名为“upload_old”（或直接删除），并将实际上传文件夹复制`\file_upload\lib\upload`到文件夹中`\file_upload\public\external\upload`**

**5.)`\file_upload\public\tmp\upload`为 PHP 文件创建文件上传文件夹以放置其文件**

```
define('UPLOAD_DIR', '/tmp/upload/'); 
```

**6.) 在 IIS 7 中的 Windows Server 2008 (x64) 中设置 PHP**

*   在 Windows Server 2008 上的 IIS 7 中打开 CGI

*   已下载 IIS 7.0 (x64) 管理包

*   遵循以下说明：

[http://www.howtogeek.com/50432/how-to-install-php-on-iis-7-for-windows-server-2008/](http://www.howtogeek.com/50432/how-to-install-php-on-iis-7-for-windows-server-2008/)

使用了这些 php.ini 设置：

```
cgi.force_redirect = 0

fastcgi.impersonate = 1

extension_dir = "D:\Program Files\php\ext"

date.timezone = "America/Chicago"

extension=php_curl.dll"

display_errors = On ==========> more notes below

upload_tmp_dir = "{desktop path}\file_upload\public\tmp\upload" 
```

**7.) 放置在我的 php 文件的顶部，因为 IIS 7 显然存在一些问题？？？**

```
<?PHP
ini_set('display_errors',true); 
```

**8.) 按照此处的答案在 IIS 7 中为 PHP 配置 HTTP 错误**

[https://serverfault.com/questions/19561/how-can-i-display-and-log-php-errors-on-iis7](https://serverfault.com/questions/19561/how-can-i-display-and-log-php-errors-on-iis7)

*   IIS 管理器 > 单击网站 > 配置编辑器 > system.webServer > httpErrors > 将“DetailedLocalOnly”更改为“详细”

**9.）在`C:\Windows\php.ini`我将此配置设置设置为“开”**

```
display_errors = On 
```

**还是应该将此配置设置设置为“stderr”，因为我在 IIS 7 中使用 FastCGI？**

```
; This directive controls whether or not and where PHP will output errors,
; notices and warnings too. Error output is very useful during development, but
; it could be very dangerous in production environments. Depending on the code
; which is triggering the error, sensitive information could potentially leak
; out of your application such as database usernames and passwords or worse.
; It's recommended that errors be logged on production servers rather than
; having the errors sent to STDOUT.
; Possible Values:
;   Off = Do not display any errors
;   stderr = Display errors to STDERR (affects only CGI/CLI binaries!)
;   On or stdout = Display errors to STDOUT
; Default Value: On
; Development Value: On
; Production Value: Off
; http://php.net/display-errors
display_errors = On 
```

**10.) 更改 \file_upload 文件夹及其子文件夹的安全性**

*   IIS_IUSRS 用户组（或只是 IUSR 用户）

*   IIS APPPOOL{应用程序池}

**11.) 将该`\file_upload`文件用作您的 IIS 站点 Web 根文件夹**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:46:48.663

**不得不做一些事情来解决这个问题：**

我意识到默认的“upload.php”文件只是每次都为每个文件提供一个成功的虚假 JSON 响应。所以我做了一个“upload.php”的备份，并称之为“upload_old.php”。然后我在“upload_into_dir.php”上保存并重命名为“upload.php”，因为 ExtJS 代码在 7 个不同的地方引用了“upload.php”（虽然有些地方只是文档）。

然后，当我尝试上传文件时，出现此错误：

```
Ext.Error: You're trying to decode an invalid JSON String: <br />
<b>Warning</b>:  fopen(/tmp/upload/test.jpg): failed to open stream: No such file or directory in <b>C:\Users\macgyver\Desktop\file_upload\public\upload.php</b> on line <b>28</b><br />
{"success":false,"message":"Error writing to file"} 
```

我必须放一个“。” 在 Windows 中的路径前面，以便 PHP 识别我的文件。然后它工作得很好。

```
define('UPLOAD_DIR', './tmp/upload/'); 
```

# mamp - 在 iPad 上查看 MAMP Pro 网站

> ID：15437962
> 
> 赞同：1
> 
> 时间：2013-03-15T16:52:31.530
> 
> 标签：mamp

我刚刚开始使用 MAMP、MAMP Pro 的付费版本，并且在通过我的 iPad/iPhone 访问我的网站时遇到了一些问题。

我已经使用默认端口（80、3306）设置了我的 MAMP 服务器，并尝试通过以下方式在我的 iPad 上访问该站点：`10.0.1.2:80/project-name`.

但是没有骰子，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T18:24:54.853

使用[`xip.io`](http://xip.io/)地址。

在 MAMP PRO 中选择您的主机（`client.dev`在本例中），转到“高级”选项卡并将其放入“自定义常规设置”中：`ServerAlias client.*.xip.io`

将 WP URL 设置为`http://client.YOUR-LOCALHOST-IP-ADDRESS.xip.io`.

对于开发，最好在系统首选项中设置静态 IP DHCP 地址。

重新启动一切，运行！

我在 WordPress Answers 中更深入地[回答了同样的问题。](https://wordpress.stackexchange.com/a/98419/12615)

# web - 具有大模板/主题集合的静态网站生成器？

> ID：15437965
> 
> 赞同：0
> 
> 时间：2013-03-15T16:52:41.237
> 
> 标签：web, themes, generator

**任何带有大量模板/主题（不适用于博客**）的静态网站生成器（带有导出到 html 的 cms'es 或专用脚本）？

想写how-to/wiki/tutorial网站。（仅由我创建）

1.  将在我的电脑上编辑网站。
2.  将在 Amazon S3 上托管静态文件。
3.  当我需要进行布局/设计时，破解我自己的解决方案或使用简单的生成器会失败。那不是我的技能。（因此标题/问题中的“大模板/主题集合”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:29:30.783

在进行谷歌搜索后，我发现了这个列表[https://iwantmyname.com/blog/2011/02/list-static-website-generators.html](https://iwantmyname.com/blog/2011/02/list-static-website-generators.html)。您所寻找的似乎是 ikiwiki，它是一种将 wiki 页面转换为 html 的 wiki 编译器。我会查看[http://ikiwiki.info/theme_market/](http://ikiwiki.info/theme_market/)上的主题，看看你喜欢什么。尽管这没有大量的主题，但它似乎是您想要的最佳匹配。此外，我相信 ikiwiki 软件包附带了一些主题，尽管我不确定有多少。我会从那里开始，看看你还能在那个网站上找到什么。

# c# - SQLite 和多用户

> ID：15437970
> 
> 赞同：1
> 
> 时间：2013-03-15T16:53:04.200
> 
> 标签：c#, winforms, sqlite

我有一个 C# Winforms 应用程序。应用程序的一部分提取 SQLite 表的内容并将其显示到数据网格视图的屏幕上。我似乎有多个用户/计算机正在使用该应用程序的问题。

当程序加载时，它会打开一个与 SQLite DB 引擎的连接，该连接会保持打开状态，直到用户退出程序。在加载时，它会刷新有问题的表并继续定期这样做。当一位用户正在使用该表或该一位用户打开了多个程序实例时，该表会正确更新。但是，如果不止一个人使用它，则该表似乎不会反映其他用户所做的更改，直到程序关闭并重新打开。

一个示例 - 第一个用户（用户 A）登录。该表有 5 个条目。他们加了一个。现在有6个条目。用户 B 现在登录并看到 6 个条目。用户 A 输入另一条记录，总共 7 条。即使在自动刷新之后，用户 B 也看到 6 条。并且在他们关闭并重新打开程序之前不会看到 7。用户 A 看到 7 没有任何问题。

知道什么可能导致这个问题吗？它必须与 SQLite 的数据库引擎相关，因为我 100% 确定我的自动刷新工作正常。我怀疑它与预写日志功能或连接池（我已启用）有关。我禁用了两者以查看会发生什么，并且发生了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T03:40:05.070

这可能是文件锁定问题 - 第一个应用程序可能正在获取独占写入锁定，从而阻止了其他应用程序实例。如果这是真的，那么 SQLite 可能只是在更新数据文件之前等待锁定被释放，这不是一个理想的行为，但是再次将 SQLite 用于多用户应用程序也不理想。

我[发现](http://www.sqlite.org/lockingv3.html)可以（或应该在最新版本中）使用共享锁的提示。这可能是一个简单的解决方案，但是这方面的文档并不容易找到（可能是因为这太过分了 SQLite 的规范？）

尽管如此，最好自己序列化文件访问。这取决于您的精确系统架构，以及您应该如何最好地处理此类功能。

从您的描述中不清楚您的系统架构。您谈到访问 SQLite 文件的“多个用户/计算机”。

如果使用 SQLfile 的网络共享来实现多台计算机的要求，那么这确实会成为一个日益严重的问题。建议使用更好的架构或其他 RDBMS。

如果多台计算机通过服务器进程（或同一台机器上的多个服务器进程？）访问数据，那么简单的监视器锁（lock 关键字）或 ReaderWriterLock 将有所帮助（在多个服务器进程的情况下，操作系统互斥锁将是必需的）。

**更新**

鉴于您最初的问题，上述内容仍然适用。但是，鉴于您的情况，查看您的根本问题 - 无法访问您的企业 RDBMS，我还有一些其他建议：

1.  您的 PC 上的 Maria DB / mySQL / postgreSQL - 当然这需要您的 PC 保持开启。
2.  托管在数据中心中的某种数据库和/或服务层（这里有很多选项，例如 VPS、Azure DB、共享托管 DB 等。当然，所有这些都会产生成本 [也许有一些小的免费的） ])

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T22:32:08.280

跨网络文件系统的 SQLite 不是一个很好的解决方案。您会发现 FAQ 和[适当的使用](http://www.sqlite.org/whentouse.html)页面轻轻地引导您远离使用 SQLite 作为跨 NFS 的并发访问数据库。

虽然理论上它*可以*工作，但网络文件系统的实现和延迟大大增加了在写入操作期间发生锁定冲突的机会。

我应该指出，读取数据库会创建一个只读锁，这对于并发访问来说很好。

# iphone - 活动指示器仅动画一次

> ID：15437972
> 
> 赞同：2
> 
> 时间：2013-03-15T16:53:12.043
> 
> 标签：iphone, ios, xcode, uiactivityindicatorview, activity-indicator

我正在编写一个使用 AFNetworking 框架执行 HTTP 请求的应用程序，接收到的数据被解析然后放入表视图中

我用加载器创建了一个特殊的单元格，它会在请求进行时显示。这个单元格只有一个 .xib 文件，没有自定义类。我在这个单元格中添加了活动指示器，并在属性检查器中选中了“动画”选项。

我还创建了 BOOL ivar 来显示这个单元格。

```
BOOL isLoading; 
```

这是单击“搜索”按钮时执行的功能：

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar{
    if ([searchBar.text length] > 0){

        isLoading = YES;
        [self.tableView reloadData];

        searchResults = [NSMutableArray arrayWithCapacity:10];

        NSURL *url = [self urlWithSearchText:searchBar.text];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];

        AFJSONRequestOperation *operation = [AFJSONRequestOperation
             JSONRequestOperationWithRequest:request
             success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

                 [self parseDictionary:JSON];
                 [searchResults sortUsingSelector:@selector(compareName:)];

                 isLoading = NO;
                 [self.tableView reloadData];
             }
             failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){

                 [self showNetworkError];
                 isLoading = NO;
                 [self.tableView reloadData];
             }];

        [queue addOperation:operation];
    }
} 
```

这就是我得到那个细胞的方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (isLoading) {
        return [tableView dequeueReusableCellWithIdentifier:LoadingCellIdentifier];
    } 
    /*other code */
} 
```

当我执行我的第一次搜索时，这个单元格会出现动画活动指示器，一切正常，但在所有其他时间，这个单元格都会出现不旋转的指示器，这就是问题所在。为什么会这样？我如何让它一直旋转？

这里是应用程序的屏幕截图[http://monosnap.com/image/TRFK4cXEvYK2VPpteE1j5x0eB.png](http://monosnap.com/image/TRFK4cXEvYK2VPpteE1j5x0eB.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:59:44.220

当您停止动画并隐藏单元格时，它不会被取消分配。这意味着下次加载单元格时，它将采用与隐藏时相同的状态。您需要`[activityView startAnimating];`在加载单元格后调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T13:09:06.137

一旦像这样尝试，在 tableView willDisplayCell:method 中隐藏您的警报，而不是在 JSONRequestOperationWithRequest:sucess 方法之后，如下所示，

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
//hide your alert,i think in your case isLoading = NO to hide alert so,
isLoading = NO;
} 
```

希望它会帮助你...

# php - Codeigniter 2.1，MySQL - 按日期搜索

> ID：15437974
> 
> 赞同：0
> 
> 时间：2013-03-15T16:53:15.397
> 
> 标签：php, mysql, codeigniter, codeigniter-2

在我的数据库中，我有一个带有MySQL **(YYYY-MM-DD HH:MM:SS)标准****日期时间的****日期**字段。这次我收到了通过 AJAX 请求：**DD/MM/YYYY**

 ******这是我编写的用于搜索槽 DB 的函数：

```
$this->db->get_where('tvprogram', array('DATE(date)' => $date))->result_array(); 
```

目前这个函数没有得到任何数据。这里似乎有什么问题？如何搜索和查找特定日期的所有条目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:13:52.050

使用`strtotime`函数将日期转换为正确的格式：

```
 $date = date('Y-m-d', strtotime($date));
 $this->db->get_where('tvprogram', array('DATE(date)' => $date))->result_array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T03:27:13.307

请将首次发布的日期转换为数据库格式，并在您的搜索字段中使用 Date 函数，如下所示。

```
$date = date('Y-m-d', strtotime($search));
$this->db->where('DATE(created)',$date); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T17:12:54.513

检查输出的格式，`DATE(date)`因为它可能像 YYYY-MM-DD 并且比较总是会失败。

进入 phpMyAdmin 或类似`SELECT DATE(now())`的并尝试仔细检查日期格式。

如果`$date`有类似的格式`DD/MM/YYY`，那么您可以使用以下方法重新格式化它：

```
$date=date('Y-m-d',strtotime(strtr($date,"/","-"))); 
```

从 PHP 手册（[http://www.php.net/manual/en/function.strtotime.php](http://www.php.net/manual/en/function.strtotime.php)）：

> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。

为了解决美国/欧洲日期的歧义，我只需在字符串到时间的转换之前将“/”替换为“-”。******

# php - MySQL：使用 JQuery 可排序的新值更新数据库

> ID：15437977
> 
> 赞同：0
> 
> 时间：2013-03-15T16:53:17.953
> 
> 标签：php, mysql, jquery-ui-sortable

**我有这个：**

```
foreach($_POST['pos'] as $value) {
   $new_value = "UPDATE users SET regnr='" . $value . "' 
   WHERE username='" . mysql_real_escape_string($_COOKIE['username']) . "'";
}

// Connect to database
$opendb = mysql_connect($dbhost, $dbuser, $dbpass) or die("Kunde inte ansluta till MySQL:<br>" . mysql_error());
mysql_select_db($dbname) or die("Kunde inte ansluta till databasen:<br>" . mysql_error());

mysql_query($new_value) or die(mysql_error());  

// Close database
mysql_close($opendb); 
```

**信息：**

`$_POST['pos']`在隐藏输入中保存来自数据库的值。我选择将此值拆分`str_split($r['regnr'], 6);`为一个 JQuery 可排序列表。如果我输入`echo $value;`foreach 循环，我会从 JQuery 可排序列表中获得新值（未拆分，如我所愿）。我需要列表中的所有值，并使用`echo`. 但是，如果我使用`$value`变量来更新它来自的数据库，它只会使用 JQuery 可排序列表中的最后一个值进行更新。

有人可以解决吗？:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:54:30.083

**这是解决方案：**

```
$str = '';

foreach($_POST['pos'] as $value) {
  $str = $str.$value;
}

// Connect to database
$opendb = mysql_connect($dbhost, $dbuser, $dbpass) or die(mysql_error());
mysql_select_db($dbname) or die(mysql_error());

$new_value = "UPDATE users SET regnr='" . $str . "' WHERE username='" . mysql_real_escape_string($_COOKIE['username']) . "'";
mysql_query($new_value) or die(mysql_error());

// Close database
mysql_close($opendb); 
```

# c# - Linq 查询中的链式连接 (?)

> ID：15437980
> 
> 赞同：-1
> 
> 时间：2013-03-15T16:53:31.237
> 
> 标签：c#, linq, entity-framework

我很难相信我已经使用了这么长时间的 Linq 并且无法弄清楚这一点......我以前一定做过，但是我的大脑让我失望了。

我想做的事情的要点是

```
from a in A
join b in B on a.aId equals b.aId into Bees
join c in C on b.bId equals c.bId into Cees
select new { a.id, Bees, Cees } 
```

这可以做到吗？如果可以，怎么做？我得到“无法解析符号 b”，如果我在 c 加入条件下将 b 更改为 Bees，那当然是一个集合，所以我不能加入 id ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:55:21.770

```
from a in A
join b in B
on a.aId equals b.aId into Bees
from bs in Bees
join c in C 
on bs.bId equals c.bId into Cees
select new { a.Id, Bees, Cees }; 
```

类定义

```
class AA
{
    public int Id { get; set; }
    public int aId { get; set; }
}

class BB
{
    public int Id { get; set; }
    public int aId { get; set; }
    public int bId { get; set; }
}

class CC
{
    public int Id { get; set; }
    public int bId { get; set; }
} 
```

主程序

```
class Program
{
    static void Main(string[] args)
    {
        var A = new List<AA>();
        var B = new List<BB>();
        var C = new List<CC>();

        // make up some data
        var bid = 1;
        var cid = 1;
        for (var a = 1; a < 4; a++)
        {
            A.Add(new AA { Id = a, aId = a });

            for (var b = 1; b < 4; b++)
            {
                B.Add(new BB { Id = bid++, aId = a, bId = b });

                for (var c = 1; c < 4; c++)
                    C.Add(new CC { Id = cid++, bId = b });
            }
        }

        // display the item count for each list
        Console.WriteLine("A: {0}", A.Count());
        Console.WriteLine("B: {0}", B.Count());
        Console.WriteLine("C: {0}", C.Count());

        // define the query
        var abc = from a in A
                  join b in B
                  on a.aId equals b.aId into Bees
                  from bs in Bees
                  join c in C 
                  on bs.bId equals c.bId into Cees
                  select new { a.Id, Bees, Cees };

        // display the results of the query in the console
        foreach (var x in abc)
        {
            var bees = x.Bees.Count();
            var cees = x.Cees.Count();
            var str = String.Format("Id: {0}, Bees: {1}, Cees: {2} ", x.Id, bees, cees);
            Console.WriteLine(str);
        }
     }
} 
```

输出

```
A: 3
B: 9
C: 27

Id: 1, Bees: 3, Cees: 9
Id: 1, Bees: 3, Cees: 9
Id: 1, Bees: 3, Cees: 9
Id: 2, Bees: 3, Cees: 9
Id: 2, Bees: 3, Cees: 9
Id: 2, Bees: 3, Cees: 9
Id: 3, Bees: 3, Cees: 9
Id: 3, Bees: 3, Cees: 9
Id: 3, Bees: 3, Cees: 9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:00:23.380

请记住，当您到达该`join c`行时`b`，它并不存在，因为它在集合中`Bees`。由于您要使用其他 ID 加入，因此除了 中的 ID 之外`a`，不只有一个 ID 可以加入。您需要*为每个 Bees 集合*加入 b 和 c 。

```
from a in A
join b in B on a.aId equals  b.aId into Bees
select new { a.id, Bees, 
    Cees = from b in Bees 
    join c in C on b.bId equals c.bId
    select v} 
```

如果这不是进行组加入，而是进行常规加入，那将更有意义：

```
from a in A
join b in B on a.aId equals b.aId
join c in C on b.bId equals c.bId
select new { a.id, b, c} 
```

现在不知道您的问题的背景，很难说这是否有助于解决您的真正问题。

# servicestack - 为什么 ServiceStack 身份验证使用 cookie 而不是 sessionId 标头？

> ID：15437981
> 
> 赞同：4
> 
> 时间：2013-03-15T16:53:32.467
> 
> 标签：servicestack

我喜欢使用 ServiceStack，但一位同事提出了一个我无法回答的问题。Authentication 机制设置一个`ss-pid`和一个`ss-id`cookie，这里解释：[https ://github.com/ServiceStack/ServiceStack/wiki/Sessions](https://github.com/ServiceStack/ServiceStack/wiki/Sessions)

尝试访问受限资源时，需要提供这些 cookie，否则您将收到`401 Not Authorized`结果。

我的问题是这个。为什么使用 cookie 而不是包含`sessionId`或等效 cookie 值的自定义 HTTP 标头值？是不是因为cookie本身就有自己的机制来维护过期？在 HTTP 标头上使用 cookie 的设计决策是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T17:39:54.760

HTTP Cookie 具有固有的粘性，是通过 HTTP 维护会话的最合适方式。在服务器指示客户端添加 Cookie 后，客户端向同一服务器发出的每个后续请求也将保留该 cookie - 这就是启用客户端/服务器会话的原因。

# paypal - 新的 PayPal 沙盒 - 疯狂的事情

> ID：15437990
> 
> 赞同：3
> 
> 时间：2013-03-15T16:54:13.263
> 
> 标签：paypal

Paypal'guys 改变了一些东西。在新界面之前，我为了测试我的 IPN 服务器所做的是：

1.  转到 sandbox.paypal.com 并登录
2.  创建测试帐户（个人和企业）
3.  输入 sandbox.paypal.com 在 Profile 中设置 IPN url。

现在，我通过访问 developer.paypal.com 创建 2)。但是：当我转到沙盒站点并单击个人资料时，我再次被重定向到一个页面，上面写着“您必须登录”。我点击 url 并再次重定向到我已经登录的 developer.paypal.com。CRAZY！问题是：有人有同样的问题吗？有人可以帮助我了解 Paypal'guys 的变化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:27:34.997

是的，最近有一些主要的产品发布，其中包括一个新的开发者网站。为了进入 IPN 模拟器，只需执行以下操作：

1.  转到[http://developer.paypal.com](http://developer.paypal.com)并使用您的 paypal.com 凭据登录，而不是您的沙盒凭据
2.  登录后，转到“应用程序”选项卡，然后“IPN 模拟器”将列在左侧菜单中。

如果您遇到任何问题，请告诉我，

乔恩

# c# - 同一个 NHibernate Linq 查询中的 Cacheable()、FetchMany() 和 ToFuture()

> ID：15437992
> 
> 赞同：2
> 
> 时间：2013-03-15T16:54:13.270
> 
> 标签：c#, nhibernate, query-optimization, linq-to-nhibernate

有类似于以下示例的情况：

1 个父实体`Employee`有 2 个子集合：`Addresses`和`Phones`

我需要在`single roundtrip`所有员工中检索他们的地址和电话已初始化，并且还`cache the query`需要在 2 级缓存中使用`Cacheable()`.

使用：

```
var baseQuery = session
    .Query<Employee>()
    .Cacheable();

baseQuery
    .FetchMany(e => e.Addresses)
    .ToFuture();

var list = baseQuery
    .FetchMany(e => e.Phones)
    .ToFuture()
    .ToList(); 
```

应该工作，但我得到以下异常：

```
NHibernate.PropertyAccessException 
```

信息：

```
Exception occurred getter of NHibernateTest.Objects.Entity`1[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]].Id 
```

堆栈跟踪：

```
at NHibernate.Properties.BasicPropertyAccessor.BasicGetter.Get(Object target) in p:\nhibernate-core\src\NHibernate\Properties\BasicPropertyAccessor.cs:line 213
at NHibernate.Tuple.Entity.AbstractEntityTuplizer.GetIdentifier(Object entity) in p:\nhibernate-core\src\NHibernate\Tuple\Entity\AbstractEntityTuplizer.cs:line 139
at NHibernate.Persister.Entity.AbstractEntityPersister.GetIdentifier(Object obj, EntityMode entityMode) in p:\nhibernate-core\src\NHibernate\Persister\Entity\AbstractEntityPersister.cs:line 3890
at NHibernate.Persister.Entity.AbstractEntityPersister.IsTransient(Object entity, ISessionImplementor session) in p:\nhibernate-core\src\NHibernate\Persister\Entity\AbstractEntityPersister.cs:line 3676
at NHibernate.Engine.ForeignKeys.IsTransient(String entityName, Object entity, Nullable`1 assumed, ISessionImplementor session) in p:\nhibernate-core\src\NHibernate\Engine\ForeignKeys.cs:line 194
at NHibernate.Engine.ForeignKeys.GetEntityIdentifierIfNotUnsaved(String entityName, Object entity, ISessionImplementor session) in p:\nhibernate-core\src\NHibernate\Engine\ForeignKeys.cs:line 250
at NHibernate.Type.ManyToOneType.Disassemble(Object value, ISessionImplementor session, Object owner) in p:\nhibernate-core\src\NHibernate\Type\ManyToOneType.cs:line 137
at NHibernate.Impl.MultipleQueriesCacheAssembler.Disassemble(Object value, ISessionImplementor session, Object owner) in p:\nhibernate-core\src\NHibernate\Impl\MultipleQueriesCacheAssembler.cs:line 33
at NHibernate.Cache.StandardQueryCache.Put(QueryKey key, ICacheAssembler[] returnTypes, IList result, Boolean isNaturalKeyLookup, ISessionImplementor session) in p:\nhibernate-core\src\NHibernate\Cache\StandardQueryCache.cs:line 74
at NHibernate.Impl.MultiQueryImpl.ListUsingQueryCache() in p:\nhibernate-core\src\NHibernate\Impl\MultiQueryImpl.cs:line 749
at NHibernate.Impl.MultiQueryImpl.List() in p:\nhibernate-core\src\NHibernate\Impl\MultiQueryImpl.cs:line 415
at NHibernate.Impl.FutureQueryBatch.GetResultsFrom(IMultiQuery multiApproach) in p:\nhibernate-core\src\NHibernate\Impl\FutureQueryBatch.cs:line 24
at NHibernate.Impl.FutureBatch`2.GetResults() in p:\nhibernate-core\src\NHibernate\Impl\FutureBatch.cs:line 73
at NHibernate.Impl.FutureBatch`2.get_Results() in p:\nhibernate-core\src\NHibernate\Impl\FutureBatch.cs:line 31
at NHibernate.Impl.FutureBatch`2.GetCurrentResult[TResult](Int32 currentIndex) in p:\nhibernate-core\src\NHibernate\Impl\FutureBatch.cs:line 79
at NHibernate.Impl.FutureBatch`2.<>c__DisplayClass4`1.<GetEnumerator>b__3() in p:\nhibernate-core\src\NHibernate\Impl\FutureBatch.cs:line 63
at NHibernate.Impl.DelayedEnumerator`1.<get_Enumerable>d__0.MoveNext() in p:\nhibernate-core\src\NHibernate\Impl\DelayedEnumerator.cs:line 26
at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
at Tests.Tests.CacheableFetchManyAndToFutureTest() in D:\somepath\Tests.cs:line 262 
```

内部异常：

```
System.Reflection.TargetException 
```

信息：

```
Object does not match target type. 
```

堆栈跟踪：

```
at System.Reflection.RuntimeMethodInfo.CheckConsistency(Object target)
at System.Reflection.RuntimeMethodInfo.InvokeArgumentsCheck(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, Object[] index)
at NHibernate.Properties.BasicPropertyAccessor.BasicGetter.Get(Object target) in p:\nhibernate-core\src\NHibernate\Properties\BasicPropertyAccessor.cs:line 207 
```

如下查询不起作用，因为它会生成一个无效的笛卡尔积。有 1 名员工有 2 个地址和 2 部电话，数据库中的每个唯一地址和电话将在地址和电话集合中出现两次。在服务器收到结果后使结果不同并不是一个好的选择。

```
var list = session
    .Query<Employee>()
    .FetchMany(e => e.Addresses)
    .FetchMany(e => e.Phones)
    .Cacheable()
    .ToList(); 
```

仅使用`FetchMany()`and `ToFuture()`(no `Cacheable()`) 查询将在 1 次往返中正确返回具有相应地址和电话（无重复）的所有员工，但由于查询未缓存，因此不会对未来的相同请求进行优化：

```
var baseQuery = session
    .Query<Employee>();

baseQuery
    .FetchMany(e => e.Addresses)
    .ToFuture();

var list = baseQuery
    .FetchMany(e => e.Phones)
    .ToFuture()
    .ToList(); 
```

TLDR：如何检索具有在单次往返中初始化的地址和电话的所有员工，并将查询缓存在 2 级缓存中？感谢您的回复！

# php - 使被调用的 url 处理客户端 cookie 而不是调用方 cookie

> ID：15437995
> 
> 赞同：2
> 
> 时间：2013-03-15T16:54:23.113
> 
> 标签：php, session, cookies, curl, session-cookies

我正在制作一个处理`API`

所以我试图调用`API`使用`cURL`，问题是api将处理执行此curl调用的服务器cookie而不是使用应用程序的客户端cookie...

例如：客户端已经登录到api，但是当我检查客户端是否通过curl调用登录时，api响应你没有被授权

那么如何`API`与客户端 cookie 进行交易或将客户端的 cookie 传递给`API`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:59:20.447

您需要使用 cookiefile，如下所示：

```
 # Set the cookiefile name, which will allow us to store the cookie and present it later for all requests that require it...
        $cookiefile = tempnam("/tmp", "cookies");
        $agent     = "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)";

        # Set the user name and password values
        $user      = $argv[1];
        $password      = $argv[2];

        # The API url, to do the login
        $url = "https://some_site.com/login.php?WID=$user&PW=$password";

        # Initialise CURL
        $ch = curl_init();

        # Set all the various options
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_userAGENT, $agent);
        curl_setopt($ch, CURLOPT_POST, 0); // set POST method
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($ch, CURLOPT_COOKIEFILE, $cookiefile);
        curl_setopt($ch, CURLOPT_COOKIEJAR, $cookiefile);
        curl_setopt($ch, CURLOPT_userPWD, $user.":".$password);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);

        # Execute the first CURL request to perform the login...
        $results = curl_exec($ch);

        # Setup our next request...
        $job_id_number      = $argv[3];
        $url = "https://some_site.com/request.php?task=add&taskID=$job_id_number";

        # We do not have to initialise CURL again, however we do need to adjust our URL option for the second request...
        curl_setopt($ch, CURLOPT_URL, $url);

        #Remember to use the same cookiefile as above  
        curl_setopt($ch, CURLOPT_COOKIEFILE, $cookiefile);
        curl_setopt($ch, CURLOPT_COOKIEJAR, $cookiefile);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);

        # Execute the second CURL call  to perform the action (using the cookie we retrieved from earlier)
        $results = curl_exec($ch);

        echo "$results"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:00:25.530

您应该检查 API 的文档。也许文档描述了一种授权客户端的方法。

这样它就行不通了，因为 cookie 是在客户端（在浏览器中）设置的，而不是在您的服务器上。因此，当您进行 cURl 调用时，cookie 数据不会包含在请求中。通过 Javascript 的 API 调用可以工作，因为这是客户端发送的请求（带有所需的 cookie）

# php - 计算数据的数量并排列它们

> ID：15437996
> 
> 赞同：-4
> 
> 时间：2013-03-15T16:54:28.953
> 
> 标签：php, mysql

请有人可以帮我解决这个问题

我想计算数据库中的条目数并正确排序。就像在这个网站[www.songlyrics.com](http://www.songlyrics.com/)

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:56:46.640

```
SELECT COUNT(*) FROM TABLE 
```

会给你条目的数量。“正确排序”是什么意思？有关更多示例，请参阅 MySQL 文档页面。

[http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:59:09.613

数数 ：

```
Select Count(*) from table 
```

种类 ：

```
Select * from table order by songname   asc/desc 
```

歌曲名可以是任何字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:02:22.013

您可以尝试使用这个我的功能来完成您想要完成的工作。希望您与数据库的连接正常吗？

```
**function select_query($fields,$tables,$where="",$order_by="",$group_by="",$having="",$limit="") {   

    $sql_stat=" select $fields from $tables ";   

    if (!empty($where)) $sql_stat.="where $where ";   
    if (!empty($group_by)) $sql_stat.="group by $group_by ";   
    if (!empty($order_by)) $sql_stat.="order by $order_by ";   
    if (!empty($having)) $sql_stat.="having $having ";   
    if (!empty($limit)) $sql_stat.="limit $limit ";   

    return mysql_query($sql_stat) or mysql_error().",".mysql_errno();   
}** 
```

我希望你能解释一下？