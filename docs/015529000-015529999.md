# StackOverflow 问答 15529000-15529999

# deployment - 在 Windows XP、Windows 7、Windows 8 上安装 VB6 应用程序

> ID：15529001
> 
> 赞同：9
> 
> 时间：2013-03-20T16:15:45.070
> 
> 标签：deployment, vb6

我已经阅读了无数关于这个主题的帖子，但无法将我的大脑包裹在整个事情上。我有一个旧的 VB6 应用程序，它曾经安装在根目录的文件夹中。在该文件夹中有子文件夹：用于访问数据库的
**\data子文件夹**
**\quotes**将存储用户生成的 Word 文档的子文件夹和 **\backup**我的程序定期备份 mdb 的副本的位置

它工作得很好，生活很简单。现在，当我们尝试在 Windows 7 和 Windows 8 上安装时，程序会安装到程序文件 (x86) 文件夹中。程序运行良好，但所有数据库更新和 word 文件都存储在 users 文件夹中的虚拟存储中，这不是我们想要的。

我知道为什么会发生这种情况，并且我知道我需要修改我的程序以适应 Windows 7/8。有人可以就以下操作给我一个明确的解释/建议：

我知道“用户”下的 appdata 文件夹是存储数据库/word 文件/备份的推荐位置。但是，在我隐藏的系统上，我希望用户可以轻松访问它（不隐藏），所以我在想 MyDocuments 文件夹？

我读过这个帖子：[我应该在哪里存储应用程序特定的设置？](https://stackoverflow.com/questions/4273424/where-should-i-store-application-specific-settings/4275821#4275821)这让我对如何在代码中找到文件/位置有了一些了解，尽管目前尚不清楚如何找到 MyDocuments。 **任何人都可以帮忙吗？**

这是我变得更加困惑的地方。如果我想使用 MyDocuments\CompanyName 之类的东西，甚至是上面链接中提到的 Appdata 文件夹， **我如何告诉包/部署向导将 mdb 文件和上面提到的文件夹安装到这个特定文件夹中？** 我可以使用 PDW 中的 Appdata 或 MyDocuments 文件夹的宏吗？我在 XP 机器上，所以我的路径与 Windows 7/8 机器不同。

任何帮助/见解将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T21:58:07.890

> 我知道为什么会发生这种情况，并且我知道我需要修改我的程序以适应 Windows 7/8。

好，那我会尽量不打死马（虽然这是我经常喜欢给一个很好的鞭打，因为很多人误解它）。我只想指出，即使在旧版本的 Windows 上，您的程序也能正常运行，这是一个潜在错误的幸运结果。“Program Files”文件夹从来都不是可写的。您不只是在解决较新版本的 Windows 的一些愚蠢的“问题”。这是从一开始就应该做的事情。

> 我知道“用户”下的 appdata 文件夹是存储数据库/word 文件/备份的推荐位置。但是，在我隐藏的系统上，我希望用户可以轻松访问它（不隐藏），所以我在想 MyDocuments 文件夹？

我知道这很复杂，所以让我看看是否可以尝试使其尽可能简单……

“**应用程序数据”**文件夹用于存储供您的应用程序内部使用的数据，而*不是*供用户直接查看或操作的数据。

“**我的文档”**文件夹用于存放用户应该能够看到和直接操作的所有内容；换句话说，*用户*数据而不是*应用程序*数据。

然后还有这两种文件夹类型的每个用户和全局变体。在“应用程序数据”的情况下，每个用户的变体进一步细分为本地（仅保留在本地计算机上）和漫游（跟随用户帐户到她登录的网络上的任何计算机）。

因此，如果您希望文件“易于用户访问”，那么您绝对应该使用“我的文档”文件夹。这就是它的用途——用户文档。

存在所有这些复杂规则的原因是，微软和 Adob​​e 等流行供应商的行为不端的应用程序有（有？）倾向于将垃圾转储到用户的“我的文档”文件夹中，用户从未打算与之交互的东西直接地。然后，用户将打开他们的文档文件夹并看到一堆他们从未放在那里的东西。*“这些都是什么东西？这些不是我的。我的文件呢？”* 上周我更新她的电脑时，我妈妈刚刚问过我这个问题。

> 目前尚不清楚如何找到 MyDocuments。任何人都可以帮忙吗？

从VB 6？简单的方法是[Bob](https://stackoverflow.com/a/3073836/366904)和[Mark](https://stackoverflow.com/a/4275821/366904)在您查看的问题中建议的方法。这涉及创建一个 Shell 对象并查询它以获取您感兴趣的文件夹的位置。

缺少的部分是与“我的文档”文件夹对应的常量。您将在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774096.aspx)找到完整的常量列表。您想要的名称`ssfPERSONAL`（因为在过去创建此 API 时，Windows 不那么友好，并且尚未发明“我的文档”名称），其值为`&H05`. 所以代码看起来像：

```
Const ssfPERSONAL = &H05

Dim strMyDocsPath As String
strMyDocsPath = CreateObject("Shell.Application").NameSpace(ssfPERSONAL).Self.Path 
```

> 如果我想使用 MyDocuments\CompanyName 之类的东西，甚至是上面链接中提到的 Appdata 文件夹，我如何告诉包/部署向导将 mdb 文件和上面提到的文件夹安装到这个特定文件夹中？我可以使用 PDW 中的 Appdata 或 MyDocuments 文件夹的宏吗？

[Bob 在他的回答](https://stackoverflow.com/a/15534928/366904)中没有涵盖的内容不多，除了建议您在更新此 VB 应用程序时，您还可以考虑放弃过时的 PDW 以支持更好的安装程序。

就个人而言，我是[Inno Setup](http://www.jrsoftware.org/isinfo.php)的忠实粉丝*，*它是一个免费的 Windows 应用程序安装实用程序，它提供的功能比你能动摇的还要多。它适用于 VB 6 应用程序。我自己为此使用了很多次。我认为它相当容易使用，至少对于基础来说是这样。它支持各种高级自定义，如果您没有通过阅读文档来很好地学习，其中一些可能会很棘手，但这一切都非常可行。我什至偶然发现了编写 Delphi 代码来自定义 Inno Setup 项目的方式！

[在 Inno Setup 中，您可以使用预定义的常量](http://www.jrsoftware.org/ishelp/topic_consts.htm)之一访问系统文件夹的路径。例如，`{userdocs}`和`{commondocs}`。这些工作很像 PDW 中的宏（如果不完全像，那已经很长时间了）。

当然，这仍然不能解决 Bob 正确指出的问题：用户的“我的文档”文件夹的概念对于安装程序并没有多大意义。当然，您可以访问*全局*（公共）“我的文档”文件夹，因为它在所有用户之间共享，但这可能不是您想要的。安装程序应该能够由任何具有足够权限的用户运行，实际上这通常是一个管理员帐户，不同于用于运行应用程序的常规用户帐户。您不能在设置期间假设特定的用户帐户，您的设计必须考虑到这一点。

在我看来，“模板”方法对您来说是个好方法。用于设置新用户帐户的完整文件集可以存储在“Program Files”文件夹中。这实际上是一个很好的地方，因为它在那里得到了很好的保护，不会被错误修改，而且你只会*阅读*从中可以保证您拥有必要的权限。当应用程序在新用户帐户下首次启动时，它可以检测到这一事实并提供设置新用户帐户以与应用程序一起使用。此时，您知道您在正确的用户帐户下运行，因此您可以使用上面的代码查询该用户的“我的文档”文件夹的位置。将所需的文件夹结构全部设置在“程序文件”中应用程序文件夹的子目录中，设置新用户帐户就像复制该文件夹一样简单。如果您需要从用户那里收集信息或提供自定义选项，您可以编写一个小的“首次运行向导”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T21:18:35.790

> 我知道“用户”下的 appdata 文件夹是存储数据库/word 文件/备份的推荐位置。但是，在我隐藏的系统上，我希望用户可以轻松访问它（不隐藏），所以我在想 MyDocuments 文件夹？

这两个都是每个用户数据的位置。因此，您的安装程序不能在此处放置任何内容，因为在正常情况下，它甚至不会在目标运行时用户下运行，并且不知道该数据的目标是哪一个。

相反，您需要决定哪些文件是每台计算机的，哪些是每用户的。任何每用户文件都应由您的应用程序在“首次运行”时创建或复制，它通常应通过检查每用户应用程序文件夹中是否存在每用户 INI 文件来检测（它还需要创建）在 LocalAppData 下。

每台机器的文件进入安装程序在 ProgramData (CommonAppData) 下创建的文件夹。在大多数情况下，您的安装程序不仅需要创建此“公司/应用程序”子文件夹，还需要在文件夹上设置安全性，以允许用户对放置在那里的项目具有所需的访问权限。然后安装程序可以将任何已部署的每台机器数据（如设置文件、MDB 等）放入此文件夹。

一个例外可能是您的首次运行操作复制到用户配置文件中的每台机器“模板”文件，或在应用程序生命周期内只读的其他数据。这些仍然可以转储到 EXE 旁边的 Program Files 子文件夹中（或子文件夹等）。

PDW 太旧太原始，无法完成所有所需的安装活动。这并不意味着您不能破解 setup1.vbp（通过安装 VB6 和 PDW 提供）来进行自定义 setup1。但通常这不值得麻烦，因为您无法扩展 PDW 的“向导”以拥有新屏幕并接受新信息。

随着 Windows Installer 在 1998 年问世，Microsoft 发布了一个名为 Visual Studio 6.0 Installer 1.0（以及一年后的 1.1）的免费更新工具来补充/替换 PDW。

Microsoft 不再托管包含 VSI 1.1 的两个下载文件，尽管您可能仍会找到由 3rd 方托管的副本（尽管病毒扫描类似）。

您还可以在更新版本的 Visual Studio 中使用 Installer 项目类型（尽管我相信他们从 VS 2012 开始使用它）。还有诸如 WiX 工具套件和基于第 3 方安装程序的工具之类的东西。

但即使使用 VSI 1.1，您也会发现许多需要让您的包执行的操作无法在 VSI 1.1 中指定，这意味着您必须对 MSI 数据库进行一些构建后的调整。您可以使用 Installer SDK 中的 Orca 或通过使用 Windows Installer 的自动化界面进行这些构建后编辑的 WSH 脚本来执行此操作。

> 我读过这个帖子：我应该在哪里存储应用程序特定的设置？这让我对如何在代码中找到文件/位置有了一些了解，尽管目前尚不清楚如何找到 MyDocuments。任何人都可以帮忙吗？

您可以通过其自动化接口或 API 调用使用 Shell 操作。该位置是通过 、 或 常量请求的`ssfPERSONAL`，`CSIDL_PERSONAL`具体`FOLDERID_Documents`取决于您决定进行哪个调用来获取它。

# iphone - iOS UIPickerView 在选择栏上设置图标

> ID：15529005
> 
> 赞同：0
> 
> 时间：2013-03-20T16:15:52.687
> 
> 标签：iphone, ios, uipickerview

我想在我的 UIPickerView 选择行上有一个自定义图标，如下图所示。![自定义 UIPickerView 选择图标](../Images/86338de3406ebaf2ebc69a7188f700dd.png)

我想在图像上添加红色 x 中的图标，但我不知道该怎么做或是否可以做到。我可以设置我的自定义行视图，但是这个自定义视图将被放置在所有行上，而不是只放在选择上..

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:27:39.097

`UIImageView`使用 X 图标创建三个对象。将它们添加到`UIPickerView`.

# c# - 从 TimerCallback 函数更新 UI 线程 Windows Phone 8

> ID：15529006
> 
> 赞同：1
> 
> 时间：2013-03-20T16:15:53.790
> 
> 标签：c#, multithreading, windows-phone-8

这里有点难过。

我有一个每 10 秒触发一次的 TimerCallback，其中包含要放在地图上的地理点。我尝试从计时器回调函数中将这些添加到地图中，但是由于它位于不同的线程中，因此我无法执行此操作。我收到以下错误：

> mscorlib.ni.dll 中发生了“System.IO.FileNotFoundException”类型的异常，并且在托管/本机边界之前未处理。
> 
> System.Windows.ni.dll 中出现“System.UnauthorizedAccessException”类型的第一次机会异常

我该如何规避呢？我认为可能添加一个 NotifyCollectionChanged 侦听器会起作用，但是我仍然遇到同样的问题。代码如下所示。

```
 private ObservableCollection<Bus> _busList;
    private Timer _timer = null;
    public ItemViewModel route;

    public ObservableCollection<Bus> BusList
    {
        get { return _busList; }
        set { _busList = value; }
    }
    //public LocationManager locMan = LocationManager.Instance;
    // Constructor
    public DetailsPage()
    {
        InitializeComponent();

        // Sample code to localize the ApplicationBar
        //BuildLocalizedApplicationBar();
    }

    // When page is navigated to set data context to selected item in list
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        route = null;
        if (DataContext == null)
        {
            string selectedIndex = "";
            if (NavigationContext.QueryString.TryGetValue("selectedItem", out selectedIndex))
            {
                int index = int.Parse(selectedIndex);
                DataContext = App.ViewModel.Items[index];
                route = App.ViewModel.Items[index];
                if (_timer == null)
                {
                    TimerCallback tcb = obtainJSON;
                    _timer = new Timer(tcb, route.RouteID, 0, 10000);
                }
                else
                {
                    _timer.Change(0, 10000);
                }
                if (BusList == null)
                {
                    BusList = new ObservableCollection<Bus>();
                }
                else
                {
                    BusList.Clear();
                }
                BusList.CollectionChanged += HandleBusAdded;
            }
        }
    }

    private void HandleBusAdded(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == NotifyCollectionChangedAction.Reset)
        {
            Debug.WriteLine("Everything was cleared");
        }
        else
        {
            foreach (Bus item in e.NewItems)
            {
                Debug.WriteLine(item.vehicleID);
                Polygon polygon = new Polygon();
                polygon.Points.Add(new Point(0, 0));
                polygon.Points.Add(new Point(0, 75));
                polygon.Points.Add(new Point(25, 0));
                polygon.Fill = new SolidColorBrush(Colors.Blue);

                // Create a MapOverlay and add marker
                MapOverlay overlay = new MapOverlay();
                overlay.Content = polygon;
                overlay.GeoCoordinate = new GeoCoordinate(item.lat, item.lng);
                overlay.PositionOrigin = new Point(0.0, 1.0);
                MapLayer mapLayer = new MapLayer();
                mapLayer.Add(overlay);
                //mapView.Layers.Add(mapLayer);

                this.Dispatcher.BeginInvoke(() =>
                {
                    mapView.Layers.Add(mapLayer);
                });
            }
        }

    }

    public void obtainJSON(Object stateInfo)
    {

        string url = "http://xxx.xxx.xxx" + stateInfo.ToString();
        var client = new WebClient();
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(Decrypt);
        client.DownloadStringAsync(new Uri(url));
    }

    public void Decrypt(Object sender, DownloadStringCompletedEventArgs e)
    {
        if (BusList.Count > 0)
        {
            BusList.Clear();
        }
        if (!e.Cancelled && e.Error == null)
        {
            var temp = new List<string>();
            string[] buses = e.Result.Split('\n');
            foreach (string bus in buses)
            {
                if (!string.IsNullOrWhiteSpace(bus) && !string.IsNullOrEmpty(bus))
                {
                    temp.Add(bus);
                }
            }
            foreach (string item in temp)
            {
                string[] busInfo = item.Split(',');
                Bus newBus = new Bus(busInfo[0], busInfo[1], busInfo[2]);
                BusList.Add(newBus);

            }

            // This is where I initially tried
            /*Polygon polygon = new Polygon();
            polygon.Points.Add(new Point(0, 0));
            polygon.Points.Add(new Point(0, 75));
            polygon.Points.Add(new Point(25, 0));
            polygon.Fill = new SolidColorBrush(Colors.Blue);

            // Enable marker to be tapped for location information
            // polygon.Tag = new GeoCoordinate(BusList[0].lat, BusList[0].lng);

            // Create a MapOverlay and add marker
            MapOverlay overlay = new MapOverlay();
            overlay.Content = polygon;
            overlay.GeoCoordinate = new GeoCoordinate(BusList[0].lat, BusList[0].lng);
            overlay.PositionOrigin = new Point(0.0, 1.0);
            MapLayer mapLayer = new MapLayer();
            mapLayer.Add(overlay);

            this.Dispatcher.BeginInvoke(() =>
            {
                mapView.Layers.Add(mapLayer);
            });*/
            Debug.WriteLine("Present buses " + BusList[0].vehicleID + ", " + BusList[1].vehicleID);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:36:54.463

最简单的事情是将您的`obtainJSON`方法中发生的事情包装在一个匿名函数中，该函数被分派回 UI 线程：

```
public void obtainJSON(Object stateInfo)
{    
    Dispatcher.BeginInvoke(() => { 
        string url = "http://xxx.xxx.xxx" + stateInfo.ToString();
        var client = new WebClient();
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(Decrypt);
        client.DownloadStringAsync(new Uri(url));
    });    
} 
```

这将意味着所有事情（发出 Web 请求和处理响应，因为`WebClient`现在执行它在调用它的线程上的回调）都发生在 UI 线程上，因此您不会更新从不​​同的 UI 线程绑定到的对象线。

您也可以尝试使用 a`DispatcherTimer`而不是 threading 。

您还应该注意处理糟糕的网络条件，其中请求将在 10 秒以上后超时，并且您最终可能会运行多个请求 - 这对您来说可能是也可能不是问题。

# php - 使用 XDebug 在 Eclipse Juno 2013 中运行和调试 PHP

> ID：15529008
> 
> 赞同：0
> 
> 时间：2013-03-20T16:16:05.643
> 
> 标签：php, windows, apache, xdebug, eclipse-juno

真的那么难吗？我只是想设置和配置我的 web 开发环境。
我在 Windows 上运行了一段时间的 Apache 2.4，并且一直在使用 Notepad++，只是为了避免使用 Eclipse。但有时我真的需要像在 Visual Studio 中那样设置断点等来进行调试。
这是我得到的：

*   Windows 7的
*   阿帕奇 2.4
*   日蚀朱诺
*   XDebug 2.2.1
*   PHP 5.4.13
*   日蚀 PDT

现在我整天都在想如何运行一个简单的脚本作为
echo "Hello World";
这似乎是不可能的工作：
[http](http://puu.sh/2kSuM)
: //puu.sh/2kSuM 在我的 Apache 的 htdocs 文件夹中没有 Test/index.php。我知道它正在寻找那个。但是我想要的只是调试这个脚本，为什么这么难实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:24:04.860

Notepad++ 支持使用 DBGP 进行交互式调试。谷歌搜索

```
notepad++ xdebug php 
```

但是在 Eclipse 中使用它也很容易。最简单的入门方法是安装 WampServer [http://www.wampserver.com/en/](http://www.wampserver.com/en/)，它内置了 XDEBUG 并为您正确配置。

谷歌搜索

```
eclipse pdt xdebug 
```

将为您提供简单的入门教程。

# javascript - 如何使用 ASP.NET MVC4 Razor 项目中 web.config 文件中的值更新 JavaScript？

> ID：15529010
> 
> 赞同：5
> 
> 时间：2013-03-20T16:16:07.807
> 
> 标签：javascript, asp.net, asp.net-mvc

是否可以在 ASP.NET MVC4 Razor 项目的 JavaScript 文件中使用 web.config 设置，例如下面的“serverPath”？

```
<appSettings>
  <add key="serverPath" value="http://myserver" />
</appSettings> 
```

我想根据调试或发布模式更改以下 jQuery ajax 调用的 URL

```
 var request = $.ajax({
    url: 'http://myserver/api/cases',
    type: 'GET',
    cache: false,
    dataType: 'json'
  }); 
```

是否可以像 View 一样从 web.config 读取值并将其替换为 .js 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T16:25:27.837

另一种方法是拥有一个 js 文件，其中包含您的配置，就像 web.config 为 .net 网站所做的那样：

`configuration.js`：

```
var configuration = {
    apiurl: 'http://myserver/api/',
    someOtherSetting: 'my-value'
}; 
```

好吧，您可以将此配置作为 javascript 写入您的页面，也可以链接到脚本或合并并缩小到一个通用文件中。它将成为您部署过程的一部分。

然后像使用任何 js 对象一样使用它：

```
var request = $.ajax({
    url: configuration.apiurl,
    type: 'GET',
    cache: false,
    dataType: 'json'
}); 
```

或者它的一些变体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:17:17.017

当然，在您的视图中使用它：

```
@ConfigurationManager.AppSettings["serverPath"] 
```

要传递到外部 js 文件，您需要您的函数有一个参数并通过您的视图调用它：

```
<script type="text/javascript">
    getData('@ConfigurationManager.AppSettings["serverPath"]');
</script> 
```

当你的 js 文件有这样的内容时：

```
function getData(path) {
    var request = $.ajax({
        url: path,
        type: 'GET',
        cache: false,
        dataType: 'json'
    });

    return request;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:18:55.437

理想情况下，您会读取控制器中的值：

```
var serverPath = ConfigurationManager.AppSettings.Get("serverPath"); 
```

然后使用该值设置视图模型的属性

```
myViewModel.ServerPath = serverPath;
return View(myViewModel); 
```

在视图中只需将其输入 JS：

```
var request = $.ajax({
    url: '@(Model.ServerPath)',
    type: 'GET',
    cache: false,
    dataType: 'json'
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T16:18:11.860

试试这个：

```
var request = $.ajax({
    url: '@(ConfigurationManager.AppSettings["serverPath"])',
    type: 'GET',
    cache: false,
    dataType: 'json'
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-24T15:11:18.710

您可以通过以下方式为 ASP.NET MVC4 Razor 执行此操作：

```
@{
    var apiBaseUrl = ConfigurationManager.AppSettings.Get("ApiBaseUrl");
}

<script type="text/javascript">
    $(document).ready(function() {

      var request = $.ajax({
          url: '@apiBaseUrl/cases',
          type: 'GET',
          cache: false,
          dataType: 'json'
      });

    });
</script> 
```

# ios - UIScrollView 分页加载子视图比滚动慢，如何取消手势，延迟，..？

> ID：15529013
> 
> 赞同：0
> 
> 时间：2013-03-20T16:16:14.910
> 
> 标签：ios, uiscrollview, gesture, scroll-paging

当通过滚动视图快速滚动时，我不确定内容是否加载得不够快或绘图被跳过，因为我通过检查 scrollViewDidEndDecelerating 生成新的子视图：（有更好的方法吗？）不需要快速滚动！- 我只是想解决它引起的问题。

更长的解释：我有一个滚动视图，内容很大并且启用了分页。对于给定的页面，添加三个子视图，其框架原点为 -1、0、+1 倍框架大小（因此中间框架可见，其他是下一页和上一页）。Frame -1 和 +1 是 ImageViews，Frame 0 是另一个 UIScrollView，有自己的 ImageView 子视图。它们不是子类。

出于性能原因，我的方法是检查滚动是否向前或向后移动，并且只加载新图像，因为另外两个已经加载，我存储它们，例如“UIImage *tempImg1 = previousPageImageView.image”并从那里获取它们一旦添加了子视图。

现在快速滚动会导致新图像不会出现，但更糟糕的是，程序会混淆它应该在哪个索引处并崩溃。我用小图片尝试过，但同样的问题。

不一定允许用户快速滚动，一旦开始页面移动直到加载完成，忽略进一步的滑动手势可能就足够了。

非常感谢您的想法。

页面加载：

```
-(void)loadSVforPage:(int)page
{
    int nextSVpage = page +1;
    int previousSVpage = page -1;
    int numberOfAssets = assets.count;

    ALAsset *displayAsset;
    ALAssetRepresentation *assetRep;
    CGFloat SVwidth = scrollLarge.frame.size.width;
    CGFloat SVheight = scrollLarge.frame.size.height;

    UIImage *tempImg1;
    UIImage *tempImg2;
    UIImage *tempImg3;
    UIImage *displayed;

    if (page != currentpage)
    {

        // if moves are +1 or -1 use temp images, else load all
        if (page == currentpage +1) // moving forward
        {
            //NSLog(@"page+");
            tempImg1 = nextSVImg;   // the former "next", which now becomes current
            tempImg3 = currentSVImg;  // the former "current", which now becomes previous

            if ((page+1 >=0) && (page+1 <= assets.count-1))  
            {
                displayAsset = [assets objectAtIndex:page+1];  // the "new next" image 
                assetRep = [displayAsset defaultRepresentation];
                tempImg2 = [ImageProcessing fullSizeImageForAssetRepresentation:assetRep];
            }
        }
        else if (page == currentpage -1) // moving backwards

        ....
        ....
        ....

        // LOAD PAGE+1 

        if (nextSVpage <= numberOfAssets-1)
        {
            displayed = tempImg2;

                nextSVImg = displayed;  // store the image for future scrolls

                CGRect frame = CGRectMake(nextSVpage * SVwidth, 0, SVwidth, SVheight);

                //old code adding UIImageViews
                //------------------------------
                //nextScrollImageView = [[UIImageView alloc]initWithFrame:frame];
                //[completeScrollableImageView addSubview:nextScrollImageView];
                //nextScrollImageView.image = displayed;

                // new code with subclassed UIView and image in drawRect
                //-------------------------------
                scrollUIViewNext = [[scrollviewImage alloc]initWithFrame:frame andImage:displayed];
                [completeScrollableImageView addSubview:scrollUIViewNext];

                ....
                ....
                .... 
```

触发负载：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    if (scrollView.tag == 0)  // the base SV
    {
        int pageNumber = floor(scrollView.contentOffset.x / scrollView.frame.size.width + 0.5);//+1;
        if (pageNumber != currentpage)
        {
            //NSLog(@"moved from current %i to %i",currentpage,pageNumber);
            [self loadSVforPage:pageNumber];
        }
    } 
} 
```

# android - 使用 JDBC 和 android 应用程序时如何解决“CommunicationsException: Communications link failure”

> ID：15529015
> 
> 赞同：0
> 
> 时间：2013-03-20T16:16:23.973
> 
> 标签：android, jdbc

当我尝试将我的 java 程序连接到服务器时，我得到了这个异常：

```
CommunicationsException: Communications link failure 
The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server. 
```

所以我找到了这些说明：

> 如果您收到 SQLException: Connection denied 或 Connection timed out 或 MySQL 特定的 CommunicationsException: Communications link failure，则意味着根本无法访问数据库。这可能有以下一种或多种原因：
> 
> 1.  JDBC URL 中的 IP 地址或主机名错误。
> 2.  本地 DNS 服务器无法识别 JDBC URL 中的主机名。
> 3.  JDBC URL 中的端口号缺失或错误。
> 4.  数据库服务器已关闭。
> 5.  数据库服务器不接受 TCP/IP 连接。
> 6.  数据库服务器已用完连接。
> 7.  Java 和 DB 之间的某些东西正在阻止连接，例如防火墙或代理。
> 
> 要解决其中一个问题，请遵循以下建议：
> 
> 1.  使用 ping 验证和测试它们。
> 2.  刷新 DNS 或改用 JDBC URL 中的 IP 地址。
> 3.  根据 MySQL DB 的 my.cnf 进行验证。
> 4.  启动数据库。
> 5.  验证 mysqld 是否在没有 --skip-networking 选项的情况下启动。
> 6.  重新启动数据库并相应地修复您的代码，使其最终关闭连接。
> 7.  禁用防火墙和/或配置防火墙/代理以允许/转发端口。

从[这个](https://stackoverflow.com/questions/2839321/java-connectivity-with-mysql/2840358#2840358)答案。

我尝试了每个选项，但我不确定如何使用“my.ini”配置文件验证端口号（选项 3）。另外，我发现 services.msc 列表中缺少“MySQL”服务，但我确实发现使用了 3306 端口。它与问题有关吗？'my.ini' 配置文件应该是什么样子？我使用 MySQL Workbench 5.2.47。（MySQL 服务器版本为 5.6）。

我的连接代码：

```
 private MySQLConnectivity() { 

try { Class.forName("com.mysql.jdbc.Driver"); Connect(); 
} catch (ClassNotFoundException e) 
{ // TODO Auto-generated catch block e.printStackTrace(); } 
} 
public void Connect() { try { MySQLConnectivity.Conn = (Connection)DriverManager.getConnection(URL, USER, PASS);
 } catch (SQLException e) 
{ // TODO Auto-generated catch block e.printStackTrace(); 
} finally { } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-19T04:59:07.687

我使用最新版本的 adt 和`mysql-connector-java-5.1.17-bin.jar`，这对我有用：

之后将以下代码添加到您的 mafile 中`setContentView(R.layout.activity_main)`；

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

并使用`import android.os.StrictMode;`

如果您使用新的 api，请添加`@SuppressLint("NewApi");`

# php - phpThumb 调整为固定高度但动态宽度？

> ID：15529017
> 
> 赞同：0
> 
> 时间：2013-03-20T16:16:32.650
> 
> 标签：php, gd, phpthumb

我正在使用 phpThumb（主要是因为出色的反射插件）并且需要将图像调整到特定高度，并且自动处理宽度（动态）。

查看文档，似乎需要宽度和高度参数： [https ://github.com/masterexploder/PHPThumb/wiki/Basic-Usage](https://github.com/masterexploder/PHPThumb/wiki/Basic-Usage)

有什么办法可以解决这个问题，还是我必须求助于通常的 GD 图像方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:19:59.953

我不确定您的意思，`the usual GD image method`但如果您使用[`getimagesize`](http://php.net/manual/en/function.getimagesize.php)（是的，GD ...）来获取图像尺寸，您可以轻松计算新宽度并像现在一样使用 phpThumb。

# c# - 事件仅从第二次触发

> ID：15529018
> 
> 赞同：1
> 
> 时间：2013-03-20T16:16:33.083
> 
> 标签：c#, winforms, gridview, event-handling, keydown

在必须只接受数字的网格视图中有一个文本框类型列“数量”。如下所示。代码运行良好，但仅来自第二个输入。我只想在这里使用keydown。

```
private void GridViewSale_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{     
  if (GridViewSale.CurrentCell.ColumnIndex == 4) //Allow only numbers for QTY column
    {
      TextBox Qty = e.Control as TextBox;
      Qty.KeyDown += new KeyEventHandler(Qty_KeyDown);
    }
}
void Qty_KeyDown(object sender, KeyEventArgs e)
{         
  if ((e.KeyValue >= 48 && e.KeyValue <= 57) || (e.KeyValue >= 96 && e.KeyValue <= 105)//Allows numerics
    e.SuppressKeyPress = false;
  else
    e.SuppressKeyPress = true;           
  } 
```

1.我是否应该在其他地方（如 form_load..）调用事件处理程序来处理每个输入？
2\. 如果我必须禁用修饰符输入 (SHIFT+1,SHIFT+2)，我应该如何在此处编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:32:01.563

找到了这种行为的原因：任何 keydown（char、num 或符号）第一次直接进入 'EditingControlShowing' 方法而不是 'KeyDown'。所以输入已经被采用，因此问题。我解决了这个问题。解决方法。（将 KeyDown 替换为 PreviewKeyDown 并添加了 CellBeginEdit，以在单元格进入编辑模式之前检查键值：

```
private void GridViewSale_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
  {
    if (GridViewSale.CurrentCell.ColumnIndex == 4)//Allow only nums for QTY col.
          {
              TextBox Qty = e.Control as TextBox;
              Qty.KeyDown -= OnlyNums_KeyDown;
              Qty.KeyDown += OnlyNums_KeyDown;
          }
  }
private void GridViewSale_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
  {
     if ((e.KeyValue >= 48 && e.KeyValue <= 57) || (e.KeyValue >= 96 && e.KeyValue <= 105))
          {
              //Do Nothing
          }
          else
          {
              cancelEdit = true;
              GridViewSale.CellBeginEdit -= GridViewSale_CellBeginEdit;
              GridViewSale.CellBeginEdit += GridViewSale_CellBeginEdit;
          }
      }
private void GridViewSale_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
  {
      if (cancelEdit == true)
      {
          e.Cancel = true;
          cancelEdit = false;
      }
  } 
```

[我的第二个问题仍然没有回答]。

# gwt - 调度传入 RPC 调用时出现异常

> ID：15529020
> 
> 赞同：0
> 
> 时间：2013-03-20T16:16:34.837
> 
> 标签：gwt, hadoop, rpc, gwt-rpc

在我的服务器逻辑中，我试图调用 map reduce 作业。

```
KMeansClustering.startClustering(centerForClustering); 
```

我一直收到这个错误，不知道为什么

```
[WARN] Server class 'org.kmeans.clustering.VectorWritable' could not be found in the web app, but was found on the system classpath
   [WARN] Adding classpath entry 'file:/Users/yeshwanthvenkatesh/Documents/Hadoop/Research/KMeansClustering/bin/' to the web app classpath for this session
   For additional info see: file:/Applications/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.5.0/gwt-2.5.0/doc/helpInfo/webAppClassPath.html
Starting Jetty on port 8888
   [WARN] Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract edu.neu.scolopax.web.client.entities.PlotSetOutput edu.neu.scolopax.web.client.SummaryGenerationService.generateSummary(edu.neu.scolopax.web.client.entities.PlotSetInput)' threw an unexpected exception: java.lang.NullPointerException
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:389)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:579)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: java.lang.NullPointerException
    at org.kmeans.clustering.KMeansClustering.startClustering(KMeansClustering.java:170)
    at edu.neu.scolopax.web.server.SummaryGenerationServiceImpl.generateSummary(SummaryGenerationServiceImpl.java:73)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
    ... 22 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:37:31.577

相关异常发生在从中调用的集群代码中。

73号线**`edu.neu.scolopax.web.server.SummaryGenerationServiceImpl.generateSummary`**

170 号线**`org.kmeans.clustering.KMeansClustering.startClustering`**

1.  在您的 KMeansClustering 类中添加调试日志。

2.  在当前的 eclipse 项目中添加用于集群的源项目作为依赖项目。

# javascript - coffeescript 和 jquery 为背景图片生成完整的 url？

> ID：15529028
> 
> 赞同：2
> 
> 时间：2013-03-20T16:16:48.390
> 
> 标签：javascript, jquery, coffeescript, jasmine

我正在尝试使用咖啡脚本和 jquery 设置 div 的背景图像。我从表单中的 DOM 中的数据源获取图像 url `/images/album_image1.jpg`。

但是，当我使用：

```
$('.selector').css({'backgroundImage', "url(#{image_url}"}) 
```

CoffeeScript/jQuery 生成一个带有主机的 URL：

```
url(http://host.com/images/album_image1.jpg) 
```

此外，Firefox 会将 URL 括在引号中，而 Chrome 不会引用 URL。

见这里：[JSBin](http://jsbin.com/adicol/6/edit "JS斌")

我想得到结果`url(/images/album_image1.jpg)`，即没有主机部分和引号。我希望得到后一个结果，以便通过我使用 Jasmine 的测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:19:12.363

好吧，因为您是 javascipt，所以您希望输出文本`'+something+'`：

```
 var image_url = $('img').data('img');
 image_url = str.split(".com"); //split returns an array of everything after the regex: .com
 image_url = image_url[1];
 $('.selector').css('backgroundImage', "url("+image_url+")"); 
```

**编辑**

```
 So if you want to remove the leading url from the returned string you would use split:

 var str = 'http://jsbin.com/images/image_album1.jpg'
 str = 
 image_url = str.split(".com"); //split returns an array of everything after the regex: .com
 str[1]; ///images/image_album1.jpg 
```

希望这可以帮助？但我也更新了上面的内容，所以它对你的情况很有帮助。

# objective-c - 这个静态单例成员是如何在 Obj-C 中设置的？

> ID：15529029
> 
> 赞同：0
> 
> 时间：2013-03-20T16:16:53.587
> 
> 标签：objective-c, static-members

我刚刚对公共库中使用的代码进行了分析，XCode 指出了以 [[[self alloc] 开头的行存在问题：

```
static MyClass *_sharedInstance = nil;

+ (MyClass*)sharedInstance
{
    if (_sharedInstance != nil) {
        return _sharedInstance;
    }

    @synchronized(self) {
        if (_sharedInstance == nil) {
            [[[self alloc] init] autorelease];
        }
    }

    return _sharedInstance;
} 
```

当我看到这一行时，我不知道 _sharedInstance 怎么可能被分配。谁能向我解释为什么这段代码有效？我原以为你需要写：

```
_sharedInstance = [[[self alloc] init] autorelease]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:54:08.510

这是另一个过度思考`+sharedInstance`方法的例子，它充其量是令人困惑的，并且只能因为其他恶作剧（如覆盖`release`）而起作用。

只需这样做并完成它：

```
+ (id)sharedInstance
{
    static MyClass *sharedInstance;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[self alloc] init];
    });
    return sharedInstance;
} 
```

简单，直接，并且不排除`MyClass`用作非单例。这样做的一个缺陷是如果`+sharedInstance`被递归调用，它会死锁，但`+sharedInstance`递归通常是一个不好的迹象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:23:18.883

它可能设置在 中`alloc`，而不是 init。这将防止在内部的递归调用中创建另一个实例`init`。

解释：

复杂的单例进行大量设置是很常见的。这个设置可能很复杂，涉及的不仅仅是这个类。碰巧在此设置中从（深层）请求了单例。如果在调用*之前*`_sharedInstance`未设置变量，则会创建两个实例。*`init`*

# r - 如何在 GtkScrolledWindow 中使 GtkLabel 可滚动

> ID：15529032
> 
> 赞同：0
> 
> 时间：2013-03-20T16:16:58.700
> 
> 标签：r, user-interface, gtk

我正在使用 RGtk2 在 R 中开发 Gtk GUI。GUI 的一部分是蛋白质序列（可变长度）的显示。蛋白质序列被放置在一个 GtkLabel 中，打开换行，换行模式设置为 PANGO_WRAP_CHAR。GtkLabel 依次放置在 GtkScrolledWindow 中。不幸的是，这不起作用，因为 GtkLabel 似乎无法请求正确的尺寸。所以问题是：无论如何制作一个可滚动的 GtkLabel 还是我应该使用另一个小部件？

代码示例：

```
window <- gtkWindow(show=FALSE)
scroll <- gtkScrolledWindow()
window$add(scroll)
label <- gtkLabel()
label$setLineWrap(TRUE)
label$setLineWrapMode('PANGO_WRAP_CHAR')
scroll$add(label)

label$setText('THIS IS JUST AN EXAMPLE: ABCDEFGHIJKLMNOPQRSTUVXYZ')
window$show() 
```

请注意，可能必须调整窗口大小才能显示问题...

最佳托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:12:15.197

由于`GtkLabel`本质上不是“可滚动”小部件，因此您需要将其添加到`GtkScrolledWindow`带有视口的窗口中。该函数`gtk_scrolled_window_add_with_viewport`在 C 中用于执行此操作，但我不知道 R 中的等价物是什么。`scroll$addWithViewport(label)`?

[gtk_scrolled_window_add_with_viewport 文档](http://people.gnome.org/~shaunm/girdoc/C/Gtk.ScrolledWindow.add_with_viewport.html)

# css - 如何使菜单位于页面右侧 - WordPress 主题样式

> ID：15529043
> 
> 赞同：0
> 
> 时间：2013-03-20T16:17:27.500
> 
> 标签：css, menu, wordpress-theming

我确信有一个非常明显的答案，但我一直试图让[这个页面](http://www.sculptcoach.com)顶部的菜单坐在右边几个小时。

关于哪些元素需要调整，或者如何覆盖 WP 主题的 CSS 的任何想法？

```
/* Navigation Bar */

.nav-wrap {
    background-color:#FFFFFF;
    border-bottom:1px solid #D9D9D9;
}
#navigation {
    float:center;
    margin:0 10px 0 10px;
}
#navigation ul li ul li a{
    font-weight:normal !important;
}
#navigation ul {
    position:relative;
    width:100%;
}
#navigation ul li {
    position:relative;
    display:block;
}
#navigation ul li a {
    padding:0;
    text-decoration: none;
    display:block;
    letter-spacing:1px;
    height:30px;
    line-height:30px;
    margin-left:30px;
}
#navigation ul li:first-child a {
    margin:0 ;
}
.naviline {
    position:absolute;
    top:7px;
    left:12px;
    border-left:1px solid #D9D9D9;
}
#navigation ul li:first-child .naviline {
    display:none;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:20:35.400

尝试

```
#navigation {
    float: right;
    margin: 0 10px; /* same as 0 10px 0 10px */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:25:06.587

尝试摆脱相对位置并将浮动中心更改为浮动对吗？

# serial-port - 检查字节数组时出错

> ID：15529046
> 
> 赞同：0
> 
> 时间：2013-03-20T16:17:30.047
> 
> 标签：serial-port, arduino, error-checking

检查字节数组中的数据是否正确的最佳方法是什么？

我正在通过串行连接发送一个字节数组，例如 byte1、byte2、byte3、byte4 和 errorCheckByte，我想在收到数据时检查数据是否正确。

对前四个字节执行以确定它们在连接两端是否相同的最佳数学运算是什么？我应该把它们加在一起吗？

例如，但实际上并不是在寻找特定于语言的示例，但这与 Java 和 Arduino 有关：

```
byte byte1 = 5;
byte byte2 = 10;
byte byte3 = 34;
byte byte4 = 122;

byte errorCheckByte = createErrorByte(byte1, byte2, byte3, byte4);

byte myArray[] = {byte1, byte2, byte3, byte4, errorCheckByte}

byte createErrorByte(byte byte1,byte byte2, byte byte3, byte byte4)
{return (byte1 + byte2 + byte3 + byte4);} 
```

发送后，我也许可以使用以下方法进行检查？

```
// Sum bytes received
byte sumBytes = 0;
for (int x = 0; x < 3 ; x++) {sumBytes += myArray[x]}

if (myArray[4] == sumBytes) { // Print message received}
else {
    // Discard data
} 
```

有没有更好但更简单的错误检查算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:20:23.267

您正在寻找的是[hashing/checksumming](http://en.wikipedia.org/wiki/Checksum)的概念。对于少量数据，[CRC](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)方法是常见的选择，例如CRC32。

# asp.net - 正则表达式只允许单词之间有一个连字符

> ID：15529047
> 
> 赞同：0
> 
> 时间：2013-03-20T16:17:31.810
> 
> 标签：asp.net, regex

我在 ASP.NET 应用程序中有一个文本框，为此我需要使用正则表达式来验证用户输入字符串。要求是字符串的连字符总数只能是一个。

火柴：

1.  测试
2.  测试你好
3.  测试-
4.  -测试

不匹配：

1.  测试——你好
2.  -测试-
3.  测试你好——

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:18:24.777

您可以使用此模式来匹配带有零个或一个连字符的字符串：

```
^[^-]*-?[^-]*$ 
```

**解释：**

从字符串的开头 ( `^`) 开始，它将匹配零个或多个非连字符 ( `[^-]*`)，后跟一个可选的连字符 ( `-?`)，然后是零个或多个非连字符 ( `[^-]*`) 和字符串的结尾 ( `$`)

* * *

此模式用于匹配带有一个连字符的字符串：

```
^[^-]*-[^-]*$ 
```

**解释：**

从字符串的开头 ( `^`) 开始，它将匹配零个或多个非连字符 ( `[^-]*`)，然后是所需的连字符 ( `-`)，然后是零个或多个非连字符 ( `[^-]*`) 和字符串的结尾 ( `$`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:19:38.957

试试这个 ：

```
^[^-]*-?[^-]*$ 
```

`[^-]`是非连字符。

# javascript - 用字母和符号填充

> ID：15529048
> 
> 赞同：0
> 
> 时间：2013-03-20T16:17:35.070
> 
> 标签：javascript, padding

我想知道如何用不是零的东西来填充，主要是字母和标点符号。

我正在使用创建报告（基于数据库中的信息）的数据库，然后可以将其导出到 csv 文件以在 excel 中使用。我注意到数据库和 excel 都会从我们拥有的数字中删除任何前导零（每个报告中的一件事是一个 ID 号，它是 7 位数字，前面通常有零，例如 0123456 或 0012345）。

该数据库允许使用 javascript 计算列，因此，根据我在这个网站上找到的信息，我创建了一个计算列并添加了一个脚本来用零填充数字，这在数据库中修复了它，但在 excel 中没有。我希望做的是不仅用零填充它，而且用撇号填充它，因此在导出到 excel 时它将显示为 '0123456 这应该强制 excel 保持前导零（根据我发现的各种 excel 教程，添加数字前面的撇号将其切换为文本）。

到目前为止，适用于我的程序的添加前导零的两种方法是：

```
var x=PersonID;
var y="0000000";
(y + x).slice(-7); 
```

PersonID 为 ID 提取文件的位置

或者

```
var str =PersonID;
var pad ="0000000";
(pad+str).slice(-7) 
```

或者

```
var n=PersonID;
("000000" + n).slice(-7); 
```

但是，当我将“0000000”切换为“'0000000”或“\'0000000”（以及-7 到-8）时，它只会添加一个额外的零！认为这是撇号的问题，我尝试了“A0000000”，但它只是将 A 切换为另一个零。有没有办法用非数字信息填充数字？

抱歉，这有点长，我只是想提供有关我情况的所有信息。提前感谢任何知道解决方案的人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:31:06.887

我认为这是因为当您切片时，您正在删除前面的字符，其中包括您的前导“A”或“'”。尝试这个：

```
var str =PersonID;
var pad ="0000000";
"A" + (pad+str).slice(-7) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:32:31.993

如果你把一个字符放在垫子的前面，那么它不可避免地会被剥离，因为你的 ID 可能至少有 1 个字符长。

```
var id = "A0000000123"
id.slice(-7); //id = 0000123 
```

如果您想用 0 以外的任何值填充，那么只需将其设为您的“填充”值；

```
var pad = "AAAAAAA";
var n = pad + PersonID; //123
var paddedId = n.slice(-7) //paddedId = "AAAA123" 
```

也许您真正想要的是从您的键盘中取出前 N 个字符，而不是最后一个 N。

```
var pad = "A000000";
var PersonID = "123";
var toTake = pad.length - PersonID.length; //number of characters to take for the pad
var paddedId = pad.slice(0,toTake) + PersonID;// "A000123" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-05T20:12:01.153

如果您正在获取 [Object object]，则`pad`or`PersonID`是一个对象，您必须将其转换为字符串。一个简单`n.toString()`的应该可以解决问题，但`(n+"")`我听说更快。

此外，只需将您报告的列或行更改为文本格式而不是默认格式，通用格式也应该有所帮助。

我知道我迟到了，但希望这对某人有帮助！

# javascript - 单击jstree节点时打开多个窗口

> ID：15529050
> 
> 赞同：0
> 
> 时间：2013-03-20T16:17:39.150
> 
> 标签：javascript, jquery, jstree

```
$(document).ready(function(){
     $("#tree").jstree({  
         "xml_data" : {  
             "ajax" : {  
                 "url" : "jstree.xml"            
             },  

             "xsl" : "nest"

             },  
    "themes" : {  

             "theme" : "classic",  

            "dots" : true,  

             "icons" : true 

         },  
          "ui": {
            "initially_select" : [ "#1234" ] 
       },
    "search" : {  

              "case_insensitive" : true,  

                 "ajax" : {  

                     "url" : "tree.xml" 

                 }  

             }, 
    "plugins" : ["themes", "xml_data", "ui","types", "search", "cookies"],
    "core" : { "initially_open" : [ "12345" ] } 
    }).bind("select_node.jstree", function (event, data) {
            var node_id = data.rslt.obj.attr("id");
            $.cookie("example", node_id, { path: '/', expires:7 });
            window.open('new.html', '_newtab','width=800,height=1000,resizable=1,scrollbars=1');

    }); 
```

我正在尝试使用 jstree 填充树，当单击节点时，我需要使用 cookie 启动一个名为 new.html 的新窗口来存储节点 ID 的值。有用。但我需要的是，当单击 jstree 节点时，我需要一个新的 new.html 窗口并单击另一个节点，而不是更新 new.html，我需要另一个具有新 node_id 的窗口。因此，需要使用 new.html 为每个 node_id 提供多个窗口。这可以用jquery吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:31:49.317

如下所示的空参数可以解决问题。

```
window.open('new.html', '','width=800,height=1000,resizable=1,scrollbars=1'); 
```

# php - 在 if 语句中返回后使用回显

> ID：15529061
> 
> 赞同：1
> 
> 时间：2013-03-20T16:18:21.357
> 
> 标签：php, wordpress

我有一些代码，在这里，这给我带来了一些麻烦。

```
 function rcMetaDisplayNone($content)
    {
        global $rc_options;
        global $post;
        global $login_button;

    $rcUserLevel = get_post_meta($post->ID, 'rcUserLevel', true);

    if (!current_user_can('read') && ($rcUserLevel == 'Administrator' || $rcUserLevel == 'Editor' || $rcUserLevel == 'Author' || $rcUserLevel == 'Contributor' || $rcUserLevel == 'Subscriber'))
    {
        $userLevelMessage = strtolower($rcUserLevel);
        return do_shortcode( $rc_options[$userLevelMessage . '_message'] );
    }
    else
    {
        // return the content unfilitered
        return $content;
    }
} 
```

我在这里试图征服的任务是如何在语句`echo`的末尾附加一个，如下所示：`if`

```
return do_shortcode( $rc_options[$userLevelMessage . '_message'] );
echo $login_link; 
```

现在，根据**PHP**的工作原理，我知道这不应该工作。我的问题是：我将如何使它工作？是否有可以让我这样做的功能或解决方法？

我是PHP的初学者，所以如果解决方案很明显，我深表歉意。

******更新******

 **神圣的答案，蝙蝠侠！谢谢你们的帮助，伙计们。我应该澄清一下。我已经更新了代码以包含*整个*函数。

该`$login_link`代码本质上是**输出一个**允许用户登录的链接（具有讽刺意味的是）。`return`然而，该代码正在**输出一条消息**，在我正在使用的这个**WordPress 插件**的上下文中，说明用户无权访问页面上的内容。

看到这里的困境了吗？我正在尝试**在此消息中附加一个登录链接**。它不是简单的空返回值，而是**输出到浏览器的实际消息**。

******更新 2******

 **这是我正在使用的简码，所以我不确定我是否可以在函数之外输出所述代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:20:17.833

您不能在`return`语句之后执行代码（在函数返回中）。

如果我正确理解了您的问题（执行`do_shortcode()`然后显示 的值`$login_link`，然后返回），则：存储返回值，调用`echo`，最后返回存储的值。

```
$returnValue = do_shortcode( $rc_options[$userLevelMessage . '_message'] );
echo $login_link;
return $returnValue; 
```

**编辑：**根据您的更新，我相信您正在寻找以下内容：

```
$returnValue = do_shortcode( $rc_options[$userLevelMessage . '_message'] );
return $returnValue . $login_link; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:20:27.883

你会在函数之外回显。经验法则，您永远不应该在函数内部回显，始终返回输出并回显返回集

所以你会做

```
<?php 
$echovar = rcMetaDisplayNone($content);

echo $echovar;

?> 
```

**使用您的完整代码更新**

```
<?php

function rcMetaDisplayNone($content)
    {
        global $rc_options;
        global $post;
        global $login_button;

    $rcUserLevel = get_post_meta($post->ID, 'rcUserLevel', true);
    $staticstring = "<a href=\"blah.php\">THIS IS MY STATIC STRING IT CAN CONTAIN ANYTHING</a>";

    if (!current_user_can('read') && ($rcUserLevel == 'Administrator' || $rcUserLevel == 'Editor' || $rcUserLevel == 'Author' || $rcUserLevel == 'Contributor' || $rcUserLevel == 'Subscriber'))
    {
        $userLevelMessage = strtolower($rcUserLevel);
        $output = do_shortcode( $rc_options[$userLevelMessage . '_message'] );
    }
    else
    {
        // return the content unfilitered
        $output = $content;
    }
    return $output.$staticstring;
}

echo rcMetaDisplayNone($content);
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T16:21:05.333

这不仅仅是 PHP，而是函数如何工作的规则。一旦 a`return`被击中，函数就完成了。即使后面有更多行也是如此`return`。

```
Function test(){
  echo "test";
  return;
  echo "done";
} 
```

这只会输出`"test"`，因为返回被击中。如果你想做任何事情，你需要在函数结束之前让它发生，而不是在它完成时。

```
echo $login_link;
return do_shortcode( $rc_options[$userLevelMessage . '_message'] ); 
```

因此，您可以在返回之前回显变量。

**编辑：** 由于您要查找的是在 之后添加到消息中`do_shortcode`，因此您可以在返回之前连接字符串。像这样：

```
$shortcode = do_shortcode( $rc_options[$userLevelMessage . '_message'] );
return $shortcode."possible HTML".$login_link; 
```

“可能的 HTML”可以是您可能希望的任何字符串或格式。研究`PHP String Concatenation`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T16:20:43.510

这没有意义，你可以把它移到*上面*`return`：

```
echo $login_link;
return do_shortcode( $rc_options[$userLevelMessage . '_message'] ); 
```

如果您让我们更多地了解您实际想要做什么（以比“输出值”更抽象的方式），这可能会更有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T16:22:28.863

你不能。Return 将完成该功能。您可以返回所需的内容，然后在调用函数的地方使用 echo：

```
echo rcMetaDisplayNone($someParam); 
```

如果您需要更多，您可以返回数组。

```
$returned = rcMetaDisplayNone($someParam);
echo $returned['echoVal']; 
```****

# c# - Excel 2007/2010 的 LibreOffice UNO XStorage 类型名称

> ID：15529062
> 
> 赞同：0
> 
> 时间：2013-03-20T16:18:23.367
> 
> 标签：c#, libreoffice, uno

我正在尝试编写一个小实用程序，该实用程序将使用 LibreOffice（或 OpenOffice，等等）从一种电子表格类型转换为另一种，我从[这里](http://wiki.openoffice.org/wiki/Documentation/DevGuide/Spreadsheets/Saving_Spreadsheet_Documents#Storing)的示例开始。它工作正常，我可以进行一些转换，但我找不到 Excel 2007/2010 的类型名称。文档中给出了 97 类型名称，但他们建议查找受支持过滤器的位置（来自文档 \share\config\registry\instance\org\openoffice\Office\TypeDetection.xml）在我的系统。那么，有人知道过滤器名称是什么吗？谢谢。

PS 我也尝试查看 unoconv 的源代码，但它也没有映射，尽管该代码已经有一段时间没有更新了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:24:11.503

从这里：[http](http://ask.libreoffice.org/en/question/9582/is-there-a-xlsx-filter-option/) ://ask.libreoffice.org/en/question/9582/is-there-a-xlsx-filter-option/ 答案是“Calc MS Excel 2007 XML”

# java - 如何不重复自己或如何更改方法中的简单条件？

> ID：15529068
> 
> 赞同：3
> 
> 时间：2013-03-20T16:18:35.813
> 
> 标签：java, design-patterns, coding-style, dry

我有一个方法，我在我的实现中多次使用它，并进行了非常简单的修改。我怎样才能避免重复自己？

```
...
    while (!queue.isEmpty()) {
        Element pivot = queue.poll();
        elements.remove(pivot);
        for (Element a : elements) {
            if (areFriends(pivot, a)) {
                db.addRelation(a, pivot);
                queue.add(a);
                elements.remove(a);
            }
        }
    }
... 
```

我想用一个新的改变 areFriends 条件，fe areEnemies(Element pivot, Element a) 并继续使用整个代码和数据结构。我试图提取一个 void 方法，但在这种情况下，我必须将所有变量（db、队列等）作为输入传递，它看起来像是一种反模式。你知道如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:25:56.080

你可以定义一个`interface`：

```
public interface IElementFunction
{
    public boolean execute(Element e1, Element e2);
} 
```

以及通用函数的传递实现（命名或匿名`class`es） ：`interface`

```
private void commonFunction(IElementFunction ief)
{
    while (!queue.isEmpty()) {
        Element pivot = queue.poll();
        elements.remove(pivot);
        for (Element a : elements) {
            if (ief.execute(pivot, a)) {
                db.addRelation(a, pivot);
                queue.add(a);
                elements.remove(a);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T16:27:09.033

创建接口：

```
public interface Relation 
{
    public void execute(Element a, Element b);
}

public class AreFriendsRelation implements Relation 
{
    public void execute(Element a, Element b) 
    {
        // Return the Relation result
    }    
}

public class AreEnemiesRelation implements Relation 
{
    public void execute(Element a, Element b) 
    {
        // Return the Relation result
    }    
} 
```

将您的 Relation 对象传递给您的方法：

```
public void MyMethod(Relation myRelation) {
...
while (!queue.isEmpty()) {
        Element pivot = queue.poll();
        elements.remove(pivot);
        for (Element a : elements) {
            if (myRelation.execute(pivot, a)) {
                db.addRelation(a, pivot);
                queue.add(a);
                elements.remove(a);
            }
        }
    }

...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:25:12.560

您可以使用命令设计模式。使用方法创建一个接口`public void checkElements(Element a, Element b)`，并创建该接口的一些实例。在您的方法中，使用接口的方法，或者让您的方法接受接口实例作为参数，或者将其作为类成员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T16:29:29.807

嗯..不确定我是否完全理解您的问题，但这看起来像是实现模板方法模式或其他一些[行为模式的气味。](http://en.wikipedia.org/wiki/Behavioral_pattern)

检查：[http ://en.wikipedia.org/wiki/Template_method_pattern](http://en.wikipedia.org/wiki/Template_method_pattern)

# angularjs - 为什么 ng-repeat 无法使用 $http.get JSON 循环，但在硬编码时可以工作？

> ID：15529069
> 
> 赞同：0
> 
> 时间：2013-03-20T16:18:40.820
> 
> 标签：angularjs

我有一个使用 ng-repeat 的 Angular 项目，该项目使用编码到控制器中的临时 JSON 字符串运行良好：

```
function DocsController($scope, $http){
    $scope.applicationData = [
    {"Item":"1", Value: "Red"}, {"Item":"2", Value: "Orange}
    ];
} 
```

但是由于某种原因，当我将该 JSON 移动到一个文件中并通过 $http.GET 将其拉入时，ng-repeat 停止工作。没有循环，什么都没有——即使我可以从循环外的对象中获取 applicationData.length 和其他属性：

```
$http.get('jsonData/docs.json').success(function(data) {
    alert (data);
    $scope.applicationData = data;
  }); 
```

在上面的示例中，警报显示了 JSON 字符串，因此我知道它已正确加载。我可以调用 {{applicationData.length}} 它会呈现 2。所以我知道数据在那里，只是当通过 $http.get 获取数据时 ng-repeat 停止循环。

有任何想法吗？非常感谢！

项目模板（请注意，{{applicationData.length}} 行正确呈现 - 所以我知道数据在那里）。

```
 <div class="row-fluid">
                <div class="box span12" ng-controller="DocsController">
                    <div class="box-header">
                        <h2><i class="halflings-icon list-alt"></i><span class="break"></span><strong>Application Documents</strong></h2>
                        <div class="box-icon">
                            <span><input type="checkbox" id="completedApplicationCheckbox" ng-model="trueApplication" value="option1" checked>Show Completed </span>
                            <a href="#" class="btn-minimize"><i class="halflings-icon chevron-up"></i></a>
                        </div>
                    </div>
                    </br>
                    <table class="table table-striped table-bordered bootstrap-datatable datatable">
                      <thead>
                          <tr>
                              <th>Document Title <i class="halflings-icon chevron-down"></i></th>
                              <th>Date <i class="halflings-icon chevron-down"></i></th>
                              <th>Owner <i class="halflings-icon chevron-down"></i></th>
                              <th>Status <i class="halflings-icon chevron-down"></i></th>
                              <th>Actions <i class="halflings-icon chevron-down"></i></th>
                          </tr>
                      </thead>   
                      <tbody>
                            <h2>{{applicationData.length}}</h2>
                                <tr ng-repeat="item in applicationData" class="application-{{item.status}}">
                                    <td><i class="halflings-icon file"></i> {{item.name}}</td>
                                    <td class="center">{{item.lastModified | date:'short'}}</td>
                                    <td><i class="halflings-icon {{getIconType(item.owner)}}"></i> {{item.owner}}</td>
                                    <td class="center" ng-bind-html-unsafe="createStatus(item.status)">
                                    </td>
                                    <td class="center" ng-bind-html-unsafe="createActionButton(item.status)">
                                    </td>
                                </tr>
                      </tbody>
                    </table>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:23:14.370

-编辑-

尝试使用`.then()`

```
$http.get('jsonData/docs.json').then(function(data){
   $scope.applicationData = data
}); 
```

试试这个：

```
$scope.applicationData = [];

$http.get('jsonData/docs.json').success(function(data) {
    $scope.applicationData.push(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:15:10.817

我意识到数据表 jquery 插件（[http://www.datatables.net/](http://www.datatables.net/)）存在冲突。恐怕它不适用于 Angular，因为它是一款出色的软件，但我现在不得不禁用它。

# ruby-on-rails - Rails：将参数传递给关注点

> ID：15529079
> 
> 赞同：6
> 
> 时间：2013-03-20T16:19:12.163
> 
> 标签：ruby-on-rails, methods

DHH 写了[一篇文章](http://37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns)提倡使用关注点。这似乎是一种很好的做法，在很多情况下，它们与我的应用程序配合得很好。但是，在某些情况下，多个模型具有相似但略有不同的方法，例如：

```
def find_or_create_membership
  user_membership = User::Membership.where(:group_id => self.group_id,
  :user_id => self.invitee_id).first_or_create(:status => "invited")
end 
```

和：

```
def find_or_create_membership
  user_membership = User::Membership.where(:group_id => self.group_id,
  :user_id => self.invitee_id).first_or_create(:status => "declined")
end 
```

这些方法是相同的，只是第一个设置`status`为“邀请”，第二个设置为“拒绝”。有没有办法通过关注点将参数传递给这些方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:37:50.730

您可能对[Paramix](https://github.com/rubyworks/paramix)感兴趣。

不过，我自己从来没有用过。不知道，闻起来像 False-Good-Idea©。

# jira - 在 2 行上拆分自定义“字段名称”

> ID：15529084
> 
> 赞同：0
> 
> 时间：2013-03-20T16:19:20.633
> 
> 标签：jira

我们添加了新的自定义字段，它的名称大于 JIRA 可以显示的名称，因此 JIRA 取前 N 个字符，然后添加... fx I've field: 'My very very long field' 将转换为 'My very very... ' 是否可以拆分 2 行的名称？fx '我非常非常
长的领域' ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:59:11.740

不容易。有很多地方会显示自定义字段名称。缩写是一种方法，然后将长名称放在字段的描述中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:14:29.127

在字段描述中添加以下内容：

```
<script type="text/javascript">
  AJS.$(document).ready(function() {
    AJS.$('#customfield_10108-val').parent().find('strong').css('height','34px').css('white-space','normal');
  });
</script> 
```

更改`customfield_10108-val`为您的cf id。如果不起作用，请尝试将其添加到[`Announcement Banner`](https://confluence.atlassian.com/display/JIRA/Configuring+an+Announcement+Banner)

# javascript - jQuery Marquee 是否适用于 jquery 1.6.4？

> ID：15529089
> 
> 赞同：-5
> 
> 时间：2013-03-20T16:19:50.733
> 
> 标签：javascript, jquery, marquee

jQuery Marquee 是否适用于 jquery 1.6.4？这里有信息[http://plugins.jquery.com/marquee/](http://plugins.jquery.com/marquee/)该库可以使用 jquery >=1.6.4。这是我的代码：

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script src="https://raw.github.com/tobia/Pause/master/jquery.pause.js"></script>

    <script src="http://jquery.aamirafridi.com/jquerymarquee/jquery.marquee.js"></script>
    <script>
        $(function(){
            $('#marquee').marquee();
        });
    </script>
    <style type="text/css">
        .marquee {
          width: 300px;
          overflow: hidden;
          border:1px solid #ccc;
        }
    </style>
<body>
    <div id='marquee' class='marquee'>Less text here</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:25:15.563

所以我为你做了测试

[http://jsfiddle.net/aRW9Q/](http://jsfiddle.net/aRW9Q/)

```
Error says: "Uncaught TypeError: Object [object Object] has no method 'on' " 
```

答案是否定的，因为`on()`它是在 jQuery 1.7 中引入的。升级而不是使用过时的 jQuery 版本！

# jquery - 从数据表中获取隐藏的行内容并将其与表单一起提交

> ID：15529090
> 
> 赞同：3
> 
> 时间：2013-03-20T16:19:50.740
> 
> 标签：jquery, jquery-datatables

我被一个问题困住了，它现在占用了我的时间。我有一个包含 7 条记录的表（例如），该表有 input 和 textarea 元素，用户可以在其中输入。现在分页的值为每页 5 条记录，我有两页。用户在评论部分输入数据，点击分页中的“下一步”并在评论部分输入值。因此，从技术上讲，用户将值输入到两个页面中，并按数据表分页逻辑进行拆分。问题是，当用户点击保存时，它只保存那些在焦点上的元素，更容易理解在页面上可见的元素。我阅读了 API 和常见问题解答，很明显 datatable 隐藏了不在焦点的元素，使得它们几乎无法在 DOM 中找到。下面是代码，我需要有关如何使用 fnGetHiddenTrNodes() 方法从隐藏行中获取数据、创建隐藏元素并将它们附加到现有可见表元素的帮助，然后再提交表单。我尝试了下面的代码，但它不起作用。

```
 $("#form").on("submit",function(){
       if($("#form").valid()){

           var nNodes = oTable.fnGetHiddenTrNodes();
           for ( var i=0 ; i<nNodes.length ; i++ )
           {
               var nHidden = document.createElement( 'input' );
               nHidden.type = 'hidden';
               nHidden.name = "hidden_input_"+i;
               nHidden.value = $('input', nNodes).val();

               //alert(nHidden.value);
               this.appendChild( nHidden );
           }

           $("#form").submit();   

       }else {
           validator.focusInvalid();
           return false;
       }

   }); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T18:54:33.500

```
$("#form").on("submit",function(){
    if($("#form").valid()){

       //Loop through the TR records
       oTable.$("tr").each(function(index, nRow){
            //Select the input from the row
            //var rowInput = $("input", nRow);
            //Select the text area from the row
            //var rowTextarea = $("textarea", nRow);

            //Add to form
            var nHidden = document.createElement( 'input' );
            nHidden.type = 'hidden';
            nHidden.name = "hidden_input_"+index;

            //Assuming there is one input per row
            nHidden.value = $("input", nRow).val();
            //alert(nHidden.value);
            $("#form").append( nHidden );
        });

        $("#form").submit();         
    }else {
        validator.focusInvalid();
        return false; 
    }    
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T20:45:29.050

好吧。！是时候结束了。感谢@Bret 给我一个方向。下面是最终工作的代码片段 -

```
 $("#form").on("submit",function(){
        if($("#form").valid()){

            var nNodes = oTable.fnGetHiddenTrNodes();

                    $('td', nNodes).each(function(index,ncolumn) {

                        var nHidden = document.createElement( 'input' );
                        nHidden.type = 'hidden';
                        nHidden.name = $("input", ncolumn).attr("name");
                        nHidden.value = $("input", ncolumn).val();

                        if(typeof(nHidden.name)  != "undefined")
                        $("#form").append( nHidden );

                        nHidden = document.createElement( 'input' );
                        nHidden.type = 'hidden';
                        nHidden.name = $("textarea", ncolumn).attr("name");
                        nHidden.value = $("textarea", ncolumn).val();

                        if(typeof(nHidden.name)  != "undefined")
                        $("#form").append( nHidden );

                        nHidden = document.createElement( 'input' );
                        nHidden.type = 'hidden';
                        nHidden.name = $("textarea", ncolumn).attr("name");
                        nHidden.value = $("textarea", ncolumn).val();

                        if(typeof(nHidden.name)  != "undefined")
                        $("#form").append( nHidden );

                        nHidden = document.createElement( 'input' );
                        nHidden.type = 'hidden';
                        nHidden.name = $("select", ncolumn).attr("name");
                        nHidden.value = $("select", ncolumn).attr("value");

                        if(typeof(nHidden.name)  != "undefined")
                        $("#form").append( nHidden );

                    });

            clickedSave = true;

        }else {
            validator.focusInvalid();
            return false;
        }

    }); 
```

谢谢。

# asp.net-mvc-4 - 为什么我得到这个“附加脚本调试器......失败”错误消息？

> ID：15529096
> 
> 赞同：1
> 
> 时间：2013-03-20T16:20:06.293
> 
> 标签：asp.net-mvc-4, javascript-debugger

当我从 VS 2010 运行 (F5) 一个 asp.net mvc4 站点时（我没有对任何内容进行任何更改 - HTML、CSS 或 JScript），页面显示，但我得到：

*将脚本调试器附加到机器“DUCKBILLEDPLATYPUS”上处理“[NNNN] iexplore.exe”失败。已附加调试器。*

这是什么原因造成的，我该如何纠正？

# interrupt - 为什么使用中断处理系统调用？

> ID：15529102
> 
> 赞同：3
> 
> 时间：2013-03-20T16:20:18.417
> 
> 标签：interrupt, system-calls, kernel

我有一个关于 linux 系统调用的基本问题。
为什么系统调用不像普通函数调用那样处理，为什么通过软件中断处理？
是因为在用户应用程序的构建过程中，没有为用户空间应用程序与内核执行链接过程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T00:15:46.060

单独编译的代码片段之间的链接是一个小问题。共享库已经有很长一段时间了（可重定位代码、导出表等）。当您在程序中加载库时，您通常只需支付一次费用。

更大的问题是您需要将 CPU 从非特权用户模式切换到特权内核模式，并且您需要以可控的方式进行操作，而不会让用户代码逃逸并对内核造成严重破坏。这通常是通过特殊或指定的指令来完成的。您还可以从转换到内核时的自动中断禁用中受益，x86`int`指令可以为您做这件事。大多数 CPU 都有类似这条指令的东西，它是实现系统调用接口的常用方法，尽管不是唯一的。

如果您询问 MS-DOS 或原始 MINIX，它们都在 i8086 上以实地址模式运行，内核无法保护自己或其他程序免受任何影响，因为所有代码都可以访问所有内存和系统资源，那么使用特殊指令的理由就更少了`int`，没有两种模式，只有一种模式，在这方面`int`很大程度上相当于一个简单的`call (far)`.

同样值得注意的是，CPU 通常以非常相似的方式处理以下 3 种类型的事件：

*   来自 I/O 设备的硬件中断
*   异常、代码执行错误（例如除以 0、页面错误等）
*   系统调用

这使得使用类似`int`指令的东西成为一个自然的选择，因为您在上述所有处理程序中的入口和出口点如果不完全相同，那么基本上是相同的。

# asp.net-mvc - 如何在控制器中遍历 ViewModel 的属性

> ID：15529104
> 
> 赞同：1
> 
> 时间：2013-03-20T16:20:19.290
> 
> 标签：asp.net-mvc, asp.net-mvc-3, viewmodel

我有一个 ViewModel，它具有许多不同的属性（即字符串、int 等），我需要在控制器中迭代这些属性。做这个的最好方式是什么？这是 ViewModel 的定义：

```
public class BankListViewModel
{
    public int ID { get; set; }
    public string BankName { get; set; }
    public string EPURL { get; set; }
    public string AssociatedTPMBD { get; set; }
    public string Tier { get; set; }
    public List<BankListAgentId> BankListAgentId { get; set; }
    public List<BankListStateCode> BankListStateCode { get; set; }
} 
```

但是，我需要省略这两个列表。有任何想法吗？

编辑

此过程的目的是将视图模型的特定项传递到三个单独的对象中。创建视图模型是为了结合三个单独的 SQL 表/模型的属性。我现在正在尝试将它们适当地划分并将信息添加到相关表格中。现在我只是像这样一一进行：

```
 BankListMaster banklistmaster = new BankListMaster();
        banklistmaster.AssociatedTPMBD = viewmodel.AssociatedTPMBD;
        banklistmaster.BankName = viewmodel.BankName; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:25:40.423

虽然不清楚为什么需要迭代属性而不是仅仅读取它们的值，但您可以使用反射来完成此操作

```
var model = new BankListViewModel();
PropertyInfo[] properties = model.GetType().GetProperties();
foreach (var property in properties)
{
    if (property.GetType() != typeof(List<BankListAgentId>))
            {
                //do your thing here
            }

} 
```

# webkit - WebRTC HowTo PeerConnection via LAN with 2 Browsers

> ID：15529106
> 
> 赞同：3
> 
> 时间：2013-03-20T16:20:25.780
> 
> 标签：webkit, webrtc, videochat, peer

几天以来，我正在尝试构建一个基本的 webRTC 视频聊天。我有一些本地运行的演示，甚至通过局域网。但是现在我想在真正的基础上一个一个地构建，而不需要太多的 Demo 附带的过载。

但我仍然没有得到完整的对等连接。

例如。这个例子似乎被打破了，因为我不能“createSignalingChannel();” w3.org/TR/webrtc/#simple-example

其他一些示例（[https://webrtc-experiment.appspot.com/](https://webrtc-experiment.appspot.com/)）希望我链接他们的脚本，但我不会这样做，因为我想了解对等连接的魔力以及如何在 2 个浏览器之间进行握手.

我还探索了 Google App Engine 的示例，但这不是我想要的。

我想在最简单的 JS 和 HTML 中运行它。

这是我的代码： [https](https://github.com/mexx91/basicVideoRTC) ://github.com/mexx91/basicVideoRTC 编辑：现在应该可以使用

那么我必须添加什么来获得握手和对等连接，以便我可以发送例如。媒体流到彼此。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:09:10.897

`createSignalingChannel()`只是伪代码来说明单独通道的存在。您需要为初始连接处理单独的消息通道。

您可以使用 Pusher、Brightcontext 或 PubNub 等托管服务来实现这一目标，或者您可以使用 socket.io 或 SignalR 等开源项目托管您自己的后端。

然后，您只需通过您单独的渠道发送报价、答案和 iceCandidates。

实时服务列表：http: [//www.leggetter.co.uk/real-time-web-technologies-guide](http://www.leggetter.co.uk/real-time-web-technologies-guide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T18:36:05.503

想象一个视频会议网络应用程序，用户 A 和 B 最初从某个网络服务器访问该应用程序。假设 Web 应用程序支持在线状态，因此 Web 服务器知道谁当前在线。Imahine UI 允许 A 尝试向 B 发起视频呼叫。通过说 XMLHttpRequest()，A 的浏览器会通知服务器这是需要的，B 的 javascript 会弹出一些内容，说 A 想要呼叫 B。根本没有发生 WebRTC然而。但是在这个阶段，A 可以通过使用 XMLHttpeRequest 等发送消息来间接地与 B 通信。用 WebRTC 的说法，这是“信号通道”。因此，A 和 B 都可以与他们的 ICE 代理交互以发现候选地址和 SDP 描述，并通过服务器通过这个信号通道将这些发送给每个其他人。例如 A 上的 Web 应用程序调用 WebRTC API 来获取它的 ICE 候选者，并将它们打包成它认为合适的，发送给 B。B 的阅读器从服务器接收到这条消息（例如，通过 WebSocket 或长轮询），因此它可以解压，并根据需要格式化，使用 RTCPeerConnection 对象发送到 B 上的 ICE 代理。同样，SDP offer/answer 可以在两个应用程序之间发送，并传递到浏览器中的 ICE agnet，以获得同意的媒体格式等。在那个阶段，媒体连接可以由浏览器设置 uo（添加 meida 流最初到 RTCPeerConnection （它们不通信，但是具有可以查询以描述编解码器等的属性，并且当要求 API 创建 SDP 描述时，它使用这些属性来执行此操作，

# sql - 在 DB2 中旋转

> ID：15529107
> 
> 赞同：1
> 
> 时间：2013-03-20T16:20:25.993
> 
> 标签：sql, db2, pivot

我必须将我的行转换为 DB2 表中的列。这就是我的表的结构..

```
ItemID    Item    Value
---------------------
1     Meeting     Now
1     Advise      Yes
1     NoAdvise    No
2     Meeting     Never
2     Advise      No
2     NoAdvise    Null
2     Combine    Yes 
```

我希望将其转置（请注意，我不想转置组合）

```
ItemID    Meeting  Advise   NoAdvise 
---------------------------------------
1         Now      Yes       No
2         Never    No        Null 
```

有点苦恼的查询，你能帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-27T12:51:54.590

bhamby[当前接受的答案](https://stackoverflow.com/a/15531637/521799)当然是正确的，但是值得检查[使用多个相关子查询是否比单个组慢得多](https://blog.jooq.org/2017/04/20/how-to-calculate-multiple-aggregate-functions-in-a-single-query/)（提示：很可能是）：

```
SELECT 
  A.ItemID,
  MAX(CASE WHEN A.Item = 'Meeting'  THEN Value END) AS Meeting,
  MAX(CASE WHEN A.Item = 'Advise'   THEN Value END) AS Advise,
  MAX(CASE WHEN A.Item = 'NoAdvise' THEN Value END) AS NoAdvise
FROM A
GROUP BY A.ItemID 
```

在我看来它也更简单一些

[**SQLFiddle**](http://sqlfiddle.com/#!17/9eecb/1358)（在 PostgreSQL 中，但也适用于 DB2 LUW）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T18:17:22.360

它不是很漂亮，但它应该可以工作。DB2 没有内置[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数，如 SQL Server。

```
SELECT DISTINCT
     A.ItemID
    ,(SELECT value
      FROM table B
      WHERE B.ItemID = A.ItemID
        AND B.Item   = 'Meeting'
    ) AS Meeting
    ,(SELECT value
      FROM table B
      WHERE B.ItemID = A.ItemID
        AND B.Item   = 'Advise'
    ) AS Advise
    ,(SELECT value
      FROM table B
      WHERE B.ItemID = A.ItemID
        AND B.Item   = 'NoAdvise'
    ) AS NoAdvise
FROM table A 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T21:46:16.823

正如@bhamby 所说，DB2 没有`PIVOT`功能。
大多数情况下，我的查询只是在检索结果的方式上有所不同——您需要对它们运行探查器/优化器来确定，但我相信相关的子查询可能会按行执行（可能效率较低），而不是作为集合。对于小型数据集，这不太可能成为问题。

```
WITH Item (id) as (SELECT DISTINCT itemId
                   FROM YourTable),
SELECT item.id, Meeting.meeting, Advise.advise, NoAdvise.noadvise
FROM Item
LEFT JOIN (SELECT itemId, value as meeting
           FROM YourTable
           WHERE item = 'Meeting') as Meeting
       ON Meeting.itemId = Item.id
LEFT JOIN (SELECT itemId, value as advise
           FROM YourTable
           WHERE item = 'Advise') as Advise
       ON Advise.itemId = Item.id
LEFT JOIN (SELECT itemId, value as noadvise
           FROM YourTable
           WHERE item = 'NoAdvise') as NoAdvise
       ON NoAdvise.itemId = Item.id 
```

（......实际上，我有点担心你有'建议'和'不建议'的列，这似乎是某种布尔条件 - 即，你应该有一个，但不是另一个） .

# playframework-2.0 - Play 应用程序的持久设置

> ID：15529109
> 
> 赞同：0
> 
> 时间：2013-03-20T16:20:28.783
> 
> 标签：playframework-2.0, settings

我正在开发一个应用程序，它是另一个应用程序的 Web 管理控制台。我的要求之一是用户可以更改一些设置，例如数据库 url，并将它们持久化。

是否也可以在写入模式下使用播放配置？如果不是，那么在没有数据库的情况下实现这一点的最简单解决方案是什么，因为我们正在谈论 4-5 个字符串设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:27:53.137

Play 允许您为模型层制作自己的实现。您可以实现自己的持久性方法。例如，如果您不想使用数据库，则可以持久保存到文件。

在这种情况下，您可以编写模型类来匹配您要为其提供实现的应用程序中的不同模块或功能。如果您想在没有数据库的情况下在本地保存一些数据，您可以创建一个模型以将信息保存到文本文件或您选择的其他方式。

# mysql - 如何加快 MySQL 中缓慢的 SUM + ORDER BY + LIMIT 查询？

> ID：15529112
> 
> 赞同：2
> 
> 时间：2013-03-20T16:20:38.900
> 
> 标签：mysql, performance

我有一个包含两个字段的简单键值表，创建如下：

```
 CREATE TABLE `mytable` (
    `key` varchar(255) NOT NULL,
    `value` double NOT NULL,
    KEY `MYKEY` (`key`)
 ); 
```

键不是唯一的。该表包含超过一百万条记录。我需要一个查询来总结给定键的所有值，并返回前 10 个键。这是我的尝试：

```
 SELECT t.key, SUM(t.value) value
  FROM mytable t
  GROUP BY t.key
  ORDER BY value DESC
  LIMIT 0, 10; 
```

但这*非常*慢。问题是，没有 GROUP BY 和 SUM，它非常快，没有 ORDER BY，它非常快，但由于某种原因，两者的结合使它非常慢。谁能解释为什么会这样，以及如何加快速度？

* * *

没有价值指数。我尝试创建一个，但没有帮助。

* * *

EXPLAIN EXTENDED 在 Workbench 中生成以下内容：

```
 id select_type table type  possible_keys key   key_len ref  rows    filtered Extra 
 1  SIMPLE      t     index NULL          MYKEY 257     NULL 1340532 100.00   "Using temporary; Using filesort" 
```

* * *

表中有大约 400K 个唯一键。

* * *

查询需要 3 多分钟才能运行。我不知道多久，因为我在 3 分钟后停止了它。**但是**，如果我删除键上的索引，它会在 30 秒内运行！有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:37:48.633

据我所知，真正加快速度的唯一方法是创建一个带有唯一键的单独表并维护总值。然后您将能够索引值以快速检索前十名，并且计算已经完成。只要表格没有在太多地方更新，这应该不是一个大问题。

这种查询的主要问题是`group by`需要按一个顺序建立索引，而`order by`需要按不同的顺序排序。

# django - 在视图中迭代逗号分隔列表

> ID：15529114
> 
> 赞同：1
> 
> 时间：2013-03-20T16:20:39.610
> 
> 标签：django

如何循环视图中复选框中的值。

这是我到目前为止所尝试的：

```
if request.method == 'POST':
        form = SomeForm(request.POST)
        # Check we have valid data before saving trying to save.
        if form.is_valid():
            data = form.cleaned_data
            groups = data['thischeckbox']
            for item in groups:
                print(item) 
```

但这给出了**KeyError**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:41:14.113

```
if request.method == 'POST':
    form = SomeForm(request.POST)
    # Check we have valid data before saving trying to save.
    if form.is_valid():
        data = form.cleaned_data
        groups = data['thischeckbox'].split(",")
        for item in range(len(groups))
            print(groups[item]) 
```

# jquery - ajax post（没有Json）占用太多

> ID：15529119
> 
> 赞同：0
> 
> 时间：2013-03-20T16:20:54.547
> 
> 标签：jquery, performance, time

我有以下问题，希望有人能告诉我问题出在哪里..

我的表格有 3 个州、城市和社区的选择选项。最后 2 个选择取决于它的前一个值。一切运行良好，但需要 2 秒才能显示新选项（在更改之前的选择之后）.. 我知道这里不需要 json（对吗？）.. 但是有没有办法减少响应时间？

```
function carga(tipo, valor, selector){
    $.ajax({
        type: 'post',
        url: "include/sel.php",
        data: { tipo: tipo, valor: valor },
        error: function() {
            $(selector).html('<option>Ha ocurrido un error</option>');
      },
        success: function (response) {
            $(selector).html(response);
        }
    }) 
```

}

编辑：我忘了..我正在使用 xampp

这是我的 sel.php

```
include('dbcs.php');

$i = $_POST['tipo'];
$valor = $_POST['valor'];

switch($i){
case 'provincia':
    $consulta_sql = 'Select * from tbl_zona_provincias';
    break;
case 'partido':
    $consulta_sql = 'Select idPartido, partido from tbl_zona_partidos Where codProvincia = "'.$_POST['valor'].'"';
    break;
case 'localidad':
    $consulta_sql = 'Select idLocalidad, localidad from tbl_zona_localidades Where idPartido = "'.$_POST['valor'].'"';
    break;
}

if(!$resultados = $db->query($consulta_sql)){
die('Se produjo un error al intentar enviar la consulta [' . $db->error . ']');
} else {

while($row = $resultados->fetch_array()){
    if($i == 'provincia'){
        $option = '<option value="'.$row['codProvincia'].'">'.$row['provincia'].'</option>';
    } else if($i == 'partido'){
        $option = '<option value="'.$row['idPartido'].'">'.$row['partido'].'</option>';
    } else {
        $option = '<option value="'.$row['idLocalidad'].'">'.$row['localidad'].'</option>';
    }
    echo $option;   
}
$resultados->free();
}
$db->close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:27:38.453

如果您在开始时将所有州、城市和社区存储在一个多维数组中，您将减少处理时间。数组可以是这样的结构：

**在 PHP 中**

```
$selectOptions = array(
     state_id => array(
          country_id =>array(
               'name'=>country_name,
               'content'=>array(
                      neightborhood_id => neightborhood_name,
                 ),
             ),
           country_id...
        )
    ),
     state_id...
); 
```

在你的页面中

```
<script ...>
    var selectOptions = <?php echo json_encode($selectOptions)?>;
</script> 
```

然后，对于**状态**列表，执行

```
$('#stateselector').on('change', function() {
    $('#countrySelector').empty();
    $(selectOptions[$(this).val()]).each(function(id, value) {
      $('#countrySelector').append($('<option />').attr('value', id).text(value.name));
    }
} 
```

对于**国家**/地区列表，请执行

```
$('#countryselector').on('change', function() {
    $('#neightborhoodSelector').empty();
    $(selectOptions[$(stateselector).val()][$(this).val()]).each(function(id, value) {
      $('#neightborhoodSelector').append($('<option />').attr('value', id).text(value));
    }
} 
```

# javascript - 附加到标签

> ID：15529130
> 
> 赞同：0
> 
> 时间：2013-03-20T16:21:38.207
> 
> 标签：javascript, jquery, append

我想将从服务器获取的数据附加到 div 标签，但我无法让它工作。那是带有 div 标签的 HTML，我想从 JS 代码中附加数据。

HTML：

```
<body onload="initialize()">
<div id="text"></div>
</body> 
```

这里是 JavaScript 代码。我想将 document.write 替换为将数据附加到 div 标签的函数。

JS：

```
function initialize() {
$.getJSON('http://www.wawhost.com/izdelava-mobilne-aplikacije-2-del/fetch.php?callback=?', function (data) {
    for (var i = 0; i < data.length; i++) {
        document.write('<img src="' + data[i].image + '" />' + data[i].title + data[i].description + '<br>');
    }
});
} 
```

小提琴：http: [//jsfiddle.net/GDxtf/](http://jsfiddle.net/GDxtf/)

我刚开始学习 JavaScript。帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:24:43.190

将此代码粘贴到 HTML 文档的底部，就在之前`</body>`：

```
<script>
// If you're not using an HTML5 doctype, use <script type="text/javascript> instead of just <script>

$(function () {

    $targetDiv = $("#text");
    $.getJSON('http://www.wawhost.com/izdelava-mobilne-aplikacije-2-del/fetch.php?callback=?', function (data) {
        for (var i = 0; i < data.length; i++) {
            var $div = $("<div />");
            var $img = $("<img />");

            $img.attr("src", data[i].image);
            $img.appendTo($div);

            var $title = $("<h2>" + data[i].title + "</h2>");
            $title.appendTo($div);

            var $description = $("<p>" + data[i].description + "</p>");
            $description.appendTo($div);

            $div.appendTo($targetDiv);
        }
    });
});
</script> 
```

这解决了你的问题吗？

# php - 在foreach循环中调用php变量数组名

> ID：15529131
> 
> 赞同：0
> 
> 时间：2013-03-20T16:21:38.620
> 
> 标签：php, arrays, variables

我有具有以下名称的数组：$MyMondayClasses、$MyTuesdayClasses、$MyWednesdayClasses、$MyThursdayClasses、$MyFridayClasses

我有一个星期几的数组： $days = array('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday');

我想循环一周中的几天，然后运行适当的数组，但我不确定如何引用要制作的变量：

```
foreach($days as $value){
    foreach($My{$value}Classes as $ClassKey => $ClassVar){
        some code goes here
    }
} 
```

我曾经将 eval 用于此类事情，但请理解这不是最佳实践。无论如何，上面的代码不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:28:32.667

> 我有具有以下名称的数组：$MyMondayClasses、$MyTuesdayClasses、$MyWednesdayClasses、$MyThursdayClasses、$MyFridayClasses

听起来不是很聪明。

为什么不只拥有*一个*数组，以“星期一”、“星期二”等作为键 - 然后将每天的数据数组放在该键下……？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:24:09.573

没有意义..你应该使用数组，但如果你坚持你可以尝试：

```
foreach ( $days as $value ) {
    $name = sprintf("My%sClasses", $value);
    if (! isset(${$name})) { // the boss asked
        continue;
    }
    foreach ( ${$name} as $ClassKey => $ClassVar ) {
        // play some ball
    }
} 
```

# node.js - Node.js - ZLIB Gunzip 返回空文件

> ID：15529132
> 
> 赞同：5
> 
> 时间：2013-03-20T16:21:51.047
> 
> 标签：node.js, zlib

我只是在测试 Node.js 的 ZLIB，但很快就会遇到奇怪的结果。这是我的脚本（灵感来自 Node.js 手册示例[http://nodejs.org/api/zlib.html#zlib_examples](http://nodejs.org/api/zlib.html#zlib_examples)）：

```
var zlib = require('zlib') ,
    fs = require('fs') ,
    inp1 = fs.createReadStream('file.txt') ,
    out1 = fs.createWriteStream('file.txt.gz') ,
    inp2 = fs.createReadStream('file.txt.gz') ,
    out2 = fs.createWriteStream('output.txt') ;

inp1.pipe(zlib.createGzip()).pipe(out1);   /* Compress to a .gz file*/
inp2.pipe(zlib.createGunzip()).pipe(out2); /* Uncompress the .gz file */ 
```

在此示例中，在执行脚本之前，我创建了一个名为的文件`file.txt`，并用示例文本（例如 Lorem Ipsum）填充它。

前面的脚本成功创建了`.gz`文件，我可以从 finder 中解压缩（我在 Mac OSX 上），但未压缩的`output.txt`文件是空的。

为什么？你有什么主意吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T16:53:10.543

节点流是异步的，因此您的两个流将同时运行。这意味着当您最初打开`inp2`它时，它`file.txt.gz`是空的，因为另一个写入流还没有添加任何东西。

```
var zlib = require('zlib') ,
    fs = require('fs');

var src = 'file.txt',
    zip = 'file.txt.gz',
    dst = 'output.txt';

var inp1 = fs.createReadStream(src);
var out1 = fs.createWriteStream(zip);

inp1.pipe(zlib.createGzip()).pipe(out1);

out1.on('close', function(){
  var inp2 = fs.createReadStream(zip);
  var out2 = fs.createWriteStream(dst);
  inp2.pipe(zlib.createGunzip()).pipe(out2);
}) 
```

# android - 杀死应用程序的生命周期方法？

> ID：15529134
> 
> 赞同：-1
> 
> 时间：2013-03-20T16:21:57.700
> 
> 标签：android

我正在做一个简单的游戏，我正在使用 onPause 和 onResume。但是我有一个问题，当我再次开始游戏时，在我用手机上的主按钮离开它之后（我使用的是android 2.3.6），它就像我离开之前一样！我还需要 onDestroy 吗？还是应该以其他方式“杀死”游戏？珍贵的帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:27:30.253

Android 通过后台处理您的应用程序来处理多任务。当您按下主页按钮时，应用程序不应退出。因此，您的用户会期望应用程序**不会被**终止，并且在恢复时保持不变（就像现在发生的情况一样）。

如果您确实想杀死您的应用程序，请将以下内容添加到您的活动`onPause`方法中：

```
System.exit (0); 
```

# c# - 在winform中构建提醒

> ID：15529137
> 
> 赞同：3
> 
> 时间：2013-03-20T16:22:08.817
> 
> 标签：c#, winforms, timer, reminders

我是一名学生，正在研究`winform c#`. 我有一个小应用程序，我想添加备忘录提醒的新功能。例如，当我在文本框中输入内容时，应用程序会保存它并设置一个 8 小时的计时器。如果应用程序正在运行，那么应该会弹出一条消息，其中包含我保存的消息。

我不清楚我是否应该使用数据库来提醒条目或 c# 提供的其他东西。据我所知，一切都是自动化的。有什么东西可以帮助我构建这个功能，比如计时器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:31:11.840

如果无法使用数据库，请存储在 txt 文件中的某个位置。像这样：

> 3.20.2013 11:20:00 | 提醒我一些事情。

然后你的计时器每分钟左右检查一次。

更新：

例子：

```
DateTime savedTime = Convert.ToDateTime("date from the text file");
if(DateTime.Now >= savedTime)
{
     MessageBox.Show("reminder from the text file");
} 
```

更新2：

```
string pathToStoreTXT = Application.UserAppDataPath; 
```

`pathToStoreTXT`路径类似于：“C:\Users\UserName\AppData”。您的计时器需要一直检查该文件夹。将您的 txt 文件命名为“MyReminders.txt”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:52:42.213

简单的流程是：

1.  运行应用程序时，检查文件是否已创建。该文件将存储您的数据！
2.  检查文件中是否有任何记录。2a. 显示过期消息并清除它们。
3.  像 Dilshod 建议的那样添加计时器。3a。将提醒日期时间转换为时间戳并将其与消息连接以存储在文本文件中
4.  每 1 分钟创建一个带有滴答事件的计时器对象，类似于[这样](http://msdn.microsoft.com/en-us/library/system.timers.timer%28v=vs.100%29.aspx)。（显然您需要设置作为参数传递的频率）

# .net - 突出显示 DataGridView VB.NET 中的任何重复项

> ID：15529141
> 
> 赞同：0
> 
> 时间：2013-03-20T16:22:16.147
> 
> 标签：.net, vb.net, winforms, vb.net-2010

我有一个从 MySQL DB 填充的 DataGridView，单击一个按钮，我希望通过突出显示特定列中的重复项来验证表。

做这个的最好方式是什么。该字段不是数据库中的主键，可以复制，但是只需要明确是这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:34:52.883

这将是#Cyborgx37 建议的一种方法

```
 Sub HighlightDupes(ByRef dgv As DataGridView, ByVal col_id As Integer)

    Dim dgvCol As DataGridViewColumn = dgv.Columns(col_id)
    dgv.Sort(dgvCol, System.ComponentModel.ListSortDirection.Ascending)

    Dim numRows As Integer = dgv.Rows.Count() ''// or dgv.SelectedRows.Count() for the selected rows
    Dim flagFirstRow As Boolean = True
    Dim tempStr As String = ""

    For Each RW As DataGridViewRow In dgv.Rows ''// or dgv.SelectedRows for the selected rows
        On Error Resume Next
        If Not (flagFirstRow) Then
            If (RW.Cells(col_id).Value.ToString() = tempStr) Then

                ''// RW.Cells(col_id).Style.BackColor = Color.LightGreen
                ''// RW.Cells(col_id).Style.BackColor = Color.White

                RW.Cells(col_id).Selected = True
                dgv.CurrentCell.Style.BackColor = Color.LightGreen
                dgv.CurrentCell.Style.ForeColor = Color.White

                MsgBox("Dupe found: " & tempStr)

            End If

        End If
        tempStr = RW.Cells(col_id).Value.ToString()
        flagFirstRow = False
    Next

End Sub 
```

.

您将使用 datagridview 名称然后使用列索引调用 sub。例如`HighlightDupes(DataGridView1, 0)`，这将对第一列进行排序，并找到受骗者。

由于排序，不确定单元格格式是否可以正常工作。填充数组然后排序然后找到该数组的重复项然后循环遍历 dgv 并在未排序时设置单元格的格式可能会更好。或者您可以查看[dgv rowprepaint 事件](http://www.vbforums.com/showthread.php?465358-RESOLVED-Change-DataGridView-cell-color-based-on-other-columns#post_message_3971087)可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:31:33.247

按要突出显示的列对 DataGridView 进行排序，然后遍历每一行。如果列值与前一个值相同，则应用突出显示。

如果您想花哨，您可以针对您的数据源（可能是 DataTable，但可能是其他东西）编写一个 LINQ 查询，该查询按所需的列分组，计算每个组中的实例数，然后只选择那些值大于 1 的计数。然后您可以将其用作查找或将其连接回数据源以“标记”那些具有重复值的行。应用突出显示需要检查这个新字段，然后相应地应用突出显示。

没有时间编写一些示例代码，但应该不会太难。

**编辑**

1.  [使用DataGridView.Sort](http://msdn.microsoft.com/en-us/library/0868ft3z.aspx)应用排序。
2.  遍历[Rows](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rows.aspx)集合。
    1.  如果当前行是第一行 ( ) 则跳过[`Index`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewband.index.aspx)`= 0`
    2.  [否则，从Cells](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.cells.aspx) [ [columnName](http://msdn.microsoft.com/en-us/library/0ee9kshd.aspx) ]中获取所需列的值。[当前行和上一行的值](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcell.value.aspx)。
    3.  比较它们。如果它们相同，则[应用样式](http://msdn.microsoft.com/en-us/library/1yef90x0.aspx)，例如背景颜色。

# javascript - 控制器内的动态字段参数

> ID：15529146
> 
> 赞同：0
> 
> 时间：2013-03-20T16:22:36.920
> 
> 标签：javascript, jquery, ruby-on-rails

我有一个包含一些使用 jQuery 动态添加的日期字段的表单，为了处理提交的参数，我需要计算这些字段的数量，然后在控制器内部我可以根据该数字进行循环：

**应用程序.js**

```
$(function() {
  var scntDiv = $('#foo');
  var i = $('#foo div.bar').size();

  $(document).on('click', '#addField', function() {
    $('<div class="bar"><input type="text" id="start" name="start_'+ i +'"><input type="text" id="end" name="end_'+ i +'"></div>').appendTo(scntDiv);
    i++;
    return false;
  }); 
```

假设我添加了 n 个输入，那么 html 输出将是：

```
<input type="text" id="start" name="start_1">
<input type="text" id="end" name="end_1">
.
.
.
<input type="text" id="start" name="start_n">
<input type="text" id="end" name="end_n"> 
```

我的问题是，如何在我的控制器中访问那个“n”？

我必须将所有日期范围存储在一个数组中，然后根据每个日期创建多个记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:33:58.197

另一种选择，接近于如何`nested_attributes`实现（不是你会看到的最漂亮的 javascript，但你得到了精神）：

```
$(function() {
  var $scntDiv = $('#foo');

  $('#addField').click( function(){
    var index = $scntDiv.find( '.bar' ).size();
    $(
      '<div class="bar">' +
        '<input type="text" class="start" name="ranges[' + index + '][start]">' +
        '<input type="text" class="end" name="ranges[' + index + '][end]">' +
      '</div>'
     ).appendTo( $scntDiv );
     return false;
  });
}); 
```

这将建立一个像这样的哈希：

```
>> params[:ranges]
=> {"0" => {"start" => "a_date_string", "end" => "another_date_string"}, 
    "1" => {"start" => "a_date_string", "end" => "another_date_string"} } 
```

然后很容易处理这个哈希，即使使用质量分配：

```
class MyClass
  def ranges= ranges
    ranges.each do |*,attributes|
      # whatever logic pleases you, self.ranges.build( attributes ) for instance
    end
  end
end 
```

然而，如果你这样做，你最好直接使用[nested_attributes](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)，除非你有一个非常复杂的逻辑要执行。嵌套属性带有很多好东西，例如子记录的自动实例化、记录删除管理、某些属性的自动拒绝（如果需要）、它们与`fields_for`表单助手配合得很好等。它是 Rails 原生的，所以为什么要麻烦和重新发明轮子?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:00:18.150

这会有所帮助。

```
$(function() {
  var scntDiv = $('#foo');

  $('#addField').click(function(){
    $('<div class="bar"><input type="text" id="start" name="start[]"><input type="text" id="end" name="end[]"></div>').appendTo(scntDiv);
    return false;
  });
}); 
```

这将发送如下参数。例如

```
"start"=>["1", "2", "3"], "end"=>["11", "22", "33"] 
```

# python - wxpython EVT_KEY_DOWN 未绑定到框架

> ID：15529150
> 
> 赞同：0
> 
> 时间：2013-03-20T16:22:48.850
> 
> 标签：python, wxpython

**免责声明：** 也许我做错了，但我只用 wxpython 进行 GUI 开发大约 24 小时。所以一般的建议是值得赞赏的。

**目标：** 我正在尝试通过制作一个简单的屏幕保护程序来熟悉 wxpython。

**问题：** 我试图绑定鼠标移动和键盘移动（也就是试图捕获任何用户输入），因此它会在事件发生时销毁（）应用程序（典型的屏幕保护程序行为）。到目前为止，我的鼠标事件被捕获并正确销毁，但我的键盘事件没有（我可能会在我的键盘上敲击！）。正如其他 SO 帖子所推荐的那样，我已经尝试过 EVT_CHAR 和 CHAR_HOOK。我什至去看看我的焦点在哪里——因为我认为这是我的问题（注意这条线有 self.SetFocus()——如果你删除它并移动鼠标，返回的“self.FindFocus( )" 由鼠标移动事件触发的返回 None... 使用 SetFocus() 现在返回我的 SpaceFrame 类）。

**问题：** 为什么我不能捕获击键并激活我的 keyboardMovement() 方法？有趣的是，[这里](http://www.blog.pythonlibrary.org/2009/08/29/wxpython-catching-key-and-char-events/)的示例对于键盘事件向下/向上工作得很好。所以我 100% 是用户错误。

```
import wx
import random

MAX_INVADERS = 10
INVADERS_COLORS = ["yellow_invader",
                   "green_invader",
                   "blue_invader",
                   "red_invader"]

class SpaceFrame(wx.Frame):
    def __init__(self):
        """
        The generic subclassed Frame/"space" window.  All of the invaders fall
        into this frame.  All animation happens here as the parent window
        as well.
        """
        wx.Frame.__init__(self, None, wx.ID_ANY, "Space Invaders", pos=(0, 0))
        self.SetFocus()
        self.Bind(wx.EVT_MOTION, self.mouseMovement)
        self.Bind(wx.EVT_CHAR_HOOK, self.keyboardMovement)
        self.panel = wx.Panel(self)
        self.panel.SetBackgroundColour('black')
        self.SetBackgroundColour('black')
        self.monitorSize = wx.GetDisplaySize()
        for invader in range(0, MAX_INVADERS, 1):
            randX = random.randint(0, self.monitorSize[0])
            self.showInvader(coords=(randX, 0),
                             invader=random.choice(INVADERS_COLORS),
                             scale=(random.randint(2, 10)/100.0))

    def mouseMovement(self, event, *args):
        print self.FindFocus()

    def keyboardMovement(self, event, *args):
        self.Destroy()

    def showInvader(self, coords=(0, 0), invader="green_invader", scale=.05):
        """
        Displays an invader on the screen
        """
        self.timer = wx.Timer(self)
        self.Bind(wx.EVT_TIMER, self.dropInvader, self.timer)
        self.timer.Start(1000)
        self.invader = wx.Bitmap("{0}.png".format(invader))
        self.invader = wx.ImageFromBitmap(self.invader)
        self.invader = self.invader.Scale((self.invader.GetWidth()*scale),
                                          (self.invader.GetHeight()*scale),
                                          wx.IMAGE_QUALITY_HIGH)
        self.result = wx.BitmapFromImage(self.invader)
        self.control = wx.StaticBitmap(self, -1, self.result)
        self.control.SetPosition(coords)
        self.panel.Show(True)

    def moveInvader(self, coords):
        self.control.SetPosition(coords)

    def dropInvader(self, *args):
        # print "this hit"
        self.control.SetPosition((100, 600))

if __name__ == "__main__":
    application = wx.PySimpleApp()
    window = SpaceFrame()
    window.ShowFullScreen(True, style=wx.FULLSCREEN_ALL)
    application.MainLoop() 
```

**到目前为止所做的研究：** 也许我错过了一些东西，但这里没有什么对我来说很突出。

*   [Source1](http://www.blog.pythonlibrary.org/2009/08/29/wxpython-catching-key-and-char-events/) - 鼠标与 Python 示例
*   [Source2](https://stackoverflow.com/questions/3570254/in-wxpython-how-do-you-bind-a-evt-key-down-event-to-the-whole-window) - 类似的问题（但不完全是我的解决方案）
*   [Source3](http://wxpython.org/docs/api/wx.KeyEvent-class.html) - WXpython 论坛/邮件列表
*   [Source4](http://wxpython-users.1045709.n5.nabble.com/question-how-to-catch-the-keyboard-event-in-wxpython-td2370983.html) - WXpython 论坛/邮件列表

# google-fusion-tables - 融合表信息窗口不再显示

> ID：15529154
> 
> 赞同：0
> 
> 时间：2013-03-20T16:23:00.893
> 
> 标签：google-fusion-tables

我是 Google 信任的摄影师，负责他们在法国的商务虚拟旅游项目。我开发了一个网站 www.visitme360.com，展示了在法国实现的虚拟旅游 该网站非常受欢迎，并且基于 Fusion Table 和 Google Map

直到几天前它工作得很好。:-( 现在，当您单击标记时，信息窗口不再显示，无论是在我的网站上，还是在 Google Drive 界面上！

在我的网站 ( [http://www.visitme360.com/index.php](http://www.visitme360.com/index.php) ) 上，您可以使用橙色按钮按活动过滤地图 这也不再有效

请求的代码是：

```
layer = new google.maps.FusionTablesLayer({query:{select:"Adresse", from:"1Sk8GO5kNILZhmmXwzqPAGdhoNrk5xKs0Co8eRx4", where:"Secteur CONTAINS '" + critere + "'"}, map:map}) 
```

您知道为什么这突然不再起作用了吗？

谢谢你的帮助

# java - 休眠条件：NOW() < 日期 + 1 天

> ID：15529170
> 
> 赞同：7
> 
> 时间：2013-03-20T16:23:57.243
> 
> 标签：java, mysql, hibernate

我在 MySQL 数据库中有一个表，`date(DATETIME)`上面有一列。如果假设我想在哪里查询记录，我该如何在 java Hibernate 标准中表达它`NOW() < ('date' + 1 day)`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T16:31:50.223

你可以反过来比较一下`'date' >= (NOW - 1 day)`。

假设您有一个具有该属性的映射`MyTable`类：`date`

```
Calendar c = Calendar.getInstance();
c.add(Calendar.DATE, -1); 
Criteria criteria = session.createCriteria(MyTable.class);
criteria.add(Restrictions.ge("date", c.getTime());
List results = criteria.list(); 
```

# php - PHP初学者。尝试显示 UserId

> ID：15529175
> 
> 赞同：0
> 
> 时间：2013-03-20T16:24:11.857
> 
> 标签：php, phpmyadmin

我正在 PhpMyAdmin 上访问我的数据库，我所有的名字等都是正确的，但由于某种原因**UserId**无法正常工作。有人可以指出我正确的方向吗？

我已经尝试打印它，但没有任何显示。

```
<?php session_start(); 
$username = $_GET['username'];
$password = $_GET['password'];

// Create connection

$con=mysqli_connect("localhost","root","","test");

// Check connection
if (mysqli_connect_errno($con))
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$result = mysqli_query($con,"SELECT * FROM user2 where username='$username' and   password='$password'");

$row_cnt = mysqli_num_rows($result);
if($row_cnt >0){

while($row = mysqli_fetch_array($result)){
$UserId = $row['UserId'];
}
$sqlQuery2 = "SELECT ProductID, Name, Price, Description FROM product";

echo "Hello ".$username."<br>" .$UserId.   "<br> This is a list of products";

$result2 = mysqli_query($con,$sqlQuery2);

echo "<table border='1'>
<tr>
<th>ProductID</th>
<th>Name</th>
<th>Price</th>
<th>Description</th>
<th>View</th>
 </tr>";

while($row = mysqli_fetch_array($result2))
 {
 echo "<tr>";
 echo "<td>" . $row['ProductID'] . "</td>";
 echo "<td>" . $row['Name'] . "</td>";
 echo "<td>" . $row['Price'] . "</td>";
 echo "<td>" . $row['Description'] . "</td>";
 echo "<td><a href=\"detailview.php?ProductID=".$row['ProductID']."\"'>Detailed View</a></td>";
 echo "</tr>";
 }
echo "</table>";

mysqli_close($con);
?>
<a href="userupdatedetails.php?UserId=<?php echo $UserId ?>">Update My Details</a>
<?php } else{
echo "invalid login "; }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:41:17.317

使用 var_dump($var) 查看变量中的内容

第一次检查 $result 中返回的内容，然后在使用之前检查 $UserId，然后检查是否设置了 $UserId（如果条件为假，则未设置 ou var ..）您也应该检查 $row_count

你应该
在这里缩进你的代码是你的代码重新缩进：

```
<?php session_start(); 
$username = $_GET['username'];
$password = $_GET['password'];

// Create connection

$con=mysqli_connect("localhost","root","","test");

// Check connection
if (mysqli_connect_errno($con))
{
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$result = mysqli_query($con,"SELECT * FROM user2 where username='$username' and   password='$password'");

$row_cnt = mysqli_num_rows($result);
if($row_cnt >0){

    while($row = mysqli_fetch_array($result)){
        $UserId = $row['UserId'];
    }
    $sqlQuery2 = "SELECT ProductID, Name, Price, Description FROM product";

    echo "Hello ".$username."<br>" .$UserId.   "<br> This is a list of products";

    $result2 = mysqli_query($con,$sqlQuery2);

    echo "<table border='1'>
    <tr>
    <th>ProductID</th>
    <th>Name</th>
    <th>Price</th>
    <th>Description</th>
    <th>View</th>
    </tr>";

    while($row = mysqli_fetch_array($result2))
    {
        echo "<tr>";
        echo "<td>" . $row['ProductID'] . "</td>";
        echo "<td>" . $row['Name'] . "</td>";
        echo "<td>" . $row['Price'] . "</td>";
        echo "<td>" . $row['Description'] . "</td>";
        echo "<td><a href=\"detailview.php?ProductID=".$row['ProductID']."\"'>Detailed View</a></td>";
        echo "</tr>";
    }
    echo "</table>";

    mysqli_close($con);
    ?>
    <a href="userupdatedetails.php?UserId=<?php echo $UserId ?>">Update My Details</a>
    <?php
}
else
{
    echo "invalid login ";
}
?> 
```

# c# - C# .net 3.5 进程间通信验证子进程是否启动正常

> ID：15529176
> 
> 赞同：1
> 
> 时间：2013-03-20T16:24:12.700
> 
> 标签：c#, process

我有使用 process.start(..) 另一个进程的父进程。
子进程稍后将拥有我称之为 Initialized() 的 WCF 服务。
在调用任何方法之前，我想验证并确保该过程已经开始正常。
现在我的代码是：

```
Process driverProcess = new Process();
driverProcess.StartInfo.FileName = ".."
driverProcess.Start(); 
```

然后我使用我的 WCF 服务客户端：

```
client.Initialize(..); 
```

它正在工作，因为过程开始正常，但我没有任何迹象表明这一点。

例如，如果计算机不允许启动新进程，Process.Start() 将无法工作，我的客户端将尝试 .initialize() 一个不存在的 WCF 服务。

我可以使用什么技术来知道该过程已经开始？命名管道客户端-服务器？

**我不能使用 process.WaitForInputIdle()**因为这是我从中删除了 form1() 的 Winform 应用程序。“桂少窗口应用”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T08:42:07.920

我最后使用的是EventWaitHandle。
我用它的进程 ID 命名父进程上的事件，当我创建子进程时，我将父进程 ID 作为 arg 发送。
当子进程完成其初始化时，它会创建一个新的具有相同名称的 ManualResetEvent（来自 arg[0] 的父进程 id）和 .Set() 它。

**父进程代码：**

```
Process newProcess= new Process();  
newProcess.StartInfo.FileName = "YourProcessPath+FileName.exe" //use CombinePath  
newProcess.StartInfo.Arguments = string.Format("{0}", Process.GetCurrentProcess().Id);  
var handle = new EventWaitHandle(false, EventResetMode.AutoReset, Process.GetCurrentProcess().Id.ToString());
handle.Reset();
handle.WaitOne(); //wait until event is Set() from child Process 
```

**子进程中的代码：**

```
signalParentProcessImReady = new EventWaitHandle(false, EventResetMode.AutoReset, args[0]);  
DoWwork()... initialize WCF Services for example...
signalParentProcessImReady .Set(); //Signal parent process Im ready 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:27:25.100

您可以检查 Start() 方法的布尔值。此外，您可以将 Exited 事件处理程序与进程相关联，以告诉您的应用程序该应用程序已完成。通过这种方式，您还可以知道它是否立即开始和结束。

*编辑：*我忘了提到你也可以把你的起始代码放在一个 try 块中，并检查 Start() 方法可能抛出的异常。

# php - 淘汰赛和 AJAX 发布请求 PHP

> ID：15529179
> 
> 赞同：0
> 
> 时间：2013-03-20T16:24:30.567
> 
> 标签：php, javascript, json, knockout.js, laravel

我试图让我们的淘汰赛表单提交给一个 php 脚本，但我遇到了 undefinedIndex 错误。我很确定这是我们在 ajax 函数中发送数据的方式。

这是阿贾克斯：

```
 $.ajax({
        url: '/orders/add',
        type: 'post',
        data: {payload:ko.toJSON(allModel)},
        contentType: 'application/json',
        success: function (result) {
            alert(result);
        }
    }); 
```

这是PHP（我们使用laravel）

```
 return json_decode($_POST["payload"]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:27:00.843

皮特是正确的。您只需要使用一个数据字段。如果您想要一个变量，请在 $.ajax 帖子之前定义它

```
var dataPayload = ko.toJSON(allModel);
$.ajax({
    url: '/orders/add',
    type: 'post',
    data: {payload: dataPayload},
    contentType: 'application/json',
    success: function (result) {
        alert(result);
    }
}); 
```

# maven - 将 Twitter 引导文件放在 maven 项目中的什么位置？

> ID：15529184
> 
> 赞同：14
> 
> 时间：2013-03-20T16:24:53.777
> 
> 标签：maven, twitter-bootstrap

我开始使用 Twitter Bootstrap 和 Spring MVC 创建一些东西。有人能告诉我将 Bootstrap CSS/JS/HTML 文件放在 maven 项目结构中的什么位置吗？

我的 JSP 页面显示良好。但是，它无法控制 CSS 和 JS 文件。

```
<link href="..resources/css/bootstrap.css" rel="stylesheet">
<link href="../resources/css/bootstrap-responsive.css" rel="stylesheet"> 
```

![在此处输入图像描述](../Images/c5fe68cf421ac6e7ae9f4baa2ab48270.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-20T18:22:09.750

您可以使用[Web Jars](http://www.webjars.org/)将它们作为 Maven 依赖项引入。这为您提供了 Maven 依赖管理的所有好处。文档页面详细说明了如何在您的应用程序中使用资源。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T17:19:05.130

“src/main/resources”文件夹用于在生成的工件（在本例中为“WEB-INF/classes”下的 WAR）中复制并与已编译的 Java 代码集成的资源。

“src/main/webapp”文件夹代表你的网页内容的根目录。您需要在那里添加这些 Web 内容资源，以便 JSP 可以使用它们。

# jquery - 使用 jQuery 在与特定类和 href 链接后添加图像

> ID：15529187
> 
> 赞同：1
> 
> 时间：2013-03-20T16:25:04.073
> 
> 标签：jquery

我有以下代码...

```
<a href="test123.html" class="testclass">Test Link</a> 
```

我需要在链接之后添加一个图像，但基于类和 href。我尝试过：

```
jQuery(".testclass a[href$='test123.html']").append("<br /><div style='padding:10px;'><img src='testimage.jpg'></div>"); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:27:44.053

尝试这个

```
jQuery("a.testclass[href$='test123.html']").after("<br /><div style='padding:10px;'><img src='testimage.jpg'></div>"); 
```

应在所选元素之后立即插入 div。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T16:28:03.147

您需要`after()`在元素之后使用插入。`append()`用于在元素末尾添加子元素。

```
jQuery("a.testclass[href$='test123.html']").after("<br /><div style='padding:10px;'><img src='testimage.jpg'></div>"); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/rpXCF/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T16:28:19.740

您的选择器不正确。应该

```
jQuery("a.testclass[href$='test123.html']").append(YourHtml) 
```

# android - 可以使用片段创建和处理操作栏中的操作项吗？

> ID：15529197
> 
> 赞同：1
> 
> 时间：2013-03-20T16:25:31.443
> 
> 标签：android, android-fragments, android-actionbar, pane

## 背景

我有一个类似的场景，如关于片段的 android 网站示例所示（链接[在这里](http://developer.android.com/training/multiscreen/index.html)）：

*   小屏幕，纵向：单窗格
*   小屏幕，横向：单窗格
*   7" 平板电脑，纵向：单窗格
*   7" 平板电脑，横向：双窗格，宽
*   10" 平板电脑，纵向：双窗格，窄
*   10" 平板电脑，横向：双窗格，宽
*   电视，横向：双窗格，宽

在我的案例中，操作栏始终显示，现在我只有操作项。

## 问题

下一个场景非常奇怪：

*   设备有一个纵向窗格和两个横向窗格。

*   我的两个片段都创建了自己的操作栏项目。

*   从纵向切换到横向显示所有操作项（这是我想要的）

*   从横向切换到纵向显示所有操作项。

    这没有多大意义，因为右窗格不存在，但由于某种原因，它的片段似乎存在于片段管理器中，并且它的 onCreateOptionsMenu 被调用，即使它根本没有显示。

## 我试过的

我试图在包含两个片段的活动上调用 invalidateOptionsMenu() ，但它没有帮助

我还为每个片段添加了下一个代码，它运行良好：

```
@Override
public void onStart() {
    super.onStart();
    setHasOptionsMenu(true);
}

@Override
public void onStop() {
    super.onStop();
    setHasOptionsMenu(false);
} 
```

## 问题

为什么会这样？

我启用/禁用 optionsMenu 的解决方案（从而启用/禁用片段创建的操作栏项目）是一个可行的解决方案吗？有更好的解决方案吗？

让片段首先处理操作项甚至是一件好事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:39:50.950

在单窗格案例中，我通常只有片段处理操作栏项目。从逻辑上讲，可见片段此时拥有所有屏幕空间，并且由于屏幕空间有限，因此使用操作栏是有意义的。在双窗格的情况下，我倾向于将每个片段的 UI 保留在其自己的片段中，并且不使用操作栏。但是，如果它在您的场景中具有视觉意义，我看不出您有任何不能这样做的理由。

我的理解是在配置更改之前存在的一组片段在配置更改之后重新创建。Android 不依赖 Activity 的布局文件或类似的东西。您创建的任何片段都被认为是要在配置更改中保留的状态。当您的活动被拆除时，您可以尝试手动删除可能不必要的片段，然后依靠 Android 从布局中重新创建它，如果它需要存在的话。然而，这是受过教育的思考，未经测试。

也就是说，我认为您当前的解决方案没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:42:01.820

您可以在`onPrepareOptionsMenu(..)`右侧片段的方法中，通过查看`Configuration`可获取的 from来适当地隐藏和显示菜单项`getResources().getConfiguration()`。

正如另一个答案所说，在运行时更改显示的片段数量通常是不可取的——我的应用程序曾经这样做，但我遇到了数千个问题。

# meteor - 观察不触发

> ID：15529202
> 
> 赞同：0
> 
> 时间：2013-03-20T16:25:50.770
> 
> 标签：meteor

我想使用新的观察功能，但它似乎不起作用。至少对我来说不是。

首先是这里的结果`mrt --version`

```
Meteorite version 0.4.6
Meteor version 0.5.9 (git checkout) 
```

目标是创建一堆可拖动元素，它们的位置会在客户端之间反映出来。

这是我的查询：

```
 var items = Items.find({});
  var handle = items.observe( {
     changed: function (newDocument, oldDocument) {
        if ( newDocument._id !== dragged ) {
           $( "#" + id ).style( "left", newDocument.left );
           $( "#" + id ).style( "top", newDocument.top );
        }
     }
  } ); 
```

我知道位置已更改，因为当我重新加载页面时，图像会同步。我尝试了观察和观察变化，结果相同。如果我在回调中设置断点，它永远不会被调用。

难道是因为我还有`insecure`吗`autopublish`？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:31:04.750

看起来它有助于删除`insecure`，`autopublish`但更重要的是，等待订阅准备好。

我最终使用了该`Meteor.subscribe("name", function() {});`语法，它现在可以工作了。

这是完整的代码：

```
Meteor.subscribe("allItems", function() {
   var items = Items.find( {} );
   Session.set( "items", items.fetch() );

   handle = items.observe( {
      changed: function ( newDocument, oldDocument ) {
         if ( newDocument._id !== dragged ) {
            $( "#" + newDocument._id ).css( "left", newDocument.left );
            $( "#" + newDocument._id ).css( "top", newDocument.top );
         }
      }
   } );
}); 
```

希望有帮助

# ruby - Ruby - Sqrt 在一个非常大的整数上导致舍入问题

> ID：15529205
> 
> 赞同：0
> 
> 时间：2013-03-20T16:25:56.357
> 
> 标签：ruby, rounding-error, math.sqrt

我正在尝试解决斐波那契问题，并且遇到了四舍五入的问题。

如果`i = 8670007398507948658051921`那么`fib1 = 19386725908489880000000000.0`.

我的代码如下 - 感谢您的帮助。

```
def is_fibonacci?(i)

  fib1 = Math.sqrt(5*(i**2)+4)
  fib2 = Math.sqrt(5*(i**2)-4)

  fib1 == fib1.round || fib2 == fib2.round ? true : false

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:30:54.480

像这样的 sqrt 对这么大的值不起作用，因为 sqrt 返回一个 Float 并且它的精度在这里不够用。我建议您实现自己的 sqrt 函数。有几种算法建议如何做到这一点，但我个人认为使用二进制搜索来计算函数的反向是最简单的：

```
def sqrt a
  begv = 1
  endv = a
  while endv > begv + 1
     mid = (endv + begv)/2
     if mid ** 2 <= a
        begv = mid
     else
        endv = mid
     end
  end
  return begv
end 
```

或者，您可以尝试对 sqrt 使用 BigDecimal（简单地提高幂`0.5`），但我更喜欢上述方法，因为它不涉及任何双重计算。

# sql - 如何执行连接两个现有表的部分并将其插入新表的查询？

> ID：15529206
> 
> 赞同：2
> 
> 时间：2013-03-20T16:26:00.210
> 
> 标签：sql

我有一张带有调查表的表格和一张带有小部件的表格。在这两个表之间应该有第三个表连接这两个表。以下正是我正在寻找的。

```
Survey:

survey_id   numeric(18, 0)  Unchecked Primary Key
dashboard_id    numeric(18, 0)  Unchecked Foreign Key
survey_title    nvarchar(250)   Unchecked

Widget:

widget_id   numeric(18, 0)  Unchecked Primary Key
dashboard_id    numeric(18, 0)  Checked Foreign Key 
```

这两个表具有共同的dashboard_id（仪表板表的主键）。

**问题：**

如何根据匹配的dashboard_id 连接这两个表并将这个新表插入到我的第三个表中。以及如何将上述表的两个主键放入新的第三张表中，如下所示：

```
Survey_link_widget:

survey_link_widget_id   numeric(18, 0)  Unchecked
survey_id   numeric(18, 0)  Unchecked
widget_id   numeric(18, 0)  Unchecked
data_series_name    nvarchar(250)   Unchecked
data_series_displaytitle    nvarchar(250)   Checked 
```

survey_link_widget_id 是自动递增的，它会自行创建。survey_id 和 widget_id 应该来自我打算根据dashboard_id 加入的两个表

此外，是否很难将第 4 列和第 5 列（data_series_name 和 data_series_displaytitle）添加到我正在寻找的插入/连接查询中？

如果您认为我处理这个“链接表”完全错误，请告诉我！我的 SQL 目前真的很生疏，所以我可能只是在做一些愚蠢的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:31:37.160

有许多不同的可能性，但这里有一个一般的想法：

```
INSERT INTO Survey_link_widget (survey_id, widget_id)
SELECT
    survey_id,
    widget_id
FROM
    Survey INNER JOIN Widget ON Survey.dashboard_id = Widget.dashboard_id 
```

除此之外，您询问添加`data_series_name`and `data_series_displaytitle`，当然您可以这样做（只需将它们添加到第一行的逗号分隔列表中），但如果您这样做，您必须将一些数据放入这些字段（即，在 SELECT 子句中添加第 3 和第 4 项）——它可以是一个字段，也可以是静态的（将某些内容放在引号中）。

# ios - 更新按钮文本时程序崩溃

> ID：15529212
> 
> 赞同：0
> 
> 时间：2013-03-20T16:26:11.567
> 
> 标签：ios, objective-c

对不起，如果标题似乎有点模棱两可。

我正在从`viewDidLayoutSubviews`我的类的方法中调用一个函数 checkLogin。这是该方法的代码：

```
KeychainItemWrapper *keychain = [[KeychainItemWrapper alloc] initWithIdentifier:@"UserLogin" accessGroup:nil];
NSString *activeUser = [keychain objectForKey:(id)kSecAttrAccount];
int length = [activeUser length];
NSLog(@"%d", length);

if (length > 0) {
    NSLog(@"Greater than 0");
    [testLabel setHidden:FALSE];
    [testLabel setText:@"Currently logged in"];
    /*

     To fix this, create a new button?

     */
    [loginButton setTitle:@"Log Out" forState:UIControlStateNormal];
} else {
    NSLog(@"Less than 0");
    [testLabel setHidden:TRUE];
    [loginButton setTitle:@"Log In" forState:UIControlStateNormal];
    //[loginButton setTitle:@"Log In" forState:UIControlStateHighlighted];
}
// Logout [keychain resetKeychainItem]; 
```

每当我试图更改文本的标题时，我的程序就会崩溃，我不明白为什么。谁能帮我解决这个问题？

我得到的错误是

```
*** Assertion failure in -[UIView layoutSublayersOfLayer:], /SourceCache/UIKit/UIKit-2380.17/UIView.m:5781\ 2013-03-20 16:24:55.751 CompAir[5321:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after sending -viewDidLayoutSubviews to the view controller. FirstViewController's implementation needs to send
-layoutSubviews to the view to invoke auto layout.'} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:56:35.557

好的，所以我现在设法解决了这个问题。出于某种原因，我对我的登录按钮的宽度有额外的限制，这些限制在其他按钮上不存在（以及它们为什么起作用）。消除这些约束后问题解决。

# python - python：从zip存档中的所有文件中提取特定行

> ID：15529213
> 
> 赞同：1
> 
> 时间：2013-03-20T16:26:16.390
> 
> 标签：python, zip

我需要从 zip 存档中包含的所有文件中提取特定行（第二行）。我的尝试（显然）没有奏效。我能找到的与此相关的所有内容都涉及使用特定的字符串/变量来缩小要从存档文件中提取的内容的范围——在我的情况下，我不能使用它。

我得到的最接近的是从所有文件中提取所有行。

```
import zipfile

with zipfile.ZipFile() as input_zipfile:
    for f in input_zipfile.namelist():
         for line in input_zipfile.read(f).split("\n"):
               print line 
```

理想情况下，我想使用类似的东西`.readlines()`，然后`print line[1]`获取每个文件的第二行。但这不适用于 zipfile。我是否需要创建临时文件并使用该语法，或者有没有办法解决这个问题？

我尝试将最后一行更改为，`print line[1]`但随后我得到一个`IndexError`.

附带说明一下，文件并不大（4-12 行）。所以我想制作临时文件不是不可能的，但它似乎过于迂回和不雅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:37:08.150

这将起作用：

```
import zipfile

with zipfile.ZipFile() as input_zipfile:
    for f in input_zipfile.namelist():
        lines = input_zipfile.read(f).split("\n")
        print lines[1] 
```

（您的原始代码无缘无故地循环遍历行列表，而不仅仅是打印第二行）

# forms - Twitter Bootstrap - 下拉高度太小

> ID：15529217
> 
> 赞同：0
> 
> 时间：2013-03-20T16:26:35.373
> 
> 标签：forms, twitter-bootstrap

我在 Ruby on Rails 应用程序中使用引导程序。我使用火狐。我发现下拉字段（选择标签）的高度太小了。但是文本字段的高度是合适的。我也必须将以下代码添加到 application.css 来修复它：

```
select {
height: 38px !important;
} 
```

现在下拉列表正确显示其内容，尽管它的整体高度（框）比文本字段大一点。有没有更简洁的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:11:42.660

我发现从 application.scss 中删除样式并改为修改 app/assets/stylesheets/custom.css.scss 更合适。custom.css.scss 由 Bootstrap 生成。在该文件中，所有 FORM 元素的填充设置为 10px。我将 SELECT 元素的填充设置为 2px，其余部分保持不变。

# javascript - 复制值而不是粘贴

> ID：15529219
> 
> 赞同：0
> 
> 时间：2013-03-20T16:26:47.850
> 
> 标签：javascript, jquery, html

下面也是我的代码的副本：

```
 <th scope="row" class="style1">test</th>
        <td id="result7" class="style1" style="width: 229px"></td>
        <td id="result8" class="style1" style="width: 229px"></td>
        <td id="result9" class="style1" style="width: 229px"></td>
    </tr>
  </tbody>
</table> 
```

最后是 JS；

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:36:43.160

`$("#Result #result1").html($("#Data #val1").html());`

在这种情况下，使用`.html()`而不是`.text()`处理源中的潜在 HTML 内容（如 HTML 实体）更为明智。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:32:08.240

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:32:09.313

您使用了不正确的选择器。点 (.) 选择器用于类。您正在寻找一个 id，因此您需要使用哈希 (#) 选择器。另外，`.text()`不要使用`.val()`. 像这样：

```
$('#Result #result1').text($('#Data #val1').text()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T16:32:16.417

使用 $("#result1")............

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T16:35:00.697

看起来像：更简单

```
$('#Result').find('#result1').text($('#Data').find('#val1').text()); 
```

注意 ID 必须是唯一的所以取出第一个参考

```
$('#result1').text($('#val1').text()); 
```

注意如果你有很多这些，我会使用类而不是 ID。

一次做一个：（注意：如果它有嵌入的东西，请使用 html 而不是文本）

```
$('#Result').find('td.style1').eq(0).html($('#Data').find('td.style1').eq(0).html());
$('#Result').find('td.style1').eq(1).html($('#Data').find('td.style1').eq(1).html()); 
```

做所有这些：

```
$('#Data').find('td.style1').each(function(index){
    $('#Result').find('td.style1').eq(index).html($(this).html());
}); 
```

# c# - C# 方法从 SQL Query 返回两个值，然后通过 jquery ajax 调用获取

> ID：15529220
> 
> 赞同：1
> 
> 时间：2013-03-20T16:26:51.160
> 
> 标签：c#, jquery, sql, ajax

**更新：此代码现在有效！** 在下面的答案和我从罗马尼亚给我发电子邮件的开发人员之间，我把它整理好了。

```
 [Method]
    public object ConvDetails(string SENDERNAME, string VIEWURL)
    {

        {
            var list = new List<object>();

            new Command("select top 1 o.name [SENDERNAME], view_url [VIEWURL] from MESSAGE m join OPR_SECD o on UPDATED_BY = O.RECNUM where VIEW_URL like 'conversation.aspx%' and DELIVER_TO in (select OPR_INITIAL from OPR_SECD where recnum = @CURRENT_USER_ID) order by m.RECNUM desc")
                .AddInt("CURRENT_USER_ID", Common.UserID)
                .Each(R => list.Add(new
                {
                    VIEWURL = R.GetString("VIEWURL"),
                    SENDERNAME = R.GetString("SENDERNAME")
                }));

            return list;

        };
    } 
```

这是我的 ajax 调用，用于从我的方法中获取两个字符串：

```
 convDetails: function() {
    $.ajax({
        url: BASE_URL + "pages/services/messages.ashx?method=convdetails",
        dataType: "json",
        async: true,
        data: {},
        success: function(data) {
            $("a.new-message-alert").attr("href", '' + data[0].VIEWURL);
            $("span#message-from").text("New Message From: " + data[0].SENDERNAME);
        }
    });
} 
```

更新：

在我收到下面的回复和给我们在罗马尼亚的开发人员的几封电子邮件之间，我能够把它拼凑起来。我将我的代码更新为有效的！只有 data.VIEWURL 不起作用。我必须添加数据[0].VIEWURL。所以，感谢马特的那个。另外，在我的href中，我必须加上空引号，否则它会返回NaN。不知道为什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:42:53.630

好吧，无论你在 C# 端做什么，JavaScript 都不会起作用。您正在尝试同步处理异步调用的结果。

您的 C# 看起来并不遥远，由于某种原因，我第一次完全没有正确阅读它。我从来没有以`.ashx`那种方式使用过，我总是从 ProcessRequest 中吐出我的响应，但如果你的代码被调用，那么我只是学到了一些新东西。但是，我确实注意到您正在返回一个序列化列表，但只处理一个元素。

但是，您可以使用更 LINQy 的方法来消除显式列表填充：

```
var list =
    from R in new Command("select top 1 o.name [SENDERNAME], view_url [VIEWURL] from MESSAGE m join OPR_SECD o on UPDATED_BY = O.RECNUM where VIEW_URL like 'conversation.aspx%' and DELIVER_TO in (select OPR_INITIAL from OPR_SECD where recnum = @CURRENT_USER_ID) order by m.RECNUM desc")
        .AddInt("CURRENT_USER_ID", Common.UserID)
    select new {
        VIEWURL = R.GetString("VIEWURL"),
        SENDERNAME = R.GetString("SENDERNAME") };
context.Response.Write(JsonConverter.SeralizeObject(list)); 
```

你的 JS 应该看起来更像：

```
convDetails: function() {
    $.ajax({
        url: BASE_URL + "pages/services/messages.ashx?method=convdetails",
        async: true,
        data: {},
        success: function(data) {
            $("a.new-message-alert").attr("href", data[0].VIEWURL);
            $("a.new-message-alert").text("New  message from: " + data[0].SENDERNAME);
        }
    });
} 
```

# c# - 如何在自定义服务器控件中使用隐藏字段？

> ID：15529224
> 
> 赞同：1
> 
> 时间：2013-03-20T16:26:58.003
> 
> 标签：c#, asp.net

我正在开发具有客户端功能的自定义服务器控件。要在回调中检索客户端的状态，我想包含一个隐藏字段。不幸的是，我既不知道如何集成隐藏字段，也不知道如何在回调中检索数据。我用谷歌搜索了很多，但找不到任何对我有帮助的东西。

所以我的问题是：如何将 HiddenField 实现到自定义服务器控件中？渲染一个普通的 html 输入字段并给出一个静态 id？使用asp.net HiddenField 控件？

如何以及何时从控件/字段中检索数据？哪个事件以及如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:50:28.113

您想使用[CompositeControl](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.compositecontrol.aspx)组合两个或多个服务器控件。

1.  将 HiddenField 控件与其他控件一起添加到控件`CreateChildControls`
2.  渲染脚本以将客户端更改收集到 HiddenField
3.  回发时，从 HiddenField.Value 收集客户端数据

[ASP.NET 4 实践 - 复合控件](http://www.codeproject.com/Articles/197117/ASP-NET-4-in-Practice-Composite-Controls)

# c# - 如何在 C# 中保护 Flash 文件不被下载或提取

> ID：15529227
> 
> 赞同：0
> 
> 时间：2013-03-20T16:27:03.510
> 
> 标签：c#, winforms, flash, security

我被要求在 C# (WinForm) 中开发一个安全的 flash 查看器，其中可以通过查看器查看 flash 文件，但可以在查看器中安全地捕获它 - 即使其无法被任何嗅探器工具提取或下载。

我还没有一个好的解决方案，有人帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:55:30.620

我将以答案的形式提出这一点，以停止轰炸评论部分。

如果您不想让您的应用程序对用户非常不友好，那么您手头的任务将非常困难。

原因是如果您的程序可以在本地解密信息然后播放视频文件，那么逆向工程中的熟练用户可以访问解密方法并使用它将视频作为文件转储。

现在，如果您想创建许可方法并让用户在使用该程序之前登录，您将遇到两个问题。

1）想要破解程序的人仍然有可能这样做，在这种情况下，他/她唯一需要的是有效的许可证，在大多数情况下，他们是从其他用户那里窃取的。除非您有人不断查看禁止许可证的日志并处理将要调用的用户的呼叫，否则服务器端很难注意到这一点，因为他们的（被盗）许可证不再有效。

2）在服务器范围内设置某种限制，即有多少人可以使用凭据登录，这会产生更多问题，例如，人们将无法同时在两台电脑上使用该软件。即使上面的问题仍然是一个问题，但用户会抱怨为什么他们这次无法登录（因为其他人将使用他们的许可证。

故事的道德启示 ？事情总是有办法解决的。取决于您愿意放弃多少用户体验，以使您的软件更安全地不被破解。

# android - 动态添加TextView和getTag()

> ID：15529234
> 
> 赞同：0
> 
> 时间：2013-03-20T16:27:25.503
> 
> 标签：android, menu, android-menu

我有一个类称为“SplitText”并扩展了 AsyncTask。在那里我添加了一个动态文本视图：

```
TextView masterTV = new TextView(mActivity);
tv.setTag("masterTV");

...
masterTV.setText(Activity_Start.chapterContentList.get(0));

LinearLayout sv = (LinearLayout) mActivity.findViewById(R.id.linearlayout);
sv.removeAllViews();
sv.addView(masterTV); 
```

这工作正常。

现在我想从另一个类调用 Activity_Start 中从这个 TextView 中获取文本，它扩展了 Activity..

在那里`onOptionsItemSelected()`我有：

```
 case R.id.menu_previous:
        LinearLayout ll = (LinearLayout) findViewById(R.id.linearlayout);
        TextView tv = (TextView) ll.findViewWithTag("masterTV");
        Log.e("previs", tv.getText().toString());
        return true; 
```

但这总是返回一个`NullPointerException`..

我做错了什么？

**更新：**

我找到了另一种获取 TextView 的方法：

```
LinearLayout ll = (LinearLayout) findViewById(R.id.linearlayout);
TextView tv = (TextView) ll.getChildAt(0); 
```

这不是我想要的确切方式，但我跑步并做我想做的事。（如果您的 Textview 是 0 号孩子）

# php - javascript确认运行php文件

> ID：15529238
> 
> 赞同：1
> 
> 时间：2013-03-20T16:27:29.217
> 
> 标签：php, javascript

我有一个 javascript 确认框，如果用户单击确定，那么我想运行一个 php 脚本。不知道如何做到这一点。下面是确认框的javascript代码：

```
<script type="text/javascript">
    function val_name()
 {
        var namePattern = /^[A-Za-z]{3,25}$/;
    if( !namePattern.test(document.upload.fn.value))
            alert("Enter valid first name");

    if( !namePattern.test(document.upload.ln.value))
        alert("Enter valid last name");

        var x=document.forms["upload"]["email"].value;
        var atpos=x.indexOf("@");
        var dotpos=x.lastIndexOf(".");

    if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length)
        {
        alert("Not a valid e-mail address");
        return false;
        }

    else if
        (confirm("Are you sure you want to add this driver?")== true)
        {
        onClick = 'add_driver.php';
        }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:08:05.950

调用 add_driver.php 的 Ajax 代码

```
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    //here you can put some code to execute if the call to add_driver.php was ok
    }
  }
xmlhttp.open("GET","add_driver.php",true);
xmlhttp.send();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:30:25.030

那是你要找的吗？

```
 window.location.href='add_driver.php'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:31:50.437

```
window.location.href = 'add_driver.php'; 
```

这将带您到页面，导致脚本运行。如果您不想访问该页面而只是希望它运行，请查看 jQuery 并使用它的 AJAX 功能。

# css - CSS样式标题和以下内容

> ID：15529241
> 
> 赞同：3
> 
> 时间：2013-03-20T16:27:33.527
> 
> 标签：css, header, styling

以下非常基本的问题样式内容与标题。我有以下情况：通常内容的结构如下：

```
<h1>Main Header</h1>
<h2>Sub Header</h2>
<p>Content</p> 
```

但在某些情况下，子标题不存在。当内容直接跟随而没有子标题时，我想在主标题和内容之间添加不同的填充/边距。

我觉得必须有一个我正在监督的简单解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:30:22.367

使用[相邻的兄弟选择器](http://meyerweb.com/eric/articles/webrev/200007a.html)：

```
h1 + p {
    /* ... */
} 
```

这只是选择`<p/>`if 它直接在`<h1/>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:30:34.447

失去margin-bottoms 并使用margin-tops 代替。

这种方式`margin-top: 15px`将`<p>`提供 15px 的空间，无论其上方是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:30:56.220

```
h1 + p {
  margin-top: ...;
} 
```

那只会选择 p 前面有 h1

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-20T16:32:02.887

`overflow:hidden`您可以为此尝试属性。

# javascript - fullCalendar - 将 view.start 数据传递给 ajax

> ID：15529244
> 
> 赞同：1
> 
> 时间：2013-03-20T16:27:41.233
> 
> 标签：javascript, jquery, fullcalendar

当日历中的所有事件都已呈现 ( `eventAfterAllRender`) - 我喜欢将 ajax 传递`view.start`给 ajax 但它不起作用 - 我在控制台上收到错误消息：

```
Uncaught TypeError: Object [object global] has no method 'getFullYear' 
```

但是，这确实有效：

```
eventAfterAllRender: function(view) {
  alert(view.start);
} 
```

完整代码：

```
$('#calendar').fullCalendar({
    editable: false,
    events:  { 
        url:    'calender-sales-events.php',
        data: {
            selectReportBy: $(".SelectReportBy").val(),
        }
    },
    firstDay:1,
    eventAfterAllRender: function(view) {
        $.get("calender-overview.php", { start:  view.start } , function(data) {
            alert(data);
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T22:04:25.687

尝试这个

```
eventAfterAllRender: function(view) {
    $.get("calender-overview.php", { start:  view.start } , function(data) {
        alert(data);
    });
} 
```

应该

```
eventAfterAllRender: function(view) {
    $.get("calender-overview.php", { start:  $(this).fullCalendar().visStart } , function(data) {
        alert(data);
    });
} 
```

# google-app-engine - 具有多个响应消息的谷歌云端点方法

> ID：15529249
> 
> 赞同：5
> 
> 时间：2013-03-20T16:27:46.260
> 
> 标签：google-app-engine, python-2.7, google-cloud-endpoints

我有一个谷歌可以指定我需要能够返回 a`MaleResponseMessage`或 a 的方法`FemaleResponseMessage`。有没有办法指定例如

```
@endpoints.method(message_types.VoidMessage, [MaleResponseMessage, FemaleResponseMessage]) 
```

当然可以选择声明一个超级消息类，例如，`PersonResponseMessage`包装`MaleResponseMessage`or 或`FemaleResponseMessage`. 但是有什么类似于上面的片段吗？

编辑：

试图实施我自己的建议，我被卡住了。这两种消息类型的唯一共同点是请求：`female=true/false`对于`PersonRequest`. the`MaleResponseMessage`和 the`FemaleResponseMessage`没有共同的领域。所以我使用一种端点方法，正如@bossylobster 所示，我在其中检查

```
if request.female : # request.female == True
    return get_female(etc, etc)
else: # request.female == False // implies male
    return get_male(etc,etc) 
```

对于回应，我需要类似的东西

```
class PersonResponse(messages.Message):
  if ??? :
     item = messages.MessageField(MaleResponseMessage,1)
  else:
      item = messages.MessageField(FemaleResponseMessage,1) 
```

我不确定要检查什么`???`。首先，我想到了`isinstance`or `type`。但我该怎么做呢？下面的工作吗？

```
class PersonResponse(messages.Message):
  if type(Message()) == MaleResponseMessage :
     item = messages.MessageField(MaleResponseMessage,1)
  else:
      item = messages.MessageField(FemaleResponseMessage,1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:43:52.410

抱歉不行。你只能有一个响应和一个请求模式；这是因为它们是在 Google 的 API 基础架构中注册的，并且具有严格的模式是提供请求的速度和效率的原因。

您最好的选择是将每个男性和女性所需的字段组合到一个模型类中并进行自己的验证。

一个可能的解决方案可能看起来像

```
from protorpc import messages

class Gender(messages.Enum):
    MALE = 0
    FEMALE = 1

class GenderRequest(messages.Enum):
    gender = messages.EnumField(Gender, 1, required=True)

class PersonResponse(messages.Message):
    gender = messages.EnumField(Gender, 1)
    # shared fields
    # female specific fields
    # male specific fields 
```

然后用你的实际方法

```
 @endpoints.method(GenderRequest, PersonMessage, ...)
    def my_method(self, request):
      if request.gender == Gender.MALE:
          return male_response(request)
      elif request.gender == Gender.FEMALE:
          return female_response(request)
      else:
          # This should never occur since gender is required
          raise endpoints.BadRequestException('Gender not set.') 
```

where`male_response`和`female_response`是创建`PersonMessage`对应于男性和女性的实例的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T22:08:17.040

您可以使用两种不同的端点方法。

# javascript - 从属性内部提取字符串

> ID：15529250
> 
> 赞同：3
> 
> 时间：2013-03-20T16:27:54.630
> 
> 标签：javascript, jquery, html, xml, xhtml

我需要写一个这样的函数：

```
var width=getWidth( $(this).attr("ows_MetaInfo")); 
```

其中 $this 指向 xml 行。

在`getWidth(meta){}`函数中，我需要找到文本 vti_lastheight 并进行一些拆分和填充，然后获取 250 的数字高度值。我如何在 javascript 或 jquery 中执行此操作？

```
<z:row ows_Title='We are together!' ows_ImageSize='620' 
            ows_MetaInfo='16;#vti_parserversion:SR|14.0.0.6120&#13;&#10;                
            vti_lastheight:IW|250&#13;&#10;vti_lastwidth:IW|620&#13;&#10;
            vti_description:SW|Lorem ipsum dolor sit volutpat.' /> 
```

更新：我发现有人写了一个函数来从 vti_description 中获取描述值。有人可以向我解释这个函数如何能够提取文本“lorem ipsum”部分的描述部分，以及我如何利用它来提取 lastheight 值？拜托？

```
function getDescription(metaInfo)
    {
        var description="";
        if(metaInfo!=null)
        {
            metaParts=metaInfo.split("\n");
            if(metaParts!=null && metaParts.length>0)
            {
                var i=0;
                do
                {
                    if(metaParts[i].indexOf("vti_description")>-1)
                    {
                        var descParts=metaParts[i].split("|");
                        if(descParts!=null && descParts.length>1)
                        {
                            description=descParts[1];
                        }
                    }
                    i++;
                } while (i<metaParts.length && description=="" );
            }
        }
        return description;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:52:49.873

我相信你应该使用正则表达式。

```
function getWidth(str) {
    str = str.replace(/(\r\n|\n|\r)/gm, "");
    str = str.match(/vti_lastwidth:(.*?(?=vti))/);
    str = parseInt(str[1].split('|')[1]);
    console.log(str);
    return str;;
} 
```

假设您的数据将始终具有这种格式。

演示：http: [//jsfiddle.net/pavloschris/3gdd5/](http://jsfiddle.net/pavloschris/3gdd5/)

稍作调整，您就可以将此函数用于任何属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:33:45.580

`getWidth`是一个函数。你不需要一个简单的函数：

```
 var width=$(this).attr("ows_MetaInfo"); 
```

`ows_ImageSize`是这个 xml 行的属性。所以上面的调用应该可以工作，它会返回`ows_ImageSize`在这种情况下设置的任何内容，即 620。所以我会首先通过确保它返回一个数字来测试它：

```
console.info(width); 
```

如果是这样，那么您将知道该部分有效，并且您可以解决`getWidth(meta){}`开始工作的问题。

```
 getWidth(width); 
```

# r - 在检索 S4 参考类的字段值时避免考虑封闭帧

> ID：15529251
> 
> 赞同：8
> 
> 时间：2013-03-20T16:27:57.533
> 
> 标签：r, oop, pass-by-reference, s4, reference-class

我是 S4 参考类的忠实粉丝，因为它们允许混合编程风格（函数式/按值传递与 oop/按引用传递；[示例](https://stackoverflow.com/questions/9674027/implementing-standard-software-design-patterns-focus-on-mvc-in-r)），从而显着提高灵活性。

但是，当您要求 R 通过方法检索某个字段值时，我认为我只是遇到了一种关于 R 扫描环境/框架的方式的不良行为`$field()`（请参阅[帮助页面](http://stat.ethz.ch/R-manual/R-devel/library/methods/html/refClass.html)）。问题是，如果在实际的本地/目标环境（这将是构成 S4 参考类的环境）中找不到所需的字段，R 似乎也会查看封闭环境/框架，即它就像运行`get(<objname>, inherits=TRUE)`（参见[帮助页](http://stat.ethz.ch/R-manual/R-devel/library/base/html/get.html)）。

## 实际问题

为了让 R 只在本地/目标环境中查看，我在想类似的东西，`$field(name="<fieldname>", inherits=FALSE)`但`$field()`没有一个`...`参数可以让我传递`inherits=FALSE`到`get()`（我猜这在路上的某个地方被称为）。有解决方法吗？

* * *

## 代码示例

对于那些对更多细节感兴趣的人：这是一个说明行为的小代码示例

```
setRefClass("A", fields=list(a="character"))

x <- getRefClass("A")$new(a="a") 
```

`a`class 中有一个字段`A`，因此在目标环境中找到并返回值：

```
> x$field("a")
[1] "a" 
```

如果我们尝试访问的字段**不是**引用类的字段，但恰好与工作区/搜索路径中的某个其他对象的名称相同（在这种情况下`"lm"`），事情看起来会有所不同：

```
require("MASS")
> x$field("lm")

function (formula, data, subset, weights, na.action, method = "qr", 
    model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE, 
    contrasts = NULL, offset, ...) 
{
    ret.x <- x
    ret.y <- y

    [omitted]

    if (!qr) 
        z$qr <- NULL
    z
}
<bytecode: 0x02e6b654>
<environment: namespace:stats> 
```

在这一点上并不是我所期望的。恕我直言，一个错误或至少一个警告会好得多。或者打开`$field()`参数的方法，可以通过`...`. `get()`我猜在调用时会调用沿途的某个地方`$field()`，所以这样的事情可能会阻止上述行为的发生：

```
x$field("digest", inherits=FALSE) 
```

* * *

## 解决方法：自己的建议

这应该可以解决问题，但也许有一些更优雅的东西不涉及在顶部的新方法的规范`$field()`：

```
setRefClass("A", fields=list(a="character"),
    methods=list(
        myField=function(name, ...) {
            # VALIDATE NAME //
            if (!name %in% names(getRefClass(class(.self))$fields())) {
                stop(paste0("Invalid field name: '", name, "'"))
            }
            # //
            .self$field(name=name)
        }
    )
)
x <- getRefClass("A")$new(a="a")

> x$myField("a")
[1] "a"
> x$myField("lm")
Error in x$myField("lm") : Invalid field name: 'lm' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T23:08:52.953

默认`field()`方法可以替换为您自己的。因此，添加一个`inherits`参数以避免封闭框架只是获取现有`x$field`定义并添加它的问题......

```
setRefClass( Class="B",
             fields= list( a="character" ),
             methods= list(
               field = function(name, value, inherits=TRUE ) {
                 if( missing(value) ) {
                   get( name, envir=.self, inherits=inherits )
                 } else {
                   if( is.na( match( name, names( .refClassDef@fieldClasses ) ) ) ) {
                     stop(gettextf("%s is not a field in this class", sQuote(name)), domain = NA)
                   }
                   assign(name, value, envir = .self)
                 }
               }
             ),
) 
```

或者你可以有一个很好的错误信息，稍微重新安排一下

```
setRefClass( Class="C",
             fields= list( a="character" ),
             methods= list(
               field = function(name, value, inherits=TRUE ) {
                if( is.na( match( name, names( .refClassDef@fieldClasses ) ) ) &&
                      ( !missing(value) || inherits==FALSE) ) {
                  stop(gettextf("%s is not a field in this class", sQuote(name)), domain = NA)
                }

                if( missing(value) ) {
                    get( name, envir=.self, inherits=inherits )
                } else {
                  assign(name, value, envir = .self)
                }
               }
             ),
) 
```

由于您可以定义任何自己的方法来替换默认值，因此几乎可以为您的 refclasses 实现您想要的任何逻辑。如果使用继承获取变量但模式与 c("expression", "name", "symbol", "function") 匹配并且如果它不直接匹配本地 refClass 字段名称则警告可能会出错？

# python - 确保在 Django 项目中安全地加载 JSON、XML 和 YAML

> ID：15529252
> 
> 赞同：8
> 
> 时间：2013-03-20T16:27:57.787
> 
> 标签：python, django, security

我正在维护一个生产 Django 1.5 应用程序。

最近有很多关于加载 JSON、XML 和 YAML 对象的各种漏洞的噪音。如果我理解正确，输入是精心设计的，以利用加载功能中的错误。

现在，我不知道 Django（或我们使用的几十个第三方应用程序）在哪里使用这些协议。我怎样才能免受此类漏洞的影响？我是否需要以某种方式确保 Django 安全地加载 JSON、XML 和 YAML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:58:33.707

默认情况下，Django 不接受这些格式的用户编码输入，通常第三方应用程序也不接受，但值得对面向用户的部分进行审计以确保确定。大的将是 API 提供者（Tastypie、Django REST Framework 等）。如果您使用的是当前版本，您应该是安全的，但值得测试/确认。

如果您从这些格式的应用程序中加载任何内容，请务必使用[`defusedxml`](https://pypi.python.org/pypi/defusedxml)YAMLs[`safe_load`](http://pyyaml.org/wiki/PyYAMLDocumentation#LoadingYAML)方法。标准库`json`模块应该免受这些攻击。

# mysql - 在触发器中使用变量作为字段名称（插入）

> ID：15529257
> 
> 赞同：0
> 
> 时间：2013-03-20T16:28:12.947
> 
> 标签：mysql, triggers

如何在字段名称中使用变量？

```
delimiter |

CREATE TRIGGER update_expression_counter BEFORE INSERT ON remake_town_expressions
FOR EACH ROW BEGIN

SET @type := NEW.`type`;
SET @user_id := NEW.user_id;
SET @user_profile_id := NEW.user_profile_id;
SET @country_iso := NEW.country_iso;
SET @place_id := NEW.`place_id`;
SET @city_id := NEW.`city_id`;
SET @field := 'comment_cnt';

SELECT CASE @type 
WHEN 'comment' THEN 'comment_cnt' 
WHEN 'photo' THEN 'photo_cnt' 
WHEN 'video' THEN 'video_cnt' 
WHEN 'tag' THEN 'tag_cnt' 
WHEN 'checkin' THEN 'checkin_cnt' 
END
INTO @field;

INSERT INTO `remake_town_counter` (`user_id`,`user_profile_id`,`country_iso`,`city_id`,`place_id`, @field) 
VALUES (@user_id,@user_profile_id,@country_iso,@city_id,@place_id,1) ON DUPLICATE KEY UPDATE  @field=@field+1,`rank`=`rank`+1;

END;
|

delimiter ; 
```

这返回错误。如果@field 写成`，那么查询字段将是变量名，而不是变量值；

之后我不能使用 concat：

```
PREPARE stmt FROM @query;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

，因为这是动态sql

我怎样才能卖掉这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:25:18.183

只找到一个解决方案：在查询中写入所有字段并使用 +1 更新所需的字段；我的结果

```
SET @comment_cnt := CASE WHEN @type = 'comment' THEN 1 ELSE 0 END;
SET @photo_cnt := CASE WHEN @type = 'photo' THEN 1 ELSE 0 END;
SET @video_cnt := CASE WHEN @type = 'video' THEN 1 ELSE 0 END;
SET @tag_cnt := CASE WHEN @type = 'tag' THEN 1 ELSE 0 END;
SET @checkin_cnt := CASE WHEN @type = 'checkin' THEN 1 ELSE 0 END;    

-- update user count actions in the place

INSERT INTO `remake_town_counter` (`user_id`,`user_profile_id`,`country_iso`,`city_id`,`place_id`, `comment_cnt`,`photo_cnt`,`video_cnt`,`checkin_cnt`,`tag_cnt`,`rank`) 
VALUES (@user_id,@user_profile_id,@country_iso,@city_id,@place_id,@comment_cnt,@photo_cnt,@video_cnt,@checkin_cnt,@tag_cnt,1)
ON DUPLICATE KEY UPDATE
`comment_cnt`=`comment_cnt`+@comment_cnt,`photo_cnt`=`photo_cnt`+@photo_cnt,`video_cnt`=`video_cnt`+@video_cnt,`checkin_cnt`=`checkin_cnt`+@checkin_cnt,`tag_cnt`=`tag_cnt`+@tag_cnt,`rank`=`rank`+1; 
```

# sql - 仅过滤掉最新条目，用于订单

> ID：15529263
> 
> 赞同：0
> 
> 时间：2013-03-20T16:28:25.807
> 
> 标签：sql, sql-server, reporting-services, where

我正在尝试编写一个查询，在其中选择 OrderTable ex 中特定订单的最新更改。

```
OrderID|       ChangeDate      | 
-------|-----------------------|
Order1 |2013-03-17 14:40:47.000|
Order2 |2013-03-12 12:34:09.000|
Order3 |2013-03-20 18:30:12.000|
Order1 |2013-03-20 16:09:09.000|
Order2 |2013-03-20 12:39:49.000| 
```

说（来自上面的示例），我需要的是 Order1、Order2 和 Order3 的最新条目。有没有人遇到过类似的情况？我真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:35:28.293

你可以简单地这样做：

```
SELECT OrderID,
       MAX(ChangeDate) as LatestEntry
FROM yourTable
GROUP BY OrderID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:30:47.377

尝试这个：

```
Select OrderID,max(ChangeDate) as LatestDate
from yourTable
group by OrderID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:32:34.703

有多种方法，但假设您想要整个记录，而不仅仅是`max( date)`每个订单 ID，您可以使用 row_number。

```
WITH CTE
(
SELECT 
  OrderID, 
  changeDate, 
  ChangeValue,
  ROW_NUMBER() OVer (Partition BY OrderID order by ChangeDate Desc) rn

FROM order 
)
SELECT * FROM CTE where rn = 1 
```

注意：这会为每个订单返回一条记录。如果您的最大更改日期相同，这可能是也可能不是问题

# c# - AccessViolationException：试图读取或写入受保护的内存 - 使用 DirectoryEntry 的 IIS 访问

> ID：15529269
> 
> 赞同：2
> 
> 时间：2013-03-20T16:28:56.503
> 
> 标签：c#, iis, access-violation, directoryentry

我试图使用以下代码在 IIS 中的 Web 应用程序下查找文件夹，但遇到以下错误：

```
AccessViolationException: Attempted to read or write protected memory. 
```

我尝试的代码如下所示：

```
DirectoryEntry entry2 = new DirectoryEntry(string.Format("IIS://{0}/W3SVC/{1}/Root/{2}", serverName, siteID, parentVirDirName));
entry2.RefreshCache();
DirectoryEntry entry3 = entry2.Children.Find(folderToSearch); 
```

错误发生在上面代码的最后一行。非常感谢任何帮助或摆脱这种情况的线索

# asp.net - 将表单操作创建为变量

> ID：15529270
> 
> 赞同：1
> 
> 时间：2013-03-20T16:28:57.537
> 
> 标签：asp.net, forms, webforms, action

我没有关注 ASPX 源：

```
 <form name="AddComment" action="ViewArticle.aspx?ArticleID=<%=ArticleID %>" method="post" runat="server"> 
```

问题是当我点击提交时，我得到了这个网址

```
http://localhost:61175/WebSite1/ViewArticle.aspx?ArticleID=%3C%=ArticleID%20%%3E 
```

但我想得到这个网址：

```
http://localhost:61175/WebSite1/ViewArticle.aspx?ArticleID=1 
```

如果我删除 "runat="server"" 命令，它可以正常工作，但是这种形式可以*同时与*变量和 runat 服务器一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:36:07.193

也许您可以尝试在这样的表单标记之前设置操作（或在代码隐藏中，由您选择）

```
 <%
     this.Form.Action = "ViewArticle.aspx?ArticleID=" + ArticleID.ToString();
 %>
 <form name="AddComment"  method="post" runat="server"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:44:49.617

在服务器端控件中，您不能执行 <%= ActionID %> 之类的操作，您只能绑定 <%# ActionID %>。

上面的解决方案不起作用，因为表格不是那个表格。您必须提供控件 ID + 名称而不是设置帖子网址。如果它不是一个选项，您可以在控件树中动态搜索表单项，因此可以处理动态 ID-s。

# playn - Android PlayN 中的垃圾收集 (GC)

> ID：15529273
> 
> 赞同：1
> 
> 时间：2013-03-20T16:29:04.067
> 
> 标签：playn

在 Chris Pruett 的演讲[http://www.youtube.com/watch?v=7-62tRHLcHk](http://www.youtube.com/watch?v=7-62tRHLcHk) 为 android 编写实时游戏时，他小心翼翼地避免 GC 运行，直到他的某个时候才丢失引用或创建新分配。选择。

一般应该在 playN 中使用该设计模式吗？我认为如果库本身不尝试在一般情况下避免分配（内存池），这是不可能的。即，如果您在实现 Touch.Listener 时收到新的 Touch.Events，如果这些对象和其他对象没有被不断回收，那么尝试以这种方式使用 API 将是徒劳的......或者也许 PlayN 接近于否-GC 兼容，然后仍然值得开发人员付出努力。

谢谢:-)

更新：我发布了错误的 Chris Pruett 演讲。在这里观看他谈论 GC 的部分。[http://www.youtube.com/watch?feature=player_detailpage&v=U4Bk5rmIpic#t=1748s](http://www.youtube.com/watch?feature=player_detailpage&v=U4Bk5rmIpic#t=1748s)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T23:33:38.560

现在大多数 Android 设备都有多核 CPU。我认为这不再是一个真正的问题。

但是，您可以在设备 logcat 中检查来自 GC 的跟踪。在我 3 年的单核设备上，运行我的游戏时不到 5 毫秒。

如果您担心 Android 上的内存管理，我向您推荐这个视频：[Google I/O 2011：Android 应用程序的内存管理](http://www.youtube.com/watch?v=_CruQY55HOk)

# css - 使用 2 个不同高度的引导导航栏

> ID：15529276
> 
> 赞同：0
> 
> 时间：2013-03-20T16:29:09.173
> 
> 标签：css, twitter-bootstrap

我需要在我的网络应用程序中使用 2 个导航栏。

我使用引导变量更改了高度的主导航栏：

```
$navbarHeight: 80px; 
```

但我需要在第一个导航栏下添加一个 40 像素高度的辅助导航栏。

目前，即使我尝试更改辅助导航栏的 CSS 样式，该变量也会影响两个导航栏并将它们设置为 80px。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:44:21.340

由于您使用的`$`是变量的前面，我猜您使用的是 Sass。

### 1\. 向您的导航栏添加一个额外的类：

```
<div class="navbar navbar-small">
  <div class="navbar-inner">
    <a class="brand" href="#">Title</a>
    <ul class="nav">
      <li class="active"><a href="#">Home</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
    </ul>
  </div>
</div> 
```

### 2.通过Sass定义类

```
$navbarHeightSmall = 40px; 

.navbar-small{
    .navbar-inner{
        min-height: $navbarHeightSmall;
    }

    &.navbar{
        .brand {
            padding: (($navbarHeightSmall - $baseLineHeight) / 2) 20px (($navbarHeightSmall - $baseLineHeight) / 2);
        }

         .divider-vertical {
            height: $navbarHeightSmall;
        }

       .nav > li > a{
            padding: (($navbarHeightSmall - $baseLineHeight) / 2) 15px (($navbarHeightSmall - $baseLineHeight) / 2);
        }
    } 
} 
```

请务必将其包含在您的 Sass 变量范围中或重新定义变量：`$baseLineHeight`。

[JSFIDDLE](http://jsfiddle.net/handtrix/MgcDU/2849/)上的演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T03:38:53.910

我不确定接受的答案适用于哪个版本的 Bootstrap，但它对我不起作用。这适用于 Bootstrap 3（sass）：

```
$navbar-height-secondary: 40px
$navbar-padding-vertical-secondary: (($navbar-height-secondary - $line-height-computed) / 2)

.secondary-nav
  &.navbar
    min-height: $navbar-height-secondary
    .nav > li > a
      padding-top: $navbar-padding-vertical-secondary
      padding-bottom: $navbar-padding-vertical-secondary 
```

# servicestack - 请求 DTO 中的 ServiceStack 和动态属性

> ID：15529289
> 
> 赞同：4
> 
> 时间：2013-03-20T16:29:58.110
> 
> 标签：servicestack

我想将 JSON 对象发布到我的服务堆栈服务并在请求 DTO 中使用动态属性。到目前为止，我尝试过的所有方法都将对象保留为 NULL 值。

我使用的javascript代码：

```
$.getJSON(
  "/api/json/reply/Hello",
  {
    Name: "Murphy",
    Laws: {
      SomeProp: "A list of my laws",
      SomeArr: [
        { Title: "First law" },
        { Title: "Second law" },
        { Title: "Third law" }
      ]
    }   
},
function(data) {
    alert(data.result);
  }
); 
```

接收请求的 DTO：

```
public class Hello
{
    public string Name { get; set; }
    public dynamic Laws { get; set; }
} 
```

我还尝试在 DTO 中使用对象和 JsonObject 而不是动态的。

为了完整起见，这里的服务也是：

```
public class HelloService : Service
{
    public object Any(Hello request)
    {
        return new HelloResponse { Result = "Hello, " + request.Name };
    }
} 
```

Murphy 通过 Name 属性没有任何问题，但 Laws 属性仍然为 NULL。

最后，我想以某种方式迭代（使用反射？） Laws 属性并获取所有包含的属性和值。

我不能在这里使用类型化的 DTO，因为我在开发时不知道 Laws 属性的 JSON（而且它可以经常更改）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T16:52:37.953

在 NuGet 上构建的 ServiceStack 的 .NET 3.5 库没有对 .NET 4.0+**动态**类型的本机支持。您可以将 JSON 传递给**字符串**属性并在服务器上动态解析它：

```
public object Any(Hello request)
{
    var laws = JsonObject.Parse(request.Laws);
    laws["SomeProp"] //
    laws.ArrayObjects("SomeArr") //
} 
```

否则，您可以使用`Dictionary<string,string>`或者如果您在 AppHost 中指定：

```
JsConfig.ConvertObjectTypesIntoStringDictionary = true; 
```

您可以使用`object`which 将对象视为字符串字典。

否则动态不应该出现在 DTO 上，因为它对于服务的期望没有意义。您可以将其添加到 QueryString。您可以使用[JSV 格式](https://github.com/ServiceStack/ServiceStack.Text/wiki/JSV-Format)在 QueryString 中指定复杂的对象图，例如：

```
/hello?laws={SomeProp:A list of my laws,SomeArr:[{Title:First Law}]} 
```

注意：上面的空格`%20`在电线上被编码。

您可以通过以下方式访问您的服务：

```
public object Any(Hello request)
{
    var laws = base.QueryString["laws"].FromJsv<SomeTypeMatchingJsvSent>();
} 
```

# java - Java：HashMap 有效，LinkedHashMap 获取空指针异常

> ID：15529291
> 
> 赞同：-2
> 
> 时间：2013-03-20T16:30:00.013
> 
> 标签：java, nullpointerexception, hashmap

几周前我开始学习 Java，来自 PHP，没有其他语言背景。我习惯只使用数组（）...

当我将我的类从 HashMap 更改为 LinkedHashMap 时，我得到了一个空指针异常，

使用 JDK 1.6

***类 LinkedHashMap** - 来自 Oracle [Oracle JDK 1.6 参考](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)*

> 此类提供所有可选的 Map 操作，并允许 null 元素。与 HashMap 一样，它为基本操作（添加、包含和删除）提供恒定时间性能，假设哈希函数在桶中正确地分散元素。由于维护链表的额外费用，性能可能略低于 HashMap，但有一个例外：迭代 LinkedHashMap 的集合视图所需的时间与映射的大小成正比，而不管其容量如何. HashMap 的迭代可能更昂贵，需要的时间与其容量成正比。

**不工作**

```
@Component("blMenu")
public class MenuProcessor extends AbstractModelVariableModifierProcessor {
public  List<Category> topLevelCategories;
public  LinkedHashMap<Category, LinkedHashMap<Integer, List<Category>>> navigationMenu = new LinkedHashMap<Category, LinkedHashMap<Integer, List<Category>>>();
public List<Category> Categories;
public int chunkSize = 5;
public int subCategoriesSize;
public String resultVar;

/**
 * Sets the name of this processor to be used in Thymeleaf template
 */
public MenuProcessor() {
    super("menu");
}

@Override
public int getPrecedence() {
    return 10000;
}

@Override
protected void modifyModelAttributes(Arguments arguments, Element element) {
    CatalogService catalogService = ProcessorUtils.getCatalogService(arguments);

    resultVar = element.getAttributeValue("resultVar");
    String parentCategory = element.getAttributeValue("parentCategory");
    String unparsedMaxResults = element.getAttributeValue("maxResults");

    // TODO: Potentially write an algorithm that will pick the minimum depth category
    // instead of the first category in the list
    List<Category> categories = catalogService.findCategoriesByName(parentCategory);
    if (categories != null && categories.size() > 0) {
        // gets child categories in order ONLY if they are in the xref table and active
        List<Category> subcategories = categories.get(0).getChildCategories();
        if (subcategories != null && !subcategories.isEmpty()) {
            if (StringUtils.isNotEmpty(unparsedMaxResults)) {
                int maxResults = Integer.parseInt(unparsedMaxResults);
                if (subcategories.size() > maxResults) {
                    subcategories = subcategories.subList(0, maxResults);
                }
            }
        }
        topLevelCategories = subcategories;
        buildMenu(arguments, catalogService);
    }
}

public void buildMenu(Arguments arguments, CatalogService catalogService)
{
    LinkedHashMap<Integer, List<Category>> chunkSubs;

    for(Category topLvlCat : topLevelCategories)
    {

        Categories = catalogService.findCategoriesByName(topLvlCat.getName());
        List<Category> subCategories = Categories.get(0).getChildCategories();

        if(subCategories != null && !subCategories.isEmpty())
        {
            subCategoriesSize = subCategories.size();
            chunkSubs = chunkSubCategories(subCategories);
            navigationMenu.put(topLvlCat, chunkSubs);
        }
        else
        {
            navigationMenu.put(topLvlCat, null);
        }
    }
    addToModel(arguments, resultVar, navigationMenu);
}

public LinkedHashMap<Integer, List<Category>> chunkSubCategories(List<Category> subCategories)
{
    List<Category> chunkedCategories;
    LinkedHashMap<Integer, List<Category>> subCategoriesChunked = new LinkedHashMap<Integer, List<Category>>();

    int iLoop = 0;
    int start = 0;
    int end = chunkSize - 1;
    int catSize = subCategoriesSize-1;

    if(subCategoriesSize > 1){
    do
    {

        if(end < catSize)
        {
            chunkedCategories = subCategories.subList(start, end);
            subCategoriesChunked.put(iLoop, chunkedCategories);
        }
        else
        {
            end = end - (end-catSize);
            chunkedCategories = subCategories.subList(start, end);
            subCategoriesChunked.put(iLoop, chunkedCategories);
        }

        iLoop = iLoop + 5;
        start = start + chunkSize;
        end = end + chunkSize;

    }while(subCategoriesSize > iLoop);
    }
    return subCategoriesChunked;
}

} 
```

但是将所有 LinkHashMaps 更改为 HashMaps 就可以了。

堆栈跟踪

> 2013 年 3 月 20 日下午 12:37:46 org.apache.catalina.core.StandardWrapperValve 调用严重：servlet [mycompany] 在路径 [/site] 的上下文中的 Servlet.service() 引发异常 [请求处理失败；嵌套异常是 org.thymeleaf.exceptions.TemplateProcessingException：在执行处理器 'com.mycompany.processor.MenuProcessor' (layout/partials/nav:8)] 时出错，根本原因是 com.mycompany.processor 处的 java.lang.NullPointerException。 MenuProcessor.buildMenu(MenuProcessor.java:106) at com.mycompany.processor.MenuProcessor.modifyModelAttributes(MenuProcessor.java:84) at org.broadleafcommerce.common.web.dialect.AbstractModelVariableModifierProcessor.processElement(AbstractModelVariableModifierProcessor.java:46) at org .thymeleaf.processor.element.AbstractElementProcessor。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:59:23.530

如果这一行真的抛出了空指针：

```
navigationMenu.put(topLvlCat, null); 
```

然后 navigationMenu 为空。由于linkedHashMap 和HashMap 都允许空键和值。

我注意到您将 navigationMenu 定义为一个`public`字段，这意味着它可以被任何类更改。这是一种不好的做法，您应该将字段声明为`private`并提供 getter 和必要时的 setter 方法。

因此，尽管您正在初始化它，但其他东西可能会将其设置回 null。我会检查没有任何东西可以在另一个类或模板文件中设置 navigationMenu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:48:04.167

这个奇怪的问题变得很奇怪，它开始工作，即使在删除所有目标文件夹和部署文件夹并重做构建等并且不工作之后，它也神秘地在第二天开始工作。

# c# - 如何将以它开头的单词的字符加粗

> ID：15529294
> 
> 赞同：0
> 
> 时间：2013-03-20T16:30:19.407
> 
> 标签：c#, javascript, sharepoint, web-parts

我有一个带有字母字符的选项卡标题：abcdefghijkl ..Z 我如何在代码中初始化它：我已经声明了一个数组：

```
char[] alpha = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".ToCharArray(); 
```

然后对于每个字母 carac，我通过以下方式调用以下函数：

```
foreach (char carac in alpha) { writer.Write(generateTabheader(carac)); 
```

而函数generateTabHeader如下：

```
private string generateTabheader(char currentChar) { string tabHeaderHTML="<li id=\"tabHeader_" + currentChar.ToString() + "\" style=\"float:left;color:blue; margin-right:10px;margin-left:10px\">" + currentChar.ToString() + "</li>"; return tabHeaderHTML; } 
```

因此它会显示一个带有所有 aphabet 字母的标签页眉，当用户选择一个字符时，他将返回以该字符开头的所有组。我成功地使用 caml 查询取回了所有组，并将结果存储在此列表中：

```
result = list.GetItems(query). 
```

如何在我的结果列表中将具有匹配组的选项卡标题的字符（通过匹配我的意思是以该字符开头的组标题）以粗体显示，而将其他字符以斜体显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:58:09.973

如果您可以定义一个函数`static bool CharacterHasItems(char c)`，那么您可以调用该函数`generateTabheader`并将一种或另一种字体样式分配给 style 属性。

# c - 使用 gcc 编译后无法运行程序

> ID：15529305
> 
> 赞同：1
> 
> 时间：2013-03-20T16:30:39.957
> 
> 标签：c, gcc, makefile

所以，我正在尝试在我的三星 Galaxy Tab 2（在虚拟机中）中运行我用 C 编写的程序

它编译没有问题，make命令运行顺利，但程序本身没有运行

外壳$ ./prot

这给了我以下错误：

```
bash: ./prot: Permission Denied 
```

这些是文件的权限：

```
-rw-rw-r-- 1 root sdcard-rw 8609 Mar 20 16:23 prot 
```

这可能是什么，我该如何克服这个小问题？

PS.：我使用的是 Ubuntu，这个程序在我的 Mac 上编译和运行良好。

编辑：查看 teppic 的答案，它解决了我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:50:05.377

您的 sdcard 很可能安装了`noexec`，这会阻止您在其上执行任何文件。如果您查看`/etc/fstab`，并且有一个 sdcard 条目，请取出此选项。通常也可以`exec`使用`mount -o remount,exec`.

否则，您可以将其复制到允许可执行文件的地方（例如`/tmp`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:31:53.210

您必须具有执行权限，`x`即位集。尝试

```
chmod +x prot 
```

要解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:37:46.287

也许您需要管理员权限才能更改它，请尝试：

$> sudo chmod 777 保护

# python - 我的数据库 SQL 不允许我访问提示

> ID：15529307
> 
> 赞同：-1
> 
> 时间：2013-03-20T16:30:43.093
> 
> 标签：python, database, user-interface, python-2.7, tkinter

它不允许我从我的数据库访问我的提示，出现错误。

代码：

```
def do_question(self):
    self.func1()
    #myGlobal + 1
    if myGlobal >5:
        import MathsvadersReal

    SQL = 'SELECT * FROM tblQuestion'
    cursor = Databaseconnector.SELECT(SQL)
    rows = cursor.fetchall()
    random_row = random.choice(rows)

    print random_row.QuestionID, random_row.Question, random_row.Hint, random_row.A1, random_row.A2, random_row.A3, random_row.A4, random_row.CorrectAnswer

    # create welcome label
    self.label1 = Tkinter.Label(self, bg ='yellow', text = (random_row.Question))
    self.label1.grid(row = 0, column = 6, columnspan = 2, sticky = 'E')

    self.label111 = Tkinter.Label(self, bg ='red', text = (random_row.QuestionID, "."))
    self.label111.grid(row = 0, column = 1, columnspan = 4, sticky = 'W') 
```

提示代码：

```
def homepage_link(self):
    lbl = self.label111['text']
    SQL = 'SELECT Hint FROM tblQuestion WHERE QuestionID = ' + lbl  + ''
    print SQL
    cursor = Databaseconnector.SELECT(SQL)
    rows = cursor.fetchall()
    #row = rows
    tkMessageBox.showinfo("Hint", (row.Hint)) 
```

错误：

```
ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Microsoft Access Driver] Syntax error (missing operator) in query expression 'QuestionID = 9 .'. (-3100) (SQLExecDirectW)") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:39:27.620

您从中检索的值`self.label111['text']`不是有效的整数，您应该删除`"."`文本末尾的 ：

```
self.label111 = Tkinter.Label(self, bg ='red', text=random_row.QuestionID)
# ...
SQL = 'SELECT Hint FROM tblQuestion WHERE QuestionID = %s' % self.label111['text'] 
```

# actionscript-3 - AS3：如何在运行时相交向量？

> ID：15529309
> 
> 赞同：0
> 
> 时间：2013-03-20T16:30:43.673
> 
> 标签：actionscript-3, vector-graphics

假设我在运行时使用 Graphics 类动态绘制一些矢量形状。例如正方形和圆形。

有没有办法在运行时创建一个新的形状，这两个向量形状重叠？

这类操作在所有矢量设计程序（如 Illustrator、Corel 等）中都很常见……但我在 Adob​​e 的文档中或其他任何地方都没有找到任何可以通过代码完成的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:42:51.277

尽管 Graphics 类上的绘图操作是根据线、点等来描述的，但就您而言，这只是告诉它要在位图上绘制什么。没有办法在绘制后删除一个形状，除了 clear()，它只会把整个东西擦干净。

我不完全理解为什么，因为必须保留矢量数据 - 例如，在绘制后缩放不会损失质量。

如果您不想学习一些核心数学（对于直线以外的任何东西，您都需要），如果您曾经使用过 PixelBender，这里有一个答案可能会有所帮助：

[如何计算 Flash / 动作脚本中形状之间的交集？（访问形状的段和节点？）](https://stackoverflow.com/questions/4527032/how-to-calculate-intersection-between-shapes-in-flash-action-script-access)

如果做不到这一点，如果它只是装饰性的，你可以玩弄遮罩形状（虽然最终可能会很hacky） - 但是，如果你真的想使用交叉点来绘制或描述一个形状，你需要挖掘你的数学书或寻找一个好的图形库。

希望这可以帮助

# ruby-on-rails - 父级销毁后如何更新集合？

> ID：15529311
> 
> 赞同：0
> 
> 时间：2013-03-20T16:30:51.580
> 
> 标签：ruby-on-rails, activerecord, callback

我正在开发一个 Rails 3.2.13 应用程序，我有两个模型：

```
class Invoice < ActiveRecord::Base

  has_many :client_invoices, dependent: :nullify

  ...

end

class ClientInvoice < ActiveRecord::Base

  belongs_to :invoice

  ...

end 
```

我想知道是否有办法让 ClientInvoices 知道他们的父发票何时被销毁并调用私有方法来更新他们的状态。

我尝试在 Invoice 的 after_destroy 回调中执行此操作，方法是循环集合并更改每个 ClientInvoice 的状态，但集合在那里已经是空的。

实现这一目标的最佳方法是什么？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:11:28.610

**before_destroy**将起作用。

```
before_destroy :update_client_invoice_statue

private

def update_client_invoice_statue   
  client_invoices.each do |invoice|
    #... code to update the status of record
  end
end 
```

**注意：**此 before_destroy 方法应返回**true**以继续销毁对象。

# regex - 如何使用正则表达式提取字符串

> ID：15529315
> 
> 赞同：0
> 
> 时间：2013-03-20T16:30:59.440
> 
> 标签：regex, string, perl

我有以下字符串：`SL2.40ch12:53884872-53885197`.

我想分配`SL2.40ch12`给`$chromosome`、`53884872`和。使用正则表达式执行此操作的有效方法是什么？`$start``53885197``$end`

这是我尝试这样做的方法，但我的正则表达式已关闭。

```
my $string = SL2.40ch12:53884872-53885197
my $chromosome =~ /^*\:$/
my $start =~ /^+d\-$/
my $end =~ /^-+d\/ 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:52:25.023

对于该特定字符串，您可以执行以下简单操作：

```
my $string = "SL2.40ch12:53884872-53885197";
my ($chr, $start, $end) = split /[:-]/, $string, 3; 
```

如果你想要更严格一点，分开做

```
my ($chr, $range) = split /:/, $string, 2;
my ($start, $end) = split /-/, $range; 
```

当然，这是假设您的数据中其他地方不会出现冒号或破折号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:35:23.707

这是一个可以做你想做的正则表达式：

```
($chromosome, $begin, $end) = /^(.*):(.*)-(.*)$/; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:34:38.067

我对 Perl 不是很熟悉，但是如果它使用常见的正则表达式语法，那么您的 $start 和 $chromosome 行就会出错。'$' - 表示行尾。所以它会尝试在行尾找到破折号。

# java - 编辑 Javafx 手风琴的宽度

> ID：15529317
> 
> 赞同：1
> 
> 时间：2013-03-20T16:31:02.997
> 
> 标签：java, javafx-2

我有一个默认太宽的手风琴。一段时间以来，我一直试图找到一种方法来设置手风琴的宽度，但没有成功。我想让它小于默认宽度。有没有办法让这成为可能？我错过了什么吗？

编辑：

这是我的代码

```
 public final class StudentInfo
{
   private Accordion accordion;
   private Pane mView;
   private TextField[] mStudenInfo;
   private Label[] mLabelInfo;
   private HBox[] mStudentContainer;

   private HBox mHBox;
   private VBox mLeft;
   private VBox mRight;

   private Stage primaryStage;

   private VBox mImageBox;

   private Image mImage;
   private Button mSave;
   private Button mChangeImage;
   private Button mResetField;
   private Button mClearField;
   private BorderPane mPane;

   private ImageView imageView;
   private GridPane mGrid;
   private int mI;
   public static ListView<String>[] mList;

   StudentInfo()
   {
      primaryStage = Main.mStage;
      mView = new Pane();
      mGrid = new GridPane();
      mPane = new BorderPane();
      mHBox = new HBox();
      mLeft = new VBox();
      mRight = new VBox();
      accordion = new Accordion();
      accordion.setMaxWidth(1);
      mList = new ListView[]{ new ListView<String>(),
                              new ListView<String>(),
                              new ListView<String>()};

      mImageBox = new VBox();

      mI = 0;

      mStudenInfo = new TextField[]{new TextField(), new TextField(),
                                    new TextField(), new TextField(),
                                    new TextField(), new TextField(),
                                    new TextField(), new TextField()};

      mLabelInfo = new Label[]{new Label("First Name"), new Label("Last Name"),
                               new Label("Preffered Name"),new Label("Email"),
                               new Label("Phone"), new Label("City"),
                               new Label("State"), new Label("Major")};

      mSave = new Button("Save Changes");
      mChangeImage = new Button("Change Image");
      mResetField = new Button ("Revert Changes");
      mClearField = new Button ("Clear Information");

      setGrid();
      setImageBox();
      setAcc();
      setActions();
      addToList("");
      setPane();
   }

   public void setPane()
   {
      mRight.getChildren().addAll(mImageBox,mChangeImage);
      mRight.setMargin(mChangeImage, new Insets(0,0,0,140));
      mHBox.getChildren().addAll(mLeft,mRight);
      mHBox.setMargin(mRight, new Insets(0,8000,100,0));
      HBox studentIn = new HBox();
      studentIn.getChildren().addAll(accordion, mHBox);
      studentIn.setMargin(accordion, new Insets(10,0,0,8));
      mView.getChildren().addAll(studentIn, mPane);

   }

   public void setImageBox()
   {
      Group root = new Group();

      mImage = new Image(
         "http://tech.massivelinks.com/uploads/google-animals.jpg");
      imageView = new ImageView();
      imageView.setImage(mImage);

      mImageBox.getChildren().addAll(imageView);
   }

   public void setAcc()
   {
      TitledPane[] t1 = new TitledPane[]{ new TitledPane("class1", mList[0]),
                                          new TitledPane("class2", mList[1]),
                                          new TitledPane("class3", mList[2])};
      accordion.getPanes().addAll(t1[0],t1[1],t1[2]);

   }

   public void setGrid()
   {
      mGrid.setHgap(10);
      mGrid.setVgap(10);
      mGrid.setPadding(new Insets(25, 25, 25, 25));

      mGrid.setAlignment(Pos.CENTER);
      for(mI = 0; mI < 8; mI++)
      {
         mGrid.add(mLabelInfo[mI],0,mI);
         mGrid.add(mStudenInfo[mI],1,mI);

      }
      HBox textButtons = new HBox(3);
      textButtons.setAlignment(Pos.CENTER);
      textButtons.getChildren().addAll(mResetField, mClearField ,mSave);
      mLeft.getChildren().addAll(mGrid,textButtons);
      mLeft.setMargin(textButtons, new Insets(0,0,100,105));
      mLeft.setMargin(mGrid, new Insets(30,0,0,0));
      mI = 0;
   }

   public Pane getView()
   {
      return mView;
   }

   public void setActions()
   {
      mChangeImage.setOnAction(new EventHandler<ActionEvent>()
                               {
                                  private FileChooserBuilder fcb;
                                  private File selectedFile;
                                  @Override
                                     public void handle(ActionEvent Event)
                                  {
                                     String currentDir =
                                        System.getProperty("user.dir") + File.separator;
                                     StringBuilder sb = null;
                                     fcb = FileChooserBuilder.create();

                                     FileChooser fc =
                                        fcb.title("Open Dialog").initialDirectory(new File(currentDir))
                                        .build();
                                     selectedFile = fc.showOpenDialog(Main.mStage);

                                     if (selectedFile != null)
                                     {
                                        System.out.println("you selected " +   

selectedFile.getName());
                                     }
                                  }
                               });
   }

   public static void addToList(String pName)
   {
      mList[0].getItems().add("any Name here");//pName);

   }
} 
```

我曾尝试使用手风琴.setMaxWidth，但它不会改变手风琴的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:33:05.167

我发现了我的问题。手风琴的大小超出了手风琴列表视图的大小。通过在列表视图上设置最大宽度，它将更改手风琴选项卡的大小。

例如：

```
mList[0].setMaxWidth(10); 
```

# sitecore - 将 sitecore 的 IncludeItemForDisplay 扩展到 TreeList 以外的类型

> ID：15529325
> 
> 赞同：1
> 
> 时间：2013-03-20T16:31:17.597
> 
> 标签：sitecore, sitecore6

我正在寻找一种简单的方法来扩展`IncludeTemplatesForDisplay`除`TreeList`. 我正在使用 Sitecore 6.4。通常，当我只想选择一个项目时，我会使用 droptree`，但是看起来我无法过滤显示。

我可以看到我可以在哪里更改 Sitecore 代码，但我宁愿采用修补方法而不是编辑`sitecore.client.dll`. 我之前`<sitecore>`在配置部分中覆盖了处理程序，但是覆盖此功能的地方并没有跳出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:47:57.140

你可以看看`getDatasourceItems`管道，一个像这个博客中的解决方案：http: [//newguid.net/sitecore/2013/coded-field-datasources-in-sit](http://newguid.net/sitecore/2013/coded-field-datasources-in-sit) ecore/，或者标准的sitecore查询格式：`query:/sitecore/content/home/*[@@templatename='Section']`.

希望这可以帮助。

# wcf - 访问 WCF 服务时访问被拒绝错误

> ID：15529328
> 
> 赞同：4
> 
> 时间：2013-03-20T16:31:23.393
> 
> 标签：wcf, .net-4.5

我有一个 WCF 服务迁移到 .Net 框架 4.5，它安装在 IIS 7.0 中。我可以在浏览器中浏览服务。但是当我在说一个控制台应用程序中引用该服务并尝试在其中调用一个方法时，我收到错误“访问被拒绝”。下面是我正在使用的堆栈跟踪和 web.config 设置。

```
System.ServiceModel.Security.SecurityAccessDeniedException was unhandled
  HResult=-2146233087
  Message=Access is denied.
  Source=mscorlib
  StackTrace:
    Server stack trace: 
       at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
       at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at ConsoleApplication1.sharedservice.IShared.ProcessRequest(ProcessRequestRequest request)
       at ConsoleApplication1.sharedservice.SharedClient.ConsoleApplication1.sharedservice.IShared.ProcessRequest(ProcessRequestRequest request) in c:\Users\vijayara\Documents\Visual Studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\Service References\sharedservice\Reference.cs:line 214
       at ConsoleApplication1.sharedservice.SharedClient.ProcessRequest(String RuleName, String RequestMessage, Int32 WaitTime, Int32 ChannelID, Int32 PassThruMode, Int32 MaxResponseSize, Int32 MaxErrorText, Int32& ActualResponseSize, String& Response, Int32& ActualErrorTextSize, String& ErrorText) in c:\Users\vijayara\Documents\Visual Studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\Service References\sharedservice\Reference.cs:line 226
       at ConsoleApplication1.Program.Main(String[] args) in c:\Users\vijayara\Documents\Visual Studio 2012\Projects\ConsoleApplication1\ConsoleApplication1\Program.cs:line 22
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 

<configuration>
  <appSettings/>
  <connectionStrings/>
    <system.web>
    <compilation debug="false" targetFramework="4.5">

          <assemblies>
            <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
          </assemblies>

        </compilation>
        <authentication mode="Windows" />
    <pages controlRenderingCompatibilityVersion="4.0">
        <controls>
          <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </controls>
      </pages>

      <httpHandlers>
        <remove verb="*" path="*.asmx"/>
        <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
      </httpHandlers>
      <httpModules>
        <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </httpModules>

    </system.web>
    <system.webServer>
      <validation validateIntegratedModeConfiguration="false"/>
      <modules>
        <add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </modules>
      <handlers>
        <remove name="WebServiceHandlerFactory-Integrated"/>
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </handlers>
    </system.webServer>

  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="false" />
    <services>
      <service behaviorConfiguration="Access_Shared_WCF.SharedBehavior" name="Access_Shared_WCF.Shared">
        <endpoint address="" binding="basicHttpBinding" contract="Access_Shared_WCF.IShared">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http/localhost/Access_Shared_WCF/Shared" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Access_Shared_WCF.SharedBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-17T14:51:08.963

我对 WCF 有类似的问题。问题是我的 appPool 帐户对 IIS 生成的程序集没有权限，他将其用于“卷影复制”。[我通过使用 procmon http://technet.microsoft.com/cs-cz/sysinternals/bb896645.aspx](http://technet.microsoft.com/cs-cz/sysinternals/bb896645.aspx)来跟踪它，过滤到 IIS 进程名称“w3wp.exe”，状态为“拒绝访问”。然后再次调用服务并检查 procmon 输出哪些文件有此问题。

我在 c:\windows\temp\Microsoft.Generated.dll 可以访问拒绝，所以我将其删除，再次调用并生成新的并且一切正常。

另一个选项是像 LocalService 一样将“更强”的用户身份设置为 appPool （ appPool -> 高级设置 -> Indetitiy -> 预定义帐户 -> 本地服务）

但是使用 procmon 的解决方案更有趣:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T15:33:16.833

出现此错误的原因有很多。我遇到的时间是 wcf 方法被保护到特定的 AD 角色时：

1.  在 Web 服务客户端上设置 ClientCredentials。这可能很挑剔，对客户端连接执行某些操作可能会导致您丢失凭据。
2.  在设置 ClientCredentials 之前设置 InnerChannel.OperationTimeout 将清除 ClientCredentials（我知道很奇怪，但我测试了很多次）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-10T15:43:34.643

我相信这可能是服务尝试使用事件日志记录信息的问题。事件日志不存在，应用程序池标识伪用户无权*创建*事件日志。因此，使用高特权帐户的建议通过允许创建它来解决问题。可以简单地将用户切换到高帐户运行，然后切换回常规。

或者，如果您知道需要创建什么，则可以使用 powershell 直接创建事件日志（请注意，通常很容易查看任何 .NET 应用程序或 dll 的源代码来定位使用的 const 字符串名称）

```
 New-EventLog -source "My.Name.Space" -logname "MyApplicationName" 
```

资料来源：[https ://robertgreiner.com/wcf-azure-service-bus-access-is-denied-exception/](https://robertgreiner.com/wcf-azure-service-bus-access-is-denied-exception/)

# .htaccess - htaccess directoryindex重定向寻找css错误的地方

> ID：15529332
> 
> 赞同：2
> 
> 时间：2013-03-20T16:31:29.280
> 
> 标签：.htaccess, rewrite, directoryindex

您好，在我的 htaccesss 文件中，我输入了这段代码以确保我的目录索引文件设置为

v2013/index.html

所以我把这段代码

```
DirectoryIndex v2013/index.html 
```

然后我希望它看起来像 mydomain.com/Welcome，所以我添加..

```
RewriteEngine On
RewriteRule ^Welcome$ v2013/index.html [L] 
```

我的问题是为什么 DirectoryIndex 不再工作了.. 我如何告诉浏览器在 v2013 中查找 css，因为正在查找根目录。（我认为是因为重写）所以我的页面没有风格.. =（

换句话说就是寻找 www.domain.com/css/sheet.css insted 的

www.domain.com/v2013/css/sheet.css

答案在这里：

最终代码

```
DirectoryIndex v2013/index.html

RewriteEngine On

# exclude files already asking for v2013
RewriteCond %{REQUEST_URI} !^/v2013/
RewriteRule ^css/.*$ /v2013/$0
RewriteRule ^js/.*$ /v2013/$0
RewriteRule ^images/.*$ /v2013/$0

RewriteRule ^Bienvenido$ v2013/index.html [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:42:58.220

您可以添加一个额外的[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)，它也重写`css/`,`js/`和`images/`文件

```
# exclude files already asking for v2013
RewriteCond %{REQUEST_URI} !^/v2013/
RewriteRule ^(?:css|images|js)/.*$ /v2013/$0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:47:40.870

在你使用 css 文件的地方不要输入“css/style.css”，而是写“/css/style.css”。添加 / 会将您带到根目录。html 应如下所示：

```
 <link href="/v2013/css/style.css" rel"stylesheet" type="text/css" /> 
```

# ruby-on-rails - 设置修改配置文件的路线

> ID：15529336
> 
> 赞同：0
> 
> 时间：2013-03-20T16:31:40.923
> 
> 标签：ruby-on-rails, routes

我正在尝试了解如何设置新路线，但是我选择的路线不起作用，它只显示“没有路线匹配 [GET]”/users/18/settings“”。

我想做的是创建一个 /settings ，它将显示用户在注册页面 /users/new 上输入并显示在 /users/ID/edit 上的所有信息

路线.rb：

```
 Dating::Application.routes.draw do
  get 'signup' => 'users#new'
  get 'login' => 'sessions#new'
  get 'logout' => 'sessions#destroy'
  get 'edit' => 'users#edit'
  get "/profile/:id" => "users#show"
  get "profile/:id/settings" => 'users#edit'
  get 'settings', on: :member
  match 'settings' => 'users#settings'

  resources :users do
  resources :sessions
  resources :password_resets
  resources :galleries
  resources :photos

  root to: 'users#new'
  root to: 'galleries#index' 
```

结束结束

耙路线：

settings_user GET /users/:id/settings(.:format) users#settings GET /users(.:format) users#index POST /users(.:format) users#create GET /users/new(.:format) users #new GET /users/:id/edit(.:format) users#edit GET /users/:id(.:format) users#show PUT /users/:id(.:format) users#update DELETE /users/ :id(.:format) users#destroy root / users#new

```
 settings        /settings(.:format)                 users#settings
      users GET    /users(.:format)                    users#index
            POST   /users(.:format)                    users#create
   new_user GET    /users/new(.:format)                users#new
  edit_user GET    /users/:id/edit(.:format)           users#edit
       user GET    /users/:id(.:format)                users#show
            PUT    /users/:id(.:format)                users#update
            DELETE /users/:id(.:format)                users#destroy
   sessions GET    /sessions(.:format)                 sessions#index
            POST   /sessions(.:format)                 sessions#create
new_session GET    /sessions/new(.:format)             sessions#new 
```

edit_session GET /sessions/:id/edit(.:format) sessions#edit session GET /sessions/:id(.:format) sessions#show PUT /sessions/:id(.:format) sessions#update DELETE /sessions/ :id(.:format) 会话#destroy

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:39:11.730

尝试

```
resources :users do  
    get 'settings', on: :member  
end 
```

对于*/users/18/settings*
和

```
match 'settings' => 'users#settings' 
```

对于*/ 设置*。

# javascript - 防止 JavaScript 数字函数舍入大数字

> ID：15529337
> 
> 赞同：7
> 
> 时间：2013-03-20T16:31:42.697
> 
> 标签：javascript

我有一个字符串值'9223372036854775807'。我在 JavaScript 中使用 Number() 函数使用以下代码将其转换为数字值

```
var numericVal = Number(' 9223372036854775807 '); 
```

当我检查 numericVal 中的值时，它是 9223372036854776000。如何获得表示数字的字符串的等效值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:36:56.303

JavaScript 数字是[双精度](https://en.wikipedia.org/wiki/Double_precision)浮点数；可以精确存储的最大整数是 2^53 (9007199254740992)。如果你真的需要它，你有一些有趣的数学在你面前，或者你可以使用诸如[big.js 之类的库](https://github.com/MikeMcl/big.js)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T18:30:22.193

您可以将表示大整数的字符串比较为字符串-

较长的整数字符串较大，否则按顺序比较字符。

您可以对整数字符串数组进行排序

```
function compareBigInts(a, b){
    if(a.length== b.length) return a>b? 1:-1;
    return a.length-b.length;
} 
```

或返回两个数字字符串中较大的一个

```
function getBiggestBigInts(a, b){
    if(a.length== b.length) return a>b? a:b;
    return a.length>b.length? a: b;
} 
```

//例子

```
var n1= '9223372036854775807', n2= '9223372056854775807',
n3= '9223',n2= '9223372056854775817',n4= '9223372056854775'; 
```

**getBiggestBigInts(n1,n2)** ;>> 9223372056854775807

**[n1,n2,n3,n4].sort(compareBigInts)** ;>>

```
9223
9223372056854775
9223372036854775807
9223372056854775817 
```

只要确保您正在比较**字符串**。

（如果使用“-”减值，“更大”的字符串值会**更少**）

顺便说一句，您可以通过拆分小数点并比较整数部分来对大小**数**进行排序。如果整数长度相同且相等，请查看小数部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:40:42.657

看来您的数字大于 2^53，这是 javascript 中最大的整数，可以在不丢失精度的情况下表示（参见[这个问题](https://stackoverflow.com/questions/307179/what-is-javascripts-max-int-whats-the-highest-integer-value-a-number-can-go-t)）。

如果你真的需要操作大数，你可以使用像这样的特殊库：[https ://github.com/peterolson/BigInteger.js](https://github.com/peterolson/BigInteger.js)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-24T07:25:08.480

Number('9223372036854775807') 产生 9223372036854776000 的问题在于 JavaScript 的精度有限（最多 16 位），您需要 19 位。

一种解决方案可能是使用 java script [big-numbers](https://www.npmjs.com/package/big-numbers)库：

```
// Initializa library:
var bn = new BigNumbers();

// Create numbers to compare:
var baseNumber = bn.of('9223372036854775807');
var toCompareNumber = bn.of('9223372036854775808');

// Compare:
if(baseNumber.lessOrEquals(toCompareNumber)) {
    console.log('This should be logged');
} else {
    console.log('This should NOT be logged');
} 
```

# r - 基于指标的条件总和

> ID：15529349
> 
> 赞同：3
> 
> 时间：2013-03-20T16:32:01.583
> 
> 标签：r, sum, data-manipulation

我有一个这样的数据框：

```
 A   B   Ind
1 10   8     1
2  9  10     2
3  7   1     2
4 19  20     1
5  .   .     . 
```

如何根据`Ind`值对列进行求和？如果`Ind==1`，从列求和`A`，如果`Ind==2`，从列求和`B`。例如，前 4 行的输出应该是`10+10+1+19=30`，其中第一个 10 在`A`，第二个 10 在`B`，第三个 1 在`B`，第四个 19 在`A`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:45:12.620

另一种选择使用`I`

```
 sum(with(dat,A*I(Ind==1)+B*(Ind==2))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T16:36:26.163

假设您的 data.frame 被称为“mydf”，您可以使用`ifelse`如下：

```
sum(with(mydf, ifelse(Ind == 1, A, B))) 
```

这是该`ifelse`部分的结果：

```
> with(mydf, ifelse(Ind == 1, A, B))
[1] 10 10  1 19 
```

当然，如果你有多个条件，你可以根据需要嵌套它们。

* * *

这是一个使用基本子集的更详细的替代方案：

```
sum(with(mydf, c(mydf[Ind == 1, "A"], mydf[Ind == 2, "B"]))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-12T22:24:52.053

使用的解决方案`which`：

```
sum( df$A[which(df$Ind==1)] , df$B[which(df$Ind==2)] ) 
```

# c# - 如何以编程方式设置 x:Reference Markup Extension？

> ID：15529350
> 
> 赞同：3
> 
> 时间：2013-03-20T16:32:02.710
> 
> 标签：c#, wpf

是否可以为`x:Reference`代码中的绑定设置标记扩展？

例如：

`{Binding SelectedItem, Source={x:Reference ComboList}}`

所以我创建了一个这样的绑定：

```
Binding b = new Binding("SelectedItem");
b.Source = //What to put here?? 
```

我以前使用过，但我在[这个问题](https://stackoverflow.com/questions/11487649/binding-elementname-inside-a-datatemplate)`ElementName`中提到的 NameScope 有一些问题，因为这个绑定是在我创建的 UserControl 内部的 ComboBox 中设置的，显然如果我使用namescope 仅限于该 UserControl 而不是外部..`ElementName`

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:17:57.097

将我的评论转换为答案：

> {x:Reference} 是一个 XAML 构造，它在 C# 代码中不可用

如果您需要内部的某些东西从外部获得属性，则必须在内部`UserControl`创建该属性作为 a ，然后通过以下方式将您的元素绑定到该属性：`DependencyProperty``UserControl``RelativeSource`

在后面的 UserControl 代码中：

```
 public static readonly DependencyProperty SomeProperty = DependencyProperty.Register("Some", typeof (SomeValue), typeof (YourUserControl), new PropertyMetadata(default(SomeValue)));

        public SomeValue Some
        {
            get { return (SomeValue) GetValue(SomeProperty); }
            set { SetValue(SomeProperty, value); }
        } 
```

UserControl 可视化树中的某处：

```
<TextBox Text="{Binding Some, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}"/> 
```

# javascript - 防止刷新？

> ID：15529355
> 
> 赞同：2
> 
> 时间：2013-03-20T16:32:11.380
> 
> 标签：javascript, jquery

看了很多，但找不到解决我的问题的方法，有人可以告诉我为什么这不起作用吗？

```
if(titeln == 0 || grades == 0 || imdblink == 0 || bilden == 0 || handlingen == 0)
        {
            alert("Please fill out the form correctly");    
            $('form[name=test]').submit(function(e) {
            e.preventDefault();

            });
        }
        else
        {
            return null;
        } 
```

如果您在第一次完美提交时填写正确的表单，但是如果您将 som textarea 留空，则功能 preventDefault 会正常运行，那么您更正问题并填写它，当您按下提交时该功能仍然运行？为什么即使字段已更正，该功能仍会继续运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T16:33:20.930

因为你又绑定了！

您在上面的代码中需要做的就是`false`在遇到任何错误时返回。

IE

```
if(titeln == 0 || grades == 0 || imdblink == 0 || bilden == 0 || handlingen == 0)
{
    alert("Pleae fill out the form correctly"); 
    return false;
}
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:36:13.840

您可以尝试放入 else 子句

```
$('form[name=test]').submit(); 
```

# java - Android - NullPointerException - 无法启动 Activity ComponentInfo

> ID：15529356
> 
> 赞同：0
> 
> 时间：2013-03-20T16:32:14.623
> 
> 标签：java, android, android-layout, nullpointerexception

嗨，我在这行代码中收到 NullPointerException：

```
 findViewById(R.id.mapScreen).setDrawingCacheEnabled(true); 
```

当我尝试在模拟器中运行此活动时。

我认为这可能是我的 xml 的问题，但是对我来说一切看起来都是正确的。这是Java代码：

```
@Override
protected void onCreate(Bundle load)
{
  super.onCreate(load);

  //CODE FROM RIDETRACKING.JAVA
  FrameLayout frame = new FrameLayout(this);
  frame.setId(CONTENT_VIEW_ID);
  setContentView(frame, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
  //END OF CODE FROM RIDETRACKING.JAVA

  //setContentView(R.layout.map);
  findViewById(R.id.mapScreen).setDrawingCacheEnabled(true);
  mUnits = new UnitsI18n(this);
  mLoggerServiceManager = new GPSLoggerServiceManager(this); 
```

}

这是我的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:id="@+id/mapScreen">
<com.google.android.maps.MapView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/myMapView"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:enabled="true"
  android:clickable="true"
  android:apiKey="0S37nJcRwodWjzWn7yJwFRc9qr5gvaD2bdvOpEQ" 
  android:visibility="visible" />
 </RelativeLayout> 
```

这是我的 logcat 输出：

```
03-20 16:14:05.294: E/AndroidRuntime(2424): FATAL EXCEPTION: main
03-20 16:14:05.294: E/AndroidRuntime(2424): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.gpstracker/com.polaris.epicriders.Rides.RideTracking}: java.lang.NullPointerException
03-20 16:14:05.294: E/AndroidRuntime(2424):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at android.os.Looper.loop(Looper.java:137)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at java.lang.reflect.Method.invokeNative(Native Method)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at java.lang.reflect.Method.invoke(Method.java:511)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at dalvik.system.NativeStart.main(Native Method)
03-20 16:14:05.294: E/AndroidRuntime(2424): Caused by: java.lang.NullPointerException
03-20 16:14:05.294: E/AndroidRuntime(2424):     at com.android.riders.Rides.RideTracking.onCreate(RideTracking.java:181)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at android.app.Activity.performCreate(Activity.java:5104)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-20 16:14:05.294: E/AndroidRuntime(2424):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-20 16:14:05.294: E/AndroidRuntime(2424):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:33:56.553

设置activity的内容而不是FrameLayout。

```
setContentView(R.layout.layout_main); 
```

你得到 null 因为你没有设置活动布局，在这里你试图从布局中获取视图。

```
findViewById(R.id.mapScreen).setDrawingCacheEnabled(true); 
```

# sonarqube - 当源位于另一台服务器上时，如何让 Sonar Runner 运行？

> ID：15529361
> 
> 赞同：1
> 
> 时间：2013-03-20T16:32:47.043
> 
> 标签：sonarqube

我现在有点迷路了。

我设法在 Windows server 2008 上安装了 sonar 3.5，并让它与 SQL server 2008 一起工作。我可以访问仪表板，并且在数据库中创建了表。这是“声纳服务器”。

问题是我的资源位于另一台服务器上，即“源服务器”。
所以我在我的文件旁边创建了一个“项目属性”`.sln`文件。

现在我需要运行命令

```
$SONAR_RUNNER_HOME/bin/sonar-runner 
```

但真的不知道该怎么做。

首先我想知道这是否可能。
如果是，怎么做？

如果您需要更多信息，请告诉我，我会尽快提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:23:58.443

可能尝试以下方法：

1.  编辑 sonar-runner 使其指向 Sonar 服务器，具体取决于您的防火墙设置，您可以尝试 sonar.host.url。
2.  cd 到 sonar-runner.properties 所在的目录
3.  运行声纳亚军
4.  修复任何错误。

另见：[http ://docs.sonarqube.org/display/SONAR/Installing+and+Configuring+SonarQube+Runner](http://docs.sonarqube.org/display/SONAR/Installing+and+Configuring+SonarQube+Runner)

# javascript - 单击提交按钮时传递文本区域的值

> ID：15529363
> 
> 赞同：0
> 
> 时间：2013-03-20T16:32:55.147
> 
> 标签：javascript, jquery, asp.net, html

```
<textarea id="Comment" type="text" runat="server" rows="7" 
maxlength="2000" />

<input id="SubmitComment" type="button" value="Submit"
onclick="SubmitButton()" /> 
```

当用户将数据输入文本区域并单击“提交”按钮时，我希望将数据传递给 submitButton()，然后我可以将其发送到 Functions.CommentBoxForInvoiceUpdates

```
function SubmitButton() {
var commentBoxData = $('#Comment').val();
Functions.CommentBoxForInvoiceUpdates(id, Labour, commentBoxData);
        } 
```

Id 和 Labor 已在前面定义，因此它们可以正常工作，但是当我通过断点运行它时，“CommentBoxData”显示为未定义。为什么单击提交时会发送评论框中的数据？

感谢您的任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:36:26.773

你用 asp.net 标记。确定您使用的是呈现的 ID？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:37:23.237

尝试

```
var commentBoxData = $('#<%=Comment.ClientID%>').val(); 
```

# c# - 将视频插入 YouTube 播放列表

> ID：15529364
> 
> 赞同：0
> 
> 时间：2013-03-20T16:32:57.757
> 
> 标签：c#, youtube, youtube-api

我正在使用`YouTube`api 中的这种方法将视频添加到播放列表：

```
POST /feeds/api/playlists/PLAYLIST_ID HTTP/1.1
Host: gdata.youtube.com
Content-Type: application/atom+xml
Content-Length: CONTENT_LENGTH
Authorization: Bearer ACCESS_TOKEN
GData-Version: 2
X-GData-Key: key=DEVELOPER_KEY

<?xml version="1.0" encoding="UTF-8"?>
<entry xmlns="http://www.w3.org/2005/Atom"
    xmlns:yt="http://gdata.youtube.com/schemas/2007">
  <id>VIDEO_ID</id>
  <yt:position>1</yt:position>
</entry> 
```

正如 API 信息中所写，我需要一个接一个地发送视频以将多个视频添加到播放列表中。

如果我这样做，我会在 20 个视频后收到味精：

```
<?xml version='1.0' encoding='UTF-8'?><errors><error><domain>yt:quota</domain><code>too_many_recent_calls</code></error></errors> 
```

还有其他方法可以将视频插入播放列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:46:33.773

使用[Youtube Data API v3](https://developers.google.com/youtube/v3/)，您可以通过[playlistItems->insert](https://developers.google.com/youtube/v3/docs/playlistItems/insert)实现结果。

YouTube 数据 API v3 是目前​​推荐且广泛支持的版本，v3 的配额非常好。

# c++ - 使用openCv c ++复制图像的一部分

> ID：15529365
> 
> 赞同：14
> 
> 时间：2013-03-20T16:32:57.780
> 
> 标签：c++, c, opencv, image-processing

我正在使用 opencv，我想从另一个图像的一部分创建一个图像。

我没有找到执行此操作的函数，因此我尝试实现我的想法，该想法包括逐像素复制图像，但徒劳无功，我没有得到我正在等待的结果。

任何人都有另一个想法

代码：

```
#include "cv.h"
#include "highgui.h"
#include <stdlib.h>
#include <stdio.h>
#include <iostream>

int main(int argc,char** argv) {
  IplImage * img =0;

  uchar *data;
  int i,j,k;
  int height,width,widthStep,nChannels;
  img=cvLoadImage(argv[1],3);
  height =img->height;
  width = img->width;
  widthStep= img->widthStep;
  nChannels = img->nChannels;
  data=(uchar*)img->imageData;
  IplImage* img1=cvCreateImage(cvSize(height/2,width/2),IPL_DEPTH_8U,nChannels);
  for(i=0;i<height/2;i++){
    for(j=0;j<width/2;j++){
      for(k=0;k<3;k++){
        img1->imageData[i*widthStep+j*nChannels]=data[i*widthStep+j*nChannels];
      }
    }
  }
  cvShowImage("image_Originale2",img1);
  cvWaitKey(0);
  cvReleaseImage(&img);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-20T17:14:53.703

您应该使用`cv::Mat`' 的复制构造函数。它比`IplImage`：

```
int x = 10,
    y = 20, 
    width = 200,
    height = 200;

Mat img1, img2;
img1 = imread("Lenna.png");
img2 = img1(Rect(x, y, width, height)); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T17:28:03.910

您可以通过在该图像上设置**ROI**（感兴趣区域）并将 ROI 定义的部分复制到新图像来完成您想要完成的工作。

[您可以在这篇文章](http://areshopencv.blogspot.com.br/2010/12/region-of-interest-selection-roi.html)中看到使用的[演示`IplImage`](http://areshopencv.blogspot.com.br/2010/12/region-of-interest-selection-roi.html)。

这些帖子展示了如何使用 ROI 来解决不同的场景：

*   [同一图像中的多作物](https://stackoverflow.com/a/10073545/176769)
*   [使用鼠标从视频上的矩形设置 ROI](https://stackoverflow.com/questions/10881397/setting-roi-with-mouse-from-a-rectangle-on-a-video/10883266#10883266)
*   [将图像放入轮廓（OpenCV）](https://stackoverflow.com/questions/10920178/put-image-in-contour-opencv/10920613#10920613)
*   [IplImage 内的 IplImage](https://stackoverflow.com/a/10055573/176769)

请务必注意，您的代码使用的是 OpenCV 的**C 接口**。C++ 接口提供`cv::Mat`，相当于`IplImage`. 换句话说，您正在寻找的是该问题的**C 解决方案**。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-01T13:59:43.720

使用复制构造函数：

```
cv::Mat whole = ...; // from imread or anything else
cv::Mat part(
   whole,
   cv::Range( 20, 220 ), // rows
   cv::Range( 10, 210 ));// cols 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T16:35:07.713

查找[cvSetImageROI()](http://docs.opencv.org/2.4/modules/core/doc/old_basic_structures.html#setimageroi)函数。

> 为给定的矩形设置图像感兴趣区域 (ROI)。

# android - AccountPicker.newChooseAccountIntent，选择帐户时对话框关闭

> ID：15529366
> 
> 赞同：3
> 
> 时间：2013-03-20T16:33:00.087
> 
> 标签：android, google-play-services

我正在尝试使用 Google Play Services 生成的意图来选择 google 帐户

```
private void showGoogleAccountPicker() {
    Intent googlePicker = AccountPicker.newChooseAccountIntent(null, null,
        new String[] { GoogleAuthUtil.GOOGLE_ACCOUNT_TYPE }, true, null, null, null, null);
    startActivityForResult(googlePicker, PICK_ACCOUNT_REQUEST);
  }

  @Override
  protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
    if (requestCode == PICK_ACCOUNT_REQUEST && resultCode == RESULT_OK) {
      String accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
      Log.d(TAG, "Account Name=" + accountName);
    }
  } 
```

该对话框显示我的谷歌帐户和创建新帐户的选项。

![在此处输入图像描述](../Images/c7b514783778f30d7393919b223504a0.png)

如果我选择“添加帐户”选项，我会正确重定向到帐户创建向导，但如果我选择现有帐户并单击“确定”，对话框将关闭但它永远不会返回到活动

Logcat 只打印这一行。我不认为这有什么关系。

```
W/IInputConnectionWrapper(23576): showStatusIcon on inactive InputConnection 
```

**来源**

[http://gmariotti.blogspot.com.es/2013/03/snippet-google-picker-account.html](http://gmariotti.blogspot.com.es/2013/03/snippet-google-picker-account.html) [http://developer.android.com/reference/com/google/android/gms/common/AccountPicker.html](http://developer.android.com/reference/com/google/android/gms/common/AccountPicker.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T10:12:06.040

事实证明我的活动不在后台堆栈中，因为我在清单中明确要求它

```
<activity
            android:name=".ui.LoginActivity"
            android:label="@string/app_name"
            android:noHistory="true" 
```

所以对话框找不到任何人来返回结果。

真是浪费时间:(

# java - 在程序运行时获取方法参数的值

> ID：15529368
> 
> 赞同：4
> 
> 时间：2013-03-20T16:33:10.760
> 
> 标签：java, profiling

我需要弄清楚如何在程序运行时查看 java 方法的值。我无法更改正在运行的代码，并且我不想阻止代码的运行（因此在 eclipse 中使用调试模式是不可能的）。我只想告诉探查器或类似的东西，打印每次调用特定方法时收到的所有参数。

有没有办法做到这一点？

感谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:08:41.337

在你的情况下，你应该使用[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。用自定义代码包装您的方法并记录其所有调用。在一个项目中，我们使用 AspectJ 记录方法执行时间以进行分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:46:02.227

也许你可以使用像[Decorator](http://en.wikipedia.org/wiki/Decorator_pattern "装饰者")这样的东西。假设您有一个带有您想要分析的方法的类，如下所示：

```
 public class Example {

      public void doSomething(parameters) {
         doSomething;
      }
    } 
```

您可以扩展此类并添加用于分析方法的行为。所以你可以这样做：

```
 public class FilePrinterExample extends Example{

      @Override
      public void doSomething(parameters) {
          for each parameters do
              //print on file or what you want
          super.doSomething(parameters);
      }
    } 
```

我使用了一些伪代码，希望我很清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T20:56:05.137

[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)可以做到这一点。为所需的方法创建一个方法触发器并向其添加“打印方法调用操作”：

![在此处输入图像描述](../Images/bf723442fbd56e7b1af393fa18a95801.png)

如果您需要更大的灵活性，[此截屏视频](http://blog.ej-technologies.com/2011/09/using-run-interceptor-script-trigger.html)展示了如何使用“运行拦截器脚本”从正在运行的应用程序中提取内部状态。

免责声明：我公司开发 JProfiler。

# android - 向布局添加颜色背景和边框半径

> ID：15529372
> 
> 赞同：69
> 
> 时间：2013-03-20T16:33:16.833
> 
> 标签：android, android-layout

我想创建一个带有圆角和填充颜色背景的布局。

这是我的布局：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="210dp"
    android:orientation="vertical"
    android:layout_marginBottom="10dp"        
    android:background="@drawable/offerItemLayout">
    <LinearLayout
        android:id="@+id/offerImageHolder"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
            .
            .
            .
    </LinearLayout>
</LinearLayout> 
```

我有以下可`offerItemLayout`正确创建边框的可绘制 xml ( )：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape xmlns:android="http://schemas.android.com/apk/res/android"
               android:shape="rectangle">
            <corners
                android:radius="5dp"/>
            <stroke
                android:width="1dp"
                android:color="@color/bggrey" />            
        </shape>
    </item>
    // The lines below causes an inflation failure.
    <item>
        <fill
            android:color="@color/white"/>
    </item>
</layer-list> 
```

但是插入带有填充的项目会导致布局的膨胀失败。

此外，如果我为我的内部 LinearLayout ( `offerImageHolder`) 分配一个颜色背景，它会用我的圆角覆盖第一个背景。

关于正确执行此操作的任何想法？：/

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-03-20T16:40:54.070

您不需要单独的填充项。事实上，它是无效的。您只需将`solid`块添加到`shape`. 随后`stroke`在`solid`:

```
<shape 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">

    <corners android:radius="5dp" />
    <solid android:color="@android:color/white" />
    <stroke
        android:width="1dip"
        android:color="@color/bggrey" />
</shape> 
```

`layer-list`如果你只有一个，你也不需要`shape`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-20T16:48:41.933

可绘制文件夹中的 background.xml。

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
    <solid android:color="#FFFFFF"/>    
    <stroke
        android:width="3dp"
        android:color="#0FECFF" />

    //specify gradient
    <gradient
        android:startColor="#ffffffff" 
        android:endColor="#110000FF" 
        android:angle="90"/> 

    <padding
        android:left="5dp"
        android:top="5dp"
        android:right="5dp"
        android:bottom="5dp"/> 
    <corners
        android:bottomRightRadius="7dp"
        android:bottomLeftRadius="7dp" 
        android:topLeftRadius="7dp"
        android:topRightRadius="7dp"/> 
</shape>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="210dp"
    android:orientation="vertical"
    android:layout_marginBottom="10dp"        
    android:background="@drawable/background"> 
```

# ios - 使用 AJAX/JQUERY 时移动 Safari 不加载图像

> ID：15529373
> 
> 赞同：5
> 
> 时间：2013-03-20T16:33:17.187
> 
> 标签：ios, mobile, safari

我一直在为 iPhone 和 iPad 上的 Safari 问题而斗争。

我正在开发一个移动单页应用程序，其中大部分都在工作。除非涉及到任何类型的 AJAX 图像注入或切换显示图像的 CSS 类。调试时，我看到它只是轮询和轮询，再轮询一些试图获取图像资产。

有人能告诉我为什么我会遇到这个问题吗？此外，如果它是某种内存限制，我正在达到建议的解决方法和/或替代方案..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T13:37:41.467

我实际上找到了我的问题的答案。

通过 Apple 开发者论坛上的这个帖子。

[IOS6 / Safari 限制每台服务器一个连接](https://discussions.apple.com/thread/4466216?start=0&tstart=0)

我的网络应用程序具有向浏览使用长轮询的网站的任何人广播实时更新的功能。因此，其他任何东西（例如图像）都无法通过 Ajax 加载，因为当时正在占用活动连接。

# url-routing - Zend Framework 2 Routing 部分动作名称基于路由段

> ID：15529375
> 
> 赞同：0
> 
> 时间：2013-03-20T16:33:20.250
> 
> 标签：url-routing, zend-framework2, zend-framework-mvc

有没有办法在 ZF2（Segment 或其他）中设置路由，以便`/staff/list`转换为`staffListAction()`我的控制器中的操作？

通常 /staff-list 转换为 staffListAction。有没有办法改变那个分隔符？

我在 Evan Coury 的博客上看到了这个，但它谈论的是一个片段，而不是一个动作。

[更改分段分隔符](http://evan.pro/zf2-router-talk.html#slide18)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:49:18.027

这几乎是 type 的路线`literal`。就像是

```
'staff' => array(
    'type' => 'literal',
    'options' => array(
        'route' => '/staff',
        'defaults' => array(
            'controller' => 'namespace-controller-staff',
            'action' => 'index'
        )
    ),
    'may_terminate' => true,
    'child_routes' => array(
        'list' => array(
            'type' => 'literal',
            'options' => array(
                'route' => '/list',
                'defaults' => array(
                    'action' => 'staffList'
                )
            )
        )
    )
), 
```

没试过，但我认为它有效。就我个人而言，我尽可能地使用文字路线，因为它们是最快的匹配。

# javascript - for 循环索引无缘无故被转换为字符串

> ID：15529378
> 
> 赞同：0
> 
> 时间：2013-03-20T16:33:32.660
> 
> 标签：javascript

我正在用 JavaScript 编写代码并检测到这种我无法解释的奇怪行为。

```
for (i in bubbles){

bubbles[i].string = "some stuff!" // <- no errors here

results[0] = i - 1 
results[1] = i + 1
results[2] = parseInt(i) + 1 

} 
```

当`i = 1`这种情况发生时

```
results[0] -> 0
results[1] -> 11
results[2] -> 2 
```

这甚至可能吗？也许是由于代码中的其他错误。我试图隔离上面的情况，但是，如果你需要它，这里是整个代码

```
for (i in bubbles){

            if (bubbles[i].check()){

                // define which boubble has been clicked and start dragging
                bubbleDrag[2] = bubbles[i].check();
                bubbleDrag[1] = i;
                bubbleDrag[0] = true;

                // define where to check to avoid overlapping dates
                if (i != 0 && i < bubbles.length - 1){

                    bubbleDrag[3] = i - 1;
                    bubbleDrag[4] = i + 1;

                } else if (i == 0 && bubbles.lenght > 1){

                    bubbleDrag[3] = i + 1;

                } else if (i == bubbles.lenght - 1){

                    bubbleDrag[3] = i - 1;

                }

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:37:49.320

Javascript 正在解释您的代码。

```
results[0] = i - 1 
// string minus number, so javascript "assumes" you want "i" as a number

results[1] = i + 1 
// string concatenate with a number, so javascript assumes you want a concatenated string 
```

更多示例。

```
"30" - 10; // echoes number 20
"30" + 10; // echoes string "3010" 
```

有些人喜欢这样的语言解释，有些人不喜欢。我发现自己属于后者。IMO，字符串 + 数字*应该*引发错误，因为意图不明确。松散/非严格的解释可能最终导致意想不到的结果。如果您阅读 Douglas Crockford 的一些代码，您会注意到他使用了广泛的严格类型比较（===，！==），这就是原因的一部分。

# java - 处理spring mvc中的包装异常

> ID：15529381
> 
> 赞同：9
> 
> 时间：2013-03-20T16:33:46.803
> 
> 标签：java, spring, exception, spring-mvc, exception-handling

我有 Spring MVC 和杰克逊。当我开始一个不正确的请求时，杰克逊映射失败并被`UnrecognizedPropertyException`抛出。我想使用处理这个异常

```
@ExceptionHandler
public String handle(UnrecognizedPropertyException e) {
  ...
} 
```

但是 Spring 包装了这个异常，`HttpMessageConversionException`所以上面的代码不起作用。是否可以在 Spring 中处理 Jackson 特定（或一般库特定）异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T16:50:46.540

不幸的是，[`UnrecognizedPropertyException`](https://fasterxml.github.io/jackson-databind/javadoc/2.8/com/fasterxml/jackson/databind/exc/UnrecognizedPropertyException.html)是`IOException`. `RequestResponseBodyMethodProcessor`处理（我假设这`@RequestBody`是发生异常的地方）对`IOException`（解释为请求输入流的失败）进行特殊处理，将其包装在`HttpMessageNotReadableException`. 此外，[`HttpMessageConverter`](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html)如果`HttpMessageNotReadableException`在[`read`](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html#read-java.lang.Class-org.springframework.http.HttpInputMessage-).

无论如何，你都必须处理这个问题（如果杰克逊抛出未经检查的异常，事情可能会有所不同）。

幸运[的是，从 4.3 开始，Spring MVC`ExceptionHandlerMethodResolver`](https://github.com/spring-projects/spring-framework/commit/981c894acf8ee075961c98b9f5fdff2b35d9f765)（哪些进程`@ExceptionHandler`）可以解包`cause`异常（[参见 SPR-14291](https://jira.spring.io/browse/SPR-14291)）。因此，假设您在 的继承层次结构中没有任何异常的`HttpMessageNotReadableException`处理程序，您的处理程序方法

```
@ExceptionHandler
public String handle(UnrecognizedPropertyException e) {
    ...
} 
```

将用于处理异常。这发生在 Spring MVC 查找可以处理 a 的处理程序方法`HttpMessageNotReadableException`之后，然后使用解包嵌套异常[`Throwable#getCause`](https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html#getCause--)并再次尝试查找。

* * *

在 4.3 之前的版本中，或者如果您在 的继承层次结构中确实有异常类型的处理程序`HttpMessageNotReadableException`，则您始终可以在自己提取原因后进行委托。

```
@ExceptionHandler
public String handle(HttpMessageConversionException e) throws Throwable {
    Throwable cause = e.getCause();
    if (cause instanceof UnrecognizedPropertyException) {
        handle((UnrecognizedPropertyException) cause);
    }
    ...
}

public String handle(UnrecognizedPropertyException e) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:16:21.343

我这样做：

```
/**
 * Global exception handler for unhandled errors.
 * @author Varun Achar
 * @since 2.0
 * @version 1.0
 *
 */
public class Http500ExceptionResolver extends SimpleMappingExceptionResolver
{
    @Inject
    private ViewResolver resolver;

    @Override
    public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)
    {
        ModelAndView mv = new ModelAndView();
        response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
        if(CommonUtil.isAjax(request))
        {
            MappingJackson2JsonView view = new MappingJackson2JsonView();
            view.setObjectMapper(JsonUtil.getObjectMapper());
            mv.addObject("responseMessage", "We had some problems while serving your request. We are looking into it");
            mv.addObject("responseCode", GenericResponse.ERROR.code());
            mv.addObject("success", false);
            mv.setView(view);
        }
        else
        {
            mv.setViewName(resolver.getView(ViewConstants.ERROR_PAGE));
        }
        return mv;
    }
} 
```

在我的 servlet-context 中：

```
 <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver">
        <property name="order" value="0" />
    </bean>
    <bean id="securityExceptionResolver"
        class="com.trelta.commons.utils.security.SecurityExceptionResolver">
        <property name="order" value="1"></property>
        <property name="exceptionMappings">
            <map>
                <entry key="org.springframework.security.access.AccessDeniedException"
                    value="/common/accessDenied"></entry>
                <entry key="org.springframework.security.core.AuthenticationException"
                    value="/common/authenticationFailure"></entry>
            </map>
        </property>
    </bean>
    <bean id="http500ExceptionResolver"
            class="com.trelta.commons.utils.security.Http500ExceptionResolver">
            <property name="order" value="3" />
    </bean> 
```

order 字段很重要，因为 Spring 按该顺序循环通过异常解析器。您还可以为自己定义此类异常映射，一切顺利！

检查[此](http://developingdeveloper.wordpress.com/2008/03/09/handling-exceptions-in-spring-mvc-part-2/)博客文章和 javadoc 以获取[SimpleMappingExceptionResolver](http://static.springsource.org/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/web/portlet/handler/SimpleMappingExceptionResolver.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-11T15:09:04.517

我们正在使用 org.apache.commons.lang.exception.ExceptionUtils ...

```
private myMethod (Throwable t) {

    if (ExceptionUtils.getRootCause(t) instanceof MyException) ...
} 
```

# java - Java INSERT 语法错误

> ID：15529385
> 
> 赞同：-2
> 
> 时间：2013-03-20T16:34:01.140
> 
> 标签：java, ms-access

我可以知道这个 sql 语句中的错误是什么，我使用这个方法从我的客户端添加一个计划。我正在使用 RMI 技术

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        String database = "jdbc:odbc:DRIVER={Microsoft Access Driver (*.mdb, *.accdb)};DBQ="+path+".accdb;";
        dbConn = DriverManager.getConnection(database, "", "");
        ps = dbConn.prepareStatement("INSERT into Schedule(Subject, Student, Instructor, Time, Days, Room) VALUES(?,?,?,?,?,?)");
        ps.setString(1, subject);
        ps.setString(2, student);
        ps.setString(3, instructor);
        ps.setString(4, time);
        ps.setString(5, days);
        ps.setString(6, room);
        ps.executeUpdate(); 
```

当我公开这个方法时总是会发生错误，这里是：

```
java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Syntax error in INSERT INTO statement. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T16:40:36.567

如果没有详细的错误消息，我无法确定，但这可能是因为它`Time`是[SQL 中 Microsoft Access 的保留字](http://support.microsoft.com/kb/286335)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:40:48.203

其原因在于`Time is reserved keyword`。

不要使用**Time 或 From**这是常见的开发人员用作表属性的原因，他们为什么会出错`Syntax error in INSERT INTO statement`

在你的情况下，而不是`Time`作为表的属性使用任何其他名称。

请参阅本[文档，它们是保留关键字。](http://msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx)

# modx - 通过片段/插件更改 img 的 src

> ID：15529389
> 
> 赞同：0
> 
> 时间：2013-03-20T16:34:20.820
> 
> 标签：modx

我想从文档中将空的 img 标签的源更改为来自电视的路径。接下来我想通过 getResources 显示文档（在电视中具有不同的图像）。这个怎么做？我必须使用 PHP 还是有更好更快的方法？

所以从有电视机的文档中的 <img> 到 "\aaa\j.jpg" 应该更改为 <img src="\aaa\j.jpg">

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:21:16.133

将您的图像电视设置为“图像”电视类型，并且它的输出也为图像〜这样，如果没有填充图像电视，您将不会有空的图像标签。如果您想要该电视的默认图像值，只需在电视设置首选项中进行设置。

如果我理解，您希望每个资源的“默认”图像都不同吗？在这种情况下，我们将需要更多信息，例如您想如何确定图像是什么。但基本上，“是的”你可能不得不使用一些代码 - 查看文档中的绑定：[http ://rtfm.modx.com/display/revolution20/Bindings](http://rtfm.modx.com/display/revolution20/Bindings)

getResources 部分是第二个问题吗？[您需要稍微澄清一下您的问题]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:52:39.067

您可以使用[来自 MODX 的过滤器](http://rtfm.modx.com/display/revolution20/Input+and+Output+Filters+%28Output+Modifiers%29)来做到这一点。在您的模板中：

```
<img src="[[*your_tv_name:notempty=`[[*your_tv_name]]`]]" /> 
```

这将检查您的电视是否已设置，然后将其输出。我建议您创建您的电视类型 URL（在输入选项下）以确保它是有效路径。

# php - 在php中使用get方法时遇到问题

> ID：15529400
> 
> 赞同：0
> 
> 时间：2013-03-20T16:34:56.743
> 
> 标签：php, forms, get

您好，我的网页在执行这小部分代码后挂起。`_GET`好像和表的用途有关

```
<?php
  if(isset($_GET['radGr']))
  {
     $radGroup=$_GET['radGr']);
  }
?>

<form action='Exec3.php' method='get'>
<fieldset>
<legend>Operator</legend>
  <label>+
    <input type='radio' name='radGr' 
    <?php if($radGr == 0){ echo 'Checked=checked' ;} ?>
    value=0 >
  </label>
  <label>-
    <input type='radio' name='radGr' 
    <?php if($radGr == 1){ echo 'Checked=checked' ;} ?>
    value=1 >
  </label>  
</fieldset>
<input type='submit' value='transfert'>
</form> 
```

你在我的代码中看到什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:42:22.657

变量`$radGr`不存在，应该是`$radGroup`。

在表单中的 php 中更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:48:58.797

是因为`)`近`$radGroup=$_GET['radGr']);`

只需将其删除。

您可以将代码更改为：

```
<input type='radio' name='radGr' 
<?php echo(!empty($radGroup) && $radGroup == 0)? 'Checked=checked' : ''; ?>  
value=0 > 
```

# android - 获取今天日期的条目

> ID：15529406
> 
> 赞同：1
> 
> 时间：2013-03-20T16:35:15.010
> 
> 标签：android, sqlite

我正在尝试获取今天日期的所有行，并返回我得到的行数。应用程序在加载时崩溃。

**方法/SQLite 查询**

```
 public int getTodaysCount() {
    SQLiteDatabase db = smokinDBOpenHelper.getWritableDatabase();
    GregorianCalendar gc = new GregorianCalendar();
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
    String today = sdf.format(gc.getTime());

    Cursor cursor = db.rawQuery("SELECT * FROM " + smokinDBOpenHelper.INCIDENTS_TABLE
            + " WHERE " + KEY_DATE + " = DATETIME( ' " + today + " ' )", null);

    if (cursor.getCount() == 0 || !cursor.moveToFirst()) {

        throw new SQLException("No entries found");
    }

    return cursor.getCount();       
} 
```

**来自日志的错误**

```
03-20 12:26:25.913: E/AndroidRuntime(677): Caused by: 
android.database.sqlite.SQLiteException: near "==": syntax error (code 1): , while 
compiling: SELECT * FROM incidentsWHERE DATE_COLUMN == DATETIME( ' 2013-03-20 ' ) 
```

错误日志似乎告诉我我不允许使用 == 。那么，如果是这种情况，我该如何执行此操作？`<=`和`>=`？_ 还有一种方法可以像常规`query`一样执行此查询`rawQuery`吗？

**例子：**

```
db.query(SmokinDBOpenHelper.INCIDENTS_TABLE, new String[] 
            {KEY_ID, KEY_DATE}, KEY_DATE.equals(now) , null, null, null, null); 
```

**编辑**

新日志错误消息：

```
03-20 12:56:22.103: E/AndroidRuntime(1153): Caused by:    
android.database.sqlite.SQLiteException: no such column: DATE_COLUMN (code 1): , while 
compiling: SELECT * FROM incidents WHERE DATE_COLUMN = DATETIME( ' 2013-03-20 ' ) 
```

**事故表**

```
public static final String KEY_ID = "_id";

public static final String KEY_LOCATION = "location";
public static final int LOCATION_COLUMN = 1;

public static final String KEY_DATE = "date";
public static final int DATE_COLUMN = 2;

private SmokinDBOpenHelper smokinDBOpenHelper;

public MySmokinDatabase (Context context) {
    smokinDBOpenHelper = new SmokinDBOpenHelper(context, SmokinDBOpenHelper.DATABASE_NAME, 
            null, SmokinDBOpenHelper.DATABASE_VERSION);
}   

private static class SmokinDBOpenHelper extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "smokin.db";
    private static final String INCIDENTS_TABLE = "incidents";
    private static final int DATABASE_VERSION = 1;

    //SQL Statement to create a new database.

    private static final String DATABASE_CREATE = "create table " + 
        INCIDENTS_TABLE + " (" + 
        KEY_ID +  " integer primary key autoincrement, " +
        KEY_LOCATION + " text not null, " + 
        KEY_DATE + " text not null);";

    // Constructor

    public SmokinDBOpenHelper(Context context, String name, 
                   CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    //Called when no database exists in disk and the helper class needs
    //to create a new one. 

    @Override
    public void onCreate(SQLiteDatabase _db) {
        _db.execSQL(DATABASE_CREATE);
    }

    //Called when there is a database version mismatch meaning that the version
    //of the database on disk needs to be upgraded to the current version.

    @Override
    public void onUpgrade(SQLiteDatabase _db, int _oldVersion, int _newVersion) {
        // Log the version upgrade.
        Log.w("TaskDBAdapter", "Upgrading from version " + 
                              _oldVersion + " to " +
                              _newVersion + ", which will destroy all old data");

        // Upgrade the existing database to conform to the new version. Multiple 
        // previous versions can be handled by comparing _oldVersion and _newVersion
        // values.

        // The simplest case is to drop the old table and create a new one.
        _db.execSQL("DROP TABLE IF EXISTS " + INCIDENTS_TABLE);
        // Create a new one.
        onCreate(_db);
    }       
} 
```

**最新的错误信息**

```
03-20 13:33:03.483: E/AndroidRuntime(1342): Caused by: android.database.SQLException: 
No entries found 
```

**插入方法**

```
public void smokedHandler(View view) {
    Spinner spinner = (Spinner) findViewById(R.id.location_spinner);

    String s = spinner.getSelectedItem().toString();
    String d = model.getDates();

    mySmokinDatabase.insertSmokinValues(s, d);      

    refreshView();
}

public long insertSmokinValues(String s, String d) {
    SQLiteDatabase db = smokinDBOpenHelper.getWritableDatabase();
    ContentValues newSmokinValues = new ContentValues();

    newSmokinValues.put(KEY_DATE, s);
    newSmokinValues.put(KEY_LOCATION, d);

    return db.insert(SmokinDBOpenHelper.INCIDENTS_TABLE, null, newSmokinValues);
}

public String getDates() {
    GregorianCalendar gc = new GregorianCalendar();
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm");
    dates = sdf.format(gc.getTime());       

    return dates;
} 
```

最后一点是，当我现在单击按钮时，存储在我的数据库中的值是
`s: Home`
`d: 2013-3-20 - 14:09`

一如既往地感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:41:18.720

> android.database.sqlite.SQLiteException：靠近“==”：语法错误（代码1）

你的 logcat 说明了一切。问题是**`==`**这是返回布尔值的运算符，您需要关联。

```
String query = "SELECT * FROM " + smokinDBOpenHelper.INCIDENTS_TABLE
+ " WHERE DATE_COLUMN = DATETIME( ' " + today + " ' )", null); 
```

## 笔记：

我建议您使用占位符而不是硬编码方法。它更清洁，更安全，您可以避免忘记单引号的问题。

```
Cursor c = db.rawQuery(query, new String[] {today}); 
```

## 更新：

> android.database.sqlite.SQLiteException：没有这样的列：DATE_COLUMN（代码 1）：

这意味着`DATE_COLUMN`您的数据库中不存在您。您使用常量 KEY_DATE 定义了它，因此您需要将查询更改为：

```
String query = "SELECT * FROM " + smokinDBOpenHelper.INCIDENTS_TABLE
    + " WHERE " + KEY_DATE + " = DATETIME( ' " + today + " ' )", null); 
```

## 更新 2：

我的建议是执行不带 where 子句的简单查询，您将查看数据库中是否有记录：

```
String query = "SELECT * FROM " + smokinDBOpenHelper.INCIDENTS_TABLE", null); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T16:44:43.440

使用 '=' 符号代替 '==' 符号，因为 Sqlite 在 Query 语句中不支持 '==' 符号。例如：

```
 Cursor cursor = db.rawQuery(
        "SELECT * FROM "
        + smokinDBOpenHelper.INCIDENTS_TABLE +
        " WHERE " + 
        "DATE_COLUMN = DATETIME( ' " + today + " ' )", null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T16:37:49.913

`incidents`您在and之间缺少空格`WHERE`：

```
Cursor cursor = db.rawQuery(
            "SELECT * FROM "
            + smokinDBOpenHelper.INCIDENTS_TABLE +
            " WHERE " + 
            "DATE_COLUMN = DATETIME( ' " + today + " ' )", null); 
```

注意之前添加的空格`WHERE`。

也`==`应该是单身`=`

# selenium - 让 Selenium WebDriver 在 Google 地图方向面板中向下滚动

> ID：15529407
> 
> 赞同：0
> 
> 时间：2013-03-20T16:35:15.150
> 
> 标签：selenium, webdriver, scrollbar

我试图让 Selenium，特别是 WebDriver v2.31，与谷歌地图交互。我可以点击 [first] Get Directions 按钮输入一对地址，然后单击两个地址下的 Get Directions 按钮。这导致了一组行驶方向。我不能做的是让 Selenium 滚动到“方向”面板的底部，这样我就可以看到目的地和“保存到我的地图”链接。不知道是不是因为滚动条是浏览器产生的问题。

我可以在 Yahoo! 上进行搜索 并滚动到结果网页的底部；我认为这是因为网页架构中没有其他框架或面板。尽管如此，浏览器生成的是滚动条，而不是网页。

我可以用鼠标按住并向下拖动滚动条来构建一个动作。我不喜欢这种解决方案，因为如果页面大小不同或面板大小不同，执行此操作会导致大量重新计算。我更喜欢类似于 Yahoo! 中的单个“文档”窗口的解决方案。或谷歌代码。

任何帮助将不胜感激。在过去的三天里，我一直在互联网上绞尽脑汁寻找解决方案。

谢谢。

史蒂夫

附录：如下所述。我不是想对地图本身做任何事情，而是对包含方向的面板做任何事情。我正在使用 Google 地图，因为它类似于我稍后必须测试的应用程序。我需要能够让 [Selenium] WebDriver 滚动到面板底部，这样我就可以选择“下一步”链接——就像滚动到 Google 地图中的“方向”面板底部并在底部看到“保存”链接一样。

我不确定在使用术语面板时是否使用了正确的术语。问题在于，当显示网页时，面板会动态生成滚动条。

```
driver.switchTo().frame(driver.findElement(By.id("spsizer")));
JavascriptExecutor js = (JavascriptExecutor)driver;
js.executeScript("javascript:window.scrollBy(250,750)", element);
driver.switchTo().defaultContent(); 
```

不幸的是，“面板”不包含在框架中或者是框架......由 Selenium 返回的异常标识：

```
 Exception in thread "main" org.openqa.selenium.NoSuchFrameException: Element is not a frame element: DIV 
```

我相信我已经确定该面板具有使用 FireBug 的 ID（“spsizer”）。

这也不起作用：

```
element = driver.findElement(By.id("spsizer"));
JavascriptExecutor js = (JavascriptExecutor)driver;
js.executeScript("javascript:window.scrollBy(250,750)", element); 
```

这只是在不滚动到“方向”面板底部的情况下执行，但它也不会引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:37:25.697

我可以使用下面屏幕截图中给出的以下代码**保存**到**我的地图链接。**

无需记录向下滚动面板的步骤，Selenium 可以在网页中的任何 Web 对象上定位和执行操作，而用户不可见。

![在此处输入图像描述](../Images/d66031cd79df2d14796f447d14edcecd.png)

**代码详情：**

第 6 行：**Command** -waitForVisible Target **-** //div[@id='dir_sr']/a[@id='srlink']

我添加了**waitForVisible**，这样 Selenium 将等待 5 秒，然后链接**保存到我的地图**可见。**这将为按下“获取路线”**按钮后加载页面提供足够的同步时间。**//div[@id='dir_sr']/a[@id='srlink']**是链接**保存到我的地图的 XPath 定位器**

第7行：**Command-**点击 **目标-** //div[@id='dir_sr']/a[@id='srlink']

点击链接**保存到我的地图**

第8行：**Command-**单击 目标- //按钮[@id='srsave' **]**

点击按钮**保存**

C#.Net WebDriver 代码相同。请注意，必须提供 Google 帐户用户名和密码才能保存地图链接。

```
using System;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading;
using NUnit.Framework;
using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.Support.UI;

namespace SeleniumTests
{
    public class GoogleMapSavingTest
    {
          static void Main(string[] args)
          {
              IWebDriver driver = new FirefoxDriver();
              driver.Navigate().GoToUrl("https://maps.google.com.au/");
              driver.FindElement(By.Id("d_launch")).Click();
              driver.FindElement(By.Id("d_d")).Clear();
              driver.FindElement(By.Id("d_d")).SendKeys("Franklin, ACT");
              driver.FindElement(By.Id("d_daddr")).Clear();
              driver.FindElement(By.Id("d_daddr")).SendKeys("Gungahlin, ACT");
              driver.FindElement(By.Id("d_d")).Click();
              driver.FindElement(By.Id("d_sub")).Click();
              for (int second = 0;; second++) 
              {
                    if (second >= 60) Assert.Fail("timeout");
                     try
                     {
                        if  (driver.FindElement(By.XPath("//div[@id='dir_sr']/a[@id='srlink']")).Displayed) break;
                    }
                    catch (Exception)
                    {}
                    Thread.Sleep(1000);
                }
             driver.FindElement(By.XPath("//div[@id='dir_sr']/a[@id='srlink']")).Click();
                driver.FindElement(By.Id("Email")).SendKeys("UserName");
                driver.FindElement(By.Id("Passwd")).SendKeys("Password");
                driver.FindElement(By.Id("signIn")).Click();
                for (int second = 0; ; second++)
                {
                    if (second >= 60) Assert.Fail("timeout");
                    try
                    {
                        if (driver.FindElement(By.XPath("//div[@id='dir_sr']/a[@id='srlink']")).Displayed) break;
                    }
                    catch (Exception)
                    { }
                    Thread.Sleep(1000);
                }
             driver.FindElement(By.XPath("//div[@id='dir_sr']/a[@id='srlink']")).Click();
            driver.FindElement(By.XPath("//button[@id='srsave']")).Click();

          }

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:35:19.507

我知道有人在 GitHub 上创建了一个 Selenium 扩展，旨在自动化地图应用程序，但我不记得如何找到它。几周前我在浏览 GitHub 时看到了它，它通过 javascript 使用图像识别（我不是指 Sikuli）。我认为，如果您足够努力地寻找它，那么您正在寻找的东西就会存在。

如果您使用的是远程网格，我会避免使用 Sikuli，否则它可能对您有用。此外，当涉及 iframe 时，最好在放弃自动化框架之前始终尝试 JavaScriptExecutor（带有 switchTo 框架）。

在那之前，您可以从查看[WebDriverJS](https://code.google.com/p/selenium/wiki/WebDriverJs)开始。此外，即使只是为了获得灵感， [GhostDriver也可能值得一看。](https://github.com/detro/ghostdriver)

# c++ - 数据成员/代码指针偏移

> ID：15529409
> 
> 赞同：2
> 
> 时间：2013-03-20T16:35:18.333
> 
> 标签：c++, pointers, memory, memory-management

有人可以帮我理解以下报价，因为我没有得到它：

> 如果成员相对于结构或类开头的偏移量小于 128，则访问数据成员的代码会更紧凑。示例：
> 
> ```
> class S2{
>     public:
>     int a[100];   //400 bytes. first byte at 0, last byte at 399
>     int b;        //4 bytes.   first byte at 400, last byte at 403
>     int ReadB() {return b;}
> }; 
> ```
> 
> b 的偏移量在这里是 400。任何通过指针或成员函数（如 ReadB()）访问 b 的代码都需要为指针添加 4 字节的偏移量。**如果 a 和 b 交换，则可以使用 1 字节有符号整数偏移量访问两者**。

这个 1 字节的值是从哪里来的？如果交换 a 和 b，b 将从 0 字节开始，而 a 将从 4 字节开始？

编辑：我的错误，数组大小应该是 100

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:43:29.607

[在原始问题从更改为之后编辑`a[400]`。`a[100]`]

他们的观点是正确的：

*   在目前的`S2`结构中，`a[100]`是 100 个 4 字节整数；所以实际上是 400 字节长。`a`因此偏移量为 0 到 399。`b`（同样是 4 字节 int）将（至少）放置在 400-403 的偏移量处：

    ```
    Offset  data
    000-399 a[0]-a[99] inclusive
    400-403 b 
    ```

*   如果您要交换的顺序`a`和`b`偏移量`a`将是 0-3 和`b`将是 4-403：

    ```
    Offset  data
    000-003 b
    004-403 a[0]-a[99] inclusive 
    ```

*   在这两种情况下，访问`b`都将使用 16 位偏移量，即使在数组的早期也是如此，因为可能需要偏移量范围。仅在第二种情况下，`a`可以使用 8 位偏移（取决于 CPU）进行访问。这可以更快（取决于 CPU）。这完全是关于存储类存储位置和变量存储位置之间的偏移量所需的位数。

希望这可以帮助。我在这里假设 4 字节整数（这很常见，但不是通用的），因为我认为原始引用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T16:50:50.777

他们试图指出的是，从结构开头到`b`成员的偏移量（以*字节*为单位）> 255，因此不能用基指针的单个 8 位加法来计算。需要更多位：

```
Offset           Member
0                a    // offset always zero
100*sizeof(int)  b    // offset guaranteed to be at 100*sizeof(int) 
```

反转字段顺序

```
0                b    // offset always zero
sizeof(int)*     a    // offset always sizeof(int) + potential padding 
```

在第一种情况下访问`b`需要基指针 + 需要至少 16 位偏移量的长度值（假设您的最小实体是 8 位）。在第二种情况下，两者`b`和`a`都在适合 8 位的结构基地址的偏移量之内。

而且我发现这有点误导作者至少没有提到潜在的成员填充。

**编辑**更新以反映 OP 从 member 的 400 到 100 个数组插槽的更改`b`。应该注意的是，如果这是一些具有 16 位实现`int`值的被破坏的嵌入式系统，作者指出的将是错误的。在这种情况下，数组将是`100 * 2`- 字节宽，这仍然允许 8 位偏移量到达第二个成员。对于具有 4 字节（或更大）实现`int`值的系统，作者的观点是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:43:49.437

它正在谈论存储偏移量所需的空间。在给出的示例中，`a`位于偏移量 0 处（需要 1 个字节来表示）并且`b`位于偏移量 400*sizeof(int) 处（实际上可能需要 4 个字节）。如果交换它们，则`a`位于偏移量 0（1 个字节）和`b`偏移量 4（1 个字节）处。

# mysql - 社交网络网站的复杂 sql 查询

> ID：15529410
> 
> 赞同：0
> 
> 时间：2013-03-20T16:35:20.767
> 
> 标签：mysql, sql, join

我正在构建一个简单的社交网络，其中包含以下架构（我没有包含表中的所有字段，仅包含相关字段）：

```
tbl_users:
id
username

tbl_friends:
user_id FK tbl_users.id
friend_id FK tbl_users.id

tbl_questions:
id
user_id
title
date_created

tbl_answers:
id
question_id
body 
```

我想要的是检索属于用户朋友的所有问题，每个问题限制为 3 个答案。结果将有效率的限制，比如说我朋友的最后 5 个添加问题。如果有人可以提供帮助，我想要一个可扩展的解决方案。我设法通过 2 个查询来做到这一点：第一个查询找到我所有的朋友 SELECT id FROM tbl_friends WHERE user_id=:id ORfriend_id=:id

之后，我将结果用于 WHERE IN 子句来仅获取问题。我无法得到答案，我为每个答案做了一个选择。我的解决方案效率低下且不可扩展，我想为我的问题找到更好的解决方案。

我也不得不问这个......在这种情况下noSQL会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:51:13.503

你可以尝试一些像：

```
SELECT <there JOIN between user, friends and questions>
  LEFT JOIN 
    (SELECT question_id, body 
      FROM tbl_answers 
      WHERE question_id = tbl_questions.id 
      LIMIT 3
    ) AS Answers3
    ON Answers3.question_id = tbl_questions.id 
```

# php - 哪种CRM最好且维护成本低？

> ID：15529414
> 
> 赞同：0
> 
> 时间：2013-03-20T16:35:26.080
> 
> 标签：php, crm

我正在寻找 CRM 用于通常与成员合作并贡献其他日常任务的组织。

理想情况下，我想知道什么是最好的 CRM，什么最适合构建复杂的项目（当然我的要求在这里很小）

我还想知道.. 为在移动设备上扩展任何 CRM 而采取的任何步骤和措施，因为我也希望它是移动版本.. 我正在将 PHP 技术与 mySQL 一起使用。

您的帮助将不胜感激。

谢谢你的想法，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:52:50.653

这个问题可以有很多解释。但一个起点是了解您的团队或合作伙伴控制的技术。如果您在谈论一个复杂的项目，您必须扩展 CRM 系统的基础。所以技术是关键。如果您对 .net 更有信心，可以选择 CRM Dynamics，如果是 apex，您可以选择 Salesforce，如果是 PHP，可以选择 SugarCRM。

# python - 如何访问不同的 python 模块版本？

> ID：15529417
> 
> 赞同：4
> 
> 时间：2013-03-20T16:35:33.737
> 
> 标签：python, module, version

所以我正在使用共享计算机。它是整个部门计算的主力。我们遇到的问题是控制导入模块的版本。以 Biopython 为例。有些人需要旧版本的 biopython - 1.58。还有其他人对最新的 biopython - 1.61 有要求。我将如何并排安装两个版本的模块，以及如何专门访问特定版本。我问是因为有时这些 api 会更改并破坏其他人的旧脚本（或者他们期望某些不再存在的功能）。

我知道可以在本地（即每个用户）安装该模块，并专门将 python 定向到该模块。还有另一种方法来处理这个吗？还是每个人都必须在使用之前创建一个导出 PYTHONPATH？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:40:48.773

我不确定是否可以更改给定模块的活动安装版本。鉴于我对导入和站点包如何工作的理解，我倾向于不。

您是否考虑过使用`virtualenv`？

使用 virtualenv，您可以创建多个共享环境——一个用于 biopython 1.58 ，另一个用于 1.61 ，另一个用于您需要的任何其他特殊情况。它们不需要被锁定到特定用户，因此虽然它会占用比您想要的更多的空间，但它可能会比拥有自己的 python 环境的每个人占用更少的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:46:18.470

听起来你在做科学计算。您应该使用[Anaconda](https://store.continuum.io/cshop/products)并特别记下该`conda`工具，[记录在此处](http://docs.continuum.io/conda/index.html)。

Conda 尽可能使用硬链接来避免相同文件的副本。它还以比 virtualenv 更好的方式管理非 python 二进制模块（例如，VTK 上的 virtualenv 阻塞）。

# css - 如何在这个扰流板中加入淡入淡出过渡？

> ID：15529425
> 
> 赞同：0
> 
> 时间：2013-03-20T16:36:02.830
> 
> 标签：css, transition

我想在我的剧透中添加一个淡入淡出过渡，使用 CSS。这是代码：

HTML：

```
<button style="position:absolute;left:600px;top:20px" type="button" onclick="if(document.getElementById('spoiler') .style.display=='none') {document.getElementById('spoiler') .style.display=''}else{document.getElementById('spoiler') .style.display='none'}">See the phrases</button>
<link rel='stylesheet' type='text/css' href='style/spoiler.css'/>
<div id="spoiler" style="display:none;position:absolute;left:600px;top:50px"> 
<desc1>&nbsp;My phrases:</desc1>
<desc2><ul><li>First phrase</li>
</ul><ul><li>Second phrase</li></ul>
</des2>
</div> 
```

CSS：

```
 #spoiler
{
    background:#FCFB8B;
    width:280px;
    height:200px;
    -webkit-box-shadow: inset 0 0 3px #1f325d;
    -o-box-shadow: inset 0 0 3px #1f325d;
    -moz-box-shadow: inset 0 0 3px #1f325d;
    -ms-box-shadow: inset 0 0 3px #1f325d;
    box-shadow: inset 0 0 3px #1f325d;
}

#spoiler desc1

{
   font-family:Arial, Helvetica, sans-serif;
   font-size:18px;
   color:#FA4646;
}

#spoiler desc2
{
   font-family:Arial, Helvetica, sans-serif;
   font-size:16px;
   color:#000000;
   position:absolute;
   top:10px;
   left:-15px;
} 
```

好吧，我试图把这段代码放在 ID 剧透中，但它不起作用。谁能帮我？

```
-webkit-transition: all .8s ease-in;
-moz-transition: all .8s ease-in;
-o-transition: all .8s ease-in;
-ms-transition: all .8s ease-in; 
```

我尝试使用悬停并工作，但我需要在按下按钮时自动进行转换。我怎么能做到这一点？提前谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:25:48.247

使用javascript添加一个类到剧透，CSS3动画但了解不使用CSS3的浏览器。

```
#spoiler {
opacity:0;
-webkit-transition: all .8s ease-in;
-moz-transition: all .8s ease-in;
-o-transition: all .8s ease-in;
-ms-transition: all .8s ease-in;
 transition: all .8s ease-in;
}

#spoiler.show {
opacity:1;
} 
```

对于不支持 css3 的浏览器，我使用 Modernizr + jQuery 作为后备。

```
if (!Modernizr.csstransitions) { // if browser doesn't support css3.transitions
  $('#spoiler').animate({ "opacity": '1' }, 800);
} else { // if browser does support css3.transitions
  $('#spoiler').addClass('show');
} 
```

# android - 如何使用 JsonReader 跳过不需要的值？

> ID：15529433
> 
> 赞同：2
> 
> 时间：2013-03-20T16:36:29.880
> 
> 标签：android, jsonreader

我试图用`JsonReader`. 我使用该`skipvalue()`函数转到下一个键，但解析器没有转到下一个键，而是跳转到文件末尾。

该文件如下所示：

```
{
   "data":{
      "current_condition":[
         {
            "cloudcover":"100",
            "humidity":"74",
            "observation_time":"01:28 PM",
            "precipMM":"0.4",
            "pressure":"1005",
            "temp_C":"-3",
            "temp_F":"27",
            "visibility":"6",
            "weatherCode":"326",
            "weatherDesc":[
               {
                  "value":"Light snow"
               }
            ],
            "weatherIconUrl":[
               {
                  "value":"http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0011_light_snow_showers.png"
               }
            ],
            "winddir16Point":"NE",
            "winddirDegree":"50",
            "windspeedKmph":"15",
            "windspeedMiles":"9"
         }
      ],
      "request":[
         {
            "query":"Minsk, Belarus",
            "type":"City"
         }
      ],
      "weather":[
         {
            "date":"2013-03-20",
            "precipMM":"4.4",
            "tempMaxC":"-4",
            "tempMaxF":"25",
            "tempMinC":"-13",
            "tempMinF":"10",
            "weatherCode":"326",
            "weatherDesc":[
               {
                  "value":"Light snow"
               }
            ],
            "weatherIconUrl":[
               {
                  "value":"http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0011_light_snow_showers.png"
               }
            ],
            "winddir16Point":"NE",
            "winddirDegree":"40",
            "winddirection":"NE",
            "windspeedKmph":"17",
            "windspeedMiles":"11"
         },
         {
            "date":"2013-03-21",
            "precipMM":"0.6",
            "tempMaxC":"-5",
            "tempMaxF":"23",
            "tempMinC":"-15",
            "tempMinF":"5",
            "weatherCode":"326",
            "weatherDesc":[
               {
                  "value":"Light snow"
               }
            ],
            "weatherIconUrl":[
               {
                  "value":"http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0011_light_snow_showers.png"
               }
            ],
            "winddir16Point":"NE",
            "winddirDegree":"38",
            "winddirection":"NE",
            "windspeedKmph":"12",
            "windspeedMiles":"7"
         },
         {
            "date":"2013-03-22",
            "precipMM":"0.1",
            "tempMaxC":"-9",
            "tempMaxF":"17",
            "tempMinC":"-19",
            "tempMinF":"-2",
            "weatherCode":"119",
            "weatherDesc":[
               {
                  "value":"Cloudy"
               }
            ],
            "weatherIconUrl":[
               {
                  "value":"http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0003_white_cloud.png"
               }
            ],
            "winddir16Point":"NE",
            "winddirDegree":"51",
            "winddirection":"NE",
            "windspeedKmph":"19",
            "windspeedMiles":"12"
         },
         {
            "date":"2013-03-23",
            "precipMM":"0.0",
            "tempMaxC":"-8",
            "tempMaxF":"18",
            "tempMinC":"-13",
            "tempMinF":"8",
            "weatherCode":"116",
            "weatherDesc":[
               {
                  "value":"Partly Cloudy"
               }
            ],
            "weatherIconUrl":[
               {
                  "value":"http:\/\/www.worldweatheronline.com\/images\/wsymbols01_png_64\/wsymbol_0002_sunny_intervals.png"
               }
            ],
            "winddir16Point":"NNE",
            "winddirDegree":"12",
            "winddirection":"NNE",
            "windspeedKmph":"16",
            "windspeedMiles":"10"
         }
      ]
   }
} 
```

这是我的代码：

```
String json_url = "http://free.worldweatheronline.com/feed/weather.ashx?q="+city+"&format=json&num_of_days="+Integer.toString(days)+"&key=0592d3cc1b151105131103";
JsonReader forecastJsonReader = new JsonReader(new InputStreamReader(getUrlData(json_url)));
forecastJsonReader.beginArray();
while (forecastJsonReader.hasNext()) {
    String name = forecastJsonReader.nextName();
    if (name.equals("date")) {
        Log.d("WEATHER",forecastJsonReader.nextString());
    } else if(name.equals("tempMaxC")) {
        Log.d("WEATHER",forecastJsonReader.nextString());
    } else { 
        forecastJsonReader.skipValue();
    }

}
forecastJsonReader.endObject();
forecastJsonReader.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:00:26.143

我认为这不是首先使用 jsonreader 解析 json 的正确方法，您的 json 以对象而不是数组开头，这是您如何解析 json 的示例

主功能

```
reader.beginObject();

        while (reader.hasNext()) {

            String name = reader.nextName();

            if (name.equals("data")) {
                readData(reader);
            } else {
                reader.skipValue(); // avoid some unhandle events
            }
        }

reader.endObject();
reader.close(); 
```

读取数据功能

```
private void readData(JsonReader reader) throws IOException {
    reader.beginObject();
    while(reader.hasNext()) {
    String name = reader.nextName();
    if(name.equals("weather")) {
    reader.beginArray();
    while (reader.hasNext()) {
            reader.beginObject();
        String objectWeatherName = reader.nextName();
        if (objectWeatherName .equals("date")) {
             Log.d("WEATHER",reader.nextString());
        } else if (objectWeatherName .equals("tempMaxC")) {
             Log.d("WEATHER",reader.nextString());
        } else {
             reader.skipValue();
        }
            reader.endObject();
    }
    reader.endArray();
    } else {
        reader.skipValue();
    }

    }
    reader.endObject();
} 
```

那就是如果您想读取位于数据对象中的天气对象中的日期和 tempMaxC，我希望您理解我的回答，但如果您有任何问题，请随时在评论中提问：)

# c++ - 分数缩短 C++

> ID：15529435
> 
> 赞同：-2
> 
> 时间：2013-03-20T16:36:31.863
> 
> 标签：c++, function, short

我需要缩短分数：4/5 * 3/4 = 12/20，但我需要缩短它，所以答案必须是：3/5。我知道我必须使用这个功能：

```
int NWD(int m1,int m2){
   int d;
   while((m1!=0)&&(m2!=0)){
    if(m1>=m2) m1=m1%m2;
    else m2=m2%m1;
    return d=m1+m2;}
    } 
```

那你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:42:28.317

您需要将分子和分母都除以两个数字的 GCD。

计算 GCD 整数

```
gcdr ( int a, int b )
{
  if ( a==0 ) return b;
  return gcdr ( b%a, a );
} 
```

礼貌：[GCD 代码片段](http://www.math.wustl.edu/~victor/mfmm/compaa/gcd.c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:40:21.813

您可以通过将分子和分母都除以两者的最大公约数来简化这些分数。计算 GCD 的常用方法是[欧几里得算法](http://en.wikipedia.org/wiki/Euclidean_algorithm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:44:41.350

这看起来像是您的函数的正确版本。

```
int NWD(int m1,int m2){
   while((m1!=0)&&(m2!=0)){
    if(m1>=m2) m1=m1%m2;
    else m2=m2%m1;
   }
   return m1+m2;
}

int num = 12;
int den = 20;
int d = NWD(num,den);
cout << num/d << '/' << den/d; 
```

未经测试的代码。

# sharepoint - SharePoint 2010 内容管理器问题

> ID：15529444
> 
> 赞同：0
> 
> 时间：2013-03-20T16:37:00.880
> 
> 标签：sharepoint

我有一个文档中心和一个自定义内容类型。我可以创建组织者规则并适当地路由文档。

但是，我遇到的问题似乎与自动文件夹创建有关。创建规则时，我只为文件夹名称指定“%2”。我使用的专栏是一个月。我已经尝试了这两种方法，将值作为数字或文本，但我遇到了同样的问题。该文件夹被创建为'float; 2.00000000'或'字符串；12' 而不仅仅是 2 或 12。

任何人都可以提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:36:58.800

你不应该用数字创建文件夹。请使用不会产生此问题的任何前缀。我也遇到过这个问题，这是我找到的最好的解决方案。

# javascript - 使用 JS 的简单加法

> ID：15529446
> 
> 赞同：-3
> 
> 时间：2013-03-20T16:37:02.620
> 
> 标签：javascript, function, variables

我有这段代码：

```
<head>
<script>
    function myFunction()
    {
        var counter = 1;
        document.getElementById("demo").innerHTML=counter;
    }
</script>
</head>
<html>
<body>
<button onclick="myFunction()">Count</button>
<p id="demo"></p>
</body> 
```

每次按下带有“myFunction”按钮的按钮时，我都希望“计数器”变量加 1。

我已经尝试了几个没用的东西，但现在代码打印出“1”，无论按钮明显按下多少次。如果按下按钮，我怎样才能使它加 1？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:38:34.650

您需要`var counter`在函数之外设置：

```
var counter = 0;
function myFunction() {
    counter++;
    document.getElementById('demo').innerHTML = counter;
} 
```

基本上，您的函数所做的是每次将 counter 的值设置为 1，而不是像您希望的那样递增它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:40:56.840

您的问题是每次调用函数时都会重新定义计数器。尝试

var counter = 1;
函数 myFunction()
{
计数器=计数器+1;
document.getElementById("demo").innerHTML=counter;
而

不是你当前的 javascript 代码

# vba - 运行时问题 3012 访问

> ID：15529449
> 
> 赞同：1
> 
> 时间：2013-03-20T16:37:10.830
> 
> 标签：vba, ms-access, error-handling

```
Dim db As DAO.Database
Set db = CurrentDb()
Dim qd As DAO.QueryDef
Dim sqlQry As String

sqlQry = "SELECT x,y,z " & _
"INTO MyTable2 " & _
"FROM mytable1 " & _
"WHERE ((Condition1) And (Condition2)) "

Set qd = db.CreateQueryDef("MyQueryName", sqlQry) 
DoCmd.OpenQuery (qd.Name)
Set qd = Nothing
Set db = Nothing
End Sub 
```

您好我只是想在 Access VBA 中运行查询并不断收到运行时错误“3012”对象 MyQueryName 已存在于行：

`Set qd = db.CreateQueryDef("MyQueryName", sqlQry)`

现在我没有：

```
Set qd = Nothing 
```

并认为这是问题所在。但是在添加它之后我仍然得到了错误然后我记得因为我在 qd 对象上出现了错误它可能还没有清除所以运行它并注释掉这两行所以它绕过并直接进入对象重置：

```
Set qd = db.CreateQueryDef("MyQueryName", sqlQry) 
DoCmd.OpenQuery (qd.Name) 
```

但之后它仍然给我这个错误。难倒困惑等！

你们有什么想法吗？

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:45:29.243

当查询已存在时，您无法创建查询。您可以删除查询，首先检查它是否存在，或者您可以更新 sql

```
db.QueryDefs("MyQueryName").SQL= sqlQry 
```

所以：

```
If DLookup("Name", "MSysObjects", "Name= 'MyQueryName'") <> "" Then
    Set qdf = CurrentDb.QueryDefs("MyQueryName")
    qdf.SQL = sqlQry
Else
    Set qdf = CurrentDb.CreateQueryDef("MyQueryName", sqlQry)
End If 
```

# ruby - 捆绑安装期间 Octopress 安装停止

> ID：15529451
> 
> 赞同：1
> 
> 时间：2013-03-20T16:37:13.637
> 
> 标签：ruby, bundler, octopress

我按照[Octopress 安装](http://octopress.org/docs/setup/)的说明进行操作。但它在之后停止：

```
bundle install
Fetching gem metadata from http ://rubygems.org/
Fetching source index from http ://rubygems.org/ 
```

之后就不再继续了。

很长一段时间后，它显示错误消息：

```
Network error while fetching http ://rubygems.org/quick/Marshal.4.8/active_data-0.1.0.gemspec.rz 
```

我怎样才能克服这个问题？

反正，

```
bundle install --local 
```

不起作用。它会显示错误信息：

```
Could not find rake-0.9.2.2 in any of the sources 
```

而且我不支持任何 http 代理。如果这是由网络连接问题引起的，我该如何离线安装捆绑包？

* * *

谢谢，问题解决了。我将 Gemfile 从 http 更改为 https，它终于可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:49:42.520

就像 Jorge 和 HungryCoder 建议的那样，这背后的原因一定是 Gemfile 之间`http`和`://rubygems.org`内部的空间，因此您的打包程序无法解析地址以获取这些 gem。

只需转到主 Octopress 目录中的 Gemfile 并编辑源代码行（第一行）

`source 'https://rubygems.org'`

再试一次。

您的 Gemfile 看起来像[这样](https://github.com/imathis/octopress/blob/master/Gemfile)：

```
source "http://rubygems.org"

group :development do
  gem 'rake', '~> 0.9'
  gem 'rack', '~> 1.4.1'
  gem 'jekyll', '~> 0.12'
  gem 'rdiscount', '~> 1.6.8'
  gem 'pygments.rb', '~> 0.3.4'
  gem 'RedCloth', '~> 4.2.9'
  gem 'haml', '~> 3.1.7'
  gem 'compass', '~> 0.12.2'
  gem 'sass-globbing', '~> 1.0.0'
  gem 'rubypants', '~> 0.2.0'
  gem 'rb-fsevent', '~> 0.9'
  gem 'stringex', '~> 1.4.0'
  gem 'liquid', '~> 2.3.0'
end

gem 'sinatra', '~> 1.3.5' 
```

[您可以在此处](http://gembundler.com/v1.3/gemfile.html)阅读有关使用 Gemfile的更多信息。

# class - 问题引用了 WebEngine

> ID：15529452
> 
> 赞同：0
> 
> 时间：2013-03-20T16:37:20.173
> 
> 标签：class, reference, javafx-2, javafx

我正在尝试参考 WebEngine

```
public class ClientArea implements Initializable {

public WebEngine engine;

    @Override
    public void initialize(URL url, ResourceBundle rb) {

        engine = browser.getEngine();
        engine.load("about:blank");
    }
} 
```

对于同一文件中的类 (ClientArea.java)

```
private static class SearchBox extends Region {

        private WebEngine engine; // private or public

        private TextField insertU;
        private Button refreshButton;
        private Button stopButton;
        private Button backButton;
        private Button forwardButton;
        public Button voltarButton;

        public SearchBox() {
        }
} 
```

但这不起作用，那会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:50:14.963

可能我不明白你的问题。您想从嵌套类 ( ) 访问顶级类 ( `SearchBox`) 的字段 ( )。`engine``ClientArea`

如果嵌套类**不是** `static`很容易。在这种情况下，内部类保持`ClientArea.this`对外部类的引用 ()，并且可以访问其字段和方法。

```
public class ClientArea implements Initializable {
    public WebEngine engine;

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        engine = browser.getEngine();
        engine.load("about:blank");
    }

    private class SearchBox extends Region {
        public SearchBox() {
            System.err.println(engine);
        }

        private ClientArea getClientArea() {
            return ClientArea.this;
        }

        private WebEngine getWebEngine() {
            return engine;
        }
     }
} 
```

看看这个关于静态嵌套类和内部类之间区别的[答案。](https://stackoverflow.com/a/70358/1594933)

[关于嵌套类的 java 教程。](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

# ember.js - 使用 Ember.js 将嵌套路由直接渲染到主应用程序出口的正确方法是什么？

> ID：15529456
> 
> 赞同：0
> 
> 时间：2013-03-20T16:37:38.010
> 
> 标签：ember.js

我有一个包含嵌套资源的应用程序，我不希望嵌套模板出口层次结构：我希望将某些级别直接呈现到应用程序模板中的主 {{ outlet }} 中。我的解决方案是：

`renderTemplate: function() { this.render({into: 'application'}) }`

在我想渲染到主应用程序出口的路线上。这有效，除非您尝试直接导航到其他有效的父资源；它出现空白。我有一种感觉，我只是做错了，但我不确定这样做的正确方法。

这里的 JS fiddle 显示了我的意思，尝试深入到最底层，然后单击以向上导航（您将获得一个空白页面）[http://jsfiddle.net/Unwyp/5/](http://jsfiddle.net/Unwyp/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:53:15.280

根据关于重复的评论，我通过使用相应的控制器制作`ninjas`模板来稍微修改小提琴。`ninjas/index`这个小提琴作品[http://jsfiddle.net/qEa5H/](http://jsfiddle.net/qEa5H/)

# java - Java Socket连接和突然断开

> ID：15529462
> 
> 赞同：1
> 
> 时间：2013-03-20T16:37:49.540
> 
> 标签：java, sockets, network-programming, disconnect

我有一个 Java 应用程序需要连接到 IP 10.2.200.12 端口 3002。在这个应用程序中，我向这个主机发送一些数据并接收它的答案，然后我关闭连接。问题是我连接到这个地址，但在我的连接下降几秒钟后。我尝试使用 Hercules 进行连接，并在日志中出现此消息

连接到 10.2.200.12... 连接到 10.2.200.12 几秒钟后... 连接已关闭

在我的应用程序（客户端）中，我使用此连接

```
String ip="10.2.200.12"
int port=3002
Socket s=new Socket(ip,port) 
```

一些想法？？我需要建立连接，以便我可以发送和接收数据...谢谢

# java - Java - Deque 手册 - 删除最后一个

> ID：15529469
> 
> 赞同：1
> 
> 时间：2013-03-20T16:38:10.797
> 
> 标签：java, deque

我有一些作业要在 java 中实现双端队列系统。我创建了其他方法，它们通过了我的测试。但是，我在删除最后一个时遇到了问题。到目前为止我有这个；

```
//remove the element at the back of the deque
public int removeBack()
{
    int size = a.size();
    size--;

    if( size > 0 )
    {
        int last = a.get(size);
        last--;
        a.remove(last);
    }

    size = a.size();

    return size;
} 
```

这是它失败的 JQuery 测试。

```
 Deque d = new Deque(1);
    d.insertBack(1);
    assertEquals(1, d.length());
    int b = d.removeBack();
    assertEquals(0, b);
    // java.lang.AssertionError: expected:<1> but was:<0> 
```

有人有想法么？我真的看不出我在哪里出错了。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:44:38.690

你的代码是一团糟。

```
d.insertBack(1);   <---- you add one element.
assertEquals(0, d.length()); <--- length is expected to be 1
int b = d.removeBack();  <---- you remove one element, and return the new length (!)
assertEquals(1, b); <----- b = length after removing = 0 
```

你可能打算做什么：

```
public int removeBack() {
    return a.remove(a.size() - 1); // Remove and return last element.
} 
```

（注：标准是返回最后一个元素，不是列表大小，需要`size()`时可以通过查询。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:40:50.827

以下看起来很可疑：

```
 int last = a.get(size);
    last--;
    a.remove(last); 
```

无论您期望[`ArrayList.remove(int)`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#remove%28int%29)采用索引还是值（它采用索引），我都看不出这如何工作。

# javascript - 如何将鼠标悬停在 Javascript 中的矩形上？

> ID：15529470
> 
> 赞同：4
> 
> 时间：2013-03-20T16:38:13.267
> 
> 标签：javascript, backbone.js, kineticjs, backbone-events

我在屏幕上创建了一个矩形，当鼠标悬停在矩形上时，我希望一些按钮出现在矩形上。但我无法处理这项工作。我的代码如下。我不明白为什么

```
this.$('.control').removeClass('hide'); 
```

这一行不工作。它也没有给出任何错误。

> $(this.rect).html(........css({ position: 'absolute', padding: '10px' });

我也无法理解这部分代码。（堆栈不允许 div。我不知道为什么）。

```
var KineticModel = Backbone.Model.extend({
    myRect: null,

    createRect : function() {
            alert("rectangle created.");
            var rect=new Kinetic.Rect({
                            x: 50,
                            y: 50,
                            width: 150,
                            height: 150,
                            fill: 'green',
                            stroke: 'black',
                            strokeWidth: 1,
                            offset: [0, 0],
                            draggable: true,
                      });
            rect.on("mouseover",function(){
                alert("Hoover : ");
                $('.control').removeClass('hide');
            });
            rect.on("mouseout",function(){
                alert("Out : ");
            });
            rect.on("mousedown",function(){
                alert("Down : ");
            });
            rect.on("mouseup",function(){
                alert("Up : ");
            });
            return rect;
        }
});

var KineticView = Backbone.View.extend({
        tagName: 'span',
        stage: null,
        layer: null,

        initialize: function (options) {
            model: options.model;
            el: options.el;
            this.layer = new Kinetic.Layer();
            this.stage = new Kinetic.Stage({ container: this.el, width: 1000, height: 500 });
            this.stage.add(this.layer);
        },
        events: {
            'click': 'spanClicked'
        },
        render: function () {
            var rect = this.model.createRect();
            $(this.rect).html('<div class="shape"/>'
             + '<div class="control delete hide"/>'
             + '<div class="control change-color hide"/>'
             + '<div class="control resize hide"/>'
             + '<div class="control rotate hide"/>').css({ position: 'absolute', padding: '10px' });
            this.layer.add(rect);
            this.stage.add(this.layer);
            alert("render");
            return this;
        },
        spanClicked: function () {

        }
});

var kModel = new KineticModel({});
var kView = new KineticView({ el: '#container', model: kModel });

$('#shapetest').click(function() {
    kView.render();
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T16:42:54.480

更改`this.$('.control').removeClass('hide');`为：

```
$('.control').removeClass('hide'); 
```

等等 ...

# c# - 以 Foreach C# 预期的格式保存 XML 时遇到问题

> ID：15529478
> 
> 赞同：-1
> 
> 时间：2013-03-20T16:38:52.167
> 
> 标签：c#, foreach, console-application

我在以我正在寻找的格式保存 XML 文件时遇到问题也许有人可以帮助我这里是我的代码

```
string testInput= @"<!LinkName>MyChildData<#";
var testRegex = new Regex(@"(?<name>(?<=<!).*?(?=>))|(?<namex>(?<=>).*?(?=<#))",
                          RegexOptions.Multiline | RegexOptions.Singleline);

foreach (Match myMatch in testRegex.Matches(testInput))
{                     
    xml.NewChild2(myMatch.Groups["name"].Value, myMatch.Groups["namex"].Value);
}
xml.SaveXml("simple.xml"); 
```

我期待的结果是

```
<rootNode>
    <LinkName>MyChildData</LinkName>
</rootNode> 
```

但我得到的结果是

```
<rootNode>
    <LinkName/> 
    <nothing>MyChildData</nothing>
</rootNode> 
```

任何建议将不胜感激谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:45:17.683

您正在将节点添加到 xml，而不是`<LinkName>`. 抬头`AddChild()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:51:15.907

问题在于正则表达式，当我运行当前字符串时，我得到两个不同的匹配集。一种名称为 LinkName，但 namex 为空，另一种名称为空，但 namex 正确。

尝试使用此正则表达式：

```
(?<name>(?<=<!).*?)>(?<namex>.*?(?=<#)) 
```

请注意如何不使用选项，`|`字符，而是将两者链接在一起，忽略`>`字符。这样就保证了结构必须是`name>value`.

如果你不能保证这种结构，那么你需要重新考虑整个过程。

# css - 当包装器 div 悬停时更改链接颜色

> ID：15529481
> 
> 赞同：-1
> 
> 时间：2013-03-20T16:39:01.217
> 
> 标签：css

希望给我的网站带来与 YouTube 相同的效果。我可以在包装 div 的悬停中做些什么来获得预期的效果？我知道我可以用 javascript 做到这一点，但有兴趣知道是否有 css 解决方案。

```
#getImageDetails{font-size:13px;}
#getImageDetails a{color:#666;}
#getImageDetails:hover{} 
```

**编辑**

这最终给了我我所需要的！谢谢

```
#getImageDetails:hover a{color:#113e87;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:41:21.863

```
#getImageDetails:hover a {
color: ...;
} 
```

它应该工作。

# actionscript-3 - as3 Air - AddChild 有效，但运行缓慢

> ID：15529482
> 
> 赞同：1
> 
> 时间：2013-03-20T16:39:03.360
> 
> 标签：actionscript-3, flash, air, flash-cs6

我正在创建一个应用程序，当按下按钮时，会将一张非常大的图片添加到舞台上（它比屏幕大，但可以由用户拖动）

当按下按钮时，图片（好吧，movieClip）确实出现并且可以很好地拖动，其中的按钮可以工作。

但问题是在按钮按下和图像出现之间有大约 6 秒的暂停。我正在使用一个 .fla 文件进行发布和编译（我们暂时称它为 Main.fla），另一个用于保存所有图形。然后使用此嵌入命令添加图形：

```
[Embed (source = "assets/graphic.swf", symbol = "Content")]
private var Content:Class; 
private var _content:*; 
```

我在这些行中声明了所有变量（在类定义和构造函数之间）我的印象是像这样嵌入它相当于在编译时加载它。这是真的？按下按钮时可能导致这种延迟的原因是什么？

如果我不能消除延迟，我的另一个想法是制作一些旋转的圆圈或*其他东西*来告诉用户，“嘿，别担心。它正在加载！”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:40:05.330

如果在 addChild 时速度较慢，您可以更早地将资产添加到舞台并将其可见性设置为 false，然后在单击按钮时将其设置回 true。显然这是一个小技巧，但对于您正在做的事情可能已经足够了。

```
var asset:MovieClip;

private function init():void
{
    asset = new Content();
    assset.visible = false;
    addChild(asset);

    button.addEventListener(MouseEvent.CLICK, onMouseClick);
}

private function onMouseClick(e:MouseEvent):void
{
   asset.visible = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T23:28:43.157

嵌入您的 SWF 可能不是导致延迟的原因。或者如果您将 SWF 导入 FLA 可能不会更好。这是在设备上吗？您可能必须设计一种不同的加载资源的方式，或者对加载动画感到满意。

如果主要的 K 尺寸来自大图像，您可以考虑分段加载它，从最初可见的部分开始。

# ruby-on-rails - rspec 用于测试 json 结果

> ID：15529483
> 
> 赞同：0
> 
> 时间：2013-03-20T16:39:03.967
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rspec

所以我基本上是在尝试编写 rspec 来测试我的 json 结果：

```
 patient_allergies = patient.patient_allergies
  expect(response_body['allergies'].size).to eq(patient_allergies.size)

  patient_allergies.each_with_index do |allergy, index|
    expect(response_body['allergies'][index]['name']).to eq(allergy.name)
    allergy.patient_allergy_reactions.each_with_index do |reaction, index|
      expect(response_body['reactions'][index]['name']).to eq(reaction.name)
    end
  end 
```

我上面的表格是 patient_allergies 和 patient_allergy_reactions。

上述测试工作正常。但问题是我正在按索引进行比较。

如果 json 的顺序发生变化，测试将失败。有没有更好的方法来为此编写测试？我的 json 看起来像这样：

```
"allergies": [
{
"name": "Allergy1",
"reactions": [
]
},
{
"name": "Allergy2",
"reactions": [
{
"name": "Reaction1",
"severity": "Medium"
}
]
}
], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:02:02.337

在这里使用`detect`和[`include`](https://www.relishapp.com/rspec/rspec-expectations/v/2-0/docs/matchers/include-matcher)匹配器来帮助你：

```
patient_allergies = patient.patient_allergies
response_allergies = response['allergies'] || []

expect(response_allergies.size).to eq(patient_allergies.size)
patient_allergies.each |allergy| do
  response_allergy = response_allergies.detect{|a| a['name'] == allergy.name}
  expect(response_allergy).to_not be_nil
  patient_reactions = allergy.patient_allergy_reactions
  response_reactions = (response_allergy['reactions'] || []).map{|r| r['name']}
  expect(response_reactions.size).to eq(patient_reactions.size)
  expect(response_reactions).to include(*patient_reactions.map(&:name))
end 
```

# richfaces - 丰富：由于缓存，IE8 中的日历扩展失败

> ID：15529485
> 
> 赞同：0
> 
> 时间：2013-03-20T16:39:09.227
> 
> 标签：richfaces

我在 IE8 中遇到了 Rich:calendar 的奇怪问题。当我单击日历而不清除浏览器缓存时，我收到 javascript 异常：

```
Message: 'elements' is null or not an object 
```

浏览器指向**3_3_2.SR1org.ajax4jsf.javascript.PrototypeScript**文件中的以下函数：

```
bindAsEventListener: function () {
    var __method = this, args = $A(arguments), object = args.shift();
    return function (event) {
        return __method.apply(object, [event || window.event].concat(args));
    } 
```

最有趣的是，当我清除浏览器缓存并重新加载页面时，日历工作！

Richfaces PS版本为3.3.2.SR1，我无权升级

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:02:41.350

经过一番调查，问题似乎是由 PIE.js 和 Richfaces 日历组件冲突引起的。这不是第一次（我也遇到了 Rich:panel 上的圆角按钮问题）。无论如何，如果你会遇到类似的事情 - 小心:)

# jsp - 从 JavaServerPages 中删除所有注释

> ID：15529486
> 
> 赞同：1
> 
> 时间：2013-03-20T16:39:09.110
> 
> 标签：jsp, comments

我对以编程方式从 JSP 中删除所有注释感兴趣。

理想情况下，我可以访问一个接受 JSP 文件作为输入的 CLI 工具，它会输出带有所有注释的源代码。它应该能够删除所有 Java 和 HTML 注释。

作为系统升级的一部分，我需要这个来规范化源代码的三向比较代码，这些源代码是从开箱即用的供应商代码中定制的。

# ios - 验证 ManagedObject

> ID：15529487
> 
> 赞同：0
> 
> 时间：2013-03-20T16:39:09.460
> 
> 标签：ios, validation, core-data, unique, nsmanagedobject

我有一个`SearchStringTooltip`ManagedObject。带属性`@dynamic tooltipText;`（NSString）

我需要在数据库中动态添加新的工具提示，但我只需要唯一值（不敏感）。

他们一次可以进来100多个；每次我检查唯一的..

看起来像：

```
 if (newTooltips.count == 0)
        return;

    NSEntityDescription *entity = [NSEntityDescription
                                   entityForName:@"SearchStringTooltip"
                                   inManagedObjectContext:self.moc];
    NSFetchRequest *request = [NSFetchRequest new];
    [request setEntity:entity];

       for (NSString *name in newTooltips) {

        [request setPredicate:[NSPredicate predicateWithFormat:@"tooltipText = %@", name]]; //like = (=) + time *2(sometimes *3) ofcourse i know i need like.. Its insensitive

        NSInteger count = [self.moc countForFetchRequest:request error:nil]; //But its is very expensive operation expensive
        if (count > 0) {
            continue;
        }

        DBSearchStringTooltip *tooltip = [NSEntityDescription insertNewObjectForEntityForName:@"SearchStringTooltip"
                                                                       inManagedObjectContext:self.moc];
        tooltip.tooltipText = name;
    } 
```

我怎样才能更便宜地为内存做呢？可以有超过 10 000 个用于检查唯一性的工具提示......而且我必须全部检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:40:31.970

您可以尝试通过`NSDictionaryResultType`获取请求的结果类型和 setReturnsDistinctResults:YES 仅获取不同的 tooltipText。然后在内存中搜索结果。这可能比 10k 获取快得多，因为 fetch 总是命中磁盘。[您可以在这里](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/CoreDataSnippets/Articles/fetchExpressions.html)找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:23:59.340

快速回答，我相信效率更高。使用此代码段而不是您的循环：

```
[request setPredicate:[NSPredicate predicateWithFormat:@"tooltipText IN %@", newTooltips]]; 
[request setResultType:NSDictionaryResultType];
[request setPropertiesToFetch:@[@"tooltipText"]];

NSArray* result = [self.moc executeFetchRequest:request error:nil]; 
NSArray* existingTooltipNames = [result valueForKey:@"tooltipText"]; 

NSMutableOrderedSet* itemsToAdd = [NSMutableOrderedSet orderedSetWithArray:newTooltips];
[itemsToAdd minusSet:[NSSet setWithArray:existingTooltipNames]];
for (NSString *name in itemsToAdd) {
    DBSearchStringTooltip *tooltip = [NSEntityDescription insertNewObjectForEntityForName:@"SearchStringTooltip" inManagedObjectContext:self.moc];
    tooltip.tooltipText = name;
} 
```

# symfony - php模板中自定义验证器的翻译

> ID：15529488
> 
> 赞同：1
> 
> 时间：2013-03-20T16:39:09.953
> 
> 标签：symfony, translation

我确实为我构建了一个自定义约束验证器。验证器正在工作。但是如何在 php 模板中翻译 CUSTOM 验证器的错误消息？其他验证器消息正在工作，所以我确实有`app/config/validators.XX.yml`.

在我的行动中：

```
$form = $this->createFormBuilder()
             ->add('date_id', 'choice', array(
                ....
                'constraints' => array(new CheckChoicesDateId(array('date_ids' => $date_ids))),
                ....
            )) 
```

在捆绑/验证器/约束中

```
class CheckChoicesDateId extends Constraint
{
    public $invalidMessage = '{{ value }}';
    public $date_ids;
    public function __construct($options = null)
    {
        parent::__construct($options);

        if (null === $this->date_ids ) {
            throw new MissingOptionsException('Option date_ids must be given for constraint ' . __CLASS__, array('date_ids'));
        }
    }
} 
```

在捆绑/验证器/约束中

```
class CheckChoicesDateIdValidator extends ConstraintValidator {

    public function validate($value, Constraint $constraint) {

        if ($value == NULL || !isset($value)) {
            $this->context->addViolation($constraint->invalidMessage, array(
                '{{ value }}' => 'error.date.0',
                //I also tried $this->get('translator')->trans('error.date.0');
                // with the error message: Call to undefined method GET
            ));
        }

        if (is_numeric($value)) {
            $t = array_key_exists($value, $constraint->date_ids);
            if ($t == NULL) {
                $this->context->addViolation($constraint->invalidMessage, array(
                    '{{ value }}' => 'error.date.1',
                ));
            }
        }
        return;
    }

} 
```

在我的模板中：

```
<?php echo $view['form']->errors($form['date_id']) ?>
//I also tried
<?php echo $this->get('translator')->trans($view['form']->errors($form['date_id'])) ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:56:07.297

我确实有一个解决方案，但我想这不是很好：

在操作中，我确实为每个可能的错误传递了一个变量。

```
'constraints' => array(new CheckChoicesDateId(array('date_ids' => $date_ids, 'error_date_0 => $this->get('translator')...., 'error_date_1 => $this->get('translator')....  ))), 
```

在自定义验证器中，我为每个错误调用正确的变量`$constraint->error_date_X`。

不好，但它正在工作。如果有人有更好的解决方案，请随时发布！

# java - java枚举上的自定义字段没有被序列化

> ID：15529490
> 
> 赞同：7
> 
> 时间：2013-03-20T16:39:12.087
> 
> 标签：java, serialization, enums, custom-fields

我有一个 Java 枚举，如下所示：

```
public enum ExecutionMode {
  TYPE_A,
  TYPE_B,
  TYPE_C;

  private ExecutionMode(){} //no args constr- no really required

  private boolean incremental; //has get/set
  private String someStr;      //has get/set
} 
```

我看到反序列化后，枚举上的自定义字段丢失了。在阅读更多关于它的信息时，我得到的印象是枚举被反序列化为一个字符串，因此它的自定义字段被忽略了。

如果它是真的，我是否在这里滥用 Enum 并且应该只使用 POJO 代替？或者有没有办法序列化自定义字段（不是构造函数的一部分）？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T16:48:32.707

如果值是恒定的，那就更好了，你不需要序列化任何东西

```
public enum ExecutionMode {
  TYPE_A(x,t),
  TYPE_B(y,z),
  TYPE_C(b,s)

  private boolean incremental; //has get/set
  private String someStr;      //has get/set

  ExecutionMode(boolean incremental,String someStr){
        ///... set things appropriately
  } 
} 
```

如果您在运行时设置这些值，我的倾向是这首先不应该是一个枚举 - 应该有一个单独的 POJO，它可能包含这些值以及对枚举值的引用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T16:50:39.340

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9)：

> Enum 中的最终 clone 方法确保永远不会克隆 enum 常量，并且**序列化机制的特殊处理确保永远不会由于反序列化而创建重复的实例**。禁止枚举类型的反射实例化。这四件事一起确保枚举类型的实例不存在超出枚举常量定义的实例。

您所要求的将创建多个实例，例如 TYPE_A。这会破坏枚举。枚举应该是不可变的。

# ios - NSTimer 不调用方法

> ID：15529491
> 
> 赞同：10
> 
> 时间：2013-03-20T16:39:13.483
> 
> 标签：ios, objective-c, swift, nstimer

我有一个 NSTimer 应该每秒调用一个方法，但它似乎根本没有调用它。

这就是我声明计时器的方式：

```
[NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(fadeManager:) userInfo:nil repeats:YES]; 
```

这是它调用的方法：

```
-(void) fadeManager: (NSTimer*) timer{
    NSLog(@"IT'S WORKING!");
    self.playHead += .1; // keeps track of where they are in full track
    if (self.playHead >= self.wait  && ![player isPlaying]) { // checks if wait is over
        [player play];
    }
    if (self.playHead >= self.duration + self.startTime && [player isPlaying]) { // checks if full duration is over
        [player pause];
        [self reset];
    }
    int fadeOutArea = self.startTime + self.duration - self.fadeOut;
    int fadeInArea = self.startTime + self.fadeIn;
    if (self.playHead <= fadeInArea && [player volume] < relativeVolume) { // checks if fadingIn.
        [self fadeInIncriment];
    }
    if (self.playHead >= fadeOutArea  && [player volume] > 0) {
        [self fadeOutIncriment];
    }
} 
```

代码不起作用，所以我把 NSLog 和一个断点都放进去了。似乎它永远不会被调用。为什么是这样？我在 .m 文件中声明该方法是否重要：

```
#import <AVFoundation/AVFoundation.h>
@interface CueMusic ()

- (void) delayFadeOut: (AVAudioPlayer*) dFade;
- (void) fadeInIncriment;
- (void) fadeOutIncriment;
- (void) fadeManager: (NSTimer*) timer; // <--------
- (void) start;

@end

@implementation CueMusic
 ....... 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-20T16:41:45.623

要么使用

```
NSTimer *timer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(fadeManager:) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode]; 
```

或者

```
//schedules the timer
[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(fadeManager:) userInfo:nil repeats:YES]; 
```

### 来自文档[在运行循环中调度计时器](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/#//apple_ref/doc/uid/20000319-SW1)

> *   使用[`scheduledTimerWithTimeInterval:invocation:repeats:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/#//apple_ref/occ/clm/NSTimer/scheduledTimerWithTimeInterval:invocation:repeats:)or[`scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/#//apple_ref/occ/clm/NSTimer/scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:)类方法创建计时器并在默认模式下将其安排在当前运行循环中。
>     
>     
> *   使用[`timerWithTimeInterval:invocation:repeats:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/#//apple_ref/occ/clm/NSTimer/timerWithTimeInterval:invocation:repeats:)or[`timerWithTimeInterval:target:selector:userInfo:repeats:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/#//apple_ref/occ/clm/NSTimer/timerWithTimeInterval:target:selector:userInfo:repeats:)类方法创建计时器对象，而不将其安排在运行循环中。（创建完成后，你必须通过调用相应 NSRunLoop 对象的 addTimer:forMode: 方法手动将定时器添加到运行循环中。）

* * *

### SWIFT代码

任何一个

```
let timer: NSTimer = NSTimer(timeInterval: 1.0, target: self, selector: "fadeManager:", userInfo: nil, repeats: true)
NSRunLoop.mainRunLoop().addTimer(timer, forMode: NSDefaultRunLoopMode) 
```

或者

```
//schedules the timer
NSTimer.scheduledTimerWithTimeInterval(1.0, target: self, selector: "fadeManager:", userInfo: nil, repeats: true) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T16:44:36.483

您的问题是，使用时`timerWithTimeInterval:target:selector:userInfo:repeats:`，生成的计时器不会自动添加到运行循环中。我建议`scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:`改用它，它会为您执行此步骤。

如果您更喜欢使用，`timerWithTimeInterval:target:selector:userInfo:repeats:`则需要手动将计时器添加到当前运行循环中。为此，请调用`NSRunLoop`的`addTimer:forMode:`方法。[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html)

```
[[NSRunLoop currentRunLoop] addTimer:tTimer forMode: NSDefaultRunLoopMode]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T16:44:27.370

您需要触发计时器。

您可以通过将其添加到线程来做到这一点：

```
NSTimer *timer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(fadeManager:) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode]; 
```

或打电话

```
[timer fire]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T16:44:35.610

您可以使用：

```
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode]; 
```

# ios - 将值传递给 IBAction

> ID：15529492
> 
> 赞同：0
> 
> 时间：2013-03-20T16:39:16.287
> 
> 标签：ios, uitapgesturerecognizer

我会很快。我有 6 张图片，附有 6 个手势和一个 IBAction。我希望每个手势都将参数传递给动作，所以我不必编写 6 个单独的动作。这是我的代码：

```
 oneImage =[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"one.gif"]];
    two Image=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"two.gif"]];
    +4 more images

     UITapGestureRecognizer *oneGest=[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(insertChar:)];
         UITapGestureRecognizer *twoGest=[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(insertChar:)];
    +4 more gestures

    -(IBAction)insertChar:(id)sender
    {

    textfield.text = [textfield.text stringByAppendingString:@" PASS HERE VALUE FROM GESTURE,"ONE","TWO",etc "];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:48:23.477

无法将任意数据传递给该`insertChar:`方法。将`sender`是手势识别器。这是一种可能的解决方案：

```
oneImage =[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"one.gif"]];
oneImage.tag = 1;
twoImage=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"two.gif"]];
twoImage.tag = 2;
// +4 more images

UITapGestureRecognizer *oneGest=[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(insertChar:)];
UITapGestureRecognizer *twoGest=[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(insertChar:)];
// +4 more gestures

-(IBAction)insertChar:(UITapGestureRecognizer *)sender {
    static NSString *labels[6] = { @"ONE", @"TWO", ... @"SIX" };
    UIView *view = sender.view;
    NSInteger tag = view.tag;
    NSString *label = labels[tag - 1]; // since tag is 1-based.

    textfield.text = [textfield.text stringByAppendingString:label];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:48:13.507

您需要以某种方式将您作为参数获得的“发送者”值`-(IBAction)insertChar:(id)sender`与`UIImageView`您创建的 s 联系起来。

操作方法将如下所示：

```
-(IBAction)insertChar:(id)sender
{

 UIGestureRecognizer *gestureRecognizer = (UIGestureRecognizer*)sender;
 UIView *view = gestureRecognizer.view;
//do whatever you want with the view that has the gestureRecgonizer's event on

} 
```

然后，您可以以不同的方式链接您的视图。一种方法是使用标签属性。

# apache-flex - 将自定义菜单项添加到数据网格

> ID：15529494
> 
> 赞同：0
> 
> 时间：2013-03-20T16:39:28.407
> 
> 标签：apache-flex, flex4

我有一个自定义 DataGrid，我想向其中添加一个自定义菜单：

```
public function MyCustomDataGrid() {
    super();
    init();
}

private function init():void {
    var _copyElementMenuItem:ContextMenuItem = new ContextMenuItem("Copier Donnée");
    _copyElementMenuItem.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT, handleCopyData);

    this.contextMenu = new ContextMenu();
    contextMenu.hideBuiltInItems();
    contextMenu.customItems = [ _copyElementMenuItem ];
} 
```

问题是我的自定义菜单项从未显示，我总是以标准的 Flash 上下文菜单结束：

![在此处输入图像描述](../Images/b53334dc7a8f3f562990eb2761b334fb.png)

我错过了什么？我该如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:37:37.583

它对我有用。看看我的代码。

![在此处输入图像描述](../Images/fe02f7d93dee296de84663859c83fb2a.png)

//应用

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600" xmlns:custommenu="com.custommenu.*">
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;

        [Bindable]private var collection:ArrayCollection = new ArrayCollection([
            {field01:"field01", field02:"field02"},
            {field01:"field01", field02:"field02"}
        ]);

    ]]>
</fx:Script>
<s:VGroup x="20" y="20">
    <custommenu:MyCustomDataGrid 
        dataProvider="{collection}" 
        width="200" height="100">
        <custommenu:columns>
            <s:ArrayList>   
                <s:GridColumn dataField="field01" headerText="Field 1"/>
                <s:GridColumn dataField="field02" headerText="Field 2"/>
            </s:ArrayList>                  
        </custommenu:columns>         
    </custommenu:MyCustomDataGrid>
</s:VGroup>
</s:Application> 
```

//MyCustomDataGrid

```
<?xml version="1.0" encoding="utf-8"?>
<s:DataGrid xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        xmlns:mx="library://ns.adobe.com/flex/mx" width="400" height="300" 
        creationComplete="init()">
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;

        protected function init():void
        {
            var _copyElementMenuItem:ContextMenuItem = new ContextMenuItem("Copier Donnée");
            _copyElementMenuItem.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT, handleCopyData);

            this.contextMenu = new ContextMenu();
            contextMenu.hideBuiltInItems();
            contextMenu.customItems = [ _copyElementMenuItem ];
        }

        private function handleCopyData(evt:ContextMenuEvent):void 
        {
            Alert.show("Hello!");
        }

    ]]>
</fx:Script>

</s:DataGrid> 
```

# javascript - 一种知道 Angular $http 何时“请求”的方法

> ID：15529496
> 
> 赞同：21
> 
> 时间：2013-03-20T16:39:39.853
> 
> 标签：javascript, angularjs

`$http`当用户单击 a 时我发出请求，`<button>`并且我在屏幕上禁用/隐藏/显示几个元素，直到请求返回时返回`success`或`error`

有没有办法知道`$http`还没有回复？我现在这样做的方式是我的控制器中有一个 var，`$scope.requesting`然后我在我的 HTML 页面中使用它，如下所示：

```
<img src="img/loader.gif" ng-show="requesting" /> 
```

所以基本上什么时候`$scope.requesting`是真的，显示旋转的ajaxyish loader。

如果可能的话，我想放弃`$scope.requesting`并使用所`$http`提供的任何东西，如果有的话。

**登录控制器**

```
function LoginForm($scope, $http)
{
    $scope.requesting = false;

    $scope.login = function()
    {
        $scope.requesting = true;

        $http.post('resources/request.php', data, {timeout:20000})
            .success(function(data, status, headers, config)
            {
                $scope.requesting = false;
            })
            .error(function(data, status, headers, config)
            {
                $scope.requesting = false;
            }
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-20T17:05:10.777

您可以将`$http.pendingRequests`配置对象数组用于当前待处理的请求。可以这样使用它：

```
$scope.isLoading = function () {
   return $http.pendingRequests.length !== 0;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-02T13:12:33.177

这里没有一个答案真的对我有用，我避免使用`$http.pendingRequests`，所以这就是我所做的

我的用例是，如果我有任何正在进行的请求在服务器上执行操作，我必须在我的视口顶部显示一个简单的“正在加载..”消息。

在里面`.config`，我注册了一个新的拦截器。在里面我添加了一个简单的计数器，每次请求增加 1，每次响应减少。

```
$httpProvider.interceptors.push([function () {
    var pendingRequestsCounter = 0;
    return {
        request: function (request) {
            pendingRequestsCounter++;
            if (pendingRequestsCounter > 0) {
                // we have some pending requests, so do something here 
            }
            return request;
        },
        response: function (response) {
            pendingRequestsCounter--;
            if (pendingRequestsCounter === 0) {
                // we have no pending requests, so do something else here 
            }
            return response;
       }
    };
}]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-02T02:14:33.193

这个[jsbin 项目](http://jsbin.com/nileriweqo/edit?html,js,console,output)将@DmitryEvseev 的答案带到下一步。它可以更好地控制哪些请求可用于触发“加载...”。

这些请求`{ showLoader: true }`用于显示“正在加载...”面板。

HTML

```
 <div ng-app="app">
    <div ng-controller="spinnerController as vm">
      <div ng-if="vm.isLoading()">Loading ...</div>
    </div>
  </div> 
```

Javascript

```
angular
  .module('app', [])
  .config(config)
  .factory('httpLoader', httpLoader)
  .factory('httpLoaderInterceptor', httpLoaderInterceptor)
  .controller('spinnerController', spinnerController);

function config($httpProvider) {
  //adding the default http status code handler
  $httpProvider.interceptors.push('httpLoaderInterceptor');
}

function httpLoader() {
  var pendingReqs = {};
  var factory = {
    addPendingReq: addPendingReq,
    subtractPendingReq: subtractPendingReq,
    getPendingReqs: getPendingReqs
  };
  return factory;

  function addPendingReq(url) {
    console.log('adding url', url);
    pendingReqs[url] = true;
  }

  function subtractPendingReq(url) {

    console.log('removing url', url);
    delete pendingReqs[url];
  }

  function getPendingReqs() {
    return sizeOf(pendingReqs);
  }
}

function httpLoaderInterceptor($q, httpLoader) {

  var factory = {
    request: request,
    response: response,
    responseError: responseError
  };

  return factory;

  function request(config) {
    console.log('request', config.url);
    if (config.showLoader) {
      httpLoader.addPendingReq(config.url);
    }
    return config;
  }

  function response(res) {
    console.log('response', res.config.url);
    if (res.config.showLoader) {
      httpLoader.subtractPendingReq(res.config.url);
    }
  }

  function responseError(res) {
    console.log('responseError', res.config.url);
    if (res.config.showLoader) {
      httpLoader.subtractPendingReq(res.config.url);
    }
    return $q.reject(res);
  }
}

function spinnerController($http, httpLoader) {
  var self = this;
  self.isLoading = function() {
    return httpLoader.getPendingReqs() > 0;
  };

  $http.get('http://stackoverflow.com/posts/34561385',{
    showLoader: true
  });
  $http.get('http://www.amazon.com', {
    showLoader: true
  });
  $http.get('http://www.yahoo.com',{
    showLoader: true
  });
  $http.get('http://www.stackoverflow.com',{
    showLoader: true
  });
}

function sizeOf(obj) {
  var size = 0,
    key;
  for (key in obj) {
    if (obj.hasOwnProperty(key)) {
      size++;
    }
  }
  return size;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-17T09:07:16.707

试试这个指令： [https ://github.com/afeiship/angular-isloading](https://github.com/afeiship/angular-isloading)

## CSS：

```
body {
  font-family: 'STHeiti', 'Microsoft YaHei', Helvetica, Arial, sans-serif;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0)
}

.loading-widget {
  width: 100px;
  height: 100px;
  margin: auto;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  position: absolute;
}

.loading-widget,
.loading-widget[data-visible] {
  display: none;
}

.loading-widget[data-visible=true] {
  display: block;
}

.loading-widget img {
  width: 100%;
  height: 100%;
} 
```

## html:

```
<div class="loading-widget"
     isloading
     loading="loading"
     data-visible="{{loading}}"
>
  <img src="svg/default.svg" alt="">
</div> 
```

## javascript:

```
 angular.module('TestApp', ['nx.widget']);

  angular.module('TestApp').
  controller('MainCtrl', function ($http, $q, $rootScope) {
    $rootScope.loading = false;
    var s1 = $http.get('http://www.baidu.com');
    var s2 = $http.get('http://www.sina.com');
    var s3 = $http.get('http://www.163.com');
    var s4 = $http.get('http://www.qq.com');
    var s5 = $http.get('http://www.hao123.com');

    //you need a VPN if you're a Chinese(Thanks to the GFW)
    var s6 = $http.get('https://www.google.com/');

    $q.all([s1, s2, s3, s4, s5, s6]).then(function (responses) {
      console.log(responses);
    })

  }); 
```

##  描述：

*   正在加载`<!--1.attach the directive-->`
*   加载="加载"`<!--2.write the scope.loading to the app.$rootScope-->`
*   数据可见=“{{加载}}”`<!--2.read loading props for CSS-->`

# opencv - 线程数较少的 TBB parallel_for

> ID：15529499
> 
> 赞同：0
> 
> 时间：2013-03-20T16:39:46.467
> 
> 标签：opencv, detection, tbb, parallel-for

我使用 opencv 人脸检测器编写了一个多视图人脸检测代码。我在一张图像上运行五个检测器（针对不同的姿势角度进行了训练），并采用它们的权重来检测图像中的人脸。我使用 TBB parallel_for 使代码并行，但它仅将性能提高了 1.7 倍。我想问有没有更好的方法来并行运行五个检测器？

我在一个 16 核的集群上运行我的代码。我认为线程数（在我的情况下是 5 个）太少而无法利用全部功能。

有什么建议么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:14:55.450

一些可能需要调查的问题：

*   其中一个检测器的运行时间比其他检测器长。例如，如果一个检测器需要 4 个单位的时间，而其他四个检测器每个需要 1 个单位的时间，则最可能的加速是 2 倍。在这种情况下，并行化慢速检测器本身可能会有所帮助。
*   检测器运行得如此之快，以至于 parallel_for 没有时间分散工作。如果每个检测器至少需要 0.1 秒，这应该不是问题。
*   内存带宽可能是一种限制资源，尤其是在工作集不适合外层缓存的情况下。

诸如 Intel(R) VTune(TM) Amplifier 之类的分析器有时可以帮助追踪这些问题。Amplifier 存在商业和[非商业许可。](http://software.intel.com/en-us/non-commercial-software-development)[免责声明：我为英特尔工作。]

# javascript - HTML textarea 忽略第一个换行符，为什么？

> ID：15529500
> 
> 赞同：12
> 
> 时间：2013-03-20T16:39:46.713
> 
> 标签：javascript, html, textarea, newline

你能解释一下为什么会这样：

```
<script type="text/javascript">
   document.write("<textarea cols='10' rows='10'>" + "\nhello\nbabe\n" + "</textarea>");
</script> 
```

呈现一个底部有一个新行的文本区域，但**顶部没有新行**？

![在此处输入图像描述](../Images/5f086b7436e864bff7e4535e8ac722c9.png)

已测试 IE8、FF11、Safari 5.1、Chrome 24

这不是 JS 问题，即使您在页面中编写 HTML 也会得到相同的结果，即

```
<textarea cols='10' rows='10'>
hello
babe
</textarea> 
```

第一条新线还是不见了！！！

我需要在顶部添加另一个新行以显示一个：

```
document.write("<textarea cols='10' rows='10'>" + "\n\nhello\nbabe\n" + "</textarea>"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T16:49:39.037

在 XHTML 内部编写时使用适当的实体。

```
<textarea>&#13;hello</textarea> 
```

如果文本节点以空格（空格、换行）开头，HTML 解析器将忽略它。将新行编码为适当的 HTML 实体会强制解析器对其进行确认。

```
&#13; == carriage return 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-02T02:24:42.340

回答“为什么”这个问题。这在 HTML 5 规范中的章节中指定，该章节描述了如何从 HTML 文档中的标签创建 DOM 树。

在当前的 HTML 5 生活标准中，它是“12.2 解析 HTML 文档”>“12.2.6 树构造”>“12.2.6.4 解析 HTML 内容中的标记的规则”> [“12.2.6.4.7 “体内”插入模式”](https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inbody "12.2.6.4.7")。

（在 HTML 5.2 中，同一部分的编号为[8.2.5.4.7](https://www.w3.org/TR/html52/syntax.html#the-in-body-insertion-mode "8.2.5.4.7。 体内插入模式")）。

向下滚动查看“标签名称为“textarea”的开始标签”

> 标记名称为“textarea”的开始标记
> 运行以下步骤：
> 1\. 为标记插入 HTML 元素。
> 2\. 如果下一个标记是 U+000A LINE FEED (LF) 字符标记，则忽略该标记并继续下一个标记。（为方便创作，忽略 textarea 元素开头的换行符。）
> 3\. 将分词器切换到 RCDATA 状态。
> ...

该算法仅处理 LF 字符，因为 CR 字符[处理较早](https://html.spec.whatwg.org/multipage/parsing.html#preprocessing-the-input-stream "12.2.3.5 预处理输入流")。

（从历史上看，查看过时的 HTML 4.01 规范：
其[第 17.7 章“TEXTAREA 元素”](https://www.w3.org/TR/html401/interact/forms.html#h-17.7 "HTML 4.01 - 17.7 TEXTAREA 元素")有一个示例显示 textarea 的文本内容从新行开始。 [附录 B.3.1 换行符](https://www.w3.org/TR/html401/appendix/notes.html#notes-line-breaks "HTML 4.01 - 附录 B.3.1 换行符")（信息性）解释了这种行为源自SGML。）

现在，在 HTML 5 中，结束标记之前的换行符`</textarea>`不会被忽略。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T16:50:25.147

如果可能，将代码更改为将 textarea 预定义为 html，然后改写如下字符串：

HTML：

```
<textarea cols='10' rows='10' id='test'></textarea> 
```

脚本：

```
document.getElementById('test').innerHTML = '\nhello\nbabe\n'; 
```

那应该保留空白。或者，您可以添加 css 规则：

```
textarea {
    white-space:pre;
    } 
```

一个小提琴玩：http:
[//jsfiddle.net/RFLwH/1/](http://jsfiddle.net/RFLwH/1/)

更新：

OP 在 IE8 中测试，这不起作用 - 这似乎是此浏览器的限制/错误。如果您在顶部手动插入换行符，IE8 确实使用 CR+LF，但是当设置为编程时，浏览器会完全忽略它。

将此添加到 html 以进行测试：

```
<span onclick="this.innerHTML = escape(document.getElementById('test').innerHTML);">
    Get textarea content
</span> 
```

可以看到返回的字符串是：

```
 %0D%0Ahello%20babe%20 
```

意味着 CR+LF 在那里（其他换行符被转换为空格 - 但在开头插入空格也无济于事）。我想您对此行为无能为力。浏览器已经过时（但不幸的是仍然被广泛使用，所以如果这是必要的，这对那些用户来说可能是一个问题）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T16:47:08.077

在第一个 "\n" 之前添加一个空格，如下所示：

```
<script type="text/javascript">
   document.write("<textarea cols='10' rows='10'>" + " \nhello\nbabe\n" + "</textarea>");
</script> 
```

或者

```
<textarea cols='10' rows='10'> <!-- whitespace here -->
hello
babe
</textarea> 
```

否则它将无法正常工作。

* * *

更新：稍后在您的服务器端，您可以通过执行删除第一个空格

```
$str = ltrim ($str,' '); 
```

或者

```
$str2 = substr($str, 4); 
```

如果是 PHP。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-29T18:00:17.290

它应该`\n\r`在顶部： `document.write("<textarea cols='10' rows='10'>" + "\n\rhello\nbabe\n" + "</textarea>");`

[jsbin](http://jsbin.com/duyolamo/1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-25T18:27:07.977

最后我完成了这个服务器端解决方案：

在将其输出到 textarea 之前，将前导（仅第一个！） nl 符号加倍：

```
if(str_startswith("\r\n",$value))
{
    $value = "\r\n".$value;             
}elseif(str_startswith("\n",$value))
{
    $value = "\n".$value;
}elseif(str_startswith("\r",$value))
{
    $value = "\r".$value;
}

function str_startswith($start, $string)
{
  if(mb_strlen($start)>mb_strlen($string))
    return FALSE;
  return (mb_substr($string, 0,mb_strlen($start))==$start);
} 
```

# php - 当php必须发送串行数据时，找不到URL错误

> ID：15529506
> 
> 赞同：1
> 
> 时间：2013-03-20T16:40:00.420
> 
> 标签：php, html, linux, serial-port

这是我用来与微控制器通信的代码。

一切正常，但是当我单击应该通过串行发送数据的链接 html 时，我得到：

```
http://project.sonar.com/%3C?=$_SERVER[%27PHP_SELF%27]%20.
The requested URL /< was not found on this server. 
```

我知道通信初始化工作，因为这个问题只在我添加链接时发生

```
 if (isset($_GET['action']))
    {
    error_reporting(E_ALL);
    ini_set('display_errors', '1');     //displays php errors

        include("php_serial.class.php");

        $serial = new phpSerial();
        //$serial -> deviceClose(); 
        $serial->deviceSet('/dev/ttyUSB0'); //for linux serial /dev/ttySP(0-4) for usb /dev/ttyUSBN

        // If you want to change the configuration, the device must be closed 

        $serial->confBaudRate(9600); //Baud rate: 9600
        $serial->confParity("none");  //Parity (this is the "N" in "8-N-1")
        $serial->confCharacterLength(8); //Character length (this is the "8" in "8-N-1")
        $serial->confStopBits(2);  //Stop bits (this is the "1" in "8-N-1")
        $serial->confFlowControl("none");
        $serial->deviceOpen();

            if ($_GET['action'] == "on") 
                {
                // To write into $serial->sendMessage("1");
                for ($x = 1; $x < 20; $x++)
                $serial->sendMessage("1");
                }

    $read = $serial->readPort(); //read stores acii value from controller
    if($read > "0")
    {
        $numberz = 20*ord($read);    // number converts the value to decimal representation of distance
        //echo "$numberz";  
        //$database="MEASURE";

        $username = "xxxx";
        $password = "xxxx";
        $hostname = "xxxx";

        $connection = mysql_connect($hostname, $username, $password);
            if (!$connection)
              {
              die('Could not connect: ' . mysql_error());
              }

        mysql_select_db("MEASURE", $connection);

        mysql_query("INSERT INTO measurement (DATA)
        VALUES
        ('$numberz')");
    }

    else
        {
        $serial -> deviceClose();
        }
}

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

        <style type="text/css" title="currentStyle" media="screen">
        @import "style.css";
        </style>

    <body>
    <p><a href="<?=$_SERVER['PHP_SELF'] . "?action=on" ?>">
    Click here to turn the system on.</a></p>

    <div id="wrapper">
        <div id="top">

            <ul id="mainmenu">
                <li><a href="index.html">HOME</a></li>
                <li><a href="measurement2.php">MEASUREMENTS</a></li>
                <li><a href="report.html">REPORT</a></li>
                <li><a href="contacts.html">CONTACTS</a></li>
            </ul>
        </div>

        <div id="pictop">
            <img src="pics/header.jpg"/>
        </div>

        <div id="main">

        <div id="indexleft">
        <h2>Table</h2>

<?php
    //$database="MEASURE";
    $username = "xxxx";
    $password = "xxxx";
    $hostname = "xxxx";

    $connection = mysql_connect($hostname, $username, $password);
        if (!$connection)
          {
          die('Could not connect: ' . mysql_error());
          }

    mysql_select_db("MEASURE", $connection);

    $result = mysql_query("SELECT * FROM measurement"); 

    echo "<table width='80%' border='4px'>
    <tr>
    <th>ID</th>
    <th>DATA</th>
    <th>TIME</th>
    </tr>";

    while ($row = mysql_fetch_array($result))
    {
    echo "<tr>";
    echo "<td align='center'>" . $row['ID'] . "</td>";              
    echo "<td align='center'>" . $row['data'] . "</td>";
    echo "<td align='center'>" . $row['TIME'] . "</td>";
    echo "</tr>";
    }
    echo "</table>";
    mysql_close($connection);
?>          

        </div>

            <div id="bottom">

            </div>
        </div>
    </div>
    </body>
</html> 
```

有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:48:27.630

您的服务器可能没有启用短标签。

改变：

```
<p><a href="<?=$_SERVER['PHP_SELF'] . "?action=on" ?>"> 
```

到：

```
<p><a href="<?php echo $_SERVER['PHP_SELF'] . "?action=on"; ?>"> 
```

尽管您可能可以将其更改为：

```
<p><a href="?action=on"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:45:35.090

URL 中的 %3c 是 < 字符。没有名为 < 的目录或文件并不奇怪。更改您将链接写入的位置：

```
<?php echo $_SERVER['PHP_SELF'] . "?action=on"; ?> 
```

# c# - C#取介绍站点的html代码而不是实际的，如何跳过这个？

> ID：15529507
> 
> 赞同：1
> 
> 时间：2013-03-20T16:40:09.937
> 
> 标签：c#, html, redirect

我有以下问题。我的 C# 应用程序使用 webrequest 并读取 url 的 html 代码，以便以后做很多事情。虽然一切正常，但有些网站在访问时会将您重定向到另一个网站 ( [http://something.com/disclamer](http://something.com/disclamer) )，例如，单击“是”后，您会返回原始网站。

当我运行我的应用程序时，它总是只检查免责声明页面的 html 代码，而永远不会到达我要求的实际页面。在这一点上我真的找不到解决方案，因为我在免责声明网站的简短 html 代码中找不到任何有用的东西（在我要检查的那个之前）。

关于如何跳过它并为我真正感兴趣的网站获取代码的任何想法？请注意，我在这两个网站中都找不到任何 html 重定向代码指示（META HTTP-EQUIV 等）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:51:00.077

您可以检查 StatusCode 以确定您是否已被重定向。30x 的状态码会告诉您您已被重定向，在这种情况下，您需要点击重定向中的链接。

[http://msdn.microsoft.com/en-GB/library/system.net.httpwebresponse.statuscode.aspx](http://msdn.microsoft.com/en-GB/library/system.net.httpwebresponse.statuscode.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:52:25.500

我相信您必须分析带有免责声明的此类页面的 HTML 代码，才能知道那里使用哪种方法进行重定向。每种情况都可能不同：它可以是客户端重定向，也可以是服务器端重定向。如果此免责声明按钮提交表单，您将需要发出 POST 请求来模拟按钮单击。

# php - Cakephp 将复选框数组传递给另一个控制器

> ID：15529508
> 
> 赞同：0
> 
> 时间：2013-03-20T16:40:15.927
> 
> 标签：php, arrays, cakephp, cakephp-2.0

我想做的是为用户提供一种从库存中结帐多种产品的方法。

我的产品索引页面（列出所有要签出的可用产品）如下所示：

```
<?php echo $this->Form->create('multi');?>
<?php foreach ($products as $product): ?>
<tr class="hovertable">
    //All the fields go here
    <td style="cursor: default">
        <?php echo $this->Html->link($this->Html->image('tr/Checkouts_Add.png') . " " . __('Checkout'), array('controller' => 'Checkouts','action' => 'add', $product['Product']['id']), array('escape' => false, 'class' => 'button')); ?>
        <?php echo $this->Html->link($this->Html->image('tr/Edit.png'), array('action' => 'edit', $product['Product']['id']), array('escape' => false)); ?>
        <?php echo $this->Form->postLink($this->Html->image('tr/Delete.png'), array('action' => 'delete', $product['Product']['id']), array('escape' => false), __('Are you sure you want to delete # %s?', $product['Product']['id'])); ?>
        <?php echo $this->Form->input('Product.id.'.$product['Product']['id'] ,
            array('label' => false,
                  'type' => 'checkbox',
                  'id'=>'listing_'.$product['Product']['id'])); ?>
    </td>
</tr>
<?php endforeach; ?>
<?php echo $this->Form->submit(__('Submit'));?> 
```

然后在我的结帐控制器中，我添加了一个新功能来结帐多个项目，我希望这个表单由检查的产品填充

```
 public function multi($count = 1) {
    if($this->request->is('post')) {            
        foreach($this->request->data['Checkout'] as $data) {
            //Do not forget this line. you need to create new model for saving each time.
            if ($this->request->isPost()) {
                $this->Checkout->create();
                $this->Checkout->save($data);
            } else {
                $this->request->data['Checkout']['product_id'] = $productId;
            }
        }
        $this->redirect(array('action' => 'index'));
    }
    $products = $this->Checkout->Product->find('list');
    $users = $this->Checkout->User->find('list');
    $this->set(compact('products', 'users'));
    $this->set('count', $count);
} 
```

如您所见，我尝试添加我认为可能有效的帽子，但产品索引页面中的提交按钮没有任何作用。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:33:41.997

我只是检查了几次，至少我知道您失败的原因之一是在您的 foreach 内部，`error`或者`warning`因为我不知道您的产品数组的价值，所以我检查了这段代码，它对我来说效果很好：

```
<?php $products=array('0'=>'11','1'=>'22','2'=>'333');
echo $this->Form->create('User');?>
<?php foreach ($products as $product): ?>
<tr class="hovertable">
    //All the fields go here
    <td style="cursor: default">

        <?php echo $this->Form->input('Product.id.'.$product,
            array('label' => false,
                  'type' => 'checkbox',
                  'id'=>'listing_'.$product)); ?>
    </td>
</tr>
 <?php
 endforeach;

echo $this->Form->end(__('Submit')); 
```

如果您没有错误或警告，我建议您检查

> $this->Form->postLink

# linux - 使用 usbfs 在 USB 设备上调用 ioctl() 不起作用

> ID：15529509
> 
> 赞同：3
> 
> 时间：2013-03-20T16:40:17.440
> 
> 标签：linux, qt, usb, driver

我现在正在尝试为我的游戏手柄创建自己的驱动程序，我发现我想要创建它的最初原因并不存在，但我仍然想为体验而做。**所以请不要告诉我有比编写自己的驱动程序更好的方法。**

内核空间中应该调用*ioctl*函数的部分是：

```
static int xpad_ioctl (struct usb_interface *intf, unsigned int code,void *buf) {
    //struct usb_xpad *xpad = usb_get_intfdata(intf);
    printk(KERN_INFO"(Ongy)IOCTL called\n");

    //if (_IOC_TYPE(code) != XPAD_IOMAGIC) return -ENOTTY;
    //if (_IOC_NR(code) > XPAD_IOMAX) return -ENOTTY;
    switch(code){
        case XPAD_IORMAP:
            printk(KERN_INFO"(Ongy)IORMAP called\n");
            break;
        default:
           return -EINVAL;
    }
    return 0;
}

static struct usb_driver xpad_driver =
{
    .name = "Cyborg-V5-driver",
    .probe = xpad_probe,
    .disconnect = xpad_disconnect,
    .unlocked_ioctl = xpad_ioctl,
    .id_table = xpad_table,
}; 
```

用户空间中调用它的部分是（这是 Qt 应用程序的一部分）：

```
int openfile() {
    char *device = "/dev/bus/usb/005/009";
    printf("Opening device %s\n", device);
    return open(device, /*O_RDONLY*/O_WRONLY | O_NONBLOCK );
} 
```

[...] 这里缺少 closefile(int file_desc)，这个和 openfile 函数存在是因为我不知道当 Qt 覆盖函数调用时可以调用“::open()”。

```
void MainContainer::callioctl() {
    int file_desc, ret_val;
    errno = 0;
    file_desc = openfile();
    if (file_desc==-1){
        printf("Ioctl notcalled because of: error %s\n", strerror(errno));
    }
    else
    {
        errno = 0;
        //struct usbdevfs_getdriver* driver = (usbdevfs_getdriver*)malloc(sizeof(struct usbdevfs_getdriver));
        struct mappingpair* pair = (mappingpair*)malloc(sizeof(struct mappingpair));
        ret_val = ioctl(file_desc, XPAD_IORMAP, pair);
        //printf("Drivername %s\n", driver->driver);
        closefile(file_desc);
        if (ret_val==-1) printf("Ioctl failed with error %s\n", strerror(errno));
        else printf("Ioctl call successfull\n");
    }
} 
```

好的，我打开文件的字符串我通过调用 lsusb 并在代码中手动更改它，这仅用于调试，直到我让 ioctl 调用正常工作

当我调用 callioctl() 时，它会打印：

```
Ioctl failed with error Unpassender IOCTL (I/O-Control) für das Gerät 
```

德语部分的意思是“设备的 ioctl (I/O-Control) 错误”并且没有出现任何内容`dmesg`，这就是为什么我认为我的驱动程序中的 ioctl 函数没有被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T11:01:44.340

如果您查看[http://www.hep.by/gnu/kernel/usb/usbfs.html](http://www.hep.by/gnu/kernel/usb/usbfs.html)它说要发送`ioctl`到`usb_driver`您需要做的设备：

```
struct usbdevfs_ioctl {
    int     ifno;
    int     ioctl_code;
    void    *data;
};

/* user mode call looks like this.
 * 'request' becomes the driver->ioctl() 'code' parameter.
 * the size of 'param' is encoded in 'request', and that data
 * is copied to or from the driver->ioctl() 'buf' parameter.
 */
static int
usbdev_ioctl (int fd, int ifno, unsigned request, void *param)
{
        struct usbdevfs_ioctl   wrapper;

        wrapper.ifno = ifno;
        wrapper.ioctl_code = request;
        wrapper.data = param;

        return ioctl (fd, USBDEVFS_IOCTL, &wrapper);
} 
```

该文档列出了 USB 设备，`/proc/bus`因此不可否认，这可能已经改变。

# actionscript-3 - Actionscript 中的编译器错误

> ID：15529512
> 
> 赞同：0
> 
> 时间：2013-03-20T16:40:23.193
> 
> 标签：actionscript-3, flash-builder, augmented-reality

嗨，这可能看起来很愚蠢，但我是一名试图制作增强现实应用程序的学生，我发现了这个用于 AR 东西的工具包，我已经将它带入了 flash builder，但我之前从未真正使用过任何外部工具包，而且我'我不太确定我在做什么。

目前它一直说它正在尝试访问未定义的属性@ar_cam、ar_vid、ar_marker 和 ar_params。

我不确定我是否做错了什么，或者它是否与我使用外部工具包的方式有关。

*任何人都可以给我的任何建议将不胜感激。*

到目前为止，这是我的代码：

```
package
{
    import flash.display.BitmapData;
    import flash.display.Sprite;
    import flash.media.Camera;
    import flash.media.Video;
    import flash.utils.ByteArray;

    import org.libspark.flartoolkit.core.FLARCode;
    import org.libspark.flartoolkit.core.param.FLARParam;

    [SWF(width="320", height="480", frameRate="30", backgroundColor="#FFFFFF")]

    public class Main extends Sprite
    {
        [Embed(source="marker.pat", mimeType="application/octet-stream")]
        private var marker:Class;

        [Embed(source="camera_para.dat", mimeType="application/octet-stream")]
        private var cam_params:Class;

        public function Main()
        {
            createFLAR();
            createCam();
        }
        public function createFLAR()
        {
            ar_params = new FLARParam();
            ar_marker = new FLARCode(16, 16);
            ar_params.loadARParam(new cam_params() as ByteArray);
            ar_marker.loadARPatt(new marker());
        }
        public function createCam()
        {
            ar_vid = new Video(320, 480);
            ar_cam = Camera.getCamera();
            ar_cam.setMode(320, 480, 30);
            ar_vid.attachCamera(ar_cam);
            addChild(ar_vid);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:00:42.783

您没有为这些函数中的任何一个中的对象创建变量，因此请替换

```
ar_params = new FLARParam();
ar_marker = new FLARCode(16, 16); 
```

和

```
var ar_params:FLARParam = new FLARParam();
var ar_marker:FLARCode = new FLARCode(16, 16); 
```

和

```
ar_vid = new Video(320, 480);
ar_cam = Camera.getCamera(); 
```

和

```
var ar_vid:Video = new Video(320, 480);
var ar_cam:Camera = Camera.getCamera(); //I don't know if Camera is right after the : so you could use * if that doesn't work 
```

在 actionscript 3 中，语法如下：

```
var [nameOfObject]:[typeOfObject] = new [ObjectClass](params); 
```

祝你好运

# android - 在eclipse中安装开发者工具

> ID：15529526
> 
> 赞同：0
> 
> 时间：2013-03-20T16:41:05.350
> 
> 标签：android, eclipse

我已经安装了 jdk1.7.0_17，然后是 Eclipse Build id：20100218-1602。我正在尝试从中获取插件 Android DDMS[我正在尝试从http://dl-ssl.google.com/android/eclipse](http://dl-ssl.google.com/android/eclipse)并不断得到相同的响应。这就是我得到的（com.android.ide.eclipse.hierarchyviewer.feature.group 21.1.0.v201302060044-569685）缺少要求：Android Hierarchy Viewer 21.1.0.v201302060044-569685（com.android.ide.eclipse.hierarchyviewer .feature.group 21.1.0.v201302060044-569685) 需要 'org.eclipse.ui 3.6.2' 但找不到。

此工具是否已安装或如何解决此问题？

有谁知道如何帮助我得到这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:45:17.080

您必须先下载 adt，这似乎是您使用 eclipse，所以请选择帮助->安装新软件，然后使用此链接[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)此处提供完整指南 -> [http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:39:46.207

您的 Eclipse 版本太旧。Build id 20100218-1602 肯定在 Eclipse 3.6.2 之前，这是 ADT 的最低要求。如果您不了解这些依赖关系，您应该真正从 Android 开发者网站获取[一体化软件包。](http://developer.android.com/sdk/index.html)

# ruby-on-rails - 从 Rails 2.3 升级到 Rails 3 - 时区问题

> ID：15529528
> 
> 赞同：0
> 
> 时间：2013-03-20T16:41:05.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 Rails 2.3 应用程序，其中充满了带有本地时区 (EST) 时间戳的数据，就像 Rails 2.3 的约定一样。问题是现在我正在升级到 Rails 3.2，我想避免将所有这些时间戳更新为 UTC，这是 Rails 3.2 约定。最好的方法是什么？我似乎无法找到一种方法来告诉 Rails 数据库中的数据位于 EST 时区，因此它可以适当地适应时区计算。其他人肯定遇到过这种情况吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:23:12.927

得到它的工作！这是需要添加的配置：

**应用程序.rb：**

```
config.time_zone = 'Eastern Time (US & Canada)'
config.active_record.default_timezone = :local 
```

现在它假设数据库中的数据位于指定为**'Eastern Time (US & Canada)'的****本地**时区。

# eclipse - 在 Eclipse 中的调试会话期间记录所有跟踪信息

> ID：15529529
> 
> 赞同：2
> 
> 时间：2013-03-20T16:41:07.983
> 
> 标签：eclipse, debugging, tcl, trace

我想记录调试会话的每个步骤（稍后处理所有这些数据）的所有调试信息，例如调用的方法的名称、参数值、所有变量值等。

是否有任何选项可以实现这一点？我应该在哪里更改代码才能做到这一点？

一件重要的事情：它不是一个java程序。这是一个在 Eclipse 内部运行的 TCL，使用 activeState 调试器。所以 AOP 和 JDT 不是这里的选项 :-(

TIA

狮子座

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:28:12.973

我建议[`trace`](http://www.tcl.tk/man/tcl/TclCmd/trace.htm)在 tcl 中使用该命令。

一个简单的例子：

```
set ::TraceFd [open {/path/to/logfile} a]
proc ::TraceLog args {
    puts $::TraceFd $args
}
trace add execution source {enterstep leavestep} ::TraceLog
source /the/main/file.tcl 
```

这或多或少是你想要的。我不知道 eclipse 如何与 Tcl 一起工作，但调试 Tcl 的最佳方法是使用 Tcl :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T00:16:31.413

根据您的确切需求，也许也可以查看 logger 包及其跟踪 Loglevel，它还使用执行跟踪来收集一些信息。

[http://tcllib.sourceforge.net/doc/logger.html](http://tcllib.sourceforge.net/doc/logger.html)

您可以将它们添加到您的代码中，如果它们被关闭，您将支付零性能损失，并且您可以在需要时打开它们。

# c++ - 将层次结构向下转换为具体对象

> ID：15529530
> 
> 赞同：2
> 
> 时间：2013-03-20T16:41:08.077
> 
> 标签：c++, casting, derived-class

我正在查看一段代码，其中有一个令我困惑的 c 风格演员表。

我对选角相当熟悉，但这个我真的无法掌握。所以，这里是：我有两个类，比如 Base 和 Derived，但 Derived 没有添加任何方法/属性。基本上，当 Base 的一个属性（称为 M_blockSize）固定为 1 时，这只是 Base 的一种特殊情况；然而，这些方法都不需要特定的实现，也不需要扩展功能。这种派生类的好处不是这个线程的重点。让我们假设开发人员对此有充分的理由。

无论如何，在这段代码中，我正在寻找这样的事情：

```
void foo(const Derived& d){...}
[...]
Base b;
foo((Derived&) b); 
```

因此，开发人员将基础对象转换为对派生对象的引用。据我了解，如果“种姓”（b）的具体类型确实是派生的，则进行向下转换。这不是这里的情况。

然而，这是 c 风格的转换，所以编译器正在尝试一大堆转换，我不知道它最终会起作用。

所以，问题：

*   1）编译器在做什么转换？我假设一个 reinterpret_cast 也许？
*   2) static_cast< Derived& >(b) 也可以吗？
*   3）如果派生类添加了一些方法/属性（未在 foo 中使用），这仍然有效吗？
*   4) 关键点是 foo 不使用 Derived 的任何尚未在 Base 中的功能吗？

我希望这个问题很清楚。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:56:14.017

这里的强制转换是 a `static_cast<Derived&>`，受以下规则（§5.2.9 静态转换）的约束：

> “ *cv1* `B` ”类型的左值，其中是类`B`类型，可以转换为类型“对*cv2* `D`的引用” ，如果从“指向”到“指向B" 存在 (4.10)，*cv2与**cv1*具有相同的 cv 限定或更高的 cv 限定，并且既不是 的虚拟基类，也不是 的虚拟基类的基类。结果的类型为“ *cv2* ”。`D``B``D`**`B``D``D` *`D`***

 ***将“指针`D`”转换为“指针`B`”是有效的标准转换（第 4.10 节）：

> “指向*cv* `D`的指针”类型的纯右值，其中`D`是类类型，可以转换为“指向*cv* `B`的指针”类型的纯右值，其中`B`是 的基类（第 10 条）`D`。

然而，仅仅因为演员阵容有效，并不意味着可以这样做。注意（§5.2.9）：

> 如果类型“ *cv1* `B` ”的对象实际上是类型对象的子对象`D`，则结果引用类型的封闭对象`D`。否则，强制转换的结果是未定义的。

所以这段代码会导致未定义的行为。您*可以*从基类强制转换为它的任何派生类，但只有当它确实是该派生类型的对象时，您才能定义行为。

所以回答问题：

1.  这是一个`static_cast<Derived&>`。
2.  是的，因为这就是正在发生的事情。
3.  它无论如何都不起作用，因为它会导致未定义的行为。
4.  我不能确定这里有什么意义。如果您不使用内部的任何特定功能，我希望它*可能会*继续按预期执行。但是，如果是这种情况，只需使用.`Derived``foo``Base&`***

# java - 使用 BCEL 跟踪 java 字节码中的每条指令

> ID：15529535
> 
> 赞同：2
> 
> 时间：2013-03-20T16:41:18.233
> 
> 标签：java, bytecode, bcel

我正在使用 BCEL 生成字节码，我只想在输入类的静态方法中的每一行之前打印出 (println)。我尝试使用 BCEL 进行检测，但会导致不同形式的错误。它说

```
Exception in thread "main" java.lang.VerifyError: StackMapTable error: bad offset in method C.max(Ljava/lang/String;II)I 
```

有时，如果我在任何指令上放置一些静态方法调用，它就会开始工作，有时它不会。任何帮助将非常感激...

**更新：**我修好了。这与 BCEL 库无关，它是 JDK 版本（1.7），它没有验证我的检测类。因此，如果有人遇到此类问题，请使用 JDK 1.6 或使用 JVM 选项“-XX:-UseSplitVerifier”。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:09:28.377

这`StackMapTable`是 50.0 中引入并在 51.0 中强制执行的功能，旨在通过在代码中的各个点包含有关类型的元数据来加速类文件验证。不幸的是，手动书写或调整是很痛苦的，所以除非你使用一个会自动生成它的工具，否则你最好完全删除它。

为了省略 StackMapTable，您需要将类更改为 50.0 或更早版本。但这不应该是一个真正的问题，因为在 51.0 中添加的唯一功能是`invokedynamic`及其关系，编译后的 Java 从未使用过这些功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T06:41:28.930

目前我在使用 BCEL 时遇到了类似的问题，我只想指出 JVM *-XX:-UseSplitVerifier arg 在***Java 8**中不再可用。

# jquery - ASP.NET MVC 4 - 客户端验证不起作用

> ID：15529540
> 
> 赞同：10
> 
> 时间：2013-03-20T16:41:37.670
> 
> 标签：jquery, asp.net, asp.net-mvc-4, jquery-validate, unobtrusive-validation

我正在使用 Visual Studio 2012，我无法让自定义属性客户端逻辑在更小范围内重现，我创建了一个新的 MVC 4 项目我创建了以下模型和永远不会验证的属性

```
public class MyModel
{
    public int Id { get; set; }
    [Required]
    public string LastName { get; set; }
    [NeverValid(ErrorMessage="Serverside Will Never Validate")]
    public string FirstName { get; set; }
}

public class NeverValidAttribute : ValidationAttribute, IClientValidatable
{
    public override bool IsValid(object value)
    {
        return false;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        return new ValidationResult(this.ErrorMessage, new[] { validationContext.MemberName });
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        yield return new ModelClientValidationRule
        {
            ErrorMessage = this.ErrorMessage,
            ValidationType = "nevervalid"
        };
    }
} 
```

然后我将以下操作添加到 HomeController

```
public ActionResult Index()
{
    return View(new MyModel());
}

[HttpPost]
public ActionResult Index(MyModel model)
{
    if (!ModelState.IsValid)
    {
        // Will Always Be Invalid
    }

    return View(model);
} 
```

还有一个名为 nevervalid.js 的 javascript 文件

```
$(function () {
    $.validator.addMethod("nevervalid", function () {
        return false;
    }, "Clientside Should Not Postback");

    $.validator.unobtrusive.adapters.addBool("nevervalid");
}); 
```

和索引视图

```
@model CustomAttribute.Models.MyModel

@{
    ViewBag.Title = "Home Page";
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>MyModel</legend>

        @Html.HiddenFor(model => model.Id)

        <div class="editor-label">
            @Html.LabelFor(model => model.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastName)
            @Html.ValidationMessageFor(model => model.LastName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.FirstName)
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/Scripts/nevervalid.js")
} 
```

我的 web.config 中的相关区域如下所示

```
<appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

当页面加载时，会加载以下文件（从 chrome 的 F12 下的网络选项卡中获取）

```
http://localhost:7440/
http://localhost:7440/Content/site.css
http://localhost:7440/Scripts/modernizr-2.5.3.js
http://localhost:7440/Scripts/jquery-1.7.1.js
http://localhost:7440/Scripts/jquery.unobtrusive-ajax.js
http://localhost:7440/Scripts/jquery.validate.js
http://localhost:7440/Scripts/jquery.validate.unobtrusive.js
http://localhost:7440/Scripts/nevervalid.js 
```

并且我的自定义属性将相关的外观数据添加到名字输入中，就像这样......

```
 <input class="text-box single-line valid" data-val="true" data-val-nevervalid="Serverside Will Never Validate" id="FirstName" name="FirstName" type="text" value=""> 
```

所以，我问你，为什么这东西必须回发才能进行服务器端验证，而我这里有一些看起来很完美的 javascript 代码？我必须在某个没有月亮的夜晚在山顶某处牺牲一些动物吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T17:58:04.027

我想知道如果您更改 nevervalid.js 以便在文档准备好之前执行代码会发生什么。

我的基本想法是，当dom准备好时，通过解析文档来进行不显眼的验证......但是如果您同时/之后加载自定义验证内容，它不知道遇到时该怎么做您自定义验证数据属性。

无论如何，尝试将 nevervalid.js 更改为：

```
(function($) {
    $.validator.addMethod("nevervalid", function () {
        return false;
    }, "Clientside Should Not Postback");

    $.validator.unobtrusive.adapters.addBool("nevervalid");
})(jQuery); 
```

# highcharts - 如何在 highstock 图表中的 plotLine 标签后面绘制背景

> ID：15529542
> 
> 赞同：0
> 
> 时间：2013-03-20T16:41:42.827
> 
> 标签：highcharts, highstock

我想在 highstock 图表中的 plotLine 标签后面绘制背景。使用 Highstock API 中的示例，我想出了以下代码（crt 是图表对象）：

```
 var textbox = crt.yAxis[ 0 ].plotLinesAndBands[ 0 ].label;
        var box = textbox.getBBox();
        crt.renderer.rect(box.x - 3, box.y + 1, box.width + 6, box.height, 3).attr({
            fill: '#0c0',
            id: 'labelBack',
            opacity: .7,
            'stroke-width': 0,
            zIndex: 4
        }).add(); 
```

这会按预期在标签后面绘制一个半透明框（标签的 zIndex 为 5）。但是，当调整图表大小时，该框相对于图表的左上角保持相同的位置，导致与标签文本不对齐（标签的位置因图表调整大小而变化）。我尝试为此使用图表重绘事件，但即使我可以看到该事件被触发，并且再次执行该函数，也没有绘制其他框（我试图在每次重绘时出现更多框，计划解决在下一次迭代中删除过时的盒子）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:08:53.253

感觉更像是一个黑客而不是真正的解决方案，但我想出了一个解决我现在问题的解决方法，我有以下功能：

```
var labelBackground = null;
function labelDrawBack(crt) {
    if ( isIntraDay ) {
        var textbox = crt.yAxis[ 0 ].plotLinesAndBands[ 0 ].label;
        if ( !!labelBackground ) {
            labelBackground.attr({ y: textbox.y - 10 });
        } else {
            var box = textbox.getBBox();
            labelBackground = crt.renderer.rect( box.x - 3, box.y + 1, box.width + 6, box.height, 3 ).attr( {
                fill: '#fff',
                id: 'labelBack',
                opacity: .65,
                'stroke-width': 0,
                zIndex: 4
            }).add();
        }
    }
} 
```

我确保在图表初始化后立即执行此函数，另外我将函数附加到从 StockChart 调用返回的图表对象：

```
var chartObj = new Highcharts.StockChart( chartConfig, function ( crt ) {
        labelDrawBack( crt );
} );
chartObj.labelDraw = labelDrawBack; 
```

在图表选项中，我已将其添加到 chart.redraw 事件中：

```
events: {
    redraw: function() {
        this.labelDraw(this);
    }
} 
```

这按预期工作，使用标签移动透明背景（调整图表大小时垂直移动）。我在图表重绘事件中重定向调用的原因是 labelDrawBack 函数是在另一个函数中定义的，而不是在定义我的图表选项的函数中，因此 labelDrawBack 函数超出了那里的范围。

# java - SwingWorker 在后台工作时对话框没有响应

> ID：15529546
> 
> 赞同：2
> 
> 时间：2013-03-20T16:41:50.823
> 
> 标签：java, swing, swingworker, java-web-start

基本上我得到了一个以 main 方法作为入口点的 JFrame。在这个主要方法中，程序必须下载一些图像。

为了通知用户程序将随时启动，我想显示一个简单的对话框。

如果我将对话框设置为模态。在启动程序以触发下载后，我必须关闭它。

如果我将它设置为非模态，它会在下载时显示对话框，但它不是响应式的。该对话框甚至不再绘制我的 JLabel 说“请稍候......”。

```
//...
public static void main(String args[]) 
{
    java.awt.EventQueue.invokeLater
    (
        new Runnable() 
        {
            @Override
            public void run() 
            {
                ImageLoadingWorker ilw = new ImageLoadingWorker();

                ilw.execute();

                new MainFrame().setVisible(true);
            }
        }
    );
}

static class ImageLoadingWorker extends SwingWorker<Void, Void>
{ 
    JDialog dialog ;

    public ImageLoadingWorker()
    {
        dialog = new ImageLoadingDialog(null, false);
        dialog.setVisible(true);
    }

    @Override
    protected Void doInBackground()
    {
        ImageLoading.getInstance() ; // download is triggered
        return null;
    }

    @Override
    protected void done()
    {
        dialog.dispose() ;
    }
}
//... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:43:45.703

我相信解决方案很简单：您需要先开始下载 SwingWorker，然后显示*模态*对话框。

IE，

```
public static void main(String args[]) 
{
    java.awt.EventQueue.invokeLater
    (
        new Runnable() 
        {
            @Override
            public void run() 
            {
                ImageLoadingWorker ilw = new ImageLoadingWorker();

                // add a PropertyChangeListener to the SwingWorker
                // when the PCL tells you that the SwingWorker is done, show the mainFrame.

                ilw.execute();

                // .... code for showing the dialog is here.

                //  new MainFrame().setVisible(true);  // done in PCL
            }
        }
    );
} 
```

更具体的例子：

```
import java.awt.Dimension;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JProgressBar;
import javax.swing.SwingWorker;

public class SwingWorkerEg {
   public static void main(String args[]) {
      java.awt.EventQueue.invokeLater(new Runnable() {
         @Override
         public void run() {

            // first set everything up

            final MainFrame mainFrame = new MainFrame();
            final SomeDialog someDialog = new SomeDialog(mainFrame);

            mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            mainFrame.pack();
            mainFrame.setLocationRelativeTo(null);
            someDialog.pack();
            someDialog.setLocationRelativeTo(null);

            // create SwingWorker and its PropertyChangeListener
            ImageLoadingWorker ilw = new ImageLoadingWorker();
            ilw.addPropertyChangeListener(new PropertyChangeListener() {

               @Override
               public void propertyChange(PropertyChangeEvent pcEvt) {
                  // since SwingWorker.StateValue is an enum, can use ==
                  if (SwingWorker.StateValue.DONE == pcEvt.getNewValue()) {

                     // when *done*, get rid of dialog, and show main JFrame

                     someDialog.setVisible(false);
                     mainFrame.setVisible(true);
                  }
               }
            });

            // first start SwingWorker
            ilw.execute();

            // And only *after* starting the SW, show the modal dialog
            someDialog.setVisible(true);
         }
      });
   }
}

class ImageLoadingWorker extends SwingWorker<Void, Void> {
   private static final long SLEEP_TIME = 5 * 1000;

   @Override
   protected Void doInBackground() throws Exception {
      // simulate long-running process
      Thread.sleep(SLEEP_TIME);
      return null;
   }
}

// bad example -- shouldn't extend JDialog!
class SomeDialog extends JDialog {
   private static final int PREF_W = 300;
   private static final int PREF_H = 60;

   public SomeDialog(JFrame frame) {
      super(frame, "Some Dialog", ModalityType.APPLICATION_MODAL);
      JProgressBar progressBar = new JProgressBar();
      progressBar.setIndeterminate(true);
      add(progressBar);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }
}

// bad example -- shouldn't extend JFrame!
class MainFrame extends JFrame {
   private static final int PREF_W = 400;
   private static final int PREF_H = PREF_W;

   public MainFrame() {
      super("Main Frame");
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }
} 
```

编辑：
记住，***永远不要***在`doInBackground()`. 这脱离了 Swing 事件线程，并且没有 Swing GUI 代码可以进入该方法。

# android - gms.map 包中没有“Circle”和“CircleOptions”

> ID：15529548
> 
> 赞同：0
> 
> 时间：2013-03-20T16:41:57.557
> 
> 标签：android, maps, google-api

我想知道为什么我在 Adnroid google-play 服务包中没有类“Circle”和“CircleOptions”，

因为文档中有这个类：

[http://developer.android.com/reference/com/google/android/gms/maps/model/Circle.html](http://developer.android.com/reference/com/google/android/gms/maps/model/Circle.html)

![截屏](../Images/7e914470714fe825384746edfc6f2f85.png)

我不认为这是由于我的“minSdkVersion”（固定为 14）

我你对我的问题有什么想法吗？

先感谢您，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:03:20.603

我发现了问题，

当我安装了 google-play-services 后，我按照安装说明进行操作，但我遇到了一些问题......

[导入 google-play-service 依赖 red cross](https://stackoverflow.com/questions/14728293/import-google-play-service-dependency-red-cross)

因为“Android”安装在我的磁盘“C”中所以有一个限制访问...由于我之前的问题的红十字...

不知道为什么，但是之前复制的google-play-services上没有'Circle'和'CircleOption'

所以我只是从我的磁盘'C'（Windows）中重新复制了我的“新”谷歌播放服务，它的工作:-)

我找到了缺少的课程：D！

# c# - 如何在 Razor 中获取复选框的值

> ID：15529550
> 
> 赞同：1
> 
> 时间：2013-03-20T16:41:58.817
> 
> 标签：c#, razor

我有一个包含以下内容的表格：

```
<form method="post">
<input type="checkbox" name="a1" > 
```

在我的 Razor/C# 代码中，我想将 的值分配给一个整数`var a1`，该值`1`是元素被选中，而 的值是`0`未选中。

我一直在尝试像

```
If (document.getElementById("a1").checked)
If (document.getElementById("a1").checked==true)
If (document.getElementById("a1").checked.AsBool()==true)
If (Request.Form["a1"].checked==true) 
```

和上述的其他类似排列，没有任何效果。要么我有错误消息，要么它忽略了我。

你这是怎么做到的？

澄清：上面的前 3 行位于`<script> </script>`Razor 代码内的内部标记中。最终，我需要`UPDATE`用这个在表中记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:43:33.903

假设你的意思是 JavaScript - 如果你想使用，你需要设置 'id' 属性`getElementById`

```
<input type="checkbox" name="a1" id="a1"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T19:22:07.540

答案很简单：

```
var a1=(Request.Form["a1"]=="on") ? 1 : 0; 
```

我正在寻找的值是一个字符串，没有任何`.checked`类似的东西。然后我只是做一个条件分配。

# javascript - 普通的 for 循环而不是 JavaScript 中的 forEach

> ID：15529552
> 
> 赞同：-4
> 
> 时间：2013-03-20T16:42:05.397
> 
> 标签：javascript, foreach

我的代码有什么问题，如下所示。它不适用于 IE 8 或更低版本。我怎样才能用普通`for`循环而不是改变它`forEach`？

```
var mainItems = [];
[100305, 1003403, 1003511, 1003360, 1002328].forEach(function(id) {
//mainItems.forEach(function(id) {
    mainItems.push(items.filter(function(elem) {
        return elem.id == id;
    })[0])
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:45:12.450

你可以简单地使用

```
 var mainItems = [];

var items = [100305, 1003403, 1003511, 1003360, 1002328];

for(var i=0;i<items.length;i++)   
  mainItems.push(items[i]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:46:00.193

`Array.forEach`是 ES5 规范的一部分，旧版浏览器[不支持该规范。](http://kangax.github.com/es5-compat-table/#)如果你打算使用 ES5 代码，你应该考虑包含[一个*shim*](https://github.com/kriskowal/es5-shim)，它增加了对不支持的浏览器的支持。

至于如何编写`for`循环，[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)可以帮助您。

# php - Codeigniter 在列出类别时计算一个类别中的文章数

> ID：15529555
> 
> 赞同：0
> 
> 时间：2013-03-20T16:42:09.430
> 
> 标签：php, codeigniter

从数据库中列出类别时我遇到了一些问题。

首先，我有一个名为“视频”的表，其中存储了一些视频信息，例如 v_name、v_description 和 category_name。

在名为“类别”的第二个表中，我存储类别信息，如 c_name 和 c_description。

OFC 我在每张桌子上都有 id :)

但现在我想列出类别并在同一个查询中计算每个类别中的每个视频项。

这是代码，我现在不知道如何在模型中执行，以后如何在视图文件中显示数字，所以请帮助我！

感谢您的时间和支持：D

```
 $this->db->select('c.*');
    $this->db->from('categories as c');
    $this->db->join('videos as v', 'c.c_name = v.v_category', 'right');
    return $this->db->get()->result_array(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:35:34.317

要使您的代码正常工作，您需要进行两项更改：

*   首先你的加入类型应该是“左加入”。即使某个类别还没有视频，您仍然会得到计数结果 (0)。
*   其次，您需要对结果进行分组，以便能够使用聚合函数 count()。

试试这个：

```
$this->db
->select('categories.c_name, COUNT(videos.id) as num_videos')
->from('categories')
->join('videos', 'categories.c_name = videos.v_category', 'left')
->group_by('categories.c_name'); 
```

此外，您应该重新考虑您的数据库设计。如果您在两个表中都有 id 列（我假设是主键），那么您应该使用 id 列而不是名称来定义表（外键）之间的关系。

# php - 如何动态设置codeigniter库构造函数

> ID：15529558
> 
> 赞同：0
> 
> 时间：2013-03-20T16:42:20.513
> 
> 标签：php, codeigniter

我正在尝试动态设置 codeigniter 构造函数，但遇到了困难。我的控制器中有：

```
$arguments=array('login'=>'***','pass'=>'***');  ;                   
$this->load->library('mailer', $arguments);
$phpmail = new Mailer;
$phpmail->sendmail('***', 'bob', 'hi', 'there'); 
```

我的构造函数第一行如下所示：

```
public function __construct($login,$pass) 
```

但我得到以下信息：

```
Message: Missing argument 1 for Mailer::__construct(), 
```

任何想法我做错了什么？

提前致谢，

账单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:46:35.907

从[文档](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)：

> 在库加载函数中，您可以通过第二个参数将数据作为数组动态传递，并将其传递给您的类构造函数：
> 
> ```
> $params = array('type' => 'large', 'color' => 'red');
> 
> $this->load->library('Someclass', $params); 
> ```
> 
> 如果你使用这个特性，你必须设置你的类构造函数来期望数据：
> 
> ```
> <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
> 
> class Someclass {
> 
>     public function __construct($params)
>     {
>         // Do something with $params
>     }
> }
> 
> ?> 
> ```

第一个参数是您传递的确切数组。使用`$params['login']`and`$params['pass']`代替。

# parsing - 用于创建树库的句法注释工具

> ID：15529565
> 
> 赞同：2
> 
> 时间：2013-03-20T16:42:38.053
> 
> 标签：parsing, nlp, stanford-nlp, tagged-corpus, brat

你能推荐一个好的语法注释工具吗？我想创建一个小型（短语结构）树库。

我知道有一些用于依赖树库的工具，[brat](http://brat.nlplab.org/)就是其中之一。 [斯坦福解析器](http://nlp.stanford.edu/software/lex-parser.shtml)附带解析树查看器，但据我所知，您无法创建或编辑解析树。

先感谢您！

PS：我也试过[WorkFreak](http://wordfreak.sourceforge.net/)，看起来不错，但它欢迎我有一些运行时异常:)

# bash - Unix：一行 bash 命令将 3 个文件合并在一起。仅提取每个的第一行

> ID：15529567
> 
> 赞同：0
> 
> 时间：2013-03-20T16:42:50.760
> 
> 标签：bash, file, sed, merge

我在这里有时间使用我的语法：我有 3 个包含各种内容的文件 file1 file2 file3（100 多行）。我正在尝试将它们合并在一起，但只应合并每个文件的第一行。重点是使用一行 bash 代码： `sed -n 1p file1 file2 file3`仅返回 file1 的第一行

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:45:13.590

你可能想试试 `head -n1 -q file1 file2 file3`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:46:43.233

不清楚合并是指连接还是加入？

通过`awk`加入*（并排打印的文件中的每一行）*：

```
$ awk 'FNR==1{printf "%s ",$0}'  file1 file2 file3
1 2 3 
```

通过`awk`连接*（文件中的每一行一个接一个地打印）*：

```
$ awk 'FNR==1'  file1 file2 file3
1
2
3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T16:51:31.507

我建议您`head`按照[themel](https://stackoverflow.com/a/15529618/430766)的回答中的说明使用。但是，如果您坚持使用`sed`，则不能简单地将所有文件传递给它，因为它们是隐式连接的，并且您会丢失有关每个文件中第一行内容的信息。所以，如果你真的想在 sed 中做，你需要 bash 来帮助你：

```
for f in file1 file2 file3; do sed -n 1p "$f"; done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T19:20:54.233

您可以使用`read`内置命令避免调用外部进程：

```
for f in file1 file2 file3; do read l < $f; echo "$l"; done > merged.txt 
```

# javascript - 滚动具有 100% 高度固定 div 的页面，该 div 始终位于顶部且不应覆盖页脚

> ID：15529571
> 
> 赞同：-1
> 
> 时间：2013-03-20T16:43:04.107
> 
> 标签：javascript, jquery, css

[http://jsfiddle.net/9fCfE/1/](http://jsfiddle.net/9fCfE/1/)

```
.fixed {
width: inherit;
height: 95%;
overflow-x: hidden;
overflow-y: auto;
position: fixed;
}
footer {
width: 100%;
} 
```

固定 div 必须始终位于顶部，并且在我滚动时不应覆盖页脚。100% 高度或从上到下。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:06:27.787

最简单的答案是删除固定区域的 z-index，以便当它覆盖页脚时，它会移动到它后面。您需要确保页脚是`position: relative;`.

[小提琴示例](http://jsfiddle.net/9fCfE/3/)

相反，如果您希望两者永远不会相交，那么您将面临更大的挑战。

最好的方法是给你的固定元素一个固定的高度，给你的页脚一个固定的高度，并确保固定的元素高度 + 页脚高度 <= 屏幕高度。

[小提琴示例](http://jsfiddle.net/9fCfE/4/)

这些确实是您唯一的选择-您基本上必须围绕它进行设计。据我所知，当固定元素与页面上的其他元素相交时，没有办法动态收缩它（毕竟忽略页面上的其余元素是 的*目的）。*`position: fixed`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:36:10.337

我已经拼凑了一个快速而肮脏的实现，你使用 jQuery 提出的问题`offset()`，`scrollTop()`和`height()`

这是[jsfiddle 示例](http://jsfiddle.net/opherv/EaugF/)。

这是你想要的吗？如果是这样 - 为什么？:) 我看不出这种方法与固定元素位于页脚下方的方法之间有任何视觉差异。

# wordpress - 如何从 Amazon S3 的外部文件中获得更好的压缩性能？

> ID：15529572
> 
> 赞同：0
> 
> 时间：2013-03-20T16:43:06.233
> 
> 标签：wordpress, amazon-web-services, amazon-s3, gzip, amazon-cloudfront

以下 3 个条目来自 gtmetrix.com 报告。对于 Amazon S3，我应该如何处理这些文件的压缩性能？我知道如何为 S3 做 gzip。但下面的三个文件呈现出更严格的情况。

我无权访问 mailchimp 的 css 文件。在这种情况下，有没有办法获得更好的压缩性能？

我会定期更新我的论文主题，这将更改如下所示的 css.css 文件。我无法对该文件进行版本控制，因为我需要使用名称 css.css。有什么技术可以处理这种情况吗？

压缩[http://www.mysite.com/wp-content/thesis/skins/classic/css.css](http://www.mysite.com/wp-content/thesis/skins/classic/css.css)可以节省 20.5KiB（减少 79%）

压缩[http://cdn-images.mailchimp.com/embedcode/slim-041711.css](http://cdn-images.mailchimp.com/embedcode/slim-041711.css)可以节省 1.1KiB（减少 60%）

压缩[http://www.mysite.com/wp-includes/js/comment-reply.min.js?ver=3.5.1](http://www.mysite.com/wp-includes/js/comment-reply.min.js?ver=3.5.1)可以节省 374B（减少 48%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:13:41.417

是的，这是一个很常见的问题。`mod_deflate`如果您从传统的 HTTP 守护程序（如 Apache）提供静态文件，则内容实际上是通过--it 透明地 gzip 文件并设置适当的标头来即时压缩的`Content-Encoding`。

如果您想在 S3 上执行此操作，则必须在上传文件之前手动 gzip 文件（通常命名为`cool-stylesheet.gz.css`），然后`Content-Encoding`在 S3 对象上设置自定义属性，如下所示：

![在此处输入图像描述](../Images/8fef644dc57e04ec1fe2943ec589a896.png)

手动执行此操作可能很乏味，因此我们实际上将其作为持续集成构建过程的一部分自动执行。我们的源代码控制中的一个提交后挂钩会触发，执行几个构建步骤（包括这个），然后将生成的文件部署到适当的环境中。

# 编辑：

您似乎打算描述 Cloudfront 的问题，而不是 S3。由于 Cloudfront 是一个 CDN，它会在其边缘位置缓存文件，因此您必须强制它在文件更改时重新获取文件的最新版本。有两种方法可以做到这一点：使缓存无效或使用文件名版本控制。

使缓存失效很慢并且可能会变得非常昂贵。在每月前 1,000 个无效请求之后，此后每 10 个无效文件将花费 5 美分。

更好的选择是在文件名被拉入 Cloudfront*之前*通过附加一个唯一标识符来对文件名进行版本控制。我们通常使用文件上次更新时的 Unix 纪元。就这样`cool-stylesheet.gz.css`变成了`cool-stylesheet_1363872846.gz.css`。然后在 HTML 文档中像往常一样引用它：`<link rel="stylesheet" type="text/css" href="cool-stylesheet_1363872846.gz.css">`当用户打开更新的 HTML 文档时，这将导致 Cloudfront 从您的源重新获取更新的文件。

正如我上面提到的关于 S3 的那样，手动执行这也是一件乏味的事情：您必须重命名所有文件*并*在源 HTML 文档中搜索/替换对它们的所有引用。将其作为 CI 构建过程的一部分更有意义。但是，如果您不使用 CI 服务器，则可以使用源存储库中的提交挂钩来执行此操作。

# javascript - 你能在javascript文件中加载一个img标签的src然后把它画到画布上吗？

> ID：15529573
> 
> 赞同：1
> 
> 时间：2013-03-20T16:43:14.217
> 
> 标签：javascript, html, canvas

索引.html

```
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <title>DCView</title>

    <script type="text/javascript" src="dcview.js"></script>
</head>
<body>
    <div style="float:center; text-align:center;">
        <canvas id="dcviewCanvas" width="1024" height="1024"/>
        <img id="bgImage" src="" hidden="true"/>
    </div>
</body>
</html> 
```

dcview.js

```
var backgroundImage,
    backgroundImageSrc,
    canvas,
    context;

window.onload = function()
{
    //Initially set the background image source to DCView.png
    backgroundImageSrc = "Foundation\\WebService\\Downloads\\DCView.png";

    //Load the background image with the given source
    loadBackgroundImage(backgroundImageSrc);
}

function loadBackgroundImage(imageSrc)
{
    canvas = document.getElementById("dcviewCanvas");
    context = canvas.getContext("2d");

    backgroundImage = document.getElementById("bgImage");
    backgroundImage.src = imageSrc;

    context.drawImage(backgroundImage, 0, 0);
} 
```

当我尝试在 chrome 中加载 index.html 时，它不会加载背景图像。但是，当我将 img 标签的 src 硬编码到该路径时，它会继续加载它。

chrome给我的唯一错误是：

> Uncaught SyntaxError: Unexpected token 。

它将这个错误指向 dcview.js 中的第 47 行。

我这样做的方式完全错误吗？我是 HTML 和 Javascript 的初学者。

谢谢，

维拉特

**更新**

dcview.js

```
window.onload = function()
{
    //Initially set the background image source to DCView.png
    backgroundImageSrc = 'Foundation/WebService/Downloads/Layout_Basement.png';

    //Load the background image which is initially set to DCView.png
    loadBackgroundImage(backgroundImageSrc);

    //Load the other various pin images;
    loadPinImages();
}

function loadBackgroundImage(imageSrc)
{
    context = document.getElementById('dcviewCanvas').getContext('2d');

    backgroundImage = new Image();
    backgroundImage.src = imageSrc;

    backgroundImage.onload = function(){
        context.drawImage(backgroundImage, 0, 0);
    };
} 
```

**更新**

加载背景图像后，我在顶部绘制的其他图像将被绘制在背景图像下方。想法？

```
window.onload = function()
{
    //Initially set the background image source to DCView.png
    backgroundImageSrc = 'Foundation/WebService/Downloads/Layout_Basement.png';

    //Load the background image which is initially set to DCView.png
    loadBackgroundImage(backgroundImageSrc);

    canvas = document.getElementById('dcviewCanvas');
    context = canvas.getContext('2d');
    context.drawImage(sortationLanePinBlue, 0, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:55:42.957

您可以使用 Javascript Image 类绘制到画布上。[请参阅 MDN 上的这篇文章](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images)。

# imagemagick - png 到 gif 透明

> ID：15529575
> 
> 赞同：5
> 
> 时间：2013-03-20T16:43:19.850
> 
> 标签：imagemagick, png, gif

我有一个具有一定透明度的 png 图像。我想将其转换为 gif 图像。我曾尝试使用 imagemagik，`convert myimage.png myimage.gif`但不尊重透明度。

任何使用linux命令的解决方案？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T17:14:00.067

您正在做的事情应该开箱即用。

但是，GIF 作为一种格式有一个重要的限制（与 imagemagick 无关）。它不支持半透明（阿尔法通道）。GIF 中的透明度是开/关的（布尔值）。

文档声称默认行为是使 (alpha<50%) 的像素完全透明。

但是，根据您的图像，您可能会获得令人满意的结果。例如，通过调整阈值（来自 ImageMagick 文档的代码）：

```
 convert a.png -channel A -threshold 15%   a_no_shadow.gif 
```

在以下位置查看有关可用选项的更多信息： [http ://www.imagemagick.org/Usage/formats/#gif](http://www.imagemagick.org/Usage/formats/#gif)

# gruntjs - grunt：使用 uglifyjs 对 css 文件进行 uglify

> ID：15529583
> 
> 赞同：32
> 
> 时间：2013-03-20T16:43:41.873
> 
> 标签：gruntjs

我正在使用 grunt 来丑化我的静态文件（使用 grunt v0.4.0）。我已将其配置为 uglify 一个文件，但我无法弄清楚如何让它执行两个文件 -[尽管阅读了这个问题](https://stackoverflow.com/questions/14207983/how-to-specify-multiple-source-maps-in-uglify-grunt-task)和[使用示例](https://github.com/gruntjs/grunt-contrib-uglify#usage-examples)。

这是我目前拥有的：

```
uglify: {
  options: {
    banner: '/*! <%= pkg.name %> <%= grunt.template.today("yyyy-mm-dd") %> */\n',
    mangle: true
  },
  build: {
    src: 'dist/main.js',
    dest: 'dist/main.min.js'
  }
} 
```

我也想丑化`dist/main.css`。我怎样才能添加它？我按照使用示例进行了尝试：

```
uglify: {
  options: {
    banner: '/*! <%= pkg.name %> <%= grunt.template.today("yyyy-mm-dd") %> */\n',
    mangle: true
  },
  build: {
    files: {
      'dist/main.min.js': ['dist/main.js'],
      'dist/main.min.css': ['dist/main.css']
    }
  }
} 
```

但这给了我以下错误：

```
WARN: ERROR: Unexpected token: punc ({) [dist/main.css:7,41]
Warning: Uglification failed. Use --force to continue.
Aborted due to warnings. 
```

似乎它在第一次窒息`{`- 为什么会发生这种情况？它是有效的 CSS。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-21T22:10:46.460

Uglify 用于 Javascript 而不是 CSS。尝试使用[http://github.com/gruntjs/grunt-contrib-cssmin](http://github.com/gruntjs/grunt-contrib-cssmin)来使用 Grunt 缩小 CSS。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T03:04:40.117

Uglify 仅适用于 Javascript，但 YUI Compressor 可以同时处理 Javascript 和 CSS：[YUI Compressor](https://npmjs.org/package/grunt-yui-compressor)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-14T01:32:42.833

有一个类似的解决方案叫做**UglifyCSS** ( [https://github.com/fmarcia/UglifyCSS](https://github.com/fmarcia/UglifyCSS) )：

```
shell: uglifycss "source.css" > "output.min.css" 
```

Where 的行为很像**UglifyJS**。

# matlab - 在 MATLAB 中删除 xticks 但保留 xticklabels

> ID：15529585
> 
> 赞同：15
> 
> 时间：2013-03-20T16:43:42.317
> 
> 标签：matlab, plot

我在 MATLAB 中有一个图，我想从中删除`xtick`s 但保留`xticklabel`s。如果我只是删除`xtick`这样的：

```
set(gca, 'XTick', []); 
```

...然后标签也消失了。有没有办法保留标签，而不必使用文本框手动重新创建它们？我想过尝试使`xtick`s 的长度为零，但[这个答案](http://www.mathworks.co.uk/matlabcentral/newsreader/view_thread/17044)表明`xtick`属性不能被独立控制。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-20T16:45:40.053

尝试修改`TickLength`属性：

```
set(gca, 'Ticklength', [0 0]) 
```

# windows - Win32 ASM 程序不向命令行打印任何内容

> ID：15529592
> 
> 赞同：2
> 
> 时间：2013-03-20T16:43:53.470
> 
> 标签：windows, winapi, assembly, command-line, x86

我正在尝试使用 Win32 API 在汇编中编写一个简单的命令行程序。我写了以下内容，让它编译和链接零错误或警告，并从命令行启动它，但在命令提示符下没有出现任何内容。任何人都可以看到有什么问题或者是什么让它说“Hello World！” 在命令行？该程序：

```
; Block 1
.386
.model flat,stdcall
option casemap:none

; Block 2
include windows.inc
include user32.inc
includelib user32.lib
include kernel32.inc
includelib kernel32.lib

; Block 3
.data
szMsg db "Hello World!",0
nNumToWrite dd 12

; Block 4
.data?
numwritten dd ?
CommandLine LPSTR ?

; Block 5
.code
start:
invoke GetCommandLine
mov CommandLine,eax
invoke WriteConsole,CommandLine,addr szMsg,nNumToWrite,numwritten,NULL
xor eax,eax
invoke ExitProcess,eax
end start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:03:17.803

您是将其链接为控制台程序还是 GUI 程序？这是 Win32 中可执行文件的属性。

# c# - linqToSQL datetime 从表中获取最新信息

> ID：15529593
> 
> 赞同：0
> 
> 时间：2013-03-20T16:44:02.737
> 
> 标签：c#, linq, linq-to-sql, .net-3.5, ssis

您好我试图从使用 LinqToSQL 的表中获取最大时间日期。我已经问过一个类似的问题，但正在尝试做一些更具体的事情，没有人能够提供帮助。这一次，我不介意使用任何解决方案，除了 SSIS 包的另一部分中的执行 SQL 任务。这是我的全部代码。我只是想获取 Identity 列，但它甚至没有工作，所以如果 ToString 看起来不合适，请忽略它。我只想获取最新的 CREATED_TIMESTAMP 请

```
using System;
using System.Data;
using Microsoft.SqlServer.Dts.Runtime;
using System.Windows.Forms;
using System.IO;
using System.Linq;
using System.Data.SqlClient;
using System.Linq.Expressions;
using System.Collections;
using System.Collections.Generic;
using System.Data.Linq.Mapping;
using System.Data.Linq;

namespace ST_663004ffff194a14b84e2291578ada33.csproj
{
    [System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {

        #region VSTA generated code
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion

            //Strings for connections
            string iFileName; 
            string oFileName;
            string RW;

        public void Main()
        {
            Dts.Variables["latestTableRow"].Value = getLatest();

            MessageBox.Show(getLatest());

            Dts.TaskResult = (int)ScriptResults.Success;

        }// End Main

        public string getLatest()
        {
            string result = "";

            ////temp dummy/defaul date is two days ago
            //DateTime result = new DateTime();   
            //result = DateTime.Now.AddDays(-2);

            try
            {
                //get the data connection string from the connection manager
                RW = (string)Dts.Connections["ReportingWarehouse"].ConnectionString;

                //Remove the Provider, Auto Translate, and Application
                //as it is not a parameter for the DataContext constructor
                RW = RW.Remove(RW.IndexOf("Provider=SQLNCLI10.1;"), "Provider=SQLNCLI10.1;".Length);
                RW = RW.Remove(RW.IndexOf("Auto Translate=False;"), "Provider=SQLNCLI10.1;".Length);
                RW = RW.Remove(RW.IndexOf("Application"),RW.Length - RW.IndexOf("Application"));

                MessageBox.Show(RW);

                //get the last insertion date from the SSASLoging table
                using (DataContext RWData = new DataContext(RW))
                {

                    Table<SSASLogging> records = RWData.GetTable<SSASLogging>();
                    var rs = (from r in records
                              orderby r.TimeStamp descending
                              select r).Max();
                    result = rs.Errorval.ToString();
                }

                MessageBox.Show(result);

            }

            catch (Exception e)
            {
                MessageBox.Show("Exception in retreiving latest time: " + e.Message + "/n"
                                + e.StackTrace);
            }

            return result;
       }

    }//end partial class

    [Table(Name = "SSASLogging")]
    public class SSASLogging
    {

        private DateTime timeStamp;

        [Column(Name = "CREATED_TIMESTAMP")]
        public DateTime TimeStamp
        {
            get { return this.timeStamp; }
            private set { ;}
        }
    }//End SSASLogging
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:17:12.983

好的，这行得通

```
 using (DataContext RWData = new DataContext(RW))
            {
                Table<SSASLogging> records = RWData.GetTable<SSASLogging>();
                var rs = (from r in records
                          select r).Max(r => r.TimeStamp);
                result = rs;
            } 
```

# linux - 在脚本中执行 ssh 命令

> ID：15529594
> 
> 赞同：0
> 
> 时间：2013-03-20T16:44:07.097
> 
> 标签：linux, shell, ssh

我尝试制作一个脚本来自动化我的实验。
我的目的是从 shell 脚本运行这样的命令，以便在服务器上运行另一个脚本：

```
ssh root@server.com 'sh ControlIperfServer.sh start' 
```

即使文件 ControlIperfServer.sh 已经放置在 server.com 的 /root 目录中，但终端的输出是：

```
bash: sh ControlIperfServer.sh start: command not found 
```

**当我在终端**中键入该命令时，我能够运行该命令。**只有从脚本**执行时不能执行。

我的意思是：
当我在终端中键入命令时。有用。

```
[root@CentOSVanilla ~]# ssh root@server.com 'sh ControlIperfServer.sh start'
Running IPERF SERVER
[root@CentOSVanilla ~]# 
```

当我将命令放入脚本并执行脚本时。这没用。

```
[root@CentOSVanilla ~]# ./Runtest.sh
bash: sh ControlIperfServer.sh start: command not found
[root@CentOSVanilla ~]# 
```

我使用了详细的 -v 选项来跟踪

```
debug1: Next authentication method: publickey
debug1: Trying private key: /root/.ssh/identity
debug1: Offering public key: /root/.ssh/id_rsa
debug1: Server accepts key: pkalg ssh-rsa blen 277
debug1: read PEM private key done: type RSA
debug1: Authentication succeeded (publickey).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: Sending environment.
debug1: Sending env LANG = en_US.UTF-8
debug1: Sending env LC_CTYPE = UTF-8
debug1: Sending command: 'sh ControlIperfServer.sh start;'
bash: sh ControlIperfServer.sh start;: command not found
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
debug1: channel 0: free: client-session, nchannels 1
Transferred: sent 2352, received 2360 bytes, in 0.2 seconds
Bytes per second: sent 10829.0, received 10865.9
debug1: Exit status 127 
```

非常非常非常感谢您的帮助。

我添加了我的 Runtest.sh 的代码：

```
#!/bin/sh
# A script to run test automatically, need modify when using
# Usage:
#       ./RunTest.sh <number of test> [threads]
#       [threads]: when there is threads, use -P option of Iperf
#                  Otherwise, run multiple instances of Iperf
#       <number of test>: Defaut is 1
#                         Number of Threads/Processes
#                         Number of time capture traffic
RUN_IPERF_SERVER="sh ControlIperfServer.sh start"
STOP_IPERF_SERVER="sh ControlIperfServer.sh stop"
RUN_TCPDUMP="sh ControlTCPdump.sh start"
STOP_TCPDUMP="sh ControlTCPdump.sh stop"
RUN_CLIENT="iperf -c"
TARGET_SERVER="10.10.10.253"
REMOTE_SERVER="server.com"
DIRECTORY="CaptureTraffic"
TCP_DURATION="60"

if [ "$1" = "" ]; then
    MAX_TEST=1;
else
    MAX_TEST=$1;
fi

# Run server daemon on remote server
CMD="ssh -v root@$REMOTE_SERVER \"$RUN_IPERF_SERVER\""
echo Running $CMD
$CMD # Run iperf server remotely
sleep 5 # Waiting for server to run

CMD="ssh -v $REMOTE_SERVER 'mkdir $DIRECTORY && echo ok'"
DIROK="$($CMD)"
if [ "$DIROK" = ok ]; then
    mkdir $DIRECTORY
else
    echo Cannot create directory\! Please be careful\!
fi

for INCR in $(seq 1 $MAX_TEST)
do
    echo Running Test $INCR

    #Prepare TCP to capture traffic (run on host)
    echo Setting-up TCPdump for capture traffic
    FILENAME="$DIRECTORY/CapturedTraffic$INCR.dmp"
    ssh $REMOTE_SERVER \'$RUN_TCPDUMP $FILENAME\'
    sleep 5

    # Running the client (running locally)
    if [ "$2" = threads ]; then
        echo "Running Iperf Client as threads model"
        $RUN_CLIENT $TARGET_SERVER -t $TCP_DURATION -P $INCR
    else
        echo "Running Iperf Client as processes model"
        sh parallel.sh -j $INCR \"$RUN_CLIENT $TARGET_SERVER -t $TCP_DURATION\"
    fi

    #Stop TCPdump (run on host)
    ssh $REMOTE_SERVER '$STOP_TCPDUMP'    
    sleep 5 #Wait for TCPdump write file to harddrive

done

#Stop Iperf Deamon
ssh $REMOTE_SERVER '$STOP_IPERF_SERVER'
sleep 3 
```

我已经将所有脚本文件放在名为“server.com”的主机上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:15:27.080

这

```
CMD="ssh -v root@$REMOTE_SERVER \"$RUN_IPERF_SERVER\"" 
```

是个坏主意。嵌入的引号`CMD`被视为文字引号；它们不仅仅用于保护`RUN_IPERF_SERVER`. 可以将命令的名称放在变量中，但它的参数应该分开。如果您正在使用`bash`（或其他一些支持数组的 shell），我建议

```
CMD=ssh
CMD_OPTIONS=( -v root@REMOTE_SERVER "$RUN_IPERF_SERVER" )
$CMD "${CMD_OPTIONS[@]}" 
```

如果你不能使用数组，你可以回退到使用`eval`：

```
CMD="ssh -v root@$REMOTE_SERVER \"$RUN_IPERF_SERVER\""
eval "$CMD" 
```

但我会推荐这个

```
CMD=ssh
CMD_OPTIONS="-v root@REMOTE_SERVER"  # Note no whitespace to protect
$CMD $CMD_OPTIONS "$REMOTE_IPERF_SERVER" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:00:38.710

看起来它认为“sh ControlIperfServer.sh start”是一个命令。一份文件。不是带参数的文件。尝试 ' 像 \' 这样的转义来修复。

也可以使用 ./ControlIperfServer.sh 或 /root/ControlIperfServer.sh。根的外壳不应该有“。” 出于安全原因在其路径中，所以不要指望它在那里。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-20T17:04:32.173

试试 /bin/sh 而不是 sh。如果您从脚本调用 ssh，您的别名可能不会被加载。

# linux - 链接选项不兼容 - 在命令的任何地方都看不到选项

> ID：15529595
> 
> 赞同：1
> 
> 时间：2013-03-20T16:44:21.073
> 
> 标签：linux, linker, g++

`g++ -Wl,-rpath,/usr/local/lib -o /path-to/executable {list of .o files} -L/usr/X11R6/lib -L/usr/local/lib -lQtGui -L/usr/local/lib -L/usr/openwin/lib -lSM -lICE -lXext -lX11 -lresolv -lsocket -lnsl -lQtCore -lm -lrt -ldl -lpthread`

我正在使用上面的命令来编译一个可执行文件。好吧，实际上一个makefile正在为我做这件事..但无论如何。

上面的命令出现错误：

```
ld: fatal: option -dn and -P are incompatible
ld: fatal: Flags processing errors 
```

我看不到在命令或 makefile 中的任何位置向链接器提供 -dn 或 -P 的位置。链接器从哪里获取此信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:59:18.970

通过尝试暂时删除链接命令的每个部分，我发现删除“ `,rpath,/usr/local/lib`”使事情起作用。这让我想到我在 linux 世界的其他地方设置链接器选项。

进一步调查证明我正在设置 LD_LIBRARY_PATH ，其中包含一些导致冲突的链接器选项。更改该 LD_LIBRARY_PATH 后，一切正常。

# html - 用淘汰赛在我的桌子的 tr 标签中注入一个 ID

> ID：15529596
> 
> 赞同：1
> 
> 时间：2013-03-20T16:44:21.730
> 
> 标签：html, knockout.js

在使用淘汰赛之前，我在表的 tr 中注入了一个 id，如下所示：

```
<table>
    <tr data-id="@item.id">
        .... 
```

然后@item.id 被替换（服务器端）

现在我使用淘汰赛，我不知道如何在我的 <tr> 标签中注入我的“id”。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:49:41.667

使用“attr”绑定： http: [//knockoutjs.com/documentation/attr-binding.html](http://knockoutjs.com/documentation/attr-binding.html)

```
<table>
    <tbody data-bind="foreach: items">
        <tr data-bind="attr: { 'data-id': id }">
            <td data-bind="text: id"></td>
        </tr>
    </tbody>
</table> 
```

这是一个工作示例：http: [//jsfiddle.net/VKP4J/](http://jsfiddle.net/VKP4J/)

# html - css - 将图像定位在另一个图像的后面

> ID：15529601
> 
> 赞同：0
> 
> 时间：2013-03-20T16:44:37.137
> 
> 标签：html, image, css, position

我的主页上有一个标志，我在它的右侧有一个大图像，我想做的是图像应该出现在标志的后面。

如需更多信息，请查看屏幕截图： ![在此处输入图像描述](../Images/7cab4e38c8f4b9a699388ac2a496ac26.png)

大图是其中包含许多不同图像的图像，徽标是红色图像。

**HTML 代码：**

```
<div id="header">
    <img src="http://livedemo00.template-help.com/wordpress_43791/wp-content/themes/theme2033/images/logo.png" width="170" height="240" alt="LOGO" id="logo" />
    <div id="slider">
        <img src="http://livedemo00.template-help.com/wordpress_43791/wp-content/uploads/2011/07/testi1.jpg" width="800" height="328" alt="Welcome to Our Site!" />
    </div>
</div> 
```

**CSS 代码：**

```
html, body {
    background-color: rgb(48, 48, 48);
    padding:0;
    margin:0;
}
/******HEADER******/
 #header {
    background-color: rgb(64, 64, 64);
    height: 54px;
}
/******LOGO******/
 #logo {
    float:left;
    margin-left: 47px;
}
/******NAV MENU******/
 #nav {
    list-style: none;
    margin-top: 0px;
}
#nav li {
    display:inline;
} 
```

这是[jsFiddle](http://jsfiddle.net/mareebsiddiqui/TKDQM/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:48:42.887

`#slider{ position: absolute; left:47px; top: 54px; z-index: -1; }` 只是把它放在一起，但不确定它是否正是你想要的。[http://jsfiddle.net/TKDQM/6/](http://jsfiddle.net/TKDQM/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:48:53.597

尝试添加`position: absolute`到您的徽标图像。这会将其从页面流中删除，结果另一个图像被拉起。在你的小提琴中看到它：

[http://jsfiddle.net/joplomacedo/TKDQM/9/](http://jsfiddle.net/joplomacedo/TKDQM/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:50:09.237

在您的徽标上使用绝对定位并将滑块从标题中取出。标题只有 54px 高，不能容纳你的滑块。

[http://jsfiddle.net/TKDQM/8/](http://jsfiddle.net/TKDQM/8/)

**HTML**

```
<div id="header">
    <img src="http://livedemo00.template-help.com/wordpress_43791/wp-content/themes/theme2033/images/logo.png" width="170" height="240" alt="LOGO" id="logo" />
</div>
<div id="slider">
    <img src="http://livedemo00.template-help.com/wordpress_43791/wp-content/uploads/2011/07/testi1.jpg" width="800" height="328" alt="Welcome to Our Site!" />
</div> 
```

**CSS**

```
html, body {
    background-color: rgb(48, 48, 48);
    padding:0;
    margin:0;
}
/******HEADER******/
 #header {
    background-color: rgb(64, 64, 64);
    height: 54px;
    position: relative;
}
/******LOGO******/
 #logo {
   position: absolute;
    margin-left: 47px;
}
/******NAV MENU******/
 #nav {
    list-style: none;
    margin-top: 0px;
}
#nav li {
    display:inline;
} 
```

# c++ - 访问模板中的成员：如何检查模板是否为指针？

> ID：15529607
> 
> 赞同：2
> 
> 时间：2013-03-20T16:44:53.543
> 
> 标签：c++, templates

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:48:58.843

You could use a simple pair of overloaded function templates:

```
template<typename T>
T& access(T& t) { return t; }

template<typename T>
T& access(T* t) { return *t; } 
```

And then use them this way:

```
access(val).member = 42; 
```

For instance:

```
template<typename T>
struct A
{
    void do_it(T& val)
    {
        access(val).member = 42;
    }
};

struct Type
{
    int member = 0;
};

#include <iostream>

int main()
{
    A<Type> a;
    Type t;
    a.do_it(t);
    std::cout << t.member << std::endl;

    A<Type*> a2;
    Type* t2 = new Type(); // OK, I don't like this, but just to show
                           // it does what you want it to do...
    a2.do_it(t2);
    std::cout << t2->member;

    delete t2;             // ...but then, don't forget to clean up!
} 
```

Here is a [live example](http://liveworkspace.org/code/yJL1f%2442).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:54:06.343

The best idea is probably to specialize your class for pointer types.

```
template<class T>
class A{ ...}; 

template<>
class A<T*> { //implement for pointers
}; 
```

If you feel that this is too verbose, you can use overload a `get_ref` function:

```
template<class T> T& get_ref(T & r) {return r;}
template<class T> T& get_ref(T* r) {return *r;}

template<class T>
class A {
   void do(T val) {
     get_ref(val).member ...
  }
} 
```

# c# - 检测到不安全服务器（NetworkStream）的 SslStream（客户端）连接尝试？

> ID：15529609
> 
> 赞同：1
> 
> 时间：2013-03-20T16:44:58.220
> 
> 标签：c#, ssl, tcpclient, networkstream

我有一台服务器正在使用一种`TcpListener.BeginAcceptTcpClient()`方法侦听客户端。当客户端连接时，该`EndAcceptTcpClient`方法会为我提供`TcpClient`对象，然后我调用该客户端流`NetworkStream.BeginRead()`以侦听从客户端传输的数据。

在客户端（希望服务器支持 SSL）尝试连接到（不安全的）服务器之前，一切正常。`NetworkStream.BeginRead()`当客户端尝试进行 SSL 握手时从回调中检索到的数据当然是胡言乱语，但是在读取数据与来自客户端的“正常”消息之后检测此握手的正确方法是什么？

SSL 握手是否有一个已知的标头/签名标识符，我可以通过查看接收到的消息的前几个字节来检查以区分普通消息和 SSL 握手之间的区别？通过检查收到的字节，它看起来可能是 ASCII `0x16 0x03 0x01 0x00`（又名`<SYN><ETX><SOH><NUL>`）。

如果有已知的标头，是否可以向客户端发送响应以告诉它身份验证失败（通过 NetworkStream）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:44:55.867

我找到了一些关于 SSL 协议的信息（参考[1](https://stackoverflow.com/questions/3897883/how-to-detect-an-incoming-ssl-https-handshake-ssl-wire-format)、[2](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=%2Fcom.ibm.ztpf-ztpfdf.doc_put.cur%2Fgtps5%2Fs5rcd.html)），并且有一个标准头可以查找：

来自 IBM 参考站点[2](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=%2Fcom.ibm.ztpf-ztpfdf.doc_put.cur%2Fgtps5%2Fs5rcd.html)：

```
Byte   0       = SSL record type = 22 (SSL3_RT_HANDSHAKE)
Bytes 1-2      = SSL version (major/minor)
Bytes 3-4      = Length of data in the record (excluding the header itself).
Byte   5       = Handshake type
Bytes 6-8      = Length of data to follow in this record
Bytes 9-n      = Command-specific data 
```

所以我可以查找以`0x16 [0x?? 0x??] [0x?? 0x??] 0x01`（SSL“Client Hello”消息）开头的消息。

对于拒绝消息，看起来我可以发送`0x15 0x?? 0x?? 0x00 0x02 0x02 0x28`翻译为`<NACK>`,（2 字节版本），这是一个 2 字节长的消息，致命警报，“握手失败” [3](http://en.wikipedia.org/wiki/Transport_Layer_Security)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:43:34.673

SSL/TLS 客户端将通过发送[Client Hello](https://www.rfc-editor.org/rfc/rfc5246#section-7.4.1.2)消息来启动握手。

在 XDR 表示法中，这是：

```
 struct {
      ProtocolVersion client_version;
      Random random;
      SessionID session_id;
      CipherSuite cipher_suites<2..2^16-2>;
      CompressionMethod compression_methods<1..2^8-1>;
      select (extensions_present) {
          case false:
              struct {};
          case true:
              Extension extensions<0..2^16-1>;
      };
  } ClientHello; 
```

在这里，您看到的是在此之前：它是[记录层](https://www.rfc-editor.org/rfc/rfc5246#section-6.2)`0x16`，用于具有协议 TLS 1.0 ( )的握手消息 ( `0x0301`)。它后面应该跟着一个长度，然后`0x01`是“Client Hello”和一个版本（可能不同：客户端支持的最高版本）。

从实际的角度来看，使用 Wireshark 查看实际的数据包（例如在 HTTPS 上）是值得的。[此页面上](http://wiki.wireshark.org/SSL)有一些示例捕获和示例（尽管您不需要破译您正在尝试执行的流量）。

# jquery - 需要 jQuery 邮政编码验证空间

> ID：15529610
> 
> 赞同：1
> 
> 时间：2013-03-20T16:44:58.183
> 
> 标签：jquery, regex

以下代码行可以很好地检查邮政编码格式。但是它不允许在两者之间使用空格：

```
var postMatch = /[A-z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}/i; 
```

这是正确的：se34tyu

这个号码：se34 tyu

我可以添加什么来实现这一点？

[完整代码](http://jsfiddle.net/8qUtd/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:45:35.727

用于`\s*`允许可选空间。

```
/[A-z]{1,2}[0-9]{1,2}\s*[0-9][A-Z]{2}/i 
```

# javascript - JS 异步/加载行为

> ID：15529631
> 
> 赞同：0
> 
> 时间：2013-03-20T16:45:50.753
> 
> 标签：javascript, jquery, iframe

我有一个应用程序正在抓取网站数据。它在 iFrame 中抓取网站。我需要从同一个 iframe 抓取到后续网站，这两个网站都有一个入口地址，该入口地址指向一个带有字段和按钮的页面。在该页面上，我在字段中输入一个数字，然后按下按钮转到下一页。我遇到的问题是，当我（编码）按下按钮时，它不会等待页面加载并在有任何东西之前刮掉。

`setTimeOut`并且`Delay`似乎被完全忽略了。

```
$(document).ready(function() {

  $('#startbutton').click(function() {
    $('#iframe').attr('src', 'www.pageone.com');
    // Here I start a load because I need to wait for the button to become available.
    $('#iframe').one('load', function() {
      $('#okbutton').click();
    });
    // This is where it goes wrong. I would assume that it waits for the second page 
    // to load. But it doesn't. Adding another load block didn't help.
    scrapeFunction();
  });

}); 
```

我如何正确地获得这些时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:22:40.830

> 当我（编码）按下按钮时，它不会等待页面加载并在有任何东西之前刮掉

实际上，它甚至不等待按钮被按下。相反，您想等待另一个加载事件：

```
var $if = $('#iframe');
// (1) assign a load handler
$if.one('load', function() { // that says "When loaded (first), … 
    // (3) assign the next load handler
    $if.one('load', function() { 
        // (5) which then (second load) can scrape the content
        scrapefunction();
    });
    // (4) and load it
    $('#okbutton').click();
}); // …"
// (2) and load it
$('#iframe').attr('src', 'www.pageone.com'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:53:27.467

这将在 iFrame 加载后执行里面的代码。

```
$("iframe").ready(function() {
    //iFrame loaded
    scrapeFunction();
});​ 
```

# nservicebus3 - 尝试构建 NSB v4 后无法连接到远程服务器

> ID：15529633
> 
> 赞同：0
> 
> 时间：2013-03-20T16:45:54.063
> 
> 标签：nservicebus3

在尝试构建 v4 并试图弄清楚为什么我无法让 v3 在 MVC4 环境中工作时，我开始在运行 v3 的新项目中遇到此错误。John Simons 指出了我所缺少的，因此我能够使用 v3 构建 MVC4。但是，该问题与 MVC 项目无关，因为即使我只启动解决方案的“Asa_Server”类库部分也会发生错误。

v4 版本（我假设）是 github 存储库的开发分支。构建出错，说我需要升级 raven（我没有这样做）。我想知道这和它有什么关系吗？

内部异常：

```
No connection could be made
because the target machine actively refused it 127.0.0.1:8080 
```

堆栈跟踪

```
at System.Net.HttpWebRequest.GetResponse()
at Raven.Client.Connection.HttpJsonRequest.ReadStringInternal(Func`1 getResponse) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs:line 288
at Raven.Client.Connection.HttpJsonRequest.ReadResponseString() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs:line 207
at Raven.Client.Connection.HttpJsonRequest.ExecuteRequest() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\HttpJsonRequest.cs:line 151
at Raven.Client.Connection.ServerClient.DirectPutIndex(String name, String operationUrl, Boolean overwrite, IndexDefinition definition) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\ServerClient.cs:line 709
at Raven.Client.Connection.ServerClient.<>c__DisplayClass3b.<PutIndex>b__3a(String operationUrl) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\ServerClient.cs:line 687
at Raven.Client.Connection.ServerClient.TryOperation[T](Func`2 operation, String operationUrl, Boolean avoidThrowing, T& result) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\ServerClient.cs:line 231
at Raven.Client.Connection.ServerClient.ExecuteWithReplication[T](String method, Func`2 operation) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\ServerClient.cs:line 195
at Raven.Client.Connection.ServerClient.PutIndex(String name, IndexDefinition definition, Boolean overwrite) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\ServerClient.cs:line 687
at Raven.Client.Connection.ServerClient.PutIndex[TDocument,TReduceResult](String name, IndexDefinitionBuilder`2 indexDef, Boolean overwrite) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Connection\ServerClient.cs:line 748
at NServiceBus.Timeout.Hosting.Windows.Persistence.RavenTimeoutPersistence..ctor(IDocumentStore store) in c:\BuildAgent\work\nsb.master_6\src\timeout\NServiceBus.Timeout.Hosting.Windows\Persistence\RavenTimeoutPersistence.cs:line 21 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:01:07.520

看起来服务已停止。似乎 v4 的构建可能导致 ravendb 挂起或其他什么。在我再次启动 raven 后，错误消息消失了。

# c++ - 不知道如何使用 popt 库

> ID：15529634
> 
> 赞同：0
> 
> 时间：2013-03-20T16:45:55.267
> 
> 标签：c++, c, linux

全部：

感谢帮助。

我是 C 选项解析的新手，现在，我想要的是使用 popt 库来解析每个参数并将它们打印出来。

```
 #include <iostream>
    #include <string>
    #include <cstring>
    #include <popt.h>

    using namespace std;

    int main(int argc, const char* argv[]){

        char* dt1;
        char* dt2;

        struct poptOption {
               const char * longName; /* may be NULL */
               char shortName;        /* may be ’\0’ */
               int argInfo;
               void * arg;            /* depends on argInfo */
               int val;               /* 0 means don’t return, just update flag */
               char * descrip;        /* description for autohelp -- may be NULL */
               char * argDescrip;     /* argument description for autohelp */
            };
        struct poptOption optionsTable[]={
            {"start",'s',POPT_ARG_STRING,dt1,'s',"The date format should like YYYY-MM-DD.",0},
            {"end",'e',POPT_ARG_STRING,dt2,'e',"The date format should like YYYY-MM-DD.",0},
            //~ POPT_AUTOHELP
            //~ {NULL,0,0,NULL,0}
            };

        poptContext optCon;
        optCon = poptGetContext (0, argc, argv, optionsTable, 0);

            const char* portname = poptGetArg(optCon);
        cout<<portname<<endl;
        return 0;
} 
```

当我编译它时，我得到了类似的错误：

> test.cpp：在函数 'int main(int, const char**)'<br> test.cpp:27：警告：不推荐将字符串常量转换为 'char*'<br> test.cpp:27：警告：不推荐将字符串常量转换为 'char*'<br> test.cpp:30: 错误：无法将参数 '4' 的 'main(int, const char**)::poptOption*' 转换为 'const poptOption*' 'poptContext_s* poptGetContext(const char*, int, const char**, const poptOption*, unsigned int)'</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:52:04.050

我认为您不应该在程序中定义 struct poptOption。该结构应该在 popt 包含文件中为您定义。尝试删除该结构定义。

请注意，我认为您还需要取消注释此行：

```
 //~ {NULL,0,0,NULL,0} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:10:46.453

报告此警告的原因是 C 语言的一个特性，但代码中的错误是由于您尝试使用 popt 的方式。

C 中的类型 (char*) 和 (const char*) 是不同的类型。一个不是另一个，虽然 C 允许从一种类型分配到另一种类型而不会崩溃，但任何体面的 C 编译器都会给你一个警告。您可以使用类型转换隐藏警告，但这通常不是一个好主意。

C 风格的字符串属于 (const char*) 类型，您将其分配给`descrip`poptOption 中定义为 (char*) 的字段。这会引发编译器警告，因为现在，通过跟随数组引用进入该内存的人`optionsTable`可能会尝试更改字符串的内容。考虑到字符串被定义为常量，这是一件很奇怪的事情。这就是你收到警告的原因。

您的代码中的错误是您错误地使用了 popt，并使用了您自己定义的`poptOption struct`. 如果您在第 55 行[包含的文件 (popt.h)](http://sourcecodebrowser.com/anon-proxy/00.02.39/popt_8h_source.html)中查看，您将看到`poptOption struct`，因为它是由 popt 作者定义的。这是：

```
struct poptOption {
    /*@observer@*/ /*@null@*/ const char * longName;    /* may be NULL */
     char shortName;         /* may be '\0' */
    int argInfo;
     /*@shared@*/ /*@null@*/ void * arg;          /* depends on argInfo */
    int val;                /* 0 means don't return, just update flag */
     /*@shared@*/ /*@null@*/ const char * descrip;       /* description for autohelp -- may be NULL */
    /*@shared@*/ /*@null@*/ const char * argDescrip;    /* argument description for autohelp */
}; 
```

或删除评论

```
struct poptOption {
    const char * longName;
    char shortName;
    int argInfo;
    void * arg;        
    int val;              
    const char * descrip;   
    const char * argDescrip; 
}; 
```

你清楚地看到，即使是作者也期望一个 (const char *)，而不是你定义的 (char *)。

# malloc - “malloc_trim(0)”到底是什么意思？

> ID：15529643
> 
> 赞同：18
> 
> 时间：2013-03-20T16:46:19.500
> 
> 标签：malloc, glibc, trim, sbrk

[手册页](http://man7.org/linux/man-pages/man3/malloc_trim.3.html)告诉了我很多，通过它我知道了很多“glibc”内存管理的背景知识。

但我仍然感到困惑。“ **malloc_trim(0)** ”（注意零作为参数）是否意味着（*1.*）“堆”部分中的所有内存都将返回给操作系统？或者（*2.*）只是堆的最顶部区域的所有“未使用”内存都将返回给操作系统？

如果答案是 ( *1.* )，如果堆中仍然使用的内存怎么办？如果堆在某个地方使用了内存，它们会被消除，还是函数无法成功执行？

如果答案是（*2.*），那么那些“**空洞**”在位置而不是堆顶部呢？它们不再是未使用的内存，但堆的最顶部区域仍在使用，这个调用会有效吗？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-02-16T12:52:07.080

手册页在`malloc_trim`这里提交：[https](https://github.com/mkerrisk/man-pages/blob/master/man3/malloc_trim.3) ://github.com/mkerrisk/man-pages/blob/master/man3/malloc_trim.3据我了解，它是由手册页项目维护者 kerrisk 在 2012 年从头开始编写的：[https ://github.com/mkerrisk/man-pages/commit/a15b0e60b297e29c825b7417582a33e6ca26bf65](https://github.com/mkerrisk/man-pages/commit/a15b0e60b297e29c825b7417582a33e6ca26bf65)

因为我可以[grep glibc 的 git，所以 glibc 中没有手册页](https://sourceware.org/git/?p=glibc.git&a=search&h=HEAD&st=grep&s=malloc_trim)，也没有提交到 malloc_trim 手册页来记录这个补丁。glibc malloc 最好也是唯一的文档是它的源代码：[https](https://sourceware.org/git/?p=glibc.git;a=blob;f=malloc/malloc.c) ://sourceware.org/git/?p=glibc.git;a=blob;f=malloc/malloc.c 有`malloc_trim`评论来自`malloc/malloc.c`：

```
Additional functions:
 malloc_trim(size_t pad);
 609 /*
 610   malloc_trim(size_t pad);
 611 
 612   If possible, gives memory back to the system (via negative
 613   arguments to sbrk) if there is unused memory at the `high' end of
 614   the malloc pool. You can call this after freeing large blocks of
 615   memory to potentially reduce the system-level memory requirements
 616   of a program. However, it cannot guarantee to reduce memory. Under
 617   some allocation patterns, some large free blocks of memory will be
 618   locked between two used chunks, so they cannot be given back to
 619   the system.
 620 
 621   The `pad' argument to malloc_trim represents the amount of free
 622   trailing space to leave untrimmed. If this argument is zero,
 623   only the minimum amount of memory to maintain internal data
 624   structures will be left (one page or less). Non-zero arguments
 625   can be supplied to maintain enough trailing space to service
 626   future expected allocations without having to re-obtain memory
 627   from the system.
 628 
 629   Malloc_trim returns 1 if it actually released any memory, else 0.
 630   On systems that do not support "negative sbrks", it will always
 631   return 0.
 632 */
 633 int      __malloc_trim(size_t);
 634 
```

从块的中间释放**没有记录**为 malloc/malloc.c 中的文本，也没有记录在手册页项目中。2012 年的手册页可能是该函数的第一个手册页，不是由 glibc 的作者编写的。glibc 的信息页面仅提及 128 KB 的 M_TRIM_THRESHOLD： [https](https://www.gnu.org/software/libc/manual/html_node/Malloc-Tunable-Parameters.html#Malloc-Tunable-Parameters) : //www.gnu.org/software/libc/manual/html_node/Malloc-Tunable-Parameters.html#Malloc-Tunable-Parameters 并且不列出 malloc_trim 函数[https ://www.gnu.org/software/libc/manual/html_node/Summary-of-Malloc.html#Summary-of-Malloc](https://www.gnu.org/software/libc/manual/html_node/Summary-of-Malloc.html#Summary-of-Malloc)（它也没有记录 memusage/memusagestat/libmemusage.so）。

2007 年 12 月，Ulrich Drepper 提交了[https://sourceware.org/git/?p=glibc.git;a=commit;f=malloc/malloc.c;h=68631c8eb92ff38d9da1ae34f6aa048539b199cc](https://sourceware.org/git/?p=glibc.git;a=commit;f=malloc/malloc.c;h=68631c8eb92ff38d9da1ae34f6aa048539b199cc)（它是 glibc 2.9 和更新版本的一部分） ) 更改了`mtrim`实现（但它没有更改任何文档或手册页，因为 glibc 中没有手册页）：

> *   malloc/malloc.c (public_mTRIm): 遍历所有 arenas 并调用
> 
> 所有人的 mTRIm。(mTRIm)：另外遍历所有空闲块并使用 madvise 为所有包含至少一个内存页的块释放内存。

块的未使用部分（任何地方，包括中间的块），在页面大小上对齐并且大小超过页面可以标记为`MADV_DONTNEED` [https://sourceware.org/git/?p=glibc.git;a=blobdiff;f =malloc/malloc.c;h=c54c203cbf1f024e72493546221305b4fd5729b7;hp=1e716089a2b976d120c304ad75dd95c63737ad75;hb=68631c8eb92ff38d9da1ae34f6aa048539b199cc;hpb=52386be756e113f20502f181d780aecc38cbb66a](https://sourceware.org/git/?p=glibc.git;a=blobdiff;f=malloc/malloc.c;h=c54c203cbf1f024e72493546221305b4fd5729b7;hp=1e716089a2b976d120c304ad75dd95c63737ad75;hb=68631c8eb92ff38d9da1ae34f6aa048539b199cc;hpb=52386be756e113f20502f181d780aecc38cbb66a)

```
 INTERNAL_SIZE_T size = chunksize (p);

       if (size > psm1 + sizeof (struct malloc_chunk))
         {
           /* See whether the chunk contains at least one unused page.  */
           char *paligned_mem = (char *) (((uintptr_t) p
                                           + sizeof (struct malloc_chunk)
                                           + psm1) & ~psm1);

           assert ((char *) chunk2mem (p) + 4 * SIZE_SZ <= paligned_mem);
           assert ((char *) p + size > paligned_mem);

           /* This is the size we could potentially free.  */
           size -= paligned_mem - (char *) p;

           if (size > psm1)
               madvise (paligned_mem, size & ~psm1, MADV_DONTNEED);
        } 
```

`madvise`这是现在 glibc 中with的两种用法之一`MADV_DONTNEED`，一种用于堆的顶部（`shrink_heap`），另一种是标记任何块（`mtrim`）：[http ://code.metager.de/source/search?q=MADV_DONTNEED&path=% 2Fgnu%2Fglibc%2Fmalloc%2F&project=gnu](http://code.metager.de/source/search?q=MADV_DONTNEED&path=%2Fgnu%2Fglibc%2Fmalloc%2F&project=gnu)

```
 H A D  arena.c 643 __madvise ((char *) h + new_size, diff, MADV_DONTNEED);
 H A D  malloc.c    4535 __madvise (paligned_mem, size & ~psm1, MADV_DONTNEED); 
```

我们可以`malloc_trim`用这个简单的 C 程序 ( `test_malloc_trim.c`) 和`strace`/来测试`ltrace`：

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <malloc.h>

int main()
{
    int *m1,*m2,*m3,*m4;
    printf("%s\n","Test started");
    m1=(int*)malloc(20000);
    m2=(int*)malloc(40000);
    m3=(int*)malloc(80000);
    m4=(int*)malloc(10000);
    // check that all arrays are allocated on the heap and not with mmap
    printf("1:%p 2:%p 3:%p 4:%p\n", m1, m2, m3, m4);
    // free 40000 bytes in the middle
    free(m2);
    // call trim (same result with 2000 or 2000000 argument)
    malloc_trim(0);
    // call some syscall to find this point in the strace output
    sleep(1);
    free(m1);
    free(m3);
    free(m4);
    // malloc_stats(); malloc_info(0, stdout);
    return 0;
} 
```

`gcc test_malloc_trim.c -o test_malloc_trim`,`strace ./test_malloc_trim`

```
write(1, "Test started\n", 13Test started
)          = 13
brk(0)                                  = 0xcca000
brk(0xcef000)                           = 0xcef000
write(1, "1:0xcca010 2:0xccee40 3:0xcd8a90"..., 441:0xcca010 2:0xccee40 3:0xcd8a90 4:0xcec320
) = 44
madvise(0xccf000, 36864, MADV_DONTNEED) = 0
...
nanosleep({1, 0}, 0x7ffffafbfff0)       = 0
brk(0xceb000)                           = 0xceb000 
```

因此，调用后`madvise`有`MADV_DONTNEED`9 页`malloc_trim(0)`，此时堆中间有 40008 字节的空洞。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T22:19:07.517

手册页`malloc_trim`说它释放空闲内存，所以如果堆中有分配的内存，它不会释放整个堆。如果你知道你仍然需要一定数量的内存，那么这个参数就在那里，所以释放更多的内存会导致 glibc 以后不得不做不必要的工作。

至于漏洞，这是内存管理和将内存返回给操作系统的标准问题。程序可用的主要低级堆管理是`brk`和`sbrk`，它们所能做的就是通过更改顶部来扩展或缩小堆区域。所以他们没有办法将漏洞返回给操作系统。一旦程序调用`sbrk`分配更多堆，只有在该空间的顶部空闲并且可以交还时才能返回该空间。

请注意，还有其他更复杂的内存分配方式（`mmap`例如使用匿名），它们可能具有与`sbrk`基于分配不同的约束。

# android - 以编程方式将 LinearLayouts 添加到 ScrollView

> ID：15529645
> 
> 赞同：0
> 
> 时间：2013-03-20T16:46:20.387
> 
> 标签：android, android-layout

我有一个包含**ScrollView**的 xml 视图（带有子**LinearLayout**）。

```
...
   <ScrollView
        android:id="@+id/scrollView_container"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="33dp" >

        <LinearLayout
            android:id="@+id/image_holder"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
        </LinearLayout>
    </ScrollView>
... 
```

我正在尝试动态添加一些图像，我想要每行 3 个。

```
private void createDice(LinearLayout ll, Integer required) {
    ArrayList<Integer> images = new ArrayList<Integer>();
    images.add(R.drawable.one);
    images.add(R.drawable.two);
    images.add(R.drawable.three);
    images.add(R.drawable.four);
    images.add(R.drawable.five);
    images.add(R.drawable.six);

    ScreenHelper screen = new ScreenHelper(MainActivity.this);
    Map<String, Float> s = screen.getScreenSize();
    Integer maxPerRow = (int) (s.get("width") / 90); // images are 89px wide
    Log.d(TAG, "max across::"+maxPerRow);

    Integer rows = (required / maxPerRow);
    Log.d(TAG, "rows::"+rows);
    for (int i=0; i < rows; i++) {
        Log.d(TAG, "i::"+i);
        // create linear layout for row
        LinearLayout llAlso = new LinearLayout(this);
        llAlso.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        //llAlso.setOrientation(LinearLayout.HORIZONTAL);

        for (int j=0; j < 3; j++) {
            Log.d(TAG, "j::"+j);
            // create/add image for the row
            ImageView iv = new ImageView(this);
            iv.setImageResource(images.get(i));
            llAlso.addView(iv);
        }
        // add to main layout
        ll.addView(llAlso, i);
        Log.d(TAG, "adding to main view");
    }
} 
```

我正在使用**所需**的参数值 6进行测试
。问题是第一行图像被添加，但第二行不是因为它被添加到第一行附近（因此离开屏幕）而不是在下面它。

如何达到我想要的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:51:32.273

将`image_holder`布局中的方向设置为`vertical`. 默认情况下， a 的方向`LinearLayout`是`horizontal`。这意味着所有子视图都将添加到水平行中。由于您的子布局使用`fill_parent`它们的宽度，因此只有一个子布局可以容纳在行中。通过将其切换为`vertical`，您的布局将添加到垂直列而不是行中。这允许更多的布局是可见的。

此外，您应该考虑使用 a`GridLayout`代替。这正是针对这种情况而设计的。

# c# - 带有原始创建、修改和访问日期的 Silverlight 文件上传

> ID：15529647
> 
> 赞同：0
> 
> 时间：2013-03-20T16:46:30.730
> 
> 标签：c#, file-upload, silverlight-5.0

我正在使用这些方法上传文件，

客户端：

```
 private void Add(object sender, MouseButtonEventArgs e)
    {
        OpenFileDialog OFD = new OpenFileDialog();
        OFD.Multiselect = true;
        OFD.Filter = "Python (*.py)|*.py";
        bool? Result = OFD.ShowDialog();
        if (Result != null && Result == true)
            foreach (var File in OFD.Files)
                mylistbox.Items.Add(File);
    }
    private void Submit(object sender, MouseButtonEventArgs e)
    {
        foreach (var File in mylistbox.Items)
            Process(((FileInfo)File).Name.Replace(((FileInfo)File).Extension, string.Empty), ((FileInfo)File).OpenRead());
    }
    private void Process(string File, Stream Data)
    {
        UriBuilder Endpoint = new UriBuilder("http://localhost:5180/Endpoint.ashx");
        Endpoint.Query = string.Format("File={0}", File);

        WebClient Client = new WebClient();
        Client.OpenWriteCompleted += (sender, e) =>
        {
            Send(Data, e.Result);
            e.Result.Close();
            Data.Close();
        };
        Client.OpenWriteAsync(Endpoint.Uri);
    }
    private void Send(Stream Input, Stream Output)
    {
        byte[] Buffer = new byte[4096];
        int Flag;

        while ((Flag = Input.Read(Buffer, 0, Buffer.Length)) != 0)
        {
            Output.Write(Buffer, 0, Flag);
        }
    } 
```

服务器端：

```
 public void ProcessRequest(HttpContext Context)
    {
        using (FileStream Stream = File.Create(Context.Server.MapPath("~/" + Context.Request.QueryString["File"].ToString() + ".py")))
        {
            Save(Context.Request.InputStream, Stream);
        }
    }

    private void Save(Stream Input, FileStream Output)
    {
        byte[] Buffer = new byte[4096];
        int Flag;
        while ((Flag = Input.Read(Buffer, 0, Buffer.Length)) != 0)
        {
            Output.Write(Buffer, 0, Flag);
        }
    } 
```

我的问题是上传的文件有不同的**Creation, Modification & Access Dates**。
为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:02:15.903

当您上传文件时，您实际上是在创建一个包含重复内容的新文件。

从您的代码：

```
using (FileStream Stream = File.Create(Context.Server.MapPath("~/" + Context.Request.QueryString["File"].ToString() + ".py")))
{
    Save(Context.Request.InputStream, Stream);
} 
```

`File.Create`负责新日期。

有关保留日期的信息，请参阅此[答案](https://stackoverflow.com/questions/998098/getting-the-original-files-create-date-upon-upload)。

# wordpress - 其他 BuddyPress 自定义配置文件选项卡

> ID：15529657
> 
> 赞同：3
> 
> 时间：2013-03-20T16:46:57.873
> 
> 标签：wordpress, buddypress

有没有办法在 BuddyPress 会员资料页面下添加额外的自定义标签？我的意思是活动、个人资料、消息等旁边的自定义选项卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:51:13.770

有一个名为[BuddyPress 自定义配置文件菜单](http://wordpress.org/extend/plugins/buddypress-custom-profile-menu/)的插件可以满足您的需求。

# linux - 如何在clearcase vob中实现“cp -u”功能？

> ID：15529658
> 
> 赞同：1
> 
> 时间：2013-03-20T16:46:59.670
> 
> 标签：linux, copy, clearcase, auto-update, vob

我们有两个 vobs，分别是“voba”和“vobb”。并且两个vob中都有一个目录“abc”并且包含相同的`.h / .cpp`文件。

通常，“voba”中“abc”目录中的文件更新非常频繁。有时，我想从“abc of voba”更新“abc of vobb”中的所有文件，这意味着：

1.  签出 vobb.abc 中的更新文件，覆盖它们然后签入。
2.  将新创建的文件复制到 vobb.abc，创建元素。
3.  通过对应 voba.abc 删除 vobb.abc 中已删除的文件。

如果它是一个普通的linux目录，我认为`cp -u`并实现了。但是说到clearcase，我只能手工完成上面的1-3个。

有什么简单的方法可以自动完成更新吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:54:19.327

这在 ClearCase 中称为**[clearfsimport](https://stackoverflow.com/questions/416875/creating-a-new-subdirectory-structure-in-clearcase/418196#418196)**（可能与[`-mirror`option](https://stackoverflow.com/a/12155919/6309)一起使用）

`abc`由于两个 vob的目录中的元素**完全不同**（不同的 oid，具有不同的历史记录），您可以做的是将 abc 的内容从一个 vob 导入另一个 vob：`clearfsimport`将仅自动签出、更新和签入具有在源中进化，并且需要在目标中更新。

* * *

注意，这个[最近的线程（2013 年 3 月）](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14959601&tstart=0#14959601)还指出了 perl 脚本[**ClearCase::SyncTree**](http://search.cpan.org/~dsb/ClearCase-SyncTree-0.59/SyncTree.pm)

> 它在许多方面都优于 clearfsimport，尤其是在避免邪恶的孪生方面（它会尝试使用适当的选项来链接来自不可见版本的合适条目）。

描述：

> 该模块为希望将一组文件（通常是子树）与 VOB 空间中类似的目标子树同步的程序提供了基础结构。随附的同步树脚本就是此类程序的一个示例。
> 
> 源区域可能在 VOB 中，也可能是常规文件系统；目标区域必须在 VOB 中。
> 提供了用于添加、减去和修改目标文件的方法，以使该区域看起来与源文件相同。
> 
> 支持符号链接，即使在 Windows 上也是如此（当然在这种情况下源文件系统必须支持它们，这只有在 MVFS->MVFS 传输的情况下才有可能）。请注意，链接的文本从源区域逐字传输到目标区域；因此相对符号链接可能不再在目标中解析。

# php - Win32Service - 如何检查 Windows 服务是否存在

> ID：15529659
> 
> 赞同：0
> 
> 时间：2013-03-20T16:47:01.813
> 
> 标签：php, winapi

我正在使用 PHP 的 Win32Service 插件，除了使用 win32_query_Service_status 之外，我看不到如何测试服务是否存在，因为如果它不存在，这似乎返回 1060？

```
$arrServiceData = win32_query_Service_status($strServicename); 
return ($arrServiceData != 1060); 
```

有人对如何实现这一目标有更好的想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:53:54.890

我认为以这种方式测试它没有任何问题，除了您应该与`!==`, not进行比较`!=`，因此您不会对转换感到惊讶。

[您可以在win32 service constants page](http://www.php.net/manual/en/win32service.constants.errors.php)上查看返回值，从那里：

> WIN32_ERROR_SERVICE_DOES_NOT_EXIST 0x00000424 指定的服务不作为已安装的服务存在。

并且`0x00000424`是`1060`十进制的，所以如果它不存在，那就是结果。

# javascript - 从 App.router.method 中访问 App.method

> ID：15529663
> 
> 赞同：0
> 
> 时间：2013-03-20T16:47:11.460
> 
> 标签：javascript, backbone.js, requirejs, circular-dependency

我正在构建一个backbone.js + require.js 应用程序，我遇到了以下问题。要构建我的应用程序，我有一个`App.js`文件，其内容如下：

```
define(function(require) {
    'use strict';

    var _ = require('underscore'),
        Backbone = require('backbone'),
        Router = require('router'),
        ModuleManager= require('moduleManager');

    var App = function App() {
        var base = {
            router: new Router(),
            moduleManager: new ModuleManager(),
            start: function start(){
                Backbone.history.start({pushState: true});
                this.router.navigate('home', {trigger: true}); 
            }   
        };
        return _.extend(
            base, 
            Backbone.events
        );
    };

    return App;

}); 
```

应用程序以 开始`window.myApp = new App();`，然后`myApp.start();`。

内容`router.js`如下：

```
define(function(require) {
    'use strict';

    var _ = require('underscore'),
        Backbone = require('backbone');

    var Router = Backbone.Router.extend({
        routes: {'home': 'home'},
        home: function home() { 
            // MY ISSUE IS HERE
            App.moduleManager.add('moduleName');
        }       
    });

    return Router;
}); 
```

这`moduleManager`是一个效用函数/对象：

*   `App.moduleManager.add('module')`通过需要 require.js 文件（主干视图 + 集合）添加应用程序模块 ，
*   做一些检查（例如确保模块不存在），
*   将模块集中存储在`App.moduleManager.modules`

除了以下几点之外，一切都运行良好： **我如何`App.moduleManager`从内部`App.router.home`或任何其他路线 ( `App.router.xyz`) 呼叫？**

*   在 内`App.router.home`，`this`不能引用`App`(?)
*   在 内`router.js`，我不能打电话`App = require('app')`，因为我会在和之间建立[循环依赖](http://requirejs.org/docs/api.html#circular)关系`App.js``Router.js`

我不确定我是否有全局应用程序结构问题，或者是否只有一个简单的语言结构可以解决这个问题。感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:59:03.057

您可以在路由器的构造函数中传递您需要的对象。

但我建议使用事件。在路由中，触发一个事件，然后在应用程序中监听该事件。这让路由器只做一项工作，响应来自浏览器的路由更改（后退/前进点击）。

在路由器中：

```
home: function() { 
    Backbone.trigger('home:show');
} 
```

在应用程序中：

```
start: function(){
    Backbone.history.start({pushState: true});
    Backbone.on('home:show', this.showHome, this);
},  

showHome: function(){
    this.router.navigate('home', {trigger: false}); // just update, dont trigger route
    this.moduleManager.add('moduleName');
} 
```

现在，如果您想从代码中更改应用程序显示的内容，您只需触发此事件，而不是调用`navigate`路由器。

其他一些代码，可能是菜单视图：

```
homeClicked: function(){
    Backbone.trigger('home:show');
} 
```

这将显示您的主页视图，并更新历史记录。

# java - 保持（单线程）服务器套接字在意外套接字关闭时监听客户端

> ID：15529664
> 
> 赞同：0
> 
> 时间：2013-03-20T16:47:11.733
> 
> 标签：java, sockets

应该如何处理客户意外断开连接。除非客户端明确声明要关闭，否则我想保持服务器运行/侦听。

例如，我的服务器正在侦听，然后客户端关闭，这导致服务器的方法结束 - 我怎样才能让它返回到方法的开头？

```
 serverSocket = new ServerSocket(port);
    clientSocket = serverSocket.accept();         
    out = new PrintWriter(clientSocket.getOutputStream(), true);
    in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));                   
    BasicProtocol bp = new BasicProtocol(password);
    out.println(bp.processInput(""));
    String inputLine;
    while((inputLine = in.readLine()) != null ){
       System.out.println("Client asks: " + inputLine);
       out.println(bp.processInput(inputLine));            
    } 
```

如上所述，如果发生连接重置错误，如何等待重新连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:55:16.683

例如，您可以在该方法中使用一个带有布尔变量的 while 循环，该变量在客户端想要关闭时更改。像这样：

```
boolean isRunning = true;
while (isRunning) {
    //Your current method - when client wants to disconnect just set isRunning = false;
} 
```

# c# - 如何将十进制类型列表的所有项目放在一个十进制变量中

> ID：15529665
> 
> 赞同：0
> 
> 时间：2013-03-20T16:47:13.763
> 
> 标签：c#, list

我有一个十进制类型的列表，列表中的每个小数项都包含一个数字（我不关心内存）。我怎样才能遍历这个列表并将其所有项目放入小数点后？

```
List<decimal> individualnumberslist = new List<decimal>();

foreach (decimal digit in individualnumberslist) 
{ 
    decimal resultnumber = /here/     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:49:14.973

```
List<decimal> individualnumberslist = new List<decimal>();
decimal resultnumber = 0;

foreach (decimal digit in individualnumberslist) 
{ 
    resultnumber = resultnumber*10 + digit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:57:51.977

您可以将数字放在字符串中并对其进行解析：

```
Decimal resultNumber =
  Decimal.Parse(String.Concat(individualnumberslist.Select(Convert.ToString))); 
```

[编辑，只是为了使它编辑......]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:01:06.423

“把一个列表的所有项目放在一起”让我瞬间想到 linq 的[Aggregate](http://msdn.microsoft.com/en-us/library/bb548651.aspx)方法

```
List<decimal> individualnumberslist = new List<decimal>();

return individualnumberslist.Aggregate((accumulator, digit) => accumulator * 10 + digit); 
```

# visual-studio-2012 - 如何修复 Visual Studio 2012 错误 LNK2019：无法解析的外部符号“__declspec(dllimport) public: class std::basic_string?

> ID：15529666
> 
> 赞同：12
> 
> 时间：2013-03-20T16:47:14.670
> 
> 标签：visual-studio-2012, unresolved-external, lnk2019, c++-standard-library, stdstring

如何修复 Visual Studio 2012 错误 LNK2019: unresolved external symbol "__declspec(dllimport) public: class std::basic_string?

我一直在编译一个包含一个 exe 和几个静态库项目的解决方案，该 exe 依赖于 Visual Studio 2008。静态库包括：

*   TCL：tcl84tsx.lib
*   wxWidgets：wxbase.lib
*   zlib.lib
*   ws2_32.lib
*   xerces-c_2.lib
*   SNMP 研究 EMANATE：subagent.lib,agent.lib,emanate.lib,pack.lib,mibtable.lib,devkit.lib
*   等等

我将解决方案加载到 Visual Studio 2012 并编译了解决方案中的所有项目，但是当我尝试链接 exe 时，我收到有关标准 C++ 库中的东西的未解析符号的错误，如下面的输出。

我发现很多人都有像这样的未解决符号，但没有一个修复程序对我有用。到目前为止我尝试过的修复包括

*   通过手动添加对 exe 项目所依赖的静态库项目的引用来更新 EXE 项目
*   切换“将 wchar_t 视为内置类型”链接器选项

Visual Studio 2012 链接器的输出...

```
 1>ace_funcs.obj : warning LNK4075: ignoring '/EDITANDCONTINUE' due to '/OPT:LBR' specification
 1>LINK : warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other libs; use /NODEFAULTLIB:library
 1>ComponentX-Win32.lib(MyOrgConsoleSktServer.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentY-Win32.lib(ORBSingleton.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentY-Win32.lib(OrbException.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentZ-Win32.lib(ExceptionHelper.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentZ-Win32.lib(ComponentCCheckpointImpl.obj) : warning LNK4217: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported in function "public: __thiscall std::logic_error::logic_error(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (??0logic_error@std@@QAE@ABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@1@@Z)
 1>ComponentX-Win32.lib(MyOrgConsole.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentX-Win32.lib(MyOrgThreadFactory.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentZ-Win32.lib(PersistenceServiceProxy.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentZ-Win32.lib(ComponentBServiceImpl.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentZ-Win32.lib(XmlPreferencesHelper.obj) : warning LNK4217: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported in function "private: void __thiscall _CORBA_Sequence_String::copybuffer(unsigned long)" (?copybuffer@_CORBA_Sequence_String@@AAEXK@Z)
 1>ComponentZ-Win32.lib(XmlHelper.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentA-Win32.lib(ServiceBootstrap.obj) : warning LNK4217: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported in function "public: __thiscall std::logic_error::logic_error(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (??0logic_error@std@@QAE@ABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@1@@Z)
 1>ComponentA-Win32.lib(propertyutil.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentA-Win32.lib(SystemEnvironment.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentZ-Win32.lib(PersistenceClient.obj) : warning LNK4049: locally defined symbol ??0?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@ABV01@@Z (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)) imported
 1>ComponentY-Win32.lib(OrbException.obj) : warning LNK4049: locally defined symbol ??1?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::~basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(void)) imported
 1>ComponentX-Win32.lib(MyOrgConsole.obj) : warning LNK4049: locally defined symbol ??1?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::~basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(void)) imported
 1>ComponentX-Win32.lib(MyOrgThreadFactory.obj) : warning LNK4049: locally defined symbol ??1?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::~basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(void)) imported
 1>ComponentX-Win32.lib(MyOrgConsoleSktServer.obj) : warning LNK4049: locally defined symbol ??1?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::~basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(void)) imported
 1>ComponentY-Win32.lib(ORBSingleton.obj) : warning LNK4217: locally defined symbol ??1?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::~basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(void)) imported in function "public: virtual __thiscall OrbException::~OrbException(void)" (??1OrbException@@UAE@XZ)
 1>ComponentZ-Win32.lib(XmlPreferencesHelper.obj) : warning LNK4049: locally defined symbol ??1?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAE@XZ (public: __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::~basic_string<char,struct std::char_traits<char>,class std::allocator<char> >(void)) imported
 -- snip --
 1>ComponentA-Win32.lib(ServiceBootstrap.obj) : error LNK2019: unresolved external symbol "__declspec(dllimport) public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::substr(unsigned int,unsigned int)const " (__imp_?substr@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QBE?AV12@II@Z) referenced in function "private: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __thiscall ServiceBootstrap::trimmed(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,char const *)" (?trimmed@ServiceBootstrap@@AAE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV23@PBD@Z)
 1>ComponentA-Win32.lib(ServiceBootstrap.obj) : error LNK2019: unresolved external symbol "__declspec(dllimport) public: unsigned int __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::find_last_not_of(char const *,unsigned int,unsigned int)const " (__imp_?find_last_not_of@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QBEIPBDII@Z) referenced in function "private: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __thiscall ServiceBootstrap::trimmed(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,char const *)" (?trimmed@ServiceBootstrap@@AAE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV23@PBD@Z)
 1>ComponentA-Win32.lib(ServiceBootstrap.obj) : error LNK2019: unresolved external symbol "__declspec(dllimport) public: unsigned int __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >::find_first_not_of(char const *,unsigned int,unsigned int)const " (__imp_?find_first_not_of@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QBEIPBDII@Z) referenced in function "private: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __thiscall ServiceBootstrap::trimmed(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,char const *)" (?trimmed@ServiceBootstrap@@AAE?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV23@PBD@Z)
 1>ComponentA-Win32.lib(ServiceBootstrap.obj) : error LNK2019: unresolved external symbol "__declspec(dllimport) class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl std::operator+<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,char const *)" (__imp_??$?HDU?$char_traits@D@std@@V?$allocator@D@1@@std@@YA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@0@ABV10@PBD@Z) referenced in function "private: void __thiscall ServiceBootstrap::verifyBootstrapProperties(void)" (?verifyBootstrapProperties@ServiceBootstrap@@AAEXXZ)
 1>ComponentZ-Win32.lib(PersistenceServiceProxy.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl std::operator+<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,char const *)" (__imp_??$?HDU?$char_traits@D@std@@V?$allocator@D@1@@std@@YA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@0@ABV10@PBD@Z)
 1>ComponentA-Win32.lib(ServiceBootstrap.obj) : error LNK2019: unresolved external symbol "__declspec(dllimport) class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl std::operator+<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (__imp_??$?HDU?$char_traits@D@std@@V?$allocator@D@1@@std@@YA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@0@ABV10@0@Z) referenced in function "public: class std::map<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,struct std::less<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >,class std::allocator<struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const ,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > > > __thiscall ServiceBootstrap::getBootstrapProperties(void)" (?getBootstrapProperties@ServiceBootstrap@@QAE?AV?$map@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V12@U?$less@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@V?$allocator@U?$pair@$$CBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V12@@std@@@2@@std@@XZ)
 1>ComponentZ-Win32.lib(PersistenceServiceProxy.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl std::operator+<char,struct std::char_traits<char>,class std::allocator<char> >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (__imp_??$?HDU?$char_traits@D@std@@V?$allocator@D@1@@std@@YA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@0@ABV10@0@Z)
 1>ComponentA-Win32.lib(propertyutil.obj) : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __thiscall std::_Mutex::_Lock(void)" (__imp_?_Lock@_Mutex@std@@QAEXXZ) referenced in function "public: __thiscall std::basic_ostream<char,struct std::char_traits<char> >::_Sentry_base::_Sentry_base(class std::basic_ostream<char,struct std::char_traits<char> > &)" (??0_Sentry_base@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAE@AAV12@@Z)
 1>ComponentZ-Win32.lib(XmlHelper.obj) : error LNK2001: unresolved external symbol "__declspec(dllimport) public: void __thiscall std::_Mutex::_Lock(void)" (__imp_?_Lock@_Mutex@std@@QAEXXZ)
 -- snip --
 1>.\Debug/sComponentC.exe : fatal error LNK1120: 22 unresolved externals
 ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-20T09:48:16.487

在 properties->c/c++->Laguage 中，我将treat wchar_t as built in type 设置为 No，它解决了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-06T22:31:10.827

如果您已经尝试过以下选项：

*   通过手动添加对 exe 项目所依赖的静态库项目的引用来更新 EXE 项目
*   切换“将 wchar_t 视为内置类型”选项

尝试按照以下步骤将您的项目配置为 x64：

*   右键单击`Solution 'ProjectName'`
*   选择`Configuration Manager...`
*   更改`platform`您尝试将 .lib 文件链接到的项目`x64`（`Win32`反之亦然）
*   重建解决方案

这实际上解决了我的问题。我不知道我的外部库是为 32 位还是 64 位编译的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-07T09:03:36.347

即使我在 Visual Studio 中也遇到过这种类型的错误。这些错误的原因是，

1）您可能包含了多个相互冲突的库。有时，库中的一个类可能会与其他库中的其他类发生冲突。

2）您可能已包含目录中的库。再次检查库的路径。

3）您需要在项目属性中指定库和头文件（如果必须包含）。再次检查路径是否正确。

# forms - CakePHP2 在 add.ctp 发布空

> ID：15529667
> 
> 赞同：1
> 
> 时间：2013-03-20T16:47:19.093
> 
> 标签：forms, cakephp, empty-list

（已编辑）

在我`http://host/MyCake/index.php/table/add`的表单中，有 10 个输入（字段），提交时，我有

```
Error: SQLSTATE[23502]: Not null violation: 7 
    ERROR: null value in column "revista_id" violates not-null constraint
SQL Query: 
    INSERT INTO "fasciculos" ("created", "modified", "user_id") VALUES ('now()', 'now()', 1) 
```

好吧，关于“非空违规”（字段`revista_id`）我尝试使用`ALTER COLUMN revista_id DROP NOT NULL`（删除约束）更改 SQL，并且更改没问题，它运行了！但是，**问题**是： * *SQL INSERT 中的其他 10 个字段在哪里？*！！

是的，当我更改时，提交的数据记录是空的，所有10个字段都是NULL。

* * *

我正在使用 PostgreSQL 9.X。

我还检查了 FascculoController 上的 var_dump 是否有发布的数据，是的，它就在那里，

```
public function add() {
    if ($this->request->is('post')) {
        $this->Fasciculo->create();
        var_dump($this->request->data); // showing below 
        if ($this->Fasciculo->save($this->request->data)) // bug here!
                    ...
             }...
    ...} 
```

vardump 有所有 POST 数据，

```
 array(1) {  
     ["Fasciculos"]=>array(11) {  
         ["other_id"]=> string(3) "540" 
         //... all data here ...
     }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:23:50.493

`TABLE`是 MySQL/PostgreSQL 中的保留关键字，并且作为保留关键字，我认为数据库可能会被`INSERT INTO table ...`您的 SQL 部分混淆。

这里也可能发生其他事情，但尝试重命名`Table`模型和控制器可能是个好主意。 *（并确保在对模型进行重大更改时清除 CakePHP 缓存文件等）*

参见：[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，[PostgreSQL 保留关键字](http://www.postgresql.org/docs/current/static/sql-keywords-appendix.html)

# sql - 如何在 SQL 中为每个用户获取一行并连接两行值？

> ID：15529671
> 
> 赞同：1
> 
> 时间：2013-03-20T16:47:30.000
> 
> 标签：sql

我正在使用 Wordpress 和 Event Espresso，但一般来说，我有以下 SQL：

```
SELECT m.user_id, m.meta_key, m.meta_value from wp_usermeta as m
WHERE m.meta_key in ('event_espresso_city','event_espresso_state')
ORDER BY m.user_id 
```

我正在尝试获取用户的城市和州，所以我想按 user_id 分组，但如果我这样做，它只会获取城市值并忽略或覆盖状态值。

有没有办法可以在（'event_espresso_city'，'event_espresso_state'）中执行 concat(m.metavalue1, m.meta_value2) WHERE m.meta_key？也就是说，它必须连接两行......有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:53:32.397

MySQL[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)为此提供了功能。

在一般情况下，您必须将表与自身连接以从同一个表中的多个记录生成单个记录，例如：

```
SELECT m_city.user_id, m_city.meta_value as city, m_state.meta_value as state
FROM wp_usermeta as m_city
INNER JOIN wp_usermeta as m_state on m_city.user_id = m_state.user_id
WHERE m_city.meta_key = 'event_espresso_city'
AND m_state.meta_key = 'event_espresso_state'
ORDER BY m_city.user_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:54:19.420

尝试

```
Select coalesce(c.userId, s.userId) UserId, 
     c.meta_value City, s.meta_Value state
From wp_usermeta c
   full Join wp_usermeta s
       On s.UserId = c.UserId
          and c.meta_key = 'event_espresso_city'
          and s.meta_key = 'event_espresso_state'
Where @userId in (c.User_Id, s.User_id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:55:35.560

请参阅我对您的问题的评论，该帖子显示了使用自内连接来实现此目的的示例。您的查询将类似于：

```
SELECT ma.user_id, ma.meta_key as City, mb.meta_value as State
FROM wp_usermeta as ma
INNER JOIN wp_usermeta as mb
ON ma.user_id = mb.user_id
WHERE 
ma.meta_key = 'event_espresso_city'
AND
mb.meta_key = 'event_espresso_state'
ORDER BY ma.user_id 
```

# c# - 为单行文本生成缩进字符串

> ID：15529672
> 
> 赞同：6
> 
> 时间：2013-03-20T16:47:38.433
> 
> 标签：c#, string, indentation

从空格字符生成缩进行的最佳方法是什么。我的意思与此类似：

```
 string indent = String.Join("    ", new String[indentlevel]);
    s.Write(indent + "My line of text"); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T16:49:26.813

您可以使用以下命令创建缩进：

```
var indent = new string(' ', indentLevel * IndentSize); 
```

`IndentSize`将是一个值为 4 或 8 的常数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-20T16:50:14.300

我可能会做这样的事情来添加`Indent`.

```
public static string Indent(int count)
{
    return "".PadLeft(count);
} 
```

要使用它，您可以执行以下操作：

```
Indent(4) + "My Random Text" 
```

在您的应用程序中，您可以简单地执行以下操作：

```
s.Write(Indent(indentLevel)); 
```

或者

```
s.Write("".PadLeft(indentLevel)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-20T17:00:37.157

它在盒子里！

使用[`System.CodeDom.Compiler.IndentedTextWriter`](http://msdn2.microsoft.com/en-us/library/system.codedom.compiler.indentedtextwriter).

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-04T04:33:29.990

如果你想缩进字符串的每一行，你可以使用这个扩展。

```
public static class StringExtensions
{
    public static string Indent(this string value, int size)
    {
        var strArray = value.Split('\n');
        var sb = new StringBuilder();
        foreach (var s in strArray)
            sb.Append(new string(' ', size)).Append(s);
        return sb.ToString();
    }
} 
```

像这样使用它：

```
MyString.Indent(4); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-26T00:59:43.317

您可以使用这种通用的字符串扩展方法（它的性能和内存是最佳的）。您可以将它保存在主应用程序项目的中央“核心”项目引用中，然后每当您想要获取任何字符串的缩进版本时，它只是：

```
myString.Indent(n) 
```

（其中 'n' 是缩进级别）

```
private const byte _indentSize = 4;

public static string Indent(this string originalString, int indentLevel)
{
    StringBuilder indentedString = new StringBuilder();
    indentedString.Append("".PadLeft(indentLevel * _indentSize));
    indentedString.Append(originalString);
    return indentedString.ToString();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-02T08:08:27.397

还有一种方式：

```
int indentLevel = 4;
string myText = "This string will become indented";

string res = String.Format("{0," + indentLevel + "}{1}", String.Empty, myText); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-13T17:15:50.570

这应该适用于 \r\n 和 \n 分隔符。

```
 public static string Indent(this string value, string indent) {
        var builder = new StringBuilder();
        foreach (var line in value.GetLines()) {
            builder.Append( indent ).Append( line );
        }
        return builder.ToString();
    }
    private static IEnumerable<string> GetLines(this string value) {
        var start = 0;
        while (start < value.Length) {
            var end = value.IndexOf( '\n', start );
            if (end != -1) {
                yield return value.Substring( start, (end - start + 1) );
                start = end + 1;
            } else {
                break;
            }
        }
        if (start < value.Length) yield return value.Substring( start );
    } 
```

# ios - 检查另一个控制器中的 if 语句的最佳方法是什么

> ID：15529674
> 
> 赞同：-1
> 
> 时间：2013-03-20T16:47:42.960
> 
> 标签：ios, objective-c, if-statement

基本上，如果`controller 1` `number == 2`我想在视图中激活一个方法`view controller 2`。什么是最好的方法。我正在考虑`NSUserDefaults`为此使用布尔值。

视图控制器 1

```
if (number ==2) {  
} 
```

视图控制器 2

```
-(void)numberequals2 {
    NSLog(@"number2")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:14:35.140

```
if (number == 2) { 

     //create an object for ViewController2 if it doesn't exists
     [viewController2Obj numberequals2]
} 
```

# jqgrid - 两个jqgrid没有加载数据

> ID：15529682
> 
> 赞同：1
> 
> 时间：2013-03-20T16:47:56.637
> 
> 标签：jqgrid

当我复制具有不同 ID 的工作网格时，两个网格中都不会加载数据。显示了两个网格，并且它们都查询相同的 url。Json 数据是从 php 发送的，但数据没有加载到网格中。

如果我评论任何一个网格，另一个网格会正确加载数据。

非常感谢任何帮助。我正在使用 jqgrid 4.4.1

这是我的代码

```
<div class="row-fluid">
 <script type="text/javascript" language="javascript">
    function LoadgridInput () {
    jQuery('#gridInput').jqGrid({
    height:100,
    hoverrows:false,
    viewrecords:true,
    caption:"&nbsp;",cellEdit: true,rowNum:10000,
    scroll:1,
    rowList:[30,100,500],
    datatype:"json",
    url:"grid.php?sec=Agility&fn=gcSandFInput_V1",
    cellurl:"grid.php?sec=Agility&fn=gcSandFInput_V1",
    editurl:"grid.php?sec=Agility&fn=gcSandFInput_V1",
    sortname:"default",
    autowidth:true,
    shrinkToFit:true,
    gridview:false,
    pager:"#gridInputPager",
    postData:{oper:"grid"},
    jsonReader:{repeatitems:false,root: "rows",page: "page",total: "total",records: "records",repeatitems: true,cell: "cell",id: "id",userdata: "userdata"},
    colModel:[
    {name:" ",index:"nope",align:"left",search:true,editable:false,width:60},{name:"04-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"05-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"06-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"07-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"08-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"09-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"10-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"11-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"12-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"01-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"02-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"03-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"04-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"05-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"06-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"07-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"08-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"09-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"10-2013",index:"nope",align:"left",search:true,editable:false,width:60 }]})

  jQuery('#gridInput').jqGrid('navGrid','#gridInputPager',{refresh:true,edit:false,add:false,del:false,search:true,view:false,"excel":true,"pdf":false,"csv":false,"columns":false},{"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150,"errorTextFormat":function(r){ return r.responseText;}},{"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150,"errorTextFormat":function(r){ return r.responseText;}},{"errorTextFormat":function(r){ return r.responseText;}},  {"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150,"closeAfterSearch":true,"multipleSearch":false},{"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150},{"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150});

    };
    </script>

<script type="text/javascript" language="javascript"> runOnLoad(LoadgridInput); </script>
<div id="gridInputWrapper">
 <table id="gridInput"></table> <div id="gridInputPager"></div>
 <div class="gridInputFooter"></div>
</div>
</div>

<div class="row-fluid">
    <script type="text/javascript" language="javascript">
    function LoadgridList () {
    jQuery('#gridList').jqGrid({
    height:100,
    hoverrows:false,
    viewrecords:true,
    caption:"&nbsp;",cellEdit: true,rowNum:10000,
    scroll:1,
    rowList:[30,100,500],
    datatype:"json",
    url:"grid.php?sec=Agility&fn=gcSandFInput_V1",
    cellurl:"grid.php?sec=Agility&fn=gcSandFInput_V1",
    editurl:"grid.php?sec=Agility&fn=gcSandFInput_V1",
    sortname:"default",
    autowidth:true,
    shrinkToFit:true,
    gridview:false,
    pager:"#gridListPager",
    postData:{oper:"grid"},
    jsonReader:{repeatitems:false,root: "rows",page: "page",total: "total",records: "records",repeatitems: true,cell: "cell",id: "id",userdata: "userdata"},
    colModel:[
    {name:" ",index:"nope",align:"left",search:true,editable:false,width:60},{name:"04-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"05-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"06-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"07-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"08-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"09-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"10-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"11-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"12-2012",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"01-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"02-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"03-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"04-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"05-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"06-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"07-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"08-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"09-2013",index:"nope",align:"left",search:true,editable:false,width:60 },{name:"10-2013",index:"nope",align:"left",search:true,editable:false,width:60 }]})
    jQuery('#gridList').jqGrid('navGrid','#gridListPager',{refresh:true,edit:false,add:false,del:false,search:true,view:false,"excel":true,"pdf":false,"csv":false,"columns":false},{"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150,"errorTextFormat":function(r){ return r.responseText;}},{"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150,"errorTextFormat":function(r){ return r.responseText;}},{"errorTextFormat":function(r){ return r.responseText;}},  {"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150,"closeAfterSearch":true,"multipleSearch":false},{"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150},{"drag":true,"resize":true,"closeOnEscape":true,"dataheight":150});

    };
    </script>
    <script type="text/javascript" language="javascript">runOnLoad(LoadgridList);</script>
<div id="gridListWrapper">
    <table id="gridList"></table> <div id="gridListPager"></div>
    <div class="gridListFooter"></div>
</div>
</div> 
```

# sql-server - 休眠：不同数据库上的相同代码

> ID：15529685
> 
> 赞同：0
> 
> 时间：2013-03-20T16:48:00.967
> 
> 标签：sql-server, oracle, hibernate

我已经用休眠完成了我的第一个小“hello world”，在我的 SQLServer 数据库中插入了一些数据。现在我正在尝试在不更改域类上的注释的情况下切换 db，但我遇到了问题。我尝试使用一种行为来处理 db 上的 id，使用 sql server 上的标识列和 oracle 上带有触发器的序列（我想对 postgres 做同样的事情），所以我声明在我的课上

```
@Id
@Column(name = "ID")
@GeneratedValue(strategy=GenerationType.AUTO)
public long getId() {
    return this.id;
} 
```

这在 SQLServer 上运行良好，但它在 Oracle 上给了我这个错误：

```
[main] ERROR org.hibernate.util.JDBCExceptionReporter - ORA-02289: sequence does not exist

org.hibernate.exception.SQLGrammarException: could not get next sequence value
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
at org.hibernate.id.SequenceGenerator.generateHolder(SequenceGenerator.java:132)
at org.hibernate.id.SequenceGenerator.generate(SequenceGenerator.java:105)
at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:121)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195)
at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:713)
at org.hibernate.impl.SessionImpl.save(SessionImpl.java:701)
at org.hibernate.impl.SessionImpl.save(SessionImpl.java:697)
at test.Main.main(Main.java:23)
Caused by: java.sql.SQLSyntaxErrorException: ORA-02289: sequence does not exist

at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:91)
at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:133)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:206)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:455)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:413)
at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:1034)
at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:194)
at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:791)
at oracle.jdbc.driver.T4CPreparedStatement.executeMaybeDescribe(T4CPreparedStatement.java:866)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1186)
at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3387)
at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3431)
at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1491)
at org.hibernate.id.SequenceGenerator.generateHolder(SequenceGenerator.java:112)
... 11 more 
```

请注意，同样使用 strategy=GenerationType.SEQUENCE 我得到了同样的错误

我想知道：有什么办法可以做我正在尝试的事情吗？

* * *

抱歉，我发布了错误的 stackTrace，正确的是：

```
[main] ERROR org.hibernate.util.JDBCExceptionReporter - ORA-02289: sequence does not exist

org.hibernate.exception.SQLGrammarException: could not get next sequence value
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
at org.hibernate.id.SequenceGenerator.generateHolder(SequenceGenerator.java:132)
at org.hibernate.id.SequenceGenerator.generate(SequenceGenerator.java:105)
at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:121)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195)
at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50)
at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:713)
at org.hibernate.impl.SessionImpl.save(SessionImpl.java:701)
at org.hibernate.impl.SessionImpl.save(SessionImpl.java:697)
at test.Main.main(Main.java:23)
Caused by: java.sql.SQLSyntaxErrorException: ORA-02289: sequence does not exist

at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:91)
at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:133)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:206)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:455)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:413)
at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:1034)
at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:194)
at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:791)
at oracle.jdbc.driver.T4CPreparedStatement.executeMaybeDescribe(T4CPreparedStatement.java:866)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1186)
at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3387)
at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3431)
at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1491)
at org.hibernate.id.SequenceGenerator.generateHolder(SequenceGenerator.java:112)
... 11 more 
```

请注意，同样使用 strategy=GenerationType.SEQUENCE 我得到了同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:59:58.907

奇怪的是，`IDENTITY`当您使用`AUTO`. 尝试使用`SEQUENCE`Oracle9i 的生成。[这是 JBoss 文档中给出的示例](https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Web_Platform/5/html/Hibernate_Annotations_Reference_Guide/entity-mapping-identifier.html)。

```
@Entity
@javax.persistence.SequenceGenerator(
    name="SEQ_STORE",
    sequenceName="my_sequence"
)
public class Store implements Serializable {
    private Long id;

    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="SEQ_STORE")
    public Long getId() { return id; }
} 
```

[查看此页面以获取不同数据库方言支持的生成类型的记录列表。](http://www.nightprogrammer.org/development/hibernate-generationtype-auto-dialect-default-overview/)

# c# - 管理大量相同类型字段的优雅方式

> ID：15529692
> 
> 赞同：0
> 
> 时间：2013-03-20T16:48:24.643
> 
> 标签：c#, .net, list, collections, dictionary

我有一个包含很多列表的类：

```
private List<MyClass> m_List1;
private List<MyClass> m_List2;
private List<MyClass> m_List3;
private List<MyClass> m_List4;
...
private List<MyClass> m_ListN; 
```

一切都很好，但是代码在某种程度上变得难以阅读和编写......尤其是当我需要在需要时实例化这些列表或将它们全部清除时。

你能建议我一个好的和优雅的解决方案来更好地管理它们吗？我正在考虑一个`Dictionary<String, List<MyClass>>`可以充当我所有列表的一种“包装器”，或者更好的是，一个具有内部`Dictionary<String, List<MyClass>>`公开方法的类`ClearAll()`，例如......在这种情况下，我应该如何处理列表替换、清理、处置等？假设我的包装器中有以下代码......

```
public void Assign(String key, List<MyClass> value)
{
    m_InternalDictionary[key] = value;
} 
```

如果该键上已经存在另一个列表，我应该在用另一个替换它之前清除它吗？

还有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:50:05.860

有什么理由需要单独的列表吗？为什么不在您的班级中有一个成员是列表列表？

```
private List<List<MyClass>> myClasses { get; set; } 
```

# elasticsearch - 在 elasticsearch 的脚本查询中访问 _id 或 _parent 字段

> ID：15529701
> 
> 赞同：1
> 
> 时间：2013-03-20T16:48:46.320
> 
> 标签：elasticsearch

使用脚本编写搜索查询时，我可以使用“doc['myfield']”访问字段

```
curl -XPOST 'http://localhost:9200/index1/type1/_search' -d '
{
  "query": {
    "filtered": {
      "query": {
        "match_all": {}
      },
      "filter": {
        "script": {
          "script": "doc[\"myfield\"].value>0",
          "params": {},
          "lang":"python"
        }
      }
    }
  }
}' 
```

如何访问 _id 或 _parent 字段？

“ctx”对象在搜索查询中似乎不可用（虽然它可以在更新 API 请求中访问，为什么？）。

请注意，我使用的是 python 语言而不是 mvel，但它们都提出了相同的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T03:44:32.640

默认情况下，文档 ID 和父 ID 都以 uid 格式进行索引：`type#id`. Elasticsearch 提供了[一些](https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/elasticsearch/index/mapper/Uid.java#L96)可用于从 uid 字符串中提取类型和 id 的方法。以下是在 MVEL 中使用这些方法的示例：

```
curl -XDELETE localhost:9200/test
curl -XPUT localhost:9200/test -d '{
    "settings": {
        "index.number_of_shards": 1,
        "index.number_of_replicas": 0
    },
    "mappings": {
        "doc": {
            "properties": {
                "name": {
                    "type": "string"
                }
            }
        },
        "child_doc": {
            "_parent": {
                "type": "doc"
            },
            "properties": {
                "name": {
                    "type": "string"
                }
            }
        }
    }
}'
curl -XPUT "localhost:9200/test/doc/1" -d '{"name": "doc 1"}'
curl -XPUT "localhost:9200/test/child_doc/1-1?parent=1" -d '{"name": "child 1-1 of doc 1"}'
curl -XPOST "localhost:9200/test/_refresh"
echo
curl "localhost:9200/test/child_doc/_search?pretty=true" -d '{
    "script_fields": {
        "uid_in_script": {
            "script": "doc[\"_uid\"].value"
        },
        "id_in_script": {
            "script": "org.elasticsearch.index.mapper.Uid.idFromUid(doc[\"_uid\"].value)"
        },
        "parent_uid_in_script": {
            "script": "doc[\"_parent\"].value"
        },
        "parent_id_in_script": {
            "script": "org.elasticsearch.index.mapper.Uid.idFromUid(doc[\"_parent\"].value)"
        },
        "parent_type_in_script": {
            "script": "org.elasticsearch.index.mapper.Uid.typeFromUid(doc[\"_parent\"].value)"
        }
    }
}'
echo 
```

# jquery - Colorbox - 在颜色框内容中删除自定义 iframe 时防止父页面重新加载？

> ID：15529702
> 
> 赞同：1
> 
> 时间：2013-03-20T16:48:52.187
> 
> 标签：jquery, iframe, append, colorbox

Colorbox 提供了将 iframe 作为其内容加载的特定方法，当这种颜色框弹出窗口关闭时，父页面根本不会重新加载或刷新。

但是，在我的用例中，我需要在打开的颜色框内附加/添加自定义 iframe 元素，而不交换颜色框内容。已经打开的颜色框内容纯粹是内联 HTML - 不存在任何 iframe。这个新的自定义 iframe 的内容是一个 ajaxified 评论表单，只有在作为自己的页面加载时才有效 - 或者在完全限定的 iframe 元素中。

`iframe`当单击颜色框内容中的链接时，我的函数会添加以下内容：

```
$('#cboxLoadedContent').append('<IFRAME frameborder="0" src="'+url+'" id="loadednode">'); 
```

现在我可以让它工作没有问题 -`IFRAME`被插入并对其内容进行正常加载过程并完美显示所有内容。

唯一的问题是，一旦我通过使用关闭按钮或单击覆盖单击此加载的颜色框的“退出”，*与退出颜色框原生 iframe 内容不同*，父/首页突然重新加载！

我该如何防止这种情况发生？是什么让 colorbox-native iframe 在删除时避免页面刷新，但我添加到 colorbox 内容的 iframe 会导致父页面在删除时重新加载？

作为参考，我可以将作为 iframe 内容的页面加载为 colorbox-native iframe，退出时不会导致页面重新加载，因此无论哪种情况，问题都不在于 iframe 的内容 - 它必须be in the way colorbox 删除了 colorbox 处理的 iframe 与非 colorbox 处理的 iframe。

一些猜测：

*   没有“name”属性或没有固定的“id”属性会导致问题吗？
*   如果 iframe 包含在没有“src”属性的初始内联 HTML 中，但是在单击时它会获得“src”路径，这会避免这些问题吗？
*   有没有另一种说法“在我正在查看的颜色框中加载这个 iframe 而不会删除已经存在的 HTML 内容”？

我正在使用（旧版本，因为 Drupal 6 与新版本不兼容）：

*   jQuery 1.3.2
*   彩盒 v1.3.18.1 ( [http://www.jacklmoore.com/colorbox/](http://www.jacklmoore.com/colorbox/) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:44:35.817

解决了：

使用 colorbox 打开的初始内容是内联 HTML - 使用 colorbox 的“内联”命令（将内容从隐藏容器移动到 colorbox 内容中）。当具有此类内容的彩盒关闭时，彩盒的正常行为是将其移回其原始位置（这是一个`display: none`div 容器）——**连同我手动添加到彩盒的所有 HTML**。

因此，当我在插入新的 HTML 后关闭颜色框时，颜色框将所有这些内容移回页面上的隐藏容器。当您移动 iframe 时，它​​自然会重新加载其内容。（摸额头）。

因此，实际的解决方案只涉及在 colorbox 继续并将其 HTML 内容返回到其原始位置之前强制删除（）任何一开始不存在的 iframe：

```
$(document).bind('cbox_cleanup', function(){
    $('iframe').remove(); // Remove all iframes, or else colorbox inline moves them to original location with HTML content, triggering another load on it
    console.log('Done killing iFrame... moving contents back.'); 
```

我敢肯定，用例晦涩难懂，但希望它可以帮助那里的人混合 iframe 和内联颜色框内容；）

# mysql - 根据另一个表的数据获取一列的总和

> ID：15529708
> 
> 赞同：0
> 
> 时间：2013-03-20T16:49:03.977
> 
> 标签：mysql

所以基本上，我有 2 个表，我需要得到一列的总和。但是我需要选择的行在另一个表中有标准。我想出了这个查询，但它总是返回空值。

```
SELECT sum( secondary_lpt.loan_amount )
FROM secondary_lpt
LEFT JOIN loan_log ON loan_log.loan_guid = secondary_lpt.loan_guid
WHERE (
    secondary_lpt.lock_Date
    BETWEEN date( '2013-02-19 15:25:55' )
    AND date( '2013-04-19 15:25:55' )
)
AND (
    loan_log.loan_ms_funding = NULL
    OR loan_log.loan_ms_funding = ''
)
AND (
    loan_log.loan_transdetail = 'Active Loan'
) 
```

我很难说出我想说的话，所以我想这可能是问题的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:05:11.603

如果在 where 子句中使用了 left join 子句中 table 的字段，它通常用作内连接（它希望列有值）。所以将你的 where 子句移到 ON 子句

# gnuplot - gnuplot - 我怎样才能滞后一个系列？

> ID：15529710
> 
> 赞同：0
> 
> 时间：2013-03-20T16:49:08.660
> 
> 标签：gnuplot, lag

我在一个文件中有 2 个系列，我希望滞后一个以便我可以做一个散点图？

最好，我想在如下函数中执行此操作：

```
f(x,y) = x*(y-previous(y)) 
```

有没有办法做到这一点？

甚至

```
plot "mydata.txt" u 3:(lagged($3)) 
```

有助于

```
Welcome to the XWin X Server 
Vendor: The Cygwin/X Project 
Release: 1.13.3.0 
OS: CYGWIN_NT-6.1-WOW64 LskyHome2 1.7.17(0.262/5/3) 2012-10-19 14:39 i686 
OS: Windows 7 Service Pack 1 [Windows NT 6.1 build 7601] (WoW64) 
Package: version 1.13.3-1 built 2013-03-09 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:19:22.820

您可以定义一个函数：

```
lag(x) = ($0 == 0) ? (val1 = x, 0) : (val2 = val1, val1 = x, val1-val2) 
```

这将返回每个点与前一个点之间的差异，如果是第一个数据点则返回 0。 `$0`是行号伪列；如果从绘图命令中调用函数，则可以查看数据文件中的列。

你可以像这样使用它

```
plot 'mydata.txt' u 3:(lag($3)) 
```

# javascript - 如何使所有图层画布居中？

> ID：15529713
> 
> 赞同：0
> 
> 时间：2013-03-20T16:49:18.870
> 
> 标签：javascript, css, html

我想查看所有图层 黄色方块的确切位置和大小

我想将所有图层定位到中心宽度和`top;10px;`黄色矩形内。所有图层包括 layerA 应该是`width:1000px height:500px`

我试图在很多方面做到这一点，但有些超出我的理解。

我知道可以做到，但在我的代码中出现了错误。

我很感激任何帮助。

[演示 jsFiddle](http://jsfiddle.net/zSaQm/3/show/)

我的代码：

```
<!DOCTYPE HTML>
<html>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title> - jsFiddle demo</title>
<style type='text/css'>
 body   {background-color:black; padding:0; margin:0;                                             }
#layers {position:relative; width:1000px; height:500px; padding:0; margin-left:auto; margin-right:auto; z-index:1; top:10px; background-color:blue; }//contain all layers
#layerA {position:absolute; width:1000px; height:500px; padding:0; margin:0; z-index:4; background-color:green; border:1px green solid; left:0; top:0;}//background screen show
#layerB {position:absolute; width:1000px; height:500px; padding:0; margin:0; z-index:2; background-color:red; border:1px red solid; visibility:hidden; }//Variable animation hidden
#layerC {position:absolute; width:1000px; height:500px; padding:0; margin:0; z-index:3; background-color:brown; border:1px brown solid; display:none; }//Variable animation hidden
#layerD {position:absolute; width:1000px; height:500px; padding:0; margin:0; z-index:5; background-color:azure;   border:1px azure solid; }//create ball

#pos{top:50px; left:10px; color:white; font-size:16px;}
#status{position;absolute; top:10px; left:10px; color:white; font-size:16px;}
#status1{position;absolute; top:20px; left:10px; color:white; font-size:16px;}
#fps_count {position: absolute; top: 10px; right: 0px; width:150px; font-size: 20px;
            color: white; font-family: 'Happy Sans', cursive; border:1px red solid;}
/* Loading */
#loading {position:relative; width:1000px; height:500px; padding:0; margin-left:auto; margin-right:auto; top:10px; background:yellow; z-index:1;}
#loading #barCont {width: 400px; height: 20px; position: absolute;
                   top: 50%; left: 50%; margin: -10px 0 0 -200px; background: black;}
#loading #bar {width: 0; height: 20px; position: absolute; left: 0; background: #F3FF67;}
</style>
</head>
<body>
<div id="loading">
  <p id="loadText">Loading...</p>
  <div id="barCont"></div>
  <div id="bar"></div>
</div>

<div id="layers">
    <canvas id="layerA" ></canvas>
    <canvas id="layerB" ></canvas>
    <canvas id="layerC" ></canvas>
    <canvas id="layerD" ></canvas>
</div>

<div id="fps_count">71 32 58 FPS</div>
<div id="pos">pos</div>
<div id="status">status</div>
<div id="status1">status1</div>
<script>
var WW = 1400,WH = 700,WTH = 1000,HTH = 500;

var layerA        = document.getElementById('layerA'),//layer background
    CanvasA       = layerA.getContext('2d');
    layerA.width  = 300;//width size of image background
    layerA.height = 150;//height size of image background

var layerB        = document.getElementById('layerB'),//senvich animation hidden
    CanvasB       = layerB.getContext('2d');
    layerB.width  = WW;
    layerB.height = WH; 

var layerC        = document.getElementById('layerC'),//DEFINE layerBVariable it use as a variable
    CanvasC       = layerC.getContext('2d');
    layerC.width  = WW;
    layerC.height = WH;

var layerD        = document.getElementById("layerD"),//createball
    CanvasD       = layerD.getContext('2d');    
    layerD.width  = WW;
    layerD.height = WH;

    CanvasA.clearRect(0,0,300,150);
    CanvasA.fillStyle= 'green';
    CanvasA.fillRect(0,0,300,150);

    CanvasB.clearRect(0,0,WW,WH);
    CanvasB.fillStyle= 'red';
    CanvasB.fillRect(0,0,WW,WH);

    CanvasC.clearRect(0,0,WW,WH);
    CanvasC.fillStyle= 'brown';
    CanvasC.fillRect(0,0,WW,WH);

    CanvasD.clearRect(0,0,WW,WH);
    CanvasD.fillStyle= 'azure';
    CanvasD.fillRect(0,0,WW,WH);        
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:08:36.363

看看这个[jsFiddle 例子](http://jsfiddle.net/opherv/AeYhR/)

首先，`// comment`不是 CSS 中的有效注释语法。这弄乱了你的代码。请`/* comments */`用于 CSS 内联评论。

*其次，为了按照我*的要求定位你的画布元素，我已经包含了这个 CSSc 代码：

```
#layers {position:absolute; width:1000px; height:500px; padding:0; margin-left: -500px; left: 50%; z-index:1; top:10px; background-color:blue; }/*contain all layers*/
#layers canvas{width: 200px;} #layerA {position:absolute; width:1000px; height:500px; top: 0px; left: 0px; padding:0; margin:0; z-index:4; background-color:green; border:1px gre solid; left:0; top:0;}/*background screen show*/
#layerB {position:absolute; width:1000px; height:500px; top: 0px; left: 0px;  padding:0; margin:0; z-index:2; background-color:red; border:1px red solid; visibility:hidden; }/*Variable animation hidden*/
#layerC {position:absolute; width:1000px; height:500px; top: 0px; left: 0px;  padding:0; margin:0; z-index:3; background-color:brown; border:1px brown solid; display:none; }/*Variable animation hidden*/
#layerD {position:absolute; width:1000px; height:500px; top: 0px; left: 0px;  padding:0; margin:0; z-index:5; background-color:azure;   border:1px azure solid; }/*create ball*/ 
```

为了使 1000px 宽的绝对定位元素居中，我添加了`left: 50%; margin-left: -500px`. 这实际上告诉浏览器将元素的最左边缘放置在其容器（在本例中为文档正文）的 50% 处，然后将其向左移动其宽度的一半（以像素为单位）。这使它可以正确定位在中心

仅供参考 - 我**强烈**建议您在这里使用类而不是 ID，以避免重复、不可读的 CSS 代码。

# jquery - 使用带有单选列表过滤器的 jQuery fadeIn/fadeOut，但淡入淡出重复两次而不是一次

> ID：15529716
> 
> 赞同：1
> 
> 时间：2013-03-20T16:49:22.417
> 
> 标签：jquery

我正在制作一个包含游戏列表的页面。我添加了按类型过滤游戏的单选按钮。当用户单击类型过滤器时，我正在使用 jQuery 优雅地淡入淡出游戏列表。

问题是每次单击单选按钮时，游戏列表都会尴尬地淡入淡出两次。见：http: [//jsfiddle.net/animeguy99/pZKda/1/](http://jsfiddle.net/animeguy99/pZKda/1/)

这是我正在使用的脚本：

```
$('input[name$="group1"]').click(function(){
    var radio_value = $(this).val();    
    if(radio_value=='Adventure') {
      $('#games div').fadeOut('slow', function(){
            $('#games .adv').fadeIn();
      });
    }
    else if(radio_value=='Puzzle') {
      $('#games div').fadeOut('slow', function(){
            $('#games .puz').fadeIn();
      });
    }
    else if(radio_value=='Shooter') {
      $('#games div').fadeOut('slow', function(){
            $('#games .sho').fadeIn();
      });
    }
    else if(radio_value=='All') {
      $('#games div').fadeOut('slow', function(){
            $('#games div').fadeIn();
      });
    }
}); 
```

我有 DIV 类声明的流派类型。因此，每次用户单击收音机时，我都会淡出所有 DIV（游戏），然后按 DIV 类淡入请求的类型。

当我四处搜索时，类似的案例表明这可能是父母/孩子的问题。但我很困惑如何将它与我的脚本联系起来。

我在看什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:06:03.600

当有多个元素被淡化时，回调函数`.fadeOut()`并不会像您期望的那样工作。`.fadeIn()`回调不仅被调用一次，而且对*每个元素都*被调用。

如果您`console.log()`在其中一个`.fadeOut()`回调中调用，您会看到它被记录了多次。（Chrome 开发者工具将其折叠成一个日志条目，左侧有一个数字。）

[http://jqapi.com/#p=fadeOut](http://jqapi.com/#p=fadeOut)

> ### 回调函数
> 
> 如果提供，则在动画完成后触发回调。这对于将不同的动画按顺序串在一起很有用。回调没有发送任何参数，但它被设置为动画的 DOM 元素。如果为多个元素设置了动画，请务必注意，每个匹配的元素都会执行一次回调，而不是对整个动画执行一次。
> 
> 从 jQuery 1.6 开始，.promise() 方法可以与 deferred.done() 方法结合使用，以便在所有匹配元素都完成动画时对整个动画执行单个回调（参见 .promise 示例())。

这是`.promise()`用于删除重复回调的代码版本。它还结合了 j08691 的建议，即从 fadeOut 中排除您将要淡入的元素：

```
var groups = {
    Adventure: '.adv',
    Puzzle: '.puz',
    Shooter: '.sho',
    All: 'div'
};

function fade( group ) {
    $('#games div')
        .not(group)
        .fadeOut()
        .promise()
        .done( function() {
            console.log( group );
            $('#games ' + group).fadeIn();
        });
}

$('input[name$="group1"]').click(function () {
    fade( groups[ $(this).val() ] );
}); 
```

通过将重复的代码合并到一个函数中，此代码也大大简化了原始代码。最后，我离开了 console.log() 来查看正在进行的调用。

还有一些关于 HTML 的评论：除非您正在编写 XHTML，否则您不需要使用`<br />`，我希望您没有这样做。`<br>`很好。更重要的是，您应该`<label>`在单选按钮标签上使用标签，以便整个标签都是可点击的：

```
<label><input type="radio" name="group1" value="All" checked>Show All</label><br>
<label><input type="radio" name="group1" value="Adventure">Adventure</label><br>
<label><input type="radio" name="group1" value="Puzzle">Puzzle</label><br>
<label><input type="radio" name="group1" value="Shooter">Shooter</label> 
```

这是一个[更新的 jsfiddle](http://jsfiddle.net/GAGNX/1/)。

这里还有其他简化的机会。单选按钮中的属性是否要求`value`为特定字符串“All”、“Adventure”等？如果没有，您可以简单地将组选择器直接放在`value`属性中：

```
<label><input type="radio" name="group1" value="div" checked>Show All</label><br>
<label><input type="radio" name="group1" value=".adv">Adventure</label><br>
<label><input type="radio" name="group1" value=".puz">Puzzle</label><br>
<label><input type="radio" name="group1" value=".sho">Shooter</label> 
```

然后将 JavaScript 代码简化为：

```
function fade( group ) {
    $('#games div')
        .not(group)
        .fadeOut()
        .promise()
        .done( function() {
            console.log( group );
            $('#games ' + group).fadeIn();
        });
}

$('input[name$="group1"]').click(function () {
    fade( $(this).val() );
}); 
```

[最新的 jsfiddle](http://jsfiddle.net/GAGNX/3/)

另一个更新...正如 Alex 在评论中指出的那样，当您在 Show All 和特定类型之间来回单击时，此版本的代码会导致块跳来跳去。

这是由代码中的这一行引起的：

```
 .not(group) 
```

删除该行可以提供更平滑的过渡，如[更新后的 jsfiddle](http://jsfiddle.net/GAGNX/4/)所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:06:45.023

试试这个小提琴。问题在于您的 jQuery Selector `$('#games div')`。您的选择指向多个 DOM 元素。所以它将`fadeOut()`为范围内的每个元素运行，然后在每个元素的回调中运行`fadeIn()`。添加一个额外的选择器将确保它只运行一次。

```
$('#games div').filter(":visible") 
```

添加`.filter(":visible")`限制将确保只有那些可见的应该淡出（如果不使用过滤器，而不是选择的任何元素被隐藏，它将`fadeIn()`立即触发）。它还将确保`fadeIn()`仅在选择中所有可见的元素现在都隐藏后才运行。

[jsfiddle](http://jsfiddle.net/pZKda/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:57:31.730

你需要先排除这组元素淡出（通过类似的东西`.not('.puz')`），否则 jQuery 会先让它们再次可见，然后再淡出。试试这个（为清楚起见添加了延迟）：

```
$('input[name$="group1"]').click(function () {
    var radio_value = $(this).val();
    if (radio_value == 'Adventure') {
        $('#games div').not('.adv').fadeOut(3000,function () {
            $('#games .adv').fadeIn(3000);
        });
    } else if (radio_value == 'Puzzle') {
        $('#games div').not('.puz').fadeOut(3000,function () {
            $('#games .puz').fadeIn(3000);
        });
    } else if (radio_value == 'Shooter') {
        $('#games div').not('.sho').fadeOut(3000,function () {
            $('#games .sho').fadeIn(3000);
        });
    } else if (radio_value == 'All') {
        $('#games div').fadeOut(3000, function () {
            $('#games div').fadeIn(3000);
        });
    }
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/pZKda/5/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:21:52.710

问题是，当您在几个元素上调用 fadeOut 时，它会被调用多次。并且触发淡入的回调被调用相同的次数。你不需要那个。只有在所有的淡出完成后，您才需要开始调用淡入。

其中一种方法是使用 $.when .. $ done 序列：

```
$.when(
   $('#games div').fadeOut('slow');

).done(function() {
   $('#games .adv').fadeIn();
}); 
```

[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)
[http://api.jquery.com/deferred.done/](http://api.jquery.com/deferred.done/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T23:29:55.083

如果您使用 html5 数据类型属性，则很简单。结帐`[jsfiddle](http://jsfiddle.net/sanman/SUEC8/)`。

# scala - Scala 集合上的高效分组聚合

> ID：15529726
> 
> 赞同：5
> 
> 时间：2013-03-20T16:49:39.327
> 
> 标签：scala, scala-collections

我经常需要做类似的事情

```
coll.groupBy(f(_)).mapValues(_.foldLeft(x)(g(_,_))) 
```

实现相同效果的最佳方法是什么，但要避免使用 显式构造中间集合`groupBy`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:10:03.717

您可以将初始集合折叠在包含中间结果的地图上：

```
def groupFold[A,B,X](as: Iterable[A], f: A => B, init: X, g: (X,A) => X): Map[B,X] = 
  as.foldLeft(Map[B,X]().withDefaultValue(init)){
    case (m,a) => {
      val key = f(a)
      m.updated(key, g(m(key),a))
    }
  } 
```

你说收藏，我写`Iterable`，但你必须考虑在你的问题中顺序是否重要。

如果您想要高效的代码，您可能会使用 Rex 的答案中的可变映射。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T17:12:15.660

您不能真正将其作为单行符来完成，因此在编写像这样更详细的内容之前，您应该确保需要它（因为您要求“高效”，所以从某种注重性能的角度编写）：

```
final case class Var[A](var value: A) { }
def multifold[A,B,C](xs: Traversable[A])(f: A => B)(zero: C)(g: (C,A) => C) = {
  import scala.collection.JavaConverters._
  val m = new java.util.HashMap[B, Var[C]]
  xs.foreach{ x =>
    val v = { 
      val fx = f(x)
      val op = m.get(fx)
      if (op != null) op
      else { val nv = Var(zero); m.put(fx, nv); nv }
    }
    v.value = g(v.value, x)
  }
  m.asScala.mapValues(_.value)
} 
```

（根据您的用例，您可能希望在最后一步中打包到不可变映射中。）这是一个实际操作示例：

```
scala> multifold(List("salmon","herring","haddock"))(_(0))(0)(_ + _.length)
res1: scala.collection.mutable.HashMap[Char,Int] = Map(h -> 14, s -> 6) 
```

现在，您可能会注意到这里有些奇怪：我使用的是 Java HashMap。这是因为 Java 的 HashMap 比 Scala 快 2-3 倍。（您可以使用 Scala HashMap 编写等效的东西，但它实际上并没有使事情比您原来的更快。）因此，此操作比您发布的快 2-3 倍。但是，除非您承受着严重的内存压力，否则创建瞬态集合实际上并不会对您造成太大伤害。

# objective-c - 如何在 App 启动期间提高 iOS 设备上的 http 请求性能？

> ID：15529731
> 
> 赞同：1
> 
> 时间：2013-03-20T16:49:44.507
> 
> 标签：objective-c, time, request, afnetworking

我有一个 iOS 应用程序，最初需要在应用程序启动后（在 appdelegate 调用第一个视图之后）加载很多东西（JSON 数据、图像 ...）。目前我正在为我的请求（异步请求）使用 AFNetworking。

我所经历的是在第一个请求（3G 连接 - iPhone 4）本身真正开始之前有很大的延迟。我测量了从操作开始到加载第一个比特的时间，并检查了服务器的响应时间。应用程序甚至开始接收第一个字节之前需要 2.5 到 4 秒，服务器说构建时间约为 0.03 秒。我认为这是一个很大的延迟，即使他可能必须先建立 3G 连接。

我还使用其他服务器、方法（同步/异步）、AFNetworing 和简单的 NSURLRequest 对此进行了测试，它始终是第一个需要大量时间的请求。

所以我的问题是，有没有其他人经历过这种情况，有没有办法加速这种情况？

# objective-c - NSRangeException 错误... NSDictionary、NSArray、UISearchBar

> ID：15529742
> 
> 赞同：0
> 
> 时间：2013-03-20T16:50:09.293
> 
> 标签：objective-c, nsarray, nsdictionary, nsrangeexception

我对Objective C很陌生，我遇到了一段时间的麻烦，我一直在寻找答案，观看教程，但我一直无法找到解决问题的方法。也许它就在我面前而我没有看到它......我认为它与我的 UISearch Bar 的 NSRange 有关。但我不是 100% 确定。

我正在尝试搜索具有我的国家/地区字典键的数组，我已经设置了几个 NSLog，我看到这些键正在进入我设置的数组以保存它们，然后我得到下面的错误.. .

因此，据我了解，它计算的是有 5 个的 countryKeys，所以索引 4 应该存在，不是吗？但随后它显示 0 .. 3，所以我这就是为什么我认为我使用 NSRange 不正确。到目前为止，我已经观看了一些 UISearchBar 和 For 循环教程，并且我对 For 循环和它们的理解更好，我想我需要弄清楚 NSRange。

如果您不了解我的思维过程或我提到的任何内容，请告诉我。

```
 Filtered Countries (
        ATE,
        ARE,
        USA,
        JAP,
        CAN
    )
    *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 4 beyond bounds [0 .. 3]' 
```

-

```
#import "ViewController.h"
@interface ViewController ()
@end

@implementation ViewController

@synthesize dictTableView, mySearchBar, countriesInRegion, filteredCountries, isFiltered, regionCodes, countryKey, countryKeys, countryInfo, sortedKeysArray, regionCode, dict1;

- (void)viewDidLoad
{
    [super viewDidLoad];

    dict1 = [[NSMutableDictionary alloc] init];
    NSMutableDictionary *subDict = [[NSMutableDictionary alloc] initWithObjects:[NSArray arrayWithObjects:@"United States",@"US",@"USA", @"NAC", nil]
                                                                        forKeys: [NSArray arrayWithObjects:@"countryName", @"countryAbbrev", @"countryID", @"countryRegion", nil]];
    [dict1 setObject:subDict forKey:@"USA"];

    subDict = [[NSMutableDictionary alloc] initWithObjects:[NSArray arrayWithObjects:@"Canada", @"CA", @"CAN", @"NAC", nil]
                                                   forKeys: [NSArray arrayWithObjects:@"countryName", @"countryAbbrev", @"countryID", @"countryRegion", nil]];
    [dict1 setObject:subDict  forKey:@"CAN"];

    subDict = [[NSMutableDictionary alloc] initWithObjects:[NSArray arrayWithObjects:@"Japan", @"JP", @"JAP", @"EAS", nil]
                                                   forKeys: [NSArray arrayWithObjects:@"countryName", @"countryAbbrev", @"countryID", @"countryRegion", nil]];
    [dict1 setObject:subDict forKey:@"JAP"];

    subDict = [[NSMutableDictionary alloc] initWithObjects:[NSArray arrayWithObjects:@"United Arab Emirates", @"AE", @"ARE", @"MEA", nil]
                                                   forKeys: [NSArray arrayWithObjects:@"countryName", @"countryAbbrev", @"countryID", @"countryRegion", nil]];
    [dict1 setObject:subDict forKey:@"ARE"];

    subDict = [[NSMutableDictionary alloc] initWithObjects:[NSArray arrayWithObjects:@"Antigua and Barbuda", @"AG", @"ATE", @"LCN", nil]
                                                   forKeys: [NSArray arrayWithObjects:@"countryName", @"countryAbbrev", @"countryID", @"countryRegion", nil]];
    [dict1 setObject:subDict forKey:@"ATE"];

    regionCodes = [[NSMutableDictionary alloc] init];

    countryKeys = [dict1 allKeys];
    NSLog(@"countryKeys %@", countryKeys);

    sortedKeysArray = [countryKeys sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];

    for (int i = 0; i < [sortedKeysArray count]; i++) {
        countryKey = [sortedKeysArray objectAtIndex:i];
        countryInfo = [dict1 objectForKey:countryKey]; // NSLog(@"returning countryKey to countryInfo %@", countryInfo);
        regionCode = [countryInfo objectForKey:@"countryRegion"]; // NSLog(@" adding countryRegion Key to regionCode %@", regionCode);
        //  NSLog(@"the contents of countryInfo is %@", countryInfo);

        if (![regionCodes objectForKey:regionCode]) {
            countriesInRegion = [[NSMutableArray alloc] init];
            [regionCodes setObject:countriesInRegion forKey:regionCode];

            [countriesInRegion addObject:countryInfo]; // NSLog(@"if adding countryInfo to initialCountries %@", countryInfo);

        }
        else{
            countriesInRegion = [regionCodes objectForKey:regionCode];
            [countriesInRegion addObject:countryInfo]; // NSLog(@"else adding countryInfo to initialCountries %@", countryInfo);
        }
    }

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if (isFiltered == NO)
    {
        return countryInfo.count;
    }
    else
    {
        return filteredCountries.count;
    }

}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section

{
    NSArray *sortKey = [regionCodes allKeys];
    sortedKeysArray = [sortKey sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
    return [sortedKeysArray objectAtIndex:section];

}

- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
{
    NSString *regionKey = [[regionCodes allKeys] objectAtIndex:section];
    countriesInRegion = [regionCodes objectForKey:regionKey];

    if (isFiltered == NO)
    {
        return countriesInRegion.count;
    }
    else
    {
        return filteredCountries.count;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    UITableViewCell *cell = nil;

    cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:@"Cell"];

        UILabel *countryNameLabel = [[UILabel alloc] initWithFrame:(CGRectMake(10, 0, 220, 44))];
        [countryNameLabel setBackgroundColor:[UIColor clearColor]];

        UILabel *countryAbbrevLabel = [[UILabel alloc] initWithFrame:(CGRectMake(230, 0, 75, 44))];
        [countryNameLabel setBackgroundColor:[UIColor clearColor]];

        UILabel *countryIDLabel = [[UILabel alloc] initWithFrame:(CGRectMake(275, 0, 50, 44))];
        [countryNameLabel setBackgroundColor:[UIColor clearColor]];

        [cell.contentView addSubview:countryNameLabel];
        [cell.contentView addSubview:countryAbbrevLabel];
        [cell.contentView addSubview:countryIDLabel];
    }
    NSArray *regionKeys = [regionCodes allKeys];
    NSString *regionKey = [regionKeys objectAtIndex:indexPath.section];
    countriesInRegion = [regionCodes objectForKey:regionKey];
    NSLog(@"Countries in Region %@", countriesInRegion);
    countryInfo = [countriesInRegion objectAtIndex:indexPath.row];

    NSArray *subviews = [cell.contentView subviews];
    UILabel *nameLabel = [subviews objectAtIndex:0];
    UILabel *abbrevLabel = [subviews objectAtIndex:1];
    UILabel *idLabel = [subviews objectAtIndex:2];
//    NSLog(@"6 - Countries in Region %@", countriesInRegion);

    if (isFiltered == NO)
    {
        nameLabel.text = [countryInfo objectForKey:@"countryName"];
        abbrevLabel.text = [countryInfo objectForKey:@"countryAbbrev"];
        idLabel.text = [countryInfo objectForKey:@"countryID"];
//        NSLog(@"5 - Our list of countries: %@", nameLabel.text);
//        NSLog(@"Country Info %@",countryInfo);

    }
    else
    {
        nameLabel.text = [filteredCountries objectAtIndex:2];
        abbrevLabel.text = [filteredCountries objectAtIndex:1];
        idLabel.text = [filteredCountries objectAtIndex:0];

        NSLog(@"4 - Here are your results: %@", filteredCountries);

    }
    return cell;
}

#pragma mark - UISearchBarDelegate Methods

- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{

    if (searchText.length == 0) {
        isFiltered = NO;

    }
    else
    {
        isFiltered = YES;
        NSLog(@"You entered %@", searchText);
        filteredCountries = [[NSMutableArray alloc] init];
        countryKeys = [dict1 allKeys];
        NSLog(@"countryKeys %@", countryKeys);

        for (int i = 0; i < countryKeys.count; i++) {
            countryKey = [countryKeys objectAtIndex:i];
            NSLog(@"country key is %@", countryKey);
            {
                NSRange countryNameRange = [countryKey rangeOfString:searchText options:NSCaseInsensitiveSearch];

                if (countryNameRange.location !=NSNotFound)
                {
                    [filteredCountries addObject:countryKey];

                    NSLog(@"Filtered Countries %@", filteredCountries);
                }
            }
        }

    }
    [dictTableView reloadData];
}

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [mySearchBar resignFirstResponder];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:01:58.853

该错误仅意味着您超出了数组的范围。

特别是乍一看，我认为您弄错了部分的数量，并且它与数组中的元素数量不匹配。

我注意到when `filtered`is equal to `YES`you are return `filteredCountries.count`for the number of rows and number of section。

它看起来不正确，我认为您应该仔细检查索引。

# ios - UICollectionView 无限滚动？

> ID：15529747
> 
> 赞同：6
> 
> 时间：2013-03-20T16:50:25.283
> 
> 标签：ios, uiscrollview, uipickerview, uicollectionview

我正在尝试实现具有无限滚动行为的集合视图。滚动应该是圆形的，就像`UIPickerView`. 可以用 Apple 完成`UICollectionView`还是别无选择，只能创建一个水平 PickerView ？

你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:16:04.397

您应该观看 WWDC 2011 会议视频“高级 ScrollView 技术”，他们谈论无限滚动，我很确定可以将它与`UICollectionView`s 一起使用。它在您滚动时居中，并将新项目放置在当前可见项目之后（或之前，取决于滚动方向）。

就像他们在会议中所说的那样，您不应该**使用**有结局的方法。正如会议中所说：人们肯定会在某一时刻找到优势。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T17:07:15.927

是的，你可以这样做。为 collectionView:numberOfItemsInSection: 返回一个非常大的数字，在 collectionView:cellForItemAtIndexPath: 中，您使用 mod 运算符始终为 indexPath.Row 返回一个介于 0 和数据数组中最后一个索引之间的数字。因此，如果您的数组中有 20 个项目，您将执行以下操作：

```
item.whatever.text = [self.theData objectAtIndex:indexPath.row %20]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-12T05:35:58.343

感谢 rdelmar 提供了一个棘手的解决方案。“collectionView:numberOfItemsInSection 的大量数字”的想法就像一个魅力。我试图用 UIScrollView 委托方法实现相同的功能。但输出很生涩。

这是我的代码的一部分。

```
-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {

return 100;} 
```

// 单元格换行

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

// Setup cell identifier
static NSString *cellIdentifier = @"cvCell";

CVCell *cell;
        cell = (CVCell *)[collectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];

        [cell.titleLabel setText:[self.dataArray objectAtIndex:(indexPath.row)%self.dataArray.count]];

return cell; 
```

}

// 选择

```
-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath{

NSLog(@"Index path is %d", indexPath.row%self.dataArray.count); 
```

}

这将产生无限滚动效果。要启用两侧无限滚动，请在 ViewWillAppear 中使用 ScrolltoIndexpath:(middle of Itemscount) ！希望这将帮助即将构建无限滚动 UICollectionView 的人。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-11-03T14:35:25.160

覆盖此方法以启用双向无限滚动。每当它离中心太远并且用户永远不会到达终点时，它就会使内容居中。

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView {
CGPoint currentOffset = self.collectionView.contentOffset;
CGFloat contentWidth = self.collectionView.contentSize.width;
CGFloat centerOffsetX = (contentWidth - self.collectionView.bounds.size.width) / 2.0;
CGFloat distanceFromCenter = fabs(currentOffset.x - centerOffsetX);

if (distanceFromCenter > (contentWidth / 4.0)) {
    self.collectionView.contentOffset = CGPointMake(centerOffsetX, currentOffset.y);
}

} 
```

# java - 使用java创建csv文件

> ID：15529749
> 
> 赞同：-3
> 
> 时间：2013-03-20T16:50:28.560
> 
> 标签：java, file, csv, file-io, createfile

我目前正在用 Java 创建一个 csv 文件。我有以下代码，但似乎不起作用。

```
String newFileName = "Temp" + fileName;
File newFile = new File(newFileName); 
```

我不知道还能做什么。我需要指定文件路径吗？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:52:26.810

[**java.io.File**](http://docs.oracle.com/javase/6/docs/api/java/io/File.html) 只是一个

> 文件和目录路径名的抽象表示。

您必须使用[**FileWriter**](http://download.oracle.com/javase/6/docs/api/java/io/FileWriter.html) / [**PrintWriter**](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html) / [**BufferedWriter**](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedWriter.html)在磁盘上创建一个实际的物理文件。

像这样排序：

```
String newFileName = "Temp" + fileName;
File newFile = new File(newFileName);
BufferedWriter writer = new BufferedWriter(new FileWriter(newFile)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T17:05:32.663

使用[commons-csv](http://commons.apache.org/proper/commons-csv/)写入数据。从[测试代码](http://svn.apache.org/repos/asf/commons/proper/csv/trunk/src/test/java/org/apache/commons/csv/CSVPrinterTest.java)：

```
 final FileWriter sw = new FileWriter("myfile.csv");
 final CSVPrinter printer = new CSVPrinter(sw, format);

 for (int i = 0; i < nLines; i++) {
     printer.printRecord(lines[i]);
 }

 printer.flush();
 printer.close(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T16:53:10.423

看看[基本 I/O 教程](http://docs.oracle.com/javase/tutorial/essential/io/)。特别注意缓冲流部分。

您无需指定文件的完整路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T16:53:30.943

创建`File`实例不会在文件系统上创建文件。你只是得到一个句柄或对它的引用。您必须将内容添加到文件并写入文件，以便文件实际写入您指定位置的磁盘。

阅读[阅读、写作和创建文件](http://docs.oracle.com/javase/tutorial/essential/io/file.html)以获取更多信息。此外，在进入 NIO 之前，正如另一篇文章所述，请阅读[IO Streams](http://docs.oracle.com/javase/tutorial/essential/io/streams.html)

# javascript - 在生产模式下获取 Ember 应用程序的堆栈跟踪

> ID：15529753
> 
> 赞同：3
> 
> 时间：2013-03-20T16:50:43.057
> 
> 标签：javascript, debugging, ember.js, try-catch, ember-data

我正在尝试在生产服务器中调试 emberjs 和 ember-data 应用程序。我正在监听 window.onerror，所以当出现问题时，我会收到回调，在那里我可以收到错误消息、行号和文件。但是 window.onerror 的行为在不同的浏览器中是不一样的。它也不提供堆栈跟踪

所以我使用下面的函数来包装余烬边界函数，这样我就可以获得完整的堆栈跟踪。

```
function tryCatchWrapper (func, name) {

  // Else wrap the function and return it
  function wrapped() {
    try {
      return func.apply(this, arguments);
    } catch (e) {
      // Report the errors
      console.log((name ? name + ": " : "") + e.message);
      // Get stacktrace
      throw e;
    }
  }
  return wrapped;
}; 
```

那么我可以使用上述函数包装哪些所有函数，以便获取有关应用程序中发生的所有错误的信息而不影响任何内容？

**更新**

添加[了 JS 小提琴](http://jsfiddle.net/devilankur18/BM6b4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:07:43.823

为什么不使用[Ember.onerror](http://emberjs.com/api/classes/Ember.html#event_onerror)事件？

参考[这个答案](https://stackoverflow.com/a/14349428/1373178)

# ios - UIView全屏

> ID：15529754
> 
> 赞同：5
> 
> 时间：2013-03-20T16:50:45.003
> 
> 标签：ios

我正在使用以下代码创建 UIview：

```
UIview* baseView = [[UIview alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
//self.view = baseView;
[self.view addSubview:baseView];
[baseView setBackgroundColor:[UIColor blackColor]];
baseView.userInteractionEnabled = YES;
baseView.alpha = 0.7; 
```

唯一的问题是，即使我使用 mainScreen 选项将其设置为全屏，除了 UIWindow 顶部的 5 厘米线外，它仍会显示为全屏。这有什么原因吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-20T17:09:01.040

好的，所以发生这种情况的原因是因为`[[UIScreen mainScreen] applicationFrame]`将返回窗口的框架减去状态栏的大小（如果它是可见的）。

要解决它，一个简单的方法是：

```
 UIView* baseView = [[UIView alloc] initWithFrame:CGRectMake(0,
                                                             0,
                                                             [[UIScreen mainScreen] applicationFrame].size.width,
                                                             [[UIScreen mainScreen] applicationFrame].size.height)];
//self.view = baseView;
[self.view addSubview:baseView];
[baseView setBackgroundColor:[UIColor blackColor]];
baseView.userInteractionEnabled = YES;
baseView.alpha = 0.7; 
```

# count - 为什么 ptrace 单步在静态链接时返回的指令数太大？

> ID：15529760
> 
> 赞同：1
> 
> 时间：2013-03-20T16:50:54.257
> 
> 标签：count, ptrace, instructions

因此，我已经阅读了这篇文章[Counting machine instructions of a process using PTRACE_SINGLESTEP](https://stackoverflow.com/questions/1375901/counting-machine-instructions-of-a-process-using-ptrace-singlestep)，并且我知道将 testprogram 动态链接到我的 ptrace 程序将返回一个指令计数，该指令计数也计算运行时库的初始化。但是，我正在尝试为我的测试程序获取有效计数，即：

```
int main(){
    return 0;
} 
```

我的 ptrace 程序首先也返回了 90k+ 个值，所以我将其更改为静态链接使用的测试程序。柜台现在少了，但仍然超过 12k。我用来计算指令的程序是：

```
#include <sys/ptrace.h>
#include <unistd.h>
#include <stdio.h>

int main() {
long long counter = 1;          // machine instruction counter
int wait_val;           // child's return value
int pid;                    // child's process id
int dat;    

switch (pid = fork()) {     // copy entire parent space in child
case -1:    perror("fork");
        break;

case 0:         // child process starts
        ptrace(PTRACE_TRACEME,0,NULL,NULL);     
        /* 
           must be called in order to allow the
           control over the child process and trace me (child)
           0 refers to the parent pid
        */

        execl("./returntestprog","returntestprog",NULL);    
        /* 
           executes the testprogram and causes
           the child to stop and send a signal
           to the parent, the parent can now
           switch to PTRACE_SINGLESTEP
        */
        break;
        // child process ends
default:    // parent process starts
        wait(&wait_val);                
        if (ptrace(PTRACE_SINGLESTEP, pid, 0, 0) != 0)
                            perror("ptrace");
                        /* 
                            switch to singlestep tracing and 
                            release child
                            if unable call error.
                         */
                    wait(&wait_val);
                // parent waits for child to stop at next 
                // instruction (execl()) 
                while (wait_val == 1407) {
                        counter++;
                        if (ptrace(PTRACE_SINGLESTEP, pid, 0, 0) != 0)
                                perror("ptrace");
                        /* 
                            switch to singlestep tracing and 
                            release child
                            if unable call error.
                         */
                        wait(&wait_val);
                        // wait for next instruction to complete  */
                }
        /*
          continue to stop, wait and release until
          the child is finished; wait_val != 1407
          Low=0177L and High=05 (SIGTRAP)
        */
        }
    printf("Number of machine instructions : %lld\n", counter);
    return 0;
}   // end of switch 
```

任何帮助将不胜感激，因为我不太确定它是否正常工作，或者根本不工作。一旦我开始做这件事，我想用 ptrace 进行时序分析，但首先要尝试计算*执行指令的数量*

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:02:56.267

我现在有点想通了。因此，即使在静态链接您的代码时，您也会尝试阻止库动态链接到您的程序，从而也包含在您的计数中。然而，另一方面是执行你的文件，或者基本上在操作系统下调用也需要大量的指令。所以基本上，只要指令计数是恒定的并且在相同的条件下相同，您可以从原始程序中减去这个计数（例如使用 return 0 程序时），以计算实际的指令数。

# c - 伪终端问题 (Mac/Linux)：SIGTTOU & Inappropriate ioctl

> ID：15529761
> 
> 赞同：1
> 
> 时间：2013-03-20T16:50:57.630
> 
> 标签：c, linux, macos

我正在研究一个伪终端库。代码以 C 代码实现，代码由基于 Web 的终端使用。只要我不使用 sudo 或登录，代码就可以工作。

这是我在 Mac 上运行服务器时遇到的错误：

```
sh-3.2$ sudo ls
Password:
[1]+  Stopped(SIGTTOU)
sh-3.2$ 
```

以上适用于Linux：

```
$ sudo ls
  readme.txt 
```

但是，我在 Linux 上使用 sudo bash 得到以下信息：

```
$ sudo bash
bash: cannot set terminal process group (-1): Inappropriate ioctl for device
bash: no job control in this shell
]0;root@ubuntu: /tmproot@ubuntu:/tmp# 
```

注意：以上工作，但我没有工作控制。

我可能忘了在终端上设置一些控制位，但谷歌在找到这个方面并没有多大帮助。另外，您是否知道任何可以非常详细地解释伪终端管理的好书。

我有 setid 调用，但我没有使用 openpty。我在打开 pty 时使用以下代码：

```
static int createPty(lua_State* L, char* ttyName, int* pty)
{
   *pty = getpt();
   if (*pty < 0 || grantpt(*pty) < 0 || unlockpt(*pty) < 0)
      return lDoErr(L,"Cannot open PTY: %s",strerror(errno));
   if(ptsname_r(*pty, ttyName, PTY_NAME_SIZE-1))
      return lDoErr(L,"ptsname_r: %s",strerror(errno));
   return 0;
} 
```

我已经编辑了下面的代码，并且该代码有效。我的第一个版本不起作用的原因是我试图创建两个 PTY 频道。我希望能够区分 stdout 和 stderr，但 Linux 内核不允许多个 TIOCSCTTY 调用。

```
static int
childOpenTTY(const char* ttyName)
{
   struct termios termbuf;
   int fd=open(ttyName, O_RDWR);
   if(fd < 0)
      doClientError("open %s: %s",ttyName, strerror(errno));
   tcsetpgrp(fd, getpid());
   ioctl(fd,TIOCSCTTY,NULL);
   tcgetattr(fd, &termbuf);
   cfmakeraw(&termbuf); /* turn off NL to CR/NL mapping on output. */
   tcsetattr(fd, TCSANOW, &termbuf);
   return fd;
}

if( (ret = createPty(L, ttyName, &te->pty)) != 0)
   return ret;
if ((te->pid = zzbafork()) < 0)
   return lDoErr(L,"fork: %s",strerror(errno));
if(te->pid == 0)
{  /* Child process */
   static const char efmt[]={"Cannot set '%s' (dup2 err)"};
   int fd;
   if(setsid() < 0) /* make new process group */
      doClientError("setsid: %s",strerror(errno));
   fd=childOpenTTY(ttyName);
   if(dup2(fd, STDIN_FILENO) != STDIN_FILENO)
      doClientError(efmt,"stdin");
   if(dup2(fd, STDOUT_FILENO) != STDOUT_FILENO)
      doClientError(efmt,"stdout");
   if(dup2(fd, STDERR_FILENO) != STDERR_FILENO)
      doClientError(efmt,"stderr");
   if(fd != STDIN_FILENO && fd != STDOUT_FILENO && fd != STDERR_FILENO)
      close(fd);
   execve(cmd, (char**)cmdArgv, environ);
   /* execve should not return, unless error exec cmd */
   doClientError("Executing %s failed: %s",cmd,strerror(errno));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:16:09.677

由于此处没有显示实际代码，因此很难确定，但我怀疑您遇到了 POSIX 风格的“会话”管理。您需要执行一个`setsid`调用，然后打开 pty（从端），使其成为控制终端。和例程`openpty`为`login_tty`您完成低级垃圾工作；你在用那些吗？

# css - 鼠标悬停在图像上更改文本链接颜色

> ID：15529765
> 
> 赞同：0
> 
> 时间：2013-03-20T16:51:03.713
> 
> 标签：css, image, text, hover, hyperlink

基本上我有 6 张图片和 6 个文字链接

我已经完成了css悬停在图片上（彩色版->悬停->黑白版）

和文本链接（黑色字体->悬停时->红色字体）

当我悬停在链接上时-图片正在悬停版本（B＆W），没关系，但这仅在这个方向上起作用，当我悬停在图片上时，在相反的方向上-文本链接保持不变（黑色字体）

这就是我的问题，如何连接这两个元素（文本链接和图片）？

这是我的代码：

HTML

```
<ul class="menu">     
li class="element_1"><a href="./first_link.html"></a>
<a href="./first_link.html" class="text">Text of the<br>First<br>Link</a></li>

[rest of the elements list]
</ul> 
```

CSS

```
 ul.menu element_1{
 width:130px;
 margin-left:20px;
  height:130px;
 display: block; background: url(img/menu_1.jpg) top center no-repeat;;
}

ul.menu li.element_1:hover{
 width:130px;
 margin-left:20px;

 display: block; background: url(img/menu_1_bw.jpg) top center no-repeat;; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:53:42.240

特别是当您使用背景图像时，我建议您重组您的 HTML 以仅使用单个锚点。然后，当悬停时，您可以应用图像和字体颜色更改。

查看[jsFiddle](http://jsfiddle.net/cherryflavourpez/cV8uh/)以获得一个简单的示例*。这是新的 CSS：

```
.element_1 a {
    width:130px;
    margin-left:20px;
    height:130px;
    display: block; 
    background: url('http://placekitten.com/200/300') top center no-repeat;
    color: red;
}

.element_1 a:hover{
    background-image: url('http://placekitten.com/300/300');
    color: green;
} 
```

在定义你的`:hover`状态时，你只需要指定那些正在改变的东西，而不是重新陈述一切。

* 请注意，您的 HTML/CSS 需要整理。您错过了`.`类选择器并且有多个分号。确保您的代码经过验证并且没有这些简单的错误，因为它们会掩盖真正的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:55:52.717

我没有看到任何用于更改链接颜色的 CSS。我猜你指望浏览器来做到这一点？

您可以通过将规则添加到现有 CSS 来解决此问题：

```
ul.menu li.element_1:hover{
 color: red;

 width:130px;
 margin-left:20px;

 display: block; background: url(img/menu_1_bw.jpg) top center no-repeat;
} 
```

另一种方法是将图像和文本放在单个元素中，在这种情况下，浏览器会将其自动链接突出显示应用于整个元素。

# python - 2 列表中的缺失值和附加值

> ID：15529775
> 
> 赞同：2
> 
> 时间：2013-03-20T16:51:22.320
> 
> 标签：python

我有两个清单：

```
list1 = ['1','2','3','4','5','6']
list2 = ['4','5','6','7','8'] 
```

现在我想在 list2 中找到缺失值和附加值。

输出应该是：

```
Missing value = 1,2,3
Additional Value = 7,8 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T16:52:43.197

使用[python 集](http://docs.python.org/2/library/stdtypes.html#set-types-set-frozenset)列出差异：

```
set(list1).difference(list2)
set(list2).difference(list1) 
```

结果：

```
>>> print 'Missing values =', ','.join(set(list1).difference(list2))
Missing values = 1,3,2
>>> print 'Additional values =', ','.join(set(list2).difference(list1))
Additional values = 7,8 
```

如果顺序很重要，那么您仍然需要使用集合：

```
set1, set2 = set(list1), set(list2)
[i for i in list1 if i not in set2]
[i for i in list2 if i not in set1] 
```

结果：

```
>>> print 'Missing values =', ','.join([i for i in list1 if i not in set2])
Missing values = 1,2,3
>>> print 'Missing values =', ','.join([i for i in list2 if i not in set1])
Additional values = 7,8 
```

# php - php mysql DELETE 不起作用

> ID：15529776
> 
> 赞同：-1
> 
> 时间：2013-03-20T16:51:23.650
> 
> 标签：php, mysql

在我的数据库中，我想使用 PHP 脚本删除日期字段为 < 当前日期的行。

```
$date('Y-m-j');
$result = mysql_query("DELETE * FROM festival WHERE day = '$date'"); 
```

出于同样的原因，DELETE 不起作用。使用 SELECT 执行相同的查询。Perarps 是由于一些关于 DELETE 命令的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:20:19.697

您的 SQL 语法不正确。DELETE 查询不采用列列表，但您试图将其传递给它（as `*`）。

您的查询应该是：

```
DELETE FROM festival WHERE date = '$date' 
```

# php - unix mv --backup=编号

> ID：15529779
> 
> 赞同：8
> 
> 时间：2013-03-20T16:51:26.987
> 
> 标签：php, unix, file-io, filesystems, file-extension

我正在尝试在 php 中移动文件夹，但如果存在重复，则将两个文件保留在**dest文件夹中。**我尝试在递归中这样做，但它太复杂了，所以很多事情都可能出错，例如文件权限和重复文件\文件夹。

我正在尝试使用 system() 命令，但我不知道如何移动文件，但如果重复则保留备份而不破坏扩展名

```
$last_line = system('mv --backup=t websites/test/ websites/test2/', $retval); 
```

如果两个目录中都存在文件，则给出以下内容：

```
ajax.html~
ajax.html~1
ajax.html~2 
```

我正在寻找的是：

```
ajax~.html
ajax~1.html
ajax~2.html 
```

或任何其他类似（1），（2）......但不会破坏文件的扩展名。有任何想法吗？请。

ps 必须使用 system() 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-22T11:58:48.747

对于这个问题，我在下面的这个函数中找到并交换这些扩展名（将我的目标目录作为我的参数传递）：

```
swap_file_extension_and_backup_number ()
{
IFS=$'\n'
for y in $(ls $1)
do
    mv $1/`echo $y | sed 's/ /\\ /g'` $1/`echo "$y" | sed 's/\(\.[^~]\{3\}\)\(\.~[0-9]\{1,2\}~\)$/\2\1/g'`
done
} 
```

该函数假定您的文件扩展名将是正常的 3 个字符长，这将找到长达两位数的备份，即`.~99~`

解释：

这部分`$1/`echo $y | sed 's/ /\\ /g'` $1/`echo "$y"` 代表第一个参数（原始文件），`mv`但通过添加转义来保护您免受空格字符的影响。

最后一部分`$1/`echo "$y" | sed 's/\(\.[^~]\{3\}\)\(\.~[0-9]\{1,2\}~\)$/\2\1/g'`当然是交换两个括号组的目标文件。即`/\2\1/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:57:04.203

如果您想保留原始文件并仅创建一个副本，请使用`cp`not `mv`。

如果要创建备份存档，请像这样对文件夹执行 tar gzip

`tar -pczf name_of_your_archive.tar.gz /path/to/directory/to/backup`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:10:34.907

[`rsync`](http://linux.die.net/man/1/rsync)与`--backup`和`--backup-dir`选项一起使用。例如：

```
rsync -a --backup --backup-dir /usr/local/backup/2013/03/20/ /path/to/source /path/to/dest 
```

每次文件可能被覆盖时，它都会被复制到给定的文件夹以及该项目的路径。例如：`/path/to/dest/path/to/source/file.txt`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:01:53.910

```
rsync --ignore-existing --remove-source-files /path/to/source /path/to/dest 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T18:24:32.440

从外观上看，似乎没有任何内置方法可以让您在将扩展名保留在正确位置的同时备份文件。可能是错的，但我找不到一个不符合你原来的问题已经指出的问题。

既然您说使用 php 复制文件很复杂，也许您可​​以像现在一样做，以格式获取文件

```
ajax.html~
ajax.html~1
ajax.html~2 
```

然后使用 PHP 解析文件并将它们重命名为您想要的格式。这样您就不必处理权限和重复文件，这是您提到的复杂情况。您只需要查找具有这种格式的文件，然后重命名它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-17T19:51:13.220

我没有严格回答您的问题，但我在这里介绍的案例非常普遍，因此是有效的！

这是我的黑客！

**与文件一起使用：**

```
#!/bin/bash

# It will find all the files according to the arguments in 
# "<YOUR_ARGUMENT_TO_FIND_FILES>" ("find" command) and move them to the 
# "<DEST_FOLDER>" folder. Files with the same name will follow the pattern: 
# "same_name.ext", "same_name (1).ext", "same_name (2).ext", 
# "same_name (3).ext"...

cd <YOUR_TARGET_FOLDER>
mkdir ./<DEST_FOLDER>
find ./ -iname "<YOUR_ARGUMENT_TO_FIND_FILES>" -type f -print0 | xargs -0 -I "{}" sh -c 'cp --backup=numbered "{}" "./<DEST_FOLDER>/" && rm -f "{}"'
cd ./<DEST_FOLDER>
for f_name in *.~*~; do 
    f_bak_ext="${f_name##*.}"
    f_bak_num="${f_bak_ext//[^0-9]/}"
    f_orig_name="${f_name%.*}"
    f_only_name="${f_orig_name%.*}"
    f_only_ext="${f_orig_name##*.}"
    mv "$f_name" "$f_only_name ($f_bak_num).$f_only_ext"
done
cd .. 
```

**与文件夹一起使用：**

```
#!/bin/bash

# It will find all the folders according to the arguments in 
# "<YOUR_ARGUMENT_TO_FIND_FOLDERS>" ("find" command) and move them to the 
# "<DEST_FOLDER>" folder. Folders with the same name will have their contents 
# merged, however files with the same name WILL NOT HAVE DUPLICATES (example: 
# "same_name.ext", "same_name (1).ext", "same_name (2).ext", 
# "same_name (3).ext"...).

cd <YOUR_TARGET_FOLDER>
find ./ -path "./<DEST_FOLDER>" -prune -o -iname "<YOUR_ARGUMENT_TO_FIND_FOLDERS>" -type d -print0 | xargs -0 -I "{}" sh -c 'rsync -a "{}" "./<DEST_FOLDER>/" && rm -rf "{}"' 
```

# jquery - Jquery 响应中的 Json 动态数据不起作用

> ID：15529780
> 
> 赞同：0
> 
> 时间：2013-03-20T16:51:29.153
> 
> 标签：jquery, json

这是在这里工作的代码[http://jsfiddle.net/gR2y4/](http://jsfiddle.net/gR2y4/)

但是当我尝试这不起作用时。

```
$.ajax({ type: "POST", url: "xx.aspx" }).done(function (response) {
var resp = response;
alert(resp._TypingUserList[0].UserNick);
}); 
```

谢谢你的努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:56:21.817

实际数据在`response.d`它是 ASP.NET 响应您的 AJAX 调用的方式。看到[这个链接](http://encosia.com/never-worry-about-asp-net-ajaxs-d-again/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:12:15.577

Ajax 调用需要返回数据类型为 json，

添加数据类型解决了这个问题。

```
$.ajax({ type: "POST",dataType: "json", url: "xx.aspx" }).done(function (response) {
var resp = response;
alert(resp._TypingUserList[0].UserNick);
}); 
```

# jquery - $.get 在我的服务器上不起作用

> ID：15529783
> 
> 赞同：1
> 
> 时间：2013-03-20T16:51:35.063
> 
> 标签：jquery, .net, asp.net-mvc-3

当我使用 Visual Studio 运行时，以下代码正在运行：

```
$.get('@Url.Content("Content/templates/new_story.htm")', function (tr) {
    $("#table_body").append(tr.replace(/#story/g, storyNumber));
}); 
```

但是，当我在 IIS 7.5 中发布时，新的 HTML 不会加载到`#table_body`.

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:55:19.340

当我发布到虚拟目录时，我已经看到了这一点。我认为您想要做的是在您的 URL 中添加一个 tilda：

```
$.get('@Url.Content("~/Content/templates/new_story.htm")', function (tr) {
    $("#table_body").append(tr.replace(/#story/g, storyNumber));
}); 
```

# haskell - 如何从haskell的ghc生成英特尔汇编语法？

> ID：15529785
> 
> 赞同：2
> 
> 时间：2013-03-20T16:51:41.853
> 
> 标签：haskell, assembly, compiler-construction, ghc

我知道haskell的ghc中有一个-S标志，它会生成一个.s文件，它是一个汇编文件。

我想知道 GHC 是否可以使用 Intel 语法生成汇编文件？谢谢你！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:13:24.557

如果它基于 GCC，它可能支持该`-masm=intel`标志。请参阅[如何使用 gcc 以 Intel 语法生成汇编代码？](https://stackoverflow.com/q/199966/422797)

一个不太好的选项是`objdump`在编译文件上使用：

`objdump -d --disassembler-options=intel file.o`

# asp.net - 如何以编程方式将 ItemTemplate 添加到 gridview

> ID：15529786
> 
> 赞同：2
> 
> 时间：2013-03-20T16:51:45.750
> 
> 标签：asp.net, image, gridview

我正在尝试使用 C# 将多个图像添加到 ASP.net 中数据网格视图的列中

图像名称在数据库中，一些用户将有 10 个图像，而其他用户将没有图像，而有些则介于两者之间。

我发现我可以添加一个 ItemTemplate 但我想要的是在加载时以编程方式生成数字，

这可能吗

```
 <asp:GridView ID="dgvTopPlayers" runat="server" AutoGenerateColumns="False" 
        onrowdatabound="dgvTopPlayers_RowDataBound" 
        onrowcreated="dgvTopPlayers_RowCreated" ShowHeaderWhenEmpty="True">
        <Columns>
            <asp:HyperLinkField DataNavigateUrlFields="UserID" 
                DataNavigateUrlFormatString="~/UserProfile.aspx?UserId={0}" 
                DataTextField="UserName" HeaderText="UserName" 
                />
            <asp:BoundField DataField="Last7Days" HeaderText="Last7Days" />
            <asp:BoundField DataField="LastMonth" HeaderText="LastMonth" />
            <asp:BoundField DataField="TotalPoints" HeaderText="TotalPoints" />
            <asp:BoundField DataField="IdeaCount" HeaderText="IdeaCount" />
            <asp:BoundField DataField="ChallengeCount" HeaderText="ChallengeCount" />
            <asp:TemplateField HeaderText="Badges"  >
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Eval("BadgeIcons") %>' 
                        Tooltip='<%# Eval("BadgeIcons") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Image ID="Image1" runat="server" AlternateText='<%# Eval("BadgeIcons") %>' 
                        ImageUrl='<%# Eval("BadgeIcons") %>' />
                        <asp:Image ID="Image2" runat="server" AlternateText='<%# Eval("BadgeIcons") %>' 
                        ImageUrl="~/Images/puzzleIcon.png" />
                        <asp:Image ID="Image3" runat="server" AlternateText='<%# Eval("BadgeIcons") %>' 
                        ImageUrl="~/IMAGES/caution.png" />
                        <asp:Image ID="Image4" runat="server" AlternateText='<%# Eval("BadgeIcons") %>' 
                        ImageUrl="~/IMAGES/reportabuse.png" />
                        <asp:Image ID="Image5" runat="server" AlternateText='<%# Eval("BadgeIcons") %>' 
                        ImageUrl="~/IMAGES/yellow_star.png" />
                </ItemTemplate>

                <ItemStyle Width="35%" />

            </asp:TemplateField>
        </Columns>

    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:00:39.880

在 内部放置一个面板或占位符`ItemTemplate`，并在 RowDataBound 中添加图像，因为您已经拥有它。

```
<asp:TemplateField HeaderText="Badges"  >
   <EditItemTemplate>
      <asp:TextBox ID="TextBox1" runat="server" Text='<%# Eval("BadgeIcons") %>' 
         Tooltip='<%# Eval("BadgeIcons") %>'></asp:TextBox>
   </EditItemTemplate>
   <ItemTemplate>
      <asp:Panel ID="ImagePanel".../>
  </ItemTemplate>
</asp:TemplateField>

void dgvTopPlayers_RowDataBound(Object sender, GridViewRowEventArgs e)
{
   if(e.Row.RowType == DataControlRowType.DataRow)
   {
      // *** Cast to appropiate object ***
      var user = e.Row.DataItem as User;
      var panel = e.Row.FindControl("ImagePanel") as Panel;
      var images = user.BadgeIcons.Split(',');      
      foreach(var img in images) {
         panel.Controls.Add(new Image{ ID = UniqueID, ImageUrl = "~/IMAGES/" + img });
      }
   }
} 
```

# ruby-on-rails - Rails 表单 - 非关联复选框

> ID：15529788
> 
> 赞同：0
> 
> 时间：2013-03-20T16:51:53.333
> 
> 标签：ruby-on-rails, simple-form

我有一个对象的表单，它看起来像这样：

```
= simple_form_for @my_object do |f|
  = f.input :attribute_1
  = f.input :attribute_2 
```

现在这个对象有一个东西，是一个操作系统数组`['AIX', 'Linux']`，有些可能有`['AIX', 'Linux', 'SunOS']`，等等。我想为每一个都有一个复选框，当提交表单时，它只会填充这个数组。我不太确定如何让表单修改带有复选框的数组。

我在我想用于复选框的初始化程序中有这个常量。

```
PLATFORMS = %w(AIX Linux SunOS) 
```

注意：我也根本没有使用`ActiveRecord`。

我目前不想让操作系统成为自己的对象，所以我不想有关联。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:00:25.777

我没有意识到它是如此简单。

```
= f.input :my_array, as: :check_boxes, collection: PLATFORMS 
```

# c# - 将 GridView 绑定到 ViewModel 中的 GridView 对象

> ID：15529789
> 
> 赞同：0
> 
> 时间：2013-03-20T16:51:54.580
> 
> 标签：c#, xaml, gridview, binding

我是 MVVM 的新手，我有一些我无法解决的问题。我有一个 GridView，我想将它绑定到我的视图模型中的一个 GridView 对象（它与我的 XAML 文件的代码隐藏文件分开）。

但是没有我不能用 {Binding ...} 编写的属性，我不想在我的视图模型初始化的参数中给出它。

我想在视图模型中访问我的 GridView 的所有属性，以获取所选项目。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:57:36.257

gridview 类表示一种视图模式，它在 ListView 控件的列中显示数据项。可以在 gridview 上绑定的唯一有用的东西是 Columns 属性。

如果要绑定网格视图的行，请在列表视图级别绑定到 ItemsSource 属性。

# module - DotNetNuke 弹出 CSS 已禁用？

> ID：15529792
> 
> 赞同：1
> 
> 时间：2013-03-20T16:51:55.893
> 
> 标签：module, popup, dotnetnuke

我目前能够在 DNN 中使用`dnnModal.show(Url, ...);`.

当我将 Url（DNN 网站中的一个页面）作为单独的页面查看时，一切看起来都符合预期（适用所有框架和自定义 CSS 样式）。当我在那个弹出窗口中查看 URL 时，所有的 CSS 都消失了。

我认为 Url 可以是任何东西（甚至在域之外）这一事实可能会解释为什么我们会丢失“本地”CSS。如果 URL 在网站内，有没有办法“保留”网站的皮肤？

顺便问一下，是否有适当的方法在弹出窗口上加载 DNN 模块 - 而不是上面的 Url（因为这实际上是放置模块的 DNN 页面的 Url）？如果可能的话，这可能会解决缺少 CSS 的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T17:47:10.577

您可能想看看 &popup=true 在 DNN6/7 中的工作方式。如果您将 &popUp=true 作为查询字符串参数传递（如果是第一个则使用 ?）DNN 将从您的 SKINS 文件夹加载 popup.ascx 皮肤，如果您的皮肤文件夹中没有定义弹出式皮肤，它将使用默认dnn之一，我相信darkknight/popup.ascx

然后，您可以定义 popup.ascx 包含的内容

# mongodb - 致命错误：找不到类 'Doctrine\Bundle\MongoDBBundle\DoctrineMongoDBBundle'

> ID：15529793
> 
> 赞同：2
> 
> 时间：2013-03-20T16:51:56.407
> 
> 标签：mongodb, symfony, symfony-2.1

自 3 天以来，我一直在尝试安装 mongodb，但每次我都会收到不同的错误消息，直到我修复了其中一些错误消息，并且我可以为 Symfony 2.1.4 安装安装 mongodb。所以现在我有这个错误信息：

```
"Fatal error: Class 'Doctrine\Bundle\MongoDBBundle\DoctrineMongoDBBundle' not found" 
```

我找不到任何解决方案来解决它。有关我的信息，我`composer.json`添加了以下几行：

```
 "doctrine/mongodb-odm": "*",
    "doctrine/mongodb-odm-bundle": "v2.0.1" 
```

它在 Doctrine 命名空间中创建了 3 个文件夹：

*   学说/MongoDB
*   学说/mongodb-odm
*   学说/mongodb-odm-bundle

为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T01:07:32.620

对于 Symfony 2.1，您需要使用[Doctrine ODM MongoDB Bundle](http://symfony.com/doc/2.1/bundles/DoctrineMongoDBBundle/index.html)的 3.0 版本。

```
 "doctrine/mongodb-odm": "1.0.*@dev",
    "doctrine/mongodb-odm-bundle": "3.0.*@dev" 
```

找不到您安装的包的原因是因为它位于不同的命名空间下， `Symfony\Bundle\DoctrineMongoDBBundle\DoctrineMongoDBBundle`用于 Symfony 2.0

# python - 发送带有正文的 GET 请求

> ID：15529794
> 
> 赞同：14
> 
> 时间：2013-03-20T16:51:57.513
> 
> 标签：python, python-3.x

我正在使用弹性搜索，RESTful API 支持在 GET 请求中读取正文以获取搜索条件。

我目前在做

```
response = urllib.request.urlopen(url, data).read().decode("utf-8") 
```

如果`data`存在，则发出 POST，否则发出 GET。尽管我包含数据（根据 POST 应该在请求正文中），但我如何强制执行 GET

Nb：我知道我可以`source`在 Url 中使用一个属性，但是我们正在运行的查询很复杂，而且查询定义非常冗长，导致 url 非常长（长到足以干扰一些旧浏览器和代理）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-20T18:06:35.280

我不知道使用 urllib的*好方法。*但是，[requests通过使用](http://docs.python-requests.org/en/latest/)[requests.request](https://github.com/kennethreitz/requests/blob/master/requests/api.py) * 函数使其变得微不足道（实际上，对于任何任意动词和请求内容都是微不足道的） ：

```
requests.request(method='get', url='localhost/test', data='some data') 
```

构建一个小型的测试web服务器会显示数据确实是在请求体中发送的，服务器感知到的方法确实是GET。

*请注意，我链接到`requests.api.requests`代码是因为这是实际函数定义所在的位置。你应该使用它来调用它`requests.request(...)`

# ruby-on-rails - 安装 ruby 2.0.0 rvm osx 10.6

> ID：15529795
> 
> 赞同：0
> 
> 时间：2013-03-20T16:52:00.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rvm, osx-snow-leopard, ruby-2.0

我在将 Ruby 升级到 2.0.0 和将 Rails 升级到 3.2.13 时遇到了一点问题。我正在使用[本指南](http://railsapps.github.com/updating-rails.html)，并开始为 ruby​​ 2.0.0 和 rails 3.2.13 创建一个新的项目特定 gem 列表。

这是[代码](http://txtup.co/Z8TTy)

和文件：

/usr/local/rvm/log/ruby-2.0.0-p0/yaml/configure.log：/usr/local/rvm/log/ruby-2.0.0-p0/openssl/configure.log：/usr/local
`http://txtup.co/f7taC`
_
`http://txtup.co/vmXHM`
_ /rvm/log/ruby-2.0.0-p0/yaml/make.log：/usr/local/rvm/log/ruby-2.0.0-p0/openssl/make.log：/usr/local/rvm/log
`http://txtup.co/wIowb`
_
`This is massive. I'll upload it if you ask me to`
_ /ruby-2.0.0-p0/configure.log：
`http://txtup.co/zbNiz`

如果您还有什么需要，请告诉我。不知道我做了什么，但不确定接下来要做什么。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:25:31.740

尝试：

```
rvm get head
rvm install 2.0.0 --autolibs=4 
```

# javascript - 是否有浏览器扩展来更改 Date 对象返回的时间？

> ID：15529798
> 
> 赞同：1
> 
> 时间：2013-03-20T16:52:17.357
> 
> 标签：javascript, datetime, browser-extension

是否有浏览器扩展来更改 JavaScript 的 Date 对象返回的内容而不更改系统时钟？

当您创建小册子软件时，经常会出现这种情况。您通常希望根据当前日期向访问者展示特定的促销或创意待遇。如果您使用访问者的系统时钟，测试会变得很烦人，因为您必须更改自己的系统时钟，这当然会打乱您的日历提醒，天知道还有什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:07:39.903

虽然在生产环境中不建议使用，但在开发环境中，您可以执行以下操作：

```
var dateYouWant = 1363798981693; 
Date.prototype.getTime = function() { 
    return dateYouWant;
};
console.log( (new Date).getTime() ); 
```

本质上，覆盖`Date()`函数以返回您指定的任何时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T23:09:24.013

既然您回复我的评论说您将调用包装函数作为后备，那么让我提供该函数。我讨厌修改原生对象，所以我会走这条路：

[这是一个可以玩的jsfiddle。](http://jsfiddle.net/lbstr/79hUn/)

```
function getScaledDate(offset){
    // if you don't pass in an offset
    if (offset === undefined) {
        // check to see if there is a global one defined
        if (typeof GLOBAL_DATE_OFFSET !== "undefined") {
            offset = GLOBAL_DATE_OFFSET;
        }
        // otherwise, don't add an offset
        else {
            offset = 0;
        }
    }

    return new Date(+new Date + offset);
}

// USAGE:
var now = getScaledDate();
var oneHourFromNow = getScaledDate(1000 * 60 * 60); 
var oneHourAgo = getScaledDate(-1000 * 60 * 60); 

// GLOBAL OFFSET USAGE:
window.GLOBAL_DATE_OFFSET = 1000 * 60 * 60 * 7; // scale everything 7 hours foward
var scaledDate = getScaledDate(); // will use global offset 
```

# git - 将 TeamCity 中的 VCS 评论与 YouTrack 问题集成

> ID：15529805
> 
> 赞同：1
> 
> 时间：2013-03-20T16:52:31.413
> 
> 标签：git, continuous-integration, teamcity, issue-tracking, youtrack

我以为我已经正确设置了，但似乎没有一个 VCS 命令正在传播。

我有一个 TeamCity 挂钩的 git 存储库，当签入发生时，TeamCity 运行构建脚本并创建一个工件。YouTrack 已与 TeamCity 集成并已映射项目，因此项目构建（自动构建和创建工件的项目）并代表管理员用户 (root) 运行。

我已经告诉它处理红色构建，映射维护者是 root，其他一切都是默认的。现在服务器和映射都被标记为活动的，我可以看到最后的同步时间，以及它处理的构建，所有这些看起来都很好，但是提交中的命令没有被执行。

假设它处理了构建 250，它有一个 VCS 评论：

```
#PMI-52 Fixed
Have finally fixed this annoying issue 
```

我希望将任务 PMI-52 移动到 Fixed 状态，并且使用 Youtrack 4 将下面的注释添加到 PMI-52 的任务注释中。然而，这一切都没有发生。那么我是否遗漏了什么，或者这是否应该将更改放入任务/问题中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:15:05.283

你的期望是完全正确的。所以问题一定出在配置上。对于您提供的示例，您是否观察到 PMI-52 的“TeamCity Changes”问题选项卡上的变化？如果您这样做并且命令是红色的，请考虑错误消息（单击命令右侧的“？”）。最可能的原因是集成无法将 TeamCity 用户与 YouTrack 用户匹配以代表其运行命令。为了使用户匹配，他们必须拥有相同的电子邮件。

# android - 如何突出显示在Textview android中单击的单词

> ID：15529806
> 
> 赞同：3
> 
> 时间：2013-03-20T16:52:34.597
> 
> 标签：android, textview

我正在创建一个应用程序，在其中我从 EditText 中的用户那里获得输入。

现在单击按钮后，输入的字符串将显示在 TextView 中。现在我的问题是，当用户单击任何单个单词时，我会在 TextView 中突出显示该单词。

例如： 用户输入： 你好朋友你好吗。

当用户单击“Hello”时，它将在 TextView 中突出显示。或者当用户单击“如何”时，它将突出显示。

请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T17:06:05.893

```
public class MainActivity extends Activity {
TextView _tv;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
_tv = (TextView) findViewById( R.id.tv );

SpannableString ss = new SpannableString("Hello friend how are you.");

ss.setSpan(new MyClickableSpan(), 0,5, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
ss.setSpan(new MyClickableSpan(), 6, 12, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
ss.setSpan(new MyClickableSpan(), 13, 16, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
ss.setSpan(new MyClickableSpan(), 17, 20, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
ss.setSpan(new MyClickableSpan(), 21, 24, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

_tv.setText(ss);
_tv.setMovementMethod(LinkMovementMethod.getInstance());
}
class MyClickableSpan extends ClickableSpan{ //clickable span
public void onClick(View textView) {
//do something

   Toast.makeText(MainActivity.this, "Clicked",
        Toast.LENGTH_SHORT).show();
}
@Override
public void updateDrawState(TextPaint ds) {
   ds.setColor(Color.BLACK);//set text color 
   ds.setUnderlineText(false); // set to false to remove underline
} 
}
} 
```

编辑：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="50dp"
    android:text="@string/hello_world" />

<EditText
    android:id="@+id/ed"
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:layout_marginTop="40dp" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="20dp"
    android:text="Click" />

 </LinearLayout> 
```

您可以按空格分割字符串，并将每个单词设置为可扩展的字符串。然后使可跨字符串可点击。这样您就不需要对字符串的长度进行硬编码。用户可以单击 textview 中的任何单词并将其突出显示。

```
 public class MainActivity extends Activity {
TextView _tv;
String[] each;
SpannableString ss1;
Button b;
EditText et;
    String s;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
b= (Button) findViewById(R.id.button1);
et = (EditText) findViewById(R.id.ed);
_tv = (TextView) findViewById( R.id.tv );

b.setOnClickListener(new OnClickListener()
{

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        s=et.getText().toString();
        _tv.setText("");
        for(int i=0;i<s.length();i++)
        {
            each = s.split("\\s+");
        }
        for(int i=0;i<each.length;i++)
        {
            System.out.println("................"+each[i]);
            ss1=  new SpannableString(each[i]);
            ss1.setSpan(new MyClickableSpan(), 0, ss1.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
            _tv.append(ss1); 
            _tv.append(" "); 

        }
        _tv.setMovementMethod(LinkMovementMethod.getInstance());
    }

   });
}
class MyClickableSpan extends ClickableSpan{ //clickable span
public void onClick(View textView) {
//do something

   Toast.makeText(MainActivity.this, "Clicked",
        Toast.LENGTH_SHORT).show();
 }
 @Override
 public void updateDrawState(TextPaint ds) {
   ds.setColor(Color.BLACK);//set text color 
   ds.setUnderlineText(false); // set to false to remove underline
 }
 }
 } 
```

[http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)。用于样式化可跨字符串。

结果快照。

![在此处输入图像描述](../Images/b254b728a2939418a0acbcee33117cd7.png)

# ruby-on-rails-3 - 印象笔记 API 的 RSpec 测试

> ID：15529807
> 
> 赞同：0
> 
> 时间：2013-03-20T16:52:34.903
> 
> 标签：ruby-on-rails-3, rspec, rspec-rails, evernote, vcr

我有一个调用 Evernote API 的 Rails 应用程序。我想为这些调用编写 RSpec 测试。这样做的最佳方法是什么？我知道我可以使用 Webmock 或 VCR，但是 - 除非我弄错了 - 如果不推送我的密钥或缓存的 oauth 响应，我将无法在我的存储库中进行自包含测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:11:27.233

VCR 提供了一种简单的方法来过滤掉密钥等敏感数据：

[https://relishapp.com/vcr/vcr/v/2-4-0/docs/configuration/filter-sensitive-data](https://relishapp.com/vcr/vcr/v/2-4-0/docs/configuration/filter-sensitive-data)！

# java - 单轴推力运动，非常奇怪的行为

> ID：15529811
> 
> 赞同：0
> 
> 时间：2013-03-20T16:52:41.823
> 
> 标签：java, math, libgdx, game-physics

我注意到一段简单的代码有一些非常奇怪的行为，我已经将其剥离以删除任何变量、时间步长、加速度等。

我在屏幕上有一个形状，按屏幕左侧将形状向右推，按右侧向左推。由于某种原因，该形状倾向于向左移动 ( `speed < 0`)。似乎它在向右移动时适当减速，但向左移动时它完成减速然后在停止之前持续大约 0.3 秒。

```
float speed;
int x; 
```

形状的更新方法：

```
speed *= 0.9f;

if (Math.abs(speed) < 0.1f)
    speed = 0;

if (Gdx.input.isTouched()) {
    if (Gdx.input.getX() < Gdx.graphics.getWidth() / 2) {
        speed = 10;
    } else {
        speed = -10;
    }
}

x += speed; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:18:24.857

x 应定义为浮点数。我使用 int 是因为视口设置为屏幕大小，但最终意识到它需要具有精度。

# jquery - jQuery：使用 carouFredSel 插件延迟加载

> ID：15529816
> 
> 赞同：2
> 
> 时间：2013-03-20T16:52:50.230
> 
> 标签：jquery, jquery-plugins, lazy-loading, carousel, caroufredsel

[我正在尝试为使用carouFredSel](http://caroufredsel.dev7studios.com) jQuery 插件创建的轮播内的图像实现延迟加载。

你有什么建议或者你已经取得了类似的成就吗？好像默认是做不到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:15:42.297

@Stefano-到目前为止您尝试了什么？（如果可以，请显示一些代码）。它将帮助我们准确了解正在发生的事情。

作为延迟加载的经验法则，请确保将占位符图像作为 src 放在 html 中，例如：`src="img/grey.gif"`. 这张图片可以是任何东西——但大多数人使用一个小的 1px 盒子 b/c 它的灯光供服务器传输。将特定类放入 html 的`<img>`src 中也是一个好主意，例如：`class="lazy"`.

因此，您的 html src 示例：

```
<img class="lazy" src="img/grey.gif" data-original="img/example.jpg" width="640" height="480"> 
```

然后在你的jQuery函数中放-

```
$("img.lazy").lazyload();  //this is why the binding of a class is helpful 
```

[这里](http://speckyboy.com/2012/10/18/how-to-create-lazy-loading-images-for-your-website/)和[这里](http://www.appelsiini.net/projects/lazyload)有一些很好的阅读参考资料。如果您对 Fred 的lazyload() 有特定问题，请发布一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T12:01:58.810

试试这个（水平滚动）

[http://www.appelsiini.net/projects/lazyload/enabled_wide_container.html](http://www.appelsiini.net/projects/lazyload/enabled_wide_container.html)

```
 $("img").lazyload({
     container: $("#container")
 }); 
```

——李

# highcharts - Highcharts：样式零 Y 值

> ID：15529819
> 
> 赞同：8
> 
> 时间：2013-03-20T16:52:52.823
> 
> 标签：highcharts

我有一个折线图，其中 Y 值为 -10 到 +60。我想设置 y=0 线的样式以从其他网格线中脱颖而出。这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T17:16:24.697

看看 yAxis 中的 plotLines API...

[http://api.highcharts.com/highcharts#yAxis.plotLines](http://api.highcharts.com/highcharts#yAxis.plotLines)

示例... [http://jsfiddle.net/48dUL/](http://jsfiddle.net/48dUL/)

```
$(function () {
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container'
    },
    xAxis: { 
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
    },
            yAxis: { 
        plotLines: [{
            color: '#C0C0C0',
            width: 5,
            value: 0
        }]
    },

    series: [{
        data: [-29.9, -71.5, -106.4, -129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }]
}); 
```

});

# c++ - 使用 O1 优化时出现 C++ 链接器错误

> ID：15529825
> 
> 赞同：5
> 
> 时间：2013-03-20T16:53:08.720
> 
> 标签：c++, gcc, linker, compiler-optimization

在一个已经存在且相当大的项目中，我启用了 gcc 编译器优化`O1`。

如果没有这个选项，一切都会构建、链接和运行良好。启用该选项后，主可执行文件将编译和链接，但在链接其中一个单元测试时出现链接器错误。

在这 2 次编译运行之间，我没有更改任何代码或生成文件，只有`O1`优化标志。

我得到的错误是：

```
Configuration.a(Builder.o): In function `Builder::Create() const':
Builder.cpp:123: undefined reference to `Factory::Instance()' 
```

在链接过程中的某个地方，它遇到以下行（第 123 行）`Builder.cpp`：cpp 文件

```
pObject = Factory::Instance()->CreateObject(); 
```

（除了函数的链接器错误`Instance`，我也从`CreateObject`函数中得到一个）

当我查看 时`Factory`，我看到： 头文件

```
class Factory { public:
    static Factory* Instance(); << rest of the file >> 
```

并且在cpp文件中

```
Factory* Factory::sInstance = 0;

Factory* Factory::Instance() {
    // Check if this is the first call
    if (sInstance == 0)
    {
        // Create only instance
        sInstance = new Factory();
    }

    // Address of the instance
    return sInstance; } 
```

首先，我尝试进行清理和重建，但这并没有做任何事情。我还使用 nm 转储了使用的符号`Factory.o`（一个有优化，一个没有优化）并比较了这些。

我看到一些符号被删除，但不是那个`Factory::Instance()`。我确实看到有关此功能的地址发生了变化，但我不认为这是一个问题。

同样通过谷歌，我发现了一些可能性，但我找不到与我的问题相匹配的东西。

有谁知道如何找到这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:45:25.443

> Configuration.a(Builder.o): 在函数`Builder::Create() const': Builder.cpp:123: undefined reference to`Factory::Instance()'

由于您已经验证了`Factory::Instance()` *中*定义的内容`Factory.o`，并且由于您显然在使用存档库，因此我的水晶球说，任何库包含的任何库`Factory.o`都在命令行*之前* `Configuration.a`，而它应该*在*它之后。

命令行上存档库的顺序[很重要](http://webpages.charter.net/ppluzhnikov/linker.html)。

# javascript - 在提交表单时禁用按钮的最简单方法？

> ID：15529836
> 
> 赞同：28
> 
> 时间：2013-03-20T16:53:36.483
> 
> 标签：javascript, jquery, forms

我一直在努力寻找防止重复提交表单的“正确”方法。SO上有很多相关的帖子，但没有一个对我有用。下面两个问题。

这是我的表格

```
<form method="POST">
    <input type="text" name="q"/>
    <button class="once-only">Send</button>
</form> 
```

这是我第一次尝试禁用双重提交：

```
$(document).ready(function(){
    $(".once-only").click(function(){
        this.disabled = true;
        return true;
    });
}); 
```

这是此处建议的方法：[使用 JS/Jquery 发布后禁用按钮](https://stackoverflow.com/questions/4852847/disable-button-after-post-using-js-jquery)。该帖子建议提交元素必须是输入而不是按钮，但测试两者没有区别。您可以使用这个小提琴自己尝试：http: [//jsfiddle.net/uT3hP/](http://jsfiddle.net/uT3hP/)

如您所见，这会禁用按钮，但也会阻止提交表单。在提交元素是按钮和输入元素的情况下。

**问题1：**为什么这个点击处理程序会停止提交表单？

搜索更多我找到了这个解决方案（来自[Why doesn't my form post when I disable the submit button to prevent double click?](https://stackoverflow.com/questions/400616/why-doesnt-my-form-post-when-i-disable-the-submit-button-to-prevent-double-clic)）

```
if($.data(this, 'clicked')){
    return false;
} else{
    $.data(this, 'clicked', true);
    return true;
} 
```

你可以用这个小提琴玩这个：http: [//jsfiddle.net/uT3hP/1/](http://jsfiddle.net/uT3hP/1/)

这确实有效，但是...

**问题2：** 这是我们能做的最好的吗？

我认为这将是一个基本的事情。方法 1 不起作用，方法 2 起作用，但我不喜欢它，感觉必须有更简单的方法。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2016-07-16T22:58:12.353

简单有效的解决方案是

```
<form ... onsubmit="myButton.disabled = true; return true;">
    ...
    <input type="submit" name="myButton" value="Submit">
</form> 
```

来源：[这里](http://www.the-art-of-web.com/javascript/doublesubmit/)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-20T16:55:29.980

您可以使用 jQuery 的[submit()](http://api.jquery.com/submit/)。在这种情况下，它应该看起来像这样：

```
$('form').submit(function(){
    $(this).children('input[type=submit]').prop('disabled', true);
}); 
```

这是一个有效的 jsFiddle（由 Mike 制作） - [http://jsfiddle.net/gKFLG/1/](http://jsfiddle.net/gKFLG/1/)。

如果您的提交按钮*不是*表单元素的直接子元素，则需要替换`children`为`find`. 此外，您的提交按钮也可能是一个`button`元素而不是一个`input`元素。例如，如果您使用[Bootstrap 水平表单](http://getbootstrap.com/css/#forms-horizontal)，就会出现这种情况。以下是片段的不同版本：

```
$('form').submit(function(){
    $(this).find('button[type=submit]').prop('disabled', true);
}); 
```

演示 jsFiddle - [http://jsfiddle.net/devillers/fr7gmbcy/](http://jsfiddle.net/devillers/fr7gmbcy/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-21T16:48:33.327

同样，我已经看到了一些示例，这个示例允许您通过超时来更改按钮被禁用的时间。它也只触发表单提交而不是按钮单击事件，这最初给我带来了一些问题。

```
 $('form').submit(function () {
        var button = $('#button');
        var oldValue = button.value;
        var isDisabled = true;

        button.attr('disabled', isDisabled);

        setTimeout(function () {
            button.value = oldValue;
            button.attr('disabled', !isDisabled);
        }, 3000)
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T16:56:46.043

您可以尝试使用以下代码：

```
$(document).ready(function(){
   $(".once-only").click(function(){
      this.submit();
      this.disabled = true;
      return true;
   });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T17:03:27.480

这应该有助于：

```
<form class="form-once-only" method="POST">
    <input type="text" name="q"/>
    <button type="submit" class="once-only">Send</button>
</form> 
```

Javascript：

```
$(document).ready(function(){
    $("form.form-once-only").submit(function () {
        $(this).find(':button').prop('disabled', true);
    });
} 
```

# wordpress - 可视化编辑器 WordPress 将嵌入 YouTube 视频的代码链接变形

> ID：15529838
> 
> 赞同：1
> 
> 时间：2013-03-20T16:53:44.320
> 
> 标签：wordpress, youtube

我可以通过将 URL 放入 HTML 代码中并在其周围留一些空间来嵌入 YouTube 视频（参见：[http](http://codex.wordpress.org/Embeds) ://codex.wordpress.org/Embeds ），例如：

```
<tr><td>

http://www.youtube.com/watch?v=xxxxxxxxx

</td></tr> 
```

这行得通。但是如果我用可视化编辑器打开页面并保存它，代码就会变形，如下所示：

```
<tr><td>http://www.youtube.com/watch?v=xxxxxxxxx</td></tr> 
```

并且网页中显示了一个链接，而不是（嵌入的）视频。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:22:42.007

此处正确的 HTML 注释 - 无论如何，您都不应该使用空行进行格式化。放入多个空行的正确方法是

```
<div style="clear:both;"></div> 
```

或者 `<br style="clear:both;" />`

如果您使用的是 GUI 文本编辑器，TinyMCE Advanced 可能会有所帮助，因为据说它有一个选项可以杀死它。

这是我在 wordpress 论坛上找到的。希望能帮助到你。

# sql-server - 如何使用 SQL 表列的 XML 数据并根据标签值执行任务

> ID：15529842
> 
> 赞同：0
> 
> 时间：2013-03-20T16:53:51.523
> 
> 标签：sql-server, ssis

我需要帮助。我想从表的列中获取 XML 数据。XML 数据有很多标签。其中一个标签包含如下值

```
<Code date= 30/03/2013> 
<apr id =1> -2 </apr>
<rdv id =2> 1 </rdv>
</code> 
```

我需要运行一个检查日期的特定任务。就像如果`today's date= (Code date -2)`或

```
today's date = (code date + 1) 
```

运行邮件任务。

我应该怎么做？请原谅我的 XML 数据格式。我对 XML 很幼稚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:23:36.567

*   创建 2 个[变量](https://www.simple-talk.com/sql/ssis/ssis-basics-introducing-variables/)来存储 XML 列日期值，另一个用于获取当前日期。要编写表达式，请选择变量，右键单击它。在属性窗口中设置`EvaluateAsExpression =true`并编写`expression`

    ```
     Name          DataType   Expression 
     ExecDate       DateTime
     CurrentDate    DateTime    GETDATE() 
    ```

*   使用`Execute SQL Task`.Set `Resultset`to`Single Row`并编写以下代码从表中的 XML 列中读取日期值

    ```
    SELECT
    convert(datetime,XMLData.value('(/Code/@date)[1]', 'varchar(10)'),103) as PkgDate
    from yourTable 
    ```

[SQL Fiddle](http://sqlfiddle.com/#!3/b5137/5)中的演示

*   在`resultset tab` 地图中，上面带有变量的 sql 查询的输出`ExecDate`

    ```
    Result Name    Variable Name
    PkgDate           ExecDate 
    ```

*   [在Precedence Constraint](https://www.simple-talk.com/sql/ssis/working-with-precedence-constraints-in-sql-server-integration-services/)`SEND Mail TASK`之后放置另一个 Task 或组件 Ex`Execute SQL Task`并写一个表达式。

    ```
    Expression : @ExecDate==@CurrentDate 
    ```

只有当 XML 列中的日期值与存储在变量中的当前日期匹配时，才会执行`@CurrentDate`之后的其他组件`Execute SQL Task`。

```
today's date= (Code date -2) or today's date = (code date + 1) run a mailer task. 
```

为了执行上述表达式，您需要更改 sql 代码`Execute SQL Task`

获取 CodeDate +1

```
 SELECT
    Dateadd(day,1,convert(datetime,XMLData.value('(/Code/@date)[1]', 'varchar(10)'),103)) as PkgDate
    from yourTable 
```

我现在没有 SSIS 环境来测试它，但你应该这样做

# msbuild - Web Deploy 3.0 不能在 CI 服务器上运行

> ID：15529845
> 
> 赞同：4
> 
> 时间：2013-03-20T16:53:59.400
> 
> 标签：msbuild, jenkins, webdeploy, microsoft-web-deploy

从我的本地机器到开发服务器，Web Deploy 3.0 可以使用以下命令与 Visual Studio 2012 发布配置文件一起正常工作：

> msbuild .\myproj.csproj /verbosity:d /p:DeployOnBuild=true;PublishProfile=Develop;VisualStudioVersion=11.0;AllowUntrustedCertificate=true;username=xx;password=xx

从 CI 服务器（可能是 Jenkins，但这应该适用于任何服务器）运行相同的命令时，该命令成功完成，但没有部署任何网站。

比较日志输出时，构建服务器似乎跳过了很大一部分。它发生在下面列出的 2 行之后（这 2 行输出在本地或 CI 服务器上运行时是相同的）：

> 项目“C:_Application\proj\src\proj.Web\proj.Web.csproj”中文件“C:\windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets”中的目标“PrepareForRun”（目标“CoreBuild”取决于它）：在项目“proj.Web.csproj”中完成构建目标“PrepareForRun”。

在本地运行时，接下来会显示如下所示的内容（加上数百行日志记录）：

> 由于错误条件，已跳过目标“InsertAdditionalWebCofigConnectionStrings”；($(InsertAdditionalWebCofigConnectionStrings) And '@(_ConnectionStringsToInsert)' != '') 被评估为 (True And '' != '')。在项目“C:_Application\proj\src\proj.Web”的文件“C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets”中定位“_CleanWPPIfNeedTo” \proj.Web.csproj”（目标“PipelineCollectFilesPhase”取决于它）：任务“ReadLinesFromFile”

在 CI 服务器上，此目录似乎缺失：

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets

缺少目标会导致它静默失败吗？这个文件夹来自哪里（缺少 CI 服务器上的整个 Web 文件夹）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:04:48.940

您是否在构建服务器上安装了 Visual Studio？起初这似乎是一件奇怪的事情（并且不是绝对必要的），但它肯定是以最简单的方式解决所有这些问题。

您可以手动将所需的目标文件从您的 PC 复制到构建服务器上，但您将进行试错游戏以使其正常工作。

此外，如果 MS 发布了新的`out of band`更新，就像`Asp.Net and Web Tool 2012.2`他们最近所做的那样，构建服务器的安装过程比尝试找出哪些目标发生了变化并手动复制它们要容易得多。

让我知道这是否有帮助。

# devise - 加密设计令牌

> ID：15529846
> 
> 赞同：1
> 
> 时间：2013-03-20T16:54:00.387
> 
> 标签：devise, ruby-on-rails-3.2, attr-encrypted

我正在使用带有令牌身份验证的设计，现在，我想加密数据库中的令牌。谁能给我一个提示，在哪里设计从数据库存储/检索令牌？

我还使用了**attr_encrypted** gem，一旦找到正确的位置，整个加密应该相当容易。

**编辑：**

我已经像这里描述的那样实现了令牌身份验证：http: [//zyphdesignco.com/blog/simple-auth-token-example-with-devise](http://zyphdesignco.com/blog/simple-auth-token-example-with-devise)

我在用户模型中添加了以下行，它应该加密 authentication_token

```
attr_encrypted :authentication_token, :key => 'a secret key', :attribute => 'authentication_token' 
```

当我运行它并尝试登录时，我收到以下错误消息：

```
Completed 500 Internal Server Error in 364ms

SystemStackError - stack level too deep:
(gem) actionpack-3.2.13/lib/action_dispatch/middleware/reloader.rb:70:in `' 
```

似乎与 devise 和 attr_encrypted 存在冲突，并且两者都在为重新定义 authentication_token 方法而战（感谢@sbfaulkner 的提示）

也许有人有类似的问题并且知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:17:41.167

关于 Token Authenticable 策略的重要部分在[`Devise::Models:: TokenAuthenticatable`模块](https://github.com/plataformatec/devise/blob/v2.2.3/lib/devise/models/token_authenticatable.rb)中- 它使用一组简单的方法：

*   用于`find_for_token_authentication`验证资源
*   `ensure_authentication_token`/`ensure_authentication_token!`应该用于为新资源生成令牌 - Devise 不会自行调用它。

如果`attr_encrypted`gem 与 A​​R 模型兼容，那么我相信您不会对 Devise 有任何问题，但确保这一点的最佳方法是尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T12:45:28.060

在我的用户模型上，这是我的做法：

```
before_save :ensure_authentication_token

attr_encrypted :authentication_token, :key => 'my key'

def ensure_authentication_token
  if authentication_token.blank?
    self.authentication_token = generate_authentication_token
  end
end

private

def generate_authentication_token
  loop do
    token = User.encrypt_authentication_token(Devise.friendly_token)
    break token unless User.where(encrypted_authentication_token: token).first
  end
end 
```

秘密就在这个方法中：`encrypt_authentication_token`attr_encrypted 创建。

# javascript - 在 Firefox 扩展中获取响应（标题和正文）

> ID：15529851
> 
> 赞同：3
> 
> 时间：2013-03-20T16:54:11.837
> 
> 标签：javascript, firefox, firefox-addon

我正在尝试实现一个功能，该功能将为我提供浏览器中每个 http 请求的响应文本和（所有）响应标头，我在这里读过一点：http: [//www.softwareishard.com/blog/ firebug/nsitraceablechannel-intercept-http-traffic/](http://www.softwareishard.com/blog/firebug/nsitraceablechannel-intercept-http-traffic/)

我不知道如何从 TracingListener 对象中提取响应。以前有人处理过吗？？谢谢！

我的代码：

```
 const Cc = Components.classes;
const Ci = Components.interfaces;

// Helper function for XPCOM instanciation (from Firebug)
function CCIN(cName, ifaceName) {
    return Cc[cName].createInstance(Ci[ifaceName]);
}

// get the observer service and register for the two coookie topics.
var observerService = Components.classes["@mozilla.org/observer-service;1"]
                                .getService(Components.interfaces.nsIObserverService);

// Copy response listener implementation.
function TracingListener() {
    this.originalListener = null;
    this.receivedData = [];   // array for incoming data.
}

TracingListener.prototype =
{

    originalListener: null,
    receivedData: null,   // array for incoming data.

    onDataAvailable: function(request, context, inputStream, offset, count)
    {
       var binaryInputStream = CCIN("@mozilla.org/binaryinputstream;1",
                "nsIBinaryInputStream");
        var storageStream = CCIN("@mozilla.org/storagestream;1", "nsIStorageStream");
        binaryInputStream.setInputStream(inputStream);
        storageStream.init(8192, count, null);

        var binaryOutputStream = CCIN("@mozilla.org/binaryoutputstream;1",
                "nsIBinaryOutputStream");

        binaryOutputStream.setOutputStream(storageStream.getOutputStream(0));

        // Copy received data as they come.
        var data = binaryInputStream.readBytes(count);

        this.receivedData.push(data);

        binaryOutputStream.writeBytes(data, count);
        this.originalListener.onDataAvailable(request, context,storageStream.newInputStream(0), offset, count);
    },

    onStartRequest: function(request, context) {
        this.originalListener.onStartRequest(request, context);
    },

    onStopRequest: function(request, context, statusCode)
    {
        try {
            if (request.originalURI && piratequesting.baseURL == request.originalURI.prePath && request.originalURI.path.indexOf("/index.php?ajax=") == 0) {

                dump("\nProcessing: " + request.originalURI.spec + "\n");
                var date = request.getResponseHeader("Date");

                var responseSource = this.receivedData.join();
                dump("\nResponse: " + responseSource + "\n");

                piratequesting.ProcessRawResponse(request.originalURI.spec, responseSource, date);
            }
        } catch(e) { dumpError(e);}

        this.originalListener.onStopRequest(request, context, statusCode);
    },

    QueryInterface: function (aIID) {
        if (aIID.equals(Ci.nsIStreamListener) ||
            aIID.equals(Ci.nsISupports)) {
            return this;
        }
        throw Components.results.NS_NOINTERFACE;
    }
}

// create an nsIObserver implementor
var listener = {
  observe : function(aSubject, aTopic, aData) {
    // Make sure it is our connection first.
    //if (aSubject == gChannel) {
      var httpChannel = aSubject.QueryInterface(Components.interfaces.nsIHttpChannel);
      if (aTopic == "http-on-modify-request") {
         // ...
            httpChannel.setRequestHeader("X-Hello", "World", false);
      } else if (aTopic == "http-on-examine-response") {
         // ...
         //alert(JSON.stringify(aData));
          var newListener = new TracingListener();
          aSubject.QueryInterface(Ci.nsITraceableChannel);
          newListener.originalListener = aSubject.setNewListener(newListener);
         alert(httpChannel.getResponseHeader("Location"));
         //alert(httpChannel.getAllResponseHeaders());
      }
    //}
  },

  QueryInterface : function(aIID) {
    if (aIID.equals(Components.interfaces.nsISupports) ||
        aIID.equals(Components.interfaces.nsIObserver))
      return this;
    throw Components.results.NS_NOINTERFACE;
  }
};
observerService.addObserver(listener, "http-on-modify-request", false);
observerService.addObserver(listener, "http-on-examine-response", false); 
```

# java - Java If -else 语句未按预期工作

> ID：15529856
> 
> 赞同：-3
> 
> 时间：2013-03-20T16:54:20.090
> 
> 标签：java, if-statement

所以我正在编写一个相当低级别的Java编程程序。这就是我遇到的问题：

```
//The String fillText is given a value earlier in the program
if ("".equals(txa1.getText()))
{
    txa1.setText(fillText);
    txa1.setVisible(true);
}
else if ("".equals(txa2.getText()))
{
    txa2.setText(fillText);
    txa2.setVisible(true);
}
else if ("".equals(txa3.getText()))
{
    txa3.setText(fillText);
    txa3.setVisible(true);
}
else if ("".equals(txa4.getText()))
{
    txa4.setText(fillText);
    txa4.setVisible(true);
}
else if ("".equals(txa5.getText()))
{
    txa5.setText(fillText);
    txa5.setVisible(true);
}
... 
```

此代码似乎总是用 fillText 填充所有文本区域（txaX）。我希望它只执行第一个返回 true 的语句，然后跳出 if-else-statement。

我尝试使用 switch-case 来完成它，但最终失败了，因为在程序运行期间更改了字符串。

怎么了？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:59:02.673

```
"".equals(txa1.getText()) 
```

我认为每个条件的上述条件都返回真。

`getText()`方法总是返回空字符串，即“”；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:00:25.853

它在循环中。肯定是导致问题的原因。没有循环，它只会进入一个块。没有循环也不可能执行。当我们使用 if else 时，只会执行一个块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:37:41.390

你必须仔细检查你的条件，如果条件为假，它基本上会执行前辈。我建议您多考虑一下您要达到的目标的逻辑..

# .net - .NET 图像类的内存使用和碎片：位图与元文件

> ID：15529859
> 
> 赞同：10
> 
> 时间：2013-03-20T16:54:26.517
> 
> 标签：.net, image, memory

由于看似过早的 Out of Memory 异常，我们一直在仔细检查各种 .NET 结构的内存使用情况……尤其是大对象，它们往往会使大对象堆碎片化，从而导致过早的 Out of Memory 异常。一个有点令人惊讶的领域是 .NET Image 类：Bitmap 和 Metafile。

以下是我们认为我们已经学到的东西，但无法找到 MS 文档来验证，因此我们将不胜感激其他人可以提供的任何确认：

(1) 当您从压缩的光栅文件（JPG、PNG、GIF 等）创建位图对象时，它会在该文件的全分辨率下为完全未压缩的像素阵列消耗内存。因此，例如，一个 9000x3000 像素的 5MB JPG 将被扩展为 9000x3000x3 字节（假设 24 位颜色，无 alpha），或消耗 81MB 内存。正确的？

(1a) 有一些证据（见下面的 2b）它还存储原始压缩格式......所以，在这种情况下实际上是 86MB。但这还不清楚……有人知道吗？

(2) 当您创建一个 Metafile 对象，然后在其中绘制一个光栅文件（JPG、PNG、GIF 等）时，它只会为压缩文件消耗内存。因此，如果您将 9000x3000 像素的 5MB JPG 绘制到 Metafile 中，它只会消耗大约 5MB 的内存。正确的？

(2a) 要将光栅文件绘制到 Metafile 对象中，唯一的方法似乎是使用文件加载 Bitmap，然后将 Bitmap 绘制到 Metafile 中。有没有更好的方法不涉及临时加载巨大的位图数据（并导致相关的内存碎片）？

(2b) 当您将位图绘制到元文件中时，它使用大小类似于原始压缩文件的压缩格式。它是否通过将原始压缩文件存储在位图中来做到这一点？还是通过使用原始压缩设置重新压缩扩展位图来做到这一点？

(3) 我们最初假设大（>85KB）图像对象将被放置在大对象堆中。事实上，情况似乎并非如此。相反，每个位图和每个元文件都是小对象堆中的一个 24 字节对象，它指的是包含真实数据的本机内存块。正确的？

(3a) 我们假设这样的 Native Memory 就像 Large Object Heap 一样，不能被压缩……一旦大对象被放入 Native Memory 就永远不会被移动，因此 Native Memory 的碎片化可能会导致尽可能多的问题大对象堆的碎片。真的？或者是否有更有效的底层位图/元文件数据的特殊处理？

(3b) 因此，似乎有四个独立的内存块被单独管理，每个内存块用完都会导致相同的内存不足异常：小对象堆（托管对象 < 85KB，由 GC 压缩），大对象堆（由 GC 收集的 > 85KB 的托管对象，但未压缩）、本机内存（非托管对象，可能未压缩）和桌面堆（管理窗口句柄和此类有限资源）。我是否正确记录了这四个？还有其他我们应该注意的吗？

任何人都可以就上述内容提供的任何清晰度将不胜感激。如果有很好的书或文章可以充分解释上述内容，请告诉我。（我很高兴完成必读；但绝大多数书籍都没有那么深，因此不要告诉我任何我不知道的事情。）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:17:36.087

有两种存储图像数据的方法：作为像素或作为矢量。`Bitmap`是关于像素的，`Metafile`是关于像素*和*向量的。矢量数据的存储效率要高得多。

为了允许对位图进行操作，它们的数据必须未压缩地存储在内存中。否则`GetPixel`，`SetPixel`将不得不为每次更改解压缩、更改、重新压缩位图（如果这甚至可以开始的话）。

[元文件](http://en.wikipedia.org/wiki/Windows_Metafile)由 Microsoft 创建，旨在与 GDI 一起使用，因此它可能包含一些内存效率更高的压缩算法，这些算法直接与显卡一起使用。此外，元文件没有`GetPixel` `SetPixel`方法，因此不必在内存中解压缩以允许操作。

* * *

您不必关心运行时使用的内存池。还有更多，运行时决定它放置对象的位置。此外，您不应该关心*可能*因使用（大）对象而引起的内存不足异常。运行时将尽其所能（将对象放在其他对象之间的间隙中，压缩堆，扩展可用的虚拟内存）以确保您不会遇到内存不足的异常。如果您确实遇到了这样的异常，那么您的代码中可能还有另一个问题需要修复（例如内存泄漏）。

内存堆、映射和表的概述：（[来源](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx)）

![.NET 中使用的堆、映射和表](../Images/ae181651f64e88071eeee86bb11efd10.png)

* * *

此外，您将超过 85 KiB 的对象放置在大型对象堆上的假设并不完全正确。*对于当前版本的 CLR 中的**大多数*对象，Is 是正确的，但例如，在大型对象堆上也分配了一个 8 KiB 的双精度数组（1000 个双精度）。让运行时自己关心这个。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:10:52.117

我知道其中一些的答案：

(1) 是的，这就是Bitmap图像的定义。

(3) 是的，这就是Bitmap实现IDisposable接口的原因。

(3a) 这似乎令人惊讶。完成后，您是否在 Bitmap 对象上运行 Dispose() 方法？

(3b) 至少那四个，是的。*

# ios - 这个 run_on_main() 宏有什么问题吗？

> ID：15529860
> 
> 赞同：3
> 
> 时间：2013-03-20T16:54:27.057
> 
> 标签：ios, objective-c, grand-central-dispatch

Objective-C 大师，

我一直在使用以下宏来确保一个块在主线程上运行。这个想法很简单：如果我当前在主线程上，那么我将立即运行该块。如果当前线程不是主线程，那么我将要在主线程上异步运行的块排队（这样它就不会阻塞当前线程）。

你觉得这有什么问题吗？这里有什么不安全的，或者导致我不知道的错误吗？有没有更好的方法来做到这一点？

```
#define run_on_main(blk)    if ([NSThread isMainThread]) { blk(); } else { dispatch_async(dispatch_get_main_queue(), blk); } 
```

示例用法：

```
-(BOOL)loginCompletedSuccessfully
{
    NSLog(@"loginCompletedSuccessfully");
    //  This may be called from a network thread, so let's
    //  ensure the rest of this is running on the main thread.
    run_on_main(^{
        if (_appStartupType == AppLaunch) {
            self.storyboard = [UIStoryboard storyboardWithName:DEVICED(@"XPCStoryboard") bundle:nil];
            self.navigationController = [storyboard instantiateInitialViewController];
        }
        [self.window setRootViewController:self.navigationController];
    });
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T17:12:27.403

这可能会导致执行顺序出现令人讨厌的细微错误。

举这个简单的例子（在主线程上）

```
__block NSInteger integer = 5;

run_on_main(^{
  integer += 10;
});

NSLog(@"From Main %d", integer); 
```

这打印结果`15`

相同的代码在后台线程中运行

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
  __block NSInteger integer = 5;

  run_on_main(^{
    integer += 10;
  });

  NSLog(@"From background %d", integer);
}); 
```

结果将是`5`……或`15`取决于线程之间的竞争条件。

这种不一致可能会让你失望。

为什么不只`dispatch_async`在这两种情况下都使用，并且知道两者现在都将表现出相同的行为是安全的。这是安全的，因为您使用`async`的是非阻塞的

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T16:59:56.623

与往常一样，如果有其他选择，请避免使用宏。在这种情况下，很容易使用一个函数来代替：

```
static inline void run_on_main(dispatch_block_t block)
{
    if ([NSThread isMainThread]) {
        block();
    } else {
        dispatch_async(dispatch_get_main_queue(), block);
    }
} 
```

这相当于你的宏定义；你甚至可以把它放在同一个地方。优点是您可以获得语法检查的编译器支持、块的 Xcode 语法完成（非常有用）、调试时的调试器支持等等。

另外：`run_on_main`在您的源代码中不会出现棕色；）

# netbeans - 带有下拉菜单的 netbeans 搜索字段

> ID：15529863
> 
> 赞同：1
> 
> 时间：2013-03-20T16:54:37.750
> 
> 标签：netbeans, searchbar

是否有任何用于在 netbeans 中创建桌面应用程序的带有下拉菜单的搜索栏库？

# android - 如何在android中只选择一个联系人

> ID：15529869
> 
> 赞同：0
> 
> 时间：2013-03-20T16:54:46.627
> 
> 标签：android, android-contacts, contactscontract

我只想在我的应用中选择一个联系人。但问题是当我选择一个联系人时，它会选择我拥有的所有联系人。请查看我的代码。

这是代码：

```
btnContact.setOnClickListener(new View.OnClickListener() {                        
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
            startActivityForResult(intent, RQS_PICK_CONTACT);
        }
    });

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  // TODO Auto-generated method stub
  super.onActivityResult(requestCode, resultCode, data);
  ContentResolver cr = getContentResolver();
  Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);

  if (cur.getCount() > 0) {   
   while (cur.moveToNext()) {
       String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));

       if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
           // get the phone number
           Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null, 
                                  ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                                  new String[]{id}, null);
           while (pCur.moveToNext()) {
               String name = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                 String phone = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                 txtPhoneNo.append(name + " <" + phone + ">");
           }               
           pCur.close();
 // Get note.......
           String noteWhere = ContactsContract.Data.CONTACT_ID + " = ? AND " + ContactsContract.Data.MIMETYPE + " = ?"; 
           String[] noteWhereParams = new String[]{id, 
           ContactsContract.CommonDataKinds.Note.CONTENT_ITEM_TYPE}; 
                   Cursor noteCur = cr.query(ContactsContract.Data.CONTENT_URI, null, noteWhere, noteWhereParams, null); 
           if (noteCur.moveToFirst()) { 
               String note = noteCur.getString(noteCur.getColumnIndex(ContactsContract.CommonDataKinds.Note.NOTE));
               textCode.append(note);
               try {
                File myFile = new File("/sdcard/file.txt");
                myFile.createNewFile();
                FileOutputStream fOut = new FileOutputStream(myFile);
                OutputStreamWriter myOutWriter = 
                                        new OutputStreamWriter(fOut);
                myOutWriter.append(textCode.getText());
                myOutWriter.close();
                fOut.close();

            } catch (Exception e) {

            }
           } 
           noteCur.close();

       }}
  }
} 
```

我的代码有什么问题吗？

提前致谢。

# javascript - 如何用正则表达式打破字符串

> ID：15529871
> 
> 赞同：1
> 
> 时间：2013-03-20T16:55:05.767
> 
> 标签：javascript, jquery, regex, string

我需要使用 javascript 打破这种类型的字符串：

```
3a.jpg;44.jpg;45.jpg;43.jpg;3a.jpg;44.jp;45.jpg;43.jpg; 
```

进入这个：

```
3a.jpg
44.jpg
... 
```

尝试过类似的东西：

```
var regex = /(\d+)/g;
console.log(text.match(regex));
arr.push(text.match(regex)); 
```

使用此代码，我得到如下信息：`3a 44 45....`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T16:56:25.173

```
var array = yourString.split(";"); 
```

附带说明一下，我坚信正则表达式通常应该作为字符串操作的最后选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:59:16.820

您甚至可以使用该函数轻松拆分任何字符串，而无需使用正则表达式`split`。

例如：

`stringToSplit.split(";");`

[更多信息在这里...](http://www.w3schools.com/jsref/jsref_split.asp)

# cakephp - CakePHP 允许正斜杠作为命名参数值

> ID：15529872
> 
> 赞同：1
> 
> 时间：2013-03-20T16:55:10.540
> 
> 标签：cakephp

我正在使用 cakePHP 并陷入困境。我想将命名参数传递给包含正斜杠的操作。例如

[http://www.test.com/claim/index/user:rLbu78h2RpVwLTy/bki3pK1NkkXhCCaYfQ/zXDIfZR4=](http://www.test.com/claim/index/user:rLbu78h2RpVwLTy/bki3pK1NkkXhCCaYfQ/zXDIfZR4=)

基本上 "rLbu78h2RpVwLTy/bki3pK1NkkXhCCaYfQ/zXDIfZR4=" 是一个参数，但蛋糕只识别它的第一部分，直到第一个斜线。

打印命名参数数组时，我得到：

```
Array
(
    [user] => rLbu78h2RpVwLTy
) 
```

如何转义正斜杠并允许 cake 接受它作为命名参数的一部分？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T09:17:49.713

## 不要使用命名参数

虽然您*可以*使用命名参数 ( `/foo/this-is:a-named-parameter/`)，但最好坚持使用普通的 url 位置/路径参数和/或`GET`参数。随着时间的推移，事实证明，使用命名参数传递信息并不是一个很好的解决方案。

## 使用尾随星路线

如果您修改您使用的网址格式，例如：

```
/claim/index/<user token> 
```

然后，您可以使用[尾随星形路由](http://book.cakephp.org/2.0/en/development/routing.html#connecting-routes)`/index/`来捕获单个变量中发生的所有内容：

```
Router::connect(
    '/claim/index/**',
    array('controller' => 'claims', 'action' => 'index')
); 
```

`/index/`这样，在您的索引操作中收到它之后会发生什么并不重要：

```
// Request to /index/rLbu78h2RpVwLTy/bki3pK1NkkXhCCaYfQ/zXDIfZR4=

function index($user) {
    // $user === 'rLbu78h2RpVwLTy/bki3pK1NkkXhCCaYfQ/zXDIfZR4='
} 
```

# graph - 开源的基于图的 SVM 内核

> ID：15529881
> 
> 赞同：1
> 
> 时间：2013-03-20T16:55:29.103
> 
> 标签：graph, classification, svm

最近的研究提出了使用支持向量机对图（而不是平面特征向量）进行分类或表征。C/C++ 中是否有任何可用的开源代码可以执行此类分类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-13T07:29:41.187

[ChemCPP](http://chemcpp.sourceforge.net/html/index.html)面向化学信息学，但有一些您可能会发现有用的图形内核计算代码。

Karsten Borgwardt 在 Graph Kernels 上做了很多工作。他的页面有计算这些内核的代码[在这里](http://webdav.tuebingen.mpg.de/u/karsten/Forschung/research.html?page=research&topic=JMLR10_graphkernels&html=JMLR10 "图内核")。

# java - 如何返回 Eclipse 用来执行我的主要方法的命令？

> ID：15529888
> 
> 赞同：2
> 
> 时间：2013-03-20T16:55:37.127
> 
> 标签：java, eclipse

我在一个巨大的项目中的一个类中构建了一个 main 方法，该项目具有大量来自 Maven 和外部 jar 的依赖项。使用 Eclipse 中的内置运行功能可以让 main 方法按需要执行，但现在我想创建一个 run.sh 脚本来执行 main 方法。由于 java 命令的复杂性，我非常希望有一种方法可以实际导出 Eclipse 用于执行的命令，而不必从头开始手动构建它。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:02:57.690

你可以从调试的角度得到它。执行您的应用程序，切换到调试透视图，右键单击应用程序下的`javaw.exe`或`java.exe`并选择`Properties`. 这将弹出`Process properties`对话框，其中包含`Command Line`用于执行的对话框。

![在此处输入图像描述](../Images/bcfadccd467ed45b6e7054c74c065d9b.png)

# android - Android 新的 Eclipse android sdk bundle 没有代码建议

> ID：15529889
> 
> 赞同：1
> 
> 时间：2013-03-20T16:55:37.240
> 
> 标签：android, eclipse, adt, eclipse-adt

我最近从 android 开发者网站下载了新的 adt sdk eclipse 包，它运行良好，但是当我按 control+space 进行代码建议时，没有代码出现。所以我不得不切换回以前的 Eclipse 包，

谁能帮我吗？所以我可以使用新的 eclipse android sdk 包

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T18:51:32.797

感谢 rigotti 的评论，我从[https://stackoverflow.com/a/11506693/580532找到了答案](https://stackoverflow.com/a/11506693/580532)

在 Eclipse 中转到

窗口 -> 首选项 -> Java -> 编辑器 -> 内容辅助 -> 高级

并选中标有“Java Proposals”的框并点击 Apply。

这解决了我的问题。希望能帮助到你。

# syntax - 有人可以为我解释一下吗 - for (int i = 0; i < 8; i++)

> ID：15529893
> 
> 赞同：9
> 
> 时间：2013-03-20T16:55:41.100
> 
> 标签：syntax, for-loop

有人可以用最简单的术语解释一下，就好像你在和一个白痴说话（因为你是），这段代码实际上在说/在做什么

```
for (int i = 0; i < 8; i++) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-20T16:56:58.473

这是一个循环，它说，好吧，每次`i`小于 8 时，我都会执行代码块中的任何操作。`i`到了8点，我就停下来。循环每次迭代后，递增`i`1 ( `i++`)，这样循环最终会在满足`i < 8`(`i`变为 8，因此不再小于) 条件时停止。

例如，这个：

```
for (int i = 0; i < 8; i++)
{
   Console.WriteLine(i);
} 
```

将输出：`01234567`

看看代码是如何执行 8 次的？

就数组而言，当您不知道数组的大小但又想对其中的每一项进行操作时，这会很有帮助。你可以做：

**免责声明：以下代码会因语言而异，但原理保持不变**

```
Array yourArray;

for (int i = 0; i < yourArray.Count; i++)
{
    Console.WriteLine(yourArray[i]);
} 
```

这里的区别是执行次数**完全取决于**数组的大小，所以它是动态的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-20T17:02:43.800

> for ~~(int i = 0; i < 8; i++)~~

这是一个`for`循环，它将根据括号内的条件多次执行下一条语句。

> ~~for (~~ int i = 0 ~~; i < 8; i++)~~

从设置开始`i = 0`

> ~~对于 (int i = 0;~~ i < 8 ~~; i++)~~

继续循环 while `i < 8`。

> ~~对于 (int i = 0; i < 8;~~ i++ ~~)~~

每次你在循环中，增加`i`1。

例如;

```
for (int i = 0; i < 8; i++)
    do(i); 
```

`i`会依次调用do(0)、do(1)、...do(7)，达到8就停止（即为`i < 8`假）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T17:00:29.623

循环的一般视图是

`for (initialization; condition; increment-decrement){}`

第一部分初始化代码。第二部分是条件，只要它为真，就会继续运行循环。最后一部分是循环每次迭代后将运行的内容。最后一部分通常用于递增或递减计数器，但并非必须如此。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-20T17:01:54.813

```
for(<first part>; <second part>; <third part>)
{
    DoStuff();
} 
```

此代码的评估方式如下：

1.  运行 <第一部分>
2.  如果 <second part> 为假，跳到最后
3.  做东西（）;
4.  运行 <第三部分>
5.  转到 2

所以对于你的例子：

```
for (int i = 0; i < 8; i++)
{
    DoStuff();
} 
```

1.  将 i 设置为 0。
2.  如果 i 不小于 8，则跳到最后。
3.  做东西（）;
4.  我++
5.  转到 2

所以循环运行一次，i 设置为从 0 到 7 的每个值。注意 i 递增到 8，但随后循环立即结束；它不会在 i 设置为 8 时运行。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-20T17:07:57.983

与下一个想法相同：

“从 i = 0 开始，而 i 小于 8，并在括号末尾的 i 上加一，执行括号内的说明”

它也与以下内容相同：

```
while( i < 8 )
{
    // instrucctions like:
    Console.WriteLine(i);
    i++;
} 
```

For 语句是编码的基础，它对它的理解是有用的。

这是重复 n 次相同指令或浏览（或对每个元素执行某些操作）数组的方法

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-20T17:05:36.270

```
for (int i = 0; i < 8; i++) {
  //code
}
```

简单来说

```
int i = 0;
if (i < 8) //code
i = i + 1; //i = 1
if (i < 8) //code
i = i + 1;  //i = 2
if (i < 8) //code
i = i + 1;  //i = 3
if (i < 8) //code
i = i + 1; //i = 4
if (i < 8) //code
i = i + 1; //i = 5
if (i < 8) //code
i = i + 1; //i = 6
if (i < 8) //code
i = i + 1; //i = 7
if (i < 8) //code
i = i + 1; //i = 8
if (i < 8) //code - this if won't pass 
```

# java - 如何在Java中以类似的方法转换php unpack()

> ID：15529894
> 
> 赞同：3
> 
> 时间：2013-03-20T16:55:41.263
> 
> 标签：java, php

我根本没有 PHP 编码经验。但是在为我的 Java 项目寻找解决方案时，我发现了一个 PHP 中的问题示例，这对我来说很陌生。

谁能解释一下`unpack('N*',"string")`PHP功能的工作和结果以及如何在Java中实现它？

一个例子对我有很大帮助！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T17:41:42.283

[在 PHP](http://php.net/unpack)中（以及[在 Perl](http://perldoc.perl.org/perlpacktut.html)中，PHP 从中复制了它），`unpack("N*", ...)`接受一个字符串（实际上表示一个字节序列）并将它的每个 4 字节段解析为有符号的 32 位大端（“**网络**字节顺序” ) 整数，以数组的形式返回它们。

在 Java 中有几种方法可以做到这一点，但一种方法是将输入字节数组包装在 a 中[`java.nio.ByteBuffer`](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)，将其转换为 an `IntBuffer`，然后从中读取整数：

```
public static int[] unpackNStar ( byte[] bytes ) {
    // first, wrap the input array in a ByteBuffer:
    ByteBuffer byteBuf = ByteBuffer.wrap( bytes );

    // then turn it into an IntBuffer, using big-endian ("Network") byte order:
    byteBuf.order( ByteOrder.BIG_ENDIAN );
    IntBuffer intBuf = byteBuf.asIntBuffer();

    // finally, dump the contents of the IntBuffer into an array
    int[] integers = new int[ intBuf.remaining() ];
    intBuf.get( integers );
    return integers;
} 
```

当然，如果您只想遍历整数，则不需要`IntBuffer`or 数组：

```
ByteBuffer buf = ButeBuffer.wrap( bytes );
buf.order( ByteOrder.BIG_ENDIAN );

while ( buf.hasRemaining() ) {
    int num = buf.getInt();
    // do something with num...
} 
```

事实上，迭代这样的对象是一种方便的方式来模拟Perl 或 PHP 中`ByteBuffer`更复杂示例的行为。`unpack()`

（*免责声明：我没有测试过这段代码。我相信它应该可以工作，但我总是有可能打错或误解了一些东西。请在使用前测试。*）

Ps. If you're reading the bytes from an input stream, you could also wrap it in a [`DataInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html) and use its [`readInt()`](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html#readInt%28%29) method. Of course, it's also possible to use a [`ByteArrayInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayInputStream.html) to read the input from a byte array, achieving the same results as the `ByteBuffer` examples above.

# java - 在基于文本的游戏中处理时间 (Java)

> ID：15529900
> 
> 赞同：6
> 
> 时间：2013-03-20T16:55:50.743
> 
> 标签：java, text-based, system-clock

在学习 Java 时，我正在尝试开发一个基本的基于文​​本的游戏。我希望能够计算游戏中的回合数，以此来管理某些事件的节奏。例如，更衣室可能被限制为每轮一次（在测试代码中为一秒）。小型生物可能会以更高的速度攻击或更换房间，而较大的生物可能更麻烦。目前很好？伟大的。

所以，我做了这个，并立即意识到每次 while 循环等待玩家输入命令时我都会碰到一个块。代码：

```
private void startPlaying() {
    //declare clock/round variables.
    int lastRound = 0;
    int currentRound = 0;
    long lastTime = System.currentTimeMillis();
    long currentTime;

    while (player.getIsPlaying()){
        //Clocking
        currentTime = System.currentTimeMillis();
        if ((lastTime + 1000) < currentTime) {
            lastTime = currentTime;
            lastRound = currentRound;
            currentRound++;
            System.out.println("Current round:\t" + currentRound + "\tCurrent time:\t" + currentTime); //EDIT:NOTE: This is just a test line to observe the loop.
        }//end if (Clocking)

        Command command = new Command();
        String[] commandString = command.setAll(); //Array gets parsed elsewhere.
        player.doCommand(commandString);  
        //Class Player extends Pawn extends Actor; Pawn has most command methods.
    }
    finishPlaying();
}//END STARTPLAYING() 
```

所以，这是我的问题：

有没有办法我可以使用单独的方法来记录时间/回合并发到 while 循环向玩家展示命令提示符？

如果没有，是否有其他方法可以使这成为我还没有看到/实践过的非问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:07:22.777

看看[并发教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)。使用线程，您可以在不停止其他进程的情况下等待用户输入（并使这些其他进程同时执行 - 不是并行，而是分时执行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:12:50.630

它被称为“游戏循环”，无论用户的输入如何，游戏都可以顺利运行。

最直接的解决方案 - 创建 2 个线程，第一个线程将等待用户输入并将其放入`ConcurrentLinkedQueue`容量 1。第二个线程将运行您的游戏循环，如果队列不为空，则从队列中获取用户输入来处理它。

你可以使用任何你想在 2 个线程之间交换数据的数据结构，它甚至可以是 volatile 字符串变量。对这个变量的唯一要求读写访问应该以某种方式同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T17:13:54.927

实时文字冒险？听起来不错。我不建议尝试针对这个特定问题进行并发，有更简单的方法。

通常，您不会将输入阻塞与以秒为单位的时间混合。除非你对这个设计有心，否则我建议你。

1）不要阻止用户输入。通过检查每一帧的按键来编写您自己的输入处理代码。然后你可以计算迭代之间的时间差。例如，一个怪物每秒移动 1 个方块，所以如果当前循环迭代花费了 100 毫秒，那么它移动了 0.1 个方块。`float`（即使您在文本网格上绘制，也将这些值在内部存储为s。

2) 根据用户输入以“ticks”为单位增加游戏时间。这将是 NetHack/Roguelike 风格。怪物每刻可以移动这么多块，而不是每秒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T17:14:31.793

是的，有办法。您需要将“循环计数”代码放在它自己的线程中，这样它就不会被等待输入数据的用户阻塞。该`java.util.concurrency`软件包可以帮助解决这个问题。

查看[Java Doc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#scheduleAtFixedRate%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)， scheduleAtFixedRate() 方法将以固定的时间间隔执行一个可运行的。“循环计数”代码将移至实现[可运行](http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html)接口的类。这将在设定的时间间隔内执行。不过，这是相当先进的。

# ruby-on-rails - Rails AR 无法更新 NULL 日期时间字段

> ID：15529902
> 
> 赞同：0
> 
> 时间：2013-03-20T16:55:54.327
> 
> 标签：ruby-on-rails

我正在使用 Rails 3.1。我有一个数据库列 t.datetime “end_at”。如果我在创建对象时输入日期，那么我可以稍后更改值（更新）。但是如果我把它留空（NULL），我发现我无法更新它。我验证了该字段的名称和新值在参数中。为什么？

```
 def update
   begin
     model = MyModel.find(params[:id])
     model.update_attributes!(params[:my_model])
   rescue ActiveRecord::RecordNotFound => e
      #something
   end
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:58:42.960

你需要确保两件事是真实的：

*   你`params[:end_at]`必须包含一个 nil 或一个 DateTime。通常参数不会以日期时间的形式出现。
*   您的专栏不应该是 TIMESTAMP （但现在可能还不是这样）

还要研究多参数属性。

# c# - 如果指定了 Accept:application/json，则响应中的不同行为

> ID：15529904
> 
> 赞同：0
> 
> 时间：2013-03-20T16:55:56.620
> 
> 标签：c#, .net, json

使用的 Http 方法是 GET，我正在调用相同的 webservice 方法（具有相同的参数）。

但是，如果我添加以请求带有 application/json 的 Accept 标头，则输出会有所不同。原因是我的名为 User 的对象中有一个 Bitmap 字段，它包含一个头像图像。

如果我省略 Accept application/json 标头，这是简化的输出（XML）：

```
<!-- language: lang-xml -->
<ArrayOfUser xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/XTraN4ForcesFSDomain.Domain">
<User>
    <Id>02ddf1e4-ad76-4778-8887-a186014939f8</Id>
    <Avatar xmlns:d3p1="http://schemas.datacontract.org/2004/07/System.Drawing" i:nil="true" />
    <IsActive>false</IsActive>
    <LastAccess>0001-01-01T00:00:00</LastAccess>
    <Username>quisquam</Username>
    <!-- Other properties -->
</User>
<User>
    <Id>17db833c-5008-44f0-a713-a186014c22a5</Id>
    <Avatar xmlns:d3p1="http://schemas.datacontract.org/2004/07/System.Drawing">
        <Data xmlns:d4p1="http://www.w3.org/2001/XMLSchema" i:type="d4p1:base64Binary" xmlns="">iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABGdBTUEAAK/INwWK6[...]BIJS/Wd6Pgu/mOoS/HADwfwFUI4VkJHOgAgAAAABJRU5ErkJggg==</Data>
    </Avatar>
    <IsActive>false</IsActive>
    <LastAccess>0001-01-01T00:00:00</LastAccess>
    <Username>labore</Username>
</User>
</ArrayOfUser> 
```

好吧，这很好！图像（Base64）在那里。如果我更改获取 JSON 的请求，它不会返回任何图像，只返回它所代表的类的名称：

```
<!-- language: lang-json -->
[
    {
        "Username": "quisquam",
         "LastAccess": "0001-01-01T00:00:00",
        "IsActive": false,
        "Avatar": null,
        "Id": "02ddf1e4-ad76-4778-8887-a186014939f8"
   },
   {
       "Username": "reiciendis",
       "LastAccess": "0001-01-01T00:00:00",
       "IsActive": false,
       "Avatar": "System.Drawing.Bitmap",
       "Id": "17db833c-5008-44f0-a713-a186014c22a5"
   },
] 
```

网络服务方法是

```
<!-- language: lang-c# -->
public IQueryable<User> Get()
{
    // return stuff (no big deal here)
} 
```

代码是一样的，那么为什么 JSON 不会像它应该返回的那样返回 base64 字符串呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:41:57.977

正如[LukeH](https://stackoverflow.com/users/55847/lukeh)所说，将我的位图转换为字节数组解决了我的问题。

# android - 自定义 ActionBar 视图中的微调器

> ID：15529906
> 
> 赞同：1
> 
> 时间：2013-03-20T16:56:00.507
> 
> 标签：android, android-layout, android-widget, android-actionbar

请提供任何带有微调器的自定义 ActionBar 视图示例。我搜索了网络和stackoverflow，但没有找到任何东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:01:41.043

您可以更好地了解操作栏下拉：http: [//developer.android.com/guide/topics/ui/actionbar.html#Dropdown](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)

它可以帮助你！

# python - 安装工具安装命令差异

> ID：15529918
> 
> 赞同：3
> 
> 时间：2013-03-20T16:56:34.477
> 
> 标签：python, setuptools

以下命令之间有什么区别

```
python setup.py install develop 
```

对我不起作用错误没有这样的文件或目录：'build/bdist.macosx-10.7-intel/egg/test-easy-install-37886.pth'

```
python setup.py develop 
```

为我工作似乎制作了一个 .egg 链接文件

```
python setup.py install 
```

为我工作似乎制作了一个 .egg 文件，它采用 .zip 文件格式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:45:09.497

> Develop 是一个 setuptools/distribute 功能，它允许您将项目添加到您的 Python 环境而不安装它——因此您可以继续它的“开发”
> 
> 换句话说，当您调用“python setup.py develop”时，setuptools 将编译元数据并将您的项目挂钩到 Python 的站点包中，但将使用的包和模块是您运行的目录中的包和模块那个命令。
> 
> 这对于继续处理您的代码并对其进行测试很有用，而不必在每次运行时都运行“python setup.py install”

使用开发时，Python 通过运行 setup.py 脚本而不是安装来“伪安装”一个包。不同之处在于环境的修改（与开发无关），因此可以从当前位置而不是站点包目录导入包。这样做的好处是您可以开发正在被其他包使用的包，并且您可以使用develop修改源代码。

至于“setup.py install develop”，我以前从未见过有人使用过，抱歉。

[来源](http://pythonhosted.org/an_example_pypi_project/setuptools.html)

[来源](http://pythonhosted.org/setuptools/setuptools.html#develop-deploy-the-project-source-in-development-mode)

[来源](http://mail.python.org/pipermail/python-list/2012-September/631175.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:56:08.750

```
python setup.py install develop 
```

是错误的命令。

当您使用`develop`时，您在运行应用程序时使用当前代码。

当您使用 `install`然后修改您的代码时，在运行您的应用程序时将不会考虑您的修改。直到您重新运行`install`或`develop`.

# c - 消费者 - 生产者，断言失败

> ID：15529925
> 
> 赞同：0
> 
> 时间：2013-03-20T16:56:58.500
> 
> 标签：c, multithreading, ubuntu

我有有界缓冲区，生产者消费者问题要处理，只能修改 prod 和 cons 函数。这段代码运行没有问题，只有一个消费者和生产者线程。但是对于每一个它总是给我同样的问题，迟早：

```
 p5p1: p5p2a.c:207: bb_remove: Assertion `bbp->cnt > 0' failed. 
```

我不明白的是，当我在调用函数`bbp->cnt`之前检查变量时，这个错误怎么会发生。`bbp_remove()`

**编辑：**问题已解决。我没有在任何一个函数中检查锁内的变量。

```
#include <sys/times.h>
#include <unistd.h>
#include <assert.h>
#include <stdlib.h>
#include <pthread.h>
#include <time.h>
#include <errno.h>
#include <stdio.h>

#define DEBUG 0

#define BUF_SIZE    100000
#define ITER        10000000

#define PROD_THRD   3
#define CONS_THRD   3

#define USAGE_STRING    "Usage: %s\n"

extern int errno;

/* This is the bounded buffer type */
typedef struct {
    int cnt, in, out;
    pthread_mutex_t lock;       /* Mutex to avoid race conditions */
    int buf[BUF_SIZE];      /* The data passed is the id of the
             *  producer */
} bbuf_t;

typedef struct {
    bbuf_t *bbp;
    int      id;
} parg_t;

/* 
 * yield()
 * Because there is no yield system call in Linux, what we
 * do is to put the thread to sleep for 1 ms. Actually, it 
 * will sleep for at least 1/HZ, which is 10 ms in Linux/386.
 */
#define YIELD_s     0
#define YIELD_ns    1000000

void yield() {

    struct timespec st = {YIELD_s, YIELD_ns};

    if( (nanosleep(&st, NULL)) == -1 && (errno == EINVAL)) {
    perror("nanosleep");
    pthread_exit(NULL);
    }
}

/* Initialize bounded buffer */
int bbuf_init(bbuf_t *bbp) {

    if(bbp == NULL)
    return 0;

    bbp->in = 0;
    bbp->out = 0;
    bbp->cnt = 0;
    pthread_mutex_init(&(bbp->lock), NULL); /* I do not understand, but the 
                     * compiler complains when I use
                     * PTHREAD_MUTEX_INITIALIZER */
    return 1;
}

/* Print the bounded buffer members that matter */
void print_bbuf(bbuf_t *bbp) {
    printf("bbp->in = %d bbp->out = %d bbp_cnt = %d \n",
       bbp->in, bbp->out, bbp->cnt);
}

/* To validate the value of the members in, out and cnt of bbuf_t */
int val(int n, int min, int max) {
    return( (min <= n) && (n <= max));
}

/* Ensure that the values of the members in, out and cnt are consistent */
int consist(int cnt, int in, int out) {
    return ( in == ((out + cnt) % BUF_SIZE) );
}

/* This is the code of the checker thread. It is used to ensure that
 * the bounded buffer has not been corrupted.
 * Every 100 ms it checks the values of: in, out and cnt.
 * This thread exits either if it detects the buffer has been corrupted
 * or if it does not detect any activity in 50 consecutive iterations, 
 * i.e. approximately 5s. */

/* These constants are used with nanosleep() and
 *  put a process to sleep for 100 ms */

#define SLEEP_s     0
#define SLEEP_ns    100000000

#define MAX_IDLE    50

void *check(void *arg) {
    bbuf_t *bbp = arg;
    int cnt[2], in[2], out[2];      /* values read */
    int idle;
    struct timespec st = {SLEEP_s, SLEEP_ns}; /* 100 ms */

    while(1) {
    pthread_mutex_lock( &(bbp->lock) );
    in[1] = bbp->in;
    out[1] = bbp->out;
    cnt[1] = bbp->cnt;
    pthread_mutex_unlock( &(bbp->lock) );
    if(in[1] == in[0] && out[1] == out[0] && cnt[1] == cnt[0] ) {
        idle++;
        if( idle >= MAX_IDLE ) {
        printf("Checking thread exiting:");
        print_bbuf(bbp);
        printf("\t no activity detected for some time.\n");
        pthread_exit(NULL);
        }
    } else {
        idle = 0;
    }
    if( !val(in[1], 0, BUF_SIZE - 1) ) {
        printf("Invalid value in = %d \n", in[1]);
        pthread_exit(NULL);
    } else if ( !val(out[1], 0, BUF_SIZE - 1) ) {
        printf("Invalid value out = %d \n", out[1]);
        pthread_exit(NULL);
    } else if ( !val(cnt[1], 0, BUF_SIZE) ) {
        printf("Invalid value cnt = %d \n", cnt[1]);
        pthread_exit(NULL);
    } else if ( !consist(cnt[1], in[1], out[1]) ) {
        printf("Inconsistent buffer: cnt = %d in = %d out = %d \n",
           cnt[1], in[1], out[1]);
        pthread_exit(NULL);
    }
    if( (nanosleep(&st, NULL) == -1) && (errno == EINVAL)) {
        perror("nanosleep");
        pthread_exit(NULL);
    }
    in[0] = in[1];
    out[0] = out[1];
    cnt[0] = cnt[1];
    }
}    

/* The producer threads may use this code to
 *  enter one item into the buffer */

void bb_enter(bbuf_t *bbp, int me) {

    assert( bbp->cnt < BUF_SIZE);

    (bbp->buf)[bbp->in] = me;
    (bbp->in)++;
    (bbp->in) %= BUF_SIZE;
    (bbp->cnt)++;
    //printf("%d\n",bbp->cnt);
}

/* This is the code for the producer threads.
 *
  * To avoid busy waiting (or at least too much busy waiting) the producers
 * should yield, using the yield() defined above, if the buffer is
 * full. In that case, they should print a debugging message as well.
 *
 * Each producer should produce ITER (10 M) items: an integer with
 *  the id it receives in prod()'s argument.
 */
void *prod(void *arg) {
    parg_t *parg = (parg_t *)arg;
    bbuf_t *bbp = parg->bbp;
    int me = parg->id;

    /* Add variables and code, if necessary */
    printf("I am a producer and have started\n");
    int gcnt = 0;

    while( gcnt <= ITER ){
      if(bbp->cnt < BUF_SIZE){
          pthread_mutex_lock(&(bbp->lock));
          bb_enter(bbp,me);
          gcnt++;
          pthread_mutex_unlock(&(bbp->lock));}
      else if( bbp->cnt == (BUF_SIZE-1)) {printf("I shall produce yield()\n"); yield();}
    }

    printf("I am a producer and have ended\n");

    return;

}

/* The consumer threads may use this function to
 *  remove an item */

int bb_remove(bbuf_t *bbp) {
    int val;

    assert(bbp->cnt > 0);

    val = (bbp->buf)[bbp->out];
    (bbp->out)++;
    (bbp->out) %= BUF_SIZE;
    (bbp->cnt)--;
    return val;
}

/* This is the code for the consumer threads.
 * To avoid busy waiting (or at least too much busy waiting) consumers
 * should yield, using the yield() defined above, if the buffer is
 * empty. In that case, they should print a debugging message as well.
 *
 * Each consumer should consume ITER (10 M) items, and keep track of the 
 * producers of the items it consumes: use the cnt[] below.
 */
void *cons(void *arg) {
    bbuf_t *bbp = (bbuf_t *)arg;
    int cnt[PROD_THRD];

    /* Add variables and code, if necessary:
     *          do not forget to initialize cnt */

    printf("I am a consumer and have started\n");
    int i;
    for(i = 0; i < PROD_THRD; i++){
    cnt[i] = 0;}

    int temp;
    int gcnt = 0;

    while( gcnt <= ITER ){
      if(bbp->cnt > 0){
         pthread_mutex_lock(&(bbp->lock));
         temp = bb_remove(bbp);
         gcnt++;
         cnt[temp]++;
         pthread_mutex_unlock(&(bbp->lock));}
      else if( bbp->cnt == 0) {printf("I shall consume yield()\n"); yield();}
    }
   printf("I am a consumer and have ended\n");
   return;
}

int main(int argc, char *argv[]) {

    int i;
    pthread_t *tid, ctid;
    parg_t *parg;
    bbuf_t *bbp;

    /* This is to measure the time it takes to run the program */
    struct tms t;
    clock_t start, end;
    long ticks = sysconf(_SC_CLK_TCK);

    start = times(&t);

    if( argc != 1 ) {
        printf(USAGE_STRING, argv[0]);
    exit(1);
    }

    /* Array for pthread_join() */
    if((tid = (pthread_t *) malloc((PROD_THRD + CONS_THRD) * sizeof(pthread_t)))
       == NULL ) {
    printf("Out of memory.\n");
    exit(2);
    }

    /* Allocate Bounded Buffer */
    if((bbp = (bbuf_t *) malloc(sizeof(bbuf_t))) == NULL ) {
    printf("Out of memory. \n");
    exit(2);
    }

    /* Initialize Bounded Buffer */
    if( bbuf_init(bbp) == 0 ) {
    printf("Failed to initialize bounded buffer\n");
    exit(3);
    }

    /* Arguments for producer threads */
    if((parg = (parg_t *) malloc( PROD_THRD * sizeof (parg_t))) == NULL ) {
        printf("Out of memory.\n");
    exit(2);
    } 

    /* Create checker thread */
    if( pthread_create(&ctid, NULL, check, bbp) )
    perror("pthread_create");
    printf("Created checker thread %u\n", (unsigned)ctid);

    /* Create consumer threads */
    for( i = 0; i < CONS_THRD; i++ ) {
    /* We pass the same data structure, the bounded buffer,
     * to each consumer: they need to synchronize to access it */
    if( pthread_create(tid+i, NULL, cons, bbp) )
        perror("pthread_create");
    printf("Created consumer thread %u\n", (unsigned)tid[i]);
    }

    /* Create producer threads */
    for( i = 0; i < PROD_THRD; i++ ) {
    /* Because we want each consumer to keep track of the
     * producer of the items it consumes, we assign an
     * id to each producer thread */
    parg[i].bbp = bbp;
    parg[i].id = i;
    if( pthread_create(tid+(i+CONS_THRD), NULL, prod, parg+i) )
        perror("pthread_create");
    printf("Created producer thread %u (%d)\n", (unsigned)tid[i+CONS_THRD], i);
    }

    /* Join consumer and producer threads */
   for( i = 0; i < CONS_THRD + PROD_THRD; i ++ ) {
    if( pthread_join(tid[i], NULL) == 0 ) {
        printf("Joined thread %u.\n", (unsigned)tid[i]);
    } else {
        printf("Failed to join thread %u\n", (unsigned)tid[i]);
    }
    }

    /* Join checker thread */
    if( pthread_join(ctid, NULL) == 0 ) {
        printf("Joined checker thread %u.\n", (unsigned)ctid);
    } else {
    printf("Failed to join checker thread %u\n", (unsigned)ctid);
    }

    /* How long did it take to run this ? */
     end = times(&t);

    printf("Wall time %2.4f s \n", (float)(end - start) / ticks);

return 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:01:26.437

您应该在检查之前输入互斥锁`bbp->cnt`。由于您是在输入互斥锁之前对其进行检查，因此另一个线程可以在您获取互斥锁之前减少该值并尝试自己减少该值。

# html - 垂直对齐链接中一行或两行的文本

> ID：15529931
> 
> 赞同：0
> 
> 时间：2013-03-20T16:57:07.127
> 
> 标签：html, css

我有一个带有一些文字的锚标签：

```
<a href="">My Link</a> 
```

使用这种样式，使其在 30px 高的链接中看起来垂直对齐：

```
a
{
    width: 90px;
    padding: 13px 0 13px 0;
} 
```

问题是现在有更长的文本不适合 90px 宽的链接，所以它导致它换行。所以链接中的文本被推得更远，而不是在锚标记内垂直对齐。

任何人都知道我如何确保链接垂直对齐一两行文本？我无法将类添加到具有两行的任何链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:59:17.097

尝试使用[line-height](http://reference.sitepoint.com/css/line-height)属性。

```
a
{
   line-height:25px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:00:01.173

文本不适合我

[http://jsfiddle.net/mTJDd/](http://jsfiddle.net/mTJDd/)

如果要垂直对齐任何文本，正确的方法是使用`line-height`属性

[**演示 2**](http://jsfiddle.net/mTJDd/1/)

# ruby - 无法让 ruby optparse 输出 opts

> ID：15529932
> 
> 赞同：0
> 
> 时间：2013-03-20T16:57:15.263
> 
> 标签：ruby, command-line, optparse

我正在尝试学习如何使用 optparse 来接受命令行选项，但是我很难让它像类文档和我可以在网上找到的任何示例中显示的那样运行。特别是当我通过 -h 选项时，什么都没有出现。我可以输出 ARGV 并显示它接收到 -h 但它不会显示 opts.banner 和/或任何 opts。我在这里想念什么？

```
class TestThing

def self.parse(args)
    options = {}
        options[:time]        = 0
        options[:operation]   = :add
        options[:input_file]  = ARGV[-2]
        options[:output_file] = ARGV[-1]
            optparse = OptionParser.new do |opts|
                opts.banner = "Usage:[OPTIONS] input_file output_file"

                opts.separator = ""
                opts.separator = "Specific Options:"

                opts.on('-o', '--operation [OPERATION]', "Add or Subtract time, use 'add' or 'sub'") do |operation|
                    optopns[:operation] = operation.to_sym
                end

                opts.on('-t', '--time [TIME]', "Time to be shifted, in milliseconds") do |time|
                    options[:time] = time
                end

                opts.on_tail("-h", "--help", "Display help screen") do
                    puts opts
                    exit
                end

                opt_parser.parse!(args)
                options
            end
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:12:32.013

您需要保留结果`OptionParser.new`然后调用`parse!`它：

```
op = OptionParser.new do
  # what you have now
end

op.parse! 
```

请注意，您需要在您提供给的块之外执行此操作`new`，如下所示：

```
class TestThing

def self.parse(args)
    options = {}
        options[:time]        = 0
        options[:operation]   = :add
        options[:input_file]  = ARGV[-2]
        options[:output_file] = ARGV[-1]
            optparse = OptionParser.new do |opts|
                opts.banner = "Usage:[OPTIONS] input_file output_file"
                # all the rest of your app
            end
            optparse.parse!(args)
end
end 
```

（我留下你的缩进是为了让我的意思更清楚，但在旁注中，如果你一致地缩进，你会发现代码更容易使用）。

此外，您不需要添加`-h`和`--help`-`OptionParser`自动为您提供这些，并且完全按照您实现它们的方式执行。

# unit-testing - 对使用 $http 的控制器进行单元测试

> ID：15529933
> 
> 赞同：7
> 
> 时间：2013-03-20T16:57:18.973
> 
> 标签：unit-testing, angularjs, mocking, jasmine

我有一个简单的控制器，我需要它做的第一件事就是为范围分配一个值。

```
function TestCtrl($scope, $http) {
    $scope.listForms = 'some list';
} 
```

控制器的以下测试按预期工作：

```
describe('Testing a controller', function() {

    var ctrl, scope, httpMock;

    beforeEach(inject(function($injector) {
        scope = $injector.get('$rootScope').$new();
        ctrl = $injector.get('$controller');
        ctrl(TestCtrl, { $scope: scope });
    }));

    it("assigns to scope", function() {
      expect(scope.listForms).toMatch("some list");
    });
}); 
```

但是当我更改函数以从我的 API 获取列表时

```
function TestCtrl($scope, $http) {
  $http.get('/api/listForms').success(function(list) {
    $scope.aListOfForms = 'some list';
  });
} 
```

并且测试更改为

```
describe('Testing a controller', function() {

    var ctrl, scope, httpMock;

    beforeEach(inject(function($injector) {
        httpMock = $injector.get('$httpBackend');

        scope = $injector.get('$rootScope').$new();
        httpMock.when('GET', '/tactical/api/listOrderForms').respond("an order form");

        ctrl = $injector.get('$controller');
        ctrl(TestCtrl, {
            $scope: scope,
            $http: httpMock
        });
    }));

    it("gets the list from the api and assigns it to scope", function() {
      httpMock.expectGET('tactical/api/listOrderForms');
      expect(scope.orderFormList).toMatch("an order form");
      httpMock.flush();
    });
}); 
```

我收到以下错误：

```
TypeError: 'undefined' is not a function
Expected undefined to match 'an order form'.
Error: No pending request to flush ! 
```

有谁知道我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T12:47:53.637

$http 用于`$httpBackend`与外部资源对话。你已经 mocked`$httpBackend`了，但是控制器仍然需要通过`$http`s 接口与它对话。

这应该这样做：

```
describe('Testing a controller', function() {

    var ctrl, scope, httpMock;

    beforeEach(inject(function($controller, $rootScope, $httpBackend) {
        httpMock = $httpBackend;

        scope = $rootScope.$new();
        httpMock.when('GET', '/tactical/api/listOrderForms').respond("an order form");

        ctrl = $controller;
        ctrl(TestCtrl, {
            $scope: scope
        });
    }));

    it("gets the list from the api and assigns it to scope", function() {
      httpMock.expectGET('tactical/api/listOrderForms');
      httpMock.flush();
      expect(scope.orderFormList).toMatch("an order form");
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T00:13:56.320

您不能手动将 $http 服务替换为控制器的 $httpBackend 服务。

改变

```
 ctrl(TestCtrl, {
        $scope: scope,
        $http: httpMock
    }); 
```

至

```
 ctrl(TestCtrl, {
        $scope: scope
    }); 
```

它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T20:36:10.323

You need to call httpMock.flush() before the expect(). The flush call simulates the response returning from the "back end," calling the success function that was bound to the http request.

# asp.net-mvc - 1007 实体未映射

> ID：15529937
> 
> 赞同：1
> 
> 时间：2013-03-20T16:57:35.663
> 
> 标签：asp.net-mvc, entity-framework

我有这个错误：“1007 实体未映射”所以我查看了我的 edmx 文件，当我单击“验证”时，果然它说我的两个表没有映射到数据库。

所以我遵循了这个：http: [//msdn.microsoft.com/en-us/library/bb738478%28v=vs.103%29.aspx](http://msdn.microsoft.com/en-us/library/bb738478%28v=vs.103%29.aspx)将实体映射到已经存在的数据库表，但是当我进入第 2 步时，我的下拉列表是空的，而不是他们的指示：“该字段成为一个下拉列表，其中包含存储模型中尚未包含在当前映射中的所有表。”

如果它是空的，文章没有提供如何修复它的评论。好样的 MSDN！到目前为止，我也没有在网上找到任何东西。

有人知道这个吗？

# apache - 如何防止 Netbeans 因为端口已被使用而无法启动 Tomcat？

> ID：15529947
> 
> 赞同：1
> 
> 时间：2013-03-20T16:57:59.703
> 
> 标签：apache, tomcat, netbeans

使用 Netbeans 7.2 时，我经常会遇到这个烦人的错误。偶尔出现的是，

> Tomcat 启动失败，服务器端口 8084 已被使用。

我是一小部分开发人员中的一员，我们中的一些人遇到过这种情况，我们的解决方案是简单地杀死使用它的 Java 进程。

然而，我们的老板坚持认为这没有必要，而且我的“胶带解决方案”还不够。

这不是给我的任务或任何东西，但这很烦人，我想知道他是否正确。这个 Apache Tomcat 错误是否有永久解决方案？我有什么方法可以配置 Apache Tomcat，这样就不会再发生这种情况了？

# 更新

这也可以，但我不认为这比我进入并杀死愚蠢的过程更好。您的解决方案仅意味着我运行同一应用服务器的多个实例。但是，我想要的是一种方法来防止愚蠢的 Apache Tomcat 实例仍然无法运行，即使我想使用 IDE 来杀死它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T09:03:36.397

为 Tomcat 使用不同的端口。您可以轻松地更改 net-beans 中的端口号，只需转到服务器>tomcat 并右键单击 .. 属性。并将端口更改为 8083 等...

# jquery - fancybox 的内容显示缓慢

> ID：15529948
> 
> 赞同：1
> 
> 时间：2013-03-20T16:58:06.637
> 
> 标签：jquery, asp.net, ajax, fancybox, fancybox-2

我正在建立一个网站。在网站中，当将数据发布到服务器时，我会显示一个花式框，如下所示。

```
function showfancybox()
   {
     $.fancybox($('#popup-processing-senddata'), {
        padding: 0,
        closeBtn: false,
        helpers: {
            overlay:
            {
                opacity: 0.8,
                css: { 'background-color': '#11619d' },
                closeClick: false
            }
        }
    });

    SendDataToServer = function () {
        if (this.enableNextButton()) {

            showfancybox();

            var hasError = false;

            for (var i = 0; i < this.Rows().length; i++) 
            {

                   $.ajax({
                    async:false,
                    type: "POST",
                    url: "/AddCustomer/SendData",
                    contentType: "application/json; charset=utf-8",
                    dataType: "JSON",
                    data: JSON.stringify(rowData),
                    success: function (datareturn) 
                    {
                       if (datareturn != '') {
                            $.fancybox.close();
                            showCustomError(datareturn);
                            hasError = true;
                        }
                    },
                    error: function (xhr, status, error) {
                        // Boil the ASP.NET AJAX error down to JSON.
                        var err = eval("(" + xhr.responseText + ")");

                        // Display the specific error raised by the server (e.g. not a
                        // valid value for Int32, or attempted to divide by zero).
                        $.fancybox.close();
                        showCustomError(err);
                        hasError = true;
                    }
                });
             }
} 
```

我遇到了一个问题。提交数据时，fancybox 仅显示覆盖，fancybox 的内容延迟 15 秒。我需要 fancybox 的内容延迟小于 2 秒。有人可以帮我吗？提前致谢

# html - 相同的 target="_blank" 对于不同的 href 表现不同

> ID：15529949
> 
> 赞同：3
> 
> 时间：2013-03-20T16:58:12.173
> 
> 标签：html, css, hyperlink

在 IE 中，LinkedIn 在新选项卡中打开，SO 在新窗口中打开。为什么当两者的结构相同时（`target="_blank"`）？

**HTML：**

```
<ul class="xlink">
    <li><a href="http://www.linkedin.com/profile/view?id=123" target="_blank" class="xlinkedin"></a></li>
    <li><a href="http://stackoverflow.com/users/123/abc" target="_blank" class="xstackoverflow"></a></li>
</ul> 
```

**CSS：**

```
.xlink 
{
    float:right;
    margin-top:18px;
}

.xlink li 
{
    float:left;
    display:inline;
    margin:0;
    padding:0;
    margin-right:2px;
}

.xstackoverflow 
{
    float:left;
    width:30px;
    height:30px;
    background:#222 url('../images/stackoverflow.png') no-repeat 4px 3px;
}

.xlinkedin 
{
    float:left;
    width:30px;
    height:30px;
    background:#222 url('../images/linkedin.png') no-repeat 4px 3px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:06:04.117

检查浏览器中的设置，有些提供在选项卡中打开新窗口的选项。

# asp.net-mvc - 在 TFS 2012 构建服务器上构建 MVC 4 应用程序

> ID：15529954
> 
> 赞同：0
> 
> 时间：2013-03-20T16:58:28.140
> 
> 标签：asp.net-mvc, asp.net-mvc-4, tfs

我有一个 TFS 2012 服务器，它既充当默认控制器又充当构建代理。在此框中还安装了 VS 2012。我正在使用我的开发人员框中的 Visual Studio 2010 来签入 asp.net MVC 4.0 代码。签入正常，但是如果我尝试通过调用 Queue new build 函数来构建应用程序，我会收到错误消息

```
The type or namespace name 'DataAnnotationsExtensions' could not be found (are you missing a using directive or an assembly reference?) 
```

我已经在 Build 服务器上安装了 MVC 3 和 4，并检查了 c:\Program files x86.. 路径是否有必要的 dll。我仍然收到此错误。

如果 TFS 2012 可以实际构建 .net 40 代码，任何帮助都可以解决此问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:08:07.533

您需要 DAE 扩展：http: [//nuget.org/packages/DataAnnotationsExtensions/1.1.0.0](http://nuget.org/packages/DataAnnotationsExtensions/1.1.0.0)

而不是“在构建服务器上安装 DAE”它应该与 NuGet 一起出现。
Nuget 已经是 TFS 构建系统的一部分！

[http://blogs.msdn.com/b/jpricket/archive/2012/05/10/using-nuget-with-tfs-build-automation.aspx](http://blogs.msdn.com/b/jpricket/archive/2012/05/10/using-nuget-with-tfs-build-automation.aspx)

# android - 有时解析在数组中包含数组的 JSON

> ID：15529956
> 
> 赞同：1
> 
> 时间：2013-03-20T16:58:35.310
> 
> 标签：android, arrays, json, parsing

我正在从我的网站检索 JSON 并尝试在我的 android 应用程序中解析它。这是后端自动生成的 JSON。

每当只上传单个图像时，我都会得到没有数组的图像链接。那是一个单一的字符串。

但是，如果上传的图片不止一张，我会将它们放入一个数组中。（请参阅下面的 JSON）（JSON 无效，因为我删除了一些我不使用的东西）

```
{
"Reports": [
    {
        "News": {
            "Title": "Big Explosion",
            "Info": "Lorem ipsum news etc here get here etc",
            "field_image": "http://mysite.com/1.jpg"
        }
    },
    {
        "News": {
            "Title": "2nd explosion",
            "Info": "<p>Us a delimited list ws etc here get her</p>\n",
            "field_image": [
                "http://mysite.com/2.jpg",
                "http://mysite.com/3.jpg",
                "http://mysite.com/4.jpg"
                           ]
        }
 ]
} 
```

我正在使用以下代码来检索 JSON。但是，当有多个图像时，我无法单独获取每个字符串。

```
JSONObject json = jParser.getJSONFromUrl(url);
 if (json != null)
        {
                JSONArray ReportsJsonArray = json.getJSONArray("Reports");
                for (int i = 0; i < ReportsJsonArray.length(); i++)
                {
                    JSONObject c = ReportsJsonArray .getJSONObject(i);
                    JSONObject news= node.getJSONObject("News");

                    String title = node.getString("Title");
                    String info = node.getString("Info");
                    String fieldImage = node.getString("fieldimage");

                    if (fieldImage.charAt(0) == '[')
                    {
                        Log.i("tag", "more than 1 image");
                                                // HOW TO GET THEM

                    } else
                    {
                        Log.i("tag", "single image");
                                               //already have them

                           }
    } 
```

我的代码有效，但将整个数组作为单个字符串获取。（我省略了 try-catch 块以使代码更简单）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:25:37.020

我认为您应该使用 google gson jsonreader 或 android jsonreader 可从 android API-11 JSONreader 读取每个令牌，您可以使用函数 peek() 来查看 JSONToken 类型而无需在您的情况下使用它会像这样

主功能

```
//response from the server
    response = myClient.execute(myConnection);
    Reader streamReader = new InputStreamReader(response
                            .getEntity().getContent());
    JsonReader reader = new JsonReader(streamReader);

reader.beginObject();

    while (reader.hasNext()) {

        String name = reader.nextName();

        if (name.equals("reports")) {
            readReports(reader);
        } else {
            reader.skipValue(); // avoid some unhandle events
        }
    }

reader.endObject();
reader.close(); 
```

读取报告功能

```
private void readReports(JsonReader reader) throws IOException {
    reader.beginArray();
    while(reader.hasNext()) {
    reader.beginObject();
    while (reader.hasNext()) {
        String objectNewsName = reader.nextName();
        if (objectNewsName .equals("News")) {
             readNews(reader);
        } else {
             reader.skipValue();
        }
    reader.endObject();

    }
    reader.endObject();
} 
```

阅读新闻功能

```
private void readNews(JsonReader reader) throws IOException {
    reader.beginObject();
    while(reader.hasNext()) {
        String objectNewsDataName = reader.nextName();
        if (objectNewsDataName .equals("Title")) {
             Log.d("NEWS",reader.nextString());
        } else if (objectNewsDataName .equals("Info")) {
             Log.d("NEWS",reader.nextString());
        } else if (objectNewsDataName .equals("field_image")) {
             if(reader.peek() == JsonToken.BEGIN_ARRAY) {
                 readFieldImage(reader);
             } else {
                 Log.d("NEWS",reader.nextString());
             }
        }else {
             reader.skipValue();
        }
    }
    reader.endObject();
} 
```

readFieldImage 函数

```
private void readFieldImage (JsonReader reader) throws IOException {
        reader.beginArray();
        while(reader.hasNext()) {
           Log.d("NEWS",reader.nextString());  //you will get the field image array content here
        }
    } 
```

我希望我的回答足够清楚，但是如果您对我的回答有任何疑问，请随时在评论中提问：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:09:18.557

你试过这个：

```
....
String title = node.getString("Title");
String info = node.getString("Info");
JSONArray fieldImageArray = node.getJSONArray("fieldimage");
//iterate fieldImageArray here
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:10:56.797

试试这样

```
List<String> url= new ArrayList<String>();

     JSONArray field_image= news.getJSONArray("field_image");
    for (int i = 0; i < field_image.length(); i++) {
        url.add(field_image.get(i).toString());//adding to List
    } 
```

# javascript - 正则表达式：两个斜杠之间的任何字符串首先以定义的字符串为前缀

> ID：15529958
> 
> 赞同：0
> 
> 时间：2013-03-20T16:58:36.510
> 
> 标签：javascript, regex

我想获取一些 mp3s 文件路径的说话者名称，如下所示：

```
/assets/audio/James_Lee/001.mp3
/assets/audio/Marc_Smith/001.mp3
/aasets/audio/blahblah/001.mp3 
```

在前面的例子中，我们注意到每个说话者的名字都被两个斜杠包围，其中第一个以单词*audio*为前缀。我需要一个与上面使用 javascript 的示例类似的名称匹配的模式。

我试过[http://regexpal.com/](http://regexpal.com/)：

```
audio/.*/ 
```

但它只匹配`*audio/The_name/*`我需要的地方`*The_name*`。另一件事我不知道如何在 javascript 中使用这样的模式`replace().`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:00:32.363

这将得到你的名字：`(?<=\/assets\/audio\/).*(?=\/)`

这是正在使用的正则表达式：[http ://regexr.com?34747](http://regexr.com?34747)

**考虑到 Javascript，你可以这样做：**

```
var string = "/assets/audio/James_Lee/001.mp3";
var name = string.replace(/^.*\/audio\/|\/[\d]+\..*$/g, ''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:06:28.703

试试这个：

```
var str = "/assets/audio/James_Lee/001.mp3\n/assets/audio/Marc_Smith/001.mp3";

var pattern = /audio\/(.+?)\//g;
var match;
var matches = [];
while ((match = pattern.exec(str)) !== null){
  matches.push(match[1]);
}

console.log(matches);

// If you want a string with only the names, you can re-combine the matches
str = matches.join('\n'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:14:07.447

这个怎么样？

```
str.replace(/.*audio\/([^\/]*)\/.*/,"$1") 
```

# angularjs - 从 Angular.js $http 请求中删除标头

> ID：15529959
> 
> 赞同：7
> 
> 时间：2013-03-20T16:58:37.313
> 
> 标签：angularjs, http, http-headers

我想`$http`从一个特定请求中删除一些请求标头字段（这意味着不在`$httpProvider`级别上）。这些字段是：

*   缓存控制
*   If-Modified-Since
*   推荐人
*   X-Requested-With

如何在单个请求中执行此操作？我尝试使用`transformRequest`参数，但没有找到足够的信息来使其工作。这样的 [CoffeeScript] 代码：

```
$scope.logout = ->
  $http({
    method: 'GET'
    url: '/api/logout'
    headers: { 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' }
    transformRequest: (data, headersGetter) ->
      console.log data
      console.log headersGetter
      data
  }).success ->
    $location.path('editor') 
```

表明，headersGetter 是`data`（对我来说绝对没有任何意义），我不明白从 transformRequest 函数返回什么。`undefined``function (c){a||(a=Nb(b));return c?a[y(c)]||null:a}`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T18:03:34.407

1.  如果您使用 Angular 的未缩小版本，当异常发生时您将获得更好的回溯，并且您将更轻松地自省 Angular 代码。我个人在开发时推荐它。下面是`headersGetter`实际的样子：

    ```
    function (name) {
        if (!headersObj) headersObj =  parseHeaders(headers);

        if (name) {
          return headersObj[lowercase(name)] || null;
        }

        return headersObj;
      } 
    ```

    `data`除非您发布一些数据，否则您的转换器的参数将是未定义的。

2.  如果您想获取单个标头，则该`headersGetter`函数采用可选参数，但您省略了设置标头的参数：`name`

    ```
    headersGetter()['Cache-Control'] = 'no-cache';
    headersGetter()['X-Requested-With'] = ''; 
    ```

    转换器的返回值应该是`data`您要使用的值。

3.  您[不能`Referer`](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method)从 XHR更改[标题。](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method)

# javascript - 如何从asp.net中的javascript函数调用服务器端按钮事件？

> ID：15529960
> 
> 赞同：3
> 
> 时间：2013-03-20T16:58:37.923
> 
> 标签：javascript, asp.net, dopostback

在尝试从 javascript 函数调用服务器端按钮事件时，我的代码如下所示

```
 _doPostBack('CalendarButton','CalendarButton_Click'); 
```

其中**CalendarButton**是我的按钮名称，'CalendarButton_Click' 是我的**CalendarButtonevent**

但这种说法是行不通的。我知道有一些小错误，但我找不到它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:01:47.740

你有一个`_`它有两个

```
__doPostBack 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:31:36.843

您不必将第二个参数传递给`__doPostBack()`. 只是`__doPostBack('CalendarButton', '')`。

或者，您可以调用`click()`按钮本身。`document.getElementById("CalendarButton").click();`.

# c# - System.Runtime.CompilerServices 的这种使用、不使用或滥用可能有什么价值（或危险）？

> ID：15529961
> 
> 赞同：1
> 
> 时间：2013-03-20T16:58:38.443
> 
> 标签：c#, namespaces, compiler-services

在传统的意大利面中，我遇到了这个辣肉丸：

```
//Keep around, might prove useful.
namespace System.Runtime.CompilerServices
{
    public sealed class IsVolatile
    {
        private IsVolatile()
        {
        }
    }
} 
```

这可能有任何价值吗？或者也许是一个更好的问题，可能有任何伤害（保留）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:05:15.223

哈 - 看起来你的情况类似于“我想要 LINQ 语法，但我在 2.0 领域”，您可以通过以下方式“打开”LINQ 语法：

```
namespace System.Runtime.CompilerServices
{
    [AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = false)]
    public class ExtensionAttribute : Attribute
    {
    }
} 
```

只有在这里，您才可以使用`volatile`关键字。

# jquery - jquery点击函数slideup slidedown

> ID：15529970
> 
> 赞同：0
> 
> 时间：2013-03-20T16:59:03.047
> 
> 标签：jquery, click, slidetoggle

嗨，我正在尝试做一个 jquery slideToggle，而是使用带有单击功能的上滑和下滑。

我不想使用切换的原因是因为它针对我的所有链接并随机触发不打算下拉的导航。

这就是我目前拥有的，当您单击链接时，当您再次单击链接时，我需要有两个带有滑动的单击功能，并且当您再次单击链接时它会向上滑动。

```
<script>

      $('#principale li').click(function(e){
    $('.sub-menu').slideToggle();
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:01:52.170

试试这个

```
<script>
    $(document).ready(function() {
        $('#principale li').click(function(e){
            $('.sub-menu').slideToggle("slow");
        });
    });
</script> 
```

这是一个应用这个概念的简单小提琴：http: [//jsfiddle.net/rKKcw/](http://jsfiddle.net/rKKcw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:06:08.233

这不是与滑动切换有关的问题。它不是针对随机导航菜单项，只是不确定您想要哪个。您正在使用一个类作为选择器，这就是原因。

该行：

```
$('.sub-menu').slideToggle(); 
```

我认为是造成你的问题。当使用类作为选择器时，匹配选择器的任何其他元素也将受到影响。不仅是您尝试更改的那个。您可以为所有这些分配不同的 ID，并动态地将 id 值传递给您的 click 函数，但这不是必需的，因为对 $(this) 的简单调用将解决您的问题。

如果没有看到您的 html，这很难给出解决方案，但如果您的菜单嵌套在列表项中，您可以这样做。

```
$(this).find('.sub-menu').slideToggle(); 
```

# android - 在 ListView 中关闭屏幕时，Switch 会自行切换 - CursorAdapter

> ID：15529972
> 
> 赞同：0
> 
> 时间：2013-03-20T16:59:12.970
> 
> 标签：android, listview, switch-statement, android-cursoradapter, recycle

我很难弄清楚这一点。

**我有一个带有 CursorAdapter 的 ListView ，如果项目离开屏幕，开关会自行重置**。我在开关上设置了一个监听器 onCheckedChangeListener，它触发通过托管片段实现的监听器，该片段更新数据库表中的字段并重新查询整个事物（contentResolver.notifyChange()）。

我知道这是复选框的常见问题，但我仍然无法让它工作。

```
public class FilterCursorAdapter extends CursorAdapter {

    public interface OnSwitchToggledListener {
        public void onSwitchToggled(int id, boolean isActivated);
    }

    private OnSwitchToggledListener listener;

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        View view = layoutInflater.inflate(R.layout.filter_item, parent, false);

        ViewHolder holder = new ViewHolder();
        holder.keywordTextView = (TextView) view.findViewById(R.id.keyword_text_view);
        holder.cathegoryTextView = (TextView) view.findViewById(R.id.cathegory_text_view);
        holder.activateSwitch = (Switch) view.findViewById(R.id.switch_activate);
        view.setTag(holder);

        return view;

    }

    public void bindView(View row, final Context context, final Cursor cursor) {
        final ViewHolder holder = (ViewHolder) row.getTag();

        holder.keywordTextView.setText(cursor.getString(cursor.getColumnIndex(ArticleProvider.COLUMN_KEYOWRD)));

        final int id = cursor.getInt(cursor.getColumnIndex(ArticleProvider.COLUMN_FILTER_ID));
        String cathegory = cursor.getString(cursor.getColumnIndex(ArticleProvider.COLUMN_CATHEGORY));
        int isActivated = cursor.getInt(cursor.getColumnIndex(ArticleProvider.COLUMN_ACTIVATED));

        holder.cathegoryTextView.setText(string);
        holder.activateSwitch.setChecked(isActivated == 1);
        holder.activateSwitch.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    listener.onSwitchToggled(id, isChecked);
                }

        });
    }

     private class ViewHolder {

        public TextView keywordTextView;
        public TextView cathegoryTextView;
        public Switch activateSwitch;

    }

}

public class FilterListFragment extends SherlockListFragment implements LoaderCallbacks<Cursor>, OnSwitchToggledListener {

    @Override
    public void onSwitchToggled(int id, boolean isActivated) {
        Log.d(MainActivity.TAG, "ID: " + id + " isActivated: " + isActivated);

        ContentValues values = new ContentValues();
        values.put(ArticleProvider.COLUMN_ACTIVATED, isActivated);
        resolver.update(ArticleProvider.FILTERS_URI, values, ArticleProvider.COLUMN_FILTER_ID + "=" + id, null);

    }
} 
```

*从日志看来，bindView 中的 setOnCheckedChangeListener 侦听器会自行触发。*

我该如何解决这个问题？另外我想指出我正在使用 SwitchCompatLibrary ( [https://github.com/ankri/SwitchCompatLibrary](https://github.com/ankri/SwitchCompatLibrary) )

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:35:18.627

如果你遇到这个问题，你需要在重新设置之前添加删除监听器

```
holder.activateSwitch.setOnCheckedChangeListener(null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T02:56:05.950

我今天遇到同样的问题大约三个小时。它一离开屏幕，就变了。所以，我最终放弃了`onCheckedChanged`监听器，而是使用了：

```
mySwitch.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
       Log.i(TAG, "isChecked:");
    }
}); 
```

现在它完美无缺。

# google-app-engine - GAE/J-JDO 按实体类型选择返回过时的结果

> ID：15529973
> 
> 赞同：1
> 
> 时间：2013-03-20T16:59:14.117
> 
> 标签：google-app-engine, google-cloud-datastore, jdo, datanucleus

暂时调查一个问题。所以问社区。我的目标是获取所有特定类型的实体，它们都需要是最新的。（暂时不考虑任何事务隔离 - 可能是脏读）

我为此使用 GAE/J-JDO（使用 tx.begin() 只是一种预防措施）：

```
 PersistenceManager pm = PMF.get().getPersistenceManager();
    Transaction tx = pm.currentTransaction();
    Query q = pm.newQuery(TokenJdo.class);
    List<TokenJdo> tokenList = (List<TokenJdo>) q.execute();
    Collection<TokenJdo> res = Collections.unmodifiableCollection(tokenList);
    tx.commit();
    pm.close();
    for (TokenJdo t : tokenList) {
        log.info(t.getToken() + " - " + t.getCounter());
    } 
```

这样做会给我过时的实体（我请求一个列表，转到 AppEngine 控制台并修改一个实体，再次请求一个列表）。所以我直接使用 DatastoreService 编写了以下调试代码。

```
 DatastoreService ds = DatastoreServiceFactory.getDatastoreService();
    com.google.appengine.api.datastore.Query gaeQuery = new com.google.appengine.api.datastore.Query(TokenJdo.class.getSimpleName());
    PreparedQuery pq = ds.prepare(gaeQuery);
    List<Entity> list = pq.asList(FetchOptions.Builder.withDefaults());
    for (Entity i : list) {
        log.info(i.getKey() + " - " + i.getProperties());
    } 
```

在一个请求中执行两段代码会给出以下输出，并显示通过 JDO 的数据与 DatastoreService 返回的数据相比已经过时：

```
I 2013-03-20 12:31:16.950 com.serverside.bl.TokenProviderJdo getAll: dummy - -999
I 2013-03-20 12:31:16.950 com.serverside.bl.TokenProviderJdo getAll: asd - 0
I 2013-03-20 12:31:16.951 com.serverside.bl.TokenProviderJdo getAll: dummy-aaa - -111
I 2013-03-20 12:31:16.957 com.serverside.bl.TokenProviderJdo logDSEntities: TokenJdo(7003) - {token=dummy, counter=-999}
I 2013-03-20 12:31:16.957 com.serverside.bl.TokenProviderJdo logDSEntities: TokenJdo(12001) - {token=asd, counter=0}
I 2013-03-20 12:31:16.957 com.serverside.bl.TokenProviderJdo logDSEntities: TokenJdo(13001) - {token=dummy-aaa, counter=-222} 
```

显然（或者在我看来）JDO 使用某种内部缓存（L1 或 L2，尽管我没有明确启用任何缓存）。如何让 JDO 进行“干净”读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:52:02.707

要停止`datanucleus`缓存任何内容，您应该禁用两个缓存级别：

```
datanucleus.cache.level1.type=none
datanucleus.cache.level2.mode=none 
```

或者您可以禁用 per`Query`或 per缓存，只需使用's 或' 方法`PersistenceManager`设置提到的键。`Query``PersistenceManager`

另一方面，在查找对象后需要使用它们时，您应该分离它们。我不太确定这样做的技术原因，因为`PersistenceManager`应该在从使用它的方法返回之前关闭它，或者我了解到，但是在禁用所有缓存之后，您必须在使用它之前完全分离查找的对象。

# r - 将单引号添加到字符串

> ID：15529976
> 
> 赞同：6
> 
> 时间：2013-03-20T16:59:18.420
> 
> 标签：r, string, concatenation, single-quotes

我尝试在字符串中添加单引号，但不知道该怎么做。例如，我想用“ABC”替换 ABC。

我玩过`paste`, `cat`，`print`但不知道该怎么做。

有什么解决办法吗？

谢谢，文森特

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T17:08:17.693

也许使用`sQuote`？

```
sQuote("ABC")
# [1] "'ABC'" 
```

这（就像它的兄弟一样`dQuote`）经常用于在打印到控制台的某些消息或其他文本周围加上引号：

```
cat("ABC", "\n")
# ABC 
cat(sQuote("ABC"), "\n")
# 'ABC' 
```

**请注意**（如 中`?sQuote`所述），根据您的任务所需的引号类型，您可能需要先重置`options("useFancyQuotes")`. 例如，要**确保**该函数使用简单的直立 ASCII 引号装饰您的文本，请执行以下操作：

```
options(useFancyQuotes = FALSE)
sQuote("ABC")
# [1] "'ABC'" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-20T17:01:04.153

只需使用`paste`：

```
R> paste("'", "ABC", "'", sep="")
[1] "'ABC'" 
```

或新品种

```
R> paste0("'", "ABC", "'")
[1] "'ABC'" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T17:06:19.360

扩展@vodka 答案：

```
s <- c("cat", "dog")
a <- "'"
mapply(paste0, a, s, a) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T17:12:21.057

使用`Reduce`和`paste0`

```
Reduce(paste0,list("'","a","'"))
 [1] "'a'" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T17:02:00.683

也许我错过了一些东西：

```
s <- "cat"
a <- "'"
paste(a,s,a,sep="") 
```

# visual-studio - 在 Internet Explorer 9 中调试时，Visual Studio 2012 打破 JavaScript 异常

> ID：15529979
> 
> 赞同：6
> 
> 时间：2013-03-20T16:59:25.137
> 
> 标签：visual-studio, internet-explorer, visual-studio-2012, internet-explorer-9, visual-studio-debugging

我正在使用 Internet Explorer 9 在 Visual Studio 2012 中调试一个网站（不幸的是，不是 Web 项目），它似乎一直在使用标准`Unhandled exception at line x, column y in script block`对话框打破 JavaScript 异常。这发生在一个名为 的新选项卡中`script block [dynamic]`。

在这个阶段，我真的不关心底层异常，我只是不想让 Visual Studio 告诉我这些异常。

我已经改变了我能想到的每一个明显的设置。所以：

**Visual Studio 设置**

`Exception settings -> JavaScript Runtime Exceptions`:`Thrown`和`User-unhandled`都未选中。

`Tools -> Options -> Debugging -> Just-In-Time`:`Script`未选中

**Internet Explorer 9 设置**

`Internet Options -> Advanced`:`Disable Script Debugging (Internet Explorer)`并且`Disable Script Debugging (Other)`都未选中。

如果我使用 Firefox 或 Chrome 进行调试，则不会发生这种情况，但不幸的是，我被迫使用 Internet Explorer 9。

我该如何解决这个问题？有什么我可能会错过的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T19:13:34.033

试试VS的[Web Essentials 扩展。](http://visualstudiogallery.msdn.microsoft.com/6ed4c78f-a23e-49ad-b5fd-369af0c2107f)我很确定当我安装它时它停止了。或者，您可以尝试 Debug=>Attach to=> 然后 Select.... （但您可能必须经常这样做...）

# search - 在win7上克隆pdf中的全文索引

> ID：15529983
> 
> 赞同：0
> 
> 时间：2013-03-20T16:59:42.873
> 
> 标签：search, plone

我在装有 Windows 7 64 位的 DELL XPS15 上使用 Windows Installer 安装了 Plone 4.2.1。然后更新到4.2.4，到目前为止一切运行良好。我已经创建了我的第一页，更改了徽标。

但是，如果我将 PDF 文档包含为文件，则在搜索时无法找到该文件的内容。根据描述，它应该可以工作，但可以在 PDF 中进行全文搜索。我是否还遗漏了一些东西，或者你必须在某个地方设置激活或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:02:45.187

您需要安装 XPDF 包将 PDF 转换为文本，以便 Plone 能够索引内容。

[从http://www.foolabs.com/xpdf/download.html](http://www.foolabs.com/xpdf/download.html)下载它，您可以在其中找到预编译的 Windows 二进制文件。

# wpf - 字符串格式的 wpf 问题

> ID：15529986
> 
> 赞同：2
> 
> 时间：2013-03-20T16:59:48.170
> 
> 标签：wpf, xaml, multibinding

我在 Text 属性中有一个带有 MultiBinding 的 TextBlock，还有一个 StringFormat 将两个结果连接起来并添加了一些内容。

```
<TextBlock.Text>
   <MultiBinding StringFormat="{}{0} {1}" >
      <Binding Path="Version" />
       <Binding Path="OldVersion" StringFormat="{}'({0})'" TargetNullValue=""/>
    </MultiBinding>
</TextBlock.Text> 
```

第一个 StringFormat 按预期工作，但第二个未应用：它返回不带括号的值。我不想要第一个 StringFormat 中的括号，因为有时第二个值是 Nothing。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:39:36.640

使用( [msdn](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.stringformat.aspx)`StringFormat` )时将忽略内部。`MultiBinding`

> 当您使用 MultiBinding 时，StringFormat 属性仅适用于在 MultiBinding 上设置的情况。忽略在任何子 Binding 对象上设置的 StringFormat 的值。复合字符串格式的参数个数不能超过 MultiBinding 中子 Binding 对象的个数。

`MultiBinding`您可以使用以下代码代替：

```
<StackPanel Orientation="Horizontal">
    <TextBlock Text="{Binding Version}" />
    <TextBlock Text="{Binding OldVersion, StringFormat=({0}), TargetNullValue=''}" />
</StackPanel> 
```

或者您可以为属性创建包装器`OldVersion`属性：

```
public string OldVersionEx
{
    get
    {
        if (string.IsNullOrEmpty(OldVersion))
            return null;
        else
            return "(" + OldVersion + ")";
    }
} 
```

在这种情况下，绑定如下：

```
<TextBlock>
    <TextBlock.Text>
        <MultiBinding StringFormat="{}{0} {1}" >
            <Binding Path="Version" />
            <Binding Path="OldVersionEx"/>
        </MultiBinding>
    </TextBlock.Text>
</TextBlock> 
```

# sql-server-ce-4 - 为什么每次触摸服务器资源管理器时，数据库内容都会被删除？

> ID：15529987
> 
> 赞同：0
> 
> 时间：2013-03-20T16:59:50.553
> 
> 标签：sql-server-ce-4

**更新**

我刚刚找到了导致它的原因，但无法解决它：

运行项目时，VS 将 SDF 文件复制到 bin\Debug，因此，对其进行的任何更改，即使仅刷新 DB 也会导致它被覆盖...

* * *

我创建了一个快速而肮脏的项目来测试 SQL CE 4.0，设计了一个小表并添加了一个*更新*按钮来保存输入的数据。到目前为止一切正常，我关闭并重新打开应用程序，数据已加载并显示在 DataGridView 中。

![在此处输入图像描述](../Images/b74daa11b3403373bec7bfc0e5c61cea.png)

但是有一个问题，每当我在服务器资源管理器中进行*任何*更改（例如刷新连接）时，

![在此处输入图像描述](../Images/7c728d8f1c608971392cb04a7012bd27.png)

当我再次启动应用程序时，我输入的所有数据都消失了。

![在此处输入图像描述](../Images/2d6b1f0a49641de817e037468eb94439.png)

我错过了什么 ？

我是如何创建数据库的：

*   从数据源中，我添加了一个新数据源，创建了一个新连接，创建了一个新数据库，回答“是”将其复制到我的项目并修改连接。

*   然后从服务器资源管理器我创建了一个新表，添加了列

*   最后，我重新配置了我的数据源，因此它重新创建了数据集、数据表和适配器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:01:05.740

这是一个修复它：

不要将其复制到本地项目文件夹，不会有两个版本，一个覆盖另一个。

# javascript - 为什么 $.browser 未定义？

> ID：15529988
> 
> 赞同：-2
> 
> 时间：2013-03-20T16:59:55.030
> 
> 标签：javascript, jquery, html, wordpress

我正在使用 < 1.9.1 的 JQuery 文件，并且 $.browser 在使用时显示未定义。当我在控制台中调用 $ 时，我得到：

```
function (e,t){return new b.fn.init(e,t,r)} 
```

我的标题链接如下所示：

```
<script type="text/javascript" src="jquery.js" ></script>
<script type="text/javascript" src="mobile.js"></script> 
```

我的 mobile.js 内部看起来像这样：

```
jQuery(document).ready(function(){
console.log('works');   
}); 
```

现在，当我将 $.browser 或 jQuery.browser 放在 Google Chrome 控制台窗口中时，我总是不确定。你知道为什么会这样吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:02:12.117

[jQuery.browser() 被删除](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T17:02:44.273

这是发行说明的链接。 [http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T17:01:05.423

这已在 JQuery 1.9 版本中删除

# java - Java Logic For Loops // 尝试创建一副纸牌

> ID：15529992
> 
> 赞同：-1
> 
> 时间：2013-03-20T17:00:02.280
> 
> 标签：java, arrays, object, loops

```
public enum Suit
{
    CLUBS,
    HEARTS,
    SPADES,
    DIAMONDS 
}

public enum Value
{
    TWO,
    THREE,
    FOUR,
    FIVE,
    SIX,
    SEVEN,
    EIGHT,
    NINE,
    TEN,
    JACK,
    QUEEN,
    KING,
    ACE
} 
```

卡片.java

```
public class Card {

    private Suit suit;
    private Value value;

    public Card(Suit theSuit, Value theValue)
    {
        suit = theSuit;
        value = theValue;
    }

    public String toString()
    {
        return value + " of " + suit;
    }

    public Value getValue()
    {
        return value;
    }

    public Suit getSuit()
    {
        return suit;
    }

    public boolean equals(Card other)
    {
        if (value.ordinal() == other.value.ordinal()
                || suit.ordinal() == other.suit.ordinal())
        {
            return true;
        }
        else {
            return false;
        }
    }

} 
```

CardPile.java

```
public class CardPile

{
    public Card[] cards;

    private int numCards;

    public CardPile()
    {
        this.cards = new Card[52];
        this.numCards = 0;

        // The problem is here, when I try to iterate through the enums and the
        // array to populate my cards[] of 52 objects Card it populates it with
        // 52 Card which are all ACE of DIAMONDS, it looks like the triple loops
        // populates 52 times the two last elements of my enum, but I can't
        // figure out how to fix that! Thanks in advance!

        for (Suit s : Suit.values())
        {
            for (Value v : Value.values())
            {
                for (int π = 0; π < cards.length; π++)
                {
                    cards[π] = new Card(s, v);
                }
            }
        }
    }

    public boolean isEmpty()
    {
        for (int i = 0; i < cards.length; i++)
        {
            if (cards[i] != null)
            {
                return false;
            }
        }
        return true;
    }

    public int getNumCards()
    {
        return numCards;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T17:04:11.403

问题在这里：

```
for (int π = 0; π < cards.length; π++) {
    cards[π] = new Card(s, v);
} 
```

您使用相同的`s`和`v`变量来创建`Card`实例并将其分配给`cards`数组中的所有元素，替换每个 (s, v) 对组合上的每个值。

更改代码以便仅使用前 2`for-loop`秒来填充它：

```
int count = 0;
for (Suit s : Suit.values()) {
    for (Value v : Value.values()) {
        if (count < cards.length) {
            cards[count++] = new Card(s, v);
        }
    }
} 
```

顺便说一句，您不应该将名称用作`π`变量**，并**确保缩进您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:07:51.560

对于每个套件和价值，您迭代所有 52 张牌并将它们设置为该套件和价值。由于最后一个花色/价值对是 DIAMOND 和 ACE，这就是所有牌的最终结果。

如果您使用 π 摆脱循环，而只需执行以下操作：

```
int counter = 0;
for (Suit s : Suit.values())
{
    for (Value v : Value.values())
    {
        cards[counter++] = new Card(s, v);
    }
} 
```

然后我认为这应该有效。

# c - 将无符号 16 位整数存储到文件的最有效方法

> ID：15529994
> 
> 赞同：2
> 
> 时间：2013-03-20T17:00:08.033
> 
> 标签：c, dictionary, binary, compression, ascii

我正在用 C 语言制作一个字典压缩器，字典最大大小为 64000。因此，我将我的条目存储为 16 位整数。

**我目前在做什么：** 要编码'a'，我得到它的ASCII值97，然后将此数字转换为16位整数97的字符串表示形式。所以我最终为'a'编码'0000000001100001' '，这在短期内显然不会节省太多空间。

我知道该算法的更有效版本将从较小的整数大小开始（在我们需要更多之前存储更少的位），但我想知道是否有更好的方法

1.  将我的整数 '97' 转换为可以存储 16 位数据的固定长度的 ASCII 字符串（97 将是 x 位，46347 也将是 x 位）

2.  写入只能存储 1 和 0 的文件。因为实际上，我似乎正在将 16 个 ascii 字符写入文本文件，每个文件都是 8 位......所以这并没有太大帮助，是吗？

如果我能以任何方式更清楚，请告诉我。我对这个网站很陌生。谢谢！

编辑：据我所知，我如何存储字典完全取决于我。我只知道我需要能够轻松地读回编码文件并从中获取整数。

另外，我**只能**包含我为程序编写的 stdio.h、stdlib.h、string.h 和头文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:17:39.897

请忽略这些建议您“直接写入文件”的人。有很多问题，最终属于“整数表示”的范畴。似乎有一些令人信服的理由将整数直接写入外部存储使用`fwrite`或不使用，这里有一些可靠的事实。

**瓶颈是外部存储控制器。**如果您正在编写网络应用程序，要么是那个，要么是网络。因此，如果您的内存配置文件适合您的平台，则将两个字节写为单个`fwrite`或两个不同的 s 应该具有大致相同的速度。您可以使用一定程度调整您的 s 使用`fputc`的缓冲区量（注意：必须是 2 的幂），因此我们始终可以根据我们的分析器告诉我们的内容对每个平台进行微调，尽管这些信息可能应该*优雅地浮动通过温和的建议向标准库上游提供对其他项目也有用的建议*。`FILE *``setvbuf`

 ***当今计算机之间的基础整数表示是不一致的。**假设您`unsigned int`使用使用 32 位整数和大端表示的系统 X 直接将 s 写入文件，您最终会在使用 16 位整数和小端表示的系统 Y 或系统 Z 上读取该文件时遇到问题使用具有混合字节序表示和 32 个填充位的 64 位整数。如今，我们拥有这种 15 年前的计算机组合，人们用 ARM big.Little SoC、智能手机和智能电视、游戏机和 PC 来折磨自己，所有这些都有自己的怪癖，超出了标准 C 的范围，特别是在整数表示、填充等方面。

C 的开发考虑到了抽象，允许您以可移植的方式表达您的算法，因此*您不必为每个操作系统编写不同的代码！*这是一个读取四个十六进制数字并将其转换为`unsigned int`值的示例，可移植：

```
unsigned int value;
int value_is_valid = fscanf(fd, "%04x", &value) == 1;
assert(value_is_valid); // #include <assert.h>
                        /* NOTE: Actual error correction should occur in place of that
                         *       assertioon
                         */ 
```

我应该指出我选择`%04X`而不是`%08X`更现代的原因......如果我们即使在今天也提出问题，**不幸的是有些学生使用超过 20 年的教科书和编译器......**他们`int`是 16-有点和技术上，他们的编译器*在这方面*是兼容的（尽管他们真的应该在整个学术界推动 gcc 和 llvm）。考虑到可移植性，这是我编写该值的方式：

```
value &= 0xFFFF;
fprintf(fd, "%04x", value);
// side-note: We often don't check the return value of `fprintf`, but it can also become   \
              very important, particularly when dealing with streams and large files... 
```

假设您的`unsigned int`值占用两个字节，这就是我如何使用大端表示法读取这两个字节的方式：

```
int hi = fgetc(fd);
int lo = fgetc(fd);
unsigned int value = 0;
assert(hi >= 0 && lo >= 0); // again, proper error detection & handling logic should be here
value += hi & 0xFF; value <<= 8;
value += lo & 0xFF; 
```

...这就是我如何按照大端顺序编写这两个字节的方式：

```
fputc((value >> 8) & 0xFF, fd);
fputc(value & 0xFF, fd);
// and you might also want to check this return value (perhaps in a finely tuned end product) 
```

也许你对小端更感兴趣。整洁的事情是，代码真的没有那么不同。这是输入：

```
int lo = fgetc(fd);
int hi = fgetc(fd);
unsigned int value = 0;
assert(hi >= 0 && lo >= 0);
value += hi & 0xFF; value <<= 8;
value += lo & 0xFF; 
```

...这是输出：

```
fputc(value & 0xFF, fd);
fputc((value >> 8) & 0xFF, fd); 
```

对于大于两个字节的任何内容（即 a`long unsigned`或`long signed`），您可能希望`fwrite((char unsigned[]){ value >> 24, value >> 16, value >> 8, value }, 1, 4, fd);`或例如减少样板文件。考虑到这一点，形成预处理器宏似乎并没有滥用：

```
#define write(fd, ...) fwrite((char unsigned){ __VA_ARGS__ }, 1, sizeof ((char unsigned) { __VA_ARGS__ }), fd) 
```

我想人们可能会认为这就像选择两个弊端中的一个更好：预处理器滥用或`4`上面代码中的幻数，因为现在我们可以`write(fd, value >> 24, value >> 16, value >> 8, value);`不用`4`硬编码......但是对于初学者来说一句话：**副作用可能引起头痛，所以不要在`write`.**

好吧，这就是我今天对这篇文章的更新……社交*延迟*的极客现在退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:38:26.090

您正在考虑使用 ASCII 字符来保存您的号码，这是完全没有必要且效率最低的。

最节省空间的方法（不使用复杂的算法）是将数字的字节转储到文件中（位数必须取决于您打算保存的最大数字。或者有多个文件8位、16位等

然后，当您阅读文件时，您知道您的数字位于每 x # 位，因此您只需将它们逐个或以大块的形式读出，然后将这些块放入一个类型的数组中与 x # 位匹配。*

# c# - 如何让 stringConnection 抛出一个 txt 文件 MVC 实体框架

> ID：15529996
> 
> 赞同：0
> 
> 时间：2013-03-20T17:00:15.217
> 
> 标签：c#, database, asp.net-mvc-3, entity-framework

有没有办法做到这一点？我知道如何使用 web.config 文件执行此操作，但有人告诉我不能在 web.config 中，因为它必须位于连接字符串必须位于的文本文件中。

这是我尝试过的：

```
<configuration>

    <connectionStrings configSource="ConexionBaseDeDatos.txt"></connectionStrings>
</configuration> 
```

类似于如果我使用这样的 .config 文件

```
<configuration>

    <connectionStrings configSource="ConexionBaseDeDatos.config"></connectionStrings>
</configuration> 
```

和基本名称

```
using System.Data.Entity;

namespace appSwicth.Models {
    public class ConexionBaseDeDatos:DbContext {

        DbContext db;
        public ConexionBaseDeDatos() :base()
        {

        }
    }
} 
```

但我得到一个错误：

“缺少根元素”

然后是文件的网址，仅此而已。（网址完全正确）。在 txt 文件中，我现在什么都没有。这可能是原因吗？我向它添加了一个连接字符串，但仍然没有用，也许我做错了什么。

有什么办法可以解决这个问题？如果您需要更多，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:18:02.563

以下是仅提及**外部配置**文件的标准格式。

```
<?xml version='1.0' encoding='utf-8'?>
<configuration>
    <connectionStrings configSource="Your_File_Name.config"/>
</configuration> 
```

从它的名字 Config Source 就可以自我解释了 Source 只属于配置文件。

**[来自 MSDN - 存储和检索连接字符串](http://msdn.microsoft.com/en-IN/library/ms254494%28v=vs.80%29.aspx)**

**替代方案 - 从上述评论**

从应用设置中获取信息，如下所示。

```
<add key="ConexionBaseDeDatos" value="ConexionBaseDeDatos.txt"/> 
```

# java - java fx jvm崩溃

> ID：15529998
> 
> 赞同：1
> 
> 时间：2013-03-20T17:00:23.773
> 
> 标签：java, linux, jvm, javafx, java-7

我有一个swing应用程序，在里面我从javafx2 jdk1.7_17添加了一个JFXpanel（也试过1.7_15）。我确实在 EDT 中创建了 JFXpanel 并将其添加到摆动选项卡式窗格中，然后将场景添加到 javaFX 线程中的 FXPanel，如文档中所示。如果我在一切正常后运行应用程序，如果我停止应用程序并再次运行它，jvm 会崩溃，说有问题的框架 libdbus。关闭应用程序后，无论我尝试多少次，jvm 通常都会崩溃并抱怨 dbus，但并非总是如此：

```
JRE version: 7.0_17-b02
Java VM: Java HotSpot(TM) 64-Bit Server VM (23.7-b01 mixed mode linux-amd64 compressed oops)
Problematic frame:
C  [libc.so.6+0x12fbd6]Java Result: 134 
```

有时我得到这个：

```
 GConf-WARNING **: Got Disconnected from DBus. 
```

如果我重新启动电脑，它第一次运行正常，然后如果我关闭/重新运行，它在启动时一直崩溃。我正在运行 Fedora 18，我相信它可能与操作系统相关，因为 java FX 使用的是本机库。

```
FXPanelJob fxPanelJob = new FXPanelJob(fxPanel);
tabbedPane = new JTabbedPane();
tabbedPane.addTab("table", fxPanel);
Platform.runLater(fxPanelJob);

private class FXPanelJob implements Runnable {

    private JFXPanel fxPanel;
    private volatile boolean done = false;

    public FXPanelJob(JFXPanel fxPanel) {
        this.fxPanel = fxPanel;
    }

    @Override
    public void run() {
        initFX(fxPanel);
        done = true;
    }

    private void initFX(JFXPanel fxPanel) {
        // This method is invoked on the JavaFX thread
        VBox vbox = new VBox();
        Scene scene = new Scene(vbox, 300, 200);
        TableView<ReportRaw> table = new Table();
        vbox.getChildren().addAll(table);
        VBox.setVgrow(table, Priority.ALWAYS);
        fxPanel.setScene(scene);
    }
} 
```

由于第一次运行，我只是猜测在应用程序退出时关闭 javafx 可能是一个问题。在 windowClosing 事件中，我有：

```
Platform.runLater(new Runnable(){ public void run(){
         Platform.exit();
}); 
```

# 更新：

事实证明这不是 java fx 问题，我切换到 JDK 6，一切都很好。我认为这是特定于操作系统问题的。在没有 java fx 的情况下使用 jdk 7 仍然可能触发 jvm 崩溃。

如果有人知道可能导致 jvm 崩溃的原因，我将不胜感激。先感谢您

# 更新 2

找到了一个类似的帖子，似乎已经解决了，但我不确定： [http](http://ubuntuforums.org/showthread.php?t=1697231&page=3) ://ubuntuforums.org/showthread.php?t=1697231&page=3 将此用于 jvm 争论 -XX:-UseCompressedOops。当我确保它不再崩溃时，我会将其作为答案发布。

# 更新 3

无法解决它我注释掉了我的 javafx 代码作为解决方案。我相信它与 EDT 相关，但我不能保证。在 Swing 应用程序上添加 JavaFx 面板后，它似乎发生了几行。并不总是在同一条线上。如果删除一切正常，所以我想它仍然是一个不成熟的项目。