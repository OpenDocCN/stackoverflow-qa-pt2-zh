# StackOverflow 问答 15029000-15029999

# phantomjs - phantomjs 屏幕截图字体丢失，而是呈现框

> ID：15029002
> 
> 赞同：32
> 
> 时间：2013-02-22T16:40:35.780
> 
> 标签：phantomjs

我在 Centos 6.3 上使用 PhantomJs 1.8.1 进行自动化 ui 测试。当测试失败时，屏幕截图会保存到文件系统中。

我的问题是，即使保存了屏幕截图，它们也不包含可读字体。

因此，如果网站是这样的：

你好世界！

该网站的屏幕截图将如下所示：

![在此处输入图像描述](../Images/37cd6d3e507e43a87f2eda3505124915.png)

因此，它不是实际的字母，而是渲染和保存小盒子。

系统是centos 6.3。还安装了 Freetype 和 Fontconfig。

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-16T09:22:12.450

我有同样的问题。

安装 urw-fonts 包为我解决了这个问题：

> yum 安装 urw-fonts

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-07T10:35:32.300

我对日文字体也有类似的问题。（PhantomJS 1.9.1，Amazon EC2 上的 Redhat）

英文字符显示良好，但日文字符呈现为框。

## 我如何修复它：

1) 使用 . 安装（日文）IPA 字体（Mincho 和 Gothic）`yum install`。

（`yum list`用于检查确切的包名称。）

2) IPA`.ttf`文件安装到：

*   `/usr/share/fonts/IPA-Gothic/`
*   `/usr/share/fonts/IPA-Mincho/`

3）将下载的两个`.ttf`文件移动到这个目录：（创建它）

*   `/usr/share/fonts/ipa/`

4) 备份`/etc/fonts/fonts.conf`

5）编辑原件`/etc/fonts/fonts.conf`并填写：

```
<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>
  <dir>/usr/share/fonts/ipa</dir>
  <cachedir>/var/cache/fontconfig</cachedir>
  <cachedir>~/.fontconfig</cachedir>
  <alias>
    <family>serif</family>
    <prefer>
      <family>IPAP Mincho</family>
    </prefer>
  </alias>
  <alias>
    <family>sans serif</family>
    <prefer>
      <family>IPAP Gothic</family>
    </prefer>
  </alias>
  <alias>
    <family>monospace</family>
    <prefer>
      <family>IPA Gothic</family>
    </prefer>
  </alias>
</fontconfig> 
```

6）刷新你的字体缓存`fc-cache -vf`

7) 享受您的新工作字体。

## 陷阱：

*   如果您没有收到**任何**字符（空格），则您的字体缓存可能已过时。尝试`fc-cache -vf`重新生成它。

*   在 1.9.1 版本中修复了日文/中文/韩文字符。不确定它是否有所作为，但可能值得从 1.9.0 升级。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-08T03:38:33.110

对于中文字体，我通过以下步骤解决了它：

```
sudo apt-get install language-pack-zh-hans
sudo apt-get install ttf-arphic-uming
sudo apt-get install ttf-dejavu ttf-wqy-microhei
sudo fc-cache -f -v 
```

操作系统是 Ubuntu 12.04 LTS

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-23T01:44:16.200

我在亚马逊 ec2 上遇到了同样的问题，我通过以下方式解决了它：

```
yum install cjkuni-ukai-fonts 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-10T07:44:53.507

您也可以尝试安装依赖项 - FontConfig & FreeType

```
yum install fontconfig
yum install freetype* 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-27T13:35:53.507

您可以使用命令行参数运行脚本：

```
phanthomjs --output-encoding=cp866 [params] [filename] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-06T12:04:33.023

我在使用阿拉伯字体时遇到了同样的问题。这就是我所做的。

```
yum groupinstall 'Arabic Support'. 
```

安装阿拉伯语支持为我解决了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-30T04:17:38.227

试试这个中文。

```
yum install bitmap-fonts bitmap-fonts-cjk 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-06T11:04:04.607

保留 /etc/fonts/fonts.conf 文件。上面的例子是只制作日语作品

yum install -y ipa-gothic-fonts.noarch ipa-mincho-fonts.noarch cjkuni-ukai-fonts.noarch bitmap-fonts bitmap-fonts-cjk urw-fonts fontconfig freetype*

yum groupinstall -y 'Korean Support' 'Chinese Support' 'Japanese Support' 'Kannada Support' 'Hindi Support' 'Arabic Support'

fc缓存-vf

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-24T23:56:15.853

向您的 HTML 部分添加样式部分，如下所示：

```
<style type="text/css">
@font-face
{
    font-family:MyFont;
    src: url('MyFont.ttf') format('truetype');
}

#barcodefont
{
    font-family:MyFont;
    font-size: 42px;
    color:black;
}
</style> 
```

然后要在主 HTML 代码中使用字体，请执行以下操作：

```
<div id="MyFont">Your text using MyFont</div> 
```

为此，您的 HTML 文件和 MyFont.ttf 文件都必须位于您正在进行转换的 PhantomJS 目录中。

# asp.net-mvc - Autofac - RouteConfig.cs - asp.net mvc4

> ID：15029004
> 
> 赞同：0
> 
> 时间：2013-02-22T16:40:41.287
> 
> 标签：asp.net-mvc, autofac

提前感谢您的帮助。我更改为 mvc4 并开始使用 app_start/routeconfig.cs 来注册路由。

可能它与 autofac 没有任何关系，但我找不到解决方案，有没有人知道它是否需要`routetable.routes`在任何其他地方声明 - 我已经`RouteConfig.RegisterRoutes(RouteTable.Routes);`在 global.asax 中声明 - 当计划将 autofac 与 mvc4 razor 的互联网模板一起使用时？

目前我的应用程序中没有 map.route 定义。我不知道我是否必须声明一个实例

```
RegisterInstance(RouteTable.Routes); 
```

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:29:11.707

这基本上是为 mvc 配置 Autofac 的最少代码量。你需要引用 Autofac.Integration.Mvc，如果你使用 webapi，你也需要引用 Autofac.Integration.Webapi。

```
public static class AutofacConfig
{
    public static IContainer Register()
    {
        var assembly = typeof(MvcApplication).Assembly;
        var builder = new ContainerBuilder();

        builder.RegisterControllers(assembly);
        // If you don't need webapi, you can omit this, else you need Autofac.Integration.Webapi
        builder.RegisterApiControllers(assembly);

        var container = builder.Build();

        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
        // If you don't need webapi, you can omit this, else you need Autofac.Integration.Webapi
        var resolver = new AutofacWebApiDependencyResolver(container);
        // Configure Web API with the dependency resolver.
        GlobalConfiguration.Configuration.DependencyResolver = resolver;

        return container;
    }
} 
```

然后在 Global.Asax 中添加

```
AutofacConfig.Register(); 
```

在 Application_Start 方法中作为第一个调用之一。

# ruby-on-rails - 发送 1 个附件，收件人报告 2 个附件（添加了 ATT0001.c）-Rails 3，ActionMailer

> ID：15029008
> 
> 赞同：2
> 
> 时间：2013-02-22T16:40:49.543
> 
> 标签：ruby-on-rails, ruby, email, attachment

为了与另一个系统交换数据，我们将数据作为电子邮件附件发送到专用地址。电子邮件是使用 ActionMailer v3.2.12 生成的。

问题是当电子邮件到达其目的地时，除了我们创建的附件之外，名为 ATT00001.c 的冗余附件是电子邮件的一部分。这会导致另一端的导入例程出现问题。

问题的很大一部分是我们几乎不知道在目的地是如何处理电子邮件的。我们也不知道正在使用什么类型的电子邮件服务器，也无权检查电子邮件到达时的实际外观。我们可以将它发送到我们自己的地址之一，那里看起来不错。

我知道这不是很多事情，但也许你们中的一个人之前已经看到这些 ATT00001 附件被添加到机器生成的电子邮件中。

config.action_mailer.smtp_settings

```
address: smtp.<mailprovider>.com
port: 587
domain: ourdomain.com
authentication: login
user_name: <removed>
password: <removed>
enable_starttls_auto: false 
```

**更新：** 我们已经能够获得有问题的电子邮件的副本，它显示了在附件之后呈现的电子邮件正文作为它自己的附件。我们尝试设置 ActionMailer`parts_order`以确保附件是在电子邮件正文之后生成的，但没有帮助。

**更新 2：** 发送到我的 gmail 帐户并显示我得到的原始原始数据。

**SENT MAIL** 在接收者对正确附件的回复中发送（自动创建的会创建一个错误日志条目）

```
(...) cut: to from and through email header information
 Mime-Version: 1.0
Content-Type: multipart/mixed;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

--
Date: Thu, 28 Feb 2013 12:15:23 +0100
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="thefile.mscons"
Content-ID: <512f3c4b6e875_a8f756dcc642fe@bjorns_arch.mail>

VU5BOisuPyAnVU5CK1VOT0M6Mys3MDgwMDAzNDExNzE2OjE0OlRJTUVSKzcw
... many more lines like this ...
ODAwMDUwNTEyMTc6MTQ6VElNRVIrMTMwMjI4OjEyMTUrUE9XRVNUMTMwMjI4

---- 
```

这是`body nil`在actionmailer中

接下来是来自收件人系统的回复，发送到我的 gmail。这是正确附件的收据（额外的附件会产生错误，刷新他们的系统）

**收到邮件**

```
(..) unintersting header stuff with addresses
Content-Disposition: attachment;
  filename="afilename.txt"
Content-Transfer-Encoding: base64
Content-Type: Application/EDIFACT; charset="iso-8859-1"
Mime-Version: 1.0
Date: Sat, 16 Feb 2013 11:07:10 +0100
From: ediel@example.com
To: ***@gmail.com
Subject: thesubject
Message-ID: <511f5a53.850a700a.2fa0.2a0eSMTPIN_ADDED_BROKEN@mx.google.com>
X-TM-AS-Product-Ver: IMSS-7.0.0.6298-6.8.0.1017-19380.002
X-TM-AS-User-Approved-Sender: Yes
X-Greylist: Sender is SPF-compliant, not delayed by
milter-greylist-4.0 (isp-app27-vm.isp.example.com [213.239.116.46]);
Sat, 16 Feb 2013 11:07:11 +0100 (CET)
X-ExampleIKT-MailScanner-Information: Please contact the ISP for more information
X-ExampleIKT-MailScanner-ID: r1GA7BqD021150
X-ExampleIKT-MailScanner: Found to be clean
X-ExampleIKT-MailScanner-From: ediel@example.com
X-Spam-Status: No

VU5BOisuPyAnVU5CK1VOT0M6Mys3MDgwMDA1MDUxMjE3OjE0OlRJTUVSKzcwODAwMDM0MTE3MTY6
.. more..
pUSU1FUisxJ1VOVCszKzEnVU5aKzErMjAxMzAyMDAyNDg1Nzcn 
```

Content-Type 有什么可疑的地方吗？`--`是否从发送的电子邮件中之前的内容生成了新的（空）附件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:50:47.867

我相信这与**内联附件**和 Exchange 服务器有关。某些客户端，尤其是 Apple Mail 允许您添加内联附件，即夹在电子邮件文本/正文部分之间的 MIME 附件。Exchange 服务器希望所有附件都出现在邮件的任何文本部分之后。

邮件中附件之后的所有内容都被视为附件，因此正文被塞入一个文件并按照您报告的名称命名。看到您正在使用 ActionMailer，请参阅[此答案](https://stackoverflow.com/a/9517665/1520714)和可能的[此答案](https://stackoverflow.com/a/10787533/1520714)，这说明您需要切换代码行的顺序，并可能使用其他一些设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:36:53.610

我们的问题解决了，但不幸的是我不能说是什么导致了多余的附件。我们通过发送仅包含附件的非多部分电子邮件来解决此问题。该解决方案显然不适用于需要发送多部分电子邮件的人。

在 Rails 中发送带有附件的非多部分电子邮件并不简单。您不能使用附件辅助方法和空白正文，您需要将附件内容放在电子邮件正文中并手动指定处置。

```
class MailMan < ActionMailer::Base
  def test
    attachment_content = "my attachment"
    disposition = "attachment; filename=\"test.txt\""
    mail(body: attachment_content,  content_disposition: disposition)
  end
end 
```

# asp.net-mvc - 找不到部分视图时故障转移到备用视图？

> ID：15029009
> 
> 赞同：5
> 
> 时间：2013-02-22T16:40:52.657
> 
> 标签：asp.net-mvc, razor, partial-views, viewengine

我有一个 MVC 应用程序，它使用从父对象类型继承的动态业务对象。例如，基类`Client`可能有两个名为`Vendor`and的子类`ServiceProvider`，它们都由同一个控制器处理。我有一个局部视图，当查看名为`_Aside.cshtml`. 当我加载客户端时，我尝试先查找特定的 Aside，然后加载通用的 Aside 失败。下面是代码的样子。

```
@try
{
    @Html.Partial("_" + Model.Type.TypeName + "Aside")
}
catch (InvalidOperationException ex)
{
    @Html.Partial("_Aside")
} 
```

TypeName 属性将包含单词“Vendor”或“ServiceProvider”。

现在这工作正常，但问题是我只希望它在未找到视图时进行故障转移，当`InvalidOperationException`部分视图实际抛出时（通常是它可能调用的子操作的结果），它也会进行故障转移。我曾考虑过检查，`Exception.Message`但这似乎有点骇人听闻。有没有其他方法可以在无需检查`Message`属性的情况下获得所需的结果，或者这是我目前唯一的选择？

```
ex.Message = "The partial view '_ServiceProviderAside' was not found or no view
              engine supports the searched locations. The following locations were
              searched: (... etc)" 
```

**更新**：根据 Jack 的回答和 Chao 的建议，这是我目前在项目中使用的具有扩展方法的类。

```
//For ASP.NET MVC
public static class ViewExtensionMethods
{
    public static bool PartialExists(this HtmlHelper helper, string viewName)
    {
        if (string.IsNullOrEmpty(viewName)) throw new ArgumentNullException(viewName, "View name cannot be empty");
        var view = ViewEngines.Engines.FindPartialView(helper.ViewContext, viewName);
        return view.View != null;
    }
    public static bool PartialExists(this ControllerContext controllerContext, string viewName)
    {
        if (string.IsNullOrEmpty(viewName)) throw new ArgumentNullException(viewName, "View name cannot be empty");
        var view = ViewEngines.Engines.FindPartialView(controllerContext, viewName);
        return view.View != null;
    }

    public static MvcHtmlString OptionalPartial(this HtmlHelper helper, string viewName)
    {
        return PartialExists(helper, viewName) ? helper.Partial(viewName) : HtmlString.Empty;
    }

    public static MvcHtmlString OptionalPartial(this HtmlHelper helper, string viewName, string fallbackViewName)
    {
        return OptionalPartial(helper, viewName, fallbackViewName, null);
    }

    public static MvcHtmlString OptionalPartial(this HtmlHelper helper, string viewName, object model)
    {
        return PartialExists(helper, viewName) ? helper.Partial(viewName, model) : MvcHtmlString.Empty;
    }

    public static MvcHtmlString OptionalPartial(this HtmlHelper helper, string viewName, string fallbackViewName, object model)
    {
        return helper.Partial(PartialExists(helper, viewName) ? viewName : fallbackViewName, model);
    }

    public static void RenderOptionalPartial(this HtmlHelper helper, string viewName)
    {
        if (PartialExists(helper, viewName))
        {
            helper.RenderPartial(viewName);
        }
    }

    public static void RenderOptionalPartial(this HtmlHelper helper, string viewName, string fallbackViewName)
    {
        helper.RenderPartial(PartialExists(helper, viewName) ? viewName : fallbackViewName);
    }
} 
```

**更新**：如果您碰巧使用的是 ASP.NET Core MVC，请交换`PartialExists()`这三种方法的方法，并更改其他方法中`HtmlHelper`for`IHtmlHelper`的所有用法。如果您不使用 ASP.NET Core，请跳过此步骤

```
//For ASP.NET Core MVC
public static class ViewExtensionMethods
{
    public static bool PartialExists(this IHtmlHelper helper, string viewName)
    {
        var viewEngine = helper.ViewContext.HttpContext.RequestServices.GetService<ICompositeViewEngine>();
        if (string.IsNullOrEmpty(viewName)) throw new ArgumentNullException(viewName, "View name cannot be empty");
        var view = viewEngine.FindView(helper.ViewContext, viewName, false);
        return view.View != null;
    }

    public static bool PartialExists(this ControllerContext controllerContext, string viewName)
    {
        var viewEngine = controllerContext.HttpContext.RequestServices.GetService<ICompositeViewEngine>();
        if (string.IsNullOrEmpty(viewName)) throw new ArgumentNullException(viewName, "View name cannot be empty");
        var view = viewEngine.FindView(controllerContext, viewName, false);
        return view.View != null;
    }

    public static bool PartialExists(this ViewContext viewContext, string viewName)
    {
        var viewEngine = viewContext.HttpContext.RequestServices.GetService<ICompositeViewEngine>();
        if (string.IsNullOrEmpty(viewName)) throw new ArgumentNullException(viewName, "View name cannot be empty");
        var view = viewEngine.FindView(viewContext, viewName, false);
        return view.View != null;
    }
} 
```

在我看来...

```
@Html.OptionalPartial("_" + Model.Type.TypeName + "Aside", "_Aside")
//or
@Html.OptionalPartial("_" + Model.Type.TypeName + "Aside", "_Aside", Model.AsideViewModel) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-08T11:42:53.507

在尝试解决嵌套部分的问题时遇到了这个答案，因为我想在中间视图中包含样式和脚本。我最终决定最简单的方法是`templatename_scripts`and的约定`templatename_styles`。

因此，我在此基础上使用的只是添加到各种选项中。

```
public static class OptionalPartialExtensions
{
    public static MvcHtmlString OptionalPartial(this HtmlHelper helper, string viewName)
    {
        return PartialExists(helper, viewName) ? helper.Partial(viewName) : MvcHtmlString.Empty;
    }

    public static MvcHtmlString OptionalPartial(this HtmlHelper helper, string viewName, string fallbackViewName)
    {
        return helper.Partial(PartialExists(helper, viewName) ? viewName : fallbackViewName);
    }

    public static void RenderOptionalPartial(this HtmlHelper helper, string viewName)
    {
        if (PartialExists(helper, viewName))
        {
            helper.RenderPartial(viewName);
        }
    }

    public static void RenderOptionalPartial(this HtmlHelper helper, string viewName, string fallbackViewName)
    {
        helper.RenderPartial(PartialExists(helper, viewName) ? viewName : fallbackViewName);
    }

    public static bool PartialExists(this HtmlHelper helper, string viewName)
    {
        if (string.IsNullOrEmpty(viewName))
        {
            throw new ArgumentNullException(viewName, "View name cannot be empty");
        }
        var view = ViewEngines.Engines.FindPartialView(helper.ViewContext, viewName);
        return view.View != null;
    }
} 
```

这将我最常见的用例带入了扩展方法，以帮助保持视图更清晰，添加了 RenderPartials 以确保完整性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-01T08:28:55.143

我有类似的要求。我想保持视图标记更干净，同时也避免生成两次动态视图名称。这就是我想出的（修改以匹配您的示例）：

辅助扩展：

```
public static string FindPartial(this HtmlHelper html, string typeName)
{
    // If you wanted to keep it in the view, you could move this concatenation out:
    string viewName = "_" + typeName + "Aside";

    ViewEngineResult result = ViewEngines.Engines.FindPartialView(html.ViewContext, viewName);
    if (result.View != null)
        return viewName;

    return "_Aside";
} 
```

看法：

```
@Html.Partial(Html.FindPartial(Model.Type.TypeName)) 
```

或在部分访问模型：

```
@Html.Partial(Html.FindPartial(Model.Type.TypeName), Model) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T19:06:49.567

您可以尝试 FindPartialView 方法来检查视图是否存在。这些方面的东西可能会起作用（未经测试）：

```
public bool DoesViewExist(string name)
 {
     string viewName = "_" + Model.Type.TypeName + "Aside";
     ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName , null);
     return (viewResult.View != null);
 } 
```

[有关 ASP MVC 3 的 FindPartialView 方法的信息](http://msdn.microsoft.com/en-us/library/system.web.mvc.iviewengine.findpartialview%28v=vs.98%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-12T00:12:35.680

处理 null viewName 或 null fallbackViewName 的错误修复（替换 OP 中的相应代码）：

```
public static MvcHtmlString OptionalPartial(this HtmlHelper helper, string viewName, string fallbackViewName, object model)
{
    string partialToRender = null;
    if (viewName != null && PartialExists(helper, viewName))
    {
        partialToRender = viewName;
    }
    else if (fallbackViewName != null && PartialExists(helper, fallbackViewName)) 
    {
        partialToRender = fallbackViewName;
    }
    if (partialToRender != null)
    {
        return helper.Partial(partialToRender, model);
    }
    else
    {
        return MvcHtmlString.Empty;
    }
} 
```

我已经编辑了 OP 的代码（它结合了来自多个答案的代码），但我的编辑正在等待同行评审。

# sql - 自动设置为值的字段长度的 SQL 数据类型

> ID：15029010
> 
> 赞同：1
> 
> 时间：2013-02-22T16:40:53.093
> 
> 标签：sql, types, varchar

是否存在这样的事情，或者您总是需要手动设置最大字段长度？

我们的数据库中有一个`varchar`字段，其中值的长度可以是从 0 一直到 800 或更大的任何值。是否有一种数据类型会自动将自身设置为输入值的长度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:46:37.823

（*这专门用于 SQL Server - 但也应适用于大多数其他 RDBMS*）
您需要定义**最大**长度 - 但该`varchar`类型将始终只存储所需的数据。因此需要定义自动处理的最大值，而不是实际大小。

因此，如果您拥有`varchar(800)`并存储 50 个字符 - 它占用 52 个字节。如果存储 100 个字符 - 使用 102 个字节（每个条目 2 个字节开销）。

同时，我仍然认为您不应该**只**定义所有列`varchar(max)`（最大 2 GB 大小）——即使它看起来很诱人也很方便。阅读[再使用 VARCHAR(n) 有什么意义？](https://www.simple-talk.com/sql/database-administration/whats-the-point-of-using-varchar%28n%29-anymore/)很好地解释为什么不这样做。

# datatables - DataTables：aoColumns 不显示切换图像列

> ID：15029013
> 
> 赞同：0
> 
> 时间：2013-02-22T16:40:57.873
> 
> 标签：datatables, row, hidden

我在我的应用程序中使用 DataTables 作为数据网格管理器。一切正常，但直到我配备了隐藏的行信息插件。我尝试了很多方法来改变事情，但切换图像的第一列从未出现过。这是我的代码：

**Javascript**

```
var oTable;
/* Formating function for row details */
function fnFormatDetails(nTr){
    var aData=oTable.fnGetData(nTr);
    var sOut='<table cellpadding="7" cellspacing="0" border="0" style="border:solid 1px red;padding-left:50px;">';
    sOut+='<tr><td>Renderingengine:</td><td>'+aData[2]+''+aData[3]+'</td></tr>';
    sOut+='<tr><td>Linktosource:</td><td>Couldprovidealinkhere</td></tr>';
    sOut+='<tr><td>Extrainfo:</td><td>Andanyfurtherdetailshere(imagesetc)</td></tr>';
    sOut+='</table>';
    return sOut;
}

$(document).ready(function() {
    oTable=$('#labour_show').dataTable({
        "fnDrawCallback": function(){//row highlighter
              $('table#labour_show td').bind('mouseenter', function () { $(this).parent().children().each(function(){$(this).addClass('datatablerowhighlight');}); });
              $('table#labour_show td').bind('mouseleave', function () { $(this).parent().children().each(function(){$(this).removeClass('datatablerowhighlight');}); });
        },
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "inc/_labour_show_ajax.php",                
        "aoColumns":[null,null,null,{"fnRender": function(oObj){return "<a href='main.php?do=labour&action=edit&sid=" + oObj.aData[7] + "'>Edit</a>";}  }],"aaSorting": [[1, 'asc']]
    });

    $('#labour_show tbody td img').live('click',function(){
        var nTr = this.parentNode.parentNode;
        if(this.src.match('details_close')){
            /* This row is already open - close it */
            this.src = "images/ico_expand.png";
            oTable.fnClose( nTr );
        }else{
            /* Open this row */
            this.src = "images/ico_collapse.png";
            oTable.fnOpen( nTr, fnFormatDetails(nTr), 'details' );
        }
    });
}); 
```

**_labour_show_ajax.php**

这是来自服务器端脚本的数组

```
$aColumns = array('labr_uid', 'labr_fname', 'emplyr_comp','labr_sid'); 
```

**HTML 代码：**

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="labour_show">
    <thead>
        <tr>
            <th></th>
            <th>Passport</th>
            <th>Name</th>
            <th width="30%">Employer</th>           
            <th>Edit</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="5" class="dataTables_empty"><img src="images/loading.gif" /></td>
        </tr>
    </tbody> 
```

**截屏**

![切换图像列不显示](../Images/f431c7e9b699222c189c3befe569cf85.png)

不管我试过。第一列从未出现。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T00:15:46.773

我在你的 html 表中计算了 5 列，在你的 aoColumns 中计算了 4

要么添加另一个 null

```
"aoColumns":[
null,
null,
null,
null,
{"fnRender": function(oObj){return "<a href='main.php?do=labour&action=edit&sid=" + oObj.aData[7] + "'>Edit</a>";}  }], 
```

或者做 mData 并添加这个

```
 { "mData": null ,
    "mRender" : function ( data, type, full ) {
    return '<img src="images/ico_open.png" />';}
  }, 
```

事实上，我相信 mRender 现在是 fnRender 的选择，你也可以像这样替换你的 fnRender

```
 { "mData": null , // or aAData[4] or aaData['labor_sid']
    "mRender" : function ( data, type, full ) {
    return '<a href="main.php?do=labor&action=edit&sid='+full[4]+'">Edit</a>';}
  }, 
```

继承人链接到另一个我回答了关于它[的链接添加到数据表的链接以获取更多信息](https://stackoverflow.com/questions/16697972/adding-a-link-to-datatables-for-more-information/16705431#16705431)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:31:01.180

试试这个，我想你错过`{ "sClass": "" }`了其他的

```
"aoColumns": [
                        { "sClass": "", "bSortable": false },
                        null,
                        null,
                        null,
                        { "sClass": "" },
                        { "sClass": "" },
                        {"fnRender": function(oObj){return "<a href='main.php?do=labour&action=edit&sid=" + oObj.aData[7] + "'>Edit</a>";}}
                ], 
```

# javascript - 单击复选框时计算总数

> ID：15029016
> 
> 赞同：-2
> 
> 时间：2013-02-22T16:41:02.867
> 
> 标签：javascript, html, radio-button, subtotal

我有一个由这段代码表示的单选按钮列表：

```
<form id="menu4strombolis">
    input1 <input type="radio" name="menu1"><br />
    input2 <input type="radio" name="menu2"><br />
    input3 <input type="radio" name="menu3"><br />
    input4 <input type="radio" name="menu4"><br />
    input5 <input type="radio" name="menu5"><br />
    input6 <input type="radio" name="menu6"><br />
    input7 <input type="radio" name="menu7"><br />
</form> 
```

Whenever a button is selected I need the subtotal and total to be updated.

这就是我想要的样子。

```
Subtotal: <br />
Tax:<br />
Total:<br /> 
```

税收总是 %7 或 .7

菜单 1 到 7 的价格增加了 5 美元。Menu1 是 5 美元，menu2 是 10 美元，以此类推。

我试图找出 JavaScript 来解决这个问题，但问题是我不希望它在我希望它显示在页面底部的按钮之后立即显示。
如果我这样做`document.write`，整个页面都会被覆盖。请在这个问题上帮助我。我相信这真的很简单。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T17:45:29.780

## 前言

这对我来说听起来像是家庭作业。但是，我发现最好的学习方式是通过例子。
所以这是我，以身作则，好吗？

你没有给我太多继续，所以为了这个例子，我假设你有一个复选框或单选按钮的列表，上面写着`Menu 1`... `Menu n`。选中的每个复选框都将添加到小计中，然后在此基础上计算税款。
使用单选按钮更容易一些，所以我也添加了该示例。

文章底部是未来研究本示例中使用的内容的参考资料。如果您还有其他问题，请在本文底部的评论区提问。

* * *

## Javascript（复选框）| [JSFiddle 示例（查看实际操作）](http://jsfiddle.net/CAYGr/)

```
//Set the tax and base cost
var f_tax = 0.07,
    i_menu_base = 5;

//Declare all the variables that will be used
var e_menu = document.getElementById("menu"),
    e_checkboxes = e_menu.getElementsByTagName("input"),
    e_subtotal = document.getElementById("sub_total");

// Add event listeners for when any checkbox changes value
for(var i = 0; i < e_checkboxes.length; i++){
    e_checkboxes[i].onchange = function(){
        //Recalculate subtotal
        get_subtotal();
    }
}

//get_subtotal calculates the subtotal based on which checkboxes are checked
function get_subtotal(){
    var f_sub_total = 0.0,
        f_grand_total = 0.0;

    var subtotal, tax, grandtotal;

    for(var i = 1; i <= e_checkboxes.length; i++){
        //If the checkbox is checked, add it to the total
        if(e_checkboxes[i-1].checked){
            f_sub_total += i * i_menu_base;
        }
    }

    //Calculate the grand total
    f_grand_total = f_sub_total*(1+f_tax);

    //Format them
    subtotal = (Math.round(f_sub_total*100)/100).toFixed(2);
    tax = (Math.round(f_tax*10000)/100).toFixed(2);
    grandtotal = (Math.round(f_grand_total*100)/100).toFixed(2);

    //Add them to the display element
    e_subtotal.innerHTML = "Subtotal: "+subtotal+"<br />";
    e_subtotal.innerHTML += "Tax: "+tax+"%<br />";
    e_subtotal.innerHTML += "Total: "+grandtotal;
} 
```

* * *

## Javascript（单选按钮）| [JSFiddle 示例（查看实际操作）](http://jsfiddle.net/P6G9J/)

```
//Set the tax
var f_tax = 0.07,
    i_menu_base = 5;

//Declare all the variables that will be used
var e_menu = document.getElementById("menu"),
    e_radios = e_menu.getElementsByTagName("input"),
    e_subtotal = document.getElementById("sub_total");

// Add event listeners for when any checkbox changes value
for(var i = 0; i < e_radios.length; i++){
    e_radios[i].onchange = function(){
        //Recalculate subtotal
        get_subtotal(this);
    }
}

//get_index gets the index of the element (1..n)
function get_index(element){
    for(var i = 1; i <= e_radios.length; i++){
        if(e_radios[i-1] == element){
            return i;
        }
    }
}

//get_subtotal calculates the subtotal based on the radio that was changed
function get_subtotal(el){
    var f_sub_total = 0.0,
        f_grand_total = 0.0;

    var subtotal, tax, grandtotal;

    f_sub_total += get_index(el) * i_menu_base

    //Calculate the grand total
    f_grand_total = f_sub_total*(1+f_tax);

    //Format them
    subtotal = (Math.round(f_sub_total*100)/100).toFixed(2);
    tax = (Math.round(f_tax*10000)/100).toFixed(2);
    grandtotal = (Math.round(f_grand_total*100)/100).toFixed(2);

    //Add them to the element
    e_subtotal.innerHTML = "Subtotal: "+subtotal+"<br />";
    e_subtotal.innerHTML += "Tax: "+tax+"%<br />";
    e_subtotal.innerHTML += "Total: "+grandtotal;
} 
```

* * *

## 未来研究的参考资料

按它们出现的顺序

*   [`getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)
*   [`getElementsByTagName()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)
*   [循环遍历数组](https://stackoverflow.com/questions/3010840/loop-through-array-in-javascript)
*   [`onchange`](https://developer.mozilla.org/en-US/docs/DOM/element.onchange)
*   [`Math.round()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/round),[小数技巧](https://stackoverflow.com/questions/11832914/round-up-to-2-decimal-places-in-javascript)和[`toFixed()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)
*   [`innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:18:56.880

尽管你有任何额外的意见，以及我更好的判断，我还是很无聊，所以我做了这一切。

HTML：

```
<form id="menu4strombolis">input1
    <input type="radio" name="menu1" value="5">
    <br>input2
    <input type="radio" name="menu2" value="10">
    <br>input3
    <input type="radio" name="menu3" value="15">
    <br>input4
    <input type="radio" name="menu4" value="20">
    <br>input5
    <input type="radio" name="menu5" value="25">
    <br>input6
    <input type="radio" name="menu6" value="30">
    <br>input7
    <input type="radio" name="menu7" value="35">
    <br>
</form>
<button id="getTotal">Total</button>
<div id="subtotal">Sub-Total:</div>
<div id="tax">Tax:</div>
<div id="total">Total:</div> 
```

JS：

```
var button = document.getElementById("getTotal");

button.onclick = function () {
    var subtotalField = document.getElementById("subtotal");
    var radios = document.forms["menu4strombolis"].getElementsByTagName("input");
    var subtotal = 0;
    var tax = 0;
    var total = 0;

    for (var i = 0, length = radios.length; i < length; i++) {
        if (radios[i].checked) {
            subtotal += parseInt(radios[i].value);
        }
    }

    tax = (subtotal * .07).toFixed(2); ;
    total = subtotal + tax;

    document.getElementById("subtotal").innerHTML = "Sub-Total: $" + subtotal;
    document.getElementById("tax").innerHTML = "Tax: $" + tax;
    document.getElementById("total").innerHTML = "Total: $" + total;
}; 
```

和工作小提琴：

[http://jsfiddle.net/RGvTt/1/](http://jsfiddle.net/RGvTt/1/)

虽然在旁注中，您应该将一些收音机组合在同一组中......或将它们设为复选框。

更新以修复 OP 无法修复的错误：

[http://jsfiddle.net/RGvTt/4/](http://jsfiddle.net/RGvTt/4/)

需要使用 parseFloat。

iPhone小提琴编程FTW！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:22:19.057

你想要的是`element.innerHTML`

所以它看起来像这样：

```
<form id="menu4strombolis">
    input1 <input type="radio" name="menu1"><br />
    input2 <input type="radio" name="menu2"><br />
    input3 <input type="radio" name="menu3"><br />
    input4 <input type="radio" name="menu4"><br />
    input5 <input type="radio" name="menu5"><br />
    input6 <input type="radio" name="menu6"><br />
    input7 <input type="radio" name="menu7"><br />
</form>

 ..... ..html stuff here

 Subtotal: <span id="subtotal"></span><br/>
 Tax: <span id="tax"></span><br/>
 Total: <span id="total"></span><br/>
 ETC...

 <script>
      var subtotal = //whatever menu item is checked then .value();
      var span_subtotal = document.getElementById("subtotal);
      var tax = document.getElementById("tax");
      var total = document.getElementById("total");
      var the_tax = subtotal * .07;

      span_subtotal.innerHTML = subtotal;
      tax.innerHTML = the_tax;
      total.innerHTML = subtotal + the_tax;
 <script> 
```

# ruby-on-rails - 如何使用 RSpec 和 Capybara 定位本地化按钮？

> ID：15029017
> 
> 赞同：4
> 
> 时间：2013-02-22T16:41:02.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, capybara, rspec2

我正在使用 RSpec 和 Capybara 进行 Ruby on Rails 测试。

我的 Rails 应用程序已针对多种不同的语言（英语、德语等）进行了本地化。

例如，我希望 Capybara 提交一个表单，但显然不能使用它的值来选择它，因为值会根据选择的语言而变化。

这在我的情况下不起作用：

```
click_button("Create my account") 
```

有什么方法可以简单地`input[type="submit"]`使用 Capybara 选择页面上的第一个元素？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T16:49:30.037

您可以为按钮分配一个ID并单击它

```
click_button("button_id") 
```

来源：[http ://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions#click_button-instance_method](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions#click_button-instance_method)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-22T16:48:51.973

我会说：

```
find('input[type="submit"]').first.click 
```

但是给它一个类或一个ID，它会更安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-27T18:30:21.343

简单的方法：

```
first('input[type="submit"]').click 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-14T06:28:44.383

您还可以使用 css 选择器缩小@apneadiving 的答案：

find("#my_form input[type='submit']").click

这样您就不必修改 HTML 来匹配您的测试。

# mysqli - 如何按时间按 ASC 顺序对 MySQLi 表进行排序

> ID：15029018
> 
> 赞同：0
> 
> 时间：2013-02-22T16:41:04.577
> 
> 标签：mysqli, time, varchar

我想根据他们的时间***升序******显示我的******表格***。

 *****表格样本：***

```
+------+----------+-----+
|  id  |   time   | val |
+------+----------+-----+
|  1   | 01:22 AM |  a  |
+------+----------+-----+
|  2   | 03:12 PM |  b  |
+------+----------+-----+
|  3   | 07:21 AM |  c  |
+------+----------+-----+
|  4   | 01:52 PM |  d  |
+------+----------+-----+
|  5   | 07:40 PM |  e  |
+------+----------+-----+ 
```

它应该安排从***上午到下午的***顺序

```
a - 01:22 AM
c - 07:21 AM
d - 01:52 PM
b - 03:12 PM
e - 07:40 PM 
```

***表****不是**日期时间**格式，它只是**varchar***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:45:41.413

`table is not in date- time format it's only in varchar`- 那是你的问题。

将其更改为[TIME](http://dev.mysql.com/doc/refman/5.0/en/time.html)格式，一切都会好起来的**

# debugging - 消失符号的情况

> ID：15029019
> 
> 赞同：0
> 
> 时间：2013-02-22T16:41:04.873
> 
> 标签：debugging, visual-studio-2012, debug-symbols

我有一个包含多个项目的解决方案，但现在只运行两个。项目 1 在发布模式下作为 Windows 服务运行，但在调试模式下作为控制台应用程序运行。项目 2 是一个 MMC 管理单元（输出类型 = 类库）。它们通过 WCF 进行通信。

**时间A**

当我昨天在全新构建后第一次开始调试时，我的调用堆栈窗口显示如下：

```
lines in service...
[External Code]
--Transition from Client to Server --
lines in client... 
```

我可以双击任何一行以转到该行。我可以在任何一个项目中设置断点，它们会被击中。

**时间 B**（当天晚些时候）

我开始在客户端（项目 2）中看到断点上的标志，指示*“断点当前不会被命中。源代码与原始版本不同”*，即使我刚刚重建了所有项目。我做了一些代码更改，但（据我所知）没有项目或构建更改。我做了一个“干净”的解决方案，但这没有帮助。调用堆栈的工作方式仍与 TIME A 期间相同。

**时间 C**（第二天——今天早上）

我重新启动。我删除了所有 obj 和 bin 目录。我重建了整个解决方案并启动了希望新的开始会改善这种情况。现在情况更糟了。断点标记为*“当前不会命中断点。没有为此文档加载任何符号。”* 调用堆栈已恶化为将客户端显示为外部代码：

```
lines in service...
[External Code]
--Transition from Client to Server --
[External Code] 
```

*   如果我在调用堆栈中选择**显示外部代码**，它会列出来自客户端程序集的行（当然与系统程序集混合），但全部显示为灰色。在模块窗口（调试 >> 窗口 >> 模块）中**未**列出客户端程序集。
*   如果我从调用堆栈中的一行中选择**符号加载信息，它会显示 5 个不同位置的***“找不到或打开 PDB 文件”*，最奇怪的是在我的项目的 obj/Release 目录下——而不是 obj/Debug 目录—— - 即使我的项目设置为调试配置。
*   如果我从调用堆栈中的一行中选择**加载符号**，然后在我的 obj/Debug 或 bin/Debug 目录中选择 pdb 文件，它会报告*"A matching symbol file was not found in this folder"*。
*   配置管理器显示所有项目都设置为调试配置，并且都包含在构建中。

* * *

我已经查看了类似的 SO 问题，这帮助我找到了上述所有要检查的内容，但还没有找到任何符合我的情况的押韵或理由。

*如何从谵妄中拯救 Visual Studio 并恢复丢失的符号？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:31:19.233

好的，Visual Studio，正如我所料，是我，而不是你。你有，通过厚实的[客户]，继续显示你坚定的支持[功能]。我们还能成为[虚拟]朋友吗？这归结为我们文化的差异。我只看表面价值；你喜欢把自己埋在你的注册表数据中，忽略我的 MMC 管理单元代码，它就在你面前大喊*“我在这里，我在这里！”* .

叹。

我在这。

我的意思是，仅仅因为它没有取代您与[InstallUtil](http://msdn.microsoft.com/en-us/library/cc303697.aspx)的最后关系，是否有任何理由挖掘过去，将那些被遗忘已久的 [代码] 位带到表面，使 dll 与 pdb 永远分开？显然你是这么认为的。是的，问题来了！我只是不明白你，但现在我明白了。

哦是的; 现在我知道了。

# javascript - 我如何在 javascript(jquery) 上创建 json

> ID：15029022
> 
> 赞同：-5
> 
> 时间：2013-02-22T16:41:13.783
> 
> 标签：javascript, jquery

我有json：

```
{
    "sEcho": 1,
    "iTotalRecords": 3,
    "iTotalDisplayRecords": 3,
    "aaData": [
        ["http://google.com", "0", "0", "2013-02-20 18:31:02"],
        ["http://ya.ru",      "0", "0", "2013-02-22 18:45:43"],
        ["http://yandex.ru",  "0", "0", "2013-02-22 18:45:43"]
    ]
} 
```

我如何在 JavaScript(jQuery) 上创建相同的 JSON？

添加

最初，我只有

```
{
    "sEcho": 1,
    "iTotalRecords": 3,
    "iTotalDisplayRecords": 3,
    "aaData": []
} 
```

将来我想将数据添加到**“aaData”** ...

对不起，那个写得不好的问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:43:02.590

我不确定我明白了，但要从对象中创建 JSON 字符串，请使用如下[`JSON.stringify()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)方法：

```
var obj = {
    "sEcho": 1,
    "iTotalRecords": 3,
    "iTotalDisplayRecords": 3,
    "aaData": [
        ["http://google.com", "0", "0", "2013-02-20 18:31:02"],
        ["http://ya.ru",      "0", "0", "2013-02-22 18:45:43"],
        ["http://yandex.ru",  "0", "0", "2013-02-22 18:45:43"]
    ]
};

var json = JSON.stringify( obj ); 
```

反过来，有以下[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)方法：

```
var obj = JSON.parse( json ); 
```

**编辑**

所以假设你已经得到了这个对象：

```
var obj = {
    "sEcho": 1,
    "iTotalRecords": 3,
    "iTotalDisplayRecords": 3,
    "aaData": []
}; 
```

您可以使用以下方法将数据添加到`aaData`属性中[`push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)：

```
obj['aaData'].push( ["http://google.com", "0", "0", "2013-02-20 18:31:02"] );
obj['aaData'].push( ["http://ya.ru",      "0", "0", "2013-02-22 18:45:43"] );
obj['aaData'].push( ["http://yandex.ru",  "0", "0", "2013-02-22 18:45:43"] ); 
```

# bash - 根据文件的行数将文件分成两半

> ID：15029027
> 
> 赞同：3
> 
> 时间：2013-02-22T16:41:40.493
> 
> 标签：bash

我想将一个主文本文件分成两个文件。文本文件有一定数量的行。让我们说NR。我需要两个不同的文件，分别称为文件 1 和文件 2。文件 1 是主文本文件的上半部分。文件 2 是主文本文件的另一半。

例子：

正文文件

```
aaaaa
bbbbb
ccccc
ddddd
eeeee
fffff 
```

我需要从主文本文件创建的两个文件。

文件 1 应该是：

```
aaaaa
bbbbb
ccccc 
```

文件 2 应该是：

```
ddddd
eeeee
fffff 
```

我尝试过使用awk。但它没有用。谢谢大家。

问候，

这就是我所做的。

```
total_lines=$(cat ${band_file} | wc -l)
echo $total_lines
cat $band_file | awk '
{
  if(NR<=total_lines/2)
    print > "file 1"
  else
    print > "file 2"
}' 
```

`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:43:10.653

```
awk '{print>"file"(NR>(n/2)?2:1)}' n="$(wc -l <file)" file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:47:46.327

您也可以`split`为此使用：

```
split -n2 infile 
```

`xaa`现在包含：

```
aaaaa
bbbbb
ccccc 
```

并`xab`包含：

```
ddddd
eeeee
fffff 
```

您当然可以使用 awk，这是一个相当有效的替代方案：

```
awk -v len=$(wc -l < infile) '
  BEGIN    { outfile = "file1"  } 
  NR>len/2 { outfile = "file2"  }
           { print $0 > outfile }
' infile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T16:58:36.990

仅使用`awk`：

```
awk '
    {
        arr[NR]=$0
    }
    END{
        for (i=0; i<=NR; i++) {
            if (i < NR/2) {
                print arr[i] > "file1"
            }
            else {
                print arr[i] > "file2"
            }
        }
    }
' file.txt 
```

至今，

```
$ ls file[0-9] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-15T17:06:22.970

使用[GNU 拆分](http://www.gnu.org/software/coreutils/manual/html_node/split-invocation.html)

例子：

```
split -n 2 <file> # creates xaa & xab 
```

# python - Python 3 is_alive 调用显示错误结果

> ID：15029032
> 
> 赞同：0
> 
> 时间：2013-02-22T16:41:54.517
> 
> 标签：python, multithreading, python-3.2

我正在尝试使用 is_alive() 在 Python 3.2 中测试另一个线程。如果我使用`thread1().is_alive()`in`thread2`我得到`false`而不是`true`是否 `thread1`正在运行。

如果我放在里面，我会得到相同的结果，但如果我放在 `thread1().is_alive()`里面，它会按预期返回。`thread1``self.is_alive()``thread1``true`

在我看来，命令应该是`thread1.is_alive()`，但它说需要 1 个参数并且失败。

我觉得我错过了一些简单的东西，但一直找不到那是什么。

指点将不胜感激，谢谢

好的，谢谢，测试代码如下所示：

```
import threading
import time
#
class FirstThread(threading.Thread):
    def run (self):
        while 1:
            print ('This is the First thread')
            print(self.is_alive())
            time.sleep(1)
FirstThread().start()
#
class TestThread (threading.Thread):
    def run ( self ):
        while 1:
            print ('This is the thread alive test thread')
            print(FirstThread().is_alive()) 
            time.sleep(1)
TestThread().start() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-19T10:04:02.097

初学者的错误，未引用启动的“第一个”线程对象，并`FirstThread().is_alive()`测试一个从未启动的临时对象。

# business-intelligence - 我们可以将 saiku 与 Pentaho Analyzer 进行比较吗？

> ID：15029034
> 
> 赞同：9
> 
> 时间：2013-02-22T16:42:02.563
> 
> 标签：business-intelligence, pentaho, saiku

我目前正在实习，我必须创建一个完整的 BI 应用程序。我想我会使用 pentaho，而且我必须只使用开源组件。

我知道 Pentaho Analyzer 不是免费的 我的问题是：saiku 是否等同于分析器？如果是，我可以将它与 pentaho 一起使用而不是分析仪吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T06:46:58.700

我是 Pivot4J 项目的开发人员，想分享我对这个主题的（主观）意见。

首先，虽然您正确地认为 Pivot4J 更像是一个 API 而不是应用程序，但这并不总是意味着您需要编写大量代码才能使用它。

我们还有一个 Pentaho BI 插件，它不需要任何编码并且具有与 Saiku 插件相当的功能，尽管它针对尚未发布的 Pentaho 5.0 平台。

我们的示例应用程序提供了 JPivot Web 应用程序所具有的大部分功能，尽管它缺少即将修复的数据源配置功能。

相比Saiku，我觉得每个项目在不同的场景下都有自己的优势。

Saiku 在客户端的架构比我们的示例应用程序和插件轻得多，因此它几乎可以在任何地方部署和嵌入。

虽然使用 Pivot4J 创建一个完整的 REST 风格的分析应用程序并不难，但我们当前的示例和插件应用程序至少需要一个 Servlet 容器才能运行，并且在某些环境中比 Saiku 更难嵌入。

另一方面，由于 Pivot4J 从一开始就被设计为独立于 UI 的 API，因此在我看来，当开发人员想要在其上构建自己的应用程序或打算自定义其核心行为时，它可以为开发人员提供比 Saiku 更大的灵活性。 API。

例如，如果您想将 Pivot4J 与您自己的使用 ExtJS、DhtmlX 或任何其他 UI 工具包构建的应用程序一起使用，那么实现与 Pivot4J 的无缝集成会容易得多，因为它为您提供了方便的抽象扩展点要做到这一点。

最后，如果您熟悉 Javascript，您可能会发现使用 Saiku 更容易，因为它将大部分与 UI 相关的工作委托给客户端。

另一方面，如果您是像我这样的老派 Java 开发人员 :) 您可能会发现我们的示例应用程序更易于理解和使用，因为几乎不涉及自定义脚本，并且一切都使用 JSF 在服务器端完成组件模型。

最后，我想说的是，Pivot4J 不仅仅是一个不编写大量代码就无法使用的 API，因为它已经包含了功能完备的 Pentaho BI 插件，用于即将发布的平台 5.0 版本。由于 Pivot4J 和 Saiku 采取了截然不同的方法，因此每个都有自己的优势和优势，可以利用它们来适应特定的用例。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-23T18:52:40.830

是的当然。这两种工具都使用相同的底层 OLAP 引擎 - Mondrian。Saiku 本质上与提供许多相同功能的分析器相同 - 但是它具有不同的架构，这也使其非常可嵌入和可插拔。此外，如果您愿意，Saiku 也可以单独使用。

查看 dev.analytical-labs.com 上的演示，看看它可以做什么。

此外，在这样一个伟大的社区中，您不会找到很多工具来寻求帮助 - 根据您的问题，在 ##Pentaho 或 ##Saiku 的 Freenode IRC 上与他们联系！

Pentaho 也是 OS BI 的正确选择 - 假设您也看过 Jaspersoft？值得一看，但您无疑会意识到 Pentaho 的功能更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-30T02:11:22.823

您是否考虑过使用纯 JavaScript UI 来旋转您的 olap 立方体？[在http://webpivottable.com](http://webpivottable.com)上有一个这样的组件调用 WebPivotTable

Jpivot、saiku 和 pentaho 都是基于 olap4j API 的，所以它们都需要一个 java 服务器端服务。WebPivotTable 直接使用 AJAX 调用 xmla 服务，因此它可以用于旋转任何 xmla OLAP 服务器，如 mondrian、SSAS、iccube。由于它不与任何 java 后端绑定，而且它是纯基于 javascript 的，因此您可以轻松地将其集成到任何网站或 Web 应用程序中。

# mysql - 如何在mysql中使用while循环调用存储过程

> ID：15029038
> 
> 赞同：2
> 
> 时间：2013-02-22T16:42:21.177
> 
> 标签：mysql

我的问题可能听起来很蹩脚，但我仍然无法理解这段代码有什么问题。我在 sqlyog 中创建了一个存储过程，现在我想调用它。我几乎尝试了所有方法，但它不起作用。

```
 SET @x=1;
 WHILE @x<=10 DO
 CALL mypro();
 SET @x=@x+1;
 END WHILE; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T16:59:46.883

流控制语句`IF, WHILE`需要在函数或存储过程的上下文中执行。如果您希望`mypro()`在循环中执行，则必须将该操作本身创建为过程。下面我将创建一个名为的过程，它在循环`call_mypro_x10()`中调用您的原始存储过程。`WHILE`

```
DELIMITER $$
CREATE PROCEDURE call_mypro_x10()
BEGIN
  SET @x = 1;
  WHILE @x <= 10 DO
    CALL mypro();
    SET @x := @x + 1;
  END WHILE;
END$$
DELIMITER ; 
```

然后调用这个包装另一个的过程：

```
CALL call_mypro_x10(); 
```

请注意，`DELIMITER`并非所有客户端都需要这些语句，并且一些 MySQL 客户端提供了一种不同的方法来指定存储过程和函数定义中所需的备用分隔符。显然[SQLyog 支持`DELIMITER`](http://static.webyog.com/docs/SQLyog/Delimiter_in_SQLyog_MySQL_Client.htm)

有[一个开放的功能请求](http://bugs.mysql.com/bug.php?id=48777)允许流控制语句作为正常查询执行的一部分。

# iphone - 有效访问数组内的数组

> ID：15029039
> 
> 赞同：2
> 
> 时间：2013-02-22T16:42:21.633
> 
> 标签：iphone, ios, cocoa-touch, design-patterns

我有一个名为的数据类型`Filter`，它有一个`NSMutableArray`包含一堆`FilterKey`对象的属性（每个过滤器的键数量不同）。我有一堆这些`Filter`对象存储在一个`NSMutableArray`被调用的`Filters`.

我有一个`UITableView`，其中每一行都填充了来自其中一个`FilterKey`对象的数据。我的问题是，对于 UITableView 中的给定行，我如何使用`Filters`数组来找到正确的`FilterKey`（考虑到我已经手动放置了过滤器和键）？

基本上，我知道我可以遍历`Filters`数组并为每个`Filter`对象遍历它的所有内容`FilterKeys`，但我想知道是否有更好的方法来做到这一点（即更好的数据结构，或者可以更快地给我正确的对象的东西?

抱歉，如果您有任何疑问，请在评论中告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:54:49.217

通常，您会为此使用部分和行，其中每个部分是一个过滤器，每一行是一个过滤键。

听起来您只想显示过滤器键，而没有过滤器的部分标题（如果我正确阅读了您的帖子）。如果您实际上并不想要标头，那很好，只需为`tableView:heightForHeaderInSection:`和`nil`.返回 0 即可`tableView:viewForHeaderInSection:`。

所有这些实际上更多是为了方便而不是性能。它不太可能比运行过滤器并累加它们的键数要快得多。这种操作速度极快。但是部分/行可以更好地映射您的数据，因此无论如何我都可能会使用它来保持代码更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:46:15.390

您可以使用哈希映射的[NSMutableDictionary](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html)，从而实现更快、更容易、可读的操作。

如果您更喜欢数组，则无需遍历搜索特定值，您可以使用[NSPredicate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPredicate_Class/Reference/NSPredicate.html)过滤您的数组。

# eclipse - 如何从外部访问 Eclipse Tomcat 服务器？

> ID：15029040
> 
> 赞同：0
> 
> 时间：2013-02-22T16:42:22.810
> 
> 标签：eclipse, apache, tomcat, tomcat6

我正在尝试访问在 Eclipse (OsX) 内部运行的 Apache Tomcat v6.0 服务器，该服务器位于不同网络上的机器上的端口 8090 上。我试过`http://my_public_ip:8090/`了，但它不起作用，谷歌搜索也没有发现任何有用的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:47:34.393

它是Windows机器吗？如果是这样，是否打开了 Windows 防火墙？如果是这样，您是否为端口 8090 和/或 java.exe（可能是 javaw.exe）添加了例外？

它以什么方式不起作用？

# c# - 将字节数组转换为 uint 数值

> ID：15029041
> 
> 赞同：0
> 
> 时间：2013-02-22T16:42:27.643
> 
> 标签：c#, byte, valueconverter, uint

假设我有字节数组

```
byte[] byteArr = new byte[] { 1, 2, 3, 4, 5 }; 
```

我想将此数组转换为 uint 的常规数值变量，因此结果将是

```
uint result = 12345; 
```

到目前为止，我看到的所有示例都是字节，字节我不需要字节，而是数值。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:50:33.363

听起来你想要这样的东西：

```
uint result = 0;
foreach (var digit in array)
{
    result = result * 10 + digit;
} 
```

或者更奇特的是，使用 LINQ：

```
uint result = array.Aggregate((uint) 0, (curr, digit) => curr * 10 + digit); 
```

# asp.net-mvc-4 - 只想在 ASP.NET MVC 中定义一次 ViewBag

> ID：15029044
> 
> 赞同：0
> 
> 时间：2013-02-22T16:42:39.963
> 
> 标签：asp.net-mvc-4

在 ASP.NET MVC 控制器中，我有两个创建和两个编辑操作。这些中的每一个都使用相同`ViewBag`的 s。问题是，如果我想改变一个`ViewBag`，我必须把它变成四个动作。有什么办法可以定义所有`Viewbag`的只是一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:53:17.303

您可以编写一个自定义操作过滤器：

```
public class MyActionFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        filterContext.Controller.ViewBag.FooBar = "baz";
    }
} 
```

然后用`[MyActionFilter]`属性装饰你所有的 4 个动作。

# c - 与 mmap 共享进程内存

> ID：15029053
> 
> 赞同：0
> 
> 时间：2013-02-22T16:43:07.507
> 
> 标签：c, linux, ipc, mmap

我有一个在内存中生成大量数据的 C 程序，我需要在内存中共享这些数据的一个特定部分，以便另一个进程可以读取它。

我试图用`mmap`它来做这件事，但我没有取得太大的成功。这是我的代码：

```
//Code above generates a pointer to the memory section I need to share, named addr

if (infoBlock->memory_size == 1073741824) { //This is the data block I need to share
   int err, fd;
   fd = open("/tmp/testOutput", (0_RDWR | 0_CREAT), S_IWUSR);
   if (fd < 0) {
         perror("Couldn't create output file\n");
         goto failedExit;
    }

    unsigned *p = mmap(addr, 1073741824, PROT_READ, (MAP_SHARED | MAP_FIXED), fd, 0);
    if (!p) {perror("mmap failed"); goto failedExit; }
    printf("p is now: %p\n", p); //This should point to the shared mapping
    printf("%u\n", *p); //Try to print out some data from the mapping

} 
```

运行程序后，我可以看到文件 /tmp/testOutput 在那里，但它的大小为 0。我不确定这是否是内存映射的正常现象，因为它在技术上不是一个文件。此外，我的程序中的所有输出都指向相同的内存地址。

我还可以看到 /proc/PID/maps 中存在的内存映射，并引用了 /tmp/testOutput。

一切似乎都在运行，但是当涉及到取消引用指针时，程序退出了，我假设这是因为我做错了映射，并且指针指向了它不应该指向的东西。

如果有人能发现我做错了什么，或者可以提供一些建议，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:59:28.613

您已经将与该文件关联的存储（或试图）映射到您的进程中，并且您坚持将其映射到您已经用于其他东西的地址（大概`addr`是以某种方式分配的）。

您没有说实际上是否`p`确实有您请求的地址，并且正如怀疑者指出的那样，您的错误检查被破坏了。

## 你的困惑：

事后，您不能将任意堆或其他进程内存页面与文件相关联。您必须在文件系统中分配它们，然后映射它们。（有一种方法可以使用 vmsplice 将它们与 UNIX 管道相关联，尽管它并不完全符合您的要求）。

请注意，该`MMAP_FIXED`标志只会将您的数据占用的页面*替换*为与文件关联的新页面。如果没有该标志，地址提示将被忽略，映射将被放置在其他地方。

## 解决方案：

1.  *在映射文件之前将文件*[ftruncate](https://www.kernel.org/doc/man-pages/online/pages/man2/ftruncate.2.html)到您想要的大小（这会在文件系统中分配存储空间）
2.  映射它*然后*填充它
3.  修复你的`mmap`错误检查

如果您无法更改分配方案，您可以管理的最好方法是将进程本地内存*复制*`write`到映射中，在这种情况下，您最好将其复制到文件中。

理想的情况是这样的：

```
void *alloc_mmap(const char *filename, size_t length)
{
    int fd;
    fd = open(filename, (0_RDWR | 0_CREAT), S_IWUSR);
    if (fd < 0) {
        perror("Couldn't create output file\n");
        return NULL;
    }
    if (ftruncate(fd, length)) {
        perror("Couldn't grow output file\n");
        close(fd);
        return NULL;
    }

    void *p = mmap(NULL, length, PROT_READ, MAP_SHARED, fd, 0);
    if (p == -1) {
        perror("mmap failed");
        close(fd);
        return NULL;
    }
    close(fd);
    return p;
}

// now you've allocated your memory, you can populate it and it will be
// reflected in the file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:53:22.067

这是 mmap 手册页的摘录。

```
 On  success,  mmap() returns a pointer to the mapped area.  On error, the value
   MAP_FAILED (that is, (void *) -1) is returned, and errno is set  appropriately.
   On  success,  munmap()  returns 0, on failure -1, and errno is set (probably to
   EINVAL). 
```

测试成功应该改为测试mmap的-1返回值。然后检查 errno 值。HTH。

# java - coneVolume 方法返回零

> ID：15029059
> 
> 赞同：2
> 
> 时间：2013-02-22T16:43:22.227
> 
> 标签：java, methods

当我的所有其他方法都正常工作时，我似乎无法弄清楚为什么我的 coneVolume 方法返回零。

```
import java.util.Scanner;

public class P56old{
public static double sphereVolume(double r){
    double sphereVolume = (4/3)*(Math.PI)*(Math.pow(r, 3));
    return sphereVolume;
}
public static double sphereSurface(double r){
    double sphereSurface = 4 * (Math.PI) * Math.pow(r, 2);
    return sphereSurface;
}
public static double cylinderVolume(double r, double h){
    double cylinderVolume = (Math.PI) * (Math.pow(r, 2)) * h;
    return cylinderVolume;
}
public static double cylinderSurface(double r, double h){
    double cylinderSurface = 2 * (Math.PI) * (Math.pow(r, 2)) + 2 * Math.PI * r * h;
    return cylinderSurface;
}
public static double coneVolume(double r, double h){
    double coneVolume = (1/3) * Math.PI * (Math.pow(r,2)) * h;
    return coneVolume;
}
public static double coneSurface(double r, double h){
    double s = Math.sqrt(Math.pow(r,2) + Math.pow(h, 2));
    double coneSurface = Math.PI * Math.pow(r,2) + Math.PI * r * s;
    return coneSurface;
}
public static void main(String[] args){
    Scanner in = new Scanner(System.in);
    System.out.print("Please give the radius: ");
    double r = in.nextDouble();
    System.out.print("Please give the height: ");
    double h = in.nextDouble();

    double coneVolume = coneVolume(r,h);
    double sphereVolume = sphereVolume(r);
    double sphereSurface = sphereSurface(r);
    double cylinderVolume = cylinderVolume(r,h);
    double cylinderSurface = cylinderSurface(r,h);
    double coneSurface = coneSurface(r,h);

    System.out.println("The Sphere Volume is " + sphereVolume);
    System.out.println("The Sphere Surface is " + sphereSurface);
    System.out.println("The Cylinder volume is " + cylinderVolume);
    System.out.println("The Cylinder Surface is " + cylinderSurface);
    System.out.println("The Cone Volume is " + coneVolume);
    System.out.println("The Cone Surface is " + coneSurface);
}
} 
```

我将不胜感激对此事的任何见解，并赞赏任何批评。我认为这可能与所有公共类有关，并且可能另一种方法正在影响 coneVolume 方法，但我目前对解决手头问题的方法知之甚少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:44:53.570

当你做 1/3 时，它会进行整数除法，结果为 0（余数为 1）。乘以 0 得到 0。改为执行 1.0/3.0，它会正确计算出三分之一的近似值。

# vb.net - 使用 vb.net 更新 microsoft 访问记录

> ID：15029061
> 
> 赞同：0
> 
> 时间：2013-02-22T16:43:22.887
> 
> 标签：vb.net

到目前为止，我一直在尝试更新此记录近 3 天，在整个 Internet 上四处游荡，找不到任何对我有帮助的东西，尝试了所有解决方案，但一无所获。

我想更新一条记录，表单名为`search form`，表由 8 列组成，其中`student_id`是一个*自动编号*，所以我没有搞砸它。

这是我想出的最后一个，它仍然无法正常工作，它突出显示`executenonquery()`并在按下按钮后给出错误消息，上面写着`no values where given to one or more required parameters`......

```
Dim con As New OleDb.OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\Anton\Desktop\LoginDatabase\Users.mdb")
        con.Open()
       sql = "update salary set [empname]=?,[department]=?,[date1]=?, [accname]= ?,[accnumber]=?,[backname]=?,[rate]=?,[house]=?,[electricity]=?,[travel]=?, [hardship]= ?,[health]=?,[nhif]=?,[nssf]=?,[insurence]=?,[loan]=?,[welfare]=? where empno = ?"
    Dim cmd As New OleDb.OleDbCommand(sql, con)

    cmd.Parameters.AddWithValue("@empname", TextBox2.Text)
    cmd.Parameters.AddWithValue("@department", TextBox3.Text)
    cmd.Parameters.AddWithValue("@date1", DateTimePicker1.Value)
    cmd.Parameters.AddWithValue("@accname", TextBox4.Text)
    cmd.Parameters.AddWithValue("@accnumber", TextBox5.Text)
    cmd.Parameters.AddWithValue("@bankname", TextBox6.Text)
    cmd.Parameters.AddWithValue("@rate", TextBox7.Text)
    cmd.Parameters.AddWithValue("@house", TextBox8.Text)
    cmd.Parameters.AddWithValue("@electricity", TextBox9.Text)
    cmd.Parameters.AddWithValue("@travel", TextBox10.Text)
    cmd.Parameters.AddWithValue("@hardship", TextBox11.Text)
    cmd.Parameters.AddWithValue("@health", TextBox12.Text)
    cmd.Parameters.AddWithValue("@nhif", TextBox13.Text)
    cmd.Parameters.AddWithValue("@nssf", TextBox14.Text)
    cmd.Parameters.AddWithValue("@insurence", TextBox15.Text)
    cmd.Parameters.AddWithValue("@loan", TextBox16.Text)
    cmd.Parameters.AddWithValue("@welfare", TextBox17.Text)
    cmd.Parameters.AddWithValue("@empno", TextBox1.Text)
    Try
        cmd.ExecuteNonQuery()
        cmd.Dispose()
        MsgBox("updated")
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T22:52:34.357

**您的错误是您在 SQL 语句中拼错了 BankName。使用“[银行名称]=？”。**

## 不要忘记 ExecuteNonQuery 方法返回一个整数，告诉您有多少记录受到影响。如果在表中未找到 ID，则不会更新，也不会出错，因此显示“已更新”的消息框并不总是正确的。

但是，替换表单并使用 Visual Studio 的本机功能要容易得多，如下所示：

1.  打开**Server Explorer**，单击**Connect to a Database**并连接到您的 MDB 文件。
2.  从菜单中，选择**数据 > 显示数据源**。单击**添加新数据源**按钮。
3.  在 Data Sources 窗格中，使用**Add New Datasource**，选择 Database 然后 Dataset，完成向导并选择 Salary 表。将创建一个数据集并将其放入您的项目中，您将在“数据源”窗格中看到它。
4.  在不关闭数据源窗格的情况下，创建一个新的空白表单，它将在设计视图中打开。
5.  单击表名“salary”节点，然后下拉组合框以选择**Details**。
6.  展开表格并以相同方式下拉 date1 列，以确保使用了**DateTimePicker**控件。
7.  将 Salary 表从**Data Sources**窗格拖到新的空白表单上。

带有导航栏的表单将出现在您的眼前。将创建一个以您的数据库名称命名的新数据集。

对于以前的 MS Access 用户来说，这将是一个更直观的表单，并且您不需要手动创建任何插入语句，就像您上面的问题一样。

# ruby-on-rails - 测试单元使用控制台而不是 tmux 产生颜色，除非指定了 --use-color

> ID：15029071
> 
> 赞同：0
> 
> 时间：2013-02-22T16:44:03.260
> 
> 标签：ruby-on-rails, testunit, tmux

如果我创建一个新的 Rails (3.2.12) 应用程序。将`test-unit`gem 添加到我的开发、测试组和脚手架资源中。当我从 Mac console.app 运行测试时，我得到了颜色输出。

```
bundle exec rake test 
```

当我为应用程序创建一个 tmux 会话（在 console.app 中）并运行完全相同的命令时。我没有得到颜色输出。但是，如果我通过“--use-color”开关，那么我会得到 tmux 中测试的颜色输出。

```
bundle exec rake test TESTOPTS="--use-color" 
```

我在我`tmux.config`的 with中设置了 256 种颜色`set -g default-terminal "screen-256color"`。知道为什么我在没有 TESTOPTS 的情况下运行 rake 任务时在 tmux 中没有颜色吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T05:10:20.783

似乎*测试单元*通过（主要）查看 TERM 环境变量来猜测终端是否支持颜色。不幸的是，`screen-256color`不满足[它所做的检查](https://github.com/test-unit/test-unit/blob/2.5.4/lib/test/unit/ui/console/testrunner.rb#L465)。

要求将其识别`screen`扩展到包括`screen-256color`, 也可能是合理的。

我认为您可以在配置文件中删除一些条目以提供默认参数。`test-unit.yml`（在当前目录中）或（在您的主目录中的“隐藏”文件）中的第`~/.test-unit.yml`一个将被加载：

```
runner: console
console_options:
  arguments: --use-color=yes 
```

# android - SharedPreferences 得到“无法执行 Acitvity 的方法”

> ID：15029074
> 
> 赞同：0
> 
> 时间：2013-02-22T16:44:16.253
> 
> 标签：android, sharedpreferences

我想存储用户数据和密码，但总是收到错误“无法执行活动的方法”。

我认为写操作有效：

```
Editor editor = getSharedPreferences("pref", 0).edit();
editor.putString(CustomizedListView.KEY_USER, username);
editor.putString(CustomizedListView.KEY_PASSWORD, password);
System.out.println("username: " + username);
System.out.println("password: " + password);
editor.commit(); 
```

阅读首选项时出现错误：

```
public class RESTClient extends Activity {

    private ArrayList<NameValuePair> uebergabeParam = new ArrayList<NameValuePair>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
    }

    public String getResponse(String URLParameter, HttpMethod method) {
        System.out.println("RESTClient");

        SharedPreferences pref = getPreferences(MODE_PRIVATE);
            // or
            SharedPreferences pref = getSharedPreferences("pref", MODE_PRIVATE);
        String username = pref.getString(CustomizedListView.KEY_USER, "");
        String password = pref.getString(CustomizedListView.KEY_PASSWORD, "");

    try {
        Client client = new Client();
        client.addParameter(method, uebergabeParam, URLParameter, username , password);
        return client.execute().get();
    } catch (InterruptedException e) {
        System.out.println("RESTClient getResponse " + e);
        e.printStackTrace();
    } catch (ExecutionException e) {
        System.out.println("RESTClient getResponse " + e);
        e.printStackTrace();
    }
    return "";
    }
} 
```

我收到以下错误：

```
02-22 17:37:58.903: I/System.out(1714): RESTClient
02-22 17:37:58.903: D/AndroidRuntime(1714): Shutting down VM
02-22 17:37:58.903: W/dalvikvm(1714): threadid=1: thread exiting with uncaught exception (group=0x412f42a0)
02-22 17:37:58.918: E/AndroidRuntime(1714): FATAL EXCEPTION: main
02-22 17:37:58.918: E/AndroidRuntime(1714): java.lang.IllegalStateException: Could not execute method of the activity
02-22 17:37:58.918: E/AndroidRuntime(1714):     at android.view.View$1.onClick(View.java:3691)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at android.view.View.performClick(View.java:4211)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at android.view.View$PerformClick.run(View.java:17267)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at android.os.Handler.handleCallback(Handler.java:615)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at android.os.Looper.loop(Looper.java:137)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at android.app.ActivityThread.main(ActivityThread.java:4898)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at java.lang.reflect.Method.invokeNative(Native Method)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at java.lang.reflect.Method.invoke(Method.java:511)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at dalvik.system.NativeStart.main(Native Method)
02-22 17:37:58.918: E/AndroidRuntime(1714): Caused by: java.lang.reflect.InvocationTargetException
02-22 17:37:58.918: E/AndroidRuntime(1714):     at java.lang.reflect.Method.invokeNative(Native Method)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at java.lang.reflect.Method.invoke(Method.java:511)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at android.view.View$1.onClick(View.java:3686)
02-22 17:37:58.918: E/AndroidRuntime(1714):     ... 11 more
02-22 17:37:58.918: E/AndroidRuntime(1714): Caused by: java.lang.NullPointerException
02-22 17:37:58.918: E/AndroidRuntime(1714):     at android.app.Activity.getLocalClassName(Activity.java:4556)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at android.app.Activity.getPreferences(Activity.java:4589)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at kommunikation.RESTClient.getResponse(RESTClient.java:67)
02-22 17:37:58.918: E/AndroidRuntime(1714):     at Login.onClick(Login.java:124)
02-22 17:37:58.918: E/AndroidRuntime(1714):     ... 14 more 
```

希望你能帮助我不知道为什么。非常感谢！

**编辑：**

```
public class CustomizedListView extends Activity {

    // Login
    public static final String KEY_USER = "user";  
    public static final String KEY_PASSWORD = "password";
} 
```

我也编辑了 getReponse() 方法并添加了

> super.onCreate(savedInstanceState);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:51:43.563

你需要调用`super.onCreate()`你的`onCreate()`方法。

> 派生类必须调用该方法的超类实现。如果他们不这样做，将引发异常。-[文档](http://developer.android.com/reference/android/app/Activity.html#onCreate%28android.os.Bundle%29)

该异常的根源表明您的活动尚未初始化。它没有上下文，而且它的很多字段都是空的。原因之一是您没有调用`super.onCreate()`，但是这会在`onCreate()`返回后立即引发不同的异常（如上面文档中的行所示）。我怀疑您正在做一些不寻常的事情，例如使用关键字实例化活动实例`new`并尝试调用无法按预期工作的此方法。创建活动时，您需要通过适当的渠道。具体来说，您需要调用[startActivity()](http://developer.android.com/reference/android/app/Activity.html#startActivity%28android.content.Intent%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:55:34.390

我在你的代码中看到的是你正在混合方法`getPreferences()`，`getSharedPreferences()`第二个是当你有不同的偏好文件时。我不确定这是否会导致应用程序崩溃。

如果您只使用 1 个首选项文件，请避免使用该方法`getSharedPreferences()`如果您确实有超过 1 个首选项文件，则必须在编译时指定您所引用的文件。

最后编辑：

您正在从没有的方法调用 SharedPreferences `Context`：

```
public String getResponse(String URLParameter, HttpMethod method){

   SharedPreferences pref = getSharedPreferences("pref", MODE_PRIVATE);

} 
```

只要它在`Activity`使用这个：

```
public String getResponse(String URLParameter, HttpMethod method){

       SharedPreferences pref = getAplicationContext().getSharedPreferences("pref", MODE_PRIVATE);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:54:19.450

从下面的链接阅读为什么需要打电话`super.onCreate(savedInstanceState);`

[super.onCreate(savedInstanceState);](https://stackoverflow.com/questions/14671897/super-oncreatesavedinstancestate/14671970#14671970)

```
@Override
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
} 
```

`sharedPreference`像这样读取保存的数据

```
public String getResponse(String URLParameter, HttpMethod method) {

    SharedPreferences pref = getPreferences("pref", MODE_PRIVATE);
    String username = pref.getString(CustomizedListView.KEY_USER, "");
    String password = pref.getString(CustomizedListView.KEY_PASSWORD, "");

        ...
} 
```

我认为 NPE 可能用户名或密码具有空值。使用调试检查它。

```
editor.putString(CustomizedListView.KEY_USER, username);
editor.putString(CustomizedListView.KEY_PASSWORD, password); 
```

# css - 嵌套的 DIV 标签和高度

> ID：15029077
> 
> 赞同：0
> 
> 时间：2013-02-22T16:44:22.030
> 
> 标签：css

我试图让一些嵌套的 div 标签根据其中的内容自动增长高度。[这里给出了](http://jsfiddle.net/Y4HVr/)一个示例代码。例如，中间有更多内容，但高度似乎没有增长。让它自动增长的诀窍是什么？我从父母内部取出所有浮动元素，认为这可能是[CSS 明确规则](http://www.webtoolkit.info/css-clearfix.html)。但这也无济于事。感谢任何帮助。

```
 <div id="editmain">
        <div class="ticker">
         some content here
        </div>
        <div class="ticker">
         some longer content content here
        </div>
       <div class="ticker">
         some content here
        </div>
    </div>

    #editmain
        {
            position:relative;
            min-height:480px;
            background-color:#84d;
            overflow:hidden;
            padding: 20px 0px 30px 0px;  
        }

.ticker
        {    
            position:relative;
            border-bottom: solid 2px #ddd;
            margin:10px;
            background-color:white;
            overflow:hidden;             
            height:auto;
            min-height:100px;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:37:02.200

> 在绝对定位模型中，一个盒子完全从正常流程中移除（它对后面的兄弟姐妹没有影响）并分配一个相对于包含块的位置。

[w3.org](http://www.w3.org/TR/CSS2/visuren.html#comp-abspos)

删除绝对定位并找到另一种使用宽度和边距格式化标签和输入的方法。[小提琴](http://jsfiddle.net/jim31415/25xds/2/)

```
 .tickertxtlabel
    {
        display:inline-block;
        margin: 10px 10px 10px 10px;        
        width:90px; 
    } 
```

# java - 启动 Cooja 时的 java 类路径问题

> ID：15029078
> 
> 赞同：0
> 
> 时间：2013-02-22T16:44:23.620
> 
> 标签：java, ant, classpath, packages

我必须在 Ubuntu 12.04 下运行著名的基于 java 的 Cooja 模拟器，并使用我制作的一些类进行扩展。在我的 java 文件中，我记得 jfreechart 包：

```
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYLineAndShapeRenderer;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;
import org.jfree.ui.ApplicationFrame;
import org.jfree.chart.axis.ValueAxis; 
```

我使用以下命令运行模拟器：
**$ ant run_bigmem**

然后弹出一些异常：

```
compile:
[javac] Compiling 44 source files to /home/user/contiki_copy/tools/cooja/build
[javac] /home/user/contiki_copy/tools/cooja/java/se/sics/cooja/plugins/sixlowpan_metrics/Chart.java:7: error: package org.jfree.chart does not exist
[javac] import org.jfree.chart.ChartFactory;
[javac]                       ^
[javac] /home/user/contiki_copy/tools/cooja/java/se/sics/cooja/plugins/sixlowpan_metrics/Chart.java:8: error: package org.jfree.chart does not exist
[javac] import org.jfree.chart.ChartPanel;
[javac]                       ^
[javac] /home/user/contiki_copy/tools/cooja/java/se/sics/cooja/plugins/sixlowpan_metrics/Chart.java:9: error: package org.jfree.chart does not exist
[javac] import org.jfree.chart.JFreeChart;

 .
 .
 .
 and so on.. 
```

然后我修改了文件：**/home/user/.bashrc**并添加了以下几行：

```
export CLASSPATH=.:/home/user/contiki_copy/tools/cooja/lib/jfreechart-1.0.11.jar:/home/user/contiki_copy/tools/cooja/lib/jcommon-1.0.14.jar 
```

然后，在提示符下，我输入：
**$ echo $CLASSPATH**以查看环境变量是否已正确输入，实际上我得到了：

```
user@ubuntu:~/contiki_copy/tools/cooja$ echo $CLASSPATH 
.:/home/user/contiki_copy/tools/cooja/lib/jfreechart-1.0.11.jar:/home/user/contiki_copy/tools/cooja/lib/jcommon-1.0.14.jar 
```

尽管所有这些努力都没有改变，我仍然得到错误..不知道该怎么做，真的，有什么想法吗？

**我猜build.xml**文件的关键部分如下：

```
<target name="run_bigmem" depends="init, compile, jar, copy configs">
<java fork="yes" dir="${build}" classname="se.sics.cooja.GUI" maxmemory="1536m">
  <arg line="${args}"/>
  <env key="LD_LIBRARY_PATH" value="."/>
  <classpath>
<pathelement path="${build}"/>
    <pathelement location="lib/jdom.jar"/>
    <pathelement location="lib/log4j.jar"/>
    <pathelement location="lib/jsyntaxpane.jar"/>
<pathelement location="lib/jfreechart-1.0.11.jar"/>
    <pathelement location="lib/jcommon-1.0.14.jar"/>
  </classpath>
</java> 
```

我有目录中的所有 jar：**/home/user/contiki_copy/tools/cooja/lib**并且我正在运行目录中的所有内容：**/home/user/contiki_copy/tools/cooja**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T09:51:30.853

**最终解决方案：**
解决此问题的唯一方法是通过 build.xml 文件。很明显，**ant 并不关心 java 类路径 env-var**。编辑构建文件时，请确保将项目所需的 jars 放在正确的“目标”中，甚至放在 xml 文件的“编译”目标中。

例如，如果您以这种方式启动 cooja：

```
ant run 
```

您需要编辑构建文件的目标“运行”。如果您以其他方式启动模拟器：

```
ant run_bigmem 
```

您需要编辑“run_bigmem”目标。

此外，**还要确保正确编辑“编译”目标**，否则编译将失败，并且大量导入也会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:13:36.690

您需要在您的 ant“编译”目标中包含所有相关的 jar（如在“runfree”目标中）。最有可能的是，您可以在各种目标之间共享一组通用库。很确定你可以用蚂蚁做这个，但我自己对它不是很熟悉。

# java - 安排任务的最佳课程

> ID：15029083
> 
> 赞同：1
> 
> 时间：2013-02-22T16:44:39.720
> 
> 标签：java, android, task, schedule

我计划制作一个应用程序，每 X 小时启用一次 Android 的移动数据，持续 Y 分钟。我想知道我应该使用哪个类来安排这个任务。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:52:00.367

对于用户可以为您提供特定时间和日期的任务，您可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)让您的任务在那个时间执行。

这样，您的应用程序就不需要一直运行，并且会在时间到来时由 Android 启动。

您甚至可以使用[setRepeating()](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)方法只设置一次并让它每次都运行。

# java - 我的 java 方法代码有什么问题？- 堆栈

> ID：15029085
> 
> 赞同：0
> 
> 时间：2013-02-22T16:44:51.320
> 
> 标签：java, methods, iterator, stack, peek

在过去的几个小时里，我创建了一个方法，该方法将从堆栈 s1 中获取空元素，并将它们放入 s2 中。然后该类应打印堆栈。方法如下

```
import net.datastructures.ArrayStack;
import net.datastructures.Stack;
import javax.imageio.IIOException;

public class Stacks {
    public static <E> void compress(Stack<E> s1, Stack<E> s2) {
        int counter = 0;
        while (!s1.isEmpty()) {
            s1.peek();
            if (s1.peek() == null) {
                s1.pop();        
            } else if (s1.peek() == !null) {
                s1.pop();
                s2.push();
                counter++;
            }
            for (counter=10;counter>s1.size(); counter--){
            }
            s2.pop();
            s1.push();
        }    
    }

    public static void main(String[] args) {
        // test method compress
        Stack<Integer> S1 = new ArrayStack<Integer>(10);
        S1.push(2);
        S1.push(null);
        S1.push(null);
        S1.push(4);
        S1.push(6);
        S1.push(null);
        Stack<Integer> s2 = new ArrayStack<Integer>(10);
        s2.push(7);
        s2.push(9);
        System.out.println("stack S1: " + S1);
        // prints: "stack S: [2, null, null, 4, 6, null]"
        System.out.println("stack s2: " + s2);
        // prints: "stack X: [7, 9]"
        compress(S1, s2);
        System.out.println("stack S1: " + S1);
        // should print: "stack S: [2, 4, 6]"
        System.out.println("stack s2: " + s2);
        // should print: "stack X: [7, 9]"
    }
} 
```

Eclipse 给我 peek() 和 push() 方法的错误；它允许 pop() 方法。我的理解是这些方法是继承的？任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:45:50.300

```
else if (s1.peek() == !null) 
```

这是不正确的。用这个：

```
else if (s1.peek() != null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:48:43.770

这个：

```
 if (s1.peek() == null) {
        s1.pop();

    } else if (s1.top() == !null) {
        s1.pop();
        s2.push();

        counter++;
    } 
```

应该：

```
 if (s1.top() == null) {
        s1.pop();

    } else {
        s2.push(s1.pop());

        counter++;
    } 
```

您无需仔细检查`s1.peek()`is not null。另外，`!null`不是正确的语法。

我编辑了我的答案以使用`top()`而不是`peek()`和`pop()` `s1`进入`s2`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:50:33.863

除了比较错误之外，您还有一些语法错误：

`push()`需要一个参数：你在压栈什么？即使它是`null`它仍然需要是`s1.push(null)`。如果这是你正在做的事情`pop()`，你需要将结果分配`pop()`给某个东西——现在它正在消失在以太中。

您正在使用的对象（net.datastructures.Stack）没有`peek()`方法；相反，它具有`top()`执行相同功能。

# c# - 点击疯狂

> ID：15029089
> 
> 赞同：1
> 
> 时间：2013-02-22T16:45:08.433
> 
> 标签：c#, clickonce

好吧，我要疯了。

我们有一个包，我们通过 clickonce 部署给我们的 UAT 用户，为他们提供一个通过 HTML 页面链接下载它的 URL。直到最近我们还没有对任何软件包进行版本化，所以它们都有版本 1.0.0.0 - 最终结果是当我们向 UAT 发布新版本时，他们必须先卸载旧版本，然后才能下载新版本否则认为它们是相同的应用程序标识。由于他们没有管理员访问权限，这有点问题，导致他们不得不删除 c:\documents and settings\username...... 中的文件以单击一次并删除注册表项，

他们安装的最后一个版本是 UAT 5。我现在已经构建了一个 UAT 6 版本，它的身份为 6.0.0.0，所以如果他们点击启动链接，它应该会自动下载，而不必删除 5。它确实下载一些东西，你可以看到它正在下载一个包——不仅仅是像没有更新时那样直接打开应用程序——但是当应用程序打开时，它仍然是版本 5，通过检查文档和设置中的文件大小来确认。

我个人可以单击相同的 URL 链接，它会为我下载版本 6。我使用控制面板-> 添加删除程序来删除由于访问控制而无法删除的先前版本，但这是唯一的区别。

在他们的机器上，我可以删除所有文件、所有注册表设置，然后单击为我下载第 6 版的同一链接，但不知何故，他们最终仍然下载了第 5 版。

有任何想法吗？我在这里疯了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T16:33:36.043

听起来好像客户端机器正在检测那里有一个新的发布包，但 EXE 本身没有改变。为了节省时间/带宽，对于身份未更改的任何程序集，ClickOnce 会将以前下载的程序集带到本地计算机上的缓存中。

换句话说，听起来您正在更新 Publish 版本而不是 Assembly 版本。要使新程序集的标识不同，请确保更新程序集版本（在项目属性 > 应用程序 > 程序集信息...下）以及发布版本（在项目属性 > 发布下）。

您也可以输入文件版本（也可以在项目属性> 应用程序> 程序集信息...下），但它永远不会出现在应用程序清单中。

# python - Python 列表帮助 q = { 1: [[1]] }

> ID：15029091
> 
> 赞同：0
> 
> 时间：2013-02-22T16:45:13.883
> 
> 标签：python

有人可以向我解释这条线的作用吗？

```
q = { 1: [[1]] } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T16:46:18.980

它创建一个带有一个键的字典，其值是一个嵌套列表：

```
>>> q = { 1: [[1]] } 
>>> q.keys()
[1]
>>> q[1]
[[1]]
>>> q[1][0]
[1]
>>> q[1][0][0]
1 
```

请记住，在 python 中，列表使用从 0 开始的索引，因此`[0]`上面示例中的引用检索列表的*第一个*元素。

或者从另一边接近它：

*   `1`只是一个文字整数值
*   `[elem1, elem2, elem3]`是一个列表定义，所以`[1]`是一个包含*一个*元素的列表，整数`1`。
*   `{key: value}`是一个字典定义，将一组键与相应的值连接起来。`{1: 1}`创建一个具有 1 个键值对的字典，一个`1`指向 的值的键`1`。
*   列表和字典可以嵌套；列表可以是字典值，您也可以将列表放入其他列表中。
    *   `[[]]`是一个包含 1 个元素的列表，另一个是空列表。
    *   `[[1]]`是一个有 1 个元素的列表，另一个列表也有 1 个元素，整数值 1。
    *   `{1: [[1]]}`是一个字典，有一个键，整数值 1，它连接到一个有一个元素的列表，另一个列表也只有 1 个元素，另一个整数值 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:57:39.943

我们创建一个包含单个元素的字典

其键为整数 1

并且值是具有单个元素的列表

该元素是另一个列表

与另一个单一元素

这是一个整数 1

# javascript - 拉斐尔在同一页面上的多个图表

> ID：15029092
> 
> 赞同：0
> 
> 时间：2013-02-22T16:45:14.590
> 
> 标签：javascript, html, raphael, graphael

我正在使用至少两个拉斐尔图表创建一个网页。

任何帮助将不胜感激。我希望我已经适当地解释了这个问题。

```
 <th scope="row">Perl</th>
                <td>3%</td>
            </tr>
            <tr>
                <th scope="row">C++</th>
                <td>2%</td>
            </tr>
            <tr>
                <th scope="row">Java</th>
                <td>2%</td>
            </tr>
            <tr>
                <th scope="row">Objective-C</th>
                <td>2%</td>
            </tr>
        </tbody>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:13:54.580

问题出在 g.pie.js 文件中

你正在这样做：

```
$("tr").each(function () { 
  // this loops throught all TR tags in the document, which contains two tables...
  values.push(parseInt($("td", this).text(), 10));
  labels.push($("th", this).text());
}); 
```

你“应该”做的是：

```
 var table = $("#holder");
  // only select the tr rows that are inside your "holder" div
 $("tr", table).each(function () {
   values.push(parseInt($("td", this).text(), 10));
   labels.push($("th", this).text());
 }); 
```

希望这可以帮助。您将不正确的数据集推入饼图。

# sql - SQL Server 2005 和 2008 之间的命令差异

> ID：15029096
> 
> 赞同：0
> 
> 时间：2013-02-22T16:45:37.447
> 
> 标签：sql, sql-server-2008, sql-server-2005

我浏览了许多页面试图找到这些信息，但我得到的只是主干结构和 SQL 服务器的运行方式。我想知道的是命令的区别。哪些命令可以在 2008 中使用，但在 2005 中不受支持，无论是否调整兼容性级别。我设计了不同的查询，我的客户的数据库版本也不同。因此，当我创建某些东西时，我想知道它是否会在我投入时间或开始真正打破我的头脑之前知道为什么代码在客户端计算机上不起作用但它在我的计算机上起作用。一个例子是 Pivot，我必须更改兼容性。

那么哪些命令发生了变化？无论是指向页面的链接，或者如果输入的内容不多，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:50:24.483

[这篇 technet 文章](http://technet.microsoft.com/en-us/library/cc721270%28v=sql.100%29.aspx)列出了 SQL 2008 T-SQL 中的新命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:50:24.350

这里有一些信息，但不是很多，所以我怀疑它是完整的列表

[http://msdn.microsoft.com/en-us/library/ms143179(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms143179(v=sql.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:00:37.133

版本控制！

*通常*较低版本的命令可用并且在较高版本中运行良好。但并非完全相反。看看下面的帖子。

*   [SQL Server 2008 相对于 SQL Server 2005 的优势？](https://stackoverflow.com/questions/198478/advantages-of-sql-server-2008-over-sql-server-2005)

对于每个主要版本[，Microsoft 都会在产品信息下发布已完成的改进或更改。](http://www.microsoft.com/en-us/sqlserver/product-info/overview-capabilities.aspx)

# jquery - jQuery | 阿贾克斯 | JSON 表单提交，错误未触发。我错过了什么？

> ID：15029099
> 
> 赞同：0
> 
> 时间：2013-02-22T16:45:44.427
> 
> 标签：jquery, html, json, forms

我回来了我一直在努力的同一张表格......我的问题是我可以让这个表格正确提交，但错误响应不起作用。我看到响应在控制台中返回并出现错误，但它没有在我的响应中显示我的错误消息......我可以提交空并且我的 jQuery 显示为好像它是成功的，即使我的响应是：`{"status":"error","message":"Name is blank"}`或`{"status":"error","message":"Email is blank or invalid"}`

这是HTML

```
<div class="span6">
<h4>Ask us anything or request a quote:</h4>
<div id="form" style="padding-top: 1em;">
<form id="contactForm" name="contactForm" method="post">
<div class="controls">
<input class="span6" type="text" name="name" id="name" placeholder="What is your name?" required>
</div>
<div class="controls">
<input class="span6" type="email" name="email" id="email" placeholder="What is your email address?" required>
</div>
<div class="controls">
<textarea rows="3" class="span6" name="message" id="message" placeholder="How can we help you?"></textarea>
</div>
<div class="controls">
<input type="button" class="btn btn-primary" name="formSubmit" id="formSubmit" value="Send E-Mail">
</div>
</form>
</div>
<div id="thanks" style="display:none">
<h3>Thank you for that! <br>
<span class="muted"><small>We appreciate you getting in touch with us...</small></span></h3>
<p>We'll try to get back to you as soon as possible. We know your time is valuable, so we'll try as hard as we can not to waste it.</p>
</div>
<div id="error" style="display: none;">
<h3>Error <span class="muted"> Something in that message did not work right...</span></h3>
<p>Please <a href="#" class="btn btn-danger" id="restForm">CLICK HERE TO RESET THE FORM</a></p>
</div>
</div>
</div> 
```

这是jQuery：

```
 <script>
$(document).ready(function(){
    $('#formSubmit').click(function(){
        $.ajax({
            type: "POST",
            url: "php/contact.php",
            data: $("#contactForm").serialize(),
            dataType: "json",

                success: function(msg){
                $("#form").fadeOut('fast');
                $("#thanks").fadeIn('slow');
                $('#contactForm').get(0).reset();
                $('form[name=contactForm]').get(0).reset();                 
                },
                error: function(){
                $("#form").fadeOut('fast');
                $("#error").fadeIn('slow');
            }
        });
    });
}); 
```

这是PHP：

```
function checkEmail($email){

if(eregi("^[a-zA-Z0-9_]+@[a-zA-Z0-9\-]+\.[a-zA-Z0-9\-\.]+$]", $email)){
    return FALSE;
}

list($Username, $Domain) = split("@",$email);

if(@getmxrr($Domain, $MXHost)){
    return TRUE;

} else {
    if(@fsockopen($Domain, 25, $errno, $errstr, 30)){
        return TRUE;
    } else {

        return FALSE;
    }
}
}   

$response_array = array();

if(empty($_POST['name'])){

//set the response
$response_array['status'] = 'error';
$response_array['message'] = 'Name is blank';

} elseif(!checkEmail($_POST['email'])) {

//set the response
$response_array['status'] = 'error';
$response_array['message'] = 'Email is blank or invalid';

} else {

//send the email
$body = $_POST['name'] . " sent you a message\n";
$body .= "Details:\n\n" . $_POST['message'];
mail($_POST['email'], "SUBJECT LINE", $body);

//set the response
$response_array['status'] = 'success';
$response_array['message'] = 'Email sent!';

}

echo json_encode($response_array); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:53:07.240

如果我是你，我会使用 jQuery validate 插件之类的东西。这将在提交表单之前对其进行验证，这是一种更好的做事方式，因为它减少了您向服务器发出的处理 PHP 的请求数量。

[http://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:54:44.093

问题是，当您发送回恰好包含 status=error 的 json 时，您期望 Ajax 出现“错误”。

你真正应该做的是设置一个触发错误处理程序的 http 状态码错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:06:56.750

您似乎对 jQuery 认为的 AJAX“错误”感到困惑。就 jQuery 而言，您返回的项目中显示“错误”并不会使其成为错误。如果调用的 URL 出现 404 或 500 错误（例如，您将其指向错误的服务器或该 URL 上没有服务），则这是一个错误。

只要发出请求并成功检索到响应，jQuery 就会很高兴它对您有所帮助，并将结果传递给“成功”方法。您需要查看成功中的结果，并查看 JSON 是否表明它有效。如果是，则适当地更新显示，如果不是，则更新它以显示错误消息。

仅期望在对服务器进行 AJAX 调用并获得响应时实际失败时触发错误方法。可能触发的其他示例是超时或尝试调用服务器而不是提供此页面的服务器。期待成功，每隔一段时间就能得到结果。

鉴于您在上面所说的关于您的回复格式的内容：

```
 $.ajax({
    type: "POST",
    url: "php/contact.php",
    data: $("#contactForm").serialize(),
    dataType: "json",
    success: function(msg) {
      if (msg.status == "error") {
        // If we got an error message back in the JSON, replace our generic error
        // message with the more specific error the server sent.
        $("#form").fadeOut('fast');
        if (msg.message) {
          $("#errorMessage").html(msg.message);
        }
        $("#error").fadeIn('slow');
      } else {
        // The call succeeded.
        $("#form").fadeOut('fast');
        $("#thanks").fadeIn('slow');
        $('#contactForm').get(0).reset();
        $('form[name=contactForm]').get(0).reset();
      }
    },
    error: function() {
      $("#form").fadeOut('fast');
      $("#error").fadeIn('slow');
    }
  }); 
```

将其与您的 HTML 稍作更改配对（请注意，我在跨度上放置了一个带有错误消息的选择器）：

```
<div id="thanks" style="display:none">
<h3>Thank you for that! <br>
<span class="muted"><small>We appreciate you getting in touch with us...</small></span></h3>
<p>We'll try to get back to you as soon as possible. We know your time is valuable, so we'll try as hard as we can not to waste it.</p>
</div>
<div id="error" style="display: none;">
<h3>Error <span id="errorMessage" class="muted">Something in that message did not work right...</span></h3>
<p>Please <a href="#" class="btn btn-danger" id="restForm">CLICK HERE TO RESET THE FORM</a></p>
</div> 
```

# c - 用于构建链接先前构建的库的多个应用程序的 Makefile

> ID：15029103
> 
> 赞同：0
> 
> 时间：2013-02-22T16:46:03.457
> 
> 标签：c, makefile

我认为按如下方式组织我的项目：

我的项目

|--src

|--包括

|--测试

核心文件位于 src 和 include 目录中，而核心的不同测试应用程序位于 test 目录中（多个 *.c 包含每个 main() 函数）。核心应构建为静态库，将链接到所有应用程序）。

如何编写一个基本的 Makefile 来满足这些要求？我已经用谷歌搜索并发现以下网站提供了用于构建可执行文件的 Makefile 模板[1](http://felixcrux.com/blog/creating-basic-makefile)。如何根据我的需要扩展这个 Makefile？

如果您认为我的项目组织不好或者您有更好的想法，请告诉我！

任何帮助表示赞赏！

谢谢，乔纳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:57:26.727

有一个名为 dotmk 的小项目，它使 Makefile 的创建变得非常容易。

这是链接： [https ://github.com/swrh/dotmk](https://github.com/swrh/dotmk)

您只需要运行安装脚本并像示例一样创建 Makefile

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:20:25.157

你还没有说你希望图书馆去哪里，所以我假设它应该进入`src/`对象已经去的地方。

```
src/libcore.a: $(OBJECTS)
    $(AR) -cvq $@ $^ 
```

看起来您拥有的 makefile 将从中构建`test/testfoo.o`，`test/testfoo.c`所以我假设它有效。而且你还没有说你想要可执行测试（例如`testfoo`）去哪里，所以我会把它们放在`test/`.

```
test/%: test/%.o src/libcore.a
    $(CC) -o $@ $< -Lsrc -lcore 
```

**编辑：**

如果您希望 Make 默认构建所有测试，那么您应该在 makefile 中的任何其他规则之前拥有它：

```
TESTS := $(patsubst %.c,%,$(wildcard test/*.c))

all: $(TESTS) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T12:05:53.243

我的 Makefile 现在如下所示：

```
SHELL = /bin/sh
CC    = gcc
AR    = ar

CFLAGS       = -std=gnu99 -Iinclude -pedantic -Wall -Wextra -march=native -ggdb3
DEBUGFLAGS   = -O0 -D _DEBUG
RELEASEFLAGS = -O2 -D NDEBUG -combine -fwhole-program
PROFILEFLAGS = -pg

ARFLAGS      = -cvq

# core and test common includes
COMMON_INC          = include/definitions.h include/debug.h

# core stuff 
CORE_LIB            = lib/libcore.a
CORE_SRC            = $(shell echo src/*.c)
CORE_INC            = $(shell echo include/*.h)
CORE_OBJ            = $(CORE_SRC:.c=.o)
CORE_PUB_INC        =

# test stuff
TEST_SERVER         = test/server/server
TEST_SERVER_SRC     = $(shell echo test/server/*.c)
TEST_SERVER_INC     = $(shell echo test/server/*.h)
TEST_SERVER_OBJ     = $(TEST_SERVER_SRC:.c=.o)

TEST_CLIENT         = test/client/client
TEST_CLIENT_SRC     = $(shell echo test/client/*.c)
TEST_CLIENT_INC     = $(shell echo test/client/*.h)
TEST_CLIENT_OBJ     = $(TEST_CLIENT_SRC:.c=.o)

all: $(CORE_LIB) $(TEST_SERVER) $(TEST_CLIENT)

core: $(CORE_LIB)

server: core $(TEST_SERVER)

client: core $(TEST_CLIENT)

$(CORE_LIB): $(CORE_OBJ)
    $(AR) -cvq $@ $^

$(TEST_SERVER): $(TEST_SERVER_OBJ)
    $(CC) $(CFLAGS) -o $@ $< -Llib -lcore

$(TEST_CLIENT): $(TEST_CLIENT_OBJ)
    $(CC)  $(CFLAGS) -o $@ $< -Llib -lcore

debug: CFLAGS += $(DEBUGFLAGS)
debug: all

profile: CFLAGS += $(PROFILEFLAGS)
profile: all

release: CFLAGS += $(RELEASEFLAGS)
release: all

.PHONY : clean depend

clean:
    -rm -f $(CORE_LIB) $(CORE_OBJ)
    -rm -f $(TEST_SERVER) $(TEST_SERVER_OBJ)
    -rm -f $(TEST_CLIENT) $(TEST_CLIENT_OBJ)
    -rm -f gmon.out

depend:
    @makedepend -- $(CFLAGS) -- $(CORE_SRC) $(TEST_SERVER_SRC) $(TEST_CLIENT_SRC) 
```

我仍然有一些问题： - make 创建库、服务器和客户端测试应用程序。如果我知道修改核心 (lib) 的源文件之一，make 会重新构建 lib，而不是服务器和客户端应用程序。我有依赖问题吗？- make 或 make all 应该默认构建为 DEBUG，而 release 和 profile 分别构建一个 release 或 profile 版本。

我想知道，我的makefile有什么问题。

再次感谢！

# xml - Magento - 在 XML 布局文件中添加图像

> ID：15029104
> 
> 赞同：1
> 
> 时间：2013-02-22T16:46:03.720
> 
> 标签：xml, image, magento, text, replace

我想在 Magento 主题的 XML 布局文件中添加图像。我尝试了很多东西，但没有奏效。我有以下代码要修改：

```
<action method="addLink" translate="label title" module="groupdeals" ifconfig="groupdeals/facebook_connect/enabled"><label>Login with Facebook</label><url helper="groupdeals/getConnectUrl"/><title>Connect with Facebook</title><prepare/><urlParams/><position>110</position><liParams/><aParams><rel>facebook-connect</rel></aParams></action> 
```

我想要的是用图像替换“使用 Facebook 登录”文本。图片位于我的网站根目录，即 www.myweb.com/login.png。

如果有人能在这件事上帮助我，我将不胜感激。

谢谢

卡瓦尔博士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:04:08.083

您应该能够使用核心/文本块来执行此操作。例如：

```
<block type="core/text" name="facebook-link">
            <action method="addText">
                <text>
                    <![CDATA[
                    <a href="#"><img src="/login.png" /></a>
                    ]]>
                </text>
            </action>
</block> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:10:46.040

我个人会改变

```
<aParams><rel>facebook-connect</rel></aParams> 
```

至

```
<aParams><rel>facebook-connect</rel><class>facebook-connect</class></aParams> 
```

然后用css隐藏文本并应用背景图像。

# java - 如何使活动的一部分在 Android 上始终可见？

> ID：15029106
> 
> 赞同：0
> 
> 时间：2013-02-22T16:46:14.193
> 
> 标签：java, android, android-layout

我创建了 ListActivity 和其他活动，我希望在单击 ListActivity 中的项目时显示它们。我的问题是我不知道如何在同一个窗口中执行此操作，因此 ListActivity 将始终保持可见，而窗口的其他部分将根据按下的元素发生变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:50:42.833

您必须只有一个活动，例如将“其他活动”转换为由`ListActivity`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:52:34.733

我将在 Fragments 中实现您的功能，而不是使用活动。它们允许增加应用程序的模块化，并允许您想要的功能，在运行时它们可以在您的 ListActivity 中“换出”。

参考 Android 开发者网站上对 Fragments 的全面概述：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# ruby-on-rails - 在 rails_admin 中限制表的行数

> ID：15029107
> 
> 赞同：0
> 
> 时间：2013-02-22T16:46:14.937
> 
> 标签：ruby-on-rails, ruby, rails-admin

我有一个使用 rails_admin ( [https://github.com/sferik/rails_admin](https://github.com/sferik/rails_admin) ) 作为后端的 Ruby on Rails 应用程序。

我有一个模型叫banner，所以数据库中有一个表叫banners。管理员可以创建尽可能多的横幅，也可以删除它们。但我想修复 3 中的横幅数量。我想要 3 个横幅（已经创建），并且我希望管理员不能创建或销毁任何横幅。

有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:40:09.440

@RadBrad 指出您可以`has_many`在代表三个横幅集的另一个模型上使用这一点。也许可以称它为 BannerSet 或类似的。您可以像他说的那样一次创建三个，或者在 BannerSet 验证中，您可以确保只有 3 个相关联的横幅。

您甚至可以在 BannerSet 模型上拥有 3 个属性（列），这些属性（列）将具有横幅的 3 个 id。如果您确定它将始终是 3 个横幅，那么这也可能是一个不错的设计。

但是，如果你只有一个 Banner 控制器，你会怎么做，这不是最好的方法，你会看到。

首先，您可以在控制器中使用[声明式授权：](https://github.com/sferik/rails_admin/wiki/Declarative-Authorization)

```
authorization do
  has_permission_on :banners, :to => [:new, :create] do
    Banner.count < 3
  end
end 
```

为确保即使在您进入创建屏幕添加横幅后仍无法添加横幅，还要向横幅模型添加验证：

```
before_create :validate_max_banners

def validate_max_banners
  errors.add_to_base("Only 3 banners are allowed.") if Banner.count == 3
  errors.empty?
end 
```

不过，两者都不能完全确保您在该表中只能有 3 行。为此，您需要在数据库端使用触发器或类似工具，如[本 q&a](https://stackoverflow.com/q/1743439/178651)中所述。但是，对于一个基本的解决方案，这可能没问题。

请注意，尽管[RailsAdmin](https://github.com/sferik/rails_admin)可以很容易地配置和自定义（请参阅其[wiki](https://github.com/sferik/rails_admin/wiki)以获取文档），但如果您需要更多自定义，我也会考虑使用[ActiveAdmin 。](https://github.com/gregbell/active_admin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:10:10.853

救援验证：

```
class Thing < Active Record::Base
  has_many :banners

  validate :banner_count

  private
    def banner_count
      errors.add(:base, "Banner count must be 3") unless self.banners.count == 3
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:59:19.263

```
 class Thing < ActiveRecord::Base
   has_many :banners
 end 
```

应用程序/控制器/things_controller.rb

```
 def create
   @thing = Thing.new
   @thing.banners << Banner.new(:name=>'Banner 1',....)
   @thing.banners << Banner.new(:name=>'Banner 2',....)
   @thing.banners << Banner.new(:name=>'Banner 3',....)
   @thing.save
 end 
```

现在，只要您没有在其他地方调用 @thing.banners << ，您就可以保证任何事物都将始终具有三个横幅。

# javascript - 使用 jQuery 为 iPad 优化加速图像动画

> ID：15029113
> 
> 赞同：0
> 
> 时间：2013-02-22T16:46:24.580
> 
> 标签：javascript, jquery, performance, web-applications

我想知道如何加快网站中图像的移动。对于 iPad，该站点应该尽可能快，并且目前图像的移动不是很流畅。（在 iPad3 和 iPhone 5 上测试）

该网站非常简单。主要是这样的结构：

```
<div id="slide1" class="slides">
</div>

<div id="slide2" class="slides">
</div>

<div id="slide3" class="slides">
</div>

...  //around 20 slides 
```

每张幻灯片都有一个背景图像（即当前幻灯片）。像这样的东西：

```
#slide4{
    background: url(../img/ipad/Slide4.PNG) no-repeat;
    z-index:103;  //over the previous slide
    margin-left:-2000px;  //in order to animate it later
} 
```

为了从一张幻灯片（图像）转到另一张幻灯片，我以这种方式使用 jQuery：

```
 //from slide3 to slide4 with animation
$('#slide3').click(function(){
    $('#slide4').show();
    $('#slide4').animate({'margin-left' : '0'});
}); 
```

我已经尝试过减轻图像的重量，但有时我不能在没有相当大的质量损失的情况下进一步减轻它。

我还考虑过使用 AJAX 动态加载图像的可能性，但是在渲染下一张幻灯片之前没有足够的时间加载它，因为移动速度非常快。

你会推荐我什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:52:15.290

在 iPad/iPhone 上，使用 CSS3 动画/过渡，而不是 jQuery 动画以获得最佳/最流畅的性能。CSS3 动画/过渡是在本机浏览器代码中实现的，不受 javascript 的单线程性影响，有时可以在后台更流畅地运行，同时执行其他操作。

如果您不熟悉这些 CSS3 功能，可以从以下站点开始：[http](http://css3.bradshawenterprises.com/) ://css3.bradshawenterprises.com/ （参见教程）。

# macports - MacPorts 未安装

> ID：15029117
> 
> 赞同：0
> 
> 时间：2013-02-22T16:46:51.720
> 
> 标签：macports, theos

使用此命令安装 macports 时出现错误

```
sudo port install dpkg 
```

错误：-bash：端口：找不到命令

我正在安装 theos（参考[http://brandontreb.com/beginning-jailbroken-ios-development-getting-the-tools/](http://brandontreb.com/beginning-jailbroken-ios-development-getting-the-tools/)），操作系统是**MoutainLion**，**xCode**是 4.5

# linux - 在 unix 文件名中查找返回字符

> ID：15029119
> 
> 赞同：1
> 
> 时间：2013-02-22T16:46:52.567
> 
> 标签：linux, unix

这是一个更大问题的一部分，但当然，这是给我带来最大麻烦的一点。所以我们的用户会发生一些事情，他们通过执行以下操作创建带有返回字符的文件：

```
touch "tpseports
old" 
```

那是另一个问题，我不能惹。我正在尝试使用我们的脚本查找类似的文件以删除过时的文件。现在，我们运行 find 命令将旧文件名放入临时文件中，然后根据该列表删除。这里是这样的：

```
find /home/userid \( -type f -a -mtime +365 \) 1>> TEMP

while read FILELIST
do
rm -f $FILELIST
done < TEMP 
```

问题是当我们遇到如下文件时：

```
/home/userid/tpseports
old 
```

因为它会尝试删除“/home/userid/tpseports”和“old”。有没有人遇到过这样的事情并知道解决方案？我仍在网上搜索想法，所以如果我找到解决方案，我会在这里发布。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:45:27.933

`find`可以`-print0`选择以下情况：

```
find -type f -mtime +365 -print0 | xargs -0 rm -f 
```

# php - MySql 查询结果中的内部数组到 PHP

> ID：15029122
> 
> 赞同：1
> 
> 时间：2013-02-22T16:47:03.033
> 
> 标签：php, mysql, sql

我想知道是否有任何方法可以将`INNER JOIN`一个特定记录的结果放入数组`MySql`中`PHP`？

我在下面举一个例子：

表记录：
**`id_record | name_record`**
                `1 | stocktaking`
                `2 | statement of account`

表records_values：                 | 2010 年 6 月 1 日                 | 2011 年 3 月 3 日                  | 2010 年 3 月 12 日
**`id_rv | id_record | date_updated`**
    `001 | 1`
    `002 | 1`
    `003 | 2`

要`INNER JOIN`在表之间`records`和`records_values`id 为 1 的记录中执行，结果如下：

**`id_record | name_record | id_rv | date_updated`**
                `1 | stocktaking | 001 | June 1, 2010`
                `1 | stocktaking | 002 | March 3, 2011`

最后，我想知道是否`MySql`可以将这些值返回给`PHP`但在一个数组中分组，所以结果可能如下：

```
$result = Array
          (
            [id_record] => 1
            [name_record] => stocktaking
            [values] => Array
                   (
                     [0] => Array
                            (
                              [id_rv] => 001
                              [date_updated] => June 1, 2010 
                            )
                     [1] => Array
                            (
                              [id_rv] => 002
                              [date_updated] => March 3, 2011 
                            )
                   )
          ) 
```

如果有人能告诉我这样做的方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:49:33.813

不幸的是，你不能。

查询的结果只是一个一维数组。您需要在应用程序级别处理它。您需要的查询是，

```
SELECT  a.*, b.id_rv, b.date_uploaded
FROM    records a
        INNER JOIN records_values b
            ON a.id_record = b.id_record 
```

# java - 发送邮件时将用户从移动应用程序重定向到网站或 Facebook

> ID：15029124
> 
> 赞同：0
> 
> 时间：2013-02-22T16:47:18.843
> 
> 标签：java, android, android-intent

我有一个测验移动应用程序。人们使用它并通过邮件给我反馈。我已经在我的移动应用程序中设置了邮件。

当用户点击邮件然后查看他们如何获取信息的图片。 ![在此处输入图像描述](../Images/301cbef736759a5500e50bcff72eb724.png)

我已经开发了网站，我想放一个网站链接。现在链接以字符串形式出现。当用户单击链接时，没有任何反应。当他们想要点击邮件时，我想将用户重定向到我的网站。

我写的代码在这里。

```
 public void onClick(View arg0)
                            {
            // TODO Auto-generated method stub
            Intent i = new Intent(Intent.ACTION_SEND);
            i.putExtra(Intent.EXTRA_EMAIL,new String[]  
                            `enter code here`{"husnainkazmi@ymail.com"});
            String username = loaduserpref();
            Log.i("username", username);
            i.putExtra(Intent.EXTRA_CC, new String[]{username});
            i.putExtra(Intent.EXTRA_SUBJECT, "Welcome to DataBase 
                            Quiz");
            String name = loadpref();                               
            i.putExtra(Intent.EXTRA_TEXT, "DataBase Quiz " +
            "\nScored "+i_ans+" of 20 with "+result +
            "\n\nPlease Visit our website: http://website.com/");                               
            i.setType("message/rfc882");
            startActivity(Intent.createChooser(i, "Choose your email   
                            client"));      

                 }
                     }); 
```

一切都在工作，但我想在邮件中有链接而不是字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:16:16.413

如果您通过调用将 mime 类型设置为“text/html”

```
i.setType("text/html"); 
```

然后将您的网站地址编码为 html - 例如

```
<a href="http://website.com/">http://website.com/</a> 
```

它会给你一个超链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:26:51.460

试试这个。您必须以如下所示的方式使用意图。

```
@Override
public void onCreate(Bundle savedInstanceState)
{

    Intent i=new Intent();
    i.setAction(Intent.ACTION_VIEW);
    i.setData(Uri.parse("http://www.website.com"));
    startActivity(i);
} 
```

# ios - 更新了 iOS 6.1.2 现在我无法归档应用程序 xcode

> ID：15029132
> 
> 赞同：2
> 
> 时间：2013-02-22T16:47:34.753
> 
> 标签：ios, archive, software-distribution

当我想从 XCode 分发我的应用程序时，我会在顶部的列表中选择我的设备，这会启用归档我的应用程序的选项。

我昨晚升级到 iOS 6.1.2，现在我的设备不会显示在顶部的下拉列表中，所以我无法存档应用程序。

我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T16:53:43.513

您无需将设备插入存档。*在 Xcode 中，单击Run*和*Stop*按钮旁边的下拉菜单，然后将选择从*iPhone 6.1 Simulator*更改为*iOS Device*。然后，您应该能够像往常一样存档您的构建。

为了让您的 6.1.2 设备显示在下拉列表中，您可能需要将 Xcode 更新到最新版本。

# wordpress - Wordpress - 将变量传递给自定义帖子类型存档

> ID：15029134
> 
> 赞同：1
> 
> 时间：2013-02-22T16:47:38.700
> 
> 标签：wordpress

我正在使用 /%postname%/ 永久链接并希望能够将变量传递给我的自定义帖子类型存档。我的目标是让存档收到一个值，我用它来对各个帖子进行排序。我的总体目标本质上是通过为自定义帖子分配元值并使用我通过 url 传递的值进行排序来伪造“类别”。

一个更字面的例子：

example.com/vegetables/

是我的自定义帖子类型存档的路径。我希望能够将用户引导到此路径：

example.com/vegetables/potatoes

并且在模板中能够从查询字符串中提取“土豆”。

有任何想法吗？

# jsf - jsf嵌入复合组件后如何禁用ViewHandler中的元素？

> ID：15029135
> 
> 赞同：1
> 
> 时间：2013-02-22T16:47:39.323
> 
> 标签：jsf, facelets, composite-component

如果满足某些条件，我正在使用 ViewHandler 阻止任何访问页面上的所有输入元素。

这对于“主要”xhtml 文件中的输入元素非常有效，但复合组件中的输入元素不会被阻止。我认为这与 JSF 仅在我的 ViewHandler 完成它的工作后才嵌入这些组件的事实有关。

有谁知道我如何也可以禁用复合材料中的元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:54:41.743

A[`ViewHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html)是该工作的错误工具。它旨在创建、构建和恢复视图，并生成用于 JSF 表单和链接的 URL。它不打算在视图中操作组件。

对于您的特定功能要求，a [`SystemEventListener`](http://docs.oracle.com/javaee/6/api/javax/faces/event/SystemEventListener.html)on[`PostAddToViewEvent`](http://docs.oracle.com/javaee/6/api/javax/faces/event/PostAddToViewEvent.html)可能是最好的选择。我刚刚做了一个快速测试，它也适用于复合材料的输入。

```
public class MyPostAddtoViewEventListener implements SystemEventListener {

    @Override
    public boolean isListenerForSource(Object source) {
        return (source instanceof UIInput);
    }

    @Override
    public void processEvent(SystemEvent event) throws AbortProcessingException {
        UIInput input = (UIInput) event.getSource();

        if (true) { // Do your check here.
            input.getAttributes().put("disabled", true);
        }
    }

} 
```

为了让它运行，在里面注册它`<application>`如下`faces-config.xml`：

```
<system-event-listener>
    <system-event-listener-class>com.example.MyPostAddtoViewEventListener</system-event-listener-class>
    <system-event-class>javax.faces.event.PostAddToViewEvent</system-event-class>
</system-event-listener> 
```

# excel - 用于解析 Excel 电子表格中的单元格的 Visual Basic

> ID：15029140
> 
> 赞同：0
> 
> 时间：2013-02-22T16:47:53.257
> 
> 标签：excel, vbscript

我正在开发一个可视化的基本脚本来解析特定形式的 excel 电子表格并从中提取各种数据。我对VB几乎没有经验，因此将不胜感激。

如您所见，脚本在电子表格中移动，从各个特定点提取数据。但最后，在 Pull Journal Data out For 循环中，我在命令提示符中收到以下错误。

```
test parse(92, 3) Microsoft VBScript runtime error: Unknown runtime error. 
```

引发此错误的代码：

```
rem Pull Journal Information out alone
For x = 7 to UsedRowsCount
    For y = 0 to 5
        If y= 0 Then
            WScript.Echo vbCRLF
        End If
        dim word
        word = objExcel.Cells(x,y).value
        WScript.Echo word
    Next
Next 
```

我很困惑，因为我在之前的部分中使用了非常相似的循环，没有任何问题。如上面的这个循环：

```
rem Report Total Aggregate Data for range covered
WScript.Echo "Total from all Journals by Month"
For i = 6 to UsedColumnsCount
    WScript.Echo Cells(5,i).value
    Wscript.Echo Cells(6,i).value
Next 
```

任何帮助，将不胜感激。我在下面复制了整个凌乱的脚本：

```
set objExcel = CreateObject("Excel.Application")
set objWorkbook = objExcel.Workbooks.Open _ 
    ("E:\Focus\Internship\Code\VB\emerald_jr1_2012.xls")

dim Sheet
set Sheet = objExcel.ActiveWorkbook.Worksheets(1)
usedColumnsCount = Sheet.UsedRange.Columns.Count
usedRowsCount = Sheet.UsedRange.Rows.Count

dim Cells
set Cells = Sheet.Cells

REM Test to see if it's a jr1
if Cells(1,1).Value = "Journal Report 1 (R3)" then
    WScript.Echo "File is a jr1 report."
else
    WScript.Echo "File is NOT a recognized report"
end if

rem Test to determine how many months are covered in the report and what year
dim lastMonth
select case usedColumnsCount
    Case 9
        lastMonth = "only"
    Case 10
        lastMonth = "through Feb"
    Case 11
        lastMonth = "through Mar"
    Case 12
        lastMonth = "through Apr"
    Case 13
        lastMonth = "through May"
    Case 14
        lastMonth = "through Jun"
    Case 15
        lastMonth = "through Jul"
    Case 16
        lastMonth = "through Aug"
    Case 17
        lastMonth = "through Sep"
    Case 18
        lastMonth = "through Oct"
    Case 19
        lastMonth = "through Nov"
    Case 20
        lastMonth = "through Dec"
    Case Else
        lastMonth = "uncertain"
end select
WScript.Echo "Report holds values for Jan " & lastMonth

rem Using VBS built-in support of Regular expressions to parse the year indicated in a particular row: the first date header.
dim dateYear
dateYear = Cells(5,6).value
rem The dates come out in the script formated as 1/1/2012
rem WScript.Echo dateYear

set re = New RegExp
re.Pattern = ".*?((?:(?:[1]{1}\d{1}\d{1}\d{1})|(?:[2]{1}\d{3})))(?![\d])"
Set matches = re.Execute(dateYear)
If matches.Count > 0 Then
    Set match = matches(0)
    If match.Submatches.Count > 0 Then
        For i = 0 to match.SubMatches.Count-1
            WScript.Echo "Report covers year " & match.Submatches(i)
        Next
        End If
Else
    WScript.Echo "Error, year data not found"
End If

rem Report Total Aggregate Data for range covered
WScript.Echo "Total from all Journals by Month"
For i = 6 to UsedColumnsCount
    WScript.Echo Cells(5,i).value
    Wscript.Echo Cells(6,i).value
Next

rem Pull Journal Information out alone
For x = 7 to UsedRowsCount
    For y = 0 to 5
        If y= 0 Then
            WScript.Echo vbCRLF
        End If
        dim word
        word = Cells(x,y).value
        WScript.Echo word
    Next
Next

objExcel.Workbooks(1).Close
objExcel.Quit

set Sheet = Nothing
set objExcel = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:38:40.897

Cells() 的 ColumnIndex 参数的有效范围从 1 开始：

我想你的意思是写：

```
rem Pull Journal Information out alone

For x = 7 to UsedRowsCount

    For y = 0 to 5

        If y= 0 Then

            WScript.Echo vbCRLF

        Else

            WScript.Echo objExcel.Cells(x,y).Value

        End If

    Next y

Next x 
```

除非最后一个值在其他地方使用，否则您不需要*单词变量。*在循环内使变量变暗是一个坏主意，尽管 Excel 可能会对此进行优化。

# java - 使用 Microsoft excel 编写 rpg 游戏的数组映射

> ID：15029143
> 
> 赞同：0
> 
> 时间：2013-02-22T16:48:09.980
> 
> 标签：java, arrays, maps

您好，这是我在学校学习 Java 的第二年。我在理解什么是数组以及如何在 rpg 游戏中使用数组制作地图时遇到了很多困难。我必须使用 microsoft excel 才能制作地图。更具体地说，我想制作一个基本的街头霸王游戏，但我需要学习为我的游戏制作地图的基本骨架。如果有人可以帮助我，那将再次非常感谢。我正在使用java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:06:48.363

我相信在学校执行此操作的标准方法实际上是读取/写入 txt 文件。您确定您不是在谈论 .txt 文件吗？

您可能想通过

```
 BufferedReader br = new BufferedReader(new FileReader(Filename)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:14:02.457

对于一个很简单的地图，如果一定要用数组的话，可以把它想象成一个简单的X，Y坐标迷宫。假设迷宫的原点在左上角。

```
[0,0] [1,0] [2,0]
[0,1] [1,1] [2,1]
[0,2] [1,2] [2,2] 
```

在您的电子表格中，您可以在每个单元格坐标中为每个房间指定一个唯一名称。所以单元格 A1 表示 [0,0]。单元格 B1 表示 [1,0] 等等。以 CSV 格式保存该文件。

让我们假设迷宫是一个完美的正方形（相同数量的 X 和 Y 坐标）。编写 Java 代码以加载该 CSV 文件。当您读取 CSV 文件的第一行时，它将告诉您要创建的二维数组的大小：

```
String[][] rooms = new String[ numberOfColumns ][ numberOfColumns ]; 
```

此时，您读取每一行，并使用 CSV 文件中的适当值填充字符串数组的每个坐标。

之后，您现在有一个二维房间数组。然后，您可以创建逻辑以允许您的播放器在阵列内从一个房间移动到另一个房间。只需跟踪玩家当前的 X、Y 位置即可。确保检查以确保玩家的坐标不能小于零或大于迷宫的大小。

希望有帮助。

# express - yeoman express stack with livereload 用于车把模板

> ID：15029144
> 
> 赞同：3
> 
> 时间：2013-02-22T16:48:16.653
> 
> 标签：express, connect, middleware, yeoman, livereload

我正在使用 yeoman express 堆栈（[https://plus.google.com/115133653231679625609/posts/YDNbxVxi4er](https://plus.google.com/115133653231679625609/posts/YDNbxVxi4er)）在 yeoman 中构建 Web 应用程序并使用 express 服务器。现在，我的应用程序不是使用常规的 html 文件，而是使用把手模板呈现……问题是 livereload 脚本没有注入到我的模板中。

现在我正在考虑实现一个连接中间件来添加一个函数，它将 yeoman livereload 脚本注入我的身体。但问题是每当我使用连接中间件时，我都找不到访问正文的方法…… res.body 未定义。知道如何实现这样的目标吗？

亲切的问候，

大安

# python - 将 cvxopt 用于仅具有 Aeq=beq 的 LP 问题（没有 A*x<=b 的约束）

> ID：15029145
> 
> 赞同：0
> 
> 时间：2013-02-22T16:48:23.363
> 
> 标签：python, linear-programming, convex-optimization

我正在尝试解决以下形式的线性规划问题

```
minimise cT.x
A.x = b
x >= 0 
```

对于交通问题。

但是，使用 CVXOPT 需要为 lp(G,h,A,b) 求解器定义变量 Gx <= h。

我尝试创建我的 A 和 b 矩阵，对于 G 和 h 矩阵，我使用 G 的单位矩阵（乘以 -1）和 h 的零向量，以便施加 x>=0 约束。

但是，当我运行我的代码时，它会返回一个“奇异 KKT 矩阵”。

谁能帮我解决问题，或者我如何在没有 G 和 h 变量的情况下运行 CVXOPT 求解器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-26T18:39:21.577

您的解决方案（**-G** - 单位矩阵，**h** - 零向量）应该有效。您可以在此处发布您的数据。

例如：

```
from cvxopt import matrix, solvers
c = matrix([ 2.0, 1.0 ])
G = matrix(-np.eye(2))
h = matrix(np.zeros(2)) 
A = matrix(np.eye(2))
b = matrix([1., 2.])
sol = solvers.lp(c, G, h, A, b)
print(sol['x'])

Optimal solution found.
[ 1.00e+00]
[ 2.00e+00] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T13:05:20.527

使用潜在方法搜索运输问题的最优解。要使用势法，您需要求解三个拉维尔方程。网络问题，如交通问题，请使用对偶问题解决。

# firefox - 如何让 Firefox 在同一窗口中打开通过 WebDriver 打开的所有链接？

> ID：15029147
> 
> 赞同：11
> 
> 时间：2013-02-22T16:48:30.977
> 
> 标签：firefox, selenium-webdriver, webdriver, selenium-firefoxdriver

我想在同一个窗口中打开所有链接，而不是在新窗口中。我试过了

```
profile.setPreference("browser.link.open_newwindow", 1) 
```

但结果是：

```
WARNING: traffic.loop 0 error: Preference browser.link.open_external may not be overridden: frozen value=2, requested value=1 
```

是否有另一种方法可以在同一窗口中打开链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-10-04T07:55:44.793

您应该修改 firefox 配置文件参数：

`profile = webdriver.FirefoxProfile()`

`profile.set_preference("browser.link.open_newwindow", 3)`

`profile.set_preference("browser.link.open_newwindow.restriction", 0)`

`driver = webdriver.Firefox(firefox_profile=profile)`

如果此方法不起作用，您可以使用 firefox 选项设置偏好：

`from selenium.webdriver.firefox.options import Options`

`opts = Options()`

`opts.set_preference("browser.link.open_newwindow.restriction", 0)`

`opts.set_preference("browser.link.open_newwindow", 3)`

`driver = webdriver.Firefox(firefox_options=opts)`

* * *

(A) browser.link.open_newwindow - 用于 Firefox 标签中的链接：

3：将新窗口转移到新标签（默认）

2：允许链接打开一个新窗口

1：强制新窗口进入同一个选项卡

(B) browser.link.open_newwindow.restriction - 用于 Firefox 选项卡中的链接

0 : 将 (A) 下的设置应用到所有新窗口（甚至脚本窗口）

2 : 将 (A) 下的设置应用于普通窗口，但不适用于具有功能的脚本窗口（默认）

1：覆盖（A）下的设置并始终使用新窗口

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T14:09:43.500

我找到了解决方法！

```
JavascriptExecutor js = (JavascriptExecutor) driver;
String script = "document.getElementById('yourFormOrAnchorId').target=''";
js.executeScript(script); 
```

之后，您可以选择您的锚点或任何表单元素并单击或提交。目标页面将在同一选项卡中打开。

这基本上改变了当前的 HTML 页面，因此锚点和表单不会强制浏览器打开新的选项卡或窗口。对于测试，这可能不是最理想的，但它大大简化了测试的编写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-12T14:11:47.710

在硒配置文件中：

> C:\Python27\Lib\site-packages\selenium\webdriver\firefox\webdriver_prefs.json

更改以下行：

```
"browser.link.open_newwindow": 2, 
```

至：

```
"browser.link.open_newwindow": 3, 
```

我测试它并且它有效

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-16T09:34:33.820

试试这个... 修改 FireFox 配置文件参数**“browser.link.open_newwindow.restriction”**和**“browser.link.open_newwindow”。**

```
FirefoxProfile profile = new FirefoxProfile();
profile.setPreference("browser.link.open_newwindow.restriction", 0);
profile.setPreference("browser.link.open_newwindow", 1); 
```

如果您使用的是谷歌浏览器，那么只需安装[此](https://chrome.google.com/webstore/detail/theone-open-link-in-same/jmphljmgnagblkombahigniilhnbadca?hl=en)扩展程序，它将处理其余的任务。此扩展程序还可以方便地在通常在新窗口中打开的新选项卡中打开弹出窗口。（首先，您需要从给定位置下载扩展名 .crx 文件。）

```
ChromeOptions options = new ChromeOptions();
options.addExtensions(new File("/path/to/extension.crx"));
DesiredCapabilities capabilities = new DesiredCapabilities();
capabilities.setCapability(ChromeOptions.CAPABILITY, options);
ChromeDriver driver = new ChromeDriver(capabilities); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-30T13:29:55.050

根据 Selium 文档（[https://code.google.com/p/selenium/wiki/FirefoxDriver](https://code.google.com/p/selenium/wiki/FirefoxDriver)），以下属性 webdriver.firefox.profile 控制使用的 firefox 配置文件。

这是 Firefox 在启动时获取 browser.link.open_newwindow 的地方。要为您的测试创建新配置文件，您可以按照此处的说明[https://support.mozilla.org/en-US/kb/profile-manager-create-and-remove-firefox-profiles](https://support.mozilla.org/en-US/kb/profile-manager-create-and-remove-firefox-profiles)配置文件的详细配置可以是通过编辑配置文件的 pref.js 或启动配置文件并通过 about:config 编辑它来完成。

希望这有帮助！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-25T04:11:40.097

实际上，Selenium 不负责在新窗口或同一窗口中打开的页面。它完全取决于您用于执行的浏览器设置。

**以火狐浏览器为例**

如果要在新窗口中打开所有链接。执行这些步骤

1.  打开工具
2.  单击选项
3.  单击选项卡菜单
4.  勾选`Open new windows in a new tab instead.`

现在单击打开一个窗口的链接。它将在同一窗口的新选项卡中打开。

# tomcat - Tomcat 无法使用 spnego 进行身份验证，“无法找到默认领域”

> ID：15029148
> 
> 赞同：4
> 
> 时间：2013-02-22T16:48:33.377
> 
> 标签：tomcat, kerberos, spnego, jgss

我正在使用[http://spnego.sourceforge.net/spnego_tomcat.html](http://spnego.sourceforge.net/spnego_tomcat.html)教程来尝试配置 Tomcat 以使用 spnego。

Hello_KDC.java 工作，我能够进行身份验证。如果我使用错误的密码，我会得到错误异常，所以它正在工作。

但是当我尝试将该教程用于 Tomcat 时，它会中断。Tomcat ROOT/index.jsp 变为空白，并且在监视时我看到它返回 404。 log\host-manager.2013-02-22.log 具有以下内容：

```
Fev 22, 2013 1:39:03 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter SpnegoHttpFilter
javax.servlet.ServletException: javax.security.auth.login.LoginException: Cannot locate default realm
    at net.sourceforge.spnego.SpnegoHttpFilter.init(SpnegoHttpFilter.java:198)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4656)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5309)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1114)
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1673)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.security.auth.login.LoginException: Cannot locate default realm
    at com.sun.security.auth.module.Krb5LoginModule.attemptAuthentication(Unknown Source)
    at com.sun.security.auth.module.Krb5LoginModule.login(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at javax.security.auth.login.LoginContext.invoke(Unknown Source)
    at javax.security.auth.login.LoginContext.access$000(Unknown Source)
    at javax.security.auth.login.LoginContext$4.run(Unknown Source)
    at javax.security.auth.login.LoginContext$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.login.LoginContext.invokePriv(Unknown Source)
    at javax.security.auth.login.LoginContext.login(Unknown Source)
    at net.sourceforge.spnego.SpnegoAuthenticator.<init>(SpnegoAuthenticator.java:161)
    at net.sourceforge.spnego.SpnegoHttpFilter.init(SpnegoHttpFilter.java:196)
    ... 17 more
Caused by: KrbException: Cannot locate default realm
    at sun.security.krb5.PrincipalName.<init>(Unknown Source)
    ... 32 more
Caused by: KrbException: Cannot locate default realm
    at sun.security.krb5.Config.getDefaultRealm(Unknown Source)
    ... 33 more
Caused by: KrbException: Generic error (description in e-text) (60) - Unable to locate Kerberos realm
    at sun.security.krb5.Config.getRealmFromDNS(Unknown Source)
    ... 34 more 
```

这发生在 tomcat 启动期间，在从浏览器加载任何页面之前。当我尝试加载页面时，没有添加任何日志。

在 krb5.conf 中，我尝试了主机名和 IP 并得到相同的错误。krb5.conf 和 login.conf 正在被定位，因为如果我删除它们，我会得到这个日志：

```
Fev 22, 2013 1:46:05 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter SpnegoHttpFilter
java.lang.SecurityException: login.conf (tal arquivo ou diretório não existe)
    at com.sun.security.auth.login.ConfigFile.<init>(Unknown Source)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at javax.security.auth.login.Configuration$3.run(Unknown Source)
    at javax.security.auth.login.Configuration$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.login.Configuration.getConfiguration(Unknown Source)
    at net.sourceforge.spnego.SpnegoFilterConfig.doClientModule(SpnegoFilterConfig.java:176)
    at net.sourceforge.spnego.SpnegoFilterConfig.<init>(SpnegoFilterConfig.java:138)
    at net.sourceforge.spnego.SpnegoFilterConfig.getInstance(SpnegoFilterConfig.java:314)
    at net.sourceforge.spnego.SpnegoHttpFilter.init(SpnegoHttpFilter.java:193)
    at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:281)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:262)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:107)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4656)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5309)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1114)
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1673)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: login.conf (tal arquivo ou diretório não existe)
    at com.sun.security.auth.login.ConfigFile.init(Unknown Source)
    ... 32 more 
```

知道会发生什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T12:42:48.280

这可能意味着两件事：-

1.  您的 krb5.conf 配置错误
2.  您的 tomcat 机器位于没有 kdc 的领域

这是一个示例 krb5.conf 供参考。请注意，在这种情况下，我的 tomcat 主机位于 KERBOS.COM

```
[libdefaults]
default_realm = KERBOS.COM
ticket_lifetime = 36000

[realms]
KERBOS.COM = {
kdc = 10.1.2.3
admin_server = INQS28KERB01
default_domain = KERBOS.COM
}

[domain_realm]
.mycompany.com = KERBOS.COM

[appdefaults]
autologin = true
forward = true
forwardable = true
encrypt = true 
```

对我来说这有效。请提供您的 krb5.conf 以获取详细信息。此外，还请提供您所做的 tomcat 过滤器编辑，可能在那里配置错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-04T07:42:59.673

异常的一个可能原因`KrbException: Cannot locate default realm`是登录模块无法找到您的`krb5.conf`.

[为 Windows 集成身份验证配置 Tomcat](http://spnego.sourceforge.net/spnego_tomcat.html)的说明表明，`krb5.conf`如果您使用的是 Windows，则应将其放在 Tomcat 主目录中，例如 C:\Tomcat\。

但是，通常（即不特定于您所指的 Sourceforge 项目）登录模块将查找的默认位置在[此处](https://docs.oracle.com/javase/8/docs/technotes/guides/security/jgss/tutorials/KerberosReq.html)`krb5.conf`定义：

> 如果设置了系统属性 java.security.krb5.conf，则假定其值指定路径和文件名。
> 
> 如果未设置该系统属性值，则在目录中查找配置文件：
> 
> *   \lib\security (Windows)
> *   /lib/security（Solaris 和 Linux）
> 
> 如果仍未找到该文件，则尝试按如下方式定位它：
> 
> *   /etc/krb5/krb5.conf (Solaris)
> *   c:\winnt\krb5.ini (Windows)
> *   /etc/krb5.conf (Linux)

设置一些额外的属性来激活调试日志有助于确定您的特定应用程序在哪里寻找 krb5.conf：

```
System.setProperty("sun.security.krb5.debug", "true"); 
```

根据您的情况，调试输出可能会打印以下部分或全部内容：

**系统属性 java.security.krb5.conf 未设置，因此模块在默认系统特定位置查找：**

```
Java config name: null
Native config name: /etc/krb5.conf
Loaded from native config 
```

**设置系统属性 java.security.krb5.conf 并找到文件：**

```
Java config name: krb5.conf
Loaded from Java config 
```

**系统属性 java.security.krb5.conf 已设置但未找到文件：**

```
Java config name: krb5.conf 
```

请注意，在最后一个示例中，没有确认配置已加载。在这种情况下，您会看到异常消息：`KrbException: Cannot locate default realm)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T14:38:30.643

刚才我遇到了同样的问题，并意识到我的 krb5.conf 文件不在我的文件结构中的正确位置。它应该位于：

服务器 > Tomcat

服务器 > Tomcat > bin

这就是我在工作中设置的方式，现在一切正常。我已经更改了工作区，我需要添加它以使其正常工作。

# php - 在 Drupal 7.20 (Sarnia) 中向视图添加字段时出现 AJAX HTTP 错误 500

> ID：15029152
> 
> 赞同：0
> 
> 时间：2013-02-22T16:48:45.530
> 
> 标签：php, ajax, drupal, solr

我已经在 Drupal 7.20 中安装了 Sarnia 模块及其依赖项，以便与外部 Solr 数据进行交互，在[http://drupal.org/node/1379476](http://drupal.org/node/1379476)之后没有任何问题。模块安装后，当我在“Admin > Structure > Views”路径下创建 Solr 数据视图时，在将一些字段（Solr 属性字段）添加到视图时出现以下错误，

- 错误信息 -

```
   发生 AJAX HTTP 错误。HTTP 结果代码：500 调试
   信息如下。小路：
   /drupal/admin/structure/views/view/viewtest2/preview/page/ajax
   状态文本：错误响应文本：500 - 内部服务器错误服务器
   错误 500 - 内部服务器错误。有问题
   您正在寻找的资源，它无法显示

```

* * *

我可以在视图中添加几个字段而不会出现任何错误，但我不明白为什么在向视图中添加一些特定字段时会出现此错误？如何解决？请帮忙

*** 请注意我使用的是 IIS 而不是 Apache ***

从 admin/reports/recent logs 我可以找到有关该错误的更多信息：

EntityMetadataWrapperException：给出的数据值无效。确保它与所需的数据类型和格式匹配。在 EntityDrupalWrapper->set() 中（C:\download\drupal\drupal\sites\all\modules\entity\includes\entity.wrapper.inc 的第 744 行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:55:02.940

您是否在视图中添加了图像字段？如果是这样，图像是否通过“链接字段到其节点”设置链接到它的节点？如果是这种情况，请尝试关闭此链接设置并查看错误是否仍然出现。

# node.js - 使用 sparse: true 仍然得到 MongoError: E11000 duplicate key 错误

> ID：15029157
> 
> 赞同：6
> 
> 时间：2013-02-22T16:48:54.170
> 
> 标签：node.js, mongodb, mongoose

架构 (../models/add.js)

```
var addSchema = new Schema({
    name: {type: String, unique: true, sparse: true},
    phone: Number,
    email: String,
    country: Number
});

module.exports = mongoose.model('Contact', addSchema); 
```

添加-manager.js

```
var Add = require('../models/add.js');
var AM = {};
var mongoose = require('mongoose');
module.exports = AM;

AM.notOwned = function(country, callback)
{
    Add.update({country: country}, {country: country}, {upsert: true}, function(err, res){
        if (err) callback (err);
        else callback(null, res);
    })
} 
```

新闻.js

```
// if country # is not in the database
    AM.notOwned(country, function(error, resp){
        if (error) console.log("error: "+error);
        else 
        {
            // do stuff
        }
    }) 
```

错误：

```
MongoError: E11000 duplicate key error index: bot.contacts.$name_1  dup key: { : null } 
```

看到错误消息后，我四处搜索并了解到在创建文档时，由于未设置名称，因此将其视为 null。[请参阅 Mongoose Google Group Thread](https://groups.google.com/forum/?fromgroups=#!topic/mongoose-orm/znNF_F-kl6o) 第一次调用 AM.notOwned 时它将起作用，因为集合中没有任何文档没有名称键。然后 AM.notOwned 将插入一个包含 ID 字段和国家/地区字段的文档。

随后的 AM.notOwned 调用失败，因为已经有一个没有 name 字段的文档，因此将其视为 name：null，并且第二个 AM.notOwned 调用失败，因为未设置字段“name”并且也被视为 null ; 因此它不是唯一的。

因此，遵循 Mongoose 线程的建议并阅读我使用 sparse: true 看到的[mongo 文档。](http://docs.mongodb.org/manual/core/indexes/#index-type-sparse)但是，它仍然抛出相同的错误。进一步研究它，我认为它可能与以下问题相同：[this](https://github.com/LearnBoost/mongoose/issues/421)，但将模式设置为 name: {type: String, index: {unique: true, sparse: true}} 也不能解决它。

[这个](https://stackoverflow.com/questions/13454178/mongoerror-erre11000-duplicate-key-error)SO question/answer 让我相信它可能是由索引不正确引起的，但我不太确定如何从 Mongo 控制台读取 db.collection.getIndexes() 。

```
db.contacts.getIndexes()
[
    {
        "v" : 1,
        "key" : {
            "_id" : 1
        },
        "ns" : "bot.contacts",
        "name" : "_id_"
    },
    {
        "v" : 1,
        "key" : {
            "name" : 1
        },
        "unique" : true,
        "ns" : "bot.contacts",
        "name" : "name_1",
        "background" : true,
        "safe" : null
    }
] 
```

我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T17:03:33.353

您需要在 shell 中删除旧的非稀疏索引，以便 Mongoose 可以`sparse: true`在您的应用程序下次运行时重新创建它。

```
> db.contacts.dropIndex('name_1') 
```

# jquery - 为什么 .bind() 不能在 .ready() 函数之外工作？

> ID：15029158
> 
> 赞同：2
> 
> 时间：2013-02-22T16:48:54.800
> 
> 标签：jquery

单击按钮时，我将显示一条警报消息。下面是我正在使用的代码。

```
<script type="text/javascript">
// $(document).ready(function(){
    $("#clickHere").bind("click",function(){
        alert('clicked');
     });
 //});
 </script> 
```

由于注释了 .ready() 行，当我单击按钮时，不会引发警报消息，但如果我取消注释这些行，则会引发警报。由于我已在“单击”事件上添加了对按钮的绑定，因此不应该在这两种情况下都显示警报消息吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T16:49:43.157

因为在解析 javascript 块时，DOM 尚未准备好，因此您引用的元素尚不存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T16:51:11.133

这是因为该`.ready()`函数是一个 jquery 回调快捷方式，仅在 DOM (html) 加载到浏览器后触发。如果你在 ready 之外绑定你的函数，很有可能 DOM 元素还没有被加载，因此无法正确绑定。

您可以尝试将脚本移动到文档的底部，就在结束正文标记之前，这将导致它在您的其他 DOM 元素之后加载，但作为标准做法，我通常不绑定 DOM 元素，直到 DOM 是加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T16:50:50.223

DOM 需要准备好被 JavaScript 操作，然后才能应用项目。

[尝试阅读文档以了解为什么有必要。](http://api.jquery.com/ready/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T16:50:53.893

除非该按钮已在 DOM 中创建，否则不会。如果您的代码位于页面的头部，则不会发生这种情况，但如果它位于结束 body 标记之前，那就没问题了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T17:15:22.977

为了实现在 DOM 尚未准备好解析时在元素上设置事件处理程序的功能，我相信您可以使用 'on' 方法，您可以“现在为元素上的一个或多个事件附加事件处理程序函数，并且在将来”。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T16:51:40.097

在一个非常松散的意义上，以与其他编程语言中的 Main() 方法相同的方式来考虑 $('document').ready()。

# c# - 将 TypeConverter 直接绑定到枚举

> ID：15029162
> 
> 赞同：6
> 
> 时间：2013-02-22T16:49:17.417
> 
> 标签：c#, .net, datagridview, enums, typeconverter

我有以下场景：我有一个枚举，并且想将它绑定到 DataGridViewTextBoxColumn 上的 DataGridView（数据绑定）中。

这是我的枚举：

```
//[TypeConverter(typeof(EnumStringConverter))]
   public enum YesNoNA
   {
      [EnumDescription("Yes")]
      Yes,
      [EnumDescription("No")]
      No,
      [EnumDescription("N/A")]
      NA
   } 
```

这是一个使用它的简单属性：

```
 [TypeConverter(typeof(EnumStringConverter))]
  public YesNoNA HighLimitWithinBounds { get; protected set; } 
```

在我上面的情况下，类型转换器工作得很好。它为我完成了转换。

但是，这比我理想的解决方案要复杂。如果我将 typeconverter 放在 Enum 本身上（取消注释上面的代码），并在属性上注释掉 typeconverter，则不再调用 typeconverter！

我已经在其他类上完成了这个约定，它工作得很好。

为什么将类型转换器直接放在枚举上不起作用？

作为参考，这是我的类型转换器：

```
 public class EnumStringConverter : TypeConverter
   {
      public override object ConvertTo(ITypeDescriptorContext context, CultureInfo culture, Object value, Type destinationType)
      {
         if (value != null && destinationType == typeof(string))
         {
            return "Edited to protect the innocent!";
         }
         return TypeDescriptor.GetConverter(typeof(Enum)).ConvertTo(context, culture, value, destinationType);
      }
      public override bool CanConvertTo(ITypeDescriptorContext context, Type destinationType)
      {
         if (destinationType == typeof(string))
         {
            return true;
         }
         return base.CanConvertTo(context, destinationType);
      }
   }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T23:48:07.143

我不确定您所说的“这比我的理想解决方案更复杂”是什么意思。我有一种与您不同的方法，但它可能并不那么复杂。我会说我的方式涉及更多的前期开销，但在你的应用程序中使用它的次数越多，就会得到回报。它使您的应用程序可以本地化，这意味着您不必为每个枚举值添加属性。

**1）制作资源管理器缓存**

这部分是可选的；但是，如果您像我一样多次使用多个资源文件，则可以通过减少反射量来提高性能。

```
using System;
using System.Collections.Generic;
using System.Reflection;
using System.Resources;

namespace AppResourceLib.Public.Reflection
{
  internal static class ResourceManagerCache
  {
    private static Dictionary<Type, ResourceManager> _resourceManagerMap =
      new Dictionary<Type, ResourceManager>();

    public static ResourceManager GetResourceManager(Type resourceType)
    {
      ResourceManager resourceManager = null;

      // Make sure the type is valid.
      if (null != resourceType)
      {
        // Try getting the cached resource manager.
        if (!ResourceManagerCache._resourceManagerMap.TryGetValue(resourceType, out resourceManager))
        {
          // If it is not in the cache create it.
          resourceManager = resourceType.InvokeMember(
            "ResourceManager",
            (BindingFlags.GetProperty | BindingFlags.Static | BindingFlags.Public | BindingFlags.NonPublic),
            null,                                                   
            null,                                                   
            null) as ResourceManager;

          // If it was created, add the resource manager to the cache.
          if (null != resourceManager)
          {
            ResourceManagerCache._resourceManagerMap.Add(resourceType, resourceManager);
          }
        }
      }

      return resourceManager;
    }
  }
} 
```

**2) 创建本地化描述属性**

这是您将应用于 Enum 类型的属性。很酷的一点是，您不必为每个枚举添加属性，只需在枚举类型声明上方添加一次即可。

```
using System;
using System.ComponentModel;

namespace AppResourceLib.Public.Reflection
{
  /// <summary>
  /// A resource type attribute that can be applied to enumerations.
  /// </summary>
  [AttributeUsage(AttributeTargets.Enum)]
  public sealed class LocalizedDescriptionAttribute : Attribute
  {
    /// <summary>
    /// The type of resource associated with the enum type.
    /// </summary>
    private Type _resourceType;

    public LocalizedDescriptionAttribute(Type resourceType)
    {
      this._resourceType = resourceType;
    }

    /// <summary>
    /// The type of resource associated with the enum type.
    /// </summary>
    public Type ResourceType
    {
      get
      {
        return this._resourceType;
      }
    }
  }
} 
```

**3) 创建本地化描述转换器**

这会将枚举值转换为您将在字符串资源 (.resx) 文件中提供的字符串。

```
using System;
using System.Globalization;
using System.Linq;
using System.Reflection;
using System.Resources;
using System.Windows.Data;

namespace AppResourceLib.Public.Reflection
{
  [ValueConversion(typeof(Object), typeof(String))]
  public class LocalizedDescriptionConverter : IValueConverter
  {
    public Object Convert(Object value, Type targetType, Object param, CultureInfo cultureInfo)
    {
      String description = null;

      if (null != value)
      {
        // If everything fails then at least return the value.ToString().
        description = value.ToString();

        // Get the LocalizedDescriptionAttribute of the object.
        LocalizedDescriptionAttribute attribute =
          value.GetType().GetCustomAttribute(typeof(LocalizedDescriptionAttribute))
          as LocalizedDescriptionAttribute;

        // Make sure we found a LocalizedDescriptionAttribute.
        if (null != attribute)
        {          
          ResourceManager resourceManager = 
            ResourceManagerCache.GetResourceManager(attribute.ResourceType);

          if (null != resourceManager)
          {
            // Use the ResourceManager to get the description you gave the object value.
            // Here we just use the object value.ToString() (the name of the object) to get
            // the string in the .resx file. The only constraint here is that you have to
            // name your object description strings in the .resx file the same as your objects.
            // The benefit is that you only have to declare the LocalizedDescriptionAttribute
            // above the object type, not an attribute over every object.
            // And this way is localizable.
            description = resourceManager.GetString(value.ToString(), cultureInfo);

            String formatString = (param as String);

            // If a format string was passed in as a parameter,
            // make a string out of that.
            if (!String.IsNullOrEmpty(formatString))
            {
              formatString = formatString.Replace("\\t", "\t");
              formatString = formatString.Replace("\\n", "\n");
              formatString = formatString.Replace("\\r", "\r");

              description = String.Format(formatString, value.ToString(), description);              
            }          
          }
        }
      }

      return description;      
    }

    public Object ConvertBack(Object value, Type targetType, Object param, CultureInfo cultureInfo)
    {
      throw new NotImplementedException();

      return null;
        }
  }
} 
```

**4) 创建资源 (.resx) 字符串文件**

现在您要创建一个资源文件，其中将包含您想要的 Enums 键值样式的描述。我的意思是，在字符串资源的“名称”列中，您将输入各个枚举的确切名称，并在“值”列中输入转换该枚举时想要获取的字符串。
例如，假设您有以下枚举。

```
public enum MyColors
{
  Black,
  Blue,
  White
} 
```

然后你的字符串资源文件看起来像这样......

姓名 | 价值

黑色 | 深
蓝色 | 一个冷色
白| 明亮的颜色

**5) 使用属性创建枚举**

现在我们终于用 LocalizedDescription 进行 Enum 声明。传递给 LocalizedDescription 属性的参数是字符串资源文件的类型。现在，当使用转换器时，它将查看枚举类型的属性，获取资源文件，查找与特定枚举值的字符串值匹配的键字符串，并将资源文件中的值作为转换后的字符串返回。

```
using AppResourceLib.Public;
using AppResourceLib.Public.Reflection;

namespace MyEnums
{
  [LocalizedDescription(typeof(MyColorStrings))]
  public enum MyColors
  {
    Black,
    Blue,
    White
  }
} 
```

这种方法的主要缺点是，它仅在资源文件中的“名称”键与枚举值的名称匹配时才有效。这是在资源文件中引用字符串值而不给每个枚举一个描述属性的唯一方法。那么如何使用它来显示值呢？这是一个例子......

在您的 xaml 代码中，您将希望创建一个数据提供程序来获取您的 UI 元素的枚举值（我在这里使用 ComboBox ...）。然后，您将希望使转换器可用并将您的 UI 元素模板化以使用枚举转换器。所以这里...

```
 <!-- Enum Colors -->
  <ObjectDataProvider x:Key="MyColorEnums"
                      MethodName="GetValues"
                      ObjectType="{x:Type sys:Enum}">
    <ObjectDataProvider.MethodParameters>
      <x:Type TypeName="MyColors"/>
    </ObjectDataProvider.MethodParameters>
  </ObjectDataProvider>

  <!-- Enum Type Converter -->
  <LocalizedDescriptionConverter x:Key="EnumConverter"/>

  <!-- Dropdown Expand ComboBox Template -->
  <DataTemplate x:Key="MyColorsComboBoxTemplate">
    <Label Content="{Binding Path=., Mode=OneWay,
      Converter={StaticResource EnumConverter}}"
           Height="Auto" Margin="0" VerticalAlignment="Center"/>
  </DataTemplate>

  <!-- And finally the ComboBox that will display all of your enum values
    but will use the strings from the resource file instead of enum.ToString() -->
  <ComboBox Width="80" HorizontalAlignment="Left"
  ItemTemplate="{StaticResource MyColorsComboBoxTemplate}"
  ItemsSource="{Binding Source={StaticResource MyColorEnums}}"> 
```

哇，抱歉这么长。我不确定这对您来说是否太复杂，但这是另一种选择。希望能帮助到你！

# javascript - 为剪辑区域设置动画时清除画布时出现问题

> ID：15029164
> 
> 赞同：0
> 
> 时间：2013-02-22T16:49:32.910
> 
> 标签：javascript, html, animation, canvas, clipping

我正在尝试实现类似于您在卡通杂烩上看到的效果（[示例链接](http://youtu.be/EDcICGLpybQ?t=29s)），其中形状用作掩蔽层，用于保持静态的下方纹理。我已经开始尝试这个想法，通过创建一个渲染循环来清除画布，保存它的状态，然后绘制一个矩形剪辑区域，然后绘制占据整个画布宽度和高度的背景纹理。

这是绘图功能：

```
function draw() 
{
    context.clearRect(0,0, 640, 480);
    context.save();
    x += velocityX;
    y += velocityY;
    context.rect(x, y, 40, 40);
    context.clip();
    context.drawImage(image, 0,0, 640, 480);
    context.restore();
} 
```

基本上它只是以每秒 60 帧的速度运行，更新矩形的位置并在剪切区域内剪切背景图像。（我知道代码的结构并不完美，但我只是在尝试看看这种效果是否可能在画布上实现）。

[http://jsfiddle.net/JERje/86/](http://jsfiddle.net/JERje/86/)

我似乎遇到的问题是循环的前一次迭代中的剪辑区域悬而未决，从而产生了您在上面的小提琴中看到的奇怪效果。我已经尝试`draw()`在循环步骤中重新排序所有内容，但似乎唯一有效的是`canvas.width = canvas.width`清除屏幕的技巧。我想避免这种清除屏幕的方法，因为它似乎在 IE 中不起作用，而且它还会破坏 canvas `state`。`clearRect()`应该可以清除屏幕。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:24:16.900

所以，对此感到很愚蠢，但显然，当你打电话时，`rect()`你还必须确保`closePath`事后打电话以关闭剪辑区域。很高兴我终于想通了，现在开始添加多个图层！

这是工作小提琴：http: [//jsfiddle.net/JERje/129/](http://jsfiddle.net/JERje/129/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T11:31:42.740

你使用的是同一个 HTML5 Canvas 平装书，我不是你。

如果您像我在您的 jsfiddle 上所做的那样设置临时画布，如下所示：

```
var newCanvas = document.createElement('canvas');
newCanvas.getContext("2d").drawImage(image,0,0); 
```

像这样的函数将能够从该画布中破解一个部分：

```
context.putImageData(newCanvas.getContext("2d").getImageData(x,y,40,40),x,y); 
```

从而给你杂烩效果。好演员，祝你好运。如果它不起作用，请告诉我

编辑：但是，此解决方案将忽略一些上下文缩放转换。对自己处理规模的方式要聪明（如果你想要真正的“杂烩”效果，你真的应该这样做）

# linux - 在将文件发送到管道之前在文件的顶部和底部添加行

> ID：15029171
> 
> 赞同：2
> 
> 时间：2013-02-22T16:50:06.483
> 
> 标签：linux, bash

我有一个文本文件，比如说`text`.

我想要做的是将文本文件放入管道（如 中`cat text |`），但在顶部和底部添加了行 - 但不创建新文件（因为`text`文件有点大）或修改它。

那可能吗？我在想`echo $(echo "line"; cat text; echo "line")`，但我不喜欢那样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T16:57:12.503

来自 man bash：

> (list) list 在子shell 环境中执行（参见下面的命令执行环境）。影响 shell 环境的变量分配和内置命令在命令完成后不会保持有效。返回状态是列表的退出状态。

所以这应该工作：

```
(echo first line; cat file; echo last line) | some_command 
```

正如[chepner](https://stackoverflow.com/users/1126841/chepner)所建议的，当您不需要子外壳时，您可以`{}`使用`()`. 在这种情况下，`;`必须包含组中的最后一个命令。

在评论中 Pyrolistical 记得如果你有一个传入的管道而不是一个文件，这也可以工作：

```
some_program | (echo first line; cat -; echo last line) | some-other-command 
```

与许多 unix 命令行应用程序一样，如果文件名参数为`cat`is `-`，则表示“从标准输入读取”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:54:20.620

从这个问题复制[在每个文本文件的顶部和底部添加新行](https://stackoverflow.com/questions/14967842/add-new-lines-to-top-and-bottom-of-every-text-file)：

```
cat text |sed -e '1 i beginning_line'| sed -e '$s@$@\nending_line@' | 
```

它似乎工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-03T07:04:42.243

在管道输出中添加行，在顶部添加一行：（来源 - @Karel Bilek 的评论）

```
cat text.txt | sed -e '1 i my first line' 
```

在底部添加一行：（来源 - [https://askubuntu.com/a/968585](https://askubuntu.com/a/968585)）

```
cat text.txt | sed -e '$a my last line' 
```

例如：用单引号试试这个

```
cat text.txt | sed -e '1 i my first line' | sed -e '$a my last line' 
```

输出：

```
my first line
this is
my
text
file
my last line 
```

# python - Pyramid：为 route_url 构造的每个 URL 扩展查询字符串

> ID：15029173
> 
> 赞同：4
> 
> 时间：2013-02-22T16:50:17.653
> 
> 标签：python, web-applications, url-routing, pyramid

我正在使用 Webframework Pyramid 和 URL Dispatch，我在其中定义了很多路由，例如

```
config.add_route('login', '/login')
config.add_route('logout', '/logout') 
```

现在我想在查询字符串中附加一些东西，例如由

```
request.route_url('login') 
```

实际上是

```
/login?foo=bar 
```

这应该在项目的基础上完成，以避免编写

```
request.route_url('login', _query={'foo': 'bar'}) 
```

每次我想构建一个 URL。

什么是正确的地方？我应该以某种方式从 pyramid.request 类继承并覆盖 route_url 方法吗？有我可以使用的事件或钩子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T06:20:41.243

您可以定义一个预生成器并将其分配给您的路线。

```
def add_query_pregen(request, elements, kwargs):
    query = kwargs.setdefault('_query', {})
    query.setdefault('foo', 'bar')
    return elements, kwargs

def add_route_with_query(*args, **kwargs):
    kwargs['pregenerator'] = add_query_pregen
    config.add_route(*args, **kwargs)

add_route_with_query('login', '/login')
add_route_with_query('logout', '/logout') 
```

基本上，只要您调用`request.route_url`等，就会调用预生成器，并传递元素和 kwargs，从而允许您在实际生成 url 之前对它们进行变异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T18:16:00.913

基于this site上的讨论，我实现了以下解决方案：

```
from pyramid.request import Request as OldRequest

class Request(OldRequest):
    def route_url(self, route_name, *elements, **kw):
        qs = kw.get('_query', {})
        if 'hid' in qs: raise Exception('hid exists in query string')
        qs['hid'] = 1337
        kw['_query'] = qs
        return self.route_without_hid(route_name, *elements, **kw)

    def route_url_without_hid(self, route_name, *elements, **kw):
        return super(Request, self).route_url(route_name, *elements, **kw) 
```

它还留下了构建没有隐藏的 URL 的可能性。

# html - CSS 样式不会渲染带有样式的屏幕外元素

> ID：15029174
> 
> 赞同：1
> 
> 时间：2013-02-22T16:50:18.483
> 
> 标签：html, css

我在正确剥离屏幕元素时遇到问题。我相信问题与溢出属性有关。如果我以全屏（1080p）查看浏览器很好，但是当我将浏览器调整为较小的分辨率，然后向下滚动时，屏幕外元素的样式会消失。

编辑 [删除链接以防止将来断开链接]

```
 /* DEFAULT */

* {
    margin: 0px;
    font-family: Gotham, "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 12px;    
}
@font-face {
    font-family: leela;
    src: url('leelawad_0.ttf');
}
html, body {
    height: 100%;
    background-color: rgb(255,255,255);
}
h1 {
    color: rgb(183,183,183);
    font-family: leela;
    font-size: 16px;
    font-weight: normal;
    text-transform: uppercase;
}
a {
    color: rgb(102,102,102);    
    text-decoration: none;  
}

/* ID */

#container {
    height: 100%;
    overflow-x: hidden;
    width: 100%;
}
#header {
    border: 1px solid rgb(153,153,153);
    border-top: 0px;
    background-color: rgb(255,255,255);
    padding: 8px;
    position: fixed;
    width: 100%;
    z-index: 3;
}
#quickSearch {
    border: 1px solid rgb(153,153,153);
    background-color: rgb(250,250,250);
    height: 30px;
    margin: 8px 8px 8px 8px;
}
    #quickSearch input {
        background-color: rgb(250,250,250);
        border: 0px;
        height: 28px;
        margin-left: 10px;
        margin-top: 0px;
        float: left;
    }
#naviContainer {
    float: left;
    width: 200px;
    border-right: 1px solid rgb(153,153,153);
    background-color: rgb(225,225,225);
    height: 100%;
}
#navigation {
    background-color: rgb(225,225,225);
    float: left;
    width: 200px;
    margin-top: 31px;
    position: relative;
    z-index: 2;
    height: 100%;
}
    #navigation ul {
        margin: 0px;
        padding: 0px;
        width: 200px;

    }
    #navigation li {
        display: block;
        list-style-type: none;
        -webkit-transition: all 0.25s ease-in-out;
        -moz-transition: all 0.25s ease-in-out;
        -o-transition: all 0.25s ease-in-out;
        transition: all 0.25s ease-in-out;
    }
    #navigation li:hover {
        background-color: rgb(173,173,173);
        -webkit-transition: all 0.25s ease-in-out;
        -moz-transition: all 0.25s ease-in-out;
        -o-transition: all 0.25s ease-in-out;
        transition: all 0.25s ease-in-out;
    }
    #navigation h1 {
        border-bottom: 1px dotted rgb(153,153,153);
        background-color: rgb(127,127,127);
        padding: 8px;
    }
    #navigation h1.fix {
        border-top: 1px dotted rgb(153,153,153);
    }
    #navigation ul li {
        border-bottom : 1px dotted rgb(153,153,153);
    }
    #navigation li a {
        display: block;
        padding: 8px;
    }
#contentContainer {
    margin-left: 201px;
    margin-top: 31px;
    position: relative;
}
#breadcrumbs {
    background-color: rgb(239,239,239);
    border-bottom-width: 1px;
    border-bottom-style: solid;
    border-bottom-color: rgb(153,153,153);
    padding: 8px;
    position: inherit;
}
    #breadcrumbs ul {
        display: inline;
        margin-left: 0px;
        padding: 0px;
    }
    #breadcrumbs li {
        display: inline;
    }
#content {
    padding: 8px;
    position: inherit;
}
/* CLASSES */

.divider {
    border-left: solid 1px rgb(102,102,102);
    margin: 0px 7px 0px 5px;;
} 
```

任何投入将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:07:26.793

尝试使用 position:fixed 添加（我将其设置为黄色，以便突出显示）：

```
#navigation {
    background-color: yellow;
    border-right: 1px solid #999999;
    border-top: 0 none;
    float: left;
    height: 100%;
    margin-top: 31px;
    position: fixed;
    width: 200px;
    z-index: 2;
} 
```

[编辑] 第二次尝试，移除高度。

```
#navigation {
    background-color: #E1E1E1;
    float: left;
    //height: 100%;
    margin-top: 31px;
    position: relative;
    width: 200px;
    z-index: 2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:42:42.103

那只不过是身高：100％的问题

从#naviContainer 中删除 height:100% 将解决此问题。

```
#navigation {
  background-color: #E1E1E1;
  float: left;
  min-height: 100%;
  margin-top: 31px;
  position: relative;
  width: 200px;
  z-index: 2;
}

#naviContainer {
  background-color: #E1E1E1;
  border-right: 1px solid #999999;
  float: left;
  min-height: 100%;  /* the fix */
  width: 200px;
} 
```

# regex - 交替优先？

> ID：15029175
> 
> 赞同：0
> 
> 时间：2013-02-22T16:50:23.267
> 
> 标签：regex

给出以下文本：

```
constraint FK1 foreign key (Store_id) references "Store",
constraint FK2 foreign key (Product_id) references "Product"),
CONSTRAINT PK1 PRIMARY KEY (id),
CONSTRAINT FK3 FOREIGN KEY (id_user) REFERENCES user(id) 
```

我试图找出一个正则表达式，它为我提供本地列（Store_id、Product_id 和 id_user）、表（商店、产品和用户）和目标表列（如果 FK3 中适用的 id）。

如果我使用以下正则表达式：

```
FOREIGN\s+KEY\s+?\(([^(]+)\)\s+?REFERENCES\s+(\"[^\"]+\") 
```

它正确匹配前两个选项。

如果我使用这个正则表达式：

```
FOREIGN\s+KEY\s+?\(([^(]+)\)\s+?REFERENCES\s+([^(]+)\(([^)]+) 
```

它正确匹配 FK3，但不​​匹配 FK1 或 FK2。我希望我可以将它与`alteration`. 我尝试了以下方法：

```
FOREIGN\s+KEY\s+?\(([^(]+)\)\s+?REFERENCES\s+((\"[^\"]+\")|[^(]+)\(([^)]+) 
```

假设因为我将状态 1 放在第一位，这将为前两个选项提供有效匹配，但是它作为第二个正则表达式执行。

关于如何正确执行此操作的任何建议？有没有办法设置交替的优先级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T16:56:03.493

打破你的交替，这就是你得到的：

```
\s+(
    ("[^"]+")
    |
    [^(]+
)
\( ([^)]+) 
```

试试这个正则表达式：

```
FOREIGN KEY \(([^)]+)\) REFERENCES ("[^"]+"|\([^)]+\)) 
```

# clojure - 构造映射以传递给将对其进行解构的函数

> ID：15029183
> 
> 赞同：0
> 
> 时间：2013-02-22T16:50:45.797
> 
> 标签：clojure

我试图找到一种方法来建立一个参数传递给这个函数（它是托盘的一部分）：

```
(defn node-spec [& {:keys [image hardware location network qos] :as options}]
  {:pre [(or (nil? image) (map? image))]}
  options) 
```

有效的是这种用法：

```
(node-spec :location {:location-id "eu-west-1a"}, :image {:image-id "eu-west-1/ami-937474e7"} :network {}) 
```

但是 :location 和 :image 位对于我要配置的所有机器都是通用的，而 :network {} 位对于每个节点都是不同的。所以我想把共同点排除在外，然后做这样的事情：

```
(def my-common-location-and-image {:location {:location-id "eu-west-1a"}, :image {:image-id "eu-west-1/ami-937474e7"}} )
(node-spec (merge {:network {:security-groups [ "group1" ] }} my-common-location-and-image ))
(node-spec (merge {:network {:security-groups [ "group1" ] }} my-common-location-and-image )) 
```

但这不起作用。合并的映射被解析为缺少其值的单个键。所以我尝试了

```
(node-spec :keys (merge {:network {:security-groups [ "group1" ] }} my-common-location-and-image )) 
```

和

```
(node-spec :options (merge {:network {:security-groups [ "group1" ] }} my-common-location-and-image )) 
```

但这也不起作用。我觉得我正试图扭转或超越节点规范参数中的解构。我究竟做错了什么？或者我的目标是分解出一些键/值对是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:14:43.423

问题是该`node-spec`函数需要一个序列而不是一个映射。这是因为被解构的是一系列可以组合成键值对的事物。

所以，而不是通过这个：

```
{:image {:image-id "eu-west-1/ami-937474e7"}, :location {:location-id "eu-west-1a"}, :network {:security-groups ["group1"]}} 
```

我们需要通过这个：

```
'(:image {:image-id "eu-west-1/ami-937474e7"} :location {:location-id "eu-west-1a"} :network {:security-groups ["group1"]}) 
```

这意味着这将起作用：

```
(apply node-spec
       (reduce concat
               (merge {:network {:security-groups ["group1"]}}
                      my-common-location-and-image))) 
```

# android - 在 JSONObject Android 中创建一个包含所有键的数组

> ID：15029187
> 
> 赞同：4
> 
> 时间：2013-02-22T16:50:52.807
> 
> 标签：android

您好我想在 JSONObject 中创建一个包含所有键的数组。我的理解（如果我错了，请纠正我）是我需要将 JSONObject 转换为 Map，然后从中创建一个 Array 有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T16:58:07.017

无需转换 `JSONObject`为 Map 然后创建一个键数组，只需使用[JSONObject.names()](http://developer.android.com/reference/org/json/JSONObject.html#names%28%29)获取 JsonArray 中的所有键，然后将其转换为 Array 或 ArrayList。例子：

```
JSONObject  json = new JSONObject("json object string");
JSONArray namearray=json.names();  //<<< get all keys in JSONArray 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-09T08:11:47.107

使用 [ `keys()`][1] 迭代器迭代所有属性，并`get()`为每个属性调用 [ ][2]。

```
Iterator<String> iter = json.keys();
while (iter.hasNext()) {
    String key = iter.next();
    try {
        Object value = json.get(key);
    } catch (JSONException e) {
        // Something went wrong!
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:59:05.487

试试这个：

```
ArrayList<String> list = new ArrayList<String>();     
JSONArray jsonArray = (JSONArray)jsonObject; 
if (jsonArray != null) { 
   int len = jsonArray.length();
   for (int i=0;i<len;i++){ 
    list.add(jsonArray.get(i).toString());
   } 
} 

String[] array = list.toArray(new String[list.size()]); 
```

# mysql - MySQL程序删除数据库中的所有数据

> ID：15029190
> 
> 赞同：1
> 
> 时间：2013-02-22T16:50:57.323
> 
> 标签：mysql, procedure

我试图编写 MySQL 程序来删除数据库中的所有数据：

MySQL 服务器版本 5.5.20

看起来像：

```
DELIMITER $$
CREATE PROCEDURE drop_data_like(pattern VARCHAR(255), db VARCHAR(255))
begin
    DECLARE truncate_table VARCHAR(255) DEFAULT '';
    DECLARE done INT DEFAULT 0;
    DECLARE cur1 CURSOR FOR SELECT CONCAT(db, '.', info.table_name)
        FROM information_schema.tables AS info
        WHERE info.table_schema=db AND info.table_name LIKE pattern;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    OPEN cur1;

    read_loop: LOOP
        FETCH cur1 INTO truncate_table;
        IF done THEN LEAVE read_loop; END IF;

        PREPARE stmt FROM truncate_table;

        EXECUTE stmt;
        DROP PREPARE stmt;
    END LOOP;
    CLOSE cur1;
END$$
DELIMITER ;

CALL drop_data_like('%%', DATABASE());

DROP PROCEDURE drop_data_like; 
```

结果显示错误：

```
ERROR 1064 (42000) at line 16: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '@truncate_table;
    IF done THEN LEAVE read_loop; END IF;

    PREPARE ' at line 13 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:12:39.533

如果您需要保留结构但只是删除数据，那么只使用结构（-d 选项）执行 mysqldump 会更容易，然后删除数据库并使用 mysqldump 输出重新创建它。

```
mysqldump -d -h localhost -u user -ppassword databasename > dumpfile.sql

mysqlimport -u root -ppassword databasename dumpfile.sql 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T16:54:53.987

我解决了这个问题，现在可以了：

```
-- Server version   5.5.20

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

DELIMITER $$
CREATE PROCEDURE drop_data_like(pattern VARCHAR(255), db VARCHAR(255))
begin
    DECLARE truncate_table VARCHAR(255) DEFAULT '';
    DECLARE done INT DEFAULT 0;
    DECLARE cur1 CURSOR FOR SELECT CONCAT('TRUNCATE TABLE ', db, '.', info.table_name)
        FROM information_schema.tables AS info
        WHERE info.table_schema=db AND info.table_name LIKE pattern;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    OPEN cur1;

    read_loop: LOOP
        FETCH cur1 INTO truncate_table;
        SET @sql = truncate_table;
        IF done THEN LEAVE read_loop; END IF;
        PREPARE stmt FROM @sql;
        EXECUTE stmt;
        DROP PREPARE stmt;
    END LOOP;
    CLOSE cur1;
END$$
DELIMITER ;

CALL drop_data_like('%%', DATABASE());

DROP PROCEDURE drop_data_like;

/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */; 
```

# ios - 尝试从 plist 加载数据并刷新屏幕

> ID：15029192
> 
> 赞同：0
> 
> 时间：2013-02-22T16:51:05.073
> 
> 标签：ios, uiview, crash, plist

所以这是我的plist。我要做的就是在按下按钮时刷新屏幕。我没有收到任何错误，但它一直在我身上崩溃

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
<dict>
    <key>question</key>
    <string>2 + 2 = ?</string>
    <key>A</key>
    <string>2</string>
    <key>B</key>
    <string>4</string>
    <key>C</key>
    <string>3</string>
</dict>
<dict>
    <key>question</key>
    <string>2 + 4 = ?</string>
    <key>A</key>
    <string>3</string>
    <key>B</key>
    <string>6</string>
    <key>C</key>
    <string>9</string>
</dict>
</array>
</plist> 
```

这是我的代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
rootArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"question" ofType:@"plist"]];

currentQuestion = -1;
[self showNextQuestion];
}
-(void) showNextQuestion{
    currentQuestion++;
    int numItems = [rootArray count];
    NSMutableArray *question = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *A = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *B = [NSMutableArray arrayWithCapacity:numItems];
    NSMutableArray *C = [NSMutableArray arrayWithCapacity:numItems]; 

for (NSDictionary *itemData in rootArray) {
    [question addObject:[itemData objectForKey:@"question"]];
    [A addObject:[itemData objectForKey:@"A"]];
    [B addObject:[itemData objectForKey:@"B"]];
    [C addObject:[itemData objectForKey:@"C"]];

    self.questionasked.text =question[currentQuestion];
    self.answer1.text = A[currentQuestion];
    self.answer2.text = B[currentQuestion];
    self.answer3.text = C[currentQuestion];
    }
}

-(IBAction)nextQ:(UIButton *) sender{
[self showNextQuestion];

} 
```

该按钮被声明为一个动作，当它被按下时它只是简单地围绕视图控制器循环

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:01:08.927

我发现您的代码至少有一个问题：

```
 rootArray = [NSArray arrayWithContentsOfFile:[[NSBundle mainBundle]
 pathForResource:@"question" ofType:@"plist"]]; 
```

给你一个自动释放的对象，当你离开范围时释放`viewDidLoad`

尝试`rootArray`变成财产

# c# - 列表 到 IEnumerable

> ID：15029198
> 
> 赞同：9
> 
> 时间：2013-02-22T16:51:22.800
> 
> 标签：c#, list, ienumerable, icomparable

我可以将 int 隐式转换为 IComparable。我还可以将列表或数组转换为 IEnumerable。

但是为什么我不能将 List 隐式转换为 IEnumerable？

我使用 .net framework 4.5 和 Visual Studio 2012 Ultimate 对此进行了测试。

测试代码：

```
IComparable test1;
int t1 = 5;
test1 = t1; //OK

IEnumerable<int> test2;
List<int> t2 = new List<int>();
int[] t3 = new int[] { 5, 6 };
test2 = t2; //OK
test2 = t3; //OK

TabAlignment[] test;

IEnumerable<IComparable> test3;
test3 = t2; //error Cannot implicitly convert type 'System.Collections.Generic.List<int>' to 'System.Collections.Generic.IEnumerable<System.IComparable>'. An explicit conversion exists (are you missing a cast?) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T16:55:26.527

泛型方差基本上不适用于值类型。所以虽然你*可以*

您需要将每个值装箱：

```
IEnumerable<IComparable> test3 = t2.Cast<IComparable>(); 
```

所以虽然这是有效的，因为`string`它是一个引用类型：

```
List<string> strings = new List<string>();
IEnumerable<IComparable> comparables = strings; 
```

...等价物不适用于`List<int>`，您需要随时装箱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:57:31.063

这是与泛型列表的常见混淆，但基本上如果你概括它更有意义：

考虑这个设置：

```
public interface IA{
}

public class A : IA{
}

var listA = new List<A>(); 
```

以下行不起作用：

```
List<IA> listI = ListA; 
```

本质上这是因为，即使`A : IA`，`List<I> does not : List<A>`- 它们是完全独立的类型。

您可以使用以下`Cast`方法轻松完成演员阵容：

```
listI = ListA.Cast<IA>(); 
```

所以在你的情况下你可以做

```
test3 = t2.Cast<IComparable>(); 
```

# javascript - 在 JavaScript 中重命名变量

> ID：15029203
> 
> 赞同：7
> 
> 时间：2013-02-22T16:51:44.347
> 
> 标签：javascript, visual-studio, refactoring, automated-refactoring

我一直被“取消”缩小的 JavaScript 代码文件这一令人不快的任务所困扰。使用 JSBeautifier，生成的文件大约有 6000 行长。

通常，变量和参数名称会永久丢失，但在这种情况下，我有一个过时版本的原始文件，从该文件生成了缩小的 JavaScript 代码文件。这个过时版本的原始文件包含大部分代码注释和变量名，但绝对不能用来代替当前版本。

我想知道是否有某种方法可以重命名 JavaScript 中特定参数或变量的所有实例。由于缩小将名称减少为单个字符，因此不可能进行查找和替换。

是否有一些工具，我可以告诉，在这个文件中，`a`函数的参数`foo`应该是`clientName`并且让它在语义上将该参数的所有实例重命名为`clientName`？

不幸的是，我为一个拥有批准的软件列表的大型组织工作，并且在可预见的未来（没有 VS 2012）我坚持使用 Visual Studio 2010。

**更新：** @Kos，我们不使用 Git，但我们使用源代码控制。问题是不再为我的组织工作的开发人员一旦对文件进行了更改，将其缩小，并且仅将缩小版本签入源代码控制，因此他对原始文件的更改已经丢失。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-26T03:13:52.503

这个答案我迟到了一年，但我遇到了和你类似的问题，所以我建立了这个：[https](https://github.com/zertosh/beautify-with-words) ://github.com/zertosh/beautify-with-words 。它使用 UglifyJS2 简化代码，但使用拼音词生成器重命名变量。你会得到“长”的变量名，所以查找和替换是一件轻而易举的事。希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:07:47.983

你可能还有其他出路。

查看代码的最后一个未缩小版本。对比缩小版。可以说，其中大部分应该是相同的模一致变量重命名。您必须重命名和重新合并的差异。

Diff 不会进行这种比较；您需要将程序作为代码而不是文本进行比较的工具。我们的 SmartDifferencer 工具将执行此操作（通过使用特定语言的完整解析器生成 AST，然后比较 AST）；实际上，尽管有空白，它还是比较了程序。SmartDifferencer 也处理重命名；如果两个文件以单个重命名为模相同，这就是 SmartDifferencer 告诉你的。

我不知道这项工作的效果如何。我们还没有尝试使用 6000 行“一致重命名”变量的 SmartDifferencer。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T20:09:23.980

我发现我们在这里获得许可的一个名为“Telerik JustCode”的 Visual Studio 扩展具有执行我想要的功能。

# javascript - 在 Chrome/Firefox 中生成大量 WebWorker

> ID：15029207
> 
> 赞同：1
> 
> 时间：2013-02-22T16:52:03.980
> 
> 标签：javascript, google-chrome, firefox, canvas, web-worker

我正在编写一个简单的 JavaScript 应用程序，它在 HTML5元素中生成[Mandlebrot 集分形。](http://en.wikipedia.org/wiki/Mandelbrot_set)`canvas`生成图形的算法很容易并行化，所以我使用 WebWorkers 将屏幕切割成更易于管理的块。但是，当我生成大量 WebWorkers 时，我遇到了一些问题，而且它似乎是特定于浏览器的：

**Chrome：**生成 32 到 64 个 WebWorker 会杀死页面。奇怪的是，WebWorkers 在执行完成后似乎并没有被销毁。例如，如果我用 32 个 WebWorkers 运行一次模拟，我没有问题，但如果我重新运行模拟（不重新加载页面），页面就会死掉。

**火狐：火狐**似乎是在产生了一定数量的WebWorker后才放弃，不到32个。一定数量的WebWorkers完成了，其余的似乎处于某种边缘状态，从未完成执行。我在 Firebug 的错误控制台中没有得到任何输出。

**Safari：** Safari 是唯一一个似乎完美地产生了大量 WebWorkers 的浏览器。这里没有问题。

**IE：**谁在乎？

有没有人可以解决这些特定于浏览器的问题，或者至少知道是什么导致了这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:40:20.207

您是否有`worker.terminate();`声明在工人完成后关闭工人？这绝对是一个障碍。

# php - PHP 网页表单；设置外发电子邮件的外观

> ID：15029208
> 
> 赞同：0
> 
> 时间：2013-02-22T16:52:07.603
> 
> 标签：php, css, webforms

在提交表单的那一刻，它会发送一封几乎没有组织的电子邮件，例如：

```
Name:
JohnDoe
email:
johndoe@gmail.com
message:
blah, blah, blah 
```

我希望标签左对齐，值右对齐，以及在电子邮件中添加背景图像。我知道我将需要使用表格；但我对 PHP 还不够精通。查看代码，我相信这条带与外观有关。我从 html-form-guide.com 获得了表格。任何帮助将不胜感激，谢谢。

```
function FormSubmissionToMail()
{
    $ret_str='';
    foreach($_POST as $key=>$value)
    {
        if(!$this->IsInternalVariable($key))
        {
            $value = htmlentities($value,ENT_QUOTES,"UTF-8");
            $value = nl2br($value);
            $key = ucfirst($key);
            $ret_str .= "<div class='label'>$key :</div><div class='value'>$value </div>\n";
        }
    }
    foreach($this->fileupload_fields as $upload_field)
    {
        $field_name = $upload_field["name"];
        if(!$this->IsFileUploaded($field_name))
        {
            continue;
        }        

        $filename = basename($_FILES[$field_name]['name']);

        $ret_str .= "<div class='label'>File upload '$field_name' :</div><div class='value'>$filename </div>\n";
    }
    return $ret_str;
}

function GetMailStyle()
{
    $retstr = "\n<style>".
    "body,.label, { font-family:Arial,Verdana; } ".
    ".label {font-weight:bold; margin-top:5px; font-size:1em; color:#000;} ".
    ".value {margin-bottom:15px;font-size:0.8em;padding-left:5px; font-family:Helvetica;} ".
    "</style>\n";

    return $retstr;
}
function GetHTMLHeaderPart()
{
     $retstr = '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">'."\n".
               '<html><head><title></title>'.
               '<meta http-equiv=Content-Type content="text/html; charset=utf-8">';
     $retstr .= $this->GetMailStyle();
     $retstr .= '</head><body>';
     return $retstr;
}
function GetHTMLFooterPart()
{
    $retstr ='</body></html>';
    return $retstr ;
}
function ComposeFormtoEmail()
{
    $header = $this->GetHTMLHeaderPart();
    $formsubmission = $this->FormSubmissionToMail();
    $footer = $this->GetHTMLFooterPart();
    $message = $header."Submission from 'contact us' form:<p>$formsubmission</p><hr/>".$footer;

    return $message;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:03:40.470

CSS 支持在不同的电子邮件客户端中确实有所不同。您的代码正在`<style>`标签中加载 CSS `head`。这仅在某些电子邮件客户端中受支持，因此有些根本不会加载任何 CSS。

我发现包含 CSS 的最广泛支持的方法是`style`在每个单独的 HTML 元素上使用属性（是的，这样做很痛苦）。此外，并非所有 css 规则都受支持。电子邮件客户端支持的便捷指南可在[此处找到。](http://www.campaignmonitor.com/css/)

此外，请确保您使用正确的电子邮件标题来发送带有 PHP 邮件功能的 HTML 电子邮件。请参见[示例 #4](http://de.php.net/manual/en/function.mail.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:08:11.153

如果您只需要发送电子邮件，最好制作 html.inc 并将其导入

```
require(html.inc) 
```

将变量放入文件中，然后使用[phpmailer](http://phpmailer.worxware.com/index.php?pg=tutorial)发送电子邮件。

用它来[html.inc](https://stackoverflow.com/questions/2150238/php-variable-in-html-no-other-way-then-php-echo-var)

# jquery - 当 2 已经被点击时使 div 不可点击

> ID：15029211
> 
> 赞同：1
> 
> 时间：2013-02-22T16:52:13.503
> 
> 标签：jquery, html, css

我在一定数量的 div（类名 .sqrBtn）上触发了一个点击事件，我只需要其中两个 div 来显示在给定时间选择的。我怎样才能让未选择的 div 的其余部分无法点击？

到目前为止我的代码：http: [//jsbin.com/ucuha3/110/edit](http://jsbin.com/ucuha3/110/edit)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T16:54:18.990

[***jsFiddle Demo***](http://jsfiddle.net/Lgdhu/)
在定义点击处理程序的任何地方的外部范围内定义一个变量，并在每次触发处理程序时递增它，一旦达到所需的点击次数就删除侦听器。

```
var bol = 0;

$(".sqrBtn").click(function () {
    bol++;
    if (bol >= 2) {
        $(".sqrBtn").off('click');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:59:25.823

您可以这样做 - 通过检查所选 div 的长度

```
$(".sqrBtn").click(function () {
    var bol = $(".sqrBtn.selected").length < 2;
    // if less less than two selected or current one is selected
    if(bol || $(this).is('.selected')){
      $(this).toggleClass('selected');
    }
}); 
```

[JSBIN](http://jsbin.com/ucuha3/118/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:59:26.920

```
$(".sqrBtn").click(function () {
    if($(".sqrBtn.clicked").length < 2 && !$(this).hasClass('clicked')){
        $(this).addClass("clicked");
    }
 }); 
```

如果单击 div，则添加单击的类，如果 div 的总数为 2，则什么也不做。

# c# - 从庞大的文件列表中选择前一天的文件

> ID：15029216
> 
> 赞同：0
> 
> 时间：2013-02-22T16:52:30.110
> 
> 标签：c#, .net, winforms, performance, optimization

我正在从大量文件中选择前一天的文件

```
// selecting around 80-120 files from 20,000 - 25,000 

FileInfo[] files = (new DirectoryInfo(dirPath)).GetFiles("*.xml");
 string[] selectedFiles = (from c in files
                                          where c.CreationTime >= DateTime.Today.AddDays(-1) && c.CreationTime < DateTime.Today.AddHours(-2.0)
                                          select c.FullName).ToArray(); 
```

以上运行大约需要 4-5 分钟，你能告诉我如何优化它，而不改变功能！

```
// file selection is between yesterday 0:00 to yesterday 22:00 <br > 
```

如上面的代码所示。
友善的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:06:29.113

可以尝试的东西：

```
FileInfo[] files = (new DirectoryInfo(dirPath)).GetFiles("*.xml");

DateTime lowDate = DateTime.Today.AddDays(-1);
DateTime highDate = DateTime.Today.AddHours(-2.0);

 string[] selectedFiles = (from c in files
                                          where c.CreationTime >= lowDate && c.CreationTime < highDate
                                          select c.FullName).ToArray(); 
```

这些日期可能每次都被计算了 20,000 多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:22:12.963

`FileInfo`如果您只需要知道 CreationTime，请不要为每个文件实例化一个新类。此外，您不必使用`DirectoryInfo`.

我会使用这样的东西：

```
DateTime lowDate = DateTime.Today.AddDays(-1);
DateTime highDate = DateTime.Today.AddHours(-2.0);

var filteredFileNames = new List<String>();
string[] fileNames;
fileNames = Directory.GetFiles(dirPath, "*.xml")

for (int i = 0; i < fileNames.Length; i++)
{
   var creationTime = File.GetCreationTimeUtc(fileNames[i]);
   if(creationTime >= lowDate && creationTime < highDate)
   {
    filteredFileNames.Add(filenNames[i]);
   }
} 
```

如果您不受 I/O 限制，您仍然可以将时间范围的一部分划分为不同的`Tasks`/ `Threads`（取决于您使用的 .NET 版本）并在最后累积名称。但是，完成的工作最多的是`Directory.GetFiles`. 特别是如果它的目录很大。

当我不得不在一个目录中处理大量文件时，我继续使用`FindFirstFile`/`FindNextFile`和`FindClose`Win 32 API。它提供的开销要少得多，而且速度更快。

[FindFirstFile 实现](http://codebetter.com/matthewpodwysocki/2008/10/16/functional-net-fighting-friction-in-the-bcl-with-directory-getfiles/)

# ruby - Ruby 在评估条件的真实性时如何评估对象的类？

> ID：15029218
> 
> 赞同：0
> 
> 时间：2013-02-22T16:52:37.027
> 
> 标签：ruby, metaprogramming, evaluation

我试图让一个类的实例`MyClass`评估为一个虚假的值。所以我试图覆盖我能想到的所有方法来`MyClass`充当`nil`. 我有：

```
a = MyClass.new
a.nil? #=> true
a.class #=> NilClass
a == nil #=> true
a.eql? nil #=> true
a.equal? nil #=> true
a.instance_of? NilClass #=> true
a.kind_of? NilClass #=> true
a.is_a? NilClass #=> true 
```

我什至得到了

```
nil == a #=> true
nil.eql? a  #=> true
nil.equal? a #=> true 
```

最后我尝试了

```
a.__id__ #=> 4
nil.__id__ #=> 4
a.object_id #=> 4
nil.object_id #=> 4 
```

但是，`a`将始终评估为`true`. 所以我想知道 Ruby 如何检查`a`is`nil`或`false`. 我想这是开发人员无法访问的东西。

这不是要解决实际问题，我只是想知道它是否确实不能完成。我知道这会打破 Ruby 的“everything-ist-true-except-false-and-nil”-idiom，而且它很可能是一个纯粹的邪恶黑客。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:04:54.743

Ruby 检查表达式的实际*值。*

```
class Foo; end

f = Foo.new
f # => #<Foo:0x007ff3da88b348>

if f
  puts 'yay'
else
  puts 'nay'
end 
```

无论您尝试在`Foo`类上重新定义什么方法，它`f`仍然是一个实例，`Foo`并且该检查将打印“yay”。你在这里无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:05:18.427

只有两个对象评估为假。Ruby 只是检查对象是否是这两者之一。时期。

请注意，OO 的基础之一是模拟：一个对象可以模拟另一个对象。这不是真的：不可能模拟`nil`or `false`。这是 Ruby 违反 OO 的恼人案例之一，与`Object#equal?`.

# php - php中有没有像这样的方法 $dom->loadHTMLFile("figures.html"); 可以加载php文件吗？

> ID：15029222
> 
> 赞同：1
> 
> 时间：2013-02-22T16:52:45.310
> 
> 标签：php, dom

我真的很想知道是否有任何 php 方法可以加载 php 文档并将其作为 html 执行，然后浏览文件以获取第一个标记元素`table`，像这样

> PS：表中的记录是从服务器中的mysql查询中获取的

```
$dom = new DOMDocument();
$dom->loadHTMLFile("figures.php");
$tables = $dom->getElementsByTagName('table');

$table = $tables->item(0);

foreach ($table->childNodes as $td) {
  if ($td->nodeName == 'td') {
    echo $td->nodeValue, "\n";
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T11:46:55.167

您可以使用溢出缓冲区首先执行 php 并将输出加载到一个变量中，使用您的新变量，您可以获得 X 和 Y 之间的内容

这是第一步; 您将 php 的输出转换为变量：

```
ob_start();
include('phpfile.php');
$output=ob_end_clean(); 
```

下一步将是通过输出并仅获取您感兴趣的内容，例如：

```
function GetBetween($content,$start,$end){
    $r = explode($start, $content);
    if (isset($r[1])){
        $r = explode($end, $r[1]);
        return $r[0];
    }
    return '';
}
echo GetBetween($output,"<table>","</table>"); 
```

会呼应桌子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-23T11:53:39.980

使用[SimpleXML](http://www.php.net/manual/en/book.simplexml.php)

```
$xml= simplexml_load_file('figures.php');
$tables = $xml->xpath('//table[1]'); // only the first table
$table = $tables[0]; 
```

# php - 在 PHP 中声明变量时 `<<` 是什么意思？

> ID：15029225
> 
> 赞同：0
> 
> 时间：2013-02-22T16:52:46.983
> 
> 标签：php, hiphop

当我注意到这一行时，我正在查看有关 facebook 的 HipHop 虚拟机 (HHVM) 的[这篇文章：](http://www.hiphop-php.com/wp/?p=113)

```
<?php
$u_bytes =
$p_bytes = 100 << 20; 
```

我通过运行测试了一下，`echo 100 << 20;`结果是104857600，有什么作用`<< 20`呢？

* * *

**编辑**

根据答案，它是一个按位运算符（位移位 [left]）。例子：

```
100       = 000000000000000000001100100
                                ^ `<< 20` moves this bit 20 bits to the left
104857600 = 110010000000000000000000000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:54:12.497

这[有点左移](http://en.wikipedia.org/wiki/Bit_shift#Bit_shifts)。

您可以直接在 PHP 手册中了解更多关于它在 PHP 中的工作原理：http: [//php.net/manual/en/language.operators.bitwise.php](http://php.net/manual/en/language.operators.bitwise.php)

# wolfram-mathematica - 如何判断一个有理是无平方的？

> ID：15029230
> 
> 赞同：1
> 
> 时间：2013-02-22T16:53:13.123
> 
> 标签：wolfram-mathematica, factorization

我们知道如果 $μ(n)=0$ 那么整数 n 至少有一个具有多重性的因子。

现在我们如何确定在有理数 (m/n)>1 到素因数的分解中，我们的幂是否小于 (-1)？例如

```
m=2*3*5*7*11;

n=2^2*3^3*5;

m/n=2^(-1)*3^(-2)*7*11

f(m/n)=0 (*for example*) 
```

Mathematica 中是否有任何类似于 Moebius 函数 μ 的函数可以为我完成这项工作？我想我可以编写代码，但我需要在 Mathematica 中定义函数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:27:43.673

我想我找到了，应该是

```
f[x_]:=If[SquareFreeQ[x]==True,1,0] 
```

# ant - 使用 jacoco 时，teamcity 未捕获失败的 junit 测试

> ID：15029232
> 
> 赞同：3
> 
> 时间：2013-02-22T16:53:16.980
> 
> 标签：ant, junit, teamcity, jacoco

我试图通过使用 jacoco、ant 和 teamcity 将代码覆盖率集成到我的项目中。但是，我意识到当 jacoco 任务围绕 junit 任务时，teamcity 不会捕获失败的测试，即使测试失败，一切都会成功。

这是我的 2 个测试任务，可以在有无 jacoco 的情况下进行测试，并查看 teamcity 的行为。

1- 激活 jacoco

```
<target name="-test">
    <echo message="JaCoCo activated"/>
    <!-- Import the JaCoCo Ant Task -->
    <taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml"/>
    <!-- Run your unit tests, adding the JaCoCo agent -->
    <jacoco:coverage destfile="${bin}/jacoco.exec" xmlns:jacoco="antlib:org.jacoco.ant">
        <junit fork="yes" printsummary="yes" haltonfailure="no" showoutput="false" failureProperty="test.failed" errorProperty="test.failed">
            <classpath>
                <path location="${lib}/${projectName}.jar"/>
                <path refid="project.classpath"/>
            </classpath>
            <formatter type="xml"/>
            <batchtest todir="${reportingHome}">
                <fileset dir="${test}">
                    <include name="**/*Test.java"/>
                </fileset>
            </batchtest>
        </junit>
    </jacoco:coverage>
    <copy todir="${completeReportDir}" overwrite="true">
        <fileset dir="${reportingHome}">
            <include name="*.xml"/>
        </fileset>
    </copy>
</target> 
```

2- 没有 jacoco

```
<target name="-test">
    <echo message="JaCoCo activated"/>
    <!-- Import the JaCoCo Ant Task -->
    <taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml"/>
    <!-- Run your unit tests, adding the JaCoCo agent -->
    <!--<jacoco:coverage destfile="${bin}/jacoco.exec" xmlns:jacoco="antlib:org.jacoco.ant">-->
        <junit fork="yes" printsummary="yes" haltonfailure="no" showoutput="false" failureProperty="test.failed" errorProperty="test.failed">
            <classpath>
                <path location="${lib}/${projectName}.jar"/>
                <path refid="project.classpath"/>
            </classpath>
            <formatter type="xml"/>
            <batchtest todir="${reportingHome}">
                <fileset dir="${test}">
                    <include name="**/*Test.java"/>
                </fileset>
            </batchtest>
        </junit>
    <!--</jacoco:coverage>-->
    <copy todir="${completeReportDir}" overwrite="true">
        <fileset dir="${reportingHome}">
            <include name="*.xml"/>
        </fileset>
    </copy>
</target> 
```

在测试的 2 个版本之间，只有 jacoco 任务被评论。Teamcity 输出

```
[CommonBuildTasks.-test] echo
[08:26:21]: [echo] JaCoCo activated
[08:26:21]: [CommonBuildTasks.-test] jacoco:coverage (4s)
[08:26:21]: [jacoco:coverage] Enhancing junit with coverage.
[08:26:22]: [jacoco:coverage] Running ca.thalesgroup.socialnetworkanalysisorchestrator.impl.client.SocialNetworkAnalysisOrchestratorServiceProviderTest
[08:26:25]: [jacoco:coverage] Tests run: 2, Failures: 1, Errors: 0, Time elapsed: 3.511 sec
[08:26:26]: [jacoco:coverage] Test ca.thalesgroup.socialnetworkanalysisorchestrator.impl.client.SocialNetworkAnalysisOrchestratorServiceProviderTest FAILED
[08:26:26]: [CommonBuildTasks.-test] copy
[08:26:26]: [copy] Copying 1 file to C:\TeamCity\buildAgent\work\cc10e09e43249f57\reports 
```

如您所见，测试失败但 teamcity 报告构建成功。

知道为什么我会出现这种行为吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:58:48.133

我通过使用代理任务而不是覆盖任务解决了这个问题。所以，而不是

```
<jacoco:coverage destfile="${bin}/jacoco.exec" xmlns:jacoco="antlib:org.jacoco.ant"> 
```

利用：

```
<jacoco:agent property="agentvmparam" destfile="${bin}/jacoco.exec"/>
<junit fork="yes"...
    <jvmarg value="${agentvmparam}"/>
</junit> 
```

代理任务使用与覆盖任务相同的属性。然后，您可以开始您的 junit 任务，而无需将其包装在覆盖任务中。这样，teamcity 就能够拦截 junit 任务输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:58:37.483

答案隐藏在您对 JUnit-Task 的调用中：

```
<junit haltonfailure="no">...</junit> 
```

使用此配置，JUnit 任务不会因测试失败而导致构建失败。这应该导致所需的行为：

```
<junit haltonfailure="yes">...</junit> 
```

有关 JUnit 任务的配置，请参阅[Ant](http://ant.apache.org/manual/Tasks/junit.html)文档。

# java - 禁止 Cassandra 使用客户端时间戳

> ID：15029235
> 
> 赞同：1
> 
> 时间：2013-02-22T16:53:22.690
> 
> 标签：java, cassandra, hector, cql

这篇[文章](http://tshikatshikaaa.blogspot.co.uk/2010/11/timestamps-in-cassandra.html)说客户端在进行 Cassandra 更新时必须提供时间戳。我想知道这是否可以配置，所以 Cassandra 只是忽略客户端时间戳？我知道使用 NTP 是一种解决方案，但目前还不可行。

为了更清楚：

我想将 Cassandra 配置为使用系统日期，并且我可以使 Cassandra 节点的系统时间保持同步。我只是想防止流氓客户端时间戳弄乱记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:53:08.057

CQL 默认使用服务器时间戳，但仍允许手动指定时间戳 ( `USING TIMESTAMP`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:43:25.127

我试着在这里回答我自己的问题。基本上按照设计，我想要的在这里是不可能的。该文档特别指出客户端系统时钟是整个 Cassandra 同步模型的一部分，任何漂移的系统时钟都会搞砸一切。

[http://wiki.apache.org/cassandra/DataModel](http://wiki.apache.org/cassandra/DataModel)

# java - Spring Hibernate 数据库连接

> ID：15029236
> 
> 赞同：0
> 
> 时间：2013-02-22T16:53:29.980
> 
> 标签：java, spring, hibernate, datasource

我正在学习 Hibernate、Spring 和 JPA。

我想知道我的数据库连接是否被 Spring 自动关闭。当我查看数据库表 v$session 时，我发现有四个**JDBC 瘦客户端** 会话。所以想知道这些连接是否来自我的应用程序。

下面是我的`applicationContext.xml`。任何帮助都是非常可观的。

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd"
>   
    <context:component-scan base-package="net.test" />
    <!-- Data Source Declaration -->    
    <bean id="DataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="jdbc/myDS"/>     
</bean>
    <bean
        class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />
    <bean class="org.springframework.orm.hibernate4.HibernateExceptionTranslator" />
    <!-- JPA Entity Manager Factory -->
    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="packagesToScan" value="net.test.entity" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="true" />
                <property name="generateDdl" value="false" />
                <property name="databasePlatform" value="${jdbc.dialectClass}" />
            </bean>
        </property>
    </bean>
    <bean id="defaultLobHandler" class="org.springframework.jdbc.support.lob.DefaultLobHandler" />
    <!-- Session Factory Declaration -->
    <bean id="SessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="DataSource" />
        <property name="annotatedClasses">
            <list>
                <value>net.test.entity.Employee</value>
                <value>net.test.entity.Department</value>

            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.query.factory_class">org.hibernate.hql.internal.classic.ClassicQueryTranslatorFactory
                </prop>
            </props>
        </property>
    </bean> 
    <tx:annotation-driven transaction-manager="txManager" />
    <tx:annotation-driven transaction-manager="transactionManager" />   
    <bean id="txManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="SessionFactory" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>
    <!-- <tx:annotation-driven transaction-manager="txManager"/> -->
    <context:annotation-config />
    <bean id="hibernateStatisticsMBean" class="org.hibernate.jmx.StatisticsService">
        <property name="statisticsEnabled" value="true" />
        <property name="sessionFactory" value="#{entityManagerFactory.sessionFactory}" />
    </bean>
    <bean name="ehCacheManagerMBean"
        class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" />
    <bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true" />
    </bean>
    <bean id="jmxExporter" class="org.springframework.jmx.export.MBeanExporter"
        lazy-init="false">
        <property name="server" ref="mbeanServer" />
        <property name="registrationBehaviorName" value="REGISTRATION_REPLACE_EXISTING" />
        <property name="beans">
            <map>
                <entry key="SpringBeans:name=hibernateStatisticsMBean"
                    value-ref="hibernateStatisticsMBean" />
                <entry key="SpringBeans:name=ehCacheManagerMBean" value-ref="ehCacheManagerMBean" />
            </map>
        </property>
    </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:38:42.640

Spring 在事务提交或回滚时关闭连接。但是连接是*池*连接，因此关闭它们只是将它们放回连接池，而不是物理关闭它们。

第一个目标是能够非常快速地从池中获取新连接，而不必每次都重新创建新的物理连接，因为这是一项昂贵的操作。

另一个目标是能够限制打开的连接数，以避免数据库瘫痪。

请注意，在您的情况下，连接池不是由 Spring 处理的，而是由您的应用程序服务器处理的，这使得它可以从 JNDI 获得。

# vb.net - 打印/图形问题

> ID：15029237
> 
> 赞同：4
> 
> 时间：2013-02-22T16:53:30.030
> 
> 标签：vb.net, graphics, printing, vb.net-2010

**语言：** VB .NET 2010 Win Form

**范围：** 我开发了一个标签打印程序，旨在将自定义标签打印到斑马打印机。当我尝试将整个标签打印为图像时，打印机的清晰度出现问题，因此我尝试将标签中的所有文本存储到数组中，清除标签，将剩余图像发送到打印机，然后根据存储的数组覆盖新文本。此结果旨在将文本而不是图像发送到打印机。

**问题：** 生成的标签对于我想要的文本非常清晰，但是我在打印方法的对齐方面遇到了麻烦。对于测试，我将原始图像与顶部的覆盖文本一起显示，它们应该完全对齐或在合理范围内接近。这样做的结果是它们没有对齐。

**测试：**

```
 Dim g2 As Graphics
    g2 = Form1.PictureBox2.CreateGraphics
    g2.CompositingQuality = Drawing2D.CompositingQuality.HighQuality
    g2.SmoothingMode = Drawing2D.SmoothingMode.HighQuality
    g2.InterpolationMode = Drawing2D.InterpolationMode.HighQualityBicubic
    g2.Clear(Color.White)

    g2.DrawImage(largeimage, New Point(0, 0))

    Dim myBrush As Brush
    Dim i As Integer = 0
    Do Until i = label_array.Count - 1
        myBrush = New SolidBrush(label_array(i).ForeColor)
        g2.DrawString(label_array(i).Text, label_array(i).Font, myBrush, label_array(i).Location)
        i = i + 1
    Loop 
```

在打印方法中，我使用上述方法将叠加层和图像输出到图片框。这样做时，它可以工作，但是......

```
 e.Graphics.CompositingQuality = Drawing2D.CompositingQuality.HighQuality
    e.Graphics.SmoothingMode = Drawing2D.SmoothingMode.HighQuality
    e.Graphics.InterpolationMode = Drawing2D.InterpolationMode.HighQualityBicubic
    e.Graphics.Clear(Color.White)

    e.Graphics.DrawImage(largeimage, New Point(0, 0))

    i = 0
    Do Until i = label_array.Count - 1
        myBrush = New SolidBrush(label_array(i).ForeColor)
        e.Graphics.DrawString(label_array(i).Text, label_array(i).Font, myBrush, label_array(i).Location)
        i = i + 1
    Loop 
```

..对上面显示的打印图形执行此操作会导致错位...

欢迎任何想法，因为我会尝试任何事情。我猜测打印图形正在做一些我不知道的普通图形的附加操作。

* * *

我确实注意到 TextRenderer.DrawText 与 DrawString 相比改进了结果。然而，当使用这个时，结果似乎是从原始的一些未知的比例因子缩放...

下面是原始顶部的结果叠加层： ![在此处输入图像描述](../Images/c13343da919b96e5963de4a1e59e50a4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T23:45:42.473

您正在重新发现 Graphics.DrawString() 的一个众所周知的问题，它并不*准确*。这个问题最形象的演示是这个示例 Winforms 表单：

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
    }
    protected override void OnPaint(PaintEventArgs e) {
        e.Graphics.DrawString("Hiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii", 
            this.Font, Brushes.Black, 0, 0);
    }
} 
```

看起来像这样：

![在此处输入图像描述](../Images/2a251964520114a563bc6c4f1f676ebd.png)

再多的魔法都不会让你在字符串中字母 i 之间的间距突然改变的部分重叠。GDI+ 是微软首次尝试独立于分辨率的文本渲染，但效果并不好。这是一个很好的公司，WPF 是第二次尝试，它在模糊输出方面受到了很多批评。解决方法与在 .NET 2.0 for Winforms 中修复的方法类似，您应该始终使用 TextRenderer.DrawText() 将文本呈现到窗口。它没有尝试使渲染的文本平滑缩放，它总是更喜欢适合像素网格。[在 .NET 4 中添加的](http://blogs.msdn.com/b/text/archive/2009/08/24/wpf-4-0-text-stack-improvements.aspx)WPF 的*理想*与*显示*渲染模式也是如此。

您的方法还有其他重大问题，文本的呈现方式明显不适合打印机。您可以看到，当您放大时可以看到像素，SysInternals 的 ZoomIt 实用程序非常适合。我放大了右侧图形中的字母 a：

![在此处输入图像描述](../Images/b2a01e81fcdde407b907397f5c2b342e.png)

注意字母形状边缘的红色和蓝色像素。[这是一种称为ClearType](http://en.wikipedia.org/wiki/Cleartype)的抗锯齿技术，它增强了 LCD 显示器的感知分辨率。它只适用于 LCD 面板，不适**用于**没有相同条纹图案的打印机。在纸上，这封信看起来很模糊，带有彩色边缘。尽管它在 Zebra 打印机上并没有那么糟糕，因为它不支持彩色打印。

这些是特定于将文本呈现到显示器、分辨率相当差的设备的工件。像素网格拟合和 ClearType 是使文本看起来不错的技巧。典型的监视器每英寸不超过约 120 个像素。尽管随着苹果对“视网膜”显示器的推动，这最终得到了改善。一家拥有高分辨率显示器的公司，他们传统上[以“理想”模式](http://www.codinghorror.com/blog/2007/06/whats-wrong-with-apples-font-rendering.html)呈现文本。

这些渲染技巧*完全*不适用于具有更高分辨率的打印机。每英寸 600 像素是典型的，比显示器好 5 倍。通过在打印机上绘制图片框实际上是在**浪费**直接在打印机上绘制时所获得的改进。它们的差异非常显着，并且很容易用肉眼看到。当您以 600 dpi 渲染文本时，文本看起来更加美观和清晰。最初以 120 dpi 渲染并为打印机放大的文本看起来“臃肿”且粗糙。

始终使用 PrintDocument 类绘制到打印机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:52:11.727

很久以前，我编写了一个用于将标签打印到 Zebra 打印机的应用程序，所以也许我可以提供帮助。过去我们只有 ZPL2 API，只有打印的文本和简单的图形，没有这些图像的东西。反正...

我怀疑这是一个扩展问题。这可能解释了为什么您的原始图像模糊 - 也许打印机正在自动尝试缩放以适合标签，并且做得很差？当然，这可以解释上面显示的结果标签。

你上面的代码让我印象深刻的是你如何获得 Graphics 对象。一张来自画框；另一个大概来自打印机。请记住，Graphics 对象是设备相关的。也就是说，它的属性及其打印方式取决于您是打印到特定控件（不同的控件可以有不同的缩放比例）还是打印到特定的打印机。

您是否尝试过使用现有代码打印到激光打印机？看到结果可能会很有趣。另请参阅图形属性，例如 ScaleTransform。

# c# - 用重音字符反转字符串？

> ID：15029238
> 
> 赞同：26
> 
> 时间：2013-02-22T16:53:34.997
> 
> 标签：c#, .net, unicode, .net-4.0

*所以我看到了 Jon 的 skeet[视频](http://vimeo.com/7403673)，并且有一个代码示例：*

- 反转后应该有问题，`é` 但我猜它在.net2（恕我直言）上失败，无论如何它确实对我有用，我确实看到了*正确*的反转字符串。

```
char[] a="Les Misérables".ToCharArray();
Array.Reverse(a);
string n= new string(a);
Console.WriteLine (n); //selbarésiM seL 
```

但我更进一步：

在希伯来语中有“Alef”字符：`א`

我可以添加标点符号：（`אֳ`我相信它由 2 个字符组成 - 但显示为一个。）

但现在看看会发生什么：

```
char[] a="Les Misאֳrables".ToCharArray();
Array.Reverse(a);
string n= new string(a);
Console.WriteLine (n); //selbarֳאsiM seL 
```

有一个分裂...

我能理解为什么会这样：

```
Console.WriteLine ("אֳ".Length); //2 
```

所以我想知道在 C# 中是否有这种问题的解决方法（或者我应该建立自己的机制....）

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-22T17:05:13.190

问题是`Array.Reverse`不知道某些`char`值序列可能组合形成单个字符或“字素”，因此不应该颠倒。您必须使用能够理解 Unicode 组合字符序列的东西，例如[TextElementEnumerator](http://msdn.microsoft.com/en-us/library/system.globalization.textelementenumerator.aspx)：

```
// using System.Globalization;

TextElementEnumerator enumerator =
    StringInfo.GetTextElementEnumerator("Les Misאֳrables");

List<string> elements = new List<string>();
while (enumerator.MoveNext())
    elements.Add(enumerator.GetTextElement());

elements.Reverse();
string reversed = string.Concat(elements);  // selbarאֳsiM seL 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-22T17:19:30.483

如果你做了扩展

```
public static IEnumerable<string> ToTextElements(this string source)
{
    var e = StringInfo.GetTextElementEnumerator(source)
    while (e.MoveNext())
    {
        yield return e.GetTextElement();
    }
} 
```

你可以做，

```
const string a = "AnyStringYouLike";
var aReversed = string.Concat(a.ToTextElements().Reverse()); 
```

# c# - DataGridView 中的行没有改变颜色

> ID：15029251
> 
> 赞同：0
> 
> 时间：2013-02-22T16:54:13.283
> 
> 标签：c#, winforms

我只是想将红色作为特定列中值为 4 的行的背面颜色，但所有行的背面颜色均为白色，即使有值大于 4 的行。我还逐步完成了代码，所以我知道代码实际上执行代码来更改背景色。

我在这里做错了什么。

```
dataGridViewMain.DataSource = table;
dataGridViewMain.Sort(dataGridViewMain.Columns["Days in the shop"], ListSortDirection.Descending);
      foreach (DataGridViewRow row in this.dataGridViewMain.Rows)
      {
        if (Convert.ToInt32(row.Cells["Days in the shop"].Value) > 4)
           row.DefaultCellStyle.BackColor = Color.Red;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:41:17.557

显然我需要将逻辑放入 RowPostPaint 事件中。现在一切都好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T22:53:11.340

我在创建子表单时遇到了 DataGridView 单元格颜色的问题，我很难找到解决方案。如果使用子表单，我必须确保我更改了表单加载事件的颜色。我最初试图从 main 方法更改颜色，但没有成功。

# python - 另一笔交易已经在进行中

> ID：15029252
> 
> 赞同：2
> 
> 时间：2013-02-22T16:54:13.660
> 
> 标签：python, google-app-engine

我在 Windows 中使用应用程序引擎启动器，由于某种原因，我上次部署我的应用程序时，事务无法完成，现在每次我尝试部署时都会出现错误

> 用户的另一笔交易已经在进行中 app: s~ myapp, version 1

我试过做 appcfg.py 回滚，它会打开一个 python 窗口，然后几乎立即再次关闭（我认为它说错误，但它关闭得如此之快，我无法确定）

我试过做 appcfg.py 回滚 C:\ my\apps\directory\path - 这导致与上面相同

我试过做 C:\Program Files\Google\google_appengine appcfg.py 回滚 c:\my\app\path 但 windows 然后告诉我它找不到 C:\ program

现在我坚持要尝试的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T21:01:17.567

`appcfg.py rollback C:\path\to\my\app`是必需的命令。

如果您使用的是 Java，则回滚命令与上面相同，但应用程序的路径应该是应用程序的`target`目录。否则，回滚将失败。

# html - 按钮图像未正确显示

> ID：15029258
> 
> 赞同：0
> 
> 时间：2013-02-22T16:54:20.513
> 
> 标签：html, css, button, hover

我完全是 CSS/HTML 菜鸟。如果您能帮助我，我将不胜感激。

我需要修复我的按钮：

*   将激活字段（悬停）减小到按钮的实际大小（没有阴影）
*   当我将光标悬停在按钮上时，如何去除剩余的第一张图像？

谢谢你！

**jsfiddle链接：**

[http://jsfiddle.net/cRqhT/125/](http://jsfiddle.net/cRqhT/125/)

**HTML：**

```
<html>
    <body>
        <div>
<a id="button" href="http://mysite.com"</a>
            </div>
        </body>
    </html> 
```

**CSS：**

```
div {
    width: 820px;
    height: 820px;
    background: url('https://gator1174.hostgator.com/~mskparik/facebook/thx.jpg')
}

#button{
  display: block;
    width: 204px;
    height: 116px;
    background: url(https://gator1174.hostgator.com/~mskparik/facebook/111.png) no-repeat top left;
    position: absolute;
    top: 90%;
    left:10%;
}
#button:hover {
    background: url(https://gator1174.hostgator.com/~mskparik/facebook/222.png) no-repeat top;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:01:21.500

我只是在适当的地方添加了一个角括号，它似乎解决了这两个问题。[请参阅此处](http://jsfiddle.net/cRqhT/126/)的JSFiddle 。

```
<html>
    <body>
        <div>
            <a id="button" href="http://mysite.com"></a> <!--Notice extra corner bracket-->
        </div>
    </body>
</html> 
```

# apache2 - APC 需要重新启动才能看到更改

> ID：15029260
> 
> 赞同：0
> 
> 时间：2013-02-22T16:54:22.690
> 
> 标签：apache2, apc

我有带 APC 的 Apache2。

当我更改某些内容时，我必须重新启动 Apache 才能看到效果。我知道 100% 肯定是因为 APC。

我的设置有什么问题？（谢谢您的帮助！）

```
extension=apc.so
apc.enabled = On
apc.optimization  = 0
apc.shm_segments = 1
apc.shm_size = 2.6G
apc.ttl = 7200
apc.user_ttl  = 720
apc.num_files_hint = 102400
apc.mmap_file_mask = /tmp/apc.XXXXXX
apc.enable_cli = 1
apc.cache_by_default  = 1
apc.max_file_size = 220M
apc.stat = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:18:23.793

您已`apc.stat`设置为`0`. 这意味着 APC 在请求文件时不会检查文件是否被修改，它总是在第一次编译后从缓存中提供它。

要解决您的问题，请删除`apc.stat = 0`或将其更改回默认值`apc.stat = 1`

# asp.net - ASP.net 网络表单中的 Zen 编码

> ID：15029265
> 
> 赞同：1
> 
> 时间：2013-02-22T16:54:36.060
> 
> 标签：asp.net, emmet

我已经为 VS 2012 安装了 Web Essential，并在 ASP.net webforms 项目中尝试了 ZenCoding，特别是在 .ascx 中。但是，它没有生成任何 HTML 代码。例如，这个“ul>li*5>lorem3”在生成的 .aspx 上只产生“ul>li*5>lorem3”

是否可以将 Zen Coding 与 ASP.net 网络表单一起使用？我无法通过谷歌找到这个问题的任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T09:44:23.033

听起来您在 .aspx 中键入了“ul>li*5>lorem3”并进行了编译，期望表达式在编译时转换为 HTML。Zen Coding（又名 Emmet）表达式在编译 .aspx 时不会编译为 HTML，您必须自己扩展表达式，方法是在其末尾设置插入符号并按 Tab。

它将给出以下结果：

```
<ul>
    <li>Lorem ipsum dolor.</li>
    <li>Sit amet, consectetur.</li>
    <li>Adipiscing elit fusce.</li>
    <li>Vel sapien elit.</li>
    <li>In malesuada semper.</li>
</ul> 
```

Emmet 仅适用于常规 HTML 标签，据我所知，不支持 ASP.NET 控件。

更多信息（不是特定于 Visual Studio，而是一般的 Emmet）：[http ://coding.smashingmagazine.com/2013/03/26/goodbye-zen-coding-hello-emmet/](http://coding.smashingmagazine.com/2013/03/26/goodbye-zen-coding-hello-emmet/)

# scala - 将 3 个元组列表合并为一个新列表

> ID：15029270
> 
> 赞同：0
> 
> 时间：2013-02-22T16:54:43.963
> 
> 标签：scala

我是 scala 的新手，不知道在这里做什么。我有 3 个元组列表，例如：

```
List1 = List[(String,Option[String])]
List2 = List[(String,Option[String])]
List3 = List[(String,Option[String])] 
```

列表中的元素可能如下所示：

```
List1 = List[("a","1aa2"),("b","1bb2"),("c","1xx2")]
List2 = List[("a","1aa2"),("b",None),("c","1yy2")]
List3 = List[("a","1aa2"),("b","1bb2")] 
```

List 可能有不同的 .size 并且 Optional 字段有时为空。现在我想将这 3 个列表组合成一个“结果列表”——看起来像这样：

```
Listresult = List[(String,Option[String],Option[String],Option[String])] 
```

看起来像

```
Listresult = List[
("a" , "1aa2"  ,"1aa2" , "1aa2"),
("b" , "1bb2"  ,  ""   , "1bb2"),
("c" , "1xx2"  ,"1yy2" ,   ""  )] 
```

是否可以合并这样的列表？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T17:35:25.190

```
val map1 = list1.toMap.withDefaultValue("")
val map2 = list2.toMap.withDefaultValue("")
val map3 = list3.toMap.withDefaultValue("")
val keys = List(list1, list2, list3).flatMap(_.map(_._1)).distinct
val resultList = keys.map{k => (k, map1(k), map2(k), map3(k)) } 
```

顺便说一句，你说你的元组的第二个元素是 type `Option[String]`，但从你发布的示例列表来看，情况并非如此：空字符串与`None`. 所以我假设元素的类型实际上是`(String, String)`（可能是空字符串）而不是`(String, Option[String])`. 如果实际上类型是真的`(String, Option[String])`（意味着您的示例列表应该更符合`List(("a",Some("1aa2")),("b",None),("c",Some("1yy2"))`），那么您在上面的代码片段中所要做的就是使用 None 作为默认值：

```
val map1 = list1.toMap.withDefaultValue(None)
val map2 = list2.toMap.withDefaultValue(None)
val map3 = list3.toMap.withDefaultValue(None)
val keys = List(list1, list2, list3).flatMap(_.map(_._1)).distinct
val resultList = keys.map{k => (k, map1(k), map2(k), map3(k)) } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T17:08:03.730

```
val list1 = List(("a","1aa2"),("b","1bb2"),("c","1xx2"))
val list2 = List(("a","1ab2"),("b",""),("c","1yy2"))
val list3 = List(("a","1ab2"),("b","1bb2"))

val combined = list1 ::: list2 ::: list3 
```

我认为这是您真正想要的格式：

```
//List((a,List(1aa2, 1ab2, 1ab2)), (b,List(1bb2, "", 1bb2)), (c,List(1xx2, 1yy2)))

val result = combined.groupBy(_._1).map { x =>
       (x._1, x._2.map { y =>
        y._2
       })
   }.toList.sortBy(_._1) 
```

但如果你真的想要

```
//List(List(a, 1aa2, 1ab2, 1ab2), List(b, 1bb2,"", 1bb2), List(c, 1xx2, 1yy2)) 
```

那么你可以使用：

```
val result = combined.groupBy(_._1).map { x =>
    (x._1, x._1 :: x._2.map { y => y._2 })
  }.toList.sortBy(_._1).map(_._2) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T17:10:20.883

你可以做`list1 ::: list2 ::: list3`

它会是这样的：

```
val list1 = List(("a","1aa2"),("b","1bb2"),("c","1xx2"))
val list2 = List(("a","1ab2"),("b",""),("c","1yy2"))
val list3 = List(("a","1ab2"),("b","1bb2"))

val result = list1 ::: list2 ::: list3 
```

# php - mysqli_fetch_all 在 PHP 5.4.11 上停止工作

> ID：15029271
> 
> 赞同：5
> 
> 时间：2013-02-22T16:54:44.577
> 
> 标签：php, mysqli

我有一个带有主机的基本站点，最近该`mysqli_fetch_all`命令似乎在我收到消息时停止工作：

```
Fatal error: Call to undefined function mysqli_fetch_all() in file at line where function is used 
```

我将服务器上的文件回滚到我知道可以工作的集合，但即使页面正在运行，我也遇到了同样的问题`PHP5.4+`。

我无法弄清楚为什么这突然停止工作。离线，使用 XAMPP，mysqli_fetch_all 命令可以完美运行，因此问题似乎与数据库或代码无关。由于未知原因，我不希望使用 while 循环重写大量页面。

这是服务器主机的问题吗？非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T17:17:45.760

MySQLi 扩展有两种编译方式：

1.  通过将其与 MySQL 的客户端库链接
2.  通过针对与 php (mysqlnd) 捆绑的 MySQL Native Driver 进行编译

`mysqli_fetch_all()`仅在第二种情况下可用，请参阅[http://php.net/mysqli_fetch_all](http://php.net/mysqli_fetch_all)

出于兼容性原因，我建议避免使用此类 mysqlnd-only 功能。如果兼容性对您来说不是问题并且您迫切需要此功能，则必须重新编译 php `--with-mysqli=mysqlnd`。

# c# - 防止鼠标离开我的表单

> ID：15029274
> 
> 赞同：7
> 
> 时间：2013-02-22T16:54:49.533
> 
> 标签：c#, .net, mouse, mouseevent, mousemove

我已将一些事件附加`MouseMove`到`MouseClick`我的程序中，接下来是其中之一：

1.  获取“全局”鼠标移动，这样我即使在表单之外也可以读取鼠标位置。
2.  首先防止我的鼠标离开表单。

我的项目是一个游戏，因此可以像大多数其他游戏一样防止鼠标离开我的表单（ofc。如果您使用 alt+tab fe 切换焦点，您可以将其移出。）并查看其他游戏的答案要求全球mosue运动的问题，对于我的需求来说似乎很混乱。

有没有一种简单的方法可以防止我的鼠标超出表单的边界？或者实际上为了防止它首先越过边界，我希望鼠标留在客户区域内。

* * *

关于游戏的附加信息：

该游戏是一个简短的 5-30 秒长的生存游戏（30 秒后变得太难让你活着），你必须用鼠标躲避子弹。当您将鼠标移出表单然后玩家（`System.Windows.Forms.Panel`连接到鼠标）停止移动并立即被子弹击中时，这真的很烦人。这就是为什么防止鼠标离开该区域会很好的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:11:26.377

迟到的答案，但可能会派上用场。您可以订阅表单`MouseLeave`和`MouseMove`事件并像这样处理它们：

```
 private int X = 0;
    private int Y = 0;

    private void Form1_MouseLeave(object sender, EventArgs e)
    {
        Cursor.Position = new Point(X, Y);
    }

    private void Form1_MouseMove(object sender, MouseEventArgs e)
    {
        if (Cursor.Position.X < this.Bounds.X + 50 )
            X = Cursor.Position.X + 20;
        else
            X = Cursor.Position.X - 20;

        if (Cursor.Position.Y < this.Bounds.Y + 50)
            Y = Cursor.Position.Y + 20;
        else
            Y = Cursor.Position.Y - 20;           
    } 
```

以上将确保鼠标光标永远不会离开表单的边界。确保在游戏结束后取消订阅事件。

**编辑 ：**

[Hans Passants 的回答](https://stackoverflow.com/a/15029994/799558)比我的回答更有意义。用于：`Cursor.Clip`_`MouseEnter`

```
private void Form1_MouseEnter(object sender, EventArgs e)
    {
        Cursor.Clip = this.Bounds;
    } 
```

如果出现任何错误/崩溃，您可以释放光标（我相信您可以抓住它们）：

```
Cursor.Clip = Rectangle.Empty; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T17:33:29.263

您不能捕获鼠标，否则会阻止用户操作“开始”菜单。您可以获得的最接近的是分配 Cursor.Clip 属性。但是它很容易被用户按 Ctrl+Esc 打败，例如，没有通知。

最好的办法是订阅表单的 Deactivated 事件，它可靠地告诉您用户切换到另一个程序。激活事件告诉您用户何时移回。当然，当游戏得分取决于保持游戏对象移动时，用户实际上没有理由这样做。所以不要忘记给用户一个简单的方法来暂停游戏，比如 Escape 键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T17:21:37.170

我不知道您的确切问题的解决方案，但我对您有一个完全不同的想法。我不知道你的游戏是如何工作的，但根据你告诉我的，为什么不让它更难一点：为游戏区域添加边框，例如 4 像素宽的矩形，你不能触摸。如果你触摸它们，你就会死去，鼠标就会被释放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T17:03:33.567

你可以使用`Cursor`类。例如：

```
int X = Cursor.Position.X;
int Y = Cursor.Position.Y; 
```

至于防止用户将鼠标移到表单外，最好的方法可能是如果您有办法知道表单在屏幕上的坐标是什么并附加一个`MouseMove`事件，并检查鼠标是否在表单矩形内.

要了解屏幕上的表单位置，请查看[此](https://stackoverflow.com/questions/10511619/how-do-i-get-the-position-of-a-form-and-the-screen-it-is-displayed-on-and-resto)问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T17:42:29.207

我不推荐全局鼠标移动控制有两个原因。

*   这是糟糕的设计，您应该尊重操作系统的界限。如果您想要这种行为，请让应用程序全屏显示。唯一应该执行此类操作的应用程序是“kiosk”模式应用程序，它会锁定整个操作系统（以防止操作员滥用）。

*   全局键挂钩很混乱，不能保证有效并且很危险，因为它们会影响操作系统的关键部分（所有控件）。代码中的错误可能导致需要重新启动计算机。

也就是说，上次我检查（不久前，在 Vista 上）[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/ms644990%28VS.85%29.aspx)仍然有效（但它不受官方支持的 IIRC），它是一个非托管调用，所以你必须 pinvoke 但有了它你可以拒绝传递会将鼠标移到应用程序的边界之外。我不是 100% 确定操作系统是否会让你击败光标控制（我之前只在桌面机器上阻止过键盘），但它可能是你最好的选择。

# javascript - 无法从 XMLHttpRequest 触发点击

> ID：15029276
> 
> 赞同：1
> 
> 时间：2013-02-22T16:55:05.480
> 
> 标签：javascript, jquery, ajax, google-chrome-extension, xmlhttprequest

我为此写了一篇类似的帖子，但由于过于本地化而被关闭。经过一番研究和测试，我想我找到了问题的根源，这个问题应该得到更好的解释，希望对你有帮助。

使用 XMLHttpRequest 我需要转到一个页面，模拟鼠标单击，然后获取一些内容。这是我写的代码：

```
var sendToLog;
var xhr = new XMLHttpRequest();
xhr.open('GET', '/newsfeed-simulator', true);
xhr.responseType = 'document';
xhr.onload = function(e) {
  if (this.status == 200) 
  {

    var event = xhr.response.createEvent("MouseEvents");
event.initMouseEvent("click", true, true, window,
            0, 0, 0, 0, 0,
            false, false, false, false,
            0, null);
xhr.response.getElementById("simulate-button").dispatchEvent(event);

    $(xhr.response).ready(function() 
    {
        console.log(xhr.response.body);
        sendToLog = xhr.response.getElementsByClassName("story-score");
    });

    chrome.extension.sendMessage({writeToLog: sendToLog});  

}
}

xhr.send(); 
```

问题是点击事件不起作用。也试过了也`xhr.response.getElementById("simulate-button").click();`无济于事。

不确定是什么问题？这应该是一个直截了当的事情：**转到一个页面，等待它加载，单击一个按钮，等待它再次加载，然后从 DOM 获取内容。**

任何帮助将不胜感激。

先感谢您

**EDIT**删除了第二个 onload，并添加了 xhr.response。现在它在没有鼠标点击的情况下打印 DOM 到控制台。仍然不是我需要的，但也许这是朝着正确方向迈出的一步

**EDIT2**：根据[这篇](https://stackoverflow.com/questions/8801570/simulate-a-click-on-a-tag-in-chrome)文章和其他人，最好不要使用点击，因为它只适用于 IE。所以我编辑了我的代码，但直到不起作用......真可惜

**EDIT3**作为 Fabien Quatravaux，这里的问题是 ajax 请求响应没有加载到当前的 DOM 中，所以我无法调用该事件（我可以但它不会做任何事情）。所以问题是我如何使用 xmlhttprequest，转到使用的页面，触发事件，然后获取生成的 DOM？再次感谢 Fabien 指出这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:05:07.890

我认为 XmlHttpRequest 没有**响应**属性。我认为您可能会使用 responseText 并操作 DOM（即添加一个按钮）——然后您可以单击该按钮并创建另一个 XmlHttpRequest。

**编辑：**

我的立场是正确的，我看到它确实有一个 - 我从来没有以这种方式使用它。

我认为更大的问题是假设您在响应中取回一个文档并且您找到一个按钮并导致点击事件，那么应该发生什么。我认为您没有与点击事件相关联的任何内容。

我也同意其他帖子，您绝对应该使用 jQuery。似乎您只是在尝试调用连续的 AJAX 请求，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T13:03:27.763

作为 Fabien Quatravaux，这里的问题是 ajax 请求响应**没有**加载到当前 DOM 中，所以我无法调用该事件。我通过打开一个新标签并直接进入该页面解决了这个问题。这个解决方案的缺点是用户可以看到这个选项卡，但至少它可以工作。

谢谢大家帮忙。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T19:23:28.020

修改 xhr.response.getElementById("simulate-button").click(); 到 document.getElementById("simulate-button").click();

删除 $(xhr.response).ready 函数

修改 sendToLog = xhr.response.getElementsByClassName("story-score"); 到 sendToLog = document.getElementsByClassName("story-score");

# c# - 如何在 PHP 中将 $_FILES 内容放入二进制变量？

> ID：15029279
> 
> 赞同：0
> 
> 时间：2013-02-22T16:55:15.903
> 
> 标签：c#, php

我有一个统一的 C# 程序，它正在上传一个二进制文件（带有一些数据）。（这有点无关紧要，但也许不是）

```
var form = new WWWForm();
form.AddField("docid", "A");               
byte[] textarr = Encoding.ASCII.GetBytes("just a sample text to be compressed and sent to server");
form.AddBinaryData("file", textarr,"file.tmp");                
string req = "my url";        
WWW www = new WWW(req,form); 
```

我想获取文件内容（作为二进制文件），以便能够在 PHP 端作为二进制文件发送到数据库。

我正在尝试做这样的事情：

```
$binaridata = ~$_FILES["file"]["name"] (what do i need to do here? tried 
```

file_get_content 等，但它总是会产生一些错误）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T10:35:18.207

```
$binaryData = file_get_contents($_FILES['file']['tmp_name']);
                                                 ^^^^^^^^ 
```

该文件存储在由 指示的路径`tmp_name`，`name`只是客户端给出的名称，实际上无关紧要。

根据您与数据库的对话方式和数据库，您*不*希望将整个文件内容读入变量。例如，通过 PDO 使用 Postgres，您可以这样做：

```
$stmt = $pdo->prepare('INSERT INTO ... VALUES (:file)');

$fh = fopen($_FILES['file']['tmp_name'], 'rb');
$stmt->bindParam(':file', $fh, PDO::PARAM_LOB);

$stmt->execute(); 
```

数据库适配器会将文件作为流读取，这比将其保存在内存中要经济得多。请查阅数据库适配器的手册。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T16:59:49.787

为什么不尝试
`$binaridata = $_FILES["file"]["name"];`
添加分号并删除
〜Shadowpat

# javascript - 只改变一个 div 的 z-index 而不是它的每一个孩子

> ID：15029280
> 
> 赞同：0
> 
> 时间：2013-02-22T16:55:18.873
> 
> 标签：javascript, jquery, css, iframe, z-index

我有一个 div 与另一个具有更高 z-index 的 div 重叠。每个 div 都包含类似的分层图像。

当我更改父 div 的 z-index 以便现在另一个 div 位于顶部时，我需要它们在两个 div 中的所有分层子级保持与以前相同的顺序，但根据其父级作为一个组分层新的位置。

现在，要做到这一点，我必须将 div 的 z-index 从 5 更改为 1，并将其子元素从 6、7、8 更改为 2、3、4。并将另一个 div 的 z-index 从 1 更改为 5，并将其子项从 2,3,4 更改为 6,7,8....

如何仅更改 div 的 z-index？它的孩子永远不需要改变相对于父 div 的顺序。所以看起来我不应该每次都设置每一个。

也许我应该使用 iframe 而不是 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:09:43.167

子元素继承其父元素的 z-index。您可能需要重新考虑您的元素层次结构或定位，以通过这些约束来实现您的目标。将您的代码发布在[jsFiddle](http://jsfiddle.net/)上，以便我们查看。

参考：[了解 CSS z-index](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index?redirectlocale=en-US&redirectslug=Understanding_CSS_z-index)

# .htaccess - htaccess 重写更改 url

> ID：15029281
> 
> 赞同：0
> 
> 时间：2013-02-22T16:55:19.267
> 
> 标签：.htaccess, rewrite

我在连接这些点时遇到了麻烦。是否有中间步骤来更改 .htaccess 中的 url。这就是我到目前为止所拥有的。moniquetrinidadjewelry.com/necklace/product.php?id=17&product_name=enchanting%2520pearl

和重写

```
RewriteEngine On
RewriteRule ^$necklace/([a-zA-Z]+)/([0-9]+)/$ product.php?id=$1&product_name=$2 
```

我的目标和我认为如上所述设置的是 moniquetrinidadjewelry.com/necklace/id/product_name 的 url

我不完全确定问题出在哪里。刷新、重新加载或重新开始浏览时，地址栏中没有变化。（即家庭项链>等）

我是否遗漏了一些重要的东西，或者我跳过了 htaccess 本身之外的步骤？

编辑：

```
# Use PHP5.3 Single php.ini as default
AddHandler application/x-httpd-php53s .php

# Always use www in the domain
# Replace 'moniquetrinidadjewelry' with your domain name
RewriteEngine on
RewriteCond %{HTTP_HOST} ^([a-z.]+)?moniuetrinidadjewelry.com$ [NC]
RewriteCond %{HTTP_HOST} !^www. [NC]
RewriteRule .? http://www.%1moniquetrinidadjewelry.com%{REQUEST_URI} [R=301,L]

RewriteEngine on
RewriteCond %{QUERY_STRING} ^id=([0-9]+)&product_name=([a-zA-Z]+)$
RewriteRule product.php necklace/%1/%2/

# For security reasons, Option followsymlinks cannot be overridden.
#Options -MultiViews +FollowSymlinks
Options -MultiViews +SymLinksIfOwnerMatch
RewriteEngine on

# Always use www in the domain
# Replace 'moniquetrinidadjewelry' with your domain name
RewriteEngine on
RewriteCond %{HTTP_HOST} ^([a-z.]+)?moniuetrinidadjewelry.com$ [NC]
RewriteCond %{HTTP_HOST} !^www. [NC]
RewriteRule .? http://www.%1moniquetrinidadjewelry.com%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

RewriteCond %{HTTPS} !=on
RewriteRule .* https://%{SERVER_NAME}%{REQUEST_URI} [R,L]

RewriteRule ^/?(.*/?)index\.(htm|html|php) /$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

ErrorDocument 404 /

<Files error_log>
order allow,deny
deny from all
</Files>

# Ultimate htaccess Blacklist 2 from Perishable Press
# Deny domain access to spammers and other scumbags
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_USER_AGENT} ADSARobot|ah-    ha|almaden|aktuelles|Anarchie|amzn_assoc|ASPSeek|ASSORT|ATHENS|Atomz|attach|attache|autoema    ilspider|BackWeb|Bandit|BatchFTP|bdfetch|big.brother|BlackWidow|bmclient|Boston\     Project|BravoBrian\ SpiderEngine\ MarcoPolo|Bot\     mailto:craftbot@yahoo.com|Buddy|Bullseye|bumblebee|capture|CherryPicker|ChinaClaw|CICC|clip    ping|Collector|Copier|Crescent|Crescent\ Internet\     ToolPak|Custo|cyberalert|DA$|Deweb|diagem|Digger|Digimarc|DIIbot|DISCo|DISCo\     Pump|DISCoFinder|Download\ Demon|Download\     Wonder|Downloader|Drip|DSurf15a|DTS.Agent|EasyDL|eCatch|ecollector|efp@gmx\.net|Email\     Extractor|EirGrabber|email|EmailCollector|EmailSiphon|EmailWolf|Express\     WebPictures|ExtractorPro|EyeNetIE|FavOrg|fastlwspider|Favorites\     Sweeper|Fetch|FEZhead|FileHound|FlashGet\     WebWasher|FlickBot|fluffy|FrontPage|GalaxyBot|Generic|Getleft|GetRight|GetSmart|GetWeb!|Get    WebPage|gigabaz|Girafabot|Go\!Zilla|Go!Zilla|Go-Ahead-    Got-It|GornKer|gotit|Grabber|GrabNet|Grafula|Green\ Research|grub-    client|Harvest|hhjhj@yahoo|hloader|HMView|HomePageSearch|http\     generic|HTTrack|httpdown|httrack|ia_archiver|IBM_Planetwide|Image\ Stripper|Image\     Sucker|imagefetch|IncyWincy|Indy*Library|Indy\     Library|informant|Ingelin|InterGET|Internet\ Ninja|InternetLinkagent|Internet\     Ninja|InternetSeer\.com|Iria|Irvine|JBH*agent|JetCar|JOC|JOC\ Web\     Spider|JustView|KWebGet|Lachesis|larbin|LeechFTP|LexiBot|lftp|libwww|likse|Link|Link*Sleuth    |LINKS\ ARoMATIZED|LinkWalker|LWP|lwp-trivial|Mag-Net|Magnet|Mac\ Finder|Mag-Net|Mass\     Downloader|MCspider|Memo|Microsoft.URL|MIDown\ tool|Mirror|Missigua\     Locator|Mister\     PiX|MMMtoCrawl\/UrlDispatcherLLL|^Mozilla$|Mozilla.*Indy|Mozilla.*NEWT|Mozilla*MSIECrawler|    MS\     FrontPage*|MSFrontPage|MSIECrawler|MSProxy|multithreaddb|nationaldirectory|Navroad|NearSite    |NetAnts|NetCarta|NetMechanic|netprospector|NetResearchServer|NetSpider|Net\     Vampire|NetZIP|NetZip\ Downloader|NetZippy|NEWT|NICErsPRO|Ninja|NPBot|Octopus|Offline\         Explorer|Offline\ Navigator|OpaL|Openfind|OpenTextSiteCrawler|OrangeBot|PageGrabber|Papa\ Foto|PackRat|pavuk|pcBrowser|PersonaPilot|Ping|PingALink|Pockey|Proxy|psbot|PSurf|puf|Pump|        PushSite|QRVA|RealDownload|Reaper|Recorder|ReGet|replacer|RepoMonkey|Robozilla|Rover|RPT-    HTTPClient|Rsync|Scooter|SearchExpress|searchhippo|searchterms\.it|Second\ Street\     Research|Seeker|Shai|Siphon|sitecheck|sitecheck.internetseer.com|SiteSnagger|SlySearch|Smar        tDownload|snagger|Snake|SpaceBison|Spegla|SpiderBot|sproose|SqWorm|Stripper|Sucker|SuperBot    |SuperHTTP|Surfbot|SurfWalker|Szukacz|tAkeOut|tarspider|Teleport\     Pro|Templeton|TrueRobot|TV33_Mercator|UIowaCrawler|UtilMind|URLSpiderPro|URL_Spider_Pro|Vac    uum|vagabondo|vayala|visibilitygap|VoidEYE|vspider|Web\ Downloader|w3mir|Web\ Data\     Extractor|Web\ Image\ Collector|Web\ Sucker|Wweb|WebAuto|WebBandit|web\.by    \.mail|Webclipping|webcollage|webcollector|WebCopier|webcraft@bea|webdevil|webdownloader|We    bdup|WebEMailExtrac|WebFetch|WebGo\     IS|WebHook|Webinator|WebLeacher|WEBMASTERS|WebMiner|WebMirror|webmole|WebReaper|WebSauger|W    ebsite|Website\ eXtractor|Website\     Quester|WebSnake|Webster|WebStripper|websucker|webvac|webwalk|webweasel|WebWhacker|WebZIP|W    get|Whacker|whizbang|WhosTalking|Widow|WISEbot|WWWOFFLE|x-Tractor|^Xaldon\     WebSpider|WUMPUS|Xenu|XGET|Zeus.*Webster|Zeus [NC]
RewriteRule ^.* - [F,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:29:04.443

如果我理解正确，您必须首先在 a 中捕获查询字符串部分，`RewriteCond`然后在 a 中使用它`RewriteRule`

```
RewriteCond %{QUERY_STRING} ^id=([0-9]+)&product_name=([a-zA-Z]+)$
RewriteRule product.php necklace/%1/%2/ [R,L] 
```

当有 URL`product.php?id=17&product_name=enchanting%2520pearl`并将其重写为`necklace/17/enchanting%2520pearl`. 客户端被重定向，浏览器栏应显示新 URL。

如果你想反过来，这个应该可以

```
RewriteRule necklace/([0-9]+)/([a-zA-Z]+) product.php?id=$1&product_name=$2 
```

# excel - Excel使用宏更改列格式

> ID：15029285
> 
> 赞同：0
> 
> 时间：2013-02-22T16:55:31.433
> 
> 标签：excel, ms-office, excel-formula, office-2007, vba

如果列名中有单词 COST，则使用 excel 的宏将列格式更改为货币。

就像列名是 - “最终成本”或“总成本”或“项目成本”，然后将列格式更改为货币。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:32:44.007

尝试类似的东西

```
Public Sub FormatCostColumnsAsCurrency()

  Dim sht As Worksheet
  Set sht = ActiveSheet

  Dim rng As Range
  Dim i As Integer

  For i = 1 To sht.UsedRange.Columns.Count

      Set rng = sht.Cells(1, i)
      If InStr(LCase(rng.Text), "cost") > 0 Then
          sht.Columns(i).NumberFormat = "$#,##0.00"
      End If

  Next

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:41:47.043

Try below code

```
Sub CurrFormat()
    Dim colHeader As Range
    Set colHeader = Range("A1:E1")

    Dim currCell As Range
    Set currCell = Cells.Find("COST")

    If Not currCell Is Nothing Then currCell.NumberFormat = "$#,##0.00"

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:30:33.423

您可以使用 来执行此操作`Conditional Formatting`，不需要宏。

1.  突出显示表格左列中的一个单元格。

2.  在`Home`功能区部分，单击`Conditional Formatting`，然后单击`New Rule`。

3.  `Use a formula to determine which cells to format`.

4.  输入这个公式。如果您的行标题不是从 A1 开始，请相应更改：`=SEARCH("cost",A$1,1)`

5.  单击`Format`并设置`Number`为`Currency`，然后单击确定。

6.  在`Conditional Formatting Rules Manager`, 中设置`Applies to`，使其覆盖您的桌子。

# asp.net - 需要在前台打开弹出窗口

> ID：15029287
> 
> 赞同：0
> 
> 时间：2013-02-22T16:55:36.230
> 
> 标签：asp.net

我正在编写一个流程，以在用户的​​会话即将结束时提醒用户。我希望出现一个弹出窗口（或警报），并且我已经做了很多工作，但更重要的是，我希望他们即使在他们的浏览器处于后台时也能收到警报 - 要么让弹出窗口直接出现在前台 -在任何其他应用程序之上，或者让他们的浏览器窗口在任务栏中闪烁。任何想法或建议如何做到这一点？是否有 AJAX 弹出扩展器的属性来控制它？谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:07:05.080

您不能在另一个应用程序前面放置一个弹出窗口，但是您可以使选项卡/标题“闪烁”，直到他们注意到。

看看这个解决方案[https://stackoverflow.com/a/156274/935779](https://stackoverflow.com/a/156274/935779)

这是一个可能有帮助的 JavaScript 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:03:17.413

一个模态弹出窗口将是最好的。您不需要 AJAX，因为您没有发布到服务器。

你在使用 jQuery 吗？如果是这样，您可以快速轻松地设置一个计时器，该计时器在时间到期时显示一个模式对话框。

在每次页面加载或特定用户操作时，您都可以重置计时器。

至于让浏览器在任务栏中闪烁，我认为这是不可能的。

# cocoa-touch - 出现错误：HTTP 状态代码：尝试发布到 Facebook 朋友墙时出现 403

> ID：15029288
> 
> 赞同：0
> 
> 时间：2013-02-22T16:55:37.267
> 
> 标签：cocoa-touch, facebook-graph-api

这是我的代码：

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               appId, @"app_id",
                               link, @"link",
                               picture, @"picture",
                               NSLocalizedString(@"_findFriends_inviteFriend_title", @""), @"name",
                               NSLocalizedString(@"_findFriends_inviteFriend_description", @""), @"description",
                               NSLocalizedString(@"_findFriends_inviteFriend_message", @""),  @"message",
                               nil];
NSString * graphPath = [NSString stringWithFormat:@"%@/feed", friendId];

PF_FBRequest * request = [[PF_FBRequest alloc] initWithSession:[PFFacebookUtils session] graphPath:graphPath parameters:params HTTPMethod:@"POST"];

PF_FBRequestConnection *newConnection = [[PF_FBRequestConnection alloc] init];

[newConnection addRequest:request completionHandler:nil];

[newConnection start]; 
```

在此之前，我检查用户是否获得了权限：

```
if ([PF_FBSession.activeSession.permissions indexOfObject:@"publish_stream"] == NSNotFound)
{
    [PFFacebookUtils reauthorizeUser:[PFUser currentUser]
              withPublishPermissions:@[@"publish_stream"]
                            audience:PF_FBSessionDefaultAudienceFriends
                               block:^(BOOL succeeded, NSError *error) {
                                   if (succeeded)
                                   {
                                       [self postOnWall:indexPath];
                                   }
                                   else{
                                       //
                                   }
                               }];
    return;
}

[self postOnWall:indexPath]; 
```

问题是我收到**错误：HTTP 状态代码：403**

# php - 带有附加 GET 的 php 重定向

> ID：15029289
> 
> 赞同：0
> 
> 时间：2013-02-22T16:55:39.053
> 
> 标签：php

尝试在将这些变量与重定向一起发送时进行重定向。不知道我在哪里弄乱了语法。它单独在一个 php 文件中，所以没有右括号

```
<?php
header("Location:http://trax.shabimedia.com/click.php?c=1&key=qykpiqe6qquv1tejw82aqpb9&    c1=".$_GET['c1']."&c2=".$_GET['c2']."&c3=".$_GET['c3']."&c4=".$_GET['c4']."&c5=".$_GET['c5'].); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:02:21.310

尝试对您的网址进行编码，并删除最后一个点。最后一个点告诉 PHP 将会有更多的东西要解析，比如字符串或变量（没有更多的东西，所以你会得到一个错误）。Urlencode 确保您的网址正确无误。并确保在标头重定向后有退出，以确保不会执行重定向后的代码。

```
 <?php
    if( is_array( $_GET) ){
     foreach( $_GET as $id => $val){
      $_GET[$id] = urlencode( $val );
     }

      header("Location:http://trax.shabimedia.com/click.php?c=1&key=qykpiqe6qquv1tejw82aqpb9&c1=".
      $_GET['c1']."&c2=".$_GET['c2'].
      "&c3=".$_GET['c3'].
      "&c4=".$_GET['c4'].
      "&c5=".$_GET['c5']);
      exit;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:58:04.443

您在字符串的末尾添加了一个额外的点。

```
<?php
header("Location:http://trax.shabimedia.com/click.php?c=1&key=qykpiqe6qquv1tejw82aqpb9&c1=".$_GET['c1']."&c2=".$_GET['c2']."&c3=".$_GET['c3']."&c4=".$_GET['c4']."&c5=".$_GET['c5']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T16:58:35.830

正如几条评论中提到的，您在代码行末尾`.`的 final 之前有一个额外的内容。`)`去掉它。

# java - 无法使用 maven 导入 o rg.springframework.jdbc.core

> ID：15029292
> 
> 赞同：7
> 
> 时间：2013-02-22T16:55:42.737
> 
> 标签：java, spring, maven, jdbc

我不知道为什么在我的项目中找不到以下导入：代码：

```
import org.springframework.jdbc.core.SqlInOutParameter;
import org.springframework.jdbc.core.SqlParameter;
import org.springframework.jdbc.object.StoredProcedure; 
```

我的 pom.xml 文件中有以下内容

代码：

```
<dependency>
 <groupId>org.springframework</groupId>
 <artifactId>spring-context</artifactId>
 <version>3.2.1.RELEASE</version>
</dependency> 
```

但是我发现，如果我添加以下内容，它可以工作，但我不明白为什么需要：

```
<dependency>
      <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${springframework-version}</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T17:01:16.593

如果你想使用 Spring Jdbc 包，你必须导入正确的库：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>3.2.1.RELEASE</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:03:31.120

`SqlInOutParameter`，`SqlParameter`并且`StoredProcedure`需要[spring-jdbc](http://mvnrepository.com/artifact/org.springframework/spring-jdbc/3.2.1.RELEASE)工件。

它不会出现[在`spring-context`](http://mvnrepository.com/artifact/org.springframework/spring-orm/3.2.1.RELEASE). 然而，工件`spring-orm` *确实*包含这种依赖关系。看[这里](http://mvnrepository.com/artifact/org.springframework/spring-orm/3.2.1.RELEASE)

# php - 加入具有多个 DISTINCT 的 2 个表

> ID：15029293
> 
> 赞同：0
> 
> 时间：2013-02-22T16:55:46.907
> 
> 标签：php, mysql, join

我试图使用 DISTINCT 从表中获取值，但这不起作用，这是我正在做的事情

```
SELECT top100albums.songs, english_fm.artist, 
    english_fm.album, english_fm.image
FROM top100albums, english_fm
WHERE top100albums.songs = english_fm.album 
```

我很困惑如何在这个查询中使用 DISTINCT 我可以像这样使用它......

```
 SELECT  top100albums.songs, english_fm.DISTINCT(artist), 
     english_fm.DISTINCT(album), english_fm.DISTINCT(image)
 FROM top100albums, english_fm
 WHERE top100albums.songs = english_fm.album 
```

这是错误的......

我想获得 DISTINCT（这些行艺术家、专辑、来自表 english_fm 的图像的重复结果，所以我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T16:59:42.903

尝试这个

```
 SELECT top100albums.songs, english_fm.artist, english_fm.album, english_fm.image
   FROM top100albums, english_fm
   WHERE top100albums.songs = english_fm.album
   GROUP BY english_fm.artist, english_fm.album, english_fm.image 
```

不同用途组的嵌入

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T16:59:46.247

```
SELECT top100albums.songs, english_fm.artist, english_fm.album, english_fm.image
FROM top100albums, english_fm
WHERE top100albums.songs = english_fm.album
GROUP BY top100albums.songs, english_fm.artist, english_fm.album, english_fm.image 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T17:19:31.203

这是具有所需结果的完全优化的查询。

尝试这个

```
SELECT ta.songs, ef.artist, ef.album, ef.image
FROM english_fm AS ef
INNER JOIN top100albums AS ta ON ef.album = ta.songs
GROUP BY ef.artist, ef.album, ef.image; 
```

希望，这会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T17:07:47.160

`DISTINCT`适用于行而不是单个列。

因此，根据您的要求使用“GROUP BY”。

```
SELECT top100albums.songs, english_fm.artist, english_fm.album), english_fm.image
 FROM top100albums, english_fm
 WHERE top100albums.songs = english_fm.album GROUP BY english_fm.artist, english_fm.album, english_fm.image; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T17:01:50.320

`DISTINCT`关键字告诉引擎返回唯一的cortege（结果集记录）。请参阅文档中的用法。

[选择语法](http://dev.mysql.com/doc/refman/5.0/en/select.html)

# excel - 需要一个查找功能来搜索一张纸的一列

> ID：15029297
> 
> 赞同：1
> 
> 时间：2013-02-22T16:55:56.677
> 
> 标签：excel, vba

我需要一个查找功能来在我的名为“报价单”的工作表的 B 列中搜索以查找“利润调整”，如果它区分大小写，那就太好了。以下是我正在使用的代码，但我无法获得正确的范围或措辞。任何帮助表示赞赏。

```
Dim rFound As Range
Set rFound = Range("B10:B1000")

    Cells.Find(What:="Profit Adjustment", After:=ActiveCell, LookIn:=xlFormulas,         LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=True).Activate
    ActiveCell.Offset(0, 8).Select
    Selection.Copy
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:06:53.423

我并不清楚您是否只想找到 的第一次出现`Profit Adjustment`，或者您是否关心**所有**出现。如果要查找包含的**所有**行，则以下宏将按原样工作。如果您只想找到第**一次出现**，那么只需取消注释该行。`Column B``Profit Adjustment`**`Exit For`**

 ****这是代码：**

```
Sub FindValueInColumn()
    Dim rowCount As Integer, currentRow As Integer, columnToSearch As Integer
    Dim searchString As String
    Dim quoteSheet As Worksheet
    Set quoteSheet = ActiveWorkbook.Sheets("Quote Sheet")
    searchString = "Profit Adjustment"  'string to look for
    columnToSearch = 2                  '2 represents column B

    rowCount = quoteSheet.Cells(Rows.Count, columnToSearch).End(xlUp).Row
    For currentRow = 1 To rowCount
        If Not Cells(currentRow, columnToSearch).Find(What:=searchString, MatchCase:=True) Is Nothing Then
            Cells(currentRow, 8).Value = Cells(currentRow, columnToSearch).Value
            'uncomment the below "Exit For" line if you only care about the first occurrence
            'Exit For
        End If
    Next
End Sub 
```

**搜索前：** ![在此处输入图像描述](../Images/b6df21bce2bc5542d0dd7f76e0c6feb6.png)

**搜索后：**

![在此处输入图像描述](../Images/780fd78766360ec5950a1f59ec24bbcf.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:29:24.463

```
Sub samPle()

    Dim rFound As Range, cellToFind As Range
    Set rFound = Sheets("Quote Sheet").Range("B10:B1000")

    Set cellToFind = Cells.Find(What:="Profit Adjustment", MatchCase:=True)

    If Not cellToFind Is Nothing Then
        cellToFind.Activate
        ActiveCell.Offset(0, 8).Copy ActiveCell.Offset(0, 8)
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T17:15:10.927

我会像这样重写你的例子：

```
Sub copy_paste_example()
    Dim c As Range
    With ActiveWorkbook.Sheets("Quote Sheet")
        Set c = .Columns("B").Find(What:="Profit Adjustment", _
                                   LookIn:=xlFormulas, LookAt:=xlPart, _
                                   SearchOrder:=xlByRows, _
                                   SearchDirection:=xlNext, MatchCase:=True)
        On Error GoTo NotFoundErr:
            c.Offset(0, 8).Value = c.Value
    End With
    Exit Sub
NotFoundErr:
    Debug.Print "value not found"
End Sub 
```

笔记：

1.  您从未使用过`rfound`Range 对象，因此我将其删除。
2.  `Activate`并且`Select`不需要，甚至可能会减慢您的代码。
3.  请记住，它`Find`会返回一个 Range 对象，稍后在您的代码中可能会有用。**

# wpf - WPF & MVVM：类似 Visual Studio 的界面

> ID：15029298
> 
> 赞同：0
> 
> 时间：2013-02-22T16:55:56.713
> 
> 标签：wpf, mvvm-light

我想使用 WPF 和 MVVM Light 创建一个应用程序，但我不知道如何为 MVVM 应用程序组织我的应用程序布局。这个想法是有一些类似于 Visual Studio 的东西：

*   带有选项卡、工具箱和菜单的主窗口，可以停靠和移动到不同的位置。我已经能够使用 Telerik WPF 控件及其示例轻松创建此布局，但所有这些都在一个简单的 XAML 文件中，后面有代码，我不知道如何将其转换为 MVVM 应用程序。

我希望每个窗格/窗口/工具箱都是具有自己视图模型的不同视图。我查看了教程，但没有找到如何让一个应用程序在同一个“主窗口”中同时显示多个视图/视图模型。

我是否在特定的用户控件中定义了每个视图？我必须使用 ContentControl 来组织我的布局吗？我应该使用数据模板吗？如何在同一个窗口中处理多个视图/视图模型的绑定？

非常感谢你的帮助！杜兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:58:42.040

看看使用[http://avalondock.codeplex.com](http://avalondock.codeplex.com)来获得类似视觉工作室的布局。然后，您可以将用户控件放在视图的 LayoutPanes 中，并将它们绑定到您的视图模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T07:16:48.310

感谢您的回复！现在我明白了，我认为我搜索得太远了，让它变得比它应该的更复杂......

Avalon 似乎是一个非常好的解决方案，但我有 Telerik 许可证，然后我会去争取它。如果有人遇到同样的问题，只需看看 Laurent Bugnon 的这个答案：http: [//mvvmlight.codeplex.com/discussions/252035](http://mvvmlight.codeplex.com/discussions/252035)

谢谢

# ios - ios : 使用 GLEssentials 示例代码显示一个简单的 3D 模型

> ID：15029300
> 
> 赞同：2
> 
> 时间：2013-02-22T16:56:03.097
> 
> 标签：ios, opengl-es

我的目标是显示一个简单的 3D 模型并在其上应用纹理。

我已经下载了 GLEssentials [ios 示例项目](http://developer.apple.com/library/ios/#samplecode/GLEssentials/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010104-Intro-DontLinkElementID_2)来学习如何开发它（我是 ios OpenGL-ES API 的新手）

但是示例模型是一个 .model 文件，我从未听说过，也从未出现在[模型银行网站上](http://www.hongkiat.com/blog/60-excellent-free-3d-model-websites/)。

1.  这种文件是什么？
2.  示例代码是否与其他常见模型类型（.obj、.c2d、.3ds）兼容？
3.  从这个项目开始是个好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:47:09.143

看看这个问题：

*   [如何将 Blender blend（或 obj）文件转换为 Qualcom Vuforia .h 文件](https://stackoverflow.com/questions/14508930/how-to-convert-blender-blend-or-obj-file-to-qualcom-vuforia-h-file/14509789#14509789)

在我的回答中，我描述了一个脚本和随附的 Xcode 项目，该项目将 .obj/.mtl 文件转换为适用于 iOS 上的 OpenGL ES 的头文件[[链接]](https://github.com/ricardo-rendoncepeda/mtl2opengl)。

针对您的问题：

1.  我相信 .model 文件仅适用于示例项目，并且是 Apple 的专有扩展。它很可能包含简单的数据，例如顶点位置。
2.  我认为您很难将其他模型类型放入示例代码中，这对于 OpenGL ES 初学者来说非常复杂。您可能想在[此处](http://www.cocos2d-iphone.org/forum/topic/5077)查看 Cocos2D 上的 .pod 文件。我已经看到并听到了关于它的伟大事情。
3.  我不会推荐它:)

# xml - 出现错误：架构不能包含两个同名的全局组件

> ID：15029304
> 
> 赞同：1
> 
> 时间：2013-02-22T16:56:08.067
> 
> 标签：xml, spring, hibernate, xsd

在配置 Hibernate 时，我的配置文件中出现以下错误。

```
Referenced file contains errors (http://www.springframework.org/schema/beans/spring-beans-3.1.xsd) 
```

当我检查“更多详细信息”时，它给了我以下信息：

```
sch-props-correct.2: A schema cannot contain two global components with the same name; this schema contains two occurrences of 'http://www.springframework.org/schema/beans,identifiedType'. 
```

我有一个 applicationContext.xml 文件，其架构定义（我在其中导入 hibernate-context.xml 文件）如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

..
..
<!-- Imports datasource configuration -->
<import resource="hibernate-context.xml" /> 
```

我的 hibernate-context.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc" 
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xmlns:util="http://www.springframework.org/schema/util" 
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
            http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/tx 
            http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd
            http://www.springframework.org/schema/jdbc 
            http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
            http://www.springframework.org/schema/data/jpa
            http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
            http://www.springframework.org/schema/util 
            http://www.springframework.org/schema/util/spring-util-3.1.xsd
            http://www.springframework.org/schema/mvc
            http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
            "> 
```

正是在这个文件（hibernate-context.xml）中，我得到了错误。我的思想被吹走了，我被困住了....如何摆脱这个错误？请指导！！:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T18:45:22.440

好的，问题解决了。我把它写在这里作为任何陷入同样愚蠢情况的人的未来参考。

我从 hibernate-context.xml 更改了这一行：

```
http://www.springframework.org/schema/data/jpa
            http://www.springframework.org/schema/data/jpa/spring-jpa.xsd 
```

至

```
http://www.springframework.org/schema/data/jpa
            http://www.springframework.org/schema/data/jpa/spring-jpa-1.0.xsd 
```

打败我为什么，但它解决了我得到的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-12T08:06:16.993

我对 Spring 4.2 有同样的问题

我修复了将 http://www.springframework.org/schema/data/jpa/spring-jpa.xsd 更改
[为](http://www.springframework.org/schema/data/jpa/spring-jpa.xsd) http://www.springframework.org/schema/data/jpa/spring-jpa-1.11.xsd [的问题](http://www.springframework.org/schema/data/jpa/spring-jpa-1.11.xsd)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-04T09:12:52.270

6 年后，我从 Spring 3.2 升级到 Spring 4.3 时遇到了同样的问题。

即使我使用的是 Spring Data 1.10，我还是通过更改为

`http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.8.xsd`

# javascript - 如何编写 jquery 可链接函数以供本地使用？

> ID：15029309
> 
> 赞同：5
> 
> 时间：2013-02-22T16:56:28.560
> 
> 标签：javascript, jquery, method-chaining

如何编写可链接的函数但不污染 $.fn ？编写仅在我的插件内部使用的函数。是否可以？

```
$('.myclass').makeSomething().andOneMoreFunction().andLast(); 
```

这是正确的方法吗？

UPD。就我而言，最好的解决方案是扩展方法：

```
String.prototype.getMyLength = function(){return this.length;} 
```

现在我可以将此函数应用于任何字符串，如下所示：

```
var mystring = "test";
mystring.getMyLength(); 
```

或者

```
"teststring".getMyLength() 
```

并使其可链接：

```
String.prototype.getMe = function(){return this;}
"string".getMe().getMe().getMe().getMe().getMe(); 
```

感谢您的回答！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T16:58:35.610

你可以链上你想要的一切。如果您定义`$.fn`自己，那么您`return this`在结束时发挥作用是很重要的。

如果你想自己写一些javascript，你也可以链接！这仅取决于您返回的内容。因此，如果您返回一些其他对象，您可以从该对象链接。返回值用于此目的。

**例子**

```
var obj = {
    test : function(){ 
        alert("Y"); 
        return this; 
    },
    test2 : function(){ 
        alert("2"); 
        return this; 
    }
}
obj.test().test2(); // And so on since it returns this 
```

**jQuery 插件 API**

```
$.fn.test = function(){
    var methods = {
        method0 : function(){
            alert("method0");
            return this;
        }
    };
    return methods;
}
var api = $("obj").test(); // Returns methods
api.method0(); // Calling a function from the returned methods.
// OR
$("obj").test().method0(); 
```

上面的函数不再是 jQuery 可链接的。所以你不能使用，`$("obj").test().addClass("test")`因为你返回你自己的 API！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T17:16:15.557

您可以通过使用插件函数的第一个参数来指定选择的方法来避免污染；例如

```
(function () {
    var o = { // object holding your methods
        'bar': function () {console.log('bar', this); return this;},
        'foobar': function () {console.log('foobar', this); return this;}
    };
    $.fn.foo = function (method /*, args*/) {
        return o[method].apply(
            this,
            Array.prototype.slice.call(arguments, 1) // pass your args
        );
    };
}()); 
```

进而

```
$('something').foo('bar').foo('foobar');
/*
bar, thisobj
foobar, thisobj
*/ 
```

这样，您也可以正常访问 jQuery 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:00:52.837

当您调用 时`a.foo()`，将调用该函数`foo`并`this`设置为`a`。你可以利用它来发挥你的优势。

还记得*表达式* `a.foo()`的计算结果是您`return`在函数中的任何内容。

所以，**只需返回`this`**。

然后`a.foo()`返回`a`, 并`(a.foo()).bar()`等效于调用`a.foo()`then 调用`a.bar()`... 即在`a`!

`$.fn`并不是特别神奇 - 它只是以您将要使用的相同方式使用上述逻辑。

# c++ - 为什么我们不能有移动迭代器？

> ID：15029316
> 
> 赞同：7
> 
> 时间：2013-02-22T16:56:42.490
> 
> 标签：c++, c++11, move-semantics

C++11 引入了一种“移动”算法，其行为类似于“复制”算法，只是它...移动数据而不是复制它。我想知道为什么委员会没有更新复制算法以使用 forward 代替（或者可能除此之外）。

向量提供了 T& 的迭代器 const 向量提供了 const T& 的迭代器 为什么向量&& 不能提供 T&& 的迭代器？这将允许通过使用向量的构造函数将元素从一个列表移动到一个向量......

这是个坏主意吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-22T17:10:57.833

我们已经有了。用于[`std::make_move_iterator`](http://en.cppreference.com/w/cpp/iterator/make_move_iterator)创建移动迭代器。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-22T17:13:10.953

见`std::move_iterator`。

```
#include <list>
#include <vector>

#include <iostream>

struct A
{
    A() = default;
    A(A&&) {std::cout << "move\n";}
    A(const A&) = default;
};

int main()
{
    std::list<A> l = {A(), A(), A()};
    std::vector<A> v(std::make_move_iterator(l.begin()),
                     std::make_move_iterator(l.end()));
}

move
move
move 
```

# sql - SQL Server 数据库项目：为什么不支持命令执行

> ID：15029319
> 
> 赞同：0
> 
> 时间：2013-02-22T16:56:46.670
> 
> 标签：sql, sql-server, visual-studio, tsql

我正在尝试在我的预部署脚本中为 Visual Studio SQL 数据库项目复制一个文件。

```
:!!copy $(DataFileDirectory)\data.csv $(DataDestinationDirectory) 
```

我发现这会产生错误：

> *SQL72007：语法检查失败“附近的语法不正确。” 在批次附近：':!!copy*

所以我试图简化我的测试并尝试：

```
:!! dir 
```

这也失败了：

> *SQL72007：语法检查失败“附近的语法不正确。” 在批次附近：'：！！目录*

当我尝试时它失败了：

```
!! dir 
```

我能够执行以下命令：

```
:r .\myfile.sql 
```

我注意到每当我这样做时都会发生以下错误`:!!`，

> *72006：致命脚本错误：不支持命令执行。*

为什么`:!!`不支持命令执行（）？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:07:07.573

当然，这只能由 SSDT 的设计者真正回答，但您可以做出有根据的猜测：它会过多地损害系统安全性。它将允许您在运行 SQL Server 本身的用户帐户下在数据库服务器的操作系统上运行任意命令。

出于同样的原因，该`sqlcmd.exe`命令允许使用命令行选项禁用`:!!`和命令。`:ed``-X`

如果您确实需要在脚本中运行操作系统命令，您仍然可以回退到`xp_cmdshell`，这当然也有问题，但至少服务器的管理员可以决定是否应该允许它。

还有更多的 SQLCMD 语法选项，SSDT 部署前或部署后脚本不支持（例如[`:connect`](http://connect.microsoft.com/SQLServer/feedback/details/776293/sqlcmd-connect-support-in-post-deployment-scripts)or [`:on error`](http://connect.microsoft.com/SQLServer/feedback/details/741027/ssdt-release-unable-to-use-sqlcmd-commands-in-scripts)，似乎）。因此，另一种解释是，出于部署脚本的目的，`:r`和`:setvar`命令被认为是足够的。

# web - 在 web api 中接收 base64 字符串

> ID：15029324
> 
> 赞同：1
> 
> 时间：2013-02-22T16:56:58.353
> 
> 标签：web, asp.net-web-api

我试图在我的 web api web 服务中接收一个 base64 字符串（这是一个图像）。

我遇到的问题是字符串的长度，有没有办法可以设置传入字符串的限制以允许大尺寸的字符串？该字符串已被编码以供 url 使用。据我所知，这是我的问题。现在，如果我调用该函数，它会给我一个 404 错误。但是，如果我删除 base64string 并只放入一个普通字符串，它就可以工作。

这是我的功能

```
 public int userLogin(string identifier, string name, string hometown, string photo)
    {
        da = new SqlDataAdapter();
        ds = new DataSet();
        command = new SqlCommand("p_userLogin", connection);
        command.Parameters.AddWithValue("@userInfo", identifier);
        command.Parameters.AddWithValue("@name", name);
        command.Parameters.AddWithValue("@hometown", hometown);
        command.Parameters.AddWithValue("@photo", photo);
        command.CommandType = CommandType.StoredProcedure;
        da.SelectCommand = command;
        da.Fill(ds);
        int userID = Convert.ToInt32(ds.Tables[0].Rows[0][0]);
        return userID;
    } 
```

这是我要发送的 base 64 字符串

```
%2F9j%2F4AAQSkZJRgABAgAAAQABAAD%2F%2FgAEKgD%2F4gIcSUNDX1BST0ZJTEUAAQEAAAIMbGNtcwIQAABtbnRyUkdCIFhZWiAH3AABABkAAwApADlhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApkZXNjAAAA%2FAAAAF5jcHJ0AAABXAAAAAt3dHB0AAABaAAAABRia3B0AAABfAAAABRyWFlaAAABkAAAABRnWFlaAAABpAAAABRiWFlaAAABuAAAABRyVFJDAAABzAAAAEBnVFJDAAABzAAAAEBiVFJDAAABzAAAAEBkZXNjAAAAAAAAAANjMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0ZXh0AAAAAEZCAABYWVogAAAAAAAA9tYAAQAAAADTLVhZWiAAAAAAAAADFgAAAzMAAAKkWFlaIAAAAAAAAG%2BiAAA49QAAA5BYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAkoAAAD4QAALbPY3VydgAAAAAAAAAaAAAAywHJA2MFkghrC%2FYQPxVRGzQh8SmQMhg7kkYFUXdd7WtwegWJsZp8rGm%2FfdPD6TD%2F%2F%2F%2FbAEMABQMEBAQDBQQEBAUFBQYHDAgHBwcHDwsLCQwRDxISEQ8RERMWHBcTFBoVEREYIRgaHR0fHx8TFyIkIh4kHB4fHv%2FbAEMBBQUFBwYHDggIDh4UERQeHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHv%2FCABEIADwAZAMAIgABEQECEQH%2FxAAcAAABBAMBAAAAAAAAAAAAAAAAAQMEBwIFBgj%2FxAAYAQADAQEAAAAAAAAAAAAAAAAAAQMCBP%2FEABgBAAMBAQAAAAAAAAAAAAAAAAABAwIE%2F9oADAMAAAERAhEAAAG3QMTBFYY5alPBmA1LrcjxmXOxgKQAAAQEQQRHkMrWkgTVn3RGV6Nz2YFOQEAXAR5CHywdvHqbimW5qpU2HU1O5isaR9TJSdjax0iQETnpgrVY1xblUtZOsSR7mDcLkI%2Bdtb0WNq6Fd8N63KeI%2F8QAIRAAAgICAQUBAQAAAAAAAAAAAgMBBAAFBhAREhMwFCD%2F2gAIAQAAAQUC%2FkpgR9UNCKaAy7WU1fGXlE%2FDYWlpwthInOx8sPZ1pbou5bn4WIiVlArKuqGYaFjmmCFW%2Fg%2BO6S9hwMyEMPyygiFB8H2EVxZdhETdKwSR8Q0u9q3F%2FwAss11za5Lr1Ff5M5sMf7D1tit%2BWCoxm9upXREhzV8jfVGlvdbaH91TryKxNZn7QwXgYLcIwbRyWl5bA%2FJ%2FUbTxjpy8yXR97u0OdlZrSswsMYIiBWXkUvd2h7s97s97s%2F%2FEAB4RAAEEAgMBAAAAAAAAAAAAAAEAAhEgAyEQEhMx%2F9oACAECEQE%2FAeWgQssRUfVqFkLQLMdpPf2OqyvU0%2F%2FEABwRAAICAwEBAAAAAAAAAAAAAAABESECECASMf%2FaAAgBAREBPwHbRj1IvvMDRgiN2WemWWWf%2F8QAMhAAAQMCAQkHAwUAAAAAAAAAAQACAxEhEgQiMTIzQWFxkhATIDBCUVIjYqE0Q4GC0f%2FaAAgBAAAGPwLwlx0BYpRnOvyWrVFuEKXI3%2Bi7fJZE%2B3e2xekc1oq3g1Yg0Bn32XdElrvwnu3YD5Ir7oGjiB7BPpaprnNRqGurwVIxc63LyXU3XQdE4r6jgrLFbE4eTWeZkY%2B4ovhHeQONWOCoFiduTYpHCGfRhOg8vFR80bTxKLYyZiN40LDk%2BGEc6lF8kuJx3kpsL5o81raX4f7VWmiH9k4RysLn5ooVrBCOVwnjHyNx%2FKtlDY3fF5ov1MXV2ySgVNKJ1cmZRxBogWsgizw6laaAv2HX9Tr89CpGyCww1BufxwQb3VvdYfj4KCV3bHgOHE%2B5C2r%2BpbWTqUTTLJQvA1lqhOIa2w9kXGZ9z8ltpOpbaTqW2k6ltpOpf%2F%2FEACcQAQACAQMCBgIDAAAAAAAAAAEAESExQVEQkSBhcYGhwdHhMPDx%2F9oACAEAAAE%2FIfC4NBbMUtdjRse0YWj5SUimsVHjXf8AF5P4LlC3Jbj1XvLA4ZrLl%2BY1Lxq1ft%2BZaHjCl9xGZzlJvk8T14gYPGEjh0IbszAnB5IXsw2alkmQv60%2BvCvgZWrBMSrgCPX2pUz3KD3YFp1uMa6k9OSJcbAgA4OO8qhjiAz0Zek3tEHcfXVl9PIfAkwdwtDuY8TnnydpuixsrBEqqx0TcHMF6Jhng5QdXtA5%2BSYNlBhvL8p5geZfhn%2BJly4JPSHzSbpscMI7Yvf%2B6Sth6gZDi7zdw6Zhbidk6tNcMJaVL90dzvCsVtjdR8zAr3nlLgwbUHn02g5c2Q0DvMN%2BdKf3Izcqy0uXTirSZIIT2S7xRaUO00OU%2FdEf2iY%2FsT%2F%2F2gAMAwAAARECEQAAEP8AnYN%2BoCoX5k0IxmM%2F7BlVolzfNjP%2FxAAaEQEAAwEBAQAAAAAAAAAAAAABABEhEDEg%2F9oACAECEQE%2FEIPAUuBY%2BKjAXA0imzXztyoRE7MjwdTJdTJMqIOS%2Bf%2FEACARAAIABQUBAAAAAAAAAAAAAAABEBEhMeEgcZGh8EH%2F2gAIAQERAT8QiwRp1hKLsOqYregkJ%2FsCnMbIlBeeQ6bd4HMt7gSlt3g294Ni5wf%2FxAAnEAEAAgIABgICAgMAAAAAAAABABEhMUFRYXGBkRDwIKGxwdHh8f%2FaAAgBAAABPxD8bHBvyAtgSxubWaeyjq3OWmhRcWa5BGuE702QdPYj5fh%2BWLBlL3GAokoQq7dXgYYJuyUWKCqNrMBct19ib7rYxnGmY9RPIjrFx7qNJlNYUH8x%2FB3OmW8%2FjJkUoBss3jSnmAoWwqwwvHHq6hStcYl5NWiZyjeWGrZBwArVeX3DtqbgEUuQIPEflgkW35Ciyo7Zf1cIFq8yPv8AzGvE029aczugohlJgKoQa78%2FEfik06SiWQbYMy7BGLHsHL4gMPQBHKEsC1PEqUcDUxvtcBUBzdDnAkkL4UwK4bOJu%2Be%2Fhm0Uxt5VHo3t5%2B2IQxVlnJLe4J1imuUmbyK8C%2BssiZbu8VuFIDhX79QPiMEE2tf8QNTVZsL61sHKznGcZ7JWSigchks6B6VCjzgL6NBh8RtB77jjuODlgMIAlDSf1cGoiTwUbXGsNrdpqgAKcRoBCmkrYDTV3DM1O5T2Fd25g4SuNI9OxqACkmq5A4jCbarwqbiXHdl%2Fo8RcALYRTkcwgTUNq9x3BYURVZikFM1dPgiGZ1v%2FAHxRft94XAh3ojx6zGRwwGliiTcA5LTESZAtbwDiXeAq%2FwC8QFpj75gF%2Bn5hS%2Bn5n%2F%2FZ 
```

对此的任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-27T07:08:31.300

我不知道你是否得到答案，因为问题已经发布了很长时间。

我也遇到了同样的问题，使用下面的链接解决了我的问题可能会帮助您找到答案@Ken

[ASP.NET Web API 不允许冗长的 base64 URI](https://stackoverflow.com/questions/31455166/asp-net-web-api-does-not-allow-lengthy-base64-uri)

# ms-access - 什么是在访问中创建新表的好工具？

> ID：15029332
> 
> 赞同：0
> 
> 时间：2013-02-22T16:57:20.213
> 
> 标签：ms-access

我正在寻找一种方法来处理巨大的访问表，根据其内容进行复杂的分析计算，然后创建一个新的结果表。

这里有什么工具可以玩它？Access VBA 或 Visual Studio Express 就足够了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:00:49.223

如果这不是仅用于分析的编码解决方案，请使用 MS Access 中的查询设计窗口。Access 对于快速创建相当复杂的查询以及在 select 和 make table 之间切换特别强大。

[http://office.microsoft.com/en-ie/access-help/add-or-remove-a-table-or-query-in-the-query-design-grid-mdb-HP005187982.aspx](http://office.microsoft.com/en-ie/access-help/add-or-remove-a-table-or-query-in-the-query-design-grid-mdb-HP005187982.aspx)

# .net - Ninject 单例初始化

> ID：15029337
> 
> 赞同：3
> 
> 时间：2013-02-22T16:57:34.107
> 
> 标签：.net, singleton, ninject

我使用 Ninject 3.0.1.10 并创建了一个 Ninject 模块：

```
Public Class NinjectCustomModule
    Inherits NinjectModule

    Public Overrides Sub Load()
        'init
    End Sub

End Class 
```

现在让我们假设我的程序中有一个 Class A 的实例，并将它传递给模块的构造函数：

```
Public Class NinjectCustomModule
    Inherits NinjectModule

    Private _Obj As ClassA

    Public Sub New(ByVal Obj As ClassA)
        _Obj = Obj
    End Sub

    Public Overrides Sub Load()
        'init
    End Sub

End Class 
```

我知道如何初始化 A 类的单例：

```
Bind(Of ClassA).ToSelf().InSingletonScope() 
```

如何绑定 A 类的单例，**它指的是我已经拥有的实例**（在我的示例中为 _Obj）？

另外，如果 ClassA 是一个**接口**呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:02:03.863

尝试

```
Bind(Of ClassA).ToConstant(instanceOfClassA) 
```

# php - 如果请求标头中的 e-tag 或 last-modified，则 htacces 重定向

> ID：15029338
> 
> 赞同：0
> 
> 时间：2013-02-22T16:57:40.237
> 
> 标签：php, .htaccess, mod-rewrite, last-modified, etag

我试过四处寻找答案，但找不到任何我能理解的教程或文档，所以我什至不确定是否可能，但是；

如果上次修改日期或 etag 在请求标头中，我想重定向/重写 URL。就像是：

```
RewriteEngine On 
RewriteBase /

RewriteCond # Only if the request uri is 'images/1px.gif'
RewriteCond # And if an etag or last modified date is in the req. header
RewriteRule ^(.*)$  /304-this.php [L] 
```

请注意，即使这是可能的，如果这不是您建议的更好选择。

为了清楚起见，我也只希望在请求是针对`images/1px.gif`并且有 etag 或最后修改日期时触发此重定向。

我的理论是，如果图像已经在浏览器缓存中，它将与 etag 或最后修改日期一起发送，在这种情况下，我希望 PHP 处理 304 响应。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:18:14.713

您可以`%{HTTP:...}`在 a[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)中用于测试任何标头

```
RewriteCond %{HTTP:etag} . [OR]
RewriteCond %{HTTP:last-modified} .
RewriteRule images/1px.gif$ /304-this.php [L] 
```

# java - 空指针异常和动作监听器

> ID：15029339
> 
> 赞同：2
> 
> 时间：2013-02-22T16:57:45.903
> 
> 标签：java, swing, nullpointerexception, awt, actionlistener

我正在浏览我的简单游戏应用程序，将所有内容从 700 行精简到 177 行，以消除重复。当我尝试运行我的应用程序时，我被`Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException`抛出了。我知道这意味着什么（通过阅读[本文](https://stackoverflow.com/a/218510/2068709)），并且我知道这与我的工作方式有关，`actionListener`但我不知道具体*如何*。

我遵循了我在处理数组时遇到的所有教程，`JButtons`但肯定有一些小问题。`private JButton[][] blocks = new JButton[rows][cols]`正在正确声明，所以不是那样，我没有改变我`blocks[i][j].addActionListener(this)`以前版本的代码所做的事情，除了我用`block[i][j]`.

这是扔给我的东西：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at blox.Blox.game(Blox.java:105)
    at blox.Blox.access$000(Blox.java:25)
    at blox.Blox$1.run(Blox.java:173)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:727)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:697)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

这是我的代码：

```
public class Blox implements ActionListener {

  private final String gameVersion = "Blox - v1.0.2";
  private final int rows = 7;
  private final int cols = 7;

  // Board Inits
  private ImageIcon purpleBlock = new ImageIcon();
  private ImageIcon redBlock = new ImageIcon();
  private ImageIcon blueBlock = new ImageIcon();
  private ImageIcon greenBlock = new ImageIcon();
  private ImageIcon closeImage = new ImageIcon();
  private JButton[][] block = new JButton[rows][cols];
  private JPanel boardBg = new JPanel();

  // Error console init
  private JLabel errorMessage = new JLabel();
  private JPanel errorBg = new JPanel();
  private JButton closeError = new JButton();

  // Score/UI Inits
  private JButton resetBoard = new JButton("Reset Board");

  /**
   *  700 x 480 Frame Size
   *  Sets Up and displays initial scene.
   *
   */
  private void game() {

    // Initialize mainFrame
    JFrame mainFrame = new JFrame(gameVersion);
    Dimension minSize = new Dimension(700,480);
    mainFrame.setMinimumSize(minSize);
    mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainFrame.setLayout(null);
    mainFrame.setResizable(false);
    try {
      mainFrame.setContentPane(new JLabel(new ImageIcon(
          ImageIO.read(new File("bggrad.jpg")))));
    } catch (IOException e) {
      e.printStackTrace();
    }

    // Setup block Images
    try {
      purpleBlock.setImage(ImageIO.read(new File("purpleBlock.png")));
      redBlock.setImage(ImageIO.read(new File("redBlock.png")));
      blueBlock.setImage(ImageIO.read(new File("blueBlock.png")));
      greenBlock.setImage(ImageIO.read(new File("greenBlock.png")));
      closeImage.setImage(ImageIO.read(new File("close.jpg")));
    } catch (IOException e) {
      e.printStackTrace();
    }

    // Sets up error message panel
    // Only displayed if error occurs on ActionListener
    errorMessage.setText("");
    errorMessage.setForeground(Color.black);
    Font newLabelFont = new Font(errorMessage.getFont().getName(),
        Font.BOLD,errorMessage.getFont().getSize());
    errorMessage.setFont(newLabelFont);
    closeError.setIcon(closeImage);
    closeError.setBounds(0,0,24,24);
    errorBg.setBounds(0,430,700,30);
    errorBg.setBackground(Color.lightGray);
    errorBg.add(closeError);
    errorBg.add(errorMessage);
    errorBg.setVisible(false);

    // Sets up Score/UI Portions of Screen
    resetBoard.setBounds(60,363,175,25);
    resetBoard.setVisible(true);
    resetBoard.addActionListener(this);

    // Set Up Board
    boardBg.setLayout(new GridLayout(rows,cols));
    boardBg.setBounds(300,50,350,350);
    for(int i=0; i<rows; i++) {
      for(int j=0; i<cols; j++) {
        block[i][j].setIcon(randomizer());
        block[i][j].addActionListener(this);
        boardBg.add(block[i][j]);
      }
    }

    mainFrame.getContentPane().add(boardBg);
    mainFrame.getContentPane().add(errorBg);
    mainFrame.getContentPane().add(resetBoard);

    //mainFrame.pack();
    mainFrame.setVisible(true);
  }

  /**
   *  Checks onClick event for which JButton was clicked
   *  and changes JButton.setIcon() accordingly.
   *
   *  @param  none
   *  @return none
   *  @see    java.awt.event.*
   *  @see    JButton
   *  @see    setIcon()
   *  @see    getIcon()
   *
   */
  public void actionPerformed(ActionEvent e) {

    if(e.getSource()==resetBoard) {
      System.out.println("Resetting");
      gameReset();
    }

    if(e.getSource()==errorBg || e.getSource()==errorMessage) {
      errorBg.setVisible(false);
    }
  }

  public void gameReset() {

    for(int i=0; i<rows; i++) {
      for(int j=0; i<cols; j++) {
        block[i][j].setIcon(randomizer());
      }
    }
  }

  public ImageIcon randomizer() {

    Random r = new Random();
    int rNum = r.nextInt(4);

    if(rNum==0) {
      return purpleBlock;
    } else if(rNum==1) {
      return redBlock;
    } else if(rNum==2) {
      return greenBlock;
    } else {
      return blueBlock;
    }
  }

  public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {
      public void run() {
        new Blox().game();
      }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T17:05:05.680

问题可能来自您的循环：

```
 for(int i=0; i<rows; i++) {
        for(int j=0; i<cols; j++) {
            block[i][j].setIcon(randomizer());
            block[i][j].addActionListener(this);
            boardBg.add(block[i][j]);
        }
    } 
```

`block[i][j]`未初始化。首先像这样初始化它们：

```
 for(int i=0; i<rows; i++) {
        for(int j=0; i<cols; j++) {.
            block[i][j] = new JButton();
            block[i][j].setIcon(randomizer());
            block[i][j].addActionListener(this);
            boardBg.add(block[i][j]);
        }
    } 
```

# c# - 使用图像会导致周围出现奇怪的白框

> ID：15029342
> 
> 赞同：0
> 
> 时间：2013-02-22T16:57:54.403
> 
> 标签：c#, winforms, button

我试图用图像作为按钮在 C# 中创建一个按钮，我真的不想使用图片框，因为我需要按钮的“标签”位，因为按钮的文本不在图像中，这就是它的样子

![播放按钮图片](../Images/229f84d37c939d8f32a52615443849e6.png)

如果有人能帮我修复那个白框，将不胜感激，谢谢！

编辑：我找到了导致它的原因，但仍然没有修复 :( 实际表单上的 BackColor 是白色的来源，但您不能将表单的 BackColor 设置为透明：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:03:39.510

我认为`Background.Color = Transparent`如果 WinForms 应该修复它。

**更新**
如果您已将边框和背景属性设置为透明，请仔细检查白色边框在实际图形中是否透明？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:03:48.637

您的图像必须具有透明背景。另请参阅@IAbstract 的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:21:35.567

[正如我在这里](https://stackoverflow.com/questions/9399215/c-sharp-winforms-custom-button-unwanted-border-when-form-unselected/9400099#9400099)回答删除边框一样，您应该将其设置`FlatAppearance.BorderColor`为透明。完全删除边框的整个代码如下所示：

```
customButton.TabStop = false;
//it's the best thing set flatstyle to flat when dealing with a custom button
customButton.FlatStyle = FlatStyle.Flat; 
customButton.FlatAppearance.BorderSize = 0;
//set the border color to transparent by setting the alpha to 0 (it doesn't support Color.Transparent)
customButton.FlatAppearance.BorderColor = Color.FromArgb(0, 0, 0, 0); 
```

# javascript - 使用带有 javascript 客户端的多个下拉框更新单个文本字段中的文本

> ID：15029345
> 
> 赞同：0
> 
> 时间：2013-02-22T16:58:05.940
> 
> 标签：javascript

编辑：好的，我真的很想得到这个，所以我决定简化我需要的东西。我有一个 onclick 更新文本字段的文本框。现在，我需要它做的是，当他们单击第二个下拉菜单时，它将更新同一文本字段中的一部分文本。希望这可以帮助。

```
 <script type="text/javascript"><!--    

            function OnSelectionChanged(listBox) {
                var textInput = document.getElementById("dn");
                textInput.value = listBox.value;
            }

    //--></script>

</head>
<body>
<ul id="menu">
    </ul>
    <div id="main" class="view">
        <h1>Text</h1>
    <div id="intro"><h5>Text</h5>
    <div id="content"><h2>Text:</h2>
    <p>Text</p>
    </div>
  <form method="POST" action="submit" name="myForm"><fieldset>
   <legend>Text</legend>

   <label>[<a href="help.html" onclick="openWin(this.href); return false" title="Disposition Details Page">?</a>]
    Disposition Code<br />
    <select size="1" name="disposition" id="drp_dwn" onchange="OnSelectionChanged (this)">
     <option value="-1" selected>&mdash;&mdash;Select one&mdash;&mdash;</option>
     <option value="Text ">190</option>
     <option value="191">191</option>
     <option value="192">192</option>
     <option value="195">195</option>
     <option value="270">270</option>
     <option value="300">300</option>
     <option value="340">340</option>
     <option value="350">350</option>
     <option value="370">370</option>
     <option value="380">380</option>
     <option value="381">381</option>
     <option value="382">382</option>
     <option value="383">383</option>
     <option value="384">384</option>
     <option value="400">400</option>
     <option value="401">401</option>
     <option value="402">402</option>
     <option value="403">403</option>
    </select>
   </label>
      <label>[<a href="help.html#input3" onclick="openWin(this.href); return false" title="Help on filling out input #3.">?</a>]
    Cause Code<br />
    <select size="1" name="cause">
     <option value="-1" selected>&mdash;&mdash;Select one&mdash;&mdash;</option>
     <option value="">Cause - 190</option>
     <option value="B">Option B</option>
     <option value="C">Option C</option>
    </select>
   </label><br /><br />

   <label><!--[<a href="help.html#input7" onclick="openWin(this.href); return false" title="Help on filling out input #7.">?</a>] -->
    Disposition Narrative
    <textarea id="dn" rows="8" cols="30" name="dn"></textarea>
   </label> 
```

我仍然习惯于堆栈溢出如何让我们格式化代码，但希望你们能够很好地阅读它以帮助找到解决方案。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:20:04.557

在这一点上我能真正给你的是

1.  将 onchange 处理程序附加到您的下拉列表中。您的处理程序将添加/替换文本。
2.  当 dd2 和 dd3 更改时，使用正则表达式替换文本。

如果您可以提供有关要替换的文本的更多详细信息，那么有人将能够帮助您使用正则表达式。

# iphone - 如何在 iPhone 上播放一排数字作为音频？

> ID：15029348
> 
> 赞同：1
> 
> 时间：2013-02-22T16:58:11.313
> 
> 标签：iphone, objective-c, audio-streaming, waveform, audiotoolbox

我正在查看脑电图传感器的输出。该数据以大约 200Hz 的原始格式显示在屏幕上。我读到在过去，可以将这样的输出连接到扬声器并听到波形，而不是看到它。所以我很感兴趣是否可以用现代 iPhone 复制这个实验。**如何获取以图形形式显示的波形并将其打包成可以通过 iPhone 的扬声器实时播放？**换句话说，我希望通过某种音频播放器流式传输 EEG 数据，并且需要知道如何从这些数据中动态创建音频包。

这是原始波形，每秒显示 200 个数据点 (200Hz)

![在此处输入图像描述](../Images/dce98d32c4db1b1de833c3d2ea72752b.png)

在清理和处理波形后，我对它与波形平均值的偏差感兴趣。在这种情况下，我认为这可以作为正弦波的增加/减少幅度来播放，这可能更容易。

![在此处输入图像描述](../Images/10e05606f33a484323e28ffe93b471de.png)

谢谢您的意见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T21:05:04.353

这是一个关于通过 CoreAudio 为输出生成正弦音的好教程：

[http://www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html](http://www.cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html)

RenderProc 是您正在使用的代码，在示例中，他们使用 NSSlider 来更改频率，您只需将信号数据输入它即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:47:41.970

我为响应信号幅度变化而播放声音的一个想法是将幅度划分为一组离散的值带（例如 0-10、10-20、20-30 等），然后分配每个乐队的声音。然后使用音频服务或系统声音，可以为每个频段循环一个独特的声音片段。

# jquery - 如何在li元素右侧顶部设置删除按钮？

> ID：15029349
> 
> 赞同：0
> 
> 时间：2013-02-22T16:58:24.453
> 
> 标签：jquery, html, css

我正在尝试使用删除按钮制作 li 元素，但我找不到解决方案

我想要的是：

![在此处输入图像描述](../Images/ddee0db5b893656fb5f185602292b9b8.png)

这里**红色矩形是删除按钮**

html 正在尝试的是：

```
 <li id="liRightDescriptions">
    <span>
    Descriptions
    <img src="../Images/RemoveButton.ico">
    </span>
    </li> 
```

更多：我需要**在 MouseOver 上显示删除按钮**，当我点击那里时 jquery 查询事件应该被触发，并且在**文本**上也是，

所以我想，我不想将删除图像设置为背景

**这是我的 html**：http: [//jsfiddle.net/2h78A/](http://jsfiddle.net/2h78A/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:37:41.370

HTML（可以用任何文本或图像替换跨度中的 x）

```
<ul>
<li><span>x</span>Text 1</li>
<li><span>x</span>Text 1</li>
<li><span>x</span>Text 1</li>
<li><span>x</span>Text 1</li>
<li><span>x</span>Text 1</li>
<li><span>x</span>Text 1</li>
</ul> 
```

CSS

```
ul{
    width:160px;
}
li{
    position:relative;
    padding:5px 10px;
    background:#ccc;
    border-radius:3px;
    margin:3px;
}
li:hover span{display:block;}
li span{
    display:none;
    padding:3px;
    line-height:8px;
    cursor:pointer;
    position:absolute;
    right:0px;
    top:0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:02:34.493

对于按钮位置使用：

```
.removeImg {
    float: right;
} 
```

或者

```
.liRightDescriptions span {
    position: relative;
}

.removeImg {
    position: absolute;
    top: 0;
    right: 0;
} 
```

在悬停时显示/隐藏：

```
$('.liRightDescriptions').hover(function() {
    $('.removeImg').fadeIn(500);
}, function() {
    $('.removeImg').fadeOut(500);
}); 
```

要隐藏`li`点击：

```
$('.removeImg').click(function() {
    $(this).parent('.liRightDescriptions').hide(500);
    /* you could also remove the element altogether here if needed */
}); 
```

请注意，您应该使用类而不是 id，因为元素不是唯一的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T17:03:36.370

```
black-square {
position: relative
}

delete-img { 
position:absolute;
top:2px;
right: 2px;
} 
```

# gwt - 让 IntelliJ 12 将 GWT 输出放在正确的位置

> ID：15029352
> 
> 赞同：0
> 
> 时间：2013-02-22T16:58:32.710
> 
> 标签：gwt, intellij-idea

出于我必须要求您接受的原因，我需要构建我的 GWT 应用程序，以便所有输出都可以在“/Foo/bar/1.0”而不是正常的“/”中获得。

具体来说，我需要在 IntelliJ 中编译我的 GWT 应用程序的结果如下所示：

```
~/.IntelliJIdea12/system/gwt/Project.534b2263/Test.ef6cd448/run/www/
  - Foo
    - bar
      - 1.0
         - Testing.html
         - Testing.css
         - (other files in here too, like favicon.ico, etc...)
         - WEB-INF
           - (contents left out here)
         - testing
           - testing.devmode.js
           - testing.nocache.js 
```

我似乎能做的最好的事情就是将 Testing.html、Testing.css 等放在正确的位置。我通过将我的 GWT 模块的“输出相对路径”设置为“/Foo/bar/1.0/”*并将*我的 Web 资源目录的“相对于 DeploymentRoot 的路径”设置为相同的“/Foo/bar/1.0/”来得到这个.

但是，包含 testing.devmode.js 和 testing.nocache.js 的“测试”目录似乎在 ~/.IntelliJIdea12/system/gwt/Project/534b2263/Test.ef6cd448/run/www/testing 目录中结束. 显然，这意味着当 Testing.html 尝试包含 testing/testing.nocache.js 时，找不到它，并且我的 GWT 应用程序无法运行。

希望我只是错过了一些简单的东西，但我已经挖了好几个小时了......

对于那些可能感兴趣的人，我创建了一个示例项目来说明问题，并将它与同样的基本问题一起发布在 IntelliJ 论坛上： http: [//devnet.jetbrains.com/thread/442050](http://devnet.jetbrains.com/thread/442050)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:42:53.857

（从 IntelliJ 论坛复制）如果您需要将 GWT 编译器输出放在某个地方，您需要创建一个工件（文件 | 项目结构 | 工件）并向其中添加“GWT 编译器输出”元素。您也可以将“Web facet resources”元素放到同一个工件中。如果您需要将 GWT 输出放置到工件输出根目录下的子文件夹中，请使用工件编辑器中“输出布局”树中的“新建文件夹”操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:05:12.843

只是为了将来参考和容易找到这个答案，最终结果（参见[http://devnet.jetbrains.com/thread/442050](http://devnet.jetbrains.com/thread/442050)）无法控制 GWT 编译器的输出位置。

实际上这意味着（无论如何对于我的项目）是我必须进行运行时检查： GWT.isProdMode() 然后从不同位置加载资源。

# gwt - 如何使用 GWT 2.5 将自定义单元格类应用于 CellTable？

> ID：15029354
> 
> 赞同：0
> 
> 时间：2013-02-22T16:58:35.577
> 
> 标签：gwt, cell, celltable

如果我定义了一个扩展 AbstractCell 的自定义单元格，我如何在 CellTable 中使用我的自定义单元格？

我的自定义单元格由两个标签和一个图像组成，并由一个包含标签和图像值的联系人对象填充。

如何定义一个引用我的自定义单元格的列以添加到我的 CellTable？代码片段：

抽象单元格小部件：

```
public class ContactCell extends AbstractCell<String> { ... } 
```

数据类：

```
public class Contact  {
    String first;
    String last;
    String photo_url;
} 
```

构建 CellTable 的代码：

```
CellTable<Contact> results = getView().getContactsTable();
Column<Contact, SOMECLASSHERE> col 
    = new Column<Contact, SOMECLASSHERE>(new SOMECLASSHERE()) {
        @Override
        public SOMECLASSHERE getValue(Contact object) {
            // TODO Auto-generated method stub
            return WHAT?;
        }
    };
} 
```

这是一个正确的方法吗？如果是这样，我如何使用我的抽象单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:41:12.213

UiBinder always is an implementation detail, be it for a widget or a cell. Users of the class only see a widget or cell.

For instance, could you tell from their API that [`NativeHorizontalScrollbar`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/NativeHorizontalScrollbar.html), [`NotificationMode`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/NotificationMole.html) or [`ValueBoxEditorDecorator`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/editor/ui/client/ValueBoxEditorDecorator.html) use UiBinder? Would it change anything if they were not?

# dynamics-crm-2011 - Microsoft.Crm.DuplicateDetection：Microsoft.Crm.HasDuplicatesPlugin

> ID：15029360
> 
> 赞同：1
> 
> 时间：2013-02-22T16:58:41.760
> 
> 标签：dynamics-crm-2011

在将潜在客户限定为机会的同时，我们引入了一个插件，该插件将所有潜在客户联系人附加到机会。基本上插件代码将更新联系人，并插入机会 id。但是有一个重复的联系人规则。因此，在排位赛中，即使没有重复接触（不满足重复规则），这种重复检测也会触发并回滚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:00:54.640

罪魁祸首是“NULL”。如果任何两个联系人列（在重复检测规则中使用）具有 NULL 值，则重复检测规则将触发并抱怨为重复。

```
FullName    AccountIDname   Lead id
Kilp Foo    NULL             Unknown
Kilp Foo    NULL             Foo LLC 
```

* * *

在上面的示例中，两个帐户 ID 名称都为空。更新联系人时，重复检测规则（全名不应相等且 accountidname 不应相等）触发并警告为重复。因此，为了避免需要至少为一条记录插入帐户 ID 名称。

```
FullName    AccountIDname   Lead id
Kilp Foo    FooAccount       Unknown
Kilp Foo    NULL             Foo LLC 
```

# node.js - Node Express 降价循环

> ID：15029361
> 
> 赞同：0
> 
> 时间：2013-02-22T16:58:43.000
> 
> 标签：node.js, express, markdown

如何在我的翡翠模板中循环对象并输出降价作为循环的一部分？

# 这是我的模板文件

```
block content
  section.content
    h1= title
    p Welcome to #{title}
    ul
      each post in posts
        li!= :markdown
          post 
```

# 这是一个示例帖子对象

```
{
    "post1": "#Hey\nHow are you?",
    "post2": "#Hello\nworld"
} 
```

但我似乎无法让降价在循环内工作，我已经阅读了文档并尝试了谷歌搜索，但似乎无法找到不需要加载另一个库的任何内容当 Jade 已经拥有它时，视图中的降价。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:13:17.067

我对这个问题做了更多的研究，据我了解，这是因为：

## ：降价

在不同时间编译以评估脚本，例如 my != post

## 解决方法是：

由于我永远无法在我的 post 对象之后编译 :markdown，因此我将 node-markdown 模块注入到我的视图中，就像这样。

```
var MarkDown = require('node-markdown').MarkDown;
res.render('blog', {
    "title": name,
    "md"   : Markdown,
}); 
```

在我看来，我使用了这个

```
each post in posts
  li!= md(post) 
```

这一切似乎都奏效了，我把标题 var 从我的例子中去掉了，因为它并不是修复的一部分，只是美观的。

# html - 悬停时更改部分父div的背景颜色

> ID：15029367
> 
> 赞同：1
> 
> 时间：2013-02-22T16:59:00.910
> 
> 标签：html, css, twitter-bootstrap

假设我有一个带有链接的导航栏：

```
 <div class="navbar-inner navlinks">
                <ul class="nav">
                    <li><a class="brand" href="#"><img src="img/logo.png" /></a></li>
                    <li> <a href="#">Accueil</a></li>
                    <li> <a href="#">Ouvrez</a></li>
                    <li> <a href="#">Decouvrir</a></li>
                </ul>
            </div> 
```

这是使用 Twitter Bootstraps 制作的，因此链接位于导航栏容器内，并且都作为块元素向左浮动，正如您在典型导航栏中看到的那样。整个导航栏的背景颜色为我`navlinks`班级中定义的蓝色。它的高度明显高于链接的文本。

我想要的是链接在悬停时更改其整个“区域”的背景颜色。现在，当我添加悬停选项和背景颜色更改时，它只会更改链接所在文本上方的背景区域，这几乎不会引起注意。我希望它还可以更改下一个链接之前文本上方、下方和右侧的空间颜色。我认为 twitter 将其视为块元素会做到这一点，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:34:09.497

或者，您可以通过将填充添加到“a”标签而不是“li”来定义导航的高度，然后使用常规的#menu a:hover。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:10:14.880

我不确定您真正要问的是什么，但是如果您要向锚点添加悬停，`a:hover`也许您只需要在链接上使用悬停`li:hover{}`

# jquery - iOS 6 上的移动 Safari 下的 Highcharts 冻结

> ID：15029368
> 
> 赞同：4
> 
> 时间：2013-02-22T16:59:01.713
> 
> 标签：jquery, highcharts

当显示工具提示时，Highcharts 可以在 iOS 6 上完全冻结 Safari。我的应用程序在单个页面上显示多个柱形图，并且可能同时显示多个工具提示。在某些时候，当用户单击一列（意图查看该列的工具提示）时，Safari 完全冻结，必须被杀死。

当工具提示显示在一个图表中并且用户单击不同图表中的列时，似乎会出现此问题。当用户单击同一图表中的不同列时，也会发生这种情况。

补充说明：

*   图表使用类别而不是时间线
*   每个图表显示 4-5 列
*   即使只显示两个图表也会出现问题
*   图表在桌面（Google Chrome、Firefox）上正常工作
*   Highcharts 版本为 v2.3.5

这里似乎描述了一个类似的问题： http://highslide.com/forum/viewtopic.php?f=9&t= [24968#p92497](http://highslide.com/forum/viewtopic.php?f=9&t=24968#p92497)

但是，建议的解决方案对我不起作用，因为我的应用程序没有使用“minRange”（以前的“maxZoom”），也没有将“minRange”/“maxZoom”明确设置为 Highcharts 源代码中的任何常量。

我想 Safari 会因为 CPU 使用率高而冻结。但是，我知道没有办法测试它。我没有在模拟器上测试或在 iOS 上调试的 Mac。

# mysql - 赞普；Apache 80 端口繁忙

> ID：15029376
> 
> 赞同：1
> 
> 时间：2013-02-22T16:59:31.147
> 
> 标签：mysql, apache, xampp

我遇到端口问题。

每当我启动 Apache 时，它​​都会给我这个错误：

> 忙碌 - Apache 已启动 [端口 80]

当我启动 Mysql 然后出现以下错误：

> 忙 - 错误：Mysql 服务未启动 [-1]

请任何人告诉我如何解决这个问题。

等待回复。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-27T06:38:41.987

打开`cports.exe`（[http://www.nirsoft.net/utils/cports.html](http://www.nirsoft.net/utils/cports.html)），在列`Local Port`中找到端口 80。因此，您将知道哪个程序使用该端口并且您将能够杀死它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-01T01:14:51.730

对于大多数人来说，80 端口默认被 Skype 占用。只需卸载 Skype 即可释放 80 端口。然后 Apache 应该可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T11:39:32.140

Try to run this below command in cmd prompt

`netstat -ano|find "port no"`

Eg:

`netstat -ano|find "3306"`

> TCP 0.0.0.0:3306 0.0.0.0:0 LISTENING 5164
> 
> TCP [::]:3306 [::]:0 LISTENING 5164

You could even use the pid number and check in windows task manager who is utilizing these pid so that you would come to know the exact process name

Please provide error log file if possible.

Major issue comes if you are using skype . Just change the connection port no and restart skype and try to start apache

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-22T17:05:51.483

你应该搜索然后你问问题，因为这个问题已经被问过了。你需要去 C:\xampp\apache\conf 编辑 httpd.conf 文件并改变

听 80

至

听 8081 或其他号码，然后重新启动 apache。

其他链接 [配置 apache 监听 80 以外的端口](https://stackoverflow.com/questions/3940909/configure-apache-to-listen-on-port-other-than-80)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-28T07:34:52.350

如果您在本地计算机上运行 Skype，它也使用端口 80。所以不能为 MySQL 分配 80 端口。解决方案是停止在 Skype 上运行，然后启动您的 xampp 服务器。如果它也不起作用，请尝试卸载 Skype，然后再次安装您的 xampp 服务器。这个时候大概可以运行MySQL了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-22T17:11:48.467

编辑 httpd 文件

```
#Listen 12.34.56.78:80
Listen 80 
```

像这样

```
#Listen 12.34.56.78:80
Listen 8080 
```

只要确保您使用 80 以外的任何端口即可。

检查是否有任何 mysqld.exe 实例正在从任务管理器运行。如果是这样，请杀死它并从 xampp 控制面板启动它。

# php - 我如何像逃避输出一样逃避 json 以防止 XSS

> ID：15029377
> 
> 赞同：0
> 
> 时间：2013-02-22T16:59:33.413
> 
> 标签：php, jquery, json

当您转义输出时，您可以这样做以防止 XSS：

```
 echo htmlentities( $variable ); 
```

我们是否也需要转义 json 对象以防止 XSS？：

```
 echo htmlentities( json_encode( $variable ) ); 
```

还是没有必要，请有人告诉我。如果不需要，请解释为什么？

查询：

在ajax的成功部分内：

它将在 $.each 循环中，内容将是：

```
 $('#textbox').attr( 'value', variable ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:54:39.073

> 是的，这是输入类型文本（文本框 html）的正确值属性。

您需要运行它`htmlspecialchars`（您也可以使用`htmlentities`，但这有点过分了）。

在 HTML 中具有特殊含义的字符（例如`"`和`'`）可能会出现在 JSON 文本中，并且（如果未转义）将充当由匹配字符分隔的属性中的“属性值结束”字符。

```
<input value="{ "foo": 1 }">
                 ^^^^^^^^^^
                 this is an error 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:01:33.750

不，JSON 编码的输出是安全的。所有可能有害的字符或输入类型都被正确转义或引用。

# jquery - Bootstrap - 所见即所得 HTML5 编辑器不更新底层文本区域

> ID：15029381
> 
> 赞同：2
> 
> 时间：2013-02-22T16:59:46.687
> 
> 标签：jquery, twitter-bootstrap, wysihtml5

我正在尝试在我的应用程序中使用 Bootstrap-WYSIWYG ( [http://jhollingworth.github.com/bootstrap-wysihtml5/](http://jhollingworth.github.com/bootstrap-wysihtml5/) )。我将 textarea 注入页面，然后实例化编辑器。到目前为止，一切都很好。但它没有更新底层的文本区域，我不知道为什么。我创建了一个 JSFiddle 来演示这个问题：http: [//jsfiddle.net/8ckgf/2/](http://jsfiddle.net/8ckgf/2/)

如果有人能明白为什么这不起作用，我将不胜感激。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Bootstrap 101 Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet" media="screen">
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-button.js"></script>

    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-button.js"></script>
        <script src="http://xing.github.com/wysihtml5/dist/wysihtml5-0.3.0.js"></script>
        <script src="http://jhollingworth.github.com/bootstrap-wysihtml5/src/bootstrap-wysihtml5.js"></script>

<script>
$(document).ready(function(){
    $('.log').append("Setting up");
    var uuid = "abc123";
    var stuff = '<textarea id="f'+uuid +'" class="wysiwyg"  >Some html</textarea>';

    $('#holder').html(stuff);

    $('#f'+uuid).on('change',function(){
        var val = $(this).val();
        $('.log').append(val);    
    });

    $('#f'+uuid).wysihtml5();
    $('#f'+uuid).change(function(){
        $('.log').append("Value has changed");
    });
});
</script>
  </head>
  <body>
    <h1>WYSIWYG Test</h1>
      <div id="holder"></div>
    <div class="log"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T12:28:06.650

好的，最后我自己解决了这个问题。出于某种原因，WYSIHTML5 项目周围的 Bootstrap 包装器似乎不会触发针对原始文本区域的事件。相反，您需要在初始化编辑器时声明事件。我已经相应地更新了 JSFiddle。

固定版本：

```
$('textarea').wysihtml5({
   "events": {
      "blur": function() { 
         var val = $('textarea').val();
         $('.log').append(" From blur "+val);
      }
   }

}); 
```

作为记录，如果其他人遇到同样的事情，一个简单的解决方法是从您传递到实例的处理程序中简单地触发下面的文本区域上的“更改”，所以像这样：

```
$('textarea').wysihtml5({
   "events": {
      "blur": function() { 
         $('textarea').trigger('change');
      }
   }

}); 
```

老实说，这就是我希望控制从一开始就起作用的方式。

# python - `if`和`def`下的缩进代码在Python中都称为块吗？

> ID：15029383
> 
> 赞同：1
> 
> 时间：2013-02-22T16:59:47.263
> 
> 标签：python, scope, block, terminology, indentation

在 Python 中，关键字[like](http://docs.python.org/2/library/keyword.html)引入了一个新的[范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)。其他人，喜欢或​​不喜欢 - 他们使用封闭代码的范围。（范围解析[在范围规则的简短描述中进行了解释？](https://stackoverflow.com/questions/291978/)。）`def``class``if``for`

在这两种不同类型的关键字下“缩进”的代码行的正确术语是什么？

例子：

```
def foo():
    do_bar() # indent type 1
    do_another_bar() # indent type 1 
```

示例 2：

```
if True:
    do_something() # indent type 2
    do_more_things() # indent type 2 
```

缩进“类型 1”和“类型 2”都称为“代码*块*”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:12:29.387

## 复合语句和套件

[Python 中复合语句](http://docs.python.org/2/reference/compound_stmts.html)的语法将缩进的代码块定义为“套件”。例如：

```
if_stmt ::=  "if" expression ":" suite
             ( "elif" expression ":" suite )*
             ["else" ":" suite] 
```

因此，在一个实际示例中，例如：

```
if True:
    print "It's true!" 
```

包含打印语句的行（以及该缩进级别内的任何其他行）将是一个套件。

如果将每个缩进级别视为一个代码块会有所帮助，那很好。但是，Python 语法将其称为套件。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:02:56.947

一般来说，是的，在 a 下缩进的任何文本部分`<keyword-clause>:`都称为“块”。

C/C++/Java/JavaScript/Perl/PHP/etc 中花括号内的任何文本部分也是如此。缩进是 Python 的花括号。

# android - Android 在横屏时在完成（）之后调用 onCreate（）

> ID：15029389
> 
> 赞同：0
> 
> 时间：2013-02-22T17:00:18.317
> 
> 标签：android, landscape, oncreate, portrait

我有一个在其 onCreate 方法中启动 Vibrator 系统服务的活动，然后当用户按下按钮时，它会取消振动器，然后调用 finish() 来关闭活动。

这个活动是通过 AlarmManager 启动的，所以当它关闭时，它会将用户返回到他们当前打开的任何应用程序（不一定是我的）。

我遇到的问题是，如果我的活动处于横向模式，并且当活动关闭时用户被带到不支持横向的屏幕（例如主屏幕），我的应用程序切换到纵向并调用 onCreate( ) 在实际关闭我的屏幕之前。所以导致这个问题的步骤如下......

*   活动以纵向模式启动
*   onCreate 方法被调用，这将启动振动器
*   用户将手机旋转到横向模式
*   再次调用 onCreate，但因为 onSaveInstanceState 不为空，我可以跳过再次启动振动器
*   用户按下按钮关闭屏幕
*   我打电话给 vibrator.cancel()
*   我打电话给完成（）
*   因为用户将被带回不支持横向模式的屏幕，所以我的活动调用 onCreate()
*   savedInstanceState 等于 null，所以振动器重新启动
*   我的应用程序已关闭，振动器仍在运行

目前我能想到的唯一解决方法是让我的活动只支持纵向模式，但如果可以的话，我想避免这种情况。有谁知道在我调用完成（）后可以防止调用 onCreate（）的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:18:08.020

你为什么不调用方法

`onPause()`或者`onStop()`在这个方法里面调用`vibrator.cancel()`

当您的应用不再可见时，总是会调用 onStop()。

看看[这个](http://developer.android.com/reference/android/app/Activity.html)流程图

# java - 按钮侦听器从列表中添加和删除对象

> ID：15029393
> 
> 赞同：1
> 
> 时间：2013-02-22T17:00:39.307
> 
> 标签：java, swing, compiler-errors, awt, actionlistener

我正在尝试为可以使用另一个选项卡中的宠物类型的小程序创建一个选项卡。此选项卡左侧有可用的宠物类型，右侧有添加的宠物类型。用户可以通过在左栏中选择宠物然后单击添加按钮将宠物添加到右栏中，或者通过选择宠物并单击删除按钮从右栏中删除宠物。我不知道如何让程序做到这一点，并不断出错。这是我的代码。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
import java.util.*;

public class SelectPanel extends JPanel
 {
   private Vector petList, selectList;
   private Panel bPanel, nPanel;
   private JLabel sPets, aPets, nPets;
   private int numPets = 0;
   private JButton addPet, remove;
   private JList petsAvail, petTypes;
   private JScrollPane sPane, sPane2;

   public SelectPanel(Vector petList)
     {
      this.petList = petList;
  this.setLayout(new BorderLayout());

  bPanel = new Panel();
  nPanel = new Panel();
  nPanel.setLayout(new GridLayout(1,2));
  bPanel.setLayout(new GridLayout(2,1));

  petTypes = new JList(petList);
  petTypes.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  sPane = new JScrollPane(petTypes);

  selectList = new Vector();
  petsAvail = new JList(selectList);
  petsAvail.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  sPane2 = new JScrollPane(petsAvail);
  selectList.add(0, "Selected pet(s)");

  aPets = new JLabel("Available pet(s)");
  nPets = new JLabel("Selected pet(s)");
  nPets = new JLabel("The number of selected pets:" + numPets);
  addPet = new JButton("Add");
  remove = new JButton("Remove");

  add(petsAvail, BorderLayout.EAST);
  add(petTypes, BorderLayout.WEST);
  add(nPanel, BorderLayout.SOUTH);
  nPanel.add(nPets);
  add(bPanel, BorderLayout.CENTER);
  bPanel.add(addPet);
  bPanel.add(remove);

  addPet.addActionListener(new ButtonListener());
  remove.addActionListener(new ButtonListener());

 // orgranize components for the panel

 }

 public void updatePetList()
  {
        petTypes.updateUI();
        //This method can refresh the appearance of the list of pets
        //by calling updateUI() method for the JList.
        //It can be called from the CreatePanel class whenever a new pet type
        //is added to the vector and the JList appearence needs to be refreshed.
  }

 private class ButtonListener implements ActionListener
  {
       public void actionPerformed(ActionEvent event)
        {
            Object which = event.getSource();

        if(which == addPet){
            for (int p = 1; p < selectList.size(); p++){
                boolean check = false;
                String selectedPet =(String) petList.getSelectedValue();
                String petCheck =(String) selectList.get(p);
                if(selectedPet.equals(petCheck)){
                    check = true;
                    break;
                } else if(added == false){
                    petsAvail.add(selectedPet);
                    petsAvail.updateUI();
                    numPets++;
                }
            }
        } else if (which == remove){

            numPets--;
        }

        //When the added button is pushed, the selected pet
        //should be added to the right list and the number of
        //selected pets is incremented by 1.
        //When the remove button is pushed, the selected pet
        //should be removed from the right list and the number of
        //selected pets is decremented by 1.
        //
        //Be careful for the cases when no item has been selected.
    }
  } //end of ButtonListener class

} //end of SelectPanel class 
```

任何帮助将不胜感激。

错误是：

```
C:\Users\[Redacted]\Desktop\Java\SelectPanel.java:83: error: cannot find symbol
                String selectedPet =(String) petList.getSelectedValue();
                                                    ^

 symbol:   method getSelectedValue()
  location: variable petList of type Vector
C:\Users\[Redacted]\Desktop\Java\SelectPanel.java:89: error: no suitable method found for add(String)
                        petsAvail.add(selectedPet);
                                 ^

method Container.add(Component,Object,int) is not applicable
      (actual and formal argument lists differ in length)
    method Container.add(Component,Object) is not applicable
      (actual and formal argument lists differ in length)
    method Container.add(Component,int) is not applicable
      (actual and formal argument lists differ in length)
    method Container.add(String,Component) is not applicable
      (actual and formal argument lists differ in length)
    method Container.add(Component) is not applicable
      (actual argument String cannot be converted to Component by method invocation conversion)
    method Component.add(PopupMenu) is not applicable
      (actual argument String cannot be converted to PopupMenu by method invocation conversion)
Note: C:\Users\[Redacted]\Desktop\Java\SelectPanel.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
2 errors

Tool completed with exit code 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:15:15.737

您正在尝试调用根本不存在的方法，而编译器正在抱怨是正确的。您的 petlist 是一个 Vector 变量，如果您查看 Vector API，您将看到可用于此类型的方法。该方法`getSelectedValue()`不是其中之一，对于 Vector 来说真的没有什么意义。

同样，Vector 也没有`add(...)`方法。同样，请非常熟悉[Java API](http://docs.oracle.com/javase/7/docs/api/)，因为它有助于防止您犯此类错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:15:55.630

如果我正在编写类似的代码，我可能会使用 ArrayLists 而不是 Vectors。如果你有调试器，最好调试代码，这样你就可以看到每一行代码在做什么，并找出它在什么时候失败。有时，错误代码在确定问题时并不可靠。

# design-patterns - 应捕获日期/时间的哪一层应用程序

> ID：15029395
> 
> 赞同：0
> 
> 时间：2013-02-22T17:00:39.883
> 
> 标签：design-patterns

我想知道在哪里捕获日期信息的最佳实践/模式/意见是什么。

那会在表示层中并作为事务元数据的一部分发送到服务器吗？还是在服务器上创建的？

我的应用程序要求用户在一个国家/地区创建“交易”。其他人应该能够看到在另一个国家/地区创建交易的当地时间。

目前我正在业务逻辑层中捕获日期。如果我在数据访问层中捕获它，我想我会得到同样的错误结果。

# 另一种说法是更好的：

## 服务器端

```
[WebMethod()]
public TransactionItem SaveTransaction(int ID)
{
    TransactionItem transaction = new TransactionItem();
    transaction.ID = ID;
    transaction.TimeRequest = DateTime.Now; //<-- thinking this is my problem.
    new TransactionDAL().SaveTransaction(transaction);
    return transaction;
} 
```

# 或者

## 客户端

```
[WebMethod()]
public TransactionItem SaveTransaction(int ID, DateTime TimeRequest)
{
    TransactionItem transaction = new TransactionItem();
    transaction.ID = ID;
    transaction.TimeRequest = TimeRequest; // <-- this might be better?
    new TransactionDAL().SaveTransaction(transaction);
    return transaction;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:48:33.167

首先，帮自己一个忙，并`DateTime`在服务器端以 UTC 或“祖鲁时间”处理。到达客户端后处理任何转换。

```
// on the server side
var serverNow = DateTime.UtcNow;
Console.WriteLine(serverNow);

// and on the client side
var myLocalNow = serverNow.ToLocalTime();
Console.WriteLine(myLocalNow); 
```

一般来说，您对“现在几点了？”的最终裁决者。应该是服务器——这是你最直接控制的世界。从客户端的角度看到的任何时间都应该从服务器从高处传递的“真正的时间”转换而来。

'当然，这只是我的观点，在处理本地->服务器时间转换时被多次烧毁，略有影响。（啊）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T17:56:07.157

如果您需要在客户端本地时间跟踪事件，您真的别无选择，只能在客户端捕获。对于 .NET（我猜您正在使用它，因为您的示例代码看起来像 C#），[DateTimeOffset](http://msdn.microsoft.com/en-ca/library/system.datetimeoffset.aspx)为此提供了一种比使用 DateTime 和单独跟踪的时区信息更方便的机制。

不幸的是，如果客户端和服务器系统时间之间存在差异，则在客户端捕获时间戳会引入服务器端处理的潜在问题（包括潜在的安全问题）。解决这个问题的简单方法是将客户端捕获的时间与当前服务器时间进行比较，如果它超出某个容差差距（例如：服务器时间任一方向上的 5 分钟），则拒绝它。即使它通过了这个测试，你也不应该直接存储客户端捕获的时间戳。相反，您应该使用转换为客户端时区的服务器当前时间。

# python - 为什么要浮动的 Python 字符串不会是完全相同的值？

> ID：15029396
> 
> 赞同：0
> 
> 时间：2013-02-22T17:00:40.233
> 
> 标签：python

假设我有三行 python 代码

```
text = "0.965"
value = float(text)
print value 
```

我的问题是，当他们显示输出时，为什么我的 python 显示`0.9649999999999999`而不是 if `0.965`。我知道我可以使用 round 来解决这个问题，但我只是想知道为什么会这样？我虽然我应该得到`0.965`？

谢谢你的回答。

# xml - Eclipse 插件：从其中一个文件中检索 IProject

> ID：15029398
> 
> 赞同：1
> 
> 时间：2013-02-22T17:00:44.760
> 
> 标签：xml, eclipse-plugin, project

我正在开发一个 Eclipse 插件（多页编辑器）。多页编辑器包含两个页面：XML 编辑器 + “首选项”编辑器。首选项编辑器只是用户能够在不了解 XML 的情况下定义 XML 文件的一种方式。为此，插件将显示一些文本输入、组合框等。要设置组合框值（例如），插件“扫描”项目 src 类（JavaProject），因此第一个组合框具有类名，以下有来自所选类的属性和方法。问题是扫描 XML 文件所在的同一个项目，而之前没有选择项目（不是在弹出菜单的开发中这样做的方式）。一个例子：

![图像](../Images/e3a0f8677215b0627780273b03690c28.png) 在这个测试项目中，用户将使用多页编辑器打开 testFile.xml。那么，我怎样才能在我的首选项编辑器页面中使用 src 层次结构？换句话说，我怎样才能拥有这个特定项目的 IProject 实例？

更新：按照 Bananeweizen 提出的路径，问题将是获取编辑器正在使用的 XML 的 IFile 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T06:37:54.927

如果您将该文件作为`IFile`or `IResource`，只需调用[`getProject`](http://help.eclipse.org/indigo/nftopic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/resources/IResource.html#getProject%28%29).

# c# - 如何在 N 次后为特定字符匹配新行？

> ID：15029402
> 
> 赞同：2
> 
> 时间：2013-02-22T17:01:01.607
> 
> 标签：c#, regex

我正在尝试匹配类似 CSV 文件中的所有新行。问题是巨大的文件总是带有一些断线，例如：

```
123|some string field|person 123|some optional open comment|324|213
133|some string field|person||324|213
153|some string field|person 123|some comment|324|213
126|some string field|another id|some open and
new line comment|324|213
153|string field|person 123|some comment|324|213
153|string field|person 123|another broken line
comment|324|213
133|field|person||324|213 
```

因此，为了解决这种情况，我使用了以下逻辑：

```
 string ZSUR = File.ReadAllText(filePath);
    string originalFilePath = filePath;

    // Regular Expression to fix line break issues
    Regex RE = new Regex(@"[\r\t\n]+([^0-9\r\t\n]{3}[^|\r\t\n])");

    ZSUR = RE.Replace(ZSUR, "$1");

    // Backup the original file
    string[] backupFilePath = Regex.Split(filePath, @".txt$");
    File.Delete(backupFilePath[0] + "_BACKUP.txt");
    File.Move(originalFilePath, backupFilePath[0] + "_BACKUP.txt");

    // And then save on the same path the fixed file
    File.WriteAllText(originalFilePath, ZSUR); 
```

它解决了 90% 的情况，因为正确行的第一部分总是以三位数开头，后跟一个竖线。

但我不知道为什么它与这样的情况不匹配：

```
126|some string field|another id|some open and
double newlined 
123 coment|324|213
153|some string field|person 123|some comment|324|213
153|some string field|person 123|some comment|324|213
153|string field|person 123|Please split this line
31 pcs: 05/03/2013
31|324|213
153|some string field|person 123|some comment|324|213 
```

如您所见，我需要一种不同的方法来解决这个问题。我知道在 N 次之后我有一个管道，那个烦人的评论字段就在那里。那么，有什么方法可以匹配从一行开始的 N 个管道之后的所有新行和类似行吗？

也欢迎其他想法。

**编辑：**谢谢你们的回答。

我使用以下正则表达式解决了这个问题：

```
(?<!\|[CA]?\|([0-9]{2}.[0-9]{2}.[0-9]{4})?)[\n\r]+ 
```

当然，我的真实文件与发布的示例略有不同，但主要想法只是匹配所有新行 [\n\r]+ 之前没有

```
(?<! ... ) 
```

表达。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:28:20.757

您可以像这样处理所有内容，其中“清洁”是您定义的方法。

```
var prev = string.Empty;
const int requiredValueCount = 6;

foreach (var line in lines2.Split(new[] {Environment.NewLine}, StringSplitOptions.None))
{
    var values = (prev + line).Split('|');

    if (values.Length == requiredValueCount)
    {
        prev = string.Empty;
        Clean(values);
    }
    else
    {
        prev += line;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:23:21.400

首先将所有 (\|\d+\n) 替换为类似 \|\d~~

然后加入所有行，删除 \n

然后分开~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:59:56.363

我不会不必要地重新发明轮子。试试 Sebastien Lorion 的[快速 CSV 阅读器](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)。它可能会完成您需要做的事情（或为您提供对错误采取纠正措施的设施）。我用过这个阅读器，它非常好。

另一种选择是来自 Codeplex的[KBCsv 。](http://kbcsv.codeplex.com/releases/view/101259)没用过，不过应该不错

我还将采取将文件按原样读取到记录列表中的方法。由于您似乎不需要多于一点的前瞻/后视，因此您可以在文件的单次传递中轻松完成，如下所示：

```
public IEnumerable<string[]> ReadRecordsFromCSV()
{
  string[] prev = null ;
  string[] curr = null ;

  // read each individual record from the file
  while ( null != (curr=MyCsvReader.ReadRecord()) )
  {

    if ( prev == null )
    { // no previous record? just shift and continue
      prev = curr ;
    }
    else
    { // previous record? splice if needed and emit a record
      string[] record ;
      bool spliceNeeded = CheckForSpliceConditions(prev,curr) ;

      if ( spliceNeeded )
      { // splice needed? build the record to emit and clear the previous record
        record = Splice( prev , curr ) ;
        prev = null ;
      }
      else
      { // no splice needed? set the record to emit and shift
        record = prev ;
        prev = curr ;
      }

    }

    // emit the record
    yield return record ;
  }

  // emit the last record if there is one.
  if ( prev != null )
  {
    yield return prev ;
  }

} 
```

如果您需要多于一级的前瞻/后视，则需要移位寄存器之类的东西，您可以在其中将记录添加到列表的末尾并从列表的开头删除它们。您可以使用 a`List<string[]>`作为这样的移位寄存器，尽管这样做有点难看。

**编辑注意：**或者（更简单），如果需要拼接，只需将当前记录附加到前一个记录，直到不再需要拼接。一旦这是真的，之前的记录就会被发出，你会从一个干净的状态重新开始，因此：

```
public IEnumerable<string[]> ReadRecordsFromCSV()
{
  string[] prev = null ;
  string[] curr = null ;

  // read each individual record from the file
  while ( null != (curr=MyCsvReader.ReadRecord()) )
  {

    if ( prev == null )
    { // no previous record? just shift and continue
      prev = curr ;
    }
    else
    { // previous record? splice if needed and emit a record
      bool spliceNeeded = CheckForSpliceConditions(prev,curr) ;

      if ( spliceNeeded )
      { // splice needed? build the record to emit and clear the previous record
        prev = Splice( prev , curr ) ;
      }
      else
      { // no splice needed? set the record to emit and shift
        yield return prev ;
        prev = null ;
      }

    }

  }

  // emit the last record if there is one.
  if ( prev != null )
  {
    yield return prev ;
  }

} 
```

# java - 单击时调用对象并等待处置

> ID：15029409
> 
> 赞同：0
> 
> 时间：2013-02-22T17:01:17.033
> 
> 标签：java, popup, click, dispose

我正在开发一个虚拟键盘模块。

键盘模块.java

```
KeyBoardModule kbm = new KeyBoardModule("small", false, null); 
```

当在其他`jForm(MainFrame.java)`是文本框上的点击事件时被调用，然后我`JFrame`用键盘获得新的（它就像弹出窗口），当按下输入时，它将数据保存到来自的`JButton`变量。比`textFieldValue``textarea``KeyBoardModule``frame.disponse()`

`MainFrame`单击键盘时主类调用和大型机调用，我需要将值从键盘返回到大型机..

在大型机中不使用 actionlistener（用于输入按钮）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:13:37.903

要将值直接从 GUI1 返回到另一个 GUI2，GUI1 必须具有对 GUI2 对象的引用。因此，每当您想将任何消息从 GUI1 传递到 GUI2 时，您都可以通过调用 GUI2 的适当方法来实现。例如考虑下面给出的代码。在创建 in 的对象时`InputBoard`，`MainFrame`我们将当前对象传递`MainFrame`给`InputBoard's`构造函数，以便可以使用适当的方法`InputBoard`将其输入传递给。在这里单击按钮打开框架。并且无论何时将某些输入传递给in ，它都会反映在of 中。`MainFrame` `GUI``public``MainFrame``MainFrame``InputBoard``JTextField``InputBoard``JTextArea``MainFrame`

```
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.JTextArea;
import javax.swing.JScrollPane;
import javax.swing.JButton;
import javax.swing.SwingUtilities;
import java.awt.FlowLayout;
import java.awt.BorderLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.event.DocumentListener;
import javax.swing.event.DocumentEvent;

class MainFrame extends JFrame implements ActionListener
{
    private JButton button;
    private JTextArea tArea;
    private InputBoard inBoard;
    public void prepareAndShowGUI()
    {
        setTitle("Main Frame");
        tArea = new JTextArea(10,30);
        button = new JButton("Click Me");
        inBoard = new InputBoard(this);
        inBoard.prepareGUI();
        JScrollPane tFieldPane = new JScrollPane(tArea);
        tArea.setLineWrap(true);
        tArea.setWrapStyleWord(true);
        tArea.setEditable(false);
        button.addActionListener(this);
        getContentPane().add(tFieldPane);
        getContentPane().add(button,BorderLayout.SOUTH);
        pack();
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
        button.requestFocus();
    }
    @Override
    public void actionPerformed(ActionEvent evt)
    {
        if (!inBoard.isVisible())
        {
            inBoard.setVisible(true);
        }
        inBoard.toFront();
    }
    public void setText(final String s)
    {
        tArea.setText(s);
    }
    public static void main(String[] st)
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                MainFrame mf = new MainFrame();
                mf.prepareAndShowGUI();
            }
        });
    }
}
class InputBoard extends JFrame implements DocumentListener
{
    MainFrame mainFrame ;
    JTextField inField;
    public InputBoard(MainFrame mainFrame)
    {
        this.mainFrame = mainFrame;
    }
    public void prepareGUI()
    {
        setTitle("Input Board");
        inField = new JTextField(40);
        getContentPane().setLayout(new FlowLayout());
        getContentPane().add(inField);
        inField.getDocument().addDocumentListener(this);
        setLocationRelativeTo(mainFrame);
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        pack();
    }
    @Override
    public void changedUpdate(DocumentEvent evt)
    {
        mainFrame.setText(inField.getText());
    }
    @Override
    public void insertUpdate(DocumentEvent evt)
    {
        mainFrame.setText(inField.getText());
    }
    @Override
    public void removeUpdate(DocumentEvent evt)
    {
        mainFrame.setText(inField.getText());
    }
} 
```

# java - 如何从 Jenkins 上的 config.jelly 验证表单？

> ID：15029412
> 
> 赞同：3
> 
> 时间：2013-02-22T17:01:24.767
> 
> 标签：java, validation, plugins, jenkins, jelly

我可以从 global.jelly 文件中做到这一点，但它不适用于 config.jelly。这是 global.jelly 文件的过程：

### 果冻：

```
<f:entry title="Value" field="value">
    <f:textbox />
</f:entry> 
```

* * *

### 爪哇：

```
public static final class Descriptor extends BuildStepDescriptor<Builder>{

    //descriptor's code

    /**
     * Performs on-the-fly validation of the form field 'value'.
     * 
     * @param value
     *            This parameter receives the value that the user has typed.
     * @return Indicates the outcome of the validation. This is sent to the
     *         browser.
     */
    public FormValidation doCheckValue(@QueryParameter String value) throws IOException, ServletException {
        if(value.isEmpty()) {
            return FormValidation.warning("You must fill this box!");
        }
        return FormValidation.ok();
    }
} 
```

当果冻代码放置在配置文件（config.jelly）中时，这不再适用，无论该`doCheckValue`方法是放置在插件类中还是在其描述符中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:01:24.767

这是 config.jelly 文件的结果。`textbox`需要一个附加属性：`checkUrl`.

### 果冻：

```
<f:entry title="Value" field="value">
    <f:textbox 
        checkUrl="'descriptorByName/NAME_OF_YOUR_JAVA_CLASS/checkValue?value='+escape(this.value)" />
</f:entry> 
```

*注意：`this.value`特定于 Javascript。它获取变量的**值**`value`。不要碰它。*

**Java**代码保持不变。

# java - Java - 填充 ArrayList 会产生空指针错误

> ID：15029415
> 
> 赞同：1
> 
> 时间：2013-02-22T17:01:31.193
> 
> 标签：java, nullpointerexception

在我的课堂上，我定义：

```
private ArrayList<BlockObject> blocks; 
```

然后：

```
blocks.add(new BlockObject(x, y)); 
```

但是我收到此错误

```
02-22 17:06:52.672: E/AndroidRuntime(479): Caused by: java.lang.NullPointerException
02-22 17:06:52.672: E/AndroidRuntime(479):  at com.comp1008.hhh.uuu.Scenario.blocks(Scenario.java:41) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T17:02:21.520

```
private ArrayList<BlockObject> blocks = new ArrayList<BlockObject>(); 
```

你必须初始化你的对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T17:02:14.203

你必须`initialize your arraylist`在填充它之前。

```
private ArrayList<BlockObject> blocks = new ArrayList<BlockObject>(); 
```

# magnolia - Magnolia 邮件模块不起作用

> ID：15029418
> 
> 赞同：1
> 
> 时间：2013-02-22T17:01:35.133
> 
> 标签：magnolia

我正在尝试使用 Magnolia CMS 4.5.4 中的邮件模块发送电子邮件。我到目前为止的代码是：

```
 protected void sendEmail(CommentDTO comment){
        if(comment!=null){
            try{
                MgnlMailFactory mailFactory = MailModule.getInstance().getFactory();
                if(mailFactory!=null){
                    Map<String, Object> params = new HashMap<String, Object>();

                    MgnlEmail mail = mailFactory.getEmailFromTemplate("MyTemplate", params);
                    mail.setToList("whoever@whatever.co.uk");
                    mail.setBody("HELLO");
                    mail.setFrom("whoever@whatever.co.uk");
                    if(mail!=null){
                        MgnlMailHandler mmh = mailFactory.getEmailHandler();
                        if(mmh!=null){
                            mmh.prepareAndSendMail(mail);
                        }
                    }
                }
            }catch(Exception e){

            }
        }
    } 
```

我得到的日志是：

```
2013-02-22 16:52:30,357 INFO  fo.magnolia.module.mail.handlers.SimpleMailHandler: Mail has been sent to: [2013-02-22 16:52:30,357 INFO  fo.magnolia.module.mail.handlers.SimpleMailHandler: Mail has been sent to: [whoever@whatever.co.uk] 
```

但是邮件一直没来...

在此跟踪之前，我得到：

```
2013-02-22 16:52:24,212 WARN  info.magnolia.cms.util.DeprecationUtil            : A deprecated class or method was used: Use IoC!. Check the following trace: info.magnolia.module.mail.MailModule.getInstance(MailModule.java:80), info.magnolia.module.mail.MgnlMailFactory.getEmailHandler(MgnlMailFactory.java:69), the full stracktrace will be logged in debug mode in the info.magnolia.cms.util.DeprecationUtil category. 
```

Eclipse 将 MailModule.getInstance() 方法标记为已弃用，但我不知道我必须放置什么。

有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:30:04.883

由于没有抛出异常，我猜你错误地配置了你的 SMTP 服务器或者根本没有。如何做到这一点可以在这里阅读：[http ://documentation.magnolia-cms.com/modules/mail.html#ConfiguringSMTP](http://documentation.magnolia-cms.com/modules/mail.html#ConfiguringSMTP)

此外，请确保：

*   您的邮件没有进入任何垃圾邮件过滤器（可能在您的邮箱之外）
*   没有阻止防火墙（例如在本地主机上运行时）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:28:10.097

好的，我终于用这段代码解决了：

```
protected void sendEmail(CommentDTO comment){
    if(comment!=null){
        try{
            MgnlMailFactory mailFactory = MailModule.getInstance().getFactory();
            if(mailFactory!=null){
                Map<String, Object> params = new HashMap<String, Object>();
                params.put("articleName", comment.getArticleName());
                params.put("id", comment.getId() );
                params.put("commentText", comment.getComment());
                params.put("author", comment.getName());
                MgnlEmail mail = mailFactory.getEmailFromTemplate("myTemplate", params);
                mail.setBodyFromResourceFile();

                if(mail!=null){
                    MgnlMailHandler mmh = mailFactory.getEmailHandler();
                    if(mmh!=null){
                        mmh.prepareAndSendMail(mail);

                    }
                }
            }
        }catch(Exception e){
            log.error("Error sending email: " +e.getMessage());
        }
    }
} 
```

我认为它使它起作用的是这条线：

```
mail.setBodyFromResourceFile(); 
```

当然，还有一个好的 SMTP 服务器配置。

# lisp - 从 SLIME 运行时找不到包，但从命令行可以

> ID：15029420
> 
> 赞同：1
> 
> 时间：2013-02-22T17:01:42.673
> 
> 标签：lisp, common-lisp, slime, sbcl

我正在运行[cl-opengl package 中的茶壶示例](https://github.com/3b/cl-opengl/blob/master/examples/misc/glut-teapot.lisp)。我所做的唯一更改是加载所需的包。从 unix shell ( `sbcl --load "3.cl"`) 执行时它工作正常，但是当我尝试通过 SLIME () 编译和加载它时，我得到关于找不到`C-c C-k`包的错误。`GLUT`

奇怪的是，编译器在`(defclass glut-teapot-window (glut:window)`. 是什么赋予了？？？

[这是发生的情况的屏幕截图](http://i46.tinypic.com/i519vr.png)

这是 3.cl 的代码。

```
;;;; -*- Mode: lisp; indent-tabs-mode: nil -*-
;;; glut-teapot.lisp --- Simple usage of glut:solid-teapot.

    (ql:quickload :cl-opengl)

    (ql:quickload :cl-glu)
  (ql:quickload :cl-glut)

;(setf *communication-style* :fd-handler)

(defclass glut-teapot-window (glut:window)
  ()
  (:default-initargs :width 250 :height 250 :title "glut-teapot.lisp"
                     :mode '(:single :rgb :depth)))

(defmethod glut:display-window :before ((w glut-teapot-window))
  (gl:clear-color 0 0 0 0)
  (gl:cull-face :back)
  (gl:depth-func :less)
  (gl:disable :dither)
  (gl:shade-model :smooth)
  (gl:light-model :light-model-local-viewer 1)
  (gl:color-material :front :ambient-and-diffuse)
  (gl:enable :light0 :light1 :lighting :cull-face :depth-test))

(defmethod glut:display ((window glut-teapot-window))
  (gl:load-identity)
  (gl:translate 0 0 -5)
  (gl:rotate 30 1 1 0)
  (gl:light :light0 :position '(100 1000 1 0))
  (gl:light :light0 :diffuse '(1.2 0.4 0.6 0))
  (gl:light :light1 :position '(-100 1000 1 0))
  (gl:clear :color-buffer :depth-buffer)
  (gl:color 1 10 1)
  (gl:front-face :cw)
  (glut:solid-teapot 1.3)
;(glut:solid-torus 0.5 1.0 50 50)
;(glu:cylinder (glu:new-quadric) 0.5 0.5 0.5 20 20)
  (gl:front-face :ccw)
  (gl:flush))

(defmethod glut:reshape ((window glut-teapot-window) width height)
  (gl:viewport 0 0 width height)
  (gl:matrix-mode :projection)
  (gl:load-identity)
  (glu:perspective 50 (/ width height) 0.5 20)
  (gl:matrix-mode :modelview)
  (gl:load-identity))

(defmethod glut:keyboard ((window glut-teapot-window) key x y)
  (declare (ignore x y))
  (when (eql key #\Esc)
    (glut:destroy-current-window)))

(defun glut-teapot ()
  (glut:display-window (make-instance 'glut-teapot-window)))

(glut-teapot) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:25:30.203

如果加载文件，Lisp 系统会逐个表达式读取文件表达式，并在读取每个表达式后执行它们。

如果你在新的 Lisp 中编译文件，那么它会读取表达式并编译它们。但它不会执行它们。因此它会看到 quickload 命令，编译它，但不执行它。此 OpenGL 代码未加载，编译器不知道这些包。但这是有道理的：编译通常应该编译文件，而不是执行它。当您加载已编译的 fasl 文件时，Lisp 将执行表达式。

有两种简单的方法：

1.  将快速加载操作放在一个单独的文件中，并在编译下一个文件之前编译/执行它。
2.  将加载操作包含在`EVAL-WHEN`语句中。`(eval-when (:execute :load-toplevel :compile-toplevel) ... your code here ...)`.

该`:compile-toplevel`符号表示，当编译器将其视为顶级形式时，将执行该代码。否则它不会这样做。因此，您可以在文件中包含要编译的代码，这会产生副作用 - 这里加载其他代码。

# android - Android Manifest 中声明的 BroadcastReceiver，App 强制关闭。

> ID：15029421
> 
> 赞同：0
> 
> 时间：2013-02-22T17:01:44.573
> 
> 标签：android, android-intent, broadcastreceiver, intentfilter

在测试此应用程序时，我不断收到强制关闭错误。应用程序打开正常.. 但 3-4 秒后强制关闭错误对话框出现。包括代码。任何帮助将不胜感激。谢谢

**显现**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.cy.headset"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <receiver android:name=".Main" >
        <intent-filter>
            <action android:name="android.content.Intent.ACTION_BATTERY_CHANGED" />
        </intent-filter>
    </receiver>

    <activity
        android:name="com.cy.headset.Main"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

**Java 代码**

```
package com.cy.headset;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;
public class Main extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent i) {

    Toast.makeText(context, "Headphone connected", Toast.LENGTH_LONG).show();

}} 
```

**XML 用户界面文件**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Main" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_margin="10dp"
    android:layout_marginTop="151dp"
    android:text="@string/hello_world"
    android:textAlignment="center" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:06:23.820

什么是 Main.java 的 BroadcastReceiver 类的包？

```
<receiver android:name=".Main" >
    <intent-filter>
        <action android:name="android.content.Intent.ACTION_BATTERY_CHANGED" />
    </intent-filter>
</receiver> 
```

应该不是com.cy.headset吧？因为这将与您的主要活动发生冲突，即 Main.java

我认为有两种解决方案在清单中指定接收器的包。

例子：

```
<receiver android:name="com.package.name.Main" >
    <intent-filter>
        <action android:name="android.content.Intent.ACTION_BATTERY_CHANGED" />
    </intent-filter>
</receiver> 
```

或者，如果您希望您的接收器与 Main.java 的主要活动位于同一包中，请重命名您的接收器

例子：

```
<receiver android:name=".BatteryChange" >
    <intent-filter>
        <action android:name="android.content.Intent.ACTION_BATTERY_CHANGED" />
    </intent-filter>
</receiver>

<activity
    android:name="com.cy.headset.Main"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

另一种方法是。

```
<receiver android:name="com.cy.headset.BatteryChange" >
    <intent-filter>
        <action android:name="android.content.Intent.ACTION_BATTERY_CHANGED" />
    </intent-filter>
</receiver>

<activity
    android:name="com.cy.headset.Main"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:04:04.340

您将[Activity](http://developer.android.com/reference/android/app/Activity.html)和[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)都声明为`com.cy.headset.Main`。这是行不通的。

安装您的应用后，Android 会尝试启动一个名为 的 Activity `Main`，但会找到一个 BroadcastReceiver。

将它们分成两个不同的类，一个扩展 Activity，一个扩展 BroadcastReceiver。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:06:19.457

```
<receiver android:name=".Main" >
    <intent-filter>
        <action android:name="android.content.Intent.ACTION_BATTERY_CHANGED" />
    </intent-filter>
</receiver>

<activity
    android:name="com.cy.headset.MainActivity" <<Change it to MainActivity
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

您已经定义了相同的接收器和活动名称，并且两者都在同一个包**com.cy.headset**中，因此重命名一个或在不同的包中定义并给出完全限定的包名称。

例如：如果接收器在**com.cv.headset.receiver**中，则在清单中写入

```
<receiver android:name="com.cv.headset.receiver.Main" >
    <intent-filter>
        <action android:name="android.content.Intent.ACTION_BATTERY_CHANGED" />
    </intent-filter>
</receiver> 
```

# html - 如何将文件上传到父文件夹？

> ID：15029422
> 
> 赞同：0
> 
> 时间：2013-02-22T17:01:47.940
> 
> 标签：html

这是问题

```
<select>
    <optgroup label="Swedish Cars">
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
  </optgroup>
  <optgroup label="German Cars">
    <option value="mercedes">Mercedes</option>
    <option value="audi">Audi</option>
  </optgroup>
</select> 
```

如果我想将文件上传到沃尔沃或奥迪，这很容易。我不知道如何将文件上传/附加到瑞典汽车或德国汽车文件夹。我无法选择父标题（瑞典汽车）是否有任何 jquery 插件可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:04:49.970

添加*全部*选项。

```
<optgroup label="Swedish Cars">
  <option value="swedish cars">All Swedish Cars</option>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
</optgroup> 
```

# java - Apache Thrift：抛出方法中执行的代码抛出的异常

> ID：15029424
> 
> 赞同：2
> 
> 时间：2013-02-22T17:02:01.893
> 
> 标签：java, thrift

我正在开发一个 Thrift 服务器，它基本上只是斯坦福解析器的一个包装器（尽管这不是太重要）。有时，Stanford Parser 会根据给出的输入抛出有用的异常；例如，如果输入太长（根据解析器），生成输入的用户应该收到这个异常，以便他们决定如何处理它。但是，我似乎无法让 Thrift 传递这个异常，而是只返回

```
Internal error processing <name of Thrift method being called> 
```

给客户。

我在该方法中有以下代码：

```
try
{
    // a whole bunch of Stanford Parser stuff
}
catch (Exception e)
{
    throw new TApplicationException(TApplicationException.INTERNAL_ERROR, e.getMessage());
} 
```

并且该方法确实会抛出 a `TApplicationException`，但无论是什么内容`e.getMessage()`都不会发送给客户端。如何让斯坦福解析器抛出的异常由 Thrift 抛出给客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-19T07:48:17.197

恐怕您必须定义自己的异常，而不是使用 TException 或其任何子类。

那是因为 Thrift 框架像这样包装你的代码（ProcessFunction.java）：

```
try {
  result = getResult(iface, args);
} catch(TException tex) {
  LOGGER.error("Internal error processing " + getMethodName(), tex);
  TApplicationException x = new TApplicationException(TApplicationException.INTERNAL_ERROR, 
    "Internal error processing " + getMethodName());
  oprot.writeMessageBegin(new TMessage(getMethodName(), TMessageType.EXCEPTION, seqid));
  x.write(oprot);
  oprot.writeMessageEnd();
  oprot.getTransport().flush();
  return;
} 
```

因此，您在 TException 中给出的任何消息都将被 Thrift 框架忽略并替换。

# twitter-bootstrap - 自定义引导装订线宽度

> ID：15029426
> 
> 赞同：0
> 
> 时间：2013-02-22T17:02:04.010
> 
> 标签：twitter-bootstrap, less

我正在尝试删除 twitterbootstrap 网格布局中的装订线间距。我根本不希望有任何阴沟。

我去了 Twitter Bootstrap 的自定义页面：

```
http://twitter.github.com/bootstrap/customize.html 
```

我设置

```
@gridGutterWidth
@gridGutterWidth1200
@gridGutterWidth768 
```

到 0 像素

当我下载它并解压缩文件时，我会在里面得到 error.txt 文件，内容如下：

> 尝试构建您的捆绑包时发生的错误较少。您可能在较少变量字段中输入了无效输入。检查您的语法并重试！
> 
> 谢谢！

我再次尝试将它们设置为 1px，但我得到了同样的错误。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:48:36.817

当我收到错误时，我正在使用 Chrome。我在 IE 中打开该站点并为我提到的 3 个属性输入 0px 并且它成功运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:13:29.850

这个解决方案似乎是一个较少的语法问题，在[这篇文章中得到了正确的演示](https://stackoverflow.com/questions/11824074/twitter-bootstrap-remove-gutter-from-span-in-fluid-configuration)

将less文件编辑为：

```
@gridGutterWidth: 0px;
@gridGutterWidth1200: 0px;
@gridGutterWidth1200: 0px; 
```

然后重新编译它，看看它是否有效。快乐造型！

# codeigniter - 致命错误：在第 57 行的application/libraries/MY_Parser.php 中找不到类“Dwoo”

> ID：15029427
> 
> 赞同：2
> 
> 时间：2013-02-22T17:02:11.033
> 
> 标签：codeigniter, template-engine, dwoo

好的，在使用 Phil Sturgeon 的模板系统时，我遇到了 Codeigniter（最新版）和 Dwoo 的课程未发现问题。[我已按照此处](http://philsturgeon.co.uk/code/codeigniter-dwoo)找到的 PHil 说明进行操作。但是当我运行我的应用程序时，我一直在第 57 行的 Phil 的 MY_Parser 库中找到一个类“Dwoo”。我错过了安装中的一些常见内容吗？我可以让他的模板系统在没有添加 Dwoo 的情况下正常工作。

除了视图和模板中缩短的模板标签之外，通过使用 Dwoo 和 Phil 的模板系统，我还有什么收获吗？

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-12T16:50:06.063

这真的为时已晚，但这可能会帮助其他人陷入与我相同的问题：P

我知道你可能已经解决了这个问题，无论如何你错过了：

```
include(APPPATH.'libraries/dwoo/dwooAutoload.php'); 
```

将 Dwoo 与 Phil 的模板系统一起使用的好处取决于您的要求。

# matlab - MATLAB：从文本文件中读取最后一行字符串和“合并”列的数据

> ID：15029429
> 
> 赞同：0
> 
> 时间：2013-02-22T17:02:16.623
> 
> 标签：matlab, file-io, header

我有一些模拟结果存储在一个大文本文件中，其格式类似于以下示例：

```
******* Information
More Information

    Header 1   Header 2   Header 3
    [Unit]     [Unit]     [Unit]

    12345      67890      12345
    12345      67890      12345
end 
```

什么是无需事先手动编辑文件即可将其导入 MATLAB 的简单方法？我知道我可以跳过标题行，但我可以`end`对最后一行中的行做什么？到目前为止，我一直使用`load()`并手动删除标题和最后一行，但我想摆脱那个额外的步骤。

此外，一列的条目有时会变得如此之大以至于它们与前一列接壤（使其成为一列），例如

```
12345  678
12345 6789
1234567890 
```

`load()`发生这种情况时显然无法导入我的数据。我能做些什么呢？

[您可以在此处](http://pastebin.com/x3gcsgL3)找到原始数据集的精简版。我的第二个问题出现在第 15 行的`sum(Evap)`和`TLevel`列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:00:08.713

尝试查看[textscan](http://www.mathworks.com/help/matlab/ref/textscan.html "文本扫描")。你可以使用类似的东西

```
data = textscan(fid, '%f %f %f', 'HeaderLines', 6); 
```

它将读取所有数据，直到它到达“结束”（与预期格式不匹配）。但是，这不会解决数据列一起运行的问题。如果可以的话，这可能最容易解决数据生成方面的问题。

# java - 为什么不能将对象添加到 List ？

> ID：15029442
> 
> 赞同：0
> 
> 时间：2013-02-22T17:02:51.567
> 
> 标签：java, list, wildcard, type-erasure, lower-bound

考虑以下 Java 代码：

```
List<? super Number> list = new ArrayList<>();
Number n = new Integer(1);
Object o = new Object();
list.add(n); // works, apparently Number super Number is alright
list.add(o); // compiler error! 
```

但为什么会这样呢？既然在内部，类型擦除使列表成为一个包含对象的列表，为什么不允许将对象（它们是所有类的超类，因此应该满足下限通配符）添加到列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:05:38.223

编译器只知道`list`包含`Number`（或`Number`自身）的某些超类型，它可能是也可能不是`Object`. 所以它必须不允许`Object`，因为它可能是`List<Number>`。

这是一个[更彻底的解释](http://www.javacodegeeks.com/2011/04/java-generics-quick-tutorial.html)，在它谈论“？超级”的地方向下滚动大约一半。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:04:21.780

一个`Object`不是一个`Number`。

A`Number`是一个`Object`虽然。

[从问题的公认答案](https://stackoverflow.com/a/3847321/205426)来看，这是以下内容的副本：

> 因此，您可以将 Number 的任何超类型添加到 List 中是不正确的；这根本不是有界通配符和捕获转换的工作方式。您不声明 List 是因为您可能想向其中添加 Object（您不能！）；你这样做是因为你想向它添加 Number 对象（即它是 Number 的“消费者”），而且简单的 List 限制性太强。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:07:42.593

`List<? super Number> list`定义您可以将其分配到的列表。

换句话说，您可以为其分配 a`List<Number>`或 a `List<Object>`。

Afaik`new ArrayList<>()`将与`new ArrayList<Number>()`

# java - 用于自动增量 (userID) ObjectOutputStream 的 Java 静态变量

> ID：15029445
> 
> 赞同：2
> 
> 时间：2013-02-22T17:02:59.473
> 
> 标签：java, serialization, static

我在学校有这个作业。它包括创建一个“Person”类，并将每个对象放在一个列表中。每个 Person 对象都应该有一个唯一的 ID。这是通过在类中定义一个静态 int 来实现的，如下所示：

```
public class MyClass implements Serializable
{
  private static int nextmember;
  private int userid;

  public MyClass()
  {
    userid = nextmember++;
  }
} 
```

这很好用，第一个对象获取用户 ID 1，下一个对象用户 ID 2 等。我的挑战是如何在保存到文件时处理这个问题？我使用 ObjectOutputStream 和 ObjectInputStream。

因此，如果我创建 3 个对象，1、2 和 3，关闭我的程序（所有内容都保存到文件中），重新打开程序（所有 3 个对象都存在），然后创建第四个对象，第四个对象的用户 ID 为 1 . 如何通过关闭/重新打开程序来保留 nextmember 值？

尝试用谷歌搜索它，但我能在这个主题上找到的只是“序列化静态变量没有意义”，所以也许我应该找到一种不同的用户 ID 管理方法？

谢谢，
埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:09:50.257

用对象保持序列确实没有意义。

让我们玩一下这个想法，我们将保存`nextmember`一个对象。想象以下系列：

*   创建实例`MyClass`1，id=1，seq=1
*   创建instance2，id=2，seq=2
*   序列化instance1，id=1，seq= **2**
*   创建instance3，id=3，seq=3
*   反序列化instance1，**设置seq=2**
*   创建实例4，**id=3**，seq=3

因此，您有 2 个实例（实例 3 和实例 4）具有相同的 id。

如果你真的想序列化状态，你可以为序列设置一个单独的类（和实例）。但它仍然应该是类的静态属性。

```
public class Seq implements Serializable {
    private int next = 1;
    public synchronized int getNext() { 
        return next++; 
    }
}

public class MyClass implements Serializable {
    private static Seq seq;
    public MyClass() {
        userid = seq.getNext();
    }
} 
```

您应该单独（反）序列化序列，并使用单独的 getter/setter 将其设置为 MyClass。

请注意，序列号可能被超过 1 个线程访问，因此对它的访问应该是`synchronized`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:20:32.557

我并不是说这是一个好的解决方案，但解决这个问题的最简单方法是将静态“nextmember”字段的值保存到文件中。

例如

```
ObjectOutputStream objectOutputStream = ...;
objectOutputStream.writeInt(MyClass.nextmember);
// write your users

ObjectInputStream objectInputStream = ...;
MyClass.nextmember = objectInputStream.readInt()
// read your users 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:15:05.930

尝试

```
 class IdGenerator implements Serializable {
        private static IdGenerator instance = new IdGenerator();
        private int nextId;

        private IdGenerator () {
        }

        public static int nextId() {
            return instance.nextId++;
        }

        // readResolve method to preserve singleton property
        private Object readResolve() {
            return instance;
        }
    }

    class MyClass implements Serializable {
        private int userid;

        public MyClass() {
            userid = IdGenerator.nextId();
        }
    } 
```

# c# - RenderControl 不输出子控件 HTML

> ID：15029447
> 
> 赞同：1
> 
> 时间：2013-02-22T17:03:12.917
> 
> 标签：c#, asp.net, aspose

我在这里遇到了一个复杂的问题。

背景：我正在编辑一个表单引擎项目，该项目根据每个请求的 XML 定义动态创建它的控件，以使用 Aspose.PDF 添加 PDF 生成功能。简而言之，表单引擎作为一组控件，充当填写表单（文本框、电话号码、日期控件等）的基本功能。每个控件及其属性都在 xml 文件中定义并对应于一个 xml架构。现在，当表单完成时，会有一个 formRepeater 控件检索先前填充的页面并格式化数据以在 Web 浏览器中打印。我必须替换它来生成一个 pdf 文件。

我所做的：我添加了一个名为 GeneratePdf 的新抽象方法，所有 FormControls 都必须实现它，并且我为我的控件容器 PreRender 事件中的每个控件和子控件调用此方法。该方法将根据每个控件而有所不同，但这是目前的基本方法

```
 public override void GeneratePdf(Aspose.Pdf.Generator.Pdf file)
    {

        //Add the control HTML in a new section of the PDF File
        var section = file.Sections.Add();
        var sb = new StringBuilder();
        var writer = new HtmlTextWriter(new StringWriter(sb));
        this.RenderControl(writer);
        var html = new Aspose.Pdf.Generator.Text(section, sb.ToString());
        html.IsHtmlTagSupported = true;
        section.Paragraphs.Add(html);
    } 
```

我的问题：我使用 Stringbuilder 成功检索了我的控件的 HTML，但是如果控件作为标准 ASP.NET 控件在其中，则子控件的 HTML 不会呈现。为什么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:31:07.247

RenderControl 将把子控件 HTML 渲染到 sb stringwriter 中。

但是，[http:](http://www.aspose.com/docs/display/pdfnet/Text+Constructor+Overload_3) //www.aspose.com/docs/display/pdfnet/Text+Constructor+Overload_3 Aspose Text 不会自动为每个子控件创建段。它期望您传递给它的字符串用于单个（和当前）段。

To add the sub-controls of a control, you will need to recursively call/generate each sub-control. So you will need to restructure your code above.

# android - Android 4 水平拖放

> ID：15029455
> 
> 赞同：4
> 
> 时间：2013-02-22T17:03:31.917
> 
> 标签：android

我可以使用 View.startDrag 方法成功拖放 n 个项目。

但我想通过一些 Y 轴偏移来限制仅通过 X 轴拖动。目前，当用户开始拖动时，他可以将该视图移动到屏幕上的任何位置，所以我如何限制拖动的外观，以便用户无法上下移动它。

谢谢你。

# extjs - 将 SDK2 网格导出为 CSV

> ID：15029462
> 
> 赞同：1
> 
> 时间：2013-02-22T17:03:56.593
> 
> 标签：extjs, extjs4, rally

我想将我的 SDK2 网格导出到 CSV 或 Excel——我怀疑此代码可能存在于 Rally 的某个地方，因为您可以将例如用户故事从投资组合项目导出到 CSV。

是否有人们知道并可以发布的解决方案？

我在 Sencha 网站上找到了一个完全是客户端的[线程](http://www.sencha.com/forum/showthread.php?136598-Export-store-to-Excel)，但我无法使用 Rally SDK2 网格让它工作。

如果您只想使用 CSV，我怀疑可能会有更简单的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T05:29:42.150

看一下上面 Charles 给出的示例，并使这个简化的对象导出 EXT-JS 网格（因此也适用于 Rally 网格）。

对于 IE，直接进入 Excel，对于其他浏览器，下载 CSV - 但使用数据 URI 方法有点困难（文件名不可控制，Excel 在打开前会抱怨一点），但它的功能。

如果真正了解 Javascript 的人想要发布改进，我将不胜感激！

```
// Derived and simplified from example on bryntum.com

Ext.define("GridExporter", {
    dateFormat : 'Y-m-d g:i',

    exportGrid: function(grid) {
        if (Ext.isIE) {
            this._ieToExcel(grid);

        } else {
            var data = this._getCSV(grid);

            window.location = 'data:text/csv;charset=utf8,' + encodeURIComponent(data);
        }
    },

    _escapeForCSV: function(string) {
        if (string.match(/,/)) {
            if (!string.match(/"/)) {
                string = '"' + string + '"';
            } else {
                string = string.replace(/,/g, ''); // comma's and quotes-- sorry, just loose the commas
            }
        }
        return string;
    },

    _getFieldText: function(fieldData) {
        var text;

        if (fieldData == null || fieldData == undefined) {
            text = '';

        } else if (fieldData._refObjectName && !fieldData.getMonth) {
            text = fieldData._refObjectName;

        } else if (fieldData instanceof Date) {
            text = Ext.Date.format(fieldData, this.dateFormat);

        } else if (!fieldData.match) { // not a string or object we recognize...bank it out
            text = '';

        } else {
            text = fieldData;
        }

        return text;
    },

    _getFieldTextAndEscape: function(fieldData) {
        var string  = this._getFieldText(fieldData);

        return this._escapeForCSV(string);
    },

    _getCSV: function (grid) {
        var cols    = grid.columns;
        var store   = grid.store;
        var data    = '';

        var that = this;
        Ext.Array.each(cols, function(col, index) {
            if (col.hidden != true) {
                data += that._getFieldTextAndEscape(col.text) + ',';
            }
        });
        data += "\n";

        store.each(function(record) {
            var entry       = record.getData();
            Ext.Array.each(cols, function(col, index) {
                if (col.hidden != true) {
                    var fieldName   = col.dataIndex;
                    var text        = entry[fieldName];

                    data += that._getFieldTextAndEscape(text) + ',';
                }
            });
            data += "\n";
        });

        return data;
    },

    _ieGetGridData : function(grid, sheet) {
        var that            = this;
        var resourceItems   = grid.store.data.items;
        var cols            = grid.columns;

        Ext.Array.each(cols, function(col, colIndex) {
            if (col.hidden != true) {
                console.log('header: ', col.text);
                sheet.cells(1,colIndex + 1).value = col.text;
            }
        });

        var rowIndex = 2;
        grid.store.each(function(record) {
            var entry   = record.getData();

            Ext.Array.each(cols, function(col, colIndex) {
                if (col.hidden != true) {
                    var fieldName   = col.dataIndex;
                    var text        = entry[fieldName];
                    var value       = that._getFieldText(text);

                    sheet.cells(rowIndex, colIndex+1).value = value;
                }
            });
            rowIndex++;
        });
    },

    _ieToExcel: function (grid) {
        if (window.ActiveXObject){
            var  xlApp, xlBook;
            try {
                xlApp = new ActiveXObject("Excel.Application"); 
                xlBook = xlApp.Workbooks.Add();
            } catch (e) {
                Ext.Msg.alert('Error', 'For the export to work in IE, you have to enable a security setting called "Initialize and script ActiveX control not marked as safe" from Internet Options -> Security -> Custom level..."');
                return;
            }

            xlBook.worksheets("Sheet1").activate;
            var XlSheet = xlBook.activeSheet;
            xlApp.visible = true; 

           this._ieGetGridData(grid, XlSheet);
           XlSheet.columns.autofit; 
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T20:28:41.723

您可以通过从底层存储获取数据并创建[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)来从网格创建导出。您可能会遇到问题，使其在不同的浏览器中正常工作。

您还可以在这里看到[布林顿](http://www.bryntum.com/examples/scheduler-latest/examples/excelexport/excelexport.html)制作的东西。

# c++ - 用反斜杠（\）分隔符c ++读取输入文件

> ID：15029465
> 
> 赞同：1
> 
> 时间：2013-02-22T17:03:59.283
> 
> 标签：c++, stringtokenizer, boost-tokenizer

我的输入文件是这样的：

```
C:\Users\DeadCoder\AppData\Local\CoCreate 
```

我正在制作一棵树，我需要在从带有`\`分隔符的输入文件中读取时抽象目录的名称。和上面的例子一样，我需要分别抽象出c:、users、DeadCoder、Appdata ....希望大家理解问题。现在让我们看看我们得到的选项。

`1-` `istringstream`适用于`whitespace`但不适用于`\`.

`2-` `strtok()`在 char 上工作。所以我必须将我的字符串更改为 char 并且我真的不想这样做。

`3- Boost Tokenizer()`这个看起来很有趣，我过去对它并不熟悉，只是我刚刚在谷歌上搜索了一下。我复制了代码，它是这样的：

```
#include <boost/foreach.hpp>
#include <boost/tokenizer.hpp>
using namespace boost;

int main(){

    string tempStr;
    ifstream fin;
    fin.open("input.txt");
    int i=0;

    while (!fin.eof()){
        getline(fin,tempStr);
        char_separator<char> sep("\"); // error: missing terminating " character
        tokenizer<char_separator<char>> tokens(tempStr, sep);
        for (const auto& t : tokens) {
            cout << t << "." << endl;
        }
} 
```

现在这给出了 `"error: boost/foreach.hpp: No such file or directory"` 有人可以在这里帮助我的错误。还有其他`better way`方法可以使用 . 读取输入文件吗`\ delimiter`？请不要像`class tokenizer()`我还在学习 c++ 那样使用大量代码。

编辑：我没有安装 boost 库，因此我遇到了这个错误。如果有人可以在`tokenize`不安装第三个库的情况下解释一种更好的字符串方式，那将是非常受欢迎的。

最好的; 死编码器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:07:10.567

在 C++（和其他基于 C 的语言）`\`中，字符串或字符文字中的字符是*转义*字符。这意味着它*转义*了文字中的下一个字符。例如，您可以`"`在字符串内部拥有一个。要`\`在字符串文字中包含一个，您需要通过其中两个来转义反斜杠：`"\\"`.

您可以阅读有关 C++ 中有效转义序列的更多信息，例如[在此参考中](http://en.cppreference.com/w/cpp/language/escape)。

* * *

至于 Boost 的问题，你需要告诉编译器你安装它的位置。这是在 IDE 的项目属性中完成的。

* * *

如果您想在*不*使用 Boost 等第三方库的情况下进行标记化，有几种方法。一种方法是使用[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)and [`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)。另一个使用标准类的[`find`](http://en.cppreference.com/w/cpp/string/basic_string/find)和[`substr`](http://en.cppreference.com/w/cpp/string/basic_string/substr)函数。`string`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:20:05.417

这里的任何类型的通用标记器都是矫枉过正的。只需使用 `std::find( s.begin(), s.end(), '\\' )`查找每个分隔符，并使用两个迭代器构造函数`std::string`将其放入单独的字符串中。（您的编译器将第一个`\`视为转义字符。）类似于：

```
std::vector<std::string> fields;
std::string::const_iterator end = s.end();
std::string::const_iterator current = s.begin();
std::string::const_iterator next
        = std::find( current, end, '\\' ):
while ( next != end ) {
    fields.push_back( std::string( current, next ) );
    current = next + 1;
    next = std::find( current, end, '\\' );
}
fields.push_back( std::string( current, next ) ); 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T17:07:17.033

```
char_separator<char> sep("\") 
                          ^^^ You need to escape the \ . use "\\" 
```

用于`\`指示转义序列。但`to escape that escape, you need other escape`

用这个 ：`char_separator<char> sep("\\")`

安装 boost 库：[安装 Boost](http://www.boost.org/doc/libs/1_53_0/doc/html/bbv2/installation.html)

其他选择：

```
getline(fin,tempStr);
char *cstr=new char[tempStr.length()+1];
strcpy(cstr,tempStr.c_str())

//... Now you can use strtok() on cstr 
```

# java - 使用 javax.tools.JavaCompiler 时设置 JVM 堆空间

> ID：15029469
> 
> 赞同：0
> 
> 时间：2013-02-22T17:04:09.993
> 
> 标签：java, jdk1.6, java-compiler-api

我正在使用 JavaCompiler API 来编译一些 Java 源代码。但是，我收到了 OutOfMemoryError 异常。我尝试使用 -Xmx1G 选项，但它不起作用：

```
java.lang.IllegalArgumentException: invalid flag: -J-Xmx1G
    at com.sun.tools.javac.api.JavacTool.processOptions(JavacTool.java:236)
    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:207)
    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:53) 
```

有没有人成功地增加了设置正确选项的堆大小？我也没有成功尝试过：

Xmx1G

-Xmx1G

J-Xmx1G

-J -Xmx1G

-J Xmx1G

# java - 单页反馈页面存储数据

> ID：15029471
> 
> 赞同：0
> 
> 时间：2013-02-22T17:04:10.903
> 
> 标签：java, javascript, html

我有一个单独的页面，用于获取一组问题和答案的反馈以供选择。50 位用户将为这些问题提供反馈。在用户对反馈问题进行评分后，我需要进行一些计算，并需要生成一个 excel 格式的报告。

是否可以在不使用 JSP Servlet 或其他服务器端技术的情况下做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:14:44.223

我只是写了一个答案，然后将其删除。我误解了你的问题。

听起来您想要做的是收集用户提交的 Web 服务器上的数据，然后将其格式化为 Excel 文件。

我为此反复使用了一个技巧。

将数据排列到 HTML 表格中，并将带有表格的网页保存到扩展名为 .xls 的文件中。单击该文件，Windows 将在 Excel 中打开该文件。Excel 会将表格解释为电子表格，然后您可以将其另存为 Excel 电子表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:21:01.203

有 PaaS/BaaS/MBaaS 提供商，您可以使用它们将答案存储在云中。其中一些提供服务器端 JavaScript 托管选项。我只尝试了一个（我正在开发）。如果提交的数据不敏感，您可以将答案保存在免费的[JayStorm Open 应用程序](http://jaystack.com/blog/jaystorm-open%E2%80%93starting-point)中，您可以[直接从 Excel 打开记录，无需编写任何代码](http://jaystack.com/blog/step-by-step-how-to-and-why-access-your-jaystorm-data-with-excel)。似乎需要一个小时的开发，使用 Excel 构建您的报告是可以的。

有许多 BaaS 提供商，但据我所知，您至少需要在 Node 中进行开发，才能从其余部分返回 CSV/XLS 的结果。

# assembly - 在 x86_64 上运行 i_386 asm：重启指令

> ID：15029473
> 
> 赞同：-1
> 
> 时间：2013-02-22T17:04:17.797
> 
> 标签：assembly, x86-64, behavior

我试图在我的 64 位（Ubuntu 12.04）上运行一些 asm 行，只是为了执行重启系统调用。我可以编译它，但是运行时什么也没发生。

这是代码：

```
section .text
        global _start

_start:
    mov eax,88
    mov ebx,0xfee1dead
    mov ecx,672274793
    mov edx,0x89abcdef
    mov esi,0
    int 0x80 
```

我使用以下方法编译它：

```
nasm -f elf reboot.asm 
```

然后我使用链接它：

```
ld -m elf_i386 -s -o reboot reboot.o 
```

我对这种行为有一些疑问：

*   如果我使用正确，在 64 位系统上运行这个 32 位代码是问题的根源吗？
*   我想知道将 NULL 传递给 %esi 寄存器，这个参数对于 reboot 系统调用是否错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:43:24.937

需要超级用户才能使用此系统调用。您可以授予文件超级用户权限...作为 root、“chown root:root myfile”、“chmod +s myfile”。

您可能想在任何`int 80h`... 之后检查错误代码（如果有）

 `````
int 80h
test eax, eax
jns good ; shouldn't happen for sys_reboot
neg eax
mov ebx, eax
mov eax, 1 ; __NR_exit
int 80h 
```` 

`现在通过执行“echo $?”，您应该能够看到错误号。在 errno.h 中查找。`

 `我认为esi中的零是可以的。不知道它是否可以在 64 位系统上运行——“应该”，我想。

如果它有效，这将导致“提示”重新启动 - 与拔掉插头相同。它与“rebo​​ot”shell 命令不同！我决定这不是我真正想做的...``

# javascript - 处理 javascript db.transaction 回调

> ID：15029474
> 
> 赞同：3
> 
> 时间：2013-02-22T17:04:20.967
> 
> 标签：javascript, cordova, jquery-callback

我坚持以下几点，我确信这与我缺乏处理回调的经验有关，我想查询一个数据库，如下所示：

```
db.transaction(queryFoodDBAll, errorCB);

function errorCB(tx, err) {
    alert("Error processing SQL: "+err);
}

function queryFoodDBAll(tx) {
    tx.executeSql('SELECT * FROM Food', [], displayAllFood, errorCB);
}

function displayAllFood(tx, results) {
    var len = results.rows.length;
    var items = new Array();
    for (var i=0; i<len; i++){
        items[i] = results.rows.item(i).data
    }
    printdata('settings-food',items, 'Food');
}

function printData(type,data,title) {
    switch(type)
    {
        case 'settings-food':
            alert("Data: "+data);
            var content = '<div data-role="collapsible" data-theme="c"><h3>'+title+'</h3>';
            for (var i=0;i<data.length;i++) {
                content += '<p>'+data[i]+'</p>';
            }
            content += '</div>';
            $("#settings-food").append(content);
            break;
} 
```

现在，当我运行它时，所有信息都被成功检索，直到我运行 printData 函数，这给了我 errorCB 显示“错误处理 SQL：未定义”。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:49:19.563

您的问题是返回堆栈：

当您到达 printData 时，您的调用堆栈如下所示：

```
----queryFoodDAll
----executeSQL
----disiplayAllFood (jump to printData)
----errorCB
----printData 
```

Javascript 将返回该调用堆栈；`errorCB`因此，当您在向下的途中跳过时，在返回的路上，无论您做什么，它都会触发该功能；因为它是回调堆栈的一部分。

你想要做的是没有你的`errorCB`作为回调函数。

而是检查您`displayAllFood()`的有效 SQL。如果它有效继续调用列表（意思是继续到`printData`），但如果它*无效*则调用`errorCB`。

# java - 将变量从一个类传递到另一个类

> ID：15029480
> 
> 赞同：2
> 
> 时间：2013-02-22T17:04:49.717
> 
> 标签：java, class, variables

大家好，我目前正在创建一个简单的程序。我有 2 个类，第一个是 SampleReturn，第二个是 GetValues。我想要发生的是，当我在 GetValues 类中输入一个名称时，我输入的名称将存储在一个变量中，稍后将由 SampleReturn 类用于显示该名称。不幸的是，我无法运行该程序，因为它有一个错误。下面的代码请帮助我解决这个问题。我只是自学我真的很想学习Java。谢谢！:)

GetValues 类中的代码：

```
import java.util.Scanner;
public class GetValues{
    Scanner inp = new Scanner(System.in);

    public static void wew(){
        System.out.println("Enter name: ");
        String a = inp.nextLine();

        private static String z = a;

        public static String kuhaName(){
            return z;
        }
    }
} 
```

SampleReturn 中的代码：

```
import java.util.Scanner;
    public class SampleReturn{
        public static void main(String[]args){

        String nameMo = GetValues.kuhaName();

        System.out.print("Your name is: " +nameMo);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T17:14:23.040

你的代码应该是这样的：

```
import java.util.Scanner;

public class GetValues
{
    private static Scanner inp = new Scanner(System.in);
    private static String z = "";
    public static void wew()
    {
        System.out.println("Enter name: ");
        String a = inp.nextLine();
        z = a;
    }
    public static String kuhaName()
    {
        return z;
    }
} 
```

然后`SampleRun.java`应该是这样的：

```
//import java.util.Scanner;//no need to import
public class SampleReturn
{
    public static void main(String[] args)
    {
        GetValues.wew();//First input the name .
        String nameMo = GetValues.kuhaName();//Retrieve the name
        System.out.print("Your name is: " +nameMo);//Display the name
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T17:10:21.653

您在此代码中遇到了一些问题。

首先，你不能在另一个方法中拥有一个方法。其次，你永远不会调用`wew`which 将实际读取输入。假设你的意思是这样的：

```
public class GetValues{
    Scanner inp = new Scanner(System.in);
    private static String z;

    public static void wew(){
        System.out.println("Enter name: ");
        String a = inp.nextLine();

        z = a;
    }

    public static String kuhaName(){
        return z;
    }
} 
```

您现在要做的就是按顺序调用您的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T17:09:01.810

那么首先想到的是该`wew`方法没有结束括号`}`

你也不能在你的方法中声明一个字段。您可能想`private static String z`在方法之外声明`wew`。

* * *

我已经阅读了你的作业，虽然我不会完全为你做作业，但我可以就你的程序架构给你一些建议。

首先，我会创建一个名为`Person`. 你可以随意调用你的类，但在这篇文章的其余部分，我将把这个类称为`Person`类。

现在你会希望你的班级有：

*   一个字段来存储`name`你的`Person`
*   一种从用户那里获取输入并将其放入`name`字段的方法。
*   打印`name`字段内容的方法。

在你的`main`方法中，你会想要

*   实例化你的`Person`
*   称之为输入获取方法
*   称之为打印方法。

# c# - 泛型 - 类型参数声明必须是标识符而不是类型

> ID：15029484
> 
> 赞同：2
> 
> 时间：2013-02-22T17:04:57.773
> 
> 标签：c#, generics

在第一行，我得到这个编译错误。“类型参数声明必须是标识符而不是类型。”。有没有办法解决这个问题？

```
 public class ExtJsGridJsonModel<IEnumerable<T>>
{
    [DataMember(Name = "total")]
    public int Total { get; set; }

    [DataMember(Name = "rows")]
    public IEnumerable<T> Rows { set; get; }

    public ExtJsGridJsonModel(IEnumerable<T> rows, int total)
    {
        this.Rows = rows;
        this.Total = total;
    }
} 
```

**更新：**

抱歉，我的问题和意图缺乏细节。基本上，我的最终目标是这样做：

```
new ExtJsGridJsonModel<Company>(); 
```

而不是这个：

```
new ExtJsGridJsonModel<IEnumerable<Company>>(); 
```

基本上，我想通过省略 IEnumerable 类型来减少代码。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T17:11:10.680

只需取出`IEnumerable`您的声明部分：

```
public class ExtJsGridJsonModel<T>
{
    [DataMember(Name = "total")]
    public int Total { get; set; }

    [DataMember(Name = "rows")]
    public IEnumerable<T> Rows { set; get; }

    public ExtJsGridJsonModel(IEnumerable<T> rows, int total)
    {
        this.Rows = rows;
        this.Total = total;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:06:58.863

我假设您将使用它来存储本质上是一组二维值：

```
public class ExtJsGridJsonModel<T> where T : IEnumerable
{
    [DataMember(Name = "total")]
    public int Total { get; set; }

    [DataMember(Name = "rows")]
    public IEnumerable<T> Rows { set; get; }

    public ExtJsGridJsonModel(IEnumerable<T> rows, int total)
    {
        this.Rows = rows;
        this.Total = total;
    }
} 
```

如果不是，或者`T`实际上是一个强类型的行类，那么可以去掉该`where T : IEnumerable`子句

# jquery - 将日期列表传递给 JQuery 日历

> ID：15029485
> 
> 赞同：6
> 
> 时间：2013-02-22T17:04:59.690
> 
> 标签：jquery, asp.net, list, datetime, jquery-ui-datepicker

有谁知道如何将代码中的日期列表传递给日历，因此它将突出显示列表中的日期。谢谢你

```
 <script>
        $(function () {
        $("#datepicker").datepicker();
        });
    </script>

   <p>Date: <input type="text" id="datepicker" /></p> 
```

存储在代码后面的日期列表：

```
DateTime start = new DateTime(2013, 02, 20);
        DateTime end = new DateTime(2013, 01, 11);

        var dates = new List<DateTime>();

        for (var dt = start; dt <= end; dt = dt.AddDays(1))
        {
            dates.Add(dt);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T21:45:35.843

最简单的解决方案是创建 asp.net 处理程序或将日期作为 json 对象返回的网页，并在 datepicker 内的 beforeShowDate 函数上使用它：

这是简单的实现：

```
var dates = []; //replace [] with ajax call to the page that returns the dates
$("#datepicker").datepicker({
      dateFormat: "dd-mm-yyyy",

      beforeShowDay: function (date) {
          var available = $.inArray(date, dates) > -1;   

          if (available) {
              return [1];   //return available date
          }
          else {
              return [0];   //return not available
          }
      }
}); 
```

后面的代码看起来像这样。您必须添加 System.Web.Extensions.dll 作为参考才能使用 JavaScriptSerializer

```
 protected void Page_Load(object sender, EventArgs e)
    {
        DateTime start = new DateTime(2013, 02, 20);
        DateTime end = new DateTime(2014, 01, 11);

        var dates = new List<string>();

        for (var dt = start; dt <= end; dt = dt.AddDays(1))
        {
            dates.Add(dt.ToString("dd-MM-yyyy"));
        }

        Response.ContentType = "text/javascript";
        string json = new JavaScriptSerializer().Serialize(dates);
        Response.Write(json);
        Response.End();
    }` 
```

# excel - 本机 C++ 中的 Excel COM 插件示例

> ID：15029486
> 
> 赞同：2
> 
> 时间：2013-02-22T17:05:00.337
> 
> 标签：excel, visual-c++, add-in

我需要编写一个 Excel 插件来将用户定义的函数 (UDF) 添加到 Excel。我更喜欢用非托管 C++ 编写它（我已经为 Word 编写了一个）。我无法从 Internet 上找到示例。

我想知道的是我应该查看哪个接口以及如何从 COM AddIn 注册 UDF 函数。文档很不清楚。

# lua - 游戏结束时停止计算得分

> ID：15029489
> 
> 赞同：2
> 
> 时间：2013-02-22T17:05:06.897
> 
> 标签：lua, coronasdk

我喜欢有一个触发器在事件发生时停止计算分数，

```
function restartStopScore()
     score = score + 0
end 
```

不管用

```
score = 0
local scoreText = display.newText( "Score: " .. score, 20, 20,nil, 40)
scoreText:setTextColor(255,255,255)

local function getScore() -- increments Speed value every time it is called
 score = score + 1
 scoreText.text = "Score: " .. score 
 print("score" .. score)
 end
 timer.performWithDelay(1000, getScore, 0)

function restartScore()
     --reset the score
     score = 0   
end
 timer.performWithDelay(5000, restartScore, 1)--test trigger reset the score 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T17:11:32.967

当您想要保持分数时，您将需要设置一个[布尔变量](http://en.wikipedia.org/wiki/Boolean_data_type)( *true/false )。*在顶部初始化**keeping_score 。**

```
keeping_score = true 
```

用这个包装你的分数递增：

```
if keeping_score then
    score = score + 1
end 
```

您的启动/停止功能将如下所示：

```
function restartStopScore()
    keeping_score = false
end
function restartContinueScore()
    keeping_score = true
end 
```

# python - 如何在 python 中找到有关函数的信息？

> ID：15029495
> 
> 赞同：5
> 
> 时间：2013-02-22T17:05:21.663
> 
> 标签：python

我知道在 R 中你可以输入 ?"function_name"。你如何在python中做到这一点？具体来说，我正在尝试`set_position`在`pyplot`图书馆中查找有关信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T17:05:47.823

```
help(function) 
```

应该做的伎俩。

演示：

```
def func():
    """
    I am a function who doesn't do anything,
    I just sit in your namespace and crowd it up.
    If you call me expecting anything
    I'll just return to you the singleton None
    """
    pass

help(func) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T17:14:36.727

尝试运行`ipython`，在这种情况下，您可以键入：

```
In [1]: from matplotlib import pyplot as pl

In [2]: pl.set_position?
Object `pl.set_position` not found. 
```

在这里，您必须使用[google](https://www.google.com/search?q=pyplot+%22set_position%22)找出这`set_position`是`Axes`该类的方法：

```
In [3]: pl.Axes.set_position?
Type:       instancemethod
String Form:<unbound method Axes.set_position>
File:       /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/axes.py
Definition: pl.Axes.set_position(self, pos, which='both')
Docstring:
Set the axes position with::

  pos = [left, bottom, width, height]

in relative 0,1 coords, or *pos* can be a
:class:`~matplotlib.transforms.Bbox`

There are two position variables: one which is ultimately
used, but which may be modified by :meth:`apply_aspect`, and a
second which is the starting point for :meth:`apply_aspect`.

Optional keyword arguments:
  *which*

    ==========   ====================
    value        description
    ==========   ====================
    'active'     to change the first
    'original'   to change the second
    'both'       to change both
    ==========   ==================== 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T17:12:38.587

在`ipython`它的超级简单中 - 只需将`?`（或`??`使用源代码的扩展信息）附加到有问题的函数。

我总是在以交互方式工作时使用它`matplotlib`：

```
In [2]: from matplotlib.axes import Axes

In [3]: Axes.set_position??
Type:       instancemethod
String Form:<unbound method Axes.set_position>
File:       /home/tzelleke/.local/modules/active_python_2.7/lib/python2.7/site-packages/matplotlib/axes.py
Definition: Axes.set_position(self, pos, which='both')
Source:
    def set_position(self, pos, which='both'):
        """
        Set the axes position with::

          pos = [left, bottom, width, height]

        in relative 0,1 coords, or *pos* can be a
        :class:`~matplotlib.transforms.Bbox`

        There are two position variables: one which is ultimately
        used, but which may be modified by :meth:`apply_aspect`, and a
        second which is the starting point for :meth:`apply_aspect`.

        Optional keyword arguments:
          *which*

            ==========   ====================
            value        description
            ==========   ====================
            'active'     to change the first
            'original'   to change the second
            'both'       to change both
            ==========   ====================

        """
        if not isinstance(pos, mtransforms.BboxBase):
            pos = mtransforms.Bbox.from_bounds(*pos)
        if which in ('both', 'active'):
            self._position.set(pos)
        if which in ('both', 'original'):
            self._originalPosition.set(pos)

In [4]: 
```

# jquery - 如何更改此字体？

> ID：15029497
> 
> 赞同：0
> 
> 时间：2013-02-22T17:05:27.747
> 
> 标签：jquery, html

我想更改 id=zticker 的字体

html代码

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="jquery.zrssfeed.min.js" type="text/javascript"></script>
    <script src="jquery.vticker.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="css.css" />

<script type="text/javascript">
$(document).ready(function () {
    $('#zticker').rssfeed('http://feeds.bbci.co.uk/news/rss.xml',{
        header: false,
        titletag: 'div',
        date: false,
        content: false
    }, function(e) {
        $.zazar.ticker({selector: '#zticker ul'});
    });

});
</script>
<div id="zticker"></div>
</body>
</html> 
```

和样式文件

```
#zticker
{
color:black;
font:arial;
} 
```

我做了一些风格，但它不起作用我能做什么，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:08:31.607

试试这个代码：

```
 $(document).ready(function () {
    $('#zticker').css('font-family', 'Verdana');
    //other code
}); 
```

新更新尝试将此插入您的CSS

```
.feedEntryContent{
    font-family: the font that you want;
} 
```

或这个：

```
.rssFeed{
        font-family: the font that you want;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:45:20.170

我猜你缺少正确的标签。您需要关闭头部标签并插入正文标签..否则我看不出css不起作用的任何原因..也许有一个！重要的地方覆盖了你的css。

```
</head><body> 
```

使用它来强制颜色

```
#zticker,#zticker ul,#zticker li
{
    color:black !important;
} 
```

# c - 在 C 中返回一个 char*

> ID：15029502
> 
> 赞同：-1
> 
> 时间：2013-02-22T17:05:38.913
> 
> 标签：c

有什么想法为什么这段代码不起作用？

```
#include <stdio.h>

char* get_name()
{
    char string[4];

    string[0] = 'A';
    string[1] = 'N';
    string[2] = 'A';
    string[3] = '\0';

    return string;
}

int main()
{
    char *name = get_name();

        printf("%s \n", name);

        return 0;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T17:06:44.807

您的代码失败，因为您正在返回一个指向立即超出范围的变量的指针。您正在返回一个指向局部变量的指针。局部变量的作用域在函数返回时结束。因此，在范围结束后尝试引用它们是错误的。

您需要使用`malloc`来分配字符串。这样你就可以分配一个对象，其生命周期在函数结束后仍然存在。

```
char* get_name()
{
    char *string = malloc(4);
    strcpy(string, "ANA");
    return string;
} 
```

请记住，您需要将每个呼叫`malloc`与对 的呼叫相匹配`free`。

```
char *name = get_name();
printf("%s \n", name);
free(name); 
```

我在这里也省略了错误检查以简化事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:07:01.983

`string`是一个局部变量。当您从 中返回时`get_name`，此变量不再存在。

# jquery - 在 Orbit 中使用 div 而不是项目符号

> ID：15029503
> 
> 赞同：0
> 
> 时间：2013-02-22T17:05:39.820
> 
> 标签：jquery, zurb-foundation, orbit

Orbit 内置了子弹导航系统。我不想使用这些项目符号在幻灯片之间导航，而是想使用我页面上导航菜单中的项目来做同样的事情。有没有一种优雅的方法可以基本上用一系列 div 代替子弹，这样当我点击我的一个 div 时，它会导致 Orbit 滚动到适当的幻灯片？创建自己的内容滑块会更明智吗？提前感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T03:10:39.530

我也在寻找一种方法来做到这一点 - 看起来这可能应该内置在轨道上以获得更大的灵活性。

我快速浏览了一下并使用轨道 1.4.0调整了这个解决方案[https://github.com/zurb/foundation/issues/118/ 。](https://github.com/zurb/foundation/issues/118/)

您可以为导航使用任何您喜欢的结构：

```
<div id="custom-orbit-nav">
   <div>1</div>
   <div>2</div>
   <div>3</div>
</div> 
```

然后用jquery绑定导航div，并使用orbit函数改变幻灯片索引，这是我的初始化代码：

```
$("#featured").orbit();
$("#custom-orbit-nav div").click(function() {
    var myIndex = $(this).index();
    $(this).addClass("active");
    $("#featured").trigger("orbit.stop").trigger("orbit.goto", [myIndex]);
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T03:02:21.253

确保在设置 Orbit 时启用了项目符号。这看起来像：

```
$(document).ready(function() {
  $("#yourOrbitElement").orbit({
    bullets: true
  });
}); 
```

然后，使用 CSS，将项目符号设置为`visibility: hidden;`使用 CSS。

然后，您只需要欺骗 Orbit 使其认为当您实际使用 jquery 的`.click()`. 这可能看起来像：

```
$(".yourNavElements").click(function(){ //when you click on your nav element
  $("#theAppropriateBullet").click();   //auto-click on the corresponding bullet
}); 
```

为此，您需要一些方法来跟踪哪个导航按钮控制哪个项目符号。我在每个导航按钮的属性中存储了一个索引号`data`，然后针对`:contains()`匹配索引的项目符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T21:28:31.820

只是一个快速的仅供参考，因为我花了比我愿意承认自己试图解决这个问题的时间更多的时间。Foundation/Orbit 现在（不确定从什么时候开始，这是我第一次尝试）现在支持开箱即用的深度链接。以防其他人像我一样偶然发现：http: [//foundation.zurb.com/docs/components/orbit.html](http://foundation.zurb.com/docs/components/orbit.html)

# c# - 如何在 2D 中预测船舶与物体的影响范围之间的相遇

> ID：15029504
> 
> 赞同：17
> 
> 时间：2013-02-22T17:05:41.723
> 
> 标签：c#, algorithm, math, collision-detection, orbital-mechanics

长期聆听者，第一次来电者。我正在 XNA 中制作一个小游戏，关于太空中的运输船，类似于海上的集装箱船。我需要能够在受限的 2D 环境中预测船与行星/卫星[引力影响范围之间的相遇。](http://en.wikipedia.org/wiki/Sphere_of_influence_(astrodynamics))船和行星/月球的位置，简称体，由[开普勒轨道元素](http://en.wikipedia.org/wiki/Orbital_elements)确定。Ship 和 Body 都围绕同一个吸引中心运行。

到目前为止，我设计的方法是首先对远点和近点（距吸引力中心最远和最近的点）进行一些初步检查，看看是否有可能相遇。在这样的检查之间，如果船舶的轨道是开放的（双曲线，我将抛物线情况近似为双曲线），它可以排除许多不可能遇到的情况。

如果这些检查确定可能发生相遇，我将确定船舶有资格发生相遇的距吸引力中心的最小和最大距离。然后我得到船舶轨道与由最小值和最大值定义的两个圆的交点。这会在飞船的轨道上产生零个、两个或四个点，定义零个、一个或两个周期，在这些点上它可能会遇到身体的球体。在这一点上，如果有零个交叉点，则整个船舶轨道可能都在相遇区，这可能是一个不常见的极端情况，但需要被覆盖。

我可以得到船将通过其轨道上的这些点的时间，给一两个时间窗口来检查相遇，但从那里我最好的解决方案是通过将时间跨度划分为步骤来搜索时间跨度，计算身体的位置那些时候，然后测试遇到。

这种方法的问题在于知道有效找到相遇的步骤的大小。及时获取 Body 的位置有点贵，所以我宁愿尽量少做，但步数太大可能会错过遭遇。

共焦圆锥形状是否有任何特性可以帮助减少搜索空间？或者是否有其他方法可以预测沿圆锥路径移动的点和沿共享焦点的椭圆移动的圆之间的相遇/碰撞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:48:06.590

您可以尝试使用通常的毕达哥拉斯距离表达式构建将行星与船之间的（平方）距离描述为时间函数的函数。您正在寻找此函数的零点，因此可以应用[牛顿法或类似方法来找到它们。](http://en.wikipedia.org/wiki/Newton%27s_method)

如果行星的运动比船的运动慢得多，这应该可以很好地工作——那么函数将相对平滑，并且牛顿的方法不会有收敛的问题。但是，如果行星的运动速度比船快得多，那么这个距离函数就会上下反弹，就像一个“弹簧”叠加在一些抛物线状的曲线上，并可能与 x 轴相交数次。牛顿法在处理此类函数时可能会遇到问题，因为导数会迅速改变方向。

希望在您构造距离函数时某些项会被抵消，或者表达式可以以其他方式简化或近似，但如果不是，则在垂直和水平方向寻找零可能就足够了。（实际上，您可以选择沿任何轴的距离——例如行星轨道的长轴。）这些函数中的任何一个中的零点都是碰撞的必要条件，但不是充分条件，并且可能更易于计算。如果您有一个按时间排序的 x 方向零的列表，并且对于 y 方向的零也相同，您可以通过使用列表合并（a la mergesort）计算它们的交集来找到任何真正的碰撞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:09:10.630

使用径向碰撞检测（圆圈），一个圆圈代表行星的重力影响（将大于行星本身），另一个圆圈代表每艘船，并使每个圆圈的中心点以直线相向移动随着距离的缩短，如此轻微。

将每个圆圈的拉力应用于每艘船的移动速度。只需简单的三角函数即可完成运动，x 为 cos()，y 为 sin()，无需任何更复杂的数学运算。当任何两个物体之间的距离小于它们的半径之和时，就会发生碰撞。

但是当只在“重力​​圈”上进行这种形式的碰撞时，可以说，当它们发生碰撞时，您可以在每次迭代时将船的速度增加一点，以模拟重力的拉力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-26T23:14:54.703

由于这还没有得到接受的答案，而且我没有看到下面的计算，我将添加这些以希望它对某人有所帮助。我还没有弄清楚如何获得日期时间，但是我已经弄清楚了如何获得角度。如果您知道角度，这将为您提供轨道体和 soi（或船）之间的距离：

```
public static double RadiusAtAngle(double angle, double semiLatusRectum, double eccentricity)
{
    return semiLatusRectum / (1 + eccentricity * Math.Cos(angle)); 
} 
```

更重要的是，如果您知道 semiLatusRectum 和偏心率（这里的半径将是从 body 到 soi 边缘的距离），则翻转该 calc 可以获得到 soi 边缘的角度：

```
public static double AngleAtRadus(double radius, double semiLatusRectum, double eccentricity)
{
    //r = p / (1 + e * cos(θ))
    //1 + e * cos(θ) = p/r
    //((p / r) -1) / e = cos(θ)
    return Math.Acos((semiLatusRectum / radius - 1) / eccentricity);
} 
```

作为参考，可以从 semiMajorAxis 和 eccentricity 中找到 semiLatusRectum：

```
public static double SemiLatusRectum(double SemiMajorAxis, double eccentricity)
{
    if (eccentricity == 0)//ie a circle 
        return SemiMajorAxis;
    return SemiMajorAxis * (1 - eccentricity * eccentricity);
} 
```

请注意，这些计算也适用于双曲线轨迹。

# java - 带有 JAVA 的 Http 请求和错误响应 500

> ID：15029506
> 
> 赞同：1
> 
> 时间：2013-02-22T17:05:49.563
> 
> 标签：java, coldfusion

我正在编写一个 java 应用程序，它向服务器发出 http 请求并解析响应 html 和错误页面。我需要从请求中获取错误响应页面。如果我问的问题很简单，请原谅我，我是 Java 新手，我主要使用 Coldfusion、Javascript、Flash 进行编程，并且我使用了一点 C#。这是我的代码

* * *

```
package com.http.req;

import java.net.*;

import java.io.*;

public class URLConnectionReader {

    public static void main(String[] args) throws Exception {
        String s1 = getInput();

        URL webpage = new URL(s1);

        URLConnection yc = webpage.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(yc
                .getInputStream()));
        String inputLine;

        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);
        in.close();
    }

    public static String getInput() {

        BufferedReader url = new BufferedReader(
                new InputStreamReader(System.in));

        System.out.flush();

        try { 

            return url.readLine();

        } catch (Exception e) {

            return "Error";

        }

    }
} 
```

我需要它来返回从 http 请求生成的 Coldfusion 错误页面。当coldfusion代码正确编写时，url.readline（）返回html，我如何让它读取错误页面？

# x509 - 更正 SSLserver 证书的 x509 扩展

> ID：15029509
> 
> 赞同：0
> 
> 时间：2013-02-22T17:05:56.003
> 
> 标签：x509, ca

我的任务是使用我的 CA 服务器签署 SSLserver 证书请求。

我已经通过 SSLservers 私钥创建了证书请求。然后，我开始使用现有的 CA 服务器证书签署此请求。但是，在提交生成的 SSLserver 证书时，我收到一条错误消息，通知我 SSLserver 证书具有不正确的 x509 扩展名（请参阅下面的证书中的扩展名）。

```
X509v3 extensions:
        X509v3 Basic Constraints: 
            CA:FALSE
        X509v3 Key Usage: critical
            Key Encipherment
        X509v3 Extended Key Usage: critical
            TLS Web Server Authentication
        X509v3 Subject Key Identifier: 
            F4:3C:05:E9:99:5F:AF:2C:9C:14:25:4E:A4:65:27:49:21:96:52:79
        X509v3 Authority Key Identifier: 
            keyid:06:D6:E7:09:5D:2A:FD:91:1F:55:3B:EA:8B:90:E8:B7:38:A1:DF:46 
```

我的问题是 SSLserver 证书应该有哪些扩展？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T13:45:12.860

您缺少基本密钥用法：数字签名

此外，将扩展密钥用法标记为关键*可能会*导致不兼容。

有关详细信息，请参阅[https://security.stackexchange.com/q/24106/3306](https://security.stackexchange.com/q/24106/3306)。

# java - 多次获取 Java 小程序依赖项

> ID：15029510
> 
> 赞同：0
> 
> 时间：2013-02-22T17:06:00.640
> 
> 标签：java, applet, jaxb

我目前正在研究 embeds 的 Web 应用程序`<applet>`，它有几个依赖项（.jar 文件）。

Applet 标签看起来像这样：

```
<applet ...
        type="application/x-java-applet"
        codebase="/webapp/applet">
     ...
     <param name="codebase" value="./applet"/>
     <param name="archive" value="a.jar,b.jar,c.jar"/>
     <param name="codebase_lookup" value="false"/>
</applet> 
```

Applet 工作正常，但问题是，当它第一次加载**时**，那些 a.jar、b.jar、c.jar 等正在从 Web 服务器**请求（和下载）很多****（20-300）次**，每个，这使得小程序启动很慢。

发生了什么事，是否为每个加载的类分别重新下载 jars？

有没有办法正确优化/配置小程序？尝试了几种缓存技巧（例如`<param name="cache_archive" />`，但没有成功，甚至不确定这是解决此问题的正确方法。

注意！这个小程序是**WS 客户端**（有一些**JAXB**注释的类和相关的依赖项）。

* * *

小程序登录启动有很多：

```
network: Connecting http://127.0.0.1:7001/webapp/applet/a.jar with proxy=DIRECT
network: Connecting http://127.0.0.1:7001/webapp/applet/a.jar with proxy=DIRECT
network: Connecting http://127.0.0.1:7001/webapp/applet/a.jar with proxy=DIRECT
... ~100 more times a.jar is downloaded
network: Connecting http://127.0.0.1:7001/webapp/applet/a.jar with proxy=DIRECT
network: Connecting http://127.0.0.1:7001/webapp/applet/b.jar with proxy=DIRECT
network: Connecting http://127.0.0.1:7001/webapp/applet/b.jar with proxy=DIRECT
network: Connecting http://127.0.0.1:7001/webapp/applet/c.jar with proxy=DIRECT
network: Connecting http://127.0.0.1:7001/webapp/applet/a.jar with proxy=DIRECT
network: Connecting http://127.0.0.1:7001/webapp/applet/c.jar with proxy=DIRECT
... 
```

Web服务器访问日志反映小程序日志：

```
127.0.0.1 - "GET /webapp/applet/a.jar HTTP/1.1" 200 1232582 
127.0.0.1 - "GET /webapp/applet/a.jar HTTP/1.1" 200 1232582 
127.0.0.1 - "GET /webapp/applet/a.jar HTTP/1.1" 200 1232582 
...
127.0.0.1 - "GET /webapp/applet/a.jar HTTP/1.1" 200 1232582 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:24:21.250

发生这种情况是因为在**CXF** `URL.openStream()`中用于访问来自 jars（模式、wsdls 等）的不同资源。

通过替换**类加载器**`URL.openStream()`中的`getResourceAsStream()`方法解决了问题（显然进行了不必要的连接并且没有）。**`Applet2ClassLoader.getResource().openStream()``Applet2ClassLoader.getResourceAsStream()`**

 **更新：它似乎正在使用 Java7 插件，但不是 Java6 插件。**

# c# - 在 MVC.Net 中链接 lambda 表达式，无需重复传递 HtmlHelper 对象

> ID：15029511
> 
> 赞同：3
> 
> 时间：2013-02-22T17:06:06.000
> 
> 标签：c#, asp.net-mvc, lambda, chaining

我的目标是创建一个对象以允许在 MVC.Net 视图中链接命令。

这是我使用此概念创建的菜单视图中的示例使用：

```
<nav class="navigation">
    <%: Html
        .menu()
            .item("Introduction", "Introduction", "Home")
            .item("About", "About", "Home")
            .item("Systems", "Index", "Systems")
            /*.item("Categories", "Categories", "Health")*/
            .item("Test Cases", "TestCases", "Testing")
            .category("Logging")
                .item("UniMon Events", "UniMonEvents", "Logging")
            .end()
        .end() %>
</nav> 
```

正如你所看到的，它允许快速构建一个多层菜单，各个部分之间相互依赖。

我想为使用 lambda 表达式的表单实现同样的效果。

理想的语法如下所示：

```
<%: Html
    .form()
        .hidden(m=>m.property1)
        .hidden(m=>m.property2)
    .end() %> 
```

我遇到麻烦的地方是**隐藏**方法。似乎没有办法让编译器推断**m**而不将其传递给方法**hidden**。

我可以实现这种语法：

```
<%: Html
    .form()
        .hidden(Html, m=>m.property1)
        .hidden(Html, m=>m.property2)
    .end() %> 
```

使用此类和扩展方法（未显示）：

```
public class RouteForm
{
    public HtmlHelper HtmlHelper { get; private set; }
    public Dictionary<string, string> PostData { get; private set; }

    public RouteForm(HtmlHelper htmlHelper)
    {
        HtmlHelper = htmlHelper;
        PostData = new Dictionary<string, string>();
    }

    public RouteForm hidden<TModel, TValue>(HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TValue>> expression)
    {
        string name = ExpressionHelper.GetExpressionText(expression);
        string value = GetFieldValue(htmlHelper, expression);
        PostData.Add(name, value);
        return this;
    }
    private static string GetFieldValue<TModel, TValue>(HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TValue>> expression)
    {
        object oValue = expression.Compile()(htmlHelper.ViewData.Model);
        string value = (oValue is Enum) ? ((int)oValue).ToString() : oValue.ToString();
        return value; ;
    }
    public MvcHtmlString end()
    {
        //TODO: render form with post data
        return MvcHtmlString.Empty;
    }
} 
```

我想也许我正在寻找一个具有泛型类型的类，所以我尝试了这个：

```
public class RouteForm<TModel>
{
    public HtmlHelper<TModel> HtmlHelper { get; private set; }
    public Dictionary<string, string> PostData { get; private set; }

    public RouteForm(HtmlHelper<TModel> htmlHelper)
    {
        HtmlHelper = htmlHelper;
        PostData = new Dictionary<string, string>();
    }

    public RouteForm<TModel> hidden<TModel, TValue>(Expression<Func<TModel, TValue>> expression)
    {
        string name = ExpressionHelper.GetExpressionText(expression);
        string value = GetFieldValue(expression);
        PostData.Add(name, value);
        return this;//ERRORS: TModel is TModel
    }
    private string GetFieldValue<TModel, TValue>(Expression<Func<TModel, TValue>> expression)
    {
        object oValue = expression.Compile()(
            (TModel)HtmlHelper.ViewData.Model //ERRORS: Cannot convert type TModel to TModel
        );
        string value = (oValue is Enum) ? ((int)oValue).ToString() : oValue.ToString();
        return value; ;
    }
    public MvcHtmlString end()
    {
        //TODO: render form with post data
        return MvcHtmlString.Empty;
    }
} 
```

我使用注释将错误放在上面的代码中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:08:33.763

您使用了太多通用参数。

诸如`GetFieldValue<TModel, ...>`创建与第一个参数无关的*第二个参数之类的方法。* `TModel`

换句话说，它们允许你写

```
new RouteForm<PersonModel>().GetFieldValue<TruckModel, ...>() 
```

这显然是错误的。

相反，只需从每个方法中去掉那个参数，让它们使用类的`TModel`参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T20:10:38.933

我猜编译错误“ERRORS: TModel is TModel”是由在 hidden() 的通用声明中两次声明 TModel 引起的。

我还没有编译这个，但我会尝试这样的事情：

```
public static class HtmlHelperExtensions
{
    public static RouteForm<TModel> form(this HtmlHelper helper, TModel model)
    {
        return new RouteForm<TModel>(helper);
    }
}

public class RouteForm<TModel>
{
    public RouteForm<TModel> hidden(Expression<Func<TModel, TValue>> expression)
    {
    }        
    public MvcHtmlString end()
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:57:51.073

感谢你们两个，我能够创建一个实现我正在寻找的语法的类。

（此帖子的课程已简化） **课程：**

```
public class RouteForm<TModel>
{
    public HtmlHelper<TModel> HtmlHelper { get; private set; }

    public RouteForm(HtmlHelper<TModel> htmlHelper)
    {
        HtmlHelper = htmlHelper;
    }

    public RouteForm<TModel> hidden<TValue>(Expression<Func<TModel, TValue>> expression)
    {
        return this;
    }
    public MvcHtmlString end()
    {
        return MvcHtmlString.Empty;
    }
} 
```

**扩展方法：**

```
public static RouteForm<TModel> form<TModel>(this HtmlHelper<TModel> helper)
{
     return new RouteForm<TModel>(helper);
} 
```

**标记语法：**

```
<%: Html
    .form()
        .hidden(m=>m.Property1)
        .hidden(m=>m.Property2)
    .end()
%> 
```

# php - cakephp - 搜索整个模型和 HasManys 并使用通配符

> ID：15029513
> 
> 赞同：0
> 
> 时间：2013-02-22T17:06:08.113
> 
> 标签：php, mysql, cakephp, search

我有一个用户模型和其他 3 个用户模型（HasManys）：技能、经验、资格

> 公共 $hasMany = 数组（
> 
> ```
>  'Experience' => array(...
>   'Qualification' => array(...
>   'Skill' => array(... 
> ```

并且 3 个模型中的每一个都有

> public $belongsTo = array('用户' => array(...

Skill、Experience 和 Qualification 都包含一个名为“title”和“description”的字段

**通过所有 3 个模型的每个OR** “标题”和“描述”并返回符合条件的用户，通配符搜索 (%search%) 的最佳方法是什么？

我很难理解它，而且我搜索的任何东西都与我想要的相反或不相关。

有谁知道如何完成这样的任务？

到目前为止，我有这样的事情：

```
$cond=array('OR'=>array(
"Skills.name LIKE '%$keyword%'",
"Experiences.name LIKE '%$keyword%'", 
"Experiences.description LIKE '%$keyword%'")  
);

$conditions = array('conditions'=>$cond);
$list = $this->User->find('all', 
    array('conditions') => $cond);

$list = $this->User->find('all', array('recursive'=> 1, 'conditions'=> $cond)); 
```

任何帮助都将不胜感激，因为我花了 5 个小时的大部分时间寻找和尝试不同的方法，但实际上无济于事。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:23:15.670

我会使用“关键字”条件过滤每个模型并从中收集用户 ID。在此之后，使用用户 ID 列表返回用户列表。就像是;

```
// get distinct user-ids and simplify the results array with Hash::extract()
$userIds = Hash::extract($this->User->Skill->find('all', array(
    'fields' => array('DISTINCT Skill.user_id'),
    'conditions' => array('Skill.name LIKE ?' => "%$keyword%"),
    'recursive' => -1
)), '{n}.User.id');

// repeat for the other tables, and merge the user-ids

.....

// Use the list of user-ids for retrieve matching users
$this->User->find('all', array('conditions' => array('User.id' => $userIds))); 
```

但是，根据用户的数量，这可能会返回一个巨大的用户 ID 列表，这可能并不理想。最后，总是可以使用自定义查询并使用 model->query() 执行它。

# visual-c++ - 错误 LNK2001：未解析的外部符号 __imp__Py_InitModule4

> ID：15029519
> 
> 赞同：4
> 
> 时间：2013-02-22T17:06:25.887
> 
> 标签：visual-c++, python-2.7

我正在尝试用 C++ 扩展 Python。我正在使用 Visual C++ 2008 和 Python 2.7。我在构建 .dll 文件时遇到了很多问题，最后当一切似乎都正确时，我无法停止收到此错误：

错误 LNK2001：未解析的外部符号 _ *imp* _Py_InitModule4

我知道这不是链接器错误，因为我之前遇到过这个错误（它给了我错误，但有各种*Py* _... 函数），我已经解决了这个问题。

我不知道这是否是重要数据，但我也使用 VC++ 2008 构建了 python27_d.dll。

这是代码：

```
#include "Python.h"

#include <windows.h>

#include <string.h>

#include <tchar.h>

#include <stdlib.h>

#include <Aclapi.h>

struct file_perms {

  char user_domain[2050];

   unsigned long user_mask;

};

 void lookup_sid ( ACCESS_ALLOWED_ACE* pACE, char user_domain[] ) {

  char username[1024]="";

 char domain[1024]="";

ULONG len_username = sizeof(username);

ULONG len_domain = sizeof(domain);

PSID pSID =(PSID)(&(pACE->SidStart));

SID_NAME_USE sid_name_use;         

LPWSTR username1 = reinterpret_cast<LPWSTR>( username );
LPWSTR domain1 = reinterpret_cast<LPWSTR>( domain );
if (!LookupAccountSid(NULL, pSID, username1, &len_username, domain1, &len_domain, &sid_name_use)){  

    strcpy(user_domain, "unknown");

} else {

    strcat(user_domain,domain);

    strcat(user_domain,"\\");

    strcat(user_domain,username);

}

}

void acl_info( PACL pACL, ULONG AceCount, file_perms fp[]){     

for (ULONG acl_index = 0;acl_index < AceCount;acl_index++){

    ACCESS_ALLOWED_ACE* pACE;

    if (GetAce(pACL, acl_index, (PVOID*)&pACE))         

    {       

        char user_domain[2050]="";  

        lookup_sid(pACE,user_domain);

        strcpy(fp[acl_index].user_domain,user_domain);

        fp[acl_index].user_mask=(ULONG)pACE->Mask;

    }

}

}

static PyObject *get_perms(PyObject *self, PyObject *args)

{

PyObject *py_perms = PyDict_New();

//get file or directory name

char *file;

if (!PyArg_ParseTuple(args, "s", &file))

    return NULL;

//setup security code

PSECURITY_DESCRIPTOR pSD;

PACL pDACL; 

//GetNamedSecurityInfo() will give you the DACL when you ask for

//DACL_SECURITY_INFORMATION. At this point, you have SIDs in the ACEs contained in the DACL. 

LPWSTR file1 = reinterpret_cast<LPWSTR>( file );

ULONG result = GetNamedSecurityInfo(file1,SE_FILE_OBJECT, DACL_SECURITY_INFORMATION, NULL, NULL, 

&pDACL, NULL, &pSD);

if (result != ERROR_SUCCESS){ return NULL;}

if (result == ERROR_SUCCESS){

    ACL_SIZE_INFORMATION aclSize = {0};

    if(pDACL != NULL){   

        if(!GetAclInformation(pDACL, &aclSize, sizeof(aclSize),

            AclSizeInformation)){

            return NULL;

        }

    }

    file_perms *fp = new file_perms[aclSize.AceCount];

    acl_info(pDACL, aclSize.AceCount, fp );

    //Dict

    for (ULONG i=0;i<sizeof(fp);i++){

        PyObject *domain = Py_BuildValue("s",fp[i].user_domain);

        PyObject *user = Py_BuildValue("s",fp[i].user_mask);

        PyDict_SetItem(py_perms,domain,user);

    }

}

return py_perms;

};

static PyMethodDef fileperm_methods[] = {

{ "get_perms", get_perms, METH_VARARGS, "Execute a shell command." },

{ NULL, NULL, 0, NULL }

};

extern "C"
__declspec(dllexport)
void init_fileperm(void)
{
PyObject *m=Py_InitModule("fileperm",fileperm_methods);

return;
} 
```

我正在使用 Windows 7 64 位。

我知道 Python 3 不推荐使用 Py_InitModule，但我正在使用 Python27 (2.7.3)。

有人知道我为什么会收到此错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-28T10:19:37.423

我有同样的问题。如果您正在编译 64-bit `pyd`，请确保`python27.lib`也是 64-bit （编译 32-bit`pyd`和 32-bit 也是如此`python27.lib`）。

# ios - 如何封装 UIViewController？

> ID：15029520
> 
> 赞同：1
> 
> 时间：2013-02-22T17:06:25.883
> 
> 标签：ios, objective-c, xcode

我创建了一个 UIViewController，例如 DemoTableViewController，并希望在其他项目中重用它。我需要创建一个库来重用它，而不是复制控制器的源文件，但是，在我创建一个包含 DemoTableViewController 的静态库并在情节提要中设置视图控制器的类后，出现错误：

```
Interface Builder 文件中的未知类 DemoTableViewController。
```

![在此处输入图像描述](../Images/7f3a136e3bf127a0286a0e061db62c2c.png)

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:08:01.003

在右上角的自定义类字段中，您可以看到您将其作为`DemoTableViewController`而不是`DemoViewController`（假设您提到的问题`DemoViewController`是您为此自定义类提供的类名）。改变它然后检查。它应该工作。

如果上述方法不起作用，请确保您已将`DemoTableViewController.h`文件复制到当前项目，并且此库已添加到目标设置 -> 链接框架和库。

# c# - 在 orderby 中将无效整数解析为 null

> ID：15029521
> 
> 赞同：1
> 
> 时间：2013-02-22T17:06:26.287
> 
> 标签：c#, linq, sql-order-by

```
var list = new string[] { TextBox1.Text, TextBox2.Text, TextBox3.Text };
list = list.OrderBy(x => int.Parse(x)).ToArray(); 
```

谁能建议如何修改上面的代码，以便为每个无法解析为整数的值返回一个空值？

我想我需要以`Parse`某种方式替换`TryParse`？

**澄清**：

该程序接受来自 3 个不同文本框的 3 个整数，对它们进行排序并将序列插入数据库。如果输入了非整数，我想将其视为空值。

例如，如果和`TextBox1.Text = ""`，插入的序列将是：。`TextBox2.Text = "45"``TextBox3.Text = "8"``0,8,45`

但是，我现在认为从排序中排除非整数可能会更好，因此对于同一个示例，结果序列将类似于：`8,45,N/A`.

很抱歉无法清楚地解释我的要求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T17:11:24.250

*如果*您真的在使用 LINQ to Objects，我会编写一个单独的方法：

```
public static int? ParseOrNull(string text)
{
    int result;
    return int.TryParse(text, out result) ? (int?) result : null;
} 
```

然后：

```
list = list.OrderBy(x => ParseOrNull(x)).ToArray(); 
```

这将处理文本值，这些文本值要么是对非​​数字的真正字符串引用，要么是空引用。您可能希望重载`ParseOrNull`以接受`IFormatProvider`.

然而，这只是按一个可为空的 int*排序*。如果您希望将无效的值*替换*为 null，但其他值保留为字符串（按数值排序），我怀疑您想要更多类似的东西：

```
var result = list.Select(x => new { Text = x, Numeric = ParseOrNull(x) })
                 .OrderBy(pair => pair.Numeric)
                 .Select(pair => pair.Numeric.HasValue ? pair.Text : null)
                 .ToArray(); 
```

如果这些都不符合您的要求，请说明您的要求。

请注意，这些都不适用于 LINQ to SQL 或实体框架之类的东西，它们无法将您的方法转换为 SQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:12:06.580

尝试这个：

```
var list = new string[] { TextBox1.Text, TextBox2.Text, TextBox3.Text };
list = list.OrderBy(x =>
            {
                int val;
                return int.TryParse(x, out val) ? (int?)val : null;
            }).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T17:21:30.110

据我了解要求并阅读您的代码（将结果分配给同一个数组），您仍然希望*字符串*作为输出，但按其数值排序，并且您希望在结果数组中无法解析的字符串为`null`;

```
var result = 
    list
      .Select(x => { int tmp; return Int32.TryParse(x, out tmp) ? x : null; })
      .OrderBy(x => x); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-22T17:12:33.957

尝试这个：

```
 var list = new string[] { TextBox1.Text, TextBox2.Text, TextBox3.Text };
    list = list.OrderBy(x => ParseStringToInt(x)).ToArray();

    private int ParseStringToInt(string value)
    {
        int result;
        int.TryParse(value, out result);
        return result;
    } 
```

# php - 用于动态 JavaScript 的 Smarty {literal} 标签的替代品

> ID：15029524
> 
> 赞同：4
> 
> 时间：2013-02-22T17:06:30.947
> 
> 标签：php, javascript, smarty, analytics, smarty2

我有以下 Smarty 模板，该模板完整显示，可生成一些 JavaScript。

如您所见，我在整个代码片段中都打开`{literal}`和关闭`{/literal}`标签，这看起来有点混乱和不守规矩。有没有更好的方法来编写它，使代码在将来必须更改时显得更整洁和更易于管理？

```
{literal}
<script type="text/javascript">
var _roi = _roi || [];

// Base Order Details 
_roi.push(['_setMerchantId', '{/literal}{$merchant_id}{literal}']); 
_roi.push(['_setOrderId', '{/literal}{$order_id}{literal}']);
_roi.push(['_setOrderAmount', '{/literal}{$order_total}{literal}']);
_roi.push(['_setOrderNotes', '{/literal}{$order_notes}{literal}']);

// Line Items
{/literal}
{foreach from=$line_items item=line name=items}
    {literal}
    _roi.push(['_addItem', 
    '{/literal}{$line.sku}{literal}',
    '{/literal}{$line.title}{literal}',
    '{/literal}{$line.category_id}{literal}',
    '{/literal}{$line.category}{literal}',
    '{/literal}{$line.price}{literal}',
    '{/literal}{$line.quantity}{literal}'
    ]);
    {/literal}
{/foreach}
{literal}

// Submit Transaction to SDC ROI tracker
_roi.push(['_trackTrans']);
</script>
<script type="text/javascript" src="{/literal}{$url}{literal}"></script>{/literal} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T20:04:25.350

如果您在 javascript 代码中使用大括号 { 和 }，则只需要 {literal} 标签。据我所知，您不使用任何这些，所以我猜您的代码也可以在没有任何 {literal} 标记的情况下运行。即使您要使用几个大括号，您也可以使用 {ldelim} 和 {rdelim} 代替它们，如果这样可以为您节省一些标签（并获得可读性）

（以上适用于smarty 2）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T14:53:54.993

您可以使用该[**`$auto_literal`**](http://www.smarty.net/docs/en/variable.auto.literal.tpl)设置（默认启用）并确保 JavaScript 代码中的任何大括号都被空格包围（通常应该如此）。以后就`{literal}`不需要了。

> 在 Smarty 模板中，只要 { 和 } 大括号被空格包围，它们就会被忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-21T14:43:35.440

使用 {ldelim} 表示 { 和 {rdelim} 表示 }

更新：根据下面的评论

```
{literal}{{/literal} and {literal}}{/literal} 
```

将被替换为

```
{ldelim} {rdelim} 
```

但是 periklis 对原始帖子中的代码有正确的答案。但是要回答 javascript 中 {literal} 的替代方案的问题。在 Smarty 中构建 json 的示例。

```
{capture assign="row"}{foreach from=$list item=item}
  {ldelim}key1:'{$item['key1val']}',key2:'{$item['key2val']}'{rdelim},
{/foreach}{/capture}
var jsonList = [ {row|trim:','} ]; 
```

# css - div 没有扩展到所有显示器尺寸的百分比

> ID：15029525
> 
> 赞同：1
> 
> 时间：2013-02-22T17:06:34.407
> 
> 标签：css, html, responsive-design

我有一个

```
container:100%
contentcontainer:90% 
```

然后在这些里面我有

```
#bookinfo{width:75%; float:left;}
sidebar{width:20%; float:right;} 
```

`#bookinfo`div 包含具有这些样式的书籍

```
display inline 
width:320px
height:430px
float:left
margin right:15px 
```

我认为将`bookinfo`宽度设置为 75% 会使其响应所有显示器尺寸，但在一台显示器上，我得到三本书紧贴侧边栏，另一台显示器我得到三本书籍和侧边栏之间有很大间隙的书。使用萤火虫时，我看到 75% 没有到达较大显示器的侧边栏，因为它在较小的显示器上。

我已经尝试将`bookinfo`div 设置为像素值，但它仍然不会在所有监视器上呈现相同的值。我只想在显示器允许的范围内安装尽可能多的书。那么我做错了什么？

***解决了***

`contentcontainer`通过完全删除，设置`container`为`max-width:90%`和删除宽度`#bookinfo`以支持添加，我能够在所有显示器上获得相同的外观`padding-right`。这行得通。希望它可以帮助别人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:19:08.243

您还需要添加

```
html, body{width:100%; height:100%} 
```

# jenkins - Jenkins 构建提升：如何安排构建提升？

> ID：15029527
> 
> 赞同：2
> 
> 时间：2013-02-22T17:06:43.750
> 
> 标签：jenkins, continuous-integration, jenkins-plugins

是否可以安排构建促销？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T07:34:26.927

我能想到的唯一方法是创建第二个上游工作，我们称之为“计划的促销工作”

在 Scheduled Promotion 作业中，创建一个在构建完成后立即进行提升的提升，并根据您希望下游作业提升的时间表安排其构建运行。

在实际的下游构建中告诉它在以下上游促销时进行促销，并输入Scheduled Promotion Job的作业名称。

换句话说，告诉您的构建监视上游作业以获取提示，并将时间表放在上游作业中。

我刚刚在我的测试 jenkins 服务器上尝试了一些测试项目，并且效果很好。

# objective-c - 将当前和未来日期添加到数组

> ID：15029537
> 
> 赞同：0
> 
> 时间：2013-02-22T17:07:04.733
> 
> 标签：objective-c, cocoa, nsmutablearray, nsdate

我正在创建一个自定义类型的日历，并且我正在尝试查看是否可以将日期存储在一个数组中而无需静态分配每个日期。例如，数组中的第一个日期将是它第一次创建的那一天，它将保存下周让我们说到数组中的相关索引中。

```
NSMutableArray *thisWeek = [today, tomorrow, sunday(Feb 24), monday (Feb 25), etc]; 
```

存储未来日期的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:22:51.277

```
NSMutableArray *days;
days = [[NSMutableArray alloc] init]; 

NSDate *todayDate = [NSDate Date];
[days addObject:todayDate]; 

for (int i = 1; i <= 6; i++) 
{
    NSDate *newDate = [[NSDate date] dateByAddingTimeInterval:60*60*24*i];

    [days addObject:newDate];

} 
```

这样，您可以在数组中添加天数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:30:52.933

```
NSMutableArray *days = [[NSMutableArray alloc] init]; 
NSCalendar *cal = [NSCalendar autoupdatingCurrentCalendar];
NSDateComponents *tempCop = [cal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
                                   fromDate:[NSDate date]];
NSDate *today = [cal dateFromComponents:tempCop];

for (int i = 0; i < 8; i++) 
{
    NSDateComponents *comps = [[NSDateComponents alloc]init];
    [comps setDay:i];
    [days addObject:[cal dateByAddingComponents:comps toDate:today options:0]];     
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:13:36.973

查看文档（[链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)）`dateByAddingTimeInterval:`。它使您可以将给定的秒数添加到日期。`NSDate`

# google-app-engine - JPA 加入标准与谷歌应用引擎中的数据存储区

> ID：15029539
> 
> 赞同：1
> 
> 时间：2013-02-22T17:07:07.930
> 
> 标签：google-app-engine, jpa, google-cloud-datastore, criteria

假设我有 2 个 JPA 类，它们在数据存储区（Google 应用程序引擎）中为 2 个实体建模，如下所示：

```
@Entity
public class Clazz {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Key classKey;

@Basic
private String classId;

@Basic
private String className;

@ManyToOne
private Subject subject;
    }

@Entity
public class Subject {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Key subjectKey;

@Basic
private String subjectId;

@Basic
private String subjectName;

@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "subject")
private Set<Clazz> classes = new HashSet<Clazz>();
} 
```

那么，如何使用 JPA 标准获取具有 classId 和 subjectId 等于给定值的 Clazz 对象。我使用了这段代码，但得到了这样的异常：

```
em = EMF.get().createEntityManager();
        CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();
        CriteriaQuery<Clazz> criteriaQuery = criteriaBuilder.createQuery(Clazz.class);
        Root<Clazz> root = criteriaQuery.from(Clazz.class);
        List<Predicate> predicates = new ArrayList<Predicate>();

        if (searchObj.getClassId() != null && searchObj.getClassId().length() > 0) {
            Expression<String> classIdExpression = root.get("classId");
            predicates.add(criteriaBuilder.equal(classIdExpression, searchObj.getClassId()));
        }

        if (searchObj.getSubjectId() != null && searchObj.getSubjectId().length() > 0) {
            Join<Clazz, Subject> join = root.join("subject");
            predicates.add(criteriaBuilder.equal(join.get("subjectId"), searchObj.getSubjectId()));
        }

        if (predicates.isEmpty()) {
            criteriaQuery.select(root);
        } else {
            criteriaQuery.select(root).where(predicates.toArray(new Predicate[predicates.size()]));
        }

        TypedQuery<Clazz> query = em.createQuery(criteriaQuery);
        return query.getResultList(); 
```

例外：

```
javax.persistence.PersistenceException: SELECT DN_THIS FROM thesis.filesharing.model.Clazz DN_THIS JOIN DN_THIS.subject WHERE (DN_THIS.classId = '44444') AND (DN_THIS.subject.subjectId = 'IT5834'): Can only reference properties of a sub-object if the sub-object is embedded.
at org.datanucleus.api.jpa.NucleusJPAHelper.getJPAExceptionForNucleusException(NucleusJPAHelper.java:302)
at org.datanucleus.api.jpa.JPAQuery.getResultList(JPAQuery.java:202)
at thesis.filesharing.dao.impl.ClassDAOImpl.countFoundClasses(ClassDAOImpl.java:203)
at thesis.filesharing.bo.impl.ClassBOImpl.countFoundClasses(ClassBOImpl.java:84)
at thesis.filesharing.test.TestController.searchClasses(TestController.java:143)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:219)
at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:132)
at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:746)
at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:687)
at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:14:18.053

实际上，您应该阅读一些内容，`GAE Datastore`因为基于数据存储的数据存储`No-SQL database`主要基于数据结构，因此这里没有任何关系**（无表）** （**仅类**）

@OneToMany..etc 不再支持

来自**维基百科**：*在计算中，NoSQL（通常解释为“不仅仅是 SQL”[1]）是一类广泛的数据库管理系统，它不遵守广泛使用的关系数据库管理系统模型。NoSQL 数据库主要不是基于表构建的，并且通常不使用 SQL 进行数据操作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T00:30:34.373

由于 GAE 不能很好地处理标准连接，但接受以下类型的语句：

```
SELECT f FROM Foo f JOIN f.bar b WHERE b.id = "42" 
```

我设法使用别名实现了这个问题的 hacky 解决方案，并且效果很好。不过，我不能保证这种方法的安全性，因此使用风险自负。

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Foo> q = cb.createQuery(Foo.class);
Root<Foo> foo = q.from(Foo.class);

foo.join("bar").alias("b1");  // Comment 1
foo.alias("b1");  // Comment 2
q.select(foo).where(cb.equal(foo.get("id"), "42"));
foo.alias("f1");  // Comment 3

TypedQuery<Foo> query = em.createQuery(q);
List<Foo> foos = query.getResultList(); 
```

有几点需要注意：

*   注释 1：此别名仅代表**`b`**JPQL 语句中的第一个。
*   注释 2：此别名代表**`b`**in **`b.id`**。
*   注释 3：此别名表示**`f`**JPQL 语句中的

生成的语句`em.createQuery(q)`等同于上面的 JPQL 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:14:10.683

> 如果子对象是嵌入的，则只能引用子对象的属性。

足够明确。GAE/Datastore 无法轻松应对“加入”。是否使用 JPQL 的 JPA 标准无关紧要，因为它们等同于对数据存储的相同要求

# web-services - JBossWS-CXF 的便携性/兼容性如何？

> ID：15029544
> 
> 赞同：0
> 
> 时间：2013-02-22T17:07:26.773
> 
> 标签：web-services, cxf, compatibility, portability, jbossws

JBossWS-CXF 的便携性或兼容性如何？我的印象是它是一个“混合”，因为 JBoss 网站上声明它支持 CXF 的“几乎所有”功能。如果目标是生成打包为 SAR 文件的服务，这些服务可以轻松部署到 JBoss 以外的应用服务器，如果有必要，那么我应该坚持使用 vanilla Apache CXF 还是使用 JBossWS-CXF？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:07:09.697

如果您坚持使用“纯 JAX-WS”的东西，那么服务应该完全可移植到其他应用程序服务器。混合特性来自于允许许多在 JAX-WS 规范中没有任何等价物的额外 CXF 特性。例如，如果您使用 CXF 对 WS-Security 的支持，那么应用程序将不能直接移植到另一个应用服务器（除非它们也使用 CXF）。您需要将该部分代码/配置移植到该应用服务器上的 WS-Security 所需的任何配置。

# php - 如何改进这个 PHP MySQL 调用？

> ID：15029547
> 
> 赞同：0
> 
> 时间：2013-02-22T17:07:32.173
> 
> 标签：php, mysql

我正在尝试更新旧的 MySQL PHP 方法调用，但我最终调用了两次相同的 SELECT 调用以达到相同的结果。有一个更好的方法吗？

这是原文：

```
function updateProbabilities()
{
    // first update the word count of each category
    $rs = $this->con->select("SELECT category_id, SUM(count) AS total FROM nb_wordfreqs WHERE 1 GROUP BY category_id");
    $total_words = 0;
    while (!$rs->EOF()) {
        $total_words += $rs->f('total');
        $rs->moveNext();
    }
    $rs->moveStart();
    if ($total_words == 0) {
        $this->con->execute("UPDATE nb_categories SET word_count=0, probability=0 WHERE 1");
        return true;
    }
    while (!$rs->EOF()) {
        $proba = $rs->f('total')/$total_words;
        $this->con->execute("UPDATE nb_categories SET word_count=".(int)$rs->f('total').",
                                    probability=".$proba."
                                    WHERE category_id = '".$rs->f('category_id')."'");
        $rs->moveNext();
    }
    return true;
} 
```

这是我的版本：

```
function updateProbabilities() {

    $sql = "SELECT category_id, SUM(count) AS total FROM nb_wordfreqs WHERE 1 GROUP BY category_id";
    $res = mysql_query($sql) or die (mysql_error());

    $total_words = 0;

    while ($row = mysql_fetch_array($res, MYSQL_ASSOC)) {
        $total_words += $row['total'];
    }

    if ($total_words >= 1) {

        $sql = "SELECT category_id, SUM(count) AS total FROM nb_wordfreqs WHERE 1 GROUP BY category_id";
        $res = mysql_query($sql) or die (mysql_error());

        while ($row = mysql_fetch_array($res, MYSQL_ASSOC)) {

            $proba = $row['total']/$total_words;

            $count = (int)$row['total'];

            $sql = "UPDATE nb_categories SET word_count=".$count.",
                    probability=".$proba."
                    WHERE category_id = '".$row['category_id']."'";

            mysql_query($sql) or die (mysql_error());
        }

    }
    else {

        $sql = "UPDATE nb_categories SET word_count=0, probability=0 WHERE 1";
        mysql_query($sql) or die (mysql_error());
    }

    return true;
} 
```

你有什么办法可以避免第二次重复的 SELECT 调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:12:02.880

第一次运行查询时，将其添加到 while 循环以存储结果：

```
$rowarray[] = $row; // added to prevent running it twice 
```

然后第二次出现，替换这个：

```
$sql = "SELECT category_id, SUM(count) AS total FROM nb_wordfreqs WHERE 1 GROUP BY category_id";
$res = mysql_query($sql) or die (mysql_error());
while ($row = mysql_fetch_array($res, MYSQL_ASSOC)) { 
```

有了这个：

```
foreach ($rowarray as $row) { 
```

ALSO：远离 mysql_ 函数，因为它们已被弃用，很快就会从 PHP 中删除。更改为 PDO 或 MySQLi。您已经在更新代码，也可以进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:15:27.173

mysql的等价物`$rs->moveStart()`是：

```
mysql_data_seek($res, 0); 
```

PS 如果你要重写一个新的 API，你为什么要使用已弃用的 mysql 扩展？你应该使用mysqli还是PDO？他们有类似的方法来倒回光标。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T17:16:14.817

您可以将第一个查询设置为唯一变量，并重新使用该查询的结果。

```
function updateProbabilities() {

$sql = "SELECT category_id, SUM(count) AS total FROM nb_wordfreqs WHERE 1 GROUP BY category_id";
$res = mysql_query($sql) or die (mysql_error());

$total_words = 0;
$results = array();

while ($row1 = mysql_fetch_array($res, MYSQL_ASSOC)) {
    $total_words += $row1['total'];
    $results[] = $row1;
}

if ($total_words >= 1) {

    foreach ($results as $row2) {

        $proba = $row2['total']/$total_words;

        $count = (int)$row2['total'];

        $sql = "UPDATE nb_categories SET word_count=".$count.",
                probability=".$proba."
                WHERE category_id = '".$row2['category_id']."'";

        mysql_query($sql) or die (mysql_error());
    }

}
else {

    $sql = "UPDATE nb_categories SET word_count=0, probability=0 WHERE 1";
    mysql_query($sql) or die (mysql_error());
}

return true; 
```

}

# javascript - 如果父元素具有特定的显示类型组合，则隐藏元素不会在 IE8 中正确重绘页面

> ID：15029548
> 
> 赞同：0
> 
> 时间：2013-02-22T17:07:34.337
> 
> 标签：javascript, css, internet-explorer-8

在 IE8 中隐藏/显示某些元素时出现问题。如果一个元素`display:inline-block`有任何子元素（包括嵌套子元素）`display:block`，那么该元素的任何子元素在隐藏/显示时都会出现问题。页面未正确重绘，其他元素位置未更改以反映新隐藏/显示的元素。

显示问题的最小标记如下。在示例中，当您单击“可单击元素”时，正下方的三个 div 将被隐藏。但是，Footer Div 不会改变位置 - 留下了很大的间隙。如果您执行某些操作来强制重新绘制页面，例如选择页面上的所有文本，则页脚会跳转到正确的位置。

显示元素时会发生类似的情况。不是将页脚 div 推到底部，而是与新显示的元素重叠。

```
<div style="display:inline-block">
    <div>
    <!-- Any number of other HTML elements -->
        <div style="display:block">
            <div class = "clickable" >Clickable element.</div>
            <div class = "toggleable">Hideable element 1.</div>
            <div class = "toggleable">Hideable element 2.</div>
            <div class = "toggleable">Hideable element 3.</div>
        </div>
    </div>
</div>

<div>Footer Div</div>

<script type="text/javascript">
    $('.clickable').click(function(){
        $('.toggleable').toggle();
    });
</script> 
```

一段时间以来，我一直在尝试解决这个问题，而且我几乎可以肯定我已经解决了最小的问题（`inline-block`元素后跟`block`元素，并在子元素上执行显示/隐藏）。有没有人遇到过这个问题 - 或者关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:48:18.837

这应该可以解决问题。正如下面的答案所述，旧版浏览器不支持 inline-block ，并且在某些版本的 IE8 中显示出一些古怪的行为。我从前一段时间做过的某件事中记住了这个修复，但我很抱歉，我无法就为什么会发生这种情况给你一个完整的解释。无论如何，在你的主 div 中添加一个浮点数，并清除你的页脚，然后手指交叉，它应该可以工作。

```
<div style="display:inline-block;float:left">
    <div>
    <!-- Any number of other HTML elements -->
        <div class="div-2" style="display:block">
            <div class = "clickable" >Clickable element.</div>
            <div class = "toggleable">Hideable element 1.</div>
            <div class = "toggleable">Hideable element 2.</div>
            <div class = "toggleable">Hideable element 3.</div>
        </div>
    </div>
</div>

<div style="clear:left">Footer Div</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:25:41.117

似乎在这里工作正常......但请注意，IE8 在呈现 jquery 时存在一些问题，并且旧浏览器版本并不真正支持 css 属性“inline-block”（ie7，不起作用，ie8，我是没有把握）。尝试添加“缩放：1；” 修复具有 inline-block 的标签的 css。希望能有所帮助。

# ms-word - 逐字动画

> ID：15029549
> 
> 赞同：0
> 
> 时间：2013-02-22T17:07:34.587
> 
> 标签：ms-word, powerpoint, epub

我想在文档上逐字制作动画。我的文档可能是 .doc .html .ppt。我认为 .doc 中的宏可能会做得更好。

显示文档时，我想通过突出显示一个单词来逐字制作动画。

当我说单词时，应该突出显示并移至下一个单词。这样我就可以将我的声音与单词同步。

我在 PowerPoint 中尝试了动画，但它逐字显示，并且不允许出现整个文本然后在单词周围移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:54:30.227

在 epub 3.0 中允许将诸如突出显示文本之类的动画链接到声音文件；详细信息可以在 IDPF 的规范中的[Media Overlay](http://www.idpf.org/epub/30/spec/epub30-mediaoverlays.html)部分中找到。您需要做的第一件事是以所需的粒度级别标记文本 - 听起来像是按单词。所以 xhtml 应该是这样的：

```
<p><span id="word1>This</span> <span id="word2">is</span> <span id="word3">a</span> <span id="word4">sample</span>.</p> 
```

当然，您还需要 epub 中的音频文件，然后是 .smil 文件将两者链接在一起。.smil 文件如下所示：

```
<par id="first">
  <text src="book.xhtml#word1"/>
  <audio src="audio/audio.mp3" clipBegin="0s" clipEnd="0.65s"/>
</par>
<par id="second">
  <text src="book.xhtml#word2"/>
  <audio src="audio/audio.mp3" clipBegin="0.66s" clipEnd="1.4s"/>
</par>
... 
```

您还必须`media-overlay`在 content.opf 的清单中包含 xhtml 文件的属性：

```
<manifest>
<item id="book" href="book.xhtml" media-type="application/zhtml+xml" media-overlay="smil-file"/>
<item id="smil-file" href="book_audio.smil" media-type="application/smil+xml"/> 
```

# jquery - Jquery 将 HTML 添加到 Ajax 创建的数组中

> ID：15029552
> 
> 赞同：0
> 
> 时间：2013-02-22T17:07:44.673
> 
> 标签：jquery, arrays, prepend

我正在尝试将一些 HTML 添加到 AJAX 创建的表中。这是代码：

```
 success: function (msg) {
 var ang = '';
 var obj = $.parseJSON(msg);
 $.each(obj, function() {
    ang += '<table><tr><td width="165">' + this["Athlete_Name"] + '(' + this["Athlete_Number"] + ')</td><td width="55">'+ this["Scratch_Flag"] +'</td><td width="55">'+ this["Ready_Time"] +'</td><td width="55">'+ this["Flag_Time"] +'</td><td width="55">'+ this["End_Time"] +'</td><td width="55">'+ this["Score_Time"] +'</td></tr></table>';
                    });
                    $('<p>Roster</p>').prependTo('.html(ang)');
                    $('#' + ID ).hide().html(ang).fadeIn('fast');
            } 
```

代码行称为：

```
 $('<p>Roster</p>').prependTo('.html(ang)'); 
```

没有附加到我创建的名为“ang”的 HTML 数组中，有人能指出我正确的方向吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:23:41.637

[jQuery 追加到](http://api.jquery.com/prependTo/)

如果您尝试将 ang 添加到 $('

名册

') 元素，而不是你必须编写一些这样的代码：

```
$(ang).prependTo('<p>Roster</p>'); 
```

但我真的不明白该代码的含义：

```
prependTo('.html(ang)') 
```

你能告诉更多关于目标选择器中 .html 命令的信息吗？

如果您尝试`<p>Roster</p>`在表格之前添加元素，只需放入`<p>Roster</p>`ang 声明，如：

```
var ang = '<p>Roster</p>'; 
```

# java - 将 javafxpackager 用于非 JavaFX2 应用程序

> ID：15029555
> 
> 赞同：4
> 
> 时间：2013-02-22T17:07:59.390
> 
> 标签：java, deployment, javafx-2, setup-deployment

我有一个由几个预构建 JAR 文件组成的 Java 应用程序，我需要将它们部署到不同的平台。我最近发现`javafxpackager`它能够为 JavaFX2 应用程序为 Windows、Mac 和 Linux 创建本机安装程序/二进制文件。由于我的应用程序是预构建的并且不使用 JavaFX2，因此我没有让打包程序与我的应用程序一起使用。

有没有人有这方面的经验并且可以提供帮助？或者是否有其他工具可以`javafxpackager`为非 JavaFX2 应用程序提供功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T09:25:55.400

你可以这样做。

1.  像您当前所做的那样将您的应用程序构建到 jar 中。
2.  使用开关运行 javafxpackager 以`-createjar`基于现有 jar 创建一个新 jar。新 jar 将包含清单条目，允许您使用`java -jar app.jar`.
3.  再次运行 javafxpackager`-deploy`并`-native`切换以将 jar 和 java 运行时打包为带有安装程序的本机应用程序（[自包含应用程序](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm)）。

重要的命令如下：

```
echo make an executable jar file
$JAVA_HOME/bin/javafxpackager -createjar -srcdir . -appclass start.HelloWorldSwing -srcfiles HelloWorldSwing.jar -noembedlauncher -outdir . -outfile HelloWorld.jar

echo package the jar and java runtime as a native application with installer
$JAVA_HOME/bin/javafxpackager -deploy -srcdir . -srcfiles HelloWorld.jar -outdir . -outfile HelloWorld -appclass start.HelloWorldSwing -native -name HelloWorld 
```

这是一个[完整的 OS X 脚本](https://gist.github.com/jewelsea/5018976)，您可以使用它来构建 Java 应用程序、为其创建本机应用程序包、安装本机包并运行已安装的应用程序。该脚本使用[javafxpackager](http://docs.oracle.com/javafx/2/deployment/javafxpackager001.htm)创建本机应用程序包。安装的应用程序是一个不使用 JavaFX 的 Swing 应用程序（只是为了证明 javafxpackager 不需要只使用 JavaFX 代码）。此外，脚本中的 javafxpackager 命令利用了先前使用 jar 命令创建的 jar，以表明 javafxpackager 不需要处理原始类文件，但可以将先前使用其他工具链构建的 jar 作为输入。

您可以为其他操作系统和打包格式创建包，例如 Windows 应用程序和 Linux RPM 或 DEB 包。有关如何为每个操作系统自定义安装的详细信息，请参阅 javafxpackager 文档。如果您使用命令行 javafxpackager 工具，那么您将需要为每个目标操作系统创建打包 shell 脚本。如果您使用 javafx ant 打包任务，那么您可以跨操作系统使用相同的打包 ant 脚本。查看[javafx 示例](http://www.oracle.com/technetwork/java/javafx/samples/index.html)（例如 Ensemble 或 SwingInterop）的源代码，了解有关使用 ant 打包任务构建本机包的示例。

要构建 Windows 安装程序，您需要按照 javafxpackager 文档中的说明在您的计算机上安装其他免费软件。要构建 rpm，您需要在机器上安装 rpmbuild 打包实用程序。目前不可能从一台机器上为所有操作系统构建原生包（您只能构建特定于该机器类型的原生包）。

* * *

请记住，javafxpackager 本机包只是众多 Java 应用程序部署选项之一。其他包括 webstart、可执行 jar 文件、第 3 方打包选项和浏览器嵌入式应用程序。选择最适合您的应用程序、用户、开发技能和复杂度舒适度的选项。

* * *

我过去使用的另一个工具链在 unix 软件的本机软件包（尤其是企业的服务器端应用程序）方面取得了巨大成功，它是[maven ，它使用](http://maven.apache.org)[jenkins](http://jenkins-ci.org)创建的[rpm maven 插件构建，并使用](http://mojo.codehaus.org/rpm-maven-plugin/)[nexus yum 插件](https://github.com/sonatype/nexus-yum-plugin)部署到[nexus](http://www.sonatype.org/nexus/)存储库。这个工具链允许你从代码签入到一组具有[yum](http://man.cx/yum%288%29)依赖管理的可部署包。这个替代工具集确实需要一些复杂性才能使用，并且不涵盖 javafxpackager 所做的平台范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T03:05:36.477

我有一个工作 JavaFX 2 应用程序，我使用 JavaFX Ant 任务（[http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference.htm#CIADCBJG](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference.htm#CIADCBJG)）为 Mac OS X 创建一个应用程序包。我知道 JavaFX Ant Tasks 与 JavaFX Packager 工具并不完全相同，但它们提供的功能非常相似。

我将我的 JavaFX 2 应用程序的主应用程序类更改为不使用任何 JavaFX 东西，而只是使用 AWT 弹出一个窗口。

```
import java.awt.*;
public class MainApplication {
    public static void main(String [] args) {
        Frame f = new Frame("Example 1");
        f.show();
    }
} 
```

然后我再次运行 Ant 构建脚本（未更改）以创建一个新的应用程序包。新的应用程序包可以毫无问题地在 Mac 上启动。因此，我认为您**可以**将 javafxpackager 用于非 JavaFX2 应用程序，至少是基于 Java AWT 的应用程序。

# ios - NSLayoutConstraint 设置

> ID：15029556
> 
> 赞同：1
> 
> 时间：2013-02-22T17:07:58.923
> 
> 标签：ios, objective-c, autolayout, nslayoutconstraint

我正在尝试设置一个面板来显示一些信息。我无法让自动布局按我的意愿工作。

这就是我想要做的事情：

![在此处输入图像描述](../Images/7a919f21b53c0a9e7cf17a17efb3ff98.png)

我有一个 headerView、一个 UIImageView 和 5 个标签。我希望标签垂直排列，我希望它们与 UIImageView 有 8 个间距。我可以很容易地将它们垂直排列：

```
[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[headerView]-[acresLabel]-[addedLabel(==acresLabel)]-[typeLabel(==acresLabel)]-[zonesLabel(==acresLabel)]-[sceneLabel(==acresLabel)]-|"
                                                                    options:0
                                                                    metrics:nil
                                                                      views:NSDictionaryOfVariableBindings(headerView, acresLabel, addedLabel, typeLabel, zonesLabel, sceneLabel)]]; 
```

但是让他们在图像视图之外排队被证明是乏味/冗长的：

```
[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[imageView]-[acresLabel]"
                                                                    options:0
                                                                    metrics:nil
                                                                      views:NSDictionaryOfVariableBindings(imageView, acresLabel)]];

[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[imageView]-[addedLabel]"
                                                                    options:0
                                                                    metrics:nil
                                                                      views:NSDictionaryOfVariableBindings(imageView, addedLabel)]];

[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[imageView]-[typeLabel]"
                                                                    options:0
                                                                    metrics:nil
                                                                      views:NSDictionaryOfVariableBindings(imageView, typeLabel)]];

[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[imageView]-[zonesLabel]"
                                                                    options:0
                                                                    metrics:nil
                                                                      views:NSDictionaryOfVariableBindings(imageView, zonesLabel)]];

[contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[imageView]-[sceneLabel]"
                                                                    options:0
                                                                    metrics:nil
                                                                      views:NSDictionaryOfVariableBindings(imageView, sceneLabel)]]; 
```

似乎是一种更好的方法，然后为图像视图的每个标签设置一个约束。我尝试添加`NSLayoutFormatAlignAllCenterX`到第一个约束，但它将它们都设置为内容视图的中心 X，不会将标签的中心 X 彼此对齐。NSLayoutFormatAlignAllBaseline 在垂直使用时会出错并崩溃。

我将不得不再次为数据执行此操作（英亩：“价值”）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T17:39:23.767

你在正确的轨道上`NSLayoutFormatAlignAllCenterX`。您需要做的不同之处`V:[headerView]-[acresLabel]`在于与约束的其余部分隔离，因为您不希望`headerView`“CenterX 与 5 个标签对齐”。

```
// NSDictionary* views ;
[NSLayoutConstraint constraintsWithVisualFormat:@"V:[headerView]-[acresLabel]"  options:0  metrics:nil  views:views] ;
// Use any of the horizontal NSLayoutFormats (NSLayoutFormatAlignAllLeft, NSLayoutFormatAlignAllRight, NSLayoutFormatAlignAllLeading, NSLayoutFormatAlignAllTrailing, NSLayoutFormatAlignAllCenterX)
[NSLayoutConstraint constraintsWithVisualFormat:@"V:[acresLabel]-[addedLabel(==acresLabel)]-[typeLabel(==acresLabel)]-[zonesLabel(==acresLabel)]-[sceneLabel(==acresLabel)]-|" options:NSLayoutFormatAlignAllCenterX  metrics:0  views:views] ;
[NSLayoutConstraint constraintsWithVisualFormat:@"H:[imageView]-[acresLabel]"  options:0  metrics:nil  views:views] ; 
```

# jquery - 设置正确的 Accept HTTP 标头以从 GitHub 存储库中获取已解析的 html 内容

> ID：15029559
> 
> 赞同：1
> 
> 时间：2013-02-22T17:08:00.663
> 
> 标签：jquery, ajax, http-headers, html-parsing, github-api

如何使用 GitHub 的 API设置正确的 Accept HTTP 标头以请求另一个[媒体类型](http://developer.github.com/v3/media/)（在本例中为[Html ）？](http://developer.github.com/v3/media/#html)电流`content object`总是编码为 base64，但我需要它作为呈现的 html: `application/vnd.github.VERSION.html+json`。

```
$.ajax({
    url: "https://api.github.com/repos/jquery-boilerplate/patterns/readme",
    headers: { 
        Accept: "application/vnd.github.v3.html+json"
    },
    dataType: 'jsonp',
    success: function (data) {
        console.log(data.data.content); // "IyNSZWN..."
    },
    error: function (error) {
        console.log(error);
    }
}); 
```

我也尝试过使用 jQuerys `beforeSend`，但没有成功：

```
beforeSend: function(jqXHR){
    jqXHR.setRequestHeader("Accept", "application/vnd.github.v3.html+json");
} 
```

**所以问题：**

是否可以在不解码内容的情况下获取呈现的 html：

```
decodeURIComponent(
    window.escape(
        window.atob(
            data.data.content.replace(/[^A-Za-z0-9\+\/\=]/g, "")
        )
    )
) 
```

并稍后在降价解析器中解析它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:35:29.410

您正在使用`dataType: "jsonp"`. JSONP 通过`<script>`在文档中插入标签以从另一个域加载数据来工作。而且由于`<script>`标签仅通过向 URL 发送 GET 请求来工作，而没有让您能够设置标头 - 您的`Accept`标头被忽略（您可以在您正在使用的浏览器的开发人员工具中验证这一点）。并且由于您的标头被忽略，它被赋予默认值`Accept: */*`，它加载编码数据。

解决方案是不使用 JSONP ( `dataType: "jsonp"`)，而只是使用 JSON ( `dataType: "json"`)。这将迫使 jQuery 不使用`<script>`标签，而是使用 XHR。但是，使用 XHR 会引发错误，因为数据位于另一个域中，并且您将违反相同的来源策略。为了解决这个问题，使用 GitHub 为您发出请求的域（发出请求的您的网站）设置一个 OAuth 应用程序，这将使您能够使用 JSON 数据类型发出跨域请求（这通过传递 CORS 来工作标题）。在此处阅读有关此内容的更多信息：

[http://developer.github.com/v3/#cross-origin-resource-sharing](http://developer.github.com/v3/#cross-origin-resource-sharing)

# java - 滚动数字java swing JTextField

> ID：15029561
> 
> 赞同：-1
> 
> 时间：2013-02-22T17:08:03.090
> 
> 标签：java, swing, scroll, numbers, jtextfield

![在此处输入图像描述](../Images/bb129b54fc706cdb7400a556e514c2ee.png)我想知道是否有人可以帮我复制下面的屏幕截图。我想显示一个计数器，该计数器将以 20 到 100 的增量计数，将在左侧数字上加 1，然后继续以增量计数并复制..

![在此处输入图像描述](../Images/07a959790e9b7e59df4015cd1a01744b.png)

```
eg:000 > 0/0/20      0/1/60
       > 0/0/40      0/1/80
       > 0/0/60      0/2/00
       > 0/0/80      0/2/20
       > 0/1/00      >>>>
       > 0/1/20      0/9/80
       > 0/1/40      1/0/00 
```

ETC...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:14:09.410

您可以使用[此处](https://stackoverflow.com/a/6996263/230513)`SliderUI`显示的自定义来执行此操作，它具有方向性。该示例调用，但您可以使用（[此处](https://stackoverflow.com/a/8282330/230513)说明）来呈现数字。`JSlider``VERTICAL``drawLine ()``paintThumb()``TextLayout`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T06:18:34.820

这是一个非常基本的例子。它的范围检查有很大的改进空间。

![在此处输入图像描述](../Images/8f32e95b17c7dca75c249826b6a65903.png)

线性滚动条非常简单。最后，我使用了与圆形滚动条相同的基本概念，简单地创建一个`BufferedImage`带有所有标记的值，并根据该值计算适当的布局位置。

圆形卷轴需要更长的时间才能实现。最终结果非常基本，问题在于计算欠值和溢出值。

圆形滚动简单创建`BufferedImage`所有可用值。根据它的显示位置，我们要么在它之前或之后绘制另一个副本，以产生流动的错觉......

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import javax.swing.BoundedRangeModel;
import javax.swing.DefaultBoundedRangeModel;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.LineBorder;

public class Altimiter {

    public static void main(String[] args) {
        new Altimiter();
    }

    public Altimiter() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private AltPane altPane;

        public TestPane() {

            JButton up = new JButton("+");
            JButton down = new JButton("-");

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            add(up, gbc);
            gbc.gridy++;
            add(down, gbc);

            gbc.gridx++;
            gbc.gridy = 0;
            gbc.gridheight = GridBagConstraints.REMAINDER;

            altPane = new AltPane();
            add(altPane, gbc);

            up.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    altPane.setSpeed(25);
                }
            });
            down.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    altPane.setSpeed(-25);
                }
            });

            altPane.setValue(0);

        }
    }

    public class AltPane extends JPanel {

        private LinearScrollerPane major;
        private CircularScrollerPane minor;
        private int altitude = 0;
        private int direction = 0;
        private Timer timer;

        public AltPane() {
            major = new LinearScrollerPane();
            minor = new CircularScrollerPane();
            major.setOpaque(false);
            minor.setOpaque(false);

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.fill = GridBagConstraints.VERTICAL;
            gbc.weighty = 1; 

            add(major, gbc);
            gbc.gridx++;
            add(minor, gbc);
            setBorder(new LineBorder(Color.BLUE));

            timer = new Timer(1000, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    altitude += direction;
                    if (altitude < 0) {
                        ((Timer) e.getSource()).stop();
                        altitude = 0;
                    } else if (altitude > 20000) {
                        ((Timer) e.getSource()).stop();
                        altitude = 20000;
                    }
                    System.out.println("value = " + altitude);
                    setValue(altitude);
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.setInitialDelay(0);
        }

        public void setSpeed(int speed) {
            this.direction = speed;
            timer.start();
        }

        public void setValue(int value) {
            int hnds = value / 100;
            int units = value - (hnds * 100);

            if (units == 0) {
                if (hnds > 0 && direction > 0) {
                    units = 100;
                } else if (hnds > 0 && direction < 0) {
                    units = -1;
                } else {
                    units = 0;
                }
            }

            major.setValue(hnds);
            minor.setValue(units);

            invalidate();
            repaint();
        }

        public int getValue() {
            int ths = major.getValue();
            int hnds = minor.getValue();
            return (ths * 100) + hnds;
        }

        @Override
        public void paint(Graphics g) {
            super.paint(g);
            Insets insets = getInsets();
            int width = getWidth() - (insets.left + insets.top);
            int height = getHeight() - (insets.top + insets.bottom);
            g.setColor(new Color(255, 0, 0, 128));
            int centerY = insets.top + (height / 2);
            g.drawLine(insets.left, centerY, insets.left + width, centerY);
        }
    }

    public class CircularScrollerPane extends JPanel {

        private BufferedImage baseView;
        private BoundedRangeModel model;
        private float startValue = 0;
        private float currentValue = 0;
        private float targetValue = 0;
        private int rowCount = 3;
        private Timer timer;
        private long startTime;
        private int runTime = 1000;

        public CircularScrollerPane() {
            setModel(new DefaultBoundedRangeModel(0, 20, 0, 100));

            timer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    long now = System.currentTimeMillis();
                    long diff = now - startTime;
                    if (diff >= runTime) {
                        ((Timer) (e.getSource())).stop();
                        diff = runTime;
                    }
                    float progress = (float) diff / (float) runTime;

                    currentValue = calculateProgress(startValue, targetValue, progress);
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(false);
        }

        public int getValue() {
            return getModel().getValue();
        }

        public void setValue(int value) {
            timer.stop();

            BoundedRangeModel model = getModel();
            if (value < model.getMinimum()) {
                value = model.getMaximum() + (value + 1);
                currentValue += model.getMaximum(); // overflow
            } else if (value > model.getMaximum() - model.getExtent()) {
                value = model.getMinimum() + (value - model.getMaximum());
                currentValue -= model.getMaximum(); // underflow
            }
            startValue = currentValue;
            targetValue = value;

            model.setValue(value);

            startTime = System.currentTimeMillis();
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            FontMetrics fm = getFontMetrics(getFont());
            return fm == null ? super.getPreferredSize() : new Dimension(fm.stringWidth("MMM"), fm.getHeight() * getRowCount());
        }

        public void setRowCount(int value) {
            if (value != rowCount) {
                int old = rowCount;
                rowCount = value;
                invalidate();
                repaint();
                firePropertyChange("rowCount", old, rowCount);
            }
        }

        public int getRowCount() {
            return rowCount;
        }

        public void setModel(BoundedRangeModel value) {
            if (value != null) {
                BoundedRangeModel old = model;
                model = value;
                if (model != null) {
                    currentValue = model.getValue();
                    targetValue = model.getValue();
                } else {
                    currentValue = 0;
                    targetValue = 0;
                }
                baseView = null;
                firePropertyChange("model", old, model);
            }
        }

        public BoundedRangeModel getModel() {
            return model;
        }

        @Override
        public void invalidate() {
            super.invalidate();
            baseView = null;
        }

        public float getViewOffSet(float value) {
            Font font = getFont();
            FontMetrics fm = getFontMetrics(font);
            int rowHeight = fm.getHeight();
            int extent = model.getExtent();
            int min = model.getMinimum();
            int max = model.getMaximum();

            int viewRange = max - min;
            int ticks = viewRange / extent;

            float p = value / (float) viewRange;

            return ((rowHeight * ticks) * p) + ((fm.getAscent() + fm.getDescent()) / 2);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            BufferedImage masterView = getMasterView();
            if (masterView != null) {

                Insets insets = getInsets();
                int width = getWidth() - (insets.left + insets.right);
                int height = getHeight() - (insets.top + insets.bottom);
                int centerY = height / 2;
                FontMetrics fm = g.getFontMetrics();

                int yOffset = centerY - (int) getViewOffSet(currentValue);

                g.drawImage(masterView, insets.left, insets.top + yOffset, this);

                // Heading image...
                if (yOffset > 0) {
                    g.drawImage(masterView, insets.left, insets.top + yOffset - masterView.getHeight(), this);
                }
                // Tailing image...
                if (yOffset + masterView.getHeight() < height) {
                    g.drawImage(masterView, insets.left, insets.top + yOffset + masterView.getHeight(), this);
                }
            }
        }

        protected String pad(int value) {
            StringBuilder sb = new StringBuilder(value);
            sb.ensureCapacity(3);
            sb.append(value);
            while (sb.length() < 3) {
                sb.insert(0, "0");
            }
            return sb.toString();
        }

        protected BufferedImage getMasterView() {
            if (baseView == null) {
                Insets insets = getInsets();
                int width = getWidth() - (insets.left + insets.right);
                int height = getHeight() - (insets.top + insets.bottom);

                BoundedRangeModel model = getModel();

                int extent = model.getExtent();
                int min = model.getMinimum();
                int max = model.getMaximum();

                int viewRange = max - min;
                int ticks = viewRange / extent;

                Font font = getFont();
                FontMetrics fm = getFontMetrics(font);
                baseView = new BufferedImage(width, fm.getHeight() * ticks, BufferedImage.TYPE_INT_ARGB);
                Graphics2D g2d = baseView.createGraphics();
                g2d.setFont(font);
                g2d.setColor(Color.BLACK);
                int yPos = 0;
                for (int index = min; index < max; index += extent) {
                    String value = pad(index);
                    g2d.drawString(value, width - fm.stringWidth(value), yPos + fm.getAscent());
                    yPos += fm.getHeight();
                }
            }
            return baseView;
        }
    }

    public class LinearScrollerPane extends JPanel {

        private BufferedImage baseView;
        private BoundedRangeModel model;
        private float startValue = 0;
        private float currentValue = 0;
        private float targetValue = 0;
        private int rowCount = 3;
        private Timer timer;
        private long startTime;
        private int runTime = 1000;

        public LinearScrollerPane() {

            Font font = UIManager.getFont("Label.font");
            setFont(font.deriveFont(Font.BOLD, font.getSize() + 4));
            setModel(new DefaultBoundedRangeModel(0, 0, 0, 20));

            timer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    long now = System.currentTimeMillis();
                    long diff = now - startTime;
                    if (diff >= runTime) {
                        ((Timer) (e.getSource())).stop();
                        diff = runTime;
                    }
                    float progress = (float) diff / (float) runTime;

                    currentValue = calculateProgress(startValue, targetValue, progress);
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(false);
        }

        public int getValue() {
            return getModel().getValue();
        }

        public void setValue(int value) {
            timer.stop();

            BoundedRangeModel model = getModel();
            if (value < model.getMinimum()) {
                value = model.getMinimum();
            } else if (value > model.getMaximum() - model.getExtent()) {
                value = model.getMaximum() - model.getExtent();
            }
            startValue = currentValue;
            targetValue = value;

            model.setValue(value);

            startTime = System.currentTimeMillis();
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            FontMetrics fm = getFontMetrics(getFont());
            return fm == null ? super.getPreferredSize() : new Dimension(fm.stringWidth("MM"), fm.getHeight() * getRowCount());
        }

        public void setRowCount(int value) {
            if (value != rowCount) {
                int old = rowCount;
                rowCount = value;
                invalidate();
                repaint();
                firePropertyChange("rowCount", old, rowCount);
            }
        }

        public int getRowCount() {
            return rowCount;
        }

        public void setModel(BoundedRangeModel value) {
            if (value != null) {
                BoundedRangeModel old = model;
                model = value;
                if (model != null) {
                    currentValue = model.getValue();
                    targetValue = model.getValue();
                } else {
                    currentValue = 0;
                    targetValue = 0;
                }
                baseView = null;
                firePropertyChange("model", old, model);
            }
        }

        public BoundedRangeModel getModel() {
            return model;
        }

        @Override
        public void invalidate() {
            super.invalidate();
            baseView = null;
        }

        public float getViewOffSet(float value) {
            Font font = getFont();
            FontMetrics fm = getFontMetrics(font);
            int rowHeight = fm.getHeight();
            int min = model.getMinimum();
            int max = model.getMaximum();

            int viewRange = max - min;
            int ticks = getTicks();

            float p = value / (float) viewRange;

            return ((rowHeight * ticks) * p) + ((fm.getAscent() + fm.getDescent()) / 2);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            BufferedImage masterView = getMasterView();
            if (masterView != null) {

                Insets insets = getInsets();
                int width = getWidth() - (insets.left + insets.right);
                int height = getHeight() - (insets.top + insets.bottom);
                int centerY = height / 2;
                FontMetrics fm = g.getFontMetrics();

                int yOffset = centerY - (int) getViewOffSet(currentValue);

                g.drawImage(masterView, insets.left, insets.top + yOffset, this);
            }
        }

        protected String pad(int value) {
            StringBuilder sb = new StringBuilder(value);
            sb.ensureCapacity(3);
            sb.append(value);
            while (sb.length() < 3) {
                sb.insert(0, "0");
            }
            return sb.toString();
        }

        protected int getTicks() {
            BoundedRangeModel model = getModel();

            int extent = model.getExtent();
            int min = model.getMinimum();
            int max = model.getMaximum();
            int viewRange = max - min;
            int ticks = viewRange;
            if (extent > 0) {
                ticks = viewRange / extent;
            }

            return ticks;
        }

        protected BufferedImage getMasterView() {
            if (baseView == null) {
                Insets insets = getInsets();
                int width = getWidth() - (insets.left + insets.right);
                int height = getHeight() - (insets.top + insets.bottom);

                BoundedRangeModel model = getModel();

                int extent = model.getExtent();
                int min = model.getMinimum();
                int max = model.getMaximum();

                int ticks = getTicks() + 1;

                Font font = getFont();
                FontMetrics fm = getFontMetrics(font);
                baseView = new BufferedImage(width, fm.getHeight() * ticks, BufferedImage.TYPE_INT_ARGB);
                Graphics2D g2d = baseView.createGraphics();
                g2d.setFont(font);
                g2d.setColor(Color.BLACK);
                int yPos = 0;
                for (int index = min; index < max + 1; index += Math.max(1, extent)) {
                    String value = String.valueOf(index);
                    g2d.drawString(value, width - fm.stringWidth(value), yPos + fm.getAscent());
                    yPos += fm.getHeight();
                }
                g2d.dispose();
            }
            return baseView;
        }
    }

    public static float calculateProgress(float startValue, float endValue, double fraction) {
        float value = 0;
        float distance = endValue - startValue;
        value = (float) (distance * fraction);
        value += startValue;
        return value;
    }
} 
```

# linux - 简化 BASH 命令

> ID：15029563
> 
> 赞同：1
> 
> 时间：2013-02-22T17:08:03.833
> 
> 标签：linux, bash, shell, unix, solaris

我发现自己每隔一段时间就必须这样做，并且想知道是否有办法**简化**这个命令？

本质上，我所做的只是复制一个文件并重新命名它。创建的功能`A1, A2.. B1, B2..`是*不可协商的*:) 因此，嵌套的 for 循环。

请注意，我对创建实际的脚本文件不感兴趣。我需要一些又快又脏的东西。

```
bash> for x in {A..B}; do for i in {1..4};do cp orig.xml prefix_$x$i.xml; done;done 
```

## 系统信息

**平台：** `SunOS`

**重击版本：** `GNU bash, version 3.00.16(1)-release (i386-pc-solaris2.10)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T17:48:34.927

它还有简化的空间，例如

```
for x in {A..B}{1..4}; do cp orig.xml prefix_$x.xml; done; 
```

这适用于 **平台**：

```
SunOS 5.10 Generic_147441-12 i86pc i386 i86pc

GNU bash, version 3.00.16(1)-release (i386-pc-solaris2.10) 
```

# character-encoding - JBoss 7 上 JSF 2 中 POST 请求的编码

> ID：15029566
> 
> 赞同：0
> 
> 时间：2013-02-22T17:08:26.520
> 
> 标签：character-encoding, richfaces, jboss7.x

当我输入特殊字符（ö、ä.ñ、..）时，我对通过 h:commandbutton 发布的值有疑问。当值通过 ajax 请求（例如值的更改侦听器或 a4j:commandbutton）提交时，一切正常。但是，当通过 h:commandbutton 提交值时，收到的值会出现乱码。

我尝试根据[BalusC 撰写的文章](http://balusc.blogspot.co.at/2009/05/unicode-how-to-get-characters-right.html)设置所有内容。

我在 JBoss 的standalone.xml 中设置了 URI 编码：

```
<property name="org.apache.catalina.connector.URI_ENCODING" value="UTF-8"/>
<property name="org.apache.catalina.connector.USE_BODY_ENCODING_FOR_QUERY_STRING" value="true"/> 
```

添加了一个过滤器，用于设置请求的字符编码。但是，这并没有改变任何东西，如果我读取获取参数映射（在设置编码之前或之后），参数就会在那里混乱。

还有什么我错过的吗？

我已经尝试过使用 JBoss 7.1.0 和 7.1.1 以及 Richfaces 4.1.0。

**编辑：**

即使 ExternalContext#getRequestCharacterEncoding() 在 bean 操作方法中返回 UTF-8（如评论中所要求的那样），看起来过滤器是问题所在。通过 h:commandButton 提交表单时，`request.getCharacterEncoding()`在我添加的 UTF 过滤器的 doFilter() 方法的开头返回 null。但`request.parametersParsed`已经是真的了。

通过ajax提交的时候值`request.getCharacterEncoding()`已经是UTF-8了。

所以看起来编码设置不同，并且其他一些过滤器已经解析了参数。中唯一的其他过滤器`request.context.filterConfigs`是`org.jboss.weld.servlet.ConversationPropagationFilter`. 另外，Picketlink 可能已经读取了此时的参数。

**编辑 2：** 正如[PL 论坛中的这个线程中](https://community.jboss.org/thread/221662)所讨论的，这似乎是 Picketlink 中的一个错误。还要检查相关的[PL 问题](https://issues.jboss.org/browse/PLFED-389)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:13:34.820

到目前为止一切看起来都很好。

只有在您的字符编码过滤器设置请求正文字符编码*之前*，其他东西已经访问（并因此隐式解析）请求正文时，此构造才会失败。然后为解析请求正文设置字符编码为时已晚。

根据评论，PicketLink 似乎是这里的罪魁祸首。您需要告诉它使用 UTF-8，或者如果这不可能，请向他们的开发团队报告错误/问题报告。这一切至少超出了 JSF 的控制范围，因此不是与 JSF 相关的问题。

# box-api - 使用 Android Api，如何检索整个文件路径？

> ID：15029570
> 
> 赞同：0
> 
> 时间：2013-02-22T17:08:55.007
> 
> 标签：box-api

给定一个 com.box.androidlib.Utils.BoxUtils.BoxFolder 对象，我想递归该对象的父文件夹以从根目录检索路径。

我希望使用类似下面的代码来执行此操作，其中使用 Box.getAccountTree(...) 检索 currentBoxFolder，就像在包含的示例代码的 Browse 类中所做的那样。但是，getParentFolder 返回 null（对于我希望它为非 null 的非根文件夹）。

我认为可以通过修改源来获取其他属性来填充父变量，但我能够做到。有什么建议么？

```
List<BoxFolder> parentDirs = new ArrayList<BoxFolder>();
parentDirs.add(new BoxFolderEntry(currentBoxFolder));

BoxFolder parent = currentBoxFolder.getParentFolder();
while(parent != null)
{
    parentDirs.add(0, parent);
    parent = parent.getParentFolder();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:14:05.890

如果最终目标是让您知道从根目录到文件夹的路径，有几种方法可以解决这个问题：

选项1：

在您的应用程序获取它们时维护您自己的 folder_ids 和 folder_names 映射。据推测，为了获得 currentBoxFolder 的 id，您必须事先对其所有父母进行 getAccountTree() 调用。因此，如果是这种情况，您可以维护 2 张地图：

文件夹 ID => 父文件夹 ID

文件夹 ID => 文件夹名称

从这两张地图中，您应该始终能够从根中获取路径。

选项 2：

有 2 个参数可以添加到 Box.getAccountTree() 方法中，让您知道路径：

“show_path_ids”

“show_path_names”

这些参数尚未记录（我们会这样做），但它们会导致 BoxFolder.getFolderPathIds() 和 BoxFolder.getFolderPath() 返回值，例如：

“/5435/4363”

“/蓝色文件夹/绿色文件夹”

# java - 自定义代理复制 PDF

> ID：15029571
> 
> 赞同：0
> 
> 时间：2013-02-22T17:08:58.240
> 
> 标签：java, jakarta-ee, pdf, servlets

我正在为我们的主应用程序编写一个自定义代理作为 Web 服务客户端，该应用程序使用 REST Web 服务。出于安全原因，我尝试使用客户端的 servlet 作为代理从服务器端检索 PDF，然后通过客户端应用程序在应用程序 Web 浏览器中显示它。

作为这个的核心，我有这段代码：

```
 protected void copy(HttpResponse fromResponse, HttpServletResponse toResponse)
      throws IOException{
    HttpEntity entity = fromResponse.getEntity();
    for(Header header:fromResponse.getAllHeaders()){
      toResponse.setHeader(header.getName(), header.getValue());
    }

    BufferedInputStream inputStream = new BufferedInputStream(entity.getContent());
    BufferedOutputStream outputStream = new BufferedOutputStream(toResponse.getOutputStream());

int oneByte;
int byteCount = 0;
while((oneByte = inputStream.read()) >= 0){
  outputStream.write(oneByte);
  ++byteCount;
}

log.debug("Bytes copied:" + byteCount); 
```

它应该将 PDF 从返回的输出流复制到当前输出流，然后返回。

但是，当我运行它时，我从 Adob​​e Reader 收到一个错误，说文件已损坏并且无法修复。当我直接运行 URL 时，文件很好，所以它必须是交接中的东西。byteCount 等于 PDF 文件大小。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:15:21.363

通过做

```
while((inputStream.read(buffer)) >= 0){
  outputStream.write(buffer);
} 
```

您将始终写入缓冲区的完整长度，而不管其有效内容长度如何，因为 write 只能查看缓冲区的大小来确定要写入的内容。

```
int count;
while(((count = inputStream.read(buffer))) >= 0){
  outputStream.write(buffer,0,count);
} 
```

应该解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:31:16.707

我在写入后关闭了 outputStream，它工作正常。

我不认为你应该这样做？

# entity-framework - 在模型中使用实体框架复杂类型时，示例不适用于 Web API 帮助页面

> ID：15029576
> 
> 赞同：15
> 
> 时间：2013-02-22T17:09:18.387
> 
> 标签：entity-framework, serialization, asp.net-web-api

我有一个包含一些复杂类型的 EF 代码优先模型。生成 Web API 控制器没有任何问题，但是在生成 Web API 帮助页面时，如[http://blogs.msdn.com/b/yaohuang1/archive/2012/08/15/introducing-the-asp-net-中所述web-api-help-page-preview.aspx](http://blogs.msdn.com/b/yaohuang1/archive/2012/08/15/introducing-the-asp-net-web-api-help-page-preview.aspx)则不会生成样本。给出的错误信息是：

使用格式化程序“JsonMediaTypeFormatter”为媒体类型“application/json”生成样本时发生异常。异常消息：出现一个或多个错误。

其他媒体类型也会发生同样的事情。我知道前段时间复杂类型和序列化存在问题，但是当 Json.NET 格式化程序默认包含在 Web API 中时，问题就解决了。

这可能有关系吗？其他人还有相同的疑问么？有任何想法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-22T17:24:43.320

我的猜测是，这很可能是由于您的模型具有引用循环。例如，您能否通过对 Json 格式化程序进行以下更改来尝试生成帮助页面。您应该会看到生成的示例：

```
 config.Formatters.JsonFormatter.SerializerSettings.ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Serialize; 
        config.Formatters.JsonFormatter.SerializerSettings.PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.Objects; 
```

此外，如果您不进行上述设置，即使在运行时实际上也会看到类似的错误。

对于 XmlFormatter 和自引用循环，您可以查看[**此处**](http://zamd.net/2008/05/20/datacontract-serializer-and-isreference-property/)。

# android - Asus MeMo Pad - 调试 Android 应用程序

> ID：15029581
> 
> 赞同：2
> 
> 时间：2013-02-22T17:09:47.160
> 
> 标签：android, driver, adb

我刚从工作中收到一个新的 Asus MeMo Pad (10")，以便在上面调试我们的 Android 应用程序，但是，我似乎无法为它安装合适的驱动程序（它很新，只发布了一些几周前）

在 Windows (8) 设备管理器中，我看到`Asus Android Composite ADB Interface`它旁边有一个黄色警告标志，当我尝试从互联网和`SDK`谷歌建议的目录更新驱动程序时，它失败了。

我试过：

*   浏览华硕的驱动程序网站
*   安装`Asus Sync`- 它无法识别我的平板电脑。
*   使用旧的华硕垫驱动程序 - 不走运

我的猜测是它太新而且仍然没有可用的驱动程序（尽管华硕会发布没有驱动程序的平板电脑似乎很奇怪）。

有什么解决办法吗？

当我将它连接到我的电脑时，我可以看到它的文件，但我无法调试（使用`adb devices`显示一个空列表）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T19:00:15.060

您可以尝试做的一件事是手动安装驱动程序。当您使用安装驱动程序提示时，告诉它扫描 SDK 中的 USB 驱动程序文件夹，然后选择从列表中选择驱动程序的选项。选择复合设备选项（它将是 ADB 复合设备或 Android 复合设备，我不记得是哪个，而且我目前没有我的 Windows devbox）并查看驱动程序是否会成功安装。我已经为我的 Galaxy Tab 10.1 和 LG Optimus G 做到了这一点，并以这种方式获得了 ADB 功能，因此它可能适用于你的备忘录垫。

# c++ - C++11 和 gcc 中的私有和默认构造函数

> ID：15029586
> 
> 赞同：5
> 
> 时间：2013-02-22T17:09:55.547
> 
> 标签：c++, inheritance, c++11, private, default-constructor

代码：

```
struct A
{
    private:
    A() = default; // Version 1.
};
struct B : public A
{};

struct C
{
    private:
    C() {}; // Version 2.
};
struct D : public C
{};

int main()
{
   B b;  // Compiles          under g++ 4.7.2
   D d;  // Compilation error under g++ 4.7.2
} 
```

还有两种情况（使用 gcc 4.7.2）：

*   如果我编译这段代码（使用 A 的构造函数的版本 1），就没有问题。
*   如果我使用第二个构造函数，gcc 说我`D::D()`是私有的。

问题：如果我使用默认构造函数，为什么问题会消失？如果`A`具有私有构造函数，则其他类永远不能创建 的实例`A`，甚至不能创建其派生类，无论其构造函数实现的“默认性”如何。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T17:20:20.450

这对我来说就像一个 GCC**错误。**

关于成员访问控制的整个第 11 条和关于默认构造函数的第 8.4.2 节都没有提到任何关于*覆盖*默认构造函数的可访问性级别的内容。

此外，此代码*无法*在 Clang 3.2 和 Intel ICC 13.0 上编译。

另一方面，如果您注释第 X 行，则以下行将*不会*按照您的想法进行：

```
B b(); // This will declare a function that accepts no argument
       // and returns a value of type B 
```

如果删除括号，您*应该*会看到弹出的问题：

```
B b; // ERROR: Constructor of A is private 
```

但是，GCC 4.7.2（错误地）没有引发编译错误。这似乎还没有在 GCC 4.8.0 的 beta 版本中得到修复（截至 20130127 版本）。

# eclipse - Eclipse 作业 API+ newFixedThreadPool

> ID：15029593
> 
> 赞同：1
> 
> 时间：2013-02-22T17:10:38.543
> 
> 标签：eclipse, multithreading, plugins, jobs

我想使用 eclipse 作业 API 实现以下功能。

```
int nrOfProcessors = Runtime.getRuntime().availableProcessors();
ExecutorService eservice =
Executors.newFixedThreadPool(nrOfProcessors); eservice.submit(new
FilValidation());

I have 1000 files, and i want to run only 4 threads at a time using
Eclipse Jobs API and wanted to show the progress of 4 threads as
well.

As my per knowledge,for best performance we need to run the threads
which is close to number of cores in the system.

Best Regards, Kondal Kolipaka 
```

# ruby - Ruby OptionParser：处理所有未指定的选项

> ID：15029594
> 
> 赞同：0
> 
> 时间：2013-02-22T17:10:43.093
> 
> 标签：ruby, command-line, optionparser

我正在尝试自定义处理器中未指定的所有选项`OptionParser`。但是`parse`当找到第一个未知选项时会引发异常。

是否可以获取所有未处理的参数并手动处理它们？

# android - 如何在没有客户端密码的情况下构建 GoogleCredential？

> ID：15029598
> 
> 赞同：1
> 
> 时间：2013-02-22T17:10:49.587
> 
> 标签：android, google-drive-api

我正在创建一个 Android 应用程序，它使用常规的 Google Drive 帐户作为应用程序拥有的帐户，如上所述，简洁得令人难以置信，在这里：

[将常规 Google 帐户用作应用程序拥有的帐户](https://developers.google.com/drive/service-accounts#use_regular_google_accounts_as_application-owned_accounts "developers.google.com 使用常规 Google 帐户作为应用程序拥有的帐户")

不幸的是，关于如何在 Drive 上执行任何操作的所有描述都引用了客户端机密，如下所述：

[Google API 控制台 - 缺少客户端密码](https://stackoverflow.com/questions/11295661/google-apis-console-missing-client-secret)

对于已安装的应用程序，它实际上不再存在。通过构建一个实际的网页，我设法获得了一个 OAuth2 令牌。从这里我获得了一个访问令牌和一个刷新令牌，如第一个链接中所述。我想`GoogleCredential`用这些做一个对象，据我所知，这应该像这样工作：

```
 HttpTransport httpTransport = new NetHttpTransport();
    JsonFactory jsonFactory = new JacksonFactory();
    GoogleCredential credential = new GoogleCredential.Builder()
    .setTransport(httpTransport)
    .setJsonFactory(jsonFactory)
    .setClientSecrets(
            new GoogleClientSecrets().setInstalled(
                    new Details()
                    .setAuthUri(AUTH_URI)
                    .setClientId(CLIENT_ID)
                    //.setClientSecret("but I haven't got one!")
                    .setRedirectUris(REDIRECT_URIS)
            )
    )
    .build()
    .setAccessToken(ACCESS_TOKEN) //defined above
    .setRefreshToken(REFRESH_TOKEN); //defined above
    Drive.Builder driveBuilder = new Drive.Builder(httpTransport, jsonFactory, null);
    driveBuilder.setHttpRequestInitializer(credential); 
```

我已经`setClientSecret(...)`按照注释进行了调用，因为我没有已安装应用程序的客户端密码。

基本上，我不能制作这个证书，而且我看到的关于制作证书的每一个建议都属于以下三类之一：

1.  专为用户登录自己的帐户而设计。不能接受的; 我希望所有用户都有一个 Drive 帐户，但需要一个普通帐户，而不是服务帐户（指定的客户）。
2.  基于 AccountManager 或其他一些身份验证系统。出于同样的原因不能接受。
3.  对 Google API 的过分行为感到震惊。建议用老式的方式提出请求。

顺便说一句，如果没有设置客户端密码，我会得到一个`NullPointerException`in `Preconditions.class`. 它并没有告诉我很多关于这个的事情。我还尝试通过子类化直接创建 GoogleCredential，它指示我使用 a `GoogleCredential.Builder`，这就是我发现自己在这里的原因。

我该怎么做才能解决这个客户秘密问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T22:29:10.150

这是一个问题的链接，该问题在编辑中提供了自己的答案，使用接受的答案的帮助：

[如何在 Android 应用程序中设置 Google Drive Credentials？](https://stackoverflow.com/q/12405252/1015226)

简而言之，主要是你需要从开发者 api 控制台获取一个简单的 api 访问密钥。如果找不到，则可能需要设置驱动器 api 访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:17:38.737

答案似乎是取消注释该行。`GoogleCredential.Builder`只要客户端机密字段中有内容，就可以*成功*构造凭证对象。但它真的得到了驱动吗？停在附近。

编辑：不，我收到“invalid_client”错误。这非常令人沮丧。

# scripting - 通过给定用户名和域的脚本查找组成员身份

> ID：15029599
> 
> 赞同：2
> 
> 时间：2013-02-22T17:10:49.653
> 
> 标签：scripting, hta, active-directory-group

我正在构建一个包装在 HTA 中的小工具包，用于帮助台。我想要包括的任务之一是能够快速提取有关域用户的信息。现在，通常情况下，我会使用类似的东西`Net User USERNAME /domain`并快速了解一下。效果很好。

但是，我似乎找不到将其集成到工具包脚本中的方法。我可能可以使用 cscript 并只转储输出，但是我会花很多时间将其格式化为任何交互式（HTA 的全部要点）。

我真的很想使用像 ADSI 这样的东西。我可以很容易地获得给定组的成员，或给定用户的主要组，但我似乎找不到列出域上用户名的所有成员资格的方法。

请注意，拉出所有组和用户，然后比较它们不是一种选择。这适用于拥有数十万用户的域。

我保证我已经在这件事上搜索了几天。在文档等中挖掘，但似乎没有什么能满足我的需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T05:31:50.060

这类似于您关于运行`CSCRIPT`和转储输出的评论。

您可以考虑改用该`WScript.Shell`对象，特别`Exec`是从您的 HTA 中运行命令并利用它`stdout.readAll`来吸取输出的方法。

以下示例显示了如何执行此操作以将 的输出捕获`IPCONFIG`到 HTA 中：

```
<html>
<head>
<hta:application icon="http://www.stackoverflow.com/favicon.ico"/>
<title>WScript.Shell Example</title>
<script language="VBScript">
Sub RunCommand
  Dim wshShell
  Set wshShell = CreateObject("WScript.Shell")
  Dim wshExec
  Set wshExec = wshShell.Exec("IPCONFIG")
  textAreaResult.value = wshExec.stdout.readall
End Sub
</script>
</head>
<body onload="RunCommand">
<textarea id="textAreaResult" style="width:100%;height:300"/>
</textarea>
</body>
</html> 
```

# java - 如何生成 PrintWriter 并将内容写入 JTextArea 或相等

> ID：15029606
> 
> 赞同：1
> 
> 时间：2013-02-22T17:11:02.573
> 
> 标签：java, swing

我有一个问题，我不知道如何创建 a`PrintWriter`然后将内容写入 a `JTextArea`。

我有一个库，它需要一个 PrintWriter 的方法，我想用它来获取一些输出。但我不知道如何生成一个实例，`PrintWriter`然后将信息添加到 JTextArea。

任何人都可以帮助我吗？

我需要…… 像这样：

```
PrintWriter pw = new PrintWriter(...);
foo.print(pw); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:16:59.717

`PrintWriter`可以包装另一个`Writer`并传递写入它的所有内容。您可以使用 a`StringWriter`写入字符串缓冲区，然后`toString`在完成后获取缓冲区的内容。

```
StringWriter buffer = new StringWriter();
PrintWriter writer = new PrintWriter(buffer);
foo.print(writer);

String contents = buffer.toString();
myTextArea.setText(contents); 
```

一旦库方法完成写入，这只会写入文本区域`PrintWriter`。在执行库方法时是否需要它来更新文本区域？

# c++ - 模板参数的 C++11“后期绑定”

> ID：15029611
> 
> 赞同：4
> 
> 时间：2013-02-22T17:11:11.070
> 
> 标签：c++, templates, c++11

请不要把我的“后期绑定”弄错，我不是指运行时通常的后期绑定，我的意思是别的，找不到更好的词来形容它：

考虑我正在为某些需要将这些值与比较器比较的`Containor`值类型的容器（或类似）数据结构工作，所以我的第一个模板看起来像这样`V`

```
template<typename Val, typename Comp = std::less<Val>>
struct Containor{}; 
```

现在，我的`Containor`结构在内部使用了另一个容器。要使用的容器也应该可以通过模板参数进行配置，假设默认是`std::set`. 所以我的下一个版本`Containor`看起来像这样：

```
template<typename Val, typename Comp = std::less<Val>, typename Cont = std::set<Val,Comp>>
struct Containor{}; 
```

这是代码开始闻到恕我直言的地方。只要用户对内部容器的默认实现感到满意，一切都很好。但是，假设他想使用新的 google btree set 实现`btree::btree_set`而不是`std::set`. 然后他必须像这样实例化模板：

```
typedef Containor<int,std::less<int>,btree::btree_set<int,std::less<int>> MyContainor;
                                                     ^^^^^^^^^^^^^^^^^^^ 
```

我已经强调了我的问题所在的部分。客户端代码必须使用正确的参数来实例化 btree_set。老实说，这很糟糕，因为`Containor`该类总是需要一组与其自己的前两个模板参数完全相同的类型和比较器。客户可以 - 不小心 - 在此处插入其他类型！此外，客户有选择正确参数的负担。在这种情况下，这可能很容易，但如果内部容器必须是一组值类型和其他类型的对，那就很难了。然后客户端更难获得正确的内部集的类型参数。

所以我想要的是一种客户端代码只提交原始模板并在`Containor`内部用正确的参数实例化它的方式，即类似的东西：

```
template<typename Val, typename Comp = std::less<Val>, typename Cont = std::set >
struct Containor{
    typedef Cont<Val,Comp> innerSet; 
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ container instanciates the inner containor
};

typedef Containor<int,std::less<int>,btree::btree_set> MyContainor;
//                                   ^^^^^^^^^^^^^^^^
//                         client only hands in  raw template 
```

当然，这不是有效的 C++！

所以我想了一些办法来解决这个问题。我能想到的唯一解决方案是为我想要使用的所有数据结构编写“绑定器类”，如下所示：

```
struct btree_set_binder{

    template<typename V, typename C = std::less<V>>
    struct bind{
        typedef btree::btree_set<V,C> type;
    }
}; 
```

现在我可以`Containor`用一套活页夹来定义我的

```
template<typename Val, typename Comp = std::less<Val>, typename ContBinder = btree_set_binder >
struct Containor{
    typedef btree_set_binder::bind<Val,Comp>::type innerSet; 
//          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ works like a charm
}; 
```

现在，用户必须只提供所需的 binder 类，`Containor`然后用正确的参数实例化它。所以这些 binder 类对我来说没问题，但是为所有容器编写 binder 类相当麻烦。那么在 C++11 中是否有更好或更简单的方法来“晚”绑定模板参数，即在另一个将原始模板作为参数检索的模板内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T17:17:41.007

也许制作自己的比较器特征。

```
// Comparator trait primary template

template <typename T> stuct MyComparator
{
    typedef typename T::key_compare type;
};

// Comparator trait non-standard usage example

template <typename U, typename V, int N>
struct MyComparator<WeirdContainer<U, V, N>>
{
    typedef std::greater<V> type;
};

template <typename T, typename Cont = std::set<T>>
struct MyAdaptor
{
    typedef typename MyComparator<Cont>::type comparator_type;
    typedef T value_type;

    // ...
}; 
```

我已将您的“容器”重命名为“MyAdaptor”，因为这种构造通常称为“适配器”类。

**用法：**

```
MyAdaptor<int> a;    // uses std::set<int> and std::less<int>

MyAdaptor<double, WeirdContainer<bool, double, 27>> b; 
```

* * *

*更新：*根据讨论，您甚至可以完全删除外部类型参数：

```
template <typename Cont> struct MyBetterAdaptor
{
    typedef MyAdaptorTraits<Cont>::value_type value_type;
    typedef MyAdaptorTraits<Cont>::pred_type pred_type;

    // ...
}; 
```

像这样使用：

```
MyBetterAdaptor<std::set<int>> c; // value type "int", predicate "std::less<int>" 
```

编写`MyAdaptorTraits`模板留作练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:15:03.303

> 所以我想要的是一种客户端代码只提交原始模板并且容器在内部用正确的参数实例化它的方式，

所以你需要的显然是一个模板模板参数：

```
// std::set has three template parameters, 
// we only want to expose two of them ...
template <typename V, typename C>
using set_with_defalloc = std::set<V,C>;

template<
    typename Val,
    typename Comp = std::less<Val>, 
    template <typename V, typename C> class Cont = set_with_defalloc>
struct Containor{
    typedef Cont<Val,Comp> innerSet; 
    // ...
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:28:03.417

您应该能够使用`template` `template`参数来执行此操作，如下所示：

```
template<typename Val, typename Comp = std::less<Val>, template <typename...> class ContBinder = std::set>
    struct Containor {
        typedef ContBinder<Val, Comp> innerSet;
        // ...
    }; 
```

注意：您需要可变参数`typename...`，因为`std::set`需要三个模板参数（第三个是分配器），而其他容器可能没有。

# sql - 查询不在另一个表的日期范围内的行数

> ID：15029612
> 
> 赞同：1
> 
> 时间：2013-02-22T17:11:11.977
> 
> 标签：sql

想象一下，我有一张取消订阅某项内容的客户表：

```
DateMonthID     customerID
   201301           123
   201301           321
   201302           987
   201303           567
   201303           728 
```

等等等等

以及另一个每月订阅客户的表格及其订阅

```
DateMonthID     customerID     subscriptionType
   ...              ...               1
   ...              ...               3
   ...              ...               2
   ...              ...               3 
```

等等等等

我需要计算第一个表中 3 个月内未出现在第二个表中的所有行。例如，如果客户 987 在 201302（二月）和 201305（五月）之间没有出现在第二个表中，我需要计算他

我目前有以下内容：

```
SELECT
    COUNT(1) AS Total,
    table1.DateMonthID AS MonthID
FROM
    table1
WHERE
table1.DateMonthID <= 201212-3
AND NOT EXISTS (SELECT * FROM table2
                        WHERE (table2.DateMonthID >= table1.DateMonthID AND table2.DateMonthID <= (table1.month_key + 3))
                        AND table2.customerID = table1.customerID)
GROUP BY
table1.DateMonthID 
```

这给了我看起来像的输出

```
Total  MonthID
1000    201301
2345    201302
4532    201303
986     201304
etc      etc 
```

这看起来不错，但我现在想做的也是按订阅类型分组。我确定这意味着我需要进行连接，但是对于 SQL 来说还是很陌生，我对什么连接和在哪里一无所知。我尝试在 customerIds 之间进行内部连接，但最终总数超过了相应月份表一中的记录量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:53:34.033

试试这个查询

```
SELECT COUNT(*) AS Total, table1.DateMonthID AS MonthID, subscribers.subscriptionType
FROM table1 JOIN subscribers ON table1.DateMonthID = subscribers.DateMonthID
                                  AND table1.customerID = subscribers.customerID
WHERE table1.DateMonthID <= 201212 - 3
AND NOT EXISTS (SELECT *
                FROM table2
                WHERE (table2.DateMonthID >= table1.DateMonthID 
                  AND table2.DateMonthID <= (table1.month_key + 3))
                  AND table2.customerID = table1.customerID)
GROUP BY table1.DateMonthID, subscribers.subscriptionType 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:23:46.783

此查询，（或使用 count(*)）

```
SELECT
  COUNT(table1.DateMonthID) AS Total,
  subscribers.subscriptionType
FROM
  table1
  INNER JOIN subscribers
     ON table1.DateMonthID = subscribers.DateMonthID
        AND table1.customerID = subscribers.customerID
WHERE
      table1.DateMonthID <= 201212-3
  AND NOT EXISTS (SELECT * FROM table2
                  WHERE (table2.DateMonthID >= table1.DateMonthID
                    AND table2.DateMonthID <= (table1.month_key + 3))
                    AND table2.customerID = table1.customerID)
GROUP BY subscribers.subscriptionType 
```

将按订阅者为您提供记录总数。

如果您希望按订阅者和月份进行细分，请在组中添加 DateMonthID。

```
GROUP BY subscribers.subscriptionType, table1.DateMonthID 
```

请记住将 table1.DateMonthID 添加到选择中以在结果中查看它。

# windows - 如何在 Windows Server 2008 R2 中关闭（禁用）Web 代理自动发现 (WPAD)

> ID：15029615
> 
> 赞同：8
> 
> 时间：2013-02-22T17:11:15.113
> 
> 标签：windows

我们有一个在生产环境中运行缓慢的 Web 服务。在 QA 和 UAT 中这很好，但它们位于我们的公司总部。但生产是在云中的数据中心进行的。我运行了 wireshark，发现它至少调用了 6 次 NBNS WPAD（每次都超时），每次都需要大约 3/4 秒，这使得它非常慢。我想关闭 WPAD，因为环境未配置为使用它，但它仍在拨打电话，只是在浪费时间。

我的平台是带有 IE9 的 windows server 2008 r2。我想完全禁用 WPAD DNS 查询（和 NBNS 查询）。我们不使用代理。我们不使用 DHCP。我想停止 WPAD，但我没有成功。我尝试了以下方法： 1.禁用 IE 中的“自动检测设置” 2.禁用 IE 中的“使用自动配置脚本” 3.检查 WinHTTP Web 代理自动发现服务没有自动运行，它设置为手动运行所以我觉得应该没问题。4.执行“Netsh winhttp show proxy”，告诉我直接访问（无代理服务器）。

我错过了什么需要关闭的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-12-08T21:19:06.090

许多关于禁用 WPAD 的建议都集中在 Internet Explorer 用户设置上。虽然这会告诉 IE 不使用自动代理检测，但它不会阻止 WinHTTP Web 代理自动发现服务查询 wpad。有些人建议完全禁用此服务，但从 Windows 10 开始，IP Helper 服务需要它，不建议禁用它。

在[MS16-063](https://technet.microsoft.com/library/security/MS16-063)说明中，您可以看到他们针对（固定）漏洞的建议解决方法是编辑主机文件（c:\windows\system32\drivers\etc\hosts）。

```
255.255.255.255 wpad. 
```

尽管该补丁修复了该特定漏洞，但解决方法仍然是禁用 WPAD 的一个选项。在我的测试中，它确实停止了查询。如文章所述：

> **变通办法的影响**。自动代理发现将不起作用，因此，某些应用程序（例如 Internet Explorer）将无法正确加载网站。

请记住，正确设置时 WPAD 可能是一件好事。与来自 Internet 的任何建议一样，请务必在应用任何更改之前进行自己的测试。例如，如果您对公司笔记本电脑进行此更改，并且他们前往需要 WPAD 的站点，它们将无法工作。

来源：[微软论坛](https://social.technet.microsoft.com/Forums/windowsserver/en-US/a97604d6-b6d1-41e5-b6fc-dbbccebf570d/disable-wpad-dns-querys-completly?forum=winservergen)。

*请注意，您可以通过使用过滤器轻松使用 Wireshark 来查看计算机是否正在执行 wpad 查询：* **`dns.qry.name contains "wpad"`**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-02T07:31:58.320

组策略编辑器
编辑“默认域策略”
用户配置
策略
Windows设置
连接/自动浏览器配置
自动检测配置设置->禁用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-23T04:02:58.963

我已经通过重命名 WPAD 密钥并重新启动来测试从计算机中删除代理。
您还可以使用 IEAK11 创建 GPO 以删除“自动检测设置”，这就是脚本也使用 gpupdate 来应用 GPO 的原因。如果您已经将更改应用到计算机，则此脚本不会进行更改并将退出。基本脚本如下。

即使您在 Internet Explorer 中打开“自动检测设置”代理，也不会使用代理，并且会重新创建 WPAD 密钥但没有代理。不再建议使用此设置，因为这会使您的计算机易受攻击（[https://it.slashdot.org/story/16/08/13/0149241/disable-wpad-now-or-have-your-accounts-compromised-researchers-警告](https://it.slashdot.org/story/16/08/13/0149241/disable-wpad-now-or-have-your-accounts-compromised-researchers-warn)）。

```
REM Script to delete the cached proxy configuration, clear IE cache, flushdns, rename WPAD key and delete the original; reboot is required

gpupdate 

reg query "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Wpad.bad" >nul
if %ERRORLEVEL%==0 goto END

ELSE 
(
reg delete "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections" /v "DefaultConnectionSettings" /f
reg delete "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Connections" /v "SavedLegacySettings" /f

RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 8

ipconfig /flushdns

reg copy "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Wpad" "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Wpad.bad"

reg delete "HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Wpad" /f

echo n | gpupdate /force /wait:0

shutdown.exe /r /t 30 )

:END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-27T15:11:17.407

对于我的 pihole（基于 Raspberry PI 的广告拦截软件 DNS 级别），我在 hosts 文件中添加了以下内容

```
pi@raspberrypi:~ $ cat /etc/hosts
127.0.0.1       localhost

0.0.0.0 wpad wpad.my.home
:: wpad wpad.my.home 
```

我的 nslookup 显示

```
pi@raspberrypi:~ $ nslookup wpad.my.home
Server:         127.0.0.1
Address:        127.0.0.1#53

Name:   wpad.my.home
Address: 0.0.0.0

pi@raspberrypi:~ $ nslookup wpad
Server:         127.0.0.1
Address:        127.0.0.1#53

Name:   wpad
Address: 0.0.0.0 
```

如果您在 Windows 机器上，您可以打开“C:\Windows\System32\drivers\etc\hosts”并添加这些条目

```
0.0.0.0 wpad
0.0.0.0 wpad.my.home 
```

将 my.home 更改为您拥有的任何本地域

# svn - SVN从主干合并新线路到分支冲突

> ID：15029622
> 
> 赞同：0
> 
> 时间：2013-02-22T17:11:33.940
> 
> 标签：svn, svn-merge

在将主干的修订合并到分支时，我希望实现以下目标：

修订版 1（这也是分支版本）：

```
First Line 
```

修订 2：

```
First Line
Second Line 
```

修订版 3：

```
First Line
Second Line
Third Line 
```

通过在分支上执行以下命令：

```
svn merge -c 3 [trunkurl] 
```

我期待得到以下结果

```
First Line
Third Line 
```

但相反，我遇到了树冲突。这种技术似乎适用于在文件中间添加新行，而不是在文件末尾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:29:51.903

你有*错误的*期望，但是 Subversion（没有树冲突，只有**文件冲突**/树冲突在这里是不可能的/）提出了正确的错误

当 Subversion 合并时，它尝试/在某种程度上，真正的合并算法要复杂得多/从源树**应用差异**（统一，默认上下文 = 3，AFAIR），以将受影响的修订版应用到目标。如果您尝试查看 HEAD 的差异，您会看到

```
Index: file.txt
===================================================================
--- file.txt    (revision 4)
+++ file.txt    (revision 5)
@@ -1,2 +1,3 @@
 First Line
 Second Line
+Third Line 
```

但是这个上下文在分支中不存在，因此 - 即使是普通`patch`的*默认设置*也会拒绝这个差异

# php - 如何更改此 php 代码以显示图像而不是文本？

> ID：15029624
> 
> 赞同：-2
> 
> 时间：2013-02-22T17:11:39.470
> 
> 标签：php, facebook

我有这行代码，它工作正常。但是，我不想显示文本“通过 Facebook 登录”，而是想显示 facebook 连接按钮（图片）。我怎么做？

```
<li><a href="#" onclick="aw_fb_login(); return false;"><?php echo $this->helper('fbintegrator')->__('Login via Facebook'); ?></a><li> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:13:25.333

我将从这里开始，然后从那里开始：

```
helper('fbintegrator')->__('<img src="/path/to/facebookConnect.png" />'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:13:38.660

```
<li><a href="#" onclick="aw_fb_login(); return false;">
 <?php echo helper('fbintegrator')->__('<img src="/path/to/image.png" alt=""/>'); ?>
</a><li> 
```

# user-controls - 带有 ListBoxes 和用户控件的 Formview

> ID：15029625
> 
> 赞同：0
> 
> 时间：2013-02-22T17:11:46.413
> 
> 标签：user-controls, formview, request.form

我有一个包含三个列表框和一个用户控件的 FormView。用户控件是在表单处于编辑或插入模式时插入和更新数据的网格。我遇到的问题是用户控件生成的回发正在清除列表框值。当通过单击插入/更新按钮进行回发时，现有代码可以重建 ListBoxes，并且它可以正常工作。但是当用户控件回发时，ListBoxes 的 request.Form 集合为空。重建列表框值的代码使用 Request.Form 来检索值。我不希望每次用户控件导致回发时都进行验证，但是我需要对用户控件或 FormView 进行哪些更改以使 Request.Form 变量不为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:55:27.480

列表框选项正在通过弹出窗口填充，但未选择值。这个想法是，列表框中出现的任何选项都是要更新的选项，所以我所要做的就是在每个页面加载之前使用 javascript 将它们全部选中，然后问题就解决了。

# php - 如何使用 php echo 以与在 mysql 文本字段中添加的相同格式显示文本

> ID：15029629
> 
> 赞同：1
> 
> 时间：2013-02-22T17:11:58.050
> 
> 标签：php, mysql, text, formatting, echo

**我想使用 php echo**命令显示大量文本。我将该数据存储在文本字段中的 mysql 数据库表中。我想要实现的是数据应该以与我将其存储在文本字段中的方式相同的方式显示。

例如：

**正如Mysql通过它的接口输入的表，**人们撒谎的原因之一是为了实现个人权力。

获得个人权力对于那些假装比实际更自信​​的人很有帮助。例如，我的一个朋友上个月在他家举办了一个派对。他让我去参加他的聚会并带上一个约会对象。

虽然这个谎言在当时帮助了我，但从那时起，它就让我看不起自己。

**应该完全如上所示，而不是：** 人们撒谎的原因之一是为了获得个人权力。获得个人权力对于那些假装比实际更自信​​的人很有帮助。例如，我的一个朋友上个月在他家举办了一个派对。他让我去参加他的聚会并带上一个约会对象。虽然这个谎言在当时帮助了我，但从那时起，它就让我看不起自己。

关于如何实现这一点的任何想法/提示？我知道我可以在文本之间手动插入 html 标签以进行格式化，但我不想手动这样做。有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:18:26.813

`nl2br($foo);`将自动`<br>`在 $foo 中有换行符的地方添加标签。你可以`echo nl2br($foo);`。

作为替代方案，请尝试使用`<pre>`标签。`<pre><?php echo $foo; ?></pre>`. 许多人需要更多样式，但它会像换行符一样保留空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T15:45:11.287

我的解决方案是：

*   我正在使用 GWT TextArea textAreaWidget 小部件。

*   在将 TextArea 字符串插入 MySQL 表之前，我替换了所有换行符和制表符：

-新队

```
String toInsert=textAreaWidget.getText().replaceAll(Character.toString((char) 10), "\n\r")); 
```

-标签

```
String toInsert=textAreaWidget.getText().replaceAll(Character.toString((char) 9), "\t")); 
```

例子：

[http://www.tutorialspoint.com/gwt/gwt_textarea_widget.htm](http://www.tutorialspoint.com/gwt/gwt_textarea_widget.htm)

# java - Maven 找不到 org.junit，即使它在依赖项中

> ID：15029634
> 
> 赞同：27
> 
> 时间：2013-02-22T17:12:08.853
> 
> 标签：java, maven, junit4

我想在我的小项目中添加一个测试（请注意我从代码中删除了一些位并更改了包名称，所以如果您看到任何错误，可能不是这个；））：

```
package my.pckg;

import static org.junit.Assert.*;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

public class SignedRequestCallbackTest {

    @Before
    public void setUp() throws Exception {
    }

    @After
    public void tearDown() throws Exception {
    }

    @Test
    public void testCorrectSignedRequest() {
        assertTrue(false);
    }

} 
```

（我还尝试从 TestCase 扩展以删除静态导入，但没有帮助）

运行后`mvn test`它显示一个错误，它找不到 org.junit：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Test Server 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ server ---
[WARNING] Using platform encoding (MacRoman actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ server ---
[WARNING] File encoding has not been set, using platform encoding MacRoman, i.e. build is platform dependent!
[INFO] Compiling 9 source files to /Users/michael/Projects/fbmuc/server/target/classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[4,27] package org.junit does not exist
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[6,16] package org.junit does not exist
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[7,16] package org.junit does not exist
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[8,16] package org.junit does not exist
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[14,9] cannot find symbol
symbol  : class Before
location: class my.pckgSignedRequestCallbackTest
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[18,9] cannot find symbol
symbol  : class After
location: class my.pckgSignedRequestCallbackTest
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[22,9] cannot find symbol
symbol  : class Test
location: class my.pckgSignedRequestCallbackTest
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[24,12] cannot find symbol
symbol  : method assertTrue(boolean)
location: class my.pckgSignedRequestCallbackTest
[INFO] 9 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.161s
[INFO] Finished at: Fri Feb 22 18:02:37 CET 2013
[INFO] Final Memory: 8M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project server: Compilation failure: Compilation failure:
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[4,27] package org.junit does not exist
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[4,4] static import only from classes and interfaces
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[6,16] package org.junit does not exist
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[7,16] package org.junit does not exist
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[8,16] package org.junit does not exist
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[14,9] cannot find symbol
[ERROR] symbol  : class Before
[ERROR] location: class my.pckgSignedRequestCallbackTest
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[18,9] cannot find symbol
[ERROR] symbol  : class After
[ERROR] location: class my.pckgSignedRequestCallbackTest
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[22,9] cannot find symbol
[ERROR] symbol  : class Test
[ERROR] location: class my.pckgSignedRequestCallbackTest
[ERROR] ~/code/src/test/java/my/pckg/SignedRequestCallbackTest.java:[24,12] cannot find symbol
[ERROR] symbol  : method assertTrue(boolean)
[ERROR] location: class my.pckgSignedRequestCallbackTest
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

我的 pom.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.example</groupId>
    <artifactId>server</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>TestServer</name>
    <description>Test</description>
    <build>
        <sourceDirectory>src</sourceDirectory>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <!-- Facebook library -->
        <dependency>
            <groupId>com.restfb</groupId>
            <artifactId>restfb</artifactId>
            <version>1.6.11</version>
        </dependency>
        <!-- Gson: Java to Json conversion -->
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.2.2</version>
            <scope>compile</scope>
        </dependency>
        <!-- Tigase server snapshot -->
        <dependency>
            <groupId>tigase</groupId>
            <artifactId>tigase-server</artifactId>
            <version>5.2.0-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.7</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <repositories>
        <repository>
            <id>tigase</id>
            <name>Tigase repository</name>
            <url>http://maven.tigase.org</url>
        </repository>
        <repository>
            <id>tigase-snapshot</id>
            <name>Tigase repository</name>
            <url>http://build.xmpp-test.net/maven/</url>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>
</project> 
```

mvn 依赖：树：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Test Server 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ server ---
[INFO] my.pckg:server:jar:0.0.1-SNAPSHOT
[INFO] +- com.restfb:restfb:jar:1.6.11:compile
[INFO] +- com.google.code.gson:gson:jar:2.2.2:compile
[INFO] +- tigase:tigase-server:jar:5.2.0-SNAPSHOT:compile
[INFO] |  +- tigase:tigase-utils:jar:3.4.1-SNAPSHOT:compile
[INFO] |  \- tigase:tigase-xmltools:jar:3.4.3-SNAPSHOT:compile
[INFO] +- commons-codec:commons-codec:jar:1.7:compile
[INFO] \- junit:junit:jar:4.11:test
[INFO]    \- org.hamcrest:hamcrest-core:jar:1.3:test
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.240s
[INFO] Finished at: Fri Feb 22 18:07:55 CET 2013
[INFO] Final Memory: 5M/81M
[INFO] ------------------------------------------------------------------------ 
```

MV版本：

```
Apache Maven 3.0.3 (r1075438; 2011-02-28 18:31:09+0100)
Maven home: /usr/share/maven
Java version: 1.6.0_41, vendor: Apple Inc.
Java home: /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
Default locale: de_CH, platform encoding: MacRoman
OS name: "mac os x", version: "10.8.2", arch: "x86_64", family: "mac" 
```

请注意，我不是 java 专家，也不是 maven 专家，只是刚刚开始（尤其是 maven）。从我从其他文章和问题中看到的情况来看，我应该在其中包含我的测试`src/test/java`和我的“真实”代码`src/main/java`——我已经这样做了。

此外，我删除了整个 ~/.m2/ 文件夹，但它仍然无法正常工作。

我也跑`mvn test -X`了，但对我没有帮助。如果我应该发布它，请告诉我。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-22T17:29:06.400

除非有充分的理由，否则不应覆盖`<sourceDirectory>`POM 元素中的设置。`<build>`这个属性决定了 Maven 在哪里寻找*非测试*代码。此属性的默认值为`src/main/java`。该`<testSourceDirectory>`属性设置*测试*代码的路径（默认为`src/test/java`。通过`<sourceDirectory>`简单地将 设置为`src`，Maven 认为整个目录包含主应用程序代码。由于`src`目录包含`src/test/java`，Maven 然后尝试将您的测试代码编译为主应用程序的一部分。

这很重要，因为在编译主应用程序时（在该`compile`阶段），Maven 忽略了`test`作用域的依赖关系。测试代码在主编译之后的单独阶段（`test-compile`阶段）中编译。

因此，由于 Maven 尝试将您的测试代码编译为主应用程序的一部分，它省略了`junit`依赖项，并且它们在类路径中不可用。这里的解决方案是简单地不在 POM 中指定`<sourceDirectory>`元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-23T06:27:59.823

默认情况下，maven 分别查看这些文件夹中的 java 和 test 类 - src/main/java 和 src/test/java

当使用 source 下的测试类指定 src 并且 pom.xml 中的 junit 依赖范围被提及为 test - org.unit 将不会被 maven 找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-24T10:23:20.393

只需将图像放到@matts Answer，其他人就可以轻松纠正问题。

```
<sourceDirectory>src</sourceDirectory> 
```

**只需删除或注释pom.xml**中的这一行

 **```
<!--  <sourceDirectory>src</sourceDirectory> !--> 
```

[![在此处输入图像描述](../Images/f3b6b7e4bbf436f5b31cae1c9aa8078c.png)](https://i.stack.imgur.com/cSYcN.png)

如需解释，请查看@matt 的回答**

# r - 替代方法 = 'loess'

> ID：15029638
> 
> 赞同：1
> 
> 时间：2013-02-22T17:12:25.763
> 
> 标签：r, ggplot2, prediction, loess

这是我目前所处的位置：

我有一个`df`包含两列`A`和`B`（均包含实数）的数据框，其中`b`取决于`a`. 我将列相互绘制：

```
p = ggplot(df, aes(A, B)) + geom_point() 
```

并看到这种关系是非线性的。添加：

```
p = p + geom_smooth(method = 'loess', span = 1) 
```

给出最合适的“好”线。给定一个新值`a`I`A`然后使用以下方法来预测 的值`B`：

```
B.loess = loess(B ~ A, span = 1, data = df)
predict(B.loess, newdata = a) 
```

到目前为止，一切都很好。但是，然后我意识到我无法推断使用`loess`（大概是因为它是非参数的？！）。推断似乎很自然——这种关系看起来像是一种权力类型的事情正在发生，例如：

```
x = c(1:10)
y = 2^x
df = data.frame(A = x, B = y) 
```

这就是我解脱的地方。首先，我可以使用哪些方法来绘制一条最适合这种（“功率”）数据的线而不使用`loess`？可悲的尝试，例如：

```
p = ggplot(df, aes(A, B)) + geom_point() +
      geom_smooth(method = 'lm', formula = log(y) ~ x) 
```

给我错误。此外，假设我实际上能够绘制一条我满意的最佳拟合线，我`predict`在使用`loess`. 例如，假设我对最佳拟合线感到满意：

```
p = ggplot(df, aes(A, B)) + geom_point() +
      geom_smooth(method = 'lm', formula = y ~ x) 
```

那么如果我想预测`B`如果等于 11（理论上是 2^11）会取什么值`A`，则以下方法不起作用：

```
B.lm = lm(B ~ A)
predict(B.lm, newdata = 11) 
```

非常感谢任何帮助。干杯。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T17:25:12.130

首先，要回答您的最后一个问题，您需要提供一个 data.frame，其中 colnames 是预测变量。

```
B.lm <- lm(B ~ A,data=df)
predict(B.lm, newdata = data.frame(A=11))

     1 
683.3333 
```

作为 loess 的替代方案，您可以尝试一些更高的多项式回归。在此图中，我与`poly~3`使用`loess`（`latticeExtra`更容易添加 xspline 插值）进行比较，但语法与 ggplot2.(layer) 相似。

```
xyplot(A ~ B,data=df,par.settings = ggplot2like(),
       panel = function(x,y,...){
         panel.xyplot(x,y,...)
         grid.xspline(x,y,..., default.units = "native") ## xspline interpolation
       })+
  layer(panel.smoother(y ~ poly(x, 3), method = "lm"), style = 1)+  ## poly
  layer(panel.smoother(y ~ x, span = 0.9),style=2)   ### loeess 
```

![在此处输入图像描述](../Images/9fa539cf0d0b77103d54c59b407d1035.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T17:36:04.593

不出所料，默认情况下不允许`surface`外推。替代方案允许您进行推断，但仍然存在关于这是否有意义的问题。`loess.control``interpolate``direct`

```
predict(loess(hp~disp,mtcars),newdata=1000)
[1] NA
predict(loess(hp~disp,mtcars,control=loess.control(surface="direct")),newdata=1000)
[1] -785.0545 
```

# java - 使用 BeanUtilsBean 从请求中填充对象中的 HashMap

> ID：15029639
> 
> 赞同：1
> 
> 时间：2013-02-22T17:12:25.803
> 
> 标签：java, http, request, javabeans, populate

我当前的应用程序使用这种函数从 http 请求填充一个简单的 java 对象：

```
// request is an instance of org.apache.catalina.connector.RequestFacade
// myObject is an instance of MyBusinessDTO
org.apache.commons.beanutils.BeanUtilsBean.populate( myObject, request.getParameterMap( ) ); 
```

它几乎适用于任何用例，但我仍然坚持使用我的请求参数填充 HashMap。

我要填充的对象如下所示：

```
public class MyBusinessDTO extends BusinessDTO
{

    private Map<String, Object> listeFormsChecked = new HashMap<String, Object>( );

    /**
     * @return the listeFormsChecked
     */
    public Map<String, Object> getListeFormsChecked( )
    {
        return listeFormsChecked;
    }

    /**
     * @param listeFormsChecked the listeFormsChecked to set
     */
    public void setListeFormsChecked( Map<String, Object> listeFormsChecked )
    {
        this.listeFormsChecked = listeFormsChecked;
    }
} 
```

我已经尝试过我的要求，例如：

*   prefixPath.myBusinessDTOAttribute.key=value
*   prefixPath.myBusinessDTOAttribute[key]=value

但它们都不起作用。

这甚至可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T03:37:39.553

不是 100% 肯定，而且我也只是用 beanutils 弄湿了我的脚，但从 javadocs 听起来你的想法不受支持：

> “此方法使用 Java 反射 API 来识别相应的“属性设置器”方法名称，并处理 String、boolean、int、long、float 和 double 类型的设置器参数。此外， 这些类型的**数组**设置器（或相应的原语类型）也可以被识别。”

所以，数组，但没有地图。

但是您可以尝试使用两个同步的（不是 Java 意义上的）数组，并使用 beanutils 将它们独立设置在单独的变量中 - iow 您的键将是一个具有自己的 getter 和 setter 的数组，而 vals 将是一个第二个数组有自己的 getter 和 setter，然后你可以在 bean 中有一个实用方法，自动将它们合并到一个映射中。

# android - 从广播接收器访问 R

> ID：15029647
> 
> 赞同：1
> 
> 时间：2013-02-22T17:12:34.887
> 
> 标签：android, textview, broadcastreceiver

我想在我的 BroadcastReceiver 的 onReceive 方法中更改一个 TextView，但我无法使用 findViewById 访问它，因为它不是一个活动。我不想在我的活动中为 BroadcastReceiver 创建一个私有类。

我怎样才能获得访问权？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:30:52.983

定义一个接口并使用回调让活动知道已收到广播事件。

```
public Interface BroadcastReceiverListener {
    void onReceive(int arg1, String arg2); ..<----add arguments you want to pass back
} 
```

在您的 BroadcastReceiver 类中

```
ArrayList<BroadcastReceiveListener > listeners = new ArrayList<BroadcastReceiveListener >();

...

public void addBroadcastReceiveListener (BroadcastReceiveListener listener){
    if(!listeners.contains(listener)){
        listeners.add(listener);
    }
}

public void removeBroadcastReceiveListener (BroadcastReceiveListener listener){
    if(listeners.contains(listener)){
        listeners.remove(listener);
    }
} 
```

在您的 OnReceive 中

```
for (BroadcastReceiveListener listener:listeners){
   listener.onReceive(arg1, arg2);
} 
```

在您的活动中：

```
public class MyActivity extends Activity implements BroadcastReceiveListener {

    ...

    broadcastReceiver.addBroadcastReceiveListener(this); <---- the instance of your receiver

    ...
}

public void onReceive(int arg1, String arg2){
   // do whatever you need to do
} 
```

笔记。因为您使用接口，所以任何类（不仅仅是 Activity）都可以实现它，因此您可以在应用程序的任何位置进行更新。BroadcastReceiver 类不知道也不关心。它只是调用侦听器，如果有的话。

现在，您不需要访问 R 或与 UI 相关的任何内容，因为您的 Activity 是唯一知道并且可以更改您的 UI 的类 - 这是 Android 方式！

[编辑]

论据是你需要的任何东西。

将其`Interface`视为合同。它说任何实现它的人都必须实现该`onReceive()`方法，并且该方法将使用整数和字符串调用。如果有的话，这取决于你需要什么论据。

`BroadcastReceiver.onReceive()`调用`onReceive`接口的回调并将 int 和 String 作为参数传入。

例如，您可以更改接口定义以传递布尔值。

```
public Interface BroadcastReceiverListener {
    void onReceive(boolean arg1); ..<----add arguments you want to pass back
} 
```

然后你的调用者看起来像这样：

```
for (BroadcastReceiveListener listener:listeners){
   listener.onReceive(someBooleanValue);
} 
```

您的回调如下所示：

```
public void onReceive(boolean theCallerIsReady){
   if(theCallerIsReady){
       // do interesting stuff
   }
} 
```

# mysql - Mysql替换NULL

> ID：15029648
> 
> 赞同：0
> 
> 时间：2013-02-22T17:12:36.387
> 
> 标签：mysql, sql

我有一张这样的桌子：

```
data1 data2 data3
data4 NULL  data5
data6 data7 data8 
```

我想删除 NULL 字段（不是整行），并且“data7”应该上升一行。它应该看起来像这样

```
data1 data2 data3
data4 data7 data5
data6       data8 
```

是否有删除数据库中所有 NULL 字段（不是行）的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:49:07.630

有你的表结构或目的会很好，没有它我可以为你的问题提供一个不太好的解决方案：

3 个表 column1(id,col1) column2(id,col2) column3(id,col3)

您删除每个表的每个“colx”行中的空行。然后你“重新创建”该表的 ID，例如使用这个 [Mysql，枚举行，排序](https://stackoverflow.com/questions/12655268/mysql-enumerate-rows-order)

然后，如果您加入表，将没有空值，并且行将“上升”以填充空值

我再说一遍......这不是最好的解决方案，但这就是我可以用你提供的信息说的

# sql - Arel：使用符号的左外连接

> ID：15029652
> 
> 赞同：5
> 
> 时间：2013-02-22T17:12:41.810
> 
> 标签：sql, ruby-on-rails-3, activerecord, arel

我有这个用例，我从某个模型中获取符号化的深度关联，并且我必须执行某些涉及使用外连接的查询。如果不手动编写完整的 SQL，怎么能做到这一点？

我不想要的答案： - 使用包含（不能很好地解决深层关联（ .includes(:cars => [:windows, :engine => [:ignition]..... 出乎意料地工作）我不'不想要它的副作用） - 自己编写 SQL（对不起，它是 2013 年，跨数据库支持等等等......，我获取的对象是只读的，更多的副作用）

我想要一个 Arel 解决方案。我知道使用模型中的 arel_table 可以构造 SQL 表达式，还有一个用于连接的 DSL，但不知何故我不能在模型的连接方法中使用它：

```
car = Car.arel_table
engine = Engine.arel_table

eng_exp = car.join(engine).on(car[:engine_id].eq(engine[:id]))
eng_exp.to_sql #=> GOOD! very nice!
Car.joins(eng_exp) #=> Breaks!! 
```

为什么这不起作用超出了我的范围。我不知道究竟缺少什么。但这是我现在拥有的最接近解决方案的东西。如果有人可以帮助我完成我的示例或为我提供一个很好的解决方法或告诉我 Rails 何时会包含如此明显必要的功能，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-04T10:29:37.773

这是一个古老的问题，但为了任何通过搜索引擎找到它的人的利益：

如果你想要一些你可以传入的东西`.joins`，你可以使用`.create_join`and `.create_on`：

```
join_on = car.create_on(car[:engine_id].eq(engine[:id]))
eng_join = car.create_join(engine, join_on, Arel::Nodes::OuterJoin)

Car.joins(eng_join) 
```

或者

使用`.join_sources`来自您构造的连接对象：

```
eng_exp = car.join(engine, Arel::Nodes::OuterJoin).on(car[:engine_id].eq(engine[:id]))
Car.joins(eng_exp.join_sources) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T20:05:42.147

我发现了一篇旨在解决此问题的博客文章：[http ://blog.donwilson.net/2011/11/constructing-a-less-than-simple-query-with-rails-and-arel/](http://blog.donwilson.net/2011/11/constructing-a-less-than-simple-query-with-rails-and-arel/)

基于此（以及我自己的测试），以下内容应该适用于您的情况：

```
car = Car.arel_table
engine = Engine.arel_table   

sql = car.project(car[Arel.star])
        .join(engine, Arel::Nodes::OuterJoin).on(car[:engine_id].eq(engine[:id]))

Car.find_by_sql(sql) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T21:39:14.970

如果您不介意添加依赖项并完全跳过 AREL，您可以使用[Ernie Miller 出色的 Squeel gem](https://github.com/activerecord-hackery/squeel#joins)。会是这样的

```
Car.joins{engine.outer}.where(...) 
```

这将要求 Car 模型与 Engine 相关联，如下所示：

```
belongs_to :engine 
```

# cakephp - Cakephp 显示第二个模型关联名称而不是 ID

> ID：15029653
> 
> 赞同：0
> 
> 时间：2013-02-22T17:12:42.487
> 
> 标签：cakephp

我在数据库中有下一个表：

*   电梯
*   车辆
*   制造商

电梯属于车辆

车辆属于制造商

制造商有很多车辆

**LiftsController.php 添加方法：**

```
public function add() {
    if ($this->request->is('post')) {
        $this->Lift->create();
        $this->request->data['Lift']['user_id'] = $this->Auth->user('id');
        if ($this->Lift->save($this->request->data)) {
            $this->Session->setFlash(__('The lift has been saved'));
            $this->redirect(array('action' => 'my_lifts'));
        } else {
            $this->Session->setFlash(__('The lift could not be saved. Please, try again.'));
        }
    }
    $vehicles = $this->Lift->Vehicle->find('all', array('fields' => array('id', 'model', 'manufacturer_id')));
    $towns = $this->Lift->TownFrom->find('list', array('order' => 'county ASC, name ASC', 'fields' => array('id', 'name', 'county')));
    $this->set(compact('users', 'vehicles', 'towns'));
} 
```

**LiftsController.php 添加视图：**

```
 echo $this->Form->input('vehicle_id'); 
```

**打印屏幕：**

![图像](../Images/bb63ecbfc9773abe17d0991c874d948a.png)

所以我需要的是显示制造商 ID 而不是制造商名称。在每个模型中，$displayField 都设置为正确的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T00:26:15.330

**改变**

```
$vehicles = $this->Lift->Vehicle->find('all', array('fields' => array('id', 'model', 'manufacturer_id'))); 
```

**至**

```
$vehicles = $this->Lift->Vehicle->find('list', array('conditions' => array('Vehicle.user_id' => $this->Auth->user('id')), 'recursive' => 0, 'fields' => array('Vehicle.id', 'Vehicle.model', 'Manufacturer.title'))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:14:28.703

尝试改变：

```
echo $this->Form->input('vehicle_id'); 
```

至

```
echo $this->Form->input('Vehicle'); 
```

# iphone - 如何使用 url 获取 json 数据并将其写入文件？

> ID：15029654
> 
> 赞同：0
> 
> 时间：2013-02-22T17:12:45.567
> 
> 标签：iphone, json, ios6, nsdocumentdirectory

![在此处输入图像描述](../Images/7cf5b3cede6a58f2c0d138959ab5df7b.png)

正如我上面的屏幕截图所示，我的应用程序中有一个 json 文件（productDetail.json），然后我从 json 数据写入文件，如下面的代码

```
else if([(MultipleURLConnection *)connection tag]==2)
    {
  if([fn writeToFile:responseData fileName:@"productDetail.json"])
       [self performSelector:@selector(loadingJSON) withObject:nil afterDelay:0.1];
    } 
```

在上面的代码中 responseData 是 NSMutableData 并且 fn 是函数类对象名称，其中我有以下方法

```
- (BOOL)writeToFile:(NSData *)data fileName:(NSString *)fileName 
 {
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *myFile = [documentsDirectory stringByAppendingPathComponent:fileName];
NSFileManager *fm = [NSFileManager defaultManager];
if (![fm fileExistsAtPath:myFile])  // if file doesn't exist, create it
    return ([fm createFileAtPath:myFile contents:data attributes:nil]);
else
    return ([data writeToFile:myFile atomically:YES]);  
 } 
```

现在我决定从应用程序中删除 json 文件并将其放在服务器上然后获取它。所以在将 json 文件放在服务器上之后我尝试像下面的编码一样获取它

```
else if([(MultipleURLConnection *)connection tag]==2)
    {
        NSURL *url = [NSURL URLWithString:@"http://mysite.com/Infomist/productDetail.json"];
        NSData *jsonData = [NSData dataWithContentsOfURL:url];

        if(jsonData != nil)
        {
            NSError *error = nil;

            id result = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];
            if (error == nil)
              NSLog(@"show data %@",result);
       } 
```

现在上面的方法成功地从服务器获取我的数据它在 NSlog 中显示了我的所有数据，但对我来说现在的问题是现在如何修改这个方法

```
 if([fn writeToFile:responseData fileName:@"]) 
```

因为将 json 文件放在服务器上后，我没有任何文件可以在上述方法中传递文件名来调用

```
- (BOOL)writeToFile:(NSData *)data fileName:(NSString *)fileName  . 
```

我已经有本地 json 文件的应用程序流，所以我只需要在我的应用程序中写入 json 数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:31:34.277

```
- (BOOL)writeToFile:(NSData *)data fileName:(NSString *)fileName 
```

以上要求`NSData`作为参数

```
 id result = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error]; 
```

上面给出`id`了一个返回类型的对象..你需要检查它使用的是哪种类型的对象`isKindOfClass`

然后使用**解码/NSkeyedArchiver 或其他技术将其转换为数据**

# build - cmake：如何从项目目录中包含/编译文件？

> ID：15029662
> 
> 赞同：0
> 
> 时间：2013-02-22T17:13:07.260
> 
> 标签：build, cmake, project, external-project

我有这个目录结构：

```
projects/
    project1/
        src/
            main.cpp
            CMakeLists.txt
    project2/
        src/
            file1.h
            file1.cpp
            test1.cpp 
```

顶级项目目录不能被认为是顶级项目，而只是不相关项目的集合，所以我不会`CMakeLists.txt`在该级别放置文件。

我希望 project1 包含 project2 中的文件而不指定完整路径，例如：

```
// main.cpp
#include "file1.h" 
```

而且我还希望在project1中构建project2的实现文件。

我需要 project2 不是一个库，而只是使用它的文件，就像它们是 project1 的一部分一样。

我正在使用`cmake`，这是`CMakeLists.txt`我写的文件（它不起作用）：

```
cmake_minimum_required(VERSION 2.8)
project(project1)
add_subdirectory(src)
add_subdirectory(../../project2/src) 
```

即使指定 project2 的完整路径也不起作用：`${CMAKE_CURRENT_SOURCE_DIR)/../../project2/src`

我从`make`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:18:16.360

要使用外部包含文件，这有效：

```
include_directories 
```

# java - JavaFX 从另一个线程访问 gui 按钮操作

> ID：15029665
> 
> 赞同：1
> 
> 时间：2013-02-22T17:13:12.507
> 
> 标签：java, multithreading, button, javafx-2, javafx

我正在从另一个类开始一个 JavaFX gui 应用程序，即`StartClient`通过做。

```
public class StartClient extends Application {

private Table gui;

@Override
public void start(Stage stage) throws Exception {
    gui = new Table();
    gui.start(stage); 
```

我`Task`通过它连接到服务器并接收服务器分配的轮次，我在 gui 中使用`Platform.runLater`.

```
Task<Void> task = new Task<Void>() {
    @Override
    protected Void call() throws Exception {
        connectToServer(); // connect to server, set up socket, i/o streams
        Object read = inputStream.readObject();

        if (read instanceof String) {
            turn = //parseInt from read
            Platform.runLater(new Runnable() {
                public void run() {
                    gui.setPlayerID(turn);
                }
            });
        }
    }
}; //end of task 
```

我的问题是，如果轮到他们，我想让玩家做出移动并将其发送回服务器，执行如下操作：

```
if(networkClientID == gui.getState().getTurn()){
    do {
        action = Table.getAction(); //static getAction returns the move from the table if there was one
    } while (action == -1);

    outputStream.writeObject(action + ""); // write out turn
} 
```

我是否在后台执行此操作`Thread`（我正在从 gui 读取静态变量，或者我应该在 javaFX 线程中执行此操作，即内部`Platform.runLater`，我已经尝试过，但没有得到任何地方，我的程序卡住了。）

任何建议，帮助，欢迎就如何解决这个问题提出建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:57:01.223

恕我直言，最好的方法是将您的数据（即：转弯）放在一个单独的类中。

请记住 JavaFX 是一种 MVC 模型。您可以使用 Model 类来保留此信息并引用此信息。如果要将对模型类的引用传递给另一个线程，则必须同步该线程。

这样你就可以把事情分开。你的控制器只会控制场景在做什么。您的模型将存储信息。

[这个答案](https://stackoverflow.com/a/12167932/686036)为如何实现这一点提供了一个很好的起点。

例如，我有一个任务（文件观察者），我将其称为如下所示。这是我的控制器的快速快照：

```
public class myController {
    private Context context;
    private Executor executor;

    ...

    myBtn.setOnAction(new EventHandler<ActionEvent>() {
        public void handle(ActionEvent event) {
            task = new ResultFileWatcher(context);  //context is my singleton model class
            executor.execute(task);
        }
    }

    ...

} 
```

我的扩展类的类看起来有点像这样。这是我的`Task`（注意这扩展了类`Task`），它将在不同的`Thread`.

```
public class ResultFileWatcher extends Task<Object> {
    private Context context;

    public ResultFileWatcher(Context context) {
        this.context = context;
    }

    ...

    @Override
    protected Object call() throws Exception {
        //...
    }
} 
```

希望这可以帮助！

# python - 将项目从模型导出到 CSV Django / Python

> ID：15029666
> 
> 赞同：12
> 
> 时间：2013-02-22T17:13:13.687
> 
> 标签：python, django, django-models, python-3.x

我对 django 和 Python 还很陌生，希望能够在我的模型（即产品）中导出项目列表。我在这里查看文档 - [https://docs.djangoproject.com/en/dev/howto/outputting-csv/](https://docs.djangoproject.com/en/dev/howto/outputting-csv/)

我假设我需要创建一个变量来存储我想要的所有数据。但不确定它在上面链接的代码片段中的位置。

道歉，因为这是一个非常愚蠢的问题，但真的会有所帮助。

到目前为止，这是我的脚本的代码：

```
import csv

from products.models import Product

from django.http import HttpResponse

def export_to_csv(request):
    response = HttpResponse(content_type='text/csv')
    response['Content-Disposition'] = 'attachment; filename="mytest.csv"' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T17:14:33.820

看看[python csv 模块](http://docs.python.org/2/library/csv.html)。

您可能希望获得模型字段

```
def get_model_fields(model):
    return model._meta.fields 
```

然后使用

```
getattr(instance, field.name) 
```

获取字段值（如[this](https://stackoverflow.com/questions/3647805/get-models-fields-in-django) question）。

然后你会想要类似的东西

```
with open('your.csv', 'wb') as csvfile:
    writer = csv.writer(csvfile)
    # write your header first
    for obj in YourModel.objects.all():
        row = ""
        for field in fields:
             row += getattr(obj, field.name) + ","
        writer.writerow(row) 
```

它有点冗长（并且未经测试），但它应该给你一个想法。（哦，别忘了关闭你的文件）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-20T20:27:17.560

根据场景 - 您可能希望拥有模型的 CSV。如果您有权访问 Django 管理站点，则可以为任何显示为列表的模型插入通用操作（谷歌：django 管理操作）

[http://djangosnippets.org/snippets/790/](http://djangosnippets.org/snippets/790/)

如果您使用控制台 ( `python manage.py ...`) 进行操作，则可以使用我刚刚使用的这样一个脚本：

（把它放在：yourapp/management/commands/model2csv.py）

```
"""
 Prints CSV of all fields of a model.
"""

from django.core.management.base import BaseCommand, CommandError
import csv
import sys

class Command(BaseCommand):
    help = ("Output the specified model as CSV")
    args = '[appname.ModelName]'

    def handle(self, *app_labels, **options):
        from django.db.models import get_model
        app_name, model_name = app_labels[0].split('.')
        model = get_model(app_name, model_name)
        field_names = [f.name for f in model._meta.fields]
        writer = csv.writer(sys.stdout, quoting=csv.QUOTE_ALL)
        writer.writerow(field_names)
        for instance in model.objects.all():
            writer.writerow([unicode(getattr(instance, f)).encode('utf-8') for f in field_names]) 
```

这不会捕获任何异常等，但是作为管理员，您不会引发它们，对吗？

像这样使用它：

```
./manage.py model2csv my_ecommerce.Product > products.csv 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T17:47:49.397

您还可以制作模板来帮助格式化！

模板是常见的 Django 模板

```
from django.template import loader
def export_to_csv(request):
    response = HttpResponse(mimetype='text/csv')
    response['Content-Disposition'] = 'attachment; filename="products-list.csv"'
    template = loader.get_template('templates/products_template.csb')
    response.write(template.render(Context({'products': Products.objects.all()})))
    return response 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-09T23:38:08.503

我在我的代码上使用它。从视图调用的函数。它**会自动获取模型字段**以创建列。您还可以自定义要导出**的字段列表。**

## 功能

```
import csv

from django.http import HttpResponse

from .models import Books

def export_qs_to_csv(model_class = None, qs = None, field_names = None):
    if model_class and not qs:
        qs = model_class.objects.all()
    if qs and not model_class:
        model_class = qs.model

    meta = model_class._meta
    if not field_names:
        field_names = [field.name for field in meta.fields]

    response = HttpResponse(content_type='text/csv')
    response['Content-Disposition'] = 'attachment; filename={}.csv'.format(meta)
    writer = csv.writer(response)

    writer.writerow(field_names)
    for obj in qs:
        row = writer.writerow([getattr(obj, field) for field in field_names])

    return response 
```

## 用法

```
@user_passes_test(lambda u: u.is_superuser)
def export_books(request):
    return export_qs_to_csv(model_class = Books)
    # or
    return export_qs_to_csv(qs = Books.objects.filter(published = True))
    # or
    return export_qs_to_csv(
        qs = Books.objects.filter(published = True),
        field_names = [
            "title",
            "price",
            "publishing_date",
        ]
        ) 
```

# 原始答案

它可以工作，它只需要在**model_class**变量中定义模型类。这个 Django 视图让我们使用下载 CSV。CSV 名称是*Django_app.model_name.csv*。

```
import csv

from django.http import HttpResponse

from .models import Trade

def export_to_csv(request):
    # The only line to customize
    model_class = Trade

    meta = model_class._meta
    field_names = [field.name for field in meta.fields]

    response = HttpResponse(content_type='text/csv')
    response['Content-Disposition'] = 'attachment; filename={}.csv'.format(meta)
    writer = csv.writer(response)

    writer.writerow(field_names)
    for obj in model_class.objects.all():
        row = writer.writerow([getattr(obj, field) for field in field_names])

    return response 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-28T09:52:38.563

使用[django.db.models.query.QuerySet.values](https://docs.djangoproject.com/en/2.2/ref/models/querysets/#django.db.models.query.QuerySet.values)可以为我的用例带来更优化的查询。

```
import csv
from datetime import datetime

from django.http import HttpResponse

# Populate this list with your model's fields
# Replace MODEL with your model
fields = [f.name for f in MODEL._meta.fields]

# The following code will live inside your view
timestamp = datetime.now().isoformat()

response = HttpResponse(content_type="text/csv")
response[
    "Content-Disposition"
] = f"attachment; filename={timestamp}.csv"
writer = csv.writer(response)

# Write the header row
writer.writerow(fields)

# Replace MODEL with your model
for row in MODEL.objects.values(*fields):
    writer.writerow([row[field] for field in fields])

return response 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-30T23:35:20.527

这是一个潜在的解决方案，基于 @tomasz-gandor 的回答，但更新到 2020 年：

```
"""
 Prints CSV of all fields of a model.
"""

import csv
from django.core.management.base import BaseCommand, CommandError

class Command(BaseCommand):
    help = ("Output the specified model as CSV")

    def add_arguments(self, parser):
        parser.add_argument('model',
                            nargs=1,
                            type=str,
                            help='Model name to export, like <app.model> or "members.Member"')
        parser.add_argument('outfile',
                            nargs=1,
                            type=str,
                            help='Save path, like </path/to/outfile.csv> or "/data/members.csv"')

    def handle(self, *app_labels, **options):
        from django.apps import apps
        app_name, model_name = options['model'][0].split('.')
        model = apps.get_model(app_name, model_name)
        field_names = [f.name for f in model._meta.fields]
        writer = csv.writer(open(options['outfile'][0], 'w'), quoting=csv.QUOTE_ALL, delimiter=',')
        writer.writerow(field_names)
        for instance in model.objects.all():
            writer.writerow([str(getattr(instance, f)) for f in field_names]) 
```

可以很容易地用于：

`python manage.py model2csv members.Member /data/members_export.csv`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-03T16:18:26.347

我使用了 django-queryset-csv 包。

按着这些次序：

1.  `pip install django-queryset-csv`

2.  你的意见.py：

> ```
> import djqscsv
> from products.models import Product
> 
> def get_csv(request):
>     qs = Product.objects.all()
>     return djqscsv.render_to_csv_response(qs) 
> ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-20T08:16:17.130

将此解决方案用于模型 csv 文件。可能会有所帮助

```
 # Create the HttpResponse object with the appropriate CSV header.
 response = HttpResponse(content_type='text/csv')
 response['Content-Disposition'] = 'attachment; 
 filename="somefilename.csv"'
 writer = csv.writer(response);
 writer.writerow(["username","Email"]);
 for i in User.objects.all():
     writer.writerow([i.username,i.email])
 return response 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-03T11:46:50.680

我结合了之前的一些答案，因为我需要从生产中导入一些数据并在此过程中对其进行一些更改。所以这是我的解决方案，您可以在编写 CSV 文件时使用它来覆盖某些字段值。

将一些查询集数据导出到 CSV 文件中：

```
import csv

from myapp.models import MyModel
from user.models import User

# Make some queryset manually using Django shell:
user = User.objects.get(username='peterhil')
queryset = MyModel.objects.filter(user=user)

def query_to_csv(queryset, filename='items.csv', **override):
    field_names = [field.name for field in queryset.model._meta.fields]
    def field_value(row, field_name):
        if field_name in override.keys():
            return override[field_name]
        else:
            return row[field_name]
    with open(filename, 'w') as csvfile:
        writer = csv.writer(csvfile, quoting=csv.QUOTE_ALL, delimiter=',')
        writer.writerow(field_names)  # write the header
        for row in queryset.values(*field_names):
            writer.writerow([field_value(row, field) for field in field_names])

# Example usage:
query_to_csv(queryset, filename='data.csv', user=1, group=1) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-14T07:49:16.067

如果您不关心字段名并想要所有字段，请执行此操作。

```
with open('file_name.csv', 'w') as csvfile:
    writer = csv.writer(csvfile)
    for obj in YourModel.objects.values_list():
        row = list(obj)
        writer.writerow(row) 
```

# jquery - Jquery 在输入文本中预加载值并更新它们

> ID：15029669
> 
> 赞同：0
> 
> 时间：2013-02-22T17:13:27.360
> 
> 标签：jquery, codeigniter

我有这些文本输入，其中预加载了有关文档加载的用户信息。我的输入html如下

```
<div class="control-group">
     <label class="control-label" for="first_name">First Name</label>
     <div class="controls">
         <input type="text" class="account" id="first_name" placeholder="First Name">
     </div>
</div>
<div class="control-group">
     <label class="control-label" for="inputEmail">Email</label>
     <div class="controls">
        <input type="text" class="account" id="inputEmail" placeholder="Email">
     </div>
</div> 
```

我的预加载在 jquery 中是这样的，它对 php 函数执行 $.post。这很好用，因为输入元素被正确填充。

```
function loadUserInfo()
{
    $.post('../accounts/load_user_info_ajax', null, function(data) {
        console.log(data.message);//Test to return user id

        var user = data.message;

        $('#inputEmail').val(user.email);
        $('#first_name').val(user.name);

    }, 'json');
} 
```

但是有一个更新 btn，当我单击它时，它会将 $.post 发送到另一个函数。jquery如下

```
$('.update').on('click',function(){

    var type = $(this).attr('id');

    if(type == "account")
    {
        postvars = {
                name:$('#first_name').val(),
                email : $('#inputEmail').val(),
            };
        url = '../accounts/update_user_account_ajax';
    }

    $.post(url, postvars, function(data) {

        console.log(data);//Test to return user id
        alert(data.message);
        var user = data.message;

    }, 'json');
}); 
```

一开始我只是回来

```
function update_user_account_ajax()
{
    if ($this->input->is_ajax_request()) {

       echo json_encode("test");
    }else {
        show_404();
    }
} 
```

但是什么也没发生，我也看不到任何来自 chrome 调试器网络的东西。页面也会刷新并附加一个 ? 到你。在此先感谢您的帮助。我正在为我的 php 使用 codeigniter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:00:22.373

正如@Joel_Blum 所说，还要这样做：您应该`return false;`在函数主体的末尾添加`on('click',function(){ ...`以防止重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:25:15.817

试试这个

```
url :  '<?php echo site_url("accounts/update_user_account_ajax")?> 
```

# jquery - jQuery UI 对话框 - 下一个按钮参考

> ID：15029675
> 
> 赞同：0
> 
> 时间：2013-02-22T17:13:38.220
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

如何在 jQuery UI 对话框弹出窗口中引用下一个按钮？

单击按钮时，我需要更改“下一步”按钮的背景颜色，因为 Internet Explorer 有一个故障，将按钮背景颜色永久更改为蓝色（因为悬停颜色）。

代码位如下所示

```
$( "#dialog-form" ).dialog({
  autoOpen: true,
  height: 'auto',
  width: 'auto',
  position: 'top',
  modal: true,
  buttons: {
    "Cancel": function() {
       $( this ).dialog( "close" );
       allFields.val( "" ).removeClass( "ui-state-error" );
    },
    "Next": function() {  
       alert('asdf');
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:59:58.703

将格式应用于此类按钮的 CSS 类是：

`ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only`

也许您只需要引用“下一步”按钮来应用特定的 CSS。像这样的东西：

```
$('.ui-dialog .ui-dialog-buttonset button:contains("Next")') 
```

此选择器在 HTML 的任何 JQueryUI 对话框中获取包含“下一步”文本的所有按钮文本。

# java - 拦截 Shell 命令

> ID：15029681
> 
> 赞同：0
> 
> 时间：2013-02-22T17:13:55.193
> 
> 标签：java, linux, shell

我想知道一种能够拦截 shell 命令的方法

当我运行一个命令来编译一个java程序时

```
javac xxx.java 
```

我希望 shell 执行一组程序，这些程序将在编译之前通过运行一组其他命令来检测 xxx.java 文件。

```
./instrument xxx.java 
```

只有在此之后，必须调用 JVM 进行编译。是否可以在 shell 中拦截命令，如果不能，我怎么能在系统用户不知道他的代码被检测的情况下实现它？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:16:31.810

听起来你想要一个构建工具。 [Maven](http://maven.apache.org/)是一个很好的选择，还有很多其他的很好的选择（[ant](http://ant.apache.org/)、[gradle](http://www.gradle.org/)、make 等）。构建工具允许您将一系列复杂的操作联系在一起以生成最终工件，而无需每次都指定这些步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:20:24.477

取决于您对问题的解释。听起来你想偷偷摸摸，而不是使用 Maven 构建，所以就这样吧。

你想要的是拦截并运行同名的程序版本。基本上你需要创建一个名为

> 爪哇

它采用与真正的 javac 完全相同的参数。然后在您的程序中，您可以在文件上运行所需的任何工具作为参数。最后，您可以通过在 JAVA_HOME 或保存原始 java bin 目录路径的任何环境变量中进行查找来调用真正的 javac。

为了让您的 javac 版本优先，您需要将它添加到 PATH 环境变量的 HEAD 中。这将确保首先检查程序名称。在linux中，这样做

```
PATH=/usr/myPrograms/java/bin:$PATH 
```

注意：如果用户明确键入 javac 的绝对完整路径，此解决方案将不起作用

# css - 仅左边框图像

> ID：15029682
> 
> 赞同：0
> 
> 时间：2013-02-22T17:13:57.027
> 
> 标签：css

我正在尝试添加边框图像，但仅添加到元素的左侧。我试过border-left-image无济于事。如果您查看[此站点](http://tdg.thesn.net)，您会注意到在页脚处我有一个两边都有双边框的元素，而我只想要它在左边。

这是我当前对该元素的样式：

```
 border-style: solid;
    -moz-border-image: url(/assets/dist/images/footer-border.png) 8 fill stretch repeat;
    -webkit-border-image: url(/assets/dist/images/footer-border.png) 8 fill stretch repeat;
    -o-border-image: url(/assets/dist/images/footer-border.png) 8 fill stretch repeat;
    border-image: url(/assets/dist/images/footer-border.png) 8 fill stretch repeat; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-18T17:28:56.007

边框图像具有宽度属性。设置（分别）顶部，右侧，底部，左侧的宽度：

```
边框图像宽度：0px 0px 0px 30px；
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:59:52.893

决定将其绝对定位为背景图像并在 y 轴上重复它。可能不是最好的解决方案，但它有效。

# objective-c - NSstream 写入编码问题

> ID：15029685
> 
> 赞同：1
> 
> 时间：2013-02-22T17:14:12.990
> 
> 标签：objective-c, tcp, nsstream, actionhero

我试图使用 NSoutputstream 发送一个字符串，但是我似乎无法正确编码，使用 dataWithContentsOfURL 有效

我正在使用带有 actionHero 库的 nodejs TCP 服务器。

它使用 netcat 和 telnet 工作。

```
- (IBAction)sendText:(id)sender {
NSString *response  = [NSString stringWithFormat:@"%@", [_sendTextField.text stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]];
NSLog(@"writing %@",response);

///////////////////////////// this line works/////////////////////////////////////////////////////
//  NSData *data = [[NSData alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL   URLWithString:@"http://www.google.com"]]];

///////////////////////////// this line doesnt work/////////////////////////////////////////////////////
NSData *data = [[NSData alloc] initWithData:[response dataUsingEncoding:NSUTF8StringEncoding]];

//%u returns a non zero value
NSLog(@"%u",[outputStream write:[data bytes] maxLength:[data length]]);
} 
```

我从句柄流事件方法中得到一个空流错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:20:36.490

找到了我自己的问题的答案。原来问题出在 actionHero 的 on data 方法中，它查找 ios 应用程序未提供的 /n。附加了一个 \n 并且现在很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:09:19.830

不知道 的内容`response`，我无法具体回答为什么 NSUTF8StringEncoding 不能使用它。但是，一般来说，如果您的内容中存在与 UTF-8 不兼容的字节序列，那么当您调用`-dataUsingEncoding:`.

我从阅读[Mike Ash 的博客](http://www.mikeash.com/pyblog/friday-qa-2010-02-19-character-encodings.html)中学到了一个策略（在“Fallbacks”部分下查看），它在像你这样的情况下对我很有帮助。

简单总结一下，首先尝试使用`NSUTF8StringEncoding`. 如果这不起作用，请尝试使用`NSISOLatin1StringEncoding`. 如果这不起作用，请尝试使用`NSMacOSRomanStringEncoding`. 迈克的博客有这样做的理由。

# jquery - scale() CSS3 属性在悬停时移动其他元素

> ID：15029690
> 
> 赞同：2
> 
> 时间：2013-02-22T17:14:24.033
> 
> 标签：jquery, css

我正在尝试制作一个画廊，但是，我遇到了规模属性的问题。看来，如果我快速将鼠标悬停在几个元素上，它们会由于 scale() 而开始前后移动约 1px。

HTML：

```
 <section id="first">
                        <section>
                             <img src="http://tympanus.net/Tutorials/OriginalHoverEffects/images/1.jpg" />  
                            <a href="#">
                                <div class="shade">

                <h5>Cappuccino</h5>
                                <p>
                                    This is Photoshop's version  of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet.
                                </p>
                            </div>
                            </a>
                        </section>
                        <section>
                             <img src="http://tympanus.net/Tutorials/OriginalHoverEffects/images/1.jpg" />  
                            <a href="#">
                                <div class="shade">
                                <h5>Cappuccino</h5>
                                <p>
                                    This is Photoshop's version  of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet.
                                </p>
                            </div>
                            </a>
                        </section>
                        <section>
                             <img src="http://tympanus.net/Tutorials/OriginalHoverEffects/images/1.jpg" />  
                            <a href="#">
                                <div class="shade">
                                <h5>Cappuccino</h5>
                                <p>
                                    This is Photoshop's version  of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet.
                                </p>
                            </div>
                            </a>
                        </section>
                        <section>
                             <img src="http://tympanus.net/Tutorials/OriginalHoverEffects/images/1.jpg" />  
                            <a href="#">
                                <div class="shade">
                                <h5>Cappuccino</h5>
                                <p>
                                    This is Photoshop's version  of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet.
                                </p>
                            </div>
                            </a>
                        </section>
                        <section>
                             <img src="http://tympanus.net/Tutorials/OriginalHoverEffects/images/1.jpg" />  
                            <a href="#">
                                <div class="shade">
                                <h5>Cappuccino</h5>
                                <p>
                                    This is Photoshop's version  of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet.
                                </p>
                            </div>
                            </a>
                        </section>
                        <section>
                             <img src="http://tympanus.net/Tutorials/OriginalHoverEffects/images/1.jpg" />  
                            <a href="#">
                                <div class="shade">
                                <h5>Cappuccino</h5>
                                <p>
                                    This is Photoshop's version  of Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet.
                                </p>
                            </div>
                            </a>
                        </section> 
```

CSS：

```
#first img, .shade{
    margin-left:0.5%;
    margin-bottom:0.5%;
}
#first>section{
    position:relative;
    float:left;
    margin: 0.7% 0.7% 0 0;
    overflow:hidden;
    width:273px;
    height:182px;
}
#first>section img{
    position:relative;
    -webkit-transition: all 0.2s linear;
}
#first>section>img:hover{
     -webkit-transition: all 0.2s linear;
}
.shade:hover{
    opacity:1;
}
.shade{
    width: 253px;
    height: 162px;
    background:rgba(255, 144, 0, 0.65);
    position:absolute;/* needed*/
    top:0;/* needed*/
    left:0;/* needed*/
    opacity:0;
    color:#fff;
    padding:10px;
    -webkit-transition: all 0.2s ease-in-out;
}
.shade p{
    margin-top:60px;
    width: 255px;
}
.shade h5{
    text-decoration:underline;
    font-size:110%; 
```

jQuery：

```
$(window).load(function(){

picLink=$("#first a");
picLink.mouseover(function(){
$(this).prev().css("-webkit-transform","scale(1.3)");
});
picLink.mouseout(function(){
$(this).prev().css("-webkit-transform","scale(1.0)");
});

}); 
```

这是一个活生生的例子：http: [//jsfiddle.net/VJWg6/1/](http://jsfiddle.net/VJWg6/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:03:13.163

我假设“来回走动”是指图像覆盖了左侧 1 像素宽的小空间的这种稍微令人不安的效果。

发生这种情况是因为您`margin-left`在它们上指定了一个属性 ( `#first img`)。此边距在`overflow:hidden`容器 ( `section`) 内保留空间，因此当调整图像大小时，它们只会覆盖该空间。

作为一种解决方案，您可以删除`margin-left`图像并将其移动到`section`（当然，您需要调整百分比，因为上下文会发生变化。）。

这个小修复：http: [//jsfiddle.net/VJWg6/23/](http://jsfiddle.net/VJWg6/23/)

# c++ - 基本 XQilla XPath 示例

> ID：15029694
> 
> 赞同：7
> 
> 时间：2013-02-22T17:14:35.150
> 
> 标签：c++, xml, xpath, xqilla

我正在寻找一个基本示例，说明如何设置 XQilla 以在包含 XML 的 std::string 上使用 XPath 查询。XQilla 站点上的[示例](http://xqilla.sourceforge.net/docs/simple-api/simple-context-item_8cpp-example.html)似乎在文件或 URL 上使用 XQuery。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-20T22:39:41.917

这是一个古老的问题，但我一直在寻找答案，但我自己却找不到。现在我解决了它，并认为我应该分享代码。

***--edit****，如果需要以下代码的许可证，则在 MIT 和 BSD 或其他任何地方共享...*

### XPathExtracter.h

```
#ifndef JOPPLI_XPATHEXTRACTER_H
#define JOPPLI_XPATHEXTRACTER_H

#include <string>
#include <vector>
#include <xercesc/parsers/XercesDOMParser.hpp>
#include <xercesc/dom/DOM.hpp>

namespace Joppli
{
  using namespace xercesc;

  class XPathExtracter
  {
    public:
      typedef std::vector<std::string> Result;

      XPathExtracter();
     ~XPathExtracter();

      DOMDocument * getDocument(const std::string & xml);

      void extract(const std::string & query, DOMDocument * document,
                   Result * result);

  protected:
    DOMLSParser * parser;
    DOMImplementation * xqillaImplementation;

    private:
      static int count;
  };
}

#endif 
```

### XPathExtracter.cpp

```
#include "XPathExtracter.h"
#include <xercesc/framework/MemBufInputSource.hpp>
#include <xqilla/xqilla-dom3.hpp>

namespace Joppli
{
  XPathExtracter::XPathExtracter()
  {
    // Initialise Xerces-C and XQilla using XQillaPlatformUtils
    if(count++ == 0)
      XQillaPlatformUtils::initialize();

    // Get the XQilla DOMImplementation object
    this->xqillaImplementation =
            DOMImplementationRegistry::getDOMImplementation(X("XPath2 3.0"));

    this->parser = this->xqillaImplementation->createLSParser(
      DOMImplementationLS::MODE_SYNCHRONOUS, 0);
  }

  XPathExtracter::~XPathExtracter()
  {
    this->parser->release();

    if(--count == 0)
      XQillaPlatformUtils::terminate();
  }

  DOMDocument * XPathExtracter::getDocument(const std::string & xml)
  {
    /* 
    // An alternative to simply setting the string input, as shown below

    MemBufInputSource * memBuf = new MemBufInputSource(
      (const XMLByte *) xml.c_str(),
      xml.size(),
      "xml (in memory)");

    DOMLSInput * input = this->xqillaImplementation->createLSInput();
    input->setByteStream(memBuf);

    DOMDocument * document = parser->parse(input);

    input->release();
    delete memBuf;

    return document;
    */

    DOMLSInput * input = this->xqillaImplementation->createLSInput();
    XMLCh * stringData = XMLString::transcode(xml.c_str());
    input->setStringData(stringData);
    DOMDocument * document = parser->parse(input);

    input->release();
    delete stringData;

    return document;
  }

  void XPathExtracter::extract(const std::string & query,
                               DOMDocument * document, Result * result)
  {
    // Parse an XPath 2 expression
    AutoRelease<DOMXPathExpression> expression(
      document->createExpression(X(query.c_str()), 0));

    // Execute the query
    AutoRelease<DOMXPathResult> xQillaResult(
      expression->evaluate(
        document,
        DOMXPathResult::ITERATOR_RESULT_TYPE, 0));

    // Iterate over the results
    while(xQillaResult->iterateNext())
    {
      char * content = XMLString::transcode(
        xQillaResult->getStringValue());

      result->push_back(content);

      delete content;
    }
  }

  int XPathExtracter::count = 0;
} 
```

### 主文件

```
#include <iostream>
#include "XPathExtracter.h"

int main(void)
{
  std::string * body = new std::string;

  // ... (logic to fill the body string with an xml/html value)

  // Extract
  using namespace xercesc;

  Joppli::XPathExtracter * driver = new Joppli::XPathExtracter();
  Joppli::XPathExtracter::Result * results = new Joppli::XPathExtracter::Result;
  DOMDocument * document = driver->getDocument(*body);
  driver->extract("html/head//title", document, results);
  driver->extract("html/head//meta//@name", document, results);
  driver->extract("html//body//a[@id=\"link_mx_es\"]", document, results);

  for(const auto & result : *results)
    std::cout << result << std::endl;

  delete results;
  delete driver;
  delete body;

  return 0;
} 
```

* * *

我通过 valgrind 运行了这段代码，它没有显示任何泄漏。

# php - 创建 Joomla 用户配置文件插件

> ID：15029699
> 
> 赞同：7
> 
> 时间：2013-02-22T17:14:50.173
> 
> 标签：php, joomla, joomla2.5

我为我的 Joomla 2.5.9 安装直接克隆了 User Profile 插件。

我已将插件和文件相应地重命名为“profiletest”，类似于旧的 1.6**[教程](http://docs.joomla.org/Creating_a_profile_plugin)。**

我在表单中添加了一个新输入，一切都在后端运行，新条目按预期显示在前端的注册表单中。但是，当您注册时，我从未看到该`#__user_profiles`表已更新。

这里有很多代码，但它是用户配置文件插件 (/plugins/user/profile/) 的副本。这是 profiletest.php 的 onUserAfterSave 函数：

```
function onUserAfterSave($data, $isNew, $result, $error)
{
    $userId = JArrayHelper::getValue($data, 'id', 0, 'int');

    if ($userId && $result && isset($data['profiletest']) && (count($data['profiletest'])))
    {
        try
        {
            //Sanitize the date
            if (!empty($data['profiletest']['dob']))
            {
                $date = new JDate($data['profiletest']['dob']);
                $data['profiletest']['dob'] = $date->format('Y-m-d');
            }

            $db = JFactory::getDbo();
            $db->setQuery(
                'DELETE FROM #__user_profiles WHERE user_id = '.$userId .
                " AND profile_key LIKE 'profiletest.%'"
            );

            if (!$db->query())
            {
                throw new Exception($db->getErrorMsg());
            }

            $tuples = array();
            $order  = 1;

            foreach ($data['profiletest'] as $k => $v)
            {
                $tuples[] = '('.$userId.', '.$db->quote('profiletest.'.$k).', '.$db->quote(json_encode($v)).', '.$order++.')';
            }

            $db->setQuery('INSERT INTO #__user_profiles VALUES '.implode(', ', $tuples));

            if (!$db->query())
            {
                throw new Exception($db->getErrorMsg());
            }

        }
        catch (JException $e)
        {
            $this->_subject->setError($e->getMessage());
            return false;
        }
    }

    return true;
} 
```

它从不向数据库中插入任何东西，因为它从不进入这个 if 语句：

```
if ($userId && $result && isset($data['profiletest']) && (count($data['profiletest']))) 
```

基本上这种情况失败了：`$data['profiletest']`

似乎很基本，因为我在插件中所做的所有更改都是“profile”到“profiletest”。但是要解决这个问题，我认为您需要查看我的其他函数调用了什么`onContentPrepareData`。尽管除了名称更改之外，它并没有做任何不同的事情。对不起，长时间的转储。

```
function onContentPrepareData($context, $data)
{
    // Check we are manipulating a valid form.
    if (!in_array($context, array('com_users.profile', 'com_users.user', 'com_users.registration', 'com_admin.profile')))
    {
        return true;
    }

    if (is_object($data))
    {
        $userId = isset($data->id) ? $data->id : 0;
        JLog::add('Do I get into onContentPrepareData?');

        if (!isset($data->profiletest) and $userId > 0)
        {

            // Load the profile data from the database.
            $db = JFactory::getDbo();
            $db->setQuery(
                'SELECT profile_key, profile_value FROM #__user_profiles' .
                ' WHERE user_id = '.(int) $userId." AND profile_key LIKE 'profiletest.%'" .
                ' ORDER BY ordering'
            );
            $results = $db->loadRowList();
            JLog::add('Do I get sql result: '.$results);
            // Check for a database error.
            if ($db->getErrorNum())
            {
                $this->_subject->setError($db->getErrorMsg());
                return false;
            }

            // Merge the profile data.
            $data->profiletest= array();

            foreach ($results as $v)
            {
                $k = str_replace('profiletest.', '', $v[0]);
                $data->profiletest[$k] = json_decode($v[1], true);
                if ($data->profiletest[$k] === null)
                {
                    $data->profiletest[$k] = $v[1];
                }
            }
        }

        if (!JHtml::isRegistered('users.url'))
        {
            JHtml::register('users.url', array(__CLASS__, 'url'));
        }
        if (!JHtml::isRegistered('users.calendar'))
        {
            JHtml::register('users.calendar', array(__CLASS__, 'calendar'));
        }
        if (!JHtml::isRegistered('users.tos'))
        {
            JHtml::register('users.tos', array(__CLASS__, 'tos'));
        }
    }

    return true;
} 
```

我再次注意到我从来没有进入这里：

```
if (!isset($data->profiletest) and $userId > 0) 
```

这可能会影响`onUserAfterSave`功能。

**编辑**这是功能`onContentPrepareForm`：

```
function onContentPrepareForm($form, $data)
{
    if (!($form instanceof JForm))
    {
        $this->_subject->setError('JERROR_NOT_A_FORM');
        return false;
    }

    // Check we are manipulating a valid form.
    $name = $form->getName();
    if (!in_array($name, array('com_admin.profile', 'com_users.user', 'com_users.profile', 'com_users.registration')))
    {
        return true;
    }

    // Add the registration fields to the form.
    JForm::addFormPath(dirname(__FILE__) . '/profiles');
    $form->loadFile('profile', false);

    $fields = array(
        'address1',
        'address2',
        'city',
        'region',
        'country',
        'postal_code',
        'phone',
        'website',
        'favoritebook',
        'aboutme',
        'dob',
        'tos',
    );

    $tosarticle = $this->params->get('register_tos_article');
    $tosenabled = $this->params->get('register-require_tos', 0);

    // We need to be in the registration form, field needs to be enabled and we need an article ID
    if ($name != 'com_users.registration' || !$tosenabled || !$tosarticle)
    {
        // We only want the TOS in the registration form
        $form->removeField('tos', 'profiletest');
    }
    else
    {
        // Push the TOS article ID into the TOS field.
        $form->setFieldAttribute('tos', 'article', $tosarticle, 'profiletest');
    }

    foreach ($fields as $field)
    {
        // Case using the users manager in admin
        if ($name == 'com_users.user')
        {
            // Remove the field if it is disabled in registration and profile
            if ($this->params->get('register-require_' . $field, 1) == 0
                && $this->params->get('profile-require_' . $field, 1) == 0)
            {
                $form->removeField($field, 'profiletest');
            }
        }
        // Case registration
        elseif ($name == 'com_users.registration')
        {
            // Toggle whether the field is required.
            if ($this->params->get('register-require_' . $field, 1) > 0)
            {
                $form->setFieldAttribute($field, 'required', ($this->params->get('register-require_' . $field) == 2) ? 'required' : '', 'profiletest');
            }
            else
            {
                $form->removeField($field, 'profiletest');
            }
        }
        // Case profile in site or admin
        elseif ($name == 'com_users.profile' || $name == 'com_admin.profile')
        {
            // Toggle whether the field is required.
            if ($this->params->get('profile-require_' . $field, 1) > 0)
            {
                $form->setFieldAttribute($field, 'required', ($this->params->get('profile-require_' . $field) == 2) ? 'required' : '', 'profiletest');
            }
            else
            {
                $form->removeField($field, 'profiletest');
            }
        }
    }

    return true;
} 
```

我究竟做错了什么？

**编辑** `var_dump($data); exit();`就在里面`onUserAfterSave`：

```
array(20) { ["isRoot"]=> NULL ["id"]=> int(1291) ["name"]=> string(4) "test" ["username"]=> string(4) "test" ["email"]=> string(22) "test@test.com" ["password"]=> string(65) "5757d7ea6f205f0ee9102e41f66939b4:7dTHzEolpDFKa9P2wmZ4SYSjJSedWFXe" ["password_clear"]=> string(4) "test" ["usertype"]=> NULL ["block"]=> NULL ["sendEmail"]=> int(0) ["registerDate"]=> string(19) "2013-03-05 17:00:40" ["lastvisitDate"]=> NULL ["activation"]=> NULL ["params"]=> string(2) "{}" ["groups"]=> array(1) { [0]=> string(1) "2" } ["guest"]=> int(1) ["lastResetTime"]=> NULL ["resetCount"]=> NULL ["aid"]=> int(0) ["password2"]=> string(4) "test" } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T23:24:43.497

因此，这里的关键功能实际上是您不包括的功能：`onContentPrepareForm`. 这是构建用户填写的表单的函数。您尚未更新其中的字段名称，因此您包含的代码中的检查失败。

如果您在打开插件的情况下进入注册页面，您应该会看到配置文件插件的所有字段。如果您检查任何字段（让我们使用地址 1），它应该具有如下名称：`jform[profile][address1]`. 我们希望这样`jform[profiletype][address1]`，然后您的代码将起作用。

不过，在开始之前，让我先解释一下代码。该`$data`变量应该包含提交的表单中的所有信息。这匹配`jform`名称开头的所有内容，因为这是 Joomla 用于注册表单的标准控件。

`$data`然后将包含一些单独的项目和数组`profile`。要更新该名称，请找到所在的文件`plugins/user/profile/profiles/profile.xml`并将`fields`名称从更改`profile`为`profiletype`。现在提交时`$data`将包含数组元素`profiletype`，其余查询将运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T13:55:04.360

首先使用[JDump](http://extensions.joomla.org/extensions/miscellaneous/development/1509)或 var_dump() 数组`$data->profiletest`来检查您是否有数据。如果没有，那么我想您将需要分析该`onContentPrepareForm`方法。如果没有，请检查 UserID 是否获取有效结果。两者之一必须给出无效结果才能“失败” if 语句。一旦你完成了返回这里的帖子，结果:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:07:58.363

我认为您在这里有问题：'profiletest.%' 您不应该将 php 连接运算符放在引号内，它会将其视为字符串的一部分。就个人而言，我通常在编写查询之前连接 %。但是 $db->quote('profiletest.'.$k).' 你以后拥有的更符合你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:58:54.167

由于 $data['profiletest'] 失败

profile 到 profiletest 的名称更改尚未在 xml 中注册

如果您还没有，请进行以下更改。

在 plugins\user\profile\profiles\profile.xml

改变`<fields name="profile"> to <fields name="profiletest">`

同样在 user\profile\profile.xml

改变`<filename plugin="profile">profile.php</filename>`

到

```
<filename plugin="profile">profiletest.php</filename> 
```

# php - 在每张图片周围添加链接

> ID：15029701
> 
> 赞同：0
> 
> 时间：2013-02-22T17:14:51.387
> 
> 标签：php, jquery, hyperlink, image

我有以下问题。我一直在手动移动大量内容，并且在插入图像时，我将灯箱类放在标签上 - 不幸的是，为了让图像正常工作，它们需要在它们周围有一个锚点，将 url 指定为完整图像大小 -例如

```
<a href="images/myimage.jpg" class="lightbox"><img src="images/myimage.jpg"></a> 
```

我现在只有：

```
<img src="images/myimage.jpg" class="lightbox"> 
```

是否可以在特定`<div>`元素内找到的每个图像周围自动设置一个锚点并正确关闭它？我需要类似的东西

foreach 图像在`<div>`prepend`<a href="this.image.src">`和 append`</a>`

非常感谢 PHP 或 jQuery 中的任何解决方案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T17:18:55.563

您可以使用 jQuery 的`.wrap()`方法：

```
$('div img').each(function(){
    $(this).wrap('<a href="'+this.src+'" class="lightbox"></a>');
}); 
```

演示：http: [//jsfiddle.net/bztvw/](http://jsfiddle.net/bztvw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:19:45.933

使用 jQuery `.wrap()`：

```
 $.each($('img'), function(){
    $(this).wrap('<a href="'+$(this).attr('src')+'" class="lightbox"></a>')
 }); 
```

如果您指定这些图像的容器 div 会更好，然后只包装这些图像。像这样的东西：

```
$.each($('#lighboximgwrapper img'), function(){
    $(this).wrap('<a href="'+$(this).attr('src')+'" class="lightbox"></a>')
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:20:32.377

使用正则表达式

图案：

```
<img(.*)src="([\w\/\.]+)"(.*)> 
```

用。。。来代替：

```
<a href="$2" rel="fancybox"><img src="$2" alt="" /></a> 
```

preg_replace PHP 函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T17:44:10.680

就个人而言，我会修复生成源代码的代码。只需在 IDE 中使用正则表达式查找/替换并修复源代码。不要依赖一些 javascript 或 PHP hack 来“修复”这个错误。

# html - HTML 页面中的映射

> ID：15029702
> 
> 赞同：0
> 
> 时间：2013-02-22T17:14:53.740
> 
> 标签：html, mapping

我在我的电子爆炸中使用了这个代码。现在我面临这样一种情况，这种链接技术可以为我节省大量时间。在基本的 HTML 网站中，就将页面区域链接到 url 而言，这是一个好习惯吗？

```
<map name="Map">
  <area shape="rect" coords="90,307,563,370" href=""      
target="_blank">
   <area shape="rect" coords="169,685,500,710" href=""  target="_blank">
   <area shape="rect" coords="146,715,514,738" href="" target="_blank">
   <area shape="rect" coords="347,864,510,901" href="" target="_blank">
   <area shape="rect" coords="246,743,406,764" href="" target="_blank">
</map> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-22T17:21:54.350

**[Imagemaps](https://developer.mozilla.org/en-US/docs/HTML/Element/map)**是旧的 HTML，但它们没有任何问题。仍然完全有效。

# java - 关于在条件下启动线程

> ID：15029703
> 
> 赞同：2
> 
> 时间：2013-02-22T17:14:57.713
> 
> 标签：java, multithreading

在今天的采访中，我被问到一个我无法解决的问题：

> 假设有三个线程，分别命名为 T1、T2 和 T3。现在 T1 将打印从 1 到 5 的数字，T2 将打印从 6 到 10 的数字，T3 将打印从 10 到 15 的数字。三个线程已由 t1.start()、t2.start() 启动和 t3.start()，但是应该先执行 T3 线程，然后执行 T1 线程，最后执行 T2 线程。

请就解决此问题的可能方法提出建议。根据我的研究，存在`Thread.join`或循环障碍的概念。请就最佳方法提出建议，如果可能，请显示一小段代码以便更好地理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:43:36.603

我同意这个问题不是很好，但你确实想要某种答案......

这会根据您的要求打印出 10-15、1-5、6-10（T3 然后 T1 然后 T2）（顺便说一句 - T3 是否应该实际从 11 打印到 15？）：

```
public class Test {
  static class Printer implements Runnable {
    private final int from;
    private final int to;
    private Thread joinThread;

    Printer(int from, int to, Thread joinThread) {
      this.from = from;
      this.to = to;
      this.joinThread = joinThread;
    }

    @Override
    public void run() {
      if(joinThread != null) {
        try {
          joinThread.join();
        } catch (InterruptedException e) { /* ignore for test purposes */ }
      }
      for (int i = from; i <= to; i++) {
        System.out.println(i);
      }
    }
  }
  public static void main(String[] args) throws InterruptedException {

    Thread T3 = new Thread(new Printer(10, 15, null));
    Thread T1 = new Thread(new Printer(1, 5, T3));
    Thread T2 = new Thread(new Printer(6, 10, T1));
    T1.start();
    T2.start();
    T3.start();
  }
} 
```

`CountdownLatch`也许在这里也是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:43:19.497

没有真正的最佳方法。他们最有可能想看看你是如何回答这个问题的。

在处理这样的模糊问题时，我会首先尝试真正确定他们在寻找什么。他们需要按顺序执行吗？按顺序打印出数字，或者 t3 是否需要在其他两个线程等待时打印 (10-15)。还是他们只需要按照指示的顺序开始并在到达时打印出来。阅读问题的陈述似乎只是让每个线程在以定义的顺序启动它们之后打印出定义的序列。这并没有说明阻塞。您可以只创建一个包含优先级的包装类，将它们放入有序队列中，然后在每个线程开始时遍历集合。

我认为他们可能也一直在寻找您对在这种情况下使用多个线程（假设他们希望数字是连续的）没有意义的事实说些什么，因为不管三个线程中的两个正在做什么没有什么。只使用一个线程会更快。然后添加一些关于它可能更有效的使用某种排序执行器服务，其中每个线程可以提取下一个数字以从公共排序资源中写入。然后你可以采取一些方法来保护队列，以确保一次只删除/写入一个。有很多方法可以做到这一点，每种方法都有很多问题。提及阻塞与非阻塞的好处/成本也可能很好。由于有许多不同的方法可以做到这一点，

Java 中的[Concurrency 实用程序类](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)有很好的文档记录，并且在大多数情况下提供了有用的示例。这是一个很好的起点。为此，请尝试查看[Semaphores](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)、[Phasers](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Phaser.html)或[A Count Down Latch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)。不过，在实践中，[Executors](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)或[Fork/Join 框架](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)可能值得进一步研究。

对所有这些漫无边际的事情感到抱歉，但我想说的是，没有一种最好的方法来回答这样的问题。我认为这个问题的真正目的是试图了解您的方法。要求提供代码示例并不会真正帮助您。花点时间坐下来阅读一些好的教程。

# c# - 求总和的平均值

> ID：15029707
> 
> 赞同：0
> 
> 时间：2013-02-22T17:15:16.050
> 
> 标签：c#, linq

示例集合：

```
List<Product> list = new List<Product>();
list.Add(new Product { Id = 1, Good = 50, Total = 50 });
list.Add(new Product { Id = 2, Good = 18, Total = 30 });
list.Add(new Product { Id = 2, Good = 15, Total = 30 });
list.Add(new Product { Id = 1, Good = 40, Total = 50 });
list.Add(new Product { Id = 3, Good = 6, Total = 10 });
list.Add(new Product { Id = 1, Good = 45, Total = 50 });
list.Add(new Product { Id = 3, Good = 8, Total = 10 }); 
```

产品数量未知。因此，我需要得到每个不同产品商品/总数的百分比，然后是所有产品的平均值。在这种情况下：

```
Product Id=1, GoodSum = 50 + 40 + 45 = 135, TotalSum = 50 + 50 + 50 = 150, Perc = 135/150
Product Id=2, GoodSum = 18 + 15 = 33, TotalSum = 30 + 30 = 60, Perc = 33/60
Product Id=3, GoodSum = 6 + 8 = 14, TotalSum = 10 + 10 = 20, Perc = 14/20

Avg = Avg(135/150 + 35/60 + 14/20) = Avg(0.9 + 0.55 + 0.7) = 2.15 / 3 = 7.17 
```

我们可以用 Linq 做到这一点吗，我只对 Linq 解决方案感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:20:37.877

像这样的东西？

```
var groups = list.GroupBy(l => l.Id)
                 .Select(g => new {
                                      Id = g.Key, 
                                      GoodSum = g.Sum(i=>i.Good), 
                                      TotalSum= g.Sum(i=>i.Total),
                                      Perc = (double) g.Sum(i=>i.Good) / g.Sum(i=>i.Total)
                                  }
                        );

 var average = groups.Average(g=>g.Perc); 
```

请注意，您的答案`Avg`应该是`0.717`not `7.17`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:22:42.723

尝试这个 ：

```
var avg = list.GroupBy(G => G.Id)
              .Select(G => (G.Sum(T => T.Good)/G.Sum(T => T.TotalSum)))
              .Average(); 
```

# javascript - jqplot 可以在不同位置显示不同系列的图例吗？

> ID：15029709
> 
> 赞同：1
> 
> 时间：2013-02-22T17:15:22.733
> 
> 标签：javascript, jquery, jqplot

我有一个图表（[http://jsfiddle.net/CfVZP/12/](http://jsfiddle.net/CfVZP/12/)）有几个系列，其中 y 轴数据在两个不同的尺度上。我将 yaxis 用于一个比例，将 y2axis 用于另一个。我希望能够使用图表左侧的 y 轴（位置：'nw'）显示系列的图例，并使用右侧的 y2 轴（位置：'ne'）显示系列的图例）。有没有办法为不同的系列设置不同的图例属性？

就像是：

```
{series: [
    showMarker: true,
    color: "#00FF00",
    legend: {           // This doesn't actually work.
        location: 'ne', // I'm looking for a substitute
    }                   // for this functionality.
],
// Additional series with different legend locations
} 
```

使用标准图例选项似乎不可能做到这一点（我尝试使用位置和 EnhancedLegendRenderere 列选项），但我想知道是否有不同的插件可以实现这一点，或者其他一些可以更改以导致相同结果的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:39:00.557

我不确定这是否可行。查看 jqplot 源代码，每个绘图只包含一个`Legend`对象 - 要使其工作，您很可能需要它来保存它们的数组。

你有什么特别的原因想要这样做吗？有多个传说的情节有点不寻常。有一个单一的传奇，而是给每个系列一个好的，描述性的名字是不够的吗？

# php - 基本 PHP 循环 RBL 检查器数组

> ID：15029713
> 
> 赞同：0
> 
> 时间：2013-02-22T17:15:32.677
> 
> 标签：php, arrays, string, url, loops

我正在尝试在 PHP 中创建一个基本的 RBL 检查器，我似乎无法将 IP 添加到 url 的末尾而没有错误。我不是最好的 PHP。

`list.inc`只是一个 IP 列表，用于检查每个 IP 是否在新行上。

```
<?
$ips = file("list.inc");
foreach($ips as $ip)
{
$rblurl = 'http://rbl-check.org/rbl_api.php?ipaddress=' . $ip;
//$rblcheckurl = $rblurl . $ip;
$boom = fopen($rblurl, "r");
//print "<pre>";
//print_r($boom);
//print "</pre>";
$rbl = stream_get_contents($boom);
echo "</br>";
$data = explode(";",$rbl);
print_r($data);
echo "</br>";
fclose($boom);
}
?> 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:21:30.120

返回的值`file()`包括每行末尾的换行符，您需要在将它们附加到 URL 之前删除它们：

```
foreach ($ips as $ip) {
  $rblurl = 'http://rbl-check.org/rbl_api.php?ipaddress=' . trim($ip);
  ...
} 
```

# python - 嵌入基于 Python 的基于 Web 的 shell（Werkzeug？）

> ID：15029729
> 
> 赞同：3
> 
> 时间：2013-02-22T17:16:54.933
> 
> 标签：python, django, werkzeug

我正在寻找一种在网页中嵌入 python 解释器的方法。具体来说，类似于 textarea/REPL 可以访问 Django 模板的范围。

[Werkzeug](http://werkzeug.pocoo.org/ "韦克泽格")做了类似的事情，但我找不到任何关于嵌入过程的示例或文档。非常欢迎帮助！

# matlab - 在 MATLAB 中使用 datenum() 将单元格转换为日期时出错

> ID：15029732
> 
> 赞同：0
> 
> 时间：2013-02-22T17:17:00.063
> 
> 标签：matlab, cell

我有一个非常大的 <1165900 x 1 cell> 'a' 我想将其转换为 datenum。我以前以某种方式这样做过，但它已经停止为我工作。相反，我现在收到以下错误：

```
Error using datenum (line 179)
DATENUM failed.

Caused by:
    Error using dtstr2dtnummx
    Failed on converting date string to date number. 
```

我刚刚把它写成代码：

```
b = datenum(a, 'dd.mm.yyyy HH.MM.SS.FFF'); 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:27:51.770

into 的语法`datenum`是正确的，你确定它`a`的格式正确吗？

这是我用来验证语法`datenum`正确的一些代码：

```
%define format string
fmt = 'dd.mm.yy HH.MM.SS';

%create dateString using current time
dStr = datestr(now, fmt);

%convert num to string with datenum
dNum = dateNum(dStr, fmt); 
```

# arrays - 如何将此代码或类似代码放在不同的类中？(VB.NET)

> ID：15029735
> 
> 赞同：0
> 
> 时间：2013-02-22T17:17:10.913
> 
> 标签：arrays, vb.net, class

这是我到目前为止的代码：

```
Public Class firstForm
    Dim sale(3, 4) As Integer
    Dim numberSellers(3) As Integer
    Dim numberProducts(4) As Integer

Private Sub addButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles addButton.Click

    Dim sellerLineInteger As Integer
    Dim productColumnInteger As Integer

    sellerLineInteger = sellerListBox.SelectedIndex
    productColumnInteger = productListBox.SelectedIndex

    ' add in two dimensional array 
    If sellerLineInteger >= 0 And productColumnInteger >= 0 Then
        sale(sellerLineInteger, productColumnInteger) = Decimal.Parse(saleTextBox.Text)
    End If

    saleTextBox.Clear()
    saleTextBox.Focus()

End Sub 
```

我想将此代码放在不同的类/表单中。此类将用于存储用户输入的信息。我有两个列表框、一个按钮和一个文本框。用户在每个列表框中选择一个项目，在文本框中输入一个数字，然后单击按钮来存储信息。

我试图通过使用另一个类来实现代码，但我无法让它工作，但是当我把它放在上面显示的代码中时它就可以工作。

编辑：非常感谢各位！我稍后会尝试一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:32:40.390

有不同的可能性。我建议为产品和卖家创建两个类

```
Public Class Product
    Public Property Name As String
    Public Property Sale As Decimal
End Class 
```

和

```
Public Class Seller
    Public Property Name As String

    Private _products As New Dictionary(Of String, Product)()
    Public ReadOnly Property Products() As Dictionary(Of String, Product)
        Get
            Return _products
        End Get
    End Property

    Public Sub SetProductSale(productName As String, sale As Decimal)
        Dim product As Product
        If _products.TryGetValue(productName, product) Then
            product.Sale = sale
        Else
            product = New Product() With { _
                .Name = productName, _
                .Sale = sale _
            }
            _products.Add(productName, product)
        End If
    End Sub

    Public Function GetProductSale(productName As String) As Decimal
        Dim product As Product
        If _products.TryGetValue(productName, product) Then
            Return product.Sale
        End If
        Return 0D
    End Function
End Class 
```

在您的表单中，您可以执行以下操作（我假设您的列表框将卖家和产品的名称存储为字符串）：

```
Public Class FirstForm
    Private _sellers As New Dictionary(Of String, Seller)()

    Public Sub addButtonClick(sender As Object, e As EventArgs)
        If sellerListBox.SelectedIndex >= 0 AndAlso _
           productListBox.SelectedIndex >= 0 Then

            Dim sellerName As String = sellerListBox.SelectedItem.ToString()
            Dim productName As String = productListBox.SelectedItem.ToString()

            Dim sale As Decimal
            If [Decimal].TryParse(saleTextBox.Text, sale) Then
                Dim seller As Seller
                If Not _sellers.TryGetValue(sellerName, seller) Then
                    seller = New Seller() With { _
                        .Name = sellerName _
                    }
                    _sellers.Add(sellerName, seller)
                End If

                seller.SetProductSale(productName, sale)
            End If
        End If
    End Sub

End Class 
```

但是你可以更进一步，按照 DJ Burb 的建议使用绑定。列表框可以直接绑定到卖家和产品列表。

* * *

正如我所说，有不同的方法。在此示例中，我将销售直接存储在产品中，并且我在每个卖家中都有每个产品的副本。您还可以考虑将产品和销售额组合在一起的单独销售类。然后，卖家将拥有一本销售字典而不是产品字典。然后，所有产品都将存储在单独的产品字典中。这将允许您保留产品的唯一实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:37:05.853

我假设您想尽可能多地转到另一个班级...如果是这样，这是您将如何做到这一点的示例。

您修改后的表单代码如下所示：

```
Public Class firstForm

    Dim MyOtherClass As New Class1

    Private Sub addButton_Click(sender As System.Object, e As System.EventArgs) Handles addButton.Click
        MyOtherClass.addItem(sellerListBox, productListBox, saleTextBox)
    End Sub
End Class 
```

新类看起来像这样：

```
Public Class Class1
    Private sale(3, 4) As Integer
    Private numberSellers(3) As Integer
    Private numberProducts(4) As Integer

    Public Sub addItem(ByRef my_sellerListBox As ListBox, ByRef my_productListBox As ListBox, ByRef my_saleTextBox As TextBox)
        Dim sellerLineInteger As Integer
        Dim productColumnInteger As Integer

        sellerLineInteger = my_sellerListBox.SelectedIndex
        productColumnInteger = my_productListBox.SelectedIndex

        ' add in two dimensional array 
        If sellerLineInteger >= 0 And productColumnInteger >= 0 Then
            sale(sellerLineInteger, productColumnInteger) = Decimal.Parse(my_saleTextBox.Text)
        End If

        my_saleTextBox.Clear()
        my_saleTextBox.Focus()

    End Sub

End Class 
```

请注意，您必须创建要使用的类的实例，因为它包含数据（它不能是共享子）

# rubygems - Ruby Gem 或 Django App - Java EE 有这些吗？

> ID：15029738
> 
> 赞同：0
> 
> 时间：2013-02-22T17:17:24.990
> 
> 标签：rubygems, drupal-modules, java-ee-6, django-apps

在 Ruby on Rails 中，我们有 Gems，您可以将其重用为您的软件的一部分。

我们在 Django 中也有相同的功能，他们称之为“应用程序”。Drupal 中也有“模块”。

例如，假设您正在开发 Web 软件来控制办公室中的进程，并且您想添加投票，以便用户可以交互。

在 Rails 中，我们可能有一个 gem 可以做到这一点，在 drupal 中的 django 应用程序和模块中也是如此。

因此，考虑到控制器、视图和模型，这些 gem/app/modules 具有包含在您的 Web 软件中的所有代码。

但是，如果我们想到 Java EE 6，我们就会有大量的 jars 和规范来帮助制作软件。但是 Java EE 没有这些 gem/app/modules 可以包含在您的软件中。

需要明确的是，问题不在于是否使用框架。

让我说我有一个使用 Java EE 6 的应用程序：

*   EJB 3.1、JPA 2、js2 + 素数
*   还有一些罐子，比如漂亮的面孔和集成。

现在我需要开发一个论坛或投票功能，所以我必须编写所有代码（ejb+jpa+jsf）来制作那个论坛。如果我使用的是 Rails，我可以安装一个投票/论坛 gem，或者在 Django 中安装一个创建这个论坛的应用程序等等。

我在其他框架，ROR，Django 和 Drupal 方面有一些经验（它确实是一个 CMS，但它有很多模块，所以无论如何它可能是一个框架），这些“模块”是软件的一部分，使用编写所有层。在 Java EE 中，它应该有 EJB 3.1 代码、JPA2 代码和 js2 代码。

因此，我们可以与 Plone 和 Zope 进行类比。假设 Zope 是 Java EE 6，而 Plone 是我在 Java EE 中寻找的。

所以我的问题是：是否存在一个存储库，您可以在其中找到这些 Java EE 模块？

如果这真的不存在，是否可以在 Java EE 架构中创建类似的 gem/app/modules？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:24:58.897

Drupal 是一个 CMS，Ruby on Rails 和 Django 是 Web 框架。

Java EE 都不是。要重用您的代码，您必须设计可重用的类。

我的猜测是您正在询问一个可以帮助您加快 Java EE 开发速度的框架，并且有几个但建议一个框架在不了解您的需求的情况下毫无意义。

我的建议是在尝试使用框架之前了解更多关于 Java 和面向对象语言的知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T14:54:19.143

感谢您的回答，但我认为我们没有像在其他技术中那样重用“模块”的官方仓库。

因此，这与我的项目需要什么、坚持框架或学习 OO 语言无关。（在许多不同框架中的开发经验超过 20 年）

我想我们可以与其他框架进行类比，就像@miguel-lomelí 所说的关于rails。JAVA - Ruby，J2EE - ROR，宝石 - ?? 对于 J2EE。与 Python - Java ， Django - J2ee ， Django Mod - ?? J2EE。

也许是因为 j2ee 更多地用于行业而不是初创公司/独立开发者？我不知道...

所以我想最终的答案是..我们没有像其他技术那样为 j2ee 提供的，仅此而已..

PS：这个问题就像 2013 年一样。现在 JS 好多了。

# vb.net - 列表框多个按键

> ID：15029743
> 
> 赞同：0
> 
> 时间：2013-02-22T17:17:47.963
> 
> 标签：vb.net, listbox, checkedlistbox

如何实现与多个键一起使用的搜索功能`CheckedListBox`和`ListBox`？

示例：我在列表中有以下项目：

1000 1500 1520 2010 5001 5102

当我按下键 1 时，立即搜索与第一个以“1”开头的字符匹配的第一个匹配项。

但是，如果我想定位项目“5102”，列表只能搜索到 5，然后，我需要手动去识别想要的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:17:47.963

回答我自己的问题。这是一个不需要太多工作的干净解决方案（所有代码都可以在 KeyDown 事件中处理）：

```
Sub DropDownListBox_KeyDown(ByVal sender As Object, ByVal e As KeyEventArgs)
    If Char.IsLetterOrDigit(Chr(e.KeyValue)) Then
        e.SuppressKeyPress = True
        If TryCast(sender.tag, Timer) Is Nothing Then
            Dim vTimer As New Timer

            vTimer.Interval = 1000
            vTimer.Tag = ""
            sender.Tag = vTimer

            AddHandler vTimer.Tick,
                Sub(Timer As Object, eventsArgs As System.EventArgs)
                    Timer.Tag = ""

                    If Not TryCast(sender, CheckedListBox).Visible Then
                        Timer.dispose() : Timer = Nothing
                    End If
                End Sub
        Else
            sender.Tag.Stop() : sender.Tag.Start()
            sender.Tag.Tag &= Chr(e.KeyValue)

            Dim vIndex As Integer = TryCast(sender, CheckedListBox).FindString(sender.Tag.Tag)

            If vIndex <> -1 Then TryCast(sender, CheckedListBox).SelectedItem = TryCast(sender, CheckedListBox).Items(vIndex)
        End If
    End If
End Sub 
```

基本上我使用 TAG 对象来保持 Timer 每 1 秒运行一次；然后，如果用户键入多个字符，该过程将准确找到所需的文本。

欢迎任何评论或反馈。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-01T12:00:59.323

```
Public Class Form1
    Dim Type As String
    Private Sub ListBox1_KeyPress(sender As Object, e As KeyPressEventArgs) Handles ListBox1.KeyPress
        If Asc(e.KeyChar) <> 8 Then
            If Asc(e.KeyChar) < 65 Or Asc(e.KeyChar) > 122 Then
                e.Handled = True
                ' Clear String at Escape key press & Reset Listbox location
                If Asc(e.KeyChar) = 27 Then
                    Type = ""
                    ListBox1.SelectedIndex = -1
                    ListBox1.SelectedItem = ListBox1.SelectedIndex
                End If
            End If
            If Asc(e.KeyChar) = 27 Then
                ' Do not add escape key char to string at key press
            Else
                ' add char one by one after key press
                Type &= e.KeyChar
                Dim TL As Integer = Type.Length
                Dim i As Integer = 0
                For i = 0 To ListBox1.Items.Count - 1
                    ' match key press in total items in listbox
                    'MsgBox(Format$(Mid$(ListBox1.Items(i), 1, TL)))
                    If Format$(Mid$(ListBox1.Items(i), 1, TL)) = Type Then
                        ListBox1.SelectedIndex = i
                    End If
                Next
            End If
        End If
    End Sub
End Class 
```

# c# - 通过 COM/Siebel 应用程序服务器自动化 Siebel 应用程序：如何获取字段名称？

> ID：15029746
> 
> 赞同：1
> 
> 时间：2013-02-22T17:17:55.537
> 
> 标签：c#, .net, com, ui-automation, siebel

对于 .Net WCF 服务，我使用 COM/Siebel Application Server 来自动化 Siebel 6.3.0.316，但我还没有弄清楚如何找出字段名称。我可以查询 Siebel 视图的名称，但我没有找到任何方法来获取 Siebel 字段名称，无论是批量还是单独。并且所有在字段上操作的方法都需要字段名作为参数。

有人对此有任何经验或有任何解决此问题的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-04T06:52:32.787

您想要获取的每个元数据都存储在 Siebel 中称为存储库的地方。您可以像访问任何其他常规业务组件一样访问它（实际上它们的名称以“存储库”开头）。BC 可以访问您想要获取的数据，名称为： **Repository Field**。您可能感兴趣的领域是：

*   **名称**- 保留特定 BC 上的字段名称
*   **Inactive** - 指示字段是否处于活动状态的标志
*   **Parent Name** - 拥有此字段的 BC 的名称
*   **Repository Id** - 存储库的 id（你只需要确保取出当前的）

您可能感兴趣的其他存储库 BC：

*   **存储库业务组件**- 包含所有业务组件的列表
*   **Repository Repository** - 包含所有 Siebel 存储库的列表（例如，您可以在此处找到活动的存储库）

# ios - UIView 在 iOS 中的 navigationview 控制器下向上移动

> ID：15029753
> 
> 赞同：0
> 
> 时间：2013-02-22T17:18:18.910
> 
> 标签：ios

我有几个由模态序列链接的导航视图控制器。当我从一个视图转到另一个视图时，下一个视图似乎底部被切断了。看起来视图向下移动了导航栏的大小。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:19:47.053

在受影响的视图控制器中：

```
float navBarHeight = self.navigationController.navigationBar.frame.size.height;
self.view.frame = CGRectMake(0, 0, self.view.width, self.view.height - navBarHeight); 
```

# c# - 有没有办法用参数创建 nunit 设置

> ID：15029756
> 
> 赞同：8
> 
> 时间：2013-02-22T17:18:28.280
> 
> 标签：c#, nunit

有没有办法像这样向 nunit 设置方法添加参数：`public void SetUp(Point p = null) { /*code*/ }`.

我试过了，得到了以下异常`SetUp : System.Reflection.TargetParameterCountException : Parameter count mismatch`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T00:31:58.203

我认为你的意思是避免代码重复。尝试使用 SetUp() 中使用的覆盖方法提取基类。所有派生类都将从基类执行测试，并在 OnSetUp() 中准备好对象

```
[TestFixture]
public class BaseTestsClass
{
    //some public/protected fields to be set in SetUp and OnSetUp

    [SetUp]
    public void SetUp()
    {
        //basic SetUp method
        OnSetUp();
    }

    public virtual void OnSetUp()
    {
    }

    [Test]
    public void SomeTestCase()
    {
        //...
    }

    [Test]
    public void SomeOtherTestCase()
    {
        //...
    }
}

[TestFixture]
public class TestClassWithSpecificSetUp : BaseTestsClass
{
    public virtual void OnSetUp()
    {
        //setup some fields
    }
}

[TestFixture]
public class OtherTestClassWithSpecificSetUp : BaseTestsClass
{
    public virtual void OnSetUp()
    {
        //setup some fields
    }
} 
```

* * *

使用参数化的 TestFixture 也很有用。课堂上的测试也将按照 TestFixture 和 SetUp 方法进行。但请记住

> 参数化设备（如您所见）受到以下事实的限制：您只能使用属性中允许的参数

用法：

```
[TestFixture("some param", 123)]
[TestFixture("another param", 456)]
public class SomeTestsClass
{
    private readonly string _firstParam;
    private readonly int _secondParam;

    public WhenNoFunctionCodeExpected(string firstParam, int secondParam)
    {
        _firstParam = firstParam;
        _secondParam = secondParam;
    }

    [Test]
    public void SomeTestCase()
    {
        ...
    }
} 
```

# python - JPype 无法正确编译

> ID：15029760
> 
> 赞同：2
> 
> 时间：2013-02-22T17:18:36.580
> 
> 标签：python, compilation, jvm, jpype

所以我无法使用[JPype](http://jpype.sourceforge.net/)编译一个非常简单的 python 脚本。

我的代码如下：

```
from jpype import *
startJVM(getDefaultJVMPath(), "-ea")
java.lang.System.out.println("hello world")
shutdownJVM() 
```

当我运行它时，我收到一条错误消息：

```
Traceback (most recent call last):   File "test.py", line 2, in
<module>
    startJVM(getDefaultJVMPath(), "-ea")   File "/usr/lib/pymodules/python2.7/jpype/_core.py", line 44, in startJVM
    _jpype.startup(jvm, tuple(args), True) RuntimeError: Unable to load DLL [/usr/java/jre1.5.0_05/lib/i386/client/libjvm.so], error =
/usr/java/jre1.5.0_05/lib/i386/client/libjvm.so: cannot open shared
object file: No such file or directory at
src/native/common/include/jp_platform_linux.h:45 
```

我被困住了，我真的需要帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:20:31.013

我有同样的问题

```
RuntimeError: Unable to load DLL [/usr/java/jre1.5.0_05/lib/i386/client/libjvm.so], error = /usr/java/jre1.5.0_05/lib/i386/client/libjvm.so: cannot open shared object file: No such file or directory at src/native/common/include/jp_platform_linux.h:45 
```

在我的情况下，设置了错误的 JAVA_HOME 路径

/个人资料/等

```
export JAVA_HOME
JAVA_HOME=/usr/lib/jvm/java-6-openjdk-amd64
PATH="$JAVA_HOME/bin:$PATH"
export PATH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-28T08:18:16.633

解决方法是直接在对 JVM 的调用中定义完整路径：

```
from jpype import *
startJVM('/Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/MacOS/libjli.dylib', "-ea", "-Djava.class.path=/tmp/Jpype/sample")
java.lang.System.out.println("Hello World!!")
shutdownJVM() 
```

原文：

> 尝试在 MacOS El Capitan 上运行 JPype 时出现类似问题。尽管 JAVA_HOME 系统变量设置正确，但我无法弄清楚如何哄 _darwin.py 代码找到正确的 JVM 位置。

*警告 cursor*，尝试在 Spyder IPython 控制台中运行上述代码没有产生任何输出，但普通控制台会。

# php - PHP DOMDocument::loadHTMLFile，如何跳过图像和文件？

> ID：15029761
> 
> 赞同：0
> 
> 时间：2013-02-22T17:18:37.333
> 
> 标签：php, domdocument

首先，对不起我的英语。

我正在使用 HTML 解析器，我会跳过要解析的图像和其他可下载的东西。

我尝试了一些变化，这是最后一个：

```
 $doc = new DOMDocument();
    @$doc->loadHTMLFile("http://exampledomain.com/images/img3.JPG");
    if($doc->hasChildNodes){break;} 
```

搜索解决方案后，我尝试了这个：

```
 $doc = new DOMDocument();
    @$doc->loadHTMLFile("http://exampledomain.com/images/img3.JPG");
    var_dump($doc->childNodes->length);
    foreach($doc->childNodes as $child){
        var_dump($child->nodeName);
    } 
```

结果：

```
 2
    html
    html 
```

*   问题：一个jpg文件怎么可能有2个节点html？
*   问题：如何跳过文件（jpg、exe、doc 等...非 html 文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:49:12.740

您可以在这里做的第一件事就是检查 jpg、gif、png、js 等的文件名，而不是尝试`DOMDocument::loadHTMLFile`在非 HTML 文件上运行。由于某种原因，该函数似乎试图加载所有内容（可能是因为它旨在处理无效的 HTML），因此您不能依赖函数的输出（`true`成功，`false`失败）。

这样的事情可能会有所帮助：

```
if (false === preg_match('/^.*\.(jpg|jpeg|png|gif)$/i', $file_name)) {
   $doc = new DOMDocument();
   $doc->loadHTMLFile($file_name);
   // more code here
} 
```

# visual-studio-2012 - 是否可以在 Visual Studio 2012 中使用 VC++ 6 编译器？

> ID：15029762
> 
> 赞同：12
> 
> 时间：2013-02-22T17:18:40.970
> 
> 标签：visual-studio-2012, compilation, legacy, visual-c++-6

我正在使用 Visual Studio 2012 开发我的项目，并且我还安装了 Visual Studio 2010 - 这使我可以选择在 Visual Studio 2012 中使用 VC++10 编译器（项目属性），但我也安装了 Visual C++ 6并且不知何故，Visual Studio 2012 中不存在使用 VC++6 编译器的选项，如何（手动）添加此选项？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-10T16:40:34.987

答案肯定是可能的。这似乎很有可能，但我无法获得 VC 6 的副本，因此无法验证它。我能够做的是让 VS 2012 使用 VC 7 (VS 2002) 来编译一个项目。

**更新：**答案肯定是肯定的。OP 在评论中指出，他能够通过使用此解决方案使 VC 6 正常工作。

## 配置

我这样做的方法是安装以下内容（按安装顺序）：

**Windows 7，SP1，32 位**

我选择 Windows 7 是因为它是最早支持 VS 2012 的 Windows 版本。我使用 32 位版本是因为 VS 2002 (VC7) 无法安装在 x64 机器上。

**视觉工作室 2002，SP1**

正如我所提到的，我无法获得 VC6。在微软的网站上找不到它。[布鲁斯在](https://stackoverflow.com/questions/3589390/where-can-i-get-visual-c-6-0#comment10166112_3589390)[这个问题](https://stackoverflow.com/questions/3589390/where-can-i-get-visual-c-6-0)下的评论提供了这个有用的见解：

> Microsoft 不提供 Visual C++ 6.0（包括通过 MSDN），因为它包含 Microsoft JVM。有关详细信息，请参阅[此链接](https://msdn.microsoft.com/en-us/subscriptions/ff723773.aspx)。——[布鲁斯克兰](https://stackoverflow.com/users/76093/brucecran)

看到上面的内容后，我认为安装 VS 2002 (VC 7) 是下一个最好的选择。

显然，如果您有副本¹ ，您将在此处安装 VC 6 。

¹[我应该指出，对于任何感兴趣的人，VC 6 都可以在 Ebay 上获得。如果我以实际货币而不是积分获得报酬，我会加倍努力并获得一份 VC 6 进行测试。]

**视觉工作室 2010，SP1**

唯一的原因是它是对[Daffodil](http://daffodil.codeplex.com/)的要求。更多关于下面的水仙花。

**Visual Studio 2012，更新 2**

这是原始问题的要求。

[**水仙花**](http://daffodil.codeplex.com/)

这是一组配置文件，允许 VS 2010 和 VS 2012 以较旧的 VC 编译器为目标。

目前，这些是受支持的 VC 编译器版本：

*   VC 8 (Visual Studio 2005)
*   VC 7.1 (Visual Studio 2003)
*   VC 7 (Visual Studio 2002)
*   VC 6 (Visual Studio 6)

我应该注意到，Daffodil 并未正式支持 VS 2012 作为 IDE，但它似乎确实有效。从水仙花网站：

> 只要还安装了 VS 2010，Daffodil 就可以在 VS 2012 和更高版本^(2中正常工作。)

² [使用 VS 2013 和 VS 2015 时似乎存在调试问题，如此处所述：
[Debugging information does not match, when using v60 platform toolset inside Visual Studio 2013](https://stackoverflow.com/questions/34560149/debugging-information-does-not-match-when-using-v60-platform-toolset-inside-vis)]

## 测试

为了测试上述内容，我在 Visual Studio 2012 中创建了一个新的 C++ Win 32 控制台项目。然后我从项目中删除了所有头文件和 cpp 文件——这些文件是 VS 2012 特有的，因此不需要。然后我添加了一个简单的“hello world”文件，我可以用它来测试：

```
#include <iostream.h>

void main()
{
   cout << "Hello World!" << endl;   
} 
```

按原样使用项目（针对 VS 2012），我尝试构建它但失败了。

接下来，我右键单击项目并选择*属性*。我选择了对话框左侧的*配置属性*，然后在右侧的*Platform Toolset下选择了**v70*。您会注意到*v60*还有一个选项：

![测试项目属性](../Images/148ad7e0e6422246d172d778a242cfa4.png)

然后我将更改保存到项目并进行了构建。它成功构建了一个exe。为了验证是否使用了 VC 7，我在编译期间启动了[Process Monitor ：](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

![编译期间的进程监视器](../Images/5a3ee61bb7b65818aba46fbc5278648c.png)

如您所见，编译器 cl.exe 是从 VC 7 目录中调用的。

## 最后的想法

最初的问题涉及编译现有的 VC 6 项目。对此仅作几点说明。

我的猜测是，为了重新定位工作，您必须在 VS 2012 中创建一个新的空项目，然后添加所有现有的源文件。这样做的原因显然是两个版本的 Visual Studio 之间的项目格式不同。

正如我所提到的，我使用 VC 7 而不是 6 进行了测试。我想最后一步是让 OP 使用 VC 6 尝试所有这些。希望一切正常。

## 链接

*   CodePlex 的[水仙花](http://daffodil.codeplex.com/)
*   C ++ 团队博客上的 VS 2010 的[C++ 原生多目标](http://blogs.msdn.com/b/vcblog/archive/2009/12/08/c-native-multi-targeting.aspx)
*   [VS Android](http://code.google.com/p/vs-android/) - 使用 VS 2010 以 Android 为目标的配置
*   [VS-Tool](https://github.com/juj/vs-tool) - 针对各种框架的配置：Clang、EmScripten、MinGW、NACL、Python

# php - 树枝中的 preg_match

> ID：15029763
> 
> 赞同：3
> 
> 时间：2013-02-22T17:18:42.777
> 
> 标签：php, twig

首先，我知道逻辑应该在控制器中而不是在视图中，我保持这种方式。

但在这种特殊情况下，我需要在三元操作中使用 preg_match 来设置 div 的 css 类。

例子：

```
{% for list in lists %}
    <div class="{{ (preg_match(list.a, b))>0 ? something : else }}"...>...</div>
{% endfor %} 
```

如何在树枝中实现**(preg_match(list.a,b))>0**条件？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-02-28T13:43:56.453

对于那些从谷歌搜索结果来到这里的人（比如我）。

有一个[包含操作符](http://twig.sensiolabs.org/doc/2.x/templates.html#containment-operator)，可以让你做这样的事情：

`{{ 'cd' in 'abcde' }} {# returns true #}`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T18:52:49.943

您不能`preg_match()`直接使用，但有一些方法可以完成它：

1.  如果您`list`是实体，请添加一个方法`matches()`：`{{ (list.matches(b)) ? something : else }}`

2.  `preg_match()`您可以创建一个内部使用的自定义 Twig 扩展函数[http://symfony.com/doc/master/cookbook/templating/twig_extension.html](http://symfony.com/doc/master/cookbook/templating/twig_extension.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-11T10:17:01.577

从 Serge 的评论中扩展，是正确的答案。

在我的示例中，我的字符串是“Message Taken - 12456756”。然后我可以使用 |split 将其转换为数组并使用 |replace 来消除空白。

```
{% set mt = 'Message Taken' in d.note %}
{% if mt == true %}
   {#.. you can then do something that is true#}
   {% set mt_array = d.note|split('-') %}
   {{ mt_array[0] }} | {{ mt_array[1]|replace({' ' : ''}) }}
{% endif %} 
```

这将输出我的字符串，但我现在控制两个部分而不是 1。

# memory - 是否会触发合并以以相反的顺序访问内存？

> ID：15029765
> 
> 赞同：3
> 
> 时间：2013-02-22T17:18:46.033
> 
> 标签：memory, cuda, coalesce

假设我有几个线程，它们访问地址 A+0、A+4、A+8、A+12 的内存（每个访问 = 下一个线程）。这种访问是合并的，对吧？

但是，如果我可以访问相同的内存但顺序相反，则意味着：

```
thread 0 -> A+12
thread 1 -> A+8
thread 2 -> A+4
thread 3 -> A+0 
```

这里是否也触发了合并？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T17:30:29.663

是的，对于 cc 2.0 和更新的 GPU，只要所有请求的 32 位数据元素来自（请求）相同的 128 字节（和 128 字节），任何随机排列的 32 位数据元素到线程都会发生合并对齐）全局内存中的区域。

GPU 在内存控制器中有一个类似于“交叉开关”的东西，它将根据需要分配元素。您可能[对此 GPU 网络研讨会](http://developer.download.nvidia.com/CUDA/training/bandwidthlimitedkernels_webinar.pdf)感兴趣，该研讨会讨论了合并，并将以图形方式说明这一特殊情况（在幻灯片 12 上）。

[NVIDIA 网络研讨会页面](https://developer.nvidia.com/gpu-computing-webinars)还有其他您可能感兴趣的有用网络研讨会。

对于 cc2.0 之前的设备 [，具体情况因计算能力而异](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#global-memory-1-x)，但支持计算 1.0 和 1.1 的设备没有这种能力来合并“逆序”或随机顺序的读取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:59:02.430

还值得注意的是，Nvidia GPU 中 L2 缓存的主要目的是折叠读取和合并写入。因此，如果一个经线正在访问

```
thread 0 -> A+0
thread 1 -> A+8
thread 2 -> A+16
thread 3 -> A+24
... 
```

另一个经线正在访问

```
thread 0 -> A+4
thread 1 -> A+12
thread 2 -> A+20
thread 3 -> A+28
... 
```

这两个访问不会在 SM 内部合并，但通常会在 L2 缓存中合并，因此 GPU 内存只会被触及一次。

# asp.net-mvc - IIS 7 的路由错误与 IIS Express 生成 HTTP 404 错误

> ID：15029774
> 
> 赞同：5
> 
> 时间：2013-02-22T17:19:29.190
> 
> 标签：asp.net-mvc, http, iis-7, asp.net-mvc-routing

我将 MVC 3 与 Visual Studio 2010 和 C# 4.0 一起使用。我的应用程序在 Visual studion 的 IIS Express 下以及部署到远程生产 IIS 7.5 服务器时可以正常工作。

当我切换到在我的开发系统上使用完整的 IIS 7.5 服务器时，我的两个控制器中的操作突然开始出现 HTTP 404 错误。其他控制器正常工作。这是从 Visual Studio 或直接从 IIS 运行应用程序。

我看不到配置差异。

表现出这种行为的控制器之一是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Configuration;
using Mbrrace.ApplicationServices.Validation;

namespace Mbrrace.WebUI.Areas.Validation.Controllers
{
    public class ValidationController : Controller
    {
        //
        // GET: /Validation/Validation/

        [HttpGet]
        public JsonResult PostcodeCheck([Bind(Prefix = "perinatalView")]AddressViewModel model)
        {

            //  postcode has already been checked for correct format
            //  now look it up to see if it exists

            if (PostcodeChecks.CheckPostcodeExists(ConfigurationManager.ConnectionStrings["CommonCodeEntities"].ConnectionString, model.Postcode))
            {
                return Json(true, JsonRequestBehavior.AllowGet);
            }

            return Json("This postcode was not found in the database", JsonRequestBehavior.AllowGet);

        }

        [HttpPost]
        public JsonResult PostcodeExtendedCheck(String Postcode)
        {

            // check if it exists or of it's sector exists (all but last two characters

            string message = PostcodeChecks.PostcodeExtendedCheck(ConfigurationManager.ConnectionStrings["MbrraceCommonCodeEntities"].ConnectionString,
                Postcode, Postcode.Substring(0, Postcode.Length - 2));
            string success = (message.Length == 0) ? "OK" : "NO";
            var result = new { Success = success, Message = message };

            return Json(result, JsonRequestBehavior.AllowGet);
        }

        public class AddressViewModel
        {
            public string Postcode { get; set; }
        }

    }
} 
```

这在 IIS Express 和部署到 IIS 中的行为符合预期。当 IIS 连接到项目进行调试时，它会引发 404 错误。

任何人都可以解释为什么会产生 404 错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T17:23:44.187

我首先想到的是关于`IIS configuration`。是否有`Application Pool`在集成模式下配置的站点？

您也可以尝试添加`global.asax`an`Application_OnError`并在那里签入`server.GetLastError`

另一种选择应该是使用 Glimpse 来查看您可能遇到的路由问题（如果是路由问题）

在此之后，如果您没有发现问题，请发布有关 IIS 配置的更多详细信息

# linux - 跨服务器符号链接和 Crontab

> ID：15029779
> 
> 赞同：0
> 
> 时间：2013-02-22T17:19:47.957
> 
> 标签：linux, crontab, symlink

我的任务是尝试实现以下场景。我想知道的是这是否可行/可行？

将有 4 台以上的服务器。为方便起见，我将它们称为服务器 A、服务器 B、服务器 C、服务器 D

服务器 A 是命令和控制服务器。它将包含将由 Cron Tab 作业执行的脚本 (PHP)。服务器 A 上还将有一个应用程序，允许用户选择要运行的脚本并指定它们将在哪个服务器上运行。因此，该应用程序将在指定服务器上创建 Cron 选项卡作业。

到目前为止一切顺利 - 使用 SSH2 库我可以在目标服务器上创建 cron 条目。

我知道我可以在 Crontab 条目中使用符号链接。

是否可以创建一个从服务器 B、服务器 C 或服务器 D 指向服务器 A 的符号链接。

所以基本上我希望服务器 A 在其他服务器上发布/维护 Cron 选项卡，以存储所有脚本，但是当其他服务器作业运行时，它们运行存储在服务器 A 上的脚本。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:27:55.817

符号链接仅告诉操作系统替换另一个路径并尝试再次访问该文件。访问仍然只发生在本地文件系统上。

您需要通过[sshfs](http://fuse.sourceforge.net/sshfs.html)、[NFS](http://tldp.org/HOWTO/NFS-HOWTO/)或[Samba](http://www.samba.org/)等方式将服务器 A 的文件系统挂载到其他服务器上。

相反，为什么不在运行之前将脚本复制到目标服务器呢？

# google-app-engine - 每次请求调用时的 Appengine 冷启动 (Java)

> ID：15029783
> 
> 赞同：1
> 
> 时间：2013-02-22T17:20:04.700
> 
> 标签：google-app-engine

我最近开始在几乎每次调用我的 appengine 应用程序时都进行冷启动。最初我认为这是 Cloud Endpoints 的问题，但现在我认为这是 appengine 问题，或者我的代码中的其他问题。这始于我最近的部署。我现在不知道发生了什么。它使我的应用程序毫无用处。我试过 1.7.4 和 1.7.5 都有这个问题。

这些请求除了非常慢之外还有效！任何帮助将不胜感激，因为我无法继续 10-15 次请求！

更新：通过查看我正在运行的实例，我发现即使在发出请求后也没有运行实例。以前的实例会在发出请求后继续运行。它在发出请求时出现，实例被启动，服务于请求，然后死亡。我的日志中没有错误。我的应用设置或计费没有任何更改。这个应用程序确实启用了计费。

更新 2：我已经调整了我的空闲实例设置（到目前为止，这些设置已经奏效并且没有受到影响）。我将最小值设置为 1，最大值设置为 2。实例保持活动状态并正常处理请求。以前它被设置为自动 1。不知道这里发生了什么，也许谷歌调整了请求调度程序或其他东西。不酷！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:53:17.953

我在 code.google.com 上发现了一个未解决的问题。显然，这是一个真正的 appengine 问题，目前正在影响一些（如果不是全部）应用程序。除了将空闲的最小实例设置为 1（或更大）之外，我目前没有其他解决方案。即使这样做，新的动态实例在服务请求后几乎立即死亡。只是在等待谷歌的修复。

[http://code.google.com/p/googleappengine/issues/detail?id=8844](http://code.google.com/p/googleappengine/issues/detail?id=8844)

# performance - SQL Server 2008 性能低下

> ID：15029787
> 
> 赞同：0
> 
> 时间：2013-02-22T17:20:11.543
> 
> 标签：performance, sql-server-2008, entity-framework, asp.net-web-api, windows-server-2008-r2

我一直在工作的项目包括一个使用 WebApi 的服务项目，以及不同平台（桌面和移动）中的几个客户端项目。该服务项目通过根据我的客户的业务需求验证用户凭据来满足所有请求，并使用 Entity Framework 5 与数据库进行通信。

在我的开发 PC 中一切正常（使用**Windows 8**和**SQL Server 2012 Express**）。但是当我将服务应用程序部署到生产服务器（使用**Windows Server 2008 R2 Enterprise**和**SQL Server 2008 Standard**）时，不幸的是，每个请求都花费了太多时间。

例如，在一年内分析几乎所有交易的最昂贵的服务方法，在我的开发 PC 上最多需要 500 毫秒，但在服务器上则需要 35-40 秒。

出于某种原因，我`MultipleActiveResultSets`启用了，禁用它并没有帮助。除此之外，我尝试重新安装 SQL Server、IIS 和整个 Windows，但没有比这更好的了。

有什么建议吗？请。

# javascript - Javascript表colspan的问题

> ID：15029788
> 
> 赞同：0
> 
> 时间：2013-02-22T17:20:16.663
> 
> 标签：javascript, html-table, winjs

我试图让我的一些专栏跨越可读性以及模式识别。我还在更改单元格的背景颜色以显示模式。如果我的数组中的数据为空，我使用红色。如果它不为空且至少跨越 2 列，则为蓝色，否则为灰色。我发现我的某些列比应有的要宽，有些则更短。对于我的数据，第一列是唯一太宽的，最后一列是唯一太短的。然而，据我所知，它们的颜色是正确的。我可以提供示例代码，但不能提供示例数据，因为它是高度机密的。我可以给出代码，并且会。为什么我的一些专栏比我预期的更宽，而另一些则比我预期的要短？

```
function loadTable() {
    var fields = JSON.parse(localStorage.getItem("boxFields"));
    var report = JSON.parse(localStorage.getItem("boxReport"));
    var space = document.getElementById("batchReport");
    var baseList = document.createElement("ul");
    space.appendChild(baseList);
    for (var i = 0; i < fields.length; i++) {
        var li = document.createElement("li");
        baseList.appendChild(li);
        var header = document.createElement("h2");
        header.textContent = fields[i] + ":";
        li.appendChild(header);
        if (report.length > 0) {
            var table = document.createElement("table");
            table.className += "wide";
            li.appendChild(table);
            var tr = document.createElement("tr");
            table.appendChild(tr);
            var td = document.createElement("td");
            td.colSpan = report.length;
            tr.appendChild(td);
            tr = document.createElement("tr");
            table.appendChild(tr);
            var compare = "NeverEqual";
            var count = 0;
            td = null;
            for (var j = 0; j < report.length; j++) {
                if (compare == report[j][i]) {
                    count++;
                    td.colSpan = count;
                    if (compare != null)
                        td.style.backgroundColor = "#336";
                } else {
                    count = 1;
                    compare = report[j][i];
                    td = document.createElement("td");
                    tr.appendChild(td);
                    td.textContent = report[j][i];
                    //td.colSpan = 1;
                    if (compare != null)
                        td.style.backgroundColor = "#333";
                    else {
                        td.style.backgroundColor = "#633";
                    }
                }
            }
        }
    }
    space.style.height = "93%";
    space.style.overflow = "auto";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:06:44.677

您没有为表格单元格指定明确的宽度，因此它们将根据其内容和浏览器/IE 所做的后备逻辑自动计算。如果您想让一个单元格具有特定宽度，请对其应用一个类或将其设置为具有明确的属性，例如：

```
td.style.width = "50px"; 
```

或者

```
td.className = "myCell";
// and in css somewhere define the class
.myCell{
  width: 50px;
} 
```

# jquery - 如何使用 js 或 jQuery 与 iframe 的内容进行交互

> ID：15029790
> 
> 赞同：4
> 
> 时间：2013-02-22T17:20:22.650
> 
> 标签：jquery, iframe

index.html 与此代码

```
<iframe src="other.html" width="100%" height="600px"></iframe>

<input type="button" id="btnOutside" value="Click me"/> 
```

在 other.html 我有这个代码：

```
<input type="button" id="btnInside" value="Other Click"/>
<script type="text/javascript">
$(document).ready(function() {
    $("#btnInside").click(function () {
        alert('inside');
    });
});
</script> 
```

我试图让外部按钮在 index.html 中像这样触发内部按钮

```
<script type="text/javascript">
$(document).ready(function() {
    $("#btnOutside").click(function () {
        $("#btnInside").click();
    });
});
</script> 
```

但这是行不通的。我能做些什么？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T17:27:11.997

不同的 iframe 有不同的上下文和文档：当您调用时`$('#btnInside')`，jQuery 正在主机 iframe 中执行并查看该文档，因此无法找到它。但是，如果嵌套的 iframe 在同一台服务器上，您可以从主机文档通过隧道访问其文档：

```
$(document).ready(function() {
    $("#btnOutside").click(function () {
        $('iframe[src="other.html"]').contents().find("#btnInside").click();
    });
}); 
```

# javascript - Express：如何考虑路由回调

> ID：15029794
> 
> 赞同：0
> 
> 时间：2013-02-22T17:20:31.103
> 
> 标签：javascript, express

所以我有多个这样的路线：

```
app.get('/user', function(req, res) {
    model.find({}, function(err, docs) {
      res.send(docs);
    });
  });

app.get('/user/:id', function(req, res) {
    model.findById(req.params.id, function(err, doc) {
      res.send(doc);
    });
  }); 
```

乘以很多。

我想知道它们是否可以像这样分解回调函数：

```
app.get('/user', function(req, res) {
    model.find({}, sendInResponse);
  });

app.get('/user/:id', function(req, res) {
    model.findById(req.params.id, sendInResponse);
  }); 
```

我的问题是`res`范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:04:54.907

我会这样重构它：

```
var find = function (queryFn) {                                          

  return function (req, res, next) {                                     

    var query  = queryFn.apply({ req: req, res: res });                  

    model.find(query, function (err, docs) {                             
      res.send(docs);                                                    
    });                                                                  

  }                                                                      

}; 
```

现在您有了通用查询中间件，您可以像这样使用它：

```
app.get('/user/:id', find(function () { return { id: this.req.params.id } }); 
```

这只是可能的一角，您甚至可以对其进行更多重构。这是我创建的仅使用通用中间件的应用程序的路由：

```
app.get('/users/:username',
        data.one('user', data_users.byUsername, 'params.username'),
        data.many(data_grows.byUserId, 'locals.user.id'),
        general.render('grows/index')); 
```

# cordova - AngularJS + PhoneGap $digest 迭代

> ID：15029795
> 
> 赞同：1
> 
> 时间：2013-02-22T17:20:32.320
> 
> 标签：cordova, angularjs

在 phonegap 上运行我的应用程序时，我收到 $digest 迭代错误。在香草网络浏览器上，我没有收到任何错误。这里的任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T06:57:31.533

当您在某个表达式（在控制器或指令中）上有一个观察者修改该表达式的值时，通常会导致此错误，这会导致无限循环。请检查您的所有观察者。

[这是一个类似的帖子](https://stackoverflow.com/questions/13277542/10-digest-iterations-reached-aborting-due-to-filter-using-angularjs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:15:14.280

问题是我有一个似乎是循环引用的东西。我在运行绑定到 ng-click 指令的重定向函数的范围内内置了函数调用。当我从 ngclick 中删除这些重定向函数，而是使用 onclick 隐式调用重定向函数并从范围对象中删除指针函数时，它开始工作。我相信这是由试图更改视图的范围内的函数引起的，从而造成观察者永远不会结束的情况，因为它仍在等待视图更改并且视图更改控件必须被取消引用。

# javascript - 多个导航更新Jquery

> ID：15029799
> 
> 赞同：0
> 
> 时间：2013-02-22T17:20:37.687
> 
> 标签：javascript, jquery, html, css, sharepoint-2007

创建了页眉和页脚导航。标题导航包含 1 个 UL，页脚导航包含 5 个 UL。我希望页脚导航中每个 UL 的 li:first 子项与页眉导航匹配。页脚导航与标题导航具有相同的主 li，但其中包含子 li 有人可以帮我吗？

我为我的问题创建了一个 jsFiddle：

[http://jsfiddle.net/WkZuv/41/](http://jsfiddle.net/WkZuv/41/)

```
$(".Nav > li").live({
    mouseover:function(){
        $(this).addClass("menuHover");
    },
    mouseout:function(){
        $(this).removeClass("menuHover");
    },
    click:function(){
        $(".Nav > li").removeClass("menuClicked");
        $(this).addClass("menuClicked");
    }
});

$(".footer > li:first-child").live({
    mouseover:function(){
        $(this).addClass("menuHover");
    },
    mouseout:function(){
        $(this).removeClass("menuHover");
    },
    click:function(){
        $(".Nav > li").removeClass("menuClicked");
        $(".Nav > li").eq($(this).index()).addClass("menuClicked");     

         $(".footer > li").removeClass("menuClicked");
        $(this).addClass("menuClicked");  
    }
});

.menuHover{
    background-color:#666;
    color:#fff;
}
.menuClicked{
    background-color:yellow;
    color:#666;
}

.footerTitle{
    font-weight: bold;
    color:black;
}

<h1>Header NAV</h1>
<ul class="Nav">
    <li class ="menuClicked"> List 1 </li> 
    <li>List 2 </li>
    <li> List 3 </li>
    <li> List 4 </li>
    <li> List 5</li>
</ul>

<hr />

<h1>FOOTER NAV</h1>
<ul class="footer">
    <li class ="footerTitle"> List 1 </li> 
    <li>Sub List 2 </li>
    <li>Sub List 3 </li>
    <li> Sub List 4 </li>
    <li>Sub List 5</li>
</ul>
<ul class="footer">
    <li class ="footerTitle"> List 2 </li> 
    <li>Sub List 2 </li>
    <li>Sub List 3 </li>
    <li> Sub List 4 </li>
    <li>Sub List 5</li>
</ul>
<ul class="footer">
    <li class ="footerTitle"> List 3 </li> 
    <li>Sub List 2 </li>
    <li>Sub List 3 </li>
    <li> Sub List 4 </li>
    <li>Sub List 5</li>
</ul>
<ul class="footer">
    <li class ="footerTitle"> List 4 </li> 
    <li>Sub List 2 </li>
    <li>Sub List 3 </li>
    <li> Sub List 4 </li>
    <li>Sub List 5</li>
</ul>
<ul class="footer">
    <li class ="footerTitle"> List 5 </li> 
    <li>Sub List 2 </li>
    <li>Sub List 3 </li>
    <li> Sub List 4 </li>
    <li>Sub List 5</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:44:30.627

我想我明白你在找什么。尝试这样的事情：

```
$(".Nav > li").live({
    mouseover:function(){
        $(this).addClass("menuHover");
        $(".footer > li:first-child").eq($(this).index()).addClass("menuHover");
    },
    mouseout:function(){
        $(this).removeClass("menuHover");
        $(".footer > li:first-child").eq($(this).index()).removeClass("menuHover");
    },
    click:function(){
        $(".Nav > li").removeClass("menuClicked");
        $(this).addClass("menuClicked");
        $(".footer > li:first-child").removeClass("menuClicked").eq($(this).index()).addClass("menuClicked");
    }
});

$(".footer > li:first-child").live({
    mouseover:function(){
        $(this).addClass("menuHover");
        $(".Nav>li").eq($(".footer").index($(this).parent("ul"))).addClass("menuHover");
    },
    mouseout:function(){
        $(this).removeClass("menuHover");
        $(".Nav>li").eq($(".footer").index($(this).parent("ul"))).removeClass("menuHover");
    },
    click:function(){
        $(".Nav > li").removeClass("menuClicked");
        $(".footer > li:first-child").removeClass("menuClicked");
        $(this).addClass("menuClicked");
        $(".Nav>li").eq($(".footer").index($(this).parent("ul"))).addClass("menuClicked");
    }
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/WkZuv/65/](http://jsfiddle.net/dirtyd77/WkZuv/65/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:29:41.297

以下语句存在问题。

```
$(".Nav > li").eq($(this).index()).addClass("menuClicked"); 
```

$(this).index() 总是返回零。尝试调整您的 css 选择器以匹配 ul.footer 元素集以获得正确的索引。不过，您将不得不进行一些其他修改。

# c# - MEF2 导入的好例子

> ID：15029802
> 
> 赞同：0
> 
> 时间：2013-02-22T17:20:51.947
> 
> 标签：c#, mef, mef2

我以前使用过 MEF，但现在在使用较新的实现时遇到了问题。我正在导出从具有 [InheritedExport] 属性的基类继承的对象，并试图将它们导入。

以前，我只需要一个带有 [ImportMany(typeof(mytype))] 的数组属性，并使用 CompositionInitializer.SatisfyImports(this) 来使导入工作，但现在我有两个问题：

1) 导出位于不同的引用程序集中；2）CompositionInitializer 似乎不存在于 4.5 框架中较新的 MEF 中。

我正在尝试创建一个 AggregateCatalog 来解决问题 #1，但不知道从这里去哪里。

最后，我正在尝试导入一个可供整个 WPF 应用程序使用的集合，如果有人可以帮助我提出整体解决方案的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:53:54.303

> 1) 导出位于不同的引用程序集中；

正如您所说，您将需要`AggregateCatalog`聚合多个目录。通常，每个包含零件（导出/导入）的装配体都需要一个目录。这意味着您必须为这些加载的程序集中的每一个使用[AssemblyCatalog](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.assemblycatalog.aspx)类。您可以通过它们包含的一种类型访问已加载的程序集。这是一个将几个 AssemblyCatalogs 添加到 AggregateCatalog 的小示例。

```
AggregateCatalog catalog = new AggregateCatalog();
catalog.Catalogs.Add(new AssemblyCatalog(typeof(SomeClassInSomeAssembly).Assembly));
catalog.Catalogs.Add(new AssemblyCatalog(typeof(SomeClassInAnotherAssembly).Assembly)); 
```

有关目录的更多信息，您可以阅读[这篇小文章](http://mef.codeplex.com/wikipage?title=Using%20Catalogs)。

> 2）CompositionInitializer 似乎不存在于 4.5 框架中较新的 MEF 中。

这仅适用于`Silverlight`。`WPF`你必须创建一个CompositionContainer并使用它的[方法](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.compositioncontainer.aspx)`SatisfyImports`。

```
CompositionContainer container = new CompositionContainer(catalog);
container.SatisfyImports(someObjectWithImports); 
```

# geolocation - 更新地理位置标记，而不是使用传单 api 添加新的标记

> ID：15029803
> 
> 赞同：2
> 
> 时间：2013-02-22T17:20:55.007
> 
> 标签：geolocation

每次位置更新时，它都会放置一个新标记，而不是移动现有标记。我只想在屏幕上放置一个标记，而不是每次应用程序更新其位置时放置一个新标记（忽略最大年龄和频率，我正在测试一些东西，我知道它们不是问题）。提前致谢。

（加载地图的代码）

```
 function onLocationFound(e) {

                                var marker= L.icon({iconUrl: 'greendot.png'});
    var radius = e.accuracy /2;

    L.marker(e.latlng, {icon: marker}).addTo(map).bindPopup("You are within " + radius + " meters from this point").openPopup();

                                  }

    function onLocationError(e) {
        alert(e.message);
    }

    map.on('locationfound', onLocationFound);
    map.on('locationerror', onLocationError);

    map.locate({watch: true, setView: true, maxZoom: 16, enableHighAccuracy: true, maximumAge:10000, frequency: 1}); 
```

编辑：我已经尝试了几种解决方案，但标记仍然没有移动，它只是添加了一个新的。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-06T07:21:39.067

您可以更新现有标记，而不是每次都创建一个新标记：

```
var marker = L.icon({iconUrl: 'greendot.png'});
var movingMarker = L.marker([0,0], 0, {icon: marker}).addTo(map);

function onLocationFound(e) {
    var radius = e.accuracy /2;
    movingMarker.setLatLng(e.latlng);
    movingMarker.unbindPopup();
    movingMarker.bindPopup("You are within " + radius + " meters from this point")
    movingMarker.redraw();
}

function onLocationError(e) {
    alert(e.message);
}

map.on('locationfound', onLocationFound);
map.on('locationerror', onLocationError);

map.locate({watch: true, setView: true, maxZoom: 16, enableHighAccuracy: true, maximumAge: 10000}); 
```

我刚刚发现了一个类似的问题（有类似的答案）：[使用传单 API 更新标记位置](https://stackoverflow.com/questions/14173815/update-marker-location-with-leaflet-api)

# xamarin.ios - Monotouch 中的 Tesseract OCR - 有可能吗？

> ID：15029804
> 
> 赞同：0
> 
> 时间：2013-02-22T17:20:58.497
> 
> 标签：xamarin.ios, tesseract

我正在尝试在我的应用程序中使用 Tesseract 或任何以 Monotouch 编写的 OCR 工具。我一直无法弄清楚如何将两者结合起来。有没有人有关于如何执行此过程的任何信息或可能的教程？

# javascript - 将包含字符的字符串拆分为数组项

> ID：15029806
> 
> 赞同：0
> 
> 时间：2013-02-22T17:21:05.163
> 
> 标签：javascript, jquery, arrays

我在一个句子中有几个字符（~）。在每个〜上，我想将之前的文本拆分为一个数组项。然后，每个数组项最后都需要一个`<br />`标签。

我尝试使用替换，但它只适用于第一个〜而忽略了其余的。这就是为什么我认为拆分成一个数组可能更有益。

```
$("h2").html(function(index, currentHtml) {
    return currentHtml.replaceAll('~', '<br />');
}); 
```

例子：

这是一些文字~这是那个文字下面的一些文字~这里还有一些文字~还有最后一点文字

```
<strong>This is some text</strong><br />
This is some text underneath that text<br />
some more text here<br />
<strong>and a final bit of text</strong> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T17:22:57.953

您可以使用 split 和 join

```
$("h2").html(function(index, currentHtml) {
    return currentHtml.split('~').join('<br />');
}); 
```

或将其更改为正则表达式

```
$("h2").html(function(index, currentHtml) {
    return currentHtml.replace(/~/g,'<br/>'); // g signifying global
}); 
```

# vb.net - vb.NET Network.UploadFile 限制

> ID：15029807
> 
> 赞同：1
> 
> 时间：2013-02-22T17:21:05.840
> 
> 标签：vb.net, upload, limit

我使用**My.Computer.Network.UploadFile**方法将文件上传到 FTP 。但我有一些问题。我的问题是上传速度。

例如：我使用一些 FTP 程序（FileZilla），上传速度为 4 Mb/sn。但**My.Computer.Network.UploadFile**方法是**1.20Mb/sn 限制。**

为什么这种方法是有限的？我可以提高上传速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:00:13.250

使用此代码朋友并告诉我这是否有用：

```
 using System.Net;
             // Get the object used to communicate with the server.
            FtpWebRequest request = (FtpWebRequest)FtpWebRequest.Create("ftp://
            XXXXXXXXXXXXXXXXXXXXX/" + "C:/XXXXX.zip");
            request.Method = WebRequestMethods.Ftp.UploadFile;
            request.Credentials = new NetworkCredential("User", "PassWord");

            // Copy the contents of the file to the request stream.
            Stream ftpStream = request.GetRequestStream();
            FileStream file = File.OpenRead("C:/XXXXX.zip");

            int length = 1024;
            byte[] buffer = new byte[length];
            int bytesread = 0;

            do
            {
            bytesread = file.Read(buffer,0,length);
            ftpStream.Write(buffer,0,bytesread);
            }
            while(bytesread != 0);

            file.Close();
            ftpStream.Close();

            MessageBox.Show("Uploaded Successfully"); 
```

# jquery - 加载元素时需要隐藏块

> ID：15029808
> 
> 赞同：0
> 
> 时间：2013-02-22T17:21:10.470
> 
> 标签：jquery, ajax, hide

当您单击文本区域进行评论（WordPress 博客）时，我正在使用此代码显示“登录框”。

```
$('#comments textarea').click(function() {
    $('#comment-user-details').slideDown("slow");
}); 
```

仅当用户未登录时才会显示该表单。

但是，由于我使用“Simple Facebook Connect”插件来允许使用 FB 个人资料进行评论，因此当用户使用 Facebook 登录时，会加载“登录框”，并且插件通过添加“显示：无”来隐藏它;" 类，但是由于我打开了上面的代码，当用户单击文本区域时，显然会出现“登录表单”。

我试图检查是否加载了插件元素（块“登录为...”），说“仅在未加载此元素时使用我的上述功能”，有这样的：

```
if ($("#fb-user").length == 0) {
   $('#comments textarea').click(function() {
      $('#comment-user-details').slideDown("slow");
   });
} 
```

但问题是插件在脚本之后加载它的块，所以对于脚本来说，元素永远不存在。

所以遇到了 Live Query 插件，这似乎是要走的路，但仍然找不到代码的正确逻辑：

```
$('#fb-user').livequery(function() { 
        if ($("#fb-user").length == 0) {

        $('#comments textarea').click(function() {
            $('#comment-user-details').slideDown("slow");
        });

    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:49:20.673

这是工作代码：

```
$('#comments textarea').click(function() {
        if ($("#fb-user").length == 0) {
            $('#comment-user-details').slideDown("slow");
        }
    }); 
```

# powershell - 尝试访问 ImageMagick Convert 时出现“一元运算符后缺少表达式”

> ID：15029809
> 
> 赞同：1
> 
> 时间：2013-02-22T17:21:12.490
> 
> 标签：powershell, imagemagick

我必须将 UNIX Shell 脚本转换为 powershell 脚本。此脚本在 ImageMagick 上运行转换。当我尝试执行以下代码时：

```
$convertcmd="convert $dir\tmpI.mpc `(-clone 0 $process `)`(-clone 0 -channel $color2 -separate -threshold $high% $tapering `) -compose over -composite `"$outfile`""

Invoke-Expression -Command $convertcmd 
```

我不断得到

```
Invoke-Expression : Missing expression after unary operator '-'.
At C:\test\xxxxx.ps1:189 char:21
+             Invoke-Expression <<<<  -Command $convertcmd 
+ CategoryInfo          : ParserError: (-:String) [Invoke-Expression], ParseException
+ FullyQualifiedErrorId :  MissingExpressionAfterOperator,Microsoft.PowerShell.Commands.InvokeExpressionCommand 
```

$convertcmd 变成的结果字符串

```
convert .\COLORBALANCE\tmpI.mpc (-clone 0  -channel blue -level 0x98% +channel)(-clone 0 -channel blue -separate -threshold 18.9338% ) -compose over -composite /imagemagick/workarea/out/after.jpg 
```

我怀疑它的括号作为 PowerGUI 中的智能感知在 (-clone... 语句的一部分给我同样的错误。我尝试查找如何转义括号和反斜杠（类似于 Unix Shell 代码）不是' t 工作，也不是 ` 字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:21:25.057

当您调用 Invoke-Expression 时，您传入的字符串的内容将被视为 Powershell 脚本表达式。这意味着括号对的内容被视为脚本表达式。由于您使用的是双引号字符串 - “...”，因此在分配给 $convertcmd 变量之前，反引号将被解释和删除。

您可以对反引号进行转义，以便在将其传递给 Invoke-Expression 时它们在字符串中保持转义：

```
$convertcmd="convert $dir\tmpI.mpc ``(-clone 0 $process ``)``(-clone 0 -channel $color2 -separate -threshold $high% $tapering ``) -compose over -composite `"$outfile`"" 
```

或者您可以在分配给变量后转义括号：

```
$convertcmd="convert $dir\tmpI.mpc (-clone 0 $process ) (-clone 0 -channel $color2 -separate -threshold $high% $tapering ) -compose over -composite `"$outfile`""
$convertcmd = $convertcmd.Replace('(', '`(').Replace(')', '`)')
iex $convertcmd 
```

或者您可以将您的命令包含在脚本块中并使用以下命令执行它`&`：

```
 $convertcmd = {convert $dir\tmpI.mpc `(-clone 0 $process `)`(-clone 0 -channel $color2 -separate -threshold $high% $tapering `}
 & $convertcmd 
```

如果您使用的是 Powershell v3，您还可以通过在命令`--%`的参数部分之前放置，让 Powershell 将可执行文件名称之后的整个字符串解释为命令字符串：

```
$convertcmd="convert --% $dir\tmpI.mpc `(-clone 0 $process `)`(-clone 0 -channel $color2 -separate -threshold $high% $tapering `) -compose over -composite `"$outfile`"" 
```

或者在任何版本的 Powershell 中，您都可以让 cmd 解释字符串：

```
$convertcmd="convert $dir\tmpI.mpc `(-clone 0 $process `)`(-clone 0 -channel $color2 -separate -threshold $high% $tapering `) -compose over -composite `"$outfile`""
iex "cmd /c '$convertcmd'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:07:02.907

这有帮助吗？

```
$dir = '.\COLORBALANCE'
$process = 'PROCESS'
$color2 = 'BLUE'
$high = '98'
$threshold = 'THRESHOLD'
$tapering = 'TAPERING'
$outfile = '/imagemagick/workarea/out/after.jpg'

$insert = @($dir,$process,$color2,$high,$tapering,$outfile)

$convertcmd= 'convert {0}\tmpI.mpc (-clone 0 {1} )(-clone 0 -channel {2} -separate -threshold {3}% {4} ) -compose over -composite "{5}"'

$convertcmd -f $insert

convert .\COLORBALANCE\tmpI.mpc (-clone 0 PROCESS )(-clone 0 -channel BLUE -separate -threshold 98% TAPERING ) -compose over -composite "/imagemagick/workarea/out/after.jpg" 
```

# database - 将数据插入数据库时 ，在 WordPress 的警报框中获取“对象对象”错误消息

> ID：15029816
> 
> 赞同：1
> 
> 时间：2013-02-22T17:21:32.947
> 
> 标签：database, wordpress, jquery, web

我正在一个网站上工作，我需要将用户数据插入和获取到数据库中。我创建了一个自定义模板，我可以在其中获取数据，但是当我尝试插入它时，会显示带有错误消息“object Object”的警报框。

自定义模板代码如下：

```
<?php
/*
Template Name: Customers
*/
get_header(); ?>

    <div id="primary">
        <div id="content" role="main">

            <?php while ( have_posts() ) : the_post(); ?>

                <?php get_template_part( 'content', 'page' ); ?>

                <?php 

                if (is_user_logged_in()):?>

                    <form type="post" action="" id="newCustomerForm">

                        <label for="name">Name:</label>
                        <input name="name" type="text" />

                        <label for="email">Email:</label>
                        <input name="email" type="text" />

                        <label for="phone">Phone:</label>
                        <input name="phone" type="text" />

                        <label for="address">Address:</label>
                        <input name="address" type="text" />

                        <input type="hidden" name="action" value="addCustomer"/>
                        <input type="submit">
                    </form>
                    <br/><br/>
                    <div id="feedback"></div>
                    <br/><br/>

                <?php 
                    global $wpdb;
                    $customers = $wpdb->get_results("SELECT * FROM customers;");

                    echo "<table>";
                    foreach($customers as $customer){
                        echo "<tr>";
                        echo "<td>".$customer->name."</td>";
                        echo "<td>".$customer->email."</td>";
                        echo "<td>".$customer->phone."</td>";
                        echo "<td>".$customer->address."</td>";
                        echo "</tr>";
                    }
                    echo "</table>";
                else:
                    echo "Sorry, only registered users can view this information";
                endif;                      

                ?>

                <script type="text/javascript">
                    jQuery('#newCustomerForm').submit(ajaxSubmit); 

                    function ajaxSubmit(){

                        var newCustomerForm = jQuery(this).serialize();

                        jQuery.ajax({
                            type:"POST",
                            url: "/wp-admin/admin-ajax.php",
                            data: newCustomerForm,
                            success:function(data){
                                jQuery("#feedback").html(data);
                            },
                            error: function(errorThrown){
                                alert(errorThrown);
                            }   
                        });

                        return false;
                    }
                </script>

            <?php endwhile; // end of the loop. ?>

        </div><!-- #content -->
    </div><!-- #primary --> 
```

在functions.php中，我添加了以下代码：

```
/*
Following function recieves data from the user
*/
wp_enqueue_script('jquery');

function addCustomer(){

global $wpdb;

$name = $_POST['name'];
$phone = $_POST['phone'];
$email = $_POST['email'];
$address = $_POST['address'];

if($wpdb->insert('customers',array(
    'name'=>$name,
    'email'=>$email,
    'address'=>$address,
    'phone'=>$phone
    ))===FALSE){

    echo "Error";

}
else {
        echo "Customer '".$name. "' successfully added, row ID is ".$wpdb->insert_id;

    }
die();  
}
add_action('wp_ajax_addCustomer', 'addCustomer');
add_action('wp_ajax_nopriv_addCustomer', 'addCustomer'); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:00:32.220

在您的`ajax`函数中，您没有包含/发送`action`应该调用您注册使用`add_action`的内容，也就是说`addCustomer`，这是一个示例

```
var newCustomerForm = jQuery(this).serialize();
jQuery.ajax({
    type:"POST",
    url: "/wp-admin/admin-ajax.php",
    data: newCustomerForm + '&action=' + addCustomer, // <==
    success:function(data){
        jQuery("#feedback").html(data);
    },
    error: function(errorThrown){
        alert(errorThrown);
    }   
}); 
```

# sql - 切换服务器后将临时表保存在内存中？

> ID：15029819
> 
> 赞同：1
> 
> 时间：2013-02-22T17:21:37.673
> 
> 标签：sql, sql-server

切换服务器后如何让#tempTable 留在内存中。这可能吗？

```
Select * 
into #tempTable
from dbo.table 
```

我在服务器 1 中有要在服务器 2 中比较的数据，但我只有对服务器 2 的只读访问权限（所以我不能只将我的数据移动到那里），并且服务器 2 中的表太大而无法移动到服务器1\. 这就是为什么我想知道在连接到新服务器后如何在内存中保存临时表。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:30:47.843

您编写的内容是可能的，但它只是在该表所在的服务器上创建一个临时表。

你可能想要：

```
select *
into #Server2Table
from server2.database.dbo.table 
```

然后，您可以`#Server2Table`在复制它的同一连接上的其他查询中使用（例如 SSMS 中的同一窗口或同一作业步骤或同一存储过程）。如果您需要将它放在更永久的位置，请使用全局临时表（以 开头`##`）或“真实”表。

这需要能够链接服务器，使用类似的东西：

```
sp_addlinkedserver server2 
```

您将在 server1 上运行它。也许您的 DBA 需要设置它。

我发现将跨服务器表加载到临时表中时查询通常运行得更快。这*不是*因为临时表存储在内存中。这是因为有更多关于本地服务器上的表的信息可供 SQL 优化器利用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:30:50.180

您可以从查询中导出数据并将其导入第一台服务器上的数据库中。您可以使用 SQL Server 导入/导出向导。有点复杂，但如果这种情况经常发生，您可以使用 SSIS 自动执行此操作，甚至只需勾选“保存此包”框。一旦你在你的第一台服务器中获得了数据，你就可以对它做任何你喜欢的事情。

# azure - 无法远程访问 CouchDB

> ID：15029820
> 
> 赞同：0
> 
> 时间：2013-02-22T17:21:50.583
> 
> 标签：azure, couchdb

我无法远程访问 CouchDB。我在 Azure 中使用 Windows 2008 虚拟机。

我做了以下，

1) 在 windows server 2008 上安装 IIS。

2) 为端口 5984 创建了一个端点

3）安装CouchDB并使用蒲团验证相同

```
 http://127.0.0.1:5984/_utils 
```

4）使用我的域注册商创建一个子域（ db.mydomainxyz.com ）并进行验证。如果我在浏览器中键入[http://db.mydomainxyz.com/](http://db.mydomainxyz.com/) - 会显示 IIS7 默认页面。

5) 通过设置 => bind_address = 0.0.0.0 使 couchdb 能够监听所有网络适配器

6）创建虚拟主机指向我的域=> db.mydomainxyz.com:5984 = /db/_rewrite/

做完所有这些事情后，我仍然无法远程访问 CouchDB [http://db.mydomainxyz.com:5984/](http://db.mydomainxyz.com:5984/)

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:42:48.430

更改后`bind_address`，必须重新启动 CouchDB。问题是它的守护进程非常有弹性。因此，即使您尝试重新启动它，它也可能永远不会停止。而是重新启动您的虚拟机。

有关更多信息，请参阅[有关 ServerFault 的类似讨论](https://serverfault.com/questions/79453/why-cant-i-access-my-couchdb-instance-externally-on-ubuntu-9-04-server)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T07:51:43.267

这个命令解决了这个问题：

```
netsh advfirewall firewall add rule name="Apache CouchDB" dir=in action=allow service=any enable=yes profile=any localport=5984 protocol=tcp 
```

# postgresql - 在 psql 中输入命令时总是会出错，但如果我复制过去的命令则不会

> ID：15029821
> 
> 赞同：1
> 
> 时间：2013-02-22T17:21:51.940
> 
> 标签：postgresql, terminal, copy, paste, psql

每次我在 psql 中键入命令时都会引发错误，但如果我复制并粘贴完全相同的命令，它就会起作用。例如，我输入了这个：

```
# GRANT ALL PRIVILEGES ON DATABASE db_name TO user; 
```

并得到：

```
ERROR:  syntax error at or near "GRANT"
LINE 2: GRANT ALL PRIVILEGES ON DATABASE db_name TO user;
        ^ 
```

然后我在新行上进行了复制/粘贴：

```
# GRANT ALL PRIVILEGES ON DATABASE db_name TO user; 
```

它奏效了：

```
GRANT 
```

以上内容是从终端完全复制的，仅更改了 db_name 和用户。

每次我尝试输入命令时都会发生这种情况。使用 Heroku 的 10.8.2 和 PostgresApp。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:55:23.460

亩太短在评论中回答了这个问题。我确实只是忘记添加分号然后重新输入命令。似乎每次都在发生这种情况，因为我只使用 psql 大约一个小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-28T14:57:07.057

就我而言，发生了同样的错误，但最后有一个分号，我不得不引用如下参数：

```
sudo -u root psql -c "GRANT ALL PRIVILEGES ON DATABASE \"my_database\" TO \"my_database_user\";" 
```

我也可以通过 pgAdmin/Database Properties/Security Tab/ 验证这一点

# java - 如何使用 Maven 在 jar 的子文件夹中创建具有依赖项的可执行 jar？

> ID：15029824
> 
> 赞同：0
> 
> 时间：2013-02-22T17:22:12.193
> 
> 标签：java, spring, maven

如何使用 Maven 在 jar 的子文件夹中创建具有依赖项的可执行 jar？

下面的 pom.xml 将在根目录中创建一个包含依赖项的可执行 jar，但是如果我想要 jar 中的子文件夹中的所有依赖项怎么办，这样如果其他人想要查看 jar 就很容易了。如何更改以下 pom.xml 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.xxxx</groupId>
    <artifactId>DRBP</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>DRBP</name>

    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <java-version>1.7</java-version>
        <springframework-version>3.2.1.RELEASE</springframework-version>
    </properties>

    <dependencies>

             <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${springframework-version}</version>
        </dependency>
<!--
     <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${springframework-version}</version>
        </dependency>
-->

<dependency>
    <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
            <version>${springframework-version}</version>
            </dependency>

<dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>

        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.5</version>
        </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <dependency>
            <groupId>net.sf.jt400</groupId>
            <artifactId>jt400-full</artifactId>
            <version>4.7.0</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <finalName>DRBP</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-assembly-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>attached</goal>
                        </goals>
                        <phase>package</phase>
                        <configuration>
                            <descriptorRefs>
                                <descriptorRef>jar-with-dependencies</descriptorRef>
                            </descriptorRefs>
                            <archive>
                                <manifest>
                                    <mainClass>org.xxxx.batch.MainBatch</mainClass>
                                </manifest>
                            </archive>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:39:48.880

你想看看[**Maven Shade**](http://maven.apache.org/plugins/maven-shade-plugin/)插件。

如果你想要一个完整的 web 应用程序在一个 jar 中有几个选项：

*   做[DropWizard](http://dropwizard.codahale.com/getting-started/#building-fat-jars)所做的事情，这是一个示例 maven shade + jetty。
*   Tomcat[版本+2 Maven插件](http://tomcat.apache.org/maven-plugin-2.0/executable-war-jar.html)
*   [温斯顿](http://winstone.sourceforge.net/#embedding)

# javascript - 在表数据上添加/删除类 onclick

> ID：15029825
> 
> 赞同：0
> 
> 时间：2013-02-22T17:22:15.170
> 
> 标签：javascript, css, addclass, removeclass

我想为一个表格单元格添加一个类，该类与单击或选择单元格时的悬停颜色相匹配。

我有这个javascript（目前不起作用）：

```
$('#tblContainer').click(function() {
    var $this = $(this);

    // Remove highlight
    $this.closest("tr").find("td.guidelines").removeClass("guidelines");

    // Add it to this one
    $this.closest("td").addClass("guidelines2");
}); 
```

使用这 3 个主要课程（指南、指南 2-我希望它更改为的课程和指南：悬停）：

```
table.rubrictable td.guidelines {
    background: #FFF; 
    padding: 6px;
    text-align:left;
    color:#666666;
    font-size:9pt;
    font-style:plain;
    border-right: 1px solid #eeeeee;
    border-left: 1px solid #eeeeee;
    border-bottom: 2px solid #666666;
    width:150;
    background: #FFF; 
    background: -moz-linear-gradient(left top , #E6E6E6, #FFF); 
    background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,#E6E6E6), color-stop(100%,#FFF));
}
table.rubrictable td.guidelines2 {
    background: #3C0; 
    padding: 6px;
    text-align:left;
    color:#666666;
    font-size:9pt;
    font-style:plain;
    border-right: 1px solid #eeeeee;
    border-left: 1px solid #eeeeee;
    border-bottom: 2px solid #666666;
    width:150;
}
table.rubrictable td.guidelines:hover {
    background:#3C0;
} 
```

这是我的html：

```
<table width="100%" border="0" cellspacing="0" cellpadding="0" id="tblContainer" class="rubrictable">
    <th class="dimensionstitle">ROWS (Dimensions)</th>
    <th class="level">Delicious<br />
      4</th>
    <th class="level">Good<br />
      3</th>
        <th class="level">Needs Improvement<br /
          2</th>
        <th class="level">Poor <br />
          1<a href="#" title="Remove this performance level."></a>
          </th>
        <th class="dimensionstitle">COMMENTS</th>
        </tr>
  <tr>
    <td class="dimensions" nowrap="nowrap">Number of Chips

      &nbsp;</td>
    <td class="guidelines">Chocolate chip in every bite</td>
    <td class="guidelines">Chips in about 75% of bites</td>
    <td class="guidelines">Chips in about 50% of bites</td>
    <td class="guidelines"Too few or too many chips</td>
    <td class="dimensions"><img src="Icons/edit-green.gif" width="16" height="16" /></td>
    </tr>
  <tr>
    <td class="dimensions">Texture&nbsp;</td>
    <td class="guidelines">Chew</td>
    <td class="guidelines">Chewy in middle, crisp on edges</td>
    <td class="guidelines">Texture either crispy/crunchy or 50% uncooked</td>
    <td class="guidelines">Texture resembles a dog biscuit</td>
    <td class="dimensions"><img src="Icons/edit-green.gif" width="16" height="16" /></td>
    </tr>
</table> 
```

你可以在我的[FIDDLE中看到一个例子](http://jsfiddle.net/Rja3n/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:29:32.040

正如 JacobM 所说，您需要在单元格上使用 td 。

`$('#tblContainer td').click(function() {`

但是，您的表格有一个类别，可用于您希望可选择的所有选项。这意味着您可以`#tblContainer .guidelines`改用。

`$('#tblContainer .guidelines').click`

我也相信这是你想要达到的目标：

[http://jsfiddle.net/sZenj/1/](http://jsfiddle.net/sZenj/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:27:28.023

您已将`click()`处理程序放在表本身上，因此当您这样做时`$this.closest("tr")`，它正在寻找一个元素，该元素是表的祖先（而不是子），并且是`tr`. 它不会找到它。

只需将点击声明更改为

```
$('#tblContainer td').click(function() { 
```

# cakephp - 路由带有命名参数的默认 URL

> ID：15029828
> 
> 赞同：0
> 
> 时间：2013-02-22T17:22:19.750
> 
> 标签：cakephp, routes, named-parameters

我想知道当 url 后面有一个命名的 arg 时如何正确路由默认控制器/动作。

IE：我想路由`http://www.server.com/mode:full`到`http://www.server.com/users/index/mode:full`

我试过`Router::connect ('/:mode', array('controller'=> 'users', 'action'=> 'index'));`了，但它不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:25:23.403

抱歉，它看起来独立于 CakePHP。事实上，这是 Windows 上的 Apache，它将“：”识别为逻辑驱动器，因此根本不路由正确的（至少是预期的）URL。

# javascript - jQuery 正则表达式匹配帮助（可选条件）

> ID：15029829
> 
> 赞同：2
> 
> 时间：2013-02-22T17:22:29.607
> 
> 标签：javascript, regex

我有类似的东西：

```
[@parameter='value'] 
```

和

```
[@parameter] 
```

我需要正则表达式来解析这两种情况，首先在第二个参数中返回参数和值

现在，我有类似的东西

```
"[@short-name='shorty']".match(/\[\@(.*)\=\'(.*)\'\]/) 
```

返回

```
["[@short-name='shorty']", "short-name", "shorty"] 
```

它很棒，但仅在第一种情况下，请帮助

**编辑：**

我只是想可能两个匹配可以被一个替换，所以如果可能的话，对当前解决方案进行一点扩展将会很棒。

匹配类似的东西：

```
PARENT//CHILD[@parameter='value'] 
```

或者

```
PARENT//CHILD[@parameter] 
```

或者

```
PARENT//CHILD 
```

应该返回

```
[ parent, child, parameter, value ]

[ parent, child, parameter ]

[ parent, child ] 
```

非常感谢！

**编辑2：**

好吧这很容易

```
/([A-Z]+)\/\/([A-Z]+)(\[@([^=\]]*)(?:='(.*)'])?)?/ 
```

如果可以更容易地做到这一点，请告诉我如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:31:40.660

这将适用于您的一般情况：

```
/\[@([^=\]]*)(?:='(.*)'])?/ 
```

我删除了很多你正在做的不必要的逃避。该*值*在括号中（由于 未捕获`?:`），然后变为可选。`\[@.*`必须更改为，以便`\[@[^=\]]`它只会尝试捕获等号或右大括号（其中任何一个都可能存在）。

您还可以更新它以正确匹配引号，甚至省略它们

```
/\[@([^=\]]*)(?:=(['"]?)(.*)\2])?/ 
```

编辑：您还可以使用类似的表达式匹配每行的多个值；只需添加`.*?`以获取价值。

```
"[@short-name='shorty'] [@long-name=\"longy\"] [@longest]".replace(
    /\[@([^=\]]*)(?:=(['"]?)(.*?)\2])?/g,
function () { console.log(arguments[1], arguments[3]); }) 
```

这将产生`"short-name, shorty", "long-name longy", "longest undefined"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:27:44.220

让第二部分是可选的。放置一些空间以获得最佳视野。

```
"[@short-name]".match(/\[\@(.*)   (\=\'(.*)\')?    \]/) 
```

用括号包装代码并添加 a`?`就可以了。 [http://metahtml.sourceforge.net/documentation/regex/regex_3.mhtml#SEC14](http://metahtml.sourceforge.net/documentation/regex/regex_3.mhtml#SEC14)

# php - 仅在重新发布表单 php 后刷新时才会发生更改

> ID：15029830
> 
> 赞同：0
> 
> 时间：2013-02-22T17:22:33.553
> 
> 标签：php, forms, session, post

我有一个用户发布表单的页面。它在`php`。

如果用户已经登录，则不会显示该表单。如果用户未登录，则显示该表单。

现在，当用户第一次访问该站点时，会显示该表单。然后他填写表格并将`submits`其作为`POST`。成功登录后，他将被重定向到同一页面。

问题是，在被重定向到同一页面后，表单仍然可见。但是，如果我刷新它，表格就会消失。

如何更改/修改以实现我想要的。

我不知道提供我的代码是否会有所帮助。不过，根据 SO，我附上了我的基本代码：

```
 if(!isset($_SESSION['id'])){
    //show form
    <form action="" method="post">
        <br><button class="lfloat" type="submit" id="submit" value="register0" name="submit">Register</button><br><br>
    </form>
    <?php if(isset($_POST['submit'])&&$_POST['submit']=='register0'){
        //do all the insertion of data into database here only.
        ....
        ....
        echo "Success!!";
    }
}
if(isset($_SESSION['id'])){
    //don't show form

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:42:23.483

This is how I'd do it:

```
<?php $hideForm = isset($_SESSION['id']); ?>

<form action="" method="post" style="<?= $hideForm ? 'display:none;' : '' ?>" >
... 
```

or even more concisely:

```
<form action="" method="post" style="<?= isset($_SESSION['id']) ? 'display:none;' : '' ?>" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:37:41.467

就像是

```
 if(isset($_POST['submit'])&&$_POST['submit']=='register0'){
        //do all the insertion of data into database here only.
        ....
        ....
        echo "Success!!";
$_SESSION['id'] = 'some value';
header(Location: 'yourForm.php');
exit;

    } 
```

应该为你工作......也不要忘记写

```
session_start(); 
```

在 form.php 的顶部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-24T10:04:19.180

嗯，确实你把ID存到数据库里了，但是我没看到你重新加载页面，所以`SESSION`保存ID后它就没有了。

您可以在`<form action="pageURL.php?action=save">`保存新信息后执行此操作，但随后可能需要进行切换并通过查询字符串传递一个操作，以便帖子不会在刷新时重新提交。我们的想法是使用这种模式：[Post/Redirect/Get](https://en.wikipedia.org/wiki/Post/Redirect/Get)。然后您的页面将如下所示：

```
$action = filter_input(INPUT_GET, 'action', FILTER_SANITIZE_STRING);

switch ($action) {
    case 'save':
        //Do your the registration and then
        header('Location:YourPagePath.php?action=saved');
        break;
    case 'save':
        /*FALL TRHOUGH*/
    default:
        //The rest of the page code
        break;
} 
```

此外，在成功登录后，快速但不是那么好的解决方案将是：

```
echo '<script>
    alert("Save successful");
    location.href="YourPagePath.php"
</script>';
exit; 
```

# arrays - 树枝对象数组

> ID：15029831
> 
> 赞同：0
> 
> 时间：2013-02-22T17:22:34.493
> 
> 标签：arrays, object, symfony, methods, twig

我正在做一个 symfony2 项目。

我从我的控制器发送到 twig，一个对象数组的数组。
我的数组设置得很好，并得到了我想要的值。

但是当我尝试在树枝上访问这些数据时，我不能......
我的树枝看起来像`{{ myarray.1.0.getFichier() }}`

但是，twig 没有`getFichier`调用`myarray.1.0`.

这是树枝对我的回应：`Item "getFichier" for "Array" does not exist in CDUserBundle:Prof:edit_session.html.twig at line 74`

编辑： dump(myarray.1.0) 什么也不显示， dump(myarray) 什么也不显示。但是 dump() 显示一个空白页...

编辑²：这是我的控制器

```
return $this->render('CDUserBundle:Prof:edit_session.html.twig', array(
            'erreur' => $erreur,'message' => $message,
            'title' => 'C# | Editer session',
            'description' => 'keywords description',
            'sessionInfo' => $sessionInfo,
            'sessionFull' => $sessionFull,
            'documents' => $documents,
            'videos' => $videos,
            'a' => 'showForm',
            'vidName' => $videos[0]->getName(),
            'vidDMCId'=>$videos[0]->getDMCId(),
            'session' => $form->createView(),
            'partPath' => $documents[0]->getFichier()
        )); 
```

我的数组是 $documents 或 $videos 这是我创建数组的时候

```
 $videos=array();
    if($sessionFull[0]['sess_vid_id']!=NULL) {
        if($em->getRepository('CD\ConfigBundle\Entity\Video')->findOneById($sessionFull[0]['sess_vid_id']))
            array_push($videos,$em->getRepository('CD\ConfigBundle\Entity\Video')->findOneById($sessionFull[0]['sess_vid_id']));
        else
            array_push($videos,new Video());
        }
    else
        array_push($videos,new Video());
    for($i=0;$i<4;$i++) {
        if($sessionFull[$i]['coursVidId']!=NULL) {
            $vids=array();
            $vidsId=explode(',',$sessionFull[$i]['coursVidId']);
            foreach($vidsId as $vidId) {
                if($em->getRepository('CD\ConfigBundle\Entity\Video')->findOneById($vidId))
                    array_push($vids,$em->getRepository('CD\ConfigBundle\Entity\Video')->findOneById($vidId));
                else
                    array_push($vids,new Video());
            }
            array_push($videos,$vids);
        }
        else
            array_push($videos,array(new Video()));
    }

    $documents=array();
    if($sessionFull[0]['sess_doc_id']!=NULL) {
        if($em->getRepository('CD\ConfigBundle\Entity\Document')->findOneById($sessionFull[0]['sess_doc_id']))
            array_push($documents,$em->getRepository('CD\ConfigBundle\Entity\Document')->findOneById($sessionFull[0]['sess_doc_id']));
        else
            array_push(new Document());
    }
    else
        array_push($documents,new Document());
    for($i=0;$i<4;$i++) {
        if($sessionFull[$i]['coursDocId']!=NULL) {
            $docs=array();
            $docsId=explode(',',$sessionFull[$i]['coursDocId']);
            foreach($docsId as $docId) {
                if($em->getRepository('CD\ConfigBundle\Entity\Document')->findOneById($docId))
                    array_push($docs,$em->getRepository('CD\ConfigBundle\Entity\Document')->findOneById($docId));
                else
                    array_push($docs,new Document());
            }
            array_push($documents,$docs);
        }
        else
            array_push($documents,array(new Document()));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T18:37:15.110

直接使用 {{ myarray.1.0.Fichier }}

# javascript - Backbone Collection Fetch 和请求的形式

> ID：15029838
> 
> 赞同：0
> 
> 时间：2013-02-22T17:22:55.753
> 
> 标签：javascript, jquery, backbone.js, backbone.js-collections

我有一个骨干收藏

```
var Stuff = Backbone.Collection.extend({
    url: "stuff/" 
    model: StuffModel
}); 
```

我还有一个 id 数组：

> var ids = [ 1, 2, 3, 4 ];

根据文档，我在 Stuff 上调用 fetch，如下所示：

> this.collection.fetch( { $.param({ ids : exercise_ids.join( "," )})});

这会向表单的服务器发送一个请求：

> /stuff/?ids=1,2,3,4

这可行，但我对请求的形式不满意。有没有办法可以使用以下形式发送请求（即不使用查询字符串）

> /东西/1,2,3,4

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:51:42.677

假设您在执行 /stuff/[param] 时后端将 [param] 视为 id，那么功能上没有区别。这些请求是在幕后发出的，不会影响浏览器的地址栏，所以这里没有任何问题。如果要格式化 url，可以将 url 定义为 Backbone Collection 中的函数

```
var Stuff = Backbone.Collection.extend({

    initialize: function(models, options) {
        this.ids = options.ids

        //bind functions to 'this' so that you can access ids
        _.bind(this, 'setIds', 'url');
    },

    setIds: function(ids) {
        this.ids = ids;
        //return 'this' to allow chaining
        return this;
    },

    url: function() {
        return 'stuff/' + this.ids.join(',')
    }
});

myCollection.setIds([1,2,3,4]).fetch() 
```

# c# - 用 c# 绘制一个矩阵

> ID：15029842
> 
> 赞同：0
> 
> 时间：2013-02-22T17:23:00.233
> 
> 标签：c#

是否可以在 C# 中绘制矩阵？目前我正在程序中制作一个 M 文件并在 MATLAB 中打开它，然后在 MATLAB 图形中使用：

```
surface (T)
shading interp 
```

注意 T 是我的矩阵。情节看起来像： [图形图像](http://i.stack.imgur.com/2vGtn.jpg)

是否可以用 c# 绘制这样的图形？我的程序在控制台中。

编辑：有没有在任何地方绘制矩阵开始的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:27:45.367

回答你的问题：是的，这是可能的。

几点考虑：

*   将您的应用程序切换到 WinForms
*   确保您的矩阵在 C# 应用程序中有意义，这意味着它是可接受颜色的矩阵
*   您可能必须使用控件的[画布进行绘制](http://msdn.microsoft.com/en-us/library/system.windows.controls.canvas.aspx)

玩得开心！

# haskell - 我如何理解“(.) . (.)”？

> ID：15029843
> 
> 赞同：36
> 
> 时间：2013-02-22T17:23:02.820
> 
> 标签：haskell, functional-programming, pointfree

我相信我对`fmap . fmap`Functor 有所了解，但在功能上，这几个月来一直让我头疼。

我已经看到您可以只应用`(.)`to的定义`(.) . (.)`，但我忘记了如何做到这一点。
当我自己尝试时，结果总是错误的：

```
(.) f g = \x -> f (g x)
(.) (.) (.) = \x -> (.) ((.) x)
\x f -> (.) ((.) x) f
\x f y  -> (((.)(f y)) x)
\x f y g-> (((.)(f y) g) x)
\x f y g-> ((f (g y)) x)
\x f y g-> ((f (g y)) x):: t2 -> (t1 -> t2 -> t) -> t3 -> (t3 -> t1) -> t 
```

如果“仅应用定义”是这样做的唯一方法，那么有人是怎么想出的`(.) . (.)`？
我必须缺少一些更深层次的理解或直觉。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-22T18:12:02.663

想出`(.) . (.)`实际上非常简单，它所做的事情背后的直觉很难理解。

`(.)``|`在将表达式重写为“管道”样式计算（想想在 shell 中）时让你走得很远。但是，一旦您尝试将一个接受多个参数的函数与一个只接受一个参数的函数组合在一起，使用起来就会变得很尴尬。例如，让我们定义`concatMap`：

```
concatMap :: (a -> [b]) -> [a] -> [b]
concatMap f xs = concat (map f xs) 
```

摆脱`xs`只是一个标准的操作：

```
concatMap f = concat . map f 
```

但是，没有摆脱`f`. 这是由一个事实引起的，它`map`需要两个参数，我们想应用`concat`它的最终结果。

您当然可以应用一些无点技巧并摆脱困境`(.)`：

```
concatMap f = (.) concat (map f)
concatMap f = (.) concat . map $ f
concatMap = (.) concat . map
concatMap = (concat .) . map 
```

但是很可惜，这段代码的可读性几乎没有了。相反，我们引入了一个新的组合器，它完全符合我们的需要：将第二个函数应用于第一个函数的*最终结果*。

```
-- .: is fairly standard name for this combinator
(.:) :: (c -> d) -> (a -> b -> c) -> a -> b -> d
(f .: g) x y = f (g x y)

concatMap = concat .: map 
```

好吧，这就是动力。让我们开始点免费业务。

```
(.:) = \f g x y -> f (g x y)
     = \f g x y -> f ((g x) y)
     = \f g x y -> f . g x $ y
     = \f g x   -> f . g x 
```

现在，有趣的部分来了。这是另一个在您遇到困难时通常会有所帮助的无点技巧：我们将`.`其重写为前缀形式并尝试从那里继续。

```
 = \f g x   -> (.) f (g x)
     = \f g x   -> (.) f . g $ x
     = \f g     -> (.) f . g
     = \f g     -> (.) ((.) f) g
     = \f       -> (.) ((.) f)
     = \f       -> (.) . (.) $ f
     =             (.) . (.) 
```

至于直觉，你应该阅读这篇[非常好的文章。](http://conal.net/blog/posts/semantic-editor-combinators)我将解释以下部分`(.)`：

让我们再想想我们的组合器应该做什么：它应该应用于`f`结果*的*结果*（*我`g`一直在故意使用*最终结果*，当你完全应用时，这真的是你得到的 - 模统一类型变量与另一个函数类型 -`g`函数，这里的*结果*只是`g x`一些应用程序`x`）。

应用于*结果*`f`对我们意味着什么？好吧，一旦我们应用了某个值，我们就会把结果应用到它上面。听起来很熟悉：就是这样。*`g``g``f``(.)`*

 *```
result :: (b -> c) -> ((a -> b) -> (a -> c))
result = (.) 
```

现在，事实证明这些组合器的组合（我们*的*单词）只是一个函数组合，即：

```
(.:) = result . result -- the result of result 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-22T18:38:32.313

您也可以使用您对`fmap . fmap`.

如果你有两个`Functor`s`foo`和`bar`，那么

```
fmap . fmap :: (a -> b)  ->  foo (bar a)    ->   foo (bar b) 
```

`fmap . fmap``Functor`接受一个函数并为两个s的合成产生一个诱导函数.

现在，对于任何类型`t`,`(->) t`是 a `Functor`，而`fmap`for that`Functor`是`(.)`。

对于两个s 是`(.) . (.)`and的情况也是如此，因此`fmap . fmap``Functor``(->) s``(->) t`

```
(.) . (.) :: (a -> b) -> ((->) s) ((->) t a) -> ((->) s) ((->) t b)
          =  (a -> b) -> (s -> (t -> a))     -> (s -> (t -> b))
          =  (a -> b) -> (s ->  t -> a )     -> (s ->  t -> b ) 
```

它“组合”了`f :: a -> b`一个具有两个参数的函数的函数`g :: s -> t -> a`，

```
((.) . (.)) f g = \x y -> f (g x y) 
```

该观点还清楚地表明，该模式以及如何扩展到接受更多参数的函数，

```
(.)             :: (a -> b) -> (s ->           a) -> (s ->           b)
(.) . (.)       :: (a -> b) -> (s -> t ->      a) -> (s -> t ->      b)
(.) . (.) . (.) :: (a -> b) -> (s -> t -> u -> a) -> (s -> t -> u -> b) 
```

等等

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-22T17:59:29.383

当您引入`y`. 它应该是

```
\x f y -> ((.) ((.) x) f) y     :: (c -> d) -> (a -> b -> c) -> a -> b -> d
\x f y z -> ((.) ((.) x) f) y z :: (c -> d) -> (a -> b -> c) -> a -> b -> d
\x f y z -> ((.) x (f y)) z     :: (c -> d) -> (a -> b -> c) -> a -> b -> d
-- Or alternately:
\x f y z -> (x . f y) z         :: (c -> d) -> (a -> b -> c) -> a -> b -> d
\x f y z -> (x (f y z))         :: (c -> d) -> (a -> b -> c) -> a -> b -> d 
```

与原始类型签名匹配：`(.) . (.) :: (c -> d) -> (a -> b -> c) -> a -> b -> d`

（在 ghci 中进行扩展是最简单的，您可以在其中检查每个步骤`:t expression`）

**编辑：**

更深层次的直觉是：

`(.)`被简单地定义为

```
\f g -> \x -> f (g x) 
```

我们可以简化为

```
\f g x -> f (g x) 
```

因此，当您为其提供两个参数时，它会被柯里化，并且仍然需要另一个参数来解决。每次使用`(.)`2 个参数时，都会为另一个参数创建一个“需要”。

`(.) . (.)`当然只是`(.) (.) (.)`，所以让我们扩展它：

```
(\f0 g0 x0 -> f0 (g0 x0)) (\f1 g1 x1 -> f1 (g1 x1)) (\f2 g2 x2 -> f2 (g2 x2)) 
```

`f0`我们可以对and进行 beta-reduce `g0`（但我们没有`x0`！）：

```
\x0 -> (\f1 g1 x1 -> f1 (g1 x1)) ((\f2 g2 x2 -> f2 (g2 x2)) x0) 
```

将第二个表达式替换为`f1`...

```
\x0 -> \g1 x1 -> ((\f2 g2 x2 -> f2 (g2 x2)) x0) (g1 x1) 
```

现在它“倒转”了！(beta-reduction on `f2`)：
这是一个有趣的步骤 -`x0`被替换`f2`- 这意味着`x`原本可能是数据的 ，而是一个函数。
*这*就是`(.) . (.)`提供额外参数的“需要”。

```
\x0 -> \g1 x1 -> (\g2 x2 -> x0 (g2 x2)) (g1 x1) 
```

这开始看起来很正常......让我们最后一次（on `g2`）进行beta-reduce：

```
\x0 -> \g1 x1 -> (\x2 -> x0 ((g1 x1) x2)) 
```

所以我们只剩下简单的

```
\x0 g1 x1 x2 -> x0 ((g1 x1) x2) 
```

，其中论点仍然井然有序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-22T18:02:18.210

最简单的方法是写*equations*，[combinators-style](http://en.wikipedia.org/wiki/B,C,K,W_system)，而不是 lambda-expressions:`a b c = (\x -> ... body ...)`等价于`a b c x = ... body ...`，反之亦然，前提是`x`没有出现在`{a,b,c}`. 所以，

```
-- _B = (.)  

_B f g x = f (g x)
_B _B _B f g x y = _B (_B f) g x y
                 = (_B f) (g x) y
                 = _B f (g x) y
                 = f ((g x) y)
                 = f (g x y) 
```

`f (g x y)`如果你想将它[转换为组合形式](http://en.wikipedia.org/wiki/Combinatory_logic)（去掉所有括号和变量重复） ，你会发现这一点。然后你应用与组合器的定义相对应的模式，希望向后追溯这个推导。不过，这要少得多机械/自动。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-22T17:58:09.077

所以，这就是我进行稍微增量扩展时得到的结果

```
(.) f g   = \x -> f (g x)
(.) . g   = \x -> (.) (g x)
          = \x -> \y -> (.) (g x) y
          = \x -> \y -> \z -> (g x) (y z)
          = \x y z -> (g x) (y z)
(.) . (.) = \x y z -> ((.) x) (y z)
          = \x y z -> \k -> x (y z k)
          = \x y z k -> x (y z k) 
```

其中，根据 ghci 具有正确的类型

```
Prelude> :t (.) . (.)
(.) . (.) :: (b -> c) -> (a -> a1 -> b) -> a -> a1 -> c
Prelude> :t \x y z k -> x (y z k)
\x y z k -> x (y z k)
  :: (t1 -> t) -> (t2 -> t3 -> t1) -> t2 -> t3 -> t
Prelude> 
```

虽然我不知道这个组合器的起源，但它很可能是为组合逻辑而开发的，在组合逻辑中你严格使用组合器，所以你不能使用更方便的 lambda 表达式来定义事物。可能有一些直觉可以解决这些问题，但我还没有找到。最有可能的是，如果你必须做得足够多，你会发展出某种程度的直觉。*

# functional-programming - 为什么OCaml有两个排序函数：List.sort和List.stable_sort？

> ID：15029848
> 
> 赞同：2
> 
> 时间：2013-02-22T17:23:25.033
> 
> 标签：functional-programming, ocaml

这是文档：

* * *

```
val sort : ('a -> 'a -> int) -> 'a list -> 'a list 
```

根据比较函数对列表进行升序排序。如果参数比较相等，比较函数必须返回 0，如果第一个较大，则返回正整数，如果第一个较小，则返回负整数（请参阅 Array.sort 以获取完整规范）。例如， compare 是一个合适的比较函数。结果列表按升序排序。List.sort 保证在恒定堆空间（除了结果列表的大小之外）和对数堆栈空间中运行。

当前实现使用合并排序。它在恒定堆空间和对数堆栈空间中运行。

```
val stable_sort : ('a -> 'a -> int) -> 'a list -> 'a list 
```

与 List.sort 相同，但`the sorting algorithm is guaranteed to be stable`（即比较相等的元素保持其原始顺序）。

当前实现使用合并排序。它在恒定堆空间和对数堆栈空间中运行。

* * *

我想`merge sort`反正是稳定的，对吧？

OCaml 如何产生`non-stable merge`排序？

在`non-statble merge sort`版本中，它更快吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T17:28:21.953

归并排序是稳定的，但排序使用归并排序这一事实并不是其契约的一部分。请注意，它只说“当前实现使用......”。不能保证将来会继续使用合并排序，因此如果您`List.sort`在代码中使用，则无法保证排序会稳定，即使它在当前实现中可能碰巧是稳定的。

只要每个需要稳定排序的`stable_sort`代码都使用`sort`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:28:54.573

您需要将定义与实现分开。实现者保留更改实现的权利，并且非常小心和清楚地定义了函数的行为方式。

# php - 检测目录列表漏洞

> ID：15029849
> 
> 赞同：1
> 
> 时间：2013-02-22T17:23:31.583
> 
> 标签：php

我有这个链接[http://test.com/images/](http://test.com/images/)

我们可以使用PHP找出上面的目录是否存在“目录列表漏洞”退出。我尝试了以下代码。

```
 $contents = file_get_contents("http://test.com/images/");  
    preg_match_All("|href=[\"'](.*?)[\"']|", $contents, $hrefs);  
    var_dump($hrefs);  
    echo $contents; 
```

它返回我的目录列表，但也有可能该目录包含一些具有相同内容的索引页面，所以，处理这个问题的更好方法是什么。

# asp.net - ReportViewer 控件上的 ASP .net LocalReport 不为某些用户呈现

> ID：15029851
> 
> 赞同：0
> 
> 时间：2013-02-22T17:23:34.927
> 
> 标签：asp.net, .net, web-config, reportviewer

我正在处理的 ASP 页面有问题。为了安全起见，我有一个带有 web.config 的小站点。我添加了一个新页面并将其放在一个新文件夹中，这样我就可以创建一个不同的 web.config 并将一些额外的用户添加到允许的列表中（这样他们就只能查看这个页面）。工作正常，除了这个页面上有一个 ReportViewer 控件。控件本身将加载，但不会呈现本地报告。我在 aspx 页面所在的文件夹中有本地报告文件。当报表呈现时，它会再次请求身份验证几次，然后显示一个空白的白色 ReportViewer 控件。所以它必须与继承权有关，也许与报告数据源有关？也许本地报告的安全性与 web.config 不同？我遇到的问题是我不知道足够多的关键字来提出正确的问题。谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:29:52.690

我发现此[报告查看器 Web 控制版本 10 尽管设置正确但仍出现错误](https://stackoverflow.com/questions/8216186/report-viewer-web-control-version-10-gives-error-despite-set-up-correctly)

看起来我的问题是 ReportViewer 控件超出了我的主要授权列表的上下文。所以我只是在 web.config 中专门为这个控件创建了另一个授权列表。

```
<location path="Reserved.ReportViewerWebControl.axd"> 
    <system.web> 
        <authorization> 
            <allow users="*" /> 
        </authorization> 
    </system.web> 
</location> 
```

# c++ - Opencv：创建黑色窗口并向其写入文本

> ID：15029852
> 
> 赞同：1
> 
> 时间：2013-02-22T17:23:36.983
> 
> 标签：c++, opencv

有没有一种简单的方法来创建黑色图像文件并向其中写入文本？我试过简单地使用创建一个 Mat

`cv::Mat pic = cv::Mat::zeros(250,250,CV_8U)`

然后使用命令向其写入文本

`cv::putText(pic, "some text",cv::Point(50,50), CV_FONT_HERSHEY_SIMPLEX, 0.5, cv::Scalar(0,0,255,0),1,8,false);`

我需要不同的类型而不是`CV_8U`我的初始零矩阵吗？还是我在这里错过了其他东西？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:33:54.653

问题是您正在创建单通道图像，但用红色为文本着色。可能的解决方案：

1.  创建三通道矩阵
    `cv::Mat pic = cv::Mat::zeros(250,250,CV_8UC3)`

2.  或将文本颜色设置为白色
    `cv::putText(pic, "some text",cv::Point(50,50), CV_FONT_HERSHEY_SIMPLEX, 0.5, cv::Scalar(255),1,8,false);`

# java - Hadoop：Mapreduce - 数据总和 (Java)

> ID：15029856
> 
> 赞同：0
> 
> 时间：2013-02-22T17:23:53.477
> 
> 标签：java, hadoop, count, mapreduce

使用我的 mapreduce 作业后，这是输出：

```
User16565   Logins: 1   Orders:1
User16566   Logins: 2   Orders:2
User16567   Logins: 1   Orders:1 
```

一切看起来都很棒，但是当日志文件有数千个条目时，它并不是很有帮助。有没有办法改变我的代码来总结“登录”和“订单”，这样我就可以计算出差异？

**编辑：新问题/问题**

日志示例：

```
2013-01-01T08:48:09.009+0100,feature:login,-,User73511,-,-,-,-
2013-01-01T03:58:05.005+0100,feature:order-created,-,User73511,-,-,-,-
2013-01-01T01:26:30.030+0100,feature:login,-,User14253,-,-,-,-
2013-01-01T19:45:01.001+0100,feature:order-created,-,User73511,-,-,-,- 
```

我在我的代码中发现了一个错误。我意识到登录和订单计数不正确。起初看起来输出是正确的，但是当我手动检查登录名和订单时，我意识到有一个错误。输出：

```
User73511   Logins: 3   Orders:2
User14253   Logins: 1   Orders:1 
```

应该：

```
User73511   Logins: 1   Orders:2
User14253   Logins: 1   Orders:0 
```

这是整个代码：

```
public class UserOrderCount {

    public static class SingleUserMapper extends
            Mapper<LongWritable, Text, Text, CountInformationTuple> {

        private Text outUserId = new Text();
        private CountInformationTuple outCountOrder = new CountInformationTuple();

        @Override
        public void map(LongWritable key, Text value, Context context)
                throws IOException, InterruptedException {

            String tempString = value.toString();
            String[] singleUserData = tempString.split(",");
            String userId = singleUserData[3];
            String featureId = singleUserData[1];

        if (featureId.contains("feature:order-created")) {
                outCountOrder.setCountOrder(1);
        }
        if (featureId.contains("feature:login")) {
                outCountOrder.setCountLogin(1);
        }

            outUserId.set(userId);
            context.write(outUserId, outCountOrder);
        }
    }

    public static class SingleUserReducer extends
            Reducer<Text, CountInformationTuple, Text, CountInformationTuple> {

        private CountInformationTuple result = new CountInformationTuple();

        public void reduce(Text key, Iterable<CountInformationTuple> values,
                Context context) throws IOException, InterruptedException {

            int login = 0;
            int order = 0;

            for (CountInformationTuple val : values) {
                login += val.getCountLogin();
                order += val.getCountOrder();
            }

            result.setCountLogin(login);
            result.setCountOrder(order);

            context.write(key, result);
        }
    }

    public static void main(String[] args) throws Exception {
        Configuration conf = new Configuration();
        String[] otherArgs = new GenericOptionsParser(conf, args)
                .getRemainingArgs();
        if (otherArgs.length != 2) {
            System.err.println("Usage: UserOrderCount <in> <out>");
            System.exit(2);
        }

        Job job = new Job(conf);
        job.setJobName("UserOrderCount");
        job.setJarByClass(UserOrderCount.class);

        job.setMapperClass(SingleUserMapper.class);
        job.setCombinerClass(SingleUserReducer.class);
        job.setReducerClass(SingleUserReducer.class);

        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(CountInformationTuple.class);

        FileInputFormat.addInputPath(job, new Path(otherArgs[0]));
        FileOutputFormat.setOutputPath(job, new Path(otherArgs[1]));
        System.exit(job.waitForCompletion(true) ? 0 : 1);
    }

    public static class CountInformationTuple implements Writable {
        private int countOrder = 0;
        private int countLogin = 0;

        public int getCountOrder() {
            return countOrder;
        }

        public void setCountOrder(int order) {
            this.countOrder = order;
        }

        public int getCountLogin() {
            return countLogin;
        }

        public void setCountLogin(int login) {
            this.countLogin = login;
        }

        @Override
        public void readFields(DataInput in) throws IOException {
            countOrder = in.readInt();
            countLogin = in.readInt();

        }

        @Override
        public void write(DataOutput out) throws IOException {
            out.writeInt(countLogin);
            out.writeInt(countOrder);

        }

        @Override
        public String toString() {
            return "Logins: "+ countLogin + "\t" + "Orders:" + countOrder;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:23:31.167

对于感兴趣的人：解决了我的“错误输出”错误。

```
public void map(LongWritable key, Text value, Context context)
            throws IOException, InterruptedException {

        String tempString = value.toString();
        String[] stringData = tempString.split(",");

        String userID = stringData[3];
        String featureID = stringData[1];

        int login = 0;
        int order = 0;

        if (featureID.matches("feature:login")) {
            login++;
        } else if (featureID.matches("feature:order-created")) {
            order++;
        }

        outUserID.set(userID);
        outUserCount.set(login, order);

        context.write(outUserID, outUserCount);

    }

public static class UserCountTuple implements Writable {

        private IntWritable countLogin;
        private IntWritable countOrder;

        public UserCountTuple() {
            set(new IntWritable(0), new IntWritable(0));
        }

        public void set(int countLogin, int countOrder) {
            this.countLogin.set(countLogin);
            this.countOrder.set(countOrder);
        }

        public void set(IntWritable countLogin, IntWritable countOrder) {
            this.countLogin = countLogin;
            this.countOrder = countOrder;
        }

        @Override
        public void readFields(DataInput in) throws IOException {
            countLogin.readFields(in);
            countOrder.readFields(in);

        }

        @Override
        public void write(DataOutput out) throws IOException {
            countLogin.write(out);
            countOrder.write(out);

        }

        public IntWritable getLogin() {
            return countLogin;
        }

        public IntWritable getOrder() {
            return countOrder;
        }

        @Override
        public String toString() {
            return "Logins: " + countLogin + "\t" + "Orders:" + countOrder;
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T09:39:51.433

由于您希望获得单个文件作为结果，您可以配置 MapReduce 作业`jobConf.setNumReduceTasks(1)`以仅使用单个 reduce 任务，请参阅[JobConf JavaDoc](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/JobConf.html#setNumReduceTasks%28int%29)了解更多信息。

现在，您的唯一一个 reduce 任务获得了所有用户`login`的全部`order`信息。您可以在 reduce 任务中对所有已处理记录`login`的值求和，然后在[cleanup()](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/Reducer.html#cleanup%28org.apache.hadoop.mapreduce.Reducer.Context%29)`order`方法中输出求和值，该方法仅在处理单个 reduce 任务的所有输入记录后调用一次。示例代码：

```
public static class SingleUserReducer extends
        Reducer<Text, CountInformationTuple, Text, CountInformationTuple> {

    private CountInformationTuple result = new CountInformationTuple();
    private int login = 0;
    private int order = 0;

    public void reduce(Text key, Iterable<CountInformationTuple> values,
            Context context) throws IOException, InterruptedException {

        for (CountInformationTuple val : values) {
            login += val.getCountLogin();
            order += val.getCountOrder();
        }
    }

    public void cleanup(Context context) throws IOException, InterruptedException {
        result.setCountLogin(login);
        result.setCountOrder(order);

        context.write(new Text("total"), result);
    }
} 
```

您将获得一条记录作为输出，其总和为`login`和`order`。如果需要，您可以修改该`cleanup()`方法以计算差异和其他度量。

# javascript - 开发基于 Web 的侧滑菜单的最佳方式是什么？

> ID：15029858
> 
> 赞同：4
> 
> 时间：2013-02-22T17:24:25.107
> 
> 标签：javascript, jquery, css, html, twitter-bootstrap

我之前询问过开发基于[iOS 的侧滑菜单](https://stackoverflow.com/questions/7989020/whats-the-best-way-to-develop-a-sideswipe-menu-like-the-one-in-facebooks-new-i)。现在侧滑菜单已经成为标准的用户界面组件，它们开始转移到移动网络。Medium 是我见过的第一个在移动网络上成功提取此类菜单的工具之一（如下图所示）。我的问题是：在网络上实现这样的事情的最有效方法是什么？

![在此处输入图像描述](../Images/e18eb0b96cd6906e2fb9b8ff4652a780.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T17:53:21.320

我讨厌成为那个人只是放弃一个链接，但这里有一篇关于这个主题的很好的文章：http: [//coding.smashingmagazine.com/2013/01/15/off-canvas-navigation-for-responsive-网站/](http://coding.smashingmagazine.com/2013/01/15/off-canvas-navigation-for-responsive-website/)

它涵盖了带有动画的基于 Web 的菜单，并涵盖了平滑动画菜单的最佳实践。这篇文章非常详细，因此很难总结其内容。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:51:29.907

如果你不反对 jQuery Mobile，这可以很简单：

[http://view.jquerymobile.com/1.3.0/docs/examples/panels/panel-swipe-open.php](http://view.jquerymobile.com/1.3.0/docs/examples/panels/panel-swipe-open.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:46:36.837

这是我将如何处理它（当然这只是动画的一个例子，我省略了其他所有内容）：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
body, html {margin:0;padding:0;}
#iphone {width:320px; height:480px; overflow:hidden; border:solid black thin; display:block;}
#menu {position:fixed; top:1;left:-250px; width:250px; height:480px; display:block; background-color:#868686;}
#content {position:absolute; width:320px; background-color:#cccccc; display:block;}
</style>
</head>

<body>
<div id="iphone">
<div id="menu">I am a menu <button onclick="hideMenu();">close</button></div>
<div id="content">I am the site content, click this <button onclick="showMenu();">menu</button></div>
</div>
</body>
<script>
var m=document.getElementById('menu');
var c=document.getElementById('content');
function showMenu(){
    if(m.offsetLeft<0){
        m.style.left=(m.offsetLeft+10)+'px';
        c.style.left=(c.offsetLeft+10)+'px';
        setTimeout(showMenu,16)
    }

}
function hideMenu(){
    if(m.offsetLeft>-250){
        m.style.left=(m.offsetLeft-10)+'px';
        c.style.left=(c.offsetLeft-10)+'px';
        setTimeout(hideMenu,16)
    }

}
</script>
</html> 
```

# c - C编程中的字符输入

> ID：15029859
> 
> 赞同：1
> 
> 时间：2013-02-22T17:24:27.673
> 
> 标签：c

我有这个代码：

```
int p3_2_4()
{
    char cargo[100];

    printf("Valor: ");
    scanf("%s", cargo);

    if (cargo == "C")
        printf("Chefe");
    else if (cargo == "o")
        printf("operario");
    else if (cargo == "i")
        printf("inspetor");
    else if (cargo == "m")
        printf("mecanico");
    else
        printf("O valor inserido nao tem correspondencia.");

    return 0;
} 
```

我不知道如何使用char类型，我搜索了很多类型的char输入，但不幸的是我找不到我的答案。我希望你能澄清我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:29:03.210

`char[100]`is not a`char`它是一个字符*数组*（字符串）。如果要比较 C 中的字符串，可以使用头文件中的`strcmp(a, b)`or`strncmp(a, b, n)`函数。`string.h`

```
char name[] = "Hunter";

if(!strcmp(name, "Hunter")) // if the return value of strcmp is 0 
{
   puts("It's me!");
}
else
{
   puts("Not me.");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:57:41.457

“C”不是字符类型。证明：

```
printf("sizeof \"C\" == %zu\n", sizeof "C");
printf("sizeof (char) == %zu\n", sizeof (char)); 
```

相反，它是一种`const char[2]`类型；“C”是一个字符串文字。字符串文字转换为字符串，并且字符串由一个额外的`'\0'`字符终止。这解释了额外的字符。

如果您只打算使用输入中的一个字符，我认为您想要`getchar()`and `'C'`（它们是存储为 的无符号字符值`int`）而不是`scanf("%s", ...)`and 。`"C"`

```
int cargo = getchar();
if (cargo == 'C')
    puts("Chefe");
else if (cargo == 'o')
    puts("operario");
else if (cargo == 'i')
    puts("inspetor");
else if (cargo == 'm')
    puts("mecanico");
else
    puts("O valor inserido nao tem correspondencia."); 
```

对于阅读我们的一本好书的人来说，这个问题似乎很容易。你在看哪本书？在我看来，您似乎已经为 K&R 的“The C Programming Language”做好了准备。

# sql-server - 如何在 T-SQL 中将日期时间转换为字符串

> ID：15029860
> 
> 赞同：103
> 
> 时间：2013-02-22T17:24:34.303
> 
> 标签：sql-server, tsql

我很惊讶不能在这里找到这个问题。

我有一个日期时间变量，我想将其转换为字符串，以便可以将其附加到另一个字符串。我想要一种可以轻松转换回日期时间的格式。

我怎样才能做到这一点？

（我想要日期部分和时间部分。）

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-02-22T17:25:38.683

以下查询将获取当前日期时间并转换为字符串。具有以下格式
`yyyy-mm-dd hh:mm:ss(24h)`

```
SELECT convert(varchar(25), getdate(), 120) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/d41d8/9341)
*   [SQL Server 日期格式](http://www.sql-server-helper.com/tips/date-formats.aspx)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-02-22T17:26:04.593

有许多不同的方法来[`convert`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)a`datetime`到一个字符串。这是一种方法：

```
SELECT convert(varchar(25), getdate(), 121)  – yyyy-mm-dd hh:mm:ss.mmm 
```

看[演示](http://www.sqlfiddle.com/#!3/d41d8/9343)

这是一个包含所有转换列表的网站：

[如何在 SQL Server 中格式化日期时间和日期](http://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-02-19T03:42:16.230

根据我的要求和我使用的版本，有 3 种不同的方法。

以下是方法..

1) 使用转换

```
DECLARE @DateTime DATETIME = GETDATE();
--Using Convert
SELECT
    CONVERT(NVARCHAR, @DateTime,120) AS 'myDateTime'
    ,CONVERT(NVARCHAR(10), @DateTime, 120) AS 'myDate'
    ,RIGHT(CONVERT(NVARCHAR, @DateTime, 120),8) AS 'myTime' 
```

2) 使用 Cast (SQL Server 2008 及更高版本)

```
SELECT
    CAST(@DateTime AS DATETIME2) AS 'myDateTime'
    ,CAST(@DateTime AS DATETIME2(3)) AS 'myDateTimeWithPrecision'
    ,CAST(@DateTime AS DATE) AS 'myDate'
    ,CAST(@DateTime AS TIME) AS 'myTime'
    ,CAST(@DateTime AS TIME(3)) AS 'myTimeWithPrecision' 
```

3) 使用定长字符数据类型

```
DECLARE @myDateTime NVARCHAR(20) = CONVERT(NVARCHAR, @DateTime, 120);
DECLARE @myDate NVARCHAR(10) = CONVERT(NVARCHAR, @DateTime, 120);

SELECT
    @myDateTime AS 'myDateTime'
    ,@myDate AS 'myDate' 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-22T17:28:46.887

您可以使用`convert`Microsoft SQL Server 中的语句将日期转换为字符串。使用的语法示例如下：

```
SELECT convert(varchar(20), getdate(), 120) 
```

以上将以`YYYY-MM-DD HH:MM:SS`24 小时制格式的字符串返回当前日期和时间。

您可以将语句末尾的数字更改为多个之一，这将更改返回的字符串格式。可以在 MSDN 的[CAST 和 CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)参考部分中找到这些代码的列表。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-06-17T13:33:20.967

除了前面答案中的`CAST`and`CONVERT`函数之外，如果您使用的是 SQL Server 2012 及更高版本，则可以使用[FORMAT](https://msdn.microsoft.com/en-AU/library/hh213505.aspx)函数将`DATETIME`基于类型的类型转换为字符串。

要转换回来，请使用相反的`PARSE`or`TRYPARSE`函数。

格式化样式基于 .NET（类似于 ToString() 方法的字符串格式化选项），并且具有文化感知的优势。例如。

```
DECLARE @DateTime DATETIME2 = SYSDATETIME();
DECLARE @StringResult1 NVARCHAR(100) = FORMAT(@DateTime, 'g') --without culture
DECLARE @StringResult2 NVARCHAR(100) = FORMAT(@DateTime, 'g', 'en-gb') 
SELECT @DateTime
SELECT @StringResult1, @StringResult2
SELECT PARSE(@StringResult1 AS DATETIME2)
SELECT PARSE(@StringResult2 AS DATETIME2 USING 'en-gb') 
```

结果：

```
2015-06-17 06:20:09.1320951
6/17/2015 6:20 AM
17/06/2015 06:20
2015-06-17 06:20:00.0000000
2015-06-17 06:20:00.0000000 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-09-12T08:56:05.993

```
SELECT CONVERT(varchar, @datetime, 103) --for UK Date format 'DD/MM/YYYY' 
```

101 - 美国 - 月/日/年

108 - 时间 - HH:MI:SS

112 - 日期 - YYYYMMDD

121 - ODBC - YYYY-MM-DD HH:MI:SS.FFF

20 - ODBC - YYYY-MM-DD HH:MI:SS

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-22T17:28:17.260

检查 t-sql 的 CAST 和 CONVERT 语法：

[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-22T18:09:14.010

试试下面：

```
DECLARE @myDateTime DATETIME
SET @myDateTime = '2013-02-02'

-- Convert to string now
SELECT LEFT(CONVERT(VARCHAR, @myDateTime, 120), 10) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-01-23T20:30:06.830

很多人都回答了这个问题，但我觉得最简单的解决方案被遗漏了。

SQL SERVER（我相信它的 2012+）具有 DATETIME2 的隐式字符串等效项，如下[所示](https://docs.microsoft.com/en-us/sql/t-sql/data-types/datetime2-transact-sql?view=sql-server-2017)

查看“datetime2 支持的字符串文字格式”部分

要明确回答 OPs 问题：

```
DECLARE @myVar NCHAR(32)
DECLARE @myDt DATETIME2
SELECT @myVar = @GETDATE()
SELECT @myDt = @myVar
PRINT(@myVar)
PRINT(@myDt) 
```

输出：

```
Jan 23 2019 12:24PM             
2019-01-23 12:24:00.0000000 
```

注意：第一个变量 ( `myVar`) 实际上也保存了该值`'2019-01-23 12:24:00.0000000'`。由于`Jan 23 2019 12:24PM`SQL SERVER 的默认格式设置在您使用`PRINT`. 不要在这里被绊倒，`(myVer)`=中的实际字符串`'2019-01-23 12:24:00.0000000'`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-29T04:47:10.113

在我的存储过程中是这样的。

`convert(varchar(10), StartingDate) AS 'StartingDate'`

# git - git 不断添加一个符号链接目录，然后每隔一次我删除它 git add

> ID：15029861
> 
> 赞同：1
> 
> 时间：2013-02-22T17:24:34.890
> 
> 标签：git, symlink

我的文件夹结构是这样的：

我的来源

*   git 仓库
*   一些工作正常的文件夹
*   指向另一个文件夹的符号链接

我第一次添加：我运行`git add .`，它添加了它应该添加的所有东西。

第二次：我运行`git add .`并发现 git 已从其 repo 中删除了符号链接文件夹的内容。

第三次：我运行`git add .`并再次添加符号链接文件夹的内容。

然后一直交替。添加符号链接文件夹内容，删除它们，添加它们，删除它们。有任何想法吗？

# jquery - jQuery在单击时从主菜单添加活动类以链接子菜单

> ID：15029865
> 
> 赞同：0
> 
> 时间：2013-02-22T17:24:48.057
> 
> 标签：jquery

当单击主导航中的项目时，我正在尝试将活动类添加到子菜单（子导航）项目。目标是在单击主菜单项时突出显示子菜单项。子菜单项是指向页面部分的链接：

```
<div id="subnav">
  <ul>
    <li><a href="#adaptivetech">Adaptive Technology</a></li>
    <li><a href="#iepspecialed">IEP and Special Ed Forms</a></li>
    <li><a href="#behaviorplanning">Behavior Planning Forms</a></li>
    <li><a href="#npsnpainfo">NPS/NPA Information and Forms</a></li>
    <li><a href="#privateschoolref">Private School Referral for Assessment</a></li>
    <li><a href="#programtransfer">Program Transfer</a></li>
  </ul>
</div> 
```

这是主菜单的样子：

```
<ul class="sf-menu">
    <li><a href="newselpasite3.html">Home</a></li>
    <li><a href="#">Meetings/Workshops</a>
     <ul>
    <li><a href="#">Selpa Workshops</a></li>
      <li><a href="#">Selpa Committee Meeting for 2012-2013</a></li>
        <li><a href="#">Archived Agendas and Minutes</a></li>
              </ul></li>
    <li><a href="#" class="top_parent">Services</a>
    <ul>
    <li><a href="#">Adaptive Technology Center</a></li>
      <li><a href="#">Alternative Dispute Resolution</a></li>
        <li><a href="#">Autism Support</a></li>
          <li><a href="#">BEST Schoolwide Positive Behavior Support</a></li>
            <li><a href="#">Community Advisory Committee</a></li>
              <li><a href="#">Early Start Infant Program</a></li>
              </ul>
    </li>
    <li><a href="#" class="active">Forms</a>
    <ul>
      <li><a href="#adaptivetech">Adaptive Technology</a></li>
      <li><a href="#iepspecialed">All IEP and Special Education Forms</a></li>
       <li><a href="#behaviorplanning">Behavior Planning Forms</a></li>
       <li><a href="#npsnpainfo">NPS/NPA Information and Forms</a></li>
       <li><a href="#privateschoolref">Private School Referral for Assessment</a></li>
       <li><a href="#programtransfer">Program Transfer</a></li>
    </ul></li> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:35:05.097

可能是这样的：[**小提琴**](http://jsfiddle.net/QTYQD/)

```
$('ul li ul').find('li a').click(function(){
     var $this = $(this);
     $('a').removeClass('active');
     $this.addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T08:41:23.193

尝试跟随。

```
$('li').each(function(){
    if(window.location.href.indexOf($(this).find('a:first').attr('href'))>-1)
    {
    $(this).addClass('active').siblings().removeClass('active');
    }
}); 
```

# .net - 如何限制 F# 应用程序中可用的内核？更改进程的处理器亲和性是否足够？

> ID：15029869
> 
> 赞同：0
> 
> 时间：2013-02-22T17:25:18.633
> 
> 标签：.net, f#, clr

我想检查使用`MailboxProcessor<'T>`. 为此，我想通过首先在 1、2、4 等多核机器的核心上运行应用程序来测试应用程序。如何限制应用程序可用的逻辑处理器？

我知道我可以篡改处理器亲和性，但我会得到想要的结果吗？它们会反映在具有所需内核数的不同机器上运行应用程序吗？我担心`ThreadPool`和`TaskScheduler`: 它们会被正确配置还是会像没有限制一样行事？

# autohotkey - 创建以冒号结尾的 AutoHotkey 条目

> ID：15029870
> 
> 赞同：4
> 
> 时间：2013-02-22T17:25:26.853
> 
> 标签：autohotkey

我有一个奇怪的错字，我一遍又一遍地拼写，而不是真正练习我的打字技巧，我想编辑我的 AutoHotkey 脚本来弥补这一点。

有时当我输入大写字母时，`I`我按下 `:` 按钮并输入“I:”，我希望 AHK 只用字母替换那个字符串 `I`。

我已经有一个类似的热键

::customer::客户

但由于字符串使用冒号，我很难让它做我想做的事。

有任何想法吗？（看？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:10:30.050

是的！这是一种解决方法，但它有效......

```
#Hotstring EndChars :
:?O:I::I 
```

该行下方的任何内容`#Hotstring EndChars :`都将使用`:`作为 EndCharacter。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:05:11.170

不确定这是否对您有用`I``:``Space`，`I`但它需要`Space`.

```
:*:I`: ::I ; The `is the escape but with 3 ::: AutoHotKey still get's confused 
```

# c - 冒泡排序 - 如果您需要 n 次操作来对大小为 k 的列表进行排序，那么您大约需要多少次操作才能对大小为 2k 的列表进行排序？

> ID：15029871
> 
> 赞同：0
> 
> 时间：2013-02-22T17:25:30.647
> 
> 标签：c, big-o

这是我正在学习的课程中的一个可选问题，他们提供了答案，4n。但是现在无论我怎么想，我都无法弄清楚他们是如何做到这一点的。我还是个新手，刚刚学习大 O 表示法，所以我确定我错过了一些简单的东西，但这对我来说没有意义。我的想法是冒泡排序需要 n * k 操作，所以如果你把 k 变成 2k 我有 n * 2k。我相信在最坏的情况下 k = n - 1 所以它实际上是 n * 2n AKA 3n。我可能完全错了，但这就是我在这里寻求帮助的原因。我的课程并没有真正（或者我不觉得）它涵盖了这样的问题，所以我只是不确定如何处理它。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:44:37.393

冒泡排序是大 O k^2 复杂度，最坏情况和平均值

所以我们有 n 个大小为 k 的操作，这意味着 k^2 = n

所以我们将 k 加倍，我们有 (2k)^2 = X 或 4k^2 = X 其中 X =# of operations for 2k size

代入 n=k^2 的事实，你有 4n=X

有你的答案:)

# sockets - Lua 中的持久套接字与其他 Lua 代码并行

> ID：15029874
> 
> 赞同：1
> 
> 时间：2013-02-22T17:25:42.907
> 
> 标签：sockets, lua

我正在 Lua 中实现套接字，我正在使用的示例代码使用以下方法来保持连接处于活动状态：

```
while true do
  -- handle socket traffic here
  socket.sleep(1)
end 
```

循环显然阻止了项目代码的其余部分运行，但如果我退出循环，套接字服务器会立即表示连接已关闭。

那么如何在我的 Lua 代码的其余部分正常运行时同时保持套接字打开？（是否有某种后台作业支持？协程可以用于此目的吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:48:26.133

正如你所说，我使用 Lua Lanes 启动了一个正在执行套接字 i/o 并在后台运行的线程。

[http://kotisivu.dnainternet.net/askok/bin/lanes/](http://kotisivu.dnainternet.net/askok/bin/lanes/)

看看这个答案，它提供了有关使用 Lua 通道和套接字的信息。

[LuaLanes 和 LuaSockets](https://stackoverflow.com/a/13222575/1761845)

那里提供的双线程轮询解决方案可能是最可行的，但是那里也有关于协程的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:12:46.670

（您的问题与[此问题](https://stackoverflow.com/questions/12889361)相似（并且我已将其适当地标记为重复），但为方便起见，这是我的答案的副本！）

有多种方法可以处理此问题；你会选择哪一个取决于你想做多少工作。^*

但首先，您应该（对自己）澄清您是在处理 UDP 还是 TCP；UDP 套接字没有“底层 TCP 堆栈”。此外，UDP 是用于发送整个数据（如文本或照片）的错误协议；它是一个不可靠的协议，因此不能保证您接收到每个数据包，除非您使用托管套接字库（例如[ENet](http://enet.bespin.org/)）。

# Lua51/LuaJIT + LuaSocket

轮询是唯一的方法。

*   阻塞：`socket.select`不带时间参数的调用并等待套接字可读。
*   非阻塞：`socket.select`使用超时参数调用`0`，并`sock:settimeout(0)`在您正在读取的套接字上使用。

然后简单地重复调用这些。我建议对非阻塞版本使用[协程调度程序，以允许程序的其他部分继续执行而不会造成太多延迟。](https://gist.github.com/1818054)

# Lua51/LuaJIT + LuaSocket + [Lua Lanes](http://kotisivu.dnainternet.net/askok/bin/lanes/)（推荐）

与上述方法相同，但套接字存在于使用[Lua Lanes](http://kotisivu.dnainternet.net/askok/bin/lanes/)制作的另一个通道（另一个线程中的轻量级 Lua 状态）中（[最新来源](https://github.com/LuaLanes/lanes)）。这使您可以立即从套接字读取数据并进入缓冲区。然后，您使用[linda](http://kotisivu.dnainternet.net/askok/bin/lanes/#lindas)将数据发送到主线程进行处理。

这可能是您问题的最佳解决方案。

我已经做了一个简单的例子，可以[在这里找到](https://gist.github.com/4026258)。它依赖于 Lua Lanes 3.4.0 ( [GitHub repo](https://github.com/LuaLanes/lanes) ) 和修补过的 LuaSocket 2.0.2 ( [source](http://luarocks.org/repositories/rocks/#luasocket) , [patch](http://www.net-core.org/dl/luasocket-2.0.2-acceptfd.patch) , [blog post re' patch](http://www.net-core.org/39/lua/patching-luasocket-to-make-it-compatible) )

结果是有希望的，但如果你从中派生出我的示例代码，你肯定应该重构它。

# LuaJIT + 操作系统特定的套接字

如果你有点自虐，你可以尝试从头实现一个套接字库。[LuaJIT](http://luajit.org/luajit.html)的[FFI 库](http://luajit.org/ext_ffi.html)使这从纯 Lua 成为可能。Lua Lanes 对此也很有用。

对于 Windows，我建议查看[William Adam 的博客](http://williamaadams.wordpress.com/2012/07/01/netnet/)。他在 LuaJIT 和 Windows 开发方面有过一些非常有趣的冒险经历。至于 Linux 和其他，请查看 C 教程或 LuaSocket 的源代码，并将它们转换为 LuaJIT FFI 操作。

（如果 API 需要，LuaJIT 支持[回调](http://luajit.org/ext_ffi_semantics.html#callback)；但是，与从 Lua 轮询到 C 相比，存在显着的性能成本。）

# LuaJIT + ENet

[ENet](http://enet.bespin.org/)是一个很棒的库。它提供了 TCP 和 UDP 之间的完美组合：需要时可靠，否则不可靠。它还抽象了操作系统特定的细节，就像 LuaSocket 一样。你可以使用 Lua API 来绑定它，或者直接通过 LuaJIT 的 FFI 访问它（推荐）。

[^*双关语无意。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:23:52.257

其他答案很好，但有点错过这里最重要的一点：

### 现在很少需要在处理套接字时使用线程

为什么？因为多个套接字是如此普遍，所以操作系统（尤其是 *ix 系统）以[`epoll`](http://en.wikipedia.org/wiki/Epoll)函数的形式实现了“多轮询”。

ZeroMQ 等所有高性能网络库都只保留几个线程，并在其中运行。这降低了内存要求，但不会牺牲速度。

所以我的建议是直接连接到 OS 库，这在 Lua中*非常容易。*您不必自己编写代码 - 快速 google 搜索给我带来了[这个 epoll 包装器](https://github.com/Neopallium/lua-epoll)[1] 然后您仍然可以使用协程仅从实际有一些数据的套接字中读取。

您可能还想看看[ZeroMQ 库本身](http://zeromq.org)。

[1] [*Neopallium*为 ZMQ 创建了 Lua 绑定，所以我认为它是合法的。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:56:20.967

您确实可以为此目的使用协程。这就是流行的库[Copas](http://keplerproject.github.com/copas/)所做的。

根据您的用例，您可以使用 Copas 或查看其源代码以了解它是如何工作的。您还可以查看使用 Copas的[lua-websockets 。](https://github.com/lipp/lua-websockets)

# java - 使用 FEATURE_ACTION_BAR_OVERLAY 的 Android 版 Google Maps API v2

> ID：15029878
> 
> 赞同：2
> 
> 时间：2013-02-22T17:26:06.777
> 
> 标签：java, android, google-maps, user-interface, google-maps-android-api-2

我正在查看一个不同的问题[Google Maps Android API v2 - Interactive InfoWindow （就像在原始的 android google maps 中一样）](https://stackoverflow.com/questions/14123243/)，你可以看到他正在使用 requestFeature(Window.FEATURE_ACTION_BAR_OVERLAY); 使地图 v2 使用全屏。我试过这个，但我的位置按钮部分被我的操作栏覆盖，不像他的。有谁知道如何将它稍微向下移动？

谢谢！

![我的看起来像这样](../Images/d8ffa1fa1d03cc94f25fd43c70b72de2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:42:42.967

不幸的是，您无法控制此按钮。显然，您可以在 android 源代码中搜索此按钮`id`并从代码中手动更改布局参数，但我绝对不会这样做。

这个按钮非常容易自己实现。所以我建议禁用内置的“定位我”按钮并实现你自己的，它将位于操作栏的正下方。

要禁用它，请使用：

```
googleMap.setMyLocationEnabled(false); 
```

新按钮`onClick`方法内容：

```
googleMap.animateCamera(CameraUpdateFactory.newLatLng(new LatLng(googleMap.getMyLocation().getLatitude(),
                                                                 googleMap.getMyLocation().getLongitude()))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:06:41.310

您可以通过其 id 获取视图并重新设置上边距显然 id 始终为 2，但这没有记录，并且当/如果 id 发生更改时，您的应用程序将中断。就像 Pavel 所说，制作自己的位置按钮并将其连接起来更安全。

不幸的是，在 onCreate 中调用 ActionBar.getHeight() 将始终返回 0，因为布局尚未完成。获得真实高度的方法是在 ViewTreeObserver 上使用监听器：

```
mainLayout.getViewTreeObserver().addOnGlobalLayoutListener(
     new ViewTreeObserver.OnGlobalLayoutListener() {
          public void onGlobalLayout() {
               int actionBarHeight = getActionBar().getHeight();
               // TODO: set margin of views dependent on actionbar height
               // remove the listener
               mainLayout.getViewTreeObserver().removeGlobalOnLayoutListener(this);
          }
     }
} 
```

# imagemagick - 使用 Imagemagick 生成“不规则”边框

> ID：15029879
> 
> 赞同：-1
> 
> 时间：2013-02-22T17:26:09.963
> 
> 标签：imagemagick, image-manipulation

我们有客户要求标准图像将接收不规则的边框和背景。是否可以使用 Imagemagick 或其他工具以某种方式生成它？

一个例子：

![](../Images/0abb32e310f2ddc2d4edfa46373d05b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T10:27:44.990

大概。

有关一些边框示例，请参见此内容：[http ://www.imagemagick.org/Usage/thumbnails/#fluff](http://www.imagemagick.org/Usage/thumbnails/#fluff)

并且背景可以通过复合来实现。

# javascript - JQuery UI 对话框文本区域

> ID：15029883
> 
> 赞同：1
> 
> 时间：2013-02-22T17:26:12.893
> 
> 标签：javascript, jquery, textarea

我正在尝试在 JQuery UI 对话框中放置一个文本区域。我想用一个值预填充这个文本区域。如果我使用`<textarea>`该对话框甚至不打开。但是，如果我将其更改为`<input type="text"`>，那么我的对话框就可以正常工作。我不确定问题是出在`<textarea>`本身还是在价值上。这是我的代码。问题是 ID 为“change_dialog_msg”的文本区域。即使只是使用`<textarea></textarea>`仍然会导致对话框无法打开。
该对话框正在从具有以下代码的表中打开（完全相同的代码在我的应用程序的另一个页面上工作，所以我认为问题不在于那个）。

```
<td><a href="#" onclick="OpenDialog(<bean:write name='cel' property='id' scope="page"/>);return false;">View/Modify</a>

<div id="change_dialog" title="Change Email Message" style="display: none; font-size: 12px; text-align: center;">
            <div style="text-align: left;">
                <br>
                Change the expiration email message for Course ID: "<span id="change_dialog_courseName"></span>".
                <br>
                <font color="red">Please enter %fn for first name, %ln for last name, %dt for expiration date, %gn for group, %cn for curriculum, and %sn for stage number.</font>
                <br><br>
                <textarea rows="5" cols="50" id="change_dialog_msg"/>
                <br><br>
            </div>
            <button id="change" onclick="ChangeBtn();return false;">Submit</button>
            &nbsp;&nbsp;
            <button id="delete" onclick="DeleteBtn();return false;">Delete</button>
            &nbsp;&nbsp;
            <button id="cancel" onclick="CancelBtn();return false;">Cancel</button>
            <br><br>
        </div>
        <script type="text/javascript">
            var currId = -1;
            $("#change_dialog").dialog({
                autoOpen: false,
                width: "auto",
                modal: true,
                resizable: false
            });//.siblings('div.ui-dialog-titlebar').remove();
            function OpenDialog(id){
                currId = id;
                $("#change_dialog_courseName").text(courseIDs[id]);
                $("#change_dialog_msg").val(emailMSG[id]);
                $("#change_dialog").dialog("open");
            }
            function ChangeBtn(){
                if(/\S/.test($("#change_dialog_msg").val())){
                    $("#newEmailMSG").val($("#change_dialog_msg").val());
                    $("#id").val(currId);
                    $("#submitOpt").val("Change");
                    $("#emailSettings").submit();
                } else {
                    alert("You must enter a message when pressing submit.");
                }                
            }
            function CancelBtn(){
                currId = -1;
                $("#change_dialog_msg").val("");
                $("#change_dialog").dialog("close");
            }
            function DeleteBtn(){
                if($("#change_dialog_msg").val()==""){
                    $("#change_dialog").dialog("close");
                } else {
                    $("#id").val(currId);
                    $("#submitOpt").val("Delete");
                    $("#emailSettings").submit();
                }
            }
        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T17:50:10.943

我还没有执行整个代码，但我可以说它会在稍作改动后工作 -

```
<textarea rows="5" cols="50" id="change_dialog_msg"/> 
```

到

```
<textarea rows="5" cols="50" id="change_dialog_msg"></textarea> 
```

谢谢。

# servicestack - 将服务堆栈集成到自定义服务器中

> ID：15029885
> 
> 赞同：2
> 
> 时间：2013-02-22T17:26:27.310
> 
> 标签：servicestack

我有一个用 C# 编写的自定义 HTTP 服务器，它在我的应用程序域中提供专门的应用程序服务，例如呈现带有图形的仪表板。我没有使用 IIS；服务器完全用 C# 编写，使用`HttpListener`类直接绑定到它所服务的端口。

我想使用 ServiceStack 添加一个 RESTful API，用于将数据拉入浏览器端代码以改善用户体验，使用相同的 Web 服务器（因此它可以绑定到相同的 HTTPS 端口，并共享我的安全模块）。

我在网上找到的所有示例代码都假定 IIS 拥有 Web 端口，或者服务堆栈拥有 Web 端口。在我的用例中，我的自定义应用程序拥有 Web 端口，并希望将某些 HTTP 请求委托给服务堆栈。

有没有一种简单的方法可以将单个`HttpListenerContext`关闭传递给服务堆栈来处理？我无法使用 google 找到文档示例，因为所有关键词似乎都太常见了。

在我的自定义代码的上下文中，我已经评估了 URL，确定用户有权访问它，并且只需要`HttpListenerResponse`生成。

简单的示例代码或指向网络文章的指针会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T07:26:03.027

我们以前从未测试过这样做，但[AppHostHttpListenerBase.ProcessRequest](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/AppHostHttpListenerBase.cs#L39)入口点接受一个`HttpListenerContext`.

你仍然需要打电话`new AppHost().Init()`，但你不需要启动它。

# html - 如何让 Twitter 链接在新窗口中打开

> ID：15029888
> 
> 赞同：0
> 
> 时间：2013-02-22T17:26:40.507
> 
> 标签：html

在我的网站上，twitter 链接在父窗口中打开。我在 HTML 中找不到任何对链接的引用，有什么想法可以让它们在新窗口中打开吗？

[www.wefewlondon.com](http://www.wefewlondon.com)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:33:00.450

我查看了您的 javascript/lib/jquery.tweet.js 文件.. 看看

```
 return "<a href=\""+escapeHTML(url)+"\">"+escapeHTML(text)+"</a>"; 
```

部分...添加“target =“_blank”，应该这样做

```
return "<a href=\""+escapeHTML(url)+"\ target=_blank>"+escapeHTML(text)+"</a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:34:04.290

推文标记由[jQuery.tweet](http://tweet.seaofclouds.com/)插件生成。他们在主页上的示例#6 中解释了如何实现预期的结果。

实际上，您需要做的就是在 main.js 的第 33 行添加这一行：

```
$(this).find("a").attr("target","_blank"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:30:46.193

链接写在哪里，例如这里：

```
<a href=\"http://"+s.twitter_url+"/$2\">$2</a> 
```

您可以附加目标属性：

```
<a href=\"http://"+s.twitter_url+"/$2\" target=\"_blank\">$2</a> 
```

# c++ - C++中对象实例化的语法是什么？

> ID：15029893
> 
> 赞同：1
> 
> 时间：2013-02-22T17:27:04.493
> 
> 标签：c++

当我编译以下 c++ 代码时：

```
#include "ConstantList.h"

using namespace std;

int main() {

ConstantList* cl = new ConstantList();

//do something with cl

delete cl;
cl = NULL;

return 0;
} 
```

编译器给了我错误：

```
Undefined symbols:
  "ConstantList::~ConstantList()", referenced from:
      _main in ccNfeeDU.o
  "ConstantList::ConstantList()", referenced from:
      _main in ccNfeeDU.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

我没有得到正确实例化对象的语法吗？我的 ConstantList.h 文件如下所示：

```
#ifndef ConstantList_h
#define ConstantList_h

#include <string>
#include "Token.h"

using namespace std;

class ConstantListTail;

class ConstantList {
public:
    ConstantList();
    ~ConstantList();

    std::string toString();

    void push_back(Token*);
    void push_back(ConstantListTail*);

private:
    Token* termString;
    ConstantListTail* constantListTail;
};

#endif 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T17:28:44.677

您的语法是正确的，因为您收到的是链接器错误，而不是编译器错误。此错误意味着您正在编译您的`main`没有 的来源`ConstantList.cpp`，或者没有引用的链接`ConstantList.o`

使用此命令编译应该可以修复错误：

```
g++ collect2.cpp ConstantList.cpp 
```

（我假设带有您的`main`函数的文件被调用`collect2.cpp`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:30:59.733

“未定义符号”表示您已声明标识符（在本例中为析构函数），并且已使用它，但据链接器所知，您尚未定义它

在某处添加定义，并确保编译后的版本位于链接器链接的文件之一中

* * *

重新“实例化语法”，不幸的是在 C++ 中没有专门的语法

相反，函数转换表示法用于构造函数调用

也许最接近纯实例化语法的是`new`表达式

* * *

回覆

```
using namespace std; 
```

在头文件中：**不要**.

例如，标准库定义了一些名为`distance`. 包含标头的某些代码有自己的代码`distance`并发生名称冲突的可能性有多大？远高于零。

这并不意味着你永远不应该`using namespace std;`在头文件中拥有它，但你永远不应该在头文件的全局命名空间中拥有它。对于其他命名空间，要非常清楚它的作用，即提供所有标准库名称作为该命名空间的一部分。

# qt - 无法在 Qt 中添加外部包

> ID：15029894
> 
> 赞同：0
> 
> 时间：2013-02-22T17:27:06.327
> 
> 标签：qt, network-programming, websocket

我是 C++ 编程的新手。我从 Qt 5.0.1 开始。我需要使用来自：[https](https://code.google.com/p/tufao/) ://code.google.com/p/tufao/ 的 WebSockets，但我没有安装 MinGW，所以我用谷歌搜索我可以创建 Qt 库项目，包含这些源文件并构建静态库。所以我做到了：

```
QT       += network
QT       -= gui
TARGET = tufao
TEMPLATE = lib
CONFIG += staticlib
INCLUDEPATH = src src/priv
SOURCES += \
    src/websocket.cpp \
    src/url.cpp \
    src/simplesessionstore.cpp \
    src/sessionstore.cpp \
    src/querystring.cpp \
    src/httpserverresponse.cpp \
    src/httpserverrequestrouter.cpp \
    src/httpserverrequest.cpp \
    src/httpserver.cpp \
    src/httppluginserver.cpp \
    src/httpfileserver.cpp \
    src/headers.cpp \
    src/abstractmessagesocket.cpp \
    src/abstracthttpserverrequesthandler.cpp \
    src/priv/tcpserverwrapper.cpp \
    src/priv/rfc1123.cpp \
    src/priv/rfc1036.cpp \
    src/priv/reasonphrase.cpp \
    src/priv/http_parser.c \
    src/priv/asctime.cpp

HEADERS += \
    src/websocket.h \
    src/url.h \
    src/tufao_global.h \
    src/simplesessionstore.h \
    src/sessionstore.h \
    src/sessionsettings.h \
    src/session.h \
    src/querystring.h \
    src/ibytearray.h \
    src/httpsserver.h \
    src/httpserverresponse.h \
    src/httpserverrequestrouter.h \
    src/httpserverrequest.h \
    src/httppluginserver.h \
    src/httpfileserver.h \
    src/headers.h \
    src/abstractmessagesocket.h \
    src/abstracthttpserverrequesthandlerfactory.h \
    src/abstracthttpserverrequesthandler.h \
    src/priv/websocket.h \
    src/priv/url.h \
    src/priv/tcpserverwrapper.h \
    src/priv/simplesessionstore.h \
    src/priv/sessionstore.h \
    src/priv/rfc1123.h \
    src/priv/rfc1036.h \
    src/priv/reasonphrase.h \
    src/priv/httpsserver.h \
    src/priv/httpserverresponse.h \
    src/priv/httpserverrequestrouter.h \
    src/priv/httpserverrequest.h \
    src/priv/httpserver.h \
    src/priv/httppluginserver.h \
    src/priv/httpfileserver.h \
    src/priv/http_parser.h \
    src/priv/cryptography.h \
    src/priv/asctime.h
unix:!symbian {
    maemo5 {
        target.path = /opt/usr/lib
    } else {
        target.path = /usr/lib
    }
    INSTALLS += target
} 
```

构建后，我得到`libtufao.a`. 所以下一步是测试它。我创建了简单的测试项目并通过单击添加库-> 外部-> 静态添加了这个库。打开对话框只能打开`.lib`文件，所以我`libtufao.a`改为`libtufao.lib`：

```
QT       += core gui network
greaterThan(QT_MAJOR_VERSION, 4): QT += widgets   
TARGET = sockettest
TEMPLATE = app
SOURCES += main.cpp\
        mainwindow.cpp
HEADERS  += mainwindow.h \
FORMS    += mainwindow.ui
win32:CONFIG(release, debug|release): LIBS += -L$$PWD/../../components/tufao-build-Desktop_Qt_5_0_1_MinGW_32bit-Release/release/ -llibtufao
else:win32:CONFIG(debug, debug|release): LIBS += -L$$PWD/../../components/tufao-build-Desktop_Qt_5_0_1_MinGW_32bit-Release/debug/ -llibtufao

INCLUDEPATH += $$PWD/../../components/tufao/src
DEPENDPATH += $$PWD/../../components/tufao/src

win32:CONFIG(release, debug|release): PRE_TARGETDEPS += $$PWD/../../components/tufao-build-Desktop_Qt_5_0_1_MinGW_32bit-Release/release/libtufao.lib
else:win32:CONFIG(debug, debug|release): PRE_TARGETDEPS += $$PWD/../../components/tufao-build-Desktop_Qt_5_0_1_MinGW_32bit-Release/debug/libtufao.lib 
```

但是当我尝试构建这个测试项目时，我得到了编译器错误：

> 未定义的引用` *imp* __ZN5Tufao9WebSocket13connectToHostERK12QHostAddresstRK10QByteArrayRKNS_7HeadersE' collect2.exe:-1:
> 
> 错误：ld 返回 1 个退出状态

谁能帮我？

问候

**编辑：** 通过将所有源添加到我的 dest 项目和`.pro`我添加的文件中解决了问题`DEFINES += TUFAO_LIBRARY`。现在一切都编译好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:38:15.363

[将外部库添加到 Qt Creator 项目中](https://stackoverflow.com/questions/718447/adding-external-library-into-qt-creator-project)

链接器找不到 的实现`WebSocket::connectToHost`，因此您需要链接具有该功能的库。

在您的 .pro 文件中，添加

```
LIBS += "path/to/lib/libname" 
```

或者，如果它已经在您的库路径中，您可以将

```
LIBS += -lmylibname 
```

所以我想对你来说，可能是

```
LIBS += -llibtufao 
```

希望有帮助。

# jenkins - 詹金斯：如果某个测试失败，让机器离线

> ID：15029898
> 
> 赞同：0
> 
> 时间：2013-02-22T17:27:24.850
> 
> 标签：jenkins

我知道如果构建失败会使机器离线的插件。我的问题是，如果某个步骤失败，我可以让机器离线吗？

我正在运行某些 Windows 批处理预构建步骤，这些步骤可以还原每台机器，并且如果还原失败，我希望使从站脱机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T06:05:07.140

奇怪的要求，但我尊重它:)

Brut force - 如果你想取出从机，你可以从运行在该从机上的批处理文件中杀死它（杀死 java 进程）。在批处理文件中使用 taskkill（在命令行上运行**taskkill /?以查看用法），您应该使用****start**命令在作业中分叉该文件（请参阅命令行上的**start /?**以查看用法）。

另外，看看[这个](https://wiki.jenkins-ci.org/display/JENKINS/Monitor+and+Restart+Offline+Slaves)和[这个帖子](http://jenkins.361315.n4.nabble.com/Offline-and-revert-slave-after-build-td4631215.html)。看起来与您的需求相似，但需要更好的控制。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T22:17:29.437

老问题，但这里有一些我考虑过（并尝试过）的其他方法。我们有一个工作来监控构建机器并在从属设备离线或磁盘空间不足时调用 Pager Duty。在我们的环境中，强制使机器离线是有问题的。

1.  您可以更改机器上的标签，而不是删除从属设备（例如杀死它或使其脱机），以便其他作业不再选择它。这可以用 groovy 来完成。**警告：标签更改似乎需要一段时间才能传播**，因此可能仍会选择机器。

2.  使用[Conditional Build Step](https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin)插件并在失败时使用 groovy 使机器脱机。注意：我还没有测试过这个 groovy ......它很旧。

    ```
     manager.build.getBuiltOn().toComputer.setTemporarilyOffline(true) 
    ```

3.  您可以让该作业永远运行（睡眠、睡眠、睡眠），而不是让机器脱机——它不会脱机，但其他作业将无法再选择它。同时，它可以继续重试恢复。

4.  还有一个[Node Stalker](https://wiki.jenkins-ci.org/display/JENKINS/Node+Stalker+Plugin)插件，它允许下游作业作为上游作业在相同的节点上运行。这样，当故障发生时，您的下游作业可以进行清理。但是，为故障机器安排的另一项作业首先进入的风险很小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T06:31:28.530

您只想从命令提示符下使机器脱机吗？否则，您可以使用 groovy post build 步骤编写简单的脚本以使每台机器脱机。在命令提示符下，除非您使用某些 power shell 实用程序，否则您将无法访问其他从站。

# javascript - 更改标题等于的 DIV 的文本

> ID：15029908
> 
> 赞同：0
> 
> 时间：2013-02-22T17:27:55.187
> 
> 标签：javascript, jquery, html

我想做这样的事情：（不会工作..）

```
<script>
$(document).ready(
    $('a[title="Girls"] .ellipsis_text').text('test');
); 
```

要使用以下代码中的 ellipsis_text 类更改跨度文本：

```
<li><a href="http://www.site.com/girls" title="Girls"><span class="cls_truncate_text"><span class='ellipsis_text'>Girls</span></span></a></li> 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:30:01.847

你忘了`function()`

尝试

```
$(document).ready(function() {
    $('a[title="Girls"] .ellipsis_text').text('test');
}); 
```

**演示：http:** [//jsfiddle.net/M25sx/](http://jsfiddle.net/M25sx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:30:58.363

尝试这个：

```
$(document).ready(function(){
   $('a[title="Girls"]').find('.ellipsis_text').html('test');
}); 
```

# php - 我需要为 PHP.GT 博客添加哪些标签才能自动呈现？

> ID：15029913
> 
> 赞同：1
> 
> 时间：2013-02-22T17:28:08.623
> 
> 标签：php, php.gt

我正在使用[PHP.Gt 框架](https://github.com/g105b/PHP.Gt)，我注意到有一个用于博客的页面工具。我确信连接起来真的很容易（其他一切都在 PHP.GT 中！），但我需要知道我应该在我的 html 中设置哪些 ID 和数据模板，以便 PageTool 为我呈现博客.

如果我可以避免的话，我宁愿不通过代码来寻找它们，而且我在 github 上的文档中找不到博客工具 - 它是否记录在其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:15:03.157

[Github wiki 上的教程 #4](https://github.com/g105b/PHP.Gt/wiki/tutorial-blog)将在编写完成后准确回答您的问题。文档中还有一个[专门用于 Blog PageTool 的特定页面](https://github.com/g105b/PHP.Gt/wiki/pagetool-blog)。虽然文档是 WIP，但我将使用源代码和评论在这里回答。

你需要做两件事来自动输出一个典型的博客：

1.  `data-template`在具有属性的元素中创建虚拟博客的标记。这将被放入[`/Blog/_Dynamic.html`PageView](https://github.com/g105b/PHP.Gt/wiki/dynamic-html)。
2.  调用`go`博客页面工具上的函数。

数据库将在需要时自动部署。然后，您将能够使用 CSS/SCSS 编写文章和设置博客样式。

要更具体地回答您的问题：

根元素可以是模板名称为“文章”的任何标签类型。将此标签作为文章元素是有意义的。

在文章元素中，您可以根据要创建的博客类型的需要放置尽可能多或尽可能少的内容。以下元素是最典型的：

*   `article > header > h1 > a`- 文章的标题，将提供一个永久链接回到它本身。
*   `article > header > p.date`- 发布日期，带有`data-format`用于提供[PHP 日期格式字符串](http://php.net/manual/en/function.date.php)的可选属性。
*   `article > header > p.comments`- 评论数。
*   `article > header > ul.tags`- 与文章关联的当前标签的列表容器。
*   `article > header > ul.tags li[data-template='ArticleTagLink']`- 为每个关联标签输出的模板化列表项。`li`应该至少包含一个元素`a`，以链接到标签列表。
*   `article > div.content`- 实际博客内容将输出到的位置。

注释可以放置在不同的元素容器中。在容器内，输出评论的实际列表应该有一个 id 为“commentsList”的元素，其中一个`li`元素的数据模板属性为“Comment”。

这是一个示例博客 PageView (_Dynamic.html)。

```
<section id="st_article">
    <article data-template="Article">
        <header>
            <h1>
                <a href="/Articles/{Y}/{M}/{D}/{Id}-{Title}.html">
                    Article header goes here. A bit longer title so it breaks onto 
                    the line below the current one.
                </a>
            </h1>
            <p class="date">
                <time datetime="1970-01-01">1st January 1970</time>
            </p>
            <p class="comments">
                <a href="/Articles/{Y}/{M}/{D}/{ID}-{Title}.html#Comments">
                    <span class="commentCount">0</span> comments
                </a>
            </p>
            <ul class="tags">
                <li data-template="ArticleTagLink">
                    <a href="/Articles/Tagged/{TagName}">Tag1</a>
                </li>
            </ul>
        </header>
        <div class="content">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div>
        <footer>
            <p>
                <a href="/Articles/{Y}/{M}/{D}/{Id}-{Title}.html">
                    Continue reading...
                </a>
            </p>
        </footer>
    </article>
</section>

<a name="Comments"></a>

<section id="st_article_comments">
    <h1><span id="commentCount">0</span> comments</h1>
    <form method="post" id="postCommentForm">
        <input name="Name" placeholder="Your name" required>
        <input name="Website"
            placeholder="Your website">
        <input name="Email" class="email"
            placeholder="Your email (not shown, used to receive replies)">
        <textarea name="Comment" placeholder="Your comment" required
        ></textarea>
        <button type="submit" id="btn_submitComment">
            Submit comment
        </button>
    </form>
    <div id="signIn">
        <p>
            Please 
            <a href="/Authenticate.html">sign in</a> 
            to post a comment.
        </p>
    </div>
    <ul id="commentsList">
        <li data-template-no="Comment">
            <p class="name">
                <a name="Comment-" href="#Comment-">
                    John Smith
                </a>
            </p>
            <p class="message">
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.
            </p>
            <time datetime="1970-01-01 00:00:00">
                January 1st 1970, 0:00am
            </time>
        </li>
    </ul>
</section> 
```

...并自动将 PageView 与博客工具挂钩，您需要调用`go()`Blog PageTool。这必须在[`_Common.php`文件](https://github.com/g105b/PHP.Gt/wiki/dynamic-html)中完成，因为每个博客的实际请求 URL 会有所不同。

```
<?php class _Common extends PageCode {

public function go($api, $dom, $template, $tool) {
    $tool->go("Blog");
}

}?> 
```

# parsing - 我应该将换行符标记为单独的语句还是在解析器上担心这个？

> ID：15029914
> 
> 赞同：1
> 
> 时间：2013-02-22T17:28:08.443
> 
> 标签：parsing, compiler-construction, tokenize, lexer

我在 PHP 中构建了一个基本的标记器，现在它解析类似于 javascript 的东西，尽管不需要分号来分隔语句。

```
a = 1
b = a + 1
echo b

T_IDENTIFIER  a
T_EQUAL       =
T_NUMBER      1
T_IDENTIFIER  b
T_EQUAL       =
T_IDENTIFIER  a
T_NUMBER      1
T_IDENTIFIER  echo
T_IDENTIFIER  b 
```

这是我的第一个编译器，所以我不确定我是否准备好继续解析。我忽略了词法分析器上的换行符，因此语句之间没有分隔符，但在我的 DSL 中，换行符可以用作分号的替代方案。

我的问题是，我应该开始担心在词法分析器上分离语句还是应该修改我的标记器以包含换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:37:39.460

当您说“不需要分号来分隔语句”时，实际上是在暗示“分隔语句需要换行符”。

您将通过在令牌流中生成一些 T_ENDOFINSTRUCTION 来简化您的工作。您的解析器将使用它单独的语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:38:28.400

如果换行符是语言的一部分（例如，语句有时以行边界结束），您可能应该生成 ENDOFLINE 作为标记。这种听起来像你的情况。

如果换行符总是空格，词法分析器应该把它们当作空格来吃。

如果换行符*有时有用，有时没用（例如，“THEN* *newline* ”引入了块式 THEN 子句，您可能应该生成*2 个*THEN 标记：一个是**THEN**，一个是**THENnewline**。

我不会因为担心如何在第一次尝试时就正确使用词法分析器而自杀，因为它们很容易修改。把它弄好（例如，使用上面的经验法则），然后继续编写你的解析器。随着解析器的冻结，很明显词法分析器是否必须通过生成换行符或特殊标记来提供更多帮助，然后您可以返回并相应地对其进行修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:10:04.430

如果您是语言设计师，那么选择权在您手中。我发现将换行符视为特别尴尬的语言和有时将换行符视为特殊的语言（Scala、Haskell、Icon）令人讨厌。根据您的语法细节，在解析器中分离语句可能很容易，就像在 Euclid 和 Turing 中所做的那样。例如

```
<Statement> ::= <Var> = <Expression>
              | echo <Expression>
              | { Block }
              | if <Expression> <Statement> else <Statement>
              | while <Expression <Statement>
<Block> ::= <Statement> <Block>
         |  <Declaration> <Block>
         | 
```

到目前为止没有任何歧义。如果您注意其他非终结符，则不必有任何歧义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T18:43:21.810

在过去的几周里，我一直在设计一种语言，并手工制作了词法分析器。我的语言不将 NEWLINE 视为标记，也不需要分号来识别表达式的结尾。**表达式语法本身定义了语句何时结束**。

这在大多数情况下都很顺利，但由于我的语言中的所有语句也是表达式，因此存在一些歧义：

**a(b) [方法调用] vs a \n (b) [两个表达式]**：我明确要求NEWLINE前面没有一些标记，*在方法调用的上下文中使用*'('是其中之一。

**4-2 [减法] vs 4 \n -2 [两个表达式]**：此外，使用与一元运算符相同的标记的二元运算符要求它们之前没有 NEWLINE。

除此之外，为了避免用户的一些错误，我明确要求如果两个表达式在同一行，它们必须用分号分隔。当然，这里没有歧义，只是为了避免错别字未被发现，例如：

```
c = a adn b 
```

这可以理解为**仅返回 b**`a adn b`的单个块。

# apache-flex - 刷新现有的 DataGrid ItemRenderers

> ID：15029916
> 
> 赞同：2
> 
> 时间：2013-02-22T17:28:10.753
> 
> 标签：apache-flex, actionscript

我有一个带有自定义 itemRenderer 和网格外单选按钮组的 advancedDataGrid。选择单选按钮时，我需要更新 itemrenderers 的显示状态。我正在使用具有 properties 属性的类工厂将参数传递给渲染器。

向网格添加新行时，itemrenderer 会以正确的显示状态出现，但是当我更改单选按钮时，任何已经在屏幕上的渲染器都不会刷新它们的显示。我尝试在 dataprovider 上调用 refresh()，在 datagrid 上调用 invalidateList() 和 invalidateDisplayList()，将 dataprovider 设置为 null 然后重置它，将列上的 itemrenderer 属性设置为 null 然后重置它......没有什么会强制渲染器更新。

网格位于 tabNavigator 中，因此如果我更改选项卡然后返回，渲染器都会重新绘制，但这不是可接受的解决方法。你如何告诉网格销毁所有当前的渲染器并重新创建它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:20:27.623

弄清楚了。这里是简化版。

```
<mx:AdvancedDataGrid 
    id="myDatagrid">
<mx:columns>
    <mx:AdvancedDataGridColumn 
            dataField="Full_Name">
    </mx:AdvancedDataGridColumn>
</mx:columns>
<mx:rendererProviders>
    <mx:AdvancedDataGridRendererProvider 
            renderer="{rendererFactory}"
            columnSpan="0"
            columnIndex="0"
            depth="2"/>
    <mx:AdvancedDataGridRendererProvider
            renderer="{anotherFactory}"
            columnIndex="0"
            columnSpan="0"
            depth="1"/>
</mx:rendererProviders> 
```

如果您更改 {rendererFactory}（更新现有的或创建新的），它不会触发刷新。在对工厂进行更改后，我做了 myDatagrid.rendererProviders=myDatagrid.rendererProviders 并触发了更新并回收了渲染器。

# wordpress - WooCommerce 自定义产品和类别网址

> ID：15029921
> 
> 赞同：0
> 
> 时间：2013-02-22T17:28:34.023
> 
> 标签：wordpress, url-routing, woocommerce

我需要更改 WooCommerce 产品和类别的 URL 模式。

我希望它可以像下面这样：

```
# lists all the category products
/%category_name% 

# show the product
/%category_name%/%product_name% 
```

有没有办法通过更改 WooCommerce 的永久链接设置来实现这一点，或者我应该解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T09:00:38.993

不幸的是，您将无法做到。

我发现我必须进行以下更改，以便 URL 看起来像这样。

`http://domain.com/cars/family/`

`http://domain.com/product/family/camero/`

**固定链接设置**

对于通用设置，将其设置为**帖子名称**

**可选设置**

**将产品类别基础**更改为`cars`

**产品永久链接库**

**定制基地** `/product/%product_cat%`

系统需要知道类别和产品之间的区别，并像这样设置它，所以希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T20:54:28.417

当您使用插件时，它是可能的。虽然插件需要一些钱，但它会做得很好。自 1 个月以来，我们现在也在使用它，效果很好。在这里查看网站：[https ://perfectseurl.com](https://perfectseourl.com)

# ios - 使用 ARC 时释放 NSMutableArray

> ID：15029925
> 
> 赞同：2
> 
> 时间：2013-02-22T17:28:48.470
> 
> 标签：ios, objective-c, memory-management, automatic-ref-counting

我正在使用最新的 SDK 和 ARC 开发一个 iOS 应用程序。

我有这个变量：

```
NSMutableArray* _previewImageBuffer; 
```

而这个方法：

```
- (void)shutdown
{
    [self stop];
    _previewImageBuffer = nil;
} 
```

是否`_previewImageBuffer = nil;`正确？如果我这样做，在 _previewImageBuffer` 中分配的内存会发生什么？这是内存泄漏吗？

我想释放这个对象，因为我需要释放它使用的内存。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T17:31:19.333

你在做什么是完全正确的。在 ARC 下 Nilifying 对象实例变量会释放对象。释放 NSArray，如果它导致 NSArray 被释放，也会释放它的所有元素。

如果您对内存管理和 ARC 有疑问或困惑，最好停下来阅读事实，直到您不再有疑问或困惑。我的书有一个可能有用的解释：

[http://www.aeth.com/iOSBook/ch12.html#_memory_management](http://www.apeth.com/iOSBook/ch12.html#_memory_management)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:38:36.087

在 ARC 下，这不是泄漏。内存将被释放。`strong`在学习 ARC 时，您还应该查看 a或`weak`reference之间的区别。

您还应该查看[Apple 对 ARC 的官方介绍](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。

# jquery - jquery改变图像src

> ID：15029926
> 
> 赞同：10
> 
> 时间：2013-02-22T17:28:48.930
> 
> 标签：jquery, image, src

的代码`$("#adminLink")`工作得很好，但`$("#itemLink")`没有。我已经尝试了我能想到的一切。我想我需要一双新鲜的眼睛。我要做的就是在单击元素时更改这两个 img 的 src 。

代码：

```
$(document).ready(function () {

    HidelemArr = new Array();
    HidelemArr[0] = "addItem";
    HidelemArr[1] = "addAdmin";
    //* hide presets
    $.each(HidelemArr, function () {
        $("#" + this).hide();
    })
    //*

    $("#adminLink").click(function () {
        var chld = $("#menuIMG");
        var vis = (document.getElementById(HidelemArr[1]).style.display == 'block') ? 1 : 0;
        changeDisplay(HidelemArr[1], vis, chld);
    });

    $("#itemLink").click(function () {
        var chld = $("#Mitemimg");
        var vis = (document.getElementById(HidelemArr[0]).style.display == 'block') ? 1 : 0;
        changeDisplay(HidelemArr[0], vis, chld);
    });

});

function changeDisplay(id, vis, chld) {

    $.each(HidelemArr, function () {
        if ((this == id) && (vis == 0)) {
            chld.attr("src", "images/icon_sync.gif");
            $("#" + this).slideDown('slow', function () {});
        } else {
            chld.attr("src", "images/icon_trace.gif");
            $("#" + this).slideUp('slow', function () {});
        }
    })

} 
```

html:

```
<ul>
              <li class="header">Quick Access:</li>

              <li ><span id="itemLink">
                  <a >Add Item</a>
                    <img id="Mitemimg" class="qaimg" src="images/icon_trace.gif"></span></li>

              <li ><span id="adminLink">
                  <a >Add Administrator</a>
                    <img id="menuIMG" class="qaimg" src="images/icon_trace.gif"></span></li>
            </ul>
          </div>

          <div id="main">
            <h1>Actions Required:</h1>
            <div id="forms">
              <table class="linkForm" id="addItem">
                <?php require_once 'additemform.php'; ?>
              </table>
              <table class="linkForm" id="addAdmin">

                    <?php require_once 'addAdminForm.php'; ?>

              </table>
            </div>
          </div> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-22T18:10:27.630

**演示：http:** [//jsfiddle.net/235ap/](http://jsfiddle.net/235ap/)

您不会在演示中看到图像发生变化，但如果您查看检查器，它会发生变化。

HTML

```
<ul class="nav">
    <li class="header">Quick Access:</li>
    <li>        
        <a id="itemLink" href="#">Add Item</a>
        <img id="Mitemimg" class="qaimg" src="images/icon_trace.gif">
    </li>
    <li>
        <a id="adminLink" href="#">Add Administrator</a>
        <img id="menuIMG" class="qaimg" src="images/icon_trace.gif">
    </li>
</ul>
<div id="main">
     <h1>Actions Required:</h1>

    <div id="forms">
        <table id="addItem" class="linkForm" style="display: none;">
            <tr>
                <td>addItemTable</td>
            </tr>
        </table>
        <table id="addAdmin" class="linkForm" style="display: none;">
            <tr>
                <td>addAdminTable</td>
            </tr>
        </table>
    </div>
</div> 
```

JS

```
$(document).ready(function () {
    $('#adminLink').click(function(event) {
        event.preventDefault();
        change('#menuIMG', '#addAdmin');
    });

    $('#itemLink').click(function(event) {
        event.preventDefault();
        change('#Mitemimg', '#addItem');
    });

});

function change(imgId, divId) {
    // reset img src
    $('.qaimg').attr('src', 'images/icon_trace.gif');

    // set img src
    $(imgId).attr('src', 'images/icon_sync.gif');

    // slide up all
    $('#forms .linkForm').slideUp('slow', function() {
        // slide down div
        $(divId).slideDown('slow', function() {});
    });
} 
```

在上述功能更改中，当第二次选择链接时。它不是向上滑动，而是向上滑动然后再向下滑动。下面是相同的功能，并对其进行了更改以使其正常工作。

```
 function change(imgId, divId) {
      //check to see if div is visable
      var vis = ($(divId).css('display') == 'none')? false:true;

      // slide up all
      $('#forms .linkForm').slideUp('slow', function() { });
      // reset img src
      $('.qaimg').attr('src', 'images/icon_trace.gif');

     // if div isn't visable
    if(!vis){
        // slide down div
       $(imgId).attr('src', 'images/icon_sync.gif');
       // set img src
       $(divId).slideDown('slow', function() {});
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T17:34:48.893

您还没有为我发布 HTML 来确认这一点，但我将从基础开始 - 您将骆驼大小写用于`HidelemArr`数组中的第二项 ( **addAdmin** )，但其中的第一项 ( **additem** ) 都是小写的。

检查您的 HTML 以确保名称与该大写匹配。如果可以的话，也尝试标准化你的大写。

# php - 从 php 保存 HTML

> ID：15029947
> 
> 赞同：2
> 
> 时间：2013-02-22T17:29:55.977
> 
> 标签：php, html

假设我想使用 php 在我的网站上生成动态数据，但我不希望用户转到任何`.php`页面。

相反，我想每晚运行一次 php 脚本并保存一个`.html`文件，以便在浏览我的网站时用户只看到静态 html。

我描绘的方式是，对于需要动态数据的每个页面，都有一个 .html 和一个 .php 。例如：

*   newsAndInformation.html
*   newsAndInformation.php

这是常见的做法吗？有没有像这样的好教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T17:36:19.963

您可以通过在 .htaccess 文件中使用巧妙的 mod_rewrite 规则来[加快使用静态页面的站点。](http://www.stevefenton.co.uk/Content/Blog/Date/201303/Blog/Speed-Up-Dynamic-Websites-With-Static-Pages/)

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^Example/ index.php [L,NC,QSA] 
```

该规则执行以下操作...

1.  检查请求的 URL 的文件是否不存在

2.  检查请求的 URL 的目录是否不存在

3.  如果是 - 显示静态文件/目录（目录需要一个 index.html 文件）

4.  如果否 - 重定向到您的 PHP 文件，该文件可以运行，然后为下一个请求保存适当的文件

你的 PHP 文件会输出响应：

```
<?php
ini_set('zlib.output_compression', 'On');

ob_start();

// Logic to create your content...

// use ob_get_contents() to get the response and save it

ob_end_flush();
?> 
```

一个粗略的例子是......

```
yoursite/Example/Test/ 
```

在第一次访问时，这将访问您的 PHP 页面。然后您将文件保存到`/Example/Test/index.html`，第二个请求将在不使用 PHP 的情况下提供静态页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:37:45.560

您可以创建一个简单的类[`fwrite`](http://www.php.net/manual/en/function.fwrite.php)来执行此操作。

如果您有足够的数据需要更复杂的解决方案，您可以找到更广泛的缓存系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:38:00.300

`.htaccess`在您的文件中添加以下内容

```
RewriteEngine on 
RewriteRule ^(.*)\.html $1\.php 
```

这将`http://www.domain.com/myPage.html`真正指出，`http://www.domain.com/myPage.php`但用户看到`.html`

# java - ASM 4.0 树 API：InsnNodes 中字节码的映射？

> ID：15029949
> 
> 赞同：2
> 
> 时间：2013-02-22T17:30:03.400
> 
> 标签：java, jvm, bytecode, java-bytecode-asm

大概整个方法体都被处理并转换为`InsnList`包含一堆`AbstractInsnNode`s 以及一些非字节码节点（如`FrameNode`、`LineNumberNode`等）的方法体。XXXNode 类 javadoc 通常包含一些有用的信息（例如，哪些操作码映射到此 XXXNode）但映射似乎并不完整，所以我不完全确定在所有情况下会发生什么：

*   `WIDE`字节码会发生什么？它会自动折叠到下一条指令中吗？大概是这样，但我找不到任何明确说明的内容
*   是否所有 Ldc 指令 ( `LDC`, `LDC_2`, `LDC_2W`) 都映射到 LdcInsnNodes？大概是这样，但文档没有说

一般来说，有没有方便的java字节码-> ASM类的映射？我正在对 java 字节码序列（即方法体）进行一些处理，并想检查我可能收到的所有字节码（大约 200 个左右）是否映射到我正在正确处理的 ASM 数据结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:10:32.610

是的，你是正确的 LDC 指令和 WIDE。

ASM 没有将 Java 字节码中的操作码映射到`org.objectweb.asm.Opcodes`接口的 Java-doc ( [http://asm.ow2.org/asm40/javadoc/user/index.html](http://asm.ow2.org/asm40/javadoc/user/index.html) )中提到的 API

> `public interface Opcodes`
> 
> 定义 JVM 操作码、访问标志和数组类型代码。这个接口没有定义所有的 JVM 操作码，因为一些操作码是自动处理的。例如，如果可能，xLOAD 和 xSTORE 操作码会自动替换为 xLOAD_n 和 xSTORE_n 操作码。因此，此接口中未定义 xLOAD_n 和 xSTORE_n 操作码。LDC 也是如此，必要时自动替换为 LDC_W 或 LDC2_W，WIDE、GOTO_W 和 JSR_W。

这会转化为 ASM 中的其他 API。

这也可以在这里确认：

> 首先请注意，ASM 不提供与原始字节码的精确一对一映射... - [http://osdir.com/ml/java.objectweb.asm/2008-03/msg00031.html](http://osdir.com/ml/java.objectweb.asm/2008-03/msg00031.html)

对于您问题的第二部分，您可以尝试使用常见问题解答中提到的 ASMifer：[http](http://asm.ow2.org/doc/faq.html#Q10) ://asm.ow2.org/doc/faq.html#Q10 。它基本上会列出您必须使用 ASM 调用以创建给定字节码指令序列的 Java 指令。

# cocos2d-x - 为什么使用 CC_BREAK_IF？

> ID：15029951
> 
> 赞同：1
> 
> 时间：2013-02-22T17:30:07.167
> 
> 标签：cocos2d-x

我正在学习 cocos2d-x，对此我有一个易读性的问题。为什么你们使用只做中断的宏？这有什么好处？

很抱歉问了这样一个蹩脚的问题，但我对此很感兴趣，因为我认为它需要更多的时间才能理解示例代码，这要归功于这些宏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:17:12.600

宏听起来像是在给定条件下触发的程序断点（**不是break 语句）。**应用程序停止，您可以从那里进行调试。与在 IDE 中设置断点相同。

# matrix - 矩阵 8x5 问题无法解决

> ID：15029953
> 
> 赞同：0
> 
> 时间：2013-02-22T17:30:10.030
> 
> 标签：matrix, implementation, calculated-columns

**我只是在学习矩阵和算法。我提出了一个我还无法解决的问题。问题是，**

由整数值组成的矩阵

```
#[0 0 0 2 2]
#|1 1 7 2 2|
#|2 2 7 2 1|
#|2 1 7 4 4|
#|2 7 7 4 4|
#|4 6 6 0 4|
#|4 4 6 4 4|
#[4 4 6 4 4] 
```

**当几个相同的值连接在一起（水平或垂直）时定义一个区域例如上面的矩阵，我们可以找到以下区域**

```
#[0 0 0 * *]
#|* * * * *|
#|* * * * *|
#|* * * * *|
#|* * * * *|
#|* * * * *|
#|* * * * *|
#[* * * * *]

#[* * * 2 2]
#|* * * 2 2|
#|* * * 2 *|
#|* * * * *|
#|* * * * *|
#|* * * * *|
#|* * * * *|
#[* * * * *]

#[* * * * *]
#|1 1 * * *|
#|* * * * *|
#|* * * * *|
#|* * * * *|
#|* * * * *|
#|* * * * *|
#[* * * * *] 
```

**问题在于实现函数“Find Count Element Of Biggest Area”，它找到最大的区域（由最多元素组成的区域），并返回该区域的元素数量。例如上面的矩阵，最大的面积是：**

```
#[* * * * *]
#|* * * * *|
#|* * * * *|
#|* * * 4 4|
#|* * * 4 4|
#|* * * * 4|
#|* * * 4 4|
#[* * * 4 4] 
```

**因此该函数将返回 9（该区域由 9 个元素组成）。**

请对这个问题有任何帮助，我该如何解决？最好的办法 ？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T12:02:35.743

好的！我忍不住做你的作业...

以下 C# 代码使用递归函数来计算给定矩阵单元的所有未访问邻居。主程序循环遍历所有行和列以找到具有相同内容的邻居数最多的单元格。

```
namespace akArrayCluster
{
    class Program
    {
        static void Main(string[] args)
        {
            int[,] a = new int[,] 
            {
                {0, 0, 0, 2, 2},
                {1, 1, 7, 2, 2},
                {2, 2, 7, 2, 1},
                {2, 1, 7, 4, 4},
                {2, 7, 7, 4, 4},
                {4, 6, 6, 0, 4},
                {4, 4, 6, 4, 4},
                {4, 4, 6, 4, 4}
            };
            int row;
            int col;
            int res = getBiggestArea(a, out row, out col);

            o("");
            o("Biggest area has " + res + " cells");
            o("Top-left cell is [" + row + ";" + col + "]");
        }

        static int getBiggestArea(int[,] a, out int row, out int col)
        {
            int opt = 0;
            int cnt;
            int rows = a.GetLength(0);
            int cols = a.GetLength(1);
            bool[,] visited = new bool[rows, cols];

            row = col = -1;

            for (int r = 0; r < rows; r++)
                for (int c = 0; c < cols; c++)
                {
                    setAllToFalse(visited, rows, cols);

                    cnt = getNeighbourCount(a[r, c], a, visited, r, c);
                    if (cnt > opt)
                    {
                        opt = cnt;
                        row = r;
                        col = c;
                    }
                }

            setAllToFalse(visited, rows, cols);   //  edited col --> cols
            getNeighbourCount(a[row, col], a, visited, row, col);
            showSolution(a, visited, rows, cols);

            return opt;
        }

        static void setAllToFalse(bool[,] v, int rows, int cols)
        {            
            for (int row = 0; row < rows; row++)
                for (int col = 0; col < cols; col++)
                    v[row, col] = false;
        }

        static void showSolution(int[,] a, bool[,] visited, int rows, int cols)
        {
            string s;

            o("");
            for (int row = 0; row < rows; row++)
            {
                s = "";
                for (int col = 0; col < cols; col++)
                {
                    s += " " + (visited[row, col] ? a[row, col].ToString() : ".");
                }

                o(s);
            }
        }

        static int getNeighbourCount(int ca, int[,] a, bool[,] visited, 
                                     int row, int col)
        {
            int nc = 0;
            int rows = a.GetLength(0);
            int cols = a.GetLength(1);

            if ((row >= 0) && (row < rows) && 
                (col >= 0) && (col < cols) && 
                (ca == a[row, col]) && !visited[row, col])
            {
                visited[row, col] = true;

                nc = 1
                    + getNeighbourCount(ca, a, visited, row, col - 1)
                    + getNeighbourCount(ca, a, visited, row - 1, col)
                    + getNeighbourCount(ca, a, visited, row, col + 1)
                    + getNeighbourCount(ca, a, visited, row + 1, col);
            }

            return nc;
        }

        static void o(string s)
        {
            System.Console.WriteLine(s);
        }
    }
} 
```

运行程序的结果：

```
 . . . . .
 . . . . .
 . . . . .
 . . . 4 4
 . . . 4 4
 . . . . 4
 . . . 4 4
 . . . 4 4

Biggest area has 9 cells
Top-left cell is [3;3] 
```

第二个例子（参见下面的评论）：

```
 . 2 2 2 2
 2 2 2 2 2
 . . . 2 2
 . . . . 2

Biggest area has 12 cells
Top-left cell is [0;1] 
```

# ssl - Nginx：NonWWW（80）和重写一个子域（443）

> ID：15029955
> 
> 赞同：0
> 
> 时间：2013-02-22T17:30:19.847
> 
> 标签：ssl, nginx, rewrite, subdomain, port

我有“www.domain.com”并希望始终将其重写为“domain.com”（仅可通过/在端口 80 上使用）

我还想添加像'c.domain.com'这样的子域，总是重写（并且只可用）到' [https://c.domain.com](https://c.domain.com) '，但我真的不知道如何在我有的时候进行另一个重写这适用于 WWW->NonWWW。

这是我的配置：

```
ssl_certificate /etc/nginx/certs/server.crt;
ssl_certificate_key /etc/nginx/certs/server.key;

server  {
        listen                     80;
        server_name                www.domain.com;
        # redirect www to non-www
        rewrite                    ^/(.*) http://domain.com/$1 permanent;   
}

server {
        listen                     80;
        server_name                domain.com;
        root                       /usr/share/nginx/$host;
        index                      index.php index.html index.htm;

        location / {
                try_files          $uri $uri/ /index.php?$args =404;
                #try_files          $uri $uri/;
        }

        # PHP-FPM
        location ~* \.php$ {
                try_files          $uri =404;
                include            fastcgi_params;
                fastcgi_pass       unix:/var/run/php5-fpm.sock;
                fastcgi_param      SCRIPT_FILENAME     $document_root$fastcgi_script_name;
                fastcgi_param      SCRIPT_NAME         $fastcgi_script_name;
        }

}

server {
  listen           443 default_server ssl;
  server_name      c.domain.com;
  root                       /usr/share/nginx/$host;
  index                      index.php index.html index.htm;

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:24:00.260

```
server  {
    listen       80;
    server_name  www.domain.com;

    return 301 http://domain.com$request_uri;
}

server {
    listen       80;
    server_name  domain.com;

    [...]
}

server  {
    listen       80;
    server_name  c.domain.com;

    return 301 https://c.domain.com$request_uri;
}

server {
    listen       443 default_server ssl;
    server_name  c.domain.com;

    [...]
} 
```

文档：

*   [http://nginx.org/r/server_name](http://nginx.org/r/server_name)
*   [http://nginx.org/r/return](http://nginx.org/r/return)
*   [http://nginx.org/en/docs/http/server_names.html](http://nginx.org/en/docs/http/server_names.html)
*   [http://nginx.org/en/docs/http/configuring_https_servers.html](http://nginx.org/en/docs/http/configuring_https_servers.html)

# mysql - MySQL | 选择不同的记录

> ID：15029959
> 
> 赞同：0
> 
> 时间：2013-02-22T17:30:45.887
> 
> 标签：mysql, sql, greatest-n-per-group

我有那个基础：[http](http://sqlfiddle.com/#!2/e5a24/2) ://sqlfiddle.com/#!2/e5a24/2，它是 WordPress 默认模式的简写。我已经删除了该示例不需要的字段。

如您所见，在结果中我有两倍的“类别 1”。我喜欢做的是只获取“Category 1”的最新实例。

该 SQL 的正确结果如下：

```
POSTID  POSTTITLE   CATEGORYID  CATEGORYNAME    DATE
--------------------------------------------------------------
2   2st Game    2   Category 2  January, 01 2013 00:00:00+0000
3   1st Game    1   Category 1  January, 15 2013 00:00:00+0000 
```

我已经尝试按“CategoryID”分组，但是虽然我在结果中只获得了类别 1 的一个实例，但我得到的是较旧的，而不是属于“类别 1”的最早记录。

对此有任何想法，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T17:34:17.350

```
SELECT  a.ID AS PostID,
        a.post_title AS PostTitle,
        c.meta_value AS CategoryID,
        d.name AS CategoryName,
        a.post_date AS Date
FROM    wp_posts a
        INNER JOIN
        (
            SELECT  post_title, MAX(post_date) max_date
            FROM    wp_posts
            GROUP   BY post_title
        ) b ON a.post_title = b.post_title AND
                a.post_date = b.max_date
        INNER JOIN  wp_postmeta c
            ON a.ID = c.post_ID
        INNER JOIN wp_terms d
            ON c.meta_value = d.term_ID
WHERE   c.meta_key = 'matchdayTeamsCategory' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/e5a24/16)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:33:50.497

您必须在 GROUP BY 中使用 MIN(Date)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T17:35:59.437

使用按日期排序 DESC 获取最新的“类别 1”

# c# - 只有一个表格是一个好习惯吗？

> ID：15029968
> 
> 赞同：1
> 
> 时间：2013-02-22T17:31:09.643
> 
> 标签：c#, winforms, design-patterns

我本质上是一名网络开发人员，但我想知道在桌面应用程序（winforms）中拥有一个主表单是否是一种好习惯，我的意思是登录表单、主表单、帮助表单……只需渲染/删除单个表单中的控件？还是每个人都有一个新表格更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T17:32:49.547

我建议不要这样做。维持所有这种状态将是一场噩梦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T17:33:04.663

通常最好为每个表单设置一个表单，主要是为了便于维护，但它也有助于应用程序的整体设计。例如，如果登录是专用表单，您可以根据需要在应用程序的任何位置重用该登录对话框，例如用户在登录后是否超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T17:34:04.753

我更喜欢为每个单独使用单独的表单，这完全取决于您设计应用程序的方式

# python - Python 子进程 check_output 和调用为 pwgen 的相同参数产生不同的结果

> ID：15029969
> 
> 赞同：3
> 
> 时间：2013-02-22T17:31:13.760
> 
> 标签：python, subprocess

我正在使用 subprocess`call()`方法执行`pwgen`实用程序来创建 12 个字符的密码。当我使用`check_output()`相同的参数时，我会得到不同的结果。

这是一个工作代码片段：

```
import tempfile
import subprocess
import os

f = tempfile.NamedTemporaryFile(delete=False)
f.write('random data\n')
f.close()
subprocess.call(['/usr/bin/pwgen', "-H", f.name, "12", "1"])
print subprocess.check_output(['/usr/bin/pwgen', "-H", f.name, "12", "1"])
os.unlink(f.name) 
```

示例输出为：

> rioH7IeSu6th
> giyahvoopehi

我希望这两种情况下的结果都是一样的。有谁知道我需要做什么才能获得输出`check_output()`和`call()`匹配？

# javascript - 是否可以在 Jasmine.Js 的 toEqual 中检查多种类型？

> ID：15029971
> 
> 赞同：6
> 
> 时间：2013-02-22T17:31:16.647
> 
> 标签：javascript, jasmine

我对 Jasmine 很陌生，遇到了我期望 String 或 null 的情况。我试图在 toEqual 中做 or ，但我看到了一些奇怪的结果，这让我相信我正在以错误的方式解决这个问题。处理这种情况的最佳方法是什么？

也许我只是在进行错误的测试。我是否应该放弃使用一个测试来测试两种情况的想法？

```
describe("Jasmine", function () {

    //1
    it("should be able to handle any(String) || null within toEqual for string", function () {
        expect("aString").toEqual(jasmine.any(String) || null);
    });

    //2
    it("should be able to handle any(String) || null within toEqual for null", function () {
        expect(null).toEqual(jasmine.any(String) || null);
    });

    //3
    it("should be able to handle null || any(String) within toEqual for string", function () {
        expect("aString").toEqual(null || jasmine.any(String));
    });

    //4
    it("should be able to handle null || any(String) within toEqual for null", function () {
        expect(null).toEqual(null || jasmine.any(String));
    });
}); 
```

1.  经过
2.  `Expected null to equal <jasmine.any(function String() { [native code] })>.`
3.  经过
4.  `Expected null to equal <jasmine.any(function String() { [native code] })>.`

我意识到还有一个 toBeNull() 这可能是结果如此不稳定的原因，但是没有“或”链接我不知道如何合并它。

（运行 Jasmine 1.3.1 修订版 1354556913）

*解决了！如果有人感兴趣，下面的完整解决方案*

```
describe("Jasmine", function () {

    beforeEach(function () {
        this.addMatchers({

            toBeStringOrNull: function () {
                var actual = this.actual;

                this.message = function () {
                    return "Expected " + actual + " to be either string or null";
                };

                return typeof actual === 'string' || actual instanceof String || actual === null;
            }

        });
    });

    //1
    it("should be able to handle any(String) || null within toEqual for string", function () {
        expect("aString").toBeStringOrNull();
    });

    //2
    it("should be able to handle any(String) || null within toEqual for null", function () {
        expect(null).toBeStringOrNull();
    });

    //3
    it("should be able to handle null || any(String) within toEqual for string", function () {
        expect("aString").toBeStringOrNull();
    });

    //4
    it("should be able to handle null || any(String) within toEqual for null", function () {
        expect(null).toBeStringOrNull();
    });
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-25T23:15:30.687

编写您自己的自定义匹配器：

```
toBeStringOrNull: function() {
  var actual = this.actual;

  this.message = function () {
    return "Expected " + actual + " to be either string or null";
  }

  return typeof actual === 'string' || actual instanceof String || actual === null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T20:57:14.383

如果您绝对希望这些案例在同一个测试中工作，您可以编写自己的[matcher](https://github.com/pivotal/jasmine/wiki/Matchers)。就像是

```
toBeStringOrNull: function() {
  var actual = this.actual;

  this.message = function () {
    return "Expected " + actual + " to be either string or null";
  }

  return jasmine.any(String) || actual === null;
} 
```

# android - android的Horizo ntalScrollView中的大差距

> ID：15029975
> 
> 赞同：0
> 
> 时间：2013-02-22T17:31:37.817
> 
> 标签：android, android-layout

我有一个 Horizo​​ntalScrollView 和一个线性布局

```
 <HorizontalScrollView
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:id="@+id/filesScrollerLayout"
        android:orientation="horizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    </LinearLayout>
</HorizontalScrollView> 
```

Programmaticaly 我正在尝试通过以下方式在 linearLayout 中添加视图：

```
 LinearLayout layout = (LinearLayout)findViewById(R.id.filesScrollerLayout);

     ImageView imageView1 = new ImageView(this);
     ImageView imageView2 = new ImageView(this);
     ImageView imageView3 = new ImageView(this);
     imageView1.setImageDrawable(Drawables);
     imageView2.setImageDrawable(Drawables);
     imageView3.setImageDrawable(Drawables); 
```

问题是在水平滚动视图中，图像之间有很大的差距。我只希望图像彼此相邻。我怎样才能成功？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-17T18:26:51.353

如果内容是 ImageViews，请设置：

```
android:adjustViewBounds="true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:28:52.520

将边距和填充设置为`"0dp"`

就像这里

```
<HorizontalScrollView
android:id="@+id/scrollView"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_margin="0dp"
android:padding="0dp">

<LinearLayout
    android:id="@+id/filesScrollerLayout"
    android:orientation="horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="0dp"
    android:padding="0dp">
</LinearLayout>
</HorizontalScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T06:21:23.623

If using ImageView generated at runtime, use umagView.setAdjustViewBounds(true);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-17T01:53:04.190

我也有同样的问题。您必须按比例缩小图像才能使其正常工作。

用这个 ：

位图 b = BitmapFactory.decodeByteArray(imageAsBytes, 0, imageAsBytes.length) profileImage.setImageBitmap(Bitmap.createScaledBitmap(b, 120, 120, false));

# c++ - c++ boost asio | 同步写入到异步读取 | 无法在第二次读取中接收正确的数据

> ID：15029977
> 
> 赞同：1
> 
> 时间：2013-02-22T17:31:47.200
> 
> 标签：c++, boost, asynchronous, boost-asio

**介绍：**

我正在尝试使用 c++ 和 boost::asio 制作服务器/客户端应用程序，我还尝试通过连续异步读取在另一端接收同步写入。例如，我的服务器异步读取固定字节长度的数据流，然后它移动到客户端同步写入发送的下一个字节。

**问题：**

在连续异步读取中，第一个流字节被正确读取，但是当它继续下一次异步读取时，从另一端发送的东西与我期望的相同字节长度，但它是垃圾，或者我无法将其转换为有价值的数据。

**编码：**

```
 private:
      static const int MAX_MTU = 1500;  //Ethernet Maximum Transfer UNIT (MTU)...
      static const int TRASH_CAN = 100; //Amount to substract from the MAX_MTU to make room for basic packet structure elements.
      static const int BUFFER_SIZE = MAX_MTU - TRASH_CAN;
      boost::mutex mutex;
      typedef char* data_bytes;
      std::list<data_bytes> data;

    private:
      tcp::socket socket_;
      boost::asio::io_service& io_service_;
      moqane::tcp_packet *packet_;

    // CTOR for the incoming connection from a client to the server
    public: tcp_session(boost::asio::io_service& io_service)
      : io_service_(io_service),
        socket_(io_service),
        packet_(new moqane::tcp_packet())
    {
        // ......
    }

    // CTOR for the outgoing clinet connection to the server...
    public: tcp_session(boost::asio::io_service& io_service, tcp::resolver::iterator endpoint_iterator)
      : io_service_(io_service),
        socket_(io_service),
        packet_(new moqane::tcp_packet())
    {
        boost::asio::async_connect(socket_,
                                   endpoint_iterator,
                                   boost::bind(&tcp_session::connect_to_server_hndlr,
                                               this,
                                               boost::asio::placeholders::error)
                                   );
    }

    tcp::socket& socket()
    {
        return socket_;
    }

    public:
    void read_header()
    {

        read_packet(packet_->HEADER_LENGTH,
                    boost::bind(
                            &moqane::tcp_session::read_header_hndlr,
                            shared_from_this(),
                            packet_->HEADER_LENGTH,
                            boost::asio::placeholders::error)
                    );
    }

    private:
    void connect_to_server_hndlr(const boost::system::error_code& error)
    {
        if (!error)
        {
            read_header();
        }
        else
        {
            // TODO: fire the error event...
        }
    }

    private:
    template <class T>
    void read_packet(int packet_length, T handler)
    {
        /*
        Packet Structure: (Mohamed Tarek (moqane))
        ==============================================================================================
        HEADER: could be a 3 or 4 bytes that give enough information to the endpoint on how to receive
                those bytes.
        SIZE  : A 4 byte-length number that tell the endpoint how much data in bytes ar comming.
                ex: 0340 which should tell us that the incoming data are 340 bytes, so we will not
                receive more or less than that.
        DATA  : the incoming valuable information that we want to receive in the first place.

        ---------------------------------------------
        |        |      |                            |
        | HEADER | SIZE | DATA...                    | ----> PACKET
        |   3b   |  4b  | N/A b                      |
        ----------------------------------------------
        ==============================================================================================
        */

        if (data.size() > 0)
        {
            data.clear();
        }

        char d[moqane::tcp_session::BUFFER_SIZE];
        data.push_back(d);
        boost::asio::async_read(socket_,
                                boost::asio::buffer(data.back(), packet_length),
                                handler
                                );
    }

    private:
    void write_packet(char* data_bytes)
    {
        boost::asio::write(socket_, boost::asio::buffer(data_bytes, sizeof(data_bytes)));

    }

    private:
    void write_packet_hndlr(const boost::system::error_code& error)
    {
        if (!error)
        {
        }
        else
        {
        }
    }

    private:
    void read_header_hndlr(int packet_length, const boost::system::error_code& error)
    {
        if (!error)
        {
            // convert bytes to wxstring
            // wxString s = moqane::wx2string::To_wxString(packet_->DATA(), packet_->HEADER_LENGTH());

            // convert our bytes to string
            std::string header(data.back(), packet_length);

            if (packet_->is_header(header))
            {
                // read the SIZE packet
                read_packet(packet_->SIZE_LENGTH,
                            boost::bind(
                                    &moqane::tcp_session::read_size_hndlr,
                                    shared_from_this(),
                                    packet_->SIZE_LENGTH,
                                    header,
                                    "",
                                    boost::asio::placeholders::error)
                            );
            }
            else
            {
                // reread the HEADER packet if it's not a valid header
                read_header();
            }
        }

        else
        {
            // TODO: fire the error event...
        }

    }

    private:
    void read_size_hndlr(int packet_length, std::string header, std::string info, const boost::system::error_code& error)
    {
        if (!error)
        {
            std::string str_length(data.back(), packet_length);

            int next_packet_length = moqane::number2string::ToInt(str_length);

            if (next_packet_length > 0)
            {
                if (header == packet_->HEADER_STRING)
                {
                    read_packet(next_packet_length,
                                boost::bind(
                                        &moqane::tcp_session::read_STRING_hndlr,
                                        shared_from_this(),
                                        next_packet_length,
                                        boost::asio::placeholders::error)
                                );
                }
                else if (header == packet_->HEADER_COMMAND)
                {

                }
                else
                {
                    // reread the HEADER packet if it's not a valid header
                    read_header();
                }
            }
            else
            {
                // reread the HEADER packet if it's not a valid size
                read_header();
            }
        }
        else
        {
            // TODO: fire the error event...
        }
    }

    private:
    void read_STRING_hndlr(int packet_length, const boost::system::error_code& error)
    {
        std::string std_str(data.back(), packet_length);
        std::string v = "";
    }

    public:
    void write_STRING(char* string_data)
    {
        boost::mutex::scoped_lock lock(mutex);
        {
            write_packet(moqane::number2string::To_CharArray("STR"));
            write_packet(moqane::number2string::To_CharArray("xxx1"));
            write_packet(moqane::number2string::To_CharArray("a"));
        }
    }

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:41:14.460

I suspect the problem lies in `read_packet`

```
 char d[moqane::tcp_session::BUFFER_SIZE];
    data.push_back(d);
    boost::asio::async_read(socket_,
                            boost::asio::buffer(data.back(), packet_length),
                            handler
                            ); 
```

This is creating a buffer d, in a local variable. You then push a pointer to d into `data`, which is then used to form the buffer for async_read. You then leave the function. This causes the array to be destroyed, with several dangling pointers, including the async_read.

I would recommend creating the buffer for the header, named something like 'header' to be part of your class. I'm not sure you need the separate `data` vector either.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:58:19.423

现在解决了，主要问题是在`packet_length`发送时构造缓冲区时出错。`sizeof()`因为根据我的处理器架构，我得到的长度总是返回 4。所以我现在使用以下函数得到 char* 的长度。

```
public:
    static int CharArray_Length(char* somedata)
    {
        std::list<char> l;

        while(*somedata != 0)
            l.push_back(*somedata++);

        // If you want to add a terminating NULL character
        // in your list, uncomment the following statement:
        // l.push_back(0);

        return l.size();
    } 
```

参考：[https ://stackoverflow.com/a/15034741/1301186](https://stackoverflow.com/a/15034741/1301186)

# winforms - c++.cli Windows窗体中的矩形动态数组

> ID：15029979
> 
> 赞同：0
> 
> 时间：2013-02-22T17:32:11.030
> 
> 标签：winforms, visual-c++, c++-cli

我正在用 C++/CLI Windows 窗体制作一个蛇游戏。
我需要你的帮助来制作
**动态（System::Drawing::Rectangle）数组，当我调用某个事件时增加数组-> 长度**...
简而言之是可能的当我调用某个事件时增加数组的长度......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:03:40.050

我建议研究动态数组，但从你的帖子来看，在你掌握这一技能之前，你有一点点诡计。

但是是的，如果您使用动态数组/内存，这是可能的。

我希望这会有所帮助我不会写出如何制作自己的动态数组，因为写出来需要很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:34:13.030

答案是：不，没有自动增加数组长度的方法

数组必须在创建时指定其长度。

所以，你真的有两个选择：

1.  当您想增加数组的长度时，请创建一个新数组并将旧数组复制到其中
2.  使用其他集合类之一。List 类的行为非常接近，您可以使用 [] 运算符，此外，您可以在任何位置（开始、中间、结束）插入新项目，并且它与 foreach 循环一起使用。而且，如果您绝对需要，可以使用 ToArray 方法获取数组

仅当您不经常调整数组大小时，我才建议使用选项 1。

# objective-c - Rails API 与 iOS

> ID：15029982
> 
> 赞同：0
> 
> 时间：2013-02-22T17:32:28.293
> 
> 标签：objective-c, ruby-on-rails, api, devise, afnetworking

我有一个 Rails 应用程序，需要用户使用 devise 登录。登录后，用户可以创建位置并添加菜单。我想通过使用 AFnetworking 的 iOS 应用程序访问 api，但是在验证 iOS 应用程序时，我想访问整个 API 而不仅仅是一个位置数据。

示例：用户打开 ios 应用程序，单击位置，选择位置，选择啤酒菜单，显示来自 api 的啤酒列表。

当 rails 端的身份验证允许访问一个位置结果时，我该怎么做？

我希望 iOS 用户能够访问整个 api，我在 rails 控制台中将其视为 Location.all 和 Beer.all

调用 beers.json 端点时我在 xcode 中得到的输出

```
2013-02-22 09:44:25.834 BeerList[23137:c07] Error fetching beers!
2013-02-22 09:44:25.835 BeerList[23137:c07] Error Domain=com.alamofire.networking.error Code=-1011 "Expected status code <NSIndexSet: 0x6a3ee70>[number of indexes: 100 (in 1 ranges), indexes: (200-299)], got 500" UserInfo=0xbe29090 {NSErrorFailingURLKey=http://localhost:3000/beers.json, NSLocalizedDescription=Expected status code <NSIndexSet: 0x6a3ee70>[number of indexes: 100 (in 1 ranges), indexes: (200-299)], got 500} 
```

我认为这是因为 iOS 应用程序未经过身份验证。如果我要传递用户名和密码，我假设它会给我该用户位置的数据，但不是所有位置。有没有办法对 iOS 应用程序进行身份验证，以便它可以检索所有位置数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:52:17.757

只需创建一个没有位置的超级用户。在您的 Rails 应用程序中实施一种机制，允许为该用户检索所有位置。iOS 应用程序可以简单地以超级用户身份登录。

由于您没有共享任何代码，这就是我们可以告诉您的全部内容。

# mfc - 在 MFC 中从文档类创建无模式对话框

> ID：15029984
> 
> 赞同：1
> 
> 时间：2013-02-22T17:32:34.543
> 
> 标签：mfc

从我的文档类创建模式对话框没有问题。只需将以下内容添加到 Document 类：

```
CDialog dlg;

dlg.DoModal(); 
```

但是当我想为无模式对话框做同样的事情时它不起作用：

```
CDialog * pDialog;  
pDialog = new CDialog();
pDialog->Create(IDD_DIALOG, this); 
```

我得到的错误是： `error C2664: 'BOOL CDialog::Create(LPCTSTR,CWnd *)' : cannot convert parameter 1 from 'int' to 'LPCTSTR'`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:03:21.527

我想你需要的是

```
pDialog->Create(MAKEINTRESOURCE(IDD_DIALOG), this); 
```

# mule - 需要澄清 mule 中的变量

> ID：15029987
> 
> 赞同：0
> 
> 时间：2013-02-22T17:32:47.050
> 
> 标签：mule

我对 mule 中的变量几乎没有疑问。

1.  如果我有如下所示的有效载荷，

在 Groovy 脚本中访问这些信息的最佳方式是什么？#[有效负载] 似乎不起作用...

```
<scripting:script engine="Groovy">
...
qr.update(conn, "INSERT INTO event values(#[payload], 1)");
..
</scripting:script> 
```

1.  如何将来自流中特定点的值存储到我可以在以后的任何时间点使用的变量中。

2.  如果我有一个字符串类型的有效负载，并且我需要使用自定义 java 类解析字符串（以获取各种数据）。如何从 java 类中取回值。

例如，我有一个字符串如下，

```
SNO           :1
Application   : a 
```

我有一个解析字符串并使用 get set 方法返回值的 java 类。

CustomString.class 只是一个 bean。

getSno 将返回序列号。getApplication 将返回应用程序名称

我不确定如何将值从 mule 传递给 java 类并将值返回给 mule。

我需要使用，

```
public Object transform(MuleMessage message, String encoding) throws TransformerException 
```

如果下面的初始有效负载具有上述字符串，我可以将此有效负载传递给自定义转换器并从转换器中获取所需的值吗？

```
<set-payload value="values #[payload]" doc:name="Set Payload" />
<transformer ref="customTransformer" doc:name="Transform string"/>
<set-payload value="values #[payload['sNo']]" doc:name="Set Payload" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:19:44.217

1.  在 Groovy 中，`payload`变量绑定到消息负载。您可以直接使用它。`#[payload]`是 MEL 表达式，与 Groovy 无关。

2.  这取决于您所说的“任何时间点”是什么意思。如果它在同一个流或被它引用的流中，您可以使用`set-variable`. 如果它在端点交互（出站 -> 入站）后位于另一个流中，请使用`set-property`，您将在下一个流中找到入站范围内的值。或者，您可以使用`set-session-variable`将值存储在 Mule 会话中，该会话将跨流维护。

3.  如上所示，要么创建一个转换器，要么只使用一个普通的 POJO 作为`component`一个单一的方法，该方法接受一个字符串并返回 Bean。后一种方法的优点是它不会将您绑定到 Mule API。

# sql - 将 SQL CAST 与从数据库中检索到的转换类型一起使用

> ID：15029993
> 
> 赞同：0
> 
> 时间：2013-02-22T17:33:28.343
> 
> 标签：sql, sql-server, casting, sql-server-2012, varchar

只是想知道这是否可能，如果是这样......怎么办？

表（**Foos**）：

```
Column   Value
Id       int pk autoinc
Type     varchar(50) not null
Name     varchar(50) not null
Value    varchar(50) 
```

当我这样做时，`SELECT * FROM Foos`我得到以下信息：

```
Id       Type          Name         Value
-------------------------------------------------
1        int           MaxScore     '100'
2        varchar(50)   Greeting     'hello world'
3        datetime      FollowupDate '01-01-2012' 
```

我希望能够创建一个返回记录（使用 Id）并在返回记录之前将记录转换为适当类型的 SP。我知道我可以轻松地按原样返回记录并使用应用程序将字符串转换为适当的类型......但我想这只是想知道这是否可以扩展知识和探索......沿着行：

```
SELECT Id, Name, CAST(Value AS [Type]) 
FROM Foos 
```

但是，我得到了错误：

> *消息 243，级别 16，状态 1，行 1
> 类型类型不是已定义的系统类型。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:38:35.193

我确信你可以使用动态 SQL 来做到这一点，但我不认为它会特别优雅。您是否考虑过将值存储为[sql_variant](http://msdn.microsoft.com/en-us/library/ms173829.aspx)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:01:31.287

这样的事情可能会给你你应得的：

```
declare @Samples as Table ( Id Int Identity, Type VarChar(32), Name VarChar(32), Value VarChar(32) )
insert into @Samples ( Type, Name, Value ) values
  ( 'int',         'MaxScore',     '100' ),
  ( 'varchar(50)', 'Greeting',     'hello world' ),
  ( 'datetime',    'FollowupDate', '01-01-2012' ),
  ( 'money',       'PriceEach',    '99.4' )

select Id, Name, Type, Value, case
  when Type = 'DateTime' then Cast( Convert( DateTime, Value, 104 ) as SQL_Variant )
  when Type = 'Int' then Cast( Cast( Value as Int ) as SQL_Variant )
  when Type = 'Money' then Cast( Cast( Value as Money ) as SQL_Variant )
  when Type like 'VarChar(%)' then Cast( Cast( Value as VarChar(8000) ) as SQL_Variant )
  else NULL end Variant
  from @Samples 
```

`VarChar`案例应该有额外的代码来解析长度并用于返回`SUBSTRING()`合适的长度。

愿狗怜悯你的灵魂。

# android - 按照 android 教程创建小部件，但小部件未显示在我的小部件列表中

> ID：15029995
> 
> 赞同：1
> 
> 时间：2013-02-22T17:33:47.170
> 
> 标签：android, android-widget

我在小部件列表中显示小部件时遇到问题，我的代码类似于[http://developer.android.com/guide/topics/appwidgets/index.html](http://developer.android.com/guide/topics/appwidgets/index.html)中提供的代码，我不确定是什么我做错了。显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.chibiclockwidget"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="8"/>
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Clock"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <reciever
            android:name=".ClockProvider" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>
            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_info" />
        </reciever>
    </application> 
</manifest> 
```

小部件信息：

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:minWidth="146dp"
    android:minHeight="72dp"
    android:updatePeriodMillis="86400000"
    android:previewImage="@drawable/yami"
    android:initialLayout="@layout/widget_layout"
    android:resizeMode="horizontal|vertical"
    android:widgetCategory="home_screen">
</appwidget-provider> 
```

小部件布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@null"
    android:gravity="center"
    android:orientation="horizontal"
    android:padding="@dimen/widget_margin" >
    <TextView
        android:id="@+id/widgetclock"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textAppearance="?android:attr/textAppearanceLarge" />
    <ImageView
        android:id="@+id/pics"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout> 
```

我真的无法在我的代码中找到任何错误，任何人都可以找出问题所在吗？另外，我正在我的 S3 上进行测试并使用不同的启动器，这会影响我应该如何设置小部件吗？

谢谢

# python - 到 Mayavi 的 Python 管道

> ID：15029998
> 
> 赞同：1
> 
> 时间：2013-02-22T17:33:50.480
> 
> 标签：python, mayavi

我正在尝试用 Python 编写一个程序，该程序需要与 Mayavi“对话”（例如，检查缩放级别），然后以某种方式对数据进行操作，然后重新检查参数等。我可以做到这一点使用 C 和 Gnuplot 在 C 和 gnuplot 之间使用 piplines ...但是在阅读 Mayavi 文档后，我似乎无法为 python 代码找到类似的东西（有 ipython 的说明，但我正在编写完整的代码） .

如何打开通往 Mayavi 的管道，以便 Python 可以访问 Mayavi 的对象属性，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T21:01:43.093

Mayavi 不会使用管道（术语说明：“管道”而不是“管道”）向其他进程公开控制。如果您想编写一个使用 Mayavi 进行可视化的 Python 程序，只需[将其用作库](https://github.com/enthought/mayavi/blob/master/examples/mayavi/standalone.py)即可。您引用的[“IPython”指令](http://docs.enthought.com/mayavi/mayavi/mlab.html)也适用于在成熟程序中使用。