# StackOverflow 问答 16108000-16108999

# php - 显示日期早于第一个项目 7 天的 RSS 项目

> ID：16108000
> 
> 赞同：0
> 
> 时间：2013-04-19T15:20:53.820
> 
> 标签：php, rss

我从这里拉一个 RSS 提要：http: [//feeds.bbci.co.uk/news/rss.xml](http://feeds.bbci.co.uk/news/rss.xml)

在我的 php 中，我有一个 $_GET['Date'] 函数。当在查询字符串中输入日期时，php 会显示自该日期以来发布的项目，如下所示：

```
$date1 = $_GET['Date'];
      $date2 = $item->pubDate;
      $publishdate = strtotime($date1);
      $entrydate = strtotime($date2);
      if ($publishdate > $entrydate) {
        continue;
      }

           ?> 
```

但是，如果没有在查询字符串中输入日期，则显示来自 RSS 的所有项目。我希望能够显示仅在第一个/最新项目前 7 天发布的项目，而不是发生这种情况。我从下面的 if 语句开始，但我不确定如何引用第一项：

```
<?php
     foreach($rss->channel->item as $item){
         if (empty($_GET)) { 
```

因此，如果 RSS 中的第一个条目的 pubDate 为：Fri, 19 Apr 2013 14:57:47 GMT，那么 php 将仅显示 2013 年 4 月 12 日以后发布的条目，也就是 19 日之前的 7 天。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:56:17.980

```
$rss = simplexml_load_file('http://feeds.bbci.co.uk/news/rss.xml');
//$last  = empty($_GET['Date'])?strtotime("-7 day", strtotime($rss->channel->item[0]->pubDate)):strtotime($_GET['Date']);
if(empty($_GET['Date']))
{
$date7daysago=date('dmY',strtotime("-7 day", strtotime($rss->channel->item[0]->pubDate)));
foreach($rss->channel->item as $item)
{
    if(date('dmY',strtotime($item->pubDate))===$date7daysago)
    {
     echo $item->title.'('.$item->pubDate.')<br>';
    } 
}
exit;
} 
```

# mysql - 如何将值插入到 MYSQL 中的自动标识列中

> ID：16108003
> 
> 赞同：21
> 
> 时间：2013-04-19T15:20:58.300
> 
> 标签：mysql, auto-increment, mysql-workbench

我想将值插入到 mysql innodb 表`Auto_Increment`列中。

我正在将旧表中的一些数据加载到具有标识的新表中，并且需要保留旧表中的现有值，因此我需要保留现有`Id`值，但保留`Auto_Increment`新值的列。

`insert`在 MS T- SQL中，我会`SET SET IDENTITY_INSERT MyTable ON`以`SET SET IDENTITY_INSERT MyTable OFF`.

我怎样才能在 MySQL 中做同样的事情？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-19T15:22:46.307

像往常一样做：

```
INSERT INTO my_table(auto_inc_field, other_field) VALUES(8547, 'some value'); 
```

如果值来自另一个表，您可以使用：

```
INSERT INTO my_table(auto_inc_field, other_field)
SELECT auto_inc_field, other_field FROM other_table; 
```

# javascript - 动画列表项后的回调函数

> ID：16108011
> 
> 赞同：0
> 
> 时间：2013-04-19T15:21:27.553
> 
> 标签：javascript, jquery, animation, callback, fadein

我在无序列表中的 (fadeIn()) 列表项中有一个动画淡入淡出。我有那么多工作，但我想在列表项全部可见后调用另一个函数 - 我猜这将是一个回调函数。

基本上，在我的 6 个列表项淡入之后，我想淡入它们之间的边界。就是这样！只是在放置回调函数时遇到问题，我一直在认为函数应该去的地方出现错误。

在此先感谢您的帮助

**HTML 代码：**

```
<header>
  <nav>
    <ul>
      <li>interior</li>
      <li>exterior</li>
      <li>apartments</li>
      <li>homes</li>
      <li>garages</li>
      <li>rooms</li>
    </ul>
  </nav>
</header> 
```

**Javascript代码：**

```
<script type="text/javascript">
$(document).ready(function() {
    var currentItem = null;
    var speed = 1000; //Speed of animation
    var gap = 700; //The delay between each list item fadeIn

    function showItemBorders() {

        $('ul li').css('border-left', 'border-left:1px solid #333').fadeIn('slow');

    } //My function that should be used as a callback when list items are finished

    function doNext() {
        if(currentItem==null) {
            currentItem = $('ul li:first'); //Get the first List Item
        }
        else if(currentItem.next().length!=0) {
            currentItem = currentItem.next();
        }
        setTimeout(function() {
            currentItem.fadeIn(speed, doNext);
        }, gap);
    }

    doNext();

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:32:01.853

你可以这样做：

```
if($('ul li:last').is(':visible')) {
   showItemBorders();
}else if(currentItem==null){
    // your code
}else if(currentItem.next().length!=0){
   // your code
} 
```

另一种方法是同时将它们全部淡入：

```
$('ul li').fadeIn(speed, showItemBorders()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:37:30.147

只需`showItemBorders`在条件中调用您的函数`else`并返回此函数即可停止超时：

```
 if (currentItem == null) {
        currentItem = $('ul li:first'); //Get the first List Item
    } else if (currentItem.next().length != 0) {
        currentItem = currentItem.next();
    } else {
        showItemBorders();
        return;
    } 
```

看到这个jsfiddle：http: [//jsfiddle.net/8WVVp/](http://jsfiddle.net/8WVVp/)

# adobe - ExtendScript：如何将 InDesign DOM 添加到 ExtendScript 对象模型查看器？

> ID：16108012
> 
> 赞同：1
> 
> 时间：2013-04-19T15:21:28.787
> 
> 标签：adobe, adobe-indesign, extendscript

我刚刚开始使用 Adob​​e InDesign 脚本。

我在另一个开发人员的 Windows 系统上看到 - 他会单击帮助->对象模型查看器 (Adobe ExtendScript Toolkit)，列出了多个对象模型，他可以从那里选择 inDesign DOM。

我刚刚安装了 InDesign CS6，而我的 ESTK 对象模型查看器仅显示 3 个模型 - i) Core JS 类 ii) scriptUI 类 iii) adobe bridge c6 对象模型

如何将 InDesign DOM 添加到列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:41:11.703

首先创建一个新文件，命名`connect_to_estk.jsx`为以下内​​容：

```
$.writeln("Connected to " + app.name + " " + app.version); 
```

然后将文件移动到`C:\Program Files (x86)\Adobe\Adobe InDesign CS6\Scripts\Scripts Panel`或类似。

接下来打开 InDesign 并按 Ctrl+Alt+F11 以显示“脚本”面板。（或选择窗口 > 实用程序 > 脚本。）

在 Scripts 面板中，展开 Application 面板，右键单击 connect_to_estk.jsx，然后选择“Run Script”。

如果 ESTK 窗口尚未打开，它现在将打开。ESTK 中的“JavaScript 控制台”窗格会显示类似`Connected to Adobe InDesign 8.0.0.370`.

在 ESTK 中，选择文件 > 新建。展开左上角的下拉菜单。InDesign 应该有一个条目。选择它。左边的链接应该是绿色的。如果没有，请单击它。

最后，打开对象模型查看器。Indesign DOM 现在应该在下拉菜单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:43:02.170

从目标下拉列表中选择 InDesign，然后按红色连接按钮。InDesign 应在第一次接触时创建对象模型 xml 文件。如果这样做没有帮助，请从 ESTK 中执行任何脚本，例如 $.writeln(app.name);

# c# - 检查事件条目/仅写入事件日志一次

> ID：16108013
> 
> 赞同：1
> 
> 时间：2013-04-19T15:21:29.487
> 
> 标签：c#, .net, vb.net

我如何阅读最后输入的事件日志，或者有没有其他方法可以限制只写一次相同的事件？这段代码会有所帮助，但是还有其他可用的方法吗？

```
EventLog eventLog;

eventLog = new EventLog();

eventLog.Log = eventLogName;

eventLog.Source = sourceName;

foreach (EventLogEntry log in eventLog.Entries)
{
    //log.Source - do your stuff
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:46:21.910

有一篇关于*读取和写入*事件*日志*的优秀文章。

> 从事件日志中读取时使用 Entries 成员。
> 
> 由于该属性是只读的，因此您无法使用 Entries 修改条目或写入日志。相反，指定一个 Source 并调用 WriteEntry 来写入一个新的日志条目。您可以使用 Entries 来统计事件日志中的条目数，并查看集合中的每个 EventLogEntry。使用索引的 Item 成员检索有关特定条目的信息，例如 Message、Category、TimeWritten 或 EntryType。
> 
> 仅从日志中读取时无需指定 Source。您只能为 EventLog 实例指定日志名称和 MachineName（服务器计算机名称）属性。在任何一种情况下，Entries 成员都会自动填充事件日志的条目列表。您可以为此列表中的项目选择适当的索引来读取各个条目。
> 
> 读取和写入日志条目之间的一个重要区别是不需要显式调用读取方法。指定 Log 和 MachineName 后，将自动填充 Entries 属性。如果更改 Log 或 MachineName 属性的值，则下次读取 Entries 属性时会重新填充它。

一个例子是：

```
using System;
using System.Diagnostics;

class MySample{

    public static void Main(){

        EventLog myLog = new EventLog();
        myLog.Log = "MyNewLog";                      
        foreach(EventLogEntry entry in myLog.Entries){
            Console.WriteLine("\tEntry: " + entry.Message);
        }    
    }       
} 
```

您显然希望创建一个能够根据某些标准过滤或整理您的请求的方法，以帮助限制您的选择。希望这会有所帮助。

您可能会遇到某些权限问题；因为它们与*EventLogPermissionAccess.Administer绑定到**管理员类别*。

 *[此处](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.entries.aspx)提供的信息直接来自 Microsoft 。*

# cakephp - 如何检查cakephp中的db中是否存在唯一值

> ID：16108018
> 
> 赞同：0
> 
> 时间：2013-04-19T15:21:43.113
> 
> 标签：cakephp

我想从外部源中保存一些数据，这些数据除了数据本身之外没有 id（例如来自 ebay api 的 Red、Used、Volvo 等）。

所以我已经像这样设置了我的表：

```
aspectHeaders
id INT AUTO_INCREMENT PRIMARY KEY
name varchar(30)
UNIQUE KEY `NAME`(`name`)

aspects
id INT AUTO_INCREMENT PRIMARY KEY
name varchar(30)
aspectHeader_id INT
UNIQUE KEY `DETAIL` (`aspectHeader_id`,`name`) 
```

aspectHeaders 将包含：

```
7 Manufacturer 
```

和方面将包含：

```
1 Volvo 7 
```

因此，在两个阶段中，我可以检查任一表中是否存在任何给定数据，如果不存在则将其插入。但我的问题是我可以在 1 个阶段完成吗？也就是说，是否有代码来检查数据是否存在，如果不存在则插入它，并且无论哪种方式都返回 id？

希望这足够详细。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:30:52.360

为此，我通常使用 touch() 之类的方法，它可以在内部完成所有的魔法。

```
// always returns id (or false on failure)
public function touch($data) {
    // check if it already exists
    if (exists) {
         // return id and do nothing
    }
    // create() and save()
    // return id or false if invalid data
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:03:39.250

如果“代码”是指单个 MySQL 语句，我认为没有。或者至少我认为不会进行过于复杂的多查询查询。

只需制作一个`alreadyExists()`方法（或其他东西）并在插入之前检查 - 例如：

```
if(!$this->MyModel->alreadyExists($data)) {
    //do insert here
} 
```

# xml - 访问数组的每个散列成员——Perl

> ID：16108019
> 
> 赞同：0
> 
> 时间：2013-04-19T15:21:45.350
> 
> 标签：xml, arrays, perl, hash

我正在尝试访问存储在 Perl 数组中的哈希的每个成员。我已经看到[循环遍历 Perl 中的哈希数组](https://stackoverflow.com/questions/4747637/looping-through-an-array-of-hashes-in-perl)，我需要一种更好的方法来访问它们。我的最终结果是将每个项目（哈希）拆分为一个数组，将该哈希的键存储在一个新数组中，将该数组的值存储在另一个数组中。

**编辑：我改变了他们获取数据的方式，以更好地反映我的代码。我不认为这很重要，但确实如此。**

# XML 源：

```
<XML>
    <computer>
        <network>
            <interface1>
                <name>eht0</name>
                <ip>182.32.14.52</ip>
            </interface1>
            <interface2>
                <name>eth2</name>
                <ip>123.234.13.41</ip>
            </interface2>
        </network>
    </computer>
</xml> 
```

# PERL 代码：

```
my %interfaceHash;
for(my $i=0; $i < $numOfInterfaces; $i++ ){
    my $interfaceNodes = $xmldoc->findnodes('//computer/network/interface'.($i+1).'/*');
    foreach my $inode ($interfaceNodes->get_nodelist){
        my $inetValue = $inode->textContent();
        if ($inetValue){
            my $inetField = $inode->localname;
            push (@net_int_fields, $inetField);
            push (@net_int_values, $inetValue);
        }
    }
    for(my $i =0; $i< ($#net_int_fields); $i++){
        $net_int_hash{"$net_int_fields[$i]"} = "$net_int_values[$i]";
    }
    push (@networkInterfaces, \%net_int_hash); #stores 
} 
```

现在，如果我尝试访问该数组，它会清除散列中存储的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:35:58.780

要在 Perl 中构建复杂的数据结构，请从阅读[perldsc - Perl Data Structures Cookbook](http://p3rl.org/perldsc)开始。

```
#!/usr/bin/perl
use warnings;
use strict;

my %interface1 = (iFaceName => 'eth0',
                  ipAddr    => '192.168.0.43',
                 );
my %interface2 = (iFaceName => 'eth1',
                  ipAddr    => '192.168.10.64',
                 );
my @networkInterfaces;
my @iFaceKeys;
my @iFaceVals;
push @networkInterfaces, \%interface1; # Note the backslash!
push @networkInterfaces, \%interface2;

for my $iFace (@networkInterfaces) {
    push @iFaceKeys, keys   %$iFace;
    push @iFaceVals, values %$iFace;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:36:18.673

您的问题是哈希不能是数组的成员。只有标量可以。

您在数组中需要的不是哈希，而是对哈希的标量**引用**：

```
push @networkInterfaces \%interface1; # \ is a reference taking operator 
```

然后，要访问该 hashref 的单个元素，您可以

```
$networkInterfaces[0]->{iFaceName}; # "->{}" accesses a value of a hash reference 
```

要访问整个哈希（例如获取其密钥），请使用`%{ hashref }`语法取消引用：

```
foreach my $key ( keys %{ $networkInterfaces[0] } ) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:33:52.757

一个很好的方法是创建一个哈希引用数组。

```
%first_hash = (a => 1, b => 2);
%second_hash = (a => 3, b => 4);

@array_of_hash_refs = ( \%first_hash, \%second_hash );

foreach $hash_ref (@array_of_hash_refs)
{
        print "a = ", $hash->{a}, "\n";
        print "b = ", $hash->{b}, "\n";
} 
```

请记住，perl 具有不同的语法来访问哈希数据，具体取决于您使用的是哈希对象还是对哈希对象的引用。

```
$hash_ref->{key}
$hash{key} 
```

# python - django unit test class based view error No JSON object could be decoded

> ID：16108020
> 
> 赞同：0
> 
> 时间：2013-04-19T15:21:47.027
> 
> 标签：python, django, unit-testing, django-testing

我想测试我的基于类的视图。

这是models.py文件：

```
class TodoList(models.Model):

    todoitem = models.CharField(max_length=200)
    description = models.TextField()
    pub_date = models.DateField(auto_now_add=True) 
```

这是我的views.py文件

```
class ListTodoView(ListView):

    model = TodoList
    template_name = 'todolist_listview.html' 
```

这是我的单元测试：

```
class TestToDoListView(TestCase):

    def test_list_view(self):
        url = reverse('notes-list')
        resp = self.client.get(url)
        self.assertEquals(resp.status_code, 200)
        data = json.loads(resp.content) # getting error here No JSON object could be decoded
        self.assertEquals(len(data), 1) 
```

我在做什么错误？我已经确定，我已经把所有的进口货都放好了。

这是堆栈跟踪：

```
======================================================================

ERROR: test_list_view 
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/.../tests/test_views.py", line 21, in test_list_view
    data = json.loads(resp.content)
  File "/usr/lib/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python2.7/json/decoder.py", line 384, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:29:22.723

你为什么要这样测试？您的 html 模板中的代码是什么？如果有html代码，像json数据一样测试是错误的。

如果您需要返回 json 数据，这是错误的做法。

# jquery - 在 href 中存储 POST 请求的数据 - 不好的做法？

> ID：16108021
> 
> 赞同：5
> 
> 时间：2013-04-19T15:21:47.633
> 
> 标签：jquery, ajax, node.js

我正在编写一个 node.js 应用程序，并且有点担心我如何构建发布数据以发送到服务器。例如，当我想删除一个数据项时，我将该项的 id 放在 href 属性中：

```
<a class='delete' href="1231">Delete this data</a>
<!-- href is based on a variable I'm pulling from the server --> 
```

单击该链接时，我会阻止默认操作，然后运行 ​​ajax 请求：

```
//On click + ajax
body.on('click', '.delete', function(e){
e.preventDefault();
    $.ajax({
        type: 'POST',
        url: '/admin/report/detail/delete',
    data: {id: $(this).attr('href')},
    success: function(){
        //Success message
    },
    error: function(){
        //Error message
    }
});
}); 
```

我想知道，以这种方式使用 href 属性是不好的做法吗？如果是这样，存储这些数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T15:24:18.033

请改用数据属性。将它们存储在 href 中不是语义的，如果您有时想存储 ID，而在其他时间存储其他数据怎么办？您可以根据需要创建任意数量的数据属性，并为其赋予语义名称。

```
<a class="delete" data-id="1231" href="#"> 
```

然后在你的javascript中：

```
...
data: { id: $(this).data('id') }
... 
```

或者

```
data: { id: $(this).attr('data-id') } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:26:07.840

老实说，无论你怎么做，你总是必须将要删除的记录的 ID 发送到服务器。即使您执行数据属性，这也不是问题所在，而是您通过 AJAX“通过线路”发送数据，以便人们可以看到 ID。

您需要考虑 - 好吧，这个 ID 可以更改，无论您多么聪明，人们都会找到一种方法来更改它并可能删除不同的客户 ID...所以...**始终**确保您进行相关的安全检查**服务器端**，即当前登录的用户是否能够删除正在发送的用户 ID？

# mysql - SQL 语法配置值选择

> ID：16108024
> 
> 赞同：0
> 
> 时间：2013-04-19T15:22:05.820
> 
> 标签：mysql, syntax

我在使用 mysql 语法时遇到了一些问题。我需要选择`config_value`3 个条目中的一个。

该表是`phpbb3_config`，它有2个字段

```
config_name | config_value 
```

我需要`config_value`来自 config_name > num_posts、num_topics、num_users

这是错误的:(

```
SELECT config_value
FROM  `phpbb3_config` 
WHERE config_name =  "num_posts"
AND config_name =  "num_topics"
AND config_name =  "num_users" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:25:37.397

`config_name`不能等于所有 3 个值。您需要使用`IN`：

```
SELECT config_value
FROM  `phpbb3_config` 
WHERE config_name IN ('num_posts', 'num_topics', 'num_users') 
```

# .net - 如何在组合框标题中定义所选元素的“短”名称

> ID：16108027
> 
> 赞同：0
> 
> 时间：2013-04-19T15:22:09.007
> 
> 标签：.net, silverlight, silverlight-4.0, combobox

我使用 Silverlight 4。有一个包含项目列表的 ComboBox。这些项目有“ToString()”：

```
public class SquadFlangViewModel
{
    static SquadFlangViewModel()
    {
        int iFlangValuesCount = (typeof(TacticGameFlangFlangEnum)).GetFields().Length;
        Names = new string[iFlangValuesCount];
        Names[(int)TacticGameFlangFlangEnum.Usual] = "Равномерно";
        Names[(int)TacticGameFlangFlangEnum.Left] = "Левый";
        Names[(int)TacticGameFlangFlangEnum.Center] = "Центр";
        Names[(int)TacticGameFlangFlangEnum.Right] = "Правый";
        Names[(int)TacticGameFlangFlangEnum.Sides] = "Фланги";
        Names[(int)TacticGameFlangFlangEnum.LeftAndCenter] = "Левый и Центр";
        Names[(int)TacticGameFlangFlangEnum.RightAndCenter] = "Правый и Центр";

        ShortNames = new string[iFlangValuesCount];
        ShortNames[(int)TacticGameFlangFlangEnum.Usual] = "=";
        ShortNames[(int)TacticGameFlangFlangEnum.Left] = "Л";
        ShortNames[(int)TacticGameFlangFlangEnum.Center] = "Ц";
        ShortNames[(int)TacticGameFlangFlangEnum.Right] = "П";
        ShortNames[(int)TacticGameFlangFlangEnum.Sides] = "Ф";
        ShortNames[(int)TacticGameFlangFlangEnum.LeftAndCenter] = "ЛЦ";
        ShortNames[(int)TacticGameFlangFlangEnum.RightAndCenter] = "ПЦ";
    }

    public SquadFlangViewModel(TacticGameFlangFlangEnum eVal) { _eVal = eVal; }

    public TacticGameFlangFlangEnum Value { get { return _eVal; } }

    private static readonly string[] Names;

    private static readonly string[] ShortNames;

    public override string ToString()
    {
        return Names[(int)_eVal];
    }

    public string ShortName
    {
        get
        {
            return ShortNames[(int)_eVal];
        }
    }
} 
```

这是我绑定元素的方式：

```
<ComboBox ItemsSource="{Binding Flangs, Mode=OneTime}"
    SelectedItem="{Binding Flang, Mode=TwoWay}"/> 
```

ComboBox 位于非常窄的网格单元格中的问题，当我选择项目时，我想显示的不是长描述，而是短描述。

听起来我应该指定 ComboBox 在元素显示为选中时使用“ShortName”属性。

**当 ComboBox 折叠时，如何指定 ComboBox 以使用 ShortName 属性来显示所选元素？**

非常欢迎任何想法和其他反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:31:09.140

尝试 DisplayMemberPath，它会显示短名称。

```
<ComboBox ItemsSource="{Binding Flangs, Mode=OneTime}"
    SelectedItem="{Binding Flang, Mode=TwoWay}" DisplayMemberPath="ShortNames"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:34:00.137

您可以尝试在组合框展开时和折叠时使用不同的模板。以下链接显示了 WPF 的示例：[代码项目示例](http://www.codeproject.com/Articles/47923/Using-a-different-DataTemple-when-a-WPF-ComboBox-i)

# php - SQL 查询返回空结果

> ID：16108031
> 
> 赞同：0
> 
> 时间：2013-04-19T15:22:10.180
> 
> 标签：php, mysql, pdo, mysqli, html5builder

我有这个 SQL 查询：

```
SET @date_shift = DATE_SUB(NOW(), Interval 60 MINUTE);
SELECT hinfo.idx,
   hinfo.host_idx,
   hinfo.processor_load,
   hinfo.memory_total,
   hinfo.memory_free,
   hnames.idx,
   hnames.name,
   disks.hostinfo_idx,
   disks.id,
   disks.name,
   disks.size,
   disks.freespace,
   hinfo.probetime
FROM   systeminfo.hostinfo AS hinfo
   INNER JOIN systeminfo.hosts AS hnames
           ON hnames.idx = hinfo.host_idx
   INNER JOIN systeminfo.disksinfo AS disks
           ON disks.hostinfo_idx = hinfo.idx
WHERE   hinfo.probetime > @date_shift AND
      hinfo.probetime = (SELECT MAX(probetime) FROM systeminfo.hostinfo AS hi
                                    WHERE hi.probetime > @date_shift AND hi.host_idx = hinfo.host_idx)
GROUP  BY disks.id,
      hnames.name
ORDER  BY hnames.name,
      disks.id; 
```

我尝试在 php 代码中执行它。我试过 mysql、mysqli 和 pdo。马最后的代码如下：

```
$db = new PDO("mysql:host=".$this->ip.";dbname=".$this->dbname.";charset=utf8", $this->username, $this->password);
$result = $db->query($query);
$fetch_data = $result->fetchAll(PDO::FETCH_ASSOC); 
```

或者

```
mysql_connect($this->ip, $this->username, $this->password);
mysql_query('SET NAMES utf8;');
mysql_select_db($this->dbname);
$result = mysql_query($query); 
```

PHP 正确连接到数据库。简单的查询，例如 select * from tablename 有效。但是此查询返回 NO 数据但错误：

> 1064：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 'SELECT hinfo.idx, hinfo.host_idx, hinfo.processor_load, hinfo.memory_total, ' 附近使用正确的语法

在数据库客户端中执行的相同查询可以完美运行（这不是一个慢查询，执行它需要不到 10 毫秒）。此外，当我尝试直接从网页上的此功能打印查询并将其粘贴到 mysql 客户端时 - 它也可以完美运行！我在尝试强制 utf 编码的十六进制查看器中找不到任何特殊字符，什么也没有。

有任何想法吗？我可以执行的测试？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:41:04.273

尝试将其作为两个单独的语句执行。从 GUI 工具或命令行工具运行查询不同于在代码中嵌入查询。所以它适用于数据库工具，但不适用于 php 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:50:31.033

PHP 的 mysql 适配器一次只能处理一个查询。您确实应该彼此分开运行查询。

“@date_shift”将在第二个查询中可用，假设您与 mysql 的连接在两个查询之间没有被破坏。

# php - 仅在满足条件时使用 str_replace

> ID：16108038
> 
> 赞同：1
> 
> 时间：2013-04-19T15:22:27.807
> 
> 标签：php

我正在对包含 HTML 字符串的变量执行 str_replace。目的是将“data-rel="external" target="_blank"" 添加到所有 a-href 中。

```
$html = str_replace("<a href=", "<a data-rel=\"external\" target=\"_blank\" href=", $html); 
```

它工作正常，但挑战在于：如果原始 a-href 是 a-href="mailto:[..]，那么它应该添加“data-rel="external" target="_system"”。

例子：

```
<a href="http://apache.org">Link 1</a> 
```

应该变成：

```
<a data-rel="external" target="_blank" href="http://apache.org">Link 1</a> 
```

和

```
<a href="mailto:post@apache.org">Link 2</a> 
```

应该变成：

```
<a data-rel="external" target="_system" href="mailto:post@apache.org">Link 2</a> 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:26:04.170

首先运行一个mailto str_replace，

```
$html = str_replace("<a href=\"mailto:", 
    "<a data-rel=\"external\" target=\"_system\" href=\"mailto:", $html); 
```

执行此操作后，这些将不再受到 str_replace 查找的影响，`<a href`因为它们将是`<a data-rel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:25:21.523

我将测试 中子字符串的外观`"mailto:"`，并根据是否为真`$html`运行不同的命令。`str_replace`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:33:26.960

在您无法使用 str_replace 的其他情况下，preg_replace 可能会变得很方便：

```
preg_replace('/<a href="mailto/', '<a data-rel="external" target="_system" href="mailto', $html); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T15:33:56.710

这对我有用

```
<?php
$html='<a href="http://apache.org">Link 1</a><a href="mailto:post@apache.org">Link 2</a>';
$html = str_replace('<a href="mailto', '<a data-rel="external" target="_system" href="mailto', $html);
$html = str_replace('<a href=', '<a data-rel="external" target="_blank" href=', $html);
echo $html;
?> 
```

或这个

```
<?php
$html='<a href="http://apache.org">Link 1</a><a href="mailto:post@apache.org">Link 2</a>';
$html = str_replace(array('<a href="mailto','<a href='), array('<a data-rel="external" target="_system" href="mailto','<a data-rel="external" target="_blank" href='), $html);
echo $html;
?> 
```

输出

```
<a data-rel="external" target="_blank" href="http://apache.org">Link 1</a>
<a data-rel="external" target="_system" href="mailto:post@apache.org">Link 2</a> 
```

# git - 如何告诉 Git Mergetool 失败了？

> ID：16108044
> 
> 赞同：2
> 
> 时间：2013-04-19T15:22:41.760
> 
> 标签：git

我经常遇到这种情况。我需要合并分支，有冲突，所以我使用：

> git 合并工具

我的 mergetool 启动然后崩溃，或者更准确地说，我感到困惑，因为我是 VIM 新手并最终终止了合并。

现在，如果我再次尝试运行 git mergetool，它会告诉我所有内容都已合并，但事实并非如此。如果我打开文件，我仍然看到

```
v<<<<<<< HEAD
v1
=======
v2
>>>>>>> master 
```

我如何告诉它合并工具失败并且尚未合并？换句话说，我如何让 git mergetools 启动我的合并工具，而不是告诉我没有文件需要合并？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:32:59.843

假设最近有足够的 Git，您应该能够：

```
git update-index --unresolve <path/to/messed/up/merge> 
```

# ruby-on-rails - 如何排序模型中属于另一个模型的模型中的字段？

> ID：16108052
> 
> 赞同：1
> 
> 时间：2013-04-19T15:22:55.997
> 
> 标签：ruby-on-rails, mongodb, mongoid

所以我有这些模型：

```
class b
  :field boolean, :type => Boolean
end

class c
  embeds_many :a
end

class a
  belongs_to :b
  scope :sort_by_boolean, order_by(:b.boolean => :asc)
end 
```

我尝试做类似的事情，但这是不可能的。还有其他方法可以订购吗？我能想到的另一件事是循环遍历它并创建两个不同的数组，一个布尔值为真，另一个为假，并将两者结合起来。但是有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:02:36.007

我最终以循环方式进行操作，但如果有更简单的方法，我会更喜欢：

```
class c
  def sort
    not_true = []
    is_true = []
    self.a.each { |x|
      if x.b.boolean
        is_true.push x
      else
        not_true.push x
      end
    }
    not_true + is_true
  end
end 
```

# c# - 使用 Directory.GetFiles 查询文件夹中的文件列表时如何知道排序类型？

> ID：16108057
> 
> 赞同：0
> 
> 时间：2013-04-19T15:23:09.903
> 
> 标签：c#

我正在使用 Directory.GetFiles() 查询文件夹以获取所有 *txt 文件，并且我想获取列表中的第一个文件。（我已经知道如何实现这个）

但是，我希望通过从顶部修改最新日期来对列表进行排序，以便我首先获得最新的文件。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:24:19.707

您可以将 OrderBy 与 CreationTime 属性一起使用。

```
DirectoryInfo di = new DirectoryInfo("C:\\");
FileSystemInfo[] files = di.GetFileSystemInfos("*.txt");
var orderedFiles = files.OrderBy(f => f.CreationTime); 
```

例如，此代码获取 C 中的所有文件，并按创建时间排序列表。

[在这里](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.creationtime.aspx)您可以阅读更多相关信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:32:35.700

```
var output = allFiles.OrderBy(item=> new FileInfo(item).CreationTime); 
```

# plugins - 在 gradle 中重用 Exec 任务以进行常见命令行操作的最合适方法是什么？

> ID：16108058
> 
> 赞同：13
> 
> 时间：2013-04-19T15:23:10.620
> 
> 标签：plugins, gradle

我正在编写一个 gradle 构建文件，它将为我们的产品安装一个基本的开发域。基本上所有的真实代码都将在自定义插件和自定义任务中。涉及的几个步骤是相当重复的（多个 sudo 调用，多个用户添加），我想将常见的东西封装到一个任务中。

例如：

```
task('addDBUser', type:AddUser) {
    username = joeUser
}

task('startService', type:SudoExec) {
    workingDir = "not/too/relevant"
    commandLine = "/etc/init.d/coolService start"
} 
```

我想尽可能整洁地重用 Exec 为我提供的各种功能（stdin、stdout 等），同时自动提供样板文件（“sudo ...”）。我很确定我可以扩展 Exec 而不是 DefaultTask，但我不知道触发实际操作的标准方式。用我需要的东西修改 commandLine 属性似乎很容易，但是当我希望 Exec 实际运行时，没有通用的“run()”或类似的东西可以使用。

我是否打开 Exec 来确定哪个方法是它的工作方法，然后直接调用它？还是有更通用的方法来实现我的目标？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-20T12:55:13.413

要查看为任务执行的方法，您可以检查源`Exec`并搜索标有 的方法`@TaskAction`。事实证明，这是`exec()`方法，但通常您不想手动调用任务操作，而是让 Gradle 为您完成。我认为最好的想法是将方法/设置器添加到您的自定义任务中。它可能看起来像这样：

```
task addUser(type: AddUser) {
    username = 'fromGradle'
}

class SudoExec extends Exec {

    void sudoCommand(Object... arguments) {
        executable 'sudo'
        args = arguments.toList()
    }
}

class AddUser extends SudoExec {

    void setUsername(String username) {
        sudoCommand('useradd', username)
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-19T19:08:28.133

此代码能够处理多个参数，因为它不挂钩任何特定参数的设置器，而是使用惰性 GString 评估。

```
task vagrantfile (type:Vagrantfile) {
    account 'vagrant'
    password 'vagrant'
}

class Vagrantfile extends Copy {
    String account
    String password

    def Vagrantfile() {
        from 'templates/'
        into 'build/'
        include 'Vagrantfile.ubuntu.tpl'
        rename {'Vagrantfile'}
        expand (account:"${->account}", password:"${->password}")
    }
} 
```

# ios - 为“幻灯片”iOS UIView 设置动画，但关联的子视图不移动

> ID：16108061
> 
> 赞同：3
> 
> 时间：2013-04-19T15:23:22.013
> 
> 标签：ios, xamarin.ios, uiviewanimation

我对来自 UINavigationBar 的简单 UIView 幻灯片动画有疑问。我有一个带有 UIButton 的 UIView，我想通过设置视图高度的动画来模拟导航栏的向下/向上滑动效果。问题是视图动画，但任何子视图，例如 UIButton 保持固定。

我正在使用 Xamarin (C#) 进行编码，但我确信它对于 Objective-C 编码人员来说足够简单

```
if (_menuView == null)
{
   // set initial frame
   _menuView = new MenuView{Frame = Window.Frame};

   // store original "expanded" height for later
   _expandedMenuHeight = _menuView.Frame.Height;

   // set the frame to underneath the NavigationBar
   var frame = ((UINavigationController)Window.RootViewController).NavigationBar.Frame;
   var y = frame.Bottom;

   // Add to Window View
   menuView.Frame = new RectangleF(_menuView.Frame.X,y,_menuView.Frame.Width,0);
   Window.Add(_menuView);
 }

 // Toggle View Height - if collapsed, expand, if expanded, collapse
 var height = _menuView.Frame.Height == 0 ? _expandedMenuHeight : 0;

 // Animate the height
 UIView.Transition (_menuView,0.2,UIViewAnimationOptions.CurveEaseIn |   UIViewAnimationOptions.LayoutSubviews,() => {
 _menuView.Frame = new RectangleF(0,_menuView.Frame.Y,_menuView.Frame.Width,height); },null); 
```

任何指针都非常感谢！

![UIView 和子 SubViews 没有动画](https://i.stack.imgur.com/vxk97.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:36:14.360

我对 Xamarin 不太清楚。但是在objectiveC中，你可以使用，

```
view.clipsToBounds = YES; 
```

因此，当您尝试降低高度时，子视图也会被隐藏。

# c++ - 如何转换矢量 为空终止字符**？

> ID：16108062
> 
> 赞同：2
> 
> 时间：2013-04-19T15:23:22.933
> 
> 标签：c++

我正在尝试将 a 转换为`std::vector<std::string>`以 NULL 结尾的 C 样式字符串数组 ( `char *`)。`new`是否可以不使用/进行复制`malloc`？

基本上，我想在没有 new/malloc 的情况下将 vec 转换回与 arr 完全相同的东西。

```
#include <string>
#include <vector>
#include <stdio.h>
using namespace std;

void print(const char **strs)
{
   const char **ptr = strs;
   while(*ptr) {
      printf("%s ", *ptr);
      ++ptr;
   }
}

void print(std::vector<std::string> &strs) {
   for(auto iter = strs.begin(); iter != strs.end(); ++iter) {
      printf("%s ", iter->c_str());
   }
}

void main()
{
   const char *arr[] = { "a", "b", "c", "d", "e", "f", NULL };

   vector<string> vec;

   const char **str = arr;
   while(*str) {
      vec.push_back(*str);
      ++str;
   }
   vec.push_back((char *) NULL); //Doesn't work

   //print(vec);
   print((const char **) &vec[0]);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:31:30.237

仅通过设置指向该向量开头的指针是不可能的，因为`vector<string>`它不是您期望的连续字符。

```
 addr1   addr2    addr3
                    ^        ^        ^
                    |        |        |
                +--------+--------+--------+----
                |   |    |   |    |   |    |
                |  std:: |  std:: |  std:: |
       +---->   | string | string | string | ...
       |        |        |        |        |
       |        +--------+--------+--------+----
       |
       |
       |
 vector<string> 
```

`addr1`，`addr2`并且`addr3`是内存中的随机地址。

因此，解决方案是遍历项目，读取字符串和字符并将它们放入您的 continue 数组中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:48:36.703

您需要自己构建指针数组，如果在编译时不知道大小，则需要动态分配。（在这个例子中，你可以从`sizeof arr`; 但我假设`arr`当你需要重建它时它不可用）。

您*可以*使用指向由向量管理的字符串的指针，因此您不需要为它们分配任何内存。

所以你可以得到你需要的数组：

```
std::vector<char const *> vec2;
vec2.reserve(vec.size()+1); // optional, but might improve efficiency
for (auto const & str : vec) {
    vec2.push_back(str.c_str());
}
vec2.push_back(nullptr);

print(vec.data()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:30:51.010

> 是否可以不使用 new/malloc 进行复制？

如果您的 C++ 编译器支持可变长度数组作为扩展，那么它就是。否则，您将不得不使用动态内存分配。

```
std::vector<std::string> vec;
// initialize `vec', etc.

const char *c_strings[vec.size()];
size_t idx = 0;
for (std::vector<std::string>::iterator it = vec.begin(); it != vec.end(); it++) {
    c_strings[idx++] = it->c_str();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T15:35:05.417

好的，所以您不能在 a 中存储“NULL” `std::vector<std::string>`，我认为这是您的目标。

重点`std::vector`是它跟踪中的条目数`std::vector::size()`

但是，如果您确实需要一些可以传递给 print 之类的函数的东西，那么您可以执行以下操作：

```
vector<const char *> v;

for(auto iter = vec.begin(); iter != vec.end(); ++iter) {
   v.push_back(iter->c_str());
}
v.push_back(NULL);

print(&v[0]); 
```

# ios - 自定义 UICollectionViewFlowLayout 上的插值问题

> ID：16108063
> 
> 赞同：0
> 
> 时间：2013-04-19T15:23:24.230
> 
> 标签：ios, ios6, core-animation, uicollectionview, uicollectionviewlayout

我遇到了自定义 UICollectionViewFlowLayout 的问题

就像这个视频显示[问题视频](https://www.dropbox.com/s/9ui4ifmt94a2sz0/video.mov)一样，当我的单元格反弹回中心 (0:12 - 0:16) 时，我的变换插值失败，它跳到 1 帧的中心位置。

我隔离了这个问题，它在什么时候表现出来`distanceToCenterX == 0.0f`（下面的代码）

这是`printf`对`distanceToCenterX`中央单元格的此方法的多次调用：

```
-92.000000           
-91.500000           
-91.000000           
-90.500000           
-90.000000           
-89.500000           
-89.000000         
-88.500000
0.000000 
```

您可以看到它是如何从`-88.5000`到`0.00`非常突然地跳跃的，我可以做些什么来平滑过渡并避免 1 帧跳跃？

**代码**（免责声明，取自 Apple 示例和[Github 项目](https://github.com/mpospese/IntroducingCollectionViews)）

```
static const CGfloat ACTIVE_DISTANCE = 100.0f

- (void)setCellAttributes:(UICollectionViewLayoutAttributes *)attributes forVisibleRect:(CGRect)visibleRect withCentralCellIndexPath:(NSIndexPath *)path
{

    // First set the general position for the attributes
    [self setGeneralPositionForAttributes:(HILayoutAttributes *)attributes withCentralAttributesIndexPath:path];

    // Then adjust transforms
    CGFloat distanceToCenterX = CGRectGetMidX(visibleRect) - attributes.center.x;

    //
    // The issue manifests when distanceToCenterX is 0
    //
    CGFloat normalizedDistance = distanceToCenterX / ACTIVE_DISTANCE;

    BOOL isLeft = (((HILayoutAttributes *)attributes).generalPosition == kGeneralCellPosition_left) ? YES : NO;
    CATransform3D transform = CATransform3DIdentity;
    transform.m34 = -1 / (4.6777 * self.itemSize.width);

    if (ABS(distanceToCenterX) < ACTIVE_DISTANCE) {
        if (ABS(distanceToCenterX) < TRANSLATE_DISTANCE) {
            transform = CATransform3DTranslate(CATransform3DIdentity,
                                              ((FLOW_OFFSET * ABS(distanceToCenterX)) / TRANSLATE_DISTANCE),
                                              0,
                                              (1 - ABS(normalizedDistance)) * 40000 + (isLeft ? 200 : 0));
        }

        transform.m34 = -1/(4.6777 * self.itemSize.width);
        transform = CATransform3DRotate(transform,  1 * ABS(normalizedDistance) * 45 * M_PI / 180, 0, 1, 0);

    } else {
        transform = CATransform3DTranslate(transform, FLOW_OFFSET , 0, 0);
        transform = CATransform3DRotate(transform, 1 * 45 * M_PI / 180, 0, 1, 0);
        attributes.zIndex = 0;
    }
    attributes.transform3D = transform;
} 
```

我能做些什么来避免这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:39:40.073

我在 Erica Sadun 的“iOS 6 Developer's Cookbook”（第 11 章，配方 5）中讨论了同样的问题。

在书中还有一个自定义 UICollectionViewFlowLayout 的示例，它展示了我遇到的相同问题。

我在 IRC 上和 Erica 谈过，我们一致认为 UICollectionViewLayout 中似乎有一个错误，她提到她前段时间在雷达上看到了类似的东西，所以它可能已经被报告了。

她在她的书中为她的开源代码做了一个或多或少丑陋的解决方法，实际上你可以[在这里](https://github.com/erica/iOS-6-Cookbook/commit/7207978ac8666f55d7ffbcb3cd343667a81f46ce)查看她的解决方案。它并不优雅，但它是一个完全有效的解决方法。

她基本上会在等于 0 或( )`targetContentOffsetForProposedContentOffset:withScrollingVelocity:`时发出通知`proposedContentOffset.x``collectionViewContentSize.width - bounds.Size.width``boundsSize = self.collectionView.bounds.size`

```
CGPoint desiredPoint = CGPointMake(proposedContentOffset.x + offsetAdjustment, proposedContentOffset.y);

if ((proposedContentOffset.x == 0) || (proposedContentOffset.x >= (self.collectionViewContentSize.width - boundsSize.width)))
{
    NSNotification *note = [NSNotification notificationWithName:@"PleaseRecenter" object:[NSValue valueWithCGPoint:desiredPoint]];
    [[NSNotificationCenter defaultCenter] postNotification:note];
    return proposedContentOffset;
} 
```

控制器侦听该通知，并在 scrollView 结束减速到`desiredPoint`.

```
- (void) scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    if (CGPointEqualToPoint(desiredPoint, CGRectNull.origin))
        return;

    CGRect rect = scrollView.bounds;
    rect.origin = desiredPoint;
    [self.collectionView scrollRectToVisible:rect animated:YES];

    desiredPoint = CGRectNull.origin;
} 
```

希望这对其他人有帮助。

# android - 在 AVD 上设置 OpenNFC？

> ID：16108071
> 
> 赞同：1
> 
> 时间：2013-04-19T15:24:05.280
> 
> 标签：android

我有一个非常简单的问题。我正在尝试在 Open NFC AVD（模拟器）上启用 NFC。如果我转到设置-无线-NFC，它似乎不允许我选中该框。随后禁用了 android beam 选项。如何在模拟器上启用 NFC？

我看到有人在模拟器“设置 OpenNFC”上提到了一个单独的应用程序。我在哪里可以找到它？它不应该出现在模拟器应用程序列表中吗？

我正在运行 android-4.2.1_r1 Open NFC 4.5.2，Android SDK API 级别 17。

提前感谢您回答我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T14:09:40.207

使用 OpenNFC 4.4.1 而不是 4.5.2。它在模拟设备中预装了一个名为“设置 OpenNFC”的专用应用程序，用于启动 NFC 功能。唯一的缺点是较低的 API 级别：/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T21:15:40.473

或者 virtualbox 设备也可以是一个很好的解决方案。在这里查看[http://open-nfc.org/wp/2013/04/25/new-virtualbox-appliance-embedding-open-nfc-for-android/](http://open-nfc.org/wp/2013/04/25/new-virtualbox-appliance-embedding-open-nfc-for-android/)

# sql - 将连接查询的结果复制到其他数据库中的相同表中

> ID：16108074
> 
> 赞同：1
> 
> 时间：2013-04-19T15:24:14.753
> 
> 标签：sql

我试图在 SQL 中获取选择查询的结果并将它们放在另一个数据库中的另一个表中。表结构相同。选择查询如下；

```
USE Warwick
Go

Select   tblOperations.Link, Project.*

From     tblOperations

    Inner Join  Warwick.dbo.Project 

        On tblOperations.Link= Warwick.dbo.Project.[Project ID]

    Where tblOperations.Job# = Warwick.dbo.Project.[Job Number] and
    tblOperations.[Status] = 'Active' or tblOperations.[Status] = 'Pending' 
```

加入让我只选择被认为是活动的作业。我需要将结果复制到已经存在的表 WCI_DB.dbo.Project 中。如果记录存在，我会追加而不是覆盖。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:47:52.640

您应该使用似乎是 SQL Server 的数据库来标记您的问题。SQL 语法是`insert`：

```
insert into WCI_DB.dbo.Project
    <your select here>; 
```

通常，您希望在表名之后列出列：

```
insert into WCI_DB.dbo.Project(list of columns>
    <your select here>; 
```

但是，如果这是一次性练习并且您知道列是相同的，那么省略它们一次是小罪。

要创建一个新表，请使用[此处](http://msdn.microsoft.com/en-us/library/ms189499%28v=sql.105%29.aspx)`select into`记录的。

```
select . . .
into WCI_DB.dbo.Project
. . . 
```

# sql - TSQL：按单词解析，而不是特定字符

> ID：16108078
> 
> 赞同：0
> 
> 时间：2013-04-19T15:24:32.547
> 
> 标签：sql, sql-server, tsql, xml-parsing, sql-server-2008-r2

我一直在寻找`TSQL`按单词而不是字符解析的代码，因为我`XML`在表中有需要删除的字符串。不幸的是，它们没有遵循精确的公式，这意味着可以有 5 到 20 个`XML`字符串，即（在这种情况下只有 3 个）：

```
<code>
<codeblue>Answer A</codeblue>
<codered>Blue Twenty</codered>
<codeyellow>WARNING: only push if active</codeyellow>
</code> 
```

每个之间有时是文本或数字，我希望每个都存储在列中：

```
CodeBlue                       |   CodeRed                         | CodeYellow
<codeblue>Answer A</codeblue>  |   <codered>Blue Twenty</codered>  | <codeyellow>WARNING: only push if active</codeyellow> 
```

当然，有些列会是`NULL`，因为可能有 5 到 20 个`XML`字符串。因此，CHARINDEX 无法正确提取，因为我需要将 XML 存储在列中，因此`'<'`或者`'>'`不是正确的标识符，因为长度可能会根据代码之间的文本或数字而变化。

我的问题是我可以按单词或短语解析文本，例如，`<codeblue>Answer B</codeblue>`通过搜索关键字来解析出 8000 个字符的列`codeblue`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:13:06.517

SQL Server 具有内置的 XQuery 功能，允许您以您所要求的方式查询 XML。这是一个例子：

```
create table #t (x xml);

insert #t
select
'<code>
<codeblue>Answer A</codeblue>
<codebrown>ignore this</codebrown>
<codered>Blue Twenty</codered>
<codegreen>ignore this too</codegreen>
<codeyellow>WARNING: only push if active</codeyellow>
</code>';

select  Codes.n.value('codeblue[1]','varchar(max)') As CodeBlue
        , Codes.n.value('codered[1]','varchar(max)') As CodeRed
        , Codes.n.value('codeyellow[1]','varchar(max)') As CodeYellow
from    #t t
        cross apply t.x.nodes('/code') as Codes(n); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:14:18.120

我认为您需要了解有关 XML 查询方法的更多信息。这与寻找元素结构的“查询”方法的组合相对容易。然后是一个“值”，它可以在元素中返回一个属性或文本值。

```
declare @xml xml = '<code>
<codeblue>Answer A</codeblue>
<codered>Blue Twenty</codered>
<codeyellow>WARNING: only push if active</codeyellow>
</code>'

select 
    @Xml.query('//code/codeblue').value('.', 'varchar(max)') as codeBlue
,   @Xml.query('//code/codered').value('.', 'varchar(max)') as codeRed
,   @Xml.query('//code/codeyellow').value('.', 'varchar(max)') as codeYellow 
```

XML 方法的参考：http: [//msdn.microsoft.com/en-us/library/ms190798.aspx](http://msdn.microsoft.com/en-us/library/ms190798.aspx)

# android - 我需要回收 BitmapDrawable

> ID：16108079
> 
> 赞同：4
> 
> 时间：2013-04-19T15:24:32.850
> 
> 标签：android

根据[http://developer.android.com/training/displaying-bitmaps/manage-memory.html](http://developer.android.com/training/displaying-bitmaps/manage-memory.html)

> 在 Android 2.3.3（API 级别 10）及更低版本上，建议使用 recycle()。如果您在应用程序中显示大量位图数据，您可能会遇到 OutOfMemoryError 错误。recycle() 方法允许应用程序尽快回收内存。

我想知道，对于`BitmapDrawable`，我是否需要执行清理

`bitmapDrawable.getBitmap().recycle()`

如果不再需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:30:02.170

[文档](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)告诉你

> 这是一个高级调用，通常不需要调用，因为当没有更多对该位图的引用时，正常的 GC 进程将释放此内存。

所以我会同意：不，你不需要调用它。但是，通过清除您拥有的引用来释放您的位图资源。

您添加的链接几乎可以告诉您为什么它在前后可能有所帮助：

> 在 Android 2.3.3（API 级别 10）及更低版本中，位图的支持像素数据存储在本机内存中。它与存储在 Dalvik 堆中的位图本身是分开的。本机内存中的像素数据不会以可预测的方式释放，可能会导致应用程序短暂超出其内存限制并崩溃。从 Android 3.0（API 级别 11）开始，像素数据与关联的位图一起存储在 Dalvik 堆中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:45:55.777

最好在不使用时回收位图。您可以在 onResume() 中加载 bimap 并在 onPause() 中回收它。

因此，为了减少内存消耗并避免内存泄漏，最好在不使用时回收位图。

还可以查看链接中的内存管理讨论

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)

编辑：

您发布的链接的报价单。（您可以在 Android 2.3.3 及更低版本的“管理内存”标题下查看）

**在 Android 2.3.3（API 级别 10）及更低版本上，建议使用 recycle()**。

从 HoneyComB 开始，位图存储在 HEAP 而不是其本机位图堆上。

Android 3.0（API 级别 11）引入了 BitmapFactory.Options.inBitmap 字段。如果设置了此选项，则采用 Options 对象的解码方法将在加载内容时尝试重用现有位图。这意味着位图的内存被重用，从而提高了性能，并删除了内存分配和取消分配

[http://developer.android.com/training/displaying-bitmaps/manage-memory.html](http://developer.android.com/training/displaying-bitmaps/manage-memory.html)

# jquery - Jquery验证器插件ajax提交未触发

> ID：16108083
> 
> 赞同：0
> 
> 时间：2013-04-19T15:24:37.223
> 
> 标签：jquery, jquery-validate

我的 Jquery 验证器 ( [http://bassistance.de/jquery-plugins/](http://bassistance.de/jquery-plugins/) ) 插件 submitHandler 函数有问题。表单验证正确，无效处理程序消息正确触发，但 submitHandler 函数不会正确触发，ajaxSubmit 函数也不会正确触发。有人看到我做错了什么吗？任何帮助都会受到欢迎。

```
<script type="text/javascript">
$(document).ready(function() {
var submitMessage     = $('#submit-message'),
    messageContainer  = submitMessage.find('span'),
    loading           = $('#loading');

function showSuccess(message) {
    messageContainer.text(message)
    messageContainer.attr('class', 'success');
  }
function showFailure(message) {
    messageContainer.text(message)
    messageContainer.attr('class', 'failure');
}
$("#contact-form-info").validate({
  rules: {
    contact_Name: {
      minlength: 2,
      maxlength: 50,
      required: true
    },
    contact_Foretag: {
      minlength: 1,
      maxlength: 50
    },
    contact_Email: {
      required: true,
      email: true
    },
    contact_Subject: {
      required: true,
      minlength: 5,
      maxlength: 50
    },
    contact_Message: {
      required: true,
      minlength: 10,
      maxlength: 5000
    }
  },
  submitHandler: function(form) {
        var options = {
            beforeSubmit: function() {
                loading.show();
            },
            success: function() {
                showSuccess('Thank you! Your email has been submitted.');
                form.reset();
                loading.hide();
            },
            error: function() {
                showFailure("We're sorry, your email could not be sent. Please try again later.");
                loading.hide();
            }
        };
        $(form).ajaxSubmit(options);
     return false;

    },
    invalidHandler: function() {
        showFailure('There were some problems with your submission.');
    }
 });
});
</script> 
```

这是我在 jsFiddle 中的代码。[http://jsfiddle.net/JwNmK/](http://jsfiddle.net/JwNmK/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:35:02.540

**OP的评论**：

> “当我提交一个有效的表单时，它作为一个‘正常’表单提交，我被重定向到 process.php 页面”

使用. _ `return false`_`submitHandler``ajax`

```
submitHandler: function (form) {
    // your ajax
    return false;
}, 
```

# java - API 级别 15 的印地语字体（又名 Android 4.0.2）

> ID：16108088
> 
> 赞同：4
> 
> 时间：2013-04-19T15:24:53.520
> 
> 标签：java, android, fonts

我有一个基于印地语内容的 android 应用程序，并使用了来自 Android API 16 SDK 的 devangiri 字体并重命名为hindi.ttf。文本在 API 级别 16 和 17 上呈现良好，但在 Android API 级别 15 及更低级别时会被撕裂。

有什么原因我可以在不删除对较低 API 级别的支持的情况下解决这个问题。我设置 textview 的代码是：

```
import android.app.Activity;
import android.graphics.Paint;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.GestureDetector;
import android.widget.TextView;

public class Prayer extends Activity {

    // TextSwitcher vs;
    GestureDetector gestureDetector;
    static Tips tip = null;
    static StringBuilder quesString = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.prayer);

        TextView tv1 = (TextView) findViewById(R.id.textView1);
        Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/hindi.ttf");
        tv1.setTypeface(tf);
        tv1.setText("श्री");
        tv1.setPaintFlags(tv1.getPaintFlags() | Paint.SUBPIXEL_TEXT_FLAG);
    }
} 
```

布局 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#C5C6E1"
    tools:context=".Prayer" >
            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >
            </TextView>
</RelativeLayout> 
```

当前的： ![在此处输入图像描述](https://i.stack.imgur.com/AMvc5.png)

预期的： ![在此处输入图像描述](https://i.stack.imgur.com/H6LDN.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T05:49:53.543

I faced exactly similar issue when I was developing an Hindi app. However, the error resolved when I changed the font files.

Also, IMHO the device simply replaces UTF-8 symbols in text with corresponding symbols in font files. In this case, its showing a completely different symbol altogether. So, the problem should be with font files.

Give me your e-mail in case you want to use my font files.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T19:02:24.443

为了支持印地语，我向后移植了`DroidSansDevanagari-Regular.ttf`Jellybean 中添加的字体。您可以在 SDK 目录下找到所有 Jellybean Android 字体：

`/<Android SDK Dir>/platforms/android-16/data/fonts`

如果您在 4.0.2 上仍然看到撕裂，您可以尝试：

```
tv1.setPaintFlags(tv1.getPaintFlags() | Paint.SUBPIXEL_TEXT_FLAG); 
```

设置动态 textSize 时，请使用：

```
tv1.setTextSize(TypedValue.COMPLEX_UNIT_PX, getResources().getDimensionPixelOffset(R.dimen.questionTEXT)); 
```

# ember.js - Ember.js：在布局中生成特定对象

> ID：16108089
> 
> 赞同：0
> 
> 时间：2013-04-19T15:24:56.533
> 
> 标签：ember.js

我想创建一个布局，在其中迭代一个集合，`#each`然后将该对象传递给 yield。那可能吗？

我想要实现的是：

```
<!-- timeline_layout.hbs -->
<div id="timeline-container">
  {{#each entry in controller}}
    <div class='timeline-entry'>
      {{yield entry}}
    </div>
  {{/each}}  
</div>

<!-- timeline_instance.hbs (timeline with posts) -->
{{#view App.Timeline}} <!-- has layout set to timeline_layout -->
  {{render 'post' entry}}
{{/view}} 
```

如果猜测那是不可能的，对吧？由于`render 'post'`无法知道条目。那么ember封装时间线一般html结构的方式是什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:53:53.197

“用作布局的模板必须包含对 Handlebars {{yield}} 帮助器的一次使用。” [ember.js 意见](http://emberjs.com/api/classes/Ember.View.html)。您的方法基本上打破了这条规则，因为您试图为控制器中的每个条目创建一个新的产量 - 您应该考虑将您的每个条目重构到模板中。

# sql-server - 使用新的数据库名称从 bak 文件恢复数据库

> ID：16108091
> 
> 赞同：1
> 
> 时间：2013-04-19T15:25:08.927
> 
> 标签：sql-server, sql-server-2008, smo

我需要使用新名称创建数据库副本。在我的`asp.net mvc`项目中，我使用`smo`创建数据库备份而不是尝试进行还原。我喜欢这样：[http](http://www.mssqltips.com/sqlservertip/1849/backup-and-restore-sql-server-databases-programmatically-with-smo/) ://www.mssqltips.com/sqlservertip/1849/backup-and-restore-sql-server-databases-programmatically-with-smo/ 。

但我得到一个例外：

> 无法覆盖文件“C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\LocalClientTrakDB.mdf”。数据库“LocalClientTrakDB”正在使用它。
> 文件“LocalClientTrakDB”无法恢复到“C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\LocalClientTrakDB.mdf”。使用 WITH MOVE 标识文件的有效位置。
> 无法覆盖文件“C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\LocalClientTrakDB_log.ldf”。数据库“LocalClientTrakDB”正在使用它。
> 文件“LocalClientTrakDB_log”无法恢复到“C:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\DATA\LocalClientTrakDB_log.ldf”。
> 在规划 RESTORE 语句时发现了问题。以前的消息提供了详细信息。
> RESTORE DATABASE 异常终止。

我恢复数据库的代码：

```
static void DatabaseRestore(Server myServer, Database myDatabase)
{
    string newdbfilename = myDatabase.Name + "New";

    Restore restoreDB = new Restore();
    restoreDB.Database = newdbfilename;

    restoreDB.Action = RestoreActionType.Database;
    restoreDB.Devices.AddDevice(@"C:\temp\TestFullDB.bak", DeviceType.File);

    restoreDB.ReplaceDatabase = true;
    restoreDB.NoRecovery = false;

    restoreDB.SqlRestore(myServer);
} 
```

你有什么想法吗？

# c# - Newton.JSON 将动态对象转换为 JObject 而不是动态对象

> ID：16108093
> 
> 赞同：3
> 
> 时间：2013-04-19T15:25:15.133
> 
> 标签：c#, json, json.net

```
string  result ="{"AppointmentID":463236,"Message":"Successfully Appointment Booked","Success":true,"MessageCode":200,"isError":false,"Exception":null,"ReturnedValue":null}"

   dynamic d = JsonConvert.DeserializeObject<dynamic>(result); 
```

d.GetType() 为 Newtonsoft.Json.Linq.JObject

那么如何将其反序列化为动态对象而不是 JObject

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:30:13.173

目前还不清楚什么不适合您以及您为什么关心返回类型，但您可以直接访问反序列化对象的属性，如下所示：

```
string result = @"{""AppointmentID"":463236,""Message"":""Successfully Appointment Booked"",""Success"":true,""MessageCode"":200,""isError"":false,""Exception"":null,""ReturnedValue"":null}";
dynamic d = JsonConvert.DeserializeObject<dynamic>(result);

string message = d.Message;
int code = d.MessageCode;
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:30:12.393

你可能想要类似的东西

```
var values = JsonConvert.DeserializeObject<Dictionary<string, dynamic>>(json); 
```

这也可能适合您的需求（未经测试）

```
dynamic d = JsonConvert.DeserializeObject<ExpandoObject>(json); 
```

# c# - Windows Azure：System.UnauthorizedAccessException：访问路径 'E:\approot\

> ID：16108099
> 
> 赞同：0
> 
> 时间：2013-04-19T15:25:35.557
> 
> 标签：c#, azure

我的项目中有一个 xml 文件，应该用于读取操作。当我在本地机器上运行它时，它可以正常工作，但是`System.UnauthorizedAccessException: Access to the path 'E:\approot\...`当我部署工作角色时它会抛出。

我已检查该文件是否存在于该目录中。

我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:54:00.270

您需要在提升模式下运行角色...通过在 csdef 中添加 < Runtime executionContext ="elevated" />。

# sass - 使用 Sass 将父选择器附加到末尾

> ID：16108103
> 
> 赞同：15
> 
> 时间：2013-04-19T15:25:46.083
> 
> 标签：sass

好的，假设我有以下传统 CSS

```
.social-media { /* ... */ }
.social-media .twitter { /* ... */ }
.social-media .facebook { /* ... */ }
ul.social-media { /* ... */ } 
```

所以，我试着用 SCSS 做这样的事情：

```
.social-media {

    /* ... */

    .twitter { 
        /* ... */
    }
    .facebook {
        /* ... */
    }

    // Here's the problem:
    ul& {
        /* ... */
    }
} 
```

最后一部分不起作用，因为似乎 & 符号应该只出现在选择器的开头。有解决方法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-19T15:29:00.847

# Sass 3.2 及以上版本

您唯一能做的就是反转嵌套或根本不嵌套：.social-media {

```
 /* ... */

    .twitter { 
        /* ... */
    }
    .facebook {
        /* ... */
    }
}

ul.social-media {
    /* ... */
} 
```

# Sass 3.3 及更高版本

您可以使用插值和`@at-root`指令来做到这一点：

```
.social-media {
    /* ... */

    // Here's the solution:
    @at-root ul#{&} {
        /* ... */
    }
} 
```

但是，如果您的父选择器包含多个选择器，则需要`selector-append`改用：

```
.social-media, .doodads {
    /* ... */

    // Here's the solution:
    @at-root #{selector-append(ul, &)} {
        /* ... */
    }
} 
```

输出：

```
.social-media, .doodads {
  /* ... */
}
ul.social-media, ul.doodads {
  /* ... */
} 
```

# c# - 空的 MailMessage 构造函数何时工作？

> ID：16108105
> 
> 赞同：4
> 
> 时间：2013-04-19T15:25:50.460
> 
> 标签：c#, asp.net, web-config, system.net.mail

我们有一个使用 System.Net.Mail.MailMessage 和空构造函数的 Asp.Net 解决方案已经生产了 2 年多：

```
using (MailMessage _mailMessage = new MailMessage()) // Exception thrown here
{
  _mailMessage.From = new MailAddress(sFrom); // Setting additional properties - never gets here
  _mailMessage.Body = sBody;
  _mailMessage.Subject = sSubject;
  _mailMessage.IsBodyHtml = true; 
```

昨天我们有一个实时站点报告异常：指定的字符串不是电子邮件地址所需的格式。我们通过将所需节点添加到 web.config 文件来修复它。

问题是：为什么这会奏效？或者它曾经工作过吗？

错误：指定的字符串不是电子邮件地址所需的格式。在 System.Net.Mail.MailAddressParser.ReadCfwsAndThrowIfIncomplete(String data, Int32 index) 在 System.Net.Mail.MailAddressParser.ParseDomain(String data, Int32& index) 在 System.Net.Mail.MailAddressParser.ParseAddress(String data, Boolean expectMultipleAddresses , Int32& index) 在 System.Net.Mail.MailAddressParser.ParseAddress(String data) 在 System.Net.Mail.MailAddress..ctor(String address, String displayName, Encoding displayNameEncoding) 在 System.Net.Mail.MailMessage..ctor ()

谢谢

**编辑**：

*   我们上个月从 .net 3.5 更新到了 4.0！
*   添加了堆栈跟踪
*   7 个月后，该错误仅出现在某些服务器上。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-24T14:26:51.410

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:55:06.157

Is your code set some properties after this using statement?

The default constructor has and still does work, as long as you set the properties necessary later in the code before actually triggering the send. The web.config node, typically just provides default values for those properties.

I would look into it and see if some of the properties are not getting set right and why.

# html - 替换freemarker中的换行符

> ID：16108107
> 
> 赞同：10
> 
> 时间：2013-04-19T15:25:54.507
> 
> 标签：html, freemarker

有没有办法替换自由标记上的换行符？我正在尝试这个：

```
<#assign str = str?replace("(\r\n)+", "</p><p>")> 
```

它在 Java 中有效，但在 freemarker 中无效。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T15:41:48.507

好的，我发现了问题。替换函数需要知道表达式是否是正则表达式，所以我不得不添加 'r' 作为[参数](http://freemarker.sourceforge.net/docs/ref_builtins_string.html#ref_builtin_string_flags)

```
<#assign str = str?replace("(\r\n)+", "</p><p>",'r')> 
```

# sql-server - 从 TFS 2010 迁移到 TFS 2012

> ID：16108111
> 
> 赞同：0
> 
> 时间：2013-04-19T15:26:05.443
> 
> 标签：sql-server, windows-server-2012, tfs-migration

我们刚刚使用 SQL Server 2012 数据库创建了一个带有 TFS 2012 的新 Windows Server 2012。我需要使用 SQL Server 2008 RS 将带有历史记录的代码从 TFS 2010 迁移到这个新服务器。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:19:55.370

我最近走上了这条路。你基本上有两个选择：

1.  迁移
2.  升级

**移民**

我开始沿着**Migration**路线下载**TFS Integration**。简而言之，结局很糟糕。我总共花了 2 周的时间运行迁移，最终放弃了。该工具表示，完成迁移需要一个多月的时间。

最终我放弃了，而是尝试了**升级**路线。

**注意。我想指出，虽然我遇到了问题，但我敢肯定有很多人成功地使用了这个工具。我只是从我自己的经历说**

**升级**

你和我处于同样的位置，即你已经准备好了一个新的服务器。您需要做的升级如下（**这不是完整指南，下面有一个链接可以查看此过程的完整指南。**）：

1.  `Team Foundation Administration Console`在2010服务器上打开
2.  点击`Team Project Collections`
3.  在`General`选项卡上，选择`Detach Team Project Collection`- 打开一个向导
4.  按照向导并分离集合。
5.  分离后，备份`Collection Database`
6.  如果已安装 TFS 2012，则只需将数据库还原到新的 TFS 2012 实例即可。如果没有，您需要使用 TFSConfig PrepSQL 准备新的 SQL Server。
7.  将备份还原到 SQL 2012 实例
8.  `Team Foundation Administration Console`在 TFS 2012 上附加该集合。

**Detach 和 Attach 过程很重要，因为它们为传输过程准备 TFS 并实际在数据库上执行升级**

**这不是一个完整的指南，这只是一组指针。我强烈建议您在执行任何步骤之前完整阅读此页面。[http://msdn.microsoft.com/en-us/library/dd936138(v=vs.100).aspx#Backup](http://msdn.microsoft.com/en-us/library/dd936138(v=vs.100).aspx#Backup)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T21:25:46.847

我想到了！

我用这个系列来安装 TFS 和迁移： http: [//mohamedradwan.wordpress.com/2013/01/05/upgrade-tfs-2010-to-tfs-2012-with-migration-to-a-新硬件系列/](http://mohamedradwan.wordpress.com/2013/01/05/upgrade-tfs-2010-to-tfs-2012-with-migration-to-a-new-hardware-series/)

对我的评论的回答如下：

当您转到您的团队项目集合时，您实际上可以使用 ChangeUrl 函数将其重置为应有的状态。从另一台服务器进行恢复时，通常会出现错误的 url。我拍摄了该过程的屏幕截图，并且应该更加注意完成时的警告。

至于我的第二个问题，显然 VS 保留了一个配置文件，其中包含包含凭据的映射设置。我试图删除并保存，但由于某种原因这不起作用。我将它映射到一个新文件夹，它可以正常工作。

# c - 以太网环回测试

> ID：16108118
> 
> 赞同：1
> 
> 时间：2013-04-19T15:26:28.977
> 
> 标签：c, linux, sockets, ethernet

我正在尝试创建一个测试来验证 PHY 环回是否正常工作。用c语言在linux上开发。这基本上就是测试当前正在做的事情：

1.  调出接口并确保它具有有效的 IP 地址
2.  在 UDP 模式下创建两个套接字 (SOCK_DGRAM)
3.  将两个套接字绑定到正在测试的特定接口
4.  将传入套接字绑定到特定端口
5.  使用 sendto 写入传出套接字，指定端口和 IP 地址
6.  从传入的套接字读取

我遇到的问题是，无论是否启用环回，我总是在读回数据。该接口未连接到交换机，因此我不希望数据通过物理电缆返回。我怀疑堆栈会在数据到达 PHY 之前将数据路由回去。有什么方法可以确保数据包物理地从接口发送出去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:41:33.720

正如您可能已经猜到的那样，这不是一个错误，而是一个特性（也是一个必不可少的特性）。但是，我怀疑您是否能够在没有第二个接收器的情况下测试 PHY。

案例 #1：NIC 将数据发送到集线器（这些仍然存在吗？）。集线器只会放大信号。没有人会与 NIC 讨论该信号。NIC 没有兴趣在发送信号时读取它自己的信号。

案例#2：网卡将数据发送到交换机。开关将在其路由中自动永远不会将信号发送回源。这样做没有意义，并且在某些情况下（例如广播包）会导致网络出现严重问题。

案例#3：您有一个复杂的网络设置，其中可能出现循环。要么你的网络被搞砸了，要么你使用像生成树这样的技术来明确地阻止你的信号被路由回你。

如您所见，内部数据路由是必不可少的。您没有机会通过一个物理以太网接口发送某些东西并在同一端接收它。

# wpf - 鼠标控制立即丢失

> ID：16108121
> 
> 赞同：1
> 
> 时间：2013-04-19T15:26:41.327
> 
> 标签：wpf

我的意图是捕获特定控件的鼠标事件，但鼠标捕获立即丢失

XAML

```
<Window x:Class="TryMouseCapture.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Label x:Name="lbl" BorderBrush="Black" BorderThickness="2" GotMouseCapture="lbl_GotMouseCapture" IsEnabled="True" LostMouseCapture="lbl_LostMouseCapture" MouseLeftButtonDown="lbl_MouseLeftButtonDown">Mouse captured here</Label>
        <Label Grid.Row="1" BorderBrush="Red" BorderThickness="2">Click here</Label>
        <Button Grid.Row="2" Click="Button_Click">Capture Mouse in the first label</Button>
    </Grid>
</Window> 
```

后面的代码

```
 private void lbl_GotMouseCapture(object sender, MouseEventArgs e)
    {
        Label label = (Label)sender;
        var b = label.IsMouseCaptured;
    }

    private void lbl_LostMouseCapture(object sender, MouseEventArgs e)
    {
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {            
        var b = Mouse.Capture(lbl);            
    }

    private void lbl_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {

    } 
```

所以点击按钮后，`lbl_GotMouseCapture`调用了，然后紧接着`lbl_LostMouseCapture`。

除了打电话，还有别的事可做`Mouse.Capture(lbl);`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:09:52.563

对我来说，代码有效。但是设置 b 变量意味着您正在设置断点。我会用 Debug 语句替换它们以开始..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-16T15:45:11.813

你也应该设置

`e.Handled = true;`

在您的`Button_Click`事件处理中，使其在任何地方都能正常工作。

# macos - Applescript 从 CD 驱动器打开应用程序

> ID：16108125
> 
> 赞同：0
> 
> 时间：2013-04-19T15:26:47.780
> 
> 标签：macos, flash, applescript, cd, autorun

我在 CD 上有一个闪存程序，当 Cd 插入驱动器时我需要自动运行它。

```
tell application "Finder"
activate
if exists disk "MYRIAD" then
    tell application "Mac"
        activate
    end tell
end if
end tell 
```

Meriad 是我的 CD 名称，Mac 是我的闪存应用程序。当我从桌面测试它时它会启动 Mac 应用程序，但是当我将它刻录到 CD 上时它只打开 FINDER 而没有别的。

现在我还在我的 flash fla 中的第二行编写了代码来执行 Mac 应用程序。

```
stop();
   fscommand ("exec", "Mac");
   fscommand("fullscreen", true);
   fscommand("allowscale", true);
   fscommand("showmenu", false); 
```

我不明白我哪里出错了。

请有人帮忙....在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:54:59.567

有几种方法可以做到这一点。

但是试试这个。

```
 tell application "Finder"
    activate
    if exists disk "MYRIAD" then
            tell application "MYRIAD:Mac.app" to activate
    end if
end tell 
```

*确保在“告诉应用程序”MYRIAD:Mac.app“激活*”中设置正确的路径

线。

用冒号“ **:** ”分隔每个目录，但不要在应用程序路径的开头或结尾放置一个。

在我的示例中，第一个目录是 CD 本身。没有其他目录导致该应用程序。

还要确保按照它在查找器中显示的应用程序命名。

# ruby-on-rails - Rails accept_nested_attributes 仍然抛出“无法批量分配受保护的属性”

> ID：16108137
> 
> 赞同：1
> 
> 时间：2013-04-19T15:27:52.053
> 
> 标签：ruby-on-rails, model, nested-attributes

我想我要么错过了一些非常简单的东西，要么错过了一些非常模糊的东西。希望有人能帮我发现或解释我的布偶。

好的，所以有两个模型，Basket 和 BasketItem。

我已将 Basket 设置为 accept_nested_attributes :basket_items，目的是在 Basket 的编辑视图中使用 fields_for。

然而，当它跑起来时，它仍然尖叫着

```
Error: Can't mass-assign protected attributes: basket_items_attributes 
```

对于这个问题，如果我在控制台中手动使用一个或两个 basket_item 属性来执行 basket.update_attributes，我会归结为同样的问题。所以我知道这是一个模型问题，而不是视图或控制器问题。例如：

```
basket.update_attributes("basket_items_attributes"=>[{"qty"=>"1", "id"=>"29"}, {"qty"=>"7", "id"=>"30"}]) 
```

或类似地使用更像 fields_for 的哈希

```
basket.update_attributes( "basket_items_attributes"=>{
"0"=>{"qty"=>"1", "id"=>"29"}, 
"1"=>{"qty"=>"7", "id"=>"30"}
}) 
```

我已经确保在accepts_nested_attibutes_for之前定义的关联，子模型也具有可访问的适当属性，尝试删除嵌套数据的附加属性，大量摆弄无济于事。

篮子.rb

```
class Basket < ActiveRecord::Base
  has_many :basket_items
  attr_accessible :user_id
  accepts_nested_attributes_for :basket_items
  belongs_to :user

  def total
    total = 0
    basket_items.each do |line_item|
      total += line_item.total
    end
    return total
  end

  # Add new Variant or increment existing Item with new Quantity
  def add_variant(variant_id = nil, qty = 0)

    variant = Variant.find(variant_id)

    # Find if already listed
    basket_item = basket_items.find(:first,  :conditions => {:variant_id => variant.id})

    if (basket_item.nil?) then
      basket_item = basket_items.new(:variant => variant, :qty => qty)
    else
      basket_item.qty += qty
    end

    basket_item.save

  end

end 
```

篮子项目.rb

```
class BasketItem < ActiveRecord::Base

  belongs_to :basket
  belongs_to :variant

  attr_accessible :id, :qty, :variant, :basket_id

  def price
    variant.price
  end

  def sku
    return variant.sku
  end

  def description
    variant.short_description
  end

  def total
    price * qty
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:35:45.170

正如错误所说，您只需要添加`basket_items_attributes`到您接受的属性列表中。

所以你会有

```
attr_accessible :user_id, :basket_items_attributes 
```

在您的 basket.rb 文件的顶部

# java - 如何像在 Java EE 6 中一样在 Spring 3 中获取实体管理器

> ID：16108138
> 
> 赞同：0
> 
> 时间：2013-04-19T15:27:55.620
> 
> 标签：java, spring, spring-mvc

我之前使用过 Java EE 6，我在服务器上创建了一个连接资源（池化），然后将其绑定到我`jta-data-source`在 Persistence.xml 文件的元素标记中引用的 JNDI 名称。

现在我使用 Spring 3，我很难理解我需要设置的所有不同 bean 以及为什么需要这样做。EJB 3 自动将方法包装在事务中。在 Spring 中，您似乎需要配置事务管理器，但我不知道。需要解释。

```
<jee:jndi-lookup id="dataSource" jndi-name="jdbc/myapp" expected-type="javax.sql.DataSource"/>

<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
    </property>
    <property name="packagesToScan" value="com.myapp.app"/>
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.dialect">
                org.hibernate.dialect.PostgreSQL82Dialect
            </prop>
        </props>
    </property>
</bean>

<bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="emf" />
</bean>

<tx:annotation-driven transaction-manager="txManager" proxy-target-class="true" /> 
```

我了解数据源的 jndi 查找，但是我不了解其余部分。我无法使用此配置插入/保留对象。

我需要解释一下 Spring 3 在这方面与 Java EE 6 有何不同，以及如何以同样的方式做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:40:48.617

在对您的原始问题进行了更多思考之后，我想补充一下：

Spring 不会自动用 Transaction 包装每个方法。你必须告诉 Spring 你希望你的事务边界在哪里。您可以使用 XML 配置或使用 @Transactional 注释来执行此操作。

你应该看看你应该在哪里声明交易——[这里](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/orm.html#orm-jpa-straight)和[这里](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-stereotype-annotations)。

你应该看看 Spring 的事务管理 -[这里](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/transaction.html)。

你应该看看 Transaction Config - [here](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)。

我仍然认为您的配置很好，并且您遇到的问题在于尝试使用您的 EntityManager 的 bean。我再次请求你发布它，因为我确信如果我能看到它，我可以让你去。

* * *

我查看了您的配置，但没有发现任何问题。作为一个例子，我将（在底部）提供我现在在一个工作应用程序中的一些东西。

我不相信您的问题出在您的配置中，而在于您对已配置 bean 的使用。如果您可以提供向我（我们）展示您如何与 EntityManager 交互的代码，我可能会发现您的问题。

我将为您提供实体、存储库和 XML 配置的工作示例，以尝试帮助您找到问题：

**弹簧配置**（applicationContext.xml）

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
                           http://www.springframework.org/schema/jee     http://www.springframework.org/schema/jee/spring-jee.xsd
                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
                           http://www.springframework.org/schema/tx      http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">
    <context:annotation-config />

    <context:component-scan base-package="com.company.app.dao" />
    <context:component-scan base-package="com.company.app.service" />

    <jee:jndi-lookup id="dataSource"
                     jndi-name="jdbc/Test" />

    <bean id="jpaDialect"
          class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />

    <bean id="jpaAdapter"
          class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />

    <bean id="entityManager" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource"       ref="dataSource" />
        <property name="jpaVendorAdapter" ref="jpaAdapter" />
        <property name="jpaDialect"       ref="jpaDialect" />
        <property name="packagesToScan" value="com.company.app.model" />
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager"
          class="org.springframework.orm.jpa.JpaTransactionManager"
          p:entityManagerFactory-ref="entityManager" />

    <tx:annotation-driven transaction-manager="transactionManager"
                          proxy-target-class="true" />
</beans> 
```

模型

```
import org.hibernate.validator.constraints.Length;

import javax.persistence.*;
import java.util.HashSet;
import java.util.Set;
import java.util.UUID;

@Entity
public class User {
    @Id
    private String id = UUID.randomUUID().toString();

    @Column
    @Length(min = 3, max = 25)
    private String name;

    @OneToMany(cascade = { CascadeType.ALL }, fetch = FetchType.EAGER, orphanRemoval = true)
    @JoinColumn(name = "userId", nullable = false)
    private Set<Contact> contacts = new HashSet<Contact>();

    public UUID getId() {
        return UUID.fromString(id);
    }

    public void setId(UUID id) {
        this.id = id.toString();
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Set<Contact> getContacts() {
        return contacts;
    }

    public void setContacts(Set<Contact> contacts) {
        this.contacts = contacts;
    }

    public void addContact(Contact contact) {
        this.contacts.add(contact);
    }

    public void removeContact(Contact contact) {
        this.contacts.remove(contact);
    }
} 
```

存储库

```
import com.company.app.model.User;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.criteria.CriteriaQuery;
import java.util.HashSet;
import java.util.Set;
import java.util.UUID;

@Repository
public class UserDao {
    @PersistenceContext
    private EntityManager em;

    @Transactional(propagation = Propagation.REQUIRED)
    public void createUser(User user) {
        em.persist(user);
    }

    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)
    public User readUserById(UUID id) {
        CriteriaQuery<User> query = em.getCriteriaBuilder().createQuery(User.class);
        query.where (em.getCriteriaBuilder().equal(query.from(User.class).get("id"),id.toString()));
        return em.createQuery(query).getSingleResult();
    }

    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)
    public Set<User> readAll() {
        CriteriaQuery<User> query = em.getCriteriaBuilder().createQuery(User.class);
        query.from(User.class);
        return new HashSet<User>(em.createQuery(query).getResultList());
    }

    @Transactional(propagation = Propagation.REQUIRED)
    public User update(User user) {
        return em.merge(user);
    }

    @Transactional(propagation = Propagation.REQUIRED)
    public void delete(User user) {
        em.remove(user);
    }
} 
```

# java - 为什么 Apache POI OPCPackage close() 方法不能保存/写入内容以打开可写文件？

> ID：16108142
> 
> 赞同：6
> 
> 时间：2013-04-19T15:28:08.787
> 
> 标签：java, excel, apache-poi, xssf

使用以下代码，不会保存对我的 Excel 电子表格所做的单元格值更改：

```
OPCPackage pkg = OPCPackage.open(inputFile);
XSSFWorkbook wb = new XSSFWorkbook(pkg);

ModifyWorkbook();

pkg.close(); 
```

以下是我写的解决方法，但我不明白为什么它是必要的。

```
OPCPackage pkg = OPCPackage.open(inputFile);
XSSFWorkbook wb = new XSSFWorkbook(pkg);

ModifyWorkbook();

File tmp = File.createTempFile("tempSpreadsheet", ".xlsx");
FileOutputStream newExcelFile = new FileOutputStream(tmp);
wb.write(newExcelFile);
newExcelFile.close();
tmp.deleteOnExit();
pkg.close(); 
```

该主题的 javadocs 和指南表明 .close() 方法应该保存并关闭。在关闭之前检查修改的单元格的值表明已进行更改，但仅 pkg.close() 方法不足以在关闭时将这些更改写入文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:33:45.210

调用`OPCPackage.close()`将关闭底层 OOXML 文件结构。它不会做的是导致 XSSF（或任何 X??F 格式）写出他们的更改。因此，您将写出一个未更改的文件....

如果您正在进行低级修改，您可以打开 OPCPackage，进行更改，然后调用 close 将它们写出来。如果您正在做高级别的事情，您打开 OPCPackage，使用 UserModel 代码进行更改，然后*让 usermodel*写出它的更改。这最后一步很重要。

您当前的代码有点像：

```
File f = new File("test.txt");
Sting s = readFileCompletely(f);
s = s.replaceAll("foo", "bar");
f.close();
// Why hasn't the file contents changed? 
```

读取文件并修改高级对象是不够的，您还需要告诉高级对象写出更改。（出于性能原因，高级对象将事物缓存在内存中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-06T14:47:17.173

调用`close`（XSSF）工作簿将调用 javadoc 声明的 OPCP.close：

> 调用`myWorkbook.close()`应该将更改写入它打开的文件。

但是，当前版本（3.15）似乎在这样做时遇到了问题。我不知道原因本身，但我发现调用`myWorkbook.write()`不仅会将更改提交到输出流，还会在调用 close 后提交到当前实例。

因此，一个合理的解决方法可能是：

```
try (OutputStream bos = ByteStreams.nullOutputStream()){
    workbook.write(bos);
    workbook.close();
} catch (IOException e) {
    log.error("Could not write Output File", e);
} 
```

这里使用[Guavas ByteStreams](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/io/ByteStreams.html#nullOutputStream())完成。随意使用[其他](https://stackoverflow.com/questions/691813/is-there-a-null-outputstream-in-java)空输出流实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-20T16:43:26.223

在最新版本的 POI 中，如果我们通过默认构造函数创建 org.apache.poi.xssf.usermodel.XSSFWorkbook 的对象，我们不需要手动执行此操作。读取它的默认构造方法

```
public XSSFWorkbook() {
        super(newPackage());
        onWorkbookCreate();
    }
protected static OPCPackage newPackage() {
        try {
            OPCPackage pkg = OPCPackage.create(new ByteArrayOutputStream());
            // Main part
            PackagePartName corePartName = PackagingURIHelper.createPartName(XSSFRelation.WORKBOOK.getDefaultFileName());
            // Create main part relationship
            pkg.addRelationship(corePartName, TargetMode.INTERNAL, PackageRelationshipTypes.CORE_DOCUMENT);
            // Create main document part
            pkg.createPart(corePartName, XSSFRelation.WORKBOOK.getContentType());

            pkg.getPackageProperties().setCreatorProperty(DOCUMENT_CREATOR);

            return pkg;
        } catch (Exception e){
            throw new POIXMLException(e);
        }
    } 
```

# oracle - DBMS_JOB 用法：“单一”作业每五秒重复一次

> ID：16108143
> 
> 赞同：1
> 
> 时间：2013-04-19T15:28:11.673
> 
> 标签：oracle, triggers, jobs, job-scheduling

我了解到（艰难的方式）DDL 语句不能在登录触发器的非事务上下文中执行，并且解决方案是一项工作。我希望该作业**立即执行一次**，因此将`next_date`参数设置为`sysdate`并将`interval`参数设置为`null`.

这是我在触发器中执行的内容：

```
dbms_job.submit(
  job=>jobNumber, 
  what=>'someProcedure(someParameter);',
  next_date=>sysdate,
  interval=>null
); 
```

这工作得很好，但是一旦触发了触发器（并且已经提交了上述命令），审计日志显示该作业每隔五秒就会在它提交的同一用户帐户下重新出现第一次。关联的程序总是类似于`ORACLE.EXE (J001)`，尽管它当然是从客户端应用程序启动的用户会话。

谁能给我解释一下？我希望能一次完成这项工作，而不是永远重复。提前致谢！

# java - 在我的以下程序中摆脱 java.lang.NullPointerException

> ID：16108151
> 
> 赞同：-1
> 
> 时间：2013-04-19T15:28:33.533
> 
> 标签：java, linux, file, exception

当我在 /home/meow 目录中搜索某些内容并列出所有文件时，该程序运行良好，但是当我尝试列出系统“/”上的所有文件时，它在打印 /bin 目录的内容后崩溃。**我也尝试将其作为 SUDO java pin 执行**

```
import java.io.*;

public class Pin
{
    public static void printFiles(String a)
    {
        File dir = new File(a);
        for(File file:dir.listFiles())
        {
            if(file.isFile())
            {
                System.out.println(file);
            }
            else
            {
                printFiles(file.toString());
            }
        }
    }
    public static void main(String[] args)
    {
        printFiles("/");
    }
} 
```

这是我的输出...

```
vikkyhacks java # sudo java Pin
/lib64/ld-linux-x86-64.so.2
/bin/ntfsmove
/bin/init-checkconf
/bin/chown
/bin/mt-gnu
/bin/ntfs-3g.usermap
/bin/mountpoint
/bin/plymouth
/bin/s
/bin/bunzip2
/bin/gzexe
/bin/fgconsole
/bin/ntfstruncate
/bin/i
/bin/plymouth-upstart-bridge
/bin/fgrep
/bin/ping
/bin/lesspipe
/bin/rbash
/bin/gzip
/bin/ntfsmftalloc
/bin/lowntfs-3g
/bin/tailf
/bin/bzcat
/bin/tempfile
/bin/domainname
/bin/touch
/bin/zcmp
/bin/mktemp
/bin/nano
/bin/unicode_start
/bin/ln
Exception in thread "main" java.lang.NullPointerException
    at Pin.printFiles(Pin.java:9)
    at Pin.printFiles(Pin.java:17)
    at Pin.printFiles(Pin.java:17)
    at Pin.main(Pin.java:23) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:32:34.923

您需要检查是否从`File#listFiles`. 这可能发生在所谓的逻辑文件的情况下，其中文件实际上是物理文件的视图：

```
File[] files = dir.listFiles();
if (files != null) {
   for (File file : files) {
   ... 
```

或者，您可以只处理目录中的任何内容

```
public static void printFiles(String a) {

   File[] files = new File(a).listFiles();
   if (files != null) {
      for (File file: files) {
         if (file.isFile()) {
            System.out.println(file);
         } else if (file.isDirectory()) {
            printFiles(file.toString());
         } 
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:54:14.337

您需要检查文件或目录是否存在，通过使用

```
File file = new File(a);
if (file.exists()){
 for(File file:dir.listFiles())
    {
        if(file.isFile())
        {
            System.out.println(file);
        }
        else
        {
            printFiles(file.toString());
        }
    } 
} 
```

# ruby-on-rails - MiniMagick - 无法加载此类文件

> ID：16108152
> 
> 赞同：13
> 
> 时间：2013-04-19T15:28:36.880
> 
> 标签：ruby-on-rails, gem, imagemagick, rmagick

我正在尝试使用 MiniMagick 调整图像大小，并在我的控制器文件中执行了以下操作：

```
require 'rubygems'
require 'mini_magick' 
```

和

```
img = MiniMagick::Image.open(file) 
```

但是当我调用控制器时，以下

```
LoadError (cannot load such file -- mini_magick) 
```

我已经添加`gem 'mini_magick'`到我的 Gemfile 中，所以我真的不知道发生了什么。有人可以帮我弄这个吗？

`irb`顺便说一句，它在和中都可用`rails console`，但在作为服务器运行时不可用。

提前谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-19T15:50:07.510

该死，重新启动服务器解决了它..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-28T11:59:11.917

添加`gem "mini_magick"`到您的 Gemfile

并重新启动您的服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-09T15:10:03.110

就我而言：

```
gem 'image_processing' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-21T07:18:14.203

我也面临这个问题。只需取消注释该行

```
include CarrierWave::MiniMagick 
```

在您的上传文件中，并确保您已评论该行

```
include CarrierWave::RMagick 
```

因此，您在上传文件中的设置应如下所示：

```
# include CarrierWave::RMagick
include CarrierWave::MiniMagick 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-31T22:54:53.063

有时这个问题是由于没有最新版本的 gems 引起的。它可以通过运行捆绑更新来修复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-23T19:45:12.653

每当您遇到此错误时，只需使用该命令添加`gem "mini_magick"`并重新启动您的服务器。`rails s`但最重要的是，请记住始终检查终端上的服务器日志以获取错误消息。在找出解决问题所需的解决方案时，他们是您最好的朋友。

# javascript - 无法读取 null 的属性“img”

> ID：16108154
> 
> 赞同：-2
> 
> 时间：2013-04-19T15:28:42.033
> 
> 标签：javascript, jquery

[http://bvh.delineamultimedia.com/?page_id=2](http://bvh.delineamultimedia.com/?page_id=2) -> 我在此页面上遇到错误，其中 Superbox.js 脚本位于此处。[http://bvh.delineamultimedia.com/wp-content/themes/bvh/js/portfolio/superbox.js](http://bvh.delineamultimedia.com/wp-content/themes/bvh/js/portfolio/superbox.js)

控制台在第 51 行指出 Uncaught TypeError: Cannot read property 'img' of null

现在在第 51 行，它说明了以下内容。

```
var imgData = currentimg.data();
superboximg.attr('src', imgData.img); 
```

我认为这没有任何问题，但我对为什么会收到此错误感到困惑。

任何想法或帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:33:49.270

您必须添加`data-img`包含图像路径的属性。[这](https://github.com/toddmotto/superbox/blob/master/index.html)是一个例子。

```
 <img src="img/superbox/superbox-thumb-24.jpg" data-img="img/superbox/superbox-full-24.jpg" alt="" class="superbox-img"> 
```

# c++ - 为 Unix 编写像 cmp 这样的实用程序来处理可选的 [SKIP] 参数

> ID：16108157
> 
> 赞同：0
> 
> 时间：2013-04-19T15:28:52.747
> 
> 标签：c++, c, linux, unix, while-loop

我需要`cmp`在 C 中制作类似于 Unix 的实用程序。 cmp 比较两个文件并输出不同的第一个字符的数量。

```
cmp [-s] file1 file2 [SKIP1] [SKIP2] 
```

我做得很好，但是跳过字符我遇到了一些麻烦。 `SKIP1`用于`file1`n 个字符后的比较，`SKIP2`用于n 个字符`file2`后的比较。

部分代码：

```
...
while ((fgets(filebuff,  MAXLINE, file1)) != NULL && 
       (fgets(filebuff2, MAXLINE, file2)) != NULL)
{
    ++linepos;
    same = compare_str(filebuff, filebuff2); // my function that return 0 if equal and change pos of first diff element 
    if (same != 0)
    {
        fclose(file1);
        fclose(file2);
        printf("differ: char %i, line %i\n",charpos,linepos);
        return 1;
    }
}
fclose(file1);
fclose(file2);
return 0; 
```

我不知道如何与从 SKIP1 或 SKIP2 开始进行比较。

```
while ((fgets(filebuff, MAXLINE, file1))!=NULL && (fgets(filebuff2, MAXLINE, file2)) != NULL) 
```

此代码逐行读取文件，并且每个文件中的每两行都发送到函数。我不想改变我的比较功能。我需要发送已经剪切的字符串。也许从 n 位置开始循环`fgets()`，但我不知道如何。

# c++ - 如何摆脱“Intellisense：没有合适的转换函数从“std::string”到“std::string *”存在”错误？

> ID：16108162
> 
> 赞同：0
> 
> 时间：2013-04-19T15:29:13.020
> 
> 标签：c++, string, function, visual-c++, intellisense

所以这是我的代码，

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
const int NUM_NAMES = 20;
string names [NUM_NAMES] = {"Collins, Bill", "Smith, Bart" , "Allen, Jim", "Griffin, Jim", "Stamey, Marty", "Rose, Geri","Taylor, Terri",
    "Johnson, Jill", "Allison, Jeff", "Looney, Joe" , "Wolfe, Bill", "Rutherford, Greg", "Javens, Renee","Harrison, Rose","Setzer, Cathy",
    "Pike, Gordon","Holland, Beth"};
string smallest;
int minindex;
void displayNames (string[NUM_NAMES], int);

cout<<"Here are the unalphabetized names";
****displayNames(names[NUM_NAMES], NUM_NAMES);****

for(int i=0; i < (NUM_NAMES -1); i++)
{
    minindex=i;
    smallest=names[i];
    for(int j = (i+1); j<NUM_NAMES; j++)
    {
        if(names[j]<smallest)
        {
            smallest = names[j];
            minindex = j;
        }
    }
    names[minindex] =names[i];
    names[i] = smallest;

    system("pause");
    return 0;
}
}

void displayNames(string names[], int NUM_NAMES)
{
    for (int i =0; i<NUM_NAMES; i ++)
{
    cout<<names[i]<<endl;
}
} 
```

由四个星号括起来的行是我尝试构建时错误代码引用的行。我的实际代码中没有星号。我不明白如何修复错误

```
Intellisense: no suitable conversion function from "std::string" to "std::string *" exists 
```

我已经浏览了一页又一页的搜索，但是所有问题/答案似乎都指的是来自`string to int`or `string to char`etc. not的转换函数`string to string`。

在旁注中，我还必须按字母顺序排列这些，我目前有什么工作吗？我的教授说计算机应该评估字符串的 char 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:33:23.773

这是错误的：

```
displayNames(names[NUM_NAMES], NUM_NAMES); 
```

这是正确的：

```
displayNames(names, NUM_NAMES); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:33:23.987

您应该将名称发送到函数而不是名称 [NUM_NAMES]。names 是数组或字符串指针，但 names[NUM_NAMES] 是字符串。您的函数需要一个字符串指针。

std::String[] 等同于 std::String*

# arrays - 在 MATLAB / Octave 中拆分数组和导出值

> ID：16108170
> 
> 赞同：0
> 
> 时间：2013-04-19T15:29:24.957
> 
> 标签：arrays, matlab, octave

我有一个大数组，其中行数会有所不同，我想拆分并导出到多个文件。

我正在考虑使用 reshape 命令，但后来我意识到要使数组工作需要具有相同数量的行，情况并非总是如此。

```
clear all, clc,clf,tic
num_elm = 11;
num_elm_split = 4;  %Splits into columns
t = linspace(1, num_elm, num_elm)';

v = reshape(t, num_elm_split,[]); %Will split array into different columns
%'for' loop to split number of elements
for ii = 1:length(t(:, 1))
    ii
end 
```

**例子：**

如果我有一个包含 11 个值的数组

```
a = [1; 2; 3; 4; 5; 6; 7; 8; 9; 10; 11] 
```

我希望它被分成每三个值并将数据输出到一个文件中。

**ouput1.txt 里面**会有 **1 2 3**

**ouput2.txt 里面**会有 **4 5 6**

**ouput3.txt 里面**会有 **7 8 9**

**ouput4.txt 里面**会有 **10 11**

我知道我可以在 Linux 中使用[split](http://linux.die.net/man/1/split)命令，但我试图只使用 MATLAB/ [Octave](http://en.wikipedia.org/wiki/GNU_Octave)代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:42:41.577

基本思想是这样做：

```
values = 1 : 11;
binSize = 3;
fileNum = 1;
n = numel(values);
for i = 1 : binSize : n
   part = values(i : min(n, i + binSize - 1));
   fprintf('File %d contains %s\n', fileNum, mat2str(part));
   fileNum = fileNum + 1;
end 
```

输出：

```
File 1 contains [1 2 3]
File 2 contains [4 5 6]
File 3 contains [7 8 9]
File 4 contains [10 11] 
```

当然，您需要调整循环中的代码以将数据实际保存在磁盘上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:04:49.337

这是代码......这可能会帮助其他人

```
clear all, clc,clf,tic
filesoxplaylistStr='1soxplaylist.pls'; %playlistist filename fix
dirplstmp='/tmp/tmp/';

values = 1 : 11;
binSize = 3;
fileNum = 0;
n = numel(values);
for ii = 1 : binSize : n
    part = values(ii : min(n, ii + binSize - 1))';
    fileNum = fileNum + 1
    %open file to write to
    fidsoxpl = fopen(strcat(dirplstmp,filesoxplaylistStr), 'w'); %create and open file to write to for sox playlist join file
    for jj=1:length(part)
        part_val=part(jj,1) %gets individual filename or values

        %create sox file to join
        fprintf(fidsoxpl,'File%s=%s%s.wav',num2str(jj),dirplstmp,num2str(part_val,'%06d'));%create playlist data file
        fprintf(fidsoxpl,'\n');

    end
    % close file to write to
    fclose(fidsoxpl);

    fn=strcat('test',num2str(fileNum,'%02d'));
    %join files with sox
    syscmd=strcat({'sox '},dirplstmp ,filesoxplaylistStr, {' '},dirplstmp,fn,{'.wav'});
    system(syscmd);

    %add freq to file name

end 
```

# asp.net - 如何从 DevExpress 12.2 中的 XPObjectSpace 中提取会话？

> ID：16108175
> 
> 赞同：0
> 
> 时间：2013-04-19T15:29:32.010
> 
> 标签：asp.net, vb.net, session, devexpress, xpo

我有以下代码：

```
Me.ASPxMenu1.DataSource = New HierarchicalMenuItemCollection(New XPCollection(Of IMenuItem)(DirectCast(WebApplication.Instance.ObjectSpaceProvider.CreateObjectSpace(), XPObjectSpace).session,
                                               CType(New NullOperator("ParentItem"), CriteriaOperator),
                                               New SortProperty("Order", DB.SortingDirection.Ascending))) 
```

它在 DirectCast 中失败，在 DevExpress 11.2 中它是

```
Ctype(WebApplication.Instance.ObjectSpaceProvider.CreateObjectSpace(), ObjectSpace).Session 
```

有人知道如何在 DevExpress 12.2 中做到这一点吗？感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:25:39.993

回答自己的问题：

正确的方法是

```
Dim xpObjectSpaceProvider As New XPObjectSpaceProvider(ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString, Nothing)
Dim ObjectSpace As IObjectSpace = xpObjectSpaceProvider.CreateObjectSpace()

Me.ASPxMenu1.DataSource = New HierarchicalMenuItemCollection(New XPCollection(Of IMenuItem)(CType(ObjectSpace, XPObjectSpace).Session,
                                               CType(New NullOperator("ParentItem"), CriteriaOperator),
                                               New SortProperty("Order", DB.SortingDirection.Ascending))) 
```

# javascript - 用户更改表单内容时如何启用/禁用主干表单视图的保存按钮

> ID：16108176
> 
> 赞同：0
> 
> 时间：2013-04-19T15:29:36.690
> 
> 标签：javascript, jquery-ui, backbone.js, backbone-views, backbone-events

我有从主干模型获取数据的表格。当表格显示时，它们的初始值设置为骨干模型。现在，如果编辑了任何字段，我想在对字段进行任何更改后立即启用“保存”按钮。但是，如果您更改字段值并再次将其更改为原始值，它应该再次禁用允许保存模型的“保存”按钮。我想实现如这个 jsfiddle 所示：http: [//jsfiddle.net/qaf4M/ 2/](http://jsfiddle.net/qaf4M/2/)

我正在使用backbone.js 和backbone.stick ( [http://nytimes.github.io/backbone.stickit/](http://nytimes.github.io/backbone.stickit/) ) 将模型绑定到模板。

我以模型为参数创建如下视图

```
RegionManager.show(new app.myView({
  model : new app.myModel(
   {id: 1})
 })); 
```

我的模型值是这样的：

```
 {
   "id":1, "name:"a" , "age":21
 } 
```

观点如下：

```
myView = Backbone.View.extend({
     template: _.template( $("#template").html() ),
      events: {
         "click #save" : "update",
     },
    bindings: {
       '#id': 'id',
       '#name': 'name',
       '#age': 'age'
    },
    initialize: function () {
   if(this.model){
       this.model.fetch();
   },
   render: function () {           
        this.$el.html( this.template );
        this.stickit(); //used library http://nytimes.github.io/backbone.stickit/
        Backbone.Validation.bind(this);
   },
   update: function() {
       this.model.save (
       {success: this.success_callback, error: this.error_callback});
   },
   success_callback: function (model, response) {
   },
   error_callback: function (model, response) {
        alert('error.');
  }
}); 
```

我的模板看起来像

```
 <script type="text/template" id="template">
 <form id="myForm " >
 <fieldset>
     <label>Name</label>
      <input type="text" id="name" name="name" />
      <label>Age</label>
       <input type="text" id="age" name="age" />
       <input type="hidden" id="id" name="id"/>
   </fieldset>
 <a id="save" disabled >Save Changes</a>
 </form> 
```

我很困惑我应该在哪里绑定事件以及如何或什么是正确的方法来知道用户已经更改了一些值并因此在表单中没有更改时禁用按钮并在进行更改时启用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:46:32.883

一个简单的解决方案是让您的视图听取模型的更改：

```
initialize: function () {
  if(this.model){
    this.model.fetch({
      success: function(model, resp) {
        this.model._attributes = resp; // create a copy of the original attributes
        this.listenTo(this.model, 'change', function() {
          // when the model changes
          // maybe write some function to compare both
          if(_.isEqual(this.model._attributes, this.model.toJSON())) {
            // disable
          }
          else {
            // able
          }
        });
      }
    });
  } 
```

因此，当数据从服务器返回时，您创建一个副本，然后监听模型的更改。如果新属性等于原始属性，则禁用该按钮。

# input - 输入字段上的文本淡入淡出，这是在哪里配置的

> ID：16108178
> 
> 赞同：0
> 
> 时间：2013-04-19T15:29:39.913
> 
> 标签：input, element, field, fade, inspect

我正在建设这个网站，我的客户正在使用模板，并且模板有联系表格，现在我似乎无法理解如何在点击输入字段时让文本淡入淡出，以便在我在之前创建的任何其他字段上工作模板上有。

[该页面上的http://daniloportal.com/NPC2/contact.html](http://daniloportal.com/NPC2/contact.html) 看一下表格，带有 * 的值消失了，但我所做的克隆 EMAIL 输入并没有导致我将 * 去掉。

我一直在疯狂地试图找出页面上的配置位置，如果有任何检查元素可以查看并告诉我，我将不胜感激！

这是代码片段

```
<form id="ajax-contact-form" action="">
<input type="text" name="name" value="Name *" title="Name *" />
  <input type="text" name="email" value="Email *" title="Email *" />
  <input type="text" name="email" value="Email " title="Email *" />
  <textarea name="message" id="message" title="Message *">Message *</textarea>
  <div class="clear"></div>
  <input type="reset" class="btn btn_clear" value="Clear form" />
  <input type="submit" class="btn btn_blue btn_send" value="Send message!" />
  <div class="clear"></div>
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:45:06.477

搜索您的代码以查找导致输入值消失的原因。例如，寻找清除表单字段值的行为（`element.value = ''`如果使用纯 javascript，或者`element.val('')`如果使用 jquery）。

然后你可以看到清除它的条件是什么。在您的情况下，似乎条件是输入的值等于它的“title”属性（您可以使用 Chrome 中的“Inspect Element”进行编辑）。

# c# - Twitter：流式 API，在多个转发之间建立连接

> ID：16108179
> 
> 赞同：0
> 
> 时间：2013-04-19T15:29:40.107
> 
> 标签：c#, javascript, twitter

我查看了 Twitter 流 API 的 API 文档[https://dev.twitter.com/docs/streaming-apis](https://dev.twitter.com/docs/streaming-apis)并查看了一些类似的问题，但它们要么没有解决我的具体问题，要么相关到旧版本的 API。

**问：是否有 ID 字段或类似属性可以让我在转推与其原始来源推文之间建立联系？**

我知道每条推文都有一些属性，但它们似乎并没有给我最完整的画面：

*   `retweeted`: 对于流式传输的推文，应该总是错误的吗？因为他们没有时间被转发？
*   `retweet_count`: 再次，对于新收获的推文应该总是 0 吗？
*   `retweet_status.retweet_count`：这似乎是迄今为止最有用的，给了我单个转推的总运行转推计数，但是通过流媒体我仍然会得到重复的推文，是否有某种 source_tweet_id 可以用来确定重复的推文？

可能我现在这样做的方式是查看消息字符串是否匹配。

谢谢，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T04:08:04.540

当您收到转发对象时，它应该包含一个名为 retweeted_status 的属性，其中包含正在转发的推文的 ID。查看转发 API 的示例请求的响应：[https ://dev.twitter.com/docs/api/1/get/statuses/retweets/%3Aid](https://dev.twitter.com/docs/api/1/get/statuses/retweets/%3Aid)

# c - 将 WRITE SECTOR(S) EXT ATA 命令与 SCSI ATA PASS-THROUGH(16) 一起使用

> ID：16108182
> 
> 赞同：1
> 
> 时间：2013-04-19T15:29:50.953
> 
> 标签：c, kernel, scsi, ata

欢迎。我在为 WRITE SECTOR(S) EXT - 34h、PIO Data-Out（对于 WRITE DMA EXT - 35h、DMA 相同结果）执行 SCSI 命令 ATA PASS-THROUGH(16) 时遇到问题。我使用内核 2.6.39。我有一个由 SCSI 控制的 HDD(SAT​​A)。我想将数据写入该驱动器的特定扇区。为了实现这个目标，我使用了 SCSI 命令 ATA PASS_THROUGH(16)。在源代码中，它可以像这样执行 ioctl：

```
sg_io_hdr_t command;
//hear goes a code that sets proper values to command structure
int fd = open("/dev/sda", O_RDWR);
int result = ioctl(fd, SG_IO, command);
//I know that there is no error checking but it isn't a case at this moment 
```

当 ATA 命令的 LBA 小于 0xFE2600 时，此操作可以正常工作。数据写入驱动器，可以读取，重启后仍然存在。但是，当 LBA >= 0xFE2600 时执行此 ATA 命令时，将显示以下消息：

[5127.415214]ata1.00：异常Emask 0x0 SAct 0x0 SErr 0x0动作0x0

[5127.421751]ata1.00:irq_stat 0x40000001

[5127.425737]ata1.00：命令失败：写入 DMA EXT

[5127.430659] ata1.00: cmd 35/00:01:ff:ff:00/00:00:ff:00:00/40 标签 0 dma 512 输出

[5127.430664] res 51/10:01:ff:ff:00/00:00:ff:00:00/40 Emask 0x81（无效参数）

[5127.446389]ata1.00：状态：{DRDY ERR}[5127.450446]ata1.00：

错误：{ IDNF }

一开始我在想内核可能有问题，它只支持LBA 24位，不支持LBA 48位，但是这个理论与阈值0xFE2600并不完全一致（我认为如果阈值为 0x1000000）。从 IDENTIFY DEVICE - ECh, PIO Data-In 返回的数据中，我可以读到最大 LBA 为 0x2542EAB0，并且该驱动器支持 LBA 48 位。现在真的不要在哪里统计调查这个问题。如果有人有一些想法，请与我分享。如果您希望我提供其他信息，请告诉我，我会尽快提供。

# python - Python中的浮点等式处理

> ID：16108183
> 
> 赞同：3
> 
> 时间：2013-04-19T15:29:51.163
> 
> 标签：python, floating-point

我对 Python 比较陌生，通过阅读文档网站上的[教程页面](http://docs.python.org/3/tutorial/floatingpoint.html#tut-fp-issues)，我发现了这个片段：![在此处输入图像描述](https://i.stack.imgur.com/tIFUa.png) 这让我很好奇，所以我决定将它输入 Python 文件并进行测试。但是，当我这样做时，它给了我不同的结果：

```
 .1+.1+.1 == .3
=> True 
```

这个问题可能看起来微不足道，但我很好奇为什么实际行为与 Python 文档所说的不匹配。有什么答案吗？

**使用[在线解释器](http://labs.codecademy.com/)时会出现此行为。在本地运行它返回 False。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:58:59.127

你从来没有说过你正在运行哪个版本的 Python，这会产生巨大的影响。该算法很可能是基于 IEEE 的双精度数，它应该在系统之间保持一致。然而，CPython 基于底层 C 库，这些库在输入浮点常量时可能会有所不同。其他版本的 Python 也将依赖于一些底层平台。

**编辑：**确认。使用问题中给出的在线解释器，我得到：

```
 '%0.20f' % (.1+.1+.1,)
=> '0.30000000000000004441'
   '%0.20f' % (.3,)
=> '0.30000000000000004441' 
```

在 Windows 上使用 Python 2.7：

```
>>> '%0.20f' % (.1+.1+.1,)
'0.30000000000000004441'
>>> '%0.20f' % (.3,)
'0.29999999999999998890' 
```

看起来在线解释器以不同的方式对输入进行四舍五入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:35:04.307

第一条评论就是答案。在我的系统上：

```
Python 2.7.3 (default, Sep 26 2012, 21:53:58) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 0.1+0.1+0.1 == 0.3
False
>>> 
```

来自 python 文档（[http://docs.python.org/2/tutorial/floatingpoint.html](http://docs.python.org/2/tutorial/floatingpoint.html)）：

> 二进制浮点运算有很多这样的惊喜。[“0.1”的问题将在下面的“表示错误”</a>部分](http://docs.python.org/2/tutorial/floatingpoint.html#representation-error)中详细解释 。有关其他常见意外的更完整说明，[请参阅](http://docs.python.org/2/tutorial/floatingpoint.html#representation-error)[浮点的危险。](http://www.lahey.com/float.htm)

# android - 带有 MySQL 数据的 AutoCompleteTextView

> ID：16108185
> 
> 赞同：1
> 
> 时间：2013-04-19T15:29:54.127
> 
> 标签：android, mysql, android-asynctask, autocompletetextview

我有一个`AutoCompleteTextView`我需要从`MySQL`表中建议名称。我以前只用过一次硬编码一个`string array`.

我在[这个](http://samplecodez.com/android/autocompletetextview.php)链接上只看到了一个例子，它真的没有多大帮助。我需要用`AsyncTask`. 我知道如何处理这`AsynTask`部分，但这是我的问题：

我将不得不发送键入为 a 的短语的每个`param`部分`task`。我从哪里得到这个文本`string`？

我能看到的唯一方法是`TextWatcher`可能。是这样吗，还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:42:05.200

> 是这样吗，还是有其他方法？

你只需要一些机制来“观察”你的输入框中的变化，并且提到了如何实现它的最正确方法`TextWatcher`

因此，实现它并在某些提供`TextWatcher`例如[onTextChanged()](http://developer.android.com/reference/android/text/TextWatcher.html#onTextChanged)的方法中，从输入框分配数据并将它们作为参数发送给*AsyncTask*并在*onPostExecute()*方法中为您创建新的适配器，`AutoCompleteTextView`并从中检索数据`MySQL`并将适配器分配给您的小部件，然后您就得到了它。

**伪代码：**

```
public void onTextChanged(CharSequence s, int start, int before, int count) {
   if (s.length() > 1) {
      insertString = s.toString();
      new YourTask().execute(insertString);                  
   }
} 
```

并在您的 AsyncTask 中，执行如下操作：

```
protected List<String> doInBackground() {
   // fetchning data from MySQL
   return list;
}

public void onPostExecute(List<String> result) {
   if (!result.isEmpty()) {
       SomeAdapter adp = new SomeAdapter(context, layout, result);
       actv.setAdapter(adp);
   }
} 
```

**注意：**在您的情况下，使您的`AsyncTask`类的内部类更容易，`Activity`并且您可以直接访问`UI`组件而无需通过构造函数传递它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:50:58.230

`AutoCompleteTextView`已经为您处理了。基本上，默认情况下，当它确定需要过滤列表时，它会调用该`performFiltering`方法。

因此，如果您想重用现有逻辑，只需创建一个`AutoCompleteTextView`覆盖该`performFiltering`方法的子类并将执行过滤的代码放在那里（在您的情况下为 AsyncTask 调用）。像这样的东西：

```
import android.content.Context;
import android.util.AttributeSet;
import android.widget.AutoCompleteTextView;

public class MyAutoCompleteTextView extends AutoCompleteTextView {

    public MyAutoCompleteTextView(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void performFiltering(CharSequence text, int keyCode) {
        //Here the AutompleteTextView has determined that the list should be filtered
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T17:47:49.460

如何添加 AsynTask 波纹管代码

公共类 MainActivity 扩展 Activity {

```
AutoCompleteTextView txtSearch;
PeopleAdapter adapter;
List<People> mList;
TextView idd;
ImageView imgspn;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mList = retrievePeople();

    txtSearch = (AutoCompleteTextView) findViewById(R.id.txt_search);

    adapter = new PeopleAdapter(this, R.layout.activity_main, R.id.lbl_name, mList);
    txtSearch.setThreshold(1);
    txtSearch.setAdapter(adapter);

    idd = (TextView) findViewById(R.id.idd);
    imgspn = (ImageView) findViewById(R.id.imgspn);
    imgspn.setVisibility(View.INVISIBLE);

    txtSearch.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            String Name = mList.get(position).getId();
            idd.setText(Name);
        }
    });

}

private List<People> retrievePeople() {

    List<People> list = new ArrayList<People>();
    try {
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = (Connection) DriverManager.getConnection("jdbc:mysql://192.168.0.1:3306/stud", "root",
                "Windouspass");
        Statement st = (Statement) con.createStatement();
        ResultSet rs = (ResultSet) st.executeQuery(
                "select name,designation_name,id from umdlv_users ut,t_designation td where ut.designation_id = td.designation_id");
        while (rs.next()) {

            list.add(new People(rs.getString(1), rs.getString(2), rs.getString(3)));
        }
        rs.close();
        st.close();
        con.close();
    } catch (Exception e) {
    }
    return list;
} 
```

}

# c# - 如何将 rtf 或 docx 转换为 PDF 服务器端（无需光栅化或替换 OpenType 字体）

> ID：16108186
> 
> 赞同：4
> 
> 时间：2013-04-19T15:29:54.743
> 
> 标签：c#, pdf, fonts

有谁知道允许从 C# 将 rtf/doc/docx 转换为 pdf 的工具？这些文档包含各种字体（TrueType 或 OpenType），我正在寻找一种不会对 OpenTypes 字体进行光栅化并相当准确地呈现它们的工具。

非常感谢您的任何指点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T08:33:52.763

看看[Aspose.Words](http://www.aspose.com/.net/word-component.aspx)

它在服务器端工作，不需要办公自动化。

我在一个商业项目中使用过它，效果非常好。但它是一个商业组件，所以你需要支付许可证（不是那么便宜）

编辑请在 Aspose 论坛中查看此[线程](http://www.aspose.com/community/forums/thread/431265/embedded-fonts-in-aspose.words.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T09:17:05.653

我最近在一个 C# 项目中使用了 iTextSharp，它运行得很好。不幸的是，我不能给你任何例子，因为这会成为一个巨大的帖子（而且代码是相当机密的）:)

但这里是他们网站的链接，如果有帮助的话：

[http://itextpdf.com/](http://itextpdf.com/)

希望这符合您的需求！

# jquery - Typeahead.js - 无法读取未定义的“isArray”的属性

> ID：16108189
> 
> 赞同：3
> 
> 时间：2013-04-19T15:29:57.747
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, twitter-bootstrap, typeahead.js

我正在尝试`typeahead.js`在 ASP MVC 视图中实现自动完成/搜索，但是在 Chrome 的控制台中，当页面加载时我收到错误：

```
Uncaught TypeError: Cannot read property 'isArray' of undefined ...  typeahead.js:26 
```

这是它所指的 typeahead.js 文件中的代码部分

```
 isString: function(obj) {
        return typeof obj === "string";
    },
    isNumber: function(obj) {
        return typeof obj === "number";
    },
    isArray: $.isArray, <-UncaughtTypeError: Cannor read property of 'isArray' of undefined
    isFunction: $.isFunction,
    isObject: $.isPlainObject,
    isUndefined: function(obj) {
        return typeof obj === "undefined";
    }, 
```

这是`typeahead`代码以及我正在使用的声明。

```
<script src="http://twitter.github.io/typeahead.js/releases/latest/typeahead.js" type="text/javascript"></script>
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('.typeahead').typeahead({
            source: function (term, process) {
                var url = '@Url.Content("~/Home/GetNames")';

                return $.getJSON(url, { term: term }, function (data) {
                    return process(data);
                });
            }
        });
    });
</script> 
```

这是用于搜索的输入元素

```
 <form class="navbar-search pull-left">  
              <input type="text" value="" id="typeahead" data-provide="typeahead" class="search-query" /> @*placeholder=" Agent search" />*@  
            </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:32:33.077

反转`typehead`和`jquery`脚本定义显然第一个取决于第二个：

```
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://twitter.github.io/typeahead.js/releases/latest/typeahead.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script> 
```

# .net - 机器之间的 MD5 哈希值不同

> ID：16108190
> 
> 赞同：1
> 
> 时间：2013-04-19T15:30:00.803
> 
> 标签：.net, vb.net, md5

我有一个奇怪的情况发生。我正在使用以下代码为小文件创建 MD5 哈希。通过将服务器端的哈希值与客户端的哈希值进行比较，我可以测试它是否已更改，以便我可以下载任何更新的副本。

```
Public Function MD5Hash(mFileInfo As FileInfo) As String

    Dim returnString As String = ""
    Try
        Dim f As FileStream = New FileStream(mFileInfo.FullName, FileMode.Open, FileAccess.Read, FileShare.Read, 8192)
        Dim md5 As New System.Security.Cryptography.MD5CryptoServiceProvider()
        md5.ComputeHash(f)
        returnString = GenerateHash(System.Text.Encoding.UTF8.GetString(md5.Hash))
        f.Close()
    Catch
        'File doesn't exist
    End Try

    Return returnString

End Function

Public Shared Function GenerateHash(ByVal SourceText As String) As String

    'Create an encoding object to ensure the encoding standard for the source text
    Dim Ue As New UnicodeEncoding()
    'Retrieve a byte array based on the source text
    Dim ByteSourceText() As Byte = Ue.GetBytes(SourceText)
    'Instantiate an MD5 Provider object
    Dim Md5 As New MD5CryptoServiceProvider()
    'Compute the hash value from the source
    Dim ByteHash() As Byte = Md5.ComputeHash(ByteSourceText)
    'And convert it to String format for return

    Return Convert.ToBase64String(ByteHash)

End Function 
```

问题是在服务器端我得到一个散列，而在客户端我得到一个不同的散列，即使文件是相同的。客户端始终在 WinXP 32bit 和 .NET2.0，服务器是 Win2008 64bit 和 .NET4.0

我已经尝试在服务器上压缩文件并在客户端上提取它以确保文件在下载过程中没有被修改，但我仍然得到相同的哈希不匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T15:50:30.793

```
GenerateHash(System.Text.Encoding.UTF8.GetString(md5.Hash)) 
```

此代码尝试将散列解析为 UTF8 编码的字符串。
由于绝大多数散列不是有效的 UTF8，因此这是行不通的。

相反，您可以将字节编码为字符串格式，例如 base 64。

# html - 在网页中插入 Meta 标签

> ID：16108194
> 
> 赞同：1
> 
> 时间：2013-04-19T15:30:11.173
> 
> 标签：html, internet-explorer, iis-7

不久前，我设计了一个应用程序，可以在我的页面中插入一个元标记，这样我就可以在不同的文档模式下使用 Internet Explorer 测试它们。我的解决方案虽然很实用，但很笨拙。假设 IIS7 和资源管理器作为服务器/客户端，有哪些轻量级解决方案可以在短时间内以编程方式快速添加元标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:01:41.083

[您可以使用URL 重写](http://www.iis.net/downloads/microsoft/url-rewrite)并利用出站重写功能非常轻松地做到这一点。安装后，只需将 web.config 添加到应用程序文件夹，如下所示，它会自动将 META 标记插入应用程序提供的每个 HTML 页面。您显然可以添加更多条件并仅对您想要的页面进行重写（请参阅前置条件）以及从标题或其他位置捕获数据并将其添加到响应中。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <outboundRules rewriteBeforeCache="true">
                <rule name="WriteMETA" preCondition="MatchHTML">
                    <match pattern="&lt;head&gt;" occurrences="1" />
                    <action type="Rewrite" value="&lt;head>&#10;
                        &lt;meta name='author' content='Carlos Aguilar Mares' />
                        " />
                </rule>
                <preConditions>
                    <preCondition name="MatchHTML" patternSyntax="Wildcard">
                        <add input="{RESPONSE_CONTENT_TYPE}" pattern="text/html" />
                    </preCondition>
                </preConditions>
            </outboundRules>
        </rewrite>
    </system.webServer>
</configuration> 
```

# javascript - 多个标记 - GoogleMapsAPI 3

> ID：16108198
> 
> 赞同：-1
> 
> 时间：2013-04-19T15:30:21.870
> 
> 标签：javascript, google-maps-api-3, marker, infobox

一开始我想说，1.我的英语不是最好的（我来自德国（但我希望你能理解我想说的:) 2.我知道有很多这样的问题是已经在这个论坛中了，但我真的是 javascript 的新手等等，所以答案对我没有帮助：/

好的好的，不，我从我的问题开始:)

我有我的 googlemapsAPI，就像下面 [文章中给出的答案一样](https://stackoverflow.com/questions/3059044/google-maps-js-api-v3-simple-multiple-marker-example)

但现在我想要更多的标记然后 5

我该怎么做 ？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:32:36.660

从字面上看，您需要做的就是向`locations` [数组](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Array)添加另一个元素。

```
var locations = [
  ['Bondi Beach', -33.890542, 151.274856, 4],
  ['Coogee Beach', -33.923036, 151.259052, 5],
  ['Cronulla Beach', -34.028249, 151.157507, 3],
  ['Manly Beach', -33.80010128657071, 151.28747820854187, 2],
  ['Maroubra Beach', -33.950198, 151.259302, 1],
  ['Another Marker', -33.950148, 151.259312, 6]
]; 
```

假设这是一个严肃的问题，我建议您阅读 javascript 和一般编程的基础知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T10:10:36.690

如果您想在进行过程中添加更多标记，也可以使用推送功能：

```
locations.push(['Another Marker', -33.950148, 151.259312, 6]); 
```

将标记添加到`locations`.

但是请看一些 JavaScript 教程，因为这是您应该了解的基本知识之一，以使您的编程变得简单......

# c++ - C++ 在调用者中调用指针

> ID：16108205
> 
> 赞同：1
> 
> 时间：2013-04-19T15:30:35.380
> 
> 标签：c++

我对 C++ 很陌生，需要知道如何使用 %data

```
 int ping = pNetChannel->GetPing(true);
if (ping < 500)
{
    float data = pNetChannel->GetPing(true);
    pNetChannel->Disconnect(eDC_Kicked,"High Ping: %data m/s");
} 
```

此代码是实验性的，它被设计为服务器的绝对限制 - 在其他地方的配置文件中手动指定自定义限制。

此代码需要断开播放器并在“High Ping”部分之后显示“数据”变量。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:46:50.700

取决于**断开连接**的外观。像这样的东西可能会做你想做的事（假设 eDC_Kicked 是某种类状态）

```
void Disconnect(Status _status, std::string _reason) { 
    // Do disconnect things
    ...
    // Print message
    std::cout << _reason << std::endl;
} 
```

但是，在发送它执行函数之前，您仍然必须构造您的字符串（例如，使用字符串流）：

```
if (ping < 500)
{
    float data = pNetChannel->GetPing(true);
    std::ostringstream oss;
    oss << data;
    std::string ping(oss.str());
    std::string reason = "High ping: " + ping;
    pNetChannel->Disconnect(eDC_Kicked, reason);
} 
```

或者，如果有意义，您可以以这种方式编写**Disconnect （并将字符串“High Ping：”和浮点值分别传递给它）：**

```
void Disconnect(Status _status, std::string _message, float _value) { 
     // Do disconnect things
     ...
     // Print message
     std::cout << _message << " " << _value << std::endl;
 } 
```

但是，如果您每次都没有确切的一条消息和一个变量等，这可能是不可取的。此外，如果您愿意，您可以使用**printf**进行打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:38:03.040

据说，你的意思是：

```
float data = pNetChannel->GetPing(true);
pNetChannel->Disconnect(eDC_Kicked,"High Ping: %5.2f m/s", data); 
```

尽管它与以下内容不一致：

```
int ping = pNetChannel->GetPing(true); 
```

之前就行了。是否`GetPing`返回整数或浮点值？

# javascript - AngularJS 是否像 RequireJS 一样支持 AMD？

> ID：16108207
> 
> 赞同：19
> 
> 时间：2013-04-19T15:30:48.180
> 
> 标签：javascript, angularjs, requirejs

在[**这个 repo**](https://github.com/addyosmani/todomvc/tree/gh-pages/labs/dependency-examples/angularjs_require)中，AngularJS 是用 AMD 的 RequireJS 实现的。

在[**这个 repo**](https://github.com/angular/angular-seed/blob/master/app/index-async.html)*中，AngularJS 团队为 AMD 提供了一个不*包含 RequireJS的 AngularJS 项目。

*   我是否以错误的方式思考这个问题 - 即他们是否解决了不同的问题？
*   AngularJS 库现在支持 AMD 以前没有的地方吗？
*   是否不再需要在 AngularJS 项目中使用 RequireJS？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-01-10T19:06:00.787

将 RequireJS 与 AngularJS 一起使用是有意义的，但前提是您了解它们各自在**依赖注入**方面的工作方式，因为尽管它们都注入依赖项，但它们注入的东西却截然不同。

AngularJS 有自己的依赖系统，可以让你将 AngularJS 模块注入到新创建的模块中，以便重用实现。假设您创建了一个实现 AngularJS 过滤器“greet”的“第一个”模块：

```
angular
  .module('first', [])
  .filter('greet', function() {
    return function(name) {
      return 'Hello, ' + name + '!';
    }
  }); 
```

现在假设您想在另一个名为“second”的模块中使用“greet”过滤器，该模块实现了“goodbye”过滤器。您可以将“第一个”模块注入“第二个”模块：

```
angular
  .module('second', ['first'])
  .filter('goodbye', function() {
    return function(name) {
      return 'Good bye, ' + name + '!';
    }
  }); 
```

问题是，为了在没有 RequireJS 的情况下使其正常工作，您必须确保在创建“第二个”AngularJS 模块之前在页面上加载“第一个”AngularJS 模块。引用文档：

> 依赖于模块意味着需要在加载所需模块之前加载所需模块。

从这个意义上说，这里是 RequireJS 可以帮助您的地方，因为 RequireJS 提供了一种将脚本注入页面的干净方式，帮助您组织彼此之间的脚本依赖关系。

回到“第一个”和“第二个”AngularJS 模块，这里是如何使用 RequireJS 分离不同文件上的模块以利用脚本依赖加载：

```
// firstModule.js file
define(['angular'], function(angular) {
  angular
    .module('first', [])
    .filter('greet', function() {
      return function(name) {
        return 'Hello, ' + name + '!';
      }
    });
}); 
```

```
// secondModule.js file
define(['angular', 'firstModule'], function(angular) {
  angular
    .module('second', ['first'])
    .filter('goodbye', function() {
      return function(name) {
        return 'Good bye, ' + name + '!';
      }
    });
}); 
```

您可以看到，在执行 RequireJS 回调的内容之前，我们依赖于要注入的“firstModule”文件，这需要加载“第一个”AngularJS 模块以创建“第二个”AngularJS 模块。

旁注：需要在“firstModule”和“secondModule”文件中注入“angular”作为依赖项，以便在 RequireJS 回调函数中使用 AngularJS，并且必须在 RequireJS 配置中配置它以将“angular”映射到库代码。您可能也以传统方式（脚本标记）将 AngularJS 加载到页面，尽管这会破坏 RequireJS 的好处。

更多关于从我的博客文章 2.0 版本的 AngularJS 核心获得 RequireJS 支持的详细信息。

**根据我的博*文“用 AngularJS 理解 RequireJS”*，这里是[链接](http://leog.me/log/making-sense-of-requirejs-with-angularjs/)。**

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-19T21:26:57.890

是的，您可以将 RequireJS 与 angular 一起使用。您需要做一些额外的工作才能使其正常运行，如您包含的链接中所示，但这是可能的。

不过，总的来说，我还没有发现任何需要 AMD 和 Angular。AMD 的整个想法是它允许您以声明方式指定脚本之间的依赖关系，而不必担心将它们包含在页面上的顺序。但是，Angular 会通过它的依赖注入机制为您解决这个问题，因此在此之上使用 AMD 并没有真正获得任何好处。

**tl;博士**我还没有找到一个令人信服的理由来使用 AMD 和 Angular.js。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-09T16:04:30.470

您可以使用提供程序延迟加载 Angular.js 组件。从[文章](http://ify.io/lazy-loading-in-angularjs/)：

> 提供者本质上是用于创建和配置 AngularJS 工件实例的对象。因此，为了注册一个惰性控制器，您将使用`$controllerProvider`. ...
> 
> 总之，您将首先定义您的应用程序模块以保留相关提供程序的实例。然后，您将定义您的惰性工件以使用提供程序而不是模块 API 进行注册。然后使用在路由定义中返回承诺的“解决”函数，您将加载所有惰性工件并在加载后解决承诺。这可确保在渲染相关路由之前所有惰性工件都可用。另外，不要忘记在 $rootScope.$apply 中解析 promise，如果解析将在 AngularJS 之外发生。然后，您将创建一个“引导”脚本，在引导应用程序之前首先加载应用程序模块。最后，您将从“index.html”文件链接到引导脚本。

[http://ify.io/lazy-loading-in-angularjs/](http://ify.io/lazy-loading-in-angularjs/)

# tfs - TFS2012：我们可以修改 Web 访问板过滤器吗？

> ID：16108210
> 
> 赞同：1
> 
> 时间：2013-04-19T15:30:55.310
> 
> 标签：tfs

我们可以添加/修改板的过滤器：

*   **工作/待办事项/产品待办事项/董事会**（*故事/待办事项*）
*   应该能够过滤迭代/冲刺
*   **工作/董事会**（*任务*）
*   应该可以改变Areapath过滤

有什么方法可以更改默认过滤器和/或添加快速过滤器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T08:34:22.243

[TFS 2012 Update 2](http://www.microsoft.com/visualstudio/eng/downloads#d-visual-studio-2012-update)中的[工作项标记](http://tfs.visualstudio.com/en-us/home/news/2013/jan-30/#work%20item%20tagging) 功能可以提供帮助。

除此之外，您可以编写自己的[插件](http://blogs.msdn.com/b/serkani/archive/2012/06/22/work-item-custom-control-development-in-tf-web-access-2012-development.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:46:22.593

根据这篇文章，您无法真正修改任务板的基础查询： [如何在 TFS 预览上更改任务板（和积压板）的基础查询](http://social.msdn.microsoft.com/Forums/en-US/TFService/thread/a0e6d48e-eda7-4dc4-95ac-bd1f5ab0fd29/)

尽管如前所述，TFS 2012 Update 2 中的标签可以提供帮助。

但是，通过为每个产品创建一个团队，我们实现了与您所要求的类似的事情。

*   在您的团队项目的 Web 控制面板中，为您感兴趣的每个产品创建团队（和区域路径）。

*   在控制面板中，对于这些团队中的每一个，您都可以设置与它们关联的迭代。因此，对于特定团队，您只关联您对该产品感兴趣的迭代。

然后，您可以通过 TFS Web 界面左上角的下拉菜单在团队之间切换（您最初需要使用 Browse All。）

请参阅[使用 Microsoft Team Foundation Server 2012 和 Visual Studio Scrum V2.0](http://blogs.ripple-rock.com/colinbird/2012/11/19/MultipleTeamsWithMicrosoftTeamFoundationServer2012VisualStudioScrumV20.aspx)的多个团队，以获得很好的参考。

# facebook - 脸书网址分享者

> ID：16108211
> 
> 赞同：0
> 
> 时间：2013-04-19T15:30:58.803
> 
> 标签：facebook, url, share

我知道，facebook url sharer 已被弃用，但我想知道为什么这两个在我看来相同的 URL 不能以相同的方式工作

在此图像未加载： [https ://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=http%3A%2F%2Fwww.bookextracts.it%2Fdetails_book.php%3Fid% 3D1020&p%5Bimages%5D%5B0%5D=http%3A%2F%2Fwww.bookextracts.it%2Fupload%2Fcover%2F9788806212438_1365147078.jpg&p%5Btitle%5D=Il+panico+quotidiano](https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=http%3A%2F%2Fwww.bookextracts.it%2Fdetails_book.php%3Fid%3D1020&p%5Bimages%5D%5B0%5D=http%3A%2F%2Fwww.bookextracts.it%2Fupload%2Fcover%2F9788806212438_1365147078.jpg&p%5Btitle%5D=Il+panico+quotidiano)

在此图像已加载： [https ://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=http%3A%2F%2Fwww.bookextracts.it%2Fdetails_book.php%3Fid%3D1044&p %5Bimages%5D%5B0%5D=http%3A%2F%2Fwww.bookextracts.it%2Fupload%2Fcover%2F9788809781795_1365749254.jpg&p%5Btitle%5D=Sette+diavoli](https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=http%3A%2F%2Fwww.bookextracts.it%2Fdetails_book.php%3Fid%3D1044&p%5Bimages%5D%5B0%5D=http%3A%2F%2Fwww.bookextracts.it%2Fupload%2Fcover%2F9788809781795_1365749254.jpg&p%5Btitle%5D=Sette+diavoli)

# javascript - jQuery UI AutomComplete - 请求中止

> ID：16108217
> 
> 赞同：1
> 
> 时间：2013-04-19T15:31:12.687
> 
> 标签：javascript, jquery, jquery-ui

我注意到如果用户快速输入，jQuery UI Auto-Complete 将“中止”一些 HTTP 请求。这些请求还会影响服务吗？如果是这样，除了设置延迟或最小输入字母之外，还有什么方法可以减少发送的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:41:41.623

是的，可以通过设置`delay`您的`autocomplete`定义来实现。

```
$( ".selector" ).autocomplete({ delay: 500 }); 
```

> 击键发生与执行搜索之间的延迟（以毫秒为单位）。零延迟对本地数据有意义（响应速度更快），但会为远程数据产生大量负载，同时响应速度较慢。

参考：[http ://api.jqueryui.com/autocomplete/#option-delay](http://api.jqueryui.com/autocomplete/#option-delay)

# delphi - Delphi XE2 - 将项目转移到 SVN

> ID：16108222
> 
> 赞同：0
> 
> 时间：2013-04-19T15:31:34.390
> 
> 标签：delphi, svn, delphi-xe2, collabnet

我们终于设法完成了理论上应该允许我们开始使用 SVN 作为我们的版本控制系统的内部家务。

我已经在服务器上安装了最新版本 (3.3) 的 Collabnet Subversion Edge，据我所知，它很高兴地指出了我们想要的位置。获取 Active Directory 身份验证是不同的问题）

我在管理控制台中使用默认的“Trunk”“Branch”和“Tag”文件夹创建了一个新的存储库（时间表）。

所以我进入 Delphi，连接到存储库并存储我的凭据。我可以看到文件夹，它们是空的。退出对话框并打开我要添加到系统的项目。

我在 Project Manager 屏幕中右键单击 Timesheets.exe，然后选择**Add to Version Control**。它列出了文件，并排除了几个（很公平）。我浏览到 VCS URL 并选择“Trunk”文件夹。添加评论，然后单击导入。

**繁荣**

```
Server sent unexpected return value (405 Method Not Allowed) in response to MKCOL request... 
```

其次是

```
'G:\Delphi\Timesheets' is not a working copy 
```

它不是 - 第一次加载到 VCS，然后我将检查它以创建工作副本......

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T14:01:55.663

看起来问题出在 Delphi XE2 和 Subversion Edge 3.3 之间。

切换到 Tortoise SVN 允许我们将项目添加到存储库。

# wpf - WPF DataBinding Bing Maps wpf api

> ID：16108224
> 
> 赞同：3
> 
> 时间：2013-04-19T15:31:38.873
> 
> 标签：wpf, bing-maps

我花了无数时间阅读和研究这个话题——我似乎无法在它上面站稳脚跟。这是我的场景：

我为一家提供资产跟踪（带有一些附加功能）的公司编写软件。我们目前有一个使用 googlemaps api 的基于 ASP.NET 的网站。所以这是我很舒服的。

我现在的任务是编写一个具有许多相同功能的 WPF 应用程序，但使用的是 wpf bing maps api。我弄乱了地图并弄清楚（非 mvvm 方式）如何绘制自定义图钉、多边形等……现在我需要使用数据绑定功能。这就是我似乎无法将两者放在一起的地方。基本上我要做的是将创建自定义图钉的自定义类的集合绑定到 MapControlItem。

文档有点过于碎片化和抽象，我无法抓住一些东西 - 或者我可能只是一个太多的 Web 开发人员，并且真的很难掌握一个对我来说是新概念的东西。

有任何想法吗？例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:53:20.727

没错，Bing Maps WPF Control API 文档就是个笑话。

无论如何，您必须使用 a[`MapItemsControl`](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.wpf.mapitemscontrol.aspx)并将其[`ItemsSource`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)属性绑定到您的项目集合。和[`ItemsContainerStyle`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemcontainerstyle.aspx)/或[`ItemTemplate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemtemplate.aspx)属性将定义在地图上显示的 UI 对象。

您可以开始阅读有关[Data Binding to Collections](http://msdn.microsoft.com/en-us/library/ms752347.aspx#binding_to_collections)的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:51:41.237

我只玩过 Windows 8 版本的 Bing 地图控件，而不是 WPF 版本，所以如果我的回答不太恰当，我深表歉意。

我所知道的是，在 Windows 8 中，您不能为 MapLayers 或 MapChildren 应用绑定。根据您的描述，我相信您无法在 WPF 中对这些属性进行绑定，仅仅是因为它们不是依赖属性。

所以只剩下 1 个解决方案，在您窗口的代码隐藏中，订阅您的 ViewModel 的 PropertyChanged 事件，并手动将您需要的任何更新应用到您的控件。

另一种方法是创建一个 UserControl，它将简单地显示一个 BingMaps 控件，并向这个 userControl 添加一个“BingMapsContext”（或其他）依赖属性，以便在绑定该特定属性时手动更新地图控件。

# css - 使用 CSS 运行 JavaFX2 应用程序时出现异常错误

> ID：16108225
> 
> 赞同：0
> 
> 时间：2013-04-19T15:31:42.133
> 
> 标签：css, javafx-2, netbeans-7

我正在 NetBeans 上用 JavaFX2 制作一个文本编辑器应用程序。我的问题是：每当我尝试插入行`scene.getStylesheets().add(<classname>.class.getResource("<css file>.css").toExternalForm());`以链接 css 并运行它时，它都会显示错误：“运行应用程序时出现异常”
这个异常到底是什么？我试过删除这条线，然后应用程序运行顺利。就在五六个小时前，我插入了同一行代码（带有正确的类和 css 文件），它很容易使用 css。但是现在，我创建了另外 3 个项目来检查它，但应用程序显示相同的错误并在删除此代码时被删除。我通过右键单击 Source-packages 图标 > 新建 > 级联样式表来创建 Css。我为 css 文件填写了所有正确的类和位置，但是发生了这种情况。还尝试了 Shift + F11 （清理和重建）。当我启动较旧的应用程序（使用 css）时，它运行时没有错误。（顺便说一句，我使用 Win8 Pro x64，如果你需要它）
输出面板停在`Executing com.javafx.main.Main from <location>\Qwerty.jar using platform C:\Program Files\Java\jdk1.7.0_17/bin/java`然后显示错误：

```
Exception in Application start method
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.javafx.main.Main.launchApp(Main.java:642)
    at com.javafx.main.Main.main(Main.java:805)
Caused by: java.lang.RuntimeException: Exception in Application start method
    at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:403)
    at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
    at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at qwerty.Qwerty.start(Qwerty.java:36) (LINE 36 is where the reference to css is)
    at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
    at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:215)
    at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:179)
    at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:176)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:176)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    ... 1 more
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:20:49.563

该问题在嵌套的 excpetion 中进行了解释：

> 原因：qwerty.Qwerty.start(Qwerty.java:36) 处的 java.lang.NullPointerException （第 36 行是对 css 的引用）

检查是否`<classname>.class.getResource("<css file>.css")`为空。也许您指定了错误的路径或者 css 不在 jar 中？

# javascript - 如何在事件处理程序上共享功能并缩短代码？

> ID：16108230
> 
> 赞同：-2
> 
> 时间：2013-04-19T15:32:01.323
> 
> 标签：javascript, jquery

我正在使用以下 jQuery 代码

```
$(document).ready(function() {
    $("#a").click(function(evt) {
         $("#bodyR").load("./inc/backa.php")
         evt.preventDefault();
    });
    $("#b").click(function(evt) {
       $("#bodyR").load("./inc/backb.php")
       evt.preventDefault();
    });
    $("#c").click(function(evt) {
       $("#bodyR").load("./inc/backc.php")
       evt.preventDefault();
    });
}); 
```

我试图缩短脚本，但我无法弄清楚。我觉得我在这里重复自己。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T15:33:13.063

你可以这样做 ：

```
$(document).ready(function() {
  $("#a,#b,#c").click(function(evt) { // comma selector to target more than one element
     $("#bodyR").load("./inc/back"+this.id+".php") // path built using the element's id
     evt.preventDefault();
  })
}) 
```

# mysql - 数据库中的字符串设置为公共字符串

> ID：16108247
> 
> 赞同：0
> 
> 时间：2013-04-19T15:32:56.547
> 
> 标签：mysql, vb.net, visual-studio-2010

好的，从上一个问题的答案来看，推理在这里仍然适用，但这次是一个不同的问题。我为正在创建的启动器获得了一个登录系统 (Loginvb.vb)，我想知道两件事：

1.  是否有更好的方法来使用数据库进行登录检查（如更安全）（登录样式将通过 PHP 脚本进行基于 Web 的注册设置）？
2.  有没有办法在数据库中获取某个列（标记为访问）并将其作为公共字符串，以便我可以检查它是否等于 1 2 或 3 以标记为 Main.vb 的不同形式

这是当前的登录检查：

```
Public Sub login_Click(sender As Object, e As EventArgs) Handles login.Click
    If txtuserName.Text = "" Or txtpassWord.Text = "" Then
        MsgBox("You cannot progress until you login....(moron =p)")
    Else
        'Connects To the Database 
        Dim connect As MySqlConnection
        connect = New MySqlConnection()
        connect.ConnectionString = "server=127.0.0.1;user id=sc;Password=derp;database=sclaunch" 'not the actual login ;)
        Try
            connect.Open()
        Catch myerror As MySqlException
            MsgBox("Error Connecting to Database. Please Try again !")
        End Try
        'SQL Query To Get The Details
        Dim myAdapter As New MySqlDataAdapter
        Dim sqlquerry = "Select * From login where username = '" + txtuserName.Text + "' And password= '" + txtpassWord.Text + "'"
        Dim myCommand As New MySqlCommand()
        'My fail attempt at what I am trying to do :(
        Dim sql22 As MySqlConnection
        sql22 = New MySqlConnection()
        sql22.ConnectionString = "Select * From login where access ="
        'End of fail attempt
        myCommand.Connection = connect
        myCommand.CommandText = sqlquerry
        'Starting The Query
        myAdapter.SelectCommand = myCommand
        Dim mydata As MySqlDataReader
        mydata = myCommand.ExecuteReader
        'To check the Username and password and to validate the login 
        If mydata.HasRows = 0 Then
            MsgBox("Invalid Login")
        Else
            'fail testing xD
            Label3.Text = sql22
            MsgBox("You are now Loged In!")

        End If
    End If
End Sub 
```

基本上仍然在学习越来越多的东西，因为我正在编写所有这些代码，所以我喜欢反复试验以及遇到困难的时刻=/（对不起管理员或任何修复标签问题的东西，这对网站来说仍然是新的 xD）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:55:36.060

假设`login`包含凭据的同一个表还包含`access`您要检索的列，那么我已经更改了很多代码

```
 Dim sqlquerry = "Select * From login where username = @name AND password=@pwd"
    Dim myCommand As New MySqlCommand(sqlquery, connect)
    myCommand.Parameters.AddWithValue("@name", txtuserName.Text)
    myCommand.Parameters.AddWithValue("@pwd", txtpassWord.Text)
    Dim mydata = myCommand.ExecuteReader

    If mydata.HasRows = False Then
        MsgBox("Invalid Login")
    Else
        ' the same record that contains the credentials contains the access field'
        mydata.Read()
        Label3.Text = mydata("access").ToString()
        MsgBox("You are now Loged In!")
    End If 
```

我改变了什么：

*   删除了字符串连接并添加了适当的参数
*   删除了 myAdapter 和对它的所有引用（不需要，你不填充 DataTable/DataSet）
*   删除了 sql22 以及对它的所有引用。这是一个连接，您尝试像命令一样使用
*   修复了对 HasRows 的检查（返回布尔值而不是整数。您是否使用 Option Strict Off？）

# css - 分两列列出

> ID：16108255
> 
> 赞同：0
> 
> 时间：2013-04-19T15:33:17.953
> 
> 标签：css, two-columns

我试图在两列中显示一个列表。我的想法是避免使用桌子。

```
div #DocumentList .Preview {
    float: left;
    width: 50%;
    padding-bottom: 10px;
    position: relative;
} 
```

并将每个项目放在容器 div 中的这些 div 之一中。

我虽然它正在工作，因为 4 个项目和 1 个项目来到了他们的位置，但令我惊讶的是，当有 3 个时，我可以假设 5、7 ......，“备用”一个向右

我不明白。我想避免在视图中检查每个项目并决定它应该向右还是向左进行额外的计算（我知道这没什么大不了的，但如果我可以避免它，我认为会更干净）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:35:41.647

试试css3

```
div {
-moz-column-rule:3px outset #ff00ff; /* Firefox */
-webkit-column-rule:3px outset #ff00ff; /* Safari and Chrome */
column-rule:3px outset #ff00ff;
} 
```

[http://www.w3schools.com/css3/css3_multiple_columns.asp](http://www.w3schools.com/css3/css3_multiple_columns.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:41:50.490

对于 IE 8 或更高版本（当然，所有其他浏览器）

```
.item{
    display: inline-block;
    width:49%;
} 
```

# sql - SQL左外连接语法错误

> ID：16108260
> 
> 赞同：1
> 
> 时间：2013-04-19T15:33:36.660
> 
> 标签：sql, syntax

我试图运行一个使用左外连接的查询，但我不断收到语法错误。我不确定是什么原因造成的。

```
 SELECT employee.emp_num, employee.emp_lname, pilot.pil_license
 FROM employee LEFT OUTER JOIN pilot
 WHERE employee.emp_num = pilot.emp_num; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:36:12.983

我猜你的错误是“关键字'where'附近的语法不正确。”。应该这样改写：

```
SELECT employee.emp_num, employee.emp_lname, pilot.pil_license
FROM employee 
       LEFT OUTER JOIN pilot ON employee.emp_num = pilot.emp_num; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:35:42.173

将“WHERE”替换为“ON”。只有这样。

# java - 字节 [] 到位图与位图到字节 []：哪个更快？

> ID：16108261
> 
> 赞同：1
> 
> 时间：2013-04-19T15:33:47.820
> 
> 标签：java, android

当然，我可以写一些东西来解决这个问题，但是，由于这个叫做闲置的东西，我想知道其他人是否有答案，这可能会节省我一些时间。

我有一`CursorAdapter`堂课。`bindView`它需要验证游标中的一些数据`byte[]`，以便我可以决定是否更新字段。

由于 bindView 需要非常快，因此将现有的（`ImageView`可绘制的）`Bitmap`转换`byte[]`为更快且资源密集型的过程是否比将`byte[]`（光标数据）转换为`Bitmap`?

无论哪种方式的结果都是为了比较。

**编辑：** 关于我的问题，我知道您应该`Bitmap`从 UI 线程中加载 s ，但是您是否还应该将 a 压缩`Bitmap`到`byte[]`UI 线程之外？或者这不是必需的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:37:55.703

转换在性能方面可能相同，但比较原语通常比比较对象更快。

# c# - 为 WCF 服务添加服务引用会生成空的 reference.cs

> ID：16108263
> 
> 赞同：1
> 
> 时间：2013-04-19T15:33:50.243
> 
> 标签：c#, .net, wcf, service-reference

我以前见过这个问题（[这里](https://stackoverflow.com/a/1409065)是一个），但是解决方案是不重用引用的程序集。我需要重用包含的程序集，因为多个服务引用相同的共享对象。如果我不重用程序集，则会出现命名空间错误，因为通过不同的命名空间引用了相同的对象。（即Service1.Object，Service2.Object）

简而言之，我需要生成的 Client 类扩展 Web 服务的 ClientBase，但我无法取消选中重用引用的程序集，因为我需要具有相同命名空间的共享对象。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:38:39.683

您可以使用**svcutil.exe**生成客户端代理，并使用**/r**开关指定要引用的程序集，而不是在自动生成的客户端代理代码中重新发出。

*   ProjACommon
*   ProjBSvc
    *   参考 ProjACommon
*   项目客户端
    *   参考 ProjACommon
    *   您想要一个引用 ProjA 类型和/或代码的客户端，而不是将它们自动生成到 C 中的新命名空间中

在构建 ProjBSvc exec 之后，输出 .wsdl & .xsd

```
svcutil.exe ProjBSvc.dll 
```

第二次使用 wsdl & xsd 生成代理/客户端：

```
svcutil.exe *.wsdl *.xsd /o:<ProjCClientPath>/Client.cs /r:ProjACommon.dll 
```

ProjCClient 引用之前步骤生成的 Client.cs

使用对象浏览器构建和检查，您将看到 C 中的类型引用 A 中的类型，而不是 C 命名空间中具有相同名称的新类型。您可能需要`/tcv`和`/n`其他开关来满足您的需求。

这是[一篇](http://philmunro.wordpress.com/2012/01/03/generating-wcf-service-proxy-classes-using-svcutil/)可能会有所帮助的文章。它还链接到[svcutil 的 Microsoft 文档](http://msdn.microsoft.com/en-us/library/aa347733.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:39:03.327

使用映射器，这意味着您将必须复制模型（对象）并拥有一个将对象从一个命名空间映射到下一个命名空间的类。

# java - 本地域和子域映射（Web开发）

> ID：16108267
> 
> 赞同：0
> 
> 时间：2013-04-19T15:34:09.307
> 
> 标签：java, linux, google-app-engine, fedora

在 Linux 下，在开发模式下为 Google App Engine Web 应用程序实现域和子域映射的选项有哪些。

*   有没有像我不必手动修改 Linux 网络属性的即时域映射？

我有一个 GAE，我需要根据一些哈希或用户名进行此子域映射，例如：

`http://username.myapp.com`（当地的）

也可以通过以下方式访问它`http://myapp.com/username`

现在我可以通过以下方式访问此类资源：`http://127.0.0.1:8888/somename`

但是，现在我真的需要用这样的映射来测试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:57:49.223

您应该能够通过在主机文件`/etc/hosts`(unix/linux) 或`c:\windows\system32\drivers\etc\hosts`. 因此，例如，您可以在那里定义

```
127.0.0.1 myapp.com subdomain1.myapp.com subdomain2.myapp.com 
```

然后在您的浏览器上访问这些域名中的任何一个都将转到 127.0.0.1。

# primefaces - 如何设置颜色以选择一个菜单行

> ID：16108270
> 
> 赞同：0
> 
> 时间：2013-04-19T15:34:24.417
> 
> 标签：primefaces

如何将颜色设置为 p:selectOneMenu 行，我有一个带有客户端列表的 selectOneMenu。取消的客户希望该行的背景颜色为红色。

```
 <p:selectOneMenu id="listaClientesmodi" value="#{clientesMB.selectedEmpClienteCancelarContrato}" converter="clientesConverter"  panelStyle="width:500px"  
                                 effect="fade" var="p" style="width:500px"  filter="true" filterMatchMode="contains">  

                    <f:selectItems value="#{comunMB.itemsClientes}"/>  

                    <p:column>  
                        #{p.codigo} - #{p.nombre}  
                    </p:column>  
                    <f:ajax execute="@this"  listener="#{clientesMB.cargarContratosClienteSelected}"  render=":form2:panelDetalles :form2:panelEditContrato" />
                </p:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:36:02.077

如果要绘制所有行：

```
.ui-selectonemenu-item {
    background-color: aqua!important;
} 
```

但是如果你想做有条件的绘画；我发现了一个有点复杂的解决方案，当然还有另一种更简单的解决方案。

为了能够应用我的解决方案，您需要一个字段，该字段与`p:selectOneMenu`. 但更重要的是，您需要添加文本之类的`canceled`或任何对 js 函数说的内容，该项目需要被绘制。

If`comunMB.itemsClientes`显示在`p:selectOneMenu`连接“已取消”字符串到已取消的客户端。因为取消的客户需要与其他客户区分开来。我的解决方案需要抱歉，这是我能做的最好的。

```
$(document).ready(function() {
    for (var i = 0; i &lt; '#{clientesMB.size}'; i++) {
        if($(".ui-selectonemenu-items li:nth-child("+i+")").text().indexOf("Canceled") != -1) {
            $(".ui-selectonemenu-items li:nth-child("+i+")").css({"background-color":"#ff1315"});
        }
    }
}); 
```

所以; `p:selectOneMenu`生成一个 html 列表。如果您从浏览器开发人员设置中调查它，它看起来像：

```
<ul class="ui-selectonemenu-items">
    <li>First Item</li>
    <li>Second Item</li>
    <li>Third Item</li>
</ul> 
```

因此，函数首先从它的 CSS 类中选择元素，该元素被命名为`ui-selectonemenu-items`并查找它的子元素，并且对于它正在寻找的每个子元素，它们是否被取消。

`indexOf`当项目不包含“已取消”字符串时，函数返回 -1，因此我们正在查找具有“已取消”文本的元素并更改其背景颜色，仅此而已。

# php - 在 Safari 中，为什么在 jQuery AJAX 调用后 $_POST 数组为空？

> ID：16108274
> 
> 赞同：1
> 
> 时间：2013-04-19T15:34:43.073
> 
> 标签：php, javascript, jquery, ajax, safari

**仅在 Safari**中，为什么`$_POST`使用 jQuery AJAX 调用发布时数组为空？

IE、Firefox 和 Chrome 都正确输出。

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(
            function()
            {
                $.ajax(
                {
                    type: "POST",
                    url: "target.php",
                    dataType: "xml",
                    data: ({
                        'param1': 'param1'
                    }),
                    success: function()
                    {
                    }
                });
            });
    </script>
    <title></title>
</head>
<body>

</body>
</html> 
```

该文件`target.php`包含以下代码：

```
<?php print_r($_POST); ?> 
```

并输出以下内容：

```
Array
(
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:44:43.147

尝试删除`(`and `)`in `data`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:40:20.037

该问题可能与 iOS 6 缓存某些发布请求有关。看看这篇文章：[ios缓存发布请求响应](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)。

您可以通过检查是否没有使用 Cache-Control 标头或“Cache-Control: max-age=0”并删除它们来测试这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:18:52.030

首先，您将数据类型设置为 xml 我猜这应该是 html，因为您没有将 xml 作为响应。见：[http ://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)

引用：“为什么数据是括号中的对象？”

如果 Markroper 是正确的，也可以在你的请求中使用 async : true 。

```
 $(document).ready(
        function()
        {
            $.ajax(
            {
                type: "POST",
                url: "target.php",
                async :true,
                dataType: "html",
                data: {
                    'param1': 'param1'
                },
                success: function(data) {
            alert(String(data));
            }
            });
        }); 
```

只是将成功更改为：成功：函数（数据）{alert（字符串（数据））；}编辑：在[http://peervantienen.com/Stackoverflow/in-safari-why-is-the-post-array-empty -after-jquery-ajax-call/](http://peervantienen.com/Stackoverflow/in-safari-why-is-the-post-array-empty-after-jquery-ajax-call/)它在所有浏览器中给了我相同的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T15:54:54.340

我的一位同事找到了答案：

[http://forums.iis.net/post/1999417.aspx](http://forums.iis.net/post/1999417.aspx)

希望这对其他人有帮助...

# github - 创建 GitHub.com 钩子

> ID：16108275
> 
> 赞同：2
> 
> 时间：2013-04-19T15:34:43.450
> 
> 标签：github, github-api, github-services

我正在尝试使用在上找到的 create hook api 创建一个钩子

[http://developer.github.com/v3/repos/hooks/#create-a-hook](http://developer.github.com/v3/repos/hooks/#create-a-hook)

但是当我尝试发布时我得到了 301，所以我确定我做错了......

几个问题...

1）如果它是私有的，github如何知道我可以为该repo创建一个钩子？我确定我需要通过 POST 进行身份验证，但是如何？

2) 以下 curl 语句是如何创建钩子的有效示例吗？

```
 curl -v -H "Content-Type: application/json" -X POST -d "{ "name": "cia", 
 "active": true, "events": [ "push" ], "config": { 
 "url": "http://requestb.in/######", "content_type": "json" } }"
  http://github.com/repos/#####/#####/hooks 
```

为了安全起见，我用#####替换了某些元素......

3) 如果上述内容不正确，我可以提供一个有效示例的片段来为名为“cia”的 webhook 创建一个钩子吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T15:40:23.053

```
curl -usigmavirus24 -v -H "Content-Type: application/json" -X POST -d '{"name": "cia", "active": true, "events": ["push"], "config": {"url": "...", "content_type": "json"}}' https://api.github.com/repos/sigmavirus24/reponame/hooks 
```

是正确的 curl 命令。在这种情况下`https://api.github.com/:endpoint`，您发布到的 URL 必须是. 您还需要在 curl 命令的 JSON 主体周围使用 s ，否则您将获得与, , ,等命令的输出连接起来的字符串。`:endpoint``repos/username/reponame/hooks``'``"{ "``name``cia``active``events`

该`-u :username`选项也是 curl 所必需的，因此它会告诉 curl 它必须进行身份验证并要求您输入密码才能这样做。

如果您不介意密码出现在您的 bash 历史记录中（您应该这样做），您也可以执行`-u username:password`. 或者更好的是，您可以对表单中的凭据进行 base64 编码`username:password`，然后将其作为标头发送，如下所示`Authentication: Basic <base64-encoded-credentials`：

# javascript - Javascript 年龄门在 Chrome 上不起作用，在 Firefox、IE、Safari 上很好

> ID：16108278
> 
> 赞同：0
> 
> 时间：2013-04-19T15:34:53.670
> 
> 标签：javascript, google-chrome

我正在尝试修复/重新设计一个网站，但我不可能找出问题所在。这是一个年龄门，具有日（直径）月（mes）和年（anyo）的三个输入以及一个发送按钮（#btn_entrar）。它在 Firefox、Safari 和 Explorer 上完美运行，但在 Chrome 中，当用户输入年龄 < 18 岁时，它会忽略所有内容并加载#page2，而不是显示警报。我一直在阅读，我认为它可能是 .click(function() 部分，但我就是想不通（我只是在学习 javascript）。这是代码：

```
$('#btn_entrar').click(function() { 
    var dia=("0" + $("#dia").val()).slice (-2);
    var mes=("0" + $("#mes").val()).slice (-2); 
    var anyo=("000" + $("#anyo").val()).slice (-4);

    var fecha_nac=dia+'/'+mes+'/'+anyo;
    var curr = new Date();

    var txtVal = mes+'/'+dia+'/'+anyo;

    if (anyo<1900) { alert("Fecha no válida."); exit(); }       
    if (isDate(txtVal)==false) { alert("Fecha no válida."); exit(); }

    curr.setFullYear(curr.getFullYear() - 18);
    var dob = Date.parse(fecha_nac);

    if((curr-dob)<0)
    {
        alert("Se requiere tener más de 18 años para acceder a la web.");
}
    else
    {   
        $('#page1').delay(0).fadeOut(1500);         

        // Cargar pagina 2
        $('#page2').delay(1300).fadeIn(1500);
        $('#cabecera').delay(1000).fadeIn(1500);  // mostrar avioneta       
    } 
}); 
```

任何提示或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:50:36.683

这可能是一个语言环境问题。而不是使用`Date.Parse()`，尝试使用类似的东西

```
anyo = int.Parse(anyo, 10);
mes = int.Parse(mes, 10);
dia = int.Parse(dia, 10);
var dob = new Date(anyo, mes - 1, dia); 
```

反而。

请注意`mes - 1`，`Date(year, month, day)`构造函数的月份从 0 到 11，而不是 1 到 12！

# entity-framework-5 - SSMS 中的用户“NT AUTHORITY\NETWORK SERVICE”登录设置失败

> ID：16108279
> 
> 赞同：0
> 
> 时间：2013-04-19T15:34:53.917
> 
> 标签：entity-framework-5, ssms

我知道有无数类似的问题，但没有一个涉及在 SSMS 中设置用户的情况。

我正在使用 EF5 并试图从`LocalDb\v11.0`默认移动到`.\SQLEXPRESS`.

我的连接字符串是：

```
<connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=asdf;Integrated Security=True;User Instance=True;" providerName="System.Data.SqlClient" />
    <add name="Entities" connectionString="metadata=res://*/Models.asdf.csdl|res://*/Models.asdf.ssdl|res://*/Models.asdf.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.\SQLEXPRESS;Initial Catalog=asdf;Integrated Security=True;User Instance=True;MultipleActiveResultSets=True;Application Name=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings> 
```

当我加载网站时，我得到`Cannot open database "asdf" requested by the login. The login failed. Login failed for user 'NT AUTHORITY\NETWORK SERVICE'.`

用户`NT AUTHORITY\NETWORK SERVICE`在 SSMS 中被设置为数据库的所有者。

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T15:01:41.807

最后简单修复 - 只需`User Instance=True;`从查询字符串中删除。

# jquery - 无法在 Jquery 中选择元素

> ID：16108282
> 
> 赞同：1
> 
> 时间：2013-04-19T15:35:03.480
> 
> 标签：jquery

我在 Jquery 中有这段代码-：

```
function setCaretPos(element) {
    element.focus(); 

    if(typeof window.getSelection != "undefined" && typeof document.createRange 
        != "undefined")
    {
        var range = document.createRange(); 
    referenceNode = element.getElementsByClassName("prettyTag")[0].nextSibling; 
        range.selectNode(referenceNode); range.collapse(true); 

        var sel = window.getSelection();
        sel.removeAllRanges(); sel.addRange(range);
    } 
```

执行此操作时功能`setCaretPos`有效 -:

`setCaretPos(document.getElementById("editor"));`

但执行此操作时无效 -:

`var element = $("#editor"); setCaretPos(element)`;

我只能选择后者。我如何纠正后一个。谢谢.. ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:37:02.313

`$('#editor')`是一个 jQuery 对象，但您的 javascript 需要一个 DOM 对象。jQuery 对象*与*DOM 对象不同。

尝试`$('#editor').get(0)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:36:58.630

尝试这个：

```
var element = $("#editor")[0]; setCaretPos(element); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:38:45.577

这是因为 setCaretPos() 需要一个 DOM 元素，而不是 jQuery 对象：

```
setCaretPos(element.get(0)); 
```

也可以看看：[`get()`](http://api.jquery.com/get/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T15:37:31.013

尝试从 JQuery 元素指向 DOMNode：

```
var element = $("#editor"); setCaretPos(element[0]); 
```

# python - 在列表上迭代两次的正确方法？

> ID：16108285
> 
> 赞同：6
> 
> 时间：2013-04-19T15:35:06.057
> 
> 标签：python

在容器上执行多次迭代的正确方法是什么？来自 python 文档：

> 迭代器 - 每次将容器对象（例如列表）传递给 iter() 函数或在 for 循环中使用它时，它都会生成一个新的迭代器。使用迭代器尝试此操作只会返回与上一次迭代过程中使用的相同的耗尽迭代器对象，使其看起来像一个空容器。
> 
> 该协议的意图是一旦迭代器的 next() 方法引发 StopIteration，它将在后续调用中继续这样做。不遵守此属性的实现被视为已损坏。（此约束是在 Python 2.3 中添加的；在 Python 2.2 中，根据此规则破坏了各种迭代器。）

如果我有这个代码：

```
slist = [1,2,3,4]
rlist = reversed(slist)
list(rlist)
#[4,3,2,1]
tuple(rlist)
#() 
```

迭代“rlist”两次的最简单和最正确的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T15:36:43.963

```
rlist = list(reversed(slist)) 
```

然后根据需要多次迭代。这个技巧更普遍适用；每当您需要多次迭代迭代器时，将其转换为列表。这是一个代码片段，我为此目的一直复制粘贴到不同的项目中：

```
def tosequence(it):
    """Turn iterable into a sequence, avoiding a copy if possible."""
    if not isinstance(it, collections.Sequence):
        it = list(it)
    return it 
```

（`Sequence`是列表、元组和许多自定义列表类对象的抽象类型。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T15:38:20.243

我不会将列表存储两次，如果你不能将它组合起来迭代一次，那么我会

```
slist = [1,2,3,4]
for element in reversed(slist):
    print element  # do first iteration stuff
for element in reversed(slist):
    print element  # do second iteration stuff 
```

只需将 reversed() 视为在 slist 上设置反向迭代器。反面便宜。话虽这么说，如果您只需要反转它，我会反转它并像那样存储它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T15:49:42.050

> 在容器上执行多次迭代的正确方法是什么？

只需连续做两次。没问题。

> 迭代“rlist”两次的最简单和最正确的方法是什么？

看，不适合你的原因是它`rlist` *不是*“容器”。

注意如何

```
list(slist) # another copy of the list
tuple(slist) # still works! 
```

因此，如果您需要多次迭代，简单的解决方案是确保您拥有一个实际的项目容器：

```
rlist = list(reversed(slist)) # we store the result of the first iteration
# and then that result can be iterated over multiple times. 
```

如果您确实不能存储这些物品，请尝试[`itertools.tee`](http://docs.python.org/2/library/itertools.html#itertools.tee). 但请注意，如果您需要在开始下一个完整迭代之前完成一个完整的迭代，您将不会真正避免存储这些项目。在一般情况下，在这些限制下，存储确实是不可避免的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T16:01:23.270

为什么不简单地就地反转原始列表`slist.reverse()`（

如果这对您不起作用，则以相反顺序迭代列表的最佳解决方案是每次需要迭代时创建一个新的反向迭代器

```
for _ in xrange(as_many_times_as_i_wish_to_iterate_this_list_in_reverse_order):
    for x in reversed(slist):
        do_stuff(x) 
```

# ruby-on-rails - 禁用rails中的所有html异常渲染

> ID：16108286
> 
> 赞同：2
> 
> 时间：2013-04-19T15:35:07.910
> 
> 标签：ruby-on-rails, exception

我开发了一个用 json 回答的 rest web 服务。但是当一些（不是全部）异常被抛出时，我无法捕捉到它们，并且 rails 会渲染一个 htlm，这对我的所有客户来说不是一个有效的响应。如果在此 catch all 调用的方法中引发异常，则会出现问题：

```
rescue_from Exception, with: :render_unkown_error 
```

我不得不承认，在最后一次抓住所有机会时引发异常是非常关键的，但我想知道：

有没有办法在出现此类错误时完全消除所有 Rails 响应，而不是返回包含堆栈跟踪的 html 页面？

编辑：

事实上，这个问题也来自我的控制器中未定义的属性：

```
ActionController::RoutingError (undefined local variable or method `truc' for V2::Model3dsController:Class):
app/controllers/v2/model3ds_controller.rb:8:in `<class:Model3dsController>'
app/controllers/v2/model3ds_controller.rb:4:in `<module:V2>'
app/controllers/v2/model3ds_controller.rb:3:in `<top (required)>' 
```

即使我的基本控制器中有以下救援：

```
rescue_from ActionController::RoutingError, with: :render_routing_error 
```

编辑2：

如果我的网络服务的用户向我的网络服务发送格式错误的参数，我也会遇到同样的问题。由于执行流程不通过我的代码，所以不处理异常：

```
Started POST "/users" for XXX.XXX.XXX.XXX at 2013-05-07 11:11:27 +0000
Error occurred while parsing request parameters.
Contents:

MultiJson::LoadError (795: unexpected token at     'url=http%3A%2F%2Ftest.test.com%2Fusers'):
json (1.7.7) lib/json/common.rb:155:in `parse'
json (1.7.7) lib/json/common.rb:155:in `parse'
multi_json (1.7.2) lib/multi_json/adapters/json_common.rb:16:in `load'
multi_json (1.7.2) lib/multi_json/adapter.rb:19:in `load'
multi_json (1.7.2) lib/multi_json.rb:120:in `load'
activesupport (3.2.13) lib/active_support/json/decoding.rb:15:in `decode'
actionpack (3.2.13) lib/action_dispatch/middleware/params_parser.rb:47:in `parse_formatted_parameters'
actionpack (3.2.13) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
actionpack (3.2.13) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.13) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.13) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.13) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `_run__3866502263790514870__call__1366634820855087578__callbacks'
activesupport (3.2.13) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.13) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.13) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.13) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.13) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.13) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.13) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.13) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.13) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.13) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.13) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.13) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.13) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.5) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.13) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
actionpack (3.2.13) lib/action_dispatch/middleware/static.rb:63:in `call'
railties (3.2.13) lib/rails/engine.rb:479:in `call'
railties (3.2.13) lib/rails/application.rb:223:in `call'
railties (3.2.13) lib/rails/railtie/configurable.rb:30:in `method_missing'
thin (1.5.1) lib/thin/connection.rb:81:in `block in pre_process'
thin (1.5.1) lib/thin/connection.rb:79:in `catch'
thin (1.5.1) lib/thin/connection.rb:79:in `pre_process'
eventmachine (1.0.3) lib/eventmachine.rb:1037:in `call'
eventmachine (1.0.3) lib/eventmachine.rb:1037:in `block in spawn_threadpool'

Rendered /home/ubuntu/.rvm/gems/ruby-2.0.0-p0@websrv2.4.0/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
Rendered /home/ubuntu/.rvm/gems/ruby-2.0.0-p0@websrv2.4.0/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
Rendered /home/ubuntu/.rvm/gems/ruby-2.0.0-p0@websrv2.4.0/gems/actionpack-3.2.13/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (11.7ms) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T18:28:22.720

你想要的是`exceptions_app`.

Rails`exceptions_app`基本上是 rails 的配置选项，默认`PublicExceptions`为`ActionDispatch`.

如果没有提供，这几乎是 exceptions_app 默认的：

**公共异常**

这是处理显示公共 500.html 和 400.html 的 public_exceptions 中间件

[https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/public_exceptions.rb](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/public_exceptions.rb)

**显示例外**

这是显示开发/生产异常的中间件的一部分

[https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/show_exceptions.rb#L26](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/show_exceptions.rb#L26)

**默认值**

这是初始化应用程序时的默认设置

[https://github.com/rails/rails/blob/master/railties/lib/rails/application.rb#L391-L393](https://github.com/rails/rails/blob/master/railties/lib/rails/application.rb#L391-L393)

您可以将其交换为应用程序或将其路由到您自己的 Rails 应用程序，如下所示：

**配置/应用程序.rb**

```
config.exceptions_app = self.routes 
```

然后在您的路线中，您将匹配这样的路线

**路线.rb**

```
match "/500" => "errors#exception"
match "/404" => "errors#not_found" 
```

因此，您将拥有一个 ErrorsController 具有这些操作并处理对它们的响应。

**errors_controller.rb**

```
class ErrorsController < ApiController

  def exception
    render json: {error: "Internal Error"}, status: 500
  end

  def not_found
    render json: {error: "Not Found"}, status: 404
  end
end 
```

# sql - 使用连接子句和 ORDER BY 设计 SQL 索引

> ID：16108287
> 
> 赞同：0
> 
> 时间：2013-04-19T15:35:14.513
> 
> 标签：sql, join, indexing, db2

我一直致力于为 DB2 LUW 数据库构建一些索引。我们已经为登录页面实现了一些新查询，我正在努力提高性能。我在一些表上发现了一些索引，它们的排序似乎不是最佳的，即选择性非常低的列比选择性高的列出现得更早。我希望用更好的版本替换它们，但我对连接索引有点困惑。

对于一些背景知识，查询并不复杂，尽管它们可能有点大：

```
SELECT 
--About a dozen fields from TABLE A--
--A few fields from joined tables--
FROM
TABLE A
--A few inner join/left joins, mostly on A.ID1 and A.ID2, BIGINT generated keys--
WHERE
A.ONE = :x
AND A.TWO IN (:y)
AND A.THREE IN (--uncorrelated suquery--)
AND A.FOUR IS NULL
AND (A.FIVE BETWEEN :date1 AND :date2
OR
A.SIX = 'STUFF')
ORDER BY A.SEVEN 
```

你明白了。大多数这些列的基数非常明显，并且很容易根据选择性来构建索引。以正确的顺序对 WHERE 子句中使用的所有字段进行索引在加快处理速度方面非常成功。但是，连接列有点令人困惑。

许多列本身已经建立了索引，包括 A.ID1 和 A.ID2，它们共同构成了表的主键。我认为这是一个聚集索引。还有一些自己索引的外键 ID 对。我想知道是否有必要甚至有用地将这些列包含在覆盖 WHERE 子句字段的索引中的连接中。我听说很多应该索引连接的列，应该索引 WHERE 子句列，它们是，但是分开的。我还没有真正找到关于该主题的任何确定性（或“通常是一个好主意，但并非总是”）。这种事情的一般做法是什么？如果查询很重要，则单独索引或将它们放在一起？

此外，A.SEVEN 是具有唯一值的列，但我们仅在 ORDER BY 中使用它。同样，我还没有完全找到任何确定的东西，但是它仅用于 ORDER BY （以及在 SELECT 语句中）这一事实是否会影响它在索引中的位置，而不管基数如何（即，它被放置在末尾索引，因为它不会用于过滤，仅用于排序，或者由于唯一性而将其放在开头），还是应该将其保留在单独的索引中？

作为事后的想法，列 A.FOUR 仅检查为空。这是否意味着任何非空数据的基数都无关紧要，因为我们只在寻找空值，所以它应该放在索引的后面？A.FOUR 可能大部分为空值，但当它不为空值时将在很大程度上是唯一的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:44:32.117

一般来说，数据库索引就像书籍索引：当你想找东西时，你从搜索词的左侧开始寻找，而不是从中间开始。因此，如果您有一个复合索引 ( `last name`, `first name`)，例如，您可以期望复合索引仅适用于姓氏，但不能仅适用于名字。如果您只想加入名字，则需要`first name`单独索引。

**另请参阅**
[https://stackoverflow.com/a/2228233](https://stackoverflow.com/a/2228233)

# ruby - RAILS_ROOT (Rails.root) 来自哪里？

> ID：16108290
> 
> 赞同：1
> 
> 时间：2013-04-19T15:35:25.353
> 
> 标签：ruby, ruby-on-rails-3, apache, passenger

我有一个 ruby​​ on rails 应用程序，位于`/home/user/application`. 我有一个 Apache 网络服务器，其 DocumentRoot 为`/var/www`. 我有一个符号链接`/var/www/application -> /home/user/application`。

我关于 ruby​​ on rails 的 apache 配置部分如下：

```
 RailsBaseURI /application
    <Directory /home/user/application>
            Order Allow,Deny
            Allow from all
            Options -MultiViews
    </Directory> 
```

我修改了乘客代码，因此在它生成的一开始它会打印（到文件） option `app_root`。如果重要，我修改了`phusion_passenger/spawn_manager.rb`方法中的文件`handle_spawn_application`。

我得到的价值是`/home/user`，这是错误的，我需要`/home/user/application`. 所以我的问题是，Passenger 如何计算出`option['app_root']`（变成`RAILS_ROOT`| `Rails.Root`）？

观察：我将乘客代码修改为硬编码`app_root`，`/home/user/application`一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:56:09.107

更改符号链接，使 /var/www/application 指向 /home/user/application/public

然后只需将 RailsBaseURI 更改为 RackBaseURI 并撤消对 spawn_manager.rb 的更改

* * *

先前的讨论假设单一应用。

```
 <Directory /var/www/application/public>
            Order Allow,Deny
            Allow from all
            Options -MultiViews
    </Directory> 
```

请参阅[Apache Phusion 文档。](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_deploying_to_a_virtual_host_8217_s_root_2 "乘客 Apache 文档") 您需要添加 DocumentRoot 并将 /public 附加到您的目录配置并撤消对 spawn_manager.rb 的更改。

正如您所注意到的，app_root 是指定目录的上一级目录。/home/user/application/public 的父目录是 /home/user/application，它是 Rails 根目录。

对于 Rails > 3，您需要 RackBaseURI 而不是 RailsBaseURI

这背后的原因是 Apache 提供静态资产（位于公共目录中），然后如果不存在，Passenger 将请求路由到 Rails 应用程序。

# qt - Qt 或 OpenCV：打印出视频文件的编解码器

> ID：16108298
> 
> 赞同：1
> 
> 时间：2013-04-19T15:35:55.140
> 
> 标签：qt, opencv, codec

我想知道如何在使用 VideoCapture（在 OSX 或 Ubuntu 上）打开视频文件后打印出视频文件的编解码器。

该文件由 qt 应用程序中的 opencv 正确加载和可视化。

```
QString filename =  QFileDialog::getOpenFileName(...)
cout << filename.size() << endl; // size in byte
VideoCapture cap = VideoCapture(filename.toStdString());
cout << cap.get(CV_CAP_PROP_FRAME_HEIGHT) << endl; // print the height
cout << cap.get(CV_CAP_PROP_FPS) << endl; // print the fps

codec ?? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:46:03.727

尝试

```
cap.get(CV_CAP_PROP_FOURCC); 
```

获取编解码器。

**编辑：** 我不是 C++ 程序员，但这是我发现四处寻找以将其更改为 char 数组的内容：

```
int ex = static_cast<int>(inputVideo.get(CV_CAP_PROP_FOURCC));
char EXT[] = {ex & 0XFF , (ex & 0XFF00) >> 8,(ex & 0XFF0000) >> 16,(ex & 0XFF000000) >> 24, 0}; 
```

见： [http ://docs.opencv.org/doc/tutorials/highgui/video-write/video-write.html](http://docs.opencv.org/doc/tutorials/highgui/video-write/video-write.html)

# android - Android Activity to Fragment - 无需大量更改即可？

> ID：16108302
> 
> 赞同：2
> 
> 时间：2013-04-19T15:36:05.990
> 
> 标签：android, facebook, android-layout, android-activity

我已经完成了我的一款新游戏，我认为通过某种 Facebook 集成它会好 10 倍。我是 facebook sdk 的新手，我可以看到它使用了我（还）不太熟悉的片段......在我离开并完全破坏我的游戏之前，我可以轻松地将我当前的活动转换为片段不影响当前的布局，或者为自己创造大量的工作？谢谢！

# iphone - 如何以编程方式在键盘上制作一个带有下一个和上一个的工具栏以在可编辑字段之间导航？

> ID：16108303
> 
> 赞同：0
> 
> 时间：2013-04-19T15:36:08.663
> 
> 标签：iphone

如何以编程方式在键盘上制作一个带有下一个和上一个的工具栏，以在可编辑字段（Textfield、Textarea、Datepicker、Pikerview）之间导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:42:19.343

[https://github.com/simonbs/BSKeyboardControls](https://github.com/simonbs/BSKeyboardControls)

像这样编辑文本字段时，此控件可以在键盘上方显示工具栏

![在此处输入图像描述](https://i.stack.imgur.com/vxhaa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:49:52.087

```
UIBarButtonItem *prevButton = [[UIBarButtonItem alloc] initWithTitle:@"Prev" style:UIBarButtonItemStyleBordered target:self action:@selector(prevButtonPressed:)];    
UIBarButtonItem *nextButton = [[UIBarButtonItem alloc] initWithTitle:@"Next" style:UIBarButtonItemStyleBordered target:self action:@selector(nextButtonPressed:)];
UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)]

UIToolbar *toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
toolbar.barStyle = UIBarStyleBlackTranslucent;
[toolbar setItems:@[prevButton, nextButton, flexibleSpace, doneButton]];

UITextView *textView = [[UITextView alloc] inithWithFrame:CGRectMake(x, y, width, height)];
textView.inputAccessoryView = toolbar; 
```

您可以使用 a`UISegmentedControl`创建类似于 @adali 发布的 Prev/Next 效果

# asp.net-mvc - 保存实体更改时出错：ObjectStateManager 中已存在具有相同键的对象

> ID：16108306
> 
> 赞同：-1
> 
> 时间：2013-04-19T15:36:11.827
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

每当我尝试运行以下代码时，总是会收到此错误：

> ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

这是我的代码

```
// find assessmentcase that needs to be updated
var CaseToBeUpdated = db.AssessmentCases
                     .Where(c => c.CaseSeq == score.CaseSeq)
                     .FirstOrDefault();

// create new assessmentcase with updated data                    
AssessmentCase assessmentcase = new AssessmentCase
                                {
                                    CaseSeq = CaseToBeUpdated.CaseSeq,
                                    DateClosed = System.DateTime.Now,
                                    SeqClosedBy = SeqClosedBy,
                                    UserIdClosed = User.Identity.Name,
                                };

// save changes to assessment case table
db.Entry(assessmentcase).State = EntityState.Modified;
db.SaveChanges(); 
```

本质上，我正在尝试更新`assessmentcase`表中的一些数据。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:41:06.083

在第一行，您将实体加载到内存中，以便 EF 开始跟踪它。然后，您使用相同的 CaseSeq（我相信它是主键）创建另一个实体，然后尝试将其附加到 EF。因此，您有 2 个具有相同主键的实体。不要创建新对象。使用您从内存中加载的那个。

```
// find assessmentcase that needs to be updated
var CaseToBeUpdated = db.AssessmentCases
                     .Where(c => c.CaseSeq == score.CaseSeq)
                     .FirstOrDefault();

CaseToBeUpdated.DateClosed = System.DateTime.Now;
CaseToBeUpdated.SeqClosedBy = SeqClosedBy;
CaseToBeUpdated.UserIdClosed = User.Identity.Name;

// save changes to assessment case table
db.Entry(CaseToBeUpdated).State = EntityState.Modified;
db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:40:18.017

为什么不简单地更新检索到的记录？

```
var CaseToBeUpdated = db.AssessmentCases
                 .Where(c => c.CaseSeq == score.CaseSeq)
                 .FirstOrDefault();

// create new assessmentcase with updated data                    
CaseToBeUpdated.DateClosed = System.DateTime.Now;
CaseToBeUpdated.SeqClosedBy = SeqClosedBy;
CaseToBeUpdated.UserIdClosed = User.Identity.Name;

// this should not be necessary ...   
db.Entry(CaseToBeUpdated).State = EntityState.Modified;
// save changes to assessment case table
db.SaveChanges(); 
```

# c++ - 绘制时屏幕变黑 SFML C++

> ID：16108309
> 
> 赞同：1
> 
> 时间：2013-04-19T15:36:12.587
> 
> 标签：c++, opengl, sfml

我有一个用 C++、openGL 和 SFML 设置的基本游戏。

但是当我尝试在屏幕上添加文本或绘制正方形（对于 GUI）时，屏幕主要变黑，我可以看到左上角发生了一些事情，但我不知道是什么

我在控制台中收到此错误：

> RenderTarget.cpp<362> 中的内部 OpenGL 调用失败：GL_INVLAD_OPERATION，当前状态下不允许指定的操作

这是完整的代码：

```
#include "Engine.h"

static sf::RenderWindow App(sf::VideoMode(1600, 900, 32), "SFML OpenGL");

Engine::Engine()
{
    glewInit();
    c_player = Player(Vector3D(0, 14, 0), 0);
    c_enemy = Enemy(Vector3D(0, 14, -10), 0);
    c_gui = Gui(App);

    c_mouseSensitivityX = 5;
    c_mouseSensitivityY = 5;
}

Engine::~Engine(void)
{
}

void Engine::init(void)
{

     text.setString("Hello SFML");
     text.setCharacterSize(50);
     text.setPosition(10.0f, 10.0f);

    c_wall.LoadModel("Wall.dae");
    c_crates.LoadModel("crates.dae");
    c_cargoWall.LoadModel("cargoWall.dae");
    c_leftCorner.LoadModel("leftCorner.dae");
    c_rightCorner.LoadModel("rightCorner.dae");
    c_shipPipeWall.LoadModel("shipPipeWall.dae");
    c_shipWindow.LoadModel("shipWindow.dae");

    float posx = -200;
    float posfar = 200;
    float posnear = -200;

    /*for(int i = -200; i < 200 ; i += 20)
    {
        c_wallProperties.push_back(wallProps(Vector3D(i, 15, posfar), 0));
        c_wallProperties.push_back(wallProps(Vector3D(i, 15, posnear),0));
        c_wallProperties.push_back(wallProps(Vector3D(posfar, 15, i), 90));
        c_wallProperties.push_back(wallProps(Vector3D(posnear, 15, i),90));
    }*/

    int xflip = 1;

    for (int i=0; i<2; ++i)
    {
    c_wallProperties.push_back(wallProps(Vector3D(70 * xflip,15,20), 0));
    c_crateProperties.push_back(wallProps(Vector3D(55 * xflip,15,10), 0));
    //  //c_wallProperties.push_back(wallProps(Vector3D(40 * xflip,15,20), 0));
    //  ////c_wallProperties.push_back(wallProps(Vector3D(25 * xflip,15,20), 0));
    //  //c_wallProperties.push_back(wallProps(Vector3D(85 * xflip,15,20), 0));
    //  //c_wallProperties.push_back(wallProps(Vector3D(100 * xflip,15,20), 0));
    //  //c_wallProperties.push_back(wallProps(Vector3D(140 * xflip,15,20), 0));
    //  //c_wallProperties.push_back(wallProps(Vector3D(70 * xflip,15,-10), 0));
    //  //c_wallProperties.push_back(wallProps(Vector3D(55 * xflip,15,-10), 0));
    //  //c_wallProperties.push_back(wallProps(Vector3D(40 * xflip,15,-10), 0));
    //  ////c_wallProperties.push_back(wallProps(Vector3D(25 * xflip,15,-10), 0));
    //  //c_wallProperties.push_back(wallProps(Vector3D(85 * xflip,15,-10), 0));
    //  //c_wallProperties.push_back(wallProps(Vector3D(100 * xflip,15,-10), 0));
    //  c_wallProperties.push_back(wallProps(Vector3D(140 * xflip,15,-10), 0));

        xflip = xflip * -1;
    }

    //c_myModels.push_back(new buildings("rightCorner.dae",Vector3D(120,15,1)));
    ////c_myModels.push_back(new Objects("phoenix_ugv.md2", Vector3D(-50,0,20)));

    glClearDepth(1.f);
    glClearColor(0.f, 0.f, 0.f, 0.f);
    glEnable(GL_DEPTH_TEST);
    glDepthMask(GL_TRUE);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    GLfloat lightpos[] = {.5, 1., 1., 0.};
    glLightfv(GL_LIGHT0, GL_POSITION, lightpos);

    c_FPSClock.restart();

    ParticleSystem newParticle;
    newParticle.setMaxParticles(500);
    newParticle.setParticleColour(sf::Color(143, 44, 1, 255), sf::Color(255, 127, 39, 255));

    newParticle.setParticleLifespan(60, 180);
    newParticle.setParticleSpawnrate(0.2, 0.3);
    newParticle.setParticleVelocity(Vector3D(-10, 30, -10), Vector3D(10, 50, 10));
    newParticle.setParticleAcceleration(Vector3D(0, -9.81, 0), Vector3D(0, -9.81, 0));
    newParticle.setSpawnerPosition(Vector3D(0, 10, 0));

    c_particleSystems.push_back(newParticle);
}

void Engine::getInput(void)
{
    while (App.pollEvent(c_event))
    {
        // Close window : exit
        if (c_event.type == sf::Event::Closed)
            App.close();

        // Resize event : adjust viewport
        if (c_event.type == sf::Event::Resized)
            glViewport(0, 0, c_event.size.width, c_event.size.height);

        // Camera Controls
        if (c_event.type == sf::Event::KeyPressed)
        {
            switch (c_event.key.code)
            {
            case sf::Keyboard::Escape:
                App.close();
                break;
            case sf::Keyboard::W:
                c_player.move(Vector3D(0, 0, -1));
                break;
            case sf::Keyboard::S:
                c_player.move(Vector3D(0, 0, 1));
                break;
            case sf::Keyboard::A:
                c_player.move(Vector3D(-1, 0, 0));
                break;
            case sf::Keyboard::D:
                c_player.move(Vector3D(1, 0, 0));
                break;
            case sf::Keyboard::X:
                c_camera.togglePerspective();
                break;
            }
        }
    }
}

void Engine::run()
{
    while (App.isOpen())
    {
        while (c_FPSClock.getElapsedTime().asSeconds() < 1.f/60)
        {
        }

        // Set the active window before using OpenGL commands
        // It's useless here because active window is always the same,
        // but don't forget it if you use multiple windows or controls
        App.setActive();

        //App.draw(rectangle);
        // Clear color and depth buffer
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();

        getInput();
        update();
        render();
    }
}

void Engine::update(void)
{
    mouseMove();
    c_worldEngine.update();
    c_player.update();
    c_enemy.update();
    c_camera.update(c_player);

    for (vector<ParticleSystem>::iterator iter = c_particleSystems.begin(); iter != c_particleSystems.end(); ++iter)
    {
        iter->update();
    }
}

void Engine::render(void)
{
    c_camera.render();
    c_gui.render();
    c_worldEngine.render(c_camera.getPos());
    App.draw(text);

    for (vector<pair<Vector3D, float>>::iterator iter = c_wallProperties.begin(); iter != c_wallProperties.end(); ++iter)
    {
        glEnable(GL_TEXTURE_3D);
        glPushMatrix();
        glTranslatef(iter->first.x, iter->first.y, iter->first.z);
        glRotatef(iter->second, 0, 1, 0);
        c_wall.Render();
        glPopMatrix();
        glDisable(GL_TEXTURE_3D);
    }

    glPushMatrix();

    glEnable(GL_COLOR_MATERIAL);
    if (c_camera.isFirstPerson() == false)
    {
        c_player.render();
    }
    c_enemy.render();
    glDisable(GL_COLOR_MATERIAL);
    glPopMatrix();

    c_glModel.render(Vector3D(0,5,0));

    for (vector<ParticleSystem>::iterator iter = c_particleSystems.begin(); iter != c_particleSystems.end(); ++iter)
    {
        iter->render();
    }

    App.display();
    c_FPSClock.restart();
}

void Engine::mouseMove(void)
{
    sf::Vector2u winSize = App.getSize();
    sf::Vector2u winMid = sf::Vector2u(winSize.x/2, winSize.y/2);
    sf::Vector2i mousePos = sf::Mouse::getPosition(App);

    if ((mousePos.x == winMid.x) && (mousePos.y == winMid.y))
    {
        return;
    }

    sf::Mouse::setPosition(Vector2i(winMid.x, winMid.y), App);

    sf::Vector2i mouseDiff = sf::Vector2i(winMid.x - mousePos.x, winMid.y - mousePos.y);
    sf::Vector2f diffRatio = sf::Vector2f(mouseDiff.x / c_mouseSensitivityX, mouseDiff.y / c_mouseSensitivityY);

    if (c_camera.isFirstPerson())
    {
        diffRatio.y /= 10;
    }

    c_player.rotate(diffRatio.x);
    c_camera.rotateY(diffRatio.y);
} 
```

在我的 init 函数中，我只需像这样设置文本属性：

```
text.setString("Hello SFML");
 text.setCharacterSize(50);
 text.setPosition(10.0f, 10.0f); 
```

text 在我的头文件中声明为 sf::Text 文本。

我看不出文本不打印到屏幕上的任何原因！

**编辑** 好的，所以我查看了整个推送和弹出 openGL 状态并按照线程上所示实现了它，我现在得到了这个图像！：

![医学](https://i.stack.imgur.com/tdGEa.jpg)

所以我到了那里，你可以看到这个问题是播放器不再显示并且输入都搞砸了：/

这是更新的循环：

```
void Engine::run()
   {
while (App.isOpen())
{
    while (c_FPSClock.getElapsedTime().asSeconds() < 1.f/60)
    {
    }

    App.pushGLStates();
    App.draw(text);
    App.popGLStates();

    // Set the active window before using OpenGL commands
    // It's useless here because active window is always the same,
    // but don't forget it if you use multiple windows or controls
    App.setActive();

    //App.draw(rectangle);

    // Clear color and depth buffer
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    getInput();
    update();
    render();

}
    } 
```

关于加载字体，我已经实现了它，但由于某种原因，无法使用以下代码找到字体：

```
if(!font.loadFromFile("../arial.tff"))
{
    cout<<"no font"<<endl;
} 
```

虽然文件在它指向的文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:59:09.913

1：如果您为该 sf::Text 设置的 sf::Font （我假设您必须拥有）超出范围，它将不会显示它，因为它的字体参考已经消失。

2：如果您有另一个线程正在运行（可能显示您的风景）并且您设置了 App.setActive() 另一个线程会自动停用

3：如果你在它们之间切换，openGL 状态有时会与 SFML 冲突。保存它们，用 SFML 绘制，恢复它们，然后你可以恢复 openGL 绘制。

希望这有所帮助。

哦，嘿，看看这个精彩的页面： [http ://www.sfml-dev.org/tutorials/2.0/window-opengl.php](http://www.sfml-dev.org/tutorials/2.0/window-opengl.php)

# python - 通过修改后的 mime 类型通过海报/urllib2 上传文件

> ID：16108314
> 
> 赞同：2
> 
> 时间：2013-04-19T15:36:25.697
> 
> 标签：python, mime-types, urllib2, poster

我正在尝试编写一个 python 脚本来上传文件并更改其 mime 类型

```
from poster.encode import multipart_encode, MultipartParam
from poster.streaminghttp import register_openers
import urllib2
register_openers()
params = [MultipartParam('img', open("data.mp4", "rb").read(), filetype='image/jpeg')]
datagen, headers = multipart_encode(params)
request = urllib2.Request("http://localhost:8082/uploader.php", datagen, headers)
print urllib2.urlopen(request).read() 
```

上传者正在转储文档中的 $_POST 和 $_FILES。我上传的视频是在`$_POST`而不是在`$_FILES`

我很难知道如何让它工作

编辑：

php 代码只是转储文件和帖子：

```
var_dump($_POST);
var_dump($_FILES); 
```

但是如上所述，该文件出现在 $_POST 而不是 $_FILES 的转储中

这是 PHP 返回的内容：

```
FILES:
array(0) {
}
POST:
array(1) {
  ["img"]=>
  string(82038) "-- Content of video was here, removed because it's too long --"
} 
```

# html - 固定宽度的内容，无论滚动条是否存在

> ID：16108319
> 
> 赞同：3
> 
> 时间：2013-04-19T15:36:40.723
> 
> 标签：html, css, scrollbar

我在具有动态加载内容的网页上有一个 DIV。如果内容太长（或浏览器窗口被用户缩小），DIV 上会出现一个垂直滚动条。当然，DIV 的宽度会缩小以适应滚动条。到目前为止一切正常。

有没有办法为滚动条保留空间，这样无论滚动条的可见性如何，内容的宽度都不会改变？理想情况下只使用 CSS。

在 IE8+ 和最新的 Chrome、FF、Safari、Android、OSi 中工作

[http://jsfiddle.net/spiderplant0/VUhDt/](http://jsfiddle.net/spiderplant0/VUhDt/)

```
#content{
    position: absolute;
    left:10px; top:10px; bottom:10px;
    width: 150px;
    background: yellow;
    overflow: auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:07:40.413

不确定这是否正是您想要的，但您可以将 div 放入容器中并将包含的 div 设置为溢出：自动吗？例如。

```
CSS:

#container {
  position: absolute;
  left:10px; top:10px; bottom:10px;
  overflow: auto;
  width: 170px;
  background: blue;
}

#content {
  width: 150px;
  background: yellow;
  overflow: none;
}

HTML:
<div id="container">
  <div id="content">
    Content here
  </div>
</div> 
```

这里的js小提琴示例：http: [//jsfiddle.net/SC3bg/](http://jsfiddle.net/SC3bg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:56:22.267

You actually can use this Javascript code to detect if the div height is "higher" than the clientHeight :

```
div = document.getElementById('content');
var hasVerticalScrollbar = div.scrollHeight>div.clientHeight; 
```

And then do whatever you want with this boolean (Edit CSS width according to it ...), I don't know any CSS rule which could responds your need

# ios - 当特定类型的推送通知到达时，如何不允许 iOS 启动应用程序？

> ID：16108320
> 
> 赞同：1
> 
> 时间：2013-04-19T15:36:43.893
> 
> 标签：ios, objective-c, cocoa-touch, push-notification, apple-push-notifications

我希望 PHP 服务器向我的 iOS 应用程序发送两种类型的推送通知：

1.  新的收入信息。对于这个推送，我希望 iOS 启动我的应用程序，如果它被暂停，显示徽章，播放声音等。
2.  新朋友请求。我不希望这个推送启动我的应用程序，我只想处理应用程序是否在前台。

    我怎样才能做到这一点？如何以不同方式处理不同的推送通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:47:47.457

我不确定它是否会起作用，但您应该尝试在第二种情况下发送仅包含自定义属性的通知。在这种情况下，将不会显示警报、播放声音或更新徽章，因此我认为此通知只会在您的应用程序已经运行时到达。

对于第一种情况，发送带有预定义属性（警报、声音、徽章）的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:47:33.050

远程通知的应用程序端处理应该从应用程序委托协议 application:didReceiveRemoteNotification: 中的方法开始。

但是，为了避免应用程序首先启动，您需要确保 PHP 服务器制作的通知不提供启动应用程序的选项。

在此处查看有关 Apple 推送通知服务的文档：

[http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9)

特别是，您希望关注通知有效负载部分中记录的 aps 字典的内容。收到的 aps 字典可以标记您的应用程序的图标，而无需打开应用程序。

# php - 从范围日期范围中删除特定日期值

> ID：16108323
> 
> 赞同：0
> 
> 时间：2013-04-19T15:36:53.863
> 
> 标签：php, mysql

我的数据库“票价”中有一张表。它有列 vehicle_number、date_from、date_to 和 fare。在 date_from 到 date_to 中定义的日期范围内有多个车辆编号及其在该特定日期范围内的票价。

```
vehicle_number  date_from    date_to       fare 
ABC123         2013-04-19   2013-04-24     $50
ABC123         2013-04-25   2013-04-29     $100
ABC123         2013-04-25   2013-04-29     $120

ABC124         2013-04-19   2013-04-21     $20 
```

我想运行一个查询假设其中的 vehicle_number-->ABC123 以便`DATE 2013-04-20 fare as -->NULL` 该表可以显示为

```
vehicle_number  date_from       date_to       fare 
ABC123         2013-04-19   2013-04-19     $50
ABC123         2013-04-21   2013-04-24     $50
ABC123         2013-04-25   2013-04-29     $100
ABC123         2013-04-25   2013-04-29     $120

ABC124         2013-04-19   2013-04-21     $20 
```

我在那个日期尝试了 INSERT 查询并插入 NULL，它被插入 NULL 但没有得到所需的输出。此外，DELETE 正在从数据库中删除整行。

原始插入日期和票价的查询：

```
INSERT INTO fare (`vehicle_number`,`date_from`, `date_to`,`fares`) VALUES ('$vehicle_number','$from','$to','$vehicle_fares') 
```

尝试此查询使 NULL

```
INSERT INTO fare (`vehicle_number`,`date_from`, `date_to`,`fares`) VALUES ('ABC123','2013-04-20','2013-04-20',NULL) 
```

在此之后，它显示以下输出：

```
vehicle_number  date_from    date_to       fare 
ABC123         2013-04-19   2013-04-24     $50
ABC123         2013-04-20   2013-04-20     
ABC123         2013-04-25   2013-04-29     $100
ABC123         2013-04-25   2013-04-29     $120

ABC124         2013-04-19   2013-04-21     $20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:34:41.403

听起来您只是想显示不是 4-20 的日期。这不是插入新记录的合适上下文。相反，您应该修改查询以在返回的结果中简单地排除此日期：

```
SELECT * FROM fare WHERE vehicle_number = ABC123 AND date_from <> 2013-04-20 AND date_to <> 2013-04-20 
```

# symfony - Symfony2 常用会话策略

> ID：16108326
> 
> 赞同：0
> 
> 时间：2013-04-19T15:36:59.080
> 
> 标签：symfony, cookies, dry

我有一个 symfony2 Web 项目，由 10 个页面组成，这些页面通过 5 个控制器呈现。用户可以通过上述任何页面登陆网站（例如通过共享链接）。我需要向`position:absolute`在当前会话期间第一次打开页面的用户显示一个欢迎弹出窗口（只是 div ）。

我已经将弹出窗口放置在所有需要的页面都使用的通用树枝模板中。现在我必须确定是否显示弹出窗口。我将根据控制器的布尔值显示弹出窗口。

我必须使用会话和 cookie，但我必须在每个页面上都这样做，并且我不想在每个控制器的每个方法中编写相同的代码（检查和设置 cookie，输出一个布尔值以在模板中显示弹出窗口） . 根据 DRY 概念，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:01:05.863

您可以创建一个包装类来处理检查、设置和获取当前会话值并将其作为服务。

```
<?php

namespace My\Bundle\My\Namespace;

use Symfony\Component\HttpFoundation\Session\Session;

class SessionManager /* or whatever you want to call it */
{

  public function __construct(Session $session)
  {
    $this->session = $session;
  }

  public function getMyValue()
  {
    return $this->session->get('my.value.key',null);
  }

  public function setMyValue($value)
  {
    $this->session->set('my.value.key',$value);
    return $this;
  }
  public function hasMyValue()
  {
    return $this->session->has('my.value.key');
  }
} 
```

在你的包 services.yml

```
<service id="mytag.session_manager" class="My\Bundle\My\Namespace\SesionManager">
    <argument type="service" id="session" />
</service> 
```

在你的控制器中

```
public function someAction()
{
   $sessionManager = $this->get('mytag.session_manager');

  if($sessionManager->hasMyValue())
  {
    // do something
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:58:19.660

感谢 Sgoettschkes 在这里的回答[Where to place common business logic for all pages in symfony2](https://stackoverflow.com/questions/9669439/where-to-place-common-business-logic-for-all-pages-in-symfony2?rq=1) 我试过这个方法 [http://symfony.com/doc/current/book/templating.html#embedding-controllers](http://symfony.com/doc/current/book/templating.html#embedding-controllers)

它看起来很棒：我的弹出窗口包含在这样的主模板中

`{{ render(controller('MalyutkaMainBundle:WelcomePopup:index')) }}`

比在控制器内部我操纵会话变量

```
class WelcomePopupController extends Controller {
    public function indexAction(Request $request) {
        $session = $this->get('session');

        $showWelcomePopup = 0;

        if ($session->has("have_seen_welcome_popup_on")) {
            // tbd compare to the date of publishing of the new popup screen 
        } else {
            $showWelcomePopup = 1;
            $session->set("have_seen_welcome_popup_on", new \DateTime());
        }

        $params = array (   
            'show_welcome_popup' => $showWelcomePopup
        );

        return $this->render('MalyutkaMainBundle:WelcomePopup:welcome_popup.html.twig', $params);
    }
} 
```

并且不会在其他控制器中添加任何内容 - 这正是我想要做的。但是这样改变cookie是不可能的，所以我将我的数据存储在会话中。

# ssh - ssh 到 cisco ASA 并将输出存储到文件

> ID：16108330
> 
> 赞同：-2
> 
> 时间：2013-04-19T15:37:14.893
> 
> 标签：ssh, expect, cisco

我在将 ssh 的 shell 脚本写入 cisco ASA 并将命令输出存储在文本文件中时遇到问题。

1.脚本中不需要密钥交换，因为它不是第一次登录。2.从我的centOS服务器它应该使用ssh usr@serverip登录到cisco ASA，运行“en”，发送en密码，然后运行一些命令说“显示版本”并将输出存储到我服务器中的文本文件中。我尝试了shell脚本和expect的使用，都没有成功。请帮忙。

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-20T05:56:32.670

这是一个用 python 编写的小代码，可以为您完成工作。Python 默认安装在您的 CentOS 中。只需将文件名中的代码保存为 .py 并使用“python .py”运行它。让我知道这是否有帮助。

```
import pexpect

try:

hostname= 'yourhostname/ip of firewall'
username= 'your username'
commandTorun = 'Enter your command here'
password= 'your password'
enable= 'your enable password'

ssh = 'ssh ' + username + '@' +hostname

s=pexpect.spawn(ssh)

s.expect('word')
s.sendline(password)
s.expect('>');
s.sendline('en')
s.expect('word')
s.sendline(enable)
s.expect('#')
s.sendline('configure terminal')
s.expect('#')
s.sendline('pager 0')
s.expect('#')
s.sendline(commandTorun)

s.expect('#')
output =  s.before
#You can save the output however you want here. I am printing it to the CLI.

s.sendline('exit')
s.expect('#')
s.sendline('exit')
s.expect(pexpect.EOF)
print output

except Exception, e:
print "The Script failed to login"
print str(e) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:20:08.230

我对 CentOS 不熟悉，但我在 Windows 上使用 Plink（PuTTY 的命令行版本）完成了这项工作。 [http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/%7Esgtatham/putty/download.html)（编辑：刚刚检查过，它似乎 plink 作为 .rpm 文件存在并且在存储库中可用。提供的链接也有源代码如果手动编译是你的事。）

选项 -m 允许您指定命令脚本，-ssh 强制使用 ssh 协议，-l 是远程用户，-pw 是远程密码。

这是命令：

```
plink.exe -ssh -l user -pw pass -m "path_to_script/script.txt" ip_of_asa > outputfile.txt 
```

在 script.txt 文件中，您只是一个命令列表，包括启用命令和硬编码密码：

```
en
enable_password
show ver

exit 
```

请注意，如果有多页，那里有空格可以获取完整的“显示版本”。输出使用“>”将输出重定向到文件。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T11:13:33.537

这行得通。

```
#!/usr/bin/expect
set remote_server [lrange $argv 0 0]
set timeout 10
spawn ssh -M username@$remote_server
while 1 {
  expect {
    "no)?"      {send "yes\r"}
    "denied" {
                log_file /var/log/expect_msg.log
                send_log "Can't login to $remote_server. Check username and password\n";
                exit 1
             }
    "telnet:" {
                log_file /var/log/expect_msg.log
                send_log "Can't connect to $remote_server via SSH or Telnet. Something went definitely wrong\n";
                exit 2
              }
    "failed" {
                log_file /var/log/expect_msg.log
                send_log "Host $remote_server exists. Check ssh_hosts file\n";
                exit 3
             }
    timeout {
                log_file /var/log/expect_msg.log
                send_log "Timeout problem. Host $remote_server doesn't respond\n";
                exit 4
            }
    "refused" {
                log_file /var/log/expect_msg.log
                send_log "Host $remote_server refused to SSH. That is insecure.\n"
                log_file
                spawn telnet $remote_server
              }
    "sername:" {send "username\r"}
    "assword:" {send "password\r"}
    ">"        {enable}
    "#"        {break}
  }
}
send "terminal length 0\r"
expect "#"
send "show running-config\r"
log_file /opt/config-poller/tmp/poller.trash/$remote_server
expect "#"
send "exit\n"; exit 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-02T12:32:50.713

如果您通过本地计算机访问路由器，则可以创建一个期望脚本并在本地计算机上配置 tftp。剧本会是这样的。

```
#!/usr/bin/expect-f
spawn telnet Router_IP
expect "word"
sent "password"
expect "word"
sent "copy running-config tftp://$tftp/$config\n\n" #edit this line wrt system's tftp configurations.
expect "word"
send "\n" 
```

# php - 使用带有 ',' 复选框的两个值并使用 php[code igniter] 保存，使用 'Javascript' 计算

> ID：16108331
> 
> 赞同：1
> 
> 时间：2013-04-19T15:37:21.287
> 
> 标签：php, javascript, codeigniter

我的情况有点复杂，请多多包涵。这是我的表格的样子。我正在使用 webservice [json 而不是 db] 。

![形式](https://i.stack.imgur.com/bsCje.png)

在那里我需要保存'syskey'来生成json并发送到服务器

我需要在值中添加“syskey”。像这样

```
<input type="checkbox" value="20133123123713" name="toppings[]">Black Pear 
```

但我需要一个附加功能，即使用 javascript 即时计算价格。在 stackoverflow 的一篇文章中，我了解到我可以使用“，”将两个值添加到单个复选框。所以我很喜欢这个。

```
<input type="checkbox" value="20133123123713,0.50" name="addon[]">Black Pear 
```

## 请查看屏幕截图以获得更清晰的图片。

![在此处输入图像描述](https://i.stack.imgur.com/EooZv.png)

* * *

我现在的问题是

`I want to save value from "20133123123713,0.50" [syskey:20133123123713 only]`在php中

`and use value from "20133123123713,0.50" [price:0.50] in`javascript。

我怎样才能做到这一点？我这几天一直在寻找和拉头发，我的方法合适吗？帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:45:38.207

在 JavaScript 中，你会使用`*checkbox*.value.split(",")[1]`

在 PHP 方面，您使用的内容取决于您的版本：

*   PHP 5.3 及更早版本：`array_shift(explode(",",$_POST['*checkbox*']));`
*   PHP 5.4 及更新版本：`explode(",",$_POST['*checkbox*'])[0];`

# entity-framework - 实体框架访问多个选择语句

> ID：16108332
> 
> 赞同：1
> 
> 时间：2013-04-19T15:37:23.590
> 
> 标签：entity-framework, list, asp.net-mvc-4, entity-framework-4, sql-server-2012

我的存储过程返回 3 个选择语句。使用实体框架如何访问特定的选择语句。在 ADO.Net 中使用“DATASET”我们可以访问特定的表。喜欢

```
DataSet ds = GetApplicationSummary(appId);
DataTable dt = ds.Tables[0]; 
```

现在我们可以访问数据表[0]。与接下来的两个表相同。

**使用 EntityFramework 如何访问 3 个选择语句数据。**请对此有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:02:34.307

您可以通过 访问多个结果集`GetNextResult`。这是来自 Microsoft 的代码示例。

```
using (var db = new BlogEntities())
{
    var results = db.GetAllBlogsAndPosts();

    foreach (var result in results)
    {
        Console.WriteLine("Blog: " + result.Name);
    }

    var posts = results.GetNextResult<Post>();

    foreach (var result in posts)
    {
        Console.WriteLine("Post: " + result.Title);
    }

    Console.ReadLine();
} 
```

查看[Microsoft](http://msdn.microsoft.com/en-us/data/jj691402)提供的更多信息。

# c++ - 简单的 C++ 数组逻辑问题

> ID：16108337
> 
> 赞同：0
> 
> 时间：2013-04-19T15:37:47.037
> 
> 标签：c++, arrays, visual-c++, isbn

我正在尝试编写一个程序，其中用户输入 ISBN 然后检查条目的准确性。国际标准书号是`0201702894`. 校验位（第 4 位）由其他 9 位计算得出，如下所示 - （每个位的总和乘以它的位置）模 11。`Ex: (0*1 + 2*2 + 0*3 + 1*4 + 7*5 + 0*6 + 2*7 + 8*8 + 9*9)%11 = (0+4+0+4+35+0+14+64+81)%11 = 4 (202/11 = 18 remainder 4)`校验位可以检测 ISBN 何时输入或复制不正确。

每次我输入值时，我总是有“ISBN 不正确”的输出。我的逻辑有问题。

```
1\.  Correct Value: 0201702894

2\.  Incorrect value: 0201702984 
```

代码：

```
#include <iostream>

using namespace std;

int totalNumbersCheck=0;

int main()
{
int isbnArray[10];      //array to store the ISBN numbers
int ISBN=0;             //inputted ISBN number

//user input

cout<<"Please enter the ISBN number: ";
cin>>ISBN;

//ISBN storage

isbnArray[ISBN];

//ISBN calculation

for(int i=0;i<10;i++)
{
    totalNumbersCheck=isbnArray[i]*(i+1);
}

//remove last element from array

    totalNumbersCheck-=isbnArray[10];

//check if remainder equals last element and output correct response

    if(totalNumbersCheck%11==isbnArray[10])
    {
        cout<<"\nThe ISBN is correct.";
    }
    else
        cout<<"\nThe ISBN is not correct.";

    cin.get();
    cin.get();

return 0;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:41:52.890

```
 isbnArray[ISBN]; 
```

是错误的，因为 ISBN 是一个 11 位数字，可能从 0 开始。您希望将 ISBN 的每个数字存储到数组`isbnArray`中。假设输入数字是 1233445，这个索引肯定超出了你的范围`isbnArray[9]`。

同时，计算结果的循环可能如下所示：

```
 for(int i=0;i<10;i++)
 {
    totalNumbersCheck +=isbnArray[i]*(i+1);
 }

 if(totalNumbersCheck%11==isbnArray[9])
                   ///^^index out of bound again if you access isbnArray[9] 
```

您知道 ISBN 是 11 位数字，因此您至少应该使用长度为 11 而不是 9 的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:53:55.573

将 isbn 读入`std::string`变量，然后遍历字符串中的字符，将每个字符转换为数字，然后应用您的算法。

```
const isbn_digits = 10;
std::string isbn;
std::cin >> isbn;
assert(isbn.size() == isbn_digits);
int sum = 0;
for (int pos = 0; pos < isbn_digits - 1; ++pos)
    sum += (pos + 1) * (isbn[pos] - '0');
if (sum % 11 != isbn[isbn_digits - 1] - '0')
    // error 
```

# java - 从一类 Corba 创建多个服务器的问题

> ID：16108340
> 
> 赞同：0
> 
> 时间：2013-04-19T15:38:03.257
> 
> 标签：java, corba

对于 uni 任务，我们必须创建一种管理洪水传感器的方法，并在水位过高时发出警报。所以我的想法是创建一个 LMS（本地监控站），它将保存一个传感器服务器的数组列表，然后从那里管理它们。

所以我创建了一个测试类来测试添加它们的实现；

```
public class testClass 
{
    static public void main(String[] args) 
    {
        ArrayList<FloodSensorServer> sensors = new ArrayList<FloodSensorServer>();

        sensors.add(new FloodSensorServer("Sensor 1"));
        sensors.add(new FloodSensorServer("Sensor 2"));
        sensors.add(new FloodSensorServer("Sensor 3"));
        sensors.add(new FloodSensorServer("Sensor 4"));

    }
} 
```

从逻辑上讲，我认为这可能有效，直到我运行它并看到它运行第一个 .add 然后停止。然后我意识到它因为这行代码而停止了；

```
orb.run();  

public class FloorSensorServer 
{
Sensor counter;
String sensorName;

public FloorSensorServer(String sensorName)
{
    this.sensorName = sensorName;
    createServer();
}

public void createServer()
{
    try {
        // Initialize the ORB
        System.out.println("Creating sensor: " + sensorName);

        String[] newArgs = {"-ORBInitialPort", "1050"}; 
        ORB orb = ORB.init(newArgs, null);

        // get reference to rootpoa & activate the POAManager
        POA rootpoa = POAHelper.narrow(orb.resolve_initial_references("RootPOA"));
        rootpoa.the_POAManager().activate();

        // Create the Count servant object
        FloorSensorImpl sensor = new FloorSensorImpl(sensorName);

        // get object reference from the servant
        org.omg.CORBA.Object ref = rootpoa.servant_to_reference(sensor);
        Sensor cref = SensorHelper.narrow(ref);

        // Get a reference to the Naming service
        org.omg.CORBA.Object nameServiceObj = 
                orb.resolve_initial_references ("NameService");
        if (nameServiceObj == null) {
            System.out.println("nameServiceObj = null");
            return;
        }

        // Use NamingContextExt which is part of the Interoperable
        // Naming Service (INS) specification.
        NamingContextExt nameService = NamingContextExtHelper.narrow(nameServiceObj);
        if (nameService == null) {
            System.out.println("nameService = null");
            return;
        }

        NameComponent[] countName = nameService.to_name(sensorName);
        nameService.rebind(countName, cref);

        //  wait for invocations from clients
        orb.run();            

    } catch(Exception e) {
        System.err.println(e);
    }
    }
} 
```

**问题：**

遇到这样的情况怎么办？还是我以完全错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:46:57.760

所有这些都具有相同的 ORB 初始端口。要创建多个 CORBA 服务器，您必须为每个服务器提供自己的端口...

也就是说，在

```
String[] newArgs = {"-ORBInitialPort", "1050"}; 
```

端口`"1050"`不能是一个神奇的常量，但需要是一个参数或局部变量，为每个创建的服务器更改为一个新值。

# java - 网络服务发现，一部手机提供多种网络服务？

> ID：16108341
> 
> 赞同：1
> 
> 时间：2013-04-19T15:38:07.963
> 
> 标签：java, android

我一直在关注[这篇文章](http://developer.android.com/training/connect-devices-wirelessly/nsd.html)，并设法实现了它的基本版本。

我想问的是，同一部手机是否可以创建多个网络服务，然后在这些创建的服务中搜索特定的服务？

干杯

# c++ - 避免 C++ 多态性

> ID：16108342
> 
> 赞同：2
> 
> 时间：2013-04-19T15:38:11.193
> 
> 标签：c++, c, polymorphism, interpreter

我最近创建了自己的脚本语言。我的代码结构很大程度上基于多态性。（我不太确定它是如何调用的。我有一个虚函数，然后我派生类并让操作系统决定在运行时调用什么）：

```
class Statement 
{ 
    virtual void exec() = 0; 
};

class PrintStmt : public Statement
{ 
    void exec() 
    { 
        std::cout << expression->eval(); 
    };    

class AssignStmt : public Statement
{ 
    void exec() 
    { 
        vm->bind_var(name, expression->eval()) 
    }; 
```

有什么想法可以重做它，以便它可以由纯 C 编译器编译吗？我知道这是一个普遍的问题，没有单一的答案，但你会怎么做呢？

注意：我已经下载了 python 代码作为参考，但要弄清楚它是如何工作的还需要一些时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:58:21.290

`Statement`将是一个`struct`. 除了它的数据成员之外，您还需要一个函数指针，例如

```
struct Statement
{
    void(*exec)(Statement* this); // Function pointer
    // Other members
}; 
```

然后，您将拥有每个语句类型的函数的不同实现以及用于制造正确类型的对象的函数，例如

```
static void printExec(struct Statement* this)
{
    printf("%s", this->whatever);
}

struct Statement* createPrintStatement()
{
    struct Statement* statement = calloc(1, sizeof(struct Statement));
    statement->exec = printExec;
    return statement;
} 
```

你会像这样调用它：

```
statement->exec(statement); 
```

`this`指针使您可以访问特定结构的数据成员，即您调用其 exec 方法的实例。

如果您有很多功能，请考虑使用 vtable。

```
struct VTable
{
    void(*exec)(Statement* this); // Function pointer
    const char* (*stringValue)(Statement* this); // Function pointer
};

struct Statement
{
    struct VTable* vtable;
    // Other members
}; 
```

您只为每种对象构建一个 vtable 一次

```
struct VTable printVTable =
{
    printExec,
    printStringValue
}; 
```

您可以这样创建新对象：

```
struct Statement* createPrintStatement()
{
    struct Statement* statement = calloc(1, sizeof(struct Statement));
    statement->vtable = &printVTable;
    return statement;
} 
```

并调用这些方法

```
statement->vtable->exec(statement); 
```

vtable 方法或多或少是 C++ 在幕后所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:54:42.087

将其转换为 C 的最直接方法可能是使用函数指针。正如@DrewNorman 所说，您将需要了解 vtables 的工作方式、类布局等，并在 C 中重新实现它（至少部分地）。下面的示例代码非常有限，但会给您一些预期的提示。

```
struct Statement {
  void (*exec)(struct Statement* s);
};
struct PrintStmt {
  struct Statement statement;
  char* what;
};

void print_function(struct Statement* s) {
    struct PrintStmt* p = (struct PrintStmt*)s;
    printf(p->what);
}

// ...

struct PrintStmt p;
p.statement.exec = &print_function;
p.what = "Hello world";
p.statement.exec(p); 
```

有许多 C 项目使用这种技术，我想到了 GObject，但它远非唯一。

（注意：我习惯了 C++ 而不是真正的 C，所以这甚至可能不是有效的 C，但你还是明白了）

# dll - 从没有 app.config 的 DLL 使用 .net 2.0 Web 服务

> ID：16108344
> 
> 赞同：0
> 
> 时间：2013-04-19T15:38:18.743
> 
> 标签：dll, .net-2.0, asmx, app-config

使用没有 app.config 的 .net 2.0 Web 服务的一般问题

请原谅我的英语不好：

我已经做了什么：

我编写了一个测试控制台应用程序，它与存储在 app.config 中的预配置 Web 连接连接，这很好用：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
    </configSections>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="XpageServiceSoap">
                    <security mode="Transport" />
                </binding>
                <binding name="XpageServiceSoap1" />
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="https://www.anydomain.com/XpageService.asmx"
                binding="basicHttpBinding" bindingConfiguration="XpageServiceSoap"
                contract="XsysService.XpageServiceSoap" name="XpageServiceSoap" />
        </client>
    </system.serviceModel>
</configuration> 
```

现在我想构建一个也可以与 COM 一起使用的程序集。尝试调用 DLL 函数会导致错误，因为无法为 DLL 提供 app.config。

我想在我的 DLL 中包含连接信息。所以我尝试了以下方法：

```
[ServiceContract]
interface IXsysService
{
    [OperationContract]
    string userpswd(string user, string passwort);
    [OperationContract]
    string pagesource(string page, string tokenxml, string ip);
} 
```

并从主要调用：

```
EndpointAddress address = new EndpointAddress("https://www.anydomain.com/XpageService.asmx");
WSHttpBinding bind = new WSHttpBinding(SecurityMode.Transport);
ChannelFactory<IXsysService> factory = new ChannelFactory<IXsysService>(bind, address);
IXsysService proxy = factory.CreateChannel();

using (proxy as IDisposable)
{
    Console.WriteLine("Abruf: {0}", proxy.userpswd("user",GetPasswortFromConsole())); // exception!
    Console.ReadLine();
} 
```

代理似乎通过 SSL 成功连接。但是当调用 userpswd() 我收到以下异常（从德语翻译）：

“System.Web.Services.Protocols.SoapException：如果没有有效的操作参数，则无法处理请求。请指定有效的 SOAPAction 对象。”

当我尝试这个时：

```
EndpointAddress address = new EndpointAddress("https://www.anydomain.com/XpageService.asmx?wsdl"); 
```

我得到同样的例外。

可能是我对我的尝试完全错误。

有人对我如何解决这个问题有任何建议吗？我需要一个无需任何 app.config 即可连接到 Web 服务的程序集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:55:06.967

一个应用程序只使用一个配置文件源。那是应用程序本身的配置文件。在您的情况下，它是控制台应用程序的配置。

所有设置都必须在该文件中。如果它们来自 DLL 的 app.config，则需要将它们复制到控制台应用程序的 app.config 中。

这是因为单个库 (DLL) 可能被不同的消费项目（控制台应用程序、Windows 服务、桌面应用程序）使用。这些中的每一个都可能需要不同的设置。对于图书馆来说，如果忽略图书馆的不同用户，那么只有一组设置是行不通的。

# css - 变换 :before 或 :after 项

> ID：16108346
> 
> 赞同：7
> 
> 时间：2013-04-19T15:38:22.963
> 
> 标签：css

有没有办法将变换应用到使用 :before 插入的元素上？

以下方法不起作用，但我对其他解决方案持开放态度。

```
.itemclass:before  {
  content: "➨";
  transform: rotate(30deg);
  -ms-transform: rotate(30deg); /* IE 9 */
  -webkit-transform: rotate(30deg); /* Safari and Chrome */
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T15:41:31.663

转换不能应用于非替换`inline`元素。添加：

```
display:inline-block; 
```

[**演示**](http://jsbin.com/epomil/1/edit)

旁注：尽管这不适用于此用例，但`absolute`/`fixed`定位将放弃对`display`属性的需求，因为它们会自动被视为`display:block`.

另外，检查可[转换元素](http://www.w3.org/TR/css3-transforms/#transformable-element)的定义：

> 可转换元素是 HTML 命名空间中的元素，它可以是[块级](http://www.w3.org/TR/CSS2/visuren.html#block-level)或[原子内联级元素](http://www.w3.org/TR/CSS2/visuren.html#x13)，或者其 '<code>display' 属性计算为 '<code>table-row'、'<code>table- row-group'、'<code>table-header-group'、'<code>table-footer-group'、'<code>table-cell' 或 '<code>table-caption'；或 SVG 命名空间中的元素（参见[[SVG11]](http://www.w3.org/TR/css3-transforms/#SVG11)），它具有属性 '<a href="http://www.w3.org/TR/css3-transforms/#effects"> `transform`', '<code>patternTransform ' 或 '<code>gradientTransform'。

# java - 使用 Java Mail 发送邮件错误

> ID：16108351
> 
> 赞同：2
> 
> 时间：2013-04-19T15:38:33.903
> 
> 标签：java, email, smtp, gmail

我正在使用此代码发送电子邮件

```
 public static void main(String[] args) {

    final String username = "mygmailAccount@gmail.com";
            final String password = "myGmailPassword";

            Properties props = new Properties();
            props.put("mail.smtp.auth", true);
            props.put("mail.smtp.starttls.enable", true);
            props.put("mail.smtp.host", "smtp.gmail.com");
            props.put("mail.smtp.port", "587");

            Session session = Session.getInstance(props,
              new javax.mail.Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(username, password);
                }
              });

            try {

                Message message = new MimeMessage(session);
                message.setFrom(new InternetAddress("noreply@gmail.com"));
                message.setRecipients(Message.RecipientType.TO,
                    InternetAddress.parse("test@gmail.com"));
                message.setSubject("Testing Subject");
                message.setText("Dear Mail Crawler. hello");

                Transport.send(message);

                System.out.println("Done");

            } catch (MessagingException e) {
                throw new RuntimeException(e);
            }
        }
} 
```

然后这给我返回了一个嵌套异常。堆栈跟踪是如此巨大，我不知道从哪里开始寻找或如何调试它

```
Exception in thread "main" java.lang.RuntimeException: javax.mail.MessagingException: Could not convert socket to TLS;
  nested exception is:
    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at Test.main(Test.java:44)
Caused by: javax.mail.MessagingException: Could not convert socket to TLS;
  nested exception is:
    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at com.sun.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:1907)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:666)
    at javax.mail.Service.connect(Service.java:367)
    at javax.mail.Service.connect(Service.java:226)
    at javax.mail.Service.connect(Service.java:175)
    at javax.mail.Transport.send0(Transport.java:253)
    at javax.mail.Transport.send(Transport.java:124)
    at Test.main(Test.java:39)
Caused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1649)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:241)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:235)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1206)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:893)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1138)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1165)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1149)
    at com.sun.mail.util.SocketFetcher.configureSSLSocket(SocketFetcher.java:528)
    at com.sun.mail.util.SocketFetcher.startTLS(SocketFetcher.java:465)
    at com.sun.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:1902)
    ... 7 more
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:323)
    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:217)
    at sun.security.validator.Validator.validate(Validator.java:218)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185)
    ... 17 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:318)
    ... 23 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:47:10.057

```
Caused by: javax.mail.MessagingException: Could not convert socket to TLS;
  nested exception is: 
```

您的 SMTP 服务器坚持使用 TLS（传输层安全）进行加密发送，并且无法验证服务器证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T01:11:40.383

请将属性定义为（使用 TLS 的替代方法）：

```
Properties props = new Properties();
props.put("mail.smtp.host", "smtp.gmail.com");
props.put("mail.smtp.socketFactory.port", "465");
props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
props.put("mail.smtp.auth", "true");
props.put("mail.smtp.port", "465");

.... 
```

看看这是否有效。

# ruby-on-rails - assets:precompile 和 capistrano 在本地运行，但不在服务器上

> ID：16108353
> 
> 赞同：2
> 
> 时间：2013-04-19T15:38:41.213
> 
> 标签：ruby-on-rails, deployment, ember.js, capistrano, asset-pipeline

我正在使用 capistrano 将 Rails 应用程序部署到 vps 服务器。

一切正常，直到最后一次更新。当 capistrano 运行`assets:precompile`时，我现在收到错误消息：

```
rake aborted!
TypeError: Object function (deps, callback) {
if (Array.isArray(deps)) {
var params = deps.map(function(dep) {
return this.lookup(dep);
}, this);
if (callback) {
callback.apply(null, params);
}
return undefined;
}
else {
return this.lookup(deps);
}
} has no method 'bind' 
```

当我使用`--trace`选项运行它时，我得到了这个：

```
https://gist.github.com/NicosKaralis/5421153#file-cap-deploy 
```

它没有说明问题出在哪里，当我在本地机器上运行相同的命令时它工作正常。

我的机器是 Max OS X，我的服务器是 Ubuntu 10.10

我做错了什么，我该如何解决？

**编辑**

我的`application.js`：[https ://gist.github.com/NicosKaralis/5422877#file-gistfile1-txt](https://gist.github.com/NicosKaralis/5422877#file-gistfile1-txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:49:51.777

显然这是由服务器上的一些旧宝石引起的。

在我删除所有内容并重新开始后，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:07:54.317

我遇到了同样的问题。将以下行添加到我`Gemfile`为我工作的内容中：

`gem 'therubyracer', require: 'v8'`

# android - 分享到口袋

> ID：16108356
> 
> 赞同：2
> 
> 时间：2013-04-19T15:38:52.873
> 
> 标签：android, pocket

我正在尝试向[Pocket 应用程序](http://getpocket.com/)分享一些文本，但它一直告诉我：

```
"Could not be saved to Pocket. The shared content did not contain any valid web addresses" 
```

我用这个片段来分享：

```
Intent intent = new Intent(android.content.Intent.ACTION_SEND); 
intent.setClassName(info.activityInfo.packageName, info.activityInfo.name); 
intent.setType("text/plain"); 
intent.putExtra(Intent.EXTRA_SUBJECT, subject); 

if(info.activityInfo.packageName.contains("pocket"))  { 
    intent.putExtra(Intent.EXTRA_TEXT, link); 
}

((Activity)context).startActivity(intent); 
```

它适用于 GMail 或 Evernote，但共享到 Pocket 时出现问题。我敢打赌它与 putExtra() 以及放在那里的东西有关。谁能解释一下？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:02:37.003

问题在这里：

```
if(info.activityInfo.packageName.contains("pocket"))  { 
  intent.putExtra(Intent.EXTRA_TEXT, link); 
} 
```

您正在检查当前活动的包名称是否包含“口袋”一词。如果没有，您的意图将不包含 Pocket 应用程序所需的 EXTRA_TEXT。

为什么不总是提供EXTRA_TEXT？

如果您真的只想在安装了 Pocket 应用程序后填充 EXTRA_TEXT，您可以执行以下操作：

```
PackageManager pm = getPackageManager(); 
try {
       pm.getPackageInfo("com.ideashower.readitlater.pro", PackageManager.GET_ACTIVITIES);
       intent.putExtra(Intent.EXTRA_TEXT, link); 
} catch (PackageManager.NameNotFoundException e) { 
      // Pocket app not installed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T11:17:43.727

意图.putExtra（意图.EXTRA_TEXT，文本）；

如果共享到口袋，“文本”应该与其他字符有空格，例如：

if text = "abc abc abc abchttp://www.google.com"

口袋不会得到网址

应该是 text = "abc abc abc abc [http://www.google.com](http://www.google.com) "

但印象笔记可以自动提取网址

# microsoft-dynamics - 使用脚本激活/停用 aif 端口

> ID：16108366
> 
> 赞同：0
> 
> 时间：2013-04-19T15:39:35.717
> 
> 标签：microsoft-dynamics, ax

我搜索了谷歌和这个网站，但找不到任何例子。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T11:01:01.420

你在寻找 AifPortManager::deployPort('PORT_NAME'); 和 AifPortManager::undeployPort('PORT_NAME'); ?

# html - 获取 Html H2 标签 id 值

> ID：16108367
> 
> 赞同：-2
> 
> 时间：2013-04-19T15:39:38.543
> 
> 标签：html, twitter-bootstrap, tags

我想在编辑模式下获取 h2 标签 id 值。因为如果 DetailsHeader 为空，那么我必须显示错误消息。

```
<div class="modal-header">
<h2 class="tc_pageheader editableName" id="DetailsHeader"></h2>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:09:37.980

你可以使用这个：

```
var h2 = $(".modal-header > h2").attr("id"); 
```

我使用 jQuery 是因为，我觉得您使用的是 BootStrap，它包含 jQuery。

### 小提琴：http: [//jsfiddle.net/praveenscience/nhp6d/](http://jsfiddle.net/praveenscience/nhp6d/)

* * *

因此，要查找它是否为空，您可以使用以下内容：

```
if ($("#" + h2).text() == "")
  // Do something if empty! 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/nhp6d/1/](http://jsfiddle.net/praveenscience/nhp6d/1/)

# c# - 通过 ODP 将记录从 pl-sql 传递到 C#

> ID：16108369
> 
> 赞同：0
> 
> 时间：2013-04-19T15:39:42.640
> 
> 标签：c#, plsql, type-conversion

我正在开发一个项目，该项目在 C# 中具有 Pl-Sql 和 GUI 的业务逻辑。

我在 Pl-Sql 中有一个记录类型，将`files`表表示为：

```
type file_record is record(
    id        number
   ,file_name varchar2(256));

type file_record_type is table of file_record index by pls_integer; 
```

我想将所有条目放到表中并将它们传递给 C#。

PL-Sql 程序是：

```
procedure get_all_file_names(p_files out file_record_type) is

v_counter number := 1;

begin

for c in (select id
                ,file_name
            from files) loop
  p_files(v_counter).id := c.id;
  p_files(v_counter).file_name := c.file_name;
  v_counter := v_counter + 1;
end loop;

end get_all_file_names; 
```

我通过 C# 调用这个过程，如下所示：

```
// get pmp entries from inside a specific file
    public DataSet getAllPmpFileNames(string commandText)
    {
        DataSet dataSet = new DataSet();

        OracleCommand oracleCommand = new OracleCommand();

        OracleParameter oracleParameter = new OracleParameter("p_files", OracleDbType.Object);
        oracleParameter.Direction = ParameterDirection.Output;
        oracleParameter.CollectionType = OracleCollectionType.PLSQLAssociativeArray;
        oracleCommand.Parameters.Add(oracleParameter);

        oracleCommand.CommandText = commandText;
        oracleCommand.CommandType = CommandType.StoredProcedure;

        try
        {
            oracleCommand.Connection = m_Connection;
            OracleDataAdapter oracleDataAdapter = new OracleDataAdapter(oracleCommand);
            oracleDataAdapter.Fill(dataSet);
        }
        catch (Exception)
        {
            throw;
        }

        return dataSet;
    } 
```

当我从 C# 调用它时，我得到了异常`OracleParameter.Size is invalid`

在打电话之前我不能给出尺寸，因为我不知道。我应该先得到尺寸然后调用程序吗？

或者有没有其他优雅的方法可以从 C# 访问多个数据库元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T18:07:07.153

创建一个视图而不是存储过程，并使用 OracleDataReader 来填充您的数据集。

# solr - Solr 统计文件的分数？

> ID：16108370
> 
> 赞同：0
> 
> 时间：2013-04-19T15:39:52.403
> 
> 标签：solr

我想在 Solr 中获得一些关于我的文档分数的类似直方图的统计信息。

让我再扩展一点：可以说我的 solr 结果是

```
userid,score
A,4
B,4
C,3
D,3
E,3
F,2 
```

（我已经自定义了 Similarity 类来给我一个整数分数的文档。）我想得到一些基本的统计数据（每个分数的用户 ID 计数）我正在寻找一个类似的结果

```
4,2
3,3
2,1 
```

这甚至可以在 Solr 中做到吗？我当然可以得到第一组结果并计算统计数据，但我希望结果能以数百万行返回。

我会很感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:24:48.540

不要认为 Solr 是可能的。
分面可以是一种选择，但是由于分数不是在模式中定义并在索引中维护的字段，因此无法在分数字段上分面。

# php - 使用带有 SQL 的 JQuery PHP 将作为方程式的列添加到 html 表

> ID：16108373
> 
> 赞同：0
> 
> 时间：2013-04-19T15:39:54.967
> 
> 标签：php, jquery, json

必须删除代码，因为它容易受到 SQL 攻击"""""""""""""""""""""""""""""""""""""""" """"""""""""""""""""""""""""""""""""""""""""""""""" "

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:57:10.237

您收到解析错误，因为您在构建 sql 查询后遗漏了一个分号

```
$sql="SELECT ISO_id, gdp, population, country_name, gold, silver, bronze, total FROM Country WHERE '$x'='0' AND '$y'='0' AND '$z'='0'" 
```

# google-maps-api-3 - 如果用户在地图范围内，则显示位置；如果没有，请显示地图

> ID：16108374
> 
> 赞同：0
> 
> 时间：2013-04-19T15:40:00.630
> 
> 标签：google-maps-api-3, geolocation

我显示了一个特定位置的地图，地图上固定了兴趣点。这已经完成......我要做的是添加以下功能：如果用户位于此地图的现有范围内，则显示用户当前位置放大 10 并放置这些引脚。如果用户不在地图范围内，只需显示带有兴趣点图钉的地图。

我已经包含了一部分代码，无论地图的现有边界如何，都将显示用户位置，或者只显示没有用户位置的边界。你会看到我一直在玩弄这些功能却一无所获。

```
GeoMarker = new GeolocationMarker();
GeoMarker.setCircleOptions({fillColor: '#808080',fillOpacity:0.0,strokeOpacity:0.0});

google.maps.event.addListenerOnce(GeoMarker, 'position_changed', function() {
map.setCenter(this.getPosition());
//map.fitBounds(this.getBounds()); //uncomment to show based on user location regardless of the exsisting bounds of the map
//map.fitBounds(bounds); //uncomment to show ALL the listing Markers within the bounds of the map and not location of the user
//if (map.getZoom() > 1) map.setZoom(13); //this zoom is based on user location
// map.setCenter(this.getPosition());

var listener = google.maps.event.addListener(map, "idle", function() { 
google.maps.event.removeListener(listener); 
});
});

google.maps.event.addListener(GeoMarker, 'geolocation_error', function(e) {
alert('There was an error obtaining your position. Message: ' + e.message);
});
GeoMarker.setMap(map); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:53:19.983

我不确定，如果我正确理解了您的问题，但是您可以通过 google.maps.Map.getBounds() 返回一个[google.maps.LatLngBounds](https://developers.google.com/maps/documentation/javascript/reference?hl=de#LatLngBounds)对象来获取当前视口的边界。在此调用中， contains() 方法传递用户的坐标以检查您的用户是否在边界内。

# printing - 如何打开一个网址，并用批处理/VB脚本打印页面？

> ID：16108380
> 
> 赞同：0
> 
> 时间：2013-04-19T15:40:20.390
> 
> 标签：printing, batch-file

我是批处理脚本的新手，请建议如何处理以下问题。

我想加载一个网页，然后使用批处理/VB 脚本将网页的 2 个副本打印到打印机。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:00:46.473

这是一个可以做到的vbscript。将站点变量更改为您要打印的任何站点。

```
'Print Webpage
On Error Resume Next

Dim oIE 
Dim NumPages
Dim Site
Const OLECMDID_PRINT = 6
Const OLECMDEXECOPT_DONTPROMPTUSER = 2

NumPages = 2
Site = "www.google.com"

Set oIE = CreateObject("InternetExplorer.Application")
oIE.Navigate Site
oIE.Visible = 1

Do while oIE.ReadyState <> 4
    wscript.sleep 1000
Loop

For x = 1 to NumPages
    oIE.ExecWB OLECMDID_PRINT, OLECMDEXECOPT_DONTPROMPTUSER
Next 
```

# asp.net-mvc - 关于“UnobtrusiveJavaScriptEnabled”，MVC 4 中的默认值是多少？

> ID：16108383
> 
> 赞同：0
> 
> 时间：2013-04-19T15:40:35.510
> 
> 标签：asp.net-mvc, asp.net-mvc-4, appsettings

```
<appSettings>
<add key="UnobtrusiveJavaScriptEnabled" value="true"/>
</appSettings> 
```

目前，我们在 appSettings 中将 UnobtrusiveJavaScriptEnabled 设置为 true（这也可以在 global.asax 中定义）

我们正在考虑清理 appSettings 并删除我们不需要显式定义的配置（特别是框架的东西），但不确定它的默认设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:58:10.313

默认值为 true，因此默认启用不显眼的 javascript。如果您愿意，您可以删除该设置。顺便说一句，它在 ASP.NET MVC 3 中是一样的。

# apache-flex - 如何使用 defaults.css？

> ID：16108385
> 
> 赞同：1
> 
> 时间：2013-04-19T15:40:45.757
> 
> 标签：apache-flex, flash-builder, mxml, flex-spark

*   我正在使用带有 Flex 4.6 和 Adob​​e AIR 3.7 的 Flash Builder 4.7
*   我有一个生成 SWC 的库项目。
*   我在 src 文件夹的根目录中包含了一个 defaults.css 文件。
*   当我尝试在应用程序中使用此 SWC 时，它会产生警告：

> swc 'C:\Path\ToMySWC\my.library.swc' 具有默认样式并且位于库路径中，这意味着将在没有样式的情况下链接依赖项。这可能会导致使用输出 swc 的应用程序缺少皮肤。swc 应该放在外部库路径中。

我真的不明白警告信息，或者如何处理它。警告的效果是 SWC 中的组件没有应用它们的默认样式。

我一直在尝试**[从 defaults.css 文件中应用样式](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf68cf9-7ffe.html)**- 在页面的最后一个标题下。

我在这里要做的就是创建一个带有默认样式的组件的 SWC。我怎样才能做到这一点？

# php - $variable ?: [] 做什么？

> ID：16108391
> 
> 赞同：2
> 
> 时间：2013-04-19T15:40:59.790
> 
> 标签：php

```
$variable ?: [] 
```

它有什么作用？这是一个三元运算符，但看起来有点不同，我不知道 [] 是什么意思。也许它是 5.4 的简写数组并创建一个空数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T15:42:24.267

这是以下的简写：

```
if ($variable) {
    // nothing
} else {
    $variable = array();
} 
```

`[]`是 PHP 5.4 的简写`array()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:43:12.660

它的意思是：

如果`$variable`有一个值，则使用该值，否则使用一个空数组。

`[]`语法是空数组的 PHP 5.4 简写语法。
PHP 5.3 及更早版本会将其编写为`array()`.

换句话说，是的，您对它的作用的猜测几乎完全正确。

# php - Kohana 3.3 如何将文件放入数组？

> ID：16108393
> 
> 赞同：0
> 
> 时间：2013-04-19T15:41:13.997
> 
> 标签：php, kohana, kohana-3

例如，我的视图目录中有一个文件：

```
views/admin/store/test1.php
views/admin/store/test2.php
views/admin/store/test3.php 
```

如何让它们进入数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:05:49.117

试试这个：

```
$views = Kohana::list_files('views/admin/store'); 
```

这将通过检查模块等来获取级联文件系统中此文件夹内的所有文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:05:28.067

这里的解决方案：

```
$fileArray = array();

$directory = APPPATH . 'views/admin/store/*';

foreach ( glob($directory) as $filename ) {
    $result = pathinfo($filename, PATHINFO_BASENAME);
    array_push($fileArray, $result);
} 
```

一些注意事项：与

```
'views/templates/*' 
```

您将在目录中找到所有文件。您也可以通过这种方式“过滤”结果：

```
'views/templates/*.php' 
```

contant PATHINFO_BASENAME 仅返回文件名，对于其他信息，您可以使用 PATHINFO_DIRNAME、PATHINFO_EXTENSION 或 PATHINFO_FILENAME。（见[http://php.net/manual/en/function.pathinfo.php](http://php.net/manual/en/function.pathinfo.php)）

# file - Deny access to specific file types in specific directory

> ID：16108399
> 
> 赞同：24
> 
> 时间：2013-04-19T15:41:40.497
> 
> 标签：file, .htaccess, directory, file-type

For some application, users are able to upload their own files. Since this can be very large files, they are allowed to upload them via their own FTP client.

Of course I wouldn't like them to upload some PHP files with which they can access all other files on the server. One of the ways I want to prevent this behavior is by denying access to specific file types (like php, rb, py, etc.) only in these folders.

I have found ways to deny access to folders, to files, to files in folders, but nothing about file types in folders.

I tried combining what I've found, like:

```
<Files ~ "\.inc$">
Order allow,deny
Deny from all
</Files> 
```

changing to

```
<Files uploads/ "\.inc$">
Order allow,deny
Deny from all
</Files> 
```

or alternative ways

```
RewriteRule ^(\.php) - [F,L,NC] 
```

to

```
RewriteRule ^(uploads/\.php) - [F,L,NC] 
```

However, I can't find out what syntax I should use.

So, for example, I could have the following (basic example):

```
/index.php
/uploads/
  hack.php
  hack.rb
  hack.py
  pony.jpg 
```

I want hack.php/rb/py to be unavailable, but everything else to be available. What syntax should I use?

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-12-10T08:04:32.957

The FilesMatch directive works purely on filenames. It doesn't look at the path portion at all.

If you want to specify directives in the root .htaccess file to control a subdirectory, you can use [mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html).

Try this:

```
RewriteRule ^uploads/.*\.(php|rb|py)$ - [F,L,NC] 
```

The above will block any filename ending in .php or .rb or .py in the /uploads directory or its subdirectories. For example, it will block:

*   /uploads/something.php
*   /uploads/something/more.php

Note that there is no leading slash in the rewrite rule. The path that you need to use in the directive will be different depending on where it's placed. The above directive, if placed in the document root's .htaccess file, will work for files in a directory called *uploads* that is directly beneath document root.

While the above answers your question, it would be **safer to allow** only specific files rather than trying to block files. Often a server will execute files with extensions other than the ones you've listed.

You could do something like this:

```
RewriteCond %{REQUEST_URI} ^/uploads [NC]
RewriteCond %{REQUEST_URI} !\.(jpe?g|png|gif)$ [NC]
RewriteRule .* - [F,L] 
```

With the above, if the request URI begins with /uploads but does not end with one of the specified extensions, then it is forbidden. You can change the extensions to whatever suits your needs. But that way, you can permit extensions as needed rather than finding out too late that you missed blocking one.

This rule (from your question)

```
RewriteRule ^(uploads/\.php) - [F,L,NC] 
```

will block

*   /uploads/.php
*   /uploads/.phpmore

but it does not allow for anything between the directory name and the file extension.

If you are going to use rewirte rules, you might want to learn more about regexp. I often refer to [www.regular-expressions.info](http://www.regular-expressions.info/) when I need to look up something.

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-19T16:25:22.507

You can put a .htaccess in the `upload` directory. The directives will then apply to this directory and the directories below only. See [How directives are applied](http://httpd.apache.org/docs/current/howto/htaccess.html#how) for details.

So, a .htaccess with [`FilesMatch`](http://httpd.apache.org/docs/current/mod/core.html#filesmatch) can restrict access for files matching `*.inc`, `*.php` and so on, when it is in the `public` directory

```
<FilesMatch "\.(?:inc|php|py|rb)$">
Order allow,deny
Deny from all
</FilesMatch> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-14T16:48:59.163

You can use The following easiest and one liner solution to deny access to certen file types:

```
RedirectMatch 403 ^/folder/.+\.(png|gif|js)$ 
```

This will return a 403 Access forbidden error for clients if they try to access **/folder/file.extension** .

# c - 从指向字符串的指针数组访问字符串的字符

> ID：16108401
> 
> 赞同：1
> 
> 时间：2013-04-19T15:41:43.837
> 
> 标签：c, arrays, string, pointers

我是编程新手，遇到过这个特殊问题：

```
int *FindLine(char *lines[100],int line_number) {
  char **pointer=lines;
  int i,*stack,counter=0;
  stack=(int*)calloc(30,sizeof(int));
  for (i=0;i<line_number;i++)
    if (*pointer[i]=='{') { 
      stack[counter]=i+1;
      counter++;
    }
  return stack;
}

main(){
  char *line[100];
  FILE *fp;
  char FileName[20];
  char Buffer[100];
  fp=fopen(FileName,"r");

  while(fgets(Buffer,100,fp)!=NULL) {        
    line[i]=strdup(Buffer);                    
    i++;
  }            
  NumOfLines=i;
  Stack=FindLine(line,NumOfLines);
  system("PAUSE");
} 
```

stack 应该存储了每个 '{' 出现的行号，而不是仅在 '{' 是该行的第一个字符时才存储它。C上有没有办法访问字符串指针数组中的指针所指向的字符串的每个单独字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:44:45.013

改变

```
if (*pointer[i]=='{') 
```

至

```
if (!strchr(pointer[i],'{')) 
```

您可能需要添加

```
#include <string.h> 
```

一开始。

`pointer[i]`指向字符串（字符数组）。 `*pointer[i]`给你字符串的第一个字符。所以你的 if 条件只检查第一个字符。

所以你必须使用[strchr](http://pubs.opengroup.org/onlinepubs/009695399/functions/strchr.html)

strchr 检查字符串中是否有 '{' 字符。如果找到则返回指向第一次出现的指针，如果未找到则返回`0`/ `NULL`。

# installation - WiX Bundle bal:condition - util:RegistrySearch 变量始终为假

> ID：16108405
> 
> 赞同：12
> 
> 时间：2013-04-19T15:41:50.687
> 
> 标签：installation, wix, registry, wix3.6

如果未安装第三方软件元素，我希望我的安装失败。我在 中添加了`Fragment`a`util:RegistrySearch`和 a `bal:Condition`，`Bundle`但我无法让它工作。`ThirdPartyCOMLibraryInstalled`永远不会评估为真。我已经确认密钥存在，并且我使用的值`Key`是正确的 - 我从 regedit 中的选定密钥复制/粘贴了名称。日志中没有任何错误。

我正在 Windows 7 64 位上的 Visual Studio 2012 中使用 WiXTools 3.7 构建安装程序，并在 Windows XP SP3 和 Windows 7 64 位上进行测试。

在网上搜索其他示例时，`util:RegistrySearch`我遇到了条件测试表达式的以下替代形式。

1.  `ThirdPartyCOMLibraryInstalled = 0`- 总是假的
2.  `ThirdPartyCOMLibraryInstalled <> 1`- 永远真实

这是`Bundle`代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
     xmlns:netfx="http://schemas.microsoft.com/wix/NetFxExtension"
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension">

    <Bundle Name="!(bind.packageName.MyApp)"
            Version="!(bind.packageVersion.MyApp)"
            Manufacturer="!(bind.packageManufacturer.MyApp)"
            UpgradeCode="a07ce1d5-a7ed-4d89-a7ee-fb13a5dd69ba"
            Copyright="Copyright (c) 2013 [Bundle/@Manufacturer]. All rights reserved."
            IconSourceFile="$(var.My_Application1.ProjectDir)MyCo.ico">

        <bal:Condition Message="ThirdParty Application COM Library Required. Please (re)install ThirdParty Application and ensure 'Windows API' and '.NET Components' are installed."
        >ThirdPartyCOMLibraryInstalled</bal:Condition>

        <Variable Name="InstallFolder"
                  Type="string"
                  Value="[ProgramFilesFolder]MyCo Systems\My_Application\"/>
        <BootstrapperApplicationRef
            Id="WixStandardBootstrapperApplication.HyperlinkLicense" >

            <bal:WixStandardBootstrapperApplication
                ThemeFile="Resources\HyperlinkTheme.xml"
                LaunchTarget="[InstallFolder]My_Application.exe"
                LocalizationFile="Resources\HyperlinkTheme.wxl"
                SuppressRepair="yes"
                SuppressOptionsUI="yes"
                LicenseUrl=""
                LogoFile="Resources/MyCoLogoWt64.png"

            />
        </BootstrapperApplicationRef>
        <Chain>
            <PackageGroupRef Id="NetFx40Redist"/>
            <MsiPackage Id ="MyApp"
                        Vital="yes"
                        Name="My Application"
                        SourceFile="$(var.MyApp_Install.TargetDir)MyApp_Install.msi">
                <MsiProperty Name="INSTALLLOCATION"
                             Value="[InstallFolder]" />
            </MsiPackage>
        </Chain>
    </Bundle>

    <Fragment>
      <util:RegistrySearch
            Variable="ThirdPartyCOMLibraryInstalled"
            Result="exists"
            Root="HKLM"
            Key="SOFTWARE\Classes\ThirdPartyId.Server\CLSID"/>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-19T16:28:51.453

根本问题是，它位于一个永远不会被引用`RegistrySearch`的单独文件中。`Fragment`因为没有`Fragment`被引用，所以链接器“优化”了 的内容，`Fragment`并且搜索不包含在您的`Bundle`.

> 另外：您可能会争辩说，在搜索中提到的变量引用`Condition`了链接器应该能够确定搜索是必要的这一事实。然而，这并不适用于所有情况。

幸运的是，解决方案非常简单！您甚至必须从以下两项中进行选择：

1.  将`RegistrySearch`元素移动到`Bundle`元素。
2.  在元素中添加一个`RegistrySearchRef`元素`Bundle`以引用`RegistrySearch`. `Fragment`您还需要提供`RegistrySearch`and`Id`属性。

就个人而言，我喜欢选项二，我什`Condition`至可能会将`Fragment`所有这些东西组合在一起。类似于：

```
<Bundle ...>
   <util:RegistrySearchRef Id='SearchForThirdParty' />

   ...

</Bundle>

<Fragment>
   <util:RegistrySearch
          Id='SearchForThirdParty' 
          Variable="ThirdPartyCOMLibraryInstalled" 
          Result="exists"
          Root="HKLM"
          Key="SOFTWARE\Classes\ThirdPartyId.Server\CLSID"/>

    <bal:Condition Message="ThirdParty Application COM Library Required. Please (re)install ThirdParty Application and ensure 'Windows API' and '.Net Components' are installed.">ThirdPartyCOMLibraryInstalled</bal:Condition>
  </Fragment>
</Wix> 
```

那应该这样做。

# design-patterns - 这个接口模式有合适的名称吗？

> ID：16108409
> 
> 赞同：0
> 
> 时间：2013-04-19T15:42:01.453
> 
> 标签：design-patterns, interface, coding-style

假设我有一个通用接口，例如：

```
public interface IWorkBroker<TWork, TResult>
{

   ...

} 
```

然后，为了漂亮，我这样做：

```
public interface IFooWorker : IWorkBroker<Foo, Bar>
{

    ...

} 
```

这种模式有名字吗？

有人这样做吗？（让我们假设“包装”界面没有定义任何附加功能；它纯粹是装饰性的。即让我的组合根更容易在视觉上扫描）

谢谢！

# vim - Makefile machit.vim 不起作用

> ID：16108410
> 
> 赞同：1
> 
> 时间：2013-04-19T15:42:04.573
> 
> 标签：vim, makefile, match

给定以下简单的 Makefile：

```
#Makiefile
ifeq(,)
else
endif 
```

根据[这个](http://vim.1045645.n5.nabble.com/how-to-jump-between-ifeq-and-endif-in-Makefile-td1185360.html)，只需包含这个 matchit.vim 文件就足够了，它可以在捆绑的插件中找到。

不幸的是，它不适合我。最初，我认为我的其他插件可能与 matchit 冲突。但是，vim 的空设置也不起作用。根据 matchit 的文档，它需要 b:match_words 循环遍历它们。由于 matchit.vim 是一个全局插件，因此 b:match_words 在相应的文件类型插件中定义。在 vim.vim 中验证，可以在标准运行时目录中找到。

我错过了什么吗？

PS：现在，我必须将它添加到我本地的 make.vim 中才能使其工作。

```
#make.vim
let b:match_words='\<ifeq\>:\<else\>:\<endif\>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:15:11.883

Makefiles 的文件类型是`make`. 在我最近的`$VIMRUNTIME/ftplugin/make.vim`（过时的`2006 Jun 17`）中，没有定义`b:match_words`.

因此，您确实必须将定义添加到您自己的配置中，最好是在`~/.vim/after/ftplugin/make.vim`.

如果您认为这通常很有用并且应该默认包含在内，您可以将补丁发送给脚本的维护者 (Bram Moolenaar)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T12:38:38.570

@Ingo Karkat 感谢您提供信息。我已将路径发送到 Bram Moolenaar。希望它会出现在下一个版本中。如果有人渴望，请尝试将其放入您的`~/.vim/after/ftplugin/make.vim`.

```
" matchit.vim
if exists("loaded_matchit")
  let b:match_words =
    \ '\<if\(n\)\=\(eq\|def\)\>:\<else\>:\<endif\>,' .
    \ '\<define\>:\<endef\>'
endif 
```

PS：由于vim脚本的加载顺序，是在标准ftplugin之前加载的，所以如果只是想在标准ftplugin之上构建ftplugin，`~/.vim/ftplugin`最好将自定义的ftplugin放在目录中。`~/.vim/after/ftplugin`

感谢@pevik 修复丢失的逗号。不知道为什么更改被拒绝，但我手动添加了它。

# php - 我可以在 select 语句中使用两个 Where 吗

> ID：16108415
> 
> 赞同：0
> 
> 时间：2013-04-19T15:42:18.983
> 
> 标签：php, mysql, select, where

我正在尝试在查询中获取日期范围和交易类型。我正在使用 Mysql 数据库使用 PHP。最初，该声明是

```
 ("select * from accounting WHERE date between '$startdate' AND 
        '$enddate'",$prop); 
```

它工作得很好，没有问题@ all。但我还需要它来选择数据库中称为事务类型的列。这是我修改它的方法：

```
 ("SELECT date, account, description, Income FROM accounting where 
           transactiontype = 'Income' and WHERE date between '$startdate' AND 
           '$enddate' order by date ASC",$prop); 
```

我收到错误消息：错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“WHERE date between '2012/09/01' AND '2013/04/17' order by date ASC”附近使用正确的语法查询：SELECT date, account ，描述，来自会计的收入，其中交易类型 = '收入'，并且日期在 '2012/09/01' 和 '2013/04/17' 之间按日期排序 ASC 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:43:50.680

AND 就足够了，你不需要第二个 WHERE。

```
("SELECT `date`, account, description, Income 
  FROM accounting 
  WHERE transactiontype = 'Income' 
  AND `date` between '$startdate' 
  AND '$enddate' order by `date` ASC",$prop); 
```

顺便说一句，尽量避免保留关键字作为表/列名称（如日期）。您将不得不一直逃避它们（并且也会一直忘记这一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:44:43.017

```
("SELECT date, account, description, Income FROM accounting where 
  transactiontype = 'Income' and "date" between '$startdate' AND 
 '$enddate' order by date ASC",$prop); 
```

如图所示，您可能还需要将日期括在语音标记或勾号 (`) 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T15:46:36.317

请删除第二个where子句..

```
 (SELECT date, account, description, Income FROM accounting where 
       transactiontype = 'Income' and (date between '$startdate' AND 
       '$enddate') order by date ASC",$prop ) 
```

# android - 单击列表视图项时更改为特定活动

> ID：16108418
> 
> 赞同：1
> 
> 时间：2013-04-19T15:42:33.920
> 
> 标签：android, android-listview

我有一个包含 3 个项目的列表视图，我想根据被单击的项目移动到一个新的活动，即每个项目在单击时应该移动到不同的活动。我已经尝试了针对类似问题的解决方案，但我仍然不知道如何让它去另一个活动

```
package com.example.wizer;

import java.util.ArrayList;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Options extends Activity implements OnItemClickListener {

    WifiManager wifi;
    BroadcastReceiver receiver;
    IntentFilter filter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_options);
        wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        filter = new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);

        registerReceiver(rcver, filter);

        ListView list = (ListView) findViewById(R.id.l1);

        ArrayList < String > List = new ArrayList < String > ();
        List.add("List available networks .");
        List.add("List APs .");
        List.add("List Networks according to thier signal strength .");

        ArrayAdapter < String > adp = new ArrayAdapter < String > (this, android.R.layout.simple_list_item_1, List);
        list.setAdapter(adp);

        wifi.startScan();
    }

    // On create
    final BroadcastReceiver rcver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {

        };

    };

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_options, menu);
        return true;
    }

    public void onItemClick(AdapterView <? > arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub
        if (arg3 == 0) {
            Intent NL = new Intent(Options.this, Networks.class);
            startActivity(NL);

        } else if (arg3 == 1) {

            Intent NL = new Intent(Options.this, AP.class);
            startActivity(NL);

        } else if (arg3 == 2) {
            Intent NL = new Intent(Options.this, Signal.class);
            startActivity(NL);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:51:13.980

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) { 
```

此行将为您提供行号和对该特定单元格的视图的引用。在您的视图中，您可以使用该类添加一个属性，以便稍后打开该活动。这将需要一个自定义视图类和一个自定义适配器来填充它。

或者，如果您的列表很简单，您可以创建一个匹配行顺序的类数组。

```
Class[] classes = new Class[2];
        classes[0] = Integer.class;
        classes[1] = View.class; 
```

然后您可以使用行号来获取正确的类引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:58:05.287

编辑：

你的代码应该是这样的

```
public class Options extends Activity implements OnItemClickListener {

    Wizer wizer;
    BroadcastReceiver receiver;
    IntentFilter filter;
    HashMap<String,Class> map=new HashMap<String,Class>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_options);
        wizer.Wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        filter=new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION);

        registerReceiver(rcver,filter );

        map.put("List available networks .",Networks.class);
        map.put("List APs .", AP.class);     // your second class name
        map.put("List Networks according to thier signal strength .",Signal.class); // third class name 
  }
     final BroadcastReceiver rcver = new BroadcastReceiver() {

         @Override
         public void onReceive(Context context, Intent intent) {

         };

};
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_options, menu);
        return true;
    }

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub
        Class c= map.get(arg0.getItemAtPosition(arg2).toString());
        Intent NL =new Intent(Options.this,c);
        startActivity(NL);
    }
} 
```

* * *

试试这个

取一个 HashMap

```
HashMap<String,Class> map=new HashMap(String,Class);

map.put("List available networks .",Networks.class);
map.put("List APs .", Second.class);     // your second class name
map.put("List Networks according to thier signal strength .",Third.class); // third class name 
```

然后在 onItemClick

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

    Class c= map.get(arg0.getItemAtPosition().toString());
    Intent NL =new Intent(Options.this,c);
    startActivity(NL);
} 
```

**注意**：当您的项目较少时，不要使用 ListView，而是使用带有滚动视图的 LinearLayout

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T17:34:21.783

这是答案：我必须在列表声明之后添加它

```
list.setOnItemClickListener(this); 
```

# python - 使用 Pandas 将名称替换为来自单独文件的索引

> ID：16108423
> 
> 赞同：1
> 
> 时间：2013-04-19T15:42:47.090
> 
> 标签：python, indexing, pandas

我有一个节点和一个边缘列表，如下所示：

```
Id   Label   Type
1   fie      gnome
2   fou      giant
3   fim      gnome
4   fee      dwarf

Source   target  Weight
fie   fou   2
fie   fim   2
fou   fee   2
fee   fim   3 
```

如何用节点文件中的索引替换源文件和目标文件中的名称？

最终输出应该是：

```
Source target   Weight
1      2        2
1      3        2
2      4        2
4      3        3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:10:47.470

我可能会构建一个`dict`from `nodes.Label`and `nodes.Id`，然后将它传递给`replace()`或 to `applymap`。例如：

```
>>> weight.stack().replace(dict(zip(nodes.Label, nodes.Id))).unstack()
  Source target Weight
0      1      2      2
1      1      3      2
2      2      4      2
3      4      3      3
>>> d = dict(zip(nodes.Label, nodes.Id))
>>> weight.applymap(lambda x: d.get(x,x))
   Source  target  Weight
0       1       2       2
1       1       3       2
2       2       4       2
3       4       3       3 
```

* * *

一些解释。首先，我们从 DataFrames 开始：

```
>>> nodes
   Id Label   Type
0   1   fie  gnome
1   2   fou  giant
2   3   fim  gnome
3   4   fee  dwarf
>>> weight
  Source target  Weight
0    fie    fou       2
1    fie    fim       2
2    fou    fee       2
3    fee    fim       3 
```

然后我们使`dict`我们想要替换的东西：

```
>>> d = dict(zip(nodes.Label, nodes.Id))
>>> d
{'fou': 2, 'fim': 3, 'fee': 4, 'fie': 1} 
```

不幸的是`.replace()`，它不像你想象的那样在 DataFrame 上工作，因为它适用于行和列，而不是元素。但我们可以`stack`并`unstack`解决这个问题：

```
>>> weight.stack()
0  Source    fie
   target    fou
   Weight      2
1  Source    fie
   target    fim
   Weight      2
2  Source    fou
   target    fee
   Weight      2
3  Source    fee
   target    fim
   Weight      3
dtype: object
>>> weight.stack().replace(d)
0  Source    1
   target    2
   Weight    2
1  Source    1
   target    3
   Weight    2
2  Source    2
   target    4
   Weight    2
3  Source    4
   target    3
   Weight    3
dtype: object
>>> weight.stack().replace(d).unstack()
  Source target Weight
0      1      2      2
1      1      3      2
2      2      4      2
3      4      3      3 
```

或者，或者，我们可以只使用`lambda`and `applymap`。字典有一个`get`接受默认参数的方法，因此`somedict.get(k, 'default value goes here')`会查找键`k`，如果找到键则返回相应的值，否则返回第二个参数。所以`d.get(x, x)`要么更改`x`为字典中的相应值，要么返回`x`并不管它。因此：

```
>>> weight.applymap(lambda x: d.get(x,x))
   Source  target  Weight
0       1       2       2
1       1       3       2
2       2       4       2
3       4       3       3 
```

PS：如果您只想将替换应用于某些列，则相同的基于 dict 的方法将起作用，但您必须限制应用程序。例如，如果您想换一种方式，您可能不希望`2`weight 列中的 变为`fou`。

# javascript - 很简单，如何在 Google Docs Script、mailapp.sendmail(message)、Javascript 中使用变量

> ID：16108424
> 
> 赞同：1
> 
> 时间：2013-04-19T15:42:50.167
> 
> 标签：javascript, google-apps-script, sendmail, google-docs

我想在 Google 的示例中使用变量，但标准替换不起作用。诀窍是什么？ [https://developers.google.com/apps-script/reference/mail/mail-app#sendEmail(对象)](https://developers.google.com/apps-script/reference/mail/mail-app#sendEmail(Object))

（我在 Stackoverflow.com 代码块设置方面遇到问题，所以那里的建议也会有所帮助：在每行手动输入 4 个空格？真的吗？）

[下面：上面缺少代码，因为每行添加 4 个空格很痛苦]

```
to_01 = "email@example.com"
subject_01 = s.getRange('B2').getValues();

 MailApp.sendEmail({
 to: to_01, //<<<<<<<does not work
 subject: subject_01, //<<<<<<does not work
 htmlBody: "wind today Logo <br> <img src='cid:googleLogo'> images! <br>" +
           "and later YouTube Logo <img src='cid:youtubeLogo'>",
 inlineImages:
   {
     googleLogo: googleLogoBlob,
     youtubeLogo: youtubeLogoBlob
   }
});
} 
```

# database - django 如何使用外键获取数据库中的用户 ID

> ID：16108425
> 
> 赞同：0
> 
> 时间：2013-04-19T15:42:52.627
> 
> 标签：database, django, userid

我想在用户填写表格时自动获取数据库中的用户 ID，但我不知道我必须做什么。我整天都在努力，我试图通过隐藏的输入来做到这一点，但我不是解决方案。

这是我的代码：

```
 class ImputationForm(forms.Form):

    user = forms.ModelChoiceField(queryset=User.objects.all(),  widget=forms.HiddenInput())

    morning = forms.BooleanField( required=False)
    afternoon = forms.BooleanField(required=False)
    workpackage = forms.ModelChoiceField(
                                        queryset=Workpackage.objects.all()
                                        )

class ImputationFormModel(ModelForm): 

    class Meta:
        model = Imputation

def imputation(request):

        if request.method == 'POST': # If the form has been submitted...
            form = ImputationForm(request.POST) # A form bound to the POST data 
            f =   ImputationFormModel(request.POST)  

            if form.is_valid(): # All validation rules pass
                user = request.user.id
                morning = form.cleaned_data['morning']
                afternoon = form.cleaned_data['afternoon']
                workpackage = form.cleaned_data['workpackage']
                f.save()

                return render_to_response( 'no/form.html', {'form' :  form, }, context_instance=RequestContext(request))
        else:
            form = ImputationForm()

        return render_to_response( 'no/form.html', {'form' :  form, }, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:14:58.973

好问题。让我们首先从识别应用程序的各行代码的用途开始，看看我们是否能理解它。我看到您现在有两个表格似乎引用了相同类型的数据，这有点多余。我们希望尽可能避免冗余，所以让我们从清理代码开始吧。

我们可以通过您共享的代码来判断您正在尝试：

1.  允许用户提交包含“上午”、“下午”和“工作包”数据的表单。

2.  我们不会检查您是否正在编辑实例，因此我们可以假设在成功提交表单后，将在数据库中创建一个新的 Imputation 记录，并将数据传递到其中。

3.  您要求`user`在客户端输入一个隐藏的值，它将提交的用户 ID 绑定到表单，以便将与用户的关系添加到新保存的 Imputation 记录。

通常，您绝不希望允许与客户端上的用户相关联的敏感或个人数据的隐藏变量。它被认为是一个巨大的安全风险。用户可以使用 Firebug（或其他 DOM 编辑工具）编辑隐藏字段并将用户 ID 绑定到与预期不同的用户。

话虽如此，现在让我们看一下代码：

```
class ImputationForm(ModelForm): 

    class Meta:
        model = Imputation
        fields = [
            'morning',
            'afternoon',
            'workpackage'
        ]

    # assumed fields of morning, afternoon, workpackage

def imputation(request):

        if request.method == 'POST': # If the form has been submitted...

            form = ImputationForm(request.POST) # A form bound to the POST data 

            if form.is_valid(): # All validation rules pass
                form.user = request.user
                form.save()

                return render_to_response( 'no/form.html', {'form' :  form, }, context_instance=RequestContext(request))
        else:
            form = ImputationForm()

        return render_to_response( 'no/form.html', {'form' :  form, }, context_instance=RequestContext(request)) 
```

使用此代码，我们不再询问用户他的 ID 在表单上是什么，我们甚至不再在表单中询问它。我们允许 Django 确定当前用户 ID 是什么，并在保存表单之前将其传递给模型。您需要确保该`user`字段`null=True, blank=True`在模型上设置为，以避免引发异常。

我希望这有助于回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:34:31.973

我发现我真的是 django 的新手，很抱歉打扰你，非常感谢你的帮助，如果没有你，我不会改变我对这个问题的思考方式！！！！！！这是我改变的：

```
def imputation(request):

    if request.method == 'POST': # If the form has been submitted...

        form = ImputationForm(request.POST) # A form bound to the POST data 

        if form.is_valid(): # All validation rules pass
            #print("%s" % form.user)
            print("%s" % form)
            new = form.save(commit=False) #here
            new.user = request.user #here
            new.save() #here 
```

再次感谢 ;）

# adapter - 使用无线适配器 Windows 7 的网桥

> ID：16108430
> 
> 赞同：1
> 
> 时间：2013-04-19T15:43:03.787
> 
> 标签：adapter, wireless, bridge

netsh 网桥显示适配器没有给我任何结果是正常的吗？我正在使用我的个人笔记本电脑的无线适配器。也许这是正常的，是因为我的适配器不允许混杂模式？

如何检查我的无线接口是否允许混杂模式？谢谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T09:55:57.480

使用**netsh bridge show adapter**，您只能显示已桥接的适配器，而不是可桥接**的**适配器。当前的 Microsoft Windows 操作系统（Windows 7、Windows 8）仅允许在 GUI 模式下创建桥接适配器和将适配器添加到桥接。

例如，不支持命令**netsh bridge install 。**甚至根本没有**netsh bridge add**或**netsh bridge remove**命令。

如果您想要基于命令行的工具，请查看[Network Bridging Utility](https://sourceforge.net/projects/networkbridgingutility/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T15:26:15.627

[http://www.intel.com/support/network/sb/CS-004185.htm](http://www.intel.com/support/network/sb/CS-004185.htm)

是的，所有当前销售的英特尔® PRO/100、英特尔® PRO/1000、英特尔® Gigabit、英特尔® PRO/10 Gigabit 和英特尔® 10 Gigabit 适配器都支持混杂模式。需要网络管理代理或其他软件（例如“网络嗅探器”）来告诉操作系统打开混杂模式支持。用户无法启用或禁用支持。

# ios - 浮点数和双精度数有什么区别？

> ID：16108431
> 
> 赞同：20
> 
> 时间：2013-04-19T15:43:07.090
> 
> 标签：ios, objective-c

当我运行以下代码时，

```
NSString* s= @"10000000.01";
float f = [s floatValue];
double d = [s doubleValue];

if(f > 10000000)
{
    NSLog(@"Over Value");
}
else {
    NSLog(@"OK Float");
}

if(d > 10000000)
{
    NSLog(@"Over value");
}
else {
    NSLog(@"OK Double");
} 
```

响应如下。

```
2013-04-19 17:07:29.284 float[2991:907] OK Float
2013-04-19 17:07:29.287 float[2991:907] Over value 
```

为什么浮点值更改为 10000000.00 而不是 10000000.01 ？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-19T15:45:50.330

`float`是 32 位，`double`而是 64 位。浮点数的有效数字少于双精度数。

一个`float`值不能存储足够的 10 位数字`10000000.01`。

另请参阅[float 和 double 之间的区别](https://stackoverflow.com/questions/2386772/difference-between-float-and-double)了解更多详细信息。那是关于 C/C++ 的，但它也适用于 Objective-C。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-10-13T05:30:07.183

**双倍的**

1.  表示一个 64 位浮点数。
2.  具有至少 15 位十进制数字的精度。

**漂浮**

1.  Float 表示一个 32 位浮点数。
2.  Float 的精度可以低至 6 位十进制数字。

要使用的适当浮点类型取决于您需要在代码中使用的值的性质和范围。在任何一种类型都适用的情况下，Double 是首选。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-04T17:42:49.583

精确

*   Float - 32 位（7 位）浮点精度
*   Double - 64 位（15 位）浮点精度
*   一位分配给有符号位。

内存要求

*   浮点数 - 4 个字节
*   双 - 8 个字节

范围

*   浮动 - 在 1.2E-38 到 3.4E+38 内
*   双 - 在 2.3E-308 到 1.7E+308 内

# c# - 获取每个日期的总记录

> ID：16108432
> 
> 赞同：1
> 
> 时间：2013-04-19T15:43:07.957
> 
> 标签：c#, linq, group-by

我有一个简单`List`的客户记录：

```
Customer
  Name
  Age
  DateTimeOfThing 
```

使用 Linq，我需要知道每天有多少客户，什么时候`DateTimeOfThing`是`DateTime`.

像这样的东西：

```
1-April-2013     23
2-April-2013     3
3-April-2013     123 
```

我的来源是这样的：

```
var myList = new List<Customer>() .... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T15:47:29.590

```
var res = myList
    .GroupBy(z => z.DateTimeOfThing.Date)
    .Select(z => new
    {
        Count = z.Count(),
        Date = z.Key
    }); 
```

# xml - 如何在 XML 中指定命名空间和模式位置？

> ID：16108434
> 
> 赞同：3
> 
> 时间：2013-04-19T15:43:13.560
> 
> 标签：xml, xsd, xml-namespaces

我的目标是创建一个正确引用描述结构的 XSD 文件的 XML，而这两个文件都使用命名空间（通过在`xmlns`属性中设置默认命名空间来创建 XML）。

我可以`xsi:noNamespaceSchemaLocation`在 XML 中指定属性，并且它至少在某些验证器中有效（例如[http://www.validome.org/xml/validate/](http://www.validome.org/xml/validate/)）。但是当我尝试添加命名空间时，验证器会返回错误（例如：找不到元素“note”的声明。）

我准备的测试文件的最终版本附在下面。我用`xmllint`这样的方式测试了它：

```
xmllint example.xml --schema example.xsd 
```

它有效，但我在参数中指定了模式位置。我的问题是：XML 文件是否正确引用了 XSD，是否正确使用了命名空间？为什么验证器返回错误？

示例.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<note
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="example.xsd"
        xmlns="http://example/note"
>
        <from>Jacek</from>
        <to>Agatka</to>
        <body>Kocham cię!</body>
</note> 
```

例子.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema
       xmlns:xsd="http://www.w3.org/2001/XMLSchema"
       xmlns="http://example/note"
       targetNamespace="http://example/note"
>
       <xsd:element name="note">
               <xsd:complexType>
                       <xsd:sequence>
                               <xsd:element ref="from"/>
                               <xsd:element ref="to"/>
                               <xsd:element ref="body"/>
                       </xsd:sequence>
               </xsd:complexType>
      </xsd:element>

      <xsd:element name="from" type="xsd:string"/>

      <xsd:element name="to" type="xsd:string"/>

      <xsd:element name="body" type="xsd:string"/>

</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T20:19:33.140

该`schemaLocation`属性还应指定命名空间：

```
<?xml version="1.0" encoding="utf-8"?>
<note
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://example/note example.xsd"
  xmlns="http://example/note">
  <from>Jacek</from>
  <to>Agatka</to>
  <body>Kocham cię!</body>
</note> 
```

[请参阅此处](http://msdn.microsoft.com/en-us/library/ms256100.aspx)的文档。

# c# - Windows Service start then stops immediately

> ID：16108438
> 
> 赞同：4
> 
> 时间：2013-04-19T15:43:24.733
> 
> 标签：c#, visual-studio-2010, visual-studio, c#-4.0, windows-services

I've created a windows service that creates a Form in which a tool strip icon is created to manage a socket. I'm able to install through an installer created in Visual Studio, but when I go to Services and start my service it gives me an error saying it started and stopped immediately.

Here's the service code:

```
public Service()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        base.OnStart(args);

        ServiceName = "WizardServer";
        CanPauseAndContinue = false;
        CanHandleSessionChangeEvent = true;
        CanStop = true;

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        try
        {
            connectionHandler = new ConnectionHandler();  
            serviceThread = new System.Threading.Thread(new ThreadStart(serviceTarget));
            alive = true;
            serviceThread.Start();
        }
        catch {}
    }

    private void serviceTarget()
    {
        Application.Run(new Form1(connectionHandler));

        while (alive) 
        {
            Thread.Sleep(10000);
        }
    }

    protected override void OnStop()
    {
        base.OnStop();

        try
        {
            connectionHandler.stop();
        }
        catch {}

        serviceThread.Abort();

        alive = false;
        Stop();
    } 
```

PS: I've tested the form and it works just fine.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-30T07:33:27.150

我遇到了这个问题，在谷歌上搜索了好几个小时，然后我找到了解决方案。您可以在代码中添加以下代码。添加`InitializeTimer()`你的类构造函数。你应该 Set`oTimer.Enabled = true`和`oTimer.Start()`on`OnStart()`和`oTimer.Stop()`on `OnStop()`。

代码：

```
 void create()
    {
        string s = "";
    }
    void InitializeTimer()
    {
        oTimer = new System.Timers.Timer(interval);
        oTimer.AutoReset = true;
        oTimer.Enabled = true;
        oTimer.Elapsed += new System.Timers.ElapsedEventHandler(oTimer_Elapsed);
    }

    void oTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        CreateFileData();
    }

    void CreateFileData()
    {
        string path = @"C:\SimpleWcfService\SimpleWindowsService\bin\Release\Singh.txt";
        StreamWriter oStreamWriter = new StreamWriter(path, true);
        oStreamWriter.WriteLine(DateTime.Now.ToString());
        oStreamWriter.Close();
        oStreamWriter = null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-05T15:44:08.440

我回答这个问题的时间太晚了，但希望这会帮助其他遇到同样问题的人：

更改 Windows 服务项目属性中的“输出类型”为我修复了它。

1.  在解决方案资源管理器中，找到您的项目并双击“属性”
2.  在打开的窗口中，转到“应用程序”选项卡
3.  将“输出类型”下的值更改为“控制台应用程序”

# ruby-on-rails - 当我运行 gem list rails 时出现两个版本的 rails

> ID：16108439
> 
> 赞同：0
> 
> 时间：2013-04-19T15:43:27.550
> 
> 标签：ruby-on-rails, ruby, rvm

我刚刚安装了 ruby​​ 和 rails。当我运行“ruby -v”命令时，它会显示当前安装的 ruby​​ 版本。同样，我也需要检查 rails 的版本。由于 rails 是使用 RVM 安装的，因此“rails -v”命令不起作用。当我运行“gem list rails”命令时，它显示了两个版本的 rails。但是当我尝试“which rails”命令时，什么也没有发生。请帮助查找已安装的 rails 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:53:35.073

您是否尝试将其运行到您的控制台中：

```
$ rails --version 
```

无法从这里进行测试，但我很确定它`--version`与导轨有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:57:26.447

如果您想知道特定应用程序正在运行哪个版本，您只需打开 Gemfile 即可查看。应该是第一行之一。

# java - 如何将一个范围划分为 n 个相等的 bin？

> ID：16108441
> 
> 赞同：3
> 
> 时间：2013-04-19T15:43:39.890
> 
> 标签：java, algorithm, data-structures

我有一个范围*[min-max]*。*min*和*max*是类型`double`。我想把这个间隔分成n个相等的间隔。（n是一个整数）。我怎样才能在 Java 中实现这一点？

例如：说我有一个范围`[10-50]`。和`n=4`。输出应该是一个范围列表，例如`[10-20] [20-30][30-40] [40-50]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:52:50.487

所以你需要的是一个较小范围限制的公式。首先让我们从计算每个小范围的长度开始：

```
// let range be [start, end]
// let the number of smaller ranges be n
double total_length = end - start;
double subrange_length = total_length/n; 
```

之后，对较小的范围进行一个简单的循环，将当前范围的左端移动到上面每一步计算的值：

```
double current_start = start;
for (int i = 0; i < n; ++i) {
  System.out.printl("Smaller range: [" + current_start + ", " + (current_start + subrange_length) + "]");
  current_start += subrange_length;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:00:35.280

如果以具有两个元素（最小值和最大值）的数组的形式给出 Range

```
double[] range = new double[] {min, max};
int n = 4; 
```

你可以这样试试。您从中得到的`divideRange`是一个二维数组，其中包含给定范围的子范围，每个子范围都具有所需的长度。

```
public double[][] divideRange(double[] range, n) {
    double[][] ranges = new double[n][2];
    double length = (range[1] - range[0])/n;
    ranges[0][0] = range[0];
    ranges[0][1] = range[0]+length;
    for(int i = 1; i < n; i++) {
        ranges[i][0] = ranges[i-1][1];
        ranges[i][1] = ranges[i-1][1]+length;
    }

    return ranges;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:51:21.203

您可以做的是使用@Achintya 使用的内容，`double dist = (double)(max-min)/n;`然后从最小值开始，将 dist 添加到它，这就是您的第一个间隔的最大值。

所以它会是这样的： `[min, min + dist], [min + dist, min + 2*dist]...`直到`min + n*dist >= max.`

```
int counter = 0;
while(true) {
    CreateInterval(min + counter*dist, min + (counter+1)*dist);
    if (min+(counter+1)*dist >= max) {
         //if we have reached the max, we are done
         break;
    }
} 
```

# javascript - Filter DOM elements via JavaScript

> ID：16108442
> 
> 赞同：1
> 
> 时间：2013-04-19T15:43:46.140
> 
> 标签：javascript, jquery

I have elements that get created like this:

```
function appendCalendarEventToList(className, event) {

        var eventObject = {
            title: event.title,
            id: event.id,
            type: event.type,
            color: event.color,
            description: event.description,
            canReoccur: event.canReoccur,
            reoccurVal: event.reoccurVal,
            estHours: event.estHours,
            project: event.project
        };

        var div = document.createElement("div");
        div.className = 'external-event';
        div.style.background = event.color;
        div.innerHTML = event.title;

        // store the Event Object in the DOM element so we can get to it later
        $(div).data('eventObject', eventObject);

        $(div).draggable({
            helper: function () {
                $copy = $(this).clone();
                $copy.data('eventObject', eventObject);
                $copy.css({ "list-style": "none", "width": $(this).outerWidth() }); return $copy;
            },
            appendTo: 'body',
            zIndex: 999,
            revert: true,      // will cause the event to go back to its
            revertDuration: 0  //  original position after the drag
        });

        $(className).append(div);

       $(div).qtip({
            content: event.title,

            position:
                {
                    target: 'mouse'
                },
            //  show: { event: 'click' },
            hide: { event: 'mousedown mouseleave' },
            style: {
                classes: 'custSideTip',
                width: 200,
                padding: 5,
                color: 'black',
                textAlign: 'left',
                border: {
                    width: 1,
                    radius: 3
                }
            }
        });

        return div;
    } 
```

Every event has a project attribute as you see.

However there are projects and tasks (and cases that can be ignored):

```
function refetchUnscheduled() {
    $.ajax({
        type: "POST",
        url: "CalendarServices.aspx/GetUnscheduled",
        data: '',
        async:false,
        success: function (data) {
            var projects = '.project-container';
            var tasks = '.task-container';
            var cases = '.case-container';
            $(projects).html('');
            $(tasks).html('');
            $(cases).html('');

            var numProjects = 0;
            var numTasks = 0;
            var numCases = 0;

            $.each(data, function () {
                var className = '';
                var url = '';
                var typeName = '';
                var crm = this.crm;
                switch(this.type)
                {
                    case 'p':
                        className = projects;
                        url = 'ProjectViewFrame.aspx?id=' + this.id;
                        typeName = 'Project';
                        numProjects++;
                        break;
                    case 't':
                        className = tasks;
                        url = 'TaskViewFrame.aspx?id=' + this.id;
                        typeName = 'Task';
                        numTasks++;
                        break;
                    case 'c':
                        className = cases;
                        url = 'CaseViewFrame.aspx?id=' + this.id;
                        typeName = 'Case';
                        numCases++;
                        break;
                    default:
                }

                var curDiv = appendCalendarEventToList(className, this);
                var curEvent = this;

                $(curDiv).bind('contextmenu', function (e) {
                    $('#contextMenuContainer').html('');
                    var btn1 = createLink('Edit ' + typeName, 'context-elem-name');
                    $('#contextMenuContainer').append(btn1);
                    $(btn1).on('click', function () {
                        if (crm == '')
                            showCalendarModal('Edit ' + typeName, url);
                        else
                            showCRM(crm);

                    })

                    prepContextMenu(e);

                    return false;
                });
            });

            changeUnscheduledHeaders();
        }
       ,
        error: function () {

        }
    });

} 
```

Here is what I need that I am unsure how to do:

I need an OR based filter: Given the following:

```
function filter(criteria,projects-div,tasks-div)
{

   var words = criteria.split(' ');
} 
```

I need to first, hide all projects whos obj.data('eventObject').title contains one or more words.

Then, once these are filtered: I need to first show all tasks whos project is visible,

So: obj.data('eventObject').project is == to one of the visible project's project property.

Then, I need to also show any tasks that have any of the words.

All comparing must be case insensitive too.

So say my criteria is 'hello world'

```
I show all projects with hello or world  in the title.
I show all tasks whos project attribute is visible after the first step
I show all tasks whos title has hello or world 
```

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T08:25:41.960

我在手机上，但乍一看，怎么[`[].filter.call (NodeList, filterFn)`](http://api.jquery.com/filter/)办？

# python - Drawing a hollow asterisk square

> ID：16108446
> 
> 赞同：3
> 
> 时间：2013-04-19T15:43:54.190
> 
> 标签：python

I'm trying to figure out how to turn my *whole* square into a hollow one. The few things I've tried so far haven't been very successful as I end up getting presented with a rather distorted triangle!

This is the code I have to form my square currently ..

```
size = 5
for i in range(size):
    print ('*' * size) 
```

When run, this is the result ..

```
*****
*****
*****
*****
***** 
```

Do I need to run `if` or `while` statements when `size` is greater than 3 to specify a condition?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T15:48:56.453

我认为这是你想要做的：

```
m, n = 10, 10
for i in range(m):
    for j in range(n):
        print('*' if i in [0, n-1] or j in [0, m-1] else ' ', end='')
    print() 
```

输出：

```
**********
*        *
*        *
*        *
*        *
*        *
*        *
*        *
*        *
********** 
```

你也可以这样画一个三角形：

```
m, n = 10, 10
for i in range(m):
    for j in range(n):
        print('*' if i in [j, m-1] or j == 0 else ' ', end='')
    print() 
```

输出：

```
*         
**        
* *       
*  *      
*   *     
*    *    
*     *   
*      *  
*       * 
********** 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T15:45:15.020

您可以打印出一个`'*'`，后跟`size-2`空格，然后是一个`'*'`. 这将为您提供“空心”部分。第一行和最后一行需要全长：

```
size = 5
inner_size = size - 2
print ('*' * size)
for i in range(inner_size):
    print ('*' + ' ' * inner_size + '*')
print ('*' * size) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-10T18:08:28.727

这是我的 python 代码，用于按输入的大小 N 绘制正方形。

```
n = int(input())
print('*' * n)
for i in range(n-2):
    print ('*' + ' ' * (n-2) + '*')
print('*' * n) 
```

基本上第一个和最后一个`print('*' * n)`是绘制顶线和底线，for 循环打印主体。

输出示例：N=3

```
***
* *
*** 
```

输出示例：N=5

```
*****
*   *
*   *
*   *
***** 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-19T11:08:31.577

尝试这个：

```
size = 5
for i in range(1,size+1):
    if (i==1 or i==size):
        print("*"*size)
    else:
        print("*"+" "*(size-2),end="")
        print("*") 
```

输出：

```
*****
*   *
*   *
*   *
***** 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-23T11:50:45.453

```
size = int(input('Enter the size of square you want to print = '))
for i in range(size):           # This defines the rows
    for j in range(size):       # This defines the columns
        print('*' , end=' ')    # Printing * and " end=' ' " is giving space      after every * preventing from changing line
    print()                     # Giving a command to change row after every column in a row is done

print()                         # Leaving one line
for k in range(size):           # This defines the rows
    print('* ' *size)           # Defines how many times * should be multiplied 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-11T15:18:45.740

不错的python库，可以做到这一点......

术语形状 - [https://github.com/zvibazak/termshape](https://github.com/zvibazak/termshape)

```
from termshape import get_rectangle 
print(get_rectangle(10, 5)) 
```

```
* * * * * * * * * *
*                 *
*                 *
*                 *
* * * * * * * * * * 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-18T10:21:22.367

这是我的 python 3.6 代码，用于使用列大小和行大小输入绘制正方形：

```
column = int(input("Enter column size : "))
row = int(input("Enter row size : "))
print('* ' * column)
print(('* ' + "  " * (column-2)+ '*'+'\n')*(row -2) + ('* ' * column)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-17T15:45:01.683

这是我的例子：

```
print("Enter width")
width = int(input())
print("Enter height")
height = int(input())

for i in range(height):
    if i in[0]:
        print("* "*(width))
    elif i in[(height-1)]:
        print("* "*(width))
    else:
        print("*"+"  "*(width-2)+" *")

input() 
```

输出：[图片链接](https://i.stack.imgur.com/8aWrz.png)

希望这可以帮助其他所有人，他们想在星号之间留下空格，同时打印一个矩形，如果我的代码中有任何错误，请告诉我，因为我自己是一个初学者。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-18T10:54:46.947

**您还可以使用这种简单的方法绘制三角形：**

n = int(input("enter num")) for i in range (n+1):

```
if 2>=i :
    print (i * "*")
elif n == i:
    print ("*" * i)
else:
    print ("*"+" "*(i-2)+"*") 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-01T23:59:25.047

> 在此代码中，有 2 个 for 循环，此循环将创建边。而“else statements”表示如果我们的点不在边缘代码将打印空字符（“”）。“i == 0”显示上边缘，“i == length - 1”显示下边缘。“j == 0”将是左边，我想你可以猜到“j == length - 1”和“print()”是什么。

```
def emptySquare(length,char):
    for i in range(length):
        for j in range(length):
            if (i == 0 or i == length-1 or j == 0 or j == length-1):
                print(char,end=" ")
            else:
                print(" ",end=" ")
        print() 
```

# kendo-ui - 如何在剑道树视图中嵌套剑道窗口？

> ID：16108447
> 
> 赞同：0
> 
> 时间：2013-04-19T15:43:55.883
> 
> 标签：kendo-ui, kendo-treeview, kendo-asp.net-mvc

我正在尝试在树视图中嵌套一个窗口。我想要它，以便当用户选择特定节点时，它将打开一个剑道窗口。有人做过吗？我在演示类似内容的演示中看不到太多。

我正在使用 mvc 包装器。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:12:04.187

树节点的 Onclick 事件

叫这个

```
$("tree node").click(function(){
 KendoDialog("Window TItle", "Content in the window", 700, 350);
});

function KendoDialog(windowTitle, message, windowWidth, windowHeight) {
    var WindowElement = $("#kwDialog").data("kendoWindow");
    WindowElement.setOptions({
        width: windowWidth,
        height: windowHeight,
        title: windowTitle
    });
    WindowElement.content("<b>" + message + "</b>");
    WindowElement.center().open();
} 
```

把它放在你的布局中的某个位置

```
@(Html.Kendo().Window()
            .Name("kwDialog")
            .Title("Alert!")
            .Modal(true)
            .Visible(false)
           ) 
```

# java - Java Object be super of my class?

> ID：16108448
> 
> 赞同：2
> 
> 时间：2013-04-19T15:44:00.483
> 
> 标签：java, object, inheritance

I'm new on Java, reading the Sun basic tutorial and see "The Object class, defined in the java.lang package, defines and implements behavior common to all classes—including the ones that you write. " I wonder how can Object be the root parent of the class I defined if my class did not inherit from other classes.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T15:45:55.557

如果您继续阅读[同一页](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html) （强调我的）：

> 除了`Object`没有超类之外，每个类都有一个且只有一个直接超类（单一继承）。**在没有任何其他显式超类的情况下，每个类都是隐式的子类`Object`**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T15:45:54.993

这是一种隐含的行为。您的所有类都扩展了 Object （直接或不直接）。

`public class MyClass`相当于`public class Myclass extends Object`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T15:46:21.043

这就是 Java 编译器完成的“魔法”：当你编写

```
public class MyClass {
    ...
} 
```

Java 编译器将其视为

```
public class MyClass extends java.lang.Object {
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T16:04:35.093

它之所以这样工作，是因为[Java 语言规范（特别是第 8.1.4 节）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.4)是这样说的：

> 给定 C<F [1] ,...,F [n > (n ≥ 0, C ≠ Object) 的（可能是通用的）类声明，类类型 C<F] [1] ,...,F [n] >的直接超类`extends`如果存在 extends 子句，则为 C 声明的子句中给出的类型，`Object`否则。

# razor - Actions with the same parameters in MVC 4 and Razor

> ID：16108451
> 
> 赞同：1
> 
> 时间：2013-04-19T15:44:11.243
> 
> 标签：razor, asp.net-mvc-4

In my Controller I have two Actions, the POST action is called when a combo is changed or the update button is pressed. This is working correctly.

When I do a Create, I use a `return RedirectToAction("Index")` if the create was successful.

Here is where the problem starts. I need that the combo in the index get the selectedvalue of the id used in the create, but I cannot pass another parameter in the Index action, because the POST Action already has one.

How can I pass a parameter to the GET Action and update the combo, with the selectedvalue from the Create Action?

I tried to use a "Return View()", it worked but not as expected.

These are the Actions:

```
[HttpGet]
public ActionResult Index()
{
    ViewBag.ID_CONTRATO = new SelectList(db.CAT_CONTRATOS.Where(t => (t.BAJA == null || t.BAJA == false)), "ID_CONTRATO", "CONTRATO");
    ViewBag.listado = Enumerable.Empty<CAT_CONCEPTOS>();
    return View();
}

[HttpPost]
public ActionResult Index(int Contrato = 0)
{
    if (Contrato == 0)
    {
        ViewBag.ID_CONTRATO = new SelectList(db.CAT_CONTRATOS.Where(t => (t.BAJA == null || t.BAJA == false)), "ID_CONTRATO", "CONTRATO");
        ViewBag.listado = Enumerable.Empty<CAT_CONCEPTOS>();
    }
    else
    {
        ViewBag.ID_CONTRATO = new SelectList(db.CAT_CONTRATOS.Where(t => (t.BAJA == null || t.BAJA == false)), "ID_CONTRATO", "CONTRATO", Contrato);
        var cat_conceptos = db.CAT_CONCEPTOS.Include(c => c.CAT_CONTRATOS).Where(t => ((t.BAJA == null || t.BAJA == false) && (t.ID_CONTRATO == Contrato)));
        ViewBag.listado = cat_conceptos;
    }
    return View();
}

[HttpPost]
public ActionResult Create(CAT_CONCEPTOS cat_conceptos)
{
    if (ModelState.IsValid)
    {
        using (TransactionScope scope = new TransactionScope())
        {
            db.CAT_CONCEPTOS.Add(cat_conceptos);
            db.SaveChanges();
            TransaccionesController t = new TransaccionesController();
            t.Transaccionar("CAT_CONCEPTOS", "Create", cat_conceptos.ID_CONCEPTO, "Se creo un concepto");

            scope.Complete();
            return RedirectToAction("Index");
        }
    }

    ViewBag.ID_CONTRATO = new SelectList(db.CAT_CONTRATOS.Where(t => (t.BAJA == null || t.BAJA == false)), "ID_CONTRATO", "CONTRATO", cat_conceptos.ID_CONTRATO);
    return View(cat_conceptos);
} 
```

And the View:

```
@model IEnumerable<SAC.Models.CAT_ACTIVOS>
@{
string controlador = ViewContext.RouteData.Values["Controller"].ToString();    
}
@section head{
<link href="@Styles.Url("~/content/DataTables/css")" rel="stylesheet"/>
}
@{
ViewBag.Title = "Activos";
}

<h2>@ViewBag.Title</h2>

<div class="row-fluid">
<div class="span12">
    <div class="row-fluid">
        @using (Html.BeginForm("Index", "Activos"))
        {
            <div class="span9">
                @Html.DropDownList("Contrato", (SelectList)ViewBag.ID_CONTRATO, "Seleccione un Contrato", new { @class = "span12", onchange = @"var form = document.forms[0]; form.submit();" })
            </div>
            <div class="span1">
                <button type="submit" class="btn btn-danger span12"><i class="icon-refresh"></i></button>
            </div>
            <div class="span2">
                @Html.ActionLink("Agregar", "Create", @controlador, new { @class = "btn btn-danger span12" })
            </div>
        }
    </div>
</div>
</div>
@Html.Partial("Shared/_GridActivos", (IEnumerable<SAC.Models.CAT_ACTIVOS>)ViewBag.listado)

@section JavaScript{
@Scripts.Render("~/Scripts/DataTables/js")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:49:29.583

这是 TempData 派上用场的情况之一，作为在重定向期间存储该信息的一种方式。

```
TempData["MyId"] = t.ID;
return RedirectToAction("Index"); 
```

然后，在您的索引操作中：

```
if (TempData["MyId"] != null) {
    // Retrieve ID and object from the database to load the model.
} else {
    // Your existing code.
} 
```

根据模型的大小和可序列化性，您甚至可以将创建的模型对象存储在 TempData 中并在 Index.xml 中检索它。

# c - Nzec error on codechef despite putting a return 0

> ID：16108456
> 
> 赞同：1
> 
> 时间：2013-04-19T15:44:24.663
> 
> 标签：c

I've written the following code for a codechef problem. Everytime I submit I get a NZEC error. Any ideas?

```
 #include<stdio.h>
       int main()
       {

           int n=0,s=0;
           int a[2001][2001]={0},i=0,k=0,c=0;
           scanf("%d%d",&n,&s);
           for(i=0;i<s;i++)
           {
                scanf("%d",&c);
                for(k=0;k<c;k++)
                {
                    scanf("%d",&a[i][k]);
                }
           }
           printf("%d\n",s);
           for(i=0;i<s;i++)
                printf("%d\n",i); 
           return 0;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:06:24.097

Your array is created in the stack, which might be too small for it.

Essentially in multi-threaded applications, each thread will have its own stack. But, all the different threads will share the heap.

So in your `int main()` function when you define the array you are actually creating it in the stack (it's the "main thread"). If you move it outside of the function and define it globally, it will be created in the heap.
*(This is a bit more complicated than what I've just described, e.g. if you create an object using the `new` keyword inside a function it will be created in the heap etc. but I won't be explaining that now)*

You can check the stack size by using `ulimit -s`.

Also note that the stack is generally faster than the heap because of the way memory is allocated.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:49:13.270

`int a[2001][2001]`堆栈太大，将其声明为全局变量。

```
int a[2001][2001]={0};
int main()
{
    int n=0,s=0;
    int i=0,k=0,c=0;
    scanf("%d%d",&n,&s);
    /* etc. */
} 
```

# jsf - rich:progressBar currentValue 不能与 For-Loop 一起使用？

> ID：16108457
> 
> 赞同：0
> 
> 时间：2013-04-19T15:44:27.430
> 
> 标签：jsf, richfaces, progress-bar

在 RichFaces 4.1 中，ManagedBean 中的 rich:progressBar 'currentValue' 不会使用 for 循环进行更新。

进度条.xhtml

```
 <h:form id="formProgress">
        <h:commandLink action="#{progressBarBean.startProcess}" value="click here"/>

        <rich:progressBar mode="ajax" value="#{progressBarBean.currentValue}" interval="1000" id="pb"
            enabled="#{progressBarBean.enabled}" minValue="0" maxValue="100">

            <h:outputText value="Retrieving #{progressBarBean.currentValue} of #{progressBarBean.totalRecords}" />
        </rich:progressBar>

    </h:form> 
```

豆

```
package ap;
import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean
@ViewScoped
public class ProgressBarBean implements Serializable {

    private static final long serialVersionUID = 8775622106408411357L;

        private boolean enabled = false;

        private Integer totalRecords;
        private Integer currentValue;;

        public String startProcess() {
            setEnabled(true);
            setTotalRecords(100);
            return null;
        }

        public Integer getCurrentValue() {
            if (isEnabled()) {
                for(currentValue=0;currentValue < totalRecords;) {
                    currentValue++;
                }
            }
            return currentValue;
        }

        public boolean isEnabled() {
            return enabled;
        }

        public void setEnabled(boolean enabled) {
            this.enabled = enabled;
        }

        public Integer getTotalRecords() {
            return totalRecords;
        }

        public void setTotalRecords(Integer totalRecords) {
            this.totalRecords = totalRecords;
        }
} 
```

当我单击“单击此处”链接时，currentValue 更新得非常快，并且突然达到 totalRecords 到 100。它没有以增量方式更新（for循环中的现值）。该方法返回的当前值不会更新进度条。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:09:08.580

有两个问题：您的 Java 代码没有执行您希望它执行的操作，并且您没有告诉页面更新（这不会自动发生）。

再看一遍`getCurrentValue()`：它`currentValue`从 0 递增到 100 并返回结果为 100。`#{progressBarBean.currentValue}`不关心（或知道）变量发生了什么，它只关心`getCurrentValue()`方法的结果。

所以为了让这一切正常工作，它必须看起来像这样：

## 页

```
<a4j:commandLink action="#{progressBarBean.startProcess}" value="click here" render="pb" execute="@this"/>
    <rich:progressBar mode="ajax" value="#{progressBarBean.currentValue}" interval="1000" id="pb"
        enabled="#{progressBarBean.enabled}" minValue="0" maxValue="100">
        <a4j:ajax event="begin" listener="#{progressBarBean.increment}" render="text"/>

        <h:outputText value="Retrieving #{progressBarBean.currentValue} of #{progressBarBean.totalRecords}" id="text" />
    </rich:progressBar> 
```

`a4j:ajax`每秒触发一次（即每个间隔），它递增并`currentValue`更新文本。

您还需要`a4j:commandLink`（或`a4j:ajax`在内部`h:commandLink`）才能重新呈现进度条 - 在您的示例中，您在 bean 中启用了进度条，但页面上的值不会改变。

## 豆

```
public Integer getCurrentValue() {
    return currentValue;
}

public void increment() {
    if (isEnabled() && currentValue < totalRecords) {
        currentValue++;
    }
} 
```

问有什么不清楚的。

# php - Error: number of bound variables does not match number of tokens

> ID：16108459
> 
> 赞同：3
> 
> 时间：2013-04-19T15:44:28.950
> 
> 标签：php, pdo, rowcount

I want to make an insert only if there's no correspondence in the db (mySQL) but he makes me not the statement. Here's the snippet

```
 if ($sql->rowCount() > 0) {
        echo 'Non inserisci';
    } else {
        echo 'Inserisci';
        $db->beginTransaction();
        echo 'Ciao3';
        $sql = $db->prepare("INSERT INTO contatti (nome,cognome) VALUES (?,?)") or die('Ciao2');
        echo 'Ciao4';
        $sql->execute(array($_POST['nome'],$_POST['cognome']));
        echo 'Ciao5';
        $db->rollBack();
    } 
```

Where The SELECT is

```
 $db->beginTransaction();
    $sql = $db->prepare("SELECT * FROM contatti WHERE nome = ? AND cognome = ? WHERE nome = ? AND cognome = ?") or die ('Ciao1');
    $sql->execute(array($_POST['nome'],$_POST['cognome']));
    $db->rollBack(); 
```

Can you explain me where's the fault?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T15:48:29.890

错误在于算术

让我们计算令牌：

```
 SELECT * FROM contatti WHERE nome = ? // one
                       AND cognome = ? // two
                        WHERE nome = ? // three
                       AND cognome = ? // four 
```

现在让我们计算绑定变量的数量：

```
array($_POST['nome'], // one
      $_POST['cognome']) // two 
```

4显然不等于2。那就是问题所在

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-19T15:47:50.470

看来你在这里做了太多的复制/粘贴：

```
$sql = $db->prepare("SELECT * FROM contatti WHERE nome = ? AND cognome = ? WHERE nome = ? AND cognome = ?") or die ('Ciao1'); 
```

应该只是

```
$sql = $db->prepare("SELECT * FROM contatti WHERE nome = ? AND cognome = ?") or die ('Ciao1'); 
```

^(你已经把`WHERE`条款加倍了。)

# asp.net - 使用 CKEditor 保存多个内联编辑

> ID：16108461
> 
> 赞同：0
> 
> 时间：2013-04-19T15:44:35.220
> 
> 标签：asp.net, ajax, ckeditor, inline

我正在使用 asp.net，我想使用 CKEditor 的内联编辑功能编辑时事通讯，然后将时事通讯保存到数据库并通过电子邮件发送。

我看过各种关于从页面上的内联编辑器的单个实例获取数据的帖子。

例如oleq对内联编辑的Dan Temple问题的回答。 [如何在服务器上保存内联编辑器内容？](https://stackoverflow.com/questions/13922002/ckeditor-inline-edit)

但是，我希望有一个类似于 ckeditor 站点上的内联演示的时事通讯，其中包含可以编辑的不同样式的多个区域。 [http://ckeditor.com/demo#inline](http://ckeditor.com/demo#inline)

然后我猜想使用 ajax 从编辑器的每个单独实例中整理数据并保存到数据库中。

任何帮助将不胜感激。

非常感谢。卢克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T16:25:04.027

我相信这正是您正在寻找的： [ckeditor inline save/submit](https://stackoverflow.com/questions/13603575/ckeditor-inline-save-submit)

您可能需要更改一些内容以使其适合您。如果您正在编写有效的 HTML，那么我建议您使用 Nokogiri 之类的东西来搜索和替换页面元素 id 的内容，而不是像这个答案那样使用正则表达式。

# ios - 在 iOS 上移动或复制大文件 (> 100 MB) 的最可靠方法是什么？

> ID：16108463
> 
> 赞同：1
> 
> 时间：2013-04-19T15:44:38.703
> 
> 标签：ios, objective-c, filesystems, nsfilemanager

现在我正在使用这种方法在 iOS 中移动非常大的文件：

```
[fileManager moveItemAtURL:srcURL toURL:toURL error:&error]; 
```

这是来自 NSFileManager 的方法。因为文件太大，我尝试移动它们而不是复制然后删除源文件。

有没有更安全的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:50:34.773

文件移动是一个非常轻量级的操作；它不涉及复制任何内容，因为它只是将目录条目从文件系统中的一个点移动到另一个点。

应该是相当安全的。

如果你真的*很想*偏执，那么：

*   将所有字节从 A 复制到 B
*   验证 B 是连贯的
*   删除 A

这就是写入/复制 API 的“原子”变体在幕后所做的，除了验证部分之外，因为文件系统本身应该这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T15:50:38.880

你所做的是正确和有效的。移动文件（如果移动到同一个文件系统）基本上是即时的。但是复制和删除很慢。请注意，将文件移动到不同的文件系统实际上是通过复制和删除来完成的。

# php - 如何使用 PHP 加入和回显 2 个不同的 MongoDB 集合？

> ID：16108465
> 
> 赞同：0
> 
> 时间：2013-04-19T15:44:41.607
> 
> 标签：php, mongodb

如何使用 PHP`join`和2 个不同的 MongoDB 集合？`echo`

在 MYSQL 中（使用 PHP）

```
$query=mysql_query("SELECT U.username, P.post FROM users U, posts P WHERE u.user_id=p.user_id_fk") or die(mysql_error());
while($result=mysql_fetch_array($query)){
 echo $result['username'];
 echo $result['post'];
} 
```

在 MongoDB 中（使用 PHP）？？？

# javascript - d3.js zooming only works when cursor over pixels of graph

> ID：16108471
> 
> 赞同：6
> 
> 时间：2013-04-19T15:45:00.653
> 
> 标签：javascript, svg, d3.js

I am trying to implement the zooming feature on a dendrogram in the simplest, most basic way and have gotten it to work. The only issue is that the zoom event only works when the cursor is over an edge, a node, or text. How do I allow zooming when the cursor is on any portion of the svg?

```
var margin = {top: 20, right: 120, bottom: 20, left: 120},
    width = 2000 - margin.right - margin.left,
    height = 2000 - margin.top - margin.bottom;

var x = d3.scale.linear()
    .domain([0, width])
    .range([0, width]);

var y = d3.scale.linear()
    .domain([0, height])
    .range([height, 0]);

var tree = d3.layout.tree()
    .size([height, width])
    .separation(function(a, b) { return (a.parent == b.parent ? 1 : 2) / a.depth; });

var diagonal = d3.svg.diagonal()
    .projection(function(d) { return [d.y, d.x]; });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.right + margin.left)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .attr("pointer-events", "all")
    .append('svg:g')
    .call(d3.behavior.zoom()
        .x(x)
        .y(y)
        .scaleExtent([1,8])
        .on("zoom", zoom))
    .append('svg:g');

function zoom(d) {        
  svg.attr("transform",
      "translate(" + d3.event.translate + ")"
      + " scale(" + d3.event.scale + ")");
}

d3.json("flare.json", function(error, root) {
  var nodes = tree.nodes(root),
      links = tree.links(nodes);

  var link = svg.selectAll(".link")
      .data(links)
    .enter().append("path")
      .attr("class", "link")
      .attr("d", diagonal);

  var node = svg.selectAll(".node")
      .data(nodes)
    .enter().append("g")
      .attr("class", "node")
 //     .attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")translate(" + d.y + ")"; })
      .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; })

  node.append("circle")
      .attr("r", 4.5);

  node.append("text")
      .attr("dy", ".31em")
      .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
//      .attr("transform", function(d) { return d.x < 180 ? "translate(8)" : "rotate(180)translate(-8)"; })
      .text(function(d) { return d.name; });

    });

d3.select(self.frameElement).style("height", "800px"); 
```

I have been using the following jsfiddle as a guide and cannot see where the difference is: [http://jsfiddle.net/nrabinowitz/QMKm3/](http://jsfiddle.net/nrabinowitz/QMKm3/)

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:32:38.550

你在你的问题中指向的jsfiddle有这个......

```
vis.append('svg:rect')
    .attr('width', w)
    .attr('height', h)
    .attr('fill', 'white'); 
```

这样可以确保无论您身在何处，总有一些东西被绘制出来。您需要相应地调整代码。如果您不喜欢白色，则可以将其设置为不透明度 0，然后您将看不到它，但它确实需要存在。

# php - Codeigniter 删除 .php 并路由到 index.php

> ID：16108476
> 
> 赞同：0
> 
> 时间：2013-04-19T15:45:18.877
> 
> 标签：php, .htaccess, codeigniter

如果用户关注此网址：

```
http://localhost/events/info.php 
```

如何通过 htaccess 删除 .php 扩展名，以便将用户路由到 index.php 和我的事件控制器到 Info 函数？我基本上想创建 301 重定向。

```
http://localhost/events/info 
```

我有旧的索引链接，我需要重定向到我的控制器功能，所以我没有得到 404。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:04:08.203

利用

```
RewriteEngine On
RewriteRule ^events/info/$ index.php [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:28:48.877

可以使用 301 重定向来实现`.htaccess`

```
Redirect 301 events/info.php http://localhost/events/info 
```

您可能会发现[此工具](http://www.htaccessredirect.net/)对生成重定向很有用。

* * *

如果您只想将 URL: 路由[到](http://ellislab.com/codeigniter/user-guide/general/routing.html)`http://localhost/events/info.php`控制器中的`info`函数`events`，那么您不必从 URL*中*删除`.php`，您可以在.`application/config/routes.php`

```
$route['events/info.php'] = 'events/info'; 
```

如果您还没有，那么您还必须删除`index.php`，[CodeIgniter 的用户指南解释了如何执行此操作。](http://ellislab.com/codeigniter/user-guide/general/urls.html)

如果您想`.php`从所有 URL 中删除以使它们看起来更干净，那么有很多可用资源，包括[SO 上的其他答案](https://stackoverflow.com/a/9635748/604532)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:04:49.037

您使用的是什么版本的 CI？

通常我们已经有了这样的没有.php

```
http://localhost/events/info 
```

路由到 index.php（在视图文件夹中）：你只需要在你的控制器文件中这样做。

**控制器/事件.php**

```
function info(){
 redirect('events/index');
}

function index()
{
 $this->load->view('index.php');
} 
```

# java - Java - Strings and the substring method

> ID：16108477
> 
> 赞同：3
> 
> 时间：2013-04-19T15:45:19.847
> 
> 标签：java, string, object, substring, allocation

I have some question that I wonder about. I know that string are immutable in Java and therefore a new string object is created rather than changed when for example assigning to a existing string object.

Now to my question. Let's suppose that I have the following piece of code:

```
String a = "Hello World";
String b = "Hello World";

String res = a.substring(0,4) + b.substring(6,10); 
```

How many string objects will be created by the code at line 3 ? Will each call to substring create a new string object ? Will my code above generate 3 new string objects ?

Thanks in advance

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T15:52:54.083

**Java 中的字符串是不可变的**。基本上这意味着，一旦您创建了一个字符串对象，您将无法修改/更改字符串的内容。因此，如果您对“似乎”更改字符串内容的字符串对象执行任何操作，Java 将创建一个新的字符串对象，并对新创建的对象执行操作。

基于此，您上面的代码似乎创建了五个字符串对象 - 两个由声明创建，两个通过调用创建`substring`，最后一个在连接两个部分后创建。

然而，不变性导致了另一个有趣的结果。JVM 内部维护着一个类似字符串池的东西，用于创建字符串文字。为了节省内存，JVM 将尝试使用该池中的字符串对象。每当您创建一个新的字符串字面量时，JVM 都会循环到池中以查看是否可以使用任何现有的字符串。如果有，JVM 将简单地使用它并返回它。

因此，从技术上讲，在 Java 7 之前，JVM 只会为您的整个代码创建一个字符串对象。即使您的`substring`调用也不会在池中创建新的字符串对象，它将使用现有的“Hello World”对象，但在这种情况下，它只会使用位置 0 到 3 的字符来首次调用子字符串。从 Java 7 开始， substring 不会共享字符，而是会创建一个新字符。因此，总对象数将为 4 - 最后一个将通过两个子字符串的连接创建。

**编辑** 要在评论中回答您的问题，请查看[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.9)-

> 在 Java 编程语言中，与 C 不同，char 数组不是 String，String 或 char 数组都不会以 '\u0000'（NUL 字符）结尾。
> 
> String 对象是不可变的，也就是说，它的内容永远不会改变，而 char 数组具有可变元素。
> 
> String 类中的 toCharArray 方法返回一个字符数组，该数组包含与 String 相同的字符序列。StringBuffer 类在可变字符数组上实现了有用的方法。

所以，不，char 数组在 Java 中不是不可变的，它们是可变的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:48:54.757

文字a是新创建的并保存在池中。文字b引用a，它不会创建新的。

第 3 行将创建 3 个新字符串，因为子字符串创建一个新字符串，并且每次连接都会创建新字符串。

[字符串子字符串（int beginIndex，int endIndex）](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int,%20int%29)

> 返回一个新字符串，它是该字符串的子字符串。子字符串从指定的 beginIndex 开始并延伸到索引 endIndex - 1 处的字符。因此子字符串的长度是 endIndex-beginIndex。

# maven - Class not found CallableProcessingInterceptor: migrated to 3.1.4

> ID：16108478
> 
> 赞同：0
> 
> 时间：2013-04-19T15:45:20.993
> 
> 标签：maven, spring-3

Stack trace:

```
SEVERE: Servlet /tsl threw load() exception
java.lang.ClassNotFoundException: org.springframework.web.context.request.async.CallableProcessingInterceptor
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getConstructor0(Class.java:2699)
    at java.lang.Class.newInstance0(Class.java:326)
    at java.lang.Class.newInstance(Class.java:308)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:119)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1062)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1010)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4935)
    at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5262)
    at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5257)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

have no idea about this..same project with maven is giving this error and without using maven works fine..

updatepolicy is never in pom.xml

pom.xml

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
      <modelVersion>4.0.0</modelVersion>
      <groupId>tundra</groupId>
      <artifactId>tsl</artifactId>
      <version>0.0.1-SNAPSHOT</version>
      <packaging>war</packaging>
        <build>
            <sourceDirectory>src/main/java</sourceDirectory>
            <testSourceDirectory>src/test/java</testSourceDirectory>
            <plugins>
                <plugin>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.3.2</version>
                    <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>2.14.1</version>
                    <configuration>
                        <testFailureIgnore>true</testFailureIgnore>
                    </configuration>
                </plugin>
            </plugins>
            <resources>
                <resource>
                    <directory>src/main/resources</directory>
                    <includes>
                        <include>**</include>
                    </includes>
                </resource>
                <resource>
                    <directory>src/test/resources</directory>
                    <includes>
                        <include>**</include>
                    </includes>
                </resource>
            </resources>
        </build>
        <repositories>
            <repository>
                <id>jboss-public-repository-group</id>
                <name>JBoss Public Maven Repository Group</name>
                <url>https://repository.jboss.org/nexus/content/groups/public-jboss/</url>
                <layout>default</layout>
                <releases>
                    <enabled>true</enabled>
                    <updatePolicy>never</updatePolicy>
                </releases>
                <snapshots>
                    <enabled>true</enabled>
                    <updatePolicy>never</updatePolicy>
                </snapshots>
            </repository>
        </repositories>
        <pluginRepositories>
          <pluginRepository>
            <id>jboss-public-repository-group</id>
            <name>JBoss Public Maven Repository Group</name>
            <url>https://repository.jboss.org/nexus/content/groups/public-jboss/</url>
            <layout>default</layout>
            <releases>
              <enabled>true</enabled>
              <updatePolicy>never</updatePolicy>
            </releases>
            <snapshots>
              <enabled>true</enabled>
              <updatePolicy>never</updatePolicy>
            </snapshots>
          </pluginRepository>
        </pluginRepositories>
     <dependencies>
            <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-ws-test</artifactId>
            <version>2.1.2.RELEASE</version>
            <type>jar</type>
            <scope>test</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.1.4.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.3.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.3.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.3.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jms</artifactId>
            <version>3.1.4.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-webflow</artifactId>
            <version>2.3.2.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-js</artifactId>
            <version>2.3.2.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-binding</artifactId>
            <version>2.3.2.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>          
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-taglibs</artifactId>
            <version>3.1.3.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>3.1.4.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>          
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.1.4.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>          
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.1.4.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
            <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.4.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.1.4.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.1.4.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>3.1.4.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-ws-core</artifactId>
            <version>2.1.2.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>3.1.4.RELEASE</version>
            <type>jar</type>
            <scope>compile</scope>
            <optional>false</optional>
        </dependency>
</dependencies>
</project> 
```

was working fine with spring 3.0.5..right after migrating to 3.1.4 this error shows up..some questions and articles says it is in 3.2.x that where I am confused..not using anything higher than 3.1.4..any suggestion is greatly appreciated!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T18:41:16.690

[这个问题](https://stackoverflow.com/questions/15427392/erorr-when-deployment-to-tomcat/15427465#15427465)和[这个问题](https://stackoverflow.com/questions/15427392/erorr-when-deployment-to-tomcat)的类似答案- 答案是以下之一：

*   尝试升级到 Spring 3.2.x（存在此类），然后降级到 Spring 3.0.x 或 3.1.x，部署目录中保留了一些旧 JAR 文件
*   您有相互冲突的依赖关系，使用不同版本的 Spring（即一些 3.1 和一些 3.2 依赖项）。这可以通过`mvn dependency:tree`从构建目录运行来确定。寻找有冲突的版本。

事实上，我确实注意到您的项目存在版本冲突的问题，`dependency:tree`确实显示出与某些 Spring 组件的冲突：

```
[INFO] +- org.springframework.security:spring-security-core:jar:3.1.3.RELEASE:compile
[INFO] |  +- org.springframework:spring-aop:jar:3.0.7.RELEASE:compile
[...snip...]
[INFO] +- org.springframework.ws:spring-ws-core:jar:2.1.2.RELEASE:compile
[INFO] |  +- org.springframework.ws:spring-xml:jar:2.1.2.RELEASE:compile
[INFO] |  +- org.springframework:spring-oxm:jar:3.1.3.RELEASE:compile 
```

尽管您尝试包含 Spring 3.1.4.RELEASE，但您可以看到一些组件正在引入不同的版本，因为您没有具体指定它们。

这不会导致这个问题中的问题，但随着时间的推移它可能会导致类似的问题。

# c++ - EXP的并行化

> ID：16108490
> 
> 赞同：2
> 
> 时间：2013-04-19T15:46:01.610
> 
> 标签：c++, mpi, openmp, exp

您认为可以使用多个线程计算指数函数吗？我有一个代码，瓶颈是计算`long double expl( long double )`. 其余的都已经非常并行化了。我尝试了几种近似值，但到目前为止没有任何效果。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:54:26.480

的计算`expl()`很可能是您的瓶颈，但单次评估`expl()`仍然会消耗非常少的时钟周期。执行线程同步的开销将超过并行执行的任何可能收益。

# python - 如何在 PyDev 中使用来自另一个项目的包

> ID：16108493
> 
> 赞同：0
> 
> 时间：2013-04-19T15:46:07.600
> 
> 标签：python, eclipse, pydev, pythonpath

我读过[这个](https://stackoverflow.com/questions/7956157/importing-from-another-project-in-pydev/7961179#7961179)，但它对我不起作用。

这些是我使用的步骤：

1.  右键单击 project1 > 属性 > 项目引用 > 选择 project2R
2.  右键project1 > 属性 > PyDev - PYTHONPATH > 添加源文件夹，但是没有列出project2

如果我手动将 project2 添加到`.pydevproject`，它将替换`project2\src`为`project1\src`.

这真的让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:51:50.357

**只需将包含**您希望使用的任何包的文件夹的路径添加到 PYTHONPATH 环境变量中（如果还没有，则创建一个新的），瞧！

例如，假设您在目录“/path/to/project/src/foo”中有一个名为“foo”的包。只需将“/path/to/project/src”（注意我把“foo”放在路径之外，因为那是我们的包）附加到 PYTHONPATH，然后打开解释器并尝试“import foo”。这也应该适用于 Windows 和 Linux ;)

# java - JSON 异常：JSONObject xxxx 不是 JSONObject

> ID：16108494
> 
> 赞同：0
> 
> 时间：2013-04-19T15:46:08.893
> 
> 标签：java, json, exception, tags

我想使用这个类

[https://code.google.com/p/ext-c/source/browse/trunk/src/nz/ac/vuw/ecs/kcassell/similarity/GoogleDistanceCalculator.java](https://code.google.com/p/ext-c/source/browse/trunk/src/nz/ac/vuw/ecs/kcassell/similarity/GoogleDistanceCalculator.java)

这是我的代码（我的目标是计算我所有标签之间的成对谷歌距离）

```
public static void main(String args[]) throws FileNotFoundException {
   Scanner s = new java.util.Scanner(new File (yyy));
   try {
      GoogleDistanceCalculator googleDistanceCalculator =
         new GoogleDistanceCalculator();
      ArrayList<String>  Alltags = new ArrayList<String>();
      while (s.hasNext()) {
         Alltags.add(s.next());
      }
      ArrayList<Double>  arraysNGD = new ArrayList<Double>();
      for (int i = 0; i < Alltags.size(); i++) {
         for (int j = 0; j < Alltags.size(); j++) {
            if (j!=i)
               arraysNGD.add(
                  googleDistanceCalculator.calculateDistance(
                     Alltags.get(i).trim(), Alltags.get(j).trim()));
         }
      }
   } catch (NumberFormatException e) {
      e.printStackTrace();
   } catch (IOException e) {
      e.printStackTrace();
   }
} 
```

错误

```
org.json.JSONException: JSONObject["responseData"] is not a JSONObject.
  at org.json.JSONObject.getJSONObject(JSONObject.java:508)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.getCountFromGoogleQuery(GoogleDistanceCalculator.java:196)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.getCountFromQuery(GoogleDistanceCalculator.java:173)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.numResultsFromWeb(GoogleDistanceCalculator.java:150)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.calculateDistance(GoogleDistanceCalculator.java:262)
  at test.Zssai.main(Zssai.java:55) 
```

注意

例如，当我尝试

```
googleDistanceCalculator.calculateDistance("forest","plant"); 
```

它工作正常，没有错误

**编辑**

```
nature  sky
  org.json.JSONException: JSONObject["responseData"] is not a JSONObject.
  at org.json.JSONObject.getJSONObject(JSONObject.java:508)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.getCountFromGoogleQuery(GoogleDistanceCalculator.java:196)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.getCountFromQuery(GoogleDistanceCalculator.java:173)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.numResultsFromWeb(GoogleDistanceCalculator.java:150)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.calculateDistance(GoogleDistanceCalculator.java:262)
  at test.Zssai.main(Zssai.java:51)

nature  blue
  org.json.JSONException: JSONObject["responseData"] is not a JSONObject.
  at org.json.JSONObject.getJSONObject(JSONObject.java:508)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.getCountFromGoogleQuery(GoogleDistanceCalculator.java:196)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.getCountFromQuery(GoogleDistanceCalculator.java:173)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.numResultsFromWeb(GoogleDistanceCalculator.java:150)
  at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.calculateDistance(GoogleDistanceCalculator.java:262)
at test.Zssai.main(Zssai.java:51)
    nature  water
    org.json.JSONException: JSONObject["responseData"] is not a JSONObject.
at org.json.JSONObject.getJSONObject(JSONObject.java:508)
at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.getCountFromGoogleQuery(GoogleDistanceCalculator.java:196)
at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.getCountFromQuery(GoogleDistanceCalculator.java:173)
at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.numResultsFromWeb(GoogleDistanceCalculator.java:150)
at nz.ac.vuw.ecs.kcassell.similarity.GoogleDistanceCalculator.calculateDistance(GoogleDistanceCalculator.java:262)
at test.Zssai.main(Zssai.java:51)
    nature  clouds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:18:20.573

问题是

雅虎老板不是免费的

并且 Google 搜索 API 已弃用，因此当我超过此数量时它只允许有限数量的查询我收到错误

```
 org.json.JSONException: JSONObject["responseData"] is not a JSONObject. 
```

所以要解决这个问题我应该使用其他搜索引擎 API

这个 API 可能有用

```
 http://www.sindice.com/ 
```

# c++ - 使属性更容易的宏

> ID：16108496
> 
> 赞同：0
> 
> 时间：2013-04-19T15:46:20.810
> 
> 标签：c++, qt, macros

我正在尝试使用宏来简化 Qt 属性，因此我不需要手动定义读取器和写入器方法以及通知信号：

```
#define PROPERTY(type, name, reader, writer)                                    \
public:                                                                         \
    Q_PROPERTY(type name READ reader WRITE writer NOTIFY name ## Changed)       \
                                                                                \
    type reader() const {                                                       \
        return m_ ## name;                                                      \
    }                                                                           \
                                                                                \
public Q_SLOT:                                                                  \
    void writer(type name) {                                                    \
        m_ ## name = name;                                                      \
        emit name ## Changed(name);                                             \
    }                                                                           \
                                                                                \
private:                                                                        \
        type m_ ## name;                                                        \
                                                                                \
Q_SIGNAL:                                                                       \
    void name ## Changed(type name); 
```

然后我像这样使用它：

```
class Test : public QObject
{
    Q_OBJECT

    PROPERTY(QString, name, name, setName)
} 
```

但是，在链接过程中出现错误：

```
CMakeFiles/weather-desktop.dir/weather/location.o: In function `Weather::Location::setName(QString)':
/home/mspencer/Programs/weather-desktop/src/weather/location.h:37: undefined reference to `Weather::Location::nameChanged(QString)'
collect2: error: ld returned 1 exit status
make[2]: *** [src/weather-desktop] Error 1
make[1]: *** [src/CMakeFiles/weather-desktop.dir/all] Error 2
make: *** [all] Error 2 
```

我认为这是因为 Qt 不支持多个`signals`部分，这是使用我的宏的结果。编写和使用宏来简化 Qt 属性的最佳方法是什么？

**编辑：** 看了[这个问题](https://stackoverflow.com/questions/4119688/macro-expansion-in-moc/14784380#14784380)和[moc 文档](http://qt-project.org/doc/qt-4.8/moc.html#moc)后，我认为这是因为 moc 没有扩展`#defines`。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:16:26.450

我想出了一个简单的[Python 脚本](https://github.com/iBeliever/mkprop)，它将实现您遗漏的任何内容，包括内部变量、getter、setter 和通知信号。关于它如何工作而不是我的原始宏的一个很酷的事情是，如果我想自定义其中一种方法的工作方式，我不需要多个宏。我需要做的就是在类中定义方法，脚本不会生成它。

要使用该脚本，请在类中包含一个名为的特殊标头`<filename>.gen`，如下所示：

```
class Test {
    Q_OBJECT

    Q_PROPERTY(int test READ test)

#include "test.gen"
} 
```

然后，您需要在其上运行`mkprop`：

```
mkprop test.h build/test.gen build/test.h 
```

因为`moc`不搜索包含路径，所以源文件需要和生成的头文件在同一目录下：

```
cp test.cpp build/test.cpp 
```

`build/test.h`并且`build/test.cpp`将是 . 使用的实际代码`moc`。确保将构建添加到包含目录列表中，并添加`build/test.cpp`到源文件列表中。

**注意：**我正在研究一种在 CMake 中自动运行它的方法，但是我很难让 moc 在文件上运行。

# php - SQL 选择的 PHP 输出

> ID：16108500
> 
> 赞同：-3
> 
> 时间：2013-04-19T15:46:34.037
> 
> 标签：php, mysql

我有一个有效的 SQL 选择（感谢王子；））。

我想从此 sql 选择中输出 config_values

我已经尝试过了，但没有成功。谢谢

```
$statistik = "
SELECT config_value
FROM  `phpbb3_config` 
WHERE config_name IN ('num_posts', 'num_topics', 'num_users')
";
$statshow = mysql_query($statistik) or die("Service temporairly unavailable");
$rowstat = mysql_fetch_array($statshow); 
echo $rowstat['num_posts'];
echo $rowstat['num_topics'];
echo $rowstat['num_users']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:49:54.630

应该很简单`echo $rowstat['config_value']`。您没有选择`num_posts`、`num_topics`和`num_users`列，因此这些 echo 语句不会输出任何内容。

**编辑：**要输出多行，请更改`$rowstat = mysql_fetch_array($statshow);`为遍历结果集中每一行的循环，如下所示：

```
while ( $rowstat = mysql_fetch_array($statshow) ) {
    echo $rowstat['config_value'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:45:09.220

更好的方法是同时回显与值一起使用的选项名称，如下所示：

```
$statistik = "
SELECT config_value, config_name
FROM  `phpbb3_config` 
WHERE config_name IN ('num_posts', 'num_topics', 'num_users')
";
$statshow = mysql_query($statistik) or die("Service temporairly unavailable");

while ($rowstat = mysql_fetch_assoc($statshow)) {
    echo($rowstat['config_name'] . " - " . $rowstat['config_value']);
} 
```

并考虑使用 mysqli 驱动程序而不是旧的 mysql 驱动程序，该驱动程序计划从 PHP 的未来版本中删除。

# python - 如何打开在 Windows 上选择了指定项目的文件夹

> ID：16108503
> 
> 赞同：2
> 
> 时间：2013-04-19T15:46:41.530
> 
> 标签：python, windows, winapi, python-2.7, python-3.x

我想打开一个在 Windows 上选择了指定项目的文件夹。我查阅了 Windows Shell Reference 并找到了适合这项工作的函数：[SHOpenFolderAndSelectItems](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762232%28v=vs.85%29.aspx)。

但是，我找不到如何在 Python 中使用它的示例。有人知道我该怎么做吗？

我还有一个额外的要求：如果该文件夹已经打开，请不要再次打开它，只需激活它并选择文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:37:09.787

使用 PyWin32 你可以做这样的事情，默认情况下它应该只是激活并选择已经打开的文件：

```
from win32com.shell import shell, shellcon
import win32api

folder = win32api.GetTempPath()
folder_pidl=shell.SHILCreateFromPath(folder,0)[0]
desktop = shell.SHGetDesktopFolder()
shell_folder = desktop.BindToObject(folder_pidl, None, shell.IID_IShellFolder)
items = [item for item in shell_folder][:5]
## print (items)
shell.SHOpenFolderAndSelectItems(folder_pidl, items, 0) 
```

[http://mail.python.org/pipermail/python-win32/2012-September/012531.html](http://mail.python.org/pipermail/python-win32/2012-September/012531.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:37:31.323

也许您可以尝试使用 subprocess.Popen 通过 Python 运行 shell 命令。查看此线程以获取更多信息：[如何使用 subprocess popen Python](https://stackoverflow.com/questions/12605498/how-to-use-subprocess-popen-python)

# rest - REST architecture - handle data processing in model or controller?

> ID：16108509
> 
> 赞同：2
> 
> 时间：2013-04-19T15:46:54.843
> 
> 标签：rest, model-view-controller, architecture

I have an MVC web-app with a REST endpoint that receives JSON formatted data which needs to be parsed, validated and persisted to the database. The REST endpoint is mapped to a controller function.

What I need to know is where the parsing, validation and persistence should take place. Should it be done in the controller function that is mapped to the REST endpoint or should I be using the controller to simply route the data to the model layer for processing? What is the recommended way of handling this scenario?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:50:02.387

通常，您希望您的模型在独立于表示的级别上运行。因此，您通常希望在视图或控制器中完成解析；与验证、计算和持久性相关的任务应该在模型中完成。

这些操作的数据应该以独立于表示的方式提供。例如，如果您的 RESTful 服务使用 XML 输入，则视图或控制器应处理解析。模型应该看到已解析输入的对象表示。这将让您通过提供不同的视图来简单地切换表示 - 例如，您将能够更改您的服务以处理 JSON 输入，而无需接触您的模型。

请注意，这是 MVC 职责分工的一部分，在 RESTful 架构之外也是如此。

# php - PHP recursively traverse object tree

> ID：16108512
> 
> 赞同：4
> 
> 时间：2013-04-19T15:47:01.483
> 
> 标签：php, recursion

I have got a $branch object that can contain other $branch objects:

```
$branch->children(); 
```

Each of them can have $apples as children.

```
$branch->apples(); 
```

How can I collect all of the $apples from the $branch recursively?

```
function collectApples($branch){
    $apples = array();
    ?
    return $apples;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:49:46.680

[使用DFS](https://en.wikipedia.org/wiki/Depth-first_search)收集特定分支的所有苹果：

```
function collectApples($branch) {
    $apples = $branch->apples();
    foreach ($branch->children() as $child) {
        $apples = array_merge($apples, collectApples($child));
    }
    return $apples;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:46:02.797

```
function collectApples($branch) {
    $apples = $branch->apples();
    foreach ($branch->children() as $child) 
        $apples = array_merge($apples, collectApples($child));
    return $apples;
} 
```

@TimCooper 的答案~~只会让您获得第一代孩子，而对他的答案的这种轻微修改~~将为您提供所有孩子和孩子的孩子的苹果（根据我对问题的阅读，这就是我理解您所需要的）。

您可以在此处查看示例：http: [//phpfiddle.org/main/code/9dk-zjc](http://phpfiddle.org/main/code/9dk-zjc)

**编辑注意：**在写这个答案时@TimCooper 的答案并不完整——现在它们是相同的。

# haskell - Haskell 在函数中调用函数

> ID：16108516
> 
> 赞同：2
> 
> 时间：2013-04-19T15:47:23.353
> 
> 标签：haskell

我有一个名为 bounds1Accum 的函数。这个功能很好用

```
bounds1Accum ::  [Integer] -> Integer -> Integer -> (Integer, Integer)
bounds1Accum l min max = (minimum (min:l), maximum (max:l)) 
```

我遇到的问题是我需要另一个名为 bounds1 的函数，它只接受一个列表并返回一个最小最大对。这个函数应该环绕 bounds1accum 并首先检查传递给它的列表是否为空。如果列表为空，它将返回 Nothing 或仅返回调用 bounds1Accum 函数的结果。

我需要两个箱子，我有我的签名

```
bounds1 :: [l] -> Maybe(min,max)
bounds1 [] = Nothing (which I am unsure if this will be correct) 
```

然后第二种情况是我最初遇到的困难

```
bounds1 l  min max  = if null l then Nothing else Just $ bounds1 bounds1Accum min max 
```

但这甚至没有编译，所以如果有人可以提供建议或其他方式我可以查看这个问题，那就太好了。这是一个作业，所以我不想要答案，但更多的是指导或帮助解决问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:58:00.327

在第二种情况下，您没有`min`and`max`作为参数。您必须从列表中获取这些值。

是不必要的`if`，因为您已经在第一种情况下处理了空列表。

为什么`bounds1`在使用之前有`bounds1Accum`？

# android - ImageView not stretching (Android)?

> ID：16108517
> 
> 赞同：4
> 
> 时间：2013-04-19T15:47:23.417
> 
> 标签：android, xml, imageview, android-relativelayout

I have an ImageView inside a RelativeLayout. the ImageView's source is a .png file. The problem is that android is not scaling the image up or down when tested on devices with different resolutions. I read in the android documentation that android automatically scales the image up or down to fill the screen, but this is not happening. What could be the problem? I'm new to android, sorry if this question is dumb, I searched a lot but couldn't find a solution.

EDIT: The XML:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
     >

<ImageView
        android:id="@+id/imageview1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:layout_centerInParent="true"
        android:clickable="false"
        android:scaleType="fitXY"
        android:contentDescription="@string/p"

        android:src="@drawable/example" />
</RelativeLayout> 
```

EDIT 2: The XML layout I need to stretch:

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:theme="@android:style/Theme.Black.NoTitleBar" 
    android:gravity="center">

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:clickable="false"

        android:contentDescription="@string/p"

        android:src="@drawable/volbar" />

    <ImageView

        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="false"
        android:layout_alignParentLeft="true"
        android:contentDescription="@string/p"

        android:src="@drawable/head" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="33dp"
        android:layout_marginRight="19dp"
        android:text="@string/press_to_update" />

    <ImageView
        android:id="@+id/imageView9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView2"
        android:clickable="false"
              android:contentDescription="@string/p"

        android:src="@drawable/frag11"
         />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"

        android:layout_below="@+id/imageView9"
        android:clickable="false"
        android:contentDescription="@string/p"

        android:src="@drawable/base" />
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T15:49:22.313

`android:scaleType="fitXY"`在布局中使用

**编辑**

如果您希望图像占据整个屏幕，请使用

```
 android:layout_width="match_parent"
    android:layout_height="match_parent" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:52:06.117

参考这个，

**

```
<ImageView
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:background="@drawable/ic_launcher"
                ***android:scaleType="fitXY"***
                android:layout_alignParentRight="true"
                /> 
```

**

[ImageView 不会填充父级](https://stackoverflow.com/questions/11510804/imageview-wont-fill-parent)

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:34:01.253

```
android:layout_width="match_parent"

android:layout_height="match_parent"

 > 
```

```
 android:id="@+id/imageview1"

    android:layout_width="match_parent"

    android:layout_height="match_parent"

    android:clickable="false"

    android:contentDescription="@string/p"

    android:background="@drawable/example" /> 
```

# hadoop - Running a map reduce job as a different user

> ID：16108522
> 
> 赞同：4
> 
> 时间：2013-04-19T15:47:50.390
> 
> 标签：hadoop, credentials

I have a web application which interacts with Hadoop. (Cloudera cdh3u6) A particular user operation should launch a new Map Reduce job in the cluster.

The cluster is not a secure cluster, but it uses simple group authentication - so if I ssh to it as myself, I can launch MR jobs from the command line.

In the web application, I'm using the `ToolRunner` to run my job:

```
MyMapReduceWrapperClass mr = new MyMapReduceWrapperClass();
ToolRunner.run(mr, null);

// inside the run implementation of my wrapper class : 
Job job = new Job(conf, "job title");
//set up stuff removed
job.submit(); 
```

Currently this job is submitted as the user that launched the web application server (Tomcat) process, and that user is a special local account on this web server that doesn't have permissions to send jobs to the cluster.

Ideally I'd like to be able to get some kind of identity from the user and pass it along, so that as different users were interacting with the web app / service we could see who was invoking what jobs. Skipping over the issues of how to actually coordinate those credential services, I'm not even clear on where it would go.

I see that on a `Job` I have a `getCredentials()` option, but from reading about the token / Kerberos stuff in there I have the impression that this is for secured clusters (which I think we are not) - not to mention I don't think my webserver has Kerberos installed. That could be fixed though. But it also sounds like the intended use case is to add secrets that a map reduce job might want while running to access other services - and not about running the job as someone else.

I also see that on the (older?) `JobConf` class I have the ability to `setUser(String name)` which seems promising - even though I don't know where it would require a password or something - but I can't find much information or documentation on that function. I tried it out and it had no impact - the job was still submitted as the Tomcat user.

Are there other avenues to explore or research? I am out of key words to Google. I would prefer to not have the option "Just give your tomcat user permissions on the cluster" - I don't manage that asset and I don't expect that request to fly. If however that literally is my only option I'd like to understand why that is, so that I can argue the need, having the right information.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T16:05:58.460

您可以`UserGroupInformation`像这样使用该类：

```
UserGroupInformation ugi = UserGroupInformation.createRemoteUser(username);
ugi.doAs(new PrivilegedExceptionAction<MyMapReduceWrapperClass>() {
    public Object run() throws Exception {
        MyMapReduceWrapperClass mr = new MyMapReduceWrapperClass();
        ToolRunner.run(mr, null);
        return mr;
    }
}); 
```

# knockout.js - Knockoutjs does not update value when select options changed

> ID：16108525
> 
> 赞同：6
> 
> 时间：2013-04-19T15:47:59.390
> 
> 标签：knockout.js

Problem is when select options got changed value is not being updated.

So when I change Honda to Toyota, options in second select got changed fine, but selectedModel observable not. I must have missed something.

JavaScript:

```
function ViewModel() {
    var self = this;

    self.selectedMake = ko.observable()
    self.selectedModel = ko.observable()

    self.makes = ["Honda", "Toyota"];
    self.models = ko.computed(function () {
        if (self.selectedMake() === "Honda") return ["CRV", "Accord"];
        if (self.selectedMake() === "Toyota") return ["Rav4", "Camry"];
        return [];
    });
}
$(function () {
    ko.applyBindings(new ViewModel());
}); 
```

HTML:

```
<select data-bind="value: selectedMake, options: makes"></select>
<select data-bind="value: selectedModel, options: models"></select>
<p>Selected make: <b data-bind="text:selectedMake"></b></p>
<p>Selected model: <b data-bind="text:selectedModel"></b></p> 
```

JS Fiddle: [http://jsfiddle.net/apuchkov/n4VyD/](http://jsfiddle.net/apuchkov/n4VyD/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-26T13:49:43.900

[在GitHub 上](https://github.com/SteveSanderson/knockout/issues/935#issuecomment-17061341)得到了答案。如果有人会发现这个问题，请在此处重新发布。

这是绑定顺序很重要的情况。请参阅[http://knockoutjs.com/documentation/binding-syntax.html#notes_for_multiple_bindings_on_a_single_element](http://knockoutjs.com/documentation/binding-syntax.html#notes_for_multiple_bindings_on_a_single_element)

```
<select data-bind="options: makes, value: selectedMake"></select>
<select data-bind="options: models, value: selectedModel"></select> 
```

jsFiddle：http: [//jsfiddle.net/n4VyD/4/](http://jsfiddle.net/n4VyD/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:54:27.590

我不确定为什么它不能按原样工作，但如果您设置了模型订阅，您可以手动更改所选模型。

```
function ViewModel() {
    var self = this;

    self.selectedMake = ko.observable()
    self.selectedModel = ko.observable()

    self.makes = ["Honda", "Toyota"];
    self.models = ko.computed(function () {
        if (self.selectedMake() === "Honda") return ["CRV", "Accord"];
        if (self.selectedMake() === "Toyota") return ["Rav4", "Camry"];
        return [];
    });

    self.models.subscribe(function(value) {
        self.selectedModel(value[0]);
    });
}

$(function () {
    ko.applyBindings(new ViewModel());
}); 
```

[小提琴](http://jsfiddle.net/n4VyD/2/)

# python - How to obtain the total numbers of rows from a CSV file in Python?

> ID：16108526
> 
> 赞同：145
> 
> 时间：2013-04-19T15:48:01.813
> 
> 标签：python, csv, count

I'm using python (Django Framework) to read a CSV file. I pull just 2 lines out of this CSV as you can see. What I have been trying to do is store in a variable the total number of rows the CSV also.

**How can I get the total number of rows?**

```
file = object.myfilePath
fileObject = csv.reader(file)
for i in range(2):
    data.append(fileObject.next()) 
```

I have tried:

```
len(fileObject)
fileObject.length 
```

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2013-04-19T15:51:48.960

您需要计算行数：

```
row_count = sum(1 for row in fileObject)  # fileObject is your csv.reader 
```

使用`sum()`生成器表达式可以提高计数器的效率，避免将整个文件存储在内存中。

如果您已经阅读了 2 行，那么您需要将这 2 行添加到总数中；已经读取的行不被计算在内。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2016-05-02T01:46:33.087

# 2018-10-29 编辑

谢谢你的意见。

我测试了几种代码，以获取 csv 文件中在速度方面的行数。最好的方法如下。

```
with open(filename) as f:
    sum(1 for line in f) 
```

这是测试的代码。

```
import timeit
import csv
import pandas as pd

filename = './sample_submission.csv'

def talktime(filename, funcname, func):
    print(f"# {funcname}")
    t = timeit.timeit(f'{funcname}("{filename}")', setup=f'from __main__ import {funcname}', number = 100) / 100
    print('Elapsed time : ', t)
    print('n = ', func(filename))
    print('\n')

def sum1forline(filename):
    with open(filename) as f:
        return sum(1 for line in f)
talktime(filename, 'sum1forline', sum1forline)

def lenopenreadlines(filename):
    with open(filename) as f:
        return len(f.readlines())
talktime(filename, 'lenopenreadlines', lenopenreadlines)

def lenpd(filename):
    return len(pd.read_csv(filename)) + 1
talktime(filename, 'lenpd', lenpd)

def csvreaderfor(filename):
    cnt = 0
    with open(filename) as f:
        cr = csv.reader(f)
        for row in cr:
            cnt += 1
    return cnt
talktime(filename, 'csvreaderfor', csvreaderfor)

def openenum(filename):
    cnt = 0
    with open(filename) as f:
        for i, line in enumerate(f,1):
            cnt += 1
    return cnt
talktime(filename, 'openenum', openenum) 
```

结果如下。

```
# sum1forline
Elapsed time :  0.6327946722068599
n =  2528244

# lenopenreadlines
Elapsed time :  0.655304473598555
n =  2528244

# lenpd
Elapsed time :  0.7561274056295324
n =  2528244

# csvreaderfor
Elapsed time :  1.5571560935772661
n =  2528244

# openenum
Elapsed time :  0.773000013928679
n =  2528244 
```

总之，`sum(1 for line in f)`是最快的。但可能与 没有显着差异`len(f.readlines())`。

`sample_submission.csv`是 30.2MB，有 3100 万个字符。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-10-19T13:29:07.243

为此，您需要有一些代码，例如我的示例：

```
file = open("Task1.csv")
numline = len(file.readlines())
print (numline) 
```

我希望这对每个人都有帮助。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-07-15T12:48:38.967

上面的几个建议计算了 csv 文件中的 LINES 数。但是一些 CSV 文件将包含引用的字符串，这些字符串本身包含换行符。MS CSV 文件通常用 \r\n 分隔记录，但在带引号的字符串中单独使用 \n。

对于这样的文件，计算文件中的文本行数（由换行符分隔）会产生太大的结果。因此，为了准确计数，您需要使用 csv.reader 来读取记录。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-06-01T10:21:11.580

首先你必须用 open 打开文件

```
input_file = open("nameOfFile.csv","r+") 
```

然后使用 csv.reader 打开 csv

```
reader_file = csv.reader(input_file) 
```

最后，您可以使用指令'len'获取行数

```
value = len(list(reader_file)) 
```

总代码是这样的：

```
input_file = open("nameOfFile.csv","r+")
reader_file = csv.reader(input_file)
value = len(list(reader_file)) 
```

请记住，如果您想重用 csv 文件，您必须创建一个 input_file.fseek(0)，因为当您使用 reader_file 的列表时，它会读取所有文件，并且文件中的指针会更改其位置

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-03-10T18:03:16.493

`row_count = sum(1 for line in open(filename))` worked for me.

Note : `sum(1 for line in csv.reader(filename))` seems to calculate the length of first line

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-05-27T09:21:46.807

使用方法迭代整个文件后`csv.reader()`，您可以通过实例变量读取总行数 `line_num`：

```
import csv
with open('csv_path_file') as f:
    csv_reader = csv.reader(f)
    for row in csv_reader:
        pass
    print(csv_reader.line_num) 
```

引用[官方文档](https://docs.python.org/3/library/csv.html#csv.csvreader.line_num)：

> csvreader.line_num
> 
> 从源迭代器读取的行数。

**小警告：**

*   总行数，包括标题（如果 CSV 有）。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-08-18T23:00:21.013

这适用于 csv 和基于 Unix 的操作系统中包含字符串的所有文件：

```
import os

numOfLines = int(os.popen('wc -l < file.csv').read()[:-1]) 
```

如果 csv 文件包含字段行，您可以从`numOfLines`上面扣除一个：

```
numOfLines = numOfLines - 1 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-04-19T15:53:58.310

```
numline = len(file_read.readlines()) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-05-17T09:55:59.790

我认为我们可以稍微改进一下最佳答案，我正在使用：

```
len = sum(1 for _ in reader) 
```

此外，我们不应该忘记 pythonic 代码并不总是在项目中具有最佳性能。例如：如果我们可以在同一个数据集中同时进行更多操作，最好在同一个 bucle 中完成所有操作，而不是制作两个或多个 pythonic bucle。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-06-13T15:23:40.633

您还可以使用经典的 for 循环：

```
import pandas as pd
df = pd.read_csv('your_file.csv')

count = 0
for i in df['a_column']:
    count = count + 1

print(count) 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-01-25T11:45:34.313

```
import csv
count = 0
with open('filename.csv', 'rb') as count_file:
    csv_reader = csv.reader(count_file)
    for row in csv_reader:
        count += 1

print count 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-10-02T18:22:46.517

```
import pandas as pd
data = pd.read_csv('data.csv') 
totalInstances=len(data) 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-09-08T17:15:53.183

使用“列表”来适应更可行的对象。

然后，您可以计数、跳过、变异，直到您的心愿：

```
list(fileObject) #list values

len(list(fileObject)) # get length of file lines

list(fileObject)[10:] # skip first 10 lines 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-10-20T05:02:53.710

可能想在命令行中尝试如下简单的操作：

```
sed -n '$=' filename 
```

或者

```
wc -l filename 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-20T13:23:09.467

如果您必须解析 CSV（例如，由于字段中存在换行符或注释掉的行）但 CSV 太大而无法一次全部容纳内存，您可以逐个解析 CSV：

```
import pandas as pd
import os
import sys

csv.field_size_limit(sys.maxsize)  # increase the maximal line length in pd.read_csv()

cnt = 0
for chunk in pd.read_csv(filepath, chunksize=10**6):
    cnt += len(chunk)
print(cnt) 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2019-03-18T02:28:05.203

尝试

```
data = pd.read_csv("data.csv")
data.shape 
```

在输出中您可以看到类似 (aa,bb) 的内容，其中 aa 是行数

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2021-02-15T15:28:35.530

如果你在 Unix 系统上工作，最快的方法是下面的 shell 命令

```
cat FILE_NAME.CSV | wc -l 
```

在 Jupyter Notebook 或 iPython 中，您可以将其与`!`：

```
! cat FILE_NAME.CSV | wc -l 
```

# exception - 发生异常时两次调用 JSF2 CDI 操作

> ID：16108528
> 
> 赞同：0
> 
> 时间：2013-04-19T15:48:20.500
> 
> 标签：exception, jsf-2, cdi

在我们的 Java EE 6 应用程序中，我们调用 CDI Bean 的操作来搜索人。在此操作中，有一个对 Web 服务的调用。

如果服务抛出异常（未在 CDI Bean 操作中捕获），则第二次执行该操作。（如果没有异常，该动作只执行一次）。

在第二次动作调用之后突然抛出相同的异常，或者 ExceptionHandler 被调用。

为什么该动作在调用应用程序阶段被调用两次，我们如何摆脱第二次调用？

# android - 使用halfninja ffmpeg在Android中连接mp4文件

> ID：16108533
> 
> 赞同：14
> 
> 时间：2013-04-19T15:48:35.253
> 
> 标签：android, ffmpeg, video-processing, mp4parser

我已经设法使用 NDK 版本 r5c 为 Android NDK编译[halfninja ffmpeg 脚本。](https://github.com/halfninja/android-ffmpeg-x264)（不幸的是，任何使用早期 NDK 编译的尝试都会产生一些错误），而且我对整个 NDK 过程也不是很了解，所以这对我来说有点命中注定。

他的脚本正在编译 ffmpeg 版本 N-30996-gf925b24（他为其编写脚本的具体提交）

继续我的实际应用程序。我设法毫无问题地修剪视频，现在我需要加入/连接它们，但是任何尝试使用在这 3 个链接（[link1](http://www.ffmpeg.org/ffmpeg-filters.html#Examples-1)、[link2](http://ffmpeg.org/faq.html#How-can-I-concatenate-video-files_003f)、[link3](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20%28join,%20merge%29%20media%20files) ）上找到的命令的任何和几种组合都会生成错误，例如`cat is not valid`,或试图覆盖一些输入文件。`> is undefinined``unknown option filter_complex`

有谁知道是否有可能以及（如何做），在 Android 上使用 ffmpeg 的半忍者编译来加入/连接 mp4 视频（所有相同的编解码器、大小、质量等），或者如何编译/获取 ffmpeg Android 使用最新的源代码？

我还快速尝试了[mp4Parser](https://code.google.com/p/mp4parser/)，但没有取得多大成功。

最终我试图让这个伪方法起作用：

```
public static File concatenate(String[] inputPaths, String outputPath){

    // ... do stuff do generate ffmpeg commands....
    VideoKit v = new VideoKit();
    v.run(cmds);

    File f = new File(outputPath);
    return f;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T19:19:16.047

LordNeckbeard提供的答案确实是要走的路。

[如何将flv文件合并为一个？](https://stackoverflow.com/questions/14829819/how-to-concatenate-flv-file-into-one)

处理您的限制

*   不`-f concat`
*   不`-c`
*   不`-bsf`

```
ffmpeg -i q.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb q.ts
ffmpeg -i r.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb r.ts
ffmpeg -i 'concat:q.ts|r.ts' -vcodec copy -acodec copy -absf aac_adtstoasc qr.mp4 
```

[加入 H264 *无需*重新编码](https://superuser.com/q/133413/joining-h264-without-re-encoding)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T17:39:46.113

此序列将在 CLI 上查找 mp4。它来自连接的ffmpeg常见问题页面......

```
$FFMPEG_HOME/ffmpeg  -i gpsclip_seg1.mp4  -vn -f u16le -acodec pcm_s16le -ac 1 -ar 44100 - > temp1.a < /dev/null
$FFMPEG_HOME/ffmpeg  -i gpsclip_seg2.mp4  -vn -f u16le -acodec pcm_s16le -ac 1 -ar 44100 - > temp2.a < /dev/null
$FFMPEG_HOME/ffmpeg  -i gpsclip_seg3.mp4  -vn -f u16le -acodec pcm_s16le -ac 1 -ar 44100 - > temp3.a < /dev/null
cat temp1.a temp2.a temp3.a > all.a

$FFMPEG_HOME/ffmpeg -i gpsclip_seg1.mp4 -an -f yuv4mpegpipe - > temp1.v < /dev/null &
$FFMPEG_HOME/ffmpeg -i gpsclip_seg2.mp4 -an -f yuv4mpegpipe - < /dev/null | tail -n +2 > temp2.v
$FFMPEG_HOME/ffmpeg -i gpsclip_seg3.mp4 -an -f yuv4mpegpipe - < /dev/null | tail -n +2 > temp3.v
cat temp1.v temp2.v temp3.v > all.v

$FFMPEG_HOME/ffmpeg -f u16le -acodec pcm_s16le -ac 1 -ar 44100 -i all.a -f yuv4mpegpipe -i all.v -same_quant -y output.mp4 
```

我查看了 halfninja 的“Android.mk”...为了进行测试，您应该能够使用 adb 将“ffmpeg”可执行文件从 halfninja 构建推送到手机上的 /data/local/...。在构建项目时，我认为可执行文件将位于项目中 JNI 文件夹上方的 ../output 文件夹中。

假设您可以在设备上获取 root，然后您可以通过获取 shell 来在手机上的 CLI 界面上进行测试，然后使用“su”获取 root，然后从 ffmpeg/MP4/concat 线程中复制 cli 表达式，例如[这个](https://stackoverflow.com/questions/7333232/concatenate-two-mp4-files-using-ffmpeg)和在手机上运行它们并输出到您有权访问的文件夹。

在测试模式下，如果您可以使用 step at a time CLI 调用获得所需的结果，如链接接受的答案所示，则可以返回 JNI 接口，调用 halfninja 的“videokit”包，实现相同的命令序列你在测试中使用的。

添加了关于多个呼叫的注释...

由于您将在 JNI 中多次调用 ffmpeg lib，因此您应该注意这个[问题](https://stackoverflow.com/questions/11898338/android-video-trimming-via-ffmpeg)，它可能会影响通过 JNI 多次调用 ffmpeg。如果 halfninja 尚未解决此问题，您可能必须更改 Android.mk 结构以实现线程中讨论的包装库，以便您可以在每次调用 ffmpeg 之间通过 JNI 加载/卸载所需的共享库.

机器人和“猫”

你应该在手机上的 /system/bin 中有一个符号链接

```
lrwxr-xr-x root     shell             2012-07-09 13:02 cat -> toolbox 
```

如果没有，请尝试在手机上安装“busybox”，这样您就可以在手机上的 cli 上模拟脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T11:15:54.380

由于 FFmpeg 的 halfninja 版本无法使用连接功能，我建议您将 FFmpeg 库更新到至少 1.1 版。

在我看来，你有两个选择：

*   尝试使用这两个[Compiling FFmpeg on Android](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20compile%20FFmpeg%20for%20Android)指南之一来编译更新版本的 FFmpeg。那么您可能还需要更新版本的 Android NDK。这是最简单的解决方案。

*   或者尝试在 halfninja 库中实现更新版本的 FFmpeg，这更难，但您可以保持几乎相同的界面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T09:34:32.960

ffmpeg concat demuxer 已添加到 FFMPEG Fire Flower（1.1 版）中。使用 FFmpeg Fire Flower 或 Magic 来获得此功能。构建 ffmpeg 后，使用解复用器。在此[http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20(join,%20merge)%20media%20files](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20(join,%20merge)%20media%20files) 站点中将其解释为 concat demuxer。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-20T14:18:19.473

你好，我有那个灵魂。我使用 Mp4parser 库

```
public class Mp4ParserWrapper {

    public static final String TAG = Mp4ParserWrapper.class.getSimpleName();

    public static final int FILE_BUFFER_SIZE = 1024;

    /**
     * Appends mp4 audio/video from {@code anotherFileName} to {@code mainFileName}.
     */
    public static boolean append(String mainFileName, String anotherFileName) {
        boolean rvalue = false;
        try {
            File targetFile = new File(mainFileName);
            File anotherFile = new File(anotherFileName);
            if (targetFile.exists() && targetFile.length()>0) {
                String tmpFileName = mainFileName + ".tmp";
                //mainfile=vishal0
                //another file=vishal1
                //tmpfile=vishal0.tmp

                append(mainFileName, anotherFileName, tmpFileName);
                copyFile(tmpFileName, mainFileName);
                anotherFile.delete();
                new File(tmpFileName).delete();
                rvalue = true;
            } else if ( targetFile.createNewFile() ) {
                copyFile(anotherFileName, mainFileName);
                anotherFile.delete();
                rvalue = true;
            }
        } catch (IOException e) {
            Log.e(TAG, "Append two mp4 files exception", e);
        }
        return rvalue;
    }

    public static void copyFile(final String from, final String destination)
            throws IOException {
        FileInputStream in = new FileInputStream(from);
        FileOutputStream out = new FileOutputStream(destination);
        copy(in, out);
        in.close();
        out.close();
    }

    public static void copy(FileInputStream in, FileOutputStream out) throws IOException {
        byte[] buf = new byte[FILE_BUFFER_SIZE];
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
    }

    public static void append(
            final String firstFile,
            final String secondFile,
            final String newFile) throws IOException {

        final FileInputStream fisOne = new FileInputStream(new File(secondFile));
        final FileInputStream fisTwo = new FileInputStream(new File(firstFile));
        final FileOutputStream fos = new FileOutputStream(new File(String.format(newFile)));

        append(fisOne, fisTwo, fos);

        fisOne.close();
        fisTwo.close();
        fos.close();
    }

    // FIXME remove deprecated code
    public static void append(
            final FileInputStream fisOne,
            final FileInputStream fisTwo,
            final FileOutputStream out) throws IOException {

        final Movie movieOne = MovieCreator.build(Channels.newChannel(fisOne));
        final Movie movieTwo = MovieCreator.build(Channels.newChannel(fisTwo));
        final Movie finalMovie = new Movie();

        final List<Track> movieOneTracks = movieOne.getTracks();
        final List<Track> movieTwoTracks = movieTwo.getTracks();

        for (int i = 0; i <movieOneTracks.size() || i < movieTwoTracks.size(); ++i) {
            finalMovie.addTrack(new AppendTrack(movieTwoTracks.get(i), movieOneTracks.get(i)));
        }

        final IsoFile isoFile = new DefaultMp4Builder().build(finalMovie);
        isoFile.getBox(out.getChannel());
    }

} 
```

并调用：

```
Mp4ParserWrapper.append(firstfilename,secondfilename); 
```

# email - 需要有关此查询的帮助

> ID：16108537
> 
> 赞同：-1
> 
> 时间：2013-04-19T15:48:46.357
> 
> 标签：email, comparison

对于这样的查询，我希望将 user_mail 记录为 test1@gmail.com 的输出计数为 2，

```
SELECT Count(user_refemai) from Table_users where userref_mail = user_mail 
```

但是，我得到的输出为 0！我究竟做错了什么？

我的 table_users 看起来像：

```
user_id         user_mail               user_refemail  
1               test1@gmail.com         NULL    
2               test2@gmail.com         test1@gmail.com  
3               test3@gmail.com         test1@gmail.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:02:51.487

沙夫卡特是正确的。为此，您将像这样传递查询参数：

```
SELECT count(*)
    FROM
        table_users
    WHERE
        userref_email = ? 
```

如果您需要报告查询而不是特定电子邮件地址，则可以使用自联接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:58:06.113

你得到 0 因为在你的查询中条件一直是假的

为此，您必须使用游标或内部查询，然后获取计数或将参数传递给要获取计数的查询。

# twitter-bootstrap - Datatables.net 和 Twitter 引导程序

> ID：16108542
> 
> 赞同：1
> 
> 时间：2013-04-19T15:48:56.467
> 
> 标签：twitter-bootstrap, jquery-datatables

是否可以在不集成到插件代码的情况下将数据表行更改为 twitter 引导程序使用的 div 和行？所以他们会很好地包裹在小屏幕设备上？

# r - 通过R将大数据帧存储在redis中

> ID：16108544
> 
> 赞同：6
> 
> 时间：2013-04-19T15:49:10.737
> 
> 标签：r, redis, dataframe

我在 R 中有许多大型数据框，我打算使用 redis 存储它们。我对 redis 完全陌生，但今天一直在阅读它并且一直在使用 R 包`rredis`。

我一直在玩小数据，并使用`redisSet()`and`redisGet()`函数保存和检索小数据帧。但是，当使用代码保存较大的数据帧（其中最大的是 430 万行，保存为 .RData 文件时为 365MB）时，`redisSet('bigDF', bigDF)`我收到以下错误消息：

```
Error in doTryCatch(return(expr), name, parentenv, handler) : 
  ERR Protocol error: invalid bulk length
In addition: Warning messages:
1: In writeBin(v, con) : problem writing to connection
2: In writeBin(.raw("\r\n"), con) : problem writing to connection 
```

大概是因为数据框太大而无法保存。我知道 redisSet 将数据帧作为字符串写入，这可能不是处理大型数据帧的最佳方法。有谁知道最好的方法来做到这一点？

编辑：我重新创建了创建一个非常大的虚拟数据框的错误：

```
bigDF <- data.frame(
'lots' = rep('lots',40000000),
'of' = rep('of',40000000),
'data' = rep('data',40000000),
'here'=rep('here',40000000)
) 
```

运行`redisSet('bigDF',bigDF)`给了我错误：

```
 Error in .redisError("Invalid agrument") : Invalid agrument 
```

第一次，然后立即再次运行它，我收到错误

```
Error in doTryCatch(return(expr), name, parentenv, handler) : 
  ERR Protocol error: invalid bulk length
In addition: Warning messages:
1: In writeBin(v, con) : problem writing to connection
2: In writeBin(.raw("\r\n"), con) : problem writing to connection 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T19:57:45.257

**简而言之：**你不能。[Redis 最多可以在 String 值中存储 512 Mb 的数据，](http://redis.io/topics/data-types)并且您的序列化演示数据帧大于：

```
> length(serialize(bigDF, connection = NULL)) / 1024 / 1024
[1] 610.352 
```

* * *

**技术背景：**

`serialize``.cerealize`在包的函数中通过`redisSet`and调用`rredis:::.redisCmd`：

```
> rredis:::.cerealize
function (value) 
{
    if (!is.raw(value)) 
        serialize(value, ascii = FALSE, connection = NULL)
    else value
}
<environment: namespace:rredis> 
```

* * *

*题外话：*你为什么要在redis中存储这么大的数据集？Redis 用于小型键值对。另一方面，通过在[CouchDB](http://couchdb.apache.org/)和[MongoDB](http://www.mongodb.org/)（使用 GridFS）中添加压缩文件`RData`作为附件，我在存储大型 R 数据集方面取得了一些成功。

# selenium - 使用提琴手核心运行硒网格时测试失败

> ID：16108548
> 
> 赞同：0
> 
> 时间：2013-04-19T15:49:16.940
> 
> 标签：selenium, fiddlercore

我正在使用提琴手核心在 Web 请求中注入标头。测试使用单个线程运行良好。但是，当使用多个线程运行测试时。测试失败。

似乎提琴手核心无法处理多个实例。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:16:54.497

FiddlerCore 在设计上并行处理多个网络请求。最可能的解释是您自己在 FiddlerCore 中的代码不是线程安全的。

# ios - UIViewController respondsToSelector：消息发送到解除分配的实例

> ID：16108552
> 
> 赞同：3
> 
> 时间：2013-04-19T15:49:34.557
> 
> 标签：ios, memory-management

我在阅读了一些类似的主题后在这里发帖，但你知道每个问题仍然有他自己的特定问题，这就是为什么我仍然需要你的帮助。

我的应用程序因此堆栈跟踪而崩溃：

```
[ReviewVC respondsToSelector:]: message sent to deallocated instance 
```

我在试图查看导致崩溃的相关代码的仪器上跟踪了这一点： ![在此处输入图像描述](https://i.stack.imgur.com/YBo8R.png) ![在此处输入图像描述](https://i.stack.imgur.com/aqY4X.png) ![在此处输入图像描述](https://i.stack.imgur.com/Obyx4.png)

这是`didSelectRowAtIndexPath:`委托方法中 ReviewVC 的相关代码：

```
self.reviewVC = [[[ReviewVC alloc] initWithNibName:@"Review"
                                                     bundle:nil] autorelease];
[viewControllerArray addObject:self.reviewVC];
self.appDelegate.splitViewController.delegate = self.reviewVC; 
```

* * *

`reviewVC` 是一个实例变量和一个属性，这是它的属性声明：

```
@property (nonatomic, retain)  ReviewVC *reviewVC; 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T15:55:53.100

看看这个。似乎可能`viewControllerArray`正在发布，并随之`ReviewVC`添加了实例。我认为自动释放很好，但请检查如何`viewControllerArray`保留。

```
NSObject obj1;
obj1=[[NSObject alloc] init];
//obj1's retain count is 1 here.

[array1 addobject:obj1];
//obj1's retain count incremented by 1, so the total retain count is 2.

[obj1 release];
//obj1's retain count decremented by 1, so the total retain count is 1. 
```

# vb.net - VB.NET 在内存中保存一个大的结构向量

> ID：16108554
> 
> 赞同：0
> 
> 时间：2013-04-19T15:49:42.160
> 
> 标签：vb.net, windows, out-of-memory

我需要加载一个巨大的数据集，将其保存在一个向量中。我已经能够做到这一点，以便将内存保持在应用程序似乎允许的大约 1.2 GB 的限制之下。

但后来我尝试序列化向量，这就是 VB.NET 最终放弃给我一个内存不足异常的时候。

我已经尝试了一切，我无法减小数据集的大小。事实上它已经真正减少了。更改我的应用程序的内部结构不是一种选择。

有什么方法可以让我的应用程序使用超过 1.2 gb（或任何似乎是这个神奇的限制）？

我在 VB6 中也尝试过，限制也是 1.2 GB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:15:32.437

这是我用谷歌搜索的：

```
.net memory limit for application 
```

这些是 Google 上的前 4 个结果：

[达到内存限制会减慢 .Net 应用程序的速度](https://stackoverflow.com/questions/2767747/hitting-a-memory-limit-slows-down-the-net-application)

[.Net 内存限制](https://stackoverflow.com/questions/2587007/net-memory-limit)

[单个 .NET 进程是否有内存限制](https://stackoverflow.com/questions/200348/is-there-a-memory-limit-for-a-single-net-process)

[64 位 .Net 应用程序中的内存限制？](https://stackoverflow.com/questions/6107322/memory-limitations-in-a-64-bit-net-application)

# unit-testing - Grails 2.1 单元测试命令对象 mockForConstraintsTests 不起作用？

> ID：16108556
> 
> 赞同：3
> 
> 时间：2013-04-19T15:49:44.930
> 
> 标签：unit-testing, grails, mocking, constraints

我已经为此命令对象使用了手动编写的以及 Grails 生成的单元测试：

```
 package myapp

    @grails.validation.Validateable
    class SearchCommand {
       String basisBuild
       String buildToSearch

       static constraints = {
          basisBuild(blank: false)
       }
    } 
```

在我的手写单元测试失败后，我使用了 Grails：

```
create-unit-test  myapp.SearchCommand 
```

我填写了单元测试，并做出了一个断言，该断言**应该通过**关于模拟约束的每个文档：

```
package myapp
import static org.junit.Assert.*

import grails.test.mixin.*
import grails.test.mixin.support.*
import org.junit.*

@TestMixin(GrailsUnitTestMixin)
class SearchCommandTests {

    void setUp() {
        mockForConstraintsTests(SearchCommand)
    }

    void tearDown() {
        // Tear down logic here
    }

    void testSomething() {
        SearchCommand commandUnderTest = new SearchCommand()

        commandUnderTest.validate(basisBuild: "")

        assertEquals "blank", commandUnderTest.errors['basisBuild']
    }
} 
```

**为什么我会失败？**

```
grails> test-app
| Running 9 unit tests... 9 of 9
| Failure:  testSomething(com.siemens.soarian.sf.gap.SearchCommandTests)
|  java.lang.AssertionError: expected:<blank> but was:<null>
        at org.junit.Assert.fail(Assert.java:93) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T15:10:42.467

我相信我找到了 grails 支持的方式来对 grails 2.0 中的 Command 对象进行单元测试。您需要使用 ControllerUnitTestMixin 提供的 mockCommandObject。

归功于埃里克

[http://www.jworks.nl/2012/04/12/testing-command-objects-in-grails-2-0/](http://www.jworks.nl/2012/04/12/testing-command-objects-in-grails-2-0/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T18:03:39.260

**编辑**

[如果现有Grails 错误](http://jira.grails.org/browse/GRAILS-9162)中提到的补丁已经到位，使用`validate()`适当并且应该可以工作（感谢@codelark 提出）。为了从 Web App 的角度测试命令对象（使用），以下信息会有所帮助。`mockForConstraintsTest``controller`

**使用控制器操作测试命令对象**：-

仅当对象`command`用作. 请参阅[命令对象](http://grails.org/doc/latest/guide/single.html#commandObjects)（警告说明）。在一个动作方法中使用，你应该能够.`action``controller``SearchCommand``assertEquals`

**样本：**

```
void testSomething() {
        YourController controller = mockController(YourController) //Or instantiate
        SearchCommand commandUnderTest = new SearchCommand ()
        //Note the usage here. validate() does not take parameters
        commandUnderTest.basisBuild = ''
        commandUnderTest.validate()

        //Call your action
        controller.searchCommandAction(commandUnderTest)

        assert response.text == 'Returned'
        assertEquals "blank", commandUnderTest.errors['basisBuild']
    } 
```

**YourController 的操作：-**

```
def searchCommandAction(SearchCommand sc){
    render "Returned"
} 
```

**笔记：**

如果没有 grails 错误的补丁，我们会在 @Grails 2.1.4、2.2.0 和 2.2.1 中看到以下错误

当我只更正`validation`和使用`mockForConstraintTests`而不使用时出现错误`controller` `action`：

![在此处输入图像描述](https://i.stack.imgur.com/e2mDG.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:43:15.967

您使用的`validate`方法不正确。您从未在类上设置字段，因此该字段为空，而不是空白。尝试如下更改您的测试：

```
void testSomething() {
    SearchCommand commandUnderTest = new SearchCommand()
    commandUnderTest.basisBuild = ""

    assertFalse commandUnderTest.validate()
    assertEquals 'blank', commandUnderTest.errors['basisBuild']
} 
```

**编辑：**在测试使用注释的命令类时还有一个[grails 错误。](http://jira.grails.org/browse/GRAILS-9162)`@Validatable`错误评论中有一些解决方法。

# python - 在我自己的代码中嵌入一个芹菜工人

> ID：16108560
> 
> 赞同：2
> 
> 时间：2013-04-19T15:49:55.627
> 
> 标签：python, django, rabbitmq, celery

我有一项需要某种协调器组件的服务。协调器将管理需要分配给用户的实体，如果用户没有及时响应，则从用户那里取走，如果用户响应，也会处理用户响应。协调员还需要联系消息服务以通知用户他们有事情要处理。

我希望协调器是一个单线程进程，因为在使用的前几年预计负载不会太大，我宁愿将所有并发问题推迟到我真正需要处理它们的时候（如果有的话）。

协调器将从 Django 网络服务器接收新实体和用户响应。我认为处理这个问题的最简单方法是使用 Celery 任务 - 网络服务器只是启动协调器在自己的时间消耗的任务。

为此，我需要协调器包含一个 celery worker，并用我自己的版本替换当前的 worker 主循环（用于检查代理是否有新消息并处理调度的版本）。

可行性如何？另一种方法是避免使用 Celery，直接使用 RabbitMQ。我宁愿不那样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:37:00.937

替换这个名字：协调器用 rabbitmq（或其他一些代理 kombu 支持）和用户用芹菜工人。

我很确定您只需配置 celery/kombu 和 rabbitmq 并且无需编写太多（如果有的话）代码行，就可以完成您需要的一切（以及更多）。

小记：Celery 具有定时任务功能。

# javascript - MediaElement.js 通过双击禁用全屏

> ID：16108567
> 
> 赞同：3
> 
> 时间：2013-04-19T15:50:08.573
> 
> 标签：javascript, youtube, mediaelement.js

我正在使用 MediaElement.js 来阻止我嵌入的标准 Youtube 控件，以防止用户跳过视频。但是，当您双击视频时，它会被拉到全屏，然后在全屏时会有视频控件。

基本上我只是想让我的用户完整观看视频，但现在，用户所要做的就是双击视频，然后使用这些控件在视频中向前跳过。

有谁知道我如何禁用双击？我曾考虑阻止用户点击视频，但随后他们无法退出广告或使用方便的点击播放/暂停。

谢谢

# firebase - Firebase 删除 + 有限查询缓存错误？

> ID：16108580
> 
> 赞同：0
> 
> 时间：2013-04-19T15:50:41.353
> 
> 标签：firebase

如果我从 Firebase 读取一个值然后将其删除，随后的有限读取（例如 dataRef.limit(10).once("value") ）仍将看到删除的值。

如果我进行无限读取，那么我将看不到删除的值，随后的有限读取也将不再看到删除的值。

```
var gFirebase = new Firebase("https://brianshmrian.firebaseio.com/");

function CreateValue()
{
    gFirebase.child("TestBug/Key").set("Value");
}

function ReadValue(limit)
{
    var dataRef = gFirebase.child("TestBug");
    if (limit)
        dataRef = dataRef.limit(10);

    dataRef.once("value",function(snapshot)
    {
        alert((limit?"Limited read\n":"Normal read\n") + snapshot.val());
    });
}

function RemoveValue()
{
    gFirebase.child("TestBug/Key").remove();
} 
```

在此示例代码中，如果我执行 CreateValue()，然后执行 ReadValue()，然后执行 RemoveValue()，然后执行 ReadValue(true)，对象仍将在最后的 ReadValue() 中报告给我。但是，如果我执行 ReadValue(false)，我将不再看到该值，随后的 ReadValue(true) 也将看不到该值。

请参阅此处亲自尝试：http: [//jsfiddle.net/brianshmrian/5WWR6/](http://jsfiddle.net/brianshmrian/5WWR6/)

那么这是一个错误吗？还是我犯了一个错误？

**编辑**

好的，这似乎是一个不太痛苦的解决方法。下面的代码暂时解决了我的问题：

```
// Need to do this before the remove to avoid caching problem
dataRef.on("value", function(snapshot)
{
    setTimeout(function() { dataRef.off(); }, 3000);
});

dataRef.remove(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:54:48.053

我找不到代码的任何问题。总是存在同步返回本地缓存数据的问题，但我不认为这是一个问题；在删除完成之前无法调用读取。它看起来像一个非常简单的错误。

`limit(10).on('value')`我能够通过在调用添加/删除操作之前设置来规避这种行为。所以我认为如果你先建立你的查询参考，你会没事的。

示例： http: [//jsfiddle.net/katowulf/6wQFF/2/](http://jsfiddle.net/katowulf/6wQFF/2/)（pre标签在加载时设置）

# angularjs - AngularJS - 双向绑定承诺 - 处理拒绝

> ID：16108582
> 
> 赞同：5
> 
> 时间：2013-04-19T15:50:54.937
> 
> 标签：angularjs, promise

我发现**当你双向绑定一个promise时，angular会为你解析promise并绑定实际的promise**。那么我的问题是，如何处理被拒绝的承诺？

我的特殊情况是我有一个指令，我在其中双向绑定来自控制器的*承诺。*我的控制器希望该指令能够处理拒绝该承诺，因为错误需要显示在 DOM 上。

在我的指令中，我希望我的绑定变量是一个承诺，但相反，我得到了该承诺的已*解决值*。烦人，但并不可怕。

问题是**当该承诺被拒绝时，指令无法知道**。

以这个 plunker 为例：

[http://plnkr.co/edit/m0cOqFhx6TNrDxTbr9Qx?p=preview](http://plnkr.co/edit/m0cOqFhx6TNrDxTbr9Qx?p=preview)

如何处理指令中的承诺拒绝？

谢谢，罗伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T20:28:35.710

我有三个建议 - 没有一个是完美的，但它们都有效：

1.  创建一个返回 promise 的 getter 方法并将此方法绑定到指令使用`&`

2.  绑定延迟对象而不是promise（丑陋）

3.  当承诺解决/被拒绝时广播一个事件

我创建了一个包含所有建议的 plunker：[http ://plnkr.co/edit/jsA0PwpQm0xycLclkBU3?p=preview](http://plnkr.co/edit/jsA0PwpQm0xycLclkBU3?p=preview)

*   控制器：

```
app.controller('MainCtrl', function($scope,$q,$timeout) {
  var deferred = $q.defer();

  $scope.promise = deferred.promise;
  $scope.deferred = deferred;

  $scope.getPromise = function(){
    return deferred.promise;
  }

  $scope.promise.then(function(msg){
    $scope.$broadcast('promiseThen',{rejected:false,msg:msg});
  },function(msg){
    $scope.$broadcast('promiseThen',{rejected:true,msg:msg});
  });

  $timeout(function(){deferred.reject('No reason...');},1500)
}); 
```

*   标记：

```
<div promise-test deferred="deferred" get-promise='getPromise()' ></div> 
```

*   指示：

```
app.directive('promiseTest',function(){
  return {
    template:'<div>m1: {{m1}}<br>m2: {{m2}}<br>m3: {{m3}}</div>',
    scope:{getPromise:'&',deferred:'='}
    ,link:function(scope,el,attrs){

      scope.m1 = scope.m2 = scope.m3 = 'Waiting...';

      scope.getPromise().then(function(msg){
        scope.m1 = 'Resolve getPromise: '+msg;
      },function(msg){
        scope.m1 = 'Reject getPromise: '+msg;
      })

      scope.deferred.promise.then(function(msg){
        scope.m2 = 'Resolved deferred.promise: '+msg
      },function(msg){
        scope.m2 = 'Rejected deferred.promise: '+msg
      });

      scope.$on('promiseThen',function(ev,val){
        if(val.rejected){
          scope.m3 = 'Rejected promiseThen: '+val.msg
        }else{
          scope.m3 = 'Resolved promiseThen: '+val.msg          
        }
      })
    }
  }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T00:52:37.693

成功和错误回调可以使用`&`.

在此选项中，控制器负责将回调添加到`.then`.

### 控制器

```
app.controller('MainCtrl', function($scope,$q,$timeout) {
  var deferred = $q.defer();

  $scope.register = function(callback, errback) {
    deferred.promise.then(callback, errback);
  }

  $timeout(function(){deferred.reject('No reason...');},1500)
}); 
```

### 指示

```
app.directive('promiseTest',function(){
  return {
    template:'<div>m1: {{m1}}',
    scope:{register:'&'},
    link:function(scope,el,attrs){

      scope.m1 = 'Waiting...';

      scope.register({
        success: function(msg){
          scope.m1 = 'Resolve getPromise: '+msg;
        },
        errback: function(msg){
          scope.m1 = 'Reject getPromise: '+msg;
        }
      });
    }
  }
}) 
```

### HTML

```
<div promise-test register='register(success, errback)' ></div> 
```

[plunkr](http://plnkr.co/edit/v9y4uqdpxNgjxRjsdjdu?p=preview "plunkr")

# caching - wso2 以二进制形式缓存中介响应（应该是 XML）

> ID：16108584
> 
> 赞同：0
> 
> 时间：2013-04-19T15:50:59.697
> 
> 标签：caching, wso2, esb, mediator

我正在学习 wso2 ESB 4.6.0。我现在正在研究中介。我实现了缓存调解器，如下所示。

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="cacheProxy" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <cache id="myCache" scope="per-mediator" collector="false" hashGenerator="org.wso2.caching.digest.DOMHASHGenerator" timeout="3" maxMessageSize="1000">
            <implementation type="memory" maxSize="1000"/>
         </cache>
         <send>
            <endpoint>
               <address uri="http://localhost:44444/ws/MediatorsWS"/>
            </endpoint>
         </send>
      </inSequence>
      <outSequence>
         <cache id="myCache" scope="per-mediator" collector="true"/>
         <send/>
      </outSequence>
      <endpoint>
         <address uri="http://localhost:44444/ws/MediatorsWS"/>
      </endpoint>
   </target>
   <publishWSDL uri="http://localhost:44444/ws/MediatorsWS?wsdl"/>
   <description></description>
</proxy> 
```

它重定向到使用接收 SOAP 1.1 的 JAX-WS 实现的 web 服务。这是wsdl：

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:wsp="http://www.w3.org/ns/ws-policy" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:tns="http://clone.ws.wso2lessons/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://clone.ws.wso2lessons/">
<wsdl:types>
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="unqualified">
<xsd:import namespace="http://clone.ws.wso2lessons/" schemaLocation="cacheProxy?xsd=http://localhost:44444/ws/MediatorsWS?xsd=1.xsd"/>
</xsd:schema>
</wsdl:types>
<wsdl:message name="receiveMessage">
<wsdl:part name="parameters" element="tns:receiveMessage"/>
</wsdl:message>
<wsdl:message name="receiveMessageResponse">
<wsdl:part name="parameters" element="tns:receiveMessageResponse"/>
</wsdl:message>
<wsdl:message name="replyMessage">
<wsdl:part name="parameters" element="tns:replyMessage"/>
</wsdl:message>
<wsdl:message name="replyMessageResponse">
<wsdl:part name="parameters" element="tns:replyMessageResponse"/>
</wsdl:message>
<wsdl:portType name="cacheProxyPortType">
<wsdl:operation name="receiveMessage">
<wsdl:input message="tns:receiveMessage" wsaw:Action="http://clone.ws.wso2lessons/MediatorsWS/receiveMessageRequest"/>
<wsdl:output message="tns:receiveMessageResponse" wsaw:Action="http://clone.ws.wso2lessons/MediatorsWS/receiveMessageResponse"/>
</wsdl:operation>
<wsdl:operation name="replyMessage">
<wsdl:input message="tns:replyMessage" wsaw:Action="http://clone.ws.wso2lessons/MediatorsWS/replyMessageRequest"/>
<wsdl:output message="tns:replyMessageResponse" wsaw:Action="http://clone.ws.wso2lessons/MediatorsWS/replyMessageResponse"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="cacheProxySoap11Binding" type="tns:cacheProxyPortType">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<wsdl:operation name="receiveMessage">
<soap:operation soapAction="" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="replyMessage">
<soap:operation soapAction="" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:binding name="cacheProxySoap12Binding" type="tns:cacheProxyPortType">
<soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<wsdl:operation name="receiveMessage">
<soap12:operation soapAction="" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="replyMessage">
<soap12:operation soapAction="" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:binding name="cacheProxyHttpBinding" type="tns:cacheProxyPortType">
<http:binding verb="POST"/>
<wsdl:operation name="receiveMessage">
<http:operation location="receiveMessage"/>
<wsdl:input>
<mime:content type="text/xml" part="parameters"/>
</wsdl:input>
<wsdl:output>
<mime:content type="text/xml" part="parameters"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="replyMessage">
<http:operation location="replyMessage"/>
<wsdl:input>
<mime:content type="text/xml" part="parameters"/>
</wsdl:input>
<wsdl:output>
<mime:content type="text/xml" part="parameters"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="cacheProxy">
<wsdl:port name="cacheProxyHttpSoap11Endpoint" binding="tns:cacheProxySoap11Binding">
<soap:address location="http://PCPPTCERTDEV01:8280/services/cacheProxy.cacheProxyHttpSoap11Endpoint"/>
</wsdl:port>
<wsdl:port name="cacheProxyHttpsSoap11Endpoint" binding="tns:cacheProxySoap11Binding">
<soap:address location="https://PCPPTCERTDEV01:8243/services/cacheProxy.cacheProxyHttpsSoap11Endpoint"/>
</wsdl:port>
<wsdl:port name="cacheProxyHttpsSoap12Endpoint" binding="tns:cacheProxySoap12Binding">
<soap12:address location="https://PCPPTCERTDEV01:8243/services/cacheProxy.cacheProxyHttpsSoap12Endpoint"/>
</wsdl:port>
<wsdl:port name="cacheProxyHttpSoap12Endpoint" binding="tns:cacheProxySoap12Binding">
<soap12:address location="http://PCPPTCERTDEV01:8280/services/cacheProxy.cacheProxyHttpSoap12Endpoint"/>
</wsdl:port>
<wsdl:port name="cacheProxyHttpsEndpoint" binding="tns:cacheProxyHttpBinding">
<http:address location="https://PCPPTCERTDEV01:8243/services/cacheProxy.cacheProxyHttpsEndpoint"/>
</wsdl:port>
<wsdl:port name="cacheProxyHttpEndpoint" binding="tns:cacheProxyHttpBinding">
<http:address location="http://PCPPTCERTDEV01:8280/services/cacheProxy.cacheProxyHttpEndpoint"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

当我向操作replyMessage发送消息时，响应消息被成功缓存（java方法上有一个System.out.println（），在缓存时间范围内不调用）。但是，我收到的返回消息是这样的：

```
<axis2ns27:binary xmlns:axis2ns27="http://ws.apache.org/commons/ns/payload">PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxTOkVudmVsb3BlIHhtbG5zOlM9Imh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3NvYXAvZW52ZWxvcGUvIj48UzpCb2R5PjxuczI6cmVwbHlNZXNzYWdlUmVzcG9uc2UgeG1sbnM6bnMyPSJodHRwOi8vY2xvbmUud3Mud3NvMmxlc3NvbnMvIj48cmV0dXJuPmhlbGxvIHRoZXJlIHJlc3BvbmRpZGEuPC9yZXR1cm4+PC9uczI6cmVwbHlNZXNzYWdlUmVzcG9uc2U+PC9TOkJvZHk+PC9TOkVudmVsb3BlPg==</axis2ns27:binary> 
```

如果我不使用此调解器，则会正确返回消息。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:31:26.357

我们使用直通传输，它不会构建消息..您可以切换回 NIO 传输并检查吗？

# matlab - 在matlab中使用模糊阈值进行边缘检测

> ID：16108585
> 
> 赞同：0
> 
> 时间：2013-04-19T15:51:02.620
> 
> 标签：matlab, edge-detection

有人可以解释为什么我的代码中出现以下错误吗？

```
I=imread('lena.jpg');
[M,N]=size(I);
p = zeros(256,3);
for ii=1:256 p(ii,1)=ii-1; end;
p(:,2) = imhist(I);
p (p(:,2)==0,:) = []; % remove zero entries in p
% Calling Shannon procedure, return t1 value and its location in p
[T1,Loc]=Shannon(p);
% Calling Tsallis procedure of Part1
pLow= p(1:Loc,:); T2= Tsallis_Sqrt(pLow);
% Calling Tsallis procedure of Part2
pHigh=p(Loc+1:size(p),:); T3=Tsallis_Sqrt(pHigh);
% Cerate binary matrices f
f=zeros(M,N);
for i=1:M;
for j=1:N;
if ((I(i,j)>= T2)&(I(i,j)<T1))|(I(i,j)>= T3)
f(i,j)=1; end;
end;
end
% Calling EdgeDetector procedure, return edge detection image.
[g]= EdgeDetector(f);
figure;
imshow(g); 
```

我使用香农熵来找到阈值。为此，我创建了树函数：Shannon(p)、Tsallis_Sqrt(p)、EdgeDetector(f)。但我在主文件中收到此错误。请帮我解决这个错误。

```
??? Error using ==> iptcheckinput
Function IMHIST expected its first input, I or X, to be two-dimensional.

Error in ==> imhist>parse_inputs at 270
iptcheckinput(a, {'double','uint8','logical','uint16','int16','single'}, ...

Error in ==> imhist at 57
[a, n, isScaled, top, map] = parse_inputs(varargin{:});

Error in ==> MainProgram at 6
p(:,2) = imhist(I); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:46:48.570

的第一个参数`imhist(I)`必须是灰度（强度）图像。您`I`可能是 RGB 3 通道图像。RGB 图像有 3 个维度，但该函数需要一个二维矩阵作为其输入，这就是您得到错误的原因。

您可以考虑先将图像转换为灰度格式

```
rgbimage = imread('lena.jpg');
I = rgb2gray(RGB); 
```

# sql - SQL Server Profiler 弃用 - 替换？

> ID：16108586
> 
> 赞同：21
> 
> 时间：2013-04-19T15:51:02.570
> 
> 标签：sql, sql-server, sql-server-profiler

我正在开发 ASP.NET 和 SQL Server 应用程序，有时我在使用 SQL 查询时遇到问题，我希望看到 SQL Server 的“响应”，而不仅仅是 ASP.NET 错误消息（这并不总是很有帮助）

SQL Server 中的 Profiler.exe 工具能够做到这一点，但我在 MSDN 上读到微软计划弃用该工具。

> 我们宣布弃用 SQL Server Profiler for Database Engine Trace Capture 和 Trace Replay。这些功能将在 SQL Server 的下一版本中得到支持，但在以后的版本中将被删除。SQL Server 的具体版本尚未确定。包含 Microsoft SQL Server Trace 和 Replay 对象的 Microsoft.SqlServer.Management.Trace 命名空间也将被弃用。请注意，用于 Analysis Services 工作负载的 SQL Server Profiler 并未被弃用，并将继续受到支持。

[http://msdn.microsoft.com/en-us/library/ms181091.aspx](http://msdn.microsoft.com/en-us/library/ms181091.aspx)

他们没有提到什么工具将取代 profiler.exe

有人知道吗？

如果我想查看（最近？）不成功的查询，是否有任何替代分析器的方法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-19T15:55:02.697

虽然在接下来的几个版本中继续使用跟踪是安全的，但 Profiler 永远不是答案（[这里有一些证据](http://www.sqlperformance.com/2012/10/sql-trace/observer-overhead-trace-extended-events)）。如果要使用跟踪，请使用[服务器*端跟踪*](http://www.mssqltips.com/sqlservertutorial/272/profiler-and-server-side-traces/?utm_source=AaronBertrand)。只是不要编写将利用跟踪的新代码并期望在几个版本之外存在。

长期的答案是使用[扩展事件](http://msdn.microsoft.com/en-us/library/bb630354(v=sql.105).aspx)。您想观看的博客是[SQLskills.com 的 SQL Server MVP Jonathan Kehayias](http://www.sqlskills.com/blogs/jonathan/category/extended-events/)。他在用通俗易懂的术语解释扩展事件并提供了许多现成的示例方面做得很好。他还有关于 PluralSight 的精彩课程（您目前可以通过[Visual Studio Dev Essentials](https://www.visualstudio.com/en-us/products/visual-studio-dev-essentials-vs.aspx)免费获得这些课程）：

*   [SQL Server：扩展事件简介](https://www.pluralsight.com/courses/sqlserver-basicxevents)
*   [SQL Server：高级扩展事件](https://www.pluralsight.com/courses/sqlserver-advanced-xevents)

# jquery - jquery阻止正常滚动和动画

> ID：16108593
> 
> 赞同：1
> 
> 时间：2013-04-19T15:51:19.730
> 
> 标签：jquery, scroll

基本上我正在寻找一种方法来重新创建这个网站上的滚动功能

[http://beoplay.com/Products/BeoplayA9](http://beoplay.com/Products/BeoplayA9)

问题是当您开始滚动时，页面不会像往常一样滚动，但它会注意到您的滚动命令并为垂直页面移动设置动画。有人知道如何在 jQuery 中重新创建该功能吗？

我认为这将是关于`e.preventDefault();`何时`$(window).scroll()`然后执行根据窗口高度向上或向下滑动当前 div 的动画。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T16:15:27.297

好的，我做了一些应该满足您需求的东西：

```
var page = $("div.page");
var heights = [];
var index = 0;

page.each(function(i){
    heights[i] = $(this).offset().top;
});

$(document).on('DOMMouseScroll mousewheel', function(e, delta) {
    // normalize the wheel delta
    delta = delta || -e.originalEvent.detail / 3 || e.originalEvent.wheelDelta / 120;

    // do nothing if is already animating
    if($("html,body").is(":animated")) return false;

    // increase the page index based on wheel direction
    index = (index-delta) % (heights.length);

    // animate the scrolling
    $("html,body").stop().animate({
        scrollTop: heights[index]
    }, 1000);

    e.preventDefault();
}); 
```

[http://jsfiddle.net/ARTsinn/7TKmc/2/](http://jsfiddle.net/ARTsinn/7TKmc/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:07:55.913

如果您在这里查看他们的 js 文件：http: [//beoplay.com/layouts/SBV-Custom/HMProductPage/js/src/BeoplayA9_min.js](http://beoplay.com/layouts/SBV-Custom/HMProductPage/js/src/BeoplayA9_min.js)

如果您将其取消缩小并查看从第 3444 行开始的代码 - 您会看到他们正在使用[jQuery.event.fixHooks](http://learn.jquery.com/events/event-extensions/)来创建和响应自定义事件 ( `["DOMMouseScroll", "mousewheel"]`)。

然后他们能够读取鼠标滚轮的移动并基于此手动滚动页面。

如果你抓住页面的滚动条，滚动会正常发生——所以它只是“动画垂直页面移动”的鼠标滚轮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:10:44.707

我会这样做：

*   使用鼠标滚轮插件，我推荐[这个插件](https://raw.github.com/brandonaaron/jquery-mousewheel/master/jquery.mousewheel.js)。

*   绑定`mousewheel`到`html`or `body`。 `$('body').bind('mousewheel', function(event, delta) {})`
    演示：http: [//jsbin.com/ukotit/48/edit](http://jsbin.com/ukotit/48/edit)

*   基于`delta`(1 = up, -1 = down)，使用[`.animate()`](http://api.jquery.com/animate/)and [`.scrollTop()`](http://api.jquery.com/scrolltop/)。

希望这可以帮助！

# c# - 如何备份作为 .mdf 文件存在的 SQL Server 2008 Express 数据库？

> ID：16108596
> 
> 赞同：-1
> 
> 时间：2013-04-19T15:51:26.043
> 
> 标签：c#, sql-server-2008, database-backups

我一直在尝试各种备份脚本来备份我的数据库，但我遇到了各种错误。我什至尝试在 C# 中使用 SMO 进行备份，但它不会让我恢复说进程正在使用这个文件。

我尝试的另一个选项是简单的`BACKUP DATABASE`声明，但它给了我以下错误

> 'F:\DIR\DIR\APP_DATA***.mdf' 附近的语法不正确

在使用此数据库备份时需要一些帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:00:47.547

几年前我写了一篇关于如何使用 SMO 备份和恢复数据库的文章以及[这里](http://midnightprogrammer.net/csharp/backuprestore-sql-database-using-c/)的解决方案。

此外，当 SQL 服务器服务在后台运行时，您无法访问 .MDF 文件。即使您尝试复制文件，该过程也不允许这样做。

# java - 模拟 RCP 应用程序的 jar 文件。哪些因素可能使其出错？

> ID：16108597
> 
> 赞同：0
> 
> 时间：2013-04-19T15:51:26.717
> 
> 标签：java, jar, jvm, eclipse-rcp, aspectj

我想知道是否有可能，给定一个 RCP 应用程序，以及它的所有插件结构，用我修改的其他字节码切换它的一些原始 jar 文件。

我试图用 AspectJ 破解一个名为 SWT jar 文件`org.eclipse.swt.win32.win32.x86_64_3.6.0.v3650b__________________.jar`并将其放入一个 hello world SWT 应用程序中。它运行良好（不过，我确实必须删除它的所有摘要消息和 CRC 等）。

但是，当尝试对这个大型 RCP 应用程序执行相同操作时，它失败了。除了 jar 文件开关之外，我不知道为什么。应用程序意外关闭。

我想听听可能使我走上正轨的提示，因为我很好奇为什么 Hello World SWT 应用程序有效而其他 RCP 却没有！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:01:40.600

您可能想通过 JDT 编织查看 Equinox 编织及其在 AJDT 和 SalaIDE 中的使用。Equinox 编织为 OSGi 环境中的 AspectJ 提供加载时编织。JDT 编织是两种语言 IDE 如何使用 EW 来改变 Eclipse 内部的行为。

[春分编织](http://eclipse.org/equinox/weaving/)

[JDT织造](http://wiki.eclipse.org/JDT_weaving_features)

# jquery - escape any string from database to store in HTML id attribute that is readable with jQuery

> ID：16108601
> 
> 赞同：1
> 
> 时间：2013-04-19T15:51:39.000
> 
> 标签：jquery, database, escaping, html

I'm making a custom sorting tool for my custom gridview.

I use jQuery ui `$.autocomplete()` to find `DISTINCT` `VALUE`s from a `COLUMN` in a `TABLE`.

I then add the selected values to a jquery ui `$.selectable()`.

I usually use the `id` attribute to store distinct type values like this (such as `TABLE` `PRIMARY`ies), so my problem comes in when I try to store these values where they probably will not be compliant with HTML `id` standards or readable by jQuery.

How can I create a function to escape and de-escape any text from a database into HTML `id` readable by jQuery and back again?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:57:22.597

要进行编码/解码，您可以使用此[答案中描述的功能](https://stackoverflow.com/a/7124052/2165552)

要进行 jquery 查找，您可以使用`$('[id="' + escapedId + '"]');`. 这不是最有效的，但它可以保证您的任何特殊字符都不会被误认为是选择器的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:22:07.247

`data-`您可以根据 HTML5 规范（也向后兼容早期版本的 HTML）在任何带有前缀的 HTML 对象上存储自定义属性。这些可以在选择器查询中使用（与在查询中使用任何属性的方式相同）或者可以使用 jQuery 的`.data()`. 对于可以在自定义属性（如引号）中的字符仍有一些限制，但它比 id 值限制更少。

# php - JavaScript and onclick in Zend Framework

> ID：16108602
> 
> 赞同：-4
> 
> 时间：2013-04-19T15:51:39.073
> 
> 标签：php, javascript, zend-framework

I have a simple form written in [Zend Framework](http://en.wikipedia.org/wiki/Zend_Framework):

```
class Application_Form_MyForm extends Zend_Form
{
    public function init()
    {
        $button = new Zend_Form_Element_Button('button');
        $button->setAttrib("onlick", "alert('hello!');");
        $this->addElement($button);
    }
} 
```

If I'm clicking on this button, why am I not getting the statement from alert? What am I doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:52:21.487

你打错了：`onlick`->`onclick`

# canvas - Draw a path using a path sting in easeljs

> ID：16108606
> 
> 赞同：1
> 
> 时间：2013-04-19T15:51:49.080
> 
> 标签：canvas, path, easeljs

Is there any easy way to draw a path, by passing a string value representing that path.

For example, in fabric.js you can do something like that:

```
var path = new fabric.Path('M 0 0 L 200 100 L 170 200 z'); 
```

Is there anything similar to that in easeljs. I looked at the documentation, i couldn't find anything.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T01:07:11.493

Graphics 上有一个很小的 ​​API，非常易于使用：

```
graphics.f("#ff0000").mt(100,100).lt(100,100).ss(1).s("#0000ff").dc(100,0,50); 
```

[http://www.createjs.com/Docs/EaselJS/classes/Graphics.html](http://www.createjs.com/Docs/EaselJS/classes/Graphics.html)

对于基于字符串的东西，还有一个“decodePath”API [http://www.createjs.com/Docs/EaselJS/classes/Graphics.html#method_decodePath](http://www.createjs.com/Docs/EaselJS/classes/Graphics.html#method_decodePath)

它并不冗长，因为它用于工具输出。Flash Pro 中的 DrawScript 和 Toolkit for CreateJS 都支持它。

# c# - The following throws 'is a Method but treated like a type'

> ID：16108608
> 
> 赞同：-4
> 
> 时间：2013-04-19T15:51:55.400
> 
> 标签：c#, asp.net-mvc-3, entity-framework

The most confusing error I have ever seen in ASP. I have done method calls like this before, and have no issue in other spots of my code.

First of all the class:

```
namespace LocApp.Helpers.Classes.LocationHelper
{
    public class QueryHelper
    {
        private LocAppContext db = new LocAppContext();

        public static IEnumerable<Service> getAllService()
        {
            using (var db = new LocAppContext())
            {
                var service = db.Locations.Include(s => s.LocationAssignment);

                var serv = (from s in db.Services
                            where s.active == true
                            select s).ToList();
                return serv;
            }
        }
    }
} 
```

Pretty easy to understand whats going on. So lets call the method:

```
IEnumerable<LocApp.Models.Service> Service = new LocApp.Helpers.Classes.LocationHelper.QueryHelper.getAllService(Model.id); 
```

`getAllServices(Model.id)` is throwing the error "is a method but treated like a type" , um no its not be treated like a type....

whats going on?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T15:54:30.593

好吧，就像错误消息所说的那样。`getAllService()`是一种方法：

```
public static IEnumerable<Service> getAllService() 
```

但是你试图使用它，就好像它是一个带有构造函数的类型：

```
Service = new LocApp.Helpers.Classes.LocationHelper.QueryHelper.getAllService(...) 
```

这`new`部分是这里的错误。你不想调用构造函数，你只想调用一个方法。这是一个静态方法，所以你不需要实例 - 你可以使用：

```
Service = LocApp.Helpers.Classes.LocationHelper.QueryHelper.getAllService(...) 
```

请注意，如果您有适当的`using`指令，遵循 .NET 命名约定并注意单数/复数名称，您的代码将更容易遵循：

```
var services = QueryHelper.GetAllServices(...); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:54:41.760

你不是简单的意思吗：

```
IEnumerable<LocApp.Models.Service> Service = LocApp.Helpers.Classes.LocationHelper.QueryHelper.getAllService(); 
```

从本质上讲，摆脱该`new`位，并且该方法也不使用任何参数-我假设您在删除该`new`位后会遇到该问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T15:54:44.767

您的 getAllService 方法不带任何参数，因此您应该在没有参数的情况下调用它。它也是一个静态方法，所以不要使用`new`关键字：

```
IEnumerable<LocApp.Models.Service> Service = LocApp.Helpers.Classes.LocationHelper.QueryHelper.getAllService(); 
```

# android - Android：创建自定义首选项

> ID：16108609
> 
> 赞同：59
> 
> 时间：2013-04-19T15:51:56.283
> 
> 标签：android, android-layout, android-preferences, preferenceactivity

是否可以在 中创建个人偏好`PreferenceScreen`？

我想编码这样的颜色设置：

![颜色偏好](https://i.stack.imgur.com/q4WLi.jpg)

我知道使用 选择颜色很容易实现`ListPreference`，但是使用那种“复选框”会很棒。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2014-07-16T13:11:05.453

Android 开发者页面仅显示如何制作`DialogFragment`. 不过，仍然可以自定义`Preference`项目的外观。在您的 XML 中，您必须将根元素声明为`android:id="@android:id/widget_frame`，然后声明`TextView`为`android:title`and `android:summary`。然后，您可以声明要出现在布局中的其他元素。这是一个示例，显示`SeekBar`您可以轻松适应多复选框颜色选择器。

**seekbar_preference.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/widget_frame"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@android:id/title"
        style="@android:style/TextAppearance.DeviceDefault.SearchResult.Title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Title" />

    <TextView
        android:id="@android:id/summary"
        style="@android:style/TextAppearance.DeviceDefault.SearchResult.Subtitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Summary" />

    <SeekBar
        android:id="@+id/seekbar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

然后，在派生自 的类中`Preference`，重写该`onCreateView()`方法：

**SeekbarPreference.java**

```
@Override
protected View onCreateView( ViewGroup parent )
{
  LayoutInflater li = (LayoutInflater)getContext().getSystemService( Context.LAYOUT_INFLATER_SERVICE );
  return li.inflate( R.layout.seekbar_preference, parent, false);
} 
```

然后在preferences.xml 文件中使用首选项：

**首选项.xml**

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <com.example.SeekbarPreference
        android:key="pref_max_volume"
        android:title="@string/max_volume" />
    <com.example.SeekbarPreference
        android:key="pref_balance"
        android:title="@string/balance" />

</PreferenceScreen> 
```

这给出了如下所示的首选项：

![搜索栏首选项](https://i.stack.imgur.com/9jiQy.png)

您可以轻松地调整此方法以在一行上显示多个复选框，就像在原始问题中一样。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-11-21T11:24:16.417

我就是这样做的，使用支持库[`preference-v7`](https://developer.android.com/tools/support-library/features.html#v7-preference)。

*   扩展 [`Preference`](https://developer.android.com/reference/android/support/v7/preference/Preference.html)和覆盖[`onBindViewHolder()`](https://developer.android.com/reference/android/support/v7/preference/Preference.html#onBindViewHolder(android.support.v7.preference.PreferenceViewHolder)). 此方法允许您通过[`ViewHolder`](https://developer.android.com/reference/android/support/v7/widget/RecyclerView.ViewHolder.html)对象获取对您偏好的视图的引用。
*   使用[`setWidgetLayoutResource()`](https://developer.android.com/reference/android/support/v7/preference/Preference.html#setWidgetLayoutResource(int))或[`setLayoutResource()`](https://developer.android.com/reference/android/support/v7/preference/Preference.html#setLayoutResource(int))在构造函数中膨胀您的自定义视图。
*   禁用整个首选项视图的默认点击行为，只允许里面的自定义视图可点击。

[![偏爱](https://i.stack.imgur.com/CT5O8.png)](https://i.stack.imgur.com/CT5O8.png)

**布局/preference_theme.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <Button android:id="@+id/theme_light" ... />
    <Button android:id="@+id/theme_dark"... />
    <Button android:id="@+id/theme_sepia"... />
    <Button android:id="@+id/theme_green"... />
</LinearLayout> 
```

**PreferenceTheme.java**（自定义偏好类）

```
import android.support.v7.preference.Preference;
import android.support.v7.preference.PreferenceViewHolder;

public class PreferenceTheme extends Preference {

    public PreferenceTheme(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public PreferenceTheme(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        setWidgetLayoutResource(R.layout.preference_theme);
    }

    @Override
    public void onBindViewHolder(PreferenceViewHolder holder) {
        super.onBindViewHolder(holder);
        holder.itemView.setClickable(false); // disable parent click
        View button = holder.findViewById(R.id.theme_dark);
        button.setClickable(true); // enable custom view click
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // persist your value here
            }
        });
        // the rest of the click binding
    }
} 
```

**首选项.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.v7.preference.PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <android.support.v7.preference.PreferenceCategory
        android:title="Reading">
        <example.com.preference.PreferenceTheme
            android:key="pref_theme"
            android:title="Theme"
            android:defaultValue="light" />
        ...
    </android.support.v7.preference.PreferenceCategory>
</android.support.v7.preference.PreferenceScreen> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-19T16:15:40.127

Creating a custom preference is similar to creating a fragment or other UI components, by defining views and actions.

Android developers has a good guide on creating settings, which includes a section for creating custom preferences: [http://developer.android.com/guide/topics/ui/settings.html#Custom](http://developer.android.com/guide/topics/ui/settings.html#Custom)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-19T16:31:14.393

您可以为偏好创建自定义布局，并且可以`android:layout`在 res/xml 中的 Preference 属性中设置它，如下所示：

```
<Preference
    ......................
    android:layout="@layout/your_layout" /> 
```

或者您可以使用 Activity 而不是偏好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-12T14:03:52.603

或者更好的选择是扩展 DialogPreference 类。您可以将颜色选择器小部件设置为对话框视图，并在扩展首选项本身内获得积极的结果。[这](https://stackoverflow.com/questions/5533078/timepicker-in-preferencescreen)是一个类似的问题，但它对您的场景非常有用。

# model-view-controller - Joomla 3 MVC 平台 12.1 自定义组件模板覆盖

> ID：16108614
> 
> 赞同：0
> 
> 时间：2013-04-19T15:52:12.803
> 
> 标签：model-view-controller, joomla, components, joomla-extensions, joomla3.0

我正在使用 Joomla 3 的 MVC 12.1 平台，并且遇到了一些让模板覆盖工作的问题。

我的组件有 3 个控制器：商店、优惠券、销售。

对于这些控制器中的每一个，我将我的观点称为与此类似：

```
$paths = new SplPriorityQueue;
$paths->insert(JPATH_SITE.'/templates/'.$app->getTemplate().'/html/com_stores/stores', 'normal');
$paths->insert(JPATH_COMPONENT . '/views/stores/tmpl', 'normal');

$view = new StoresViewsStores(new StoresModelsStore, $paths);
$view->setLayout('default');

// Render our view.
echo $view->render(); 
```

它们之间的唯一区别是分别切换视图/模型/目录。

只要我的模板中不包含任何覆盖，一切都会按预期工作。但是，一旦我包含覆盖，事情就会变得不稳定。

如果我在`com_stores/stores/default.php`我的模板中添加一个，我的商店会被正确覆盖，但是优惠券和销售控制器开始指向商店覆盖而不是他们自己的文件夹。

我缺少的东西是否使每个控制器都指向相同的覆盖？

仅供参考，这里是每个控制器中路径的内容。

商店：

```
$paths->insert(JPATH_SITE.'/templates/'.$app->getTemplate().'/html/com_stores/stores', 'normal');
$paths->insert(JPATH_COMPONENT . '/views/' . $viewName . '/tmpl', 'normal'); 
```

销售量：

```
$paths->insert(JPATH_SITE.'/templates/'.$app->getTemplate().'/html/com_stores/sales', 'normal');
$paths->insert(JPATH_COMPONENT . '/views/' . $viewName . '/tmpl', 'normal'); 
```

优惠券：

```
$paths->insert(JPATH_SITE.'/templates/'.$app->getTemplate().'/html/com_stores/coupons', 'normal');
$paths->insert(JPATH_COMPONENT . '/views/' . $viewName . '/tmpl', 'normal'); 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:49:35.310

终于找到了解决办法。我首先通过跟踪组件来查看正在加载的内容。原来一切都是通过我的商店控制器强制执行的。因此，我对组件检查以查看要使用的控制器的方式进行了轻微更改。

`$controller = $app->input->get('controller','stores');`

到

`$controller = $app->input->get('view','stores');`

需要注意的一点是，我的所有视图都与我的控制器名称完全匹配，所以我不需要做任何特别的事情来知道这会起作用。

# c++ - 具有多个成员的排序结构c ++

> ID：16108617
> 
> 赞同：0
> 
> 时间：2013-04-19T15:52:21.533
> 
> 标签：c++, class, sorting, structure

我想对一类“歌曲”数据类型进行排序

```
class song{
  std::string artist;
  std::string title;
  std::string size;

  public:
}; 
```

我知道可以使用 bool 运算符重载 > 但是如果我希望它按艺术家排序，然后按标题，然后按大小，有什么方法可以指定比较顺序吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T15:55:48.527

When you create your `operator<` you specify the order of attributes you wish to use in the comparison.

Creating such operators is actually almost trivial with `boost::tie` (or `std::tie` if you are able to use C++11):

```
bool operator<(const song& left, const song& right)
{
    return boost::tie(left.artist, left.title, left.size) < boost::tie(right.artist, right.title, right.size);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:00:25.203

有两种解决方案，或者你有某种全局变量[或类似的]，你可以在`operator>`函数中访问，或者你使用`sort`“比较函数”参数。

第二个解决方案看起来像这样：

```
class song
{
    .... 
    static compareArtist(const song &a, const song &b)
    {
        return a.artist > b.artist;
    }
    static compareTitle(const song &a, const song &b)
    {
        return a.title > b.title;
    }
 ... 
}

if (sortby == artist)
   sort(songs.begin(), songs.end(), song::compareArtist);
else if (sortby == title)
   sort(songs.begin(), songs.end(), song::compareTitle); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T16:01:56.523

每个人似乎都认为您想要基于多个属性的恒定排序。而是将您的“然后”解释为您想在不同时间对不同属性进行排序，这是一个答案：

您可以将 std::sort 与 lambda 一起使用。

```
std::sort(songs.begin(), songs.end(), 
[](const Song& s1, const Song& s2)  
{
    // any comparison code you want.
    return result;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T15:55:58.193

You want to overload `operator<` not `operator>`

```
bool operator<(const song& x, const song& y)
{
    if (x.artist < y.artist)
        return true;
    if (x.artist > y.artist)
        return false;
    if (x.title < y.title)
        return true;
    if (x.title > y.title)
        return false;
    if (x.size < y.size)
        return true;
    if (x.size > y.size)
        return false;
    return false;
} 
```

There are any number of variations on this, but that works for me.

# php - PHP 会话到期时间 - 保持会话活动特定的分钟/小时/天数

> ID：16108621
> 
> 赞同：7
> 
> 时间：2013-04-19T15:52:28.373
> 
> 标签：php, session, cookies, timeout

我有一个为购物车创建会话的网站。

```
$_SESSION['cart']=array(); 
```

似乎服务器在 X 时间不活动后自动终止会话，我假设这是在 php.ini 中设置的（但我的主机没有授予我访问权限，他们只是让我告诉他们更改，所以我不能玩！ :()。

有没有更好的方法让会话保持活跃，例如 2 天或特定的分钟/小时数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T15:55:57.660

在调用脚本[`session_set_cookie_params()`](http://php.net/session_set_cookie_params)之前调用：[`session_start()`](http://php.net/session_start)

```
$session_lifetime = 3600 * 24 * 2; // 2 days
session_set_cookie_params ($session_lifetime);
session_start();
// ... 
```

从[文档](http://php.net/session_set_cookie_params)中：

> **`session_set_cookie_params()`**
> 设置 php.ini 文件中定义的 cookie 参数。此功能的效果仅持续脚本的持续时间。因此，您需要在调用`session_set_cookie_params()`每个请求之前`session_start()`调用。

或者，您可以将 php.ini 文件的`session.cookie_lifetime`指令更新为 2 天（以秒为单位）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:56:36.467

设置一个 cookie 并在您的配置中更改会话使用 cookie

```
session_start();
set_cookie("PHPSESSID", session_id(), time() + 3600 * 2); 
```

这可以让你的会话保持 2 小时

# php - 使用 PHP 的自定义 SQL 用于查询自定义服务

> ID：16108623
> 
> 赞同：0
> 
> 时间：2013-04-19T15:52:33.010
> 
> 标签：php, sql, service

假设我有一个保存帐户数据的后端服务，并且我希望能够使用 SQL 查询它以获取数据，这是一个用于管理用户的“高级用户”界面。

过去，我曾在一家托管公司工作，该公司使用一种服务来管理 WHM 上的帐户，其内容与用 Python 编写的完全类似，但我从未参与过该项目，也不知道它是如何完成的。

是否有任何现有的库可以为此进行调整？或者更好的是，专门为创建自定义 SQL 而设计的东西？

**例如：**

```
ACCOUNT CREATE ('username', 'password', 'email') VALUES ('bob_barker', 'some_password', 'bbarker@somesite.com'); 
```

我只是在飞行中发明了它，但它是一个有效的例子。因此，是否有任何库旨在像 MySQL 通过 CLI 那样格式化数据数组？（例如，将输出放入关联数组中，将其传递出去，并回显返回的格式化文本？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:37:18.163

您将需要一个[SQL 解析器](http://pear.php.net/package/SQL_Parser)，您可以使用自己的关键字进行扩展。接下来，您必须编译（或解释）抽象语法树。这使您可以最大程度地控制用户可以对数据库执行的操作。

# javascript - 相对于图像定位表单的最佳方法

> ID：16108624
> 
> 赞同：0
> 
> 时间：2013-04-19T15:52:32.920
> 
> 标签：javascript, css, html

我正在使用 HTML5，想在页面左侧放置一个图像，在图像右侧放置一个表单。这将是相对定位，因为图像可以是任何大小。CSS 是做到这一点的最佳方式还是仅使用 HTML 有更好的方式？

我尝试了以下

```
<div class='container'>
    <div class='left'>
        <form action="javascript:ShowLoadedImage(document.getElementById('image-field').value);">
          <input type="file" accept="image/*" id="image-field" name="image" onchange="this.form.submit()">
        </form>
    </div>
    <div class='right'>
        <form>
            First name: <input type="text" name="firstname"><br>
            Last name: <input type="text" name="lastname">           
        </form>
    </div>
    <div class='clear'></div>
</div> 
```

但得到了表格下方的图像。事实上，我在它们之间从块外的后续代码中得到了一个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:05:06.750

我会使用基本的 HTML/CSS：

**HTML：**

```
<div class='container'>
    <div class='left'>
        <form>
            <!-- your form -->
        </form>
    </div>
    <div class='right'>
        <!-- your image -->
    </div>
    <div class='clear'></div>
</div> 
```

**CSS：**

```
.container {
    width: 300px;
}
.left {
    float:left;
}
.right {
    float:right;
}
.clear {
    clear:both;
} 
```

在这里小提琴：http: [//jsfiddle.net/SUEHs/](http://jsfiddle.net/SUEHs/)

（我提供了多种图像尺寸，因此您可以看到元素是如何流动的）。

# neo4j - 亚马逊弹性云计算上的 neo4j

> ID：16108625
> 
> 赞同：0
> 
> 时间：2013-04-19T15:52:34.327
> 
> 标签：neo4j

我想在 Amazon EC2 上安装 neo4j。如果有人可以就需要做什么提供任何有用的指示，我将不胜感激。我更喜欢使用 Amazon EC2 中提供的免费微型实例。

# c# - Switch 语句未在循环内执行且循环未循环

> ID：16108634
> 
> 赞同：1
> 
> 时间：2013-04-19T15:53:13.847
> 
> 标签：c#, while-loop, switch-statement

**问题解决了！感谢你们！！！**

这是一个关于 C# 的问题。

我有一个包含 4 个选项的菜单：

1.  添加单词
2.  显示单词列表
3.  玩
4.  退出

我用一个开关做到了，开关在一个while循环内，以便在执行任何选择后能够返回到meny。

我遇到的问题是，当我从菜单中进行选择时，什么都没有发生，我收到一条错误消息，表明程序已停止。它没有循环……在我把它放在 while 之前它工作正常环形。因此，while 循环中的开关无法正常工作。

非常感谢提供的任何帮助。我是初学者，所以请尝试简单地解释一下:)

我正在粘贴我到目前为止位于 2 个文件中的所有代码。一个叫做program.cs，另一个叫做wordlist.cs：

program.cs 文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

class Hangman
{
    static void Main()
    {
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Title = "C# Hangman";
        Console.WriteLine("Welcome To C# Hangman!");

        //MENU
        int MenuChoice = 0;
        while (MenuChoice != 4)
        {

        Console.Write("\n\t1) Add words");
        Console.Write("\n\t2) Show list of words");
        Console.Write("\n\t3) Play");
        Console.Write("\n\t4) Quit\n\n");

        Console.Write("\n\tChoose 1-4: ");        //Choose meny item

        MenuChoice = Convert.ToInt32(Console.ReadLine());
        WordList showing = new WordList();

        MenuChoice = int.Parse(Console.ReadLine()); 

        switch (MenuChoice)
        {
            case '1':               
                Console.Write("\n\tAdd a word\n\n");
                var insert = Console.ReadLine();
                showing.AddWord(insert);
                Console.Write("\n\tList of words\n\n");
                showing.ListOfWords();                
                break;
            case '2':
                Console.Write("\n\tList of words\n\n");
                showing.ListOfWords();

                break;

            case '3':   //Running game

                int guesses;
                Console.Write("\n\tHow many faults can you have: ");
                guesses = Convert.ToInt32(Console.ReadLine());
                Console.Write("\n\tAwesome, let´s play!\n");

                String input;
                bool wrong;
                int NumberOfTries = 0;

                do
                {
                    Console.WriteLine("\n\n\tWrong guesses: " + NumberOfTries + " / " + guesses + "\n");
                    Console.WriteLine("\n\tGuessed letters:\n");
                    Console.WriteLine("\n\tWord:\n");
                    Console.Write("\n\n\tGuess letter: ");
                    input = Console.ReadLine();
                    Console.Write("\n\n\t ");

                    wrong = !input.Equals("t") &&
                          !input.Equals("e") &&
                          !input.Equals("s") &&
                          !input.Equals("t");
                    if (wrong)
                    {
                        NumberOfTries++;
                        Console.WriteLine("\n\tWrong letter " + "Try again!");
                    }
                    if (wrong && (NumberOfTries > guesses - 1))
                    {
                        Console.WriteLine("\n\tYou have failed " + guesses + ". End of game!\n");
                        break;
                    }

                } 
                while (wrong);
                if (!wrong)
                    Console.WriteLine("\n\tWhohoo congrats!");

                break;

            case '4':
                Console.WriteLine("\n\tEnd game?\n\n");
                break;
            default:
                Console.WriteLine("Sorry, invalid selection");
                break;  
        }
        MenuChoice++;
        if (MenuChoice < 30)
            continue;
        else
            break;
        }

    }

} 
```

WordList.cs 文件：

```
using System;
using System.Collections.Generic;

class WordList
{
    List <string> words = new List<string>();

    public void ListOfWords()
    {
        words.Add("test");         // Contains: test
        words.Add("dog");          // Contains: test, dog
        words.Insert(1, "shit"); // Contains: test, shit, dog

        words.Sort();
        foreach (string word in words) // Display for verification
        {
            Console.WriteLine(word);

        }

    }

    public void AddWord(string value){
        words.Add(value);
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:01:11.940

我将向您回显您自己的代码子集，以解释发生了什么。具体来说，这是所有接触到的东西`MenuChoice`，除了它`switch`本身。

```
int MenuChoice = 0;
while (MenuChoice != 4)
{
    MenuChoice = Convert.ToInt32(Console.ReadLine());
    MenuChoice = int.Parse(Console.ReadLine()); 

    // switch here.

    MenuChoice++;
    if (MenuChoice < 30)
        continue;
    else
        break;
    }
} 
```

现在我们有了这个代码子集，让我们逐步完成它。

```
set MenuChoice = 0
is MenuChoice != 4? Yes, so loop.
    set MenuChoice to a number from Console
    set MenuChoice to a number from Console
    do Switch logic
    set MenuChoice to MenuChoice + 1
    is MenuChoice < 30? Yes, so go to next loop
is MenuChoice != 4? Yes, so loop.
    set MenuChoice to a number from Console
    set MenuChoice to a number from Console
    do Switch logic
    set MenuChoice to MenuChoice + 1
    is MenuChoice < 30? Yes, so go to next loop
is MenuChoice != 4? Yes, so loop.
    set MenuChoice to a number from Console
    set MenuChoice to a number from Console
    do Switch logic
    set MenuChoice to MenuChoice + 1
    is MenuChoice < 30? Yes, so go to next loop
Repeat until 3 is entered. 
```

我不知道您为什么要递增`MenuChoice`，或者为什么要针对它进行测试`30`，但是该代码没有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:59:40.200

在您的开关循环中，您将获得 MenuChoice 并且它是整数。但在某些情况下，您将它与 Char 进行比较。所以，这就是异常的来源。改变

```
case '1': 
```

至

```
case 1: 
```

还有其他人。

您还在这里调用了 Console.Readline() 两次：

```
 MenuChoice = Convert.ToInt32(Console.ReadLine());
 WordList showing = new WordList();

 MenuChoice = int.Parse(Console.ReadLine()); 
```

您可以删除最后一个，因为在我看来它没用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T16:02:03.647

你的主要问题似乎是额外的 Console.ReadLine() 这里。删除第二个作为第一件事

```
 MenuChoice = Convert.ToInt32(Console.ReadLine());
 WordList showing = new WordList();

 MenuChoice = int.Parse(Console.ReadLine()); // <--- Remove this line 
```

由于其他人已经提到（int vs string）的原因，switch case不正确，但这不是您错误的原因。这将导致 switch 始终执行`default`语句但不会出错。毫无疑问，您需要解决这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T15:59:52.060

您设置了两次条件：

```
// This is the one you likely want, as it will read "1", "2", "3", "4", etc
MenuChoice = Convert.ToInt32(Console.ReadLine());
WordList showing = new WordList();

// Remove this!  You only need to read once...
// MenuChoice = int.Parse(Console.ReadLine()); 
```

此外，您的 case 语句正在切换字符，而不是数字：

```
case 1: // Change to 1, not '1' 
```

由于您要转换为上面的 int，因此您需要打开数值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T15:59:58.000

考虑以下代码行：

```
MenuChoice = int.Parse(Console.ReadLine());
switch (MenuChoice)
{
    case '1': 
```

你得到一个`int`，然后你正在与一个比较`char`。利用`case 1:`

另外，为什么两者兼而有之`Console.ReadLine()`？

# git - git push -f：如何确保其他人赶上？

> ID：16108638
> 
> 赞同：2
> 
> 时间：2013-04-19T15:53:32.550
> 
> 标签：git, git-push, git-reset

*注意：我知道`git push -f`问题很常见，但我真的无法在任何地方轻松找到这个特定问题的答案。我想要一个全面的答案，而不仅仅是在某种程度上解决我的问题的东西。在问题的最后，我自己提出了一个解决方案。*

我已经将一些更改推送到我不应该（在工作中）的分支。我已经`git revert`修改了更改，但其中一位团队协调员实际上希望我`git reset <old commit> && git push -f`这样做，这样历史记录就不会被还原提交弄乱。很少有人使用那个分支，所以我们认为值得冒险。

它起作用了，但我担心已经拉过我提交的人可能会不小心再次快进远程分支，因为历史还没有分歧（我只是重置为旧的提交，但没有做任何其他在那个之上提交）。

我注意到，如果我`git reset <old HEAD commit> && git status`，Git 说它是在 之前的几个提交`origin/<branch>`，所以我确定如果我`git push`再次提交，Git 会快进它。

`git pull`说回购是最新的并且不会回溯（无论如何我认为它不应该这样做）。但是，我应该怎么做才能确保每个人都回到正确的 HEAD`origin/<branch>`并从那里开始工作？`git reset origin/<branch>`在恢复该分支机构的工作之前，我是否需要要求所有人？我真的想要一些更容易且不易出错的东西（他们可能会忘记这样做）。

我知道我不应该 git 重置共享仓库上的分支，但你知道它是怎么回事...无论如何教育经验：P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:59:57.197

您确实必须与可能推送到该分支的每个人进行沟通，以了解恢复已经发生，他们应该同步他们的本地存储库。

你*可以*尝试一些花哨的 git hooks 来防止任何人重新推送无效的提交。但是，如果它像您说的那样是一个很少使用的分支，那么您最好只依靠通信（在任何情况下都应该这样做）。

对于共享分支的干净结帐：

```
git reset origin/<branch> 
```

应该做的伎俩。

如果有人已经在错误提交之上构建了一个分支，则有必要从本地历史记录中删除错误提交，以防止它再次被推送到上游。这可以通过`git rebase`交互选项来完成：

```
git rebase -i origin/<branch> 
```

这将向用户显示对本地分支的提交列表，因为它与上游不同。错误提交将出现在此列表中，应将其删除。

# robocopy - 避免 Robocopy 日志中目标文件夹的现有文件详细信息

> ID：16108640
> 
> 赞同：19
> 
> 时间：2013-04-19T15:53:37.277
> 
> 标签：robocopy

我想在使用 Robocopy Log 时避免所有现有文件名和目标文件夹的详细信息。

只想显示复制的文件列表及其详细信息。

因此，我可以通过避免日志中现有的文件详细信息来节省 robocopy 日志文件的大小。

有没有办法避免它，请帮忙

我看不到任何选项

> 日志记录选项：::

```
 /L :: List only - don't copy, timestamp or delete any files.
             /X :: report all eXtra files, not just those selected.
             /V :: produce Verbose output, showing skipped files.
            /TS :: include source file Time Stamps in the output.
            /FP :: include Full Pathname of files in the output.
         /BYTES :: Print sizes as bytes.

            /NS :: No Size - don't log file sizes.
            /NC :: No Class - don't log file classes.
           /NFL :: No File List - don't log file names.
           /NDL :: No Directory List - don't log directory names.

            /NP :: No Progress - don't display percentage copied.
           /ETA :: show Estimated Time of Arrival of copied files.

      /LOG:file :: output status to LOG file (overwrite existing log).
     /LOG+:file :: output status to LOG file (append to existing log).

   /UNILOG:file :: output status to LOG file as UNICODE (overwrite existing log).
  /UNILOG+:file :: output status to LOG file as UNICODE (append to existing log).

           /TEE :: output to console window, as well as the log file.

           /NJH :: No Job Header.
           /NJS :: No Job Summary.

       /UNICODE :: output status as UNICODE. 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-19T19:18:09.953

默认情况下`robocopy`，仅记录文件夹和不存在/修改（即复制）的文件。

```
 New Dir          2    C:\Temp\a\
100%        New File                   0        bar.txt
100%        New File                   0        foo.txt 
```

您可以使用开关禁止记录文件夹`/ndl`（在这种情况下，复制的文件将与其完整路径一起列出）。

```
100%        New File                   0        C:\Temp\a\bar.txt
100%        New File                   0        C:\Temp\a\foo.txt 
```

只修改`foo.txt`并重新运行`robocopy a b /ndl`，你会得到

```
100%        Newer                      3        C:\Temp\a\foo.txt 
```

从输出中添加`/njh`和`/njs`删除标题和摘要。添加`/np`以删除进度指示（输出行开头的百分比值）。添加`/xx`以删除额外文件的指示（仅存在于目标文件夹中但不存在于源文件夹中的文件）：

```
C:\Temp>**robocopy a b /njh /njs /ndl /np**

          *EXTRA File                  0        C:\Temp\b\baz.txt
            New File                   0        C:\Temp\a\bar.txt
            New File                   0        C:\Temp\a\foo.txt

C:\Temp>**echo "foo" >a\bar.txt**

C:\Temp>**robocopy a b /njh /njs /ndl /np /l**

          *EXTRA File                  0        C:\Temp\b\baz.txt
            Newer                      3        C:\Temp\a\bar.txt

C:\Temp>**robocopy a b /njh /njs /ndl /np /xx /l**

            Newer                      8        C:\Temp\a\bar.txt
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-21T10:56:08.927

你应该使用`/NFL /NDL`. 他们将删除所有不属于 robocopy 操作的目录和文件列表。

[官方参考](https://docs.microsoft.com/fr-fr/windows-server/administration/windows-commands/robocopy)

[可读参考](https://ss64.com/nt/robocopy.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T19:05:56.450

看起来您不能基于[此 TechNet 发布](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)，因为即使`/v`输出仍会显示跳过的文件。

我能想到的唯一选项是在日志上运行一个脚本，删除跳过的行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T16:37:30.007

最后我找不到任何开关，选择以删除现有文件详细信息行的方式编写脚本，并在每个 robocopy 完成后使用相同的文件名设置文件

```
#To remove all Lines with string "Extra File"
 (Get-Content $LogPath)-replace '(.*Extra File).+' | Set-Content $LogPath 

#To remove all empty lines 
(Get-Content $LogPath) | Where-Object {$_ -match '\S'} | Set-Content $LogPath 
```

我在日志文件中为现有文件详细信息行所做的操作以“Extra File”字符串开头，因此我删除了所有这些行。但是行空间仍然存在。所以我使用另一个命令来删除所有空行。

请贡献，任何人都有简单的方法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-29T08:17:17.570

我认为这可能有效： robocopy sourceDir targetDir *。*/njh /njs /ndl /np | 查找 /v "*额外文件"

因此，只需使用 /V 将输出通过管道传输到“查找”，以排除包含指定文本“*Extra File”的行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-27T14:53:30.187

我已经看到这`/XX`也避免了删除目标文件夹中的 EXTRA 文件，因此**它不会记录额外的文件信息**。上面有人已经说过`/XX`否定该`/MIR`选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-26T10:16:46.340

试图消除噪音；使用`robocopy /xx`，它不会显示已经在目标文件夹中的文件。

# highcharts - xAxis 值上的高位图位置标签

> ID：16108641
> 
> 赞同：3
> 
> 时间：2013-04-19T15:53:38.290
> 
> 标签：highcharts

使用 highchart，有没有办法根据特定的 x / y 轴值添加标签？

使用[highchart 的标签](http://api.highcharts.com/highcharts#labels)，我可以在给定的像素位置写入文本，但我需要从轴给出一个值作为位置。

例如，在[这个 jsFiddle](http://jsfiddle.net/DdkDW/4/)中，我想将标签位置设置为“六月”，就像情节线一样。

我怎样才能做到这一点？

```
 labels: { 
           items : [{ 
               html : 'Summer starts here !' ,
               style : { 
                   left: '10px', 
                   //I need to set the left position as an xValue : the timestamp for the summer start.
                   top: '100px'
               }
           }] 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:12:35.217

你的plotLine可以有标签，看看：[http ://api.highcharts.com/highcharts#xAxis.plotLines.label](http://api.highcharts.com/highcharts#xAxis.plotLines.label)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:56:41.433

您应该为 tickmarkPlacement 参数设置“on”值

[http://api.highcharts.com/highcharts#xAxis.tickmarkPlacement](http://api.highcharts.com/highcharts#xAxis.tickmarkPlacement)

# javascript - 显示 src 中指定的图像

> ID：16108642
> 
> 赞同：0
> 
> 时间：2013-04-19T15:53:44.177
> 
> 标签：javascript, jquery, wordpress

我正在尝试找到一种方法来说明“如果”在 Wordpress 帖子的描述中存在图像，则显示 src 中指定的图像，而不是来自 data-img 属性。现在我正在使用一个名为 Superbox 的 JS 插件（[http://bvh.delineamultimedia.com/wp-content/themes/bvh/js/portfolio/superbox.js](http://bvh.delineamultimedia.com/wp-content/themes/bvh/js/portfolio/superbox.js)）并且它没有拾取我的描述区域中显示的图像的 Wordpress，因为 data-img 属性为 null 但我希望它显示从 src 指定的图像。相反，它当前在控制台中显示无法读取 null 的属性“img”。

该语句中是否有办法说明 img 的 data-img 属性是否在 .description 中为空，无论如何都显示它？

```
if (imgData.description) {
    superboxcontent.append('<div class="description">' + imgData.description + '</div>');
} 
```

提前致谢！我真的很感激帮助！

# java - 在 hsqldb 1.8.1.3 之上的基于 Hibernate 的代码的单元测试不再适用于 hsqldb 2.2.9

> ID：16108643
> 
> 赞同：6
> 
> 时间：2013-04-19T15:53:46.507
> 
> 标签：java, hibernate, jdbc, hsqldb

我经常使用内存中的 HSQL 数据库作为测试数据库来编写依赖于数据库的代码的单元测试。最近我决定从 1.8.1.3 升级到 2.2.9，以利用 2.x 发布分支中添加的 ROW_NUMBER() 支持。

似乎在某些方面，新版本比旧版本更严格。使用 Hibernate (3.6.10) 作为 ORM，例如，我可能会创建一个`Configuration`对象来创建 first `SessionFactory`，使用它来填充测试数据，然后使用被`Configuration`测试的类，这将创建它自己`SessionFactory`来进行选择。使用 hsqldb 1.8.1.3，没问题。在 2.2.9 中，选择块在 hsqldb 代码中。下面是一个展示这一点的 SSCCE：

```
public void testTwoSessionFactories() throws Exception {
    boolean withTx = false;

    AnnotationConfiguration config = new AnnotationConfiguration().addAnnotatedClass(Entity.class);
    config.setProperty("hibernate.hbm2ddl.auto", "create");
    config.setProperty(Environment.DIALECT, HSQLDialect.class.getName());
    config.setProperty(Environment.DRIVER, jdbcDriver.class.getName());
    config.setProperty(Environment.URL, "jdbc:hsqldb:mem:testDB");
    config.setProperty(Environment.USER, "SA");
    config.setProperty(Environment.PASS, "");

    SessionFactory sessionFactory1 = config.buildSessionFactory();
    Session session = sessionFactory1.openSession();

    Transaction tx = null;
    if (withTx)
        tx = session.beginTransaction();

    session.save(new Entity("one"));

    if (withTx)
        tx.commit();

    session.flush();
    session.close();

    config.setProperty("hibernate.hbm2ddl.auto", "");
    SessionFactory sessionFactory2 = config.buildSessionFactory();
    Session session2 = sessionFactory2.openSession();
    List entities = session2.createCriteria(Entity.class).list();
    session2.close();
} 
```

注意`withTx`布尔值。使用 HSQLDB 1.8.1.3，我可以用`withTx`true 或 false 运行这段代码，它会没事的。在 HSQLDB 2.2.9 中，`withTx` *必须设置为 true*，否则线程在`.list()`调用中被阻塞，堆栈如下：

```
Unsafe.park(boolean, long) line: not available [native method]  
LockSupport.park(Object) line: not available    
CountDownLatch$Sync(AbstractQueuedSynchronizer).parkAndCheckInterrupt() line: not available 
CountDownLatch$Sync(AbstractQueuedSynchronizer).doAcquireSharedInterruptibly(int) line: not available   
CountDownLatch$Sync(AbstractQueuedSynchronizer).acquireSharedInterruptibly(int) line: not available 
CountDownLatch.await() line: not available  
CountUpDownLatch.await() line: not available    
Session.executeCompiledStatement(Statement, Object[]) line: not available   
Session.execute(Result) line: not available 
JDBCPreparedStatement.fetchResult() line: not available 
JDBCPreparedStatement.executeQuery() line: not available    
BatchingBatcher(AbstractBatcher).getResultSet(PreparedStatement) line: 208  
CriteriaLoader(Loader).getResultSet(PreparedStatement, boolean, boolean, RowSelection, SessionImplementor) line: 1953   
CriteriaLoader(Loader).doQuery(SessionImplementor, QueryParameters, boolean) line: 802  
CriteriaLoader(Loader).doQueryAndInitializeNonLazyCollections(SessionImplementor, QueryParameters, boolean) line: 274   
CriteriaLoader(Loader).doList(SessionImplementor, QueryParameters) line: 2542   
CriteriaLoader(Loader).listIgnoreQueryCache(SessionImplementor, QueryParameters) line: 2276 
CriteriaLoader(Loader).list(SessionImplementor, QueryParameters, Set, Type[]) line: 2271    
CriteriaLoader.list(SessionImplementor) line: 119   
SessionImpl.list(CriteriaImpl) line: 1716   
CriteriaImpl.list() line: 347   
EntityTest.testTwoSessionFactories() line: 46 
```

HSQLDB 在 1.8.1.3 和 2.2.9 之间发生了什么变化，需要此代码在事务中进行保存，我可以将其关闭吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T16:15:32.603

`HSQLDB 1.8.x`用于`READ UNCOMMITTED`已被另一个事务添加或更改的行。

`HSQLDB 2.x`使用`READ COMMITTED`（默认）或`SERIALIZABLE`隔离级别。因此，事务必须在其更改可见之前提交。还有`transaction model`要考虑的。

默认值`transaction model`是`LOCKS`锁定在事务提交之前修改的表。您可以使用`MVCC model`相反，它允许其他会话从表中读取并修改尚未修改的行。您可以将此模型与`URL property`.

```
config.setProperty(Environment.URL, "jdbc:hsqldb:mem:testDB;hsqldb.tx=mvcc"); 
```

# printing - 批量设置特定打印机端口

> ID：16108650
> 
> 赞同：-1
> 
> 时间：2013-04-19T15:54:07.617
> 
> 标签：printing, batch-file, registry, port, default

我正在尝试批量设置打印机默认端口。我需要使用端口文件：这是我尝试过的。不确定这是否是正确的方法。

> RUNDLL32 PRINTUI.DLL,PrintUIEntry /Xs /n "Apple LaserWriter 16/600 PS" PortName 值:"FILE:"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:12:14.473

尝试

```
RUNDLL32 PRINTUI.DLL,PrintUIEntry /Xs /n "Apple LaserWriter 16/600 PS" PortName "FILE:" 
```

# ruby-on-rails - 通过间接关联使用包含查询

> ID：16108651
> 
> 赞同：0
> 
> 时间：2013-04-19T15:54:10.137
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, join

我有一张`users`桌子，里面有很多`group users`而且有一张`user account summary`。所有这些表都有相同的字段`user_id`。我希望将用户帐户摘要包含到组用户查询中。所以我想这样做...

```
@group.group_users.includes(:user_account_summary) 
```

但它告诉我没有找到相关的名称。如何修复查询以将用户的帐户摘要与组用户的摘要一起包含在内？甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:56:59.543

试试`@group.group_users.includes(:user => :user_account_summary)`。既然`user_account_summary`是关联上`User`而不是`GroupUser`，关联就得通过`User`。

如果您想更频繁地使用关联，您还可以添加与该匹配项的`user_account_summary`关系：`GroupUser``user_id``user_id`

```
class GroupUser < ActiveRecord::Base
  has_one :user_account_summary, :primary_key => 'user_id', :foreign_key => 'user_id'
end 
```

# css - 如何在活动元素之前和之后选择某个类的所有兄弟选择器？

> ID：16108659
> 
> 赞同：0
> 
> 时间：2013-04-19T15:54:36.577
> 
> 标签：css, css-selectors, pseudo-class

我一直无法找到答案，所以这里是：

我在页面上有 4 个 div。当一个 div 为 :active 时，我希望所有其他 div 都采用`opacity:0;`

有没有人想出一种方法来选择所有兄弟姐妹，而不仅仅是`:active`元素之后的兄弟姐妹？

```
<div class="circle c1"> </div>
<div class="circle c2"> </div>
<div class="circle c3"> </div>
<div class="circle c4"> </div>

<style type="text/css">

    .c2:active ~.circle {
        opacity: 0;
    }
</style> 
```

在这个例子中，.c1 div 永远不会消失。什么是仅使用 CSS 的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:16:49.563

This is *sort of* possible, but not wonderfully so and, incidentally, I'm using `:hover` instead of `:active`:

```
.circle {
    opacity: 1;
    width: 48%;
    margin: 0;
    display: inline-block;
    border: 1px solid #000;
    height: 10em;
}

body:hover .circle {
    opacity: 0.4; /* obviously adjust to 0, but used 0.4 for the demonstration */
}

body:hover .circle:hover {
    opacity: 1;
} 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/KLgb4/).

It works by selecting all the elements to style as `opacity: 0` based on the `:hover` of their shared parent (`body` in the example code), and then selecting the currently-hovered `div` to override that styling.

In the demo I've used `:hover`, but you could, if you wish, use `:active`, but I'm not sure what you want to achieve with that. Still, it's a proof-of-concept.

# objective-c - 如何按组解析 SVG 源文件

> ID：16108660
> 
> 赞同：0
> 
> 时间：2013-04-19T15:54:36.540
> 
> 标签：objective-c, parsing, svg, cocos2d-iphone, inkscape

我正在为我的游戏创建关卡并使用 Inkscape 和 SVG 作为源文件格式。我可以逐个解析对象，但不能分组，假设我只想解析组“objects_2”怎么做？

```
 <g id="objects_1">
    <object y="100" x="65" height="40" width="40" />
    <object width="40" height="40" x="212" y="200" />
    <object y="105" x="355" height="40" width="40" />
  </g>

  <g id="objects_2">
    <object y="150" x="100" height="40" width="40" />
  </g> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:47:49.160

要导航 DOM 结构，有两种快速的方法：

1.  **jQuery** `var svgObject = jQuery('#objects_1')`并`svgObject[0]`返回第一个对象
2.  **javascript** `var svgObject = document.getElementById('objects_1')`并且`svgObject.children[0]`是第一个子对象

如果您已经熟悉 jQuery，请坚持使用它，因为在原生 JS 和 jQuery 之间切换可能会令人困惑，尤其是在语法相似的情况下。

# javascript - Google 脚本不会在 Google 电子表格中返回超链接

> ID：16108665
> 
> 赞同：1
> 
> 时间：2013-04-19T15:54:44.787
> 
> 标签：javascript, google-apps-script, google-sheets

我正在开发视频游戏经济跟踪器的早期阶段，以最终将更好的经济动态应用到未来的 MMORPG 中。所以，首先我试图创建一个谷歌电子表格来跟踪价格，这是谷歌脚本中的相关代码片段。**据我所知，Google Scripts 使用与JavaScript**完全相同的功能。

```
function makeLink(item) {
  var encodedItem = encodeURI(underScore(toTitleCase(item)));
  //make spaces into underscores, then URL-encode the rest

  var wiki = "http://wiki.videogame_address.org/"; 
  //the base wiki URL for the video game

  wikiLink = wiki+encodedItem;
  //link to the item in the wiki      

  var href = "=HYPERLINK(\""+wikiLink+"\",\""+toTitleCase(item)+"\")";
  //attempting to have Google Spreadsheet make a URL
  //yields =HYPERLINK("http://wiki.videgame.org/Giant_Head","Giant Head")

  return href;
}; 
```

生成的 href 变量仅给出文本输出

`=HYPERLINK("http://wiki.videgame.org/Giant_Head","Giant Head")`

这是电子表格创建链接的正确语法，但是，它只是将其保留为文本。有没有办法强制谷歌消化这里输出的文本而不是将其作为文本保留？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:05:02.503

使用`setFormula`方法：

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet = ss.getSheets().shift();
var cell = sheet.setActiveCell("B5");
var newLink = makeLink("whatever");
cell.setFormula(newLink); 
```

参考：

*   [如何使用 Google Apps 脚本将公式添加到 Google 电子表格？](https://stackoverflow.com/questions/12036726/how-to-add-formula-to-google-spreadsheet-using-google-apps-scripts)
*   [https://developers.google.com/apps-script/reference/spreadsheet/range#setFormula(String)](https://developers.google.com/apps-script/reference/spreadsheet/range#setFormula(String))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T19:42:20.207

看看这个..
[http://code.google.com/p/google-apps-script-issues/issues/detail?id=1592](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1592)

看来此功能不可用，也将不可用。:(

如果您愿意跳过文本显示“Giant Head”，您至少可以返回链接以获得工作链接。

```
function makeLink(item) {
  var encodedItem = encodeURI(underScore(toTitleCase(item)));
  var wiki = "http://wiki.videogame_address.org/"; 
  wikiLink = wiki+encodedItem;     
  return wikiLink;
}; 
```

# algorithm - 存储过程慢，搜索数据库中的所有表，有什么更好的算法？

> ID：16108666
> 
> 赞同：0
> 
> 时间：2013-04-19T15:54:56.440
> 
> 标签：algorithm, sql-server-2008, stored-procedures

我的存储过程需要 6 个参数，并给定这些参数，它会查看数据库中的所有表，并告诉您哪些表具有指定的数据。

例如：

```
sp_cis_key_combo_snapshot_ListTables '123','',NULL,NULL,'%',NULL 
```

这将返回包含所有该数据的所有表的列表，即任何具有 Incident_Nr = '123'、Agency = '' 和 Module_ID 的表都不是空的。

该参数`NULL`将意味着该列可以或不可以存在于该表中，也就是没关系。

该参数`''`意味着该列必须存在，但必须为空。

该参数`'%'`意味着该列必须存在，但不能为空。

如果参数不是上面列出的，`'ABC'`那么它必须返回一个准确的列。

我的存储过程对像这样的参数没有用处`'A%C'`，但它可以接受它们。

现在我需要这个的原因是“我的”数据库非常杂乱无章，我需要知道某些表是如何相互关联的，而无需详细说明，我将如何加速这个存储过程？

```
USE [RMS]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[sp_cis_key_combo_snapshot_ListTables] (
@incident_nr VARCHAR(12),
@agency VARCHAR(4), 
@suffix1 VARCHAR(3), 
@suffix2 VARCHAR(3), 
@module_id VARCHAR(3), 
@type VARCHAR(2))

AS
BEGIN
SET NOCOUNT ON

DECLARE @tables TABLE (TABLE_NAME SYSNAME)
DECLARE @columns TABLE (COLUMN_NAME SYSNAME)

INSERT INTO @tables
SELECT [TABLE_NAME] = NAME
FROM sysobjects
WHERE type = 'U'
ORDER BY NAME

DECLARE @table_name SYSNAME
DECLARE @has_incident_nr_flag INT
DECLARE @has_agency_flag INT
DECLARE @has_suffix1_flag INT
DECLARE @has_suffix2_flag INT
DECLARE @has_module_id_flag INT
DECLARE @has_type_flag INT
DECLARE @total_flag INT
DECLARE @incident_nr_query VARCHAR(1000)
DECLARE @agency_query VARCHAR(1000)
DECLARE @suffix1_query VARCHAR(1000)
DECLARE @suffix2_query VARCHAR(1000)
DECLARE @module_id_query VARCHAR(1000)
DECLARE @type_query VARCHAR(1000)

start_loop:
SET @table_name = ''

SELECT TOP 1 @table_name = TABLE_NAME
FROM @tables

IF @table_name = ''
    GOTO exit_loop

DELETE
FROM @tables
WHERE TABLE_NAME = @table_name

INSERT INTO @columns
SELECT [COLUMN_NAME] = c.NAME
FROM sysobjects t
INNER JOIN syscolumns c ON c.id = t.id
WHERE t.NAME = @table_name
ORDER BY c.colid

SELECT @has_incident_nr_flag = 0, @has_agency_flag = 0, @has_suffix1_flag = 0, @has_suffix2_flag = 0, @has_module_id_flag = 0, @has_type_flag = 0, @total_flag = 0

IF (@incident_nr IS NOT NULL)
    SET @total_flag = @total_flag + 32

IF (@agency IS NOT NULL)
    SET @total_flag = @total_flag + 16

IF (@suffix1 IS NOT NULL)
    SET @total_flag = @total_flag + 8

IF (@suffix2 IS NOT NULL)
    SET @total_flag = @total_flag + 4

IF (@module_id IS NOT NULL)
    SET @total_flag = @total_flag + 2

IF (@type IS NOT NULL)
    SET @total_flag = @total_flag + 1

IF EXISTS (
        SELECT *
        FROM @columns
        WHERE column_name = 'Incident_Nr'
        )
    AND @incident_nr IS NOT NULL
    SET @has_incident_nr_flag = 32

IF EXISTS (
        SELECT *
        FROM @columns
        WHERE column_name = 'Agency'
        )
    AND @agency IS NOT NULL
    SET @has_agency_flag = 16

IF EXISTS (
        SELECT *
        FROM @columns
        WHERE column_name = 'Suffix_1'
        )
    AND @suffix1 IS NOT NULL
    SET @has_suffix1_flag = 8

IF EXISTS (
        SELECT *
        FROM @columns
        WHERE column_name = 'Suffix_2'
        )
    AND @suffix2 IS NOT NULL
    SET @has_suffix2_flag = 4

IF EXISTS (
        SELECT *
        FROM @columns
        WHERE column_name = 'Module_ID'
        )
    AND @module_id IS NOT NULL
    SET @has_module_id_flag = 2

IF EXISTS (
        SELECT *
        FROM @columns
        WHERE column_name = 'Type'
        )
    AND @type IS NOT NULL
    SET @has_type_flag = 1

SET @incident_nr_query = ' '
SET @agency_query = ' '
SET @suffix1_query = ' '
SET @suffix2_query = ' '
SET @module_id_query = ' '
SET @type_query = ' '

IF (@has_incident_nr_flag = 32)
    SET @incident_nr_query = 'AND Incident_Nr LIKE ' + '''' + @incident_nr + '''' + ' '

IF (@has_agency_flag = 16)
    SET @agency_query = 'AND Agency LIKE ' + '''' + @agency + '''' + ' '

IF (@has_suffix1_flag = 8)
    SET @suffix1_query = 'AND Suffix_1 LIKE ' + '''' + @suffix1 + '''' + ' '

IF (@has_suffix2_flag = 4)
    SET @suffix2_query = 'AND Suffix_2 LIKE ' + '''' + @suffix2 + '''' + ' '

IF (@has_module_id_flag = 2)
    SET @module_id_query = 'AND Module_ID LIKE ' + '''' + @module_id + '''' + ' '

IF (@has_type_flag = 1)
    SET @type_query = 'AND Type LIKE ' + '''' + @type + '''' + ' '

IF (@total_flag = @has_incident_nr_flag + @has_agency_flag + @has_suffix1_flag + @has_suffix2_flag + @has_module_id_flag + @has_type_flag)
BEGIN
    DECLARE @sql VARCHAR(1000)

    SET @sql = 'IF EXISTS (
                        SELECT *
                        FROM dbo.' + @table_name + ' 
                        WHERE 1=1 ' + @incident_nr_query + @agency_query + @suffix1_query + @suffix2_query + @module_id_query + @type_query + '
                        ) ' +  'BEGIN print ' + '''' + @table_name + '''' + ' END'

    EXEC (@sql)
END

DELETE @columns

GOTO start_loop

exit_loop:
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:59:55.150

应该提醒您的第一件事是您有六个表（至少部分）具有相同的模式。如果您有六个表都具有相同的列，通常的做法是创建一个表并将数据存储在那里。

如果由于某种原因（我怀疑）这是不可能的，您可以使用[indexed view](https://stackoverflow.com/questions/3986366/how-to-create-materialized-views-in-sql-server)，这是物化视图的 MSSQL 名称。根据您的典型工作负载，这可能会帮助您提高性能。它的工作方式是预先计算视图 - 无需在每次发生查询时访问表。索引也没有伤害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T12:41:58.603

尝试在打开执行计划的情况下在 SQL Management Studio 中运行 SQL（不是存储过程，而是其中的 SQL）。这将开始让您了解一些减速的位置。

一些观察：**如果（存在（从 ....）中选择 * 并且 @x 不为空**- 对于笑声，首先尝试**if（@x 不为空）**，然后**if 存在**。我怀疑它会有所帮助很多，但它可以。而不是做**if ( exists ( select *** ... **if ( exists ( select 1** ... 是的，这是第一位的。如果表非常宽（很多大字段）可能是让你慢下来。尤其是如果有任何文本字段。

我不得不赞扬你试图处理糟糕的情况。我过去曾说过'设计一个非常糟糕的数据库真的很容易。设计一个好的 - 这需要天赋。

祝你好运。

# sql - 如何正确join和query实现比较

> ID：16108667
> 
> 赞同：0
> 
> 时间：2013-04-19T15:54:57.830
> 
> 标签：sql, sql-server, join, case

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:02:26.083

尝试这个：

```
SELECT ItemCode,
       CASE WHEN artfilename IS NULL
       THEN 'NoArtwork'
       ELSE fileLocation
       END
FROM OITM
LEFT OUTER JOIN  artfileStatus ON OITM.ItemCode = SUBSTRING(artfileStatus.artfilename , 1, 6) 
```

# jquery - jQuery modal will not close in IE7

> ID：16108668
> 
> 赞同：0
> 
> 时间：2013-04-19T15:54:58.027
> 
> 标签：jquery, jquery-ui, modal-dialog, jquery-ui-dialog

I have added two links inside the dialog box which when clicked I would like to close the modal. This works fine in all browsers so far except IE7\.

Here is the code to close:

```
function idConfirm(){
   $('#dialog-modal a').click(function(){
   $('#dialog-modal').dialog('close');
   });
} 
```

# cron - 在 cron.sh 中的 cron 作业条目之间执行延迟

> ID：16108669
> 
> 赞同：0
> 
> 时间：2013-04-19T15:54:59.117
> 
> 标签：cron

我有一个包含 4 个 cron 任务的文件，建议我创建它，因为我的托管公司只允许 3 个计划任务。所以我创建了这个包含 4 个任务的文件，但我想在它们之间添加一个间隙或延迟。也许30分钟。

这可能吗，我该怎么做...

示例代码如下：

```
/usr/bin/php5 "/home/sites/mydomain.com/public_html/xyz/cron1.php"
/usr/bin/php5 "/home/sites/mydomain.com/public_html/xyz/cron2.php"
/usr/bin/php5 "/home/sites/mydomain.com/public_html/xyz/cron3.php"
/usr/bin/php5 "/home/sites/mydomain.com/public_html/xyz/cron4.php" 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:03:43.043

只需在它们之间添加一个睡眠，`sleep 1800`.

请注意，您的主机可能会开始抱怨这个长时间运行的 cron 作业，特别是如果他们有顺序执行的 cron 作业......

我认为更好的解决方案是将一些参数传递给作业并使用这些参数来确定要运行哪些作业。然后 cron 作业会更频繁地执行，但返回速度更快。假设您为 cron 作业提供当前时间，然后使用该信息来决定要执行哪些脚本。

# sql-server - 无法在 SQL Server 2008 中还原 bak 文件

> ID：16108675
> 
> 赞同：-1
> 
> 时间：2013-04-19T15:55:07.073
> 
> 标签：sql-server

我已从 SQL Server 2008 版本 10.50.2500 进行备份

我尝试在另一个具有相同但版本 10.00.1600 的系统中恢复

那么如何升级到该版本或解决方案是什么？

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:09:00.250

问题是这样的：

*   `v10.50`是 SQL Server **2008 R2**（并且 R2 很重要）——这不仅仅是 2008 版本之上的一个服务包——它是一个完全独立的、不同的 SQL Server 版本

*   您**无法**将该版本恢复到较早的 SQL Server **2008** ( `v10.0`) 实例；没有办法，没有工具，没有破解，没有解决方法来实现这一点

SQL Server 备份**永远不会**向后兼容，它们的内部结构在版本之间变化太大。

如果从 SQL Server **2008 R2**备份数据库，则必须还原到**2008 R2**（或更新版本，如 SQL Server 2012）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:13:15.367

正如其他人所说，无法将数据库备份移动到早期版本，但是无论您尝试使用备份还原做什么，都可以使用数据库复制向导来解决：

这是一个帮助您入门的链接：http: [//msdn.microsoft.com/en-us/library/ms188664.aspx](http://msdn.microsoft.com/en-us/library/ms188664.aspx)

它非常直观，您可以在其他地方找到大量文档。

我建议的唯一一件事是，如果您想设置一个流程而不是只做一次，请检查最后的创建 SSIS 包复选框，还有很多关于细节的指南。

# lotus-notes - Select documents from the last 7 days

> ID：16108676
> 
> 赞同：1
> 
> 时间：2013-04-19T15:55:07.703
> 
> 标签：lotus-notes, lotus-domino, lotus

I have a view selection formula:

```
Var :=@If(@IsAvailable(ENVIADO); @If(ENVIADO != "Sim"; "Valido";"");"Valido");
SELECT (Form="Documento"&@Date(Notes_data)>@Date(2013;3;31)&Emissor!=""&DocApagado="Não"&Estado="Definitivo"&@IsUnavailable($Conflict)) & Var = "Valido" 
```

And I want it to select all documents from the past 7 days.excluding "today".

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:07:01.590

Firstly, nobody will thank you for putting dates into a selection formula, as the view index has to be recreated every time the view is opened. It is much better to have a field in each document that will be either "y" or "n" depending on whether you want the document in this view. Then run an agent nightly to check which documents meet the criteria, and set the flag accordingly.

BUT, if you HAVE to have dates in your selection formula here's a suggestion (also, it helps to format the formula nicely to make it more readable). I'm presuming that "Notes_data" is the relevant field.:

```
Var :=@If(@IsAvailable(ENVIADO); @If(ENVIADO != "Sim"; "Valido";"");"Valido");
SELECT (
Form="Documento" &
@Date(Notes_data) < @Today &
@Date(Notes_data) > @Adjust(@Today(0;-8;0;0;0;0)) &
Emissor!="" &
DocApagado="Não" &
Estado="Definitivo" &
@IsUnavailable($Conflict)
) & 
Var = "Valido" 
```

But, as I said before. Please don't do it this way.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:30:58.683

我的方法是在视图的 postOpen 和 queryClose 事件中使用 @SetViewInfo([SETVIEWFILTER]; 。为此，请将选择公式更改为：

```
Var := @If(@IsAvailable(ENVIADO); @If(ENVIADO != "Sim"; "Valido";"");"Valido");
SELECT (Form="Documento" & Emissor!="" & DocApagado="Não" &
        Estado="Definitivo" & @IsUnavailable($Conflict) ) & 
       Var = "Valido" 
```

接下来在视图的开头添加一列，该列已排序和分类。给它这个公式：

```
out := "";
@For(i:=1; i<7; i:=i+1;
    wrkDt := @Adjust(Notes_Data; 0; 0; (i*-1); 0; 0;0);
    tmp1 := @Text(@Year(@Date(wrkDt))) +
        "-" + @Right("00" + @Text(@Month(wrkDt));2) +
        "-" + @Right("00" + @Text(@Day(wrkDt));2);
    out := @Trim(out : tmp1)
);
out 
```

这将导致您希望在给定日期显示的每个文档都出现在您希望它出现的每个日期的视图的七个类别中。

如果这是一个 Web 应用程序，您可以使用 RestrictToCategory 设置仅显示今天的文档。如果这是 Notes 客户端应用程序，请将 View 的 PostOpen 事件更改为运行公式代码并将其设置为：view 为

```
tmp1 := @Text(@Year(@Today)) +
        "-" + @Right("00" + @Text(@Month(@Today));2) +
        "-" + @Right("00" + @Text(@Day(@Today));2);
@SetViewInfo([SetViewFilter]; tmp1); 
```

现在，当您打开视图时，您只会看到今天的文档。并且它不会经常需要刷新。

注意：我使用这种文本格式来确保即使服务器和客户端使用不同的格式，这对于任何本地日期显示格式都一样有效。

一个警告...... SetViewInfo 对当前数据库中的所有视图保持有效，因此您应该向除此之外的视图的所有 PostOpen 事件添加一个清除值的公式：

```
@SetViewInfo([SetViewFilter]; ""); 
```

快乐编码

/新人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T06:20:34.490

> 天：=（@Today - @created）/86400；

它将返回从今天开始的天数和文档的创建日期。你可以给条件取决于你的要求。

# scala - Scala App 初始化顺序

> ID：16108683
> 
> 赞同：2
> 
> 时间：2013-04-19T15:55:33.420
> 
> 标签：scala

所以我有一个简单的 Scala 文件：

```
object Main extends App {
  println("Init")

  def test=println("Method")
}
Main.test
println(Main)
print("End") 
```

当我将它作为脚本运行时，我得到以下输出：

```
$ scala Main.scala
Method
Main$$anon$1$Main$@2449a2da
End 
```

我想知道为什么这`println("Init")`条线永远不会被调用？我希望它在 Main 的初始化时被调用，这应该在调用它的方法时发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T15:59:05.027

让我们仔细看看 App trait [scaladoc](http://www.scala-lang.org/api/current/index.html#scala.App)：

> 应该注意的是，这个 trait 是使用 DelayedInit 功能实现的，这意味着对象的字段在 main 方法执行之前不会被初始化。

因此，您必须执行以下操作：

```
object Main extends App {
  println("Init")

  def test=println("Method")
}
Main.main(Array.empty)     // here is the missing call
Main.test
println(Main)
print("End") 
```

要获得所需的输出：

```
Init
Method
Main$$anon$1$Main$@37a001ff
End% 
```

# python - 匹配 iff 字符串末尾不超过 4 个字母的正则表达式

> ID：16108687
> 
> 赞同：0
> 
> 时间：2013-04-19T15:55:54.193
> 
> 标签：python, regex

如果倒数第五个字符是非字母字符，我正在尝试制作一个匹配的正则表达式。到目前为止，我还没有成功。虽然我做了一个如下：

```
.*[a-zA-Z]{5,}$ 
```

这将检查字符串末尾是否有五个或更多字母。但我想要相反的。仅当字符串末尾的字母少于五个时，正则表达式才会匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:57:49.933

这将做到：

```
[^a-zA-Z].{4}$ 
```

解释：

```
[^a-zA-Z] = match anything except alphabets
.{4} = any 4 characters
$ = end of string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:33:46.430

编辑：

正如评论者所建议的那样，您可以使用 regex `[a-zA-Z]{,4}$`。在这种情况下，`{,4}`匹配不超过 4 个前面的表达式。所以它匹配不超过 4 个字母字符。

* * *

要匹配任何字符串末尾不包含 4 个连续字母字符的字符串，您可以简单地使用此正则表达式：

```
>>> import re
>>> r=re.compile('(?![a-zA-Z]{4}$).{4}$')
>>> r.search('hello.com')
<_sre.SRE_Match object at 0xb759cdb0>
>>> r.search('hellobcom')
>>> 
>>> r.search('hello.ca')
<_sre.SRE_Match object at 0xb759cdb0> 
```

正则表达式的解释`(?![a-zA-Z]{4}$).{4}$`：
`(?!`意味着开始一个否定的前瞻（仅当内容不匹配时才`()`匹配*）* 。
`[a-zA-Z]{4}`匹配字母表中的任意 4 个字符。
`$`是行的结尾。
`)`是负前瞻组的结束。
`.{4}`匹配任意 4 个字符。
`$`是行的结尾。

# c# - MVC/LINQ 搜索功能

> ID：16108692
> 
> 赞同：0
> 
> 时间：2013-04-19T15:56:00.857
> 
> 标签：c#, asp.net-mvc, linq, razor

好的，开始我是 MVC 和 LINQ 和 Razor 的完全新手。这些是我目前正在努力学习的技能。

我的观点是，当您第一次访问该页面时，默认情况下它会列出整个表格。在此页面上，我有两个下拉框，其中填充了我想过滤结果的值。

当用户选择一个不是默认值的值时，我该如何做到这一点，它会重新加载页面，然后通过他们选择的下拉列表过滤数据？

```
public ActionResult Index()
{
    var docs = db.GetData();

    return View(docs);
} 
```

这是我的下拉列表：

```
@Html.DropDownList("FunctionList", "Select a Function") 
```

每当他们选择一个不是“选择函数”的值时，我希望它重新加载页面，然后显示过滤后的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:04:25.613

您可以使用 javascript 并订阅`change`下拉事件，然后通过将所选值传递给服务器来重新加载当前页面。或者，您可以使用对服务器的 AJAX 调用来仅刷新视图的表部分。在这种情况下，您需要将表格放在将包含在主视图中的部分视图中，您将使用 AJAX 调用控制器操作并传递当前选择的下拉列表值，该下拉列表将用于过滤结果和返回一个部分。

例如，使用 jQuery

```
<script type="text/javascript">
    $(function() {
        $('#FunctionList').change(function() {
            var selectedFunction = $(this).val();
            if (selectedFunction != '') {
                $.ajax({
                    url: '@Url.Action("SomeAction", "SomeController")',
                    type: 'GET',
                    cache: false,
                    data: { selectedFunction: selectedFunction }
                    success: function(result) {
                        $('#resultsContainer').html(result);
                    }
                });
            }
        });
    });
</script> 
```

如果需要，您还可以包含第二个下拉列表的选定值：

```
data: { 
    selectedFunction: $(this).val(),
    someOtherValue: $('#SomeOtherDropDown').val()
} 
```

并且您的控制器操作将使用这些值来过滤结果并将其传递给局部视图：

```
public ActionResult SomeAction(string selectedFunction, string someOtherValue) 
{
    IEnumerable<SomeResultModel> results = ...
    return PartialView(results);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:06:27.877

To do that, I'm afraid you will have to add JQuery to the list of skills needed for your project :)

You need, using JQuery, to create a handler for the change event on your DropDownList. In that event handler, post datas to another Action Method, like this one:

```
public ActionResult Filter(int id)
{
    var docs = db.GetData().Where(d => d.Id == id);

    return View("Index", docs);
} 
```

You can do that, by simply calling the Url /{YourController}/Filter/{TheValueForId}.

When you're starting in MVC and LINQ, this is definitely not the best test case you could pick (if you picked it).

If you have the choice, try simpler things as a start.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T16:09:37.403

你会使用这样的东西。这是一个 Telerik Grid 示例。

```
$('#btnFilter).on('click', function(e){
    e.preventDefault();
    var grid = $("#grid").data("kendoGrid");
    var new_data = getData();
    grid.dataSource.data(new_data);
});

function getData() {
    var _resData;
    var name= $('#txtName').val();
    $.ajax({
        type: 'POST',
        url: '/MyContoller/Index/',
        dataType: 'json',
        data: { name: name},
        success: function (data) {
            _resData = data; 
        },
        data: {},
        async: false
    });
    return _resData;
} 
```

在这个例子中，控制器是“我的控制器”，动作是“索引”

# java - 使用 webdriver 与可爱的编辑器交互

> ID：16108693
> 
> 赞同：0
> 
> 时间：2013-04-19T15:56:09.923
> 
> 标签：java, selenium, webdriver, cuteeditor

有谁知道我如何使用 webdriver 与可爱的编辑器进行交互。我想清除文本？

```
 <iframe id="CE_Editor1_ID_Frame" src="cuteeditor_files/template.asp"
 frameborder="0" class="CuteEditorFrame CuteEditorFrame"
 style="background-color: white; border: 1px solid rgb(221, 221, 221);
 height: 100%; width: 100%; display: block;"></iframe> 
```

下面的代码不起作用？

```
driver.switchTo().frame(0);
driver.switchTo().activeElement().clear(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:24:08.933

我在[http://cutesoft.net/example/general.aspx](http://cutesoft.net/example/general.aspx)上查看了可爱的编辑器演示，现在我明白了为什么你使用`driver.switchTo().activeElement()`而不是寻找 textarea/input，因为 iframe 是“textarea”，而你想要清除 iframe 中的所有内容。

我假设你的类似于演示

```
<iframe id="CE_Editor1_ID_Frame" src="cuteeditor_files/template.asp" frameborder="0" class="CuteEditorFrame CuteEditorFrame" style="background-color: white; border: 1px solid rgb(221, 221, 221); height: 100%; width: 100%; display: block;">
    <html>
        <head></head>
        <body>
            <table>the real stuff in the editor, you want to clear this, right?</table>
            <br>
            <br>
        </body>
    </html>
</iframe> 
```

我不认为 Selenium 提供任何删除节点的功能，但您可以通过 JavascriptExecutor 实现这一点。**警告**：未经测试的代码，这里只有逻辑。你需要自己调试一下。

```
// first try to avoid switching frames by index, unless you have no other ways.

// if you have only one frame with class name CuteEditorFrame
WebElement editorFrame = driver.findElement(By.cssSelector(".CuteEditorFrame"));
driver.switchTo().frame(editorFrame);

// if the id 'CE_Editor1_ID_Frame' not dynamic
WebElement editorFrame = driver.findElement(By.cssSelector("#CE_Editor1_ID_Frame"));
driver.switchTo().frame(editorFrame); // driver.switchTo().frame("CE_Editor1_ID_Frame");

// then remove everything inside the iframe's body
JavascriptExecutor js;
if (driver instanceof JavascriptExecutor) {
    js = (JavascriptExecutor)driver;
}
WebElement editorBody = driver.findElement(By.cssSelector("body"));
js.executeScript("arguments[0].innerHTML = ''", editorBody);

// alternatively, using sendKeys directly is a better way
WebElement body = driver.findElement(By.tagName("body")); // then you find the body
body.sendKeys(Keys.CONTROL + "a"); // send 'ctrl+a' to select all
body.SendKeys("Some text"); 
```

# c# - 我可以从 Dapper 查询返回多个派生类型的集合吗

> ID：16108695
> 
> 赞同：13
> 
> 时间：2013-04-19T15:56:13.233
> 
> 标签：c#, inheritance, subclass, dapper

我有一个类似于这样的类结构：

```
public abstract class Device
{
    public int DeviceId { get; set; }
    //Additional Properties
}

public class DeviceA : Device
{
    //Specific Behaviour
}

public class DeviceB : Device
{
    //Specific Behaviour
} 
```

我需要检索设备列表或单个设备，该设备被实例化为适当的派生类型（基于数据库中设备记录中的类型值）。也就是说，`Device`对象的集合应该包含多个不同类型的对象，所有这些对象都派生自`Device`.

我已经通过以下方式实现了这一点，但是感觉有些不对劲。

```
public static IEnumerable<Device> AllDevices()
{
    using (var connection = CreateConnection())
    {
        connection.Open();
        return connection.Query<dynamic>("SELECT * FROM Device").Select<dynamic, Device>(d =>
            {
                Device device = null;
                if (d.DeviceTypeID == 1)
                    device = new DeviceA();
                else if (d.DeviceTypeID == 2)
                    device = new DeviceB();
                else throw new Exception("Unknown Device");
                device.DeviceId = d.DeviceID;
                return device;
            });
    }
} 
```

这是使用 Dapper 实现此目的的正确方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T07:12:51.100

在当前构建中，这可能是唯一的选择（特别是因为基本类型是抽象的）。但是，考虑建议区分继承系统的方法并不是不合理的。这不是我们迄今为止所做的事情，仅仅是因为它还没有出现——但这听起来并非不可能。我能看到的最大问题（显然除了 IL-wrangling）就是我们如何表达这种关系。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-13T04:31:07.530

我想出了这个解决方案：

```
using (IDbConnection db = new MySqlConnection(ConfigurationManager.ConnectionStrings["yourConnection"].ConnectionString))
        {
            return db.Query<dynamic, DeviceA, DeviceB, Device>(@"
                Select
                    Discriminator,
                    ...
                From Device", (d, da, db) =>
                {
                    if (p.Discriminator == "DeviceA")
                    {
                        return new DeviceA();
                    }
                    else if (p.Discriminator == "DeviceB")
                    {
                         return new DeviceB();
                    }
                    return d;
                }); 
```

听起来很棘手，但它确实有效！

希望它可以帮助你。}

# python - python中强大而快速的哈希函数（搜索算法）

> ID：16108696
> 
> 赞同：1
> 
> 时间：2013-04-19T15:56:13.867
> 
> 标签：python, algorithm, hash, hashtable, robustness

Python 有一个默认的搜索功能：

```
x in [x,y,z,] 
```

其中 x,y,z 可以是任何整数或字符，但这是默认的顺序搜索，我想知道如何在 python 中使用手动散列搜索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T15:57:01.777

使用 a[`set()`](http://docs.python.org/2/library/stdtypes.html#set-types-set-frozenset)代替：

```
x in {x,y,z} 
```

这在引擎盖下使用了一个哈希表，因此搜索是 O(1)。

# c# - 如何停止 Visual Studio 更改 DLL 的运行时版本

> ID：16108697
> 
> 赞同：1
> 
> 时间：2013-04-19T15:56:18.153
> 
> 标签：c#, visual-studio-2010, dll

我遇到了以下问题，我正在添加一个 DLL 的引用 System.Data.SQLite 以特定于 C# 程序，添加后正确添加为版本 4.0.30319，并且我的程序运行完美。

但是，当我保存我的工作并关闭 Visual Studio 时，下次我打开项目 Visual Studio 现在将版本标识为 v2.0.50727，即使 DLL 没有以任何方式更改，因此我的程序将不会运行，直到我删除引用并重新添加它们。

我不知道为什么视觉工作室（2010）会这样做，但有人知道如何阻止它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:59:20.007

确保在引用的程序集属性中将“使用特定版本”属性设置为“true”。

重新启动时，VS 可能会从 GAC 中选择 SQLite 版本。

# python - 在 django 向导中用于文件上传的 Celery 任务

> ID：16108704
> 
> 赞同：1
> 
> 时间：2013-04-19T15:56:30.307
> 
> 标签：python, django, celery

我有一个涵盖两种形式的 WizardView，第二个有一个 FileField。是否可以创建一个 Celery 任务来从该 FileField 上传文件？

我应该创建另一个 FILE_UPLOAD_HANDLER 吗？我在[https://docs.djangoproject.com](https://docs.djangoproject.com)找到的有关使用向导处理文件的所有信息都是关于必须将 file_storage 添加到 WizardView 子类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:54:26.370

实际上上传文件是一个请求，因此你需要用一个视图来处理它，然后做任何你想做的事情，包括启动一个 celery 任务来处理文件操作。这种方法的问题是，如果 celery 任务返回某些内容，则无法向客户端提供定期响应（但您可以，例如，定期从客户端 ping 一个特殊的 url 或使用 socket.io 来传递结果）。

有一件事不会改变 - 文件上传，无论是单独的还是在常规表单中，都是一个请求，因此您必须首先使用视图处理它，然后才能将接收到的数据传递给任务或直接处理它。

此外，文件上传处理程序处理从套接字接收数据。我想你可以创建一个在芹菜任务中工作的任务，或者更确切地说是任务，因为通过套接字发送的数据的部分性质，但据我所知，在文件上传之前（或在更好的情况是，您可以访问除文件之外的所有数据），因此将其发送到 celery 是没有意义的，特别是如果您需要创建涉及对文件进行某些操作的响应时。

# dynamics-crm-2011 - Automatic Emails after adding new clients/prospects

> ID：16108706
> 
> 赞同：0
> 
> 时间：2013-04-19T15:56:34.210
> 
> 标签：dynamics-crm-2011, crm

Ok, We have been trying to find a way to send an automatic email to new clients/prospects that we add into our CRM. Is it possible? If there's no easy way, what's the complicated way of doing it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:45:43.363

工作流程怎么样？

*   [创建工作流 - Zero2Ten 的 Microsoft Dynamics CRM 2011 系列](http://www.youtube.com/watch?v=1B5efFw5Vpk)
*   [教程：使用工作流创建具有阶段的销售流程](http://rc.crm.dynamics.com/RC/2011/en-us/online/5.1_CTP/salesworkflow.aspx)

# list - 从没有elem的Haskell列表中删除重复项

> ID：16108714
> 
> 赞同：33
> 
> 时间：2013-04-19T15:56:51.463
> 
> 标签：list, haskell, recursion

我正在尝试定义一个从列表中删除重复项的函数。到目前为止，我有一个有效的实现：

```
rmdups :: Eq a => [a] -> [a]
rmdups [] = []
rmdups (x:xs)   | x `elem` xs   = rmdups xs
                | otherwise     = x : rmdups xs 
```

但是我想在不使用`elem`. 最好的方法是什么？

我想使用我自己的函数而不是`nub`or来做到这一点`nubBy`。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-19T16:29:48.190

您的代码`nub`都具有`O(N^2)`复杂性。

您可以通过排序、分组和只取每个组的第一个元素来提高复杂性`O(N log N)`并避免使用。`elem`

从概念上讲，

```
rmdups :: (Ord a) => [a] -> [a]
rmdups = map head . group . sort 
```

假设您从列表开始`[1, 2, 1, 3, 2, 4]`。通过排序，你得到，`[1, 1, 2, 2, 3, 4]`; 通过分组，你得到，`[[1, 1], [2, 2], [3], [4]]`; 最后，通过占据每个列表的头部，你得到`[1, 2, 3, 4]`.

上述的完整实现只涉及扩展每个功能。

请注意，这需要对`Ord`列表元素进行更强的约束，并且还会更改它们在返回列表中的顺序。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-09-05T04:35:45.713

更容易。

```
import Data.Set 
mkUniq :: Ord a => [a] -> [a]
mkUniq = toList . fromList 
```

*在O(n)*时间内将集合转换为元素列表：

> ```
> toList :: Set a -> [a] 
> ```

*在O(n log n)*时间内从元素列表创建一个集合：

> ```
> fromList :: Ord a => [a] -> Set a 
> ```

在 python 中也不例外。

```
def mkUniq(x): 
   return list(set(x))) 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-04-19T18:17:38.127

与@scvalex 的解决方案相同，以下具有`O(n * log n)`复杂性和`Ord`依赖性。与它不同的是，它保留了顺序，保留了项目的第一次出现。

```
import qualified Data.Set as Set

rmdups :: Ord a => [a] -> [a]
rmdups = rmdups' Set.empty where
  rmdups' _ [] = []
  rmdups' a (b : c) = if Set.member b a
    then rmdups' a c
    else b : rmdups' (Set.insert b a) c 
```

## 基准测试结果

![基准测试结果](https://i.stack.imgur.com/EpJLW.png)

如您所见，基准测试结果证明此解决方案是最有效的。[您可以在此处](https://gist.github.com/nikita-volkov/5451343)找到此基准测试的来源。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-04-19T16:03:51.373

我认为没有`elem`（或您自己重新实现它）您将无法做到。

但是，您的实现存在语义问题。当元素重复时，您将保留*最后*一个。就个人而言，我希望它保留第一个重复项并删除其余项。

```
*Main> rmdups "abacd"
"bacd" 
```

解决方案是将“可见”元素作为状态变量贯穿。

```
removeDuplicates :: Eq a => [a] -> [a]
removeDuplicates = rdHelper []
    where rdHelper seen [] = seen
          rdHelper seen (x:xs)
              | x `elem` seen = rdHelper seen xs
              | otherwise = rdHelper (seen ++ [x]) xs 
```

这或多或少是如何`nub`在标准库中实现的（在[此处](http://hackage.haskell.org/package/base-4.7.0.0/docs/src/Data-List.html#nub)阅读源代码）。的实现的微小差异`nub`确保它[是非严格的](http://www.haskell.org/haskellwiki/Non-strict_semantics)，而`removeDuplicates`上面是严格的（它在返回之前消耗整个列表）。

如果您不担心严格性，这里的原始递归实际上是多余的。`removeDuplicates`可以在一行中实现`foldl`：

```
removeDuplicates2 = foldl (\seen x -> if x `elem` seen
                                      then seen
                                      else seen ++ [x]) [] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-16T09:12:08.547

现在回答这个问题为时已晚，但我想分享我的原创解决方案，不使用`elem`也不假设`Ord`。

```
rmdups' :: (Eq a) => [a] -> [a]
rmdups' [] = []
rmdups' [x] = [x]
rmdups' (x:xs) = x : [ k  | k <- rmdups'(xs), k /=x ] 
```

该解决方案在输入结束时删除重复项，而问题实现在开始时删除。例如，

```
rmdups "maximum-minimum"
-- "ax-nium"

rmdups' "maximum-minimum"
-- ""maxiu-n" 
```

此外，此代码复杂度为 O(N*K)，其中 N 是字符串的长度，K 是字符串中唯一字符的数量。N >= K 因此，在最坏的情况下它将是 O(N^2) 但这意味着字符串中没有重复，这与您尝试删除字符串中的重复项不同。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-05T23:12:18.837

**Graham Hutton**`rmdups`在 p 上有一个函数。86 的**Haskell 编程**。它保持秩序。如下。

```
rmdups :: Eq a => [a] -> [a]
rmdups [] = []
rmdups (x:xs) = x : filter (/= x) (rmdups xs)
rmdups "maximum-minimum" 
```

> “maxiu-n”

这一直困扰着我，直到我看到赫顿的功能。然后，我又试了一次。有两个版本，第一个保留最后一个副本，第二个保留第一个。

```
rmdups ls = [d|(z,d)<- zip [0..] ls, notElem d $ take z ls]
rmdups "maximum-minimum" 
```

> “maxiu-n”

如果您想获取列表的第一个而不是最后一个重复元素，就像您尝试做的那样，只需在函数中更改`take`为`drop`并将枚举更改`zip [0..]`为`zip [1..]`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-05-13T18:19:33.840

我想在@fp_mora 的回答中补充说，**在 Haskell 编程的***第 136 页*上，还有另一个略有不同的实现：

 **```
rmdups :: Eq a => [a] -> [a]
rmdups [] = []
rmdups (x : xs) = x : rmdups (filter (/= x) xs) 
```

我更容易把头绕在这个上面。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-04T06:43:19.397

您也可以使用此压缩功能。

```
cmprs ::Eq a=>[a] -> [a]
--cmprs [] = [] --not necessary
cmprs (a:as) 
    |length as == 1 = as
    |a == (head as) = cmprs as
    |otherwise = [a]++cmprs as 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-08-23T03:06:01.477

使用[递归方案](https://hackage.haskell.org/package/recursion-schemes-5.0.2)：

```
import Data.Functor.Foldable

dedup :: (Eq a) => [a] -> [a]
dedup = para pseudoalgebra
    where pseudoalgebra Nil                 = []
          pseudoalgebra (Cons x (past, xs)) = if x `elem` past then xs else x:xs 
```

虽然这肯定更先进，但我认为它非常优雅，并展示了一些有价值的函数式编程范例。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-09T10:22:13.610

使用 dropWhile 也可以，但请记住在使用它之前对列表进行排序

```
rmdups :: (Eq a) => [a] -> [a]
rmdups [] = []
rmdups (x:xs) = x : (rmdups $ dropWhile (\y -> y == x) xs) 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-11-30T18:52:33.430

```
remove_duplicates (x:xs)
  | xs == []       = [x]
  | x == head (xs) = remove_duplicates xs
  | otherwise      = x : remove_duplicates xs 
```

你可以尝试这样做。我只是用我自己的实现替换了“elem”。这个对我有用。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-11-30T14:56:31.773

...或通过使用来自 Data.List 的函数 union 应用于自身：

```
import Data.List

unique x = union x x 
```**

# jquery - 无法在 $ajax 发布请求上检索自定义标头

> ID：16108715
> 
> 赞同：2
> 
> 时间：2013-04-19T15:56:51.550
> 
> 标签：jquery, ajax, asp.net-web-api, custom-headers

我正在使用 .NET Web API。对于授权，我在标题中添加自定义令牌，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/u2XKh.png)

问题是我无法从客户端的响应中检索“授权令牌”。我已经尝试过使用 Angular 的 $http 和 jQuery $ajax。当我使用 Fiddler 时，我得到了响应中发送的所有标头。包括自定义的“Authorization-Token”标头。

这是 jQuery $ajax 代码：

```
$.ajax({
 type: "POST",
 url: "http://localhost:16879/api/authentication/register",
 data: {
 Email: "blablagmail.com",
 Password: "password1"
}
}).complete(function( a, b) {
 console.log(b.getAllResponseHeaders();
}); 
```

结果：

![ajax请求的结果](https://i.stack.imgur.com/tHBpT.png)

使用 Fiddler 的结果：

![在此处输入图像描述](https://i.stack.imgur.com/KwLlL.png)

是否可以在 $ajax 请求中获取从服务器发送的所有标头？

解决方法是在正文中实际发送令牌，并在客户端发出另一个请求时设置自定义标头。但我希望通过在响应的标题中获取“授权令牌”来使其工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:02:25.687

您最好使用 body 传递[OAuth 2.0 资源所有者密码授权中也建议的访问令牌](https://www.rfc-editor.org/rfc/rfc6749#section-4.3.3)

我看到一些线程说当响应不成功时 jquery 可能不会设置自定义标头。

# html - 在 Firefox 和 Ie9.0 中播放视频时的问题

> ID：16108716
> 
> 赞同：0
> 
> 时间：2013-04-19T15:56:57.423
> 
> 标签：html, internet-explorer, firefox, html5-video, video.js

我正在尝试创建闪存后备，因为我只有 MP4 文件，但它对我不起作用。

您的生产站点也有同样的问题，在 firefox/ie9 中播放视频。

谢谢， 帕里马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:23:28.860

1.  使用 对您的视频进行编码`h264`。
2.  将您的页面 Doctype 为`html5`.
3.  编写视频标签并将您的 mp4 文件添加到源。

它假定您使用`h264`.

# ios - 未知错误facebook graph api iOS

> ID：16108721
> 
> 赞同：3
> 
> 时间：2013-04-19T15:57:03.813
> 
> 标签：ios, facebook-graph-api, facebook-ios-sdk

我正在尝试使用具有以下路径的图形 api 触发请求，`/me/?fields=friends.fields(photos)`但我不断收到`body = { "error_code" = 1; "error_msg" = "An unknown error occurred"; }; code = 500;`

有人可以帮忙吗？

# ruby - RMagick 无法打开图像

> ID：16108723
> 
> 赞同：1
> 
> 时间：2013-04-19T15:57:11.597
> 
> 标签：ruby, rmagick

今天我尝试编写一个从文件夹生成动画 gif 的代码，但我收到了这个错误：

```
.../.gem/ruby/2.0.0/gems/rmagick-2.13.2/lib/RMagick.rb:1635:in `read': unable to open image `0.jpg,3.jpg,1.jpg,2.jpg': No such file or directory @ error/blob.c/OpenBlob/2641 (Magick::ImageMagickError)
from .../.gem/ruby/2.0.0/gems/rmagick-2.13.2/lib/RMagick.rb:1635:in `block in initialize'
.../.gem/ruby/2.0.0/gems/rmagick-2.13.2/lib/RMagick.rb:1634:in `each'
.../.gem/ruby/2.0.0/gems/rmagick-2.13.2/lib/RMagick.rb:1634:in `initialize'
from .../bin/scripts/animate.rb:20:in `new'
from .../bin/scripts/animate.rb:20:in `<main>' 
```

这是代码：

```
#!/usr/bin/env ruby

require 'RMagick'
include Magick

files = Dir.glob"*.jpg"

if (!ARGV[0])
 puts "Usage:"
 puts "animate.rb 10"
 puts "-0 delay ex. 10"
else
  f = files.join(',').to_s
  animation = ImageList.new("#{f}")
  animation.delay = ARGV[0].to_i
  animation.write("animated.gif")
 exit
end 
```

非常感谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:16:21.700

ImageList.new 需要文件名作为参数，一次一个。您只提供一个参数，即连接文件名的字符串。所以而不是

```
f = files.join(',').to_s
animation = ImageList.new("#{f}") 
```

利用

```
animation = ImageList.new *files 
```

指示 ruby​​ 将`*files`数组成员扩展为单独的参数

# c++ - 只有静态方法的类比命名空间更可取吗？

> ID：16108730
> 
> 赞同：7
> 
> 时间：2013-04-19T15:57:33.283
> 
> 标签：c++, namespaces, static-members

我受到[这个问题](https://stackoverflow.com/questions/16106838/the-position-of-the-static-keyword-in-member-method-declaration?noredirect=1#comment23001645_16106838)下的评论的启发。

我没有看到为什么一个*只有静态函数的**类比命名空间*（只有函数）更好的设计。欢迎列出这两种方法的优缺点。有一些实际的例子会很棒！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T16:02:40.023

一个非风格的区别是您可以使用类作为模板参数，但不能使用命名空间。这有时用于策略类，例如[`std::char_traits`](http://en.cppreference.com/w/cpp/string/char_traits).

在那个用例之外，我会坚持使用具有常规功能的命名空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T16:05:38.227

Classes with static methods

*   You can have class inside another class, you can't have namespace inside class (because it probably does not make any sense).
*   They work with *very* ancient compilers.

Namespaces

~~- you can create namespace aliases~~

~~`namespace io = boost::iostreams;`~~ Well, you can `typedef` classes, so this is moot point.

*   you can import symbols to another namespaces.

    `namespace mystuff { using namespace boost; }`

*   you can import selected symbols.

    `using std::string;`

*   they can span over several files (very important advantage)

*   inline namespaces (C++11)

Bottom line: namespaces are way to go in C++.

# java - 转换集 > 到HashMap

> ID：16108734
> 
> 赞同：45
> 
> 时间：2013-04-19T15:57:52.953
> 
> 标签：java, map, set

在我的代码中，我`Set<Map.Entry<K, V>>`从地图创建了一个。现在我想重新创建相同的地图形式，所以我想将`HashSet<Map.Entry<K, V>>`背面转换为`HashMap<K, V>`. Java 是否有这样做的本机调用，或者我是否必须循环设置元素并手动构建地图？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2015-08-30T10:18:04.880

更简单的 Java-8 解决方案涉及`Collectors.toMap`：

```
Map<Integer, String> mapFromSet = set.stream()
    .collect(Collectors.toMap(Entry::getKey, Entry::getValue)); 
```

`IllegalStateException`如果遇到重复键，将抛出一个。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-19T16:05:38.610

`HashSet`java中没有用于和之间直接转换的内置API `HashMap`，您需要遍历set并使用`Entry`fill in map。

一种方法：

```
Map<Integer, String> map = new HashMap<Integer, String>();
    //fill in map
    Set<Entry<Integer, String>> set = map.entrySet();

    Map<Integer, String> mapFromSet = new HashMap<Integer, String>();
    for(Entry<Integer, String> entry : set)
    {
        mapFromSet.put(entry.getKey(), entry.getValue());
    } 
```

虽然这里的目的是什么，但如果您对此进行任何更改，`Set`也将反映在`Map`set 返回的`Map.entrySet`是 backup by`Map`中。见`javadoc`下文：

> Set<Entry<Integer, String>> java.util.Map.entrySet()
> 
> 返回此映射中包含的映射的 Set 视图。集合由地图支持，因此对地图的更改会反映在集合中，反之亦然。如果在对集合进行迭代时修改了映射（通过迭代器自己的删除操作或通过迭代器返回的映射条目上的 setValue 操作除外），则迭代的结果是未定义的。该集合支持元素移除，即通过 Iterator.remove、Set.remove、removeAll、retainAll 和 clear 操作从映射中移除相应的映射。它不支持 add 或 addAll 操作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-23T09:51:47.287

相当短的 Java 8 解决方案。可以处理重复的键。

```
 Map<Integer, String> map = new HashMap<>();
    //fill in map
    Set<Map.Entry<Integer, String>> set = map.entrySet();
    Map<Integer, String> mapFromSet = set.stream().collect(Collectors.toMap(Entry::getKey,
      Entry::getValue,
      (a,b)->b)); 
```

编辑：感谢[shmosel](https://stackoverflow.com/users/1553851/shmosel)，他值得比我更多的功劳

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-07-04T11:34:23.670

从 Guava 19 开始，您可以使用[`ImmutableMap.copyOf(Iterable<Map.Entry<K,V>>)`](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/ImmutableMap.html#copyOf-java.lang.Iterable-)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-06T09:16:10.887

这些是公共库中的一些`toMap`实用程序，但不幸的是，它们都没有`Set`直接支持，所以你需要先做[`Set#toArray()`](https://docs.oracle.com/javase/8/docs/api/java/util/Set.html#toArray--)。（我为[尼尔的回答省略了](https://stackoverflow.com/a/44904884/188256)[番石榴](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/ImmutableMap.html#copyOf-java.lang.Iterable-)，这可以说是最好的）

# Commons Lang 的[ArrayUtils.toMap](https://commons.apache.org/proper/commons-lang/javadocs/api-3.7/org/apache/commons/lang3/ArrayUtils.html#toMap-java.lang.Object:A-)

```
Map<Object, Object> map = ArrayUtils.toMap(entrySet.toArray());

// to recover the type...
@SuppressWarnings("unchecked")
Map<K, V> typedMap = (Map<K, V>)(Map<?, ?>)map; 
```

# Commons Collections 的[MapUtils.putAll](https://commons.apache.org/proper/commons-collections/javadocs/api-4.0/org/apache/commons/collections4/MapUtils.html#putAll%28java.util.Map,%20java.lang.Object[]%29)

```
Map<K, V> map = MapUtils.putAll(new HashMap<K, V>(), entrySet.toArray()); 
```

## Java 9 的[Map.ofEntries](https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#ofEntries-java.util.Map.Entry...-)

```
 // convert to array and recover the type...
 @SuppressWarnings("unchecked")
 Map<K, V> map = Map.ofEntries(entrySet.toArray(new Map.Entry[0]));

 // You need to copy again if you want a mutable one
 Map<K, V> hashmap = new HashMap<>(map); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-03-07T23:20:50.217

### Java 9+ 没有抑制警告

从 Java 9 版本开始，集合接口提供了一堆方便的静态方法，允许您内联地做很多事情。[`Map.ofEntries(Map.Entry... entries)`](https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#ofEntries-java.util.Map.Entry...-)有一个使用静态方法创建不可变映射的内置解决方案。

```
Map<Integer,String> map = Map.ofEntries(
        new SimpleEntry<>(1, "one"), 
        new SimpleEntry<>(2, "two"), 
        new SimpleEntry<>(3, "three")); 
```

请注意，该[`Map.entry(K, V)`](https://docs.oracle.com/javase/9/docs/api/java/util/Map.html#entry-K-V-)方法也是可用的，它使一切变得不那么冗长。

```
Map<Integer,String> map2 = Map.ofEntries(
        Map.entry(1, "one"), 
        Map.entry(2, "two"), 
        Map.entry(3, "three")); 
```

假设你有`Set<Map.Entry<K, V>>`，你需要一个数组才能使用方法 using [`Set#toArray(T[])`](https://docs.oracle.com/javase/9/docs/api/java/util/Set.html#toArray-T:A-)。由于禁止创建通用数组，因此需要显式转换，这是该解决方案的唯一缺点。

```
Set<Map.Entry<Integer,String>> set = ...
Entry<Integer, String>[] entries = set.<Entry<Integer,String>>toArray(Entry[]::new);
Map<Integer,String> map = Map.ofEntries(entries); 
```

### 爪哇 8

Java 8 带来了 Stream API，使用[`Collectors.toMap(keyFn, valueFn)`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html).

```
Set<Map.Entry<Integer,String>> set = ...
Map<Integer,String> map = set.stream()
                             .collect(Collectors.toMap(Entry::getKey, Entry::getValue)); 
```

为避免`Map.Entry`字典中禁止出现两个具有相同键的错误行为，请使用[`Collectors.toMap(keyFn, valueFn, mergeFn)`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-). 返回`first`或者`second`取决于您是否要保留为某个键找到的第一个值或最新的值。

```
Map<Integer,String> map = set.stream().collect(Collectors.toMap(
        Entry::getKey, 
        Entry::getValue, 
        (first, second) -> first));   // or '-> second' if you need the latests 
```

### Java 7 及更早版本

[正如现有答案](https://stackoverflow.com/a/16108889/3764965)所描述的那样，您所能做的就是对每个迭代进行程序性迭代。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-29T17:53:05.950

在具有正确组合器的 Java 8 中

```
Map<Integer, String> map = new HashMap<>();
//fill in map
Set<Map.Entry<Integer, String>> set = map.entrySet();

Map<Integer, String> mapFromSet =set.stream().collect(HashMap::new,(t, u) -> t.put(u.getKey(), u.getValue()), 
(Map mapToReturn, Map otherMap) ->
    {
        otherMap.entrySet().forEach((Map.Entry entry) -> {
            mapToReturn.put(entry.getKey(),entry.getValue());
        });
        return mapToReturn;});); 
```

# python - 为什么他们可以在 python2.7 中得到相同的结果？关于列表中每个元素的分配

> ID：16108735
> 
> 赞同：0
> 
> 时间：2013-04-19T15:57:53.117
> 
> 标签：python, list

我创建了一个喜欢的列表，`aa=[ [] for i in range(10)]`并且我想要为每个元素分配！

我使用两种方法来做到这一点，但一种方法可以工作，另一种方法不能工作，我不知道为什么。

请告诉我！谢谢！

```
aa=[ [] for i in range(10)] 
```

方法一：不能按我的意愿工作。

```
for a in aa:a=[2]   it get the result [[], [], [], [], [], [], [], [], [], []] 
```

方法二：可以随心所欲。

```
for i in range(len(aa)): aa[i]=[2] 
```

它得到结果

```
[[2], [2], [2], [2], [2], [2], [2], [2], [2], [2]] 
```

我做了另一个测试：

```
for index,a in enumerate(aa): print aa[index] is `a` 
```

结果都是真的。

我认为`a`和`aa[i]`是一样的，但我找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:06:01.843

第一个循环依次分配`a`给每个元素，但重新分配根本不影响。`aa``=``a``aa`

第二个循环`aa`直接修改，如您所料。

为了演示第一个效果，稍微改变你的测试：

```
for index,a in enumerate(aa):
    print aa[index] is a  # should print 'True'
    a = [2]
    print aa[index] is a  # should print 'False' because you've reassigned a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:05:26.537

在这里：

```
for a in aa:
  a = [2] 
```

您没有分配给实际列表，只是分配给一个名为created 用于迭代列表`aa`的局部变量；`a`该变量`a`以前指向内部的一个位置，`aa`但现在您分配`[2]`给它，更改了变量的值，但根本没有修改`aa`。这就是为什么它不起作用。另一方面，在这里：

```
for i in range(len(aa)):
    aa[i] = [2] 
```

您*实际上*是在修改内部的位置`aa`，因此`[2]`在该位置分配了值`aa[i]`。

# python - 通过列表列表递归“所有路径” - Python

> ID：16108736
> 
> 赞同：4
> 
> 时间：2013-04-19T15:58:00.020
> 
> 标签：python, recursion

一个特殊的问题，给定一个列表列表（这里最多嵌套一层）：

```
[['a', 'b'], 'c', ['d', 'e'], ['f', 'g'], 'h'] 
```

..找到所有长度与给定列表相同并包含子列表中元素的所有可能组合的列表，其中给定子列表的恰好1个元素与原始子列表位于同一位置（甚至很难用文字表达）。也就是说，找到这个：

```
['a', 'c', 'd', 'f', 'h']
['a', 'c', 'd', 'g', 'h']
['a', 'c', 'e', 'f', 'h']
['a', 'c', 'e', 'g', 'h']
['b', 'c', 'd', 'f', 'h']
['b', 'c', 'd', 'g', 'h']
['b', 'c', 'e', 'f', 'h']
['b', 'c', 'e', 'g', 'h'] 
```

现在，我找到了解决方案，但对我来说并不满意：

```
def all_paths(s, acc=None, result=None):
    # not using usual "acc = acc or []" trick, because on the next recursive call "[] or []" would be
    # evaluated left to right and acc would point to SECOND [], which creates separate accumulator 
    # for each call stack frame
    if acc is None:
        acc = []
    if result is None:
        result = []
    head, tail = s[0], s[1:]
    acc_copy = acc[:]
    for el in head:
        acc = acc_copy[:]
        acc.append(el)
        if tail:
            all_paths(tail, acc=acc, result=result)
        else:
            result.append(acc)
    return result 
```

如您所见，它涉及复制累加器列表 TWICE，原因很明显，如果 .append() 或 .extend() 方法在递归堆栈中被调用，累加器将被修改，因为它是通过标签传递的（以官方术语共享？）。

我试图制定解决方案，pop()s 和 append()s 相关数量的项目从累加器中取出，但无法正确处理：

```
def all_p(s, acc=None, result=None, calldepth=0, seqlen=0):
    if acc is None:
        acc = []
    if result is None:
        seqlen = len(s)
        result = []
    head, tail = s[0], s[1:]
    for el in head:
        acc.append(el)
        if tail:
            all_p(tail, acc=acc, result=result, calldepth=calldepth+1, seqlen=seqlen)
        else:
            result.append(acc[:])
            print acc
            for i in xrange(1+seqlen-calldepth):
                acc.pop()
    return result 
```

结果：

```
['a', 'c', 'd', 'f', 'h']
['a', 'c', 'd', 'g', 'h']
['a', 'c', 'd', 'e', 'f', 'h']
['a', 'c', 'd', 'e', 'g', 'h']
['a', 'c', 'd', 'e', 'b', 'c', 'd', 'f', 'h']
['a', 'c', 'd', 'e', 'b', 'c', 'd', 'g', 'h']
['a', 'c', 'd', 'e', 'b', 'c', 'd', 'e', 'f', 'h']
['a', 'c', 'd', 'e', 'b', 'c', 'd', 'e', 'g', 'h']
['a', 'c', 'd', 'f', 'h']
['a', 'c', 'd', 'g', 'h']
['a', 'c', 'd', 'e', 'f', 'h']
['a', 'c', 'd', 'e', 'g', 'h']
['a', 'c', 'd', 'e', 'b', 'c', 'd', 'f', 'h']
['a', 'c', 'd', 'e', 'b', 'c', 'd', 'g', 'h']
['a', 'c', 'd', 'e', 'b', 'c', 'd', 'e', 'f', 'h']
['a', 'c', 'd', 'e', 'b', 'c', 'd', 'e', 'g', 'h'] 
```

显然，这是因为这里的深度优先递归在调用链上上下跳跃，我无法获得正确的 pop() 数量来微调累加器列表。

我确实意识到这没有什么实际好处，因为复制列表是 O(n)，而从列表中弹出 k 个项目是 O(k)，所以这里没有太大的区别，但我很好奇这是否可以实现。

（背景：我正在重做电话代码基准，[http](http://page.mi.fu-berlin.de/prechelt/phonecode/) ://page.mi.fu-berlin.de/prechelt/phonecode/ ，这是找到所有单词的部分，但电话号码的每个部分都可以映射到几个字，像这样：

```
... '4824': ['fort', 'Torf'], '4021': ['fern'], '562': ['mir', 'Mix'] ... 
```

所以我需要通过选定的匹配单词和/或数字列表找到所有可能的“路径”，对应于给定的电话号码）

问题、要求：

1.  不复制累加器的版本可以修复吗？

2.  有没有使用 itertools 模块的解决方案？

3.  任何其他更好的方法来解决这个特定问题？像非递归解决方案，更快的解决方案，更少的内存密集型？

是的，我知道这是一大堆问题，但如果有人解决了其中的一个非空子集，我将不胜感激。:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T17:16:14.490

> 有没有使用 itertools 模块的解决方案？

是的，而且非常简单[`itertools.product()`](http://docs.python.org/2/library/itertools.html#itertools.product)。这对于您的具体示例就足够了...

```
>>> import itertools
>>> l = [['a', 'b'], 'c', ['d', 'e'], ['f', 'g'], 'h']
>>> for i in itertools.product(*l): print list(i)
['a', 'c', 'd', 'f', 'h']
['a', 'c', 'd', 'g', 'h']
['a', 'c', 'e', 'f', 'h']
['a', 'c', 'e', 'g', 'h']
['b', 'c', 'd', 'f', 'h']
['b', 'c', 'd', 'g', 'h']
['b', 'c', 'e', 'f', 'h']
['b', 'c', 'e', 'g', 'h'] 
```

...但正如 DSM 在评论中指出的那样，它仅适用于您的示例使用单字符字符串，它们是长度为 1 的序列对象。如果总是这样，你可以这样表达列表......

```
['ab', 'c', 'de', 'fg', 'h'] 
```

但是，在一般情况下，您可能希望确保所有列表项都是具有类似这样的序列...

```
>>> l = [None, int, 0, 'abc', [1, 2, 3], ('a', 'b')]
>>> for i in itertools.product(*[i if isinstance(i, (list, tuple)) else [i] for i in l]): print list(i)
[None, <type 'int'>, 0, 'abc', 1, 'a']
[None, <type 'int'>, 0, 'abc', 1, 'b']
[None, <type 'int'>, 0, 'abc', 2, 'a']
[None, <type 'int'>, 0, 'abc', 2, 'b']
[None, <type 'int'>, 0, 'abc', 3, 'a']
[None, <type 'int'>, 0, 'abc', 3, 'b'] 
```

> 任何其他更好的方法来解决这个特定问题？像非递归解决方案，更快的解决方案，更少的内存密集型？

任何解决方案都可能必须以某种方式使用递归，如果不在堆栈上，那么在堆上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T23:34:54.693

这是一个不那么 Pythonesque，但可能是可展开的版本：

```
def all_paths(l):
        if 1 == len(l):
                return [ l ]
        down = all_paths(l[1:])

        # We iterate only lists, not tuples, not strings
        if type(l[0]) in [ list ]:
                return [ [ ll ] + k for k in down for ll in l[0] ]
        return [ [ l[0] ] + k for k in down ]

l = [['a', 'b'], 'c', ['d', 'e'], ['f', 'g'], 'h']

for i in all_paths(l):
        print i 
```

在这种形式下，它在各方面都不如`itertools`解决方案：两倍的时间，四倍以上的内存影响：

```
HEAP SUMMARY (itertools)
in use at exit: 1,867,521 bytes in 537 blocks
total heap usage: 12,904 allocs, 12,367 frees, 8,444,917 bytes allocated

HEAP SUMMARY (lists)
in use at exit: 1,853,779 bytes in 498 blocks
total heap usage: 57,653 allocs, 57,155 frees, 9,272,129 bytes allocated 
```

同样展开函数 - 至少，以一种非常幼稚的方式 - 不如`itertools`（慢三倍）和两倍的内存分配：

```
HEAP SUMMARY:
in use at exit: 1,853,779 bytes in 498 blocks
total heap usage: 26,707 allocs, 26,209 frees, 8,812,153 bytes allocated

def all_paths(l):
        m   = len(l)-1
        val = [ i for i in range(0,m) ]
        ndx = [ 0 for i in l ]
        top = [ len(i) if type(i) in [list] else 0 for i in l ]
        while(True):
                path = [ l[i] if top[i] == 0 else l[i][ndx[i]] for i in val ]
                #print path
                n   = m
                ndx[n] = ndx[n] + 1
                while (ndx[n] >= top[n]):
                        ndx[n] = 0
                        n = n - 1
                        if (-1 == n):
                                return
                        ndx[n] = ndx[n] + 1 
```

（使用`enumerate`或`type(l[i])`导致更差的性能）。

# android - 管理应用程序状态

> ID：16108741
> 
> 赞同：0
> 
> 时间：2013-04-19T15:58:07.117
> 
> 标签：android, android-activity, android-lifecycle

这些天，Android Activity 生命周期让我有点头疼。

我想在应用程序进入后台之前存储最后一个显示的 Activity，以便在用户恢复应用程序时恢复正确的状态。问题在于，为什么应用程序进入后台而不是全部执行相同的操作有多种可能性。

为了清楚起见，假设我有 3 个活动；A-1、A-2 和 A-3（A-2 是 A-3 的入口）。A-2 和 A-3 只是普通的活动，但 A-1 是某种调度程序。它是清单文件中的启动器 Activity，它的唯一功能是读取`SharedPreference`其他两个在其`onPause()`方法中设置的基本上指示最后一个 Activity 是什么，并激活该 Activity 然后调用`this.finish()`. 直线前进。

场景是（在所有这些之后，用户从后台进程列表或启动器重新启动应用程序）：

1.  在 A-3 中，用户点击“返回”按钮并转到主屏幕。这运行`onPause()`，然后`onDestroy()`为 A-3。
2.  在 A-3 中，用户点击“主页”按钮并转到主屏幕。这运行`onPause()`，然后`onSavedInstanceState()`为 A-3。
3.  用户执行上述两项中的任何一项，然后调出后台进程列表并强制终止应用程序。不执行任何代码。
4.  操作系统检测到它需要释放内存，因此首先（两者中的）它强制终止后台进程，然后如果这还不够，则强制终止当前活动的进程。

现在在每种情况下都会发生以下情况：

1.  A-1 启动，它读取设置的首选项`onPause()`并按应有的方式启动 A-3。按设计工作（但可能不是最好的方法）。
2.  A-1 启动，并执行与上述相同的操作。
3.  现在事情变得棘手了。当应用程序重新启动时，没有任何迹象表明它已终止，因此 A-1 会读取首选项，然后在应该启动 A-2 时启动 A-3。**这是不受欢迎的，会破坏应用程序**。
4.  类似于数字 3。

我的问题是，**在这种情况下如何最好地管理应用程序状态**？

捆绑包是否仅在应用程序运行时才实时传递`onSavedInstanceState`，那么这是否是仅在“会话”期间保存此类信息的最佳方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:09:03.270

如果我正确理解您的需求，那么您可以简单地覆盖 A-3 的 onBackPressed() 以便它修改 SavedPreferences，并且当用户重新启动应用程序时，它将打开 A-3。

在第二种情况下，你不需要保存任何东西，因为应用程序没有关闭，它只是放在后台。当用户重新进入应用程序时，操作系统会自动重新激活上次活动的活动 - A-3。

在案例 3 和 4 中（可能在案例 2 中将其置于后台之后），如果应用程序被强制终止，那么您将不会修改 SavedPreferences，因为用户没有单击返回。

# c# - 一次运行不同的表单

> ID：16108744
> 
> 赞同：2
> 
> 时间：2013-04-19T15:58:11.813
> 
> 标签：c#, winforms

我正在尝试同时显示 2 个不同的表单。我尝试了以下代码，但它不起作用：

```
Form1 t1 = new Form1();
Form2 t2 = new Form2();
t2.Show();
t1.Show();

Application.Run(); 
```

我还尝试从 program.cs 运行第一个，从以下位置运行另一个`Form1_Load`：

```
private void Form1_Load(object sender, EventArgs e)
{
    Form2 form2 = new Form2();
    form2.Show();
} 
```

这也不起作用。

我究竟做错了什么？如何同时运行多个表单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T16:06:03.400

You can create a new `ApplicationContext` to represent multiple forms:

```
public class MultiFormContext : ApplicationContext
{
    private int openForms;
    public MultiFormContext(params Form[] forms)
    {
        openForms = forms.Length;

        foreach (var form in forms)
        {
            form.FormClosed += (s, args) =>
            {
                //When we have closed the last of the "starting" forms, 
                //end the program.
                if (Interlocked.Decrement(ref openForms) == 0)
                    ExitThread();
            };

            form.Show();
        }
    }
} 
```

Using that you can now write:

```
Application.Run(new MultiFormContext(new Form1(), new Form2())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:02:19.320

如果您在 Visual Studio 中为 C# 创建一个新的 Windows 窗体应用程序，它将让您使用单个窗体，然后您可以在主窗体中添加更多窗体。作为奖励，您将获得主窗体的设计器，您可以在其中拖放控件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T16:02:05.070

希望你的`Program.cs`样子：

```
 static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());

    } 
```

并在里面试试这个`Form1`：

```
 private void Form1_Load(object sender, EventArgs e)
  {
      Form2 form2 = new Form2();
      form2.Show();
  } 
```

# asp.net - 选定的 RadMenu 项目应聚焦

> ID：16108745
> 
> 赞同：0
> 
> 时间：2013-04-19T15:58:15.330
> 
> 标签：asp.net, telerik, menuitem

我已将 Radmenu 放置在母版页中，如果我单击任何项​​目，页面将被回发，因此很难保持选定的项目以颜色为中心。我尝试放置一个 ajaxpanel，但它仍然得到后备。

```
 <telerik:RadAjaxPanel ID="RadAjaxPanel1" runat="server">

            <telerik:RadMenu ID="Menu1" runat="server" Skin="Office2010Silver"  
                Width="100%" Font-Bold="true"
                Visible ="false">
                <Items>
                  < <telerik:RadMenuItem runat="server" NavigateUrl="~/Home.aspx"                              Text="Home">
                    </telerik:RadMenuItem>
                 </Items>
                        </telerik:RadMenu> 
```

任何建议都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:06:58.750

您是否尝试向您的用户提供一些上下文，以便他们知道他们在您的应用程序中的位置？

考虑路径 + 面包屑演示： [http ://demos.telerik.com/aspnet-ajax/menu/examples/programming/showpath/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/menu/examples/programming/showpath/defaultcs.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T08:50:13.530

您可以将此代码用于选中的突出显示菜单。

```
RadMenuItem currentItem = MainMenu.FindItemByUrl(Request.Url.PathAndQuery);
if (currentItem != null)
{
     currentItem.HighlightPath();
}
else
{
      MainMenu.Items[0].HighlightPath();
} 
```

# html - CSS收缩元素而不导致跳转到下一行

> ID：16108746
> 
> 赞同：0
> 
> 时间：2013-04-19T15:58:15.767
> 
> 标签：html, css, responsive-design

我想缩小红色元素并在正确的位置以固定宽度放置蓝色元素。

看例子：http: [//jsfiddle.net/YUTFc/](http://jsfiddle.net/YUTFc/)

```
<div class="wrapper">
   <div class="red">1</div>
   <div class="blue">2</div>
</div>

.wrapper{
    max-width: 300px;
    height: 100px;
    margin: 0 auto;
}

.red{
    height: 100%;
    width: 80%; 
    background-color: red;
    float: left;
}

.blue{
    height: 100%;
    width: 60px;
    background-color: blue;
    float: right;
} 
```

并调整窗口大小。

我能做些什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:01:53.990

尝试这个：

```
.wrapper {
    max-width:300px;
    height:100px;
    margin:0 auto;
    position:relative;
}
.red, .blue {
    position:absolute;
    top: 0; bottom: 0;
}
.red {
    background-color:red;
    left:0; right:60px;
}
.blue {
    background-color:blue;
    width:60px; right:0;
} 
```

[更新小提琴](http://jsfiddle.net/YUTFc/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:55:48.837

如果您的内容的大小无法预测，那么通过 CSS 将您的元素转换为表格元素将是您最好的选择。

[http://jsfiddle.net/YUTFc/2/](http://jsfiddle.net/YUTFc/2/)

```
.wrapper{
    display: table;
    max-width: 300px;
    height: 100px;
    margin: 0 auto;
}

.red{
    height: 100%;
    width: 80%; 
    background-color: red;
    display: table-cell;
}

.blue{
    height: 100%;
    width: 60px;
    background-color: blue;
    display: table-cell;
} 
```

# python - python使用带有sqlite的腌制对象

> ID：16108748
> 
> 赞同：0
> 
> 时间：2013-04-19T15:58:21.053
> 
> 标签：python, sqlite, pickle

我有一个相当动态的大对象，我想序列化并存储在我的 sqlite 数据库中。使用 pickle 模块，我将它变成了一个字符串，但我发现我必须对其进行字符串替换以将单引号更改出来，以便将其存储到数据库中。当我把它拿出来时，我只是撤消它。我是使用 pickle 和 sqlite 的新手，这至少可以工作，但这真的是正确的方法，还是有正确的方法来处理我没有看到的？

```
menu = pickle.dumps(menuOb)
menu = menu.replace("'", "''")
#sql statement stuff 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:59:29.083

不要替换任何字符，只需插入一个 SQL 参数：

```
cursor.execute('INSERT INTO sometable VALUES (?, ?)', (id, pickle.dumps(menuOb)) 
```

SQL 参数会为您处理正确的引用。

# ios - iOS UITableView Sections 重置索引计数

> ID：16108750
> 
> 赞同：0
> 
> 时间：2013-04-19T15:58:28.627
> 
> 标签：ios, uitableview, sectionheader

我有一个包含 12 篇文章（0 到 11）的数组。这 12 篇文章根据 3 个主题分为几个部分，每个主题名称成为部分标题。我的问题是索引路径计数器在每个部分的开头重置为 0，所以我得到了这个：

```
***Topic 0
article 0
article 1
article 2
***Topic 1
article 0
article 1
article 2
***Topic 2
article 0
article 1
article 2
article 3
article 4
article 5 
```

而不是我想要的，这是：

```
***Topic 0
article 0
article 1
article 2
***Topic 1
article 3
article 4
article 5
***Topic 2
article 6
article 7
article 8
article 9
article 10
article 11 
```

我的实施有什么不正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:03:54.733

您的数据结构设置不正确。您需要一组部分数据。数组的每个元素都应该是一个字典。每个字典都应该有一个用于节标题的键和一个用于该节中的行数组的键。

拥有一个大数组不适合分段表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:02:49.807

在您的`cellForRowAtIndexPath`方法中，您需要通过该部分的偏移量来偏移您正在检索的数组元素。我不知道您如何配置您的部分，但每个部分都有一个偏移量。第一部分的偏移量为 0。第二个偏移量是第一部分中的行数，等等。使用该索引检索数组中与右侧部分对应的行。

# ios - Xcode：仅在默认状态下设置按钮上的图像，而不是选中

> ID：16108754
> 
> 赞同：4
> 
> 时间：2013-04-19T15:58:41.617
> 
> 标签：ios, xcode, uibutton, selected

一般来说，我是 Xcode 和 iPhone 编程的新手。我有一个简单的问题困扰着我。我想在按钮上设置一个图像，因为它是默认状态。所以我选择按钮，在“显示属性检查器”-选项卡中，选择“状态配置”作为默认值，然后在“图像”-下拉列表中找到所需的图像...

**问题：**

我将“状态配置”更改为选中，图像仍然打开。我需要图像仅在默认状态下打开。如果我想在默认状态和选定状态下使用不同的标题文本字体大小，我也会遇到同样的问题。我正在使用 Xcode 4.6 并为 iOS 6.1 编写代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T16:30:17.383

有两种方法。

第一种方式，以编程方式：

```
[button setBackgroundImage:buttonimg forState:UIControlStateSelected];
[button setBackgroundImage:buttonimg forState:UIControlStateNormal];
[button setBackgroundImage:buttonimg forState:UIControlStateHighlighted]; 
```

第二种方式，使用 IB Builder：

像img：

![在此处输入图像描述](https://i.stack.imgur.com/XluEp.png)

您可以选择状态配置。根据配置，您可以在名为“图像”的部分下设置图像。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:08:48.843

你为什么不以编程方式做到这一点？它会简单得多。

```
[cancelButton setBackgroundImage:cancelImg forState:UIControlStateNormal];
[cancelButton setBackgroundImage:selectedImg forState:UIControlStateSelected]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:22:29.210

如果您想以编程方式执行此操作，那么 akash 的答案就是要走的路。但是，如果您想从界面构建器中执行此操作，则应遵循以下两个步骤（此处为图片：[https](https://www.evernote.com/shard/s29/sh/9abb1987-614d-4326-b5bb-bcff28756ee4/85d6ca236276166992ff01a082222e96) ://www.evernote.com/shard/s29/sh/9abb1987-614d-4326-b5bb-bcff28756ee4/85d6ca236276166992ff01a082222e96 ）：

1.  对于每个*状态配置*
2.  选择您想要的图像或将其留空

*Xcode 将您为Default*状态添加的相同图像置于*Selected*状态，但如果您更改第二个，它将不会被自动覆盖。

# c# - 使用正则表达式从字符串构建字典

> ID：16108757
> 
> 赞同：1
> 
> 时间：2013-04-19T15:58:45.893
> 
> 标签：c#, regex, string

假设我有这个字符串：

```
var results = 
[{\r\n    \"ninja\": \"Leonardo - $0.99\",\r\n    \"data\": [[1336485655241,0.99],[1336566333236,0.99],[1336679536073,0.99],[1336706394834,0.99],[1336774593068,0.99],[1366284992043,0.99]]},
\r\n{\r\n    \"ninja\": \"Donatello - $0.25\",\r\n    \"data\": [[1361061084420,0.23],[1366102471587,0.25],[1366226367262,0.25],[1366284992043,0.25]]},
\r\n{\r\n    \"ninja\": \"Raphael - $0.15\",\r\n    \"data\": [[1327305600000,0.15], [1365583220422,0.15],[1365669396241,0.15],[1365669396241,0.15],[1365753433493,0.15],[1366284992043,0.15]]},\r\n\
r\n{\r\n    \"ninja\": \"Michelangelo - $0.14\",\r\n    \"data\": [1366284992043,0.14]]}; 
```

我想建立一个字典来存储忍者的名字和他们的价格，这样我就有：

核心价值

莱昂纳多 \ 0.99

多纳泰罗 \ 0.25

拉斐尔 \ 0.15

米开朗基罗 \ 0.14

所以几天以来我一直在阅读很多关于正则表达式的文章，但我还不知道它是如何工作的。到目前为止，我有这行代码：

```
var dictNinjas = Regex.Matches(priceListValue, @"\*(\w+)=(a-zA-Z)|\*(\$(0-9))").Cast<Match>()
                                        .ToDictionary(x => x.Groups[0].Value,
                                                      x => x.Groups[1].Value); 
```

我的理解是首先查找所有带有字母 a-zA-Z 的单词，然后查找位于 $ 符号之后的所有值。该| 符号是分组，所以第一个参数是组 0，第二个参数是组 1。但这不起作用。

谁能帮我吗？我正在努力理解如何使这项工作，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:27:46.713

`Groups[0].Value`是整场比赛，所以你需要`1`和`2`

```
var dictNinjas = Regex.Matches(str, @"""(\w+) - \$([\d.]+)").Cast<Match>()
                                    .ToDictionary(x => x.Groups[1].Value,
                                                  x => x.Groups[2].Value); 
```

`Groups[1].Value`指的`()`是正则表达式中第一个捕获的内容，``Groups[2].Value`第二个。

我不确定为什么你`=`的正则表达式中有 a 但 t 看起来你在此过程中误解了一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:31:49.813

首先：

> 所以第一个参数是第 0 组，第二个参数是第 1 组

*   第 0 组是整个匹配的字符串
*   组 1 是连接到第一个右括号的组。

别担心，这是一个常见的错误。

这个站点有一个[非常方便的正则表达式测试工具](http://www.zytrax.com/tech/web/regex.htm)以及大量 RE 信息 - 请记住，当您将正则表达式搜索字符串放入 C# 时，您可能需要转义更多字符，并且逐字可能无法正确解释。

例如：我将其插入`(\w+) - \$(\d+\.\d{2})`为我的 RE 字符串并得到：

> 第一场比赛：Leonardo - 24 位 0.99 美元 反向引用：1 美元 = Leonardo 2 美元 = 0.99 其他比赛：找到：Donatello - 217 位 0.25 美元 找到：Raphael - 369 位 0.15 美元 找到：米开朗基罗 - 566 位 0.14 美元

# java - 程序的hadoop编译时出现访问错误

> ID：16108763
> 
> 赞同：0
> 
> 时间：2013-04-19T15:59:08.910
> 
> 标签：java, linux, hadoop, compilation, classpath

我试图通过命令编译hadoop程序

```
root@one:/opt/jdk1.7.0_06/bin# ./javac -classpath /export/hadoop-1.0.1/hadoop-core-1.0.1.jar;/export/hadoop-1.0.1/log4j-1.2.17.jar -d /folder/classes /folder/src/ParallelIndexation.java 
```

结果我也收到了以下消息

```
javac: no source files
Usage: javac <options> <source files>
use a help for a list of possible options
bash: /export/hadoop-1.0.1/log4j-1.2.17.jar: Permission denied 
```

并且它发生在没有看到所有者`/export/hadoop-1.0.1/log4j-1.2.17.jar`是`root`最大权限的情况下，并且`/folder/src/ParallelIndexation.java`文件确实被设置存在（关于一行的注释`javac: no source files`）。解释如何消除错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:07:12.783

You need to use a colon (:) to separate path elements on unix systems - a semi colon denotes the a delimitation between commands, try this:

```
root@one:/opt/jdk1.7.0_06/bin# ./javac -classpath \
  /export/hadoop-1.0.1/hadoop-core-1.0.1.jar:/export/hadoop-1.0.1/log4j-1.2.17.jar \
  -d /folder/classes /folder/src/ParallelIndexation.java 
```

# java - JFileChooser 返回 FileNotFoundException

> ID：16108769
> 
> 赞同：1
> 
> 时间：2013-04-19T15:59:25.183
> 
> 标签：java, swing, filenotfoundexception, jfilechooser

更具体地说，它确实有效，但前提是我选择了一个存在于我的程序及其资源所在的源文件夹中的文件。当我将文件移动到桌面或我的文档并尝试从那里读取它时，我得到一个`FileNotFoundException`.

这是我的代码：

```
private void btnBrowseFileActionPerformed(java.awt.event.ActionEvent evt) {                                              
    JFileChooser myFileChooser = new JFileChooser();
    int rVal = myFileChooser.showOpenDialog(Singlelayer.this);
    if (rVal == JFileChooser.APPROVE_OPTION) {
        txtFile.setText(myFileChooser.getSelectedFile().getName());
    }
} 
```

如您所见，它附加到“浏览...”按钮，因此它是 GUI 的一部分。但这无关紧要。

它不适用于与其他源文件不在项目文件夹中的任何文件。不完全确定发生了什么，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:01:24.167

您正在使用文件名：

`txtFile.setText(myFileChooser.getSelectedFile().getName());`

它返回文件的名称。所以它只识别源文件夹中的文件。

相反，您应该使用[文件路径](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getPath%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:09:24.013

您需要使用由 myFileChooser.getSelectedFile() 语句返回的 File 类对象的 getPath()。

```
eg
  File file = myFileChooser.getSelectedFile();
  String path = file.getPath();
  String name = file.getName(); 
```

现在用到了这些路径、名称变量。

# javascript - 我想根据结果将预加载的图像插入谷歌文档

> ID：16108772
> 
> 赞同：0
> 
> 时间：2013-04-19T15:59:33.277
> 
> 标签：javascript, google-apps-script

我是一个生疏的程序员，对 javascript 有点陌生，虽然我从这些论坛中学到了很多东西（谢谢大家的分享）。

我在谷歌有一个人们填写的调查。这会产生两个特定的分数，第一个是风险分数，第二个是功能分数。分数范围从正常到“高风险”。

我有一个在提交表单时生成并通过电子邮件发送给客户的报告。目前，表单以 x / 8 的形式报告风险评分，以 y / 24 的形式报告功能评分，以及关于这意味着什么的无聊冗长的传说。

我试图通过添加图形表示来修饰它。

例如，如果功能得分超过 24，并且它们的得分介于 0-6 之间，则认为它们是正常的。我想要一个图形栏，一端为绿色，7-10 之间为黄色，11-18 之间为橙色，18 之后为红色，以及穿过重要区域的箭头或黑线。我在想我只会有 25 (0-24) 张图像，带有相同的条，并且标记只是根据需要逐渐增加比例。他们将被命名为：

ESS0.png、ESS1.png 等。

我想做的是基于我的变量 epworthScore

if (epworthScore == 0) {DISPLAY IMAGE ESS0.png;} if (epworthScore == 1) {DISPLAY IMAGE ESS1.png;}

...

我不知道是否有更时尚的方式来执行此操作，也不知道如何拍摄该图像（将位于我家的谷歌驱动器上）。我不知道如何在我的报告模板中为其添加标记。我使用“keyVARIABLE”作为我的数值的占位符，并使用 copyBody.ReplaceText 命令插入我的数字。我不知道相当于放置图形。

任何帮助，将不胜感激。

一张图抵得上一千个字，对吧？

谢谢，

罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:31:57.467

请看看我在[这篇文章](https://stackoverflow.com/questions/11211434/insert-image-into-a-specified-location)上的回答，我认为它会给你足够的信息来做你想做的事，只需添加一些逻辑来选择正确的图像;-)

# ruby-on-rails - 使用 .bat 在 Vagrant 上启动 Rails 服务器

> ID：16108774
> 
> 赞同：1
> 
> 时间：2013-04-19T15:59:40.717
> 
> 标签：ruby-on-rails, batch-file, vagrant

我在 Windows 上使用 Vagrant，所以我需要许多命令提示符来做一些基本的事情——一个用于 Git，另一个用于`rails server`，第三个用于测试等。

我想制作用于启动 Rails 服务器和运行测试的 .bat 文件。

因此，我创建了包含此内容的 .bat 文件（大多数行都是从 git-cmd.bat 复制的）：

```
@rem Do not use "echo off" to not affect any child calls.
@setlocal

@rem Get the abolute path to the current directory, which is assumed to be the
@rem Git installation root.
@for /F "delims=" %%I in ("%~dp0") do @set git_install_root=%%~fI
@set PATH=%git_install_root%\bin;%git_install_root%\mingw\bin;%git_install_root%\cmd;%PATH%

@if not exist "%HOME%" @set HOME=%HOMEDRIVE%%HOMEPATH%
@if not exist "%HOME%" @set HOME=%USERPROFILE%

@set PLINK_PROTOCOL=ssh

D:
@cd D:\Documents\GitHub\blog
@start %COMSPEC%

vagrant ssh -c "cd /vagrant && rails s" 
```

它启动服务器并立即停止它。之后它关闭窗口。此外，它正在打开额外的命令提示符窗口。这是为什么？

我怎样才能让它启动服务器并保持打开状态？我试过`pause`,`/wait`和`cmd /k file.bat`，但没有成功。

理想情况下，我会有 4/5 个 .bat 文件：vagrant_up.bat、vagrant_halt.bat、rails_server.bat（或 rails_start.bat 和 rails_stop.bat）和 rake_test.bat。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:19:26.377

这是打开额外的窗口

```
@start %COMSPEC% 
```

不知道 vagrant，但我怀疑这条线应该是这样的，或者如果 Vagrant 是一个 exe，则完全放弃 %comspec% 部分。

```
@start "" %COMSPEC% vagrant ssh -c "cd /vagrant && rails s" 
```

或者这可能意味着：

```
@start "" %COMSPEC% -c "cd /vagrant && rails s"
@vagrant ssh 
```

# windows-7 - 如何在 Windows 中创建电影屏幕保护程序

> ID：16108775
> 
> 赞同：0
> 
> 时间：2013-04-19T15:59:43.153
> 
> 标签：windows-7, movieclip, screensaver

是否可以用 .avi 电影制作 Windows 7 屏幕保护程序？

我制作了两部短片（一部 0:17，另一部 1:14）。我搜索了如何制作屏保，但只能找到将图片制作成屏保的说明。我想做一个电影屏保。另外，我精通技术，但不是 Windows 程序员，所以我实际上需要一个工具来为我做这件事。

有关如何从电影制作屏幕保护程序的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:13:20.817

您可以使用 Screensaver Maker，可[在此处](http://www.dd2002.com/)获得。

# php - 将 lat/lng 与另一个 lat/lng 进行比较

> ID：16108783
> 
> 赞同：3
> 
> 时间：2013-04-19T16:00:02.230
> 
> 标签：php, mysql

我在数据库中有场地，我用它们的纬度和经度存储。

我也有登录用户的纬度和经度。

我正在开发一种功能，可以让他们在任何给定的测量范围内找到场地，比如 20 英里。

是否可以找到距离用户的经纬度 20 英里的最外面的经纬度，然后以某种方式编写查询以在 MySQL 的距离圈内查找场地？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:03:08.697

我使用它（从 javascript 移植到 Objective-C） - 很多很棒的位置方程用 javascript [http://www.movable-type.co.uk/scripts/latlong.html表示](http://www.movable-type.co.uk/scripts/latlong.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:28:54.527

我找到了一个有效的 PHP 函数：

```
function getDistanceBetweenPoints($latitude1, $longitude1, $latitude2, $longitude2, $unit = 'Mi') {

    $theta = $longitude1 - $longitude2;
    $distance = (sin(deg2rad($latitude1)) * sin(deg2rad($latitude2))) + (cos(deg2rad($latitude1)) * cos(deg2rad($latitude2)) * cos(deg2rad($theta)));
    $distance = acos($distance);
    $distance = rad2deg($distance);
    $distance = $distance * 60 * 1.1515; switch($unit) {
        case 'Mi': break; case 'Km' : $distance = $distance * 1.609344;
    }
    return (round($distance,2));

} 
```

认为这可能对其他人有所帮助。

# android - 为我的程序匹配不同类型的分辨率

> ID：16108785
> 
> 赞同：0
> 
> 时间：2013-04-19T16:00:08.170
> 
> 标签：android

我有这个代码：

```
<LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="66dp" android:gravity="center"
        >

        <Button
            android:id="@+id/button1"
            android:layout_width="120px"
            android:layout_height="65dp"
            android:text="hight"
            android:textStyle="bold"
            android:drawableTop="@drawable/up"
            android:gravity="center|bottom"
             />
        <Button
            android:id="@+id/button2"
            android:layout_width="120px"
            android:layout_height="65dp"
            android:text="low "
            android:textStyle="bold"
            android:drawableTop="@drawable/down"
            android:gravity="center|bottom"
             />
        <Button
            android:id="@+id/button3"
            android:layout_width="120px"
            android:layout_height="65dp"
            android:text="refresh"
            android:textStyle="bold"
            android:drawableTop="@drawable/refresh"
            android:gravity="center|bottom"
             />
        <Button
            android:id="@+id/btnGraf"
            android:layout_width="120px"
            android:layout_height="65dp"
            android:text="graf"
            android:textStyle="bold"
            android:drawableTop="@drawable/graf2"
            android:gravity="center|bottom"
            />
    </LinearLayout> 
```

当我在 480 X 800 设备上运行时，它看起来很棒

但如果我在 720 X 1280 设备上运行，按钮看起来又小又丑。

**如何使按钮均匀增长并占据所有屏幕？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:05:14.883

将您的图像放在 drawable-xhdpi 文件夹中，因为 Nexus 手机总是从这些文件夹中获取图像。否则你必须为它们设计一个单独的布局，比如 layout-normal-xhdpi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:56:20.277

这是一些更新的代码，如果您的布局，它将缩放按钮的大小以使用可用的宽度。

不过首先要注意一些事项：
- 请避免使用精确的像素大小。请注意，我已将每个按钮的高度更改为 wrap_content。如果您需要更大的按钮，请使用 DP 而不是 PX。这将确保按钮大小在具有不同屏幕分辨率的设备之间保持一致。

```
<LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="66dp"
        android:gravity="center" >

        <Button
            android:id="@+id/button1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:drawableTop="@drawable/up"
            android:gravity="center|bottom"
            android:text="hight"
            android:textStyle="bold" />

        <Button
            android:id="@+id/button2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:drawableTop="@drawable/down"
            android:gravity="center|bottom"
            android:text="low "
            android:textStyle="bold" />

        <Button
            android:id="@+id/button3"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:drawableTop="@drawable/refresh"
            android:gravity="center|bottom"
            android:text="refresh"
            android:textStyle="bold" />

        <Button
            android:id="@+id/btnGraf"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:drawableTop="@drawable/graf2"
            android:gravity="center|bottom"
            android:text="graf"
            android:textStyle="bold" />
    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:23:08.917

尝试将相同的drawables放在drawable-hdpi文件夹drawable-mdpi drawable-xhdpi文件夹中，它们看起来会更好。并将倾角单位用于高度和宽度属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T16:04:53.557

将它们的宽度设置为 0dp 并使用权重。这将使它们根据体重增长。

# mod-rewrite - 防止 mod-rewrite 拆分 URI

> ID：16108788
> 
> 赞同：1
> 
> 时间：2013-04-19T16:00:23.390
> 
> 标签：mod-rewrite

全部 -

在反向代理上，我试图自动将查询字符串 arg 附加到传入 URI 的末尾，而 mod-rewrite 似乎在做一些奇怪的事情。

如果我使用这样的规则：

```
RewriteEngine On    # Turn on the rewriting engine
RewriteRule    /t/SkunkWorks/views/LabelLocalization/Dashboard$    /t/SkunkWorks/views/LabelLocalization/Dashboard\?Language=3  [L,PT]
#####Proxy Rule
ProxyRequests Off

<Proxy *>
Order deny,allow
Allow from all
</Proxy>

ProxyPass / http://server8/
ProxyPassReverse / http://server8/
AllowEncodedSlashes On 
```

我看到 Apache 使用 Fiddler 踢出以下内容：

```
http://192.168.203.34:9089/t/SkunkWorks/views/LabelLocalization/Dashboard?Language=3 
```

目前很好。

我还看到请求到达反向代理通过的机器：

```
192.168.203.34 - - [19/Apr/2013:11:35:04 -0400] 80 "GET /t/SkunkWorks/views/LabelLocalization/Dashboard?Language=3 HTTP/1.1" "fe80::a53f:6156:2a22:378d, 192.168.203.34" 200 4052 "-" 109186 UXFkKMCoyx0AAAA0Q2UAAAEM 
```

但是，在目标计算机 (192.168.203.29) 上执行工作的应用程序没有正确响应。它没有使用特定语言呈现报告，而是挂起。

如果我`http://192.168.203.29/t/SkunkWorks/views/LabelLocalization/Dashboard?Language=3` 直接针对应用服务器执行，则报告呈现良好。似乎是导致问题的重写规则。

为什么？我在error.log中看到了这个：

```
[Fri Apr 19 10:55:55.194288 2013] [rewrite:trace2] [pid 13240:tid 712] mod_rewrite.c(468): [client fe80::a53f:6156:2a22:378d:32996] fe80::a53f:6156:2a22:378d - - [simpleprime/sid#982130][rid#dbcd50/initial] init rewrite engine with requested uri /t/SkunkWorks/views/LabelLocalization/Dashboard
[Fri Apr 19 10:55:55.194288 2013] [rewrite:trace3] [pid 13240:tid 712] mod_rewrite.c(468): [client fe80::a53f:6156:2a22:378d:32996] fe80::a53f:6156:2a22:378d - - [simpleprime/sid#982130][rid#dbcd50/initial] applying pattern '/t/SkunkWorks/views/LabelLocalization/Dashboard$' to uri '/t/SkunkWorks/views/LabelLocalization/Dashboard'
[Fri Apr 19 10:55:55.194288 2013] [rewrite:trace2] [pid 13240:tid 712] mod_rewrite.c(468): [client fe80::a53f:6156:2a22:378d:32996] fe80::a53f:6156:2a22:378d - - [simpleprime/sid#982130][rid#dbcd50/initial] rewrite '/t/SkunkWorks/views/LabelLocalization/Dashboard' -> '/t/SkunkWorks/views/LabelLocalization/Dashboard?Language=3[L,PT]'
RIGHT HERE ->>>>[Fri Apr 19 10:55:55.194288 2013] [rewrite:trace3] [pid 13240:tid 712] mod_rewrite.c(468): [client fe80::a53f:6156:2a22:378d:32996] fe80::a53f:6156:2a22:378d - - [simpleprime/sid#982130][rid#dbcd50/initial] split uri=/t/SkunkWorks/views/LabelLocalization/Dashboard?Language=3[L,PT] -> uri=/t/SkunkWorks/views/LabelLocalization/Dashboard, args=Language=3[L,PT]** 
```

如果我简化规则并删除 ?Language=3，则一切正常：

```
RewriteRule    /t/SkunkWorks/views/LabelLocalization/Dashboard$    /t/SkunkWorks/views/LabelLocalization/Dashboard  [L,PT] 
```

我可以使用反向代理

```
http://192.168.203.34/t/SkunkWorks/views/LabelLocalization/Dashboard?Language=3 
```

...并且它被正确地传递到 192.168.203.29 盒子。机器按应有的方式呈现报告。

我猜测“URI SPLIT”是问题的原因......因为当我在 error.log 中看不到它时事情会起作用，而当我这样做时它们会中断。

我能做些什么来防止 URI 拆分？

# database - 如何搜索使用唯一初始化向量加密的字段？

> ID：16108792
> 
> 赞同：1
> 
> 时间：2013-04-19T16:00:30.530
> 
> 标签：database, entity-framework, encryption, initialization-vector

我知道使用唯一的初始化向量来加密每条记录是一种很好的做法，但是如何在该字段上进行搜索呢？

目前我使用单个 IV，这意味着我可以重建加密的搜索字符串，例如电子邮件地址并在数据库中查询该字段。如果我开始使用唯一的初始化向量，我将无法重建加密的搜索字符串。

我的环境是 ASP.NET、Entity Framework 和 SQL Server。也许这直接在数据库上更容易，但我的查询是通过 LINQ-to-Entities 进行的。

[我的第一个问题-最后我找不到答案！]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:48:00.463

使用唯一的 IV，您必须解密每条记录才能匹配加密的内容，因为您知道每次加密相同的记录时都会得到不同的值。

假设这是不可接受的（在一个小表上会很好，但在任何记录数相当多的东西上就不行），一种替代方法是散列值并将散列存储在数据库中的单独列中。您将通过哈希进行搜索，并且仅解密匹配的记录以确认它确实是匹配的。

散列您正在加密的东西的问题是大多数值得加密的东西（信用卡、帐号等）只有固定数量的可能输入。即使在哈希上附加了唯一的盐，例如信用卡上的哈希也是不好的，因为只有 X 十亿或万亿或任何可能的卡号，所以如果你有一个盐、一个哈希和一个像样的处理器，你可以在相当短的时间内对卡号进行逆向工程。

但是，如果您正在使用具有大量可能输入的东西，则此解决方案可能会起作用。

另一种选择是，如果有一段加密数据相当独特，但不一定是秘密的（例如信用卡号的后 4 个），您可以将该部分存储为明文，并使用它来过滤将您的大型数据集放入一个非常小的结果集中，然后解密该结果集中的每条记录，以将其与您的搜索条件进行比较。

# forms - Perl www::mechanize

> ID：16108794
> 
> 赞同：1
> 
> 时间：2013-04-19T16:00:40.297
> 
> 标签：forms, perl, perl-module, www-mechanize

我对 perl 模块非常`www::mechanize`陌生，我想功能化 snp id。为此，我必须制作一个网络爬虫，但我遇到了困难。我不知道如何使用字段名称或如何分配值。我必须访问这个网站：[http:](http://www.ncbi.nlm.nih.gov/projects/SNP/) //www.ncbi.nlm.nih.gov/projects/SNP/。请告诉这里的字段名是什么。提前致谢。我的意思是在这里指定一个字段名称，我必须将 snp id 用于搜索。我不明白该怎么做。请任何人帮助。

```
 use WWW::Mechanize;
   use strict;
   use warnings;
   my $mech = WWW::Mechanize->new;

   my $snp = 'rs111';
   my $URL = "http://www.ncbi.nlm.nih.gov/projects/SNP/";

   $mech->get($URL);

   $mech->submit_form(
   form_number => '1',
   fields => {

   'ID' => $snp,
    },
    );
    print $mech->content(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T16:11:15.007

使用诸如[Firefox 的 Web Developer 插件之类的工具。](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)

该页面具有三种形式。

1.  ```
    Id       Name     Method   Action
    ------   ------   ------   --------------------------------------------------
    Search   Search   post     http://www.ncbi.nlm.nih.gov/coreutils/dispatch.cgi

    Elements
    ========
    Id       Name     Type     Value      Label   Size   Maximum   Length
    ------   ------   ------   --------   -----   ----   -------   ------
    Search   db       select   13
    term     term     text                for     24
    Search   submit   submit   Go
    Search   SITE     hidden   NcbiHome 
    ```

2.  ```
    Id   Name    Method   Action
    --   -----   ------   --------------------------------------------------
         frmGo   get      http://www.ncbi.nlm.nih.gov/entrez/query.fcgi

    Elements
    ========
    Id   Name       Type     Value     Label   Size   Maximum   Length
    --   --------   ------   -------   -----   ----   -------   ------
         db         hidden   Books
         cmd        hidden   Search
         term       input                      12
         Submit     submit   Go
         doptcmdl   hidden   TOCView 
    ```

3.  ```
    Id   Name       Method   Action
    --   --------   ------   --------------------------------------------------
         searchID   post     getID.cgi

    Elements
    ========
    Id       Name         Type     Value          Label   Size   Maximum   Length
    ------   ----------   ------   ------------   -----   ----   -------   ------
             searchType   hidden   adhoc_search
    sub_id   sub_id       input                   ID:
    IDtype   Type         select   dbSNP_rs
             submit2      submit   Search
             reset        reset    Reset 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T16:07:20.883

Try this version (your form is named Search and field name you need is `db`):

```
$mech->submit_form(
    name => "Search",
    fields => {
        db => $snp,
    },
    button => "submit",
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T02:15:27.023

每个网络浏览器都有开发人员工具： Opera 的[Dragonfly](http://www.opera.com/dragonfly/)（它是内置的，我大部分时间都使用它）， Firefox 的[Firebug](http://getfirebug.com/)等。我需要的大多数此类工具都需要右键单击所需的元素查看并选择“使用...检查元素”之类的内容![在此处输入图像描述](https://i.stack.imgur.com/eYlmJ.png)

![在此处输入图像描述](https://i.stack.imgur.com/ReaGY.png)

# c# - 如何保护 Udp？

> ID：16108796
> 
> 赞同：0
> 
> 时间：2013-04-19T16:00:45.563
> 
> 标签：c#, performance, security, sockets, udp

我正在使用 C#(.Net) 开发一个服务器项目。我有一个 Tcp 连接（使用 SSL）。我可以在 Tcp 中保护通信。我需要创建 Udp 系统来快速发送数据。现在如何保护 Udp？udp 是无连接的数据报协议。我认为有一种方法，那就是：

```
> Client connects via Tcp, Server sends a random (16 byte lenght) key to Client via Tcp.
> If client wants to send data via Udp, it replaces the data like this (key[16 byte lengt] + data)
> Server checks incoming data's first 16 byte and if it's true, generates an other random password and sends it client back via Tcp.
> Clients understands new key via incoming Tcp data, and uses the new key. 
```

即在所有成功的 Udp 过程之后，服务器为客户端创建另一个随机密钥并将其发送给客户端。客户端使用密钥进行 Udp 身份验证。

是的，这是一种真正的方式，但在 Udp 处理之后我不会发送新数据。因为有性能问题。udp 必须很快，但如果您在每次成功的 udp 进程后发送数据，这可能会导致服务器端滞后。我想通过一次操作来实现 Udp 安全。（只有udp发送，没有tcp回调）

如果没有办法做到这一点，我将使用该系统。有人知道这件事吗？

（**注意：**我知道，非对称密码学是最好的方法（使用 SSL），但我无法创建我的超级安全密码学（如 128 位）功能。）

***编辑：**有没有办法将 SSL 与 Udp 一起使用？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:20:47.593

正如评论中所建议的，使用 DTLS（数据报 TLS）。DTLS 是 TLS 协议的扩展，以支持 UDP 等不可靠的运营商（但它不需要 UDP 并且可以通过例如信鸽邮件工作）。

我们的[SecureBlackbox](http://www.eldos.com/sbb/net-ssl.php)产品为 .NET 版本（以及其他版本）中的 DTLS 提供组件和类。

# android - 带有 ArrayList 的 JNI 上的 NoSuchMethodError

> ID：16108798
> 
> 赞同：2
> 
> 时间：2013-04-19T16:00:48.633
> 
> 标签：android, arraylist, android-ndk, java-native-interface

我正在为 android 开发一个应用程序，它使用 JNI 代码进行一些 CPU 密集型计算。我在 java 上的一个本地方法将 ArrayList 作为参数传递给 JNI 层。

当我尝试使用 ArrayList 的 get(int index) 时：

```
jmethodID getAtIndex = env->GetMethodID(listClass, "get", "(I)Ljava/lang/Object"); 
```

我越来越：

```
NoSuchMethodError: no method with name='get' signature=
'(I)Ljava/lang/Object' in class Ljava/util/ArrayList; 
```

但是，当我使用 javap -s java.util.ArrayList 获取该方法的签名时，我得到的签名与我在 JNI 代码中使用的签名完全相同。

有任何想法吗？提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:50:37.323

您在类型签名的末尾缺少分号，Java 类类型签名的形式为：

```
L fully-qualified-class-name ; 
```

也是如此，该方法的完整类型签名将`Object`是.`Ljava/lang/Object;``(I)Ljava/lang/Object;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T00:17:16.080

你签名错了。不要手动构造 JNI 签名：从 javap -s 的输出中复制和粘贴。在这种情况下，您缺少分号。

# mysql - 通过 user_id 从第三个表中获取表中的值

> ID：16108801
> 
> 赞同：1
> 
> 时间：2013-04-19T16:01:02.017
> 
> 标签：mysql, sql

我为学习目的创建了一个相似的 t twitter... 现在我正在尝试创建一个查询，以便用户可以关注其他用户。

我有四个表 - user ， userdetails 推文和关注。

下表仅适用于三行主键 ID 、 user_ID 和以下 ID。所以计划是，如果我（用户 1）调用 following_id(2)，我将从表 tweets 中获取所有结果，其中消息与 user_id 一起存储。

但是当我调用表格时，我只打印了两行。通过 user_id。并且不按消息 ID 分组。

这是我的查询，只给我 2 个结果。

```
SELECT user.email, user.username, tweets.message, tweets.date, userdetails.profile_img, userdetails.firstname, userdetails.lastname, following.id, following.user_id, following.follow_id
FROM user
JOIN userdetails ON user.id = userdetails.user_id
JOIN tweets ON userdetails.user_id = tweets.user_id
JOIN following ON tweets.id = following.follow_id
GROUP BY tweets.message 
```

表结构。

```
 Following
    id | user_id | follow_id

    Tweets
    user_id|id|date|message

    user
    id|email|password|username

    userdetails
    id|firstname|lastname|profile_img|user_id|about 
```

但是这里的输出变成了

```
email|username | message | date |profile_img |firstname |lastname |id |user_id
1\. email 1...username message date......
2 .email 2........username message date..... 
```

主意 ？还是我认为下表有误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:16:37.020

You are very close to the right query: just replace

```
 tweets.id = following.follow_id 
```

with

```
 tweets.user_id = following.follow_id 
```

# php - facebook like 按钮仅适用于第一张图片

> ID：16108817
> 
> 赞同：0
> 
> 时间：2013-04-19T16:01:46.937
> 
> 标签：php, javascript, html, facebook, facebook-like

当用户点击这些相册时，我的网站 way2enjoy.com 的首页上几乎没有照片一组图像第一次单击图像将显示 facebook 喜欢按钮，其他人不会显示任何喜欢按钮。对于每个相册都有几张照片，但我无法显示喜欢按钮。

我的 Facebook 喜欢的代码是

```
 <div id="fb-root"></div>
     <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) return;
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=114744998704777";
       fjs.parentNode.insertBefore(js, fjs);
      }(document, \'script\', \'facebook-jssdk\'));</script><div class="fb-like" data-       send="true" data-width="450" data-show-faces="true"></div> 
```

欢迎任何指导/建议

我的第一张图片的 facebook html 代码是

`<table class="uiGrid" cellspacing="0" cellpadding="0"><tbody><tr><td class="vTop hCent"><div><form rel="async" ajaxify="/plugins/like/connect" method="post" action="/plugins/like/connect" onsubmit="return window.Event &amp;&amp; Event.__inlineSubmit &amp;&amp; Event.__inlineSubmit(this,event)" id="u_0_1"><input type="hidden" name="fb_dtsg" value="AQCQ7J4N" autocomplete="off"><input type="hidden" autocomplete="off" name="href" value="http://way2enjoy.com/"><input type="hidden" autocomplete="off" name="action" value="like"><input type="hidden" autocomplete="off" name="nobootload"><input type="hidden" autocomplete="off" name="iframe_referer" value="http://way2enjoy.com/"><input type="hidden" autocomplete="off" name="ref"><div class="pluginConnectButton"><div class="pluginButton pluginButtonInline pluginConnectButtonDisconnected" title=""><div><button type="submit"><i class="pluginButtonIcon img sp_like-send sx_like-send_thumb"></i>Like</button></div></div> <div class="pluginButton pluginButtonPressed pluginButtonInline pluginButtonX pluginConnectButtonConnected hidden_elem" title=""><div><button type="submit"><i class="pluginButtonIcon pluginButtonXOff img sp_like-send sx_like-send_ch"></i><i class="pluginButtonIcon pluginButtonXOn img sp_like-send sx_like-send_x" title=""></i> </button>Like</div></div></div></form></div></td><td class="vTop pls"><table class="uiGrid pluginSend" cellspacing="0" cellpadding="0" width="100%" id="u_0_2"><tbody><tr><td><div class="pluginButton pluginSendInactive"><div><button type="submit"><i class="pluginButtonIcon img sp_like-send sx_like-send_send"></i>Send</button></div></div> <div class="pluginButton pluginButtonPressed pluginSendActive hidden_elem"><div><button type="submit"><i class="pluginButtonIcon img sp_like-send sx_like-send_sendp"></i>Send</button></div></div></td></tr></tbody></table></td><td class="pls" style="width: 90%"><div style="padding-left: 19px;" class="uiIconText"><i class="img sp_like-send sx_like-send_fav" style="top: 0px;"></i><span class="hidden_elem" id="u_0_3">You and 9 others like this.</span><span id="u_0_4">9 people like this. Be the first of your friends. </span></div></td></tr></tbody></table>`

# string - 将字符串转换为算术运算符

> ID：16108819
> 
> 赞同：3
> 
> 时间：2013-04-19T16:01:52.083
> 
> 标签：string, math, casting, lua, operator-keyword

我有一个包含数学运算符的数组。在我的 Lua 应用程序中的某个时刻，我必须提取其中一个运算符并执行真正的操作（而不是字符串的串联）。提取部分对我来说很清楚，但我真的不知道如何将字符串转换为算术运算符来执行计算。我需要这样的东西（这是 JavaScript），但在 Lua 中：

```
var execute = {
    '+': function (x, y) { return x + y },
    '-': function (x, y) { return x - y }
}​​​​​​​;

execute['+'](2, 2) == 4; 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T16:17:14.377

你非常接近：

```
local execute = {
  ['+'] = function (x, y) return x + y end,
  ['-'] = function (x, y) return x - y end,
}
print(execute['+'](2, 2) == 4) 
```

# objective-c - Objective-C 委托表示法

> ID：16108825
> 
> 赞同：0
> 
> 时间：2013-04-19T16:02:08.897
> 
> 标签：objective-c, delegates

我有一个关于 Objective-C 代表的问题。当我使用委托创建类时，我的代码如下所示：

```
@protocol MyDelegate
- (void)delegateMethod;
@end

@interface MyClass:NSObject {
    id <MyDelegate> delegate;
} 
```

谁能回答我为什么这个 < **MyDelegate** > 与实例变量声明一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:09:16.297

它只是意味着`delegate`变量（无论它的实际类型是什么）符合`MyDelegate`协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:26:56.540

不清楚上面的 MyClass 应该是委托类、委托的用户还是“无辜的”第 3 方。

当然，委托对象不需要存储指向自身的指针。

委托的用户（调用者）一般需要存储委托指针。它实际上可能需要您创建某个委托类的子类，因此需要您传递“MyDelegateClass”的子类。在这种情况下，它将存储一个指向“MyDelegateClass”的指针。但是为了允许您将您的委托与您的一个类中的其他功能结合起来（并且通常最小化委托的用户和委托用户的客户之间的绑定“紧密性”），委托通常是通过协议而不是类来定义的, 在这种情况下，给定协议的对象的 Objective-C 表示法是`id <TheProtocol>`.

“无辜”的第 3 方可以接受和存储对其需求有意义的任何内容。大概它“知道”用户的意图（委托的用户不知道），因此存储“ClassOfThisApp”指针可能更有意义。

# c++ - 使用指针时没有得到正确的输出

> ID：16108828
> 
> 赞同：1
> 
> 时间：2013-04-19T16:02:14.553
> 
> 标签：c++, c, pointers

我遇到了一些错误。任何线索我哪里出错了？我认为我正在应用正确的逻辑。

```
int* adderFunction(int a, int b)
{
    int result;
    int *pResult;
    pResult = &result;
    result = a + b;
    return (pResult);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T16:03:16.260

不，您正在尝试返回局部变量上的指针，该指针在从函数返回后被破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:18:26.170

您正在**堆栈**上创建一个指针，并尝试返回该指针，该指针在您完成执行代码后被删除。如果你想在**堆上**创建一些东西，你需要使用`new`关键字。

但是，您的问题可以更简单地解决：

```
int adderFunction(int a, int b) {
    return a + b;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T16:03:31.557

您正在返回一个指向局部变量的指针`result`。当您从函数返回时，它不再存在，但您正在返回指向它的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T16:08:18.087

您正在返回函数结束后超出范围的指针。这是**未定义的行为**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T16:08:45.963

pResults 指向一个堆栈变量。`new`如果您希望在堆上分配数据，则应该使用。但你最记得稍后释放它。我更喜欢

```
int adderFunction(int a, int b)
{
    return a+b;
} 
```

如果要保留指针表示法，也可以这样做

```
void adderFunction(int a, int b,int* pResult)
{
    *pResult=a+b;
} 
```

# ios - 设备旋转后的 iOS 按钮点击区域

> ID：16108836
> 
> 赞同：1
> 
> 时间：2013-04-19T16:02:40.663
> 
> 标签：ios, uibutton, screen-rotation

旋转后我遇到了几个按钮问题。在纵向模式下，按钮堆叠在屏幕底部。在横向时，它们被移动并调整大小以在屏幕底部并排。这一切都很好，按钮行为正确。但是，如果手机随后旋转回纵向，则按钮的点击区域是错误的 - 只有左侧 1/3 的按钮是可点击的。

这是进行旋转的代码。（我也在 viewWillAppear 中调用它，因此它总是在显示视图时执行，以防视图已经处于横向状态。）我已将按钮放在它们自己的内部视图中。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
                            duration:(NSTimeInterval)duration {

// determine our dimensions based on orientation
CGRect mainRect = [[UIScreen mainScreen] bounds];
CGFloat maxWidthHeight = MAX(mainRect.size.width, mainRect.size.height);
CGFloat minWidthHeight = MIN(mainRect.size.width, mainRect.size.height);
CGFloat _windowWidth = (UIDeviceOrientationIsPortrait(toInterfaceOrientation)) ? minWidthHeight : maxWidthHeight;

// get the current sizes of the things we are moving
CGRect saveRect = self.viewButtons.frame;
CGRect addLocRect = self.buttonAddLocation.frame;
CGRect connectRect = self.buttonConnect.frame;    

// This will be set below in one of the if-else branches
CGFloat buttonWidth = 0;

// determine the offset from the left/right based on device and orientation
int offset = 0;
if ([self isIphone]) {
    offset = (UIDeviceOrientationIsPortrait(toInterfaceOrientation)) ? OFFSET_LEFT_PORTRAIT_IPHONE : OFFSET_LEFT_LANDSCAPE_IPHONE;
} else {
    offset = (UIDeviceOrientationIsPortrait(toInterfaceOrientation)) ? OFFSET_LEFT_PORTRAIT_IPAD : OFFSET_LEFT_LANDSCAPE_IPAD;
}

// change the size & location of the button frame to just the button height to maximize the area for the location list
// no matter what orientation, the button frame will fill the bottom of the screen
saveRect.size.width = _windowWidth - 2*offset;
saveRect.origin.x = offset;

// for Landscape, move the buttons to side-by-side at the bottom of the window
if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {

    // size & move the buttons to fit side-by-side
    buttonWidth = (saveRect.size.width)*.4;

    addLocRect.origin.x += offset;
    addLocRect.origin.y = saveRect.size.height - addLocRect.size.height ;

    connectRect.origin.x = saveRect.size.width - buttonWidth - offset;
    connectRect.origin.y = saveRect.size.height - connectRect.size.height;

} else { // Portrait

    // move the buttons down to the bottom of the frame, stacked
    // size the buttons to be fully across the screen
    buttonWidth = saveRect.size.width;

    addLocRect.origin.y = 0 ; // at the top of the button view
    addLocRect.origin.x = 0;
    connectRect.origin.y = saveRect.size.height - connectRect.size.height;
    connectRect.origin.x = 0;

}

connectRect.size.width = buttonWidth;
addLocRect.size.width = buttonWidth;
self.buttonAddLocation.frame = addLocRect;
self.buttonConnect.frame = connectRect;
self.viewButtons.frame = saveRect;
} 
```

我添加了一些日志记录以确定旋转结束时帧和边界的情况：

```
 NSLog(@"Post rotation:");
 NSLog(@"AddLocation bounds: w=%f, h=%f, x=%f, y=%f", self.buttonAddLocation.frame.size.width, self.buttonAddLocation.frame.size.height,
      self.buttonAddLocation.frame.origin.x, self.buttonAddLocation.frame.origin.y);
 NSLog(@"AddLocation frame: w=%f, h=%f, x=%f, y=%f", self.buttonAddLocation.bounds.size.width, self.buttonAddLocation.bounds.size.height,
      self.buttonAddLocation.bounds.origin.x, self.buttonAddLocation.bounds.origin.y);

 NSLog(@"viewButtons bounds: w=%f, h=%f, x=%f, y=%f", self.viewButtons.frame.size.width, self.viewButtons.frame.size.height,
      self.viewButtons.frame.origin.x, self.viewButtons.frame.origin.y);
 NSLog(@"viewButtons frame: w=%f, h=%f, x=%f, y=%f", self.viewButtons.bounds.size.width, self.viewButtons.bounds.size.height,
      self.viewButtons.bounds.origin.x, self.viewButtons.bounds.origin.y); 
```

结果是：

```
Post rotation: (NOTE: Portrait, initial appearance)
AddLocation bounds: w=272.000000, h=55.000000, x=0.000000, y=0.000000
AddLocation frame: w=272.000000, h=55.000000, x=0.000000, y=0.000000
viewButtons bounds: w=272.000000, h=120.000000, x=24.000000, y=374.000000
viewButtons frame: w=272.000000, h=120.000000, x=0.000000, y=374.000000
Post rotation: (NOTE: rotate to Landscape)
AddLocation bounds: w=217.600006, h=55.000000, x=12.000000, y=65.000000
AddLocation frame: w=217.600006, h=55.000000, x=0.000000, y=0.000000
viewButtons bounds: w=544.000000, h=120.000000,  x=12.000000, y=374.000000
viewButtons frame: w=544.000000, h=120.000000, x=0.000000, y=374.000000
Post rotation: (NOTE: back to Portrait)
AddLocation bounds: w=272.000000, h=55.000000, x=0.000000, y=0.000000
AddLocation frame: w=272.000000, h=55.000000, x=0.000000, y=0.000000
viewButtons bounds: w=272.000000, h=120.000000, x=24.000000, y=138.000000
viewButtons frame: w=272.000000, h=120.000000, x=0.000000, y=374.000000 
```

从最初到最终，我看到的唯一区别是 viewButtons bounds origin.y，但如果我尝试设置它，事情就会变得一团糟——按钮突然出现在屏幕顶部。按钮边界足够宽。

我错过了什么？

更新：我错过了在 IB 中为封闭视图设置支柱和弹簧的事实，这与我设置视图框架的代码冲突。我删除了设置框架的代码，让 IB 完成工作，并调整了按钮的偏移量。不是最漂亮的解决方案，但我需要发布它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:35:38.187

移动按钮不应导致修改按钮的“可点击”区域。我能认为会导致这样的事情发生的唯一原因是：

1.  旋转后，您有一个覆盖部分按钮的透明视图。如果您确实有透明视图，请将它们的背景颜色设为红色，然后查看旋转后会发生什么。

2.  如果您的按钮不是主视图的子视图，请打开 xib 文件中的“剪辑子视图”设置或打开按钮父视图代码中的 clipsToBounds 属性。如果您的按钮在旋转过程中被剪断，这可能是您的问题的另一个原因。

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T15:51:23.570

这并不是对为什么会出现这种行为的真正解释，但您可能会更幸运地将 UIView 子类化，将布局代码放在那里，然后在视图控制器中使用 UIView 子类。我在我自己的应用程序中对按钮进行了相当多的动画处理，并且子类化 UIView 导致在旋转方面的头疼最少。

…您的 viewButtons.origin.y 问题可能与您获取屏幕尺寸的方式有关。也许。尝试这个

```
UIView *rootView = [[[UIApplication sharedApplication] keyWindow] 
                                   rootViewController].view;
CGRect originalFrame = [[UIScreen mainScreen] bounds];
CGRect adjustedFrame = [rootView convertRect:originalFrame fromView:nil]; 
```

# linq - 转换字典 > 列出 在 LINQ 中

> ID：16108841
> 
> 赞同：4
> 
> 时间：2013-04-19T16:02:57.900
> 
> 标签：linq, list, dictionary

如何在 LINQ中转换`Dictionary<string, List<object>>`为？`List<Dictionary<string, object>`我正在使用 for 循环进行操作，有什么方法可以以紧凑的方式进行操作吗？

```
Dictionary<string, List<object>> mydata = new Dictionary<string, List<object>>();
List<object> ldate=new List<object>(){"1/1/2000","1,1/2001"};
List<object> lage=new List<object>(){"4","5"};

mydata["date"] = ldate;
mydata["age"] = lage;

List<Dictionary<string, object>> mytarget = new List<Dictionary<string, object>>();
Dictionary<string,object> t1=new Dictionary<string,object>();
Dictionary<string,object> t2=new Dictionary<string,object>();

t1["date"]="1/1/2000";
t1["age"]="4";

t2["date"]="1/1/2001";
t2["age"]="5";

mytarget.Add(t1);
mytarget.Add(t2); 
```

非常感谢，canric

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:19:22.830

这应该有效：

```
Dictionary<string,List<object>> orig = ...
var res = Enumerable.Range(0, orig.Values.First().Count)
    .Select(
        i => orig.Aggregate(
            new Dictionary<string,object>()
        ,   (d, p) => { d[p.Key] = p.Value[i]; return d; }
        )
    ).ToList(); 
```

[在 ideone 上](http://ideone.com/ymI4bW)查看演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:26:45.587

我只会给你更简单的选择，而不需要复杂的聚合用法：

```
var target = Enumerable.Range(0, source.Values.First().Count)
                   .Select(i => source.ToDictionary(x => x.Key, x => x.Value[i]))
                   .ToList(); 
```

# symfony - Symfony2：如何翻译@Assert\Callback 消息

> ID：16108850
> 
> 赞同：2
> 
> 时间：2013-04-19T16:03:22.683
> 
> 标签：symfony, twig, translate

我的实体中有一个回调方法

```
@Assert\Callback(methods={"isStudentsOK"}) 
....
public function isStudentsOK(ExecutionContext $context)
{
  if ( $this->students->isEmpty())
    $context->addViolationAtSubPath('students', 'Missing students informations', array(), null);
} 
```

我想在我的模板中翻译 le 消息。
`{{ form_errors(form.student)|trans }}`不起作用...我有这个

```
<span class="help-inline">Missing students informations</span> 
```

这是一个错误吗？我能怎么做 ？

**编辑**

我自己找到了回复：

我已经安装了一个 BootstrapBundle 并`{% block form_errors %}`显示在一个跨度内

我已经覆盖了`form_div_layout.html.twig`模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T07:25:24.797

您的代码使用了 |trans 过滤器，所以我假设您使用的是 Twig i18n 扩展，而该扩展又使用 PHP 的 gettext 函数。

如果您的 PHP 代码生成消息，您不妨在那里进行翻译：

```
@Assert\Callback(methods={"isStudentsOK"}) 
....
public function isStudentsOK(ExecutionContext $context)
{
  if ( $this->students->isEmpty())
    $context->addViolationAtSubPath('students', _('Missing students informations'), array(), null);
} 
```

请注意错误消息中的下划线功能。这是“Trans”过滤器的 PHP 等效项。

# spring - 事务外的休眠对象树？

> ID：16108858
> 
> 赞同：0
> 
> 时间：2013-04-19T16:03:56.920
> 
> 标签：spring, hibernate, transactions, tree, deep-copy

我正在实现一种需要长时间运行的作业的 JobProcessor。这些作业使用的信息基本上`Page`是`PageField`和`PageRelation`，这些信息定义了一个页面树，每个页面都有自己`PageField`的 s。

**tl;dr 如何轻松地从 Hibernate 复制对象结构以在事务外部使用？**

更多详情：

我使用 Hibernate 来持久化这些对象，一切正常。目前，我在手动控制事务的 VM 中运行 JobProcessor：

```
 this.em.getTransaction().begin();
    job.start();
    this.em.getTransaction().commit(); 
```

我有时需要页面上的信息，我可以像这样检索它们：

```
 this.em.getTransaction().begin();
    Page page = this.withId(pageId)
    this.em.getTransaction().commit(); 
```

不知何故，我很幸运从未遇到过 LazyInitialization 异常；我相信是因为 HibernateSession 永远不会关闭。

现在我要转移到 Spring 控制的环境，并尝试使所有事务简短而干净。我需要 的对象树`Page`，即长期运行方法中的所有字段、关系和字段。我认为最好的方法是制作树的防御性副本。这怎么能轻松实现？还是有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:14:19.793

所以就像你说的，Hibernate 试图推迟获取数据，直到你需要它，这通常对性能有好处。

以下是一些解决方案：

1) 如果您知道您将始终需要整个页面树，您可以使用 Hibernate 查询和您需要的子实体的 fetch join（而不是只执行 session.get()）。这将强制 Hibernate 填充子元素。

2）如果您首先需要每个页面的高级信息，并且当用户采取某些操作（例如单击特定页面）时只需要树的其余部分，那么当用户选择该页面时，您可以使用页面 id 来获取特定页面的子元素，也可能使用 Hibernate 查询。

# java - 如何在不破坏原始数组的情况下对数组进行排序？

> ID：16108860
> 
> 赞同：8
> 
> 时间：2013-04-19T16:04:12.437
> 
> 标签：java, arrays, sorting

我有原始数组

```
public static void main (String[] arg) {
  int[] array = {1,5,6,8,4,2}

  for (int i = 0; i < array.length; i++) {
    System.out.print("List 1 = " + array[i] + ",");
  }
  swap(array);
  for (int i = 0; i < array.length; i++) {
    System.out.print("List 2 = "+array[i] + ",");
  }
}
private static int swap (int[] list){
   Arrays.sort(list);
} 
```

输出是

```
 List 1 = 1,5,6,8,4,2
 List 2 = 1,2,4,5,6,8 
```

我想要的答案是

```
List 1 = 1,5,6,8,4,2
List 2 = 1,5,6,8,4,2 
```

即使在排序之后。我该怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-19T16:06:47.277

```
int[] originalArray = {1,5,6,8,4,2};
int[] backup = Arrays.copyOf(originalArray,originalArray.length);
Arrays.sort(backup); 
```

After the execution of the code above, `backup` becomes sorted and `originalArray` stays same.

# c# - 选择的主条目发生变化时如何刷新明细？

> ID：16108862
> 
> 赞同：3
> 
> 时间：2013-04-19T16:04:25.140
> 
> 标签：c#, winforms, entity-framework

我有一个带有 2 个网格的主明细表：客户 = 主控，订单 = 明细。从主网格中选择新客户时如何刷新详细信息？这是我的代码：

```
public partial class Form1 : Form
    {
        AutoLotEntities context = new AutoLotEntities();
        BindingSource customerBindingSource;
        BindingSource orderBindingSource;

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            customerBindingSource = new BindingSource();
            orderBindingSource = new BindingSource();

            customerBindingSource.DataSource = context.Customers;
            orderBindingSource.DataMember = "Orders";
            orderBindingSource.DataSource = customerBindingSource.DataSource;

            grdCustomers.DataSource = customerBindingSource;
            grdOrders.DataSource = orderBindingSource;
        }
    } 
```

我在 Form1.Desginer.cs 中的 IDE 生成代码的帮助下设法做到了这一点，但我想用非生成代码手动完成，看看这个东西是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:19:35.250

创建一个使用客户作为其上下文为订单生成网格的方法。然后创建一个接受另一个参数（例如客户 ID）的重写方法，然后用它重新加载您的数据网格。

# java - java中的字典使用hashmap

> ID：16108872
> 
> 赞同：0
> 
> 时间：2013-04-19T16:05:00.877
> 
> 标签：java, hashmap, set

我正在写一个小电话簿，只是为了练习我对 java 的了解。问题出在下面的代码中，我希望代码在调用 getname 方法时显示名称和号码。我是一个初学者，我真的很想让这个项目成功。

```
public class Phone {

    private HashMap<String, Integer> name;
    HashMap<String, Integer> namelist = new HashMap<String, Integer>();
    Integer number;
    String names;

    /**
     * @return the name
     */
    Phone() {

        // get user to enter name and number
        Scanner scan = new Scanner(System.in);
        System.out.println("enter name ");
        names = scan.nextLine();

        System.out.println("enter number ");
        String nums = scan.nextLine();
        number = Integer.parseInt(nums);

        namelist.put(names, number); // set key and value to namelist object;

        setName(namelist); //

    }

    void printValue() {

        System.out.print(namelist.get(names));

    }

    public HashMap<String, Integer> getName() {
        return name;
    }

    /**
     * @param names
     *            the name to set
     */
    public void setName(HashMap<String, Integer> names) {
        this.name = names;
    }

    public static void main(String[] args) {

        Phone ph = new Phone();
        Gui window = new Gui();
        System.out.println(ph.getName());
        ph.printValue();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:07:47.343

您的`getName()`方法应该返回一个字符串，而不是一个 HashMap；您需要在返回之前连接名称和号码，例如`return name + "; " + Integer.toString(number);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:21:38.410

我假设通过说“显示姓名和号码”，您想要显示手机中存储的所有联系人。所以问题似乎是如何打印哈希图中的所有元素。

```
 for(String name : map.keySet()){
        System.out.println("name is " + name);
        System.out.println("contact is " + map.get(name));} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:36:53.050

这是一个更简单的答案：

```
System.out.println(map); 
```

这会调用 Map 上的 toString() 方法，该方法调用键和值的 toString() 方法，并且该实现报告键/值对，如下所示：

“乔”->“123456789”

唯一需要注意的是默认情况下不会在元素之间放置换行符。如果你想这样做，你可以这样做：

```
for(Map.Entry<String,Integer> entry: map.Entry())
    system.out.println(entry); 
```

# html - 如何使用 Breeze.js 和 HTML5 本地存储实现支持离线的单页应用程序

> ID：16108876
> 
> 赞同：5
> 
> 时间：2013-04-19T16:05:13.657
> 
> 标签：html, synchronization, breeze, single-page-application, offline-caching

我有使用 Breeze.js 进行数据访问的单页应用程序。它使用 Breeze.js 对本地缓存执行查询，并且仅在启动时请求一次数据。之后仅将数据更新回发到服务器上。

我正在寻找一种使应用程序连接感知的解决方案。如果移动设备没有互联网连接，更改将使用 Breeze.js 和 HTML5 本地存储在本地保存。当移动设备重新联机时，更改将同步到远程数据存储。

任何指导方针如何实现该要求？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:54:59.577

看起来 HTML5 提供了 5MB 的本地存储，在清理之前一直存在，并且对于使用 XMLHttpRequest 存储 JSON 值很有用。

HTML 5 navigator.onLine 属性提供离线检测。在线为真，不在线为假

```
 var nav = window.navigator;
 if(nav.onLine) {
    // do HMLHttpRequests etc
 }
 window.addEventListener('online', function() {   });
 window.addEventListener('offline', function() {   }); 
```

有关更多信息，请查看[使用 HTML5 构建混合移动应用程序](http://pluralsight.com/training/Courses/TableOfContents/native-mobile-apps-with-html5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T05:54:18.203

@mitaka 向您指出连接更改检测。

对于使用 BreezeJS 将实体保存到本地存储，BreezeJS 文档中的“[导出/导入](http://www.breezejs.com/documentation/exportimport)”主题提供了有价值的线索。[“ DocCode](http://www.breezejs.com/samples/doccode) ”示例中的“ *exportImportTests.js* ”文件演示了其中描述的一些技术。

# python - 使用优化模块的 Scipy 错误。将数组转换为 fortran 失败

> ID：16108877
> 
> 赞同：7
> 
> 时间：2013-04-19T16:05:17.327
> 
> 标签：python, optimization, scipy

尝试使用 scipy 的优化模块来查找使用 slsqp 的函数的最小值，但我遇到了一些问题。调用该函数的实际代码如下所示：

```
def minimizeWebEnergyLost(x, parameters):
    """values = [theta, velocity]"""
    firstTerm = lambda values: (x * values[1]**2 / 2.0)
    sqrtTerm = lambda values: np.sqrt((parameters.gravity**2 * x**2) / (4 * values[1]**4 * np.cos(values[0])**4) + 1)
    secondTerm = lambda values: (values[1]**4 * np.cos(values[0])**2) / parameters.gravity
    arcsinhTerm = lambda values: np.arcsinh((parameters.gravity * x) / (2 * values[1]**2 * np.cos(values[0])**2))
    costFunction = lambda values: firstTerm(values)*sqrtTerm(values)+secondTerm(values)*arcsinhTerm(values)
    bounds = ((-math.pi/2,math.pi/2),(0,parameters.maxSlingSpeed))
    minimum = minimize(costFunction, (pi/4, 20), method="SLSQP", bounds=bounds)
    return minimum 
```

由于某种原因，我得到的错误如下：

```
_slsqp.error: failed in converting 8th argument `g' of _slsqp.slsqp to C/Fortran array 
```

不太确定发生了什么，但如果有帮助，我可以提供更多可能有用的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-03T10:25:04.007

当用户指定的目标函数不返回标量时，会发生此神秘错误。[b-carter](https://github.com/b-carter)现在在补丁中返回一条明确的错误消息，

```
"Objective function must return a scalar" 
```

并且文档已更新，请参阅[此](https://github.com/scipy/scipy/issues/5433)线程进行讨论。

# android - developer.android.com/training bitmapfun 项目

> ID：16108878
> 
> 赞同：6
> 
> 时间：2013-04-19T16:05:18.347
> 
> 标签：gridview, 后退按钮, asynctask, android, gridview, android-asynctask, android-lru-cache

我在我的应用程序中使用[了 bitmapfun](http://developer.android.com/training/displaying-bitmaps/index.html)项目（[gridview](/questions/tagged/gridview "显示标记为“gridview”的问题")），在测试这个时我发现了一个问题。重现此问题的步骤如下：

1.  打开 wifi -> 启动应用程序 -> 下载图像（它工作正常）。
2.  关闭应用程序（后退按钮），停用 wifi -> 激活数据网络 -> 重新启动应用程序（仍然可以正常工作）。
3.  在下载所有图像之前，我关闭应用程序（后退按钮）-> 停用数据网络 -> 激活 wifi。在这一步之后，当我重新启动应用程序时，图像不会下载。

在 logcat 中，我看到所有图像都在 imageWorker 的 cancelPotentialWork() 中被取消，并且它们永远不会启动。我的猜测是之前的 bitmapworkerTask（*负责下载*）发生了一些事情，并且与新任务发生了冲突。在我的应用程序中，当按下[后退按钮](/questions/tagged/backbutton "显示标记为“后退按钮”的问题")时，我会清除所有缓存。但这不是问题的原因，因为我也在原始 bitmapfun 中测试了相同的场景，问题也出现了！我该如何解决这个问题？我还把项目的多线程[asynctask](/questions/tagged/asynctask "显示标记为“异步任务”的问题")改成了单线程！有没有办法清除所有 imageview 引用并取消所有正在运行的任务？

对不起我的英语并且没有提供有关 bitmapfun 项目性质的更多信息，但它会非常扩展我的问题！问我任何问题！

编辑：为了重现问题，每次使用菜单选项离开活动时，最好清除缓存。此外，如果您按照步骤 1-3 执行一次，也不确定是否会出现问题。也许你必须重复它们！

Edit2（附加帮助）：当我毫无问题地开始活动时，第一张图像的 logcat 如下：

```
04-24 02:31:56.400: D/ImageWorker(25625): doInBackground - starting work
04-24 02:31:56.400: D/ImageFetcher(25625): processBitmap - https://lh3.googleusercontent.com/--L0Km39l5J8/URquXHGcdNI/AAAAAAAAAbs/3ZrSJNrSomQ/s160-c/Antelope%252520Butte.jpg
04-24 02:31:56.400: D/ImageFetcher(25625): processBitmap, not found in http cache, downloading... 
```

当我开始有问题的活动时，logcat是这样的：

```
04-24 02:28:07.970: D/ImageWorker(24014): cancelPotentialWork - cancelled work for https://lh3.googleusercontent.com/--L0Km39l5J8/URquXHGcdNI/AAAAAAAAAbs/3ZrSJNrSomQ/s160-c/Antelope%252520Butte.jpg 
```

为什么在第二种情况下，当 cancelPotentialWork 被调用时 doInBackground 永远不会启动？根据代码序列，这是应该执行的下一部分！至少有人知道我应该在哪里搜索错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:50:22.963

发生在你身上的事没关系。因为ImageFetcher在OnCreate()时加载图片，但被网络取消激活。它不包含自动重启代码。所以如果你想要加载自动重启，添加代码来检测网络的状态变化。我不认为它敏感。只需让用户通过单击刷新按钮等来重新启动它。

# google-drive-api - Google Drive search files. When use 'me' alias?

> ID：16108884
> 
> 赞同：1
> 
> 时间：2013-04-19T16:05:30.240
> 
> 标签：google-drive-api

For my application I need find all user's documents. I using Google Drive Files.list API with query like "'abc@example.com' in owners". For some users I get empty search results, but these users has a lot of docs. I found that for these users I can fetch all doc with Alias 'me' - "'me' in owners". My application using 2 legged oauth.
Why I getting different results for 'me' and 'user email' search queries?
Is this a bug?
I didn't find any notes about alias 'me' in official docs, so I am not sure if it is safe to use it or not.

# python - How to remove extreme values from matplotlib plot when std() does not work

> ID：16108888
> 
> 赞同：0
> 
> 时间：2013-04-19T16:05:38.713
> 
> 标签：python, numpy, matplotlib

I have a problem with plotting in `matplotlib`, but the question may be more about handling `numpy` arrays than about the plotting itself - a solution in matplotlib would perhaps be more desirable!

The problem is this: I have two ndarrays, `xvals` and `yvals` of shape (1000,), to be interpreted as fitted x and y coordinates (they are supposed to be centered around some value). Some elements (but not *very* few!) have extremely large absolute values compared to the others (by a factor 1000 or larger). The reason I can't set the axes to some fixed value is that `mean(xvals)` and `mean(yvals)` and their standard deviation varies between the plots quite a bit.

I want to do a 2d plot of the points with something like `plt.plot(xvals, yvals, '.')`, and it is important for me to set the axes automatically so that one can see the main distribution of points clearly. The reason that is has to be done automatically is that I'm doing ~100 plots and must be able to name and change things in the plots repeatedly.

I have already tried to use `plt.axis([mean(xvals) - k * std(xvals), mean(xvals) + k * std(xvals), mean(yvals) - k * std(yvals), mean(yvals) + k * std(yvals)])`, trying out different values of `k`, but none seems to work for all my plots.

Here are two pictures, showing (1) what I get (without using `axis()` at all, and (2) what I roughly would like to have outputted:

![Wrong...](https://i.stack.imgur.com/keQKz.png) ![About right...](https://i.stack.imgur.com/W6ox7.png)

I hope I have provided enough information, please tell me otherwise and I will try to provide it!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:10:23.570

也许你可以使用这样的东西：

```
x = sorted(xvals)
y = sorted(yvals)
plt.axis([x[.1*len(x)], x[.9*len(x)], y[.1*len(y)], y[.9*len(y)]]) 
```

它忽略了两边 10% 的点。

# editor - IAR EW new text editor file extensions

> ID：16108891
> 
> 赞同：2
> 
> 时间：2013-04-19T16:05:41.973
> 
> 标签：editor, iar

Recently I instal IAR EW for MSP430 v5.51.6\. It has a new text editor. I open my project and what I see is that all file tabs in editor window is without extensions. I have global.c and global.h. In new editor tabs look the same. How to make extension to be visible?

# unity3d - User detection in unity with kinect sdk

> ID：16108892
> 
> 赞同：0
> 
> 时间：2013-04-19T16:05:42.583
> 
> 标签：unity3d, wrapper, kinect, kinect-sdk

I'm using Unity 4.0.1 with kinect sdk 1.6 and developing with c# (imported kinect wrapper),

In the project when user goes out of range or one of bones can not be captured because of user not exactly in the range of kinect I want to display a message.

I've tried "code for detecting humans" in [Kinect user Detection](https://stackoverflow.com/questions/10577862/kinect-user-detection)

This solution gives compile error like

"Assets/Kinect/KinectModelControllerV2.cs(93,10): error CS0246: The type or namespace name `DepthImageFrame' could not be found. Are you missing a using directive or an assembly reference?"

I've imported Kinect and tried to import DepthImageFrame to chect if it works, but nothing changed.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:02:05.010

The examples provided in the [Kinect for Windows Toolkit](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx) and the code located on the [Kinect for Windows CodePlex](http://kinectforwindows.codeplex.com/) site are full of examples of how to detect players.

Looking at the "Skeleton Basics" example immediately comes to mind, followed by the "Shape Game" example.

A basic flow to detecting players in the `SkeletonFrameReady` callback follows:

```
Skeleton[] skeletons = new Skeleton[6];

private void SensorSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
    {
        if (skeletonFrame != null)
        {
            skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];
            skeletonFrame.CopySkeletonDataTo(skeletons);
        }
    }

    if (skeletons.Length != 0)
    {
        foreach (Skeleton skel in skeletons)
        {
            if (skel.TrackingState == SkeletonTrackingState.Tracked)
            {
                // `skel` is an actively tracked skeleton
                // do what you wish with it
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:57:44.313

对不起，我的英语不好。

原因是包装器使用 Kinect SDK 1.0 而您使用 Kinect SDK 1.6。

[http://channel9.msdn.com/coding4fun/kinect/Unity-and-the-Kinect-SDK](http://channel9.msdn.com/coding4fun/kinect/Unity-and-the-Kinect-SDK)。

# ruby-on-rails - factory_girl > association with lazy attributes

> ID：16108894
> 
> 赞同：1
> 
> 时间：2013-04-19T16:05:55.760
> 
> 标签：ruby-on-rails, activerecord, factory-bot

I'm trying to have a factory build an `Offering` object with a child object `Rating` that will receive the `item_id` from it's parent.

```
FactoryGirl.define do
  factory :offering do
    item_id nil
    element_id nil
    association :rating, factory: :rating, strategy: :build, :item => item_id
  end
end 
```

The Offering is created with

```
offering = FactoryGirl.create :offering, item_id: 21, element_id: 211 
```

But when run, it aborts with an error

```
Failure/Error: offering = FactoryGirl.create :offering, item_id: 21, element_id: 211
 ArgumentError:
   Trait not registered: item_id 
```

I assume the error occurs because the `item_id` in the association definition is not "lazy" and therefor undefined.

How can I solve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T21:37:11.510

不幸的是，我不知道有什么方法可以对关联进行惰性评估（如果我在这方面错了，请有人纠正我）。您最好的选择可能是使用回调。假设您定义了一个工厂`:rating`，请尝试替换您的

`association :rating, factory: :rating, strategy: :build, :item => item_id`

和

```
after(:create) do |offering, evaluator|
  FactoryGirl.build(:rating, item_id: evaluator.item_id, element_id: evaluator.element_id)  
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-25T22:42:04.377

您可以懒惰地定义关联：

```
FactoryGirl.define do
  factory :offering do
    item_id nil
    element_id nil
    rating { association(:rating, :item => item_id) }
  end
end 
```

# arrays - 了解 J 数组

> ID：16108899
> 
> 赞同：3
> 
> 时间：2013-04-19T16:06:14.037
> 
> 标签：arrays, j

从简单的事情开始：

```
a =: 3 4 $ i.12 
```

这将创建一个不错的 3 x 4 矩阵。

所以当我尝试

```
b=: a $ i.5 
```

我得到了很长的 b 输出。我不明白输出是什么（顺便说一下，i.5 是任意的）。我的意思是，当它有一个二维数组作为左手参数时，我不明白 $ 的含义。有人可以解释 b 描述的是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:24:01.550

这是发生的事情：a 变成矩阵

```
0 1  2  3
4 5  6  7
8 9 10 11 
```

正如你刚才描述的。$ 具有 1 _ 的并列秩，这意味着它将左参数行应用于整个右参数并将结果粘贴在一起。 `a $ i.5`是`(0 1 2 3 $ i.5),(4 5 6 7 $ i.5),:(8 9 10 11 $ i.5)`

所有子数组都有不同的形状，因此它们被强制转换为适合它们的最不常见的形状，在这种情况下是`8 9 10 11`. 因此，结果具有形状`3 8 9 10 11`

# html - 左侧固定菜单上的 HTML 目标链接不起作用

> ID：16108901
> 
> 赞同：0
> 
> 时间：2013-04-19T16:06:25.787
> 
> 标签：html

在[http://www.elitedeafpoker.com/dev/poker-players.html](http://www.elitedeafpoker.com/dev/poker-players.html)上，当您向下滚动一点然后单击（位置：固定）左侧菜单之一时，它不会跳到顶部，而是停留在这是。单击链接后，我需要它跳转到播放器表格上方的内容顶部。

左菜单

```
<div class="list-1">
    <ul>
        <li class="pokerplayers"><a href="#pokerplayers">EDPS Poker Players </a></li>
        <li class="playerofthemonth"><a href="#playerofthemonth">Players of the Month</a></li>
        <li class="playeroftheyear"><a href="#playeroftheyear">Players of the Year </a></li>
    </ul>
</div> 
```

热门内容

```
<div class="content-header"></div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T16:10:34.947

关于什么

```
<li class="pokerplayers">
  <a href="pokerplayers" onClick="window.scrollTo(0,0);">EDPS Poker Players </a>
</li> 
```

?

# android - Change the button color after a variable time

> ID：16108906
> 
> 赞同：-1
> 
> 时间：2013-04-19T16:06:42.513
> 
> 标签：android, android-handler

I'm having a problem to change the button color after a certain amount of time. I know how to change using handle after a fixed time, but I need to change the color after a specific time that is chosen by the user.

```
public class MainActivity extends Activity {

EditText tempo;
Button bt;
int estado = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tempo = (EditText) findViewById(R.id.tempo);
    long delay = Long.parseLong(tempo.getText().toString());

     bt = (Button) findViewById(R.id.btvibrar);

     bt.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {

        if(!tempo.getText().toString().equals("")){

            if(estado==1){

                  Vibrar();
                  estado*=-1;

                 bt.setText("Parar !");
                 bt.setBackgroundColor(Color.RED);

                    //Handler handler = new Handler();
                    //handler.postDelayed(new Runnable() {

                        //@Override
                        //public void run() {
                            //estado*=-1;
                            //bt.setText("Vibrar !");
                             //bt.setBackgroundColor(Color.GREEN);
                        //}
                //  },  );
                            } else {
                                Parar();
                                estado*=-1;
                                bt.setText("Vibrar !");
                                 bt.setBackgroundColor(Color.GREEN);

                                    }
                                        } else  {
                                            AlertDialog.Builder dialogo = new AlertDialog.Builder(MainActivity.this);
                                            dialogo.setTitle("Erro !");
                                            dialogo.setMessage("Escolha um tempo.");
                                            dialogo.setNeutralButton("OK", null);
                                            dialogo.show();

                                        }
        }

        private void Vibrar(){    // É necessario lançar excessao no ANDROIDMANIFEST.XML
            Vibrator rr = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
            long treal = Long.parseLong(tempo.getText().toString());
            long milliseconds = treal*1000;  
            rr.vibrate(milliseconds);
        }

        private void Parar(){
            Vibrator rr = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
            rr.cancel();
        }

    });
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:44:59.867

此代码将按钮的颜色切换为红色：

```
bt.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        new AsyncTask<Long, Void, Void>() {
            @Override
            protected Void doInBackground(Long... delay) {
                if (delay.length > 0) {
                    try {
                        Thread.sleep(delay[0]);

                    } catch (InterruptedException e) {
                    }
                }

                return null;
            }

            @Override
            protected void onProgressUpdate(Void... none) {
            }

            @Override
            protected void onPostExecute(Void none) {
                if (ContactManager.this != null && !ContactManager.this.isFinishing()) {
                    bt.getBackground().setColorFilter(0xFFFF0000, PorterDuff.Mode.MULTIPLY);
                    bt.invalidate();
                }
            }
        }.execute(new Long(delay));
    }
}); 
```

它使用`delay`延迟变量。希望这可以帮助 ...

干杯!

# android - Android - Error Multiple dex files with GCM library

> ID：16108909
> 
> 赞同：0
> 
> 时间：2013-04-19T16:06:55.297
> 
> 标签：android, eclipse, google-cloud-messaging

I need to support GCM in my app, but i can't even run it because of this error:

```
Unable to execute dex: Multiple dex files define Lcom/google/android/gcm/GCMBaseIntentService; 
```

I followed Google instructions but at first I added the .jar file as external library from the build path, then I read that I need to add the file to the /libs folder, so i removed from the path and added in the /libs folder. Now i get this error, if I remove the gcm.jar file the app runs, if I add it back it doesen't even start.
I tried cleaning up the project, updating Android SDK but nothing solved that
I'm running Eclipse Version: 3.7.2

# php - 显示用户上次活动的时间

> ID：16108910
> 
> 赞同：0
> 
> 时间：2013-04-19T16:06:59.193
> 
> 标签：php, date, time

使用 PHP，我如何使用以下信息显示用户在多长时间前处于活动状态。

数据库表`users_activity`

```
| Username  |  Time               |
----------------------------------
| User1     |2013-09-19 12:29:25  |
| User2     |2013-04-19 11:24:54  |
__________________________________ 
```

我希望它如何显示在网站页面上：

`Last Active: 430 days 12 hours 58 minutes 45 seconds ago`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:09:28.997

用于`mktime`格式化，然后`floor`进行比较。

这个链接应该有帮助：[PHP Date Difference](http://www.phpf1.com/tutorial/php-date-difference.html)。

# highcharts - 弃用版本的 HighCharts API

> ID：16108918
> 
> 赞同：9
> 
> 时间：2013-04-19T16:07:33.290
> 
> 标签：highcharts

有谁知道自 HighCharts 3 发布以来，HighCharts 2.* API 文档是否仍然可以在线获得？我还没有升级，我真的可以访问 2.3.5 版的 API 文档。特别是，我想访问 HighCharts 2.3.5 中的导出模块文档。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T10:12:00.043

不幸的是，以前的文档不可用，但在当前文档中的参数描述中，您可以注意到版本（右侧），这是与此选项的兼容性。

**编辑：** Highcharts 现在在下载已弃用的版本[https://code.highcharts.com/zips/Highcharts-5.0.0.zip](https://code.highcharts.com/zips/Highcharts-5.0.0.zip)时包含一个 API 文件夹。但 API 文件夹仅适用于版本 5 及更高版本。

# git - 在 rebase 期间修复没有合并工具的冲突？

> ID：16108920
> 
> 赞同：0
> 
> 时间：2013-04-19T16:07:42.530
> 
> 标签：git, conflict, git-rebase

我正在我的分支上对 master 进行 rebase。存在冲突的二进制文件（我预计会发生冲突），我只想接受分支上的那个。如果这是一个文本文件，我会用合并工具打开文件并接受我的分支上的所有内容，但由于它的二进制文件我当然不能这样做。所以说分支名称是`branch1`并且在做了一个 rebase 之后：

```
 K:\gitrepo\supplemental [(1c58d85...)|REBASE +0 ~0 -0 !1 | +0 ~0 -0 !1]> g s
# Not currently on any branch.
# You are currently rebasing.
#   (fix conflicts and then run "git rebase --continue")
#   (use "git rebase --skip" to skip this patch)
#   (use "git rebase --abort" to check out the original branch)
#
# Unmerged paths:
#   (use "git reset HEAD <file>..." to unstage)
#   (use "git add <file>..." to mark resolution)
#
#       both modified:      mybinaryfiles/file.bin
# 
```

要接受分支上的文件并完成变基，我只需：

```
git add .
git rebase --continue 
```

为了使问题更完整，如果我想接受来自 master 而不是分支的文件，我会怎么做？

在试图了解 git 在 rebase 中的合并冲突期间实际做了什么......它是否真的保持冲突文件完好无损，只是想让你通过做一个确认这是正确的`git add`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:11:38.493

Git 合并支持不同的合并策略，包括`ours`和`theirs`. Git rebase 允许通过使用`-m`选项来使用这种合并策略。我建议在你开始玩之前阅读`git-merge`和`git-rebase`手册，因为它有一些怪癖。

也可以看看：

1.  [如何为 git rebase 选择合并策略？](https://stackoverflow.com/questions/2945344/selecting-merge-strategy-options-for-git-rebase)

2.  [我怎么能对变基中的一个提交使用不同的策略？](https://stackoverflow.com/questions/7632678/how-could-i-use-a-different-strategy-for-just-one-commit-in-a-rebase)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:21:46.857

您在索引中同时拥有这两个（好吧，包括基本版本在内的所有三个）。您可以使用以下命令检索“master”版本或“being-rebased”分支版本：

```
git checkout --ours mybinaryfiles/file.bin 
```

和

```
git checkout --theirs mybinaryfiles/file.bin 
```

分别。

然后只是`git add mybinaryfiles/file.bin`和`git commit`。

# ajax - 在 wordpress 中使外部 php 页面动态化

> ID：16108923
> 
> 赞同：0
> 
> 时间：2013-04-19T16:07:53.797
> 
> 标签：ajax, wordpress, dynamic, colorbox

触发模式时，我正在使用颜色框加载外部 php 文件。使用 colorbox 的`href`参数效果很好。我将它带入 wordpress 只是为了意识到 wordpress 和通过 ajax 加载存在一些问题。

在 wordpress 中，模态成功加载，但我希望能够使用 wordpress 的动态标签（`bloginfo('template_url')`、`bloginfo('home')`等）。这些在外部页面中不起作用，即使在主题文​​件夹中，因为 wordpress 认为这些只是 wordpress 之外的标准 html/php 页面。

我将如何使这些页面工作？

Colorbox 只是像这样加载内容：

```
$.colorbox({
     href: url
}); 
```

在 wordpress 页面模板上，我像这样触发颜色框：

```
<a href="<?php bloginfo ("template_url"); ?>/lobby.php"> 
```

我需要 lobby.php 来接受由 wordpress 提供支持的动态图像和内容。它仍在主题文件夹中，尽管它实际上不是模板。这可能吗？在每个外部页面中，没有页眉或页脚……只是要加载的内容。我怎样才能最好地解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:20:15.220

似乎我上面的评论回答了你的问题；[这个答案](https://stackoverflow.com/questions/5306612/using-wpdb-in-standalone-script/5331944#5331944)显示了如何在独立的 PHP 页面中包含 WordPress 功能。

# http - Nginx路径文件夹重写

> ID：16108928
> 
> 赞同：2
> 
> 时间：2013-04-19T16:08:16.360
> 
> 标签：http, nginx

Nginx 中的简单路径重写，我无法让它工作。

由此：

```
/assets/sites/fpi/css/reset.css 
```

对此：

```
/assets/sites/default/css/reset.css 
```

我的规则如下所示：

```
rewrite ^/assets/sites(.+)$ /assets/sites/default/$1 last; 
```

/** 更新 **/

感谢您迄今为止提供的有用答案。我想要一种更通用的方法来定位 URL 路径的“fpi”部分。

就像是：

```
<pre>
rewrite ^(/assets/sites)/\w*/(.*)$ $1/default/$2 last;
</pre> 
```

这将匹配该部分的任何部分，因此所有匹配此模式的 url：

```
<pre>
/assets/sites/fpi/css/reset.css
/assets/sites/gbc/css/reset.css
/assets/sites/ekg/css/reset.css
</pre> 
```

将转移到：

```
<pre>
/assets/sites/default/css/reset.css
/assets/sites/default/css/reset.css
/assets/sites/default/css/reset.css
</pre> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:32:11.100

代替`last`，使用`break`，`redirect`或`permanent`。差异很微妙：

*   **break**将停止处理当前位置块的重写规则，这意味着您将摆脱重写无限循环。但是，如果触发了 - 包含规则，它将导致任何后续重写规则被忽略`break`。**与 不同`last`的是，不会从那里处理其他重写规则，并且该规则不能自行重新评估**。
*   **永久**允许您立即执行 301 HTTP 重定向（即*，它永远位于此地址！*）。这对于搜索引擎和浏览器缓存特别有用，以允许缓存和更少的资源分配（= 更少浪费的带宽）
*   **重定向与****永久**相同，但使用 302 代替（我暂时移动了）。不太好。

我`permanent`个人提倡。让您的访问者有机会缓存​​ CSS 样式表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T06:45:13.903

您的正则表达式与您的规范不匹配。用这个：

```
rewrite ^(/assets/sites)/fpi/(.*)$ $1/default/$2 last; 
```

示例中的正则表达式带有 fpi。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:24:51.367

从文档中：

> rewrite last - 完成当前重写指令的处理并重新启动该过程（包括重写），并从所有可用位置搜索 URI 上的匹配项。

您重写的 URL 将匹配正在匹配的模式，因此它将不断重写它。

您应该更改匹配器（或重写的路径）以不再匹配它。

# javascript - 带有 id 的元素上的 jQuery 触发事件以运行包含的树枝模板中的类定义的处理程序

> ID：16108930
> 
> 赞同：1
> 
> 时间：2013-04-19T16:08:18.787
> 
> 标签：javascript, jquery, symfony, twig

当通过 id 选择器调用 jQuery 的触发函数时，是否可以触发由同一元素的类选择器定义的该元素的事件处理程序？例如，假设我有这个 HTML：

```
<div class="my_button" id="my_button_1"></div> 
```

而这个 jQuery

```
$('.my_button').click(function() { 
    alert("button was clicked")
}); 
```

我正在寻找 call `$('#my_button_1').trigger('click')`... 并让它以最干净的方式触发该元素的上述 jQuery。任何帮助表示赞赏。

**编辑：**根据下面的评论，这显然不是 jQuery 的问题。这是正在使用的实际代码。

```
{% block javascripts %}
    {{ include('MyMainBundle:Event:wizard.js.twig') }}
{% endblock %} 
```

Wizard.js 中定义的处理程序：

```
 $('.event_type_option').click(function() {

        alert('option clicked');
        Event.eventTypeId = $(this).attr('id').substring(11);
        customComboSelect(this, $('#event_type_text'));
    });

    $('.people_range_option').click(function() {

        alert('range clicked');
        Event.peopleRangeId = $(this).attr('id').substring(13);
        customComboSelect(this, $('#people_range_text'));
    }); 
```

试图触发以下事件：

```
{% if event is defined %}
    <script>
        $(document).ready(function() {

            $('#event_type_{{ event.eventType.id }}').trigger('click');
            $('#people_range_{{ event.peopleRange.id }}').trigger('click');
        });
    </script>
{% endif %} 
```

此外，如果我尝试在处理程序定义之后直接触发事件，则会成功触发事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:04:58.050

jQuery 中的事件绑定是作为“先进先出”队列完成的（委托事件和命名空间事件稍微复杂一些，但现在这不太重要）。

意思是，由于事件绑定到一个元素，它们稍后在触发事件时以相同的顺序执行。

在您的情况下，您需要在尝试绑定`click`事件处理程序**之前**`.trigger()`绑定它。由于事件绑定和触发在不同`$(document).ready`的handler中，所以绑定事件的handler需要在触发事件的handler之前执行。

以下是当您尝试在绑定之前触发时发生的情况的示例：http: [//jsfiddle.net/yV57x/1/](http://jsfiddle.net/yV57x/1/) - 注意没有`alert`发生（除非您实际单击 HTML 中的元素）。翻转`$(document).ready`处理程序绑定可以解决问题。

就像一个注释，你的初衷是完全有效的。如果点击事件被绑定到一个元素上，那么你如何选择它并不重要——只要你能得到它，你就可以触发该事件。在这里测试它：http: [//jsfiddle.net/yV57x/](http://jsfiddle.net/yV57x/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:11:08.120

是的，可能。作为

`$('#my_button_1')`并且 `$('.my_button')`都指向同一个元素

```
$('.my_button').click(function() { 
    alert("button was clicked")
});
$('#my_button_1').trigger('click'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:25:24.100

是绑定事件时页面上的内容吗？文档可能已准备就绪，但如果您正在加载动态内容或创建内容并将其动态附加到页面上，则在尝试绑定事件时元素可能不存在。

根据您提供的最少信息，我的猜测是上述情况属实，在这种情况下，您需要创建一个委托事件，如下所示：

**对于 jQuery 1.7 或更高版本：**
[.on() 文档](http://api.jquery.com/on/)

```
$(document).on('click', '.my_button', function () {
    alert("Button was clicked!");
}); 
```

**对于 jQuery 1.4.2 - 1.7：**
[.delegate() 文档](http://api.jquery.com/delegate/)

```
$(document).delegate('.my_button', 'click', function () {
    alert("Button was clicked!");
}); 
```

**对于 jQuery 1.3 - 1.4.2：**
[.live() 文档](http://api.jquery.com/live/)

```
$('.my_button').live('click', function () {
    alert("Button was clicked!");
}); 
```

这些方法使用事件委托。设置这些处理程序时，元素甚至不必在页面上。由于内容是动态加载的，jQuery 会自动为您附加事件处理程序。

另外应该注意的是，如果从 DOM 中删除具有处理程序的内容，您应该使用[.remove()](http://api.jquery.com/remove/)或[.empty()](http://api.jquery.com/empty/) jQuery 命令来防止内存泄漏，因为这些首先删除所有绑定的事件，然后是元素.

**编辑**
我为每个调用添加了指向所有适当文档的参考链接。最后一次通话也应该`.live()`不是`.on()`。这是一个复制和粘贴错误，但现在已修复。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-19T16:10:43.190

是的，这就是它的工作原理。

选择器部分选择元素`$('.my_button')`。这些元素被分配了一个`onclick`处理程序：

```
.click(function() { 
    alert("button was clicked")
)}; 
```

然后`$('#my_button_1').trigger('click')`应该给你一个警报。

* * *

以编程方式调用事件处理程序的“最干净”的方式是（在我看来）不使用`trigger`. DOM 是视图，将其视为视图。如果您要在控制器中执行操作，请将它们保留在控制器中。

# sockets - 我无法连接到 localhost:7474/db/data 来创建 graphDatabaseService

> ID：16108931
> 
> 赞同：1
> 
> 时间：2013-04-19T16:08:20.437
> 
> 标签：sockets, python-2.7, port, neo4j, py2neo

我是 neo4j 的新手，当我编写此代码时出现以下错误：

```
>>> from py2neo import neo4j
>>> graph_DB = neo4j.GraphDatabaseService ("http://localhost:7474/db/data")

Traceback (most recent call last):
   File "<pyshell#1>", line 1, in <module>
      graph_DB = neo4j.GraphDatabaseService ("http://localhost:7474/db/data")
   File "C:\Python27\lib\site-packages\py2neo\neo4j.py", line 557, in __init__
      rs = self._send(rest.Request(self, "GET", self._uri))
   File "C:\Python27\lib\site-packages\py2neo\rest.py", line 372, in _send
      raise SocketError(err)
SocketError: error(10061, 'No connection could be made because the target machine actively refused it') 
```

我使用 Windows 7。我进行了几次搜索，发现我必须打开端口 7474 才能在**具有高级安全性的 Windows 防火墙中使用它，但是当我在****入站规则**中创建新规则时，这不会影响该端口。同样在 ubuntu 10.10 中，我无法使用**netcat**打开端口：

```
nc -l 7474 
```

我哪里错了？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-10T16:44:41.693

默认情况下，Neo4J 将访问限制为仅 127.0.0.1 (localhost)，但是，您可以更改此选项。在“conf”文件夹中找到“neo4j-server.properties”并用记事本打开这个文件。

查找以下内容：

```
# Let the webserver only listen on the specified IP. Default is localhost (only
# accept local connections). Uncomment to allow any connection. Please see the
# security section in the neo4j manual before modifying this.
# org.neo4j.server.webserver.address=0.0.0.0 
```

取消注释最后一行（删除 # 符号）以允许从任何地方（0.0.0.0）进行访问。（可选）将 IP 设置为仅允许从您的 Web 服务器进行访问。

# c# - 将 await 与实现 CancelEventArgs 的事件一起使用

> ID：16108933
> 
> 赞同：1
> 
> 时间：2013-04-19T16:08:24.117
> 
> 标签：c#, task-parallel-library, async-await

我有一个类似的基类：

```
public abstract class PageBase
{
    public PageBase() { }

    public Task<object> Refresh(ModelRequirements requirements)
    {
        // does work of talking to server and getting data
    }

    private DataStates _dataState;
    public DataStates DataState()
    {
        get { _dataState = value; }

        set
        {
            var e = new DataStateChangingEventArgs();

            // the following method raises the changing event.
            // it does not return a task, and cannot be awaited.
            OnDataStateChanging(e);

            if (e.Cancel)
                return;

            _dataState = value;
        }
    }

    public event EventHandler<DataStateChangingEventArgs> DataStateChanging;
    protected virtual void OnDataStateChanging(DataStateChangingEventArgs e)
    {
        var dataStateChanging = DataStateChanging;
        if (DataStateChanging != null)
            DataStateChanging(this, e);
    }
} 
```

我实现了这样的页面：

```
public class ContactsSearchPage : PageBase
{
    public ContactsSearchPage() { }

    private ContactModel Model {get; set;}

    protected async override void OnDataStateChanging(DataStateChangingEventArgs e)
    {
        // make new requirements
        var contactRequirements = new ContactRequirements();

        // Because the Refresh is awaited, it returns here and the rest 
        // of the DataState setter executes
        var refreshResult = await Refresh(contactRequirements);

        // set the property
        Model = refreshResult as ContactModel;

        // if the server returned null don't allow the data-state change to proceed
        if (Model == null)
            e.Cancel = true;
    }
} 
```

等待刷新（在 OnDataStateChanging 覆盖内）是一个问题，因为它会返回。在不让 OnDataStateChanging 返回任务的情况下，这种模式有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:11:25.293

期望属性设置器*实际上会设置属性*，并且它会在设置器返回之前执行此操作。违背这个期望会引起混乱。

> 这种模式有解决方案吗？

我建议将您的属性更改为 getter，以及处理该集合的方法：

```
public DataStates DataState { get; private set; }

public Task UpdateDataStateAsync()
{
   // ... Use await as necessary 
```

这将使您的 API 与内部实际发生的情况相匹配，并且更容易理解。

# ruby - 为什么 Rails 使用 RUBY_EVAL 来定义方法？

> ID：16108938
> 
> 赞同：2
> 
> 时间：2013-04-19T16:08:48.323
> 
> 标签：ruby, ruby-on-rails-3, oop, dynamic

我正在阅读《制作 Rails 应用程序》这本书，并获得了 Rails 源代码。在那里我发现了一些让我思考的 RUBY_EVAL 示例：他们为什么要这样做？

action_controller/metal/renderers.rb 使用它来组成 _write_render_options 的主体并定义 _handle_render_options 方法。

```
def _write_render_options
  renderers = _renderers.map do |name, value|
    <<-RUBY_EVAL
      if options.key?(:#{name})
        _process_options(options)
        return _render_option_#{name}(options.delete(:#{name}), options)
      end
    RUBY_EVAL
  end

  class_eval <<-RUBY_EVAL, __FILE__, __LINE__ + 1
    def _handle_render_options(options)
      #{renderers.join}
    end
  RUBY_EVAL
end 
```

_render_option_#{name} 方法也是动态定义的

```
RENDERERS = {}
def self.add(key, &block)
  define_method("_render_option_#{key}", &block)
  RENDERERS[key] = block
  All._write_render_options
end 
```

在我看来，eval 有其他选择。为什么不将那些与键关联的 &blocks 保留在哈希下？那么当调用 _handle_render_options 时，我们会选择正确的块并评估它吗？为什么要构建一个包含大量 if 的方法体，这是低效的，对吧？

还没拿到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:00:11.213

> 为什么要构建一个包含大量 if 的方法体，这是低效的，对吧？

嗯，这不是低效的。如果您在运行时有一个选项哈希，如您所描述的，您必须在运行时循环哈希检查选项列表中的每个可用渲染器。当前的实现基本上将这个循环展开成一堆子句。因此，它实际上会比在运行时循环更快。

实际上，代码看起来像现在这样的全部原因是性能。这就是为什么我们不保留这些块，因为将它们编译为方法实际上更快。然而，Ruby VM/GC 在每个版本中都会发生变化，它可能不再是真的，或者方法之间的差异可能不再重要，但是当它最初被编写时，它确实如此。

# android - android bash shell脚本的问题

> ID：16108940
> 
> 赞同：1
> 
> 时间：2013-04-19T16:08:50.900
> 
> 标签：android, bash, shell, syntax

每当通过调用 bash ping.sh 在 android 上运行这个有点基本的脚本时，我都会遇到语法错误。目前错误是`: command not found ping.sh: line 9: syntax error near unexpected token etc.` 这是我的脚本：

```
 #!/system/bin/sh

# check if the first argument is -all, in which case just ping all
# possible hosts
if [ $# -ge 1 ]; then
    if [ $1 == "-all" ]
    then
        # loop through all IPs
        for ((host=1; host<100; host++))
        do
            ping -c3 192.168.0.$host > /dev/null && echo "192.168.0.$host UP"
        done
    else
        # loop through the hosts passed in
        while test $# -gt 0 # while number of arguments is greater than 0
        do
            ping -c3 $1 > /dev/null && echo "$1 UP" || echo "$1 DOWN"
            shift # shift to the next argument, decrement $# by 1
        done
    fi
else
# if the number of arguments is 0, return a message stating invalid input
    echo "No arguments specified. Expected -all or host names/ip addresses."
    echo "Usage: ping: -all"
    echo "Or: ping: 192.168.0.1,192.168.0.16"
fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:57:55.280

android shell 不是 GNU bash shell，而是 POSIX shell（2.x 之前的 NetBSD Almquist shell，3.0 之后的 MirBSD Korn Shell）。

`[ $1 == "-all" ]`是巴什主义，`for ((host=1; host<100; host++))`是另一种巴什主义。

为了使其在 POSIX shell 中工作，需要重写一些行：

```
#!/system/bin/sh

# check if the first argument is -all, in which case just ping all
# possible hosts
if [ $# -ge 1 ]; then
    if [ $1 = "-all" ]
    then
        # loop through all IPs
        host=1; while test $host -lt 100;
        do
            ping -c3 192.168.0.$host > /dev/null && echo "192.168.0.$host UP"
            host=$(($host+1))
        done
    else
        # loop through the hosts passed in
        while test $# -gt 0 # while number of arguments is greater than 0
        do
            ping -c3 $1 > /dev/null && echo "$1 UP" || echo "$1 DOWN"
            shift # shift to the next argument, decrement $# by 1
        done
    fi
else
# if the number of arguments is 0, return a message stating invalid input
    echo "No arguments specified. Expected -all or host names/ip addresses."
    echo "Usage: ping: -all"
    echo "Or: ping: 192.168.0.1,192.168.0.16"
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-24T09:17:32.867

在运行 Android 5.1 的 Google Nexus 10 上，这样的结构可以按预期工作：

```
i=0
while ((i < 3)); do
    echo $i;
    ((i++));
done 
```

但是，这样的构造会导致显示错误消息：

```
for ((i = 0; i < 3; i++)); do
    echo $i;
done 
```

# c++ - 链表中的无限循环

> ID：16108947
> 
> 赞同：0
> 
> 时间：2013-04-19T16:09:03.920
> 
> 标签：c++, loops, linked-list, nodes, infinite

我正在实现一个单链表。在执行程序的那一刻，我得到一个无限循环：S 不知道到底是什么问题。顺便说一句，由于项目的说明，我不应该实现链接类。无论如何，这是代码（我认为您可以忽略除 Driver.cpp 中的所有代码之外的所有代码）：

学生.h

```
#ifndef STUDENT_H
#define STUDENT_H

#include <cstdlib>
#include <iostream>

class Student {
public:
    Student();
    Student(std::string, std::string, char, int, int);

    void print(); //displays member functions from Student class

    void setFirstName(std::string);
    void setLastName(std::string);
    void setMiddleName(char);
    void setSocialSecurity(int);
    void setAge(int);

    std::string getFirstName();
    std::string getLastName();
    char getMiddleName();
    int getSocialSecurity();
    int getAge();

private:
    std::string first_name;
    std::string last_name;
    char middle_name;
    int social_security;
    int age;
};
#endif 
```

学生.cpp

```
#include <cstdlib>
#include <string>
#include <iostream>
using namespace std;

#include "Student.h"

Student::Student() {
    setFirstName(" ");
    setLastName(" ");
    setMiddleName(' ');
    setSocialSecurity(0);
    setAge(0);
}

Student::Student(string fN, string lN, char mN, int SSN, int Age) {
    setFirstName(fN);
    setLastName(lN);
    setMiddleName(mN);
    setSocialSecurity(SSN);
    setAge(Age);
}

string Student::getFirstName() {
    return first_name;
}

string Student::getLastName() {
    return last_name;
}

char Student::getMiddleName() {
    return middle_name;
}

int Student::getSocialSecurity() {
    return social_security;
}

int Student::getAge() {
    return age;
}

void Student::setFirstName(string fN) {
    first_name = fN;
}

void Student::setLastName(string lN) {
    last_name = lN;
}

void Student::setMiddleName(char mN) {
    middle_name = mN;
}

void Student::setSocialSecurity(int SSN) {
    social_security = SSN;
}

void Student::setAge(int Age) {
    age = Age;
}

void Student::print() {
    cout << "Full name: " << getFirstName() << ' ' << getMiddleName() << ' ' << getLastName() << endl;
    cout << "Age: " << getAge() << endl;
    cout << "Social Security Number: " << getSocialSecurity() << endl;
} 
```

节点.h

```
#ifndef NODE_H
#define NODE_H

#include <cstdlib>

#include "Student.h"

class Node {
    public: 
    Node();
    Node(Student *s);

    Node *getNext();
    Student *getStudent();

    void setNext(Node *n);
    void setStudent(Student * s);

private:
    Student * sPtr; 
    Node * next;
};
#endif 
```

节点.cpp

```
#include <iostream>
#include <cstdlib>

using namespace std;

#include "Node.h"
#include "Student.h"

Node::Node() {
    sPtr = NULL;
    next = NULL;
}

Node::Node(Student* s) {
    sPtr = s;
    next = NULL;
}

Node * Node::getNext() {
    return next;
}

Student * Node::getStudent() {
    return sPtr;
}

void Node::setNext(Node* n) {
    next = n;
}

void Node::setStudent(Student* s) {
    sPtr = s;
} 
```

驱动程序.cpp

```
#include <cstdlib>
#include <iostream>
#include <string>

using namespace std;

#include "Node.h"
#include "Student.h"

Node * head = NULL;

void mainMenu();
void append(Node *n);
void input();
void display();

void mainMenu()
{
    cout<<endl;
    cout<<"+++++++++++++++++++++++++++++++++++++++++++++++"<<endl;
    cout<<"                    MAIN MENU                  "<<endl;
    cout<<"[A]dd a record                                 "<<endl;
    cout<<"[V]iew all records                             "<<endl;
    cout<<"[Q]uit program                                 "<<endl;
    cout<<"+++++++++++++++++++++++++++++++++++++++++++++++"<<endl;
    cout<<endl;
}

void input() {
    string fN; 
    string lN;
    char mN;
    int socialSec;
    int Age;

    cout << "Input data... " << endl;
    cout << "First name: ";
    cin >> fN;
    cout << "Last name: ";
    cin >> lN;
    cout << "Middle initials: ";
    cin >> mN;
    cout << "Social security number: ";
    cin >> socialSec;
    cout << "Age: ";
    cin >> Age;

    Student * sPtr = new Student(fN, lN, mN, socialSec, Age);
    Node * nPtr = new Node(sPtr);
    append(nPtr);
}

void display() {
    Node * curr = head;

    while(curr) {
        curr->getStudent()->print();
        curr->setNext(curr); 
    }
    return;
}

void append(Node * n) { 
    Node * curr = head;

    if(curr == NULL)
    head = n;
    else {
       while(curr->getNext() != NULL) //find last node on list
             curr->setNext(curr);
       curr->setNext(n);  //insert new node as last node
    }
}

int main() {

    char choice;

    do {

        mainMenu();
        cout << "Enter your command: ";
        if (cin>>choice) {
            switch(choice)
            {
                case 'A':
                    input();
                    break;
                case 'V':
                    display();
                    break;
            } }
         }while(choice != 'Q');
            cout << endl;
            cout << "Terminating program..." << endl;

    return 0;
}

Sample output:
+++++++++++++++++++++++++++++++++++++++++++++++
                    MAIN MENU
[A]dd a record
[V]iew all records
[Q]uit program
+++++++++++++++++++++++++++++++++++++++++++++++

Enter your command: A
Input data...
First name: Tong
Last name: Zhang
Middle initial: T
Social security number: 1234
Age: 20

Full name: Tong T Zhang
Age: 20
Social Security Number: 1234
Full name: Tong T Zhang
Age: 20
Social Security Number: 1234
Full name: Tong T Zhang
Age: 20
Social Security Number: 1234
Full name: Tong T Zhang
Age: 20
Social Security Number: 1234
Full name: Tong T Zhang
Age: 20
Social Security Number: 1234
Full name: Tong T Zhang
Age: 20
Social Security Number: 1234
Full name: Tong T Zhang
Age: 20
.
.
. 
```

很抱歉超长代码和呃..愚蠢的问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:16:03.217

This will loop infinitely. `curr` never changes.

```
void display() {
    Node * curr = head;

    while(curr) {
        curr->getStudent()->print();
        curr->setNext(curr); 
    }
    return;
} 
```

You probably intended this.

```
void display() {
    Node * curr = head;

    while(curr) {
        curr->getStudent()->print();
        curr = curr->next; 
    }
    return;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:15:04.150

这会导致你的无限循环

```
void append(Node * n) {
    ...
    while(curr->getNext() != NULL) //find last node on list
         curr->setNext(curr); 
```

它应该是

```
void append(Node * n) {
    ...
   while(curr->getNext() != NULL) //find last node on list
         curr = curr->getNext(); 
```

我猜您只是在`setNext`分配给 curr 和分配给 curr 之间感到困惑。

# cordova - PhoneGap 2.6.0 和 Kendo UI Mobile 外部链接

> ID：16108949
> 
> 赞同：2
> 
> 时间：2013-04-19T16:09:07.217
> 
> 标签：cordova, kendo-mobile

使用 Kendo UI Mobile v2013.1.319 和 PhoneGap 2.6.0 (iOs)，我不再能够在 Safari 浏览器中打开链接。

这在以前的版本中运行良好：

```
<a href="http://apache.org" data-rel="external" target="_blank"> 
```

但现在它仍然在与应用程序本身相同的 web 视图中打开。

任何提示如何强制链接从外部打开？最好不使用 javascript，因为链接的 HTML 是通过外部数据源动态加载的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:25:24.533

也许你可以使用 Cordova [InAppBrowser](http://cordova.apache.org/docs/en/2.6.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

```
var ref = window.open('http://apache.org', '_blank', 'location=yes'); 
```

# javascript - 在 phonegap 中使用网络工作者

> ID：16108950
> 
> 赞同：7
> 
> 时间：2013-04-19T16:09:07.410
> 
> 标签：javascript, cordova, web-worker

我正在尝试在 phonegap 中创建一个 HTML5 Web Worker，但 phonegap 不允许我在运行时加载本地 javascript 文件。我收到以下错误：

```
var web_worker=new Worker('socket-worker.js')
undefined
file://socket-worker.jsFailed to load resource: The requested URL was not found on this server. 
```

有没有人对我如何解决这个问题并让工人运行有很好的建议？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-20T08:11:20.067

还没有尝试过，但我相信我们可以使用 blob url 运行它。在这里查看（[http://www.html5rocks.com/en/tutorials/workers/basics/#toc-inlineworkers-bloburis](http://www.html5rocks.com/en/tutorials/workers/basics/#toc-inlineworkers-bloburis)）

**更新：**我已经尝试过了，它奏效了。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-26T06:41:54.807

据我所知，Web Workers 永远不会在本地目录上工作

> 文件：//

它在服务器端工作。例如，不要将文件放在“file://”，所以路径应该是

```
***> http://localhost/ or***
***> http://server_ip_address*** 
```

因此，Phonegap 由位于设备目录中的 HTML 和 Javascript 组成，因此 Phonegap 不支持网络工作者。

# opengl - 放大而不缩放图形

> ID：16108952
> 
> 赞同：0
> 
> 时间：2013-04-19T16:09:14.450
> 
> 标签：opengl, scale, transformation

我正在学习 2D 的 Opengl（特别是使用 java slick2D 库，但这可能不是这个问题的一个因素）。我发现我可以更改 push 一个新的转换矩阵，例如将世界坐标转换为屏幕（视图）坐标。

我想用它来缩放我的视图，增加对象之间的距离，但是一旦完成，我想在屏幕坐标中绘制图像和形状，比如 HUD。基本上，我希望坐标改变，但图形保持不变，所以我可以在每个比例上渲染自定义图像。

这可以通过一些巧妙的转换或一些 OpenGL 选项来完成，而不是手动计算所有坐标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T16:15:26.853

1.  清除颜色和深度缓冲区

2.  为缩放的 2D/3D 渲染设置投影/模型视图矩阵

3.  启用深度测试

4.  渲染缩放的 2D/3D 场景

5.  重置 2D 叠加的投影/模型视图

6.  禁用深度测试

7.  绘制 2D 叠加

8.  重复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T23:44:34.563

好的，想通了，你必须使用两个单独的投影：

1.- 缩放世界坐标，以便在正确的场景位置上绘制对象：

```
 g.pushTransform();

    // Always zoom in the center of the screen.
    g.translate(resolution.getX(), resolution.getY());
    g.scale(scale, scale);

    // Move the view
    g.translate(-view.getX(), -view.getY()); 
```

2.- 推一个新矩阵来绘制对象，反转比例变换，使对象的图形不随比例变化：

```
 g.pushTransform();

    // Center on the current object.
    g.translate(pos.x, pos.y);

    // Undo scaling of graphics!
    g.scale(1.0f/scale, 1.0f/scale); 
```

# c++ - “打包”结构对性能有何影响

> ID：16108956
> 
> 赞同：5
> 
> 时间：2013-04-19T16:09:22.407
> 
> 标签：c++, performance

开始微优化不是我的目标，所以如果这就是结果，我很乐意放弃这个问题。但我即将开始做出一些设计决策，并希望了解更多信息。

我正在阅读和处理一种文件格式，其中包含许多以明确定义的格式记录的数据结构。我已经在代码中将它们表示为结构。

现在，如果我将结构与 1 字节对齐打包`#pragma pack(1)`，我可以将 IO 流中的结构直接读取到结构指针上。这很方便。如果我不打包结构，我可以`fread`将字段一个接一个或一个`fread`块一个接一个地打包，`reinterpret_cast`结构字段一个接一个，这可能会很快变老。

作为参考，这些结构将被（可能）数千人读取，并且可能会对它们进行一些数字运算。它们主要由无符号 16 位整数（约 60%）、无符号 32 位整数（约 30%）和一些 64 位整数组成。

所以手头的问题是，我...

*   进行数以万计的微小呼叫`fread`？
*   读取块并复制相关字节？
*   打包结构并直接阅读它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T16:21:53.147

最终，解决方案 A 和解决方案 B 之间的性能差异只能通过基准测试来确定。在互联网上询问会给你不同的结果，这些结果可能反映也可能不反映你的情况。

当您“未对齐”数据时会发生什么情况是处理器需要对一条数据进行多次读取[并且同样适用于写入]。确切需要多少额外时间取决于处理器 - 有些处理器不会自动执行，因此运行时系统将捕获“错误读取”并在某些仿真层执行读取 [或者，在某些处理器中，简单地杀死“未对齐内存访问”的过程]。显然，采取陷阱并执行几个读取操作然后返回到调用代码对性能的影响非常显着——它很容易比对齐的读取操作花费数百个周期。

在 x86 的情况下，它“就像你期望的那样工作”，但通常会额外增加 1 个时钟周期[假设数据已经在 L1 缓存中]。在现代处理器中，一个时钟周期并不是很多，但如果循环的迭代次数为 10000000000000 次并且读取未对齐的数据 n 次，那么您现在已经在执行时间中添加了 n * 10000000000000 个时钟周期，这可能很重要。

其他替代方案也会对性能产生影响。做很多小读可能比做一个大读要慢很多。从性能的角度来看，转换函数可能更好。

同样，请不要将其视为“给定的”，您确实需要比较不同的解决方案（或选择一个，如果性能不差，并且代码看起来不可怕，那就这样吧） . 我相当相信您可以为您建议的“最佳”三种解决方案中的每一种找到案例。

还要记住 #`pragma pack`是特定于编译器的，例如，要实现允许您在“Microsoft”和“gcc”解决方案之间进行选择的宏并不容易。编辑：似乎更新的 gcc 版本确实支持此选项 - 但并非所有编译器都支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:21:45.400

根据您对另一个答案的评论，您的代码旨在与平台无关，并且明确指定了文件格式的字节序。在这种情况下，直接读入打包`struct`文件会失去很多清晰度，因为它需要一个读取后的字节序清理步骤，否则会导致在字节序与文件格式不同的架构上出现不正确的数据。

假设您总是知道字节数（可能来自文件中的结构类型指示符），我建议使用工厂模式，其中创建的对象的构造函数知道如何按属性从内存缓冲区属性中提取字节（如果文件是足够小，您可以将整个内容读入缓冲区，然后执行循环/工厂创建/反序列化到对象通过构造函数。这样您可以控制字节序并允许编译器所需的结构对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T16:13:12.937

如果您只使用打包并直接读入结构，代码将是最清晰的。这也可能是最快*的阅读*速度。不幸的是，它也可能成为错误的来源，特别是如果将来结构的布局发生变化。

元素的对齐可能是一个问题，也可能不是，这取决于许多因素。如果元素按大小排序，最大的在前，对齐不太可能成为问题。如果源通过直接写入整个结构来生成字节流，那么它也可能已针对该系统正确对齐，并且可能在您的端完美地工作。x86 架构可以很好地处理错位，最坏的情况只有轻微的减速；即使是通过一次加载整个高速缓存行的高速缓存结构来最小化，保证大部分字节已经在高速缓存中。其他架构可能根本无法处理错位，但如果发生这种情况，您很快就会知道。

如果您需要与源不同的字节顺序，您可以在结构的每个元素上调用一个函数来单独修复它们。到那时，直接读取的简单性和清晰度就会降低，而使用另一种方法可能会更好。

# javascript - jQuery - Uncaught TypeError: Object [object Object] has no method 'typeahead'

> ID：16108958
> 
> 赞同：3
> 
> 时间：2013-04-19T16:09:26.553
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, typeahead.js

我正在尝试实现`typeahead`自动完成搜索功能，但没有运气。我刚接触 jQuery 大约两个星期，所以我不确定该往哪个方向发展。这是页面加载时我在 Chrome 的调试器中收到的错误

```
Uncaught TypeError: Object [object Object] has no method 'typeahead' ... BankListMaster:17 
```

这指的是声明后此代码块内的第一行

```
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://twitter.github.io/typeahead.js/releases/latest/typeahead.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#typeahead').typeahead({
            source: function (term, process) {
                var url = '@Url.Content("~/Home/GetNames")';

                return $.getJSON(url, { term: term }, function (data) {
                    return process(data);
                });
            }
        });
    });
</script> 
```

该`typeahead`功能正在搜索栏中使用以下代码。仅供参考 -`<ul class="nav">`被截断的标签只包含大量`<li>`元素。只是为了便于阅读而缩短了它。

```
 <div class="navbar navbar-fixed-top">  
          <div class="navbar-inner">  
            <div class="container">  
            <ul class="nav"> ... </ul>  
        <ul class="nav"> 
        </ul>  
            <form class="navbar-search pull-left">  
              <input type="text" value="" id="typeahead" data-provide="typeahead" class="search-query" /> @*placeholder=" Agent search" />*@  
            </form>  
        <ul class="nav pull-right">  
          <li>@Html.MenuLink("Help", "About", "Home")</li>  
        </ul>  
            </div>  
          </div>  
        </div>
          <li>@Html.MenuLink("Help", "About", "Home")</li>  
        </ul>  
            </div>  
          </div>  
        </div>  
        <script src="@Url.Content("~/Scripts/jquery.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/bootstrap-dropdown.js")" type="text/javascript"></script>
        <script type="text/javascript">
            (function () {
                var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                po.src = 'https://apis.google.com/js/plusone.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
            })();  
        </script> 
```

编辑

我还尝试了以下两个声明，加上三者的任意数量的组合（即`http`链接）并收到相同的错误

```
<script src="@Url.Content("~/Scripts/typeahead.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/typeahead.min.js")" type="text/javascript"></script> 
```

第二次编辑

将 jQuery 版本和`typeahead`文件更改为以下内容，但仍然出现相同的错误...

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="@Url.Content("~/Scripts/bootstrap-typeahead.js")"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:06:00.470

我不知道这个问题的原因仍然是什么，但这些声明解决了它。如果有人看到这个问题，我会暂时不回答这个问题。

```
<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript" src="http://blattchat.com/demos/typeahead/js/bootstrap-typeahead.js"></script> 
```

# coldfusion - 在 ColdFusion 9 标准版中获取正在运行的请求列表

> ID：16108962
> 
> 赞同：2
> 
> 时间：2013-04-19T16:09:32.147
> 
> 标签：coldfusion, coldfusion-9

有谁知道 Adob​​e ColdFusion 9 标准版中是否有办法获取正在运行的请求列表？也许通过从一个 CF Java 对象调用一个方法，比如coldfusion.server.ServiceFactory？？？

我知道在企业中您可以为此使用服务器监视器，但由于我们使用的是标准版，因此我们没有可用的服务器监视器。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T14:27:54.843

感谢@barnyr 的指导，我设法获得了一些代码，这些代码将输出当前正在运行的脚本名称列表，这正是我所需要的。这里适合任何有兴趣的人。

```
<!--- Create the thread object --->
<cfobject type="JAVA" action="Create" name="thread" class="java.lang.Thread">

<!--- Get all stack traces from the thread object --->
<cfset stackTrace = thread.getAllStackTraces()>

<!--- Convert the entrySet into an array --->
<cfset stackArray = stackTrace.entrySet().toArray()>

<cfoutput>
    <!--- Loop over the entrySet array --->
    <cfloop from="1" to="#ArrayLen(stackArray)#" index="sIndex">
        <!--- Get the current thread values --->
        <cfset thisThread = stackArray[sIndex].getValue()>
        <!--- Loop over current thread values --->
        <cfloop from="1" to="#ArrayLen(thisThread)#" index="tIndex">
            <!--- Get the filename for this thread --->
            <cfset thisThreadFile = thisThread[tIndex].getFileName()>
            <!--- If the file name contains .cfm output it --->
            <cfif isDefined("thisThreadFile") AND thisThreadFile CONTAINS ".cfm">
                #thisThreadFile#<br>
            </cfif>
        </cfloop>
    </cfloop>
</cfoutput> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:38:19.067

如果您只看到脚本名称并且不介意做一些手动工作，您可以免费获得它。您需要做的是启动堆栈跟踪。有几种方法可以做到这一点，但对我来说，它们分解如下：

*   以自己的身份运行 ColdFusion（通过从命令行启动 CF 或将 Windows 服务更改为以自己的身份运行），然后使用[jStack](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstack.html)获取堆栈转储

*   让 CF 以现有用户身份运行，但[将其配置为允许远程 JMX 连接](https://visualvm.java.net/jmx_connections.html)，然后使用 VisualVM 进行连接并[使用它来收集堆栈转储](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/threads.html)

*   使用 Thread 以编程方式获取线程列表。获取所有堆栈跟踪（）。然后，您可以对数据做任何您想做的事情。所有 ColdFusion 请求线程都启动 web-（对于内置 web 服务器）或 jrpp-（对于那些通过 IIS 或 apache 处理的线程），因此您可以过滤掉类似的其他线程

如果您使用前两个选项来获取堆栈转储，那么我强烈建议您使用[Samurai](http://yusuke.homeip.net/samurai/en/index.html)来检查它们。您可以间隔 10 秒进行多次转储，并快速确定哪些请求是长时间运行的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T14:05:16.720

试试 cftracker，它可能会满足你的需求 [https://github.com/misterdai/cfTrackercfTracker](https://github.com/misterdai/cfTrackercfTracker)

# ruby-on-rails - 我怎样才能添加额外的条件来计算？

> ID：16108963
> 
> 赞同：0
> 
> 时间：2013-04-19T16:09:32.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这计算了代码通知为 的用户数`true`，他的个人资料`notification`为`true`

```
@count = User.joins(:profile, :codes => :community).where("profiles.notification=? AND codes.notification=? AND communities.id=?", true, true, @community.id).count 
```

我正在使用调用`acts_as_paranoid`逻辑删除的 gem。有了这个，上面的行包括已删除的具有日期时间的记录`user.deleted_at`。

我想排除那些已删除的记录。
我怎样才能在上面添加这个额外的条件？

像这样的东西？

```
@count = User.joins(:profile, :codes => :community).where("user.deleted_at=? AND profiles.notification=? AND codes.notification=? AND communities.id=?", nil, true, true, @community.id).count 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:24:24.297

您也可以尝试在模型上使用范围：

```
class User < ActiveRecord::Base
    scope :not_deleted, where(:deleted_at => nil)
end 
```

然后做：（注意`User.not_deleted.joins...`）

```
@count = User.not_deleted.joins(:profile, :codes => :community).where("profiles.notification=? AND codes.notification=? AND communities.id=?", true, true, @community.id).count 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:17:04.923

That looks right to me, but `user.deleted_at` should be `users.deleted_at`.

```
- @count = User.joins(:profile, :codes => :community).where("user.deleted_at=? AND profiles.notification=? AND codes.notification=? AND communities.id=?", nil, true, true, @community.id).count
+ @count = User.joins(:profile, :codes => :community).where("users.deleted_at=? AND profiles.notification=? AND codes.notification=? AND communities.id=?", nil, true, true, @community.id).count 
```

The SQL generated by Rails uses the plural table name (`users`) instead of the singular model name (`user`).

# c# - 如何在没有时间部分的情况下验证特定文化的 DateFormat

> ID：16108964
> 
> 赞同：0
> 
> 时间：2013-04-19T16:09:32.877
> 
> 标签：c#, .net, datetime, cultureinfo, tryparse

我需要使用 TryParse() 或 TryParseExact() 方法验证**所有文化日期的用户输入。**

`DateTime.TryParse(args.Value, new CultureInfo("nl-NL", false), DateTimeStyles.None, out date)`

此代码验证：

*   01-10-2011
*   2011 年 1 月 10 日
*   2011 年 1 月 10 日 20:11
*   2011 年 1 月 10 日 20:11

但我只需要它来验证：

*   01-10-2011
*   2011 年 1 月 10 日

连同指定文化中所有可能的日期格式：

*   2011 年 1 月 10 日
*   1.  2011 年 10 月

并且这些验证应该失败：

*   2011 年 1 月 10 日 20:11
*   2011 年 1 月 10 日 20:11

任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:17:40.740

```
DateTime.ParseExact(dateString, "d/MM/yyyy", DateTimeFormatInfo.InvariantInfo); 
```

Where dateString is your date.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:55:08.917

这可能会有所帮助，您可以将日期时间（带或不带时间）作为字符串提供，并用 try catch 将其包装以进行验证。

来自 MSDN - [Convert.ToDateTime 方法（字符串，IFormatProvider）](http://msdn.microsoft.com/en-us/library/9xk1h71t.aspx)

```
using System;
using System.Globalization;

public class Example
{
   public static void Main()
   {
      Console.WriteLine("{0,-18}{1,-12}{2}\n", "Date String", "Culture", "Result");

      string[] cultureNames = { "en-US", "ru-RU","ja-JP" };
      string[] dateStrings = { "01/02/09", "2009/02/03",  "01/2009/03", 
                               "01/02/2009", "21/02/09", "01/22/09",  
                               "01/02/23" };
      // Iterate each culture name in the array. 
      foreach (string cultureName in cultureNames)
      {
         CultureInfo culture = new CultureInfo(cultureName);

         // Parse each date using the designated culture. 
         foreach (string dateStr in dateStrings)
         {
            DateTime dateTimeValue;
            try {
               dateTimeValue = Convert.ToDateTime(dateStr, culture);
                // Display the date and time in a fixed format.
                Console.WriteLine("{0,-18}{1,-12}{2:yyyy-MMM-dd}",
                                  dateStr, cultureName, dateTimeValue);
            }
            catch (FormatException e) { 
                Console.WriteLine("{0,-18}{1,-12}{2}", 
                                  dateStr, cultureName, e.GetType().Name);
            }
         }
         Console.WriteLine();
      }
   }
} 
```

# jsf - 尽管有 escape="false"，但 h:outputText 没有从 XML 响应中呈现 HTML

> ID：16108968
> 
> 赞同：1
> 
> 时间：2013-04-19T16:09:50.783
> 
> 标签：jsf, html-escape

我有以下代码：

```
<h:outputText value="#{bean.shortDescription}" escape="false" /> 
```

结果是：

> <p><b>位置。</b> <br /> 一

字符串 from`#{bean.shortDescription}`取自已转义的 XML 响应：

```
&lt;p&gt;&lt;b&gt;Location. &lt;/b&gt; &lt;br /&gt; a 
```

如果我制作与上面相同的输出文本，但不是从 XML 中获取响应，我只是放置来自响应的转义字符串，例如：

```
<h:outputText value="&lt;p&gt;&lt;b&gt;Location. &lt;/b&gt; &lt;br /&gt; a" escape="false" /> 
```

那么结果是：

> **地点。**
> 一个

如何正确呈现从 XML 获得的 HTML 标签？我不想逃避他们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:28:51.920

这是因为您的文本**已经**转义。`escape="false"`不会*转义*文本。它只是按原样打印文本而不是转义它。但是，由于您的文本从一开始就已经转义，因此它以转义形式出现。删除`escape="false"`，您会看到它将被双重转义。即每`&`变成`&amp;`.

你需要事先取消它。[Apache Commons Lang](http://commons.apache.org/lang) 可能会`StringEscapeUtils`派上用场。

```
String unescapedShortDescription = StringEscapeUtils.unescapeXml(shortDescription); 
```

然后，您可以使用`<h:outputText escape="false">`它按原样打印。

# c# - 发送邮件 SMTP、电子邮件提供商端口和主机名

> ID：16108971
> 
> 赞同：0
> 
> 时间：2013-04-19T16:10:15.577
> 
> 标签：c#, smtp

```
 String[] Sendto = File.ReadAllLines("SendTo.txt");
        SmtpClient X = new SmtpClient("smtp.gmail.com", 587);
        //X.UseDefaultCredentials = false;

        NetworkCredential Auth = new NetworkCredential("Someone@gmail.com", "Plainttext password");
        X.Credentials = Auth;
        X.EnableSsl = true;
        foreach (string recip in Sendto)
        {
            try
            {
                MailAddress from = new MailAddress("Someone@gmail.com");

                MailAddress to = new MailAddress(recip);
                MailMessage myMail = new MailMessage(from, to);
                myMail.Priority = MailPriority.High;
                myMail.Subject = "Your Test is Done";
                myMail.SubjectEncoding =
                myMail.BodyEncoding = System.Text.Encoding.UTF8;
                myMail.IsBodyHtml = true;
               X.Send(myMail);
            }
            catch (Exception ex)
            { Console.WriteLine(ex.Message); } 
```

为什么这不起作用？我嗅探了流量，我确实收到了来自 smpt.google.com 的 dns 回复，但无法连接到远程服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:14:19.397

修改后的答案端口 993 不起作用...

对我有用的是：-

请注意，如果您有两步验证，您可能需要一个应用专用密码。

```
var mail = new MailMessage();

mail.From = new MailAddress("from address");
mail.To.Add("to address");
mail.Subject = "Test Mail";
mail.Body = "This is for testing SMTP mail from GMAIL";

var smtpServer = new SmtpClient("smtp.gmail.com");
smtpServer.Port = 587;
smtpServer.Credentials = new System.Net.NetworkCredential("user", "password");
smtpServer.EnableSsl = true;
smtpServer.Send(mail); 
```

# iphone - 使用 Corona，它不止一次地运行函数

> ID：16108973
> 
> 赞同：1
> 
> 时间：2013-04-19T16:10:17.877
> 
> 标签：iphone, ios, function, touch, coronasdk

当我单击它时，我正在尝试使用 spritesheet 来更改角色的图像，但是使用触摸会不止一次地运行该功能。这可能是一个愚蠢的问题，但我昨天开始了......这是代码，谢谢！:)

```
local sprite = require "sprite"
local changed = 0

local baseballfield = display.newImageRect("baseballfield.png",display.contentWidth,display.contentHeight)
baseballfield.x = display.contentWidth/2
baseballfield.y = display.contentHeight/2

local spritesheet = sprite.newSpriteSheet("spritesheet.png",119,152)
local players = sprite.newSpriteSet(spritesheet, 1, 2)
local firstbase = sprite.newSprite(players)

function changeFrame(event)
    if firstbase.currentFrame == 1 then
firstbase.currentFrame = 2
changed = 1
end
if firstbase.currentFrame == 2 and changed == 0 then
firstbase.currentFrame = 1
changed = 1
end
changed = 0
end

firstbase:addEventListener("touch", changeFrame)' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:23:05.617

尝试使用`tap`, 而不是 touch：

```
 firstbase:addEventListener("tap", changeFrame) 
```

因为`touch`有 3 个 events.phases，并且您的函数将在这 3 个事件上被调用。他们是：

```
 1) began  -- your function will get called when the touch begins
 2) moved  -- your function will get called when you touch and move
 3) ended  -- your function will get called when the touch ends 
```

更多信息：[触摸事件阶段](http://www.coronalabs.com/blog/2012/04/11/corona-touch-events-tutorial/) 和[检测对象和屏幕点击](http://www.coronalabs.com/blog/2012/07/24/detecting-object-and-screen-taps/)

继续编码... :)

# vb.net - 将二进制文件字节写入剪贴板

> ID：16108975
> 
> 赞同：-1
> 
> 时间：2013-04-19T16:10:30.317
> 
> 标签：vb.net

我正在尝试读取二进制文件，将其转换为字符串，然后将其写入磁盘。

基本上这是我的代码

```
Dim bytes As Byte() = System.IO.File.ReadAllBytes("C:\1.exe")
Clipboard.SetText(bytes.ToString)
System.IO.File.WriteAllBytes("C:\2.exe", bytes) 
```

它适用于读/写文件，但无法将字节复制到剪贴板，我得到的是`System.Byte[]`剪贴板上的“”..那么我怎样才能读取一些二进制文件字节并将它们存储/复制到剪贴板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:23:53.223

当您使用 Clipboard.SetText() 时，您应该将**文本**放在剪贴板上。EXE 文件不包含文本，它包含一个程序。尝试用记事本打开你的 1.exe 文件，看看它是什么样子的。不是文字。

您*可以*将二进制文件放在剪贴板上。这可能看起来像这样：

```
 Dim files = New String() {"c:\windows\notepad.exe"}
    Clipboard.SetData(DataFormats.FileDrop, files) 
```

现在切换到 Windows 资源管理器并按 Ctrl+V。你有一个 Notepad.exe 的副本

如果您只想要文件的副本，请使用 File.Copy()：

```
 System.IO.File.Copy("c:\1.exe", "c:\2.exe") 
```

它不仅复制文件中的字节，还确保文件的属性设置正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:16:43.217

```
bytes.ToString 
```

takes the string representation of the array, rather than its contents. Reference types return their typename from ToString(), unless they override it to do something different.

What you're really looking to do is *convert* the byte array to a string. For this, use `Encoding.GetString(bytes)` - where you'll need to use a static member of `Encoding` like `Encoding.UTF8` as the appropriate instance - depending on what representation of a string your bytes encode.

**edit #1**: I didn't actually notice what you were reading. What do you expect the text representation of an executable file to be? What meaning is there to placing it on the clipboard?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T16:15:12.223

您需要将字节转换为字符串：

```
Dim text as String = System.Text.Encoding.UTF8.GetString(bytes)
Clipboard.SetText(bytes.ToString) 
```

但是，正如 Neolisk 所提到的，这并没有真正的帮助，因为您实际上是在阅读二进制文件，而不是文本文件

# jquery - 角度将数据传递到单独的页面

> ID：16108978
> 
> 赞同：0
> 
> 时间：2013-04-19T16:10:34.853
> 
> 标签：jquery, json, binding, model, angularjs

我有一个使用 ng-repeat 从服务中显示的项目列表。所有这些项目都有一个“完整项目详细信息”链接 (item.html)。将显示更多信息的通用页面。

将单击的项目的数据传递给 item.html 以便显示的信息来自单击的项目的最佳方法是什么？

**HTML 看起来像：**

```
<div class="container" ng-app="myApp">
    <div ng-controller="ItemController">
        <div ng-repeat="item in data.details">
            <div class="wrapper">
                <h3>{{item.title}}</h3>
                <p>{{item.description}}</p>
                <a href="#myModal" class="btn" openmodal>Open modal</a>
                <a href="item.html">View full item details</a>
            </div>
        </div>
    </div>
</div> 
```

**角**

```
var myApp = angular.module('myApp', []);

myApp.factory('Data', function(){
    var Data = {};  
    Data.details = [
        {
            "id": 1,
            "title": "Item 1",
            "description": "Post 1 description - Nullam ac tellus sed mi laoreet placerat.",
            "more": "more info"
        },
        {   
            "id": 2,
            "title": "Item 2",
            "description": "Post 2 description - Cociis natoque penatibus et magnis dis parturient montes.",
            "more": "more info"

        },
        {
            "id": 3,
            "title": "Item 3",
            "description": "Post 3 description - Nullam ac tellus sed mi laoreet placerat.",
            "more": "more info"
        }
    ]
    return Data;
});

// Controller
function ItemController($scope, Data){
    $scope.data = Data;
} 
```

提前致谢

**编辑**

我为每条路线创建了路线和 HTML 页面，然后使用 ng-view 显示适当的内容。

请参阅下面的代码：

```
// Routes
myApp.config(function($routeProvider){
    $routeProvider
        .when('/', {
                templateUrl:"home.html"
        })
        .when('/task', {
                templateUrl:"item.html"
        })
})

// Controller
function ItemController($scope, $location, Item){
    $scope.data = Item;

    $scope.viewDetail = function(item) {
        $scope.currItem= item;
        $location.path('/item');
    }
} 
```

现在 index.html 看起来像这样：

```
<div class="container">
    <ng-view></ng-view>
</div> 
```

然后我为我的路线创建了单独的文件：

主页.html

```
<div class="container" ng-app="myApp">
    <div ng-controller="ItemController">
        <div ng-repeat="item in item.details">
            <h3>{{item.title}}</h3>
            <a ng-click="viewDetail(item)">View full item details</a>
        </div>
    </div>
</div> 
```

项目.html

```
<div class="container" ng-app="myApp">
    <div ng-controller="ItemController">
        <h3>{{currItem.title}}</h3>
        <p>{{currItem.description}}</p>
    </div>
</div> 
```

我在 home.html 中的链接（查看完整的项目详细信息）使用 ng-click 传递单击的“项目”对象。
现在我想在 item.html 中使用这个 item 对象 console.log(item) 给了我正确的对象。

我尝试在 item.html 中使用“currItem”来显示正确的数据。它不起作用。

不确定我在这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:22:10.320

这实际上取决于您如何构建您的网站以及您希望应用程序如何流动。你有很多选择，第一个是最 Angular 的方法。

1.  利用[$route 服务](http://docs.angularjs.org/api/ng.%24route)和[ngView](http://docs.angularjs.org/api/ng.directive%3angView)。

2.  将所有内容保持在一页上。您需要替换`<a href="item.html">`为`<span ng-click="showDetails(item)">`显示/隐藏一个单独的 div 的内容，该 div 包含可以绑定到的 item.html 的内容`$scope.currentItem`。 `$scope.showDetails`看起来像这样：`$scope.showDetails = function (item) { $scope.currentItem = item }`，并且 item.html 将位于类似：`<div ng-show="currentItem != undefined">...</div>`或类似的容器中。

3.  通过更改`<a href="item.html">`为 向新页面发出请求`<a href="item.html?itemId={{item.id}}">`。这将需要向服务器发出一些额外的请求（不仅要加载 item.html，而且还要读取`location.search`数据，然后将数据（您在上一个请求中已有的数据）加载回新页面。

**编辑**

如果您要使用`ngView`，则必须修改`ItemController`以获取`$route`参数，然后您将使用该参数来检查项目 ID，如下所示：

```
app.controller('ItemController', function ($scope, $route) {
    // TODO load the item from some service or using ajax, here's the id:
    console.log($route.current.params.id);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:17:43.487

Depending on what index.html is doing you could pass it as a parameter. e.g.

```
index.html?title={{item.title}}&id={{item.id}} 
```

and then use javascript in index.html to get the query string and parse it for display.

Not sure if you have a requirement to implemented this as a different page or could you use different view instead?

If it could be implemented as a separate view there are multiple options there:

*   you could use shared service to pass the data to another controller and tie it to the new controller's model. See following link for more details about services. [http://docs.angularjs.org/guide/dev_guide.services.creating_services](http://docs.angularjs.org/guide/dev_guide.services.creating_services)

*   you could use $scope variable to create a new model for selected item and use an existing controller.

# php - PHP fwrite 写入 0 个字节

> ID：16108981
> 
> 赞同：0
> 
> 时间：2013-04-19T16:10:45.647
> 
> 标签：php, fwrite

我一遍又一遍地测试了这个，由于某种原因，代码在我的文件上写了 0 但是当我回显它时，它会写出预期的文本。

这是我的代码：

```
<?
$author = $_POST["author"];
$email = $_POST["email"];
$comment = $_POST["comment"];
if (isset($author) && isset($email) && isset($comment)) {
    $fileWrite = fopen("Archivo/comentarios.txt","a");
    $bytes = fwrite($fileWrite,$author + "*" + $email + "*" + $comment + "\n");
    fclose($fileWrite);
}

header('Location: http://www.empowernetworkmexico.com.mx/contacto.php');
?>

<html><head></head><body>
<?
    echo $author;
    echo $email;
    echo $comment;
?>
</body></html> 
```

我使用“TEST”作为提交表单上每个参数的文本值进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:12:08.180

plus`+`不适合 concat 使用`.`。有关连接运算符 ('.') 的更多信息，请参阅此页面[http://www.php.net/manual/en/language.operators.string.php](http://www.php.net/manual/en/language.operators.string.php)

```
 if (isset($author) && isset($email) && isset($comment)) {
   $fileWrite = fopen("Archivo/comentarios.txt","a+");
   $bytes = fwrite($fileWrite,$author . "*" . $email . "*" . $comment . "\n");
   fclose($fileWrite);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:15:08.117

php 中的字符串连接运算符不是“+”而是“.”。看起来你可能有 JS 或 Python 的经验..

```
fwrite($fileWrite,$author . "*" . $email . "*" . $comment . "\n"); 
```

# telerik - WaitUntilReady() 未按预期工作

> ID：16108982
> 
> 赞同：0
> 
> 时间：2013-04-19T16:10:46.160
> 
> 标签：telerik, automated-tests

我正在使用 Telerik.Testing.Framework.2012.2.1527 我正在使用下面的代码。我一直在为“findElem”获取空值。但是当我处于调试模式时它很好。WaitUntilReady(); 对我来说没有按预期工作。在我的场景中，我不应该使用 waitforelement 并指定超时。

```
 public bool IsPresentbyInputId(string findCondition)
    {
            Manager.ActiveBrowser.WaitUntilReady();
            Element findElem = Manager.ActiveBrowser.Find.ByExpression(new HtmlFindExpression("tagname=input", "id=" + findCondition));
            Manager.ActiveBrowser.WaitUntilReady();
            return findElem != null && !findElem.Attributes.Any(s => s.Value.Contains("display:none"));         
    } 
```

你能让我知道我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:52:30.957

对于延迟回复您，我深表歉意。

要记住的一件事是 WaitUntilReady 正在监视浏览器的“就绪”标志。一旦浏览器完成主 HTML 页面（例如 MyPage.html）以及任何引用的资源（图像、css 文件、js 文件等），就会设置此标志。它不考虑在页面加载后由于 JavaScript 获得控制而启动的任何 Ajax 回发。

Ajax 回发（通常在从 Web 服务器获取数据时通过某种类型的旋转圆圈直观地显示）可能会导致 DOM 在 WaitUntilReady 将控制权返回给您的测试代码后很久才被修改。如果设置 Execution Delay > 500 使您的测试工作，我敢打赌您的应用程序正在执行 Ajax 回发导致 DOM 更改。

有两种可能的方法来克服这个特殊问题： 1) 在 WaitUntilReady() 调用之后添加一个 ActiveBrowser.WaitForAjax() 调用。这将导致您的测试等到与您的 Web 服务器的所有 Ajax 连接都关闭。2) 在WaitUntilReady 之后添加一个WaitForElement。例如：ActiveBrowser.WaitForElement(new HtmlFindExpression("id=maindiv"), 30000, false); 这将导致您的代码在继续之前等待与指定属性匹配的元素存在。

我希望这有帮助。

Cody 测试工作室支持官

# segmentation-fault - MPI_Comm_spawn_multiple 分段错误

> ID：16108994
> 
> 赞同：1
> 
> 时间：2013-04-19T16:11:18.960
> 
> 标签：segmentation-fault, mpi

我尝试运行调用 MPI_Comm_spawn_multiple 来生成多个进程，但是，有一些有趣的东西。当我生成 40 个子进程时，一切顺利。当我产生 80 个子进程时，它告诉我分段错误。问题发生的条件是您在 MPI_Info 中设置了“wdir”并且生成的子进程的数量足够大（在我的测试中，它应该大于 53）。我想知道是否有人遭受或知道如何解决这个问题。我的 MPI 版本是 mvapich2-1.8.1。

下面是我的代码：

```
#include "mpi.h"
#include <stdio.h>
#include <stdlib.h>

#define P_SIZE 80
int main( int argc, char *argv[] )
{
    int np[P_SIZE],i;
    int errcodes[P_SIZE];
    MPI_Comm parentcomm, intercomm;
    char *cmds[P_SIZE];
    MPI_Info infos[P_SIZE];

    for(i=0;i<P_SIZE;i++){
    np[i]=1;
        MPI_Info_create(&infos[i]);
    cmds[i]="./spawn_example";
    }
for(i=0;i<10;i++){ MPI_Info_set(infos[i], "hosts", "node1");MPI_Info_set(infos[i], "wdir", "/home");}
for(i=10;i<20;i++){ MPI_Info_set(infos[i], "hosts", "node2");MPI_Info_set(infos[i], "wdir", "/home");}
for(i=20;i<30;i++){ MPI_Info_set(infos[i], "hosts", "node3");MPI_Info_set(infos[i], "wdir", "/home");}
for(i=30;i<40;i++){ MPI_Info_set(infos[i], "hosts", "node4");MPI_Info_set(infos[i], "wdir", "/home");}
for(i=40;i<50;i++){ MPI_Info_set(infos[i], "hosts", "node5");MPI_Info_set(infos[i], "wdir", "/home");}
for(i=50;i<60;i++){ MPI_Info_set(infos[i], "hosts", "node6");MPI_Info_set(infos[i], "wdir", "/home");}
for(i=60;i<70;i++){ MPI_Info_set(infos[i], "hosts", "node7");MPI_Info_set(infos[i], "wdir", "/home");}
for(i=70;i<80;i++){ MPI_Info_set(infos[i], "hosts", "node8");MPI_Info_set(infos[i], "wdir", "/home");}

    MPI_Init( &argc, &argv );
    MPI_Comm_get_parent( &parentcomm );
    if (parentcomm == MPI_COMM_NULL)
    {
        MPI_Comm_spawn_multiple( P_SIZE, cmds, MPI_ARGVS_NULL, np, infos, 0, MPI_COMM_SELF, &intercomm, errcodes );
        printf("I'm the parent.\n"); 
    }
    else
    {
        printf("I'm the spawned.\n");
    }
    fflush(stdout);
    MPI_Finalize();
    return 0;
} 
```