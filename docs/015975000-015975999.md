# StackOverflow 问答 15975000-15975999

# xml - XML 转换 - XSL 模板匹配多个条件

> ID：15975000
> 
> 赞同：4
> 
> 时间：2013-04-12T15:14:19.127
> 
> 标签：xml, xslt

我正在尝试从 calimero 修改 ets4_import 以匹配旧 ETS4 项目和新项目。

是否可以修改

```
<xsl:template match="/"  xmlns:b="http://knx.org/xml/project/11"> 
```

类似于

```
<xsl:template match="/"  xmlns:b="http://knx.org/xml/project/11 or http://knx.org/xml/project/10"> 
```

XML 文件要么以

```
<?xml version="1.0" encoding="utf-8"?>
<KNX xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" CreatedBy="ETS4" ToolVersion="ETS 4.0.3 (Build 3250)" xmlns="http://knx.org/xml/project/11"> 
```

或者

```
<?xml version="1.0"?>
<KNX xmlns="http://knx.org/xml/project/10" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" CreatedBy="ETS4" ToolVersion="4.0.1387.12605"> 
```

[这](http://pastebin.com/rWnqVusq)是完整的 XSL 文件。

有谁能够帮我？

谢谢

**更新**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:b10="http://knx.org/xml/project/10" xmlns:b="http://knx.org/xml/project/11" >
    <xsl:output method="xml" version="1.0" encoding="iso-8859-1" indent="yes"/>
    <xsl:template match="/">
        <xsl:for-each select="b:KNX/b:Project/b:Installations/b:Installation/b:Topology">
            <datapoints>
            <xsl:for-each select="b:Area/b:Line/b:DeviceInstance/b:ComObjectInstanceRefs/b:ComObjectInstanceRef">
                <xsl:sort select="b:Connectors/b:Send/@GroupAddressRefId"/>
                <xsl:if test="not(preceding::b:Connectors/b:Send/@GroupAddressRefId = current()/b:Connectors/b:Send/@GroupAddressRefId)">
                    <xsl:for-each select="b:Connectors">
                        <xsl:variable name="verz" select="document(concat(substring(../@RefId,0,7),'/',substring-before(../@RefId, '_O'), '.xml'))/b:KNX/b:ManufacturerData/b:Manufacturer/b:ApplicationPrograms/b:ApplicationProgram/b:Static/b:ComObjectTable/b:ComObject[@Id = ../../b:ComObjectRefs/b:ComObjectRef[@Id = current()/../@RefId]/@RefId]" /> 
                        <xsl:variable name="grosse"> 
```

有没有可能定义

```
b: = b: | b10: 
```

这样我就不必更改完整的文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T20:20:11.490

我认为您正在寻找的是：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:b10="http://knx.org/xml/project/10" xmlns:b11="http://knx.org/xml/project/11">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="b10:MyElement|b11:Element">
      <!-- Template code... -->
    </xsl:template>
</xsl:stylesheet> 
```

虽然由于您匹配的是根元素，并且一次只转换一个 XML 文档，但我不太明白问题所在，因为`/`无论如何都会匹配根元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:15:46.190

使用 XSLT 2.0，您可以首先更改（甚至可能剥离）文档的名称空间，然后应用您拥有的巨大模板。在 XSLT 1.0 中，您可以将所有出现的 替换`b:XYZ`为`*[local-name()='XYZ']`。

# django - Django Mixin 中的动态字段名称

> ID：15975003
> 
> 赞同：1
> 
> 时间：2013-04-12T15:14:22.443
> 
> 标签：django, mixins, django-class-based-views

我有这些基于类的 ListView，我想按日期过滤。我有一个简单的 mixin 来显示 filterform，效果很好：

```
class MonthYearFormMixin(object):
    def get_context_data(self, **kwargs):
        context = super(MonthYearFormMixin, self).get_context_data(**kwargs)
        context['monthyearform'] = MonthYearForm(self.request.GET)
        return context 
```

我想扩展这个 mixin 的功能以包括查询集过滤，但是我的模型有不同的日期字段需要过滤，一个可能是 start_date，另一个可能是 invoice_date。当然有人可能会说，“将它们全部重命名为'日期'”，但这并不代表我的模型，此外，我可能有一个带有 start_date 和 end_date 的模型，但只想过滤 start_date。以下是我的看法：

```
class SentList(MonthYearFormMixin, ListView):
    model = Sent
    context_object_name = 'object'
    template_name = 'sent_list.html'

    def get_queryset(self):
        qs = self.model.objects.all()
        if 'month' in self.request.GET:
            if int(self.request.GET['month']) > 0:
                qs = qs.filter(start_date__month=self.request.GET['month'])
        if 'year' in self.request.GET:
            if int(self.request.GET['year']) > 0:
                qs = qs.filter(start_date__year=self.request.GET['year'])
        return qs

class ReceivedList(MonthYearFormMixin, ListView):
    model = Received
    context_object_name = 'object'
    template_name = 'received_list.html'

    def get_queryset(self):
        qs = self.model.objects.all()
        if 'month' in self.request.GET:
            if int(self.request.GET['month']) > 0:
                qs = qs.filter(invoice_date__month=self.request.GET['month'])
        if 'year' in self.request.GET:
            if int(self.request.GET['year']) > 0:
                qs = qs.filter(invoice_date__year=self.request.GET['year'])
        return qs 
```

唯一不同的是日期字段的名称，因此不得不重复此代码令人沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:35:20.540

为什么不创建一个名为的成员变量`date_field_name`，用于存储应由 QuerySet 处理器 mixin 处理的字段名称的名称？

该列表将在使用 mixin 的类中定义。

就像是

```
class MonthYearFormMixin(object):
    def get_context_data(self, **kwargs):
        context = super(MonthYearFormMixin, self).get_context_data(**kwargs)
        context['monthyearform'] = MonthYearForm(self.request.GET)
        return context

    def get_queryset(self):
        qs = self.model.objects.all()
        if 'month' in self.request.GET:
            if int(self.request.GET['month']) > 0:
                kwargs = {('%s__month' % self.date_field_name): self.request.GET['month']}
                qs = qs.filter(**kwargs)
        if 'year' in self.request.GET:
            if int(self.request.GET['year']) > 0:
                kwargs = {('%s__year' % self.date_field_name): self.request.GET['year']}
                qs = qs.filter(**kwargs)
    return qs 
```

您的视图将如下所示：

```
class SentList(MonthYearFormMixin, ListView):
    model = Sent
    context_object_name = 'object'
    template_name = 'sent_list.html'
    date_field_name = 'start_date' 
```

# c++ - 创建多个具有相同名称的类对象？C++

> ID：15975004
> 
> 赞同：0
> 
> 时间：2013-04-12T15:14:24.037
> 
> 标签：c++, qt, object

我正在制作一个查询 MySQL 数据库的应用程序。

我希望将此结果存储在地图中（具有相应的对）：

```
std::map<int, Car*> m_car;
typedef std::pair<int, Car*> m_car_pair; 
```

汽车对象由 8 个参数组成，其中一个是 car_id 所以首先我提取汽车 ID 并将其用作键，然后我想将整个汽车对象存储为地图的值。（我知道这会让我存储 car_id 两次，但目前我不介意）。

无论如何，这是我的查询代码：

```
void DatabaseController::getAll(QString query_string)
{
    // Console log message
    std::cout << "Querying Database" << std::endl;

    /// Declare SQL query and pass function parameter 'query'
    QSqlQuery query(query_string);

    // execute the query
    query.exec();

    int count = 0;

    // While results are coming in
    while(query.next())
    {
        // Call car constructor passing all parameters
        Car car(query.value(count).toInt(), query.value(count+1).toString(), query.value(count+2).toString(), query.value(count+3).toString(),
            query.value(count+4).toInt(), query.value(count+5).toInt(), query.value(count+6).toInt(), query.value(count+7).toString());

        if (car.getcarID() != 0)
        {
            m_car_records.insert(m_car_pair(car.getcarID(), &car));
        }
    }

    std::cout << "Database query finished" << std::endl; 
```

在此之后，我做了一个快速测试函数来迭代地图并提取所有 ID（地图键）并检查它们是否不同（即函数有效）并且它们是。

但这只是一个检查，我需要的是能够从 car 调用应该在地图中的汽车对象的附件功能。所以我使用相同的快速测试函数来迭代地图和`cout << car.toString();`（汽车类中的一个简单的字符串函数）：

```
void DatabaseController::test()
{
    m_car_records_iterator = m_car_records.begin();

    for(unsigned int i = 0; i < m_car_records.size(); i++)
    {
        car *test = m_car_records_iterator->second;
        std::cout << test->toString() << std::endl;
        m_car_records_iterator++;
    }
} 
```

这显示了正确数量的结果，但是它们都是相同的，即添加到地图中每个条目的汽车对象是相同的（查询找到的最后一条记录的值）

**我的问题是...**

有什么方法可以使用我目前用于查询的这种结构，我可以在while循环中创建这些类对象并将其添加到我的地图中，每个对象都使用相同的名称，因为我当然不知道返回了多少结果并为每个对象声明一个类对象，但是就目前而言，使用相同的名称只是每次都添加相同的名称，而不是实际替换值……至少我认为这是正在发生的事情？

欢迎任何建议或想法（对不起，很长的帖子）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:18:38.197

您遇到*未定义的行为*。原因是您在映射中插入了一个指向局部变量的指针。

在循环中`getAll`，当循环从下一项重新开始时，`car`变量不再有效。

我建议你看看[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:19:11.333

这是你的问题 -

```
Car car( ... );  // ***Stack allocated

if (car.getcarID() != 0)
{
    m_car_records.insert(m_car_pair(car.getcarID(), &car));
}
    //But the pointer is what's stored 
```

当循环迭代时，`Car`实例被销毁并且指针悬空，导致未定义的行为。你需要

```
Car* car = new Car( ... ); 
```

然后当`m_car`不再需要时，您需要遍历`delete`它的`Car`值。

# javascript - Jquery，如何将文本附加到 iframe 而不是替换？

> ID：15975008
> 
> 赞同：0
> 
> 时间：2013-04-12T15:14:38.383
> 
> 标签：javascript, jquery, html, iframe

我使用 javascript 来替换文本而不是附加它。现在我想使用 Jquery 而不是 Javascript 并附加它而不是替换文本。我该怎么做？**document.getElementById("frame").srcdoc = 成绩单；**是在 iframe 中放置文本和替换的位置。

这是我的javascript代码，

```
var text = "", transcript = "", cap = "", text2 = "", cap2 = "", cap3 = "", cap4 = "";

for(var i = 0; i < subtitleArray.length; i++)
{
    var cueLineStart1 = parseFloat(subtitleArray[i][0]);
    var cueLineStart2 = parseFloat(subtitleArray[i+1][0]);
    var cueLineStart3 = parseFloat(subtitleArray[i+2][0]);
    var cueLineStart4 = parseFloat(subtitleArray[i+3][0]);
    var cueEnd4 = cueLineStart4 + parseFloat(subtitleArray[i+3][1]);

    cap = subtitleArray[i][2];
    cap2 = subtitleArray[i+1][2];
    cap3 = subtitleArray[i+2][2];
    cap4 = subtitleArray[i+3][2];
    i+=3;

    if (video.currentTime >= cueLineStart1 && video.currentTime <= cueEnd4)
    {
          transcript = cap + " " + cap2 + " " + cap3 + " " + cap4;
    }

    $("#subtitle").html(text);

    document.getElementById("frame").srcdoc = transcript;
} 
```

HTML5 iframe 代码，

```
<div  class="frame">
            <iframe id ="frame" srcdoc="<p></p>" width="930"></iframe>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:20:15.723

无需重新加载 iframe，您可以访问其内容，就像访问任何常规网页一样。

这是一个 JavaScript 跨浏览器示例：

```
var ifr=document.getElementById("frame");
var doc=ifr.contentWindow||ifr.contentDocument;
if (doc.document) doc=doc.document; 
```

使用 jQuery：

```
var doc=$("iframe").contents(); 
```

[jQuery 文档](http://api.jquery.com/contents/)中有一个示例。

# java - 显示损坏但在 java 中工作但在 android 中不工作

> ID：15975011
> 
> 赞同：0
> 
> 时间：2013-04-12T15:15:00.207
> 
> 标签：java, android, sockets

我有一个服务器客户端文件传输程序，它在 java 中运行良好。但我复制了它并将文件位置 d:/ 更改为 environm .....

问题是文件大小小于发送一个，因此它显示为损坏..任何想法。

**服务器端**

```
public class Server 
{
// create socket
long start = System.currentTimeMillis();
int bytesRead;
int current = 0;
while(true)
{
  ServerSocket servsock = new ServerSocket(13000);   
  System.out.println("Main Waiting...");
  Socket socket = servsock.accept();
  System.out.println("Accepted connection : " + socket);
 DataInputStream in = new DataInputStream(new BufferedInputStream(socket.getInputStream()));

  long filesize = new Long(in.readLong());
  System.out.println("received Size:"+filesize);
  // read file name
  String fname=in.readUTF();

  System.out.println("server : file name: "+fname);
  String prefix=fname.substring(0,fname.lastIndexOf('.')).trim();
  String suffix=fname.substring(fname.lastIndexOf('.'),fname.length()).trim();          
  String file = prefix + suffix;   
  System.out.println("received name:"+file);

        File f=new File("F:/Users/achu/Desktop/"+ file);// changed this in android
    f.createNewFile();
    // receive file
    byte [] mybytearray  = new byte [(int)(filesize)];
    InputStream is = socket.getInputStream();
    FileOutputStream fos = new FileOutputStream(f);
    BufferedOutputStream bos = new BufferedOutputStream(fos);
    bytesRead = is.read(mybytearray,0,mybytearray.length);
    current = bytesRead;
    do {
                   System.out.println("current"+current);
       bytesRead =
       is.read(mybytearray, current, (mybytearray.length-current));
       if(bytesRead >= 0) current += bytesRead;
    } while(current<filesize && bytesRead >-1);
    bos.write(mybytearray, 0 , current);
    bos.flush();
    long end = System.currentTimeMillis();
    System.out.println(end-start);
    bos.close();
    is.close();
  socket.close();
  servsock.close();
  } 

    } 
```

**客户端**

```
public class  Client
{ 
Socket socket=new Socket("101.59.43.58",13000); 
System.out.println("Connectedddd"); 

DataOutputStream out = new DataOutputStream(socket.getOutputStream());

File file = new File("d:/my.pdf");

out.writeLong(file.length());
out.flush();    

out.writeUTF(file.getName());

byte [] mybytearray  = new byte [(int)file.length()];  
FileInputStream fis = new FileInputStream(file);
BufferedInputStream bis = new BufferedInputStream(fis);
bis.read(mybytearray,0,mybytearray.length);                         

System.out.println("Send:"+mybytearray.length);
OutputStream ous = socket.getOutputStream();
System.out.println("Sending...");
ous.write(mybytearray,0,mybytearray.length);
ous.flush();
bis.close();
ous.close();
System.out.println("closing socket...");            
socket.close();

} 
```

# python - lxml删除元素不起作用

> ID：15975015
> 
> 赞同：0
> 
> 时间：2013-04-12T15:15:07.843
> 
> 标签：python, xml, lxml

我正在尝试使用 lxml 删除 XML 元素，这些方法似乎还可以，但它不起作用。那是我的代码：

```
import lxml.etree as le
f = open('Bird.rdf','r')
doc=le.parse(f)
for elem in doc.xpath("//*[local-name() = 'dc' and namespace-uri() = 'http://purl.org/dc/terms/']"):
    parent=elem.getparent().remove(elem)
print(le.tostring(doc)) 
```

**示例 XML 文件：**

```
<rdf:RDF xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" xmlns:dc="http://purl.org/dc/terms/"> 

        <wo:Class rdf:about="/nature/life/Bird#class">
                    <dc:description>Birds are a class of vertebrates. They are bipedal, warm-blooded, have a
                        covering of feathers, and their front limbs are modified into wings. Some birds, such as
                        penguins and ostriches, have lost the power of flight. All birds lay eggs. Because birds
                        are warm-blooded, their eggs have to be incubated to keep the embryos inside warm, or
                        they will perish</dc:description>
        </wo:Class>
</rdf:RDF> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:55:49.697

您的问题是本地名称是“描述”，而不是“直流”（命名空间别名）。您可以将命名空间传递给 xpath 函数并更直接地编写 xpath，如下所示：

```
import lxml.etree as le

txt="""<rdf:RDF xmlns:rdf="http://www.w3.org/2000/01/rdf-schema#" xmlns:dc="http://purl.org/dc/terms/"
    xmlns:wo="http:/some/wo/namespace">

    <wo:Class rdf:about="/nature/life/Bird#class">
       <dc:description>Birds are a class of vertebrates. They are bipedal, warm-blooded, have a
                        covering of feathers, and their front limbs are modified into wings. Some birds, such as
                        penguins and ostriches, have lost the power of flight. All birds lay eggs. Because birds
                        are warm-blooded, their eggs have to be incubated to keep the embryos inside warm, or
                        they will perish</dc:description>
    </wo:Class>
</rdf:RDF>
"""

namespaces = { 
    "rdf":"http://www.w3.org/2000/01/rdf-schema#",
    "dc":"http://purl.org/dc/terms/",
    "wo":"http:/some/wo/namespace" }

doc=le.fromstring(txt)
for elem in doc.xpath("//dc:description", namespaces=namespaces):
    parent=elem.getparent().remove(elem)
print(le.tostring(doc)) 
```

# c# - MVC 4 捆绑在发布为 IIS7 应用程序时中断

> ID：15975016
> 
> 赞同：3
> 
> 时间：2013-04-12T15:15:14.543
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, bundling-and-minification, t4mvc

我正在尝试将 MVC 4 项目部署到 IIS 7 上。

我需要该项目成为网站内的应用程序，以便用户可以继续使用现有网站，但通过将 /mySite 添加到现有 URL 来访问我的网站。

创建为网站下的应用程序时，我可以访问我的网站，但所有捆绑包都已损坏。

当我查看源代码时，我的包没有值，所以脚本的 src 看起来像：

```
"/mySite/Scripts/validation?v=" 
```

如果应用程序作为单独的网站而不是应用程序发布，则它可以正常工作并且捆绑包具有价值。

```
"/Scripts/validation?v=-_ZaBIp4vfIoajyi-JkBIsoCXRGuEGptU4ZUpHA6c8U1" 
```

下面是我如何在 bundle config 中定义我的 bundle。

```
 var validationBundle = new ScriptBundle("~/Scripts/validation")
            .Include("~" + Links.Scripts.jquery_validate_js)
            .Include("~" + Links.Scripts.jquery_validate_unobtrusive_js); 
```

我检查了父网站的应用程序池，它设置为 .NET 4

我很茫然，在网上找不到其他任何东西，所以欢迎任何建议。

谢谢

**回答**

典型的，我最终在另一个堆栈溢出问题上找到了答案，我又丢失了，所以没有链接。

问题在于使用 T4MVC，这会为作为应用程序或虚拟目录发布的 MVC 项目生成不正确的路径。

如果您作为网站发布，您可以继续使用 T4MVC，因为路径是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T13:11:42.670

```
 <system.webServer>
   <modules runAllManagedModulesForAllRequests="true"/> 
 </system.webServer> 
```

web.config 文件中的此修改对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T13:02:18.003

使用**VirtualPathUtility.ToAppRelative**在 IIS 中创建应用程序相对路径，如下所示：

```
 var validationBundle = new ScriptBundle("~/Scripts/validation")
        .Include(VirtualPathUtility.ToAppRelative(Links.Scripts.jquery_validate_js))
        .Include(VirtualPathUtility.ToAppRelative(Links.Scripts.jquery_validate_unobtrusive_js)); 
```

看到这个问题： [Unable to generate 'VersionQueryString' in Scripts.Render when using bundle](https://stackoverflow.com/questions/26101434/unable-to-generate-versionquerystring-in-scripts-render-when-using-bundle/26121404#26121404)

# android - 动作条 Sherlock，安装

> ID：15975019
> 
> 赞同：0
> 
> 时间：2013-04-12T15:15:16.247
> 
> 标签：android, eclipse, actionbarsherlock

我有下一个情况，我想使用 ActionBarSherlock。我读了下一条指令

```
"Download the .zip/.tgz and extract it somewhere 
Go to eclipse and choose File->New->Project 
Choose Android Project 
Select Create project from existing source and then browse to the library folder inside the folder you just extracted the .zip/.tgz into " 
```

但是当我转到 File->New-Project 时没有 Android 项目。怎么做？如果我选择 New-Android 应用程序项目，则没有选项“选择从现有源创建项目”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:20:29.803

文件 - 新建 - 其他，在这里您从现有代码作为项目导入。顺便说一句，这是一个好的开始：[http ://www.youtube.com/watch?v=FKd1yVpIXHo](http://www.youtube.com/watch?v=FKd1yVpIXHo)

（当然如果你没有Android Project，只有Java Project 好像你忘了安装Android SDK）

# c++ - 类和纯虚拟

> ID：15975024
> 
> 赞同：0
> 
> 时间：2013-04-12T15:15:28.160
> 
> 标签：c++, virtual

我有4节课。

`class A`, `class B`, `class C`,`class D`

类`C`包括类`A`和类`B`并引用它们：

头文件：

```
class C
{
private:
    A &a;
    B &b;
    int x;
    int y;
    int energy;
public:

    C(A &a, B &b);

          void print(void);

    virtual void printAt(void); 
```

CPP 文件包括：

```
void C::printAt(void)
{
    // move cursor to the current x, y coordinates
    b.gotoXY(x,y);
} 
```

在课堂`D`上，我通过 ( )把课堂`C`变成了朋友课堂`class D : public class C...`

然后我有一个`void printAt(void)`.

这一切都有效，但是如何`b.gotoXY..`从 class 访问 b 类属性（）`D`？

希望这可以使 Sence。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:24:18.380

只需将它们放在`protected`部分中：

```
class C {
protected:
  A &a;
  B &b;

  ...
}; 
```

**注意：**`virtual`它与方法无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:38:04.023

您无法访问它们的原因`D`是因为它们是`private`，这意味着它们只能从其内部访问`D`。为了能够仅从`D`或其子类访问它们，您需要使用`protected`访问修饰符：

```
class C
{
private:
    int x;
    int y;
    int energy;

protected:
    A &a;
    B &b;

public:
    C(A &a, B &b);

    void print(void);

    virtual void printAt(void);
    /// ...
}; 
```

现在，一些术语：

当您键入时，`class C : public D`您没有将其设为 a `friend`，而是从它继承。这意味着`C`将是`D`. 朋友是另一个相关的概念。

某个类的朋友是另一个可以访问其`private`属性的类。因此，如果您改为制作`D`a `friend`of `C`，您将可以访问`a`且`b`无需制作它们`protected`。这将是这样完成的：

```
class C
{
    // Some code...
    friend D;
    //Lots of code ...
} 
```

请注意，要使其正常工作，您需要先`D`声明`C`.

**现在，您应该使用哪些选项？**

问自己这个问题：`D`逻辑上是更具体的类型`C`吗？如果是这样，它应该使用继承。如果没有，最好让`D`一个成员类型`C`并使用`friend`关键字。在任何一种情况下，`friend`都要谨慎使用，并且仅当两个类之间必然存在非常紧密的关系时（也许如果`D`是类型的工厂`C`并且`C`具有私有构造函数。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:38:18.680

您应该将预期的成员`protected`或将他们的课程`friend`添加到您的课程中。

另外，我觉得你在实例化一个对象时会`C`因为未初始化的引用而遇到问题。

```
class C
{
private:
    A &a;
    B &b;

    // ...

public:
    C(A &a, B &b) : a(a), b(b)
                  ^^^^^^^^^^^^
    // ...
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:40:00.793

当您希望其他类继承对您的属性的访问权限时。不要将它们私有化，
以便您可以选择受保护的或公共的。有关更多详细信息，您可以访问[http://www.learncpp.com/cpp-tutorial/115-inheritance-and-access-specifiers/](http://www.learncpp.com/cpp-tutorial/115-inheritance-and-access-specifiers/)
解决问题，请尝试以下代码

```
class C
{
protected://or public
    A &a;
    B &b;
    int x;
    int y;
    int energy;
public:
    C(A &a, B &b);
    void print(void);
    virtual void printAt(void); 
```

并且在`class D`

```
class D:public C
{
public:
    void printAt(void);
}; 
```

# python - Python：将坐标调整为重心

> ID：15975027
> 
> 赞同：0
> 
> 时间：2013-04-12T15:15:34.327
> 
> 标签：python, coordinates

我有一个 python 脚本，我从两个单独的文本文件中导入三角形元素的坐标和元素定义。

坐标文件如下所示：

```
id,x,y,
  1,  0,   0
  2,  0,   1
  3,  0,   2
  4,  1,   0
  5,  1,   1
  6,  1,   2
  7,  2,   0
  8,  2,   1
  9,  2,   2 
```

元素文件如下所示：

```
id, n1, n2, n3
 1, 1, 2, 4
 2, 1, 2, 5
 3, 2, 3, 5
 4, 3, 5, 6
 5, 5, 6, 8
 6, 6, 8, 9
 7, 5, 7, 8
 8, 4, 5, 7 
```

在脚本中，当三角形元素的两条边位于同一位置时，我定义了一个新元素（矩形）。我首先为每个三角形元素定义唯一节点（因此元素不再共享同一个节点）然后我通过角落的四个节点定义一个新元素。见下图

![在此处输入图像描述](https://i.stack.imgur.com/e9JYs.png)

这工作得很好，但是新定义的元素的厚度为零。我确实想让它们有一个实际的厚度。因此，我想调整三角形元素节点的坐标并将它们稍微移动到元素的重心。

我怎样才能找到三角形元素的重心，然后在元素的重心方向上更改水平距离为 0.001，垂直距离为 0.001 的节点的坐标？

我目前拥有的脚本如下：

```
 #!/usr/bin/env python

open("D://Documents//SkyDrive//afstuderen//99 EEM - Abaqus 6.11.2//scripting//_COORDINATEN.txt", "r")
import csv
import itertools

with open("_COORDINATEN.txt") as file:
    data = csv.reader(file)
    next(data)
    coords = []
    coords = ([[float(x) for x in line[1:]] for line in data])

open("D://Documents//SkyDrive//afstuderen//99 EEM - Abaqus 6.11.2//scripting//_ELEMENTEN.txt", "r")
import csv
import itertools

with open("_ELEMENTEN.txt") as file:
    data2 = csv.reader(file)
    next(data2)
    elems = []
    elems = ([[int(x)-1 for x in line[1:]] for line in data2])

#Flip the original elements if required
for i,elem in enumerate(elems):
    ecoords = [coords[e] for e in elem]

    a = [x2-x1 for x1,x2 in zip(ecoords[0],ecoords[1])]
    b = [x2-x1 for x1,x2 in zip(ecoords[1],ecoords[2])]

    n = a[0]*b[1]-a[1]*b[0]

    if n < 0:
        elems[i] = [ elem[0], elem[2], elem[1] ]

#bewerking elementen
newcoords = []
newelems  = []
for elem in elems:
    ecoords = [coords[e] for e in elem]
    newelem = range( len(newcoords), len(newcoords)+len(ecoords) )

    newcoords += ecoords
    newelems.append( newelem )

cohelems = []
for e,elem in enumerate(elems):
  for edge in [[0,1],[1,2],[2,0]]:

    eedge = [elem[i] for i in edge]

    for e2,elem2 in enumerate(elems[e+1:]):

      e2 += e+1

      for edge2 in [[0,1],[1,2],[2,0]]:

        eedge2 = [elem2[i] for i in edge2]

        if all([i in eedge2 for i in eedge]):

          newedge  = [newelems[e][i] for i in edge ]
          newedge += [newelems[e2][i] for i in edge2]

          cohelems.append( newedge[-1::-1] ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:09:17.340

我不会尝试使它与您的变量名完全对应。相反，我将给出一个通用示例，说明如何进行您想要的收缩。你应该能够将它应用到你自己的东西上。我正在使用 Michael Mauderer 链接的页面上的公式之一。

问题只是向量代数。如果您一般不打算对这些点使用矢量类，那么它至少有助于定义一些矢量操作：

```
def add_vectors(*points):
  new_x = 0.0
  new_y = 0.0
  for point in points:
    new_x += point[0]
    new_y += point[1]
  return [new_x, new_y]

def subtract_vectors(a, b):
  new_x = a[0] - b[0]
  new_y = a[1] - b[1]
  return [new_x, new_y]

def mul_by_scalar(vector, scalar):
  new_x = vector[0] * scalar
  new_y = vector[1] * scalar
  return [new_x, new_y] 
```

有了这些，剩下的就变得容易一些了：

```
triangle = [[0,0], [1,0], [1,1]]

# finding the center of mass:
#   CM = (1/3) * (a + b + c)
# CM:       position vector to the center of mass
# a, b, c:  position vectors to the corners

CM = mul_by_scalar(add_vectors(*triangle), 1.0/3)

# For every point of the triangle, find a vector that points towards its CM.
# Scale the vectors to 10% (in this instance).

point_to_CM_vectors = []
for point in triangle:
  point_to_CM_vectors.append(subtract_vectors(CM, point))

# Make a new triangle, contracted by 10%.

new_triangle = []
for point, motion in zip(triangle, point_to_CM_vectors):
  new_triangle.append(add_vectors(point, mul_by_scalar(motion, 0.10))) 
```

您可以相当容易地了解如何内联 的功能`add_vectors`，`subtract_vectors`并`mul_by_scalar`“手动”执行操作，但您会不断重复自己，代码会令人困惑。

# javascript - 使用Jquery后台更改css - 如何一次只允许一个链接

> ID：15975029
> 
> 赞同：0
> 
> 时间：2013-04-12T15:15:40.687
> 
> 标签：javascript, jquery

我想制作一个在您单击时突出显示的 URL 列表，问题是任何时候都应该突出显示一个链接。

我能够让重置按钮工作。使用过`removeAttr) - $("a").removeAttr("style")`- （这样做有什么负面影响吗？）

但我不能让它一次只做一个亮点。

有人可以帮助我提供一次仅突出显示一个链接的示例代码吗？现在，可以突出显示多个链接。

我能够在 Jsfiddle [http://jsfiddle.net/M3vVw/3/上做一个例子](http://jsfiddle.net/M3vVw/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:19:42.867

我建议这样做：创建一个 CSS 规则并将其应用于您单击的元素，首先从所有链接中删除相同的样式。

**jQuery**

```
$("a").click(function () {
    $('a').removeClass('back');
    $(this).addClass('back');
});
$("#btn").click(function () {
    $("a").removeClass("back")
}); 
```

**CSS**

```
.back {
    background-color: #ff3fff;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/M3vVw/5/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:20:40.863

我建议使用`addClass()`（正如[adeneo 已经建议](https://stackoverflow.com/a/15975131/82548)的那样），但如果你*必须*使用`attr()`：

```
$('a').click(function(){
    var that = $(this);
    that.css("backgroundColor", "#ff3fff").closest('li').siblings().find('a').attr('style', '');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/M3vVw/6/)。

或者：

```
$('a').click(function(){
    var that = $(this);
    that.css("backgroundColor", "#ff3fff").closest('li').siblings().find('a').removeAttr('style');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/M3vVw/9/)。

请记住，使用`attr()`/`removeAttr()`具有令人难以置信的破坏性，并且需要*更多的*工作和维护（您必须每次都显式地重构*每个**样式*元素属性的 CSS ）；/效率更高，因为它包含所有外部样式，在需要时可以轻松地向元素添加/删除该样式。*`addClass()``removeClass()`*

 *参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`attr()`](http://api.jquery.com/attr/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`css()`](http://api.jquery.com/css/).
*   [`find()`](http://api.jquery.com/find/).
*   [`removeAttr()`](http://api.jquery.com/removeAttr/).
*   [`siblings()`](http://api.jquery.com/siblings/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:20:47.207

你可以使用这个：

```
$("a").click(function()
{
      $(this).css("backgroundColor", "#ff3fff");
      $("a").not($(this)).removeAttr("style");
});

$("#btn").click(function(){
   $("a").removeAttr("style")
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:25:52.373

`**[LIVE DEMO](http://jsfiddle.net/M3vVw/10/)**`

CSS：

```
a.active{
    background:#ff3fff;
} 
```

jQuery：

```
function removeActive(){
    $("a").removeClass("active");
}

$("a").click(function( e ){
    e.preventDefault();
    removeActive();
    $(this).addClass("active");
});

$("#btn").click(removeActive); 
```*

# c++ - 用 VC++ 生成 *.dll 后的 *.lib 在哪里？

> ID：15975033
> 
> 赞同：0
> 
> 时间：2013-04-12T15:15:49.607
> 
> 标签：c++, dll

我用 VC++ 生成了一个 *.dll。当我想使用它时，需要 *.lib。但我找不到它。如何获取 *.lib？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T15:22:18.073

除非您另外指定，否则`.lib`将在与`.DLL`.

如果你得到的是一个 dll 而不是一个 lib，那么很有可能你实际上并没有从 dll 中导出任何东西。在这种情况下，链接器将创建 dll，但不会自动创建匹配的导入库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:25:51.900

这实际上取决于您的项目设置。

看看 *.vcprojx

并搜索类似的模式：

```
<link>
<ImportLibrary>.\Release/yourlibrary.lib</ImportLibrary>
</link> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:27:37.123

通常，Visual Studio 将 .lib 放在 .dll 文件旁边。您的案例听起来根本不会生成 .lib。将库构建为 dll 时，如果要在另一个项目中链接到该库（而不是使用 dllopen 等），则必须指定应将哪些函数导出到库中。为此，您必须在构建库时为要导出的所有类或函数添加 __declspec(dllexport)，并在链接时添加 __declspec(dllimport)。

你经常会发现一些像这样的宏：

```
#ifdef WIN32
    #ifdef MYLIB_EXPORTS
        #define MYLIBAPI __declspec(dllexport)
    #else
        #define MYLIBAPI __declspec(dllimport)
    #endif
#else
    #define MYLIBAPI
#endif 
```

然后，在构建 lib 时，定义 MYLIB_EXPORTS 预处理器，以便它导出，同时链接它导入。您自己的代码可能看起来像这样

```
class MYLIBAPI MyClass
{
public: 
    void SomeFunction()
}
MYLIBAPI void SomeGlobalFunction(); 
```

现在，MyClass 和 SomeGLobalFunction 在构建时被导出，并出现在 lib 文件中。

# android - Universal-Image-Loader 不遵循 layout_weight

> ID：15975038
> 
> 赞同：1
> 
> 时间：2013-04-12T15:15:57.253
> 
> 标签：android, xml, universal-image-loader

我正在使用通用图像加载器来抓取一些图像并将它们显示在列表视图中。我无法让布局看起来正确。我希望图像使用不超过 25% 的宽度，这在 Eclipse 的图形布局视图中看起来不错，但是当下载图像时，它会显示为全尺寸，这太大了。我希望避免使用`maxwidth`，因为我不知道全宽是多少。

这是我的布局 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal"
android:padding="10dp"
android:weightSum="100" >

<ImageView
    android:id="@+id/imgIcon"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_gravity="center_vertical"
    android:layout_weight="25"
    android:contentDescription="@string/offerImage"
    android:paddingRight="10dip"
    android:src="@drawable/ic_launcher" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="75"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:text="tempString"
        android:textColor="#ffffffff"
        android:textSize="18sp" />

    <TextView
        android:id="@+id/txtRetailer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Business name"
        android:textColor="#ffffffff"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/txtDistance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:text="99.99 miles"
        android:textColor="#ffffffff"
        android:textSize="12sp"
        android:textStyle="bold" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:19:30.437

我对与 UIL 一起使用的 ImageViews 的大小也遇到了一些问题，这对我有帮助：

```
iv.setAdjustViewBounds(true); 
```

也许值得尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:59:36.547

解决方案是为和设置`layout_width`值。 仅适用于未使用的空间，因此如果图像太大，则没有任何可用空间。`0dip``ImageView``LinearLayout``layout_weight`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:24:58.793

在你的 xml 文件中添加这个在你的 imageView 标签中添加这个

```
android:scaleType="fitXY" 
```

# ios - Interface Builder IB - 导航控制器，跳过视图

> ID：15975039
> 
> 赞同：3
> 
> 时间：2013-04-12T15:15:59.997
> 
> 标签：ios, uinavigationcontroller, interface-builder

您好，我是 iOS 新手，有一个关于浏览我的视图的问题。

我正在使用 IB 连接导航栏中的 PREVIOUS 和 NEXT 按钮来推送我的视图。这一切都很好。但是，我很难找出我需要做的确切位置或需要放置代码的位置，以便我可以跳过视图。为了简化我的情况...

-我有 1 个导航控制器和 4 个视图控制器，分别命名为 VC1、VC2、VC3、VC4。每个 VC 都有一个 .H/.M - 从 VC1 开始，一个接一个。

假设我想跳过 VC3 并根据 VC2 中的设置直接跳转到 VC4。我将把代码放在哪里？我是否需要从 VC3 的 NAV 按钮中解开 IBAction 方法？

如果之前已经报道过，我深表歉意。如果有一个 tut 或者如果你知道一个回答这个问题的帖子，请告诉我。我确实进行了搜索，但搜索返回的一般帖子可能是由于我使用了错误的术语。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:14:21.797

几个想法：

1.  如果您想从 VC2 推送到 VC3 或 VC4，而不是在特殊情况下让 VC3 立即推送到 VC4，我认为最好让 VC2 直接推送到适当的视图控制器。因此，您可能会`IBAction`在 VC2 中为您执行此操作：

    ```
    - (IBAction)pushToNext:(id)sender
    {
        BOOL skipToVC4 = ... // put in whatever logic you'd use to bypass VC3 and go directly to VC4
        UIViewController *nextController;

        if (skipToVC4)
        {
            nextController = [self.storyboard instantiateViewControllerWithIdentifier:@"VC4"];

            // obviously, if using NIBs, you'd do something like:
            // nextController = [[ViewController4 alloc] initWithNibName:@"VC4" bundle:nil];
        }
        else
        {
            nextController = [self.storyboard instantiateViewControllerWithIdentifier:@"VC3"];
        }

        [self.navigationController pushViewController:nextController animated:YES];
    } 
    ```

    这样，当您从 VC4 弹出时，您将直接弹出回适当的视图控制器（例如，如果您从 VC2 推送到 VC4，当您弹出时，您将自动弹出回 VC2。

    而且，显然，如果您使用情节提要，而不是手动调用`pushViewController`，则可以从 VC2 获得两个转场（一个到 VC3，一个到 VC4），给它们适当的标识符，然后调用`performSegueWithIdentifier`以转入适当的视图控制器。但想法是一样的：您可以`IBAction`根据您选择的任何逻辑定义一个执行适当转场的方法。

2.  您说您在导航栏中有“推送我的视图的上一个和下一个按钮”，我想知道您的“上一个”按钮。这是在做`popViewControllerAnimated`吗？通常，“NEXT”按钮将推送到新的视图控制器，但“PREVIOUS”按钮不应推送到前一个视图，而是弹回它。如果你不弹回来，你可能会得到你以前的一些视图控制器的多个实例。因此，“上一个”按钮应链接到执行以下操作的按钮`IBOutlet`：

    ```
    - (IBAction)popToPrevious:(id)sender
    {
        [self.navigationController popViewControllerAnimated:YES];
    } 
    ```

3.  弹回时，您显然会弹回您从中推送的视图控制器。如果您想在返回 6.0 之前的 iOS 版本时跳过一些视图控制器，您可以使用`popToViewController`或`popToRootViewControllerAnimated`. 例如，假设您从 VC1 推送到 VC2，再到 VC3，再到 VC4。如果您想从 VC4 一直跳回 VC1，您可以连接`IBAction`到 VC4 中，如下所示：

    ```
    - (IBAction)popToRoot:(id)sender
    {
        [self.navigationController popToRootViewControllerAnimated:YES];
    } 
    ```

    或者，如果你想从 VC4 跳回到 VC2，你会

    ```
    - (IBAction)popToVC2:(id)sender
    {
        for (UIViewController *controller in self.navigationController.viewControllers)
        {
            if ([controller isKindOfClass:[ViewController2 class]])
            {
                [self.navigationController popToViewController:controller animated:YES];
                return;
            }
        }
    } 
    ```

    `navigationController.viewControllers`如果您将 VC2 的引用传递给 VC3，然后再传递给 VC4，则可以避免这种迭代，但有时上述技术更容易。

    顺便说一句，如果您只支持 iOS 6 及更高版本，并且正在使用情节提要，您还可以使用展开转场，这是一种更优雅的方式返回到特定的视图控制器。但尚不清楚（a）您是否使用故事板；(b) 你只支持 iOS 6 及更高版本，所以我将暂时避免讨论 unwind segues。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:38:56.363

首先：
**向我们展示一些代码，你在哪里推送新的视图控制器，也许是你的整个导航控制器代码**

第二**（解决方案）**：

我假设：

*   您的上一个/下一个按钮链接到您的 navigationController 类
*   您有适当的方法（prevPressed:/nextPressed:)，当您单击其中一个按钮时会调用这些方法

**我可以为您提供以下帮助：**

*   `visibleViewController`你知道哪个控制器在@property的那一刻是可见的
*   每次单击导航栏中的按钮时，您都可以询问`visibleViewController`应该推送/弹出哪个下一个/上一个视图控制器

最好的解决方案是，如果您的所有控制器 VC1/2/3/4 都是 viewController 类的子类，它在其接口中定义了一个方法：

```
- (Class)nextViewControllerClass;
- (Class)previousViewControllerClass; 
```

并在实施中：

```
- (Class)nextViewControllerClass {
    return [VC4 class];
}

- (Class)previousViewControllerClass {
    return [VC1 class];
} 
```

在您的 navigationController 代码中执行以下操作：

```
- (IBAction)next:(id)sender {
    UIViewController *nextViewController = [[[self.visibleViewController nextViewControllerClass] alloc] init];
    [self pushViewController:nextViewController animated:YES];
} 
```

# php - 自定义 Vtiger

> ID：15975045
> 
> 赞同：0
> 
> 时间：2013-04-12T15:16:10.420
> 
> 标签：php, mysql, vtiger

我正在研究 vtiger 定制。

我更改了 UI，但我想知道 mysql 查询在哪里执行。

是否有任何通用功能来执行所有查询？

我有一个被所有页面调用的函数`$this->database->Execute($sql);`

谁能告诉我查询的确切功能或流程如何工作。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:59:46.447

vtiger中的查询可能会经过不同的路径，但如果你使用mysql，最后一个地方是：

> {Vtiger 的路径}\adodb\drivers\adodb-mysql.inc.php

```
 function _query($sql,$inputarr) 
```

您甚至可以记录所有查询

```
 function _query($sql,$inputarr)
{
    $hl = fopen("my_log.sql","a+");
    fwrite($hl, "--------"."\n".$sql."\n");
    fclose($hl);        
    return mysql_query($sql,$this->_connectionID);
} 
```

my_log.sql 将在 vtiger 根目录中创建。vtiger 也有它自己的日志，但我更喜欢我的。

还有一点要提：

> 主要是 vtiger 使用它的内置函数 pquery。我建议不要通过这个函数来理解它。大多数情况下，被调用的 pquery 函数链有超过 3 个成员。但我认为值得了解它是如何进行查询的。只需编写输入，pquery 就可以完成这项工作！

# jquery - jquery ui对话框初始位置

> ID：15975046
> 
> 赞同：2
> 
> 时间：2013-04-12T15:16:20.923
> 
> 标签：jquery, user-interface, dialog

我正在使用 JQuery 对话框在我的 Web 应用程序中创建对话框窗口。$('.navbar') 是标题导航菜单。我的问题是当打开第二个对话框时，它直接在第一个对话框的位置打开并且虽然覆盖了它。我想为下一个对话框相对于最后一个对话框的坐标设置一些偏移量，以获得级联对话框的效果。我的一些对话框非常大，这就是为什么我将它们放在导航栏下方的原因：

```
var dialogOptions = {
            position: { my: "top", at: "bottom" , of: $('.navbar')}
            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:29:59.343

试试这个方法。

```
$('#dialog').dialog({
  position: { 
    my: 'top',
    at: 'bottom',
    of: $('#YourPreviousDialog')
  }
}); 
```

# javascript - 垂直移动滚动 - 固定导航菜单滞后

> ID：15975047
> 
> 赞同：1
> 
> 时间：2013-04-12T15:16:21.423
> 
> 标签：javascript, menu, fixed, lag

我目前正在开发一个网站的移动版本，该网站在主页顶部有一个导航菜单。我在这个导航菜单中使用 jquery 平滑滚动，这样当用户从菜单中选择一个主题时，它会很好地滚动到位于页面下方的特定项目。这非常有效，我对此没有任何问题。

但是，我还使用了我在这个网站上找到的一些代码，一旦用户滚动到某个点，导航菜单就可以固定在页面顶部。（在我的情况下为 160px）该代码在这里：

```
/* Dynamic top menu positioning
     *
     */

    var num = 160; //number of pixels before modifying styles

    $(window).bind('scroll', function() {
        if ($(window).scrollTop() > num) {
            $('.framecont').addClass('fixed');
        }
        else {
            $('.framecont').removeClass('fixed');
        }
    }); 
```

如果需要，这里是 .framecont 和 .fixed 的 CSS：

```
.framecont{
    background-color: #FFFFFF;
    border-bottom: 1px solid grey;
    border-top: 1px solid grey;
    box-shadow: 0 -55px 1px -7px #FFFFFF inset;
    color: #FFFFFF;
    overflow-x: scroll;
    padding-bottom: 3px;
    position: absolute;
    top: 110px;
    -webkit-overflow-scrolling:touch;
    width: 100%;
    z-index: 99;
    }

.fixed {
border-bottom: 5px solid grey;
border-top: 5px solid grey;
box-shadow: 0 0 30px #000;
padding-bottom: 10px;
padding-top: 5px;
position:fixed;
top:0;
} 
```

当用户从导航菜单中选择一个项目时，jquery 平滑滚动启动，（以及上面的代码）并在滚动超过 160 像素后立即将菜单捕捉到页面顶部。这很棒。但是当用户在页面上手动滚动超过 160 像素时（使用他们的手指滚动而不是选择导航菜单项）在菜单出现固定在页面顶部之前会有很大的延迟。当用户手动将他/她的手指向下滑动页面时，滚动必须完全停止（并且用户必须将他/她的手指从屏幕上移开），然后菜单才会固定在页面顶部。

这种滞后是我要解决的问题。当用户手动滚动超过 160 像素时，我希望菜单立即固定在窗口顶部，就像用户选择导航菜单项并且 jquery 平滑滚动启动时一样。这可能吗？

如果您还没有弄清楚，那么我对 javascript 和一般编码非常陌生。这是我第一次在这个网站上提问，所以如果我没有以任何方式遵守适当的礼仪，我提前道歉。

# gsm - 错误 +HTTPACTION:0,601,0

> ID：15975051
> 
> 赞同：11
> 
> 时间：2013-04-12T15:16:30.467
> 
> 标签：gsm

我正在尝试使用 sim900 GSM 模块访问网站。这是命令列表

```
AT+CSQ      
+CSQ: 16,0          

OK  
AT+HTTPINIT           
OK  
AT+HTTPPARA="CID",1                   
OK  
AT+HTTPPARA="URL","www.google.com"                                  
OK  
AT+HTTPACTION=0               
OK  

+HTTPACTION:0,601,0                         

AT+HTTPACTION=0
OK

+HTTPACTION:0,601,0 
```

无法访问谷歌。601 代码显示网络错误。如何摆脱这个错误？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-05-09T22:33:18.760

您需要设置与承载的连接。以下是对我有用的最低设置命令（基于试验/错误并在互联网上搜索）。

```
AT+SAPBR=3,1,"APN","wap.cingular"
AT+SAPBR=1,1 
```

APN 的正确值可能因您而异，具体取决于您的网络和服务提供商。我正在使用 AT&T 预付费 SIM 卡。一旦工作正常，您就可以像已经拥有的那样执行 HTTP 设置命令...

```
AT+HTTPINIT
AT+HTTPPARA="URL","http://www.google.com"
AT+HTTPACTION=0 
```

HTTP 标准中未分配 600 以上的状态码（有些在 500 范围内）。在 SIM908 的 AT 命令手册中，状态含义在`HTTPACTION`命令的注释中给出：

```
600 Not HTTP PDU
601 Network Error
602 No memory
603 DNS Error
604 Stack Busy 
```

您可以使用 查询CID 1 的承载连接状态`AT+SAPBR=2,1`及相关参数`AT+SAPBR=4,1`。您还可以使用 来检查您是否已连接到 GPRS 网络`AT+CGATT?`。如果一切都表明您已连接并且您仍然收到 601 状态代码，请检查您的服务计划是否有数据并且它没有用完。我发现，即使我的帐户余额显示有几百 k 的数据，我也会开始获得 601 状态，直到我将更多数据添加到我的预付费电话计划中。如果 SIM 模块一直处于开启状态并且您添加了更多数据，则您需要关闭并重新打开连接（`AT+SAPBR=0,1`后跟`AT+SAPBR=1,1`），然后您的`HTTP*`命令将再次开始工作，而无需再次设置`HTTPPARA`设置，也无需重新开始`HTTPINIT`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-13T15:08:02.447

我发现当对仅 https 的网站进行 http 调用时，它会在 sim 上引发 601 错误。当心一些 sim 设备有 ssl 而有些没有。使用 AT+HTTPSSSL=? 审问。带有 ssl 的设备将响应“HTTPSSSL 1”。如果您收到错误，您的设备没有 ssl。这需要我与工厂进行一些工作才能确定。

您还必须使用访问 ssl 站点。我正在使用 wifi101 ssl 客户端。

fona.setHTTPSRedirect(true); dy3

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-02T05:23:12.400

我也遇到了这个错误。问题的原因可能是电话号码帐户中没有足够的钱。你可以检查一下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-26T08:29:25.897

601 是一些自定义实现的错误代码。

[这](http://httpstatus.es/)是标准[HTTP 状态代码的列表](http://httpstatus.es/)

> **+HTTPACTION:0,601,0**
> 
> 上述用于 HTTP 会话启动的 AT 响应代码（601）表示存在网络错误。然后确保正确设置了 PDP 上下文。

[资源](https://m2msupport.net/m2msupport/at-command-for-http-functions-for-remote-server-data-access/)

[https://m2msupport.net/m2msupport/at-command-for-http-functions-for-remote-server-data-access/](https://m2msupport.net/m2msupport/at-command-for-http-functions-for-remote-server-data-access/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-01T14:33:20.103

我现在在这个模块上花了很多时间。

我的经验是，当您没有从远程服务器收到 200 回复时，您应该检查 IP 地址以验证您是否仍在网络上向工作服务器发送 ping ( `AT+CIPPING="XX.XX.XX.XX"`)。

如果成功：尝试`AT+SAPBR=2,1`和`AT+CIFSR`. 您应该为这两个命令获得相同的地址。

`AT+CIPCSGP=1`如果您没有获得相同的地址，请使用, `"yourapn.com"`, `"user"`,再次登录网络/服务`"password"`。

如果没有任何效果，请关闭模块。等待几分钟，然后重新启动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-27T19:52:52.880

同样，以防有人遇到同样的问题。就我而言，这是 url 中的拼写错误： `AT+HTTPPARA="URL"," http://www.google.com"` 您之前注意到空格了`http`吗？几个小时，我也没有注意到。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-23T11:29:59.990

以防有人受到这个问题的影响并在 4 年后偶然发现这篇文章：在我的情况下，模块有一个小的“贴纸”型天线，它以某种方式损坏。

我可以连接到网络，但是当我尝试通过 GPRS 网络使用 HTTP 时，我只收到返回代码 601（网络错误）或 603（无法解析 DNS）。

一旦我用新天线更换了天线，一切都运行良好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-10T07:26:06.577

通常在此命令之后 AT+SAPBR=3,1,"CONTYPE","GPRS" 您输入您的“APN”、“USR”和“PWD”详细信息也使用 SAPBR=3,1 等。这些详细信息必须与 SIM 卡匹配/ 移动电话提供商。

然后建议检查您的设备现在是否已收到 IP 地址。有时这不是马上的。使用 AT+SAPBR=2,1 查询，这将返回您的 IP 地址，您应该检查以确认。

获得 IP 地址后，您可以输入 AT+HTTPINIT、AT+HTTPPARA="CID",1 等。

现在要使用 GET，您必须包含一个“？” 在 URL 之后为您的 php 脚本提供 key=value 对。

因此，在您的情况下，它类似于 AT+HTTPPARA="URL","http://<Public_Ip_Address>:8080/folder/savedata.php?A=1001" 其中 A 是键，1001 是值。

现在发送 AT+HTTPACTION=0，你应该得到一个 +HTTPACTION: 0,200,1000 响应，其中 200 是 OK，1000 是有效负载大小。如果需要，AT+HTTPREAD 将允许您读取响应。

* * *

## 回答 #9

> 赞同：-5
> 
> 时间：2013-07-19T08:57:02.410

更改网址。601 是一个`URL has been moved`. 是重定向。

# sql - 使用连接更新会抛出“MERGE 语句多次尝试更新或删除同一行。”

> ID：15975053
> 
> 赞同：1
> 
> 时间：2013-04-12T15:16:34.970
> 
> 标签：sql, sql-server, sql-merge

我有一个带有 JOIN 的 UPDATE 查询，它抛出以下错误：

*MERGE 语句多次尝试更新或删除同一行。当目标行匹配多个源行时会发生这种情况。MERGE 语句不能多次 UPDATE/DELETE 目标表的同一行。优化 ON 子句以确保目标行最多匹配一个源行，或使用 GROUP BY 子句对源行进行分组。*

这是我的更新声明：

```
UPDATE
    Products
SET
    price = pu.ColumnValue
FROM
    Products p
    JOIN #priceupdates pu ON p.sku = pu.sku AND p.idManufacturer = pu.idManufacturer 
```

产品通过 SKU 和 idManufacturer 加入#priceupdates。

我的 #priceupdates 表中没有重复项或 NULL。

**编辑：**

为了证明这一点，我运行了以下 2 条语句，它们都返回了相同数量的记录：

```
select sku, idmanufacturer from #priceupdates
select distinct sku, idmanufacturer from #priceupdates 
```

**结束编辑**

根据#priceupdates 中的数据，它会或不会抛出错误，但我很难找到哪些数据是问题的根源。

那么，除了重复之外，还有哪些其他因素会导致此错误？

任何帮助表示赞赏。

**编辑2：**

这是测试数据。我不能给你一个重现，因为正如我所说，我找不到哪些数据给我带来了问题。

```
CREATE TABLE #Products (idProduct INT, SKU VARCHAR(50), idManufacturer INT, Price FLOAT)
INSERT INTO #Products
SELECT '316992', '00015', '123', '0.52'
UNION SELECT '316993', '00037', '123', '0.52'
UNION SELECT '316994', '00039', '123', '0.52'
UNION SELECT '316995', '00115', '123', '0.52'
UNION SELECT '316996', '00137', '123', '0.52' 

CREATE TABLE #PriceUpdates (ProductUpdateID INT, SKU VARCHAR(50), idManufacturer INT, ColumnName VARCHAR(50), ColumnValue VARCHAR(50), idUser INT, BatchID INT)
INSERT INTO #PriceUpdates
SELECT '1837', '00015', '123', 'Price', '0.99', '13', '1929'
UNION SELECT '1838', '00037', '123', 'Price', '0.99', '13', '1929'
UNION SELECT '1839', '00039', '123', 'Price', '0.99', '13', '1929'
UNION SELECT '1840', '00115', '123', 'Price', '0.99', '13', '1929'
UNION SELECT '1841', '00137', '123', 'Price', '0.99', '13', '1929' 

UPDATE
    p
SET
    price = pu.ColumnValue 
FROM
    #Products p
    JOIN #priceupdates pu ON p.sku = pu.sku AND p.idManufacturer = pu.idManufacturer

 DROP TABLE #Products
 DROP TABLE #PriceUpdates 
```

**更新！**

我*想*我找到了罪魁祸首。当我从 priceupdates 表中排除特定记录时，它可以工作！但我仍然不知道那张唱片有什么问题。我从这里去哪里？注意：当我*只*包含该记录时，更新也有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T17:21:06.943

我的评论原来是一个答案：

我在您的代码中没有看到任何`MERGE`声明。`MERGE`使用时错误是否真的调用它`UPDATE`？难以置信。另外，`UPDATEs`根本没有那个消息。该消息清楚地提到了一个`MERGE`和一个`ON`子句。

这`UPDATE`不是问题。看看别处。

# java - 指定要在折线图中显示的数据百分比

> ID：15975055
> 
> 赞同：0
> 
> 时间：2013-04-12T15:16:41.707
> 
> 标签：java, javafx, linechart

有没有办法指定应该在 JavaFX 的 LineChart 上显示多少（百分比）数据？对于 x 轴，我可以向 LineChart 添加更少的数据，但是这对 y 轴如何工作？

谢谢你，马蒂亚斯

# c# - Asp.net 使用 AutoGenerateEditButton 更新 GridView

> ID：15975059
> 
> 赞同：0
> 
> 时间：2013-04-12T15:16:56.203
> 
> 标签：c#, asp.net, datagrid, insert

如何使用 AutoGenerateEditButton 更新我的 gridview 表（绑定了一个数据集-从 sql 数据库中检索的数据集）

![在此处输入图像描述](https://i.stack.imgur.com/KOaa6.png)

--删除了问题中的Broken代码，将Fixed代码放入Answer--

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:08:05.447

要获取更新行的值，请将其添加到“RowUpdating”事件处理程序

protected void grdViewDetails_RowUpdating（对象发送者，GridViewUpdateEventArgs e）{

```
 GridViewRow row = (GridViewRow)grdViewDetails.Rows[e.RowIndex];

        foreach (Control item in row.Controls)
        {
            if (item.Controls[0] is TextBox)
            {
                TextBox textbox = (TextBox)item.Controls[0];
                string x = textbox.Text; //theres your value you can do stuff with
            }
            if (item.Controls[0] is Label)
            {
                Label mylabel = (Label)item;
                //do stuff - just do the same as the textbox
            }
        } 
```

}

并在“RowEditing”事件处理程序中

```
 protected void grdViewDetails_RowEditing1(object sender, GridViewEditEventArgs e)
        {
            grdViewDetails.EditIndex = e.NewEditIndex;
            //e.newedit index:- will be provide index of row for which edit button is selected
            grdViewDetails.DataSource = yourdatasource //mine was a datset
            grdViewDetails.DataBind();
        } 
```

# sql - SQL 查询：同一列的不同值重复 3 次

> ID：15975060
> 
> 赞同：1
> 
> 时间：2013-04-12T15:17:01.173
> 
> 标签：sql

我正在处理一个查询，以找到在仓库之间转移的最佳数量。在单个查询中，我试图获取项目代码、项目的重新订购点`WarehouseA`、项目的重新订购点以及两个和`WarehouseB`的重新订购点的总和。`WarehouseA``WarehouseB`

我使用的是 GUI，所以我尝试调用 Item Code 字段和 ROP（Reorder Point）字段 3 次。

```
SELECT ItemCode, ROP, ROP, ROP
FROM Inventory 
```

有没有一种方法可以为每个字段以独特的方式过滤 3 个 ROP 字段？例如，第一个 ROP 字段显示重新排序点 where `whse=A`，第二个 ROP 字段显示重新排序点 where `whse=B`，第三个重新排序点字段显示两者的总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:25:04.807

使用内联选择：

```
SELECT
    ItemCode,
    (SELECT ii.ROP FROM Inventory ii WHERE ii.ItemCode = oi.ItemCode AND ii.whse='A') AS ROPA,
    (SELECT ii.ROP FROM Inventory ii WHERE ii.ItemCode = oi.ItemCode AND ii.whse='B') AS ROPB,
    (SELECT ii.ROP FROM Inventory ii WHERE ii.ItemCode = oi.ItemCode AND ii.whse='C') AS ROPC
FROM Inventory oi 
```

以上假设这`ItemCode`是关键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:31:02.197

如果我正确理解了您的问题：

```
SELECT
    I.ItemCode, 
    WHA.ROP AS A_ROP,
    WHB.ROP AS B_ROP,
    ISNULL(WHA.ROP,0) + ISNULL(WHB.ROP,0) AS Total_ROP
FROM
    Inventory AS I
LEFT JOIN
    WarehouseA AS WHA ON (WHA.ItemCode = I.ItemCode)
LEFT JOIN
    WarehouseB AS WHB ON (WHB.ItemCode = I.ItemCode) 
```

# dns - awstats 使用哪个名称服务器？

> ID：15975061
> 
> 赞同：0
> 
> 时间：2013-04-12T15:17:01.440
> 
> 标签：dns, awstats, nameservers

我正在使用 awstats 为我的网络服务器生成统计信息。但有时我得到未解析的 IP，我知道我的名称服务器知道这些 IP 地址。是否可以更改 awstats 使用的名称服务器？

我希望你能给我一个提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:35:17.147

Awstats 将使用为您正在运行日志分析的机器配置的递归名称服务器。

但是 IP 地址的解析（称为“反向 DNS”）是 IP 块所有者经常滥用的东西。

如果您认为可以更好地解析地址，您可以禁用 AWStats DNS 查找并提供预处理日志，其中 IP 替换为您生成的某种字符串......

我不是AWStats的用户，我发现的一些信息可能已经过时了：

*   [http://awstats.sourceforge.net/docs/awstats_faq.html#DNS](http://awstats.sourceforge.net/docs/awstats_faq.html#DNS)
*   另请参阅进行解析的程序示例 logresolvemerge

# c# - 如何在 C# 中分配委托扩展方法？

> ID：15975065
> 
> 赞同：3
> 
> 时间：2013-04-12T15:17:14.957
> 
> 标签：c#, delegates, extension-methods

我想使用提供的频率获取两个端点之间的所有日期。所以我的方法基于这个简单的代码：

```
for (DateTime date = startDate; date <= endDate; date = date.AddDays(1))
            datesBetween.Add(date); 
```

现在，我有时需要添加天数（如上）、添加月数或添加年数`FrequencyEnum`

所以我可以使用 a`switch`并重复代码 3 次以供我使用，但我想知道我是否可以分配一个委托扩展方法而不是`.AddDays`or `.AddMonths`or`.AddYears`

相反，我想做这样的事情：

```
for (DateTime date = startDate; date <= endDate; date = date.AddFrequency)
            datesBetween.Add(date); 
```

代表在哪里`.AddFrequency`定义我的频率所需的扩展方法。

或者，我**不能**使用扩展方法，而只是使用带有日期参数并根据需要返回的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:21:42.410

我想你想要一个`Func<DateTime, DateTime>`

```
Func<DateTime, DateTime> updater = d => d.AddFrequency(Frequency.Month);

for (DateTime date = startDate; date <= endDate; date = updater(date))
     datesBetween.Add(date); 
```

当然，在您的真实代码中，您的方法可能会接受委托作为参数，而不是自行初始化它。

也就是说，使用[moreLinq](https://code.google.com/p/morelinq/)，您可以这样做：

```
var datesBetween = startDate.Generate(date => date.AddDays(1))
                            .TakeWhile(date => date <= endDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:19:35.403

不，你不能那样做。扩展方法必须是静态类中的静态方法。

但是您可以编写一个`AddFrequency`采用频率和计数的扩展方法。所以你可以写：

```
date = date.AddFrequency(FrequencyEnum.Months, 3) 
```

# c# - SQL Server STDistance 的 .NET 等效项

> ID：15975066
> 
> 赞同：3
> 
> 时间：2013-04-12T15:17:18.487
> 
> 标签：c#, .net, sql-server, sqlgeography, geographic-distance

我可以使用以下 SQL 来计算固定位置与数据库中场地位置之间的距离。

```
SELECT Location.STDistance(geography::Point(51, -2, 4326)) * 0.00062137119 FROM Venues 
```

请注意，返回的距离以英里为单位，并且 Location 字段是地理类型。

我想知道 .NET 中的 this 等效项是什么，它将返回相同的值。此方法将具有以下签名：

```
public static double Distance(location1Latitude, location1Longitude, location2Latitude, location2Longitude) {
    return ...;
} 
```

我知道我可以在 .NET 中调用数据库方法，但我不想这样做。我希望有一个公式来计算距离。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T15:23:52.670

我相信您可以简单地添加`Microsoft.SqlServer.Types.dll`为引用，然后[`SqlGeometry`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.types.sqlgeometry.aspx)像使用任何其他 .NET 类型一样使用该类型，包括调用该[`STDistance`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.types.sqlgeometry.stdistance.aspx)方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T15:19:33.533

您需要计算[地理距离](http://en.wikipedia.org/wiki/Geographical_distance)才能手动计算距离。有[许多不同的技术和公式可以做到这一点](http://en.wikipedia.org/wiki/Geographical_distance#Flat-surface_formulae)，每个都有不同的基本假设（即：球形地球、椭圆形地球等）。

一个常见的选项是半正弦公式，[此处提供了 C# 实现](https://stackoverflow.com/a/6545031/65358)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:38:56.540

这[在这里得到了很好的解释](http://www.west-wind.com/weblog/posts/2012/Jun/21/Basic-Spatial-Data-with-SQL-Server-and-Entity-Framework-50)。不久：使用 EF5（更具体地说，使用 .net 4.5）Microsoft 包含了[DbGeography](http://msdn.microsoft.com/en-us/library/system.data.spatial.dbgeography%28v=vs.110%29.aspx)类型。假设您已经有一堆纬度/经度，然后您可以使用以下帮助器轻松创建 DbGeography 对象：

```
public static DbGeography CreatePoint(double latitude, double longitude)
{
    var text = string.Format(CultureInfo.InvariantCulture.NumberFormat,
                             "POINT({0} {1})", longitude, latitude);
    // 4326 is most common coordinate system used by GPS/Maps
    return DbGeography.PointFromText(text, 4326);
} 
```

一旦获得两个或更多点（DbGeography），您就可以计算它们之间的[距离](http://msdn.microsoft.com/en-us/library/system.data.spatial.dbgeography.distance.aspx)：

```
var distance = point1.Distance(point2) 
```

# php - 阻止用户查看需要会话的页面

> ID：15975069
> 
> 赞同：5
> 
> 时间：2013-04-12T15:17:26.943
> 
> 标签：php

我有一个登录页面，然后我创建了一个指向名为 logout 的页面的链接，它包含以下代码：

注销.php

```
<?php

session_unset();
session_destroy();
header("Location:");

?> 
```

然而，当我注销然后点击后退按钮时，它会带我回来。如何更改它，以便在显示上一页之前要求您再次登录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:20:57.280

在您要返回的页面（或与此相关的任何页面）上，您需要检查用户是否已登录（即具有有效会话），如果没有，则将其重定向到登录页面。

此外，向这段特定的代码添加一些无缓存标头可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:21:33.770

您尚未设置任何要重定向到的位置。

应该：

```
 header("Location:http://example.com/login.php"); 
```

这样，当您注销时，它会将浏览器重定向到 login.php。

**编辑：**

此外，将会话验证条件添加到您的主页会有所帮助。

像这样的东西：

```
 if(!isset($_SESSION))
 {
     header("Location:http://example.com/login.php");
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:30:28.433

如果用户已登录，请尝试检查每个页面

```
if (!$_SESSION['logged_in']) { //you would have to make $_SESSION['logged_in'] when they login
header('location: login.php');
} 
```

所有这一切都是说如果 $_SESSION['logged_in'] 未设置将它们重定向到登录页面。

您还需要进行其他检查以确保其安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T15:23:56.683

在加载每个页面（或至少每个 PRIVATE/RESERVED 页面）之前，您应该检查 $_SESSION 变量以确定用户是否合法登录。

如果您不执行此检查，那么每个人都可以访问您网站的每个页面，只要他们有指向它的直接链接。他们可能会看到页面的损坏版本，但仍然授予未登录用户访问权限。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T15:25:56.497

```
<?php
    session_start();
    session_unset();
    session_destroy();
    session_write_close();
    setcookie(session_name(),'',0,'/');
    session_regenerate_id(true);
?> 
```

来源：[手册](http://php.net/manual/en/function.session-unset.php)

# c# - Linq 用整数列表连接对象列表

> ID：15975075
> 
> 赞同：2
> 
> 时间：2013-04-12T15:17:45.297
> 
> 标签：c#, asp.net, asp.net-mvc-3, linq, lambda

我有一个场景如下：

```
 Event:

public int EventId { get; set; }
public string EventName { get; set;}

MediaGallery:

public int MediaGalleryID { get; set; }
public string Name { get; set; }
public List<int> EventId { get; set;}

List<Event> eventList = query.Event.ToList();    
List<MediaGallery> mediaGallreis = query.MediaGallery.ToList(); 
```

我需要检索在 MediaGallery 的 eventID 列表中存在 eventId 的 eventList。谁能给我建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:19:04.920

尝试以下

```
var list = eventList
  .Where(e => mediaGalleries.Any(mg => mg.EventId.Any(id => id == e.EventId))); 
```

如果`mediaGalleries`or`MediaGallery::EventId`列表足够大，您可能需要考虑另一种方法。创建一组可能的值并直接查询该组

```
var idSet = new HashSet(mediaGelleries.SelectMany(x => x.EventId));
var list = eventList.Where(e => idSet.Contains(e.EventId)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:42:45.850

对于这个特定的任务，我认为查询理解语法是最合适的。如果我正确回答了您的问题，则您需要在任何 MediaQuery 的 EventId 列表中具有 id 的所有事件。这是一个应该有帮助的 Linq 查询：

```
 var eventList = 
         (from mediaGallery in query.MediaGallery
          from eventId in mediaGallery.EventId
          join event in query.Event
          on eventId equals event.EventId
          select event)
         .Distinct()
         .ToList(); 
```

它不像其他选项那样简洁，但我想将其作为替代方案。

请注意使用 double from 语法，这对 SQL 用户来说可能看起来很奇怪。如果不首选此语法，则以下查询也应该有效：

```
 var eventList = 
         (from event in query.Event
          where query.MediaGallery.Any(mediaGallery =>
            mediaGallery.EventId.Contains(event.EventId))
          select event)
         .ToList(); 
```

我更喜欢第一个选项，因为此代码在语法上很复杂，并且需要了解查询理解语法（from、where、select）、链接语法方法（Any）以及支持（包含）的事实。

当然，所有这些复杂性都可以用其他代码替换，因此请选择对您来说最自然的选项。在我看来，即使是中等复杂的查询，我更喜欢查询理解语法。

# javascript - onfocus时如何更改文本框的背景颜色？

> ID：15975078
> 
> 赞同：1
> 
> 时间：2013-04-12T15:17:48.933
> 
> 标签：javascript, html, css, javascript-events

我试过这段代码，但它不起作用..当我聚焦文本框时它显示错误

```
 function ChangeBgColor(obj, evt) 
    { 
            if(evt.type=="focus") 
                style.background ="lightgrey";
            else if(evt.type=="blur") 
            {
               style.background="white";
            }          
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:20:33.320

此任务不需要 JavaScript，只需使用 css（`:focus`从 IE8 开始支持）

[https://developer.mozilla.org/en-US/docs/CSS/:focus](https://developer.mozilla.org/en-US/docs/CSS/:focus)

```
input { background: lightgray; }
input:focus { background: white; } 
```

* * *

只有当这种效果也绝对需要时，才能`< IE8`使用 JS（正确包装在条件注释中），但即使在这种情况下，也建议不要使用逻辑风格：例如

```
function ChangeBgColor(obj, evt) { 
    obj.className = (evt.type === "focus") ? "focus" : "";
} 
```

并使用这种风格

```
 input { background: lightgray; }

 input:focus, 
 input.focus { background: white; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:19:46.353

`obj.style.background = "#C8C8C8";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:34:05.043

是的，你应该试试这个 javascript 代码来改变这个元素的背景颜色：

 `````
 var obj = document.getElementById("yourId");
  obj.onfocus = function() {
    obj.style.backgroundColor = 'red';
  } 
```` 

`现在你可以改变你想要的任何颜色`

 `* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T15:26:46.737

是什么`style`？您尚未在上面的代码中的任何地方定义它：

```
function ChangeBgColor(obj, evt) 
{ 
    if(evt.type=="focus") 
        style.background ="lightgrey";  //<--what is style?
    else if(evt.type=="blur") 
    {
        style.background="white";
    }          
} 
```

我猜你想要类似的东西

```
obj.style.background ="lightgrey"; 
```

在上面的代码中，简化了

```
function ChangeBgColor(obj, evt) 
{ 
    obj.style.background = (evt.type=="focus") ? "lightgrey" : "white";
} 
```

最好的答案是使用纯 CSS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T15:19:36.327

尝试用 jQuery 来做。

```
$('#div').on('focus', function() {
    $(this).css({background:'blue'});
}); 
`````

# sql - SQL Server 2008 SELECT连接和特定字符的LEFT

> ID：15975085
> 
> 赞同：0
> 
> 时间：2013-04-12T15:18:08.110
> 
> 标签：sql, sql-server, sql-server-2008

我有以下代码将一系列文本连接到一个字段。此查询中的每个命中都有数据跟随`^`。我只想显示 the 的每个 LEFT`^`而不是它`^`本身。这可能吗？

这是我的代码...

```
SELECT Cast(Cast(((SELECT *
   FROM   (SELECT(SELECT cddesc + ' ' AS [text()]
   FROM   costdesc
      WHERE  costdesc.cindex = c.cindex
      ORDER  BY cdline
      FOR xml path('')) AS cddesc) cddesc)) AS
   NVARCHAR(max)) AS NTEXT) AS cddesc

FROM Table
WHERE Blah blah 
```

任何帮助将不胜感激。

-缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:50:06.953

不确定你的意思是每个`cddesc`是`'^something'`或`'something^'`...

删除第一个或最后一个字符的方法：

`select substring('abcdef',2,8000)`= `'bcdef'`
`select substring('abcdef',1,len('abcdef')-1)`=`'abcde'`

或者如果它在中间

`select substring('ab^cd',CharIndex('^', 'ab^cd')+1,8000)`= `'cd'`
`select substring('ab^cd',1,CharIndex('^', 'ab^cd')-1)`=`'ab'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:52:01.837

所以像这样的东西？

```
DECLARE @TestString VARCHAR(100) = 'This is ^a test';

-- get everything to the left of ^   
SELECT SUBSTRING(@TestString,1,CHARINDEX('^', @TestString)-1);

-- get everything to the right of ^ 
SELECT SUBSTRING(@TestString,CHARINDEX('^', @TestString)+1,LEN(@TestSTring)); 
```

导致：

`This is`

`a test`

# internet-explorer - Internet Explorer 8+ 上控制台日志记录的奇怪行为

> ID：15975087
> 
> 赞同：0
> 
> 时间：2013-04-12T15:18:11.970
> 
> 标签：internet-explorer, cookies, internet-explorer-8, session-cookies, windows-console

我们在 Internet Explorer 8 及更高版本中遇到了一个奇怪的问题。

我们的登录过程是使用 Javascript 处理的，该 Javascript 使用 AJAX 调用将隐藏参数传递给底层 servlet。

```
$j(document).ready(function() {
    console.log('loaded');
    $j(".show-login").click( function() {
        var id=this.id.split("_",1);
        $j(".options-drop-down").hide();
        $j(".all-options-buttons").removeClass("xyz-options-button-selected");
        $j(".all-options-buttons").addClass("xyz-options-button");
        $j("#"+id+"_login_options").show();
        $j("#"+this.id).removeClass("xyz-options-button");
        $j("#"+this.id).addClass("xyz-options-button-selected");
    }); 
}); 
```

由于无效登录，每次后续登录都会将我们抛出，变量在 servlet 中正确接收，但不知何故会话值不正确。

代码适用于 Firefox、Chrome 和 Safari。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:24:43.627

在尝试了很多方法来观察生成的随机 JSESSION id 之后，我们尝试清理 IE cookie、IE 历史记录、IE 临时文件，但没有采取任何措施来解决它。

我们观察到，每当我们打开 Internet Explorer 开发人员工具 (F12) 时，脚本都运行良好。

最后我们尝试从 javascript 中删除以下行

```
console.log('loaded'); 
```

并且脚本开始正常工作。

所以总结一下：

**当 Internet Explorer 开发人员工具未运行时，在控制台对象上调用任何方法都会干扰正常的脚本执行**

# xml - XmlReader 循环通过节点

> ID：15975092
> 
> 赞同：1
> 
> 时间：2013-04-12T15:18:32.543
> 
> 标签：xml, vb.net, parsing, xml-parsing, xmlreader

嘿，我有以下代码：

```
 Using reader As XmlReader = XmlReader.Create(New StringReader(xmlString))
        reader.ReadToFollowing("GridChannel")
        Dim Channel As String = reader.GetAttribute("Channel")
        Dim DisplayName As String = reader.GetAttribute("DisplayName")

        reader.ReadToFollowing("Airings")
        reader.ReadToFollowing("GridAiring")

        Dim Title As String = reader.GetAttribute("Title")
        Dim EpisodeTitle As String = reader.GetAttribute("EpisodeTitle")
        Dim AiringTDurationime As String = reader.GetAttribute("AiringTDurationime")
        Dim isHD As Boolean = Convert.ToBoolean(reader.GetAttribute("isHD"))
        Dim TVRating As String = reader.GetAttribute("TVRating")
    End Using 
```

该代码在上面运行良好，但我在循环播放**Airings**部分时遇到问题。

该部分的 XML 如下所示：

```
 <Airings>
        <GridAiring ProgramId="35951" SeriesId="3490" Title="Matlock" EpisodeTitle="Santa Claus" AiringTime="2013-04-12T14:00:00Z" Duration="60" Color="Color" AiringType="Unknown" CC="true" LetterBox="false" Stereo="false" HD="false" SAP="false" TVRating="TV-PG" Dolby="false" DSS="false" HDLevel="HD Level Unknown" DVS="false" Category="Other" Subcategory="drama" Sports="false"/>
        <GridAiring ProgramId="828869" SeriesId="1409" Title="In the Heat of the Night" EpisodeTitle="Hatton's Turn" AiringTime="2013-04-12T15:00:00Z" Duration="60" Color="Color" AiringType="Unknown" CC="true" LetterBox="false" Stereo="false" HD="false" SAP="false" TVRating="TV-PG@V" Dolby="false" DSS="false" HDLevel="HD Level Unknown" DVS="false" Category="Other" Subcategory="crime drama" Sports="false"/>
        <GridAiring ProgramId="978338" SeriesId="1409" Title="In the Heat of the Night" EpisodeTitle="Hatton's Turn" AiringTime="2013-04-12T16:00:00Z" Duration="60" Color="Color" AiringType="Unknown" CC="true" LetterBox="false" Stereo="false" HD="false" SAP="false" TVRating="TV-PG@V" Dolby="false" DSS="false" HDLevel="HD Level Unknown" DVS="false" Category="Other" Subcategory="crime drama" Sports="false"/>
        <GridAiring ProgramId="4210626" Title="WGN Midday News" AiringTime="2013-04-12T17:00:00Z" Duration="60" Color="Color" AiringType="New" CC="true" LetterBox="false" Stereo="true" HD="false" SAP="false" TVRating="None" Dolby="false" DSS="false" HDLevel="HD Level Unknown" DVS="false" Category="News" Subcategory="newscast" Sports="false"/>
        <GridAiring ProgramId="878716" SeriesId="1028666" Title="Walker, Texas Ranger" EpisodeTitle="El Coyote, Part 2" AiringTime="2013-04-12T18:00:00Z" Duration="60" Color="Color" AiringType="Unknown" CC="true" LetterBox="false" Stereo="true" HD="false" SAP="false" TVRating="TV-14@V" Dolby="false" DSS="false" HDLevel="HD Level Unknown" DVS="false" Category="Other" Subcategory="crime drama" Sports="false"/>
    </Airings> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:40:21.420

不进入 XML 序列化，为什么不使用[XmlReader.GetAttribute](http://msdn.microsoft.com/en-us/library/sxy2cd1w.aspx)呢？

然后，您应该能够将代码缩减为：

```
Dim ServiceId As String = reader.GetAttribute("ServiceId") 
```

等等，它更具可读性，更易于维护。

**编辑：**要循环通过 XML，我更喜欢这种方式：

```
Dim Airings As XDocument = XDocument.Parse(xmlString)
For Each GridAiring As XElement In Airings.Root.Elements
  Dim ProgramId As String = GridAiring.Attribute("ProgramId").Value
  'read other properties here
Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:49:35.137

好的循环你这样做：

```
While reader.ReadToFollowing("GridAiring")
    Dim Title As String = reader.GetAttribute("Title")
    Dim EpisodeTitle As String = reader.GetAttribute("EpisodeTitle")
    Dim AiringTDurationime As String = reader.GetAttribute("AiringTDurationime")
    Dim isHD As Boolean = Convert.ToBoolean(reader.GetAttribute("isHD"))
    Dim TVRating As String = reader.GetAttribute("TVRating")
End While 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T10:33:34.007

使用 LINQ，您将获得更好的性能，而不是循环。这是一个将 ProgramId、SeriesId 和 Title 拉入可枚举的示例。

```
Dim document As XDocument = XDocument.Load("c:\tmp\test.xml")
Dim airings = From i In document.Descendants("Airings")
              Select New With
                     {Key .ProgramId = i.Attribute("ProgramId").Value,
                      Key .SeriesId = i.Attribute("SeriesId").Value,
                      Key .Title = i.Attribute("Title").Value} 
```

然后，您可以遍历可枚举。一个小例子，只是在控制台中打印结果

```
For Each a In airings
    Console.WriteLine(String.Format("{0},{1},{2}", a.ProgramId, a.SeriesId, a.Title))
    Console.Read()
Next 
```

这个想法当然是你可以调用的每个项目`.ProgramId`，`.SeriesId`等等以获得价值

如果您想添加检查以确保 Airing 没有缺少属性并防止可能的异常，您可以在选择中添加检查以确保它存在，如下所示。

```
Dim document As XDocument = XDocument.Load("c:\tmp\test.xml")
Dim airings = From i In document.Descendants("Airings")
              Where i.Attribute("ProgramId") IsNot Nothing _
              And i.Attribute("SeriesId") IsNot Nothing _
              And i.Attribute("Title") IsNot Nothing
              Select New With
                     {Key .ProgramId = i.Attribute("ProgramId").Value,
                      Key .SeriesId = i.Attribute("SeriesId").Value,
                      Key .Title = i.Attribute("Title").Value} 
```

# solr - SolrCloud 与 Solr 主从复制

> ID：15975093
> 
> 赞同：5
> 
> 时间：2013-04-12T15:18:33.353
> 
> 标签：solr, solrcloud

本周我遇到了 Solr 索引的问题：http: [//lucene.472066.n3.nabble.com/corrupted-index-in-slave-td4054769.html](http://lucene.472066.n3.nabble.com/corrupted-index-in-slave-td4054769.html)，

今天，几乎每个请求都开始不断发生该错误，我创建了一个 JIRA 问题，因为我认为这是一个错误[https://issues.apache.org/jira/browse/SOLR-4707](https://issues.apache.org/jira/browse/SOLR-4707)

如您所见，最后是由于 Solr 主从复制失败，现在我不知道我们是否应该考虑迁移到 SolrCloud，因为 Solr 主从复制似乎不适合我们要求：

*   索引大小：~2000 万份文档，~9GB
*   ~1200 次更新/分钟
*   ~10000 次查询/分钟（分布在 2 个从属设备上）MoreLikeThis、RealTimeGet、TermVectorComponent、SearchHandler

如果有人能帮我回答这些问题，我会非常感谢：

*   迁移到 SolrCloud 是否可取？它会对复制性能产生影响吗？
*   在那种情况下，什么会有更好的性能？在每个服务器中维护索引的副本，还是使用分片服务器？
*   您建议使用多少分片和副本来确保高可用性？

亲切的问候，

胜利者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-28T09:39:27.607

好吧，回答你所有的问题取决于你到底想从 solrcloud 得到什么。

*   是的，建议迁移到 solrcloud，因为它提供了高可用性、可扩展性和近乎实时的搜索以及自动**热复制**。但是这些功能是以稍微降低性能为代价的（即使在配置良好的集群中也需要注意）。
*   我建议您应该使用共享配置来允许 solr 为您维护索引数据（我相信如果您这样做，您会给 TechOps 人带来微笑）。这也将减少人为错误和资源需求。
*   对您最后一个问题的回答完全取决于您的云部署。您应该尝试使用 2 分片 2 副本配置，然后创建测试部署以确保它满足您的需求。如果没有，请尝试使用分片和副本计数的不同组合，直到您得到什么你想要（我知道它的痛苦！）。

最后不要忘记估计你的未来增长（未来几年你将向集群添加多少数据），并记住你应该决定分片和副本

# sql - SQL 命令搜索单个词与两个

> ID：15975096
> 
> 赞同：0
> 
> 时间：2013-04-12T15:18:34.910
> 
> 标签：sql, joomla, spam

我正在尝试清理多年未更新的 Joomla DB（客户爱他们恨他们）。我要将数据迁移到 3.0 版本，但在此之前，我想尽我所能清理它。

无论如何...我正在尝试找出正确的 SQL 命令来选择（稍后我将删除）jos_users 表中名为“name”的列。看起来大多数访问该站点的恶意机器人都输入了一个单词的名称，而真实用户所做的是输入名字和姓氏。

我没有高兴地使用过这个命令。

```
select from jos_users where not (instr(name, ' ')) 
```

现在我被告知要使用引号，但这也不起作用。

```
select from jos_users where not (instr(name, " ")) 
```

我已经使用了所有可能的变体，并在谷歌上寻找了一个没有成功的解决方案。

任何帮助都会非常有帮助。

附带说明一下，我从一篇深入探讨 Joomla 以及如何清理垃圾邮件帐户的精彩文章中得到了这个命令。你可以在下面找到它。

[http://www.cyprich.com/2010/11/12/how-to-delete-spam-accounts-in-joomla/](http://www.cyprich.com/2010/11/12/how-to-delete-spam-accounts-in-joomla/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:29:42.937

如果我理解正确，您的要求是找到没有空格的名称，所以：

```
SELECT * FROM jos_users WHERE name NOT LIKE '% %'; 
```

# sql - 填充临时表后计算平均值

> ID：15975101
> 
> 赞同：1
> 
> 时间：2013-04-12T15:18:38.337
> 
> 标签：sql, sql-server, sql-server-2008

我的任务是计算客户坚持使用我们的平均时间长度。（特别是从他们成为客户之日到他们最后一次下订单的时间。）

我不是 100% 确定我这样做是否正确，但我的想法是收集我们将客户输入数据库的日期，然后前往订单表并获取他们最近的订单日期，将它们转储到临时表，然后计算出这两个日期之间的时间长度，然后根据该数字计算平均值。

（我还必须做一些其他摇摆不定的事情，但这是让我很生气的事情）这样做的最终目标是能够说“平均而言，我们的客户会坚持使用我们 4 年零 3 个月。” （或任何数据显示的内容。）

```
 SELECT * INTO #AvgTable
      FROM(
         SELECT DISTINCT (c.CustNumber) AS [CustomerNumber]
         , COALESCE(convert( VARCHAR(10),c.OrgEnrollDate,101),'') AS [StartDate]
         , COALESCE(CONVERT(VARCHAR(10),MAX(co.OrderDate),101),'')AS [EndDate]
          ,DATEDIFF(DD,c.OrgEnrollDate, co.OrderDate) as [LengthOfTime]

         FROM dbo.Customer c
         JOIN dbo.CustomerOrder co ON c.ID = co.CustomerID

         WHERE c.Archived = 0
         AND co.Archived =0
         AND c.OrgEnrollDate IS NOT NULL
         AND co.OrderDate IS NOT NULL

         GROUP BY c.CustNumber
         , co.OrderDate 2
         )

     --This is where I start falling apart

      Select AVG[LengthofTime]

      From #AvgTable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:31:57.237

如果理解正确，那就试试吧

```
SELECT AVG(DATEDIFF(dd, StartDate, EndDate)) AvgTime
  FROM #AvgTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:10:35.923

我的猜测是，由于您将数据存储在临时表中，因此 datediff 的整数结果被隐式转换回日期时间（您无法对其进行平均）。

不要将平均值存储在临时表中（甚至没有临时表，但这是完全不同的对话）。只需在您的选择中进行差异化。

# django - django rest框架在nginx后面但不直接给出403

> ID：15975106
> 
> 赞同：7
> 
> 时间：2013-04-12T15:18:49.020
> 
> 标签：django, nginx, django-rest-framework

使用 django-rest-framework。在 nginx 后面的生产环境中运行时出现 HTTP 403 错误。当我调用从 APIView 继承以支持 GET 操作的特定视图时，我得到：

```
{"detail": "Invalid username/password"} 
```

但是......我只在浏览器中得到这个。当我对同一个 URL 使用 curl 时，我不明白。无论是直接点击 URL，还是在 Chrome 和 Firefox 中通过 AJAX 加载 URL，我都会收到此错误。

如果我首先使用管理员帐户通过 Django Admin 登录，我不会收到错误消息。

另外，我只知道这是我从 nginx 后面运行的。如果我使用 Django 开发服务器或 gunicorn 运行，并直接点击端口，我很好，并且可以愉快地匿名点击 URL。如果我把 nginx 放在前面，转发到同一个 gunicorn/runserver 我得到这个错误。

也许这与我的 nginx proxy_pass 设置有关？

```
location / {
    proxy_pass http://127.0.0.1:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
} 
```

我正在运行 django rest 框架 2.2.6、Django 1.5 和 nginx 1.2.7。

我在休息框架中将限制设置为一个愚蠢的高数字，并查看了默认情况下似乎都是开放的权限（但也设置得如此明确）。

谁能指出我正确的方向？

谢谢！

卢多。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-03-26T14:02:06.973

就我而言，我在 Apache 中配置了 HTTP 基本身份验证，但在我的 Django 项目中没有。因为请求具有身份验证标头，所以 Django 应用程序认为我想使用它进行身份验证。我使用以下设置禁用了 Django REST 框架中的身份验证：

```
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': []
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-04T21:51:09.300

如果它是基本的 http 身份验证（如 @Sjoerd 的情况）并且您不需要 django 身份验证，您还可以`Authorization`在 nginx 反向代理配置中删除标头：

```
location / {
    ...
    proxy_set_header   Authorization    "";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-27T11:07:19.327

当您向基本身份验证后面的站点发送请求时，客户端（浏览器）会发送“授权”标头（应该如此 - 请参阅：维基百科上的“基本访问身份验证”）。

Ngnix 将其传递给您的应用程序。

Django Rest Framework 还支持：BasicAuthentication，默认开启。

```
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework.authentication.BasicAuthentication',
        'rest_framework.authentication.SessionAuthentication',
    )
} 
```

来源： http: [//www.django-rest-framework.org/api-guide/authentication/](http://www.django-rest-framework.org/api-guide/authentication/)

所以 django-rest-framework 看到“授权”标头，并认为应该是 django 用户的密码。

如果这样的用户不存在，那么你得到：“HTTP 401 Unauthorized”。见： http: [//www.django-rest-framework.org/api-guide/authentication/#basicauthentication](http://www.django-rest-framework.org/api-guide/authentication/#basicauthentication)

**灵魂**

选择一个：a) 添加到您的 ngnix 站点配置

```
location / {
    ...
    proxy_set_header    Authorization    "";
    ...
} 
```

所以 DRF 不会得到 'Authorization' 标头，所以它不会尝试匹配 django 用户。

在此更改之后 - 无法在 django 端使用基本身份验证（空头！

b）从 REST_FRAMEWORK 中删除“rest_framework.authentication.BasicAuthentication”（在您的 django 设置中）。

如果未定义，请添加到您的 django 设置：

```
REST_FRAMEWORK = {
    'DEFAULT_AUTHENTICATION_CLASSES': (
        'rest_framework.authentication.SessionAuthentication',
    )
} 
```

可能是最好的解决方案。

c) 使用您的 django 用户/密码进行基本身份验证？

真的吗？- 不！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:36:44.517

如果您启用了节流，您将获得 403 FORBIDDEN。基于这个问题：[https://github.com/tomchristie/django-rest-framework/issues/667](https://github.com/tomchristie/django-rest-framework/issues/667)，关闭 request.user/request.auth 的惰性评估可能是最好的做法。

# c# - 使用 Nito AsyncEx/AsyncInLine 引导异步 filePicker

> ID：15975119
> 
> 赞同：1
> 
> 时间：2013-04-12T15:19:26.500
> 
> 标签：c#, asynchronous, windows-store-apps, .net-4.5

我是异步世界的新手，我开始为 Windows 商店应用程序开发一些东西。我的问题是我需要等待 filepicker 的异步方法结束才能做其他事情。

所以我尝试搜索：“运行同步和异步方法 c#”，并在 Stephen Cleary 博客上结束。我尝试使用 Nito AsyncEx 来解决我的问题，但它不起作用，因为当我调用以下方法时它不会停止。

```
private List<Templates> classModel = new List<Templates>();
private void btnLoadClassExercises_Click(object sender, RoutedEventArgs e)
{
   AsyncContext.Run(() => loadFile());
   // do some stuff with classModel
}

private async void loadFile()
{
   FileOpenPicker openPicker = new FileOpenPicker();
   openPicker.FileTypeFilter.Add(".xml");
   var file = await openPicker.PickSingleFileAsync();
   classModel = xml.getControlClass(file);
 } 
```

在我的搜索过程中，我发现了一个名为 AsyncInLine 的类，它帮助我解决了一些类似的东西。但是在这种特殊情况下，我也没有工作。（[http://social.msdn.microsoft.com/Forums/en-US/async/thread/163ef755-ff7b-4ea5-b226-bbe8ef5f4796](http://social.msdn.microsoft.com/Forums/en-US/async/thread/163ef755-ff7b-4ea5-b226-bbe8ef5f4796)）

有人能帮我吗？

编辑＃1：

```
 //When i click on this button, it loads the file and all canvas are drawn on canvasSegment.
    private async void btnLoadClassExercises_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            if (classModel != null)
            {
                FileOpenPicker openPicker = new FileOpenPicker();
                openPicker.FileTypeFilter.Add(".xml");
                var file = await openPicker.PickSingleFileAsync();
                classModel = xml.getControlClass(file);

                auxCV = 0;
                if (editClass)
                    CanvasSegment.Children.Clear();
                foreach (Templates temp in classModel)
                    createCanvasSegment(temp);
                editClass = true;
            }
        }
        catch { }
    }

    // When i want to del some canvas, i put the removeCV = true and click on a canvas
    private void btnDelExercise_Click(object sender, RoutedEventArgs e)
    {
        classEdit = classModel; //To debuf if the classModel.Count = 0
        removeCV = true;
    }

    //When i click on a canvas, if removeCV = false, i draw the canvas on the main canvas(canvasClass), otherwise, i delete it. The problem is here. My modelClass.count here is = 0\.  
    private void cv_PointerPressed(Templates temp, Canvas cv)
    {
        if (!removeCV)
        {
            foreach (StackPanel sp in CanvasSegment.Children)
                foreach (Canvas c in sp.Children)
                    c.Opacity = 1;

            cv.Opacity = 0.8;
            canvasClass.Children.Clear();

            for (int i = 0; i < temp.Shapes.Count; i++)
            {
                //Do some stuff with points and draws on CanvasClass later
                rh.renderModel(new InkManager(), canvasClass, temp.Shapes[i], true, false);
            }
        }
        else
        {
            for (int i = 0; i <= classModel.Count; i++)
                if (classModel[i] == temp)
                {
                    classModel.RemoveAt(i);
                    break;
                }

            CanvasSegment.Children.Clear();
            auxCV = 0;
            foreach (Templates tempModel in classModel)
                createCanvasSegment(tempModel);
            removeCV = false;
        }
    }

    //I create a mini canvas foreach template in file.
    private void createCanvasSegment(Templates temp)
    {
        Thickness thk = new Thickness();
        thk.Right = 5;
        thk.Bottom = 5;
        if (temp != null || temp.Shapes != null)
        {
            if (auxCV == 0)
            {
                spcv = new StackPanel();
                spcv.Orientation = Orientation.Horizontal;
                spcv.Width = 540;
            }
            Canvas cv = new Canvas()
            {
                Background = new SolidColorBrush(Colors.Wheat),
                Name = temp.Template,
                Height = 73.125,
                Width = 130,
                Margin = thk,
            };

            cv.PointerPressed += (s, e) => cv_PointerPressed(temp, cv);
            foreach (ShapePoints tempshapePoints in temp.Shapes)
            {
                ShapePoints tempS = tempShapePoints;
                if (!removeCV)
                {
                    //Do some stuff with points
                }
                rh.renderModel(new InkManager(), cv, tempS, true, false);
            }

            auxCV++;
                spcv.Children.Add(cv);
            if (auxCV == 1)
                CanvasSegment.Children.Add(spcv);
            else if (auxCV == 4)
                auxCV = 0;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:23:25.483

由于这已经在 UI 线程的上下文中，因此不需要`AsyncContext.Run`- 只需使用：

```
private async void btnLoadClassExercises_Click(object sender, RoutedEventArgs e)
{
   await loadFile());
   // do some stuff with classModel
}

// Make this task returning (or even return the list instead of setting a local)
private async Task loadFile()
{
   FileOpenPicker openPicker = new FileOpenPicker();
   openPicker.FileTypeFilter.Add(".xml");
   var file = await openPicker.PickSingleFileAsync();
   classModel = xml.getControlClass(file);
 } 
```

# ruby-on-rails - 在 Rails3 的文件系统上缓存 .com 文件

> ID：15975120
> 
> 赞同：0
> 
> 时间：2013-04-12T15:19:27.903
> 
> 标签：ruby-on-rails

我有一条类似“ [http://example.com/sites/example.com](http://example.com/sites/example.com) ” 的路线`get "/sites/:domainname", :to => 'controller#action', :constraints => { :domainname => /.*/ }`

它一直有效，直到生成缓存页面 public/sites/example.com（而不是 public/sites/example.com.html），此时它要求用户保存一个 .com 文件。我如何将缓存页面保存为，例如 public/sites/example.com.html？或者可能有不同的解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:02:28.070

当前的解决方法是在路由中强制使用 html 扩展：

`get "/sites/:domainname.html", :to => "sites#show", :as => :site, :constraints => { :domainname => /.*/ }`

这导致`public/sites/example.com.html`被保存在缓存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:41:12.183

查看源代码，[`caches_page`](http://api.rubyonrails.org/classes/ActionController/Caching/Pages/ClassMethods.html)自动假定缓存文件的扩展名应该是它在路径包含句点 ( `.`) 时找到的“扩展名”。这个逻辑实际上是另一种方法，`page_cache_file`：

```
 def page_cache_file(path, extension)
        name = (path.empty? || path == "/") ? "/index" : URI.parser.unescape(path.chomp('/'))
        unless (name.split('/').last || name).include? '.'
          name << (extension || self.page_cache_extension)
        end
        return name
      end 
```

如果需要，您可能会覆盖此方法以在控制器中稍有不同的操作，或者使用默认的 ActionController::Base 实现。这是一个可能的例子：

```
 class MyController < ApplicationController
    class << self
      private

      # override the ActionController method
      def page_cache_file(path, extension)
        # use the default logic unless this is a /sites/:domainname request
        # (may need to tweak the regex)
        super unless path =~ %r{/sites/.*}

        # otherwise customize logic to always include the extension
        name = (path.empty? || path == "/") ? "/index" : URI.parser.unescape(path.chomp('/'))
        name << (extension || self.page_cache_extension)
        return name
      end
    end
  end 
```

# plot - 3D 绘图的链接旋转

> ID：15975125
> 
> 赞同：1
> 
> 时间：2013-04-12T15:19:33.437
> 
> 标签：plot, maple

我在 Maple 14 的一行中绘制了三个 3D 矢量场：

```
> with(plots);
> A := Array(1 .. 3):
> A[1] := fieldplot3d(...):
> A[2] := fieldplot3d(...):
> A[3] := fieldplot3d(...):
> display(A);
  Here are the three plots arranged like this: [plot1] [plot2] [plot3] 
```

现在我可以单独旋转它们来探索向量场。是否可以链接其他两个图，以便它们自动旋转到相同的方向？如果仅在仅旋转其中一个（例如，最左侧）时才可能这样做，那就太好了。

例如，在 MatLab 中有一个[linkprop](http://www.mathworks.com/help/matlab/ref/linkprop.html)函数可以链接两个轴的属性，因此其中一个轴的变化（旋转、缩放、范围等）也将应用于另一个轴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:28:49.597

我不相信这可以在当前 Maple 中使用 3D 绘图上通常的左键单击拖动或通过调整绘图菜单栏中的三个方向框（当您左键单击时出现在 GUI 的顶部）来完成将光标焦点放在任何单独的 3D 图上）。

但是您可以在一个或多个绘图组件中设置绘图，并创建三个滑块，其基础操作代码会导致重新显示。因此，三个滑块可以控制三个方向角。这不像使用鼠标光标徒手旋转那样令人愉悦。但至少它允许多个绘图组件中的绘图（或者，在您的情况下，单个绘图组件中的阵列绘图）可以一致地旋转。

如果您不熟悉嵌入式组件的编程，在 Maple 17 中设置上述内容的一种便捷方法是使用其增强的`Explore`命令。

在 Maple 17 中，您可以将其替换为对 的调用`plots:-fieldplot`，可以是，

```
A:=Array(1..3):
A[1]:=plot3d(x^3*y,x=-10..10,y=-10..10):
A[2]:=plot3d(sin(x)*y,x=-10..10,y=-10..10):
A[3]:=plot3d(x*y^2,x=-10..10,y=-10..10):

Explore(plots:-display(A,orientation=[theta,phi,psi]),
    parameters=[theta=-180..180,phi=-180..180,psi=-180..180]); 
```

在 Maple 16 中该`Explore`命令不支持上述调用，但是三个 Slider 和 Plot Component 不难钩在一起，达到统一重定向和重新显示的相同效果。

上述方法的内存效率不是很高，因为它需要从引擎到 GUI 重新创建和通信非常多的完整 3D 绘图结构。这与通过在 3D 图上徒手点击拖动鼠标光标获得的旋转形成对比，后者仅涉及 GUI，并且可能只是高效的 OpenGL 重新显示。任何类型的内存泄漏，即使是每个通过的 3D 绘图的小内存泄漏（正如 Maple 16 的标准 GUI 似乎有），这种方法可能导致标准 Java GUI 缓慢消耗内存并最终停止运行。

# scala - 如何使用 ProcessBuilder 返回二进制数据？

> ID：15975130
> 
> 赞同：1
> 
> 时间：2013-04-12T15:19:40.890
> 
> 标签：scala, process

我想使用`scala.sys.process`将图形的 DOT 描述发送到`dot`并检索到二进制图像的转换。

```
val process = "dot -T" + format
val inputStream = new ByteArrayInputStream(dot.getBytes("UTF-8"))
process #< inputStream !! 
```

这可以正常工作，但`!!`返回 a `String`，而不是 a `Array[Byte]`。如何以字节而不是字符串获取响应？我认为我不能将字符串用作中间表示，因为二进制数据不会描述有效的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:38:29.643

如果您真的想避免文件 IO 并且您可以访问`base64`Linux（或等效）下的命令行程序，您可以

```
val process = Seq("bash","-c","dot -T" + format + " | base64")
val inputStream = new ByteArrayInputStream(dot.getBytes("UTF-8"))
javax.xml.bind.DatatypeConverter.parseBase64Binary(process #< inputStream !!) 
```

得到一个字节数组。

您还可以提供自己的 ProcessIO，它在输入/输出流上使用二进制数据方法，但这需要更多的工作。不过，如果 base64 太慢，它可能是值得的。（我希望那个点本身会成为瓶颈，但我不确定你要发送什么。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:46:40.630

Scala Process IO 很简洁，但我总是发现很难弄清楚如何做我想做的事。希望这个例子对其他人有帮助。一旦我找到了正确的巫术，我想要的就很容易了。这是一个函数，它接受参数`dot`然后运行该过程，管道输入 an`InputStream`并管道输出 an `OutputStream`。

```
 def dotbin(format: String)(dot: String): Array[Byte] = {
    val process = "dot -T" + format
    val bos = new ByteArrayOutputStream()
    val exitCode = process #< new ByteArrayInputStream(dot.getBytes) #> bos !< ProcessLogger(s => ())
    if (exitCode == 0) {
      bos.toByteArray()
    }
    else {
      throw new RuntimeException("Nonzero exit value (" + exitCode + ") for '" + process + "' with: " + dot)
    }
  } 
```

一旦找到正确的符号，它就会变得简洁明了。请注意，`2.10`您不需要提供`ProcessLogger`for `!<`。

# perl - Moose Perl 与 oop Perl 对比？

> ID：15975137
> 
> 赞同：0
> 
> 时间：2013-04-12T15:19:56.833
> 
> 标签：perl, moose

moose Perl 和 oop Perl 有什么区别？

为什么我们使用 Moose Perl 代替 oop Perl？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-12T15:33:39.280

Moose Perl 是面向对象的 Perl。Moose 是建立在 Perl 5 OO 系统之上的对象框架。

Moose 为您提供了大量工具，使 OO Perl 更易于使用和更健壮。Perl 的对象系统非常简单；它可以让你做几乎任何你想做的事情，这非常强大，但这也意味着你必须自己做所有事情。例如，下面是您如何在纯 OO Perl 中实现一个对象来表示 2D 平面中的一个点。

```
package Point;

use strict;
use warnings;

use Carp 'croak';

sub new { 
    my $class = shift;
    my %args = @_;

    # do a lot of complex and potentially buggy validation here
    # to make sure you have both an X and a Y coordinate, that
    # they're both numbers, etc.

    return bless \%args, $class;
} 
```

现在我们需要制作一些访问器和修改器

```
sub x { 
    my $self = shift; 
    my $val = shift;

    $self->{x} = $val;
} 
```

上面的代码有问题。你知道原因吗？我们还必须为`y`参数复制它。我们可以复制和粘贴代码，或者至少给符号起别名以避免 C&P。

在 Moose 中，这个定义如下：

```
package Point;
use Moose; 

has 'x' => (is => 'rw', isa => 'Int');
has 'y' => (is => 'rw', isa => 'Int'); 
```

这是做什么的：

*   开启`strict`并`warnings`为您服务
*   设置一个构造函数来验证它`x`并且`y`是整数
*   `x`为and`y`字段设置（非错误的）访问器和修改器
*   为自省设置元类，并提供元对象

只需四行代码，您就可以免费获得所有这些（实际上还有更多）。

如果您还不熟悉 Perl OO 的工作原理，我建议您阅读（然后重新阅读）[Perl OO 教程](http://perldoc.perl.org/perlootut.html)。

然后，开始阅读有关 Moose 的内容。[Moose::Manual](https://metacpan.org/module/Moose::Manual) POD是一个很好的起点。

# opencv - 在拼接模块中使用 Opencv API（曝光补偿器类）

> ID：15975140
> 
> 赞同：2
> 
> 时间：2013-04-12T15:20:04.940
> 
> 标签：opencv, opencv-stitching

我正在尝试使用包含该信息的另一个图像（img2）来填充图像（img1）中的孔（在我消除前景之后）。

在通过 Homograpy (H) 使用我的方法扭曲 img2 之后，我将从 img2_warped 获取信息以填充 img1。然后我想做曝光补偿。

现在我看到 OpenCV 提供了一个我可以使用的模块（拼接）[曝光补偿器类。](http://docs.opencv.org/modules/stitching/doc/exposure_compensation.html)我的问题是在

```
compensator->feed(corners, images, masks); 
```

输入左上角和蒙版的确切含义是什么？在我的情况下如何生成它们？

我看过拼接示例，但我确实在做与拼接不同的事情，所以我不能使用它的“warp”功能来产生“coners”。

例如，我有这两个图像。

产生的角是

角球 #0 : [-270, 325]

角球 #1 : [-86, 327]

抱歉，由于声誉问题，我无法附上图片。有谁可以解释角落的含义？

# algorithm - 在手机中搜索电话号码的算法？

> ID：15975144
> 
> 赞同：-2
> 
> 时间：2013-04-12T15:20:10.563
> 
> 标签：algorithm, mobile

当前智能手​​机操作系统从联系人列表中搜索姓名的通用算法是什么？

联系人列表并不大，但是当我们输入“A”时，所有以“A”开头的名字都很容易出现。'A' 后跟 'B'，将带来 Abe、Abott 等名称，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:26:19.563

快速执行此操作的一种方法是使用 trie ( [http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie) ) - 基本上，您会将所有键存储在树中，其中根节点表示一个空输入，并且每个您输入的字符会将您带到一个子树的分支，该子树包含所有以您迄今为止输入的字母集开头的名称。这里有一个使用这种技术进行自动完成的很好的例子：http: [//igoro.com/archive/efficient-auto-complete-with-a-ternary-search-tree/](http://igoro.com/archive/efficient-auto-complete-with-a-ternary-search-tree/)

在您的示例中，输入“A”将沿着标记为“A”的分支向下到包含所有以“A”开头的名称的子树。从那里输入“B”将沿着标记为“B”的分支向下到下一个子树，该子树将包含所有“AB”名称。将新名称添加到 trie 遵循相同的过程 - 按照名称中每个字母的正确分支（在它们不存在的地方添加新分支）直到到达名称的末尾，此时将其添加为叶子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:34:17.503

我不是 100% 确定，但如果我猜它会是[Trie](http://en.wikipedia.org/wiki/Trie)。

这个想法是您从树的根开始，然后跟踪到叶节点的路径。您向下的每个节点都会添加另一个字母作为后缀。

在您的示例中，树看起来像：[这个](http://imgur.com/kAiHw8Z)（没有足够的代表嵌入图像）

双圈定义“接受”状态，并不总是叶节点。当您使用 Trie 时，它​​会缩小您的搜索范围：

*   在“A”之后选择“N”将拒绝“ABE”，因为它不在路径上。
*   在“ANN”之后选择“E”将拒绝“ANN”，因为它不在路径上。

# javascript - 如何在 javascript 中创建具有多个条件的 while 循环？

> ID：15975147
> 
> 赞同：0
> 
> 时间：2013-04-12T15:20:23.190
> 
> 标签：javascript, random, while-loop, multiple-conditions

我正在尝试创建一个扑克程序，该程序将生成一手 5 张随机牌。我遇到的一个问题是程序偶尔会生成同一张卡片两次。

我想到的解决这个问题的最好方法是实现一个看起来像这样的 while 循环。

```
while (randFace == randFace2 && randSuit == randSuit2) || (randFace2 == randFace3 && randSuit2 == randSuit3) { 

randSuit2 = Math.round(Math.random()*3);                    
randFace2 = Math.round(Math.random()*13);   

} 
```

这会破坏 while 循环的语法并拒绝运行。

有没有什么方法可以创建一个类似于上面的带有许多复杂条件的while循环......只有一个在语法上有效？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:21:48.170

是的，添加更多括号。

```
while ((randFace == randFace2 && randSuit == randSuit2) || (randFace2 == randFace3 && randSuit2 == randSuit3))  {
    // Do whatever
} 
```

while 循环将测试紧跟`while`关键字之后括号中的所有内容。您可以使用更多括号或任何您喜欢的运算符在这些括号内无限嵌套条件，只要这些括号中的任何内容都可以评估为真或假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:22:40.923

你好像少了一个括号

```
while ((randFace == randFace2 && randSuit == randSuit2) || (randFace2 == randFace3 &&      randSuit2 == randSuit3)) { 

randSuit2 = Math.round(Math.random()*3);                    
randFace2 = Math.round(Math.random()*13);   

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:22:43.867

只需使用括号对条件进行分组，如下所示：

```
while( (randFace == randFace2 && randSuit == randSuit2) || (randFace2 == randFace3 && randSuit2 == randSuit3)) { 
randSuit2 = Math.round(Math.random()*3);                    
randFace2 = Math.round(Math.random()*13);   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T16:26:41.103

对我来说这听起来像是一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)，所以请注意，这个答案不是针对问题的主题，而是针对问题本身。

首先，你应该使用[Math.floor](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/floor)，因为`Math.round`会给你一个不均匀的分布：

```
function randomInt(max) {
    return Math.floor(Math.random() * (max + 1))
} 
```

然后你必须将所有这些值存储在某个地方，对吗？那么为什么不使用对象或数组呢？我假设您使用的是一副 52 张牌。如果您有这样的约定：

*   心：索引 0 - 12
*   钻石：指数 13 - 25
*   俱乐部：指数 26 - 38
*   黑桃：索引 39 - 51

那么你的“甲板”表示只是一个 int 数组：

```
var deck = [];
for (var i = 0; i < 52; i++)
  deck.push(i); 
```

现在您可以创建一个“播放牌组”，只需将常规牌洗牌：

```
// Using the Fisher Yates shuffle: http://en.wikipedia.org/wiki/Fisher-Yates_shuffle

function shuffle(array) {
  var len = array.length;
  var shuffled = array.slice();

  while (len--) {
    random = randomInt(len + 1);
    // swap
    shuffled[len] = [shuffled[random], shuffled[random] = shuffled[len]][0];
  }

  return shuffled;
}

// creating a new, shuffled deck from the original
var playingDeck = shuffle(deck); 
```

并使用`playingDeck`来实际分发您的卡。假设您想将前 5 张牌给玩家 1：

```
var player1Hand = playingDeck.splice(0, 5); 
```

然后你的 player1Hand 将是一个五元素数组，其中元素是来自“游戏牌组顶部”的令牌（前五个元素）。因此，如果您现在查询`playingDeck.length`, 将是`47`。你想给玩家 2 其他 5 张牌吗？相同的代码：

```
var player2Hand = playingDeck.splice(0, 5); 
```

如果你想在游戏中间洗牌？只需洗牌`playingDeck`并将其分配给自己：

```
playingDeck = shuffle(playingDeck); 
```

您还可以从顶部抽一张牌：

```
var card = playingDeck.shift(); 
```

（请注意，在这种情况下，它不是卡片列表 - 数组 - 而是卡片本身 - 编号。）

并且基本上使用您想要的任何[Array 方法，模拟真实的甲板。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)

正如您所看到的，这是一种处理模拟卡片的更自然的方式，您不必在循环中连接许多条件来绘制一些卡片。

我会使用我在开始时提到的约定，但请记住，如果您想要卡片的不同表示形式也可以：所描述的方法仍然有效，您不必更改代码；只有数组的值不同，所以只有deck的生成。例如，你可以有字符串：

```
var deck = ["1H", "2H", /*etc*/, "10H", "JH", "QH", "KH", /* etc */]; 
```

最后一个字母是花色，剩下的就是卡片的价值。或者你也可以实际使用一个对象：

```
var deck = [{"suit": "Hearts", "face": "1"}, /* etc */]; 
```

真的没关系。什么让你更容易处理。但是其余的方法仍然是相同的。

希望能帮助到你！

# r - 通过 R 中的 ROracle 从 Oracle 查询中获取正确的日期时间

> ID：15975149
> 
> 赞同：9
> 
> 时间：2013-04-12T15:20:28.947
> 
> 标签：r, oracle, timezone, posixct

我在 R 中使用[ROracle](http://cran.r-project.org/web/packages/ROracle/index.html)来访问 Oracle 数据库。

我注意到，可能自从夏季时间更改以来，任何`DATE`（日期时间）Oracle 列现在都被错误地转换了（我在 R 中得到的时间比在 Oracle DB 中少一个小时）。

从小[插图](http://cran.r-project.org/web/packages/ROracle/ROracle.pdf)的第 12 页（**我几乎不明白**）看来，ROracle 和 R 将日期时间交换为自 1970 年 1 月 1 日以来的秒数，并且 R 随后针对当地时区进行了调整。

这是我所做的

```
 drv <- dbDriver("Oracle");
    con <- dbConnect(drv, username = Login, password = Pwd, dbname = DB, prefetch=TRUE, bulk_read=1e6);

    test.query <- "SELECT * FROM MYTABLE WHERE ( A > to_date('2008-03-03 12:30:00', 'YYYY-MM-DD HH24:MI:SS') AND A < to_date('2008-03-03 12:40:00','YYYY-MM-DD HH24:MI:SS')  AND [other stuff])"

    test <- dbGetQuery(con, test.query);

    head(test[,c("A","B","C")])
    #                    A                   B                   C
    #1 2008-03-03 11:30:38 2008-03-02 23:00:00 2008-03-02 23:00:00 #HERE IT SHOULD BE +1 HOUR
    #2 2008-03-03 11:30:38 2008-03-02 23:00:00 2008-03-02 23:00:00
    #3 2008-03-03 11:30:41 2008-03-02 23:00:00 2008-03-02 23:00:00
    #4 2008-03-03 11:31:25 2008-03-02 23:00:00 2008-03-02 23:00:00
    #5 2008-03-03 11:31:25 2008-03-02 23:00:00 2008-03-02 23:00:00
    #6 2008-03-03 11:31:34 2008-03-02 23:00:00 2008-03-02 23:00:00

    class(test$A)
    [1] "POSIXct" "POSIXt" 
    attributes(test$A)
    $class
    [1] "POSIXct" "POSIXt" 
```

这是我的`sessionInfo()`

```
 sessionInfo()
    R version 2.15.2 (2012-10-26)
    Platform: x86_64-w64-mingw32/x64 (64-bit)

    locale:
    [1] LC_COLLATE=French_France.1252  LC_CTYPE=French_France.1252    LC_MONETARY=French_France.1252
    [4] LC_NUMERIC=C                   LC_TIME=French_France.1252    

    attached base packages:
    [1] stats     graphics  grDevices utils     datasets  methods   base     

    other attached packages:
    [1] data.table_1.8.9 ROracle_1.1-7    DBI_0.2-5       

    loaded via a namespace (and not attached):
    [1] tools_2.15.2 
```

这是我从管理员那里获得的有关 Oracle DB 的信息 ![甲骨文数据库](https://i.stack.imgur.com/u8Lyo.png)

我能做些什么来正确解决这个问题（不仅仅是增加 1 小时，我必须在夏末收回）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-12-06T16:21:43.303

正如您所提到的，这是 R 根据本地时区进行的时区转换。有关更多详细信息，您可以参考此链接

[http://www.oralytics.com/2015/05/r-roracle-and-oracle-date-formats_27.html](http://www.oralytics.com/2015/05/r-roracle-and-oracle-date-formats_27.html)

在通过 ROracle 连接之前尝试设置这些系统变量

```
Sys.setenv(TZ = "GMT")
Sys.setenv(ORA_SDTZ = "GMT") 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-10T17:18:09.337

这似乎在2014 年 11 月 20 日发布的[ROracle-1.1.12中得到修复。](http://cran.r-project.org/web/packages/ROracle/index.html)`?dbReadTable`请参阅有关时区如何工作 的文档。

# html - 结转清单编号进入我的表

> ID：15975154
> 
> 赞同：0
> 
> 时间：2013-04-12T15:20:36.883
> 
> 标签：html

我想根据父 li 编号来计算表格的编号。我已经用 JQuery 进行了十进制编号，但我想知道是否可以将其传递到表中？所以就像我的例子，但没有让我手动放置 1.1 1.2 2.1 2.2 等。

```
<ol>
    <li>Item1
        <table>
            <tr><th>Num</th><th>Thing</th></tr>
                <tr><td>1.1</td><td>some</td></tr>
            <tr><td>1.2</td><td>many</td></tr>
        </table>
    </li>
    <li>Item2</li>
            <table>
            <tr><th>Num</th><th>Thing</th></tr>
            <tr><td>2.1</td><td>few</td></tr>
            <tr><td>2.2</td><td>lots</td></tr>
        </table>
    <li>Item3</li>
</ol> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:36:45.670

```
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript" src="PATH-TO-jquery"></script>
<script type="text/javascript">
    $(function() {
    $("ol").each(function(indexOl, elemOl) {
        var liNr = 1;
        jQuery(elemOl).children("li").each(function(indexLi, elemLi) {
        var trNr = 1;
        jQuery(elemLi).find("tr").each(function(indexTr, elemTr){
            jQuery(elemTr).find("td:first").each(function(indexTd, elemTd){
            elemTd.innerHTML = "INSERTED: "+liNr+"."+trNr;
            ++trNr;
            });
        });
        ++liNr;
        });
    });
    });
</script>
</head>
<body>
<ol>
    <li>Item1
    <table>
        <tr><th>Num</th><th>Thing</th></tr>
        <tr><td></td><td>some</td></tr>
        <tr><td></td><td>many</td></tr>
    </table>
    </li>
    <li>Item2
    <table>
        <tr><th>Num</th><th>Thing</th></tr>
        <tr><td></td><td>few</td></tr>
        <tr><td></td><td>lots</td></tr>
    </table>
    </li>
    <li>Item3</li>
</ol>
</body>
</html> 
```

对于 3 级结构也是如此：

```
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript" src="PATH-TO-jquery"></script>
<script type="text/javascript">
    $(function() {
    $("ol:first").each(function(indexOl, elemOl) {
        var sectionNr = 1;
        jQuery(elemOl).children("li").each(function(indexLiSection, elemLiSection) {
        var subSectionNr = 1;
        jQuery(elemLiSection).children("ol").each(function(indexOlSubsection, elemOlSubsection){
            jQuery(elemOlSubsection).children("li").each(function(indexLiSubsection, elemLiSubsection) {
            var trNr = 1;
            jQuery(elemLiSubsection).find("tr").each(function(indexTr, elemTr){
                jQuery(elemTr).find("td:first").each(function(indexTd, elemTd){
                elemTd.innerHTML = "INSERTED: "+sectionNr+"."+subSectionNr+"."+trNr;
                ++trNr;
                });
            });
            ++subSectionNr;
            });
        });
        ++sectionNr;
        });
    });
    });
</script>
</head>
<body>
<ol>
    <li>Section1
    <ol>
        <li>Subsection1.1
        <table>
            <tr><th>Num</th><th>Thing</th></tr>
            <tr><td></td><td>some</td></tr>
            <tr><td></td><td>many</td></tr>
        </table>
        </li>
        <li>Subsection1.2
        <table>
            <tr><th>Num</th><th>Thing</th></tr>
            <tr><td></td><td>some</td></tr>
            <tr><td></td><td>many</td></tr>
        </table>
        </li>
    </ol>
    </li>
    <li>Section2
    <ol>
        <li>Subsection2.1
        <table>
            <tr><th>Num</th><th>Thing</th></tr>
            <tr><td></td><td>some</td></tr>
            <tr><td></td><td>many</td></tr>
        </table>
        </li>
        <li>Subsection2.2
        <table>
            <tr><th>Num</th><th>Thing</th></tr>
            <tr><td></td><td>some</td></tr>
            <tr><td></td><td>many</td></tr>
        </table>
        </li>
    </ol>
    </li>
    <li>Section3
    <ol>
        <li>Subsection3.1
        <table>
            <tr><th>Num</th><th>Thing</th></tr>
            <tr><td></td><td>some</td></tr>
            <tr><td></td><td>many</td></tr>
        </table>
        </li>
        <li>Subsection3.2
        <table>
            <tr><th>Num</th><th>Thing</th></tr>
            <tr><td></td><td>some</td></tr>
            <tr><td></td><td>many</td></tr>
        </table>
        </li>
    </ol>
    </li>
</ol>
</body>
</html> 
```

# mysql - Symfony2 通过 SSH 隧道连接到数据库？

> ID：15975163
> 
> 赞同：1
> 
> 时间：2013-04-12T15:20:53.057
> 
> 标签：mysql, symfony, ssh, tunneling

如何通过 Symfony2 中的 SSH 隧道连接到远程数据库？

我找到了 PHP 片段，但是如何将它集成到 Symfony 中

```
<?php
   $smysql = mysql_connect( "127.0.0.1:3307", "dbuser", "PASS" );
   mysql_select_db( "db", $smysql ); 
?> 
```

希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:55:07.843

在您的 parameters.yml 文件中更改`database_port`

```
parameters:
    database_driver:   pdo_mysql
    database_host:     127.0.0.1
    database_port:     3307
    database_name:     ...
    database_user:     ...
    database_password: ... 
```

这将在 ssh 隧道存在时起作用。否则会出现连接错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T16:19:09.513

您确实需要先在本地端口 3307 上设置 SSH 隧道。

如果您使用的是 Windows，则可以按照[本教程进行操作](http://www.ytechie.com/2008/05/set-up-a-windows-ssh-tunnel-in-10-minutes-or-less/)

# .net - 如何将 EMF 图像从 .NET Windows.Forms 复制到 Visio？

> ID：15975165
> 
> 赞同：1
> 
> 时间：2013-04-12T15:20:57.260
> 
> 标签：.net, winforms, clipboard, vector-graphics

我正在使用 Windows.Forms 使用 .NET 2.0 编写图表编辑器。图表必须*作为矢量图形*复制到 Microsoft Word 和 Visio 中。

编辑器有一个*保存为 EMF*的功能：Word 和 Visio 可以将生成的文件作为矢量图形图像导入。代码与[此](https://stackoverflow.com/questions/3521541/how-to-draw-a-rotated-text-in-a-meta-file)类似。

我现在添加了一个*复制为 EMF*功能，以支持直接复制和粘贴到 Word 和 Visio，使用与另存为 EMF 功能相同`System.Drawing.Imaging.Metafile`的*功能*。

使用 将其复制到剪贴板`SetData(DataFormats.EnhancedMetafile, ...)`会产生 Word 声称它可以粘贴为 EMF 的结果，但显示为空。文档[对此进行了解释](http://msdn.microsoft.com/en-us/library/system.windows.forms.dataformats.enhancedmetafile%28v=vs.80%29.aspx)，并提供[了使用非托管 API 函数的解决方法](http://support.microsoft.com/kb/323530)。我已经复制了那个代码。

现在，EMF 图像在粘贴到 Word 时会显示，但在粘贴到 Visio 时不会显示！当我将它粘贴到 Word 中，然后将其复制到那里并粘贴到 Visio 中时，它也会显示在那里。

我怎样才能使这项工作？

*   Word 在做什么而我的代码不是？
*   为什么通过文件的路由在没有非托管 API 调用的情况下工作，而不是通过剪贴板的路由？
*   为什么我首先需要非托管对象（句柄）？
*   有没有我可以阅读的自包含文档来理解这些问题而无需学习 Win32 编程？

# c - 是否有初始化字符串的单行方式？

> ID：15975170
> 
> 赞同：-1
> 
> 时间：2013-04-12T15:21:29.933
> 
> 标签：c, string, char

是否有单行方式来初始化字符串？例如，在 C# 中，您只需执行以下操作：

`string str = "Example";`

在**C**中，我想做类似以下的事情，但我的编译器抱怨：

`char str[] = "Example";`

编辑：

`char str[] = "Example";`

...确实有效。我的编译器抱怨这一行，但真正的问题是上一行。Daniel Fischer 下面的评论是导致这一发现的原因。谢谢你，很抱歉造成混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:30:45.300

您初始化字符串的方法已经正确。您可能在该行上方的其他地方有错误。

从技术上讲，有两种方法可以做到这一点：

```
char str1[] = "string";  // static array 
char* str2 = "string";   // Pointer points to a constant 
```

此处推荐使用静态数组（^第一种方法），因为您可以在初始化后修改内容。但是，您不能修改^(第二种)方法的内容，因为字符串将存储在只读内存中。

注意：对于^(第二种)方法，或者，您可以为新字符串分配新内存，而不是修改当前字符串。分配后，使用`strcpy()`函数分配字符串。另外，完成后不要忘记调用`free(str);`以取消分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:27:52.357

您可以使用这两种方式中的任何一种...

1.  使用字符串作为字符集合以 null ( '\0' ) 字符结尾。

    char ch[] = {'E','x','a','m','p','l','e','\0'};

2.  如果你想要这样，像数组递增或递减数组变量名应该产生一个错误，那么你也可以使用。

    const char *ch = "示例";

# python - python如何对字典列表进行排序？

> ID：15975172
> 
> 赞同：0
> 
> 时间：2013-04-12T15:21:34.753
> 
> 标签：python, sorting

在不提供任何可选参数的情况下使用`sorted`内置函数，python 如何对字典列表进行排序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T15:27:39.830

Python 2 确实尝试提供排序（它对*所有*类型都这样做），首先基于长度（首先是短的 dicts），如果长度相等，然后通过键（较小的键首先出现），然后如果所有键都相等，那么关于值（较小的值先出现）；请参阅源代码中的[`characterize`和`dict_compare`函数。](http://hg.python.org/cpython/file/2.7/Objects/dictobject.c#l1717)`dictobject.c`

简短演示：

```
>>> sorted([{1:2}, {}])
[{}, {1: 2}]
>>> sorted([{1:2}, {0:1}])
[{0: 1}, {1: 2}]
>>> sorted([{1:2}, {1:1}])
[{1: 1}, {1: 2}] 
```

在 Python 3 中，它根本不对它们进行排序。排序dicts真的没有意义：

```
>>> sorted([{}, {}])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unorderable types: dict() < dict() 
```

请参阅 Python 3 中的新增功能文档的[排序比较部分](http://docs.python.org/3/whatsnew/3.0.html#ordering-comparisons)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:23:40.983

它没有（至少对于python3）：

```
>>> x = [{4:1}, {3:2}, {1:2}, {5:6}]
>>> x
[{4: 1}, {3: 2}, {1: 2}, {5: 6}]
>>> sorted(x)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unorderable types: dict() < dict() 
```

指定 dicts 的排序没有合理的默认值，因此 dicts 是不可排序的。

此行为已从 python2 更改，因为比较已在 python3 中进行了重新设计。在几乎可以使用 比较任何东西之前`cmp()`，这反映在列表的排序上。python3解决了这个问题，`cmp()`不存在，并且使用[丰富的比较](http://docs.python.org/3/reference/datamodel.html#object.__lt__)方法进行比较，这只能使真正具有可比性的东西，或者像这样的东西有多大意义`cmp(Exception(), 42)`？

# login - 用于移动浏览器的书签，包括登录信息

> ID：15975176
> 
> 赞同：1
> 
> 时间：2013-04-12T15:21:47.783
> 
> 标签：login, bookmarklet, mobile-browser

我们的网站 FavSync 是一个书签管理器，我们正在努力实现以下目标：

在我们网站的移动版本（没有移动应用程序，只有移动版本）上，我们希望允许用户在旅途中将书签添加到他们的 FavSync 页面（添加他们当前打开的网站）。

在 PC 浏览器上，我们通过为每个浏览器创建扩展程序/附加组件来实现这一点。然而，并不是所有的移动浏览器都支持扩展，为每个移动浏览器创建一个扩展的工作量太大，因此我们正在考虑一个 boomkarklet。

两个问题：

1.  我们正在研究书签的方向：每个用户都有一个不同的 URL，包括他们的登录信息，并将其作为书签存储在他们的移动浏览器中。有人在移动设备上有这方面的经验吗？这能行吗？

2.  您可以提出任何其他解决方案/想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T01:06:10.583

小书签可以工作，但它必须在单独的窗口中运行才能持久化。这里有些例子：

*   [使用 window.opener 属性创建窗口遥控器](http://www.javascriptkit.com/javatutors/remote2.shtml)
*   [窗口生成和遥控器](http://www.webreference.com/js/column7/attributes.html)
*   [创建远程控制书签](https://www.squarefree.com/bookmarklets/remotecontrol.html)
*   [跨文档消息传递和 RPC](http://msdn.microsoft.com/en-ca/magazine/ff800814.aspx)

# asp.net-mvc - 被问及 Windows Azure 部署

> ID：15975180
> 
> 赞同：0
> 
> 时间：2013-04-12T15:21:56.547
> 
> 标签：asp.net-mvc, node.js, azure

我正在开发一个要部署到 Windows Azure 的应用程序。在这样做之前，我试着计算一下这个部署的价格，我也不是很清楚。部署包含一个带有 SQL DB 的 ASP.NET MVC 4 应用程序的一侧，该 SQL DB 将具有大量读取（用于使用异步方法）并将结果以 json 格式返回到 Web 客户端。

此外，对于进行搜索的用户，我将在 Node.js 中拥有一个聊天服务器，用户可以在其中与应用程序进行通信。

我知道就出站流量和我的数据库中的存储而言，完全取决于用户数量，但是我选择 Windows Azure 应用程序到 ASP.NET 和服务器聊天的哪种服务？网站？？云服务？？网络角色和工作者角色是如何产生的？如果我想要两个服务中的任何一个的可扩展性怎么办？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:53:15.610

您可以将 asp.net mvc 应用程序*直接*部署到 Azure 网站；为了使用 Web 角色，您需要进行额外的项目设置。此外，网站允许您直接从源代码控制进行部署。因为他们可以免费试用，所以从一个网站开始，看看它会把你带到哪里。如果它有效，请继续使用它，如果它限制您，请尝试切换到网络角色。

# javascript - 纬度，经度到三个.js中的3D点

> ID：15975183
> 
> 赞同：0
> 
> 时间：2013-04-12T15:22:10.230
> 
> 标签：javascript, 3d, three.js

我想找到一个与three.js的PolyhedronGeometry计算的方位角/倾角相反的函数；也就是说，给定方位角和倾角值，找到与原点成该角度的 3D 点。

在three.js 中是否已经有这样的功能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:15:52.407

除了*azimuth*和*elevation*，您还需要*distance*来定位 3D 点（否则您只有一条线/方向）。

假设你知道`R`，点到原点的距离，`θ`（方位角）和`ϕ`（仰角），你可以得到 3D 坐标如下：

```
x = R*cos(ϕ)*sin(θ)
y = R*cos(ϕ)*cos(θ)
z = R*sin(ϕ) 
```

希望有帮助。

# asp.net-mvc - 将参数从视图传递到控制器

> ID：15975186
> 
> 赞同：0
> 
> 时间：2013-04-12T15:22:19.703
> 
> 标签：asp.net-mvc

我正在开发 MVC 应用程序。我试图通过 JQuery 将参数从视图传递到使用 JSON 的控制器。返回类型工作正常，但是当我传递参数时它失败了。以下是代码

**看法**

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#ClientList").change(function () {
            $.ajax({
                url: '@Url.Action("GetClientData", "Home")',
                type: 'Post',
                dataType: 'json',
                data: { clientID: $("#CientList").val() },
                contentType: 'application/json; character=utf-8',
                success: function (data) {
                    if (data.success) {
                        document.getElementById("ClientName").value = data.clientName
                    }
                    else {
                        alert('invalid ID' + data.success);
                    }
                }
            });
        });
    }); 
```

**控制器**

```
[HttpPost]
        public JsonResult GetClientData(string clientID)
        {
            Client client = Client.GetClient(Convert.ToInt32(clientID));
            if (client != null)
            {
                return Json(new { success = true, clientName = client.ClientName });
            }
            return Json(new { success = false });

        } 
```

如果我从控制器代码中取出参数。它工作正常，但在方法接受参数时失败。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:14:03.757

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#ClientList").change(function () {
            var selectedClientID = { clientID: $("#ClientList").val() };
            $.ajax({
                url: '@Url.Action("GetClientData", "Home")',
                type: 'Post',
                contentType: 'application/json',
                dataType: 'json',
                data: JSON.stringify(selectedClientID),
                success: function (data) {
                    if (data.success) {
                        document.getElementById("ClientName").value = data.clientName;
                        document.getElementById("ClientAddress").value = data.clientAddress;
                        document.getElementById("ClientContactNumber").value = data.clientContact;
                    }
                    else {
                        alert('invalid ID' + data.success);
                    }
                }
            });
        });
    });
</script> 
```

这完美地工作

# android - 方向值为 1234.56

> ID：15975197
> 
> 赞同：0
> 
> 时间：2013-04-12T15:22:44.547
> 
> 标签：android, orientation

我已经实现了一个 android 类，用于以度为单位测量设备的方向。但是我得到了非常奇怪的结果，比如 Azimuth 的 3124.78 和其他类似的结果

这是我的代码

```
import java.text.DecimalFormat;
import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.widget.TextView;

public class Gyroscope extends Activity implements SensorEventListener {

private SensorManager sensor;
Sensor accelerometer;
Sensor magnetometer;
TextView gyroscope;

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_gyroscope);

    gyroscope = (TextView) this.findViewById(R.id.gyroscope);

sensor = (SensorManager)getSystemService(SENSOR_SERVICE);
accelerometer = sensor.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
magnetometer = sensor.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
}

public void onResume(){
  super.onResume();
  sensor.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_GAME);
  sensor.registerListener(this, magnetometer, SensorManager.SENSOR_DELAY_GAME);
}

public void onPause(){
  super.onPause();
  sensor.unregisterListener(this);
 }
 @Override
 public void onAccuracyChanged(Sensor sensor, int accuracy) {
// TODO Auto-generated method stub

 }
 float[] gravity;
 float[] gmagnetic;

 double azimuth = 0 , pitch = 0 , roll = 0  ; 

  public double toTwoDecimals(double d){
DecimalFormat toTwoDec = new DecimalFormat("#.##");
return Double.valueOf(toTwoDec.format(d));
   }
   @Override
    public void onSensorChanged(SensorEvent event) {
// TODO Auto-generated method stub
if(event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
    gravity= event.values;
if(event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
    gmagnetic = event.values;
if( gravity != null && gmagnetic !=null){
    float R[] = new float[9];
    float I[] = new float[9];
    boolean success = SensorManager.getRotationMatrix(R, I, gravity, gmagnetic);
    if(success){
        float orientation[] = new float[3];
        SensorManager.getOrientation(R, orientation);

         azimuth = (double) toTwoDecimals(Math.toDegrees(event.values[0])); 
         pitch = (double)toTwoDecimals(Math.toDegrees(event.values[1]));
         roll = (double) toTwoDecimals(Math.toDegrees(event.values[2]));

        gyroscope.setText("Azimuth: " + azimuth + 
                "\nPitch: " + pitch + 
                "\nRoll: " + roll);
    }
}
  }

  } 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:29:44.543

首先，您应该拥有`gravity= event.values.clone();`和相同的`gmagnetic`.
您的错误是由于使用 event.values[] 而不是orientation[]

```
azimuth = (double) toTwoDecimals(Math.toDegrees(orientation[0])); 
pitch = (double)toTwoDecimals(Math.toDegrees(orientation[1]));
roll = (double) toTwoDecimals(Math.toDegrees(orientation[2])); 
```

# ruby - 将秒（浮点数）转换为小时/秒/分钟

> ID：15975198
> 
> 赞同：1
> 
> 时间：2013-04-12T15:22:44.877
> 
> 标签：ruby, time

我有一个代表秒的浮点数。所以，我可以有 38.93 秒。如果可能的话，我正在寻找“最重要的”方法来获得小时，或者如果小时是不可能的，或者分钟和小时是不可能的，只有几秒钟。当我说可能时，我的意思是：

如果少于 3600 秒，则为分钟或秒。如果少于 60 秒，则为秒。

现在我做了几个 if 看看它应该是什么，但我认为可能必须有一种更清洁的方式。

```
if input > 3600
   return input/3600, 'hours'
elseif input < 3600 && input > 60
   return input/60, 'minutes'
else 
   return input, 'seconds' 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:42:04.033

恕我直言，带有范围的 case 语句会更简洁：

```
def some_method_name(input)
  case input
  when 0...60
    input, 'seconds'
  when 60...3600
    input/60, 'minutes'
  else
    input/3600, 'hours'
  end
end 
```

另一种方法是先提取小时、分钟和秒：

```
def some_method_name(input)
  hours, seconds = input.divmod(3600)
  minutes, seconds = seconds.divmod(60)

  if hours > 0
    hours, 'hours'
  elsif minutes > 0
    minutes, 'minutes'
  else
    seconds, 'seconds'
  end
end 
```

在 Rails 中，您当然会使用内置的[复数形式](http://guides.rubyonrails.org/i18n.html#pluralization)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:14:17.753

这种方法的优点是能够灵活地指定所需的单位间隔。如果您愿意，可以很容易地添加几周、大约几个月、几年。它还修复了奇异值的复数。

```
TimeInt = Struct.new :name, :secs
INTERVALS = [ TimeInt[:days, 60*60*24], TimeInt[:hours, 60*60],
              TimeInt[:minutes, 60], TimeInt[:seconds, 1] ]

def time_with_adaptive_units(secs)
  ti = INTERVALS.find { |ti| secs >= ti.secs } || INTERVALS.last
  val, name = (secs.to_f/ti.secs).round, ti.name.to_s
  name.sub!(/s$/,'') if val == 1
  "#{val} #{name}"
end

[5] pry(main)> time_with_adaptive_units(1)
=> "1 second"
[6] pry(main)> time_with_adaptive_units(45)
=> "45 seconds"
[7] pry(main)> time_with_adaptive_units(450)
=> "7 minutes"
[8] pry(main)> time_with_adaptive_units(4500)
=> "1 hour"
[9] pry(main)> time_with_adaptive_units(45000)
=> "12 hours"
[10] pry(main)> time_with_adaptive_units(450000)
=> "5 days" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T11:20:03.240

我能想到的有：

```
total_seconds = 23456
intervals = [3600, 60, 1].inject({rem: total_seconds, parts:[]}) do |memo, factor|
    count = (memo[:rem] / factor).floor
    memo[:rem] = memo[:rem] - (count * factor)
    memo[:parts] << count
    memo
end 
```

你可以完成它

```
itervals[:parts].zip(['hours', 'minutes', 'seconds']).map{|p| p.join(' ')}.join(', ') 
```

您还可以看到，如果您愿意，将其扩展到几天、几周、几个月、几年、几十年和几个世纪是微不足道的：D

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T15:34:27.223

```
input = 4000 #input in seconds
h = {(60..3599) => ["input/60",'Minutes'], (0..59) => ["input",'Seconds'],(3600..Float::INFINITY) => ["input/3600",'Hours']}
h.each_pair {|k,v| p "#{v.last} is #{eval(v.first)}" if k.include? input}

input = 1100 #input in seconds
h = {(60..3599) => ["input/60",'Minutes'], (0..59) => ["input",'Seconds'],(3600..Float::INFINITY) => ["input/3600",'Hours']}
h.each_pair {|k,v| p "#{v.last} is #{eval(v.first)}" if k.include? input}

input = 14 #input in seconds
h = {(60..3599) => ["input/60",'Minutes'], (0..59) => ["input",'Seconds'],(3600..Float::INFINITY) => ["input/3600",'Hours']}
h.each_pair {|k,v| p "#{v.last} is #{eval(v.first)}" if k.include? input} 
```

*输出：*

```
"Hours is 1"
"Minutes is 18"
"Seconds is 14" 
```

# jquery - 如何有选择地禁用 jquery ui 自动完成功能？

> ID：15975199
> 
> 赞同：2
> 
> 时间：2013-04-12T15:22:45.250
> 
> 标签：jquery, user-interface, autocomplete

我确信有一个简单的解决方案，但我似乎无法找到它。我正在使用 jquery ui 自动完成进行数据库搜索。自动完成会建议数据库中存在的单词/短语，以帮助用户构建更好的搜索查询。我有一个选择字段，可以更改自动完成的源以搜索不同的表，这一切都很好。

但是对于选择的选项之一，我需要*禁用*自动完成功能，将文本字段返回到普通的普通文本字段功能。我在想我可以将它包装在 select.change 函数中的 if 语句中，但这会导致各种意外行为 - 如果改回不同的选项，则自动完成功能不起作用。

对此最好的方法是什么？

```
 $(function() {
        var select = $( "#selectType" ),
        options = select.find( "option" ),
        songSearchField = $( "#songSearchField" );

        var selectType = options.filter( ":selected" ).attr( "value" );

        songSearchField.autocomplete({
            source: "/ajax/songLookup.php?selectType=" + selectType,
            minLength: 2,
            select: function(e, ui) {  
                e.preventDefault()
                var searchTerm = ui.item.value;
                var existingTerms = $("#searchString").val() + searchTerm + ", ";
                $("#searchString").val(existingTerms);
                $(this).val('');
                },
            change: function() {
                // clear the search field
                $("#songSearchField").val('');
                }
        });

        $("#songSearchField").on( "autocompleteclose", function(e, ui) {
            var existingTerms = $("#searchString").val();
            $("#termsDisplay").html("<b>Terms: </b>" + existingTerms);
        });

        select.change(function () {
            $('#searchString').val('');
            $("#songSearchField").val('');
            $("#termsDisplay").html('');
            $("#content").html('');
            selectType = options.filter( ":selected" ).attr( "value" );
            songSearchField.autocomplete( "option", "source", "/ajax/songLookup.php?selectType=" + selectType );

            //// this is where I run into trouble \\\\
            if(selectType = 'desc') {
                songSearchField.autocomplete( "disable" );
            }
            else {
                songSearchField.autocomplete( "option", "source", "/ajax/songLookup.php?selectType=" + selectType );
            }
        });
    }); 
```

这是HTML。

```
 <form id="songSearchForm">
        <input type="text" name="songSearchField" id="songSearchField" /><br />
        <select name="selectType" id="selectType">
            <option value="keyword">Keyword Search</option>
            <option value="desc">Song Description Search</option>
            <option value="title">Song Title Search</option>
        </select>
        <input type="hidden" name="searchString" id="searchString" value="" />
        <p id="termsDisplay"></p>
        <input type="submit" name="submit" value="Search" />
        <input type="button" name="clear" id="clear" value="Clear Search" />
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:36:30.350

两件事情：

```
if(selectType = 'desc') { 
```

应该

```
if(selectType == 'desc') { 
```

另外，我看到您在哪里禁用了自动完成功能，但我没有看到您在哪里重新启用它。试试这个：

```
if(selectType == 'desc') {
    songSearchField.autocomplete( "disable" );
} else {
    songSearchField.autocomplete( "enable" );
    songSearchField.autocomplete( "option", "source", "/ajax/songLookup.php?selectType=" + selectType );
} 
```

编辑-我最初删除了更改源的行，但乍一看，我认为您确实需要它。当然，您只需要一次。无论是在此声明中，还是在上述声明中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:27:47.537

如何删除您的第一个电话，就在您的下方`selectType = options....:`

```
songSearchField.autocomplete( "option", "source", "/ajax/songLookup.php?selectType=" + selectType ); 
```

并将您的 if 语句更改为：

```
//// this is where I run into trouble \\\\
if(selectType != 'desc') {
songSearchField.autocomplete( "option", "source", "/ajax/songLookup.php?selectType=" + selectType );
 } 
```

**或者......我刚刚注意到这一点**

这：

```
if(selectType = 'desc') { 
```

应该是这样的：

```
if(selectType == 'desc') { 
```

# ruby-on-rails - 如何修复 很抱歉，Rails/Heroku 应用程序出了点问题？

> ID：15975200
> 
> 赞同：0
> 
> 时间：2013-04-12T15:22:50.560
> 
> 标签：ruby-on-rails, heroku

这些是我看到 Rails 应用程序的错误页面时的日志。关于如何解决这个问题的任何建议？

```
2013-04-12T15:10:04.081764+00:00 app[web.1]: Started GET "/" for 76.170.69.45 at 2013-04-12 15:10:04 +0000
2013-04-12T15:10:04.088093+00:00 app[web.1]: SocketError (getaddrinfo: Name or service not known):
2013-04-12T15:10:04.084702+00:00 app[web.1]: Processing by ReviewsController#index as HTML
2013-04-12T15:10:04.088093+00:00 app[web.1]: 
2013-04-12T15:10:04.086820+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2013-04-12T15:10:04.088093+00:00 app[web.1]: 
2013-04-12T15:10:04.088093+00:00 app[web.1]:   app/controllers/reviews_controller.rb:5:in `index'
2013-04-12T15:10:04.450002+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=infinite-meadow-4922.herokuapp.com fwd="76.170.69.45" dyno=web.1 connect=1ms service=6ms status=304 bytes=0 
```

这是我的评论控制器。它指的是全文行。我正在使用似乎在开发环境中工作的 Sunspot gem。

```
class ReviewsController < ApplicationController
    def index

        # SUNSPOT/SOLR SEARCH RESULTS
        @search = Review.search do
            fulltext params[:search]
        end
        @reviews_search_results = @search.results
        # END SUNSPOT/SOLR SECTION

        @reviews = Review.all
        @pro_string = ''
        @reviews.each do |review|
            @pro_string = @pro_string + ' ' + review.pro
        end

        # CALL METHOD TO FIND MOST POPULAR PHRASES, TAKES ARGUMENT OF PHRASE LENGTH
        @frequency = final_phrase_list(@pro_string,3,5)
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:05:03.587

我认为您可能会发现此答案很有帮助，因为正如我所见，您使用的是全文搜索。

[SocketError (getaddrinfo: Name or service not known) - Sunspot/Solr Rails 开发](https://stackoverflow.com/questions/9654350/socketerror-getaddrinfo-name-or-service-not-known-sunspot-solr-rails-develo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:45:32.987

这是一个 500 页面，可以在 heroku 上的应用程序设置中进行更改。现在你很可能是亚马逊提供的页面。

如果您想解决导致 500 错误的任何原因，我会发布问题所在的索引操作（或整个控制器）（第 5 行）。

[https://devcenter.heroku.com/articles/error-pages](https://devcenter.heroku.com/articles/error-pages)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:54:31.493

你可以粘贴你的`ReviewsController#index`代码吗？正如这里的日志所说，错误发生在此方法的第 5 行。

该`heroku[router]`行在这里无关紧要，这只是 Heroku 路由器的日志行，用于从其他地方尝试为您的应用获取网站图标的单独请求。

### 更新

看起来你的`Review#search`方法导致了这个错误。你有没有调查过这可能有问题？

# php - 不同区域的会话安全

> ID：15975205
> 
> 赞同：0
> 
> 时间：2013-04-12T15:23:02.550
> 
> 标签：php, security, session-cookies

我有一个有两个区域的站点。一种适用于金卡会员，另一种适用于银卡会员。当用户登录时，我创建了两个会话变量；每个区域需要两个会话变量才能访问。

金牌：session-userId 和 session-gold

银牌：session-userId 和 session-silver

这是安全的吗？如果黑客窃取或将会话白银更改为会话黄金怎么办？然后他们可以访问不同的区域，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:29:01.410

有人不能只更改 php 创建的会话，例如 can cookie。想想看，cookie 被交给他们的机器，会话存储在服务器上并在断开连接时丢失。您应该确保清理所有输入，否则您的会话开始可以被操纵

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:27:33.040

来自黑客的安全是一个非常广泛的领域，而且可能非常棘手。您应该始终假设黑客可以破坏您的代码并获得访问权限。

因此，我将使用数据库而不是会话来确定用户权限，并且我不会使用纯会话值而是加密的值。也许你可以做这样的事情：

```
$_SESSION['user_level'] = sha1($userId . "session-silver"); 
```

然后在每次需要时比较正确的哈希值。请记住，通过默默无闻的安全性并不是一种安全的方法，因为黑客可能会窃取您的源代码。

免责声明：这个建议不是为了防弹，而是作为对当前代码的一个小而容易的改进，而不是太复杂而无法快速实施

# java - 如何在安卓模拟器上运行音频文件？

> ID：15975208
> 
> 赞同：1
> 
> 时间：2013-04-12T15:23:30.410
> 
> 标签：java, android, media-player

我制作了一个示例并尝试运行音频文件但无法运行它。我不知道它有什么问题，但无法弄清楚，因为它没有给我任何错误。我尝试了不同的示例，例如尝试播放 .mp3 或 .wav 文件，也尝试从缓存中运行文件，运行 ApiDemos 但均未成功。那么它与模拟器有关吗？我必须在模拟器中进行任何更改吗？

公共类 AudioDemo 扩展 Activity 实现 OnClickListener {

```
public int count = 0;
MediaPlayer mediaPlayer = null;  
Button toggleRain = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    // load layout
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    // load controls
    toggleRain = (Button)findViewById(R.id.play);
    // init player
    mediaPlayer = MediaPlayer.create(this, R.raw.sample);
    // set click event handler
    toggleRain.setOnClickListener(this);
    // init state for playing
    count = 0;
}

@Override    
public void onClick(View toggleRain) {
    if(count == 0){
        mediaPlayer.start();
        count = 1;
    } else {
        mediaPlayer.pause();                
        count = 0;
    }
}

@Override
protected void onDestroy() {
    if(mediaPlayer != null) {
        mediaPlayer.stop();
        mediaPlayer.release();
        mediaPlayer = null;
    }
} 
```

}

# html - 在wordpress中起作用的css子菜单

> ID：15975209
> 
> 赞同：-1
> 
> 时间：2013-04-12T15:23:33.597
> 
> 标签：html, css, wordpress, html-lists, submenu

我已经手动在我的 wordpress header.php 主题文件中添加了一个菜单，当我使用单个 ul 时，一切看起来都很棒，但是如果我使用 WP 的子菜单功能并在单个菜单链接下添加移动项目，那么你会发现一个奇怪的结果可以看到这里。 ![结果](https://i.stack.imgur.com/xhB15.png)

我正在寻找的结果是添加一个 :hover 效果，它只会显示子菜单项，但首先这些项目应该排成一行，在正确的 li 项目下（工作 - >求职者和工作机会）

为什么我得到了意想不到的 521px 子菜单宽度，我该如何解决我的困境

```
<li id="menu-item-103" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-103"><a href="http://ldpolishing.com/_dev/jobs/job-offers/">Jobs</a>
<ul class="sub-menu">
    <li id="menu-item-101" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-101"><a href="http://ldpolishing.com/_dev/jobs/job-seekers/">Job Seekers</a></li>
    <li id="menu-item-102" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-102"><a href="http://ldpolishing.com/_dev/jobs/job-offers/">Job Offers</a></li>
</ul>
</li> 
```

[链接到页面](http://ldpolishing.com/_dev/) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:52:02.667

原理很简单。您可以将您的父`<li>`标签设置为具有`position: relative;`，然后您可以将其设置`.sub-menu`为`position: absolute;`并设置为 ，`left: 0;`使其排列在您的左侧`<li>`。

然后您可以隐藏子菜单并在将鼠标悬停在 li 上时显示它。

试试这个 CSS：

```
#top .menu li {
   position: relative;
}

#top .menu .sub-menu {
   display: none;
   position: absolute;
   left:0;
   text-align: left;
   margin:0;
   width: 150px;
}

#top .menu .sub-menu .li {
   padding:0;
}

#top .menu li:hover > .sub-menu {
   display: block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:14:17.390

为什么不试试我构建的这个基于 jQuery 的菜单脚本呢？它使用 CSS 和 jQuery 的组合来制作可通过键盘访问的水平菜单，并支持多达五个级别的导航。此外，它具有上下文突出显示/调暗功能，在您遍历菜单时显示您的路径：

[http://code.google.com/p/keyboard-accessible-jquery-menu/](http://code.google.com/p/keyboard-accessible-jquery-menu/)

你可以在这里看到它的演示：

[http://designbymichael.com/dev/top-menu/demo/](http://designbymichael.com/dev/top-menu/demo/)

至于你的源代码，你遇到了一些问题——你的父 LI 标签应该有属性 position: relative 给你的子菜单一个启动的起点。然后，您的子菜单应该有 position: absolute ，然后相应地定位父导航。我还建议您在菜单间距中使用 margin-right 而不是 padding-right，因为您试图在菜单项之间放置一个边距空间，而不是仅在每个项目的一侧进行如此极端的填充。

正如@Ennui 指出的那样，如果您将其设为 JSFiddle (jsfiddle.net)，您将允许我们将您的副本分支出来，进行编辑，并向您展示我们的想法。

也就是说，为自己节省一点时间并使用预先构建的菜单脚本，而不是尝试重新发明轮子。无论如何，不​​要觉得你必须使用我的 - 有数百种脚本可供选择。

# javascript - 文件上传事件绑定

> ID：15975210
> 
> 赞同：5
> 
> 时间：2013-04-12T15:23:34.273
> 
> 标签：javascript, jquery, html, file-upload

当用户选择要上传的文件并单击“打开”时，有没有办法绑定事件，我想在用户单击打开时触发事件。

![在此处输入图像描述](https://i.stack.imgur.com/KTOZM.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T15:25:50.200

在这种情况下，该`change`事件将被触发。

如果你有这个 HTML：

```
<input type="file" id="fileInput" /> 
```

然后使用这个 JS：

```
window.onload = function () {
    document.getElementById("fileInput").onchange = function () {
        // this.value
    };
}; 
```

（可以选择使用`addEventListener`/`attachEvent`而不是设置`onclick`属性）

在处理程序内部，您可以使用`this.value`来选择文件。

当然，使用 jQuery，您可以使用：

```
$(document).ready(function () {
    $("#fileInput").on("change", function () {
        // this.value OR $(this).val()
    });
}); 
```

**注意：**和`window.onload`处理`$(document).ready`程序用于确保元素可用。当然，这个事件的发生可能比实际需要的晚得多，因为它们会等待页面上的所有元素都准备好（并且`window.onload`等待更长时间才能加载图像等内容）。一个选项是`onchange`在页面上的元素之后或在`<body>`.

# asp.net - 尝试触发 ASP.NET 自定义控制按钮事件时的问题

> ID：15975212
> 
> 赞同：0
> 
> 时间：2013-04-12T15:23:41.343
> 
> 标签：asp.net, custom-controls

我创建了一个简单的 asp.net 测试自定义控件，并试图弄清楚为什么单击事件不会触发。下面是代码。`Page_Load`我只是在使用该控件的 .aspx 页面的测试页面上创建控件的实例`protected void Page_Load(object sender, EventArgs e) { Page.Form.Controls.Add(new TestControl()); }`

该页面会回发，但不会在用户控件中获取点击事件。请解释我做错了什么或用特定模式等更好的方法来解决这个问题。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI.WebControls;
using System.Web.UI;

namespace WorldOfTest
{
    public class TestControl : WebControl { private Button btn;
    protected override void OnInit(EventArgs e)
    {            
        base.OnInit(e);
    }

    protected override void EnsureChildControls()
    {
        btn = new Button();           
        this.Controls.Add(btn); 
        base.EnsureChildControls();
    }

    protected override void CreateChildControls()
    {

        btn.Click += new EventHandler(btn_Click);  
        btn.Text = "test button";                         
        base.CreateChildControls();
    }

    void btn_Click(object sender, EventArgs e)
    {
        throw new NotImplementedException();
    }

    protected override void Render(System.Web.UI.HtmlTextWriter writer)
    {
        btn.RenderControl(writer); ;
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:37:13.770

如果您的按钮在控件集合中，则无需覆盖渲染并调用 btn.Render。我还会添加它并订阅事件 OnLoad。最后一件事，您需要实现 INamingContainer。

```
protected override void OnLoad(EventArgs e)
{
   btn = new Button();
   btn.Click += new EventHandler(btn_Click);  
   btn.Text = "test button";
   this.Controls.Add(btn);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:28:05.307

当您将自定义控件添加到页面时，请使用 LoadControl。

```
var control = (TestControl)LoadControl("~/path/to/TestControl.ascx");
Page.Form.Controls.Add(control); 
```

# opengl - 多点的openGL旋转

> ID：15975213
> 
> 赞同：0
> 
> 时间：2013-04-12T15:23:42.220
> 
> 标签：opengl

基本上，我在这里对使用 OpenGL 和 C++ 的多个点的旋转问题有些困惑。

如何在（42,42）和（-42,42）的旋转点旋转简单的矩形？我的盒子从点 (46,0) 移动到 (46,42) 并在旋转点 (42,42) 旋转 +90 度到 (42,46) （这里没有说明其他 3 个点，因为它们是相对的到第一点）。

然后我的盒子从 (42,46) 移动到 (-42,46) 并在 (-42,42) 处做了一个简单的 90 度。最后我的盒子移动到点（-46,42）。从 (-46,42) 移动到 (-46,0)。

我尝试使用`glPushMatrix()`, `glTranslatef(42,42,0)`, `glRotatef(theta2, 0.0, 0.0, 1.0)`, `glTranslatef(-42,-42,0)`. 但它只适用于第一个旋转点。对于下一个旋转点，它似乎不起作用。有什么办法可以解决这个问题吗？

# iphone - 关闭 iAd 后 UIToolbar 消失

> ID：15975214
> 
> 赞同：1
> 
> 时间：2013-04-12T15:23:43.387
> 
> 标签：iphone, ios6, iad

在 UIViewController 上基于 NSTimer 更新 UIImage View 和 UITextView。在显示 iAd 的同一个 UIViewController 和 iAd 的正下方有 UIToolbar。当点击 iAd 然后关闭它时，UIViewController 上的 UIToolbar 消失。有谁知道是什么原因？

```
 - (void)viewDidLoad
 {

 [super viewDidLoad];

 float _gap = 1;

myTimer = [NSTimer scheduledTimerWithTimeInterval:_gap
                                           target:self
                                         selector:@selector(onTimer)
                                         userInfo:nil
                                          repeats:NO];

_adView = [[ADBannerView alloc] initWithFrame:CGRectMake(0, 380, 320, 25)];
_adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifier320x50];
_adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifier320x50;
_adView.delegate=self;
self.bannerIsVisible=YES;
 [self.view addSubview:_adView];
 }

-(void) onTimer {

if  (index < [textArray count])
{

    self.textView.text = [self.textArray objectAtIndex:index];

    self.imageView.image = [self.imagesArray objectAtIndex:index];

    index++;

    thisTimer = [NSTimer scheduledTimerWithTimeInterval:1.70 target:self selector:@selector(ViewTiming) userInfo:nil repeats:NO];

}else{

   // index = 0;

    ViewController *viewController = [[ViewController alloc] init];

    viewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

    [self presentViewController:viewController animated:YES completion:NULL];

}}

-(void)ViewTiming{

if (index == 1) {

    self.textView.text = [self.textArray objectAtIndex:index];

    self.imageView.image = [self.imagesArray objectAtIndex:index];

    index++;

   aTimer = [NSTimer scheduledTimerWithTimeInterval:2.55 target:self selector:@selector(Second) userInfo:nil repeats:NO];

}}

-(void)Second{
if (index == 2){

    self.textView.text = [self.textArray objectAtIndex:index];

    self.imageView.image = [self.imagesArray objectAtIndex:index];

    index++;

    aTimer = [NSTimer scheduledTimerWithTimeInterval:2.80 target:self selector:@selector(Third) userInfo:nil repeats:NO];

}}

-(void)Third{

if (index == 3){

    self.textView.text = [self.textArray objectAtIndex:index];

    self.imageView.image = [self.imagesArray objectAtIndex:index];

    index++;

     aTimer = [NSTimer scheduledTimerWithTimeInterval:2.95 target:self selector:@selector(Fourth) userInfo:nil repeats:NO];
}}

-(void)Fourth{

if (index == 4){

    self.textView.text = [self.textArray objectAtIndex:index];

    self.imageView.image = [self.imagesArray objectAtIndex:index];

    index++;

    aTimer = [NSTimer scheduledTimerWithTimeInterval:3.00 target:self selector:@selector(Fifth) userInfo:nil repeats:NO];
}}

 -(void)Fifth{

if (index == 5){

    self.textView.text = [self.textArray objectAtIndex:index];

    self.imageView.image = [self.imagesArray objectAtIndex:index];

    index++;

    aTimer = [NSTimer scheduledTimerWithTimeInterval:3.00 target:self selector:@selector(Sixth) userInfo:nil repeats:NO];
}} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:00:47.030

尝试添加

```
[self.view addSubview:toolbar]; 
```

在 viewDidLoad

可能会解决你的问题。

# c# - 为什么在安装我的 Windows 服务时会记录系统错误 7030？

> ID：15975218
> 
> 赞同：1
> 
> 时间：2013-04-12T15:24:09.570
> 
> 标签：c#, windows-services, installation

每次在运行 Windows 7 或 Windows Server 2008 R2 的系统上安装我的 Windows 服务（用 C# 开发，Visual Studio 2010）时，都会记录系统错误 7030。该服务未配置为交互式。我创建的自定义[安装程序子类将帐户类型设置为 NetworkService：](http://msdn.microsoft.com/en-us/library/system.configuration.install.installer.aspx)

```
private System.ServiceProcess.ServiceProcessInstaller _serviceProcessInstaller;
private System.ServiceProcess.ServiceInstaller _serviceInstaller;

public ProjectInstaller()
{
    InitializeComponent();
}

private void InitializeComponent()
{
    _serviceProcessInstaller = new System.ServiceProcess.ServiceProcessInstaller();
    _serviceInstaller = new System.ServiceProcess.ServiceInstaller();
    _serviceProcessInstaller.Account = System.ServiceProcess.ServiceAccount.NetworkService;
    _serviceProcessInstaller.Password = null;
    _serviceProcessInstaller.Username = null;

    _serviceInstaller.ServiceName = Resources.ServiceName;
    _serviceInstaller.Description = Resources.ServiceDescription;
    _serviceInstaller.StartType = System.ServiceProcess.ServiceStartMode.Automatic;

    Installers.AddRange(new Installer[]
                            {
                               _serviceProcessInstaller,
                               _serviceInstaller
                            });
} 
```

我也尝试将帐户类型设置为 LocalSystem，但在这种情况下也会记录错误 7030。

在同一个安装程序子类中，我还尝试根据[如何在代码中配置我的 Windows 服务以访问桌面？](https://stackoverflow.com/questions/1945529/how-can-i-configure-my-windows-service-in-the-code-to-access-the-desktop)：

```
 /// <summary>
    /// Override OnCommitted() to overwrite the value of Interactive to be false.
    /// </summary>
    /// <remarks>
    /// See https://stackoverflow.com/questions/1945529/how-can-i-configure-my-windows-service-in-the-code-to-access-the-desktop
    /// </remarks>
    /// <param name="savedState"></param>
    protected override void OnCommitted(System.Collections.IDictionary savedState)
    {
        const string pathToKey = @"SYSTEM\CurrentControlSet\services\MyService.exe";
        const string type = "Type";

        using (var registryKey = Registry.LocalMachine.OpenSubKey(pathToKey, true))
        {
            if (registryKey != null && registryKey.GetValue(type) != null)
            {
                registryKey.SetValue(type, (((int)registryKey.GetValue(type) & ~0x100)));
            }
        }

        base.OnCommitted(savedState);
    } 
```

这两次修复尝试都没有奏效。我还在 SO 上查看了以下内容：[“允许服务与桌面交互”的替代方案？](https://stackoverflow.com/questions/2345620/alternative-to-allow-service-to-interact-with-desktop)以及[如何在 Windows 服务安装程序中设置“与桌面交互”](https://stackoverflow.com/questions/3351531/how-to-set-interact-with-desktop-in-windows-service-installer)。

# mongodb - 如何在mongodb中替换数组字段中的元素

> ID：15975219
> 
> 赞同：1
> 
> 时间：2013-04-12T15:24:11.090
> 
> 标签：mongodb, doctrine-odm

字段标签是场景文档中的数组。我想将数组中的元素 'Bad' 替换为 'Good' 为：

```
db.scenes.update({ 'tags': 'Bad' }, { $set: { 'tags.$' : 'Good' } }, { 'multi':true}); 
```

我不知道如何在教义中做到这一点。我试过了

```
 $dm->createQueryBuilder('SceneBundle:Scene')
        ->update()
        ->field('tags.$')->set($tag)
        ->field('tags')->equals($oldTag)
        ->multiple(true)
        ->getQuery()
        ->execute(); 
```

但不工作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-31T13:31:53.723

已经很长时间了，但是为了不离开这篇文章而没有一个好的答案，我找到了一个可以帮助我们的链接（ [Mongodb 数组 $push 和 $pull ）。](https://stackoverflow.com/questions/34217874/mongodb-array-push-and-pull)

> 问题是 MongoDB 不允许在同一个更新调用中对同一个属性进行多个操作。这意味着这两个操作必须发生在两个单独的原子操作中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:38:29.050

没有一个单独的替换功能，但是您可以通过将所有“坏”拉出并推入“好”来在一个查询中完成

```
db.scenes.update({ 'tags': 'Bad' }, { $pull: { 'tags' : 'Bad' }, $push: { 'tags' : 'Good' } }, { 'multi':true}); 
```

等效的学说应该是：

```
 $dm->createQueryBuilder('SceneBundle:Scene')
    ->update()
    ->field('tags')->pull('Bad')
    ->field('tags')->push('Good')
    ->field('tags')->equals('Bad')
    ->multiple(true)
    ->getQuery()
    ->execute(); 
```

请参阅此处的教义文档：http: [//docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/query-builder-api.html)

# primefaces - 如何在 Primefaces 的日历组件中设置年份列表？

> ID：15975222
> 
> 赞同：5
> 
> 时间：2013-04-12T15:24:17.407
> 
> 标签：primefaces, calendar

是否存在任何设置primefaces日历组件的年份列表的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-23T05:24:00.430

对于年份列表，您可以在标签和年份范围中使用`navigator="true"`primefaces 的属性（将显示从 100 年开始到未来 100 年的年份范围。`p:calendar``c-100:c+100`

所以代码看起来像

```
<p:calendar id="someid"  yearRange="c-100:c+100" navigator="true"/> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-13T23:14:40.613

如果你只需要一个年份列表，你可以这样做：

```
<p:calendar value="#{backingBean.date}" navigator="true" yearRange="-100" showOn="button" /> 
```

这将向您显示当前年份和一百年前的列表。

问候

# visual-studio - IIS Express 不会在第一次尝试时启动，但之后会正常启动。如何进行故障排除？

> ID：15975226
> 
> 赞同：2
> 
> 时间：2013-04-12T15:24:20.900
> 
> 标签：visual-studio, iis, iis-express

我正在运行 Visual Studio Professional 2012，最近 IIS Express 在我调试 asp.net mvc 应用程序时尝试在第一次尝试时启动。它最终超时，我收到一个错误对话框，指出 Visual Studio 无法启动 IIS Express。如果我再次按运行/调试，它会按预期启动浏览器并导航到该站点。这基本上很烦人，因为这种情况一天会发生好几次。我查看了 Windows 事件日志，似乎找不到与 IIS Express 或 Visual Studio 错误相关的任何内容。我真的很想解决这个问题，因为它曾经一直正常启动。它一定是一些扩展或者我可能添加到 Visual Studio 中的东西。我在这一点上很困。有人对我如何解决这个最烦人的问题有任何建议吗？感谢您提供任何导致解决方案的提示或技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:20:12.507

我也有同样的问题。可能不是你想的那样。

用于 ASP.NET (+MVC) 项目的 Visual Studio 尝试开始启动 URL。此 URL 可能与您将 IIS Express 站点部署到的位置不匹配。

右键单击您的 Web 项目并选择`Properties`. 选择`Web`，然后`Use Local IIS Web Server`确保它具有正确的 URL。

您可能仍然有调试问题；您可以使用`Attach to Process`连接到`iisexpress.exe`.

# matlab - Matlab标记一个点

> ID：15975228
> 
> 赞同：1
> 
> 时间：2013-04-12T15:24:33.227
> 
> 标签：matlab, graph, plot, matlab-figure

我需要在以下图上标记一个点：
![在此处输入图像描述](https://i.stack.imgur.com/0El4h.jpg)

特别是，我需要在 25 处标记红线，它是对应的 y 轴值。我该怎么做呢？

我试着看[这里，](https://stackoverflow.com/questions/5606958/mark-points-with-a-value-in-a-matlab-plot)但我并没有真正理解解决方案（该代码到底在做什么？？）但我不知道我是否想要那个。我想要更多带有坐标的斜线，有点像这样：

```
 (2,5)
   /
  /
 /
/ 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:29:07.770

使用类型的[注释](http://www.mathworks.com/help/matlab/ref/annotation.html)。`textarrow`这是文档中的一个示例：

```
plot(1:10);
a = annotation('textarrow', [.3 .5], [.6 .5], 'String' , 'Straight Line'); 
```

![在此处输入图像描述](https://i.stack.imgur.com/cuZgi.png)

* * *

**编辑**：

请注意，这`annotation`需要与轴单位不同的标准化图形单位 (nfu) 中的坐标。要将轴单位转换为 nfu，我喜欢使用[DS2NFU](http://www.mathworks.com/matlabcentral/fileexchange/10656-data-space-to-figure-units-conversion) FileExchange sumbission。

这是一个使用来自@gnovice 的链接问题和答案的示例。

```
X = [21 8 2 1 0];
Y = [0 1 2 3 4];
plot(X,Y,'k-s')
strValues = strtrim(cellstr(num2str([X(:) Y(:)],'(%d,%d)')));
% where the arrow should go from
gapx = 1; 
gapy = 0.1;
% axes limits
xl = xlim;
yl = ylim;

for k=1:numel(X)
    % convert X and Y coordinates to figure units
    pos = ds2nfu([X(k), Y(k), gapx, gapy]);
    if X(k)+gapx < xl(2)
        posx = [pos(1)+pos(3) pos(1)];
    else
        posx = [pos(1)-pos(3) pos(1)];
    end
    if Y(k)+gapy < yl(2)
        posy = [pos(2)+pos(4) pos(2)];
    else
        posy = [pos(2)-pos(4) pos(2)];
    end

    annotation('textarrow',posx,posy,'String',strValues{k});
end 
```

![在此处输入图像描述](https://i.stack.imgur.com/3ceBY.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:47:58.040

这主要是对 yuk 已经完整答案的补充。事实证明，Matlab 附带了一个工具来执行轴 --> 图形坐标转换。[请参阅http://www.mathworks.com/help/matlab/creating_plots/positioning-annotations-in-data-space.html](http://www.mathworks.com/help/matlab/creating_plots/positioning-annotations-in-data-space.html)上的讨论。此页面还包括使用“textarrow”注释的示例。

* * *

**TL;博士：**

```
addpath([docroot '/techdoc/creating_plots/examples']) 
```

公开一个名为`dsxy2figxy`.

* * *

**示例使用：**

```
%Perform the addpath (this is relativly slow, try to only do it once.)
addpath([docroot '/techdoc/creating_plots/examples'])  %Needed for dsxy2figxy

%Create some figure to look at
figure(219376); clf
x = linspace(0.8, 40, 1000);
y = 1./x;
plot(x,y, 'b-')
hold on

%Mark position 100
tipXy  = dsxy2figxy(gca, x(100),   y(100));
tailXy = dsxy2figxy(gca, mean(x), mean(y));
h = annotation('textarrow', [tailXy(1) tipXy(1)], [tailXy(1) tipXy(1)],...
    'String',['  (' num2str(x(100)) ',' num2str(x(100)) ')']); 
```

# c# - C# 数组列表到数组数组

> ID：15975230
> 
> 赞同：3
> 
> 时间：2013-04-12T15:24:36.790
> 
> 标签：c#, arrays

我是 C# 新手。我正在编写一个程序，其中列表根据用户输入改变大小。该列表是 GPS 坐标，所以它是

```
List<double[]> coordinates= new List<double[]>(); 
```

但是我有一个函数需要`double[][]`格式的 GPS 坐标，一个数组数组。看起来这将非常简单，因为看起来数组列表已经是数组数组。但是，我能想到的最合乎逻辑的事情失败了：

```
double[][]test = new double[][]{};

test = coordinates.ToArray; 
```

“无法将方法组 'ToArray' 转换为非委托类型 'double[][]'。您是否打算调用该方法？”

不确定这意味着什么或如何解决。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T15:27:15.103

要在 C# 中调用方法，您需要使用括号，如下所示：`test = coordinates.ToArray();`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T15:31:52.243

你忘了括号：

```
double[][]test = coordinates.ToArray(); 
```

# ruby - 我的 Ruby 应用程序需要什么样的托管服务？

> ID：15975234
> 
> 赞同：0
> 
> 时间：2013-04-12T15:24:42.177
> 
> 标签：ruby, hosting, cloud-hosting

我是一名中级程序员，主要是最新的由 Apache 提供的网页/应用程序，可以在我自己的机器上或在廉价的虚拟主机上运行。

我创建了一个 JRuby 应用程序，它从 Web 中提取财务数据，对其执行各种计算，然后使用这些数据创建网页。控制流由 bash shell 脚本执行，目前在我的机器上每五分钟运行一次。有时，我使用稍大的数据集运行程序，并且在我的机器（4 年前的笔记本电脑）上完成计算可能需要一个小时。我最终想使用一个更大的数据集，我估计这需要我的机器超过 24 小时才能完成。出于几个原因，我决定看看我是否可以在网络上托管这个应用程序。第一个是能够在移动时进行编程，另一个是提高性能，最后是成本。

我一直在关注 Linode、Digital Ocean、Amazon EC2 和 Rackspace，但我不确定哪种服务能满足我的需求。目前，我是唯一一个使用这些数据的人，我遇到的“打嗝”是由于处理器密集型计算，而不是带宽或内存限制（假设代码尽可能高效地编写）。如果我从 Linode 或 DO 获得 1 核 512mb/1gb VPS，我会看到改进吗？我正在寻找的服务与我上面提到的服务不同吗？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:08:00.640

这个问题有点主观，但我认为 AWS 或其他一些云解决方案是您最好的选择，这样您可以在需要进行一些数字运算时启动一个实例，并在完成后将其关闭。这将使您能够在需要时启动一个非常强大的服务器，但是当您不这样做时，它不会花费您任何费用。这最终可能比使用每月订阅 VPS 模式便宜得多。AWS 和 Rackspace 都有非常适合此类使用的云产品。

# joomla2.5 - 如何在 Joomla 中编辑分页样式？

> ID：15975238
> 
> 赞同：0
> 
> 时间：2013-04-12T15:24:53.513
> 
> 标签：joomla2.5

对于那些了解 Joomla CMS (v2.5) 的人！

如下图所示，我有一篇文章，它在右侧的一个框中显示其目录（文章索引）（分页符的默认样式）。

我想将此框镜像到文章的左侧，以将其用作广告位置。最好，我想制作一个替代文章布局，并从我希望它显示的文章的文章参数中选择它。

我无法找到该文件。文章布局位于`components/com_content/views/article/tmpl/default.php`，文章索引应该位于，`components/com_content/view/article/tmpl/pagebreak.php`但我找不到此文件。

谁能建议在哪里可以找到此代码？

如果您知道有关创建模板的教程，请传递。我找到了这个[http://docs.joomla.org/Layout_Overrides_in_Joomla_2.5](http://docs.joomla.org/Layout_Overrides_in_Joomla_2.5)但还没有尝试过。

![在此处输入图像描述](https://i.stack.imgur.com/mqSYq.png)

# php - 动态页面和 URL

> ID：15975239
> 
> 赞同：0
> 
> 时间：2013-04-12T15:24:58.190
> 
> 标签：php, mysql, database, content-management-system

我正在开发一个允许轻松浏览页面的小型系统。我遇到问题的地方是 URL 结构——我想避免在我的 URL 中包含不必要的参数而没有 SEO 价值。

到目前为止，我一直在使用这样的页面结构：

```
http://www.example.com/pages.php?id=3 
```

但是，我想动态创建一个结构，其中我的链接对 SEO 更友好，但我仍然可以在我的数据库中查询适当的页面。

截至目前，这是我的（非常简化的）页面结构：

```
id | url            | title
-------------------------------------
1  | my-first-page  | My first page
2  | my-second-page | My second page
3  | my-third-page  | My third page 
```

等等。

有没有办法从“ [http://example.com/my-first-page](http://example.com/my-first-page) ”查询“my-first-page ”？

我知道 $_GET 函数允许我从类似于“ [http://www.example.com/pages.php?id=3](http://www.example.com/pages.php?id=3) ”的链接中获取页面 ID（在案例 3 中），但仅此而已我目前的知识扩展。

有人可以指出我正确的方向吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:29:37.480

看看**htAccess**结构（Apache 的教程在[这里](http://httpd.apache.org/docs/2.2/en/howto/htaccess.html)）。

实际上，您仍然可以使用 ，`$_GET`但是使用`RewriteRule`，您可以扩展它并根据需要使其更加用户友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:46:38.113

在你的 .htaccess 中有这样的东西

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.+)$ pages.php?id=$1 [QSA,L] 
```

那么如果你的链接是 pages.php/1 它将等同于 pages.php?id=1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:48:28.617

我很确定 WordPress 的做法是，它使用 .htaccess 将所有流量重定向到单个 URL（路由器），然后查看`$_SERVER["REQUEST_URI"]`并加载用户请求的正确页面。

# macos - 如何捕获空间的提要并将其嵌入到类似于任务控制空间预览的 NSView 中？

> ID：15975242
> 
> 赞同：2
> 
> 时间：2013-04-12T15:25:01.223
> 
> 标签：macos, cocoa, core-graphics, spaces, mission-control

我想做的是显示另一个空间的桌面预览，就像当前空间的实现显示所有其他桌面的预览一样。我在底部提供了一个图形供视觉参考。您可以在桌面 1 上看到我在 StackOverflow 上，在桌面 2 上我正在观看 youtube 上的视频。在 Spaces 中，即使我在 Desktop 1 上，我仍然可以在播放视频时看到 Desktop 2 的小预览。简而言之，我想做的是在我的应用程序中实现相同的功能，在那里我抓取 Spaces 使用的相同提要（如果正在播放视频，我会看到它播放）并将其放在我的主应用程序的 NSView 中窗户。这是可能吗？

![Spaces 桌面预览示例](https://i.imgur.com/ophjy8v.jpg)

# mysql - 如何从数据库中查找所有具有“限制”值的 onDelete 子句？

> ID：15975243
> 
> 赞同：0
> 
> 时间：2013-04-12T15:25:03.167
> 
> 标签：mysql, sql, clause

我需要在数据库中找到并修复所有`onDelete`外键子句`MySQL`，因为它们现在都是默认的`RESTRICT`。

这可以通过 MySQL 查询来完成吗？

至少找到所有的外键

**@peterm 回答后更新：**

```
SELECT * FROM information_schema.`REFERENTIAL_CONSTRAINTS` 
WHERE CONSTRAINT_SCHEMA = '%database_name%' AND delete_rule = 'RESTRICT'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:52:21.887

您可以使用[`INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS`](http://dev.mysql.com/doc/refman/5.1/en/referential-constraints-table.html)

> REFERENTIAL_CONSTRAINTS 表提供有关外键的信息。

`DELETE_RULE`领域是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:37:21.013

要查找数据库表中的所有外键，您可能需要尝试以下 SQL 查询：

```
use INFORMATION_SCHEMA;

select TABLE_NAME,COLUMN_NAME,CONSTRAINT_NAME,
REFERENCED_TABLE_NAME,REFERENCED_COLUMN_NAME from KEY_COLUMN_USAGE where
REFERENCED_TABLE_NAME = '<mytable>'; 
```

或者您也可以尝试执行以下查询来显示表是如何创建的：

```
SHOW CREATE TABLE <mytable>; 
```

# css - 对齐 td 内的两个跨度 - 一左一右

> ID：15975247
> 
> 赞同：13
> 
> 时间：2013-04-12T15:25:09.307
> 
> 标签：css

我有一张桌子。在 td 里面我有两个 span 标签——一个 span 标签我想左对齐，另一个右对齐，但是 td 不允许这样做：

```
<table>
  <tr>
    <td colspan="5"><span>$</span><span>1000</span></td>
  </tr>
</table> 
```

所以我希望**$**与 td的最**左侧对齐，而****1000**与 td 的最**右侧**对齐。

那可能吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-12T15:30:02.350

您可以使用以下选择器，而无需使用额外的类：

```
td span:last-child{ /*not compatible with <=IE8*/
    color:green;
    float:right;
} 
```

演示：http: [//jsfiddle.net/QR3kP/1/](http://jsfiddle.net/QR3kP/1/)

* * *

为了与 IE7 及更高版本兼容，请使用以下 CSS 代码：

```
td span{
    float:right;
}
td span:first-child{ /* compatible to >=IE7 */
    float:left;
} 
```

演示：http: [//jsfiddle.net/QR3kP/4/](http://jsfiddle.net/QR3kP/4/)

* * *

另一种方法是右对齐里面的文本`<td>`并且`float`只有第一个`<span>`：

```
td {
    text-align:right
}
td span:first-child {
    float:left;
} 
```

演示：http: [//jsfiddle.net/QR3kP/29/](http://jsfiddle.net/QR3kP/29/)

* * *

您可以通过使用更少的 css 声明来使用与上述类似的方法：

```
td span:first-child + span {
    float:right;
} 
```

在上面的示例中，默认`td`文本对齐是左对齐，您只选择紧跟在 first 之后的同级`span`。然后你就`float`在右边。当然，你可以使用选择器，**在这种情况下**`~`也是一样的。

 **演示：http: [//jsfiddle.net/QR3kP/32/](http://jsfiddle.net/QR3kP/32/)

* * *

请参阅此处的兼容性图表：http: [//kimblim.dk/css-tests/selectors/](http://kimblim.dk/css-tests/selectors/)

在此处查看 CSS 选择器：http: [//www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T15:29:46.173

最好的方法是在每个跨度上放置一个类并将浮点数应用于每个类

HTML

```
<span class="left">$</span><span class="right">1000</span> 
```

CSS

```
.left{float:left;}
.right{float:right;} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T15:28:15.043

可能最好用花车来做。

```
<td colspan="5"><span class="left">$</span><span class="right">1000</span></td> 
```

CSS：

```
.left {
    float: left
}

.right {
    float: right;
} 
```

jsFiddle：http: [//jsfiddle.net/NLZU5/](http://jsfiddle.net/NLZU5/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T15:28:41.510

您可以设置包含，以及包含您`float: left`的美元金额。`span``$``float: right``span`

这是一个简单的[演示](http://jsfiddle.net/YyEa6/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-12T15:27:32.723

最简单的方法是将第一个浮动到左边，第二个浮动到右边

[http://jsfiddle.net/L3QU2/1/](http://jsfiddle.net/L3QU2/1/)

```
<table width="100%">
  <tr>
    <td colspan="5">
      <span style="float:left">$</span>
      <span style="float:right">1000</span></td>
  </tr>
</table> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-12T15:28:35.210

尝试这个：

```
<table style="width:100%">
  <tr>
    <td colspan="5"><span style="float:left;">$</span><span style="float:right;">1000</span></td>
  </tr>
</table> 
```

**[演示](http://jsfiddle.net/eKEbF/1/)**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-12T15:28:44.670

您可以`float`使用 CSS 类定义跨度的样式。

```
<style>
    .left { float: left; }
    .right { float: right; }
</style>

<table>
  <tr>
    <td colspan="5">
        <span class="left">$</span>
        <span class="right">1000</span>
    </td>
  </tr>
</table> 
```**

# exception - 为什么我的 IIS7 应用程序池在从 ASP.NET 页面调用的 DLL 中出现异常后关闭？

> ID：15975249
> 
> 赞同：24
> 
> 时间：2013-04-12T15:25:12.277
> 
> 标签：exception, iis-7, application-pool

我已阅读帖子[ASP.NET 应用程序池关闭问题](https://stackoverflow.com/questions/4742122/asp-net-application-pool-shutdown-problem)和[IIS 7.5：应用程序池问题，](https://stackoverflow.com/questions/5486482/iis-7-5-problem-with-application-pool)但他们没有回答我的问题。

我有一个 C# ASP.NET 页面，它在代码隐藏中从通过 BIN 目录提供的 DLL 实例化一个类，然后在这个实例上调用一个方法。DLL 内的方法`System.ArgumentException`由于对象中不存在的列而引发`DataRow`。事件日志显示以下错误：

```
Source: ASP.NET 2.0.50727.0
Application ID: /LM/W3SVC/1/ROOT/...
Process ID: 9476
Exception: System.ArgumentException
Message: Column 'someColumn' does not belong to table.
StrackTrace: 
```

ASP.NET 页面中的调用代码将方法调用包装在一个通用`try-catch`块中。当我请求该页面时，这会使我的 IIS 实例的相应应用程序池崩溃，并且我的网站不再可用（错误 503）。我必须手动重新启动应用程序池，并且该站点再次运行。

**根据后面的 ASP.NET 代码的要求**更新**`try catch`块：**

 **```
try
{
    SomeExternalClass someExternalClass = new SomeExternalClass();
    someExternalClass.SomeMethod( someId );
}
catch( Exception ex )
{
    // "smp" is an instance of "StatusMessagePanel", a control we use on all pages 
    // to show error information, basically a div container with an icon.
    smp.ShowError( ex.Message ); 
} 
```

现在我的问题是，为什么一个相对“简单”的异常（例如`System.ArgumentException`在尝试访问不存在的`DataRow`列时抛出）会使整个网站崩溃？ASP.NET 页面的通用`try-catch`块也没有帮助，这也不应该是使整个网站完全不可用的原因，或者这是一个错误的假设？我从没想过这基本上可以使（II）服务器停机。

期待人们告诉我应该在访问它们之前检查列是否存在：我知道这一点，并且遗留代码现在已经更改，但这不是我上面描述的问题，我想知道为什么后果如此严重。

**更新 2**

在 DLL 中调用的有问题的方法会启动一个封装在`try-catch`块中的线程：

```
[...]
try
{
    ThreadStart starter = () => CreateReport(...)
    Thread thread = new Thread( starter );
    thread.Start();
    if( !thread.Join( TimeSpan.FromMinutes( 15 ) ) )
    {
        // Log some timeout warning
    }
    else
    {
        // Log information about successful report generation
    }
}
catch( Exception ex )
{
    // Log error information
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T07:27:00.030

正如您在链接问题中所指出的那样，您的应用程序池很可能会被[IIS 的快速故障保护](http://www.iis.net/configreference/system.applicationhost/applicationpools/add/failure)功能自动关闭。如果您检查事件日志，可能会快速连续抛出多个未处理的异常。

简单地说，在可配置的时间跨度内（默认为 5 分钟内发生 5 个）足够多的未处理异常将关闭 AppPool，从而导致 503 Service Unavailable 响应。

此功能背后的原因是，如果您的应用程序出现故障，您可能不希望它在每次后续请求时自动重新启动，从而消耗资源并可能损坏数据。

我不得不承认这也不是我所期望的“默认”行为。

查看[Rick Stahls](http://www.west-wind.com/weblog/posts/2006/Dec/19/IIS-7-and-Rapid-Fail-Protection)的解释，它更深入一点。

要真正解决此问题，您需要捕获异常，或防止抛出异常（如@leppie 建议的那样）。未处理的异常应该破坏整个执行过程（意味着单个请求/工作进程，而不是 IIS） - 它使 .Net 代码更容易调试，因为它不会隐藏错误或简单地挂起应用程序。

请注意，这在 .Net 2.0 中已更改：http:
[//msdn.microsoft.com/en-us/library/ms228965.aspx](http://msdn.microsoft.com/en-us/library/ms228965.aspx)
[http://support.microsoft.com/kb/911816](http://support.microsoft.com/kb/911816)

**更新**
根据您上面的更新，我认为您的异常实际上不会被捕获，如果它是从`CreateReport()`. 该方法在单独的线程上执行：

![仍然抛出异常](https://i.stack.imgur.com/rzTKJ.png)

如果还没有，你需要一个 try-catch `CreateReport()`：

```
public static void CreateReport() {
    try {
        throw new Exception("reducto");
    } catch {
        Console.WriteLine("done did.");
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T18:47:29.967

它发生在我身上一次。真正的错误（在我的情况下）是关闭池的堆栈溢出。

似乎 IIS 正在保护自己免于消耗过多的资源。

我使用 DebugDiag 发现了问题。

这是我开始的地方：[http ://www.webdebug.ne​​t/index.php/2012/12/collect-iis-crash-dump-with-debugdiag/](http://www.webdebug.net/index.php/2012/12/collect-iis-crash-dump-with-debugdiag/)

> 我想了解为什么外部 DLL 中的异常会导致 IIS 应用程序池关闭，即使异常在 DLL 中被捕获，并且在从 ASP.NET 页面后面的代码中调用 DLL 的方法时也是如此.

外部 dll 也在您的应用程序池中运行。此 dll 中的重大崩溃也会使您的应用程序池崩溃。有些异常无法处理，stackoverflow 异常就是其中之一。[这里](http://stackoverflow.com/questions/1599219/c-sharp-catch-a-stack-overflow-exception)讨论主题。也许这就是你的情况。**

# android - Amazon PurchasingObserver 未收到回调

> ID：15975252
> 
> 赞同：1
> 
> 时间：2013-04-12T15:25:25.540
> 
> 标签：android, in-app-purchase, amazon

我正在尝试将[亚马逊应用购买](https://developer.amazon.com/sdk/in-app-purchasing.html)添加到我的安卓应用中，但遇到了一些问题。我的 PurchasingObserver 子类没有收到任何回调。以下是一些相关代码：

AmazonPurchasingObserver.java（几乎是亚马逊示例应用程序中 ButtonClickerObserver.java 的副本）

```
public class AmazonPurchasingObserver extends BasePurchasingObserver {

...

/**
 * Creates new instance of the ButtonClickerObserver class.
 * 
 * @param buttonClickerActivity Activity context
 */
public AmazonPurchasingObserver(final Activity activity) {
    super(activity);
    this.baseActivity = activity;
}

/**
 * Invoked once the observer is registered with the Puchasing Manager If the boolean is false, the application is
 * receiving responses from the SDK Tester. If the boolean is true, the application is live in production.
 * 
 * @param isSandboxMode
 *            Boolean value that shows if the app is live or not.
 */
@Override
public void onSdkAvailable(final boolean isSandboxMode) {
    //This method gets hit!!
    Log.v(TAG, "onSdkAvailable recieved: Response -" + isSandboxMode); 
    PurchasingManager.initiateGetUserIdRequest();
}

/**
 * Invoked once the call from initiateGetUserIdRequest is completed.
 * On a successful response, a response object is passed which contains the request id, request status, and the
 * userid generated for your application.
 * 
 * @param getUserIdResponse
 *            Response object containing the UserID
 */
@Override
public void onGetUserIdResponse(final GetUserIdResponse getUserIdResponse) {
    //This method does NOT get hit!!!
    Log.v(TAG, "onGetUserIdResponse recieved: Response -" + getUserIdResponse);
    Log.v(TAG, "RequestId:" + getUserIdResponse.getRequestId());
    Log.v(TAG, "IdRequestStatus:" + getUserIdResponse.getUserIdRequestStatus());
    new GetUserIdAsyncTask().execute(getUserIdResponse);
}

/**
 * Invoked once the call from initiateItemDataRequest is completed.
 * On a successful response, a response object is passed which contains the request id, request status, and a set of
 * item data for the requested skus. Items that have been suppressed or are unavailable will be returned in a
 * set of unavailable skus.
 * 
 * @param itemDataResponse
 *            Response object containing a set of purchasable/non-purchasable items
 */
@Override
public void onItemDataResponse(final ItemDataResponse itemDataResponse) {
    //This method does NOT get hit!!!
    Log.v(TAG, "onItemDataResponse recieved");
    Log.v(TAG, "ItemDataRequestStatus" + itemDataResponse.getItemDataRequestStatus());
    Log.v(TAG, "ItemDataRequestId" + itemDataResponse.getRequestId());
    new ItemDataAsyncTask().execute(itemDataResponse);
}

/**
 * Is invoked once the call from initiatePurchaseRequest is completed.
 * On a successful response, a response object is passed which contains the request id, request status, and the
 * receipt of the purchase.
 * 
 * @param purchaseResponse
 *            Response object containing a receipt of a purchase
 */
@Override
public void onPurchaseResponse(final PurchaseResponse purchaseResponse) {
    //This method does NOT get hit!!!
    Log.v(TAG, "onPurchaseResponse recieved");
    Log.v(TAG, "PurchaseRequestStatus:" + purchaseResponse.getPurchaseRequestStatus());
    new PurchaseAsyncTask().execute(purchaseResponse);
} 
```

PurchasesFragment.java（将显示应用内购买的片段）

```
public class UpdatesFragment extends Fragment {

    ...   

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.subscriptions, container, false);

    Button btnViewSubscriptions = (Button)view.findViewById(R.id.btnViewSubscriptions);
    btnViewSubscriptions.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            PurchasingManager.initiatePurchaseRequest("testSKU");
        }
    });

    return view;
}

@Override
public void onStart() {
    super.onStart();

    AmazonPurchasingObserver observer = new AmazonPurchasingObserver(getActivity());
    PurchasingManager.registerObserver(observer);

    Set<String> skus = new HashSet<String>();
    skus.add("testSKU");
    skus.add("testSKU1");

    PurchasingManager.initiateItemDataRequest(skus);
} 
```

最后，我的 AndroidManifest.xml

```
<application>
    ...
    <receiver android:name="com.amazon.inapp.purchasing.ResponseReceiver">
       <intent-filter>
           <action android:name="com.amazon.inapp.purchasing.NOTIFY" android:permission="com.amazon.inapp.purchasing.Permission.NOTIFY" />
       </intent-filter>
    </receiver>
</application> 
```

我究竟做错了什么？我收到日志消息说 sendItemDataRequest 和 sendPurchaseRequest 已发送，但没有得到响应。请帮忙！

# ios - 无法从 Apple 开发者中心删除 App ID

> ID：15975253
> 
> 赞同：34
> 
> 时间：2013-04-12T15:25:35.927
> 
> 标签：ios, iphone

我已经看到 Apple 在哪里更改了 iOS 开发中心的证书、标识符和配置文件页面，并在堆栈上阅读了这个问题/答案：[Removing App ID from Developer Connection](https://stackoverflow.com/questions/996477/removing-app-id-from-developer-connection)

但是我无法删除我想删除的几年前的 App ID/ID。“删除”按钮显示为灰色/未启用。

有人可以帮助我吗？我尝试了多个浏览器并清除缓存无济于事。先感谢您！

截屏：![在此处输入图像描述](https://i.stack.imgur.com/K03mS.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-13T13:14:59.003

规则是，如果一个 App ID 曾经与一个 App 一起提交到商店，它不能被删除（即使它没有被接受）。尚未用于提交应用程序的应用程序 ID 可以自由删除。

在 Apple Developer Forums 上查看此线程（您需要登录才能查看）：

[https://devforums.apple.com/message/801353](https://devforums.apple.com/message/801353)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-12T15:40:27.857

确保该 ID 不再使用。对我来说，删除按钮对于 iTunes Connect 中的应用程序当前使用的那些 ID 是灰色的，即使该应用程序刚刚准备好并且尚未提交到 App Store！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-03T06:34:08.580

删除按钮又回来了（2014 年 6 月）！

*   转到证书、标识符和配置文件
*   打开应用程序 ID，
*   选择您的应用程序，
*   单击编辑
*   点击删除

我今天能够从更新的会员中心删除所有不需要的应用程序（除了那些曾经在应用程序商店中的应用程序）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T17:38:03.153

如果您的 App 在 AppStore 中或处于提交过程中，则无法删除 AppID。首先，您必须从 AppStore 禁用该应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-18T12:01:31.450

我无法删除明显未使用的 App ID，因为有一个与此 ID 关联的配置文件。删除后，我能够成功删除该 ID。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T16:13:08.240

是的，它是灰色的，但是单击该按钮，您将弹出弹出窗口以删除您的 appId。

您可以使用 Toastor 的答案。

但是，如果您无法删除未使用的 AppId，那么您只需尝试在不同的系统中删除，因为我也面临同样的情况，而该问题仅与我的系统有关。

# documentation - 如何在 HTML Doxygen 中指定图像大小？

> ID：15975262
> 
> 赞同：20
> 
> 时间：2013-04-12T15:26:07.763
> 
> 标签：documentation, doxygen, image-resizing

我正在尝试在 Doxygen 生成的 HTML 中手动指定图像大小。但是，正如我在[文档](http://www.doxygen.nl/manual/commands.html#cmdimage)中所读到的，这只有在使用 LaTeX 输出时才会发生。这里有人知道任何解决方法吗？

例如，我想做这样的事情：

```
\image html example.png "Caption" width=10px 
```

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-08-01T11:38:13.257

将其放入 CSS 文件“Doc/doxygen_html_style.css”中：

```
div.image img[src="example.png"]{ 
    width:100px; 
} 
```

并将 Doxygen 配置变量 *HTML_EXTRA_STYLESHEET* 设置为“Doc/doxygen_html_style.css”

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-05-08T06:33:34.690

为了避免使用额外的 CSS 样式表，您可以直接内联 CSS 代码：

```
\htmlonly <style>div.image img[src="test.png"]{width:100px;}</style> \endhtmlonly 
@image html test.png "Caption" 
```

甚至更好地在 Doxygen 配置文件中创建一个别名：

```
ALIASES = imageSize{2}="\htmlonly <style>div.image img[src=\"\1\"]{\2}</style>\endhtmlonly" 
```

然后使用这个新的更短的 Doxygen 命令：

```
@imageSize{test.png,height:270px;width:20px;}
@image html test.png "Caption" 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2020-02-07T21:09:52.637

显然，多年来发生了一些变化，因为在 Doxygen 1.8.17 中，它的工作方式几乎与原始问题中描述的方式相同（不涉及 CSS）：

```
\image html some.png width=800px 
```

* * *

编辑：刚刚用 Doxygen 1.8.13 试过这个，它也很好用：

```
\image html some.png width=50% 
```

# groovy - xmlslurper 没有欺骗命名空间声明

> ID：15975270
> 
> 赞同：2
> 
> 时间：2013-04-12T15:26:22.010
> 
> 标签：groovy, xmlslurper

我有这个 XML，

```
<soapenv:Envelope xmlns:v2="http://ns1/" xmlns:ifx="http://www.somenamespace.org/IFX_150">
   <soapenv:Header></soapenv:Header>
   <soapenv:Body>
    <v2:AcctInqRq>
        <ifx:SomeTag></ifx:SomeTag>
    <v2:AcctInqRq>
   </soapenv:Body>
</soapenv:Envelope> 
```

我正在尝试使用 xmlslurper 将其复制到测试步骤。

```
def request = new XmlSlurper().parseText( holderRequest )
                              .declareNamespace( v2:'http://ns1/', 
                                                 ifx:"http://www.somenamespace.org/IFX_150")

def xmlBuilder = new StreamingMarkupBuilder()
writer = xmlBuilder.bind {
  mkp.declareNamespace(ifx:"http://www.somenamespace.org/IFX_150",v2:"http://ns1/"
  mkp.yield request
} 
```

复制后测试步骤如下所示

```
<soapenv:Envelope>
   <soapenv:Header></soapenv:Header>
   <soapenv:Body>
    <v2:AcctInqRq xmlns:v2="http://ns1/">
        <ifx:SomeTag xmlns:ifx="http://www.somenamespace.org/IFX_150" ></ifx:SomeTag>
    <v2:AcctInqRq>
   </soapenv:Body>
</soapenv:Envelope> 
```

为什么没有按原样复制名称空间声明？我想要在顶部而不是在每个标签中声明的所有命名空间。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:34:09.827

您可以关闭命名空间支持，并按原样传递它们？

```
def request = new XmlSlurper( false, false ).parseText( holderRequest )
def output = new StreamingMarkupBuilder().bind {
  mkp.yield request
} 
```

# mysql - jbpm 5、其他任务遇到permitionDenied异常后出现MySQL约束违规错误

> ID：15975274
> 
> 赞同：1
> 
> 时间：2013-04-12T15:26:34.093
> 
> 标签：mysql, constraints, jbpm

我遇到以下错误，但仅在我的应用程序由于其他错误而崩溃之后。所以，我想这些错误是有联系的。但第一个很奇怪：

> 原因：org.jbpm.task.service.PermissionDeniedException：用户 '[User:'renauds']' 由于 org.jbpm.task 上没有“当前状态”匹配，无法对任务 id 7 执行操作“恢复” .service.TaskServiceSession.evalCommand(TaskServiceSession.java:311) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] at org.jbpm.task.service.TaskServiceSession.taskOperation(TaskServiceSession .java:426) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] 在 org.jbpm.task.service.local.LocalTask​​Service.resume(LocalTask​​Service.java:264) [ jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] 在 com.st.ams.task.management.TaskManager.resumeTask(TaskManager.java:320) [类：]

崩溃后，一切都很好，恢复过程可用，可以一直持续到结束。但所有其他新进程崩溃。我尝试重新部署应用程序，重新启动服务器，更改隔离级别等等，但没有任何效果。唯一的解决方案是删除所有表并重建数据库，然后所有进程再次运行。

这是阻止我的错误的堆栈跟踪：

> 17:02:09,370 INFO [stdout] (http--127.0.0.1-8080-5) 休眠：17:02:09,370 INFO [stdout] (http--127.0.0.1-8080-5) 插入 17:02:09,371 INFO [stdout] (http--127.0.0.1-8080-5) 到 17:02:09,371 INFO [stdout] (http--127.0.0.1-8080-5)
> PeopleAssignments_PotOwners 17:02:09,371 INFO [stdout] (http --127.0.0.1-8080-5) (task_id, entity_id) 17:02:09,371 INFO [stdout] (http--127.0.0.1-8080-5) 值 17:02:09,372 INFO [stdout] (http-- 127.0.0.1-8080-5) (?, ?)
> 
> 17:02:09,380 WARN [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] (http--127.0.0.1-8080-5) SQL 错误：1452，SQLState：23000 17:02:09,380 错误 [org.hibernate. engine.jdbc.spi.SqlExceptionHelper] (http--127.0.0.1-8080-5) 无法添加或更新子行：外键约束失败 ( `jbpm_test`. `peopleassignments_potowners`, CONSTRAINT `FK1EE418D2C122ED2`FOREIGN KEY ( `entity_id`) REFERENCES `organizationalentity`( `id`) ON DELETE NO ACTION ON UPDATE CASCADE) 17:02:09,383 WARN [com.arjuna.ats.arjuna] (http--127.0.0.1-8080-5) ARJUNA012125: TwoPhaseCoordinator.beforeCompletion - SynchronizationImple< 0:ffff0a838a14:-384e4b5d:516820a6:25d 失败， org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization@14db649
> 
> > ：javax.persistence.PersistenceException：org.hibernate.exception.ConstraintViolationException：无法添加或更新子行：外键约束失败（`jbpm_test`。`peopleassignments_potowners`，CONSTRAINT `FK1EE418D2C122ED2`FOREIGN KEY（`entity_id`）参考 `organizationalentity`（`id`) ON DELETE NO ACTION ON UPDATE CASCADE) at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1361) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final] at org.hibernate。 ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1289) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final] at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1295) [hibernate -entitymanager-4.0.1.Final.jar:4.0.1.Final] 在 org.hibernate.ejb.AbstractEntityManagerImpl$CallbackExceptionMapperImpl.mapManagedFlushFailure(AbstractEntityManagerImpl.java:1481) [hibernate-entitymanager-4.0.1.Final.jar:4.0 .1.Final] 在 org.hibernate.engine.transaction.synchronization.internal.SynchronizationCallbackCoordinatorImpl。beforeCompletion(SynchronizationCallbackCoordinatorImpl.java:109) [hibernate-core-4.0.1.Final.jar:4.0.1.Final] 在 org.hibernate.engine.transaction.synchronization.internal.RegisteredSynchronization.beforeCompletion(RegisteredSynchronization.java:53) [hibernate-core-4.0.1.Final.jar:4.0.1.Final] 在 com.arjuna.ats.internal.jta.resources.arjunacore.SynchronizationImple.beforeCompletion(SynchronizationImple.java:76) 在 com.arjuna.ats .arjuna.coordinator.TwoPhaseCoordinator.beforeCompletion(TwoPhaseCoordinator.java:273) 在 com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator.end(TwoPhaseCoordinator.java:93) 在 com.arjuna.ats.arjuna.AtomicAction.commit(AtomicAction .java:164) 在 com.arjuna.ats.internal.jta.transaction.arjunacore.TransactionImple.commitAndDisassociate(TransactionImple.java:第1165章.tm.usertx.client.ServerVMClientUserTransaction.commit(ServerVMClientUserTransaction.java:167) 在 org.drools.persistence.jta.JtaTransactionManager.commit(JtaTransactionManager.java:179) [drools-persistence-jpa-5.5.0.Final.jar :5.5.0.Final] 在 org.drools.persistence.SingleSessionCommandService.execute(SingleSessionCommandService.java:376) [drools-persistence-jpa-5.5.0.Final.jar:5.5.0.Final] 在 org.drools。 command.impl.CommandBasedStatefulKnowledgeSession$1.abortWorkItem(CommandBasedStatefulKnowledgeSession.java:156) [drools-core-5.5.0.Final.jar:5.5.0。最终] 在 org.jbpm.process.workitem.wsht.GenericHTWorkItemHandler$TaskCompletedHandler.handleCompletedTask(GenericHTWorkItemHandler.java:276) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] 在 org .jbpm.process.workitem.wsht.GenericHTWorkItemHandler$TaskCompletedHandler.execute(GenericHTWorkItemHandler.java:234) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] at org.jbpm.task .service.local.LocalTask​​Service$SimpleEventTransport.trigger(LocalTask​​Service.java:329) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] at org.jbpm.task.event.MessagingTaskEventListener .triggerPayload(MessagingTaskEventListener.java:76) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] at org.jbpm.task.event.MessagingTaskEventListener.handleEvent(MessagingTaskEventListener.java:92 ) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] 在 org.jbpm.task.event.MessagingTaskEventListener.taskCompleted(MessagingTaskEventListener.java:109) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.最终] 在 org.jbpm.task.event.TaskEventSupport.fireTaskCompleted(TaskEventSupport.java:49) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] 在 org.jbpm.task .service.TaskServiceSession.postTaskCompleteOperation(TaskServiceSession.java:569) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] at org.jbpm.task.service.TaskServiceSession.taskOperation(TaskServiceSession .java:495) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] 在 org.jbpm.task.service.local.LocalTask​​Service.complete(LocalTask​​Service.java:83) [ jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] 在 org.jbpm.task.service.local.LocalTask​​Service。completeWithResults(LocalTask​​Service.java:91) [jbpm-human-task-core-5.4.0.Final.jar:5.4.0.Final] 在 com.st.ams.task.management.TaskManager.completeTask(TaskManager.java: 295）[类：]

jbpm 是否有可能在事务之外锁定表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T23:57:05.707

第一个异常是由于您尝试对当前状态下不允许的任务执行操作而引起的。在这种特定情况下，我假设您正在尝试恢复未暂停的任务。例如，如果您尝试完成一项未进行的任务，您会遇到类似的异常。

第二个异常似乎是由未知任务的潜在所有者引起的。要么预先将所有潜在用户添加到任务服务，要么使用用户组回调来动态管理它。

查看您的堆栈跟踪，我确实注意到一件奇怪的事情：

> org.drools.command.impl.CommandBasedStatefulKnowledgeSession$1.abortWorkItem(CommandBasedStatefulKnowledgeSession.java:156) [drools-core-5.5.0.Final.jar:5.5.0.Final] 在 org.jbpm.process.workitem.wsht.GenericHTWorkItemHandler $TaskCompletedHandler.handleCompletedTask(GenericHTWorkItemHandler.java:276)

您的工作项目似乎被中止而不是完成（这似乎是您对任务所做的事情），因为引擎无法找到处于已完成状态的任务（您刚刚完成）。我不确定是什么原因造成的，但似乎该处理程序与完成任务的处理程序不在同一事务中运行。

我建议确保没有其他不再使用的旧 ksession、任务服务和/或处理程序仍然处于活动状态，因此如果不再需要它们，请确保您确实处置了您的 ksession、任务服务和处理程序。您能否尝试只为每个任务服务创建一个本地任务服务会话？

克里斯

# primefaces - PrimeFaces p：文件上传

> ID：15975277
> 
> 赞同：1
> 
> 时间：2013-04-12T15:26:45.230
> 
> 标签：primefaces

p:fileUpload 中的大小限制属性在 IE 中不起作用。它在 Firefox 中运行良好。有什么解决方案。

我可以通过首先上传文件然后检查大小在 FileUploadEvent 中实现相同的目的。但我想做一些像火狐一样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:33:06.227

问题是 IE 本身不支持 AJAX。所以你应该像你写的那样在上传后检查文件大小，或者你可以检查什么是用户浏览器。如果用户浏览器是 firefox 或 chrome（等），它可以使用 sizeLimit 参数，但如果您使用 IE，您应该通过某种方法等处理它。

# java - 在自己的 JVM 中运行一些 java 代码

> ID：15975279
> 
> 赞同：0
> 
> 时间：2013-04-12T15:26:46.620
> 
> 标签：java, jvm

我有一个小问题：（如何）我可以在自己的 JVM 中运行一些 java 代码（最好是 jar），最好是指定我自己的库。因此，例如对所有文件系统访问进行沙箱化。

这些东西有什么可能，以及如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:36:14.720

要限制对文件系统或任何其他资源的访问，请使用 Java 的[安全管理器](http://docs.oracle.com/javase/6/docs/api/java/lang/SecurityManager.html)。有关如何配置策略的信息，请参阅[http://docs.oracle.com/javase/7/docs/technotes/guides/security/index.html 。](http://docs.oracle.com/javase/7/docs/technotes/guides/security/index.html)

# knockout.js - 淘汰赛未使用当前数据更新页面

> ID：15975282
> 
> 赞同：0
> 
> 时间：2013-04-12T15:27:06.767
> 
> 标签：knockout.js, knockout-mapping-plugin

我在敲除无法正确更新我的视图时遇到问题......发生的情况是我进行了 ajax 调用以获取我的视图数据，然后使用敲除来呈现它。在随后的请求中，我进行 ajax 调用以获取视图数据，然后使用新内容更新页面。

问题是调用 2、3、4 等...该页面未使用新数据进行更新。我正在使用可能是问题的映射插件。

```
if (filterLogModel == null) {
    filterLogModel = ko.mapping.fromJS(data);
    ko.applyBindings(filterLogModel, document.getElementById("dvFilterLog"));
} else {
    ko.mapping.fromJS(data, filterLogModel);
} 
```

我认为这是正确的使用模式，但也许不是？

我已经检查过的事情： 1 - 进来的新数据不同 2 - 通过调试器运行，第一个请求确实通过 IF 块，后续请求通过 ELSE 块。

如果返回的数据不包含我的 html 的任何数据部分有条件

```
<div id="filterLogResults">
<!-- ko if: $data.length <= 0 -->
    <p class="attention">There are no errors for this task.</p>
<!-- /ko -->
<!-- ko if: $data.length > 0 -->
    <table class="tbl">
        <thead>
            <tr>
                <th>Description</th>
                <th>Value 1</th>
                <th>Operator</th>
                <th>Value 2</th>
                <th>Corrective Action</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: $data">
            <tr>
                <td class="nowrap" data-bind="text:Description"></td>
                <td class="nowrap" data-bind="text:Value1"></td>
                <td class="nowrap" data-bind="text:OperatorName"></td>
                <td class="nowrap" data-bind="text:Value2"></td>
                <td class="main" data-bind="text:CorrectiveAction"></td>
            </tr>
        </tbody>
    </table>
<!-- /ko -->
</div> 
```

并且视图确实更新并告诉我没有结果......但是当有数据时，它就像显示缓存视图或其他内容，而不是新数据。

我注意到的另一件事。如果第一个请求包含一些数据。第二个请求不包含数据。第三个请求包含一些数据。- 在这种情况下，第三个请求将显示新数据，而不是第一个请求的数据。只有当一行中有 2 个请求具有视图未更新的数据时，才会出现这种情况。

有想法该怎么解决这个吗？

编辑：完整的 JS

```
function getFilterLogs(suppressErrors, callback) {
    $("#filterLogResults").hide();
    if (!g_objCommon.isBoolean(suppressErrors)) {
        suppressErrors = false;
    }
    if (filterLogAjaxRequest != null) {
        filterLogAjaxRequestAborted = true;
        filterLogAjaxRequest.abort();
    }
    g_objCommon.showLoading();
    filterLogAjaxRequest = $.ajax({
        cache: false,
        type: "GET",
        url: absoluteRootPath + "api/Tasks/GetFilterLogs?id=" + g_nWorklistId,
        contentType: "application/json",
        success: function (data) {
            filterLogAjaxRequest = null;
            g_objCommon.hideLoading();
            if (filterLogModel == null) {
                filterLogModel = ko.mapping.fromJS(data);
                ko.applyBindings(filterLogModel, document.getElementById("dvFilterLog"));
            } else {
                ko.mapping.fromJS(data, {}, filterLogModel);
            }
            if ($.isFunction(callback)) {
                callback(data.length);
            }
            $("#filterLogResults").show();
            $("#filterLogResults .tbl").show();
        },
        error: function () {
            filterLogAjaxRequest = null;
            g_objCommon.hideLoading();
            if (!filterLogAjaxRequestAborted) {
                if (!suppressErrors) {
                    g_objCommon.showErrorModal("There was an error loading the errors.", undefined);
                }
                if ($.isFunction(callback)) {
                    callback(0);
                }
                $("#filterLogResults .attention").show();
                $("#filterLogResults .tbl").hide();
                $("#filterLogResults").show();
            }
            filterLogAjaxRequestAborted = false;
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:32:24.297

我发现映射插件有时不会更新视图模型，除非有一个映射对象添加到通过它发送的参数列表中：

```
ko.mapping.fromJS(data, {}, filterLogModel); 
```

# java - 如何从直线创建曲线？

> ID：15975283
> 
> 赞同：3
> 
> 时间：2013-04-12T15:27:09.737
> 
> 标签：java, gwt, canvas

我在画布上有直线，由 start 和 end 定义`Point(x,y)`。

现在我希望用户单击该行中的任意位置，并且在拖动鼠标时，该行应形成为`curve`.

`quadraticCurveTo()`我知道有`bezierCurveTo()`一个`Canvas`. 但它们都需要1-2个控制点。如果我不向用户展示这些控制点，我从哪里获取这些控制点？我可以根据用户点击的位置来计算它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:54:49.513

**如何将直线拖入曲线**

![在此处输入图像描述](https://i.stack.imgur.com/FBTwe.png)

给定 3 个点（开始、结束和鼠标），以下是计算控制点的方法，该控制点将在这 3 个点之间绘制二次贝塞尔曲线：

```
 // calc a control point
        var cpX = 2*mouseX -startX/2 -endX/2;
        var cpY = 2*mouseY -startY/2 -endY/2; 
```

剩下的就是每当用户拖动鼠标时重新绘制曲线一样简单

```
 // draw a quad-curve
        ctx.beginPath();
        ctx.moveTo(startX, startY);
        ctx.quadraticCurveTo(cpX, cpY, endX, endY);
        ctx.stroke(); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/pp7Zy/](http://jsfiddle.net/m1erickson/pp7Zy/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:10px; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    // get the position of the canvas
    // relative to the window
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    // set the start and end points
    var startX=25;
    var startY=50;
    var endX=275;
    var endY=200;
    // some vars for the mouse position
    var mouseX;
    var mouseY;
    var isDragging=false;

    // set curve color and stroke-width
    ctx.strokeStyle="blue"
    ctx.fillStyle="red"
    ctx.lineWidth=5;

    // draw the startpoint, endpoint and line
    // just to get the user some reference points
    ctx.beginPath();
    ctx.moveTo(startX,startY);
    ctx.lineTo(endX,endY);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(startX,startY);
    ctx.arc(startX,startY, 10, 0, 2 * Math.PI, false);
    ctx.moveTo(endX,endY);
    ctx.arc(endX,endY, 10, 0, 2 * Math.PI, false);
    ctx.fill();

    // when the user drags the mouse draw a quad-curve
    // between the 2 points and the mouse position
    function handleMouseMove(e){
        mouseX=parseInt(e.clientX-offsetX);
        mouseY=parseInt(e.clientY-offsetY);

        // calc a control point
        var cpX = 2*mouseX -startX/2 -endX/2;
        var cpY = 2*mouseY -startY/2 -endY/2;

        ctx.clearRect(0,0,canvas.width,canvas.height);

        // draw a quad-curve
        ctx.beginPath();
        ctx.moveTo(startX, startY);
        ctx.quadraticCurveTo(cpX, cpY, endX, endY);
        ctx.stroke();

        // draw the Start, End and Control points
        ctx.beginPath();
        ctx.moveTo(startX,startY);
        ctx.arc(startX,startY, 10, 0, 2 * Math.PI, false);
        ctx.moveTo(cpX,cpY);
        ctx.arc(cpX,cpY, 10, 0, 2 * Math.PI, false);
        ctx.moveTo(endX,endY);
        ctx.arc(endX,endY, 10, 0, 2 * Math.PI, false);
        ctx.fill();
    }

    $("#canvas").mousedown(function(e){isDragging=true;});
    $("#canvas").mouseup(function(e){isDragging=false;});
    $("#canvas").mousemove(function(e){if(isDragging){handleMouseMove(e);}});

}); // end $(function(){});
</script>

</head>

<body>
    <p>Drag mouse to create quadratic bezier</p>
    <p>that goes through the mouse position</p>
    <canvas id="canvas" width=400 height=400></canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:41:40.983

是的，您可以根据用户点击的位置来计算它们。

当用户将鼠标从直线中的某处拖动`A-B`到新位置 A 时，该位置 X 可以是二次曲线的单个控制点。`A-B`用二次曲线代替直线`A-X-B`

# wpf - 如何在标签中添加换行符

> ID：15975284
> 
> 赞同：4
> 
> 时间：2013-04-12T15:27:11.423
> 
> 标签：wpf, c#-4.0

如何在标签中添加换行符。我有一个标签，我在其中添加了一个将导致此显示的文本

A B C 我已经在 WinForms c# 中完成了此操作，`Environment.NewLine`但这在 WPF 应用程序中不起作用

有人可以告诉我如何在标签中添加换行符吗？

我是从后面的代码中做的，而不是`XAML`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T15:50:56.973

如果您可以使用[TextBlock 而不是 Label](https://stackoverflow.com/questions/59099/what-is-the-difference-between-the-wpf-textblock-element-and-label-control)（您应该可以！），那么您可以这样做：

```
<TextBlock>
    <Run Text="First Line"/>
    <LineBreak/>
    <Run Text="Second Line"/>
</TextBlock> 
```

您也可以从后面的代码中执行此操作（但不确定您为什么要这样做）：

```
tb.Inlines.Add(new Run("First Line"));
tb.Inlines.Add(new LineBreak());
tb.Inlines.Add(new Run("Second Line")); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T15:47:40.677

我认为这`Environment.NewLine`不适用于您的情况。检查 XAML 中标签的高度。当您添加换行符时，它会增加标签中的内容，如果高度不够，那么您将看不到。我认为您正面临这个问题，否则我认为没有任何问题`Environment.NewLine`:) 尝试增加高度并告诉我

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T15:37:02.373

要么设置你的最大宽度，让布局机制确定你的回车放在哪里，要么放一些 \n 在那里

```
 TextBlock tb = new TextBlock();
        tb.Text = "This is a line with a carriage return";
        tb.MaxWidth = 100;
        tb.TextWrapping = TextWrapping.Wrap;

        pan.Children.Add(tb); 
```

在上面的代码中，pan 只是一个堆栈面板控件，您当然会添加到包含您的标签的任何控件

# php - 来自 PHP 而非 htaccess 或 Apache conf 的 GZip 压缩和缓存控制

> ID：15975285
> 
> 赞同：0
> 
> 时间：2013-04-12T15:27:12.667
> 
> 标签：php, apache2, compression, gzip, cache-control

我的 PHP 脚本中有以下代码，它为我网站的所有页面生成 HTML：

```
 if( !headers_sent() and !ob_get_length() ) {
        $days = 30;
        header('Last-Modified: ' . date( 'D, d M Y H:i:s', $mtime ));
        header('Expires: ' . date( 'D, d M Y H:i:s', strtotime('+' . $days . ' days') ) . ' GMT');
        header('Cache-Control: max-age=' . 60*24*$days . ', public, must-revalidate');
        header('Pragma: public');
        ini_set( 'zlib.output_compression_level', 1 );
        ob_start( 'ob_gzhandler' );

        header( 'Content-Type: text/html; charset=' . strtolower( $this->PageCharset ) );
        header( 'Connection: Keep-alive' );
    } 
```

无论如何，我无法理解一件事：这是否也适用于所有图像、javascript 和 CSS 或仅适用于页面？

在 .htaccess 中，我知道我可以应用以下指令来控制所有类型文件的缓存和压缩，包括 css、js、图像等。但我的共享托管服务不允许使用其中一些指令（Header、SetEnvIfNoCase） . 那么在不使用 Apache 指令的情况下如何控制所有文件类型的缓存和压缩呢？

```
 <IfModule mod_expires.c>
        ExpiresActive On
        ExpiresDefault "access plus 10 days"
        ExpiresByType text/css "access plus 1 week"
        ExpiresByType text/plain "access plus 1 month"
        ExpiresByType image/gif "access plus 1 month"
        ExpiresByType image/png "access plus 1 month"
        ExpiresByType image/jpeg "access plus 1 month"
        ExpiresByType application/x-javascript "access plus 1 month"
        ExpiresByType application/javascript "access plus 1 month"
        ExpiresByType application/x-icon "access plus 1 year"
    </IfModule>
    <IfModule mod_headers.c>
        <FilesMatch "\.(js|css|xml|gz)$">
            Header append Vary Accept-Encoding
        </FilesMatch>
        <FilesMatch "\.(ico|jpe?g|png|gif|swf)$">
            Header set Cache-Control "public"
        </FilesMatch>
        <FilesMatch "\.(css)$">
            Header set Cache-Control "public"
        </FilesMatch>
        <FilesMatch "\.(js)$">
            Header set Cache-Control "private"
        </FilesMatch>
        <FilesMatch "\.(x?html?|php)$">
            Header set Cache-Control "private, must-revalidate"
        </FilesMatch>
    </IfModule>
    <IfModule mod_deflate.c>
        SetOutputFilter DEFLATE

        # Don’t compress
        SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary
        SetEnvIfNoCase Request_URI \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary

        #Dealing with proxy servers
        <IfModule mod_headers.c>
            Header append Vary User-Agent
        </IfModule>
    </IfModule> 
```

谢谢你。

# php - Curl 有时不会执行所有命令

> ID：15975288
> 
> 赞同：0
> 
> 时间：2013-04-12T15:27:19.743
> 
> 标签：php, curl

翼卷曲代码，我有很多`preg_match_all();`并获得一些数据和网址。有时它会处理所有内容，有时它会遗漏某些部分。

是否有任何功能可以让它等到所有卷曲完成或加快进程？

```
$ch = curl_init();

curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1); 
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1); 
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);   // Cookie management.
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path); 

$result = curl_exec($ch);

curl_close($ch); 

// Step3\. parsing username
preg_match_all("#<span id=\"class\" class=\"tall\">(.*?)</span>#si", $result, $match); 
```

那里有很多 `preg_match_all`命令

# php - setTo() 中的 Swiftmailer 单引号/撇号中断消息发送

> ID：15975291
> 
> 赞同：0
> 
> 时间：2013-04-12T15:27:24.813
> 
> 标签：php, sendmail, swiftmailer

我正在使用 SwiftMailer 发送电子邮件，我正在使用 setTo() 方法设置电子邮件地址和显示名称

例如`->setTo("user@email.com", "User Name")`

当用户名包含单引号/撇号时，消息发送失败。我尝试在用户名上使用addslashes() 来转义字符串，但它仍然失败。

当显示名称包含单引号/撇号时，如何设置显示名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:15:56.273

看起来单引号不是实际问题。问题实际上在于服务器配置不允许将电子邮件发送到其自身以外的任何域。

# java - Spring AOP 泛型类型

> ID：15975294
> 
> 赞同：3
> 
> 时间：2013-04-12T15:27:29.923
> 
> 标签：java, spring, aop

我是 Spring 新手，我遇到了一个方面的问题。切入点是一个使用泛型类型的接口：

```
public interface DaoJdbc<T> {
    public void create(T input);
    public T read(int id);
    public void update(T s);
    public void delete(int id);
    public void getDailyMessage();
} 
```

这是我的方面：

```
<aop:aspect ref="security">
    <aop:pointcut id="passwordNeeded"
        expression="execution(* com.user.service.DaoJdbc.*(..))" />
    <aop:before pointcut-ref="passwordNeeded" method="check" />
</aop:aspect> 
```

方面适用于`delete()`，但不适用于`create()`。如果我使用 DaoJdbc 的实现而不是接口本身（我不想这样做），它将适用于“create()”。我可以假设这是`update()`使用泛型类型`delete()`而不使用泛型类型的问题。有什么办法可以让我使用界面来工作吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T13:04:12.430

找到解决方案，需要加号来表示泛型。

```
expression="execution(* com.user.service.DaoJdbc+.*(..))" 
```

# java - 配置 libmediainfo 以使用 Java 项目，无需跨所有平台 (OS) 安装

> ID：15975296
> 
> 赞同：1
> 
> 时间：2013-04-12T15:27:31.723
> 
> 标签：java, linux, macos, jna, mediainfo

我正在使用 mediainfo ( [http://mediainfo.sourceforge.net/en](http://mediainfo.sourceforge.net/en) ) 使用 Java 代码从音频和视频文件中提取信息。

我的 java 项目在所有平台（osx、win 和 linux）上运行。到目前为止，我只在过程简单的 osx 上测试了 mediainfo：只需将 libmediainfo.dylib 放入目标文件夹并使用本机库访问它，你就可以开始了。该解决方案完美无缺...

我现在希望将此功能扩展到其他操作系统，从 Linux 开始。然而，事实证明这比我想象的更具挑战性。起初我一直得到这个：

```
"java.lang.UnsatisfiedLinkError: Unable to load library 'mediainfo': libmediainfo.so: cannot open shared object file: No such file or directory" 
```

这是预期的，因为它正在查看 /usr/lib

但这已通过从[http://mediainfo.sourceforge.net/en/Download/Ubuntu安装合适的 libmediainfo0 和 libzen0 ".deb 来解决](http://mediainfo.sourceforge.net/en/Download/Ubuntu)

不过，我的解决方案需要是可移植的，这意味着，我希望所有必要的资源都包含在 java 项目包中，而无需任何进一步的安装。我还需要知道是否可以更改 mediainfo 以查找我的 java 包中的资源而不是系统位置。

供您参考，我正在使用 Java Native Access (jna) 与库进行交互。还使用网站建议的 MediaInfo.java 和 MediaInfoLibrary.java 类。如果您需要其他详细信息，请告诉我。

任何智慧都非常感谢谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:41:12.070

最新版本的 JNA (3.5.2) 将自动解压缩[捆绑为资源](http://twall.github.io/jna/3.5.2/javadoc/com/sun/jna/NativeLibrary.html)的本机库（无论是基于文件还是基于 jar）。

如果您将 linux/amd64 的共享库包含`/linux-x86-64/libmylibrary.so`在您的一个 jar 文件中，JNA 将提取它并在您调用时自动加载它`Native.loadLibrary("my library")`。旧版本的 JNA 要求您使库在`LD_LIBRARY_PATH`(envariable) 或`jna.library.path`(system property) 上可用。

# ruby - ruby 数组可以 each_with_index 做步骤吗？

> ID：15975300
> 
> 赞同：0
> 
> 时间：2013-04-12T15:27:37.800
> 
> 标签：ruby, parsing, text, ruby-1.9.3

我有一个 txt 记录文件：

```
firstname lastname dob ssn status1 status2 status3 status4 firstname lastname dob ... 
```

我可以把它变成一个数组：

```
tokens[0] = firstname
...
tokens[8] = firstname (of record 2).  
tokens[9] = lastname (of record 2) and so on. 
```

我想逐步迭代`tokens`数组，所以我可以说：

```
record1 = tokens[index] + tokens[index+1] + tokens[index+2] etc. 
```

并且该步骤（在上面的示例 8 中）将处理记录：

```
record2, record3 etc etc.

step 0 index is 0
step 1 (step set to 8 so index is 8)
etc. 
```

我想我应该说这些记录来自我称为 .split 的 txt 文件：

```
file = File.open(ARGV[0], 'r')
line = ""
while !file.eof?
   line = file.readline
end
##knowing a set is how many fields, do it over and over again.

tokens = line.split(" ") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:43:07.607

这有帮助吗？

```
tokens = (1..80).to_a #just an array
tokens.each_slice(8).with_index {|slice, index|p index; p slice}
#0
#[1, 2, 3, 4, 5, 6, 7, 8]
#1
#[9, 10, 11, 12, 13, 14, 15, 16]
#... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:01:19.897

使用[`each_slice`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice)您还可以将变量分配给块内的字段：

```
tokens.each_slice(8) { |firstname, lastname, dob, ssn, status1, status2, status3, status4|
  puts "firstname: #{firstname}"
} 
```

# php - 我如何在 ckeditor 内容的标签上添加 rel="nofollow"

> ID：15975308
> 
> 赞同：0
> 
> 时间：2013-04-12T15:27:56.263
> 
> 标签：php, javascript, jquery

我有一个用户可以提交内容的网站。所以我想通过添加标签 rel="nofollow" 来避免垃圾邮件链接。我如何使用 jquery 或 php 做到这一点

```
<a href="http://mnking.net" rel="nofollow">This is link</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:30:20.470

如果您使用 获取链接`$_POST`，则可以使用以下代码（用 PHP 编写）：

```
$url = $_POST['url'];
$tag = '<a href='.$url.'rel="nofollow">This is link</a>'; 
```

在 PHP 中，标志 . （一个简单的点）用于连接字符串。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:30:27.100

你可以做：

```
$(document).ready(function(){

     $("a").attr("rel", "nofollow");

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:31:04.380

将帖子放入一个单独的 div 中，假设`class="post"` 然后只是简单的 jquery 代码：

```
$('.post a').attr('rel', 'nofollow'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:29:31.243

用这个

```
$("a[href='http://mnking.net']").attr("rel", "nofollow"); 
```

# ruby-on-rails - can.js 如何向 Rails 服务器添加记录？

> ID：15975309
> 
> 赞同：1
> 
> 时间：2013-04-12T15:27:55.657
> 
> 标签：ruby-on-rails, canjs

我正在使用 Can.js 向 Ruby on Rails 服务器添加记录：

```
var Todo = can.Model({
  findAll : 'GET /todos',
  findOne : 'GET /todos/{id}',
  create  : 'POST /todos',
  update  : 'PUT /todos/{id}',
  destroy : 'DELETE /todos/{id}'
}, {});

Todo.prototype.description = function() {
    return this.name + " and " + this.complete;
};

Todo.findAll({}, function(todos) {
    todos.each(function(todo) {
        console.log(todo.name, todo.complete);
        console.log(todo.description());
    });
});

var todo = new Todo({name: "mow lawn"});

todo.save(); 
```

实际上可以获取所有记录，`findAll()`但是`save()`会插入一条空白记录。我怀疑它可能是`CSRF token`，但这显示为警告，如果它不想插入记录，它可能根本不会创建任何记录，而不是添加名称为空的记录？（我也试过`var todo = new Todo({name: "mow lawn", complete: true});`了，结果是一样的）。

但 Rails 服务器在终端上打印为：

```
Started POST "/todos" for 127.0.0.1 at 2013-04-12 08:16:05 -0700
Processing by TodosController#create as JSON
  Parameters: {"name"=>"mow lawn"}
WARNING: Can't verify CSRF token authenticity
   (0.2ms)  begin transaction
  SQL (0.8ms)  INSERT INTO "todos" ("complete", "created_at", "name", "updated_at") 
VALUES (?, ?, ?, ?)  [["complete", nil], ["created_at", Fri, 12 Apr 2013 15:16:05 UTC 
+00:00], ["name", nil], ["updated_at", Fri, 12 Apr 2013 15:16:05 UTC +00:00]]
   (1.5ms)  commit transaction
Completed 201 Created in 11ms (Views: 1.3ms | ActiveRecord: 2.5ms) 
```

在 Chrome 开发者工具中，我在 Network 中看到：

```
Request URL:http://localhost:3000/todos
Request Method:POST

part of header:
Content-Type:application/x-www-form-urlencoded; charset=UTF-8

form data:
name:mow lawn 
```

如果我的操作是：

```
 def create
    p "params[:todo] is", params[:todo]
    @todo = Todo.new(params[:todo])

    respond_to do |format|
      if @todo.save
        format.html { redirect_to @todo, notice: 'Todo was successfully created.' }
        format.json { render json: @todo, status: :created, location: @todo }
      else
        format.html { render action: "new" }
        format.json { render json: @todo.errors, status: :unprocessable_entity }
      end
    end
  end 
```

然后终端将显示：

```
"params[:todo] is"
nil 
```

即使终端显示标准 Rails 日志：

```
Parameters: {"name"=>"mow lawn"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:20:23.817

如 Rails 控制台输出所示，您的`params`Hash 如下所示：

```
Parameters: {"name"=>"mow lawn"} 
```

但是您的控制器正在使用以下内容创建一个新的 Todo 实例：

```
@todo = Todo.new(params[:todo]) 
```

`:todo`不在`params`哈希中，所以`params[:todo]`基本上`nil`你的 Todo 实例没有传递给它的属性，因此它正在为数据库`nil`中的`name`列保存。

您的控制器应该使用[参数包装](http://api.rubyonrails.org/classes/ActionController/ParamsWrapper.html)来解决这个问题，它将所有`params`哈希包装成一个`params[:todo]`子哈希。所以如果你的控制器中有这个：

```
class TodosController < ApplicationController
  wrap_parameters :todo
  ...
end 
```

在执行操作之前，您的`params`Hash 将转换为以下内容：

```
Parameters: {"name"=>"mow lawn", "todo" => {"name"=>"mow lawn"}} 
```

然后您现有的操作代码应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T10:47:35.317

就像**Stuart M**说的，你需要`wrap_parameters :todo`在控制器中设置。

但`wrap_parameters :todo`不适用于默认的`Content-Type: application/x-www-form-urlencoded`canjs 发送它的模型更新。

以下是让我解决问题的资源：

[https://github.com/bitovi/canjs/issues/111](https://github.com/bitovi/canjs/issues/111)

[https://forum.javascriptmvc.com/topic/howto-use-application-json-and-encode-data-automatically-in-can-model](https://forum.javascriptmvc.com/topic/howto-use-application-json-and-encode-data-automatically-in-can-model)

所以通过阅读那些我改变了我的应用程序看起来像这样：

**应用程序/控制器/todo_controller.rb**

```
class TodosController < ApplicationController
  wrap_parameters :todo

  def create
    Todo.new(params[:todo])
  end

end 
```

**应用程序/资产/javascripts/canjs.models.js**

```
$.ajaxPrefilter(function(options, originalOptions, jqXHR){
    if( options.processData && /^(post|put|patch|delete)$/i.test( options.type ))
    {
        options["contentType"] = "application/json";
        options["data"] = JSON.stringify(originalOptions["data"]);
    }
});

Todo = Model.new({
    ...
}); 
```

一切都像魔术一样工作:)

* * *

**注意：**您可能需要设置 CORS 才能使其工作，这是在公共 api 上设置的方法：

**配置/路由.rb**

```
SomeTodoApp::Application.routes.draw do

  resources :todos, except: [:new, :edit]

  match "*all" => "application#cors_preflight_check", via: :options

end 
```

**应用程序/控制器/application_controller.rb**

```
class ApplicationController < ActionController::API

# protect_from_forgery is always a good thing if you know your clients can support get it working

  protect_from_forgery

  before_filter :cors_preflight_check
  after_filter :cors_set_access_control_headers

# For all responses in this controller, return the CORS access control headers.

  def cors_set_access_control_headers
    headers['Access-Control-Allow-Origin'] = '*'
    headers['Access-Control-Allow-Methods'] = 'POST, PUT, PATCH, GET, OPTIONS'
    headers['Access-Control-Allow-Headers'] = 'Origin, X-Requested-With, Content-Type, Accept, Authorization'
    headers['Access-Control-Request-Method'] = '*'
    headers['Access-Control-Max-Age'] = "1728000"
  end

# If this is a preflight OPTIONS request, then short-circuit the
# request, return only the necessary headers and return an empty
# text/plain.

  def cors_preflight_check
    if request.method == :options
      headers['Access-Control-Allow-Origin'] = '*'
      headers['Access-Control-Allow-Methods'] = 'POST, PUT, PATCH, GET, OPTIONS'
      headers['Access-Control-Allow-Headers'] = 'Origin, X-Requested-With, Content-Type, Accept, Authorization'
      headers['Access-Control-Request-Method'] = '*'
      headers['Access-Control-Max-Age'] = '1728000'
      render :text => '', :content_type => 'text/plain'
    end
  end

end 
```

# php - 如何在 php 和分页中使用多个复选框

> ID：15975310
> 
> 赞同：0
> 
> 时间：2013-04-12T15:27:57.647
> 
> 标签：php, pagination, checkbox

您好，我有下面的代码来对我的数据进行分页，我还有一些复选框可以调整显示的结果。我遇到的问题是，当我将所有内容都放在 1 页上时它工作正常，但是当结果分页时，分页不会显示在底部，它只显示 14 个结果，仅此而已。这是我的代码

```
 if(isset($_POST['criteria']) && !empty($_POST['criteria'])){ 
 foreach($_POST['criteria'] as $key=>$value){ 

 // Runs mysql_real_escape_string() on every value encountered.
 $clean_criteria = array_map('mysql_real_escape_string', $_REQUEST['criteria']);

 //get the function
 include ($_SERVER['DOCUMENT_ROOT'] .'/script/pagination-functions.php');    
 $page = (int) (!isset($_GET["page"]) ? 1 : $_GET["page"]);
 $limit = 14;
 $startpoint = ($page * $limit) - $limit;

// Convert the array into a string.
 $criteria = implode("','", $clean_criteria);
 if(!$query=mysql_query("SELECT * FROM mytable WHERE exercise IN ('$criteria') ORDER BY long ASC LIMIT {$startpoint} , {$limit}"))
 {
echo "Cannot parse query";
}
elseif(mysql_num_rows($query) == 0) {
echo "No records found";
}

while($row = mysql_fetch_assoc($query)) {

       echo "".$row['title'] ."<br>
             ".$row['description'] ."";
        }
         echo "<div class=\"new-pagination\">";
        echo pagination($statement,$limit,$page);
        echo "</div>";
    }
} 
```

这是我的分页脚本

```
 function pagination($query, $per_page = 10, $page = 1, $url = '?'){    

    $query = "SELECT COUNT(*) as `num` FROM {$query}";
    $row = mysql_fetch_array(mysql_query($query));
    $total = $row['num'];
    $adjacents = "1"; 

    $page = ($page == 0 ? 1 : $page);  
    $start = ($page - 1) * $per_page;   

    $firstPage = 1;
    $prev = ($page == 1)?1:$page - 1; 

    $prev = $page - 1;                          
    $next = $page + 1;
    $lastpage = ceil($total/$per_page);
    $lpm1 = $lastpage - 1;

    $pagination = "";

    if($lastpage >  1)
    {   
        $pagination .= "<ul class=\"pagination1\">";

                if ($page == 1)
  {
  $pagination.= "<li><a class=\"inactive\">First</a></li>";
  $pagination.= "<li><a class=\"inactive\">Prev</a></li>"; 
  }
  else
   {
  $pagination.= "<li><a href=\"{$url}&page=$firstPage\">First</a></li>";
  $pagination.= "<li><a href=\"{$url}&page=$prev\">Prev</a></li>"; 
  }

                $pagination .= "<li class=\"details\">Page $page of $lastpage</li>";
        if ($lastpage < 7 + ($adjacents * 2))

        {   
            for ($counter = 1; $counter <= $lastpage; $counter++)
            {
        if ($counter == $page)
        $pagination.= "<li><a class=\"current\">$counter</a></li>";
        else
         $pagination.= "<li><a href=\"{$url}&page=$counter\">$counter</a></li>";                    
            }
        }
        elseif($lastpage > 5 + ($adjacents * 2))
        {
         if($page < 1 + ($adjacents * 2))       
        {
         for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
        {
        if ($counter == $page)
        $pagination.= "<li><a class=\"current\">$counter</a></li>";
        else
        $pagination.= "<li><a href=\"{$url}&page=$counter\">$counter</a></li>";                 
        }
        $pagination.= "<li class=\"dot\">... </li>";
        $pagination.= "<li><a href=\"{$url}&page=$lpm1\">$lpm1</a></li>";
        $pagination.= "<li><a href=\"{$url}&page=$lastpage\">$lastpage</a></li>";       
        }
        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
        $pagination.= "<li><a href=\"{$url}&page=1\">1</a></li>";
        $pagination.= "<li><a href=\"{$url}&page=2\">2</a></li>";
        $pagination.= "<li class=\"dot\">...</li>";
        for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
                {
        if ($counter == $page)
        $pagination.= "<li><a class=\"current\">$counter</a></li>";
        else
        $pagination.= "<li><a href=\"{$url}&page=$counter\">$counter</a></li>";                 
        }
        $pagination.= "<li class=\"dot\">..</li>";
        $pagination.= "<li><a href=\"{$url}&page=$lpm1\">$lpm1</a></li>";
        $pagination.= "<li><a href=\"{$url}&page=$lastpage\">$lastpage</a></li>";       
            }
            else
            {
        $pagination.= "<li><a href=\"{$url}&page=1\">1</a></li>";
        $pagination.= "<li><a href=\"{$url}&page=2\">2</a></li>";
        $pagination.= "<li class=\"dot\">..</li>";
        for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter 
                 $lastpage;             
                 $counter++)
        {
        if ($counter == $page)
        $pagination.= "<li><a class=\"current\">$counter</a></li>";
                    else
        $pagination.= "<li><a href=\"{$url}&page=$counter\">$counter</a></li>";                 
                }
            }
        }

        if ($page < $counter - 1){ 
            $pagination.= "<li><a href=\"{$url}&page=$next\">Next</a></li>";
            $pagination.= "<li><a href=\"{$url}&page=$lastpage\">Last</a></li>";
        }else{
            $pagination.= "<li><a class=\"inactive\">Next</a></li>";
            $pagination.= "<li><a class=\"inactive\">Last</a></li>";
        }
        $pagination.= "</ul>\n";        
    }

    return $pagination;
} 
```

我还需要存储所选复选框的数据以获取保存下一页的结果。如果有人能给我任何帮助或指出我正确的方向，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:44:15.083

如果代码完整，`$statement`变量未定义，因此`pagination`函数中的 SQL 语法无效，因为`$query`为空。

`for`另请注意，最后一个循环的第三个表达式中没有运算符。所以代码甚至无法编译。

你在 PHP 中启用了警告吗？可能不会，否则你会得到一些，他们会指导你解决问题。请启用它们并分享。你会得到更好的答案。

# excel - 循环工作簿文件夹并使用 Excel VBA 将所有工作表导出为制表符分隔的文本

> ID：15975315
> 
> 赞同：4
> 
> 时间：2013-04-12T15:28:07.237
> 
> 标签：excel, vba

我拼凑了一个 Excel VBA 脚本，该脚本将打开的工作簿中的所有工作表写入单独的、以制表符分隔的文件（这仍然是“宏”吗？我在 Excel 真空中学习这个）。它一次在一个工作簿上运行良好。这里是。

```
Sub exportSheetsToText()
    Dim sWb As String
    Dim sFile As String
    Dim oSheet As Worksheet

    sWb = Left(ActiveWorkbook.FullName, InStr(ActiveWorkbook.FullName, ".") - 1)

    For Each oSheet In Worksheets
        oSheet.Copy
        sFile = sWb & "-" & oSheet.Name & ".txt"
        ActiveWorkbook.SaveAs fileName:=sFile, FileFormat:=xlText
        ActiveWorkbook.Close SaveChanges:=False
        Next oSheet
End Sub 
```

我想扩大它，以便我可以将此宏应用于工作簿文件夹。我写了我认为会遍历每个满足过滤器的工作簿的内容，但它没有写任何 .txt 文件。这里是。

```
Sub exportsSheetsToTextForAll()

    Dim sPath As String
    Dim sWildcard As String
    Dim sMacro As String
    Dim oWb As Workbook
    Dim oPersWb As Workbook

    Application.AutomationSecurity = msoAutomationSecurityForceDisable
    Set oPersWb = Workbooks("PERSONAL.XLSB")
    sMacro = "'" & oPersWb.Name & "'" & "!exportSheetsToText()"
    sPath = "C:\Users\richard\Documents\Research\Data\Excel\Datastream - payout"
    sWildcard = "New*.xlsx"
    sFile = Dir(sPath & "\" & sWildcard)

    Do While Len(sFile) > 0
        Workbooks.Open Filename:=sPath & "\" & sFile
        Application.Run sMacro
        ActiveWorkbook.Close SaveChanges:=False
        sFile = Dir
    Loop

End Sub 
```

它循环遍历我的所有测试文件，但我没有看到任何效果（即，没有 .txt 文件，也没有错误）。

最终，我将在带有宏的非常大的工作簿上运行它，因此禁用宏（我在本地没有宏，它们位于专用数据机上）并在打开下一个之前关闭一个大工作簿非常重要。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:34:49.593

@Siddarth 将参数传递给的想法`exportSheetsToText()`是关键。我也有一个错误，将宏名称传递给`Application.Run`. 以下工作并且更清洁。

```
Sub exportsSheetsToTextForAll()

    Application.AutomationSecurity = msoAutomationSecurityForceDisable

    excelFiles = Dir(ThisWorkbook.Path & "\" & "New*.xlsx")
    fromPath = ThisWorkbook.Path

    Do While Len(excelFiles) > 0
        Debug.Print Files
        Set oWb = Workbooks.Open(Filename:=fromPath & "\" & excelFiles)
        Application.Run "exportSheetsToText", oWb
        oWb.Close SaveChanges:=False
        excelFiles = Dir
    Loop

End Sub

Sub exportSheetsToText(iWb As Workbook)

    For Each ws In iWb.Worksheets
        ws.Copy
        Set wb = ActiveWorkbook
        textFile = Left(iWb.FullName, InStr(iWb.FullName, ".") - 1) & "-" & ws.Name & ".txt"
        wb.SaveAs Filename:=textFile, FileFormat:=xlText
        wb.Close SaveChanges:=False
    Next ws
End Sub 
```

# file - Linux文件之间的字符串匹配

> ID：15975316
> 
> 赞同：0
> 
> 时间：2013-04-12T15:28:13.593
> 
> 标签：file, grep, pattern-matching

我有两个要比较的文件。第一个是制表符分隔，第二个是逗号分隔，两者都以 ID 开头。我想匹配这些 ID 并做两件事。首先，我想打印出两个文件之间匹配的所有文件。然后（如果可能）我想将所有不匹配的文件打印到一个单独的文件中。文件如下所示：（逗号分隔）

```
S-3DFSG,0,254654,3,e /// x, /// 5
S-8FGDG,6,464782,6,i /// n /// n /// e /// n, ///  /
S-4SKDH,0,445676,3,n /// e /// p, ///  /// F 
```

（标签分隔）

```
S-3DGSF DG  2   5   7   DF  2   2   4684648654
S-4GXBG DF  6   2   4   FD  7   1   2415244459
S-3DFST GA  0   8   4   CF  9   8   2 
```

我试过

```
grep -F -wf file1 file2 > incommon.txt 
```

对于 grep 固定模式 - 仅匹配这些文件的单词

但我没有任何输出......有人对我如何改进这个有任何建议吗？我确实考虑过正则表达式，但我对它的使用并不是非常精通。不过我不介意使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:04:33.317

分析.py：

```
import re

f = open('tab.txt', 'r')
data_tab = f.read()
f.close()

f = open('csv.txt', 'r')
data_csv = f.read()
f.close()

matches_tab = re.findall(r'^([^\t]+)', data_tab, re.M)
matches_csv = re.findall(r'^([^,]+)', data_csv, re.M)

common = set(matches_tab) & set(matches_csv)
not_common = set(matches_tab) ^ set(matches_csv)

f = open('common.txt', 'w')
for el in common:
    f.write(el)
    f.write('\n')
f.close()

f = open('not_common.txt', 'w')
for el in not_common:
    f.write(el)
    f.write('\n')
f.close() 
```

将其保存在名为*analyze.py*的文件中并使用以下命令运行脚本：

```
python analyze.py 
```

将 tab.txt 更改为您的选项卡式文件名，将 csv.txt 更改为您的逗号分隔文件名，并且您的列表应该转储到工作目录中。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:04:34.653

如果您仍想在 shell 中执行此操作，则对于“共同点”，您可以使用：

```
sed 's/\([^,]*\),.*/\1/' commed.txt > __ids.txt
grep -F -f __ids.txt $f tabbed.txt
rm -f __ids.txt 
```

对于“不常见”：

```
sed 's/\([^,]*\),.*/\1/' commed.txt > __ids.txt
grep -F -v -f __ids.txt $f tabbed.txt
sed 's/\([^\t]*\)\t.*/\1/' commed.txt > __ids.txt
grep -F -v -f __ids.txt $f tabbed.txt
rm -f __ids.txt 
```

其中“commed.txt”是逗号分隔的文件，“tabbed.txt”是制表符分隔的文件。

如果 ID 可能出现在第二个文件的其他位置，这可能会失败！如果 ID 不会被误认为是正则表达式（no `.`, `,`, `\`,`*`等），则可以使用“grep”更强大的解决方案。

# c# - 从 C# 多次调用 KnokcoutJS ViewModel 而无需单击按钮

> ID：15975321
> 
> 赞同：1
> 
> 时间：2013-04-12T15:28:23.697
> 
> 标签：c#, javascript, jquery, asp.net, knockout.js

我正在开发一个 SharePoint 场解决方案，其中我有一个包含我的用户控件的控件模板。我正在使用 Knockout 模型来捕获屏幕上的所有信息。最初，当单击新项目时，我第一次调用我的模型以初始化用户控件并使用 ScriptManager RegisterStartupScript 将控件绑定到屏幕（所有值最初都是空的，日期除外）。现在，当用户填写值时，我的模型会捕获所有更改，我有一个函数可以获取模型，将其转换为 XMl 并将其保存在隐藏的文本框中。但我无法从后面的控制模板代码中获取该 java 脚本函数。我可以通过按钮输入使其工作，但我需要它在没有任何按钮的情况下工作。我再次尝试使用 RegisterScripts，但没有 t 工作，因为该页面从未重新加载。如何在不使用按钮的情况下再次调用模型？谢谢！！

这是我的代码片段：

# JavaScript

```
 $(document).ready(function () {

    MyMasterviewModel = {
    myViewModel: new viewmodel()
    }
    ko.applyBindings(MyMasterviewModel);

   })

 var myViewModel;

 var viewmodel = function () {
 var self = this;
 self.InitializeEntity = function () {
 var initialURL = "~/_layouts/EinvoiceMVCService.asmx/InitializeModel";
        $.ajax({
            type: "Post",
            url: initialURL,
            contentType: "application/json; charset=utf-8",
            data: {},
            dataType: "json",
            success: function initializesuccess(msg) {
             //I get the data here
            },
            error: oninitialFail

        });
    }
    self.GetXmlFromModel = function () {
        var getxmlurl = "~/_layouts/EinvoiceMVCService.asmx/GetXml";
        var mod = ko.mapping.toJS(MyMasterviewModel.myViewModel.invoice());
        var DTO = { 'p_invoice': mod }
        $.ajax({
            type: "Post",
            url: getxmlurl,
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(DTO),
            dataType: "xml",
            success: function XMLsuccess(msg) {

              //I get XML string and store it in a text box
              var xmlstring = msg.xml;
              document.getElementById("<%= txtxml.ClientID %>").value = xmlstring;
            },
            error: oninitialFail
        })

    } 
```

# HTML

```
 <tr>
 <td align="right">
   Invoice Amount:
 </td>
 <td align="left">
  <div data-bind="with: myViewModel.invoice().APInvoiceHeader">
  <asp:TextBox ID="A7txtInvoiceAmount" runat="server" Style="text-align: right" 
    data-bind="numericValue: $data.InvoiceAmount">0</asp:TextBox></div>
 </td>
 <td align="right">
  Sales Tax:
 </td>
 <td align="left" style="padding-right: 10px;">
 <div data-bind="with: myViewModel.invoice().APInvoiceHeader">
 <asp:TextBox ID="AtxtSalesTax" runat="server" Style="text-align: right"
  data-bind="value: $data.Tax">0</asp:TextBox></div>
 </td>
 </tr>
 <button  data-bind="click: myViewModel.GetXmlFromModel">lastest Model </button>
 <asp:TextBox ID="txtxml" runat="server" Visible="false"></asp:TextBox> 
```

# 后面的模板控制代码（C#）：

```
namespace Flexi.Entity.UI.SharePoint.EInvoice
{
    public class EInvoiceFieldControl : NoteField
    {
      protected EInvoiceMVCUserControl EInvoiceControl;

    protected override string DefaultTemplateName
    {
        get
        {
            return "EInvoiceFieldControl";
        }
    }
    public override string DisplayTemplateName
    {
        get
        {
            return DefaultTemplateName;
        }
        set
        {
        }
    }
    protected override void CreateChildControls()
    {
        if (this.Field != null)
        {
            base.CreateChildControls();
        //Here i get my user control initialized
            this.EInvoiceControl =  
            (EInvoiceMVCUserControl)TemplateContainer.FindControl("EInvoice");
        }
        if (this.ControlMode != SPControlMode.Display)
        {
            if (!this.Page.IsPostBack)
            {
                if (this.ControlMode == SPControlMode.New)
                {
    //I go into Model and get InitializeEntity. Works fine         

 ScriptManager.  RegisterStartupScript(this, this.GetType(), "initialize",              
 "MyMasterviewModel.myViewModel.initializemodel();", true);             
                    }
                }
                else
                {
            //ToDo later            

                }

            }
        }
        else 
        {
            //ToDo later
        }
    }
    public override object Value
    {
        get
        {
            EnsureChildControls();

    EInvoiceControl.getxml(); //This call is the one isn't working!
    return EInvoiceControl.getstringvalue();
        }
        set
        {
            EnsureChildControls();  
            base.Value = (String)value;
            }
        }
    }
 } 
```

# 用户控制：

```
namespace Flexi.Entity.UI.SharePoint.EInvoice
{
public partial class EInvoiceMVCUserControl : UserControl
{

public void getxml()
{
 //Here is where I want to go into myViewModel.GetXmlFromModel() 
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "lastest1", 
"MyMasterviewModel.myViewModel.GetXmlFromModel();", true);

}

   public string getstringvalue()
   {
    string val = txtxml.Text;  //It's empty here because GetXmlFromModel wasn't executed
    return val;
     }
     }
     } 
```

我尝试直接从控件模板内部调用 registerstartupscripts，而不是去用户控件，这也不起作用。我也使用了 registerclientscripts 但没有运气。任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T00:05:37.053

您可以订阅将在表单中更新的值：

```
myViewModel.myFormValue.subscribe(function(newValue){
   if(newValue){
      myViewModel.GetXmlFromModel();
   }
}); 
```

[http://knockoutjs.com/documentation/observables.html](http://knockoutjs.com/documentation/observables.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T18:09:48.310

我最终通过使用一个可用于共享点的 Javascript 函数来解决我的问题，称为 Presaveaction(); 一旦你点击了共享点保存按钮，这个函数就会被调用。在那里我能够刷新我的模型并在屏幕上获取所有数据，

# html - 浮动和小屏幕的问题

> ID：15975322
> 
> 赞同：0
> 
> 时间：2013-04-12T15:28:33.827
> 
> 标签：html, css

我正在编写一个网络应用程序，并且在将内容缩放到 iPhone 大小时遇到​​了一些麻烦。我已经设置了我的按钮：

```
<div class="form_divs" id="metal_buttons">
    <button class="btn" id="btn-bronze" name="bronze" type="button">Bronze</button>
    <button class="btn" id="btn-silver" name="silver" type="button">Silver</button>
    <button class="btn" id="btn-gold" name="gold" type="button">Gold</button>
</div> 
```

使用`float:left` *CSS*属性，产生所需的外观（所有按钮并排，没有空格）

[小提琴 1](http://jsfiddle.net/PhDBrown/zWfT8/)

```
#metal_buttons {
    height: 40px;
    margin-right: 4%;
    margin-left: 4%;
    white-space: nowrap;
}

.btn {
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0.0, #F8F8F8), color-stop(1.0, #AAAAAA));
    width: 33%;
    height: 100%;
    float: left;
} 
```

但是在我的 iPhone 上，这会导致按钮换行到下一行。

如果我删除该`float: left`属性，则该行不再换行，但我的按钮之间有空格：

[小提琴 2](http://jsfiddle.net/PhDBrown/vLn93/1/)

```
#metal_buttons {
    height: 40px;
    margin-right: 4%;
    margin-left: 4%;
    white-space: nowrap;
}

.btn {
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0.0, #F8F8F8), color-stop(1.0, #AAAAAA));
    width: 33%;
    height: 100%;
} 
```

我能做些什么来获得第一个小提琴的行为（按钮之间没有间距），同时防止这些按钮在小屏幕上换行（例如，通过缩小）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:34:07.677

对于您应该放置的移动外观

```
@media (max-width: 767px) {
  #your mobile css goes here
} 
```

所以你可以有不同的风格，同名，在移动和其他平台上都好看

你可以去[@media](http://www.w3.org/TR/CSS2/media.html) 了解更多信息

# dart - 自定义元素 - 来自构造函数中 query() 的空引用

> ID：15975325
> 
> 赞同：3
> 
> 时间：2013-04-12T15:28:41.127
> 
> 标签：dart, dart-webui

我正在开发我的第一个 Dart 应用程序，已经完成了 Game of Darts 教程。我正在尝试创建一个语义命名的顶级菜单元素，该元素最终将在我的页面顶部显示导航菜单选项卡列表。我的 Dart 应用程序能够识别我的自定义元素并调用关联的构造函数。

但是，当我尝试在我的自定义元素中查询 UL 元素时，我得到了一个空引用。我需要 UL 参考才能将我的 LI 元素动态加载到菜单中。

问题 1：该元素是否应该在 DOM 中在构造函数运行时可见？

问题 2：如果还不可见，在自定义元素完全加载到 DOM 后，是否可以使用 Dart 事件来触发加载 LI 元素？

提前致谢！作为参考，这是我的自定义元素的来源：

topmenu-element.html

```
<!DOCTYPE html>

<html>
  <body>
    <element name="top-menu" constructor="TopMenu" extends="div">
      <template>
        <div>
          Top Menu
          <ul id="top-menu-list"></ul>
        </div>
      </template>
      <script type="application/dart" src="topmenu-element.dart"></script>
    </element>
  </body>
</html> 
```

topmenu-element.dart

```
import 'package:web_ui/web_ui.dart';
import 'dart:html';

class TopMenu extends WebComponent {

  List menuItems = ['Session', 'Authentication Services', 'Vehicle Services', 'Subscriber Services', 'Data Services'];

  void populateMenu() {
    UListElement menuList = query('#top-menu-list');
    LIElement newMenuItem = new LIElement();
    newMenuItem.text = menuItems[0];
    menuList.children.add(newMenuItem);
  }

  TopMenu() {
    // populateMenu();
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:41:13.407

我不能具体谈论带有查询方法的构造函数中的 DOM 可见性，因为我真的不确定。但是，您可能可以使用更好的方法，这些方法在[元素生命周期](http://www.dartlang.org/articles/web-ui/spec.html#lifecycle-methods)的各个阶段被调用。

也就是说，我能问一下为什么你需要使用这种特殊的方法来添加孩子吗？[使用模板重复](https://groups.google.com/a/dartlang.org/d/msg/web-ui/UZ4b695Hzi4/9Vu7oH3rHYcJ)可能更容易做到这一点，如下所示：

```
<!DOCTYPE html>

<html>
  <body>
    <element name="top-menu" constructor="TopMenu" extends="div">
      <template>
        <div>
          Top Menu
          <ul id="top-menu-list">
            <li template repeat="item in menuItems">{{item}}</li>
          </ul>
        </div>
      </template>
      <script type="application/dart" src="topmenu-element.dart"></script>
    </element>
  </body>
</html> 
```

那么就不需要将任何菜单显示代码放入构造函数中。

# apache - 使用 Tomcat 的免费网络托管？

> ID：15975328
> 
> 赞同：3
> 
> 时间：2013-04-12T15:28:44.057
> 
> 标签：apache, tomcat, web-hosting

我有一个`.war`文件需要部署在公共 ip 中才能工作。你知道我可以尝试部署的免费网络主机吗？我知道几十个使用 Apache、PHP、MySQL 的解决方案，但从未真正听说过关于 Tomcat 的任何消息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T17:02:28.333

最简单的答案，即使这需要一些工作，AWS。

1.  创建一个免费的 AWS 账户。
2.  在免费套餐中启动 EC2 实例
3.  登录 EC2 实例（您自己的服务器）
4.  通过 wget 下载 tomcat
5.  为该实例分配公共 IP 并打开端口 8080 或您分配的任何内容
6.  部署和享受！

# ios - UIButton 子类自动应用了 cap insets

> ID：15975330
> 
> 赞同：1
> 
> 时间：2013-04-12T15:28:45.683
> 
> 标签：ios, objective-c, cocoa-touch, uibutton

好吧，我以为我有一个好主意。带有帽插图的 UIButton 自动应用于背景图像。

```
@implementation JLTCapInsetButton

- (void)setBackgroundImage:(UIImage *)image forState:(UIControlState)state
{
    CGFloat leftRight = (image.size.width - 1) / 2;
    CGFloat topBottom = (image.size.height - 1) / 2;
    UIEdgeInsets insets = UIEdgeInsetsMake(topBottom, leftRight, topBottom, leftRight);
    UIImage *capInsetImage = [image resizableImageWithCapInsets:insets];

    [super setBackgroundImage:capInsetImage forState:state];
}

@end 
```

这不起作用，因为 IB 不使用`-setBackgroundImage:forState:`. 我对此的解决方法是使用`-awakeFromNib`.

```
- (void)awakeFromNib
{
    [self JLT_fixBackgroundImageForState:UIControlStateNormal];
    [self JLT_fixBackgroundImageForState:UIControlStateHighlighted];
    [self JLT_fixBackgroundImageForState:UIControlStateDisabled];
    [self JLT_fixBackgroundImageForState:UIControlStateSelected];
    [self JLT_fixBackgroundImageForState:UIControlStateSelected | UIControlStateHighlighted];
    [self JLT_fixBackgroundImageForState:UIControlStateSelected | UIControlStateDisabled];
}

- (void)JLT_fixBackgroundImageForState:(UIControlState)state
{
    UIImage *backgroundImage = [self backgroundImageForState:state];

    if (backgroundImage)
        [self setBackgroundImage:backgroundImage forState:state];
} 
```

这不起作用，因为`[self backgroundImageForState:state]`如果图像被设置为总是返回一个值`UIControlStateNormal`。

解码时是否有一种干净的方法来挂钩背景图像的设置？有没有一种干净的方法来检测一个状态是否有背景图像，而不仅仅是来自基本状态的隐含图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:40:26.887

在修复之前保留对已应用于 UIControlStateNormal 的图像的引用如何？对于后续的控制状态，只需在应用修复之前检查图像是否相同，如果是，请跳过修复该状态的图像...

# javascript - jQuery .load(function) 同步

> ID：15975331
> 
> 赞同：5
> 
> 时间：2013-04-12T15:28:56.117
> 
> 标签：javascript, jquery, image, asynchronous

同步使用jQuery加载功能的最佳方法是什么。

我需要加载图像，但在该图像加载之前无法执行下一行代码。

我可以循环一个变量，直到加载完成，但想知道是否有更好的方法来做到这一点。

```
var img = jQuery('<img src="' + url + '"/>').load(function () {                 

            });  
  //Run code here once img load has comlpeted. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-24T09:54:46.280

您还可以使用回调函数来获取同步行为 -

```
var result = $('#main-container').load( 'html/Welcomeform.html', 
                function () {
                     if($("textarea").find("#mail-id")){
                        $("textarea#mail-id").val(email_id);
                     }
                     } ); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-12T15:32:47.327

据我所知，该`load`事件将始终**异步**触发，除非图像已被缓存（在某些浏览器中）。唯一可靠的解决方案是像您一样将代码放入回调中。但是，为了确保`load`处理程序始终在所有浏览器中被触发，即使图像被缓存，请确保在设置图像的属性**之前添加处理程序。**`src`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:40:32.700

```
var img = jQuery('<img src="' + url + '"/>').load(runner);  
function runner() {
    //run code here once image is loaded
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-25T18:49:00.143

一旦检索到屏幕的基本元素（实际的 html），load() 中的回调函数将触发，但不等待图像完成，您可以使用它使其等待。

```
$('#holder').load(function() { 
var imgcount = $('#holder img').length; 
$('#holder img').load(function(){ 
imgcount--; 
if (imgcount == 0) { 
/* now they're all loaded, let's display them! */ 
} 
}); 
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-19T17:54:01.440

我来到这里寻找类似的解决方案。从读数来看，.load 是不可能的，您需要使用 AJAX 请求，正如问题评论指出的那样。

在我的情况下，我需要加载一个 html 文件，并且我添加了一个转换来更改内容。即使我在加载回调中显示内容，旧内容也会在转换后的新内容之前显示。

```
var main = $("#main");
    main.load("about.html", displaySection);

function displaySection () {
   main.show('blind');
} 
```

我的解决方法是运行转换，在超时函数中显示加载的内容，延迟参数为 200。

```
var main = $("#main");
    main.load("about.html", displaySection);

function displaySection () {
    setTimeout(function() {
        main.show('blind');
    }, 200);
} 
```

问题可能是连接速度太慢以至于新页面加载时间超过 200 毫秒，但在这种情况下，我想知道稍后会启动回调。我不明白为什么没有我觉得很丑陋的超时就无法工作，但它解决了我的问题......以防万一其他人没有考虑过这种可能性。

# sql - sql单主键

> ID：15975332
> 
> 赞同：2
> 
> 时间：2013-04-12T15:28:57.210
> 
> 标签：sql, primary-key

在阅读 w3schools 关于 SQL 主键的文章时，我阅读了以下内容：

> *每个表都应该有一个主键，每个表只能有一个主键。*

[http://www.w3schools.com/sql/sql_primarykey.asp](http://www.w3schools.com/sql/sql_primarykey.asp)

然而，我有这个 SQL 文件，用于制作我运行和工作的表：

```
CREATE TABLE accessLog (
  memberId        SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
  pageUrl         VARCHAR(255) NOT NULL,
  numVisits       MEDIUMINT NOT NULL,
  lastAccess      TIMESTAMP NOT NULL,
  PRIMARY KEY (memberId, pageUrl)
); 
```

现在根据上面的主键引用，代码行：“PRIMARY KEY(memberId, pageUrl)”应该不起作用。

关于如何在表中拥有多个主键的任何帮助。注意：我已经知道“UNIQUE”、“UNIQUE KEY”语句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:30:18.423

这是一个复合主键 - 它仍然是一个键，但它由多个列组成。 [这](https://stackoverflow.com/a/1110364/128217)是对复合主键的简短描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:31:55.567

它是一个`composite primary key`. 当您将多个列定义为表上的主键时，它称为`composite primary key`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:43:10.697

您的报价

“每个表都应该有一个主键，每个表只能有一个主键。”

具有误导性。相当于说每个州只能有一个*省会*城市，或者每个公司只能有一个*CEO*。

当然，每个表只能有一个***PRIMARY***键。但是任何表都可以有多个唯一键。而且，坦率地说，不必将其中任何一个指定为“PRIMARY”。事实上，将一个键指定为 PRIMARY 键完全没有任何作用。主键只有一个区别（除了下面提到的），它并不与*所有*键相关联。

编辑...除了一个小的区别。如果一个键被指定为主***键***，那么该键中使用的所有字段都必须是不可为空的。其他唯一键不需要遵守此规则，尽管表中包含空值的行仍然必须是唯一的，因为对于所有不可为空的字段和空值，不能有超过一行具有相同的值。可为空的字段。

# jquery - 需要js和backbone

> ID：15975333
> 
> 赞同：0
> 
> 时间：2013-04-12T15:28:57.720
> 
> 标签：jquery, backbone.js, requirejs

尝试将 require js 应用于我的代码时，我得到一个主干是未定义的错误。我读过网站上的其他文章说要使用 shim，但并没有解决问题。

助手/util.js：

```
require.config({

waitSeconds: 10,
paths: {
    "jquery": "https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min",
    "underscore": "http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min",
    "backbone": "http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min"
},
shim: {
    jquery: {
        exports: "$"
    }, 
    underscore: {
        exports: '_'
    },
    backbone: {
        deps: ["underscore","jquery"],
        exports: "Backbone"
    },
    app: {
        deps: ["backbone"],
        exports: "App"
    }
}

});
require(["Scripts/jquery.flip.min.js"]);
require(["Scripts/jquery-ui-1.10.2.custom.min.js"]);
require(["Scripts/RatingProviders.js"]); 
```

主.js：

```
require(["helper/util"], function(App) {
    //Models
     TestProvider = Backbone.Model.extend({
        defaults: {
            ID: '',
            Name: '',
        },
        initialize: function() {
            this.ID= '';
            this.Name= '';
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:35:38.050

我有根据的猜测是你从来没有真正的`require`Backbone。

尝试像这样要求它：

```
require(["helper/util", "Backbone"], function(App) {
    //Models
     TestProvider = Backbone.Model.extend({
        defaults: {
            ID: '',
            Name: '',
        },
        initialize: function() {
            this.ID= '';
            this.Name= '';
        }
    });
}); 
```

当 Backbone 是模块要求的一部分但实际上不是 AMD 模块时，Shim 配置告诉加载程序该怎么做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:44:34.837

总而言之，您的文件没有多大意义。在这里，您正在**定义**一个类，因此您应该使用该`define`函数。

```
define(["helper/util"], function(App) { 
```

你没有使用`App`var，所以让我们删除它：

```
define([], function() { 
```

现在，我们想要包含 Backbone（参见 Nirazul 对**shim**解释的回答）以确保它已加载。此外，Backbone 将是一个全局变量，因此您不需要在参数列表中声明它：

```
define(['backbone'], function() { 
```

现在，您必须返回新课程：

```
return TestProvider = Backbone.Model.extend({ 
```

此外，对于您的 jQuery 插件，您还可以更改一些内容。首先，在中声明它们`require.config`（将 jQuery 指定为 shim 中的依赖项）。然后，将它们作为依赖项添加到需要它们的任何类中。这样，您就可以在实际需要它们时异步加载它们。

# java - 在 Eclipse 的另一个项目中使用来自一个 Java 项目的文件

> ID：15975335
> 
> 赞同：1
> 
> 时间：2013-04-12T15:28:59.950
> 
> 标签：java, eclipse, reference, hyperlink, include

我有两个 Java 项目 - `MyProject` 和 `MyProjectStubs`

有大部分的`MyProject`课程。

具有`MyProjectStubs`某些“虚拟”类，其处理稍后将被更敏感的处理所取代——这些处理不能与`MyProject`项目存储在同一网络上。

我能够告诉`MyProjectStubs`“要求”`MyProject`以进行构建。`MyProjectStubs`但是，当然，我必须拥有与in相同的文件`MyProject`，这样`MyProject`才能正确构建。

有没有办法从 中删除这些虚拟文件`MyProject`，并`MyProject`在`MyProjectStubs`不创建两个项目之间的循环引用的情况下引用这些文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:31:21.830

使用接口。这正是“虚拟”文件的含义，如果您将接口放入未来将在 MyProject 中开发的类，然后在另一个中实现这些接口存根`MyProjectStubs`，`MyProject`将编译。

这是接口存在的主要原因之一。

# java - 在 Jar 中打包和使用嵌入式数据库（H2.db 文件）？

> ID：15975339
> 
> 赞同：10
> 
> 时间：2013-04-12T15:29:14.517
> 
> 标签：java, database, jar, packaging, h2

我正在为我的应用程序使用 H2 嵌入式数据库。我想在它自己的 Jar 中包含应用程序所需的一切，如果可能的话，**包括它的数据库**。我的应用程序不需要创建临时文件或任何东西，所以基本上用户只需运行 Jar。

**是否可以将数据库嵌入到 Jar 中，并且可以直接输出`INSERT`新记录`SELECT`？**

编辑：澄清一下，我不希望将 H2 驱动程序 jar 嵌入到我的可分发 jar 中，我希望将 h2 数据库文件（`someDatabase.h2.db`文件）嵌入到 Jar 中，并且仍然能够从该数据库中写入/读取。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T15:38:13.740

如果您希望将`myDatabase.h2.db`文件嵌入到 中`.jar`，您可以这样做，但您将拥有对数据库的只读访问权限。由于`.jar`文件是只读的，因此您无法修改它们，因此无法执行`INSERT`或`DELETE`任何 DDL 命令。

话虽如此，下面是有关如何以只读方式嵌入它的说明。

根据[H2 的文档](http://www.h2database.com/html/faq.html#connect)：

JDBC URL`"jdbc:h2:~/myDatabase"`告诉 H2 引擎在当前用户`myDatabase.h2.db`的**主目录中查找一个数据库文件。**

JDBC URL告诉 H2 引擎在**当前目录**（执行 java 程序的位置）中`"jdbc:h2:file:/myDatabase"`查找名为的数据库文件。`myDatabase.h2.db`

 **如果将`h2.db`文件嵌入到 a`.jar`中，则无法以普通方式访问它。它只能作为 zip 文件中的文件访问。

为了使 H2 使用它，您必须使用 zip 作为 URL：

```
jdbc:h2:zip:~/data.zip!/test 
```

[在“ Zip 或 Jar 文件中的只读数据库](http://h2database.com/html/features.html#database_in_zip)”中查看更多信息。

当您将文件作为资源嵌入到 jar 中时，您可能会得到它的相对 url。使用...

`MyClass.class.getClassLoader().getResource("myDatabase.h2.db")`

...你会得到类似的东西：

`jar:file:/C:/folder1/folder2/myJar.jar!/myDatabase.h2.db`

然后，您可以将其作为字符串操作并作为 JDBC URL 连接传递给 H2。**

# reflection - Squeak 中的拦截消息

> ID：15975340
> 
> 赞同：5
> 
> 时间：2013-04-12T15:29:17.240
> 
> 标签：reflection, smalltalk, metaclass, squeak, objc-message-send

我试图更好地理解 Smalltalk 中的反射。我正在使用最新版本的 Squeak (v4.3)。我想拦截发送到我的一个类的实例的每条消息。我以为我可以重写该方法`ProtoObject>>withArgs:executeMethod`，但 Stéphane Ducasse 向我解释说，出于性能原因，不使用此方法（这是我自己对他的回答的总结）。我应该覆盖哪种方法/如何拦截发送的消息？

这是我尝试的代码：

```
Object subclass: #C
    instanceVariableNames: 'i'
    classVariableNames: ''
    poolDictionaries: ''
    category: 'CSE3009'.

C class compile: 'newWithi: anInt
    ^(self new) i: anInt ; yourself.'.

C compile: 'withArgs: someArgs executeMethod: aMethod
    Transcript show: ''Caught: ''.
    ^ super withArgs: someArgs executeMethod aMethod.'.

C compile: 'foo: aText
    Transcript show: aText.
    Transcript show: i.
    Transcript cr.'.

C compile: 'i: anInt
    i := anInt.'.

o := C newWithi: 42.
o foo: 'This is foo: '. 
```

执行这整段代码会产生：

```
This is foo: 42 
```

当我想要：

```
Caught: This is foo: 42 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:47:53.070

没有内置方法可以拦截此类对象的消息。我们通常使用两种方法来完成这种技巧。

首先，您可以创建一个响应doesNotUnderstand: 的包装器对象。该对象的超类通常为 nil，因此它不会从 Object 继承任何实例方法。doesNotUnderstand: 处理程序会将其所有消息委托给目标对象。它可以选择在调用之前和之后执行代码。所有对原始对象的引用现在都将指向新的“代理”对象。发给 self 的消息不会被拦截，代理需要测试返回 self 的对象并将返回的对象更改为代理。

第二种方法是使用一种称为 Method Wrappers 的机制。方法包装器允许您将一组类中的所有方法替换为在调用原始方法之前和之后执行一些其他操作的方法。这种方法可以提供相当完美的结果并拦截所有消息，包括发送给自己的消息。

MethodWrappers 可用于 VisualWorks 和 VASmalltalk。我相信它也适用于[Squeak](http://www.squeaksource.com/ObjectsAsMethodsWrap.html)和 Pharo，但我并不肯定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T06:17:12.083

三种主要技术是：

*   动态代理
*   方法包装
*   字节码检测

为了更好地比较所有可能的方法，请查看 Stephane Ducasse 的“ [Evaluating Message Passing Control Techniques in Smalltalk](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.32.5622) ”（显然你已经认识他了）。

[F. Rivard 的“ Smalltalk: A Reflective Langauge](http://users.informatik.haw-hamburg.de/~pfeiffer/pub/reflecti.htm) ”也很有趣，它展示了如何使用字节码重写来实现前置条件和后置条件。这也是一种拦截形式。

# excel - Excel 2010 VBA .send 错误

> ID：15975342
> 
> 赞同：0
> 
> 时间：2013-04-12T15:29:17.983
> 
> 标签：excel, vba, email, outlook

我有以下代码，在这个之前的 10 个宏可以正常工作（我使用调用 x，调用 Y 宏），但是这个不想工作。

```
Sub Send_Tips()
Application.DisplayAlerts = False
Dim Email_Subject, Email_Send_From, Email_Body As String, i As Integer
Dim Mail_Object, nameList As String, o As Variant
    Email_Send_From = ""
     For i = 1 To 1 'use cells 1 to 1 in column "A" where names are stored
If Sheets("Tips").Range("A1").Value <> "" Then
    nameList = nameList & ";" & Sheets("Tips").Range("A" & i).Value
End If
Next
    Set Mail_Object = CreateObject("Outlook.Application")
    With Mail_Object.CreateItem(o)
        .Subject = "Dealer Action Plans"
        .To = nameList
        .Body = "Please find attached the latest version of the Dealer Action Plans." 
        'Make a copy of the active sheet and save it to
 'a temporary file
 Worksheets("Tips").Activate
ActiveSheet.Copy
Set wb = ActiveWorkbook
Filename = "Tips.pdf"
Cells.Select
Selection.Copy
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False

Worksheets("Tips").ExportAsFixedFormat _
Type:=xlTypePDF, _
Filename:="c:\aaaWork\Tips.pdf", _
Quality:=xlQualityStandard, _
IncludeDocProperties:=True, _
IgnorePrintAreas:=False, _
OpenAfterPublish:=False

'    ActiveWorkbook.SaveAs Filename:="C:\aaaWork\NC1.PDF", FileFormat:=17

        .Attachments.Add "C:\aaaWork\Tips.PDF"
        .send 'Will send straight away use .display to send manually
       ActiveWorkbook.Close Saved = True
        Kill "C:\aaaWork\Tips.PDF"
End With
    Application.DisplayAlerts = True
End Sub 
```

当运行 .send '将立即发送使用 .display 手动发送行时，我收到以下错误消息。运行时错误“2147467259 (80004005)”：Outlook 无法识别一个或多个名称

工作表名称提示确实存在，有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:58:48.900

只是为了跟进我提到的关于变量声明的内容......当你这样做时：

`Dim Email_Subject, Email_Send_From, Email_Body As String, i As Integer`

您没有指定类型，`Email_Subject, Email_Send_From`因此这些被视为类型 Variant。与`Mail_Object`下一行相同：

`Dim Mail_Object, nameList As String, o As Variant`

根据下面的内容重写这些行，以便正确声明您的字符串变量：

`Dim Email_Subject$, Email_Send_From$, Email_Body$, i As Integer` `Dim Mail_Object$, nameList As String, o As Variant`

虽然这些不会导致这个特定错误，但如果变量设置不正确，它们肯定会导致其他错误（例如，Variant 可能包含对象或数组而不是其余代码期望的字符串等）

否则，我将首先清理上面的代码，然后用 替换`.Display`进行`.Send`故障排除并确保在电子邮件中正确设置所有内容。

# javascript - 创建一个javascript函数来点击按钮

> ID：15975345
> 
> 赞同：0
> 
> 时间：2013-04-12T15:29:30.790
> 
> 标签：javascript, jquery

我想让它在曲目完成播放时自动调用一个javascript函数，该函数单击下一个曲目按钮，以便播放列表继续播放。到目前为止，我有：

```
function next() {
    $("#nextTrack").click();
} 
```

但是当它被调用时似乎没有任何作用，有人知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:46:59.093

`click`在 DOM 元素本身上触发事件的方法是：

```
$("#nextTrack")[0].click(); 
```

这将获取第一个（唯一）匹配的 DOM 元素（将其从 jQuery 包装器中删除）并调用本机`click`方法。

我可以为此提供的唯一理由是因为`trigger`没有（或在过去的版本中没有）尝试调用本机方法。我发誓在最新版本中，我可以使用`.trigger("click")`(same as `.click()`) 并且它会有效地单击元素...执行本地任何单击处理程序和 jQuery 处理程序。

`trigger``jQuery.on`很棘手，因为 jQuery 将任何与,`jQuery.bind`等绑定的事件处理程序存储在一个特殊的地方。当原生事件被触发或被`.trigger("event_name")`使用时，所有这些特殊的处理程序都会被执行。但是由于某种原因，本机事件并不*总是*被触发（正如您似乎已经发现的那样）。我不确定是因为 jQuery 的版本还是事件类型。

**更新：**

发生这种情况的原因是因为 jQuery`<a>`在使用 时特别对待`.trigger("event_name")`，特别是针对`click`事件。

在对上面的东西喋喋不休之后，我决定研究`trigger`. 最后，调用原生 DOM 方法，使用`elem[ type ]();`. 但它只在某些条件下达到这一点......这些是条件（在其他嵌套`if`语句中）：

```
if ( (!special._default || special._default.apply( elem.ownerDocument, data ) === false) &&
    !(type === "click" && jQuery.nodeName( elem, "a" )) && jQuery.acceptData( elem ) ) { 
```

我猜想具体来说，`!(type === "click" && jQuery.nodeName( elem, "a" ))`在你的情况下，这部分是阻止它的原因，因为你的目标元素是`<a>`，它就是`click`事件。

**演示：**这里基本上只是以更简单的方式模仿您的代码：http: [//jsfiddle.net/EjVMY/](http://jsfiddle.net/EjVMY/) - 注意初始`console.log`加载时如何不执行（因为`trigger`）。但是，一旦您**实际**单击该事件，`console.log`它就会执行。我发现`<a>`用 a替换`<div>`会改变行为 - 它会在加载时登录。

当然，如果我一开始就用谷歌搜索，我会发现：[触发对锚链接的点击](https://stackoverflow.com/questions/9904170/trigger-a-click-on-a-anchor-link)

# ruby - 如何等到我们处理打开的 excel 并在手动关闭后继续进行 ruby 代码

> ID：15975349
> 
> 赞同：0
> 
> 时间：2013-04-12T15:29:35.417
> 
> 标签：ruby, excel, win32ole

我试图在 Ruby 中实现以下目标

1.  打开一个 Excel

    ```
    require 'win32ole'

    excel = WIN32OLE.new('Excel.Application')
    worksheet  = application.Workbooks.Open("C:/testing.xlsx").Worksheets("Sheet1")
    excel.visible = true 
    ```

2.  手动对打开的 excel 进行必要的更改，我希望 ruby​​ 程序等到我进行这些更改。

3.  完成必要的更改后，我使用 close(X) 按钮手动关闭该 excel。

4.  ruby 程序应该继续并继续执行下一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:56:37.417

首先，你在哪里

```
worksheet  = application.Workbooks.Open("C:/testing.xlsx").Worksheets("Sheet1") 
```

我想你的意思是

```
worksheet  = excel.Workbooks.Open("C:/testing.xlsx").Worksheets("Sheet1") 
```

无论如何，您可以检测在 Excel 实例中打开了多少工作簿，因此您可以这样做

```
while excel.Workbooks.count > 0 do 
    sleep(5)
end 
```

并且您的脚本将坐在那里，无休止地轮询，直到工作簿关闭，然后将继续。

请注意，在用户关闭 Excel 实例后，它仍将不可见地运行；你可能想打电话

```
excel.Quit
excel.ole_free 
```

清除它。

# mongodb - MongoDB几何查询不起作用

> ID：15975352
> 
> 赞同：0
> 
> 时间：2013-04-12T15:29:40.567
> 
> 标签：mongodb, mongoose

我在我的数据库中存储了一些 GeoJSON 点，我无法使用新的 geoWithin (2.4.1) 查询它们。

这是我收藏的索引：

```
> db.features1.getIndexes();
[
    {
        "v" : 1,
        "key" : {
            "_id" : 1
        },
        "ns" : "sagedb.features1",
        "name" : "_id_"
    },
    {
        "v" : 1,
        "key" : {
            "geometry" : "2dsphere"
        },
        "ns" : "sagedb.features1",
        "name" : "geometry_2dsphere"
    }
] 
```

这是我的数据库中的一份文件

```
> db.features1.find();
{ 
  "_id" : ObjectId("51672e677a62bb0000000003"), 
  "geometry" : { 
    "type" : "Point", 
    "coordinates" : [ -106.8610919, 49.665165099999996 ] }, 
  "__v" : 0 } 
```

我正在尝试运行此查询：

```
> db.features1.find( {
  geometry: { 
    $geoWithin: { 
      $geometry: { 
        type: "Polygon", 
        coordinates: [ [ [-180,-90], [-180,90], [180,90], [180,-90], [-180,-90] ] ] } } } }); 
```

但我什么也得不到。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:04:22.377

边界多边形必须小于一个半球。如果它大于一个半球，它不会返回任何东西。

2.4.1 文档中缺少此内容。

# javascript - 如何编辑 Liferay 的 HTML 代码？

> ID：15975356
> 
> 赞同：1
> 
> 时间：2013-04-12T15:29:52.203
> 
> 标签：javascript, html, liferay, portlet

我想知道是否可以编辑 Liferay Portal 的 HTML 代码，添加几个`<br>`以在 portlet 之间留出更多空间。或者甚至添加一些Javascript？这可能吗？如果是这样，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:01:39.267

您可以创建自己的**主题**，扩展另一个主题（例如经典、_styled 等）并添加“diff”文件，也就是您想要扩展的那些。在这种情况下，您可以扩展默认的 css 文件，添加如下规则：

```
#content .portlet-layout .portlet-column-content {margin: 10px;} 
```

另一种更快但不太灵活的方法是使用

> '插入将在主题之后加载的自定义 CSS。

特征。这可以在以下位置找到：管理页面 > 外观 > CSS

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:13:50.830

已经给出了主题答案 - 如果您只想更改外观（例如换行符），这是改变 HTML 输出的方法，而不是您原来的问题。

如果您确实需要更改 HTML 代码 - 例如在页面中添加或删除某些内容，您应该阅读有关[Hooks](https://www.liferay.com/de/documentation/liferay-portal/6.1/development/-/ai/creating-a-ho-4)的内容，尤其是那些可以[覆盖 jsps](https://www.liferay.com/de/documentation/liferay-portal/6.1/development/-/ai/overriding-a-j-4)的内容。这正是他们的目的。

# json - 使用 Jackson 将 JPA 实体序列化为 JSON

> ID：15975363
> 
> 赞同：5
> 
> 时间：2013-04-12T15:30:11.723
> 
> 标签：json, jakarta-ee, jpa, ejb, jackson

关于 Jackson/JPA 组合的问题

1.  如果当前应用程序中有大约 20 个实体，并且我在 POM 中添加了 Jackson 依赖项，这是否意味着默认情况下所有实体都准备好转换为`JSON`对象？我看到一个示例项目似乎只有类注释为`@JsonIgnored`被跳过`JSON`。如果是这样，那怎么会发生这种情况，这种机制的背后是什么？如何`JACKSON`处理那些没有任何杰克逊注释的实体，默认情况下是否忽略？我一直在网上寻找资源，但运气不佳。

2.  如果 20 个实体中只有一个需要映射到 JSON 对象，这是否意味着我必须将 @JsonIgnore 添加到所有其他 19 个实体？如果不是，如何`Jackson`区分要处理的实体？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T19:21:36.640

杰克逊和 JPA 没有任何关系。Jackson 是一个 JSON 解析库，而 JPA 是一个持久性框架。Jackson 几乎可以*序列化* ***任何***对象 - 唯一的要求是该对象具有某种可识别的属性（[Javabean 类型属性](http://docs.oracle.com/javase/tutorial/javabeans/writing/properties.html)或用 注释的裸字段。*反序列*[`@JsonProperty`](http://jackson.codehaus.org/1.9.9/javadoc/index.html?org/codehaus/jackson/annotate/JsonProperty.html)化还有一个额外要求，即目标类型具有默认值（无参数) 构造函数。因此，例如，这是 Jackson 可以序列化的对象：

 *```
// Class with a single Javabean property, "name"
class Person {
    private String name;

    public String getName() { return name ; }
    public String setName(String name) { this.name = name ; }
} 
```

这是另一个：

```
// Class with a single field annotated with @JsonProperty
class Account {
    @JsonProperty("accountNumber")
    private String accountNumber;
} 
```

这是另一个：

```
@Entity
public class User {
    @Id
    private Long id;

    @Basic
    private String userName;

    @Basic
    @JsonIgnore
    private String password;

    @Basic
    @JsonIgnore
    private Address address;

    // Constructors, getters, setters
} 
```

最后一个示例显示了一个 JPA 实体类——就 Jackson 而言，它可以像任何其他类型一样被序列化。***但是***，请注意它的字段：当此对象被序列化为 JSON 时，其中两个字段将不包括在内 - “密码”和“地址”。这是因为它们已经被注释了[`@JsonIgnore`](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/annotate/JsonIgnore.html)。注释允许开发人员说“`@JsonIgnore`嘿，可以序列化这个对象，但是当你这样做时，不要在输出中包含这些字段”。此排除仅针对此对象的字段发生，因此，例如，如果您`Address`在另一个类中包含了一个字段，但没有将该字段标记为可忽略，它将被序列化。

为了防止***在所有情况下***对类型进行序列化，无论上下文如何，请使用[`@JsonIgnoreType`](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/annotate/JsonIgnoreType.html)注释。当用于类型时，它基本上意味着“我不在乎这种类型在哪里使用，从不序列化它”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T18:12:22.007

不，你不需要添加`@JsonIgnore`每个类，如果你尝试过，你会得到一个编译错误，因为你不能把它放在那里。杰克逊只会在你给它的东西上工作，这不是魔法。

Jackson 文档很容易在网上找到，例如在[github](https://github.com/FasterXML/jackson-databind)上的项目页面或 codehaus[网站上](http://jackson.codehaus.org/)。*

# c# - 更改子视图中 parentProperty 的值 - 更改属性

> ID：15975364
> 
> 赞同：0
> 
> 时间：2013-04-12T15:30:11.963
> 
> 标签：c#, .net, wpf, data-binding

类 ChildViewModel : ParentViewModel

类 ParentViewModel 有 -> 公共字符串 PropertyA；公共字符串属性B；

我有 2 个屏幕选项卡工作流程，一个用于父级，另一个用于子级（显然取决于父级数据）。我想将 PropertyA 绑定到 childView 中的文本块，这样当我将 screentab 更改为 parentView 并修改 PropertyA 时，它应该自动反映在 childView 中。

我在 childViewModel 中定义了一个属性（排序伪）：

```
public string PropA
get { return PropertyA; }
set
{
PropertyA = value;
OnPropertyChanged("PropertyA");
} 
```

我还尝试了 UpdateSourceTrigger, Mode=twoway 视图中的属性 - WPF。

仍然无法更改属性。

欢迎任何建议....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:58:27.797

如果 ChildViewModel 如您所示从 ParentViewModel 继承，那么您为什么会有第二个属性 PropA？为什么不直接将 ChildView 绑定到 ParentViewModel.PropertyA？

我假设这不是实际继承，但您希望将 ParentViewModel 事件转发给 ChildViewModel。为此，您需要收听 ParentViewModel 的 PropertyChanged 事件...您可以通过...

```
// listen to parentViewModel PropertyChanged events
parentViewModel.PropertyChanged += HandleParentPropertyChangedEvents; 
```

如果您关闭或更改 ChildViewModel，请确保删除您的事件处理程序。

在 ChildViewModel 中，您的处理程序将如下所示...

```
private void HandleParentPropertyChangedEvents(object sender, PropertyChangedEventArgs e)
{
    OnPropertyChanged(e.PropertyName);
} 
```

这将从子级的父级重新触发任何 PropertyChanged 事件。在您的 ChildViewModel 事件处理程序中，您还可以根据需要过滤要转发的属性。

# javascript - vlc插件如何更改直播中的音轨

> ID：15975375
> 
> 赞同：0
> 
> 时间：2013-04-12T15:30:44.347
> 
> 标签：javascript, plugins, streaming, video-streaming, vlc

我使用 vlc 插件。

如何更改直播频道的音轨？

我尝试了一些代码但没有运气

```
<script type="text/javascript">
vlc.audio.track = "2";
</script>
<script type="text/javascript">
vlc.audio.track = 2;
</script> 
```

也许你们中的一些人知道工作句。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T06:56:52.753

好吧，我遇到了同样的问题。如果您知道音频 Pid，则切换音轨很简单。您编写的代码正确，只需将 2 替换为正确的音频 Pid。

```
var vlc = document.getElementById('vlc');
// Get current track
alert(vlc.audio.track);
// Set track
vlc.audio.track = 88; // be sure that this audio pid exist 
```

# vb.net - 在运行时选择特定单元格

> ID：15975381
> 
> 赞同：1
> 
> 时间：2013-04-12T15:31:06.143
> 
> 标签：vb.net, focus, cell, ultrawingrid

我有`UltraWinGrid`一个列，并且对列进行了测试，以确保输入的数据不存在。如果存在，我会显示 a`MessageBox`并且我希望将焦点再次设置在单元格上（以确保用户输入有效的内容）。

现在，`MessageBox`出现后，默认选中的单元格是下一个。我试过这个：

```
myUltraWinGrid.ActiveCell = e.Cell 
```

我在`BeforeCellUpdate`事件中，所以`e.Cell`指的是我想将焦点设置到的单元格..

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T13:23:02.580

您可以[尝试](http://help.infragistics.com/Help/NetAdvantage/WinForms/2011.2/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v11.2~Infragistics.Win.UltraWinGrid.UltraGridAction.html)通过`PerformAction`.

`PrevCellByTab`听起来它可能会做你想做的事。它“激活相对于 ActiveCell 的前一个可见单元格并将其置于编辑模式”。如果没有，其他选项之一可能会起作用。

```
ultraGrid1.PerformAction(UltraGridAction.PrevCellByTab) 
```

# scala - Scala reduceByKey 函数 - 使用任何具有 + 方法的类型

> ID：15975384
> 
> 赞同：8
> 
> 时间：2013-04-12T15:31:12.310
> 
> 标签：scala

我正在编写一个名为的简单函数`reduceByKey`，该函数采用（键，数字）对的集合并通过键返回减少的集合。

```
 def reduceByKey[K](collection: Traversable[Tuple2[K, Int]]) = {    
    collection
      .groupBy(_._1)
      .map { case (group: K, traversable) => traversable.reduce{(a,b) => (a._1, a._2 + b._2)} }
  } 
```

这目前适用于：

```
scala> val col = List((("some","key"),100), (("some","key"),100), (("some","other","key"),50))
col: List[(Product with Serializable, Int)] = List(((some,key),100), ((some,key),100), ((some,other,key),50))

scala>  reduceByKey(col)      
res42: scala.collection.immutable.Map[Product with Serializable,Int] = Map((some,key) -> 200, (some,other,key) -> 50) 
```

但是，一旦我想对数字使用非 Int 类型，它就会惨遭失败，因为它期望`Int`.

```
scala> val col = List((("some","key"),100.toDouble), (("some","key"),100.toDouble), (("some","other","key"),50.toDouble))
col: List[(Product with Serializable, Double)] = List(((some,key),100.0), ((some,key),100.0), ((some,other,key),50.0))

scala> reduceByKey(col)
<console>:13: error: type mismatch;
 found   : List[(Product with Serializable, Double)]
 required: Traversable[(?, Int)]
              reduceByKey(col)
                                ^ 
```

当然，我可以为不同的类型制定不同的方法，但这很愚蠢。基本上我希望我的方法适用于任何`+`定义了方法的类型。那将是`Double`, `Float`,`Long`和。`Int``Short`

1.  起初，我认为我可以使用结构类型而不是 Int。但这意味着结构类型需要引用自身才能有任何用途。
2.  我研究了我认为可能有用的[数字特征。](http://www.scala-lang.org/api/2.9.2/scala/math/Numeric.html)它封装了所有数字类型的 + 方法。但是，我不确定如何在我的情况下使用它。我不想强迫我的函数的用户将值包装在 Numeric 中，只是为了让我的函数正常工作。函数本身应该以某种方式隐式包装并调用`Numeric.plus`.

我愿意接受有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T16:00:28.890

如果您只对数值感兴趣，您可以使用标准`Numeric`类型类并执行以下操作：

```
def reduceByKey[K,V](collection: Traversable[Tuple2[K, V]])(implicit num: Numeric[V]) = {    
  import num._
  collection
    .groupBy(_._1)
    .map { case (group: K, traversable) => traversable.reduce{(a,b) => (a._1, a._2 + b._2)} }
} 
```

`num`隐式参数用作数字类型的证据，`V`并提供`+`该类型的操作。

# google-app-engine - Google Provisioning api 中的用户名

> ID：15975388
> 
> 赞同：0
> 
> 时间：2013-04-12T15:31:25.500
> 
> 标签：google-app-engine, google-provisioning-api

我正在开发一个应用程序。我在这个应用程序中使用谷歌配置 api。在文档中提到，为了获取与用户帐户相关的信息，我们必须在 url 中传递一个参数 userName

```
GET https://apps-apis.google.com/a/feeds/domain/user/2.0/userName 
```

我登录了一个应用程序，我可以使用基本个人资料信息 api（[https://www.googleapis.com/oauth2/v1/userinfo?access_token=](https://www.googleapis.com/oauth2/v1/userinfo?access_token=) {accessToken}）获取他的电子邮件地址和他的 ID，但是如何获取用户名登录用户。请一些帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:48:18.390

Google 配置 API 仅适用于 Google Apps 用户（Google Apps 域用户），不适用于个人帐户。 [2Legged Oauth](https://developers.google.com/google-apps/help/articles/2lo-in-tasks-for-admins) 1.0 应该用于身份验证，而不是 Oauth 2。不清楚您的情况。

# c# - 回发后按钮单击事件未触发

> ID：15975394
> 
> 赞同：2
> 
> 时间：2013-04-12T15:31:41.590
> 
> 标签：c#, asp.net

我在我的网络表单上的按钮单击事件中定义了以下代码。代码在我第一次单击按钮时正确执行。额外的点击应该会为我的数据库添加更多的值，但在这种情况下，在第一次回发之后，点击事件不会触发。

当我离开页面并返回时，我可以在列表中再添加一个名称，但随后的点击仍然不起作用。我被这个难住了……没有在页面上抛出任何 Javascript 错误（这是我想到的第一件事）

```
if (!String.IsNullOrEmpty(tbSuggestedSupplier_Add.Text))
{
   SqlCommand cmd = new SqlCommand("pSuggestedSupplier_AddNew", dbConnection);
   cmd.CommandType = CommandType.StoredProcedure;
   cmd.Parameters.Clear();
   cmd.Parameters.Add("@NewSupplierRequestID", SqlDbType.Int);
   cmd.Parameters.Add("@SupplierName", SqlDbType.VarChar, (500));
   //cmd.Parameters.Add("@SupplierTypeID");

   cmd.Parameters["@NewSupplierRequestID"].Value = Session["NewSupplierRequestID"];
   cmd.Parameters["@SupplierName"].Value = tbSuggestedSupplier_Add.Text;
   functions.NewSupplierRequest.Open();

   try
   {
      cmd.ExecuteNonQuery();
      gvSuggestedSuppliers.DataBind();
      tbSuggestedSupplier_Add.Text = string.Empty;
   }

   catch (Exception err)
   {
      this.lblError.Text = err.Message;
   }

   finally
   {
      functions.NewSupplierRequest.Close();
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:46:28.510

如果有问题的 Button 是动态创建的，请确保在每次回发时重新附加 Click 事件处理程序。听起来这可能是问题所在。

最好的方法是在 Page 的[PreInit 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.page.preinit%28v=vs.100%29.aspx)中创建 Button 控件，并在其中附加事件处理程序。这样它就是你的 ViewState 的一部分，页面生命周期中的后续事件会知道它。

```
Page_PreInit(Object sender, EventArgs e)
{
    Button yourBtn = new Button();
    // Set your other properties
    yourBtn.Click += yourEventHandlerName;
    // Add the control to the controls collection of whatever container it belongs in
    yourContainer.Controls.Add(yourBtn);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T17:32:50.853

通过将 CausesValidation="False" 添加到此特定按钮来解决问题。

# resize - 初始调整大小后无法调整 NSPanel 的大小

> ID：15975395
> 
> 赞同：4
> 
> 时间：2013-04-12T15:31:42.287
> 
> 标签：resize, nswindow, nspanel

当用户关闭项目时，我想调整 NSPanel 的大小。我最初可以完美地调整它的大小：

```
 [super awakeFromNib];
_mustNotAutoSize=FALSE;
// Make a fully skinned panel
NSPanel *panel = (id)[self window];
[panel setAcceptsMouseMovedEvents:YES];
[panel setLevel:NSPopUpMenuWindowLevel];
[panel setOpaque:NO];
[panel setBackgroundColor:[NSColor clearColor]];

[panel setOpaque:YES];
[panel setBackgroundColor:[NSColor blueColor]];

// Resize panel
NSRect panelRect = [[self window] frame];
int nR=[self numberOfReminders];
float desiredHeight=nR*(52.0)+BORDER_INSET*2+ARROW_HEIGHT+ 22.0;
if(desiredHeight>POPUP_HEIGHT)desiredHeight=POPUP_HEIGHT;
if(desiredHeight<50.0)desiredHeight=50.0;
panelRect.size.height = desiredHeight;

[[self window] setFrame:panelRect display:NO]; 
```

但是当我稍后减少项目数量并调用调整大小功能时，它不起作用：

```
 - (void)sizePanelBasedOnReminders
{
    NSWindow *panel = [self window];
    NSRect panelRect = [panel frame];
    NSLog(@"Panel height is starting at: %f",panelRect.size.height);
    int nR=[self numberOfReminders];
    float desiredHeight=nR*(52.0)+BORDER_INSET*2+ARROW_HEIGHT+ 22.0;
    if(desiredHeight>POPUP_HEIGHT)desiredHeight=POPUP_HEIGHT;
    if(desiredHeight<BORDER_INSET*2+ARROW_HEIGHT+ 22.0)desiredHeight=BORDER_INSET*2+ARROW_HEIGHT+ 22.0;
    panelRect.size.height = desiredHeight;
    NSLog(@"Panel height is changing to: %f",panelRect.size.height);

    [panel setFrame:panelRect display:YES];

} 
```

有任何想法吗？

```
2013-04-12 11:27:47.997 LoveBug[44016:303] Deleted row is: 0
2013-04-12 11:27:47.997 LoveBug[44016:303] Panel height is starting at: 400.000000
2013-04-12 11:27:47.998 LoveBug[44016:303] Numberofitems called, return 6
2013-04-12 11:27:47.998 LoveBug[44016:303] Panel height is changing to: 352.000000
2013-04-12 11:27:48.628 LoveBug[44016:303] Sending 0
2013-04-12 11:27:48.629 LoveBug[44016:303] Deleted row is: 0
2013-04-12 11:27:48.629 LoveBug[44016:303] Panel height is starting at: 352.000000
2013-04-12 11:27:48.630 LoveBug[44016:303] Numberofitems called, return 5
2013-04-12 11:27:48.630 LoveBug[44016:303] Panel height is changing to: 300.000000
2013-04-12 11:27:49.156 LoveBug[44016:303] Sending 0
2013-04-12 11:27:49.156 LoveBug[44016:303] Deleted row is: 0
2013-04-12 11:27:49.157 LoveBug[44016:303] Panel height is starting at: 300.000000
2013-04-12 11:27:49.157 LoveBug[44016:303] Numberofitems called, return 4
2013-04-12 11:27:49.158 LoveBug[44016:303] Panel height is changing to: 248.000000 
```

# android-fragments - 片段选项卡更改后 Webview 崩溃

> ID：15975396
> 
> 赞同：1
> 
> 时间：2013-04-12T15:31:43.510
> 
> 标签：android-fragments, android-webview

我有一个带有 3 个操作栏选项卡的活动。每个选项卡都包含一个 webview，它在 Fragment oncreate() 处加载一个 URL。一切正常，但是如果我快速切换选项卡，onpagefinished 会在选项卡更改后出现，因此当调用片段消失时，会导致 NullPointerException。有没有办法防止这种情况？

我在我的片段中尝试过：

```
public void onDestroy() {
        super.onDestroy();
        try {
            myWebView.stopLoading();
        } catch (Exception e) {
        }
        try {
            myWebView.clearView();
        } catch (Exception e) {
        } 
```

在我的标签监听器中：

```
onTabSelected(Tab tab, FragmentTransaction ft) {
        // StartActivity.mViewPager.setCurrentItem(tab.getPosition());
        if (FinishedLoading == true){
        ft.replace(R.id.fragment_container, fragment);
        }
        } 
```

这两个选项都不会阻止 APP 崩溃。

我收到的错误：

```
java.lang.NullPointerException
at com.***.Fragment1$MyWebViewClient.onPageFinished(Fragment1.java:233)
at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:389)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4898)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T04:25:46.790

我也面临这个问题。如果你还没有解决它，也许你想尝试`onPause`在你的片段中实现这样的：

```
@Override
public void onPause() {

    if (webview.isShown() == false) {
        webview.stopLoading();
    }
    super.onPause();
}

@Override
public void onResume() {
    super.onResume();
} 
```

`webview`你的网络视图在哪里

# java - 由 java.lang.UnsupportedOperationException 引起：AdapterView 中不支持 addView(View,layoutParams)

> ID：15975397
> 
> 赞同：0
> 
> 时间：2013-04-12T15:31:47.400
> 
> 标签：java, android, android-listview, android-adapterview

我在下面的代码片段中收到以下异常 [Caused by java.lang.UnsupportedOperationException: addView(View,layoutParams) is not supported in AdapterView]。

```
 public class MedReminderActivity extends ListActivity {

    private static final String[] MEDS = new String[] { "Dafalgan", "Citrozone" };

    private ProgressDialog mProgressDialog = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // setContentView(R.layout.main);
        Cursor c = null;
        ListAdapter cursorListAdapter = new SimpleCursorAdapter(this, R.layout.list_item_my_medicines, c, new String[] { "name" }, new int[] { R.id.list_name });
        ListAdapter listAdapter = new ArrayAdapter<String>(this, R.layout.list_item_my_medicines, MEDS);
        setListAdapter(listAdapter);

        OnClickListener testButton = new OnClickListener() {
            public void onClick(View v) {
                Cursor cursor = getContentResolver().query(MedicineContentProvider.CONTENT_URI, new String[] { Reminder.ID, "name", "method" }, "name LIKE ?", new String[] { "%2%" }, null);

                List<Medicine> medicines = MedicineMapper.mapCursorToMedicines(cursor);

                cursor = getContentResolver().query(ReminderContentProvider.CONTENT_URI, new String[] { Medicine.ID, "medicine_id", "time" }, null, null, null);

                List<Reminder> reminders = ReminderMapper.mapCursorToReminders(cursor);
            }
        };

        Button button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(testButton);
        // OnClickListener testButton = new OnClickListener() {
        // public void onClick(View v) {
        // Cursor cursor =
        // getContentResolver().query(MedicineContentProvider.CONTENT_URI, new
        // String[] { Reminder.ID, "name", "method" }, "name LIKE ?", new
        // String[] { "%2%" }, null);
        //
        // List<Medicine> medicines =
        // MedicineMapper.mapCursorToMedicines(cursor);
        //
        // cursor =
        // getContentResolver().query(ReminderContentProvider.CONTENT_URI, new
        // String[] { Medicine.ID, "medicine_id", "time" }, null, null, null);
        //
        // List<Reminder> reminders =
        // ReminderMapper.mapCursorToReminders(cursor);
        // }
        // };
        //
        // Button button = (Button) findViewById(R.id.button1);
        // button.setOnClickListener(testButton);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.alarmMenu:
            startActivity(new Intent(this, AlertTestLauncher.class));
            return true;
        case R.id.settingsMenu:
            Intent intent = new Intent(this, EditPreferencesActivity.class);
            startActivity(intent);
            return true;
        case R.id.medsMenu:
            startActivity(new Intent(this, MedsActivity.class));
            return true;
        case R.id.remindersMenu:
            startActivity(new Intent(this, RemindersActivity.class));
            return true;
        case R.id.smartMenu:
            startActivity(new Intent(this, SmartPreferencesActivity.class));
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }

    public void onProgressUpdate(String... args) {
        // here you will have to update the progressbar
        // with something like
        mProgressDialog.setProgress(Integer.parseInt(args[0]));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        // Toast.makeText(this, "klik op item " + position,
        // Toast.LENGTH_LONG).show();

        Intent i = new Intent(this, MedDetailActivity.class);
        i.putExtra("medname", MEDS[position]);
        startActivity(i);

        super.onListItemClick(l, v, position, id);
    }

} 
```

> java.lang.RuntimeException：无法启动活动组件信息{be.droid.medminder/be.bedroid.medminder.MedReminderActivity}：java.lang.UnsupportedOperationException：适配器视图不支持addView（View，LayoutParams）。

无法弄清楚问题出在哪里，请帮助！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:25:18.200

主要错误是由于 AdapterView 下的 TextView。实际上AdapterView下应该没有任何视图，删除TextView解决了这个问题..！:D

# android - 是否可以将文件从另一个应用程序加载到应用程序中？

> ID：15975406
> 
> 赞同：2
> 
> 时间：2013-04-12T15:32:29.333
> 
> 标签：android

我有兴趣为 Android 编写一个通用的前端应用程序。我正在考虑像 XBMC 这样的媒体中心。

这个前端应用程序（希望）能够读取 sd 卡上的文件并将这些文件加载​​到第二个应用程序中（然后它将启动）。

理想情况下 - 一旦第二个应用程序启动，我希望前端处于休眠状态。然后，我希望一些小型、低开销的侦听器应用程序在后台运行并等待特定的按钮按下（可能是后退按钮）。然后，所述按钮按下将关闭第二个应用程序并强制前端应用程序再次出现以代替它。

有没有人尝试过这样的事情？一些代码片段或教程链接将不胜感激。

# javascript - 如何使用 JSON 的一部分填充表

> ID：15975412
> 
> 赞同：3
> 
> 时间：2013-04-12T15:32:33.857
> 
> 标签：javascript, jquery, json

我返回了一个 JSON，我想获取 JSON 的最后 8 个元素并制作一个表格。该表按照我期望的方式构建，但结果值未定义。这是 getJSON 的代码，一个编辑后的返回和表格。

```
$.getJSON("loadloads.php", function(data){
 [{
         "value": {
             "lineNumber": "258640",
             "TypeId": "1",
             "StopNumber": "1",
             "ReferenceNo": "0002325063",
             "LocationId": "3",
             "SLN": "227311",
             "LoName": "Elk GAF Materials Corp - Shafter",
             "Type": "Shipper"
         }
     }, {
         "value": {
             "lineNumber": "258641",
             "TypeId": "2",
             "StopNumber": "2",
             "ReferenceNo": "682383",
             "LocationId": "205697",
             "SLN": "227311",
             "LoName": "RWC Building Products - Albuquerque",
             "Type": "Consignee"
         }
     }
 ]

   var table_obj = $('table');
$.each(data, function(index,value){
     table_obj.append($('<tr><td>'+value.SLN+'</td><td >'+value.Type+'</td><td>'+value.StopNumber+'</td><td>'+value.LoName+'</td><td>'+value.ReferenceNo+'</td><td class="hide">'+value.TypeId+'</td><td class="hide">'+value.Locationid+'</td><td class="hide">'+value.lineNumber+'</td></tr>')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:38:06.410

您给变量“值”的名称让您感到困惑。您仍然需要在您的对象中引用恰好被命名为值的“值”键。

```
'+value.value.SLN+ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:35:53.553

试试这个方法。

```
value.value.SLN 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T15:38:21.687

试试这个。所有属性都在值内，因此您应该尝试`value.value`

```
$.each(data, function(index, v){
    var value = v.value;
     table_obj.append($('<tr><td>'+value.SLN+'</td><td >'+value.Type+'</td><td>'+value.StopNumber+'</td><td>'+value.LoName+'</td><td>'+value.ReferenceNo+'</td><td class="hide">'+value.TypeId+'</td><td class="hide">'+value.Locationid+'</td><td class="hide">'+value.lineNumber+'</td></tr>'));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:38:26.883

试试这个

```
for (var i in data)
    console.log(data[i].value); 
```

如果它将在控制台结果中输出，只需将其用作 data[i].value.field

# android - 在我的应用程序中更改设备语言

> ID：15975413
> 
> 赞同：2
> 
> 时间：2013-04-12T15:32:35.350
> 
> 标签：android, localization

我希望能够在我的应用程序内单击按钮来更改我的手机设置。准确地说，我想更改手机的语言。到目前为止，我创建了 values/strings 和 values-iw/strings（希伯来语字符串），并在一个按钮内单击我更改了配置，如下所示：

```
 if (myLocale != null) {
        Locale.setDefault(myLocale);
        Configuration config = new Configuration();
        config.locale = myLocale;
        getBaseContext().getResources().updateConfiguration(config,
                getBaseContext().getResources().getDisplayMetrics());
    } 
```

此代码更改了语言环境（我不确定语言环境和语言之间的区别），但它不会影响我的所有活动。因此，我尝试直接从我的应用程序更改手机的语言设置，但没有成功。有谁知道如何使此代码影响我的所有活动？或者相反 - 如何更改我的手机语言（反思？？）......

* * *

为了让自己清楚 - 我有调用 Activity B 的活动 A（我有更多的活动，所有活动都
在 AndroidManifest 中使用 android:launchMode="singleInstance"）。在活动 BI 中更改了区域设置语言并通过以下几行返回到活动 A：

```
 final Intent intent2 = new Intent(this, MainActivity.class);
    startActivity(intent2.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    finish(); 
```

语言环境更改不会影响活动 A（但会影响所有其他活动，其中包括活动 B）。我认为它不影响活动 A 的原因是活动 A 仍在堆栈中。更改语言环境时，我没有设法影响活动 A。有谁知道如何影响活动 A？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:15:23.707

> 我希望能够在我的应用程序内单击按钮来更改我的手机设置。准确地说，我想更改手机的语言。

这是不可能的，对不起。

> 在一个按钮内点击我改变了配置如下

最多，这会影响您的应用程序，而不是“电话”。

> 有谁知道如何使此代码影响我的所有活动？

在每个活动中运行相同的代码，例如 from `onResume()`。

# java - 使用 oracle.xml.differ.XMLDiff 在 Java 中比较 XML 文档的问题

> ID：15975415
> 
> 赞同：3
> 
> 时间：2013-04-12T15:32:48.133
> 
> 标签：java, xml, oracle

我在尝试使用**oracle.xml.differ.XMLDiff**比较 Java 中的 2 个 XML 文档时遇到问题。该代码已完全实现，并且我希望它可以正常工作，直到我发现在某些情况下没有拾取属性更改。为了证明这一点，我有以下内容：

设置：

```
DOMParser parser = new DOMParser();
parser.setPreserveWhitespace(false);
parser.parse(isCurrent);
XMLDocument currentXmlDoc = parser.getDocument();

parser.parse(isPrior);
XMLDocument priorXmlDoc = parser.getDocument();

XMLDiff xmlDiff = new XMLDiff();
xmlDiff.setDocuments(currentXmlDoc, priorXmlDoc); 
```

在第**一种情况下，** **Strike**的属性变化很好。我有以下 2 个 XML 文件：

XML1

```
<Periods>
   <Period Start="2011-03-28" End="2011-04-17" AverageStart="" AverageEnd="" Notional="6000000.0000" OptionType="Swap" Payment="2011-04-19" Strike="72.0934800" Underlying="ZA" ResetStrike="No" ResetNotional="No" QuotingDate="2011-04-17" Multiplier="1.000000" PlusConstant="0.000000" StopLossPercent="" StopLossLevel=""/>
</Periods> 
```

XML2

```
<Periods>
   <Period Start="2011-03-28" End="2011-04-17" AverageStart="" AverageEnd="" Notional="6000000.0000" OptionType="Swap" Payment="2011-04-19" Strike="0.0000000" Underlying="ZA" ResetStrike="No" ResetNotional="No" QuotingDate="2011-04-17" Multiplier="1.000000" PlusConstant="0.000000" StopLossPercent="" StopLossLevel=""/>
</Periods> 
```

**第二种情况**，Strike的属性变化没有**被拾取**。我有以下 2 个 XML 文件：

XML1

```
<Periods>
    <Period Start="2011-03-28" End="2011-04-30" Payment="2011-05-02" Notional="5220000.000000" Strike="176.201900" StopLossPercent="" StopLossLevel=""/>
</Periods> 
```

XML2

```
<Periods>
    <Period Start="2011-03-28" End="2011-04-30" Payment="2011-05-02" Notional="5220000.000000" Strike="0.000000" StopLossPercent="" StopLossLevel=""/>
</Periods> 
```

有谁知道我做错了什么，或者 XMLDiff 包中是否有错误？

或者，是否有人知道可以以相同方式使用的不同工具，只是识别 XML 文件之间节点和属性的差异，而不管顺序如何？

谢谢， 米莱娜

**更新：**由于获得批准在我们的系统中使用的新外部包非常耗时，因此在理想情况下，我想找到一种解决方案来使 oracle.xml.differ.XMLDiff 工作。显然，如果确实存在错误并且无法绕过，我会考虑其他工具。

**更新 2：**由于似乎没有人知道 XMLDiff 错误，我将尝试实现建议的 XMLUnit 包，它应该可以解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:21:12.440

在单元测试中，我使用**org.custommonkey.xmlunit.Diff**来比较 xml 内容。见[http://xmlunit.sourceforge.net/api/org/custommonkey/xmlunit/Diff.html](http://xmlunit.sourceforge.net/api/org/custommonkey/xmlunit/Diff.html)

我正在比较 xml 字符串，但您也可以比较 xml w3c 文档。我希望您可以将您的 XMLDocument 转换为 org.w3c.dom.Document 的字符串。

我的测试用例如下所示：

```
String actualXML = SomeClass.getElement().asXML();
String expectedXML = IOUtils.toString(this.getClass().getResourceAsStream("/expected.xml"));

org.custommonkey.xmlunit.Diff myDiff = new Diff(StringUtils.deleteWhitespace(expectedXML), StringUtils.deleteWhitespace(actualXML));
assertTrue(MessageFormat.format("XML must be simular: {0}\nActual XML:\n{1}\n", myDiff, actualXML), myDiff.similar()); 
```

ps 我也使用 apache commons **StringUtils.deleteWhitespace()**方法，因为我对空白差异不感兴趣。

# c# - 自定义自定义工具提示 WPF / Silverlight

> ID：15975419
> 
> 赞同：0
> 
> 时间：2013-04-12T15:33:05.570
> 
> 标签：c#, wpf, silverlight, xaml, tooltip

我有一个自定义的工具提示样式，效果很好，但是，在某些情况下，我希望能够隐藏箭头（路径部分）或以不​​同的方式定位工具提示。我怎样才能做到这一点，我将如何在实践中进行设置？99% 的时间工具提示是通过 XAML 和绑定设置的，但有时它们是使用代码和`ToolTipService`

```
<Style x:Key="{x:Type ToolTip}"
       TargetType="ToolTip">
  <Setter Property="OverridesDefaultStyle"
          Value="true" />
  <Setter Property="HasDropShadow"
          Value="True" />
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="ToolTip">
        <StackPanel>
          <Border CornerRadius="3"
                  HorizontalAlignment="Center"
                  VerticalAlignment="Top"
                  Padding="10,7"
                  BorderThickness="0"
                  Background="#e5323232">
            <StackPanel>
              <TextBlock FontFamily="Arial"
                         FontSize="12"
                         Text="{TemplateBinding Content}"
                         Foreground="#f0f0f0" />
            </StackPanel>
          </Border>
          <Path Margin="10,0,0,0"
                Fill="#e5323232"
                Data="M 0 0 L 6 6 L 12 0 Z" />
        </StackPanel>
      </ControlTemplate>
    </Setter.Value>
  </Setter>

  <Setter Property="Placement"
          Value="Top" />
  <Setter Property="HorizontalOffset"
          Value="-8" />
  <Setter Property="VerticalOffset"
          Value="0" />
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:50:22.150

您也许可以打开这些控件。

```
<Path Margin="10,-0.5,0,0" Fill="#e5323232" Data="M 0 0 L 6 6 L 12 0 Z"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:54:02.640

我想在动态位置显示工具提示，所以我找到了以下解决方案。首先，我添加了一个用户控件“SimplePopupContent”作为

```
public partial class SimplePopupContent : UserControl
    {
        public SimplePopupContent(string value)
        {
            InitializeComponent();
            textBlockPopUp.Text = value;
        }

        private void LayoutRoot_MouseLeave(object sender, MouseEventArgs e)
        {
            this.Visibility = Visibility.Collapsed;
        }
    } 
```

我想显示文本块的工具提示。

```
TextBlock t = new TextBlock();
Popup simplePopup = new Popup(); 
```

我已经在文本块的鼠标输入事件上编写了代码

```
t.MouseEnter += (s, args) =>
                            {    
                                this.simplePopup.Child = new SimplePopupContent("Hi");
                             this.simplePopup.Margin = new Thickness(XOffset ,70, 0,0);
                              this.simplePopup.Width = 30;
                                this.simplePopup.Child.MouseLeave += new MouseEventHandler(Child_MouseLeave);
                                this.simplePopup.IsOpen = true;
                            }; 
```

和

```
public void Child_MouseLeave(object sender, MouseEventArgs e)
        {           
           this.simplePopup.IsOpen = false;

        } 
```

希望这会帮助你。

# machine-learning - 如何设置一个值来计算欧式距离和相关性

> ID：15975422
> 
> 赞同：0
> 
> 时间：2013-04-12T15:33:14.337
> 
> 标签：machine-learning, weka, correlation, collaborative-filtering

这是我的词向量：

```
google
test
stackoverflow
yahoo 
```

我为这些词分配了一个值，如下所示：

```
google : 1
test : 2
stackoverflow : 3
yahoo : 4 
```

以下是一些示例用户和他们的话：

```
user1   google, test , stackoverflow
user2   test , google
user3   test , yahoo
user4   stackoverflow , yahoo
user5   stackoverflow , google
user6 
```

为了满足词向量中不包含值的用户，我分配了“0”

基于此，这对应于：

```
user1   1, 2 , 3
user2   2 , 1 , 0
user3   2 , 4 , 0
user4   3 , 4 , 0
user5   3 , 1,  0
user6   0 , 0 , 0 
```

我不确定这些是否是正确的值，甚至是对每个词向量值应用值的正确方法，因此可以应用“欧式距离”和“相关性”。我基于“编程集体智能”一书中的片段：

> “收集偏好首先你需要一种方法来代表不同的人和他们的偏好。如果你正在构建一个购物网站，你可能会使用值 1 来表示某人过去购买过一件物品，而值 0表示他们没有。”

对于我的数据集，我没有偏好值，所以我只是使用一个唯一的数值来表示用户是否在词向量中包含一个词。

这些是为我的词向量设置的正确值吗？我应该如何确定这些值应该是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:36:33.563

为了使距离和相似度指标起作用，您需要词汇表中每个单词一列，然后在样本中出现相应的单词时用布尔值 0 和 1 填充这些列。例如

```
 G   T   SO  Y!
google, test, stackoverflow  =>  1,  1,  1,  0
test, google                 =>  1,  1,  0,  0
stackoverflow, yahoo         =>  0,  0,  1,  1 
```

等等

前两个向量之间的平方欧几里得距离现在是

```
(1 - 1)² + (1 - 1)² + (1 - 0)² + (0 - 0)² = 1 
```

这很直观，因为向量在一个位置上完全不同。类似地，最后两个向量之间的平方距离为 4，这是该空间中的最大平方距离。

这种编码是“one-hot”或“one-of-K”编码的扩展，它是文本机器学习的主要内容（尽管很少有教科书愿意把它拼出来）。

# linux - x-www-browser 获取变量

> ID：15975423
> 
> 赞同：0
> 
> 时间：2013-04-12T15:33:14.420
> 
> 标签：linux

我正在尝试使用我的 html 文件和 GET 变量打开我的默认浏览器

我的命令行：

```
x-www-browser "index.html?var=1" 
```

正在使用 url 打开 google-chome：

```
http://index.html/?var=1 
```

（注意：它忘记了 index.html 之前的文件路径）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:35:20.673

尝试类似的东西

```
x-www-browser "file:///home/${USER}/index.html?var=1" 
```

# operating-system - 循环调度中的任务行为不正确

> ID：15975425
> 
> 赞同：6
> 
> 时间：2013-04-12T15:33:24.557
> 
> 标签：operating-system, scheduling, round-robin, freertos, stm32f4discovery

我在 STM32F4DISCOVERY 板上运行 FreeRTOS，并且我有以下代码：

```
xTaskCreate( vTask1, "Task 1", 200, NULL, 1, NULL );
xTaskCreate( vTask2, "Task 2", 200, NULL, 1, NULL );
vTaskStartScheduler(); 
```

其中 vTask1 是这个函数：

```
void vTask1( void *pvParameters )
{
volatile unsigned long ul;

    for( ;; )
    {
        LED_On(0);

        for( ul = 0; ul < mainDELAY_LOOP_COUNT; ul++ )
        {
        }
        LED_On(2);
        LED_Off(0);
    }
} 
```

vTask2 具有几乎相同的代码：

```
void vTask2( void *pvParameters )
{
const char *pcTaskName = "Task 2 is running\n";
volatile unsigned long ul;

    for( ;; )
    {
        LED_On(3);
        LED_Off(2);
        for( ul = 0; ul < mainDELAY_LOOP_COUNT; ul++ )
        {
        }

        LED_Off(3);
    }
} 
```

当我运行程序时，我看到 LED0 和 LED3 一直亮着（它们的切换对我的眼睛来说太快了，这很好），并且“共享资源”的 LED2 闪烁得非常快。问题是这样的：当我颠倒`xTaskCreate`调用顺序时，我会遇到相同的情况，但 LED2 的闪烁行为不同，速度要慢得多。为什么会发生这种情况，因为任务应该具有相同的优先级并因此遵循循环调度？他们不应该得到相同的时间吗？为什么仅在以不同的顺序创建它们之后它们的行为会发生变化？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-09-21T19:23:26.283

rtos 不会尝试循环执行任务，您不应期望它们以任何特定顺序执行。正如 iama 在评论中指出的那样，您创建的任务都没有延迟。与其在 for 循环中通过无操作来创建延迟，不如使用延迟函数。这将允许执行 while(1) 循环中的代码，然后返回到 rtos，以便处理器可以运行其他任务，直到等待时间过去。如果您需要同步工作，您可能只想将其保留在单个任务中。如果您的一项任务依赖于另一项完成的某项任务，您可能需要使用信号量、队列或其他跨线程通信方法。

您的代码让我想起了当我从 main 中的 while(1) 循环转换为 rtos 时。如果您不熟悉使用 rtos，ST 的本指南看起来会是一个很好的介绍[https://www.st.com/resource/en/user_manual/dm00105262-developing-applications-on-stm32cube-with-rtos-意法半导体.pdf](https://www.st.com/resource/en/user_manual/dm00105262-developing-applications-on-stm32cube-with-rtos-stmicroelectronics.pdf)

此外，不要依赖延迟功能进行细粒度计时；改用定时器驱动的中断。上面的链接应该让您更好地理解为什么我可以在这篇文章中进行管理。

ST 还应该在某个地方有示例项目，这将是很好的参考或用作您自己项目的开始。

# php - 在 Silex 中使用 Symfony Form 2.3

> ID：15975426
> 
> 赞同：4
> 
> 时间：2013-04-12T15:33:24.827
> 
> 标签：php, symfony-forms, silex

我正在尝试按名称构建一个 Symfony 表单（在 Silex 中）。使用下面的配置，我相信我应该可以调用`$form = $app['form.factory']->createBuilder('address');`，但是 FormRegistry 找不到这种类型的表单。

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Form\FormTypeExtensionInterface;

class AddressType extends AbstractType implements FormTypeExtensionInterface
{
    public function getName()
    {
        return 'address';
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('addressee', 'text');
        // .. fields ..
        $builder->add('country', 'text');
    }

    public function getExtendedType()
    {
        return 'form';
    }
} 
```

然后使用`form.type.extensions`提供者将其添加到表单注册表中：

```
$app['form.type.extensions'] = $app->share($app->extend('form.type.extensions', function($extensions) use ($app) {
    $extensions[] = new AddressType();

    return $extensions;
})); 
```

还有其他我需要做的事情或以这种方式构建表单的不同方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-20T00:26:48.203

为什么不直接使用

```
$app['form.factory']->createBuilder('Namespace\\Form\\Types\\Form') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-16T11:51:03.760

首先，对不起我糟糕的英语。:)

我认为你应该扩展`form.extensions`，而不是`form.type.extensions`.

像这样的东西：

```
 $app['form.extensions'] = $app->share($app->extend('form.extensions',
                    function($extensions) use ($app) {
                        $extensions[] = new MyTypesExtension();

                        return $extensions;
                    })); 
```

那么你的班级`MyTypesExtension`应该是这样的：

```
use Symfony\Component\Form\AbstractExtension;

class MyTypesExtension extends AbstractExtension
{

    protected function loadTypes()
    {
        return array(
            new AddressType(),
            //Others custom types...

        );

    }

} 
```

现在，您可以通过以下方式检索您的自定义类型：

```
$app['form.factory']->createBuilder('address')->getForm(); 
```

好好享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-08T13:56:54.113

我明白了，这个问题已经很老了，但是：

您所做的是创建一个新的表单类型而不是扩展现有的表单类型，因此注册它以将其添加到“form.types”的正确方法。（请记住：表单类型扩展正在向现有类型添加一些内容，因此将来所有实例都将具有新的“功能”。在这里，您正在创建自定义表单类型。）

```
$app['form.types'] = $app->share($app->extend('form.types', function ($types) use ($app) {
   $types[] = new AddressType();
   return $types;
})); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T13:58:55.840

我认为当你从 Symfony 来到 Silex 时，form.type.extension 可能会产生误导。

从 Symfony[如何创建表单类型扩展](http://symfony.com/doc/2.1/cookbook/form/create_form_type_extension.html "表单类型扩展有 2 个主要用例")：

*   您想为几种类型添加通用功能（例如为每种字段类型添加“帮助”文本）；
*   您希望将特定功能添加到单个类型（例如将“下载”功能添加到“文件”字段类型）。

因此，正如您的代码显示的那样，您希望添加一个存在于 Symfony 中的 FormType，但您将在 Silex 中使用[FormServiceProvider](http://silex.sensiolabs.org/doc/providers/form.html#usage)而不定义 an`AbstractType`并且只使用该`form.factory`服务，如下例所示：

在你的`app.php`：

```
use Silex\Provider\FormServiceProvider;
$app->register(new FormServiceProvider()); 
```

在您的控制器/动作中：

```
$form = $app['form.factory']->createBuilder('form', $data)
    ->add('name')
    ->add('email')
    ->add('gender', 'choice', array(
        'choices' => array(1 => 'male', 2 => 'female'),
        'expanded' => true,
    ))
    ->getForm()
; 
```

# r - 安装 R 包时出错

> ID：15975429
> 
> 赞同：1
> 
> 时间：2013-04-12T15:33:40.537
> 
> 标签：r, ubuntu-12.04

尝试在 R 中安装“Rook”包时出现以下错误：

```
** package ‘Rook’ successfully unpacked and MD5 sums checked
** libs
sh: 1: -f: not found
ERROR: compilation failed for package ‘Rook’
* removing ‘/usr/lib/R/site-library/Rook’

The downloaded packages are in
    ‘/tmp/RtmpPW6kC2/downloaded_packages’
Warning message:
In install.packages("Rook", repos = "http://cran.r-project.org") :
  installation of package ‘Rook’ had non-zero exit status 
```

我使用 install.packages() 函数和终端安装包，但收到相同的消息。有任何想法吗？

操作系统：Ubuntu 12.04。

# css - (-webkit-min-device-pixel-ratio: 1.5)

> ID：15975432
> 
> 赞同：0
> 
> 时间：2013-04-12T15:33:46.647
> 
> 标签：css, media-queries

我有一个样式表，其中包含一些 css3 媒体查询。

```
@media (max-width: 480px), (-webkit-min-device-pixel-ratio: 1.5) {
    p, label, .labelish {font-size: 1.2em;}
    h3 {font-size: 1.4em;}
        body{
         background-color: red !important;
        }
} 
```

现在我了解了第一部分，只有在用户浏览器低于 480 像素时才应用这些样式。这`-webkit-min-device-pixel-ratio: 1.5`是我没有得到的。我知道它正在寻找高密度屏幕像素分辨率。但不确定为什么它会出现在 Chrome 上的新 Mac 视网膜屏幕上。我问的原因是我有两台电脑，一台装有新的视网膜屏幕，另一台没有，上面的 CSS 只在视网膜屏幕上启动。

我找到了这个链接[http://bjango.com/articles/min-device-pixel-ratio/](http://bjango.com/articles/min-device-pixel-ratio/)它列出了它应该影响的屏幕

*   谷歌 Nexus S
*   三星盖乐世 S II
*   宏达欲望
*   HTC 欲望高清
*   HTC 不可思议的 S
*   宏达速度
*   HTC 感觉

根据此列表，Mac 视网膜屏幕不应该应用这些样式。

有人可以解释为什么会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:20:56.060

如果此属性与 CSS 的其余部分一样工作，`-webkit-min-device-pixel-ratio: 1.5;`则应将此比率报告为 2 的设备应用 -`max-width: 480px;`与应用宽度为 320px 的设备的方式相同

`,`当涉及到 CSS 选择器/列表时，逗号 ( ) 也是 OR 运算符，如果这是您的意图，请使用[AND代替：](https://developer.mozilla.org/en-US/docs/CSS/Media_queries#and)

```
@media (max-width: 480px) and (-webkit-min-device-pixel-ratio: 1.5) 
```

# php - 在 Box API 上传时 shared_link 为空

> ID：15975433
> 
> 赞同：1
> 
> 时间：2013-04-12T15:33:49.880
> 
> 标签：php, curl, box-api

我正在尝试使用 V2 API 通过 cURL 将文件上传到 Box。文件上传成功，但返回对象的 shared_link 属性为空。文档中似乎没有任何内容可以解释这种情况。这种情况的一个特殊问题是我们仍在使用旧的 OAuth 流程进行用户登录。这是 V2 API 提供的功能的一个因素吗？我们已经计划切换到 OAuth2 流程，但如果有必要在上传时恢复 shared_link，我将加快我们的升级计划。

以下是相关代码：

```
209     private static $api_upload_url = 'https://upload.box.com/api/2.0/';
210     public function upload($token, $file, $folder) {
211             
212         $api_key = $config['boxnet_api_key'];
213         $params = array(
214             'filename' => '@' . $file,
215             'parent_id' => $folder,
216         );          
217                 
218         $ch = curl_init();
219         curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
220         curl_setopt($ch, CURLOPT_URL, self::$api_upload_url . 'files/content');
221         curl_setopt($ch, CURLOPT_POST, 2);
222         curl_setopt($ch, CURLOPT_POSTFIELDS, $params);
223         curl_setopt($ch, CURLOPT_HTTPHEADER, array("Authorization: BoxAuth api_key=$api_key&auth_token=$token"));
224                 
225         $response = json_decode(curl_exec($ch));
226         curl_close($ch);
227                 
228         return $response;
229     } 
```

这是响应的净化版本：

```
stdClass Object
    (
        [type] => file
        [id] => /* Removed */
        [sequence_id] => 0
        [etag] => 0
        [sha1] => /* Removed */
        [name] => /* Removed */
        [description] => 
        [size] => 10618
        [path_collection] => stdClass Object
            (
                 [total_count] => 1
                 [entries] => Array
                     (
                         [0] => stdClass Object
                             (
                                 [type] => folder
                                 [id] => 0
                                 [sequence_id] => 
                                 [etag] => 
                                 [name] => All Files
                             )

                     )

            )
        [created_at] => /* Removed */
        [modified_at] => /* Removed */
        [trashed_at] => 
        [purged_at] => 
        [content_created_at] => /* Removed */
        [content_modified_at] => /* Removed */
        [created_by] => stdClass Object
            (
                [type] => user
                [id] => /* Removed */
                [name] => /* Removed */
                [login] => /* Removed */
            )
        [modified_by] => stdClass Object
            (
                [type] => user
                [id] => /* Same as modified_by */
                [name] => /* Same as modified_by */
                [login] => /* Same as modified_by */
            )
        [owned_by] => stdClass Object
            (
                [type] => user
                [id] => /* Same as modified_by */
                [name] => /* Same as modified_by */
                [login] => /* Same as modified_by */
            )
        [shared_link] => 
        [parent] => stdClass Object
            (
                [type] => folder
                [id] => 0
                [sequence_id] => 
                [etag] => 
                [name] => All Files
            )
        [item_status] => active
    ) 
```

有什么想法吗？还是只是身份验证令牌没有足够的权限（由于是通过旧方法创建的）来获取该数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:06:35.133

必须为文件和文件夹显式创建共享链接。这是[相关文档](http://developers.box.com/docs/#files-create-a-shared-link-for-a-file)。

> 我们仍在使用旧的 OAuth 流程进行用户登录。

您暂时可以将 v1 身份验证令牌与 v2 API 一起使用，但据我所知，这将在年底左右停止工作。

# css - 在 SVG 中为溢出的文本添加省略号？

> ID：15975440
> 
> 赞同：35
> 
> 时间：2013-04-12T15:34:05.557
> 
> 标签：css, d3.js, svg

我正在使用`D3.js`. 我想找到一个与这个 CSS 类等效的 SVG，如果文本从其包含的 div 流出，它会添加省略号：

```
.ai-ellipsis {
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  -o-text-overflow: ellipsis;
  -moz-binding: url(<q>assets/xml/ellipsis.xml#ellipsis</q>);
} 
```

这是我的 SVG：

```
<g class="bar" transform="translate(0,39)">
    <text class="label" x="-3" y="6.5" dy=".35em" text-anchor="start">Construction</text>    
    <rect height="13" width="123"></rect>
</g> 
```

它的生成如下：

```
barEnter.append("text").attr("class", "label")
        .attr("x", -3).attr("y", function() { return y.rangeBand() / 2})
        .attr("dy", ".35em").attr("text-anchor", "start")
        .text(function(d) {
            return d.Name;
        }); 
```

目前，文本溢出并与 rect 元素重叠。

有什么办法可以说“如果文本超过一定宽度，裁剪它并添加椭圆”？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2014-12-31T16:34:56.660

溢出文本的包装函数：

```
 function wrap() {
        var self = d3.select(this),
            textLength = self.node().getComputedTextLength(),
            text = self.text();
        while (textLength > (width - 2 * padding) && text.length > 0) {
            text = text.slice(0, -1);
            self.text(text + '...');
            textLength = self.node().getComputedTextLength();
        }
    } 
```

用法：

```
text.append('tspan').text(function(d) { return d.name; }).each(wrap); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-12T17:39:34.253

我不知道 SVG 的等效 CSS 类，但您可以使用`foreignObject`将 HTML 嵌入到 SVG 中。这使您可以访问此功能并且通常更灵活（例如，您可以轻松地进行自动换行）。

有关完整示例，请参见[此处](http://bl.ocks.org/mbostock/1424037)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-05-16T04:56:18.513

这个函数不依赖于 d3：

```
function textEllipsis(el, text, width) {
  if (typeof el.getSubStringLength !== "undefined") {
    el.textContent = text;
    var len = text.length;
    while (el.getSubStringLength(0, len--) > width) {
        el.textContent = text.slice(0, len) + "...";
    }
  } else if (typeof el.getComputedTextLength !== "undefined") {
    while (el.getComputedTextLength() > width) {
      text = text.slice(0,-1);
      el.textContent = text + "...";
    }
  } else {
    // the last fallback
    while (el.getBBox().width > width) {
      text = text.slice(0,-1);
      // we need to update the textContent to update the boundary width
      el.textContent = text + "...";
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-15T08:46:46.830

```
function trimText(text, threshold) {
    if (text.length <= threshold) return text;
    return text.substr(0, threshold).concat("...");
} 
```

使用此函数设置 SVG 节点文本。阈值（例如 20）取决于您。这意味着您将显示节点文本中最多 20 个字符。所有超过 20 个字符的文本都将被修剪并在修剪文本的末尾显示“...”。

用法例如。：

```
var self = this;
nodeText.text(x => self.trimText(x.name, 20)) // nodeText is the text element of the SVG node 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-22T10:55:43.120

只是对 user2846569 提出的 wrap 函数的更新。**getComputedTextLength()**往往很慢，所以......

***编辑***

我努力应用了**user2846569**的建议，并制作了一个带有“二进制”搜索的版本，具有一些校准和参数化精度。

```
'use strict';

var width = 2560;

d3.select('svg').attr('width', width);

// From http://stackoverflow.com/questions/10726909/random-alpha-numeric-string-in-javascript
function randomString(length, chars) {
    var result = '';
    for (var i = length; i > 0; --i)
        result += chars[Math.floor(Math.random() * chars.length)];
    return result;
}

function wrap() {
    var self = d3.select(this),
        textWidth = self.node().getComputedTextLength(),    // Width of text in pixel.
        initialText = self.text(),                          // Initial text.
        textLength = initialText.length,                    // Length of text in characters.
        text = initialText,
        precision = 10, //textWidth / width,                // Adjustable precision.
        maxIterations = 100; // width;                      // Set iterations limit.

    while (maxIterations > 0 && text.length > 0 && Math.abs(width - textWidth) > precision) {

        text = /*text.slice(0,-1); =*/(textWidth >= width) ? text.slice(0, -textLength * 0.15) : initialText.slice(0, textLength * 1.15);
        self.text(text + '...');
        textWidth = self.node().getComputedTextLength();
        textLength = text.length;
        maxIterations--;
    }
    console.log(width - textWidth);
}

var g = d3.select('g');

g.append('text').append('tspan').text(function(d) {
    return randomString(width, 'a');
}).each(wrap); 
```

[在 JSFiddle 上查看。](https://jsfiddle.net/dj529bp3/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-02-05T17:12:23.070

如果您编写 CSS，它将无法在 . 而不是那个写逻辑并在字符串中附加'...'。

# ruby-on-rails - Heroku：运行`heroku run rake db：migrate`时出现错误R99（平台错误）

> ID：15975448
> 
> 赞同：2
> 
> 时间：2013-04-12T15:34:20.223
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, heroku, rake

我正在[这里](https://devcenter.heroku.com/articles/multiple-environments)描述的多个环境下运行 Heroku 应用程序。我能够在我原来的单一环境下正常运行，但是当我推送到其他一个环境并运行时，`heroku run rake db:migrate --remote REMOTE_NAME`我得到一个错误的形式`Error: Operation timed out - connect(2) (Errno::ETIMEDOUT)`。

此实例的`heroku logs`输出如下：

```
heroku[api]: Starting process with command `rake db:migrate`
heroku[run.9488]: Awaiting client
heroku[run.9488]: Starting process with command `rake db:migrate`
heroku[run.9488]: Error R99 (Platform error) -> Failed to launch the dyno within 10 seconds
heroku[run.9488]: Stopping process with SIGKILL
heroku[run.9488]: Error R13 (Attach error) -> Failed to attach to process
heroku[run.9488]: Process exited with status 128
heroku[run.9488]: State changed from starting to complete 
```

使用多个部署环境时迁移数据库的正确过程是什么？

# nginx - 使用 prestashop 1.5.4 在 nginx + php-fpm 上 100% cpu 负载

> ID：15975452
> 
> 赞同：1
> 
> 时间：2013-04-12T15:34:47.007
> 
> 标签：nginx, prestashop, vps, php

我设法使用 HowtoForge 上的 prestashop/ubuntu 12.10 指南设置了我的 VPS（单核 CPU 速度：2.40 GHz 缓存大小：512.00 KiB，1 gig ram [）](http://www.howtoforge.com/running-prestashop-1.5.x-on-nginx-lemp-on-debian-wheezy-ubuntu-12.10)。一切正常，除了极高的 CPU 负载，当 1 个用户打开 1 个页面时，CPU 负载达到 100% 并且仍然需要大约 2 秒来处理，我认为 php 代码有问题，但我没有不知道怎么才能知道是什么消耗了这么多资源。通过 htop 我可以看到它的 php-fpm: pool，但这并不能真正帮助我找出代码有什么问题。

php5-fpm 日志仅向我显示此警告：

```
[12-Apr-2013 12:36:16] WARNING: [pool www] server reached pm.max_children setting (10), consider raising it
[12-Apr-2013 12:41:49] WARNING: [pool www] server reached pm.max_children setting (10), consider raising it
[12-Apr-2013 12:56:26] WARNING: [pool www] server reached pm.max_children setting (10), consider raising it
[12-Apr-2013 12:56:43] WARNING: [pool www] server reached pm.max_children setting (10), consider raising it
[12-Apr-2013 12:59:39] WARNING: [pool www] server reached pm.max_children setting (10), consider raising it 
```

但正如我所做的那样，10 左右对于这个设置来说并不是一个不寻常的低数字。

我想知道是否有人可以帮助我找出导致此问题的原因？

这是我的网站：[www.deepdevotionshop.com](http://www.deepdevotionshop.com)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:15:07.130

尝试启用分析功能，它将突出显示代码的哪一部分正在减慢您的服务器。

1.  在您的 PrestaShop v1.5.4 商店中，编辑 /config/defines.inc.php
2.  在第 44 行，替换`define('_PS_DEBUG_PROFILING_', false);`为`define('_PS_DEBUG_PROFILING_', true);`
3.  转到您的商店主页并重新加载页面
4.  您现在应该能够看到每个函数和 SQL 查询消耗了多少时间

问候，布鲁诺-

# c - 头文件错误：不允许不完整的类型

> ID：15975453
> 
> 赞同：1
> 
> 时间：2013-04-12T15:34:48.527
> 
> 标签：c, struct, header-files, keil

这是我的头文件：

```
typedef int* Arg;   
typedef int* Args[];
typedef int** ArgsList[];

typedef int (*ProcessStart)(Args);

typedef struct PCBEntry{

    ProcessStart proc;
    Args args;
    int pid;
    int curr_proc;
    int sched_info;
    int pc;

} PCBEntry; 
```

我在结构中的行上得到错误`Args args`，我不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:36:47.243

因为您定义`Args`为`int *[]`，所以该成员`args`被有效地声明为

```
int *args[]; 
```

这是一个灵活的数组成员，它们只允许在结构的末尾。

如果您的意思是暗示这`Args`是一个指针（与 相同`char **argv`），请将其声明为指针：

```
typedef int **Args; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:39:16.037

而不是使用

```
typedef int* Args[]; 
```

并在您的结构声明中

```
Args args; 
```

最好只使用第一种类型进行结构声明...

```
Arg args[]; 
```

老实说，我什至不确定第一个是合法的 typedef，但只是我以前从未用 typedef 做过类似的事情。我的直觉告诉我这是不合法的，因此`Args`是未定义的，因此您会遇到错误。如果我对此应用左右规则，那么`Args`它是一个指向 int 的指针数组的类型......所以，也许它是合法的，但它在我看来确实很有趣。

# r - 合并具有不同行数的列表中的多个文件

> ID：15975455
> 
> 赞同：-1
> 
> 时间：2013-04-12T15:35:06.820
> 
> 标签：r, list, dataframe

我在一个列表中有多个文件，我想根据`Year`列合并它们，这样我的新文件看起来像`Merged_file`. 如果我有 2 个文件，我可以使用`merge(file1, file2, by="Year")`，但我不知道如何对列表中的多个文件执行此操作。我也试过这个`newlist <- lapply(files, function(t)do.call(rbind.fill, t))`，但这不是我想要的。

```
file1             file2                Merged_file

Year  Value1      Year  Value2         Year Value1 Value2
2001   1          2000   0.5           2001  1       0.3
2001   2          2000   0.6           2001  2       0.3 
2002   2          2001   0.3           2002  2       0.5
2002   3          2001   0.3           2002  3       0.6
2003   3          2002   0.5           2003  3       0.6       
2003   4          2002   0.6           2003  4       0.6
                  2003   0.6
                  2003   0.6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:00:15.753

你说每个数据集中的行数不一样；但是，任何一年的行数是否相同？我觉得您想获取同一年份的文件子集并将`cbind`它们组合（），但我不确定。看看这是否符合您的要求/意思：

```
file1 <- read.table(text=
"Year  Value1      
2001   1          
2001   2          
2002   2          
2002   3          
2003   3                
2003   4", header=TRUE)

file2 <- read.table(text=
"Year  Value2         
2000   0.5           
2000   0.6           
2001   0.3           
2001   0.3           
2002   0.5           
2002   0.6           
2003   0.6           
2003   0.6", header=TRUE)

bind.by.var <- function(file1, file2, var = intersect(names(file1), names(file2))) {
    do.call(rbind, lapply(intersect(file1[[var]], file2[[var]]), function(y) {
        cbind(file1[file1[[var]]==y,],
              file2[file2[[var]]==y,setdiff(names(file2),var),drop=FALSE])
    }))
} 
```

该函数`bind.by.var`计算出两个文件共有的列（年份），然后计算出两个文件中出现的年份。然后，年复一年，将这些年结合（绑定）在一起。我不知道这是否是您想要的，但它确实符合您的`Merged_file`示例

```
> bind.by.var(file1, file2)
  Year Value1 Value2
1 2001      1    0.3
2 2001      2    0.3
3 2002      2    0.5
4 2002      3    0.6
5 2003      3    0.6
6 2003      4    0.6 
```

鉴于此和文件列表，您可以`Reduce`在其上使用该技术。

```
Reduce(bind.by.var, list(file1, file2)) 
```

您将显式列表替换为从文件中读取的 data.frame 列表。

这里的假设是每个文件中任何一年都有相同数量的行。如果不是这种情况，您需要解释您希望如何组合/合并一年中的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:43:53.713

考虑使用带有命令“ldply”的“plyr”包。

```
### Create a vector of file names to be read in
files <- list.files()

### Iterate over each file, reading in data each time
data <- lapply(files, read.csv)

### Use "ldply" to merge files from a list into a data.frame
data <- ldply(data) 
```

# sql - NHibernate Query subquery group by join back to main entity

> ID：15975457
> 
> 赞同：1
> 
> 时间：2013-04-12T15:35:08.940
> 
> 标签：sql, nhibernate, fluent-nhibernate, queryover

您好我正在尝试实现以下SQL

```
SELECT this_.*
 FROM WorkItems this_ 
 WHERE this_.UserId = (

 SELECT this_1_.y0_ as y0_
 FROM
 (
    SELECT top 1 this_0_.UserId as y0_, count(this_0_.UserId) as y1_ 
    FROM WorkItems this_0_ 
    WHERE this_0_.StateId = 1 and this_0_.Type like 'Data' 
    GROUP BY this_0_.UserId 
    ORDER BY y1_ desc
  ) this_1_

); 
```

到目前为止，我已经设法制作出相当接近的东西。我错过了我刚刚选择用户 ID 的部分。继承人到目前为止的查询

```
var subquery = QueryOver.Of<WorkItem>().Where(w => w.State == state)
                                .AndRestrictionOn(w => w.Type).IsLike(type, MatchMode.Exact)
                                .SelectList(list =>
                                            list.SelectGroup(w => w.UserId)
                                                .WithAlias(() => resultAlias.userId)
                                                .SelectCount(w => w.UserId)
                                                .WithAlias(() => resultAlias.count))
                                .OrderByAlias(() => resultAlias.count)
                                .Desc().Take(1);

        var query =
            CurrentSession.QueryOver<WorkItem>()
                          .WithSubquery
                          .WhereProperty(p => p.UserId)
                          .Eq(subquery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:29:56.990

尝试这个： -

```
var subquery = QueryOver.Of<WorkItem>().Where(w => w.State == state)
                .AndRestrictionOn(w => w.Type).IsLike(type, MatchMode.Exact)
                .SelectList(list => list.SelectGroup(w => w.UserId))
                    .OrderBy(Projections.Count<WorkItem>(x => x.UserId))
                .Desc().Take(1);

var query = CurrentSession.QueryOver<WorkItem>()
              .WithSubquery
              .WhereProperty(p => p.UserId)
              .Eq(subquery); 
```

# css - 在循环中连接 LESS 中的字符串

> ID：15975459
> 
> 赞同：7
> 
> 时间：2013-04-12T15:35:11.050
> 
> 标签：css, less

我正在努力将[Unsemantic](http://unsemantic.com/ "无语义的")从 SASS 转换为 LESS，同时我正在构建循环以创建我的类：

```
 .populateGridClasses (@index, @interval) when (@index > 0) {
    @num: @index * @interval;
    (~".eh-grid-@{num}, .eh-mobile-grid-@{num}, .eh-tablet-grid-@{num}") {
        .grid();
    }
   .populateGridClasses(@index - 1, @interval);
}
.populateGridClasses (0, @interval) {}

// Create the grids in an inverval of 5
.populateGridClasses(20, 5); 
```

// 三分之二创建网格 .populateGridClasses(3, 33);

它这样创建类：

```
.eh-grid-100, .eh-mobile-grid-100, .eh-tablet-grid-100 {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  padding: 0 10px;
}
.eh-grid-95, .eh-mobile-grid-95, .eh-tablet-grid-95 {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  padding: 0 10px;
}
... 
```

显然，这可以被压缩，以便同时定义所有 6 个类。所以我的想法是使用循环来创建一个巨大的字符串，然后将`.grid()`mixin 添加到：

```
@test: "";
.populateGridClasses4 (@index, @interval) when (@index > 0) {
    @num: @index * @interval;
    @ntest: ".eh-grid-@{num}, .eh-mobile-grid-@{num}, .eh-tablet-grid-@{num}";
    @test: "@{test}@{ntest}";
.populateGridClasses4(@index - 1, @interval);
}
.populateGridClasses4 (0, @interval) {}
.populateGridClasses4(20, 5);

("@{test}"){
    padding-left: 1px;
} 
```

但这给了我一个 LESS 错误`LESS: Out of stack space`。关于如何创建这个庞大的字符串以便我可以创建 69 个类并且只定义一次的任何想法？当然，以编程方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T22:52:25.080

您可以尝试将另一个属性传递给 mixin ... 像这样，我在您的代码中将 @t1 添加到参数中，并在循环中定义 @t2，然后将其传递。现在您将仅在一个循环步骤的范围内写入变量，而不是尝试在递归中再次覆盖相同的变量（不同意 less）。所以这是你的代码，不应该再出现你提到的错误：

```
 @test: "";

    .populateGridClasses4 (@index, @interval, @t1) when (@index > 0) {
        @num: @index * @interval;
        @ntest: ".eh-grid-@{num}, .eh-mobile-grid-@{num}, .eh-tablet-grid-@{num}";
        @t2: ~"@{t1}@{ntest}";
    .populateGridClasses4(@index - 1, @interval,@t2);
    }

    .populateGridClasses4 (0, @interval,@t1) {}

    .populateGridClasses4(20, 5, @test);

    @{t2} {
        padding-left: 1px;
    } 
```

您还需要使用 ~ 进行类插值，而不是返回引号之间的类名。

**编辑：**以上内容仅适用于 1.3.3，但对于在 1.4 中使用的方法，您需要对其进行一些调整。另外我注意到你加入字符串的方式没有在每个循环的类名之间添加逗号，所以我在这里添加了另一个步骤，这现在应该在 1.4 和以前版本的 LESS 中做正确的事情。

```
 .populateGridClasses4(1,@num,@t1) {
        @test: ~"@{t1}, .eh-grid-@{num}, .eh-mobile-grid-@{num}, .eh-tablet-grid-@{num}";
    }

    .populateGridClasses4(@index, @interval, @t1) when (@index > 1) {
        @num: (@index * @interval);
        @t2: "@{t1}, .eh-grid-@{num}, .eh-mobile-grid-@{num}, .eh-tablet-grid-@{num}";
        .populateGridClasses4((@index - 1),@interval,@t2);
    }

    .populateGridClasses4(@index,@interval) {
        @num: (@index * @interval);
        @t2: ".eh-grid-@{num}, .eh-mobile-grid-@{num}, .eh-tablet-grid-@{num}";
       .populateGridClasses4((@index - 1), @interval, @t2);
    }

    .populateGridClasses4(20, 5);
    @{test} { padding-left: 1px; } 
```

输出**CSS**是：

```
 .eh-grid-100, .eh-mobile-grid-100, .eh-tablet-grid-100, .eh-grid-95, .eh-mobile-grid-95, .eh-tablet-grid-95, .eh-grid-90, .eh-mobile-grid-90, .eh-tablet-grid-90, .eh-grid-85, .eh-mobile-grid-85, .eh-tablet-grid-85, .eh-grid-80, .eh-mobile-grid-80, .eh-tablet-grid-80, .eh-grid-75, .eh-mobile-grid-75, .eh-tablet-grid-75, .eh-grid-70, .eh-mobile-grid-70, .eh-tablet-grid-70, .eh-grid-65, .eh-mobile-grid-65, .eh-tablet-grid-65, .eh-grid-60, .eh-mobile-grid-60, .eh-tablet-grid-60, .eh-grid-55, .eh-mobile-grid-55, .eh-tablet-grid-55, .eh-grid-50, .eh-mobile-grid-50, .eh-tablet-grid-50, .eh-grid-45, .eh-mobile-grid-45, .eh-tablet-grid-45, .eh-grid-40, .eh-mobile-grid-40, .eh-tablet-grid-40, .eh-grid-35, .eh-mobile-grid-35, .eh-tablet-grid-35, .eh-grid-30, .eh-mobile-grid-30, .eh-tablet-grid-30, .eh-grid-25, .eh-mobile-grid-25, .eh-tablet-grid-25, .eh-grid-20, .eh-mobile-grid-20, .eh-tablet-grid-20, .eh-grid-15, .eh-mobile-grid-15, .eh-tablet-grid-15, .eh-grid-10, .eh-mobile-grid-10, .eh-tablet-grid-10, .eh-grid-5, .eh-mobile-grid-5, .eh-tablet-grid-5 {
    padding-left: 1px;
  } 
```

# vb.net - VB.NET中FTP上传ProgressBar

> ID：15975462
> 
> 赞同：2
> 
> 时间：2013-04-12T15:35:13.170
> 
> 标签：vb.net, winforms, ftp, progress-bar, ftpwebrequest

我正在编写一个将文件上传到远程 FTP 服务器的应用程序。这是我已经可以使用的代码。

```
clsrequest.Method = System.Net.WebRequestMethods.Ftp.UploadFile

Dim bFile() As Byte = System.IO.File.ReadAllBytes(rutaorigen)

Dim clsStream As System.IO.Stream = clsrequest.GetRequestStream()

clsStream.Write(bFile, 0, bFile.Length)

clsStream.Close()
clsStream.Dispose() 
```

现在我想`ProgressBar`在 VB.NET 中展示进度。

文件不太大（最大 10 MB）。

我已经尝试了一个我在这里找到的例子，但它没有用。

我希望你能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-27T07:09:12.913

控制台上的简单进展：

```
Dim request As WebRequest = WebRequest.Create("ftp://ftp.example.com/remote/path/file.zip")
request.Credentials = New NetworkCredential("username", "password")
request.Method = WebRequestMethods.Ftp.UploadFile

Using fileStream As Stream = File.OpenRead("C:\local\path\file.zip"),
      ftpStream As Stream = request.GetRequestStream()
    Dim buffer As Byte() = New Byte(10240 - 1) {}
    Dim read As Integer
    Do
        read = fileStream.Read(buffer, 0, buffer.Length)
        If read > 0 Then
            ftpStream.Write(buffer, 0, read)
            Console.WriteLine("Uploaded {0} bytes", fileStream.Position)
        End If
    Loop While read > 0
End Using 
```

* * *

WinForms GUI 进度：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    ' Run Upload on background thread
    Task.Run((Sub() Upload()))
End Sub

Sub Upload()
    Dim request As WebRequest =
        WebRequest.Create("ftp://ftp.example.com/remote/path/file.zip")
    request.Credentials = New NetworkCredential("username", "password")
    request.Method = WebRequestMethods.Ftp.UploadFile

    Using fileStream As Stream = File.OpenRead("C:\local\path\file.zip"),
          ftpStream As Stream = request.GetRequestStream()
        ProgressBar1.Invoke(Sub() ProgressBar1.Maximum = fileStream.Length)
        Dim buffer As Byte() = New Byte(10240 - 1) {}
        Dim read As Integer
        Do
            read = fileStream.Read(buffer, 0, buffer.Length)
            If read > 0 Then
                ftpStream.Write(buffer, 0, read)
                ProgressBar1.Invoke(Sub() ProgressBar1.Value = fileStream.Position)
            End If
        Loop While read > 0
    End Using
End Sub 
```

[![在此处输入图像描述](https://i.stack.imgur.com/iwlZ8.png)](https://i.stack.imgur.com/iwlZ8.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T16:53:21.473

我很久以前从一个例子中得到了这个。代码应该很容易根据您的需要进行更改。

```
Dim clsRequest As System.Net.FtpWebRequest = _
        DirectCast(System.Net.WebRequest.Create(ServLabel.Text & TextBox1.Text), System.Net.FtpWebRequest)

    clsRequest.Credentials = New System.Net.NetworkCredential(PassLabel.Text, UserLabel.Text)
    clsRequest.Method = System.Net.WebRequestMethods.Ftp.UploadFile
    rfshTMR.Enabled = True
    Dim File() As Byte = System.IO.File.ReadAllBytes(txtFile.Text)
    Dim clsStream As System.IO.Stream = _
        clsRequest.GetRequestStream()
    clsStream.Write(File, 0, File.Length)
    For offset As Integer = 0 To File.Length Step 1024
        ToolStripProgressBar1.Value = CType(offset * ToolStripProgressBar1.Maximum / File.Length, Integer)
        Dim chunkSize As Integer = File.Length - offset - 1
        If chunkSize > 1024 Then chunkSize = 1024
        clsStream.Write(File, offset, chunkSize)
        ToolStripProgressBar1.Value = ToolStripProgressBar1.Maximum
    Next
    clsStream.Close()
    clsStream.Dispose()
    MsgBox("File Is Now In Database", MsgBoxStyle.OkOnly, "Upload Complete") 
```

# java - Spring：异常启动过滤器springSecurityFilterChain

> ID：15975466
> 
> 赞同：10
> 
> 时间：2013-04-12T15:35:29.247
> 
> 标签：java, spring, spring-security, configuration-files, web.xml

我正在尝试使用`Spring 3.1.2-Release`. 应用服务器是`Tomcat 7`. 当我启动服务器时，我收到此错误：

> 严重：异常启动过滤器 springSecurityFilterChain org.springframework.beans.factory.NoSuchBeanDefinitionException：否
> 
> 名为“springSecurityFilterChain”的 bean 在 org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095) 的 org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:553) 中定义org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277) 在 org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) 在 org.springframework.context.support。 AbstractApplicationContext.getBean(AbstractApplicationContext.java:1102)

这是我的配置文件：

```
web.xml 
```

```
<display-name>myTest</display-name>

<context-param>     
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<context-param>
    <param-name>defaultHtmlEscape</param-name>
    <param-value>true</param-value>
</context-param>

 <!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>springTest</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>springTest</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这是`root-context.xml`

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:c="http://www.springframework.org/schema/c" xmlns:context="http://www.springframework.org/schema/context"
xmlns:p="http://www.springframework.org/schema/p" xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd">

<context:annotation-config />

<context:component-scan base-package="com.myTest.db.entities"/>
<context:component-scan base-package="com.myTest.services"/>
<context:component-scan base-package="com.myTest.web"/>

<import resource="mvc-config.xml" /> 
```

这是

```
security-config.xml 
```

```
<beans:beans xmlns="http://www.springframework.org/schema/security" xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<!-- Additional filter chain for normal users, matching all other requests -->
<http pattern="/resources/**" security="none" />

<http use-expressions="true">
    <intercept-url pattern="/login" access='isAnonymous()' requires-channel='http' />       
    <intercept-url pattern="/" access='permitAll' requires-channel='http'/>
    <intercept-url pattern='/**' access='isAuthenticated()' requires-channel='http'/>
    <form-login login-page="/login" authentication-failure-url="/login" default-target-url="/welcome" />
    <access-denied-handler ref="accessDeniedHandler" />   
    <logout logout-url="/logout" logout-success-url="/" />
</http>

<beans:bean id="accessDeniedHandler" class="org.springframework.security.web.access.AccessDeniedHandlerImpl">
    <beans:property name="errorPage" value="/WEB-INF/pages/error.jsp"/>
</beans:bean>

 <authentication-manager>
    <authentication-provider user-service-ref="userAuthenticationService">
        <password-encoder hash="sha-256">
            <salt-source user-property="salt" />
        </password-encoder>
    </authentication-provider>
</authentication-manager>

<!-- User Detail Services -->
<beans:bean id="userAuthenticationService" class="com.myTest.security.AuthenticationServiceImpl" /> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T15:44:34.673

您在 web.xml 中缺少 security-config.xml 条目

你可能需要这样的东西：

```
<param-value>/WEB-INF/spring/security-config.xml</param-value> 
```

行后

```
<param-value>/WEB-INF/spring/root-context.xml</param-value> 
```

在 web.xml 中

# node.js - AWS node.js 没有创建 S3 存储桶？

> ID：15975467
> 
> 赞同：1
> 
> 时间：2013-04-12T15:35:29.280
> 
> 标签：node.js, amazon-web-services, amazon-s3

我正在尝试使用基本教程来创建一个 S3 存储桶，如下所示

```
var AWS = require('aws-sdk');

AWS.config.loadFromPath('./myawsconfig.json');
AWS.config.update({region: 'eu-west-1'});

var s3 = new AWS.S3();
s3.client.createBucket({Bucket: 'pBucket'}, function() {
  var data = {Bucket: 'pBucket', Key: 'myKey', Body: 'Hello!'};
  s3.client.putObject(data, function(err, data) {
    if (err) {
      console.log("Error uploading data: ", err);
    } else {
      console.log("Successfully uploaded data to myBucket/myKey");
    }
  });
}); 
```

但我收到以下错误

```
node createbucket.js
Error uploading data:  { [NoSuchBucket: The specified bucket does not exist]
  message: 'The specified bucket does not exist',
  code: 'NoSuchBucket',
  name: 'NoSuchBucket',
  statusCode: 404,
  retryable: false } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T20:38:33.027

我遇到了这个问题，发现我的 api-user 没有创建存储桶的权限。

稍微更彻底的错误检查揭示了这一点......

```
s3.client.createBucket({Bucket: 'someBucket'}, function(err) {
    if (err) {
      console.log("Error creating bucket: ", err);
    } else {
      console.log("Successfully created bucket 'someBucket'");
    }
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T15:37:07.633

我刚遇到这个问题，显然 Node.js 教程代码无法编译。我有一个 var Object 没有 createBucket 方法。

这有效：

```
var AWS = require('aws-sdk');
AWS.config.loadFromPath('./credentials.json');
// Set your region for future requests.
AWS.config.update({region: 'us-east-1'});
// Create a bucket and put something in it.
var s3 = new AWS.S3();
s3.client.createBucket({Bucket: 'hackathon-test'}, function() {
  var data = {Bucket: 'hackathon-test', Key: 'myKey', Body: 'Hello!'};
  s3.client.putObject(data, function(err, data) {
    if (err) {
      console.log("Error uploading data: ", err);
    } else {
      console.log("Successfully uploaded data to myBucket/myKey");
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-20T16:17:13.140

根据 aws S3 存储桶名称限制。您的存储桶名称不应包含任何大写字母。所以'pBucket'是无效的。

[http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/BucketRestrictions.html)

**符合 DNS 的存储桶名称的规则是：**

*   存储桶名称的长度必须至少为 3 且不超过 63 个字符。
*   存储桶名称必须是一系列一个或多个标签。相邻标签由单个句点 (.) 分隔。存储桶名称可以包含小写字母、数字和连字符。每个标签必须以小写字母或数字开头和结尾。
*   存储桶名称不得格式化为 IP 地址（例如 192.168.5.4）。
*   当使用带有 SSL 的虚拟托管式存储桶时，SSL 通配符证书仅匹配不包含句点的存储桶。要解决此问题，请使用 HTTP 或编写您自己的证书验证逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-31T07:58:23.340

我错过了一些建议，有人可能会觉得有用

*   如果您将该区域设置为 S3 对象的一部分，`var s3 = new AWS.S3({region: 'us-west-1'});`则调用将失败（根据我的经验）。

*   因此，您可以通过以下任一方式设置区域

一个）`AWS.config.update({ region: 'eu-west-1' });`

b) 作为 createBucket 参数的一部分

`s3.createBucket({ Bucket: bucketName, CreateBucketConfiguration: { LocationConstraint: "eu-west-1" } }, function () {`

另外，请注意存储桶名称中的大写或下划线，因为这也花了我一个小时的时间（仅符合 DNS 标准）。

# php - Yii 自动加载自定义组件

> ID：15975468
> 
> 赞同：2
> 
> 时间：2013-04-12T15:35:29.947
> 
> 标签：php, yii, autoload, stripe-payments

我试图让 Yii 自动加载不遵循 Yii 约定的组件。有问题的库是[Stripe](https://stripe.com/docs/checkout/guides/php)，我将它移到了 Components 文件夹中。通过像这样修改我的配置，我能够让它自动加载主 Stripe 文件没有问题：

```
'import'=>array(
    'application.models.*',
    'application.components.*',
    'application.components.stripe.*',
), 
```

目录结构如下所示：

```
Components
----------
  |
  ----> Stripe
     | 
     ----> Stripe.php    (Class Name = "Stripe")
     ----> Customer.php  (Class Name = "Stripe_Customer")
     ----> Charge.php    (Class Name = "Stripe_Charge")
     ----> etc. 
```

识别类没有问题`Stripe`，但找不到`Stripe_*`命名类。有没有办法让 Yii 识别这种模式，或者我是否被`require`控制器中的手动语句卡住了？如果我将所有文件重命名为它们的类名，它会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:45:37.890

您还可以创建自己的自动加载器并将其注册到： `Yii::registerAutoloader(array("AutoloderClass", "methodName"), $append);`.
第一个参数实际上是一个 php 回调，我使用类和方法表示法，也可以是函数。这实际上`spl_autoload_register`根据第二个参数按顺序调用 - 在 Yii 自动加载器之前或之后。Autoloader 应该在`index.php`之前注册`$app->run()`。

一些示例自动加载器（用于 zend 框架）可以在这里找到： [http ://www.yiiframework.com/extension/zendautoloader](http://www.yiiframework.com/extension/zendautoloader)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:58:25.957

是的，将文件重命名为类名会有所帮助。否则，您必须自己要求课程。

# magento - Magento 模块 SugarCRM 集成

> ID：15975472
> 
> 赞同：1
> 
> 时间：2013-04-12T15:35:49.910
> 
> 标签：magento, sugarcrm, dispatch

我创建了一个模块。这是我的 config.xml：

```
<config>    
    <modules>
        <Empresam_SugarIntegration>
            <version>0.1.0</version>
        </Empresam_SugarIntegration>
    </modules>
    <frontend>
        <routers>
            <sugarintegration>
                <use>standard</use>
                <args>
                    <module>Empresam_SugarIntegration</module>
                    <frontName>sugarintegration</frontName>
                </args>
            </sugarintegration>
        </routers>  
    </frontend>
    <global>
        <events>
           <customer_register_success>
                <observers>
                    <Empresam_SugarIntegration_customertosugar_observer>
                        <type>singleton</type>
                        <class>Empresam_SugarIntegration_Model_Observer</class>
                        <method>sendtosugar</method>
                    </Empresam_SugarIntegration_customertosugar_observer>
                </observers>
            </customer_register_success>            
        </events>
    </global>
</config> 
```

然后，我的班级：Company_Module_Model 中的“Observer.php”：

```
<?php

class Empresam_SugarIntegration_Model_Observer {

    public function sendtosugar($observer) {

        $customer = $observer->getEvent();       

            $options = array(
                "location" => '...',
                "uri" => 'http://www.sugarcrm.com/sugarcrm',
                "trace" => 1
            );
            $user_auth = array(
                "user_name" => '...',
                "password" => MD5('...'),
                "version" => '4.1'
            );
            $client = new SoapClient(Null, $options);
            $response = $client->login($user_auth, 'test');
            $session_id = $response->id;

            // Mapping...
            $response = $client->set_entry($session_id, 'Leads', array(
                array("name" => 'first_name', "value" => $customer->getFirstName()),
                array("name" => 'last_name', "value" => $customer->getLastName()),
                array("name" => 'email', "value" => $customer->getEmail()),
                array("name" => 'account_name', "value" => $customer->getFirstName() . $customer->getLastname())
                    ));
            Mage::log($customer->getFirstName() . $customer->getLastname());

        return $this;
    }

} 
```

我要调度的事件是：Mage_Customer_AccountController，函数`createPostAction`：

```
 Mage::dispatchEvent('customer_register_success',
                        array('account_controller' => $this, 'customer' => $customer)
 ); 
```

我的问题是，我在 SugarCRM 上得到了空的线索，从这个电话中我看到：

```
Mage::log($customer->getFirstName() . $customer->getLastname()); 
```

我得到的字符串是空的。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:17:30.320

```
$customer = $observer->getEvent(); 
```

应该

```
$customer = $observer->getCustomer(); // or getEvent()->getCustomer(); 
```

# android - Android 位图旋转画布裁剪/剪切图像

> ID：15975480
> 
> 赞同：1
> 
> 时间：2013-04-12T15:36:10.890
> 
> 标签：android, bitmap, rotation, crop

```
bmpAndroidMarker = BitmapFactory.decodeResource(context.getResources(), R.drawable.t_move2);
                        bmpAndroidMarkerResult = Bitmap.createBitmap(bmpAndroidMarker.getWidth(), bmpAndroidMarker.getHeight(), Bitmap.Config.ARGB_8888);
                        Canvas tempCanvas = new Canvas(bmpAndroidMarkerResult);
                        tempCanvas.rotate(direction+45, bmpAndroidMarker.getWidth()/2, bmpAndroidMarker.getHeight()/2);
                        tempCanvas.drawBitmap(bmpAndroidMarker, 0, 0, null); 
```

这是我编写的代码（借用）。该图标是在列表视图内的图像视图中生成的。

我的问题是，在旋转这个“箭头”时，它似乎“剪掉”了远边缘的一部分，就好像它保持了原始位图的尺寸一样。我不知道如何让它“溢出”并呈现正确大小的图像。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:54:36.757

您将图像旋转 45 度，因此生成的位图应该是原始宽度加上原始对角线宽度（毕达哥拉斯定理应该能够提供帮助）。

AFAIK 在创建结果位图时您需要自己进行数学运算，因为这是正在绘制的画布，旋转它的内容不会旋转容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T15:29:41.383

尝试将您的 ImageView 包装在 FrameLayout 中，并将框架布局的宽度和高度设置为您尝试渲染的图像的大小。您可以在视图的布局文件中执行此操作，例如...

```
<FrameLayout
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_width="YOUR IMAGE WIDTH"
        android:layout_height="YOUR IMAGE HEIGHT">
        <ImageView
            android:scaleType="matrix"
            android:layout_width="YOUR IMAGE WIDTH"
            android:layout_height="YOUR IMAGE HEIGHT"
            android:src="@drawable/YOUR IMAGE FILE" />
    </FrameLayout> 
```

...或以编程方式通过使用您指定的尺寸构建您的 FrameLayout 然后将您的 ImageView 添加为子视图。

如果您的图像大于屏幕，您可以使用 android:scaleType="matrix" 来防止其缩放并确保保留您的纵横比。

这最初是由 Pavlo Viazovskyy[在这里](https://stackoverflow.com/a/12528483/2266500)回答的。信用到期！

# c++ - C++11 库和 g++ 4.4.7 的问题

> ID：15975481
> 
> 赞同：5
> 
> 时间：2013-04-12T15:36:12.450
> 
> 标签：c++, random

我正在使用 GCC 版本 4.4.7 的服务器上工作，不幸的是我被迫使用此版本。我想使用`<random>`C++0x 的库，但我[在这里](https://stackoverflow.com/a/10061174/1710373)读到，在这个版本`uniform_real_distribution`中称为`uniform_real`. 当我尝试调用此函数`normal_distribution`时，我没有得到有用的输出。看这个例子：

```
#include <random>
#include <iostream>

using namespace std;

int main()
{
    typedef std::mt19937 Engine;
    typedef std::uniform_real<double> Dis1;
    typedef std::normal_distribution<double> Dis2;

    Engine eng(0);

    Dis1 dis1(0, 1);
    cout << dis1(eng) << endl; //OUTPUTS 3.49921e+09

    Dis2 dis2(0, 1);
    cout << dis2(eng) << endl; //STALLS, NO OUTPUT

    return 0;
} 
```

我编译`g++44 -std=c++0x main.cpp`并显示了我得到的输出。这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:46:18.223

[gcc 4.4 中的 C++11 支持](http://gcc.gnu.org/gcc-4.4/cxx0x_status.html)相当少。

gcc 4.5的[发行说明](http://gcc.gnu.org/gcc-4.5/changes.html)包括

> 改进了对即将推出的 ISO C++ 标准 C++0x 的实验性支持

特别提一下`<random>`。

# reporting-services - SSRS - 报表生成器 ClickOnce 网址

> ID：15975494
> 
> 赞同：1
> 
> 时间：2013-04-12T15:37:01.390
> 
> 标签：reporting-services, ssrs-2008

我已经安装了 SSRS，一切都很好。但是，当我从外部 URL 访问报告时，报告生成器会使用内部 URL 并中断。

我应该在哪里修改 Report Builder ClickOnce URL，以便我可以输入外部 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:55:39.927

您可以尝试在报表管理器站点设置中更改**自定义报表生成器启动 URL ：**

![在此处输入图像描述](https://i.stack.imgur.com/7I6GP.png)

[MSDN](http://msdn.microsoft.com/en-us/library/ms181194%28v=sql.100%29.aspx)上的更多信息。

因此，对于 SSRS 2008R2 和 Report Builder 3.0，类似

```
http://YourExternalServer/ReportServer/ReportBuilder/ReportBuilder_3_0_0_0.application 
```

可能会奏效。

您可能有任何数量的权限问题，但希望这能给您一些尝试。

# c# - Task.Run 冻结

> ID：15975499
> 
> 赞同：0
> 
> 时间：2013-04-12T15:37:19.917
> 
> 标签：c#, task-parallel-library, .net-4.5, async-await, c#-5.0

谁能告诉我为什么在完成 lambda 后会冻结以下内容：

```
 return await Task.Run(() =>
        {
            return SuperLongMethod();
        }) 
```

...但以下工作按预期工作：

```
 return Task.Run(() =>
        {
            return SuperLongMethod();
        }).GetAwaiter().GetResult(); 
```

似乎第一个版本中的 Task.Run 无法识别 lambda 已完成。我的代码中有其他示例，我使用第一个版本没有问题，所以我不知道有什么区别。

为清楚起见，SuperLongMethod() 进行 Web 服务调用并对结果数据进行大量后处理

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T15:43:58.087

我猜你正在调用的调用堆栈进一步向上，`Task.Wait`或者`Task<T>.Result`因此导致[我在我的博客上描述的死锁问题](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)。你应该`await`改用。

作为旁注，`SuperLongMethod`可能应该被分解成`CallWebServiceAsync`and `DoPostProcessing`，并且只有`DoPostProcessing`应该被包裹在 a 中`Task.Run`。

# javascript - 识别没有 ID 或类的隐藏表单值

> ID：15975502
> 
> 赞同：0
> 
> 时间：2013-04-12T15:37:43.763
> 
> 标签：javascript, jquery, forms, input, greasemonkey

我正在编写一个 Greasemonkey 脚本，我需要能够从隐藏的表单元素中获取值并将其设置为变量。

隐藏的表单值如下所示：

```
 <input type="hidden" name="ASIN" value="B009MO89Y4" /> 
```

我没有 ID、类或任何我能看到的将“值”设置为变量的方式。这需要动态工作，我目前无法为此值建立类或 ID。

是否有 Javascript（或 jQuery）方法来设置它？

换句话说：

查找名称为“ASIN”的“输入”并将 .val() 设置为变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:40:13.197

这个选择器和赋值：

```
$("input[name='ASIN']").val(); <---- returns value of that input

var inputVal = $("input[name='ASIN']").val(); <-- Assigns it

var temp = "Stuff";
$("input[name='ASIN']").val(temp); <----Assigns the value of the temp var. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:40:22.950

您可以通过选择它。**jQuery**中的名称如下：

```
var bar = "Example"; // Example text, to be used in val().
var x = $('input[name="ASIN"]').val(bar);  
// Sets the variable x to be the value bar for the input with the name ASIN. 
```

这是一个有效的 jQuery **[jsFiddle](http://jsfiddle.net/eascR/1/)。**

* * *

在纯**Javascript ***中：

```
var bar = "Example";  
document.getElementsByName("ASIN")[0].value = bar; 
```

这是一个有效的 Javascript [**jsFiddle**](http://jsfiddle.net/eascR/)。

* * *

**请注意，虽然`document.getElementsByName`在 Firefox、Chrome 和 Safari 中得到很好的支持，但它对[浏览器的支持有限。](http://www.quirksmode.org/dom/w3c_core.html#t125)在 IE 和 Opera 中。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:40:39.517

您可以使用 jQuery[属性等于选择器](http://api.jquery.com/attribute-equals-selector/)

```
$('input[name="ASIN"]').val(foo); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:40:42.920

像这样：

```
 $('input[name="ASIN"]').val(); 
```

变量：

```
var hiddenAsin = $('input[name="ASIN"]').val(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T15:40:47.687

您可以使用任何属性过滤您的选择。

```
$('input[name=ASIN]').val("New Value") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-12T15:41:38.897

您可以使用以隐藏类型输入为目标的选择器。它应该是这样的：

```
$('input[type=hidden]'); 
```

或更简单：

```
$(':hidden'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T15:42:59.900

对于纯 JavaScript：

试试`document.getElementsByName('name')`。
请注意，cmptrgeekken 指出这对[浏览器的支持有限](http://www.quirksmode.org/dom/w3c_core.html#t125)（尽管这不会是 FF 中的油脂猴的问题）。

作为替代方案，如果该隐藏元素具有固定位置，您还可以通过您从中获得的可预测集合中的索引号访问它`knownParent.getElementsByTagName('tag')[#]` （因此表单内的第一个隐藏输入标签将是数字 0）。

另一种变体是获取（再次）`knownParent.getElementsByTagName('tag')`并遍历该集合，以查看哪个元素具有您所寻找的“名称”属性集。只需这样做：

```
var target=knownParent.getElementsByTagName('input'), L=target.length;
           while(L--){ if(target[L].name==='name'){target=target[L]; break;} }
alert(target.value); //target is now the element you seek. 
```

示例小提琴[在这里](http://jsfiddle.net/AX47e/)。

祝你好运！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-12T15:47:17.863

使用此方法

```
var inputs = document.getElementsByTagName('input');
for(var i = 0...)
{
    //go through each input and look for the name "ANSI" and the type is hidden.

     //and do your changes. 
} 
```

这是为javascript记住的。

有了这个，您应该能够在没有 ID 或分配给该特定表单的类的情况下获得该特定隐藏表单。

# vb.net - 如何使图片框随机改变其内容

> ID：15975508
> 
> 赞同：-3
> 
> 时间：2013-04-12T15:38:06.783
> 
> 标签：vb.net, winforms, picturebox

你好女士们先生们，

我是幼儿园孩子的老师。我决定在visual basic中创建一个程序，用英语教年幼的孩子颜色名称。虽然，我在编程方面的知识并不是很好。

这是我想做的

1.  按钮被点击，游戏开始。
2.  出现新按钮。
3.  标签将其文本更改为颜色名称之一。
4.  图片框将其内容更改为随机颜色，并每秒继续更改。
5.  如果他们在图片框中的图片等于标签文本颜色名称时单击按钮，他们将获得一分！

我想知道是否有人可以帮助我解决这个问题。任何帮助将不胜感激。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:06:48.387

首先，您需要创建一个您希望应用程序从中随机选择的所有颜色的列表。像这样的东西会起作用：

```
Dim colors() As Color = {Color.Red, Color.Blue, Color.Green} 
```

然后，您可以将数组排序为随机顺序，如下所示：

```
Dim r As New Random()
Dim randomColors() As Color = colors.OrderBy(Function(x) r.Next()).ToArray() 
```

然后，您可以按该顺序显示它们。要显示第一个，您可以执行以下操作：

```
PictureBox1.BackColor = randomColors(0)
Label1.Text = randomColors(0).Name 
```

# nhibernate - 在集合映射中使用 order-by 时出现“不明确的列名”异常

> ID：15975513
> 
> 赞同：1
> 
> 时间：2013-04-12T15:38:25.067
> 
> 标签：nhibernate

考虑这个代表层次结构中的节点的类：

```
public class Node
{
    public Node()
    {
        Children = new List<Node>();
    }

    public virtual int Id { get; set; }

    public virtual IList<Node> Children { get; set; }

    public virtual Node Parent { get; set; }

    public virtual int Position
    {
        get { return Parent == null ? -1 : Parent.Children.IndexOf(this); }
        set { }
    }
} 
```

映射看起来像这样（由于 NHibernate 不支持双向关联中的列表，我在这里使用了一个包，让孩子们自动确定他们的位置）：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" namespace="AmbiguousColumn" assembly="AmbiguousColumn" xmlns="urn:nhibernate-mapping-2.2">
  <class name="Node">
    <id name="Id" type="Int32">
      <generator class="identity" />
    </id>
    <bag name="Children" inverse="true" cascade="all" order-by="Position">
      <key column="Parent" />
      <one-to-many class="Node" />
    </bag>
    <many-to-one name="Parent" />
    <property name="Position" />
  </class>
</hibernate-mapping> 
```

要加载所有节点及其子节点，我将使用如下查询：

```
var nodes = session.QueryOver<Node>()
                   .Fetch(x => x.Children).Eager
                   .List(); 
```

但是，执行此操作会导致异常：

> NHibernate.Exceptions.GenericADOException：无法执行查询 [...（sql）...] ---> System.Data.SqlClient.SqlException：不明确的列名“位置”。

SQL：

```
SELECT
    this_.Id as Id0_1_,
    this_.Parent as Parent0_1_,
    this_.Position as Position0_1_,
    children2_.Parent as Parent3_,
    children2_.Id as Id3_,
    children2_.Id as Id0_0_,
    children2_.Parent as Parent0_0_,
    children2_.Position as Position0_0_
FROM
    Node this_
left outer join
    Node children2_
        on this_.Id=children2_.Parent
ORDER BY
    Position 
```

我理解为什么会发生这种情况：NH 两次加入同一个表，但使用 order 子句而不限定列名。

问题是：我怎样才能使这种情况发挥作用？诉诸而不是可能很困难，因为我想建立双向关系。

SO上有几个类似的问题，但我没有找到实际的解决方案。

* * *

**更新**：错误是特定于数据库/驱动程序的。使用 Sql Server CE（例如 SqlServerCeDriver 和 MsSqlCe40Dialect）我得到了正确的查询。使用 Sql Server（例如 Sql2008ClientDriver 和 MsSql2012Dialect）会产生不合格的查询。

根据我自己的测试，这种行为在github上的master分支中依然存在。

带有测试用例的要点：[https ://gist.github.com/anonymous/5377535](https://gist.github.com/anonymous/5377535)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:25:44.530

我想我找到了问题的原因和可行的解决方法：

问题的原因是该列称为“位置”，根据[http://msdn.microsoft.com/en-us/library/ms189822.aspx ，它是 ODBC 中的保留字](http://msdn.microsoft.com/en-us/library/ms189822.aspx)

`hbm2ddl.keywords`这与 NH属性的默认值设置为“keywords”这一事实相结合，导致 NH 不限定 order-by 子句，可能是因为它虽然“Position”是一个关键字，而不是一个列。

[http://nhforge.org/blogs/nhibernate/archive/2009/06/24/auto-quote-table-column-names.aspx](http://nhforge.org/blogs/nhibernate/archive/2009/06/24/auto-quote-table-column-names.aspx)

解决方法：

1) 为属性使用不同的名称 - 不是关键字的名称。在这种情况下，`PositionInParent`可以毫无问题地工作。

2) 使用反引号正确引用 order by 子句。

```
<bag name="Children" inverse="true" cascade="all" order-by="`Position`"> 
```

或者您选择的映射 API 中的任何内容，例如通过代码映射：

```
cls.Bag(x => x.Children,
        map =>
        {
            map.Inverse(true);
            map.Cascade(Cascade.All);
            map.Key(key => key.Column("Parent"));
            map.OrderBy("`Position`"); // note that you must not use a lambda expression in this case
        },
        map => map.OneToMany()); 
```

3）禁用关键字自动导入，即。设置`hbm2ddl.keywords`为`none`（`keywords`也不行`auto-quote`）：

```
<property name="hbm2ddl.keywords">none</property> 
```

或以编程方式：

```
config.DataBaseIntegration(db => db.KeywordsAutoImport = Hbm2DDLKeyWords.None); 
```

您仍然可以通过`SchemaMetadataUpdater.QuoteTableAndColumns`在构建会话工厂之前调用来自动引用保留字。

```
SchemaMetadataUpdater.QuoteTableAndColumns(config); 
```

我现在将坚持使用方法 3，因为它是迄今为止最轻松的。

# python - 无法在脚本中导入导入日期时间

> ID：15975517
> 
> 赞同：9
> 
> 时间：2013-04-12T15:38:33.813
> 
> 标签：python, datetime, python-import

我无法从 python 脚本导入日期时间，但我可以从终端命令行导入。

```
1)import datetime
2)From datetime import datetime

month = datetime.datetime.now().strftime("%B")
print month 
```

这些代码行在命令行中一一输入时起作用有什么想法吗？

我在mac上运行2.7

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-12T15:40:32.717

您将*脚本* `datetime.py`命名为，位于`/Users/ripple/Dropbox/Python/datetime.py`。这是导入而不是标准库模块，因为主脚本的目录是 Python 查找导入的第一个位置。

您不能为您的脚本提供与您尝试导入的模块相同的名称。重命名您的脚本。确保您还删除了`/Users/ripple/Dropbox/Python/datetime.pyc`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-05-13T12:46:56.890

这是正在发生的事情：

1.  你命名你的文件`datetime.py`进行测试
2.  然后你在`import datetime`里面写，因为那是你想尝试的模块

运行文件时会发生什么：

3.  Python 首先在本地目录中查找名为`datetime`
4.  由于 Python 只找到你的原始文件，它会创建一个名为 的空模块文件`datetime.pyc`，因为它希望你在它的基础上进行构建

幸运的是，StackOverflow 的好心人让您意识到了这个命名错误，并且您将`datetime.py`文件重命名为其他内容。但是令人困惑的是，您**仍然**会遇到错误，并且挫败感会慢慢积聚...

# 解决方案：

1.  始终确保您的文件名不等于您要导入的任何 Python 模块
2.  如果您仍然忘记，请确保删除或重命名*本地*`.py`脚本*和*本地`.pyc`文件。这应该可以解决您的问题。:)

这是一个常见错误的原因是人们喜欢在编程时测试东西。当他们这样做时，大多数人的自然倾向是制作一个与他们想要测试的东西同名的脚本。然而，这是大多数 Python 开发人员遇到的第一个*问题*。如果那些设计 Python 的酷人在制作他们的系统之前阅读了 Donald Norman，这永远不会成为问题。但事实上，我们只需要在命名文件之前调整 Python 模块系统的工作方式即可。注意：Python 模块系统以这种方式工作仍有一些原因，但这并不妨碍它对初学者造成混淆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T16:08:24.847

您的第二行是覆盖 python 在以后的代码中理解“日期时间”一词的含义。您应该使用

```
import datetime                 # the complete module
month = datetime.datetime.now().strftime("%B") 
```

或者

```
from datetime import datetime   # one part of the main module
month = datetime.now().strftime("%B") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-30T19:00:57.890

在保存脚本时，请确保给它指定不同的名称（***日期时间***除外）并将其保存在 c:/Python34/Scripts 中；我相信这会奏效。

# asp.net-mvc - 使用 url 值作为路由值中的变量

> ID：15975518
> 
> 赞同：3
> 
> 时间：2013-04-12T15:38:34.053
> 
> 标签：asp.net-mvc, asp.net-mvc-3, api, asp.net-mvc-routing

我想在 ASP.NET MVC 的不同控制器中声明 API 的多个版本。有可能做这样的事情吗？

```
routes.MapRoute(
    "Default", // Route name
    "API/{version}/{action}/{id}", 
        new { 
             controller = "APIv{version}", 
             action = "Index", 
             id = UrlParameter.Optional 
        } 
    ); 
```

或者

```
routes.MapRoute(
    "Default", // Route name
    "API/{version}/{action}/{id}", 
        new { 
             controller = "APIv" + version, 
             action = "Index", 
             id = UrlParameter.Optional 
        } 
    ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:51:52.757

我通过将不同的 api 版本移动到不同的区域来实现它

版本1：

```
 public class AreaRegistration : PortableAreaRegistration
    {
        public override string AreaName
        {
            get { return "Api.v1"; }
        }

        public override void RegisterArea(System.Web.Mvc.AreaRegistrationContext context)
        {
            context.MapHttpRoute(
                    name: "Api.v1_Default",
                    routeTemplate: "api/v1/{company}/{action}",
                    defaults: new { controller = "Company", action = "Employees" }
            );
        }
    } 
```

版本 1.1：

```
 public class AreaRegistration : PortableAreaRegistration
        {
            public override string AreaName
            {
                get { return "Api.v1.1"; }
            }

            public override void RegisterArea(System.Web.Mvc.AreaRegistrationContext context)
            {
                context.MapHttpRoute(
                        name: "Api.v1_1_Default",
                        routeTemplate: "api/v1.1/{company}/{action}",
                        defaults: new { controller = "Company", action = "Employees" }
                );
            }
        } 
```

请注意使用了来自 MvcContrib 的 PortableAreaRegistration。

# java - 检测服务器端 FIN 数据包

> ID：15975519
> 
> 赞同：1
> 
> 时间：2013-04-12T15:38:34.633
> 
> 标签：java, tcp

我有以下Java代码：

```
Socket s = new Socket();
s.connect(mySockAddr, myTimeout); 
```

假设我不使用套接字，我需要在服务器端连接关闭（`FIN`或`RST`数据包）发生时立即检测它。
例如，虽然一个线程检查套接字状态，或者拦截`FIN`/`RST`数据包......

我怎样才能检测到它？
我已经尝试过`printWriter.checkError()`, `socket.isConnected()`,`socket.isClosed()`方法，但没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:45:31.513

我知道检测对方是否关闭连接的唯一方法是尝试从输入流中读取。从关闭的套接字读取将返回 -1。那是您的通知，将不再有要阅读的内容。

至于其他功能，`s.isConnected()`告诉你是否成功地`connect()`编辑了套接字，并`s.isClosed()`告诉你是否*关闭*了它。它没有告诉你对方做了什么。

# java - POST 数据到另一台服务器并检索值

> ID：15975520
> 
> 赞同：0
> 
> 时间：2013-04-12T15:38:42.237
> 
> 标签：java, servlets

我正在尝试编写一个 post 方法，它将键/值对发布到另一台服务器并捕获响应。出于安全原因，键/值对存在并且是一个简单的帖子。响应以 XML 形式返回 - 理想情况下，我希望它也映射到一个对象。

这是我到目前为止所做的：

首先，我检查了它是否可以使用简单的形式：

```
<form action="https://somesite.com/feed" method="post">
    <input type="hidden" name="key" value="value" /> 
    <input type="submit">
</form> 
```

这成功返回了我期望的 XML。

然后我尝试在代码中这样做：

```
HttpClient client = new HttpClient();

    BufferedReader br = null;

    PostMethod method = new PostMethod("https://somesite.com/feed");
    method.addParameter("key", "value");

    try {
        int returnCode = client.executeMethod(method);

        br = new BufferedReader(new InputStreamReader(method.getResponseBodyAsStream()));
        String readLine;
        while (((readLine = br.readLine()) != null)) {
            System.err.println(readLine);
        }

        StringWriter stringWriter = new StringWriter();
        IOUtils.copy(method.getResponseBodyAsStream(), stringWriter);
        System.out.println(stringWriter.toString());

    } catch (Exception e) {
        // TODO: handle exception
    } finally {
        method.releaseConnection();
        if(br != null) try { br.close(); } catch (Exception fe) {}
    } 
```

在 client.executeMethod，我得到了一个 ConnectException: Connection timed out。

您可以提供的任何建议将不胜感激。

使用不同的域 http 和 https 是否有任何问题 - 即如果我从 http 页面或 https 页面调用此 post 方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:46:23.887

添加编码：

```
new InputStreamReader(method.getResponseBodyAsStream(), "windows-1252") 
```

`br.close()`前`method.releaseConnection()`

`IOUtils.copy`来自已结束流的副本。要么不使用它，要么更好地使用它而不是你自己的读取循环。

在 br.close() 或等效项之后，使用 stringWriter，因为所有内容都会被刷新。

# jquery - ScrollToFixed 滚动问题

> ID：15975521
> 
> 赞同：2
> 
> 时间：2013-04-12T15:38:48.117
> 
> 标签：jquery, css, scrollto, sidebar

我对 scrollToFixed 脚本有疑问。[https://github.com/bigspotteddog/ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed) 这是一个案例：[http](http://dash.com.pl/CTP/gallery.html) ://dash.com.pl/CTP/gallery.html 这个脚本工作正常，但是当我向下滚动并向上滚动后，出现一个洞.

这是一个给出限制的脚本：

```
$(document).ready(function() {
$('.sidebar').scrollToFixed({
    marginTop: 0,
    limit: $('.footer').offset().top - $('.sidebar').height() - 20
});
}); 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:55:14.520

好的。这是一个很好很酷的插件。我想我找到了解决方案。

您可以使用 div 包装，如下所示。

**HTML**

```
<div id="sidebar-wrapper">
 <aside class="sidebar"></aside>
</div> 
```

然后添加css来浮动div，

**CSS**

```
div#sidebar-wrapper{
 float:right;
} 
```

这必须工作！试试这个，让我知道。

# asp.net-mvc - ValidationSummary 不适用于动态 cshtml 页面

> ID：15975532
> 
> 赞同：1
> 
> 时间：2013-04-12T15:39:51.130
> 
> 标签：asp.net-mvc, razor, validationsummary

我有一个带有列表元素的模型。我在运行时创建我的页面，使用“foreach”循环在页面中插入所有列表元素。我还有一个要验证的字符串值（**model.trayCapacity**），检查它是否不为空：

```
[Required(ErrorMessage = "*")]
public string trayCapacity{ get; set; }
public IList<Separatore> SeparatoriLongitudinali{ get; set; } 
```

这是 .cshtml 代码：

```
@using (Html.BeginForm("Optional", "Config", FormMethod.Post, new { id = "storeDataForm" }))
{          
    @Html.ValidationSummary(true)

    foreach (Separatore sepLong in Model.SeparatoriLongitudinali)
    {
         @Html.TextBoxFor(x => sepLong.Quantity) 
    }

    <table> 
        <tr class="webgrid-row-style">                                
            <td>Tray Capacity:</td>
            <td>@Html.TextBoxFor(model => model.trayCapacity)</td>  
            <td>@Html.ValidationMessageFor(model => model.trayCapacity)</td>
        </tr>
    </table>
    <div align="right">
        <input type="submit" value="buttonNext" />
    </div>  
} 
```

有`SyntaxError: JSON.parse: unexpected character, in jquery.js (version 1.9.1)`, 页面继续而不检查值。

ValidationSummary 仅在我切断**“foreach”**代码时才有效。这是为什么？

# c++ - 犰狳：乘法时出错

> ID：15975535
> 
> 赞同：1
> 
> 时间：2013-04-12T15:40:11.710
> 
> 标签：c++, xcode, wrapper, armadillo

我在一个项目中使用犰狳，总的来说它运行良好。该项目是基于 Xcode 的，到目前为止，我设法让它工作的唯一方法是使用（添加 /usr/include/ 的标头搜索路径似乎不起作用）：

```
#include "/usr/include/armadillo" 
```

好吧，现在我第一次尝试做一些矩阵乘法，我做了我能想到的最简单的事情，以确保没有其他原因。

```
mat aa = eye(3,3)*eye(3,3); 
```

但这给了我链接器错误：

* **"_wrapper_dgemm_"，引用自：**

```
void arma::blas::gemm<double>(char const*, char const*, int const*, int const*, int const*, double const*, double const*, int const*, double const*, int const*, double const*, double*, int const*)in DynamicGridPoint.o 
```

有谁知道这可能是什么原因造成的？示例（包括矩阵乘法）从命令行编译得很好，所以我认为这与我的 xcode 设置有关

***根据迄今为止的答案进行编辑***

所以我尝试通过在项目的“其他链接器标志”中包含 -larmadillo 并将“/usr/lib”添加到标题和库搜索路径来链接到运行时库，但我收到链接错误：'ld : 找不到 -larmadillo 的库

关于为什么会发生这种情况的任何想法？

/usr/lib 包含以下（相关）文件：

*   libarmadillo.3.80.2.dylib
*   libarmadillo.3.dylib
*   libarmadillo.dylib

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:27:47.883

您没有链接到犰狳运行时库（例如 -larmadillo）。

要解决此问题，请将 Xcode 配置为与犰狳运行时库链接，或编辑犰狳的配置使其不使用其运行时库。

后者是通过编辑“include/armadillo_bits/config.hpp”并注释掉 ARMA_USE_WRAPPER 来完成的。然后，您需要直接链接 lapack 和 blas（例如 -llapack -lblas），或使用 Accelerate 框架（例如 -framework Accelerate）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:47:36.923

您需要链接犰狳共享库。在示例中的 Makefile 中，要制定的规则是：

```
all: example1 example2                                                          

example1: example1.cpp  
  $(CXX) $(CXXFLAGS)  -o $@  $<  $(LIB_FLAGS) 
```

`LIB_FLAGS`之前定义为

```
LIB_FLAGS = -larmadillo $(EXTRA_LIB_FLAGS)

ifeq (macos,macos)                                                              
  EXTRA_LIB_FLAGS = -framework Accelerate                                     
endif 
```

因此，在您的 XCode 项目中，您需要找到一种包含 libarmadillo 的方法。Accelerate 框架是可选的；我从来没有使用过它。

# r - 如何从 gls 输出中提取参数

> ID：15975536
> 
> 赞同：0
> 
> 时间：2013-04-12T11:43:29.523
> 
> 标签：r

在下面给出的 gls 输出中，如何从 gls 对象中提取参数估计值 1.000000 3.913972 10.684698 11.350910 26.476561 27.255072 并将它们分配给另一个变量？

```
> m
    X     Y  F
1   1  1.07  1
2   1  1.01  1
3   1  0.99  1
4   1  1.09  1
5   1  0.94  1
6   1  1.00  1
7   1  1.01  1
8   1  0.98  1
9   1  1.00  1
10  1  1.03  1
11  4  3.66  4
12  4  3.75  4
13  4  3.77  4
14  4  3.92  4
15  4  4.08  4
16  4  3.99  4
17  4  3.95  4
18  4  4.10  4
19  4  3.88  4
20  4  4.04  4
21 10 10.13 10
22 10 10.20 10
23 10  9.77 10
24 10 10.28 10
25 10  8.71 10
26 10  9.79 10
27 10  9.82 10
28 10  9.85 10
29 10 10.07 10
30 10  9.63 10
31 20 20.22 20
32 20 19.46 20
33 20 19.02 20
34 20 20.06 20
35 20 20.94 20
36 20 19.92 20
37 20 19.96 20
38 20 20.04 20
39 20 19.67 20
40 20 19.96 20
41 30 31.04 30
42 30 31.40 30
43 30 31.84 30
44 30 30.77 30
45 30 32.13 30
46 30 31.17 30
47 30 30.36 30
48 30 29.95 30
49 30 30.74 30
50 30 30.67 30
51 40 41.14 40
52 40 40.29 40
53 40 42.77 40
54 40 38.36 40
55 40 39.17 40
56 40 39.61 40
57 40 40.73 40
58 40 39.42 40
59 40 40.72 40
60 40 40.24 40
> Fit.gls <- gls(Y ~ X,weights=varIdent(form = ~ 1 | F),data=m)
> summary(Fit.gls)
Generalized least squares fit by REML
  Model: Y ~ X 
  Data: m 
       AIC      BIC    logLik
  78.96207 95.44562 -31.48104

Variance function:
 Structure: Different standard deviations per stratum
 Formula: ~1 | F 
 Parameter estimates:
        1         4        10        20        30        40 
 1.000000  3.913972 10.684698 11.350910 26.476561 27.255072 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:08:32.647

这会给你想要的吗？

```
x <- Fit.gls$model
coef(x, unconstrained=FALSE) 
#  varStruct.4 varStruct.10 varStruct.20 varStruct.30 varStruct.40 
#     3.913972    10.684698    11.350910    26.476561    27.255072 
```

# emacs - 如何为 Mx 颜色主题定义全局设置键- RET

> ID：15975539
> 
> 赞同：0
> 
> 时间：2013-04-12T15:40:20.107
> 
> 标签：emacs, elisp, emacs24

我无法找到任何有关如何将 global-set-key 与`M-x color-theme-<TAB> RET`. 我尝试了几种变体，但无济于事。是否可以在颜色主题的末尾插入一个选项卡？

```
(global-set-key "\C-ct" 'color-theme<TAB><RET>) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:34:18.647

这个键盘快捷键可以拉出一个类似的屏幕，可以用鼠标单击。

```
(global-set-key (kbd "<f5>") 'color-theme-select) 
```

* * *

在相关说明中：

Aquamacs 2.4 禁用工具下的颜色主题菜单栏条目。因此，如果有人想启用它，请将其插入 Preferences.el 或 init.el （如果你有的话）：

```
(easy-menu-add-item nil color-theme-entry-path "--")
(easy-menu-add-item  nil color-theme-entry-path
           ["Color Themes" color-theme-select t]) 
```

Aquamacs 2.4 在其初始化的其他地方已经有了这个：

```
(require 'easymenu) 
```

或者，用户可以`;;`从`/Applications/Aquamacs.app/Contents/Resources/lisp/aquamacs/color-theme.el`第 513 到 516 行删除。

# css - 是否可以将嵌套的 SASS 选择器遍历到父选择器？

> ID：15975544
> 
> 赞同：0
> 
> 时间：2013-04-12T15:40:29.383
> 
> 标签：css, sass

只是关于 SASS 选择器嵌套的问题，所以我在一个嵌套跨度内，我想将`:hover`伪应用到以便不透明度更改为 0，尽管当父标签获取 class 时，我也想使用这种样式`is-active`。现在，我会将`is-active`类移到跨度之外并重新应用样式，但我想知道您能否像遍历一样从嵌套样式中提升一个级别？

**我的示例 SASS：**

```
.btn-lang {
    // styles...

    > span {
        // styles...

        &:hover { // i want to use this when btn-lang  has class is-active
            opacity: 0;
        }
    }

    // right now I would add these styles here but seems there could be an easier method?
    &.is-active {
        > span {
            &:hover {
                opacity: 0;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:34:21.047

您想在一个构造中重用两个选择器 (`.btn-lang`和)。`span`这在 SASS 中是不可能的。

这种情况是 extends 真正闪耀的地方：

```
// Declaring a reusable extend that will not appear in CSS by itself.
%span-with-hover-on-active-element {
    & > span {
        /* styles for span under btn-lang */ }
    &.is-active > span:hover {
        opacity: 0; } }

.btn-lang {
    /* styles for btn-lang */
    // Apply the span-on-hover thing.
    @extend %span-with-hover-on-active-element; } 
```

它使复杂的代码可重用且更易于阅读。

生成的 CSS：

```
.btn-lang > span {
  /* styles for span under btn-lang */
}
.is-active.btn-lang > span:hover {
  opacity: 0;
}

.btn-lang {
  /* styles for btn-lang */
} 
```

# delphi - 如何在此代码中向 dbgrid 显示我的查询？

> ID：15975556
> 
> 赞同：0
> 
> 时间：2013-04-12T15:41:12.687
> 
> 标签：delphi, firebird, dbgrid, zeos

您好，此代码是否可以将搜索结果以类似样式的列表显示到 tdbgrid？（例如，如果我搜索 john，某个字段中包含 john 的所有数据都将显示到 tdbgrid）

```
procedure Tspcb.dccolbtnClick(Sender: TObject);
begin
  zdctable.First;
  while not zdctable.EOF do
  begin
     if (zdctable.FieldByName('Collector').AsString = dcedit.Text)
     then begin
        cn.Caption := zdctable.FieldByName('Client_Name').AsString;
        col.Caption := zdctable.FieldByName('Collector').AsString;
        pay.Caption := zdctable.FieldByName('Daily_Payment').AsString;
        date.Caption := zdctable.FieldByName('Date').AsString;
        ddate.Caption := zdctable.FieldByName('Due_Date').AsString;
        id.Caption := zdctable.FieldByName('ID').AsString;
        la.Caption := zdctable.FieldByName('Loan').AsString;
        tc.Caption := zdctable.FieldByName('Total_Collectibles').AsString;
     end;

     ShowMessage('click ok for next profile');
     zdctable.Next;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:44:38.793

只需添加一个数据源，将属性数据集设置为您的数据集 zdctable，将一个 DBgrid 添加到您的表单并将属性数据源设置为数据源。

您需要的唯一代码是 dcedit 的 OnchangeEvent

```
procedure TForm3.dceditChange(Sender: TObject);
begin
   zdctable.FilterOptions:=[foCaseInsensitive]; // if wished
   zdctable.Filtered := Length(dcEdit.Text) > 0;
   if zdctable.Filtered then
      // zdctable.Filter := 'Collector like ' + QuotedStr('%' + dcEdit.Text + '%') 
      zdctable.Filter := 'Collector like ' + QuotedStr('*' + dcEdit.Text + '*') // Zeos- Syntax
   else  zdctable.Filter := '';
end; 
```

# c - 时间的宏观问题

> ID：15975561
> 
> 赞同：0
> 
> 时间：2013-04-12T15:41:32.167
> 
> 标签：c, macros

我正在寻找一种创建“无动作”计时的好方法（CPU 无用的计时操作）。

在这里解释我的问题是我想更改为宏的代码：

```
int main (void)
{
  int i=0; 

  printf("Start\r\n");
  for(i=0;i<1000;i++); //LINE TO CHANGE TO A MACRO
  printf("Delayed trace\r\n");
  return 0;
} 
```

你有什么主意吗 ？

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:02:52.890

定义这样一个宏的一般方法是：

```
#define DELAY(amount)       \
do {                        \
    /* method of delay */   \
} while (0) 
```

在你的情况下：

```
#define DELAY(amount)             \
do {                              \
    int i;                        \
    for (i = 0; i < amount; ++i); \
} while (0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:48:58.327

如果您希望在某些循环迭代方面引入延迟，您可以使用

```
#define INTRODUCE_DELAY(count) for(int i = 0; i < count; i++); 
```

您可以通过编译器开关修改它以调用`sleep`类似`us`的，如下所示。如果你不能`i`在`for`循环中声明，我们可以定义一个小函数（可能`inline`如下所示

```
#ifdef WIN32
void mysleep(int count)
{
    int i;
    for(i = 0; i < count; i++);
}
#define INTRODUCE_DELAY(count) mysleep(count);
#else
#define INTRODUCE_DELAY(count) sleep(count);
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:49:56.423

我认为你需要睡眠功能，（虽然只能在 unix/linux 上工作）

```
#include <unistd.h>
#define DELAY(SEC) sleep(SEC) 
```

windows中一定有类似的功能。

# sql-server - SQL Server 2012 -- xp_fileexist 在本地机器上检查文件时返回 0

> ID：15975562
> 
> 赞同：1
> 
> 时间：2013-04-12T15:41:35.707
> 
> 标签：sql-server

SQL 服务器存在于我物理登录的同一台机器上，并且 xp_fileexist 无法识别 D 驱动器（**不是**网络驱动器）上的任何文件。我已经配置了 xp_cmdshell 并重新启动了 SQL 服务器实例。还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-10T11:31:23.097

是的，我们遇到了同样的问题。在 SQL Server 2008 上，我们的旧`xp_fileexist`代码运行良好，但在 SQL Server 2012 上......*不行*。

如果我们`xp_fileexist`以自己的身份（具有管理员权限）运行该命令，但当我们以 SQL Server 用户的身份运行该命令时（该用户不作为 Active Directory 用户存在），它会起作用。即使我们更改了该文件夹的安全性以提供`Everyone`完全权限，`xp_fileexist`也会失败，总是返回 0，就好像该文件夹中的文件不存在一样。

但是，起作用的是在存储过程中使用*，*`dir`并测试文件是否以这种方式存在。（是的，我知道......我自己都在翻白眼......这很狡猾......）

[这是我根据本网站上的建议](https://social.msdn.microsoft.com/Forums/vstudio/en-US/e98561b4-0d5c-45e5-989c-a042f7a3b298/check-file-exists-or-not-using-sql-server-2012?forum=sqlintegrationservices)编写的存储过程：

```
CREATE PROCEDURE [dbo].[DoesFileExist]
( 
    @directoryName NVARCHAR(500),
    @filename NVARCHAR(500)
)
AS
BEGIN
    --  Does a file exist in a particular folder ?
    --  
    --      EXEC [dbo].[DoesFileExist] 'D:\MyFiles', 'SomeExcelFile.xls'
    --
    DECLARE @bFileExists INT

    DECLARE @cmd nvarchar(300);
    SELECT @cmd = 'dir ' + @directoryName + '\' + @filename;

    DECLARE @dir TABLE ([output] varchar( 2000 ))

    INSERT INTO @dir
    EXEC master.dbo.xp_cmdshell @cmd;

    --  Uncomment the following line, if you want to see what 
    --  a "dir" looks like from SQL Server !!    
    --  SELECT * FROM @dir          

    if EXISTS(SELECT * FROM @dir WHERE [output] LIKE '%' + @filename + '%' )
    BEGIN
        --  File *was* found in this folder
        SET @bFileExists = 1  
    END
    ELSE 
    BEGIN 
        --  File was NOT found in this folder
        SET @bFileExists = 0
    END

    SELECT @bFileExists
END 
```

您可以简单地通过传递文件夹名称和文件名来调用此 SP：

```
EXEC [dbo].[DoesFileExist] 'D:\MyFiles', 'SomeExcelFile.xls' 
```

是的，奇怪的是，对于无法使用`xp_fileexist`.

请记住，要使用此代码，您的 SQL Server 用户必须具有使用权限`xp_cmdshell`：

```
GRANT EXECUTE ON xp_cmdshell TO YourSQLServerUser 
```

# java - ArrayList 将项目作为字符串删除

> ID：15975565
> 
> 赞同：-1
> 
> 时间：2013-04-12T15:41:45.190
> 
> 标签：java, arraylist

我目前有一个 Arraylist，如下所示。

```
T[] v = { v1,v2, v3, v4 }; 
```

我还有另一个数组列表：

```
removeT[] x = {v2, v4} 
```

从第二个开始，我希望将这两个值从初始数组列表中删除。需要哪些步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:52:34.057

最好的方法是这样的：

```
for (String each : removeT) {
    if(v.equals(each)){
        v.remove(each)
    }
} 
```

[您可以在此处](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)找到有关 ArrayList 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:52:49.437

我不知道任何可以直接在数组上执行此操作的操作，因此我必须将数组转换为列表的解决方案：

```
 String[] v = new String[]{ "v1", "v2", "v3", "v4" };
    String[] x = new String[]{ "v1", "v4" };

    List<String> list1 = new ArrayList<String>();
    list1.addAll(Arrays.asList(v));

    List<String> list2 = Arrays.asList(x);

    list1.removeAll(list2); 
```

然后在完成后将列表转换回数组。

直接在数组上执行此操作的问题是您最终会得到空条目，这可能会产生其他问题，具体取决于您的使用情况。

# php - PHP：strcmp 不起作用？

> ID：15975566
> 
> 赞同：0
> 
> 时间：2013-04-12T15:41:52.637
> 
> 标签：php, passwords, strcmp

我试图从文本文件中读取密码，并将其与用户输入的密码进行比较。但是，尽管在我看来这两个词完全一样，但我的脚本还说了别的：

```
$user = $_POST['user'];
$pass = $_POST['pass']; //HTML form element with type="password"

$line;
$retrievedPassword = "";

$f = fopen("data/abc.log", "r");

// Read line by line until end of file
while(!feof($f)) { 
    $line = fgets($f);
    if (startsWith($line, $user)) {
      break; //password found
    }
}

fclose($f);

$var = explode(":", $line);
$retrievedPassword = $var[1];

echo $pass." ".$retrievedPassword; // example: password password

if (strcmp($pass, $var[1]) == 0) {
    header('Location: user.php'); //never the case
}else {
    //header('Location: index.php');
}

function startsWith($haystack, $needle)
{
    return !strncmp($haystack, $needle, strlen($needle));
} 
```

密码是加密的还是类似的，或者为什么这个代码不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:47:02.910

是密码哈希。您不需要使用 strcmp 。简单的方法是：

```
if($pass == $var[1])) 
```

玩得开心

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:48:54.857

从文件中读取时，总是假设“混乱”在那里。特别是文本文件通常具有不同的行分隔符，具体取决于用于编辑它们的操作系统的哪个程序 - 历史上 Windows 使用 CRLF、Mac CR 和 *nix 变体 LF，但像 Notepad2 和 Notepad++ 这样的现代编辑器允许您配置它们。

在分解冒号分隔符上的行之前，使用 trim() 删除任何无关的空格，如过时的行分隔符和尾随空格/制表符。

作为调试的旁注：请记住，您正在将 HTML 输出到浏览器，它会默默地折叠所有空格。要查找 2 个字符串不相同的原因，请将 echo 语句包含在撇号 ( `echo "'$sample1' '$sample2'";`) 中，或者按照 Rocket Hazmat 的建议使用 var_dump，或者在一个`<pre>`部分中输出。此外，如果字符串在输出中看起来相同，请使用 strlen 仔细检查以了解其中没有“混乱”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:53:40.937

使用 var_dump 检查 $haystack 和 $needle 中的内容

另请注意，您的 startsWith() 已损坏 - 如果该行是“bookworm:bob”但用户输入了密码“book”，它将返回 true。您应该（至少！）添加这样的一行：

```
function startsWithPassword($haystack, $needle)
{
    $needle .= ':';
    return !strncmp($haystack, $needle, strlen($needle));
} 
```

因此，您尝试将 'enteredpassword:' 与该行的开头进行匹配。

当然，如果用户在他们的密码中输入冒号，你仍然会被卡住......

如果您查找并了解加盐和散列密码，那么您将成为一个更快乐的编码员，拥有一个更安全的网站！

# python-2.7 - Ubuntu 10.04 上的 Python 2.7.4，导入 readline 错误（尝试了很多方法都行不通）

> ID：15975567
> 
> 赞同：2
> 
> 时间：2013-04-12T15:41:52.990
> 
> 标签：python-2.7, ubuntu-10.04, python-import

如标题所示，我的系统版本是 Ubuntu 10.04。Python 的默认版本是 2.6.5。当我在命令行中启动 python2.6 并

```
import readline 
```

这很好用。

然后我编译 python 2.7.4（从 www.python.org/getit 下载）。噩梦开始了。

这是我安装 Python 2.7.4 的方式：

```
./configure --prefix=/usr
make
su root
make install 
```

然后尝试导入 readline：

```
Python 2.7.4 (default, Apr 11 2013, 11:17:09) 
[GCC 4.4.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import readline
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named readline 
```

谷歌搜索，首先我所做的是

```
sudo apt-get install libreadline5-dev
sudo ldconfig 
```

重装，不行。

然后尝试安装libpython并重新安装python 2.7.4，仍然无法正常工作。但奇怪的是，在“make”命令的最后几行，信息是这样的：

```
Python build finished, but the necessary bits to build these modules were not found:
_bsddb             _sqlite3           bsddb185        
bz2                dbm                gdbm            
sunaudiodev                                           
To find the necessary bits, look in setup.py in detect_modules() for the module's name. 
```

似乎没有readline，但它不起作用！

顺便说一句，这里有另一个信息可能会有所帮助：

```
/usr/bin/python -c "import readline; print readline.__doc__"
Importing this module enables command line editing using GNU readline. 
```

任何人都可以帮助我...提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:40:03.380

我又试了一次，安装了这些数据包：

```
sudo apt-get install build-essential
sudo apt-get install libreadline5-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev 
```

然后删除有关 python2.7 的所有内容，包括 /usr/local/bin、/usr/bin 等并重新安装。

这次成功了...

好的...希望这会帮助那些和我有同样问题的人。

# django - 在 /login/ 处配置不正确 导入身份验证后端后端时出错。EmailAuthBackend：“没有名为后端的模块”

> ID：15975573
> 
> 赞同：1
> 
> 时间：2013-04-12T15:42:05.243
> 
> 标签：django, authentication, login

我正在研究 Django 项目，我搜索了一段时间如何登录并发现最简单的方法是“django.contrib.auth”。所以我将我的登录视图添加到 urls.py ：

```
 url(r'^login/$','django.contrib.auth.views.login',{'template_name': 'login.html'}), 
```

这是我的模板：

```
<html>
<head>
    <title>Django Bookmarks - User Login</title>
</head>
<h1>User Login</h1>
{% if form.errors %}
    <p>Your username and password didn't match.
        Please try again.</p>
{% endif %}
<form method="post" action=".">{% csrf_token %}
    <p><label for="id_username">Username:</label>
        {{ form.username }}</p>
    <p><label for="id_password">Password:</label>
        {{ form.password }}</p>
    <input type="hidden" name="next" value="/" />
    <input type="submit" value="login" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:22:50.537

您似乎在 settings.py 中添加了一些自定义后端

在 shell 上试​​试这个：

```
from django.conf import settings

settings.AUTHENTICATION_BACKENDS 
```

似乎 django 正在尝试导入一个名为`backends`您没有的模块，因为您正在犯一些路径错误。

如果在 app`EmailAuthBackend`中命名的模块中定义，则需要添加到.`backends.py``some_app``some_app.backends.EmailAuthBackend``AUTHENTICATION_BACKENDS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-18T09:47:31.373

在早期的 Django 版本中，这可能是由于某些`backends.py`. 我想创建一个激活电子邮件，然后`AUTHENTICATION_BACKENDS = ['authentication.backends.EmailBackend']`在我的文件中使用，`settings.py`然后我创建了一个名为 的文件`backends.py`，然后我删除了`backeds.py`（因为在早期的 Dj 版本中你不需要它，至少用于电子邮件验证）我忘了`AUTHENTICATION_BACKENDS = ['authentication.backends.EmailBackend']`从我的`settings.py`，这导致了错误。

# c++ - Back_inserter 或 push_back

> ID：15975575
> 
> 赞同：9
> 
> 时间：2013-04-12T15:42:23.927
> 
> 标签：c++

只是一个简单的问题 - 哪个更好用于将字符串添加到 a 的末尾`vector<string>`，`back_inserter`或者`push_back`？主要是，哪个工作得更快（我正在处理大量数据，所以边际差异实际上很重要），主要区别是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T15:45:14.537

两者不等价。`std::back_inserter`例如，当您需要将输入迭代器传递给算法时，您可以使用它。`std::vector<std::string>::push_back`在这种情况下不是一个选择。例如

```
std::vector<std::string> a(100, "Hello, World");
std::vector<std::string> b;
std::copy(a.begin(), a.end(), std::back_inserter(b)); 
```

# android - Android 谷歌地图缩放以适 合标记和当前位置

> ID：15975576
> 
> 赞同：3
> 
> 时间：2013-04-12T15:42:31.423
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在尝试使用 Google 地图为我的应用创建一个自定义的“我的位置”按钮。

我想要做的是将地图围绕用户的位置居中，这已经完成并且可以完美地工作，但也想放大到足以看到我选择的标记（这实际上是最接近的我在内存中的一组标记，但这现在并不重要）。

我无法在`zoom`这里找到该变量的工作方式。如果我知道我要显示的标记距离我 0.5 GPS 单位，我如何以在其边界上包含该标记的方式将地图居中于我周围？我还会使用填充来确保它完全适合地图。

```
LatLng my_coordinates = ...;
LatLng closest_mark = ...;

map.animateCamera(CameraUpdateFactory.newLatLng(my_coordinates)); 
```

所以现在我想修改该代码，不仅将位置居中，`my_coordinates`而且确保缩放`closest_mark`适合视口

```
CameraUpdateFactory.newLatLngBounds( ?? , /*padding*/); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:58:01.340

我认为 api 中没有特定的缩放变量可以与地图中的点一起控制。（而 LatLngBounds 只接受右上和左下边界并相应地为您提供视图）。

我相信你能做的就是用一点几何图形。如果您的标记非常靠近您的位置（您可以将其视为一个矩形），请获取两者之间的距离并以相同的距离在相反方向上推断该距离（如果您想要一些填充，则乘以一个小因子）以获得其他坐标，然后就可以得到右上和左下坐标（简单几何）。

如果您的标记很远并且地球表面出现在图片中，您可能必须使用[haversine公式（大圆距离）](http://www.movable-type.co.uk/scripts/latlong.html)。

希望这可以帮助。

# android - MultipartEntity 图片未上传

> ID：15975577
> 
> 赞同：3
> 
> 时间：2013-04-12T15:42:35.283
> 
> 标签：android

我想使用 MultipartEntity 上传图片。我尝试了下面的代码。

我没有收到任何错误，但图片没有上传。我有足够的上传权限

PHP

```
<?php

    //Receive the data from android
    $name = $_POST['name'];
    $data = $_POST['data'];

    //Receive the file
    $file = $_FILES['image']

    move_uploaded_file($_FILES['image']['tmp_name'], "User_files/".$_FILES['image']['name']);
    //process the data

    //return response to the server

    echo json_encode(
                array(
                    'result'=>'success',
                    'msg'=>'Report added successfully.'
                    )
                );

                ?>

public void upload() throws Exception {
        //Url of the server
        String url = "URL";
        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost(url);
        MultipartEntity mpEntity = new MultipartEntity();
        //Path of the file to be uploaded
        String filepath = Environment.getExternalStorageDirectory()+"/a.png";
        File file = new File(filepath);
        ContentBody cbFile = new FileBody(file, "image/*");         

        //Add the data to the multipart entity
        mpEntity.addPart("image", cbFile);
        mpEntity.addPart("name", new StringBody("Test", Charset.forName("UTF-8")));
        mpEntity.addPart("data", new StringBody("This is test report", Charset.forName("UTF-8")));
        post.setEntity(mpEntity);
        //Execute the post request
        HttpResponse response1 = client.execute(post);
        //Get the response from the server
        HttpEntity resEntity = response1.getEntity();
        String Response=EntityUtils.toString(resEntity);
        Log.d("Response:", Response);
        //Generate the array from the response
        JSONArray jsonarray = new JSONArray("["+Response+"]");
        JSONObject jsonobject = jsonarray.getJSONObject(0);
        //Get the result variables from response 
        String result = (jsonobject.getString("result"));
        String msg = (jsonobject.getString("msg"));
        //Close the connection
        client.getConnectionManager().shutdown();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T06:38:26.967

您需要在清单文件中授予`WRITE_EXTERNAL_STORAGE`和权限`READ_EXTERNAL_STORAGE`：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

   <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

# three.js - 三.js 顶点和人脸重新计算后有些人脸不显示

> ID：15975578
> 
> 赞同：0
> 
> 时间：2013-04-12T15:42:38.257
> 
> 标签：three.js, webgl

我们正在重新计算手动生成的对象上的顶点和面。对象的第一个版本可以正常显示，但重新计算后某些面不会显示。此外，几何上的 __tmpVertices 似乎是错误的。我们已经尝试了很多应该更新网格的功能，但我们还没有找到一个可行的解决方案。

我们在几何上更新的两件事是geometry.vertices、geometry.faces 和geometry.faceVertexUvs，仅此而已。之后我们调用这4个方法：

```
geometry.mergeVertices();
geometry.computeVertexNormals();
geometry.computeCentroids();
geometry.computeFaceNormals(); 
```

不幸的是，没有成功：部分新面孔没有显示，实际上它似乎只显示了前一个对象的面孔数量，而不是更多。

我们绝对会感谢您在这件事上的一些帮助！

亲切的问候罗曼和帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:22:24.813

根据上一篇关于 stackoverflow 的帖子（[在 Three.js 中动态地将顶点添加到一行](https://stackoverflow.com/questions/14840026/dynamically-adding-vertices-to-a-line-in-three-js)），不支持更改内容缓冲区的大小。因此，我们将在尝试更改顶点/面的数量时重新创建对象本身。

# javascript - Fabric.js：如何将过滤器应用于整个画布？

> ID：15975579
> 
> 赞同：1
> 
> 时间：2013-04-12T15:42:42.767
> 
> 标签：javascript, svg, fabricjs

虽然我已经看到了几种将过滤器应用于图像的方法，但我还没有看到任何可以将织物过滤器应用于整个画布的方法。

[来自http://fabricjs.com/fabric-intro-part-2/](http://fabricjs.com/fabric-intro-part-2/)的图像过滤功能示例

```
fabric.Image.fromURL('pug.jpg', function(img) {

  // add filter
  img.filters.push(new fabric.Image.filters.Grayscale());

  // apply filters and re-render canvas when done
  img.applyFilters(canvas.renderAll.bind(canvas));

  // add image onto canvas
  canvas.add(img);
}); 
```

我想传入整个画布元素和里面的所有形状并将过滤器应用于所有。

我是否需要展平画布，将其转换为图像，然后应用滤镜？用户可以在展平和应用之后进行更改，画布必须解耦回“图层”，以便用户可以继续编辑。

灰度过滤器的文档。[http://fabricjs.com/docs/symbols/fabric.Image.filters.Grayscale.html](http://fabricjs.com/docs/symbols/fabric.Image.filters.Grayscale.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:46:38.447

最终不得不将画布转换为图像，然后从 html 中的隐藏图像中添加它。

`<img class="test-image" src="" style="display:none;" />`在标记中

```
var addFilterToCanvas = function (name) {

    // remove controls on filter click, have to do it before it creates the image to
    // get rid of shape controls
    canvas.deactivateAll()

    var overlayImageUrl = canvas.toDataURL('png');
    $('.test-image').attr('src', overlayImageUrl);
    var filterImageUrl = $('.test-image').attr('src');

            fabric.Image.fromURL(filterImageUrl, function(img) {

            // add filter
            switch (name) {
                case 'Grayscale':
                    img.filters.push(new fabric.Image.filters.Grayscale());
                break;
                case 'Sepia':
                    img.filters.push(new fabric.Image.filters.Sepia());
                break;
                case 'Sepia2':
                    img.filters.push(new fabric.Image.filters.Sepia2());
                break;
                case 'Invert':
                    img.filters.push(new fabric.Image.filters.Invert());
                break;
            }

                // apply filters and re-render canvas when done
                img.applyFilters(canvas.renderAll.bind(canvas));

                // center image 
                img.top = canvas.getHeight() / 2;
                img.left = canvas.getWidth() / 2;

                // add image onto canvas
                canvas.add(img);
            });

        // remove controls on after filter applied to get rid of
        // new image resize controls
        canvas.deactivateAll().renderAll();

} 
```

# emacs - 从 zap-to-char 重新定义 Mz

> ID：15975581
> 
> 赞同：1
> 
> 时间：2013-04-12T15:42:46.457
> 
> 标签：emacs

点击`Ctrl-h` `k` `Alt-z`给出这个：

> Mz 运行 zap-to-char 命令，它是 `simple.el' 中的交互式编译 Lisp 函数。
> 
> 它与 Mz 绑定。
> 
> （zap 到字符 ARG CHAR）
> 
> 杀死最多并包括 ARG 次出现的 CHAR。如果 `case-fold-search' 在当前缓冲区中不为 nil，则忽略大小写。如果 ARG 为负数，则返回；如果找不到 CHAR 则出错。

* * *

我从不使用这个功能，但是按键的位置非常好。所以我想重新定义这个序列。但我做不到。即使我在 .emacs 中执行此命令：

`(global-set-key (kbd "\M-z") 'backward-delete-word)`Mz 仍然是必然的`zap-to-char`。

这里建议的方法没有帮助：

[Emacs 无法重置 Ctrl-d 键行为](https://stackoverflow.com/questions/14703760/emacs-cant-reset-ctrl-d-key-behaviour)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:51:02.830

你不需要一个`\`in 'kbd'。另外，我认为您正在寻找`backward-kill-word`：

```
(global-set-key (kbd "M-z") 'backward-kill-word) 
```

编辑：我没有注意到您链接到的页面定义了`backward-delete-word`. 如果您定义了该函数，则可以使用它而不是`backward-kill-word`此处。

# jquery - 图像滑块更改时jQuery更改href

> ID：15975586
> 
> 赞同：2
> 
> 时间：2013-04-12T15:43:00.873
> 
> 标签：jquery, arrays, slider, href

我有一个使用 jQuery 来更改图像的工作图像滑块（是的，我知道在 DIV 中使用背景图像不是最佳做法，但它是唯一适用于我页面其余部分的方法）：

我的 HTML：

```
<a id="featuredLink" href="#"><div class="featuredImages" style="background-image:url('http://www.placehold.it/2000x500/00ff00.png')"><div class="slide"></div></div></a> 
```

jQuery：

```
var urls = [ 'http://www.google.com','http://www.microsoft.com','http://www.yahoo.com' ];
var images = [ 'http://www.placehold.it/2000x500/ff0000.png','http://www.placehold.it/2000x500/00ff00.png','http://www.placehold.it/2000x500/0000ff.png' ];
var cur_image = 0;
function changeBackground() {
    cur_image++;
    if ( cur_image >= images.length )
        cur_image = 0;

    // change images
    $( '.featuredImages' ).css({
        backgroundImage: 'url(' + images[ cur_image ] + ')'
    });
    $( '.featuredImages .slide' ).fadeOut( 3000, function(){
        $( this ).css({
            backgroundImage: 'url(' + images[ cur_image ] + ')'
        }).show();
    } );

}

setInterval( changeBackground, 10000 ); 
```

和 CSS：

```
.featuredImages {
    position:absolute;
    margin: 0; 
    height: 500px;
    width: 100%;
    background: transparent url('') no-repeat center;
    overflow: hidden;
}
.featuredImages .slide { 
    position: absolute; 
    margin: 0; 
    height: 500px;
    width: 100%;
    background: transparent url('') no-repeat center;
    overflow: hidden;
} 
```

[http://jsfiddle.net/hnS9U/1/](http://jsfiddle.net/hnS9U/1/)

我想在图像交换时更改该锚标记（“featuredLinks”）的href，以便它链接到图像相关的页面。

我想使用一个数组来存储链接（“urls”）和用于图像的相同循环计数器来跟踪要使用的链接。

任何指向正确方向的指针都会很棒！

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:45:16.777

基本上，`href`s 只不过是`a`元素的属性。您需要做的就是更改该属性的值。至于数组，如果您计划使用两个数组并且您计划让每个数组的索引对应于另一个数组中的对应项，那么您也可以`cur_image`对`href`s 使用相同的索引器 , 。

你有没有尝试过：

```
$("#featuredLink").attr("href", "hrefOfNewImage"); 
```

在您的情况下，这更像是：

```
$("#featuredLink").attr("href", urls[cur_image]); 
```

在您的函数中，这看起来像：

```
function changeBackground() {
    cur_image++;
    if ( cur_image >= images.length )
        cur_image = 0;

    // change link
    $("#featuredLink").attr("href", urls[cur_image]);

    // change images
    $( '.featuredImages' ).css({
        backgroundImage: 'url(' + images[ cur_image ] + ')'
    });
    $( '.featuredImages .slide' ).fadeOut( 3000, function(){
        $( this ).css({
            backgroundImage: 'url(' + images[ cur_image ] + ')'
        }).show();
    } );

}; 
```

如果您还有其他问题，请告诉我。祝你好运！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:52:40.590

您可以在 changeBackground() 中添加此代码：

```
$('#featuredLink').attr("href", urls[cur_image]); 
```

我使用了 cur_image 但你可以创建另一个 var！

你的 HTML 语义很糟糕很糟糕......链接内的 div 不是语义的，尝试更改为 span。

# c# - 具有 2 个多对多关系的 Linq 查询

> ID：15975591
> 
> 赞同：0
> 
> 时间：2013-04-12T15:43:18.273
> 
> 标签：c#, linq, many-to-many

我在编写涉及 2 个多对多关系的 Linq 查询时遇到问题。我有以下实体： 项目 - 标签 - 类别 项目有一个多对多的标签 类别有一个多对多的标签

我的实体的结构如下（我使用了 db first 方法）
- Category(CategoryId, CategoryName, ICollection of Tag)
- Tag(TagId, TagName)
- Item(ItemId, ItemName, ICollection of Tag)

我想获取每个类别的项目列表

知道如何实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T07:16:04.650

```
var itemPerCategories = 
        db.Category.ToDictionary(
            c => c.CategoryName,
            c => c.Tags.SelectMany(t => t.Items)).ToList())
        ); 
```

itemPerCategories 是一个字典，其中 key 是类别的名称，value 是类别中所有项目的列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:46:22.317

没有实体类结构有点难以回答，但应该是这样的：

```
var categories = context.Categories.Where(c => c.Items.Any(i => i.Tags.Any(t => t.Name == "myTagName"))).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T18:26:29.837

找到答案：
var items = from c in db.Category
from t in c.Tag
from i in t.Item
where c.CategoryName == "categoryname"
select i;

# c - 我无法使打开/读取/关闭低级功能在 Ubuntu 中工作

> ID：15975594
> 
> 赞同：0
> 
> 时间：2013-04-12T15:43:28.430
> 
> 标签：c, linux, posix

我正在尝试开发一个概念验证程序，它可以打开文件、读取一些数据并关闭它，所有这些都不使用 fopen/getc/fclose 函数。相反，我使用的是低级打开/读取/关闭等价物，但没有运气：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/types.h>

int main ( int argc, char **argv ) {

    int fp;

    ssize_t num_bytes;

    if ( fp = open ( "test.txt", O_RDONLY ) < 0 ) {
            perror("Error opening file");
            return 1;
    }

    char header[2];

    while ( num_bytes = read ( fp, &header, 2 ) > 0 )
            printf("read %i bytes\n", num_bytes);

    printf("done reading\n");

    close ( fp );

    return 0;
} 
```

如果不存在文件，则正确打开会打印一条错误消息。另一方面，如果文件存在，程序会在 read() 函数处停止，没有明显的原因。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T15:44:53.930

由于[运算符优先级](http://en.cppreference.com/w/c/language/operator_precedence)，这是不正确的：

```
if ( fp = open ( "test.txt", O_RDONLY ) < 0 ) 
```

as`=`的优先级低于`<`. 这意味着`fp`将根据 的结果分配`0`或。`1``open ( "test.txt", O_RDONLY ) < 0`

*   当文件不存在时，条件是`-1 < 0`，结果是`1`和`fp`被赋值`1`并`if`进入分支。
*   当文件确实存在时，条件是`N < 0`（where `N`will be greater than two due `stdin`，`stdout`并且`stderr`占用文件描述符`0`，`1`and `2`）并且`fp`被赋值`0`并且`if`不进入分支。然后程序继续执行该`read()`行，但`fp`值为`0`，`stdin`因此它在等待从 读取内容时停止`stdin`。

改成：

```
if ( (fp = open ( "test.txt", O_RDONLY )) < 0 ) 
```

这里同样的问题：

```
while ( num_bytes = read ( fp, &header, 2 ) > 0 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:45:58.107

改变这个：

```
while ( num_bytes = read ( fp, &header, 2 ) > 0 ) 
```

至

```
while ( (num_bytes = read ( fp, &header, 2 )) > 0 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:29:12.627

'<' 或 >' 优先于 '='

所以比较结果是''0'或'1'将被分配给fp。

修改如下代码，

if ( (fp = open ( "test.txt", O_RDONLY )) < 0 )

# vb6 - 如何在vb6中将字节数组作为变体返回

> ID：15975596
> 
> 赞同：-1
> 
> 时间：2013-04-12T15:43:38.583
> 
> 标签：vb6, bytearray, variant

我一直在试图弄清楚为什么下面的函数在返回时会抛出“类型不匹配”的错误。根据我对 VB6 的了解，这应该没有任何问题，但显然没有。谁能看到我在这里做错了什么并让我知道如何解决它？提前致谢。

```
Private Function GetByteArray(source As Variant, index As Integer, length As Integer) As     Variant
  Dim buff() As Byte
  ReDim buff(0 To length - 1)
  Dim i As Integer
  For i = 0 To length - 1
    buff(i) = CByte(source(index + i))
  Next i
  GetByteArray = buff
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:40:36.317

事实证明，这个问题与我发布的函数没有任何关系，而是与我对结果所做的事情有关。我正在使用该方法获取双精度的字节，然后使用 CDbl 获取双精度值。这是错误真正发生的地方。

我应该这样做的方法是使用以下代码：

```
CopyMemory rfcTest.rfcFloat, GetByteArray(buff, 0, 8), Len(rfcTest.rfcFloat) 
```

请注意，为了使用它，您还必须像这样声明 CopyMemoryMethod：

```
Private Declare Sub CopyMemory Lib "kernel32" Alias "RtlMoveMemory" (pDest As Any, pSrc As Any, ByVal ByteLen As Long) 
```

# java - Java 中的截断或十进制格式

> ID：15975602
> 
> 赞同：1
> 
> 时间：2013-04-12T15:44:00.647
> 
> 标签：java, jtextfield, truncation

我有这个：

```
if (inKm) 
{
    text = String.valueOf(MetricConverter.milesToKilometers(Double.valueOf(text)));

} 
```

这会产生一个 JTextField 的结果，这对我来说有点太长了。如何在结果值上截断或使用小数格式？当我在这个表达式中使用十进制格式时，它只是破坏了程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:49:30.383

我喜欢使用它，因为它与`printf()`

```
double doubleValue = 123.4567895;
String.format("%.2f", doubleValue); // returns "123.46" 
```

编辑：这不会截断，而是四舍五入。

有关如何使用`String.format()`和的更多信息：http `java.util.Formatter`:
[//docs.oracle.com/javase/7/docs/api/java/util/Formatter.html](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)

# java - 带有 super 的泛型代码无法按预期工作

> ID：15975603
> 
> 赞同：4
> 
> 时间：2013-04-12T15:44:02.977
> 
> 标签：java, generics, compiler-construction, type-conversion

我有以下代码：

```
List<? super Integer> numbers = new ArrayList<Number>();
numbers.add(new Integer(10));
Number object = numbers.get(0);  //this doesn't compile??

Object object = numbers.get(0);  //this does compile 
```

然后，如果我这样做：

```
numbers.add(new Object()); //doesn't compile in contradiction to above statement 
```

这是什么原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T15:49:39.133

`Number object`不起作用，因为编译器不知道这`numbers`是`Number`s 的列表 - 它只知道它是`Integer`. 例如，它可能是一个`Object`s 列表，在这种情况下，将结果存储`get`在`Number`变量中是行不通的。因此编译器不允许这样做。

`Object object`是允许的，因为将结果存储`get`在`Object`变量中总是有效的，因为您可以将任何内容存储在`Object`变量中。

`numbers.add( new Object() )`不起作用的原因是您只允许将`Object`s 添加到`List<Object>`s，但`numbers`很可能是 a`List<Integer>`或 a `List<Number>`（实际上是后者），所以这是不允许的。

基本上你必须这样想：`numbers`可能是一个`Integer`s 列表、一个`Number`s 列表或一个 s 列表`Object`，所以你只能执行那些对这三个中的任何一个都有效的操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T15:49:13.310

`List<? super Integer>`允许`numbers`成为 的列表`Objects`，而不仅仅是 的列表`Numbers`或列表`Integers`：

```
List<? super Integer> numbers = new ArrayList<Object>(); 
```

纯粹基于 的编译时类型`numbers`，不能保证以下是类型安全的，因此被拒绝：

```
Number object = numbers.get(0);  //this doesn't compile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:54:06.520

通过声明`List<? super Integer>`，您是说它可以接受任何作为超类的对象，`Integer`其中也包括`Number`and `Object`。`Number`因此，您可以在该列表中添加and的实例，`Object`以便在从列表中检索最通用的类​​型 ie 时`Object`考虑。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T15:59:27.280

我认为您正在寻找使用任何 SUPER 整数类加载列表。Object 是唯一的 Super 的 Integer 类。

Number 是一个 Object，因此它是合法的`new ArrayList<Number>()`；

但是当你尝试从 numbersList 中获取时，它只能是一个 Object。因为 Object 是 Integer 的唯一 Super 类。

如果您有任何疑问，或者您认为我需要纠正我的理解，请告诉我。

问候， 维诺德

# ios - Boost::Geometry (1.53) 与 iOS

> ID：15975606
> 
> 赞同：1
> 
> 时间：2013-04-12T15:44:16.000
> 
> 标签：ios, xcode, boost, geometry, boost-geometry

我想在我的 iOS 项目中使用 Boost::Geometry 库。经过一天的几次尝试后，我来到了 SO。

由于 Geometry 是一个仅限 Header 的库，因此我认为不需要二进制文件，只需添加 *.hpp 文件就足够了。我对吗？

这是我所做的：

1.  下载 Boost 1.53.0
2.  `boost`将根文件夹提取到`libs/boost`文件夹。所以 boost root 的路径是 project/libs/boost/boost （其中包含`geometry`）
3.  向 xcode 添加了新的 boost 文件夹
4.  在构建/目标中，设置`Header Search Path`为
    *   “$(PROJECT_NAME)/../libs/boost”
    *   "$(PROJECT_NAME)/libs/boost"
    *   “$(PROJECT_NAME)/../libs/boost/boost”
    *   "$(PROJECT_NAME)/libs/boost/boost"
5.  得到以下编译器错误：
    *   `#include "boost/[geometry]/geometry.hpp"`抛出“未找到 boost/geometry.hpp 文件”
    *   `#include "geometry.hpp"`在geometry.hpp 中抛出错误“boost/geometry/core/cs.hpp file not found”

这是我的项目结构：

```
proj
 |--- classes
 |--- ios
 |--- libs
 |      |--- cocos2dx
 |      |--- CocosDenshion
 |      +--- boost
 +--- res 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T06:10:08.930

我现在不仅成功地集成了 Boost::Geometry，而且还集成了整个 Boost 库。以下是要遵循的正确步骤：

*   下载 Boost 1.53.0
*   将 boost 根文件夹提取到 libs/boost 文件夹。所以 boost root 的路径是 project/libs/boost/boost （它不需要是项目的一部分，它可以在其他地方。Boost 文件不会被添加到 xcode，但会通过正确设置 Header Search Path 来引用）
*   在 build / target 中，将 Header Search Path 设置为`boost`文件夹，在我的情况下，`$(PROJECT_NAME)/../../libs/boost`
*   然后可以像这样添加标题`#include <boost/geometry.hpp>`

由于 Boost::Geometry 是一个仅 Header 的包，因此可以正常工作。但是对于需要编译的包，要采用不同的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T03:47:28.623

虽然您可以将整个 boost 存储库添加为项目的可接受答案，但这将需要很长时间来编译。

更健壮和解耦的方法是使用静态库。

为此，您可以使用 ofxiOSBoost 静态库和头文件：

（适用于 iOS 6、iOS 7、iOS 8 + ）

Boost 1.57.0 libc++ (c++11)、libstdc++ 的发布，还包括构建脚本

[https://github.com/danoli3/ofxiOSBoost](https://github.com/danoli3/ofxiOSBoost)

# html - FF 渲染位置相对不同于所有其他浏览器

> ID：15975607
> 
> 赞同：0
> 
> 时间：2013-04-12T15:44:20.437
> 
> 标签：html, css, google-chrome, firefox

我的网站[http://dev.markzanghi.com](http://dev.markzanghi.com)在 Firefox 中渲染不正确，我不知道为什么。

包括 IE 在内的所有其他浏览器都能正确呈现它。上面的链接将显示错误。基本上，我的标题需要两个部分来制作动画。下面是我的 CSS

```
/*
TOP BAR
*/

.topbar {
height: 75px;
background: url('../img/headerBGtop.png') repeat-x;
}
.bottomTopBar {
background: url('../img/headerBGbottom.png') repeat-x;
height: 6px;
position: relative;
top: 64px;
}
.topbar .headerWrapper {
max-width: 924px;
margin: 0 auto;
padding: 0 5px;
}
.bottomHeader {
position: relative;
top: -11px;
left: 0px;
z-index: 1;
}
.headerArrowImg {
width: 924px;
overflow: hidden;
}
.bottomFiller {
position: relative;
top: -24px;
background: url(/img/headerBGbottom);
    height: 11px;
}
#leftBottomHeader {
}
#rightBottomHeader {
top: -35px;
}
.logo {
float: left;
margin-top: 13px;
}
.logo img {
height: 55px;
}

.topbarLinks {
float: right;
text-decoration: none;
position: relative;
top: 44px;
z-index: 10;
}

.topbarLinks a{
color: white;
margin-left:25px;
padding: 10px 0px;
}

.topbar .headerArrowImg img {
max-width: none;
position: relative;
left: -200px;
} 
```

和 HTML：

```
<header>
    <div class="topbar navbar-fixed-top" >
        <div class="headerWrapper">
            <div class="logo">
                <a href="#/"><img src="img/homeLogo.png" /></a>
            </div>
            <div class="topbarLinks">
                <a id="workLink" href="#"><img src="img/workLink.png" /></a>
                <a id="aboutLink" href="#/about"><img src="img/aboutLink.png" /></a>
                <a id="contactLink" href="#/contact"><img src="img/contactLink.png" /></a>
            </div>
            <div id="bottomHeaderWrap" class="bottomHeader">
                <div class="headerArrowImg">
                    <div id="arrowImgWrapper">
                        <img src="/img/headerArrowImg.png" />
                    </div>
                </div>

            </div>
        </div>
        <div id="leftBottomHeader" class="bottomFiller">
        </div>
        <div id="rightBottomHeader" class="bottomFiller">
        </div>
    </div>
</header> 
```

如果有人知道为什么这不起作用，请告诉我！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:47:14.363

不久前，我在菜单动画中遇到了同样的问题。

“问题”是 Firefox 在声明 X 和 Y 坐标时需要显式声明。在几个项目上，您已声明`top`(Y)，但尚未声明 a`left`或`right`(X)。

添加一个`left:0`或其他东西，你应该没问题。或者，因为它们是`position:relative`，您可以转换`top`为`margin-top`.

# c++ - 带有 VS2012 编译器的 32 位 Qt5 构建中的 ICU 支持导致 Qt5 构建失败；因此 Webkit 也是不可构建的

> ID：15975608
> 
> 赞同：2
> 
> 时间：2013-04-12T15:44:26.503
> 
> 标签：c++, visual-studio-2012, qt5, icu

在尝试使用 VS2012 编译器构建 Qt5 时，我遇到了另一个[障碍。](https://stackoverflow.com/a/15893226/368896)

启用 ICU 时（配置命令行上的“-icu”，以及在 VS2012 中正确构建 ICU 的 32 位版本并正确包含所有 ICU 路径（头文件、.lib 和 .dll）），`qtbase\src\corelib\codecs\qtextcodec.cpp`返回第 688 行当询问名称为“US-ASCII”的编解码器时，一个 NULL 编解码器（ICU 无法返回编解码器）。

具体来说：

```
QTextCodec* QTextCodec::codecForLocale()
{
    QCoreGlobalData *globalData = QCoreGlobalData::instance();
    if (!globalData)
        return 0;

    QTextCodec *codec = globalData->codecForLocale.loadAcquire();
    if (!codec) {
#ifdef QT_USE_ICU

        // THIS BLOCK IS REACHED WHEN ICU IS ENABLED

        textCodecsMutex()->lock();

        // ***
        // The following codec returned is NULL!!!
        //   (Internally, it sets the codec name to "US-ASCII",
        //    and fails to find a codec with this name)
        // ***
        codec = QIcuCodec::defaultCodecUnlocked();

        textCodecsMutex()->unlock();
#else
        // setupLocaleMapper locks as necessary
        codec = setupLocaleMapper();
#endif
    }

    return codec;
} 
```

后来，上面提到的 NULL 编解码器变量被取消引用（在“lrelease.exe”实用程序的代码中），当“lrelease.exe”实用程序作为 Qt5 构建过程的一部分运行并尝试执行翻译时，它崩溃了由于此 NULL 取消引用并导致 Qt 构建因错误而停止。

进入上述`QIcuCodec::defaultCodecUnlocked()`函数显示编解码器名称被设置为`US-ASCII`，并且找不到具有此名称的编解码器。

因此，在 Qt5 的 VS2012 编译器 32 位构建中包含 ICU 支持似乎是不可能的。

更糟糕的是，因为`Webkit`依赖于 Qt5 中的 ICU，这意味着`Webkit`也无法构建。

有人可以告诉我这是否很可能是带有 VS2012 的 Qt5 的错误，还是我在构建环境中设置不正确？

同样有用的是，知道是否有人能够使用启用 ICU 支持的 VS2012 编译器构建 Qt5。

我还在Qt 论坛的相关持续线程中[发表了评论](http://qt-project.org/forums/viewthread/24896/P15/#121196)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-12T03:55:04.070

Qt 默认使用 UTF-8。假设 ICU 51.2，使用定义为 1 的 U_CHARSET_IS_UTF8 重建 ICU。要么：在 source\common\unicode\platform.h 中 #define 它（参见从第 523 行开始的注释），或者您也可以将其添加到所有 ICU 项目的构建中在 allinone.sln 中（例如右键单击，选择属性，选择 Configuration Properties>C/C++>Preprocessor 并将其添加到 Preprocessor Definitions）。

# java - Java图像缩放提高质量？

> ID：15975610
> 
> 赞同：3
> 
> 时间：2013-04-12T15:44:32.413
> 
> 标签：java, image, scaling

我目前正在使用以下代码缩放图像。

```
Image scaledImage = img.getScaledInstance( width, int height, Image.SCALE_SMOOTH);
BufferedImage imageBuff = new BufferedImage(width, scaledImage.getHeight(null), BufferedImage.TYPE_INT_RGB);
Graphics g = imageBuff.createGraphics();
g.drawImage(scaledImage, 0, 0, new Color(0, 0, 0), null);
g.dispose();
ImageIO.write(imageBuff, "jpg", newFile); 
```

任何人都知道缩放图像并获得更好质量结果的更好方法，甚至对改进我当前的代码以获得更好质量输出的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:03:31.060

您可以使用[仿射变换](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/AffineTransform.html)

```
public static BufferedImage getScaledImage(BufferedImage image, int width, int height) throws IOException {
    int imageWidth  = image.getWidth();
    int imageHeight = image.getHeight();

    double scaleX = (double)width/imageWidth;
    double scaleY = (double)height/imageHeight;
    AffineTransform scaleTransform = AffineTransform.getScaleInstance(scaleX, scaleY);
    AffineTransformOp bilinearScaleOp = new AffineTransformOp(scaleTransform, AffineTransformOp.TYPE_BILINEAR);

    return bilinearScaleOp.filter(
        image,
        new BufferedImage(width, height, image.getType()));
} 
```

也试试这个[例子](http://www.java2s.com/Code/Java/2D-Graphics-GUI/Imagescale.htm)。

也试试[java-image-scaling](https://code.google.com/p/java-image-scaling/)库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:58:40.750

您可能想查看这个[图像缩放库](http://code.google.com/p/java-image-scaling/)。它具有双三次和 Lanczos 等算法，还有一个非锐化滤波器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:56:00.207

尝试[避免 Image.getScaledInstance()](http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html)。

# bash - bash 脚本在执行命令后执行 printf 语句

> ID：15975613
> 
> 赞同：0
> 
> 时间：2013-04-12T15:44:36.310
> 
> 标签：bash

我正在运行一个包含各种步骤的 bash 管道。我的问题是我在命令之前有一些 printf 语句，如下所示，以显示进程当前所处的阶段。Bash 只打印那些执行命令的语句。我尝试了 -x 和 -v，但是它打印了整个脚本（命令等），这不是我想要的。

```
printf "You are at step 1\n"
`step1 command`

printf "You are at step 2\n"
`step2 command` 
```

它首先打印 step1 命令和 step 2 命令的输出，然后打印“You are at step 1”和“you are at step 2”，这不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:59:53.537

请确保您没有`&`在命令末尾留下字符，因为它会使命令在后台运行，而不是按顺序运行。（有点像多处理或多线程）

PS。你最好举一个更具体的例子，你的例子有点抽象。:-)

# php - 比较 PHP 日期和 MySQL 日期类型

> ID：15975614
> 
> 赞同：0
> 
> 时间：2013-04-12T15:44:37.147
> 
> 标签：php, mysql, date

一个初学者的问题。我需要在我的数据库中找到与昨天日期一致的所有记录。此列是 DATE 类型。

在 php 中：

```
$yesterday =  date('Y-m-d', strtotime($Date. ' - 1 day')); 
```

正如预期的那样，这正在产生“2013-04-11”。但是当我尝试

```
$gamesQuery = mysqli_query($con,"SELECT * FROM scores WHERE home_team = $teamId AND game_date = $yesterday"); 
```

我没有比赛。我的数据库中肯定有一条记录，game_date = 2013-04-11。

（我发现了许多类似的 SO 问题，但没有足够基本的帮助）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:54:06.380

使用这个（仅 sql）：

```
SELECT * 
  FROM scores 
 WHERE home_team = $teamId 
   AND DATE(game_date) = DATE(DATE_SUB(NOW(), INTERVAL 1 DAY)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:51:58.710

尝试：

```
 $gamesQuery = mysqli_query($con,"SELECT * FROM scores WHERE home_team = $teamId AND DATE(game_date) = '{$yesterday}'"); 
```

我一直在使用它进行很多与 mysql 日期相关的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:48:29.473

如果您`game_date`的字段是日期时间格式，它将不匹配，因为值不相同。用于[`DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)先提取日期，然后进行比较。

```
SELECT * FROM scores WHERE home_team = $teamId AND DATE(game_date) = $yesterday 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:51:33.147

我认为您的问题是日期在 php 和 mysql 中的使用和存储方式不同。试试[http://www.richardlord.net/blog/dates-in-php-and-mysql](http://www.richardlord.net/blog/dates-in-php-and-mysql)

这不仅会给你答案，还会教你答案；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T15:51:43.643

我也会尝试设置正确的格式：

```
$yesterday =  date('Y-m-d', strtotime($Date. ' - 1 day'));
$gamesQuery = mysqli_query($con,"SELECT * FROM scores WHERE home_team = ".$teamId." AND date_format(game_date,'%Y-%m-%d') = ".$yesterday); 
```

# jquery - jQuery .get 响应为 javascript/html

> ID：15975618
> 
> 赞同：1
> 
> 时间：2013-04-12T15:44:57.920
> 
> 标签：jquery

```
jQuery(document).ready(function() {
    jQuery('.bnr').each(function() {
        var group = jQuery(this).attr('adgroup');
        var obj = jQuery(this);
        jQuery.get("http://www.example.com/ads.php",
    { 'adGroup': group },
    function( response ) {
            obj.html( response );
        }
    );
    })
}); 
```

我正在尝试使用 jQuery 加载广告。ads.php 返回附属代码。问题是返回响应是 javascript 时。仅当响应为 html 时，一切都有效。使用 eval() 不起作用，或者我遗漏了一些东西。响应示例：

```
<script type="text/javascript" src="http://adserving.unibet.com/ad.aspx?pid=1234&pbg=123"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:49:24.153

使用[.load()](http://api.jquery.com/load/)从 url 加载动态内容

```
jQuery(document).ready(function() {
    jQuery('.bnr').each(function() {
        var group = jQuery(this).attr('adgroup');
        var obj = jQuery(this);

        obj.load("http://www.example.com/ads.php", { 'adGroup': group })
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:54:23.857

你也可以试试这个方法

```
 jQuery('.bnr').each(function() {
        var group = jQuery(this).attr('adgroup');
        var obj = jQuery(this);

       $.ajax({
           url: 'http://www.example.com/ads.php',
           data: { 'adGroup': group },
           dataType: "text/html", // this will make sure that your response is html 
           success: function(data){
             obj.html( data );
           }
       });
}); 
```

# java - 将 java soap 客户端连接到启用 SSL 的连接

> ID：15975625
> 
> 赞同：2
> 
> 时间：2013-04-12T15:45:18.970
> 
> 标签：java, soap, ssl

我正在为我的公司使用 java 创建一个肥皂服务器。我们已经有一个使用 SSL 设置的网站，我有兴趣从一开始就将 SSL 用于肥皂服务器。我已经搜索了有关如何实现此功能的文章或信息，但我发现的大多数都是诸如“您首先需要证书”之类的东西，或者太旧且缺少部分，以至于我无法联系创建者。

我将如何使用 SSL 连接肥皂服务器？为了启用 SSL，我需要在代码中做些什么特别的事情吗？证书已经应用，我们的网站已经运行了有效的 HTTPS 连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T04:00:58.090

大多数（可能是所有）SOAP 框架都将支持 ssl。这是Axis2、Apache CXF 和 JAX-WS 的一些示例代码的[链接。](http://lehvolk.blogspot.ca/2012/03/java-soap-implementations-with-ssl.html)

# sql-server - 如何在具有可变服务器名称的链接服务器上创建表？

> ID：15975626
> 
> 赞同：2
> 
> 时间：2013-04-12T15:45:18.933
> 
> 标签：sql-server, tsql, linked-server

我已经看到了一些关于如何使用它们在链接服务器上创建表的解决方案，`EXEC('some sql') AT [LINKED_SERVER_NAME]`并且它们是手动工作的。

我可以使用 DML 查询，例如

```
EXEC ( 'select * from [' + @DbServerName + '].[' + @DbName + '].dbo.someTable' ) 
```

我怎样才能为 DDL 查询做类似的事情，比如

```
EXEC ( 'CREATE TABLE [' + @DbServerName + '].[' + @DbName + '].dbo.someTable ( id int null) ' ) 
```

我玩弄了**select * from openquery( *linkedservername* , query)**和**exec(sql) AT [ *linkedservername* ]**，但每次我尝试将服务器名称设为变量时，它都会失败。

我可以在查询分析器中手动运行所有这些命令，但是每当我尝试将链接服务器名称设为变量时，它们对我来说都失败了。我正在尝试做的是这样的事情......

```
DECLARE @LinkedServerName nvarchar(100)
DECLARE @LinkedDbName nvarchar(100)
SET @LinkedServerName = 'SVR2'
SET @LinkedDbName = 'DB2'

DECLARE @DDL_QUERY nvarchar(1000)
SET @DDL_QUERY = 'CREATE TABLE [' + @LinkedDbName + '].dbo.T1 ( id int null )'

-- Current failed ideas
EXEC( @DDL_QUERY ) AT @LinkedServerName
SELECT * FROM OPENQUERY(@LinkedServerName, @DDL_QUERY)
EXEC( 'CREATE TABLE [' + @LinkedServerName + '].[' + @LinkedDbName + '].dbo.T1( id int null )' 
```

当链接服务器名称和该链接服务器上的数据库名称都是声明变量时，是否可以动态创建表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:53:22.563

假设链接服务器也是 SQL Server（或可能是 Sybase）：

```
DECLARE @table NVARCHAR(MAX), @sql NVARCHAR(MAX);

SET @table = N'CREATE TABLE dbo.T1(id INT NULL);';

SET @sql = N'EXEC ' + QUOTENAME(@LinkedServerName) + N'.' 
  + QUOTENAME(@LinkedDbName) + N'.sys.sp_executesql @table;';

EXEC sys.sp_executesql @sql, N'@table NVARCHAR(MAX)', @table; 
```

稍微不那么冗长的语法：

```
DECLARE @sql NVARCHAR(MAX), @exec NVARCHAR(MAX);

SET @sql = N'CREATE TABLE dbo.T1(id INT NULL);';

SET @exec = QUOTENAME(@LinkedServerName) + N'.' 
  + QUOTENAME(@LinkedDbName) + N'.sys.sp_executesql';

EXEC @exec @sql; 
```

# plot - 带有几行的 Gnuplot xticlabels

> ID：15975631
> 
> 赞同：7
> 
> 时间：2013-04-12T15:45:36.840
> 
> 标签：plot, gnuplot

如果我在第二行的中间添加一个使用 3 行 gnuplot 剪切的 xticlabel。有什么方法可以让 xticlabels 有几行吗？

这是我的数据文件：

```
"[17h30,19h00] 25" 1
"[03h30,10h00] 21" 1
"[03h00,12h00] 26" 2
"[18h00,19h30] 27" 3
"[20h30,22h00] 25" 4
"[13h00,14h30] 25" 4
"[19h30,21h30] 25" 5
"[14h30,16h00] 25" 5
"[16h30,18h00] 25" 5
"[09h30,15h00] 25" 9 
```

这是我的 gnuplot 代码：

```
set terminal postscript eps color
set output '| epstopdf --filter --outfile=hist.pdf'
set auto x
set yrange [0:10]
set style histogram clustered
set boxwidth 0.95 relative
set style fill transparent solid 0.5 noborder
plot 'hist.dat' using 2:xticlabels(1) with boxes lc rgb'blue90' notitle 
```

最后这是生成的图表：

![在此处输入图像描述](https://i.stack.imgur.com/nXYp3.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-12T16:44:59.360

# 潜在问题 1：xtics 重叠

您有几个选项可以帮助解决 xtic 问题。

## 1）旋转xtics

```
set xtics rotate by -45 
```

这会将 xtics 设置为以从左上角到右下角的角度打印。

## 2) 更改字体大小

```
set xtics font ",4" 
```

您可以使字体大小很小但不可读。

## 3）在图表的条形之间添加一个间隙

```
set style histogram gap 4 
```

## 4) 更改数据文件

如果您可以控制数据文件，则可以尝试在 xtic 标签中插入一些换行符，例如

```
"17h30\n19h00\n25" 1 
```

## 潜在问题 2：xtics 通常太长

我不太确定你的问题，但你可能会[遇到这个问题](https://stackoverflow.com/questions/9538627/any-way-to-prevent-gnuplot-xticlabel-from-truncating-long-strings)。Gnuplot 对标签中的字符数有一个内置限制，在旧版本的 gnuplot 中设置为 50，最近为 200。我链接到的帖子包括一个解决方法，即编译一个增加`MAX_ID_LEN`常数的 gnuplot 版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-16T07:26:45.933

我遇到了类似的问题，但在我的情况下，标签取自两列（字符串列（1）和数字列（2）），而 y 数据位于第三列。

我使用换行符“\n”将标签一分为二

```
using 2:3:xticlabels(stringcolumn(1) . "\n\n" . stringcolumn(2)) 
```

基本上在 xticlabels() 中，您可以给出任何字符串表达式，例如，我还需要一些数字格式，而不是 stringcolumn(2) 使用以下表达式：

```
gprintf('%1.0t*10^{%S}',column(2)) 
```

希望能帮助到你

# java - 在多类加载器执行环境中正确使用单例来共享状态

> ID：15975636
> 
> 赞同：0
> 
> 时间：2013-04-12T15:45:42.163
> 
> 标签：java, singleton, classloader

在 Java 中，使用静态变量共享状态可能是导致难以调试的问题的原因，而且通常是糟糕设计的征兆。

例如，我知道在多线程应用程序中状态可能无法正确同步，因为不同的线程可能在其寄存器中具有不同的静态变量副本。此外，如果具有静态变量的类由多个类加载器加载，则可能存在静态变量的多个副本。

使用静态变量声明中的 keyworkd 可以轻松解决第一个问题`volatile`（并在必要时同步对其方法的访问）。

对于第二个问题，保证只有一个实例存在并且只有那个实例在 JVM 中可见的最佳方法是什么？我在另一篇文章中发现一些人推荐使用枚举：

[在 Java 中实现单例模式的有效方法是什么？](https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java)

但我认为如果存在多个类加载器，这不会解决问题。

乍一看，我会考虑为此使用 syngleton 有状态 EJB 之类的东西，但我想知道是否存在更轻量级的方法。

最后，还有其他我不知道的与使用静态变量（除了我上面提到的两个）共享状态相关的技术问题吗？

免责声明：

这个问题故意排除了对不良设计的讨论，这种设计通常意味着在 Java 中使用静态变量来共享状态（因为这已经在许多其他地方进行了适当的讨论），并且只关注技术问题。

# debugging - Chrome 工具自动破解

> ID：15975642
> 
> 赞同：1
> 
> 时间：2013-04-12T15:46:16.860
> 
> 标签：debugging, google-chrome, google-chrome-devtools

我的 Chrome 开发者工具很棒，我喜欢它们。不过，我最近遇到了麻烦。

不知何故，我打开了某种*错误中断*，但我不知道如何将其关闭。我看过谷歌，但这很难，因为我不知道正在发生的事情的正确术语，所以我想我会试试 SOF。

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T13:15:02.937

转到 Sources 选项卡，然后找到底部带有两条条纹的按钮。

![](https://i.stack.imgur.com/SBWoU.png)

单击此按钮可在以下状态之间切换：

*   ![黑色的](https://i.stack.imgur.com/f6Sko.png)“不要暂停异常”（默认）
*   ![蓝色的](https://i.stack.imgur.com/BCpsj.png)“暂停所有例外”
*   ![紫色的](https://i.stack.imgur.com/Bj2Ku.png)“暂停未捕获的异常”

# angularjs - AngularJS - 路由到空路由（“/”）在 IE7 中不起作用

> ID：15975646
> 
> 赞同：0
> 
> 时间：2013-04-12T15:46:30.690
> 
> 标签：angularjs, routing, internet-explorer-7

我有一个 AngularJS 应用程序，其中包含所有常见的 IE 解决方法：

```
<html id="ng-app" class="ng-app:clientsite" ng-app="clientsite" xmlns:ng="http://angularjs.org">
    <head>
        <!--[if lt IE 9]>
          <script src="js/html5.js"></script>
        <![endif]-->
        <!--[if lte IE 8]>
          <script>
            document.createElement('ng-include');
            document.createElement('ng-pluralize');
            document.createElement('ng-view');
            document.createElement('ng:include');
            document.createElement('ng:pluralize');
            document.createElement('ng:view');
          </script>
        <![endif]-->
        <!--[if lt IE 8]>
          <script src="js/json2.js"></script>
        <![endif]--> 
```

该站点有效，我可以到达任何路线，除了 IE7 没有选择空路线“/”：

```
$routeProvider
.when("/",
{
    templateUrl: "/htm/home.htm"
}) 
```

它正在路由到我的其他路线：

```
.otherwise(
{
    templateUrl: "/htm/notfound.htm"
}); 
```

如果我在路线末尾添加 /#/，它会起作用，但我们的客户不会接受（人们需要能够直接访问 www.theirsite.com，我们不能要求 www.theirsite .com/#/)。

在幕后，我有一个 ASP.Net MVC 服务器，它只是将所有内容路由回我的索引文件（它可以全面工作，除了 IE7 中的这条路由）。

如何让空路由在 IE7 中正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T19:25:27.073

我有一个类似的问题，这就是我解决它的方法：

```
.otherwise({
    templateUrl: '/app/error.html',
    resolve: {
        // Here we ensure that our route has the document fragment (#), or more specifically that it has #/ at a minimum.
        // If accessing the base URL without a trailing '/' in IE7 it will execute the otherwise route instead of the signin
        // page, so this check will ensure that '#/' exists and if not redirect accordingly which fixes the URL.
        redirectCheck: ['$location', function ($location) {
            var absoluteLocation = $location.absUrl();

            if (absoluteLocation.indexOf('#/') === -1) {
                $location.path('/');
            }
        }]
    }
}); 
```

# c# - mvc dbcontext 在 Azure 上不起作用

> ID：15975647
> 
> 赞同：0
> 
> 时间：2013-04-12T15:46:31.267
> 
> 标签：c#, asp.net-mvc, entity-framework, dbcontext

我正在创建一个处理器类并在工作者角色中运行。在处理器内部，我创建了存储库来对我的数据库进行 CRUD 操作。

我有 2 个存储库，产品和产品大小，dbcontext 在产品存储库中创建并传递给产品大小。

在我的本地机器上一切都运行良好，但是当我部署到 Azure 时，系统向我抛出了这个错误：

```
System.InvalidOperationException: The operation cannot be completed because the DbContext has been disposed.
   at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
   at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.Where[TSource](IQueryable`1 source, Expression`1 predicate) 
```

处理器.cs

```
 public class Processor : IDisposable
    {

        private readonly IProductRepository _productRepository;

        public Processor()
            : this(new ProductRepository())
        {

        }

        public Processor(
            IProductRepository productRepository

            )
        {
            _productRepository = productRepository;
        }

        public void Run(){ _productRepository.someoperation;}

        public void Dispose()
        {

            _productRepository.Dispose();

        } 
```

产品存储库.cs

```
 public class ProductRepository : IProductRepository
        {

        private static readonly DbContext_context = new DbContext();

        private readonly IProductSizeRepository _productSizeRepository;

        public ProductRepository()
            : this(
            new ProductSizeRepository(_context))
        {

        }

        public ProductRepository(
            IProductSizeRepository productSizeRepository
           )
        {

            _pictureRepository = pictureRepository;

        }

   public void Dispose()
        {
            _context.Dispose();

            _productSizeRepository.Dispose();

        } 
```

在 workerrole.cs while 循环中使用 (var runner = new Processor()) { runner.Run(); }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:41:46.160

需要将所有引用副本设置为 local=true

并在代码中而不是在构造函数中启动 dbcontext

# excel - 如何使用 VbaDiff 检索 VBA 密码？

> ID：15975650
> 
> 赞同：-1
> 
> 时间：2013-04-12T15:46:49.943
> 
> 标签：excel, password-recovery, vba

Chris Spicer 在一个旧论坛中提到 VbaDiff 可用于在 VBA excel 中检索密码，但他没有说明如何？我完全迷失了 HEX 选项，我更愿意使用 Chris 的推荐，但有人能告诉我怎么做吗？

最热烈的问候，如果过去已经回答，我深表歉意，我找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T14:33:21.147

VbaDiff 不会这样检索密码。因为它从 VBA 文档中读取，所以 VbaDiff 可以直接读取 VBA。这是因为代码没有以任何方式加密。

这是我不使用 Visual Basic 编辑器的方法的一个令人惊讶的副作用。

如果您正在寻找有关 VbaDiff 的具体帮助，您可能最好直接与我联系。我的电子邮件地址在我的个人资料上。

问候，

克里斯

# r - 在R中对某些区域进行着色

> ID：15975653
> 
> 赞同：0
> 
> 时间：2013-04-12T15:46:51.450
> 
> 标签：r, plot

我在使用 R 中的函数多边形对某些区域进行着色时遇到了一个问题。如果这些区域具有公共部分，则最后一个阴影区域将覆盖前一个区域。但现在，我确实想看到这种现象，并想保持原来的界限。我应该怎么办？以下图为例：

绘制此图像的代码是：

```
plot(variance_five[51:60,2],type="n",ylim=c(0,0.1))
for(i in 1:6)
{
   polygon(c(1:10,10:1),c(variance_five[(10*i-9):(10*i),1],variance_five[(10*i):    (10*i-9),3]),lty=2,col=i)
   lines(variance_five[(10*i-9):(10*i),2])
} 
```

我们可以看到最后一个阴影区域（紫色）覆盖了一些蓝色和浅蓝色部分，我该怎么做才能保留所有区域的所有边界并且公共区域的颜色是这些颜色的总和效果？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:56:59.083

你想使用透明度。`alpha`包中的功能`scales`将为任何颜色添加透明度。我建议在循环之前设置一个颜色矢量并使它们透明，例如

```
my_colors <- rainbow(6)
require(scales)
my_colors <- alpha(my_colors, alpha = 0.5) 
```

然后在循环内替换`col = i`为`col = my_colors[i]`. 当然，您可以根据需要调整 Alpha 级别（0 完全透明，1 完全不透明）。scales 包还提供了一个`show_col`我发现在挑选颜色时很有用的功能。尝试

```
show_col(rainbow(6))
show_col(heat.colors(6))
show_col(cm.colors(6)) 
```

我应该注意到`rainbow`等。作为`alpha`一个参数，所以你*不需要*`alpha`alpha 函数，但如果你有收藏夹，使用可以在其他 R 颜色上工作的函数更通用。（我个人喜欢`dodgerblue2`and `firebrick4`。）

# c - 无符号到十六进制数字

> ID：15975654
> 
> 赞同：2
> 
> 时间：2013-04-12T15:46:55.157
> 
> 标签：c, bit-manipulation, hex

我遇到了一个问题：基于无符号整数形成一个字符数组。数组将以十六进制表示法表示该 int。使用按位运算符执行此操作。

所以，我的想法如下：我创建了一个掩码，它的 4 个最低值位为 1。我将给定 int 的位向右推 4 并在该 int 和掩码上使用 & 。我重复直到（int！= 0）。我的问题是：当我得到单独的十六进制数字（4 位包）时，如何将它们转换为字符？例如，我得到：

```
x & mask = 1101(2) = 13(10) = D(16) 
```

是否有将 int 转换为十六进制表示的函数，或者我是否必须对 switch 语句或其他任何东西使用蛮力？

我差点忘记了，我是在 C 中做的 :)

这就是我的意思：

```
#include <stdio.h>
#include <stdlib.h>

#define BLOCK 4

    int main() {
        unsigned int x, y, i, mask;
        char a[4];

        printf("Enter a positive number: ");
        scanf("%u", &x);
        for (i = sizeof(usnsigned int), mask = ~(~0 << 4); x; i--, x >>= BLOCK) {
            y = x & mask;
            a[i] = FICTIVE_NUM_TO_HEX_DIGIT(y);
        }

        print_array(a);

        return EXIT_SUCCESS;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:23:17.183

You are almost there. The simplest method to convert an integer in the range from 0 to 15 to a hexadecimal digit is to use a lookup table,

```
char hex_digits[] = "0123456789ABCDEF"; 
```

and index into that,

```
a[i] = hex_digits[y]; 
```

in your code.

Remarks:

```
char a[4]; 
```

is probably too small. One hexadecimal digit corresponds to four bits, so with `CHAR_BIT == 8`, you need up to `2*sizeof(unsigned)` `char`s to represent the number, generally, `(CHAR_BIT * sizeof(unsigned int) + 3) / 4`. Depending on what `print_array` does, you may need to 0-terminate `a`.

```
for (i = sizeof(usnsigned int), mask = ~(~0 << 4); x; i--, x >>= BLOCK) 
```

initialising `i` to `sizeof(unsigned int)` skips the most significant bits, `i` should be initialised to the last valid index into `a` (except for possibly the 0-terminator, then the penultimate valid index).

The mask can more simply be defined as `mask = 0xF`, that has the added benefit of not invoking undefined behaviour, which

```
mask = ~(~0 << 4) 
```

probably does. `0` is an `int`, and thus `~0` is one too. On two's complement machines (that is almost everything nowadays), the value is `-1`, and shifting negative integers left is undefined behaviour.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:21:29.283

尝试这样的事情：

```
char hex_digits[] = "0123456789ABCDEF";

for (i = 0; i < ((sizeof(unsigned int) * CHAR_BIT + 3) / 4); i++) {
    digit = (x >> (sizeof(unsigned int) * CHAR_BIT - 4)) & 0x0F;
    x = x << 4;
    a[i] = hex_digits[digit];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:56:06.410

好的，这就是我得到的地方：

```
#include <stdio.h>
#include <stdlib.h>

#define BLOCK 4

void printArray(char*, int);

int main() {
    unsigned int x, mask;
    int size = sizeof(unsigned int) * 2, i;
    char a[size], hexDigits[] = "0123456789ABCDEF";

    for (i = 0; i < size; i++)
        a[i] = 0;

    printf("Enter a positive number: ");
    scanf("%u", &x);
    for (i = size - 1, mask = ~(~0 << 4); x; i--, x >>= BLOCK) {
        a[i] = hexDigits[x & mask];
    }

    printArray(a, size);

    return EXIT_SUCCESS;
}

void printArray(char a[], int n) {
    int i;

    for (i = 0; i < n; i++)
        printf("%c", a[i]);

    putchar('\n');
} 
```

我已经编译，它运行并且正确地完成了工作。我不知道...我应该担心这个问题对我来说有点难吗？在教师，考试期间，我们必须在一张纸上手写我们的代码......我不认为我会这样做。有没有更好（不太复杂）的方法来解决这个问题？谢谢大家的帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T15:53:46.463

```
char buffer[10] = {0};
int h = 17;
sprintf(buffer, "%02X", h); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T16:07:05.183

我会考虑移位时潜在填充位的影响，因为移位等于或大于整数类型中存在的值位的数量是未定义的行为。

也许您可以先使用: 终止字符串`array[--size] = '\0';`，使用 写入最小的半字节（十六进制数字）`array[--size] = "0123456789ABCDEF"[value & 0x0f]`，使用 : 移动到下一个半字节`value >>= 4`，然后重复 while `value > 0`。完成后，返回`array + size`or`&array[size]`以便调用者知道十六进制序列的开始位置。

# java - 如何与另一个类的 GUI 通信

> ID：15975656
> 
> 赞同：3
> 
> 时间：2013-04-12T15:46:55.753
> 
> 标签：java, class, user-interface

我在理解如何与另一个类的 GUI 进行通信时遇到问题。

我们有一个类，whitch 创建 Frame：

```
public class TestFrame extends javax.swing.JFrame {

    javax.swing.JLabel label;

    public TestFrame() {
        initComponents();
        label=sampleLabel;
    }

    private void initComponents() {

        sampleLabel = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        sampleLabel.setText("anotherText");
        getContentPane().add(sampleLabel, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 60, -1, -1));

        pack();
    }

    private javax.swing.JLabel sampleLabel;

}

Main class instantiate CreateFrame and tryes to overwrite label text:

public class Main {

    public static void main(String[] args) {

        TestFrame frame = new TestFrame();

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                frame.setVisible(true);
            }
        });
        frame.label.setText("anotherText");
    }
} 
```

当然，上面的代码不起作用。但我是 Java 新手，我需要以某种方式从另一个类访问标签（如示例中所示......）

**最新编辑：上面的代码确实有效:) 希望有帮助......**

以下图片显示相同的框架。唯一改变的是 JLabel 文本。

![示例图片](https://i.stack.imgur.com/Bp9bL.jpg)

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:19:51.210

如果您只想通过访问其 setText() 方法来更改标签。您所要做的就是以下（保持其他一切相同）：

```
public void makeFrames() {
        CreateFrame frame = new CreateFrame("Label1");
        frame.label.setText("new Label");
} 
```

以下是查看标签更改的快速技巧：

```
public class Main {

    JButton button;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                Main object = new Main();
                object.makeFrames();
            }
        });
    }

    public void makeFrames() {
        final CreateFrame frame = new CreateFrame("Label1");

        button = new JButton("Click");
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                frame.label.setText("new Label");
            }
        });
        frame.frame.add(BorderLayout.NORTH, button);
    }
} 
```

当您单击按钮时，标签将更改为新标签。

**编辑 2：（对 main() 所做的更改，按钮声明为静态，因此可以从 main() 中访问它**

```
public class Main {

    static JButton button;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                final CreateFrame frameFromMain = new CreateFrame("Label1");

                button = new JButton("Click");
                button.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        frameFromMain.label.setText("new Label");
                    }
                });
                frameFromMain.frame.add(BorderLayout.NORTH, button);
            }
        });
    }
} 
```

请记住，您访问 CreateFrame 类中的标签就像访问类的任何其他成员一样。如果您像这样声明变量为静态，则可以直接访问它：

```
public class CreateFrame {
    JFrame frame;
    static JLabel label;
    // the rest of the class remains the same
}

public class Main {

    static JButton button;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                CreateFrame frameFromMain = new CreateFrame("Label1");

                button = new JButton("Click");
                button.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        CreateFrame.label.setText("new Label");
                    }
                });
                frameFromMain.frame.add(BorderLayout.NORTH, button);
            }
        });
    }
} 
```

**编辑 3：**

如果您不想要该按钮，请删除该按钮的代码并执行以下操作：

```
public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                CreateFrame frameFromMain = new CreateFrame("Label1");
                CreateFrame.label.setText("new Label"); // accessing label directly from main()

            }
        });
    } 
```

**编辑 4：使用 OP 的代码：**

```
public class TestFrame extends javax.swing.JFrame {

    javax.swing.JLabel label;

    public TestFrame() {
        initComponents();
        label=sampleLabel;
    }

    private void initComponents() {

        sampleLabel = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        sampleLabel.setText("anotherText");
        add(sampleLabel);
        pack();
    }

    private javax.swing.JLabel sampleLabel;
} 
```

然后你的 main() 看起来像这样：

```
public class Main {
    public static void main(String[] args) {

       final TestFrame frame = new TestFrame();

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                frame.setVisible(true);
            }
        });
        frame.label.setText("Text From Main");
    }
} 
```

我做了最小的改变。这段代码运行完美，可以满足您的要求。我摆脱了您的“getContentPane”，因为您在 Java 6、7 中不需要它。我也摆脱了您的布局设置，因为我自己不熟悉它们。你需要学习导入java类。

您似乎正处于学习 Java 的早期阶段。我建议您坚持使用命令行程序，直到您弄清楚 Java 是如何工作的，然后再继续使用 Swing。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:05:26.153

我确信有一种方法可以通过使用 JSON http 请求来做到这一点。我找到[了一篇包含一些想法的网络文章](http://icewalker2g.wordpress.com/2010/05/17/using-json-in-java-swing/)，尽管您需要在 GUI 中实现 http 请求并实现 JSON 服务器来提供请求响应。

# php - MYSQL 数据库字符集问题

> ID：15975660
> 
> 赞同：0
> 
> 时间：2013-04-12T15:47:06.433
> 
> 标签：php, mysql, character-encoding, phpmyadmin

我有一个数据库问题，我无法理解。我来自丹麦，用 PHP 和 MySQL 制作了一个注册系统。现在......我已经分别制作了两张桌子。

`table1`当我通过 PHP 从数据库中查询它们时，其中一张表（我们称之为）很好地显示了我心爱的丹麦字母 (æøå)。但是当我去 phpMyAdmin 时，字母会奇怪地显示出来......例如：它在 phpMyAdmin 中看起来像这样：

```
BjÃ¸rn (which is Bjørn) 
```

但是同样，当我使用 a 从数据库中获取它们时`mysql_query('SELECT * FROM $tablename')`，它会显示为“Bjørn”（应该如此）。

现在问题...

在另一个表中（我们称之为`table`2），然后在 phpMyAdmin 中，“Bjørn”显示为“Bjørn”（看起来是正确的）。但是当我将它拉入 PHP 时，`mysql_query('SELECT * FROM $tablename')`它会显示为“Bj?rn”。所有字母“æøå”都显示为“？”。

我试着做一个`SHOW TABLE STATUS`，它表明排序规则是一样的。

在`table1`中，则变量为`VARCHAR(255)`，而在 中`table2`，变量为`TEXT`。

两个表都是这样创建的：

```
CREATE TABLE >>tablename<< ( bla bla bla ) CHARSET=UTF8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:51:19.923

你应该像这样连接mysql

```
$link = mysql_connect('localhost', 'user', 'password');
mysql_set_charset('utf8',$link); 
```

然后尝试执行它正确获取的查询

这里的问题是，您还应该在连接到 DB 时指定字符集。

即使在存储时，如果您没有在与 utf8 的连接中设置字符集，您的插入也会被乱码，因此请验证您是否在连接到 DB 时进行了这样的设置。

希望这可以帮助

最后但并非最不重要的一点是，在浏览器中显示时，您还应该在将数据从 DB 转储到浏览器时设置 html 标头，如下所示

```
<?php 
 header('Content-type: text/html; charset=utf-8'); 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:55:47.053

我不知道 phpmyadmin 有什么问题，但在我自己的编程中，我做了以下事情：

PHP（在其他任何事情之前）：

```
header("Content-Type: text/html; charset=utf-8"); 
```

HTML：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

数据库查询：

```
SET CHARACTER SET utf8; 
```

或者如果使用 PDO，我的 dsn 看起来像：

```
mysql:dbname=mydb;host=localhost;charset=utf8 
```

# c# - 无法编译结构

> ID：15975664
> 
> 赞同：4
> 
> 时间：2013-04-12T15:47:19.960
> 
> 标签：c#

以下代码表明我不能将隐式属性与结构一起使用：

```
public struct LimitfailureRecord
{
   public LimitfailureRecord(string sampleCode)
   {
      SampleCode = sampleCode;
   }

   public string SampleCode {get; set;}
   {
   }
} 
```

编译失败，报错

> “在将控制权返回给调用者之前，必须完全分配自动实现的属性 'blahblah.LimitfailureRecord.SampleCode' 的支持字段。考虑从构造函数初始化程序调用默认构造函数。”

如果我将结构更改为类，那很好。我需要做什么才能使这项工作成为一个结构？如果可以避免的话，我宁愿不考虑支持字段的长度（这是真实代码的大量精简版本）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:49:29.967

对于结构，您必须在所有其他构造函数中调用默认构造函数：

```
public LimitfailureRecord(string sampleCode) : this()
{
    SampleCode = sampleCode;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T15:49:12.527

像这样使用构造函数链接：

```
public LimitfailureRecord(string sampleCode)
    : this()
{
    ...
} 
```

原因是自动实现的属性引入了一个（生成的）实例字段用于支持，如前所述。所有实例字段都必须在 的实例构造函数*中`struct`*分配。

实际上，您引用的错误文本很好地描述了修复。

别的东西：如果你保留`set`你的属性的访问器，`public`你将拥有一个可变结构。大多数人都同意应该避免可变结构并且是“邪恶的”，因为它们的按值复制语义和改变现有结构值的可能性（如`record.SampleCode = "Here's a new string for an old object";`）不能很好地结合在一起。检查可变和不可变结构上的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T15:51:40.127

您需要调用默认构造函数或更改方法名称。

所以;

```
 public struct LimitfailureRecord
      {
          public void init(string sampleCode)
          {
              SampleCode = sampleCode;
          }

          public string SampleCode { get; set; }
      } 
```

将起作用或仅进行方法定义；`LimitfailureRecord(string sampleCode) : this()`

后者更好，因为它只需要一个电话就可以使事情正常进行。如果你走你已经做的初始化路线`new LimiFfailureRecord`然后打电话`init`。C# 中的结构只要求您调用默认构造函数，类不是这种情况，这就是为什么如果您将其更改为类，它将编译的原因。

# vb.net - 运行程序后的多个 Word 实例

> ID：15975666
> 
> 赞同：0
> 
> 时间：2013-04-12T15:47:27.060
> 
> 标签：vb.net, ms-office

有谁知道为什么每次循环 for next 循环时，我都会在任务管理器中运行 word 的后台进程？谢谢。

```
Try
        For Each element In Raneeded
            If Not String.IsNullOrEmpty(element) Then
                Dim OpenRA = New Microsoft.Office.Interop.Word.Application

                docname = d(CInt(element)) & ".docx"
                OpenRA.Documents.Open(folderpath & docname)

                OpenRA.Visible = False
                Dim opened1 = OpenRA.ActiveDocument

                Dim RAtable As Word.Table = opened1.Tables(1)
                RAtable.Cell(1, 1).Range.Text = "Site Address: " & address
                opened1.Close()
            End If
        Next
    Catch ex As Exception
        MsgBox(ex.Message & " Please contact your system Administrator, quoting these details.")
    End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:42:17.960

您关闭文档，但从不关闭单词 aplication OpenRA，要么在循环之外定义它，然后在最后关闭它，要么在关闭文档时关闭每个

```
 opened1.Save()
 OpenRA.Quit() 
```

# c++ - getline() 不会结束长输入

> ID：15975667
> 
> 赞同：0
> 
> 时间：2013-04-12T15:47:28.780
> 
> 标签：c++, input, io, getline

我需要在我的程序中输入一个大字符串，直到用户键入一个 delim char 并且我已经编写了以下代码：

```
int main(int argc, const char * argv[]) {
    string str, temp;

    string c;

    cout << "Insert delim char:" << endl;

    getline(cin, c);

    cout << "Delim: " << c[0] << endl;

    cout << "Insert string:" << endl;

    getline(cin, str, c[0]);

    cout << str;
    return 0;
} 
```

但是，如果尝试输入一个非常大的字符串，程序不会停止输入，也不会继续执行算法。

输出：

```
**Insert delim char:**
*

**Insert string:**

Nel mezzo del cammin di nostra vita
mi ritrovai per una selva oscura,
ché la diritta via era smarrita.
Ahi quanto a dir qual era è cosa dura
esta selva selvaggia e aspra e forte
che nel pensier rinova la paura!
Tant' è amara che poco è più morte;
ma per trattar del ben ch'i' vi trovai,
dirò de l'altre cose ch'i' v'ho scorte.
Io non so ben ridir com' i' v'intrai,
tant' era pien di sonno a quel punto
che la verace via abbandonai.
Ma poi ch'i' fui al piè d'un colle giunto,
là dove terminava quella valle
che m'avea di paura il cor compunto,
guardai in alto e vidi le sue spalle
vestite già de' raggi del pianeta
che mena dritto altrui per ogne calle.
Allor fu la paura un poco queta,
che nel lago del cor m'era durata
la notte ch'i' passai con tanta pieta.
E come quei che con lena affannata,
uscito fuor del pelago a la riva,
si volge a l'acqua perigliosa e guata,
così l'animo mio, ch'ancor fuggiva,
si volse a retro a rimirar lo passo
che non lasciò già mai persona viva.
Poi ch'èi posato un poco il corpo lasso,
ripresi via per la piaggia diserta,
sì che 'l piè fermo sempre era 'l più basso.
Ed ecco, quasi al cominciar de l'erta,
una lonza leggiera e presta molto,
che di pel macolato era coverta;
e non mi si partia dinanzi al volto,
anzi 'mpediva tanto il mio cammino,
ch'i' fui per ritornar più volte vòlto.
Temp' era dal principio del mattino,
e 'l sol montava 'n sù con quelle stelle
ch'eran con lui quando l'amor divino
mosse di prima quelle cose belle;
sì ch'a bene sperar m'era cagione
di quella fiera a la gaetta pelle
l'ora del tempo e la dolce stagione;
ma non sì che paura non mi desse
la vista che m'apparve d'un leone.
Questi parea che contra me venisse
con la test' alta e con rabbiosa fame,
sì che parea che l'aere ne tremesse.
Ed una lupa, che di tutte brame
sembiava carca ne la sua magrezza,
e molte genti fé già viver grame,
questa mi porse tanto di gravezza
con la paura ch'uscia di sua vista,
ch'io perdei la speranza de l'altezza.
E qual è quei che volontieri acquista,
e giugne 'l tempo che perder lo face,
che 'n tutti suoi pensier piange e s'attrista;
tal mi fece la bestia sanza pace,
che, venendomi 'ncontro, a poco a poco
mi ripigneva là dove 'l sol tace.
Mentre ch'i' rovinava in basso loco,
dinanzi a li occhi mi si fu offerto
chi per lungo silenzio parea fioco.
Quando vidi costui nel gran diserto,
«Miserere di me», gridai a lui,
«qual che tu sii, od ombra od omo certo!».
Rispuosemi: «Non omo, omo già fui,
e li parenti miei furon lombardi,
mantoani per patrïa ambedui.
Nacqui sub Iulio, ancor che fosse tardi,
e vissi a Roma sotto 'l buono Augusto
nel tempo de li dèi falsi e bugiardi.
Poeta fui, e cantai di quel giusto
figliuol d'Anchise che venne di Troia,
poi che 'l superbo Ilïón fu combusto.
Ma tu perché ritorni a tanta noia?
perché non sali il dilettoso monte
ch'è principio e cagion di tutta gioia?».
«Or se' tu quel Virgilio e quella fonte
che spandi di parlar sì largo fiume?»,
rispuos' io lui con vergognosa fronte.
«O de li altri poeti onore e lume,
vagliami 'l lungo studio e 'l grande amore
che m'ha fatto cercar lo tuo volume.
Tu se' lo mio maestro e 'l mio autore,
tu se' solo colui da cu' io tolsi
lo bello stilo che m'ha fatto onore.
Vedi la bestia per cu' io mi volsi;
aiutami da lei, famoso saggio,
ch'ella mi fa tremar le vene e i polsi».
«A te convien tenere altro vïaggio»,
rispuose, poi che lagrimar mi vide,
«se vuo' campar d'esto loco selvaggio;
ché questa bestia, per la qual tu gride,
non lascia altrui passar per la sua via,
ma tanto lo 'mpedisce che l'uccide;
e ha natura sì malvagia e ria,
che mai non empie la bramosa voglia,
e dopo 'l pasto ha più fame che pria.
Molti son li animali a cui s'ammoglia,
e più saranno ancora, infin che 'l veltro
verrà, che la farà morir con doglia.
Questi non ciberà terra né peltro,
ma sapïenza, amore e virtute,
e sua nazion sarà tra feltro e feltro.
Di quella umile Italia fia salute
per cui morì la vergine Cammilla,
Eurialo e Turno e Niso di ferute.
Questi la caccerà per ogne villa,
fin che l'avrà rimessa ne lo 'nferno,
là onde 'nvidia prima dipartilla.
Ond' io per lo tuo me' penso e discerno
che tu mi segui, e io sarò tua guida,
e trarrotti di qui per loco etterno;
ove udirai le disperate strida,
vedrai li antichi spiriti dolenti,
ch'a la seconda morte ciascun grida;
e vederai color che son contenti
nel foco, perché speran di venire
quando che sia a le beate genti.
A le quai poi se tu vorrai salire,
anima fia a ciò più di me degna:
con lei ti lascerò nel mio partire;
ché quello imperador che là sù regna,
perch' i' fu' ribellante a la sua legge,
non vuol che 'n sua città per me si vegna.
In tutte parti impera e quivi regge;
quivi è la sua città e l'alto seggio:
oh felice colui cu' ivi elegge!».
E io a lui: «Poeta, io ti richeggio
per quello Dio che tu non conoscesti,
a ciò ch'io fugga questo male e peggio,
che tu mi meni là dov' or dicesti,
sì ch'io veggia la porta di san Pietro
e color cui tu fai cotanto mesti».
Allor si mosse, e io li tenni dietro.*
*
*
*
* 
```

它并没有结束输入......

# wpf - 绑定集合的单个项目

> ID：15975671
> 
> 赞同：2
> 
> 时间：2013-04-12T15:47:44.510
> 
> 标签：wpf, data-binding

我只是从 C++ 背景中学习 WPF 和 XAML 的基本概念，所以其中一些对我来说有点陌生。我正在使用 Expression Blend 来帮助我掌握 XAML。

我正在制作一个在简单 XML 数据源中显示记录的基本应用程序：

```
<photos>
  <photo>
    <image>Assets\Item01.png</image>
    <description>Strawberry</description>
  </photo>
  <photo>
    <image>Assets\Item02.png</image>
    <description>Orange</description>
  </photo>
  <photo>
    <image>Assets\Item03.png</image>
    <description>Pineapple</description>
  </photo>
  ...
</photos> 
```

我已将此数据“photoDataSource”绑定到网格，并粘贴了一些显示第一条记录的文本框和图像字段。在 XAML 中：

```
<Grid x:Name="LayoutRoot" DataContext="{Binding Source={StaticResource photoDataSource}}" Margin="0,0,0,1" Background="#FF1D1D1D">
    <Image Height="104" Width="104" Source="{Binding XPath=/photos/photo/image}" Margin="8,62,0,0" HorizontalAlignment="Left" VerticalAlignment="Top"/>
    <TextBox Height="23" Margin="8,8,6,0" TextWrapping="Wrap" Text="{Binding XPath=/photos/photo/description}" VerticalAlignment="Top"/>
    <TextBox Height="23" Margin="8,35,6,0" TextWrapping="Wrap" Text="{Binding XPath=/photos/photo/image}" VerticalAlignment="Top"/>
    <Button Content="Next Product" Margin="213,97,297,0" Height="44" VerticalAlignment="Top"/>
</Grid> 
```

这将显示两个分别包含“Strawberry”和“Assets\Item01.png”的文本框，以及包含文本“Next Product”的图像和按钮。如您所见，我已将集合“photoDataSource”绑定到父网格。运行时，它会显示集合中的第一项。

如何触发按钮在运行时显示集合（和循环）中的下一个项目？

我不打算使用任何代码隐藏来执行此操作，因为我不会更改任何数据本身，只是显示哪个项目。但也许我以错误的方式解决这个问题？

理想情况下，在此示例之后，我希望完全删除按钮并在情节提要动画完成后自动更改记录（使用触发器`'StoryboardCompletedTrigger'`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:56:12.853

不想在后面使用代码是完全正确的。但是，我建议对您的 Window 实施 ViewModel 以获得您想要的结果。

在您的视图模型中，您应该有一个 Photo 对象的 ObservableCollection 和另一个属性来指定一个名为 SelectedPhoto 的单个照片，如下所示：

```
public ObservableCollection<Photo> MyPhotos {
  get { return _photos; }
  set { _photos = value;
     if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("Photos"));
  }
}

public Photo SelectedPhoto {
  get { return _photo; }
  set { _photo = value; 
     if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("SelectedPhoto"));
  }
} 
```

然后使用 XmlSerialization 将您的 Xml 加载到 ObservableCollection 中。然后创建您的按钮以移动下一个和上一个以绑定到 ICommand（也在您的 ViewModel 中）以每次循环向上或向下循环 MyPhotos 集合设置 SelectedPhoto。

然后你可以在你的 Xaml 中绑定和 Image，如下所示。

```
<Image Source="{Binding Source={StaticResource myViewModel}, Path=SelectedPhoto.Image}"/> 
```

我希望这对您有所帮助，并且有所帮助。

# java - 如何使用 Google Drive REST AP 和 HTTPClient 创建文件夹？

> ID：15975674
> 
> 赞同：1
> 
> 时间：2013-04-12T15:47:58.940
> 
> 标签：java, google-api, google-drive-api, apache-httpclient-4.x

我正在使用带有 HTTPClient 的 Google Drive REST API 创建一个文件夹。REST API is document [here](https://developers.google.com/drive/v2/reference/files/insert#try-it) 请注意，REST AP 请求执行——但使用了错误的数据：tt 创建一个名为“untitled”的新文件并将我的 json 放在那里。

我尝试了使用 HTTPClient 构建 POST 请求的不同方法，这些方法成功执行 - 但 Google Drive 以某种方式响应创建文件并返回此数据并忽略我提交的 POST 数据。

这是服务器以
..响应的内容

"kind": "drive#file", "id": "0B-fYJN-c4UDjUlh1TUZadF9vejA", 这是一个有效的 ID "title": "Untitled", ----错误的标题 "mimeType": "application/json; charset=UTF-8", -- 这是错误的 mimeType ..

我尝试了以下调用 API 的方法：我不确定我与帖子一起发送的数据发生了什么。

1) 使用表单名称值对

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost postRequest = new HttpPost("https://www.googleapis.com/upload/drive/v2/files?key="+GoogleClientConstants.GOOGLE_api_key);

postRequest.addHeader("Authorization", "Bearer " + accessToken);
postRequest.addHeader("Content-Type", "application/json; charset=UTF-8");

List <NameValuePair> nvps = new ArrayList <NameValuePair>();
nvps.add(new BasicNameValuePair("title", "vip"));
nvps.add(new BasicNameValuePair("mimeType", "application/vnd.google-apps.folder"));
postRequest.setEntity(new UrlEncodedFormEntity(nvps, org.apache.http.Consts.UTF_8 ));
HttpResponse response = httpClient.execute(postRequest); 
```

2) 使用字符串实体

```
JSONObject jo= new JSONObject();
jo.element("title", "pets").element("mimeType", "application/vnd.google-apps.folder");

ContentType contentType= ContentType.create("application/json", Charset.forName("UTF-8")) ;
StringEntity entity = new StringEntity(jo.toString(), contentType); 

logger.info(" sending "+ jo.toString());

postRequest.setEntity(entity);

HttpResponse response = httpClient.execute(postRequest); 
```

在这两种情况下，Google API 都会以 200 和上述返回的 FileResource 进行响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T22:34:24.613

我使用您的代码创建了一个小示例。对我来说一切正常。请看我的源代码：

```
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;

import com.google.gson.JsonObject;

public class SourceCodeProgram {

    public static void main(String argv[]) throws Exception {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost post = new HttpPost(
                "https://www.googleapis.com/drive/v2/files");
        post.addHeader("Content-Type", "application/json");
        post.addHeader("Authorization",
                "Bearer XXXXXXXXXXXXXXXXXXXXXXXXX");

        JsonObject jsonObject = new JsonObject();
        jsonObject.addProperty("title", "Test folder");
        jsonObject
                .addProperty("mimeType", "application/vnd.google-apps.folder");

        post.setEntity(new StringEntity(jsonObject.toString()));
        httpClient.execute(post);
    }
} 
```

上面的代码不会抛出任何异常。我检查了我的云端硬盘，我可以在其中看到“测试文件夹”。您在帖子 URL 中输入的密钥是什么？

您为什么不在应用中使用[Google Drive 客户端库](https://developers.google.com/drive/quickstart-java)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:56:20.280

要创建子文件夹，您必须使用父文件夹的 ID，例如在 ID 为 XXX 的父文件夹“super”中创建文件夹“sub”：

```
POST https://www.googleapis.com/drive/v2/files
Authorization: Bearer {ACCESS_TOKEN}
Content-Type: application/json
...
{
  "title": "sub",
  "parents": [{"id":"XXX"}]
  "mimeType": "application/vnd.google-apps.folder"
} 
```

要创建根文件夹，您可以省略“parents”参数

# gis - 使用 GRASS 重写 arcgis 脚本

> ID：15975678
> 
> 赞同：0
> 
> 时间：2013-04-12T15:48:09.177
> 
> 标签：gis

我想看看重写一个包含大量光栅操作的 arcgis python 脚本，所以它可以在 qgis 中使用。我对此很陌生，不确定这有多可行。以下是 arcgis 脚本中的方法：

```
gp = arcgisscripting.create()
gp.OverwriteOutput 
gp.AddWarning
gp.AddMessage
gp.CopyRaster
gp.AddField
gp.CalculateField
gp.extent
gp.PointToRaster
gp.EucDirection
gp.Times
gp.Divide
gp.Minus
gp.SingleOutputMapAlgebra
gp.CreateConstantRaster
gp.Plus
gp.Sample
gp.CellSize
gp.ZonalStatistics
gp.Buffer
gp.PathDistance
gp.Describe
gp.tableselect
gp.ReclassByTable
gp.Reclassify
gp.FocalStatistics
gp.Basin
gp.FlowDirection 
```

这可以使用 python 和 GRASS 吗？看起来这可能比尝试使用 GDAL 更成功。在花时间之前，我想获得一些专家的建议和意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:29:57.903

没有更具体的问题很难说，但也许看看这些功能：

*   v.to.rast

*   r.buffer / v.buffer

*   [r.分水岭](http://ftp.rrzn.uni-hannover.de/pub/mirror/grass/gdp/html_grass63/r.watershed.html)

*   [r.stream.*](http://grasswiki.osgeo.org/wiki/R.stream.*)

对于 GIS 特定问题，您可能会发现在[gis.stackexchange.com](https://gis.stackexchange.com/)上提问很有帮助。

# c# - ThinkTecture身份模型基于Token获取用户

> ID：15975680
> 
> 赞同：0
> 
> 时间：2013-04-12T15:48:17.990
> 
> 标签：c#, asp.net-web-api, token, thinktecture-ident-model

我正在使用 Thinktecture 的甜蜜 Indentity Model 库。我看起来高高在低，可能要问一个愚蠢的问题。基本上，我们有一个 Web 窗体应用程序，我正在向它添加 ASP.net Web api 功能。我安装了身份代码示例并收集了我认为我需要让它为会话令牌工作我能够获得一个令牌并在未来的调用中发回但在我的 API 控制器中似乎没有设置用户对象。我假设框架会在提供令牌时询问令牌并根据令牌数据自动设置委托人并将委托人标记为已验证？这是一个无效的假设吗？这是我必须自己设定的吗？

基本上，我使用令牌进行授权和身份验证，但需要从令牌/会话中提取 UserID 以获取其他业务规则。

再次，如果愚蠢的问题可以随意欺骗我。如果这对任何建议有任何影响，我正在使用单元测试进行测试。

来自单元测试的代码：1）获取令牌，使用我们的业务逻辑成功验证用户并成功返回令牌：

```
 private string GetToken(string username, string password)
    {
        Uri _baseAddress = new Uri(Thinktecture.Samples.Constants.WebHostBaseAddress);

        var client = new HttpClient { BaseAddress = _baseAddress };
        client.SetBasicAuthentication(username, password);

        var response = client.GetAsync("token").Result;
        response.EnsureSuccessStatusCode();

        var tokenResponse = response.Content.ReadAsStringAsync().Result;
        var json = JObject.Parse(tokenResponse);
        var token = json["access_token"].ToString();
        var expiresIn = int.Parse(json["expires_in"].ToString());
        var expiration = DateTime.UtcNow.AddSeconds(expiresIn);
        return token;

    } 
```

2）HTTP帮助方法：

```
 private async Task<HttpResponseMessage> Post<T>(string path, T data, string Token)
    {           
        //var handler = new HttpClientHandler {};

        //using (var client = new HttpClient(handler))
        using (var client = new HttpClient())
        {
            if (!String.IsNullOrEmpty(Token))
            {
                client.SetToken("Session", Token);
                //client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Session", Token);
            }
            client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
            client.BaseAddress = new Uri("http://localhost/");
            var response = await client.PostAsJsonAsync(path, data);

            response.EnsureSuccessStatusCode(); // Throw on error code. 
            return response;
        }
    } 
```

3) 调用代码：

```
string Token = GetToken("UserName", "Password"); 

       removed proprietry code here....
        Task<HttpResponseMessage> result = Post<GetCustomerDetailsRequest>("api/Account/GetCustomerProfile", GetCustomerDetailsRequest, Token); 
```

# algorithm - 算法临界点

> ID：15975684
> 
> 赞同：0
> 
> 时间：2013-04-12T15:48:28.817
> 
> 标签：algorithm

我是一个完整的算法笨蛋，我有这个问题，我需要找到购买未知数量的小部件的最低成本，无论是按单价还是通过批量购买 x 小部件......我确信一个例子会有所帮助： -

1) 小部件每件价格为 0.05 美元 2) 小部件批次价格为每 100 个小部件 4.00 美元

假设我想购买 140 个小部件 -

a) 按单位计算成本是 140 x $0.05c => $7.00 b) 按批次计算成本是 2 批 100 @ $4.00 => $8.00（可以忽略多余的 60 个小部件）

所以在这种情况下按单位购买会便宜 1.00 美元

但是，如果我想购买 190 个小部件，那么 -

a) 按单位计算成本是 190 x $0.05c => $9.50 b) 按批次计算成本是 2 批 100 @ $4.00 => $8.00（可以忽略多余的 10 个小部件）

在这种情况下，批量购买价格会更便宜...

所以我需要找出如何以编程方式找出两种方法之间的“临界点”在哪里以获得最便宜的价格。

我希望我已经解释清楚了，我相信这是一个简单的答案，但我的大脑今天已经快速消退了！

TIA

编辑：：

好的，抱歉——我意识到我没有像我应该的那样清楚——因为有人指出批次和单位的混合也是可能的，因此对于 140 个小部件示例，它也可能是 1 个批次和 40 个单位。

我想要实现的是以编程方式找到购买 X 个小部件的最便宜方式，每个小部件的价格为 $XX，并且还给出了一批价格为 $YY 的 NN 个小部件。

购买批次的任何多余小部件都没有问题，即它可以超过购买的 X，但不能少于 X

因此，对于 140 个示例，1 批 @ 4.00 美元 + 40 个单位 @ 0.05 美元 => 6.00 美元，这是我认为最便宜的。对于 190 个示例，我认为 2 批仍然是最便宜的，因为 1 批 + 90 个单位是 8.50 美元...

我希望那里有一些简洁的方程式可以做到这一点:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:55:16.420

这个问题的答案非常简单，如果你反过来想的话。您已经知道价格的“临界点”。它是 8.00 美元。您不知道的是该点以单位为单位，即 8.00 美元除以 0.05 美元（每单位）=> 160 个单位。

请注意，也有机会以 4.00 美元购买 100 个单位，以 0.05 美元购买 60 个单位，总计 7.00 美元。这是您可能考虑也可能不考虑的第三种可能性。

编辑：编辑后，事情变得更加简单：

您在 $XX 有 1 件商品，在 $YY 有一批 NN 商品。假设 $YY/NN < $XX （意思是批处理实际上省钱），你所要做的就是：

1.  将您的目标数量除以 NN，然后向下取整。你将不得不购买这个数量的批次
2.  将剩余数量乘以 $XX。如果超过 $YY，就多买一批，否则以 $XX 购买剩余数量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:22:53.990

I wrote a basic brute-force style script in python to compare the prices of the two options (up to 1,000 elements). It's not the fastest nor most elegant approach but it appears to work.

The format on the output is: `(<unit-count>, (<per-unit-cost>, <per-batch-cost>))`

```
import math
import itertools
import pprint

unitList = range(1000)
pricePerUnit = .05
pricePerBatch = 4.0
numberPerBatch = 100.0

def calculatePerUnit(units):
  """ Calculate the price of buying per unit
  """
  return units * pricePerUnit

def calculatePerBatch(units):
  """ Calculate the price of buying per batch
  """
  return math.ceil(units / numberPerBatch) * pricePerBatch

def main():
  """ Execute the script
  """
  perUnit = map(calculatePerUnit, unitList)
  perBatch = map(calculatePerBatch, unitList)
  comparisonList = zip(perUnit, perBatch)
  perUnitCheaperPriceList = list(itertools.ifilter(lambda x: x[0] < x[1], comparisonList))
  perUnitCheaperUnitList = map(lambda x: int(x[0] / .05), perUnitCheaperPriceList)                                                                              
  pprint.pprint(zip(perUnitCheaperUnitList, perUnitCheaperPriceList))

if __name__=="__main__":
  main() 
```

And the results:

```
[gizmo@test ~]$ python TippingPoint.py 
[(1, (0.050000000000000003, 4.0)),
 ... These are sequential values I left out for brevity ...
 (79, (3.9500000000000002, 4.0)),
 (101, (5.0500000000000007, 8.0)),
 ... These are sequential values I left out for brevity ...
 (159, (7.9500000000000002, 8.0)),
 (201, (10.050000000000001, 12.0)),
 ... These are sequential values I left out for brevity ...
 (239, (11.950000000000001, 12.0)),
 (301, (15.050000000000001, 16.0)),
 ... These are sequential values I left out for brevity ...
 (319, (15.950000000000001, 16.0))] 
```

# security - 基本身份验证 + SSL - 凭据在服务器上后如何处理？

> ID：15975690
> 
> 赞同：0
> 
> 时间：2013-04-12T15:48:40.857
> 
> 标签：security, authentication, asp.net-mvc-4, asp.net-web-api

假设用户使用基本身份验证提交其凭据。我有一个自定义消息处理程序，它从标头中检索凭据：

```
protected async override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request,
                                                                               System.Threading.CancellationToken
                                                                                   cancellationToken)
        {
            try
            {
                // Request Processing
                var headers = request.Headers;

                if (headers.Authorization != null && SCHEME.Equals(headers.Authorization.Scheme))
                {
                    Encoding encoding = Encoding.GetEncoding("iso-8859-1");
                    string credentials = encoding.GetString(Convert.FromBase64String(headers.Authorization.Parameter));
                    string[] parts = credentials.Split(':');
                    string userId = parts[0].Trim();
                    string password = parts[1].Trim();
                    // TODO: Authentication of userId and Pasword against credentials store here 
```

我想知道 - 当我在这里实际验证用户 ID 和密码时，我很想将这种方法的明文与存储在数据库中的明文进行比较，但我知道这是不安全的。我是否应该同时对来自标头的明文和存储在数据库中的凭据进行哈希处理以进行间接比较？

如果是这样，在它们被散列之前，似乎凭证在消息处理程序中是纯文本的。这是否存在任何类型的安全漏洞，或者可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:34:10.217

有运动的数据和静止的数据。散列通常用于静态数据，特别是密码类型的东西，用户将提交未散列的表单供您散列并与权限进行比较。如果您担心存储的密码是否清晰，请将其散列并存储。从标题中以明文形式检索密码，对其进行哈希处理并与数据库中的密码进行比较。如果您担心通过网络发送密码，则不应使用基本身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:17:00.877

SSL 涵盖了在通过网络传递凭证时以明文形式提供的凭证。

密码绝对应该在数据库中进行散列和加盐处理，并且永远不要以明文形式保存在任何地方。

如果有人对您的服务器进行内存抓取，那么将密码保存在服务器上的字符串变量中确实是个问题。如果发生这种情况，你就会遇到更大的问题。如果您担心最小化该可用性窗口，您可以从标题中获取密码并将其放入字节数组而不是字符串中，这样您就可以在完成后立即清除字节数组。但是，该值已经存储在 中的字符串中`headers.Authorization.Parameter`，因此可能不会给您带来太多好处。

# ruby-on-rails - Rails - 如何加载/lib中的整个文件目录？

> ID：15975692
> 
> 赞同：0
> 
> 时间：2013-04-12T15:48:48.320
> 
> 标签：ruby-on-rails, ruby

我在lib目录中有以下结构：

```
/lib/dir_a/dir_b/dir_c/ 
```

`dir_c`里面是存储的图像。

我正在尝试加载这些图像并将它们显示在视图中。我试图设置视图中图像的路径，但出现 404 错误。

所以我做了以下事情：在文件`initializers`夹中创建了一个文件，然后放入这个文件中：

```
Dir[Rails.root + 'lib/dir_a'].each do |file|
  require file
end 
```

用于加载存储在**dir_a**目录中的所有内容（包括作为文件​​的子目录）。但是当我重新启动服务器时，我收到了这个错误：

```
...dependencies.rb:251:in `require': cannot load such file -- /Users/radek/rubydev/EDI/lib/brands (LoadError) 
```

我也尝试过类似的东西

```
Dir[Rails.root + 'lib/dir_a/'].each do |file| 
```

或者

```
Dir[Rails.root + 'lib/dir_a/**'].each do |file| 
```

但这些都没有帮助我。

因此，有没有办法从**/lib**目录加载内容并在视图中使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:51:42.367

```
Dir[Rails.root + 'lib/**/*.rb'].each do |file|
  require file
end 
```

# facebook - 限制facebook登录权限

> ID：15975699
> 
> 赞同：0
> 
> 时间：2013-04-12T15:49:03.620
> 
> 标签：facebook, facebook-graph-api, login, facebook-login

我想知道是否有一种方法，只有当用户连接到某些网络（例如大学）时，我才允许用户使用 facebook 登录名登录网站。有没有办法做出这些限制？

# c# - OpenPop.Mime 找不到明文

> ID：15975702
> 
> 赞同：0
> 
> 时间：2013-04-12T15:49:16.960
> 
> 标签：c#, asp.net, outlook, plaintext, openpop

我需要从 Outlook 框中恢复所有邮件。我使用 OpenPop 开源，但我无法恢复纯文本（值为 null），我不明白为什么，因为当我检查邮件时，纯文本存在。当我尝试使用 html 版本时，它可以工作，但我的项目中不需要这个。感谢任何可以帮助我的人。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Configuration;
using System.Data.SqlClient;
using System.Globalization;
using System.IO;
using System.Net.Security;
using System.Net.Sockets;
using System.Text;
using System.Windows.Forms;
using OpenPop.Mime;
using OpenPop.Pop3;

namespace EmailGmail
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            string hostname = ***;
            int port = **;
            bool useSsl = true;
            string username = ***;
            string password = ***;

            List<OpenPop.Mime.Message> allaEmail = FetchAllMessages(hostname, port, useSsl, username, password);

            foreach (OpenPop.Mime.Message message in allaEmail)
            {
                OpenPop.Mime.MessagePart plainText = message.FindFirstPlainTextVersion();

                OpenPop.Mime.MessagePart html = message.FindFirstHtmlVersion();

            }
        }

        public static List<OpenPop.Mime.Message> FetchAllMessages(string hostname, int port, bool useSsl, string username, string password)
        {

            // The client disconnects from the server when being disposed
            using (Pop3Client client = new Pop3Client())
            {
                try
                {

                // Connect to the server
                client.Connect(hostname, port, useSsl);

                // Authenticate ourselves towards the server
                client.Authenticate(username, password);

                // Get the number of messages in the inbox
                int messageCount = client.GetMessageCount();

                // We want to download all messages
                List<OpenPop.Mime.Message> allMessages = new List<OpenPop.Mime.Message>(messageCount);

                // Messages are numbered in the interval: [1, messageCount]
                // Ergo: message numbers are 1-based.
                // Most servers give the latest message the highest number
                for (int i = messageCount; i > 0; i--)
                {
                    allMessages.Add(client.GetMessage(i));
                }

                // Now return the fetched messages
                return allMessages;
                }
                catch (Exception ex)
                {
                    return null;
                }

            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T07:30:17.080

我有同样的问题。我通过选择正文的原始数据并使用一种方法将其字节转换为可读文本（字符串）来解决。

```
string Body = msgList[0].MessagePart.MessageParts[0].GetBodyAsText(); 
```

这是你得到的正文。

msgList 是调用 FetchAllMe 消息的结果，它为您提供消息数组。每条消息都有其 MessagePart，其中包含正文。使用 GetBodyAsText 检索正文文本。GetBodyAsText 已经包含在 OpenPop 库中，所以它不是我的方法。

希望这能消除您的疑虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-06T07:21:48.397

```
private void button7_Click(object sender, EventArgs e)
{
    List<OpenPop.Mime.Message> allaEmail = FetchAllMessages(...);

    StringBuilder builder = new StringBuilder();
    foreach(OpenPop.Mime.Message message in allaEmail)
    {
         OpenPop.Mime.MessagePart plainText = message.FindFirstPlainTextVersion();
         if(plainText != null)
         {
             // We found some plaintext!
             builder.Append(plainText.GetBodyAsText());
         } else
         {
             // Might include a part holding html instead
             OpenPop.Mime.MessagePart html = message.FindFirstHtmlVersion();
             if(html != null)
             {
                 // We found some html!
                 builder.Append(html.GetBodyAsText());
             }
         }
    }
    MessageBox.Show(builder.ToString());
} 
```

# java - Spring AOP 切点错误

> ID：15975703
> 
> 赞同：0
> 
> 时间：2013-04-12T15:49:18.417
> 
> 标签：java, spring, aop

我试图捕获覆盖spring的验证方法后发出的所有错误。

我收到以下错误

`Pointcut is not well-formed: expecting ')' at character position 135`

我尝试了很多组合，例如在前后放置“）”并删除，但仍然出现相同的错误。我正在学习 Spring，所以不确定这是否正是实现 aop 的方法。有谁能告诉我哪里错或纠正我

这是实现验证方法的类

```
package com.myapplication.validations

public class MyValidate implements Validator{{

        public boolean supports(Class<?> clazz) {
        return MyValidate.class.equals(clazz);
    }

       public void validate(Object target, MyApplicationErrors errors) {

         //all validations

       }
} 
```

现在在我的 spring application-context.xml 中，我编写了以下 aop

```
<aop:aspectj-autoproxy />

    <bean id="captureErrors"
        class="com.myapplication.aop.CaptureAllErrors" />

    <aop:aspect ref="captureErrors">

        <aop:pointcut id="magicallyCaptureErrors" 
                      expression="execution(* com.myapplication.validations.MyValidate.validate(Object, com.myapplication.allerrors.MyApplicationErrors ))  and args(Object target, com.myapplication.allerrors.MyApplicationErrors errors)" />

        <aop:after-returning pointcut-ref="magicallyCaptureErrors" method="getAllErrors"/>

    </aop:aspect>

    </aop:config> 
```

我的捕获所有错误类如下

```
package com.myapplication.aop
@Aspect
@Component
public class CaptureAllErrors {

public void getAllErrors(Object target, com.myapplication.allerrors.MyApplicationErrors errors){

log.info(errors.toString());
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:53:53.903

您表达式的字符 135 从这里开始：

```
and args(Object target
               ^ 
```

`args()`切入点应该列出参数的类型，而不是类型和名称。所以试试这个：

```
and args(Object, MyApplicationErrors) 
```

还值得指出的是，整个`args()`表达式是多余的，因为`execution()`切入点也指定了方法参数所需的签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:06:54.363

我认为在 135 处有一个额外的 ')' 会提前关闭切入点

验证（对象，com.myapplication.allerrors.MyApplicationErrors ）'）'

expression="execution(* com.myapplication.validations.MyValidate.validate(Object, com.myapplication.allerrors.MyApplicationErrors ) **)** 和 args(Object target, com.myapplication.allerrors.MyApplicationErrors 错误)"

一旦你删除它，你会没事的。

# python - 从 Python 中外部程序的图像标准输出输出创建图像对象

> ID：15975714
> 
> 赞同：0
> 
> 时间：2013-04-12T15:50:04.700
> 
> 标签：python, image, subprocess, stringio

我有一个程序可以生成图片并将它们保存到文件或在标准输出中打印出原始图像数据。我正在使用 Python 子进程模块来调用外部程序，捕获其标准输出数据并从数据中创建 Python 图像对象。不过，我不断收到“无法识别图像文件”错误。我是 Python 的这一部分的新手。如果你知道如何实现这一点，你能帮忙吗？这是我的代码：

```
p = subprocess.Popen(cmd, stdout=subprocess.PIPE)
raw = p.stdout.read()
buff = StringIO.StringIO()
buff.write(raw)
buff.seek(0)
im = Image.open(buff)
im.show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:19:18.053

代码对我来说看起来不错。尝试添加行...

```
assert len(raw) >= 4
assert raw.startswith('\x89PNG') 
```

...直接在线路之后...

```
raw = p.stdout.read() 
```

...只是为了确保您获得甚至模糊有效的数据。

**更新**

试试这个...

```
from subprocess import check_output
from cStringIO import StringIO
from PIL import Image

raw = check_output(cmd)
buff = StringIO(raw)
im = Image.open(buff)
im.show() 
```

**更新#2**

问题是有一个错误`qrcode.exe`，当它写入标准输出时，它会尝试将 UNIX 行结尾转换为 DOS 行结尾。

看起来该错误可能已在更高版本中得到修复。试试：[https ://code.google.com/p/qrencode-win32/downloads/detail?name=qrcodegui_setup-3.3.1b.exe&can=1&q=qrencode-win32](https://code.google.com/p/qrencode-win32/downloads/detail?name=qrcodegui_setup-3.3.1b.exe&can=1&q=qrencode-win32)

# html - 标题重叠正文内容

> ID：15975717
> 
> 赞同：0
> 
> 时间：2013-04-12T15:50:09.187
> 
> 标签：html, css, header

所以我正在设计一个布局并完成了标题。当我开始处理正文内容时，我一直遇到标题会与正文重叠的问题，除非我将正文包装的上边距设置为很大（300 + px），即使屏幕很小时它也可以重叠. 我想我在某个地方搞砸了定位，但我似乎无法弄清楚如何克服这个问题。

我的 HTML：

```
<body>
<div id="pageWrapper">
<div id="mainHeader">
<div id="mainNav">
<div id="navContent">
<div class="mainLogo"></div>
<div style="display: inline-block;">
<ul>
<li><a href="#"><img class="navIcons" src="http://lifeview.michiganweb.org/img/icons/dashboard.png" />Dashboard</a></li>
<li><a href="#"><img class="navIcons" src="http://lifeview.michiganweb.org/img/icons/patient.png" />Patients</a></li>
<li><a href="#"><img class="navIcons" src="http://lifeview.michiganweb.org/img/icons/devices.png" />Devices</a></li>
<li><a href="#"><img class="navIcons" src="http://lifeview.michiganweb.org/img/icons/account.png" />Account</a></li>
<li><a href="#"><img class="navIcons" src="http://lifeview.michiganweb.org/img/icons/support.png" />Support</a></li>
</ul>
</div>
<div class="lvpLogo"><strong>LifeView</strong> Portal</div>
</div>
</div>
<div id="subNav">
<span class="loginName">Doctor Brian Town</span>
</div>
</div>
<div id="bodWrap">
<div class="statWrap"><div class="titleWrap"><span>Chronic Disease Summary</span></div>
<img src="http://lifeview.michiganweb.org/img/icons/support.png" /><img src="img/icons/account.png" /><img src="http://lifeview.michiganweb.org/img/icons/devices.png" /><img src="http://lifeview.michiganweb.org/img/icons/patient.png" />
</div>
<div class="statWrap"><div class="titleWrap"><span>Vital Summary</span></div>

</div>
<div class="statWrap"><div class="titleWrap"><span>Alerts</span></div>

</div>
</div>
</div>
</body> 
```

我的 CSS：

```
@charset "utf-8";
body {
font-family: Verdana,Arial,Helvetica,sans-serif;
font-size: 14px;
}
.pageWrapper {
width: 100%;
position: fixed;
}
.mainLogo {
background:url(http://lifeview.michiganweb.org/img/home_02.png) no-repeat left;
height: 77px;
width: 300px;
display: inline-block;
margin-left: 26px;
margin-right: 30px;
float: left;
}
#mainHeader {
position: absolute;
left: 0;
top: 0;
width: 100%;
overflow: hidden;
border: 1px;
}
#mainNav {
/*height: 109px;*/
width: 100%;
float: left;
left: 0px;
margin: 0px;
padding: 0px;
color: #FFFFFF;
/*background:url(http://lifeview.michiganweb.org/img/home_01.jpg) repeat-x scroll top;*/
/* IE10 Consumer Preview */ 
background-image: -ms-linear-gradient(top, #0e448e 0%, #2b2c2e 100%);
/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(top, #0e448e 0%, #2b2c2e 100%);
/* Opera */ 
background-image: -o-linear-gradient(top, #0e448e 0%, #2b2c2e 100%);
/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #0e448e), color-stop(1, #2b2c2e));
/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(top, #0e448e 0%, #2b2c2e 100%);
/* W3C Markup, IE10 Release Preview */ 
background-image: linear-gradient(to bottom, #0e448e 0%, #2b2c2e 100%);
}
#navContent {
padding-top: 20px;
}
#mainNav #navContent ul {
list-style: none;
margin: 0 auto;
padding: 0; 
}
#mainNav #navContent li {
float: left; 
}
#mainNav #navContent li a {
display: inline-block;
padding: 8px 15px;
text-decoration: none;
font-weight: bold;
color: #FFF;
border-right: 1px solid #ccc;   
}
#mainNav #navContent li:first-child a {
border-left: 1px solid #ccc; 
}
#mainNav #navContent li a:hover {
color: #23afff;
}
#mainNav #navContent h1 {
font-family: Verdana,Arial,Helvetica,sans-serif;
font-size: 24px;
margin-bottom: 2px;
}
.lvpLogo {
margin: auto auto auto auto;
display: inline-block;
word-spacing: 20px;
vertical-align: top;
float: right;
padding-right: 80px;
}
.lvpLogo strong {
font-family: Verdana, Geneva, sans-serif;
font-size: 36px;
margin-bottom: 2px;
}
.navIcons {
display: block;
margin-left: auto;
margin-right: auto;
margin-bottom: 1px;
height: 35px;
width: 35px;
}
#subNav {
overflow: hidden;
height: 40px;
width: 100%;
margin: 0px;
padding: 0px;
color: #000000;
/* IE10 Consumer Preview */ 
background-image: -ms-linear-gradient(top, #FFFFFF 0%, #cccccc 100%);
/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(top, #FFFFFF 0%, #cccccc 100%);
/* Opera */ 
background-image: -o-linear-gradient(top, #FFFFFF 0%, #cccccc 100%);
/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #FFFFFF), color-stop(1, #cccccc));
/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(top, #FFFFFF 0%, #cccccc 100%);
/* W3C Markup, IE10 Release Preview */ 
background-image: linear-gradient(to bottom, #FFFFFF 0%, #cccccc 100%);
}
.loginName {
float: right;
margin-right: 120px;
color: #000000;
font-weight: bold;
line-height: 40px;
margin-bottom: 2px;
}
#bodWrap {
width: 100%;
left: 0px;
padding: 0px;
color: #000000;
}
.statWrap {
margin: 10px auto auto auto;
border: 2px solid #000;
border-radius: 19px;
width: 80%;
background-color: #eee;
}
.titleWrap {
postion: absolute;
background-color: #00639c;
top: 0;
height: 30px;
border-radius: 30px;
}
.titleWrap span {
color: #FFFFFF;
font-weight: bold;
margin: auto auto auto 33px;
line-height: 30px;
} 
```

JSfiddle： http: [//jsfiddle.net/Artsen/tKdqh/](http://jsfiddle.net/Artsen/tKdqh/) 测试环境： [http ://lifeview.michiganweb.org/](http://lifeview.michiganweb.org/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T15:55:35.070

我更新了你的 jsfiddle，请看这里：[更新的代码](http://jsfiddle.net/tKdqh/1/)

基本上我将mainHeader div更改`position:absolute;`为 a`position:relative;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:56:33.850

`position:absolute`仅从 #mainHeader css 中删除

**在这里演示**

[http://jsfiddle.net/tKdqh/2/](http://jsfiddle.net/tKdqh/2/)

# java - 方法不完全奏效？可能是什么错误？

> ID：15975718
> 
> 赞同：0
> 
> 时间：2013-04-12T15:50:11.107
> 
> 标签：java, variables, runtime-error, development-environment

我只是在做一些项目，但我找不到以下代码有什么问题：

```
double getInterest(double amt,double tax){  
        double diff=0;
        double refund=0;
        double interest=0;
        if(amt>=(tax*0.4)){
           diff=amt-(tax*0.4);
           System.out.println(" "+diff);  //This is not working.Nothing gets printed.
           refund=diff;                   //The value is not being assigned to refund.
        }                                 //refund remains to be 0 throughout.
         interest=diff*0.01*12;
         if(refund>0){
            JOptionPane.showMessageDialog(null,"Your refund is: "+refund);
         }
        return interest;
} 
```

我无法找出代码中的任何错误。但它仍然没有完全工作。
错误以注释的形式在代码中给出。
有人帮我找出错误并解决这个问题吗？

我不知道为什么`diff`不打印的值以及为什么不将值`diff`分配给变量`refund`。

我在 NetBeans 中工作，它没有给出任何类型的编译时错误。

我试图通过`println`同时使用`diff`和来检查这些值，`refund`但是这些值没有被打印出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:03:20.303

[`BigDecimal`](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)处理货币时应始终使用类型以避免[双精度问题](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)。

这是重写的代码`BigDecimal`

```
BigDecimal getInterest(final BigDecimal amount, final BigDecimal tax) {
    BigDecimal diff = BigDecimal.ZERO;
    BigDecimal refund = BigDecimal.ZERO;
    BigDecimal reducedTax = new BigDecimal("0.4").multiply(tax);
    System.out.println("Amount is " + amount + ". Tax times 0.4 is " + tax + ".");
    if (amount.compareTo(reducedTax) >= 0) {
        diff = amount.subtract(reducedTax);
        System.out.println(diff);
        refund = diff;
    }
    BigDecimal interest = diff.multiply(new BigDecimal("0.01")).multiply(new BigDecimal("12"));
    if (refund.compareTo(BigDecimal.ZERO) > 0) {
        JOptionPane.showMessageDialog(null, "Your refund is: " + refund);
    }
    return interest;
} 
```

是的，我知道它更丑陋。它也会慢很多。但它是新的*正确*的。

关于您的问题，大概代码没有输入，`if`因为`amount`不大于`tax * 0.4`- 如果您确定它是那么也许您已经遇到了双精度问题。

我`println`在 the 之前添加了一个，`if`这样您就可以在测试发生之前看到这些值是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:55:25.380

好吧，如果块中的语句`if`从不执行，这意味着在参数满足条件的情况下永远不会调用此方法`amt >= (tax*0.4)`。所以真正的问题是，你传递给这个方法的值是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:55:46.883

您的括号在第 一个括号之前`if(amt>=(tax*0.4){` 缺少一个右括号。确保检查包围并确保在选项菜单中打开了所有错误（如果可以）。`)``{`

由于括号错误，此代码不应编译。检查 Netbeans 是否正在编译正确的项目，因为这应该在编译时发疯。

# css - 我正在尝试将文本与表单的选择元素内的中心对齐。它在 Firefox 中而不是在 Chrome 中运行良好：有什么想法吗？

> ID：15975720
> 
> 赞同：1
> 
> 时间：2013-04-12T15:50:12.310
> 
> 标签：css, forms, google-chrome, browser, text-align

我正在尝试将文本与表单的选择元素内的中心对齐。它在 Firefox 中运行良好，但文本仍然在 Chrome 中左对齐：有什么想法吗？

这是CSS：

```
.top-search select{
  background: #fff;
  border: 1px solid #ccc;
  width: 190px;
  height: 28px;
  text-align: center;
  padding-top: 4px;
} 
```

在 FF 中可以正常工作，但在 Chrome 中不行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:44:00.587

我知道样式选择不是一件容易的事。您可以更改某些内容（高度和边框），但不能更改其他属性。更多的是由浏览器来决定它的样式以及您可以更改多少。所以看起来 FF 允许您在 Chrome 不允许的情况下更改它。在这种情况下，我认为这完全取决于浏览器（和操作系统）。

# php - $_REQUEST['signed_request'] 中没有 auth_token、userId

> ID：15975722
> 
> 赞同：0
> 
> 时间：2013-04-12T15:50:17.703
> 
> 标签：php, facebook

为什么 facebook 向我返回没有 userId 和 oauth_token 字段的签名请求 ($_REQUEST['signed_request'])？当我解码签名的请求时，这就是我所拥有的：

```
Array ( 
         [algorithm] => HMAC-SHA256
         [issued_at] => 1365781115     
         [user] => Array ( 
                           [country] => ar 
                           [locale] => es_LA 
                           [age] => Array ( [min] => 21 )
                          ) 
     ) 
```

user_id 和 oauth_token 字段在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:29:50.117

您必须首先解码签名的请求。看看[这里的文档](https://developers.facebook.com/docs/howtos/login/signed-request/)

或者试试这个：

```
//save signed request for decoding
$srq = $_REQUEST['signed_request'];

function parse_signed_request($srq) {
  list($encoded_sig, $payload) = explode('.', $srq, 2); 

  // decode the data
  $sig = base64_url_decode($encoded_sig);
  $data = json_decode(base64_url_decode($payload), true);
  $GLOBALS['sdata'] = $data;//set a superglobal for later use
  return ($data);
}

function base64_url_decode($input) {
  return (base64_decode(strtr($input, '-_', '+/')));
}

//call the signer req. decode
parse_signed_request($srq); 
```

信息 UID 和 Token 可以通过以下方式获得：

```
$sdata['oauth_token'];
$sdata['user_id']; 
```

这就是我使用的，可能不是超级全球最干净的，但是嘿，我是 PHP 的新手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:53:48.190

您获得的字段是默认字段。签名请求包含该字段`user_id`，并且`oauth_token`仅当用户已登录您的应用程序或之前已授权您的应用程序时。
有关**signed_request**中可用字段的详细信息，请查看[文档](http://developers.facebook.com/docs/reference/login/signed-request/)。

# asp.net - 带有 ControllerName/ExampleID 的 ASP.NET MVC URL 路由

> ID：15975724
> 
> 赞同：0
> 
> 时间：2013-04-12T15:50:24.567
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-routing

当我将浏览器导航到 url 时出现此错误：

```
localhost:10793/RealEstates/10 
```

这是我的 RouteConfig 代码：

```
 public class RouteConfig
    {
       public static void RegisterRoutes(RouteCollection routes)
       {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}",
            defaults: new { controller = "Main", action = "Index" }
        );
        routes.MapRoute(
            name: "RealEstates",
            url: "RealEstates/{action}",
            defaults: new { controller = "RealEstates", action = "Index" }
        );
        routes.MapRoute(
            name: "RealEstatesViewAd",
            url: "RealEstates/{id}",
            defaults: new { controller = "RealEstates", action = "ViewAd", id = UrlParameter.Optional }
        );
    }

} 
```

我的错误：

```
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 
```

当将代码更改为：

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        //routes.MapRoute(
        //    name: "Default",
        //    url: "{controller}/{action}",
        //    defaults: new { controller = "Main", action = "Index" }
        //);
        //routes.MapRoute(
        //    name: "RealEstates",
        //    url: "RealEstates/{action}",
        //    defaults: new { controller = "RealEstates", action = "Index" }
        //);
        routes.MapRoute(
            name: "RealEstatesViewAd",
            url: "RealEstates/{id}",
            defaults: new { controller = "RealEstates", action = "ViewAd", id = UrlParameter.Optional }
        );
    }

} 
```

这是工作，但是当我在控制器中调用其他操作时

> 本地主机：10793/RealEstates/CreateAd

发现这个错误

> 参数字典包含“Youe3lan.Controllers.RealEstatesController”中方法“System.Web.Mvc.ActionResult ViewAd(Int32)”的不可为空类型“System.Int32”的参数“id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

这是我的控制器：

```
 namespace MvcAppliction1.Controllers
{    
    public class RealEstatesController : Controller
    {        
        public ActionResult Index()
        {
            return View();
        }
        public ActionResult ViewAd(int id)
        {
            return View();
        }
        public ActionResult CreateAd()
        {
            return View();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:52:46.573

您需要将其更改为：

```
routes.MapRoute(
        name: "RealEstatesViewAd",
        url: "RealEstates/{action}/{id}",
        defaults: new { controller = "RealEstates", action = "ViewAd", id UrlParameter.Optional }
    );}} 
```

看看这里它可能会有所帮助：

[http://msdn.microsoft.com/en-us/library/cc668201(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/cc668201(v=vs.100).aspx)

**更新**

将此添加到您的控制器：

```
public ActionResult ViewAd(Int32 id)
{
    return View();
} 
```

你看

本地主机：10793/RealEstates/10

被翻译成：

本地主机：10793/RealEstates/ViewAdd/10

因此，您需要控制器中的该方法接受 it 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:59:01.540

您已将路线中的 id 标记为可选：

```
id = UrlParameter.Optional 
```

但我敢打赌你的控制器不可为空？？

```
public ActionResult ViewAd(Int32 id)
{

} 
```

因此，即使路线允许，您也不能将 null 发布到您的 id 中。如果您将其更改为：

```
public ActionResult ViewAd(Int32? id)
{

} 
```

您不会收到错误消息：

> 参数字典包含“Youe3lan.Controllers.RealEstatesController”中方法“System.Web.Mvc.ActionResult ViewAd(Int32)”的不可为空类型“System.Int32”的参数“id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

# android - 无法让 clipChildren=false 属性起作用

> ID：15975725
> 
> 赞同：36
> 
> 时间：2013-04-12T15:50:25.437
> 
> 标签：android, view

我有一个黄色`RelativeLayout`包含一个更高的红色`LinearLayout`。

为了使整体`LinearLayout`可见，我设置了`android:clipChildren="false"`，但这不能按预期工作：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="44dp"
    android:background="#FFFF00"
    android:clipChildren="false" >

    <LinearLayout
        android:layout_width="50dp"
        android:layout_height="100dp"
        android:background="#FF0000"
        android:orientation="vertical" >

    </LinearLayout>

</RelativeLayout> 
```

*   与`android:clipChildren="true"`：

![在此处输入图像描述](https://i.stack.imgur.com/PVzPH.png)

红色`LinearLayout`按预期剪裁

*   与`android:clipChildren="false"`：

![在此处输入图像描述](https://i.stack.imgur.com/Umc3P.png)

其中`LinearLayout`高度被剪裁，并且布局中设置的宽度不受尊重。

怎么了？

**编辑**

如果我将容器包装在`LinearLayout`两个尺寸与其父级匹配的容器中，我会得到相同的结果（我检查了 LinearLayout 容器的容器是否填满了整个屏幕）。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="44dp"
        android:background="#FFFF00"
        android:clipChildren="false" >

        <LinearLayout
            android:layout_width="50dp"
            android:layout_height="100dp"
            android:background="#FF0000"
            android:orientation="vertical" >
        </LinearLayout>
    </RelativeLayout>

</LinearLayout> 
```

**编辑 2**

如果我将`android:clipChildren="false"`属性放在父 LinearLayout 中，我会得到以下信息：

![在此处输入图像描述](https://i.stack.imgur.com/mtLXn.png)

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2014-10-23T13:08:08.147

`android:clipChildren="false"` allows each child to draw outside of its own bounds, within the parent. It doesn't allow children to draw outside of the parent itself. For that you would need to set `android:clipChildren="false"` on the grandparent (as well).

I think what you're seeing with the colors is just because colors have no inherent bounds. If there is nothing clipping them, colors go forever. My theory is that if you used, say, a stretched 1x1 px image instead of a color, things would be different.

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-10-24T08:01:04.937

Also set

```
android:clipToPadding="false" 
```

Beside:

```
android:clipChildren="false" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-01T09:34:33.803

A trick which can solve your problem is to add some placeholder view

```
<View
  android:layout_width="wrap_content"
  android:layout_height="1dp"
  android:background="?android:attr/listDivider"
  android:layout_alignParentBottom="true"/> 
```

in the relative layout and boom!

# Explanation

For me the boundary of relative layout seems to be different than the height. The boundary seems to be where the content ends or where the parent ends. Adding some view to the bottom sets the boudary at the bottom so everything works fine.

# filepicker.io - 在节约口粮的同时扩大规模

> ID：15975726
> 
> 赞同：0
> 
> 时间：2013-04-12T15:50:37.860
> 
> 标签：filepicker.io

使用[convert 方法](https://developers.filepicker.io/docs/web/#convert)后，我希望能够在指定高度和宽度的情况下转换横向或纵向图像，而无需更改比率。

从文档中，“**剪辑**”选项的作用如下：

> *   ' **clip** '：调整图像大小以适应指定参数，而不扭曲、裁剪或更改纵横比

如果我有一个 200x50 的图像并且我想要一个 150x150 的结果，这将导致一个 150x37px**大小**的图像，其比例与原始图像相同。如果我有一个 100x50 的图像并且我想要一个 150x150 的结果，这将产生一个 150x75px**大小**的图像，其比例与原始图像相同。

> *   ' **crop** '：通过删除图像中不适合边界的任何部分来调整图像大小以完全适合指定的参数

如果我有一个 200x50 的图像并且我想要一个 150x150 的结果，这将导致一个 150x37px 的**裁剪**图像。

> *   ' **scale** '：通过将图像缩放到所需大小来调整图像大小以完全适合指定的参数

如果我有一个 200x50 的图像并且我想要一个 150x150 的结果，这将导致一个 150x150px**大小**的图像，其中比例已更改为适合。

> *   ' **max** '：调整图像大小以适应参数，但与'clip'相反，如果图像小于输出大小，则不会缩放图像

与“剪辑”中的输出相同，除了如果我有一个 100x50 的图像并且我想要一个 150x150 的结果，这将导致一个 100x50 像素的**调整大小**的图像，其比例与原始图像相同。

我想要的是能够使图像保持其比例并具有所需的尺寸（如果需要，可以使用垂直和水平居中）。这将导致图像既不失真也不被剪裁。

我知道这项任务有些棘手，因为您必须确定用什么颜色填充空间（请参阅[ImageMagick 文档关于空间填充](http://www.imagemagick.org/Usage/resize/#space_fill)）。

任何见解都会很棒，希望它不是一个边缘案例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:10:36.003

我们目前不提供用背景颜色“填充”图像的空白部分的功能，因此不支持此用例。我们正在考虑在短期内添加它，并会在添加时更新您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:53:31.320

查看 ImageMagick 文档中的这组示例：

[http://www.imagemagick.org/Usage/thumbnails/#square](http://www.imagemagick.org/Usage/thumbnails/#square)

# bash - GREP - Linux / Unix 实用程序是用什么语言编写的？

> ID：15975727
> 
> 赞同：0
> 
> 时间：2013-04-12T15:50:43.237
> 
> 标签：bash, unix, grep, cut

我很好奇 Linux 内核中内置的实用程序是用哪种语言编写的，例如 grep、cut、awk、find 等。

这些是否已编译并且不能被 cat'ed 和查看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:55:35.047

GNU 工具可以在 GNU 项目托管页面[http://savannah.gnu.org/](http://savannah.gnu.org/)上找到。

在那里您可以查看例如 grep 的源代码：http: [//git.savannah.gnu.org/cgit/grep.git](http://git.savannah.gnu.org/cgit/grep.git)。

Linux 本身不是操作系统，而是内核。您提到的工具形成了所谓的用户空间，它与内核分离。将 GNU 工具与 Linux 内核（和一些胶水）结合起来形成了[GNU/Linux 操作系统](http://www.gnu.org/gnu/linux-and-gnu.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T15:53:32.933

Linux 内核主要是用 C 语言编写的。您可以通过以下方式获得它：

```
 git clone git://github.com/torvalds/linux.git 
```

然后看你喜欢的任何东西。支持命令`awk`等可以在[GNU Software](http://www.gnu.org/software)的“All GNU Packages”下找到。

# python - 为什么我的循环不迭代？

> ID：15975729
> 
> 赞同：0
> 
> 时间：2013-04-12T15:50:55.877
> 
> 标签：python, unit-testing, metaprogramming

为什么外循环只执行最后一次迭代？

```
class LanguageSpecificTest(unittest.TestCase):

    # Body omitted

for style in [  "inline", "inline_scripted",
                "external", "external_scripted",
                "internal", "internal_scripted",
            ]:
    print style

    for language, text_id, direction, text, check_text in (
                ("french", "reply_1", "с французского", "жизнь", "В большом дворце, в Ферраре, в один зимний вечер"),
            ):

        test_name = 'test_translation_test_phrases_for_%s_pages' % language
        def my_test_generator(language, text_id, check_text):
            def ubergenerator(self):
                #####
            return ubergenerator
        t = my_test_generator(language, text_id, check_text)
        t.__name__ = test_name
        setattr(LanguageSpecificTest, test_name, t) 
```

当我启动测试时，它会打印：

```
inline
inline_scripted
external
external_scripted
internal
internal_scripted
http://127.0.0.1:5000/translate?lang=french&style=internal_scripted 
```

并且只通过一项测试，而不是六项。为什么我看不到

```
http://127.0.0.1:5000/translate?lang=french&style=inline
http://127.0.0.1:5000/translate?lang=french&style=inline_scripted
http://127.0.0.1:5000/translate?lang=french&style=external
http://127.0.0.1:5000/translate?lang=french&style=external_scripted
http://127.0.0.1:5000/translate?lang=french&style=internal
http://127.0.0.1:5000/translate?lang=french&style=internal_scripted 
```

哦，上帝，拯救我的星期五晚上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T15:55:50.543

```
 test_name = 'test_translation_test_phrases_for_%s_pages' % language
    setattr(LanguageSpecificTest, test_name, t) 
```

您只`language`在 中使用`test_name`，因此当您转到不同`style`的 s 时会覆盖相同的属性。

# java - 将 ArrayList 的内容与结果集进行比较

> ID：15975736
> 
> 赞同：1
> 
> 时间：2013-04-12T15:51:18.910
> 
> 标签：java, arraylist, compare, resultset

我有 String ArrayList 与结果集进行比较。

例如：ArrayList 元素

```
ITM001
ITM002
ITM003
ITM004 
```

例如：结果集 1

```
ITM001
ITM002
ITM003
ITM004 
```

包含所有元素
返回 ArrayList Empty；

例如：结果集 2

```
ITM001
ITM002
ITM004 
```

缺少 ITM003
返回 ArrayList ITM003；

例如：结果集 3

```
ITM001
ITM002 
```

缺少 ITM003，ITM004
返回 ArrayList ITM003，ITM004；

> 如果Resultset 不包含Arraylist 的所有元素，则那些缺失的元素必须作为ArrayList 返回。否则返回空的 ArrayList。

这是我尝试过的。

```
public static ArrayList<String> checkStoreItems(String currentStore, ArrayList<String> stlist) throws ClassNotFoundException, SQLException {
        Connection conn = DBConnection.conn();
        String sql = "select itemId from Store_Items where storeID=(select storeID from StoreMain where locationName=?)";
        Object []values ={currentStore}; 
        ResultSet res = DBHandller.getData(sql, conn, values);
        ArrayList<String> storelist = new ArrayList<String>();
        while(res.next()){
              String item = res.getString("itemId");
              for (int i = 0; i < stlist.size(); i++) {
                    if (item.contains(stlist.get(i))) {
                          continue;     
                    }else{
                          storelist.add(item);
                    }
              }

        }

        return null;

  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T16:16:54.790

如果我正确理解了你的问题，你可以尝试这样的事情：

```
 public static ArrayList<String> checkStoreItems(String currentStore, 
                       ArrayList<String> stlist) throws ClassNotFoundException, SQLException {
    Connection conn = DBConnection.conn();
    String sql = "select itemId from Store_Items where storeID=(select storeID from StoreMain where locationName=?)";
    Object []values = {currentStore}; 
    ResultSet res = DBHandller.getData(sql, conn, values);
    Set<String> storelist = new HashSet<String>();
    while(res.next()){
          String item = res.getString("itemId");
          storelist.add(item);
   }
    stlist.removeAll(storelist);
    return stlist;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:14:41.487

使用`HashSet`'`removeAll`方法执行操作。您首先需要将每个来源的元素放入`HashSet`.

这避免了在使其成为 O(n) 操作而不是 O(n^2)的过程中遍历整个`ArrayList`元素的需要。`ResultSet`

```
ArrayList<String> diffResultSet(Collection<String> coll, ResultSet resultSet, int column) {
    Set<String> collSet = new HashSet<String>(coll);
    Set<String> resultSetSet = new HashSet<String>();
    while (resultSet.next()) {
        resultSetSet.add(resultSet.getString(column));
    }
    collSet.removeAll(resultSetSet);
    return new ArrayList<String>(collSet);
} 
```

# c++ - 运算符重载clang++和g++不同的输出

> ID：15975739
> 
> 赞同：9
> 
> 时间：2013-04-12T15:51:25.113
> 
> 标签：c++, name-lookup

通过这个示例程序，我观察到 g++ 和 clang 中的不同行为

富.h：

```
#include <iostream>

namespace Bar
{

class Foo
{
public:

    Foo(int x) : _x(x)
    {}

    int x() const
    {
        return _x;
    }

private:

    int _x;
};

}

std::ostream& operator <<(std::ostream& os, const Bar::Foo* foo); 
```

Foo.cpp

```
#include <Foo.h>

using namespace std;

ostream& operator <<(ostream& os, const Bar::Foo* foo)
{
    return os << foo->x();
} 
```

主文件

```
#include <iostream>

using namespace std;

template<typename T>
void print(const T& t)
{
    cout << t << endl;
}

#include <Foo.h>

int main(int argc, char** argv)
{
    Bar::Foo* foo = new Bar::Foo(5);
    print(foo);
} 
```

用 clang++ 和 g++ 编译会产生不同的结果：

```
air:~ jose$ clang++ Foo.cpp main.cpp -I.
air:~ jose$ ./a.out
0x7ff9e84000e0
air:~ jose$ g++ Foo.cpp main.cpp -I.
air:~ jose$ ./a.out
5 
```

哪一个是正确的，为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T16:14:31.330

在这种特殊情况下，clang++ 是正确的。

问题是如何在模板中执行查找`print`。在表达式里面`print`调用*isdependent*。*从属名称*的名称解析在 14.6.4 中处理：`operator<<`

 **> 在解析从属名称时，会考虑来自以下来源的名称：
> 
> — 在模板定义时可见的声明。
> 
> — 来自实例化上下文 (14.6.4.1) 和定义上下文中与函数参数类型相关联的命名空间的声明。

在您的情况下，您的运算符的声明在模板的定义点不可见，因为标头是在之后包含的，并且它不存在于函数参数的任何关联命名空间中（即`::std`for`::std::ostream`和`::Bar`for `::Bar::Foo*`），所以不会被发现。

现在，有一个`::std`需要 a的重载`void*`，并且将由 Argument Dependent Lookup 找到。将`::Bar::Foo*`转换为 a`void*`并打印地址。

也就是说，在符合标准的编译器中。

我忘记在此处添加此内容，仅将其留在评论中，但这很重要：

**始终**在包含它们所应用的类型的同一命名空间中定义适用于您的类型的运算符。让 Argument Dependent Lookup 为您带来神奇的效果。它是专门为服务于这个特定目的而设计的，使用它。**

# php - 验证来自 cURL 的完整响应

> ID：15975740
> 
> 赞同：0
> 
> 时间：2013-04-12T15:51:25.537
> 
> 标签：php, curl, web-scraping

有时在我的 PHP 脚本中使用多个并发连接并使用 cURL 抓取时，会返回不完整的网页。是否有一些价值`curl_getinfo()`可以让我知道网页是 100% 获取还是仅 90% 获取？

返回页面的内容大小标题是返回内容的实际大小还是整个页面？如果是这样，我可以根据响应的实际大小检查内容大小。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:04:18.460

假设您的问题是您是否可以检查内容大小标头是否来自另一方或在您这边计算，是的，您可以使用该标头检查您是否收到完整的响应，因为它是在另一方生成的从实际预期的内容。不过有几点：

*   是`Content-Length`，不是`Content-Size`；
*   只要您信任对方设置正确即可使用；
*   它可能不可用，因为虽然它应该存在，但并非绝对必要。

# matlab - 在Matlab中比较双打

> ID：15975744
> 
> 赞同：2
> 
> 时间：2013-04-12T15:51:40.413
> 
> 标签：matlab

我正在编写一个程序，让我在 Matlab 中为行星的轨道设置动画。这是有效的，但我想显示他们在特定时间间隔内完全绕太阳运行的次数。我一直在通过将它们开始的位置与当前位置进行比较来做到这一点：`abs(current_position - begin_position < precision`。但这是我的问题：每个行星及其数据的精度都非常不同。就像木星一样，我必须将这个精度设置为 0.2，而对于海王星，它必须是 0.001，所以我不能只说`precision = 0.2`，因为如果我这样做，它会与我的其他行星产生故障。是否有另一种方法来比较这些数字或另一种方法来实现这一点？我也一直在尝试使用角度，但效果并不好。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:11:36.537

我会使用一个向量来存储每个行星的精度。但是，如果位置匹配，您将必须检查每次迭代，然后增加轨道数的计数器。

为什么角度会给你带来问题？您可以累积角度，减去初始角度，然后计算模数 360（或 2*pi）以了解轨道数。

# python - Tkinter 对象中的新线程生命周期

> ID：15975745
> 
> 赞同：2
> 
> 时间：2013-04-12T15:51:41.320
> 
> 标签：python, multithreading, tkinter

我在使用 Tkinter GUI 中的线程类时遇到了问题。在启动 Tkinter GUI 时，我使用守护程序创建新的 Threading & Queue 对象并启动它。在 Tkinter GUI 中，我有一个调用内部方法的按钮。然后此方法调用 Queue 对象上的 put 并在下面发布。Threading 对象执行我期望的所有必要操作。

```
def my_method_threaded(self, my_name):
    try:
        self.queue.put(("test", dict(name=my_name)))
        self.label_str_var.set('')
        self.queue.join()
    except:
        self.error_out(msg=traceback.format_exc()) 
```

但是，我在完成后遇到了一个问题。如果我调用`self.queue.join()`，则该`set`调用永远不会执行，并且应用程序在线程完成其任务后冻结。如果我注释掉`join()`命令，`set`调用就会执行，但按钮只会在第一次工作，之后什么都不做（我`run()`正在使用记录器跟踪该方法正在做什么。它只在第一次被调用）。

我假设调用 join() 和 Tkinter 循环存在问题，这就是出现第一个问题的原因。任何人都可以对第二个问题有所了解吗？如果您需要更多代码，请告诉我。

编辑：我刚刚注意到的第二个问题是`while True`循环执行我的操作两次，即使我已经调用了`self.queue.task_done()`. run 方法的代码如下：

```
 def run(self):
    args     = self._queue.get()
    my_name  = args[1]["name"]
    while True:
      if my_name == "Barry":
          #calls a static method elsewhere

      self.queue.task_done() 
```

# sql - VB.net sql表不显示最后一行

> ID：15975748
> 
> 赞同：0
> 
> 时间：2013-04-12T15:51:47.487
> 
> 标签：sql, vb.net, sql-server-ce-3.5

我在做什么-

1.  从 excel 表中将 406 行导入到 5 个 sql 表中。
2.  导入后，我在按钮单击事件中将数据一一手动保存到 5 个表中的每一个中，并显示在 datagridview 上。
3.  保存每条记录后，我正在刷新 datagridview。

我的问题 -

1.  记录已正确保存，但 datagridview 仅显示 408 条记录，实际没有。记录是 412。
2.  从服务器资源管理器查看时，也只显示 408 条记录。
3.  但是表属性显示有 412 行。
4.  这个问题只有第一张桌子。

我的代码：-

```
cmd.CommandText = String.Empty
        cmd.Parameters.Clear()
        cmd.CommandText = "INSERT into pd([Adm No],[DOA],[Name],[Course],[Fees Due],[Concession],[Contact No 1]," & _
                         "[Contact No 2],[E-Mail],[Year of Passing],[Address],[DOB],[College])" & _
                         " values(@admno,@doa,@name,@course,@totalfees,@concession,@contactno1,@contactno2,@email,@yop," & _
                         "@address,@dob,@college)"
        cmd.Parameters.AddWithValue("@admno", i.ToString)
        cmd.Parameters.AddWithValue("@doa", date_format.format_date(doa.Value.Date))
        cmd.Parameters.AddWithValue("@name", txt_name.Text)
        cmd.Parameters.AddWithValue("@course", combo_course.SelectedItem.ToString)
        cmd.Parameters.AddWithValue("@totalfees", txt_totalfees.Text)
        cmd.Parameters.AddWithValue("@concession", txt_concession.Text)
        cmd.Parameters.AddWithValue("@contactno1", txt_contact1.Text)
        cmd.Parameters.AddWithValue("@contactno2", txt_contact2.Text)
        cmd.Parameters.AddWithValue("@email", txt_email.Text)
        cmd.Parameters.AddWithValue("@yop", txt_yop.Text)
        cmd.Parameters.AddWithValue("@address", txt_address.Text)
        cmd.Parameters.AddWithValue("@dob", date_format.format_date(dob.Value.Date))
        cmd.Parameters.AddWithValue("@college", txt_college.Text)
        If con.State = ConnectionState.Closed Then
            con.Open()
        End If
        cmd.Connection = con
        cmd.ExecuteNonQuery()

        'save fees details
        cmd.CommandText = String.Empty
        cmd.Parameters.Clear()
        cmd.CommandText = "INSERT into fees([Adm No],[Name],[Fees Due],[Fees Paid],[No of Installments]," & _
                          "[Installment Amounts],[Receipt Nos],[Dates of Transaction],[Mode],[Bank],[Due Date]" & _
                          ",[Total Fees],[Concession],[Cheque No],[Course])" & _
                          " values(@admno,@name,@feesdue,@feespaid,@noi,@instamnt,@rcno,@dot,@mode,@bank,@dd," & _
                          "@total,@concession,@chqno,@course)"
        cmd.Parameters.AddWithValue("@admno", i.ToString)
        cmd.Parameters.AddWithValue("@name", txt_name.Text)
        cmd.Parameters.AddWithValue("@feesdue", (CInt(txt_totalfees.Text) - CInt(txt_concession.Text)))
        cmd.Parameters.AddWithValue("@feespaid", CInt(0))
        cmd.Parameters.AddWithValue("@noi", CInt(0))
        cmd.Parameters.AddWithValue("@instamnt", "")
        cmd.Parameters.AddWithValue("@rcno", "")
        cmd.Parameters.AddWithValue("@dot", "")
        cmd.Parameters.AddWithValue("@mode", "")
        cmd.Parameters.AddWithValue("@bank", "")
        cmd.Parameters.AddWithValue("@dd", "")
        cmd.Parameters.AddWithValue("@total", CInt(txt_totalfees.Text))
        cmd.Parameters.AddWithValue("@concession", txt_concession.Text)
        cmd.Parameters.AddWithValue("@chqno", "")
        cmd.Parameters.AddWithValue("@course", combo_course.SelectedItem.ToString)
        If con.State = ConnectionState.Closed Then
            con.Open()
        End If
        cmd.Connection = con
        cmd.ExecuteNonQuery()

        'save photo
        If Not PictureBox1.Image Is Nothing Then
            cmd.CommandText = String.Empty
            cmd.Parameters.Clear()
            cmd.CommandText = "Insert into img values(@adm,@name,@imge)"
            Dim para As New SqlCeParameter("imge", SqlDbType.Image)

            Dim ms As New MemoryStream
            PictureBox1.BackgroundImage.Save(ms, PictureBox1.BackgroundImage.RawFormat)
            Dim data As Byte() = ms.GetBuffer
            para.Value = data
            cmd.Parameters.AddWithValue("@adm", lb_admno.Text)
            cmd.Parameters.AddWithValue("@name", txt_name.Text)
            cmd.Parameters.Add(para)
            If con.State = ConnectionState.Closed Then
                con.Open()
            End If
            cmd.Connection = con
            cmd.ExecuteNonQuery()
        Else
            cmd.CommandText = String.Empty
            cmd.Parameters.Clear()
            cmd.CommandText = "Insert into img values(@adm,@name,@imge)"
            Dim para As New SqlCeParameter("imge", SqlDbType.Image)

            Dim ms As New MemoryStream
            PictureBox1.BackgroundImage.Save(ms, PictureBox1.BackgroundImage.RawFormat)
            Dim data As Byte() = ms.GetBuffer
            para.Value = data
            cmd.Parameters.AddWithValue("@adm", lb_admno.Text)
            cmd.Parameters.AddWithValue("@name", txt_name.Text)
            cmd.Parameters.Add(para)
            If con.State = ConnectionState.Closed Then
                con.Open()
            End If
            cmd.Connection = con
            cmd.ExecuteNonQuery()
        End If

        cmd.CommandText = String.Empty
        cmd.Parameters.Clear()
        cmd.CommandText = "insert into attend values(@adm,@name,@course,@dt,@stat)"
        cmd.Parameters.AddWithValue("@adm", lb_admno.Text)
        cmd.Parameters.AddWithValue("@name", txt_name.Text)
        cmd.Parameters.AddWithValue("@course", combo_course.SelectedItem.ToString)
        cmd.Parameters.AddWithValue("@dt", "")
        cmd.Parameters.AddWithValue("@stat", "")
        If con.State = ConnectionState.Closed Then
            con.Open()
        End If
        cmd.Connection = con
        cmd.ExecuteNonQuery()

        cmd.CommandText = String.Empty
        cmd.Parameters.Clear()
        cmd.CommandText = "insert into testdb values(@adm,@name,@course,@tname,@tdate,@marksob,@marksout)"
        cmd.Parameters.AddWithValue("@adm", lb_admno.Text)
        cmd.Parameters.AddWithValue("@name", txt_name.Text)
        cmd.Parameters.AddWithValue("@course", combo_course.SelectedItem.ToString)
        cmd.Parameters.AddWithValue("@tname", "")
        cmd.Parameters.AddWithValue("@tdate", "")
        cmd.Parameters.AddWithValue("@marksob", "")
        cmd.Parameters.AddWithValue("@marksout", "")
        If con.State = ConnectionState.Closed Then
            con.Open()
        End If
        cmd.Connection = con
        cmd.ExecuteNonQuery() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:15:00.373

问题出在导入记录的代码中。我正在读取 excel 文件的单元格并将它们插入到五个表中。

> 仅当我将所有五个表中的记录一一导入时才会出现问题，但如果我仅将记录导入三个表中则不会出现问题。

这解决了我的问题，但我不知道它背后的实际原因。为什么我不能一个接一个地把记录导入五个表？如果有人找到错误背后的原因，请发表评论。

# matlab - 图上的 MATLAB 简单滑块

> ID：15975758
> 
> 赞同：3
> 
> 时间：2013-04-12T15:52:08.087
> 
> 标签：matlab, matlab-figure

我有一个矩阵要一次绘制一列。是否可以将滑块添加到 MATLAB 图（无需繁重的 GUI 编程），以便通过移动滑块，在当前轴上显示不同的列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:50:15.810

创建滑块的代码是合理的最少的：

```
uicontrol('Style', 'slider', 'Callback', @sliderCallback);

function sliderCallback(hObject, evt)
    fprintf('Slider value is: %d\n', get(hObject, 'Value') );
end 
```

您将需要查看诸如`Position`、 设置图形上的位置`Max`以及`Min`设置可能的值范围等属性。另请注意，如果您在函数中执行此操作，`sliderCallback`则可以是嵌套函数，这可能会使重绘显示变得更容易。如果您在脚本中运行它，`sliderCallback`则必须在单独的文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T17:21:21.487

这是滑块绘制相应列的代码：

```
m = ones(5,1)*(1:5);
slmin = 1;
slmax = size(m,2);
plot(m(:,1))
hsl = uicontrol('Style','slider','Min',slmin,'Max',slmax,...
                'SliderStep',[1 1]./(slmax-slmin),'Value',1,...
                'Position',[20 20 200 20]);
set(hsl,'Callback',@(hObject,eventdata) plot(m(:,round(get(hObject,'Value')))) ) 
```

* * *

**编辑**：

为了获得更好的性能，您可以只更新`YData`值：

```
set(hsl,'Callback',@(hObject,eventdata) ...
    set(hline,'YData',m(:,round(get(hObject,'Value')))) ) 
```

要修复 y 轴限制，只需`ylim([0 6])`在第一次`plot`调用后手动设置它们。

# c++ - 包装 Boost ptree 以保留加载的 xml 标记的映射

> ID：15975764
> 
> 赞同：0
> 
> 时间：2013-04-12T15:52:34.880
> 
> 标签：c++, templates, boost

如标题所述：

 `````
struct AXmlConfigurator : private boost::noncopyable {
protected:
    std::string configuration_file_;
    std::map<std::string, std::string> parameters_;
    ptree ptree_;

public:

    AXmlConfigurator(const std::string &argConfigurationFile) :
        configuration_file_(argConfigurationFile) {
        read_xml(configuration_file_, ptree_);
    }

    ~AXmlConfigurator() {}

    template<typename Type> inline
    Type get(const std::string & argPath, Type argDefault) const {
        Type value = ptree_.get<Type>(argPath, argDefault);
        parameters_.insert(std::pair<std::string,std::string>(argPath, value));
        return value;
    }

    template<class Type , class Translator> inline
    typename boost::enable_if<detail::is_translator<Translator>, Type>::type
    get(const std::string &argPath, const Type &argDefault, Translator tr) const {
        Type value = ptree_.get(argPath, argDefault);
        parameters_.insert(std::pair<std::string,std::string>(argPath, value));
        return value;
    }
    void logConfiguration() {
        for(std::map<std::string, std::string>::const_iterator it = parameters_.begin() ; it != parameters_.end() ; ++it) {
            std::cout << (*it).first << " => " << (*it).second << std::endl;
        }
    }

}; 
````  `我想包装 boost::property_tree::ptree 以将参数/值作为字符串存储到映射中，然后通过 logConfiguration 显示它们。

问题是地图的插入不接受值作为字符串，因为值类型未指定......

我没有想法，所以任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:45:02.710

由于您*需要*数据为 a `std::string`，因此请更改：

```
 Type value = ptree_.get<Type>(argPath, argDefault); 
```

至：

```
 std::string value = ptree_.get<std::string>(argPath, argDefault);
//  ^^^^^^^^^^^                    ^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T21:16:16.007

好吧，这就是我最终所做的，它非常令人兴奋，但我并不追求这件事的表现，所以它会完成这项工作：

 `````
template<typename Type>
Type get(const std::string & argPath, Type argDefault) {
    std::string value = "a";
    try {
        value = ptree_.get<std::string>(argPath);
    } catch(ptree_bad_path &e) {
        return argDefault;
    }

    parameters_.insert(std::pair<std::string, std::string>(argPath,value));
    return ptree_.get<Type>(argPath, argDefault);
}

template<class Type , class Translator>
typename boost::enable_if<detail::is_translator<Translator>, Type>::type
get(const std::string &argPath, const Type &argDefault)  {
    std::string value = "";
    try {
        value = ptree_.get<std::string>(argPath);
    } catch(ptree_bad_path &e) {
        return argDefault;
    }

    parameters_.insert(std::pair<std::string,std::string>(argPath, value));
    return ptree_.get(argPath, argDefault);
} 
````  `我只是按照 Drew 的建议将参数作为字符串检索，只是在需要时捕获异常并返回默认值...````

# html - 水平排列下拉子菜单项，包裹（修改后的 TwentyTwelve WordPress 主题）

> ID：15975772
> 
> 赞同：1
> 
> 时间：2013-04-12T15:53:07.417
> 
> 标签：html, css, wordpress, navigation, html-lists

我正在开发的网站使用修改后的 WordPress TwentyTwelve 主题。该主题的标准下拉菜单已修改为在子菜单打开时将内容下推：

**问题：**我想沿着内容区域的整个宽度（960px 宽）整齐地排列子菜单，而不是让它们彼此下拉。如果子菜单项的数量很大，我希望子菜单包含几行，但将项目排列成整齐的垂直行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:46:27.070

这是我的看法。目前，您的子菜单仅限于其父菜单。为了实现你想要的，我认为你需要做很多重组。我会将您的子菜单分开并将它们直接放在主菜单下方。您可以对子菜单项进行编码以占用 960px 宽度（我知道，即使您使用的是 wordpress，也可以手动操作），如果需要，可以将较长的子菜单设置为两行。给每个子菜单一个唯一的 id 并将它们设置为 display:none 在 css 中。您的主菜单 li 已经具有唯一标识符，因此您可以为特定 li 创建 css 规则。像这样的东西：

```
#menu-item-58:hover + #submenu1 {display:block;}
#submenu1 {display:none;}
#submenu1:hover{display:block;} //so submenu doesn't disappear when mouse hovers over. 
```

这是一个你可以看到的例子，我使用了 div，但你可以相应地改变它：http: [//jsfiddle.net/H3WB6/](http://jsfiddle.net/H3WB6/)

# drupal - 如何将动态生成的 Drupal 菜单转换为静态菜单？

> ID：15975775
> 
> 赞同：0
> 
> 时间：2013-04-12T15:53:32.140
> 
> 标签：drupal, dynamic, menu

有没有办法将动态生成的菜单转换为静态菜单，以使它们可用于增强菜单的模块？

例如 Book Navigation 块生成一个菜单，但如果你想用 `Superfish`or增强它`Nice Menus`，它不会出现在菜单列表中。

这是另一个例子 -

```
<?php
  $book_top_page= YOUR_NID;
  $tree = menu_tree_all_data(book_menu_name($book_top_page));
  print drupal_render(menu_tree_output($tree));
?> 
```

此代码生成一个菜单，但它不能自动添加到标准菜单中。有没有办法从生成的代码中生成正确的编辑器菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:16:41.493

如果您专门谈论 nice_menus 那么您可以将菜单传递给 theme_nice_menu 以生成您需要的输出。

这是[一个 D6 示例](http://drupal.org/node/236418#comment-1024401)：

```
<?php
  $menu = theme('nice_menu', 1, 'book-toc-1', NULL, 'down');
  print $menu['content'];
?> 
```

我希望 superfish 具有类似的主题功能，并且如果您使用的是 D7，我还希望 D7 的语法几乎相同。

# php - 使用 exec() 时真的守护一个命令吗？

> ID：15975777
> 
> 赞同：1
> 
> 时间：2013-04-12T15:53:32.920
> 
> 标签：php, process, exec, parent-child, daemon

从我的 apache 服务器的 PHP 页面中，我使用如下行运行一些命令：

```
exec("{$command} >> /tmp/test.log 2>&1 & echo -n \$!"); 
```

您可以在[此处](https://stackoverflow.com/questions/12341421/multi-threading-in-php/12341511#12341511)查看参数的解释。

但我不明白一些事情：如果我重新启动或停止我的 apache 服务器，我的命令也会死掉。

```
root@web2:/sx/temp# ps ax | grep 0ff | grep -v grep
15957 ?        S      0:38 /usr/bin/php /sx/site_web_php/fr_FR/app/console task:exec /sx/temp/task_inventaire/ 0ff79bf690dcfdf788fff26c259882e2d07426df 10800
root@web2:/sx/temp#  /etc/init.d/apache2 restart
Restarting web server: apache2 ... waiting ..
root@web2:/sx/temp# ps ax | grep 0ff | grep -v grep
root@web2:/sx/temp# 
```

经过一些研究，我阅读了一些关于父 pid 的内容，但是`&`在我的命令行中使用 a 时，我认为我真的将我的子进程与他的父进程分离了。

我将 apache2 与 libapache2-mod-php5 和 apache2-mpm-prefork 一起使用。

**我如何才能真正将我的子程序与 apache 分离？**

# 编辑

您可以通过这种方式在 Linux/Mac 上重现它：

a) 创建一个 execute_script.php 文件，其中包含：

```
<?php
sleep(10); 
```

b) 创建一个 execute_from_http.php 文件，其中包含：

```
<?php
exec("php executed_script.php > /tmp/test.log 2>&1 & echo -n \$!"); 
```

c) 运行`http://localhost/path/execute_from_http.php`

d) 在终端上，运行命令：

```
ps axjf | grep execute | grep -v grep ; sudo /etc/init.d/apache2 restart ; ps axjf | grep execute | grep -v grep 
```

如果您在 execute_from_http.php 脚本的 10 秒内运行该命令，您将获得以下输出：

```
php@beast:/var/www/xxx/$ ps axjf | grep execute | grep -v grep ; sudo /etc/init.d/apache2 restart ; ps axjf | grep execute | grep -v grep
    1  5257  5245  5245 ?           -1 S       33   0:00 php executed_script.php
 * Restarting web server apache2
 ... waiting    ...done.
php@beast:/var/www/xxx/$ 
```

如您所见，该`ps`命令仅输出一次，这告诉您执行的脚本在 apache 重新启动时死亡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T19:03:40.000

# “在”方法

我找到了一个可行的解决方案，但如果我们谈到性能和安全性，我不知道这是否可以。它使用`at`命令，一种只工作一次的 cron。

代替 ：

```
exec("php executed_script.php > /dev/null 2>&1 & echo -n \$!"); 
```

利用 ：

```
exec("echo 'php executed_script.php > /dev/null 2>&1' | at now -M"); 
```

关键是`executed_script.php`它将由外部守护程序 (atd) 运行，因此`executed_script.php`将是 apache 的子进程`atd`而不是 apache 的子进程。

```
php@beast:/var/www/xxx$ ps axjf | grep execute | grep -v grep ; sudo /etc/init.d/apache2 restart ; ps axjf | grep execute | grep -v grep
 7032  7033   973   973 ?           -1 SN      33   0:00          \_ php executed_script.php
 * Restarting web server apache2
 ... waiting    ...done.
 7032  7033   973   973 ?           -1 SN      33   0:00          \_ php executed_script.php
php@beast:/var/www/xxx$ ps ax | grep 973
 973 ?        Ss     0:00 atd 
```

注意几件事：

*   您无法访问已运行应用程序的 pid，如果您`$!`像我之前的代码一样，您将获得`at`.
*   您需要删除`www-data`默认情况下存在的`/etc/at.deny`内容（可能是有原因的，所以要小心）
*   我对性能有严重的怀疑：我认为`at`写在一个读取的文件上以`atd`进行通信

* * *

# fork/setsid 方法

正如@hek2mgl 在其自己的答案中所写，我们可以使用 a `pcntl_fork()`，但这并不那么简单。首先，你不能`pcntl_fork()`在 apache 后面运行，因为如果我们查看 PHP Manual, [Introduction of the Process Control](http://php.net/manual/en/intro.pcntl.php)，我们可以看到：

> 不应在 Web 服务器环境中启用流程控制，如果在 Web 服务器环境中使用任何流程控制功能，可能会出现意外结果。

进行分叉时，您会在内存中获得父进程的两个精确副本。并且因为 apache 后面的 PHP 作为模块运行，所以在 PHP 执行结束时（甚至在 a 之后`die()`），你回到 apache 的模块包装器，你无法控制正在发生的事情。

所以这里是一个中间命令的场景，它将守护你的执行：

1）从 Apache，您运行将创建您的守护程序命令的中间命令：

```
$command = escapeshellarg("php executed_script.php");
exec("php run_as_daemon.php {$command} >> /dev/null 2>&1 &"); 
```

2）中间命令分叉并用于`posix_setsid`真正**分离**您的命令。

```
<?php

if (!isset($argv[1]))
{
    exit;
}
$command = $argv[1];

$pid = pcntl_fork();
if ($pid < 0) // error
    exit;
else if ($pid) // parent
    exit;
else // child
{
    $sid = posix_setsid(); // creates a daemon

    if ($sid < 0)
        exit;

    exec("{$command} >> /dev/null 2>&1 &");
} 
```

3）您执行的命令当然不会改变：

```
<?php
sleep(10); 
```

结果 ：

```
php@beast:/var/www/xxx/$ wget -qO- http://localhost/xxx/execute_from_http.php && sleep 1 && ps axjf | grep execute | grep -v grep ; sudo /etc/init.d/apache2 restart ; ps axjf | grep execute | grep -v grep
    1 19958 19956 19956 ?           -1 S       33   0:00 php executed_script.php
 * Restarting web server apache2 ......done.
    1 19958 19956 19956 ?           -1 S       33   0:00 php executed_script.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:59:28.560

首先请注意，您示例中的 '&' 只是一个布尔值 AND，它连接了*command*和*echo*。如果要在*后台*启动命令，这意味着 exec 将立即返回，请`&`在命令行的最末尾使用：

```
exec("{$command} >> /tmp/test.log 2>&1 & echo -n \$! &"); 
```

* * *

如果您希望进程在 apache 完成后运行，您必须使用[`pcntl_fork()`](http://www.php.net/manual/en/function.pcntl-fork.php)

这里有一个例子：

```
$pid = pcntl_fork();

switch($pid) {
    case -1 : die ('Error while forking');

    case 0:  // daemon code
         posix_setsid(); // create new process group
         exec("{$command} >> /tmp/test.log 2>&1 & echo -n \$!");
         break;
    default: 
         echo 'daemon started';
         break;

} 
```

现在在开始的 PHP 脚本中没有任何代码来处理它的返回值`exec`和它的输出。所以当前进程可以在完成之前`exec`完成。此后，工作进程将归其所有`init`。

* * *

你也可以看看 PEAR 包[`System_Daemon`](http://pear.php.net/package/System_Daemon)。这可以帮助守护脚本。

# sql - Active Record 查询收集 2 个属性

> ID：15975780
> 
> 赞同：1
> 
> 时间：2013-04-12T15:53:44.870
> 
> 标签：sql, ruby, ruby-on-rails-3, activerecord

使用 rails/active 记录时，查询/收集每个对象 2 或 3 个属性的最佳方法是什么？

一个例子是，如果我想查询我的用户表并获取特定类型用户的所有用户 ID 和电子邮件。

如果我只想获取用户 ID，我会这样做

```
User.where(:condition => nil).collect {|u| u.id} 
```

但是如果我想要 id 和 email 怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:55:39.003

`id`只需将and收集到`email`一个数组中：

```
User.where(:condition => nil).collect {|u| [u.id, u.email]} 
```

或者，如果您想要以下形式的哈希`{:id => :email}`：

```
User.where(:conditions => nil).inject({}) {|m, u| m[u.id] = u.email; m} 
```

如果您告诉数据库仅使用以下方式获取您需要的字段，则可以稍微提高效率`select`：

```
User.where(:conditions => nil).select([:id, :email]).
     collect {|u| [u.id, u.email]} 
```

# javascript - 您可以在 javascript 字符串插值中执行三元表达式吗？

> ID：15975785
> 
> 赞同：1
> 
> 时间：2013-04-12T15:53:59.450
> 
> 标签：javascript, jquery, interpolation

我有这个变量：

```
var foobar = "Hi, my name is #{name}"; 
```

但是，如果在页面加载时未定义名称.. 我希望它保存“未知”。

但是写这样的东西：

```
var foobar = "Hi, my name is #{typeof name === 'undefined' ? 'unknown' : name}"; 
```

仍然返回错误，`unknown variable name`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:59:28.573

与其在字符串构造中进行逻辑决策，不如在外部进行以获得更好的性能和（远）更具可读性的代码：

`name = name||'unknown';`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T16:00:23.267

我认为更好的方法是：

```
var name = name || "Unknown";
var foobar = 'Hi my name is ' + name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:56:37.887

把名字放进去就行了。如果它未定义或为空，则为“假”。

```
var foobar = "Hi, my name is " + name ? name : 'unknown'; 
```

# javascript - 语言=“javascript”与类型=“文本/javascript”

> ID：15975786
> 
> 赞同：16
> 
> 时间：2013-04-12T15:54:00.377
> 
> 标签：javascript, html

为了将 JavaScript 添加到 HTML，我看到人们使用

```
<script language=javascript> 
```

和

```
<script type="text/javascript"> 
```

脚本是嵌入的还是外部的似乎不会影响这个决定。

哪个是首选，为什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-12T15:55:37.147

`<script language="javascript">`在*非常*旧的浏览器中使用，已被弃用。

`<script type="text/javascript">`是 HTML 4 标准。

在 HTML 5 中，`type`参数是可选的（`text/javascript`是默认的），所以你可以只做`<script>`.

作为一个巧妙的技巧，如果你放了一个 invalid `type`，脚本将不会运行，但你仍然可以在 JavaScript 中读取数据。一些模板库会这样做。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T15:55:09.460

该[`language`属性已弃用](https://developer.mozilla.org/en-US/docs/HTML/Element/script)。仅使用`type`。您不需要`type`在 HTML5 中指定，默认情况下它是 javascript。

# android - getGsmBitErrorRate 在 Android 上总是返回 255

> ID：15975787
> 
> 赞同：2
> 
> 时间：2013-04-12T15:54:02.970
> 
> 标签：android, parameters, gsm

我需要在 Android 上获取 BER，我正在使用这样的 SignalStrength的**getGsmBitErrorRate方法**

```
public void onSignalStrengthsChanged(SignalStrength signalStrength) {
        super.onSignalStrengthsChanged(signalStrength);

        Log.e("onSignalStrengthsChanged: ", "GSM Cinr = "
                + signalStrength.getGsmSignalStrength()); 
    } 
```

在 PhoneStateListener 中。

根据 TS 27.007 8.5，预期返回 id **(0-7, 99)**，但在我的应用程序中，它只返回**255**！

这个数字有什么解释，还是真的错了？如果它错了，为什么要退回它？

谢谢

# php - XAMPP不识别php，必须全部替换 我在使用 XAMPP 时遇到问题。它不能正确识别 php。例如： <?php echo "This is working !"; ?> 这不是： <? echo "L O L"; ?> 使用 XAMPP v.3.0.12 问问题 问问题 2013-04-12T15:54:23.593 3566 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在使用 XAMPP 时遇到问题。它不能正确识别 php。例如： <?php echo "This is working !"; ?> 这不是： <? echo "L O L"; ?> 使用 XAMPP v.3.0.12 在您的 php.ini 中有一个允许短标签的选项，只需将其打开即可。它会工作，即 short_open_tag = on phptagsxampp 4 4 回答 4 This answer is useful 6 您必须short_open_tag在 php.ini中启用 但是，出于与您无法控制 php.ini 的系统的兼容性原因，我不会使用短打开标签。 于 2013-04-12T15:55:43.220 回答 This answer is useful 3 那是因为 XAMPP 关闭了 php 短标签。这是一件好事，因为许多环境默认情况下具有相同的设置，并且有些环境不允许您重新打开它。但请注意，从 php 5.4 开始，<?= ?>标签不算作短标签，并且可以在短标签关闭时使用。 于 2013-04-12T15:56:03.240 回答 This answer is useful 2 在您的 php.ini 中有一个允许短标签的选项，只需将其打开即可。它会工作，即 short_open_tag = on 于 2013-04-12T15:55:32.110 回答 This answer is useful 1 您需要在 php.ini 文件中进行更改 short_open_tag = on 注意：不要使用短标签，它会在 PHP 6 中贬值 于 2013-04-12T15:58:38.257 回答 Related 1 java - 如何将哈希映射转换为可缓存映射 4 c# - 在对实体框架 DAL 进行单元测试时，是否有任何理由使用 Mock 对象？ 1 c# - 如何使用片段标识符导航到 url？ 2 html - 字体颜色与原始设计不同（电子邮件通讯） 1 android - 带有 faceDetection 的 GalaxyNexus 问题 2 java - mysql jdbc 应用超过用户名最大长度（16 个字符） 5 c++ - 指向对象的指针将指向 C++ 中的对象范围之外的内容 1 javascript - 密码检查器未按预期工作 1 javascript - jquery循环 - 即使图像比浏览器窗口宽，也保持幻灯片居中 1 matlab - 基于位置的图像对象分割（在 Matlab 中） Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15975795
> 
> 赞同：1
> 
> 时间：
> 
> 标签：php, tags, xampp

我在使用 XAMPP 时遇到问题。它不能正确识别 php。例如：

```
<?php echo "This is working !"; ?> 
```

这不是：

```
<? echo "L O L"; ?> 
```

使用 XAMPP v.3.0.12

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T15:55:43.220

您必须`short_open_tag`在 php.ini中启用

但是，出于与您无法控制 php.ini 的系统的兼容性原因，我不会使用短打开标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T15:56:03.240

那是因为 XAMPP 关闭了 php 短标签。这是一件好事，因为许多环境默认情况下具有相同的设置，并且有些环境不允许您重新打开它。但请注意，从 php 5.4 开始，`<?= ?>`标签不算作短标签，并且可以在短标签关闭时使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T15:55:32.110

在您的 php.ini 中有一个允许短标签的选项，只需将其打开即可。它会工作，即

```
short_open_tag =  on 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T15:58:38.257

您需要在 php.ini 文件中进行更改

```
short_open_tag = on 
```

**注意**：不要使用短标签，它会在 PHP 6 中贬值

# python - 在派生类中覆盖 assertEqual 时出现 TypeError

> ID：15975799
> 
> 赞同：1
> 
> 时间：2013-04-12T15:54:27.973
> 
> 标签：python, unit-testing

我用我自己的类覆盖`unittest.TestCase`，我想在其中添加一些额外的功能`assertEqual`：

```
class MyTestCase(unittest.TestCase):        
    def __init__(self,*args, **kwargs):
        unittest.TestCase.__init__(self, *args, **kwargs)

    def _write_to_log(self):
        print "writing to log..."

    def assertEqual(self, first, second, msg=None):
        self._write_to_log()
        unittest.TestCase.assertEqual(first, second, msg) 
```

但我得到了`TypeError: unbound method assertEqual() must be called with TestCase instance as first argument (got int instance instead)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:59:18.017

您忘记传递`self`给`assertEqual`：

```
unittest.TestCase.assertEqual(self, first, second, msg) 
```

您应该`super()`在整个覆盖过程中真正使用：

```
class MyTestCase(unittest.TestCase):        
    def __init__(self,*args, **kwargs):
        super(MyTestCase, self).__init__(*args, **kwargs)

    def assertEqual(self, first, second, msg=None):
        self._write_to_log()
        super(MyTestCase, self).assertEqual(first, second, msg) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:56:57.590

您`assertEqual`作为类方法调用，而不传递实例：这就是 Python 抱怨该方法*未绑定*的原因。

您可能应该使用：

```
super(MyTestCase, self).assertEqual(first, second, msg) 
```

# c++ - c++ do children fit in their parents slots?

> ID：15975800
> 
> 赞同：0
> 
> 时间：2013-04-12T15:54:31.070
> 
> 标签：c++, class, object, parent

In my java class i remember making a barn class that held animal class objects, and my chicken and cow classes (which were children of the animal class) would fit into the barn as if they were their parents.

i was wondering if c++ also allowed this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T15:56:02.653

Yes it does. The general concept is called the [Liskov Substitution Principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle).

One issue to be aware of that arises in C++ but not in Java is slicing: [What is object slicing?](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:58:19.037

In your java example you probably held a reference to a `Animal` class. In such case you can use any descendant class of `Animal` class in that reference.

The same is with C++, if you use a pointer to the instance. Like:

```
class Barn
{
public:
    Animal* animal;
};

class Animal
{
public:
};

class Chicken : public Animal
{
public:
}; 
```

The `Barn::animal` can reference even `Chicken` class.

I hope this helps.

# c# - "{" 和 "}" SendKeys.Send-Methode 转换器

> ID：15975804
> 
> 赞同：-1
> 
> 时间：2013-04-12T15:54:37.923
> 
> 标签：c#

我想使用`SendKeys.Send-Methode`.

the`{`和 the`}`有特殊的含义。我的文本确实包含`{`并且`}`虽然。

所以我想先转换我的文本。我想过这样的事情：

```
 static void Main(string[] args)
    {
        string text = "blub{ibu{blab}blab";
        Console.WriteLine(text);
        Console.WriteLine(convertForSendKey(text));
        Console.ReadKey();
    }

    public static string convertForSendKey(string password)
    {
            if (password.Contains('{'))
            {
                string[] parts = password.Split('{');
                string tmp = parts[0];
                for (int i = 1; i < parts.Length; i++)
                {
                    tmp += "{{}" + parts[i];
                }
                password = tmp;
            }
            if (password.Contains('}'))
            {
                string[] parts2 = password.Split('}');
                string tmp2 = parts2[0];
                for (int i = 1; i < parts2.Length; i++)
                {
                    tmp2 += "{}}" + parts2[i];
                }
                password = tmp2;
            }
            return password;
    } 
```

当然它不会那样工作，因为在第二个`if`它也会转换所有`{{}`部分，这是它不应该的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T15:57:33.963

尝试**`{{`**或**`\{`**为该符号转义。**`}}`**和_**`\}`**

此外，您的字符替换代码错误。尝试使用[`string.Replace`](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx).

```
string one = "abc";
string two = one.Replace("c", " dd");

// two is "ab dd". 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:04:15.837

也许是这样的：

```
static string EscapeChar(char c)
{
    switch (c)
    {
        case '{':
            return "{{}";
        case '}':
            return "{}}";
        default:
            return c.ToString();

    }
}

public static string ConvertForSendKey(string password)
{
    return String.Concat(password.Select(EscapeChar));
} 
```

如果可行，它首先使用 LINQ 扩展方法`Select`将每个字符投影到其相关字符串上。然后它将`Concat`所有短字符串粘合在一起。

# javascript - javascript font-resizer 在 IE8 或 IE7 中不起作用

> ID：15975809
> 
> 赞同：0
> 
> 时间：2013-04-12T15:54:52.867
> 
> 标签：javascript, jquery, css, internet-explorer-8, internet-explorer-7

我正在尝试创建一个站点范围的字体大小调整器，但大多数实现似乎都希望我通过 id 或类来定位元素，而不是站点范围。

我试图通过设置我的页面以这个 CSS 开头来完成我的任务：

*   html = 83%
*   正文,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,p,blockquote,th,td 等... = 1em

然后，我有一些 jquery 可以获取当前应用的字体大小，增加它并重新应用它。

但它不适用于 IE8 或 IE7。（震惊）

```
var currentFontSize = $('html').css('font-size');
var currentFontSizeNum = parseFloat(currentFontSize, 10);
var newFontSize = currentFontSizeNum*1.05;
$("html").css('cssText', 'font-size: ' + newFontSize + 'px !important'); 
```

如果我 console.log out 这些值，它在那些浏览器中计算得很好，但在这些浏览器中似乎有一些关于相对字体大小的东西。我还尝试将所有内容重置为 100%，而不是 1em，但这也不起作用。

示例[**jsfiddle**](http://jsfiddle.net/scott_in_ct/YyWNn/)（但此站点不适用于 ie8 或更低版本.....）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:00:06.350

您正在应用没有任何单位的大小。添加`px`到大小：

```
$('html').css('font-size', newFontSize + 'px'); 
```

* * *

旁注：该`parseFloat`函数不采用任何基数参数：

```
var currentFontSizeNum = parseFloat(currentFontSize); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T14:37:26.253

我无法让它在 IE8 和 IE7 中工作，所以我更改了我的代码以将一个类应用于 html 对象（body 也可以工作）。然后，在 IE8 和 IE7 css 文件中，我有样式来监听这些类并相应地调整它们的大小。

# javascript - 使用javascript区分表单中的两个提交按钮

> ID：15975810
> 
> 赞同：5
> 
> 时间：2013-04-12T15:55:03.013
> 
> 标签：javascript, forms

如何找出在javascript中单击了哪个提交按钮？

```
function submitForm(){
   //if find open popup
   //else if add continue in the same window

}

<form action="/findNames" onsubmit="return submitForm()">
    <input type="submit" value="Add" onclick="submitForm(this)"/>
    <input type="submit" value="Find" onclick="submitForm(this)"/>
</form> 
```

* * *

**我尝试过的：**

我尝试使用 onclick 来代替，但是当单击“查找”按钮时，它会打开一个弹出窗口并提交父窗口。如何阻止它提交父窗口？

```
function submitForm(submit){
    if(submit.value=="Find"){
        find();//opens a popup window
    }else if(submit.value == "Add"){
        //stay in the same window
    } 
}

function find(){
    var width  = 1010;
    var height = 400;           
    var params = 'width='+width+', height='+height;     
    popupWin = window.open('find.do','windowname5', params);
    popupWin.focus();
}

<form action="/findNames">
    <input type="submit" value="Add" onclick="submitForm(this)"/>
    <input type="submit" value="Find" onclick="submitForm(this)"/>
</form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T15:58:16.097

An `input`of`type="submit"`将始终提交表单。使用`input`of`type="button"`来创建一个不提交的按钮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T16:49:24.110

您走在正确的轨道上，但您的表单总是被提交，因为您没有取消事件（或者，用 DOM Level 2+ 的说法，您没有“阻止事件的默认操作”）。

```
function submitForm (button)
{
  if (button.value == "Find")
  {
    /* open popup */
    find();
  }
  else if (button.value == "Add")
  {
    /* stay in the same window */
  } 

  return false;
}

<form action="/findNames">
  <input type="submit" value="Add" onclick="return submitForm(this)"/>
  <input type="submit" value="Find" onclick="return submitForm(this)"/>
</form> 
```

（你永远不应该命名一个与表单相关的变量`submit`，因为如果你不小心会覆盖`form`对象的`submit`方法。）

返回值`false`返回给事件处理程序时，会阻止事件的默认操作`click`。这意味着用户代理的工作方式就像提交按钮一开始就没有被激活一样，并且表单也没有提交。

解决此问题的另一种方法是将标识单击的提交按钮的值保存在变量或属性中，并在`submit`事件侦听器中检查该值。这是有效的，因为定义`click`的`input`（提交按钮）事件发生在`submit`事件之前`form`：

```
var submitName;

function submitForm (form)
{
  if (submitName == "Find")
  {
    /* open popup */
    find();
  }
  else if (submitName == "Add")
  {
    /* stay in the same window */
  } 

  return false;
}

function setSubmit (button)
{
  submitName = button.value;
}

<form action="/findNames" onsubmit="return submitForm(this)">
  <input type="submit" value="Add" onclick="setSubmit(this)"/>
  <input type="submit" value="Find" onclick="setSubmit(this)"/>
</form> 
```

（这只是一个例子。尽量减少全局变量的数量。）

同样，返回值`false`返回到`submit`事件处理程序时，会阻止提交表单。如果您明确希望在处理事件`true`后提交表单，您可能想要返回。`submit`例如，您可能想要验证表单，如果验证成功，则通过`target`属性在另一个框架中显示服务器响应。

与在脚本代码中添加事件侦听器相比，事件处理程序属性的优势在于它运行时高效、向后兼容并且仍然符合标准。缺点是如果事件没有冒泡，您可能必须复制事件处理程序代码。（这里不是问题。）

其他人可能会说 event-handler 属性的一个缺点是标记和函数之间没有分离；但是，您应该对此做出自己的决定。在我看来，函数总是与特定的标记相关联，并且为了解决不同的 DOM 实现而跳槽是不值得的。

另请参阅：[DOM 客户端对象交叉引用：DOM 事件](https://developer.mozilla.org/en-US/docs/DOM_Client_Object_Cross-Reference/DOM_Events)

这里最重要的一点是，无论您对客户端进行了哪些改进，表单仍然可以访问，即即使没有客户端脚本，它仍然可以使用键盘。您的服务器端脚本（此处`/findNames`：）可以作为备用脚本，然后，客户端脚本可以避免不必要的往返，改善用户体验并减少网络和服务器负载。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T16:12:43.440

您的代码应重构以正确附加事件侦听器。

首先，定义将用作侦听器的函数：

```
function preventSubmission(e) {
    if (e.preventDefault) e.preventDefault();
    return false;
}

function find(){
    var width  = 1010;
    var height = 400;           
    var params = 'width='+width+', height='+height;     
    popupWin = window.open('find.do','windowname5', params);
    popupWin.focus();
} 
```

然后，缓存对相关表单元素的引用：

```
var form = document.getElementById('my-form'),
    findButton = document.getElementById('find'); 
```

最后，将侦听器添加到 DOM 事件中：

```
if (form.addEventListener) {
    form.addEventListener("submit", preventSubmission);
    findButton.addEventListener("click", find);
} else {
    form.attachEvent("submit", preventSubmission);
    findButton.attachEvent("click", find);
} 
```

这是一个完整的工作演示：http: [//jsfiddle.net/CQAHv/2/](http://jsfiddle.net/CQAHv/2/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T16:29:15.783

看一下这个：

**Javascript**：

```
var clicked;
var buttons = document.getElementsByTagName("input");

for(var i = 0; i < buttons.length;i++)
{
    var elem = buttons[i];
    if(elem.type=="submit")
    {
        elem.addEventListener("click", function(){ clicked=this.value;}, false);
    }
}

window.onsubmit = function(e)
{
   alert(clicked);
    return false;
} 
```

**标记**：

```
<form action="/findNames">
    <input type="submit" value="Add" />
    <input type="submit" value="Find" />
</form> 
```

您将获得单击的任何按钮的值。

**jsFiddle**：http: [//jsfiddle.net/hescano/v9Sz2/](http://jsfiddle.net/hescano/v9Sz2/)

**注意**：出于测试目的，我有`return false`里面的`onsubmit`事件。第一个 jsFiddle 示例包含自己的`window.onload`内容，因此您可能想要添加不在内部的所有内容`window.onsubmit`，`window.onload`例如[http://jsfiddle.net/hescano/v9Sz2/1/](http://jsfiddle.net/hescano/v9Sz2/1/)（在 Chrome、Firefox 中测试）。

# reporting-services - 日期参数格式问题

> ID：15975812
> 
> 赞同：1
> 
> 时间：2013-04-12T15:55:06.047
> 
> 标签：reporting-services

我正在尝试将两个日期参数添加到报告中。我创建了一个提取可用日期的数据集。我格式化了该字段，使其看起来像 01/01/2013。但是，下拉菜单也包括时间戳，我只想查看日期。我怎样才能做到这一点？

这是我的数据集的查询。

```
SELECT
CAST(sd.SBINDT as date)
FROM dbo.SalesData sd
GROUP BY sd.SBINDT
ORDER BY sd.SBINDT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:01:19.503

您可能没有在参数本身中选择参数类型、日期/时间。

1.  单击“报告数据”部分中的“参数”文件夹下
2.  找到你的参数，双击
3.  确保“数据类型：”是“日期/时间”。即使它声明了这一点，默认显示将是 MM/DD/YYYY，而没有 SSRS 默认值中的时间。

您可以从数据集中显式地获取此值，也可以不列出它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:53:41.133

我想，应该是这样的……

**<%=FORMATDATETIME(今天(),DATEFORMAT.ShortDate)%>**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:50:32.627

您好，我知道这是旧的，但万一有人正在查看这可能会有所帮助

=FORMATDATETIME（今天（），DATEFORMAT.ShortDate）

# r - 当我尝试使用混合数据类型融化我的数据框时，我得到了 NA。我怎样才能最好地解决这个问题？

> ID：15975822
> 
> 赞同：5
> 
> 时间：2013-04-12T15:55:24.197
> 
> 标签：r, reshape

# 我的目标和背景

我在 R 中有一个数据框，我想使用 reshape2 库来融化它。有两个原因。

1.  我想使用 ggplot 在条形图中为每个用户绘制每个问题的分数。

2.  我想把这些数据放到 Excel 中，这样我就可以看到每个用户的情绪、分数和混合动机、态度之前等。我的意图是使用融化，然后将数据转换为宽格式，以便于 Excel 导入.

# 我的问题

当我尝试运行 melt 时，我收到警告并在生成的熔融数据框中出现 NA。

```
Warning messages:
1: In `[<-.factor`(`*tmp*`, ri, value = c(0.148024, 0.244452, -0.00421,  :
invalid factor level, NAs generated
2: In `[<-.factor`(`*tmp*`, ri, value = c(0L, 0L, 0L, 0L, 0L, 0L, 0L,  :
invalid factor level, NAs generated 
```

我最终在我得到的融化数据框中得到了大量的 NA。我认为这是因为我在同一列中同时使用字符和数字。

# 我的问题

结果我有两个问题。

**问题 1：在 R 中有解决方法吗？**

**问题 2：我有没有更好的方法来构建我的数据以避免这个问题？**

# 代码

这是我创建数据框的代码。

```
words <- data.frame(read.delim("sentiments-test-subset-no-text.txt", header=FALSE))
names(words) <- c("level", "question", "user", "sentiment", "score", "mixed")
words$user <- as.factor(words$user)
words.m <- melt(words, id.vars=c("user", "level"), measure.vars=c("sentiment", "score",     "mixed")) 
```

我对重塑和融化很陌生，但我*认为*这就是我在最后一行想要的。

# 数据

人类可读格式的数据如下所示。

```
experimental    motivated   1   positive    0.148024    0
experimental    motivated   2   positive    0.244452    0
experimental    motivated   3   negative       -0.004210    0
experimental    motivated   4   unknown         0.000000    0
experimental    attitudeBefore  1   negative       -0.241500    0
experimental    attitudeBefore  2   neutral         0.000000    0
experimental    attitudeBefore  3   neutral         0.000000    0
experimental    attitudeBefore  4   unknown         0.000000    0 
```

# 输出转储

dput 下面。

```
structure(list(level = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L), .Label = "experimental", class = "factor"), question = structure(c(2L, 
2L, 2L, 2L, 1L, 1L, 1L, 1L), .Label = c("attitudeBefore", "motivated"
), class = "factor"), user = structure(c(1L, 2L, 3L, 4L, 1L, 
2L, 3L, 4L), .Label = c("1", "2", "3", "4"), class = "factor"), 
sentiment = structure(c(3L, 3L, 1L, 4L, 1L, 2L, 2L, 4L), .Label = c("negative", 
"neutral", "positive", "unknown"), class = "factor"), score = c(0.148024, 
0.244452, -0.00421, 0, -0.2415, 0, 0, 0), mixed = c(0L, 0L, 
0L, 0L, 0L, 0L, 0L, 0L)), .Names = c("level", "question", 
"user", "sentiment", "score", "mixed"), row.names = c(NA, -8L
), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:38:01.037

看起来您可能只是使用了错误的库。 `reshape`和`reshape2`不是一回事。

```
library(reshape2)
words.m <- melt(words, id.vars=c("user", "level"), measure.vars=c("sentiment", "score",     "mixed"))
# no problem

detach(package:reshape2)

# using reshape instead of reshape2
library(reshape)
words.m <- melt(words, id.vars=c("user", "level"), measure.vars=c("sentiment", "score",     "mixed"))
# Warning messages:
# 1: In `[<-.factor`(`*tmp*`, ri, value = c(3L, 3L, 1L, 4L, 1L, 2L, 2L,  :
#   invalid factor level, NAs generated
# 2: In `[<-.factor`(`*tmp*`, ri, value = c(3L, 3L, 1L, 4L, 1L, 2L, 2L,  :
#   invalid factor level, NAs generated 
```

如果`reshape2`在您的系统上不可用，您可以从 CRAN 安装它

```
 install.packages("reshape2") 
```

# ios - 自动生成代码

> ID：15975825
> 
> 赞同：1
> 
> 时间：2013-04-12T15:55:27.003
> 
> 标签：ios, xcode, uiview

以此类推，在 Eclipse IDE 和许多其他 IDE 中，当我声明类的一些私有属性时，我可以自动生成 getter 和 setter 方法。例如，使用大约 20 个属性进行声明非常有用，我终于创建了所有方法。

我们是否在 xCode IDE 中获得了相同的功能，我的意思是......当我在“.h”中编码一些声明方法时，我可以在“.m”中自动声明......

例如：

在“.h”中，代码​​如下：

```
- (NSString *)loadMessageLabelFr:(id)sender; 
```

在“.m”中，使用菜单功能生成的代码“desired”：

```
- (NSString *)loadMessageLabelFr:(id)sender{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:55:49.297

Getter 和 setter 由编译器为您的类属性隐式生成。例如拥有

```
@property int count; 
```

隐含地为您提供以下内容：

1) 一个名为 的 ivar `_count`，它存储属性的值。

2）一个getter和一个setter

```
- (int)count
{
    return _count;
}

- (void)setCount:(int)count
{
    _count = count;
} 
```

此代码是在编译时插入的，因此您不会在 .m 文件中看到它。这很好，因为这样你的代码就不会被琐碎的 getter 和 setter 弄得一团糟。如果您希望您的 getter 或 setter 执行其他操作而不仅仅是设置或返回值，则需要以通常的方式定义该方法，例如：

```
- (void)setCount:(int)count
{
    NSLog(@"Count set to %d", count);
    _count = count;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:51:03.900

我知道你的意思——很多时候，在我的头文件中声明了 10 个方法之后，我希望它们以某种方式转移到我的实现文件中。

然而...

这不是Java，对象和文件组织完全不同

1.  您不必定义该方法，它仍然是一个有效的用例。有些类没有特定的方法定义并处理方法调用`doesNotRecognizeSelector:`

2.  您可以在运行时添加方法定义

3.  您可以从多个实现文件中的一个标头定义方法。

由于这些原因（以及许多其他原因），在实现文件中生成方法头可能弊大于利。

最简单的 Xcode 解决方案是

1.  将方法标头从 复制粘贴`.h`到`.m`.
2.  使用自动完成，写标题的开头，例如`- (BOOL)`可以让你更快地自动完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:17:04.540

你如何定义你的实例变量？

您的问题（例如变量）的答案是“不，但您真的需要它们吗”......使用属性和访问器方法是在编译期间为您创建的。在实践中，您需要显式实现很少的访问器方法。

对于公共方法，答案是否定的，但是，您可以复制方法定义，然后只需添加括号，这样就不会做很多工作（您甚至不需要删除分号）。

此外，这适用于变量和公开定义的方法，开始输入：

```
- a 
```

并且 Xcode 将使用适当的方法名称为您提供该行的自动完成。

# .net - 实体框架，动态请求的实体

> ID：15975830
> 
> 赞同：0
> 
> 时间：2013-04-12T15:55:35.143
> 
> 标签：.net, database, linq, entity-framework, mapping

我有一个用 EF 5.0.0 映射的数据库

我在一些列表中显示数据。我的数据以“经典方式”检索：

```
using (myContext db = new myContext())
{

    var products = db.products.Select(p => p).ToList();
} 
```

我必须尽可能多地这样做，

有什么办法可以动态地做到这一点？：

```
using (myContext db = new myContext())
{
    type currentType = myTable1Type
    var currentList = db.currentType.Select(p => p).ToList();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:15:27.593

尝试使用[`DbContext.Set`方法（类型）](http://msdn.microsoft.com/en-us/library/gg679544%28v=vs.103%29.aspx)：

```
using (myContext db = new myContext())
{
    type currentType = myTable1Type
    var currentList = db.Set(currentType).Select(p => p).ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:27:22.300

这种方法对我有用：

```
IDbSet GetDbSet(Type currentType, Context db)
{
    dynamic instance = Activator.CreateInstance(currentType);
    return GetDbSetFromInstance(instance, db);
}

IDbSet GetDbSetFromInstance<T>(T instance, Context db)
    where T : class
{
    var set = db.Set<T>();
    if (set == null)
    {
        throw new Exception();
    }
    return set;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:15:35.377

看看 Context.Set() 方法组。

# linux - 如何避免日志文件出现乱码并运行后台进程？

> ID：15975840
> 
> 赞同：0
> 
> 时间：2013-04-12T15:55:47.253
> 
> 标签：linux, tcl, expect

我是一个完全的新手，在谷歌和期待书中的所有发现之后，我编写了[这段](http://pastebin.com/LWFeqwRx)代码，但仍然需要大约 30-40 分钟才能通过单个 IP 地址执行任务。

现在我来期待这样的 for 循环中的代码：

```
 foreach  host [ split $hosts "\;" ] {
      #blah blah blah

      #more code

      expect -re "$prompt"
      send -- "exit\r"
   } 
```

现在我需要在后台为每个主机运行它以进行并行处理

我该怎么做是这样的：

```
 foreach  host [ split $hosts "\;" ] {
    {
      #blah blah blah

      #more code

      expect -re "$prompt"
      send -- "exit\r"
    } &
   } 
```

等待

以及如何避免日志文件出现乱码，因为每个进程都可能尝试同时写入同一个文件。

编辑：我使用了一个名为 SendCommands 的函数来发送将缓冲区放入日志文件的命令，例如：

```
proc SendCommands { Commands } {
        global prompt log errlog
                foreach element [split $Commands ";"] {
                        expect {
                               -re $prompt
                                {send -- "$element\r"}
                               }
        set outcome "$expect_out(buffer)"
        puts "$log" "$outcome"
         }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:06:51.393

到目前为止，最简单的技术是将您的代码拆分为两个文件中的两部分，其中之一是将与单个主机交互的代码（并将主机名称作为`argv`变量中的命令行参数），以及其他将跨多个主机管理事物。

最粗略的管理器代码可能看起来像这样（我猜编写和调试单个主机代码对您来说不会太难）：

```
foreach host [ split $hosts "\;" ] {
    exec expect perHostCode.tcl $host &
} 
```

但是，当主机数量增加时，这会遇到问题。特别是，您可以同时运行的 expect 数量受到操作系统安装所具有的虚拟终端数量的限制。这通常*远小于*您可以一次运行的进程或线程数。因此，如果您有很多主机，则需要限制一次执行的次数。

# c++ - 重载 = C++ 更多结构

> ID：15975854
> 
> 赞同：-5
> 
> 时间：2013-04-12T15:56:25.980
> 
> 标签：c++

我正在为人们注册程序，我有重载运算符 = 的问题。

我有类`CRegister`、结构`Person`和`Place`.

```
struct Places{
    char date[11];
    char * street;
    char * city;

Places & operator = (const Places & other){
        delete [] street;
        delete [] city;

        strncpy (date, other.date, 11);

        int len;
        len = strlen(other.street);
        this->street = new char[len];
        strncpy ( this->street, other.street, len );

        len = strlen(other.city);
        this->city = new char[len];
        strncpy ( this->city, other.city, len );

        return *this;
    }
}

struct Person{
    char id[12];
    char * name;
    char * surname;
    Places ** oldPlaces;

    int placesCount;
    int placesSize;
};

Person & Person::operator =(const Person& other){
    for (int i = 0; i < this->placesSize; i++){
         delete this->oldPlaces[i];
    }
    delete [] this->oldPlaces;
    delete [] name;
    delete [] surname;

    placesCount = other.placesCount;
    placesSize = other.placesSize;

    oldPlaces = new Places*[other.placesSize];

    strncpy (id, other.id, 11);

        int len;

        len = strlen(other.name);
        this->name = new char[len];
        strncpy ( this->name, other.name, len );

        len = strlen(other.surname);
        this->surname = new char[len];
        strncpy ( this->surname, other.surname, len );

    for (int i = 0; i < placesCount; i++){
        oldPlaces[i] = other.oldPlaces[i];
    }

    return *this;
}

class CRegister     
 {
   private:
    Person **persons;
    int personCount;
    int personSize;
 };

 CRegister& CRegister::operator =(const CRegister& other){
    for (int i = 0; i < this->personSize; i++){
        delete this->persons[i];
    }
    delete [] this->persons;

    personCount = other.personCount;
    personSize = other.personSize;

    persons = new Person*[other.personSize];

    for (int i = 0; i < personCount; i++){
        persons[i] = other.persons[i];
    }

    return *this; 
 } 
```

但是，代码已编译，但 Netbeans 显示运行失败。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:59:47.943

```
 len = strlen(other.city);
    this->city = new char[len];
    strncpy ( this->city, other.city, len ); 
```

这不会保留字符串的长度。后面的代码怎么知道有多长`this->city`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T15:59:29.827

你没有遵循**[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**。如果不是唯一的原因，这可能是一个原因。

另一个注意事项，

*   为什么不简单地使用`std::string`？
*   为什么不使用**[复制和交换习语](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)**？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T16:35:13.803

由于您基本上使用的是 C（包装在一个类中）：您已经犯了可能是 C 代码中最常见的错误。 `strlen` 返回字符串中的字符数，*不*包括最后的`'\0'`. `strcpy`复制 final `'\0'`，所以多了一个字符，如果你使用`strncpy`（你不应该这样做），那么你最终会得到一个没有 `'\0'`终止的字符串。因此，使用`strcpy`，您会超出缓冲区的末尾，并且使用`strncpy`，任何尝试读取字符串的人都将超出缓冲区的末尾（因为它们会一直持续到 a `'\0'`）。

规则是分配比`strlen` 返回多一个字符：

```
size_t len = strlen( other.name ) + 1;
name = new char[ len ];
strcpy( name, other.name ); 
```

（虽然不是标准的 C，但许多系统都有`strdup`执行此操作的功能。`malloc`当然，使用 ，因此您必须使用 释放`free`，而不是`delete`。）

除此之外，我将重复我之前所说的：如果任何分配失败，您的代码将使对象处于不一致的状态。 *在修改班级中的任何内容之前，请务必*完成所有可能失败的事情。交换习语是经典的`operator=`，但除此之外，您可以使用本地指针：

```
char* newName = NULL;
char* newSurname = NULL;
Places* newPlaces = NULL;

try {
    newName = strdup( other.name);
    newSurname = strdup( other.surname );
    newPlaces = deapCopyPlaces( other.places );
} catch ( ... ) {
    deepDelete( newPlaces );
    delete [] newName;
    delete [] newSurname;
}
//  And only now...
deepDelete( places );
delete [] name;
delete [] surname;
name = newName;
surname = newSurname;
places = newPlaces; 
```

但是交换习惯更可取，因为它避免了复制所有错误处理代码。

# android - 让 onBackPressed() 关闭应用程序

> ID：15975862
> 
> 赞同：0
> 
> 时间：2013-04-12T15:56:55.000
> 
> 标签：android, android-fragments, back-stack

我有一个使用片段的应用程序。在应用程序启动时，我这样做：

```
 FragmentManager man = getFragmentManager();
    FragmentTransaction trans = man.beginTransaction();
    trans.replace(R.id.master_container, master);
    trans.commit(); 
```

如您所见，我没有将其添加到 Backstack 中，因为我不希望用户陷入没有片段的空活动中。然而，这是行不通的。因为当我按下`master`屏幕上的后退按钮时，它会关闭片段并使我处于黑色活动状态。现在我重写了`onBackPressed()`帮助我的方法：

```
@Override
public void onBackPressed() {

    // 'master' is the Mainscreen Fragment
    if (master.isVisible()) {

        if (!second) {
            Toast.makeText(getApplication(), "Press back again to close application", Toast.LENGTH_SHORT).show();
            second = true;
        } else {
            second = false;
            CreamyActivity.this.finish();
        }

    } else {
        super.onBackPressed();
        bar.show();
    }
} 
```

但是每当`CreamyActivity.this.finish();`它再次关闭片段并进入空白活动时（就好像它只是跟随后台堆栈）（这都是在活动中顺便说一句！）

我想知道你是否可以帮助我。通常应用程序不应该自行关闭，但我非常感谢这里的解决方法。还是我在后台做错了什么？它会自动添加它吗？

提前感谢<3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:27:35.463

好的，正如 CommonsWare（感谢您！）指出的那样，还有其他东西干扰了应用程序的工作。它的结构是这样的：

应用启动 --> LaunchActivity if(API > 14) --> CreamyActivty

否则-> CrunchyActivity

在 CreamyActivity 中调用 finish() 时，它使应用程序返回到 LaunchActivity，除了 if-else 语句之外，它的 onCreate() 中没有任何其他内容。现在我已经这样做了：

在我的 LaunchActivity 中，我添加了：

```
 private IntentFilter filter;

    filter = new IntentFilter(Util.BACKSTACK_INTENT);

    registerReceiver(new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            LaunchActivity.this.finish();
            unregisterReceiver(this);

        }
    }, filter); 
```

在 Creamy/Crunchy 活动的 onBackPressed() 方法中，我添加了以下内容：

```
 CreamyActivity.this.finish();
            Intent kill = new Intent();
            kill.setAction(Util.BACKSTACK_INTENT);
            this.sendBroadcast(kill); 
```

就像这样，每次用户想要退出应用程序时，它都会向 LaunchActivity 发送一个意图并终止该意图。

再次。非常感谢 CommonsWare 指出先前设计中的缺陷：P 希望这对某人有所帮助。

# python - 通过客户端和服务器使用 Python+openCV 进行视频流式传输

> ID：15975866
> 
> 赞同：3
> 
> 时间：2013-04-12T15:57:02.213
> 
> 标签：python, opencv, client-server, client

我用 Python 制作了一个小型服务器客户端视频流程序。我使用“VideoCapture”模块来获取 Windows 中的图像帧。但实际上我想在 Raspberry Pi 中做这个项目。然后我问了谷歌，当然，Stackoverfow 的一些朋友告诉我，python 中的 openCV 是一个选项。我在 Windows 上安装了 openCV。之后，我根据 openCV 安装文件提供的示例制作了一个简单的程序。我找到了一个名为“camshift”的示例，并从中制作了一个简单的网络摄像头查看器。但是我的程序出现错误“没有名为视频的模块”，同时“camshift”程序正在正常工作，没有任何错误。两个程序都使用“视频”模块。请帮助解决这个问题，并帮助我将这些捕获的图像发送给客户。先感谢您。

> **我的网络摄像头查看器程序**

```
import cv2
import video
import sys
cam=video.create_capture(0)
while 1:
    flag, frame = cam.read()
    cv2.imshow('camera', frame)
    ch = 0xFF & cv2.waitKey(1)
    if ch==10:
        break
cv2.destroyAllWindows() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:02:51.070

当您在 Windows 上编辑文件时，有时可能会发生错误 `__init__.py`（看看[这个问题](https://stackoverflow.com/questions/338768/python-importerror-no-module-named "这个问题")，看看是否是这种情况）。

# perl - 检查端口是否正在运行的脚本

> ID：15975868
> 
> 赞同：0
> 
> 时间：2013-04-12T15:57:13.053
> 
> 标签：perl, aix

我需要帮助来检查我的盒子中是否有两个本地端口正在运行，如果是这样，请打开一个端口。

例如：

DB2 端口：50001 MQ 端口：1414

如果两者都打开，则打开端口 45 进行侦听，如果其中任何一个未打开，则关闭脚本端口。

我正在运行 AIX 7.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:21:39.173

```
use Socket;

socket(HSOCK, AF_INET, SOCK_STREAM, getprotobyname('TCP'));
$address = sockaddr_in(50001, inet_aton('0.0.0.0'));
if (! bind(HSOCK, $address)) {
  $address = sockaddr_in(1414, inet_aton('0.0.0.0'));
  if (! bind(HSOCK, $address)) {
    $address = sockaddr_in(45, inet_aton('0.0.0.0'));
    bind(HSOCK, $address) or die "bind 45 failed";
    listen(HSOCK, 5) or die "listen 45 failed";
     . . . # accept / loop
  }
} 
```

# mysql - 当列在多行中等于和不等于值时匹配

> ID：15975869
> 
> 赞同：0
> 
> 时间：2013-04-12T15:57:18.353
> 
> 标签：mysql, many-to-many, self-join, multiple-records

我有一个与其他两个表具有多对多关系的表：

```
CREATE TABLE assoc (
  id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  ref1 INT NOT NULL,
  ref2 INT NOT NULL,
  INDEX composite_key (ref1, ref2)
); 
```

我想确定是否存在与 ref1 匹配且不匹配 ref2 的给定值的关联。例如，假设我想匹配 ref1 的关联是否存在值 1000 和 ref2 的任何其他值：

```
INSERT INTO assoc (ref1, ref2) VALUES
  (100, 10),
  (100, 1000); 
```

但是，如果只有值 1000 与 ref1 相关联，或者它只是任何其他值，则不应给出匹配：

```
INSERT INTO assoc (ref1,ref2) VALUES
  (101, 10),
  (102, 1000); 
```

我想出了两个解决方案。1）使用与值匹配的行的结果创建一个临时表，然后从中选择与值不匹配的行，以及 2）加入同一个表，并从该表中指定不匹配的条件。

```
CREATE TEMPORARY TABLE set
  SELECT ref1 FROM assoc
  WHERE ref2 = 1000;
SELECT assoc.ref1 FROM `set`
  JOIN assoc ON `set`.ref1 = assoc.ref1
  WHERE assoc.ref2 <> 1000;

SELECT assoc.ref1 FROM assoc 
  JOIN assoc AS `set` ON assoc.ref1 = `set`.ref1
  WHERE assoc.ref2 = 1000 AND `set`.ref2 <> 1000; 
```

但是，我想知道是否还有其他方法可以完成这场比赛？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:09:21.737

我认为您的第二个解决方案是做您想做的事情的标准方法；我也会这样做。您还添加了`INDEX composite_key` 正确的。但是，您可以添加一个附加项`GROUP BY`以避免相同 assoc.ref1 出现的次数与连接找到 ref2 <> 1000 的关联行一样多：

```
SELECT assoc.ref1 FROM assoc 
  JOIN assoc AS `set` ON assoc.ref1 = `set`.ref1
  WHERE assoc.ref2 = 1000 AND `set`.ref2 <> 1000
  GROUP BY assoc.ref1; 
```

# c# - 具有 Enum 类型的 HashSet 的奇怪相等结果？

> ID：15975870
> 
> 赞同：1
> 
> 时间：2013-04-12T15:57:19.357
> 
> 标签：c#, equality, hashset

我有两个以不同方式构建的包含所有枚举值的哈希集。

```
    setWithAllEnums.Equals(setToTest); // 返回假

    !(setWithAllEnums.Except(setToTest).Any()); // 返回真

```

为什么这些不相等？.NET 不为枚举提供 GetHashCode 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T15:59:34.180

`HashSet<T>`不覆盖`Equals`. 即使两个哈希集包含完全相同的值，如果它们引用不同的对象，它们仍然是不相等的。你想要的方法是`SetEquals`。

不过，蒂姆施梅尔特提出了一个很好的观点。`x.SetEquals(y)`也不`!x.Except(y).Any()`是一回事。集合 x =`{1, 2}`和 y =`{1, 2, 3}`不相等，但`!x.Except(y).Any()`为真。 `x.SetEquals(y)`相当于`!x.Except(y).Any() && !y.Except(x).Any()`。

# groovy - XmlSlurper 使用命名空间附加节点

> ID：15975871
> 
> 赞同：1
> 
> 时间：2013-04-12T15:57:23.363
> 
> 标签：groovy, xmlslurper

我正在尝试使用将节点附加到我的请求中`xmlslurper`

```
Service.appendNode{
  ifx:DepAcctId{
    if (acctId!="<!-->"){ifx:AcctId("123")}
  }
} 
```

这导致

```
<DepAcctId>
  <AcctId>123</AcctId>
</DepAcctId> 
```

我希望它附加命名空间，比如

```
<if:DepAcctId>
  <ifx:AcctId>123</ifx:AcctId>
</ifx:DepAcctId> 
```

请帮忙。

这是我正在使用的确切代码。

```
holderRequest = tsuite.getTestCaseAt(2).getTestStepByName(tcName).testRequest.getRequestContent()
request = new XmlSlurper(true,true).parseText(holderRequest).declareNamespace(v2:'http://www.fnf.com/xes/services/acct/acctinq/v2_1',
    ifx:"http://www.ifxforum.org/IFX_150",soapenv:"http://schemas.xmlsoap.org/soap/envelope/", xes:"http://www.fnf.com/xes")
Service = request.'soapenv:Body'.'v2:AcctInqRq'
Service.appendNode {
    ifx:DepAcctId {
        if (acctId!="<!-->"){ifx:AcctId(acctId)}
        if (acctType!="<!-->"){ifx:AcctType(acctType)}
        if (BankInfo!="<!-->"){ifx:BankInfo(BankInfo)}
    }
}
xmlBuilder = new StreamingMarkupBuilder()
writer = xmlBuilder.bind {
    mkp.declareNamespace(soapenv:"http://schemas.xmlsoap.org/soap/envelope/",ifx:"http://www.ifxforum.org/IFX_150",
        v2:"http://www.fnf.com/xes/services/acct/acctinq/v2_1",xes:"http://www.fnf.com/xes")
    mkp.yield request
}
holderRequest = groovyUtils.getXmlHolder(XmlUtil.serialize(new StreamingMarkupBuilder().bind {mkp.yield request}))
log.info holderRequest.getXml()
tsuite.getTestCaseAt(2).getTestStepByName(tcName).getProperty("request").setValue(holderRequest.getXml()) 
```

正在添加标签，但没有`ifx`命名空间前缀。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:52:57.103

你有没有尝试过：

```
Service.appendNode{
  'ifx:DepAcctId'{
    if (acctId!="<!-->"){'ifx:AcctId'("123")}
  }
} 
```

# python - 将 4 个列表变成一个 2 元素嵌套列表

> ID：15975876
> 
> 赞同：4
> 
> 时间：2013-04-12T15:57:37.170
> 
> 标签：python, python-3.x

我有四个不同长度的列表。此外，每次我运行程序时，每个列表的长度都会不同。

这是 4 个可能列表的简单示例

```
A_list = [1, 2, 3]
B_list = [4]
C_list = [5, 6, 7, 8]
D_list = [9, 10] 
```

我想制作一个如下所示的新列表：

```
answer = [[1, 4], [2, 5], [3, 6], [7, 9], [8, 10]] 
```

到目前为止，这是我的代码。

```
answer = []
answer.append(list(zip(A_list, B_list)))

if len(A_list) < len(B_list):
        leftover_V_list = V_list[len(B_list):] 
        answer.append(list(zip(leftover_B_list, C_list)))

elif len(A_list) > len(B_list):
        leftover_A_list = A_list[len(B_list):]
        answer.append(list(zip(leftover_A_list, C_list)))

print(answer)

>>> 
[[(1, 4)], [(2, 5), (3, 6)]] 
```

所以我的代码有一些问题。以下是我正在努力解决的一些问题：

1.  我得到了正确的数字，但它们的格式错误。
2.  我不确定如何继续 C_list 和 D_list 的其余部分
3.  如何处理空列表的可能性

此外，我很确定我完全错了。必须有更好的方法来做到这一点。请帮忙。
我正在使用 python 3.2.3

以下是列表的一些示例：

```
A_list = [1]
B_list = [2, 3]
C_list = [4, 5, 6, 7]
D_list = [8]

answer =  [[1, 2], [3, 4], [5, 8], [6], [7]]

A_list = [1, 2, 3]
B_list = []
C_list = [4]
D_list = [5, 6]

answer =  [[1, 4], [2, 5], [3, 6]

A_list = [1, 2, 3]
B_list = []
C_list = []
D_list = [5, 6]

answer =  [[1,5], [2,6], [3]]

A_list = [1]
B_list = [2]
C_list = [3]
D_list = [4]

answer =  [[1, 2], [3, 4]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:15:51.510

使用迭代器和链接：

```
from itertools import chain

A_iter, B_iter, C_iter, D_iter = (iter(l) for l in (A_list, B_list, C_list, D_list))
chain_a = chain(A_list, B_list)
chain_b = chain(B_list, C_list)

paired = [list(t) for t in chain(zip(chain_a, chain_b), zip(C_iter, D_iter))] 
```

输出：

```
>>> A_iter, B_iter, C_iter, D_iter = (iter(l) for l in (A_list, B_list, C_list, D_list))
>>> chain_a = chain(A_iter, B_iter)
>>> chain_b = chain(B_iter, C_iter)
 >>> [list(t) for t in chain(zip(chain_a, chain_b), zip(C_iter, D_iter))]
[[1, 4], [2, 5], [3, 6], [7, 9], [8, 10]] 
```

这也适用于空列表，因为`chain`只会跳过那些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T19:05:09.207

呸。我想我明白了。我敢肯定，这可以稍微清理一下，但它适用于所有提到的情况。它也适用于任意数量的列表，也可以处理空列表。

```
def remove_empties(list1):
    """removes any empty lists from our list"""
    list2 = [x for x in list1 if x]
    return list2

def merge_to_couples(new_list):
    answer = []
    new_list = remove_empties(new_list)

    while True:
        answer.append([new_list[0][0], new_list[1][0]])
        del new_list[0][0], new_list[1][0]

        new_list = remove_empties(new_list) #remove empty lists every iteration

        if len(new_list) == 0: #if length is 0, our work is done
            return answer 
        if len(new_list) == 1: #if length is 1, we need to append remaining numbers as lists with length 1
            for i in new_list[0]:
                answer.append([i])
            return answer

A_list = [1,2,3]
B_list = [4]
C_list = [5,6,7,8]
D_list = [9,10]

new_list = [A_list, B_list, C_list, D_list]

print merge_to_couples(new_list) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T17:59:59.620

我想我可能有一个解决这个听起来可疑的问题的方法。只好求助`deque`。

```
from collections import deque
from itertools import repeat, izip, izip_longest
A_list = [1, 2, 3]
B_list = [4]
C_list = [5, 6, 7, 8]
D_list = [9, 10]

def popper(x, reserve=None):
  for y in x:
    while y:
      yield y.popleft()
      while reserve:
        yield reserve.popleft()

def generate_couples(A, B, C, D):
  A = deque(izip(A, repeat(1)))
  B = deque(izip(B, repeat(2)))
  C = deque(izip(C, repeat(3)))
  D = deque(izip(D, repeat(4)))
  reserve = deque()
  a, b = popper([A, B, C, D],reserve=reserve), popper([B, C, D]) 
  for (x, y) in izip_longest(a, b):
    if not y:
      yield [x[0], None]
      continue
    while x[1] == y[1]:
      reserve.append(y)
      y = next(b)
    yield [x[0], y[0]]

print list(generate_couples(A_list, B_list, C_list, D_list))
[[1, 4], [2, 5], [3, 6], [7, 9], [8, 10]]
A_list = [1, 2, 3]
B_list = [4]
C_list = [5, 6, 7, 8, 9, 10]
D_list = [11]
print list(generate_couples(A_list, B_list, C_list, D_list))                
[[1, 4], [2, 5], [3, 6], [7, 11], [8, None], [9, None], [10, None]] 
```

# mysql - MySQL 触发插入/更新事件

> ID：15975877
> 
> 赞同：27
> 
> 时间：2013-04-12T15:57:40.030
> 
> 标签：mysql, triggers, insert, insert-update

所以我有两张这样的桌子......

```
ext_words
-------------
| id | word |
-------------
| 1  | this |
-------------
| 2  | that |
-------------
| 3  | this |
-------------

ext_words_count
---------------------
| id | word | count |
---------------------
| 1  | this |   2   |
---------------------
| 2  | that |   1   |
--------------------- 
```

我正在尝试创建一个触发器，它将：

*   更新`ext_words_count.count`时`ext_words.word`更新。

让事情更复杂的是，

*   如果更新时`ext_words.word`不存在，我想将其插入并设置为1。`ext_words_count``ext_words``ext_words_count``count`

我一直在研究类似的问题：
1\. [使用自动增量字段插入触发器之前/之后](https://stackoverflow.com/questions/5991464/before-after-insert-trigger-using-auto-increment-field?rq=1)，以及
2\. [使用触发器更新另一个数据库中](https://stackoverflow.com/questions/8910617/using-trigger-to-update-table-in-another-database?rq=1)
的表试图结合 2.这是我到目前为止的内容：

```
DELIMITER $$
CREATE TRIGGER update_count
AFTER UPDATE ON ext_words
FOR EACH ROW
BEGIN

  UPDATE ext_words_count
    SET word_count = word_count + 1
  WHERE word = NEW.word;

END;
$$
DELIMITER ; 
```

非常感谢任何建议和指导。或者可能是我忽略的另一种方法，并且一如既往地提前感谢！

**更新：**
我选择使用 2 个触发器，一个用于 INSERT，一个用于 UPDATE，因为我对 MySQL 中的条件语句不太熟悉。

```
DELIMITER $$
CREATE TRIGGER insert_word AFTER INSERT ON ext_words
  FOR EACH ROW
    BEGIN
      INSERT IGNORE INTO ext_words_count (word) VALUES (NEW.word);
    END;
$$
DELIMITER ; 
```

和

```
DELIMITER $$
CREATE TRIGGER update_word AFTER UPDATE ON ext_words
  FOR EACH ROW
    BEGIN
      UPDATE ext_words_count 
      SET word_count = word_count + 1 
      WHERE word = NEW.word;
    END;
$$
DELIMITER ; 
```

INSERT 查询运行良好，但是 UPDATE 查询没有更新`word_count`。我在更新查询中错过了什么..？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-12T19:01:29.030

**在Grijesh**的完美帮助和他对使用条件语句的建议下，我能够获得一个可以完成这两项任务的触发器。再次感谢格里杰什

```
 DELIMITER $$ 
 CREATE TRIGGER update_count AFTER INSERT ON ext_words 
 FOR EACH ROW 
   BEGIN
     IF NOT EXISTS (SELECT 1 FROM ext_words_count WHERE word = NEW.word) THEN
       INSERT INTO ext_words_count (word) VALUES (NEW.word);
   ELSE
       UPDATE ext_words_count SET word_count = word_count + 1 WHERE word = NEW.word;
   END IF;
  END $$    
 DELIMITER; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-27T22:57:31.037

避免使用 count 之类的关键字，因为 sql 方法有时会使用它的创建错误，但有些运行良好

```
DELIMITER $$
 CREATE TRIGGER update_count
   AFTER UPDATE ON ext_words
     FOR EACH ROW
       BEGIN

          SELECT count INTO @x FROM ext_words_count LIMIT 1;
          UPDATE ext_words_count
          SET count = @x + 1
          WHERE word = NEW.word;

END;
$$
DELIMITER ; 
```

# asp.net-mvc - 微风，创建实体

> ID：15975886
> 
> 赞同：2
> 
> 时间：2013-04-12T15:58:25.763
> 
> 标签：asp.net-mvc, asp.net-web-api, breeze, asp.net-spa

我在我的 ASP.NET WebAPI 项目中使用微风，我添加了微风控制器

```
 [BreezeController]    
    public class BreezeController : ApiController
    {
        readonly EFContextProvider<MyEntities> _context 
            = new EFContextProvider<MyEntities>();

        [HttpGet]
        public string Metadata()
        {
           return _context.Metadata();
        } 
```

不幸的是，当我调用 createEntity 时，我收到错误 **Cannot attach an object to an EntityManager without first setting its key or setting its entityType 'AutoGeneratedKeyType' property to something other than 'None'**

调用元数据api时，微风不是自动初始化实体吗？

TIA

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T07:59:08.090

我敢打赌，您尝试创建的实体是这样定义的，即客户端……而不是服务器……负责设置唯一键。我敢打赌，关键属性是一个 Guid，因为 EF Code First 假设 Guid 关键属性是由客户端默认确定的。

如果是这样，那么在将新实体添加到管理器之前，您可以在创建实体时设置密钥。

您已选择使用该方法创建新实体`EntityManager.createEntity`。这也是我最喜欢的。

但是您必须记住，此方法会尝试自动为您将新实体添加到管理器（如此[处](http://www.breezejs.com/sites/all/apidocs/classes/EntityManager.html#method_createEntity)所述）。因此，要使用此方法，您必须在 Breeze 将其添加到管理器之前初始化新实体的密钥。您可以通过以下三种方式之一做到这一点：

1.  在您定义并使用类型注册的自定义构造函数中
2.  在您定义并使用类型注册的自定义初始化程序中（请参阅“[扩展实体](http://www.breezejs.com/documentation/extending-entities)”文档页面了解这两种技术）
3.  在`createEntity`调用的初始化参数中。

选项 #3 如下所示：

```
var newThing = manager.createEntity("Thing", {id:breeze.core.getUuid()});

```

我自己会选择选项#1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T17:17:55.017

请发布您的客户端微风代码。没有它我无法确定，但我猜你在调用“createEntity”之前没有获取该实体的元数据。您必须先拥有 metadataStore，然后才能创建实体。例如：

```
breezeProjectManager().metadataStore.fetchMetadata().then(function() {
  //createEntity code here 
} 
```

# c++ - 使用openMP的多线程两个函数

> ID：15975890
> 
> 赞同：0
> 
> 时间：2013-04-12T15:58:36.540
> 
> 标签：c++, multithreading, openmp

我绝对是多线程和使用 OpenMP 的新手。但我正在尝试开发一个具有两个功能的程序。

```
function1(){
get the data from the camera and save it into memory for 1000fps
}
functio2(){
display and refresh the screen each 100ms
} 
```

我认为 OpenMP 应该是这样的

```
#pragma omp sections
 {
   { function1(); }
   #pragma omp section
   { function2(); }
 } 
```

但我不确定如何在代码（c++）中实际实现它？如果有人知道，请告诉我。我最终得到了以下代码，但现在我想让第二部分每 100 毫秒休眠一次，我该怎么做？

```
lastPicNr = 0;  
            if(Fg_AcquireEx(fg,nCamPort,GRAB_INFINITE,ACQ_STANDARD,_memoryAllc)<0){
                CExceptionHandler::GrabberErrorMessage(fg,"Can not start Acquiring images .");  
            }else{

                //Declaring a parallel region that will be broken down into disctinct parallel sections
                #pragma omp parallel sections
                {
                    #pragma omp section
                    {
                        while((lastPicNr = Fg_getLastPicNumberBlockingEx(fg,lastPicNr+1,nCamPort,10,_memoryAllc))<= MaxPics){   
                            iPtr=(unsigned char*)Fg_getImagePtrEx(fg,lastPicNr,0,_memoryAllc);      
                            _PointVector.push_back(iPtr);
                            _lastPicNumber.push_back(lastPicNr);                                
                        }
                    }

                    #pragma omp section
                    {
                        cv::Mat _matrixImage(cv::Size(w,h), CV_8UC1,iPtr , cv::Mat::AUTO_STEP);                                                                 
                        cv::imshow("test",_matrixImage);
                        cv::waitKey(10);

                    }
                }
                PauseClickMode(hDlg);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T06:50:33.263

有多种方法可以做到这一点。如果您有一个至少支持 OpenMP 3.0 的编译器，您可以使用任务指令 [http://bisqwit.iki.fi/story/howto/openmp/#TaskDirectiveOpenmp%203%200Only](http://bisqwit.iki.fi/story/howto/openmp/#TaskDirectiveOpenmp%203%200Only)

Visual Studio 只有没有任务指令的 OpenMP 2.0。我所做的是使用线程库。由于您想显示图像，您可能需要考虑 SDL。它具有几乎与 pthreads 相同的线程功能，并且易于使用（尽管不像 OpenMP 那样简单）。
[http://www.libsdl.org/intro.en/usingthreads.html](http://www.libsdl.org/intro.en/usingthreads.html)

然后你就有了一个库，可以显示你的图像，做线程，并且是跨平台的。

# php - 展开电子邮件列表

> ID：15975892
> 
> 赞同：1
> 
> 时间：2013-04-12T15:58:38.660
> 
> 标签：php, arrays, explode

假设，我想要爆炸电子邮件列表和密码。

如果我在 textarea 上输入电子邮件列表，看起来像：

*   email1@domain.com:密码
*   email2@gmail.com:密码
*   email3@yahoo.com:密码

ETC

当提交时自动输出这样

*   电子邮件1：密码
*   电子邮件2：密码
*   电子邮件3：密码

我尝试了一些解决方案，但总是出错，这是输入电子邮件列表的表格：

```
<form name="postit" method="POST" action="">
  <textarea name="users" cols="60" rows="10">
<?php 
    if(isset($_POST['users']))
    {
echo stripslashes($_POST['users']); 
    }
    ?>
</textarea>

<input type="submit" name="submit" value="   Submit   " /></td>
</form>

<?php 
    if(isset($_POST['users']))
    {
        $users= $_POST['users'];
        $preArrUsers = explode("\n",stripcslashes($users));
        $arrUsers['u'] = array();
        $arrUsers['p'] = array();
        foreach($preArrUsers as $up)
        {
            $up = trim ($up);
            $up = explode(':', $up);
            $u = $up['0'];
            $p = $up['1'];
            $arrUsers['u'][] = trim($u);
            $arrUsers['p'][] = trim($p);
        }
    }
?> 
```

上述情况的任何其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:08:17.443

或者这个，以一种简单的方式。

```
$u = $up[0];
$p = $up[1];
$u = explode('@',$u);
$u = $u[0]; 
```

和，

```
$arrUsers['u'][] = trim($u);
$arrUsers['p'][] = trim($p); 
```

如果你想要一个数组作为输出，或者：

```
echo $u.":".$p; 
```

如果你想要一个回显列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:04:38.313

尝试这个...

```
$up = explode(':', $up);
$u = $up[0];
$p = $up[1];

$email = explode('@',$u); // this will remove @domain.com from email
$email = $email[0];
echo $email .":". $p; 
```

**输出**

```
email1:password
email2:password
email3:password 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T16:18:36.470

您可以将此代码用于用户名/电子邮件，而不是您的`$u = $up['0'];`：

```
list($u) = explode('@', $up[0]); 
```

# android - xml 或序列化

> ID：15975896
> 
> 赞同：0
> 
> 时间：2013-04-12T15:58:43.723
> 
> 标签：android, xml, serialization

我有一个有限的对象列表，我使用 ObjectInputStream 和 ObjectOutputStream 将这些对象序列化到存储中。我遇到了不使用序列化的建议。我应该使用使用 XmlSerializer 和 XmlPullParser 的 xml 方法而不是序列化列表？我将不得不用这种方法做额外的解析 xml 的步骤。

哪个是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:27:22.903

**TL;DR：如果用户不需要与它交互，那么序列化你的对象是没有问题的。**

如果您输出的文件需要共享、导出或手动编辑，那么最好导出为 XML。这样做的用例可能是导出游戏角色对象，并允许用户在 XML 文件中编辑他们的一些统计数据，或与也可以编辑它的其他用户共享他们的角色。

如果您输出的文件仅在您的应用程序中使用，用户永远不会直接与之交互，或者甚至从未被用户看到，那么如果您喜欢这样，您就没有理由不能只序列化您的对象。与第一个类似的用例可能是保存您不希望用户弄乱的游戏角色。序列化对象会使用户无法读取文件，并会阻止他们更改统计数据以更轻松地击败您的游戏。

这些用例可能与您的应用程序无关，但它们确实概述了每种方法的一些优缺点。

# javascript - 获取mongodb查询中项目的索引

> ID：15975900
> 
> 赞同：3
> 
> 时间：2013-04-12T15:59:01.980
> 
> 标签：javascript, mongodb

我有一个查询，如下所示：

```
function getPage(page) {
  return db.messages.aggregate(
    {
      '$group': {
        _id: "$subjectID"
      }
    },
    { '$skip': page * 20 },
    { '$limit' : 20 });
} 
```

假设我有一个`subjectID`我知道出现在该集合中的某个地方。我想做的是写这样的东西：

```
function pageOf(subjectID) {
  return Math.floor(db.messages.aggregate(
    {
      '$group': {
        _id: "$subjectID"
      }
    }).indexOf({__id: subjectID}) / 20);
} 
```

除了我不知道如何编写该`indexOf`查询的一部分。我想知道 mongodb 是否可能有某种“采取一段时间”或“采取直到”查询，然后你可以这样做，然后计算项目数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T15:24:06.770

### 按subjectID排序

如果您`subjectID`是（或可以更改为）单调递增的值（例如，MongoDB 默认 ObjectID），您可以直接选择使用`find()`具有适当排序、跳过和限制的法线。[`$gte`在这种情况下，您可以查找主题 ID （大于或等于）](http://docs.mongodb.org/manual/reference/operator/gte/)您的文档`subjectID`：

```
var page = 1;
var subjectID = ObjectId("515535a0760fe8735f5f6897");
db.users.find(
    { _id: { $gte : subjectID } }
).sort({'_id':1}).skip(page*20).limit(20) 
```

### 聚合框架

在 MongoDb 2.4 中，聚合框架中没有这样的功能可以根据结果管道中的文档位置进行匹配。[您可以向 MongoDB Jira 项目的SERVER](https://jira.mongodb.org/browse/SERVER)队列提交新功能建议。

听起来您需要一个新的管道运算符，例如 a`$matchfrom`它将忽略任何文档，直到`$matchfrom`条件第一次出现。然后，您可以添加 a`$limit`来获取接下来的 n 个项目。您还希望在 the 之前对输出进行排序，`$matchfrom`以便获得可预测的结果。

与增加的 subjectID 相比，这似乎过于复杂，但可能存在基于更高级的搜索条件或聚合管道中计算的结果进行分页的用例。

### 替代方法

除了将来在聚合框架中对此类功能的支持之外，您还有一些选项可以在代码中实现相同的匹配方法：

*   将旧的[`group()`](http://docs.mongodb.org/manual/reference/command/group/)聚合命令与`finalize()`函数一起使用。注意：`group()`不适用于**分**片集群。

*   使用[MapReduce](http://docs.mongodb.org/manual/core/map-reduce/)和一个`finalize()`函数

*   从聚合框架获取整个结果集，并在您的应用程序代码中实现结果的匹配/减少（尽管如果您为每个请求获取所有页面，这在某种程度上违背了“分页”概念）。

### 性能注意事项

仍然需要读取中间索引条目的查询`skip`，因此跳过大量文档的效率不会很高。

您可以考虑从前一页的最后一个条目开始执行连续的页面查询，而不是使用跳过偏移量进行分页（即，第一页将是`$gte`起始 subjectID，后续页面将是`$gt`前一页中包含的最后一个 subjectID）。这将取决于您如何在用户界面中呈现分页 - 如果您的 UI 只能选择显示“下一页”消息而不是跳转到特定页面，则使用此方法将是最简单的。

# sql-server-2008-r2 - 连接中的复合列无法在新服务器上工作

> ID：15975902
> 
> 赞同：0
> 
> 时间：2013-04-12T15:59:10.873
> 
> 标签：sql-server-2008-r2

这只会在新服务器上的子查询中失败。单独作为单个查询运行良好。

原始代码仅被注释掉一组复合列。现在需要将前三个空格串起来，然后是第二组 9 个空格。

```
FROM   PHOENIX.RingDWStaging.dbo.cSalesBudgetInfo AS cSalesBudgetInfo_1 
  INNER JOIN
             PHOENIX.RingDWStaging.dbo.DimBusinessPartners AS DimBusinessPartners_1 
             ON cSalesBudgetInfo_1.BusinessPartnerID = DimBusinessPartners_1.BusinessPartnerID 
  INNER JOIN dbo.Accounts 
           --ON DimBusinessPartners_1.Division + DimBusinessPartners_1.BusinessPartner = dbo.Accounts.BusinessPartner
             ON DimBusinessPartners_1.Division = LEFT(dbo.Accounts.BusinessPartner, 3) 
             AND DimBusinessPartners_1.BusinessPartner = RIGHT(dbo.Accounts.BusinessPartner, 9) 
```

这是数据仓库报告中每晚使用的更大视图的一部分。

知道为什么吗？此帐户表在两台服务器中是相同的。

# joomla2.5 - Joomla2.5如何在mod_articles_last模块中添加分页？

> ID：15975905
> 
> 赞同：0
> 
> 时间：2013-04-12T15:59:23.640
> 
> 标签：joomla2.5, paging

我正在使用 joomla2.5，我想为用户添加分页功能，以便在他们从前端登录后检查他们发布的最新文章。

这是文件夹结构：

```
 mod_articles_latest
    -- mod_articles_latest.xml
    -- mod_articles_latest.php
    -- index.html
    -- helper.php
    -- tmpl(folder)
       -- index.html
       -- default2.php
       -- default.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:17:01.460

我认为可以在组件外部进行分页，但是对模块进行分页还有其他问题，例如单击下一步意味着页面加载。

这些家伙似乎知道他们在问什么：

[https://groups.google.com/forum/m/?fromgroups#!topic/joomla-dev-general/spjD7Oeixa0](https://groups.google.com/forum/m/?fromgroups#!topic/joomla-dev-general/spjD7Oeixa0)

# c# - 可以使用泛型返回实际对象吗？

> ID：15975914
> 
> 赞同：3
> 
> 时间：2013-04-12T15:59:38.060
> 
> 标签：c#, generics

我有这段代码：

```
private object DeserialiseFromXMLFile(string fileLocation, Type type)
{
    XmlSerializer serializer = new
        XmlSerializer(type);

    FileStream fs = new FileStream(fileLocation, FileMode.Open);
    XmlReader reader = new XmlTextReader(fs);
    return serializer.Deserialize(reader);
} 
```

我想知道我是否使用泛型，因为我希望返回类型为 T

有谁知道这是否可能，或者这是最优雅的解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T16:02:12.397

```
private T DeserialiseFromXMLFile<T>(string fileLocation)
{
    XmlSerializer serializer = new
        XmlSerializer(typeof(T));

    FileStream fs = new FileStream(fileLocation, FileMode.Open);
    XmlReader reader = new XmlTextReader(fs);
    return (T)serializer.Deserialize(reader);
} 
```

然后你可以这样称呼它：

```
User item = DeserialiseFromXMLFile<User>("myFile.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:02:21.337

你可以做：

```
private T DeserialiseFromXMLFile<T>(string fileLocation)
{
    XmlSerializer serializer = new
        XmlSerializer(typeof(T));

    FileStream fs = new FileStream(fileLocation, FileMode.Open);
    XmlReader reader = new XmlTextReader(fs);
    return (T)serializer.Deserialize(reader);
} 
```

该类型的`typeof(T)`返回`Type`实例，`T`最后您将序列化程序返回的对象显式转换为`T`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T16:03:05.407

```
 private static T DeserialiseFromXMLFile<T>(string fileLocation)        {
        XmlSerializer serializer = new XmlSerializer(typeof(T));

        FileStream fs = new FileStream(fileLocation, FileMode.Open);
        XmlReader reader = new XmlTextReader(fs);

        return (T)serializer.Deserialize(reader);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T16:03:06.997

你在找这样的东西吗？

```
private T DeserialiseFromXMLFile<T>(string fileLocation)
{
    XmlSerializer serializer = new
        XmlSerializer(typeof(T));

    FileStream fs = new FileStream(fileLocation, FileMode.Open);
    XmlReader reader = new XmlTextReader(fs);
    return (T) serializer.Deserialize(reader);
} 
```

那么用法是：

```
var foo = DeserialiseFromXMLFile<Foo>("Foo.xml"); 
```

如果您不喜欢`Foo`明确指定，可以将方法更改为

```
private void DeserialiseFromXMLFile<T>(string fileLocation, out T t)
{
    ...
    t = (T) serializer.Deserialize(reader);
} 
```

你会称之为

```
Foo foo;
DeserialiseFromXMLFile("Foo.xml", out foo); 
```

* * *

您的代码也可以使用`using`：

```
private T DeserialiseFromXMLFile<T>(string fileLocation)
{
    var serializer = new XmlSerializer(typeof(T));

    using (var fs = new FileStream(fileLocation, FileMode.Open))
    {
       var reader = new XmlTextReader(fs);
       return (T) serializer.Deserialize(reader);
    }
} 
```

# python - python：在一组已发布的文件中提供 YAML 支持，无需用户手动安装 PyYAML 或 libYAML

> ID：15975915
> 
> 赞同：0
> 
> 时间：2013-04-12T15:59:42.860
> 
> 标签：python, yaml

我正在尝试在我发布给我的一些同事的一小组 Python 脚本中找到一种解析 YAML 的方法。

这些用户很聪明，但却是电气工程方面的专家，他们在编程或软件安装方面的专业知识很少，所以我需要让他们尽可能轻松地使用我的脚本。

他们的 Python 环境将是从 python.org 下载的纯 Python 2.7 发行版，或者是[Enthought Python 发行](https://www.enthought.com/products/epd/)版的免费版本。两者都没有安装 PyYAML 或 libYAML。

所以我的困境是如何在我分发的脚本中包含 YAML 支持。

我不想让我的最终用户通过 easy_install 或 pip；这对我来说相当容易，但他们可能会遇到问题，就像我第一次尝试查找 setuptools.py 时所做的那样。[此外，如此 SO question](https://stackoverflow.com/questions/14866392/how-can-i-install-the-python-module-yaml-without-root-access-easy-install-an)中所述，他们可能没有 root/管理员访问权限来安装其他系统包（python 可能由 IT 人员在他们的计算机上预先安装）。

您对在这些情况下如何解析 YAML 文件有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T21:01:46.583

根据 Aya 的建议，我将`/lib/yaml`PyYaml 版本 ( [https://bitbucket.org/xi/pyyaml/src](https://bitbucket.org/xi/pyyaml/src) ) 中的目录复制到我的脚本目录中：

```
+ my-python-scripts
|
+-- myScript.py
|
+-+ yaml
  |
  +-- __init__.py
  +-- composer.py
  +-- constructor.py
  .
  .
  . 
```

然后我可以`import yaml`在我的脚本中使用它，它工作正常。无需全局安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T18:48:57.663

是否有某些原因您不能只在您分发的文件中包含 YAML 解析器的 Python 源代码？

PyYAML 声称包含一个纯 Python 实现，因此将它与您的包捆绑在一起应该是相当简单的。

如果您只是解析包含在分发文件中的 YAML 文件，那么另一种选择可能是将它们预先转换为 Python 的基础库可以处理的其他格式。

# asp.net-mvc - knockoutMvc - HelloWorld 教程

> ID：15975920
> 
> 赞同：1
> 
> 时间：2013-04-12T15:59:59.587
> 
> 标签：asp.net-mvc, knockout-mvc

我正在尝试关于 KnockoutMVC 的教程（见下文）我已经下载了 .nuget 扩展名并在我的项目中引用了它......所以......

[http://knockoutmvc.com/HelloWorld](http://knockoutmvc.com/HelloWorld)

在 VS 中使用上述教程。当我添加“模型”时，[computed] 出现错误 - 找不到类型或命名空间名称“computedAttribute”（您是否缺少使用指令或程序集引用？）

```
 public class HelloWorldModel
{
  public string FirstName { get; set; }
  public string LastName { get; set; }

  [Computed]
  public string FullName
  {
    get { return FirstName + " " + LastName; }
  }
} 
```

有谁知道我错过了什么。有别的下载吗？谢谢

编辑：控制器中的“ActionResult”和“BaseController”也出现同样的错误：

```
 public class HelloWorldController : BaseController
{
    public ActionResult Index()
    {
        InitializeViewBag("Hello world");
        return View(new HelloWorldModel
        {
            FirstName = "Steve",
            LastName = "Sanderson"
        });
    }
} 
```

dto NuGet.Core 会解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:35:46.190

你有安装包吗？如果不是，您应该打开包管理器控制台并输入 Install-Package kMVC

然后在模型中放：使用DelegateDecompiler；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T15:24:12.730

谢谢斯林。我遇到了同样的问题。你的回答为我解决了这个问题。

Hello World 教程也忘记提到您需要在视图顶部引用 knockout-2.2.0.js 和 knockout.mapping-latest.js。

“你有安装包吗？如果没有，你应该打开包管理器控制台并输入 Install-Package kMVC

然后在模型中放入：使用DelegateDecompiler；”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T18:13:51.043

我有类似的问题。这个包看起来很有希望，但在使用 NuGet 恢复任何丢失的包/依赖项后，我实际上并没有看到从示例代码中运行的任何内容。例如，当我运行这个示例 HelloWorld 时，我可以在复选框中输入名字和姓氏，但我没有在 UI 中看到这些值更新。它保持不变/空白。任何人有任何想法为什么？我正在运行 KnockoutMVC 网站提供的代码：[https ://github.com/AndreyAkinshin/knockout-mvc](https://github.com/AndreyAkinshin/knockout-mvc)

# sql - 如何在 11G 中将表固定到 oracle dbms_shared_pool

> ID：15975921
> 
> 赞同：1
> 
> 时间：2013-04-12T16:00:01.660
> 
> 标签：sql, database, performance, oracle, oracle11g

我可以在 11G 中将表固定到 oracle dbms_shared_pool 吗？我看到我不能在 10g 中做到这一点。该表有 4 个数字列和大约 100K 行，它的使用率非常高并且是只读的（这意味着一旦准备好数据，我们就不会插入或更新）。

没找到方法所以来这里问问。另一个问题是我可以将一个高度使用的存储过程固定到 dbms_shared_pool 吗？他们的优势和劣势是什么？有必要吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T16:09:30.033

固定表有点毫无意义。Oracle 会将经常使用的数据保留在 DB Buffer Cache 的 MRU 端，因此极不可能被老化。让 Oracle 管理它的好处是它只保留流行的块。也许在您的情况下，所有 100K 行都在不断需求，但这会使您的情况非常不寻常。

如果您有 11g 企业版，则可以利用结果集缓存，它更加专注，并且可以为某些类型的查询提供一些惊人的性能改进。您描述的那种表将是理想的候选者。 [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e16638/memory.htm#BGBCABED)。

这同样适用于大量使用的程序。他们不会变老。

现在，如果您看到大量重新加载您认为应该固定的程序，这表明您的数据库要么缺少 RAM，要么没有正确分配它所获得的 RAM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T16:24:55.263

我理解的方式是肯定的，如果每次查询结果缓存都是一样的，那就是要走的路。但是，如果您在许多不同的查询中使用查找表，则结果将不可用。您将缓存整个表。然后使用该表的任何查询都将使用内存数据而不是 IO 物理读取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-08T21:35:40.960

您可以将内存分配给“KEEP”缓冲池（参数`buffer_pool_keep`），然后更改表以将其放入保持缓冲池中；这仅允许 KEEP 池中的表在那里缓冲数据，因此如果您在 KEEP 池中只有一个表，并且您将其大小设置为 10 兆字节，理论上整个表可以缓存在内存中。

```
alter table my_number_stuff storage( bupper_pool keep); 
```

# javascript - 如何使用 JQuery InsertAtCaret 函数

> ID：15975922
> 
> 赞同：5
> 
> 时间：2013-04-12T16:00:03.750
> 
> 标签：javascript, jquery

我在[这里](https://gist.github.com/mathiasbynens/326491)找到了 JQuery InsertAtCaret 函数但是没有详细说明如何使用它。我已经尝试了很多以了解如何使用它，但找不到任何方法。这是功能。

```
$.fn.insertAtCaret = function(myValue) {
    return this.each(function() {
        var me = this;
        if (document.selection) { // IE
            me.focus();
            sel = document.selection.createRange();
            sel.text = myValue;
            me.focus();
        } else if (me.selectionStart || me.selectionStart == '0') { // Real browsers
            var startPos = me.selectionStart, endPos = me.selectionEnd, scrollTop = me.scrollTop;
            me.value = me.value.substring(0, startPos) + myValue + me.value.substring(endPos, me.value.length);
            me.focus();
            me.selectionStart = startPos + myValue.length;
            me.selectionEnd = startPos + myValue.length;
            me.scrollTop = scrollTop;
        } else {
            me.value += myValue;
            me.focus();
        }
    });
}; 
```

我有一个文本框输入字段和它下面的文本区域。我应该在哪里调用这个函数，我应该给它什么值。我必须在哪里提供我的文本区域的参考。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T16:24:57.320

这是上述插件的修改版本：

```
jQuery.fn.extend({
insertAtCaret: function(myValue){
  return this.each(function(i) {
    if (document.selection) {
      //For browsers like Internet Explorer
      this.focus();
      sel = document.selection.createRange();
      sel.text = myValue;
      this.focus();
    }
    else if (this.selectionStart || this.selectionStart == '0') {
      //For browsers like Firefox and Webkit based
      var startPos = this.selectionStart;
      var endPos = this.selectionEnd;
      var scrollTop = this.scrollTop;
      this.value = this.value.substring(0, startPos)+myValue+this.value.substring(endPos,this.value.length);
      this.focus();
      this.selectionStart = startPos + myValue.length;
      this.selectionEnd = startPos + myValue.length;
      this.scrollTop = scrollTop;
    } else {
      this.value += myValue;
      this.focus();
    }
  })
}
}); 
```

`textbox`基本上，这个插件允许你在多个或的插入符号处插入一段文本`textarea`。你可以像这样使用它：

```
 $('#element1, #element2, #element3, .class-of-elements').insertAtCaret('text'); 
```

`**[Working Demo](http://jsfiddle.net/gHN8G/)**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-14T22:12:07.887

Firefox 最近为我破解了上面的代码，我不得不做出改变。

```
jQuery.fn.extend({insertAtCaret: function(myValue){
    return this.each(function(i) {
        if (document.selection) {
            //For browsers like Internet Explorer
            //log("INSERT IE: " + myValue);
            this.focus();
            var sel = document.selection.createRange();
            sel.text = myValue;
            this.focus();
        } else if (this.selectionStart || this.selectionStart == '0') {
            //For browsers like Firefox and Webkit based
            //log("INSERT Firefox: " + myValue);
            var startPos = this.selectionStart;
            var endPos = this.selectionEnd;
            var scrollTop = this.scrollTop;
            this.value = this.value.substring(0, startPos) + myValue + this.value.substring(endPos,this.value.length);
            this.focus();
            this.selectionStart = startPos + myValue.length;
            this.selectionEnd = startPos + myValue.length;
            this.scrollTop = scrollTop;
        } else if($(this).hasClass("ql-editor")){
            //log("INSERT QL-EDITOR: " + myValue);
            var range = window.getSelection().getRangeAt(0);
            var startPos = range.startOffset;
            var endPos = range.endOffset;
            var value = $(this).html();
            $(this).html(value.substring(0, startPos) + myValue + value.substring(endPos, value.length));
            this.focus();
        } else {
            //log("INSERT Unknown: " + myValue);
            this.value += myValue;
            this.focus();
        }
        //log(this);
    });
}}); 
```

# ios - iOS 导航控制器栏空白

> ID：15975923
> 
> 赞同：0
> 
> 时间：2013-04-12T16:00:04.940
> 
> 标签：ios, uinavigationcontroller, frame

![在此处输入图像描述](https://i.stack.imgur.com/wUdPA.png)

看到黑色导航栏和分组表视图垂直细条纹之间的空白了吗？该空间是导航栏的一部分。如果我滚动表格视图，空白保留在同一个地方。

**我需要仅在此 viewController 中使 navigationController 框架更短，因此在提供的屏幕截图中没有空格。**

*（也许这与这是一个带有分组表视图的视图控制器有关）..*

这是此 viewController 的唯一其他子视图：

```
tableView = [[UITableView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame] style:UITableViewStyleGrouped];

[self.view addSubview:tableView]; 
```

此导航栏在应用程序委托的 viewController 中实例化。

我不希望我在这个 viewController 中所做的更改带到它之前的那个（因为这个 navigationController 可以与其他六个 viewController 一起工作。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:14:41.280

据我所知，您无法在不经历一些奇怪行为的情况下更改导航栏的高度。也许你应该简单地隐藏这个视图控制器上的导航栏，然后实现你自己的视图看起来像一个导航栏？

# text - 相邻不同大小文本的对齐方式

> ID：15975930
> 
> 赞同：0
> 
> 时间：2013-04-12T16:00:30.210
> 
> 标签：text, html, font-size, baseline

*请*有人能帮我解决这个问题，我已经过了拔头发的阶段，不想最终秃顶！

经过几天的搜索、阅读和修改 inline / inline-block、float、line-height 和 font-size 属性，我遇到了一个我仍然无法理解的问题 - 对齐两个文本元素的基线。

我正在创建一个带有图像和两个文本元素的简单（ish）按钮：标题和标签。我希望在相邻 SPANS 中分隔的文本元素具有不同 FONT-SIZES 的标题和标签（旨在使标签右对齐）。

我只希望相邻跨度中的文本在行高内垂直居中，但位于公共基线上。问题是即使我使用下面提到的方法接近，我仍然在各种浏览器（尤其是 Opera）上看到不同的结果。我不愿意进行特定于浏览器的 CSS 调整，因为几乎每个浏览器的结果似乎都略有不同。

其他一切似乎都很好，所以我删除了代码中不必要的元素（以及使基线对齐的各种失败的努力，例如行高、垂直对齐、填充、边距等）。所以我意识到我所拥有的不会像现在这样工作。我还夸大了字体大小的差异，以更清楚地显示问题。

如果这个问题与时间本身一样古老，我深表歉意，但我在这里找到的任何东西似乎都无法解决我的问题。

**CSS：**

```
.sn-border {
position: relative;
display: block;
width: 237px;
height: 25px;
border-bottom: 1px solid #54534A;
overflow: hidden;
}
.sn-border span { display: block;  overflow: hidden; }
.sn-label { width: 100%; line-height: 25px; }
.sn-title, .sn-tag { float: left; }
.sn-title { width: 165px; font-size: 14px; color: #54534A; }
.sn-tag { width: 72px; font-size: 8px; text-align: right; color: #8C8C8C; } 
```

**标记：**

```
<a href="#" class="sn-border">
<span class="sn-label">
<span class="sn-title">Example Heading 001</span>
<span class="sn-tag">Example Label</span>
</span>
</a> 
```

**JSFiddle：http:** [//jsfiddle.net/sRLyM/](http://jsfiddle.net/sRLyM/)

我确信这一定很简单，但我已经尝试了我能想到的一切，阅读了我能找到的与该主题相关的每一个链接——一切都无济于事。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:43:04.400

我不确定我是否理解你在寻找什么，所以如果我弄错了，请告诉我。我认为您需要使高度线等于外部元素的高度。

`eJsfiddle`[http://jsfiddle.net/sRLyM/1/](http://jsfiddle.net/sRLyM/1/)

# business-process-management - 人工输入可以确定 BPMN 中的步骤吗？

> ID：15975935
> 
> 赞同：1
> 
> 时间：2013-04-12T16:00:51.097
> 
> 标签：business-process-management

我有一个过程

1.  接收消息
2.  针对消息运行规则（输出：验证|不验证）
3.  如果不验证则无需进一步操作。
4.  如果验证则要求用户检查消息（将其放在用户队列中）
5.  用户检查消息并且还可能决定对消息运行额外的检查。
6.  根据这些额外检查的输出，用户可以批准或拒绝该消息
7.  完毕。

我的问题是在第 5 步上，是否可以向用户显示他们希望针对此消息执行的其他“流程”的复选框列表，并且 BPM 仅调用那些选择的步骤。

因此，用户会看到一个复选框列表（A、B、C），他们希望执行 A 和 C。BPM 是否只能执行 A 和 C 并继续？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:57:05.347

通常你会通过在图表上放置一个或网关来模拟这种行为。根据包含用户选择的变量的值，可以选择一个或多个路径。您还可以设置默认路径。

我希望这有帮助。

# android - 为什么android无法识别颜色状态列表文件？

> ID：15975936
> 
> 赞同：1
> 
> 时间：2013-04-12T16:00:59.160
> 
> 标签：android, colors, android-drawable

我想要一个文本按钮，按下时可以突出显示，并且背景为空。（基本上就像浏览器中的链接）

我为此使用了一个按钮。

以下代码在我为“背景”属性输入时起作用。如果我为 textColor 属性输入它，我会为“textbutton”资源得到​​“android.content.res.Resources$NotFoundException:”（我尝试将它添加到颜色和drawble目录）

```
<Button android:text="My Text" android:background="@drawable/textbutton" android:textColor="#FFFFFFFF" android:layout_height="wrap_content" android:layout_width="wrap_content"></Button> 
```

以下代码不起作用：

```
<Button android:text="My Text" android:background="#0000" android:textColor="@drawable/textbutton" android:layout_height="wrap_content" android:layout_width="wrap_content"></Button> 
```

（使其成为颜色/，而不是可绘制对象也不起作用）

这是 textbutton.xml 的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"><color android:color="#FFFFFFFF"></color></item>
    <item android:state_focused="true"><color android:color="#FFFFFFFF"></color></item>
    <item><color android:color="#FF33b5e5"></color></item>
</selector> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T17:19:04.320

问题不是在“item”标签内定义“color”属性。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:color="#FFFFFFFF"></item>
    <item android:state_focused="true" android:color="#FFFFFFFF"></item>
    <item android:color="#FF33b5e5"></item>
</selector> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:40:30.037

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<color name="md__transparent">#00000000</color>
<color name="md__defaultBackground">#FF555555</color>
<color name="gesture_color">#FFFFFF00</color>
<color name="background_color">#2F4F92</color>
<color name="background_grey_color">#D8D8D8</color>
<color name="header_background_color">#FFAE02</color>
<color name="list_selection_dark">#a3a6a8</color>
<color name="tabBackground">#2568ba</color>
<color name="tabMedium">#1c4c80</color>
<color name="tabDark">#1d66ab</color>
<color name="tabTransparent">#10ffffff</color>
<color name="tabHeader">#FF4000</color>
<color name="tabUnselected">#cfcfcf</color>
<color name="title_background">#D7D4D4</color>
<color name="title_text">#000000</color>
<color name="title_text_alt">#ffffffff</color>
<color name="foreground1">#ff355689</color>
<color name="foreground2">#ff7081a3</color>
<color name="background1">#ffffffff</color>
<color name="background2">#ffd5ddeb</color>
<color name="background3">#ffe3e8f1</color>
<color name="title_separator">#40ffffff</color>
<color name="contents_text">#ff000000</color>
<color name="encode_view">#ffffffff</color>
<color name="grey">#D7D4D4</color>
<color name="help_button_view">#ffcccccc</color>
<color name="help_view">#ff404040</color>
<color name="possible_result_points">#c0ffff00</color>
<color name="result_image_border">#ffffffff</color>
<color name="result_minor_text">#ffc0c0c0</color>
<color name="result_points">#c000ff00</color>
<color name="result_text">#ffffffff</color>
<color name="result_view">#b0000000</color>
<color name="sbc_header_text">#ff808080</color>
<color name="sbc_header_view">#ffffffff</color>
<color name="sbc_list_item">#fffff0e0</color>
<color name="sbc_layout_view">#ffffffff</color>
<color name="sbc_page_number_text">#ff000000</color>
<color name="sbc_snippet_text">#ff4b4b4b</color>
<color name="share_text">#ff000000</color>
<color name="status_view">#50000000</color>
<color name="status_text">#ffffffff</color>
<color name="transparent">#00000000</color>
<color name="viewfinder_frame">#ff000000</color>
<color name="viewfinder_laser">#ffff0000</color>
<color name="viewfinder_mask">#60000000</color>
<color name="accent_1">#ff29549f</color>

<drawable name="white">#FFFFFF</drawable>
<drawable name="android_orange">#FF9E18</drawable>
<drawable name="android_yellow">#F2E406</drawable>

<color name="blue">#770000ff</color>
<color name="green">#7700ff00</color>
<color name="yellow">#77ffff00</color>
<color name="red">#FF0000</color>
<color name="screen_background_black">#ff000000</color>
<color name="translucent_background">#e0000000</color>
<color name="transparent_background">#00000000</color>
<color name="solid_red">#FF0000</color>
<color name="solid_blue">#0000ff</color>
<color name="solid_green">#f0f0</color>
<color name="solid_yellow">#ffffff00</color>
<color name="White">#FFFFFF</color>
<color name="Black">#000000</color>
<color name="actionbar_background_light">#ccffffff</color>
<color name="actionbar_background_dark">#cc000000</color>
<color name="drag_active_color">#80cccccc</color>
<color name="actionbar_text">#ff29549f</color> 
```

将此 xml 保存为项目的 values 文件夹中的“color.xml”，稍后您可以如下所示

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:state_pressed="true"
        android:color="@color/Black">
    </item>

    <item
        android:state_focused="true"
        android:color="@color/Blue">
    </item>

    <item android:color="@color/White">
    </item>
</selector> 
```

这是更有效的使用方式，因为它可以用于任何布局中的文本颜色、背景等。

# javascript - 'this' 不是指正确的方法

> ID：15975938
> 
> 赞同：1
> 
> 时间：2013-04-12T16:01:09.657
> 
> 标签：javascript, jquery

我的问题是“this”选择器没有引用正确的元素。我在 jquery 上进行了搜索，它说您必须键入：“$(this)”才能引用第一个函数，但这不起作用。

html:

```
<tbody id="tableBody">
            <tr>
                <td>Product 1</td>
                <td class="basisprijs">10.00</td>
                <td class="aantal"><input type="text" name="txtAtl1" value="0" id="txt1"/></td>
                <td class="btw">6</td>
                <td></td>
            </tr>
            <tr>
                <td>Product 2</td>
                <td class="basisprijs">15.00</td>
                <td class="aantal"><input type="text" name="txtAtl2" value="0" id="txt2"/></td>
                <td class="btw">21</td>
                <td></td>
            </tr>
            <tr>
                <td>Product 3</td>
                <td class="basisprijs">12.20</td>
                <td class="aantal"><input type="text" name="txtAtl3" value="0" id="txt3"/></td>
                <td class="btw">21</td>
                <td></td>
            </tr>
            <tr>
                <td>Product 4</td>
                <td class="basisprijs">13.00</td>
                <td class="aantal"><input type="text" name="txtAtl4" value="0" id="txt4"/></td>
                <td class="btw">21</td>
                <td></td>
            </tr>
        </tbody> 
```

Javascript：

```
$(document).ready(setup);

function setup()
{
$('input').keyup(function refresh(){
    $("#tableBody tr").each(function() {
        $('this td:last-child').html("test");       
    });
});
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:05:16.473

试试这样：

```
$('input').keyup(function refresh(){
    $("#tableBody tr").each(function() {
        $(this).find('td:last-child').html("test");       
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:04:10.037

```
$('td:last-child',this).html("test"); 
```

另一种方式是

```
$(this).find("td:last-child"); 
```

# html - 需要更改引导插入符号的指向位置

> ID：15975946
> 
> 赞同：0
> 
> 时间：2013-04-12T16:01:31.630
> 
> 标签：html, css, twitter-bootstrap

我有一个带有与之关联的可折叠菜单的按钮。当页面加载时，菜单被折叠。当您单击按钮时，我希望插入符号更改其指向位置，以便人们知道他们可以再次单击按钮以关闭菜单。

我找到了这个解决方案： [How to change the bootstrap caret pointing position?](https://stackoverflow.com/questions/13870746/how-to-change-the-bootstrap-caret-pointing-position)

上述解决方案的问题是它只会在区域关闭后更改插入符号的位置，我需要在它打开后更改它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:33:55.277

我找到了解决我遇到的问题的方法。我所要做的就是将“折叠”类添加到按钮中。

# javascript - 在 Angular.js 中，如何修改在单击时使用 ng-repeat 迭代的对象列表中元素的属性？

> ID：15975947
> 
> 赞同：1
> 
> 时间：2013-04-12T16:01:32.330
> 
> 标签：javascript, html, angularjs

在我的控制器中，我有一组对象（我才刚刚开始，如果这太天真了，请原谅我）：

```
$scope.links = [
    {
        'votes': 6,
        'voted_on': false
    },
    {
        'votes': 7,
        'voted_on': false
    }
]; 
```

我想在视图中列出这些并在单击时修改一些属性，保持一些反映 DOM 变化的复杂状态：

```
<ul>
    <li ng-repeat="link for links">
        <a ng-click="updateProperties()">Vote</a>
        {{link.votes}}
    </li>
</ul> 
```

你知道，我想`updateProperties()`管理很多有状态的逻辑（改变`{{link.votes}}`, increment的颜色，`link.votes`如果他们已经投票则不允许增加，等等）。我知道我需要定义函数，`$scope`但我只是不确定它会是什么样子，所以非常感谢帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:12:58.933

一种方法是必须`updateProperties`有一个参数，该参数是与投票相关的投票的唯一标识符。处理点击的逻辑将驻留在内部`updateProperties`，这将由您根据自己的需要进行定义。该函数只是一个标准的 javascript 函数，可以在控制器内部定义，例如

`$scope.updateProperties = function(pollID){...}`并且只要它所在的控制器在您从中调用它的页面部分中处于活动状态，那么您就可以使用该功能。

查看[Angular Docs](http://docs.angularjs.org)及其主页上的模型（我认为主页上的模型可能对您有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T23:58:36.810

一个更简单的方法是使用 $index 来查找项目，例如

```
<ul>
<li ng-repeat="link for links">
    <a ng-click="toggleVotedOn($index)">Vote</a>
    {{link.votes}}
</li> 
```

在你的控制器中，

```
$scope.toggleVotedOn = function(i) {
    $scope.links[i].voted_on = !($scope.links[i].voted_on);
} 
```

# java - java tcp程序太慢（在同一台电脑上）

> ID：15975949
> 
> 赞同：0
> 
> 时间：2013-04-12T16:01:35.617
> 
> 标签：java, performance, sockets, tcp

所以基本上我在我的电脑广告上运行 2 个 java 应用程序，然后在我传输数据后，我计算通过 java tcp 的传输速度，速度总是在 7 兆比特/秒左右，我期待至少 56 兆比特/秒的东西，这是客户端应用程序：

```
 import java.io.*;
import java.net.*;

class TCPClient
{
 public static void main(String argv[]) throws Exception
 {

 System.out.println("Hello, World");

           String modifiedSentence;
           BufferedReader inFromUser = new BufferedReader(new InputStreamReader(System.in));
           Socket clientSocket = new Socket("127.0.0.1", 7);

           BufferedInputStream inFromServer  = new BufferedInputStream(clientSocket.getInputStream());

           double count=0;
           OutputStream socketOutputStream = clientSocket.getOutputStream();

        String s = "012345678901234567\n";    

        byte[] bytes = s.getBytes(); 

        final int BUFFER_SIZE = 65536;
        byte[] buffer = new byte[BUFFER_SIZE];

        // socketOutputStream.write(bytes);
        // inFromServer.read(buffer);
        // modifiedSentence = new String(buffer);
        // System.out.println("FROM SERVER:" + modifiedSentence);
         socketOutputStream.write(bytes);
         long times=System.nanoTime() ;
        long temp=times;long temp2=times;
           while (true) {
               socketOutputStream.write(bytes);
           count++;

           socketOutputStream.flush();
               if(count>=100000){
                   break;

               }

           }

           times=System.nanoTime() ;
           System.out.println("time(ns) : " + (times-temp2));
           double speed=(72*2*count)/(double)((times-temp2)*Math.pow(10,-9));
           System.out.println("speed : " + speed/(1024*1024));
           clientSocket.close();

 }
} 
```

这是服务器代码：

```
import java.io.*;
import java.net.*;

class TCPClient extends Thread
{
    Socket clientSocket;
      public TCPClient(Socket socket) {
            super("KKMultiServerThread");
            this.clientSocket = socket;
            }

 public  void run() //throws Exception
 {

 System.out.println("Hello, World");
    try {

           String modifiedSentence;

           BufferedOutputStream outToServer = new BufferedOutputStream(clientSocket.getOutputStream());
           BufferedInputStream inFromServer  = new BufferedInputStream(clientSocket.getInputStream());

           double count=0;

        String s = "012345678901234567\n";    

        byte[] bytes = s.getBytes(); 
        long times=System.nanoTime() ;
        long temp=times;long temp2=times;
        final int BUFFER_SIZE = 19;
        byte[] buffer = new byte[BUFFER_SIZE];

         modifiedSentence = "";
           while ((inFromServer.read(buffer))!=-1) {

          // outToServer.write(bytes);
         //  outToServer.flush();

           }

           System.out.println("FROM SERVER:" + modifiedSentence);

           clientSocket.close();

     } catch (UnknownHostException e) {
         System.err.println("Don't know about host: taranis.");
         System.exit(1);
     } catch (IOException e) {
         System.err.println("Couldn't get I/O for "
                            + "the connection to: taranis.");
         System.exit(1);
     }

 }

} 
```

服务器代码被调整为不写，但只接收，客户端只发送，吞吐量增加到 27Mbit/sec，但不是 50Mbit/sec，这是以太网的一半速度，有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:01:42.550

我同意LJ2。

要增加吞吐量，请将缓冲区大小调整为 1024 字节并发送相同数量的数据；您当前仅发送 18 个字节；这不是很有效。
另外，请考虑仅在一侧阅读...您正在进行乒乓比赛（客户端随后读取和写入，服务器也是如此）-如果涉及吞吐量，这无济于事。

# bash - SVN 用户受限于 svn 信息

> ID：15975951
> 
> 赞同：1
> 
> 时间：2013-04-12T16:01:43.250
> 
> 标签：bash, svn, repository

我正在编写一个 Bash 脚本来检查几个 SVN 目录以查看它们是否正在运行当前版本。`svn info /path/to/svn`工作正常，因为我在文件系统上，但需要`svn info http://svnserver/path/to/svn`用户名/密码，正如[Get revision number of a remote repository 中](https://stackoverflow.com/questions/623378/get-revision-number-of-a-remote-repository)所建议的那样。出于安全原因，我不想在脚本中嵌入自己的密码。但是，如果我不嵌入密码，而只是在提示符下输入密码，我就无法将其捕获到变量中。

因此，如果我必须使用用户名和密码，我可以将一个用户添加到我的 svn 存储库中，该用户*只能*获取 SVN Info 的输出吗？甚至只是修订版？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:38:35.560

你不能这样做，但是：

*   如果远程存储库需要身份验证并且您至少提供一次（没有`--no-auth-cache`选项），则这些凭据将被存储并在下次用于此*主机中的此**本地用户*

# mysql - Mysql - 我可以查询事件（事件调度程序）的间隔吗？

> ID：15975952
> 
> 赞同：0
> 
> 时间：2013-04-12T16:01:55.330
> 
> 标签：mysql, events, intervals

有没有办法获得事件的间隔？我正在修改具有不同间隔的事件，但我还有其他查询取决于知道事件触发前的时间。

为了不必更改每个查询和操作，有没有办法找出特定事件的间隔及其当前持续时间或开始时间？

当我说事件时，我的意思是事件调度程序事件中的事件。

```
CREATE EVENT event_Update ON SCHEDULE EVERY 2 MINUTE
DO
BEGIN
...
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:20:28.147

尝试从表中获取事件详细信息`mysql.event`：

```
select * from mysql.event 
```

# sql - 如何在 ssrs 报告中格式化日期和时间？

> ID：15975955
> 
> 赞同：145
> 
> 时间：2013-04-12T16:01:58.793
> 
> 标签：sql, reporting-services, ssrs-2008

在 SSRS 报告上我需要显示`todays date and current time`

我试过了`=FormatDateTime(Now,"MM/dd/yyyy hh:mm tt")`，但这对我不起作用，给出错误。

有人请帮我`expression`吗？

我想要像这样的输出显示`4/12/2013 12:05 PM`

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2013-04-12T16:10:35.373

```
=Format(Now(), "MM/dd/yyyy hh:mm tt") 
```

输出：

```
04/12/2013 05:09 PM 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-12T17:39:28.133

如果日期和时间在它自己的单元格（又名文本框）中，那么您应该考虑将格式应用于整个文本框。这将创建更清晰的导出到其他格式；特别是，该值将作为日期时间值而不是字符串导出到 Excel。

使用属性窗格或对话框将文本框的格式设置为“MM/dd/yyyy hh:mm tt”

如果日期时间与另一个字符串连接，我只会使用 Ian 的答案。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-04-11T04:48:47.643

希望这可以帮助：

```
SELECT convert(varchar, getdate(), 100) -- mon dd yyyy hh:mmAM

SELECT convert(varchar, getdate(), 101) -- mm/dd/yyyy – 10/02/2008                  

SELECT convert(varchar, getdate(), 102) -- yyyy.mm.dd – 2008.10.02           

SELECT convert(varchar, getdate(), 103) -- dd/mm/yyyy

SELECT convert(varchar, getdate(), 104) -- dd.mm.yyyy

SELECT convert(varchar, getdate(), 105) -- dd-mm-yyyy

SELECT convert(varchar, getdate(), 106) -- dd mon yyyy

SELECT convert(varchar, getdate(), 107) -- mon dd, yyyy

SELECT convert(varchar, getdate(), 108) -- hh:mm:ss

SELECT convert(varchar, getdate(), 109) -- mon dd yyyy hh:mm:ss:mmmAM (or PM)

SELECT convert(varchar, getdate(), 110) -- mm-dd-yyyy

SELECT convert(varchar, getdate(), 111) -- yyyy/mm/dd

SELECT convert(varchar, getdate(), 112) -- yyyymmdd

SELECT convert(varchar, getdate(), 113) -- dd mon yyyy hh:mm:ss:mmm

SELECT convert(varchar, getdate(), 114) -- hh:mm:ss:mmm(24h)

SELECT convert(varchar, getdate(), 120) -- yyyy-mm-dd hh:mm:ss(24h)

SELECT convert(varchar, getdate(), 121) -- yyyy-mm-dd hh:mm:ss.mmm

SELECT convert(varchar, getdate(), 126) -- yyyy-mm-ddThh:mm:ss.mmm 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-23T19:14:33.140

I am using following in SSRS 2005

```
=Format(Globals!ExecutionTime,"MM-dd-yyyy" & " ") 
& CStr(Hour(Globals!ExecutionTime))  & ":"
& CStr(Minute(Globals!ExecutionTime)) 
```

Or

```
=Format(Globals!ExecutionTime,"MM-dd-yyyy" & " ") 
& Right("00" & CStr(Hour(Globals!ExecutionTime)), 2)
& ":"
& Right("00" & CStr(Minute(Globals!ExecutionTime)), 2) 
```

Based on comment:

```
=Format(CDate(Globals!ExecutionTime), "MM-dd-yyyy hh:mm.ss") 
```

OR

```
=Format(CDate(Globals!ExecutionTime), "MM-dd-yyyy HH:mm.ss") 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-07-26T09:10:36.487

在 SSRS 2016 中，属性标题“本地化”下有一个名为“ `Calendar`”的选项，如果单击它，它会为您提供以下 2 个选项：

*   公历 (dd/mm/yyyy)
*   GregorianUSEnglish (MM/dd/yyyy)

这在引用表中的数据时也很有效

或者，如果这对您不起作用，请在“数字”下和单元格“ `Format`”中指定以下格式之一：

`dd/MM/yyyy`或者`MM/dd/yyyy`

[![打印屏幕](https://i.stack.imgur.com/y8tRR.png)](https://i.stack.imgur.com/y8tRR.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-28T15:55:50.167

以下是我如何使用 Visual Studio 2017 为针对 SSRS 2017 的 RDL 执行此操作：

右键单击设计图面上文本框中的字段，然后选择**Placeholder Properties**。选择**数字**面板并单击**类别列表框中的****日期**，然后在**类型**列表框中选择您要查找的格式。

 ***** * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-03T11:48:28.120

首先进入您的控制面板，选择日期、时间和数字格式。现在从下拉列表中选择英语（英国）。

确保短日期字段等于“dd/mm/yyyy”。按应用。现在转到SSRS并右键单击空白处的报告并选择属性。

如果您使用的是 Visual Studio，则将 Language 属性设置为 =User!Language。

如果您使用的是 Report Builder，则 Language 属性将出现在 Localization 部分。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-15T10:22:05.380

如果您想将日期和时间分开，请使用以下表达式： [日期和时间表达式](https://i.stack.imgur.com/SBWP8.png)

**当前日期的**表达式1：** **=formatdatetime(today)** 它的返回日期是 = 11/15/2016**

 ****当前时间的**表达式2：** **=CDate(Now).ToString("hh:mm tt")** 它的返回时间是 = 3:44 PM**

 **此报告打印在**Expression1** 的**Expression2上**

输出将是： [两个表达式的输出](https://i.stack.imgur.com/BHtZq.png)

本报告于 2016 年 11 月**15** 日下午**3:44打印**

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-22T17:11:59.697

如果您单击远离任何表格的报告上的空白点，然后查看属性，其中一个杂项字段称为语言，它允许您选择要设置的语言，这样做之后可以玩这个

```
=FormatDateTime(now,x) 
```

`x`可以是1、2、3、4、5

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-11-14T07:47:10.993

```
=Replace(Format(CDate(Now()),"MM.dd.yyyy"), ".", "/") 
```

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2014-03-03T14:29:24.087

嗨朋友请试试这个表达你的报告

```
="Page " + Globals!PageNumber.ToString() + " of " + Globals!OverallTotalPages.ToString() + vbcrlf + "Generated: " + Globals!ExecutionTime.ToString() 
```********

# jquery - 没有通用导航按钮的 jQuery 内容滑块

> ID：15975964
> 
> 赞同：0
> 
> 时间：2013-04-12T16:02:14.067
> 
> 标签：jquery, slider

我正在寻找一个 jQuery Content Slider 插件（一角钱），但我需要一个不使用“通用”导航结构的插件。我需要能够为每张幻灯片定义自己的后退和下一个按钮，并且可以选择没有后退按钮或多个下一个按钮。

我的意思是我有 3 张幻灯片，其中包含 html 内容和/或表单字段。我想定义自己的锚链接以继续或返回。我希望能够通过数据属性或在它们上放置一个“后退”或“下一个”的类名来做到这一点。

这似乎并不难，但我还没有找到一个没有通用箭头、按钮等的开箱即用解决方案。如果你知道一个，我将非常感激。我希望它也支持过渡幻灯片，但不是必需的，我不需要它来支持任何自动计时功能。

## 例子：

```
<div id="slider">
  <div class="slide">
    // form
    <a class="next">Submit</a>
  </div>
  <div class="slide">
    // content
    <a class="next">Select Me</a>
    // content
    <a class="next">No Select Me</a>
    // content
    <a class="next">Select Me Instead</a>
    <a class="back">Go Back and Edit that Form</a>
  </div>
  <div class="slide">
    // content
    <a class="next">Continue On</a>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:38:33.640

我发现 Bootstrap 的 carousel.js 文件支持这个功能。

您所要做的就是添加几个数据属性：

*   数据幻灯片=“下一个”
*   数据目标=“#slider”

上面示例的结果代码将是：

```
<div id="slider">
  <div class="slide">
    // form
    <a data-slide="next" data-target="#slider">Submit</a>
  </div>
  <div class="slide">
    // content
    <a data-slide="next" data-target="#slider">Select Me</a>
    // content
    <a data-slide="next" data-target="#slider">No Select Me</a>
    // content
    <a data-slide="next" data-target="#slider">Select Me Instead</a>
    <a data-slide="prev" data-target="#slider">Go Back and Edit that Form</a>
  </div>
  <div class="slide">
    // content
    <a data-slide="next" data-target="#slider">Continue On</a>
  </div>
</div> 
```

# c++ - 编译器中的 C++ 迭代与递归优化

> ID：15975965
> 
> 赞同：0
> 
> 时间：2013-04-12T16:02:15.607
> 
> 标签：c++, compiler-construction

假设我有一个递归函数，它在到达基本情况之前多次调用自身（如阶乘）/获得一个值以开始展开其余的链。编译器会将其优化为与我以迭代格式编写该函数一样的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:09:38.663

这个问题的答案是“也许”。但是如果你真的想确保编译器不会使函数真正递归，那么你必须迭代地编写它。

许多编译器可以检测“尾递归”并将其转换为循环。但并非总是如此，而且并不总是像您自己将其编写为迭代函数那样具有相同的效率。

对于更复杂的情况，例如斐波那契数列（这不是一个简单的尾递归函数），编译器通常很难真正意识到发生了什么，它必须求助于实际使其递归，即使它是使其迭代非常简单。[当我在递归方法中尝试斐波那契时，我的结果比迭代方法差得多 - 表明编译器没有解决它 - 而使用`gcc`它通常在这些事情上相当聪明]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:09:37.273

也许吧，但请注意，C++ 的语义通常会使它变得更加困难。返回时调用的那些析构函数意味着很多看起来像尾递归的东西不是。

# clojure - Clojure 协议/函数优先级

> ID：15975966
> 
> 赞同：3
> 
> 时间：2013-04-12T16:02:16.450
> 
> 标签：clojure

使用 Clojure，我们有以下内容：

```
(defprotocol Greeter (hello [args] "Say hello"))

(extend-protocol Greeter
   String
   (hello [this] (str "Hello " this)))

(hello "world")    ; "Hello world" 
```

到目前为止，一切都很好。然后我们添加：

```
(defn hello [args] (str "Wassup " args "?")) 
```

它将先前形式的输出更改为：

```
(hello "world")    ; "Wassup world?" 
```

有没有办法让协议优先于功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T16:36:11.830

> 有没有办法让协议优先于方法？

你不能`defn`与`defprotocol`. 这是因为`defprotocol`实际上为您当前命名空间中的函数生成了一个绑定。请注意按以下顺序运行代码时收到的警告：

```
user=> (defn hello [args] (str "Wassup " args "?"))
#'user/hello
user=> (defprotocol Greeter (hello [args] "Say hello"))
Warning: protocol #'user/Greeter is overwriting function hello
Greeter 
```

[协议文档](http://clojure.org/protocols)解释说，提供默认实现的正确方法是使用`Object`：

```
(defprotocol Greeter (hello [args] "Say hello"))

(extend-protocol Greeter
   Object
   (hello [this] (str "Wassup " this "?")))

(extend-protocol Greeter
   String
   (hello [this] (str "Hello " this)))

(hello "world")    ; "Hello world"

(hello 1)    ; "Wassup 1?" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T16:33:55.527

协议方法*是*函数，因此与任何其他 var 一样，如果您想让其中两个具有相同的名称，则必须将它们放在单独的命名空间中。

# css - Twitter Bootstrap - 内联复选框对齐问题

> ID：15975968
> 
> 赞同：28
> 
> 时间：2013-04-12T16:02:24.023
> 
> 标签：css, twitter-bootstrap

把自己逼疯了，试图弄清楚这一点。我似乎无法让包裹到下一行的复选框正确左对齐。

这是一些示例代码：

```
<label class="checkbox inline">
  <input type="checkbox" id="inlineCheckbox1" value="option1"> Aaaaaaaaaa
</label>
<label class="checkbox inline">
  <input type="checkbox" id="inlineCheckbox2" value="option2"> Bbbbbbb
</label>
<label class="checkbox inline">
  <input type="checkbox" id="inlineCheckbox3" value="option3"> Cccccccccccccc
</label>
<label class="checkbox inline">  
    <input type="checkbox" id="inlineCheckbox1" value="option1"> Ddddddddd
</label>
<label class="checkbox inline">
  <input type="checkbox" id="inlineCheckbox2" value="option2"> Eeeeeeeee
</label>
<label class="checkbox inline">
  <input type="checkbox" id="inlineCheckbox3" value="option3"> Ffffffffffff
</label> 
```

结果如下：

![在此处输入图像描述](https://i.stack.imgur.com/hHTzb.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-05-30T17:11:27.210

您可以通过添加 no_indent 类（或其他）来覆盖 Bootstrap 2 类：

```
<label class="checkbox inline no_indent">
  <input type="checkbox" id="inlineCheckbox1" value="option1"> Aaaaaaaaaa
</label> 
```

并将其添加到您的 CSS 中：

```
.checkbox.inline.no_indent,
.checkbox.inline.no_indent+.checkbox.inline.no_indent {
  margin-left: 0;
  margin-right: 10px;
}
.checkbox.inline.no_indent:last-child {
  margin-right: 0;
} 
```

**Bootstrap 3：**这些`checkbox inline`类已减少为一个`checkbox-inline`类。HTML 变为：

```
<label class="checkbox-inline no_indent">
  <input type="checkbox" id="inlineCheckbox1" value="option1"> Aaaaaaaaaa
</label> 
```

CSS：

```
.checkbox-inline.no_indent,
.checkbox-inline.no_indent+.checkbox-inline.no_indent {
  margin-left: 0;
  margin-right: 10px;
}
.checkbox-inline.no_indent:last-child {
  margin-right: 0;
} 
```

**Bootstrap 4：**课程`checkbox-inline`现在是`form-check-inline`：

```
<label class="form-check-inline no_indent">
  <input type="checkbox" id="inlineCheckbox1" value="option1"> Aaaaaaaaaa
</label> 
```

CSS：

```
.form-check-inline.no_indent,
.form-check-inline.no_indent+.checkbox-inline.no_indent {
  margin-left: 0;
  margin-right: 10px;
}
.form-check-inline.no_indent:last-child {
  margin-right: 0;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-20T09:09:28.953

这是一个完整的 Bootstrap 3 解决方案，它也解决了单选按钮的相同问题，而无需使用单独的类：

```
.checkbox-inline,
.checkbox-inline + .checkbox-inline,
.checkbox-inline + .radio-inline,
.radio-inline,
.radio-inline + .radio-inline,
.radio-inline + .checkbox-inline {
    margin-left: 0;
    margin-right: 10px;
}

.checkbox-inline:last-child,
.radio-inline:last-child {
    margin-right: 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-29T05:26:21.597

将每个标签+输入包装在一个中`<li>`修复了没有 CSS 覆盖/自定义的边距左对齐问题

```
<ul>
  <li>
    <label class="checkbox-inline">
      <input type="checkbox" value="option1"> Option 1
    </label>
  </li>

  <li>
    <label class="checkbox-inline">
      <input type="checkbox" value="option1"> Option 2
    </label>
  </li>
</ul> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-10-22T10:42:35.647

删除元素`inline`上的类。`label`

# matlab - 微分方程 Matlab

> ID：15975969
> 
> 赞同：1
> 
> 时间：2013-04-12T16:02:24.380
> 
> 标签：matlab

我对matlab不是很熟悉。我使用 ode45 求解形式为 dS(t)/dt = F(S(t))（给定 S(0)）的一阶微分方程。但是，我有第二个微分方程要求解，即 dX(t)/dt = G(X(t),S(t))（给定 X(0)）。如何使用 S 上的结果来求解 X 上的方程？

我想要解决方案 S（和 G）的值 S(1) 和 G(1)。我的第一个想法很“天真”。我首先创建了一个函数，它为我提供了 [0,1] 中 t 的值 S(t)：

```
function dS=equation1(t,S)
dS=F(S);
end

function S=solve1(S0,t)
if t==0
  S=S0;
else
[~,V]=ode45(@equation1,[0 t],S0);
S=V(end,:)
end 
```

然后我创建了第二个函数来求解第二个方程：

```
function dX=equation2(t,X)
dX=G(X,solve1(t));
end

function G=solve2(X0,t)
[~,V]=ode45(@equation2,[0 t],X0);
end 
```

最后，G(1)=solve2(X0,1) 和 S(1)=solve1(S0,1)。但我觉得有更好的方法来做到这一点！谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:41:35.043

这基本上是扩展微分方程以包含更多参数，这可以相当简单地完成。所以如果 S：

```
ds[1] = s[1] - s[2];
ds[2] = 3*s[1] + 0.5*s[2]; 
```

现在假设 X 是二阶微分方程。扩展的 X 也将包含 S（在此表示为 x[3] 和 x[4]）：

```
dx[1] = a1*x[1] + b1*x[2] + c1*x[3] + d1*x[4]
dx[2] = a2*x[1] + b2*x[2] + c2*x[3] + d2*x[4]
dx[3] = x[3] - x[4];
dx[4] = 3*x[3] + 0.5*x[4]; 
```

# c# - 将数据从 IntPtr 复制到 IntPtr

> ID：15975972
> 
> 赞同：36
> 
> 时间：2013-04-12T16:02:35.273
> 
> 标签：c#, intptr

我有两个`IntPtr`值指向一些`length`字节数据区域。`length`可能有 200k 到 400k 的数量级。

```
int length = /* ..*/
IntPtr ptrSrc = /*.. */;
IntPtr ptrDst = /* .. */; 
```

现在我想将数据从 复制`ptrSrc`到`ptrDst`. 此代码工作正常：

```
byte[] data = new byte[length];
Marshal.Copy(ptrSrc, data, 0, length);
Marshal.Copy(data, 0, ptrDst, length); 
```

但它的缺点是需要一个额外的临时（可能是巨大的）数组。`Marshal.Copy`不幸的是，我在 .NET 框架中找不到用于直接从`IntPtr`to复制的变体`IntPtr`，因此我正在寻找替代方案。

我对适用于 32 位 Windows 和 64 位 Windows 的解决方案感兴趣。有什么建议么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-12T16:09:59.807

您可以 P/Invoke 到适当的 C 函数中。这可能是最简单的方法。例子：

```
class Program
{
    [DllImport("kernel32.dll", EntryPoint = "CopyMemory", SetLastError = false)]
    public static extern void CopyMemory(IntPtr dest, IntPtr src, uint count);

    static void Main()
    {
        const int size = 200;
        IntPtr memorySource = Marshal.AllocHGlobal(size);
        IntPtr memoryTarget = Marshal.AllocHGlobal(size);

        CopyMemory(memoryTarget,memorySource,size);
    }
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-08-04T07:25:11.093

我认为答案需要在 .net 4.6 中进行更新

```
 Buffer.MemoryCopy Method (Void*, Void*, Int64, Int64) 
```

此方法将 sourceBytesToCopy 字节从 source 指定的地址复制到 destination 指定的地址。如果缓冲区重叠并且目标减去源之间的差异小于 sourceBytesToCopy，则源块以相反的顺序复制到目标块。

因此，如果您不在 4.6 或通用 Windows 应用程序 10 上，请使用上一个答案。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-01-13T20:31:27.760

正如[user38000527 指出](https://stackoverflow.com/a/45500615/184528)的那样，现代答案是[MemoryCopy](https://docs.microsoft.com/en-us/dotnet/api/system.buffer.memorycopy?view=netframework-4.7.2)，它是 .NET core 1.0、.NET standard 1.3 和 .NET framework 4.6 的一部分。

以下是您在上下文中使用它的方式：

```
Buffer.MemoryCopy(ptrSrc.ToPointer(), ptrDest.ToPointer(), length, length) 
```

# scala - joinLeft [A1 >: A, B1 >: B, C] ... 为什么类型约束 A1 >: A 和 B1>: B 是必要的？

> ID：15975976
> 
> 赞同：1
> 
> 时间：2013-04-12T16:02:50.803
> 
> 标签：scala

在对这个问题“ [What's the deal with the Either cruft?](https://stackoverflow.com/questions/7131076/whats-the-deal-with-all-the-either-cruft?answertab=votes#tab-top) ”的好回答之后，对于 Either[+A, +B]，joinLeft 定义为

```
joinLeft [A1 >: A, B1 >: B, C] (implicit ev: <:<[A1, Either[C, B1]]):
         Either[C, B1] 
```

@Didier 说“A1 和 B1 在技术上是必要的，但对理解并不重要......”；但是，我很好奇为什么我们不能只拥有

```
joinLeft[C](implicit ev: <:<[A, Either[C, B]): Either[C, B] 
```

* * *

**编辑**
我试图将方差的概念应用于joinLeft。一、joinLeft的来源：

```
abstract class Either[+A, +B]

def joinLeft[A1 >: A, B1 >: B, C](implicit ev: A1 <:< Either[C, B1]):
    Either[C, B1] = this match {
    case Left(a)  => a
    case Right(b) => Right(b)
} 
```

我可能错了，但 2ed 案例对我来说似乎更容易：
`Right(b)`需要满足 `Either[C, B1] >: Either[C, B]`. 因为 Either 是协变的，所以`B1 >: B`.

但是有一个问题：为什么我们有 joinLeft 类型`Either[C, B1]`而不是 just `Either[C, B]`？是因为约束少吗？

`implicit ev: (<:<[A1, Either[C, B1]])`只能从 A 的超类型转换`A1`为 A1 的超类型`Either[C, B1]`。我认为它用于`a`第一种情况。但我觉得A1没有必要。我们可以这样定义joinLeft吗：

```
def joinLeft[B1 >: B, C](implicit ev: A <:< Either[C, B1]) 
```

? 我的分析可能是胡说八道。请随时纠正我。

* * *

**已编辑关于joinLeft** [of Either](https://stackoverflow.com/questions/16013084/type-constraints-and-reifications-regarding-to-joinleft-of-either)
的 另一个问题类型约束和具体化的答案与此相关。

* * *

**已编辑**

非常感谢@sschaef 对此进行跟踪。相关讨论可以在这里找到：

*   [https://groups.google.com/d/msg/scala-language/jFw1Bj9aZxE/pRNgZaLLNbEJ](https://groups.google.com/d/msg/scala-language/jFw1Bj9aZxE/pRNgZaLLNbEJ)
*   [https://github.com/scala/scala/pull/2401](https://github.com/scala/scala/pull/2401)

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T18:28:45.527

那是因为类型参数是协变的（[source](https://github.com/scala/scala/blob/v2.10.1/src/library/scala/util/Either.scala#L70)）：

```
abstract class Either[+A, +B] 
```

解释差异的最简单方法是使用列表：

```
abstract class MList[A]
case class Cons[A](head: A, tail: MList[A]) extends MList[A]
object MNil extends MList[Nothing] 
```

如果我们尝试实例化这样的列表，它将不起作用：

```
scala> Cons(1, MNil)
<console>:12: error: type mismatch;
 found   : MNil.type
 required: MList[Int]
Note: Nothing <: Int (and MNil.type <: MList[Nothing]), but class MList is invariant in type A.
You may wish to define A as +A instead. (SLS 4.5)
              Cons(1, MNil)
                      ^ 
```

正如错误消息所说，问题在于我们的类型`A`是不变的，这意味着对于`B`类型`A`( `B <: A`) 的子类型，说 . 是无效的`List[B] <: List[A]`。

我们可以通过声明`A`协变来改变它：

```
abstract class MList[+A]
// rest as before

scala> Cons(1, MNil)
res3: Cons[Int] = Cons(1,MNil$@5ee988c6) 
```

协变意味着类型的子类型关系被转发到外部类型，在我们的示例中，它意味着`MList[Nothing] <: MList[Int]`因为`Nothing`是 Scalas 底层类型，因此是每个可能类型的子类型。

但是现在，我们有一个问题。我们不能向`MList`期望类型参数的方法添加方法`A`：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

abstract class MList[+A] {
  def Cons(b: A) = new Cons(b, this)
}
case class Cons[A](head: A, tail: MList[A]) extends MList[A]
object MNil extends MList[Nothing]

// Exiting paste mode, now interpreting.

<console>:11: error: covariant type A occurs in invariant position in type (b: A)Cons[A] of method Cons
         def Cons(b: A) = new Cons(b, this)
             ^
<console>:11: error: covariant type A occurs in contravariant position in type A of value b
         def Cons(b: A) = new Cons(b, this)
                  ^ 
```

要解释为什么编译器拒绝此代码，有必要更深入地了解系统。我们假设`List[B] <: List[A]`当 时总是如此`B <: A`。然后将编译以下代码：

```
val xs: Array[Any] = Array[Int](18)
xs(0) = "hello" 
```

因为`Int <: Any`，这也是事实`Array[Int] <: Array[Any]`。而且因为`String <: Any`也是如此，编译器可以毫无问题地翻译此代码，但在运行时它会失败，因为我们无法将 a 存储`String`在 an 内部`Array[Int]`（JVM 上的数组没有类型擦除）。因此，在 Scala 中，将 a 赋值`Array[Int]`给 an`Array[Any]`是无效的，代码被拒绝。尽管如此，因为`List`我们没有收到错误：

```
scala> val xs: List[Any] = List[Int](18)
xs: List[Any] = List(18) 
```

不同行为的原因是因为`List`是协变的，而`Array`不是（它是不变的）。但为什么会有差异？那是因为 的不可变性质`List`， a 的元素`List`不能改变。但是因为`Array`我们可以改变元素——换句话说，通过变量，程序员可以向编译器提供元素是否可变的信息，并且它应该关心没有人对我们的代码做愚蠢的事情。

我们回到我们`MList`需要修复的地方。因为它是不可变的，所以我们可以安全地将其声明为协变。实际上我们需要这样做，否则我们无法使用`MNil`. 不可能给对象提供类型参数，因此为了避免以后出现类型问题，我们需要`MList`使用尽可能低的类型进行扩展，即`Nothing`. 为了解决这个问题，我们需要设置一个下限：

```
abstract class MList[+A] {
  def Cons[B >: A](b: B) = new Cons(b, this)
}
case class Cons[A](head: A, tail: MList[A]) extends MList[A]
object MNil extends MList[Nothing]

scala> MNil Cons 2 Cons 1
res10: Cons[Int] = Cons(1,Cons(2,MNil$@2e6ef76f)) 
```

`B >: A`是我们的下界，means`A`是 的子类型`B`或者`B`是 的超类型`A`。要得到 a`MList[Int]`当我们有 a `MList[Nothing]`（即`MNil`），我们需要这样一个下界，因为`Int >: Nothing`我们有`MList[Nothing].Cons[Int].Cons[Int]`。

所以，这就是为什么`joinLeft`也需要这样的下限的原因。事实上，确实`joinLeft`只有第二种类型的界`B1 >: B`是必要的，而另一种是不需要的，因为`<:<`它的第一个类型参数已经是逆变的。这意味着下限 on`A`没有任何影响（*旁注：我打开了一个拉取请求，删除了下限`A`但更改被拒绝，因为它破坏了向后源兼容性并且找不到解决方法。*）

# c - 指向指针的指针与指针

> ID：15975980
> 
> 赞同：5
> 
> 时间：2013-04-12T16:03:04.000
> 
> 标签：c, pointers

我正在尝试使用双指针（指向指针的指针）并想正确理解它。我正在尝试以下代码

```
#include<stdio.h>

int main()
{
    int y = 5;
    int *p = &y;
    int *q = &p;

    printf("\n\n %p %p %p %p %d\n\n",q,&p,p,*q,*p);

    return 0;

 } 
```

现在在上面的代码中，p 是指向 y 的指针，q 是指向 p 的指针。我故意不使用双指针 (**q) ，只是为了检查会发生什么。编译器给了我一个警告，指出不兼容的指针类型。当我执行代码时，我明白 q 是指向 p 的指针，所以它包含 p 的地址，但是 *q 并没有给我 p 中包含的值，即 y 的地址，而是我得到了一些垃圾值. 是因为我没有将 q 声明为双指针吗？谁能解释为什么我得到了一些奇怪的价值 *q ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T16:06:18.727

> 我得到了一些垃圾价值。是因为我没有将 q 声明为双指针吗？

本质上，是的：由于您声明`q`为指向 的指针`int`，因此取消引用操作`*q`认为该地址是`int`. 当它作为指针`int`发送时，您会遇到未定义的行为。`%p`请注意，即使在指针表示与`int`. 这就是未定义行为的危险性质：有时它会“错误地”起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:10:42.657

> 谁能解释为什么我会得到一些奇怪的价值`*q`？

有几个问题：

*   首先，通过使用，`*q`您试图将指针解释为`int`. 这是无效的。
*   其次，您的`printf()`格式说明符与第五个参数的类型不匹配。

在某些平台上（包括我正在输入的计算机），指针**比**`int`. 如果我在我的电脑上运行你的代码，我会得到：

```
0x7fff5ef94ad8 0x7fff5ef94ad8 0x7fff5ef94ae4 0x5ef94ae4 5 
```

在这里，64 位指针被截断为 32 位`int`。因此，仅显示指针的下部。但是，由于您的代码的行为未定义，因此很可能以其他方式失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T16:06:28.080

在您的示例`p`中是指向 int 的指针，这意味着`&p`是指向 int 的指针的指针。因此，`q`应声明为`int**`

从我下面的评论中...您声明`q`不正确...因此，`*q`它是一个整数，而不是指针，并且您将一个整数传递到`printf()`它正在寻找内存地址的位置...之后几乎所有的事情都是未定义的行为.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T16:06:39.467

此行不正确

```
 int *q = &p; 
```

&p 是指向 int (y) 的指针 (p) 的地址

将其分配给指向 int (q) 的指针将进行重新解释

*q 将 p 的地址解释为整数。那和y(=5)的内容不一样

# ios - 单击目标 c 中的按钮时在 UIWebView 中打开链接

> ID：15975982
> 
> 赞同：-3
> 
> 时间：2013-04-12T16:03:06.650
> 
> 标签：ios, objective-c, uiwebview

我想在我的应用程序中打开一个网页而不启动 Safari。我希望页面仅在单击按钮时出现。

另外，如何启用/禁用按钮..我使用了以下内容但它不起作用：

Button.enabled = YES；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:11:12.807

您应该在您的类中实现[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol)并使用在 webview 中加载请求

```
-(IBAction)openLinkInWebView:(id)sender{

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://yourlink"]] ;
[self.yourWebView loadRequest: request];
} 
```

如果您不知道如何操作，请按照[一些教程](http://conecode.com/news/2011/05/ios-tutorial-creating-a-web-view-uiwebview/)进行操作。

对于隐藏按钮，您需要`UIButton`在用户界面中正确设置插座，以便在代码中访问其属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:12:11.530

您可以使用以下代码添加按钮释放操作：

```
[button addTarget:self action:@selector(openWebview:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后定义你的动作：

`- (void)openWebview:(UIButton *)sender { // open webview code }`

# android - 使用哪些 API 来覆盖其他应用程序（例如 Facebook 的 Chat Heads）？

> ID：15975988
> 
> 赞同：229
> 
> 时间：2013-04-12T16:03:28.757
> 
> 标签：android, facebook, android-windowmanager

Facebook 如何在 Android 上创建聊天头？在所有其他视图之上创建浮动视图的 API 是什么？

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2013-04-12T21:11:53.720

[这个](http://developer.android.com/reference/android/Manifest.permission.html#SYSTEM_ALERT_WINDOW)：

> 允许应用程序使用 TYPE_SYSTEM_ALERT 类型打开窗口，显示在所有其他应用程序的顶部。很少有应用程序应该使用此权限；这些窗口旨在与用户进行系统级交互。
> 
> 常量值：“android.permission.SYSTEM_ALERT_WINDOW”

//编辑：[这里](http://www.piwai.info/chatheads-basics)的完整代码：

```
public class ChatHeadService extends Service {

  private WindowManager windowManager;
  private ImageView chatHead;

  @Override public IBinder onBind(Intent intent) {
    // Not used
    return null;
  }

  @Override public void onCreate() {
    super.onCreate();

    windowManager = (WindowManager) getSystemService(WINDOW_SERVICE);

    chatHead = new ImageView(this);
    chatHead.setImageResource(R.drawable.android_head);

    WindowManager.LayoutParams params = new WindowManager.LayoutParams(
        WindowManager.LayoutParams.WRAP_CONTENT,
        WindowManager.LayoutParams.WRAP_CONTENT,
        WindowManager.LayoutParams.TYPE_PHONE,
        WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
        PixelFormat.TRANSLUCENT);

    params.gravity = Gravity.TOP | Gravity.LEFT;
    params.x = 0;
    params.y = 100;

    windowManager.addView(chatHead, params);
  }

  @Override
  public void onDestroy() {
    super.onDestroy();
    if (chatHead != null) windowManager.removeView(chatHead);
  }
} 
```

不要忘记以某种方式启动服务：

```
startService(new Intent(context, ChatHeadService.class)); 
```

..并将此服务添加到您的清单中。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-04-15T15:41:17.147

通常，Android 活动是全屏的、概念上专用的 UI，可以进行所有交互。有几个例外。首先，有一些不会填满屏幕的弹出对话框。另一个是Android toast，它是一个非交互式弹出窗口——你不能触摸它，如果你尝试它会转到下面的任何东西。

您也可以制作自己的特殊 UI。您可以将视图直接添加到`WindowManager`，指定类型标志。聊天头可能使用[TYPE_PHONE](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#TYPE_PHONE)。有一些类似的类型，但目的是一样的：特殊用途的覆盖可以出现在其他任何东西的顶部，而父应用程序显然不存在。

但是，由于交互问题，这只能使您到目前为止。一开始，你的叠加层会吸收所有的交互，所以不仅头部会得到事件，而且你会阻止与下面所有东西的交互。

[您可以使用LayoutParams](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html)配置此行为。`FLAG_NOT_TOUCH_MODAL`意味着显示区域之外的事件会转到底层 UI。您现在会发现它可以工作，但是其他不好的事情仍然会发生，例如后退/菜单按钮没有定向到应用程序，而且没有键盘。要解决您需要`FLAG_NOT_FOCUSABLE`的 .

您也会从不可聚焦的位中获得副作用，这不再与您的叠加层进行良好的交互，例如按钮按下。不过，您可以获得一些基本的触摸事件，您可以随时对其进行数学运算，这对于聊天头来说可能就足够了。请注意，它会让您在很多领域都靠自己，比如 UI 动画。

可以在[这个 StackOverflow 线程](https://stackoverflow.com/questions/4481226/creating-a-system-overlay-always-on-top-button-in-android)中找到对细节的一个很好的概述，包括允许选择性交互消费。特别是其中一个答案链接最终会将您带到[这里](http://www.jawsware.mobi/code_OverlayView/)，这是一个很好的示例项目。请注意，ICS 稍微改变了它的工作方式，但线程解释了这一点。

这都是公共 API 的东西，但它似乎并不是理所当然应该做的主流事情。文档中充斥着对特殊系统应用程序行为的引用，并且有充分的理由；如果每个人都这样做呢？

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-29T09:07:31.150

[Springy Heads](https://github.com/flipkart-incubator/springy-heads)提供了开箱即用的基于弹簧的聊天头行为。您只需定义聊天头的可绘制对象和单击聊天头后要打开的片段。聊天头在最小化时折叠并在拖动时跟随手指。

该项目包括一个演示应用程序，它演示了所有内置功能。要使用它，您需要将其添加到您的 gradle 依赖项中。

```
compile 'com.flipkart.springyheads:library:0.9.6' 
```

# layout - 更改 Spark TileLayout 的“流”方向

> ID：15975993
> 
> 赞同：1
> 
> 时间：2013-04-12T16:03:40.457
> 
> 标签：layout, flex4, flex-spark

在 Flex Spark TileLayout 中，您似乎可以使用`orientation`属性轻松更改元素的顺序，设置为`rows`或`columns`。一种使元素从上到下、从左到右流动，另一种使它们从左到右、从上到下流动。

但是，我希望能够从下到上、从右到左排列元素，如下所示（两行）：

```
 6 4 2
7 5 3 1 
```

或三行：

```
 6 3
  8 5 2
  7 4 1 
```

是否可以通过 TileLayout 属性的某种组合来做到这一点，或者我需要制作自定义布局？