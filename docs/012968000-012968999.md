# StackOverflow 问答 12968000-12968999

# node.js - 将节点检查器与多个节点进程一起使用

> ID：12968001
> 
> 赞同：15
> 
> 时间：2012-10-19T05:39:24.707
> 
> 标签：node.js, node-inspector

我开始使用 Node Inspector 来调试我的一些 Node 应用程序。但是，我不确定该怎么做的一件事是，一旦将 Node-inspector 附加到一个 Node 应用程序，如何将其分离并附加到在同一个盒子上运行的另一个 Node 应用程序？

如何同时调试多个进程？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-19T08:55:16.720

*更新：* 如果您在 2019 年阅读此内容，则以下答案已过时。您可能想查看当前文档或遵循 gtzilla 答案： [https ://nodejs.org/en/docs/guides/debugging-getting-started/](https://nodejs.org/en/docs/guides/debugging-getting-started/)

首先，使用不同的调试端口启动您的节点程序，如下所示：

```
$ node script1.js --debug==5858
$ node script2.js --debug==5859 
```

然后开始`node-inspector`

```
$ node-inspector & 
```

并在两个选项卡中打开 Web 控制台

1.  `http://localhost:8080/debug?port=5858`
2.  `http://localhost:8080/debug?port=5859`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-01-18T14:51:27.087

如前所述[https://stackoverflow.com/a/18911247/1301197](https://stackoverflow.com/a/18911247/1301197)您可以指定一个端口

```
node --inspect=7000 --inspect-brk app1.js 
```

然后当然你只需为每个节点服务器指定一个不同的端口

```
node --inspect=7001 --inspect-brk app2.js 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-20T18:26:40.630

## 附加调试器

通过端口或进程 ID。对于端口，为每个进程使用不同的端口。在命令行上：

```
node --inspect 8085 some_script_1.js
node --inspect 8086 some_script_2.js
node --inspect 9012 some_script_3.js 
```

在单独的终端窗口中，您可以使用`node inspect <host>:<port>`. 例如附加到`some_script_2.js`端口`8086`

```
node inspect 127.0.0.1:8086 
```

附加到不同的进程是改变端口的问题，例如`9012`你会运行

```
node inspect 127.0.0.1:9012 
```

如果您没有在单独的已知端口上启动节点，您还可以使用该`-p`标志直接附加到现有进程

```
node inspect -p <node_script_process_id> 
```

在 Linux 和 Mac OS 上用于`ps -A | grep node`查找节点进程 ID。启动进程后，您还可以通过向节点进程发送信号来附加检查器`SIGUSR1` [参考](https://nodejs.org/en/docs/guides/debugging-getting-started/)

`node-inspect`程序（[源](https://github.com/nodejs/node-inspect "nodejs检查源")）与核心节点分开。虽然它与 nodejs 捆绑在一起。节点检查重新实现节点调试以解决限制

> 对于 Chrome 检查器协议，只有一个： node --inspect ...该项目试图通过针对新协议重新实现节点调试来提供缺少的第二个选项。

[调试器 API 文档](https://nodejs.org/api/debugger.html)

## 附加调试器的其他方法

[https://nodejs.org/en/docs/guides/debugging-getting-started/](https://nodejs.org/en/docs/guides/debugging-getting-started/)

您可以在 Chrome 中查看与调试器的交互。`Connections`只需在专用 NodeJS DevTools 窗口的选项卡下添加其他连接。

[![用于 DevTools 连接的 Chrome 窗口](../Images/5950d272d16bf9f84c70c78f949c6d88.png)](https://i.stack.imgur.com/wFPWl.png)

### 类似但独立的项目

值得注意的是，有一个类似的项目，现在已弃用，称为[`node-inspector`](https://github.com/node-inspector/node-inspector "名称相似，但不同")，它与[`node-inspect`](https://github.com/nodejs/node-inspect "nodejs检查源")Tested October, 2018 with node v10.11.0 分开

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-25T12:57:02.303

如果您使用**Chrome**，那么您也可以直接使用带有 url 的**devtools ，例如：**

```
devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=127.0.0.1:9229/0cc79945-8386-4082-aabb-328341bfc953 
```

*where `9229/0cc79945-8386-4082-aabb-328341bfc953`- 部分可以取自节点的输出

* * *

例如，运行**第一个应用程序**：

```
$ node --inspect-brk=7777 app.js
Debugger listening on ws://127.0.0.1:7777/2df21a01-44ff-40c4-b6ff-1f839f81f9d6 
```

所以结果 url 将是：

```
devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=127.0.0.1:7777/2df21a01-44ff-40c4-b6ff-1f839f81f9d6 
```

然后运行**第二个应用程序**实例：

```
$ node --inspect-brk=7778 app.js
Debugger listening on ws://127.0.0.1:7778/d4e8d8ce-abe9-46c6-89b1-ad0616bdf237 
```

并打开它：

```
devtools://devtools/bundled/inspector.html?experiments=true&v8only=true&ws=127.0.0.1:7778/d4e8d8ce-abe9-46c6-89b1-ad0616bdf237 
```

# struts2 - 如何在 Struts2 中制作一个文件上传文件和其他文件

> ID：12968005
> 
> 赞同：0
> 
> 时间：2012-10-19T05:39:45.470
> 
> 标签：struts2

嗨，我的 Struts2 jsp 中有两个文件上传字段，我希望第一个字段是补充字段，第二个字段可能为空。我怎么能使用文件上传拦截器做到这一点

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:15:03.817

我建议您执行以下操作 - 在 struts 2 Action 类中编写 2 个方法

validate() - 此方法将在上传按钮单击调用 javascript 函数并将 Ajax 请求提交到 Struts 2 Action 时调用，并且此 Action 的 validate() 方法将仅检查天气用户是否浏览了至少一个文件并将返回 true 或 false 值基于此。

execute() - 如果validation() 方法返回true 则只提交表单（通过javascript 提交表单），这样它就会调用execute() 方法并在此处执行文件上传逻辑。

# c# - RESTful Web 服务自动生成 WADL

> ID：12968007
> 
> 赞同：28
> 
> 时间：2012-10-19T05:39:59.543
> 
> 标签：c#, auto-generate, wadl

我在 C# 中创建了一个 RESTful Web 服务并将其部署到 IIS。当我访问服务 HeadOffice.svc 时，我可以选择查看 WSDL (HeadOffice.svc?wsdl)。我想做的是可以选择查看 WADL（例如 HeadOffice.svc?wadl）。这可能吗？

我读过周围的地方，普遍认为这不是最佳做法。但是，我需要 WADL 来完成学校作业，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-19T07:05:24.830

假设您已经知道 WADL 不是标准的/没有得到广泛支持。而当有人需要 WADL 时，使用 WS*/SOAP 服务 + WSDL 可能会更好。所以你的任务看起来很奇怪。

无论如何，微软的任何 REST 实现、WCF 3.5 Rest Starter Kit、WCF 4 REST 和 ASP.NET WebAPI 都不支持“开箱即用”的 WADL。

WADL for .NET 没有可靠的工具。

当您的目标是使用 WADL 生成 C# 客户端代码时，相信我，您将花费更多时间自己编写客户端代码。并且有更好的解决方案。

您可以使用新的类，如[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx)类或[RestSharp](http://restsharp.org/)或类似的库来轻松地手动编写您的客户端，它会比谷歌搜索可靠的 .NET WADL 解决方案更快

关于stackoverflow的类似问题：[Restful service in .NET with WADL instead of WSDL](https://stackoverflow.com/questions/3758000/restful-service-in-net-with-wadl-instead-of-wsdl)

**更新 - Swagger：** 多年来，[swagger](https://swagger.io/)已经确立了这种格式。您可以在[Swagger 编辑器中使用 swagger 的 YAML 开始编写服务定义，也可以使用](https://editor.swagger.io//#/)[Swashbuckle](https://github.com/domaindrivendev/Swashbuckle)库为 .NET 从现有服务生成 swagger 。第二个是我们使用 WSDL 的东西，swagger 编辑器让您生成客户端和服务器样板。无论您是生成服务器或客户端，还是不喜欢它，swagger 实际上都是一种非常好的 REST 服务合约交换格式，虽然不是理想但很好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-26T12:43:03.840

## 为什么选择 Swagger4Wcf

•手动为swagger编写yaml描述并维护它，尤其是WCF服务很无聊。

• 有一个名为 Swagger4WCF 的 nuget 包，它会自动为 swagger 2.0 为每个接口匹配 WCF ( `ServiceContract/OperationContract/WebGet/WebInvoke`) 使用的属性生成 yaml 描述。

## 2\. Swagger 如何在后台工作

Swagger4WCF 使用 NuPack 后构建模式在构建时触发。

[https://www.codeproject.com/Tips/1190360/How-to-setup-a-managed-postbuild-without-scripting](https://www.codeproject.com/Tips/1190360/How-to-setup-a-managed-postbuild-without-scripting)

3.  在构建时，它将检测输出目录中存在的程序集，使用 mono.cecil 打开它们（以反映程序集）以生成预期的 yaml 描述 swagger 2.0。Swagger4WCF 检测**WebGet/WebInvoke**以在 yaml 中提供序列化样式的 Verb/Method。

在您的应用程序中实现 Swagger 的步骤：

1.  安装 SwaggerWcf 包

2.  配置 WCF 路由

我们必须在 Global.asax 中的 Application_Start 方法中添加路由

```
 protected void Application_Start(object sender, EventArgs e)
    {
        RouteTable.Routes.Add(new ServiceRoute("v1/rest", new WebServiceHostFactory(), typeof(BookStore)));
        RouteTable.Routes.Add(new ServiceRoute("api-docs", new WebServiceHostFactory(), typeof(SwaggerWcfEndpoint)));
    } 
```

注意：编辑 Web.config 并在 system.serviceModel 块中添加以下内容（如果尚不存在）

```
 <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/> 
```

3.  配置 WCF 响应自动类型（可选）

我们必须将以下内容添加到 Web.config。这将允许 WCF 服务接受请求并根据 Content-Type 标头发送回复。

```
 <behavior name="webHttpBehavior">
              <webHttp defaultOutgoingResponseFormat="Json" automaticFormatSelectionEnabled="true"/>
            </behavior>
          </endpointBehaviors>
          <serviceBehaviors>
            <behavior>
              <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
              <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
              <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
              <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior> 
```

4.  装饰 WCF 服务接口 对于每个方法，我们必须配置 WebInvoke 或 WebGet 属性，并添加 SwaggerWcfPath 属性。

    `[SwaggerWcfPath("Get book", "Retrieve a book from the store using its id")] [WebGet(UriTemplate = "/books/{id}", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)] [OperationContract] Book ReadBook(string id);`

5.  装饰 WCF 服务类

• 将SwaggerWcf 和AspNetCompatibilityRequirements 属性添加到为服务提供基本路径的类。

• 对于每个方法，添加 SwaggerWcfTag 以对方法进行分类，并为来自服务的每个可能响应添加 SwaggerWcfResponse。

```
[SwaggerWcfTag("Books")]
[SwaggerWcfResponse(HttpStatusCode.OK, "Book found, value in the response body")]
[SwaggerWcfResponse(HttpStatusCode.NoContent, "No books", true)]
public Book[] ReadBooks()
{
} 
```

6.  装饰 WCF 服务中使用的数据类型

    `[DataContract] [Description("Book with title, first publish date, author and language")] [SwaggerWcfDefinition(ExternalDocsUrl = "http://en.wikipedia.org/wiki/Book", ExternalDocsDescription = "Description of a book")]`

    ```
    public class Book
    {
        [DataMember]
        [Description("Book ID")]
        public string Id { get; set; }

        [DataMember]
        [Description("Book Title")]
        public string Title { get; set; }

        [DataMember]
        [Description("Book First Publish Date")]
        public int FirstPublished { get; set; }

        [DataMember]
        [Description("Book Author")]
        public Author Author { get; set; }

        [DataMember]
        [Description("Book Language")]
        public Language Language { get; set; }
    } 
    ```

参考：- [https://github.com/abelsilva/swaggerwcf](https://github.com/abelsilva/swaggerwcf)

这就是 Swagger 实现的 wcf。如果您遇到任何问题，请免费。

谢谢，阿比

# android - LED 像素密度 , LED 像素高度和宽度 , 分辨率

> ID：12968012
> 
> 赞同：2
> 
> 时间：2012-10-19T05:40:30.680
> 
> 标签：android

**有人可以详细解释一下LED 像素密度、** **LED 像素高度和宽度****以及分辨率**之间的关系 ， 同时以详细方式创建一个模拟器......并在启动时再次启动 Default: SkinSize, Density; 缩放密度以实现大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:45:44.500

**像素密度：**每英寸像素 (PPI) 或像素密度是衡量各种环境中设备分辨率的指标：通常是计算机显示器、图像扫描仪和数码相机图像传感器。

**分辨率**：或显示器中的总像素数，是影响标志性能的一个非常重要的因素。更高的分辨率意味着更多的 LED 二极管和更多的电路，这通常意味着更好的图像质量。

像素具有固定大小的高度和宽度，它只是一个点，一英寸的点数创建分辨率。

# javascript - 删除所有子节点，但将节点的文本内容保留在 javascript 中（无框架）

> ID：12968015
> 
> 赞同：3
> 
> 时间：2012-10-19T05:40:41.227
> 
> 标签：javascript, dom, nodes, removechild

我正在尝试从节点中删除所有子元素，但保留节点的实际文本内容。即从此：

```
<h3>
   MY TEXT
   <a href='...'>Link</a>
   <a href='...'>Link</a>
   <select>
      <option>Value</option>
      <option>Value</option>
   </select>
</h3> 
```

对此：

```
<h3>
   MY TEXT
</h3> 
```

我知道在 jQuery 中有[一百万种简单的方法可以做到这一点](https://stackoverflow.com/questions/5382763/how-to-remove-all-child-nodes-but-leave-the-actual-data)，但这不是这个项目的选择......我必须使用**普通的旧 javascript**。

这：

```
var obj = document.getElementById("myID");
if ( obj.hasChildNodes() ){
    while ( obj.childNodes){
        obj.removeChild( obj.firstChild );       
    }
} 
```

显然结果只是`<h3></h3>`，当我尝试时：

```
var h3 = content_block.getElementsByTagName('h3')[0];
var h3_children = h3.getElementsByTagName('*');
for(var i=0;i<h3_children.length;i++){
   h3_children[i].parentNode.removeChild(h3_children[i]);
} 
```

它在中途挂断。我认为删除选项有问题，但是改变`for`循环以跳过删除，除非`h3_children[i].parentNode==h3`（即仅删除第一级子元素）在删除第一个`<a>`元素后停止。

我确定我在这里遗漏了一些非常明显的东西，但也许是时候转向人群了。**如何删除所有子元素但不保留第一级`textNodes`？为什么上述方法不起作用？**

## 编辑

发布了几个可行的解决方案，这很棒，但我仍然对为什么循环和删除`h3.getElementsByTagName('*')`不起作用感到有些困惑。[类似的方法](http://jsfiddle.net/BtAPq/)（改编自[Blender](https://stackoverflow.com/users/464744/blender)）同样不能完成删除子节点的过程。关于为什么会这样的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:50:26.820

```
var h3=content_block.getElementsByTagName("h3")[0];
for(var i=0;i<h3.childNodes.length;i++)
{
  if(h3.childNodes[i].nodeType==3)//TEXT_NODE
  {
    continue;
  }
  else
  {
    h3.removeChild(h3.childNodes[i]);
    i--;
  }
} 
```

[JSFiddle 演示](http://jsfiddle.net/BnSvw/)

**编辑**：

结合`i--`使其看起来更短：

```
var h3=content_block.getElementsByTagName("h3")[0];
for(var i=0;i<h3.childNodes.length;i++)
{
  if(h3.childNodes[i].nodeType==3)//TEXT_NODE
    continue;
  else
    h3.removeChild(h3.childNodes[i--]);
} 
```

**编辑**#2：

@SomeGuy 指出，让它更短：

```
var h3=content_block.getElementsByTagName("h3")[0];
for(var i=0;i<h3.childNodes.length;i++)
{
  if(h3.childNodes[i].nodeType!=3)//not TEXT_NODE
    h3.removeChild(h3.childNodes[i--]);
} 
```

括号也可以删除，但这会“不那么可读”和“令人困惑”，所以我把它放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:54:45.883

您可以检查属性`.nodeType`或`.nodeName`每个节点。

文本节点将这些属性设置为：

```
.nodeType == 3
.nodeName == '#text'` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T05:57:51.027

例如：

```
var e = obj.firstChild
while (e) {
   if (e.nodeType == 3) {
      e = e.nextSibling
   } else {
      var n = e.nextSibling
      obj.removeChild(e)
      e = n
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T06:02:36.037

试试这个。我假设你会在这里保留蚂蚁文本。

```
var h3 = document.getElementsByTagName('h3')[0];

if (h3.hasChildNodes()) {
    for (var i = h3.childNodes.length - 1; i >= 0; i--) {
        if (h3.childNodes[i].nodeName != "#text")
            h3.removeChild(h3.childNodes[i]);
    }
} 
```

希望它会奏效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-06T10:00:13.833

好吧，我使用的东西（灵感来自这里的答案）有点像：

```
 var h3 = document.getElementsByTagName("h3")[0];
    Array.protoype.filter.call(h3.childNodes, function(child){
        if (child.nodeType != 3) {
            h3.removeChild(child);
        }
    }); 
```

# jquery - Jquerymobile 锚标签问题

> ID：12968016
> 
> 赞同：0
> 
> 时间：2012-10-19T05:40:45.107
> 
> 标签：jquery, asp.net, asp.net-mvc, jquery-mobile

我正在使用 jQuery 手机。并且在它的锚标记中总是在请求 url 之前添加一个 # 值。这样网站的第一个默认页面就会运行，然后在 dom 中添加下一页。但在我的情况下，锚标签没有添加哈希值。我该如何添加它们。

这是我页面的头部

```
<head runat="server">
    <title>Index</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <link href="/Content/style.css" rel="stylesheet" type="text/css" />
</head> 
```

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:46:28.647

```
Don't use rel=external attribute with anchor tag, If you are used
You can also use on click event : $.mobile.changePage($("#pageid"), "flip", true, true);
$("#anchortagid").live("click",function(event){
if(event.handled !== true){ 
    $.mobile.changePage("#pageid", {transition: "slide"});

}
   return false;
}); 
```

# biztalk - 错误：这不是 SQL 架构向导生成的有效架构

> ID：12968019
> 
> 赞同：2
> 
> 时间：2012-10-19T05:40:47.307
> 
> 标签：biztalk, biztalk2006r2

我使用 SQL 传输架构生成向导成功创建了架构，并尝试在 BizTalk Server 2006 管理控制台上配置接收位置，但总是遇到相同的错误：

> 错误：这不是 SQL 架构向导生成的有效架构

这让我很头疼，我投入了相当多的时间，我可以排除以下原因：

*   数据库不包含类型不受支持的列（varbinary(MAX)、varchar(MAX)、nvarchar(MAX)、xml）
*   创建架构后，我在存储过程的末尾删除了 XMLDATA
*   包含架构定义的 DLL 当前部署在 GAC 中
*   连接用户具有执行存储过程的相应权限

我的想法不多了，很高兴得到一些帮助。

# ipad - 如何从 iPad 的 UITableview 中定义的 UITextview 关闭键盘

> ID：12968020
> 
> 赞同：3
> 
> 时间：2012-10-19T05:40:50.463
> 
> 标签：ipad

我是 iPad 编程的新手，我想知道如何从 UItablecell 中定义的 UItextview 关闭键盘。我在单元格中定义了多个文本视图。请帮助我提供适当的解决方案或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:45:50.077

Send the text view the message `resignFirstResponder` and the keyboard will dismiss. If you need to have it dismiss in response to the return key, look at having your view controller adopt the `UITextViewDelegate` protocol.

```
[self.textViewInQuestion resignFirstResponder]; 
```

Alternatively, you can send the `endEditing:` message to the table view like this:

```
/*
  Attempt to resign first responder status on any textfields within 
  the view's hierarchy.
*/

[self.tableView endEditing:NO];

// OR we can....

/*
  Force text fields within the view's hierarchy to resign first responder.
  Textfield delegates cannot prevent this from happening so this is not 
  recommended if you need to perform field validation and prevent the user 
  from leaving the textfield.

  However sometimes it is useful to be able to force the resignation of the 
  first responder status even with validation so it goes both ways really.
*/

[self.tableView endEditing:YES]; 
```

# popup - ajaxToolkit:ModalPopupExtender 拖动问题

> ID：12968027
> 
> 赞同：1
> 
> 时间：2012-10-19T05:41:25.183
> 
> 标签：popup, drag, modalpopupextender

当我尝试拖动弹出窗口时，首先我必须单击拖动位置。但是当我尝试单击拖动启用区域时，弹出窗口会转到另一个位置。即使我再试一次，它也会不断发生。

这是我的标记：

```
 <ajaxToolkit:ModalPopupExtender ID="ModalPopupExtender" runat="server" TargetControlID="btnEditAddress"
        PopupControlID="Panel1" BackgroundCssClass="modalBackground" OkControlID="btnOKAddress"
        CancelControlID="btnCancelAddress" DropShadow="true" PopupDragHandleControlID="headHolder"
        X="270" Y="130" />
    <asp:Panel ID="Panel1" runat="server" CssClass="modalPopup" Style="width: 320px;
        display: none;">
        <div>
            <div id="headHolder" runat="server" class="addressEditHead" style="height: 20px;
                padding-top: 5px;">
                <span style="padding-left: 5px;" id="addressType" />
            </div>
            <div>
                <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
                    <ContentTemplate>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </div>
            <div style="height: 25px; text-align: center;">
                <asp:Button ID="btnOKAddress" runat="server" CssClass="button" Text="Save" OnClientClick="saveAddress();" />
                <asp:Button ID="btnCancelAddress" runat="server" CssClass="button" Text="Cancel" />
                <asp:HiddenField ID="hdnRelatedTable" runat="server" />
                <asp:HiddenField ID="hdnRelatedID" runat="server" />
            </div>
        </div>
    </asp:Panel> 
```

**嗨，我找到了解决方案。我将 ajaxtoolkit 升级到最新版本。现在它正在工作 coreclty**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:58:40.927

我找到了解决方案。我将 ajaxtoolkit 升级到最新版本。现在它正在工作coreclty。

# multicore - Does ProfileOptimization actually work?

> ID：12968029
> 
> 赞同：18
> 
> 时间：2012-10-19T05:41:37.113
> 
> 标签：multicore, jit, .net-4.5

One of the new performance enhanchements for .NET 4.5 is the introduction of the 'MultiCode JIT'.

See [here](http://msdn.microsoft.com/en-us/magazine/hh882452.aspx) for more details.

I have tried this, but it seems to have no effect on my application.

The reason why I am interested is that my app (IronScheme) takes a good long time to startup if not NGEN'd, which implies a fair amount of JIT'ng is involved at startup. (1.4 sec vs 0.1 sec when NGEN'd).

I have followed the instructions on how to enable this, and I can see a 'small' (4-12KB) is created. But on subsequent startup, it seems to have absolutely no effect on improving the startup time. It is still 1.4 sec.

Has anyone actually seen (or made) this work in practice?

Also, are there any limitations on which code will be 'tracked'? Eg: assembly loading contexts, transient assemblies, etc. I ask this as the created file never seems to grow, but I am in fact generating a fair amount of code (in a transient assembly).

One bug that I did encounter was that `SetProfileRoot` does not seem to understand a / as a path separator, make sure to use \ .

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-19T17:12:41.420

我们在 Microsoft 使用的经验法则是，多核 JIT 可以让您在 NGEN 启动性能方面取得大约一半的成绩。因此，如果您的应用在使用 NGEN 时启动时间为 0.1 秒，而在没有 NGEN 时启动时间为 1.4 秒，我们预计多核 JIT 启动大约需要 0.75 秒。

话虽如此，我们必须设置一些限制来保证程序执行顺序在有和没有 MCJ 的情况下是相同的。MCJ 有时会暂停后台线程，等待前台线程加载模块，如果有程序集解析或模块解析事件，将中止后台编译。

如果您想了解您的情况，我们有 MCJ 功能的 ETW（Windows 事件跟踪）检测，我们将很快发布 PerfView 版本，如果您进行跟踪，它将能够收集这些事件您的应用程序启动。

**更新：** PerfView 已更新为能够显示后台 JIT 信息。以下是使用最新版本 (1.2.2.0) 进行诊断的步骤：

1.  使用 PerfView 收集应用程序启动的跟踪，使用主 PerfView 菜单中的 Collect->Run 或 Collect->Collect。
2.  假设您使用了收集-> 运行，将 .exe 的名称放在命令文本框中，选择一个文件名（即 IronScheme.etl），从高级选项中选择后台 JIT，然后单击运行命令。
3.  关闭您的应用程序并双击生成的 IronScheme.etl 文件。
4.  双击 IronScheme.etl 下面列表中的 JIT Stats 视图，您应该在弹出的视图中看到如下内容：

> ```
> This process uses Background JIT compilation (System.Runtime.ProfileOptimize) 
>     Methods Background JITTed : 2,951 
>     Percent # Methods Background JITTed : 52.9% 
>     MSec Background JITTing : 3,901 
>     Percent Time JITTing is Background : 50.9% 
>     Background JIT Thread : 11308 
> ```

您可以单击“查看原始背景 Jit 诊断”以查看 excel 中的所有 MCJ 事件。我忘了问一个问题：你是在多核机器还是多核 VM 上运行它？在只有一个逻辑处理器的 VM 中测试 MCJ 是一个常见的错误。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-07T21:43:11.507

在启动期间调用`Activator.CreateInstance`似乎会杀死 MCJ？

或者更确切地说，这触发了大会决议，这似乎完全阻止了 MCJ。之后再也不工作了。也许 MSDN 文档应该提到这一点。

# java-me - Semitransparency / Alphalevels in J2ME?

> ID：12968039
> 
> 赞同：2
> 
> 时间：2012-10-19T05:42:54.473
> 
> 标签：java-me, transparency, alpha, alpha-transparency

My first question on stackoverflow, so my apologies if I'm missing something.

I read in a reply in another J2ME transparency question from 2009 here at stackoverflow that "You should note that alpha is sometimes ignored on some implementations and sometimes quantized to ugly levels (Some motorola phones snap alpha values to the nearest 2-bit value)."

I am currently experimenting with transparency in J2ME, testing on rather new devices (at least in the J2ME world).

They all return 256 when I call Display.numAlphaLevels();

Yet, I only count max 8 actual levels (and mostly only 5 I can tell apart) when I set an image to slowly fade in. And it seems it is, as the above quote states, the nearest 2-bit value: 1% visible at level 2-3 3% visible at level 4-7 6% visible at level 8-16 12% visible at level 16-31 25% visible at level 32-63 50% visible at level 64-127 100% visible at level 128-255

Tested on Sony Ericsson Aino, Vivaz, and a Nokia N8, with both an 8bit PNG and a 24bit PNG. I consider those devices to be some of the latest models that can run J2ME.

The above quote makes it sound like it's not all J2ME enabled phones that behaves like this though. And that's why I ask my question:

Can anyone confirm that this is just how alphalevels are with J2ME enabled phones? If not, then how is it set up on other phones, and which phones are they? Do you know of any J2ME enabled phone that actually have all the 256 levels? Or one that can give e.g. 75% visibility?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T04:32:43.540

好吧，不太确定我做错了什么，但显然是我的测试代码中的某些东西给了我这些错误的结果，恰好与另一位 JavaME 开发人员的引用相匹配，这使得结果看起来很可能。

自从我发布了这个问题后，alphalevel 突然出现了我希望它们出现的样子：漂亮而流畅。不确定我在代码中做了什么更改，目前太忙/懒得测试。

所以这个可以关闭。

# jquery - jquery Dialog display it content on load on the screen

> ID：12968041
> 
> 赞同：-1
> 
> 时间：2012-10-19T05:43:02.457
> 
> 标签：jquery, dialog

hi friend i am trying to create custom dialog using j-query and inside dialog i am putting some text box and check box , but the problem is when i am displaying dialog box on button click , only the content inside the dialog will display onload and when i click on buttton it will appear in dialog only that too only first time only, what i want is it only display in dialog not onload ,and i dont want to make all component hide/show display none/block every time ,because i have many component in dialog.

here is my code

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Dialog - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="/resources/demos/external/jquery.bgiframe-2.1.2.js"></script>
   <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    /*$(document).ready(function (){
        $('#dialog').append('<input type="checkbox" name="vehicle" value="Car">dfhgdfg</input>');
    });*/
    function call(){
    $(function() {
        $("#dialog").dialog();
        $('p').css({'display':'block'});
    });
}
    </script>
</head>
<body>

<div id="dialog" title="Basic dialog">
    <p style="display:none;">This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
    <input type="checkbox" name="vehicle" value="Car">test1</input>
    <input type="checkbox" name="vehicle" value="Car">test2</input>
    <input type="checkbox" name="vehicle" value="Car">test3</input>

</div>
 <input type="button" onclick="call();" value="button"></input>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:19:52.940

`#dialog`将您的 div嵌套在另一个具有 style 的 div 中`display: none`。`#dialog`然后在div上初始化对话框插件。

```
<div style="display: none">
  <div id="dialog" title="Basic dialog">
    <p style="display:none;">This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
    <input type="checkbox" name="vehicle" value="Car">test1</input>
    <input type="checkbox" name="vehicle" value="Car">test2</input>
    <input type="checkbox" name="vehicle" value="Car">test3</input>

  </div>
</div> 
```

然后，将您的 jQuery 代码更改为以下内容：

```
$(function() {
    $("#dialog").dialog();
    $('p').css({'display':'block'});
    $('input[type="button"]').on('click', function(){
        $("#dialog").dialog("open");
    })
    .click();  //Since you also want it to open once on page load
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:40:11.983

您也可以使用：

```
<div id="dialog" title="Basic dialog">
    <p style="display:none;">This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
    <input type="checkbox" name="vehicle" value="Car">test1</input>
    <input type="checkbox" name="vehicle" value="Car">test2</input>
    <input type="checkbox" name="vehicle" value="Car">test3</input>
</div>

<button type="button" id="open-dialog">Open</input>

<script> <!-- Put in header or footer -->
    var $Dialog = $('#dialog');
    $Dialog.css('display', 'none').dialog('close');
    $('#open-dialog').on('click', function(){
        $Dialog.dialog();
    })
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:32:33.903

只需添加以下内容：

```
$(document).ready(function (){      
    $("#dialog").dialog({ autoOpen: false, modal: true });
}); 
```

# javascript - Sharepoint: rich text editor suddenly throws javascript error

> ID：12968046
> 
> 赞同：0
> 
> 时间：2012-10-19T05:43:31.477
> 
> 标签：javascript, sharepoint

yesterday I installed Sharepoint Services 3.0, and the rich text editor was working without problems in IE9 on my laptop and on another laptop. But now, if for example I go to a content editor web part, and click edit / modify shared web part, and then on the 'Rich Text Editor' button, I get the error:

```
An error has occured in the script on this page.
Line: 1056
Char: 2
Error: Unable to get value of the property 'body': object is null or undefined
Code: 0
URL: http://address/_layouts/1033/form.js?rev=... 
```

It's not working in any other browser on these laptops. If I go to yet another machine, here it still works in IE9, but I guess this will be broken too at some time!

Any idea what is going on here and how I can fix this on my laptop?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:33:13.780

终于找到原因了，看来我用的是IE 64位，支持有限。使用 32 位版本解决了一切。另请参阅[http://ludwigstuyck.wordpress.com/2012/10/22/sharepoint-integration-with-ie-9](http://ludwigstuyck.wordpress.com/2012/10/22/sharepoint-integration-with-ie-9)。

# ios - iOS app:: Google+ integration- Daily Limit for Unauthenticated Use Exceeded

> ID：12968047
> 
> 赞同：2
> 
> 时间：2012-10-19T05:43:49.023
> 
> 标签：ios

iOS app: - I am integrating google+ API in my iPhone application, i downloaded google+ API through this link:- "https://developers.google.com/+/mobile/ios/sdk/google-plus-ios-sdk-1.0.0.zip".

I have successfully integrated it in my code, but when i am trying to get user information, it is giving me error **"The operation couldn’t be completed. (Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup.)",**

Any idea about this..!! Why this error comes.?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:37:16.160

它说“所有 API 调用都需要 OAuth 2.0 令牌或 API 密钥。” 因此，您应该获取 API 密钥并将其作为参数传递 [https://www.googleapis.com/plus/v1/activities/z12gtjhq3qn2xxl2o224exwiqruvtda0i?key=YOUR-API-KEY](https://www.googleapis.com/plus/v1/activities/z12gtjhq3qn2xxl2o224exwiqruvtda0i?key=YOUR-API-KEY)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T15:08:58.757

当您已经登录并且仍然尝试一次又一次地登录时，会发生此问题。我遇到了同样的错误，所以做了一些实验 1）我在手机上打开了网站，一切都很好。2）然后我在另一台笔记本电脑上尝试并使用不同的gmail帐户登录，它再次正常工作。3）在我的第一台笔记本电脑上，我通过单击“登录”按钮再次绑定，我遇到了同样的错误，所以我打开了 google.com，然后完全注销，然后再次尝试，这次成功了。所以我相信，问题是一次又一次地单击登录按钮而无需注销。

我不确定这是否真的是一个问题，但至少这是我发现的。我仍在尝试，尝试和尝试，如果我发现任何其他内容，我会发布。

干杯！！

# parsing - What is the closure of a left-recursive LR(0) item with epsilon transitions?

> ID：12968048
> 
> 赞同：7
> 
> 时间：2012-10-19T05:43:56.203
> 
> 标签：parsing, language-agnostic, grammar, lr, epsilon

Let's say I have this grammar:

```
A: ε
 | B 'a'
B: ε
 | B 'b' 
```

What is considered to be the closure of the item `A: • B 'a'`?
In other words, how do I deal with the epsilon transitions when figuring out closures?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T17:42:32.137

这很简单。包括在关闭

```
 A = ... <dot> X ... ; 
```

都是规则

```
 X =   <dot> R1 R2 R3 ... ; 
```

其中 first(R1) 不为空。对于 first(R1) 中的每个（非空）令牌 K，您需要（传递地！）包括

```
 R1 = <dot> k ... ; 
```

等等，但大概你已经很清楚了。

您的具体问题是如果 R1 可以为空会发生什么？然后你还需要包括

```
 X =   R1 <dot> R2 ... ; 
```

类似地，对于 R2 为空，如果 R1 可以为空，同样对于 Ri 为空，如果 R1 .. Ri-1 可以为空。在极端情况下，所有的 Ri 都可以是空的（你的语法中有很多可选的子句），你最终可以包括

```
 X =  R1 R2 ... Rn <dot> ; 
```

请注意，确定 first(R1) “可以为空”本身就是一个传递闭包问题。

我为 DMS 构建的 GLR 解析器生成器使用 Warshall 算法预先计算 first_can_be_empty，然后在闭包构造中使用它。

# c - how to call system() from a specific directory?

> ID：12968052
> 
> 赞同：0
> 
> 时间：2012-10-19T05:44:14.683
> 
> 标签：c, linux

I need my program go to some specific directory then run

`system( ... );` there and get me back where I was before. How can I do it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:46:52.893

只需`cd`在您的`system`通话中执行：

```
system("cd wherever; command"); 
```

整个字符串被传递给`sh(1)`，所以你可以在那里做任何普通的 shell 事情。由于它位于子外壳中，因此不会更改程序的工作目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T05:48:08.520

在 Linux 和 Posix 系统上，该函数在[fork(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)、[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)、[waitpid(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/waitpid.2.html)等[系统调用](http://en.wikipedia.org/wiki/System_call)`system(3)`之上实现。您可以使用[chdir(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/chdir.2.html)系统调用来更改当前目录。您可以在更改它之前使用[getcwd(2)来检索（和记忆）它。](http://www.kernel.org/doc/man-pages/online/pages/man2/getcwd.2.html)（你也可以调用and before ，然后用另一个来恢复原来的当前目录）。`getcwd``chdir``system``chdir`

[我建议阅读像Advanced Linux Programming](http://advancedlinuxprogramming.com)和[Advanced Unix Programming](http://basepath.com/aup/)这样的好书，它们有好几章来回答你的问题。

^(不要指望论坛会向您解释这一切。看书。)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T06:02:03.097

在调用系统之前使用[chdir 。](http://linux.die.net/man/2/chdir)您甚至可以使用[getcwd](http://linux.die.net/man/3/getcwd) before`chdir`回到 system 之后的目录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T06:03:20.850

1.  [使用chdir](http://www.manpagez.com/man/2/chdir/)转到特定目录
2.  运行 system(...) （正如 Basile 所说，如果系统正在使用用户定义的变量，请确保对其进行清理）

当程序执行 system(..) 时，它将位于更改后的目录中。在 system(...) 之后，它将位于更改后的目录中。当程序退出时，它将在原始目录中。

# android - Android MapView 不以点为中心

> ID：12968054
> 
> 赞同：1
> 
> 时间：2012-10-19T05:44:22.277
> 
> 标签：android, json, google-maps, geopoints

我有一个地图视图，但是一旦我添加了一个 for 循环，我似乎无法以地理点为中心:(。有什么想法吗？

**代码**

```
public class MainActivity  extends MapActivity

{

public GeoPoint point;
TapControlledMapView mapView; // use the custom TapControlledMapView
List<Overlay> mapOverlays;
Drawable drawable;
SimpleItemizedOverlay itemizedOverlay;

 @Override
 public void onCreate(Bundle savedInstanceState)
 {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);

    mapView = (TapControlledMapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(false);
    // dismiss balloon upon single tap of MapView (iOS behavior) 
    mapView.setOnSingleTapListener(new OnSingleTapListener() {      
        public boolean onSingleTap(MotionEvent e) {
            itemizedOverlay.hideAllBalloons();
            return true;
        }
    });

    mapOverlays = mapView.getOverlays();

    // first overlay
    drawable = getResources().getDrawable(R.drawable.marker2);

    itemizedOverlay = new SimpleItemizedOverlay(drawable, mapView);
    // set iOS behavior attributes for overlay
    itemizedOverlay.setShowClose(false);
    itemizedOverlay.setShowDisclosure(true);
    itemizedOverlay.setSnapToCenter(false);

     InputStream is = null;
        try {
            is = getAssets().open("****.****");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        int size = 0;
        try {
            size = is.available();
        } catch (IOException e2) {
            // TODO Auto-generated catch block
            e2.printStackTrace();
        }

        byte[] buffer = new byte[size];
        try {
            is.read(buffer);
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        try {
            is.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String str = new String(buffer);
        String jsonString = null;
        try {
            jsonString = str;
        } catch (IllegalStateException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        // Create a JSON object that we can use from the String
        JSONObject json = null;
        try {
            json = new JSONObject(jsonString);
        } catch (JSONException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

                  try{

         JSONArray jsonArray = json.getJSONArray("groups");
         Log.e("log_tag", "Opening JSON Array 'Groups'");
            for(int i=0;i < jsonArray.length();i++){                        

                JSONObject jsonObject = jsonArray.getJSONObject(i);

                    String latitude =  jsonObject.getString("latitude");
                    String longitude =  jsonObject.getString("longitude");
                    String name =  jsonObject.getString("name");
                    String address =  jsonObject.getString("street");
                    double lat = Double.parseDouble(latitude);
                    double lng = Double.parseDouble(longitude);
                    double searchLat = Double.parseDouble("-31.4333");
                    double searchLon = Double.parseDouble("152.9000"); 

                 double distance;  

                Location locationA = new Location("point A");  

                locationA.setLatitude(searchLat);  
                locationA.setLongitude(searchLon);  

                Location locationB = new Location("point B");  

                locationB.setLatitude(lat);  
                locationB.setLongitude(lng);  

                distance = locationA.distanceTo(locationB); 

                    if (distance <= 1000 * 10) {

                         Log.e("log_tag", "ADDING GEOPOINT"+name); 

                          point = new GeoPoint(
                                 (int) (lat * 1E6), 
                                 (int) (lng * 1E6));
                        OverlayItem overlayItem = new OverlayItem(point, name, 
                                address);
                        itemizedOverlay.addOverlay(overlayItem);

                 }
                        }
                  }catch(JSONException e)        {
                     Log.e("log_tag", "Error parsing data "+e.toString());
                } 

                  itemizedOverlay.populateNow(); 

                  mapOverlays.add(itemizedOverlay);
                        if (savedInstanceState == null) {

                            final MapController mc = mapView.getController();

                            mc.animateTo(point);
                            mc.setZoom(12);

                        } else {

                            // example restoring focused state of overlays
                            int focused;
                            focused = savedInstanceState.getInt("focused_1", -1);
                            if (focused >= 0) {
                                itemizedOverlay.setFocus(itemizedOverlay.getItem(focused));
                            }

                        }}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:48:03.800

您应该使用以下代码将您的点指向地图中的中心位置

```
MapController controller = mapView.getController();
controller.setCenter(youtgeopoint); 
```

# html - 如何阻止滚动条取代我的页面？

> ID：12968059
> 
> 赞同：2
> 
> 时间：2012-10-19T05:44:52.503
> 
> 标签：html, css

我通过将页面内容包装在包装器 div 中，然后将其放入样式表中，使页面的内容居中：

```
#wrapper {
  width: 960px;
  margin-left: auto;
  margin-right: auto;
} 
```

问题是：每当内容增加并且出现垂直滚动条时，它就会取代内容，因为视口的大小发生了变化。无论滚动条的可见性如何，我们如何确保居中内容的位置不会改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:53:35.400

因为当页面宽度发生变化（出现滚动条时）时，您的内容相对于窗口大小（margin-left：auto；margin-right：auto）定位，所以内容的位置也会发生变化。

为了解决这个问题，您可以使用以下方法在页面上为您的内容指定一个绝对位置：`postion:absolute`

另一种选择是使用[overflow-y 属性](http://www.w3schools.com/cssref/css3_pr_overflow-y.asp)来指定是否将溢出的内容剪辑到元素内容上。

```
html {overflow-y:scroll;} 
```

# objective-c - Strange crash issue on iOS 5 and iOS 6

> ID：12968063
> 
> 赞同：10
> 
> 时间：2012-10-19T05:45:07.167
> 
> 标签：objective-c, ios, xcode, cocoa-touch, ios6

Can anyone help me decoding below crash log from iPhone Configuration utility of iPhone Device

```
Oct 19 11:09:18 iPhone-AIPV02 kbd[1099] <Warning>: -[TIXPCDataTransport _handleForPurpose:withReplyBlock:] couldn't get data source for purpose=__TIRDTUD
Oct 19 11:09:18 iPhone-AIPV02 mClient[1096] <Warning>: __47+[TIUserDictionaryController loadWordKeyPairs:]_block_invoke_0  Received nil NSData for TIRemoteDataUserDict
Oct 19 11:09:20 iPhone-AIPV02 librariand[1100] <Notice>: MMe quota status changed: under quota
Oct 19 11:09:35 iPhone-AIPV02 lockdownd[29] <Notice>: 2fe93000 spawn_and_handle_checkin: Timeout on socket /var/run/lockdown/checkin.1012 waiting for com.apple.crashreportmover to checkin for Xcode. spawn=1350625160 select=1350625160 now=1350625175
Oct 19 11:09:35 iPhone-AIPV02 ReportCrash[1103] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
Oct 19 11:09:35 iPhone-AIPV02 ReportCrash[1103] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
Oct 19 11:09:35 iPhone-AIPV02 ReportCrash[1103] <Warning>: Not internal build
Oct 19 11:09:35 iPhone-AIPV02 ReportCrash[1103] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
Oct 19 11:09:35 iPhone-AIPV02 ReportCrash[1103] <Notice>: Saved crashreport to /Library/Logs/CrashReporter/stacks-2012-10-19-110935.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0
Oct 19 11:09:35 iPhone-AIPV02 ReportCrash[1103] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
Oct 19 11:09:39 iPhone-AIPV02 com.apple.debugserver-189[1095] <Warning>: 1 +0.000000 sec [0447/0303]: error: ::ptrace (request = PT_THUPDATE, pid = 0x0448, tid = 0x2503, signal = 0) err = Resource busy (0x00000010)
Oct 19 11:09:39 iPhone-AIPV02 com.apple.debugserver-189[1095] <Warning>: 2 +0.033249 sec [0447/0303]: error: ::task_threads ( task = 0x1603, thread_list => 0x0, thread_list_count => 0 ) err = (os/kern) invalid argument (0x00000004)
Oct 19 11:09:39 iPhone-AIPV02 com.apple.debugserver-189[1095] <Warning>: 3 +0.000988 sec [0447/0303]: error: ::task_info ( target_task = 0x1603, flavor = TASK_BASIC_INFO, task_info_out => 0x2fdbee6c, task_info_outCnt => 8 ) err = (os/kern) invalid argument (0x00000004)
Oct 19 11:09:39 iPhone-AIPV02 com.apple.launchd[1] (UIKitApplication:com.csam.app.mClient[0x2ae5][1096]) <Notice>: (UIKitApplication:com.csam.app.mClient[0x2ae5]) Exited: Killed: 9
Oct 19 11:09:39 iPhone-AIPV02 com.apple.debugserver-189[1095] <Warning>: 4 +0.025519 sec [0447/1303]: error: ::read ( 5, 0x2ff22a0c, 1024 ) => -1 err = Bad file descriptor (0x00000009)
O 
```

on my Xcode console I can only see below log and then **My iPhone Device gets Restart**

```
2012-10-19 11:09:18.234 mClient[1096:907] __47+[TIUserDictionaryController loadWordKeyPairs:]_block_invoke_0  Received nil NSData for TIRemoteDataUserDict 
```

Apart from this if I see my Crash log on Device then I am getting very strange Logs as below It shows me Unknown app name in Organizer..

```
Incident Identifier: C0A41418-FFB1-480F-9407-3DCABDF8C817
CrashReporter Key:   424c30662723fd3ef8386fa097c54696af46b054
Hardware Model:      iPhone3,3
OS Version:          iPhone OS 6.0 (10A403)
Kernel Version:      Darwin Kernel Version 13.0.0: Sun Aug 19 00:27:34 PDT 2012; root:xnu-2107.2.33~4/RELEASE_ARM_S5L8930X
Date:                2012-10-19 11:07:25 +0530
Time since snapshot: 348 ms

Free pages:        945
Active pages:      7743
Inactive pages:    3807
Throttled pages:   19087
Purgeable pages:   9
Wired pages:       96860
Largest process:   mClient

Processes
     Name                    <UUID>                       rpages       recent_max       [reason]          (state)

           timed <f3f0e010a9a13ae69b5761a5db3f4a3c>          231              231         [vm]         (daemon) (idle)
       accountsd <ac0fce15c1a2350d951efc498d521ac7>          240              240         [vm]         (daemon) (idle)
            afcd <b0aff2e7952e34a9882fec81a8dcdbb2>          117              117         [vm]         (daemon) (idle)
networkd_privile <f8858e6f66af39ab8ce8f105cfa6872f>           94               94         [vm]         (daemon) (idle)
        installd <309cd72e8af43ad1b77d96274d0b0ff7>          310              310         [vm]         (daemon) (idle)
             lsd <6a9f5b5f36b23fc78f87b6d8f1f49a9d>          270              270         [vm]         (daemon) (idle)
     MobilePhone <3fca241f2a193d0fb8264218d296ea41>         1771             1771         [vm]         (resume) (continuous)
      librariand <c9a9be81aa9632f0a913ce79b911f27e>          199              199         [vm]         (daemon)
            tccd <eb5ddcf533663f8d987d67cae6a4c4ea>          124              124         [vm]         (daemon)
             kbd <3e7136ddcefc3d77a01499db593466cd>          545              545         [vm]         (daemon)
         mClient <2a2692e6564f30e1b683883adb7cb323>        97400            98186         [vm]         (frontmost) (resume)
            ptpd <04a56fce67053c57a7979aeea8e5a7ea>          837              837         [vm]         (daemon)
 assistivetouchd <1f4670e8371f3afbaaee4898c459e148>         1141             1141         [vm]         (daemon)
         syslogd <cbef142fa0a839f0885afb693fb169c3>          117              170         [vm]         (daemon)
           wifid <9472b090746237998cdbb9b34f090d0c>          366              366         [vm]         (daemon)
       locationd <892cd1c9ffa43c99a82dba197be5f09e>         1199             1199         [vm]         (daemon)
    mediaserverd <80657170daca32c9b8f3a6b1faac43a2>          463              463         [vm]         (daemon)
   iaptransportd <f784f30dc09d32078d87b450e8113ef6>          234              234                      (daemon)
     SpringBoard <27372aae101f3bbc87804edc10314af3>         3371             3371                     
      backboardd <5037235f295b33eda98eb5c72c098858>         3131             3131                      (daemon)
  UserEventAgent <6edfd8d8dba23187b05772dcdfc94f90>          404              404                      (daemon)
            geod <73e79779d11a312cb70c3770e494ceab>          266              266                      (daemon)
springboardservi <ff6f64b3a21a39c9a1793321eefa5304>            0                0                      (daemon)
       distnoted <a89af76ec8633ac2bbe99bc2b7964bb0>          101              101                      (daemon)
notification_pro <845b7beebc8538ca9ceef731031983b7>          118              118                      (daemon)
filecoordination <fbab576f37a63b56a1039153fc1aa7d8>          127              127                      (daemon)
            apsd <94d8051dd5f5362f82d775bc279ae608>          337              337                      (daemon)
        networkd <0032f46009f53a6c80973fe153d1a588>          157              157                      (daemon)
      aggregated <8c3c991dc4153bc38aee1e841864d088>           87               87                      (daemon)
     debugserver <185719f06f1631d4922c652bdd4c8529>            0                0                      (daemon)
          powerd <2d2ffed5e69638aeba1b92ef124ed861>          132              132                      (daemon)
             ubd <74dc476d1785300e9fcda555fcb8d774>          336              336                      (daemon)
   mDNSResponder <3e557693f3073697a58da6d27a827d97>          280              280                      (daemon)
       lockdownd <ba1358c7a8003f1b91af7d5f58dd5bbe>          192              192                      (daemon)
        BTServer <c92fbd7488e63be99ec9dbd05824f5e5>          407              407                      (daemon)
         configd <4245d73a9e96360399452cf6b8671844>          396              396                      (daemon)
   fairplayd.N92 <db9f16dba3f8358e9b49b446eea2f186>          137              137                      (daemon)
       fseventsd <996cc4ca03793184aea8d781b55bce08>          288              288                      (daemon)
         imagent <1e68080947be352590ce96b7a1d07b2f>          298              298                      (daemon)
         lockbot <4ab4aa38f8b530c984dd4840506f8b08>          228              418                      (daemon)
   syncdefaultsd <991361b1e471398499afeeb750d132f1>          221              221                      (daemon)
      CommCenter <1f425e1e897d32e8864fdd8eeaa803a8>          616              616                      (daemon)
         notifyd <51c0e03da8a93ac8a595442fcaac531f>          149              149                      (daemon)

**End** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:00:45.130

Restart your phone. I had these errors occurring and things like the camera app would crash, they started occurring when my device ran out of space, I deleted a bunch of files but the errors stayed... I restarted my phone and all worked well, I thought to do this because when I would test the app on other devices it worked fine and these errors didn't occur.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T15:55:57.163

我只是遇到了同样的`[TIUserDictionaryController loadWordKeyPairs:]...`错误和同样的问题。我注意到我将我`UITextFields`的一个委托设置为`File's owner`但没有使用委托。我删除了 textField 的委托（从我的故事板文件中），一切都很好:)

但这很奇怪，因为几天来测试一切正常，我提交了该应用程序以供审核，3天后我试图向某人展示该应用程序，但它一直在不知不觉中崩溃。也许这是 Apple`UITextField`课程中的一些奇怪的错误

# javascript - 如何使 Windows 商店应用程序非全屏？

> ID：12968075
> 
> 赞同：0
> 
> 时间：2012-10-19T05:46:34.113
> 
> 标签：javascript, windows-8, windows-runtime, fullscreen, windows-store-apps

问题：

我正在试验一个适用于 Windows 商店的 JavaScript 应用程序。到目前为止，一切正常。

我写了一个小应用程序，它从源代码中删除以行号开头的行号；）

但是，我认为强制此应用程序进入全屏模式并没有什么用处。这与多任务处理的概念背道而驰，因为我希望这个应用程序可以在编程时在桌面上使用，并且希望从互联网上复制粘贴某些内容，而不是在普通平板电脑上使用。

有什么方法可以创建非全屏的 Windows 商店应用程序？

```
window.resizeTo( 640, 480 ); 
```

肯定是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:57:50.633

除了一个非常具体的例外，您无法控制应用程序的大小。没有办法做你想做的事。只有用户可以控制您的应用程序的大小，并且他们可以做的特定的、有限的事情（捕捉、旋转和移动到其他显示器）。

如果您的应用程序被捕捉（即，如果它停靠在屏幕的左侧或右侧），您可以请求取消捕捉。您不能以编程方式将自己捕捉到任何一边；您只能要求自己取消快照以接管全屏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:28:16.100

那么问题是您已经决定为 Windows 商店创建它。将会出现两种类型的平板电脑，Windows RT 平板电脑将限制您只能从商店安装东西，而 x86 变体基本上是平板电脑形式的完整 PC。第二种类型可以让您安装像在桌面上一样运行的窗口应用程序以及将全屏显示的 Windows 商店应用程序。

如果您确实认为您仍然希望将其作为商店应用程序来执行此操作，您应该研究 Microsoft 正在尝试推广的共享范式。本质上，您为您的应用程序公开了一堆“合同”，以发送和接收不同类型的信息，例如图片、文本等。任何具有该数据类型的匹配合同的应用程序都将能够使用或提供该类型的数据。这与应用程序捕捉到一侧或另一侧的能力相结合，应该为您提供足够的灵活性来实现您在第一篇文章中描述的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T00:46:58.370

这是不可能的。它将全屏启动。此规则的唯一例外是，如果用户已经将应用程序捕捉到屏幕的四分之一。在这一点上，你的会捕捉到剩余的 3/4。

# hibernate - 使用 Hibernate 3.5 进行批量插入

> ID：12968076
> 
> 赞同：3
> 
> 时间：2012-10-19T05:46:41.460
> 
> 标签：hibernate, spring-batch

如何使用休眠 3.5 执行以下操作

```
INSERT INTO Table (Column1, Column2 ) VALUES
(Value1, Value2), (Value1, Value2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:52:59.783

您可能需要考虑使用无状态会话。但是，要小心，因为返回的结果（在这种情况下为客户）是分离的。

[http://docs.jboss.org/hibernate/orm/3.5/reference/en/html/batch.html#batch-statelesssession](http://docs.jboss.org/hibernate/orm/3.5/reference/en/html/batch.html#batch-statelesssession)

```
StatelessSession session = sessionFactory.openStatelessSession();
Transaction tx = session.beginTransaction();

ScrollableResults customers = session.getNamedQuery("GetCustomers")
    .scroll(ScrollMode.FORWARD_ONLY);
while ( customers.next() ) {
    Customer customer = (Customer) customers.get(0);
    customer.updateStuff(...);
    session.update(customer);
}

tx.commit();
session.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:28:35.573

下面的链接可以为您提供解决方案。

[http://docs.jboss.org/hibernate/orm/3.5/reference/en/html/batch.html](http://docs.jboss.org/hibernate/orm/3.5/reference/en/html/batch.html)

```
Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();

String hqlInsert = "insert into DelinquentAccount (id, name) select c.id, c.name from Customer c where ...";
int createdEntities = s.createQuery( hqlInsert )
        .executeUpdate();
tx.commit();
session.close(); 
```

# java - javacv中cvScalar构造函数的四个参数是什么意思？

> ID：12968082
> 
> 赞同：1
> 
> 时间：2012-10-19T05:47:05.963
> 
> 标签：java, javacv

请问有人能解释一下javacv中cvScalar(double d, double d1, double d2, double d3)方法的四个参数的含义吗？

如何在 cvScalar 中表示黑色？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T05:58:23.520

cvScalar 只是一个方便的容器，可以容纳 1、2、3 或 4 个浮点值。
此类元组中数据的含义留给 cvScalar 的用户。
例如，它们可用于保存平面中的***点（2 元组）、******矩形***（4 元组）、***RGB 颜色***（3 元组）、***3D 世界中的点***（3 元组）等。 cvScalar 系统地实现为 4 元组，未使用的值设置为 0。

要回答关于 RGB 颜色黑色的问题：

```
cvScalar cBlack = new cvScalar(0, 0, 0, 0);
// BEWARE: the params for the cvScalar constructor are not in RGB order
//         it is:   new cvScalar(blue, green, red, unused)
//  note how the 4th scalar is unused. 
```

或者，您可以使用 CV_RGB() 便捷方法，如下所示：

```
CvScalar cBlack = CV_RGB(0, 0, 0);
// here the CV_RGB() arguments are in Red, Green, Blue order. 
```

**编辑**：因为上面的例子是黑色的，因此所有颜色分量都具有相同的值，因此无法证明存储在 CvScalar 中的 RGB 分量的顺序与传统的红色、绿色、蓝色顺序相反。
便捷方法的`CV_RGB()`参数是传统的 RGB 顺序，但是 cvScalar 中的存储是按照 Blue、Green、Red 的顺序。
换句话说，CV_RGB 的定义如下：

```
public static CvScalar CV_RGB(double r, double g, double b) {
    return cvScalar(b, g, r, 0);
} 
```

或者另外说，`cvScalar(0, 1, 130, 0)`相当于`CV_RGB(130, 1, 0)`，即红色，带有一点绿色。

除了 CV_RGB()，当使用 cvScalars 来获取颜色值时，使用`cvScalar.Red()`, `cvScalar.Blue()`,`cvScalar.Green()`方法来提取单个组件可能很方便，而不必担心这些组件存储在哪里。该类还包括一些用于每种常见颜色的静态实例： `cvScalar.GRAY`、`cvScalar.YELLOW`等`cvScalar.BLUE`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:58:14.220

cvScalar 是一个由 4 个双精度数组成的通用数组。数据类型通常用于表示像素值，例如：

```
CvScalar blue = CV_RGB(64, 64, 255); 
```

其余的双精度值在构造函数中设置为 0，其取值少于 4 个。

cvGet2D 是另一个以 CvScalar 形式返回像素值的函数

> 读取单个像素的最简单方法是使用 cvGet2D() 函数
> 
> CvScalar cvGet2D(const CvArr*, int row, int col);
> 
> 此函数采用三个参数：指向数据容器 (CVArr*) 的指针以及行和列位置的数组索引。数据容器可以是 IplImage 结构。像素的最上一行是 row=0，最下一行是 row=height-1。
> 
> cvGet2D() 函数返回一个 C 结构体 CvScalar，定义为
> 
> typedef struct CvScalar { double val[4]; } CvScalar;
> 
> 每个通道的像素值在 val[i] 中。对于灰度图像，val[0] 包含像素 > 亮度。其他三个值设置为 0。对于三通道 BGR 图像，blue=val[0]、>green=val[1] 和 red=val[2]。

[http://www.cognotics.com/opencv/servo_2007_series/part_1/page_4.html](http://www.cognotics.com/opencv/servo_2007_series/part_1/page_4.html)

# c# - 捕获的变量...“捕获”实际上代表什么？

> ID：12968092
> 
> 赞同：5
> 
> 时间：2012-10-19T05:48:09.630
> 
> 标签：c#, .net, casting, captured-variable

在“捕获的变量”中如何捕获变量？

“捕获”一词实际上代表什么？

这是否意味着在不涉及装箱的情况下引用值类型？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T05:59:24.883

Captured Variables 一般是指用闭包（基本上是内联函数）捕获的变量。“捕获”意味着内联函数必须“捕获”对外部函数中变量的引用。为此，C# 编译器生成一个内部类，并通过引用将外部变量传递给内部类（内联函数随后引用该内部类）。如果你反汇编你的代码，你可以看到这一点。

考虑以下

```
void Main()
{
     string s = "hello";
     Action a = delegate 
     { 
          Debug.WriteLine(s);
     };
     s = "hello2";
     a();
} 
```

在上面的示例中，字符串变量 s 由内联操作 a 捕获。

在底层，C# 编译器将创建一个内部类，其中 Action a 引用来捕获变量 s 的值。需要注意的是，字符串 s 是通过引用动作 a 传递的，所以动作实际上会打印出“hello2”，而不是“hello”。如果没有清楚地理解，这可能会产生意想不到的副作用，并且被称为“访问修改后的闭包”。

# regex - 正则表达式验证端口号

> ID：12968093
> 
> 赞同：13
> 
> 时间：2012-10-19T05:48:15.747
> 
> 标签：regex, vb.net, .net-2.0

我正在使用这个正则表达式`(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{0,3}`来验证端口号。不知何故，这不起作用。这有什么问题？谁能指出我。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-19T05:51:31.657

*不工作*到底是什么意思？

你可以尝试这样的事情：（`^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$`从[这里](https://web.archive.org/web/20151029043426/http://utilitymill.com/utility/Regex_For_Range)获得）。

这将确保任何给定的字符串都是数字的并且介于 和`0`之间`65535`。

假设您的正则表达式匹配相同的范围，它缺少开始和结束锚点（`^`和`$`分别），因此它允许除了实际端口之外的其他字符串。

*2022 年 2 月 2 日更新：*修复了正则表达式以拒绝等值`00`。更新的正则表达式来自[以下评论](https://stackoverflow.com/questions/12968093/regex-to-validate-port-number#comment89586361_12968117)。这个正则表达式可以在这里更好地理解和可视化：[https ://www.debuggex.com/r/jjEFZZQ34aPvCBMA](https://www.debuggex.com/r/jjEFZZQ34aPvCBMA)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-01-30T16:19:44.373

当我们在谷歌上搜索“如何验证端口号”时，我们不幸登陆了这里

但是（除非你真的别无选择......），

**正则表达式显然不是验证端口号的方法！**

“一个”（稍微好一点）的方式可能是：

```
step 1: Convert your string into number, and return FALSE if it fails
step 2: return TRUE if your number is in [1-65535] range, and FALSE otherwise 
```

**各种原因，为什么 Regex 不是正确的方法？**

*   代码可读性（需要几分钟才能理解）
*   代码稳健性（有多种方法可以引入拼写错误，需要进行单一测试）
*   代码灵活性（如果端口号可以扩展为 64 位数字怎么办！？）
*   ETC。 ...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-02T19:42:57.890

Number() 是你想要的函数 "123a" 返回 NAN

parseInt() 截断尾随字母“123a”返回 123

```
<input type="text" id="txtFld" onblur="if(Number(this.value)>0 && Number(this.value)<65536){alert('valid port number');}" /> 
```

*   [jsfiddle](http://jsfiddle.net/at8ay/3/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-11-13T21:53:13.253

这是我用来验证防火墙端口设置的示例。原始答案将匹配 2 个字符串。我只能有 1 个字符串匹配。

`(6553[0-5]|655[0-2][0-9]|65[0-4][0-9][0-9]|6[0-4][0-9][0-9][0-9][0-9]|[1-5](\d){4}|[1-9](\d){0,3})`

要获得：`22,24:100,333,678,100:65535`我的完整验证（只会返回 1 个匹配项）是

```
(6553[0-5]|655[0-2][0-9]|65[0-4][0-9][0-9]|6[0-4][0-9][0-9][0-9][0-9]|[1-5](\d){4}|[0-9](\d){0,3})(:(6553[0-5]|655[0-2][0-9]|65[0-4][0-9][0-9]|6[0-4][0-9][0-9][0-9][0-9]|[1-5](\d){4}|[0-9](\d){0,3}))?(,(6553[0-5]|655[0-2][0-9]|65[0-4][0-9][0-9]|6[0-4][0-9][0-9][0-9][0-9]|[1-5](\d){4}|[0-9](\d){0,3}){1}(:(6553[0-5]|655[0-2][0-9]|65[0-4][0-9][0-9]|6[0-4][0-9][0-9][0-9][0-9]|[1-5](\d){4}|[0-9](\d){0,3}))?)* 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-18T11:55:03.807

更严格的方法是使用正则表达式匹配所有最多 5 位数字与以下字符串：

```
*(^[1-9]{1}$|^[0-9]{2,4}$|^[0-9]{3,4}$|^[1-5]{1}[0-9]{1}[0-9]{1}[0-9]{1}[0-9]{1}$|^[1-6]{1}[0-4]{1}[0-9]{1}[0-9]{1}[0-9]{1}$|^[1-6]{1}[0-5]{1}[0-4]{1}[0-9]{1}[0-9]{1}$|^[1-6]{1}[0-5]{1}[0-5]{1}[0-3]{1}[0-5]{1}$)* 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-05-21T11:58:11.670

也登陆这里，专门搜索 REGEX 来验证端口号。我看到批准的解决方案尚未修复以涵盖所有场景（例如：007 端口和其他）以及来自其他站点的解决方案也没有更新（[例如](https://www.regextester.com/104146)）。

达到与 相同的最小解决方案`saber tabatabaee yazdi`，应该`1-65535`正确覆盖范围：

`^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$`

享受 ！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-29T00:18:04.477

```
"^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,4}))$" 
```

它将允许 0-65535 之间的所有内容。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-04T22:17:50.470

npinti 接受的答案是不正确的。例如，它不允许输入端口号 1000。对我来说，这个（不好，我是初学者）可以正常工作：

`/^((((([1-9])|([1-9][0-9])|([1-9][0-9][0-9])|([1-9][0-9][0-9][0-9])|([1-6][0-5][0-5][0-3][0-5])))))$/`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-10-24T08:19:22.443

这是排除以 0 开头的端口的单端口正则表达式验证

`^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])`

这是端口范围的验证（例如 1111-1111）

`^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])(-([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5]))?$`

关联：

[https://github.com/findhit/proxywrap/issues/13](https://github.com/findhit/proxywrap/issues/13)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-05-26T09:56:12.073

解决方案：

```
Dim Minlenght As Integer = 1
Dim Maxlenght As Integer = 65536

Regex.IsMatch(sInput,"(^\d{0},{1}$)", "{" + Minlenght, Maxlenght + "}") 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-07-29T01:15:42.617

```
^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0][0-9]{1,4})|([0-9]{1,4}))$ 
```

我已经用 Junit 测试了上面的正则表达式，从 0-65535 运行 for 循环

例如：00001 - 65535 带前导零 1 - 65535 不带前导零 例如：====

1.  `(6553[0-5])` : 65530-65535
2.  `(655[0-2][0-9])` : 65500-65529
3.  `(65[0-4][0-9]{2})`: 65000-65499
4.  `(6[0-4][0-9]{3})`: 60000-64999
5.  `([1-5][0-9]{4})` : 10000-59999
6.  `([0-5]{0,5})` ：00000-55555（用于前导零）
7.  `([0][0-9]{1,4})` : 00000-09999（用于前导零）
8.  `([0-9]{1,4})` ：0000-9999（用于前导零）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-06-15T03:37:40.320

@npinti 的答案允许在端口号中使用前导零，并且端口 0 表示选择任何可用端口，所以我会排除它，因此正则表达式变为

```
^([1-9][0-9]{0,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$ 
```

如果你想允许端口 0 然后

```
^(0|[1-9][0-9]{0,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$ 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-05T23:47:32.687

如果变量是介于 1 和 65536（含）之间的整数，则...

```
if [[ "$port" =~ ^[0-9]+$ && $port -ge 1 && $port -le 65536 ]]; then 
```

# c# - 在 C# 中使用 Json.NET 创建 JSON 多级

> ID：12968094
> 
> 赞同：1
> 
> 时间：2012-10-19T05:48:16.517
> 
> 标签：c#, json, json.net

我有 2 节课：

```
class Employee
{
    string name;
    string age;
}

class Departments
{
    string branch;
    Employee A;
} 
```

声明新列表：

```
List<Departments> lstDp = new List<Departments>(); 
```

在获取/设置并将员工添加到列表中之后......我有一个部门列表，包括员工信息。进而：

```
string json = JsonConvert.SerializeObject(lstDp, Newtonsoft.Json.Formatting.Indented); 
```

但输出 JSON 字符串仅包含元素“分支”。这有什么问题？我想要这样的输出：

```
[
  {
    "branch": "NY",
    "Employee": {
        "name": "John Smith",
        "age": "29",
    }
  }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:05:56.283

问题可能是某些类成员是私有的。刚刚测试：

```
class Employee
{
    public string Name { get; set; }
    public string Age { get; set; }
}

class Departments
{
    public string Branch { get; set; }
    public Employee Employee { get; set; }
} 
```

和

```
var lstDp = new List<Departments> {
            new Departments {
                Branch = "NY",
                Employee = new Employee { Age = "29", Name = "John Smith" }
            }
        };
var json = JsonConvert.SerializeObject(lstDp, Formatting.Indented); 
```

工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:00:27.937

`Department`应该包含一个不`IEnumerable<Employee>`只是一个`Employee`

# ajax - Ajax 在 JSF 中不起作用

> ID：12968096
> 
> 赞同：0
> 
> 时间：2012-10-19T05:48:34.263
> 
> 标签：ajax, jsf, jsf-2

我不知道为什么 Ajax 在我的 JSF 文件中不起作用。即使我的 GlassFish 中有一个最新的 Mojarra，它是 3.2.13。这是我的代码

```
<h:head></h:head>
<h:body>
    <h:panelGroup id="panel" rendered="#{chartBean.showCharts}">

            <p:barChart id="basic" value="#{chartBean.categoryModel}"
            legendPosition="ne" title="Basic Bar Chart" min="0" max="200"
            style="height:300px" />

    </h:panelGroup>

    <h:commandButton value="Display Chart" action="#{chartBean.createCategoryModel}">
    <f:ajax render="panel"/>
    </h:commandButton>
</h:body> 
```

现在，当我运行此代码时，按钮不起作用。

另一件事，如果我改变我的代码，比如删除面板，只是在条形图上渲染，然后 `<f:ajax render="basic"/>`把它放在里面，`<form>` 那么它会抛出`NullPointerException`. 因为它呈现图表并期望来自`chartBean.categoryModel`. 现在 AFAIK 它不应该因为 ajax 而被渲染。

我无法理解 JSF 中的 ajax 行为。我也试过`<f:ajax execute="@form" render="basic">`，但也没有用。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:08:59.200

当您单击 ajax 按钮时，您无法重新渲染页面上不存在的组件。

一个简单的解决方案是将渲染属性从 移动`h:panelGroup`到`p:barChart`. 然后将始终呈现 panelGroup 并且 JSF 在您的 ajax 请求期间找到它。

```
<h:panelGroup id="panel">

        <p:barChart rendered="#{chartBean.showCharts}"
                    id="basic" value="#{chartBean.categoryModel}"
                    legendPosition="ne" title="Basic Bar Chart" min="0" max="200"
                    style="height:300px" />
</h:panelGroup>

<h:commandButton value="Display Chart" action="#{chartBean.createCategoryModel}">
<f:ajax render="panel"/>
</h:commandButton> 
```

# javascript - ajax 回调函数可以看到父函数的变量吗？

> ID：12968098
> 
> 赞同：5
> 
> 时间：2012-10-19T05:48:40.257
> 
> 标签：javascript, jquery, ajax, closures

```
function validateHistoryId(input) {
    $.getJSON('request.php', {"action": "historyExists", "history_id" : input.value},
              function(data) {
                  console.log(input.value);
              }
    );
} 
```

我使用来自 javascript 函数的 jQuery ajax 调用。我尝试了上面的代码并且它可以工作，但我不知道它将来会不会导致任何问题。

我想知道，ajax回调函数可以看到它的父函数的变量吗？这样做是不好的做法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T06:04:56.020

这是 JavaScript 函数式的做事方式。它被称为闭包：函数从其当前作用域和任何其他父作用域携带变量指针。因此，这不仅是一种好的做法，而且是您通常应该遵循的模式，而不是推动参数对象等。

请注意，“this”引用是特殊的，它永远不会关闭（与任何其他引用相反），因此始终将全局对象指向匿名函数。

事实上，开发人员需要一些时间来充分利用闭包功能的强大功能——这是您刚刚编写的一个基本示例。在更高级（而不仅仅是异步）场景中，闭包可帮助您创建“即发即弃”行为，或者可以为您提供客户端代码无法访问的“私有”变量（对于库开发很有用）。闭包还可以帮助您隔离代码，使其不会与全局范围混淆。

1）示例：如何使用闭包创建受保护的变量。您可以访问两种可以访问“protectedVariable”的方法，但您不能自己访问它 - 因此可以保证控制。

```
function protectedScope(initData) {
  var protectedVariable = initData;

  return {
    getter: function()  { return protectedVariable; }
    setter: function(v) { protectedVariable = v; }
  }
}

var methods = protectedScope(10);

console.log(methods.getter()); 
```

2）隔离：即使使用“全局”函数定义，以下代码也不会在全局范围内产生垃圾

```
var API = (function() {
   var protectedVariable = 0;

   var myNotGlobalFunction() {
      return protectedVariable;
   }

   return myNotGlobalFunction;
})(); 
```

# jquery - jQuery 获取 HTML 输入值失败

> ID：12968101
> 
> 赞同：0
> 
> 时间：2012-10-19T05:48:53.753
> 
> 标签：jquery

我有这个 jQuery 脚本：

```
$('a.manage-content-link').click(function (e) {
var self = $(this),
    file = self.siblings('input[type="hidden.block-hidden-input"]').val();
var username = $("username").val();
var ids = $(this).attr('id'); 
self.next(".manage-content-wrap").find(".manage-content").load("test1.php?id="+ids+"&file="+file);
e.preventDefault();
}); 
```

和这个 HTML 标签：

```
<li><input type="hidden" value="001" class="block-hidden-input" />
    <a href="#" id="manage-1" class="manage-content-link">
        <img src="images/web-block/web-block1.jpg"/>
        <span class="orange-notice">Click to Edit Content</span>    
    </a>
</li> 
```

在 test1.php 中，我有这个：

```
<?php
$file = $_GET['file'];
$id = $_GET['id'];

echo $file ."<br>";
echo $id ."<br>";
echo "Hello World";
?> 
```

这是我得到的输出：

```
undefined >> should be 001
manage-1
Hello World 
```

为什么该脚本无法获取输入值（在本例中为：001），但它成功地从 href 的 ID 中获取了“ids”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:52:22.257

您的选择器有点混乱：

```
self.siblings('input[type="hidden.block-hidden-input"]').val();
                               ^^^^^ 
```

试试这个：

```
self.siblings('input[type="hidden"].block-hidden-input').val(); 
```

另外，你确定你有`<username>`元素吗？

```
var username = $("username").val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T05:52:40.597

这条线错了，

`file = self.siblings('input[type="hidden.block-hidden-input"]').val();`

它应该是

`file = self.siblings('input[type="hidden"].block-hidden-input').val();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:57:44.877

应该

```
file = self.siblings('input[type="hidden"].block-hidden-input').val(); 
```

# c# - 所有 WinForm 表单的单个实例

> ID：12968102
> 
> 赞同：3
> 
> 时间：2012-10-19T05:49:12.050
> 
> 标签：c#, winforms

我正在开发一个 C# [Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)应用程序。我想要所有表单的一个实例。

因此，当用户单击联系人按钮时，例如，两次，而不是有两个联系人表单，我会将单实例联系人表单放在前面。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T05:51:54.700

[在使用Application.OpenForms](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.openforms.aspx)创建和显示表单之前检查表单是否存在于打开表单的集合中

```
if (System.Windows.Forms.Application.OpenForms["Form1"] as Form1 != null)
       MessageBox.Show("Form1 is opened");
 else
       MessageBox.Show("Form1 is not opened"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T06:04:15.447

```
public static Form GetOpenedForm<T>() where T: Form {
    foreach (Form openForm in Application.OpenForms) {
        if (openForm.GetType() == typeof(T)) {
            return openForm;
        }
    }
    return null;
} 
```

在您的代码中，您在其中创建`ContactForm`：

```
ContactForm form = (ContactForm) GetOpenedForm<ContactForm>();
if (form == null) {
    form = new ContactForm();
    form.Show();
} else {
    form.Select();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T06:02:55.430

就那么简单：

```
Form fc = Application.OpenForms["Form1"];
            if (fc != null)
            {
                fc.Focus();
            }
            else
            {
                Form1 f1 = new Form1();
                f1.Show();
            } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T06:32:44.013

您可以在单击它时禁用`contactButton`它并打开`contactForm`-

```
private void contactButton_Click(object sender, EventArgs e)
{
  contactButton.Enabled=false;
  //code to open the contactForm
} 
```

关闭`contactForm`后，您可以重新启用按钮-

```
contactButton.Enabled=true; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T06:10:40.990

```
Form2 form2 = null;
private void button1_Click(object sender, EventArgs e)
{
 bool isFormExists = false;
 foreach (Form openForm in Application.OpenForms)
 {
  if (openForm == form2 && openForm!=null)
  {
   openForm.Focus();
   isFormExists = true;
   break;
  }
 }

 if (!isFormExists)
 {
  form2 = new Form2();
  form2.Show();
 }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-04T19:12:13.797

我会同意奥蒂尔的回答。您也可以添加一个 WindowState，因为如果窗体被最小化，它将不会显示。[此](https://stackoverflow.com/a/2725234/1033484)答案可用于获取还原方法。

```
ContactForm form = (ContactForm) GetOpenedForm<ContactForm>();
if (form == null) {
    form = new ContactForm();
    form.Show();
} else {
    //use this (if you want it to be restored to normal and focused)
    //no need of extension method
    //form.WindowState = FormWindowState.Normal;
    //form.Select();

    //or use this if you want it to be restored as previous state and focused
    //You need a Restore extension method that can be found in the link above
    form.Focus();
    form.Restore();
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-19T06:00:24.153

试试这个组合

首先使联系表格成为一个全局对象

```
private ContactForm contactForm; 
```

然后你的联系按钮处理程序：

```
private void contactButton_Click(object sender, EventArgs e)
{
    if (contactForm == null)
    {
       contactForm = new ContactForm();
       contactForm.FormClosing += new FormClosingEventHandler(contactForm_FormClosing);
    }
    contactForm.Show();
} 
```

然后处理 ContactForm 的 FormClosing 事件来隐藏它而不是关闭它：

```
private void contactForm_FormClosing(object sender, FormClosingEventArgs e)
{
    contactForm.Hide();
    e.Cancel = true;
} 
```

或者，如果您希望联系表单关闭并在下次打开为新表单，请改为处理 FormClosed：

```
private void contactForm_FormClosed(object sender, FormClosedEventArgs e)
{
    contactForm = null;
} 
```

然后下次单击按钮时，将捕获 null if 子句，并将表单设置为新实例并打开。

# java - 如何避免重复检查我的递归？

> ID：12968107
> 
> 赞同：0
> 
> 时间：2012-10-19T05:49:59.630
> 
> 标签：java, recursion

对于那些已经阅读了我上一篇文章的人，我对此有不同的解决方案。请不要只是走开。

这是学校的作业问题（对不起，长篇大论，我已经尝试缩短它）

我倾向于根据我身上有多少钱来订购食物。无论服务如何，我都喜欢至少给 15% 的小费（我已经对任何一周的表现进行了足够的评估）而且我讨厌给钱的整个过程，等待女服务员带着零钱回来试图找到正确的更改以做出适当的提示。我所做的是检查菜单上最适合我的钱的食物组合。当我说最佳匹配时，我的意思是最接近 15% 而不会下降，而且我只选择每种食物一次。正如你可以想象的那样，我需要一些时间来计算所有这些，所以我希望你制作一个我可以使用的方法。

该方法仅适用于以下菜单：

```
Bandera Pizza Bread 6.49
Boston's Pizza Bread    5.35
Garlic Twist Bread  7.49
Single Order    5.35
Sun-Dried Tomato Bruschetta 6.99
Three Cheese Toast  6.35
Double Order wings  16.49 
Starter Size wings  8.99 
Cactus Nachos   10.29
Baked Ravioli Bites 8.49
Southwest Quesadilla    9.25 
```

创建一个名为 selectFood 的方法，它将我拥有的金额作为参数，在屏幕上输出选择并返回我将保留的百分比小费，四舍五入到小数点后一位。如果食物多于两个人，请不要担心，我经常和大群人一起出去。

一些示例输出：

```
Best order for $10.00 is:Baked Ravioli Bites
The tip is 17.79%

Best order for $20.00 is:Sun-Dried Tomato Bruschetta, Cactus Nachos
The tip is 15.74%

Best order for $60.00 is:Bandera Pizza Bread, Boston's Pizza Bread, Three Cheese Toast, Double Order wings, Starter Size wings, Baked Ravioli Bites
The tip is 15.03%

Best order for $190.00 is:Bandera Pizza Bread, Boston's Pizza Bread, Garlic Twist Bread, Single Order, Sun-Dried Tomato Bruschetta, Three Cheese Toast, Double Order wings, Starter Size wings, Cactus Nachos, Baked Ravioli Bites, Southwest Quesadilla
The tip is 107.58% 
```

我的老师有一个限制——我们不允许使用数组列表。

这是我最新的尝试：

```
import java.util.*;

class MethodAssign7{
    public static void main(String[]args){
        boolean[] took = {false,false,false,false,false,false,false,false,false,false,false};
        double money = 70.0;
        //System.out.println(selectFood(money/1.15,took));
        selectFood(money,took);
        System.out.println(closest/money*100+15);
    }
    static double closest = 10000.0;
    static void selectFood(double money, boolean[] took){
        String[] food = {"Bandera Pizza Bread","Boston's Pizza Bread","Garlic Twist Bread","Single Order","Sun-Dried Tomato Bruschetta","Three Cheese Toast","Double Order wings","Starter Size wings","Cactus Nachos","Baked Ravioli Bites","Southwest Quesadilla"};
        double[] costs = {6.49,5.35,7.49,5.35,6.99,6.35,16.49,8.99,10.29,8.49,9.25};

        if(money<5.35){
            if(money<closest){
                closest = money;
            }
        }
        else{
            for(double d: costs){
                if(money-d*1.15>0){
                    //System.out.println(money-d);
                    selectFood(money-d*1.15,took);
                }
            }
        }
    }
    /*static void printSelections(double money, boolean[] took){
        String[] food = {"Bandera Pizza Bread","Boston's Pizza Bread","Garlic Twist Bread","Single Order","Sun-Dried Tomato Bruschetta","Three Cheese Toast","Double Order wings","Starter Size wings","Cactus Nachos","Baked Ravioli Bites","Southwest Quesadilla"};
        double[] costs = {6.49,5.35,7.49,5.35,6.99,6.35,16.49,8.99,10.29,8.49,9.25};

        if(money<5.35){
            if(money==closest){
                print the choices by using took
            }
        }
        else{
            for(int i=0;i<costs.length;i++){
                if(money-costs[i]*1.15>0 && took[i]!=true){
                    took[i]=true;
                    //System.out.println(money-d);
                    selectFood(money-costs[i]*1.15,took);
                }
            }
        }
    }*/
} 
```

我试图先用动态编程解决问题的百分比部分，我可以用我的程序得到百分比答案，但是输入 60 以上的钱需要很长时间。我试图添加布尔列表“took”来表示哪些已经被选中，但它根本不起作用，让我感到困惑:(

所有被注释掉的部分都是为了输出食物的选择。而且我知道我的 selectFood 方法现在只是 void 并且不会返回值，但我认为这更容易修复。我现在只关心如何让这个百分比部分起作用。

感谢您花时间阅读我的问题，如果您能帮助我，我将不胜感激，或者如果您不明白我的要求，请发表评论告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:46:46.193

最简单的版本是你从一笔钱开始，x。至少需要一定数量的小费作为小费，我们将其称为 t。这实际上意味着你想花尽可能多的钱，而不会超过 (x - t)。

那么你想要做的是定义你的目标：

```
 double totalMoney = 190.0;
    double minimumTip = totalMoney/115*15;
    double targetMoney = totalMoney - minimumTip; 
```

我将假设您具有所需的数据结构，如下所示：

```
 MenuItem[] items = new MenuItem[]
    {
        new MenuItem("Bandera Pizza Bread", 6.49),
        new MenuItem("Boston's Pizza Bread", 5.35),
        [...]
    }; 
```

现在我们要递归搜索这些项目的最佳可能组合，以使所选项目的总成本最大化，同时始终保持小于 targetMoney。

递归树的每个分支将代表我可以购买的一种产品组合。这是我的解决方案和您的解决方案之间的主要区别。在树的第一个分支上，我将评估两种可能性——要么我会购买“Bandera Pizza Bread”，要么我不会。在二级分店，我会评估是否应该购买“波士顿披萨面包”。在每次递归调用中，我只需要知道我是否还有钱可花（此时我会查看列表中的下一项）或者该订单是否“超支”，此时我放弃了组合（因为购买其他任何东西只会让它变得更加昂贵！）。

为了减少我需要创建/丢弃的数组数量，我使用一个整数“selected”作为一个位字段，指定我决定在这个分支上购买哪些项目。如果位为 1，则我选择购买此商品。如果位为 0，则我选择不购买此商品。您可以使用布尔数组获得相同的效果，但是会有很多数组操作妨碍我演示的实际算法。

我还为最好的情况创建了类变量：

```
int    bestPurchaseSet = 0;
double bestCost = 0; 
```

您不必这样*做*，您可以使用参数和返回类型传递结果，但这样可以减少代码的繁重。

那么，递归函数看起来有点像这样：

```
public void search(MenuItem[] items,
                   int        selected,
                   int        depth,
                   double     currentCost,
                   double     maxCost)
{
    if(currentCost > maxCost)
    {
        // too expensive
        return;
    }

    if(currentCost > bestCost)
    {
        // New best combination! Save it.
        bestCost = currentCost;
        bestPurchaseSet = selected;
    }

    if(depth >= items.length)
    {
        // run out of food types
        return;
    }

    // if we do choose this item, then we mark it as selected and increase the cost of this order.
    search(items, selected | (0x1 << depth), depth + 1, currentCost + items[depth].cost, maxCost);

    // if we don't choose this item
    search(items, selected, depth + 1, currentCost, maxCost);
} 
```

这应该非常有效地运行，因为每个食物项只会增加一个额外的递归级别 - 并且许多递归分支被提前切断（一旦购买变得太昂贵）。

最后，打印出结果：

```
 System.out.print("Best order for $" + totalMoney + " is: ");
    for(int i=0; i<items.length; i++)
    {
        if((bestPurchaseSet & (0x1 << i)) != 0)
        {
            System.out.print(items[i].name + ", ");
        }
    }

    System.out.println("The tip is " + (totalMoney - bestCost)/bestCost * 100 + "%"); 
```

# django - 基于url特定的多语言实现

> ID：12968116
> 
> 赞同：1
> 
> 时间：2012-10-19T05:51:26.730
> 
> 标签：django, multilingual, django-multilingual

我在我的项目中使用*语言翻译*。但如果我在浏览器中将最高优先级设置为相应的语言，它只会翻译字符串。

*例如*

如果我使用两种语言**en**和**es**进行翻译，那么如果我在浏览器*中将西班牙语设置为默认语言*，它将以*西班牙语显示数据。*

 *我的翻译工作正常，因为它只显示我在 Django.po 文件中指定的西班牙语数据。

所以我想要的是如果我将 url 中的语言指定为 www.asd.com/?lang=es 那么它必须以西班牙语显示数据。

所以请建议我为此做些什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:35:34.440

我认为您正在寻找[django-localeurl](http://pypi.python.org/pypi/django-localeurl/1.5)。

> *一个 Django 应用程序，允许您在 URL 中指定页面的语言。*

安装请[点击这里。](http://packages.python.org/django-localeurl/setup.html)*

# android - 安卓json错误

> ID：12968118
> 
> 赞同：1
> 
> 时间：2012-10-19T05:51:35.247
> 
> 标签：android, json

在我的 Android 应用程序中，我想使用谷歌货币转换器。Google 货币转换器以 json 格式输出结果，例如：

```
{lhs: "1 British pound",rhs: "1.6058 U.S. dollars",error: "",icc: true} 
```

我在我的 Android 应用程序中使用以下代码存根从 json 获取输出

```
JSONArray jArray = new JSONArray(jsonResult);
JSONObject json_data=null;
String currency01 = "";
String currency02 = "";
for(int i=0;i<jArray.length();i++){
    json_data = jArray.getJSONObject(i);
    c1 = json_data.getString("lhs");
    c2 =json_data.getString("rhs");
    tv.append(c1+"\n\n");
    tv.append(c2);
} 
```

但这并没有给出任何结果，也没有错误。请帮助我被困在这里如何在Andoid中阅读上面的json。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T06:03:45.157

我建议您使用在线 JSON 验证器[http://jsonlint.com/](http://jsonlint.com/)

使用它可以识别 JSON 中的问题。

您可以看到下面的屏幕截图，我获取了您的 JSON 值并验证了哪些显示错误。 ![json验证错误](../Images/5d5f984b4f3f0c5765d71f841bb669bc.png)

这是另一个成功验证 JSON 的屏幕截图 ![json验证成功](../Images/9345be03e51f54a0ae45407c77b39a31.png)

您只需要将双引号包围到 lhs、rhs 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:02:20.267

使用它，因为你没有得到数组它的 json 对象我使用 url [http://www.google.com/ig/calculator?hl=en&q=1GBP=?USD测试过](http://www.google.com/ig/calculator?hl=en&q=1GBP=?USD)

```
String currency01 = "";
String currency02 = "";
JSONObject jObj = new JSONObject(jsonResult);
   currency01  = jObj.optString("lhs");
    currency02 =jObj .optString("rhs");
    tv.append(currency01 +"\n\n");
tv.append(currency02 "\n\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:55:57.100

```
JSONArray jArray = new JSONArray(jsonResult);
            JSONObject json_data=null;
            String c1 = "";
            String c2 = "";
            for(int i=0;i<jArray.length();i++){
                    json_data = jArray.getJSONObject(i);
                    c1 = json_data.getString("lhs");
                    c2 =json_data.getString("rhs");
                    tv.append(c1+"\n\n");
                    tv.append(c2"\n\n");
            } 
```

# mysql - 尝试获取锁时发现死锁；尝试重启

> ID：12968126
> 
> 赞同：0
> 
> 时间：2012-10-19T05:52:29.193
> 
> 标签：mysql

```
Notification Exception: (Env:Production) : : java.lang.String :
PreparedStatementCallback; SQL [ UPDATE txn_tracker set status=?,
schedule_dt=SYSDATE() where txn_id =? and status=? ]; 
Deadlock found when trying   to get lock; try restart 
```

如何处理这个异常

请建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:38:13.353

您必须抓住它并重试交易。一些减少mysql死锁机会的技巧：http: [//dev.mysql.com/doc/refman/5.0/en/innodb-deadlocks.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-deadlocks.html)

# android - Android NDK 运行时错误

> ID：12968127
> 
> 赞同：1
> 
> 时间：2012-10-19T05:52:30.660
> 
> 标签：android, android-ndk

我已经关注了这个链接

[如何在 ndk 应用程序中链接任何库](https://stackoverflow.com/questions/10106965/how-to-link-any-libarary-in-ndk-application)

我已经完成了我的文件夹结构如下

项目（项目根目录）
|->src
|-->com.apparmtest
|--->MainActivity
|->jni
|-->Android.mk
|-->Application.mk
|-->AppARMTest.c
|- ->com_apparmtest_MainActivity.h
|->myLib
|-->FileTest.h
|-->libFRead.so

我的 Android.mk 文件内容是

安卓.mk

```
LOCAL_PATH := $(call my-dir)

### include FileTest.so as a prebuilt lib ###

include $(CLEAR_VARS)

LOCAL_MODULE            := my-prebuilt-lib

LOCAL_SRC_FILES         := ../myLib/libFRead.so

LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../myLib

include $(PREBUILT_SHARED_LIBRARY)

### end prebuilt###

include $(CLEAR_VARS)

LOCAL_MODULE    := AppARMTest

LOCAL_C_INCLUDES := $(LOCAL_PATH) \
                $(LOCAL_PATH)/../myLib

LOCAL_SRC_FILES := AppARMTest.c

LOCAL_LDLIBS := -llog

LOCAL_STATIC_LIBRARIES := my-prebuilt-lib

include $(BUILD_SHARED_LIBRARY)

and my Application.mk contains 

APP_MODULES := AppARMTest

APP_PLATFORM := ANDROID-8

and this project is compiling properly as well as ndk-build is not giving any error.

But while running on emmulator I am getting this error

    10-19 10:25:40.704: E/AndroidRuntime(334): FATAL EXCEPTION: main

    10-19 10:25:40.704: E/AndroidRuntime(334): java.lang.ExceptionInInitializerError

    10-19 10:25:40.704: E/AndroidRuntime(334):  at java.lang.Class.newInstanceImpl(Native Method)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at java.lang.Class.newInstance(Class.java:1409)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at 

    android.app.Instrumentation.newActivity(Instrumentation.java:1021)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at 

android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at 

    android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at 

    android.app.ActivityThread.access$1500(ActivityThread.java:117)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at 

    android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at 

    android.os.Handler.dispatchMessage(Handler.java:99)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at android.os.Looper.loop(Looper.java:123)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at 

    android.app.ActivityThread.main(ActivityThread.java:3683)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at java.lang.reflect.Method.invokeNative(Native Method)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at 

    java.lang.reflect.Method.invoke(Method.java:507)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at 

    com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at 

    com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)

    10-19 10:25:40.704: E/AndroidRuntime(334):  at dalvik.system.NativeStart.main(Native Method)

    10-19 10:25:40.704: E/AndroidRuntime(334): Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1962]:    33 could not load needed library

    './obj/local/armeabi/libFRead.so' for 'libAppARMTest.so' (load_library[1104]: Library './obj/local/armeabi/libFRead.so' not found)

   10-19 10:25:40.704: E/AndroidRuntime(334):   at java.lang.Runtime.loadLibrary(Runtime.java:434)

   10-19 10:25:40.704: E/AndroidRuntime(334):   at java.lang.System.loadLibrary(System.java:554)

   10-19 10:25:40.704: E/AndroidRuntime(334):   at ivz.apparmtest.MainActivity.<clinit>(MainActivity.java:11)

   10-19 10:25:40.704: E/AndroidRuntime(334):   ... 15 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:50:47.770

在 MainActivity 类的静态构造函数中调用**loadLibrary()**两次：

```
static {
    System.loadLibrary("FRead");
    System.loadLibrary("AppARMTest");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:33:01.130

这是一个运行时链接问题。运行环境找不到 libAppARMTest.so 所需的库 libFRead.so

在执行 ndk-build 时不会出现此问题，因为您已在 makefile 中明确说明了 libFRead.so 的路径，因此编译工作正常。

尝试确保 dalvik 能够在运行时加载 libFRead.so。您可能需要将库 libFRead.so 与 libAppARMTest.so 一起放在 libs/armeabi 文件夹中。

# c# - 如何获取新添加的记录

> ID：12968131
> 
> 赞同：2
> 
> 时间：2012-10-19T05:53:06.210
> 
> 标签：c#, asp.net, mysql, sql

在我的应用程序中，我想通过网格视图中的导入操作显示新添加的记录。sql中是否有任何方法可以检索新添加的行。

我尝试使用代码来做到这一点，并试图在插入之前和之后获得差异，并且它可以完美地工作，但会使应用程序非常慢。所以，我想在数据库本身中做到这一点。

我正在使用 Mysql、ASP.NET。

eg：表可能在导入操作之前有这些记录

```
ID Name
1  A
2  B
3  C 
```

* * *

导入后表格可能是这样的。

```
ID Name
1  A
2  B
3  C
4  D
5  E
6  F 
```

* * *

我想要这样的结果

```
ID Name
4  D
5  E
6  F 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:54:53.700

您需要在表上定义[AUTO_INCREMENT](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)列，或者您可以使用`TIMESTAMP`字段来检索新添加的记录，试试这个：

```
SELECT * 
FROM table_name 
ORDER BY id DESC 
LIMIT 10; 
```

对于单行插入，您可以在查询后使用[LAST_INSERT_ID ：](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id)`INSERT`

```
SELECT LAST_INSERT_ID(); 
```

对于多行插入，您可以按照以下步骤操作：

```
START TRANSACTION;

SELECT MAX(id) INTO @var_max_id FROM table_name;

INSERT INTO table_name VALUES(..),(..),...;

SELECT MAX(id) INTO @var_max_id_new FROM table_name;

COMMIT;

SELECT * 
FROM table_name 
WHERE id BETWEEN (@var_max_id + 1) AND @var_max_id_new; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:09:28.087

如果您对记录使用自动增量 ID，您可以使用：

```
SELECT * FROM [table] ORDER BY [id column] DESC LIMIT [number of records] 
```

否则，您应该为此目的在您的记录中添加一个 TIMESTAMP 列并按此列进行选择。

就个人而言，如果有一个选项，我不会为此使用记录 ID，因为这不是它们的用途。记录 ID 可以在应用程序的整个生命周期中更改，它们不一定代表添加项目的顺序。特别是在数据导入/导出场景中。我更喜欢创建特殊的列来存储这些信息，例如“CreatedAt”、“ModifiedAt”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:18:07.910

我认为这会更简单：

```
SELECT MAX(id) INTO @Max_table_Id FROM table;

// Insert operation here//////

SELECT * FROM table WHERE id>@Max_table_Id; 
```

# osmf - IOS 中的 OSMF 播放器问题

> ID：12968132
> 
> 赞同：1
> 
> 时间：2012-10-19T05:53:08.293
> 
> 标签：osmf

我设计了一个示例 osmf 播放器应用程序。它在笔记本电脑、台式机和安卓手机上运行良好，但在 Iphone(IOS OS) 中嵌入了播放器，但不可见。也没有音频。对此有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:54:52.667

iOS 设备上没有 Flash 播放器。

# c++ - 绑定数据成员在 VS2012 中不起作用？

> ID：12968135
> 
> 赞同：0
> 
> 时间：2012-10-19T05:53:30.220
> 
> 标签：c++, c++11, visual-studio-2012

使用 std::bind 时，我能够通过传递指针或迭代器而不是对象本身来绑定 VS2010 中的数据成员。但是，它似乎不再适用于 VS2012：

```
#include <vector>
#include <utility>
#include <iostream>
#include <functional>

using namespace std;

int main()
{
    vector<pair<string, int>> v; 
    v.push_back(make_pair("abc", 10));
    auto f = bind(&pair<string, int>::second, v.begin());
    int res = f();
    cout << res << endl;
    return 0;
} 
```

( [http://ideone.com/n1KWu](http://ideone.com/n1KWu) )

GCC 也可以很好地编译和运行这段代码，但是 VS2012 给了我一个错误：

```
error C2440: 'initializing' : cannot convert from 'std::_Do_call_ret<_Forced,_Ret,_Funx,_Btuple,_Ftuple>::type' to 'int'
1>          with
1>          [
1>              _Forced=false,
1>              _Ret=void,
1>              _Funx=std::_Pmd_wrap<int std::pair<std::string,int>::* ,int,std::pair<std::string,int>>,
1>              _Btuple=std::tuple<std::_Vector_iterator<std::_Vector_val<std::_Simple_types<std::pair<std::string,int>>>>>,
1>              _Ftuple=std::tuple<>
1>          ]
1>          Expressions of type void cannot be converted to other types 
```

请注意，如果我传递一个 std::pair 实例而不是迭代器或指向它的指针，那么 VS2012 很高兴。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:27:27.517

`std::mem_fn`（和`std::bind`）根据设施规定和实施`INVOKE`，见`§20.8.10 [func.memfn] p1`

> *返回：*一个简单的调用包装器 (20.8.1) `fn`，使得表达式`fn(t, a2, ..., aN)`等价于`INVOKE(pm, t, a2, ..., aN)`(20.8.2)。

因此，这很可能是 MSVC 实现中的一个错误`INVOKE`，特别是第四个要求：

`§20.8.2 [func.require] p1`

> 定义`INVOKE(f, t1, t2, ..., tN)`如下：
> 
> *   `(t1.*f)(t2, ..., tN)`when`f`是指向类的成员函数的指针，`T`并且`t1`是类型对象`T`或对类型对象的`T`引用或对派生于的类型对象的引用`T`；
> *   `((*t1).*f)(t2, ..., tN)`when`f`是指向类的成员函数的指针，`T`并且`t1`不是上一项中描述的类型之一；
> *   `t1.*f`when`N == 1`和`f`是指向类的成员数据的指针，`T`并且`t1`是类型对象`T`或对类型对象的`T`引用或对派生于的类型对象的引用`T`；
> *   `(*t1).*f`when`N == 1`和 f 是指向类的成员数据的指针，`T` **并且`t1`不是上一项中描述的类型之一**；
> *   `f(t1, t2, ..., tN)`在所有其他情况下。

粗体部分基本上表示当`f`是成员指针（任何类型）并且`t1`不是引用时，尝试取消引用它并在此之后应用成员指针。这应该是您的代码的情况，因为迭代器不是对`T`. GCC 正确地实现了这一点。

[我建议在 MS Connect 上提交错误报告。](https://connect.microsoft.com/VisualStudio/feedback/CreateFeedbackForm.aspx?FeedbackFormConfigurationID=5303&FeedbackType=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:12:32.617

如果您检查这样的参考资料[，](http://en.cppreference.com/w/cpp/utility/functional/bind)您会看到第一个参数应该是

> 将绑定到某些参数的函数对象

换句话说，您不应该能够绑定数据成员或变量，只能绑定函数和类似函数的对象。

引用 C++11 标准（第 20.8.9 节）：

> 函数模板 bind 返回一个对象，该对象将作为参数传递的可调用对象绑定到其他参数。

# winforms - 如何以窗口形式上传文件？

> ID：12968138
> 
> 赞同：11
> 
> 时间：2012-10-19T05:53:37.303
> 
> 标签：winforms

在窗体中，如何上传文件，我没有找到任何文件上传控件。你能给我一些参考吗？我想将文档存储在我的系统驱动器中。谢谢你。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-19T06:39:07.760

您可以使用以下代码放置表单按钮并为其创建单击处理程序：

```
private void buttonGetFile_Click(object sender, EventArgs e)
{
    OpenFileDialog dialog = new OpenFileDialog();
    dialog.Filter = "Text files | *.txt"; // file types, that will be allowed to upload
    dialog.Multiselect = false; // allow/deny user to upload more than one file at a time
    if (dialog.ShowDialog() == DialogResult.OK) // if user clicked OK
    {
        String path = dialog.FileName; // get name of file
        using (StreamReader reader = new StreamReader(new FileStream(path, FileMode.Open), new UTF8Encoding())) // do anything you want, e.g. read it
        {
                // ...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T06:44:18.300

您应该使用 OpenFileDialog，这是一个链接：

[http://msdn.microsoft.com/en-us/library/aa984392%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa984392%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-19T06:05:35.087

有关原始 HTTP POST，请参阅本教程：

[http://msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

对 .NET 的 WebClient 类的引用：

[http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient(v=vs.80).aspx)

一个简单的 HTTP POST 可以这样完成：

```
string Upload_File_Content = ...;
string Url = ...;

using (var Http_Client = new WebClient()) {
  var Post_Data = new NameValueCollection();
  Post_Data["upload_file"] = Upload_File_Content;

  var Response = Http_Client.UploadValues(Url,"POST",Post_Data);
} 
```

# javascript - 如何根据某些条件在标签内动态包含行跨度和列跨度

> ID：12968145
> 
> 赞同：6
> 
> 时间：2012-10-19T05:54:23.823
> 
> 标签：javascript, html-table

我知道`<td colspan=10>`当我想合并列时可以静态包含，但是如果我需要检查一些条件并且基于此我只需要合并，那么如何做到这一点？

我的想法是这样的：

```
var span="";
if(some condition)
span="colspan=10"; 
```

然后将此变量设置`<td>`为：

```
<td +span+> 
```

但它不是那样工作的......有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T06:25:14.857

```
<table id="table" border=2>
<tr id="row1">
<td id="tableCellID">foo</td><td></td>
</tr>
<tr>
<td>foo</td><td>foo</td>
</tr>
</table>
<button onclick="button();" text="Change"/>
<script language="javascript">
var i = 0;
function button(){
var td = document.getElementById("tableCellID");

if(i==0){
td.setAttribute("colspan", 2);

i=1;
}else{
    td.setAttribute("colspan", 1);

    i=0;
}
}
</script> 
```

这就是动态设置属性 colspan 的方法。您将看到更改一个单元格的 colspan 会影响整个表格的布局。您将需要处理行中的每个单元格。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T06:02:02.887

```
var span='';
var table='';

if(some condition)
  span="colspan=10";

var table="<tr><td"+span+"></td></tr>": 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T06:00:55.553

一种方法是，如果您能够`id`在您的`td`

`<td id="foo">`

在你的javascript中，你可以添加这样的属性，

`document.getElementById("foo").colSpan="10";`

# html - 根据 div 对齐我的内容

> ID：12968152
> 
> 赞同：0
> 
> 时间：2012-10-19T05:55:22.967
> 
> 标签：html, css

我有四列带有差异 div，第四列是悬停。在输入栏出现之前，您必须将鼠标悬停在第四列上。我的问题是，由于第四列被隐藏，第一列的数据进入第四列。帮我解决这个问题。这是我的代码：http: [//jsfiddle.net/kerokeroppi/DYvCz/](http://jsfiddle.net/kerokeroppi/DYvCz/)

```
.branch_class {
    float:left;
    width:150px;
    padding:0 5px;
    margin-top:10px;
    font-size:12px;
    font-family:"Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
    color:#666;
       }

.branchid_class {
    float:left;
    width:150px;
    padding:0 5px;
    margin-top:10px;
    font-size:12px;
    font-family:"Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
    color:#666;
    }

.balance_class {
    float:left;
    width:100px;
    padding:0 5px;
    margin-top:10px;
    font-size:12px;
    font-family:"Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
    color:#666; 
              }

.amount_class {
    float:left;
    width:150px;
    padding:0 5px;
    margin-top:10px;
    font-size:12px;
    font-family:"Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif;
    color:#666;
              } 
```

和

```
 <div class="branch_class" style="margin-left:10px;">Branch Name</div>
     <div class="branchid_class" style="margin-left:0px;">Branch ID</div>
     <div class="balance_class" style="margin-left:20px;">Balance </div>
     <div class="amount_class" style="margin-left:13px;">Amount</div>
     <form id="topupform-b1" action="" onSubmit="return false">
     <div id="divamount" >
         <div id="branchname" class="branch_class" style="margin-left:7px;">Mail and More-Hermosa</div>
         <div id="branchid" class="branchid_class" style="margin-left:2px;">234</div>
         <div id="balance" class="balance_class" style="margin-left:19px;">234.289</div>
         <input type="string" name="amount" id="amount" style="margin-top:7px; margin-left:15px; background:#FFF;" />
     </div> 
```

图片：![悬停页面时就像这张图片](../Images/9b756b23ecc8e00549d91302a4435b95.png)

![如果不悬停，就完全搞砸了。](../Images/843f41dcade43db115719c09ddb80fd6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:21:18.057

看起来您正在使用 jQuery .hide() 方法。hide() 和 show() 方法修改 css 显示属性。

.hide 或`display:none;`, 隐藏元素在隐藏时不占用任何空间。您想要的是`visibility:hidden;`隐藏一个元素，但该元素仍将占用与隐藏之前相同的空间。

如果你想用 jQuery 做到这一点，试试这个：

```
$(selector).css('visibility', 'hidden');
$(selector).css('visibility', 'visible'); 
```

# javascript - 在 node.js 中覆盖其他模块中的函数

> ID：12968153
> 
> 赞同：3
> 
> 时间：2012-10-19T05:55:24.543
> 
> 标签：javascript, node.js, stub, stubbing, nodeunit

我正在尝试在 Node.js 应用程序中使用 nodeunit 存根函数。这是我正在尝试做的简化版本：

在`lib/file.js`：

```
var request = require('request');

var myFunc = function(input, callback){
    request(input, function(err, body){
        callback(body);
    });
}; 
```

在`test/test.file.js`：

```
var file = require('../lib/file');

exports['test myFunc'] = function (test) {
    request = function(options, callback){
        callback('testbody');
    };

    file.myFunc('something', function(err, body){
        test.equal(body, 'testbody');
        test.done();
    });
}; 
```

似乎我没有`request`正确覆盖，因为当我尝试运行测试时，实际的非存根`request`被调用，但我无法弄清楚正确的方法是什么。

编辑：

用我上面的例子来扩展下面的 Ilya 的答案。

在`lib/file/js`：

```
module.exports = function(requestParam){
    return {
        myFunc: function(input, callback){
            requestParam(input, function(err, body){
                callback(body);
            });
        }
    }
} 
```

然后在`test/test.file.js`：

```
var fakeRequestFunc = function(input, callback){
// fake request function
}

var file = require('../lib/file')(fakeRequestFunc)(
//test stuff
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T06:04:38.013

正如您所注意到的，在一个模块中声明的变量不能轻易地从另一个模块访问。在这种情况下，您有两种常见的变体：

1）在每个模块中声明你需要的一切（不是你的情况，我想）

2) 将参数传递给函数

```
var ab = "foo",
index = require('/routes/index')(ab); 
```

当您从模块调用函数时，您可以将“请求”或您需要的任何其他变量或对象传递给它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T10:45:29.590

我遇到了类似的问题。在探索`request`了模块代码之后，我的解决方案正在使用`request.get`而不是`request`在我的代码中（完全一样）。然后像这样在测试中存根：[https ://github.com/anatoliychakkaev/resizer-app/blob/master/test/resizer.js#L25](https://github.com/anatoliychakkaev/resizer-app/blob/master/test/resizer.js#L25)

也可以在 nodejs 中存根 'require' 方法的结果。检查 lib/module.js 上的源代码以管理如何执行此操作。它应该是这样的：

```
require('module')._cache['/path/to/request.js'] = your_stub 
```

但我不喜欢这个解决方案，因为它不能在 100% 的情况下工作，并且可能会在节点的未来版本中停止工作（这不是公共 api），所以只有在不可能的情况下才应该使用这种方式使用其他的存根方法。

# android - 屏幕宽度和高度 Android

> ID：12968154
> 
> 赞同：0
> 
> 时间：2012-10-19T05:55:33.617
> 
> 标签：android, android-layout

要设置什么 minimum-sdk 和 target-sdk 以便我们可以检查 android 版本并根据 android 的版本使用`getSizez()`or 或`getWidth()`and `getHeight()`。我目前的最小 sdk 是`8`，目标是`13`.

我目前正在做的是

```
 Display display=getWindowManager().getDefaultDisplay();

    if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.GINGERBREAD) 
    {
        width=display.getWidth();
        height=display.getHeight();
        // only for android older than gingerbread
    }
    else
    {
        display.getSize(point);
        width=point.x;
        height=point.y;
        Log.I("Width",Integer.toString(width));
        Log.I("Height",Integer.toString(height));
    } 
```

但它在 display.getSize(point) 上给出错误它给出的错误是

```
The method getSize(Point) is undefined for the type Display.. 
```

任何形式的帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:04:54.233

在 developer.android.com 网站上查看时，它说 display.getSize(point) 仅对 android 版本 13 及更高版本有效，因此我将更改您的初始 if 语句

如果（Build.VERSION.SDK_INT <= Build.VERSION_CODES.GINGERBREAD）

至

如果（Build.VERSION.SDK_INT < 13）

# search - Solr - 精确和词干搜索具有高亮显示的相同文本

> ID：12968166
> 
> 赞同：0
> 
> 时间：2012-10-19T05:56:50.283
> 
> 标签：search, solr, lucene, edismax

我正在尝试对文本执行精确和词干搜索并返回“编译”结果。

目前我所拥有的：在词干字段中存储了文本，并将其复制到引用字段中。词干查询和精确查询适用于各自的字段。当我搜索时（问题只有和）

`"word1 word2" and/or word3`

这给了我查询

`stemmed:word3 &/or quote:"word1 word2`

我得到的是分别来自这两个领域的结果。使用 or，这很好，但是使用 and，我会为相同的文本返回两个或更多结果，并且每个结果都有不同的突出显示。

问题是：对同一文本（猜测多个字段）进行词干/精确搜索的最佳方法是什么，如果我有正确的方法，合并这些的最佳方法是什么，如果 solr 可以做到？

谢谢！！编辑：我检查了 edismax 但看不到如何正确使用它。我的结果在答案的评论中暗示它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:16:25.700

请检查[Edismax 查询解析器](http://lucidworks.lucidimagination.com/display/solr/The+Extended+DisMax+Query+Parser)，它允许您定义字段并使用变量 boost 在所有字段上搜索文本。

# php - 在android中测试gcm推送通知

> ID：12968168
> 
> 赞同：1
> 
> 时间：2012-10-19T05:56:56.017
> 
> 标签：php, android, cordova, phonegap-plugins, google-cloud-messaging

我为 GCM 使用了[mark nutter phonegap 插件](https://github.com/marknutter/GCM-Cordova)，并成功从服务器获取了注册 ID

这是我使用的 php 脚本

```
 <?php
           // Replace with real server API key from Google APIs  
            $apiKey = "AIzaSyC7wzEjjMaOGLYp8_w3USftv_3lI-qCdZ4";    

              // Replace with real client registration IDs
           $registrationIDs = array( "APA91bFt3slFE96jaB5qnoD5gR0TCwsxe5StEGyrECR0umYviG0cfG1JNnFxYqP1ERr1RoWc38rsuWjRUx5SZ7cgUNG9-mQ4mSsY8_XQLquft5DLnqWcLCEB2wtQpfA6EAp5OQmOWzpUZU5bohfG4sfLWNUco7XxXg");

          // Message to be sent
         $message = "hi SOurabh";

         // Set POST variables
        $url = 'https://android.googleapis.com/gcm/send';

       $fields = array(
       'registration_ids' => $registrationIDs,
         'data' => array( "message" => $message ),
        );
     $headers = array(
      'Authorization: key=' . $apiKey,
     'Content-Type: application/json'
      );

     // Open connection
          $ch = curl_init();

        // Set the url, number of POST vars, POST data
        curl_setopt( $ch, CURLOPT_URL, $url );
        curl_setopt( $ch, CURLOPT_POST, true );
        curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
            curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
        //curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

         curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
     //     curl_setopt($ch, CURLOPT_POST, true);
       //     curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode( $fields ));

            // Execute post
         $result = curl_exec($ch);

        // Close connection
           curl_close($ch);
         echo $result;
          //print_r($result);
           //var_dump($result);
       ?> 
```

我对 php 了解不多，我使用 thi 只是为了测试通知

当我运行它时，我收到以下消息

```
{"multicast_id":9187695352946100598,"success":0,"failure":1,"canonical_ids":0,"results":[{"error":"MismatchSenderId"}]} 
```

知道为什么我会得到这个吗？或任何其他方式来测试应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:16:06.377

您在项目中使用的项目 ID 是否与谷歌控制台上显示的 ID 匹配？

> [https://code.google.com/apis/console/#project](https://code.google.com/apis/console/#project) :?????

API 密钥是否属于谷歌 GCM 页面上的“服务器应用程序”？您的手机还必须有一个有效的注册 google 帐户才能接收通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T09:37:46.837

我开始使用您的 php 脚本在我的应用程序上调试推送通知。我第一次收到同样的错误。在客户端应用程序中更新`SENDER_ID`Google API 控制台应用程序的值修复了问题 - 消息已成功传递。`Project ID``Android`

# c# - 使用互操作格式化Excel工作表中的单元格

> ID：12968169
> 
> 赞同：0
> 
> 时间：2012-10-19T05:57:05.230
> 
> 标签：c#, excel

我需要使用 c# 语言为自动颜色的 excel 单元格添加边框。下面给出的是我使用的编码。但它不会为单元格添加任何边框。你能告诉我我在这里做错了什么吗：

当我尝试为单元格指定边框样式时，我没有获得任何边框设计功能：![在此处输入图像描述](../Images/95c482d0159a6265c7d8adf83b15e600.png)

```
 Excel.Application xlApp;
            Excel.Workbook xlWorkBook;
            Excel.Worksheet xlWorkSheet;
            object misValue = System.Reflection.Missing.Value;
            xlApp = new Excel.Application();
            xlApp.Visible = false;
            xlWorkBook = xlApp.Workbooks.Open(textBox1.Text, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue, misValue);
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

            int i = 0;
            int j = 0;

            for (i = 0; i <= dataGridView1.RowCount - 1; i++)
            {
                for (j = 0; j <= dataGridView1.ColumnCount - 1; j++)
                {
                    DataGridViewCell cell = dataGridView1[j, i];
                    xlWorkSheet.Cells["19", "I"] = "Availablility";                         
                    xlWorkSheet.Cells[i + 20, j + 9] = cell.Value;                                                               
                    xlWorkSheet.Cells.BorderAround(Excel.XlLineStyle.xlContinuous, Excel.XlBorderWeight.xlMedium, Excel.XlColorIndex.xlColorIndexAutomatic, Excel.XlColorIndex.xlColorIndexAutomatic);
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:36:54.550

> 试试这个。不发布整个代码
> 
> ```
> Excel.Worksheet oSheet;
> Excel.Range oRange;
> oRange = oSheet.get_Range("Q3", "Q40"); 
> ```
> 
> oRange.Font.Color=System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.Green);
> oRange.Cells.Borders.Color=System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.Green);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:55:19.693

我认为您需要先选择单元格。以下代码适用于我：

```
using Excel = Microsoft.Office.Interop.Excel;

namespace ExcelInteropDemo
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Excel.Application excel = new Excel.Application();
            excel.Workbooks.Add();
            excel.Visible = true;
            excel.ActiveWorkbook.ActiveSheet.Range("a1").EntireRow.Select();
            excel.Selection.BorderAround(Excel.XlLineStyle.xlContinuous, Excel.XlBorderWeight.xlMedium, 
                Excel.XlColorIndex.xlColorIndexAutomatic, 
                System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.FromArgb(79, 129, 189)));
        }
    }
} 
```

**2012-10-23 更新**：在评论中进行了一些讨论并更新了原始帖子后，问题变成了 IntelliSense，而不是 Excel 互操作的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T10:52:14.447

如果您只是想在您创建的表格周围放置一个边框，一旦您构建了整个表格，请尝试：

```
xlWorksheet.Cells ["19", "I"].CurrentRegion.BorderAround(xlContinuous, xlMedium, xlColorIndexAutomatic); 
```

您的代码当前正在尝试在整个工作表周围放置边框

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-13T04:27:44.843

由于您只需要添加边框，因此请尝试以下代码。这个对我有用。

```
 private void AllBorders(Excel.Borders borders)
    {
           borders.Color = System.Drawing.Color.Black;            
    }

//Call the function now. 

AllBorders(activeWorkSheet.get_Range(Cell1: "A1",  Cell2: "lastcellname").Cells.Borders); 
```

如果您只想设置边框 LEFT/RIGHT/TOP/Bottom，请使用以下代码。

```
borders[Excel.XlBordersIndex.xlEdgeRight].Weight = Excel.XlBorderWeight.xlMedium;            
            borders[Excel.XlBordersIndex.xlEdgeRight].Color = System.Drawing.Color.Black; 
```

根据您的要求设置边缘我仅使用“xlEdgeRight”为右侧启用了边框

# javascript - 列表后的 HTML5 内容可编辑段落

> ID：12968170
> 
> 赞同：7
> 
> 时间：2012-10-19T05:57:12.107
> 
> 标签：javascript, jquery, wysiwyg, contenteditable, html-editor

我使用谷歌浏览器。

我需要一个非常小的 HTML 编辑器，然后我找到了[Simple Edit](https://github.com/mlabod/simple-edit)。非常小的编辑器，只是为了满足我的需要。但是... 这个和许多其他使用 Content Editable 的编辑器都有一个常见问题。

**问题**

创建列表后（在最后一个列表项上按两次 Enter），它会创建一个新的 div。对我来说期望的是创建一个新的段落标签。

**链接**

*   **在这里尝试编辑器：http:** [//files.inlovewithcss.com/simple-edit/](http://files.inlovewithcss.com/simple-edit/)
*   **查看微小的源代码：** [https ://github.com/mlabod/simple-edit/blob/master/editor.jquery.js](https://github.com/mlabod/simple-edit/blob/master/editor.jquery.js)

**问题**

防止div的正确方法是什么，而不是在列表后添加段落标签？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T20:52:44.403

Bryan Allo 发布的答案没有考虑到您需要将光标放在 div 的末尾。否则，在每次替换操作时，用户都必须按 CTRL-End。

[这是我提出的解决方案，也可以在http://jsfiddle.net/82dS6/](http://jsfiddle.net/82dS6/)上看到：

```
function setEndOfContenteditable(contentEditableElement){
    // Taken from http://stackoverflow.com/a/3866442/1601088
    var range,selection;
    if(document.createRange){//Firefox, Chrome, Opera, Safari, IE 9+
        range = document.createRange();
        range.selectNodeContents(contentEditableElement);
        range.collapse(false);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
    }
    else if(document.selection){//IE 8 and lower
        range = document.body.createTextRange();
        range.moveToElementText(contentEditableElement);
        range.collapse(false);
        range.select();
    }
}

function replaceDivWithP(el){

    $(el).find('div').each(function(){
        $(this).replaceWith($('<p>' + $(this).html() + '</p>'));
    });
}

$(function(){
    $(".text").simpleEdit();
});

$('.textarea').bind('keyup', function(){
    replaceDivWithP(this);
    setEndOfContenteditable(this);
});

​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T19:45:29.953

`keyup`您可以考虑后处理，而不是对每个事件进行即时处理：

```
$('.textarea').bind('blur', function(){
    $('.textarea div').contents().unwrap().wrap('<p/>');
}); 
```

小提琴：http: [//jsfiddle.net/thNUS/4/](http://jsfiddle.net/thNUS/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T19:35:28.817

一个快速的解决方案是简单地用 Ps 替换任何 DIV。将其放在您的内容可编辑 DIV 中。

```
onkeyup="this.innerHTML=this.innerHTML.replace('div','p')" 
```

希望能帮助到你。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T20:41:34.723

我能想出的最好办法是使用有[兼容性**问题的格式**](http://www.quirksmode.org/dom/execCommand.html#t012)块。基本上你可以像这样添加另一个链接：

```
textcontainer.prepend("<button class='paragraph'>p</button>"); 
```

...

```
$(".paragraph").live("click", function(){
    document.execCommand('formatblock', false, "p");
}); 
```

这使您的用户可以选择插入段落标签。不过，摆脱该标签有点棘手，因此它也存在一些可用性问题。您可以在提供的演示中使用它：

**演示**： http: [//jsbin.com/ovexiz/1](http://jsbin.com/ovexiz/1)
**来源**：http : [//jsbin.com/ovexiz/1/edit](http://jsbin.com/ovexiz/1/edit)

*请注意，段落的样式为绿色文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T22:01:33.483

以前的答案提出了一个基于`keyup`或`blur`的解决方案。这个使用`click`列表按钮的事件来最小化函数调用的数量：

[http://jsfiddle.net/9ZAL7/](http://jsfiddle.net/9ZAL7/)：

```
function replaceDivWithP(el){

    $(el).find('div').each(function(){
        $(this).replaceWith($('<p>' + $(this).html() + '</p>'));
    });
}

$(function(){
    $(".text").simpleEdit();
});

$('button.list').bind('click', function(){
    replaceDivWithP($('.textarea'));
});
​ 
```

# opengl - 删除现有着色器或程序（或获取其 ID 以执行此操作）

> ID：12968171
> 
> 赞同：0
> 
> 时间：2012-10-19T05:57:20.343
> 
> 标签：opengl, shader

我有一个编译的着色器或程序（不确定正确的术语），我需要删除它。

我如何找到已编译程序和/或着色器的 ID 来执行此操作？

我知道它存在是因为调试器告诉我我正在尝试重新定义它，因此无法再次编译它：

```
ERROR: 0:1: error(#198) Redefinition at_coord_Y
ERROR: 1:1: error(#248) Function already has a body main 
```

着色器源代码的第一行是：

```
"in float at_coord_Y;" 
```

我可以以某种方式使用它来查找 ID 吗？

编辑1：希望澄清一下，着色器无法编译，因为它已经存在。

```
 GLint compiled = UNDEFINED_VALUE;

    const GLchar* shaderSrc[] = {
        "in float at_coord_Y;",
        "void main()",
        "{",
              // Dont mind the empty space
        "}"
    };

    GLuint shaderId = glCreateShader(GL_VERTEX_SHADER);

    glShaderSource(shaderId, glNumberOfLines(shaderSrc), shaderSrc, NULL);

    glCompileShader(shaderId);  // Fail to compile because it already exists. Redefinition error.

    glGetShaderiv(shaderId), GL_COMPILE_STATUS, &compiled); // Compile status GL_FALSE 
```

但是如何找到现有着色器（或程序）的 ID？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T07:01:53.550

你完全误解了这个错误。OpenGL 并不是说​​已经定义了*着色器对象*（你得到的）。`glCreateShader`这是说你的*着色器文本*（你传递的内容`glShaderSource`）有问题。

您的着色器加载存在许多问题。我不知道你从哪里得到这个加载代码，但我强烈建议你避开那个地方。

[`glShaderSource`](http://www.opengl.org/wiki/GLAPI/glShaderSource)需要多个字符串，是的。但这*并不*意味着您将每一行都放入一个单独的字符串中。它应该用于“标题”等。这意味着编译器将在编译它们时将所有*字符串*连接在一起。

一般来说，除非您使用额外的字符串作为标题作为主着色器的前缀，否则只需传递*一个字符串*的数组。拯救自己的痛苦。

另外，您没有[使用`#version`指令](http://www.opengl.org/wiki/GLSL_Core_Language#Version)。如果不指定版本，您将被迫使用 GLSL 1.10。而在 GLSL 1.10 中，`in float at_coord_Y;`这不是一个法律定义。

# iphone - 提交按钮文本不以 iPhone 为中心？

> ID：12968172
> 
> 赞同：0
> 
> 时间：2012-10-19T05:57:23.987
> 
> 标签：iphone, css

我在我们公司的网站上遇到了一个小问题。出于某种原因，提交按钮中的文本没有以 iPhone 为中心。

网址： http: [//visioncreativegroup.com.au/](http://visioncreativegroup.com.au/) 截图： ![在此处输入图像描述](../Images/dd10d219da29c14041c91ec2f0f5ff52.png)

以前有人经历过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:35:04.480

也许这段代码有帮助：

```
yourButton.titleLabel.textAlignment = UITextAlignmentCenter; 
```

试试看！

也可能是文本大于按钮的东西

# php - php从excel单元格范围生成图像

> ID：12968173
> 
> 赞同：-1
> 
> 时间：2012-10-19T05:57:26.843
> 
> 标签：php, excel

我有一张excel表格。它的单元格可以包含数据和图形。我需要从固定范围（例如：A1 到 K19）之间的单元格生成图像。

我用 ASP.NET 找到了一个解决这个问题的方法：[Microsoft.Office.Interop.Excel](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel%28v=office.11%29.aspx)。它提供方法[Range.CopyPicture()](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.copypicture.aspx)和[Chart.Paste()](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._worksheet.paste.aspx)。我需要使用 PHP 来实现它。任何解决方案、建议或方向将不胜感激。

对于范围 A1 到 B2，图像可以是： ![A1:B2](../Images/c7cdd51cc04c2e1cbbb881f51700dac9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:26:25.520

我建议您查看[PHPExcel](http://phpexcel.codeplex.com/)。它可以读取xls和xlsx文件；阅读它们后，您可以像以前一样从文本中创建图像。

# android - Google Play 节目 - 您的设备与三星 Galaxy tab 2 和 Google Nexus 7 的此版本不兼容

> ID：12968183
> 
> 赞同：4
> 
> 时间：2012-10-19T05:58:08.827
> 
> 标签：android, android-manifest, android-market-filtering

当我将我的应用程序发布到 Google Play 商店并尝试在我的 Google Nexus 7 上下载它时，我收到消息“您的设备与此版本不兼容”。

我的清单文件是这样声明的：-

```
<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CAMERA" />

<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:icon="@drawable/ic_icon"
    android:label="@string/app_name"
    android:theme="@style/ApplicationTheme" >
    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".SplashScreenActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".HomeActivity"
        android:launchMode="singleTop"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name=".MyFormsTabActivity"
        android:screenOrientation="portrait" >
    </activity>      
</application> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T09:01:46.427

这就是问题 ：

```
<uses-permission android:name="android.permission.CAMERA" /> 
```

这意味着使用不同于N7的*前置摄像头的摄像头功能。*使相机功能明确且可选。详情：http: [//developer.android.com/guide/google/play/filters.html](http://developer.android.com/guide/google/play/filters.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:03:47.737

知道了..！！

[http://developer.android.com/guide/google/play/filters.html](http://developer.android.com/guide/google/play/filters.html)

如果您指定了属性，那么android 权限通常不会用作过滤器。在上述情况下，我已经声明了 CAMERA 权限，但 Google Nexus 7 没有摄像头（只有前置摄像头）。因此 Google Play 过滤掉了该设备。

所以为了解决这个问题，最好的做法是，

** 如果在我们的应用程序清单中我们已请求使用任何硬件功能的权限，那么我们还应该使用 android:required="false" 声明使用该功能的属性。**

# spring - 如何使 JobDetailBean 非并发运行？

> ID：12968185
> 
> 赞同：2
> 
> 时间：2012-10-19T05:58:17.147
> 
> 标签：spring, quartz-scheduler

我正在使用 Quartz Scheduler 运行一些预定的作业。我的应用程序中的所有作业都是**JobDetailBean**作业。

我知道使用 MethodInvokingJobDetailFactoryBean，我们可以像这样使作业非并发：

```
<property name="concurrent"><value>false</value></property> 
```

我想知道我们如何使 JobDetailBean 作业非并发。**JobDetailBean**作业默认同时运行。

要求是：jobA 需要每 5 分钟运行一次，但前提是它的前一个实例已完成。

谢谢，

希哈

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T08:17:11.440

您的作业类需要实现[`StatefulJob`](http://quartz-scheduler.org/api/1.8.5/org/quartz/StatefulJob.html)，或者，如果您使用的是 Quartz 2.x，则使用[`@DisallowConcurrentExecution`](http://quartz-scheduler.org/api/2.0.0/org/quartz/DisallowConcurrentExecution.html).

这就是在 Quartz 中控制并发执行的方式，特别`MethodInvokingJobDetailFactoryBean`是根据`concurrent`.

# windows-services - 通过 Windows 服务对 BigQuery 进行身份验证的步骤

> ID：12968188
> 
> 赞同：1
> 
> 时间：2012-10-19T05:58:29.400
> 
> 标签：windows-services, google-api, google-bigquery

我在 Big Query 和 API 访问窗格中创建了一个项目，我创建了服务帐户，以便我可以代表用户交互通过 Windows 应用程序访问 Big Query API。由于我是使用和访问 Google API 的新手，因此我想知道基本步骤，以便我可以通过 Windows 服务访问 Big Query。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T23:40:37.550

这里有一些使用基于 Web 的 OAuth 流的 .NET 代码示例： [Google BigQuery with .NET documentation/samples](https://stackoverflow.com/questions/12443878/google-bigquery-with-net-documentation-samples)

有关在 .NET 中使用服务帐户的另一个开发人员的示例，请参见： [Google OAuth2 服务帐户访问令牌请求给出“无效请求”响应](https://stackoverflow.com/questions/11939026/google-oauth2-service-account-access-token-request-gives-invalid-request-respo)

这些在 .NET 库之上手动实现服务帐户。.NET 库最近添加了对服务帐户的本机支持，但我还没有找到官方示例。

这是一个使用 Analytics API 的非官方示例。它应该直接类似于在 BigQuery 中使用服务帐户： [如何使用服务帐户通过 .NET C# 访问 Google Analytics API V3？](https://stackoverflow.com/questions/12980215/how-do-i-use-a-service-account-to-access-the-google-analytics-api-v3-with-net-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:23:08.803

最后，这是 Big Query API 的身份验证过程和从 Big Query 表中检索记录的工作代码：-

我创建了一个具有返回类型方法的类`OAuth2Authenticator<AssertionFlowClient>`。

```
 internal class clsGetOAuth2Authentication
    {
        public OAuth2Authenticator<AssertionFlowClient> objGetOAuth2(string strPrivateFilePath, string strPrivateFilePassword, string strServiceAccEmailId,string strScope)
        {
            AuthorizationServerDescription objAuthServerDesc;
            X509Certificate2 objKey;
            AssertionFlowClient objClient;
            OAuth2Authenticator<AssertionFlowClient> objAuth = null;

            string ScopeUrl = "https://www.googleapis.com/auth/" + strScope;
            string strSrvAccEmailId = strServiceAccEmailId; 
            string strKeyFile = strPrivateFilePath; //KeyFile: This is the physical path to the key file you downloaded when you created your Service Account.
            string strKeyPassword = (strPrivateFilePassword != "") ? strPrivateFilePassword : "notasecret"; //key_pass: This is probably the password for all key files, but if you're given a different one, use that.

            objAuthServerDesc = GoogleAuthenticationServer.Description; //objAuthServerDesc: Description of the server that will grant Authentiation. 
            objKey = new X509Certificate2(strKeyFile, strKeyPassword, X509KeyStorageFlags.Exportable); //objkey: Load up and decrypt the key.
            objClient = new AssertionFlowClient(objAuthServerDesc, objKey) { ServiceAccountId = strSrvAccEmailId, Scope = ScopeUrl }; //objClient: Using the AssertionFlowClient, because we're logging in with our certificate.
            objAuth = new OAuth2Authenticator<AssertionFlowClient>(objClient, AssertionFlowClient.GetState); //objAuth: Requesting Authentication.
            return objAuth;
        }
    } 
```

现在，另一个类调用上述方法：-

```
clsGetOAuth2Authentication objOAuth2 = new clsGetOAuth2Authentication();
            try
            {
                var objAuth = objOAuth2.objGetOAuth2(strKeyFile, strKeyPassword, strSrvAccEmailId, strScope); //Authentication data returned
                objBQServ = new BigqueryService(objAuth); //Instantiate BigQueryService  with credentials(objAuth) as its parameter

                #region Retrieving Records:-
                JobsResource j = objBQServ.Jobs;
                QueryRequest qr = new QueryRequest();
                qr.Query = strQuery;

                DateTime dtmBegin = DateTime.UtcNow;
                QueryResponse response = j.Query(qr, strProjId).Fetch();
                DateTime dtmEnd = DateTime.UtcNow;
                string strColHead = "";
                foreach (var colHeaders in response.Schema.Fields)
                {
                    strColHead += colHeaders.Name.ToString() + "\t";
                }
                Console.WriteLine(strColHead);
                int intCount = 0;
                foreach (TableRow row in response.Rows)
                {
                    intCount += 1;
                    List<string> list = new List<string>();
                    foreach (var field in row.F)
                    {
                        list.Add(field.V);
                    }
                    Console.WriteLine(String.Join("\t", list));
                }
                TimeSpan tsElapsed = dtmEnd - dtmBegin;
                Console.WriteLine("\n" + "Total no. of records:- " + intCount + ". Time taken:- " + tsElapsed);
                #endregion

            }
            catch (Exception ex)
            {
                Console.WriteLine("Error Occured!" + "\n\n" + "Statement:- " + ex.Message.ToString() + "\n\n" + "Description:- " + ex.ToString() + "\n\n");
                Console.WriteLine("\nPress enter to exit");
                Console.ReadLine();
            } 
```

# iphone - 如何在 iPhone 设备中发送消息？

> ID：12968195
> 
> 赞同：1
> 
> 时间：2012-10-19T05:59:06.040
> 
> 标签：iphone, ios, send, mfmessagecomposeview

目前我在 iPhone 应用程序中工作，使用 MFMessageComposeViewController 开发这个应用程序并且它工作正常。

![在此处输入图像描述](../Images/7f42a020241ed74d432635150b3dd6bd.png)

但我想，消息撰写屏幕不显示在屏幕上，然后消息以编程方式发送，如何做到这一点？有可能的？请帮我

我试过这个：

```
MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc] init] autorelease];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = @"Hi"; 
        controller.recipients = [NSArray arrayWithObjects:@"12345678", @"87654321", nil];
        controller.messageComposeDelegate = self;
        [self presentModalViewController:controller animated:YES];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:13:30.650

在用户不知道的情况下，您不能使用消息框架发送消息。一种常见的解决方案是将消息详细信息发送到服务器上运行的 Web 服务，然后从服务器发送消息。只要你不想偷偷摸摸，我认为这样做没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:04:34.450

我试过这样做一次，但它不会被应用商店接受。Apple 不会让您在用户不知情的情况下发送消息/电子邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T06:06:44.623

您可以使用 sms:[target phone number] URL 来打开 SMS 应用程序，但没有说明如何使用文本预填充 SMS 正文（请参阅Apple 开发者论坛上[的这篇文章）。](https://daw.apple.com/cgi-bin/WebObjects/DSAuthWeb.woa/wa/login?appIdKey=4a75046cda87eab6386a9eae8caabb9824e328b9abc988119b39296495ec184c&path=/login.jspa)

# web-services - SOAP 必须是有状态的吗？

> ID：12968196
> 
> 赞同：2
> 
> 时间：2012-10-19T05:59:13.800
> 
> 标签：web-services, rest, soap

REST 显然是无状态的，这意味着对服务器的请求包含服务器理解它所需的所有信息，服务器不维护会话。

现在我的问题是，SOAP 是否必须是有状态的，我使用过 SOAP，REST 的确切定义似乎也适用于 SOAP？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:49:58.720

> 现在我的问题是 SOAP 是否必须是状态完整的..

不。SOAP*可以*是有状态的，但它绝对不是必须的。实际上，您必须付出一些努力才能实现有状态的行为。我建议阅读[这篇文章](http://edn.embarcadero.com/article/40558)。

# jquery - 将 Jqgrid 导出到 excel 在 jsp 中不起作用

> ID：12968199
> 
> 赞同：1
> 
> 时间：2012-10-19T05:59:16.210
> 
> 标签：jquery, json, excel, jsp, jqgrid

大家好！！我有一个显示记录的 jqgrid。现在根据我的要求，我必须将其导出为 excel 格式。我正在尝试这样做，但它没有发生任何事情。导出到 excel 按钮不起作用。我在这里发布我的代码...

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>JQgrid</title>
<img src="images/header.png" alt="Logo" height="130" width="1270"/>
<hr noshade size="3" align="left">
<script language="javaScript"
type="text/javascript" src="calender.js"></script>
<link href="calender.css" rel="stylesheet" type="text/css">
<link href="css/jquery-ui-1.8.16.custom.css" rel="stylesheet" type="text/css" />
<link href="css/ui.jqgrid.css" rel="stylesheet" type="text/css" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<link href="plugins/ui.multiselect.css" rel="stylesheet" type="text/css" />
<script src="js/jquery-1.5.2.min.js" type="text/javascript"></script>
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery-ui-custom.min.js" type="text/javascript"></script>
<script src="plugins/ui.multiselect.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>
<script src="js/custom.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function() {
        //var windowWidth = (document.documentElement.clientWidth - 100) /0.9;
        var i=1;
        $('#go').click(function(evt){
            //alert('hi');
            evt.preventDefault();
            var todate=$('#todate').val();
            var fromdate=$('#todate').val();
            if(todate && fromdate)
            {

                var URL='getGriddahico.jsp?todate='+$('#todate').val()+'&fromdate='+$('#fromdate').val();

                //jQuery("#gridUsuarios").jqGrid('reload');
                if(i==1){gridcall(URL);}
                else{jQuery("#gridUsuarios").jqGrid('GridUnload');gridcall(URL);}
                i++;

            }

        });

    });

    function gridcall(path)
    {
        jQuery("#gridUsuarios").jqGrid({
            url:path,
            datatype: "json",
            colNames:['ID','Call Date','src','dst','dstchannel','Lastapp','Duration','Disposition','Amaflags','cdrcost'],
            colModel:[
                {name:'id',index:'id', width:90,align: 'center',editable:true, hidden:true,closed:true},
                {name:'calldate',index:'calldate',editable:false, width:170,align: 'center'},
                {name:'src',index:'src',editable:false, width:170,align: 'center'},
                {name:'dst',index:'dst',editable:false, width:170,align: 'center'},    
                {name:'dstchannel',index:'dstchannel',editable:false, width:170,align: 'center'}, 
                {name:'Lastapp',index:'lastapp',editable:false, width:170,align: 'center'}, 
                {name:'duration',index:'duration',editable:false, width:170,align: 'center'}, 

                {name:'disposition',index:'disposition',editable:false, width:170,align: 'center'}, 

                {name:'amaflags',index:'amaflags',editable:false, width:170,align: 'center'}, 
                {name:'cdrcost',index:'cdrcost',editable:false, width:170,align: 'center'},
            ],
            rowNum:50,
            rowList:[50,100,150],
            scrollrows : true,
            // multiselect: true,
            pager: '#pagGrid',
            sortname: 'id',
            viewrecords: true,
            sortorder: "asc",
            autowidth:true,
            //width: windowWidth,
            height:360, 
            editurl:'edit.jsp'

        });
        $("#gridUsuarios").jqGrid('navGrid', '#pagGrid',{excel:true})
        .navButtonAdd('#pagGrid',{
            caption:"Export to Excel", 
            buttonicon:"ui-icon-save", 
            onClickButton: function(){ 
                exportExcel();
            }, 
            position:"last"
        });

        function exportExcel()
        {
            var mya=new Array();
            mya=$("#gridUsuarios").getDataIDs();  // Get All IDs
            var data=$("#gridUsuarios").getRowData(mya[0]);     // Get First row to get the labels
            var colNames=new Array(); 
            var ii=0;
            for (var i in data){colNames[ii++]=i;}    // capture col names
            var html="";
            for(i=0;i<mya.length;i++)
            {
                data=$("#gridUsuarios").getRowData(mya[i]); // get each row
                for(j=0;j<colNames.length;j++)
                {
                    html=html+data[colNames[j]]+"\t"; // output each column as tab delimited
                }
                html=html+"\n";  // output each row with end of line

            }
            html=html+"\n";  // end of line at the end
            document.forms[0].csvBuffer.value=html;
            document.forms[0].method='POST';
            document.forms[0].action='csvExport.jsp';  // send it to server which will open this contents in excel file
            document.forms[0].target='_blank';
            document.forms[0].submit();
        }

        jQuery("#gridUsuarios").jqGrid('bindKeys', {"onEnter":function( rowid ) { alert("You enter a row with id:"+rowid)} } );  
    }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:16:41.703

我在您的解决方案中看到了一些设计问题。我将尝试描述您的工作：

1.  您已将数据保存在服务器上。可能您将数据保存在数据库中。
2.  您使用每个 Ajax 请求从服务器返回的数据填充 jqGrid。
3.  如果用户单击“导出到 Excel”按钮，您尝试从网格当前页面的单元格中读取数据，并通过 HTTP POST 将数据发送到服务器。您期望服务器 ( `csvExport.jsp`) 将生成一些 Excel 文件并将数据返回给客户端。

您能解释一下为什么需要将数据从 jqGrid 发送到服务器吗？服务器已经拥有所有数据，并且服务器已经为您获取了数据。`$('#todate').val()`仅使用网格（和）的参数向服务器发送请求不是更容易，`$('#fromdate').val()`服务器将直接从数据库中获取所有数据吗？

顺便说一句，您的代码输入错误：`var fromdate=$('#todate').val();`. 你的意思是大概`var fromdate=$('#fromdate').val()`？

关于服务器端代码的实现见[这里](https://stackoverflow.com/a/9888224/315935)。我不确定它是否会对您有所帮助，但我在代码之前发布的[另一个答案](https://stackoverflow.com/a/9349688/315935)中显示了如何使用[Open XML SDK 2.0](http://www.microsoft.com/download/en/details.aspx?id=5124)在服务器代码中生成真正的 Excel 文件（.XLSX 文件）。

# android - 如何打开和关闭设备闪光灯？

> ID：12968205
> 
> 赞同：3
> 
> 时间：2012-10-19T05:59:49.320
> 
> 标签：android, camera, flashlight

我想在 Android 中以编程方式仅打开相机`flash light`（而不是相机预览）。我搜索了它，但我找到的帮助不适用于我的三星 Galaxy ACE。

通过使用此代码可以打开几秒钟后它会自动关闭，而无需在 UI 上执行任何操作。如果我尝试再次打开强制关闭。

```
private void turnOn() {

    clicked = true;      
    mCamera = Camera.open();
    Parameters params = mCamera.getParameters();
    params.setFlashMode(Parameters.FLASH_MODE_ON); 
    mCamera.setParameters(params);
    mCamera.startPreview();
    mCamera.autoFocus(new AutoFocusCallback() {
        public void onAutoFocus(boolean success, Camera camera) {
        }
    });
} 
```

用于关闭

```
private void turnOff() { 
    clicked = false;         
    if (mCamera != null) {
        mCamera.stopPreview();
        mCamera.release();
    }
} 
```

声明了这些清单权限

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.FLASHLIGHT" />

<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />
<uses-feature android:name="android.hardware.camera.flash" /> 
```

任何人都可以告诉我如何长时间打开闪光灯直到使用点击关闭按钮。它是否需要任何第三方库。我在 Google play [Tiny flash](https://play.google.com/store/apps/details?id=com.devuni.flashlight&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5kZXZ1bmkuZmxhc2hsaWdodCJd)中看到了这个应用，他们是如何做这个应用的。

从我开机后它转到关闭`2 sec`我没有得到什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T07:12:19.230

@RajaReddy PolamReddy，

我正在使用三星 S3 LTE (4G)。您需要更改的只是将 Parameters.FLASH_MODE_ON 更改为 Parameters.FLASH_MODE_TORCH。

这个对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:34:49.893

尝试这个

```
//Turn on
camera = Camera.open();
Parameters p = camera.getParameters();
p.setFlashMode(Parameters.FLASH_MODE_TORCH);
camera.setParameters(p);
camera.startPreview();

//Turn off
camera = Camera.open();
Parameters p = camera.getParameters();
p.setFlashMode(Parameters.FLASH_MODE_OFF);
camera.setParameters(p);
camera.stopPreview(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T06:34:20.360

坏消息：根据文档android相机需要初始化表面视图才能开始预览好消息：它不能全屏或可见

到目前为止，我的经验是启动预览是激活 Flash 所必需的（但我不能代表所有设备）

如果您需要一些示例如何激活预览并可能将其隐藏在叠加层后面，请查看 javaocr 库（参见演示 - 有 2 个 android 应用程序，以及单独项目中的相机管理库 - 您可以抓住它）

[https://sourceforge.net/projects/javaocr/](https://sourceforge.net/projects/javaocr/)

# twitter - 使用 Twitter OAuth 对 API 调用进行身份验证以了解趋势

> ID：12968208
> 
> 赞同：2
> 
> 时间：2012-10-19T05:59:56.420
> 
> 标签：twitter, twitter-oauth, rate-limiting

我正在开发一个网站，该网站允许用户搜索一个城市或国家的十大推特趋势。起初我只依赖 Twitter 的 Rest API，但我遇到了很多速率限制问题（在学校我的速率限制消失得比我有机会使用它的速度更快）。我知道对我的 API 调用进行身份验证将有助于我更好地处理这个问题（经过身份验证的 API 调用按身份验证用户的限制收费，而未经身份验证的 API 调用从调用 IP 地址的分配中扣除）。

我实现了@abraham 的 PHP 库（[https://github.com/abraham/twitteroauth](https://github.com/abraham/twitteroauth)），不幸的是我的 API 调用没有经过身份验证。我知道我已经实现了@abraham 的 PHP 库，因为它会在最后打印出我的用户信息。我在它下面有我的 twitter 趋势搜索，但 API 调用没有经过身份验证。我不知道如何解决这个问题，任何帮助都将不胜感激！

这是我用来按国家/地区划分的十大趋势：

```
function showContent(){

// we're going to point to Yahoo's APIs
$BASE_URL = "https://query.yahooapis.com/v1/public/yql";

// the following code should only run if we've submitted a form
if(isset($_REQUEST['location']))
{
    // set a variable named "location" to whatever we passed from the form
    $location = $_REQUEST['location'];

    // Form YQL query and build URI to YQL Web service in two steps:

    // first, we show the query
    $yql_query = "select woeid from geo.places where text='$location'";
    // then we combine the $BASE_URL and query (urlencoded) together
    $yql_query_url = $BASE_URL . "?q=" . urlencode($yql_query) . "&format=json";

    //var_dump($location);

    // show what we're calling
    // echo $yql_query_url;

    // Make call with cURL (curl pulls webpages - it's very common)
    $session = curl_init($yql_query_url);
    curl_setopt($session, CURLOPT_RETURNTRANSFER,true);
    $json = curl_exec($session);

    // Convert JSON to PHP object 
    $phpObj = json_decode($json);

    // Confirm that results were returned before parsing
    if(!is_null($phpObj->query->results)){

      // Parse results and extract data to display
      foreach($phpObj->query->results as $result){
    //var_dump($result);    
     $woeid = $result[0]->woeid;

     if (is_numeric ($location)) 
         {
    echo "<span style='color:red; padding-left: 245px;'>Please enter a city or a country</span>";
    } 
    else if(empty($result)){
     echo "No results found";
    }
    else {
    /*  echo "The woeid of $location is $woeid <br />"; */
     }  
    } 
    }

    $jsontrends=file_get_contents("http://api.twitter.com/1/trends/".$woeid.".json"); 

    $phpObj2 = json_decode($jsontrends, true);

    echo "<h3 style='margin-top:20px'>TRENDS: ".$phpObj2[0]['locations'][0]['name']."</h3> \r\n";

    $data = $phpObj2[0]['trends']; 

    foreach ($data as $item) { 

    echo "<br /><a href=\"".$item['url']."\" target=\"_blank\">".$item['name']."</a>\r\n";

    echo "<br /> \r\n"; 

    }
    if(empty($item)){
    echo "No results found";
    }

    }
    } 
```

然后我将它添加到@abraham 的 html.inc 文件（连同一些 php 以查看速率限制状态），并且 html.inc 包含在 index.php 中：

```
<h1>Top Twitter Trends</h1>                 
<form name='mainForm' method="get">
<input name='location' id='location' type='text'/><br/>
<button id='lookUpTrends'>Submit</button>
</form>

<?php showContent(); 

$ratelimit = file_get_contents("http://api.twitter.com/1/account/rate_limit_status.json"); 

echo $ratelimit; 
?>  
</div> 
```

@abraham 的 index.php 文件有一些示例调用，由于我的调用看起来不像这样，我认为这可能是它没有被验证的原因。

```
 /* Some example calls */

    //$connection->post('statuses/update', array('status' => date(DATE_RFC822)));
    //$connection->post('statuses/destroy', array('id' => 5437877770));
    //$connection->post('friendships/create', array('id' => 9436992));
    //$connection->post('friendships/destroy', array('id' => 9436992)); 
```

请帮助我找到我需要修复的问题，以便我的 API 调用通过身份验证。

***更新 10-21***

我认为为了进行经过身份验证的 API 调用，我需要包含如下代码：

```
$connection->get('trends/place', array('id' => $woeid)); 
```

它没有解决我的问题，但也许它在正确的轨道上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:41:46.240

首先，您会发现将 PHP 和 HTML 分开确实有助于简化代码并将逻辑关注点分开（聚合数据和显示数据是两个不同的关注点）（许多 PHPer 喜欢[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)）。

您共享的代码似乎是正确的。我的猜测是问题在于 OAuth 连接的创建，它应该类似于：

```
 <?php
    /* Create TwitteroAuth object with app key/secret and token key/secret from default phase */
    $connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $token,$secret); 
```

您的Trends Test 应用程序的位置和`CONSUMER_KEY`位置，以及登录 twitter 并允许您的应用程序许可的用户的位置和位置。创建对象时是否会显示所有这些值？`CONSUMER_SECRET``$token``$secret``TwitterOAuth`

此外，请确保更新文件中的配置项`twitteroauth.php`（特别是第 21 行应设置为使用 1.1 API，第 29 行应设置为“json”）。

# java - 使用数据库中保存的链接在 jlabel 上显示客户的图像

> ID：12968210
> 
> 赞同：0
> 
> 时间：2012-10-19T06:00:00.973
> 
> 标签：java, string, image, swing, jdbc

在我的 Java 应用程序中，下面的代码工作正常。但除了他们之外，我还想展示客户的照片。我不想将照片作为 blob 存储在数据库中。我只想将照片存储在某个本地驱动器中并在 jLabel 中显示。谁能帮我？

```
try{
    Class.forName("org.apache.derby.jdbc.ClientDriver");
    Connection conn= DriverManager.getConnection("jdbc:derby://localhost:1527/C:/gymsoft/data", "APP", "app");
    Statement stmt=conn.createStatement();
    String query ="SELECT * FROM CUSTOMER WHERE CODE = '"+jTextField1.getText()+"' ";
    ResultSet rs = stmt.executeQuery(query);
    if(rs.next()) {
        String w = rs.getString("NAME");
        String x = rs.getString("CODE");
        TF1.setText(w);
        TF2.setText(x);
    } else {
        JOptionPane.showMessageDialog(null, "User Not Found!!");
    }
} catch ( ClassNotFoundException | SQLException e) {
    JOptionPane.showMessageDialog(null, "Error In Connection!!");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:30:32.903

在 a 中显示图像`JLabel`当然是可能的。从链接中检索图像也是可能的。但是，我在您的代码中没有发现任何尝试。

我在你的代码中发现的是

*   SQL 注入漏洞。当用户输入`jTextField1`类似

    ```
    3';drop database app` 
    ```

    你可以告别你的数据库

*   混合数据库查询和 UI 组件更新。数据库查询通常很慢，因此不应在与更新 UI 的线程相同的线程上执行。此外，所有 Swing 组件都应该在 Event Dispatch Thread 上更新，因此不能将整个代码移至工作线程。你需要把它们分开。有关更多信息，请参阅[Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)指南中的并发性
*   你忘了关闭`Connection`. 添加这样的`close`语句时，请在一个`finally`块中执行

# css - 在 .css 文件中动态添加值

> ID：12968211
> 
> 赞同：2
> 
> 时间：2012-10-19T06:00:04.180
> 
> 标签：css

我想知道是否可以将 .css 文件中创建的类的值动态添加到标签中？

现在，如果我有`<div class="textFrame">`.html 文件和 css 文件，我有声明为 -

```
.textFrame
{ 
     overflow:hidden; 
     position:absolute;
} 
```

现在，我想为`<div>`left、top、height 和 width 等属性添加样式属性。我的问题是，是否可以在 .textFrame 类（在 .css 文件中）中创建一些变量，让我们说，left、top、height 或 width，并为每个`<div>`标签动态地为这些变量分配值。实际上，没有`<div>`顶部、左侧、高度和宽度值不同的 textFrames( 标签)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:05:56.253

使用 jquery，您可以在标签中动态添加类

例如：

```
<div class="textFrame">
    .......
    .......
</div> 
```

查询：

```
$(document).ready(function() {
     $('.textFrame').css('height','500px');
} 
```

对于多个 div 具有相同的类，例如：

``<div class="textFrame" id="1"> ....... ....... </div>``
``<div class="textFrame" id="2"> ....... ....... </div>``

查询：

`$(document).ready(function() {`
`$('.textFrame').each(function(e){`
`if($('.textFrame').attr('id') == '1'){`
`$('.textFrame').css('height','500px');`
`} else if($('.textFrame').attr('id') == '2'){`
`$('.textFrame').css('height','300px');`
`}`
`});`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:03:39.847

如果它们都具有不同的属性，那么动态更改源样式表是没有意义的。您可能应该使用 Javascript 来动态更改每个元素的样式。jQuery 使这变得非常容易。

# grails - 在 Jetty 7 中使 JSESSIONID cookie 成为 httpOnly

> ID：12968217
> 
> 赞同：2
> 
> 时间：2012-10-19T06:00:24.577
> 
> 标签：grails, jetty, session-cookies, jsessionid, httponly

我们正在运行 grails 2.0 + jetty 7.6.6，需要将 JSESSIONID cookie 设置为 httpOnly。stackoverflow 上的所有答案似乎都指向 Servlet 3.0（需要码头 8）或 tomcat。任何人都可以为我提供一个明确的方法，将 JSESSIONID cookie 设置为 httpOnly for jetty 7.x？

我尝试添加包含以下内容的 jetty-web.xml 文件，但它仍然不起作用（即 JSESSIONID 未标记为 httpOnly）：

```
<?xml version="1.0"  encoding="ISO-8859-1"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">

<Configure class="org.eclipse.jetty.webapp.WebAppContext">
    <Get name="sessionHandler">
        <Get name="sessionManager">
            <Set name="httpOnly" type="boolean">true</Set>
        </Get>
    </Get>
</Configure> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:05:02.277

我所要做的就是将 jetty-web.xml 放在正确的文件夹中。最初我是放在`jetty/etc`文件夹中，但它应该放在`WEB-INF`目录中。

# knockout.js - Knockoutjs 选择初始值绑定

> ID：12968221
> 
> 赞同：2
> 
> 时间：2012-10-19T06:00:35.197
> 
> 标签：knockout.js

我有以下 knockoutjs 代码。问题是我希望能够设置 selectedCountry 变量的值，但要做到这一点，我必须将其绑定到 select 元素作为 selectedCountry，但是为了获得初始值，我必须使用这个 selectedCountry() 代替， and am thus not able to update the value of selectedCountry when another option is selected. 我该怎么做？

```
The code is also available here http://jsfiddle.net/xPc9J/

<!doctype html>
<html>
<head>
<script src="knockout-2.1.0.js" type="text/javascript"></script>

</head>
<body>
<p>
    Your country: 
    <select data-bind="options: availableCountries,  optionsValue: 'countryPopulation',optionsText: 'countryName',value: selectedCountry(), optionsCaption: 'Choose...'"></select>
</p>
<span data-bind="text: selectedCountry() ? selectedCountry().countryPopulation : 'unknown'"></span>.
<div data-bind="visible: selectedCountry"> <!-- Appears when you select something -->
    You have chosen a country with population 
    <span data-bind="text: selectedCountry() ? selectedCountry().countryPopulation : 'unknown'"></span>.
</div>

<script type="text/javascript">
    // Constructor for an object with two properties
    var country = function(name, population) {
        this.countryName = name;
        this.countryPopulation = population;    
    };        
 var sel=new country("USA", 320000000);
    console.log(sel);
    var viewModel = {
        availableCountries : ko.observableArray([
            new country("UK", 65000000),
            new country("USA", 320000000),
            new country("Sweden", 29000000)
        ]),
        selectedCountry : ko.observable(320000000) // Nothing selected by default
    };
    console.log(viewModel.selectedCountry());
    //viewModel.selectedCountry(sel);
    ko.applyBindings(viewModel);
</script>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:18:03.463

您的`selectedCountry`财产拥有当前选定的人口而不是全部 `country`。

因此，在您拥有的任何地方，您都`selectedCountry().countryPopulation`应该简单地写`selectedCountry()`：

```
<span data-bind="text: selectedCountry"></span>.
<div data-bind="visible: selectedCountry">
    You have chosen a country with population 
    <span data-bind="text: selectedCountry() ? selectedCountry(): 'unknown'">
    </span>.
</div>​ 
```

见[小提琴](http://jsfiddle.net/gHukB/)。

`()`请注意，您`select`的`value`绑定中有一组额外的，因此正确的语法是：

`value: selectedCountry`

# object - 系统是否可以仅使用 OpenCV 中的 Haar 训练来识别手势？

> ID：12968222
> 
> 赞同：1
> 
> 时间：2012-10-19T06:00:42.003
> 
> 标签：object, opencv, computer-vision, detection

我正在做一个静态图像上的手牌识别项目。我可以只使用 Haar 训练来完成此任务吗？

据我了解，它有点类似于神经网络的概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:37:53.113

使用 Haar 训练可能有助于检测手，但不能识别。

人们使用许多方法，所以我不能给出一个独特的。您可以使用 Google Scholar 进行一些研究，并使用关键字“手势”、“识别”和“检测”。一些提示：你需要对手进行分割，并使用一些模板匹配或其他方法来识别格式。[这里](http://www.movesinstitute.org/~kolsch/HandVu/HandVu.html)还有一个手势项目。

# ruby-on-rails - Rails 无法创建 HABTM 关系

> ID：12968223
> 
> 赞同：0
> 
> 时间：2012-10-19T06:00:50.203
> 
> 标签：ruby-on-rails, activerecord, has-and-belongs-to-many

我有2个模型：

```
class Hashtag < ActiveRecord::Base
  has_and_belongs_to_many :photos
  attr_accessible :name
***
end

class Photo < ActiveRecord::Base
  has_and_belongs_to_many :hashtags, :uniq => true
***
end 
```

关系创建代码：

```
photo = current_user.photos.new( params[:photo] )
if !photo.nil? and photo.save!
    photo.text.scan(/#[[:alnum:]]+/).each do |billet|
            next if billet.length > 25
            hashtag = Hashtag.first_or_initialize(:name => billet)
            if hashtag.persisted?
                hashtag.touch
            else
                hashtag.save!
            end
            photo.hashtags << hashtag
        end
    render json: photo
end 
```

但它不起作用。看起来主题标签永远不会被保存。这段代码有什么问题？

升级版：

连接表：

```
def up
    create_table :hashtags_photos, :id => false do |t|
      t.integer :photo_id
      t.integer :hashtag_id
    end

    add_index :hashtags_photos, [:photo_id, :hashtag_id], :unique => true
  end 
```

和错误：

```
ActiveRecord::AssociationTypeMismatch: Hashtag(#70233360314580) expected, got TrueClass(#70233335523020) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:48:57.183

正确的做法：

```
text.scan(/#[[:alnum:]]+/).each do |workpiece|
        next if workpiece.length > 25
        hashtag = Hashtag.find_by_name(workpiece)
        if hashtag
          hashtag.touch
        else
          hashtag = Hashtag.create!(:name => workpiece)
        end
        hashtags << hashtag
end 
```

# jquery-ui-autocomplete - 按城市名称和机场代码自动完成机场

> ID：12968228
> 
> 赞同：1
> 
> 时间：2012-10-19T06:01:05.527
> 
> 标签：jquery-ui-autocomplete

我们正在开发一个旅行网络应用程序，这里有一些机场代码自动完成的场景，我正在努力让它按预期工作。我从 xml 获取所有机场代码和城市名称并将其绑定到文本输入。场景是当用户键入“ **Mani** ”时，它应该显示**“所有城市都以 Mani 开头”**，而不是显示包含该术语 mani 的所有城市（参见这张图片：http: [//imgur.com/61WS6](https://imgur.com/61WS6)）。但是如果用户直接输入机场代码，它显然会显示结果。

所以为此，我使用那个**猴子补丁来自动完成**，现在它工作正常。但是现在，当用户输入像“JFK,LHR,MNL”这样的机场代码时，它没有给出任何结果。

这是所有旅游网站的工作方式，我需要您的帮助来实现这一目标。提前致谢。这是我的带有猴子补丁的自动完成代码。

```
$(document).ready(function() {
    var myArr = [];
    function parseXml(xml)
    {
        $(xml).find("CityAirport").each(function()
        {
            myArr.push($(this).attr("CityName")+"-"+$(this).attr("AirportCode"));
        }); 
    }

    function setupAC() {
        $("#from").autocomplete({
                source: myArr,
                minLength: 1,
                select: function(event, ui) {
                    $("#from").val(ui.item.value);
                }
        });
        $("#to").autocomplete({
                source: myArr,
                minLength: 1,
                select: function(event, ui) {
                    $("#to").val(ui.item.value);
                }
        });
    }

    $.ajax({
        type: "GET",
        url: "xmlFiles/flight/AirportCode.xml", 
        dataType: "html",
        success: parseXml,
        complete: setupAC,
        failure: function(data) {
            alert("XML File could not be found");
        }
    });
});
function hackAutocomplete(){    
    $.extend($.ui.autocomplete, {
        filter: function(array, term){
            var matcher = new RegExp("^" + term, "i");

            return $.grep(array, function(value){
                return matcher.test(value.value);// || value.value || value);
            });                     
        }
    });
} 
```

此代码取自此线程：[来自 SOF 的自动完成](https://stackoverflow.com/questions/6169954/how-do-i-get-this-jquery-autocomplete-code-to-work-in-firefox)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:41:09.017

您必须拆分两个数据属性并使用回调函数作为源参数，或多或少像这样（[见实际操作](http://jsfiddle.net/awyG6/2/)）：

```
var source = [
    { name: 'New york', code: 'JFK'},
    { name: 'Other name', code: 'BLA'},
    { name: 'Rome', code: 'FCO'}
];
$( "#autocomplete" ).autocomplete({
    source: function(request, response){
        var searchTerm = request.term.toLowerCase();
        var ret = [];
        $.each(source, function(i, airportItem){
            //Do your search here...
            if (airportItem.code.toLowerCase().indexOf(searchTerm) !== -1 || airportItem.name.toLowerCase().indexOf(searchTerm) === 0)
                ret.push(airportItem.name + ' - ' + airportItem.code);
        });

        response(ret);
    }
});​ 
```

# python - 由于缺少“<<<<，Python 推送到 Heroku 失败 我已经用 Flask 创建了一个 Python 应用程序，现在我正在尝试将它部署在 Heroku 上。当我尝试推送（使用“git push heroku master”）时，出现以下错误： raise ValueError("Missing distribution spec" 问问题 问问题 2012-10-19T06:01:20.237 495 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我已经用 Flask 创建了一个 Python 应用程序，现在我正在尝试将它部署在 Heroku 上。当我尝试推送（使用“git push heroku master”）时，出现以下错误： raise ValueError("Missing distribution spec", line) ValueError: ('Missing distribution spec', '<<<<<<< HEAD') Storing complete log in /app/.pip/pip.log ! Heroku push rejected, failed to compile Python app To git@heroku.com:bytefinder.git ! [remote rejected] master -> master (pre-receive hook declined) error: failed to push some refs to 'git@heroku.com:bytefinder.git' 我对这些东西很陌生。我的应用程序在 localhost 上运行良好，但这是我对 Heroku 的初步推动，我还没有成功部署。我还应该注意，我的应用程序使用带有 sqlite3 的数据库。我知道数据库只能在 Heroku 上使用 postgresql 进行生产（我意识到这一点为时已晚……），因此我可能会因此而遇到一些编译时错误（尽管我的应用程序在我编译时可以正常编译）在本地主机上运行它）。 任何关于此事的建议将不胜感激！ 编辑： 这是完整的错误！ -----> Installing dependencies using pip version 1.1 Exception: Traceback (most recent call last): File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages /pip-1.1-py2.7.egg/pip/basecommand.py", line 104, in main status = self.run(options, args) File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages /pip-1.1-py2.7.egg/pip/commands/install.py", line 219, in run for req in parse_requirements(filename, finder=finder, options=option s): File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages /pip-1.1-py2.7.egg/pip/req.py", line 1288, in parse_requirements req = InstallRequirement.from_line(line, comes_from) File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages /pip-1.1-py2.7.egg/pip/req.py", line 107, in from_line return cls(req, comes_from, url=url) File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages /pip-1.1-py2.7.egg/pip/req.py", line 40, in __init__ req = pkg_resources.Requirement.parse(req) File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages /distribute-0.6.27-py2.7.egg/pkg_resources.py", line 2610, in parse reqs = list(parse_requirements(s)) File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages /distribute-0.6.27-py2.7.egg/pkg_resources.py", line 2523, in parse_requirements raise ValueError("Missing distribution spec", line) ValueError: ('Missing distribution spec', '<<<<<<< HEAD') Storing complete log in /app/.pip/pip.log ! Heroku push rejected, failed to compile Python app To git@heroku.com:bytefinder.git ! [remote rejected] master -> master (pre-receive hook declined) error: failed to push some refs to 'git@heroku.com:bytefinder.git' android中的自定义微调器错误 我有 2 个旋转器。我正在从数据库中加载微调器数据。当我在第一个微调器中选择任何项目时，根据该项目，第二个微调器应该加载相应的数据。例如，如果在第一个微调器中选择蔬菜，那么只有蔬菜名称应该排在第二位，如果在第一个选择水果，然后水果名称应该排在第二个。如何将第一个微调器中的选定项目传递给我的自定义微调器类？我试图通过该项目，但它让我在第二个微调器的每一行都空白。这是我的代码 // Spinner click listener spinner.setOnItemSelectedListener(new OnItemSelectedListener() { @Override public void onItemSelected(AdapterView paramAdapterView, View paramView, int paramInt, long paramLong) { // TODO Auto-generated method stub label = paramAdapterView.getItemAtPosition(paramInt) .toString(); deviceID = paramInt; loadSpinnerData1(label); } private void loadSpinnerData1(String type) { // database handler DatabaseHandler db = new DatabaseHandler(getApplicationContext()); //getting the spinner item depending on what item selected in 1st spinner List <string>manuft = db.getAllManuft(type); spinner1.setAdapter(new MyAdapter1(OptionsActivity.this, R.layout.row, manuft,type)); } 我的自定义微调器类 public class MyAdapter1 extends ArrayAdapter<string>{ public MyAdapter1(Context context, int textViewResourceId, List <string>manuft, String type) { super(context, textViewResourceId, manuft); } @Override public View getDropDownView(int position, View convertView,ViewGroup parent) { return getCustomView(position, convertView, parent, label); } @Override public View getView(int position, View convertView, ViewGroup parent) { return getCustomView(position, convertView, parent, label); } public View getCustomView(int position, View convertView, ViewGroup parent, String type) { DatabaseHandler db = new DatabaseHandler(getApplicationContext()); List <string>manuft = db.getAllManuft(type); LayoutInflater inflater=getLayoutInflater(); View row=inflater.inflate(R.layout.row, parent, false); TextView label=(TextView)row.findViewById(R.id.device); for(int i=0;i <manuft.size();i++){ 0="" 1="" 2="" 3="" 4="" 64="" label.settext(manuft.get(position));="" }="" return="" row;="" pythonherokupushflask="" 回答="" related="" java="" -="" 为什么添加到集合时出现="" nullpointer="" 异常？="" gcc="" 如何解决以下="" libtool="" 位编译错误="" python="" af_unix="" 客户端="" c="" 服务器="" using="" pylab's="" specgram="" in="" a="" headless="" environment="" postgresql="" ebs="" snapshots="" vs.="" wal-e="" for="" on="" ec2="" android="" android：绘制波浪线和箭头="" javascript="" deleterow="" 导致="" indexsizeerror，需要关闭="" php="" nothing="" happens="" after="" check="" login="" script="" jquery="" comparing="" arrays="" and="" selecting="" best="" match="" eclipse="" add="" objects="" to="" class,="" automatically="" retroactively="" reference="" php × 1429865="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：12968231
> 
> 赞同：1
> 
> 时间：
> 
> 标签：python, heroku, push, flask

我已经用 Flask 创建了一个 Python 应用程序，现在我正在尝试将它部署在 Heroku 上。当我尝试推送（使用“git push heroku master”）时，出现以下错误：

```
raise ValueError("Missing distribution spec", line)
ValueError: ('Missing distribution spec', '<<<<<<< HEAD')

Storing complete log in /app/.pip/pip.log
!     Heroku push rejected, failed to compile Python app

To git@heroku.com:bytefinder.git
! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:bytefinder.git' 
```

我对这些东西很陌生。我的应用程序在 localhost 上运行良好，但这是我对 Heroku 的初步推动，我还没有成功部署。我还应该注意，我的应用程序使用带有 sqlite3 的数据库。我知道数据库只能在 Heroku 上使用 postgresql 进行生产（我意识到这一点为时已晚……），因此我可能会因此而遇到一些编译时错误（尽管我的应用程序在我编译时可以正常编译）在本地主机上运行它）。

任何关于此事的建议将不胜感激！

编辑：

这是完整的错误！

```
-----> Installing dependencies using pip version 1.1
       Exception:
       Traceback (most recent call last):
         File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages
/pip-1.1-py2.7.egg/pip/basecommand.py", line 104, in main
           status = self.run(options, args)
         File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages
/pip-1.1-py2.7.egg/pip/commands/install.py", line 219, in run
           for req in parse_requirements(filename, finder=finder, options=option
s):
         File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages
/pip-1.1-py2.7.egg/pip/req.py", line 1288, in parse_requirements
           req = InstallRequirement.from_line(line, comes_from)
         File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages
/pip-1.1-py2.7.egg/pip/req.py", line 107, in from_line
           return cls(req, comes_from, url=url)
         File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages
/pip-1.1-py2.7.egg/pip/req.py", line 40, in __init__
           req = pkg_resources.Requirement.parse(req)
         File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages
/distribute-0.6.27-py2.7.egg/pkg_resources.py", line 2610, in parse
           reqs = list(parse_requirements(s))
         File "/tmp/build_16gy6shadhhm2/.heroku/venv/lib/python2.7/site-packages
/distribute-0.6.27-py2.7.egg/pkg_resources.py", line 2523, in parse_requirements

           raise ValueError("Missing distribution spec", line)
       ValueError: ('Missing distribution spec', '<<<<<<< HEAD')

       Storing complete log in /app/.pip/pip.log
 !     Heroku push rejected, failed to compile Python app

To git@heroku.com:bytefinder.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:bytefinder.git' 
```</manuft.size();i++){></string></string></string></string>

# android - android中的自定义微调器错误

> ID：12968232
> 
> 赞同：0
> 
> 时间：2012-10-19T06:01:20.427
> 
> 标签：android

我有 2 个旋转器。我正在从数据库中加载微调器数据。当我在第一个微调器中选择任何项目时，根据该项目，第二个微调器应该加载相应的数据。例如，如果在第一个微调器中选择蔬菜，那么只有蔬菜名称应该排在第二位，如果在第一个选择水果，然后水果名称应该排在第二个。如何将第一个微调器中的选定项目传递给我的自定义微调器类？我试图通过该项目，但它让我在第二个微调器的每一行都空白。这是我的代码

```
 // Spinner click listener
            spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

                @Override
                public void onItemSelected(AdapterView<?> paramAdapterView,
                        View paramView, int paramInt, long paramLong) {
                    // TODO Auto-generated method stub
                    label = paramAdapterView.getItemAtPosition(paramInt)
                            .toString();
                    deviceID = paramInt;
                    loadSpinnerData1(label);

                }
       private void loadSpinnerData1(String type) {
        // database handler
        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                 //getting the spinner item depending on what item selected in 1st spinner
                List<String> manuft = db.getAllManuft(type);
        spinner1.setAdapter(new MyAdapter1(OptionsActivity.this, R.layout.row, manuft,type));
    } 
```

我的自定义微调器类

```
 public class MyAdapter1 extends ArrayAdapter<String>{

        public MyAdapter1(Context context, int textViewResourceId, List<String> manuft, String type) {
            super(context, textViewResourceId, manuft);
        }

        @Override
        public View getDropDownView(int position, View convertView,ViewGroup parent) {
            return getCustomView(position, convertView, parent, label);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            return getCustomView(position, convertView, parent, label);
        }

        public View getCustomView(int position, View convertView, ViewGroup parent, String type) {

            DatabaseHandler db = new DatabaseHandler(getApplicationContext());

            List<String> manuft = db.getAllManuft(type);

            LayoutInflater inflater=getLayoutInflater();
            View row=inflater.inflate(R.layout.row, parent, false);
            TextView label=(TextView)row.findViewById(R.id.device);

            for(int i=0;i<manuft.size();i++){
                label.setText(manuft.get(position));
            }

            return row;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:04:32.107

//声明全局选中的项目

```
 String type; 
```

然后使 this.type=typename; 在负载旋转器中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:25:02.947

尝试这样的事情：

```
 spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, android.view.View v, int position, long id) {
                    // this method will update your second spinner
            updateSecondSpinner(id);

        } 
```

这里更新第二个微调器的方法：

```
 private void updateSecondSpinner(long id) {

                String[] args = new String[] { String.valueOf(id) };
                cur2 = db.rawQuery("select IID AS _id, TXNAME from TABLE WHERE IID= ?", args);

                SimpleCursorAdapter adapter_2 = new SimpleCursorAdapter(AccidentNewActivity.this, android.R.layout.simple_spinner_item, cur2,
                    new String[] { "TXNAME" }, new int[] { android.R.id.text1 });

                adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

                spinner_modelo.setAdapter(adapter2);

...
} 
```

# c++ - 使用向量在结构中输入值

> ID：12968239
> 
> 赞同：-1
> 
> 时间：2012-10-19T06:01:38.847
> 
> 标签：c++

我创建了这个结构：

```
struct xlsmain {
    vector<sub_parts> sb;
    string name;        
}

struct sub_parts {
    vector<pio_parts> pio;
    string name_pio;
    string direction;
    string partition;
}

struct pio_parts {
    string pio_name;
    vector<report_specs> report;
}

struct report_specs {
    string name; 
    vector<string> value;
}

struct xlsmain* interface = new xlsmain[100]; 
```

嵌套是必要的，因为每个元素都以层次结构的方式相关。我现在面临的问题是如何在这个结构中输入值。

**编辑：**我不喜欢使用`push_back()`，因为每次我都必须声明一个单独的结构。因此，例如，如果我想向 xlsmain 添加一个子部分，我必须声明一个变量：

```
sub_parts sb1; 
```

然后我必须将值输入到这个结构中，直到它完成，当我可以使用时：

```
interface[i].sb.push_back(sb1); 
```

此外，如果涉及嵌套，则`sb1`还必须创建许多类似的结构。这导致必须创建大量变量才能在我的结构中输入一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:00:22.990

在编辑之前，您“过于复杂”的担忧`push_back()`并不清楚。（听起来可能连你都不喜欢这个方法的名字……或者类似的奇怪的东西？）

我将尝试解决提出的新问题。但我要重申，尽管您使用的是标准库`string`和`vector`类，但您的结构本身并没有获得 C++ 的优势！

您没有构造函数、析构函数或方法。这些是让数据对象通过“神奇”行为“活跃起来”的基础，这些行为让这些类的客户可以编写更简单、更抽象的代码。即使您唯一的“客户”只是您自己的代码，这也很有帮助！

让我们说在你有这样的代码之前：

```
pio_parts pp;
pp.pio_name = "this string will be stored in the name";
pp.report.push_back(someReport);
pp.report.push_back(anotherReport); 
```

如果向结构添加构造函数和方法，如下所示：

```
struct pio_parts {
    string pio_name;
    vector<report_specs> report;

    pio_parts(string newName) {
         pio_name = newName;
    }

    void addReport(report_specs newSpecs) {
         report.push_back(newSpecs);
    }
}; 
```

然后上面的代码变得更好：

```
pio_parts pp ("this string will be stored in the name");
pp.addReport(someReport);
pp.addReport(anotherReport); 
```

尽管实际上，您所做的只是使自己不必知道`pio_parts`要添加的数据成员的名称。现在你记住了一个方法名。你节省了一点打字，但`push_back()`差不多一样好。

**但是**，如果您需要在其中执行更多相关操作`addReport()`而不仅仅是添加到向量中，那么您现在可以放置所有代码。这样，您班级的用户就不必担心添加报告所需的任何簿记......他们只是要求完成！此外，由于没有调用它，因此调用`push_back()`它的人不再需要`addReport()`知道列表存储在向量中。

我故意不去尝试更深入地研究引用、复制构造、智能指针、成员初始化语法甚至`class`vs `struct`. 语言太深奥了。尽快抽出时间，*仔细阅读*Bjarne Stroustrup 的这篇短文，该文阐述了方法论上的明显对比：

[学习标准 C++ 作为一门新语言](http://www.stroustrup.com/new_learning.pdf)

* * *

现在我将尝试解决您的其他问题。首先，您不必在 C++ 中创建变量的命名实例来将其传递给函数。你可以重写：

```
sub_parts sb1;
interface[i].sb.push_back(sb1); 
```

...相反：

```
interface[i].sb.push_back(sub_parts ()); 
```

在这种情况下不是特别有用，因为对象是空的......所以你只是推了一些无用的东西。但是，如果您的构造函数采用填充对象的参数，那就没问题了。你甚至可以像这样构建数组：

[如何初始化其构造函数需要两个或多个参数的对象数组？](https://stackoverflow.com/questions/9656576/how-can-i-initialize-an-array-of-objects-whose-constructor-require-two-or-more-a)

但是，如果您的构造函数采用硬编码列表（就像您的那样），那么美中不足的是有点苍蝇。虽然 C++ 可以使用您直接编码的值初始化普通数组，但传递普通数组会丢失其长度信息。向量会更好，但用硬编码值初始化它们很笨拙：

[用硬编码元素初始化 std::vector 的最简单方法是什么？](https://stackoverflow.com/questions/2236197/c-easiest-way-to-initialize-an-stl-vector-with-hardcoded-elements)

你可以看到人们对不得不写的抱怨几乎和你一样：

```
std::vector<int> ints;

ints.push_back(10);
ints.push_back(20);
ints.push_back(30); 
```

那篇文章列出了一些解决方法，但最前沿的编译器（可能不是您使用的）支持：

```
std::vector<int> ints = {10, 20, 30}; 
```

一旦有了这些，就可以非常容易地进行“嵌套”样式的构造。

* * *

最后一点：您似乎在[较早的评论](https://stackoverflow.com/questions/12967444/storing-a-large-amount-of-data-using-c-c/12967740#comment17583958_12967740)中具体询问了原始数组与向量。对于你`interface`，你几乎肯定想要一个向量。这是一个陷阱：`new xlsmain[100]`在原始数组上使用需要记住做 a `delete[] interface`（而不仅仅是常规`delete interface`）：

[C++ 中的 delete vs delete[] 运算符](https://stackoverflow.com/questions/2425728/delete-vs-delete-operators-in-c)

请记住[，C++ 中也没有 realloc](http://www.stroustrup.com/bs_faq2.html#renew)。因此，如果这就是您动态分配它的原因，请忘记这个想法。

只需将 interface 设为向量，您就可以避免这样的麻烦。如果需要，您将能够调整它的大小，并且还可以避免将所谓的[“幻数”](http://en.wikipedia.org/wiki/Magic_number_(programming)#Unnamed_numerical_constants)硬编码到您的程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:25:38.853

一个选项是使用 std::map 而不是向量，然后你可以做这样的事情

```
xmlsmain["some element"].sb["some other"].direction = "up"; 
```

以这种方式，自动创建元素“一些元素”和“一些其他”。

# jqgrid - 如何在具有上下文的选择器中加载 jqgrid

> ID：12968246
> 
> 赞同：0
> 
> 时间：2012-10-19T06:02:41.580
> 
> 标签：jqgrid

一般来说，我们将 jqgrid 称为 in`$("#grid_loc").jqGrid({});`
但我想指定上下文，如`$("#grid_loc",context).jqGrid({})`.
但这不起作用。有人可以帮忙吗？
我必须使用`url`选项加载服务器端数据。
事实上，我碰巧有这个，因为我的页面上有标签。在每个选项卡中，我必须有一个 jqgrid，不是不同的网格，而是具有不同数据的相同网格。在这里，我使用

`var tabset = $("div.tabset"); newdivid = $("div[class*='active_tab']",tabset).attr("id"); var newmenudivid = $("#"+newdivid);`

网格代码 获取选项卡上下文

```
$("#grid_workflow", newmenudivid).jqGrid({....}); 
```

我一直在试图找到一种方法来做到这一点。您可以在链接的评论部分找到我的一些努力 [如何在多个选项卡中开发相同的 jqgrid](https://stackoverflow.com/questions/12932909/how-to-develop-same-jqgrid-in-multiple-tabs#comment17538029_12932909)

为了同样的目的，我成功地覆盖了 id。但这不是一个好方法。所以我被迫采用另一种方法，即。语境

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:55:39.940

我想你误解了一些与`id`属性相对应的重要事情。最重要的是页面上所有具有*属性**的元素都必须具有**唯一**的属性值`id`***。换句话说，id 在整个 HTML 页面中必须是唯一的。**

 **因此，如果您需要在树选项卡内创建例如树网格，则必须为每个网格定义*不同的 id 属性。*例如; `grid_workflow1`, `grid_workflow2`, `grid_workflow3`. 如果您动态创建选项卡和网格，那么您可以在外部范围内拥有一些变量（例如全局变量）并增加变量的值。`"grid_workflow"`您可以使用一些前缀（如）和变量的值来构造网格的 id 。您可以通过这种方式创建多个具有唯一 ID 的网格。许多 JavaScript 库使用这种方式来生成唯一`id`属性。Ij 您希望您可以使用`$.jgrid.randId()`该方法将返回您可以用作 id 的唯一字符串。

由于语法`$("#grid_workflow", newmenudivid)`，您应该了解一件重要的事情。我建议*永远不要使用它*。原因很简单。仅当您有 id 重复项时才会有所帮助。在所有其他情况下 if will 完全一样`$("#grid_workflow")`但**缓慢**。原因很容易理解。如果页面上的所有 id 都在 Web 浏览器内部保存，并且如果您直接或间接（in ）使用[getElementById](http://www.w3schools.com/jsref/met_doc_getelementbyid.asp)`$("#grid_workflow")`方法，则搜索具有所需 id 的元素就像在数据库中的索引中搜索一样。因此，您将获得最佳性能结果。如果你使用`$("#grid_workflow", newmenudivid)`，那么你不允许网络浏览器通过 id 使用元素的索引。因此上下文的使用将遵循缓慢搜索抛出所有子元素`newmenudivid`. 所以你应该避免使用带有 id 选择器的 jQuery 上下文。**

# joomla - 是否有任何选项可以在 joomla 的社区构建器中为我的必填字段设置样式

> ID：12968250
> 
> 赞同：0
> 
> 时间：2012-10-19T06:03:09.803
> 
> 标签：joomla, joomla2.5, joomla-extensions

1.  我已经安装了 Community Builder 1.8.1 并在我的 Joomla2.5.7 中使用它。
2.  它安装得很好并且工作得很好。
3.  但是，当我将“必需？：”设置为“是”时，我希望我的字段以粗体显示。
4.  我已经搜索过了，但都是徒劳的。
5.  有没有办法破解代码或组件中有任何选项。
6.  即使是一个小提示对我来说也非常有用。我对 Joomla 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:51:52.440

在社区构建器的样式表中，寻找这个，

```
cbFieldIconsLabels {

} 
```

并添加以下内容：

```
font-weight: bold; 
```

# c# - 通过 C# SDK 上传的照片没有“赞”按钮

> ID：12968251
> 
> 赞同：0
> 
> 时间：2012-10-19T06:03:10.737
> 
> 标签：c#, asp.net, facebook, facebook-graph-api, facebook-c#-sdk

我正在构建一个应用程序，用户将在其中上传照片，这些照片将存储在他们 Facebook 帐户的相册中。目前，我正在使用 C# SDK 来实现这一点，并且我设法上传了照片。

当我尝试在 Graph API 资源管理器中使用以下 FQL 查询照片时：

```
select object_id, like_info from photo where object_id=[my_object_id] 
```

我得到以下结果：

```
{
    "data": [
        {
            "object_id": "11111111111111111", 
            "like_info": {
                "can_like": false, 
                "like_count": 0, 
                "user_likes": false
            }
        }
    ]
} 
```

通过直接发布到 Graph API 端点 `https://graph.facebook.com/me/photos?access_token=[my_access_token]`并在结果 ID 上执行 FQL 来上传照片会得到相同的结果 - 的`can_like`值为`false`. 在这两种情况下，“谁可以看到这个应用在你的 Facebook 时间线上为你发布的帖子？” 该应用程序的设置设置为“公共”。

如果我查看照片页面，我可以看到照片但没有`"Like"`或`"Comment"`按钮。经过进一步调查，我发现“赞”和“评论”按钮只有在我（或者更确切地说是我的访问令牌的用户）是上传者的朋友时才会出现。是否可以制作上传的照片`"Likeable"?`我的目标是让访问我的应用程序的用户能够“喜欢”个人照片，而不必成为上传照片的人的朋友。这可以实现还是我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:13:27.390

这是 facebook 的限制，但我找到了一种解决方法，当用户在此处启用订阅时：[https](https://www.facebook.com/about/subscribe) ://www.facebook.com/about/subscribe任何人都可以喜欢/评论他们的照片...

# java - 如何从列表集合中获取特定元素？

> ID：12968255
> 
> 赞同：0
> 
> 时间：2012-10-19T06:03:33.533
> 
> 标签：java, list, collections

我有一个列表 myCollection ，它是列表的集合，例如

```
myCollection = [[1,2,3,4],[1,2,3,4],[1,2,3,4]] 
```

迭代这个列表并通过 get(i) 方法我将得到一个特定的子列表。

```
for (int i = 0; i < myCollection.size(); i++) {
      System.out.println(myCollection.get(i));
} 
```

我尝试为子列表创建一个新列表并对其进行迭代，但我得到的完整列表为`[1,2,3,4]`

```
for (int i = 0; i < myCollection.size(); i++) {
    List list = new ArrayList();
    list.add(myCollection.get(i));
       for (int j = 0; j < list.size(); j++) {
        System.out.println("list.get(j) -- "+list.get(j).toString());
     }    
} 
```

如何获取此子列表中的元素？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:06:16.753

这个怎么样：

```
list.get(i).get(j) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T06:07:03.300

您可能想尝试这样的事情：

```
List list = new ArrayList();
for (int i = 0; i < myCollection.size(); i++) {
    list.add(myCollection.get(i));

} 
```

将打印机分开也更好：

```
for (int j = 0; j < list.size(); j++) {
        System.out.println("list.get(j) -- "+list.get(j).toString());
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T06:06:57.283

你得到`list`是因为，你将 a 存储`list`在你的列表中。

此外，您已经声明了一个`raw type`列表，这不是一个好习惯。

**您可以使用增强的for循环从每个嵌套列表中获取单个元素：-**

```
myCollection = [[1,2,3,4],[1,2,3,4],[1,2,3,4]]

for(List<Integer> list: myCollection) {

    for (Integer intVal: list) {
         System.out.print(intVal + " ");
    }
    System.out.println();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T06:08:51.177

试试下面的代码：

```
for (int i = 0; i < myCollection.size(); i++) 
{     
    List myList = myCollection.get(i);
    for (int j = 0; j < myList.size(); j++) 
    {
        System.out.println("myList.get(j) -- "+myList.get(j).toString());      
    }
} 
```

你正在做的是：

```
list.add(myCollection.get(i)); 
```

此行会将索引处的完整列表添加`i`到`list`. 因此，无需将其添加到另一个列表中。就像我一样，只需将它存储在 myList 变量中。然后迭代。

# javascript - 使用 Backbone Collection 构建列表

> ID：12968259
> 
> 赞同：1
> 
> 时间：2012-10-19T06:03:52.503
> 
> 标签：javascript, backbone.js

我正在尝试使用 BackBone 集合构建列表。由于某种原因，我无法将它们打印在页面上。

js文件

```
var DataCollection = Backbone.Collection.extend({
            model : dataModel
        });

        var dataModel = Backbone.Model.extend({
            defaults : {
                dataID : 'unknown',
                text : 'unknown',

            }
        });

        var link1 = new dataModel({ dataID: "1", text: "OMC" });
        var link2 = new dataModel({ dataID: "2", text: "Marvin Gaye" });
        var link3 = new dataModel({ dataID: "3", text: "OMC" });

        var myDataCollection = new DataCollection([ link1, link2, link3]);

   var threatData = {

                myDataCollection: myDataCollection
        };

    var compiledTemplate = Handlebars
                .compile(myTemplate);
        $('#myTable').html(
                compiledTemplate (threatData)); 
```

.html 文件

```
<ul id="Linklist">
             {{#each myDataCollection}}
                <li><a data-id="{{dataID}}" href="#">{{text}}</a></li>
             {{/each}}
        </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:29:52.590

要使模板渲染工作，您需要首先将 Backbone 集合转换为 JSON。

```
var threatData = {
            myDataCollection: myDataCollection.toJSON()
    }; 
```

[演示](http://jsfiddle.net/LdMb2/)

# android - 客户端验证 - Android

> ID：12968260
> 
> 赞同：1
> 
> 时间：2012-10-19T06:04:09.867
> 
> 标签：android

我们可以在android原生应用程序中进行客户端验证吗？即在XML页面本身我们可以检查字段是否为空，电话号码只有数字等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:17:07.740

您可以通过添加类型（在 xml 中）作为限制用户在 textBox 中仅输入数字字段

```
android:inputType="number" 
```

所以你不需要验证它的数字。但是是的，对于检查空文件，您可能需要通过比较 textBox 值的长度来检查 java 代码。

# spring - spring-mongodb 如何获取 List 的返回类型

> ID：12968261
> 
> 赞同：0
> 
> 时间：2012-10-19T06:04:10.560
> 
> 标签：spring, mongodb

例如，我只想从集合中获取名称： users(name, password, age, email) ，结果类型应该是`List<String>` 我不想`foreach`用来更改`List<User>`为`List<String>`

# php - PHP 数组问题

> ID：12968263
> 
> 赞同：-3
> 
> 时间：2012-10-19T06:04:21.207
> 
> 标签：php, arrays

代码中的问题；

```
<?php
/*
* @array
*/
$input = array("Neo", "Morpheus", "Trinity", "Cypher", "Tank");
$rand_keys = array_rand($input, 2); //What does the two mean?
echo $input[$rand_keys[1]] . "\n"; //What does the 1 stand for? and Why do I have to define $input again if it was defined in $rand_keys?
?> 
```

这些数字是什么意思？谢谢。

编辑：

我努力了：

```
$input = array("test", "test2", "test3", "test4");
$rand_keys = array_rand($input, 2);
$echo = $input[$rand_keys[0]];
echo $echo; 
```

它显示到test3。我只在数组 rand 中做了 2 个。为什么显示3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:06:57.897

那么 array_rand 函数在这里解释：

[http://php.net/manual/en/function.array-rand.php](http://php.net/manual/en/function.array-rand.php)

因此 2 指定了您要选择的条目数。

数字 1 代表数组 rand_keys 中的索引 1 并且您没有再次定义输入，您只是访问输入数组中的一个值。

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:09:53.293

array_rand 将为您提供数组中的一些随机条目。

在这种情况下， 2 指定您需要数组中的两个随机条目。

[1] 表示数组中的第二个元素。（数组元素从 0 开始）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:10:02.467

array_rand() 中的第二个参数表示：

*从数组中选择一个或多个随机条目，并返回随机条目的键（或多个键）。*

1 代表数组中索引为 1 的元素。在这种情况下，它是数组中的第二个元素，因为它从 0 开始索引。

您不再定义任何内容，您只是使用数组`$input`中的第二个键打印元素`$random_keys`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T06:13:32.320

`$rand_keys = array_rand($input, 2); //What does the two mean?`

2 表示，您想随机选择多少个条目。您提到了 2，因此将选择 2 个随机条目。

`echo $input[$rand_keys[1]] . "\n"; //What does the 1 stand for? and Why do I have to define $input again if it was defined in $rand_keys?`

**1代表什么？** `array_rand`返回包含键的数组，包含由 .`1`返回的第二个条目`array_rand`。

**如果 $rand_keys 中定义了 $input，为什么还要重新定义它？** `array_rand`将仅将条目作为`key(s)`非值返回，如果您需要该值，那么您将`$input`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T06:14:13.123

array_rand 函数用于从数组中选择一个或多个随机条目。

在您的代码`array_rand($input,2)`中，2 是您要从`$input`数组中提取的条目数

回答你的问题

`What does the 1 stand for? and Why do I have to define $input again if it was defined in $rand_keys?`

是

```
array_rand returns an array of random keys. 
```

`So to access the value from $input array you need to use it as index only i.e. $rand_key[1] is one of the index of $input that's why you need to mention $input.`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T06:07:23.970

如果您对函数有疑问，请阅读手册：[`array_rand`](http://php.net/manual/en/function.array-rand.php)

第二个参数描述如下：

> ### `num_req`
> 
> 指定要选择的条目数。尝试选择比数组中更多的元素将导致`E_WARNING`级别错误。

这行代码：

```
echo $input[$rand_keys[1]] . "\n"; 
```

打印出`$input`索引等于`$rand_keys[1]`的元素， 的第二个元素`$rand_keys`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T06:07:37.283

```
array_rand — Pick one or more random entries out of an array 
```

“数字”表示数组中随机值的数量。

有关更多信息，请参阅 [http://php.net/manual/en/function.array-rand.php](http://php.net/manual/en/function.array-rand.php)

例如： [http ://www.developphp.com/view_lesson.php?v=477](http://www.developphp.com/view_lesson.php?v=477)

# django - 找不到 Django 目录结构/模块

> ID：12968264
> 
> 赞同：0
> 
> 时间：2012-10-19T06:04:25.103
> 
> 标签：django, directory-structure, webfaction

我使用 WebFaction 进行托管。
在他们的网站上，我创建了一个 Django 项目。
它给了我这个目录设置：

> /home/account_username/webapps/app_name/myproject/myproject/

*   为什么这里使用了两次“myproject”？
*   我不明白每个目录应该用于什么。
*   我不明白每个目录中应该有哪些文件。

    这是每个目录中的内容：

    > app_name
    >          apache2
    >          bin
    >          myproject
    >                  manage.py
    >                  myproject
    >                          **init** .py
    >                          **init** .pyc
    >                          settings.py
    >                          settings.pyc
    >                          tests.py
    >                          urls.py
    >                          urls.pyc
    >                          views.py
    >                          views.pyc
    >                          wsgi.py

*   第一个“myproject”目录应该用于什么？
*   大多数人将这个目录命名为什么？
*   第二个“myproject”目录应该用于什么？
*   大多数人将这个目录命名为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:26:00.597

WebFaction 正在使用 Django 1.4，并且默认项目布局已更改。有关更多详细信息，请参阅[Django 1.4 发行说明](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)。你会得到所有的答案。

# java - 如何使用 DriverManager 在 Java 中实现连接

> ID：12968275
> 
> 赞同：0
> 
> 时间：2012-10-19T06:05:25.213
> 
> 标签：java, connection, connection-pooling, sqlconnection.close

您好，谁能告诉我如何使用连接池概念我有普通的 java 方法，我在其中使用 DriverManager() 和 getConnection()。连接到数据库的方法我在每次调用时都创建新的连接敌人，并且我在 Try catch 块中手动关闭它，但我的应用程序在填充数百条记录时非常慢。我没有使用任何 servlet 或 jsp 我只是开发了一个桌面应用程序请帮助我提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:09:13.507

您可以使用 Apache 的 DBCP 包进行连接池。检查下面的链接。

[http://commons.apache.org/dbcp/api-1.2.2/org/apache/commons/dbcp/package-summary.html#package_description](http://commons.apache.org/dbcp/api-1.2.2/org/apache/commons/dbcp/package-summary.html#package_description)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:50:13.067

有3个连接功能：

**mysql_connect：**正常连接，没有pooling，不能执行存储过程（只是sql）

**mysql_pconnect：**池连接，不能执行存储过程（只是sql）

**mysqli_connect：**正常连接，无pooling，可以执行存储过程（需要mysql 5以上）

供参考：[点击这里](http://ir.php.net/function.mysql-pconnect)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:41:14.147

Metalhead 提到的另一种方法是使用 Java EE 应用程序服务器，例如 Glassfish 和 EJB。将数据库配置为应用程序服务器中的资源后，您只需注入 EntityManager (JPA) 或 DataSource (JDBC)，应用程序服务器将负责处理连接。

# java - Android 多个通知和多个意图

> ID：12968280
> 
> 赞同：16
> 
> 时间：2012-10-19T06:05:42.710
> 
> 标签：java, android, android-notifications

我有一个相当简单的应用程序，它接受用户的输入，然后将其设置为通知。用户可以创建任意数量的通知，只要他/她喜欢。我希望用户单击通知并进入一个名为`ResultActivity`. `ResultActivity`依次`putExtras`从通知意图中读取并将其显示给用户。下面的代码允许我做几乎所有我想做的事情，除了任何时候按下通知，我都会收到`putExtra`最后创建的通知。

```
Intent notificationIntent = new Intent(ctx, MainActivity.class);
PendingIntent contentIntent = PendingIntent.getActivity(ctx, i,notificationIntent,PendingIntent.FLAG_CANCEL_CURRENT);

NotificationManager nm = (NotificationManager) ctx.getSystemService(Context.NOTIFICATION_SERVICE);

Resources res = ctx.getResources();
NotificationCompat.Builder builder = new NotificationCompat.Builder(ctx);
builder.setContentIntent(contentIntent)
    .setSmallIcon(R.drawable.ic_launcher)
    .setLargeIcon(BitmapFactory.decodeResource(res,R.drawable.ic_launcher))
    .setTicker("Remember to " + text.getText())
    .setWhen(System.currentTimeMillis()).setAutoCancel(true)
    .setContentTitle(text.getText());

// Creates an explicit intent for an Activity in your app
Intent resultIntent = new Intent(this, ResultActivity.class);
String pass = text.getText().toString();

resultIntent.putExtra("title", pass);
resultIntent.putExtra("uid", i);

TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
// Adds the back stack for the Intent (but not the Intent itself)
stackBuilder.addParentStack(ResultActivity.class);
// Adds the Intent that starts the Activity to the top of the stack
stackBuilder.addNextIntent(resultIntent);
PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,PendingIntent.FLAG_UPDATE_CURRENT);

new Uri.Builder().scheme("data").appendQueryParameter("text", "my text").build();
builder.setContentIntent(resultPendingIntent);

Notification n = builder.build();
n.flags = Notification.FLAG_NO_CLEAR;
nm.notify(i++, n);
text.setText(null); 
```

1.  打开应用程序

2.  输入“一”

3.  点击确定

4.  通知已发送

5.  打开应用程序

6.  输入“二”

7.  点击确定

8.  通知已发送

现在你有两个通知。一个说“一”，一个说“二”。如果您单击通知“二”，它会将您带到一个显示“二”的屏幕。完美的！

如果您单击通知“一”，它会将您带到显示“二”的屏幕。破碎的！

## 结果活动.java

```
public class ResultActivity extends Activity {
    String title = null;
    TextView text;

    int i=0;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity);
        text = (TextView) findViewById(R.id.textView1);

        title = getIntent().getStringExtra("title");
         i = getIntent().getIntExtra("uid", 0);

        text.setText(title);

    } 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-05-01T03:49:34.710

我知道这是很久以前的事了，但我觉得答案并没有说明您的代码中的问题。所以问题就在这里 `PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,PendingIntent.FLAG_UPDATE_CURRENT);`

因此，您从带有 update_current 标志的 stackbuilder 创建了一个pendingIntent。如果您查看 FLAG_UPDATE_CURRENT 它说

```
 /**
 * Flag indicating that if the described PendingIntent already exists,
 * then keep it but replace its extra data with what is in this new
 * Intent. For use with {@link #getActivity}, {@link #getBroadcast}, and
 * {@link #getService}. <p>This can be used if you are creating intents where only the
 * extras change, and don't care that any entities that received your
 * previous PendingIntent will be able to launch it with your new
 * extras even if they are not explicitly given to it.
 */
public static final int FLAG_UPDATE_CURRENT = 1<<27; 
```

因此，在您的用例中发生的情况是，您从 stackbuilder 创建了两个相同的 pendingintent，第二个意图覆盖了第一个。实际上，您永远不会创建第二个，您只需更新第一个的附加内容。

所以不幸的是，你的用例没有可用的标志，但有一个很好的技巧。您可以做的是使用 resultIntent 的 setAction 并放置一个随机字符串或对您的应用有意义的字符串。

例如。`resultIntent.setAction("dummy_action_" + notification.id);`

这将使您的 resultIntent 足够独特，以便 pendingIntent 将创建它而不是更新以前的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-05-21T14:24:32.627

设置不同`requestCode`有助于我创建和更新当前意图。

```
val pendingIntent = PendingIntent.getActivity(
  this,
  notificationID,
  intent,
  PendingIntent.FLAG_UPDATE_CURRENT
) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-19T06:14:31.097

您创建了多个混合的意图。我清理了代码（但没有测试它）

```
 NotificationManager nm = (NotificationManager) ctx
            .getSystemService(Context.NOTIFICATION_SERVICE);

    Resources res = ctx.getResources();

    // Creates an explicit intent for an Activity in your app
    Intent resultIntent = new Intent(this, ResultActivity.class);
    String pass = text.getText().toString();
    resultIntent.setData(new Uri.Builder().scheme("data")
            .appendQueryParameter("text", "my text").build());
    resultIntent.putExtra("title", pass);
    resultIntent.putExtra("uid", i);

    TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
    // Adds the back stack for the Intent (but not the Intent itself)
    stackBuilder.addParentStack(ResultActivity.class);
    // Adds the Intent that starts the Activity to the top of the stack
    stackBuilder.addNextIntent(resultIntent);
    PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,
            PendingIntent.FLAG_UPDATE_CURRENT);

    NotificationCompat.Builder builder = new NotificationCompat.Builder(ctx);
    builder.setSmallIcon(R.drawable.ic_launcher)
            .setLargeIcon(
                    BitmapFactory.decodeResource(res,
                            R.drawable.ic_launcher))
            .setTicker("Remember to " + text.getText())
            .setWhen(System.currentTimeMillis()).setAutoCancel(true)
            .setContentTitle(text.getText())
            .setContentIntent(resultPendingIntent);

    Notification n = builder.build();
    n.flags = Notification.FLAG_NO_CLEAR;
    nm.notify(i++, n);

    text.setText(null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-18T07:51:42.393

使用一些随机 requestCode 来分隔两个通知

```
PendingIntent pendingIntent = PendingIntent.getActivity(context, CommonTools.getRandomNumber(1, 100),
            notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);

public int getRandomNumber(int min, int max) {
    // min (inclusive) and max (exclusive)
    Random r = new Random();
    return r.nextInt(max - min) + min;
} 
```

# java - Spring HTTP 调用程序在处理下一个请求之前等待一秒钟

> ID：12968281
> 
> 赞同：1
> 
> 时间：2012-10-19T06:05:43.050
> 
> 标签：java, spring, spring-remoting, httpinvoker

我已经设置了一个 spring http 调用程序示例，如此处所述[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/remoting.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/remoting.html)在第 20.4 节中

如果我连续执行多个服务调用（请参阅我的 for 循环），则单个调用之间是一秒钟，尽管服务器在不到 4 毫秒的时间内处理该方法。

有任何想法吗。

斯特凡

这里的配置和调用：

```
<!-- server side -->
<bean name="configurationServiceExporter"
class="org.springframework.remoting.httpinvoker.SimpleHttpInvokerServiceExporter">
    <property name="service" ref="configurationService" />
    <property name="serviceInterface"
        value="remote.service.ConfigurationService" />
</bean>
<bean id="httpServer"
    class="org.springframework.remoting.support.SimpleHttpServerFactoryBean">
    <property name="contexts">
        <util:map>
                    <entry key="/remoting/ConfigurationService" value-ref="configurationServiceExporter" />
                    </util:map>
    </property>
    <property name="port" value="${port.httpinvoker}" />
</bean>

<!-- client side -->
<bean id="configurationServiceProxy"     class="org.springframework.remoting.httpinvoker.HttpInvokerProxyFactoryBean">
    <property name="serviceUrl"
        value="http://localhost:7777/remoting/ConfigurationService" />
    <property name="serviceInterface"
        value="remote.service.ConfigurationService" />
</bean>

/** here the service call*/
@Component
public class ServiceConsumer {

private ConfigurationService configurationService;

public void do(){
 for (int i = 0; i < 10; i++) 
    this.configurationService.getConfigurationValue(SMTP_HOST);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:41:10.990

发现问题。它没有连接到 Spring HTTP Invoker。我更新到 Java 7。当我使用 Java 6 运行我的应用程序时，它的工作方式与更新前一样（在请求之间无需等待一秒钟。如果我知道更多，我会回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:21:14.580

我刚刚遇到了同样的问题：

*   春季远程
*   “正好” 1 秒的延迟
*   爪哇 7

不幸的是，我无法找到这种奇怪行为的原因，但存在一种解决方法：使用 jetty 而不是`SimpleHttpServerFactoryBean`.

这归结为稍微更改 xml 配置，具体如何描述[here](http://code.google.com/p/jianwikis/wiki/SpringHttpRemotingWithEmbeddedJettyServer)。

延误消失了；`SimpleHttpServerFactoryBean`与在 Java 6中使用相比，触发请求的速度甚至似乎加快了。

# objective-c - 每次视图出现时 for 循环复合中的动画

> ID：12968282
> 
> 赞同：0
> 
> 时间：2012-10-19T06:05:46.383
> 
> 标签：objective-c, ios, xcode

每次视图加载时，我都试图获得一组新的随机动画，但相反，我让动画成倍增加并导致不可避免的应用程序崩溃！每次出现视图时如何重新开始的任何帮助

```
- (void)startAnimation
   {
int n;

for (n=0; n<150; n++){

    UIBezierPath *bubblePath = [UIBezierPath bezierPath];
    [bubblePath moveToPoint:P(arc4random()%768, arc4random()%1024)];
    [bubblePath addCurveToPoint:P(arc4random()%768, arc4random()%1024)
                  controlPoint1:P(arc4random()%768, arc4random()%1024)
                  controlPoint2:P(arc4random()%768, arc4random()%1024)];

    CALayer *bubble = [CALayer layer];
    bubble.bounds = CGRectMake(0, 0, 10.0, 10.0);
    bubble.position = CGPointMake(arc4random()%768, arc4random()%1024);
    bubble.contents = (id)([UIImage imageNamed:@"Bubble.png"].CGImage);
    [self.view.layer addSublayer:bubble];

    CAKeyframeAnimation *bubbleAnim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
    bubbleAnim.path = bubblePath.CGPath;
    bubbleAnim.rotationMode = kCAAnimationRotateAuto;
    bubbleAnim.duration = 100;
    bubbleAnim.repeatCount = HUGE_VALF;
    [bubble addAnimation:bubbleAnim forKey:@"bubble"];

}

    int i;

    for (i=0; i<8; i++){

        UIBezierPath *tinyPath = [UIBezierPath bezierPath];
        [tinyPath moveToPoint:P(arc4random()%400+840, arc4random()%75+125)];
        [tinyPath addCurveToPoint:P(-400, arc4random()%75+150)
                    controlPoint1:P(arc4random()%450, arc4random()%200+250)
                    controlPoint2:P(arc4random()%300, arc4random()%200+150)];

        CALayer *tinyFish = [CALayer layer];
        tinyFish.bounds = CGRectMake(0, 0, 150.0, 150.0);
        tinyFish.position = CGPointMake(868, 800);
        tinyFish.contents = (id)([UIImage imageNamed:@"Fish3.png"].CGImage);
        [self.view.layer addSublayer:tinyFish];

        CAKeyframeAnimation *tinyAnim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
        tinyAnim.path = tinyPath.CGPath;
        tinyAnim.rotationMode = kCAAnimationRotateAuto;
        tinyAnim.duration = 15;
        tinyAnim.repeatCount = HUGE_VALF;
        [tinyFish addAnimation:tinyAnim forKey:@"fish"];

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:04:30.937

```
[UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationCurveLinear animations:^
{
     //do your animations here
}completion:^(BOOL finished)
{
    //remove all layers here. Eventually add here another animation where you fade out all layers and in that animation's completion block remove them from the view
}]; 
```

希望这可以帮助。干杯!

# ios4 - SHKTwitter在iphone中的followMe功能

> ID：12968294
> 
> 赞同：0
> 
> 时间：2012-10-19T06:07:27.070
> 
> 标签：ios4

我不知道如何实现 twitter followMe 功能。

我找到了 SHKTwitter 的 followMe 功能，但我没有任何关于它的参考信息。

请告诉我或发送一些样品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:24:29.713

如果您查看源代码，您会发现它基本上是在发出 Twitter API 请求，以将“SHKTwitterUsername” (SHKConfig.h) 中定义的帐户添加到用户的朋友列表中（follows）。

因此，如果您有一个 Twitter 帐户用于向您的应用程序用户发送推文，您可以在您的应用程序中添加一个名为 [SHKTwitter followme] 的关注按钮，并将 SHKTwitterUsername 配置为您的 Twitter 句柄。

希望这可以帮助！

# sql-server-2008 - sql server 代理作业迁移后电子邮件通知主题更改

> ID：12968295
> 
> 赞同：1
> 
> 时间：2012-10-19T06:07:36.343
> 
> 标签：sql-server-2008, sql-server-agent

我的服务器上有一份关于成功和失败的电子邮件通知的工作。邮件通知的主题为

> [作业成功。] SQL Server 作业系统：“XYZ”在 \123 完成。

或者

> [作业失败。] SQL Server 作业系统：“XYZ”在 \123 完成。

现在我已将作业迁移到另一台服务器，但邮件通知就像

> SQL Server 作业系统：“XYZ”在 \456 上完成。

为什么主题不包含`[The job succeeded.]`or `[The job failed.]`？如何在电子邮件通知的主题行中找回它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-09T14:03:20.730

答案可能是您将作业迁移到的 SQL Server 版本。我在 SQL Server 2008 R2（不在主题行中添加作业的状态）和 SQL Server 2012（在状态行中添加作业的状态）之间遇到了同样的问题。SQL Server 2012 似乎改进了数据库邮件电子邮件。谢天谢地，我找到了这个链接：[http ://shaunjstuart.com/archive/2012/12/another-sql-2012-improvement/](http://shaunjstuart.com/archive/2012/12/another-sql-2012-improvement/)

# asp.net - 如果我在 Mozilla 中按 alt + tab，文本框会显示 TextBoxWatermarkExtender 的 WaterMarkText

> ID：12968299
> 
> 赞同：1
> 
> 时间：2012-10-19T06:07:47.877
> 
> 标签：asp.net

这是我的代码...如果我在同一页面上，它工作正常，但如果我的重点是accountinginfo 文本框并且我按下了“alt + tab”（切换窗口），那么如果我来到同一页面，文本框会显示文本框中的 WaterMarkText（带焦点），即带有文本框 CSS

```
<asp:TextBox ID="accountinginfo" runat="server" TextMode="MultiLine" Width="450px" Height="80" CssClass="textfield100percaps"></asp:TextBox>

<act:TextBoxWatermarkExtender ID="accinfo" runat="server" TargetControlID="accountinginfo" Enabled="true" WatermarkText="Accounting Information" WatermarkCssClass="watermarkOn" /> 
```

# iphone - 在 iPhone 中检测图片的图像位置

> ID：12968300
> 
> 赞同：1
> 
> 时间：2012-10-19T06:07:54.257
> 
> 标签：iphone, ios, ios5

我正在开发一个相机应用程序，我拍摄的照片应该存储拍摄地点的位置。所以也许过了一段时间，如果我想知道一张特定照片的拍摄地点，我应该点击一个按钮，比如在我的相册上方，它应该将我重定向到地图视图。在那里，它应该显示我拍摄所有照片的地方，每个地方都有一个相册。

关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:12:37.527

**将元数据**添加到**UIImage**。UIImage 的相同元数据可用于了解图像的位置。

 **请参阅[Save_Photo_to_Album_with_Metadata](http://docs.xamarin.com/ios/recipes/Media/Video_and_Photos/Save_Photo_to_Album_with_Metadata)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T09:25:22.087

这里有一些与您的问题相关的链接。

[从 UIImage 获取 Exif 数据](https://stackoverflow.com/questions/1238838/uiimagepickercontroller-and-extracting-exif-data-from-existing-photos)

[UIImagePickerController 并从现有照片中提取 EXIF 数据](https://stackoverflow.com/questions/9766394/get-exif-data-from-uiimage-uiimagepickercontroller)**

# iphone - uibuttons的跳跃效果

> ID：12968301
> 
> 赞同：4
> 
> 时间：2012-10-19T06:08:12.180
> 
> 标签：iphone, ios, uibutton, uianimation

在我的应用程序中，我使用了移动子视图。如果它达到 y=150，我想制作一个跳跃效果的按钮，我尝试了这个链接，[将反弹效果添加到 UIImageView 的外观，](https://stackoverflow.com/questions/7787494/adding-bounce-effect-to-appearance-of-uiimageview)它在水平方向上工作，我想要一个垂直方向，这是我的代码，

```
-(void)godown 
 {
if (movingview.center.y < 150) movingview.center = CGPointMake(movingview.center.x, movingview.center.y +5);
if(movingview.center.y ==150)
{
  [UIView beginAnimations:@"bounce" context:nil];
  [UIView setAnimationRepeatCount:3];
  [UIView setAnimationRepeatAutoreverses:YES];  
  CGAffineTransform transform = CGAffineTransformMakeScale(1.3,1.3);
  bt1.transform = transform;
  bt2.transform=transform;
 [UIView commitAnimations];  
}
} 
```

请帮我改成跳跃效果（垂直）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-19T10:30:31.790

尝试这个。您可以进行一些更改，使其适合您的需要，

```
 CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"transform"];
        anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
        anim.duration = 0.125;
        anim.repeatCount = 1;
        anim.autoreverses = YES;
        anim.removedOnCompletion = YES;
        anim.toValue = [NSValue valueWithCATransform3D:CATransform3DMakeScale(1.2, 1.2, 1.0)];
        [senderView.layer addAnimation:anim forKey:nil]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-02T15:19:03.770

**斯威夫特 3**

在这里，我找到了一篇关于这个有吸引力的流行动画的有用帖子。希望这是你想要的

[![在此处输入图像描述](../Images/8cc57e5536bc165085417d296921998d.png)](https://i.stack.imgur.com/VOd2G.gif)

```
@IBAction func btnCancel_click(_ sender: Any)
{
    btnCancel.transform = CGAffineTransform(scaleX: 0.50, y: 0.50)
    UIView.animate(withDuration: 2.0,
                   delay: 0,
                   usingSpringWithDamping: 0.2,
                   initialSpringVelocity: 6.0,
                   options: .allowUserInteraction,
                   animations: { [weak self] in
                    self?.btnCancel.transform = .identity
        },
                   completion: nil)
} 
```

来源：[http ://evgenii.com/blog/spring-button-animation-with-swift/](http://evgenii.com/blog/spring-button-animation-with-swift/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T06:20:08.943

试试这个代码..

```
- (IBAction)bounce {
    CABasicAnimation *theAnimation;
    theAnimation=[CABasicAnimation animationWithKeyPath:@"transform.translation.y"];///use transform
    theAnimation.duration=0.4;  
    theAnimation.repeatCount=2;
    theAnimation.autoreverses=YES;  
    theAnimation.fromValue=[NSNumber numberWithFloat:1.0]; 
    theAnimation.toValue=[NSNumber numberWithFloat:-20];
    [yourButton.layer addAnimation:theAnimation forKey:@"animateTranslation"];//animationkey    
} 
```

[从此](http://iphonedevsdk.com/discussion/comment/295325)链接查看完整答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-22T10:57:25.187

```
UIView.animateWithDuration(0.1 ,
                               animations: {
                                self.buttonName.transform = CGAffineTransformMakeScale(1.3, 1.3)
        },
                                completion: { finish in
                                UIView.animateWithDuration(0.1){
                                self.buttonName.transform = CGAffineTransformIdentity
                                }
    }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-22T09:17:49.057

还有快速版本

```
 func jumpButtonAnimation(sender: UIButton) {
        let animation = CABasicAnimation(keyPath: "transform.scale")
        animation.toValue = NSNumber(float: 1.3)
        animation.duration = 0.1
        animation.repeatCount = 0
        animation.autoreverses = true
        sender.layer.addAnimation(animation, forKey: nil)
    } 
```

# eclipse - 为 Eclipse WTP 安装 Maven 集成时出错

> ID：12968304
> 
> 赞同：5
> 
> 时间：2012-10-19T06:08:25.780
> 
> 标签：eclipse, gwt, maven, eclipse-plugin, gwt-maven-plugin

我正在尝试按照此处的说明为 Eclipse Indigo 3.7.2（在 Ubuntu 上运行）安装 gwt-maven-plugin：http: [//uptick.com.au/content/getting-started-gwt-maven-and-蚀](http://uptick.com.au/content/getting-started-gwt-maven-and-eclipse)

但是，当我执行安装“Maven Integration for Eclipse WTP”的步骤时，出现以下错误：

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：用于 WTP 的 Maven 集成（可选）0.12.0.20110421-1500 (org.maven.ide.eclipse.wtp.feature.feature.group 0.12.0.20110421-1500) 缺少要求：用于 WTP 的 Maven 集成（可选）0.12。 0.20110421-1500 (org.maven.ide.eclipse.wtp.feature.feature.group 0.12.0.20110421-1500) 需要 'org.maven.ide.eclipse.feature.feature.group [0.10.0,1.0.0)'但找不到

关于 SO的一个[类似问题](https://stackoverflow.com/questions/4297533/error-while-installing-maven-integration-for-eclipse)建议勾选“联系所有更新站点”，但这对我不起作用。我还根据此线程的建议添加了 Galileo 和 Helios 更新站点（除了 Indigo）：http: [//www.eclipse.org/forums/index.php/t/206143/](http://www.eclipse.org/forums/index.php/t/206143/)

任何其他想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T06:30:38.790

我相信 m2eclipse 已经作为 m2e 迁移到 eclipse.org，在[http://download.eclipse.org/technology/m2e/releases/上有一个新的更新站点，并且来自](http://download.eclipse.org/technology/m2e/releases/)[http://](http://download.eclipse.org/m2e-wtp/releases/)的更新的 Maven Integration for WTP（孵化）功能[下载.eclipse.org/m2e-wtp/releases/](http://download.eclipse.org/m2e-wtp/releases/)。试试那些。

请参阅[http://www.sonatype.com/people/2011/06/where-is-m2eclipse/](http://www.sonatype.com/people/2011/06/where-is-m2eclipse/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T15:51:25.467

我遇到了同样的问题，使用[http://download.eclipse.org/m2e-wtp/releases/](http://download.eclipse.org/m2e-wtp/releases/)安装 Maven Integration for WTP 有帮助。谢谢。

# php - 遍历文件夹

> ID：12968305
> 
> 赞同：3
> 
> 时间：2012-10-19T06:08:34.213
> 
> 标签：php

我一直在使用我在网上找到的一个 snipit 来使用我的 PHP 脚本显示目录中的文件和文件夹。这部分工作正常，但我希望能够单击文件夹并获得一个类似的 html 页面来显示它的内容，并且能够在浏览器中打开文本文件（如果文本文件在起始目录）。

目前，当我单击一个文件夹时，会打开一个老式的页面，其中没有 html 文件。这样做的唯一方法是在每个文件夹中创建一个新的 PHP 脚本并链接到它吗？我尝试使用 DirectoryIterator 类，但它给了我一个错误。我不再有 DirectoryIterator 的代码片段，但它类似于“找不到类 DirectoryIterator”。

这是我现在正在使用的代码（工作）：

```
$arrayImports = array ();

if ($handle = opendir ($importLogPath)
{
while (false !== ($entry = readdir ()))
   {
       chop ($entry);
       if ($entry != "."  $entry != "..")
       {
          $arrayImports [] = "<p><a href=$importLogPath$entry target=_blank>$entry</a></p>";
       }
    }
   closedir($handle);
}

arsort ($arrayImports);
foreach ($arrayImports as $value)
{
  print "<li>$value</li>";
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:08:52.027

你在寻找这样的东西吗？ [编码资源管理器](http://encode-explorer.siineiolekala.net/explorer/index.php)

我将它用于一个旧项目......它非常酷。您还可以添加 ajax 来浏览文件夹而无需刷新页面。

再见

# c# - 错误消息为“字符串未被识别为有效的日期时间”。

> ID：12968310
> 
> 赞同：0
> 
> 时间：2012-10-19T06:09:12.037
> 
> 标签：c#, asp.net, string, datetime

我的代码：

```
DateTime? birthDate = DateTime.Parse(filterDictionary.ContainsKey("DOB") ? filterDictionary["DOB"] : string.Empty); 
```

我收到错误消息，因为“字符串未被识别为有效的日期时间”。如何解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:12:04.300

问题（至少其中一个）是您无法将空字符串解析为`DateTime`.

将您的代码行更改为仅在找到密钥时才移动解析，并在没有密钥时返回 null 而不是解析：

```
DateTime? birthDate = filterDictionary.ContainsKey("DOB") ? DateTime.Parse( filterDictionary["DOB"]) : (DateTime?) null; 
```

另一个问题可能是您的字典 DOB 值实际上无法转换为`DateTime`. 如果上述代码不起作用，请编辑您的问题并在`filterDictionary["DOB"]`收到此错误时发布值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:14:12.877

当你用一个空字符串呈现它时，`DateTime.Parse`它*总是*会失败。

不清楚你看到这个的时间是字典中有*数据*但它是无效的，还是没有数据并且它正在解析`string.Empty`。还要注意`DateTime.Parse`returns `DateTime`，不是`DateTime?`。如果您希望该`null`条目不在字典中，我实际上会使用：

```
DateTime? birthDate = null;
string dobText;
if (filterDictionary.TryGetValue("DOB", out dobText))
{
    birthDate = DateTime.Parse(dobText);
} 
```

也许：

```
string dobText;
DateTime? birthDay = filterDictionary.TryGetValue("DOB", out dobText)
    ? DateTime.Parse(dobText) : (DateTime?) null; 
```

请注意，您需要将第二个或第三个操作数中的至少一个强制转换为`null`此处，以便编译器可以计算出条件表达式的类型。

您还应该考虑一个简单的调用`DateTime.Parse`是否合适：

*   如果您知道您期望的具体格式，请致电`DateTime.ParseExact`
*   如果这是*用户输入*，您可能应该使用`TryParse`或`TryParseExact`
*   如果不是用户输入，您可能应该指定解析文化`CultureInfo.InvariantCulture`
*   如果它是 GUI 中的直接用户输入，有没有办法可以避免一开始就将其作为文本获取？

# asp.net - 无法识别的配置部分 system.web/protocols。错误

> ID：12968313
> 
> 赞同：0
> 
> 时间：2012-10-19T06:09:14.923
> 
> 标签：asp.net, web-config

我收到无法识别的配置部分 system.web/protocols 错误。可能是什么原因？在 system.web 标签内是否允许身份冒名顶替..？？有关更多详细信息，请参阅下面的 web.config 文件。

```
<system.web>
  <identity impersonate="true" userName="admin" password="adminpwd"/>
  <pages>
    <controls>
      <add assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" namespace="System.Web.UI" tagPrefix="asp"/>     
    </controls>
  </pages>
  <compilation debug="true" strict="false" explicit="false">
    <assemblies>
      <add assembly="Microsoft.Practices.EnterpriseLibrary.Common, Version=3.1.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
      <add assembly="System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>      
    </assemblies>
  </compilation>
  <httpHandlers>
    <remove verb="*" path="*.asmx"/>
    <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>
    <add verb="GET" path="CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=10.2.3600.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
  </httpHandlers>
  <httpModules>
    <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
  </httpModules>
  <authentication mode="Windows"/>
  <sessionState cookieless="false" timeout="120"/>
  <customErrors mode="Off"/>
  <httpRuntime executionTimeout="1500" maxRequestLength="80000" requestLengthDiskThreshold="80000" useFullyQualifiedRedirectUrl="false" minFreeThreads="8" minLocalRequestFreeThreads="4" appRequestQueueLimit="5000" enableKernelOutputCache="true" enableVersionHeader="true" requireRootedSaveAsPath="true" enable="true" shutdownTimeout="90" delayNotificationTimeout="5" waitChangeNotification="0" maxWaitChangeNotification="0" enableHeaderChecking="true" sendCacheControlHeader="true" apartmentThreading="false"/>
</system.web> 
```

这是错误信息

```
Error   102 Unrecognized configuration section system.web/protocols. (C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Config\web.config line 297) 
```

当我从另一台机器复制源代码时也会发生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:35:29.510

问题已解决。我查看了 c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Config\web.config 而不是项目 web.config 文件，只删除了空的协议标签（我真的不明白为什么！！！）我没有在项目 Web.config 文件中添加任何一行。我希望这将帮助任何有同样问题的人。

# c++ - C++ map::find 或 map::iterator 更有效的复杂性

> ID：12968314
> 
> 赞同：0
> 
> 时间：2012-10-19T06:09:22.040
> 
> 标签：c++, algorithm, map

我们知道 map::find 返回一个迭代器，指向它找到键位置的位置。此外，作为二进制搜索操作，复杂度为 O(logn)。所以它似乎在内部维护了一个迭代器，这将是成功的回报。所以哪一个是更有效的查找或迭代器，因为我认为两者都会在运行时提供相同的复杂性（我可能不正确）。那么您能否建议在哪里使用 find 以及在哪里使用迭代器。在其中一个实现中，我需要查看特定键的映射（因为它可以包含 N 个键，我们只对其中的 m 个键感兴趣）。所以无论 find 会更有效还是迭代器。还有什么是处理查找失败案例的好方法，因为我不想在代码中添加太多 if else 案例，这会增加复杂性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:14:40.337

我不完全确定您的意思，但使用`std::map<...>::find()`将比`std::lower_bound()`在地图的迭代器上使用更有效：内部树上的二进制搜索只是导航树并且具有地图大小的`O(log(n))`性能。也会进行二分搜索，但需要使用和/或移动迭代器。因此，它会有性能。我认为它甚至不应该编译，但我不完全确定它是否不能编译。`n``std::lower_bound()``operator++()``operator--()``O(n)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:15:47.183

首先，他们做两件不同的事情。其次，这取决于实施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:43:38.477

根据经验：如果您可以在通用算法（`std::find`此处）和同名容器特定算法（此处）之间进行选择`std::map<...>::find`，则使用容器特定算法。

如果它不比通用版本更有效，那么没有人会打扰实现一个特定于容器的容器，那将是浪费时间。

# ruby-on-rails - Rake db:drop 不清除我的旧表

> ID：12968315
> 
> 赞同：0
> 
> 时间：2012-10-19T06:09:23.293
> 
> 标签：ruby-on-rails, postgresql, rake, rails-migrations

我的用户迁移过去看起来像这样：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :login
      etc 
```

现在看起来像这样：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :username
      etc 
```

那么，为什么我会看到这个？

```
rake db:drop
rake db:create
rake db:migrate
rails console
> User.new
+----+-------+------------------+---------------+-------------------+------------+------------+
| id | login | crypted_password | password_salt | persistence_token | created_at | updated_at |
+----+-------+------------------+---------------+-------------------+------------+------------+
|    |       |                  |               |                   |            |            |
+----+-------+------------------+---------------+-------------------+------------+------------+
1 row in set 
```

我正在使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:18:15.353

增加用户迁移的文件名解决了这个问题。当我尝试更改其内容而不更改文件名时，我认为 Rails 正在缓存迁移的内容。

# windows-8 - 是否可以在 WinRT 中创建 IME？

> ID：12968316
> 
> 赞同：5
> 
> 时间：2012-10-19T06:09:26.203
> 
> 标签：windows-8, windows-runtime, ime

Windows 8/Windows RT 中内置的孟加拉语键盘布局一点都不友好。因此，对于大多数用户来说，使用 IME 是唯一的选择。Win32 中有相当多的孟加拉语输入法编辑器。它们在 Windows 8 中运行良好。

但对于 Windows RT，目前没有解决方案。是否可以使用纯 WinRT API 编写 IME？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:29:54.990

此[MSDN 链接中提供了编写 IME 的良好信息](http://msdn.microsoft.com/en-in/library/windows/apps/hh967426.aspx)

我从文章中提出了一些重要的特征

Windows 8 IME 的要求

> 第三方 IME 必须满足以下要求： •必须经过数字签名。•必须支持文本服务框架 (TSF)，并且必须设置正确的 IME 标志才能在 Windows 8 中正常运行。 •必须遵循 Windows 应用商店应用程序的 UX 指南并与 Windows 应用商店应用程序兼容。第三方 IME 不支持满足这些要求被阻止在新的 Windows 8 UI 中运行，但它仍然可以在桌面上运行。
> 
> 此外，Windows Defender 还会从系统中删除恶意 IME。因此，熟悉 Windows 8 的 IME 编码要求非常重要。有关详细信息，请参阅 IME 开发指南和清单。

下一个 LINK 显示了开发[IME的指南](http://msdn.microsoft.com/en-in/library/windows/apps/hh967425.aspx)

由于您可以为 Windows 商店制作应用程序，因此您可以通过 Windows 商店访问 WinRT 中的 IME 应用程序。检查 Windows 商店中是否有任何孟加拉语 IME 应用程序

# java - 如何从 WSDL 生成简单的 java 类？

> ID：12968319
> 
> 赞同：3
> 
> 时间：2012-10-19T06:09:31.183
> 
> 标签：java, android, eclipse, wsdl

我想从这个 WSDL url 生成一个简单的 java 类：

```
https://xyz.pqr.com/Portal/Service.svc?wsdl 
```

我怎样才能做到这一点？我正在寻找可以生成代码的工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:24:37.387

您可以使用 Apache Axis。

它带有一个工具，即 WSDL2Java 转换器。

使用以下命令。

```
wsdl2java.bat -uri [URL of WSDL file] (on Windows) 
```

或者

```
wsdl2java.sh -uri [URL of WSDL file] on Linux 
```

通过这个，您可以从 WSDL 生成存根类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-13T07:08:22.340

对我来说，为我的 WCF Web 服务生成 java 类的最佳工具是

[http://easywsdl.com/](http://easywsdl.com/)

它使用 ksoap2 库并支持复杂类型（具有继承性）、属性中的数据、标头值和 WCF 扩展，如 Guid 数据类型和具有 IsReference 属性的数据协定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T06:11:23.810

这里的一些示例可能会对您有所帮助：[Apache CXF 项目](http://cxf.apache.org/docs/wsdl-to-java.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T06:17:51.143

或者只是使用 JDK 文档，从 1.6 开始，JDK 包括标准的 JAX-WS 功能，包括使用 wsimport 从 WSDL 生成客户端存根的工具。

# c# - 为什么电话号码数据类型/库不存在

> ID：12968320
> 
> 赞同：2
> 
> 时间：2012-10-19T06:09:38.570
> 
> 标签：c#, dll, types, phone-number

只是想知道是否有人知道 C# 的任何低级电话号码存储结构。我惊讶地发现，我所有的搜索都被证明对这样一个图书馆毫无结果。

本质上，我希望能够接受一个字符串电话号码输入（在其所有不同的优点），并验证和分割给定的字符串到它的各个部分（IE：国家代码，地区代码，号码），同时提供一个通用格式来存储这些数据。

有没有这样的图书馆存在？如果没有，知道为什么没有尝试过这样的事情吗？（问题真的那么难吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T06:14:54.573

我认为主要原因是人与人之间似乎没有写电话号码的真正标准方式。例如，居住在小岛上的人们往往没有地区代码，在呼叫同一岛屿的居民时也不需要国家代码。

当您搬到更大的地方时，这种情况会发生变化。另外，我看到某些数字写成`(XXXX)XXXXX`or`XXXXX-XXXXX`或`XXXXXXXXXX`。

处理这个问题的标准方法似乎是使用正则表达式。开发人员通常采用几种可能的输入格式，并使用正则表达式来验证和转换数字的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:20:53.403

所以事实证明，毕竟有一个非常棒的库可用。

原始 Java 版本：[http ://code.google.com/p/libphonenumber/](http://code.google.com/p/libphonenumber/)

C#版本：[https ://bitbucket.org/pmezard/libphonenumber-csharp/wiki/Home](https://bitbucket.org/pmezard/libphonenumber-csharp/wiki/Home)

我在我的[博客](http://maxgershkovich.wordpress.com/2012/10/25/phone-number-parsing-is-a-bitch/)上讨论图书馆。

# string - 如何替换之间可能有空格的子字符串

> ID：12968321
> 
> 赞同：0
> 
> 时间：2012-10-19T06:09:39.540
> 
> 标签：string, lua, design-patterns, string-matching

在 lua 中，我需要检测一个可能包含空格的子字符串。

例如，

我有一个字符串

```
local str = "Hel lo World" 
```

如何从此字符串中替换“Hello”？

我需要使用模式吗？

**编辑**

我想出了这样的东西

```
local pattern = "[H][ ]*[e][ ]*[l][ ]*[l][ ]*[o]"
str:gsub(pattern,"text_to_replace") 
```

那是最优的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:29:14.033

你可以这样写一个模式生成器：

```
local spaced_match = function(s)
    local pattern = ''
    for i=1,#s do
       pattern = pattern..s:sub(i,i)..' *'
    end
    return pattern
end

local h = 'hel lo world'
local newh = h:gsub(spaced_match('hello'),'text_to_replace') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:26:15.247

创建字母/空格所在的掩码

剥离空间

匹配/替换文本

撤消字母/空格的掩码

如果您想创建一个功能来做到这一点。

# jms - 从 Camel 中的 InOnly 消息中读取 JMS 属性

> ID：12968323
> 
> 赞同：0
> 
> 时间：2012-10-19T06:09:56.977
> 
> 标签：jms, apache-camel

使用 Apache Camel 发送（InOnly）JMS 消息时，我可以读回发送时可能已在消息上自动设置的不同 JMS 标头吗？

```
from("foo:bar")
 .to(ExchangePattern.InOnly,"jms:queue:whatever")
 .log("msg id set = ${in.header.JMSMessageId}"); 
```

我只是不知道如何“以一种方式”发送消息，但之后将发送的 JMS 消息作为“in”消息保留在路由中。

背景：我知道我可以提供一些值，但如果它们由实际的 JMS 实现设置会更容易。例如，在这种情况下，我想使用 WebSphere SIBus、WebSphere MQ 和 ActiveMQ。最好依赖 WebSphere MQ 的内部消息 id 格式，因为它只会索引某些消息格式。它可能是 WebSphere SIBus 实现的类似方面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:24:52.500

此功能[从 2.10.3 和 2.11.0 开始](https://issues.apache.org/jira/browse/CAMEL-5763)可用。

# java - 如何使用 JDT 以编程方式重命名方法

> ID：12968328
> 
> 赞同：9
> 
> 时间：2012-10-19T06:10:23.877
> 
> 标签：java, refactoring, abstract-syntax-tree, eclipse-jdt

我的目标是以编程`Refactor >> Rename`方式为 Java 源文件中的方法调用 Eclipse 命令。像这样重命名方法也应该将更改应用于使用/引用此方法的所有实例。

我相信 JDT 有一个 Refactoring API，但找不到任何文档或教程。

有人可以指出我正确的方向。

编辑：运行时不需要更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T17:29:59.080

我认为您最有希望的方法是转到 eclipse 源代码。

1.  下载你想要的版本，带有源代码。特别是，您需要 JDT 插件的源代码，它包含在“经典”版本中。以下所有内容均基于[4.2.1](http://www.eclipse.org/downloads/packages/eclipse-classic-421/junosr1)。
2.  启动到一个空的工作区。
3.  文件->导入：插件和片段
4.  从“活动目标平台”、“从所有选择...”、“带有源文件夹的项目”中导入
5.  至少选择 org.eclipse.jdt.ui 和 org.eclipse.ltk.core.refactoring。

对应的起点`Refactor >> Rename`是`org.eclipse.jdt.ui.actions.RenameAction`。那是为了整体重命名重构，它可以将任何东西从方法重命名为文件。与您更相关的是`RenameSupport.create(IMethod, String, int)`.

您可以在那里看到一个`RenameRefactoring`类是围绕一个处理器（a`RenameVirtualMethodProcessor`或 a ）创建的`RenameNonVirtualMethodProcessor`，然后发送到`RenameSupport`. `RenameSupport`处理所有 UI 以配置您的重构，但由于您是以编程方式进行的，因此您只需要使用各种方法`RenameRefactoring`配置的和处理器。`processor.set*()`

现在您有一个已配置的`RenameRefactoring`. 怎么办？Eclipse 中的实际操作是跨两个 Job 实现执行的。查看`RefactoringExecutionHelper.Operation`并`PerformChangeOperation`了解详细信息。

这一切归结为什么？抛开异常处理、撤消堆栈和工作区检查点的所有细节不谈，您可以使用以下步骤重命名“虚拟”方法：

```
IMethod methodToRename = <....>
RenameMethodProcessor processor = new RenameVirtualMethodProcessor(methodToRename)
processor.setUpdateReferences(true);
processor.setNewElementName("newMethodName");

RenameRefactoring fRefactoring = new RenameRefactoring(processor);
fChange= fRefactoring.createChange(new NullProgressMonitor());
fChange.initializeValidationData(new NullProgressMonitor());
fChange.perform(new NullProgressMonitor()) 
```

那里有很多用于撤消、进度条、异步执行、工作区检查点等的支持代码，您可能需要或可能需要这些代码，具体取决于您希望如何运行它。但这就是如何运行重构的胆量。

# objective-c - 一个接一个地动态生成标签

> ID：12968331
> 
> 赞同：0
> 
> 时间：2012-10-19T06:10:42.270
> 
> 标签：objective-c, xcode, uilabel

我想根据数组 count 以编程方式生成一些标签。

我为此找到了很多链接，但无法得到正确的答案。我正在尝试生成

这些标签在 for 循环中。任何人都可以给我一些编码示例来满足我的要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:17:14.837

像这样的东西？

```
float y = 40;
for (int i = 0; i < [myArray count]; i++) {
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(40, y, 300, 30)];
    [label setText:[myArray objectAtIndex:i]];
    [self.view addSubview:label];
    y += 40;
} 
```

这给出了如何在循环中生成标签的简单演示，它们的 y 原点每次递增 40。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:16:33.937

```
NSMutableArray *arr=[[NSMutableArray alloc]init];
//generate labels like this
for(int i=0;i<5;i++){
//set the frame or add to view or do anything with your label
UILabel *lbl=[[UILabel alloc] init];

[arr addObject:lbl];
}

//When you need to use , just iterate through the array and cast the objects back into UILabel
Uilabel *temp;
for(temp in arr){
UILabel *lbl=(UILabel*)temp;  
} 
```

# android - 将意图从视图发送到活动？

> ID：12968334
> 
> 赞同：2
> 
> 时间：2012-10-19T06:10:49.570
> 
> 标签：android, android-intent

Intent 类有[`getSourceBouds()`](http://developer.android.com/reference/android/content/Intent.html#getSourceBounds%28%29)method.Documents 说：

> 以屏幕坐标获取此意图的发送者的边界。这可以用作对接收者进行动画等的提示。Null 表示没有源边界。

我的问题是关于。`sender of this intent`真的似乎只能`RemoteViews`是出现在屏幕中的“意图发送者”。我看到[`IntentSender`](http://developer.android.com/reference/android/content/IntentSender.html)但不能直接制作此类的实例，而是必须从现有的 PendingIntent 和 PendingIntent.getIntentSender( ) 所以我猜我们在屏幕上看不到任何 IntentSender 实例。

最后，我们是否可以使用任何其他出现在屏幕中的东西（例如`view`）作为“意图发送者”，其中 getSourceBounds 不会为其意图返回 null？

# c# - 如何使用自定义顶点结构创建 VertexBuffer？

> ID：12968335
> 
> 赞同：1
> 
> 时间：2012-10-19T06:11:07.510
> 
> 标签：c#, xna, xna-4.0

我有一个顶点结构：

```
public struct VertexMultitextured
{
    public Vector3 Position;
    public Vector3 Normal;
    public Vector4 TextureCoordinate;
    public Vector4 TexWeights;

    public static int SizeInBytes = (3 + 3 + 4 + 4) * sizeof(float);
    public static VertexElement[] VertexElements = new VertexElement[]
 {
     new VertexElement( 0, VertexElementFormat.Vector3, VertexElementUsage.Position, 0 ),
     new VertexElement( sizeof(float) * 3, VertexElementFormat.Vector3, VertexElementUsage.Normal, 0 ),
     new VertexElement( sizeof(float) * 6, VertexElementFormat.Vector4, VertexElementUsage.TextureCoordinate, 0 ),
     new VertexElement( sizeof(float) * 10, VertexElementFormat.Vector4, VertexElementUsage.TextureCoordinate, 1 ),
 };
} 
```

我想创建一个`VertexBuffer`使用它的。如果我使用这条线：

`terrainVertexBuffer = new VertexBuffer(device, typeof(VertexMultitextured),` ````vertices.Length, BufferUsage.WriteOnly);````

 ``我得到一个错误，我的结构“没有实现 IVertexType 接口”，那么我该如何实现呢？还是有更简单的方法来使用这个自定义结构？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T06:33:09.193

您快到了。你所拥有的看起来有点像 XNA 3.1 的旧风格。XNA 4.0 中改进了执行此操作的方法 -[请参阅此博客文章](http://blogs.msdn.com/b/shawnhar/archive/2010/04/19/vertex-data-in-xna-game-studio-4-0.aspx)。

就像错误说的那样，你`VertexMultitextured`需要实现`IVertexType`（[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.ivertextype.aspx)），这需要你实现[这个属性](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.ivertextype.vertexdeclaration.aspx)。这就是它的样子：

```
public struct VertexMultitextured : IVertexType
{
    // ... all your data members ...

    static readonly VertexDeclaration MyVertexDeclaration
            = new VertexDeclaration(new VertexElement[] {
                // ... your vertex element array ...
            });

    public VertexDeclaration VertexDeclaration
    {
        get { return MyVertexDeclaration; }
    }
} 
```

（实现接口的替代方法是创建`VertexDeclaration`任何地方，并将其传递给 . 的另一个构造函数`VertexBuffer`。）

您不再需要保留对`VertexElement`数组的引用 - 您可以将它传递给构造函数`VertexDeclaration`并忘记它。您也不需要跟踪大小，`VertexDeclaration`将根据您的元素数组计算它。``

# java - Java：数独游戏：检查 3x3 网格的重复值

> ID：12968336
> 
> 赞同：0
> 
> 时间：2012-10-19T06:11:09.893
> 
> 标签：java, sudoku

这个程序的作用：

该程序从一个类中获取值并将其用作数独谜题的起始值。我们将在典型的 Sudoku 9x9 网格中打印出来。然后程序会提示用户在网格上给出一个坐标点，并在其中输入一个值。目前我正在做的是确保用户输入的值对于解决这个难题是有效的。一旦拼图填满并且每列、每行和 3x3 方格中不再有任何重复值，游戏应该结束并且输出应该是“拼图完成”。

截至目前，我的程序成功检查了列和行中的重复值，但我不知道从哪里开始检查每个 3x3 正方形。

这个谜题的数字保存在一个 9x9 的数组中。

基本上：关于如何检查数组的每个 3x3 部分中的重复值的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T08:45:01.853

大约 4 年前，我用 C 语言编写了以下代码来解决完全相同的问题，尽管它看起来很暴力。int 数组是一个 9x9 网格。“索引”指定第 0...8 行、第 0...8 列和第 0...8 个框。

```
int checkBox(int a[][9], int index)
{
    int i, j, isValid = 1;
    int m, n;
    for(i = 3*(index%3) ; isValid && (i < (3*(index%3) + 3)); i++)
    {
        for(j = 3*(index/3); isValid && (j < (3*(index/3) + 3)); j++)
        {
            for(m = (3*(index%3)) ; isValid && (m < (3*(index%3) + 3)); m++)
            {
                for(n = 3*(index/3); isValid && (n < (3*(index/3) + 3)); n++)
                {
                    if(isValid && (a[m][n] == 0) || ((i != m) || (j != n)) && (a[i][j] == a[m][n]))     //select given element and compare others to it
                    {                                                                         //if any element is the same that is not itself then the sudoku is not valid
                        isValid = 0;                                                  //this checks for 3x3 box
                    }                                                               
                }                                               
            }                                                   
        }
    }
    return isValid;
} 
```

基本上我所做的只是操纵索引直到它选择了一个特定的框，然后在那个框中我检查了所有的数字，看看是否有任何匹配。如果匹配，则数独无效。

最后，我检查了这样的有效性：

```
int checkSudoku(int a[][9])                                     //check every row, column and box
{                                                   //if there is no contradiction then it is valid
    int i, isValid = 1;
    for(i = 0; isValid && (i < 9); i++)
    {
        isValid = (checkLine(a, i) && checkColumn(a, i) && checkBox(a, i));
    }
    return isValid;
} 
```

当然，同样的概念也可以应用于 Java，考虑到它只是数组管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:24:26.803

这取决于您如何存储数独板。如果您将其存储为 2D 数组，您可以让您的逻辑识别用户选择输入新值的 3x3 框，并使用您已经拥有的代码来检查行和列部分。

您还可以拥有 9 套集合。每组将对应一个特定的 3x3 块。因此，当用户选择他/她想要添加值的坐标时，您将选择给定的集合并`add`在集合中执行操作。

由于集合不允许重复，如果集合中已经存在该数字，则该`add`方法将返回。`false`这也将允许您识别任何重复值（但是，与数组选项不同，如果用户选择从 3x3 网格中删除值，您还需要更新集合）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:20:25.837

我要做的不是一个大的 9x9 数组，而是存储一个由 3x3 数字数组组成的 3x3 数组。或者两者都做，为了便于计算（再存储 81 个字节的数据（你确实在我希望的字段中使用字节？）除了大多数内存不足的设备之外，不会导致内存问题，我怀疑你想要无论如何玩游戏）。

# ruby-on-rails - 可以吗？适用于：all 或不同的模型

> ID：12968337
> 
> 赞同：1
> 
> 时间：2012-10-19T06:11:11.520
> 
> 标签：ruby-on-rails, ruby, cancan

我正在尝试在 Rails 应用程序中设置 CanCan，但遇到了一些奇怪的行为。

我的`ability.rb`文件如下所示：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    can :create, User
    can :create, Template
    can :read, :all
  end
end 
```

`templates_controller.rb`：

```
class TemplatesController < ApplicationController
  load_and_authorize_resource

  def index
    authorize! :create, Template
  end
end 
```

到目前为止，一切都很好。我去的时候 CanCan 没有抱怨`/templates`。奇怪的行为始于视图。`can?`询问时返回 false `:create`，`Template`但询问`:read`or时返回 true `User`。

`views/templates/index.html.erb`：

```
<% if can? :create, Template %>
Doesn't show up.
<% end %>

<% if can? :read, Template %>
Does show up.
<% end %>

<% if can? :create, User %>
Does show up.
<% end %> 
```

哦，这是我的`template.rb`模型，以防万一：

```
class Template < ActiveRecord::Base
  attr_accessible  :title, :template, :user_id
  has_many :radlibs
  belongs_to :user

  has_reputation :votes, source: :user, aggregated_by: :sum
end 
```

这让我很困惑，为什么我只能在视图中获得某些权限，当它们在控制器中工作时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:52:21.767

所以，问题是“模板”也是`ActionView`. 所以 CanCan 在控制器中查看我的模型，但`ActionView::Template`在视图中查看，而`::Template`我的模型是，我会考虑改变它。

```
<% if can? :create, ::Template %>
Does show up.
<% end %>

<% if can? :read, Template %>
Does show up.
<% end %>

<% if can? :create, User %>
Does show up.
<% end %> 
```

# collision-detection - 二维六边形网格上的碰撞检测

> ID：12968338
> 
> 赞同：1
> 
> 时间：2012-10-19T06:11:21.557
> 
> 标签：collision-detection, hexagonal-tiles

我正在使用 Cocos2D 制作一个基于网格的休闲 2D iPhone 游戏。网格是一个“交错的”六角形网格，由大小均匀且间隔开的圆盘组成。它看起来像[这样](http://img-ipad.lisisoft.com/img/1/7/1782-1-bubble-shooter-3-hd.jpg)。

我已将网格存储在二维数组中。我也有一个“环绕”网格单元的概念。即围绕特定单元格的六个网格单元格（边界上的网格单元格可以少于六个）。

无论如何，我正在测试一些碰撞检测，但它并没有像我计划的那样工作。以下是我目前对接近静止圆盘组的移动圆盘进行碰撞检测的方法：

1.  使用移动单元的 xy 位置计算最接近移动单元的网格单元的 ij 坐标
2.  使用 ij 坐标获取周围网格单元的列表
3.  检查周围的细胞。如果它们都是空的，则没有碰撞
4.  如果我们有一些非空的周围单元格，那么将圆盘中心之间的距离与碰撞所需的某个最小距离进行比较
5.  如果发生碰撞，则将移动圆盘放在网格单元 ij 中

所以这行得通，但不太好。我考虑过一种可能更简单的蛮力方法，我只是在游戏循环的每个步骤中将移动圆盘与所有静止圆盘进行比较。这在性能方面可能是可行的，因为固定盘数最大为 300。如果不是，那么可以使用一些空间分区数据结构，但是感觉太复杂了。

**在这样的游戏中，碰撞检测的一些常见方法和最佳实践是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:38:40.457

我相信您应该能够将移动圆盘的 xy 坐标准确地映射到最近的单元格。

```
 +------+-------+-------+ odd rows
    |      |       |       |
    |      |       |       |
+---|--+---|---+---|----+  | 
|   +--|---+---|---+----|--+
|      | x     |        | <- even rows
|   +--|---+---|---+----|--+ odd rows
+---|--+---|-y-+---|----+  |
    |      |       |       |
    |      |       |       |
    +------+-------+-------+ 
```

点*x*位于 even_row[0][1] 而点*y*位于odd_row[1][1] 并同时位于 even_row[0][1]。最多有两个地方，然后一个可以计算出其中哪个最接近。（没有理由将偶数行和奇数行保留在不同的数组中......）

您应该能够推导出将 y 映射到奇数行和偶数行的数学公式。

# c++ - C++中的重载运算符>>

> ID：12968340
> 
> 赞同：4
> 
> 时间：2012-10-19T06:11:30.733
> 
> 标签：c++, operator-overloading

```
#include<iostream>
using namespace std;
class term
{
public:
    int exp;
    int coeff;  
};
class poly
{
public:
    term* term_ptr;
    int no_term;

    poly(int d);
    friend istream& operator>>(istream& in, poly& p);
    friend ostream& operator<<(ostream& out, const poly& p);
    friend poly operator+(const poly& p1, const poly& p2);
};
poly::poly(int d=0)
{
    no_term = d;
    term_ptr = new term[no_term];
}
istream& operator>>(istream& in, poly& p)
{
    in>>p.no_term;
    for(int i= 0; i<p.no_term; i++)
    {
        in>>(p.term_ptr+i)->coeff;
        in>>(p.term_ptr+i)->exp;
    }
    return in;
} 
```

我重载了输入运算符来输入对象。我面临的问题是当我输入两个对象时，第一个对象输入的数据成员随之发生变化。

```
int main(void)
{
    poly p1, p2;
    cin>>p1;
    cin>>p2;
    cout<<p1;
    cout<<p2;
    return 0;   
} 
```

如果输入是

```
 3
 1 1
 1 2
 1 3
 3
 1 1
 1 2
 1 3 
```

我得到的输出是

```
1 1
1 2 
1 1
1 1
1 2
1 3 
```

输出算子函数是

```
ostream& operator<<(ostream& out, const poly& p)
{
    out<<"coeff"<<" "<<"power"<<endl;
    for(int i = 0; i< p.no_term; i++)
        out<<(p.term_ptr+i)->coeff<<" "<<(p.term_ptr+i)->exp<<endl;
    return out;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:22:01.347

您最初分配一个包含零元素的数组。读取对象时，您会读取术语的数量，但不会重新分配术语数组。我个人建议使用合适的容器类型，例如，`std::vector<term*>`或者，实际上，`std::vector<std::shared_ptr<term>>`. 如果你坚持使用数组，你需要这样的东西：

```
std::istream& operator>>(std::istream& in, poly& p)
{
    if (in>>p.no_terms ) {
        std::unique_ptr<term[]> terms(new term[p.no_terms]);
        for(int i= 0; i<p.no_term; i++)
        {
            in >> terms[i].coeff;
            in >> terms[i].exp;
        }
        if (in) {
            delete[] p.term_ptr;
            p.term_ptr = terms.release();
        }
    }
    return in;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:20:37.633

更改`poly p1, p2;`为`poly p1(3), p2(3);`。

`p.no_term`有一个值`3`，但是，看看你的`poly`构造函数：

```
poly::poly(int d=0)
{
    no_term = d;
    term_ptr = new term[no_term];
} 
```

`0`您正在创建一个长度数组。此外，无需在代码中使用指针。这是一个使用示例`std::vector<term>`：

```
#include<iostream>
#include <vector>
using namespace std;
class term
{
    public:
    int exp;
    int coeff;  
};
class poly
{
    public:
    std::vector<term> term_vec;
    int no_term;

            poly(int d);
            friend istream& operator>>(istream& in, poly& p);
            friend ostream& operator<<(ostream& out, const poly& p);
            friend poly operator+(const poly& p1, const poly& p2);
};
poly::poly(int d=0) : term_vec(d), no_term(d)
{
}
istream& operator>>(istream& in, poly& p)
{
    in>>p.no_term;
    p.term_vec.resize(p.no_term);
    for(int i= 0; i<p.no_term; i++)
    {
        in>> p.term_vec[i].coeff;
        in>> p.term_vec[i].exp;
    }
    return in;
}

  ostream& operator<<(ostream& out, const poly& p)
   {
    out<<"coeff"<<" "<<"power"<<endl;
    for(int i = 0; i< p.no_term; i++)
    out<<p.term_vec[i].coeff<<" "<<p.term_vec[i].exp<<endl;
    return out;
   }

   int main(void)
 {
    poly p1, p2;
    cin>>p1;
    cin>>p2;
    cout<<p1;
    cout<<p2;
    return 0;   
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:21:58.337

您的默认构造函数参数`d`具有 value `0`。然后你打电话`new term[0]`。在您的示例中，初始化为长度为 0 的数组的指针指向相同的位置。填充无效内存后，看到相同的结果。

# c# - 在单独的项目与单独的命名空间中组织代码

> ID：12968341
> 
> 赞同：12
> 
> 时间：2012-10-19T06:11:30.493
> 
> 标签：c#, .net, architecture

我在一个 .net c# 应用程序中工作，其中包含 2 个用于客户端和服务器的解决方案。在服务器端，有 80 多个项目用于分离以下架构层，

*   基础设施层
*   集成层（外部系统）
*   领域层
*   存储层
*   经理层
*   服务层

此外，几乎每一层都有测试项目。现在，解决方案的构建时间需要 2 到 3 分钟，许多开发人员（包括我 :)）觉得我们需要解决这个问题。

因此，提出的解决方案是通过合并项目来减少项目数量。在我看来，最大限度地减少构建时间可能是一个很好的解决方案，我们可以实现我们想要的。

建议的解决方案是我们将我们的项目合并为 3 个区域，例如一个用于生产代码的库，一个用于测试代码的库，以及一个用于部署项目（WCF 主机等）的库，并通过分离命名空间在同一项目中逻辑划分层。

然而，我的担忧是

1.  这些分离对可维护性有好处吗？为每个命名空间 appox 提供更多的数百个类。
2.  如果我们有一些常见的功能，比如助手，我们把它们放在哪里？

有没有其他方法来分层解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:32:44.500

我想你应该把你的解决方案分成逻辑层。

作为你把助手放在哪里的一部分。在最低级别之一上为它制定解决方案。

**例子**

农场软件。您需要跟踪您的动物、蔬菜。您需要一个用于喂养动物的模块和一个用于向消费市场销售动物和蔬菜的模块。

这可以分为以下解决方案

**后端**

*   销售模块：Everyting 用于销售您的产品
*   购买模块：为您的动物购买种子、食物、其他产品...
*   Sheduler 模块：播种、收割、...的触发事件
*   预测模块：根据天气和市场价格预测收成数量，...
*   ...

这些后端模块中的每一个都可以拥有自己的数据访问层、DTO、WCF 服务，......

此解决方案将仅包含业务逻辑、数据访问、...。并且可以有多个前端解决方案连接到这些后端解决方案。

**前端**

*   ASP.NET MVC 应用程序：用于向消费者销售的网上商店
*   WPF 应用程序：批准销售
*   其他 WPF 应用程序：购买东西。
*   移动应用程序：将事件发送到您的手机或其他东西。
*   （另一种选择是将 2 个或更多后端解决方案连接到 1 个前端解决方案）
*   ...

这对您的项目来说是一个很大的变化，这将产生影响。如果你不想改变它，请确保你认为这是真的。

多种解决方案将增加您的整体构建时间，并且每晚构建非常重要，这样每个开发人员都可以始终使用最新的二进制文件，而不必在他的本地计算机上构建所有解决方案。

请注意，您仍然可以在不同的解决方案中使用您的图层：

*   基础设施层
*   集成层（外部系统）
*   领域层
*   存储层
*   经理层
*   服务层

* * *

为了使这一切一起工作，不要弄乱二进制文件。您可以映射一个驱动器 IE X：您有一个文件夹二进制文件，每个解决方案都有一个文件夹。每个解决方案都复制构建后事件中的程序集。（编写此脚本，因此它适用于每台机器）

如果您有良好的网络基础设施，您也可以将其复制到服务器上。因此，当您在 TFS 中构建所有解决方案时，它可以将其复制到所有开发人员都可以访问的位置。

如果您在 TFS 中构建，请确保您的构建顺序正确，首先是最低层，最后是最高层。

但是当您拆分解决方案时，在解决方案中您可能不需要在每个解决方案中使用它们。

我最近读了一篇关于[Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)的文章，也许你也可以看看。（它特定于 ASP.NET MVC）。

您还可以查看[CQRS](http://martinfowler.com/bliki/CQRS.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T13:32:07.937

为什么有 80 多个项目，而您的应用程序只有 6 层？

您可能会回答说它们涵盖了大量的功能区域，但您首先需要将所有这些功能区域放在一个解决方案中吗？

我建议用项目反映*建筑部门，用解决方案反映**功能*部门。不同的解决方案可以重用相同的项目。这样，您将为每个可重用的架构层创建一个项目，并拥有与功能区域一样多的领域项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T07:16:36.713

我绝对不会合并这些项目......我认为你很快就会在每一层中得到意大利面条代码，因为开发人员会采取他们不应该采取的捷径（无论他们是否有意）。

我更倾向于将层分离成单独的解决方案......并使用二进制引用而不是跨层的项目引用。但是，这可能会对分支造成严重破坏，请小心。

我已经看到通过将项目构建到一个共同的地方来减少构建时间 - 显然这可以防止 VS 在不需要时重建项目 - 但我不知道这是否属实。

这里有一些想法：http: [//blogs.microsoft.co.il/blogs/arik/archive/2011/05/17/speed-up-visual-studio-builds.aspx](http://blogs.microsoft.co.il/blogs/arik/archive/2011/05/17/speed-up-visual-studio-builds.aspx)

最后......是完整构建的三分钟还是仅仅对一个项目进行单元测试？专注于最大的问题。如果单元测试需要很长时间，那么您就会遇到依赖关系问题。如果完整的解决方案需要很长时间，请获取构建服务器并专注于缩短单元测试开发时间。

希望有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T20:34:31.860

我过去处理类似问题的一种低影响方法是创建一系列解决方案文件，其中仅包含一个项目及其测试项目（可能还有项目的依赖项）。然后，给自己找一个像[NCrunch](http://www.ncrunch.net/)这样的工具，并在这些解决方案中完成大部分编码，可能使用 TDD。这将为您提供闪电般的快速反馈循环，并且绝对符合分层、解耦方法的精神。当我过去这样做时，我发现我实际上每天最多只运行几次整个应用程序，而且我严重依赖 red-green-refactor，无论如何这都很好。

如果您愿意，您甚至不必对这些小的解决方案文件进行源代码控制——开发人员可以创建自己的文件，并且可以将它们丢弃。

当然，这绝不是灵丹妙药，也无法解决您想要运行应用程序时编译时间过长的问题，但它绝对可以帮助减少反馈时间，同时促进良好的设计/开发实践，而且它具有具有极低风险和快速设置的优势。

# javascript - 使用 JQuery 将两个页面组合成一个页面，其中包含在单击时切换的 div

> ID：12968344
> 
> 赞同：1
> 
> 时间：2012-10-19T06:12:07.307
> 
> 标签：javascript, jquery, ruby-on-rails, haml

尝试使用当您单击图像（按钮）时淡入淡出的 div 淡入和淡出的图像重新制作 2 个不同的页面。我一直在阅读其他帖子、JQuery API 以及我能找到的任何其他内容，我已经到了这一点，但似乎无法让它发挥作用。关于如何使用下面的代码实现这一点的任何想法？谢谢！

```
 :javascript
  $(document).ready(function($){

    $("#page2").hide();
    $(".button").on("click", function(){
      $("#page1, #page2").toggle(slow);
    });

    $('.fade0').removeClass('transparent').addClass('animated').addClass('fadeInDownFaster');
    $('.fade1').removeClass('transparent').addClass('animated').addClass('fadeInDownFaster'); 

    window.setTimeout(function() {
      $('.fade2').removeClass("transparent").addClass("fadeInDown");
      },400);
    window.setTimeout(function() {
      $('.fade2a').removeClass("transparent").addClass("fadeInDown");
      },700);
    window.setTimeout(function() {
      $('.fade3left').removeClass("transparent").addClass("fadeInLeft");
      },900);
    window.setTimeout(function() {
      $('.fade3right').removeClass("transparent").addClass("fadeInRight");
      },900);
    window.setTimeout(function() {
     $('.fade4').removeClass("transparent").addClass("fadeInUp");
      },1200);
  });

.row
  .span4
    .pad-bottom30
    .pad-bottom30

  .span8
    .pad-bottom30
    .pad-bottom30
    .div#page1  
      =image_tag(@page.photos[5].image_url(:full), :class => "animated fade0") if @page.photos[5].image?
    .div#page2
    - if !@page.photos.empty? and @page.photos[0].image?
      #anim-container{:class => "animated fadeIn", :style => "position: relative; width: 699px; height: 570px; background:url(#{@page.photos[0].image_url(:full)}) 96px 17px no-repeat;"}
        =image_tag(page.photos[1].image_url(:full), :class => "transparent animated fade2") if @page.photos[1].image?
        =image_tag(page.photos[2].image_url(:full), :class => "transparent animated fade2a", :style => "margin-left: 20px;") if @page.photos[2].image?
        .page2-right.fade3left.animated.transparent{:style => "top: 255px;"}
          HI
        .page2-right.fade3right.animated.transparent{:style => "top: 255px;"}
          THERE
        =image_tag(page.photos[3].image_url(:full), :class => "transparent animated fade4", :style => "position: absolute; top: 585px; left: 518px;") if @page.photos[3].image?
    .pad-bottom50
    .div#page1{:style => "position: absolute; top: 620px; left: 830px;"}
      = image_tag(@page.photos[6].image_url(:full), :class => "animated button fade1") if @page.photos[6].image?
    .div#page2{:style => "position: absolute; top: 780px; left: 830px;"}
      =image_tag(page.photos[4].image_url(:full), :class => "animated fade1 button") if @page.photos[4].image?
    .pad-top20 
```

# jquery - 删除按钮以在表（可编辑）克隆行中配置

> ID：12968349
> 
> 赞同：0
> 
> 时间：2012-10-19T06:12:43.257
> 
> 标签：jquery, html-table

我有一个克隆行的[可编辑表，克隆](http://jsfiddle.net/Manna/S3kZw/5/)的行在两列中都是可编辑的，带有*文本区域*和*输入数字*。如果您点击编辑输入的数字，有一个功能可以自动计算总和并给出总金额。

我现在的问题是我无法正确配置克隆行的删除按钮。如果您尝试一下，您会发现它没有删除一行，而是增加了一行。请我需要帮助来解决这个问题。

这是克隆行的脚本，我认为它需要减少和改进

```
$('input:button').live('click',function(){
    var temprow = $('#temprow tbody').html();
    var tr = $(this).closest('tr');
    tr.after(temprow);
});

$("input.tr_clone_add").live('click', function() {
    var lastid = $('[id^="sum"]').length + 1;
    var $tr = $(this).closest('.tr_clone');
    var $clone = $tr.clone();
    $clone.find(':text').val('');
    $clone.attr('id', 'sum' + lastid)
    $tr.after($clone);
    initEditables();
    tally('p#subtotal');
    tally('p#total');
});

$(".tr_clone_remove").live("click", function() {
$(".tr_clone").last().remove();
    initEditables();
    tally('p#subtotal');
    tally('p#total');
});

initEditables();
tally('p#subtotal');
tally('p#total'); 
```

[我的桌子](http://jsfiddle.net/Manna/S3kZw/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:41:57.880

1.  将函数更改`tr.after`为：

    ```
    if ($(this).val() == '+') {
        tr.after(temprow);
    } 
    ```

2.  拨打`remove()`电话：

    ```
    $(this).parent().parent().remove(); 
    ```

这是[小提琴](http://jsfiddle.net/S3kZw/9/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:33:20.517

用正确的解决方案编辑了你的小提琴：http: [//jsfiddle.net/Manna/S3kZw/5/](http://jsfiddle.net/Manna/S3kZw/5/)

*   由于`tr_clone_remove`该类也是按钮类型的输入，因此每次单击删除按钮时都会调用第一个处理程序。

    ```
    $('input:button').live('click',function(){
        var temprow = $('#temprow tbody').html();
        var tr = $(this).closest('tr');
        tr.after(temprow);
    }); 
    ```

    这就是插入行而不是删除行的原因。

*   此外，使用正确的代码更新了您的删除行块。

# haskell - Monad Transformers vs 将参数传递给函数

> ID：12968351
> 
> 赞同：53
> 
> 时间：2012-10-19T06:13:23.737
> 
> 标签：haskell, monad-transformers

我是 Haskell 的新手，但了解如何使用 Monad Transformers。然而，我仍然难以抓住他们声称的将参数传递给函数调用的优势。

基于wiki [Monad Transformers Explained](http://www.haskell.org/haskellwiki/Monad_Transformers_Explained)，我们基本上有一个配置对象定义为

```
data Config = Config Foo Bar Baz 
```

并传递它，而不是用这个签名编写函数

```
client_func :: Config -> IO () 
```

我们使用 ReaderT Monad Transformer 并将签名更改为

```
client_func :: ReaderT Config IO () 
```

拉动 Config 只是对`ask`.

函数调用从`client_func c`变为`runReaderT client_func c`

美好的。

但是为什么这会使我的应用程序更简单？

1-当您将许多功能/模块拼接在一起以形成应用程序时，我怀疑 Monad Transformers 有兴趣。但这就是我的理解停止的地方。有人可以阐明一下吗？

2-我找不到任何关于如何在 Haskell 中编写大型**模块化**应用程序的文档，其中模块公开某种形式的 API 并隐藏它们的实现，以及（部分）隐藏它们自己的状态和环境对其他模块。请问有什么指点吗？

（编辑：真实世界的 Haskell 声明“.. 这种方法 [Monad Transformers] ......适用于更大的程序。”，但没有明确的例子证明这种说法）

**编辑以下克里斯泰勒的回答**

Chris 完美地解释了为什么在 Transformer Monad 中封装 Config、State 等会带来两个好处：

1.  它防止更高级别的函数必须在其类型签名中维护它调用的（子）函数所需的所有参数，但它自己使用不需要（参见`getUserInput`函数）
2.  因此，使更高级别的函数对 Transformer Monad 内容的更改更具弹性（例如，您想在其中添加一个`Writer`以在较低级别的函数中提供 Logging）

这是以更改所有函数的签名为代价的，以便它们“在”Transformer Monad 中运行。

因此，问题 1 已完全涵盖。谢谢克里斯。

问题 2 现在已在[此 SO 帖子中得到解答](https://stackoverflow.com/questions/13007123/modular-program-design-combining-monad-transformers-in-monad-agnostic-function)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-19T08:09:34.577

假设我们正在编写一个程序，该程序需要以下形式的一些配置信息：

```
data Config = C { logFile :: FileName } 
```

编写程序的一种方法是在函数之间显式传递配置。如果我们只需要将它传递给显式使用它的函数会很好，但遗憾的是我们不确定一个函数是否可能需要调用另一个使用该配置的函数，所以我们被迫将它作为一个参数无处不在（实际上，它往往是需要使用配置的低级函数，这迫使我们也将其传递给所有高级函数）。

让我们像这样编写程序，然后我们将使用`Reader`monad 重新编写它，看看我们会得到什么好处。

## 选项 1\. 显式配置传递

我们最终会得到这样的结果：

```
readLog :: Config -> IO String
readLog (C logFile) = readFile logFile

writeLog :: Config -> String -> IO ()
writeLog (C logFile) message = do x <- readFile logFile
                                  writeFile logFile $ x ++ message

getUserInput :: Config -> IO String
getUserInput config = do input <- getLine
                         writeLog config $ "Input: " ++ input
                         return input

runProgram :: Config -> IO ()
runProgram config = do input <- getUserInput config
                       putStrLn $ "You wrote: " ++ input 
```

请注意，在高级函数中，我们必须始终传递配置。

## 选项 2\. Reader monad

另一种方法是使用`Reader`monad 重写。这使低级功能有点复杂：

```
type Program = ReaderT Config IO

readLog :: Program String
readLog = do C logFile <- ask
             readFile logFile

writeLog :: String -> Program ()
writeLog message = do C logFile <- ask
                      x <- readFile logFile
                      writeFile logFile $ x ++ message 
```

但是作为我们的奖励，高级功能更简单，因为我们永远不需要参考配置文件。

```
getUserInput :: Program String
getUserInput = do input <- getLine
                  writeLog $ "Input: " ++ input
                  return input

runProgram :: Program ()
runProgram = do input <- getUserInput
                putStrLn $ "You wrote: " ++ input 
```

## 更进一步

我们可以将 getUserInput 和 runProgram 的类型签名重写为

```
getUserInput :: (MonadReader Config m, MonadIO m) => m String

runProgram :: (MonadReader Config m, MonadIO m) => m () 
```

如果我们决定`Program`出于任何原因更改底层类型，这给了我们很大的灵活性。例如，如果我们想为我们的程序添加可修改的状态，我们可以重新定义

```
data ProgramState = PS Int Int Int

type Program a = StateT ProgramState (ReaderT Config IO) a 
```

我们不必修改`getUserInput`或根本不需要修改`runProgram`——它们会继续正常工作。

注意我没有检查过这篇文章，更不用说尝试运行它了。可能有错误！

# yii - 自动完成 - yii

> ID：12968352
> 
> 赞同：0
> 
> 时间：2012-10-19T06:13:24.127
> 
> 标签：yii

我正在尝试添加一个具有自动完成功能的字段，为此我使用了 javascript

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css " />
    <script src="http://code.jquery.com/jquery-1.8.2.js "></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js "></script>
 <script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        function split( val ) {
            //document.write(val.length);
            return val.split( /,\s*/ );
        }
        function extractLast( term ) {
            //echo (term.length);
            //document.write(term.length);
            return split( term ).pop();
        }

        $( "#Tag_tag_name" )
            // don't navigate away from the field on tab when selecting an item
            .bind( "keydown", function( event ) {
                var a=0;
//                if (event.keyCode === $.ui.keyCode.TAB)
//                    {
//                       a=a+1; 
//                    }
                if ( event.keyCode === $.ui.keyCode.TAB &&
                        $( this ).data( "autocomplete" ).menu.active ) {

                    event.preventDefault();

                }
//                if (event.keyCode === $.ui.keyCode.P)
//                    {
//                        alert(a);
//                    }

            })
            .autocomplete({
                minLength: 0,
                source: function( request, response ) {
                    // delegate back to autocomplete, but extract the last term
                    response( $.ui.autocomplete.filter(
                        availableTags, extractLast( request.term ) ) );
                },
                focus: function() {
                    // prevent value inserted on focus
                    return false;
                },
                select: function( event, ui ) {
                    var terms = split( this.value );
                    // remove the current input
                    terms.pop();
                    // add the selected item
                    terms.push( ui.item.value );
                    // add placeholder to get the comma-and-space at the end
                    terms.push( "" );
                    this.value = terms.join( ", " );
                    return false;
                }
            });
    });
</script> 
```

现在我想做的是代替 AvaialbleTags 变量中的这个静态值，我想要来自数据库的值？另外，我想限制用户添加的三个值。

谁能帮我这个 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:58:30.223

这是我正在使用的[多重完成](http://www.yiiframework.com/extension/multicomplete/)

```
 $this->widget('ext.widgets.MultiComplete', array(
              'model'=>$model,
              'attribute'=>$attribute,
              'splitter'=>',',
              'sourceUrl'=>$this->createUrl($url),
    // additional javascript options for the autocomplete plugin
              'options'=>array(
                      'minLength'=>'1',
    ),
              'htmlOptions'=>array(
                      'size'=>'60'
                      ),
                      )); 
```

# c - 通过 make 将 GSL 链接到 C

> ID：12968355
> 
> 赞同：4
> 
> 时间：2012-10-19T06:13:35.430
> 
> 标签：c, makefile, gsl

无数个链接问题。我正在尝试构建一些调用 GNU 科学库的简单 C 代码。但是，GSL 文件夹没有嵌套在我的项目文件夹中。因此，例如，代码存在于`C:/c-examples/`GSL 库中`C:/gsl`。

这是C代码

```
#include <stdio.h>
#include <gsl_math.h>
#include <fit/gsl_fit.h>

     int
     main (void)
     {
       int i, n = 4;
       double x[4] = { 1970, 1980, 1990, 2000 };
       double y[4] = {   12,   11,   14,   13 };
       double w[4] = {  0.1,  0.2,  0.3,  0.4 };

       double c0, c1, cov00, cov01, cov11, chisq;

       gsl_fit_wlinear (x, 1, w, 1, y, 1, n,
                        &c0, &c1, &cov00, &cov01, &cov11,
                        &chisq);

       printf ("# best fit: Y = %g + %g X\n", c0, c1);
       printf ("# covariance matrix:\n");
       printf ("# [ %g, %g\n#   %g, %g]\n",
               cov00, cov01, cov01, cov11);
       printf ("# chisq = %g\n", chisq);

       for (i = 0; i < n; i++)
         printf ("data: %g %g %g\n",
                        x[i], y[i], 1/sqrt(w[i]));

       printf ("\n");

       for (i = -30; i < 130; i++)
         {
           double xf = x[0] + (i/100.0) * (x[n-1] - x[0]);
           double yf, yf_err;

           gsl_fit_linear_est (xf,
                               c0, c1,
                               cov00, cov01, cov11,
                               &yf, &yf_err);

           printf ("fit: %g %g\n", xf, yf);
           printf ("hi : %g %g\n", xf, yf + yf_err);
           printf ("lo : %g %g\n", xf, yf - yf_err);
         }
       return 
} 
```

这是我为它编写的makefile：

```
CC=gcc
CFLAGS=-Wall -IC:/gsl -lgsl
OLSexample: OLSexample.o 

clean:
    rm -f OLSexample OLSexample.o 
```

但是，`make`在此退出时出现错误 2，找不到文件。我想我可能在 makefile 中指定依赖项或链接库时做错了。欢迎任何帮助。

* * *

**编辑2：**

按照 mux 的建议和[此处](http://mrbook.org/tutorials/make/Makefile-4)的模板，我将 makefile 更改为以下内容（包括库的完整路径）。我继续得到以前的错误（e = 2）。

```
CC=gcc
CFLAGS=-c -Wall -IE:/programming/c/libraries/gsl-1.15.tar/gsl-1.15/
LDFLAGS= -LE:/programming/c/libraries/gsl-1.15.tar/gsl-1.15/
LIBS= -lgsl
SOURCES=OLSexample.c
OBJECTS=$(SOURCES:.c=.o)
EXECUTABLE=OLSexample

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
    $(CC) $(LDFLAGS) $(OBJECTS) $(LIBS) -o $@

.c.o:
    $(CC) $(CFLAGS) $< -o $@ 
```

此处包含完整的错误消息以供参考：

```
e:\programming\c\WorkingFolder\gslExamples\1-ols>make
make
gcc -c -Wall -IE:/programming/c/libraries/gsl-1.15.tar/gsl-1.15/   -c -o OLSexample.o OLSexample.c
process_begin: CreateProcess((null), gcc -c -Wall -IE:/programming/c/libraries/gsl-1.15.tar/gsl-1.15/ -c -o OLSexample.o OLSexample.c, ...) failed.
make (e=2): The system cannot find the file specified.
make: *** [OLSexample.o] Error 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:17:44.137

您应该添加`-LC:/gsl`到搜索目录列表，`-I`添加一个包含目录以搜索标题，并`-L`添加一个目录以搜索库`-l<lib>`。但是，我没有看到您实际编译任何东西，也许您应该从 Makefile 模板开始：

```
CC=gcc
CFLAGS=-c -Wall -Ic:/gsl
LDFLAGS= -Lc:/gsl
LIBS= -lgsl
SOURCES=main.c
OBJECTS=$(SOURCES:.c=.o)
EXECUTABLE=hello

all: $(SOURCES) $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
    $(CC) $(LDFLAGS) $(OBJECTS) $(LIBS) -o $@

.c.o:
    $(CC) $(CFLAGS) $< -o $@ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:24:59.587

您最近的错误表明 GNU make 在运行命令时遇到问题。在 Windows 中，它使用 CreateProcess 函数，但该函数失败了。这与gsl无关了。gcc 在你的路上吗？如果你只输入 gcc 而不是 make，你会得到什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:28:01.033

好的，所以我弄清楚了问题所在。原来我有另一个版本，正如[在这个线程上](http://www.allegro.cc/forums/thread/593750)`make`讨论的那样。

# javascript - 如何使用煎茶标签栏上的按钮放置覆盖面板

> ID：12968356
> 
> 赞同：1
> 
> 时间：2012-10-19T06:13:40.097
> 
> 标签：javascript, mobile, sencha-touch, extjs, sencha-touch-2

我正在使用一个`sencha`应用程序，我们有 3 个选项卡面板，但想向选项卡栏添加一个额外的按钮，而不是滑动到选项卡，只是在第一个`tabpanel`. 例如，如果您在第一个选项卡上并按下按钮，则覆盖面板将显示在顶部。如果您在第三个选项卡面板上，它将带​​您回到第一个选项卡面板`tabpanel`并覆盖按钮面板。

我可以显示按钮，但不能让它只用带有按钮的面板覆盖选项卡面板。

**主面板**：

```
 Ext.define("MyApp.view.Main", {
    extend: 'Ext.Panel',
    requires: ['Ext.TitleBar', 'Ext.tab.Panel'],

    config: {
        fullscreen: true,
        id: 'viewMain',
        layout: 'vbox',
        items: [
            {
                xtype: 'topbar'
            },
            {
                xtype: 'tabpanel',
                tabBarPosition: 'bottom',
                flex: 1,
                id: 'mainTabs',
                cardSwitchAnimation: false,
                animation: false,
                ui: 'bottom',
                items: [
                    {
                        xtype: 'mappanel',
                        id: 'mapPanel'
                    },
                    {
                        xtype: 'showbutton'
                    },
                    {
                        xtype: 'searchpanel'
                    },
                    {
                        xtype: 'directionspanel'
                    },
                    {
                        xtype: 'rcpanel'
                    }
                ]
            }
        ]
            }
}); 
```

**显示按钮**：

```
 Ext.define("MyApp.view.ShowButton", {
    extend: 'Ext.Button',
    requires: ['Ext.Button'],
    xtype: 'showbutton',

    config: {
        title: 'Show',
        iconCls: 'locate4',
        id: 'showBtn',
        text: 'OK',
        id: 'showBtn',
        iconCls: 'locate4',
        iconMask: true,
        handler: function () {
            this.fireEvent('onShowBar', this);
        }
    }
}); 
```

**显示控制器**

```
 Ext.define('MyApp.controller.ShowController', {
    extend: 'MyApp.controller.BaseController',

    config: {
        refs: {
        },
        control: {
        }
    },

    //called when the Application is launched, remove if not needed
    launch: function(app) {

    },
    onShowBar: function () {
        var newShowBar = {
            xtype: 'showBar',
            docked: 'bottom'
        };
        this.add([newShowBar]);
    }
}); 
```

**显示栏**：

```
 Ext.define("MyApp.view.ShowBar", {
    extend: 'Ext.Panel',
    xtype: 'showbar',

    config: {
        iconCls: 'locate4',
        docked: 'bottom',
        modal: false,
        style: 'opacity:0.8',
                items: [
                                    {
                                        iconCls: 'home',
                                        iconMask: true,
                                        poiGroup: 'accomm'
                                    },
                                    {
                                        iconCls: 'star',
                                        iconMask: true,
                                        poiGroup: 'attractions'
                                    }/*,
                                    {
                                        iconCls: 'hotoffer',
                                        iconMask: true,
                                        poiGroup: 'membersavings'
                                    }*/
                                ]

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T22:53:10.737

我建议使用停靠在包含其他视图的容器（布局：卡片）底部的工具栏，而不是使用标签栏。如果您将按钮添加到工具栏并设置切换视图的动画，则工具栏的行为就像选项卡栏一样。它还允许您添加一个额外的按钮来显示您的叠加层。

# c++ - C++ 初学者编程 - 循环和 while 语句

> ID：12968358
> 
> 赞同：0
> 
> 时间：2012-10-19T06:14:04.213
> 
> 标签：c++, loops, while-loop

![流程图](../Images/eaf11a6f5ff01ea143f32c7a75e8c00c.png)

上面的流程图表示一种算法，它在屏幕上显示数字 20、40、60、80、100、120、140、160、180。使用 while 语句将算法编码到程序中。计数器变量应该是一个名为 count 的 int 变量。保存并运行程序。测试程序看你是否得到正确的输出。纠正任何错误，当程序正确运行时，将 IPO 图表和程序代码复制并粘贴到 Word 文档中。

我刚开始使用 C++，我不确定如何使用 while 语句和编写代码。帮助将不胜感激。到目前为止，这是我的代码：

```
#include <iostream>
using namespace std;

int main ()
{
  int count;
  count = 10

;  while (count < 200) {
    cout << count << ", ";
    count*=2;
  }

  system("pause");
  return 0;
} 
```

如何“将 10 添加到计数器”并显示上面列出的数字？(20, 40, 60, 80, 100, 120, 140, 160, 180) 到目前为止，它只显示 10, 20, 40, 80, 160 我不确定如何同时显示中间的数字同时仍然加倍? 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:19:36.260

要将十添加到变量中，您可以使用：

```
count = count + 10; 
```

或缩写形式：

```
count += 10; 
```

要输出乘以 2 的数字，您可以简单地使用：

```
cout << (count * 2); 
```

就以（看似）所需格式输出数字列表而言，您希望`", "`在每个条目栏之前都有一个，因此您可以将`cout`语句更改为：

```
if (count > 10)        // assuming 10 is the first number.
    cout << ", ";
cout << count; 
```

然后确保最后写出换行符：

```
cout << '\n'; 
```

如果您实际上并不担心单行数字的良好格式，只需用户：

```
cout << count << '\n'; 
```

每行得到一个。

* * *

举个例子，这里有一个程序，它打印出小于三的倍数的数字，并且包括小于三十的数字：

```
#include <iostream>

int main (void) {
    int num = 3;
    while (num <= 30) {
        if (num > 3)
            std::cout << ", ";
        std::cout << (num - 1);
        num = num + 3;
    }
    std::cout << '\n';
    return 0;
} 
```

输出是：

```
2, 5, 8, 11, 14, 17, 20, 23, 26, 29 
```

对上述评论的分析以及示例程序应该足以让您构建一个与您自己的规范类似的程序。

当然，通常有更好的方法来做事，如果不是因为对你施加的任意限制。你的整个程序可以写成：

```
#include <iostream>

int main (void) {
    std::cout << 20;
    for (int num = 40; num < 200; num += 20)
        std::cout << ", " << num;
    std::cout << '\n';
    return 0;
} 
```

但是，由于这些限制可能是为了确保您学习C++ 的*特定*部分，因此您必须长期坚持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:23:34.670

据我了解流程图，应该只显示带有 2 的产品。所以，

```
count*=2; 
```

不正确，因为它改变了计数。您要添加 10，因此将其替换为`count+=10;`.

上面，您正在输出计数，但您想输出具有两个的产品：

```
cout << (2*count) << ", "; 
```

最后，您应该将分号从 while 语句之前移到`count=10`.

另外，[system("pause"); - 为什么错了？](https://stackoverflow.com/questions/1107705/systempause-why-is-it-wrong)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:23:59.270

您以错误的方式解释流程图。你将计数器乘以 2 `count*=2`，你不应该这样做，流程图显示，*显示计数器乘以 2*，这意味着不同的东西。

```
while (count < 200) {
  cout << count * 2 << ", ";
  count += 10;
} 
```

注意显示命令是平行四边形，而添加命令是矩形，这些形状在流程图中具有不同的含义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T06:26:18.273

你应该：

1.  *在* ing 时相乘`cout`，这样乘法就不会影响 的实际值`count`。
2.  ing后加10 `cout`，这样下一次迭代就会在序列中输出一个新的值。
3.  继续迭代 while `count < 100`。

像这样：

```
while (count < 100) {
    cout << count*2 << ", ";
    count+=10;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T06:35:34.280

使用加号 (+) 添加特定值并使用 = 分配它们；或组合+=。

为了缩短您的代码，它可能看起来像：

```
int main(int argc, char* argv[])
{
int count = 10;
while( (count+=10) < 200 )
    cout << (count*2) << ", ";

system("pause");
return 0;
} 
```

或者如果你需要这样一个简单的计数循环，我会使用 for() 循环，如：

```
int main()
{
for( int count = 10; count < 200; count+=10)
    cout << (count*2) << ", ";

//do stuff    
} 
```

# android - 如何在android中以编程方式控制横向和纵向？

> ID：12968359
> 
> 赞同：8
> 
> 时间：2012-10-19T06:14:11.233
> 
> 标签：android

我使用 android sdk 4.0 在应用程序上开发，并将该 .apk 文件安装在我的三星选项卡中。当我运行该应用程序时，它工作正常。如果我将标签纵向更改为横向或反向，屏幕也会更改。

但是我的要求是无论将模式更改为纵向到横向到横向到纵向，我的应用程序都应该仅在纵向模式下运行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-19T06:16:58.120

`android:screenOrientation="portrait"`在 manifest.xml 文件中为每个活动添加。

您也可以以编程方式执行此操作，因为您的`AbstractActivity`所有活动都可以扩展您的所有活动。：-

```
public abstract class AbstractActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T06:16:21.583

您可以在 AndroidManifest.xml 中定义模式如下，

`android:screenOrientation="portrait"`之后`android:name=".activityName"`

例如像这样，

```
<activity android:name=".MainActivity" android:label="@string/app_name" android:screenOrientation="portrait"> 
```

从活动类中，您可以使用以下代码，

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-19T06:17:07.740

您可以将其用于风景

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

要更改为纵向模式，请使用

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T07:00:04.807

在您的清单文件中，

```
<activity android:name=".MainActivity" android:label="@string/app_name" android:screenOrientation="portrait"> 
```

然后将其添加到您的 java 类中：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T06:19:42.110

如果你先搜索，你会发现这个问题已经回答了。不过，我会在这里再次发布答案。

转到您的清单文件，并在您只想保留纵向的活动下，插入以下行
android:screenOrientation="portrait" 下面给出了一个示例。

```
<activity android:name=".YourActivity"
      android:label="Your Activoity"
      android:screenOrientation="portrait"> 
```

即使您将设备置于横向模式，这也会使您的活动被迫仅处于纵向模式。

# spring-mvc - 参数未传递给控制器 - Spring

> ID：12968362
> 
> 赞同：0
> 
> 时间：2012-10-19T06:14:29.367
> 
> 标签：spring-mvc, controller

我在这里束手无策。这似乎是一件非常微不足道的事情，但它不起作用。我有一个 jsp 页面，它向服务器传递一个 Long (tournamentId) 和一个对象列表。当我发布表单时，列表已正确传递，但 Long 成员返回为 null，即使我可以看到它已发送。

该jsp：

```
<form:form method="post" action="addBets" modelAttribute="gwbCollection">
<c:choose>
<c:when test="${gwbCollection.tournamentState == 'CLOSED_FOR_BETS'}">
        <br>
    </c:when>
</c:choose>
<input name="tournamentId" value="${gwbCollection.tournamentId}" type="hidden"/>
    <table>
        <tr>
            <td>Side A:</td>
            <td>Score A:</td>
            <td>Side B:</td>
            <td>Score B:</td>
        </tr>
        <c:forEach var="gwb" items="${gwbCollection.games}" varStatus="status">
            <tr>
                <td><input name="games[${status.index}].game.gameId" value="${gwb.game.gameId}" type="hidden"/>
                    <input name="games[${status.index}].userId" value="${gwb.userId}" type="hidden"/>
                    <input name="games[${status.index}].game.tournamentId" value="${gwb.game.tournamentId}" type="hidden"/>
                    <input name="games[${status.index}].bet.betId" value="${gwb.bet.betId}" type="hidden"/>
                    ${gwb.game.sideA}</td> 
                <td><input name="games[${status.index}].bet.scoreA" value="${gwb.bet.scoreA}"/></td>
                <td>${gwb.game.sideB}</td> 
                <td><input name="games[${status.index}].bet.scoreB" value="${gwb.bet.scoreB}"/></td>
            </tr>
        </c:forEach>
    </table>
    <c:choose>
        <c:when test="${gwbCollection.tournamentState == 'OPEN_FOR_BETS'}">
            <input type="submit" />
        </c:when>
    </c:choose>
</form:form> 
```

控制器：

```
@Controller
@SessionAttributes
public class BetController {
...
@RequestMapping(value = "/addBets", method = RequestMethod.POST)
public String addBet(@ModelAttribute("gwbCollection") GamesWithBetsCollection gwbCollection) {
    List<Bet> bets = gwbUtil.getBets(gwbCollection);
...
} 
```

最后，GamesWithBetsCollection：

```
public class GamesWithBetsCollection {
private TournamentState tournamentState;
private Long tournamentId;
private List<GameWithBet> games;

public GamesWithBetsCollection() {

}

public List<GameWithBet> getGames() {
    return games;
}

public void setGames(List<GameWithBet> games) {
    this.games = games;
}

public TournamentState getTournamentState() {
    return tournamentState;
}

public void setTournamentState(TournamentState tournamentState) {
    this.tournamentState = tournamentState;
}

public Long getTournamentId() {
    return tournamentId;
}

public void setTournamentId(long tournamentId) {
    this.tournamentId = tournamentId;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T05:11:31.853

Nickdos - 哇！这就是答案！漂亮的捕捉！

回顾一下 - 字段“tournamentId”被定义为 Long（对象），但 setter 有 long（原始）作为参数。将其更改为 Long(object) 就可以了。

再次感谢尼克多斯！

# android - 未找到本机 Stitch 的实现

> ID：12968366
> 
> 赞同：2
> 
> 时间：2012-10-19T06:14:42.473
> 
> 标签：android, opencv, android-ndk

我在android项目中使用opencv拼接。

```
public class MainActivity extends Activity implements OnClickListener {

    private String mWarpType;
    private String mMatchConf;
    private String mConfThresh;

    private SharedPreferences mSettings;
    public static final String SETTINGS                = "Pano_Settings";

    private final String SETTINGS_WARP_TYPE            = "warp";
    private final String SETTINGS_MATCH_CONF           = "match_conf";
    private final String SETTINGS_CONF_THRESH          = "conf_thresh";

    private String mDefaultWarpType                    = "spherical";
    private String mDefaultMatchConf                   = "0.5";
    private String mDefaultConfThresh                  = "0.8";
    ...

    public native int Stitch(Object[] args);    

    public void onClick(View v) {
      switch (v.getId()) {
      case R.id.GoButton:

          List<String> s = new ArrayList<String>();
          s.add("Stitch");
          s.add("/sdcard/tesseract/images1.jpeg");
          s.add("/sdcard/tesseract/images2.jpeg");

          s.add("--warp");
          s.add(mWarpType);
          s.add("--conf_thresh");
          s.add(mConfThresh);
          s.add("--match_conf");
          s.add(mMatchConf);

          s.add("--work_megapix");
          s.add("0.2");
          s.add("--seam_megapix");
          s.add("0.2");
          s.add("--expos_comp");
          s.add("gain");
          s.add("--output");
          s.add("/sdcard/tesseract/");

          Integer i = Stitch(s.toArray());
          Log.d("1",i.toString());
        break;
      default:
        break;
      }
    }

} 
```

应用程序已启动，但调用 Stitch(s.toArray()) 时出现错误：

```
W/dalvikvm(15392): No implementation found for native Lcom/prototype/MainActivity;.Stitch ([Ljava/lang/Object;)I 
```

OpenCV成功添加到工作场所和我的项目->属性->安卓->库添加->OpenCV lib项目版本OpenCV 2.4.2。样本取自项目 android-opencv-panorama。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T00:45:39.257

您可能从示例中“按原样”复制了本机代码，但您的 Java 类具有不同的包和名称。查找`Java_<some more>_Stitch()`cpp 文件中命名的函数，并将其重命名为：

```
Java_com_prototype_MainActivity_Stitch() 
```

# ios - 在 Xcode 4.5 中使用 ZXing 库时架构 armv7 的未定义符号

> ID：12968369
> 
> 赞同：37
> 
> 时间：2012-10-19T06:15:00.650
> 
> 标签：ios, cocoa-touch, ios6, zxing, undefined-symbol

## 我想要做什么

在我的 iPhone 项目中集成[Zxing](http://code.google.com/p/zxing/)二维码阅读器框架。[我从这里](http://code.google.com/p/zxing/source/checkout)查看了 ZXing sdk 。我运行了 ZXing 附带的名为 ScanTest 的示例项目，没有任何问题。但是当我尝试将库与我的项目集成时，我得到了提到的错误。

## 项目规范

*   **目标操作系统**：iOS 6.0
*   **部署目标**：iOS 5.0 或以上。
*   **测试**：iPhone 4 和 iPhone 3GS。
*   **Xcode**：Xcode 4.5.1
*   **ZXing版本**：2.0

## 问题

当我构建时，在[ZXing 自述文件](http://code.google.com/p/zxing/source/browse/trunk/iphone/README)中执行了每个集成步骤后，我都会遇到构建错误，例如

```
Undefined symbols for architecture armv7:
  "std::basic_ostream<char, std::char_traits<char> >& std::operator<<<std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)", referenced from:
      zxing::qrcode::Detector::computeDimension(zxing::Ref<zxing::ResultPoint>, zxing::Ref<zxing::ResultPoint>, zxing::Ref<zxing::ResultPoint>, float) in libZXingWidget.a(Detector-B8B28E953F840D47.o)

Undefined symbols for architecture armv7:
"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&)", referenced from:
      zxing::Exception::Exception(char const*) in libZXingWidget.a(Exception.o)
      zxing::common::StringUtils::guessEncoding(unsigned char*, int, std::map<unsigned int, std::string, std::less<unsigned int>, std::allocator<std::pair<unsigned int const, std::string> > > 
```

有27个这样的错误..我只复制了前两个。

## 我发现了什么

好吧，我经历了[这个](https://stackoverflow.com/questions/6429494/undefined-symbols-for-architecture-armv7)，[这个](https://stackoverflow.com/questions/10930156/undefined-symbols-for-architecture-armv7-scnetworkreachabilitycreatewithaddre)，[这个](https://stackoverflow.com/questions/8559256/undefined-symbols-for-architecture-armv7)，[这个](https://stackoverflow.com/questions/8649378/undefined-symbols-for-architecture-armv7-what-does-this-error-mean)，这个，[这个](https://stackoverflow.com/questions/10027627/undefined-symbols-for-architecture-armv7-when-adding-cocoaasyncsocket)，[这个](https://stackoverflow.com/questions/11619941/undefined-symbols-for-architecture-armv7-after-importing-rncryptor)，[这个](https://stackoverflow.com/questions/10235993/undefined-symbols-for-architecture-armv7-ld-symbols-not-found-for-architectu)stackoverflow中的线程，都带有相同的错误消息。没有一个解决方案对我有用。

然后我在 ZXing 论坛上发现[了这个封闭的帖子，讨论了同样的问题。](http://code.google.com/p/zxing/issues/detail?id=1364&can=1&q=iOS%206&colspec=ID%20Type%20Status%20Priority%20Owner%20Summary)从那次讨论中，一些可能的解决方案（对某些人有效）

> *第一个错误是（可能）因为您没有将 main.m 重命名为 main.mm。第二个错误是（可能）因为您没有链接到小部件库*

我还重命名了我的 main.m，交叉检查了我是否添加了库，只是发现我确实有。所以事实并非如此。

> *在我将库的体系结构更改为“标准（armv7，armv7s）”以匹配我的主要项目后，我能够成功编译应用程序。*

我的项目、目标、库项目（用于调试、分发、发布）架构为**`Standard (armv7, armv7s)`**. 所以那里也没有运气。

然后他们关闭了这个问题，

> *zxing 项目已更新为添加 armv7s 架构并删除 armv6 架构。这些更改是 (1) 为 armv7s 的 iPhone 5 构建和 (2) 构建所必需的，因为 Xcode 4.5 不包括对 armv6 的支持。如果您有自己的项目文件，则需要自己进行这些更改。这些是并非特定于 zxing 的一般更改，因此如果您遇到问题，您可以在 StackOverflow 等一般论坛中获得更多/更快的帮助。*

所以我在这里，在 StackOverflow 中。

## 还有一点

在 ZXing 集成[README 文件](http://code.google.com/p/zxing/source/browse/trunk/iphone/README)中，集成的第一步是，

> *1) 在“ ”下找到“ZXingWidget.xcodeproj”文件`zxing/iphone/ZXingWidget/`。将 ZXingWidget.xcodeproj 拖放到 Xcode 项目的“组和文件”侧边栏的根目录下。将出现一个对话框——确保在单击“添加”之前未选中“复制项目”并且“参考类型”为“相对于项目”。或者，您可以右键单击项目导航器并选择“将文件添加到“MyProject””。*

当我将 ZXingWidget.xcodeproj 文件拖到我的项目中时，没有对话框。该项目直接添加到项目中，我无法设置“复制项目”和“引用类型”属性。不知道是Xcode 4.5的新特性还是bug。根据 README 文件，这是我无法正确遵循的唯一步骤。

好吧，你拥有我所拥有的所有信息。我一直试图解决这个问题 6 个小时。任何的想法？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-19T08:20:24.007

好吧，最后我让它工作了..对于将来遇到这种情况的任何人..

1.  将 main.m 文件重命名为 main.mm。

    ZXing 的 README 说明了我们为什么需要这个

    > *尝试使用 ZXingWidgetController 构建自己的项目时，可能会出现链接器错误，例如“未定义的引用”。如果此错误看起来像 c++ 未定义引用，则将 main.m 重命名为 main.mm（Objective-C++ 源代码后缀）可能会解决问题*

2.  重命名使用 ZXing libray 函数的文件（ViewController/View），使其也具有 .mm 扩展名。

3.  检查整个项目的**架构设置。**在您的项目设置、目标设置和 ZXing 项目（您添加到主项目中）和目标设置中，将**架构**和**有效架构**作为armv7 **armv7s提供。**

4.  在 main **project** -> **Build Settings**滚动并找出选项**C++ Language Dialect**和**C++ Standard Library**。为它们选择**“编译器默认值”**选项。（这是我错过的步骤，它是必需的，因为最新的 XCode 模板具有与旧版本不同的编译器默认设置）。

5.  您可能还必须将 ZXingWidget 的“**仅构建有效架构**”标志设置为`NO`. 就我而言，这个领域已经`NO`

这些为我解决了这个问题..

## ****更新****

**2013 年 12 月，[Google 已停用 ZXing iOS/Objective](https://groups.google.com/forum/#!topic/zxing/L2oGZllqwXI) C 端口。因此，iOS 的 Zxing 项目不再针对新的 iOS 版本进行维护和更新。此外，Zxing 不支持 Arm64 架构，这是新 XCode 版本的标准架构之一。

因此，鼓励开发人员转移到[原生 Apple 框架来读取](https://developer.apple.com/library/ios/technotes/tn2325/_index.html)从 iOS7 开始提供的条形码。有关分步教程，请参阅[此内容。](http://www.ama-dev.com/iphone-qr-code-library-ios-7/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-07T00:15:47.897

我已经遵循了上面的所有建议，虽然一切都编译得很好，但链接失败了：

```
"std::basic_ostream<char, std::char_traits<char> >& std::operator<<<std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)", referenced from:
  zxing::qrcode::Detector::computeDimension(zxing::Ref<zxing::ResultPoint>, zxing::Ref<zxing::ResultPoint>, zxing::Ref<zxing::ResultPoint>, float) in libZXingWidget.a(Detector-B8B28E953F840D47.o)
  zxing::GridSampler::checkAndNudgePoints(zxing::Ref<zxing::BitMatrix>, std::vector<float, std::allocator<float> >&) in libZXingWidget.a(GridSampler.o)
  zxing::qrcode::DecodedBitStreamParser::decodeNumericSegment(zxing::Ref<zxing::BitSource>, std::string&, int) in libZXingWidget.a(DecodedBitStreamParser-64E27B33E79CBC52.o)
  zxing::qrcode::Mode::forBits(int) in libZXingWidget.a(Mode.o) 
```

...“std::ios_base::Init::Init()”，引用自：

```
 ___cxx_global_var_init in libZXingWidget.a(QRCodeReader-F470BE6889D3F76D.o)
  ___cxx_global_var_init in libZXingWidget.a(Decoder-3DF771F40A970F8E.o)
  ___cxx_global_var_init in libZXingWidget.a(FormatReader.o)
  ___cxx_global_var_init in libZXingWidget.a(QRCodeReader-C190599C861BFE46.o)
  ___cxx_global_var_init in libZXingWidget.a(DecodeHints.o)
  ___cxx_global_var_init in libZXingWidget.a(BinaryBitmap.o)
  ___cxx_global_var_init in libZXingWidget.a(DecoderResult.o) 
```

等等...

我正在运行 Xcode 4.5.2。我已将 main.m 重命名为 main.mm，我的视图控制器也从 .m 重命名为 .mm，架构处处都是“armv7 armv7s”。

叹...

*更新*

Apple devforums 上的某个人回答了我的问题：

> 看起来您的 C++ 标准库不匹配。您的项目的构建设置使用 clang 的 C++ 标准库，但 libZXingWidget.a 被编译为使用 GNU C++ 标准库。
> 
> 试试这个：打开 ZXingWidget.xcodeproj 并将“C++ 标准库”设置为“libc++”，然后清理所有内容并重建。
> 
> 如果这不起作用，请尝试在您的项目和 ZXingWidget.xcodeproj 中将“C++ 标准库”设置为“libstdc++”

第一个建议成功了。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-27T17:21:22.967

我通过更改您拖放到 xcode 的项目上的一个值来解决它。

![在此处输入图像描述](../Images/c770ddfa049e9364190b9ad6420a7139.png)

放：

仅构建活动架构 -> 调试 -> 否

希望对人们有所帮助:)！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-04T00:26:40.063

这为我解决了这个问题。没有其他工作。

![在此处输入图像描述](../Images/d3036d7a1793fe18afa627beaa897072.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-25T21:29:10.313

可能还需要将 ZXingWidget 目标的“Build Active Architecture Only”标志设置为“NO”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-19T09:10:11.643

我已经遵循了上面的所有建议，虽然一切都编译得很好，但仍然失败，错误消息：

```
Undefined symbols for architecture armv7:
"_CVPixelBufferLockBaseAddress", referenced from:-[ZXingWidgetController captureOutput:didOutputSampleBuffer:fromConnection:] in libZXingWidget.a(ZXingWidgetController.o)
"_CVPixelBufferGetBytesPerRow", referenced from:-[ZXingWidgetController captureOutput:didOutputSampleBuffer:fromConnection:] in libZXingWidget.a(ZXingWidgetController.o)
"_CVPixelBufferGetWidth", referenced from:-[ZXingWidgetController captureOutput:didOutputSampleBuffer:fromConnection:] in libZXingWidget.a(ZXingWidgetController.o)
"_CVPixelBufferGetBaseAddress", referenced from:-[ZXingWidgetController captureOutput:didOutputSampleBuffer:fromConnection:] in libZXingWidget.a(ZXingWidgetController.o)
"_kCVPixelBufferPixelFormatTypeKey", referenced from:-[ZXingWidgetController initCapture] in libZXingWidget.a(ZXingWidgetController.o)
"_CVPixelBufferGetHeight", referenced from:-[ZXingWidgetController captureOutput:didOutputSampleBuffer:fromConnection:] in libZXingWidget.a(ZXingWidgetController.o)
"_CVPixelBufferUnlockBaseAddress", referenced from:-[ZXingWidgetController captureOutput:didOutputSampleBuffer:fromConnection:] in libZXingWidget.a(ZXingWidgetController.o)ld: symbol(s) not found for architecture armv7 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

所以，你添加CoreVideo.framework，编译就OK了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T19:16:30.997

我多次检查所有内容，经过无数次尝试，结果发现我只需要清理我的项目。在将 C++ 语言方言和 C++ 标准库更改为编译器默认值后，这是必要的。我一直在做一些简单的事情，但我错过了，浪费了 30 分钟。**

# java - JPA：EntityManager 的 get-use-close 和延迟加载

> ID：12968370
> 
> 赞同：9
> 
> 时间：2012-10-19T06:15:09.910
> 
> 标签：java, jpa, persistence, openjpa

IBM 建议使用 EntityManagers 的最佳实践是获取/使用/关闭。如果 EntityManager 没有关闭，那么同一个 EntityManager 可能会被多个线程使用，这将导致以下错误：

```
<openjpa-2.1.2-SNAPSHOT-r422266:1179900 fatal general error> org.apache.openjpa.persistence.PersistenceException: Multiple concurrent threads attempted to access a single broker. By default brokers are not thread safe; if you require and/or intend a broker to be accessed by more than one thread, set the openjpa.Multithreaded property to true to override the default behavior. 
```

如果您加载一个将 OneToMany 集合映射为 fetch=LAZY 的对象，如下所示：

```
public T find(Object id) {
    T t = null;
    EntityManager em = getEm();
    t = em.find(type, id);
    em.close();
    return t;
}

EntityManager getEm() {
    if(this.em ==null || !this.em.isOpen()) {
        this.em = emf.createEntityManager();            
    }
    return this.em;
} 
```

集合将始终为 null，因为当有人调用 getter 时，EntityManager 已关闭。仅当 fetch 为 EAGER 时才加载集合，但这会导致每次 SQL 连接都很慢。

所以它要么是“多线程”错误，要么是 openjpa.Multithreaded=true 这是一个不好的做法，或者它很慢，因为即使不需要集合，每次都需要 SQL 连接。有什么方法可以正确地做到这一点，所以它既可以通过 Lazy fetch 快速获取，又可以仅使用最佳实践来完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:01:37.303

Ok, here's my conclusion after two days research on the issue. For applications that can't rely on being deployed on a Java EE server and can't guarantee single thread access (e.g. web apps on tomcat) the best practice will be indeed to open, use and close entity managers within the scope of the method of the DAO object.

This means lazy loading will not work outside of DAO. To get around it, in methods that find one entity by id all collections need to be fetched by calling size() on the collection to trigger fetching before entity manager is closed. This will make the find method return a fully loaded object even though fetch is lazy.

For methods that return collections of objects, like search, it will be too slow to fully load each entity in the search result so results returned as is without children. Whenever one of the entities in the search result needs to be viewed, it will have to be loaded individually through that method that gets fully loaded objects.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:43:08.020

好的，不使用 Java EE，您可以创建一个简单的 EntityManagers 池。我使用 StackKeyedObjectPool（来自 Apache Commons Pool）并在需要时创建新的 EntityManager。我有一个借/还接口，池会根据需要自动创建新对象。见[http://commons.apache.org/pool/api-1.6/org/apache/commons/pool/impl/StackKeyedObjectPool.html](http://commons.apache.org/pool/api-1.6/org/apache/commons/pool/impl/StackKeyedObjectPool.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T19:58:20.670

我创建了 GitHub 项目，在 servlet(tomcat) 容器中提供自动管理的 EntityManager 生命周期。单线程 http 请求上下文检索相同的实例，并且 EM 在 http 请求结束时自动关闭。这为 servlet 和 jsp 脚本提供了简单的抽象，而无需显式的 try-catch-finally 样板。
[https://github.com/Murmur/ScopedEntityManager](https://github.com/Murmur/ScopedEntityManager)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T15:11:03.380

实际上，您应该能够让 Websphere 为您注入实体管理器。

```
@PersistenceContext(unitName = "<whatever>")
private EntityManager em; 
```

您需要访问数据的地方。应用程序服务器将为您处理线程问题，因为每个 bean 将只处理一个请求，并且该请求将在一个线程上。

# list - jsp中的处理列表

> ID：12968371
> 
> 赞同：0
> 
> 时间：2012-10-19T06:15:10.503
> 
> 标签：list, jsp, struts2

我在我的 jsp 页面中得到一个列表，如下所示：

```
<s:iterator value="myList"> 
    <td><s:property value="id" /></td>
    <td><s:property value="col1" /></td>
    <td><s:property value="col2" /></td>
    <td><s:property value="col3"/></td>
    <td><s:property value="checkboxFlag" /></td>
</s:iterator> 
```

现在，根据上面列表中 checkboxFlag 的值，我想填充一个复选框。如果值为 Y，则应选中复选框，否则不选中。

我怎样才能做到这一点？

下面的代码不起作用：

```
<s:iterator value="taskList">   
    <td><s:property value="id" /></td>
    <td><s:property value="col1" /></td>
    <td><s:property value="col2" /></td>
    <td><s:property value="col3"/></td>
    <td><s:checkbox name="status" <%if ("checkboxFlag".equals("Y")){ %> 
        checked="checked" <%} %>
    ></s:checkbox></td>    </s:iterator> 
```

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:17:51.097

如果你真的想根据`checkBoxFlag`然后使用
`<s:checkbox name="status" value='checkboxFlag == "Y"'/>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:22:24.017

`Scriptlet`为了从视图中删除业务逻辑，不建议在 jsp 中使用 s。我建议您`JSTL core`改用。它有你可以使用的 ff 标签：

（样本）

```
<c:choose>
 <c:when test="${ param.status eq 'Y'}">
  <s:checkbox name="status" checked="checked" />
 </c:>
 <c:otherwise>
  <s:checkbox name="status" />
 </c:otherwise>
</c:choose> 
```

# iphone - 在 iphone 中播放下载的音频视频

> ID：12968375
> 
> 赞同：1
> 
> 时间：2012-10-19T06:15:20.673
> 
> 标签：iphone, ios, avplayer

嗨看过很多教程，但找不到正确的可行答案。我需要从我的网络服务播放音频和视频文件，为此我想下载文件并在应用程序中播放它，看到 avPlayer 的教程没有任何用处。请提供链接或指导如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:23:22.470

使用 MPMoviePlayer，因为它可以打开网络流，尽管名称适用于音频。唯一的事情是这会弹出带有控件的模态播放器。

首先使用 NSURLConnection 下载网络文件并存储在本地，然后使用 AVAudioPlayer 播放本地文件。

# java - 从条目对象 Java 中获取最高百分比值

> ID：12968379
> 
> 赞同：2
> 
> 时间：2012-10-19T06:15:36.110
> 
> 标签：java

我正在编写一个程序，试图获得一个类别的最高百分比（这些类别存储在一个 Entry 对象中）。我现在要做的是存储所有百分比最高的类别，因为这是一个条件这可能会发生。所以问题是：“我怎样才能存储那些百分比值最高的类别？”这是我的代码到目前为止的样子：

```
double biggestPercentage = 0;
String biggestPercentageCategory = null;
ArrayList<String> biggestPercentageCategories = new ArrayList<String>();
double percentage = 0;

System.out.println("\n");
System.out.println("Get user's most interested category:");
for(int i=0;i<entrySet.size();i++){
    allEntries = entrySet.get(i);
    if(allEntries.getValue() != 0){
        double calculatePercentage = allEntries.getValue();
        percentage = Double.parseDouble(df.format((calculatePercentage*100)/totalNumberOfContentForEachUser1));
        System.out.println("Percentage of " + allEntries.getKey() + ": " + percentage +"%");
        if(percentage > biggestPercentage){
            biggestPercentage = percentage;
            biggestPercentageCategory = allEntries.getKey();
        }        
    }
    if(percentage == biggestPercentage){
        biggestPercentageCategories.add(allEntries.getKey());    
    }
}

HashMap<String,String> hashmap = new HashMap();
if(percentage > biggestPercentage){
    hashmap.put(userName, biggestPercentageCategory);
}
else if(percentage == biggestPercentage){
    hashmap.put(userName, biggestPercentageCategories.toString());
}
for(Entry<String, String> str : hashmap.entrySet()){
    System.out.println("\n");
    System.out.println(str);
} 
```

输出如下所示：

获取用户最感兴趣的类别：

```
Percentage of Entertainment_Culture: 12.5%
Percentage of War_Conflict: 12.5%
Percentage of Sports: 25.0%
Percentage of Hospitality_Recreation: 12.5%
Percentage of Human Interest: 12.5%<br>
Percentage of Education: 25.0%

dryice1993=[Entertainment_Culture, War_Conflict, Sports, Education] 
```

其中“dryice1993”只是此人的用户名。

但我想要的预期输出是：

```
dryice1993=[Sports, Education]? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:20:33.657

问题是，在每次迭代中，您都在根据`biggestPercentage`迄今为止的情况做出决定。

所以你要做的是，改变这些行：

```
if(percentage == biggestPercentage){
    biggestPercentageCategories.add(allEntries.getKey());   
} 
```

`for`到您当前拥有的循环下方的另一个循环。

就像这样：

1.  首先遍历所有项目
2.  找到最大的百分比
3.  然后再次迭代以查看等于最大百分比的值
4.  将它们添加到类别

编辑：

插入

```
}
for(int i=0;i<entrySet.size();i++){
    percentage = allEntries.getValue(); 
```

前

```
if(percentage == biggestPercentage){
    biggestPercentageCategories.add(allEntries.getKey());   
} 
```

在您的代码中并尝试更好地理解它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:31:46.290

最简单的方法是添加一行：

```
if(percentage > biggestPercentage){
        biggestPercentage = percentage;
        biggestPercentageCategory = allEntries.getKey();
        biggestPercentageCategories.clear();  // <-- add this one
} 
```

当您找到一个新的“最高百分比”时，您只需清空旧垃圾箱即可。这些不能包含百分比较低的条目。

# github - 更改 Github 用户名后？

> ID：12968385
> 
> 赞同：1
> 
> 时间：2012-10-19T06:16:04.947
> 
> 标签：github

更改 github 用户名后，是否需要更改 github 设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:22:52.987

查看更新的[参考链接](https://help.github.com/articles/what-happens-when-i-change-my-username)

所有对以前用户名的引用，例如带有您名字的旧网址，现在都会给出 404 错误。我们无法设置从旧用户名到新用户名的重定向。

# java - 如何获得支持所有设备的 J2ME 的 IMEI？

> ID：12968395
> 
> 赞同：5
> 
> 时间：2012-10-19T06:17:09.447
> 
> 标签：java, java-me, nokia, imei

> **可能重复：**
> [如何在 J2me 中动态获取手机 IMEI 号码？](https://stackoverflow.com/questions/10680779/how-to-dynamically-get-mobile-imei-number-in-j2me)

有没有办法让 J2ME 的 IMEI 支持所有设备？我做了一些谷歌搜索并找到了以下解决方案，但它是针对特定设备的。

诺基亚。System.getProperty("com.nokia.IMEI");

索尼爱立信 System.getProperty("com.sonyericsson.imei");

摩托罗拉 System.getProperty("com.motorola.IMEI");

有没有通用的方法来获取所有设备的 IMEI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:21:58.920

没有通用的方法来获取所有设备的 IMEI，您只需通过编码来完成。您可以以其他方式尝试它，例如使用 System 类，如下所示，

```
System.getProperty(“microedition.platform”); 
```

这将返回主机平台或设备的名称。在诺基亚设备中，名称由“诺基亚”、设备型号和软件版本组成，以“/”分隔。“诺基亚”和型号之间没有空格，“/”两边也没有空格。形式上，平台字符串的语法是：Nokia MODEL_NUMBER “/” SW_VERSION。例如，`Nokia6310i/4.42`或`Nokia3510i/p1.25`。

从结果中您可以获取制造商并使用 Switch case 通过编码获取 IMEI，

# ruby-on-rails-3 - PG ::错误：错误：将记录插入关联模型时，“created_at”列中的空值

> ID：12968397
> 
> 赞同：11
> 
> 时间：2012-10-19T06:17:18.087
> 
> 标签：ruby-on-rails-3

我有一个`Job`模型和一个`Category`使用 HABTM 协会加入的模型。

尝试分配给`Categories_Jobs`模型时出现错误。

`PG::Error: ERROR: null value in column "created_at" violates not-null constraint`

```
j = Job.first
Job Load (0.7ms)  SELECT "jobs".* FROM "jobs" LIMIT 1
=> #<Job id: 7, user_id ...(removed rest of details for sake of clarity)

j.categories
Category Load (0.8ms)  SELECT "categories".* FROM "categories" INNER JOIN "categories_jobs" ON "categories"."id" = "categories_jobs"."category_id" WHERE "categories_jobs"."job_id" = 7
=> [] 

j.category_ids = [1]
Category Load (6.1ms)  SELECT "categories".* FROM "categories" WHERE "categories"."id" =   $1 LIMIT 1  [["id", 1]]
(0.2ms)  BEGIN
(0.6ms)  INSERT INTO "categories_jobs" ("job_id", "category_id") VALUES (7, 1)
(0.1ms)  ROLLBACK
ActiveRecord::StatementInvalid: PG::Error: ERROR:  null value in column "created_at" violates not-null constraint 
```

我应该从我的`Categories_Jobs`模型中删除时间戳吗？

```
class CreateCategoriesJobs < ActiveRecord::Migration
  def change
    create_table :categories_jobs, :id => false do |t|
      t.integer :category_id
      t.integer :job_id
      t.timestamps
    end
  end
end 
```

我应该以另一种方式这样做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T06:20:43.673

请参阅下面的链接以获取您的解决方案。

[HABTM](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_and_belongs_to_many)

你的解决方案

删除`t.timestamps`然后运行。

```
class CreateCategoriesJobs < ActiveRecord::Migration
  def change
    create_table :categories_jobs, :id => false do |t|
      t.integer :category_id
      t.integer :job_id
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T09:13:12.087

只需使用另一种多对多关系声明。

```
class Category ...

  has_many :categories_jobs
  has_many :categories, through: :categories_jobs

  ...
end

class Job ...

  has_many :categories_jobs
  has_many :jobs, through: :categories_jobs

  ...
end 
```

那么您将能够使用时间戳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-24T15:30:08.280

如果它对其他人有帮助，我在保存带有子模型的对象时遇到了这个错误消息。检查子模型，即使父模型没有 id，我也看到在它们上填充了父 id。我打开了日志记录，发现由于 after_create 块中的错误，父模型正在回滚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-12T21:21:55.897

我的回答并没有完全回答 OP 的问题，但是在谷歌搜索错误消息时会出现这篇文章，所以我还是要回答。

我有`has_many`关系 假设我们正在使用`Parent`模型和 Parent `has_many :child_models`。

当我打电话

```
@parent.child_models.create(params) 
```

然后 Postgres 抱怨空值。但如果我把它分开，一切都很好：

```
@child = @parent_object.child_models.build
@child.save 
```

另一种解决方案是消除`NOT NULL`约束。在那种情况下`create`返回没有错误，当我稍后查看记录时，时间戳已设置。ActiveRecord 最初必须保存没有时间戳的记录，然后返回并插入它们。（导轨 4.2.5）

# c# - C# - 将目录中每个文件的名称列出到数组中？

> ID：12968404
> 
> 赞同：-3
> 
> 时间：2012-10-19T06:18:05.963
> 
> 标签：c#, file

如何将目录中的文件列出到数组中？只有文件，我不太关心文件夹。我知道在python中它是：

```
for file in os.listdir('Blah'):
    #BlahBlahBlah 
```

但是，我不确定如何在 C# 中这样做。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T06:19:33.900

使用[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)方法

```
string[] filesArray = Directory.GetFiles("yourpath"); 
```

> 返回指定目录中文件的名称（包括它们的路径）。

记得包含[System.IO](http://msdn.microsoft.com/en-us/library/system.io.aspx)

您还可以使用[Directory.GetFiles Method (String, String)](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)通过指定搜索模式来搜索文件。就像是：

```
string[] fileArray = Directory.GetFiles(@"c:\", "X*"); 
```

返回所有以 Character 开头的文件`X`

您可以使用：

```
if(Directory.Exists("yourpath")) 
```

检查路径是否存在

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T06:20:38.977

```
using System.IO;    
string[] files = Directory.GetFiles("PATH");
OR
string[] files = Directory.GetFiles("PATH","*.docx",SearchOption.AllDirectories);
OR
string[] files = Directory.GetFiles("PATH","*.pdf",SearchOption.TopDirectoryOnly);
OR
string[] files = Directory.GetFiles("PATH","*.xlsx"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T06:20:49.987

尝试以下...使用 System.IO 目录

```
string[] filePaths = Directory.GetFiles(@"D:\MyDir\"); 
```

# flash - 如何在两个显示器上播放两个 flash swf 文件？

> ID：12968406
> 
> 赞同：1
> 
> 时间：2012-10-19T06:18:07.990
> 
> 标签：flash, apache-flex, air

我有两个 swf 文件和两个显示器。第一个 swf 在第一台显示器上播放，第二个 swf 在第二台显示器上播放。我如何在 Flash 或任何插件上做到这一点？我怎样才能找到连接的屏幕请帮助任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:49:19.840

[有关Screen](http://help.adobe.com/en_US/air/reference/html/flash/display/Screen.html)类的说明和文档，请参阅[在 AIR 中显示屏幕。](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118676a47e0-8000.html) 所有屏幕形成一个虚拟桌面，因此窗口坐标将决定它将出现在哪个屏幕上。

# java - 通过命令行更改Sql server 2008的默认端口号

> ID：12968407
> 
> 赞同：-2
> 
> 时间：2012-10-19T06:18:13.813
> 
> 标签：java, sql-server, system-administration

我想在 SQL Server 2008 中将默认端口号 1433 更改为另一个。是否有任何命令行选项？我知道如何通过 SQL Server 配置管理器更改端口号，但我需要从我的 java 应用程序中更改它。

关于这个的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:27:42.343

没有命令行实用程序，但您可以使用 WMI 来完成。这里有一个关于它的 MSDN 博客：[https ://serverfault.com/questions/123411/change-port-number-via-command-line-in-sql-server-2005](https://serverfault.com/questions/123411/change-port-number-via-command-line-in-sql-server-2005)

# c# - 如何阻止自定义 ThrowHelper 出现在 StackTrace 中？

> ID：12968411
> 
> 赞同：4
> 
> 时间：2012-10-19T06:18:35.137
> 
> 标签：c#, .net

您可以在 .net 基类库中找到的一种模式是 ThrowHelper。从本质上讲，它减少了每个方法的字节码数量。

无论如何，我想知道是否有一个属性指令来阻止 throw Helper 中导致的错误在 helper 内停止。我希望调试器停在调用行。

IE

```
 ThrowHelper.ThrowAnException () 
```

而不是在 ThrowAnException() 内部

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T06:25:35.090

您还可以使用[属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerstepthroughattribute.aspx)标记您的投掷方法：

```
class ThrowHelper
{
    [DebuggerStepThrough]
    public static void Throw()
    {
        throw new InvalidOperationException();
    }
} 
```

那么调试器就不会进入这个方法了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T06:20:51.577

您可以使辅助方法实际上不抛出异常，只需创建它。堆栈跟踪将指向您真实方法中的 throw 语句，而不是 ThrowHelper 中的任何内容。

```
throw ThrowHelper.CreateAnException(); 
```

# c - 在系统函数中调用 OpenCV 捕获代码时会冻结

> ID：12968415
> 
> 赞同：2
> 
> 时间：2012-10-19T06:18:44.820
> 
> 标签：c, opencv, pthreads, system

我正在用 OpenCV 开发一个应用程序。我正在从相机拍摄快照，然后我正在关闭捕获。

下面是我的捕获代码 (capturecam1lowres.c)

```
#include <cv.h>
#include <highgui.h>
#include <cxcore.h>
#include <stdio.h>

int main(int argc, char* argv[])
{    
  CvCapture* camera = cvCreateCameraCapture(0); // Use the default camera

  IplImage*     frame = 0;

  cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_WIDTH,1024) ;
  cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_HEIGHT,768); 

  frame = cvQueryFrame(camera); //need to capture at least one extra frame
//  frame = cvQueryFrame(camera);

  if (frame != NULL) {
    printf("Frame extracted from CAM1\n\r");
        cvSaveImage("/home/root/Desktop/BBTCP/webcam1.jpg", frame,0);
  } else {
      printf("Null frame 1\n\r");
  }
  cvReleaseCapture(&camera);
  cvReleaseImage(&frame);
  return 0;
} 
```

我从 system(./capturecam1lowres) 调用此代码的可执行文件，但它冻结在

```
frame = cvQueryFrame(camera); 
```

有时（不是每次）排队。如何为这个子程序（capturecam1lowres）设置超时。如果捕获需要太多时间，它应该放弃并退出。我怎样才能做到这一点？

我尝试使用 posix 线程但无法获得结果。下面也是我的非工作线程代码。

```
#include <cv.h>
#include <highgui.h>
#include <cxcore.h>
#include <stdio.h>
#include <pthread.h>
#include <stdlib.h>
#include <unistd.h>

void *thread_function(void *arg) 
 {

    sleep(10);
    exit(0);

}

int main(int argc, char* argv[])
{    
  CvCapture* camera = cvCreateCameraCapture(0); // Use the default camera
  pthread_t mythread;
  IplImage*     frame = 0;

  if ( pthread_create( &mythread, NULL, thread_function, NULL) ) 
  {
    printf("error creating thread.");
    abort();
  }

  if ( pthread_join ( mythread, NULL ) ) 
  {
    printf("error joining thread.");
    abort();
  }

  cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_WIDTH,1024) ;
  cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_HEIGHT,768); 

  frame = cvQueryFrame(camera); //need to capture at least one extra frame
//  frame = cvQueryFrame(camera);

  if (frame != NULL) {
    printf("Frame extracted from CAM1\n\r");
        cvSaveImage("/home/root/Desktop/BBTCP/webcam1.jpg", frame,0);
  } else {
      printf("Null frame 1\n\r");
  }
  cvReleaseCapture(&camera);
  cvReleaseImage(&frame);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:09:42.987

代码或系统设计没有错误，但问题出在嵌入式系统本身的 DMA 模块上。DMA 批量传输中的损坏会导致此错误。所以不存在软件问题。

# ruby-on-rails - 我应该从哪里开始阅读以了解如何构建一个好的 Rails gem？

> ID：12968418
> 
> 赞同：0
> 
> 时间：2012-10-19T06:19:10.160
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem, bundler

I'm feeling fairly seasoned in Ruby on Rails by now, and have attempted to build my own Rails plugins. Going through that process, however, I realized that I really have not found very many good resources that clearly spell out what the conventions are for creating Rails gems/plugins, and how to efficiently accomplish some of the things that I wanted to do with my plugin.

在我看来，建筑 Rails gems 的文档不是很好，但也许我没有找对地方。为了深入了解其他 gem 的构建方式，我通读了用于用户身份验证的 Devise 插件的一些源代码。我几乎没有发现任何描述类似于 Devise 如何将其自己的方法注入现有模型的过程的过程，尽管这对于许多优秀的 gem 来说似乎是一件非常有用的事情。

我的问题是：我应该去哪里学习如何构建好的 Rails gems？是否有关于如何做某些事情的约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:41:21.463

***目前流行的方法是使用Engines***来实现您想要实现的目标。引擎基本上允许您将一个应用程序安装到另一个应用程序中，允许您执行任何操作，从添加一两个方法到添加完整的博客。[官方指南](http://edgeguides.rubyonrails.org/engines.html)有一个非常好的入门指南，也有很多不错的非官方[指南](https://www.google.com/search?q=rails%20engines)。一个引擎基本上由一些初始化代码、应用程序代码和一个用于测试和开发的虚拟应用程序组成。乍一看，它可能看起来很吓人，但一开始它比听起来容易得多。祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:35:09.113

这是使用 Bundler 制作宝石的最现代方法：

```
bundle gem your_gem
cd your_gem 
```

编辑 your_gem.gemspec 并添加描述、摘要和可选网站。向 Gemfile 添加所需的 gem，例如 rspec。

```
rspec --init
touch spec/your_gem_spec.rb 
```

编写好的测试。将您的代码添加到 lib/your_gem.rb。当您完成构建并推送到 ruby​​gems.org 的时间时：

```
gem build your_gem.gemspec
gem push your_gem-0.0.1.gem 
```

就是这样。下次进行更改时，请务必更改 version.rb 中的版本号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:24:01.410

请参阅下面的链接，该链接将帮助您构建一个好的 Rails gem

[制作宝石](http://railscasts.com/episodes/135-making-a-gem)

# apache - Zend Http conf 设置为 Windows 7

> ID：12968420
> 
> 赞同：0
> 
> 时间：2012-10-19T06:19:14.133
> 
> 标签：apache, zend-framework, virtualhost

我正在关注 Zend 初学者教程。在这实际上需要在 Linux PC 的本地服务器 Apache httpd.conf 中进行设置。

```
 NameVirtualHost *:80
    <VirtualHost *:80>
    DocumentRoot "/usr/local/apache/htdocs/square/public"
    ServerName square.localhost
    </VirtualHost> 
```

但是我在本地安装了带有 Xampp 的 Windows 7。任何人都可以帮我解决如何将其放入我的本地 httpd.conf 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:03:27.293

切换`DocumentRoot "/usr/local/apache/htdocs/square/public"`到项目的公用文件夹。例如，`"C:\XAMPP\www\square\public"`项目的公用文件夹所在的位置或位置。

还要确保您的主机文件中有这一行：`127.0.0.1 localhost`

# java - 小程序在浏览器中不显示

> ID：12968421
> 
> 赞同：0
> 
> 时间：2012-10-19T06:19:15.997
> 
> 标签：java, swing, applet, japplet

我正在使用其中包含摆动组件的 JApplet，并且事件处理由 AWT 侦听器完成。当我在小程序查看器中运行它时，我的小程序很好，但是当我在浏览器中运行它时，它不会只显示和空白空间，顶部有消息：

```
Error, Click for details 
```

问题可能出在哪里，我该如何解决？

堆栈跟踪是：

```
 java.lang.ClassNotFoundException: AudioApplet.class
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

这是我用来将我的小程序嵌入 HTML 的小程序标签

```
 <applet code="AudioApplet.class" width="700" height="700">
    Java applet that draws animated bubbles.
    </applet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:16:24.097

这些是您可以更正/检查的内容：

•检查Java 控制台日志是否有错误。• 检查applet 的Java 网络启动协议(JNLP) 文件的语法。不正确的 JNLP 文件是导致没有明显错误的失败的最常见原因。• 如果使用部署工具包的runApplet 功能进行部署，请检查JavaScript 语法。有关详细信息，请参阅部署 Applet。问题：Java 控制台日志显示 java.lang.ClassNotFoundException。

•确保您的Java 源文件编译正确。• 如果使用标签进行部署，请检查applet JAR 文件的路径是否在归档属性中准确指定。•如果使用JNLP 文件启动，请检查JNLP 文件中jar 标记中的路径。• 确保applet 的JAR 文件、JNLP 文件和网页位于正确的目录中，并且相互准确引用。问题：我能够构建一次代码，但现在构建失败，即使没有编译错误。

•关闭浏览器并再次运行构建。浏览器很可能锁定了 JAR 文件，因此构建过程无法重新生成 JAR 文件。问题：当我尝试加载具有小程序的网页时，我的浏览器将我重定向到 www.java.com 而没有任何警告

• 网页上的小程序很可能是使用部署工具包脚本部署的。小程序可能需要比客户端上当前存在的版本更高版本的 Java 运行时环境软件。检查小程序网页中 runApplet 函数的 minimumVersion 参数。有关详细信息，请参阅部署 Applet。问题：我修复了一些错误并重新构建了我的小程序的源代码。当我重新加载小程序的网页时，我的修复没有显示出来。

•您可能正在查看以前缓存的小程序版本。关闭浏览器。打开 Java 控制面板并删除临时 Internet 文件。这将从缓存中删除您的小程序。再次尝试查看您的小程序。

# profile - 性能输出中的“样本”是什么意思？

> ID：12968422
> 
> 赞同：5
> 
> 时间：2012-10-19T06:19:22.203
> 
> 标签：profile, sample, perf

我使用 linux perf 来分析我的程序，但我无法理解结果。

```
10.5% 2 乐趣.......
      |
      |- 80% - ABC
      | call_ABC
      -- 20% - 防御
               call_DEF

```

上面的例子意味着 'fun' 有两个样本并贡献了 10.5% 的开销，

其中 80% 来自 ABC，20% 来自 DEF。我对吗？

现在我们只有两个样本，那么 'perf' 是如何计算 ABC 和 DEF 的分数的呢？

为什么他们不是 50%？剂量“性能”使用附加信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-11T04:02:04.257

> 上面的例子意味着 'fun' 有两个样本并贡献了 10.5% 的开销，

是的，这部分`perf report -g -n`显示 19 个样本中有 2 个（2 个是 19 个样本的 10.5%）在 foo 函数本身中。在其他功能中采样了其他 17 个样本。

`-static -O3 -fno-inline -fno-omit-frame-pointer -g`我刚刚使用最近的 gcc ( ) 和 perf复制了您的代码（`perf record -e cycles:u -c 500000 -g ./test12968422`用于低分辨率样本或`-c 5000`高分辨率）。现在 perf 有一些不同的重量规则，但想法应该是一样的。当程序只有 2 个样本并且两个样本都在 中时`foo`，调用图 ( `perf report -n -g callee`) 对于 call_DEF/_ABC 中的每一个都是 50（没有附加信息）。这个程序实际上有 86% 的运行时在 foo 中，其中 61% 是从 ABC 调用时，25% 是从 DEF 调用时的 86：

```
100%  2  fun
 - fun
   + 50% call_DEF
   + 50% call_ABC 
```

perf 可以使用哪些附加信息来重建更多信息？我认为它可以是 call_DEF 和 call_ABC 的自重；或者它可以是所有示例调用堆栈中调用链的“call_ABC->foo”和“call_DEF->foo”部分的频率。

使用 linux 内核版本 4.4 / 4.10 的性能，我无法重现您的情况。我在 call_ABC 和 call_DEF 中添加了不同数量的自我工作。他们都只是调用 foo 来完成固定的工作量。现在我有 19 个样本`-e cycles:u -c 54000 -g`，call_ABC 有 13 个，call_DEF 有 2 个，乐趣有 2 个（在一些随机函数中还有 2 个）：

```
 Children  Self  Samples Symbol
       74%  68%        13 [.] call_ABC
       16%  10.5%       2 [.] call_DEF
     10.5%  10.5%       2 [.] fun
    - fun
      + 5.26% call_ABC
      + 5.26% call_DEF 
```

因此，请尝试更新版本的 perf，而不是 3.2 Linux 内核的时代。

唯一工作的第一个来源，`fun`当从 ABC 和 DEF 调用时分配不均：

```
#define g 100000
int a[2+g];

void fill_a(){
    a[0]=0;
    for(int f=0;f<g;f++)
        a[f+1]=f;
}

int fun(int b)
{
    while(a[b])
        b=a[b]; 
    return b;
}

int call_ABC(int b)
{
    int d = b;
    b = fun(d);
    return d-b;
}

int call_DEF(int b)
{
    int e = b;
    b = fun(e);
    return e+b;
}

int main()
{
    int c,d;
    fill_a();
    c=call_ABC(100000);
    c=call_DEF(45000);
    return c+d; 
} 
```

ABC 和 DEF 中工作不均的第二个来源，乐趣中的小工作相同：

```
#define g 100000
int a[2+g];

void fill_a(){
    a[0]=0;
    for(int f=0;f<g;f++)
        a[f+1]=f;
}

int fun(int b)
{
    while(a[b])
        b=a[b]; 
    return b;
}

int call_ABC(int b)
{
    int d = b;
    while(a[d])
        d=a[d]; 
    b = fun(5000);
    return d-b;
}

int call_DEF(int b)
{
    int e = b;
    while(a[e])
        e=a[e]; 
    b = fun(5000);
    return e+b;
}

int main()
{
    int c,d;
    fill_a();
    c=call_ABC(100000);
    c=call_DEF(20000);
    return c+d; 
} 
```

# c# - HttpWebRequest 中缺少属性

> ID：12968423
> 
> 赞同：5
> 
> 时间：2012-10-19T06:19:30.530
> 
> 标签：c#, post, httpwebrequest

我正在使用 .Net 4 和 VS express 2010。

我可以发出我的帖子请求，但我不能设置一些标题。下面的代码工作正常

```
WebRequest Request = Request.Create("http://example.com") as HttpWebRequest;
Request.Method = "POST";
Request.ContentType = "application/x-www-form-urlencoded; charset=UTF-8";
Request.Headers.Set("Accept-Encoding", "gzip,  deflate"); 
```

问题是我无法设置其他标题，如“Accept”、“UserAgent”、“Referer”、“Connection”

我尝试了以下方法但失败了

```
Request.Accept = "*/*";
Request.Headers.Set("Accept", "*/*"); 
```

对于第一行，Accept 属性不存在，而对于第二行，标题需要使用适当的方法或属性进行编辑。

我是一个菜鸟，我在 google 和 stackoverflow 上搜索过。如果您不知道如何解决它，请指出解决此问题的任何方向，例如重新安装某些东西，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T06:24:13.830

`Accept`不作为属性存在于 上`WebRequest`，但它*确实*存在于 上[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)。

```
HttpWebRequest request = (HttpWebRequest) Request.Create("http://example.com");
request.Accept = "*/*"; 
```

即使您以前使用过`as HttpWebRequest`（我强烈建议您改用强制转换），但您的*变量*被声明为 type `WebRequest`，这就是它无法编译的原因。

# php - PHP str_replace 未按预期工作，返回多个值

> ID：12968430
> 
> 赞同：0
> 
> 时间：2012-10-19T06:19:50.980
> 
> 标签：php, str-replace

我有这个使用 str_replace 函数的代码：

```
$result = mysql_query("SELECT * FROM table");
$contact_link = "<a href=\"/contact-us/\" class=\"inline\" target=\"_parent\">Contact Us</a>";

while($row = mysql_fetch_array($result))
{
$answer = str_replace(array("contact us","Contact Us","Contact us") , array($contact_link , $contact_link , $contact_link), $row['answer']);
echo $answer;
} 
```

但是，当我输入字符串“联系我们”时，它会返回此值：

```
<a href="/contact-us/" class="inline" target="_parent"><a href="/contact-us/" class="inline" target="_parent">Contact Us</a></a> 
```

我不知道为什么。我希望它返回仅由一个链接而不是两个链接封装的联系我们。我想也许是因为这两个词都以小写字母开头，所以它可能会返回两次？一次用于“联系我们”，一次用于“联系我们”？我已经阅读了该站点上的搜索结果并进行了一些谷歌搜索，但我找不到任何发生相同情况的内容。

如果它是相关的，我这样做的原因是当我的客户更新他的网站时，它会返回一个指向他的联系页面的链接。我想让这三个不同版本的联系我们，因为格式可能会根据他使用的位置而改变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T06:26:29.490

您可以使用不区分大小写的 str_ireplace。看一下：

[http://php.net/manual/en/function.str-ireplace.php](http://php.net/manual/en/function.str-ireplace.php)

您获得此输出的原因是因为该功能首先检查“联系我们”并将其替换为链接，然后查找刚刚添加的“联系我们”并再次替换它。

```
str_ireplace("contact us", $contact_link, $row['answer']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:27:17.727

真正的问题是您的联系链接内部文本也被联系链接本身所取代！

因此，当您替换第一个联系我们的实例时，您正在添加另一个。相反，您可以按照 Pedryk 的建议一次性替换所有内容。

# python - Python：同时对二维数组的每个像素执行操作

> ID：12968446
> 
> 赞同：0
> 
> 时间：2012-10-19T06:20:44.683
> 
> 标签：python, image, filter, numpy, scipy

我想在二维数组上应用 3x3 或更大的图像过滤器（高斯或中值）。

尽管有几种方法可以做到这一点，例如`scipy.ndimage.gaussian_filter`或应用循环，但我想知道是否有一种方法可以`mxn`同时在阵列的每个像素上应用 3x3 或更大的过滤器，因为它可以节省大量绕过循环的时间。可以为此目的使用函数式编程吗？

有一个模块叫`scipy.ndimage.filters.convolve`，请告诉它是否能够执行同时操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:48:40.377

您可能想了解 Python 中的并行处理： [http](http://wiki.python.org/moin/ParallelProcessing) ://wiki.python.org/moin/ParallelProcessing 或`multiprocessing`特别是包：http: [//docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)

在多处理器上使用 Python Imaging Library (PIL) 进行检查。 [将多处理与 PIL](https://stackoverflow.com/questions/12444795/using-multiprocessing-with-the-python-imaging-library) 和类似问题一起使用。

您可以创建四个工人，将您的图像分成四个，并将每个象限分配给一个工人。但是，您可能会因为开销而浪费时间。另一方面，如果您有多个图像要处理，那么这种方法可能会起作用（让每个工作人员打开自己的图像）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:04:22.557

即使python确实提供了将操作应用于NxM数组而不循环它的功能，该操作仍然不会在后台同时执行，因为CPU每个周期可以处理的指令量是有限的，因此无法节省时间. 对于您的用例，这甚至可能会适得其反，因为您的数组中的字段可能具有依赖关系，如果您不知道访问它们的顺序，这很可能会一团糟。

Hugues 提供了一些有关 Python 中并行处理的有用链接，但在访问相同的数据结构（例如同时具有多个线程的数组）时要小心。如果您不同步线程，它们可能会同时访问数组的同一部分并将事情搞砸。
请注意，可以有效并行运行的线程数量受到处理器内核数量的限制。

# iphone - 我想获取今天在 iphone 中到期的已设置 uilocalnotifications 的列表

> ID：12968447
> 
> 赞同：1
> 
> 时间：2012-10-19T06:20:44.493
> 
> 标签：iphone, ios, ios5, ios4

我使用 iPhone 中的 UILocalnotification 类将 localnotications 设置为每天触发 3 次。通知被正确触发。我想显示今天将触发的通知列表。我正在将所有通知的时间以文本格式保存到我的数据库中。我该如何解决？

# facebook - 将变量传递到新的页面选项卡安装

> ID：12968453
> 
> 赞同：0
> 
> 时间：2012-10-19T06:21:11.430
> 
> 标签：facebook, get, parameter-passing, facebook-page, facebook-iframe

我想为其他页面所有者构建一个自定义的 Facebook 页面选项卡以安装到他们的 Facebook 页面上。每个页面选项卡都需要在引出页面选项卡的链接中具有自己的 ID，以便我们跟踪该页面活动。

例如，每个页面选项卡都会有一个产品列表，这些产品链接到外部网站上的相关产品页面。这些链接中的每一个都有一个唯一的 ID 参数，我们可以跟踪点击和购买。[例如 http://www.mydomain.com/products/product123.aspx?userid=12345]

所以我需要在链接中创建 userid 变量。可能使用 GET（或对于 asp 的 Request.QueryString）从初始页面选项卡安装中接收。

据我所知，我也许可以使用 app_data 参数将数据传递到页面，但是当我尝试它时，它不起作用。

这就是我用来安装页面标签的内容 [https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&app_data=12345]

我认为这会将用户标识传递给新的页面选项卡，但它似乎不起作用。

如果有人能指出我正确的方向，我将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:44:35.817

> 据我所知，我也许可以使用 app_data 参数将数据传递到页面，但是当我尝试它时，它不起作用。
> 
> 这就是我用来安装页面标签的内容 [https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&app_data=12345]

但是你知道，附加 &app_data=12345 并不*意味着*你会得到一个名为 'app_data' 的 GET 参数，对吧……？

app_data 将作为signed_request 参数中的属性传递——因此您必须解码该参数，然后在其中找到您的app_data 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:24:29.260

为什么“每个页面标签”都需要有一个 ID？页面 ID 应该足以让您确定要显示的内容（并且在每个页面加载时`signed_request`通过

您还可以向用户请求`manage_pages` [权限](https://developers.facebook.com/docs/authentication/permissions/)以确定他们管理的页面列表以及您的应用程序是否安装在每个页面上

# matlab - 如何在matlab（mfile）中将传感器的输入提供给PID

> ID：12968456
> 
> 赞同：1
> 
> 时间：2012-10-19T06:21:25.643
> 
> 标签：matlab

我正在尝试在 matlab(mfile) 中实现以下系统：![基于视觉的车道保持控制系统](../Images/46716fc6035e1b4f2c87300006c6caf3.png)

我的系统有两部分图像处理（传感器）和控制系统。这段代码是：

```
clear,close
%your model and its input output
mot=tf(1,[1  1]),
model=ss(mot);
[F,h,c,d]=ssdata(model);
%your pid controller
r=pid(5,1/0.05,10)
sys.inputname='u'
sys.outputname='y'
Ci.inputname='e';
Ci.outputname='u';
som1 = sumblk('e = r - y');
%global model with all conneection
modelg=connect(som1,r,model,'r','y')
%simulation
step(modelg) 
```

上面的代码是表示 PID 的模型，然后是状态空间，然后是作为反馈的输出，但我必须从我的传感器（图像处理部分，例如 3）提供输入并将其与我的参考值进行比较。我需要知道该输入值将在此代码中调整的位置。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:19:15.173

系统的模拟输出是“y”，因此您需要将这个“y”与传感器的输出进行比较。这将用于获取 e，即实际错误。您这样做是为了对“y”有更多的了解，因为系统描述永远不会完美。我想这更多的是与控制系统相关的问题，而不是实际的 matlab 问题，还是我做错了什么？

# java - JAVA Chat Sever 使用 TCP 协议与 Iphone 客户端通信

> ID：12968458
> 
> 赞同：0
> 
> 时间：2012-10-19T06:21:32.737
> 
> 标签：java, iphone, objective-c, sockets, client-server

我想开发处理 TCP 协议的 JAVA 聊天服务器的演示。

客户将是 I-phone。

如何在 JAVA 聊天服务器和 Objective C 之间进行通信？

我努力了

```
public class ChatServer {
        ServerSocket providerSocket;
        Socket connection = null;
        ObjectOutputStream out;
        ObjectInputStream in;
        String message;

        ChatServer() throws IOException {

        }

        void run() {
            try {
                // 1\. creating a server socket
                providerSocket = new ServerSocket(2001, 10);
                // 2\. Wait for connection
                System.out.println("Waiting for connection");
                connection = providerSocket.accept();
                System.out.println("Connection received from "
                        + connection.getInetAddress().getHostName());
                // 3\. get Input and Output streams
                out = new ObjectOutputStream(connection.getOutputStream());
                out.flush();
                // in = new ObjectInputStream(connection.getInputStream());
                sendMessage("Connection successful");
                BufferedReader in1 = new BufferedReader(new InputStreamReader(
                        connection.getInputStream()));

                // out = new PrintWriter(socket.getOutputStream(),true);
                int ch;
    //          String line="";
    //          do{
    //              ch=in1.read();
    //              line+=(char)ch;
    //              
    //          }while(ch!=-1);
                String line = in1.readLine();

                System.out.println("you input is :" + line);
                // 4\. The two parts communicate via the input and output streams
                /*
                 * do { try { message = (String) in.readObject();
                 * System.out.println("client>" + message); if
                 * (message.equals("bye")) sendMessage("bye"); } catch
                 * (ClassNotFoundException classnot) {
                 * System.err.println("Data received in unknown format"); } } while
                 * (!message.equals("bye"));
                 */
            } catch (IOException ioException) {
                ioException.printStackTrace();
            } finally {
                // 4: Closing connection
                try {
                    // in.close();
                    out.close();
                    providerSocket.close();
                } catch (IOException ioException) {
                    ioException.printStackTrace();
                }
            }
        }

        void sendMessage(String msg) {
            try {
                out.writeObject(msg);
                out.flush();
                System.out.println("server>" + msg);
            } catch (IOException ioException) {
                ioException.printStackTrace();
            }
        }

        /**
         * @param args
         * @throws IOException
         */
        public static void main(String[] args) throws IOException {
            // TODO Auto-generated method stub
            ChatServer server = new ChatServer();
            while (true) {
                server.run();
            }
        }

    } 
```

在目标 C 中我使用了

```
LXSocket *socket;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    socket = [[LXSocket alloc]init];

    if ([socket connect:@"127.0.0.1" port:2001]) {
        NSLog(@"socket has been created");
    }
    else {
        NSLog(@"socket couldn't be created created");
    }

    @try {
        [self sendData];

    }@catch (NSException * e) {
        NSLog(@"Unable to send data");
    }

    [super viewDidLoad];
}
-(IBAction)sendData{
  //  [socket sendString:@"M\n"];
    [socket sendObject:@"Masfds\n"];
} 
```

我能够交流，但我得到了一些不必要的位，这些位附加了从目标 c 发送的消息。

服务器端的输出：从连接 1 接收。收到 U$nullÒ

建议我一些很好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:51:16.003

我已经用这段代码解决了这个问题：

```
 //Server

        package com.pkg;

        import java.io.BufferedReader;
        import java.io.IOException;
        import java.io.InputStream;
        import java.io.InputStreamReader;
        import java.io.PrintStream;
        import java.io.Reader;
        import java.io.UnsupportedEncodingException;
        import java.net.ServerSocket;
        import java.net.Socket;

        public class ChatServer {

            public static void main(String args[]) {
                int port = 6789;
                ChatServer server = new ChatServer(port);
                server.startServer();
            }

            // declare a server socket and a client socket for the server;
            // declare the number of connections

            ServerSocket echoServer = null;
            Socket clientSocket = null;
            int numConnections = 0;
            int port;

            public ChatServer(int port) {
                this.port = port;
            }

            public void stopServer() {
                System.out.println("Server cleaning up.");
                System.exit(0);
            }

            public void startServer() {
                // Try to open a server socket on the given port
                // Note that we can't choose a port less than 1024 if we are not
                // privileged users (root)

                try {
                    echoServer = new ServerSocket(port);
                } catch (IOException e) {
                    System.out.println(e);
                }

                System.out.println("Server is started and is waiting for connections.");
                System.out
                        .println("With multi-threading, multiple connections are allowed.");
                System.out.println("Any client can send -1 to stop the server.");

                // Whenever a connection is received, start a new thread to process the
                // connection
                // and wait for the next connection.

                while (true) {
                    try {
                        clientSocket = echoServer.accept();
                        numConnections++;
                        Server2Connection oneconnection = new Server2Connection(
                                clientSocket, numConnections, this);
                        new Thread(oneconnection).start();
                    } catch (IOException e) {
                        System.out.println(e);
                    }
                }
            }
        }

        class Server2Connection implements Runnable {
            BufferedReader is;
            PrintStream os;
            Socket clientSocket;
            int id;
            ChatServer server;
            InputStream isr;
            private static final int BUFFER_SIZE = 512; // multiples of this are
                                                        // sensible

            public Server2Connection(Socket clientSocket, int id, ChatServer server) {
                this.clientSocket = clientSocket;
                this.id = id;
                this.server = server;
                System.out.println("Connection " + id + " established with: "
                        + clientSocket);
                try {
                    isr = clientSocket.getInputStream();
                    is = new BufferedReader(new InputStreamReader(
                            clientSocket.getInputStream()));
                    os = new PrintStream(clientSocket.getOutputStream());
                } catch (IOException e) {
                    System.out.println(e);
                }
            }

            public void run() {
                String line;
                try {
                    boolean serverStop = false;

                    while (true) {
                        line = is.readLine();
                        if (line != null) {
                            System.out.println("Received " + line + " from Connection "
                                    + id + ".");
                            os.println("Hello this is server:" + line);
                            if (line.equalsIgnoreCase("stop")) {
                                serverStop = true;
                                break;

                            }

                        } else {
                            break;
                        }

                        // int n = Integer.parseInt(line);
                        // if (n == -1) {
                        // serverStop = true;
                        // break;
                        // }
                        // if (n == 0)
                        // break;
                        // os.println("" + n * n);

                    }

                    System.out.println("Connection " + id + " closed.");
                    is.close();
                    os.close();
                    clientSocket.close();

                    if (serverStop)
                        server.stopServer();
                } catch (IOException e) {
                    System.out.println(e);
                }
            }

        }

    //client

    package com.pkg;

    import java.io.*;
    import java.net.*;

    public class Requester {
        public static void main(String[] args) {

        String hostname = "localhost";
        int port = 6789;

        // declaration section:
        // clientSocket: our client socket
        // os: output stream
        // is: input stream

            Socket clientSocket = null;  
            DataOutputStream os = null;
            BufferedReader is = null;

        // Initialization section:
        // Try to open a socket on the given port
        // Try to open input and output streams

            try {
                clientSocket = new Socket(hostname, port);
                os = new DataOutputStream(clientSocket.getOutputStream());
                is = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
            } catch (UnknownHostException e) {
                System.err.println("Don't know about host: " + hostname);
            } catch (IOException e) {
                System.err.println("Couldn't get I/O for the connection to: " + hostname);
            }

        // If everything has been initialized then we want to write some data
        // to the socket we have opened a connection to on the given port

        if (clientSocket == null || os == null || is == null) {
            System.err.println( "Something is wrong. One variable is null." );
            return;
        }

        try {
            while ( true ) {
            System.out.print( "Enter an integer (0 to stop connection, -1 to stop server): " );
            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
            String keyboardInput = br.readLine();
            os.writeBytes( keyboardInput + "\n" );

    //      int n = Integer.parseInt( keyboardInput );
    //      if ( n == 0 || n == -1 ) {
    //          break;
    //      }
            if(keyboardInput.equalsIgnoreCase("stop")){
                break;
            }
            String responseLine = is.readLine();
            System.out.println("Server returns its square as: " + responseLine);
            }

            // clean up:
            // close the output stream
            // close the input stream
            // close the socket

            os.close();
            is.close();
            clientSocket.close();   
        } catch (UnknownHostException e) {
            System.err.println("Trying to connect to unknown host: " + e);
        } catch (IOException e) {
            System.err.println("IOException:  " + e);
        }
        }           
    }

//objective c client
//
//  RKViewController.m
//  ConnectServer
//
//  Created by Yogita Kakadiya on 10/27/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "RKViewController.h"

@interface RKViewController ()

@end

@implementation RKViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

    NSError *err = nil;
    if ([socket connectToHost:@"192.168.2.3" onPort:6789 error:&err])
    {
        NSLog(@"Connection performed!");
        [socket readDataWithTimeout:-1 tag:0]; 
    }
    else
    {
        NSLog(@"Unable to connect: %@", err);
    }

}

- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port
{
    NSLog(@"Socket:DidConnectToHost: %@ Port: %hu", host, port);

    connected = YES;

    if(connected)
    {
      NSData *message = [[NSData alloc] initWithBytes:"Ranjit\n" length:8];
      [sock writeData:message withTimeout:-1 tag:0];
    }
}

- (void)socketDidDisconnect:(GCDAsyncSocket *)sock withError:(NSError *)err
{
    NSLog(@"SocketDidDisconnect:WithError: %@", err);   
    connected = NO;
    //We will try to reconnect
    //[self checkConnection];
}

- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{
    //[self processReceivedData:data];

    NSString *readMessage = [[NSString alloc]initWithData:data encoding:NSASCIIStringEncoding];
    NSLog(@"RECIEVED TEXT : %@",readMessage);

    [sock readDataWithTimeout:-1 tag:0];
    //NSData *message = data;

}  

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

# android - Android 增强现实中的自动视频播放

> ID：12968459
> 
> 赞同：1
> 
> 时间：2012-10-19T06:21:35.030
> 
> 标签：android, augmented-reality

我想在设备检测到标记时自动播放视频。我怎样才能实现这个功能？我正在使用 Vuforia SDK 和 VideoPlayBack 教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:37:51.140

是的，我已经完成了，它工作得很好，并根据我的情况改变了事情

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T10:36:15.583

在**VideoPlayBack**示例中：如果您希望视频在开始跟踪后立即开始播放，并在跟踪丢失后立即暂停，您可以通过在方法 onDrawFrame 中***注释 VideoPlaybackRenderer.java 中的 for 循环并检查是否******isTracking ()***值自上一帧以来发生了变化。. **请注意**，您需要注意不要触发全屏自动播放，因为这会给您的用户带来不便。

# sql - ora-01861 文字与格式字符串不匹配

> ID：12968460
> 
> 赞同：0
> 
> 时间：2012-10-19T06:21:38.327
> 
> 标签：sql, database, oracle, join, oracle10g

```
select contract.contract_id
from swcd.scd_contract contract 

left join SCD.COMPANY_TIMELINE_VIEW customer on (customer.company_id=contract.customer_company_id and to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') >= (CASE WHEN customer.EVENT_START_DATE is null THEN to_date('01-JAN-1901', 'DD-Mon-YYYY') else 
trunc(customer.EVENT_START_DATE) END) AND to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') <= (CASE WHEN customer.EVENT_END_DATE is null THEN to_date('01-JAN-2101', 'DD-Mon-YYYY') else 
trunc(customer.EVENT_END_DATE) END)) 

left join SCD.COMPANY_TIMELINE_VIEW vendor on (vendor.company_id=contract.vendor_company_id and to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') >= (CASE WHEN vendor.EVENT_START_DATE is null THEN to_date('01-JAN-1901', 'DD-Mon-YYYY') else
trunc(vendor.EVENT_START_DATE) END) AND to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') <= (CASE WHEN vendor.EVENT_END_DATE is null THEN to_date('01-JAN-2101', 'DD-Mon-YYYY') else 
trunc(vendor.EVENT_END_DATE) END)); 
```

这是我在 Oracle 10g 上执行的查询。这对我来说是一种奇怪的行为。当我使用任何一个联接执行`select`查询时，它都可以正常工作，但是对于所需的联接，它都说`ora-01861 literal does not match format string`.

```
-- Works fine
select contract.contract_id
from swcd.scd_contract contract 

left join SCD.COMPANY_TIMELINE_VIEW customer on (customer.company_id=contract.customer_company_id and to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') >= (CASE WHEN customer.EVENT_START_DATE is null THEN to_date('01-JAN-1901', 'DD-Mon-YYYY') else 
trunc(customer.EVENT_START_DATE) END) AND to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') <= (CASE WHEN customer.EVENT_END_DATE is null THEN to_date('01-JAN-2101', 'DD-Mon-YYYY') else 
trunc(customer.EVENT_END_DATE) END));

-- Works fine
select contract.contract_id
from swcd.scd_contract contract 
left join SCD.COMPANY_TIMELINE_VIEW vendor on (vendor.company_id=contract.vendor_company_id and to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') >= (CASE WHEN vendor.EVENT_START_DATE is null THEN to_date('01-JAN-1901', 'DD-Mon-YYYY') else
trunc(vendor.EVENT_START_DATE) END) AND to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '1-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '1-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '1-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '1-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') <= (CASE WHEN vendor.EVENT_END_DATE is null THEN to_date('01-JAN-2101', 'DD-Mon-YYYY') else 
trunc(vendor.EVENT_END_DATE) END)); 
```

请帮助我，任何答案将不胜感激。

```
Error report:
SQL Error: ORA-01861: literal does not match format string
01861\. 00000 -  "literal does not match format string"
*Cause:    Literals in the input must be the same length as literals in
           the format string (with the exception of leading whitespace).  If the
           "FX" modifier has been toggled on, the literal must match exactly,
           with no extra whitespace.
*Action:   Correct the format string to match the literal. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:33:33.093

这似乎是数据库中的一个错误。无论如何，尝试将 '1-JUL-' 替换为 '01-JUL-' 等等。您的选择在 ELSE 子句中使用隐式格式转换 to_char(contract.ANNOUNCEMENT_DATE)，这也可能是一个问题。

我会重写选择以尽可能避免转换，就像这样

```
select contract.contract_id
from 
  (select contract_id, customer_company_id, vendor_company_id,
          nvl(ANNOUNCEMENT_DATE, 
              add_months(trunc(to_date(ANNOUNCEMENT_YEAR,'yyyy'),'yyyy'),
                 case when contract.ANNOUNCEMENT_QUARTER='Q1' then 0
                      when contract.ANNOUNCEMENT_QUARTER='Q1' then 3
                      when contract.ANNOUNCEMENT_QUARTER='Q1' then 6
                      when contract.ANNOUNCEMENT_QUARTER='Q1' then 9
                 end)) quarter_start
     from swcd.scd_contract) contract
left join SCD.COMPANY_TIMELINE_VIEW customer on
  (customer.company_id=contract.customer_company_id and
   contract.quarter_start between  nvl(trunc(customer.EVENT_START_DATE), to_date('01-JAN-1901', 'DD-Mon-YYYY')) AND
                                   nvl(trunc(customer.EVENT_END_DATE, to_date('01-JAN-2101', 'DD-Mon-YYYY')))) 
left join SCD.COMPANY_TIMELINE_VIEW vendor on
  (vendor.company_id=contract.vendor_company_id and
   contract.quarter_start between  nvl(trunc(vendor.EVENT_START_DATE), to_date('01-JAN-1901', 'DD-Mon-YYYY')) AND
                                   nvl(trunc(vendor.EVENT_END_DATE, to_date('01-JAN-2101', 'DD-Mon-YYYY')))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:54:08.327

```
select contract.contract_id
from swcd.scd_contract contract 

left join SCD.COMPANY_TIMELINE_VIEW customer on (customer.company_id=contract.customer_company_id and to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '01-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '01-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '01-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '01-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') >= (CASE WHEN customer.EVENT_START_DATE is null THEN to_date('01-JAN-1901', 'DD-Mon-YYYY') else 
trunc(customer.EVENT_START_DATE) END) AND to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '01-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '01-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '01-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '01-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') <= (CASE WHEN customer.EVENT_END_DATE is null THEN to_date('01-JAN-2101', 'DD-Mon-YYYY') else 
trunc(customer.EVENT_END_DATE) END) 
and contract.customer_company_id is not null)

left join SCD.COMPANY_TIMELINE_VIEW vendor on (vendor.company_id=contract.vendor_company_id and to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '01-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '01-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '01-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '01-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') >= (CASE WHEN vendor.EVENT_START_DATE is null THEN to_date('01-JAN-1901', 'DD-Mon-YYYY') else
trunc(vendor.EVENT_START_DATE) END) AND to_char(to_date(case when contract.ANNOUNCEMENT_DATE is null then case when contract.ANNOUNCEMENT_QUARTER='Q1' then '01-JAN-' when contract.ANNOUNCEMENT_QUARTER='Q2' then '01-APR-'
when contract.ANNOUNCEMENT_QUARTER='Q3' then '01-JUL-' when contract.ANNOUNCEMENT_QUARTER='Q4' then '01-OCT-' end || contract.ANNOUNCEMENT_YEAR else to_char(contract.ANNOUNCEMENT_DATE) end),'dd-MON-YYYY') <= (CASE WHEN vendor.EVENT_END_DATE is null THEN to_date('01-JAN-2101', 'DD-Mon-YYYY') else 
trunc(vendor.EVENT_END_DATE) END) 
and contract.vendor_company_id is not null); 
```

工作正常，`id`连接子句中的列面临`null`比较问题。因此添加`is not null`了`join`子句，现在运行良好。

# rest - 用于更新资源和创建关联对象的 RESTful 方法

> ID：12968466
> 
> 赞同：0
> 
> 时间：2012-10-19T06:22:31.283
> 
> 标签：rest, restful-architecture, idempotent

我正在为提供临床数据分析的服务设计一个 REST 风格的 API。API 允许用户创建患者资源。此资源为服务器端分析提供输入数据。

创建 Patient 既不安全也不幂等（服务器分配 ID），因此使用 POST， `POST Patients`

患者资源可能很大，因此它具有可以更新的子资源，例如药物。更新 Medications 是幂等的，因为整个 med 集都将被替换，因此使用 PUT。

临床分析由请求触发 `POST /Patients/{patientId}/analysisResults`。或者，用户可以请求在 POST /Patients 请求的响应中返回分析结果；这节省了额外的 HTTP 往返。

我的问题是这个；用户希望将分析结果包含在对更新 (PUT) 的响应中`Patient/Medications`- 这是可以理解的，因为他们不想再次请求检索结果。因此`PUT Patient/Medications`，对于 Patient 资源而言将是幂等的，但对于所有资源而言不是幂等的，因为将创建新的 analysisResults 子资源。我是不是该：

*   a) 使用 PUT 启用此功能。
*   b) 使用 POST 启用此功能。
*   c) 坚持需要单独调用来创建新的 analysisResults，即使这会增加最终用户的整体响应时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:34:56.640

如果您希望保持 RESTful，请选择 C。

选项 A 和 B 很可能会削弱 REST 旨在为您提供的属性，缓存是直接想到的。

如果这是基于 HTML 的，则响应将包含一个指向 analysisReport 资源的链接，以允许用户将应用程序驱动到有用的地方。

# asp.net - TabContainer 在 Firefox 下不可见

> ID：12968469
> 
> 赞同：0
> 
> 时间：2012-10-19T06:22:42.267
> 
> 标签：asp.net, firefox, updatepanel, ajaxcontroltoolkit, tabcontainer

我在我的 aspx 页面中使用 Ajax 选项卡控件。在 IE 和 Chrome 上运行良好。但是它在 Firefox 下不起作用。

它`visibility`是`hidden`。`visibility`我尝试了`visible`从 CSS 类中设置的各种选项，`ActiveTabIndex`从后面的代码中设置值。仍然无法正常工作。

我正在使用`ToolkitScriptManager`而不是`ScriptManager`.

请提出任何解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:55:46.337

尝试使用 firebug 进行跟踪...某些样式可能会隐藏您的选项卡..可能是从另一个控件继承的

# sql - 如何在 sql azure 中创建备份数据库，使用作为选项的副本并同时设置具有最大大小的版本

> ID：12968470
> 
> 赞同：-1
> 
> 时间：2012-10-19T06:22:41.630
> 
> 标签：sql, tsql, azure-sql-database

我一直在使用下面的代码：

```
CREATE DATABASE [NSFKIPRODDB01_BKBK] AS COPY OF [NSFKIPRODDB01] (EDITION='BUSINESS', MAXSIZE = 10GB) 
```

但它不断向我抛出以下错误：

```
Msg 102, Level 15, State 1, Line 1
Incorrect syntax near 'AS'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:42:43.050

请问为什么 CREATE DATABASE AS COPY OF + ALTER DATABASE 不够好？

# android - 如何以编程方式创建整数密码 EditText

> ID：12968471
> 
> 赞同：3
> 
> 时间：2012-10-19T06:22:48.207
> 
> 标签：android, android-edittext, textview

我需要以`EditText`编程方式创建字段。但它必须是一个`inputType`，`int`也必须是一个领域。`password`我怎样才能做到这一点？我尝试了这些但没有工作。

*   `editText.setInputType(InputType.TYPE_CLASS_NUMBER|InputType.TYPE_TEXT_VARIATION_PASSWORD);`
*   `editText.setKeyListener(DigitsKeyListener.getInstance("0123456789"));`
*   `editText.setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD);`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T06:38:08.460

试试这个：

```
editText.setInputType(InputType.TYPE_CLASS_NUMBER);
editText.setTransformationMethod(PasswordTransformationMethod.getInstance()); 
```

# java - 如何在java中解决UTF-8

> ID：12968472
> 
> 赞同：2
> 
> 时间：2012-10-19T06:22:51.677
> 
> 标签：java, jsp, tomcat, utf-8, character-encoding

我目前使用

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

在我的jsp页面中。

当我使用`request.getParameter("...");`它从文本框中获取数据时，它会检索这样的数据`Ã¶É?É?É?Ã¶Ä°`。当我使用不是英文字符的字符时，我看到了这个问题。我`URIEncoding="UTF-8"`在`server.xml`tomcat中添加。但它检索到相同的`(Ã¶É?É?É?Ã¶Ä°)`. 如何解决？

谢谢

**编辑**

感谢您的回答。我尝试了几件事，但没有解决问题。

这是我所做的：

*   我`<Connector URIEncoding="UTF-8" .../>`在 server.xml 中添加。

*   `<meta ... charset=utf-8>`标签没问题，我试过了`request.setCharacterEncoding("UTF-8");`

*   我还尝试`<filter>`了 web.xml 中的标记

这些操作都不能解决问题。我想知道这是否还有其他问题...（记住：我使用了`<form method='post'>`。我单击提交按钮，当我使用`request.getParameter("..")`此数据的格式获取数据时，格式不正确。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:52:02.443

应在应用程序的所有层设置 UTF 8。

执行以下操作

1) HTML 代码

```
 <meta contentType="text/html; charset="UTF-8"/> 
```

2) IE 视图的浏览器设置 -- 编码 -- Unicode (UTF-8)

3) Tomcat Server server.xml - 在连接器标签中添加“URIEncoding”属性为

```
<Connector port="8080" protocol="HTTP/1.1" 
           connectionTimeout="20000" 
           redirectPort="8443" URIEncoding="UTF-8"/> 
```

catalina.sh/catalina.bat - 添加以下内容

```
set JAVA_OPTS=--Xms256m -Xmx1024m -Xss268k -server -XX:MaxPermSize=256m -XX:-UseGCOverheadLimit -Djava.awt.headless=true -Djavax.servlet.request.encoding=UTF-8 -Dfile.encoding=UTF-8

set CATALINA_OPTS=-Dfile.encoding="UTF-8" 
```

4) MIME 类型的响应应该是“application/x-www-form-urlencoded”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T06:54:36.600

可能是因为实际的字符编码不是 UTF-8 ？如果字符本身以其他格式编码，那么我们就不能将它们标记为 UTF-8。

尝试通过给出各种字符集来解码它们，看看哪一个给出了正确的结果。我认为输入字符编码是 latin1(ISO-8859-1)。如果是，请按照以下代码

```
String param1 = request.getParameter("...");
if(param1!=null)
{
  param1 = new String(param1.getBytes("ISO-8859-1"));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T06:25:14.027

您可以在 Servlet 中尝试此代码

```
if(request.getCharacterEncoding() == null) {
    request.setCharacterEncoding("UTF-8");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T06:55:35.607

还有一个地方可以查。您是否在 JSP 文件中包含以下声明？

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

我认为问题在于浏览器仍然使用默认[的 ISO-8859-1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html)发送请求，如果未声明，这是标准字符集。

您还可以检查从服务器接收到的 HTTP 标头，以确保发回正确的字符集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T07:10:47.363

本质上，最简洁的方法是在您的属性文件和/或代码中使用[Unicode](http://docs.oracle.com/javase/tutorial/i18n/text/unicode.html)（如果需要）（不建议）。

这样你就可以避免所有的编码问题，因为你的程序只处理 ASCII 码，正确的表示然后由客户端完全处理，你不必担心标准的操作系统编码或环境编码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-03T07:38:54.380

**你应该试试看**

```
String content= request.getParameter("content");
if(content!=null)
  content = new String(content.getBytes("ISO-8859-1")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-02T06:22:19.913

您还可以尝试在 web.xml 中添加以下过滤器：

```
<filter>
 <filter-name>Character Encoding Filter</filter-name>
 <filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
  <init-param>
   <param-name>encoding</param-name>
   <param-value>UTF-8</param-value>
  </init-param>
</filter> 
```

希望这有帮助

# windows - Windows 关机脚本：意外行为

> ID：12968477
> 
> 赞同：0
> 
> 时间：2012-10-19T06:23:18.620
> 
> 标签：windows, batch-file, shutdown

我写了一个小脚本，它会提示我输入，将输入保存到文本文件中，然后关闭 PC。这是代码的样子：

```
@ECHO OFF

set /p input=Insert text:
echo %DATE%: %input% >> text.txt

echo The system will shutdown...
shutdown -s -f -t 3 
```

当我执行批处理时，它会提示我并正确保存输入，但在显示后 `The system will shutdown...`它并没有关闭，而是重新开始提示我输入。

有谁知道是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:09:45.620

请问您的批处理文件的名称？如果它被命名为shutdown.bat，它可能会再次被调用而不是执行shutdown 命令。如果愿意，请尝试重命名批处理文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:47:09.460

我能看到的唯一可能是错误的事情是您使用`-`'s 作为`shutdown`开关，这在（我认为）XP 中是正确的，但在 Win7（不确定 Vista）`shutdown /?`中说使用`/`'s。

```
shutdown /s /f /t 3 
```

# algorithm - 如何检测三角形网格中的孔？

> ID：12968478
> 
> 赞同：3
> 
> 时间：2012-10-19T06:23:18.320
> 
> 标签：algorithm, geometry

实际上，我可以通过检查三角形的哪个边缘没有任何邻居来检测凸三角形网格的边界或边缘。因此，如果网格有一些孔，那么我们可以轻松突出显示该部分，因为我们有边顶点。

但问题是，如果我们只有边顶点或边界，我们怎么知道网格有一些洞？网格有多少个孔？

我对这个问题想了很多，但无法理解，有什么想法吗？孔检测的条件或检查应该是什么？

检测到一个洞后，我想填补它。但首先要检测它吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:39:11.247

假设网格已连接并且您可以突出显示所有边界。你剩下所有的洞+一个额外的边界，即网格本身的边界。您可以丢弃其中最大长度的边界并获得所有孔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T02:15:05.407

源自扫描仪（例如 Kinect）的三角形网格可能具有小碎片（孤立的补丁）以及小孔。我建议通常可以通过计算与边界上的顶点相邻的顶点数来检测孔。如果相邻顶点少于边界顶点，则不是洞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T10:55:20.930

我的答案只适用于封闭的网格，但它会处理凹凸孔的情况。

为了解释起见，让我们想象一个 2D 网格。

计算网格的边界框。在我们的示例中，边界框需要存储 X 和 Y 轴的最小值和最大值，以及每个值对应的顶点索引：

```
struct BoundingBox
{
  float minX,maxX,minY,maxY;
  int vminX,vmaxX,vminY,vmaxY;
} 
```

迭代网格中的每个顶点，在添加每个点时增大边界框。当顶点负责更改最小/最大值之一时，使用顶点网格索引存储或覆盖相应的 vmin/vmax 值。

例如

```
BoundingBox bounds;
bounds.minX = verts[0].X;
bounds.maxX = verts[0].X;
bounds.minY = verts[0].Y;
bounds.maxY = verts[0].Y;
bounds.vminX = bounds.vmaxX = bounds.vminY = bounds.vmaxY = 0;
for (int i = 1; i < numVerts; i++)
{
  Vertex v = verts[i];
  if (v.X < bounds.minX) { bounds.minX = v.X; bounds.vminX = i; }
  if (v.X > bounds.maxX) { bounds.maxX = v.X; bounds.vmaxX = i; }
  if (v.Y < bounds.minY) { bounds.minY = v.Y; bounds.vminY = i; }
  if (v.Y > bounds.maxY) { bounds.maxY = v.Y; bounds.vmaxY = i; }
} 
```

现在遍历您的边界，直到找到一个包含您在边界框中收集的所有顶点的边界。这是你的外边界。其余边界是网格内的孔。

# xcode - UIImageWriteToSavedPhotosAlbum 在 iOS 6 iPad 3 中不起作用

> ID：12968486
> 
> 赞同：13
> 
> 时间：2012-10-19T06:24:02.877
> 
> 标签：xcode, uiimage, ios6, photo, ipad-3

我正在使用下一个功能在我的应用中保存照片：

```
 UIImageWriteToSavedPhotosAlbum(pngImage, self, @selector(image:didFinishSavingWithError:contextInfo:), NULL); 
```

它适用于 iOS 5.1.1 设备和 iPod/iPhone iOS 6.0 设备。

但奇怪的是，照片保存在 iOS 6.0 的 iPad 3 上不起作用，并返回以下错误：

> 错误域=ALAssetsLibraryErrorDomain 代码=-3310 "数据不可用" UserInfo=0x1cd6afc0 {NSLocalizedRecoverySuggestion=启动照片应用程序，NSUnderlyingError=0x1cdaa140 "数据不可用"，NSLocalizedDescription=数据不可用}

有没有人遇到过这个问题，有什么方法可以解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T19:46:57.117

我能够保存到相机胶卷，但是当我升级到 iOS 6 时它停止工作。事实证明，我的应用程序需要（但没有，这是 iOS 6 中的新功能）访问相机胶卷的权限。要获得许可，请转到设置 -> 隐私 -> 照片。我可以再次使用 UIImageWriteToSavedPhotosAlbum() 保存到相机胶卷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:32:38.670

图像正在写入相机胶卷相册。在没有相机的 iOS 设备上使用时，此方法会将图像添加到“已保存的照片”相册而不是“相机胶卷”相册。( [UIKit 函数参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageWriteToSavedPhotosAlbum))

您的 iPad 上似乎没有“相机胶卷”或“已保存的照片”相簿，并且`UIImageWriteToSavedPhotosAlbum()`找不到匹配的相簿来保存照片。

启动错误恢复建议中提到的照片应用程序：`NSLocalizedRecoverySuggestion=Launch the Photos application`
然后尝试通过相机应用程序拍照。

# javascript - 在绑定事件之间传递参数

> ID：12968489
> 
> 赞同：1
> 
> 时间：2012-10-19T06:24:24.437
> 
> 标签：javascript, jquery

假设我有两个绑定事件 - 如下所示的单击和 hashchange（超级简化示例）：

```
$('a').bind('click', function(e) {
    location.hash = $(this).attr('id');
}

$(window).bind('hashchange', function(e) {
    console.log(e.target);
} 
```

如何将引发 click 事件的元素的 id 传递给绑定的 hashchange 事件？我见过像下面这样的例子，但不能让它工作：

```
$('a').bind('click', ['some-data'], function(e) {
    location.hash = $(this).attr('id');
}

$(window).bind('hashchange', function(e) {
    console.log(e.data[0]);
} 
```

任何建议都会很棒...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:29:30.177

无法从`hashchange`事件处理程序内部找到启动哈希更改的锚点，因为该事件是由`window`自身触发的。

在`hashchange`处理程序内部，您可以检查 的值`location.hash`，因为您之前使用`location.hash = $(this).attr('id')`.

```
$(window).bind('hashchange', function(e) {
    console.log(location.hash.substr(1)); // should be the id of your anchor
} 
```

# python - 使用 Python 而不是 C# 使用 RSAKey 对 URL 的部分进行签名

> ID：12968494
> 
> 赞同：1
> 
> 时间：2012-10-19T06:24:33.657
> 
> 标签：python, rsa, sha1, signing

我确实有一个由 .NET 类生成的私有 RSAKey（XML 格式）。这些密钥通常用于对 URL 的某些部分进行签名。我正在尝试通过 Python 使用现有密钥对这些 URL 进行签名，因为我现在正在基于 Linux 的环境中工作。RSAKey 的结构如下所示：

```
RSAKeyValue,Modulus,Exponent,P,Q,DP,InverseQ,D represented in XML format. 
```

使用 C#，我只需实例化一个 RSACryptoServiceProvider 对象并调用 SignData(bytes, new SHA1CryptoServiceProvider())，就完成了。我已经尝试了几天在 Linux 环境中使用 Python 复制这个过程，但没有任何运气。我提取模数和指数，base64 解码，并从中创建字节数组。我还更改了字节顺序。我假设我可以使用 M2Crypto 并调用 RSA.new_pub_key((e,n)) 并使用该密钥进行签名，但无论我做什么我都无法创建正确的密钥，或者签名过程没有不工作。

我的问题是：

- 是否可以使用通过 .NET 生成的 XML 格式的 RSAKey，并通过 Python（M2Crypto 或任何其他库都可以）对数据进行签名，结果与 .NET 中的结果完全相同？如果是这样，这样做的确切步骤是什么？

我为这个冗长的问题道歉。谢谢你的帮助。

# c# - 正则表达式不允许单词开头的空格

> ID：12968497
> 
> 赞同：-2
> 
> 时间：2012-10-19T06:24:51.147
> 
> 标签：c#, .net, regex

任何人都可以知道如何不让输入在第一个字符空间？尝试使用正则表达式在 .net 上执行此操作，但仍然找不到解决方案。示例（假设 _ 现在是空格）：

*   `_Word`- 坏的
*   `Word`- 好的
*   `Word word`- 好的
*   `_word word`- 坏的
*   `__word`- 坏的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T06:26:28.490

`^\s`匹配任何以空格开头的字符串。如果要使字符串无效。

如果要积极匹配有效字符串，可以查找以非空格开头的字符串：`^\S`

根据您要执行的操作，最好修剪字符串，这样您就可以简单地容忍输入中的这种小缺陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:48:20.860

另一种非正则表达式解决方案

```
bool startsWithNonSpaceCharacter = !yourString.StartsWith(" "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:27:45.100

像这样：`^[^\s]`将产生`true`任何不以空格字符开头的字符串。说明（以防万一）：

*   `^`: 匹配字符串的开头。

*   `[^\s]`: 任何不是空格的字符。`[\S]`是另一种写法`[^\s]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T06:28:27.133

所以你不想在字符串的开头有空格..

你可以这样做

```
^[^\s].* 
```

`\s`用于确定空间。

`[^\s]`表示匹配除空格以外的任何字符

`.*`表示匹配任何字符直到结束

**或者**

只需使用 StartsWith 方法

```
if(yourString.StartsWith(" ")==true)
{
//bad
}
else
{
//good
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T06:30:16.007

我认为您在这里不需要 regx 。

您可以按如下方式检查空白区域。

```
if(" Word - "[0] == ' ') 
```

# c++ - 比较函数下限

> ID：12968498
> 
> 赞同：5
> 
> 时间：2012-10-19T06:24:59.737
> 
> 标签：c++, stl

我有以下结构

```
 enum quality { good = 0, bad, uncertain };

    struct Value {
       int time;
       int value;
       quality qual;
    };

    class MyClass {

public:
    MyClass() {
        InsertValues();
    }

       void InsertValues();

       int GetLocationForTime(int time);

private:

    vector<Value> valueContainer;
};

void MyClass::InsertValues() {
    for(int num = 0; num < 5; num++) {
        Value temp;
        temp.time = num;
        temp.value = num+1;
        temp.qual = num % 2;
        valueContainer.push_back(temp);
    }
}

int MyClass::GetLocationForTime(int time)
{

   // How to use lower bound here.
   return 0;
} 
```

在上面的代码中，我遇到了很多编译错误。我想我在这里做错了我是 STL 编程的新手，你能纠正我错误在哪里吗？有更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T06:31:14.803

谓词需要带两个参数并返回布尔值。

由于您的函数是成员函数，因此它的签名错误。

此外，您可能需要能够使用函子将 Value 与 int、Value 与 Value、int 与 Value 以及 int 与 int 进行比较。

```
struct CompareValueAndTime
{
   bool operator()( const Value& v, int time ) const 
   {
       return v.time < time;
   }

   bool operator()( const Value& v1, const Value& v2 ) const 
   {
       return v1.time < v2.time;
   }

   bool operator()( int time1, int time2 ) const
   {
       return time1 < time2;
   }

   bool operator()( int time, const Value& v ) const
   {
      return time < v.time;
   }
}; 
```

这相当麻烦，所以让我们减少它：

```
struct CompareValueAndTime
{
   int asTime( const Value& v ) const // or static
   {
      return v.time;
   }

   int asTime( int t ) const // or static
   {
      return t;
   }

   template< typename T1, typename T2 >
   bool operator()( T1 const& t1, T2 const& t2 ) const
   {
       return asTime(t1) < asTime(t2);
   }
}; 
```

然后：

```
std::lower_bound(valueContainer.begin(), valueContainer.end(), time,
   CompareValueAndTime() ); 
```

还有一些其他错误，例如类声明末尾没有分号，以及类成员默认为私有的事实，这使得您的整个类在这种情况下是私有的。你错过了`public:`构造函数之前的a吗？

您的函数 GetLocationForTime 不返回值。您需要获取 lower_bound 的结果并从中减去 begin() 。该函数也应该是 const。

如果此调用的目的是在此处插入，则考虑在向量中间插入是 O(N) 操作这一事实，因此向量可能是此处错误的集合类型。

请注意，该`lower_bound`算法仅适用于预先排序的集合。如果您希望能够在不连续使用的情况下查找不同的成员，您将希望在这些字段上创建索引，可能使用 boost's`multi_index`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T06:29:59.083

一个错误是 lower_bound 的第四个参数（`compareValue`在您的代码中）不能是成员函数。它可以是函子或自由函数。在您的情况下，使其成为 MyClass 的朋友的免费功能似乎是最简单的。此外，您还缺少 return 关键字。

```
class MyClass {
    MyClass() { InsertValues(); }
    void InsertValues();
    int GetLocationForTime(int time);
    friend bool compareValue(const Value& lhs, const Value& rhs)
    {
        return lhs.time < rhs.time;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T06:31:23.890

1.  `Class`关键字必须从较低的`c`-开始`class`。
2.  `struct Value`有错误的类型`qualtiy`而不是`quality`
3.  没有它，我看不到`using namespace std`使用 STL 类型。
4.  `vector<value>`- 错误的类型`value`而不是`Value`
5.  等等。

你必须先检查一下，然后再在这里发布我认为这样简单的错误。这里的主要问题是比较函数不能是类的成员。将其用作免费功能：

```
bool compareValue(const Value lhs, const int time) { 
    return lhs.time < time ; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T06:27:52.157

`class`是关键字而不是“类”：

```
class MyClass { 
```

并且它的正文后面应该是分号`;`。
可能还有其他错误，但您可能必须将它们粘贴到问题中以获得进一步帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T06:30:18.207

你只想做`compareValue()`一个正常的功能。您现在实现它的方式，您需要一个类型的对象`MyClass`。方法`std::lower_bound()`会尝试调用它，它只会传入两个参数，没有额外的对象。如果你真的想让它成为一个成员的功能，你可以让它成为一个`static`成员。

也就是说，直接使用函数会降低性能。您可能希望使用带有`inline`函数调用运算符的比较器类型：

```
struct MyClassComparator {
    bool operator()(MyClass const& m0, MyClass const& m1) const {
        return m0.time < m1.time;
    }
}; 
```

...并`MyClassComparator()`用作比较器。

# sharepoint - 如何将站点列从列表填充到另一个列表？

> ID：12968499
> 
> 赞同：1
> 
> 时间：2012-10-19T06:25:07.120
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我已经定义了几个列表来捕获用户的注册详细信息。有一个用于保存用户个人详细信息的列表，还有另一个用于保存用户专业详细信息的列表。这两个列表用于两个不同的页面，其中 name 和 ID 都是必需的。如何将姓名和 ID 从个人列表中自动填充到专业列表中，以便用户不必两次填写类似信息？是否可以不做任何编码工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:14:50.627

在那里创建自定义表单，您保留了一些带有刷新按钮的文本框，因此当您填写用户 ID 并按下刷新按钮时。您需要正确的小逻辑将用户从源列表中。

或者您可以使用个人详细信息 id 作为道具列表中的查找列，这样您将获取 id 并选择 id 并进行刷新。无论如何，您的自定义表单代码中的逻辑是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:14:05.973

这个小控件可以帮助你

[http://cascddlistwithfilter.codeplex.com/](http://cascddlistwithfilter.codeplex.com/)

基本上，您会将第一个级联下拉控件链接到您的用户详细信息列表和字段名称。然后，第二个下拉列表将过滤用户 ID，以便用户可以选择它。

我以前用过这个，配置起来可能会很痛苦，但是当它在那里时，它非常强大和有用。

它不是完全自动化的，但我不确定您将如何与定制的事件接收器更接近。

# android - 将多个活动绑定到音频播放器的一项服务

> ID：12968500
> 
> 赞同：0
> 
> 时间：2012-10-19T06:25:10.300
> 
> 标签：android, binding, service, media-player

我有一个名为 AudioService 的服务，它扩展了 android 类服务。此外，我的应用程序中有 5 个活动。我如何才能将我的一项服务仅绑定到其中 3 项活动？

我感兴趣的是在用户查看这三个活动中的任何一个时运行服务的能力，但如果他们查看其他任何内容，则服务将关闭。

例如，如果用户单击一个按钮并进入这 3 个活动之一并启动服务。那时可以启动 Mediaplayer 对象。他们可以单击其他导航按钮或返回按钮，只要他们正在查看这 3 个活动之一，音乐就会不间断地播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:08:17.753

使用共享原子变量与服务通信状态。这将允许它停止/开始播放音乐。

1.  在服务上声明一个静态 AtomicBoolean 和一个可以设置/获取该布尔值的静态方法。这应该跟踪音乐是否已经在播放。如果设置为 true，则正在播放音乐。

2.  当用户单击将他们带到活动的按钮时，使用该活动的 onStart() 方法来检查此布尔值的值。如果它是假的，那么音乐就没有播放。将其设置为真。将其设置为 true 的方法也应该开始播放音乐。

3.  在其他 2 个活动的 onStart() 方法上，将 AtomicBoolean 的值设置为 false。服务上的方法现在应该将 AtomicBoolean 设置为 false 并释放媒体播放器。

后台服务本身可以继续运行。当您想重新开始播放音乐时，只需重建媒体播放器。

# android - 在 Android 中制作自定义 TabHost 和 TabWidget

> ID：12968501
> 
> 赞同：1
> 
> 时间：2012-10-19T06:25:11.160
> 
> 标签：android, android-tabhost

我想制作一个像该图像一样的 TabHost 。我可以使用我自己的图像作为 TabWidget 的背景。：![在此处输入图像描述](../Images/4d2d671a8a8bd5eb0b3c4e645bc85378.png)

并想要删除默认背景（在此图像中显示为红色箭头）。执行此操作的代码。`

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp">

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:layout_weight="1"/>

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"

        android:background="@drawable/navbar_glass"/>
</LinearLayout> 
```

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TabHost tabHost = getTabHost();
    //tabHost.getTabWidget().setStripEnabled(false);
    tabHost.getTabWidget().setFocusable(false);
    // Tab for Photos
    TabSpec photospec = tabHost.newTabSpec("Chats");
    photospec.setIndicator("Chats", getResources().getDrawable(R.drawable.chat_button));
    Intent photosIntent = new Intent(this, PhotosActivity.class);
    photospec.setContent(photosIntent);

    TabSpec photospec2 = tabHost.newTabSpec("Friends");
    photospec2.setIndicator("Friends", getResources().getDrawable(R.drawable.friend_button));
    Intent photosIntent2 = new Intent(this, PhotosActivity.class);
    photospec2.setContent(photosIntent2);

    // Tab for Songs
    TabSpec songspec = tabHost.newTabSpec("Library");
    // setting Title and Icon for the Tab
    songspec.setIndicator("Library", getResources().getDrawable(R.drawable.library_button));
    Intent songsIntent = new Intent(this, SongsActivity.class);
    songspec.setContent(songsIntent);

    // Tab for Videos
    TabSpec videospec = tabHost.newTabSpec("Settings");
    videospec.setIndicator("Settings", getResources().getDrawable(R.drawable.setting_button));
    Intent videosIntent = new Intent(this, VideosActivity.class);
    videospec.setContent(videosIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(photospec); // Adding photos tab
    tabHost.addTab(songspec); // Adding songs tab
    tabHost.addTab(videospec); // Adding videos tab
    tabHost.addTab(photospec2);
} 
```

`

# android - 无法在我的 Android 应用程序中接收短信

> ID：12968504
> 
> 赞同：1
> 
> 时间：2012-10-19T06:25:24.280
> 
> 标签：android, sms, broadcastreceiver

我正在尝试从我的 android 应用程序中的特定号码接收短信，并尝试在我的应用程序中显示消息内容。但我无法接收短信。

下面给出了我用来接收的课程。

```
public class SmsReceiver extends BroadcastReceiver {

StringBuilder sb;

@Override
public void onReceive(Context context, Intent intent) {
    if (intent.getAction()
            .equals("android.provider.Telephony.SMS_RECEIVED")) {

        Bundle extras = intent.getExtras();
        if (extras != null) {
            Object[] pdus = (Object[]) extras.get("pdus");

            if (pdus.length < 1)
                return; // Invalid SMS. Not sure that it's possible.

            sb = new StringBuilder();
            String sender = null;
            for (int i = 0; i < pdus.length; i++) {

                SmsMessage message = SmsMessage
                        .createFromPdu((byte[]) pdus[i]);
                if (sender == null)
                    sender = message.getOriginatingAddress();

                String text = message.getMessageBody();
                if (text != null)
                    sb.append(text);
            }
            if (sender != null && sender.equals("********")) {
                // Process our sms...

                Intent broadcastIntent = new Intent();
                broadcastIntent.setAction("SMS");

                broadcastIntent.putExtra("data", sb.toString());

                context.sendOrderedBroadcast(broadcastIntent, null);
                System.out.println("MESSAGE FROM SERVER -->"
                        + sb.toString());

                this.abortBroadcast();
            }
            return;
        }
    }
}

} 
```

收到短信后，我会检查发件人，如果是我正在寻找的发件人，那么我将发送另一个带有短信的广播。在那里我将显示内容。

看我的清单

```
<receiver android:name=".SmsReceiver" >
        <intent-filter android:priority="2147483647" >
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            <action android:name="SMS" />
        </intent-filter>
    </receiver> 
```

我无法找到解决方案，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:33:07.323

要检查的事情（根据我的经验）：

*   `android:priority="2147483647"`无效，最大值为`1000`。大于此的数字将被忽略
*   插入你`this.abortBroadcast();`的`for`循环（被称为`pdus.length`时间）
*   如果发送的短信符合您的标准，进行测试，将其保存在您的应用偏好中，并在您的主要活动中读取您偏好中的值，如果它有效，那么问题出在您的`broadcastIntent`.

# php - PHP 检查图像大小并显示错误

> ID：12968506
> 
> 赞同：0
> 
> 时间：2012-10-19T06:25:25.947
> 
> 标签：php

我正在按照本教程上传图像。我不知道，这是如何检查文件文件的，如果文件大小超过，它应该是一个错误。

这是链接[http://www.htmlgoodies.com/beyond/php/article.php/3877766/Web-Developer-How-To-Upload-Images-Using-PHP.htm](http://www.htmlgoodies.com/beyond/php/article.php/3877766/Web-Developer-How-To-Upload-Images-Using-PHP.htm)

有人可以解释一下，这段代码如何检查文件大小并验证它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T06:31:56.433

您提供的链接，它已被提及`$max_file_size = 30000;`。因此，如果您超过最大大小，则上传时会出错。如果您想忽略它，请对`//$max_file_size = 30000;`. 然后它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:20:29.403

在 upload.form.php 中，您指定：

```
$max_file_size = 30000; // size in bytes 
```

这将自动填充输入表单指令：

```
<input type="hidden" name="MAX_FILE_SIZE" value="<?php echo $max_file_size ?>"> 
```

服务器端检查在upload.processor.php

```
($_FILES[$fieldname]['error'] == 0) 
    or error($errors[$_FILES[$fieldname]['error']], $uploadForm); 
```

如果所选文件的大小超过 HTML 表单中的 MAX_FILE_SIZE 指令，则 $_FILES[$fieldname]['error'] 返回错误代码 2。
此检查会捕获 S_FILES 返回的任何类型的错误代码，这将调用函数'错误'。

可以在以下位置找到有关 $_FILES 错误消息的信息： [php 文件：错误消息解释](http://php.net/manual/en/features.file-upload.errors.php)

# ios - Mocean ad(158212768) - 服务器响应为空（无广告）错误？

> ID：12968508
> 
> 赞同：1
> 
> 时间：2012-10-19T06:25:33.030
> 
> 标签：ios, ads

我在我的 iOS 项目中使用**mocean 的插页式广告。**

我可以使用虚拟**site_id 和 zone_id 显示虚拟广告。**

但是当我用我自己的 id 替换虚拟 site_id 和 zone_id 时，它会出现以下错误 -

```
Ad  ad(158212768) - Server response with empty body (no ads) | error: Error Domain=Server response with empty body (no ads) Code=22 "The operation couldn’t be completed. (Server response with empty body (no ads) error 22.)" 
```

请帮我解决这个问题。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:35:35.603

您使用什么广告提供商？据我所知，有几家公司使用 mOcean SDK for iOS 来做广告（YOC Performance、Mojiva）。

可能，您需要设置`adServerUrl`新创建的`MASTAdView`类对象的属性。例如，对于 Mojiva，它必须是`@"http://ads.mojiva.com/ad"`. 对于 YOC Performance，它是`@"http://ads.mo.yoc-adserver.com/ad"`，但我不确定。

PS：此外，由于您希望在您的 ios 应用程序中聚合多个广告商（并希望管理为不同地区和国家/地区展示的广告，以及更多以增加您的应用程序收入），AdWhirl - [Epom SDK for iOS](http://epom.com/)

# web-services - 私人微博/类似推特的服务

> ID：12968516
> 
> 赞同：1
> 
> 时间：2012-10-19T06:26:04.307
> 
> 标签：web-services, api, cloud, social-networking, microblogging

是否有任何基于云的私有类似 Twitter 的服务？

我正在为需要实施此类服务的客户工作，但我们没有时间或预算从头开始创建服务。

我正在寻找带有 REST api 的东西，我可以在其中从主服务器创建一个帐户，设置一个帐户以关注另一个帐户，发布帐户更新，然后从帐户获取帖子提要（按日期排序）另一个帐户正在关注（如 facebook 墙或 twitter 提要）。如果它能够自动扩展到数十万用户，并且每天可能发布 50 000 条帖子，那就太好了。

我曾考虑过自己实现这一点，但似乎有一些棘手的领域是让一个账户跟随几千个其他账户，或者被成千上万个账户关注，并以帖子的形式实时生成提要进来。

我找到了一些服务，例如[http://www.ning.com/](http://www.ning.com/)和[http://www.socialengine.com/](http://www.socialengine.com/)但我不确定它们是否可以满足我的需求，而且它们似乎非常专注于有一个网站。这是针对移动应用程序的，因此不是必需的。

那里有一些开源项目，但它们都需要设置/维护托管（不是一个大问题），我不确定它们的可扩展性（客户端要求它扩展到至少 10 万用户）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T21:39:01.907

很抱歉回复晚了。我希望它对其他看到这个的人有用。

我和你有几乎完全相同的需求，在没有找到其他资源后最终创建了一个功能齐全的解决方案。该服务称为 Collabinate ( [http://www.collabinate.com](http://www.collabinate.com) )。它提供了一个 RESTful API，专注于简单性和易用性，目前完全由您决定 UI。它在后端使用图形数据库和算法，并且可以很好地适应您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T10:00:47.963

也许私人团队收件箱也可以适合您的解决方案...... [https://www.flowdock.com/](https://www.flowdock.com/)

这里没有以下功能，但如果这是公司内部需要...

您可以为部门和一般情况下创建聊天室......也许聊天室可以为您提供以下功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T00:42:40.900

看起来这里没有一个好的解决方案。

我发现[jaiku](http://code.google.com/p/jaikuengine/)看起来非常复杂，并且似乎无法在最新的应用程序引擎 sdk 上运行。

还有[散居](https://github.com/diaspora/diaspora)地可以修改并在您自己的服务器上运行以执行所需的操作。

最后，我决定自己在 Google App Engine 上实现这个。这似乎是做需要做的最好的方法。使用扇出模式似乎是最好的方法。[Fantasm](http://code.google.com/p/fantasm/)库似乎提供了一种易于使用的方法来做到这一点，所以我要尝试一下。

# javascript - 在 cookie 中存储信息，以及对其他域的 cookie 操作

> ID：12968518
> 
> 赞同：0
> 
> 时间：2012-10-19T06:26:15.900
> 
> 标签：javascript, html, authentication, cookies, session-cookies

我们有一个**面向公众的**网站，用户可以使用电子邮件地址登录。`cookies`用户登录后，我们使用唯一生成的域填充该域`session id`，以及用户详细信息，如 emailAddress、Name 等，基于这些信息对服务器进行其他调用，如 getUserProfile 等。

但是问题是，任何用户都可以更改他的 hosts 文件，并编写一个简单`Servlet`的来创建`cookies`我的域，并可以在其中设置任何随机`session id`和用户详细信息`cookies`，然后可以自动登录。

在**客户**端，我如何保持适当`session id`的正确性。如果我`session id`在一些缓存框架中维护后端的 s `memcache`，那么网站上的每次点击都会点击服务器，这不是我想要的。

`cookies`解决此问题并确保欺诈用户在对其主机文件进行更改后无法设置我的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:29:57.737

> 在客户端，我如何保持适当的会话 ID 是正确的。

你不能。浏览器由用户控制。你控制服务器。您只能在服务器上执行身份验证。

# javascript - 如何扩展nodejs模块

> ID：12968520
> 
> 赞同：2
> 
> 时间：2012-10-19T06:26:22.500
> 
> 标签：javascript, node.js, module

我想扩展`nodeJs`模块。

例如，我想在[Utilities](http://nodejs.org/api/util.html)模块中添加一个功能。

比如检测空的**JSON**对象

```
function isEmptyObject(obj) {
  return !Object.keys(obj).length;
} 
```

所以，我可以用它`util.isEmptyObject()`来检测空的**JSON**对象。

这是扩展`nodeJs`模块的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:34:02.840

您可以通过定义“UtilEx”模块来扩展“utils”：

```
/* utils_ex.js */
var utils = require('utils');
utils.isEmptyObject = function() {  };

exports = module.exports = utils;
/* end of utils_ex.js" */

/// client js
var utils = require('utils_ex'); 
```

# java - 如何在 SWT.. 中显示文件夹列表？

> ID：12968524
> 
> 赞同：-1
> 
> 时间：2012-10-19T06:26:29.397
> 
> 标签：java, swt, wizard

![在此处输入图像描述](../Images/f1ebecc8b82f6b56faa07327c250dbf1.png)

大家好，我正在 swt 中开发一个应用程序，其中我有条件，如上图所示。

我想在左框中显示可用文件夹列表，用户可以从中选择它到右框中，同样可以从右框中删除它。

但是有什么方法可以在框中显示我的计算机的整个文件夹结构..

如果是，那么我该如何实现这一目标。？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:38:00.160

您可以使用 FileDialog 但在您的情况下它不会适用。因此，您需要使用 File 类的 listdir() 方法并动态列出文件。

# screen-resolution - 滚动条不适用于 VS2010 内置的 MFC 应用程序

> ID：12968525
> 
> 赞同：2
> 
> 时间：2012-10-19T06:26:31.983
> 
> 标签：screen-resolution

我们的一位客户面临屏幕分辨率问题，我们用他的其他笔记本电脑进行了测试，然后工作正常。但我们不知道为什么它不能在他的笔记本电脑上工作。请在下面找到有关此问题的详细信息。

实际截图 ![实际画面](../Images/9235ebe4501230d29040af362393cdbf.png "实际屏幕截图")

预期截图 ![预期画面](../Images/3cadb67dca31f4959f972f1211ee3737.png "预期的屏幕截图")

在这里，我认为垂直滚动条没有问题。即使滚动条支持到最后，我也对为什么应用程序会缩小感到惊讶。我们从我们的一位最终用户（Win 7）那里收到了这个问题，并且我们已经在我们所有的机器（Win 7）上进行了测试，但它根本无法重现。我们需要以下问题的答案。

•在什么情况下可能会出现此问题？•如何在我们的机器上重现同样的问题？（Win 7） •我们怀疑，最终用户端可能不支持某些系统配置。如果是，请告诉那些配置是什么？（例如：屏幕分辨率） •我们还怀疑，显示驱动程序。让我知道，在这个问题上，我们需要与那个人最终确定哪些可能性以及哪些事情？

# android - 图形布局和模拟器范围

> ID：12968528
> 
> 赞同：0
> 
> 时间：2012-10-19T06:26:45.010
> 
> 标签：android

我的图形布局视图和正在运行的模拟器视图是不同的。我做了一个横向布局，它在运行模拟器中显示的不同于图形布局的视图。我能做些什么来匹配它们（至少 95%）。看看我的图形布局视图中的按钮位置和模拟器中的视图。怎么会如此不同。白色背景应该是图形布局中我的设备的边界。![在此处输入图像描述](../Images/73e2cd5ec8142f97d5151ae0f3a57636.png)

这就是我在横向模式下运行模拟器时得到的，看到按钮不见了- ![在此处输入图像描述](../Images/5184a3b1484012d0adb534a2340e3279.png)

这是我的模拟器设置-

![在此处输入图像描述](../Images/b2a0d198521bf67da02297c0470dbb05.png)

这是我用于横向布局的 xml 代码-

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableLayout
        android:id="@+id/tableLayout1"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:orientation="horizontal" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingTop="0dp" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:paddingRight="80dp"
                android:text="Age"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText1"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:inputType="number" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingTop="0dp" >

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingRight="10dp"
                android:text="Height"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:inputType="numberDecimal" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingTop="0dp" >

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Weight"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <EditText
                android:id="@+id/editText3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:inputType="numberDecimal" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingTop="0dp" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingRight="10dp"
                android:text="Sex"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="15sp" />

            <Spinner
                android:id="@+id/spinner1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:entries="@array/sex" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingTop="0dp" >

            <RadioGroup
                android:id="@+id/radioGroup1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal" >

                <RadioButton
                    android:id="@+id/radio0"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:checked="true"
                    android:text="Metric" />

                <RadioButton
                    android:id="@+id/radio1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Imperial" />
            </RadioGroup>

        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingTop="0dp" >

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_vertical|center_horizontal"
                android:text="OK" />

        </TableRow>
    </TableLayout>

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="BMR Calculator"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="15sp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:38:28.623

您的模拟器和图形布局不会以相同的方式向您显示。这两件事之间总是存在很大差异。因此您应该始终使用真实设备进行检查。您可以使用以下命令强制您的活动在横向或纵向模式下可见。

```
<activity android:name=".YourActivity" android:screenOrientation="landscape"></activity> 
```

尝试使用`ScrollView`您的布局，以便您的按钮在横向模式下可见。

# c# - 字符串到C#中的日期时间？

> ID：12968530
> 
> 赞同：3
> 
> 时间：2012-10-19T06:26:52.983
> 
> 标签：c#, string-to-datetime

如何将以下日期字符串转换为 dateTime：

```
Fri, 18 Dec 2009 9:38 am PST 
```

我试过了`DateTime.Parse(string)`

我收到以下错误：

```
The string was not recognized as a valid DateTime. There is an unknown word starting at index 25\. System.SystemException {System.FormatException} 
```

**更新**

我试图从雅虎获得天气，我试图得到这样的日期：

```
Date = DateTime.Parse(feed.Element(yWeatherNS + "condition").Attribute("date").Value), 
```

我调试了它。date 属性是正确的（如上）。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T06:36:06.847

我*认为*BCL 中没有任何内容可以解析时区缩写。（无论如何，应尽可能避免使用它们，因为它们可能会模棱两可。）

如果您不介意丢失时区信息，可以使用以下内容：

```
using System;
using System.Globalization;

static class Test
{
    static void Main()
    {
        string text = "Fri, 18 Dec 2009 9:38 am PST";
        DateTime parsed = TrimZoneAndParse(text);
        Console.WriteLine(parsed);
    }

    static DateTime TrimZoneAndParse(string text)
    {
        int lastSpace = text.LastIndexOf(' ');
        if (lastSpace != -1)
        {
            text = text.Substring(0, lastSpace);
        }
        return DateTime.ParseExact(text,
            "ddd, dd MMM yyyy h:mm tt",
            CultureInfo.InvariantCulture);
    }
} 
```

请注意，这假定了固定的日期/时间格式和文化。您的需求可能会有所不同，您还应该考虑使用`TryParse`or`TryParseExact`如果这是用户输入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T06:34:15.960

如果[`DateTime.Parse`](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)无法自动计算出来，您可以使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)您指定所使用格式的位置。

在您的情况下，这类似于，您需要自己替换“PST”：

```
CultureInfo provider = CultureInfo.InvariantCulture;
string dateString = "Fri, 18 Dec 2009 9:38 am PST";
dateString = dateString.Replace("PST", "-08:00");
string format = "ddd, dd MMM yyyy h:mm tt zzz";
DateTime result = DateTime.ParseExact(dateString, format, provider); 
```

如果您的程序需要使用不同的时区缩写，您必须构建一个`Dictionary`带有缩写的时区偏移转换。

# ruby-on-rails-3 - 如何使用 JQueryMobile 在 Rails 应用程序中禁用 AJAX

> ID：12968531
> 
> 赞同：0
> 
> 时间：2012-10-19T06:26:52.793
> 
> 标签：ruby-on-rails-3, jquery-mobile, asset-pipeline

我已经构建了一个 Rails 3 应用程序，并试图让它与 JQueryMobile 一起工作。我已经继续并要求`query_mobile_rails`它工作得很好，但我需要禁用 AJAX 加载，因为它似乎妨碍了很多事情。查看[jquerymobile](http://jquerymobile.com/demos/1.2)文档，他们建议在加载 JQuery 之后，但在加载 JQueryMobile 之前添加以下 javascript：

```
$(document).bind("mobileinit", function(){
  $.mobile.ajaxEnabled = false;
}); 
```

我一直在阅读[Asset Pipeline](http://guides.rubyonrails.org/asset_pipeline.html#what-is-fingerprinting-and-why-should-i-care)上的文档，但我不知道如何设法在 JQuery 之后和 JQueryMobile 之前插入我的代码（以上）。我在哪里放置这样的 .js 文件以便在适当的时间加载它？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:55:54.210

没关系。我知道了。我`app/assets/app_lib.js`用上面的代码创建了一个文件，然后在我的文件中添加了一个`require app_lib`between `require jquery`and 。`require query.mobile``application.js`

# go - Go：通过管道发送 gob 挂起 - 更新：进程外 http.ResponseWriter 正在阻塞

> ID：12968533
> 
> 赞同：0
> 
> 时间：2012-10-19T06:27:03.013
> 
> 标签：go, gob

我正在编写一个网络服务器，它将请求分发给 Go 中的进程外程序。我正在使用 gob 通过管道发送 ResponseWriter 和 Request 数据类型。

问题是接收 gob 时外部进程挂起。

**更新**gob 现在已成功发送到外部进程，但现在外部进程阻塞`fmt.Fprintf(request.Resp, "Hello")`并冻结在那里。

dispreq.go

```
package dispreq

import (
    "net/http"
)

type DispReq struct {
    Resp    http.ResponseWriter
    Req *http.Request
} 
```

调度员.go

```
package main

import (
    "encoding/gob"
    "fmt"
    "net/http"
    "os"
    "os/exec"

    "dispreq"
)

func dispatch(w http.ResponseWriter, r *http.Request) {
    process := exec.Command("./hello")
    pipe, piperr := process.StdinPipe()

    if piperr != nil {
        fmt.Fprintf(os.Stderr, piperr.Error())
        return
    }

    encoder := gob.NewEncoder(pipe)

    process.Stdout = os.Stdout

    //UPDATE: encoder.Encode(&dispreq.DispReq{w, r})
    //UPDATE: process.Start()
    process.Start()
    encoder.Encode(&dispreq.DispReq{w, r})
    pipe.Close()
    process.Wait()
}

func main() {
    http.HandleFunc("/", dispatch)
    http.ListenAndServe(":8080", nil)
} 
```

你好.go

```
package main

import (
    "dispreq"
    "encoding/gob"
    "os"

    "fmt"
)

func main() {
    gobDecoder := gob.NewDecoder(os.Stdin)
    var request dispreq.DispReq
    gobDecoder.Decode(&request)
    fmt.Fprintf(request.Resp, "Hello")
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:26:56.033

`process.Start()`您应该在向它发送数据之前启动进程 ( ) ( `encoder.Encode(&dispreq.DispReq{w, r})`)。您可能还需要通过关闭管道 ( `pipe.Close()`) 或发送`\n`.

# c# - 如何在当前位置的位置列表中找到最近的位置坐标？

> ID：12968534
> 
> 赞同：0
> 
> 时间：2012-10-19T06:27:03.063
> 
> 标签：c#, xamarin.ios, annotations, mkmapview, coordinates

我正在开发一个 Iphone monotouch 应用程序。

我从服务器获取位置列表，我想在位置列表中仅显示地图上**最近**的位置。

请给我相关的链接，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T06:34:31.813

位置有纬度和经度。首先按纬度排序，得到最近的纬度（+-x）。然后按最近的经度（+-x）再次过滤。然后你有你的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:39:47.400

您可以使用距离矩阵 API。使用此 API，您可以计算任何给定位置之间的距离。

# bash - 在终端中回显“at”命令失败

> ID：12968535
> 
> 赞同：0
> 
> 时间：2012-10-19T06:27:04.120
> 
> 标签：bash, command-line-interface, at-job

今天上午 9:00 在我的 Linux 命令行上打印“hello”（或一些提醒）：

```
$ at 9:00AM
warning: commands will be executed using /bin/sh
at> echo "hello"
at> <EOT> 
```

但是，在指定的时间，什么都没有发生。

我有一个空文件，`etc/at.deny`没有`/etc/at.allow`文件，所以使用该命令的权限应该没有任何问题。此外，在上午 9:00 写入文件也可以：

```
$ at 9:00AM
at> echo "hello" > /home/mart/hello.txt
at> <EOT>
$ cat /home/mart/hello.txt
hello 
```

所有作业都按计划显示，我无法在终端窗口中获​​得任何输出（我在带有终结者的 Crunchbang Linux 上）。为什么？我是否需要以某种方式指定该输出的窗口？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:29:12.813

`at``atd`从无法访问您的终端的守护程序 ( ) 运行命令。因此，脚本的输出不会出现在您的终端中（除非您`tty`在命令中向右管道）。

相反，它的作用是`man at`：

> 如果有的话，用户将收到来自他的命令的标准错误和标准输出。

`mail`如果您的机器配置合适，您可以访问这些报告。

如果您想`at`写入您的终端，您可以尝试将输出通过管道发送到`write`，它将一条消息写入用户的 TTY，或者`wall`如果您想写入连接到系统的每个终端，则发送到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T08:54:35.063

好的，**nneonneo 的**解释使我使用`wall`，它向所有用户发送消息。所以在终端窗口中设置自己的提醒可以这样完成：

```
$ at 9:00AM
warning: commands will be executed using /bin/sh
at> echo "hello" | wall
at> <EOT> 
```

# mysql - MySQL：将两个查询组合成一行结果

> ID：12968538
> 
> 赞同：0
> 
> 时间：2012-10-19T06:27:41.497
> 
> 标签：mysql, sql, join

查询的第一部分：

```
SET @centerLat = '48.531157';
SET @centerLng = '-123.782959';

SELECT user_id, lat, lng, ( 3959 * acos( cos( radians( @centerLat ) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(@centerLng) ) + sin( radians( @centerLat ) ) * sin( radians( lat ) ) ) ) AS distance FROM bid_userloc HAVING distance < 25 ORDER BY distance LIMIT 0 , 20 
```

第二个方面是`user_id`从 USERS 表中获取并获取大量信息

我仍在学习 JOIN 甚至意味着什么，我不太明白它是如何运作的最好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:32:36.583

你可以试试这个

```
 SELECT user_id, lat, lng, ( 3959 * acos( cos( radians( @centerLat ) )
  * cos( radians( lat ) ) * cos( radians( lng ) - radians(@centerLng) )
   + sin( radians( @centerLat ) ) * sin( radians( lat ) ) ) ) 
   AS distance,columnsfromuserstable FROM bid_userloc bid
   inner join users us on bid.user_id=us.user_id 
    HAVING distance < 25
   ORDER BY distance LIMIT 0 , 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:32:57.040

你可以尝试这样的事情：

```
select * from users where user_id in (select user_id from(

SELECT user_id, lat, lng, ( 3959 * acos( cos( radians( @centerLat ) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(@centerLng) ) + sin( radians( @centerLat ) ) * sin( radians( lat ) ) ) ) AS distance FROM bid_userloc HAVING distance < 25 ORDER BY distance LIMIT 0 , 20

)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:35:24.757

带有 JOIN 的变体 -

```
SET @centerLat = '48.531157';
SET @centerLng = '-123.782959';

SELECT
  t1.user_id, t1.lat, t1.lng,
  (3959 * ACOS(COS(RADIANS(@centerLat)) * COS(RADIANS(t1.lat)) * COS(RADIANS(t1.lng) - RADIANS(@centerLng)) + SIN(RADIANS(@centerLat)) * SIN(RADIANS(t1.lat)))) distance,
  t2.*
FROM
  bid_userloc t1
JOIN users t2
  ON t1.user_id = t2.user_id
HAVING
  distance < 25
ORDER BY
  distance
LIMIT
  0, 20; 
```

# asp.net-mvc - 使用自定义 [必需] 属性时使用客户端验证

> ID：12968542
> 
> 赞同：4
> 
> 时间：2012-10-19T06:27:50.703
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation, client-side

在这个项目中，我们不使用`System.ComponentModel.DataAnnotations`命名空间中的默认数据注释属性，而是构建了自定义属性。

所以我们确实在`[required]`属性上放置了一个属性，但它是自定义构建的。

对于服务器端验证，我们设法使用自定义验证提供程序覆盖了验证，但我们被客户端验证困住了。

正如我在文档中所读到的，我看到当您使用默认`[required]`属性时，这些属性会呈现在 html 元素上：

```
data-val-lengthmax="10" data-val-length-min="3" data-val-required="The ClientName field is required." 
```

我认为这是由框架完成的，它读取普通`required`属性，然后呈现 html 属性。

我们可以让框架也为我们呈现这些属性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:32:34.460

> 我们可以让框架也为我们呈现这些属性吗？

是的，有两种可能：

1.  让您的自定义属性实现[`IClientValidatable`](http://msdn.microsoft.com/en-us/library/system.web.mvc.iclientvalidatable%28v=vs.98%29.aspx)您将在其中实现客户端验证规则的接口。
2.  注册一个自定义[`DataAnnotationsModelValidator<TAttribute>`](http://msdn.microsoft.com/en-us/library/ee470840%28v=vs.108%29.aspx)，其中 TAttribute 将是您的自定义验证属性以及您将在其中实现自定义客户端验证规则的位置（这是 Microsoft 用来为 Required 属性实现客户端验证的方法，这就是为什么如果您编写一个派生的自定义验证器属性从中您不会获得客户端验证）。然后，您需要使用`DataAnnotationsModelValidatorProvider.RegisterAdapter`call 使用自定义属性注册您的自定义模型验证器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T06:39:25.637

为了在自定义属性中启用客户端验证，您可以在属性中实现[`IClientValidatable`](http://msdn.microsoft.com/en-us/library/system.web.mvc.iclientvalidatable%28v=vs.98%29.aspx)接口：

```
public class requiredAttribute : ValidationAttribute, IClientValidatable
{
    ...

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        return new[] { new ModelClientValidationRule { ErrorMessage = "<Your error message>", ValidationType = "required" } };
    }
} 
```

作为替代方案，您可以为您的属性实现验证适配器：

```
public class requiredAttributeAdapter : DataAnnotationsModelValidator<requiredAttribute>
{
    public requiredAttributeAdapter(ModelMetadata metadata, ControllerContext context, RequiredAttribute attribute)
        : base(metadata, context, attribute)
    { }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        return new[] { new ModelClientValidationRule { ErrorMessage = "<Your error message>", ValidationType = "required" } };
    }
} 
```

并将其注册到 Global.asax 中的数据注释验证引擎中：

```
protected void Application_Start()
{
    ...
    DataAnnotationsModelValidatorProvider.RegisterAdapter(typeof(requiredAttribute), typeof(requiredAttributeAdapter));
} 
```

当然，您需要确保您在上述类中引用了您的属性。

# c++ - stl map.find 在使用 vs2010 的调试和发布中表现不同

> ID：12968545
> 
> 赞同：4
> 
> 时间：2012-10-19T06:28:14.820
> 
> 标签：c++, dictionary, stl

我正在使用 stl map 来存储从 pcap 文件中提取的流信息。当数据包到来时，我使用 map.find 来查找数据包所属的流是否存在。我必须使用 map.find 两次，因为从 A 到 B 的数据包和从 B 到 A 的数据包属于同一流。

```
struct FiveTuple
{
unsigned short source_port;
unsigned short dest_port;
unsigned int source_ip_addr;
unsigned int dest_ip_addr;
unsigned char transport_proto_type;
}; 
```

FiveTuple 标识一个流。我使用 FiveTuple 作为地图中的关键元素。

map 是 map< FiveTuple, Flow, FlowCmp>，其中 FlowCmp 是一个结构体，使用 memcmp 来查看 FiveTuple a 是否小于 FiveTuple b，就像 operator<。为了查找数据包的流是否存在，我编写了如下代码，其中 m 是映射的名称，five_tuple 是从数据包中提取信息的 FiveTuple：

```
auto it = m.find(five_tuple);
if( it == m.end())
{
     //swap source and dest ip/port in five_tuple,
    it = m.find(five_tuple);

    if(it == m.end())
    {
          //do something
    }
} 
```

在vs2010的debug版本中，结果是合理的。当我将其更改为发布版本时，我发现第二个 m.find 大部分时间都没有返回正确的迭代器，而是给了我 m.end。而且我发现没有初始化问题。如何解决发布版本问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T06:43:16.510

好像您正在对 FiveTuple 对象执行 memcmp() 。这是未定义的行为，因为 FiveTuple 包含尾随垃圾字节。这些尾随垃圾字节在调试版本和发布版本中是不同的，因此您会得到不同的结果。您应该重写 FlowCmp，使其不使用 memcmp()。

这是基于提供的有限信息的猜测，但如果您想测试一下，请尝试`cout << sizeof(FiveTuple);`。我打赌你会看到的`sizeof(FiveTuple) > sizeof(short) + sizeof(short) + sizeof(int) + sizeof(int) + sizeof(char)`。换句话说，你的结构中有垃圾，你不应该使用 memcmp。

当然 memcmp 不好还有另一个原因，因为这意味着您的代码将是不可移植的，因为它的行为将取决于您平台的**字节序。**这本身就是不为此目的使用 memcmp 的充分理由。

# c# - Visual Studio - 我可以通过网络在 CE 设备上调试我的应用程序吗

> ID：12968547
> 
> 赞同：3
> 
> 时间：2012-10-19T06:28:29.317
> 
> 标签：c#, visual-studio, windows-ce

我正在使用 Visual Studio 2008 为 Windows CE 开发应用程序。

如果我通过 USB 连接设备，我可以在设备上调试/部署我的应用程序。但在 CE 设备上，USB 连接只是作为另一个具有私有 IP 的网络接口呈现。

现在我想知道是否可以通过 LAN 断开 USB 连接（我的 PC 和 CE 设备都在同一个子网上）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T07:05:47.240

是的，这是可能的，我在工作中这样做。首先，您需要在设备上运行 IPConfig 并获取 IP。在 Visual Studio 的连接属性中设置 IP。接下来有两个可执行文件和一些您需要复制到设备的文件..这里应该解释一下

[如何：在没有 ActiveSync 的情况下连接到 Windows CE 设备](http://msdn.microsoft.com/en-us/library/ms228708%28VS.80%29.aspx)

只需执行这两个 exe，您应该能够连接。顺便说一句，通过以太网进行调试比 activesync 更快且错误更少

# sql - 将多个队列链接到 SQL 服务代理中的同一服务

> ID：12968549
> 
> 赞同：3
> 
> 时间：2012-10-19T06:28:38.147
> 
> 标签：sql, sql-server, sql-server-2008, service-broker

大家好，我刚刚开始使用 SQL 服务代理。我想知道我们是否可以**将两个服务代理队列链接到同一个服务**，这样当使用该服务发送消息时，它将被传递到两个队列，即两个队列都包含相同的消息副本。有没有这样的方法或有其他方法可以做到这一点？

提前致谢

潘卡伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:36:09.203

不，在 SQL 2008 中，服务代理仅支持 DIALOG 对话，不支持 MONOLOG，这意味着只能有一个端点。

# javascript - jQuery Datepicker - 在选择日期之一时在输入字段中插入数据

> ID：12968550
> 
> 赞同：0
> 
> 时间：2012-10-19T06:28:41.453
> 
> 标签：javascript, jquery, datepicker

我有一些假期：

```
var holidayDays = ['24/12/2012', '2/1/2013', '14/2/2013']; 
```

和代码：

```
if( parseInt($("#date").val()) == holidayDays ) {  
        var freeday_value = ('holiday');
        $('#holiday_day').val(freeday_value);
    } 
```

谁没工作。

我想要实现的目标：如果在 datepicker 中有人从上表中选择日期，则在`input`字段 ( `#holiday_day`) 上将显示单词：假期。我究竟做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:33:37.633

你可以这样做：

```
if( $.inArray($("#date").val(), holidayDays) ) {  
        var freeday_value = 'holiday'; // Just removed () from your code
        $('#holiday_day').val(freeday_value);
    } 
```

并使用[.inArray](http://api.jquery.com/jQuery.inArray/)在`if ()`条件下进行比较

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:34:03.790

您应该检查[jQuery.inArray](http://api.jquery.com/jQuery.inArray/)函数。

喜欢

```
if( $.inArray($("#date").val(), holidayDays)>=0) {  
    var freeday_value = 'holiday';
    $('#holiday_day').val(freeday_value);
} 
```

你应该试试这个

```
var holidayDays = ['24/12/2012', '2/1/2013', '14/2/2013'];

$("#date").datepicker({"dateFormat":"dd/mm/yy", "onSelect":CheckForHoliday});

function CheckForHoliday(dateStr){
    if( $.inArray(dateStr, holidayDays)>=0) {  
        var freeday_value = 'holiday';
        $('#holiday_day').val(freeday_value);
    }else{
        $('#holiday_day').val('');
    }
} 
```

检查此**[演示](http://jsfiddle.net/VyThg/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:41:01.200

```
if( $.inArray($("#date").val(), holidayDays) ) {  
  $('#holiday_day').val('holiday');
}
else{
 $('#holiday_day').val(''); 
} 
```

# c# - CSV 文件其中一列同时包含整数和字符串值，使用 C# Oledb 上传时提供字符串值未加载

> ID：12968551
> 
> 赞同：1
> 
> 时间：2012-10-19T06:28:45.137
> 
> 标签：c#

CSV 文件的其中一列包含整数和字符串值，使用 C# Oledb 上传提供的字符串值正在加载。

更多值是整数数据类型的原因，未加载字符串值。如果字符串值更多，则加载整数和字符串值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T06:41:54.040

在excel中将列的数据类型更改为字符串，然后尝试上传数据...

# android - Flurry Analytics 在 Android 模拟器中“运行”时崩溃，但在模拟器中“调试”时不会崩溃

> ID：12968553
> 
> 赞同：5
> 
> 时间：2012-10-19T06:28:52.573
> 
> 标签：android, android-emulator, flurry

根据标题，我有一个使用 Android 的[Flurry Analytics](http://www.flurry.com/flurry-analytics.html)库的应用程序。我已经按照他们的[基本步骤](http://support.flurry.com/index.php?title=Analytics/GettingStarted/Android)将分析集成到我的应用程序中。如果我在 Android 模拟器中*调试我的应用程序，一切正常。*另一方面，如果我在 Android 模拟器中*运行我的应用程序，Flurry 似乎会使它崩溃。*这是 logcat 的输出：

```
10-19 16:03:14.004: E/AndroidRuntime(385): FATAL EXCEPTION: FlurryAgent  
10-19 16:03:14.004: E/AndroidRuntime(385): java.lang.NullPointerException  
10-19 16:03:14.004: E/AndroidRuntime(385):  at com.flurry.android.FlurryAgent.b(SourceFile:2188)  
10-19 16:03:14.004: E/AndroidRuntime(385):  at   com.flurry.android.FlurryAgent.a(SourceFile:68)  
10-19 16:03:14.004: E/AndroidRuntime(385):  at com.flurry.android.e.run(SourceFile:1420)  
10-19 16:03:14.004: E/AndroidRuntime(385):  at   android.os.Handler.handleCallback(Handler.java:587)  
10-19 16:03:14.004: E/AndroidRuntime(385):  at android.os.Handler.dispatchMessage(Handler.java:92)  
10-19 16:03:14.004: E/AndroidRuntime(385):  at android.os.Looper.loop(Looper.java:123)  
10-19 16:03:14.004: E/AndroidRuntime(385):  at android.os.HandlerThread.run(HandlerThread.java:60) 
```

奇怪的是，这个问题似乎只发生在我在 Android 2.2 (Froyo) 虚拟设备中运行时，而如果我在 Android 4.1 虚拟设备中运行它，那很好。不幸的是，我无法立即访问真正的 Android 2.2 设备进行测试。

谁能建议可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:15:18.390

**Flurry SDK**也有类似的问题，版本为**3.0.4**；
Flurry 库在启动模拟器和 android 版本 < **2.3**的真实设备时崩溃（我在真实设备 2.2 和 2.1、2.2 - 模拟器上检查了它）。

**已在3.0.5**版上修复，请参阅更新日志：

> 版本 3.0.5- 2012 年 10 月 26 日
> ● 添加了防止 AndroidSDK 2.2 中坏手机 ID 崩溃的修复程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T19:52:23.080

最新的 Flurry SDK 似乎存在某种问题。该异常也出现在真实设备上（仅限 android 2.2 和发行版）。

我所做的是使用运行良好的旧版本的 Flurry SDK。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T09:13:48.327

我也遇到过这个问题，但似乎已经随着 sdk 3.0.5 的发布而得到修复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-04T08:10:46.013

在 Flurry 3.4.0 上发生在我身上。崩溃：

```
FlurryAgent.onStartSession( parent , FLURRY_API_KEY); 
```

在哪里`parent`。`FragmentActivity`

唯一对我有用的是使用应用程序上下文调用该方法：

```
FlurryAgent.onStartSession( parent.getApplicationContext() , FLURRY_API_KEY); 
```

# php - 在php中执行tcl脚本

> ID：12968554
> 
> 赞同：2
> 
> 时间：2012-10-19T06:29:00.143
> 
> 标签：php, tcl, passthru

我正在尝试使用 passthru 函数在 php 中执行 tcl 脚本。TCL 脚本在普通的 unix 终端上完美执行。而在 php 中，它没有在浏览器上给出预期的结果。

我正在使用 php 中的 passthru 函数传递环境变量。环境变量已正确传递，但我注意到其余命令没有给出结果。所以我尝试尝试执行 ls 命令和 date 命令。

`date`命令在浏览器上提供输出，而在浏览器`ls`上不提供任何输出。

为什么会这样？`who`与其他具有大输出的命令的结果相同。我在这里有什么遗漏吗？

这是我的示例 tcl 脚本 ls_sample.tcl

```
puts "entering tcl"
set date_variable [exec date]
puts $date_variable
set ls_variable [exec ls]
puts $ls_variable 
```

浏览器上的示例输出：

```
executing tclscript entering tcl Thu Oct 18 23:23:38 PDT 2012 
```

为什么`ls`不打印？而它在unix终端上工作得很好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T09:29:08.863

我认为这可能是 Apache/Php/您的系统配置问题。我刚刚在我的机器下尝试了相同的示例并得到了正确的结果：

```
entering tcl Sat Oct 27 11:08:03 CEST 2012 blog forum index.rvt launchtcl.php pttest.tcl sd test.tcl test2.tcl 
```

我也试图通过做这些事情来重现这个问题，但它总是对我有用：

*   `ls /usr/bin`, 以获得更长的字符串
*   `who`, 对于品种
*   `chown`将文件编辑到与 Apache ( )`.tcl`使用的用户/组不同的用户/组`www-data:www-data`
*   `chown`编辑`.tcl`文件（如前所述）和`chmod o-rx`目录
*   从 to 切换`passthru('tclsh pttest.tcl')`到`passthru('./pttest.tcl')`，使其`pttest.tcl`可执行并添加`#!/usr/bin/tclsh`为第一行
*   和以前一样，但是`chown`ing`pttest.tcl`文件

这些测试都没有给我你的问题。我现在正在为我使用的测试目录添加 Apache 配置。

```
<Directory />
    Options -Indexes FollowSymLinks MultiViews
    DirectoryIndex index.html index.htm index.tcl index.rvt
    AllowOverride All
    Order allow,deny
    allow from all
</Directory> 
```

对不起，如果我不能回答你的问题，但也许这些信息可以帮助你。

# jquery - 在gridview内单击按钮触发ui datepicker并将所选日期分配给当前行中的字段

> ID：12968556
> 
> 赞同：3
> 
> 时间：2012-10-19T06:29:14.777
> 
> 标签：jquery, asp.net, datepicker, jquery-ui-datepicker

我找到了这个问题和解决方案，但是我不是在处理文本框，而是在处理 gridview 字段。[在按钮单击时触发 jQueryUI datePicker，将结果发送到禁用的输入字段](https://stackoverflow.com/questions/2611515/trigger-jqueryui-datepicker-on-button-click-send-result-to-disabled-input-field)

我在带有 TemplateField 的 asp GridView 中有一个开始日期列，如果单击 ImageButton，我想触发 jquery ui datepicker。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns=False allowsorting = True
        SkinID=FACGrid onload="GridView1_Load" onsorting="GridView1_Sorting" 
        onrowdatabound="GridView1_RowDataBound" 
        onrowediting="GridView1_RowEditing" 
        onrowcancelingedit="GridView1_RowCancelingEdit" 
        onrowupdating="GridView1_RowUpdating">
    <Columns>     
<asp:TemplateField HeaderText="Start Date" SortExpression="start_dt">
                    <EditItemTemplate>
                        <asp:Label ID="StDt" runat="server" CssClass="StartDate" Text='<%# Eval("start_dt", "{0:d}") %>'></asp:Label>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="StDt" runat="server" Text='<%# Bind("start_dt", "{0:d}") %>'></asp:Label>
                        <asp:ImageButton ID="startdtimage" CssClass="StartDateImg" runat="server" ImageUrl="../images/pencil.gif" Visible='<%# HasUpdateStartDateRole() %>' Width="18px" Height="18px" />
                    </ItemTemplate>
                </asp:TemplateField> 
```

基于上面提到的问题，我有这个。我需要什么才能使每行工作？

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".ArrivalDate").datepicker();

        $(".StartDateImg").click(function () {
            $(".StartDate").datepicker("show");
        });

    });
</script> 
```

还有一个带有雇用日期的隐藏列。我想将日期选择器设置为仅允许等于或在雇用日期之后的日期。或者，在选择日期后确认它不早于雇用日期。

**** 编辑 **** 让图像按钮打开模式对话框并将行的开始日期和雇用日期传递给它会更容易吗？然后有一个“更新”按钮来检查和保存日期。但是，我也不确定如何做到这一点。

**** 编辑 **** 使用下面的@Miki Shah 的解决方案，日期选择器正在显示，但我不知道如何将所选日期分配给该行的 startdate 字段，使用该行的 startdate 字段作为当前选定的日期打开时，并使用该行的hire_date 进行验证或限制 datepicker 中的可用日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:16:26.713

您可以按类名分配日期选择器。每当单击具有“StartDateImg”类名的图像时，都会显示日期选择器。

```
Sys.Application.add_load(function () {

            $(".StartDateImg").datepicker({
                duration: '',
                showTime: false,
                constrainInput: false,
                onSelect: function(dateText) {$(this).parents().find("span")[0]).innerHTML = dateText; 
            });
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:35:15.470

编辑：在 html 中工作

我想出了一个（不是很优雅的）解决方案，所以如果你可以或不想使用它，这就是你的电话。:)

脚本

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".starter").each(function () {
            $(this).children(".StartDateImg").datepicker().hide();
        });
    });

    $(".starter").each(function () {
        $(this).children(".link").click(function () {
            $(this).nextAll().show();
        });
    });
</script> 
```

HTML

```
<div class="starter">
    <a class="link" href="#">test</a>
    <div class="StartDateImg">
    </div>
</div> 
```

日期选择器的问题在于它自动选择显示内联或弹出式.. => 应用于 div 或跨度时内联，应用于输入/文本框时弹出

所以我的解决方案将在 div 中内联加载 datepicker，隐藏这个 div，然后在按下正确的链接时显示它。

这将只显示 div => 以获取弹出窗口，您必须考虑编写一些 css 或 javascript 以使 div 像弹出窗口一样“出现”。

我希望它有所帮助，但我相信可能会找到更优雅的解决方案..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:32:52.180

你可以试试这个......gridview中的模板列会是这样......

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Button Text="calendar" runat="server" CssClass="Calendar"    onclientclick="return Testing();" />
    </ItemTemplate>
</asp:TemplateField> 
```

Scripting 函数应该是这样的............

```
<script type="text/javascript" >
        function Testing(){
            $('.calendar').each(function () {
                $(this).glDatePicker();
            });
            return false;
        }
</script> 
```

从日期选择器中选择日期后，您可以观察到按钮的值将发生变化，即它显示日期.....我在这里使用按钮来调用 glDatePicker :D 希望它可以帮助你

# iphone - 如何在 iPhone 中获取设备位置名称？

> ID：12968558
> 
> 赞同：3
> 
> 时间：2012-10-19T06:29:28.083
> 
> 标签：iphone, ios, gps, location

目前我在 iPhone 应用程序中工作，使用 CLLocationManager 来获取纬度和经度值。我不知道这个？如何从此纬度和经度值中获取设备位置（地址）名称？请帮我

提前致谢

我试过这个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    LocationManager = [[CLLocationManager alloc]init];
    LocationManager.delegate=self;
    LocationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [LocationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSString * latitude = [[[NSString alloc] initWithFormat:@"%f", newLocation.coordinate.latitude]autorelease];
    NSString * longitude = [[[NSString alloc] initWithFormat:@"%f", newLocation.coordinate.longitude]autorelease];

    [LocationManager stopUpdatingLocation];

    NSLog(@"latitude:%@",latitude);
    NSLog(@"longitude:%@",longitude);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T06:40:58.723

```
 -(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation                     *)newLocation fromLocation:(CLLocation *)oldLocation  

    {    
    [manager stopUpdatingLocation];    
    lati = [[NSString alloc] initWithFormat:@"%+.6f", newLocation.coordinate.latitude];    
    NSLog(@"address:%@",lati);

    longi = [[NSString alloc] initWithFormat:@"%+.6f", newLocation.coordinate.longitude];
    NSLog(@"address:%@",longi);

    [geoCoder reverseGeocodeLocation: newLocation completionHandler: ^(NSArray *placemarks, NSError *error) 
     {
         //Get nearby address
         CLPlacemark *placemark = [placemarks objectAtIndex:0];

         //String to hold address
         NSString *locatedAt = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];

         //Print the location to console
         NSLog(@"I am currently at %@",locatedAt);

         address = [[NSString alloc]initWithString:locatedAt];    
         NSLog(@"address:%@",address);
     }];

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T06:51:30.043

```
CLGeocoder *ceo = [[CLGeocoder alloc]init];
        CLLocation *loc = [[CLLocation alloc]initWithLatitude:32.00 longitude:21.322];

     [ceo reverseGeocodeLocation: loc completionHandler:
     ^(NSArray *placemarks, NSError *error) {
          CLPlacemark *placemark = [placemarks objectAtIndex:0];
         NSLog(@"placemark %@",placemark);
          //String to hold address
          NSString *locatedAt = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];
          NSLog(@"addressDictionary %@", placemark.addressDictionary);

          NSLog(@"placemark %@",placemark.region);
          NSLog(@"placemark %@",placemark.country);  // Give Country Name
          NSLog(@"placemark %@",placemark.locality); // Extract the city name
          NSLog(@"location %@",placemark.name);
          NSLog(@"location %@",placemark.ocean);
          NSLog(@"location %@",placemark.postalCode);
          NSLog(@"location %@",placemark.subLocality);

          NSLog(@"location %@",placemark.location);
          //Print the location to console
         NSLog(@"I am currently at %@",locatedAt);

      }]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T06:34:16.673

你必须做一些相反的位置。你很幸运：Apple 提供了一个类来做到这一点。请参阅[CLGeocoder](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/cl/CLGeocoder)（适用于 iOS >= 5.0）或[MKReverseGeocoder](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKReverseGeocoder_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/MKReverseGeocoder/initWithCoordinate%3a)（适用于 iOS < 5.0）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T06:34:40.640

您可以为此使用**Google Maps API**（适用于任何 iOS）：

```
NSString *req = [NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/geocode/json?latlng=%.5f,%.5f&sensor=false&language=da", location.latitude, location.longitude];
NSString *resultString = [NSString stringWithContentsOfURL:[NSURL URLWithString:req] encoding:NSUTF8StringEncoding error:NULL]; 
```

然后您可以使用任何 JSON 库（在本例中为 SBJSON）解析对 NSDictionary 的响应：

```
SBJSON *jsonObject = [[SBJSON alloc] init];
NSError *error = nil;
NSDictionary *response = [jsonObject objectWithString:resultString error:&error];
[jsonObject release]; 
```

提取地址：

```
if (error) {
        NSLog(@"Error parsing response string to NSObject: %@",[error localizedDescription]);

    }else{

        NSString *status = [response valueForKey:@"status"];

        if ([status isEqualToString:@"OK"]) {

            NSArray *results = [response objectForKey:@"results"];

            int count = [results count];

            //NSSLog(@"Matches: %i", count);

            if (count > 0) {
                NSDictionary *result = [results objectAtIndex:0];

                NSString *address = [result valueForKey:@"formatted_address"];

            }

        }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T06:38:46.707

在 iOS 5.0 之前，我们有 MKReverse Geo-coder 类来找到这个..现在它已被弃用..

我们必须在 Core Location Framework 中使用 CLGeocoder 类

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T06:34:16.870

您必须创建一个 CLLocation 对象并将其传递给 [reverseGeoCoder](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/cl/CLGeocoder)。

# c# - 如何激发对共享资源的同时访问？

> ID：12968559
> 
> 赞同：4
> 
> 时间：2012-10-19T06:29:28.520
> 
> 标签：c#, multithreading, locking

我正在创建一个对输入执行顺序处理的组件。由于它将托管在几个不同的进程中，我需要它是线程安全的。起初，我故意在代码中忽略了线程安全。现在是时候介绍它了。

首先，我想一开始就引发一个错误，但没能做到。这是处理引擎代码的简化版本：

```
public Document DoOrchestration(Document input)
{
    Document output = new Document();

    foreach (var orchestrationStep in m_OrchestrationSteps)
    {
        var processor = GetProcessor(orchestrationStep).Clone();

        output = processor.Process(input);

        input = output;
    }

    return output;
} 
```

处理器可以由我组织中的其他人开发，其中可能包括一些复杂的初始化。它们也可能是线程不安全的，所以我使用原型模式来获取唯一的实例以避免其中的线程问题。

为了测试这个功能，我使用了以下代码：

```
for (int i = 0; i < 20000; i++)
{
    Thread t = new Thread(() => TestOrchestration(i));
    t.Start();
}

void TestOrchestration(int number)
{
    Document doc = new Document(string.Format("Test {0}", number));
    doc = DoOrchestration(doc);
    if (doc.ToString().Substring(0,35) != strExpectedResult)
    {
        System.Console.WriteLine("Error: {0}", doc.ToString();
    }
} 
```

我预计其中一些线程会与另一个线程发生冲突并混淆它们的结果，但令我惊讶的是这并没有发生。

对此可能有一个简单而合乎逻辑的解释，但它让我难以理解。或者只是代码太简单导致两个线程同时摆弄输入/输出变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:40:41.140

查看[国际象棋](http://research.microsoft.com/en-us/projects/chess/)。

> CHESS 是一种用于在并发程序中查找和重现 Heisenbugs 的工具。CHESS 反复运行并发测试，确保每次运行都采用不同的交错。如果交错导致错误，CHESS 可以重现交错以改进调试。CHESS 可用于托管程序和本机程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:49:38.757

我认为您的测试功能在下一个线程开始之前几乎完成了。您可以让所有线程在调用编排函数之前等待 ManualResetEventSlim，然后设置 ManualResetEventSlim
这样您的所有线程实际上都会尝试同时调用编排。

如果所有线程男性编排几乎同时调用，您也可能不需要 20,000 个线程来模拟这种行为

```
ManualResetEventSlim manualEvent = new ManualResetEventSlim (false);

for (int i = 0; i < 20000; i++)
{
    Thread t = new Thread(() => TestOrchestration(i));
    t.Start();
}
manualEvent.Set();

void TestOrchestration(int number)
{
    manualEvent.Wait();
    Document doc = new Document(string.Format("Test {0}", number));
    doc = DoOrchestration(doc);
    if (doc.ToString().Substring(0,35) != strExpectedResult)
    {
        System.Console.WriteLine("Error: {0}", doc.ToString();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:45:49.653

您可以使用`ManualResetEvent`来同时延续任意数量的等待线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T06:43:41.593

我假设由于您的测试功能的简单性，您的线程甚至没有时间在前一个线程完成工作之前大量生成。考虑在开始计算步骤之前使用[屏障](http://msdn.microsoft.com/en-us/library/system.threading.barrier.aspx)来允许所有线程产生。此外，您将需要考虑增加测试用例的复杂性，例如通过在同一个循环中执行几个相同的操作（启动一个线程很昂贵，并且允许其他内核在您开始之前完成它们的工作）资源争用。

通常，在较长时间内快速访问同一资源可能会引发资源争用，您的测试用例似乎不允许这样做。顺便说一句，我强烈建议您在设计时考虑到线程安全，而不是稍后再介绍。使用代码时，您对资源访问模式的理解比在稍后阶段分析代码时要好。

# c++ - 使用 Eigen 计算 Cholesky 分解

> ID：12968561
> 
> 赞同：10
> 
> 时间：2012-10-19T06:29:31.343
> 
> 标签：c++, linear-algebra, eigen

我正在尝试计算 C++ 中矩阵的 Cholesky 因子（对于给定的矩阵 P，找到 L 使得 LL^T=P）。我的目标不是解决线性系统 P*x=b，因为这种矩阵分解通常用于，而是实际获得矩阵 L。（我正在尝试计算“sigma 点”，就像在无味变换中所做的那样.)

库[Eigen](http://eigen.tuxfamily.org/dox/index.html)应该计算 Cholesky 分解，但我不知道如何让它给我矩阵 L 中的值。当我尝试以下代码行时

```
Eigen::MatrixXd P(3,3);
P << 6, 0, 0, 0, 4, 0, 0, 0, 7;
std::cout << P.llt().matrixL().col(0) << std::endl; 
```

我得到编译器错误

```
error: ‘Eigen::internal::LLT_Traits<Eigen::Matrix<double, -0x00000000000000001, -0x00000000000000001>, 1>::MatrixL’ has no member named ‘col’ 
```

[文档](http://eigen.tuxfamily.org/dox/classEigen_1_1LLT.html)说 LLT.matrixL() 返回类型 Traits::MatrixL 。那是什么，我如何获得 L 的值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T08:59:57.353

您可以在 LLT.h 头文件中查找 Trait 是什么。它是一个[TriangularView](http://eigen.tuxfamily.org/dox/classEigen_1_1TriangularView.html)就像文档说的那样。三角形视图没有`col`成员，这就是您收到错误的原因。将三角形视图复制到密集矩阵中，如下所示：

```
Eigen::MatrixXd P(3,3);
P << 6, 0, 0, 0, 4, 0, 0, 0, 7;
Eigen::MatrixXd L( P.llt().matrixL() );
std::cout << L.col(0) << std::endl; 
```

会给你你想要的。

# javascript - 使用正则表达式从字符串中检索电话号码

> ID：12968562
> 
> 赞同：0
> 
> 时间：2012-10-19T06:29:34.167
> 
> 标签：javascript, regex, parsing

> **可能重复：**
> [电话号码的正则表达式](https://stackoverflow.com/questions/5013782/regular-expression-for-phone-number)

我对正则表达式有点陌生，所以我还不知道它的可能性。因此，我不知道解决这个问题是否会很困难。

我有非常自由格式化的电话字符串，需要以固定的方式格式化它们（至少尽力而为）。“899-123-4-45；22-56-87”、“5 99-25-31-71”、“577-345-678,274-89-56”。

这是我知道的信息：

新的固定电话以 2-XX-XX-XX 开头，后跟 6 个数字（它们之间可以是两种类型的分隔符，“-”或“”，其中数字未知）。

旧固定电话仅包含 6 个号码 XX-XX-XX。

旧手机代码包含 8XX-YY-YY-YY 9 个号码。第一个是8。XX是运营商的代码（不是都知道）。

新的手机代码包含 5XX-YY-YY 9 个号码，唯一的区别是第一个号码。

一些记录包含旧固定电话代码、新固定电话代码、旧手机代码和新手机代码。

我需要以新格式存储所有数字，只有两个分隔符“-”和“，”。例如：“599-12-34-56,2-45-61-34”、“2-45-65-12”、“574-12-34-56”。

我只是不知道从哪里开始。我是否应该尝试只用包含数字的字符串拆分大字符串，然后只检索数字并确定它是哪种格式？还是有更简单的解决方案？

你会如何解析这个字符串：“574-12-34-56; 2 456 324, 455-566 2 22 40 56”？首先将这些分成3部分？我可以用“;”来分割它吗 或“”或“,”？那么我应该只检索数字并确定它们的样式并正确格式化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:44:11.607

最好的解决方案（在我看来）是使用多个正则表达式，每个正则表达式用于不同的格式。正则表达式往往会快速增长，因此维护它们可能是一项令人生畏的体验。

我会做的是使用这样的东西：

*   `(2)[ -]+(\d{2})[ -]+(\d{2})[ -]+(\d{2})`匹配第一个模式（新固定电话）：`2-XX-XX-XX`.
*   `(\d{2})[ -]+(\d{2})[ -]+(\d{2})`匹配第二种模式（旧固定电话）：6 位数。
*   `(8\d{2})[ -]+(\d{2})[ -]+(\d{2})[ -]+(\d{2})`匹配第三种模式（旧手机）`8XX-YY-YY-YY`：.
*   `(5\d{2})[ -]+(\d{2})[ -]+(\d{2})[ -]+(\d{2})`匹配第四种模式（新手机）`5XX-YY-YY-YY`：.

您必须使用上述表达式来查看哪个表达式将匹配您输入的数字的格式。请注意，这些表达式假定构成电话号码的数字由空格 ( `) 或破折号 ( `-`) 分隔。`

 `如果模式匹配，正则表达式引擎也会将组成电话号码的数字分组，用括号`(`和`)`括号表示。然后，您可以通过访问这些组并创建表示新格式化电话的新字符串，以任何您希望的方式重建电话号码。

要了解如何在 Javascipt 中使用正则表达式组，请查看[此处](https://stackoverflow.com/questions/432493/how-do-you-access-the-matched-groups-in-a-javascript-regex)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:50:20.560

我会建议一种不同的方法：

首先，在分隔电话号码的字符上拆分字符串：

```
result = subject.split(/[,;]/); 
```

其次，在每个子字符串上，删除所有非数字字符（可能除外，`+`以便您保留有关国际号码的信息）：

```
result[i] = result[i].replace(/[^\d+]+/g, ""); 
```

现在你有了所有没有任何分隔符的数字。然后您可以查看这些字符串，将它们分类为不同的类别（移动、固定电话、国际等），或许还可以重新引入您自己的分隔符。如果你想要那个。`

# objective-c - 如何为 CALayer 的填充颜色设置动画，因为它在 iPhone sdk 中从下到上填充颜色

> ID：12968563
> 
> 赞同：0
> 
> 时间：2012-10-19T06:29:44.140
> 
> 标签：objective-c, core-animation, calayer, ios5.1

我正在尝试`CALayer`用`duration`. 我需要你的帮助和实现这一目标的任何想法。

我试过这样：

```
CABasicAnimation *pathAnimation = 
 [CABasicAnimation animationWithKeyPath:@"fillColor"];
pathAnimation.duration = 5.0;
pathAnimation.fromValue = [NSNumber numberWithFloat:0.0f];
pathAnimation.toValue = [NSNumber numberWithFloat:1.0f];
[annotation addAnimation:pathAnimation forKey:@"fillColorAnimation"]; 
```

但是没有变化......

任何想法将不胜感激。

谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T01:50:15.673

如果你想用一种颜色填充任意形状，就好像颜色像水一样从底部流到顶部，你实际上需要两个或更多形状层。

创建完全成型的形状层，填充颜色到位。然后创建第二个形状图层，其路径为 4 条线，形成一个与第一个形状图层大小相同的矩形。最初，使矩形成为第一个形状层底部的水平线，面积为零。安装第二个形状层作为第一个形状层的遮罩层。

创建一个动画，将第二个（蒙版）层的形状从底部的零粗线更改为第一个形状层的完整边界。这将导致第二个形状图层为从第一个形状图层边界的底部到顶部生长的矩形设置动画。由于第二个形状图层是第一个图层的蒙版，因此动画将导致第一个形状图层在动画运行时从上到下显示。

如果您需要从动画开始处就位形状的轮廓并在形状内部进行动画填充，则在第一个形状图层的顶部添加一个形状图层的副本，设置为仅描边形状，而不是填充它。使该层不透明。它应该绘制形状的轮廓，另一个形状图层/蒙版对的动画应该填充轮廓下方的内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-28T07:16:10.060

如果有人在这里寻找代码，那就是 Swift 5：

```
private let fillLayer = CAShapeLayer()
private let fillMaskLayer = CAShapeLayer()

layer.addSublayer(fillLayer)

fillLayer.path = fillLayerPath().cgPath
fillLayer.fillColor = UIColor.white.cgColor

fillMaskLayer.path = fillPathBottom().cgPath
fillMaskLayer.fillColor = UIColor.white.cgColor

let fillAnimation = CABasicAnimation(keyPath: "path")
fillAnimation.duration = 3.0
fillAnimation.toValue = fillPathFull().cgPath
fillAnimation.repeatCount = .greatestFiniteMagnitude
fillAnimation.timingFunction = CAMediaTimingFunction(name: .easeInEaseOut)
fillLayer.mask = fillMaskLayer

fillMaskLayer.add(fillAnimation, forKey: "fillAnimationPath") 
```

# python - Mongo ObjectID：“无法比较偏移天真和偏移感知日期时间”，即使使用 pytz

> ID：12968565
> 
> 赞同：7
> 
> 时间：2012-10-19T06:29:53.233
> 
> 标签：python, mongodb, datetime, timezone, pymongo

我正在尝试使用[py-pretty](http://pypi.python.org/pypi/py-pretty)美化 ObjectIDs 时间戳，但它一直给我一个 TypeError：

```
TypeError: can't compare offset-naive and offset-aware datetimes 
```

即使在我尝试使用 Pytz 将时间戳转换为不知道 UTC 日期的时区之后。这是我正在尝试的代码

```
import datetime
import pytz
import pretty
# ...

song = db.songs.find_one( { 'GUID' : 0123 } )
dateTimeUnaware = song['_id'].generation_time.now(pytz.utc)
prettyDate = pretty.date( dateTimeUnaware ) 
```

为什么这一直给我类型错误？pytz 函数不应该使它与时区无关吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-19T13:42:58.400

我不是 py-pretty 专家，但您的代码不会将时区感知日期转换为时区不感知日期。

它只需要`now`utc 时区中的当前日期（使用 ）（因此时区感知）。

您可以使用以下方法天真地将 tz-aware datetime 转换为 tz-unaware ：

```
your_datetime_var.replace(tzinfo=None) 
```

在你的情况下：

```
song['_id'].generation_time.replace(tzinfo=None) 
```

请注意，在这种情况下，“天真”意味着所有与日期和时间相关的字段都将具有与原始字段相同的值，但有关时区和 DST 的信息将丢失。

顺便说一句，看起来 py-pretty 没有维护（上次上传到 pypi 是在 2010 年，源代码无法访问）所以寻找替代品可能是个好主意

# c++ - OpenCV 皮肤检测

> ID：12968576
> 
> 赞同：11
> 
> 时间：2012-10-19T06:30:37.347
> 
> 标签：c++, opencv, skin, flood-fill

我一直在做一些皮肤检测，但不能得到一个光滑的。下图包含使用以下代码的输入（左）和输出（右）。现在，所需的输出应该是最底部的图像（边缘平滑且内部没有孔的图像）。我如何实现这个输出？关于从哪里开始的示例代码将有很大帮助。

输入（左）和错误输出（右）：

![在此处输入图像描述](../Images/a5de34d1e3f43dd5d5e3735a1602b6d0.png)

期望的输出：

![在此处输入图像描述](../Images/f26a0465362f64c61f780a3c53bee61d.png)

生成错误输出的代码：

```
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
using namespace cv;

int main(){
    Mat src = imread("qq.jpg");
    if (src.empty())
        return -1;
    blur( src, src, Size(3,3) );
    Mat hsv;
    cvtColor(src, hsv, CV_BGR2HSV);
    Mat bw;
    inRange(hsv, Scalar(0, 10, 60), Scalar(20, 150, 255), bw);
    imshow("src", src);
    imshow("dst", bw);
    waitKey(0);
    return 0;
} 
```

修改后的代码（根据 Astor 的建议）：（现在的问题是：如何平滑输出？）

```
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
using namespace cv;

int findBiggestContour(vector<vector<Point> >);

int main(){
    Mat src = imread("qq.jpg");
    if (src.empty())
        return -1;
    blur( src, src, Size(3,3) );

    Mat hsv;
    cvtColor(src, hsv, CV_BGR2HSV);

    Mat bw;
    inRange(hsv, Scalar(0, 10, 60), Scalar(20, 150, 255), bw);
    imshow("src", src);
    imshow("dst", bw);

    Mat canny_output;
    vector<vector<Point> > contours;
    vector<Vec4i> hierarchy;

    findContours( bw, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE, Point(0, 0) );
    int s = findBiggestContour(contours);

    Mat drawing = Mat::zeros( src.size(), CV_8UC1 );
    drawContours( drawing, contours, s, Scalar(255), -1, 8, hierarchy, 0, Point() );

    imshow("drw", drawing);
    waitKey(0);
    return 0;
}

int findBiggestContour(vector<vector<Point> > contours){
    int indexOfBiggestContour = -1;
    int sizeOfBiggestContour = 0;
    for (int i = 0; i < contours.size(); i++){
        if(contours[i].size() > sizeOfBiggestContour){
            sizeOfBiggestContour = contours[i].size();
            indexOfBiggestContour = i;
        }
    }
    return indexOfBiggestContour;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T06:38:39.123

您应该使用`findContours`方法检测最大轮廓，然后使用填充参数 -1 绘制创建轮廓`drawContours`。这是有用的链接：[http ://docs.opencv.org/doc/tutorials/imgproc/shapeescriptors/find_contours/find_contours.html](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-05T18:21:50.833

为了提高输出的平滑度，或者换句话说，为了减少检测区域中的黑洞，请尝试对结果图像执行形态学操作。以下文档解释了 opencv 中的腐蚀和膨胀函数。 [http://docs.opencv.org/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html](http://docs.opencv.org/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)

# android - 设备 720x1280 的布局文件夹名称，如三星 Galaxy s3

> ID：12968577
> 
> 赞同：7
> 
> 时间：2012-10-19T06:30:37.473
> 
> 标签：android, android-layout

我之前做了一个应用程序，一切都很好，在开发时市场上只有两个设备银河笔记和三星nexus，现在分辨率为720 * 1280的设备在30左右，当我的应用程序在这些设备上运行时它们会去左角留下空白空间，创建的布局文件夹名称分别为 layout-small、layout-large、layout-normal、

据我所知 xlarge 适用于平板电脑，我的问题是具有 720*1280 分辨率的设备的布局文件夹名称是什么，它们的宽度是多少 dpi，就像在普通屏幕中宽度是 320dp 一样，在高清设备中是什么.

**编辑：**另一件事 sw360dp 在 ICS 上运行良好，果冻豆不会从中挑选资源。：/

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-19T06:51:46.923

尝试使用带有 /layout-sw360dp/ 和宽度 360dp 的文件夹名称

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T06:33:25.850

对于具有 720 * 1280 分辨率的设备，您可以使用`layout-sw720dp`文件夹

[官方文档](http://developer.android.com/guide/practices/screens_support.html)中提供了更多信息（请参阅配置示例）

> 为了帮助您针对不同类型的设备进行一些设计，以下是典型屏幕宽度的一些数字：
> 
> *   320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
> *   480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
> *   600dp：7 英寸平板电脑 (600x1024 mdpi)。
> *   720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。
> 
> 对于您希望进一步自定义 UI 以区分尺寸（例如 7 英寸和 10 英寸平板电脑）的其他情况，您可以定义其他最小宽度布局：
> 
> *   res/layout/main_activity.xml # 用于手机（小于 600dp 可用宽度）
> *   res/layout-sw600dp/main_activity.xml # 适用于 7 英寸平板电脑（600dp 宽和更大）
> *   res/layout-sw720dp/main_activity.xml # 适用于 10” 平板电脑（720dp 宽和更大）

# python - 将字符串和数字列表转换为字符串和浮点数

> ID：12968579
> 
> 赞同：5
> 
> 时间：2012-10-19T06:30:42.283
> 
> 标签：python

假设我有一个这样的列表：

```
a = ['hello','1','hi',2,'something','3'] 
```

我想在保留字符串的同时将列表中的数字转换为浮点数。

我写了这个：

```
for i in a:
    try:
        i = float(i)
    except ValueError:
        pass 
```

有没有更有效和更简洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:38:16.540

根据您已经尝试过的：

```
a = ['hello', '1.0', 'hi', 2, 'blah blah', '3']

def float_or_string(item):
    try:
        return float(item)
    except ValueError:
        return item

a = map(float_or_string, mylist) 
```

应该做的伎俩。我想说一个`try:... except:...`块既a）高效又b）整洁。正如halex指出的那样，`map()`不会更改列表，它会返回一个新列表，并且您设置`a`为等于它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:40:45.967

try/except 方式是 Pythonic 的方式，但如果你真的讨厌它，看看这是否符合你的目的：

```
a = ['hello','1','hi',2,'something','3']  

pattern = re.compile(r'^(-?\d+)(\.\d+)?') 

b = [float(item) if isinstance(item, str) and re.match(pattern, item) 
else item for item in a] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T06:35:48.830

您正在更改变量的值`i`-> 数组的内容`a`没有改变！如果你想改变数组中的值，你应该像这样实现它：

```
for index, value in enumerate(a):
    try :
        a[index] = float(value)
    except ValueError :
        pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T06:45:37.333

我的简短示例是什么：

```
a = ['hello','1','hi',2,'something','3']

for i, item in enumerate(a):
    if str(item).isdigit():
        a[i] = float(item)

print a 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T11:30:28.063

我认为这是简短而更好的方法：

```
a = ['hello','1','hi',2,'something','3']

for index,value in enumerate(a):

     if isinstance(value,int):

             a[index] = float(value)

print a 
```

输出是：['hello', '1', 'hi', 2.0, 'something', '3']

# linux - 在 Linux 中启用 Blender openCL 计算

> ID：12968582
> 
> 赞同：0
> 
> 时间：2012-10-19T06:30:54.497
> 
> 标签：linux, opencl, blender

我有一台装有 Ubuntu 12.10 的 HP Envy 4 1025tx 机器。

我的搅拌机似乎没有检测到专用的 G-Card ATI Radeon 7670m。但它确实在 Windows 上检测到它。我是否必须安装任何 linux 驱动程序，或者 blender 是否不完全支持 linux 上的 openCL。或者我应该手动重新编译代码？

我应该如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T02:32:30.777

打开终端并使用命令：CYCLES_OPENCL_TEST=true 这使 opencl 支持在搅拌机上打开

# android - Android 位图拜耳模式

> ID：12968589
> 
> 赞同：1
> 
> 时间：2012-10-19T06:31:44.047
> 
> 标签：android, rgb, android-imageview, bitmapfactory

我正在尝试使用 BitmapFactory 将 jpeg 加载到 Android 中，但是，图像的拜耳模式格式与 Android 想要的不同。具体来说，我有 BGGR 和 RGGB 格式的图像。RGGB 格式似乎没问题，但是，BGGR 似乎有问题。

Android 是否有将 BGGR 拜耳模式转换为 RGGB 的方法？我是否需要创建一个函数将两者都转换为 RGB？那里已经有这样的人了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:39:40.920

要求您尝试显示的文件格式的样本是否太多？因为就我而言，使用以下代码显示不同的 BGGR 拜耳模式过滤文件没有问题。代码加载并在图像视图中显示文件。

```
try {
ImageView imageView1 = (ImageView) findViewById(R.id.imageView1);
Resources resources = getApplicationContext().getResources();
InputStream is = resources.openRawResource(R.raw.test_bggr_bayer_file); // this is a bggr    bayer pattern filtered jpeg file.

Bitmap bm = BitmapFactory.decodeStream(is);
is.close();
imageView1.setImageBitmap(bm);
}
catch (IOException e) {} 
```

# android - XMPP 用户存在本身

> ID：12968593
> 
> 赞同：0
> 
> 时间：2012-10-19T06:32:13.073
> 
> 标签：android, xmpp, user-presence

在我的应用程序中有一个要求。我想获得登录用户本身的存在和模式我怎么能得到呢？？？

```
 Roster roster = connection.getRoster();
    Presence checkPresence = roster.getPresence(useritself); 
```

当我使用此代码获取登录用户的存在时，它总是让我不可用。

如何通过这种方式或任何其他方式获取登录用户本身的存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:01:13.467

是`useritself`裸 (localpart@domainpart) JID 吗？是否`useritself`在其他设备上登录？如果没有，根据服务器的不同，您可能不会收到自己的出席信息。此外，请确保在您*收到*所有存在信息后才进行此存在检查。实现这一点的最佳方法是为状态更改注册回调，而不是查询当前状态。

# android - 下载特定地图块以缓存在 OSMDroid 中

> ID：12968594
> 
> 赞同：10
> 
> 时间：2012-10-19T06:32:18.893
> 
> 标签：android, maps, osmdroid, offline-caching

我目前正在做一个学校项目，我正在尝试学习将 OSM 地图图块下载到手机本地内存/缓存中的技术，以便用户能够在离线时查看地图。

这是通过给出一个特定的位置来完成的，并且距离该位置在特定半径/距离内的地图图块将被下载到手机内存中（当有在线连接时）以供离线显示。

但是，我在理解 OSMDroid 的 API 时遇到了一些小麻烦。据我了解，所涉及的类似乎是：

*   [MapTileBase](http://android.martinpearman.co.uk/b4a/osmdroid/documentation/native_android_library/org/osmdroid/tileprovider/MapTileProviderBase.html)
*   [地图下载器](http://android.martinpearman.co.uk/b4a/osmdroid/documentation/native_android_library/org/osmdroid/tileprovider/modules/MapTileDownloader.html)
*   [IFilesystemCache](http://android.martinpearman.co.uk/b4a/osmdroid/documentation/native_android_library/org/osmdroid/tileprovider/modules/IFilesystemCache.html)

如果我错了，请纠正我。

此外，在 MapTileBase （我相信它是提供者）中， getMapTile 返回[android.graphics.drawable.Drawable](http://android.martinpearman.co.uk/b4a/osmdroid/documentation/native_android_library/org/osmdroid/tileprovider/MapTileProviderBase.html)。

这个Drawable类甚至与离线地图显示的概念有关吗？

希望有人能告诉我在哪里调用地图以将其下载到手机的内存中，以及我们如何编辑地图以显示诸如路线、图钉等界面项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:22:56.620

我没有确切的答案，因为您正在寻找一种在 MapView 尚未导航到的区域之外离线缓存的方法。内置的缓存支持在那里，但不完全是您想要的方式。

如果您计划缓存而不仅仅是提供自己的离线地图切片，您将需要在线下载功能。我会看看 MapTileDownloader，也许尝试实现你自己的版本。MapTileDownloader.TileLoader.loadTile() 方法采用 MapTileRequestState，我相信 MapTileProviderArray 在需要地图图块时会调用它。

如果您可以复制现有的 MapTileDownloader 的 TileLoader 功能，您可能可以注入您自己的相对 MapTileRequestState 或直接将 MapTile's 注入请求的那个。例如，使用名为 MapTileRequestState 的 TileLoader，检查它，找出如何构造新的 MapTileRequestState/MapTile 来表示当前视图之外的图块。这并不容易，因为您必须处理不同的缩放级别，并且根据缩放级别，半径应该更小，等等......较低的缩放级别 18 将具有更大的平铺半径更高的 10。

就我个人而言，我最近正在努力尝试 100% 离线工作，所以我没有任何示例代码可以提供帮助。祝你好运，尽管已经过去了几个月。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T13:04:16.570

首先，正确的来源 [https://github.com/osmdroid/osmdroid](https://github.com/osmdroid/osmdroid)

有一些 wiki 文章会有所帮助，尤其是离线地图图块文章。简而言之，使用 MOBAC 或 osmdroid 提供的工具。OSMBonuspack 还有一个工具可以在设备上执行相同的任务。

地图瓦片实际上是使用此类下载的 [https://github.com/osmdroid/osmdroid/blob/master/osmdroid-android/src/main/java/org/osmdroid/tileprovider/modules/MapTileDownloader.java](https://github.com/osmdroid/osmdroid/blob/master/osmdroid-android/src/main/java/org/osmdroid/tileprovider/modules/MapTileDownloader.java)

# shell - 在 W32 Emacs 上，为什么 Cygwin 或 MinGW bash 中的 Ctrl-D 会发出重复的 EOF？

> ID：12968595
> 
> 赞同：1
> 
> 时间：2012-10-19T06:32:19.927
> 
> 标签：shell, emacs, cygwin, eof, emacsw32

我将 W32 GNU Emacs 24.1.50.1 与 Cygwin bash 3.2.51 一起使用。我知道这种组合很麻烦（参见[EmacsWiki](http://emacswiki.org/emacs/NTEmacsWithCygwin)和[Cygwin 列表](http://cygwin.com/ml/cygwin/2012-05/msg00114.html)）。但是，我现在要解决的问题不仅限于 Cygwin。我也遇到了 MinGW 的问题。所以，问题是：

在 Emacs 中，`M-x shell`如果您已经设置了变量`shell-file-name`并`explicit-bash-args`适当地设置了一个 shell（参见例如[这里](https://stackoverflow.com/questions/235254/how-can-i-run-cygwin-bash-shell-from-within-emacs)）。然后发出一个需要标准输入的命令，例如`cat`. 要取消，`cat`通常可以键入 Ctrl-D*一次*，然后返回到 shell 提示符。在 W32 emacs 中，当您执行此操作时（甚至当您显式发出`M-x comint-send-eof`）时，cat 命令将退出*并且*bash shell 也会退出。

我试图通过将环境变量设置为 5 来增加 bash 的“弹性” `IGNOREEOF`，但随后单个 Ctrl-D 会导致以下输出

```
$ Use "exit" to leave the shell.
$ Use "exit" to leave the shell.
$ Use "exit" to leave the shell.
$ Use "exit" to leave the shell.
$ Use "exit" to leave the shell.
$ exit

Process shell finished 
```

当然，bash 又退出了。仅当 shell 在 W32 emacs 中运行时才会出现此问题 - Cygwin bash 通过 Cygwin tty 窗口和 MinGW bash 通过其自己的 MinTTY 工作正常。

为什么在 W32 Emacs 中会发生这种情况，我如何`cat`在使用 W32 Emacs 时退出正在运行的子命令（例如）而不退出 bash shell？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:45:30.793

W32 世界中并不真正存在像您期望的那样的 tty 概念。如果您想看到这种 Unixy 行为，您不仅需要运行 Cygwin 程序，而且该 Cygwin 程序还需要与另一个 Cygwin 程序（Emacs，终端，你的名字）对话。IOW 你只能使用 Cygwin 版本的 Emacs 来获得它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:01:42.590

通常您可以使用 Ctrl-Z 和 Ctrl-D。看看这个注释：

[http://ignaciopp.wordpress.com/2009/07/02/emacs-shell-workaround-for-killing-input-in-windows-version/](http://ignaciopp.wordpress.com/2009/07/02/emacs-shell-workaround-for-killing-input-in-windows-version/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T17:49:24.970

[MS Windows](http://www.gnu.org/software/emacs/windows/Sub_002dprocesses.html#index-EOF_002c-sending-to-subprocesses-232)的GNU Emacs 常见问题解答指出，shell 缓冲区中的任何子进程都存在此问题。所以它也会影响 DOS 命令行（当然你通常不会在 DOS 中使用 Ctrl-D，所以它并不那么明显）。常见问题解答中没有建议解决方法，所以我猜测没有简单的解决方法。

# php - 当另一个表中没有更多行时，如何从一个表中删除一行

> ID：12968603
> 
> 赞同：0
> 
> 时间：2012-10-19T06:32:48.173
> 
> 标签：php, mysql, delete-row

我想知道检查一个数据表的最佳方法，当不再存在与 WHERE 子句匹配的行时，从另一个表中删除一行。

我已经尝试过自己，但是对于 6 个查询和嵌套的 if/else，它变得太麻烦了，并且无法将其完成。

我以前从未使用过 SQL 连接，因此示例将帮助我理解响应。

我有一个设备表，有一个带有设备和密码的主表。

上表中还有第二个表，其中包含设备的多行，以及一系列序列号。

当第二个表不再包含主表中列出的任何序列号时，我想要包含主表中的设备和密码的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:37:05.490

如果您的意思是当您有餐桌客户和餐桌订单时，如果客户没有订单，请删除他们？然后你可以使用子选择：

```
delete from customer where customerid not in (select customerid from order) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:39:32.353

你可以做一个 DELETE 语句，如

```
DELETE FROM masterTable WHERE ID NOT IN (SELECT masterTableID FROM secondaryTable) 
```

这将从主表中删除在第二个表中没有任何引用的所有行。这也意味着它不会只删除一行，而是所有匹配的行。您唯一需要的是第二个表中的每一行都引用主表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:45:24.410

```
DELETE table_devices
FROM table_devices
left JOIN serial ON table_devices.id= serial.device_id
WHERE serial.device_id is null 
```

# jquery - jQuery AJAX Response Set Cookie Header

> ID：12968611
> 
> 赞同：5
> 
> 时间：2012-10-19T06:33:32.433
> 
> 标签：jquery, cookies, httpresponse, jquery-cookie

I have a project which using a a REST API. Here when Isend a login request, they are sending me the response as JSON containg some data. Along with that in Response Header

```
Access-Control-Allow-Origin:*
Connection:keep-alive
Content-Length:239
Content-Type:application/json
Date:Fri, 19 Oct 2012 06:28:12 GMT
Server:Apache/2.2.22 (Amazon)
Set-Cookie:session=username; Path=/ 
```

Here we have a `Set-Cookie` , but this cookie is not setting. I need this cookie to be setted, because for any other API access, the server will check for this cookie.

How can I resolve this Issue? What is the solution for jQuery AJAX response Header Set-Cookie method?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T06:55:25.123

You can get headers from XMLHTTPRequest. This may help. Let me know if this is working.

```
$.ajax({
   type: 'POST',
   url:'url.do',
   data: formData,
   success: function(data, textStatus, XMLHttpRequest){
        var cookietoSet=XMLHttpRequest.getResponseHeader('Set-Cookie');

        Set_Cookie(cookietoSet.split('=')[0],cookietoSet.split('=')[1],expires, path, domain, secure)//change as per ur needs
   }
   error: function (XMLHttpRequest, textStatus, errorThrown) {
        alert(XMLHttpRequest.getResponseHeader('some_header'));
   }
  });

function Set_Cookie( name, value, expires, path, domain, secure )
{
// set time, it's in milliseconds
var today = new Date();
today.setTime( today.getTime() );

/*
if the expires variable is set, make the correct
expires time, the current script below will set
it for x number of days, to make it for hours,
delete * 24, for minutes, delete * 60 * 24
*/
if ( expires )
{
expires = expires * 1000 * 60 * 60 * 24;
}
var expires_date = new Date( today.getTime() + (expires) );

document.cookie = name + "=" +escape( value ) +
( ( expires ) ? ";expires=" + expires_date.toGMTString() : "" ) +
( ( path ) ? ";path=" + path : "" ) +
( ( domain ) ? ";domain=" + domain : "" ) +
( ( secure ) ? ";secure" : "" );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T08:58:50.713

I think the real issue here is that if you have your browser's privacy/cookie settings set to paranoid then some browsers (at least FF & IE) seem to ignore XHR based Set-Cookie headers.

Here's a link to some FF help that may be useful for your users. [http://support.mozilla.org/en-US/kb/fix-login-issues-on-websites-require-passwords](http://support.mozilla.org/en-US/kb/fix-login-issues-on-websites-require-passwords)

I wish there were a better answer/workaround for this 8(

# c++ - 为什么是 0022FF08 + sizeof(int) = 0022FF0C 而不是 0022FF0A？

> ID：12968615
> 
> 赞同：-4
> 
> 时间：2012-10-19T06:33:51.133
> 
> 标签：c++, c, hex, codeblocks

`char`是 1 字节增量。`int`是 2 字节增量。`float`是 4 字节增量。`double`为 8 字节增量。为什么 int 在这里增加**4 个字节**？

![十六进制增量程序](../Images/7877452d4fe901955700c9706b8c4492.png)

![十六进制增量输出](../Images/b84031433aaa6ea753d4c1667d9e5048.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T06:38:15.150

试试这个：

```
int i;
...
printf("%d",sizeof(i)); 
```

你得到了什么？最有可能 4\. 为什么？因为您的 CPU 很可能是 32 位的。2 字节 int 在较旧的 CPU 上是正确的...

永远不要根据“应该”来假设变量的大小，始终使用 sizeof()！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:37:23.730

`int`是 32 位，所以`float`. 这里，`double`是 64 位。

在许多 16 位系统上，`int`是 16 位。C 的`int`目的是使其编译为的系统最自然的大小。不要求`int`跨系统的大小相同。

# android - 如何上传具有相对路径的文件

> ID：12968618
> 
> 赞同：1
> 
> 时间：2012-10-19T06:34:00.890
> 
> 标签：android, http-post

> **可能重复：**
> [java.lang.IllegalArgumentException：包含路径分隔符](https://stackoverflow.com/questions/5963535/java-lang-illegalargumentexception-contains-a-path-separator)

我正在尝试从我的 sdcard 上传文件，文件路径 url="sdcard/Folder/test.doc"。我正在使用以下代码上传到服务器。

```
String url = path.getText().toString();
FileInputStream fis = openFileInput(url); 
```

它给了我错误：

```
FATAL EXCEPTION: main 10-19 01:19:39.480: E/AndroidRuntime(7459): java.lang.IllegalArgumentException: File /sdcard/download/ABC.pdf contains a path separator. 
```

有人可以告诉我如何完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:04:55.930

`openFileInput(url);`无法打开存储在 sdcard 上的文件。此方法用于*打开与此 Context 的应用程序包关联的私有文件以供读取。*

您必须使用`new File(path)`方法来创建或打开文件。然后使用适当的 InputStream。可以参考下面的语法..

```
File dir = Environment.getExternalStorageDirectory();
File yourFile = new File(dir, "path/to/the/file/inside/the/sdcard.ext"); 
```

# c# - 如何在两个动态生成的组合框上使用不同的值

> ID：12968622
> 
> 赞同：0
> 
> 时间：2012-10-19T06:34:05.553
> 
> 标签：c#, c++, .net, wpf, binding

我是一名 C++ 开发人员，最近开始研究 WPF。我很抱歉这个奇怪的标题，因为我不知道该放什么。在我的应用程序中，我需要动态生成 2 个包含按钮、标签、文本框、组合框等的组合框。一旦完成，我需要对这些控件执行一些操作。

我有 2 个 xaml 文件`PCMGenView.xaml`，`PCMGenWidgetView.xaml`其中`PCMGenWidgetView.xaml`文件具有组框并被添加到`PCMGenView.xaml`文件中。我还有 2 个视图模型类和一个模型类。好吧，让我向您展示我是如何做到的：

**PCMGenView.xaml**

```
<UserControl.Resources>
    <DataTemplate x:Key="PGenDataTemplate">
        <WrapPanel>
            <TextBlock Text="{Binding Description}" Margin="5,5,0,0"/>
            <local:PCMGenWidgetView Margin="5,10,5,5"/>
        </WrapPanel>
    </DataTemplate>
</UserControl.Resources>

<Grid>
    <ItemsControl ItemTemplate="{StaticResource PGenDataTemplate}" ItemsSource="{Binding PGenWidgets}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
</Grid> 
```

**PCMGenWidgetView.xaml：**

```
<Grid>
    <GroupBox Height="Auto" HorizontalAlignment="Stretch" Margin="10" Name="groupBox1" VerticalAlignment="Stretch" Width="Auto">
        <Grid >
              <ComboBox Grid.Column="1" ItemsSource="{Binding PreScalarList}" SelectedItem="{Binding SelectedPreScalarList, Mode=OneWayToSource}" SelectedIndex="0" Height="23" HorizontalAlignment="Center" Margin="0,0,0,0" Name="PCMGenControlCombo" VerticalAlignment="Center" Width="110" /> 
              // Radio Button, Buttons etc are present too                          
        </Grid>
    </GroupBox>
</Grid> 
```

**PCMGenWidgetView.xaml.cs：**

```
public partial class PCMGenWidgetView : UserControl
{
    PCMGenWidgetViewModel mPCMGenWidgetViewModel = new PCMGenWidgetViewModel();

    public PCMGenWidgetView()
    {
        InitializeComponent();
        this.DataContext = mPCMGenWidgetViewModel;            
    }
} 
```

**PCMGenViewModel：**

```
public ObservableCollection<PCMGenWidgetViewModel> PGenWidgets { get; set; }

    public PCMGenViewModel()
    {
        PGenWidgets = new ObservableCollection<PCMGenWidgetViewModel>();
        PGenWidgets.Add(new PCMGenWidgetViewModel { Description = "PCM Generator 1", ID = 0 });
        PGenWidgets.Add(new PCMGenWidgetViewModel { Description = "PCM Generator 2", ID = 1 });            
    } 
```

**PCMGenWidgetViewModel：**

```
private string _description;
    public string Description
    {
        get
        {
            return _description;
        }

        set
        {
            _description = value;
            OnPropertyChanged("Description");
        }
    }

public ObservableCollection<string> PreScalarList
    {
        get { return _PreScalarList; }
        set
        {
            _PreScalarList = value;
            OnPropertyChanged("PreScalarList");
        }
    }

    private string _selectedPreScalarList;
    public string SelectedPreScalarList
    {
        get { return _selectedPreScalarList; }
        set
        {
            _selectedPreScalarList = value;
            int Listvalue = PreScalarList.IndexOf(_selectedPreScalarList);
            int ListFinalVal = Listvalue + 1;
            SelectedPreScalar(ListFinalVal);
            OnPropertyChanged("SelectedPreScalarList");
        }
    }

    private int _ID;
    public int ID
    {
        get
        {
            return _ID;
        }

        set
        {
            _ID = value;
            OnPropertyChanged("ID");
        }
    }

    public void SelectedPreScalar(int Select)
    {
        int bitMask;
        bitMask = (0 == ID) ? 0xCF : 0x3F;  // ID always shows 0
        m_controlRegs[0] &= Convert.ToByte(bitMask);
        //m_refClock[0] = Convert.ToByte(18432000 * 2);                                             
    } 
```

现在这在启动时给了我 2 个组合框 :) 在我的组合框中，我有`A,B,C,D`项目。查看组合框绑定，了解如何从组合框中检索所选值。在这里，我想对所有这些控件执行相同的操作，但如果值不同。好吧，我的意思是说我在 C++ 应用程序中所做的这样的话：

```
for( i = 0;  i < 2; i++) //Constructor: Here 2 is used because we have 2 groupboxes
{
    m_pcmGenPrescalar[i] = new ComboBox(String::empty);
    m_pcmGenPrescalar[i]->addItem(String(T("div 1")), 1);
    m_pcmGenPrescalar[i]->addItem(String(T("div 15")), 2);
    m_pcmGenPrescalar[i]->addItem(String(T("div 255")), 3);
    m_pcmGenPrescalar[i]->addItem(String(T("div 65535")), 4);
    m_pcmGenPrescalar[i]->setEditableText(false);
    m_pcmGenPrescalar[i]->setSelectedId(1, true);
    m_pcmGenPrescalar[i]->addListener(this);
    addAndMakeVisible(m_pcmGenPrescalar[i]);
}

for( i = 0;  i < 2; i++) //Here 2 is used because we have 2 groupboxes
{       
    if(m_pcmGenPrescalar[i] == comboBox) //PreScalar Combobox
    {
        unsigned char bitMask = (0 == i) ? 0xCF : 0x3F; Takes the value of i
        m_controlRegs[0] &= bitMask;
        m_refClock[i] = 18432000 * 2;
    } 
```

如果您注意到上面的代码，您会发现`for loop`两次创建组合框，并根据选择的组合框取值`i`。即，如果第一个组合框选择被更改，则`unsigned char bitMask = (0 == i) ? 0xCF : 0x3F;`变为`unsigned char bitMask = (0 == 0) ? 0xCF : 0x3F;`如果第二个，`unsigned char bitMask = (0 == 1) ? 0xCF : 0x3F;`

这是我的查询。我怎样才能知道我使用了哪个组合框。我使用的是 PCM Gen 1 组合还是 PCM Gen 2 组合？这对我来说是一个棘手的情况。请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:49:02.680

使用 ID 属性：

```
 public int ID {get;set;}
    public void SelectedPreScalar(int Select)
    {
        int bitMask;
        bitMask = (0 == ID) ? 0xCF : 0x3F; 
        m_controlRegs[0] &= Convert.ToByte(bitMask);
        m_refClock[0] = Convert.ToByte(18432000 * 2); 
    } 
```

但您也可以使用在实例化时设置的 BitMask-Property：

```
 public string BitMask {get;set;}
    public void SelectedPreScalar(int Select)
    {
        m_controlRegs[0] &= Convert.ToByte(BitMask);
        m_refClock[0] = Convert.ToByte(18432000 * 2); 
    } 
```

根据您的决定，您的 PCGenViewModel 构造函数可能如下所示：

```
 public PCMGenViewModel()
    {
        PGenWidgets = new ObservableCollection<PCMGenWidgetViewModel>();
        PGenWidgets.Add(new PCMGenWidgetViewModel { Description = "PCM Generator 1", BitMask="0xCF" });
        PGenWidgets.Add(new PCMGenWidgetViewModel { Description = "PCM Generator 2", BitMask="0x3F" });            
    } 
```

或者

```
 public PCMGenViewModel()
    {
        PGenWidgets = new ObservableCollection<PCMGenWidgetViewModel>();
        PGenWidgets.Add(new PCMGenWidgetViewModel { Description = "PCM Generator 1", ID=0 });
        PGenWidgets.Add(new PCMGenWidgetViewModel { Description = "PCM Generator 2", ID=1 });            
    } 
```

我建议使用第二个建议，因为如果您添加第三个组合框，则不必更改 SelectedPreScalar 方法。

# c# - 将 DLL 包含到 Exe 中

> ID：12968635
> 
> 赞同：0
> 
> 时间：2012-10-19T06:34:41.527
> 
> 标签：c#

我是**C#**新手。我不是一个好的程序员，但我参与过一些**Delphi7**中的项目。在德尔福有一种选择；编译类文件以创建**.dcu**。这些**.dcu**可以在没有实际代码的情况下与 Delphi 中的任何其他项目一起使用，并且在构建**.dcu**文件之后不需要将其提供给最终用户。

现在我的实际问题，

*有什么方法可以从我的 C# 类创建一些编译文件并将该编译单元与 C# 中的其他项目一起使用？*

我已经尝试创建 dll 并使用。好主意，但我不想提供除配置文件和可执行文件之外的任何其他文件。因为，我创建了需要与应用程序一起提供的 dll。

我还尝试创建一个应用程序设置，它可以一起构建可执行文件、配置文件和 dll。执行时，它会将自身提取到 %temp% 文件夹中并仅从那里执行。所以，在这种情况下，我无法设置配置文件的值。

又是同一个问题，

*有什么方法可以从我的 C# 类创建一些编译文件并将该编译单元与 C# 中的其他项目一起使用？*

请提出解决方案

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:43:18.127

把它变成一个`.dll`. 然后`.dll`通过单击`References`然后选择将其作为参考添加到您想要的任何项目`Add Reference`中，然后在`Browse`选项卡中导航到您的`.dll`并选择添加。您现在可以访问了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:38:44.763

基本上，您需要将所有 DLL 和 EXE 组合成一个 EXE？您可以使用[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?id=17630)。
有关更多选项，请查看以下问题：[Can a .NET windows application becompressed into a single .exe?](https://stackoverflow.com/questions/126611/net-windows-application-can-it-be-compressed-into-a-single-exe)

# c - 检查字符指针是否具有字符串文字或不确定值

> ID：12968637
> 
> 赞同：0
> 
> 时间：2012-10-19T06:34:47.867
> 
> 标签：c, pointers

我有一个关于字符指针的问题。

可以说我有：

```
char * x = malloc(len); 
```

以上也不返回NULL。

现在根据条件：

```
if (<condition>)
  strncpy (x,y,len); 
```

如何检查是否`x`包含任何字符串文字？因为那时我需要做：

```
strncpy(z,x,len); 
```

任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:40:21.533

> 如何检查是否`x`包含任何字符串文字？

一般来说你不能。C 不保证此处使用的地址，因此您无法可靠地确定它们的来源。

但是您可能以错误的方式解决了这个问题：为什么`x`首先存在对起源的这种混淆？如果您只是想确保该值始终为`malloc`'d，只需始终`malloc`使用它，而不是将直接地址存储到字符串文字中。

（我觉得你的复制目标应该取决于值的来源通常很奇怪......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:08:42.620

猜猜这是一个家庭作业问题。无论如何，从 malloc 的手册页中，

```
malloc() allocates size bytes and returns a pointer to the allocated memory.  The memory is not cleared.  If size is 0, then malloc() returns either  NULL,  or  a  unique pointer value that can later be successfully passed to free(). 
```

在大多数情况下，当`malloc`失败时`NULL`返回，因此可以执行检查。

在你的问题中，我很舒服地假设这`if x contains any string literals ?`意味着你想检查是否`strncpy`成功。`strncpy`默认情况下返回一个指向目标的指针。因此，如果 malloc 返回 NULL，您肯定会陷入分段错误。

一种简单的方法是检查 x 的 strlen 是否等于 len。

strncpy 是一个很脏的函数，你的代码很容易出现很多错误！

man 是新手程序员最好的朋友。我想你应该在发布问题之前仔细阅读它们并做更多的研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:05:03.900

我从你的问题中了解到，你想检查`strncpy`函数是否成功返回。答案是::

> strncpy 不返回任何值来指示错误

所以，我认为您必须查看`printf`变​​量`x`是否包含任何字符串文字并且`strncpy`是否成功。

**编辑::** 试试这个：

```
int isZero ;
char * x = malloc(len);
memset(x, 0, len) ;
if (<condition>)
    strncpy ( x, y, strlen(y) + 1);

isZero = strlen(x) ; /* if not 0, you know something is copied */
if( isZero != 0 )
    strncpy( z, x, (strlen(x) + 1) ); 
```

# jquery - 我的网站在移动设备上无法正常运行，但在桌面版本中运行良好

> ID：12968639
> 
> 赞同：1
> 
> 时间：2012-10-19T06:35:00.920
> 
> 标签：jquery, html, mobile, responsive-design

实际上，我的网站内容与背景图片的工作方向相反。所以我使用 j 查询来计算每个部分的高度，并将我的主要部分定位在负顶部位置。当我用鼠标滚轮滚动内容时，它会从上到下，背景从下到上移动。但是在移动端它不起作用。我已经根据内容和窗口高度在运行时为每个主要部分分配高度，然后窗口高度更大。

我将我的概念与 2 div 一起使用。一个用于背景，另一个用于内容。为此，我计算内容的总高度并将内容 div 移动为负数，但在移动设备中它无法正常工作。

```
$("div.content_scroll").css({
            'top': -(totalHeight + topmaindiv - ($(window).height() - $("#main-nav").height())) + "px",
    }); 
```

当我在移动设备中滚动内容时；没有向下移动

任何人都可以解决这个问题

# android - 在android中解析日期强制应用程序关闭

> ID：12968641
> 
> 赞同：0
> 
> 时间：2012-10-19T06:35:03.557
> 
> 标签：android, parsing, date, format, formatter

我有这个代码：

```
aktiv_date = dateaktiv.getText().toString();
SimpleDateFormat formatter = new SimpleDateFormat("dd.MM.yyyy");
try {
     aktiv_dat = formatter.parse(aktiv_date);
    } catch (java.text.ParseException e) {
     e.printStackTrace();
    } 
```

当我给它一个像：12101989 或类似的数字时，它不具有 dd.MM.yyyy 格式，程序崩溃，因为它说来自 aktiv_date 的数据无法解析：

```
 aktiv_dat = formatter.parse(aktiv_date); 
```

我该怎么做才能让它不崩溃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T06:43:00.510

我怀疑问题是你正在捕获`ParseException`，转储异常，*然后继续，好像没有出错一样*。

您没有显示`aktiv_dat`声明的位置，但我怀疑它的值`null`是否解析失败......因此`NullPointerException`. 打印堆栈跟踪然后继续几乎*永远不是*处理异常的正确方法。你应该考虑你希望你的程序在面对无效数据时如何表现——你想使用默认日期，你想放弃那个操作，等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:46:41.047

你可以尝试像这样编辑：

SimpleDateFormat 格式化程序 = new SimpleDateFormat("ddMMyyyy");

# ios - 在 UILabel 之后放置一个 UIImage

> ID：12968643
> 
> 赞同：0
> 
> 时间：2012-10-19T06:35:05.513
> 
> 标签：ios, xcode, interface-builder

我想要一个最大宽度为 100 的 UILabel，然后是一个 UIImage，我该如何在界面生成器中做到这一点？我希望如果文本较短，则标签小于 100，但 UIImage 就在标签后面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-06T09:42:57.527

您可以使用iOS 7 提供的**NSTextAttachment**类。无需使用框架。

```
NSTextAttachment *attachment = [[NSTextAttachment alloc] init];
attachment.image = [UIImage imageNamed:@"image.png"];
NSAttributedString *attachmentAttrString = [NSAttributedString attributedStringWithAttachment:attachment];
NSMutableAttributedString *str= [[NSMutableAttributedString alloc] initWithString:@"hello"];
[str appendAttributedString:attachmentAttrString];
myLabel.attributedText = str; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:00:24.600

你可以用这样的代码来做到这一点：

首先初始化标签和imageView

```
_label = [[UILabel alloc] initWithFrame:CGRectZero];
_imageView = [[UIImageView alloc] initWithFrame:CGRectMake(label.frame.origin.x + label.frame.size.width, label.frame.origin.y, 30, 30)]; 
```

然后当标签有文本时，您可以计算标签框架的宽度

```
CGSize size = [_label.text sizeWithFont:[UIFont boldSystemFontOfSize:15]];
CGFloat width = size.width > 100 ? 100 : size.width;
CGFloat height = size.height;
_label.frame = CGRectMake(0, 0, width, height); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-07T11:47:41.573

我想添加我的快速解决方案：

```
 let label = UILabel()

    let attributedString = NSMutableAttributedString(string: "Hello".uppercaseString)
    let attachment = NSTextAttachment()
    attachment.image = UIImage(named:"hello")

    attributedString.appendAttributedString(NSAttributedString(attachment:attachment))

//  use the following method to insert the image at any index
//  attributedString.insertAttributedString(NSAttributedString(attachment:attachment), atIndex: 0)

    label.attributedText = attributedString 
```

# audio - 使用 libav/ffmpeg 正确打开音频文件

> ID：12968650
> 
> 赞同：2
> 
> 时间：2012-10-19T06:35:35.707
> 
> 标签：audio, ffmpeg, libavcodec, libav, libavformat

我正在尝试使用 ffmpeg 解码来自各种文件格式的音频样本。因此，我根据本次讨论中的代码开始了一些实验：[How to decode audio via FFmpeg in Android](https://stackoverflow.com/questions/5367595/how-to-decode-audio-via-ffmpeg-in-android)。[我使用最新的 FFMPEG 版本（1.0）并使用https://github.com/halfninja/android-ffmpeg-x264](https://github.com/halfninja/android-ffmpeg-x264)编译它

```
AVFormatContext * pFormatCtx;

avcodec_register_all();
av_register_all();

int lError;
if ((lError = avformat_open_input(&pFormatCtx, filename, NULL, 0))
        != 0) {
    LOGE("Error open source file: %d", lError);
    return;
}
if ((lError = avformat_find_stream_info(pFormatCtx, 0)) < 0) {
    LOGE("Error find stream information: %d (Streams: %d)", lError, pFormatCtx->nb_streams);
    return;
}
LOGE("audio format: %s", pFormatCtx->iformat->name);
LOGE("audio bitrate: %d", pFormatCtx->bit_rate);
audioStreamIndex = av_find_best_stream(pFormatCtx, AVMEDIA_TYPE_AUDIO,
        -1, -1, &codec, 0);

//if (audioStreamIndex < 0 || audioStreamIndex >= pFormatCtx->nb_streams)
//  audioStreamIndex = 0;

LOGE("Stream: %d (total: %d)", audioStreamIndex, pFormatCtx->nb_streams);
LOGE("audio codec: %s", codec->name); 
```

FFMPEG 使用 enable-decoder=mp1/mp2/mp3/ogg/vorbis/wav/aac/theora 编译，没有任何外部库（例如 libmp3lame、libtheora 等）

打开 mp3 和 wav 文件可以毫无问题地生成以下输出，例如 mp3：

> 音频格式：mp3
> 
> 音频比特率：256121
> 
> 流：0（总数：1）
> 
> 音频编解码器：mp3

但是当我尝试打开一个 ogg 文件时，我得到了这个：

> 错误查找流信息：-1（流：1）

When I manually set `audioStreamIndex=0` and comment out the return statement:

> Error find stream information: -1 (Streams: 1)
> 
> audio format: mp3
> 
> audio bitrate: 0
> 
> stream: 0 (total: 1)
> 
> audio codec: mp3

For m4a (AAC) I get this:

> audio format: mp3
> 
> audio bitrate: 288000
> 
> stream: 0 (total: 1)
> 
> audio codec: mp1

but later it fails in `avcodec_decode_audio3`.

I also tried to manually force a format without success:

```
AVInputFormat *pForceFormat= av_find_input_format("ogg");
if ((lError = avformat_open_input(&pFormatCtx, filename, pForceFormat, 0))
// continue 
```

Is there something wrong with the loading code which makes it only work with mp3 and wav and fails for other formats?

Regards,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:26:19.493

The problem was a missing demuxer.

# android - 如何在 GLWallpaper 服务中加载资源或资产

> ID：12968658
> 
> 赞同：5
> 
> 时间：2012-10-19T06:36:22.200
> 
> 标签：android, opengl-es, live-wallpaper

我正在尝试**使用`OpenGL`壁纸服务**开发 Android 动态壁纸，我可以创建动态壁纸，就像 Mark F Guerra 的这个[例子](https://github.com/markfguerra/GLWallpaperExample)一样，但我想在我的壁纸中添加一些精灵动画。

我已经`OpenGL ES`在另一个项目中创建了精灵动画。我只想在动态壁纸项目中重新创建我的动画。

但是在我的动态壁纸项目中，我**无法`Context`从资产或资源中获取和加载我的图像**

任何有关在使用**服务时****加载资源或资产文件的***建议或示例代码或链接*都将非常有帮助。**`glwallpaper`**

欢迎所有建议和/或示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:25:01.853

将上下文从引擎传递到渲染器。然后，这里有一些示例代码来加载资产。即resourceID 是您的R.drawable.xxx 位图。我在我制作的纹理图集类中有这个，所以有些东西可能没有完全包含在方法中。例如，我可能用来加载位图的选项将包括 inscaled = false，但任何适合您的选项。例如，我还修改了它以删除我的错误处理。

```
/**
 * Load the resource and push it to the gpu memory, setup default values
 * @param gl
 * @param context
 * @param resourceID
 * @return glTextureID
 * 
 */
public int loadFromContext(GL10 gl, Context context, int resourceID) {
    mResourceID = resourceID;
    Bitmap bmp = BitmapFactory.decodeResource(context.getResources(), resourceID, sBitmapOptions);
    sourceWidth = bmp.getWidth();
    sourceHeight = bmp.getHeight();
    gl.glGenTextures(1, mGLTextures, 0);
    mGLTextureID = mGLTextures[0];

    // bind and set min and mag scaling to bilinear
    gl.glBindTexture(GL10.GL_TEXTURE_2D, mGLTextureID);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_LINEAR);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    // repeat by default
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);

    // upload bmp to video memory
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bmp, 0);

    // check error
    int error = gl.glGetError();
    if (error != GL10.GL_NO_ERROR) {
        // cleanup
        bmp.recycle();
        bmp = null;
        mLoaded = false;
            // error handling here
    } else {

        // unbind.
        gl.glBindTexture(GL10.GL_TEXTURE_2D, 0);
        bmp.recycle();
        bmp = null;
        mLoaded = true;
        mDirty = true;

      } 
      return mGLTextureID;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:50:54.440

我们可以使用如下所示的上下文..

```
in wallpaper service class: 
------------------- 
renderer = new GlRenderer(this); 

in renderer class: 
---------------- 
private Context context; 

public GlRenderer(Context context) { 
this.context = context; 
```

`this`我们可以使用`getAssets()`or作为参数来代替`getResources()`renderer 。
使用`getAssets()`时，您可以获取保存在 assets 文件夹中的文件，通过使用`getResources()`，您可以获取放置在项目的资源文件夹中的文件。

# android - 文件处理保存、编辑、查看和删除数据

> ID：12968665
> 
> 赞同：1
> 
> 时间：2012-10-19T06:36:50.070
> 
> 标签：android, file-handling

我正在编写一个程序，要求用户输入姓名、年龄和国家，并将数据保存在文件中。用户应该能够删除、编辑和查看数据。

输出应该是这样的。

![在此处输入图像描述](../Images/9ece37821d2bee424f41076286870247.png)

当我保存数据时，它存储在一个文本文件中。例如，用户输入以下内容。姓名：John Wall，年龄：23​​，国家：加拿大，然后它将保存在文本文件中为“John 23 Country”。我怎样才能在他们的特定文本框中加载这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:44:10.043

你有几个选择

1.  将内容写入数据库。编写 SQL lite 的教程应该可以帮助您入门 [1]

2.  如果信息用于轻量级存储（假设这只是一个条目），请使用共享首选项/基于文件的持久性 [2]

[1] - [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

[2] - [http://www.vogella.com/articles/AndroidFileBasedPersistence/article.html](http://www.vogella.com/articles/AndroidFileBasedPersistence/article.html)

# android - 无法单独获取选定的叠加值

> ID：12968670
> 
> 赞同：1
> 
> 时间：2012-10-19T06:37:12.107
> 
> 标签：android, google-maps, android-alertdialog, alerts

我正在使用一个面向谷歌地图的 android 项目现在我在这个类中遇到了一个问题我在这个类中我使用某些覆盖来标记最近的地方当我们触摸特定覆盖时它会显示一个包含名称和引用的警报框现在我正在检索现在使用getsnipet（）方法进行引用我不想显示警报对话框但是当我禁用那个东西时我无法获得参考任何人都可以帮助我修复这个错误，这是我的代码......

```
public class PlacesMapActivity extends MapActivity {
    // Nearest places
    PlacesList nearPlaces;

    // Map view
    MapView mapView;

    // Map overlay items
    List<Overlay> mapOverlays;

    AddItemizedOverlay itemizedOverlay;

    GeoPoint geoPoint;
    // Map controllers
    MapController mc;

    double latitude;
    double longitude;
    OverlayItem overlayitem;

    String p_u_name;
    Place reference;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_places);

        // Getting intent data
        Intent i = getIntent();

        p_u_name=i.getStringExtra("p_u_name");
        reference = (Place) i.getSerializableExtra("place_reference");

        i.putExtra("p_u_name",p_u_name);

        // Users current geo location
        String user_latitude = i.getStringExtra("user_latitude");
        String user_longitude = i.getStringExtra("user_longitude");

        System.out.println("sarath"+user_latitude + user_longitude);

        // Nearplaces list
        nearPlaces = (PlacesList) i.getSerializableExtra("near_places");

        mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);

        mapOverlays = mapView.getOverlays();

        // Geopoint to place on map
        geoPoint = new GeoPoint((int) (Double.parseDouble(user_latitude) * 1E6),
                (int) (Double.parseDouble(user_longitude) * 1E6));

        // Drawable marker icon
        Drawable drawable_user = this.getResources()
                .getDrawable(R.drawable.mark_red);

        itemizedOverlay = new AddItemizedOverlay(drawable_user, this);

        // Map overlay item
        overlayitem = new OverlayItem(geoPoint, "Your Location",
                "That is you!");

        itemizedOverlay.addOverlay(overlayitem);

        mapOverlays.add(itemizedOverlay);
        itemizedOverlay.populateNow();

        // Drawable marker icon
        Drawable drawable = this.getResources()
                .getDrawable(R.drawable.mark_blue);

        itemizedOverlay = new AddItemizedOverlay(drawable, this);

        mc = mapView.getController();

        // These values are used to get map boundary area
        // The area where you can see all the markers on screen
        int minLat = Integer.MAX_VALUE;
        int minLong = Integer.MAX_VALUE;
        int maxLat = Integer.MIN_VALUE;
        int maxLong = Integer.MIN_VALUE;

        // check for null in case it is null
        if (nearPlaces.results != null) {
            // loop through all the places
            for (Place place : nearPlaces.results) {
                latitude = place.geometry.location.lat; // latitude
                longitude = place.geometry.location.lng; // longitude

                // Geopoint to place on map
                geoPoint = new GeoPoint((int) (latitude * 1E6),
                        (int) (longitude * 1E6));
                String s = place.formatted_address;
                String p = place.formatted_phone_number;
                String n = s;
                System.out.println("sarath"+s);

                // Map overlay item
                                 //Here it passes the selected overlay name and reference to the alerdialog box 
                overlayitem = new OverlayItem(geoPoint,place.name,place.reference);

                i.putExtra("place_reference", place.reference);

//              System.out.println("this is mapactivity and reference is:"+ab);

                itemizedOverlay.addOverlay(overlayitem);

                // calculating map boundary area
                minLat  = (int) Math.min( geoPoint.getLatitudeE6(), minLat );
                minLong = (int) Math.min( geoPoint.getLongitudeE6(), minLong);
                maxLat  = (int) Math.max( geoPoint.getLatitudeE6(), maxLat );
                maxLong = (int) Math.max( geoPoint.getLongitudeE6(), maxLong );
            }
            mapOverlays.add(itemizedOverlay);

            // showing all overlay items
            itemizedOverlay.populateNow();
        }

        // Adjusting the zoom level so that you can see all the markers on map
        mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));

        // Showing the center of the map
        mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
        mapView.postInvalidate();

    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:26:08.097

您的问题很不清楚...我认为“参考”是指“描述”，在这种情况下，您使用`getsnippet()`. 如果您已经`String`通过看到了`AlertDialog`，那么取出对话框不应阻止您看到片段。您能否就您的确切问题多给我们一些信息？

# iphone - Xcode: ABBYY:Load the license file to the memory

> ID：12968672
> 
> 赞同：2
> 
> 时间：2012-10-19T06:37:16.457
> 
> 标签：iphone, objective-c, ios, xcode

根据我应该将许可证加载到内存中的文档，我在给出试用密钥后尝试使用 ABBYY iOS 试用版，给出的指南是：

> ABBYY Mobile OCR Engine 许可证存储在许可证文件 (*.License) 中。
> 
> 要将许可证信息添加到应用程序，请执行以下操作：
> 
> *   将许可文件加载到内存
> *   将 FINE_LICENSE_INFO 结构的 LicenseData 字段分配给指向内存缓冲区的指针，其中包含加载的数据
> *   指定结构的 DataLength 和 ApplicationID 字段。ApplicationID 字段必须与许可文件中的应用程序名称相对应。
> *   将指向 FINE_LICENSE_INFO 变量的常量指针传递给 FineSetLicenseInfo 函数。
> 
> 使用 FineGetLicenseInfo 函数获取有关当前许可证的信息。

但是我对 Xcode 真的很陌生，那么我如何将许可证文件实际加载到内存中呢？谁能给我一个详细的指南？

# axis2 - Oracle 应用服务器 HTTP 错误 401 需要授权axis2

> ID：12968673
> 
> 赞同：0
> 
> 时间：2012-10-19T06:37:21.607
> 
> 标签：axis2, http-status-code-401, oas

我在 OAS 服务器 10.1.2.0.2 上部署了一个 jsp 应用程序。我遇到的问题是，只有有时应用程序无法调用 Web 服务方法。我得到的错误是：

```
16:58:52,332  INFO HTTPSender:202 - Unable to sendViaPost to url[http://prodbus.farm.globul.bg:8000/BPACommunicationWS/BPACommunicationWS]
org.apache.axis2.AxisFault: Transport error: 401 Error: Authorization Required
                    at org.apache.axis2.transport.http.HTTPSender.handleResponse(HTTPSender.java:310)
                    at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:200)
                    at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:76)
                    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:400)
                    at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:225)
                    at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:435)
                    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:402)
                    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
                    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165) 
```

重启 OC4J 实例后问题得到解决。内存的分配也在增长很多。

有人知道这是什么原因吗？我使用轴版本 1.5.1。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:46:11.100

问题是我在 ClassOne 和 ClassTwo 中将axis2用于具有授权的Web服务，我在没有授权的情况下使用axis2，并且当我在ClassOne中授权axis2时记得有授权并在ClassTwo中执行。我还删除了设置的抢占标志，一切正常。

# database - Symfony2：spl_object_hash() 期望参数 1 是对象，Doctrine 中给出的字符串

> ID：12968679
> 
> 赞同：21
> 
> 时间：2012-10-19T06:37:47.410
> 
> 标签：database, symfony, doctrine-orm, entity

我正在尝试通过执行使用对象 User 和 Person 填充数据库

坚持和冲洗。

首先，我正在创建 Person 对象并持久化并刷新它：

```
$person->setFirstname($enquiry->getFirstname());
$person->setLastname($enquiry->getLastname());
$person->setLastname($enquiry->getLastname());
$person->setSex($enquiry->getSex());
$person->setEmail($enquiry->getEmail());
$person->setAddress1($enquiry->getAddress1());
$person->setAddress2($enquiry->getAddress2());
$person->setCity($enquiry->getCity());
$person->setZipcode($enquiry->getZipcode());
$country = $em->getRepository('SciForumVersion2Bundle:Country')->findOneById($enquiry->getCountry());  
$person->setCountry($country);

$em->persist($person);
$em->flush(); 
```

然后是我的用户对象：

```
$user->setEmail($enquiry->getEmail());
$user->setPassword($enquiry->getPassword());
$user->setPersonId($person->getId());
$user->setDegree($enquiry->getDegree());
$user->setSex($enquiry->getSex());
$user->setOrganization($enquiry->getOrganization());
$user->setTelephone($enquiry->getTelephone());
$user->setFax($enquiry->getFax());
$user->setWorkplace($enquiry->getWorkplace());  
$user->setJobtype($enquiry->getJobtype());
$user->setResearchField($enquiry->getResearchField());
$user->setManageConference(0);
$user->setIp( $IP);
$user->setStatus( 0 );
$user->setDateRegistered( time() );

$em->persist($user);
$em->flush(); 
```

但是当试图刷新（）用户对象的持久性时，我收到了错误：

```
Warning: spl_object_hash() expects parameter 1 to be object, string given in /home/milos/workspace/conference2.0/vendor/doctrine/lib/Doctrine/ORM/UnitOfWork.php line 1095 
```

这是整个日志：

```
Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest".
Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onEarlyKernelRequest".
Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest".
Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest".
Populated SecurityContext with an anonymous Token
Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onKernelRequest".
Matched route "SciForumVersion2Bundle_security_register" (parameters: "_controller": "SciForum\Version2Bundle\Controller\SecurityController::registerAction", "_route": "SciForumVersion2Bundle_security_register")
Notified event "kernel.request" to listener "Symfony\Bundle\AsseticBundle\EventListener\RequestListener::onKernelRequest".
Notified event "kernel.controller" to listener "Symfony\Bundle\FrameworkBundle\DataCollector\RequestDataCollector::onKernelController".
Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ControllerListener::onKernelController".
Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ParamConverterListener::onKernelController".
Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\TemplateListener::onKernelController".
Notified event "kernel.controller" to listener "JMS\SecurityExtraBundle\Controller\ControllerListener::onCoreController".
SET NAMES UTF8 ([])
SELECT t0.id AS id1, t0.country AS country2, t0.phone_prefix AS phone_prefix3 FROM countries t0 ([])
SELECT t0.id AS id1, t0.degree AS degree2 FROM web_user_degree t0 ([])
SELECT t0.id AS id1, t0.place AS place2 FROM web_user_workplace t0 ([])
SELECT t0.id AS id1, t0.code AS code2, t0.type AS type3 FROM web_user_jobtype t0 ([])
SELECT t0.id AS id1, t0.name AS name2 FROM web_user_field t0 ([])
SELECT t0.id AS id1, t0.email AS email2, t0.password AS password3, t0.salt AS salt4, t0.sex AS sex5, t0.department AS department6, t0.organization AS organization7, t0.telephone AS telephone8, t0.fax AS fax9, t0.research_keywords AS research_keywords10, t0.manage_conference AS manage_conference11, t0.ip AS ip12, t0.status AS status13, t0.date_registered AS date_registered14, t0.person_id AS person_id15, t0.degree AS degree16, t0.workplace AS workplace17, t0.jobtype AS jobtype18, t0.research_field AS research_field19, t0.person_id AS person_id20 FROM web_user t0 WHERE t0.email = ? (["cuculovic@mdpi.com"])
SELECT t0.id AS id1, t0.country AS country2, t0.phone_prefix AS phone_prefix3 FROM countries t0 WHERE t0.id = ? (["196"])
INSERT INTO person (firstname, middlename, lastname, sex, email, address1, address2, city, state, zipcode, country) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ({"1":"Milos","2":null,"3":"Cuculovic","4":"m","5":"cuculovic@mdpi.com","6":"Kandererstrasse 25","7":null,"8":"Basel","9":null,"10":"4057","11":196})
Notified event "kernel.exception" to listener "Symfony\Component\Security\Http\Firewall\ExceptionListener::onKernelException".
Notified event "kernel.exception" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelException".
Notified event "kernel.exception" to listener "Symfony\Component\HttpKernel\EventListener\ExceptionListener::onKernelException".
ErrorException: Warning: spl_object_hash() expects parameter 1 to be object, string given in /home/milos/workspace/conference2.0/vendor/doctrine/lib/Doctrine/ORM/UnitOfWork.php line 1095 (uncaught exception) at /home/milos/workspace/conference2.0/vendor/symfony/src/Symfony/Component/HttpKernel/Debug/ErrorHandler.php line 65
Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest".
Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onEarlyKernelRequest".
Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest".
Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest".
Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onKernelRequest".
Notified event "kernel.request" to listener "Symfony\Bundle\AsseticBundle\EventListener\RequestListener::onKernelRequest".
Notified event "kernel.controller" to listener "Symfony\Bundle\FrameworkBundle\DataCollector\RequestDataCollector::onKernelController".
Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ControllerListener::onKernelController".
Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ParamConverterListener::onKernelController".
Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\TemplateListener::onKernelController".
Notified event "kernel.controller" to listener "JMS\SecurityExtraBundle\Controller\ControllerListener::onCoreController". 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-19T07:33:59.673

我终于找到了问题：

创建对象用户时，而不是设置这些字段

```
$user->setDegree();
$user->setWorkplace();  
$user->setJobtype();
$user->setResearchField(); 
```

作为对象（由于 OneToMany 关系），我在这里只给出了一个字符串，来自表单。

因此，对于这些字段，代码将是：

```
$degree     = $em->getRepository('SciForumVersion2Bundle:Degree')->findOneById($enquiry->getDegree());
$workplace  = $em->getRepository('SciForumVersion2Bundle:Workplace')->findOneById($enquiry->getWorkplace());
$job_type   = $em->getRepository('SciForumVersion2Bundle:JobType')->findOneById($enquiry->getJobtype());
$research_field = $em->getRepository('SciForumVersion2Bundle:ResearchField')->findOneById($enquiry->getResearchField()); 
```

进而：

```
$user->setPerson($person);
$user->setWorkplace($workplace);    
$user->setJobtype($job_type);
$user->setResearchField($research_field); 
```

所以：当你收到这种警告时要小心，你可能必须检查你是否以正确的方式填充你的对象。

# linux - 切换到 Linux

> ID：12968682
> 
> 赞同：0
> 
> 时间：2012-10-19T06:38:05.120
> 
> 标签：linux, installation, desktop

我在大学里使用 linux 已经有一段时间了，它似乎更可定制，更适合编码。

所以我想在家里从windows 7切换到linux。

我应该使用 linux 的哪个分支？如果可以提供任何见解，我是 emacs 用户。

我应该使用哪种桌面环境？在 uni 我们使用 KDE，但它过于图形化，我经常只是单击内容而不是使用终端。我想要一个鼓励我更多地使用终端的地方。

最大的问题，我如何安装它？我应该把所有东西都放在外部硬盘上并彻底擦除我的电脑吗？

我主要用 Java 和 python 编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:04:24.497

我建议使用 VMWare 或 Virtual Box 创建虚拟机。就发行版而言，Linux Mint 和 Ubuntu 对于首次安装来说非常友好。对于桌面环境，我建议使用 XFCE。

一些谷歌搜索会对你有好处。我认为虚拟环境将比对硬盘进行分区更容易管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:13:24.473

我建议您首先尝试使用 Linux 关闭 Live CD/DVD。Linux Mint、Ubuntu 等

只需将 .iso 下载并刻录到空白媒体上，然后启动您的计算机。随便玩玩，检查各种桌面环境，看看你的所有硬件是否都适用于特定的 Linux 发行版。此步骤对于决定您实际要安装到您的计算机上的发行版非常有用，尤其是后者，因为虽然它一直在改进，但您在配置计算机以在 Linux 上运行时可能面临的最大障碍通常是硬件不兼容。只需确保您需要工作的所有内容都能正常工作。

如果您在清除 Windows 时没有任何问题，那么如今 Linux 安装非常简单。一般来说，它甚至比重新安装 Windows 花费的时间更少。我会在网上浏览您的特定计算机型号的安装说明，看看是否有人已经成功安装，以便您可以关注。这样可以节省很多时间。

我使用 Debian（现在 Wheezy）和 KDE。安装 Linux 后很容易安装和切换桌面环境，所以不用担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:56:49.520

好吧，安装步骤，如果您使用 Windows 7，您可能需要对硬盘进行完整备份 - 所以如果出现问题，您将是安全的并且能够恢复。我最近的情况有点类似——弄清楚要使用哪个 linux 发行版。以前我在[ScientificLinux](https://www.scientificlinux.org/news/sl63)上很幸运，但这次由于某种原因它不喜欢我的笔记本电脑硬件 - 在唤醒无线网卡后卡住并且没有接收到任何信号。我不想重新编译内核等，所以我安装了[Ubuntu](http://releases.ubuntu.com/12.04/)，但是 Gnome 3 是一个阻碍 - 我不得不回滚到 Gnome 2，但后来我尝试并喜欢了很多[XFCE](http://xfce.org/)桌面 - 我现在在我的工作站和笔记本电脑上使用。Java、Python 和 emacs 可能适用于任何开箱即用的 linux 发行版，所以最终选择哪一个完全取决于您。祝你好运！

抱歉，忘了提及 - 所有当代 Linux 发行版都能够安装双启动功能 - 因此您可以将 Windows 7 设置与 Linux 保持一致（如果您有足够的可用空间），而且可以从 Linux 访问 Windows 分区，即有时很方便。

# python - 如何让 django celery 写入测试数据库以进行功能测试？

> ID：12968685
> 
> 赞同：8
> 
> 时间：2012-10-19T06:38:10.563
> 
> 标签：python, django, mongodb, selenium, django-celery

我正在开发一个 Django 应用程序。我们正在使用 celery 对 Mongo 数据库的写入进行排队。我正在尝试为一个在芹菜中排队的函数编写一个功能测试（使用 Selenium）。

问题是 celery 写入主 Mongo 数据库而不是测试数据库。如何设置我的功能测试以使用写入测试数据库的 celery 实例？

我们`'django_nose.NoseTestSuiteRunner'`用作我们的`TEST_RUNNER`.

***更新***：

我无法弄清楚如何使用另一个 celery 实例进行测试，但我找到了一种绕过 celery 进行功能测试的方法。

在我的`settings.py`：

```
FUNC_TEST_COMMAND=['functional']
func_test_command = filter(lambda element: element in FUNC_TEST_COMMAND, sys.argv)
if len(func_test_command) > 0:
  CELERY_ALWAYS_EAGER = True 
```

这模仿了`AsyncResult`在运行功能测试套件时不通过消息队列发送任何内容的行为。（有关更多信息，请参阅[http://celery.readthedocs.org/en/2.4/configuration.html#celery-always-eager](http://celery.readthedocs.org/en/2.4/configuration.html#celery-always-eager)。）

此解决方案可能不适合功能测试，因为它会削减其中一个应用程序层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:18:18.277

使用 CELERY_ALWAYS_EAGER = True 确实绕过了 Celery 的异步处理。为了写入测试数据库，你需要使用测试数据库的连接设置来启动你的 celeryd worker。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T13:06:04.210

我建议您看看[`LiveServerTestCase`](https://docs.djangoproject.com/en/dev/topics/testing/#django.test.LiveServerTestCase)您是否使用自动化测试客户端来运行功能测试。

然后确保你有一个单独的设置模块来运行你的测试，正确配置 Celery 使用你[项目的数据库进行传输](http://docs.celeryproject.org/en/latest/getting-started/brokers/django.html)。

# magento - 如何从 Magento 的交货日期扩展中的选定日期获取日期？

> ID：12968689
> 
> 赞同：0
> 
> 时间：2012-10-19T06:38:15.493
> 
> 标签：magento, date

我想从 Magento 的 Aheadworks 的 Delivery Date Extension 中的选定日期获取日期。

根据这一天，我想在最后一步结账时在总计中添加额外费用。我在 Magento 中使用单页结帐流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:33:42.320

向 Aheadworks 寻求支持。这是他们的延伸。

# jquery - noUiSlider 需要哪个版本的 jQuery？

> ID：12968691
> 
> 赞同：0
> 
> 时间：2012-10-19T06:38:18.080
> 
> 标签：jquery, jquery-plugins, slider

我正在使用（尝试使用）[noUiSlider](http://refreshless.com/nouislider/)。但是我遇到了一个奇怪的问题，我认为这是因为我使用的是早期版本的 jQuery。

我正在使用 jQuery 1.4.4 。有谁知道 noUiSlider 需要哪个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:45:19.690

您可以使用 jQuery 的**`noConflict()`**函数来包含两个不同版本的 jQuery。

```
<script type="text/javascript" src="older_version_of_jquery"></script>
<script type="text/javascript">
    //Do slider work
    //...

    $.noConflict();
</script>

<script type="text/javascript" src="newer_version_of_jquery"></script> 
```

# ruby-on-rails - 无法使用 Authlogic 创建新用户

> ID：12968692
> 
> 赞同：1
> 
> 时间：2012-10-19T06:38:18.313
> 
> 标签：ruby-on-rails, authlogic

我的 user.rb 看起来像这样：

```
class User < ActiveRecord::Base
  attr_accessible :password, :password_confirmation, :crypted_password, :username, :password_salt, :persistence_token
  acts_as_authentic
  has_many :assignments
  has_many :roles, :through => :assignments
  def role_symbols
    roles.map do |role|
      role.name.underscore.to_sym
    end
  end  
end 
```

但是我在rails控制台中得到了这个：

```
x = User.create(:username => "foo", :password => "bar", :password_confirmation => "bar")
   (0.2ms)  BEGIN
  User Exists (0.4ms)  SELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('foo') LIMIT 1
  User Exists (0.6ms)  SELECT 1 AS one FROM "users" WHERE "users"."persistence_token" = 'e3c363da87d37fc7f17d3d1f4d4c851b93cf974ae614ec0b0cb9eb1935dd2dc2ccab34d0a06b4580881dc38e5b65027cce0f2e53a005860fc81d7f5e4c245d6a' LIMIT 1
   (0.3ms)  ROLLBACK
+----+----------+---------+---------+---------+-------+---------+---------+
| id | username | cryp... | pass... | pers... | email | crea... | upda... |
+----+----------+---------+---------+---------+-------+---------+---------+
|    | foo      | 6196... | vIzV... | e3c3... |       |         |         |
+----+----------+---------+---------+---------+-------+---------+---------+
1 row in set
1.9.3-p194 :031 > User.all
  User Load (1.5ms)  SELECT "users".* FROM "users" 
 => [] 
1.9.3-p194 :032 > x.save
   (0.1ms)  BEGIN
  User Exists (0.6ms)  SELECT 1 AS one FROM "users" WHERE LOWER("users"."username") = LOWER('foo') LIMIT 1
  User Exists (0.3ms)  SELECT 1 AS one FROM "users" WHERE "users"."persistence_token" = 'e3c363da87d37fc7f17d3d1f4d4c851b93cf974ae614ec0b0cb9eb1935dd2dc2ccab34d0a06b4580881dc38e5b65027cce0f2e53a005860fc81d7f5e4c245d6a' LIMIT 1
   (0.1ms)  ROLLBACK
 => false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:38:00.777

意识到 :email 需要一个 attr_accessible。

# android - 在网站上使用 C++ 库

> ID：12968694
> 
> 赞同：3
> 
> 时间：2012-10-19T06:38:26.340
> 
> 标签：android, c++, web

我即将用 C++ 编写大量代码以实现最大的可移植性。我需要此代码能够通过 JNI 在网站和 Android 应用程序上运行。虽然 Java 在技术上也是一种选择，但我可能希望在未来的其他项目中使用这个库，这些项目都将基于 C++，并且我想获得本机速度的优势，因为它是一个与数学相关的库。

我的问题是在网站上运行此代码的最佳选择是什么。网站本身不必用 C++ 编写，就像 Android 应用程序本身大部分是用 Java 编写的一样。

我可以看到以下选项：

*   编写一个 PHP 模块来与这个库交互
*   用C++编写一个服务器，用于PHP编写的站点访问的站点的API
*   写一个fastcgi服务器

你认为我在这里最好的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:51:59.743

选择显然是你的，所有选项听起来都很棒，但我认为使用 factcgi 和类似的东西`WT`会`CPPCMS`很棒。看看他们两个，它们都是完成这项任务的好图书馆，我更喜欢，`CPPCMS`但我认为这取决于你的需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:50:09.333

一个好的旧 cgi 程序怎么样？启动一个进程太大而无法证明fastcgi的更高复杂性是否会受到惩罚？

# javascript - 使用不同的 CSS 对重叠的 HTML 跨度进行建模

> ID：12968697
> 
> 赞同：1
> 
> 时间：2012-10-19T06:38:31.410
> 
> 标签：javascript, jquery, algorithm, html

我正在寻找一种对跟踪不同重叠 CSS 组的东西进行建模的好方法，类似于以下内容：

1.  这只是一个示例的测试句。
2.  （这）只是一个（测试句）的例子。
3.  （这只是）一个测试（例如句子。）

根据选择的单选按钮，我想为括号中的每个组启用不同的 CSS 样式。例如，对于#2，(This is) 将始终具有不同的默认样式，并且在鼠标悬停时会突出显示红色，但仅在选择选项 2 时。会有很多不同的选项，所以我想避免在必要时拥有源文本的多个副本。

问题是你不能有跨度重叠。我能做到这一点的唯一方法是为每个单词提供多个 css 类，例如：

group2_word1,group3_word1, etc...，然后做很多 javascript 编码来模拟我想要的行为。这对我来说听起来是个可怕的主意。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:26:44.147

我记得一个 javascript 库，它能够进行基于单词/字母的内联文本样式，但我不记得名字了。我现在能找到的只是一个名为[rangy](http://code.google.com/p/rangy/)的库。也许你想试一试。我也会尝试找到另一个库，如果我找到它会报告。

看看[CSSClassApplierModule](http://code.google.com/p/rangy/wiki/CSSClassApplierModule)可以做你正在寻找的东西。

# magento - 连接查询生成的项目的功能应该在哪里？

> ID：12968707
> 
> 赞同：0
> 
> 时间：2012-10-19T06:39:03.870
> 
> 标签：magento

我用函数 getRooms() 创建了块。此函数对两个表进行 joinLeft 查询并返回项目集合。实际上它不是初始房间集合，因为它具有 group、sum 和其他可数字段。

在 phtml 模板中，我呈现这些集合并应检查每个项目，调用函数。

例如：

```
<?php $rooms = $this->getRooms();
foreach ($rooms as $room) : ?>
<?php if ( $this->isAvailable($room) ) : ?>
<!-- some html here --> 
```

isAvailable 函数与 $room 值一起使用，所以我觉得它应该被称为

```
$room->isAvailable(); 
```

代替

```
$this->isAvailable($room) 
```

在这种情况下 isAvailable() 应该在模型中。但是什么型号？正如我上面提到的，我的查询是连接两个表。那么应该使用什么模型呢？也许 Magento 有可能基于连接表（而不是一张表）创建模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:20:50.933

Collection 对象包含您正在使用的模型。完成所有`joining`工作只是为了向您的模型添加更多数据（您的逻辑所需的数据）。要获取模型类，只需使用

```
echo get_class($room); 
```

# php - 在选择中默认使用 set name 'utf8' 有什么不好的影响吗？

> ID：12968708
> 
> 赞同：2
> 
> 时间：2012-10-19T06:39:05.700
> 
> 标签：php, mysql, utf-8, set, names

`set name 'utf8'`在 SQL 选择查询中默认使用有什么不好的影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:44:16.387

排序规则和 SET 名称可能对您的项目没有那么大的影响，但这并不意味着您不应该为整个数据库遵循标准的排序规则方法。如果您可以使用标准的排序规则值，我更喜欢，这对您来说会少一些麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:40:25.650

我会说我所知道的没有坏影响，但在输入的内容方面会更加容忍输入，这可能是一件坏事，但据我所知，这是一件好事。

# perl - 将字符串连接到路径

> ID：12968712
> 
> 赞同：-1
> 
> 时间：2012-10-19T06:39:12.230
> 
> 标签：perl

我在字符串连接方面遇到了一些麻烦。我正在尝试创建一个将成为 .txt 文件的路径，但它总是以没有名称的“.txt”结尾。不过，它最终以正确的方式结束。

这就是我正在做的事情：

```
open TEXT, ">/home/admin/www/build/logs/baseline".$ID."/".$platformName.".txt" or die $!; 
```

所以我想创建文件。“/home/admin/www/build/logs/baseline45/linux.txt”

我在哪里搞砸了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:50:52.233

您并没有在提供的代码段中搞砸，有几种方法可以形成一个字符串，包括来自变量的值，并且您正在正确使用其中一种（点运算符）。

尝试检查以确保它`$platformType`确实包含您的想法，除非您还没有；打开警告（最好是严格模式）。

打开警告/严格模式可能会为您提供未定义变量的详细信息，这在这种情况下会很有帮助（即。`$platformType`真的是您要查找的变量的名称吗？）

```
use warnings;
use strict; 
```

在尝试打开文件之前打印 的值，`$platformType`你会发现它确实是一个空字符串（或者只是包含一些奇怪的东西来解释你得到的结果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:26:31.243

步骤1：

```
open TEXT, '>/home/admin/www/build/logs/baseline/' . $ID . '/' . $platformName . '.txt'; 
```

第2步：

```
open TEXT, ">/home/admin/www/build/logs/baseline/" . $ID . "/" . $platformName . ".txt"; 
```

我觉得是这样的…………

# peoplesoft - 用于从网格中隐藏列的人员代码

> ID：12968713
> 
> 赞同：2
> 
> 时间：2012-10-19T06:39:14.497
> 
> 标签：peoplesoft

我正在尝试使用 Peoplecode 从网格中隐藏一列，但该列来自子页面。我尝试使用以下代码。

```
GetGrid(Page.PAGE_NAME, "GRID_NAME").GetColumn("COLUMN_FIELDNAME").Visible = False; 
```

这没有用。谁能帮我这个。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:01:08.757

在 GetGrid 调用中使用父页面的名称而不是子页面的名称。代码应该在父页面的激活事件上。

# mysql - MySQL 从标准输入导入

> ID：12968715
> 
> 赞同：5
> 
> 时间：2012-10-19T06:39:21.440
> 
> 标签：mysql, bash, awk

我正在使用 awk 在标准输出中生成 csv。有没有办法直接在 mysql 中导入该内容而不将其放入文件中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-08-12T16:38:52.843

正如@xdazz 的回答所说，只需使用`LOAD DATA LOCAL INFILE`. 我认为它是出于无知或懒惰而被否决的。快速阅读 MySQL 手册将表明这是一个完全可行的答案。

在 2016 年，对于与大多数用户最相关的 MariaDB，您可以这样做：

`bash awk '{ /* My script that spits out a CSV */ }' | mysql --local-infile=1 -u user -ppassword mydatabase -e "LOAD DATA LOCAL INFILE '/dev/stdin' INTO TABLE mytable FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"';"`

显然，请务必阅读手册并根据需要将选项更改`LOAD DATA INFILE`为适合您的具体情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-23T19:01:24.493

MySQL 支持通过如下所示的扩展插入获取数据：

```
insert into table (col1, col2, col3) values
(a,b,c),
(d,e,f),
(g,h,i); 
```

因此，您可以修改 CSV 以包含左括号、右括号和逗号，并在其前面加上`insert into table...`分号，然后您可以将其直接通过管道传输到 MySQL 命令行。

您还可以使用命名管道（一种 Unix 构造）将 TSV（制表符分隔，而不是逗号分隔）通过管道传输到`load data infile`如下所示：

```
mkfifo /tmp/mysqltsv
cat file.csv | sed -e 's/,/\t/g' > /tmp/mysqltsv
mysql -e "load data infile '/tmp/mysqltsv' into table tblname" 
```

那是伪代码。您需要在一个进程中运行 cat 并在另一个进程中运行 mysql 命令。最简单的是使用两个不同的终端。更高级的是后台`cat|sed`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T11:55:02.357

您似乎无法直接从标准输入导入 CSV。您必须将其保存到文件中，以便 mysql 使用其名称作为表的名称（不带扩展名），您可以使用 mysqlimport 如下：

`mysqlimport -uUSER -pPASS DB FILE`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T06:45:15.960

@xdazz 比我快，但我会考虑将结果放入文件中。为什么？因为这样，如果出现问题，您可以检查并追溯问题。如果您遇到间歇性问题，这将非常有帮助，这并不总是会发生。当然，为了节省磁盘空间，导入完成后，我会将它们压缩起来，以免消耗太多。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-19T06:41:59.320

是的，只需使用管道。

~~$ your_command | mysql -u 用户 -p~~

*对不起，这个答案还不够。您不能将 csv 直接输出到 mysql。您必须做额外的工作才能使结果成为有效的 sql。*

`load data infile`或者，您可以考虑使用支持将 csv 文件加载到数据库的mysql 原生语法。

# mysql - 从数据库（mysql）中获取数据并将其显示在 cakephp 的文本框中

> ID：12968722
> 
> 赞同：1
> 
> 时间：2012-10-19T06:39:52.967
> 
> 标签：mysql, cakephp

ajax.call() 是什么？它是 javascript 或 jquery 的一部分吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:56:04.447

在您的视图中尝试此代码

```
echo $this->form->input('username',array('value' =>$username)); 
```

# visual-studio-2012 - Visual Studio 2012 Express 上的 TypeScript

> ID：12968723
> 
> 赞同：6
> 
> 时间：2012-10-19T06:39:54.223
> 
> 标签：visual-studio-2012, typescript

我一直无法让 Visual Studio 2012 的 TypeScript 正常工作。有谁知道它是否只会安装在VS2012的完整版上？（我有 VS 2012 **Express** for Web 和 VS 2012 **Express** for Desktop）。

我已经尝试了可以​​在此站点上找到的所有建议，但仍然没有运气。VS 和 TypeScript 都正确安装，但我在 VS 2012 Express for Web 中的任何地方都看不到 TypeScript 项目或新项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:06:47.943

**TypeScript**项目喜欢直接隐藏在*VS 2012 Express for Web*的项目模板树的**Visual C#**或**Visual Basic**节点中。只需单击其中一个，滚动到最底部并检查它是否存在：

 *![Visual C# 节点下的 TypeScript 项目](../Images/fb0473709f2cbf08cfa9fb2dfdd36c86.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:37:10.113

更具体地说，TypeScript 目前没有自己的项目类型，因此实际上只有模板利用了其他项目类型（例如 C#）。

更难找到的是 ASP.NET MVC 3 TypeScript 模板。为此，选择“Visual C# / Web / ASP.NET MVC 3 Web Application”模板，然后当您单击“确定”时，您将获得 TypeScript 模板的选项（见下图）。

此外，由于 TypeScript 没有本机项目系统，其构建操作目前只是 C# 项目文件中的 Exec 任务。即在 csproj 中，您将看到如下操作：

```
 <Target Name="BeforeBuild">
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.0.0\tsc&quot; @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" />
  </Target> 
```

![在此处输入图像描述](../Images/a0b7827c8d3e2b5dc96e9be90bdc9c70.png)*

# php - Joomla 2.5 身份验证插件致命错误：在非对象上调用成员函数 get()

> ID：12968727
> 
> 赞同：2
> 
> 时间：2012-10-19T06:40:01.913
> 
> 标签：php, joomla, joomla2.5

我编写了一个简单的身份验证插件，它使用 SOAP Web 服务来检查用户名和密码。这很好用。

我想在 joomla 的管理员中有一些参数，比如 SOAP 密码。所以我在 xml 中添加了参数，它在管理员中显示得很好。当我尝试获取 php 的值时，我得到：

致命错误：在非对象上调用成员函数 get()

因此，我与其他身份验证进行了比较，并且以完全相同的方式进行了操作....我不明白为什么会这样。

这是插件的代码：

```
public function __construct() {
    $nusoap = JPATH_SITE . '/plugins/authentication/ers/nusoap/lib/nusoap.php';
    if (! file_exists ( $nusoap )){
                $response->error_message = "No such file";
        return;
            }
    require_once ($nusoap);

}

function onUserAuthenticate($credentials, $options, &$response)
{

        //Without defaults (the plugin crashes on the first get() bellow)
        $webservice = $this->params->get('webservice', '');
        $group      = $this->params->get('group', '');
        $whitepaw   = $this->params->get('whitepaw', '');

        JRequest::checkToken() or die( 'Invalid Token' );
        // For JLog
        $response->type = 'ERS SOAP Webservice';

            // MyCompany does not like blank passwords (So does Joomla ;))
    if (empty($credentials['password'])) {
        $response->status = JAuthentication::STATUS_FAILURE;
        $response->error_message = JText::_('JGLOBAL_AUTH_EMPTY_PASS_NOT_ALLOWED');
        return false;
    }

    if (empty($credentials['username'])) {
        $response->status = JAuthentication::STATUS_FAILURE;
        $response->error_message = JText::_('Please enter a username');
        return false;
    }

           // Add a user to joomla
                function addJoomlaUser($name, $username, $password, $email, $group) {

                            $data = array(
                                "name"=>$name,
                                "username"=>$username,
                                "password"=>$password,
                                "password2"=>$password,
                                "email"=>$email,
                                "block"=>0,
                                "groups"=>array("1","2", $group) // the uer is added into the group "public" and "registered" as well as a group of the user's choice.

                            );

                            $user = clone(JFactory::getUser());
                            //Write to database
                            if(!$user->bind($data)) {
                                throw new Exception("Could not bind data. Error: " . $user->getError());
                            }
                            if (!$user->save()) {
                                throw new Exception("Could not save user. Error: " . $user->getError());
                            }

                        return $user->id;
                }

            // Pour supprimer le cache du web-service
            ini_set('soap.wsdl_cache_enabled', 0);

            // Nouveau Client SOAP
            try {

                // Nouvelle instance de la classe soapClient
                $client = new SoapClient($webservice, array('trace' => true));

                $username = $credentials['username'];
                $password = $credentials['password'];

                $result = $client->CheckLogin(array('whitepaw'=>$whitepaw, 'username'=>$username, 'password'=>$password));

                if($result->isInDB){

                        $name = $result->fname.' '.$result->lname;
                        $email = $result->email;

                        $response->error_message = $username.'<br>'.$password.'<br>'.$name.'<br>'.$email."<br><br>".
                                "<b>Request :</b><br>".htmlentities($client->__getLastRequest())."<br><br>".
                                "<b>RESPONSE :</b><br>".htmlentities($client->__getLastResponse())."<br><br>";

                        if(!$result->email == '' || empty ($result)) {
                            //Todo: check if the user is already in joomla db
                            $user_id = addJoomlaUser($name, $username, $password, $email,$group);
                            $response->status = JAuthentication::STATUS_SUCCESS;
                            //for testing purposes
                            $response->error_message = $user_id;
                      } else {
                           $response->error_message = "The webservice did not return data".$email.'did you see it?';

                       }

                } else {
                    $response->status = JAuthentication::STATUS_FAILURE;
                    $response->error_message = 'You do not have yet an account in <a href="http://my.ersnet.org">myers</a>. Please register.<br>';
                    $response->error_message .= $result->isInDB;

                }
                } catch (Exception $fault) {
                    $response->error_message = $fault->getMessage();
                }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:49:03.087

由于您有自己的构造函数，因此您需要像这样调用父构造函数：

```
public function __construct(& $subject, $params = array()) {
    $nusoap = JPATH_SITE . '/plugins/authentication/ers/nusoap/lib/nusoap.php';
    if (! file_exists ( $nusoap )){
                $response->error_message = "No such file";
        return;
            }
    require_once ($nusoap);
    // call the parent constructor
    parent::__construct($subject, $params);
} 
```

父构造函数是`$this->params`对象被设置的地方，所以如果你不调用它，那么`$this->params`永远不会设置。这就是为什么你得到错误说`params`不是对象的原因。

# c++ - 尝试使用 C++ 中的递归为模板多项式类组合类似的术语

> ID：12968728
> 
> 赞同：5
> 
> 时间：2012-10-19T06:40:05.017
> 
> 标签：c++, algorithm, templates, recursion, vector

我正在自学 C++。

我正在尝试组合多项式。为此，我 使用简单的值组合定义了简单的类`Polynomial<T>`：`Term<T>`和`Coefficient<T>`（也可能只是 ）。`complex<T>`我已经定义了所需的运算符重载。

多项式通过对其项进行排序来进行比较 ( `std::sort`)。

我正在努力`combineLikeTerms()`；调用此方法时，将首先调用另一个成员方法，该方法将对该术语向量进行排序。例如：

```
4x^3 + 5x^2 + 3x - 4 
```

将是一个可能的结果排序向量。

**问题**：

我在这个向量上使用了两个迭代器，我试图合并相同*顺序*的相邻项。

假设我们排序后的初始向量是这样的：

```
4x^3 - 2x^3 + x^3 - 2x^2 + x ... 
```

在函数完成其迭代后，临时堆栈向量将看起来像这样 2x^3 + x^3 - 2x^2 + x ...如果我们看起来仍然有类似的术语，这需要再次重构。

我该怎么做呢？我正在考虑使用递归。

```
// ------------------------------------------------------------------------- //
// setPolynomialByDegreeOfExponent()
// should be called before combineLikeTerms
template <class T>
void Polynomial<T>::setPolynomialByDegreeOfExponent()
{
    unsigned int uiIndex = _uiNumTerms - 1;
    if ( uiIndex < 1 )
    {
        return;
    }
    struct _CompareOperator_
    {
        bool operator() ( math::Term<T> a, Term<T> b )
        {
            return ( a.getDegreeOfTerm() > b.getDegreeOfTerm() );
        } // operator()
    };
    stable_sort( _vTerms.begin(), _vTerms.end(), _CompareOperator_() );
} // setPolynomialByDegreeOfExponent

// ------------------------------------------------------------------------- //
// addLikeTerms()
template <class T>
bool Polynomial<T>::addLikeTerms( const Term<T>& termA, const Term<T>& termB, Term<T>& result ) const
{
    if ( termA.termsAreAlike( termB ) )
    {
        result = termA + termB;
        return true;
    }
    return false;
} // addLikeTerms

// ------------------------------------------------------------------------- //
// combineLikeTerms()
template <class T>
void Polynomial<T>::combineLikeTerms()
{
    // First We Order Our Terms.
    setPolynomialByDegreeOfExponent();
    // Nothing To Do Then
    if ( _vTerms.size() == 1 )
    {
        return;
    }
    Term<T> result; // Temp Variable
    // No Need To Do The Work Below This If Statement This Is Simpler
    if ( _vTerms.size() == 2 )
    {
        if ( addLikeTerms( _vTerms.at(0), _vTerms.at(1) )
    {
        _vTerms.clear();
            _vTerms.push_back( result );
        }
        return;
    }
    // For 3 Ore More Terms
    std::vector<Term<T>> vTempTerms; // Temp storage
    std::vector<Term<T>>::iterator it = _vTerms.begin();
    std::vector<Term<T>>::iterator it2 = _vTerms.begin()+1;
    bool bFound = addLikeTerms( *it, *it2, result );

    while ( it2 != _vTerms.end() )
    {
        if ( bFound )
        {
            // Odd Case Last Three Elems
            if ( (it2 == (_vTerms.end()-2)) && (it2+1) == (_vTerms.end()-1)) )
            {
                vTempTerms.push_back( result );
                vTempTerms.push_back( _vTerms.back() );
                break;
            }
            // Even Case Last Two Elems
            else if ( (it2 == (_vTerms.end()-1)) && (it == (_vTerms.end()-2)) )
            {
                vTempTerms.push_back( result );
                break;
            }
            else
            {
                vTempTerms.push_back( result );
                it += 2;    // Increment by 2
                it2 += 2;          "
                bFound = addLikeTerms( *it, *it2, result );
            }
            }
                else {
                // Push Only First One
                vTempTerms.push_back( *it );
                it++;   // Increment By 1
                it2++;         "
                // Test Our Second Iterator
                if ( it2 == _vTerms.end() )
                {
                    vTempTerms.push_back( *(--it2) );  // same as using _vTerms.back()
                }
                else
                {
                    bFound = addLikeTerms( *it, *it2, result );
                }
            }
        }
        // Now That We Have Went Through Our Container, We Need To Update It
        _vTerms.clear();
        _vTerms = vTempTerms;
        // At This point our stack variable should contain all elements from above,
        // however this temp variable can still have like terms in it.
        // ??? Were do I call the recursion and how do I define the base case
        // to stop the execution of the recursion where the base case is a
        // sorted std::vector of Term<T> objects that no two terms that are alike...
        // I do know that the recursion has to happen after the above while loop
    } // combineLikeTerms 
```

有人可以帮我找到下一步吗？我很高兴听到显示的代码中的任何错误/效率问题。我爱c++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:19:05.487

这是我对现代 C++ 的看法。

*注意有效*系数*为零*的删除项的额外优化

 *自包含样本： http: [//liveworkspace.org/code/ee68769826a80d4c7dc314e9b792052b](http://liveworkspace.org/code/ee68769826a80d4c7dc314e9b792052b)

**更新：发布了这个**[http://ideone.com/aHuB8](http://ideone.com/aHuB8)****的 c++03 版本****

 **```
#include <algorithm>
#include <vector>
#include <functional>
#include <iostream>

template <typename T>
struct Term
{
    T coeff;
    int exponent;
};

template <typename T>
struct Poly
{
    typedef Term<T> term_t;
    std::vector<term_t> _terms;

    Poly(std::vector<term_t> terms) : _terms(terms) { }

    void combineLikeTerms()
    {
        if (_terms.empty())
            return;

        std::vector<term_t> result;

        std::sort(_terms.begin(), _terms.end(), 
                [] (term_t const& a, term_t const& b) { return a.exponent > b.exponent; });

        term_t accum = { T(), 0 };

        for(auto curr=_terms.begin(); curr!=_terms.end(); ++curr)
        {
            if (curr->exponent == accum.exponent)
                accum.coeff += curr->coeff;
            else
            {
                if (accum.coeff != 0)
                    result.push_back(accum);
                accum = *curr;
            }
        }        
        if (accum.coeff != 0)
            result.push_back(accum);

        std::swap(_terms, result); // only update if no exception
    }
};

int main()
{
    Poly<int> demo({ { 4, 1 }, { 6, 7 }, {-3, 1 }, { 5, 5 } });

    demo.combineLikeTerms();

    for (auto it = demo._terms.begin(); it!= demo._terms.end(); ++it)
        std::cout << (it->coeff>0? " +" : " ") << it->coeff << "x^" << it->exponent;

    std::cout << "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:11:32.760

您需要将多项式视为一系列对（系数，变量）：

[(co​​efficient1,variable1),(coefficient2,variable2),(coefficient3,variable3),...]

正如您所描述的，您从左到右遍历它，只要*变量*部分相同，就将两个相邻的对组合成一个（这当然假设列表已经按*变量*部分排序！）。

现在，当此列表中有*三个或更多*元素共享它们的变量时会发生什么？好吧，那就继续组合它们。真的不需要递归或任何复杂的东西。

在迭代过程中的任何时候，您都可以将当前对的*可变*部分与**最后看到的***可变*部分结合起来。如果它们相同，则将它们组合并继续。*如果您得到的下一对仍然具有与最后一次看到*的相同的可变部分，那么您将它们再次组合起来。如果您正确执行此操作，则不应留下任何重复项。

 ***这是一个如何执行此操作的示例。它的工作原理是创建一个新的对列表，然后遍历输入列表，对于输入列表的每个项目，它决定是否将其与最后推送到新列表的项目组合，或者通过向新列表添加新元素：

```
#include <utility>
#include <vector>
#include <iostream>

typedef std::vector<std::pair<float,std::string>> Polynomial;

Polynomial combine_like_terms(const Polynomial &poly)
{
  if (poly.empty())
    return poly;

  /* Here we store the new, cleaned-up polynomial: */
  Polynomial clean_poly;

  /* Now we iterate: */    
  auto it = begin(poly);
  clean_poly.push_back(*it);
  ++it;
  while (it != end(poly)) {
    if (clean_poly.back().second == it->second)
      clean_poly.back().first += it->first; // Like term found!
    else
      clean_poly.push_back(*it); // Sequence of like-terms ended!
    ++it;
  }
  return clean_poly;
}

int main()
{
  Polynomial polynomial {
    { 1.0 , "x^2" },
    { 1.4 , "x^3" },
    { 2.6 , "x^3" },
    { 0.2 , "x^3" },
    { 2.3 , "x" },
    { 0.7 , "x" }
  };

  Polynomial clean_polynomial = combine_like_terms(polynomial);
  for (auto term : clean_polynomial)
    std::cout << '(' << term.first << ',' << term.second << ")\n";
  std::cout.flush();

  return 0;
} 
```

如果需要，您可以轻松地将其再次模板化——我用于`float`系数和`strings`变量部分。它实际上只是一个代码示例，展示了如何在没有递归或大量并行使用的迭代器的情况下轻松完成此操作。

哦，代码是为 C++11 编写的。同样，它只是一个模型，可以针对 C++03 进行调整。******

# java - 如何创建一个将文本输入传递给 servlet 并重定向到同一个 servlet 的 flex 程序

> ID：12968729
> 
> 赞同：1
> 
> 时间：2012-10-19T06:40:04.290
> 
> 标签：java, apache-flex, servlets

我想将 mxml 文件重定向到 servlet 并在 servlet 上打印代码，但是当我使用导航到 url 代码时，输​​出显示servlet 页面中 textinput 字段的**空**值，请帮助我澄清问题 mxml 和 servlet 的基本编码下面给出

**MXML 文件**

```
<s:Application...>
<fx:Script>
<![CDATA[
  import flash.net.navigateToURL;
  import mx.controls.*;
  import mx.events.Request;
  import mx.rpc.events.FaultEvent;
  import mx.rpc.events.ResultEvent;

  public function resultHandler(event : ResultEvent):void
  {             
    navigateToURL(new URLRequest('Srvlt'),'_self')
  }
  public function faultHandler(event : FaultEvent):void
  {
    Alert.show("error");
  }
]]>
</fx:Script>

<fx:Declarations>
  <s:HTTPService id="service" url="Srvlt" result="resultHandler(event)" fault="faultHandler(event)" method="GET" showBusyCursor="true" resultFormat="text">
    <s:request xmlns="">
      <email>{email.text}</email>
      <pass>{pass.text}</pass>
    </s:request>
  </s:HTTPService>
</fx:Declarations>
<s:VGroup verticalAlign="middle">
  <s:FormItem label="E-mail : ">
    <s:TextInput id="email" />
  </s:FormItem>
  <s:FormItem label="Password :">
    <s:TextInput id="pass" displayAsPassword="true" />
  </s:FormItem>
  <mx:Button label="Submit" click="service.send()" />
</s:VGroup>
</s:Application> 
```

**servlet的get方法编码如下**

```
String e = request.getParameter("email");
String p = request.getParameter("pass");
String resul;
PrintWriter out = response.getWriter();
resul = "Hi i am servlet, your username is " + e + " & password is " + p + ". are they correct ?";
out.print(resul); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:47:51.080

您在应用程序中发送 2 个不同的请求。第一个是`HTTPService`，第二个是`URLRequest`。

```
<s:HTTPService id="service" url="Srvlt" result="resultHandler(event)"
fault="faultHandler(event)" method="GET" showBusyCursor="true" resultFormat="text">
    <s:request xmlns="">
        <email>{email.text}</email>
        <pass>{pass.text}</pass>
    </s:request>
</s:HTTPService> 
```

处理结果时，您可以通过`ResultEvent`对象获取响应字符串

```
public function resultHandler(event : ResultEvent):void
{
    Alert.show(event.result); // you'll see "Hi i am servlet..." here
} 
```

您现在可以使用此字符串。

但是如果你想用结果文本打开新页面，那么你不需要使用`HTTPService`. 使用`URLRequest`类。

```
var request:URLRequest = new URLRequest("Srvlt");
var variables:URLVariables = new URLVariables();
variables.email = email.text;
variables.pass = pass.text;
request.data = variables;
navigateToURL(request); 
```

所以，你现在做错了。不要发送 2 个请求。选择其中一个`HTTPService`并在应用程序内处理结果，或者`navigateToURL`如果`URLRequest`您只想在新窗口中显示响应。

# java - 如何单击在 ListView - Robotium 自动化中索引为 10 的按钮？

> ID：12968733
> 
> 赞同：4
> 
> 时间：2012-10-19T06:40:27.683
> 
> 标签：java, android, robotium

假设，我有一个 ListView，其中包含 20 个 ListItem。每个项目都有一个按钮，现在我想单击一个位于 ListView 中 10 位置的按钮。我如何通过机器人实现自动化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T07:21:15.323

尝试这样做（不确定它是否有效）

```
//get the list view
ListView myList = (ListView)solo.getView(R.id.list);
//get the list element at the position you want
View listElement = myList.getChildAt(10);// myList is local var
//click on imageView inside that list element
solo.clickOnView(solo.getView(listElement.findViewById(R.id.my_button)));// not double eE 
```

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:15:17.837

我不确定您到底要做什么，我的假设是您的列表视图中有太多项目无法在屏幕上显示，并且您想单击位于第 10 位的按钮或类似的东西？我对吗？

如果是这样，我之前已经生成了一些 listview 辅助函数来获取列表视图中给定索引处的视图：

```
public View getViewAtIndex(final ListView listElement, final int indexInList, Instrumentation instrumentation) {
    ListView parent = listElement;
    if (parent != null) {
        if (indexInList <= parent.getAdapter().getCount()) {
            scrollListTo(parent, indexInList, instrumentation);
            int indexToUse = indexInList - parent.getFirstVisiblePosition();
            return parent.getChildAt(indexToUse);
        }
    }
    return null;
}

public <T extends AbsListView> void scrollListTo(final T listView,
        final int index, Instrumentation instrumentation) {
    instrumentation.runOnMainSync(new Runnable() {
        @Override
        public void run() {
            listView.setSelection(index);
        }
    });
    instrumentation.waitForIdleSync();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T10:20:53.097

```
 //First get the List View  
    ListView list = (ListView) solo.getView(R.id.list_view);

/*        View viewElement = list.getChildAt(10);
        This might return null as this item view will not be created if the 10th element is
        not in the screen. (i.e. the getView would have not been called for this view).

        Suppose for single item list_item.xml is used then
        Get the 10th button item view as follows:*/
    int i = 10 ;      

    View buttonItem = list.getAdapter().getView(i,getActivity().findViewById(R.layout.list_item),list); 

    solo.clickOnView(buttonItem); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T11:36:26.260

尝试使用 solo.clickInList(int line, int index)

就像是：

```
solo.clickInList(10,0) 
```

希望这可以帮助！

[http://www.jarvana.com/jarvana/view/com/jayway/android/robotium/robotium-solo/2.0.1/robotium-solo-2.0.1-javadoc.jar!/com/jayway/android/robotium /solo/Solo.html#clickInList(int,%20int)](http://www.jarvana.com/jarvana/view/com/jayway/android/robotium/robotium-solo/2.0.1/robotium-solo-2.0.1-javadoc.jar!/com/jayway/android/robotium/solo/Solo.html#clickInList(int,%20int))

# java - Drools 与 Web 应用程序的兼容性

> ID：12968737
> 
> 赞同：0
> 
> 时间：2012-10-19T06:40:43.020
> 
> 标签：java, jboss, project, drools

作为最后一年的项目，我选择[了这个想法来实施](http://elrond.informatik.tu-freiberg.de/papers/WorldComp2012/ICA3340.pdf)案例研究：构建基于网络的营养师专家系统。
但是在我的系统中还有一些其他要求，例如

1.  当用户来到网站时，他或她将首先制作个人资料，然后他们就可以使用我们的系统
2.  管理员可以添加与健康相关的新闻
3.  或其他一些与数据库相关的活动

但我的主要功能是论文中给出的。我的问题是，如果我使用 drools 和[Tohu](http://www.jboss.org/tohu)，我可以制作完整的 Web 应用程序吗？像我的其他要求一样可以轻松添加到系统中吗？我有 2 个月的时间来学习技术和 4 个月的时间来实施。如果答案是肯定的，那么应该走什么路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:15:26.023

Drools 是纯 java：它与任何 java web 框架（如 GWT、Errai、JSF、...）和数据库框架（如 hiberante-JPA、...）集成。

[在此处开始使用 Web 应用程序。](http://www.jboss.org/developer)

# iphone - 用一行IOS分隔多个UILabel

> ID：12968740
> 
> 赞同：0
> 
> 时间：2012-10-19T06:40:55.723
> 
> 标签：iphone, ios, cocoa-touch, uilabel, cgcontextref

我想设计一个设置页面，我必须在多个标签之间画线，最好的方法是什么，我用谷歌搜索，了解`CGContextRef`方法。这是正确的方法吗，我需要在标签之间划一条线（连续）。我可以继续采用这种方法还是有其他最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:37:19.057

我已将基本视图设置为深色，并将标签添加为白色，我在两个标签之间设置了一条线间隙，它看起来像一条线。没有额外的工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:56:04.013

可能只是在标签之间添加 UIView 吗？像这样的东西：

```
UILabel *topLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 320, 20)];
//Label settings
[self addSubview:topLabel];
[topLabel release];

UIView *separator = [[UIView alloc] initWithFrame:CGRectMake(topLabel.frame.origin.x, CGRectGetMaxY(topLabel.frame), topLabel.frame.size.width, 2)];
separator.backgroundColor = [UIColor blackColor];

UILabel *bottomLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, CGRectGetMaxY(separator.frame), 320, 20)];
//Label settings
[self addSubview:bottomLabel];
[bottomLabel release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:18:17.053

难道你不能创建一个自定义 UIView 类，其中包含一个 UILabel 和一个 UIView 作为这个自定义视图类的子视图吗？

```
class CustomView : UIView
{
    UIView *line;
    UILabel *label;
}

@property(nonatomic, retain) UIView *line;
@property(nonatomic, retain) UILabel *label; 
```

对于 UIView 子视图，您可以告诉它使用父 UIView 的宽度。

# ios - 如何在 Xcode 中选择 iOS 模拟器作为目标？

> ID：12968747
> 
> 赞同：17
> 
> 时间：2012-10-19T06:41:34.580
> 
> 标签：ios, xcode

我是一个 iOS 菜鸟。我有一个项目在 Xcode 4.4 的 iPhone 模拟器上运行。为了解决不同的问题，我卸载了 4.4，然后安装了 4.5.1。现在，当我尝试在模拟器上运行我的项目时，我收到一个错误“Xcode 无法使用所选设备运行：没有提供的 iOS 设备与兼容的 iOS 版本可用。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。”

如何选择 iOS 模拟器作为目标？

我在哪里点击？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T06:43:42.507

IDE 工具栏部分的左上角区域应该有一个菜单。它应该有一个运行按钮、一个停止按钮，然后是您的应用程序的名称和一个标有 IOS 设备的标签。如果看不到，请单击查看-> 显示工具栏。单击 IOS 设备，您应该会得到一个设备下拉菜单。模拟器应该在该列表中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-19T06:45:14.177

![这应该这样做](../Images/2d062257e6b311f980ccd41040fba788.png)

这个应该可以，其实很简单

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-18T22:48:55.360

以防万一有人觉得这有帮助——

有时您的 xCode 版本不支持部署目标。

在我将部署目标设置为 7.0 之前，我的 iOS 模拟器没有显示为目标（xCode 5.0 似乎不支持 7.1，但只有 5.1 [未确认]）。

希望如果有人偶然发现它会有所帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-21T10:01:32.710

对我来说，问题是工具栏中的选择仅显示 XCode 窗口的一定宽度

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-14T04:35:12.573

我可以通过单击`Window->Devices`( `Shift+Command+2`) 将设备添加到模拟器列表，然后单击`+`左下方的添加模拟器。单击创建后，设备将显示

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-10T23:29:22.017

我遇到过同样的问题。模拟器将运行与“模拟矩阵”下的大小字段中选择的设备不同的设备。

我四处寻找并在 Xcode 的菜单中找到：Product/Destination。[屏幕截图](http://i.stack.imgur.com/eFcMp.jpg)然后我能够运行模拟器以获得正确的大小。

希望这可以帮助 ！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-22T21:27:14.070

确保正确设置支持的平台

[![XCode 显示支持的平台](../Images/7065740447218c46609cc80e57a00278.png)](https://i.stack.imgur.com/ypO9O.png)

# c# - 按钮的另一个标签可能吗？

> ID：12968748
> 
> 赞同：1
> 
> 时间：2012-10-19T06:41:47.930
> 
> 标签：c#, tags

是否有可能获得第二个标签（或其他我可以分配用户定义的 int/string/float 的东西）？

原因是，我已经使用了 ButtonX.Tag，与将第二个 int 放入数组或其他东西相比，拥有第二个标签或其他东西要容易得多......

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T06:43:20.140

如果您创建自己的类并将其对象附加到按钮标签，那就更好了。

```
class ButtonProperty
{
   public int ID { get; set; }
   public string MyProperty { get; set; }
} 
```

然后你可以像这样使用它：

```
ButtonProperty buttonPropertyObj = new ButtonProperty () { ID = 1, MyProperty ="Some property"};
btn1.Tag = buttonPropertyObj; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:44:56.800

您也可以为此使用[元组](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)

```
ButtonX.Tag = new Tuple<int, string>(12, ""); 
```

# php - 在 Zend Framework 中使用 mime 类型上传 docx 文件失败？

> ID：12968754
> 
> 赞同：1
> 
> 时间：2012-10-19T06:42:14.947
> 
> 标签：php, file, zend-framework, upload, docx

我正在尝试将用户的简历上传到我的网站

所以我也限制了文件上传 doc、pdf 和 docx

ms word doc 文件与 pdf 一起上传很好，但 docx 文件随之而来

应用程序/zip mime 类型，因此文件不会被上传

如何进行正确的 mime 类型检查，以便 docx 文件作为其他文件上传

下面是我的代码

```
$config = Zend_Registry::get ( 'config' );

            $files_path = $config->resume->path;

            $adapter = new Zend_File_Transfer ();

            // Limit the MIME type of all given files to gif and jpeg images
            $adapter->addValidator ( 'MimeType', false, array ('application/msword','application/vnd.openxmlformats-officedocument.wordprocessingml.document','application/pdf' ) ); 

        $files = $adapter->getFileInfo ();

        $file_name = null;
        $tmpArr = null;

        foreach ( $files as $file => $info ) {
            if (! empty ( $info ['name'] )) {
                $tmpArr = explode ( ".", $info ['name'] );
            }
        }

        if (! empty ( $tmpArr )) {
            //$file_name = $tmpArr [0] . "-" . $post ['id'] . "." . $tmpArr [1];
            $file_name = $tmpArr [0] . "-" . $post ['id'] . "." . $tmpArr [count ( $tmpArr ) - 1];
            $adapter->setDestination ( $files_path );

            $adapter->addFilter ( 'Rename', array ('target' => $files_path . DS . $file_name, 'overwrite' => true ) );
            if ($adapter->receive ()) {
                // # =  # = # = # = # = # = # = # = # = # = # = # = # = # = # = # = # =
                $arrayKeys = array_keys ( $files );
                $actual_file_name = $tmpArr [0] . "." . $tmpArr [1];
                $uploaded_file_name = $adapter->getFileName ( $arrayKeys [0], false );
                if ($actual_file_name == $uploaded_file_name) {
                    rename ( $files_path . DS . $actual_file_name, $files_path . DS . $file_name );
                }
                // # =  # = # = # = # = # = # = # = # = # = # = # = # = # = # = # = # =

                $post ['filename'] = $file_name;
                $result = $employeeModel->updateEmployeeResume ( $post );
                $old_file = $files_path . DS . $post ['c_image_name'];
                if (file_exists ( $old_file )) {
                    @unlink ( $old_file );
                }

                $this->_flashMessenger->addMessage ( 'Resume added successfully' );
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:59:33.700

DOCX 基本上是一个 ZIP 文件（你可以用你最喜欢的解压器解压它们，试试看！），所以如果你希望你的用户能够上传 DOCX 文件，你必须允许 ZIP 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T06:40:51.980

我在zend中添加了一个临时修复

// 允许上传 zip 文件

```
 $adapter->addValidator ( 'MimeType', false, array ('application/msword','application/vnd.openxmlformats-officedocument.wordprocessingml.document','application/pdf','application/zip' ) ); 
```

// 禁止上传带有 .zip 的文件并因此上传 docx 文件。

```
 $adapter->addValidator('Extension', false, 'doc,docx,pdf'); 
```

# c# - dll 错误的加密失败错误和元数据文件

> ID：12968756
> 
> 赞同：2
> 
> 时间：2012-10-19T06:42:20.003
> 
> 标签：c#, asp.net

我们从另一家公司购买了一个带有源代码的软件。但是当我构建它时，发生了两个错误。我对此进行了很多研究。但找不到解决办法。通常`.snk`文件用于 DLL（将其添加到 GAC 全局程序集缓存中）我无法`PublicPrivateKeyFile.snk`在 app 文件夹或任何地方找到。应用程序引用 dll 的数量，因此每个 DLL 都会显示相同的错误。我应该怎么做才能解决这个错误。

```
Error Cryptographic failure while signing assembly ...\obj\Debug\xyz.dll' -- 'Error reading key file 'c:\Users\Administrator\Desktop\NewCode\abc\Libs\PublicPrivateKeyFile.snk' -- The system cannot find the file specified.` 

Error metadata file 'C:\Users\Administrator\Desktop\NewCode\abc\bin\Debug\xyz.dll' could not be found 
```

什么是元数据文件？如何解决这两个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:45:39.920

你不能。没有他们的`.snk`（强名称密钥文件），您无法以他们的身份签名。`AssemblyInfo.cs`在类内部查找指令`[assembly: ReferenceKeyFile]`并将其注释掉以删除签名。然后，您将能够在本地使用它。

第二种选择是为`.dll`. 然后通过各种方法确保对该公钥的所有引用都是相同的，并弄清楚该密钥是什么。

# html - 如何在 HTML/Webmatrix 中制作简单的图表？

> ID：12968759
> 
> 赞同：1
> 
> 时间：2012-10-19T06:42:24.697
> 
> 标签：html, razor, graph, webmatrix

如何使用 Webmatrix 和 Razor 在 HTML 中制作柱形图或图表？我对javascript的了解绝对为零，大多数问答似乎都提到了这一点。

我想展示一个温度计随着我们办公室每日销售额的增加而上升。数据将来自我的 Razor SQL 查询，该查询已经显示了一个简单的数值。现在我被要求以图形方式显示这一点，以便销售人员可以看到他们与销售目标的接近程度。

我有一个每日销售数据，作为一个名为 nett 的变量：`var nett = [sequel queries to get data]`

有没有办法创建一个简单的图表来表示这个 var 在 cshtml 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:22:45.360

我在 webMatrix 和[http://highcharts.com](http://highcharts.com)上运气不错，但这对您的项目来说可能有点过头了。这是一个用于图表的 javascript 库。一个流行的替代方法是[http://perfectwidgets.com/](http://perfectwidgets.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:57:25.347

我不知道它是否对您的项目有帮助，但存在一个用于 WebMatrix 的图表助手。

您可以在本教程中找到更多信息：[http](http://www.asp.net/web-pages/tutorials/data/7-displaying-data-in-a-chart) ://www.asp.net/web-pages/tutorials/data/7-displaying-data-in-a-chart 。

# video - 避免优酷视频中的推荐

> ID：12968765
> 
> 赞同：1
> 
> 时间：2012-10-19T06:43:04.273
> 
> 标签：video, iframe, embed

我正在将优酷视频嵌入我的网站。视频一播放，优酷视频就会推荐其他视频。所以请让我知道如何避免那些推荐的视频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T17:28:02.453

只需在您的 YKU.Player 对象中传递以下内容：

`show_related: false`

# c - 在 C 中初始化指针

> ID：12968766
> 
> 赞同：2
> 
> 时间：2012-10-19T06:43:13.580
> 
> 标签：c, pointers

我看到两个分配指针的选项

1.

```
int p=5;
int *r=&p 
```

2.

```
int p
int *r;
r=&p; 
```

为什么他们在 1 中使用带星号而在 2 中不使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T06:46:55.050

您应该阅读以下内容：

```
int *r [...] 
```

作为：

```
(int *) r [...] 
```

的类型`r`是`int *`。如果你这样看，你会发现两个版本是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T06:46:08.700

这两种选择实际上是相同的。首先是更少的文字。

星号，当在声明中使用时`int *r`，告诉编译器该变量`r` *是*一个指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:47:38.413

情况2：`int *r`是一个未初始化指针的声明`int`；`r = &p`是将值设置为指针的赋值。

情况 1：`int *r=&p`是一个指针的声明，`int`它的地址初始化为`p`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T06:48:22.903

第二个完全一样。第一个示例也一次性**声明**了变量并**赋值**。**声明**部分需要，`*`因为它指定此变量将存储指向 int 值的指针。**赋值**部分不需要这种东西，因为变量已经`r`声明**为**指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T06:52:04.043

因为 in`1\. int *r=&p`是声明。

并且 in`2\. r=&p`不在声明中。

asterix (*) 表示指针的数据类型。

有关更多信息，您可以[在此处阅读](http://www.cplusplus.com/doc/tutorial/pointers/)

# git - Git：使用 Git 管道命令在裸仓库中编辑文件

> ID：12968770
> 
> 赞同：4
> 
> 时间：2012-10-19T06:43:35.870
> 
> 标签：git, grit

我正在尝试为 GIT 裸存储库创建一个基本的 GIT Web UI，它允许编辑（仅）现有文件。

例如，考虑这两种情况：

*   /dir-a/dir-b/dir-c/a-file.txt
*   /a-file.txt

我如何使用 Git 低级管道命令来保存编辑？另外，我正在使用`Grit`，不确定它是否提供了执行此操作的快捷方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:55:02.083

我不了解 Grit，但是使用 Git 本身，您可以使用 index.js 来做到这一点。

假设要存储在 dir-a/dir-b/dir-c/a-file.txt 中的新内容在 /tmp/new-content.txt 中可用。

```
git read-tree HEAD
newhash=$(git hash-object -w --path=dir-a/dir-b/dir-c/a-file.txt /tmp/new-content.txt)
git update-index --cacheinfo 0644 $newhash dir-a/dir-b/dir-c/a-file.txt
newtree=$(git write-tree)
newcommit=$(git commit-tree $newtree -p HEAD -m 'file editedin a bare repository')
git update-ref HEAD $newcommit 
```

# java - 如何在不使用 ActiveX 或 Java 的情况下访问文件的路径

> ID：12968774
> 
> 赞同：0
> 
> 时间：2012-10-19T06:43:47.587
> 
> 标签：java, javascript, activex

我正在开发一些基于客户端的应用程序，我的一个项目需要访问一个文件，然后通过网络将该文件移动到另一个文件夹。

我已经为这个问题编写了一个 ActiveX，但是我的一些客户说他们没有使用 Internet Explorer，所以我决定将我的程序移到 Java 中。

今天我看到一条新闻：[Apple 从所有 OS X Web 浏览器中删除了 Java](http://arstechnica.com/apple/2012/10/apple-removes-java-from-all-os-x-web-browsers/)，它们仍然支持 Java，但他们停止在 OS X 中包含预安装的 Java 版本。

所以我想知道有没有办法用 Javascript 或其他方法解决这个问题？我不想使用外部插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:45:04.477

如果不使用插件，就无法要求 Web 浏览器移动文件。

一个`<input type="file">`足以将文件上传到服务器。[File API](http://www.w3.org/TR/FileAPI/)将允许您做更多的事情，而不仅仅是上传它，但这并没有扩展到移动它。

# symfony - 在学说中使用 SQL IN 语句过滤查询

> ID：12968775
> 
> 赞同：2
> 
> 时间：2012-10-19T06:44:05.043
> 
> 标签：symfony, doctrine-orm, dql

一个分支机构可能有很多客户，一个客户可能与多个分支机构相关。所以这是一个多对多的关系。

**分支：**

```
<many-to-many target-entity="Customer" inversed-by="branches" field="customers"/> 
```

**顾客：**

```
<many-to-many field="branches" target-entity="Branch" mapped-by="customers"/> 
```

现在我要执行以下查询：选择客户分支与给定分支对象匹配的所有客户。

这是我尝试过的：

```
 $branch = $em->getRepository('MyBundle:Branch')
               ->findOneById($bid);

  $qb->select(array('c'))
     ->from('MyBundle:Customer', 'c')
     ->where($qb->expr()->in('c.branches', $branch))
     ->andWhere('c.delted = 0')
     ->getQuery(); 
```

所以我的想法是使用 IN 语句。但这不起作用。

**错误：**

> 致命错误：第 48 行的 DateTime 类对象无法转换为字符串 ..Query\Expr\Func.php

任何想法如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:12:11.717

尝试在您的查询中添加连接：

```
$qb->select(array('c', 'b'))
    ->from('MyBundle:Customer', 'c')
    ->join('c.branches', 'b')
    ->where('b IN (:branch)')
    ->andWhere('c.deleted = 0')
    ->setParameter('branch', array($branch))
    ->getQuery(); 
```

# maven - 仅在满足“高级”条件时运行某些插件

> ID：12968780
> 
> 赞同：1
> 
> 时间：2012-10-19T06:44:15.840
> 
> 标签：maven

在我的 Maven 构建中，有一些插件我只想在满足某些条件时运行。我知道配置文件是如何工作的，但我担心激活元素对于这些情况来说太简单了。

最常见的情况是仅当某个文件或一组文件自上次构建以来已更改时才运行插件。

原因是某些插件很耗时，如果我引用的文件自上次运行以来没有更改，则运行插件毫无意义。

# sdk - 充分利用 CUDA 5 的功能需要哪些卡和计算能力

> ID：12968782
> 
> 赞同：6
> 
> 时间：2012-10-19T06:44:29.323
> 
> 标签：sdk, cuda, language-features, computer-architecture

我们刚刚收到了稳定版的 CUDA 5。有一些新的术语，如 Kepler 和使用性能更好的 MPI 的能力，以及同时运行同一张卡和 32 个应用程序的能力。我有点困惑，正在寻找这些问题的答案：

*   充分利用 CUDA 5 的功能需要哪些卡和计算能力？
*   新功能是否仅适用于 Kepler 架构，例如 GPUDirect、Dynamic Parallelism、Hyper Q 和 Dynamic Parallelism。
*   如果我们有 Fermi 架构，那么使用 CUDA 5 的好处是什么？除了在 Linux 和 Eclipse 上使用 NSight 的能力之外，它是否带来了其他好处。我认为最重要的功能是构建库的能力？
*   从 CUDA 4 到 CUDA 5，您是否看到任何性能改进？（我在 Linux 机器上得到了一些加速）

我发现了一些文件，比如

*   [http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/Kepler_Compatibility_Guide.pdf](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/Kepler_Compatibility_Guide.pdf)
*   [http://www.nvidia.com/content/PDF/kepler/NVIDIA-Kepler-GK110-Architecture-Whitepaper.pdf](http://www.nvidia.com/content/PDF/kepler/NVIDIA-Kepler-GK110-Architecture-Whitepaper.pdf)
*   [http://blog.cuvilib.com/2012/03/28/nvidia-cuda-kepler-vs-fermi-architecture/](http://blog.cuvilib.com/2012/03/28/nvidia-cuda-kepler-vs-fermi-architecture/)

然而，一个更好、更简短的描述可能会让我们的头脑更清晰。

PS：请不要将答案局限于上述问题。我可能会错过一些类似的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T10:22:30.950

动态并行需要计算能力 3.5（例如 GK110），因为早期的 GPU 没有线程启动内核或直接将其他 API 调用注入硬件命令队列所需的硬件。

Hyper-Q 需要计算能力 3.5。

SHFL 内在函数需要 CC 3.0 (GK104)

CUDA 5 中的设备代码链接、NSight EE、nvprof、性能改进和错误修复使 Fermi 和更早的 GPU 受益。

# macos - 可可应用程序。(MAC) 很慢

> ID：12968786
> 
> 赞同：-2
> 
> 时间：2012-10-19T06:45:01.680
> 
> 标签：macos, cocoa, nstimer, nsviewcontroller, nstabview

我正在使用基于计时器的应用程序，我在主运行循环中连续运行 3 个计时器，以便在任何 UI 更新的情况下计时器将连续运行。但过了一段时间（大约 1 小时），我的应用程序挂起，而不是按下按钮等。响应至少需要 10-15 秒。

我想知道 MAC cocoa 应用程序滞后的原因是什么。我正在开发基于计时器的应用程序。所以我需要多个计时器来运行。当没用时，我也无效。但它仍然没有帮助我。

请为 mac 提供任何性能调试指导，以便我可以检查我的代码在哪里创建问题等？

代码：

```
NSRunLoop *runloop = [NSRunLoop currentRunLoop]; 
updateServerTimeTimer = [NSTimer timerWithTimeInterval:1.0 
                                                target:self
                                              selector:@selector(updateServerTime)
                                              userInfo:nil 
                                               repeats:YES]; 
[runloop addTimer:updateServerTimeTimer forMode:NSRunLoopCommonModes]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:25:25.630

您的问题是`NSRunLoopCommonModes`.use`scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:`方法，它会将 NSTimer 安排在 .use 中`NSDefaultRunLoopMode`。如果 UI 正在更新，您的应用程序稍后会收到其他事件。看看[这个](https://stackoverflow.com/a/7223765/944634)帖子。

# android-emulator - 同时进行 webview 选择和滑动

> ID：12968788
> 
> 赞同：1
> 
> 时间：2012-10-19T06:45:12.733
> 
> 标签：android-emulator

我有一个包含一些文本的 webview。我需要能够同时滑动`webview`并选择文本。问题是在我实现了覆盖该`onTouchEvent`方法的滑动之后，其他功能`webview`似乎已经冻结，webview 中的链接不再可点击，并且文本选择（之后`longClick`）不再起作用，我需要制作实现滑动并保留`webview`.

我也尝试覆盖`longClick`click 方法并使用以下方法来实现文本选择：

```
public void selectAndCopyText() {
    try {
        Method m = WebView.class.getMethod("emulateShiftHeld", null);
        m.invoke(MyWebView.this, null);
    } 
    catch (Exception e1) {
        e1.printStackTrace();
        KeyEvent shiftPressEvent = new KeyEvent(0,0,KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_SHIFT_LEFT,0,0);
        shiftPressEvent.dispatch(this);
    }
} 
```

但是当这个方法被调用时它不起作用我只得到了上面的栏，`copy/ paste/ search/ websearch...`但没有`webview`发生实际的选择。

# python - 为 Flask 编写 WSGI 中间件的首选方式

> ID：12968793
> 
> 赞同：0
> 
> 时间：2012-10-19T06:45:34.140
> 
> 标签：python, flask, wsgi

我想编写一个可以与我的烧瓶应用程序一起使用的 WSGI 中间件。关于我如何做到这一点的任何例子？我在他们的文档中找到了一个，但它说这不是首选的方法，所以想知道什么是？

我想编写一个函数来加密会话信息并将其作为响应的 cookie 发送。根据请求，它会解密 cookie，并将其作为散列传递。基本上客户端会话管理作为加密的 cookie。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:48:35.323

Em .. 你读过 Flask 或 Werkzeug 文档吗？Flask 允许通过 cookie传递加密**签名的** [会话数据。](http://flask.pocoo.org/docs/quickstart/#sessions)如果您想要自己的一些基于 cookie 的安全会话管理，请检查[SecureCookieSessionInterface](http://flask.pocoo.org/docs/api/#flask.sessions.SecureCookieSessionInterface)。

# sql - 使用 group by 的 SQL 子查询

> ID：12968803
> 
> 赞同：0
> 
> 时间：2012-10-19T06:46:31.267
> 
> 标签：sql, sql-server, join, group-by

我有以下 SQL 查询：

```
SELECT 
kvknum.cd_hfdrelnr, 
kvknum.cd_kvkanum,
    relName.cd_hfdrelnr
FROM
(
    SELECT 
        cd_hfdrelnr, 
        cd_kvkanum

FROM er_105
WHERE cd_kvkanum IN
(
    SELECT cd_kvkanum
    FROM er_105
    GROUP BY cd_kvkanum
    HAVING COUNT(*) > 1 
)
AND cd_kvkanum != ''
ORDER BY cd_kvkanum
) AS kvknum
LEFT OUTER JOIN
(
    SELECT 
        cd_hfdrelnr,
        cd_relnaam
    FROM er_101
) AS relName
ON kvknum.cd_hfdrelnr = relName.cd_hfdrelnr 
```

该`GROUP BY`功能是不允许的，并且需要它，因此相同的`cd_kvkanum`值在彼此下方一起显示，是否有解决此问题的方法或如何实现？

随之而来的错误如下：

“消息 1033，级别 15，状态 1，第 21 行 ORDER BY 子句在视图、内联函数、派生表、子查询和公用表表达式中无效，除非还指定了 TOP 或 FOR XML。消息 156，级别 15，状态1，第 28 行关键字 'AS' 附近的语法不正确。”

当我运行以下查询时：

```
SELECT 
    cd_hfdrelnr, 
    cd_kvkanum

FROM er_105
WHERE cd_kvkanum IN
(
    SELECT cd_kvkanum
    FROM er_105
    GROUP BY cd_kvkanum
    HAVING COUNT(*) > 1 
)
AND cd_kvkanum != ''
ORDER BY cd_kvkanum 
```

（连接的第一个子查询）结果如下：
1235 - 123
4652 - 123
8569 - 1234
4985 - 1234

虽然我想将 cd_relnaam 添加到结果列表中，但是当在查询上使用 JOIN 时，我的结果是空白的......

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:55:29.513

这不是一个完整的答案，但是，如果我没记错的话，您的查询可以写得更简单。当人们可以编写简单的查询时，90% 的错误会出现在他们编写非常复杂的查询时。简单是成功的关键:) 当你给出更确切的问题时，我会编辑答案

```
SELECT 
    kvknum.cd_hfdrelnr, 
    kvknum.cd_kvkanum,
    relName.cd_hfdrelnr
FROM er_105 as kvknum
    LEFT OUTER JOIN er_101 as relName on relName.cd_hfdrelnr = kvknum.cd_hfdrelnr
where
    kvknum.cd_kvkanum IN
    (
        SELECT cd_kvkanum
        FROM er_105
        GROUP BY cd_kvkanum
        HAVING COUNT(*) > 1 
    ) AND
    cd_kvkanum != '' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:24:23.003

这里的问题不在于 GROUP BY，实际上是 ORDER BY，你不能把它放在子查询中，它必须在你的父查询中。另外，我的理解是，您需要 er_105 中的记录，其中 cd_kvkanum 出现多次并且不是空白的，但您不想汇总。

```
SELECT er_105.cd_hfdrelnr, 
       er_105.cd_kvkanum,
       er_101.cd_relnaam
  FROM er_105
  JOIN (SELECT cd_kvkanum,COUNT(cd_kvkanum)
          FROM er_105
         WHERE cd_kvkanum != ''
      GROUP BY cd_kvkanum
        HAVING COUNT(cd_kvkanum) > 1
       ) kvknum ON er_105.cd_kvkanum = kvknum.cd_kvkanum
LEFT JOIN er_101 ON er_105.cd_hfdrelnr = er_101.cd_hfdrelnr
 ORDER BY er_105.cd_kvkanum 
```

通常，当您想计算某事的出现次数时，最好执行 SELECT something,COUNT(PrimaryKey) 而不是 COUNT(*)。* 使 SQL 做了额外的步骤来弄清楚 * 代表什么。当然，就像 stackoverflow 上的许多查询一样，总是有一种更简单的方法来编写它；）

# javascript - 在 Meteor.js 中动态加载模板

> ID：12968808
> 
> 赞同：21
> 
> 时间：2012-10-19T06:46:55.200
> 
> 标签：javascript, meteor

我希望能够在不明确指定模板的情况下动态加载模板。

举个例子：

```
<template name="foo">
</template> 
```

其中'foo'是模板，我希望能够通过调用一些方法来动态加载它：

```
Meteor.render(Meteor.loadTemplate('foo')); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-10-17T09:16:35.243

以下是从 Meteor 0.9.4 - 1.0 开始动态渲染模板的方法。在撰写本文时，所有其他答案都已过时。

假设您正在编辑一堆记录，或者创建一个新记录，并且想要根据一些 Session 变量呈现`update`模板或模板。`new`

有两种方法可以做到这一点：

1) 这是**Meteor 0.9.4 或更新版本的官方推荐方法**- 它使用[`Template.dynamic`](http://docs.meteor.com/#/full/template_dynamic)：

```
<template name="records">
  {{> Template.dynamic template=whichOne}}
</template>

<template name="recordUpdate">
  ...
</template>

<template name="recordNew">
  ...
</template>

Template.records.helpers({
  whichOne: function () {
    return Session.get('edit') ? 'recordUpdate' : 'recordNew'
    // note that we return a string - per http://docs.meteor.com/#template_dynamic
  }
}); 
```

2) 这适用于各种 Meteor 版本，但不推荐正式使用，因为不清楚模板是动态选择的：

```
<template name="records">
  {{> whichOne}}
</template>

{{! Note how "whichOne" is indistinguishable from a constant template name... }}
{{  ...like "recordUpdate" or "recordNew" below. }}

<template name="recordUpdate">
  ...
</template>

<template name="recordNew">
  ...
</template>

Template.records.helpers({
  whichOne: function () {
    return Session.get('edit') ? Template.recordUpdate : Template.recordNew
    // note that we return a Template object, not a string
  }
}); 
```

要将数据上下文传递给模板，请使用：

```
{{> Template.dynamic template=whichOne data=myData}} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-28T21:14:06.137

**Meteor 0.9.x 新 API**

Dan Dascalescu 指出 Meteor 现在有内置的动态模板！这很好，因为您不需要包含以前版本中看到的额外代码。

```
{{> Template.dynamic template=template [data=data] }} 
```

**Meteor 0.8.x 旧版**

*没有*数据的动态模板：Boris Kotov 更新的 Blaze (0.8.0) 答案在正确的轨道上（取自最新文档），但它对我来说不起作用。我得到了以下工作：

```
{{> dynamicTemplate name=myDynName}}

<template name="dynamicTemplate">
    {{#with chooseTemplate name}}
        {{> template}}
   {{/with}}
</template>

Template.dynamicTemplate.chooseTemplate = function (name) {
    return { template: Template[name] };
}; 
```

我希望有一个更简单的解决方案，但我需要将模板包装在 JSON 中，如图所示。也许这会帮助其他人继续前进。

*带有*数据的动态模板：如果您拥有并且希望数据是动态的，请务必创建一个可以做出反应的辅助方法。请务必在某处执行 Session.set() 以查看效果。

```
// Inside "myContainingTemplate"
{{> dynamicTemplateWithData name=myDynName data=myDataHelper}}

<template name="dynamicTemplateWithData">
    {{#with chooseTemplate name}}
        {{#with ../data}}
            {{> ..}}
        {{/with}}
    {{/with}}
</template>

Template.dynamicTemplateWithData.chooseTemplate = function (name) {
    return Template[name];
};

Template.myContainingTemplate.helpers({
    myDataHelper: function () {
        Session.get('myReactiveKey');
    }
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-20T07:41:32.583

您已经找到 Meteor.render 但您缺少的是模板加载。在文档中它提到您可以调用 Template.foo() 来返回模板的 HTML。

[http://docs.meteor.com/#template_call](http://docs.meteor.com/#template_call)

将它们放在一起，您可以访问模板 foo 或任何其他使用括号访问的模板，因此：

```
var templateName = "foo";
var fragment = Meteor.render( function() {
    return Template[ templateName ](); // this calls the template and returns the HTML.
}); 
```

那么fragment就是你的Reactive Fragment，这样你的模板就可以继续接收实时更新。您的片段现在需要放置在网页中（我使用 jQuery，所以这个示例也是如此）：

```
$("#htmlnode").html( fragment ); 
```

$("#htmlnode") 只是 DOM 中的一个节点，您希望在其中呈现模板。现在，您的网页中就有了渲染的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T15:02:12.820

我只是这样做，不需要jQuery：

**已编辑**

```
Template.mainContent.showContentFromRouter = function() {
    return Template[Meteor.Router.page()]();
}; 
```

在这种情况下，我使用 Meteor 路由器，并返回我选择的任何模板（从路由器），但你可以这样做：

```
Template.mainContent.showDynamicContent = function() {
    return Template['someTemplateYouveDefined']();
}; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-10T20:28:07.240

火焰更新：

[https://github.com/meteor/meteor/wiki/Using-Blaze#templatefoo-is-not-a-function-and-does-not-return-a-string](https://github.com/meteor/meteor/wiki/Using-Blaze#templatefoo-is-not-a-function-and-does-not-return-a-string)

动态呈现具有给定数据上下文的模板

老的：

```
{{dynamicTemplate name="templateName" data=dataContext}}

Template.foo.dynamicTemplate = function (opts) {
  return Template[opts.name](opts.data);
}; 
```

新：（值得注意的是，在 Blaze 中，包含或块助手的关键字参数被捆绑到成为新数据上下文的单个对象中）

```
{{> dynamicTemplate name="templateName" data=dataContext}}

<template name="dynamicTemplate">
  {{#with chooseTemplate name}}
    {{#with ../data}}  {{! original 'data' argument to DynamicTemplate}}
      {{> ..}}         {{! return value from chooseTemplate(name) }}
    {{/with}}
  {{/with}}
</template>

Template.dynamicTemplate.chooseTemplate = function (name) {
  return Template[name];
} 
```

顺便说一句，我并没有真正玩过它，但这是我从新的 blaze 文档中得到的。所以我认为这应该是这样做的方法；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-31T14:41:50.653

**Meteor 0.8.x 旧版**

使用[Joc 的](https://stackoverflow.com/a/12986397/792406)回答作为指导，我使用[http://docs.meteor.com/#template_call](http://docs.meteor.com/#template_call)实现了类似的效果，但使用了帮助器，如文档所建议的那样：

> 当在模板助手、Meteor.render 的主体或正在生成响应式 HTML 的其他设置中调用时，生成的 HTML 会被注释，以便它呈现为响应式 DOM 元素

我的 client.js 看起来有点像这样：

```
Template.myPageTemplate.helpers({
  dynamicTemplate: function() {
    // conditional logic can be added here to determine which template to render
    return Template.myDynamicTemplate();
  }
}); 
```

我的 html 看起来像这样：

```
<template name="myPageTemplate">
  <h1>My Template</h1>
  {{{dynamicTemplate}}}
</template>

<template name="myDynamicTemplate">
  <h1>My Dynamic Template</h1>
</template> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-13T06:00:00.010

来自[https://github.com/meteor/meteor/wiki/Using-Blaze](https://github.com/meteor/meteor/wiki/Using-Blaze)

```
{{> post}}

Template.foo.helpers({
  post: function () {
    return Template[this.postName];
  }
}); 
```

模板包含现在在帮助器和数据的命名空间中搜索模板对象，因此很容易以编程方式选择要使用的模板。这是一个强大的功能，并且将允许将一个模板分配为另一个模板的助手等模式，以便可以覆盖它。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-03-24T08:55:10.193

根据希尔马克的回答，这是最容易得到的：

```
Template.main.template = function() {
  if (some_condition) {
    return Template.A();
  } else {
    return Template.B();
  }
}; 
```

用对应的.html

```
<body>
    {{> main}}
</body>

<template name="main">
    {{{template}}}
</template>

<template name="A">
    <h1>Template A</h1>
</template>

<template name="B">
    <h1>Template B</h1>
</template> 
```

**编辑** 在 Meteor 0.8.0 中不起作用

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-04-05T21:36:04.280

对我来说，最简单的方法就是创建一个函数 get_dynamic_template，如下所示：

```
var a= get_dynamic_template(template_name,data); 
```

它返回可以呈现为普通变量 {{a}} 的内容

这个函数的代码很简单：

```
var get_dynamic_template = function(template_name,data)
{

      return function(){
        return new Handlebars.SafeString(
          UI.toHTML(
               Template[template_name].extend({data: function () { return data; }}))
          );
      };

} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-06-02T22:44:29.180

这将处理有数据和无数据的动态模板：（需要 Blaze/Meteor 0.8）

```
{{> dynamicTemplate name=templateName}}

<template name="dynamicTemplate">
    {{#with chooseTemplate name }}
        {{#if ../data}}
            {{#with ../data }}
                {{> .. }}
            {{/with}}
        {{else}}
            {{> this}}
        {{/if}}
    {{/with}}
<template name="dynamicTemplate"> 
```

模板 javascript:

```
Template.dynamicTemplate.chooseTemplate = function (name) {
    return Template[name];
}; 
```

# maven - 使用 Cargo Maven 插件将模块复制到 JBoss

> ID：12968812
> 
> 赞同：1
> 
> 时间：2012-10-19T06:47:10.750
> 
> 标签：maven, jboss, cargo

我使用 cargo maven 插件下载 jboss 作为 dist 并部署我们的耳朵。我们使用的 JBoss 是 7.1.0

我的问题是，我们需要在 JBoss 中添加一个额外的模块。如何将模块复制到目标目录中的 JBoss？

我用这个配置试了一下：

```
<configuration>
    <type>standalone</type>
    <files>
        <file>
            <file>${project.basedir}/modules/springframework</file>
            <todir>../../installs/jboss-as-dist-7.1.1.Final/jboss-as-7.1.1.Final/modules</todir>
        </file>
    </files>
</configuration> 
```

但这给了我这个错误：[错误] 无法在项目 gevomanagementservice_test_integration 上执行目标 org.codehaus.cargo:cargo-maven2-plugin:1.2.1:start (start-container)：执行目标 org.codehaus 的启动容器。 cargo:cargo-maven2-plugin:1.2.1:start failed: 无法将源文件 [C:\blabla/modules/springframework] 复制到 [C:\blabla\target\cargo\configurations\jboss71x/../.. /installs/jboss-as-dist-7.1.1.Final/jboss-as-7.1.1.Final/modules/springframework]: C:\blabla\modules\springframework (系统找不到指定的文件) -> [帮助1]

看来我只能使用此配置复制文件。是否有可能复制整个目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T00:29:43.403

我也遇到过这个问题。但我只需要复制少量文件，所以这对我来说不是问题。我自己实际上并没有尝试过以下解决方案，但理论上它可能会起作用。

假设您想通过 cargo 部署您的工件并运行集成测试。我想你可以选择将你的 cargo:install 目标绑定到，比如 package 短语。然后有另一个插件，即 maven-antrun-plugin 来执行文件夹复制任务，在包短语中也是如此。然后在 pre-integration-test 阶段，你可以绑定 cargo:start （或部署。参见[cargo reference](http://cargo.codehaus.org/Maven2+plugin#Maven2plugin-gettingstarted)）来启动你的 jboss 实例。Maven 生命周期将如下所示：

*   干净的
*   包裹
    *   cargo:install（安装 JBoss）
    *   antrun（将文件复制到已安装的 JBoss）
*   预集成测试
    *   cargo:start （注意文件说这个目标不会调用 cargo:install 但重用相同的逻辑。我不确定这是否会消除你的 antrun 效果。为了安全起见，你可能想尝试 cargo:deploy）
*   集成测试
*   整合后测试
    *   货物：停止

# jasper-reports - 对客户隐藏 JRXML，如果他们也使用 JasperReports Server？

> ID：12968814
> 
> 赞同：0
> 
> 时间：2012-10-19T06:47:17.193
> 
> 标签：jasper-reports, jasperserver

我们的要求是对客户隐藏*JRXML*，实际上我们必须在客户机器上安装*JasperReports Server*，所有的报告只会在那里。

如果他们安装了*iReport*，那么他们也将能够看到我们的*JRXL*代码。

如何对客户隐藏*JRXML*文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:25:38.360

我找到了对客户隐藏 JRXML 的解决方案，将所有 JRXML 保存在 JasperReport 服务器的不同文件夹中，然后在 JR 服务器中创建任何报告时使用存储库中的这些 JRXML。现在，如果您想隐藏 JRXML 文件，请设置此文件夹的权限。

# php - 在函数php中返回一个循环

> ID：12968817
> 
> 赞同：4
> 
> 时间：2012-10-19T06:47:33.213
> 
> 标签：php

是否可以返回一个循环？不是结果，而是它自己的循环。我想在 php 中创建一个函数。比如像这样。

```
function myloop($sql){
$query = mysql_query($sql);

return while(mysql_fetch_assoc($query))
} 
```

我想创建它的原因是为了避免重复代码。任何人都可以帮助我吗？谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T06:51:05.277

[`Iterator`](http://php.net/manual/class.iterator.php)不，但是您可以使用截至今天发布的稳定版本的 PHP来模拟它。在 PHP 5.5 中，也会有接近的生成器。

```
$lazyQuery = new SqlResultItertor($sql);
foreach ($lazyQuery as $assoc) {
    $assoc; # the result, one per row
} 
```

顺便说一句：[`PDO`](http://php.net/pdo)并[`MySqli`](http://php.net/mysqli)提供这个已经开箱即用的（不是惰性查询，但结果是可遍历的），对于 mysql，您需要自己编写这样的迭代器结果对象。

对于一些`mysql_*`与功能相关的代码，请参阅[此答案](https://stackoverflow.com/a/11580420/367456)。然而，截至今天，一般建议是使用 PDO 或 mysqli，它们提供更多开箱即用的功能。请参阅[如何使用已弃用的 mysql_* 函数成功重写旧的 mysql-php 代码？](https://stackoverflow.com/questions/10919277/how-to-successfully-rewrite-old-mysql-php-code-with-deprecated-mysql-functions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T06:53:14.737

不，你不能。但是，您可以将函数传递给函数：

```
// The myloop function, with another name.
function query($sql, $rowcallback)
{
  $query = mysqli_query($sql); // use mysqli, not mysql
  while 
    ( ($row = mysql_fetch_assoc($query)) &&
      call_user_func($rowcallback, $row) );
}

// The code to process a row.
function processRow(array $row)
{
   // Use your row here..
   var_dump($row);

   return true; // You can return false to break processing.
}

//calling:
query($yourSelf, 'processRow'); 
```

除了通过名称传递函数，您还可以使用匿名函数，具体取决于您的 php 版本：

```
//calling:
query($yourSelf, 
  function(array $row)
  { 
    var_dump($row); 
    return true; // You can return false to break processing.
  }); 
```

从被调用者调用的函数通常称为*回调*。[call_user_func](http://www.php.net/manual/en/function.call-user-func.php)是调用回调的最佳方式，因为它还将接受方法和静态方法，而不仅仅是函数，因此您更灵活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T06:49:07.690

不，不是。

您可以返回[一个函数](http://php.net/manual/en/functions.anonymous.php)，除了运行一个循环之外什么都不做，但您不能返回循环本身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T06:49:17.167

不。

例如，您可以返回一个可能包含循环的匿名函数，但您只能从函数返回*值*，而不能从语言构造返回值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T06:52:16.817

你应该把它翻过来！

您可以使用[变量函数](http://php.net/manual/en/functions.variable-functions.php)以这种方式执行此操作，而不是返回循环：

```
function myloop($sql, $myFunction){ 
    $query = mysql_query($sql);  
    while(mysql_fetch_assoc($query)) {
        $myFunction($result);
    }

} 

function doSomethingWithTheResult($result) {
   echo $result; // just to have something here...
}

//now the usage:
myloop("SELECT 1", 'doSomethingWithTheResult'); 
```

眯着眼睛，这类似于[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)OOP 设计模式的概念。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T06:53:44.140

不，但你可以

```
function loopdate($sql,$code)
{
 $query=mysql_query($sql)
 while (mysql_fetch_assoc($query))
 {
  eval($code);
 }
} 
```

然而 - eval 非常危险，它真的很气馁。

```
function loopdate($sql,$function)
{
 $query=mysql_query($sql)
 while ($data=mysql_fetch_assoc($query))
 {
  $function($data);
 }
} 
```

会更好。

```
myfunc($data)
{
 foreach ($data as $key->$value)
 {
  print "<tr><td>".$key."<td><td>".$value."</td></tr>\n";
 }
} 
```

所以你可以打电话

```
loopdate("select * from mytable","myfunc"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-15T18:25:34.940

在 PHP 5.5+ 中，可以使用`yield`关键字代替`return`（这称为[生成器](http://php.net/manual/en/language.generators.overview.php)）：

```
function myloop($sql) {
    $query = mysql_query($sql);
    while (($row = mysql_fetch_assoc($query))) {
        yield $row;
    }
}

foreach (myloop('SELECT * FROM foo') as $row) {
    // do something with $row
} 
```

这与您可以在旧 PHP 中使用迭代器执行的操作没有太大区别，但代码更简洁。

# iphone - 如何从 UIImage 获取 URL

> ID：12968821
> 
> 赞同：6
> 
> 时间：2012-10-19T06:47:39.493
> 
> 标签：iphone, objective-c, ios, ios5, ios4

如何从 UIImage 获取 URL？我从 iPhone 库中获得了一张图片，我调整了它的大小，我不想保存新图片，但我想获取它的 URL。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-02-06T12:10:07.983

您说您不想保存它，但如果您需要 a 的 URL `UIImage`，您可以轻松保存临时副本以获取所需的 URL。

对于较新的 swift 5：

```
// Create a URL in the /tmp directory
guard let imageURL = NSURL(fileURLWithPath: NSTemporaryDirectory()).appendingPathComponent("TempImage.png") else {
    return
}

let pngData = image.pngData();
do {
    try pngData?.write(to: imageURL);
} catch { } 
```

现在，您可以使用 URL 将图像分享到社交媒体或您需要对其进行的任何操作。

对于以前的 Swift 版本：

```
// Create a URL in the /tmp directory
guard let imageURL = NSURL(fileURLWithPath: NSTemporaryDirectory()).appendingPathComponent("TempImage.png") else {
    return
}

// save image to URL
do {
    try UIImagePNGRepresentation(myImage)?.write(to: imageURL)
} catch { } 
```

请参阅[此处](https://stackoverflow.com/a/12023082/3681880)了解更多信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-19T06:55:02.750

UIImage 没有 URL 或文件信息。它只是表示像素颜色数据的字节集合。如果您从 UIImagePicker 获取 UIImage，那么您可以获取资源库中原始图像的 URL。但是您必须在图像选择器委托方法中获取此 URL，并且必须与 UIImage 对象分开跟踪它。

编辑 - 根据 OP 的评论，这不是所要求的信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-31T16:30:43.377

您正在寻找的是`UIImagePickerControllerReferenceURL`信息字典中委托回调提供的参数。你需要做的是：

```
NSURL* imageURL = [info objectForKey:UIImagePickerControllerReferenceURL]; 
```

它看起来像这样：

```
assets-library://asset/asset.JPG?id=SOME_GUUID&ext=JPG 
```

您可以使用后者来引用您在`UIImage*`回调中获得的相同图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-14T23:39:52.390

您可以将 UIImage 子类化并创建一个覆盖 initWithURL: 以将 URL 保存到创建的属性......类似这样的东西。

```
+ (id) initWithURL:(NSURL*)url
{
    [super initWithURL:url];
    self.url = url;
} 
```

# excel - Excel 公式 - 比较两个表的值

> ID：12968822
> 
> 赞同：0
> 
> 时间：2012-10-19T06:47:46.653
> 
> 标签：excel, excel-formula, excel-2010

我需要帮助设置 Excel 公式。

我需要比较两个表，以便将**table2的***货币汇率*与**table1**的*金额*相乘，具体取决于table1**的***日期*与**table2的***日期*字段匹配。

 *********如果您看一下我制作的屏幕截图，我想您会明白我想要做什么：[图片](http://i.imgur.com/dvg9B.png)

希望你能帮我为此设置一个公式。如果您需要用于测试的 excel 文件，我将其上传到**zoho**。[关联](https://public.sheet.zoho.com/public/tonyclifton77/excelcurrency)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:48:21.643

这应该这样做：

```
=IF(ISNA(A3*INDEX($F$2:$H$13,MATCH(1,(B3=$G$2:$G$13)*(C3=$F$2:$F$13),0),3)),A3,A3*INDEX($F$2:$H$13,MATCH(1,(B3=$G$2:$G$13)*(C3=$F$2:$F$13),0),3)) 
```

选择您的单元格并将光标放在编辑栏中，然后按`Ctrl+Shift+Enter`

PS：感谢 RocketDonkey ;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T08:50:32.263

为了展示各种方式，这里是使用的替代方法`SUMPRODUCT`：

```
=A2*SUMPRODUCT(--($F$2:$F$13=C2),--($G$2:$G$13=B2),$H$2:$H$13) 
```

如果您想以`0`不同的方式处理值，您可以将所有内容包装在一个`IF`语句中。

```
=IF(A2*SUMPRODUCT(--($F$2:$F$13=C2),--($G$2:$G$13=B2),$H$2:$H$13)=0,
  "Special stuff",
  A2*SUMPRODUCT(--($F$2:$F$13=C2),--($G$2:$G$13=B2),$H$2:$H$13)) 
```

![在此处输入图像描述](../Images/b428ff2bf99069b87e74fcbfc1e5d642.png)*********

# jquery - jQuery ajaxSend 处理程序目标问题

> ID：12968824
> 
> 赞同：2
> 
> 时间：2012-10-19T06:47:54.930
> 
> 标签：jquery, ajax

我无法让以下内容在我的项目中工作。

我目前在整个代码库中都有几个对方法的调用`load()`，例如：

```
$('#cart').load('/cart/user/12312'); 
```

我现在要做的是将一个侦听器附加到`#cart`dom 元素，当这个元素的内容像上面那样加载时，我可以执行一些代码来指示它正在加载。这是我到现在为止的：

```
$('#cart').ajaxSend(function (event, xhr, settings) {
    if ($(event.target).is('#cart')){
        $(event.target).html('loading ...');
    }
}); 
```

我现在面临的问题是此事件会触发所有 ajax 请求，即使是那些没有`#cart`作为目标的请求。`event.target`似乎总是如此，或者`#cart`无论我怎么称呼`.ajaxSend()`。即使在进行完全不同的`$.ajax()`or`load()`调用时，即使不直接将内容加载到 dom 元素中，事件也会触发`#cart`as`event.target`

有谁知道如何解决这个问题？我想执行一些代码，只有在调度 ajax 调用时才会将其内容加载到`#cart`

PS：我知道这`ajaxSend`是 jquery 中的全局 Ajax 事件之一，但它应该以某种方式从处理程序派生事件的上下文不是吗？

演示：http: [//jsfiddle.net/cWRwf/1/](http://jsfiddle.net/cWRwf/1/)

# c++ - 什么是 C++11 原子类？

> ID：12968825
> 
> 赞同：-2
> 
> 时间：2012-10-19T06:47:56.077
> 
> 标签：c++, class, c++11, atomic

我想知道 GCC-4.7.2 在[4.7 更改日志](http://gcc.gnu.org/gcc-4.7/changes.html)中谈到的“C++11 原子类”是什么。我试过谷歌搜索，但没有得到任何有用的信息。这是否意味着所有操作都是原子的，因此类是线程安全的并且操作是可线性化的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T06:53:32.487

引用[此参考资料](http://en.cppreference.com/w/cpp/atomic)：

> atomic 库为细粒度的原子操作提供组件，允许无锁并发编程。

所以简而言之，是的，对原子变量的所有操作都是原子的，因此是线程安全的。

# ember.js - 使用 Ember.js 数据 RESTAdapter 时应该如何处理错误？

> ID：12968829
> 
> 赞同：42
> 
> 时间：2012-10-19T06:48:22.720
> 
> 标签：ember.js, ember-data

ember-data.js：[https ://github.com/emberjs/data/tree/0396411e39df96c8506de3182c81414c1d0eb981](https://github.com/emberjs/data/tree/0396411e39df96c8506de3182c81414c1d0eb981)

简而言之，当出现错误时，我想在视图中显示错误消息，然后用户可以 1）取消，这将回滚事务 2）更正输入错误并成功提交事务，通过验证服务器。

下面是来自源代码的代码片段。它不包括错误回调。

```
updateRecord: function(store, type, record) {
  var id = get(record, 'id');
  var root = this.rootForType(type);

  var data = {};
  data[root] = this.toJSON(record);

  this.ajax(this.buildURL(root, id), "PUT", {
    data: data,
    context: this,
    success: function(json) {
      this.didUpdateRecord(store, type, record, json);
    }
  });
}, 
```

总的来说，从服务器接收错误并更新视图的流程是什么？似乎错误回调应该使模型处于一种`isError`状态，然后视图可以显示适当的消息。此外，交易应该保持肮脏。这样，交易就可以使用`rollback`.

不过，使用似乎`store.recordWasInvalid`朝着正确的方向发展。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-12T17:30:58.553

这个周末我试图弄清楚同样的事情。根据 Luke 所说的，我仔细查看了[最新提交](https://github.com/emberjs/data/tree/23d40fb72fd600c39f10e9899e545ce8d78dd076/)（12 月 11 日）的 ember-data 源。

**TLDR；要处理 ember-data 更新/创建错误，只需在您的实例上定义`becameError()`和。RESTadapter 的 AJAX 错误回调触发的级联最终会调用你定义的这些函数。`becameInvalid(errors)``DS.Model`**

例子：

```
App.Post = DS.Model.extend
  title: DS.attr "string"
  body: DS.attr "string"

  becameError: ->
    # handle error case here
    alert 'there was an error!'

  becameInvalid: (errors) ->
    # record was invalid
    alert "Record was invalid because: #{errors}" 
```

以下是源代码的完整介绍：

在 REST 适配器中，[这里](https://github.com/emberjs/data/blob/23d40fb72fd600c39f10e9899e545ce8d78dd076/packages/ember-data/lib/adapters/rest_adapter.js#L107-L109)给出了 AJAX 回调错误函数：

```
 this.ajax(this.buildURL(root, id), "PUT", {
      data: data,
      context: this,
      success: function(json) {
        Ember.run(this, function(){
          this.didUpdateRecord(store, type, record, json);
        });
      },
      error: function(xhr) {
        this.didError(store, type, record, xhr);
      }
    }); 
```

didError 在[这里](https://github.com/emberjs/data/blob/23d40fb72fd600c39f10e9899e545ce8d78dd076/packages/ember-data/lib/adapters/rest_adapter.js#L304-L311)定义，然后根据响应调用存储的 recordWasInvalid 或 recordWasError：

```
 didError: function(store, type, record, xhr) {
    if (xhr.status === 422) {
      var data = JSON.parse(xhr.responseText);
      store.recordWasInvalid(record, data['errors']);
    } else {
      store.recordWasError(record);
    }
  }, 
```

反过来，`store.recordWasInvalid`并且`store.recordWasError`（[在此处](https://github.com/emberjs/data/blob/23d40fb72fd600c39f10e9899e545ce8d78dd076/packages/ember-data/lib/system/store.js#L932-L945)定义）调用记录（DS.Model）的处理程序。在无效的情况下，它会将来自适配器的错误消息作为参数传递。

```
 recordWasInvalid: function(record, errors) {
    record.adapterDidInvalidate(errors);
  },

  recordWasError: function(record) {
    record.adapterDidError();
  }, 
```

`DS.Model.adapterDidInvalidate`和`adapterDidError`（[在这里](https://github.com/emberjs/data/blob/23d40fb72fd600c39f10e9899e545ce8d78dd076/packages/ember-data/lib/system/model/model.js#L305-L311)定义）简单地`send('becameInvalid', errors)`或者`send('becameError')`最终将我们带到[这里](https://github.com/emberjs/data/blob/23d40fb72fd600c39f10e9899e545ce8d78dd076/packages/ember-data/lib/system/model/model.js#L40-L45)的处理程序：

```
 didLoad: Ember.K,
  didUpdate: Ember.K,
  didCreate: Ember.K,
  didDelete: Ember.K,
  becameInvalid: Ember.K,
  becameError: Ember.K, 
```

（Ember.K 只是一个用于返回的虚拟函数`this`。见[这里](http://code418.com/blog/2012/03/08/useful-emberjs-functions/)）

因此，结论是，您只需为模型定义函数`becameInvalid`并`becameError`在模型上定义函数来处理这些情况。

希望这对其他人有所帮助；文档现在当然没有反映这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T05:10:09.317

`DS.RESTAdapter`[刚刚在这个提交](https://github.com/emberjs/data/commit/36a70c9839c9807248856ce2e25959bf80d6b941)中得到了更多的错误处理，但我们还没有到我们对错误处理有很好的建议的地步。

如果您有足够的野心/疯狂到今天使用 ember-data 将应用程序投入生产（就像我一样！），最好确保您的 API 失败的可能性极低。即验证您的数据客户端。

希望我们能在接下来的几个月里用更好的答案更新这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-27T10:27:10.383

我刚遇到这种情况，不确定是否已经在任何地方解释过。

我在用：

```
Em.VERSION : 1.0.0
DS.VERSION : "1.0.0-beta.6"
Ember Validations (dockyard) : Version: 1.0.0.beta.1
Ember I18n 
```

该模型最初与 Validation mixin 混合在一起。

```
App.Order = DS.Model.extend(Ember.Validations.Mixin, {
.....
someAttribute : DS.attr('string'),
/* Client side input validation with ember-validations */
validations : {
    someAttribute : {
        presence : {
            message : Ember.I18n.t('translations.someAttributeInputError')
        }
    }
}
}); 
```

在模板中，添加了相应的车把。（请注意，`model.errors.<attribute>`在输入验证的情况下，ember 验证会自动添加错误，我也会在服务器验证中使用相同的权衡）

```
<p>{{t 'translations.myString'}}<br>
  {{view Ember.TextField valueBinding="attributeName"}}
  {{#if model.errors.attributeName.length}}<small class="error">{{model.errors.attributeName}}</small>{{/if}}
</p 
```

现在，我们将保存`Order`

```
App.get('order').save().then(function () {
  //move to next state?
}, function(xhr){
  var errors = xhr.responseJSON.errors;
  for(var error in errors){ //this loop is for I18n
    errors[error] = Ember.I18n.t(errors[error]);
  }
  controller.get('model').set('errors', errors); //this will overwrite current errors if any
}); 
```

现在如果服务器抛出一些验证错误，返回的数据包是

```
{"errors":{"attributeName1":"translations.attributeNameEror",
 "another":"translations.anotherError"}}

status : 422 
```

**使用状态422**很重要

 **因此，通过这种方式，您的属性可以在客户端和服务器端再次验证。

免责声明：我不确定这是否是最好的方法！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T18:04:22.917

由于库存 Ember-Data 目前没有好的解决方案，我通过向`apiErrors`DS.Model 添加一个属性然后在我的 RestAdapter 子类（我已经需要我自己的）中添加了错误回调到 Ajax 调用`createRecord`并`updateRecord`保存错误并将模型置于“无效”状态，这应该意味着客户端或服务器端验证失败。

这是代码片段：

这可以放在 application.js 或其他一些顶级文件中：

```
DS.Model.reopen({
  // Added for better error handling on create/update
  apiErrors: null
}); 
```

这出现在RestAdapter 子类的错误回调`createRecord`中：`updateRecord`

```
error: function(xhr, textStatus, err) {
    console.log(xhr.responseText);
    errors = null;
    try {
        errors = JSON.parse(xhr.responseText).errors;
    } catch(e){} //ignore parse error
    if(errors) {
        record.set('apiErrors',errors);
    }
    record.send('becameInvalid');
} 
```**

# blackberry - 黑莓应用程序未在设备中的 gprs 连接上运行

> ID：12968831
> 
> 赞同：1
> 
> 时间：2012-10-19T06:48:34.690
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde, blackberry-webworks

嗨，我正在尝试使用 Edge gprs 连接在黑莓设备上运行我的应用程序，但它没有渲染页面。我已经尝试了很多来获得连接，我也尝试了各种链接来解决，这是我在这里附加的简单代码之一，请指导我解决这个问题

```
 public static String getConnectionString() { 

      String value="" ;

        if(WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
        {
           value=";interface=wifi";
        }else{
            value=";deviceside=true";
        }

        return value; 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:12:17.403

将连接字符串附加到您的网址。然后尝试

```
public static String getConnectionString() {

    // This code is based on the connection code developed by Mike Nelson of
    // AccelGolf.
    // http://blog.accelgolf.com/2009/05/22/blackberry-cross-carrier-and-cross-network-http-connection
    String connectionString = null;

    // Simulator behavior is controlled by the USE_MDS_IN_SIMULATOR
    // variable.
    if (DeviceInfo.isSimulator()) {

        connectionString = ";deviceSide=true";
    }

    // Wifi is the preferred transmission method
    else if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {
      //   System.out.println("Device is connected via Wifi.");
        connectionString = ";interface=wifi";
    }

    // Is the carrier network the only way to connect?
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) {
      // System.out.println("Carrier coverage.---->>" + CoverageInfo.getCoverageStatus());

        String carrierUid = getCarrierBIBSUid();
      //  DebugScreen.Log(" carrierUid is: " + carrierUid);
        if (carrierUid == null) {
            // Has carrier coverage, but not BIBS. So use the carrier's TCP
            // network
            // System.out.println("No Uid");
            String wapString = getAvailableConnectionsString();
        //  DebugScreen.Log("from wap2 connection--->" + wapString);
            if(wapString == null){
            connectionString = ";deviceside=true";
            }else{
                connectionString = wapString;
            }
        } else {
            // otherwise, use the Uid to construct a valid carrier BIBS
            // request

            connectionString = ";deviceside=true;connectionUID=" + carrierUid + ";ConnectionType=mds-public";
        }
    }

    // Check for an MDS connection instead (BlackBerry Enterprise Server)
    else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) {
        // System.out.println("MDS coverage found");
        connectionString = ";deviceside=false";
    }

    // If there is no connection available abort to avoid bugging the user
    // unnecssarily.
    else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE) {
        // System.out.println("There is no available connection.");
    }

    // In theory, all bases are covered so this shouldn't be reachable.
    else {
       // System.out.println("no other options found, assuming device.");
        connectionString = ";deviceside=true";
    }

    return connectionString;
} 
```

添加此方法并将连接字符串附加到 url。

```
 private static String getCarrierBIBSUid() {

    ServiceRecord[] records = ServiceBook.getSB().getRecords();
    int currentRecord;

    for (currentRecord = 0; currentRecord < records.length; currentRecord++) {
  //    DebugScreen.Log("Util.getCarrierBIBSUid() for ippp--------->>" + records[currentRecord].getCid().toLowerCase());
        if (records[currentRecord].getCid().toLowerCase().equals("ippp")) {
   //       DebugScreen.Log("Util.getCarrierBIBSUid() for bibs..........'''''" + records[currentRecord].getName().toLowerCase().indexOf("bibs") );
            if (records[currentRecord].getName().toLowerCase().indexOf("bibs") >= 0) {
                return records[currentRecord].getUid();
            }
        }

    }

    return null;
}

    public static String getAvailableConnectionsString() {
    String conns = null;
    ServiceBook sb = ServiceBook.getSB();
    ServiceRecord[] records = sb.getRecords();

    String cid;
    String uid;
    for (int i = 0; i < records.length; i++) {
        ServiceRecord myRecord = records[i];
        // System.out.println("record name:"+myRecord.getName()+"  cid:"+myRecord.getCid().toLowerCase()+" "+myRecord.getUid().toLowerCase());
        if (myRecord.isValid() && !myRecord.isDisabled()) {
            cid = myRecord.getCid().toLowerCase();
            uid = myRecord.getUid().toLowerCase();

            //Wap2.0
            if (cid.indexOf("wptcp") != -1 && uid.indexOf("wifi") == -1 && uid.indexOf("mms") == -1 ) {
                conns = ";deviceside=true" + ";ConnectionUID="+ myRecord.getUid();
                if(myRecord.getUid().equalsIgnoreCase("GTCP BIBS")){
                    return conns;
                }
            }

        }
    }

    return conns;
} 
```

这段代码对我有用..

# asp.net - Visual Studio 正在记事本中打开网页

> ID：12968836
> 
> 赞同：5
> 
> 时间：2012-10-19T06:49:05.047
> 
> 标签：asp.net, visual-studio-2010

我在网页（Chat.aspx）上工作时不小心我的系统被关闭了。现在我的视觉工作室在记事本中打开网页，它是空的（什么都不显示）。

我也试过用 Html 编辑器打开它，它还显示文件无法在选定的编辑器中打开，请选择另一个编辑器。

我怎样才能恢复我的工作/代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T06:56:36.447

一旦我遇到同样的问题，我在互联网上进行了很多研究，但最后我最终还是再次写了这个页面。基本上，由于操作系统无法在 VS 中打开文件，内存中的文件指针变得无效或损坏。[这是给你的链接](http://social.msdn.microsoft.com/Forums/eu/csharpgeneral/thread/f28f37fb-511a-402f-a603-b012d117863e)

当我遇到这个问题时，一位专家建议我无法取回您的页面。

如果您有页面备份，请使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T15:20:54.833

我最近在 VS 2010 中工作时遇到了这个问题，我的大脑崩溃了。幸运的是我有源代码控制，所以为了解决这个问题，我手动删除了文件并获得了最新版本。

# android - Surfaceview中的Listview以编程方式创建？

> ID：12968844
> 
> 赞同：0
> 
> 时间：2012-10-19T06:49:53.793
> 
> 标签：android, android-listview, surfaceview

我正在创建一个游戏应用程序。我在其中创建了使用类名扩展 SurfaceView 实现 SurfaceHolder.Callback 的表面视图。我有全屏的表面视图。我使用canvas.drawtext() 在surfaceview 的右侧动态地编写文本（单词）。但现在的问题是，如果文本大于屏幕高度，我想像 listview 一样显示。所以我可以滚动并看到那些话。那么这是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:57:57.290

您需要可滚动的视图，而不是 listview。所以我建议在滚动视图下创建文本。

# sql - 在 SQL 中显示所有员工的员工姓名、部门名称、工资、等级、经验（例如：XX 年 YY 月 ZZ 天）

> ID：12968852
> 
> 赞同：0
> 
> 时间：2012-10-19T06:50:38.030
> 
> 标签：sql, oracle11g

请帮助以下查询显示所有员工的员工姓名、部门名称、薪水、等级、经验（例如：XX 年 YY 月 ZZ 天）

```
ENAME     DNAME    SAL  GRADE      EXPERIENCE

SCOTT    RESEARCH  3000   4        12 Years 3 months 15 days 
```

像这样我需要得到输出。

我试图写长达数年但数月，我无法获得的日子。

```
select distinct ename,dname,sal,grade,
 (round((months_between(sysdate,hiredate)/12))||' years' EXP 
 from emp,salgrade,dept 
 where dept.deptno=emp.deptno and sal between losal and highsal; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:12:14.617

你有岁月。

用于`MONTHS_BETWEEN(date1, date2)`获取月份。然后减去（年 * 12）。

用于`DAYS_BETWEEN(date1, date2)`获取天数。

[有关更多详细信息，请参阅此](http://docs.oracle.com/cd/A60725_05/html/comnls/us/per/ffugax15.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:23:26.087

这是我正在使用的 T-SQL (SQL Server) 解决方案（基于迄今为止的测试）。可悲的是，我没有可以玩的 oracle 实例，但希望这不应该太难转换：

```
declare @fromDate date = '2010-11-21'
, @toDate date = getutcdate()

--from date must be before to date
declare @tempDate date
if @toDate < @fromDate 
begin
    set @tempDate = @toDate
    set @toDate = @fromDate
    set @fromDate = @tempDate
end

declare @fDD int = datepart(dd,@fromdate)
, @tDD int = datepart(dd,@todate)
, @fMM int = datepart(mm,@fromdate)
, @tMM int = datepart(mm,@todate)
, @fYYYY int = datepart(yyyy,@fromdate)
, @tYYYY int = datepart(yyyy,@todate)
, @y int, @m int, @d int

--calc difference in years
set @y = @tYYYY-@fyyyy
if @fMM > @tMM or (@fMM=@tMM and @fDD > @tDD)
begin
    set @y = @y - 1
    set @fYYYY = @fYYYY + @y
    set @tempDate = DATEADD(year,@y,@fromDate)
end

--calc remaining difference in months
set @m = DATEDIFF(month,@tempDate,@toDate)
if @tDD < @fDD 
begin
    set @m = @m-1
    set @tempDate = DATEADD(month,@m,@tempDate)
end

--calc remaining difference in days
set @d = DATEDIFF(day,@tempDate,@toDate)

--display results in user friendly and grammatically correct way
select cast(@y as nvarchar(3)) + N' year' + case when @y = 1 then N'' else N's' end + N' '
+ cast(@m as nvarchar(2)) + N' month' + case when @m = 1 then N'' else N's' end + N' '
+  cast(@d as nvarchar(3)) + N' day' + case when @d = 1 then N'' else N's' end + N' ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T10:34:27.100

这是您在 ORACLE SQL 中所需的答案

```
select (floor(months_between(sysdate,hiredate)/12)) YEARS,
round(((months_between(sysdate,hiredate)/12)-(round(months_between(sysdate,hiredate)/12)))*12) months
from abc; 
```

# android - 硬件加速：Honeycomb 之前的设备会发生什么？

> ID：12968853
> 
> 赞同：0
> 
> 时间：2012-10-19T06:50:39.063
> 
> 标签：android, android-ui, hardware-acceleration

我正在为 Android 开发一个应用程序，它支持设备回到 Android 2.1（API 级别 7）。我想为大屏幕设备启用硬件加速，否则它们在某些情况下会出现延迟。同时，我在旧设备上的应用程序的内存预算存在问题，因为我为图像使用了大量内存。我在[这里](https://plus.google.com/105051985738280261832/posts/2FXDCz8x93s)读到，启用硬件加速会多使用 8 MB RAM。

> 硬件加速绘图并非全是胜利。例如，在 Nexus S 和 Galaxy Nexus 等设备的 PVR 驱动程序上，只需在进程中开始使用 OpenGL 就会消耗大约 8MB 的 RAM。

由于旧设备每个应用程序只有 24 MB 的 RAM，这会使我的应用程序很快陷入 OutOfMemoryException。较新的设备每个应用程序最多有 64 MB。所以应该没有问题。我现在的问题是，硬件加速在蜂窝设备开启时的表现如何。它只是什么都没有，所以不要使用 8 MB RAM？或者如果您启用了它，它是否仍然使用这个 8 MB RAM？

非常感谢你的回答。

干杯老兄

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:50:42.707

与此同时，我找到了答案。这很简单。android 清单文件中的 android:hardwareAccelerated 标签已在 API 级别 11 中引入。因此 11 之前的设备无法理解此标签，因此它们什么也不做。

干杯

# datatable - 通过引用传递到 Asp.net 中的通用处理程序（.ashx）

> ID：12968856
> 
> 赞同：2
> 
> 时间：2012-10-19T06:50:52.440
> 
> 标签：datatable, parameter-passing, pass-by-reference, generic-handler

我关注了这篇文章：[DataTable using Server Side Processing](https://stackoverflow.com/questions/3531438/jquery-datatables-server-side-processing-using-asp-net-webforms)。
在里面`default.aspx`，我打电话`.ashx`使用：

```
<script type="text/javascript">
$(function () {
    $('#example').dataTable({
        'bProcessing': true,
        'bServerSide': true,
        'sAjaxSource': '/data.ashx'
    });
}); 
```

在以下`Page_Load`事件中`defaut.aspx`：

```
Employee emp=new Employee();
emp.name="abc";
emp.addr="pqr";
emp.phone="123"; 
```

`Employee`类的名称在哪里。
如何将员工对象传递给`Data.ashx`？

我尝试使用`HttpContext.Current.Session`但将`Session`对象显示为`null`.
请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T11:51:59.000

要访问里面的会话，我使用`IRequiresSessionState`了如下界面：

```
public class Data : IHttpHandler, System.Web.SessionState.IRequiresSessionState
{
     public void ProcessRequest(HttpContext context)
     {
         // get Employee object from session here
         Employee emp =(Employee)HttpContext.Current.Session["employee"];
     }
} 
```

当然要在会话中设置一个 Employee 对象，在以下`Page_Load`事件中`defaut.aspx`：

```
Employee emp=new Employee();
emp.name="abc";
emp.addr="pqr";
emp.phone="123";

HttpContext.Current.Session["employee"]=emp; 
```

**注意：**在 Generic Handler 中
有两个接口可供访问：`HttpSession`

1.  **IRequiresSessionState**
    使用这个接口我们可以读写会话变量。

2.  **IReadOnlySessionState**
    使用这个接口我们只能读取而不能写入或编辑会话变量。

有关更多信息，请查看此链接：[IRequiresSessionState vs IReadOnlySessionState](https://stackoverflow.com/questions/8039014/irequiressessionstate-vs-ireadonlysessionstate)

# jquery - Jquery---选择所有给定类的文本框

> ID：12968860
> 
> 赞同：1
> 
> 时间：2012-10-19T06:51:04.810
> 
> 标签：jquery

html

```
<input type="text" class="required" /> 
```

现在我想选择具有这个给定类名的所有文本框，并想检查特定文本框是否有另一个名为“error”的类，我正在动态添加它。

```
 $(".required).each(function() {
     if(this.hasClass('error'){
          alert("has error class");
     }
 } 
```

但没有按预期工作..怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:52:34.550

你有一个错字`"`，你还需要包装`this`为 jQuery 对象

```
$(".required").each(function() {
     //Iterate through each element
     if($(this).hasClass('error')){
          alert("has error class");
     }
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:05:59.720

试试这个解决方案：

```
<input type="text" class="required" />
<input type="text" class="required" />
<input type="text" class="required error" />

<script>
      $('.required').each(function(index, value){
          if($(value).hasClass('error')){
              alert("has error class");
          }
      });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T06:52:28.283

你有很多语法错误。

1.  选择器缺少结束引号。
2.  与 hasClass 一起使用`$(this)`，而不是 this。作为`this represents javascript object`while`$(this) is jquery object`而`hasClass is jquery function`不是javascript。
3.  缺少 if 语句的右括号。
4.  每个函数的右括号也不见了。

**[现场演示](http://jsfiddle.net/XmjkR/1/)**

```
$(".required").each(function() {
    if ($(this).hasClass('error')) {
        alert("has error class");
    }     
})​; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T06:54:14.227

无需循环使用`.each`.

`$(".required.error")`将为您提供具有这两个类的所有元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T06:55:02.940

您有语法错误，即您在`hasClass`通话后缺少右括号：

```
 $(".required").each(function() {
     if($(this).hasClass('error')){
          alert("has error class");
     }
 } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-19T06:53:01.980

你的代码有错误，试试这个：

```
$(".required").each(function() {
     if($(this).hasClass('error'){
          alert("has error class");
     }
 } 
```

# php - 如何使用 PDFJam 在 pdf 上添加文本

> ID：12968864
> 
> 赞同：1
> 
> 时间：2012-10-19T06:51:32.777
> 
> 标签：php, pdf, pdf-generation

我正在使用 PDF Jam 来处理 pdf。我需要在生成的文件底部添加一个文本行。我试过了，但没能成功。有人可以指导我怎么做吗？

我在我的php代码中做了

```
$command = '-----------------';
exec($command); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:59:04.690

如您所知，PDFJAM 用于操作 pd。它是一个小的 shell 脚本集合，为优秀的 pdf 页面的大部分功能提供了一个简单的界面。请参阅 Ubuntu 手册

[pdfjam - 用于操作 PDF 文件的 shell 脚本](http://manpages.ubuntu.com/manpages/natty/man1/pdfjam.1.html)

您应该按照自己的方式创建工作表（5x6），并创建一个包含所需信息的最小页面大小的单独工作表，而不是将两个文件合并为一个。

否则在第一步创建您的工作表并使用**[pdflib](http://www.pdflib.com/)**添加文本作为第二步。它非常好的工具。我希望它可以很好地解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-24T17:53:36.830

我喜欢 pdftk，所以想找到一个使用它的解决方案。以下对我有用。

```
pdfjam --preamble '\usepackage{fancyhdr} \topmargin 85pt \oddsidemargin 140pt \cfoot{\thepage}'  --pagecommand '\thispagestyle{plain}' --landscape  --nup 2x1  --frame false --clip true --trim ".5in 0.5in 0.5in .65in" --delta '-0.25in 0' tmp.pdf 
```

我抄录自：[Page Numbering with the "{page} of {pages}"](https://erny-rev.blogspot.com/2017/05/fast-pdf-scaling-with-page-numbering.html)，删除了“of pages”部分。

命令将 pdf 转换为 2x1、修剪边距和裁剪。输出是风景。

\topmargin 和 \oddsidemargin 似乎告诉 pdflatex 把数字放在哪里。

# visual-studio - 仅当 VSPROPS 变量不存在时如何设置它？

> ID：12968865
> 
> 赞同：1
> 
> 时间：2012-10-19T06:51:35.783
> 
> 标签：visual-studio, git, vsprops

假设我有一个`.vsprops`用于解决方案的文件。在该文件中，定义了各种变量，例如`int_dir`中间构建结果和`log_dir`日志结果。

通常，这些变量被设置为默认值（相对于解决方案）。

对我来说，我想将这两个变量设置到我的 ramdisk ( `R:`) 中，即不再

```
$(SolutionDir)\intermediate 
```

但

```
R:\myproject\intermediate 
```

如果我`.vsprops`直接更改文件，源代码管理 (Git) 会将其标记为已修改。

VSPROPS 中是否有一种方法可以检查环境变量，如果未设置此变量，则使用默认值？

如果这是不可能的，我也会对 Git 解决这个问题的解决方案感兴趣（但不是`--assume-unchanged`也不是，`.gitignore`因为该文件中的其他更改可能是相关的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:42:42.737

纯 Git 解决方案可以使用[gitattribute 过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)：

![内容过滤器](../Images/a2963858d99766f5b1591759b14fa39e.png)

它将涉及一个`smudge`在 上执行的脚本，该脚本`git checkout`将：

*   检测是否要更改`$(SolutionDir)`（例如，测试其中包含更新路径的环境变量）
*   检测正确的文件 ( `xxx.vsprops.tpl`) 内容（[脚本不知道它所操作的文件名或路径](https://stackoverflow.com/questions/2562523/using-git-to-work-with-subversion-ignoring-modifications-to-tracked-files/2562678#2562678)）
*   `.vsprops`从（模板文件）生成实际 `.vsprops.tpl`版本，该文件是版本化的（`.vsprops`不再版本化）

您可以添加一个`clean`脚本，该脚本将保留（on `git commit`）在文件中完成的所有修改`.vsprops`回到`.vsprops.tpl`，除了该`$(SolutionDir)`行。

# iphone - 如何在 UITextField 中的每 3 个字符后附加一个特殊字符 例如：(123-12346) 像 '-' 我做到了，但在清除时发出

> ID：12968869
> 
> 赞同：1
> 
> 时间：2012-10-19T06:51:58.663
> 
> 标签：iphone, objective-c, ipad, uitextfield, uitextview

我在 UI 文本字段中获取电话卡号码表单用户。数字的格式就像

```
123-4567-890 
```

我希望用户自动键入 123 -`UITextField`在 4567 之后插入相同的内容 - 依此类推。

我在`UITextField`委托方法中使用以下代码做到了：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string;
{
       NSLog(@"***** %d",textField.text.length);

             if(textField.text.length == 3) 

             {
                 textField.text  = [textField.text  stringByAppendingString:@"-"];
             }  

       return YES;
} 
```

但是在清除文本时提出的问题，当我们开始清除时。

最后 3 位数字 890 清除然后 - 添加，我们清除它并再次添加，所以清除停止在

我们使用一次清除所有文本

```
textField.clearButtonMode = UITextFieldViewModeWhileEditing; //To clear all text at a time 
```

但我们的要求是用户必须一次删除一个字符。

如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:03:20.310

清仓`replacementString`时应清空`@""`。因此，除了长度检查外，还应检查替换字符串。像这样：

```
if (textField.text.length == 3 && ![string isEqualToString:@""]) {
    // append -
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T12:14:15.383

使用：我在这个论坛的某个地方看到过这个，它对我有用

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *filter = @"###-####-###";
    if(!filter) return YES;
    NSString *changedString = [textField.text stringByReplacingCharactersInRange:range withString:string];
    if(range.length == 1 &&  string.length < range.length && [[textField.text substringWithRange:range] rangeOfCharacterFromSet:[NSCharacterSet characterSetWithCharactersInString:@"0123456789"]].location == NSNotFound)
    {
        NSInteger location = changedString.length-1;
        if(location > 0)
        {
            for(; location > 0; location--)
            {
                if(isdigit([changedString characterAtIndex:location]))
                    break;
            }
            changedString = [changedString substringToIndex:location];
        }
    }
    textField.text = filteredStringFromStringWithFilter(changedString, filter);
    return NO;
}

NSString *filteredStringFromStringWithFilter(NSString *string, NSString *filter)
{
     NSUInteger onOriginal = 0, onFilter = 0, onOutput = 0;
     char outputString[([filter length])];
     BOOL done = NO;

     while(onFilter < [filter length] && !done)
     {
         char filterChar = [filter characterAtIndex:onFilter];
         char originalChar = onOriginal >= string.length ? '\0' : [string characterAtIndex:onOriginal];
         switch (filterChar) {
         case '#':
            if(originalChar=='\0')
            {
                done = YES;
                break;
            }
            if(isdigit(originalChar))
            {
                outputString[onOutput] = originalChar;
                onOriginal++;
                onFilter++;
                onOutput++;
            }
            else
            {
                onOriginal++;
            }
            break;
        default:
            outputString[onOutput] = filterChar;
            onOutput++;
            onFilter++;
            if(originalChar == filterChar)
                onOriginal++;
            break;
        }
    }
    outputString[onOutput] = '\0';
    return [NSString stringWithUTF8String:outputString];
} 
```

# vb.net - 谁知道.NET Framework 3.5 的分布？

> ID：12968870
> 
> 赞同：0
> 
> 时间：2012-10-19T06:52:02.103
> 
> 标签：vb.net, visual-studio-2008, .net-3.5, .net-2.0

我有一个产品（VB.NET / Winforms）我在 VS2008 上开发，基于 .NET FW 2.0 它可以安装在任何 Windows x86/64 机器上（从 XP 开始）

我们现在必须将 FW 升级到 3.5，我怀疑是在软件包中包含 FW 3.5（由 Inno-Setup 制作）还是只检查是否已安装，如果没有告诉用户从 Microsoft 网站下载它。

您认为该案例的最佳做法是什么？

你知道FW 3.5在全球的分布吗？你知道已经安装了 FW 3.5 的机器的百分比是多少

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T12:57:39.970

很多机器都有3.5。但这不是重点，总*有一些*客户没有它。特别是使用您的 2.0 安装程序并购买了更新的尊贵 XP 客户。

3.5 安装程序非常小，它是一个仅下载所需文件的引导程序。当机器从未安装过服务包时，其中可能有很多。如果是这样，那就更少了。引导程序为您的安装程序增加了大约 1.5MB，远小于 2.0 安装程序的大约 50MB。简单的选择，真的。

# iphone - 何时实际调用 didReceiveMemoryWarning

> ID：12968879
> 
> 赞同：6
> 
> 时间：2012-10-19T06:52:31.677
> 
> 标签：iphone, ios, memory, ios6, didreceivememorywarning

我以前从未亲眼见过`didReceiveMemoryWarning`电话。在调用它的地方是否存在已知的内存使用阈值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T08:38:25.790

当系统内存不足时调用它，然后您需要清除`UIViewController`.

您可以在模拟器中模拟内存警告：`Hardware > Simulate Memory Warning`看看会发生什么。

如果您支持 iOS6 的早期版本，请务必注意[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)中的以下内容：

> 在 iOS 6 之前，当发生内存不足警告时，如果 `UIViewController`该类知道以后可以重新加载或重新创建它们，就会清除其视图。如果发生这种情况，它还会调用 `viewWillUnload`和`viewDidUnload`方法，让您的代码有机会放弃与视图层次结构关联的任何对象的所有权，包括从 nib 文件加载的对象、在您的`viewDidLoad`方法中创建的对象以及在运行时延迟创建的对象并添加到视图层次结构中。在 iOS 6 上，视图永远不会被清除，并且这些方法永远不会被调用。如果您的视图控制器需要在内存不足时执行特定任务，它应该覆盖该 `didReceiveMemoryWarning`方法。

关于阈值，我尽量不超过 12MB 的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T06:59:04.183

不可以，当springboard感觉设备内存占用资源过多时调用。取决于其他应用程序在您的手机上使用了多少东西，它迟早会发生。你永远无法可靠地计算或依赖它何时会发生。

另请注意，因为分配等工具中报告的内存不一定与您的应用程序的占用空间相关，因此看起来您使用的不多，但您仍可能收到此警告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T07:24:50.273

从文档中，当系统确定可用内存量很低时，就会调用此方法。系统自己确定内存不足，当您的应用程序分配超过您的应用程序可用的内存量时，会调用此方法。请参考http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html

# javascript - 通过 JavaScript 对表中的日期进行排序

> ID：12968886
> 
> 赞同：0
> 
> 时间：2012-10-19T06:52:44.857
> 
> 标签：javascript, date, sorting

好的，我确实有一个 javascript 代码，可以在 HTML 表中按日期对行进行排序。现在我所做的是将日期转换为时间戳并通过本机 sort() javascript 函数对其进行排序，但似乎排序不正确。问题是什么？带有时间戳的排序日期不正确吗？

这是我到目前为止所做的

```
var asc = true;

    function sortTable() {
        var tbl = document.getElementById("mytable").tBodies[0];
        var store = [];
        for (var i = 0, len = tbl.rows.length; i < len; i++) {
            var row = tbl.rows[i];
            var rowdatedata = row.cells[1].textContent;
            var rowdatesplit = rowdatedata.split('/');
            var rowdatetimestamp = Math.round(new Date(parseInt(rowdatesplit[0]), parseInt(rowdatesplit[1]) - 1, parseInt(rowdatesplit[2]), 0, 0, 0).getTime() /1000);
            if (!isNaN(rowdatetimestamp)) store.push([rowdatetimestamp, row]);
        }

        if (asc) {
            store.sort(function(x, y) {
                return x[0] - y[0];
            });
            document.getElementById('dateCol').textContent = 'Date ↑';
            asc = false;
        }
        else {
            store.sort(function(x, y) {
                return y[0] - x[0];
            });
            document.getElementById('dateCol').textContent = 'Date ↓';
            asc = true;
        }

        for (var i = 0, len = store.length; i < len; i++) {
            var idno = i + 1;
            store[i][1].cells[0].textContent = idno.toString();
            tbl.appendChild(store[i][1]);
        }
        store = null;
    } 
```

[http://jsfiddle.net/laupkram/kCxKn/](http://jsfiddle.net/laupkram/kCxKn/)

注意：只需单击“日期”标题，它就会排序

升序结果

```
ID  Date ↑  Name
1   2012/08/15  Lerry
2   2012/03/16  Ansley
3   2012/05/18  Robinson
4   2012/10/05  Mp 
```

降序结果

```
ID  Date ↓  Name
1   2012/10/05  Mp
2   2012/05/18  Robinson
3   2012/03/16  Ansley
4   2012/08/15  Lerry 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:33:02.580

问题是如何`parseInt`工作的，如果数字以 0 开头，它将被视为八进制数。您必须`parseInt(value, 10)`确保进行十进制转换。

# jsf - 访问 primefaces 中的不可见选项卡

> ID：12968896
> 
> 赞同：0
> 
> 时间：2012-10-19T06:53:41.357
> 
> 标签：jsf, primefaces

我试图更新放置在 tabView 中的 Gmap。但我得到了

```
java.lang.IllegalArgumentException: tab2 
```

错误。我已经对这个问题进行了一些搜索，并注意到它仅在选项卡可见时才可用。那我该怎么办？代码块如下：

```
<h:form id="form">
        <p:tabView orientation="left" id="tabView" styleClass="tabView">

            <p:ajax event="tabChange" listener="#{sucBean.onTabChange}"
                update=":form:tabView:map" />

            <p:tab title="Bütün Suçlar" id="tab1">

                <p:gmap zoom="10" type="HYBRID" center="40.78470,29.94873" id="map"
                    model="#{sucBean.advancedModel}"
                    style="width:740px;height:500px;margin:-14px 0 0 -10px;">

                    <p:ajax event="overlaySelect" listener="#{sucBean.onMarkerSelect}" />

                    <p:gmapInfoWindow>
                        <p:outputPanel
                            style="text-align:justify;display:block;margin:auto:">
                            <p:panelGrid columns="2" cellpadding="8">

                                <h:outputText value="Suç Tipi:" style="color:red" />
                                <h:outputText value="#{sucBean.marker.data.sucTipi}" />

                                <h:outputText value="Tarih: " style="color:red" />
                                <h:outputText value="#{sucBean.marker.data.islenmeZamani}" />

                                <h:outputText value="Adres: " style="color:red" />
                                <h:outputText value="#{sucBean.marker.data.adres}" />

                                <h:outputText value="Suçu İşleyen:" style="color:red" />
                                <h:outputText value="#{sucBean.marker.data.isleyenBilgisi}" />
                            </p:panelGrid>
                        </p:outputPanel>

                    </p:gmapInfoWindow>

                </p:gmap>

            </p:tab>

            <p:tab title="Suç Ara" id="tab2">
                <p:fieldset legend="Ayrıntılı Arama" styleClass="searchField"
                    id="fieldSet">

                    <p:panelGrid columns="4" cellpadding="10">
                        <p:inputText value="#{sucBean.arananKelime}" style="width:300px" />
                        <h:outputText value=" Kriter:" />
                        <p:selectOneMenu value="#{sucBean.aramaKriteri}">
                            <f:selectItem itemLabel="Suç Tipi" itemValue="sucTipi" />
                            <f:selectItem itemLabel="Adres" itemValue="adres" />
                            <f:selectItem itemLabel="İşlenme Zamanı" itemValue="zaman" />
                            <f:selectItem itemLabel="Cinsiyet" itemValue="cinsiyet" />
                            <f:selectItem itemLabel="Yaş" itemValue="yas" />
                        </p:selectOneMenu>

                        <p:commandButton value="Ara"
                            actionListener="#{sucBean.sucKaydiAra}" update="aramaSonucu" />
                    </p:panelGrid>

                </p:fieldset>

                <p:dataTable var="suc" value="#{sucBean.sucModel}" paginator="true"
                    rows="10" id="aramaSonucu" selection="#{sucBean.selectedSuc}">

                    <p:column selectionMode="multiple" style="width:18px"></p:column>

                    <p:column headerText="Suç Tipi">
                        <h:outputText value="#{suc.sucTipi}" />
                    </p:column>

                    <p:column headerText="İşlenme Zamanı">
                        <h:outputText value="#{suc.islenmeZamani}" />
                    </p:column>

                    <p:column headerText="Adres">
                        <h:outputText value="#{suc.adres}" />
                    </p:column>

                    <p:column headerText="Suçu İşleyen">
                        <h:outputText value="#{suc.isleyenBilgisi}" />
                    </p:column>

<!--                        <f:facet name="footer"> -->

<!--                        </f:facet> -->

                </p:dataTable>

                <p:commandButton id="multiSelectButton"  actionListener="#{sucBean.secilenleriGetir}" update=":form:tabView:tab2:map2"
                            value="Secilenleri Haritada Göster" icon="ui-icon-pin-s" />

                <p:gmap zoom="12" type="HYBRID" center="40.78470,29.94873"
                    id="map2" model="#{sucBean.advancedModel2}"
                    style="width:740px;height:300px;margin:10px 0 0 -10px;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:58:03.930

当您在容器组件（如 tabView 或手风琴）中引用组件时，您不需要在更新目标中包含实际的选项卡 ID。

在您的情况下`update=":form:tabView:map2"`，将是正确的更新目标。

# php - 数据库或文件系统，哪个更快？

> ID：12968898
> 
> 赞同：0
> 
> 时间：2012-10-19T06:53:44.313
> 
> 标签：php, mysql

我在基于博客的网站上工作，拥有超过 50k 个帖子。我需要提高网站速度的建议。

我有两个选择

1：我可以从mysql数据库中提取post数据并使用php显示

2：每个帖子的静态网页（使用 DOM 解析器我可以更新帖子内容）

哪个是快速数据库或文件系统？或任何其他加速我的网站的建议。我正在使用 go daddy 共享主机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:56:24.973

我会建议：

1.  a`pagination`用于网站。
2.  实现编码风格：`fetch-what-you-only-need`来自数据库
3.  在您的网站上需要改进的地方运行一些负载测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:59:45.880

对不起，查了godaddy，他们不允许memcached :(

~~使用数据库并实现[memcached](http://memcached.org/)来缓存最近显示的页面。~~

即使有 50 K 个帖子，我想大多数获取都是针对特定时间段内的一小部分帖子，通常是最近的帖子。

如果是这种情况，memcache 解决方案将胜过任何基于磁盘的存储。

 ~~为经常检索的帖子自动生成静态页面是另一种方式。

但是数据库中的基本存储是最简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:21:40.713

1.  您可以对整个页面使用页面缓存
2.  从数据库查询的缓存结果中进行查询缓存

    使用文件系统只会给更新、删除、插入等带来麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T08:05:26.453

您无法在共享主机上获得可靠的性能，因此请选择最容易使用的东西。今天，您可能可以快速访问文件系统，但明天他们会将您的应用程序重新定位到另一个孤岛，并且数据库变得更快。扩展数据库以添加新功能要容易得多，所以我会这样做。

但是，如果您真的关心性能，则必须进行测试来衡量它。~~

# perl - 在 perl 中通过引用传递

> ID：12968900
> 
> 赞同：0
> 
> 时间：2012-10-19T06:54:05.840
> 
> 标签：perl

```
use warnings;
use strict;

my @array = (1,2,3,4,5);
my $v = 1;

sub by_ref 
{
    my ($array_ref,$v) = @_;  
    @$array_ref = (0,0,0);
    print "Array inside by_ref: @$array_ref\n"; 
}

by_ref(\@array,$v);
print "Array changed: @$array\n"; 
```

我`@array`通过引用传递（我假设我做对了）。我希望在子例程中所做的更改`@array`反映在调用子例程中。我不知道我哪里出错了。先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T06:58:42.227

您也在子例程之外打印数组引用，这是错误的。数组引用的范围仅限于子例程。

因此，您应该将最后一行更改为仅打印`@array`not `@$array`。

像：

`print "Array changed: @array\n";`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T06:57:13.353

只需更改为

```
print "Array changed: @array\n"; 
```

应该没问题

# c# - 使用搜索框填充 gridview

> ID：12968901
> 
> 赞同：0
> 
> 时间：2012-10-19T06:54:07.337
> 
> 标签：c#, asp.net, stored-procedures, sql-server-2012

好吧，我们所有人都曾在某个时候为汽车或房屋买过橱窗！我们在那里使用的界面是我想要创建的！3 个下拉列表或文本框，用户可以在其中插入用于过滤搜索的信息

![在此处输入图像描述](../Images/63bcea24bad370607aff05dc41fade27.png)

现在的问题是，我在网上搜索并找到了一些帮助/代码，但不知何故它完全不起作用。因为我需要的是，当页面加载时，所有数据都应显示在网格视图（或任何其他视图）中，然后当用户选择/输入他/她的信息并单击搜索时，视图必须根据这项研究

我尝试使用与注册学生相同的代码

```
protected void btnSearch_Click(object sender, EventArgs e)
{
    string strcon = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\VC_temps.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
    SqlConnection con = new SqlConnection(strcon);

    SqlCommand com = new SqlCommand("Search_student", con);
    com.CommandType = CommandType.StoredProcedure;
    SqlParameter p1 = new SqlParameter("Course", DropDownList1.SelectedValue);
    SqlParameter p2 = new SqlParameter("Availability", DropDownList2.SelectedValue);
    SqlParameter p3 = new SqlParameter("JobSkill", DropDownList3.SelectedValue);
    com.Parameters.Add(p1);
    com.Parameters.Add(p2);
    com.Parameters.Add(p3);
    con.Open();
    SqlDataReader rd = com.ExecuteReader();
    if (rd.HasRows)
    {
           GridView1.DataSource = rd;
        GridView1.DataBind();
    }
} 
```

使用以下存储过程

```
ALTER PROCEDURE Search_student
(
@Course         varchar(30),
@Availability   varchar(50),
@JobSkill       varchar(50)
)
AS
SELECT * FROM Student
WHERE Course = @Course OR Availability = @Availability OR JobSkill=@JobSkill 
```

有人可以帮我找到正确的代码/解决方案来做我想做的吗？我认为这将有助于很多未来的编码人员，因为我找不到任何符合我想要的东西......也许我不知道在哪里看，但我意识到在搜索类似的东西时涉及到很多变量这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:01:19.280

更改存储过程如下，这应该可以解决您的问题...当您使用多个参数进行搜索时，请始终使用以下方式编写搜索查询...

```
ALTER PROCEDURE Search_student 
(
 @Course         varchar(30),
 @Availability   varchar(50),
 @JobSkill       varchar(50)
 )
AS
Begin
    SELECT * FROM Student 
    WHERE  Course =isnull(@Course,Course) 
    and Availability =isnull(@Availability,Availability)
    and JobSkill=isnull(@JobSkill,JobSkill)    
End 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:03:41.743

代替

```
 if (rd.HasRows)
    {
          rd.Read();
          GridView1.DataBind();
    } 
```

请用

```
 if (rd.HasRows)
   {
         GridView1.DataSource=rd;
         GridView1.DataBind();
   } 
```

# javascript - 禁用上下文菜单但不在文本框中

> ID：12968902
> 
> 赞同：2
> 
> 时间：2012-10-19T06:54:11.923
> 
> 标签：javascript, jqgrid, dom-events, contextmenu

我想禁用我页面上的上下文菜单，因为我有自己的。但是在文本框中应该可以使用系统上下文菜单。

我正在用这样的Javascript来做：

```
document.oncontextmenu = function (e) {
    return false;
}; 
```

我想到了类似的东西：

```
document.oncontextmenu = function (e) {
    if (e.taget.nodeName != "text") {
    return false;
    }
}; 
```

但是nodeName每次都是一个DIV。在这个 DIV 中，我有一个 JQGrid，文本框在哪里。

```
<div id="divGrdPos" style="padding:3px,0px,3px,0px;">
    <table id="JQGridCart" class="grdCart"></table>
</div> 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:11:24.620

你需要类似的东西：

```
document.addEventListener('contextmenu', function (event) {
    if (event.target.nodeName !== 'INPUT' && event.target.type !== 'text' && event.target.nodeName !== 'TEXTAREA') {
        event.preventDefault();
    }
}); 
```

它适用于输入 (type="text") 和 textareas。

jsfiddle：http: [//jsfiddle.net/QjmHy/](http://jsfiddle.net/QjmHy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:06:45.923

你为什么要检查`text`文本框`nodeName`是`INPUT`

```
document.oncontextmenu = function (e) {
    console.log(e);
    if (e.target.nodeName != "INPUT") {
        return false;
    }
};​ 
```

[http://jsfiddle.net/qr3fu/](http://jsfiddle.net/qr3fu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:12:20.780

我发现了错误。在我的代码`mousedown()`中，我的网格上有一个事件，该事件在事件之前触发`oncontextmenu()`。在检查右键后，我`mousedown()`正在使用 div 丰富我自己的上下文菜单。

所以我检查了我的`mousedown()`事件是否`nodeName`是`"input"`并处理结果。

将`oncontextmenu()`是相同的。

谢谢你的提示。

# linux - NEON 进行操作时，ARM 是否处于空闲状态？

> ID：12968904
> 
> 赞同：12
> 
> 时间：2012-10-19T06:54:15.670
> 
> 标签：linux, embedded, arm, neon, cortex-a8

可能看起来类似于：[ARM 和 NEON 可以并行工作吗？](https://stackoverflow.com/questions/12277484/arm-and-neon-can-work-in-parallel)，但不是，我还有其他问题（我的理解可能有问题）：

在协议栈中，当我们计算校验和时，这是在 GPP 上完成的，我现在将该任务作为函数的一部分交给 NEON：

这是我作为 NEON 的一部分编写的校验和函数，发布在 Stack Overflow：[Intrinsics 中 Neon 的校验和代码实现](https://stackoverflow.com/questions/12066964/checksum-code-implementation-for-neon-in-intrinsics)

现在，假设从 linux 调用这个函数，

```
ip_csum(){
  …
  …
  csum = do_csum(); //function call from arm
  …
  …
}

do_csum(){
  …
  …
  //NEON optimised code
  …
  …
  returns the final checksum to ip_csum/linux/ARM
} 
```

在这种情况下.. 当 NEON 进行计算时，ARM 会发生什么？ARM 闲着吗？还是继续进行其他操作？

如您所见， do_csum 被调用，我们正在等待该结果（或者这就是它的样子）..

**笔记：**

1.  说到Cortex-A8
2.  从链接中可以看到 do_csum 是用内在函数编码的
3.  使用 gnu 工具链编译
4.  如果您还采用多线程或任何其他涉及或在这些交互操作发生时出现的概念，那将会很好。

**问题：**

1.  NEON 进行操作时，ARM 是否处于空闲状态？（在这种特殊情况下）
2.  还是搁置当前与 ip_csum 相关的代码，并占用另一个进程/线程直到 NEON 完成？（我对这里发生的事情几乎一无所知）
3.  如果它闲置，我们怎样才能让 ARM 在其他事情上工作，直到 NEON 完成？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T07:07:58.237

![在此处输入图像描述](../Images/70c4c5a1d65598ba21484e5e22acaed7.png)

（图片来自[TI Wiki Cortex A8](http://processors.wiki.ti.com/index.php/Cortex-A8_Architecture)）

在处理 NEON 指令时，ARM（或者更确切地说是整数管道）不会处于空闲状态。在 Cortex A8 中，NEON 位于处理器流水线的“末端”，指令流经流水线，如果它们是 ARM 指令，它们在流水线的“开始”处执行，NEON 指令在末端执行。每个时钟都将指令向下推到流水线中。

以下是有关如何阅读上图的一些提示：

*   每个周期，如果可能，处理器获取一个指令对（两条指令）。
*   提取是流水线的，因此指令需要 3 个周期才能传播到解码单元。
*   指令解码需要 5 个周期（D0-D4）。同样，这是所有管道，因此它会影响延迟，但不会影响吞吐量。在可能的情况下，更多的指令会继续流经管道。
*   现在我们到达执行/加载存储部分。NEON 指令流经此阶段（但它们在其他指令可能正在执行时执行此操作）。
*   我们进入 NEON 部分，如果 13 个周期前获取的指令是 NEON 指令，那么它现在在 NEON 流水线中被解码和执行。
*   发生这种情况时，该指令之后的整数指令可以在整数管道中**同时执行。**
*   流水线是一个相当复杂的野兽，有些指令是多周期的，有些指令有依赖关系，如果不满足这些依赖关系就会停止。其他事件（例如分支）将刷新管道。

如果您正在执行一个 100% NEON 指令的序列（这非常罕见，因为通常涉及一些 ARM 寄存器、控制流等），那么在某些时期整数管道没有做任何有用的事情。大多数代码至少会在某些时候让两者同时执行，而巧妙设计的代码可以通过正确的指令组合最大限度地提高性能。

[这个用于 Cortex A8](http://pulsar.webshaker.net/ccc/index.php?lng=us)的在线工具Cycle Counter非常适合分析汇编代码的性能，并提供有关在哪些单元中执行的内容和停止的内容的信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T07:03:41.247

在`Application Level Programmers’ Model`中，您无法真正区分 ARM 和 NEON 单位。

虽然 NEON 是一个单独的硬件单元（在 Cortex-A 系列处理器上作为一个选项提供），但它是 ARM 内核以紧密的方式驱动它。它不是一个单独的 DSP，您可以以异步方式进行通信。

您可以通过充分利用两个单元上的管道来编写更好的代码，但这与拥有单独的内核不同。

NEON 单元之所以存在，是因为它可以在低频下比 ARM 单元更快地执行一些操作（SIMD）。

这就像有一个擅长数学的朋友，当你有一个难题时，你可以问他。在等待答案时，您可以做一些小事情，例如如果答案是这个，我应该这样做，或者如果不这样做，但如果您依赖该答案继续，您需要等待他回答，然后再继续。您可以自己计算答案，但与自己计算所有数学相比，即使包括你们两个之间的通信时间也会快得多。我认为您甚至可以将这个类比扩展为“您还需要为那个朋友买一些午餐（能量消耗），但在很多情况下这是值得的”。

任何说 ARM 内核可以做其他事情而 NEON 内核正在处理它的东西的人都在谈论[指令级并行性，](http://en.wikipedia.org/wiki/Instruction-level_parallelism)而不是[任务级并行性](http://en.wikipedia.org/wiki/Task_parallelism)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-19T07:03:08.190

执行 NEON 操作时，ARM 不会“空闲”，而是*控制*它们。
为了充分利用这两个单元的力量，可以仔细规划交错的操作序列：

```
loop:
SUBS r0,r0,r1  ; // ARM operation
addpq.16 q0,q0,q1  ; NEON operation
LDR r0, [r1, r2 LSL #2];   // ARM operation
vld1.32 d0, [r1]!  ; // NEON operation using ARM register
bne loop;         // ARM operation controlling the flow of both units... 
```

ARM cortex-A8 在每个时钟周期内最多可以执行 2 条指令。如果它们都是独立的 NEON 操作，那么在它们之间放置一条 ARM 指令是没有用的。OTOH，如果知道 VLD（加载）的延迟很大，则可以在加载和加载值的第一次使用之间放置许多 ARM 指令。但在每种情况下，必须提前计划并交错使用组合使用。

# xaml - 日历应用 Flipview 控件

> ID：12968905
> 
> 赞同：0
> 
> 时间：2012-10-19T06:54:31.417
> 
> 标签：xaml, windows-runtime, winrt-xaml

我正在构建一个 Windows 8 应用程序并且已经到了不明白如何解决我的问题的地步。（总的来说，我是 C# 开发的新手，所以有些东西对我来说更陌生，不包括新的 WIN-RT 范例）

我创建了一个 XAML 文件，该文件显示 1 周（星期日 - 星期六），并用当天的月份日期（例如 20-27）填充每一天的列，它只是创建一个新的日历对象和使用当前日期。

**这是我的问题：** 我想实现一个翻转视图来每周改变，向前和向后（这与 Windows 8 日历应用程序中的功能非常相似）

我不知道如何从一个星期移动到另一个星期，因为大多数在线演示都使用图像文件资源。我想移动到我拥有的同一个 XAML 文件，只是填充了不同的数字字段等。

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:28:46.873

由于 FlipView 是 ItemsControl - 您可以使用填充列表时使用的相同方法 - 使用 ItemsSource 绑定到周集合并指定将显示周视图的 ItemTemplate/DataTemplate。

最终，您可能会遇到一些问题，即日历不应该是一个有开始和结束的列表。也许您可以实现一些伪虚拟化 hack，但最终实现您自己的交互逻辑可能会更好。

# php - 如何从 php 中的数据库中获取特定值？

> ID：12968907
> 
> 赞同：-2
> 
> 时间：2012-10-19T06:54:40.403
> 
> 标签：php, html, mysql

```
 $sql="Select chanceNo From gm_gacha_token1 where token_code='$mytoken'";
    $result=mysql_query($sql);
    $count=mysql_num_rows($result); 
```

语言：PHP

我想要实现的是，我想获得一个机会号的值。我怎样才能获得该值并将其存储到 cookie/sesison 并在下一页中显示？

任何想法，下一步或下一行代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:00:02.543

第 1 页：

```
session_start();

$query = mysql_query("Select chanceNo From gm_gacha_token1 where token_code='$mytoken' LIMIT 1");

if (mysql_num_rows($query) > 0){
$result = mysql_fetch_assoc($query);
$_SESSION['chanceNo'] = $result['chanceNo'];
// done, maybe header('location: page2.php'); ?
} else {
 // no result
} 
```

第2页：

```
session_start();
$chanceNo = $_SESSION['chanceNo'];
echo $chanceNo; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-19T06:58:25.057

试试这个...

```
 $sql="Select chanceNo From gm_gacha_token1 where token_code='$mytoken' LIMIT 1"; 
   $result = mysql_query($query) or die (mysql_error());

 while($rows = mysql_fetch_assoc($result))
    {
      echo $rows[chanceNo];
    } 
```

# java - 为复制的文件生成文件名

> ID：12968914
> 
> 赞同：1
> 
> 时间：2012-10-19T06:55:17.040
> 
> 标签：java, file, io

当您将文件复制并粘贴到同一目录中时，我希望获得与 Windows 中类似的行为。

例如，如果您复制/粘贴了一个名为 的文件`foo.txt`，它将创建`foo Copy.txt`，如果您再次粘贴它，它会创建`foo Copy(2).txt`，如果您复制/粘贴`foo Copy.txt`，`foo Copy Copy.txt`则会创建。

是否有执行此操作的 Java 实用程序函数？我看过`File.createTempFile`但它生成的文件名太长并且包含类似 UID 的子字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:22:09.120

通过将 FileChooser 与“showSaveDialog”方法结合使用，您将获得所需的结果，因为 java 正在使用现有文件的操作系统行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:27:44.060

有时，您只需要先完成工作，它会让您对 API 产生赞赏。然后您可以编写自己的实用程序方法

```
File original = new File("build.xml");
String path = original.getAbsoluteFile().getParent();
String name = original.getName();
String ext = name.substring(name.indexOf("."));
name = name.substring(0, name.indexOf("."));
name = path + File.separator + name;

int index = 1;
File copy = new File(name + " (" + index + ")" + ext);
while (copy.exists()) {
    index++;
    copy = new File(name + " (" + index + ")" + ext);
}
System.out.println(copy); 
```

# c# - 如何在 WPF 中编写分层数据模板？

> ID：12968920
> 
> 赞同：0
> 
> 时间：2012-10-19T06:55:29.133
> 
> 标签：c#, wpf

要求是在一个好的视图中显示父子关系。上课如下。

```
public class SearchData
{
    public string FieldName { get; set; }

    public string Description { get; set; }

    public SearchDataType Type { get; set; }

    public string Validator { get; set; }

    public object DefaultValue { get; set; }

    public object SelectedValue { get; set; }

    public Dictionary<string, object> ComboBoxItemSource
    {
        get;
        set;
    }

    public int DefaultSelectedIndex { get; set; }

    public bool IsYesOrNo { get; set; }

    public OnValidateText OnValidate { get; set; }

    public SearchData OptionalElement { get; set; }

    public SearchData DependentElement { get; set; }

    public bool IsDisplayed { get; set; }

    public bool HasValue { get; set; }
} 
```

如果*DependentElement*不为 null，则 UI 应该有一个具有此依赖元素的父级。我认为这可以使用分层数据模板来完成。谁能给出想法我应该如何绑定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:02:36.630

您可以使用 Composite Pattern 来为此设计布局。

# drupal-7 - 在drupal 7中为多站点共享来自不同数据库的表

> ID：12968928
> 
> 赞同：1
> 
> 时间：2012-10-19T06:56:38.993
> 
> 标签：drupal-7

我正在构建一个drupal 多站点，比如childone 和childtwo。两者都有各自的数据库。现在的要求是共享一些表，例如。在站点 childone 中创建的用户也必须在站点 childtwo 中具有相同的访问权限。任何人都可以向我推荐正确的逐步解决方案吗？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:41:04.593

您需要使用表前缀，settings.php 解释了如何做到这一点：

```
 * You can optionally set prefixes for some or all database table names
 * by using the 'prefix' setting. If a prefix is specified, the table
 * name will be prepended with its value. Be sure to use valid database
 * characters only, usually alphanumeric and underscore. If no prefixes
 * are desired, leave it as an empty string ''.
 *
 * To have all database names prefixed, set 'prefix' as a string:
 * @code
 *   'prefix' => 'main_',
 * @endcode
 * To provide prefixes for specific tables, set 'prefix' as an array.
 * The array's keys are the table names and the values are the prefixes.
 * The 'default' element is mandatory and holds the prefix for any tables
 * not specified elsewhere in the array. Example:
 * @code
 *   'prefix' => array(
 *     'default'   => 'main_',
 *     'users'     => 'shared_',
 *     'sessions'  => 'shared_',
 *     'role'      => 'shared_',
 *     'authmap'   => 'shared_',
 *   ),
 * @endcode 
```

因此，对于您的示例，对于您的 childone 站点的 settings.php，您将具有以下内容：

```
'prefix' => array(
  'default'    => 'childone_',
  'user'       => 'shared_',
  'sessions'   => 'shared_',
  'role'       => 'shared_',
  'permission' => 'shared_',
); 
```

而对于childtwo的settings.php，也很相似：

```
'prefix' => array(
  'default'    => 'childtwo_',
  'user'       => 'shared_',
  'sessions'   => 'shared_',
  'role'       => 'shared_',
  'permission' => 'shared_',
); 
```

除了共享表之外，所有表都将以 childone_ 或 childtwo_ 为前缀，在运行安装后，它们将以 shared_ （或任何您想要的）为前缀。

# mod-rewrite - 使用 mod_rewrite 更好地访问图像？

> ID：12968929
> 
> 赞同：0
> 
> 时间：2012-10-19T06:56:39.627
> 
> 标签：mod-rewrite

在我的应用程序中，我的 javascript 文件在文件夹`/web_root/inc/js/`中，我的图像在`/web_root/inc/images/`，我的 css 文件在`/web_root/inc/css/`.

我不喜欢这些链接，所以我想我会在它们上使用 mod_rewrite。是否推荐和/或可能使用 mod_rewrite，所以在我的代码中我可以包含图像、JS 和 CSS 文件，就像在以下示例中一样：

```
<img src="images/img.png" alt="image" /> 
```

代替：

```
 <img src="inc/images/img.png" alt="image" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:13:06.237

在您的 web_root 文件夹中添加一个 .htaccess 文件并包含以下规则

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^images/(.*) http://%{HTTP_HOST}/inc/images/$1 [R=301,L]
</IfModule> 
```

我做到了，它对我有用。

希望我能帮助你

# c# - CreateDelegate 而不是 SetValue 的反射

> ID：12968932
> 
> 赞同：4
> 
> 时间：2012-10-19T06:56:55.727
> 
> 标签：c#, reflection, delegates

我尝试实现 Jon Skeet 针对此[博客文章中发布的](http://msmvps.com/blogs/jon_skeet/archive/2008/08/09/making-reflection-fly-and-exploring-delegates.aspx)[问题](https://stackoverflow.com/questions/1804341/reflection-emit-better-than-getvalue-setvalue-s)的解决方案，以使用委托的非反射方法替换该方法。`SetValue`

[与博客文章](http://msmvps.com/blogs/jon_skeet/archive/2008/08/09/making-reflection-fly-and-exploring-delegates.aspx)中的解决方案的不同之处`SetValue`在于，`void`我`The type 'System.Void' may not be used as a type argument.`在线上遇到了异常`MethodInfo miConstructedHelper = miGenericHelper.MakeGenericMethod(typeof(G), pMethod.GetParameters()[0].ParameterType, pMethod.ReturnType);`。

这是我的实现`MagicMethod`：

```
public class Instantiator<T> where T : new()
{
    private T instance;
    private IDictionary<string, PropertyInfo> properties;

    private Func<PropertyInfo, object, object> _fncSetValue;

    public Instantiator()
    {
        Type type = typeof(T);
        properties = type.GetProperties().GroupBy(p => p.Name).ToDictionary(g => g.Key, g => g.ToList().First());

        MethodInfo miSetValue = typeof(PropertyInfo).GetMethod("SetValue", new Type[] { typeof(object), typeof(object), typeof(object[]) });
        _fncSetValue = SetValueMethod<PropertyInfo>(miSetValue);
    }

    public void CreateNewInstance()
    {
        instance = new T();
    }

    public void SetValue(string pPropertyName, object pValue)
    {
        if (pPropertyName == null) return;
        PropertyInfo property;
        if (!properties.TryGetValue(pPropertyName, out property)) return;
        TypeConverter tc = TypeDescriptor.GetConverter(property.PropertyType);

        //substitute this line
        //property.SetValue(instance, tc.ConvertTo(pValue, property.PropertyType), null);
        //with this line
        _fncSetValue(property, new object[] { instance, tc.ConvertTo(pValue, property.PropertyType), null });
    }

    public T GetInstance()
    {
        return instance;
    }

    private static Func<G, object, object> SetValueMethod<G>(MethodInfo pMethod) where G : class
    {
        MethodInfo miGenericHelper = typeof(Instantiator<T>).GetMethod("SetValueMethodHelper", BindingFlags.Static | BindingFlags.NonPublic);
        MethodInfo miConstructedHelper = miGenericHelper.MakeGenericMethod(typeof(G), pMethod.GetParameters()[0].ParameterType, pMethod.ReturnType);
        object retVal = miConstructedHelper.Invoke(null, new object[] { pMethod });
        return (Func<G, object, object>) retVal;
    }

    private static Func<TTarget, object, object> SetValueMethodHelper<TTarget, TParam, TReturn>(MethodInfo pMethod) where TTarget : class
    {
        Func<TTarget, TParam, TReturn> func = (Func<TTarget, TParam, TReturn>)Delegate.CreateDelegate(typeof(Func<TTarget, TParam, TReturn>), pMethod);
        Func<TTarget, object, object> retVal = (TTarget target, object param) => func(target, (TParam) param);
        return retVal;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T07:03:22.227

您`Func`在代码中使用。`Func`用于具有返回类型的方法。对于返回的方法，`void`您需要使用`Action`.

* * *

您的代码需要如下所示：

```
public class Instantiator<T> where T : new()
{
    private T instance;
    private IDictionary<string, PropertyInfo> properties;

    private Action<PropertyInfo, object, object, object> _fncSetValue;

    public Instantiator()
    {
        Type type = typeof(T);
        properties = type.GetProperties()
                         .GroupBy(p => p.Name)
                         .ToDictionary(g => g.Key, g => g.ToList().First());

        var types = new Type[] { typeof(object), typeof(object),
                                 typeof(object[]) };
        var miSetValue = typeof(PropertyInfo).GetMethod("SetValue", types);
        _fncSetValue = SetValueMethod<PropertyInfo>(miSetValue);
    }

    public void CreateNewInstance()
    {
        instance = new T();
    }

    public void SetValue(string pPropertyName, object pValue)
    {
        if (pPropertyName == null) return;
        PropertyInfo property;
        if (!properties.TryGetValue(pPropertyName, out property)) return;
        TypeConverter tc = TypeDescriptor.GetConverter(property.PropertyType);

        var value = tc.ConvertTo(pValue, property.PropertyType);
        _fncSetValue(property, instance, value, null);
    }

    public T GetInstance()
    {
        return instance;
    }

    private static Action<G, object, object, object> SetValueMethod<G>(MethodInfo pMethod) where G : class
    {
        var miGenericHelper = 
            typeof(Instantiator<T>).GetMethod("SetValueMethodHelper", 
                                              BindingFlags.Static | 
                                              BindingFlags.NonPublic);

        var parameters = pMethod.GetParameters();
        var miConstructedHelper = miGenericHelper.MakeGenericMethod(typeof(G), 
                                      parameters[0].ParameterType,
                                      parameters[1].ParameterType,
                                      parameters[2].ParameterType);

        var retVal = miConstructedHelper.Invoke(null, new object[] { pMethod });
        return (Action<G, object, object, object>) retVal;
    }

    private static Action<TTarget, object, object, object> SetValueMethodHelper<TTarget, TParam1, TParam2, TParam3>(MethodInfo pMethod) where TTarget : class
    {
        var func = (Action<TTarget, TParam1, TParam2, TParam3>)Delegate.CreateDelegate(typeof(Action<TTarget, TParam1, TParam2, TParam3>), pMethod);
        Action<TTarget, object, object, object> retVal =
            (target, param1, param2, param3) => 
                func(target, (TParam1) param1, (TParam2) param2, (TParam3) param3);

        return retVal;
    }
} 
```

* * *

由于您不想调用 Jon Skeet 之类的任意方法，因此可以大大简化*代码*。不需要`MethodInfo.Invoke`在您的代码中调用 to ，因此不需要委托。您可以简单地`SetValue`直接调用返回的`PropertyInfo`. 无论如何都不需要使用委托的迂回方法，而委托又会准确地调用该方法。此外，类型转换不是必需的，因为无论如何都`SetValue`需要。 您的代码可以像这样简单：`object`

```
public class SimpleInstantiator<T> where T : new()
{
    private T instance;
    private IDictionary<string, PropertyInfo> properties;

    public SimpleInstantiator()
    {
        Type type = typeof(T);
        properties = type.GetProperties()
                         .GroupBy(p => p.Name)
                         .ToDictionary(g => g.Key, g => g.ToList().First());
    }

    public void CreateNewInstance()
    {
        instance = new T();
    }

    public void SetValue(string pPropertyName, object pValue)
    {
        if (pPropertyName == null) return;

        PropertyInfo property;
        if (!properties.TryGetValue(pPropertyName, out property)) return;

        property.SetValue(instance, pValue, null);
    }

    public T GetInstance()
    {
        return instance;
    }
} 
```

性能测试表明，这个版本只占用了前一个版本的 50% 左右。
性能的微小提升是由于我们在调用链中避免了两个不必要的委托。然而，绝大多数速度改进在于我们删除了类型转换。

# asp.net-mvc - 如何从我的网站检查 url 在另一个网站上是否可用？

> ID：12968934
> 
> 赞同：0
> 
> 时间：2012-10-19T06:57:01.387
> 
> 标签：asp.net-mvc

我想从我的网站检查某人的网站中是否有特定的 url？例如：我的网站是 www.example1.com 另一个网址是 www.example2.com

我想检查网址 www.example2.com/blogs 是否可以从 www.example1.come 网站获得？

可能吗？如果是这样，你能告诉我如何检查吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:59:12.867

[您可以使用WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)类向此 url 发送 HTTP 请求并捕获异常。如果远程服务器返回 404，您将在尝试下载内容时收到异常：

```
using (var client = new WebClient())
{
    try
    {
        client.DownloadData("http://www.google.com/x");
        // The url exists
    }
    catch (WebException ex)
    {
        if (((HttpWebResponse)ex.Response).StatusCode == HttpStatusCode.NotFound)
        {
            // 404
        }
    }
} 
```

# android - Android中的图像到视频转换器

> ID：12968941
> 
> 赞同：3
> 
> 时间：2012-10-19T06:57:29.153
> 
> 标签：android, ffmpeg, mp4, video-processing, video-encoding

我想将多个图像（帧）转换为 android 设备中的视频（MP4）。另外，我想将视频（MP4）转换为多个图像（每帧）。我对 FFMPEG 的了解有限，但在 Android 中安装 FFMPEG 可能会花费更多时间。我想请有经验的工程师提出一个更好的策略，它可以花费更少的时间来完成这项任务。请指点我一些开源代码，我可能会对其进行修改以快速完成此任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T03:53:29.923

首先，您需要使用 Image Decoder 将 Image 转换为 YUV 格式。

然后，您可以将每个 YUV 图像作为视频输入提供给 Media Recorder Engine。

浏览媒体记录器源代码以获取更多信息。

# android - 无法打开画廊内的特定文件夹

> ID：12968942
> 
> 赞同：-1
> 
> 时间：2012-10-19T06:57:32.043
> 
> 标签：android

我如何在图库中打开特定文件夹。例如：文件夹名称是我的文件夹。当用户单击按钮时，它会直接在默认图库中打开我的文件夹。我怎样才能做到这一点？

```
Intent intent=new Intent(Intent.ACTION_VIEW);
Uri uri=Uri.fromFile(new File(Environment.getExternalStorageDirectory().toString()+"/video"));
intent.setType("video/mp4");
startActivityForResult(Intent.createChooser(openGallary, "Select Video"), 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:27:03.460

这个答案已经给出了两次。下次请先使用谷歌。abbas.aniefa 提供的链接是我在 Google 上搜索“ACTION_VIEW 特定画廊”时的第二次点击。[这里](https://stackoverflow.com/questions/6074270/built-in-gallery-in-specific-folder/8255674#8255674)也给出了答案。

# ios - NSMutableAttributedString 丢失属性并分配给 iOS6 上的 UITextView

> ID：12968944
> 
> 赞同：0
> 
> 时间：2012-10-19T06:57:43.273
> 
> 标签：ios, ios6, uitextview

我需要开发一个可以为补丁文件做一些语法高亮的应用程序，它高度依赖于iOS6中添加的NSMutableAttributedString，所以我创建了一个主/详细视图来显示文件，带有一个处理器类，它为每行文本，但是当我将此属性字符串分配给 UITextView.attributeString 时，我发现所有属性都丢失了。

我的代码是这样的：

```
- (IBAction)ColorIconClicked:(id)sender {

NSMutableAttributedString *str = [[NSMutableAttributedString alloc
                                   ] initWithAttributedString:self.textView.attributedText];
self.textView.text = nil;
[self.textView setEditable:YES];
[[processor processPatchText:str withTheme:COLOR_TEXT_THEME_DAY suggestFormat:@"diffu"] attributedSubstringFromRange:NSMakeRange(0, str.length)];

self.textView.attributedText = str;

NSLog(@"|||||||||||||||||||||||||||||||||");

NSLog(@"STD: %@", str);
NSLog(@"-----------------------------");
NSLog(@"%@", self.textView.attributedText);

[self.textView setEditable:NO];
} 
```

我捕获的日志如下：

这是分配前“str”的转储：

```
2012-10-19 01:12:42.863 ColorDiff[354:907] |||||||||||||||||||||||||||||||||
2012-10-19 01:12:42.883 ColorDiff[354:907] STD: diff --git a/ColorDiff/CDTextProcessor.m b/ColorDiff/CDTextProcessor.m{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}index 3e554fa..18723b2 100644{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}--- a/ColorDiff/CDTextProcessor.m{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}+++ b/ColorDiff/CDTextProcessor.m{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}@@ -15,9 +15,19 @@{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
} // git format-patch or something like svn or raw diff output.{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
} //{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
} // then it should call the different render to do the actually render job.{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}-- (NSMutableAttributedString *) processPatchText:(NSMutableAttributedString*) attstring withTheme: (int) theme suggestFormat:(NSString *) format{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}+- (NSMutableAttributedString *) processPatchText:(NSMutableAttributedString *) attstring{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}+                                       withTheme:(int) theme{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}

{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}+ * This function return the patch format for the input text.{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}+ * return type should be like: diffu, diffc, etc, aligh with colordiff.pl{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}+ */{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}+- (NSString *) detechPatchFormatForText:(NSMutableAttributedString *) attstring{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}+{{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}+    {
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}+}{
    NSColor = "UIDeviceWhiteColorSpace 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
} 
```

但分配后：

textView 的属性转储是这样的

```
"NSLog(@"%@", self.textView.attributedText);" is become:
2012-10-19 01:12:42.924 ColorDiff[354:907] -----------------------------
2012-10-19 01:12:42.991 ColorDiff[354:907] diff --git a/ColorDiff/CDTextProcessor.m b/ColorDiff/CDTextProcessor.m
index 3e554fa..18723b2 100644
--- a/ColorDiff/CDTextProcessor.m
+++ b/ColorDiff/CDTextProcessor.m
@@ -15,9 +15,19 @@
// git format-patch or something like svn or raw diff output.
//
// then it should call the different render to do the actually render job.
-- (NSMutableAttributedString *) processPatchText:(NSMutableAttributedString*) attstring withTheme: (int) theme suggestFormat:(NSString *) format
+- (NSMutableAttributedString *) processPatchText:(NSMutableAttributedString *) attstring
+                                       withTheme:(int) theme
+                                   suggestFormat:(NSString *) format
{

}

+/*
+ * This function return the patch format for the input text.
+ * return type should be like: diffu, diffc, etc, aligh with colordiff.pl
+ */
+- (NSString *) detechPatchFormatForText:(NSMutableAttributedString *) attstring
+{
+   
+}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x210595f0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
} 
```

分配 textView 的 self.textView.attributedText 时 str 的属性丢失。

为什么 ？

这是一个BUG？

如何将属性字符串分配给 textView ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:36:39.757

这些不是iOS中的BUG，是我的程序错误造成的，所以属性实际上没有正确的属性，不同的颜色，修复后，程序再次运行。

# linux-kernel - KVM 管理程序远程连接

> ID：12968946
> 
> 赞同：-2
> 
> 时间：2012-10-19T06:57:47.877
> 
> 标签：linux-kernel, virtualization, remote-access, kvm, hypervisor

我是 Linux KVM 虚拟化领域的新手。任何人都可以帮助如何在不使用 LibVirt 或任何其他第三方库的情况下从远程 Linux 机器连接到我的 KVM 管理程序。我已经搜索过这个，但我得到的所有结果都是使用 libvirt 或与之相关的命令。我不允许使用任何第三方库，需要从远程机器上备份我的 KVM。

您能否告诉我为什么 KVM 中需要守护程序，而 VMware ESXI 中不需要守护程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:03:22.743

如果您只想连接，则不需要 libvirt 或其他任何东西。您可以像这样使用 vnc 查看器：vncviewer IP:PORT

```
$ vncviewer 192.168.1.123:0 #if you using display number
$ vncviewer 192.168.1.123::5900 #if u using port number 
```

我不太明白“备份我的 KVM”是什么意思？

当然，VMware ESXI 需要一个守护进程才能运行。使用可以使用 ps 来验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T14:47:15.263

使用带有选项的 kvm 命令`-vnc 0.0.0.0:0`并使用 Evaggelos Balaskas 显示的命令进行连接

# haxe - Haxe 堆栈跟踪未在 Windows exec 上显示

> ID：12968948
> 
> 赞同：1
> 
> 时间：2012-10-19T06:57:58.890
> 
> 标签：haxe

我正在使用 Haxe 构建一个 Windows 可执行文件。运行 exec 时，错误消息非常简短（例如：“错误：空函数”），没有行号或堆栈跟踪。

我正在使用 -debug 标志（理论上应该在错误时启用堆栈跟踪）编译可执行文件，但没有运气。

我查看了这个页面（[http://haxe.org/doc/cross/exceptions](http://haxe.org/doc/cross/exceptions) ）并希望覆盖默认的错误处理功能，但没有关于如何为 windows exec 执行此操作的说明；仅适用于 flash/js/neko。

如果我将游戏投入到 try/catch 中，我可以手动获取错误并调用自己的 getTrace()，我很高兴，但它已经到了我不确定在哪里放置 try/catch 调用的地步并且真的需要让这个工作。

有小费吗？

# string - Lua - 如何找到具有 1 或 2 个字符差异的子字符串

> ID：12968949
> 
> 赞同：2
> 
> 时间：2012-10-19T06:58:02.640
> 
> 标签：string, lua, string-matching

说我有一个字符串

```
local a = "Hello universe" 
```

我找到子字符串“宇宙”

```
a:find("universe") 
```

现在，假设字符串是

```
local a = "un#verse" 
```

要搜索的字符串是universe；但子字符串相差一个字符。所以显然 Lua 忽略了它。

即使单个字符存在差异，如何使函数找到字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T07:03:15.473

如果您知道该字符的位置，请使用`.`该字符代替：`a:find("un.verse")`

但是，看起来您正在寻找模糊字符串搜索。它超出了 Lua`string`库的范围。您可能想从这篇文章开始：http: [//ntz-develop.blogspot.com/2011/03/fuzzy-string-search.html](http://ntz-develop.blogspot.com/2011/03/fuzzy-string-search.html)

至于 Lua 模糊搜索实现——我没有使用过，但是搜索“lua 模糊搜索”会给出一些结果。有些是基于这篇论文：[http ://web.archive.org/web/20070518080535/http://www.heise.de/ct/english/97/04/386/](http://web.archive.org/web/20070518080535/http://www.heise.de/ct/english/97/04/386/)

试试[https://github.com/ajsher/luafuzzy](https://github.com/ajsher/luafuzzy)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T08:30:47.413

听起来您想要类似[TRE](http://laurikari.net/tre/about/)的东西：

> TRE 是一个轻量级、健壮且高效的 POSIX 兼容正则表达式匹配库，具有一些令人兴奋的特性，例如近似（模糊）匹配。
> 
> 近似模式匹配允许匹配是近似的，即允许匹配在某种接近度度量下接近搜索到的模式。TRE 使用编辑距离度量（也称为 Levenshtein 距离），可以在搜索文本中插入、删除或替换字符以获得精确匹配。每次插入、删除或替换都会增加匹配的距离或成本。TRE 可以报告成本低于某个给定阈值的匹配。TRE 也可用于搜索成本最低的匹配项。

它的 Lua 绑定可作为[lrexlib](https://github.com/rrthomas/lrexlib)的一部分使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T09:43:53.257

一个简单的滚动你自己的方法（基于模式保持相同长度的假设）：

```
function hammingdistance(a,b)
    local ta={a:byte(1,-1)}
    local tb={b:byte(1,-1)}
    local res = 0
    for k=1,#a do
        if ta[k]~=tb[k] then
            res=res+1
        end
    end
    print(a,b,res) -- debugging/demonstration print
    return res
end

function fuz(s,pat)
    local best_match=10000
    local best_location
    for k=1,#s-#pat+1 do
        local cur_diff=hammingdistance(s:sub(k,k+#pat-1),pat)
        if  cur_diff < best_match then
            best_location = k
            best_match = cur_diff
        end
    end
    local start,ending = math.max(1,best_location),math.min(best_location+#pat-1,#s)
    return start,ending,s:sub(start,ending)
end

s=[[Hello, Universe! UnIvErSe]]
print(fuz(s,'universe')) 
```

**免责声明：不推荐，只是为了好玩：**

如果你想要一个更好的语法（并且你不介意弄乱标准类型的元表），你可以使用这个：

```
getmetatable('').__sub=hammingdistance
a='Hello'
b='hello'
print(a-b) 
```

但请注意，`a-b`不等于`b-a`这种方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T09:59:31.773

如果您真的在寻找单个字符差异并且不关心性能，那么这是一个应该有效的简单方法：

```
local a = "Hello un#verse"

local myfind = function(s,p)  
  local withdot = function(n)
    return p:sub(1,n-1) .. '.' .. p:sub(n+1)
  end
  local a,b
  for i=1,#s do
    a,b = s:find(withdot(i))
    if a then return a,b end
  end
end

print(myfind(a,"universe")) 
```

# grid - 如何将灯箱添加到网格中的字段？

> ID：12968951
> 
> 赞同：2
> 
> 时间：2012-10-19T06:58:08.203
> 
> 标签：grid, lightbox, tapestry

我有一个 Tapestry 5 (5.3.4) 应用程序，它显示了一个带有一些值的网格。我想在网格中添加一个显示图像图标的字段（我已经这样做了），当用户单击该图标时，灯箱将显示请求的图像（我需要这部分的帮助）。问题在于灯箱，因为未调用 JavaScript 并且图像显示在单页中（图像的 URL - 服务器上的资源）。我试图在网格外打开灯箱，它可以工作，但不能在里面。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:10:01.183

很抱歉发布这个问题，但答案是 jQuery 和 Prototype 之间的简单冲突。只需要添加`$.noConflict().`到 jQuery 库。毕竟灯箱是可能的。

# url - 将选中的drop box值id传给下一页的url

> ID：12968952
> 
> 赞同：1
> 
> 时间：2012-10-19T06:58:14.010
> 
> 标签：url

我对 php 很陌生。如何将选定的下拉框值传递给下一页 url？我有这样的事情： -

```
<script language="javascript">
    function showMe(str)
    {
    document.getElementById('myDiv').innerHTML = 'You have selected :'+str;
    }   
    </script>
    <select id="ccrseid" name="ccrseid" onchange="showMe(this.value);">
   <option value="">Select</option>
    <option value="1">Computer Science</option>
    <option value="2">Engineering</option>
    <option value="3">Business</option>
    <option value="4">Education and Training</option>

   </select>
<div id="myDiv"></div>

</body>
    </html>
<a href="#"onclick="document.location.href='timer.php?selectvalue='+document.getElementById('myDiv').value">Submit</a> 
```

当我执行时，我在 url 处得到“未定义”。

```
http://localhost/timer.php?selectvalue=undefined 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:24:39.860

对于您的问题，您似乎想要实现两种不同的结果；第一个是您希望将`<select>`保管箱的值传递给登陆 php 页面，而您的示例代码建议您希望通过`<select>`附加“您已选择：”来传递该值。所以基本上 - 有了给定的信息 - 你想要实现两个结果，第一个是最终的“GET”网址

```
http://localhost/timer.php?selectvalue=1 
```

另一个带有“GET”网址的

```
http://localhost/timer.php?selectvalue=You%20have%20selected%20:1 
```

对于第一个结果，使用 javascript 是一种不好的方法，我建议您使用标准 html`<form>`标签来构建您的表单，`<input>`而不是将`<a>`标签作为按钮

```
<form action="timer.php" method="get">
  <select id="ccrseid" name="selectvalue" onchange="showMe(this.value);">
  <option value="">Select</option>
  <option value="1">Computer Science</option>
  <option value="2">Engineering</option>
  <option value="3">Business</option>
  <option value="4">Education and Training</option>
  </select>
  <input type="submit" value="Submit">
<form> 
```

使用第二种解决方案，即将`<select>`值打印到 div 并将该数据发送到带有`<a>`标签的登录页面，您需要做的是更改最后一行的链接

```
<a href="#"onclick="document.location.href='timer.php?electvalue='+document.getElementById('myDiv').value">Submit</a> 
```

到

```
<a href="#"onclick="document.location.href='timer.php?electvalue='+document.getElementById('myDiv').innerHTML">Submit</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T19:24:14.817

尽管可以使用 javascript，但我建议您使用 php 执行此操作。它确保您的访问者不需要启用 javascript 也能够利用该表单。

```
<form action="timer.php" method="post">
  <select id="ccrseid" name="selectvalue"">
  <option value="">Select</option>
  <option value="1">Computer Science</option>
  <option value="2">Engineering</option>
  <option value="3">Business</option>
  <option value="4">Education and Training</option>
  </select>
  <input type="submit" value="Submit">
<form> 
```

然后在 timer.php 文件的顶部...

```
if((int)$_POST['selectvalue']){
    header('Location:timer.php?selectvalue=' . (int)$_POST['selectvalue']);
    exit;
} 
```

不需要javascript。

# frame - 为什么以太网类型字段的长度是 2 个字节？

> ID：12968962
> 
> 赞同：0
> 
> 时间：2012-10-19T06:58:44.450
> 
> 标签：frame, ethernet

以太网的类型很少，但帧结构中的以太网类型也有 2 个字节。这不是空间利用不足造成的空间浪费吗？我的意思是 1 个字节不足以适应以太网类型的所有可能性，还是其他原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:25:00.030

一个可能的原因是，如果 LLC 封装，这 2 个字节可能是有效载荷长度。如果长度只有 1 个字节，那么它太小了。

同样从字节对齐的角度来看，所有字段（除了有效负载）至少是 16 位对齐的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T07:02:26.050

查看[http://en.wikipedia.org/wiki/Ethertype](http://en.wikipedia.org/wiki/Ethertype)。这是该帧的协议定义

# django-admin - 将没有模型的自定义视图集成到管理员中

> ID：12968964
> 
> 赞同：2
> 
> 时间：2012-10-19T06:59:00.527
> 
> 标签：django-admin, django-views

我试图弄清楚如何在不手动设置 url 的情况下将给定的视图集成到管理 url 方案中。

背景：我有三个模型，我在一个 CSV 文件中获取数据（甚至不要问为什么......）。因此，在我的概念中，导入视图并未绑定到给定模型。

有什么方法可以将没有模型的视图注册到默认管理站点，以便我可以将视图添加到 app_index 中的侧边栏块，并使用相对于应用程序的 url（如“app/import”）？

我想避免将“admin/app/import”url 写入我的 urlconf。但是，如果这无法避免，有人可以给我一些提示，如何至少让它们便携吗？（如包含应用程序名称/应用程序管理员的基本 url 的变量）

我还不知道 django 背后的所有魔力。

# c# - 我如何在每天上午 10 点到 11 点之间调用一个函数

> ID：12968969
> 
> 赞同：0
> 
> 时间：2012-10-19T06:59:19.230
> 
> 标签：c#, asp.net

我在 c# 中创建一个函数并在服务器上发布。但现在我只想在上午 10 点到 11 点之间运行这个功能。我怎样才能创建这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:06:17.920

最简单的方法是使用[Windows Task](http://www.windowsnetworking.com/articles_tutorials/Working-Windows-Server-2008-Task-Scheduler-Part1.html)，这是一个示例触发器，它应该可以执行您想要的操作：

![在此处输入图像描述](../Images/3e9f83c75121da02c9697f61852f5387.png)

（假设 Windows 因为 ASP.NET 标签）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:01:47.847

使用[Windows 任务计划程序](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383614%28v=vs.85%29.aspx)来安排您的进程运行。或者，如果您真的是指调用特定方法：编写一个调用该特定方法的控制台应用程序并使用任务调度程序对其进行调度

**编辑**

如果您没有运行 Windows 环境，这里是[cron](http://www.manpagez.com/man/8/cron/)的手册页。您可以安排一个作业来启动 Mono 进程（或者如果您只需要访问一个页面来调用您的方法，也许是一个调用[wget的](http://www.linuxmanpages.com/man1/wget.1.php)[shell 脚本](http://freeos.com/guides/lsst/ch02.html)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T07:03:21.623

开始使用[Quartz .Net](http://quartznet.sourceforge.net/)

[在Cron Maker](http://www.cronmaker.com/)的帮助下

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T07:02:42.887

它应该是评论中的答案：

使用 Windows 任务计划程序。使用[PowerShell](http://msdn.microsoft.com/en-us/library/windows/desktop/aa973757%28v=vs.85%29.aspx)，您应该能够调用您编写的任何 .NET 程序集。

# rest - 在 Play 2.0 Java 上使用 play-authenticate 的 REST API

> ID：12968970
> 
> 赞同：1
> 
> 时间：2012-10-19T06:59:21.013
> 
> 标签：rest, authentication, playframework-2.0, play-authenticate

我打算用 play-authenticate 替换现有的自​​定义身份验证。成功登录后，REST API 会向客户端返回一个令牌，所有后续请求都会将该令牌添加为查询参数。

查看 play-authenticate[代码](https://github.com/joscha/play-authenticate/blob/master/code/app/com/feth/play/module/pa/PlayAuthenticate.java#L231)，用户详细信息似乎存储在 Play Session 中。

但是，我不确定客户端是否会使用 cookie。旧版本将令牌与存储的值进行比较，以验证每个请求。显然我可以扩展 PlayAuthenticate 并覆盖 getUser 等方法。有没有更好的方法来实现这一目标？

# iphone - textview上的popoverview单击tableview单元格

> ID：12968974
> 
> 赞同：0
> 
> 时间：2012-10-19T06:59:50.707
> 
> 标签：iphone, ios, ipad, uipopovercontroller

我有一个`UITableView`作为表单，它`UITextView`在`UITableViewCell`. 我希望`UIPopoverView`在文本视图的位置选择文本视图时出现。当`UIPopoverView`我单击文本视图时，它出现在不同的位置。如果可以的话，请帮助我。我很长一段时间都被困在这部分代码中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:13:46.800

```
[yourPopoverView presentPopoverFromRect:CGRectMake(yourTextView.frame.origin.x.0,yourTextView.frame.origin.x, 400.0, 400.0) 
                             inView:self.view
           permittedArrowDirections:UIPopoverArrowDirectionAny 
                           animated:YES]; 
```

在上面给出你的要求的框架，比如 yourTaxtView.Frame

# wsgi - cherrypy wsgi 应用程序未在 dotcloud 上运行

> ID：12968975
> 
> 赞同：1
> 
> 时间：2012-10-19T06:59:58.220
> 
> 标签：wsgi, cherrypy, dotcloud

我正在编写cherrypy应用程序，它在带有apache和mod_wsgi的localhost上运行良好，但它没有在dotcloud上运行它给我错误502应用程序没有响应

我的 approot 中有 wsgi.py，其中包含

```
application = cherrypy.Application(Root(), script_name=None, config=None) 
```

不幸的是，这里的日志没有错误

```
==> /var/log/supervisor/supervisord.log <==
2012-10-19 06:54:53,689 CRIT Set uid to user 1000
2012-10-19 06:54:53,689 WARN Included extra file "/etc/supervisor/conf.d/uwsgi.conf" during parsing
2012-10-19 06:54:53,850 INFO RPC interface 'supervisor' initialized
2012-10-19 06:54:53,850 WARN cElementTree not installed, using slower XML parser for XML-RPC
2012-10-19 06:54:53,850 CRIT Server 'unix_http_server' running without any HTTP authentication checking
2012-10-19 06:54:53,855 INFO daemonizing the supervisord process
2012-10-19 06:54:53,861 INFO supervisord started with pid 145
2012-10-19 06:54:54,867 INFO spawned: 'uwsgi' with pid 150
2012-10-19 06:54:56,057 INFO success: uwsgi entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)

==> /var/log/supervisor/uwsgi.log <==
Fri Oct 19 06:54:55 2012 - your server socket listen backlog is limited to 100 connections
Fri Oct 19 06:54:55 2012 - *** Operational MODE: preforking ***
Fri Oct 19 06:54:55 2012 - added /home/dotcloud/current/ to pythonpath.
Fri Oct 19 06:54:55 2012 - *** no app loaded. going in full dynamic mode ***
Fri Oct 19 06:54:55 2012 - *** uWSGI is running in multiple interpreter mode ***
Fri Oct 19 06:54:55 2012 - spawned uWSGI master process (pid: 161)
Fri Oct 19 06:54:55 2012 - spawned uWSGI worker 1 (pid: 168, cores: 1)
Fri Oct 19 06:54:55 2012 - spawned uWSGI worker 2 (pid: 169, cores: 1)
Fri Oct 19 06:54:55 2012 - spawned uWSGI worker 3 (pid: 170, cores: 1)
Fri Oct 19 06:54:55 2012 - spawned uWSGI worker 4 (pid: 171, cores: 1)

==> /var/log/nginx/access.log <==

==> /var/log/nginx/error.log <==

==> /var/log/nginx/salesinfo-default-www-0.access.log <==
** (-) - - [19/Oct/2012:06:54:53 +0000] "-" 400 0 "-" "-"

==> /var/log/nginx/salesinfo-default-www-0.error.log <==

==> /var/log/supervisor/uwsgi.log <==
Fri Oct 19 06:55:42 2012 - WSGI app 0 (mountpoint='') ready in 1 seconds on interpreter 0x68ae00 pid: 170 (default app)

==> /var/log/nginx/salesinfo-default-www-0.access.log <==
*** (::ffff:****) - - [19/Oct/2012:06:56:11 +0000] "GET / HTTP/1.1" 499 0 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0" 
```

我唯一注意到的是“没有加载应用程序。进入完全动态模式”但这对我来说没有意义也许你可以帮忙

谢谢

```
import sys, os, platform 
import atexit
import cherrypy
import cherrys
from controllers import Root

cherrypy.config.update({'environment': 'embedded',
                            'tools.sessions.on': True,
                            'tools.sessions.storage_type': "file",
                            'tools.sessions.storage_path': "./sessions"
                            })

application = cherrypy.Application(Root(), script_name=None, config=None) 
```

还有 requirements.txt 看起来像

```
CherryPy==3.2.2
cherrys
jinja2 
```

# php - Yii 引导扩展。分页

> ID：12968976
> 
> 赞同：0
> 
> 时间：2012-10-19T07:00:00.650
> 
> 标签：php, twitter-bootstrap, yii

如何配置我的小部件，他显示屏幕上显示的结果数量？例如在标准 CGridview 分页中（显示 1 - 10 of 4087 for *****）

```
 <?php $this->widget('common.ext.bootstrap.widgets.TbGridView', array(
    'id'=>'search-by-name-grid',
    'type' => 'striped',
    'dataProvider'=>$dataProvider,
    'template'=>'{items}{pager}',
    'enablePagination' => true,
    'columns'=>array( 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T07:54:58.543

您必须`{summary}`在`template`属性中指定

```
<?php $this->widget('common.ext.bootstrap.widgets.TbGridView', array(
    'id'=>'search-by-name-grid',
    'type' => 'striped',
    'dataProvider'=>$dataProvider,
    'template'=>'{summary}{items}{pager}',
    'enablePagination' => true,
    'columns'=>array( 
```

**用于配置摘要文本的格式**

`TbGridView`由 扩展而来[`CGridView`](http://www.yiiframework.com/doc/api/1.1/CGridView)。所以你可以使用的[`summaryText`](http://www.yiiframework.com/doc/api/1.1/CBaseListView#summaryText-detail)属性`CGridView`

```
<?php $this->widget('common.ext.bootstrap.widgets.TbGridView', array(
    'id'=>'search-by-name-grid',
    'type' => 'striped',
    'dataProvider'=>$dataProvider,
    'template'=>'{summary}{items}{pager}',
    'enablePagination' => true,
    'summaryText'=>'Displaying {start}-{end} of {count} results.' 
```

根据文档，您可以在“summaryText”中使用以下标记

> ```
> {start}: the starting row number (1-based) currently being displayed
> {end}: the ending row number (1-based) currently being displayed
> {count}: the total number of rows
> {page}: the page number (1-based) current being displayed, available since version 1.1.3
> {pages}: the total number of pages, available since version 1.1.3 
> ```

# iphone - 将 JSON 转换为 NSDictionary 或 NSArray - iOS

> ID：12968983
> 
> 赞同：0
> 
> 时间：2012-10-19T07:00:26.817
> 
> 标签：iphone, objective-c, ios, ios5, ios6

我有这段代码：

```
[self.vManager playersNearLocation:userLocation
                             block:^(NSSet *players, NSError *error)
    {
        if(players && [players count])
        {
            NSLog(@"Success in getting players");
            /* TO DO
              Convert JSON to Objective C object here
            */   
        }else{
            NSLog(@"Failed to get players");
        }
    }]; 
```

我从服务器接收 JSON，如何将其转换为 Dictionary 或数组对象。我不想使用任何外部库，有本地方式吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:32:02.817

尝试`NSJSONSerialization`和方法

```
+ (id)JSONObjectWithData:(NSData *)data options:(NSJSONReadingOptions)opt error:(NSError **)error 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:16:14.677

如果你有 SBJSON 库，它很容易解析 json：[SBJSON](http://stig.github.com/json-framework/)

将此库包含在您的项目中 .Import json.h ，您可以按如下方式解析 json

```
 SBJSON *parser=[[SBJSON alloc]init];

NSDictionary * dictionary = [parser objectWithString:responseString]; 
```

# shopify - 为禁用了“需要送货地址”选项的产品提供 tracking_url

> ID：12968987
> 
> 赞同：0
> 
> 时间：2012-10-19T07:00:49.803
> 
> 标签：shopify

我想将产品/变体设置为不需要送货地址，并且我想使用送货通知电子邮件通知用户并向他们发送他们的下载网址（因为产品是数字分发的）。

现在看起来我无法为禁用“需要送货地址”的变体指定 tracking_url。这是预期的行为还是有其他方法？

这是我现在拥有的代码：

```
f = ShopifyAPI::Fulfillment.new
f.prefix_options[:order_id] = <shopify order id>
f.tracking_number = <some number>
f.tracking_url = <url>
f.notify_customer = true
f.line_items = ids
f.save 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:34:49.903

这是预期的行为。

# java - 检查一个值是否是许多常量之一

> ID：12968989
> 
> 赞同：2
> 
> 时间：2012-10-19T07:00:56.317
> 
> 标签：java

在 Python 中，您可以：

```
if error_code in (1213,1205,1317,2006,2013):
    ... 
```

如何在 Java 中简洁地进行相同类型的检查——查看 int 是否是众多选择之一？

更新：我采用的解决方案：

```
private static final Set<Integer> MySQLRetryCodes = 
    Collections.unmodifiableSet(new HashSet<Integer>(
         Arrays.asList(
            1205, // lock timeout
            1213, // deadlock
            1317,2006,2013 // variations on losing connection to server
         ))); 
```

然后：

```
if(MySQLRetryCodes.contains(sqlError.getErrorCode()) {
    ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:03:59.700

常量将在一个列表中，您将使用`contains()`如下方法：

```
if (Arrays.asList(1213,1205,1317,2006,2013).contains(error_code)) {
    ...
} 
```

最好的方法是在某处将该列表声明为常量并使用它，如下所示：

```
public static final List<Integer> ERROR_CODES = 
    Arrays.asList(1213,1205,1317,2006,2013);

...
if (ERROR_CODES.contains(error_code)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:11:48.267

我会使用 HashSet ：

```
 if (new HashSet<Integer>
          (Arrays.asList(1213,1205,1317,2006,2013)).contains(error_code)){

       //do something

   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T07:16:14.443

编写`ArrayList`错误代码确实是`bad design`。`And populate it just to check whether error code is present is nightmare.`

[您应该考虑用Enums](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)替换您的整数。

您可以将错误代码定义为枚举，每个常量将保存错误代码的 int 常量值。

```
enum ErrorCode {
    ERROR_213(213), ERROR_1205(1205), ERROR_1317(1317), ERROR_2006(2006), ERROR_DEFAULT(
            1);

    private int errorcode;

    private ErrorCode(int errorcode) {
        this.errorcode = errorcode;
    }

    public static ErrorCode valueOf(int errorcode) {

        for (ErrorCode error : ErrorCode.values()) {
            if (error.getErrorCode() == errorcode)
                return error;
        }
        return ErrorCode.ERROR_DEFAULT;
    }

    public int getErrorCode() {
        return errorcode;
    }
} 
```

现在，如果您想随时将`int`价值转换为，`enum`那么您可以执行以下操作

```
ErrorCode errorcode = ErrorCode.valueOf(213); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T07:03:54.087

将它们添加到`ArrayList`并使用该`contains`方法。

```
ArrayList<Integer> errorList = new ArrayList<Integer>();
        errorList.add(1213);
        errorList.add(1205);
        errorList.add(1317);
    if(errorList.contains(error_code)))
       {
         //code
       } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-27T15:17:32.813

我现在有一个类似的问题，阅读这个问题的答案后，我在 Java 中遇到了下一个解决方案 9 次：

```
private static int CODE_IMAGE = 0;
private static int CODE_FILE  = 5;
private static final Set<Integer> CurrentCloudItemTypes = Set.of(CODE_IMAGE, CODE_FILE); 
```

然后：

```
 protected boolean hasCorrectType(CloudImage image) {
    return CurrentCloudItemTypes.contains(image.getType());
  } 
```

谢谢你的想法，它们对我很有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-03T23:34:57.037

只需使用以下的返回值：

```
Arrays.asList(1213, 1205, 1317, 2006, 2013).contains(error_code) 
```

或者如果你有[Apache Commons Lang 库](https://commons.apache.org/proper/commons-lang/)，你最好使用它的返回值：

```
ArrayUtils.contains(USE_CASE_1, error_code) 
```

其中`USE_CASE_1`被定义为常量数组：

```
private static final int[] USE_CASE_1 = {1213, 1205, 1317, 2006, 2013}; 
```

这是与上面的 Python 代码最简单且非常有效的等价物，您可以在其中对**一小组**指定值的变量**进行非频繁检查。**你真的不需要在每次想要做这个检查时都创建一个新的 Set，因为它是一种低效的资源浪费。**只有当它是一个静态的 final 字段（即常量）并且只有在非常频繁的检查**的情况下，制作一小组检查值才有意义。`error_code`

 ****另一种解决方案是使用这样的 switch 语句：

```
switch (error_code) {
    case 1213:
    case 1205:
    case 1317:
    case 2006:
    case 2013: {
        // do something
    }
} 
```

它并不优雅，但即使对于对**一小组**指定值的**非常频繁的检查**，它也是最有效的。在这种情况下，它甚至比常量 Set 更有效。****

# php - 如何在屏幕上打印数据库数据时删除空格 - PHP

> ID：12968993
> 
> 赞同：-1
> 
> 时间：2012-10-19T07:01:11.813
> 
> 标签：php

嗨，我有以下代码。当数据显示在屏幕上时，也会打印空白区域。如何在显示记录时调整/更改我的代码以消除空格。谢谢。

```
 <?php

$con=mysql_connect('localhost','root') or die ("Server connection failure!");
$db=mysql_select_db('regional_data',$con) or die ("Couldn't connect the database");
$SQLa="SELECT * FROM newchk WHERE dist_chk='$distUsr'";
$runa=mysql_query($SQLa,$con) or die ("SQL Error");
$nora=mysql_num_rows($runa);

echo "<table cellpadding='2' class='tablet' cellspacing='0'>";
echo 
"<tr>"
."<th>"."Starting Cheque No"."</th>"
."<th>"."Ending Cheque No"."</th>"
."<th>"."Total No of Cheques"."</th>"
."</tr>";

    while ($reca = mysql_fetch_array($runa))
    {

        echo "<tr>";
        echo "<td>".$reca["sbstart"]."</td>";
        echo "<td>".$reca["sbend"]."</td>";
        echo "<td>".$reca["totsb"]."</td>";
        echo "</tr>";
    }
echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:10:56.940

我没有正确理解您想说什么，但是如果您不想打印空白记录，请使用此 **使用条件之一要么第一要么第二**

```
     而 ($reca = mysql_fetch_array($runa))
        {
            if($reca["sbstart"] || $reca["sbstart"] || $reca["sbstart"]){ //如果任意一条记录为空
            回声“”；
            echo "".$reca["sbstart"]."";
            echo "".$reca["sbend"]."";
            echo "".$reca["totsb"]."";
            回声“”；
            }
           if($reca["sbstart"] && $reca["sbstart"] && $reca["sbstart"]){ //如果记录中的所有行都是空的
            回声“”；
            echo "".$reca["sbstart"]."";
            echo "".$reca["sbend"]."";
            echo "".$reca["totsb"]."";
            回声“”；
            }
        }

```

或者，如果您想修剪空格，请使用它

```
     而 ($reca = mysql_fetch_array($runa))
        {

            回声“”；
            echo "".trim($reca["sbstart"])."";
            echo "".trim($reca["sbend"])."";
            echo "".trim($reca["totsb"])."";
            回声“”；
        }

```

**我建议您使用 mysqli_* 或 pdo 而不是 mysql_* 因为它已被弃用**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:03:13.357

```
 while ($reca = mysql_fetch_array($runa))
    {

        echo "<tr>";
        echo "<td>".trim($reca["sbstart"])."</td>";
        echo "<td>".trim($reca["sbend"])."</td>";
        echo "<td>".trim($reca["totsb"])."</td>";
        echo "</tr>";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:07:38.970

只需使用以下功能，

```
function fetch_value($string) 
{    
        $string = trim($string);
        $string = mysql_real_escape_string($string);
        $string = stripslashes($string);
        return $string;
} 
```

这将帮助我们删除空格以及帮助您停止 sql 注入。

# java - 如何重新加载框架和会话值没有被删除

> ID：12968995
> 
> 赞同：0
> 
> 时间：2012-10-19T07:01:20.340
> 
> 标签：java, frameset, httpsession

我正在使用不在框架中的登录页面，但是一旦我登录，所有页面都在框架中，当我尝试注销时，`(the logout link is there in the frame)`仅重新加载特定框架并且登录页面进入该框架。但我希望登录页面显示在不应该显示页面的地方。

我删除了这样的会话值，但是当我刷新页面时，所有的值都存在于框架中的页面中。

```
public void sessionRemove(HttpServletRequest request,HttpServletResponse response){
        request.getSession(true).removeAttribute("userDetails");

        /**
         * Remove the Session Object.
         */
        Enumeration enumSessionObj = request.getSession(false).getAttributeNames();
        while(enumSessionObj.hasMoreElements()){
            String enumObj = enumSessionObj.nextElement().toString();
            request.getSession(false).removeAttribute(enumObj);
        }

        /**
         * Remove the Cookies.
         */
        Cookie[] cookies = request.getCookies();
        for (int i = 0; i < cookies.length; i++) {
            Cookie delCookie = cookies[i];
            delCookie.setMaxAge(0);
        }
    } 
```

这该怎么做 ，

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:07:03.183

可以试试吗：

```
 request.getSession().invalidate(); 
```

你能在其中一帧中打印时间吗？我认为您的问题可能与缓存有关。

如果您的会话无效，您可以做很多事情。前任。将用户转发到另一个页面。或者像这样用javascript刷新你的框架。

```
 window.parent.MY_FRAME_NAME.location.reload(); 
```

祝你好运;