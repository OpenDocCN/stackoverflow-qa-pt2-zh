# StackOverflow 问答 14700000-14700999

# ajax - 启用视图自定义模块会导致 Drupal 7 上的 Ajax HTTP 错误

> ID：14700000
> 
> 赞同：0
> 
> 时间：2013-02-05T04:02:43.900
> 
> 标签：ajax, drupal, drupal-7, views

我正在开发一个自定义模块，它将向 Views 模块描述一个外部表。在我的模块文件夹中，我有所需的 mymodule.views.inc 文件。然而，每当这个文件存在并且我的自定义模块被启用时，当我使用具有 Ajax 的站点功能时，Drupal 会不断地弹出 Ajax HTTP 错误（任何旋转的雏菊都会触发这个）。在显示 Ajax 错误之后，弹出窗口始终包含 mymodule.views.inc 中的模块代码。奇怪的是每次我加载首页时，mymodule.views.inc 中的 PHP 代码总是显示在首页的顶部。

我在 SO 和其他网站上经常看到这个问题，但大多数时候它可以追溯到更新的 jquery.js 文件或 php.ini 设置，这将使脚本有更多时间运行。到目前为止，这些修复都没有奏效。我现在可以让它消失的唯一方法是禁用我的自定义模块，或者将 mymodule.views.inc 重命名为其他名称。

这是消息外观的示例（不是逐字复制，因为我无法从 Chrome 中的这些警报消息中复制）。

```
An AJAX HTTP error occurred.
HTTP Result Code: 200
Debugging information follows.
Path: /?q=admin/structure/views/view/viewiamtryingtocreate/preview/page/ajax
StatusText: parseerror
ResponseText: /*
* header file to my mymodule.views.inc
* file I wrote
*/

//more php code follows

//lots of unicode characters intermittently show up in my source code
\u003C\/div\u003E\n...

//source code continues with lots of unicode characters, not sure what's at the bottom because the alert box is bigger than my screen and I can't scroll on it 
```

还有人知道会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:19:41.413

这个错误是由 drupalforfirebug 引起的，禁用 drupal for firebug 应该会有所帮助。否则这个[补丁](http://drupal.org/files/issues/updating_detection_of_headers_for_d7.patch)应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:41:28.127

找到了。语法错误隐藏在 mymodule.views.inc 的顶部。在开始 PHP 标记之前有一些奇怪的格式。不知道为什么 php --syntax-check mymodule.php 没有捕捉到它（我将 mymodule.views.inc 复制到 mymodule.php 以便我可以在其上运行语法检查器）。

# android - 在 Android 框架中使用 Power Mock 进行单元测试

> ID：14700006
> 
> 赞同：3
> 
> 时间：2013-02-05T04:04:05.150
> 
> 标签：android, mocking, powermock

我一直在尝试使用 PowerMock 和 Mockito 在 Android 中进行单元测试。我通过 Mockito 成功地模拟了，但是由于 Mockito 不能模拟静态方法和最终类，所以我需要将 PowerMock 与 Mockito 一起包括在内。

但是每当我使用这条线时

```
Example ma=PowerMockito.mock(Example.class); 
```

它给出了例外：

```
 java.lang.ExceptionInInitializerError
at org.mockito.internal.creation.jmock.ClassImposterizer.createProxyCla(ClassImposterizer.java:85)
at org.mockito.internal.creation.jmock.ClassImposterizer.imposterise(ClassImposterizer.java:62)
at org.powermock.api.mockito.internal.mockcreation.MockCreator.createMethodInvocationControl(MockCreator.java:110) 
```

我究竟做错了什么。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T21:12:48.750

您是否将 @PrepareForTest(Example.class) 注释添加到测试类的顶部？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:32:11.043

这篇博文表明，您不能仅仅将 mockito 包含到 android 测试项目中。 [http://www.paulbutcher.com/2012/05/mockito-on-android-step-by-step/](http://www.paulbutcher.com/2012/05/mockito-on-android-step-by-step/)

如果你必须使用模拟框架，要么按照其中的步骤操作，要么使用类似 robolectric 框架的东西。

# ruby-on-rails - Rail 的 before_filter 的参数可以是另一个类中的方法吗？

> ID：14700013
> 
> 赞同：0
> 
> 时间：2013-02-05T04:04:37.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3

例如在

```
class C
  before_filter X
  ...
end 
```

可以以某种方式将 X 指定为另一个（非超）类中的方法吗？

我想知道这是否可以通过将参数更改为 before_filter 来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:16:04.050

我不确定你为什么要在前置过滤器中调用一个类本身，而不是你可以这样做

```
class C
  before_filter :load_other_class_method
  ...

  load_other_class_method
    X.new_your_method #or loading your class
  end   

end 
```

# box-api - 返回 BOX Enterprise Account 中所有用户的列表

> ID：14700014
> 
> 赞同：2
> 
> 时间：2013-02-05T04:04:41.733
> 
> 标签：box-api

我想导出我们企业帐户中所有用户的列表。但是，我的共同管理员凭据似乎无法执行 BOX.com API 2.0 文档中列出的示例请求：

curl [https://api.box.com/2.0/users](https://api.box.com/2.0/users) -H "授权：Bearer ACCESS_TOKEN"

文档表明，如果由非管理员执行，这应该返回当前用户的信息。但是，就我而言，我收到了 403 Forbidden 错误。我错过了什么或执行错了吗？此 API 命令是否需要主要的企业管理员凭据？如果我使用 URL“ [https://api.box.com/2.0/users/me](https://api.box.com/2.0/users/me) ”执行，它会成功返回我的帐户信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:46:37.657

以管理员或共同管理员身份登录时，您应该能够执行此操作。这似乎是我们这边的一个错误。我们正在尝试尽快修复它——修复后我会在这里更新。

# java - 如何将 Java ENUM 与接口一起使用？

> ID：14700018
> 
> 赞同：1
> 
> 时间：2013-02-05T04:05:11.843
> 
> 标签：java, enums

我想在 Java 中使用 Enum 来存储不同环境的配置值。每个 Enum 将具有相同的字段，但值不同。就像是：

```
public enum DevelopmentConfig
{
   URL("..."),
   defaultURL(".....");
}

public enum ProductionConfig
{
   URL("..."),
   defaultURL(".....");
} 
```

这是针对 Web 应用程序的，所以我不能简单地使用`Preferences`或任何其他解决方案。

我的问题是，有没有办法创建一个接口来定义配置的字段？或者我应该使用普通`class`而不是`enum`存储这些值？

编辑：要使用它，我只想从我的其他课程中做到这一点：

```
String url = Config.URL 
```

或者

```
String url = Config.getURL(); 
```

不知道这是否指的是`Config.Development`或`Config.Production`（我希望在 Config 枚举的构造函数本身中确定它并让它选择正确的字段集）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T04:07:09.497

你在滥用枚举。

每个枚举成员都可以实现为覆盖事物的匿名类：

```
public enum Config {
    DEVELOPMENT {
        @Override
        ...
    },
    PRODUCTION {
        @Override 
        ...
    };

    public abstract ...;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T04:25:35.683

您还可以通过以下方式使用枚举。有了这个，您可以为每个配置存储（和检索）不同的值

```
 public enum Config{
        DEVELOPMENT("DEV_URL", "DEV_DEFAULT_URL"), 
        PRODUCTION("PROD_URL", "PROD_DEFAULT_URL");

    private String url;

    private String defaultURL;

    Config( String url, String defaultURL )
    {
        setUrl(url);
        setDefaultURL(defaultURL);
    }

    public String getUrl()
    {
        return url;
    }

    public String getDefaultURL()
    {
        return defaultURL;
    }

    public void setDefaultURL( String defaultURL )
    {
        this.defaultURL = defaultURL;
    }

    public void setUrl( String url )
    {
        this.url = url;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T04:16:34.567

枚举的每个成员都是枚举类的一个实例。这意味着您可以定义方法、变量和实现接口：

```
public interface Config {
    String getKey();
}

public enum DevelopmentConfig implements Config
{
    URL("url"),
    DEFAULT_URL("defaulturl");

    private String key;

    private DevelopmentConfig(String key){
        this.key = key;
    }

    public String getKey(){
        return this.key;
    }
} 
```

如果您希望使用枚举来查找值，我建议将它们用作 Map 中的键，而不是根据需要实现不同的类型。

**编辑**

您可以通过从应用程序运行环境（dev / prod / etc）中的某个位置读取 .property 文件来完成此操作，然后使用枚举键入属性文件：

```
//This has reads in a property file:
PropertyManager propertyManager = new PropertyManager(/*prop file location*/);

String url = propertyManager.getConfig(DevelopmentConfig.URL); 
```

PropertyManager 的 API 如下所示：

```
PropertyManager {
    String getConfig(Config config);
} 
```

# javascript - onclick 是否为空？

> ID：14700030
> 
> 赞同：2
> 
> 时间：2013-02-05T04:06:57.313
> 
> 标签：javascript, html

我不知道我的代码是否有效，因为我无法通过 onlclick 为空。我正在尝试从 textarea 中获取文本并将其放入 HTML 的段落中。带有复选框。如果选中该框，则它将清除`<p>`标签。如果未选中，它将把这些东西留在 p-tag 中，然后制作一个新的 p-tag。多谢你们

```
window.onload = function()  { 
document.getElementById("paste").onclick = function() {

//var y = document.getElementById('paste').onclick
var paragraph = document.getElementById('box').value;
var x = document.getElementById("write");
var getInfo = document.getElementById('ParaWrite');

 if (x.checked === true)
     paragraph =+ "<p>"+paragraph+"</P>";
 else
 return;
getInfo.innterHTML === paragraph;

  }    
}

HTML 
<!doctype html>
<html>
<head>
<meta charset="utf-8">

<title>TeXt BoX</title>

<link rel="stylesheet" href="../css/normalize.css">
<link rel="stylesheet" href="Textbox.css">

</head>

<body>
<h1></h1>
<form name="form1" id="form1">

<input type='checkbox' name='write' id='write' value='Check' />

<label for='write'>Append Paragraph</label><br/>

<textarea type="text" id="box"/></textarea>

<input  type='button' value="Paste typed text" id="Paste"/>

</form>
<p id="ParaWrite"></p>

<script type="text/javascript" src="TextPara.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T04:16:40.583

id 名称区分大小写。将您的 onclick 分配调用更改为

```
document.getElementById("Paste").onclick = 
```

更改`paste`为`Paste`

也不`=+`正确的一个是`+=`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:15:17.647

您的选择器正在寻找一个 id `paste`，但您的元素有一个 id `Paste`：

`var thisWillBeNull = getElementById('paste') ==> null`

`thisWillBeNull.onclick ==> TypeError: Cannot read property 'onclick' of null`

# sitecore - Sitecore 映射 img 与页面

> ID：14700031
> 
> 赞同：1
> 
> 时间：2013-02-05T04:07:01.100
> 
> 标签：sitecore, sitecore6, sitecore-media-library

我有一个 img 和一些 img 的详细信息，例如标题描述等。我有一个页面将显示该 img 的所有信息。除此之外，我还有一个只显示标题和 IMG 的组件。

当用户点击组件中的 img 时，它会重定向到显示该 img 的所有信息的页面。

我想到的是直接映射。但是传递一些参数很好，因为我会有大量的图像，但我不确定我应该传递什么样的参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T04:03:50.280

我认为最好的办法是真正询问具有链接的组件是如何创建的。它可能是一个中继器......甚至是一个独立的子布局或渲染或其他任何东西。无论您怎么看，您都在使用 Item 作为数据源并仅显示数据源中的字段（即显示有关图像的所有数据的项目，如果您可以是 Sitecore 项目甚至是媒体库项目'只是显示默认库字段数据）。只要您的组件具有作为项目的数据源，您就不需要传递任何参数并且可以数据绑定到数据源并使用类似的东西链接到原始项目

```
LinkManager.GetItemUrl(DataSource); 
```

# php - jquery $.post 将带有 php 标头的数据发布到下一页

> ID：14700033
> 
> 赞同：0
> 
> 时间：2013-02-05T04:07:06.850
> 
> 标签：php, jquery

我在使用 Jquery $.post 来检查数据而不刷新页面并在页面 div 上打印出任何错误时遇到问题

我不能标头（位置）；如果所有数据都正确，则转到下一页。

```
 <script type="text/javascript">
        function get(){
            $('#error').hide();

            $.post('./parts/signup_data.php', 
                        {firstname:signup.firstname.value, lastname:signup.lastname.value, 
                        email:signup.email.value, re_email:signup.re_email.value, 
                        password:signup.password.value, re_password:signup.re_password.value,
                        age:signup.age.value, 
                        gender:$('input:radio[name=gender]:checked').val(),
                        },      
                        function(output){$('#error').html(output).fadeIn(50);}
                  )             
        }      
    </script> 
```

页面将在不刷新的情况下检查所有数据并在 div 标签上打印错误

如果所有数据都正确。它将数据插入数据库

```
mysql_query("INSERT INTO temp_user (email, password, firstname, lastname, age, gender, date, confirm_code)VALUES ('$email','$password','$firstname', '$lastname', '$age', '$gender', '$date', '$confirm_code')");

header('Location:confirm.php'); 
```

问题是页面没有转到下一页。它在 div 标签中打印出所有页面的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:08:28.370

您需要将某些内容（例如，JSON 对象）发送回 Javascript 代码，告诉它要转到哪个页面。

然后，成功回调中的 Javascript 代码将检查来自服务器的结果，以查看它是 URL 还是错误消息，并根据需要设置`location.href`或显示消息。

# python - Celery Worker ImportError：没有名为 app-core 的模块

> ID：14700037
> 
> 赞同：0
> 
> 时间：2013-02-05T04:07:21.790
> 
> 标签：python, celery

从 app/app-core，我正在尝试使用以下命令启动 celery worker：

```
celery worker --app=app-core -l info 
```

但是，我收到错误：

```
ImportError: No module named act-core 
```

我正在关注本[教程](http://docs.celeryproject.org/en/latest/getting-started/next-steps.html#next-steps)，并尝试将项目完全复制到名为 proj 的单独文件夹中。第一次用芹菜。. 我错过了什么？

另外，这是我的 celery.py 文件：

```
from __future__ import absolute_import

from celery import Celery

celery = Celery('proj.celery',
                broker='amqp://',
                backend='amqp://',
                include=['proj.tasks'])

# Optional configuration, see the application user guide.
celery.conf.update(
    CELERY_TASK_RESULT_EXPIRES=3600,
)

if __name__ == '__main__':
    celery.start() 
```

# jquery-mobile - 在 $.mobile.changePage() 上出现错误：未捕获的 TypeError：无法调用未定义的方法“触发器”

> ID：14700040
> 
> 赞同：1
> 
> 时间：2013-02-05T04:07:51.263
> 
> 标签：jquery-mobile, backbone.js, router

我有一个 JQM 应用程序，并且正在合并 Backbone。由于我最初的 javascript 代码很大，我只提取我认为有问题的内容。我正在遵循此处引用的建议和呼叫步骤：

*   jqm-config.js 来自[http://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/](http://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/)
*   [http://jquerymobile.com/test/docs/pages/backbone-require.html](http://jquerymobile.com/test/docs/pages/backbone-require.html)

我有一个大问题，这就是行为，问题来自这段代码：

```
 var r = Backbone.Router.extend
 router: ...    
    "page": "pageDisplay"
 ...
 pageDisplay: function(){
    c = new AView();      // Backbone.View    ...fetch() data...   
    $(c.el).page();       // Call to JQM to add its extra stuff; seems done correctly
    $.mobile.changePage( "#" + c.id, {changeHash: false});       // line 50
 } 
```

跟随 的链接时`<a href="#page" >`，我按预期来到正确处理的页面“#page”。但是一旦在那里，如果我单击 a `refresh`，它被相同的路由器规则间接重新处理，我最终会出现以下错误：

> 未捕获的类型错误：无法调用未定义的方法“触发器”

我下载了 jquery 移动开发代码并观察到：

> // JQM1.1.2 - 第 #3772 行在页面容器中显示特定页面。
> 
> ```
>  $.mobile.changePage = function( toPage, options ) {
> 
>   if ( isPageTransitioning ) { 
>      pageTransitionQueue.unshift(arguments );
>      return;      
>   }
>   var settings = $.extend( {}, $.mobile.changePage.defaults, options);
> 
>   // Make sure we have a pageContainer to work with.      
>   settings.pageContainer = settings.pageContainer || $.mobile.pageContainer;
>   // Make sure we have a fromPage.        
>   settings.fromPage = settings.fromPage || $.mobile.activePage;
>                                               // Line #3788   
>   var mpc = settings.pageContainer,      // Line #3789        
>       pbcEvent = new $.Event("pagebeforechange" ),
>       triggerData = { toPage: toPage, options: settings };
>   // Let listeners know we're about to change the current page.
>   mpc.trigger( pbcEvent, triggerData );      // Line #3794 
> ```

`Uncaught TypeError`是由第 #3794 行引起的，因为`mpc`是`undefined`. 所以，从 JQM，在 Chrome 检查器中，我也可以看到`settings.fromPage`is`undefined`和`settings.pageContainer`is `undefined`。我有点想象，JQM 无法对 fromPage 做出假设，因此无法继续我的刷新。我在 $mobile.changePage() 上尝试过的所有选项都没有成功。我没主意了。

**更新**/重现问题最少的在线网站：partindex，[访问有错误的网站](http://www.apartindex.com)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:28:44.333

调用路由代码的`dextoInit`函数在调用中`$(document).ready()`并不能保证 jQuery 移动页面实际上已经设置成功。但是路由器代码调用`$.mobile.changePage`取决于 jQuery Mobile 被初始化。

放入`mobileinit`或`pageinit`应该工作。

（不幸的是我无法修改代码并轻松测试。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:14:10.263

尽管暂时修复了它，但它确实有缺点。见下文。

```
$(document).bind("pageinit", function(){
   console.log('bindtomobileinit: event pageinit received');
   if ( !window.AppNode.router ){
      window.AppNode.router = new AppNode.singletons.router();
      console.log("mobileRouter.js: Starting b history");
      console.log('mobileRouter.js: About to launch Backbone history');
      Backbone.history.start();  
   }

}); 
```

注册到**`pageinit`**有被**解雇两次**的奇怪效果。我看到 2 个节点已添加到 Dom：默认的“加载” `jquery mobile div`（与 pageinit:1 相关）和我的`data-role page`(pageinit:2)。因此，在**“刷新浏览器单击”**时，我的情况让我等待第一次`pageinit`，创建一个意外的 jquery 移动 dom 元素（创建的默认页面以显示等待的 JQM 圆形动画），触发路由器创建，并允许 Backbone。历史调用，然后处理我的“”主页。第二个`pageinit`不会干扰设置，因为我只执行一次。

我对这个设置真的很失望。我现在将留下这个问题，因为它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:56:04.020

我发现问题的根源是 jquery-mobile 版本 1.3.0。当我回退到 JSM 1.2.0 或 1.2.1 时，“Uncaught TypeError: Cannot call method 'trigger' of undefined”问题就消失了。

顺便说一句，我没有使用 Backbone。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-10T13:43:19.343

我已经通过使用方法 append() 解决了这个问题，但不是 html()

```
$('body').append(view.render().$el); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-24T03:02:34.803

我能够通过将页面数据属性从“data-role”更改为“data-mobile-page”来解决这个问题，正如 jqm 1.3.2 第 4042 行中引用的那样

```
fromPage.data( "mobile-page" )._trigger( "beforehide", null, { nextPage: toPage } ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-29T12:27:12.417

环境

```
$.mobile.autoInitializePage = true; 
```

在您的 jquery 移动配置文件中，某些地方如：

```
$(document).on("mobileinit", function () {...}); 
```

可能会有所帮助。

# android - android - 无法删除数据库中的记录

> ID：14700042
> 
> 赞同：-1
> 
> 时间：2013-02-05T04:08:12.363
> 
> 标签：android, sqlite

我有一个函数应该删除我的 sqlite 数据库中的一条记录。但它没有删除，可能有什么问题？

```
public boolean deleteLoc(String id) {
    boolean deleteSuccessful = false;

    try {

        SQLiteDatabase db = this.getWritableDatabase();
        deleteSuccessful = db.delete(TABLE_NAME, "id =" + id, null) > 0;

    } catch (NullPointerException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return deleteSuccessful;

} 
```

它总是返回假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:18:23.367

如果`id`是类型`string`那么，你应该使用：

```
deleteSuccessful = db.delete(TABLE_NAME, "id ='" + id + "'", null) > 0; 
```

**编辑：**

如果`id`是类型`Numeric`，则应将其转换为`long`：

```
long longId = Long.parseLong(id);
deleteSuccessful = db.delete(TABLE_NAME, "id =" + longId, null) > 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:21:49.823

试试这个：

```
deleteSuccessful = db.delete(TABLE_NAME, "id ='" + id + "'", null) > 0; 
```

否则表中没有相应的记录......你检查过你的表是否有你要删除的条目吗？

# javascript - 有人给我解释一下{{> player}}

> ID：14700043
> 
> 赞同：3
> 
> 时间：2013-02-05T04:08:16.257
> 
> 标签：javascript, meteor, handlebars.js

研究流星的例子，主要是掌握一切。我对车把也很陌生，只是想把头绕在东西上。在流星的排行榜示例中。这部分代码发生了什么：

> ```
> <div class="leaderboard">
>    {{#each players}}
>     {{> player}}
>    {{/each}}
> </div> 
> ```

更具体地说，我对 {{>player}} 感到困惑。为什么我不能只做{{player}}？{{>player}} 在做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T04:13:03.383

`{{> player }}`调用[部分](https://github.com/wycats/handlebars.js/#partials)命名的`player`. 如本[网站所述](http://blog.teamtreehouse.com/handlebars-js-part-2-partials-and-helpers)

> 当您需要在几个不同的上下文中使用大量 Handlebars.js 模板时，部分会派上用场。

While`{{player}}`是您将传递给要呈现的模板的值的占位符。

我在 jsfiddle 中创建了一个[示例代码。](http://jsfiddle.net/OnesimusUnbound/BDMCw/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:21:46.460

{{> player}} 代码调用嵌套模板。您可以访问由#each 迭代生成的玩家值。保持代码井井有条很有用。

# php - PHP获取方法范围之外的变量

> ID：14700046
> 
> 赞同：0
> 
> 时间：2013-02-05T04:08:26.033
> 
> 标签：php, scope, anonymous-function

我有这个类（例如简单的一个）：

```
<?
class Test {
  public function test1($a) {
    $gen = function() {
      $gen = function() {
        global $a; // no effect
        echo 'a='. $a; // how could i access $a from test1 parameter without passing?
      };
      $gen();
    };
    $gen();
  } 
};

$x = new Test();
$x->test1(123); 
```

有没有办法从最后一个 $gen 函数中的 test1 参数访问 $a 而无需将其传递给 $gen() 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:13:43.137

你错过了`use`陈述。请参阅 PHP 的闭包[文档中的第三个示例。](http://www.php.net/manual/en/functions.anonymous.php)

这将起作用：

```
<?php

class Test {
  public function test1($a) {
    $gen = function() use ($a) {
      $gen = function() use($a) {
        echo 'a='. $a; // how could i access $a from test1 parameter without passing?
      };
      $gen();
    };
    $gen();
  } 
};

$x = new Test();
$x->test1(123); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T04:14:18.363

PHP 中的匿名函数不像 JavaScript 那样具有隐式变量作用域，因此您需要指定需要父作用域中的哪些变量。您可以使用以下`use`语法执行此操作：

```
$var = 123;
$fn = function() use ($var) {
    // you can use $var here
}
$fn(); 
```

参见：[闭包和作用域](http://php.net/manual/en/functions.anonymous.php#example-165)

# .net - .NET 框架 4.5 向下兼容性

> ID：14700048
> 
> 赞同：0
> 
> 时间：2013-02-05T04:08:35.560
> 
> 标签：.net, .net-4.5

使用 .NET 框架 4.5 构建的 Windows 应用程序可以在使用 .NET 框架 4 的机器上运行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T04:10:17.490

如果您不利用特定于 .NET 4.5 的任何内容，并且如果应用程序的 .config 文件不需要[.NET 4.5 作为运行时，它](http://msdn.microsoft.com/en-us/library/f4kkd0k5.aspx)可以。

# vba - 从 powerpoint 2010 VBA 中的文本中删除阴影效果

> ID：14700051
> 
> 赞同：2
> 
> 时间：2013-02-05T04:08:47.257
> 
> 标签：vba, powerpoint

我正在尝试通过宏从演示文稿的任何幻灯片中的所有文本框中删除所有阴影效果。下面的宏在 powerpoint 2007 中运行良好，但在 2010 中无法运行。

```
Sub NoTextShadows()

    Dim oSld As Slide
    Dim oShp As Shape

    For Each oSld In ActivePresentation.Slides
        For Each oShp In oSld.Shapes
            If oShp.HasTextFrame Then
                If oShp.TextFrame.HasText Then
                    oShp.TextFrame.TextRange.Font.Shadow = msoFalse
                    oShp.Shadow.Visible = msoFalse
                End If
            End If
        Next oShp
    Next oSld

End Sub 
```

请提出解决此问题的任何想法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:37:26.050

我进行了一些测试，发现 PowerPoint 2010 中的阴影可以出现在文本（特定）和一般形状中。奇怪的是，两个阴影可以独立应用到形状上，但宏只能删除其中一个。这是我为移除一层阴影所做的操作：

```
oShp.Shadow.Size = 0
OShp.Shadow.Blur = 0
oShp.Shadow.Visible = msoFalse 
```

尝试在主 For 循环中添加这些行并查看

有关详细信息，[在 Office 2010 中使用 ShadowFormat 类的属性](http://msdn.microsoft.com/en-us/library/office/hh273478%28v=office.14%29.aspx)

# c# - 如何在 C# 代码中使用 w32tm 重新同步时间？

> ID：14700055
> 
> 赞同：-1
> 
> 时间：2013-02-05T04:09:04.997
> 
> 标签：c#, .net

请给我一个在 C#.net 中使用 w32tm.exe 实现时间同步的工作代码。我已经试过了。代码如下所示。

```
 System.Diagnostics.Process p;
    string output;
    p = new System.Diagnostics.Process();
    p.StartInfo = procStartInfo;
    p.StartInfo.FileName = "w32tm";
    p.StartInfo.UseShellExecute = false;
    p.StartInfo.RedirectStandardOutput = true;

    p.StartInfo.Arguments = " /resync /computer:xxxxx977";
    p.Start();
    p.WaitForExit();

    output = p.StandardOutput.ReadLine().ToString();
    MessageBox.Show(output); 
```

但是我收到以下错误找不到指定的模块。(0x8007007E)。我的要求还想重定向成功消息的标准输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T16:35:31.500

您可以尝试按照 C# 代码从 NTP 服务器启用日期时间同步。

顺便说一句，我猜这是 /resync 命令号，这样我就不必启动那个肮脏的外部进程

```
/// <summary>Synchronizes the date time to ntp server using w32time service</summary>
/// <returns><c>true</c> if [command succeed]; otherwise, <c>false</c>.</returns>
public static bool SyncDateTime()
{
    try
    {
        ServiceController serviceController = new ServiceController("w32time");

        if (serviceController.Status != ServiceControllerStatus.Running)
        {
            serviceController.Start();
        }

        Logger.TraceInformation("w32time service is running");

        Process processTime = new Process();
        processTime.StartInfo.FileName = "w32tm";
        processTime.StartInfo.Arguments = "/resync";
        processTime.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
        processTime.Start();
        processTime.WaitForExit();

        Logger.TraceInformation("w32time service has sync local dateTime from NTP server");

        return true;
    }
    catch (Exception exception)
    {
        Logger.LogError("unable to sync date time from NTP server", exception);

        return false;
    }
} 
```

详细解释：

windows有一个服务，叫做w32time，它可以在你的电脑上同步时间，首先我检查服务是否正在运行，使用ServiceController类，然后，因为我不知道哪个是resync命令号，所以我可以使用ServiceController启动命令方法，我使用 ProcessStart 在该服务上启动 dos 命令：w32tm /resync

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:36:26.770

当 .Net 运行时 JIT 对您将要进入的方法进行 JIT 时，会发生错误，因为它找不到该方法使用的类型之一。

您无法进入的方法究竟是做什么的，它使用了哪些类型/方法？

参考这个[链接](https://stackoverflow.com/questions/2066180/the-specified-module-could-not-be-found-0x8007007e)

因此，请检查您尝试加载的任何项目是否在文件夹中。

# rally - Rally Rest Api - DynamicJsonObject 如何检查密钥是否存在

> ID：14700059
> 
> 赞同：1
> 
> 时间：2013-02-05T04:09:20.490
> 
> 标签：rally

我正在尝试在网页上显示来自 Rally 的故事（分层要求）和缺陷列表。

我们在缺陷上有一个名为“InfraID”的自定义字段，但在我们的层次要求上没有。有没有办法检测每个 DynamicJsonObject 是否有一个名为“InfraId”的键以避免它抛出异常？

我尝试过 TryGetValue、Contains、HasKey，认为它被视为字典，但我不断收到 KeyNotFoundException。“给定的键不在字典中”

这是在 Razor ASP.NET MVC 视图中使用的。

```
@if (story.HasKey("InfraID"))
    {
       <td>@story["InfraID"];
       </td>
    } 
```

所以我无法弄清楚 if 语句可以用来避免抛出异常。Story 的类型为 Rally.RestAPI.DynamicJsonObject。

我正在尝试使用相同的 html，无论它是缺陷还是故事，因为其他一切都正常。这只是因为它是缺陷的自定义属性。

如果它有助于看起来相关的堆栈跟踪是：

```
 at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at Rally.RestApi.DynamicJsonObject.GetMember(String name)
   at Rally.RestApi.DynamicJsonObject.TryGetMember(GetMemberBinder binder, Object& result) 
```

所以我希望这并不意味着我不能在我的前端代码中检查它的存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:55:50.053

尝试[HasMember](https://docs.rallydev.com/restapinet/html/M_Rally_RestApi_DynamicJsonObject_HasMember.htm)：

`bool hasInfraId = story.HasMember("InfraID");`

您可以在此处的开发人员门户上的完整 api 文档中找到 Rally.RestApi.DynamicJsonObject 的方法/命名空间：

[Rally REST API .NET 命名空间](https://docs.rallydev.com/restapinet/html/N_Rally_RestApi.htm)

# android - 从主类调用实用程序类的处理程序上的空指针异常。套接字程序 Android

> ID：14700064
> 
> 赞同：0
> 
> 时间：2013-02-05T04:10:04.280
> 
> 标签：android, multithreading, sockets, handler

我做了两个类，第一个是服务器类，它运行一个线程来等待并接受来自客户端的套接字连接。

第二个类是 EchoThread 类，它启动一个新线程，该线程获取套接字连接传递的文本消息。这样做的原因是因为它需要这样做，所以我可以一次将多个客户端连接到服务器。所以我创建了这个类。它在 Server 类的 while(true) 循环中调用，以在建立连接时启动一个新线程。

问题是这个应用程序的 logcat 是 EchoThread 类的 nullPointer 异常，在这一行：

```
 handler.post(new Runnable() { 
```

为什么我会收到此错误消息以及如何处理？

服务器类：

```
 public class ServerThread implements Runnable {

    public void run() {
        try {
            if (SERVERIP != null) {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus = "Listening on IP: " + SERVERIP;
                    }
                });
                serverSocket = new ServerSocket(SERVERPORT);
                while (true) {
                    // listen for incoming clients
                    Socket client = serverSocket.accept();
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            Intent intent = new Intent();
                            intent.setAction("com.example.diceRolled");
                            intent.putExtra("serverStatus","Connected");
                            sendBroadcast(intent);
                        }
                    });

                    new EchoThread(Server.this, client).start();

                } // end while(true) method  

            } else {  // the rest of the code for Server class.... 
```

回声线程类：

```
 public class EchoThread extends Thread {
        protected Socket socket;
        private String line;
        private Handler handler;
        private Context context;
        private Socket client;

      public EchoThread(Context c, Socket clientSocket) {
                        this.socket = clientSocket;
                        this.context = c;
      }

      public void run(){
      try {
          BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));

          while ((line = in.readLine()) != null) {
          //    Log.d("ServerActivity", line);
              handler.post(new Runnable() {
                  private String receivedCommand;

                @Override
              public void run() {
              receivedCommand = line;

              Intent intent = new Intent();
                intent.setAction("com.example.diceRolled");
                intent.putExtra("serverStatus", line.trim());
                context.sendBroadcast(intent);

  Toast.makeText(context, "sent message " + receivedCommand, Toast.LENGTH_SHORT).show();

  // the rest of the code for EchoThread class.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:15:48.887

您的处理程序会保留`null`，因为您将其作为类变量

```
private Handler handler; 
```

但是你从来没有真正给它任何东西。

当你遇到

```
handler.post() 
```

抛出 NPE。

因此，您必须实例化`handler`，或者给它一个非空引用来保存。

如果您想了解有关处理程序和 Loopers 的更多信息，[这](http://mindtherobot.com/blog/159/android-guts-intro-to-loopers-and-handlers/)和[这可能是有价值的（与](http://blog.xandroid.mobi/android-tutorial/tutorial-collection/loopers-and-handlers-in-android/)[此](https://stackoverflow.com/a/7926914/1815485)SO 答案相同的链接。

# c# - 更新 linq 到实体

> ID：14700067
> 
> 赞同：-1
> 
> 时间：2013-02-05T04:10:22.657
> 
> 标签：c#, linq

我正在尝试编写与以下 sql 查询等效的 linq 到实体更新查询

```
update INVOICES set STATUS=1 where INVOICE=165438 
```

我的 Linq 到实体

```
 var db = new MyEntities();
            var query =
            from t in db.INVOICES
            where
            t.INVOICE1 == "165438"
            select t;
            foreach (var t in query)
            {
                t.STATUS ="1";
            }

            db.SaveChanges(); 
```

不确定，请有人给我一些帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:10:43.503

用 标记你的实体，`EntityState.Modified`告诉 EntityFramework 在你的数据库中更新它

```
var query = /*Your query*/;
foreach (var t in query)
{
    t.STATUS ="1";
    db.Entry(t).State = System.Data.EntityState.Modified;
}

db.SaveChanges(); 
```

# r - 在R中将字符转换为数字时遇到问题

> ID：14700068
> 
> 赞同：1
> 
> 时间：2013-02-05T04:10:27.883
> 
> 标签：r

我从 Wikipedia 中提取了一张表格，但我得到了一堆垃圾，其中包含我正在寻找的人口数量。例如，当我所追求的实际数字仅为 8,244,910 时，我得到**“！B9840748934017Â 8,244,910” 。**我已经用正则表达式清理了字符向量，使用`sub('![[:alnum:]]*[[:space:]]', '', x)`

这很好用，给我留下了字符向量“8,244,910”。但是，当我尝试使用 将其转换为数字`as.numeric`时，它会被强制转换为 NA，并且无论我尝试什么转换，我都无法获得整数。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T04:16:32.770

尝试以下操作：

```
as.numeric(gsub('![[:alnum:]]*[[:space:]]|[[:punct:]]', '', x)) 
```

问题是您第一次尝试的输出中有逗号。在转换为`as.numeric`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T16:37:42.960

Ananda 的解决方案确实完成了工作，但可能会出现问题：

*   `[:punct:]`还包括点字符`(.)`，它是`numeric`;的有效部分
*   笨重的正则表达式很难阅读，而且更容易分解：

    `# remove junk`

    `num_temp = sub('![[:alnum:]]*[[:space:]]', '', x)`

    `# remove all commas from numerics`

    `num = gsub(",", "", num_temp)`

# python - Python 时间戳的 24 小时格式

> ID：14700073
> 
> 赞同：28
> 
> 时间：2013-02-05T04:10:45.777
> 
> 标签：python, timestamp

目前我正在使用 Python 时间模块创建时间戳。我使用此命令创建了一个字符串

```
timestamp = time.strftime('%l:%M:%S') 
```

但是，这会以 12 小时格式打印格式。有没有办法以 24 小时格式执行此操作，以便显示为 20:52:53 而不是 8:52:53？

谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-05T04:16:47.593

尝试

```
timestamp = time.strftime('%H:%M:%S') 
```

查看此链接以获取有关 Python 时间模块的信息

[https://docs.python.org/3/library/time.html#time.strftime](https://docs.python.org/3/library/time.html#time.strftime)

# excel - 如何在 Excel 中找到拼写错误的文本之间的匹配？

> ID：14700074
> 
> 赞同：2
> 
> 时间：2013-02-05T04:10:46.387
> 
> 标签：excel

我有两列数据，上面有一百个名字，我需要找到匹配项。

问题是当第二列上的名称与第一列不完全相同时。很难用一百个名字来匹配它们。

excel中是否有任何公式至少可以对“Setyadi”与“Setiadi”或“Tak Jelan”与“Tak Lejan”之类的数据进行容忍。

* * *

感谢您的解决方案，它有效，我编辑了这个，因为我想问更多，

我还有一个问题，你能再帮我一次吗？我有这样的数据，我想根据将 D 列中的名称与 A 列匹配的数字填充 C 列。另一个问题是，我想匹配仅在 E 列中提到的组中的名称，甚至不在同一行。

从

```
 A       |  B  |  c  |     D       |  E   |
 Setyadi    |  1  |     |  Setiadi    |  11  |
Tak Jelan   |  2  |     | Tak Lejan   |  11  |
  Gordon    |  3  |     |   Herik     |  12  |
   Alex     |  4  |     |  Goerdon    |  12  |
   Heri     |  5  |     |   Alex      |  12  | 
```

进入

```
 A        |  B  |  c  |     D       |  E   |
Setyadi     |  1  |  1  |  Setiadi    |  11  |
Tak Jelan   |  2  |  2  | Tak Lejan   |  11  |
 Gordon     |  3  |  5  |   Herik     |  12  |
  Alex      |  4  |  3  |  Goerdon    |  12  |
  Heri      |  5  |  4  |   Alex      |  12  | 
```

我需要的是，我们如何比较 D 列中提到的组中的名称，然后我们可以自动给出 C 列中与 B 列耦合的数字。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T04:25:48.503

您可以使用类似 John Walkenbach 的 SOUNDEX() 函数：

[http://spreadsheetpage.com/index.php/tip/searching_using_soundex_codes/](http://spreadsheetpage.com/index.php/tip/searching_using_soundex_codes/)

然后把代码放到Excel中：

[http://www.contextures.com/xlvba01.html](http://www.contextures.com/xlvba01.html)

现在，如果你有这些数据：

```
A         | B        
Setyadi   | Setiadi  
Tak Jelan | Tak Lejan 
```

现在您想在 C1 中添加一个公式，例如：

`=SOUNDEX(A1)`

并将该公式复制到 C2、D1 和 D2。

现在看看你的数据：

```
A         | B         | SOUNDEX(ColumnA) | SOUNDEX(ColumnB)
Setyadi   | Setiadi   | S330             | S330
Tak Jelan | Tak Lejan | T245             | T242 
```

请注意 Setyadi 和 Setiadi 是如何完全相同的，因为它们**听起来**相同，这就是 SOUNDEX 函数的代码返回这样的原因。

现在，当您查看 Tak Jelan 条目时，您会看到相差 3（从 T245 到 T242）。现在，我要做的是创建一个新公式，如果第一个字母相同，则只提取数字并比较它们的接近程度：

`=IF(LEFT(C1,1)=LEFT(D1,1),STDEV.P(MID(C1,2,3),MID(D1,2,3)))`

然后你可以比较标准偏差。

# php - 在运行时在 php 中包含来自外部站点的数据

> ID：14700082
> 
> 赞同：0
> 
> 时间：2013-02-05T04:11:34.743
> 
> 标签：php, javascript, html, ajax, codeigniter

我正在使用 PHP 开发一个个人项目，我需要在运行时获取和包含数据，或者在页面加载后（无论哪个容易），并将其插入页面标记中，就好像它是本地的一样。

一个简单的现实生活示例是 Facebook 点赞框，它实时获取“点赞数据”，并将其显示在第三方网站上。

另一个例子是 voltrank，seo 系统，他们要求你在 php 中呈现的页面中插入一段代码，然后他们用他们数据库中的链接填充你提供的空间。它给人的感觉就像链接一开始就在那里，而不是从外部插入。

是的，这两个站点（数据源 + 数据目标）都将是我的，因此对内容/抓取/或任何代码实现没有任何限制。

而且我不希望它是基于 iframe 的解决方案，因为我想将一个值传递给源站点/url，并希望它基于该值返回输出。

此外，我什至不在这里要求整个解决方案本身，我想要的只是 PHP 中的 Web 编程方面的一些神童，引导我朝着正确的方向前进，因为我什至无法弄清楚这个过程/事物到底是什么，这使我更难以研究。

问候（如果这个问题太天真，请不要反对我）

PS：Offcourse 我希望从中提取内容的站点有一个数据库系统。

而且我的偏好更倾向于在“未来”使其成为一个公共系统，在那里我将为我的客户提供一个特定的代码片段（更像是 facebook 所做的），然后通过将该代码放在他们的网站上，他们能够获得他们各自的数据，来自我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:22:56.873

你想要 php-curl。[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

这是一个不错的小功能

```
 function curl_download($Url) {
        if (!function_exists('curl_init')) {
            die('Sorry cURL is not installed!');
        }
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $Url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_TIMEOUT, 10);
        $output = curl_exec($ch);
        curl_close($ch);
        return $output;
    }

    $a = curl_download('http://www.yoursite.com/file.txt');
    echo $a; 
```

您还应该研究 ajax .get()、.load() .jsonp()。使用 ajax 进行跨域调用时会遇到问题，但 php 不介意。这一切都取决于您是否真的需要在 PHP 运行时显示的信息，或者您是否想快速加载一个 html 页面，然后使用 ajax 抓取数据并填写数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:22:43.630

据我所知，您需要从另一个站点获取数据并将其实时显示在您的站点中。

就在一周前，我做过类似的工作。我所做的是，

*   使用 ajax 调用包含获取的详细信息的页面。

*   使用定期刷新被调用页面`settimeout`。`jQuery`

*   用户不会知道刷新，因为刷新的页面是由 ajax 调用的。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:51:55.127

我认为 Codeigniter 钩子可能是你的答案。查看挂钩点，看看哪一个最适合您的需求：

[http://ellislab.com/codeigniter/user-guide/general/hooks.html](http://ellislab.com/codeigniter/user-guide/general/hooks.html)

你可以调用一个钩子

> post_controller

或者

> post_system

例如。

# css - 固定尺寸背景图像

> ID：14700086
> 
> 赞同：0
> 
> 时间：2013-02-05T04:12:09.440
> 
> 标签：css, background-image

我使用了尺寸为 1120 X 714 像素的背景图像。长宽比应该与它的尺寸成比例，这样图像就不会看起来失真。

将使用背景图像的网页具有 1024 像素的固定宽度。在我的CSS中，我有以下内容：

```
body{
    background: black url("background.jpg") no-repeat fixed center;
    background-size: 1120px 100%;
} 
```

上面的 css 将使背景图像的长度为 100%。根据分辨率或浏览器尺寸，背景图像会失真。

宽度在这里不是问题。

具有固定尺寸背景图像的其他方法是什么？

我应该使用`background-size: 1120px 714px;`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:28:57.540

您根本不需要指定背景大小。下面的代码应该足够了。

```
body{
    background: black url("background.jpg") no-repeat center center;
    background-attachment: fixed;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:24:13.687

设置背景尺寸时：第一个值是宽度，第二个值是高度。因此，如果您想让图像的长度为 100%，请编写：

```
background-size: 100% 714px; 
```

我认为 714px 是图像的高度...

# java - 如何编写启用单个脚本的 Java 测试应用程序？

> ID：14700091
> 
> 赞同：0
> 
> 时间：2013-02-05T04:12:43.353
> 
> 标签：java, testing

我正在尝试完成一项任务，该任务需要我编写一个可以由单个脚本调用并自动运行的独立 Java 应用程序。Java JDK 位置和其他参数（如输出路径）都需要在命令行中涉及，因为它们也需要进行测试。我没有编写这种脚本的经验，有人可以给我一些提示吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:16:36.357

编写某种[shell 脚本](http://en.wikipedia.org/wiki/Shell_script)，使用必要的参数调用您的 Java 程序。它可以像一两行一样简单。

如果您将 Java 程序打包为包含所有必需依赖项的 JAR，您可能会发现这更容易。

# php - 生成用于物理/离线验证的“随机”代码的方法？PHP/WEB

> ID：14700098
> 
> 赞同：1
> 
> 时间：2013-02-05T04:13:15.180
> 
> 标签：php, web, offline

长话短说，我想创建一个自动礼券系统。我已经决定，由于身份验证系统主要是手动的（扫描 qrcode/输入 qc 码），因此暴力破解的机会很小。（我敢肯定，在第 100 次尝试之后，我们就会把这家伙踢出去。）

因此，礼品代码将是顺序 GC（礼品代码）ID 的混合。以及该顺序 ID 独有的某种哈希/代码。IE。CODE_1001 // SHA1HASHBLAHBLAH。

这允许人类（即服务器）可读代码与唯一标签匹配以进行验证。

具体来说，我想知道在这种情况下最佳实践可能是什么。

我是否在大空间中生成一个完全随机的代码并假设这对 GCID 和 UniID 之间不会发生冲突？或者以某种方式用顺序键加盐生成的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:43:26.597

[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)将是我的尝试，我已经多次使用此函数来生成唯一值而不会发生冲突。

或使用：[http ://www.php.net/manual/en/function.openssl-random-pseudo-bytes.php](http://www.php.net/manual/en/function.openssl-random-pseudo-bytes.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:39:38.187

这可能会有所帮助。

```
 $var = mysql_real_escape_string(md5($var['value']));
    or
    $var = mysql_real_escape_string(md5($var));
    or
    $var = mysql_real_escape_string(sha512($var['value']));
    or
    $var = mysql_real_escape_string(sha512($var)); 
```

# node.js - node.js/angular.js - 无法获取

> ID：14700099
> 
> 赞同：15
> 
> 时间：2013-02-05T04:13:20.373
> 
> 标签：node.js, angularjs

我有根路由，它工作正常。我还有另一条路线 127.0.0.1:3000/dashboard 如果我只是在地址栏中键入该 url 我收到此错误：

无法获取 /dashboard

如果我创建一个指向相同网址的链接，它就可以正常工作。

如果我然后刷新该页面，我会再次收到相同的错误。

下面是我的 node.js 路线

应用程序.js

```
/**
* Module dependencies.
 */

var express = require('express')
  , routes  = require('./routes')
  , stats   = require('./routes/stats')
  , tests   = require('./routes/test')
  , http    = require('http')
  , util    = require('util')
  , path    = require('path');

var app = module.exports = express();

app.configure(function(){

  /*
   * Configuration
   *
   */
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');

  /*
   * Middleware definitions
   *
   */
  app.use(express.favicon());
  app.use(express.logger('dev'));
  /*
   * Error handling middleware
   */
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser('shhhhhhhh, super secret'));
  app.use(app.router);

  // serves up dynamic css files
  app.use(require('stylus').middleware(__dirname + '/public'));
  app.use(require('less-middleware')({ src: __dirname + '/public' }));

  // serves a static path
  app.use(express.static(path.join(__dirname, 'public')));

});

app.configure('development', function(){
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
    app.use(express.errorHandler());
});

/*
 * Endpoints
 */
app.get('/', routes.index);

app.get('/test', tests.get);
app.post('/test', tests.post);
app.options('/test', tests.options);

app.get('/stats/sends', stats.sends.get);
app.get('/stats/events', stats.events.get);
app.get('/stats/attempts', stats.attempts.get);
app.get('/stats/errors', stats.errors.get);
app.get('/stats/mquad', stats.mquad.get);

app.get('/partials/:name', routes.partials);
app.get('/index/landing', routes.landing);
app.get('/index/dashboard', routes.dashboard);

console.log('Env: ' + app.settings.env);
http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

路线/index.js

```
 exports.dashboard = function(req, res){
        res.render('dashboard');
    }; 
```

角度路线

```
 'use strict';
angular.module('myApp', ['myApp.filters', 'myApp.services', 'myApp.directives']).
    config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {
    $routeProvider.
        when('/', {
            templateUrl: 'partials/landing',
            controller: LandingCtrl
        }).
        when('/dashboard', {
            templateUrl: 'partials/dashboard',
            controller: DashboardCtrl
        }).
        otherwise({
            redirectTo: '/'
        });
    $locationProvider.html5Mode(true);
}]); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-14T10:35:54.563

这不起作用的原因是**您的服务器没有捕获所有其他路由**并将它们路由到由`routes.index`.

为了捕获所有其他路由并将它们路由到索引页面，以便您的 Angular 应用程序可以查看它是否与提供的 url 匹配，您需要做的就是在声明最后一条路由后添加以下行：

```
app.get('*', routes.index); 
```

现在您应该能够：

*   直接导航到 Angular.js 应用提供的 url
*   刷新任何页面没有错误

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-13T09:47:22.230

这篇文章可能会有所帮助：

[http://jjt.io/2013/11/16/angular-html5mode-using-yeoman-generator-angular/](http://jjt.io/2013/11/16/angular-html5mode-using-yeoman-generator-angular/)

简而言之：

```
npm install --save-dev connect-modrewrite 
```

咕噜文件：

```
connect: {
  options: {
    // ...
    // Modrewrite rule, connect.static(path) for each path in target's base
    middleware: function (connect, options) {
      var optBase = (typeof options.base === 'string') ? [options.base] : options.base;
      return [require('connect-modrewrite')(['!(\\..+)$ / [L]'])].concat(
        optBase.map(function(path){ return connect.static(path); }));
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T04:52:44.740

Route`app.get('/index/dashboard', routes.dashboard);`指，`http://hostname/index/dashboard`而`when('/dashboard', { ... })`指`http://hostname/dashboard`.

您应该更正路线：`app.get('/dashboard', routes.dashboard);`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-20T18:21:39.240

我建议在前端和后端使用一个非常快速的 javascript 解决方案。

**Node.js**

```
// set up our one route to the index.html file
    app.get('*', function (req, res){
    res.sendFile(path.join(__dirname+'/public/index.html'));
}); 
```

这段代码告诉本地/远程服务器主 html 在哪里，所以它可以找到其余的模板。

**AngularJs**

```
// If 404 Redirect to home
$routeProvider.otherwise( { redirectTo: '/'} ); 
```

这也很有帮助，所以永远不会去丢失的页面。

# scala - 没有找到 Scala 的 Json 格式化程序，播放框架错误

> ID：14700103
> 
> 赞同：6
> 
> 时间：2013-02-05T04:13:59.047
> 
> 标签：scala, playframework

我有以下两个隐式。

```
implicit val readObjectIdFormat = new Reads[ObjectId] {
def reads(jv: JsValue): JsResult[ObjectId] = {
  JsSuccess(new ObjectId(jv.as[String]))
 }
}

implicit val visitorFormat = (
(__ \ "_id").formatOpt[ObjectId] and
(__ \ "visitorId").format[String] and
(__ \ "referralUrl").formatOpt[String] and
(__ \ "ipAddress").formatOpt[String] and
(__ \ "promotionId").format[String])(Visitor) 
```

尽管 readObjectIdFormat 是在编译时定义的，但它一直在抱怨“（__ \ “_id”）.formatOpt [ObjectId]”行

**找不到类型 org.bson.types.ObjectId 的 Json 格式化程序。尝试为此类型实现隐式格式。**

版本：播放 2.1-RC2，Scala 2.10

知道为什么它无法识别 readObjectIdFormat 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:06:59.820

其他人给出了很好的答案，请改用格式。顺便说一句，您可以处理解析错误。

这个实现对我来说很好用：

```
 implicit val objectIdFormat: Format[ObjectId] = new Format[ObjectId] {

    def reads(json: JsValue) = {
      json match {
        case jsString: JsString => {
          if ( ObjectId.isValid(jsString.value) ) JsSuccess(new ObjectId(jsString.value))
          else JsError("Invalid ObjectId")
        }
        case other => JsError("Can't parse json path as an ObjectId. Json content = " + other.toString())
      }
    }

    def writes(oId: ObjectId): JsValue = {
      JsString(oId.toString)
    }

  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T06:56:59.117

您正在实施`Reads`，而您需要实施`Format`。

```
implicit val readObjectIdFormat = new Format[ObjectId] {
 def reads(jv: JsValue): JsResult[ObjectId] = {
  JsSuccess(new ObjectId(jv.as[String]))
 }

 def writes(o: A): JsValue = JsString(...)
} 
```

或者您需要使用读取而不是格式（注意我假设这适用于读取，尚未测试）。

```
implicit val visitorRead = (
(__ \ "_id").readOpt[ObjectId] and
(__ \ "visitorId").read[String] and
(__ \ "referralUrl").readOpt[String] and
(__ \ "ipAddress").readOpt[String] and
(__ \ "promotionId").read[String])(Visitor) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:27:40.967

从[文档](http://www.playframework.org/documentation/api/2.1-RC4/scala/index.html#play.api.libs.json.Format)：`Format[T] extends Reads[T] with Writes[T]`
`Format`是一个**读+写**。

然后写一个隐式 writeObjectIdFormat

```
implicit val formatObjectIdFormat = 
   Format(readObjectIdFormat, writeObjectIdFormat) 
```

# android - 如何知道按钮被按下的android列表视图中的哪一行？

> ID：14700109
> 
> 赞同：0
> 
> 时间：2013-02-05T04:14:58.047
> 
> 标签：android, android-listview

我有一个 ListActivity，在我的列表中，我有非常复杂的列表项，其中包含多个 ImagesViews TextViews 和 Buttons。当我单击一个按钮时，我想编辑一些文本视图并更改一些背景颜色。我的实现有效，但前提是我单击的按钮位于可见的第一行内。我`getChildAt()`用来抓取其中一个可见行，但我需要知道要抓取哪一个。

```
public void onClick(View v){
    System.out.println("Something got clicked");
    if(v.getId() == R.id.lovebutton){
        MainListItem i = mainAdapter.getItem(listView.getFirstVisiblePosition());
            i.loved=true;
            i.loves++;
            View view;
                view = listView.getChildAt(0);
                //view = listView.getChildAt(1);
            ((TextView) view.findViewById(R.id.lovecount)).setText(String.valueOf(i.loves));
            view.findViewById(R.id.lovebutton).setBackgroundColor(Color.parseColor(i.brandLoveColor));
            ((ImageView)view.findViewById(R.id.lovebutton)).setImageResource(R.drawable.lovewhite);
        }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:12:45.823

有很多方法可以做到这一点。将状态保存在 pojo 中，在 onClick 中更新它们并调用`#notifyDataSetChanged()`. 或者，您可以将位置作为标签添加到适配器的 getView 中的按钮。在 OnClick 中，您可以获得标签。这样你就会知道按钮属于哪个位置。

在 Joe 的帮助下 - [Android：从 ListView 访问子视图](https://stackoverflow.com/questions/257514/android-access-child-views-from-a-listview)

```
public void onClick(View v){
    System.out.println("Something got clicked");
    if(v.getId() == R.id.lovebutton){
        int wantedPosition = Integer.parseInt(view.getTag());
        int firstPosition = listView.getFirstVisiblePosition() - listView.getHeaderViewsCount(); // This is the same as child #0
        int wantedChild = wantedPosition - firstPosition;
        // Say, first visible position is 8, you want position 10, wantedChild will now be 2
        // So that means your view is child #2 in the ViewGroup:
        if (wantedChild < 0 || wantedChild >= listView.getChildCount()) {
          Log.w(TAG, "Unable to get view for desired position, because it's not being displayed on screen.");
          return;
        }
        // Could also check if wantedPosition is between listView.getFirstVisiblePosition() and listView.getLastVisiblePosition() instead.
        View wantedView = listView.getChildAt(wantedChild);
        MainListItem i = mainAdapter.getItem(wantedPosition);
        i.loved=true;
        i.loves++;
        ((TextView) view.findViewById(R.id.lovecount)).setText(String.valueOf(i.loves));
        view.findViewById(R.id.lovebutton).setBackgroundColor(Color.parseColor(i.brandLoveColor));
        ((ImageView)view.findViewById(R.id.lovebutton)).setImageResource(R.drawable.lovewhite);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:01:19.967

在 listView 中获取单击的行，您必须使用“OnItemClickListener”。

```
 lv.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> arg0, View arg1,
                            int pos, long arg3) {
                        HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(pos);    
                          System.out.println(pos);//This will return your position

                    }
                }); 
```

# riak - 如何在 Riak 中索引已经存在的对象

> ID：14700112
> 
> 赞同：0
> 
> 时间：2013-02-05T04:15:32.183
> 
> 标签：riak, riak-search

我在 riak 中创建了一个存储桶并存储了一些键值对（值是一个 json 对象）。在此之后，我跑去`/usr/sbin/search-cmd install <bucket>`开始 riak 搜索桶。

每个对象都有一个“类型”属性，我正在尝试使用搜索特定类型的对象，`/usr/sbin/search-cmd search <bucket> "type:xyz"`但出现以下错误：

```
RPC to 'riak@127.0.0.1' failed: {'EXIT',
                             {badarg,
                              [{ets,lookup,
                                [schema_table,<<"catalog">>],
                                []},
                               {riak_search_config,get_schema,1,
                                [{file,"src/riak_search_config.erl"},
                                 {line,69}]},
                               {riak_search_client,parse_query,3,
                                [{file,"src/riak_search_client.erl"},
                                 {line,57}]},
                               {search,search,3,
                                [{file,"src/search.erl"},{line,55}]},
                               {riak_search_cmd,search,3,
                                [{file,"src/riak_search_cmd.erl"},
                                 {line,188}]},
                               {rpc,'-handle_call_call/6-fun-0-',5,
                                [{file,"rpc.erl"},{line,203}]}]}} 
```

我读到索引是通过预提交挂钩发生的，所以我也再次发布了所有对象，但仍然没有结果。我是否错过了设置 riak 搜索的任何步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:05:15.933

认为我的 app.config 中未启用 riak 搜索。

# javascript - 使用 javascript 读取 config.xml 文件

> ID：14700113
> 
> 赞同：2
> 
> 时间：2013-02-05T04:15:40.803
> 
> 标签：javascript, jquery, config, readfile

我有许多 html 文件和一个 config.xml 文件。虽然它们是单独的页面，但它们都属于一个项目。现在我的 config.xml 文件有 thig 标签

```
<widget xmlns = "http://www.w3.org/ns/widgets"
    xmlns:gap = "http://phonegap.com/ns/1.0"
    id        = "com.phonegap.capexrevex"
    version   = "1.0.0"> 
```

然后正如我上面已经提到的，我有许多 html 页面..

在那我有我的主页“main.html”。在我的主页中，我需要从我的 config.xml 文件中读取版本标签

**我如何使用 javascript/jquery 来做到这一点？？？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:22:13.693

使用 jQuery`$.get`函数，您应该能够完成您想要做的事情。

```
$.get("config.xml", function(data){
    alert($(data).find('widget').attr('version'));
}); 
```

# string - 使用 R 识别复杂字符串中的多个 ID

> ID：14700118
> 
> 赞同：1
> 
> 时间：2013-02-05T04:15:55.687
> 
> 标签：string, r

我有一个包含很多字符串和这样的值的数据框

```
ID String                                                    Value
1  LocationID=123,321,345&TimeID=456,321,789&TypeID=12,32    100
2  LocationID=123,345&TimeID=456,321                         50
3  LocationID=123,321,345&TypeID=32                          120
... 
```

正如您在示例中看到的那样，“，”表示“或”。所以 locationID=123,321,345 指的是那些位置 ID 为 123、321 或 345 的元素。“值”可以认为是满足字符串的条目数。

我想编写一个程序来使用 R 计算每个 ID 的出现次数。即程序的输出应该是：

```
ID                Occurrence
LocationID = 123  270                          #(100+50+120)
LocationID = 321  220                          #(100+120)
...
TypeID = 12       100
... 
```

谁能给我一些关于如何完成这项任务的建议？

我发现处理“，”和ID非常困难。否则我可以使用 for 循环，虽然我讨厌 for 循环.....

还有一个问题，ID 应该允许为空或字符，如下所示：

```
ID String                                                    Value
1  LocationID=123,321,345&TimeID=456,321,789&TypeID=         100
2  LocationID=123,345&TimeID=&TypeID=A                       50
3  LocationID=123,321,345&TypeID=32                          120 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:08:56.660

试试这个。 `lapply2`就像`lapply`它是 rbind 之后的结果。我们拆分 String 参数并将结果放入`s`. 然后我们计算一个新的数据框`dat2`，每个 ID 都有一行。对于样本数据，第 1 行有 3 个 ID，第 2 行有 2 个 ID，第 3 行有 2 个 ID，因此`dat2`3+2+2 = 7 行。以类似的方式，我们爆炸`dat2`产生`dat3`. 作为其中的一部分，我们使用它`strapplyc`来简化提取所有出现的过程。最后我们`aggregate`用来计算结果。

```
library(gsubfn)

lapply2 <- function(...) do.call("rbind", lapply(...))

s <- strsplit(dat$String, "&")

dat2 <- lapply2(1:nrow(dat), function(i) 
     data.frame(
            String = I(s[[i]]), 
            Value = dat$Value[i]
     )
)

dat3 <- lapply2(1:nrow(dat2), function(i) 
     data.frame(
            String = sub("=.*", "", dat2$String[i]), 
            Occurrence = strapplyc(dat2$String[i], "\\d+")[[1]], 
            Value = dat2$Value[i]
     )
)

ag <- aggregate(Value ~ String + Occurrence, dat3, sum) 
```

结果是：

```
> ag
      String Occurrence Value
1 LocationID        123   270
2 LocationID        321   220
3     TimeID        321   150
4 LocationID        345   270
5     TimeID        456   150
6     TimeID        789   100
7     TypeID         12   100
8     TypeID         32   220 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T07:24:05.247

G. Grothendieck 的回答*要*好得多，但由于我已经开始研究解决方案，所以就在这里。这坚持以 R 为基础并涉及 long `lapply`。假设您的数据名为“mydata”：

首先，用 & 号分割“字符串”列

```
temp1 <- strsplit(mydata$String, "&") 
```

其次，这里有一个名为 in 的复杂匿名函数`lapply`。我已经对这些步骤进行了注释，因此您可以看到发生了什么。

```
temp2 <- do.call(
  "rbind", 
  lapply(seq_along(temp1), function(x) {
    # Set the pattern we're going to look for
    pattern <- "(.*)=(.*)"
    # Extract names and values
    Name <- gsub(pattern, "\\1", temp1[[x]])
    Measure <- gsub(pattern, "\\2", temp1[[x]])
    # Split the Measure value, and create a data.frame
    Output <- lapply(strsplit(Measure, ","), function(x) 
      data.frame(as.numeric(x)))
    names(Output) <- Name             # Add the names back to the list
    Output <- do.call(rbind, Output)  # rbind the sub-lists
    # Move the rownames to a column
    Output$Param <- gsub("(.*)\\.[0-9]+", "\\1", rownames(Output))
    rownames(Output) <- NULL          # Clean up the rownames
    names(Output)[1] <- "Measure"     # Rename the measure variable
    # Make a nice dataframe with your original data too.
    data.frame(ID = mydata[x, "ID"], Output, Value = mydata[x, "Value"])
  })) 
```

结果如下所示：

```
temp2
#    ID Measure      Param Value
# 1   1     123 LocationID   100
# 2   1     321 LocationID   100
# 3   1     345 LocationID   100
# 4   1     456     TimeID   100
# 5   1     321     TimeID   100
# 6   1     789     TimeID   100
# 7   1      12     TypeID   100
# 8   1      32     TypeID   100
# 9   2     123 LocationID    50
# 10  2     345 LocationID    50
# 11  2     456     TimeID    50
# 12  2     321     TimeID    50
# 13  3     123 LocationID   120
# 14  3     321 LocationID   120
# 15  3     345 LocationID   120
# 16  3      32     TypeID   120 
```

所以，现在我们可以很容易地`aggregate`在输出上使用来得到这个：

```
aggregate(Value ~ Param + Measure, temp2, sum)
#        Param Measure Value
# 1     TypeID      12   100
# 2     TypeID      32   220
# 3 LocationID     123   270
# 4 LocationID     321   220
# 5     TimeID     321   150
# 6 LocationID     345   270
# 7     TimeID     456   150
# 8     TimeID     789   100 
```

* * *

为方便起见，以下`dput`是数据的前几行之一：

```
mydata <- structure(list(ID = 1:3, 
                         String = c("LocationID=123,321,345&TimeID=456,321,789&TypeID=12,32",
                                    "LocationID=123,345&TimeID=456,321", 
                                    "LocationID=123,321,345&TypeID=32"), 
                         Value = c(100L, 50L, 120L)), 
                    .Names = c("ID", "String", "Value"), 
                    row.names = c(NA, -3L), 
                    class = "data.frame") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T04:40:34.757

尝试使用 strsplit 函数，你可以像这样标记你的字符串

```
strsplit("LocationID=123,321,345&TimeID=456,321,789&TypeID=12,32","&"); ## this will tokenize by splitting by &; 
```

然后使用 grep 确定 LocationID、TimeID、TypeID 的存在，并通过 '=' 适当地进行 strsplit，然后使用 ',' 将这些值附加到辅助帧中。

最后叫一个'tapply'

希望这有助于作为一个大致的轮廓

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T04:51:41.107

你可以做这样的事情

```
dat <- read.table(text = 'ID String                                                    Value
1  LocationID=123,321,345&TimeID=456,321,789&TypeID=12,32    100
2  LocationID=123,345&TimeID=456,321                         50
3  LocationID=123,321,345&TypeID=32                          120',header= T, stringsAsFactors=F)
## split by &
ll <- unlist(strsplit(dat$String,'&'))
## create 2 lits of occuonces and id names
occs <- strsplit(gsub('(.*)ID=(.*)','\\2',ll),',')
ids <- gsub('(.*)ID=(.*)','\\1',ll)
names(occs) <- ids
ll <- sapply(names(occs),function(x) occs[x] <- paste(x,occs[[x]], sep ='_'))
## use rapply to change list in data.frame then count by table
table(rapply(ll,I))

Location_123 Location_321 Location_345     Time_321     Time_456     Time_789      Type_12      Type_32 
           3            3            3            2            2            2            2            2 
```

# java - 如何通过扫描仪搜索并将字符串除以空格？

> ID：14700119
> 
> 赞同：1
> 
> 时间：2013-02-05T04:15:56.477
> 
> 标签：java, arraylist, java.util.scanner

我正在尝试通过从给定的扫描仪中读取项目来构建商店。构造函数必须重复（直到项目名称为 *）从给定的扫描仪对象中读取项目并将其添加到其清单中。

面包 2.75 25

我需要将这样的字符串分成“面包面包”“2.75”和“25”。然后转到下一行并做同样的事情，直到它显示“*”

```
public class Store {
private ArrayList<Item> inventory;

// CONSTRUCTORS

/*
 * Constructs a store without any items in its inventory.
 */
public Store() {

}

/*
 * Constructs a store by reading items from a given Scanner. The constructor
 * must repeatedly (until item name is *) read items from the given scanner
 * object and add it to its inventory. Here is an example of the data (that
 * has three items) that could be entered for reading from the supplied
 * scanner:
 */
public Store(Scanner keyboard) {
    while(keyboard != null){

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:43:32.497

试试下面的代码。它工作我最近检查过。

```
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class MyClient {

    public static void main(String args[]) {

        List<Item> inventory = new ArrayList<Item>();

        Scanner sc = new Scanner(System.in);
        while (sc.hasNext()) {
            String s1 = sc.nextLine();

            if (s1.equals("*")) {
                break;
            } else {
                Scanner ls = new Scanner(s1);
                while (ls.hasNext()) {
                    Item item = new Item(ls.next(), ls.nextFloat(), ls.nextInt());
                    inventory.add(item);
                }

            }
        }
        System.out.println(inventory);

    }
} 
```

现在你需要创建一个 Item.java 下面是 Item .java

```
public class Item {
    private String name;
    private int quanity;
    private float price;

    public Item(String name, float price, int quanity) {
        this.name = name;
        this.price = price;
        this.quanity = quanity;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getQuanity() {
        return quanity;
    }

    public void setQuanity(int quanity) {
        this.quanity = quanity;
    }

    public float getPrice() {
        return price;
    }

    public void setPrice(float price) {
        this.price = price;
    }

    @Override
    public String toString() {
        return "Item [name=" + name + ", quanity=" + quanity + ", price="
                + price + "]";
    }

} 
```

在最后输入所有库存类型“*”（星号）后，它将列出所有输入的项目。

# c# - 通过指定确切的类和 System.Object 来引用对象有什么区别？

> ID：14700121
> 
> 赞同：0
> 
> 时间：2013-02-05T04:16:04.477
> 
> 标签：c#, types, reference, covariance

如果我们有一个类，例如`MyClass`，在实例化该类的对象时，这两者有什么区别：

```
Object obj=new MyClass();
MyClass obj2=new MyClass(); 
```

我知道在 .NET 中，所有类都派生自`System.Object`，因此在这种情况下，*obj*和*obj2*变量只包含对对象的引用。

**然而，有什么不同吗？**

**如果是这样，当使用这两种实例化对象的方式时，它是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T04:23:32.237

假设您的班级有一个名为 的属性`Name`，如果您使用它，

```
Object obj = new MyClass(); 
```

并尝试使用：

```
obj.Name = "George"; 
```

这将是编译器错误，因为 Object 类没有`Name`属性。但是，这会很好：

```
MyClass obj2 = new MyClass();
obj2.Name = "George"; 
```

因为它`obj2`是一个`MyClass`. 简而言之，为了访问变量的类成员（属性、方法、变量），该变量必须是具有这些成员的类型，或者需要强制转换为必要的类：

```
((MyClass)obj).Name = "George"; 
```

但是，不断地转换变量以获取其成员并不好，因为它需要额外的 CPU 周期并且可能导致 InvalidCastExceptions。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:26:23.283

好吧，这有点简单，当然你可以将你的类实例化为一个对象，但是为什么呢？如果你想使用它的任何东西，你必须将它作为你的类。

使用示例`DateTime`

```
object obj = new DateTime();
int test = ((DateTime)obj).Second;   // Have to cast here, as object does not contain Second

DateTime obj2 = new DateTime();
int test2 = obj2.Second; // It is a DateTime so all good

var obj3 = new DateTime(); // Type is infered by right hand side assignment
int test3 = obj3.Second; // It is a DateTime so all good 
```

所以除非你的类中没有任何东西创建为对象是好的，但是为什么要使用一个类只是使用对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T04:25:14.767

```
public class MYclass
    {
        public int Id { get; set; }
    }

class Program
{
    static void Main(string[] args)
    {
        Object obj = new MYclass();
        MYclass mc = new MYclass();

        Console.WriteLine(obj.GetType());
        MYclass mc2 = obj as MYclass;
        Console.WriteLine(mc2.Id);
        Console.WriteLine(mc.Id);

        Console.ReadLine();
    }
} 
```

在上面的代码段中，输出将是

```
ConsoleApplication1.MYclass
0
0 
```

这告诉您在运行时 obj 的类型是 Myclass。但是，在编译时它仍然是一个对象，您需要显式转换才能访问 obj 中 Myclass 的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T04:25:59.773

假设`MyClass`直接继承自`Object`，写作`Object obj = new MyClass()`会创建一个`MyClass`对象，但对它的引用是类型的`Object`。因此，它不知道类中存在的任何公开可用的方法、属性或状态变量`MyClass`，因此如果您尝试调用：

`obj.MyClassMethod()`

通话将失败。除非使用某种形式的强制转换，否则唯一可用的方法`obj`将是类公开的方法。`Object`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T04:27:27.660

第一：术语。您仅以一种方式实例化 MyClass 的实例：通过调用其构造函数。您正在做的是以两种方式引用该实例。这是因为多态性，一个类实例可以被它实现的任何类型引用的属性。在您编写实例时，引用实例的不同方式之间没有很大区别，但是当您想要使用某些基本类型执行某些操作时，可能会有很大区别。CLR 执行从子类型 (MyClass) 及其基类型 (Object) 的自动转换。

# asp.net - 基于 URL 忽略按钮点击

> ID：14700122
> 
> 赞同：0
> 
> 时间：2013-02-05T04:16:11.350
> 
> 标签：asp.net, master-pages

我有一个奇怪的问题。我在网页上有一个 asp.net 按钮与 masterpage 集成。当我使用地址栏中的**[http://www.mywebsite.com](http://www.mywebsite.com)**之类的 url 调用页面并单击按钮时没有任何反应，它保持在相同的网址上。意味着它忽略按钮单击事件。

现在，如果我使用 url **[http://www.mywebsite.com/default.aspx](http://www.mywebsite.com/default.aspx)**调用页面并单击按钮，那么它甚至捕获按钮单击并执行该按钮单击中的代码

我该如何解决这个问题？

# ruby - Selenium-Webdriver Ruby --> 点击后如何等待图片完全加载

> ID：14700123
> 
> 赞同：3
> 
> 时间：2013-02-05T04:16:13.470
> 
> 标签：ruby, selenium-webdriver

我对 Ruby 和 Selenium-Webdriver 很陌生，所以请帮忙:)

我正在尝试打开电子邮件活动，发送到我的收件箱，其中包含图像并在 Firefox 中截屏。但我不能让它等到图像完全加载。一旦我点击“显示图像”，屏幕截图已经被拍摄，但当时没有加载图像。在显示所有图像后，如何暂停脚本并在一段时间后截取屏幕截图？

请帮忙 ：（

贝娄是我的脚本：

```
enter code here

require 'selenium-webdriver'

browser = Selenium::WebDriver.for :firefox

#==========================================================================================

wait = browser.manage.timeouts.implicit_wait = 15
#==========================================================================================
url = 'https://login.yahoo.com/config/login_verify2?.intl=us&.src=ym'
# Open browser (firefox)
browser.navigate.to url
browser.find_element(:id, 'username').send_keys "some yahoo id"
browser.find_element(:id, 'passwd').send_key "some password"
browser.find_element(:id, ".save").click
browser.find_element(:id, "inbox-label").click
browser.find_element(:xpath, "//div[@class='subj']").click
browser.find_element(:xpath, "//a[@title='Display blocked images']").click

result_page_title = browser.find_element(:tag_name, 'title')
    puts "Title of the page: \t\t: #{result_page_title.text}"
    browser.save_screenshot "1.jpg" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-12T21:58:11.790

[文档中的](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp#explicit-waits)Ruby 代码（单击“ruby”按钮）：

```
wait = Selenium::WebDriver::Wait.new(:timeout => 10) # seconds
begin
  element = wait.until { driver.find_element(:id => "some-dynamic-element") }
ensure
  driver.quit
end 
```

哪个对我有用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T06:34:09.567

您可以使用`Implicit Wait and Explicit Wait`等待特定的 Web 元素，直到它出现在页面中。您可以定义的等待期取决于应用程序。

**显式等待：**

显式等待是您定义的代码，用于等待特定条件发生，然后再继续执行代码。如果条件达到，它将终止等待并继续执行进一步的步骤。

代码：

```
 WebDriverWait wait = new WebDriverWait(driver,30);
 wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(strEdit))); 
```

或者

```
 WebElement myDynamicElement = (new WebDriverWait(driver, 30))
 .until(new ExpectedCondition<WebElement>(){
@Override
public WebElement apply(WebDriver d) {
    return d.findElement(By.id("myDynamicElement"));
}}); 
```

这会在抛出 TimeoutException 之前等待最多 30 秒，或者如果它发现元素将在 0 - 30 秒内返回它。默认情况下，WebDriverWait 每 500 毫秒调用一次 ExpectedCondition，直到它成功返回。对于 ExpectedCondition 类型的成功返回是 Boolean 返回 true 或所有其他 ExpectedCondition 类型的非空返回值。

您可以根据应用程序的需要使用 ExpectedConditions 类。

**隐式等待：**

隐式等待是告诉 WebDriver 在尝试查找一个或多个元素时轮询 DOM 一段时间（如果它们不是立即可用的）

代码：

```
 driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

要记住的一件事是，一旦设置了隐式等待 - 它将在 WebDriver 对象实例的生命周期内保持不变

有关更多信息，请使用此链接[http://seleniumhq.org/docs/04_webdriver_advanced.jsp](http://seleniumhq.org/docs/04_webdriver_advanced.jsp)

上面的代码在`Java`. 根据您的语言需要进行更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T21:59:10.533

为了补充上述答案，这是我在 Ruby 中使用隐式和显式等待的方式。

**隐式等待**

在使用如下几行初始化后，我将此选项传递给 Selenium::WebDriver：

```
browser = Selenium::WebDriver.for :firefox
browser.manage.timeouts.implicit_wait = 10 
```

只需将“10”替换为您希望浏览器等待页面刷新和其他此类事件的秒数。

**显式等待**

在 Selenium 中声明显式等待有两个步骤。首先通过声明一个等待对象来设置超时时间，然后使用 Selenium::Webdriver 的 .until 方法调用等待。在您的示例中，它看起来像这样：

```
wait = Selenium::WebDriver::Wait.new(:timeout => 10)
wait.until { browser.find_element(:xpath, "//path/to/picture").displayed? } 
```

这将告诉 Webdriver 最多等待 10 秒以显示图片元素。你也可以使用 .enabled? 如果您正在等待的元素是交互式元素 - 这在您使用基于 Ajax 的输入表单时特别有用。

您还可以在脚本开始时声明一个明确的等待期，然后在需要时再次引用该对象。除非您想设置新的超时，否则无需重新声明它。就个人而言，我喜欢将 wait.until 包裹在一个方法中，因为我知道我会反复引用它。就像是：

```
def wait_for_element_present( how_long=5, how, what )
  wait_for_it = Selenium::WebDriver::Wait.new(:timeout => how_long )
  wait_for_it.until { @browser.find_element(how, what) }
end 
```

（我发现将浏览器声明为实例变量更容易，这样您就不必每次都将它传递给方法，但这部分取决于您，我猜？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-27T19:04:11.037

[Ruby Selenium 绑定](http://docs.seleniumhq.org/docs/04_webdriver_advanced.jsp#explicit-waits)尚不支持 ExpectedConditions 。下面的这个片段与 ExpectedConditions.elementToBeClickable 做同样的事情——可点击只是意味着“可见”和“启用”。

```
element = wait_for_clickable_element(:xpath => xpath)

def wait_for_clickable_element(locator)
  wait = Selenium::WebDriver::Wait.new(:timeout => 10)

  element = wait.until { @driver.find_element(locator) }
  wait.until { element.displayed? }
  wait.until { element.enabled? }

  return element
end 
```

# php - Browscap.ini 问题

> ID：14700134
> 
> 赞同：1
> 
> 时间：2013-02-05T04:17:15.710
> 
> 标签：php

我正在使用 wamp 服务器浏览 youtube 上的 php 教程，但由于遇到问题，我被困在第 67 个视频上。我不断收到此错误消息**“（！）警告：get_browser（）：未设置browscap.ini指令”**

到目前为止我做了什么。

1.  下载 browscap.ini 文件（仅供 PHP 使用）

2.  把它放在“C:/wamp/bin/php/php5.4.3/browscap.ini”

3.  在 PHP.ini 文件中使用绝对路径指向 browscap.ini 文件

[浏览器]

; [http://php.net/browscap](http://php.net/browscap)

browscap = "C:/wamp/bin/php/php5.4.3/browscap.ini"

然后我重新启动了我的 WAMPSERVER，但我仍然遇到问题

**有人可以帮我吗？**

在此先感谢您的帮助

# c - C - 将字符 ASCII 值复制到 64 位整数

> ID：14700136
> 
> 赞同：1
> 
> 时间：2013-02-05T04:17:42.310
> 
> 标签：c, ascii

众所周知，每个可打印字符都有其 ascii 值。我正在尝试将 8 个字符的 ascii 值转换为 64 位整数，但它只复制 32 位。

```
char * ch = "AAAABBBB";
unsigned long int i;

//copy charater's ascii to 64 bits int
memcpy(&i, ch, 8);
printf("integer hold: 0x%x\n", i); 
```

这段代码有问题吗？

我期望的输出是：

```
integer hold: 0x4141414142424242 
```

但输出是：

```
integer hold: 0x41414141 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:19:58.037

如果`unsigned long`确实是 64 位类型（你可以输出`sizeof(unsigned long)`来检查一下），你*仍然*需要使用`%lx`格式字符串来打印它。

如果`unsigned long`是 32 位，您可能不得不求助于`unsigned long long`并使用`%llx`格式字符串。

来自`C11 7.20.6.1 The fprintf function`：

> **o,u,x,X** unsigned int 参数转换为 dddd 样式的无符号八进制 (o)、无符号十进制 (u) 或无符号十六进制表示法（x 或 X）；字母 abcdef 用于 x 转换，字母 ABCDEF 用于 X 转换。精度指定出现的最小位数；如果要转换的值可以用更少的数字表示，则用前导零扩展它。默认精度为 1。精度为零的零值转换的结果是没有字符。
> 
> **l (ell)：**指定后面的 d、i、o、u、x 或 X 转换说明符适用于 long int 或 unsigned long int 参数。
> 
> **ll (ell-ell)：**指定后面的 d、i、o、u、x 或 X 转换说明符适用于 long long int 或 unsigned long long int 参数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T04:19:10.673

`long`与`long long`.

在 VC++ 中，`long`数据类型仍然只有 32 位。

当然，在大多数平台上使用的`printf`格式是 32 位。您想要（或者可能如果您已经是 64 位）。`%x``int``%llx``%lx``long`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T04:31:23.147

%x 用于打印无符号整数值和它的 32 位，这就是你得到这样的结果的原因。

```
%d %i     Decimal signed integer.
%o        Octal integer.
%x %X     Hex integer.
%u        Unsigned integer.
%c        Character.
%s        String.
%f        double
%e %E     double.
%g %G     double.
%p        pointer. 
```

＆如果您想打印剩余数据，请尝试...

```
int *p;
p=(char *)(&i)+4;

printf("integer hold: 0x%x\n", i);
printf("integer hold: 0x%x\n",*p); 
```

# haskell - 如何解释（方程式 a）

> ID：14700140
> 
> 赞同：4
> 
> 时间：2013-02-05T04:17:55.150
> 
> 标签：haskell, parameters, typeclass

我需要创建一个包含两个参数 an`Int`和 a的函数`[Int]`，它返回一个 new`[Int]`并删除了所有出现的第一个参数。

我可以很容易地创建函数，包括列表理解和列表递归。但是，我使用以下参数进行操作：

```
deleteAll_list_comp :: Integer -> [Integer] -> [Integer]
deleteAll_list_rec :: (Integer -> Bool) -> [Integer] -> [Integer] 
```

但是，对于我的任务，我需要的参数是

```
deleteAll_list_comp :: (Eq a) => a -> [a] -> [a]
deleteAll_list_rec :: (Eq a) => a -> [a] -> [a] 
```

我不知道如何阅读这种语法。正如谷歌告诉我的那样，`(Eq a)`只是向 Haskell 解释了这`a`是一种可比较的类型。但是，我不明白这一点，因为所有`Int`s 自然是可比的。如何使用这些参数解释和实现方法？我的意思是，开始的参数到底是什么？

* * *

@groovy @pelotom

谢谢，这很清楚。我现在明白了，实际上它只要求两个参数而不是三个参数。但是，我仍然遇到此代码的问题。

```
deleteAll_list_rec :: (Eq a) => a -> [a] -> [a]
delete_list_rec toDelete [] = []
delete_list_rec toDelete (a:as) =
        if(toDelete == a) then delete_list_rec toDelete as
        else a:(delete_list_rec toDelete as) 
```

这给了我一个“`deleteAll_list_rec` 缺少随附绑定的类型签名”，这对我来说毫无意义，因为我确实正确地绑定了需求，不是吗？根据我的小经验，从中`(a:as)`提取第一个元素时算作一个列表。为什么这会产生错误但是

```
deleteAll_list_comp :: (Eq a) => a -> [a] -> [a]
deleteAll_list_comp toDelete ls = [x | x <- ls, toDelete==x] 
```

才不是？

* * *

2013 年 2 月 7 日更新：对于所有可能在未来偶然发现这篇文章并提出相同问题的人，我在此链接上找到了一些关于 Haskell 的好信息，特别是我的问题：[http://learnyouahaskell .com/types-and-typeclasses](http://learnyouahaskell.com/types-and-typeclasses)

> “有趣。我们在这里看到了一个新的东西，=> 符号。=> 符号之前的所有内容都称为类约束。我们可以像这样阅读前面的类型声明：>equality 函数采用任意两个值相同类型并返回 Bool。这两个值的 >type 必须是 Eq 类的成员（这是类约束）。
> 
> Eq 类型类提供了一个用于测试相等性的接口。任何对测试该类型的两个值之间是否相等有意义的类型都应该是 Eq > 类的成员。除了 IO（处理输入和输出的类型）和函数之外的所有标准 Haskell 类型都是 Eq 类型类的一部分。”

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-05T06:22:11.593

考虑参数的一种方法可能是：

```
(Eq a) => a -> [a] -> [a]

(Eq a) =>   means any a's in the function parameters should be members of the 
            class Eq, which can be evaluated as equal or unequal.*

a -> [a]    means the function will have two parameters: (1) an element of
            type a, and (2) a list of elements of the same type a (we know that 
            type a in this case should be a member of class Eq, such as Num or 
            String).

-> [a]      means the function will return a list of elements of the same 
            type a; and the assignment states that this returned list should 
            exclude any elements that equal the first function parameter, 
            toDelete. 
```

（*根据 pelotom 的评论编辑）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T04:55:35.670

您实现的（确切地说，您认为自己实现的）是一个仅适用于`Integer`s 列表的函数，任务希望您做的是创建一个适用于所有类型列表的函数，前提是它们是相等可比的（这样您的函数也适用于布尔值或字符串列表）。您可能不必进行太多更改：尝试从代码中删除显式类型签名并询问`ghci`它将从您的代码中推断出的类型（`:l yourfile.hs`然后`:t deleteAll_list_comp`）。除非您使用算术运算或类似的东西，否则您很可能会发现您的函数已经适用于所有`Eq a`.

作为一个可以解释这个概念的更简单的例子：假设我们要编写一个`isequal`检查相等性的函数（有点没用，但是嘿）：

```
isequal :: Integer -> Integer -> Bool
isequal a b = (a == b) 
```

这是对 的完美定义`isequal`，但我手动设置的类型约束比它们必须的要强得多。事实上，在没有手动类型签名的情况下，ghci 推断：

```
Prelude> :t isequal
isequal :: Eq a => a -> a -> Bool 
```

这告诉我们该函数将适用于所有输入类型，只要它们是`deriving Eq`，这意味着`==`在它们上定义适当的关系。

* * *

但是，您的函数仍然存在问题`_rec`，因为它应该与您的函数做同样的事情`_comp`，类型签名应该匹配。

# c# - 使用 REST 的 webinvoke 或 webget 时可以忽略 WCF [operationcontract]？

> ID：14700144
> 
> 赞同：1
> 
> 时间：2013-02-05T04:18:26.830
> 
> 标签：c#, wcf, rest

```
[WebInvoke(UriTemplate = "/GetContent", RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
public List<Content> GetContent(string path) {
        return Utility.GetContent(path);
    }

[OperationContract]
[WebInvoke(UriTemplate = "/GetContent", RequestFormat = WebMessageFormat.Json,     BodyStyle = WebMessageBodyStyle.Wrapped)]
public List<Content> GetContent(string path) {
    return Utility.GetContent(path);
} 
```

这两种方法的功能是一样的还是有什么不同？看起来他们都为我工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:31:38.287

OperationContractAttribute 属性声明方法是服务合同中的操作。只有具有 OperationContractAttribute 属性的方法才会公开为服务操作。没有任何方法标记为 OperationContractAttribute 的服务协定不公开任何操作。

# jquery - jQuery 手风琴显示更多页面

> ID：14700147
> 
> 赞同：1
> 
> 时间：2013-02-05T04:18:58.217
> 
> 标签：jquery, jquery-ui-accordion

嗨，我正在尝试动态实现 jQuery 手风琴，它可以工作，但是每个手风琴都包含可扩展的数据，它之前显示了更多页面，这意味着在扩展数据之前，任何机构都可以帮助我，我也在尝试 autoheight。提前致谢

# jquery-ui - jqueryui datepicker输入框的angularjs和值

> ID：14700149
> 
> 赞同：3
> 
> 时间：2013-02-05T04:19:09.890
> 
> 标签：jquery-ui, angularjs

我有一个 jqueryUI 的数据选择器：

```
<div class="span4">
 <label>Start Date; </label>
 <input type="text" name="sDate" id="datepicker1" ng-model="item.date.sDate" class="ng-pristine ng-valid hasDatepicker">
 <label>End Date; </label>
 <input type="text" name="eDate" id="datepicker2" ng-model="item.date.eDate" class="ng-pristine ng-valid hasDatepicker">
 <br> <br>
 <button ng-click="add()" type="submit" class="btn btn-success">Next</button> 
```

日期选择器工作正常，但是当我单击触发添加功能的下一步按钮时，我无法获取 item.date.eDate 值...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T05:53:58.990

我一直在尝试同样的事情，发现我实际上并不需要使用指令，只需这段代码......

```
$.datepicker.setDefaults({
    // When a date is selected from the picker
    onSelect: function(newValue) {
        if (window.angular && angular.element)
            // Update the angular model
            angular.element(this).controller("ngModel").$setViewValue(newValue);
    }
}); 
```

只需将它放在您的初始化代码*之前。*`.datepicker()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:07:42.587

AngularJS 和 jQuery 不能很好地协同工作。您需要使用指令。这是我为您创建的快速示例应用程序版本：

```
<!doctype html> 
<html lang="en">
<head>
  <meta charset="utf-8" />  
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>  
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angular.min.js"></script>
  <script>
    function putObject(path, object, value) {
    var modelPath = path.split(".");

    function fill(object, elements, depth, value) {
        var hasNext = ((depth + 1) < elements.length);
        if(depth < elements.length && hasNext) {
            if(!object.hasOwnProperty(modelPath[depth])) {
                object[modelPath[depth]] = {};
            }
            fill(object[modelPath[depth]], elements, ++depth, value);
        } else {
            object[modelPath[depth]] = value;
        }
    }
    fill(object, modelPath, 0, value);
    }
    var directives = angular.module('myApp', []);

    directives.directive('datepicker', function() {
       return function(scope, element, attrs) {
           element.datepicker({
               inline: true,
               dateFormat: 'dd.mm.yy',
               onSelect: function(dateText) {
                   var modelPath = $(this).attr('ng-model');
                   putObject(modelPath, scope, dateText);
                   scope.$apply();
               }
           });
       }
    });

  function myCtrl($scope) {
        $scope.item = ""
        $scope.add = function() {
            $scope.$apply()
            alert($scope.item)
        }
  }
  </script>
</head>
<body ng-app="myApp">
 <div ng-controller="myCtrl">
{{item}}
<p>Date: <input type="text" datepicker id="datepicker" ng-model="item" /></p>
 <button ng-click="add()" type="submit" class="btn btn-success">Next</button>
 <br />

 </div>
</body>
</html> 
```

查看[http://www.grobmeier.de/angular-js-binding-to-jquery-ui-datepicker-example-07092012.html](http://www.grobmeier.de/angular-js-binding-to-jquery-ui-datepicker-example-07092012.html)以获得更详尽的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-12T21:46:01.180

只需要将其替换`element.datepicker({`为`$(element).datepicker({`

```
directives.directive('datepicker', function() {
       return function(scope, element, attrs) {
           $(element).datepicker({
               inline: true,
               dateFormat: 'dd.mm.yy',
               onSelect: function(dateText) {
                   var modelPath = $(this).attr('ng-model');
                   putObject(modelPath, scope, dateText);
                   scope.$apply();
               }
           });
       }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-11T07:51:05.153

实际上，您不必制作任何内联指令或使用 $.datepicker。我想出的唯一有用的是获取 datepicker 元素的值，而不是通过 ng-model 指令。假设您有 3 个输入，名字、姓氏和出生日期。出生日期输入包含 jquery ui datepicker。获取通过 ng-model 指令输入的名字和姓氏的值<但是获取出生日期的值，只需使用 jquery .val() 函数。

# iphone - 加快 iOS 中的标签文本更改

> ID：14700152
> 
> 赞同：2
> 
> 时间：2013-02-05T04:19:31.313
> 
> 标签：iphone, ios, tcp, nsstring

*   我的程序有效
    1.  使用 CocoaAsyncSocket (TCP) 发送字节
    2.  获取响应（字节数据）
    3.  将字节数组更改为有效数据（int / nsstring / etc）
    4.  用它更改标签文本（步骤 3）

我放了一个 NSLog 并观看了。日志显示几乎很快，我的功能（更改标签文本）运行良好。但是，我可以在大约 4~5 秒后在模拟器上看到更改标签的文本，然后调用函数。

我的第一种方法是这样

*   获取字节数组 - 拆分为 nsdata - 更改为 nsstring - 输入数组 - 获取字符串 - 添加子字符串（如 '000%' 或 '000 sec'） - 更改标签文本

第二是

*   获取字节数组 - 拆分 - 更改为 nsstring - 调用函数（添加子字符串 - 更改标签文本）

嗯...我怎样才能提高它的变化速度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T04:43:04.970

更改标签文本应该“几乎立即”发生，当它需要这么长时间时，通常是由于没有更新主线程上的标签文本。它是一个 UIKit 对象，因此只能在主线程上修改。

采用：

```
dispatch_async(dispatch_get_main_queue(), ^{
    self.label.text = myString;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:00:53.783

从日历中以几乎相同的延迟获取事件时，我遇到了类似的问题。如果 Inafziger 的建议对您不起作用，我建议`performSelectorOnMainThread:`在“第 3 步”中使用并调用一种方法来更新您的标签。

```
[self performSelectorOnMainThread:@selector(yourMethodToUpdateLabels) withObject:nil waitUntilDone:NO]; 
```

它对我的情况很有用。希望能帮助到你。:)

# python - 在 Python 字符串中逐字识别 \

> ID：14700157
> 
> 赞同：1
> 
> 时间：2013-02-05T04:19:56.350
> 
> 标签：python

我正在尝试检索字符串中每个子字符串的索引列表。该字符串在字符串的不同位置多次包含特殊字符 \。\ 应该被识别为一个字符，而不是一个特殊字符。当我获得子字符串的起始索引时，它会跳过 \ 并返回比应有的索引少一个索引。任何有关如何做到这一点的帮助将不胜感激。

```
text = "ab\fx*abcdfansab\fasdafdab\f664s"
for m in re.finditer( 'ab\f', text ):
print( 'll found', m.start(), m.end() ) 
```

('会找到', 0, 3) ('会找到', 13, 16) ('会找到', 22, 25)

第二个索引应该是 (14, 17) 和第三个 (24, 27)。另外，我不确定为什么第一个是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T04:24:20.320

`\`与许多其他编程语言一样，Python 将 解释为转义字符。如果你想要一个文字反斜杠，请使用[原始字符串](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)，并且`\`在模式中加倍，因为[反斜杠是一个正则表达式元字符](http://www.regular-expressions.info/characters.html#special)：

```
>>> text = r'ab\fx*abcdfansab\fasdafdab\f664s'
>>> for m in re.finditer( r'ab\\f', text ):
...    print( 'll found', m.start(), m.end() )
...
('ll found', 0, 4)
('ll found', 14, 18)
('ll found', 24, 28) 
```

或者，[将反斜杠加倍，不要使用原始字符串](http://www.regular-expressions.info/python.html)。同样，请记住在正则表达式中双重转义。

```
>>> text = 'ab\\fx*abcdfansab\\fasdafdab\\f664s'
>>> for m in re.finditer( 'ab\\\\f', text ):
...     print( 'll found', m.start(), m.end() )
... 
('ll found', 0, 4)
('ll found', 14, 18)
('ll found', 24, 28) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:56:15.217

要查找子字符串的非重叠出现：

```
haystack = r"ab\fx*abcdfansab\fasdafdab\f664s" # raw-literal to interpret
                                               # the backslash literally
needle = r"ab\f"
n = len(needle)
i = -n
while True:
    i = haystack.find(needle, i+n)
    if i == -1:
        break
    print((i, i+n)) 
```

或使用正则表达式：

```
import re

print("\n".join(str((m.start(), m.end()))
                for m in re.finditer(re.escape(needle), haystack))) 
```

两者都产生相同的输出：

```
(0, 4)
(14, 18)
(24, 28) 
```

# syntax-error - 为什么我在识别部门出现错误？

> ID：14700159
> 
> 赞同：0
> 
> 时间：2013-02-05T04:20:00.093
> 
> 标签：syntax-error, cobol, gnucobol

以下代码：

```
IDENTIFICATION DIVISION.
PROGRAM-ID. tester.

PROCEDURE DIVISION.
greet_program.
   DISPLAY "HELLO WORLD !".
STOP RUN. 
```

产生一个编译器错误，它说：`Error: syntax error, unexpected WORD, expecting PROGRAM_ID`

我无法发现错误。它在哪里 ？

该程序的错误在[***ideone中列出***](http://ideone.com/rcwv6z)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:42:34.273

您正在使用传统的“固定”Cobol 布局选项进行编译。

这意味着您需要以七个空格开始每一行。

您应该问自己为什么第一个错误消息提到第 7 列。您还可以找到一些 Cobol cobde 示例并将其与您的进行比较。您可以通过 Google 找到其他做过同样事情的人。

# c# - 如何提供与维基百科相同的单词的链接

> ID：14700161
> 
> 赞同：-3
> 
> 时间：2013-02-05T04:20:12.667
> 
> 标签：c#, asp.net, sql-server-2005

因为我想制作一个像维基百科这样的应用程序......我已经尝试过使用普通的 asp.net web 应用程序......不可能提供任何给定段落的单词的链接......它只能通过使用 wiki 之类的dotnetwiki、screwturn wiki 等...

有没有其他工具呢。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:36:14.830

我花了 5 分钟阅读您的问题，我认为您所追求的词是：**Wiki links**。

在大多数 wiki 中，您将双方括号放在您希望成为其他页面链接的单词周围。

```
[[Programming]] 
```

我研究了一些好的解决方案，我建议您合并/研究其中一个库并将代码放入您的项目中。

**Roadkill .NET Wiki 引擎：**

*   免费、开源 (Ms-PL)
*   基于向导的安装程序
*   支持 Creole、Markdown 和 Media Wiki 语法
*   默认情况下，数据库和 Active Directory 的安全性
*   非常容易主题化：默认带有 mediawiki 主题
*   带有螺旋转进口器

**DotNetWiki**
DotNetWiki 是一个在 Asp.Net 和 SQL Server 上运行的简单 wiki 引擎。它的目的是提供一个简单的 wiki 引擎，该引擎可以轻松部署，易于修改并提供一些基本的身份验证功能。特征：

*   高度可剥皮
*   在 Asp.Net 2.0 上运行
*   使用 SQL Server 数据库
*   使用 Asp.Net Membership Providers 进行身份验证
*   允许您锁定页面
*   支持谷歌分析

**Thufir**
它类似于 Wiki-Wiki，但具有所见即所得的界面。

**FlexWiki**
FlexWiki 是一个协作文本环境 Wiki 的实现。

**DevHawk Wiki**
.NET 的 Wiki 实现。

**Perspective Wiki Engine**
Perspective 是一个 Wiki 引擎，包括所见即所得编辑和多种安全模型（包括使用 Windows 域和 Active Directory 的身份验证）。支持附件。支持对常见文件格式进行搜索：特定的 MS Office 文档。

**ProntoWiki**
ProntoWiki 是用 C# 和 VWD（Visual Web Developer）编写的 wiki 引擎/站点，使用 ASP.NET 2.0 和 SQLExpress 2005 作为后端。wiki 引擎快速且易于使用，并允许与富文本编辑器等效的文本标记。它通过网络界面自动接受图像和文件附件。其他功能包括发布/更新之前的页面预览、基于角色的用户身份验证、使用 Web 部件的可定制外观和布局、历史跟踪和搜索功能。

**维基百科**
Deki Wiki 是一个面向社区和企业的免费开源 wiki 和应用平台。MindTouch DekiWiki 的开发强调可用性、开放标准、可扩展性和性能。DekiWiki 最初是一个 MediaWiki 分支，在多个垂直领域和使用场景中进行了一年半的 beta 测试：制造、教育、非营利、交互设计、软件设计和开发等。基于来自 beta 用户的输入，DekiWiki 发展成为一个远远超过另一个 wiki 的东西。它有助于在上下文丰富的环境中共享信息，这使得知识捕获和共享比传统的 Intranet 工具、网络文件服务器、CMS 和任何其他 wiki 更好。MindTouch DekiWiki 拥有最全面的功能集，其中包括丰富的所见即所得编辑器，可索引和可​​搜索的页面级文件附件、分层信息组织、图像库、信息发现工具（RSS 提要和 Web 界面）、页面和文件版本控制、页面差异、页面级权限、基于时间的访客邀请、浏览 wiki 链接对话框，就地图像，所有数据都存储在 XML 中。此外，所有控制逻辑都被移植到 MindTouch 的 Dream Framework，这是一个 .NET/Mono 分布式应用程序管理器。

**旋风维基**
ScrewTurn Wiki 是一个高性能且简单的 Wiki 引擎，用 C# 编写，基于 ASP.NET 2.0 平台。主要特点： - 无需数据库 - 无需接触 IIS 或 ASP.NET 配置 - 由于智能和可配置的内容缓存系统，每个硬件配置都具有高性能和可扩展性 - 由于（可配置），带宽使用率低使用自定义 ViewState 压缩和 HTTP 压缩 - 简单的部署、管理和使用 - 占用空间极小 - 完全通过 CSS 文件提供主题（完全支持 CSS 媒体类型） - 自动页面备份（执行回滚就像单击鼠标一样简单） - 具有管理员和简单用户（通过电子邮件帐户激活）和内置管理员帐户的安全用户会计系统 - 有用的功能，例如每页授权，

**MindTouch DekiWiki**
MindTouch Deki Wiki 是面向社区和企业的免费开源 wiki 和应用平台。Deki Wiki 是一个易于使用且复杂的 wiki，用于创作、聚合、组织和共享内容。Deki Wiki 也是一个用于创建协作应用程序或将 wiki 功能添加到现有应用程序的平台。

# php - 插入数据库时 出错..在 php 5.3.1 中工作正常，但在 5.2.17 中出错

> ID：14700162
> 
> 赞同：-2
> 
> 时间：2013-02-05T04:20:15.037
> 
> 标签：php

```
function insertVisitorInfoSignIn($att_id, $card_no, $purpose, $block, $level, $staff_email, $pa_email, $staff_id,$dept_id){
    $time_in = getTime();
    $sql = "insert into visitor_history (att_id, card_no, time_in, purpose, block, level, staff_email, pa_email, staff_id,dept_id) 
            values ($att_id, '$card_no', '$time_in', '$purpose', '$block', '$level', '$staff_email', '$pa_email', $staff_id,$dept_id)";

    $rs = mysql_query($sql) or die ("Error in function insertVisitorInfoSignIn ");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:23:50.600

这就是你正在使用的：

```
$sql = "insert into visitor_history 
            ( att_id, card_no, time_in, purpose, block, 
              level, staff_email, pa_email, staff_id, dept_id) 
        values ( $att_id, '$card_no', '$time_in', '$purpose', '$block', 
                 '$level', '$staff_email', '$pa_email', $staff_id, $dept_id)"; 
```

应该是这样的：

```
$sql = "insert into visitor_history 
          ( att_id, card_no, time_in, purpose, block, 
            level, staff_email, pa_email, staff_id,dept_id) 
        values ( '$att_id', '$card_no', '$time_in', '$purpose', '$block', 
                 '$level', '$staff_email', '$pa_email', '$staff_id', '$dept_id')"; 
```

通过变量传递值时，您在查询中错过了`''`一些变量。

我们建议您使用它`mysql_real_escape_string()`来防止您的数据库被 SQL 注入，并尝试使用 mysqli 或 PDO，因为不推荐使用 mysql 扩展。

# ruby-on-rails - Rails 中使用 MWS-Connect gem 的亚马逊 MWS 订单取消请求

> ID：14700175
> 
> 赞同：0
> 
> 时间：2013-02-05T04:21:58.377
> 
> 标签：ruby-on-rails, amazon-mws

我是 Rails 的新手（但一般来说对 Web 开发并不陌生）。我正在使用 mws-connect gem ( [https://github.com/devmode/mws](https://github.com/devmode/mws) ) 连接到 Amazon Marketplace Web Service。我正在尝试取消订单，根据亚马逊 MWS API 文档，需要发送以下 xml 代码（据我所知）：

```
<?xml version="1.0"?> 
     <AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd"> 
        <Header> 
            <DocumentVersion>1.01</DocumentVersion> 
            <MerchantIdentifier> M_IDENTIFIER</MerchantIdentifier> 
        </Header> 
        <MessageType>
            OrderAcknowledgment
        </MessageType> 
        <Message> 
            <MessageID>1</MessageID> 
            <OrderAcknowledgement> 
                <AmazonOrderID>050-1234567-1234567</AmazonOrderID> 
                <StatusCode>Failure</StatusCode> 
                <CancelReason>Reason for cancellation</CancelReason>
            </OrderAcknowledgment> 
        </Message> 
    </AmazonEnvelope> 
```

gem 文档并不清楚如何执行此操作，因为这些示例都是关于如何添加或更新产品列表的，我对其进行了测试并且工作正常。我已经尝试了所有我能想到的方法来手动构建“提要”请求来提交它，并使用类的其余部分来处理提交的东西，因为我知道这是可行的。我在 SalesOrder 类中的当前代码示例是：

```
def self.cancel_amazon_order(amazon_order_id, cancel_reason)
  mws = Mws.connect(
    merchant: 'merchant_id',
    access: 'access_key',
    secret: 'secret'
  )
  cancel_feed = Mws::Feed.new 'merchant_id', :order_acknowledgement do
    @messages << {
      MessageID: '1',
      OrderAcknowledgement: {
        AmazonOrderID: amazon_order_id,
        StatusCode: 'Failure',
        CancelReason: cancel_reason
      }
    }
  end
end 
```

此代码不会引发任何错误，但是当我尝试这样做时`cancel_feed.to_xml`（我可以看到是提交提要的下一步），我收到一条错误消息

> ArgumentError：尚未定义命名空间缩进

是否有任何 Rails 专业人士可能知道如何使这个 gem 工作，无论是 to_xml 方法，还是更好的如何让取消本身通过？我觉得我离得不远了。我来自 PHP 背景，所以我对此的思考过程可能有点偏离。到目前为止，我一直很喜欢 Rails，但我在这个上拔了头发，感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T19:16:15.377

如果有人感兴趣，我最终得到的解决方案是：

```
mws = Mws.connect merchant: AMAZON_CONFIG['merchant_id'], access: AMAZON_CONFIG['access'], secret: AMAZON_CONFIG['secret']

cancel_xml = Nokogiri::XML::Builder.new do | xml |
  xml.AmazonEnvelope('xmlns:xsi' => 'http://www.w3.org/2001/XMLSchema-instance', 'xsi:noNamespaceSchemaLocation' => 'amznenvelope.xsd') {
    xml.Header {
      xml.DocumentVersion '1.01'
      xml.MerchantIdentifier AMAZON_CONFIG['merchant_id']
    }
    xml.MessageType 'OrderAcknowledgement'
    xml.Message {
      xml.MessageID '1'
      xml.OrderAcknowledgement {
        xml.AmazonOrderID order_id
        xml.StatusCode 'Failure'
        items.each do | item |
          xml.Item {
            xml.AmazonOrderItemCode item[:item_code]
            xml.CancelReason 'NoInventory'
          }
        end

      }
    }
  }
end.to_xml

mws.feeds.submit cancel_xml, {feed_type: :order_acknowledgement} 
```

# c++ - 为什么添加空格会使编译器进入无限循环？

> ID：14700181
> 
> 赞同：1
> 
> 时间：2013-02-05T04:22:43.553
> 
> 标签：c++, arrays, loops, struct

案例 3 是向结构中添加书籍的选项。只要添加了标题不带空格的书，就可以了，每当我尝试输入包含空格的名称时，编译器就会发疯，就像执行无限循环时会发生的那样。为什么以及解决方案是什么？

```
struct bookStruct
{
    string bookTitle;
    int bookPageN;
    int bookReview;
    float bookPrice;
};

const int MAX_BOOKS=10;

case 3:
        {
            for(int i=0;i<MAX_BOOKS;i++)
            {
                if(books[i].bookTitle=="\0")
                {
                cout << "\nPlease Enter the Title: ";
                cin >> books[i].bookTitle ;
                cout << "\nPlease Enter Total Number of Pages: ";
                cin >> books[i].bookPageN ;
                cout << "\nPlease Enter Rating (stars): ";
                cin >> books[i].bookReview ;
                cout << "\nPlease Enter Price: ";
                cin >> books[i].bookPrice;
                cout << "\n\nBook Added.\n\n";
                break;
                }
            }break;

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T04:24:14.737

输入操作符`>>`在读取字符串时停在空格处。
您要使用的是[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline).

```
cout << "\nPlease Enter the Title: ";
std::getline(std::cin, books[i].bookTitle); 
```

读取数字时的输入运算符`>>`也将停在空格或换行符处（将它们留在输入流上）。因此，当您翻到下一本书时，输入流上仍然有一个 '\n' 字符。因此对于数字，您还需要使用 std::getline()。但在这种情况下，您需要将值转换为整数。

```
cout << "\nPlease Enter Total Number of Pages: ";
std::string line;
std::getline(std::cin, line);

std::stringstream linestream(line);
linestream >> books[i].bookPageN ; 
```

# ruby-on-rails - Rails 仅在指定的控制器上强制使用 ssl

> ID：14700182
> 
> 赞同：4
> 
> 时间：2013-02-05T04:22:51.977
> 
> 标签：ruby-on-rails, ruby, ssl

我有一个服务于[https://secure.mydomain.com](https://secure.mydomain.com)的 ssl 证书。我只想在某些控制器上使用 ssl，而不是在整个应用程序中使用。我在网上查看过，似乎找不到关于如何为指定控制器启用 ssl 的完整且准确的教程。

我知道我可以使用下面的配置 ssl，但它并没有为我服务，因为它启用了 ssl 站点范围

```
config.force_ssl = true 
```

我如何告诉 Rails 只在特定控制器上使用 ssl 而不是我的整个应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T04:26:50.017

您可以使用 routes.rb 中的约束来执行此操作：

```
resource :account, :constraints => { :protocol => "https", :subdomain => "secure" } 
```

此外，如果您有许多安全路线，并且您想干掉事情，您可以`scope`为您的安全路线创建一个：

```
scope :constraints => { :protocol => "https", :subdomain => "secure" } do

  ...[secure routes]...

end 
```

# node.js - 通过 Elastical (node.js) 设置 ElasticSearch geo_point Mapper 类型

> ID：14700187
> 
> 赞同：0
> 
> 时间：2013-02-05T04:23:11.740
> 
> 标签：node.js, elasticsearch

我一直在挖掘[Elastical](https://github.com/ramv/node-elastical)资源，试图弄清楚在创建索引时如何设置核心类型。具体来说，我需要将一个字段设置为 geo_point 字段。

在[Mongoosastic 中](http://jamescarr.github.com/mongoosastic/)，我只是在我的模式上设置了 es_type 字段，但我不知道如何在 Elastical 中做同样的事情。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:35:46.483

看起来我在寻找“putMapping”功能。

```
elastical.putMapping(index, type, {'type': {'properties': {"coords" : {"type" : "geo_point", "store": "yes"}}}}, function(e,r){}); 
```

# c - “声明说明符中的两个或多个数据类型”错误是什么意思？

> ID：14700188
> 
> 赞同：0
> 
> 时间：2013-02-05T04:23:13.020
> 
> 标签：c, compiler-errors, declaration, format-specifiers

```
#include <stdio.h>
typedef int nt;
void main () {
  long int k;
} 
```

当我在 gcc 中运行上述代码时，它没有显示任何错误。但是当我运行下面的代码时，它会抛出一条错误消息“声明说明符中有两种或多种数据类型”。

```
#include <stdio.h>
typedef int nt;
void main () {
  long nt k;
} 
```

谁能解释一下这个错误是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T04:25:22.160

`typedef`s 创建*完整*的类型。

你不能组成一个类型 out`long`和一个 typedef。

# vba - VBA DoCmd.TransferText - 使用用户定义的文件路径将查询导出到 .csv

> ID：14700192
> 
> 赞同：12
> 
> 时间：2013-02-05T04:23:40.357
> 
> 标签：vba

目前我的代码是这样的：

```
Dim testSQL As String
Dim qd As DAO.QueryDef

testSQL = "SELECT * FROM qryExample WHERE exampleID IN (" & strExampleIDList & ")"
Set qd = db.CreateQueryDef("tmpExport", testSQL)
DoCmd.TransferText acExportDelim, , "tmpExport", "C:\export.csv"
db.QueryDefs.Delete "tmpExport" 
```

如何更改“C:\export.csv”部分，以便用户能够定义文件路径和文件名？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T04:28:59.273

假设您希望提示用户输入，然后在 TransferText 调用中使用该输入，请尝试以下操作：

```
Dim UserInput As String
UserInput  = InputBox("Please enter the file path.", "I WANT A VALUE!") 
DoCmd.TransferText acExportDelim, , "tmpExport", UserInput 
```

还有其他方法，但这可能是最容易实现的。

祝你好运。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-27T14:33:06.757

此示例将允许您使用 filedialog Save-As 对象：

要使用此功能，您必须添加对“Microsoft Office XX.0 对象库”的引用。添加一个新模块并粘贴以下函数：

```
 Public Sub exportQuery(exportSQL As String)
    Dim db As DAO.Database, qd As DAO.QueryDef
    Dim fd As FileDialog
    Set fd = Application.FileDialog(msoFileDialogSaveAs)

    Set db = CurrentDb

    'Check to see if querydef exists
    For i = 0 To (db.QueryDefs.Count - 1)
        If db.QueryDefs(i).Name = "tmpExport" Then
            db.QueryDefs.Delete ("tmpExport")
            Exit For
    End If
    Next i

    Set qd = db.CreateQueryDef("tmpExport", exportSQL)

    'Set intial filename
    fd.InitialFileName = "export_" & Format(Date, "mmddyyy") & ".csv"

    If fd.show = True Then
        If Format(fd.SelectedItems(1)) <> vbNullString Then
            DoCmd.TransferText acExportDelim, , "tmpExport", fd.SelectedItems(1), False
        End If
    End If

    'Cleanup
    db.QueryDefs.Delete "tmpExport"
    db.Close
    Set db = Nothing
    Set qd = Nothing
    Set fd = Nothing

    End Sub 
```

现在在您要开始导出的代码中，使用：调用 exportQuery("SELECT * FROM...")

我建议为您的 SQL 查询定义一个字符串变量。

```
 Public Sub someButton_Click()
    Dim queryStr as String
    'Store Query Here:
    queryStr = "SELECT * FROM..."

    Call exportQuery(queryStr)

    End Sub 
```

# python - python gae阻止访问mac或linux上的静态文件，但不是windows

> ID：14700194
> 
> 赞同：1
> 
> 时间：2013-02-05T04:23:57.373
> 
> 标签：python, google-app-engine, app.yaml

我在从 Windows 转换到 linux 或 mac 开发环境时遇到问题。我已经尝试过 linux 和 max 来调试我遇到的问题。

我有一个在 Windows 本地工作的小型 gae python 项目。但是在我将它移到 linux 或 windows 之后，我收到一个错误，上面写着

```
Blocking access to static files "/home/name/WSR/src/__init__.py" 
```

这是我的 app.yaml 文件的副本

```
application: service-app 
version: 3
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /common
  static_dir: common

- url: /WSR
  static_dir: WSR

- url: /admin/.*
  script: WSR.admin.main.app

- url: /admin
  script: WSR.admin.main.app

- url: /requestService
  script: WSR.com.main.app

- url: /submitInquiry
  script: WSR.com.main.app

- url: /test
  script: WSR.com.test.app

- url: /.*
  script: WSR.com.main.app  

libraries:
- name: jinja2
  version: latest 
```

我相信问题来自

```
- url: /WSR
  static_dir: WSR 
```

我这里有一堆python代码/html代码/javascript和css。

# java - 如何在同一个屏幕上拥有一个按钮和一个自定义绘制视图？安卓

> ID：14700195
> 
> 赞同：0
> 
> 时间：2013-02-05T04:24:13.347
> 
> 标签：java, android, listener, paint

我对android很陌生，正在尝试构建一个应用程序，用户可以在其中绘制字母，按下连接读取它的服务的按钮，然后将字母显示回给他们。

这是我的主要布局：！（[http://i58.photobucket.com/albums/g271/billmoney3/layout_zps71eb45ca.jpg](http://i58.photobucket.com/albums/g271/billmoney3/layout_zps71eb45ca.jpg)）

我希望用户能够在蓝色区域绘制。我将蓝色区域设置为一个名为 InnerDrawingView 的自定义视图。我需要有关如何组织视图和 OnTouchListener 的帮助。

现在我有这个java代码：

```
public class DoodleActivity extends Activity {

Button confirmButton;
EditText drawingResult;
InnerDrawingView innerView;

// on create
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_doodle);    // main layout

    // where the drawing happens
    innerView = (InnerDrawingView) findViewById(R.id.innerDrawingView1);
    innerView.setOnTouchListener(handleTouch);
            ...
            ...

// handle the touching of the inner view
private OnTouchListener handleTouch = new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        drawingResult.setText("O RLY?!");       // just a test
        return true;
    }
}; // end of class 
```

这是正确的方法吗？我在 InnerDrawingView 类中放置了什么样的触摸监听器？我可以从主要活动的 onTouch() 内部调用：innerView.onTouch() 吗？还是 onDraw() 方法？如果有人可以指导我学习一个好的绘画教程，那也会对我有很大帮助。

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:37:42.353

您需要从“事件”对象中提取 x 和 y。然后代码取决于您的需要。您可以将一个新点与前一个点连接起来（以进行分段），或者将其放入列表中。伪代码：

```
public boolean onTouch(View v, MotionEvent event) {
    innerView.submitNewPoint(event.getX()), event.getY());
    return true;
} 
```

如果要处理多点触控事件，您需要检索点数（ event.getPointerCount() ）并使用 event.getX(i)/event.getY(i) 中的坐标执行某些操作（i - 多点触控事件的索引观点）。

当然，您需要实现点/线段的绘制/？InnerDrawingView 中的列表。

PS不要忘记将您的字段设为私有；）

# jquery - jquery数据表显示格式

> ID：14700207
> 
> 赞同：-1
> 
> 时间：2013-02-05T04:25:56.637
> 
> 标签：jquery, html

我正在使用 jquery 数据表，我需要在不同的行中显示标题。例子：

```
 "aoColumns" : [
                {'sTitle' : 'SI Number' },
                {'sTitle' : 'user'},
                {'sTitle' : 'Status'}
                ] 
```

因此它将以以下格式显示表格..

```
 **SI Number    user    Status** 
```

但我需要按以下格式打印。

```
 SI Number      ****  ****

           User          *****    ****

           Status        *****    **** 
```

有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:39:53.063

I am afraid that if you use jquery datatables, that you doesn't provide any API for you to do this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:32:20.007

尝试这个：

```
var aoColumns = [{'sTitle' : 'SI Number' },{'sTitle' : 'user'},{'sTitle' : 'Status'}];
$(aoColumns).each(function(){
    console.log($(this)[0].sTitle+"       ****      *****");
}); 
```

检查小提琴[http://jsfiddle.net/9ceat/](http://jsfiddle.net/9ceat/)

# ruby-on-rails - 在 AngularJS 中使用 money-rails

> ID：14700210
> 
> 赞同：1
> 
> 时间：2013-02-05T04:26:13.403
> 
> 标签：ruby-on-rails, angularjs

我正在将我的 Rails 3.2 应用程序中的一些表单转换为使用 AngularJS，以便我可以进行实时计算等。在我的 rails 应用程序中，我使用[money-rails](https://github.com/RubyMoney/money-rails)来处理货币。这将所有货币字段视为由美分组成的整数。

当我通过 JSON 将所有信息发送到我的 AngularJS 模板时，这会成为一个问题。现在，当我想要美元和美分时，我的表格都是美分。

我已将转换放在我的 AngularJS 控制器中，因此当我从服务器获取数据时，我将其从美分转换为美元和美分，反之亦然，然后再更新。这是代码：

```
# Edit Investor
window.InvestorEditCtrl = ($scope, $routeParams, $location, Investor, Common) ->
  console.log 'InvestorEditCtrl'

  # Setup variable for common services(factory)
  $scope.common = Common

  $scope.master = {}  # Initialise our main object hash
  investor_id = $routeParams.investor_id   # Get the ID of the investor we are editing from the URL

  # Get the investor information & assign it to the scope master object
  console.log 'Get JSON'
  $scope.investor = new Investor.show({investor_id: investor_id}, (resource) ->
    # copy the response from server response (JSON format) to the scopes master
    $scope.master = angular.copy(resource)

    # Convert price_cents to dollars
    $scope.investor.price_cents /= 100
  )

  # Update the investor passing the JSON back to the server.    
  $scope.update = (investor) ->

    # Convert price_cents to cents
    investor.price_cents *= 100

    $scope.master = angular.copy(investor)

    investor.$update({investor_id: investor_id}, (t) ->
      $location.path('/investors/' + t.id)
    ) 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:29:03.137

您可以编写过滤器或指令，将其转换为您想要的 HTML 格式。过滤器看起来像这样：

```
app.filter('centsToDollars', function() {
  return function(input) {
    var out = input / 100;
    return out;
  }
}); 
```

然后，在您的 html 中，无论您希望在哪里显示美分和美分，都可以这样称呼它：

```
<p>{{investor.price_cents | centsToDollars}}</p> 
```

过滤器只会影响数据的显示，不会将基础数据修改为美分。

如果您需要修改输入字段的显示，更好的路线可能是指令。你可以做类似[这里引用的事情](https://stackoverflow.com/questions/11616636/how-to-do-two-way-filtering-in-angular-js)

```
app.directive('myCentsToDollars', function() {
  return {
    restrict: 'A',
    require: 'ngModel',
    link: function(scope, elem, attrs, ngModel) {
      var toDollars = function(text) {
        var text = (text || "0");
        return (parseFloat(text) / 100);
      }
      var toCents = function(text) {
        var text = (text || "0");
        return (parseFloat(text) * 100);
      }

      ngModel.$parsers.push(toDollars);
      ngModel.$formatters.push(toCents);
    }
  }
}); 
```

然后，在您的 html 中，执行以下操作：

```
<input type="text" my-cents-to-dollars ng-model="investor.price_cents" /> 
```

# android - 数据库最大10个并根据score排序，如果score最低则删除替换

> ID：14700212
> 
> 赞同：-1
> 
> 时间：2013-02-05T04:26:36.880
> 
> 标签：android, sql, sqlite

大家好，我正在创建游戏，我是 sql lite 的新手。我有一个用于插入数据库的代码，但我不知道如何将其最大化为 10，而且我也不知道如何将玩家的新分数与旧分数进行比较。另外，如果新分数击败前 10 名中的 1 名，我如何删除前 10 名中得分最低的。我正在寻找具有良好解释的出色代码，以便我了解代码流程。

这是我的数据库类：

```
 public class highscore {

 private static final String DATABASE_NAME = "topscoredb";
 private static final String DATABASE_TABLE = "tablescore";
 private static final int DATABASE_VERSION = 2;
 public static final String KEY_ROWID = "_id";
 public static final String KEY_SCORE = "score";
 public static final String KEY_NAME = "players_name";

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub

        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                     KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                     KEY_NAME + " TEXT NOT  NULL, " +
                     KEY_SCORE + " TEXT NOT NULL);"

                );

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion,
                int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXIST" + DATABASE_TABLE);
            onCreate(db);

        }
 }

   public highscore(Context c){
  ourContext = c;
  }

 public highscore open() throws SQLException{
 ourHelper = new DbHelper(ourContext);
 ourDatabase = ourHelper.getWritableDatabase();

  return this;

 }

  public void close(){
   ourHelper.close();

    }

   public long createEntry(String name, String tscore) {
// TODO Auto-generated method stub

  ContentValues cv = new ContentValues();
  cv.put(KEY_NAME, name);
  cv.put(KEY_SCORE, tscore);
 return  ourDatabase.insert(DATABASE_TABLE, null, cv);
}

 public String getData() {
String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_SCORE};
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,null, null);
String result = "";

int irow = c.getColumnIndex(KEY_ROWID);
int iname = c.getColumnIndex(KEY_NAME);
int iscore = c.getColumnIndex(KEY_SCORE);

for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
    result = result + c.getString(irow)+ " " +c.getString(iname)+" "+ 
c.getString(iscore) + "\n";
     }

return result;
    }

    } 
```

我应该使用方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:31:06.813

好吧，android 使用 sqlite，您可以使用[限制 sqlite Table's Maximum Number of Rows](https://stackoverflow.com/questions/2035670/limit-an-sqlite-tables-maximum-number-of-rows?rq=1)中的解决方案。

您也可以按降序获取结果

```
ourDatabase.query(DATABASE_TABLE, columns, null, null, null,null,KEYSCORE + " DESC"); 
```

并显示前 10 个结果。

或使用 SQlite 查询构建器方法来限制结果 [http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html#query(android.database.sqlite.SQLiteDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html#query(android.database.sqlite.SQLiteDatabase) , java.lang.String[], java.lang.String, java.lang.String[], java.lang.String, java.lang.String, java.lang.String, java.lang.String)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T04:36:15.490

我们可以将所有分数存储在数据库中并编写一个查询以获得前十个最高分数......

select * from ( select empno , sal , rank() over (order by sal desc) as rnk from emp where rnk <= 5);

# sql - 如何使用 TSQL 从字符串中提取数字

> ID：14700214
> 
> 赞同：4
> 
> 时间：2013-02-05T04:26:55.530
> 
> 标签：sql, sql-server, sql-server-2008, tsql, parsing

我有一个字符串：

`@string='TEST RESULTS\TEST 1\RESULT 1`

除数字外，字符串/文本保持不变

1.  需要来自 TEST 的 1
2.  需要 1 来自 RESULT

用于如下查询：

```
SET @sql =  "SELECT *
            FROM   TABLE
            WHERE  test = (expression FOR CASE 1 resulting IN INT 1)
                   AND result = (expression FOR CASE 2 resulting IN INT 1)" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T15:24:05.003

看起来您已经有了满足您需求的解决方案，但我有一个小技巧可以用来从字符串中提取数字，我认为这可能会使某人受益。它利用 FOR XML 语句并避免显式循环。它是一个很好的内联表函数或简单的标量。随心所欲地使用它:)

```
DECLARE @String varchar(255) = 'This1 Is2 my3 Test4 For Number5 Extr@ct10n';

SELECT
    CAST(( 
        SELECT CASE --// skips alpha. make sure comparison is done on upper case
            WHEN ( ASCII(UPPER(SUBSTRING(@String, Number, 1))) BETWEEN 48 AND 57 )
            THEN SUBSTRING(@String, Number, 1)
            ELSE ''END
        FROM
        ( 
            SELECT TOP 255 --// east way to get a list of numbers
                                           --// change value as needed.
                ROW_NUMBER() OVER ( ORDER BY ( SELECT 1 ) ) AS Number
             FROM master.sys.all_columns a
                CROSS JOIN master.sys.all_columns b 
        ) AS n
        WHERE Number <= LEN(@String)
        --// use xml path to pivot the results to a row
        FOR XML PATH('') ) AS varchar(255)) AS Result 
```

结果 ==> 1234510

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-18T10:05:45.823

您可以编写一个可通过搜索查询使用的 sql 函数。这是示例代码。

```
CREATE FUNCTION udf_extractInteger(@string VARCHAR(2000))
RETURNS VARCHAR(2000)
    AS

    BEGIN
        DECLARE @count int
        DECLARE @intNumbers VARCHAR(1000)
        SET @count = 0
        SET @intNumbers = ''

        WHILE @count <= LEN(@string)
        BEGIN 
            IF SUBSTRING(@string, @count, 1)>='0' and SUBSTRING (@string, @count, 1) <='9'
                BEGIN
                    SET @intNumbers = @intNumbers + SUBSTRING (@string, @count, 1)
                END
            SET @count = @count + 1
        END
        RETURN @intNumbers
    END
    GO 
```

询问 ：

```
SELECT dbo.udf_extractInteger('hello 123 world456') As output 
```

输出：123456

参考自：[http ://www.ittutorials.in/source/sql/sql-function-to-extract-only-numbers-from-string.aspx](http://www.ittutorials.in/source/sql/sql-function-to-extract-only-numbers-from-string.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T04:49:30.640

由于您有稳定的文本并且只有 2 个元素，因此您可以充分利用[replace](http://msdn.microsoft.com/en-us/library/ms186862.aspx)和[parsename](http://msdn.microsoft.com/en-us/library/ms188006.aspx)：

```
declare @string varchar(100) = 'TEST RESULTS\TEST 1\RESULT 2'

select cast(parsename(replace(replace(@string, 'TEST RESULTS\TEST ', ''), '\RESULT ', '.'), 2) as int) as Test
    , cast(parsename(replace(replace(@string, 'TEST RESULTS\TEST ', ''), '\RESULT ', '.'), 1) as int) as Result

/*
       Test      Result
----------- -----------
          1           2
*/ 
```

替换部分总是假定相同的文本和间距，并为 parsename 设置句点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T05:03:24.867

此方法使用`SUBSTRING`、`PARSENAME`和`PATINDEX`：

```
SELECT 
  SUBSTRING(PARSENAME(c,2), PATINDEX('%[0-9]%',PARSENAME(c,2)), LEN(c)) Test,
  SUBSTRING(PARSENAME(c,1), PATINDEX('%[0-9]%',PARSENAME(c,1)), LEN(c)) Result
FROM (   SELECT REPLACE(@val, '\', '.') c) t 
```

用于`PARSENAME`拆分字符串。字符串的文本无关紧要——它只需要包含 2 个反斜杠即可解析为 3 个元素。与正则表达式一起使用`PATINDEX`以替换结果中的非数字值。如果数字前面的文本曾经包含数字，则需要进行调整。

如果需要，将结果 CAST/CONVERT 转换为 int 或适当的数据类型。

这是一些示例[Fiddle](http://sqlfiddle.com/#!3/d41d8/8480)。

祝你好运。

# ruby-on-rails - 未定义的局部变量或方法“画廊”

> ID：14700216
> 
> 赞同：0
> 
> 时间：2013-02-05T04:27:01.977
> 
> 标签：ruby-on-rails, ruby-on-rails-3

好的，所以我正在重建几年前在 ROR 1 中构建的旧照片库管理应用程序，并且遇到了一些编码困难，因为我生疏了，而且显然情况已经改变。我的第一个问题是尝试调用页面时出现未定义的局部变量或方法“库”错误。我感到困惑的是我在“画廊”控制器中定义了该方法，但我想知道我是否完全遗漏了一些东西。下面是一些相关的代码片段，首先是我的 index.html.erb 页面：

```
<% @photos.each do |photo| %>

<div>
<%= image_tag(photo.thumb_url) %>
<%= link_to 'Show', gallery %><br/>

</div>
<% end %>
<p><%= will_paginate @photos %></p> 
```

我的画廊控制器：

```
class GalleryController < ApplicationController
  skip_before_filter :authorize
  # GET /gallery
  # GET /gallery.xml
  def index
    @photos = Photo.all
    @photos = Photo.paginate :page=>params[:page], :order=>'date desc',
    :per_page => 2

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @gallery }
    end
  end

  # GET /gallery/1
  # GET /gallery/1.xml

  def show
    @photo = Photo.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @photo }
    end
  end
end 
```

我的错误：

```
undefined local variable or method `gallery' for #<#<Class:0x111127b38>:0x1112d5700> 
```

我应该澄清“照片”是需要登录并包含所有字段/数据库/记录数据的管理部分。使用以下行我没有问题：

```
<%= link_to 'Show', photo %><br/> 
```

这会显示正确的记录和查看页面，但在站点的管理部分（需要登录）。希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:33:35.773

我在任何地方都没有看到您定义变量`gallery`，这就是您的错误消息告诉您的内容：`gallery`在您的视图中未定义。

* * *

更新您的评论：

仅仅因为您希望照片进入画廊控制器并不意味着您可以输入“画廊”并期待结果。这是一种编程语言，其中单词具有含义，而您所做的只是引用未定义的变量。这和类似的东西，在任何版本的 Rails 中都有效。

如果你想将你的照片路由到 Gallery 控制器，你可以使用自动生成的`_path`助手；具体来说，`gallery_path`它接受“画廊”（实际上是一张照片）的 id 的参数来显示：

```
<%= link_to 'Show', gallery_path(photo.id) %><br/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:23:35.677

尝试将您的 link_to 方法替换为以下内容：`<%= link_to 'Show', :controller => "photos", :action => :your_method, :params1 => gallery %>`。

然后在您的 PhotoController 中，您可以使用：`@my_gallery = params[:params1]`访问您的画廊项目。

有关路线的一些文档：

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# qt - Phonon 中的排队不再起作用

> ID：14700229
> 
> 赞同：1
> 
> 时间：2013-02-05T04:28:01.447
> 
> 标签：qt, phonon

在最近对声子库进行软件更新后，我注意到我编写的媒体播放应用程序不再能够循环曲目。有问题的代码如下。第一首曲目已设置好，一旦接近完成，它将再次播放。

```
void Alarm::Start(bool useCustom)
{
    if(useCustom)
    {
        media->setCurrentSource(Phonon::MediaSource(this->_CustPath));
        this->_UsingCustomPath=true;
    }else{
     FileIO::ExtractAudio();
     media->setCurrentSource(Phonon::MediaSource(this->_DefaultPath));
     this->_UsingCustomPath=false;
    }

    media->play();
    connect(media,SIGNAL(aboutToFinish()),this,SLOT(RepeatAllTheThings()));
    this->_isPlaying=true;
}

void Alarm::RepeatAllTheThings()
{
    if(this->_UsingCustomPath)
    {
       media->enqueue(this->_CustPath);
    }else{
        media->enqueue(this->_DefaultPath);
    }
} 
```

通过调试器运行几次后，我注意到了这条消息：

```
"Ignoring source as no aboutToFinish handling is in progress" 
```

快速的谷歌搜索并没有说明这个消息。似乎已添加对私有变量（我无权访问）的检查（[文件的差异](https://build.opensuse.org/package/view_file?file=PHONON_GSTREAMER_46_BRANCH.diff&package=phonon-backend-gstreamer-0_10&project=openSUSE:12.2%3aARM&rev=161df664f97c84f710407d66c90b706f)）

有谁知道我是否刚刚在 phonon 中发现了一个新错误，或者我是否错误地使用了 enqueue 方法？

编辑：上面的代码只失败了大约 1/2 的时间。很迷茫。目前正在运行 phonon-gstreamer 4.6.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:49:42.717

解决了这个变通办法：

```
media->play();
connect(media,SIGNAL(finished()),this,SLOT(RepeatAllTheThings()));

void Alarm::RepeatAllTheThings()
{
    if(this->_UsingCustomPath)
    {
        media->setCurrentSource(Phonon::MediaSource(this->_CustPath));
    }else{
        media->setCurrentSource(Phonon::MediaSource(this->_DefaultPath));
    }
    media->play();
} 
```

# c# - 将全局转换器应用于 Json.NET

> ID：14700232
> 
> 赞同：2
> 
> 时间：2013-02-05T04:28:26.113
> 
> 标签：c#, json.net

假设我有一个示例类：

```
public class SomeObject
{
    private FlagEnumerable _someFlagValue = FlagEnumerable.Flag1;

    public SomeObject()
    {
    }

    [DataMember(Name = "someFlagValue")]
    [Browsable(false)]
    public FlagEnumerable SomeFlagValue
    {
        get { return _someFlagValue; }
        set { _someFlagValue= value; }
    }
} 
```

这就是我描述我的方式`FlagEnumerable`：

```
[DataContract]
[Flags]
[JsonConverter(typeof(JsonEnumConverter))]
public enum FlagEnumerable
{
    [EnumMember]
    Flag1 = 1,

    [EnumMember]
    Flag2 = 2,

    [EnumMember]
    Flag3 = 4
} 
```

此外，我有一个自定义 JSON 转换器，可以将我的枚举转换为字符串，将枚举标记为字符串数组，反之亦然。

此代码运行良好，并成功反序列化示例 JSON：

```
{
    someFlagValue: [
        "Flag1"
    ]
} 
```

问题是如何将全局转换器应用于 JsonSerializer？当我从中删除`[JsonConverter(typeof(JsonEnumConverter))]`然后`FlagEnumerable`通过调用添加它时

```
MyJsonSerializer.Converters.Add(new JsonEnumConverter()); 
```

我收到此错误：

> 无法将当前 JSON 数组（例如 [1,2,3]）反序列化为“FlagEnumerable”类型，因为该类型需要 JSON 原始值（例如字符串、数字、布尔值、null）才能正确反序列化。要修复此错误，请将 JSON 更改为 JSON 原始值（例如字符串、数字、布尔值、null）或将反序列化类型更改为数组或实现集合接口的类型（例如 ICollection、IList），例如可以是从 JSON 数组反序列化。JsonArrayAttribute 也可以添加到类型中以强制它从 JSON 数组反序列化。

任何帮助表示赞赏！抱歉，如果不清楚，请随时提出问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-29T17:02:45.117

我同样需要将可枚举的标志序列化为字符串数组。我认为自从您发布问题以来，情况发生了变化。我目前可以通过使用以下转换器来实现这一点：

```
[Flags]
enum FlagEnumerable
{
    Flag1 = 1,
    Flag2 = 2,
    Flag3 = 4
}

class FlagsEnumConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType.IsEnum && objectType.GetCustomAttributes(typeof(FlagsAttribute), false).Any();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var values = serializer.Deserialize<string[]>(reader);

        return values
            .Select(x => Enum.Parse(objectType, x))
            .Aggregate(0, (current, value) => current | (int) value);
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var enumArr = Enum.GetValues(value.GetType())
            .Cast<int>()
            .Where(x => (x & (int) value) == x)
            .Select(x => Enum.ToObject(value.GetType(), x).ToString())
            .ToArray();

        serializer.Serialize(writer, enumArr);
    }
}

class Program
{
    static void Main(string[] args)
    {
        JsonConvert.DefaultSettings = () => new JsonSerializerSettings()
        {
            Converters = new List<JsonConverter>() {new FlagsEnumConverter()}
        };

        var targetObj = new { MyField = FlagEnumerable.Flag1 | FlagEnumerable.Flag3 };
        var str = JsonConvert.SerializeObject(targetObj);
        var deserializedObj = JsonConvert.DeserializeObject(str, targetObj.GetType());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:23:09.727

基于对这个问题的最高评价：[JSON serialization of enum as string](https://stackoverflow.com/questions/2441290/json-serialization-of-c-sharp-enum-as-string)你需要的是`StringEnumConverter`.

使用它，这段代码：

```
SomeObject someObject = new SomeObject() { SomeFlagValue = FlagEnumerable.Flag3 };
string json = JsonConvert.SerializeObject(someObject,
    Newtonsoft.Json.Formatting.Indented,
    new Newtonsoft.Json.Converters.StringEnumConverter()); 
```

将产生这个 JSON：

```
{
    "SomeFlagValue": "Flag3"
} 
```

请注意，在反序列化时似乎不需要传入 a `StringEnumConverter`——上面的 JSON 块可以很好地反序列化。

# java - 鉴于对有效字符串的某些限制，在java中分解文本文件的最佳方法是什么？

> ID：14700234
> 
> 赞同：0
> 
> 时间：2013-02-05T04:28:34.143
> 
> 标签：java, design-patterns, java.util.scanner

我一直在阅读很多关于使用分隔符和模式的问题和答案，但仍然很难弄清楚这一点。我想阅读一个可能会或可能不会混乱的文本文件并从中挑选单词。所以像这样的输入

```
"the.dog,jumped over the hole@bob's house" 
```

这会给我以下的话

```
[the, dog, jumped, over, the, hole, bob's, house] 
```

然后我会对每个单词做一些事情。

```
Scanner s1 = new Scanner(fileName);
while(s1.hasNext()){
temp = s1.next(String pattern = "no clue");
    //do something with temp
} 
```

我觉得模式是最好的方法，但是我如何制作一个包含任何变体字符的模式，只要它以字母开头并在到达这些字符中的任何一个时结束？`. , * % " ( ) & $ ? < > ! - : ; @ #`或任何类型的`white space`.

我知道我可以以非常糟糕的运行时间效率以非常丑陋的方式做到这一点。任何帮助将不胜感激，或者指向另一个可能对我没有帮助的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:51:17.517

像下面这样的东西应该可以工作：

```
Scanner s1 = new Scanner(fileName).useDelimiter("[^\\p{L}']+");
while(s1.hasNext()) {
    String temp = s1.next();
    System.out.println(temp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:50:13.780

我认为您所需要的只是在函数中指定所有定界符`scanner.useDelimiter`，这是一个示例，可以按照您的指定（`. , @ space`用作定界符）拆分您的测试句子。您可以根据需要在模式表达式中添加更多分隔符。

```
Scanner scanner = new Scanner("the.dog,jumped over the hole@bob's house");
scanner.useDelimiter("\\.|\\,|\\@|\\s");

while (scanner.hasNext()) {
    String temp = scanner.next();
    System.out.println(temp);
} 
```

如果您想忽略重复的分隔符，例如“the....dog,,,jumped”，您可以使用以下模式作为分隔符`scanner.useDelimiter("\\.+|\\,+|\\@+|\\s+");`，它只`+`在分隔符之后添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:04:31.753

您可以在扫描仪上设置分隔符，这应该可以为您完成这项工作。

```
Scanner s = new Scanner("the.dog,jumped over. the hole@bob's house.in land");
String pattern = "\\s|\\.|,|@" ;
s.useDelimiter(pattern);
while(s.hasNext()){
  String temp = s.next();
  //do something with temp
} 
```

您可以在模式字符串中添加所有分隔符。您应该转义（使用 \\）在正则表达式中具有特殊含义的字符，例如 .(dot)，有关此类字符的详细列表，请参阅[此链接](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T10:01:57.943

把事情简单化：

```
String[] a = "the.dog,jumped over. the hole@bob's house.in land".split("\\s|\\.|,|@");
for(int i=0; i< a.length;i++){
 String temp = a[i];
  //do something with temp
} 
```

split() 接受正则表达式...使用它...

# python - 如何在 python 中创建/实现/测试一个新的异常？

> ID：14700236
> 
> 赞同：2
> 
> 时间：2013-02-05T04:28:38.453
> 
> 标签：python, unit-testing, assertraises

我显然对如何在 python 中引发异常有一些基本的误解。我正在包括我正在尝试（和失败）做的最简单的例子。我正在尝试创建一个新异常，并正确测试它是否有效。

```
import random
import unittest

# Create new class of exception
class LearningError(Exception):
    pass

# Create function
def addition_no_four(first, second):
    """Add two numbers (as long as it isn't 4)."""
    if (first == 4) or (second == 4):
        raise LearningError("We don't take 4s!")
    return first + second

# Properly working example code that tests raising errors
class TestSequenceFunctions(unittest.TestCase):
    def setUp(self):
        self.seq = range(10)
    def test_shuffle(self):
        random.shuffle(self.seq)
        self.seq.sort()
        self.assertEqual(self.seq, range(10))
        self.assertRaises(TypeError, random.shuffle, (1,2,3))

# My code which tests 
class TestAddition(unittest.TestCase):
    def test_addition(self):
        """Test whether it works for 2 numbers (not 4)."""
        first = 2
        second = 5
        self.assertEqual(addition_no_four(first, second), 7)
    def test_raise(self):
        """Learn how to create an exception and test its implementation."""
        self.assertRaises(LearningError, addition_no_four(2, 4))

if __name__ == "__main__":
    unittest.main() 
```

失败并显示以下消息：

```
Traceback (most recent call last):
  File "test.py", line 34, in test_raise
    self.assertRaises(LearningError, addition_no_four(2, 4))
  File "test.py", line 12, in addition_no_four
    raise LearningError("We don't take 4s!")
LearningError: We don't take 4s!

----------------------------------------------------------------------
Ran 3 tests in 0.000s

FAILED (errors=1) 
```

这不会发生（即，示例代码正确地测试了前面的异常。我需要更改什么才能使这种事情发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T04:31:51.983

只是有一点点变化。使用*assertRaises*时，请确保**不要**直接调用该函数。相反，它的参数需要作为参数传递给 assertRaises。这允许 assertRaises 测试方法在调用函数之前设置 try/except。

```
def test_raise(self):
    """Learn how to create an exception and test its implementation."""
    self.assertRaises(LearningError, addition_no_four, 2, 4) 
```

您还可以通过使用 assertRaises 作为内容管理器来绕过此问题：

```
def test_raise(self):
    """Learn how to create an exception and test its implementation."""
    with self.assertRaises(LearningError):
        addition_no_four(2, 4) 
```

# animation - 按下 GUI 按钮时如何启动动画

> ID：14700238
> 
> 赞同：0
> 
> 时间：2013-02-05T04:28:59.480
> 
> 标签：animation, unity3d, unityscript

我在搅拌机中的 .fbx 中创建了简单的动画并将其导入到统一中。动画名称是 simple_anim，当我播放按钮时动画会正常工作。但是现在我添加了两个 GUI 按钮，我希望当我按下 gui 按钮时动画将运行..我是脚本新手，我编写了这个简单的脚本，但它不能正常工作。

```
function onGUI() 
{ 
  if(GUI.Button(Rect(10,10,150,100),"Button")) 
   {
    animation.play("simple_anim"); 
   }
 } 
```

但它不能正常工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:18:53.727

你的问题对我来说不是很清楚，但我有两件事要说：

1.  使用播放功能时，P 应大写。所以应该是：

    动画.Play("simple_anim");

    请参阅：[http ://docs.unity3d.com/Documentation/ScriptReference/Animation.Play.html](http://docs.unity3d.com/Documentation/ScriptReference/Animation.Play.html)

2.  你说你有两个按钮。在这种情况下，您可能希望获得这样的效果：当您单击一个按钮时，另一个按钮会停止动画。在这种情况下，您的代码应该是：

    animation.Play("simple_anim", PlayMode.StopAll);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:18:28.423

尝试以下方法，这可能不是最简单的方法。但应该工作。

```
 var animation_bool : boolean ;

    function Update()
    {
     if(animation_bool == true)
      {
        animation.Play("slash");
      }
    }

   function onGUI() 
   { 
    if(GUI.Button(Rect(10,10,150,100),"Button")) 
     {
      animation_bool = true;
     }
   } 
```

# java - 使用 Apache PDFBox 从 PDF 文件中删除加密

> ID：14700241
> 
> 赞同：9
> 
> 时间：2013-02-05T04:29:05.660
> 
> 标签：java, pdf, pdfbox

使用[QPDF](http://qpdf.sourceforge.net/)，您可以简单地从 PDF 文件中删除*限制/加密，如下所示：*

```
qpdf --decrypt infile outfile 
```

我想用Java中的[PDFBox做同样的事情：](https://pdfbox.apache.org/)

```
PDDocument doc = PDDocument.load(inputFilename);
if (doc.isEncrypted()) {
   // remove the encryption to alter the document
} 
```

我试过这个[`StandardDecryptionMaterial`](https://pdfbox.apache.org/docs/2.0.1/javadocs/org/apache/pdfbox/pdmodel/encryption/StandardDecryptionMaterial.html)，但我不知道所有者密码是什么。QPDF 如何做到这一点？

示例文档：
[https ://issues.apache.org/jira/secure/attachment/12514714/in.pdf](https://issues.apache.org/jira/secure/attachment/12514714/in.pdf)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-05T05:03:57.930

这是您需要做的（灵感来自 PDFBox [WriteDecodedDoc](https://pdfbox.apache.org/1.8/commandline.html#writedecodeddoc)命令行工具）：

```
if (doc.isEncrypted()) {
    try {
        doc.decrypt("");
        doc.setAllSecurityToBeRemoved(true);
    } catch (Exception e) {
        throw new Exception("The document is encrypted and we can't decrypt it.", e);
    }
} 
```

注意：您*可能*必须包含[Bouncy Castle](http://www.bouncycastle.org/latest_releases.html) JAR。

# jquery - JQuery 停止工作，输入语法的值改变？

> ID：14700243
> 
> 赞同：0
> 
> 时间：2013-02-05T04:30:19.350
> 
> 标签：jquery, input

我的代码停止工作（工作 2 年后）。我的代码没有任何改变。我只能怀疑这一行的 jQuery 语法发生了一些变化

```
 $('input[name='+formQty+']').val(2); 
```

我正在尝试通过按名称更改元素的值。最近有什么变化吗？jQuery 脚本源也取自这里：“ [http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js) ”

谢谢

# scala - Tuple2 和 tuple 的两个元素：它们有什么区别？

> ID：14700244
> 
> 赞同：5
> 
> 时间：2013-02-05T04:30:26.010
> 
> 标签：scala

在下面的代码中，为什么会发生类型不匹配？

```
scala> val lb = ListBuffer[Tuple2[Int, Int]]()
lb: scala.collection.mutable.ListBuffer[(Int, Int)] = ListBuffer()

scala> lb += (1, 2)
<console>:11: error: type mismatch;
 found   : Int(1)
 required: (Int, Int)
              lb += (1, 2)
                     ^

scala> lb += Tuple2(1, 2)
res43: lb.type = ListBuffer((1,2)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T04:55:05.810

布赖恩的回答是对的，但我建议这样写：

```
lb += 1 -> 2 
```

有一个从`Any`to的隐式转换`ArrowAssoc`，它有方法`->`：

```
class ArrowAssoc[A](val x: A) {
    def -> [B](y: B): Tuple2[A, B] = Tuple2(x, y)
  } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T04:50:23.250

当你的写作

```
lb += (1, 2) 
```

它实际上是这样做的，你用两个整数参数调用 += 方法，它应该是一个 Tuple2[Int, Int]：

```
lib.+=(1, 2) 
```

要解决此问题，请在 (1, 2) 周围添加另一个 ()，如下所示：

```
lb += ((1, 2))
lib.+=((1, 2)) 
```

# sml - 不带参数的函数声明

> ID：14700245
> 
> 赞同：2
> 
> 时间：2013-02-05T04:30:27.170
> 
> 标签：sml

如何在签名中声明一个不带参数的函数？

我只见过带有这样的参数的函数签名：`leq:item*item->bool` 并且我正在寻找为这样的函数创建签名：

```
initBTree = E   (* where empty is of type tree *) 
```

这不起作用：`val initBTree:->tree`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T16:19:29.817

您可以创建一个以单位为参数的函数，如下所示：

```
fun initBTree () = E 
```

并这样称呼它：

```
initBTree () 
```

它有类型

```
fn : unit -> tree 
```

如果`E`有类型`tree`。

不过，这有点毫无意义。你不妨直接说`E`，或者如果你真的希望它被称为 initBTree：

```
val initBTree = E 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T12:43:55.457

您可能知道 SML 中的所有函数都只接受一个参数。因此创建一个不带参数的函数是不可能的，因为这样的“东西”实际上只是一个值。

你的代码

```
val initBTree : -> tree 
```

完全没有意义。如果你说你有一个值构造函数`E`，它是一个空树，你为什么不创建一个不初始化任何东西的树的 init 函数呢？在那种情况下，你可以做`initBTree`的同义词`E`

```
val initBTree = E 
```

然而，这仍然毫无意义。

# python - 将多个日期时间格式化为字符串

> ID：14700246
> 
> 赞同：2
> 
> 时间：2013-02-05T04:30:38.647
> 
> 标签：python, datetime, string-formatting

我想使用特定格式格式化具有两个日期时间的字符串。

```
d1 = datetime.datetime.now()
d2 = datetime.datetime.now() - datetime.timedelta(days=1)

daterange = [d1, d2]

fmt = '%Y/%m/%d %H:%M:%S' 
```

我目前正在使用`strftime`first 格式化日期：

```
string = "Date range: {} to {}".format(d1.strftime(fmt), d2.strftime(fmt)) 
```

> 日期范围：2013/02/05 12:22:12 至 2013/02/04 12:22:12

有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T04:30:38.647

您可以在字符串本身中提供日期格式：

```
string = "{0:%Y/%m/%d %H:%M:%S}".format(d1) 
```

在此之后，如果我们将参数的格式设置为`format()`：

```
"Date range: {0:{2}} to {1:{2}}".format(d1, d2, fmt) 
```

我们甚至可以传递一个日期范围，并使用从那里获取所有日期`0[index]`

```
"Date range: {0[0]:{1}} to {0[1]:{1}}".format(daterange, fmt) 
```

我们还可以使用命名字段，以提高可读性：

```
"Date range: {dates[0]:{fmt}} to {dates[1]:{fmt}}".format(dates=daterange, fmt=fmt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:09:16.250

考虑这个`d1.isoformat().replace('T',' ').replace('-','/')[:-7]`

`isoformat()`非常接近您上面的格式。IE。2013-02-04T23:53:45.174635

# magento - 如何从 Magento 外部使用 loginbyid？

> ID：14700248
> 
> 赞同：0
> 
> 时间：2013-02-05T04:31:02.443
> 
> 标签：magento, session, magento-1.7

我能够从 magento 之外的外部站点使用 magento 的登录功能。但它只有在我有用户名和密码时才有效。在某些情况下，我只有用户 ID。我尝试了 loginbyid，它返回 true 并加载客户详细信息，但是一旦将 html 加载到浏览器中，它就会删除客户会话。请注意，这不是典型的问题“从管理员登录客户”，而是使用 ID 从外部登录客户。

```
 require_once('path/to/Mage.php');
    umask(0);
    Mage::app('default','store', $options=null);
    Mage::getSingleton('core/session', array('name'=>'frontend'));
    $session = Mage::getSingleton('customer/session');
    $customer = $session->getCustomer();

    if($session->loginById($usernameOrId)){
        $session->setCustomerAsLoggedIn($customer);
        return $session->isLoggedIn();
    }
    return false; 
```

这将返回 true，但在页面加载后，现在将返回 false：

```
 require_once('path/to/Mage.php');
    umask(0);
    Mage::app('default','store', $options=null);
    Mage::getSingleton('core/session', array('name'=>'frontend'));
    $session = Mage::getSingleton('customer/session');
    return $session->isLoggedIn(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:17:00.877

要以编程方式从 Magento (Community 1.7) 外部登录客户，这是正确的代码

```
Mage::app('default');

// Init a Magento session. This is super ultra important
Mage::getSingleton('core/session', array('name' => 'frontend'));

// $customer Mage_Customer_Model_Customer
// We get an instance of the customer model for the actual website
$customer = Mage::getModel('customer/customer')
    ->setWebsiteId(Mage::app()->getStore()->getWebsiteId());

// Load the client with the appropriate email
$customer->loadByEmail($email);

// Get a customer session
$session = Mage::getSingleton('customer/session');

// Login an check the customer by his database userId
if ($session->loginById($customer->getId())) {
    echo '<div>Succesfull loginById</div>';
} else {
    echo '<div>Error in loginById</div>';
}

if ($session->isLoggedIn()) {
    echo '<div>Welcome</div>';
} else {
    echo '<div>Denied</div>';
} 
```

# css - 样式化自动填充的文本字段

> ID：14700252
> 
> 赞同：0
> 
> 时间：2013-02-05T04:31:23.907
> 
> 标签：css, html, safari

我正在尝试设置我的文本字段的样式，并且一切似乎都在工作 - 除了当 Safari 自动填充文本字段时，它们以我想要更改的非常难看的芥末黄色出现 - 在登录表单上看起来很荒谬。我应该设置什么属性来改变那种颜色？

Safari 的检查器中的文本字段如下所示：

```
<input id="username" name="username" type="text"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:51:22.077

你可以使用这样的东西：

这基本上用于 safari 和 chrome，

`@media screen and (-webkit-min-device-pixel-ratio:0) { #u { color:green; /* Safari only */ } }`

# java - 如何将十进制转换为二进制？

> ID：14700253
> 
> 赞同：-1
> 
> 时间：2013-02-05T04:31:24.947
> 
> 标签：java

我想将十进制数转换为二进制数并返回该二进制数。但是，我需要能够将这个二进制数表示为一个完整的`int`变量。我看到的示例和过去的问题仅分别返回 0 和 1，这是行不通的。

现在，我这样做的方式是将 0 和 1 存储在一个`int`数组中。有没有办法得到所有这些数组元素并形成一个`int`变量？或者还有其他更好的方法吗？我正在尝试尽可能少地调用 java 库（即很少的 parseInt() 等）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T12:40:28.507

测试代码…………

```
private Double decToBin(int nm) {
    String hex = "" + nm;
       int i = Integer.parseInt(hex);
    String by = Integer.toBinaryString(i);
    System.out.println("Binary: " + by);
    return Double.parseDouble(by);
} 
```

写你需要的地方...？？

```
else if (re.equals(" Bin ")) {
                    try {

                        String prev = data.get(i - 1);
                        result =decToBin(Integer.parseInt(prev));
                        re = "" + result;
                        i++;
                        twoValue = true;

                    } catch (Exception e) {
                        e.printStackTrace();
                    }} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T04:44:21.730

Try this code:

```
import java.lang.*;
import java.io.*;
public class BinaryToDecimal{
    public static void main(String[] args) throws IOException{
        BufferedReader bf= new BufferedReader(new InputStreamReader(System.in));
        System.out.print("Enter the Binary value: ");
        String str = bf.readLine();
        long num = Long.parseLong(str);
        long rem;
        while(num > 0){
            rem = num % 10;
            num = num / 10;
            if(rem != 0 && rem != 1){
                System.out.println("This is not a binary number.");
                System.out.println("Please try once again.");
                System.exit(0);
            }
        }
        int i= Integer.parseInt(str,2);
        System.out.println("Decimal:="+ i);
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T04:37:36.847

试试代码

```
import java.util.*;

public class number
{
    public static void main (String [] args)
    {
        Scanner input = new Scanner (System.in);
        System.out.println ("Input decimal number");
        int decimal = input.nextInt ();
        input.close ();

        int base = 2;
        int result = 0;
        int multiplier = 1;

        while (decimal>0)
        {
            int residue = decimal%base;
            decimal = decimal/base;
            result = result +residue*multiplier;
            multiplier = multiplier * 10;
        }
        System.out.println ("binary....."+result);
    }
} 
```

欲了解更多信息[http://forum.codecall.net/topic/54004-decimal-to-binary-number/](http://forum.codecall.net/topic/54004-decimal-to-binary-number/)

# spring - 覆盖 Spring Data REST 中的默认 PUT/GET

> ID：14700254
> 
> 赞同：0
> 
> 时间：2013-02-05T04:31:33.843
> 
> 标签：spring

我正在使用弹簧数据 REST 。（[http://www.springsource.org/spring-data/rest](http://www.springsource.org/spring-data/rest)）

我的实体 ID 在其中包含“/”，因此尝试使用 entityId（例如“ **thisisanentity/idwithaslashinIt** ”）作为路径参数对我的实体执行 GET，spring 无法获取正确的实体。在以下两种情况下，我都会收到 HTTP 404。

例如 GET `/myentity/thisisanentity/idwithaslashinIt`HTTP 404（不适用于 entityId 中的斜线）

URL 编码似乎也没有帮助。

即 GET `/myentity/thisisanentity%2FidwithaslashinIt`HTTP 404（即使用 %2F 替换斜线也不起作用）

无论如何更改路径参数的默认行为以成功提取 "/myentity/" 之后的所有内容？

另外，由于我的 entityId 中有斜杠，我如何放置（更新）实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:01:01.530

您没有提到您正在访问哪个数据库，但我认为这可能是数据库的问题，而不是spring API。尝试在将斜杠存储到数据库*之前对其进行转义。*此外，尝试从浏览器/独立客户端访问实体。

# c++ - 如何从终端启动 C 应用程序，并将参数传递给 int main(int argc, char *argv[])？

> ID：14700256
> 
> 赞同：1
> 
> 时间：2013-02-05T03:36:36.270
> 
> 标签：c++, macos, xcode

我是 Mac 上的开发新手 - 我正在使用 xcode 进行编码，但我不知道如何使用参数启动我的应用程序。我可以导航到应用程序目录并执行以下操作：

```
open application 
```

但我不能这样做：

```
open application param1 param2 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T03:48:46.417

使用`--args`OS X 10.6.2 或更高版本中可用的标志：

```
open application --args param1 param2 
```

有关详细信息，请参阅[如何在 Mac OS 中使用命令行参数运行应用程序](https://superuser.com/questions/16750/how-can-i-run-an-application-with-command-line-arguments-in-mac-os)。

# java - 在 Java 游戏中使用斜坡因子

> ID：14700263
> 
> 赞同：0
> 
> 时间：2013-02-05T04:32:18.880
> 
> 标签：java, swing, 2d-games

我正在制作一个小型射击 eliens 游戏，我在上面有外星人，底部有宇宙飞船，外星人正在向宇宙飞船射击。但我不能让外星人直接指向船。我尝试使用公式： (x1-x2)/(y1-y2) ，它只有 60% 的时间运行良好。其余的时间，拍摄都在远离屏幕的边缘。我究竟做错了什么？

```
package battleShip;

import java.awt.Graphics;
import java.awt.Image;
import java.awt.Toolkit;
import java.util.ArrayList;
import java.util.Timer;
import java.util.TimerTask;

import javax.swing.JPanel;

import battleShip.ShipRunner.AlienRunner;

public class Alien extends JPanel{

    private int xPosition;
    private int yPosition;
    private final int LEFT_BORDER = -30;
    private final int RIGHT_BORDER = 1100;
    private final int BUTTOM_BORDER = 730;
    private short hitsCounter;
    private boolean isPainted;
    Toolkit toolkit = Toolkit.getDefaultToolkit(); 
    Image myAlien = toolkit.getImage("c:\\Users\\assaf\\workspace\\My First Game\\images\\alien.png"); 
    Image alienHit = toolkit.getImage("c:\\Users\\assaf\\workspace\\My First Game\\images\\alien2.gif");
    long startTime;
    private int x; //used in: checkAlienState()
    private int y; //used in: checkAlienState()
    private boolean approval;
    private boolean readyForAction;
    private boolean switchMovement;
    private byte randomChoice;
    private Ship ship;
    private ArrayList<AlienShot> shots = new ArrayList<AlienShot>();
    private boolean loaded;
    private Timer timer1; 
    public Timer timer2;

    private enum State {MOVING_LEFT,MOVING_RIGHT,MOVING_DOWN,MOVING_DOWN_RIGHT,MOVING_DOWN_LEFT,STAY_IN_PLACE}
    private State currentState;

    public Alien(Ship ship){
        this.hitsCounter = 0;
        this.ship = ship;
        addShots((byte)2);
        timer1 = new Timer();
        timer1.schedule(new ShootTask(),0, 3);
        timer2 = new Timer();
    }

    public void addShots(byte amount){
        for(byte i = 0;i<amount; i++){
            shots.add(new AlienShot(ship,this));
        }
    }

    public void shoot(){
        byte i;
        if(shots.size()>0){
            for( i = 0;i<shots.size();i++){
                if(shots.get(i).getIsPainted()==false){
                    shots.get(i).setShotXposition(getXposition());
                    shots.get(i).setShotYposition(getYposition());
                    shots.get(i).setRamp(calcRamp(getYposition(),ship.getShipYposition(),getXposition(),ship.getShipXposition()));
                    shots.get(i).setIsPainted(true);
                    break;
                }
                else{
                    continue;
                }
            }
            if(i==shots.size()){
                addShots((byte)2);
                shoot();
            }
        }

    }

    public float calcRamp(int y1,int y2,int x1,int x2){
        float ramp;
        if(x1==x2){
            ramp = 0;
        }
        else{
        ramp = (y1-y2)/(x1-x2);
        }
        return ramp;
    }

    public ArrayList<AlienShot>getShotsArray(){
        return this.shots;
    }

    public void setLoaded(boolean load){
        this.loaded = load;
    }

    public boolean getLoaded(){
        return this.loaded;
    }

    public void setRandomChoice(){
        this.randomChoice = (byte)(Math.random()*2);
    }
    public byte getRandomChoice(){
        return this.randomChoice;
    }

    public void setSwitchMovement(boolean switchOrNot){
        this.switchMovement = switchOrNot;
    }

    public boolean getSwitchMovement(){
        return this.switchMovement;
    }

    public void setReadyForAction(boolean ready){
        this.readyForAction=ready;
    }

    public boolean checkReadyForAction(){
        return this.readyForAction;
    }

    public boolean getIsPainted(){
        return this.isPainted;
    }

    public void setIsPainted(boolean painted){
        this.isPainted=painted;
    }

    public void raiseHitsCounter(){
        this.hitsCounter++;
    }

    public short getHitsCounter(){
        return this.hitsCounter;
    }

    public synchronized int getXposition(){
        return this.xPosition;
    }

    public void setXposition(int position){
        this.xPosition = position;
    }

    public synchronized int getYposition(){
        return this.yPosition;
    }

    public synchronized void setYposition(int position){
        this.yPosition = position;
    }

    public void moveLeft(){

            this.xPosition--;

        currentState = State.MOVING_LEFT;
    }

    public void moveRight(){

        this.xPosition++;

        currentState = State.MOVING_RIGHT;
    }

    public void moveDown(){

            this.yPosition++;

        currentState = State.MOVING_DOWN;
    }

    public void stayInPlace(){
        this.xPosition = getXposition();
        this.yPosition = getYposition();

        currentState = State.STAY_IN_PLACE;

    }

    public void moveDownAndLeft(){

        this.xPosition--;
        this.yPosition++;

        currentState = State.MOVING_DOWN_LEFT;
    }

    public void moveDownAndRight(){

        this.xPosition++;
        this.yPosition++;

        currentState = State.MOVING_DOWN_RIGHT;
    }

    public void checkAlienState(){ //this method will run only single time when called (look in the paintAlien() method of this class)
                                   //and will change the startTime variable,so that the burning alien gif will be painted for 2 seconds only.
        if(this.x==this.y){
        this.startTime = System.currentTimeMillis();
            this.x++;
            this.approval = true;

        }
    }

    public void move(){

        if(getXposition()>=RIGHT_BORDER && getHitsCounter()<5){
            setXposition(RIGHT_BORDER);
        }
        if(getXposition()<=LEFT_BORDER && getHitsCounter()<5){
            setXposition(LEFT_BORDER);
        }
        if(getXposition()>=LEFT_BORDER && getXposition()<=RIGHT_BORDER && getSwitchMovement() && getHitsCounter()<5){

                setRandomChoice();
                switch(getRandomChoice()){
                case 0:
                    moveLeft();
                    break;
                case 1:
                    moveRight();
                    break;

                }

        }

        if(getXposition()>=LEFT_BORDER && getXposition()<=RIGHT_BORDER && !getSwitchMovement() && getHitsCounter()<5){
            switch(getRandomChoice()){
            case 0:
                moveLeft();
                break;
            case 1:
                moveRight();
                break;
            }
        }

        if(getHitsCounter()>=5){
            stayInPlace();
        }

    }

    public void paintAlien(Graphics g){

        if(getHitsCounter()<5){
            g.drawImage(myAlien, getXposition(), getYposition(),null);
        }
        if(getHitsCounter()>=5){
            g.drawImage(alienHit, getXposition(), getYposition(),null);
            checkAlienState();

        }

            if(approval){
                if(System.currentTimeMillis()>startTime+2000){

                setIsPainted(false);
            }
        }
    }

    public class ShootTask extends TimerTask{

        @Override
        public void run() {
            if(loaded && getHitsCounter()<5){
                shoot();
                setLoaded(false);
            }

            for(AlienShot shot:shots){
                if(shot.getIsPainted()){
                shot.move();

                }
            }

        }

    }

    public class setLoadedForShooting extends TimerTask{

        @Override
        public void run() {
            setLoaded(true);

        }

    }

}
package battleShip;

import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JPanel;

public class AlienShot extends JPanel {

    private int yPosition;
    private float xPosition;
    private int shipTargetPosition;
    private boolean isPainted;
    private float ramp;
    private Ship ship;
    private Alien alien;

    public AlienShot(Ship ship,Alien alien){
        this.ship = ship;
        this.alien = alien;
    }

    public void setRamp(float ramp){
        this.ramp = ramp;
    }

    public float getRamp(){
        return this.ramp;
    }

    public void setShotXposition(float position){
        this.xPosition = position;
    }

    public float getShotXposition(){
        return this.xPosition;
    }

    public void setShotYposition(int position){
        this.yPosition = position;
    }

    public int getShotYposition(){
        return this.yPosition;
    }

    public void setShipTargetPosition(int position){
        this.shipTargetPosition = position;
    }

    public int getShipTargetPosition(){
        return this.shipTargetPosition;
    }

    public void setIsPainted(boolean painted){
        this.isPainted = painted;
    }

    public boolean getIsPainted(){
        return this.isPainted;
    }

    public void paintAlienShot(Graphics g){
        g.setColor(Color.BLUE);
        g.fillOval((int)getShotXposition()+12,getShotYposition()+20, 8, 8);
    }

    public void move(){

        setShotYposition(getShotYposition()+1);
        //setShotXposition(getShotXposition()+getRamp());

    }

}

package battleShip;

import java.util.ArrayList;

public class AliensStorage {

    public static ArrayList<Alien>alienList1 = new ArrayList<Alien>();
    private Ship ship;

    public AliensStorage(Ship ship){
        this.ship = ship;

    }

    public void fillAlienList1(int number,ArrayList<Alien>list){
        for(int i=0; i<number; i++){
            list.add(new Alien(ship));
        }
    }

    public void setAlienList1Position(){
        alienList1.get(0).setXposition(505);
        alienList1.get(0).setYposition(-40);
        alienList1.get(1).setXposition(505);
        alienList1.get(1).setYposition(-120);
        alienList1.get(2).setXposition(505);
        alienList1.get(2).setYposition(-200);
        alienList1.get(3).setXposition(505);
        alienList1.get(3).setYposition(-280);
        alienList1.get(4).setXposition(505);
        alienList1.get(4).setYposition(-360);
        alienList1.get(5).setXposition(505);
        alienList1.get(5).setYposition(-440);
    }

    public void setAliensForAction(ArrayList<Alien> list){
        for(Alien alien:list){
            alien.setIsPainted(true);

        }

    }

    public static boolean checkIfAllAliensAreDead(ArrayList<Alien>list){
        short c = 0;
        for(int i = 0;i<list.size();i++){
            if(list.get(i).getIsPainted()==false){
                c++;
            }
            else{
                continue;
            }
        }
        if(c==list.size()){
            return true;
        }

            return false;

    }

    public static boolean checkIfAllAliensAreReadyForAction(ArrayList<Alien>list){
        int c = 0;
        for(int i = 0; i<list.size();i++){
            if(list.get(i).checkReadyForAction()){
                c++;
            }
            else{
                continue;
            }

        }
        if(c==list.size()){
            return true;
        }
        return false;

    }

}
package battleShip;

import java.util.ArrayList;

import battleShip.ShipRunner.AlienRunner;

public class AlienStartingScenes {

    public void startingSceneAlienList1(){

        for(Alien alien:AliensStorage.alienList1){

            if(alien.getYposition()<100){
                alien.moveDown();
            }
        }

        if(AliensStorage.alienList1.get(0).getYposition()>=100&&AliensStorage.alienList1.get(0).getXposition()>=150){
            AliensStorage.alienList1.get(0).moveLeft();

        }

        else{
            AliensStorage.alienList1.get(0).stayInPlace();

        }

        if(AliensStorage.alienList1.get(1).getYposition()>=100&&AliensStorage.alienList1.get(1).getXposition()>=250){
            AliensStorage.alienList1.get(1).moveLeft();
        }

        else{
            AliensStorage.alienList1.get(1).stayInPlace();

        }

        if(AliensStorage.alienList1.get(2).getYposition()>=100&&AliensStorage.alienList1.get(2).getXposition()>=350){
            AliensStorage.alienList1.get(2).moveLeft();
        }

        else{
            AliensStorage.alienList1.get(2).stayInPlace();

        }

        if(AliensStorage.alienList1.get(3).getYposition()>=100&&AliensStorage.alienList1.get(3).getXposition()<=650){
            AliensStorage.alienList1.get(3).moveRight();
        }

        else{
            AliensStorage.alienList1.get(3).stayInPlace();

        }

        if(AliensStorage.alienList1.get(4).getYposition()>=100&&AliensStorage.alienList1.get(4).getXposition()<=750){
            AliensStorage.alienList1.get(4).moveRight();
        }

        else{
            AliensStorage.alienList1.get(4).stayInPlace();

        }

        if(AliensStorage.alienList1.get(5).getYposition()>=100&&AliensStorage.alienList1.get(5).getXposition()<=850){
            AliensStorage.alienList1.get(5).moveRight();
        }

        else{
            AliensStorage.alienList1.get(5).stayInPlace();

        }
    }

    public void repositionAliensList1(){
        if(AliensStorage.alienList1.get(1).getYposition()>50 && AliensStorage.alienList1.get(4).getYposition()>50){
            AliensStorage.alienList1.get(1).setYposition(AliensStorage.alienList1.get(1).getYposition()-1);
            AliensStorage.alienList1.get(4).setYposition(AliensStorage.alienList1.get(4).getYposition()-1);

        }

    }

}

package battleShip;

import javax.swing.JFrame;

public class MainWindow {

    private JFrame frame;
    private Ship ship;

    public MainWindow(Ship ship){

        this.ship = ship;
        frame = new JFrame();
        frame.setSize(1100,700);
        frame.setLocation(150, 10);
        frame.setResizable(false);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(ship);
        frame.setVisible(true);

    }

package battleShip;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.ArrayList;
import javax.swing.JPanel;

public class Ship extends JPanel implements KeyListener {

    private int xPosition;
    private ArrayList<Shot> shotsSupply = new ArrayList<Shot>();
    private int shotsSupplyIndex;
    private boolean leftKeyPressed;
    private boolean rightKeyPressed;
    private boolean gotHit;
    private ArrayList<Alien> currentAlienList;

    private enum Movement {MOVE_RIGHT,MOVE_LEFT,STAY_PUT}
    private Movement currentMovement;

    Toolkit toolkit = Toolkit.getDefaultToolkit(); 
    Image myShip = toolkit.getImage("c:\\Users\\assaf\\workspace\\My First Game\\images\\ship.png"); 

    public Ship(){

        this.xPosition = 500;
        this.shotsSupplyIndex = 0;
        fillShotsSupply(300);
        currentMovement = Movement.STAY_PUT;
        addKeyListener(this);
        setFocusable(true);
        setFocusTraversalKeysEnabled(false);

    }

    public ArrayList<Alien>getCurrentAlienList(){
        return this.currentAlienList;
    }

    public void setCurrentAlienList(ArrayList<Alien>list){
        this.currentAlienList = list;
    }

    public void fillShotsSupply(int shotsAmount){
        for(int i = 0; i<shotsAmount; i++){
            shotsSupply.add(new Shot(this));
        }
    }

    public ArrayList<Shot> getShotSupply(){
        return this.shotsSupply;
    }

    public synchronized int getShipXposition(){
        return this.xPosition;
    }

    public synchronized int getShipYposition(){
        return 610;
    }

    public void setShipXposition(int position){
        this.xPosition = position;
    }

    public void move(Movement movement){
        switch(movement){
        case MOVE_RIGHT:
            this.xPosition++;
            break;

        case MOVE_LEFT:
            this.xPosition--;
            break;

        case STAY_PUT:
            this.xPosition = getShipXposition();
            break;
        }

    }

    public void moveShip(){

            if(getShipXposition()<0){
                setShipXposition(0);
            }

            if(getShipXposition()>1050){
                setShipXposition(1050);
            }

            if(leftKeyPressed == false && rightKeyPressed == false){
                currentMovement = Movement.STAY_PUT;
            }
            move(currentMovement);

    }

    //this is the main painting method

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        this.setBackground(Color.BLACK);

        //painting the ship
        g.drawImage(myShip,this.xPosition,610,null);

        //painting the shots
        for(Shot shot:getShotSupply()){
            if(shot.getShootable()){
                shot.paintShot(g);
            }
        }

        //painting the aliens
        for(Alien alien:getCurrentAlienList()){
            if(alien.getIsPainted()){
                alien.paintAlien(g);
            }
        }
        //painting the alien shots
        for(Alien alien:getCurrentAlienList()){
            for(AlienShot shot:alien.getShotsArray()){
                if(shot.getIsPainted()){
                    shot.paintAlienShot(g);
                }
            }
        }

    }

    @Override
    public void keyTyped(KeyEvent e) {

    }

    @Override
    public void keyPressed(KeyEvent e) {

        int c = e.getKeyCode();
        if(c==KeyEvent.VK_LEFT){
            currentMovement = Movement.MOVE_LEFT;
            leftKeyPressed = true;

        }

        if(c==KeyEvent.VK_RIGHT){
            currentMovement = Movement.MOVE_RIGHT;
            rightKeyPressed = true;

        }

        if(c==KeyEvent.VK_CONTROL){
            if(shotsSupplyIndex<shotsSupply.size()){
                shotsSupply.get(shotsSupplyIndex).setXposition(getShipXposition());
                shotsSupply.get(shotsSupplyIndex).setShootable(true);
                shotsSupply.get(shotsSupplyIndex).timer.schedule(shotsSupply.get(shotsSupplyIndex).
                new ShootingTask(),0,2);
                shotsSupplyIndex++;
            }
        }
    }

    @Override
    public void keyReleased(KeyEvent e) {

        int c = e.getKeyCode();
        if(c==KeyEvent.VK_LEFT){
            leftKeyPressed = false;
        }

        if(c==KeyEvent.VK_RIGHT){
            rightKeyPressed = false;
        }

    }

}

package battleShip;

import java.util.ArrayList;

public class ShipRunner extends Thread {

    private Ship ship;

    public ShipRunner(Ship ship){
        this.ship = ship;

    }

    @Override
    public void run() {
        super.run();

            while(1<2){
                ship.moveShip();
                try{
                ShipRunner.sleep(2);
                }
                catch(Exception e){}
                ship.repaint();
            }

        }

    public class AlienRunner extends Thread{

        AlienStartingScenes scenes;

        public AlienRunner(AlienStartingScenes scenes){
            this.scenes = scenes;
        }

        @Override
        public void run() {
            super.run();
            try{
                AlienRunner.sleep(3000);
            }
            catch(Exception e){}

            long startTime = System.currentTimeMillis();
            while(System.currentTimeMillis()<startTime+3000){
                scenes.startingSceneAlienList1();
                try{
                    AlienRunner.sleep(3);
                }
                catch(Exception e){}
            }

            startTime = System.currentTimeMillis();
            while(System.currentTimeMillis()<startTime+2500){
                scenes.repositionAliensList1();
                try{
                    AlienRunner.sleep(13);
                }
                catch(Exception e){}
            }
            for(Alien alien:AliensStorage.alienList1){
                alien.setReadyForAction(true);
                alien.timer2.schedule(alien.new setLoadedForShooting(),0,(long)(Math.random()*2000+1000));

            }
            while(!AliensStorage.checkIfAllAliensAreDead(AliensStorage.alienList1)){
                for(Alien alien:AliensStorage.alienList1){
                    alien.setSwitchMovement(true);
                }
                startTime = System.currentTimeMillis();
                while(System.currentTimeMillis()<startTime+(int)(Math.random()*1000+6000)){
                    for(Alien alien:AliensStorage.alienList1){
                        alien.move();
                        alien.setSwitchMovement(false);
                    }
                    try{
                        AlienRunner.sleep(6);
                    }
                    catch(Exception e){}
                }
            }

        }
    }

    public static void main(String[]args){

        System.setProperty("sun.java2d.opengl", "True");
        Ship gameShip = new Ship();
        AliensStorage storage = new AliensStorage(gameShip);
        storage.fillAlienList1(6,AliensStorage.alienList1);
        storage.setAliensForAction(AliensStorage.alienList1);
        storage.setAlienList1Position();
        gameShip.setCurrentAlienList(AliensStorage.alienList1);
        AlienStartingScenes scenes = new AlienStartingScenes();
        MainWindow window = new MainWindow(gameShip);
        ShipRunner shipRunner = new ShipRunner(gameShip);
        ShipRunner.AlienRunner alienRunner = shipRunner.new AlienRunner(scenes);
        shipRunner.start();
        alienRunner.start();

    }

}

package battleShip;

import java.awt.Color;
import java.awt.Graphics;
import java.util.ArrayList;
import java.util.Timer;
import java.util.TimerTask;
import javax.swing.JPanel;

public class Shot extends JPanel{

    private int yPosition;
    private int xPosition;
    private boolean shootable;
    private boolean scanning;
    private Ship ship;
    Timer timer = new Timer();

    public Shot(Ship ship){

        this.ship = ship;
        this.yPosition = 610;

    }

    public void setXposition(int position){
        this.xPosition = position;
    }

    public int getXposition(){
        return this.xPosition;
    }

    public boolean getShootable(){
        return this.shootable;
    }

    public void setShootable(boolean shootable){
        this.shootable = shootable;

    }

    public void move(){

        this.yPosition--;

    }

    public int getShotYposition(){
        return this.yPosition;
    }

    public void paintShot(Graphics g){

        g.setColor(Color.ORANGE);
        g.drawLine(xPosition+23,yPosition,xPosition+23,yPosition-15);

    }

    public void checkIfHitAlien(ArrayList<Alien> list){

            for(Alien alien:list){
                if(getShotYposition()==alien.getYposition()+20&&getXposition()>=alien.getXposition()-20&&getXposition()<=alien.getXposition()+8){
                    alien.raiseHitsCounter();
                    setShootable(false);
                    this.timer.cancel();
                }
            }
    }

    public class ShootingTask extends TimerTask{

        @Override
        public void run() {
            move();
            checkIfHitAlien(ship.getCurrentAlienList());

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:58:01.157

你已经声明了你的 x,y 位置变量，`int`而斜坡因子是`float` 当外星人垂直前进`1`一个像素时，斜坡因子通常会结束`< 0.5`，所以移动看起来就像这样：

```
public void move(){
    setShotYposition(getShotYposition()+1);
    setShotXposition((int)( (int)getShotXposition()+ (float)getRamp() ));
} 
```

当`getRamp() < 0.5`整体`shotXposition`回到原来的样子时，就好像没有坡道一样。

要解决这个问题，只需将您的 x,y 可变量放入任何地方，并仅在您绘制内容时`float`将它们放入。`int`相应的吸气剂也`public synchronized int getShipXposition()`应该返回`float`。

当然`move()`应该保留：

```
public void move(){
    setShotYposition(getShotYposition()+1);
    setShotXposition(getShotXposition()+getRamp() ));
} 
```

# google-maps-api-3 - 为什么谷歌地图几何与绘图库冲突

> ID：14700266
> 
> 赞同：1
> 
> 时间：2013-02-05T04:32:28.143
> 
> 标签：google-maps-api-3

当我在同一页面上同时使用库绘图和几何图形时，几何 decodePath 函数不起作用。如何解决这个问题？

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=falselibraries=drawing"></script>

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=geometry"></script>

google.maps.geometry.encoding.encodePath(latlngs);

google.maps.geometry.encoding.decodePath(encodedPolyline); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T06:26:45.227

您没有正确包含它。

您包含 API 两次，一次使用绘图库（这是不正确的），一次使用几何库。

代替：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=falselibraries=drawing"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=geometry"></script> 
```

尝试[记录的方式](https://developers.google.com/maps/documentation/javascript/libraries)[要请求多个库，请用逗号分隔它们：]

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=drawing,geometry"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:57:05.400

谢谢，但我发现问题是，decodePath 函数只将encodedPath 转换为字符串而不是MVCArray。

如果这样就错了

```
Polyline.setPath = google.maps.geometry.encoding.decodePath(encodedPolyline); 
```

应该喜欢这个

```
Polyline.setPath = toMVCArray_function(encodedPolyline); 
```

# c - atmel 代码错误？

> ID：14700267
> 
> 赞同：0
> 
> 时间：2013-02-05T04:32:30.490
> 
> 标签：c, atmel

这是我在 atmel 6 中使用 c 的代码：

```
#include <avr/io.h>
#include <stdio.h>
#include <math.h>
int a[][][] initialize_hueristic(int[]);

int main(void)
{
    int goal[3],grid_size[3];
    int i, j, k;
    int hueristic[grid_size[0]][grid_size[1]][grid_size[2]];

    hueristic = initialize_hueristic(grid_size);
    hueristic[0][1][0] = 10;
    PORTA = hueristic[0][1][0];

}

int a[][][] initialize_hueristic(int grid_size[])
{
    int hueristic[grid_size[0]][grid_size[1]][grid_size[2]];
    int i, j, k;
    for(i = 0; i < grid_size[0] ; i++)
    {
        for(j = 0; j < grid_size[1]; j++)
            {
                    for(k = 0; grid_size[2]; k++)
                    {
                            hueristic[i][j][k] = 0;
                    }
            }
    }

    return hueristic;
} 
```

atmel 工作室告诉我以下错误：

1.`incompatible types when assigning to type 'int[(unsigned int)(grid_size[0])][(unsigned int)(grid_size[1])][(unsigned int)(grid_size[2])]' from type 'int'`

2.`expected '=', ',', ';', 'asm' or '__attribute__' before 'initialize_hueristic'`

3.`expected '=', ',', ';', 'asm' or '__attribute__' before 'initialize_hueristic'`

有人可以告诉我代码中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:53:05.597

不平凡的错误（编号 1）与以下行有关：

```
hueristic = initialize_hueristic(grid_size); 
```

这一行概括了您对 C 中如何管理数组的误解。

您不能分配整个数组，也不能将它们传递给函数或从函数返回它们。您必须逐个元素地复制数组，或者（最好）将指针传递到数组的开头。

您不需要动态分配数组（嵌入式上下文中的动态分配并不常见）；但是，您确实希望将`hueristic`（作为指针）传递给操作它的每个函数。

```
void initialize_hueristic(int hueristic[][A][B], int grid_size[])
{
    int i, j, k;
    for(i = 0; i < grid_size[0] ; i++) {
        for(j = 0; j < grid_size[1]; j++) {
            for(k = 0; grid_size[2]; k++) {
                hueristic[i][j][k] = 0;
            }
        }
    }
} 
```

您需要在编译时定义值`[A]`和`[B]`（或适合这些维度的任何名称）；内部数组尺寸必须在编译时固定才能使用`[]`符号（这也将消除您的其他两个错误）。

然后你可以这样称呼它：

```
initialize_hueristic(hueristic, grid_size); 
```

您可能会认为该`grid_size`数组没有意义（假设维度在编译时是固定的）并选择对这些维度使用一些常量。

我还建议检查启发式的拼写（我认为这是您打算使用的词）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:40:30.880

You are trying to cheat with dynamic memory. You need to be passing a pointer to your heuristic and using malloc. More like this:

```
void initialize_hueristic(int grid_size[], int ***hueristic)
{
    int i, j, k;
    hueristic = (int*)malloc(grid_size[0])
    for (the inner variable)
        malloc the internal memory
        //etc

for(i = 0; i < grid_size[0] ; i++)
{
    for(j = 0; j < grid_size[1]; j++)
        {
                for(k = 0; grid_size[2]; k++)
                {
                        hueristic[i][j][k] = 0;
                }
        }
}

return hueristic;
} 
```

This will create memory that will exist outside this function. Look up dynamic memory and malloc for more help.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T04:38:31.320

您的代码中有多个错误。首先当然是函数的返回类型。如果你有一个多维数组，只有*最外面*的维度可以不指定，所有其他维度都*必须*指定。

另一个错误是编译器不会捕获的，但会在运行程序时导致奇怪的行为。就是该函数返回一个指向局部变量的“指针”。变量使用的内存`hueristic`在函数栈上，一旦函数返回就不能使用了。

这两个问题的解决方案是在堆中动态分配内存，并返回该指针。您当然必须记住在完成后释放分配的内存。

# objective-c - 文本字段似乎无缘无故被禁用。目标c xcode

> ID：14700269
> 
> 赞同：0
> 
> 时间：2013-02-05T04:33:24.603
> 
> 标签：objective-c, xcode

好像当我第二次在我的应用程序上插入/注册一个帐户时。登录和注册页面上的文本字段似乎被禁用，因为我无法在它们上单击或键入任何内容。这里有谁知道有什么问题吗？这是我的代码。

登录：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize tbPassword,tbUsername;
-(void) createTable: (NSString *) UserTable
      withUserField: (NSString *) UserField
      withPassField: (NSString *) PassField;
{
    char *err;
    NSString *sql = [NSString stringWithFormat:@"CREATE TABLE IF NOT EXISTS '%@' ('%@' " "TEXT PRIMARY KEY, '%@' TEXT);", UserTable, UserField,PassField];
    if (sqlite3_exec(users, [sql UTF8String], NULL, NULL, &err)!=SQLITE_OK) {
        sqlite3_close(users);
        NSAssert(0, @"Could not create table");

    }
    else{
        NSLog(@"table created");
    }
}

-(NSString *) filePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[paths objectAtIndex:0] stringByAppendingPathComponent:@"users.sql"];
}

-(void) openDB {
    if (sqlite3_open([[self filePath]UTF8String],&users) != SQLITE_OK){
        sqlite3_close(users);
        NSAssert(0, @"Database failed to open");
    }
    else{
        NSLog(@"database opened");
    }
}
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [self openDB];
    [self createTable:@"UserAccount" withUserField:@"Username" withPassField:@"Password"];
    self.tbUsername.delegate=self;
    self.tbPassword.delegate=self;
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)btnLogin:(id)sender {
    NSString *select = [NSString stringWithFormat:@"SELECT * FROM UserAccount WHERE Username = '%s' COLLATE NOCASE and Password = '%s'",[tbUsername.text UTF8String],[tbPassword.text UTF8String]];
    sqlite3_stmt *statement;
    if (sqlite3_prepare(users, [select UTF8String], -1, &statement, nil)==SQLITE_OK)
    {
        if(sqlite3_step(statement)==SQLITE_ROW)
        {
            ViewController3 *VC = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewController3"];
            VC.strUsername = self.tbUsername.text;
            [self presentViewController:VC animated:YES completion:nil];

        }
        else
        {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Authentication Failed" message:@"Wrong Username/Password!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];
        }

    }
}

- (IBAction)btnRegister:(id)sender {
}
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    [[self tbUsername]resignFirstResponder];
    [[self tbPassword]resignFirstResponder];
}
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    return [textField resignFirstResponder];
}
@end 
```

登记：

```
#import "ViewController2.h"

@interface ViewController2 ()

@end

@implementation ViewController2
@synthesize tbPassword,tbRepass,tbUsername;
-(void) createTable: (NSString *) UserTable
      withUserField: (NSString *) UserField
      withPassField: (NSString *) PassField;
{
    char *err;
    NSString *sql = [NSString stringWithFormat:@"CREATE TABLE IF NOT EXISTS '%@' ('%@' " "TEXT PRIMARY KEY, '%@' TEXT);", UserTable, UserField,PassField];
    if (sqlite3_exec(users, [sql UTF8String], NULL, NULL, &err)!=SQLITE_OK) {
        sqlite3_close(users);
        NSAssert(0, @"Could not create table");

    }
    else{
        NSLog(@"table created");
    }
}

-(NSString *) filePath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[paths objectAtIndex:0] stringByAppendingPathComponent:@"users.sql"];
}

-(void) openDB {
    if (sqlite3_open([[self filePath]UTF8String],&users) != SQLITE_OK){
        sqlite3_close(users);
        NSAssert(0, @"Database failed to open");
    }
    else{
        NSLog(@"database opened");
    }
}
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [self openDB];
    [self createTable:@"UserAccount" withUserField:@"Username" withPassField:@"Password"];
    self.tbUsername.delegate=self;
    self.tbPassword.delegate=self;
    self.tbRepass.delegate=self;
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)btnRegister:(id)sender
{
    NSString *select = [NSString stringWithFormat:@"SELECT * FROM UserAccount WHERE Username = '%s' COLLATE NOCASE",[tbUsername.text UTF8String]];
    sqlite3_stmt *statement;
    if (sqlite3_prepare(users, [select UTF8String], -1, &statement, nil)==SQLITE_OK)
    {
        if(sqlite3_step(statement)==SQLITE_ROW)
        {

            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Username already exist!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show];

        }
        else
        {
           if ([tbUsername.text isEqualToString:@""])
            {

                UIAlertView *alert2 = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Please enter a username." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alert2 show];
            }
            else if([tbPassword.text length]==0 || [tbRepass.text length]==0)
            {

                UIAlertView *alert3 = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Please enter a password." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alert3 show];
            }
            else if([tbPassword.text length]>0 && [tbRepass.text length]>0)
            {

                if([tbPassword.text isEqualToString:tbRepass.text])
                {
                    NSLog(@"Password Match");
                    NSString *username = tbUsername.text;
                    NSString *pass = tbPassword.text;

                    NSString *sql = [NSString stringWithFormat:@"INSERT INTO UserAccount ('Username','Password') VALUES ('%@','%@')",username,pass];
                    char *err;
                    if (sqlite3_exec(users, [sql UTF8String], NULL, NULL, &err)!=SQLITE_OK)
                    {
                        sqlite3_close(users);
                        NSAssert(0, @"Could not update table)");

                    }
                    else
                    {
                        NSLog(@"table updated");
                        UIAlertView *alert4 = [[UIAlertView alloc]initWithTitle:@"Done" message:@"Account was registered successfully!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                        [alert4 show];
                        ViewController *VC = [self.storyboard instantiateViewControllerWithIdentifier:@"ViewController"];
                        VC.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

                       [self presentViewController:VC animated:YES completion:nil];

                        tbUsername.text = @"";
                        tbPassword.text = @"";

                    }

                }

                else
                {
                    UIAlertView *alert5 = [[UIAlertView alloc]initWithTitle:@"Error" message:@"Password does not match." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                    [alert5 show];
                }
            }
        }
    }
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    [[self tbUsername]resignFirstResponder];
    [[self tbPassword]resignFirstResponder];
    [[self tbRepass]resignFirstResponder];
}
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    return [textField resignFirstResponder];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:37:25.737

从 touchesbegan 中删除这些行

```
[[self tbUsername]resignFirstResponder];
    [[self tbPassword]resignFirstResponder]; 
```

这些行关闭键盘

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:17:14.253

我刚刚注意到，当我成功地将数据插入数据库时​​。当我的键盘仍然可见时，该页面将我重定向到登录。我不确定我是否正确，但是当我将 resignFirstResponder 添加到我的 btnRegister 时，它会将我重定向到登录。文本字段仍然可以工作！谢谢顺便说一句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:22:11.093

UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hideKeyboard)]; [self.view addGestureRecognizer:gestureRecognizer];

*   (void) hideKeyboard { [[self tbUsername]resignFirstResponder]; [[self tbPassword]resignFirstResponder]; }

你也可以在创建它的 obj 替换后创建新的 UIImageView...

这

[self.view addGestureRecognizer:gestureRecognizer];

和

[UIImageViewObj addGestureRecognizer:gestureRecognizer];

# c# - 我可以在 WPF 窗口标题旁边添加文本框吗

> ID：14700270
> 
> 赞同：1
> 
> 时间：2013-02-05T04:33:28.050
> 
> 标签：c#, wpf, titlebar

我们有一个要求，需要更改我无法更改现有代码的标题。我可以使用现有的命名空间、类似于现有应用程序的可扩展性的库来编写我的 C# 代码。

我的问题是如何根据我的要求从我的代码中更改标题（现有代码已经根据他们的要求更改了标题）

请提出任何更改

谢谢， 拉杰什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:47:52.163

```
for (int i = 0; i < Application.Current.Windows.Count; i++)
        {
            var win = Application.Current.Windows[i];
            if (win.Title == "MainWindow")
                win.Title = "LastWindow";
        } 
```

我希望这能帮助你给出一个想法。你可以在你的视图项目中的任何地方应用这个代码。

# silverlight - 如何在 Silverlight 5 中更改 ReadOnly 文本框中的背景颜色？

> ID：14700272
> 
> 赞同：3
> 
> 时间：2013-02-05T04:33:52.167
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0, silverlight-5.0, silverlight-toolkit

我想更改只读文本框的颜色

可以将默认颜色更改为**白色**

```
<Style TargetType="TextBox">
            <Setter Property="Background"
                Value="White"/>
            <Setter Property="Foreground"
                Value="Black"/>
        </Style> 
```

和文本框为

```
<TextBox Grid.Row="2" Grid.Column="1" HorizontalAlignment="Stretch" Height="18" Padding="0" IsReadOnly="True" Margin="3,0,3,0"/> 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T06:44:59.533

问题不在于 Background Setter 不起作用，而是 TextBox 的 ReadOnly 状态具有灰色覆盖。

这里有两个选项：

1.  在 Expression Blend 中编辑 TextBox 的控件模板，并去掉覆盖。
2.  将**IsReadOnly**设置为**false**并将**IsHitTestVisible**设置为**false**，这将阻止编辑 TextBox 而不更改其视觉状态。

# python - 在 networkx.write_gexf 中分配默认命名空间

> ID：14700273
> 
> 赞同：1
> 
> 时间：2013-02-05T04:33:54.603
> 
> 标签：python, networkx

将 python 的 networkx 库生成的这段代码作为有效的 GEXF 文件提供，我在文档中找不到将 xmlns:ns0 更改为 xmlns:viz... GEXF 兼容命名空间的任何地方。

```
<?xml version="1.0" encoding="utf-8"?><gexf xmlns:ns0="http://www.gexf.net/1.1draft/viz"     
version="1.1" xmlns="http://www.gexf.net/1.1draft" xmlns:viz="http://www.gexf.net/1.1draft/viz"    
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   
xsi:schemaLocation="http://www.w3.org/2001/XMLSchema-instance">

  <graph defaultedgetype="directed" mode="static">
<attributes class="node" mode="static">
  <attribute id="0" title="origin" type="double" />
  <attribute id="1" title="size" type="integer" />
</attributes>
<nodes>
  <node id="0" label="Vijana Amani Pamoja (VAP)">
    <ns0:color b="70" g="11" r="160" />
    <ns0:size value="10" />
    <attvalues>
      <attvalue for="0" value="1.25" />
      <attvalue for="1" value="10" />
    </attvalues>
  </node> 
```

在某个地方，我可能已经覆盖了 networkx 的 write_gexf 函数的默认命名空间的 VIZ 部分，但我也不知道我在哪里做的 - 所以我在这里问。

```
networkx.write_gexf(G,f) # G is the graph and f is the file to write. 
```

（已编辑）：节点说 ns0:... 而不是 viz:... 如 GEXF 文档中所示。这会导致与使用 viz 参数的其他 GEXF 库的兼容性问题（并且找不到它们）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T11:08:32.307

我遇到了同样的问题，我在 gexf.py 的 GEXFWriter 类中更新了“add_viz”函数，如下所示：

```
 def add_viz(self,element,node_data):
    viz=node_data.pop('viz',False)
    if viz:
        color=viz.get('color')
        if color is not None:
            e=Element("viz:color")
            e.attrib['r']=str(color.get('r'))
            e.attrib['g']=str(color.get('g'))
            e.attrib['b']=str(color.get('b'))
            if self.VERSION!='1.1':
                e.attrib['a']=str(color.get('a'))
            e.text=" "
            element.append(e)
        size=viz.get('size')
        if size is not None:
            e=Element("viz:size")
            e.attrib['value']=str(size)
            e.text=" "
            element.append(e)

        thickness=viz.get('thickness')
        if thickness is not None:
            e=Element("viz:thickness")
            e.attrib['value']=str(thickness)
            e.text=" "
            element.append(e)

        shape=viz.get('shape')
        if shape is not None:
            if shape.startswith('http'):
                e=Element("viz:shape")
                e.attrib['value']= 'image'
                e.attrib['uri']= str(shape)
            else:
                e=Element("viz:shape")
                e.attrib['value']= str(shape)
            e.text=" "
            element.append(e)

        position=viz.get('position')
        if position is not None:
            e=Element("viz:position")
            e.attrib['x']= str(position.get('x'))
            e.attrib['y']= str(position.get('y'))
            e.attrib['z']= str(position.get('z'))
            e.text=" "
            element.append(e)
    return node_data 
```

这解决了我使用的 GEXF 库/工具的兼容性问题。

最好的，ZP

# c++ - C ++中的可比数组

> ID：14700274
> 
> 赞同：1
> 
> 时间：2013-02-05T04:33:56.477
> 
> 标签：c++, arrays, comparable

我的代码中出现以下错误。我对 C++ 很生疏，不知道我做错了什么。

错误信息：

```
Error: Field has incompatible type 'int []' 
```

代码：

```
template<typename Comparable> class OrderedCollection
{         
private:
    Comparable data[];  //ERROR CAUSED BY THIS LINE
    int _size;
    int _current;
    const int MAX_SIZE = 100; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:50:32.883

一个可能的解决方法是使用接受 size_t 的第二个模板参数。

```
template<typename Comparable, size_t MAX_SIZE = 100> class OrderedCollection
    {

    private:
        Comparable data[MAX_SIZE];  //Error should be gone
        int _size;
        int _current; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:34:39.830

您需要指定`const`数组大小，数组大小必须在编译时知道。

这样的事情应该解决：

```
 Comparable data[MAX_SIZE]; 
```

# wordpress - 如何在没有元键的帖子上返回所有带有元键的帖子？

> ID：14700276
> 
> 赞同：-1
> 
> 时间：2013-02-05T04:34:10.627
> 
> 标签：wordpress

```
 query_posts(array(
                'posts_per_page'=>-1,
                'post_type' => 'post',
                'meta_key' => 'startDate',
                'meta_value' => date('m.d.Y'),
                'meta_compare' => '>=',
                'orderby' => 'meta_value',
                'order' => 'ASC'

            )); 
```

我有这个自定义查询，它返回带有元键值的帖子，我的问题是如何在带有元键值的帖子下方返回没有元键值的帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:13:50.007

不要使用 query_posts。每次你这样做，都会杀死一只小狗。设置一个新的查询对象并在你的循环中使用它。

```
$args = array(
  'posts_per_page' => -1,
  'post_type' => 'post',
  'meta_key' => 'startDate',
  'meta_value' => date('m.d.Y'),
  'meta_compare' => '>=',
  'orderby' => 'meta_value',
  'order' => 'ASC'  
);

$my_query = new WP_Query( $args );
if( $my_query->have_posts() ) :
    while( $my_query->have_posts() ) : $my_query->the_post(); 

    if( some condition to test for meta value ) :
        // your code
    endif;

    endwhile;
endif;

wp_reset_query();

if( $my_query->have_posts() ) :
    while( $my_query->have_posts() ) : $my_query->the_post(); 

    if( some other condition to test for no meta value ) :
        // your code
    endif;

    endwhile;
endif; 
```

# youtube-api - youtube playlist_items.delete 的批量请求总是失败

> ID：14700279
> 
> 赞同：1
> 
> 时间：2013-02-05T04:34:29.767
> 
> 标签：youtube-api, google-api-ruby-client

我提供了“id”，但它总是返回“必需参数：id”的错误

顺便说一句，如果我使用普通请求（即非批处理），那么相同的代码

```
:api_method => yt.playlist_items.delete,
:parameters => {:id => ids[0]} 
```

将成功没有错误。但是如果我使用批处理请求，那么它总是失败！

这是我的代码

```
require 'google/api_client'

client = Google::APIClient.new(:application_name => 'YouBoard', :application_version => '1.0')
yt = client.discovered_api('youtube', 'v3')
client.authorization.access_token = 'Some Access Token'

response = client.execute!(
  :api_method => yt.playlist_items.list,
  :parameters => {
    :playlistId => pid,
  :part => 'id'
}
)

# Get playlist_item's id
ids = response.data.items.collect {|x| x.id}

batch = Google::APIClient::BatchRequest.new() do |result|
  p result.data
end

batch.add(
 :api_method => yt.playlist_items.delete,
 :parameters => {:id => ids[0]}
)

client.execute!(batch) 
```

这是错误

```
"error"=>{"errors"=>[{
"domain"=>"global", 
"reason"=>"required", 
"message"=>"Required parameter: id", 
"locationType"=>"parameter", 
"location"=>"id"}], "code"=>400, "message"=>"Required parameter: id"}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:24:06.330

这是由于 Google API Ruby 客户端库中的一个错误造成的。我在图书馆的问题跟踪器中跟进：[https ://code.google.com/p/google-api-ruby-client/issues/detail?id=79](https://code.google.com/p/google-api-ruby-client/issues/detail?id=79)

# html - 当浏览器窗口按比例缩小时，Divs 换行

> ID：14700281
> 
> 赞同：0
> 
> 时间：2013-02-05T04:34:53.133
> 
> 标签：html, css

这可能是我第一次尝试在线询问有关 CSS 或 HTML 的问题，但正如标题所述，当浏览器窗口缩小时（浏览器窗口未满屏幕）。

div 被设置为 3 个 div 在一个 div 的旁边，该 div 环绕在 3 个周围，这些 div 是为了在屏幕上水平布局。如果窗口不再足够大以水平显示所有内容，而不是让窗口像现在一样折叠，我希望浏览器显示水平滚动条。

下面正是我为 div 所写的内容，这让我现在非常沮丧。

```
.wrap {
    height:auto;
    width:100%;
    margin:10px 0 0 0;
    overflow:hidden;
}

.box1 {
    height:320px;
    width: 240px;
    border: 1px solid #777;
    margin: 0 0 0 10px;
    display: inline-block;
    float:left;
}

.box2 {
    height:320px;
    width:62%;
    margin: 0 -3px 0 1px;
    border: 1px solid #777;
    display:inline-block;
}

.box3 {
    height:320px;
    width: 240px;
    border: 1px solid #777;
    display: inline-block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:38:59.250

浮动...浮动，通常以意想不到或不受欢迎的方式。请改用`inline-block`布局，并在包装​​器上使用固定宽度。

```
.wrapper {width: 960px;}
.box {width: 240px; display: inline-block;}
.box:nth-child(2) {width: 480px;}

<div class="wrapper">
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:42:00.747

Having it at 100% will cause the floats to drop bellow each other.

Set a .wrap to a set width if you want a horizontal scroll bar

# android - 停止广播接收器时出现问题

> ID：14700285
> 
> 赞同：0
> 
> 时间：2013-02-05T04:35:24.960
> 
> 标签：android

我正在做一个会说出来电者姓名的应用程序。它有一个主活动和两个广播接收器，用于监控来电和短信。从该接收器开始，它会启动一项服务，以说出呼叫者的姓名。

我面临的问题是

```
 I want to start ans stop this broadcast receivers from the UI.i mean with the help of two buttons. 
```

有可能吗，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:40:37.893

Sure. When you want to start it, call registerReceiver. When you want it off, call unregisterReceiver.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:10:15.047

在按钮单击注册接收器：

```
YourReceiver mReceiver ;
btnRegister.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                                  IntentFilter filter = new IntentFilter(your action filter);
                     mReceiver = new YourReceiver();
                                 registerReceiver(mReceiver, filter);
    }
}); 
```

未注册的接收者：

```
 btnRegister.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
try
        {

            unregisterReceiver(mReceiver);
        }catch(IllegalArgumentException ex)
        {
            //your message.
        }
    }
}); 
```

希望这可以帮助...

# php - Cakephp - 使用 AND 和 OR 条件搜索

> ID：14700288
> 
> 赞同：0
> 
> 时间：2013-02-05T04:35:32.947
> 
> 标签：php, cakephp, search

我正在尝试实现所有字段都是可选的搜索，因此我必须根据用户输入过滤我的结果，但我一直坚持如何实现这一目标......

搜索字段如下

1）通过电子邮件搜索：

2）按名称搜索：

3）按注册日期搜索：（即fromDate和toDate）

选项 1) 和 3) 能够实现，因为只需要 AND 条件。

问题在于选项 2）名称应该匹配 first_name 或 last_name，所以我必须有一个 OR 条件，我无法找到正确的方法来做到这一点..

注意：所有字段都是可选的...

这是我的代码片段....

```
$conditions = array();

if(!empty($this->request->data['searchbyemail'])) {

   $conditions[] = array('User.username' => $this->request->data['searchbyemail']);
}

if(!empty($this->request->data['regfromdate']) &&
   !empty($this->request->data['regtodate'])) {

    $conditions[] = array('User.created BETWEEN ? AND ?' => 
    array($this->request->data['regfromdate'], $this->request->data['regtodate']));
}

if(!empty($this->request->data['searchbyname'])) {

    $conditions[] = array(
'OR' => array(
        'User.first_name' => $this->request->data['searchbyname'],
        'User.last_name' => $this->request->data['searchbyname']

                ));
}

$this->paginate = array('conditions' => $conditions);
$this->set('users', $this->paginate()); 
```

我试图实现的查询应该是这样的

```
SELECT * FROM  `users` AS `User`
WHERE `User`.`username` = 'a'
AND `User`.`created`
BETWEEN '2013-02-01'
AND '2013-02-05'
AND ((`User`.`first_name` LIKE '%b%')) OR ((`User`.`last_name` LIKE '%b%')) 
```

我能够在 cakephp 中生成这个查询，但是它是静态的，我正在寻找一种动态的方式来生成这个查询，因为搜索字段是可选的，并且查询应该根据用户输入而改变.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T05:33:10.663

要将`LIKE`运算符与 % 通配符一起使用，您可以：

```
 'OR' => array(
            'User.first_name LIKE' => "%" . $this->request->data['searchbyname'] . "%",
            'User.last_name LIKE' => "%" . $this->request->data['searchbyname'] . "%"
        ), 
```

# objective-c - 为什么 NSLog 有时会为 ucode 字符打印出八进制？

> ID：14700289
> 
> 赞同：11
> 
> 时间：2013-02-05T04:35:33.097
> 
> 标签：objective-c, xcode, nsstring, nslog

我在普通 iPad 单视图应用程序的 viewDidLoad 函数中运行以下代码：

```
/*
 *  Print the string.  A lot.
 */
for (int i = 0; i < 300; i++) {
    NSLog(@"%d\n", i);
    NSLog(@"⊢ ⊣ ⊥ ⊻ ⊼ ⊂ ⊃ ⊑ ⊒ \n");
} 
```

输出如下所示：

```
2013-02-04 20:17:49.718 testplay[59585:c07] 228
2013-02-04 20:17:49.718 testplay[59585:c07] ⊢ ⊣ ⊥ ⊻ ⊼ ⊂ ⊃ ⊑ ⊒ 
2013-02-04 20:17:49.719 testplay[59585:c07] 229
2013-02-04 20:17:49.719 testplay[59585:c07] ⊢ ⊣ ⊥ ⊻ ⊼ ⊂ ⊃ ⊑ ⊒ 
2013-02-04 20:17:49.719 testplay[59585:c07] 230
2013-02-04 20:17:49.720 testplay[59585:c07] ⊢ ⊣ ⊥ ⊻ ⊼ ⊂ ⊃ ⊑ ⊒ 
2013-02-04 20:17:49.720 testplay[59585:c07] 231
2013-02-04 20:17:49.720 testplay[59585:c07] ⊢ ⊣ ⊥ ⊻ ⊼ ⊂ ⊃ \342\212\221 ⊒ 
2013-02-04 20:17:49.723 testplay[59585:c07] 232
2013-02-04 20:17:49.724 testplay[59585:c07] ⊢ ⊣ ⊥ ⊻ ⊼ ⊂ ⊃ ⊑ ⊒ 
```

八进制几乎总是发生在同一个字符上，并且每次运行大约随机出现 3 次打嗝。

虽然它在 NSLog() 中相对无害，但它意味着 unicode 字符可能在某种程度上被不规则地处理。如果有这种行为的历史或我可以查看的某些资源，那就太好了。

[附录：删除了对我如何遇到此问题的参考。我希望了解 NSLog 为何以及如何读取损坏的 unicode 字符。]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T08:21:45.640

***精简版：***

我认为如果`NSLog()`输出的 UTF-8 序列恰好落在 Xcode 用于调试进程的标准错误的伪终端缓冲区的边界上，就会发生这种情况。

如果我的假设是正确的，这只是 Xcode 调试器输出的问题，并不意味着应用程序中存在任何 Unicode 问题。

***长版：***

如果您在模拟器中运行您的应用程序，则`lsof -p <pid_of_simulated_app>`显示标准错误（文件描述符 2）被重定向到伪终端：

```
# lsof -p 3251
...
testplay 3251 martin    2w     CHR               16,2     0t131     905 /dev/ttys002
... 
```

并`lsof -p <pid_of_Xcode>`显示 Xcode 打开了相同的伪终端：

```
# lsof -p 3202
...
Xcode   3202 martin   51u     CHR               16,2       0t0     905 /dev/ttys002
... 
```

`NSLog()`写入标准错误。使用系统调用跟踪器“dtruss”可以看到 Xcode 从伪终端读取日志消息。对于单个日志消息

```
NSLog(@"⊢ ⊣ ⊥ ⊻ ⊼ ⊂ ⊃ ⊑ ⊒ \n"); 
```

它看起来像这样：

```
# dtruss -n Xcode -t read_nocancel
 3202/0xe101:  read_nocancel(0x31, "2013-02-05 08:57:44.744 testplay[3251:11303] \342\212\242 \342\212\243 ... \342\212\222 \n\0", 0x8000)       = 82 0 
```

但是对于许多`NSLog()`快速相互跟随的语句，有时会发生以下情况：

```
# dtruss -n Xcode -t read_nocancel
...
 3202/0xd828:  read_nocancel(0x33, "2013-02-05 08:39:51.156 ...", 0x8000) = 1024 0
 3202/0xd87b:  read_nocancel(0x33, "\212\273 \342\212\274 ...", 0x8000) = 24 0 
```

如您所见，Xcode 已经从伪终端读取了 1024 个字节，并且下一次读取以不完整的 UTF-8 序列开始。在这种情况下，Xcode“看不到”第​​一次读取的最后一个字节和第二次读取的前两个字节是同一 UTF-8 序列的一部分。我假设 Xcode 将所有 3 个字节视为无效的 UTF-8 序列并将它们打印为八进制数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T00:58:28.343

一种解决方法，在您的循环中，放置一个“fflush(stderr);” 在第二个 NSLog 语句之后；这将强制 stderr 在继续之前提交并写入缓冲区。

# android - 滑动抽屉不显示

> ID：14700293
> 
> 赞同：0
> 
> 时间：2013-02-05T04:36:01.293
> 
> 标签：android, scrollview, slidingdrawer

我想要一个滑动抽屉，它显示在我的视图底部，但它目前没有显示。我还尝试使用线性布局作为根，滚动视图的权重为 1，但这会导致滚动视图及其内容不显示。有任何想法吗？

我的观点：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ScrollView
    android:id="@+id/scrollLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        tools:context=".AddScheduleItemActivity" >

        .
        .
        .

    </LinearLayout>
</ScrollView>

<SlidingDrawer
    android:id="@+id/slidingDrawer1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/scrollLayout"
    android:content="@+id/content"
    android:handle="@+id/handle" >

    <Button
        android:id="@+id/handle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Handle" />

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/hadsfndle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="sdf" />
    </LinearLayout>
</SlidingDrawer> 
```

谢谢，内森

![它应该是什么样子](../Images/630e217b4e05f1a7bc9da6182706c959.png)

在图片中，我希望蓝色是滚动视图和内容，绿色是滑块的句柄。

尝试遵循其他一些建议，但仍然无法正常工作。滚动视图的内容显示正常，但未显示滑块。需要更多建议！谢谢！

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="bottom"
android:gravity="bottom"
android:orientation="vertical" >

<ScrollView
    android:id="@+id/scrollLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        .
        .
        .

    </RelativeLayout>
</ScrollView>

<SlidingDrawer
    android:id="@+id/slidingDrawer1"
    android:layout_width="match_parent"
    android:layout_height="50dip"
    android:layout_alignParentBottom="true"
    android:layout_below="@+id/scrollLayout"
    android:content="@+id/content"
    android:handle="@+id/handle"
    android:orientation="vertical" >

    <Button
        android:id="@+id/handle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Handle" />

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/hadsfndle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="sdf" />
    </LinearLayout>
</SlidingDrawer>

</RelativeLayout> 
```

好吧，似乎不再支持滑动抽屉，所以我想我会寻找替代方案:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:16:37.293

您正在尝试在底部显示您的滑块，请尝试以下代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    >

    <ScrollView
        android:id="@+id/scrollLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/layout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

        </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:id="@+id/LinearLayout01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_below="@+id/layout"
        android:orientation="vertical" >

        <SlidingDrawer
            android:id="@+id/SlidingDrawer"
            android:layout_width="wrap_content"
            android:layout_height="250dip"
            android:content="@+id/contentLayout"
            android:handle="@+id/slideHandleButton"
            android:padding="10dip" >

            <Button
                android:id="@+id/slideHandleButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher" >
            </Button>

            <LinearLayout
                android:id="@+id/contentLayout"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="#C0C0C0"
                android:gravity="center|top"
                android:orientation="vertical"
                android:padding="10dip" >

                <Button
                    android:id="@+id/Button01"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Content" >
                </Button>

                <Button
                    android:id="@+id/Button02"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Content" >
                </Button>

                <Button
                    android:id="@+id/Button03"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Content" >
                </Button>
            </LinearLayout>
        </SlidingDrawer>
    </LinearLayout>

</RelativeLayout> 
```

如果上面的代码不能解决你的问题，那么改变父布局`LinearLayout`给`weightsum=10`然后在你之间分配`scrollview & sliderDrawer`相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:39:25.387

Try this,

Add `layout_alignParentBottom` on your `SlidingDrawer`.

```
 android:layout_alignParentBottom="true" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T16:59:48.467

也许您的问题已经在[这里](https://stackoverflow.com/questions/6044094/sliding-drawer-layout-problem-in-android)得到了回答。

尝试这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
 >

<ScrollView
    android:id="@+id/scrollLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        .
        .
        .

    </RelativeLayout>
</ScrollView>

<SlidingDrawer
    android:id="@+id/slidingDrawer1"
    android:layout_width="match_parent"
    android:layout_height="50dip"
    android:layout_alignParentBottom="true"
    android:content="@+id/content"
    android:handle="@+id/handle"
    android:orientation="vertical" >

    <Button
        android:id="@+id/handle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Handle" />

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/hadsfndle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="sdf" />
    </LinearLayout>
</SlidingDrawer>

</RelativeLayout> 
```

# analytical - 查找将 500 个灯泡连接到 500 个开关的最少行程

> ID：14700301
> 
> 赞同：1
> 
> 时间：2013-02-05T04:36:43.803
> 
> 标签：analytical

一座宫殿的大厅里有500个灯泡。这些灯泡的开关控制（带有 500 个开关）位于另一个房间。不幸的是，开关没有标有灯泡编号。一个新工人来了。他必须去大厅的最少次数是多少才能准确地知道哪个灯泡对应于哪个灯泡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:49:46.880

它是**498**。

前 497 个行程将帮助他识别 497 个链接。

剩余 3 个灯泡。他打开一个开关，等待一段时间然后将其关闭。他立即打开下一个开关。

现在他去大厅，一个灯泡会亮，找到开关。两个灯泡会熄灭，他感觉那两个灯泡，其中一个会很热，因为它打开了一段时间。两个开关都找到了。

# php - 如何将 Tornado 集成到我的（当前）Apache 驱动的站点中？

> ID：14700305
> 
> 赞同：0
> 
> 时间：2013-02-05T04:37:32.653
> 
> 标签：php, python, apache, localhost, tornado

我有一个用 PHP 构建的网站，目前在 Apache 服务器（本地 XAMPP）上运行。我想将实时聊天系统集成到网站中。PHP 和 Apache 根本不适合这个，我决定使用 Tornado 和 Python。

在将所有“聊天”委托给 Tornado 服务器的同时，将站点的基础保持在 PHP 并在 Apache 上运行的最简单方法是什么？我希望能够在本地执行此操作（……不用说，我已经成功安装了 Tornado 并且一直在编写所述脚本。但是，我不确定如何将它集成到现有的站点中。 )

任何建议都非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:55:55.443

最简单的是在不同的端口/地址上运行 Tornado 和 Apache

所以你可能已经让 Apache 监听了 80 端口。Tornado 可以监听 81 端口

如果服务器是多宿主服务器，您可以让 Apache 监听 abcd:80，让 Tornado 监听 abce:80。这意味着您至少必须在不同的子域上拥有 Apache 部分和 Tornado 部分

如果你需要在同一个域和端口下运行它们，你需要在它们前面有一些精简和快速的东西来计算出哪个 url 被路由到哪个服务器。

# javascript - 将文件写入子目录 node.js

> ID：14700308
> 
> 赞同：1
> 
> 时间：2013-02-05T04:37:39.210
> 
> 标签：javascript, node.js, express

我正在使用 node 和 express 并且我有一个目录结构，例如

```
public
   img
   css
   js
server.js 
```

在 server.js 我有以下代码用于写入 png 文件

```
fs.writeFile('testfile.png', imageData, function(err){

        res.send("file successfully created");

    }); 
```

这将在根目录中创建文件，即具有以下目录结构

```
public
   img
   css
   js
server.js
testfile.png 
```

如何`testfile.png`在`img`目录中创建？仅使用`img/testfile.png`,`/img/testfile.png`或`/public/img/testfile.png`不起作用 - 不创建文件。

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T04:40:46.807

你可以这样做

`'./public/img/testfile.png'`

或者，您可以像这样给出相对路径

`__dirname + '/public/img/testfile.png'`

还要检查目录的权限`img`。可能是没有给出写权限。

# php - 通过ajax上传图片到imm.io

> ID：14700313
> 
> 赞同：1
> 
> 时间：2013-02-05T04:37:59.337
> 
> 标签：php, ajax, curl, image-uploading

我试图使用 php 和 ajax 创建一个网页，让用户使用其 API将文件上传到[imm ：](http://imm.io/api/)

[http://imm.io/api/](http://imm.io/api/)（随便看看，因为它只是一个简单的例子）

我想知道如何使用jquery动态上传，想法是重现下面的工作流程：

1.  用户填写表格
2.  单击提交按钮时，它将获取表单值并将它们发送到 imm.io
3.  等到收到json响应
4.  显示更新 div 的错误/成功消息

我的代码：

```
var request = $.ajax({
      url: 'http://imm.io/store/',
      type: "POST",
      cache: false,
      data: { ??? },  //here my problem resides
      dataType: "json"
    });

    //waiting ultil the request be finished
    $.when( request ).then(function(data, textStatus, jqXHR){
        console.log(data);
    }); 
```

如果您在上面注意到，则`???`表示问题所在，因为我不知道如何将文件值发送为“数据”所需的 json 格式。

在 SO 中看到一些问题看起来像 ajax 无法发送文件。

*   [如何使用 jquery 发送文件输入？](https://stackoverflow.com/questions/3572993/how-to-send-file-input-using-jquery)
*   [如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

所以，我只需要一只手来指导正确的方向......还有一件事：我从未使用过 CURL php 扩展，但我认为这可能是另一种选择，对吧？

编辑，我忘了告诉你为什么我没有使用上面问题中提到的插件：因为插件不会等到请求完成，所以，我从来没有从服务器得到真正的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:40:08.703

我找到了一个很好的[教程](http://blog.new-bamboo.co.uk/2010/7/30/html5-powered-ajax-file-uploads)。也是一个[jquery插件](https://github.com/lgersman/jquery.orangevolt-ampere/blob/master/src/jquery.upload.js)

希望有帮助；）

# javascript - 从简单的 POST 请求到 node.js 的响应中的“输入意外结束”消息

> ID：14700314
> 
> 赞同：2
> 
> 时间：2013-02-05T04:38:06.910
> 
> 标签：javascript, json, node.js

我编写了一个简单的 node.js 程序来演示我在其他地方遇到的问题。

给定以下 node.js 程序：

```
var http = require('http');
http.createServer(function (req, res) {
// simple repro for json deserializaiton error cause by right quote character '’'
var json = { 'foo': 'bar’s answer' };
var write = JSON.stringify(json);
res.writeHead(200, { 'Content-Type': 'application/json', 'Content-Length': write.length });
res.end(write);
}).listen(8085, '127.0.0.1'); 
```

当我使用 chrome 的 Advanced Rest Client 对此进行 POST 时，我得到了 200 OK 响应，但是在响应内容的 JSON 选项卡中，出现了术语“输入意外结束”而不是解析的 json。

在原始选项卡中，显示了字符串“{“foo”：“bar's answer”，这表明无法解析 json 的原因（它缺少结束的 '}'）。

如果我从原始对象中删除“”，则响应在返回时解析得很好。

知道为什么一个简单的 ''' 会导致 json 无法解析吗？我在测试中遇到了与其他各种角色相同的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T05:20:58.870

您需要将 设置`Content-Length`为[`byteLength`](http://nodejs.org/api/buffer.html#buffer_class_method_buffer_bytelength_string_encoding)：

```
res.writeHead(200, {
    'Content-Type': 'application/json',
    'Content-Length': Buffer.byteLength(write)
}); 
```

因为它会不同于`String` `length`：

```
console.log('bar’s answer'.length);             // 12
console.log(Buffer.byteLength('bar’s answer')); // 14 
```

这是因为，使用[UTF-8 编码](http://en.wikipedia.org/wiki/UTF-8)（[Node 的默认值](http://nodejs.org/api/buffer.html#buffer_new_buffer_str_encoding)），只有当字符串完全由[ASCII 码点](http://en.wikipedia.org/wiki/ASCII)(U+0000 - U+007F) 组成时，它们才会匹配，而此字符串包含[U+2019](http://unicode.org/cldr/utility/character.jsp?a=2019)，“[单曲线引用，对](http://en.wikipedia.org/wiki/Quotation_mark_glyphs#Quotation_marks_in_Unicode)。” 超出该范围，代码点会根据需要扩展到多个字节——在 U+2019 的情况下为 3：

```
[ 0xE2, 0x80, 0x99 ] 
```

# java - Apache HttpAsyncClient 在负载下挂起

> ID：14700315
> 
> 赞同：6
> 
> 时间：2013-02-05T04:38:09.610
> 
> 标签：java, http

使用 Apache **HttpAsyncClient Beta3**，当我将最多 50 个并发请求加载到各种服务器时，它似乎开始很好，我处理了大约 3000 个 url。

但是后来我碰壁了，我通过日志中的对等异常重置了这些连接。此时异步客户端只是挂起。

如果异步客户端将其作为异常传递给我的回调，那么由对等方重置的连接本身就可以了，但是我的回调代码没有被调用并且整个事情都被锁定了。

```
2013-02-04 13:52:14,739 ERROR org.apache.http.nio.protocol.HttpAsyncRequestExecutor (I/O dispatcher 9): http-outgoing-139 [ACTIVE] HTTP protocol exception: Connection r
eset by peer
java.io.IOException: Connection reset by peer
        at sun.nio.ch.FileDispatcher.read0(Native Method)
        at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:21)
        at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:202)
        at sun.nio.ch.IOUtil.read(IOUtil.java:175)
        at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:243)
        at org.apache.http.impl.nio.reactor.SessionInputBufferImpl.fill(SessionInputBufferImpl.java:97)
        at org.apache.http.impl.nio.codecs.AbstractMessageParser.fillBuffer(AbstractMessageParser.java:115)
        at org.apache.http.impl.nio.DefaultNHttpClientConnection.consumeInput(DefaultNHttpClientConnection.java:167)
        at org.apache.http.impl.nio.DefaultHttpClientIODispatch.onInputReady(DefaultHttpClientIODispatch.java:125)
        at org.apache.http.impl.nio.DefaultHttpClientIODispatch.onInputReady(DefaultHttpClientIODispatch.java:50)
        at org.apache.http.impl.nio.reactor.AbstractIODispatch.inputReady(AbstractIODispatch.java:112)
        at org.apache.http.impl.nio.reactor.BaseIOReactor.readable(BaseIOReactor.java:160)
        at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvent(AbstractIOReactor.java:342)
        at org.apache.http.impl.nio.reactor.AbstractIOReactor.processEvents(AbstractIOReactor.java:320)
        at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280)
        at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:106)
        at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:604)
        at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:23:46.597

好吧，我通过改用 Netty 解决了这个问题，它更加稳定和可预测。

# sql - 如何反转查询中的通过/失败状态列？

> ID：14700318
> 
> 赞同：0
> 
> 时间：2013-02-05T04:38:53.280
> 
> 标签：sql, sql-server

我有一张桌子：

```
sid   sname   status
101    abc    pass
102    cda    fail
103    fgh    pass
104    hij    pass
105    jqk    fail
106    lfj    fail 
```

我想要一个输出为：

```
sid   sname   status
101    abc    fail
102    cda    pass
103    fgh    fail
104    hij    fail
105    jqk    pass
106    lfj    pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:44:35.610

```
select 
    sid, 
    sname,
    case
        when status = 'pass' then 'fail'
        when status = 'fail' then 'pass'
        else null
    end as 'status'
from tableX 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:53:37.503

```
UPDATE Table
SET Status = CASE Status WHEN 'pass' THEN 'fail' ELSE 'pass' END
GO
SELECT *
FROM Table
GO 
```

或者：

```
UPDATE Table
SET Gender = IIF(Gender = 'pass', 'fail', 'pass')
GO
SELECT *
FROM Table
GO 
```

# java - What Java library can I use to process WSDL files?

> ID：14700323
> 
> 赞同：1
> 
> 时间：2013-02-05T04:39:30.773
> 
> 标签：java, xml, frameworks, wsdl, soa

In SOA, I can send a WSDL file to SOA application server that will return an XML response.

I want to create a simple Java application that can receive a WSDL file, process it, and return XML response.

Is there a free Java library or framework that I can use to achieve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:37:51.747

是的，您只需要一个 SOAP 堆栈。

有非常好的开源框架选择，如[Apache AXIS](http://axis.apache.org/axis/)、[Apache CXF](http://cxf.apache.org/)

*   将 WSDL 与 Axis 一起使用：[指南](http://axis.apache.org/axis/java/user-guide.html#UsingWSDLWithAxis)

*   使用 CXF：[指南](http://cxf.apache.org/docs/defining-contract-first-webservices-with-wsdl-generation-from-java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:46:28.377

推荐你使用wsdl4j。它提供了很多 API 供您进行操作。[http://sourceforge.net/projects/wsdl4j/](http://sourceforge.net/projects/wsdl4j/)

# angularjs - Angular 有哪些未记录的特性？

> ID：14700325
> 
> 赞同：12
> 
> 时间：2013-02-05T04:39:45.543
> 
> 标签：angularjs

Angular 文档缺少一些东西。有人可以总结一下未记录的功能是什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T04:39:45.543

**角 1.0.5 和 1.0.4：**

*   [Scope](http://docs.angularjs.org/api/ng.$rootScope.Scope#Properties)有两个有用的未记录属性：
    1.  `$parent`- 可用作绑定到父作用域中的原始属性的 hack -[示例](https://stackoverflow.com/a/13850702/215945)
    2.  `$$phase`- 可用于确定 $digest 是否已经在进行中 - 请参阅[此 SO 答案](https://stackoverflow.com/a/12859093/215945)
*   [ng-switch](http://docs.angularjs.org/api/ng.directive:ngSwitch#Parameters)有一个`change`接受表达式的未记录参数（[例如 plnkr](http://plnkr.co/edit/HpTRNv?p=preview)）
*   [select](http://docs.angularjs.org/api/ng.directive:select)有一个未记录的`ng-change`参数，它接受一个表达式
*   [Attributes](http://docs.angularjs.org/api/ng.$compile.directive.Attributes#Methods)有一个未记录的`$observe`方法（尽管在[Directives](http://docs.angularjs.org/guide/directive#Attributes)页面上提到了它）
*   [$cacheFactory](http://docs.angularjs.org/api/ng.$cacheFactory)有两个未记录的方法（[例如小提琴](http://jsfiddle.net/moderndegree/yYEXN/)）
    1.  `get()`
    2.  `info()`
*   [$location](http://docs.angularjs.org/api/ng.$location)服务有两个未记录的事件
    1.  `$locationChangeStart(evt, newUrl, oldUrl)` （[示例](https://stackoverflow.com/a/13918833/215945)）
    2.  `$locationChangeSuccess(evt, newUrl, oldUrl)`（另请参阅[$locationChangeSuccess 和 $locationChangeStart 有什么区别？](https://stackoverflow.com/questions/15006849/angularjs-whats-the-difference-between-locationchangesuccess-and-locationch)）
*   使用 ng-value (undocumented) with `input type="radio"`，请参阅API 文档中的[Disqus 评论](http://docs.angularjs.org/api/ng.directive:input.radio#comment-880774822)

# php - xml中具有相同名称的多个节点

> ID：14700327
> 
> 赞同：3
> 
> 时间：2013-02-05T04:39:49.843
> 
> 标签：php, xml, cakephp, dom

我在下面有这个 xml 文件：-

```
 <item> 
  <title>Troggs singer Reg Presley dies at 71</title>  
  <description>Reg Presley, the lead singer of British rock band The Troggs, whose hits in the 1960s included Wild Thing, has died aged 71.</description>  
  <link>http://www.bbc.co.uk/news/uk-21332048#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>  
  <guid isPermaLink="false">http://www.bbc.co.uk/news/uk-21332048</guid>  
  <pubDate>Tue, 05 Feb 2013 01:13:07 GMT</pubDate>  
  <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65701000/jpg/_65701366_65701359.jpg"/>  
  <media:thumbnail width="144" height="81" url="http://news.bbcimg.co.uk/media/images/65701000/jpg/_65701387_65701359.jpg"/> 
</item>  
<item> 
  <title>Horsemeat found at Newry cold store</title>  
  <description>Horse DNA has been found in frozen meat in a cold store in Northern Ireland, as Irish police investigate a third case of contamination.</description>  
  <link>http://www.bbc.co.uk/news/world-europe-21331208#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>  
  <guid isPermaLink="false">http://www.bbc.co.uk/news/world-europe-21331208</guid>  
  <pubDate>Mon, 04 Feb 2013 23:47:38 GMT</pubDate>  
  <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65700000/jpg/_65700000_002950295-1.jpg"/>  
  <media:thumbnail width="144" height="81" url="http://news.bbcimg.co.uk/media/images/65700000/jpg/_65700001_002950295-1.jpg"/> 
</item>  
<item> 
  <title>US 'will sue' Standard &amp; Poor's</title>  
  <description>Standard &amp; Poor's says it is to be sued by the US government over the credit ratings agency's assessment of mortgage bonds before the financial crisis.</description>  
  <link>http://www.bbc.co.uk/news/21331018#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>  
  <guid isPermaLink="false">http://www.bbc.co.uk/news/21331018</guid>  
  <pubDate>Mon, 04 Feb 2013 22:45:52 GMT</pubDate>  
  <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65701000/jpg/_65701717_mediaitem65699884.jpg"/>  
  <media:thumbnail width="144" height="81" url="http://news.bbcimg.co.uk/media/images/65701000/jpg/_65701718_mediaitem65699884.jpg"/> 
   </item> 
```

现在，当我将输入节点作为“项目”来检索数据时，而不是显示所有项目节点，它只显示最后一个项目节点.....

我的代码是：-

```
 $dom->load($url);
    $link = $dom->getElementsByTagName($tag_name);
    $value = array();

    for ($i = 0; $i < $link->length; $i++) {
        $childnode['name'] = $link->item($i)->nodeName;
        $childnode['value'] = $link->item($i)->nodeValue;
        $value[$childnode['name']] = $childnode['value'];
    } 
```

这里，$url 是我的 xml 页面的 url $tag_name 是节点的名称，在这种情况下它是“item”

我得到的输出是： -

```
 US 'will sue' Standard &amp; Poor's.Standard &amp; Poor's says it is to be sued by the US government over the credit ratings agency's assessment of mortgage bonds before the financial crisis.http://www.bbc.co.uk/news/21331018#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa.http://www.bbc.co.uk/news/world-europe-21331208.Mon, 04 Feb 2013 22:45:52 GMT 
```

这是最后一个标签的数据。我想要所有项目标签的数据，并且我希望数据采用这种格式：-

```
title :-  US 'will sue' Standard &amp; Poor's
description :- Standard &amp; Poor's says it is to be sued by the US government over 
the credit ratings agency's assessment of mortgage bonds before the financial crisis 
```

我什至想要我的输出中的子节点的名称（如果有的话）......请帮帮我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:28:46.187

（不要忘记根节点。）看起来其中一种方法只是将该元素下的所有文本节点连接在一起（几乎相当于 xsl:value-of select=.）。我从来没有对 PHP 中的 DOMDocument 类和相关类做过很多事情。但是您可以做的是使用 C14N() 方法规范化 DOMNode，然后解析结果字符串。它并不漂亮，但它得到了你想要的结果并且很容易扩展：

```
 $tag_name = 'item';
    $link = $dom->getElementsByTagName($tag_name);
    for ($i = 0; $i < $link->length; $i++) {
        $treeAsString = $link->item($i)->C14N();
        $curBranchParts = explode("\n",$treeAsString);
        $curBranchPartsSize = count($curBranchParts);
        $curBranchParts = explode("\n",$treeAsString);
        $curBranchPartsSize = count($curBranchParts);
        for ($j = 1; $j < ($curBranchPartsSize - 1); $j++) { 
            $curItem = $curBranchParts[$j];
            $curItemParts = explode('<', $curItem);
            $tagWithContent = $curItemParts[1];
            $tagWithContentParts = explode('>',$tagWithContent);
            $tag = $tagWithContentParts[0];
            $content = $tagWithContentParts[1];

            if (trim($content) != '') echo $tag . ' :- ' . $content . '<br />';
            else echo $tag . '<br />';   
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T23:36:18.993

您似乎仅在“项目”节点上循环，并且正如其他人提到的那样，在每次迭代中都覆盖了先前的值。

如果您在循环*内*使用 print_r($value) 调试 $value 数组；

```
$dom->load($url);
$link = $dom->getElementsByTagName($tag_name);
$value = array();

for ($i = 0; $i < $link->length; $i++) {
    $childnode['name'] = $link->item($i)->nodeName;
    $childnode['value'] = $link->item($i)->nodeValue;
    $value[$childnode['name']] = $childnode['value'];

    echo 'iteration: ' . $i . '<br />';
    echo '<pre>'; print_r($value); echo '</pre>';
} 
```

你可能会看到这样的东西

```
// iteration: 0
Array
(
    [item] => Troggs singer Reg Presley dies at 71 ......
)

// iteration: 1
Array
(
    [item] => Horsemeat found at Newry cold store .........
)

// iteration: 2
Array
(
    [item] => US 'will sue' Standard & Poor's .........
) 
```

你应该做的是：

```
$dom = new DOMDocument();
$dom->preserveWhiteSpace = false;
$dom->load($url);
$items = $dom->getElementsByTagName($tag_name);
$values = array();

foreach ($items as $item) {
    $itemProperties = array();

    // Loop through the 'sub' items 
    foreach ($item->childNodes as $child) {
        // Note: using 'localName' to remove the namespace
        if (isset($itemProperties[(string) $child->localName])) {
            // Quickfix to support multiple 'thumbnails' per item (although they have no content)
            $itemProperties[$child->localName] = (array) $itemProperties[$child->localName];
            $itemProperties[$child->localName][] = $child->nodeValue;
        } else {
            $itemProperties[$child->localName] = $child->nodeValue;
        }
    }

    // Append the item to the 'values' array
    $values[] = $itemProperties;

}

// Output the result
echo '<pre>'; print_r($values); echo '</pre>'; 
```

哪个输出：

```
Array
(
    [0] => Array
        (
            [title] => Troggs singer Reg Presley dies at 71
            [description] => Reg Presley, the lead singer of British rock band The Troggs, whose hits in the 1960s included Wild Thing, has died aged 71.
            [link] => http://www.bbc.co.uk/news/uk-21332048#sa-ns_mchannel=rss&ns_source=PublicRSS20-sa
            [guid] => http://www.bbc.co.uk/news/uk-21332048
            [pubDate] => Tue, 05 Feb 2013 01:13:07 GMT
            [thumbnail] => Array
                (
                    [0] => 
                    [1] => 
                )

        )

    [1] => Array
        (
            [title] => Horsemeat found at Newry cold store
            [description] => Horse DNA has been found in frozen meat in a cold store in Northern Ireland, as Irish police investigate a third case of contamination.
            [link] => http://www.bbc.co.uk/news/world-europe-21331208#sa-ns_mchannel=rss&ns_source=PublicRSS20-sa
            [guid] => http://www.bbc.co.uk/news/world-europe-21331208
            [pubDate] => Mon, 04 Feb 2013 23:47:38 GMT
            [thumbnail] => Array
                (
                    [0] => 
                    [1] => 
                )

        )

    [2] => Array
        (
            [title] => US 'will sue' Standard & Poor's
            [description] => Standard & Poor's says it is to be sued by the US government over the credit ratings agency's assessment of mortgage bonds before the financial crisis.
            [link] => http://www.bbc.co.uk/news/21331018#sa-ns_mchannel=rss&ns_source=PublicRSS20-sa
            [guid] => http://www.bbc.co.uk/news/21331018
            [pubDate] => Mon, 04 Feb 2013 22:45:52 GMT
            [thumbnail] => Array
                (
                    [0] => 
                    [1] => 
                )

        )

) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T05:21:32.443

你的问题是你的源 XML 需要有一个根节点（它可以被称为任何你想要的）。要成为有效的 XML，您总是需要一个根节点。也就是说，每个有效的 XML 文件都将只有一个元素没有父元素或兄弟元素。拥有根节点后，您的 XML 将加载到您的对象中。

例如：

```
<root>
    <item> 
      <title>Troggs singer Reg Presley dies at 71</title>  
      <description>Reg Presley, the lead singer of British rock band The Troggs, whose hits in the 1960s included Wild Thing, has died aged 71.</description>  
      <link>http://www.bbc.co.uk/news/uk-21332048#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>  
      <guid isPermaLink="false">http://www.bbc.co.uk/news/uk-21332048</guid>  
      <pubDate>Tue, 05 Feb 2013 01:13:07 GMT</pubDate>  
      <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65701000/jpg/_65701366_65701359.jpg"/>  
      <media:thumbnail width="144" height="81" url="http://news.bbcimg.co.uk/media/images/65701000/jpg/_65701387_65701359.jpg"/> 
    </item>  
    <item> 
      <title>Horsemeat found at Newry cold store</title>  
      <description>Horse DNA has been found in frozen meat in a cold store in Northern Ireland, as Irish police investigate a third case of contamination.</description>  
      <link>http://www.bbc.co.uk/news/world-europe-21331208#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>  
      <guid isPermaLink="false">http://www.bbc.co.uk/news/world-europe-21331208</guid>  
      <pubDate>Mon, 04 Feb 2013 23:47:38 GMT</pubDate>  
      <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65700000/jpg/_65700000_002950295-1.jpg"/>  
      <media:thumbnail width="144" height="81" url="http://news.bbcimg.co.uk/media/images/65700000/jpg/_65700001_002950295-1.jpg"/> 
    </item>  
    <item> 
      <title>US 'will sue' Standard &amp; Poor's</title>  
      <description>Standard &amp; Poor's says it is to be sued by the US government over the credit ratings agency's assessment of mortgage bonds before the financial crisis.</description>  
      <link>http://www.bbc.co.uk/news/21331018#sa-ns_mchannel=rss&amp;ns_source=PublicRSS20-sa</link>  
      <guid isPermaLink="false">http://www.bbc.co.uk/news/21331018</guid>  
      <pubDate>Mon, 04 Feb 2013 22:45:52 GMT</pubDate>  
      <media:thumbnail width="66" height="49" url="http://news.bbcimg.co.uk/media/images/65701000/jpg/_65701717_mediaitem65699884.jpg"/>  
      <media:thumbnail width="144" height="81" url="http://news.bbcimg.co.uk/media/images/65701000/jpg/_65701718_mediaitem65699884.jpg"/> 
    </item>
</root> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T05:02:48.840

我认为代码有问题：

```
 for ($i = 0; $i < $link->length; $i++) {
        $childnode['name'] = $link->item($i)->nodeName;
        $childnode['value'] = $link->item($i)->nodeValue;
        $value[$childnode['name']] = $childnode['value'];
    } 
```

每次`$childnode['name']`由新值分配，`for loop`并且在最后一次`$i`等于 的长度时，`$link.length`该值将分配给`$childnode array`。所以为了减少问题，它应该是一个多维数组，比如

```
for ($i = 0; $i < $link->length; $i++) {
    $childnode['name'][$i] = $link->item($i)->nodeName;
    $childnode['value'][$i] = $link->item($i)->nodeValue;
    $value[$childnode['name'][$i]][$i] = $childnode['value'];
} 
```

要测试它：`print_r($childnode);`

# android - Read Raw Touch Input Events on Android

> ID：14700332
> 
> 赞同：2
> 
> 时间：2013-02-05T04:40:13.670
> 
> 标签：android, android-ndk, multi-touch, android-sensors, hid

I've been doing some research to see if something like this is feasible, and I haven't come up with anything good yet. I would like to write an application that intercepts Android touch information (at some level).

I am looking into developing an app that monitors a user's touch events in the background. This sounds like a sinister keylogger or something, but it's actually for a pilot study to monitor activity (dexterity, etc) in aging people to try to predict cognitive decline (similar studies have been done which monitor typing dexterity). I don't really care (or want to know) what they're clicking on or anything, I'm more interested in (extracting) metrics like number of clicks, time between clicks, touch velocity, etc.

Any ideas if this is possible, and how to go about doing this? I'm not scared of the NDK or anything, and theoretically we will control the phones (at first), so rooting isn't entirely out of the question (if necessary). However, it'd be nice to avoid hacks like that if possible.

Any ideas of avenues to explore to proceed on this project?

# android - Images not displaying from webview of epub in android

> ID：14700341
> 
> 赞同：2
> 
> 时间：2013-02-05T04:41:38.847
> 
> 标签：android, webview, epub

I am using webview to display content from epub in android.But now i am able to display content but not able to show the images.Could any one help me to solve this issue?

The code i used to display is::

```
public class MainActivity extends Activity {
WebView webview;
String line, line1 = "", finalstr = "";
int i = 0;
Book book;
String linez;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    webview = (WebView) findViewById(R.id.tv);
    AssetManager assetManager = getAssets();
   try {
        // find InputStream for book
        InputStream epubInputStream = assetManager
                .open("widget.epub");

        // Load Book from inputStream
        book = (new EpubReader()).readEpub(epubInputStream);

        // Log the book's authors
        Log.i("author", " : " + book.getMetadata().getAuthors());

        // Log the book's title
        Log.i("title", " : " + book.getTitle());

        /* Log the book's coverimage property */
         Bitmap coverImage =BitmapFactory.decodeStream(book.getCoverImage().getInputStream());
        Log.i("epublib", "Coverimage is " + coverImage.getWidth() +  " by " + coverImage.getHeight() + " pixels");

        // Log the tale of contents

       logTableOfContents(book.getTableOfContents().getTocReferences(), 0);
    } catch (IOException e) {
        Log.e("epublib exception", e.getMessage());
    }
    Spine spine = book.getSpine(); 
    List<SpineReference> spineList = spine.getSpineReferences() ;
    int count = spineList.size();
    TextView tv=new TextView(getApplicationContext());
    tv.setText(Integer.toString(count));
    StringBuilder string = new StringBuilder();

    for (int i = 0; count > i; i++) {
        Resource res = spine.getResource(i);

        try {
            InputStream is = res.getInputStream();
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            try {
                while ((line = reader.readLine()) != null) {
                    linez =   string.append(line + "\n").toString();
                }

            } catch (IOException e) {e.printStackTrace();}

            //do something with stream
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
    webview.loadData(linez, "text/html", "utf-8");
}

@SuppressWarnings("unused")
private void logTableOfContents(List<TOCReference> tocReferences, int depth) {
    if (tocReferences == null) {

        return;
    }

    for (TOCReference tocReference : tocReferences) {
        StringBuilder tocString = new StringBuilder();
         for (int i = 0; i < depth; i++) {
         tocString.append("\t");
         }
         tocString.append(tocReference.getTitle());
         Log.i("TOC", tocString.toString());

        try {
            InputStream is = tocReference.getResource().getInputStream();
            BufferedReader r = new BufferedReader(new InputStreamReader(is));

            while ((line = r.readLine()) != null) {

                Log.v("line" + i, Html.fromHtml(line).toString());
                line1 = line1.concat(Html.fromHtml(line).toString());
            }
            finalstr = finalstr.concat("\n").concat(line1);

            i++;
        } catch (IOException e) {

        }

        logTableOfContents(tocReference.getChildren(), depth + 1);
    }

    webview.loadDataWithBaseURL("", finalstr, "text/html", "UTF-8", "");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T00:47:53.067

用于在 webview 中显示图像和 css。您需要在相应的目录 sdcard 位置下载 css 和图像。类似下面的代码

```
private void DownloadResource(String directory) {
    try {
        nl.siegmann.epublib.domain.Resources rst = book.getResources();
        Collection<Resource> clrst = rst.getAll();
        Iterator<Resource> itr = clrst.iterator();
        Log.d("Downlod path", directory);
        while (itr.hasNext()) {
            Resource rs = itr.next();
            if ((rs.getMediaType() == MediatypeService.JPG) || (rs.getMediaType() == MediatypeService.PNG) || (rs.getMediaType() == MediatypeService.GIF)
                    || (rs.getMediaType() == MediatypeService.CSS)) {
                File oppath1 = new File(directory + File.separator + rs.getHref());
                oppath1.getParentFile().mkdirs();

                Log.d("Resource Name - ", rs.getHref());
                oppath1.createNewFile();
                Log.d("Oppath - ", oppath1.getAbsolutePath());

                Log.d("File Checking - ", "Exists - " + oppath1.exists() + " & Write - " + oppath1.canWrite());
                FileOutputStream fos1 = new FileOutputStream(oppath1);
                fos1.write(rs.getData());
                fos1.close();

            } 

        }
    } catch (IOException e) {
        Log.e("error", e.getMessage());
    }
} 
```

# android - 通过聊天发送情绪

> ID：14700347
> 
> 赞同：4
> 
> 时间：2013-02-05T04:42:51.780
> 
> 标签：android, chat

我在 android 中开发了一个聊天应用程序，我想在我的应用程序中添加表情功能。我遍历了以下链接：

[Android上消息中的表情符号](https://stackoverflow.com/questions/7631924/emoticons-in-message-on-android)

[如何在android中的聊天中显示表情符号？](http://www.askmefast.com/How_to_display_emoticons_in_chat_in_android-qna3131497.html)

[Android 聊天应用笑脸](https://stackoverflow.com/questions/9215652/android-chat-application-smiley)

但在两者之间没有找到任何好的解决方案。

请用一个好的超链接或解决方案指导我。

***场景：一个人可以从当前的情绪中选择任何一个情绪，并且它也应该在接收者端接收。***

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T07:21:18.730

我已经解决了。这是我的代码：

像这样移动：

```
private HashMap<String, Integer> emoticons = new HashMap<String, Integer>();
private ArrayList<String> arrayListSmileys = new ArrayList<String>();
ImageView imgbtn_show_smileys; 
```

在你的 oncreate 函数中像这样进行

```
emoticons.put(":-)", R.drawable.smile);
emoticons.put(":P", R.drawable.tongue);
emoticons.put(":D", R.drawable.cool);
emoticons.put(":-(", R.drawable.sad);
emoticons.put(":0", R.drawable.cool);
fillArrayList(); 
```

制作自己想要使用的图像/笑脸对

填充数组列表

```
private void fillArrayList() {
    Iterator<Entry<String, Integer>> iterator = emoticons.entrySet().iterator();
    while(iterator.hasNext()){
        Entry<String, Integer> entry = iterator.next();
        arrayListSmileys.add(entry.getKey());
    }
} 
```

现在最重要的部分，每次将图像设置为列表视图或编辑文本时都使用此功能：

```
edittext.setText(getSmiledText(this,"your text"));

public Spannable getSmiledText(Context context, String text) {
        SpannableStringBuilder builder = new SpannableStringBuilder(text);
        int index;
        for (index = 0; index < builder.length(); index++) {
            for (Entry<String, Integer> entry : emoticons.entrySet()) {
                int length = entry.getKey().length();
                if (index + length > builder.length())
                    continue;
                if (builder.subSequence(index, index + length).toString().equals(entry.getKey())) {
                    builder.setSpan(new ImageSpan(context, entry.getValue()), index, index + length,
                            Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                    index += length - 1;
                    break;
                }
            }
        }
        return builder;
    } 
```

在对话框按钮上显示笑脸

```
imgbtn_show_smileys.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            final Dialog groupIconsDialog = new Dialog(UserChatActivity.this);
            groupIconsDialog.setTitle("Choose Group Icon");
            groupIconsDialog.setContentView(R.layout.group_icons_layout);
            //calling and setting the image icons to the grid view adapter
            final GridView groupIconsGrid = (GridView)groupIconsDialog.findViewById(R.id.grid_groupIcons);
            groupIconsGrid.setAdapter(new SmileysAdapter(arrayListSmileys, UserChatActivity.this, emoticons));

            groupIconsGrid.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int position, long arg3) {
                    // TODO Auto-generated method stub

                    String value = groupIconsGrid.getAdapter().getItem(position).toString();
                    value = editMessage.getText()+value;
                    Spannable spannable = getSmiledText(UserChatActivity.this, value);
                    editMessage.setText(spannable);
                    groupIconsDialog.dismiss();

                }
            });

            groupIconsDialog.show();

        }
    }); 
```

如果您对此有任何疑问，请告诉我。

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:51:12.390

这是我用来解决问题的笑脸适配器：

```
public class SmileysAdapter extends BaseAdapter {

    private ArrayList<String> arrayListSmileys = new ArrayList<String>();
    private Context context;
    private HashMap<String, Integer> emoticons = new HashMap<String, Integer>();
    private ArrayList<String> showListSmileys = new ArrayList<String>();

    public SmileysAdapter(ArrayList<String> arraylistSmileys,Context context,HashMap<String, Integer> emoticons) {
        // TODO Auto-generated constructor stub

        this.arrayListSmileys = arraylistSmileys;
        this.context = context;
        this.emoticons = emoticons;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return arrayListSmileys.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return arrayListSmileys.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        convertView = LayoutInflater.from(context).inflate(R.layout.row, null);
        ImageView imageView = (ImageView) convertView.findViewById(R.id.imageView1);
        imageView.setBackgroundResource(emoticons.get(arrayListSmileys.get(position)));
        return convertView;
        }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T06:00:55.770

嗯，基本上表情都是这样处理的。每个表情符号都基于字符组合。你可以用它们对应的字符组合来制作各种图像。让我们用这个来做一个场景。

1.  设备 A 发送了一个微笑图像表情符号，用 :) 表示
2.  表情符号通过服务器（或通过任何方法）发送到设备 B
3.  设备 B 收到一个字符串 :) 然后将其替换为微笑图像表情符号

# perl - 如何在 perl 中取消转义 / urldecode 查询 URL 查询变量？

> ID：14700349
> 
> 赞同：0
> 
> 时间：2013-02-05T04:43:08.310
> 
> 标签：perl, escaping, cgi

我有一个处理 URL 的 perl 脚本 - 在服务器升级之前它工作正常。现在它似乎对它返回的 URL 字符串进行了双重编码。

以下是脚本用于返回的 URL 示例：

```
https://processor.com/?&streetOne=johndoe%40test%2Ecom&key=1234 
```

这就是它现在返回的内容

```
https://processor.com/?&email=johndoe%2540test%252Ecom&key=1234 
```

它们的关键区别在于，`@`URL 中的 曾经被正确编码，`%40`但现在百分号正在被编码（双重编码），所以`%2540`如果你`@`对它进行编码然后再次对其进行编码，就会发生这种情况。

我不确定服务器上会发生什么变化导致这种行为。我是一个 PHP 人，它让我想起了“魔术引号”，它会在脚本处理之前自动转义要接收的所有查询变量。

我没有对该服务器的 root 访问权限，因此如果无法使用`.htaccess`文件或某些本地配置选项（在 perl 脚本中？）进行更改，那么我可能需要更改此函数中发生的情况，即获取请求的每个 URL 值：

### 首先脚本读取查询变量

（我认为这可能是问题所在 - 我不理解正则表达式 - 关于在空格之间寻找 KEY 以及该`$obj->{'key'};`部分正在做什么）

```
sub getValue
{
  my $obj = shift;
  my $name = shift;

  if ($name =~ /^\s*KEY\s*$/i)
    {
      return $obj->{'key'};
    }

  if (! $obj->isValid($name))
    {
      $obj->addError("Cannot obtain information for field '$name' since field is invalid");
      return 0;
    }

  if (! $obj->isAssigned($name))
    {
      $obj->addError("Cannot obtain value from field '$name' since field has not be assigned a value.");
      return 0;
    }

  return $obj->{'parameters'}->{ $name }->{ 'value'};
} 
```

### 然后脚本将查询变量构建回 URL 以返回：

脚本的另一部分构建了它返回的 URL - 但我认为这不是罪魁祸首。我尝试`CGI::escape`从`CGI::escape($value))`零件中删除它并没有帮助。

```
sub create_results
{
  my $obj = shift;

  my ($seconds, $microseconds) = gettimeofday();
  my $timestamp = int($seconds*1000 + $microseconds/1000);

  $obj->assign('timestamp',$timestamp);

  # create query string and hash data

  my $hash_data = '';

  my @query_string = qw();

  foreach my $name (@{ $obj->{'parameter_order'} })
    {
      my $node = $obj->{'parameters'}->{ $name };

      if (defined($node->{'value'}))
        {
          my $value = $node->{'value'};
          $hash_data .= $value;

          # $query->param(-name=>"$name",   -value=>"$value");
          push(@query_string,$name . "=" . CGI::escape($value));
        }
    }

  # Hash
  $hash_data .= $obj->get('key');
  my $hash_digest = md5_hex( $hash_data );

  push(@query_string, "hash=$hash_digest");

  $obj->{'query_string'} = join("&",@query_string);
  $obj->{'hash_digest'} = $hash_digest; 
} 
```

该脚本是我正在使用的 perl 包。我没写。我在这里发布了完整的脚本：http: [//pastebin.com/eZr8rQ0t](http://pastebin.com/eZr8rQ0t)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:25:07.747

使用 CGI 模块有点过时，并且`CGI::escape`是一个未记录的内部函数，它*仅*`CGI::Util`适用于 CGI 内部。有一个相应的功能可用，但这几乎不是*正确*的事情。*`unescape`*

 **为了缩短追逐时间，使用`CGI::Util::unescape($dirty_value)`某处应该可以工作，因为该模块应该由`CGI`. 也许在`return`from `getValue`，但我很累找不到正确的地方。这种双重编码似乎是一个设计错误，或者假设您提供的示例 URL 已经被转义，并且脚本使用错误。

我敢打赌错误的设计；考虑到有人认为这样做很有趣

```
"foo" => { "parameterName" => "foo" },
... # snip like 50 other values
"quux" => { "parameterName" => "quux" }, 
```

以及其他一些`map { $_ => {parameterName => $_} } qw/foo ... qux/`只需要打字就可以工作的愚蠢……</p>

**提示：**所有（公共）Perl 模块（包括源代码）的文档可在[https://metacpan.org/](https://metacpan.org/)获得。**

# java - 如何在 newfixedthreadpool 中获得更多性能？

> ID：14700352
> 
> 赞同：2
> 
> 时间：2013-02-05T04:43:25.553
> 
> 标签：java, threadpool

我英文不太好。但我需要了解 newfixedthreadpool 的 .

```
enter code here
ExecutorService executorService = new FixedThreadPool().newFixedThreadPool(4);
.....
public class FixedThreadPool {
        private ExecutorService newFixedThreadPool(int nThreads) {   
            return new ThreadPoolExecutor(nThreads, nThreads,   
                    0L, TimeUnit.MILLISECONDS,   
                    new LinkedBlockingQueue<Runnable>());   
        }

}
.....
executorService.execute(new CoreThreadPool(list, resCountClass)); 
```

当 zip 文件解压缩时，每个条目文件都会在这些线程池中执行和加密。[解压缩->加密（池）->压缩]

当我在 Eclipse 中进行 UNIT 测试（仅解压缩->加密->压缩）时，它对顺序处理（我的旧项目）表现出良好的性能（高出 30%）。但是项目部署到Jboss后，部分(unzip->encrypt->zip)的性能表现稍微好一点(5%)，顺序处理也差不多。有时它更低。*在 Linux 和 Windows 上测试

我想知道为什么结果会这样。我需要解决它.. 我可以将队列 LinkedBlockingQueue 更改为另一个吗？任务线程可以异步运行？？

请给出答案或提示..

队友的欢呼声！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T07:41:54.900

您很可能正在最大限度地使用共享资源，例如您可以读取和写入磁盘或第三级缓存的速度。这些东西会阻止你有效地使用更多的 CPU。为了解决这个问题，你必须弄清楚你的瓶颈是什么。

# compiler-construction - 如何使用 CMake 更改文件夹的编译标志？

> ID：14700354
> 
> 赞同：2
> 
> 时间：2013-02-05T04:43:33.193
> 
> 标签：compiler-construction, cmake, compiler-optimization

我正在使用 CMake 为我的项目生成 Makefile。

我想编译一些具有不同选项的文件。例如，所有文件都带有 -fX，但 test 文件夹中的文件带有 -fno-X。

这在 CMake 中可能吗？

这是我的 CMakeLists.txt 文件的一部分，其中包含源文件：

```
file(
    GLOB_RECURSE
    compiler_files
    src/*.cpp
)

file(GLOB to_remove src/eddi.cpp)
list(REMOVE_ITEM compiler_files ${to_remove})

add_library(Compiler OBJECT ${compiler_files})

add_executable(eddic $<TARGET_OBJECTS:Compiler> src/eddi.cpp)
target_link_libraries (eddic boost_program_options) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:56:42.857

您可以使用以下命令将编译标志添加到特定文件 `set_source_files_properties`：

```
SET_SOURCE_FILES_PROPERTIES(
  ${list_of_noX_files}
  PROPERTIES
  COMPILE_FLAGS "-fno-X"
) 
```

在这种情况下，变量中列出的文件将使用附加到默认选项`list_of_noX_files`的选项进行编译。`-fno-X`

# php - Multiple models in Codeigniter

> ID：14700356
> 
> 赞同：0
> 
> 时间：2013-02-05T04:43:47.347
> 
> 标签：php, codeigniter

I've got 2 models with the same name, but in different folders.

```
models
   |
   - model1
        |
        - db_model.php
   |
   - model2
        |
        - db_model.php 
```

When I load them like this it causes a problem:

```
$this->load->model('model1/db_model', 'db_model1');
$this->load->model('model2/db_model', 'db_model2'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:52:21.287

'db_model' 是一个别名，因此您将它们命名为相同的东西。

你这样做是有原因的吗？说明您想要什么，我们将提供解决方法

# javascript - Checkbox that adds or removes textbox based on state

> ID：14700363
> 
> 赞同：1
> 
> 时间：2013-02-05T04:44:41.667
> 
> 标签：javascript

I'm trying to create a checkbox that will create a new textbox once clicked. Clicked again, it will remove the textbox.

At the moment, it's just making a load of new textboxes as I don't know how to handle if statements inside of javascript. Can someone point me in the right direction please.

[http://jsfiddle.net/v7gdX/](http://jsfiddle.net/v7gdX/)

```
 <input id="chk" type="checkbox" value="results" />  Results
        <div id="formContainer">

        </div> 
```

And the Javascript

```
function CreateTextbox() {
        var textBox = document.createElement("input");
        textBox.setAttribute("type", "textbox");
        textBox.setAttribute("id", textboxId);
        textboxId++;
        return textBox;
        }

    var textboxId = 0;

    if(textboxId == 0)
    {
    document.getElementById("chk").onclick = function () 
    {
        document.getElementById("formContainer").appendChild(CreateTextbox(textboxId));
        var textboxId = 1;
    }
    }

    else if (textboxId == 1)
    {
        //The code to remove the previosuly made textbox
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:45:22.777

虽然 pktangyue 的解决方案在 formContainer 中只有一个元素时有效，但它总是会擦除整个 div。

此外，您正在处理此处的复选框。它已经可以告诉你它是否被检查，你不必自己保持它的状态。

```
function createTextBox() {
  var textBox = document.createElement("input");
  textBox.setAttribute("type", "text");
  return textBox;
}

var txt;
document.getElementById("chk").onchange = function() {
  var form = document.getElementById("formContainer");
  if(this.checked) {
    txt = createTextBox();
    form.appendChild(txt);
  }
  else
    form.removeChild(txt);
} 
```

但是，如果只是在选中复选框时隐藏或显示文本框，那么从 javascript 生成 DOM 元素是一种不好的形式。最好用 html 编写文本框，将其 CSS 设置为

```
display: none; 
```

并使用这样的javascript来切换它

```
document.getElementById("chk").onchange = function() {
  document.getElementById("myTextBox").style.display = this.checked ? "" : "none";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T04:55:15.643

您可以使用`document.getElementById("formContainer").innerHTML = '';`它来删除它。

我改变你的js代码如下：

```
var textboxId=0;
function CreateTextbox() {
    var textBox = document.createElement("input");
    textBox.setAttribute("type", "textbox");
    textBox.setAttribute("id", textboxId);
    textboxId++;
    return textBox;
}

document.getElementById("chk").onclick = function () {
    if (textboxId == 0) {
        document.getElementById("formContainer").appendChild(CreateTextbox(textboxId));
        textboxId = 1;
    } else if (textboxId == 1) {
        document.getElementById("formContainer").innerHTML = '';
        textboxId = 0;
        //The code to remove the previosuly made textbox
    }
} 
```

这是jsfiddle。 [http://jsfiddle.net/v7gdX/2/](http://jsfiddle.net/v7gdX/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:06:48.500

`add text`如果为假，我已使用复选框检查值为真字段`remove text box`

```
 var textboxId = 1;
        function CreateTextbox() {
        var textBox = document.createElement("input");
        textBox.setAttribute("type", "textbox");
        textBox.setAttribute("id", textboxId);

        return textBox;
        }

        document.getElementById("chk").onclick = function () 
        { 

        if(document.getElementById("chk").checked) {
            document.getElementById("formContainer").appendChild(CreateTextbox());
        } else {
            document.getElementById("formContainer").innerHTML = '';
            }

        } 
```

检查这个[http://jsfiddle.net/pradkumar_n/hjaR5/](http://jsfiddle.net/pradkumar_n/hjaR5/)

# java - How translate this code from sql to Hibernate?

> ID：14700370
> 
> 赞同：-1
> 
> 时间：2013-02-05T04:46:05.383
> 
> 标签：java, sql, hibernate, hql

I need help with this code from sql to Hibernate, please I hope you help me with this work...

**`SELECT x(coordenadas) as latitud, y(coordenadas) as longitud FROM datos;`**

I'm a new user in this page :-(

I have two tables called datos and dispositivo, I'm using hibernate from Netbeans for get registers of the table called datos, but the problem is that I dont know how convert this sentence. because my table contains a register with a type data "geometry properties functions" called "coordenadas". GeomFromText("Point(18.30 -99)"). I need get the register of this table as Latitud and Longitud in a list. Help me please :(. I sorry for my English, I'm learning.

I had a table with these registers datos,fecha,dirLat,dirLong,Latitud,Longitud,altura and I take the registers with this method...

```
package Modelo;

import com.conf.hibernate.HibernateUtil;
import com.hibernate.Datos;
import java.util.List;
import org.hibernate.Session;

public class FuncionesHibernate {
    public List<Datos> Tabla_Datos(){
        Session s = HibernateUtil.getSessionFactory().getCurrentSession();
        s.beginTransaction();
        List<Datos> lista = (List<Datos>)s.createQuery("From Datos").list();
        s.getTransaction().commit();
        return lista;
    }
} 
```

then with this code from a Servlet, I got Latitud and Longitud...

```
FuncionesHibernate funcionesHibernate = new FuncionesHibernate();
 List<Datos> lista = funcionesHibernate.Tabla_Datos();

for(Datos d : lista){
latitud=d.getLatitud();
longitud=d.getLongitud();
} 
```

The problem is that the tables was updated, and the registers that contained Latitud and Longitud changed to`coordenadas` geometry. Well now I need insert registers for this new way in the console for mySql.

```
insert into datos values(1,1,"2013-02-02","14:00:00",GeomFromText("Point(18.30 -99)"),20); 
```

and now my method called 'FuncionesHibernate ' can't working.

There isn't another way for 'coordenadas' registers get with the new table? What's the new query for Hibernate??

for this razon I need translate this query to query for Hibernate..

```
SELECT x(coordenadas) as latitud, y(coordenadas) as longitud  FROM datos; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:11:42.817

函数从 HQL 传输到底层 SQL，因此您可能可以使用几乎相同的查询（只需指定正确的实体名称）

另一种选择是使用[本机查询](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/query_native.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:40:29.370

我建议使用本机查询：试试下面的代码

```
transaction = session.beginTransaction();
String sql = "insert into datos values(1,1,"2013-02-02","14:00:00",GeomFromText("Point(18.30 -99)"),20)";
Query query = session.createSQLQuery(sql);
query.executeUpdate();
session.getTransaction().commit();

session.flush(); 
```

如果此代码工作正常，则将硬编码值替换为动态值。

**编辑：**

在您的类路径中添加**hibernate-spatial-mysql-*.jar并尝试以下代码。**

```
import com.vividsolutions.jts.geom.Coordinate;
import com.vividsolutions.jts.geom.GeometryFactory;
import com.vividsolutions.jts.geom.Point;

Coordinate coord = new Coordinate(52.5, 13.3);
Point point = new GeometryFactory().createPoint(coord);
 Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
Query query = session.createQuery("FROM datos WHERE WITHIN(:location, polygon) = true", Datos.class);
query.setParameter("location", point);
session.getTransaction().commit(); 
```

# php - PHP中预算范围的数组排序

> ID：14700372
> 
> 赞同：3
> 
> 时间：2013-02-05T04:46:20.367
> 
> 标签：php, arrays, logic

我有两个 PHP 数组如下

数组 1 - 预算开始

```
Array
(
    [0] => 25000
    [1] => 30000
    [2] => 35000
    [3] => 15900
) 
```

数组 2 - 预算结束

```
Array
(
    [0] => 40000
    [1] => 50000
    [2] => 60000
    [3] => 55000
) 
```

我想过滤用户实际查找的预算范围**。对于上面的预算范围，预算开始为 35000，预算结束为 40000。**

预算开始是通过比较每个预算开始与其他预算开始来计算的，因此预算开始应该在预算开始和预算结束之间

预算开始 35000 因为

```
25000 <= 35000 < 40000
30000 <= 35000 < 50000
35000 <= 35000 < 60000
15900 <= 35000 < 55000 
```

预算结束 40000 因为

```
25000 < 40000 <= 40000
30000 < 40000 <= 50000
35000 < 40000 <= 60000
15900 < 40000 <= 55000 
```

有没有办法解决这个问题。

谢谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:27:48.943

```
<?php
$start = Array(25000,30000,35000,15900);

$end = Array(40000,50000,60000,55000);

foreach($start as $val){
    $cnt = 0;
    for($i=0;$i<count($start); $i++){
        if($start[$i] <= $val && $val < $end[$i]){
            $cnt++;
        }
        if($cnt == count($start)){
            $start_budget = $val;
        }
    }
}

foreach($end as $val){
    $cnt = 0;
    for($i=0;$i<count($end); $i++){
        if($start[$i] < $val && $val <= $end[$i]){
            $cnt++;
        }
        if($cnt == count($end)){
            $end_budget = $val;
        }
    }
}

echo $start_budget;
echo "<br>";
echo $end_budget;
?> 
```

# python - django 登录装饰器和用户重定向问题

> ID：14700373
> 
> 赞同：0
> 
> 时间：2013-02-05T04:46:20.763
> 
> 标签：python, django

这是我需要做的。我有一个叫卖的按钮。如果用户已登录，则它会执行其正常步骤并允许用户进行销售。如果用户未登录，我需要重定向到登录页面，并且在用户登录后，将登录用户的正常步骤重定向到带有用户用户名的 ia url 并像这样“username/sell”进行销售。

这是作为经过身份验证的用户可以正常工作的视图

```
@login_required()
def UserSell(request,username):

    thegigform=GigForm()
    theuser=User.objects.get(username=username)
    if request.method=='POST':
         gigform=GigForm(request.POST,request.FILES)
          if gigform.is_valid():
        gigform.title=gigform.cleaned_data['title']
        gigform.description=gigform.cleaned_data['description']
        gigform.more_info=gigform.cleaned_data['more_info']
        gigform.time_for_completion=gigform.cleaned_data['time_for_completion']
        #need to change this, shouldnt allow any size image to be uploaded
        gigform.gig_image=gigform.cleaned_data['gig_image']
        #commit=False doesnt save to database so that I can add the current user to the gig
        finalgigform=gigform.save(commit=False)
        finalgigform.from_user=theuser
        finalgigform.save()
        return HttpResponseRedirect('done')

else:
    gigform=GigForm()
context=RequestContext(request)
return render_to_response('sell.html',{'theuser':theuser,'thegigform':gigform},context_instance=context) 
```

这是网址

```
url(r'^(?P<username>\w+)/sell$','gigs.views.UserSell', name='sell'), 
```

然后是模板

```
<a href="{% url sell user.username %}"><button type="button">Start Selling!</button></a> 
```

现在这很好用，因为我是登录用户，然后当我以匿名用户身份在另一个浏览器上尝试时，我很快看到匿名用户没有用户名，所以我更改了视图、url 和模板以仅使用用户。然后在装饰器重定向到登录页面后尝试登录之前效果很好。登录后的 {{next}} url 是“user/sell”的绝对路径。问题在于，使用使用用户而不是用户名的更新视图会重定向到“AnonymousUser/sell”。我认为这是我的观点的问题，但有人可以帮忙。我需要登录后的重定向是“用户/销售”，就像最近登录的用户一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:39:02.457

我认为您不必要求用户名，因为当此人登录时，系统现在可以访问他们的用户名。

```
@login_required()
def UserSell(request):
    ..........

    if request.user.is_authenticated():
        return HttpResponseRedirect(reverse('app_name:login'))
    else:
        context=RequestContext(request)
        return render_to_response('sell.html',{'theuser':request.user,'thegigform':gigform},context_instance=context) 
```

如果你想显示用户只需输入“request.user”或“request.user.username”

# c# - 使用microsoft access在数据库中添加数据

> ID：14700374
> 
> 赞同：0
> 
> 时间：2013-02-05T04:46:26.020
> 
> 标签：c#, winforms, oledb

我真的无法在我的数据库中添加任何数据，我可以读取数据库上的内容但无法写入，我尝试了很多代码但没有工作:(我最终得到了这段代码，

```
private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                string user = textBox1.Text;
                string pass = textBox2.Text;

                string myExecutequery = "INSERT INTO Accountstbl (Username,Password) VALUES (@user,@pass)";
                OleDbCommand cmd = new OleDbCommand(myExecutequery, con);
                cmd.Connection.Open();
                cmd.ExecuteNonQuery();
                con.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
        } 
```

错误说：

```
System.Data.OleDb.OleDbException: Syntax error in INSERT INTO statement.
   at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
   at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)
   at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
   at System.Data.OleDb.OleDbCommand.ExecuteNonQuery()
   at VirginiTEAcorp.Form3.button1_Click(Object sender, EventArgs e) in C:\Documents and Settings\12-014s\My Documents\applications\Database\WindowsFormsApplication1\Form3.cs:line 31 
```

有人帮我请:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:49:16.163

```
string myExecutequery = "INSERT INTO Accountstbl (Username,Password) VALUES 
(@user,@pass)";

con.Open();

try
{
 OleDbCommand cmd = new OleDbCommand(myExecutequery, con);
 cmd.Parameters.Add("@user", user);
 cmd.Parameters.Add("@pass", pass);     
 cmd.ExecuteNonQuery();
 cmd.Dispose();
 cmd = null;
}
catch(Exception ex)
{
  throw new Exception(ex.ToString(), ex);
}
finally
{
 con.Close();
} 
```

**或者**

您的查询应该是这样的

```
string myExecutequery = "INSERT INTO Accountstbl (Username,Password) VALUES 
('"+ user +"','"+ pass +"')"; 
```

并且您需要在添加到**oleDBCommand**之前打开连接，例如

```
con.Open(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:15:09.643

试试看。

```
 string SqlString = "Insert Into Accountstbl (Username, Password) Values (@user, @pass)";
        using (OleDbConnection conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\\test.accdb")) //Your Connection string
        {
            using (OleDbCommand cmd = new OleDbCommand(SqlString, conn))
            {
                string use = userTextBox.Text;
                string pass = passTextBox.Text;
                cmd.CommandType = CommandType.Text;
                cmd.Parameters.AddWithValue("@use", use);
                cmd.Parameters.AddWithValue("@pass", pass);
                conn.Open();
                cmd.ExecuteNonQuery();
            }
        } 
```

我知道这应该可行，但我测试了这段代码`Microsoft Access 2012`，我得到了这个错误：

```
Syntax error in INSERT INTO statement. 
```

这将是`MSAccess` [ADO Recordset.Update 上的 BUG：“INSERT INTO... 中的语法错误”的错误](http://support.microsoft.com/kb/189220)

# java-bytecode-asm - 使用 ASM java 字节码的类的所有超类

> ID：14700377
> 
> 赞同：1
> 
> 时间：2013-02-05T04:46:48.283
> 
> 标签：java-bytecode-asm

如何使用 ASM java Byte Code 获取一个类的所有超类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:30:59.440

```
package com.eg.agent;

import java.lang.instrument.ClassFileTransformer;
import java.lang.instrument.IllegalClassFormatException;
import java.lang.instrument.Instrumentation;
import java.security.ProtectionDomain;

import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;

import org.objectweb.asm.ClassReader;

public class EgClassFileTransformer implements ClassFileTransformer {

    protected String agentArgString = "";
    protected Instrumentation instrumentation;

    public EgClassFileTransformer(String agentArgs, Instrumentation inst){
        agentArgString = agentArgs;
        instrumentation = inst;
        instrumentation.addTransformer(this);
    }

    public byte[] transform(ClassLoader loader, String className, Class<?> classBeingRedefined, 
            ProtectionDomain protectionDomain, byte[] classfileBuffer) throws IllegalClassFormatException
        {
            //System.out.println("ClassName :"+className);
            InputStream in = loader.getResourceAsStream(className.replace('.', '/') + ".class");
            try{
                ClassReader classReader=new ClassReader(in);
                String superClassName = classReader.getSuperName();
                String[] interfaces = classReader.getInterfaces();
                if(interfaces!=null && interfaces.length > 0){
                    for(int k=0;k<interfaces.length;k++){
                        String inface = interfaces[k];
                        System.out.println(" \t interface :"+inface);
                    }
                }
                //System.out.println("superClassName :"+superClassName);
                ArrayList thisList = new ArrayList();
                thisList.add(superClassName);
                ArrayList superList = printSuperClassNames(superClassName , thisList);
                System.out.println("className :"+className +" ==>"+ " superList :"+superList);
            } catch (IOException e) {
                //e.printStackTrace();
                System.out.println("[EXECEPTION] ..."+className);
            }
            return null;
        }

    public static ArrayList printSuperClassNames(String className, ArrayList list)
    {
        ClassReader cr=null;
        try {
            cr = new ClassReader(className);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String superName = cr.getSuperName();
        //System.out.println("[superName]"+superName);
        if(superName!=null && !superName.equals("java/lang/Object"))
        {
            list.add(superName);
            String superClass = superName.replace('.', '/');
            printSuperClassNames(superClass, list);
        }
        return list;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:37:12.027

一个简单的方法是访问一个类的构造函数的字节码并记录第一个构造函数调用指令，即`invokespecial`你可以找到的调用。这应该为您提供`super`与当前感兴趣的类相关的类的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T06:48:48.423

这有点棘手，因为类文件只包含直接超类。因此，您必须递归地阅读所有超类。

您可以通过使用 ClassVisitor 处理每个类来执行此操作，该 ClassVisitor 具有覆盖的访问（int 版本，int 访问，字符串名称，字符串签名，字符串超名称，字符串 [] 接口）方法来读取超类名称。

伪代码：

```
List<String> getSuperClasses(className){
  superClass=getSuperClass(className)
  return superClass+getSuperClasses(superClass)
}

String getSuperClass(className) {
  cw=new ClassWriter()
  v=new SuperClassReadingClassVisitor(cw)
  new ClassReader(className).accept(v)
  return v.superClass
}

class SuperClassReadingClassVisitor{
  String superClass
  @Override
  visit(int version, int access, String name, String signature, String superName, String[] interfaces) {
  superClass=superName
  super.visit(version, access, name, ...)
} 
```

# ruby-on-rails - Rails 没有从正确的文件夹加载 CSS

> ID：14700380
> 
> 赞同：0
> 
> 时间：2013-02-05T04:46:57.620
> 
> 标签：ruby-on-rails

我在引用 assets/stylehsheets 文件夹中包含的样式表时遇到问题。这是我的布局实现：

```
<!DOCTYPE html>
<html>
<head>
  <title>iOSScreencast</title>
  <%= stylesheet_link_tag "application", :media => "all" %>
    <%= stylesheet_link_tag "bootstrap.min", :media => "all" %>

  <%= javascript_include_tag "application" %>

  <%= csrf_meta_tags %>
</head>
<body>

<%= yield %>

</body>
</html> 
```

当我运行该页面时，它显示它正在资产文件夹中寻找“bootstrap.min”。资产管道已启用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:16:59.447

更好的解决方案是通过资产管道加载引导程序。

为此，请转到您的`app/assets/application.css`文件并添加：`require 'bootstrap.min'`在文件中的其他要求之上。

这样做的好处是 Bootstrap 与应用程序的其余部分 CSS 一起编译，这通常会使页面的加载速度更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:10:45.487

您最好的选择是使用[bootstrap-sass gem](https://github.com/thomas-mcdonald/bootstrap-sass)，您可以将其包含`gem 'bootstrap-sass', '~> 2.0.4.0'` 在您的 gemfile 中。然后，您无需在样式表中明确声明它。相反，为您的自定义样式使用文件：

```
<%= stylesheet_link_tag "application", :media => "all" %>
<%= stylesheet_link_tag "custom", :media => "all" %> 
```

然后在 custom.css.sass 中，使用 @import 指令来包含引导程序：

```
@import "bootstrap" 
```

这将是在您的应用程序中包含 Bootstrap 的最简单方法。

# javascript - 如果我单击菜单 1，我想显示表格而不是显示 hi

> ID：14700381
> 
> 赞同：-1
> 
> 时间：2013-02-05T04:47:08.957
> 
> 标签：javascript

在此，如果我单击 menu1 hi 将显示。我想要显示一个有 5 行和 6 个列的表格。任何人都可以帮助我

## JavaScript

```
function displayDate1() {
  document.getElementById("demo1").innerHTML=" hi";
  document.getElementById("demo2").innerHTML="";
}
function displayDate2() {
  document.getElementById("demo2").innerHTML="Bye";
  document.getElementById("demo1").innerHTML="";
} 
```

## HTML

```
<h1>My First JavaScript</h1>
<a href="javascript:void(0);" onclick="displayDate1()">Menu 1</a> | <a href="javascript:void(0);"     onclick="displayDate2()">Menu 2</a> 
<p id="demo1"> </p>
<p id="demo2"></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:50:39.063

将 displayDate1() 替换为以下内容：

```
function displayDate1() {
    var html_table = '<table>' +
           '    <tr>' +
           '      <td>Blah</td>' +
           '    </tr>' +
           '</table>';

    document.getElementById("demo1").innerHTML= html_table;
    document.getElementById("demo2").innerHTML="";
} 
```

请注意，这不是 PHP 问题。这是一个Javascript问题。您还需要填写 html_table 中的表格，使其有 5 行和 6 列。

作为一个方面，您可以考虑查看 jQuery。它使这样的事情变得容易得多。

# sql - 日期检查以避免 sql 中的异常

> ID：14700383
> 
> 赞同：0
> 
> 时间：2013-02-05T04:47:35.803
> 
> 标签：sql, regex, oracle

我有一个查询，我需要将 TO_DATE(format specified is 'DD.MM.YYYY') 函数应用于 VARCHAR 类型列。但是，日期可能无效，例如“aa.12.2012”或“31.02.2012”等

当 TO_DATE 函数处理错误的日期值时，这将导致异常并且查询将失败。

一种方法是运行光标并识别每个日期错误的单元格，但我想避免这种方式。

我尝试使用正则表达式，但我没有成功放置所有验证。

就像这样

```
 select
 case
   when regexp_like('24.01.2013',
                    '[[:digit:]]{2}.[[:digit:]]{2}.[[:digit:]]{4}') then
    1
   else
    0
 end chk
  from dual 
```

这无法捕获像 2 月 31 日这样的无效日期。

是否可以在正则表达式中对日期进行所有验证，因为我通过 decode & case 执行了所有验证，而且它相当冗长。

```
 SELECT DECODE((REPLACE(TRANSLATE('29.01.2013', '0123456789.', ' '), ' ', '')),
              NULL,
              (CASE
                WHEN LENGTH('29.01.2013') != 10 THEN
                 'FALSE'
                WHEN LENGTH('29.01.2013') -
                     LENGTH(REPLACE(TRANSLATE('29.01.2013', '.', ' '),
                                    ' ',
                                    '')) != 2 THEN
                 'FALSE'
                WHEN INSTR('29.01.2013', '.', 1, 1) != 3 THEN
                 'FALSE'
                WHEN INSTR('29.01.2013', '.', 1, 2) != 6 THEN
                 'FALSE'
                WHEN TO_NUMBER(SUBSTR('29.01.2013', 4, 2)) IN
                     (1, 3, 5, 7, 8, 10, 12) THEN
                 (CASE
                WHEN TO_NUMBER(SUBSTR('29.01.2013', 1, 2)) >= 1 AND
                     TO_NUMBER(SUBSTR('29.01.2013', 1, 2)) <= 31 THEN
                 'TRUE'
                ELSE
                 'FALSE'
              END) WHEN
              TO_NUMBER(SUBSTR('29.01.2013', 4, 2)) IN (4, 6, 9, 11)
              THEN(CASE
                     WHEN TO_NUMBER(SUBSTR('29.01.2013', 1, 2)) >= 1 AND
                          TO_NUMBER(SUBSTR('29.01.2013', 1, 2)) <= 30 THEN
                      'TRUE'
                     ELSE
                      'FALSE'
                   END) WHEN TO_NUMBER(SUBSTR('29.01.2013', 4, 2)) IN (2)
              THEN(CASE
                     WHEN REMAINDER(TO_NUMBER(SUBSTR('29.01.2013', 7, 4)), 4) = 0 THEN
                      (CASE
                     WHEN TO_NUMBER(SUBSTR('29.01.2013', 1, 2)) >= 1 AND
                          TO_NUMBER(SUBSTR('29.01.2013', 1, 2)) <= 29 THEN
                      'TRUE'
                     ELSE
                      'FALSE'
                   END) WHEN
              REMAINDER(TO_NUMBER(SUBSTR('29.01.2013', 7, 4)), 4) != 0
              THEN(CASE
                     WHEN TO_NUMBER(SUBSTR('29.01.2013', 1, 2)) >= 1 AND
                          TO_NUMBER(SUBSTR('29.01.2013', 1, 2)) <= 28 THEN
                      'TRUE'
                     ELSE
                      'FALSE'
                   END) END) END), 'FALSE')
  FROM DUAL 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:29:14.047

在这种情况下，我永远无法完全让正则表达式正常工作——99% 的时间都可以，但是像闰年这样的事情总是很困难的。

我之前在网上看过这个似乎效果很好：

```
CREATE OR REPLACE FUNCTION MY2DATE (p_str IN VARCHAR2
  ,format_picture IN VARCHAR2
)
   RETURN DATE
IS
BEGIN
   RETURN TO_DATE(p_str, format_picture);
EXCEPTION
   WHEN OTHERS
   THEN
      RETURN NULL;
END;
/ 
```

基本上，传递字符串值和格式，如果捕获到任何异常，它将返回 NULL。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:15:36.207

以下正则表达式验证日期：

```
^(((?=\d{2}\.(0[13578]|1[02]))(0[1-9]|[12]\d|3[01]))|((?=\d{2}\.(0[469]|11))(0[1-9]|[12]\d|30))|((?=\d{2}\.02\.\d{2}([02468][048]|[13579][26]))(0[1-9]|[12]\d))|(((?=\d{2}\.02\.\d{2}([02468][^048]|[13579][^26]))(0[1-9]|1\d|2[0-8]))))\.(0[1-9]|1[0-2])\.(0{3}[1-9]|((?!0{3}\d)\d{4}))$ 
```

**注意：**将有一个使用条件表达式的更简单的正则表达式。

# batch-file - Windows 批处理文件：搜索关键字的行并使用分隔符进行编辑

> ID：14700385
> 
> 赞同：0
> 
> 时间：2013-02-05T04:48:28.427
> 
> 标签：batch-file, batch-processing, text-processing

我正在编写一个批处理文件来编辑 cygwin 的文本文件以启用 chroot 而无需手动干预。

我想找到包含关键字**SvcCOPSSH**的行，然后使用分隔符冒号“ **：** ”编辑行以替换第三和第四之间的数字

例如找到下面的行

> SvcCOPSSH:unused_by_nt/2000/xp: **1023** :545:U-WINDOWS-AU90FH5\SvcCOPSSH,S-1-5-21-2xxxx5-2xxx9-7xx50-1031:/var/:/bin/false

并将**1023**编辑为**0**

> SvcCOPSSH:unused_by_nt/2000/xp: **0** :545:U-WINDOWS-AU90FH5\SvcCOPSSH,S-1-5-21-2xxxx5-2xxx9-7xx50-1031:/var/:/bin/false

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:03:25.310

```
setlocal enabledelayedexpansion
for /f "tokens=1-7 delims=:" %%a in ('findstr "^SvcCOPSSH" file.txt') do (
echo %%a:%%b:0:%%d:%%e:%%f:%%g >new.txt
)
del file.txt /f /q
ren new.txt file.txt 
```

只需替换`file.txt`为您的实际文本文件。

# java - 在 QA 和 PROD 中部署时 url 大小超过一定限制时出现 403 错误

> ID：14700388
> 
> 赞同：0
> 
> 时间：2013-02-05T04:48:51.153
> 
> 标签：java, jboss, webserver, http-status-code-403

我有一个带有分页显示标签的 JSP 页面。当我在显示标签中切换页面时，有一些数据通过 URL 传递。

我在页面之间切换时在本地系统中的观察是，当 url 长度超过 3000 个字符时，当我从地址栏中复制 url 时，它被修剪为 2083 个字符。但系统按预期工作。

但是在 QA 和 prod 中，对于相同的场景，我收到 403 错误。

我正在使用 IE 浏览器，其[最大 url 长度为 2083 个字符](http://support.microsoft.com/kb/208427)。

我怀疑是 QA 中使用的 jboss 服务器，如果 url 长度超过某个限制，则 prod 会发出 403。这可能吗？我很确定这个问题与 JBOSS 服务器有关，但无法弄清楚到底是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:59:42.607

这很奇怪，因为 403 错误代码意味着禁止。但是正如您所说，Internet Explorer 可以处理的最大 URL 长度为 2083，因此 URL 被截断（这似乎不是 JBoss 问题）。

但是如果你仍然想增加 JBoss 允许的 URL 长度，你可以尝试增加它的[maxHttpHeaderSize](http://docs.jboss.org/jbossweb/2.1.x/config/http.html)（如果没有指定它默认为 8192 字节）。它可以在 web 服务器的 server.xml 中完成（例如在 JBoss 5.1 中它位于 deploy/jbossweb.sar/server.xml）。在此文件中，您必须在您使用的 HTTP 或 HTTPS 连接器中添加参数（如果它不存在），例如：

```
<Connector protocol="HTTP/1.1" port="8080" address="${jboss.bind.address}" 
       connectionTimeout="20000" redirectPort="8443" maxHttpHeaderSize="65536"/> 
```

但是对于给你的信息，问题似乎与Internet Explorer的[URL 长度限制直接相关。](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)

# mdx - SSRS-MDX Slicer（将大字符串作为切片器传递）

> ID：14700391
> 
> 赞同：0
> 
> 时间：2013-02-05T04:49:25.490
> 
> 标签：mdx

我不确定这是否可能，这可能看起来很奇怪，但我正在做噩梦来实现这个，

我有一个奇怪的要求，我需要传递一个 20000 个字符宽的字符串。

让我介绍一下背景

我在多维数据集中有一个维度，其属性称为产品线代码，它可能有 20000 个唯一值示例（1-20000），用户希望将所有这些值存储到报告过滤器表中，并将这些值传递给 SSRS 报告，这应该依次传递给 MDX 查询以用作切片标准，而无需用户在 SSRS 端进行任何干预。

以下是我所做的，这没什么大不了的，我知道在 SQL 中编写了一个小函数，该函数从 Report Filter 表中读取值以创建一个集合并作为一个字符串返回，例如 {[Product].[Product Line].[Code ].&[1],[产品].[产品线].[代码].&[2],...................... .......,[产品].[产品线].[代码].&[20000]}

当我在 SSRS 数据集中调用此函数时，它返回一个空白值，尽管它在 SQL 中没有问题，但与此相比，我对其他尺寸相对较小的切片做同样的事情，它们都工作正常。

我的问题是如何通过 SSRS 参数传递这个大值字符串以将其用作 MDX 中的切片器。

有没有其他选择，有没有人遇到过这种场景。

感谢您的帮助

谢谢亚历克斯塞巴斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:25:04.650

是否只有几组不同的标准 [产品线] 代码？我问的原因是，您能否创建一个已定义[集](http://msdn.microsoft.com/en-us/library/ms145963.aspx)的列表并将其用作 MDX 中的参数。因此，在报告服务中，他们只需下拉各种产品线集。

# c++ - 朋友类声明

> ID：14700393
> 
> 赞同：0
> 
> 时间：2013-02-05T04:49:39.640
> 
> 标签：c++, class, friend-class

我是 C++ 编程的新手，我们可以将类的一些成员声明为其他类的朋友吗？这意味着假设 A 类有三个成员函数，而不是将整个类声明为其他 B 类的朋友（比如说），我可以只将 A 类的一个成员声明为 B 类的朋友，所以请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:02:30.917

是的：

```
class A
{
    public:
        void func_1();
        void func_2();
        void func_3();
};

class B
{
    friend void A::fund_2();
    void plop(); // only A::func_2() can call this function
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T04:52:46.143

在声明友元类时，友元类的所有成员函数都成为声明友元类的类的友元。[来源](http://en.wikipedia.org/wiki/Friend_class)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T04:52:49.857

是的，您可以将单个成员函数声明为另一个类的朋友。
**[在线样品](http://ideone.com/xtzpQX)**：

```
#include<iostream>
class Myclass;
class Otherclass
{
    public:
      void doSomething(Myclass &obj);

};
class Myclass
{
    int i;
    friend void Otherclass::doSomething(Myclass &obj);
};
void Otherclass::doSomething(Myclass &obj)
{
    obj.i = 10;
    std::cout<<obj.i;
}

int main()
{
    Myclass obj;
    Otherclass obj2;
    obj2.doSomething(obj);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T04:54:03.237

不要对你苛刻，但看看我通过谷歌搜索“c++朋友类函数”找到了什么：

[朋友函数和类](http://www.learncpp.com/cpp-tutorial/813-friend-functions-and-classes/)

...还有大约 200 个。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-05T04:56:38.680

是的。

例如，询问 wiki（他们什么都知道）：

[http://en.wikipedia.org/wiki/Friend_function](http://en.wikipedia.org/wiki/Friend_function)

或者做一个基本的搜索......

# testing - 在 dejagnu 回归测试套件中仅运行 gcc 测试

> ID：14700394
> 
> 赞同：2
> 
> 时间：2013-02-05T04:49:39.500
> 
> 标签：testing, gcc, compiler-construction, regression

我如何在 dejagnu 回归测试套件中只执行 gcc/C 测试并忽略 c++ 测试（我正在使用 --enable-languages=c,c++ 构建我的编译器）。我正在使用 gcc 4.4.7 版本。
对于 gcc 4.6.2 版本，有一个“check-c”目标仅运行 C 测试，但在 gcc 4.4.7 中不存在。我正在通过以下命令从 gcc 构建目录运行测试套件：

```
 make check-c RUNTESTFLAGS="<someflags>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-27T19:53:55.257

很抱歉，这太晚了，但我在这里发帖以防有人遇到这种情况并发现它有用：

当我尝试在 gcc 中运行单个测试时，我会

```
make check-gcc-c++ RUNTESTFLAGS="dg.exp=*ignored-qualifiers*" 
```

这将调用与 gcc/testsuite/g++.dg/ 目录中的 glob*忽略限定符匹配的所有测试。*

```
make check-gcc RUNTESTFLAGS="dg.exp=*ignored-qualifiers*" 
```

这将调用匹配相同 glob 但在 gcc/testsuite/gcc.dg/ 目录中的所有测试。

这就是我所做的，但我确信这可能不是正确*的*方法！

我希望它有所帮助！将要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T21:40:17.113

您总是可以直接调用`runtest`，如下所示：

```
cd $GCC/gcc/testsuite
runtest --tool gcc 
```

您未解压缩的分发目录在哪里`$GCC`（即，不是构建区域）。测试将在 开始执行`$GCC/gcc/testsuite/lib/gcc.exp`。您还可以传递一个`-v`标志来详细查看所有命令。

请注意，某些路径或其他详细信息在您的 4.4.7 发行版中可能有所不同，因为我指的是 4.7.2。

# c# - VS 立即窗口 - 当前上下文中不存在该名称

> ID：14700396
> 
> 赞同：8
> 
> 时间：2013-02-05T04:49:53.713
> 
> 标签：c#, .net, visual-studio, visual-studio-2008

我有这个东西在代码的某些部分一直困扰着我，我不知道是什么原因造成的。

我有一个设置断点的代码块。如果我随后使用光标并将鼠标悬停在变量上，我通常可以浏览该变量的内容和值。

而有些变量，我无法查看内容，什么也没有出现。

此外，如果我尝试通过即时窗口调查那些我无法调查的内容，它会告诉我`The name 'temp' does not exist in the current context`

我真的很生气为什么会发生这种情况，一些整数而不是其他整数，一些类对象而不是其他相同类型的对象。

关闭 Visual Studio 并重新启动并不能修复它。

我在没有优化的调试中运行。

只是在这个问题上寻找一些帮助，所以在此先感谢。

这是它发生的代码示例，没有特殊代码或委托。即使只有几行代码，它也可能发生在程序的随机部分。

```
segs2D = ConvertSegmentsTo3DLines(segs2D);
IList<DSegment2D> segs3D = DSegment2D.Duplicate(segs2D);
TransformSegments(segs3D, transform);
foreach (var seg in segs3D)
    MoveSegmentToSolid(seg, moveNormal, solid, false);

Dictionary<double, Strategy> strategiesDic = new Dictionary<double, Strategy>();

double d1 = (double)(segs3D[0].GetP1Tag() ?? 0);
double d2= (double)(segs3D[0].GetP2Tag() ?? 0);
foreach (DSegment2D seg in segs3D)
{
    d1= (double)(seg.GetP1Tag() ?? d1);
    d2= (double)(seg.GetP2Tag() ?? d2);
    ...Stuff
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-21T12:05:47.020

> 此外，如果我尝试通过即时窗口调查那些我无法通过的窗口，它会告诉我当前上下文中不存在名称“temp”

尝试使用方法的全名

例如：

命名空间.class.method();

代替

类.方法（）；

似乎即时窗口也依赖于当前选定的文件/项目。

希望这有助于马蒂亚斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-06T20:28:29.307

我有一个类似的问题。我以为我在调试，但还有一个更简单（但很重要）的步骤。在“解决方案配置”设置为“调试”的地方，我还必须单击“调试”旁边的向下箭头并选择“配置管理器...”，然后在相应的弹出窗口中，“配置”仍设置为“发布”——我必须将其更改为“调试”并单击“关闭”按钮。从那里重新运行允许我在调试时查看所有变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:29:26.787

也许变量尚未在您遇到断点的代码块中声明或初始化（即执行还没有那么远）。

例如，`bar`当您命中断点时，您描述的悬停和立即窗口问题都将发生在以下代码块中：

```
public class Whatever
{
    public void DoSomething()
    {
        string foo = "blah"; // Breakpoint hit and execution stopped here.

        // Do something.

        DoSomethingElse();
    }

    public void DoSomethingElse()
    {
        string bar = "yack";

        // Do something else.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T05:00:59.397

事实证明，该方法的绝对复杂性和缩进的数量在当时是造成问题的原因。我已经简化并运行了大部分原始代码，并且不再遇到这个问题。我还升级到 VS2012，这也可能有所帮助。

# c# - C# Chess Game - 在调整其 WinForm 大小时自动调整棋盘大小

> ID：14700408
> 
> 赞同：1
> 
> 时间：2013-02-05T04:51:24.553
> 
> 标签：c#, winforms, image-resizing, window-resize

好吧，标题几乎说明了一切......我正在构建一个 C# WinForms 国际象棋游戏，并试图实现调整棋盘大小的能力。

我目前有一个`FormBorderStyle`设置为`Sizable`和[this`TableLayoutPanel`](http://dl.dropbox.com/u/64884336/h/panel.txt)的表单，以及[这个`Layout`事件处理程序](http://dl.dropbox.com/u/64884336/h/layout.txt)。

```
private void Form1_Layout(object sender, LayoutEventArgs e)
{
    panBoard.SuspendLayout();

    int xDiff = this.Size.Width - oldSize.Width;
    int yDiff = this.Size.Width - oldSize.Height;
    int diff = xDiff > yDiff ? xDiff : yDiff;

    this.Size = new Size(oldSize.Width +
    diff, oldSize.Height + diff);
    sizeXY += diff;
    game.SizeXY = sizeXY;

    panBoard.ResumeLayout();
} 
```

当我运行应用程序并调整表单大小时，背景图像会稍微缩放太多，如[这两张图片](https://www.dropbox.com/sh/zl9qbnaifnacxsd/UzRlvy0zg5)所示。的`TableLayoutPanel`单元格边框应该与图像中的单元格对齐。关于我做错了什么的任何想法？MTIA :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:01:27.293

您的图片看起来像正在缩放到表格的整个大小，而不仅仅是棋盘的区域。

而不是使用

```
this.Size 
```

作为缩放的基础，尝试使用

```
this.ClientSize 
```

> 表单客户区的大小是不包括边框和标题栏的表单大小。

[http://msdn.microsoft.com/en-us/library/9278sfx2(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/9278sfx2(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:23:09.700

是的....使用这些图片绝对是一个更好的解决方案。但请允许我也炫耀几年前我为自己制作的应用程序使用的一个肮脏的把戏。

我拿了一个表格并`TableLayoutPanel`在其中添加了一个。将`TableLayoutPanel.Dock`属性设置为`Fill`。将表单大小设置为正方形（例如 400 * 400）。将`TableLayoutPanel`列和行设置为 8，将宽度设置为`Percentage`50。然后我想在运行时生成并使用逻辑循环`Panel`将它们添加到每个框中。在运行时更改每个备用面板的 （以将它们显示为国际象棋）。将每个面板的属性设置为. 您可以使用面板的属性来更好地查看它们。运行您的应用程序，一切都应该按预期进行。`TableLayoutPanel``for``BackColor``Dock``Fill``Margin`

这个技巧的几个优点是，您可以随时轻松更改棋盘的颜色。`TableLayoutPanel`也可以更改盒子的数量（如果不是国际象棋）。我知道这是您不想要的东西，但绝对是您可以考虑的东西。它也不会使您的应用程序变得繁重。相信我，输出看起来很酷。

希望能帮助到你。

# java - WatchService 谁在改变？

> ID：14700416
> 
> 赞同：0
> 
> 时间：2013-02-05T04:52:14.293
> 
> 标签：java, file, audit

我想知道在 File WatchService 开启时谁在进行更改。可以使用 Files.Ower(Path path) 提取用户属性，但我找不到在内部网络中进行的审核。也许这不是 WatchService 接受的方式，因此有人对如何跟踪或从审计属性中提取有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:18:25.250

如果您可以使用[Apache VFS](http://commons.apache.org/vfs/)

```
FileSystemManager manager = VFS.getManager();
FileObject file= manager.resolveFile("Your File Path");

DefaultFileMonitor fm = new DefaultFileMonitor(new YourListener());

fm.addFile(file); 

fm.start(); 
```

`YourListener`并在课堂上捕捉细节。

# jquery - flot 中的虚线刻度线/网格线

> ID：14700417
> 
> 赞同：6
> 
> 时间：2013-02-05T04:52:16.347
> 
> 标签：jquery, grid, flot

我对这个 flot API 很陌生。我想要虚线网格线/刻度线而不是实线 X 轴和 Y 轴。谁能帮我这个？？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-17T22:51:50.683

通过修改库，我能够为网格标记生成虚线。我目前正在使用 Flot 版本 0.8.0

首先，我在网格（大约 400 行）下添加了一个新属性，就在标记线宽度的下方：

```
markingsStyle: 'dashed' 
```

由于 Flot 使用画布呈现图表，因此我使用来自 David Owens的[代码为画布添加了 dashedLineTo() 扩展。](http://davidowens.wordpress.com/2010/09/07/html-5-canvas-and-dashed-lines/)我在 Flot 代码顶部的颜色解析器插件之后添加了它，并归功于 David。dashedLineTo() 具有以下参数：

```
dashedLineTo(fromX, fromY, toX, toY, pattern) 
```

对于该模式，我使用了 [5,5]，这意味着将交替使用 5px 的破折号和 5px 的空间。

最后，在绘制标记时，我修改了插件中的 drawGrid 函数。

```
if(options.grid.markingsStyle == 'dashed') {
    ctx.dashedLineTo(xrange.from, yrange.from, xrange.to, yrange.to, [5,5])
} else {
    ctx.moveTo(xrange.from, yrange.from);
    ctx.lineTo(xrange.to, yrange.to);
} 
```

只是认为您可以在修改库时将其用作参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:32:52.820

不幸的是，Flot 目前不提供更改网格/刻度线样式的方法。您将不得不修改库本身。

# eclipse - Eclipse 选项卡略大于四个空格

> ID：14700419
> 
> 赞同：1
> 
> 时间：2013-02-05T04:52:24.413
> 
> 标签：eclipse, tabs, alignment, spaces

这*不是*制表符与空格的问题。只是我的 Eclipse 文本编辑器（java、xml、文本等）没有正确地将它们的选项卡与空格对齐。

这是一个屏幕截图，我在其中输入数字“1”，然后在一行中输入三个空格，在下一行输入一个制表符（设置为四个空格）。 ![在此处输入图像描述](../Images/ff9cef94fa0a35b381a23d86322aaa00.png)

您可以看到，随着行长的增加，制表符问题变得更加明显。

有时我发现自己在屏幕右侧排列了很多项目，但它看起来并不正确。有没有其他人发现这个问题，更重要的是解决方案/解决方法？或者更好的是，知道我需要更改哪些设置才能使制表符和空格变得有趣？

我在 Macintosh 上运行 Eclipse Juno Service Release 1，Build id: 20121004-1855，安装了 Android 的东西、Mylyn、Eclipse Modeling Project、Egit、Webtools、CDT (C++) 和 Andrey Loskutov 的颜色主题包（因此白色-黑色文本）。

是的，这听起来很挑剔，但**为什么**呢？

还有一件事：我刚刚使用全新安装的 Eclipse Classic v. 4.2.2 (Juno) 对此进行了测试，但问题仍然存在。（硬件：Snow Leopard 上的 iMac10,1）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:38:05.903

我不能完全肯定，因为我看不到您的设置，但我敢打赌这与您使用的字体有关。我正在使用 Source Code Pro 字体，并且我的制表符和空格排列得很好......

![在此处输入图像描述](../Images/05816c6e4045ca98331ab134292d6426.png)

# php - php - 在二维数组中映射值并对值执行函数

> ID：14700427
> 
> 赞同：5
> 
> 时间：2013-02-05T04:52:49.967
> 
> 标签：php, arrays, mapping

我有一个像这样的二维数组

```
array(
    array(
        'column1' => 10,
        'column2' => 11
    ),
    array(
        'column1' => 25,
        'column2' => 137
    ),
    array(
        'column1' => 21,
        'column2' => 58
    )
) 
```

键`column1`和`column2`是固定的。它们不会改变。

我需要对这个二维数组中的数据执行各种功能。各种功能可以按两种方式分组：

*   逐行优先
*   列优先

Row-wise first 函数的示例，

在乘以列之前，我想先按行汇总所有数字。

所以预期的行为是 (10+11) * (25+137) * (21+58)

列式第一个函数的示例，

在乘以行之前，我想先按列对所有数字求和。

所以预期的行为是 (10+25+21)*(11+137+58)

我写出自己的组件函数没有问题。在上面，我只需要两个组件函数 sum 和 product

```
function sum (adden1, adden2) {
    return adden1 + adden2;
}

function product (multiplicant1, multiplicant2) {
    return multiplicant1 * multiplicant2;
} 
```

问题是映射。我想减少我需要编写的 for 循环的数量。我希望我的代码更加模块化，因为在某些情况下所需的行为如下：

1.  对每一行 100-(column1+column2) / column2 执行此操作，然后总结所有结果。

我需要处理的公式太多。但我非常有信心，基本上这都是先行先行或先行先行的混合。

希望得到一些关于将值映射到函数的建议。

**更新：**

最终我重新设计了我的架构来解决这个问题。所以这个问题不再适用于我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:54:22.307

你必须以某种方式迭代数组。看看[array_map](http://www.php.net/manual/en/function.array-map.php)和[array_walk](http://php.net/manual/en/function.array-walk.php)。

这是一个例子：

```
<?php
$input = array(
    array(
        'column1' => 10,
        'column2' => 11
    ),
    array(
        'column1' => 25,
        'column2' => 137
    ),
    array(
        'column1' => 21,
        'column2' => 58
    )
);

echo 'Row wise : ', array_product(array_map(
    function($row){ 
     return $row['column1'] + $row['column2']; 
    }, $input)), '<br/>';

$output = array(0,0);
array_walk($input, 
  function($val, $key, &$output){ 
     $output[0] += $val['column1'];
     $output[1] += $val['column2'];
  }, &$output);
echo 'Column wise : ', array_product($output);

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:55:00.647

逐行是最容易映射的：

```
$a = array(
    array(
        'column1' => 10,
        'column2' => 11
    ),
    array(
        'column1' => 25,
        'column2' => 137
    ),
    array(
        'column1' => 21,
        'column2' => 58
    )
);

echo array_product(array_map('array_sum', $a)), "\n"; 
```

Column wise 需要一个实用函数来将所有列一起抓取到一个数组中：

```
echo array_product(array(
  array_sum(array_column($a, 'column1')),
  array_sum(array_column($a, 'column2'))
)), PHP_EOL;

function array_column(array $a, $column)
{
  return array_map(function($item) use ($column) {
    return $item[$column];
  }, $a);
} 
```

# asp.net - WCF 错误 400 错误请求

> ID：14700430
> 
> 赞同：1
> 
> 时间：2013-02-05T04:53:02.710
> 
> 标签：asp.net, wcf, streaming

我正在尝试将数据文件上传到 WCF 服务，它适用于小文件。但是，当我尝试上传大小为 2MB 的文件时，我只会收到错误 400 Bad Request。

由于它适用于小文件，我不得不认为最大大小限制存在问题，但我已经增加了它们，我仍然得到同样的错误。

感谢您帮助我走向正确的方向。谢谢 ：）

我在 WCF 服务中使用以下配置。

这是服务配置

```
 <!-- WIZARD FILE UPLOAD CONFIGURATION -->
  <service behaviorConfiguration="BBS.eBillity.Services.ServiceBehavior" name="BBS.eBillity.Services.Modules.IWizardUploadFile">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="WizardUploadFile_StreamedBinding"
     contract="BBS.eBillity.Services.Contracts.ServicesContracts.IWizardUploadFile">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
  </service> 
```

服务的绑定配置

```
<binding name="WizardUploadFile_StreamedBinding" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647"
             transferMode="StreamedRequest" closeTimeout="04:01:00"
 openTimeout="04:01:00" receiveTimeout="04:10:00" sendTimeout="04:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
              maxBufferPoolSize="2147483647"   useDefaultWebProxy="true">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
           maxArrayLength="2147483647" maxBytesPerRead="2147483647"
           maxNameTableCharCount="2147483647"/>
    </binding> 
```

服务合同，很简单...

```
[ServiceContract]
public interface IWizardUploadFile
{

    [OperationContract]
    void UploadFiletoServer(Stream request);

} 
```

在 system.web 标记内，我在客户端和服务器配置文件中添加了以下内容

```
<httpRuntime maxRequestLength="2147483647" /> 
```

这是客户端配置：

```
 <basicHttpBinding>

 <binding name="BasicHttpBinding_IWizardUploadFile" closeTimeout="04:01:00"
 openTimeout="04:01:00" receiveTimeout="04:10:00" sendTimeout="04:01:00"
 allowCookies="false" bypassProxyOnLocal="false"
 hostNameComparisonMode="StrongWildcard"
 maxBufferSize="2147483647" maxBufferPoolSize="2147483647"
 maxReceivedMessageSize="2147483647"
      transferMode="Streamed"
 useDefaultWebProxy="true">
   <readerQuotas maxDepth="2147483647"
       maxStringContentLength="2147483647" maxArrayLength="2147483647"
       maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
   <security mode="None">
     <transport clientCredentialType="None"
             proxyCredentialType="None" realm="" />
     <message clientCredentialType="UserName" algorithmSuite="Default" />
   </security>
 </binding> 
```

端点配置

```
<endpoint address="http://localhost:1234/WCFeBillity/WizardUploadFile.svc"
binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IWizardUploadFile"
contract="WizardUploadFile.IWizardUploadFile" name="BasicHttpBinding_IWizardUploadFile" /> 
```

# list - 堆栈python3抽象数据类型

> ID：14700434
> 
> 赞同：0
> 
> 时间：2013-02-05T04:53:36.737
> 
> 标签：list, iterator, python-3.2

好的，所以我正在尝试输入“Hello World！” 我希望输出为“dlroW olleH”我的代码一一打印相反的内容。我该如何解决？

```
class Stack:

    def __init__(self):
        self.__items = []

    def push(self, item):
        self.__items.append(item)

    def pop(self):
        return self.__items.pop()

    def peek(self):
        return self.__items[len(self.__items)-1]

    def is_empty(self):
        return len(self.__items) == 0

    def size(self):
        return len(self.__items)
    def __len__(self):
        return len(self.__items)

x = Stack()

userinput = input("enter ")
for letter in userinput:
    x.push(letter)

while x:
    print(x.pop()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:01:11.103

默认情况下，每次调用都会`print()`写入屏幕上的新行。

你可以用[`end`参数来`print()`](http://docs.python.org/3/library/functions.html#print)改变它，像这样：

```
print(x.pop(), end='') 
```

然后，字符串中的所有字符都将打印在同一行上。

您还可以`print()`在末尾添加一个普通调用以添加最终的行尾。

# solr - 对于 Solr dismax 查询，如何获取每个字段的分数？

> ID：14700436
> 
> 赞同：1
> 
> 时间：2013-02-05T04:53:44.573
> 
> 标签：solr, field, dismax

在我的应用程序中，每个文档由四个文本字段组成，即标题、关键字、摘要和文本。我知道我可以使用带有“fq=title keywords summary text”的dismax查询来让Solr在四个字段中进行dismax查询。四个字段中的最大相关性得分将作为最终得分。此外，将分数添加到 fl 参数中，我可以获得每个文档与查询的相关性分数。

但是，问题是如何知道这四个字段中的每一个的相关性得分？这对我来说非常重要，因为我需要转储这些分数来调整字段权重。我想的唯一方法是打开 debugQuery 选项并提取返回的 XML 来解析分数。但我认为它太复杂了。有人对我的问题有简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T15:44:44.177

没有简单的解决方案，您需要在查询中添加 &debugQuery=true，然后解析结果中的“解释”部分。但请注意，它也可以作为数组返回，以便于编程操作。这是通过 &debug.explain.structured=true 实现的，这可以极大地缓解您的生活。

# java - 更新源文件后 Eclipse PMD 自动重新解析？

> ID：14700439
> 
> 赞同：1
> 
> 时间：2013-02-05T04:54:17.990
> 
> 标签：java, eclipse, eclipse-plugin, pmd

我在 Eclipse 下使用 PMD 插件。

**一旦更新源文件以消除固定警告，如何强制 PMD 插件重新解析源文件？**

在包资源管理器中右键单击项目名称后，我选择`PMD -> Check Code with PMD`并显示许多警告/错误。然后我开始修改源代码以解决问题，但警告不会自动消失。

每次验证都需要`PMD -> Check Code with PMD`手动进行，非常繁琐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:14:30.570

对于 Eclipse 插件的 4.0 版本，您必须转到主首选项页面并确保“保存后检查代码”选项已打开。

# ios - 图标在更多选项卡中消失

> ID：14700452
> 
> 赞同：4
> 
> 时间：2013-02-05T04:56:11.440
> 
> 标签：ios, objective-c, uitabbarcontroller, uitabbar

在我的 iPad 应用程序中，我使用了 tabBarController。我运行以下代码以选择特定选项卡：

```
[tabBarController setSelectedViewController:myNavigationController]; 
```

（我修改了`selectedViewController`类的属性`UITabBarController`，见[苹果文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html)）

这完美无缺；唯一的问题是，当用户使用左上角按钮导航回“更多...”屏幕时，先前选择的选项卡的图标丢失了：

![缺少一个图标](../Images/082d3571ec57924a4efa33c0985d640b.png)

当我手动导航时，没有问题。图标始终在“更多”屏幕中可见。仅当我使用该方法时才会出现此问题`setSelectedViewController`。

标签栏项目的创建如下：

```
newVC = [[SynchronizeViewController alloc] init];
newVC.tabBarItem = [[UITabBarItem alloc] 
    initWithTitle:NSLocalizedString(@"SYNCHRONIZE", @"synchronize tab label") 
    image:[UIImage imageNamed:@"02-redo.png"] tag:0]; 
```

有人遇到过同样的问题并找到解决方法吗？提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:38:24.003

**您能否将下一个方法添加到同步控制器：**

```
- (void)viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:animated];
    AppDelegate* appDelegate = (AppDelegate*)[UIApplication sharedApplication].delegate;
    UITableView *view = (UITableView *)appDelegate.tabBarController.moreNavigationController.topViewController.view;
    [view reloadData];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T12:10:18.537

问题是，**你是在创造** `UITabBarItem`自己。来自以下文档`-tabBarItem`：

> 首次访问该属性时，将`UITabBarItem`创建 。

所以你不需要创建它，只需这样做：

```
newVC.tabBarItem.title = @"Your Title"; // Default is view controller's title.
newVC.tabBarItem.image = yourImage; 
```

* * *

*尝试解释：*出于某种原因，`UITabBarController`决定在内部重新创建所有标签栏项目，或者什么。并且您的实例丢失了，并且使用了默认标题。或者也许只有图像丢失了，谁知道呢。这称为*未定义行为*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T09:33:37.370

尝试从项目中删除该文件。获取一个干净的构建并将其添加回具有不同名称的项目。

# android - 网格视图单元格内的列表视图不滚动

> ID：14700456
> 
> 赞同：0
> 
> 时间：2013-02-05T04:56:31.963
> 
> 标签：android, listview, gridview

在我的应用程序中，我想在网格视图单元格内添加列表视图。但网格视图单元格内的列表视图不滚动。请为我提供适当的解决方案来解决此问题。

# android - Android平板电脑访问本地主机站点

> ID：14700458
> 
> 赞同：0
> 
> 时间：2013-02-05T04:56:45.947
> 
> 标签：android, android-emulator, emulation

我对 Android 编程很陌生。我试图通过 SQL Server 和 PHP（服务器端）访问 Android 的数据库连接。

现在，我可以使用 locahost 通过 Emulator 连接到本地计算机上进行工作。但我无法在通过 USB 电缆连接 Android 平板电脑以检查实际 Android 设备上的应用程序时进行该连接。

有什么办法，我可以通过 USB 线访问我的 Android 平板电脑上的本地主机。就像它如何与 10.0.2.2 和模拟器一起工作一样。

任何帮助或评论都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:19:57.073

你不能。使用 USB 电缆连接到您的机器不会将您的 android 设备连接到计算机的网络上。如果您的系统（托管 localhost 服务器的系统）在网络上，请尝试使用 WIFI 将设备连接到网络。

在一部 HTC 手机中，我在连接到系统时看到了**Reverse Tethering选项。**如果您的设备支持反向网络共享，那么您可以使用此模式连接您的安卓设备。这将使设备与您的计算机位于同一网络上。

仅供参考，这样做时，如果您尝试连接到 localhost 它将无法正常工作，您必须指定系统的 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T23:49:41.540

你错了。是的你可以。我只是做了同样的事情。使用简单的 EasyPHP-DevServer-14.1VC11.exe 诀窍是您必须先将本地 ip 地址添加到 Apache 服务器才能收听它。

右键单击托盘图标，转到“httpd.config”中的“配置”->“Apache”

```
# Change this to Listen on specific IP addresses as shown below to 
# prevent Apache from glomming onto all bound IP addresses.
#
#Listen 12.34.56.78:80
Listen 127.0.0.1:80
Listen 192.168.0.201:80  <<-- ADD THIS LINE 
```

然后转到您的控制面板并停用您的 Windows 防火墙或将您的智能手机/平板电脑 IP 地址添加到例外中。

就是这样。我希望它有所帮助。

IP 地址 192.168.0.201 可能与您的不同。192.168.0.X

# c# - 更新实体框架5，一对一关系

> ID：14700459
> 
> 赞同：0
> 
> 时间：2013-02-05T04:56:46.387
> 
> 标签：c#, entity-framework

```
public class Card : EntityBase
{
    [Required]
    [MaxLength(16)]
    [RegularExpression("([0-9]+)", ErrorMessage = "Only number allowed")]
    public string Number { get; set; }

    public bool IsActive { get; set; }

    public Customer Customer { get; set; }
}

public class Customer : EntityBase
{
    public Customer()
    {
        Address = new Address();
    }

    [Required]
    [MaxLength(50)]
    public string Name { get; set; }

    public string PhoneNumber { get; set; }

    public Address Address { get; set; }

    [ForeignKey("Card")]
    public int Card_Id { get; set; }

    public Card Card { get; set; }
}

public class CustomerConfiguration : EntityTypeConfiguration<Customer>
{
    public CustomerConfiguration()
    {
        HasRequired(x => x.Card).WithMany().HasForeignKey(x => x.Card_Id);
    }
}

static void CreateCustomer()
    {
        using (var context = new BenzineFleetContext())
        {
            var card = var card = new Card
                           {
                               Number = "123456"
                           };
            context.Cards.Add(card);
            context.SaveChanges();
        }

        using (var context = new BenzineFleetContext())
        {
            var card = context.Cards.First(c => c.Number == "123456");

            var customer = new Customer { Name = "Rayz", Card = card };
            context.Customers.Add(customer);
            context.SaveChanges();
        }
    } 
```

我想创建新客户并使用数据库中的卡，当我保存到数据库时，表 Customer 中的 Card_Id 存在，但表 Card 中的 Customer_Id 为空。如何更新表卡中的 Customer_Id？

对不起我的英语不好:(谢谢你的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:32:36.440

你有没有尝试过：

```
using (var context = new BenzineFleetContext())
{
    var card = context.Cards.First(c => c.Number == "123456");

    var customer = new Customer { Name = "Rayz", Card = card };
    card.Customer = customer;
    context.SaveChanges();
} 
```

# iphone - 如何在不移动元素的情况下删除指定索引中的元素

> ID：14700462
> 
> 赞同：0
> 
> 时间：2013-02-05T04:57:14.667
> 
> 标签：iphone, objective-c

我在我的代码库中使用 nsmutabltearray 并且我想删除指定索引内的元素。我知道元素会自动移动。

但我想阻止这个。元素不应在索引内移动。ex - ：java中的arraylist

objc 中是否有任何指定的列表 tyoe 来执行此操作

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:00:13.183

我认为使用默认的 NS(Mutable)Array 是不可能的。您可以将`[NSNull null]`对象放入其中，而不是删除，但是像`count`and之类的方法`objectAtIndex`仍然会返回相同的值，因此这也可能没有太大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:03:54.630

```
- (void)replaceObjectsAtIndexes:(NSIndexSet *)indexes withObjects:(NSArray *)objects 
```

可以使用方法并在要删除内容的位置放置一个空对象

# css - 使用 Twitter Bootstrap 在菜单上进行响应式设计

> ID：14700465
> 
> 赞同：0
> 
> 时间：2013-02-05T04:57:25.830
> 
> 标签：css, twitter-bootstrap, media-queries

我对响应式设计的 CSS 和媒体查询相当陌生，所以我决定使用 Twitter 引导程序。

我使用他们的响应文件来帮助我，但我的菜单有问题，如您在此处看到的：

![在此处输入图像描述](../Images/68b2e8beeda93976bcfbad14f31014af.png)

菜单每个部分的下拉图像似乎并没有将其他选项“向下推”。该网站可以在[这里](http://fomgsd.com/test/)找到。

这是我的自定义 css 文件上的媒体查询：

```
@media (min-width: 1200px) { 
    .container {width: 940px}

    #solutions{
        min-width: 1090px;
        position: absolute;
        left: -100px;
    }

    #services{
        min-width: 1090px;
        position: absolute;
        left: -190px;
    }

    #support{
        min-width: 840px;
        position: absolute;
        left: -276px;
    }
} 
```

你能帮我做菜单吗？我需要添加自己的媒体查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:38:49.153

```
 #solutions{
                    min-width: 960px;
                    position: absolute;
                    left: -100px;
                    } 
```

尝试将此id宽度形式更改`1090px`为小于`960px`

# javascript - 附加事件以清除 IE10 文本框中的图标

> ID：14700466
> 
> 赞同：10
> 
> 时间：2013-02-05T04:57:57.570
> 
> 标签：javascript, html, internet-explorer, textbox, internet-explorer-10

在 IE10 中，文本框中会出现一个小 X 图标以清除输入文本。如何将事件附加到该操作（=单击该 X 并清除输入）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T16:19:34.047

似乎没有确切的事件（`onchange`不合适）。但是，如果值为空，您可以使用`oninput`并检查：`input`

```
document.getElementById('input_ID').addEventListener('input', function () {
    if (this.value === '') {
        alert('No value');
    }
}, false); 
```

如果用户`input`使用`BACKSPACE`或清除`DELETE`或将内容剪切到剪贴板，也会触发此事件。`oninput`至少适用于 Chrome、FF、IE10 和 Opera。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T18:41:06.427

pl refer :[Event fired when clearing text input on IE10 with clear icon](https://stackoverflow.com/a/21145761/799593)

# tsql - “T-SQL 中的存储过程可以有“SELECT *”语句吗？

> ID：14700467
> 
> 赞同：-1
> 
> 时间：2013-02-05T04:58:21.563
> 
> 标签：tsql, sql-server-2008-r2

SQL Server 中的存储过程能否包含“Select *”关键字。不应该有“从表名中选择列名”。在存储过程中特别是在 T-SQL 中使用“select *”是正确的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:00:47.533

它可以？是的。

应该是？几乎可以肯定不是。

的用例`select *`应仅限于您希望获取每个当前列的情况，无论将来何时从表中添加或删除什么。

这仅限于一些小场景，例如：

*   调试您想要整个表输出以进行检查的位置；或者
*   诸如倾倒器之类的工具，您想要的一切。

我建议每个*用户*查询只获取他们需要的列，因为这两个：

*   尽量减少电汇转账；和
*   无需告诉您，即可轻松检测 DBA 在何处删除了您的列之一。

由于在存储过程中使用非用户查询毫无意义，因此您可能*永远不* `select *`应该使用它们。

# matlab - 如何在Matlab中根据某些列与一组（矩阵查询）的相等性来查找索引

> ID：14700469
> 
> 赞同：0
> 
> 时间：2013-02-05T04:58:29.503
> 
> 标签：matlab

我有一个 n 行 3 列的矩阵。让我们称之为`A=[23 45 6;32 4 78;67 5 34; 54 1 4;6 9 2]`

现在我有一组要点：`B={ P1=[X1,Y1] P2=[X2,Y2] ... }= { [6 9] [32 4] }`

我想在矩阵上设置一个查询，`A`以便它返回所有集合的行（i）的索引`B`：

```
Pk(1,1) ( or Xk) == A(i,1) && Pk(1,2) ( or Yk) == A(i,2) 
```

换句话说，基于第 1 && 2 列设置查询`A`并将它们与 进行比较`B`，因此输出是在第 1 列和第 2 列中具有相同值的行的索引，其中 Xk,Yk 在`B`：

输出：5,2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:19:07.297

按照@TJ1 的建议将 B 设为矩阵

```
B=[6 9; 32 4]; 
```

只需使用[与行选项相交](http://www.mathworks.com/help/matlab/ref/intersect.html#btcnv0p-12)（和第二个输出）

```
[~, i, ~] = intersect(A(:, 1:2), B, 'rows') 
```

我已经对前 2 列进行了索引，`A`因为您只对这些列感兴趣，并且显然 intersect 希望这两个矩阵具有相同的列数。

结果：

```
i =

     5
     2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:02:51.197

也将 B 置于矩阵格式中，例如：

```
B=[6 9; 32 4]; 
```

这是您可以用来执行此操作的 MATLAB 代码：

```
 k=0;
 output=[];
 for n=1:5
   for m=1:2 
     if (sum(A(n,1:2)==B(m,:)) == 2)
       k = k +1;
       output(k) = n;
     end
    end
  end 
```

你的结果在`output`.

* * *

**编辑：**

我正在添加对该行的解释`(sum(A(n,1:2)==B(m,:)) == 2)`。让我们一块一块地看。`A(n, 1:2)`给我们一个 1x2 向量，它是 的第 n 行的前两列`A`。`B(m,:)`也是一个 1x2 向量，因为 B 只有两列。所以假设我们现在`[6 9]`从最后一行`A`和`[6 9]`第一行开始`B`。

`[6 9] == [6 9]`在命令行中尝试。结果是一个逻辑向量：`[1 1]`。原因是`==`它将逐个元素地比较向量。所以第一个 1 是因为 6 等于 6，第二个告诉我们 9 相等。如果你尝试`[6 9] == [7 9]`你会得到`[0 1]`，因为第一个元素现在不同了。

因此，为了评估两个元素是否相同，我们期望运算符产生的向量之和`==`等于 2。如果它等于 1，那么只有一个元素是相同的，我们需要它为 2 来表示整个向量相等（2 因为向量只有 2 个元素）。所以`sum([6 9] == [6 9])`给`2`但`sum([7 9] == [6 9])`只给`1`。

因此，测试一行是否相等的条件是`if (sum(A(n,1:2)==B(m,:)) == 2)`

# php - 提交表单时不会看到我的错误消息

> ID：14700470
> 
> 赞同：0
> 
> 时间：2013-02-05T04:58:36.620
> 
> 标签：php

我使用此代码来验证选择框值。但我的问题是，当我提交表单而不在选择框中选择选项时，它不会出现错误消息。

```
if ( !isset( $_POST['how_hear'])) {
    $errors[] = 'Select an option from How did you hear us select box';                             
} else {
    $howHear = $_POST['how_hear'];
} 
```

这是我的选择框

```
$howHear = array( 1 =>  'option value 01', 
                                'option value 02', 
                                'option value 03', 
                                'option value 04', 
                                'option value 05', 
                                'option value 06', 
                                'option value 07', 
                                'option value 08'
                        );

echo "<select name='how_hear'>
        <option>--Select an Option--</option>\n";

    foreach ( $howHear AS $key => $value) {
        echo "<option value='{$key}'";

        // Check for stickyness:
        if ( $_POST['how_hear'] == $key){
            echo " selected='selected'";
        }
        echo ">$value</option>\n";
    }
echo "</select>\n"; 
```

谁能告诉我我哪里出错了？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:01:44.283

问题似乎是 how_hear 已设置。默认是

```
--Select an Option-- 
```

检查

```
$_POST['how_hear'] != "--Select an Option--" 
```

或者，更新您的选择字段，使默认值为 0（这是正确的做法）。然后检查该值是否非零。

```
<option value="0">--Select an Option--</option> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:02:44.863

尝试

```
<option value="0">--Select an Option--</option> 
```

和

```
if (  $_POST['how_hear'] == 0) {
    //   error message
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:02:22.507

您应该为此添加另一个条件，

```
if ( !isset( $_POST['how_hear']) || $_POST['how_hear'] == "") {
    $errors[] = 'Select an option from How did you hear us select box';                             
} else {
    $howHear = $_POST['how_hear'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T05:18:30.877

我对您的代码进行了一些更改并进行了更新。

```
<?php
    if (isset($_POST['submit'])) 
    {
       if ($_POST['how_hear'] == 0)
       {
           echo "error";
           $errors[] = 'Select an option from How did you hear us select box';                             
       }    
       else 
       {
           echo "Hello";
           $howHear = $_POST['how_hear'];
       }
     }

    echo "<form method='post' action='#'>";
    $howHear = array( 1 =>  'option value 01', 
                            'option value 02', 
                            'option value 03', 
                            'option value 04', 
                            'option value 05', 
                            'option value 06', 
                            'option value 07', 
                            'option value 08'
                    );
    echo "<select name='how_hear'>
        <option>--Select an Option--</option>\n";

        foreach ( $howHear AS $key => $value) 
        {
           echo "<option value='{$key}'>";
           echo "$value</option>\n";
        }

    echo "</select>\n";

    echo "<input type='submit' name='submit' value='submit'/>";

    echo "</form>";

?> 
```

我添加提交按钮，当提交表单时，我检查提交`isset`与否。之后我检查是否`how_hear`选择了值。如果选项值`0`将显示错误。

# c++ - 重置属性页设置 Visual Studio C 2010 Express

> ID：14700472
> 
> 赞同：1
> 
> 时间：2013-02-05T04:59:11.843
> 
> 标签：c++, visual-studio-2010, express

我很久以前对属性页/配置属性进行了一些更改，我想重置它们。我更改了输出目录、代码生成设置等内容。

我尝试从导入和导出设置向导中重置所有环境设置。我也试过 devenv /resetsettings 命令。两者都不起作用。重装也不行。我可以就如何将所有内容恢复为默认值获得一些建议。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:25:00.947

如果我对您的理解正确，您正在尝试恢复为项目 - > 属性的旧设置。

此信息存储在项目本身中，而不是 Visual Studio 中。在解决方案文件夹中查找扩展名为 vcxproj 的文件。

您可以使用记事本 (notepad++) 对其进行编辑，或者 - 您可以在 Visual Studio 中通过以下方式对其进行编辑

*   右键单击项目，将其卸载，然后编辑项目文件，然后重新加载项目

请注意如何编辑这些设置。

为获得最佳结果，请使用新项目创建新解决方案，并将新创建项目的设置与现有项目进行比较。

编辑：在我的电脑上（我认为我有 VS Ultimate，但没关系）：

要进行编辑，请转到项目 -> 属性 -> VC++ 目录，然后在每行的末尾按向下箭头，然后单击编辑...

VC++ 目录：

```
$(VCInstallDir)bin
$(WindowsSdkDir)bin\NETFX 4.0 Tools
$(WindowsSdkDir)bin
$(VSInstallDir)Common7\Tools\bin
$(VSInstallDir)Common7\tools 
```

包括目录：

```
$(VCInstallDir)include
$(VCInstallDir)atlmfc\include
$(WindowsSdkDir)include
$(FrameworkSDKDir)\include 
```

根据我在您指出的方向上看到的情况，您所要做的就是从您的列表中删除您不再需要的目录。

在 c/c++ -> 代码生成 ->

*   启用最小重建：否
    *   启用 C++ 异常：YES (/EHSC)
    *   基本运行时检查 - 两者
    *   /MTd

...

一般 - >输出目录：不确定默认是什么，我会放一些类似的东西

```
$(SolutionDir)bin\$(Platform)\$(Configuration)\ 
```

此外，似乎有一个属性表可能已添加到您的项目中......

您通常可以从视图 -> 属性窗口 (F4) 中看到属性管理器。

在这里，您可以扩展项目配置，并简单地删除您可能不需要的任何属性表（我希望一个新项目没有属性表）。

# github - octopress + github 麻烦：nil:NilClass 的未定义方法“[]”

> ID：14700473
> 
> 赞同：1
> 
> 时间：2013-02-05T04:59:12.243
> 
> 标签：github, octopress

你对章鱼有什么了解[吗](http://octopress.org/docs/deploying/github/)？我试着做

```
rake setup_github_pages
Repository url: monsieurcactus.github.com 
```

然后它说

```
undefined method '[]' for nil:NilClass 
```

我的github页面是

> [https://github.com/MonsieurCactus/monsieurcactus.github.com](https://github.com/MonsieurCactus/monsieurcactus.github.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:29:50.937

看起来像[问题 516](https://github.com/imathis/octopress/issues/516)：

> 哦！有用！
> 你可以试试这个命令：

```
$ rake setup_github_pages
$ Enter the read/write url for your repository: git@github.com:your_username/your_username.github.com.git 
```

> 您应该首先创建一个名为“ `your_username.github.com`”的项目，完整的项目名称是“ `your_username.github.com`”
> 
> 我很惊讶使用`git://github.com/uname/reponame`地址不起作用。
> ([第 666 期](https://github.com/imathis/octopress/pull/666))
> 
> 例如，' `git@github.com:your_username/your_username.github.com`'

# c# - linq-to-sql .All() 或 .Any() 查找所有符合条件的项目

> ID：14700475
> 
> 赞同：2
> 
> 时间：2013-02-05T04:59:29.287
> 
> 标签：c#, linq, linq-to-sql

我有一个看起来像这样的表：

```
| FruitID | BasketID | FruitType |
|   23    |    2     |    1      |
|   24    |    5     |    1      |  
|   25    |    2     |    1      |
|   26    |    5     |    2      | 
```

我正在编写一个查询，我正在传递一个列表，`BasketIDs`并且我想返回一个新列表，`BasketIDs`该列表仅包含`FruitID`所有`FruitTypes`都等于 1 的篮子。例如，如果我传入 BasketID 2 和 5，我只取回 2，因为篮子 5 的 FruitID 26 属于 FruitType 2。

这就是我所拥有的：

```
var TheQuery = (from f in MyDC.TableFruits
                where TheListOfBasketIDs.Contains(f.BasketID) &&
                // need help here 
                select f.BasketID).ToList(); 
```

感谢您对如何编写过滤器的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:26:56.510

对水果进行分组`BasketID`以验证篮子中的所有水果都`FruitType`等于`1`：

```
var TheQuery = (from f in MyDC.TableFruits                  
                group f by f.BasketID into g
                where TheListOfBasketIDs.Contains(g.Key) &&
                      g.All(x => x.FruitType == 1)
                select g.Key).ToList(); 
```

# c++ - 神秘的浮点异常

> ID：14700477
> 
> 赞同：0
> 
> 时间：2013-02-05T04:59:46.817
> 
> 标签：c++, floating-point-exceptions

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

我和我的朋友正在搞砸，试图想出我们能想到的最糟糕的 for 循环（所以不要告诉我这是糟糕的代码，因为它应该是！）。

我的朋友想出了这个 for 循环：

```
for (int i = 0; i++ & ++i % (++i % 2) ? --i : i++; i++); 
```

它看起来不错，但由于浮点异常，即使是第一次也无法进入。所以我的第一个想法是模数除以 0。但它似乎没有，因为如果你这样做，它运行良好：

```
for (int i = 0; i < 100; i++) {
    i++ & ++i % (++i % 2);
} 
```

但这不会：

```
for (int i = 0; i < 100; i++) {
    i++ & ++i % (++i % 2) ? --i : i++;
} 
```

但它变得陌生。第一种情况运行良好，第二种情况不会：

```
for (int i = 0; i < 100; i++) {
    i++ & ++i % (++i % 2) ? 0 : 1;
}

for (int i = 0; i < 100; i++) {
    i++ & ++i % (++i % 2) ? 1 : 0; // 1 and 0 switched
} 
```

所以现在我真的对发生的事情感到困惑，但它又变得更奇怪了。如果您将情况与`? 0 : 1`（运行良好）放入 if 语句中，它会再次引发浮点异常：

```
for (int i = 0; i < 100; i++) {
    if (i++ & ++i % (++i % 2) ? 0 : 1);
} 
```

我完全迷失了这一点。有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T05:14:29.587

它出错了`i++ & ++i`。运算符不会对其操作数进行排序，`&`因此在两边都增加一个会导致未定义的行为。

顺便说一句，这可能是除以零异常，但不一定来自 FPU。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:07:38.717

一般来说，在 C 和 C++ 中的单个表达式中混合这样的多个增量操作是一个坏主意，因为它通常会导致未定义的行为。对于未定义的行为，让事情神秘地改变行为并不奇怪。

另一方面，Java 为所有算术和逻辑运算提供了严格的规范（非 fpstrict 表达式中的浮点指数精度除外）。您可以将所有这些都放入 Java 中（忽略整数不再是有效的布尔表达式这一事实）并让它们给您一个一致的答案，尽管它可能不是您所期望的。

# javascript - javascript字符串和数字变量

> ID：14700479
> 
> 赞同：3
> 
> 时间：2013-02-05T05:00:09.717
> 
> 标签：javascript, converter, string-concatenation, operator-precedence

下面的评价是什么？

```
"1"+2+4 
```

那这个呢：

```
5 + 4 + "3" 
```

在第一种情况下，因为`"1"`是一个字符串，所以一切都是一个字符串，所以结果是`"124"`. 在第二种情况下，它的`93`.what 发生在这里？为什么在一种情况下发生加法，而在另一种情况下发生字符串连接？

```
var x = "1" + 2 + 4;
var z = 5 + 4 + "3";
console.log(x); // "124"
console.log(z); // 93 
```

谁能解释一下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T05:06:58.623

表达式从左到右计算。

```
"1"+2+3
 ^--^
"12" //string  +3
  ^_____________^
 "123"  //string 
```

在第二种情况下

```
 1+2+"3"
 ^_^
  3+"3"
  ^___^
  "33" // string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:05:28.343

考虑每次执行二进制操作时的操作顺序（rtl 或 ltr），它会相应地对其进行转换，因此 5+4 将是 int 并且 (5+4) + "3" 将是一个字符串，因为 "3" 是一个字符串

相同的方法适用于不同的示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:06:36.740

`var x = "1" + 2 + 4; // 124`

这是采用字符串“1”并将“2”和“4”作为字符串连接到它。

`var z = 5 + 4 + "3"; // 93`

这是将数字 4 和 5 相加得到数字 9，然后将字符串“3”连接到该数字以产生另一个字符串。

这里要带走的关键是您在这里所做的最终结果是字符串连接。计算数字的顺序不同，但最终结果是一个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T05:08:56.100

在第一种情况下，您首先创建一个字符串 (1)，然后 javascript 将以下数字连接为字符串 (124)。

在第二个中，您首先创建一个数字，然后 javascript 将第二个数字添加到第一个数字（5 + 4 = 9），然后添加一个字符串，以便将 9 和 3 连接起来

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T05:26:47.710

在这两种情况下都应用类型转换和从左到右的优先级。在第一个中，

```
var x = "1" + 2 + 4; // 124 
```

编译器将 1 作为字符串，之后它将与 2 连接，现在 12 是字符串，因此它将与 4 连接，结果将产生“124”作为字符串。

```
var z = 5 + 4 + "3"; // 93 
```

在第二个中，前 5 和 4 是数字，所以进行加法，结果将是 9。这将与字符串 3 连接，所以输出将是 93 作为字符串。

# c - c 分段错误 fgets

> ID：14700487
> 
> 赞同：1
> 
> 时间：2013-02-05T05:00:44.520
> 
> 标签：c, segmentation-fault, fgets

```
int main( int argc, char** argv) {

        FILE *inFilePtr = fopen(*(argv + 1), "r");
        char *rawdata = malloc(sizeof(char) * 100);
        float *ary = malloc(sizeof(float) * 50);
        int counter = 0;
        float averageAns;
        int count = 0;

        while (count < 1 ){
            //fgets(rawdata, 50, inFilePtr); //I have tried both
            fscanf(inFilePtr, "%s", rawdata);
            *(ary + counter) = atof(strtok(rawdata, ","));
             counter++;
            *(ary + counter ) = atof(strtok(rawdata, NULL));
            counter++;
            *(ary + counter) = atof(strtok(rawdata, NULL));
             counter++;
            count++;
        } 
```

我一生都无法弄清楚为什么我总是遇到段错误。即使没有循环，它也会出现段错误（计数 < 1 只是为了看看我是否可以通过一次）。

它不适用于 fgets()、fscanf()。当我将 fgets 中的流更改为 (stdin) 时，它会出现段错误，我提到这一点是因为我认为文件 * 是问题，但现在我认为不是。我已经在我的数据文件“”和“，”中设置了分隔符。

如果有人知道我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:09:20.807

您的调用`fscanf`肯定会失败，因为您没有提供输出参数。它应该看起来像：

```
fscanf(inFilePtr, "%s", rawdata); 
```

您的来电`strtok`也无效。要继续标记相同的字符串，第**一个**参数`strtok`应该是`NULL`; `strtok`期望第二个参数仍然是有效的字符串。

这些问题中的每一个都会自行导致段错误。为了简化您将来的调试，我建议您使用调试器并在您正在调试的语句之后设置断点，或者注释掉您可能希望出现段错误的其他行（如果您的代码通常包括对字符串执行任何操作的任何内容）处于脆弱状态。

另外，从风格上来说，

```
*(ary + counter) 
```

一般写成

```
ary[counter] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:30:24.150

尝试使用 (char *) 投射你的 malloc 调用

也许，只是也许：`ary[counter++] = atof(strtok(rawdata, ","));`

# css - CSS Div 被下推

> ID：14700493
> 
> 赞同：0
> 
> 时间：2013-02-05T05:01:02.977
> 
> 标签：css, wordpress, themes

几天来，我一直在为 WordPress 开发我的第一个子主题，并且除了一件事之外，几乎所有东西都按预期工作。

```
[http://stevefleming.co.uk/blog/][1] 
```

我已经在 Fire Fox 和 Chrome 中进行了测试，右侧的“小部件”div 被推到下面。它没有发生在其他页面上，是的，我确实自定义了页面。我看过一个工作的，然后是这个页面，看不到任何明显的区别。

希望有人能在我失去理智之前提供帮助。

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:02:50.087

只需将您`#sidebar`的`#main`放在标记中，以便它的浮动影响主要部分。

```
<div id="sidebar">
</div>
<!-- /#sidebar -->

<div id="main">
</div>
<!-- /#main --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:54:57.510

将“float：left”添加到您的 main 中，使其看起来像：

```
#main {
width: 620px;
float: left;
} 
```

# c - linux clone() 成功，但是子进程崩溃了

> ID：14700496
> 
> 赞同：1
> 
> 时间：2013-02-05T05:01:22.853
> 
> 标签：c, linux

```
#define _GNU_SOURCE
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <sched.h>
#include <sys/types.h>
#include <unistd.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <string.h>

#define STACK_SIZE 65536

int a = 0;
int readfd = -1;
int writefd = -1;
int pipe_fd[2];

int test2(void *data)
{
//    printf("it is working\n");
    int n = 1;
    int pos = 0;
    int log_fd = 1;
    char buf[512];
    char log_buf[1024];
    memset(buf,'\0',512);
    memset(log_buf,'\0',1024);

    a = 200;

    log_fd = open("./log.txt",O_RDWR|O_CREAT);
    if(log_fd < 0)
        exit(-1);

    sleep(5);
    if((n = read(readfd,buf,512) ) <= 0)
    {
        sprintf(log_buf,"read error\n");
        write(log_fd,log_buf,strlen(log_buf));
        exit(-1);
    }

    exit(0);
}

int main(int argc, char *argv[])
{
    int fd = -1;
    printf("in the main\n");
    void *stack=malloc(STACK_SIZE);
    a = 100;

    if(pipe(pipe_fd) < 0 )
        printf("in the main,call the pipe() failed\n");

    readfd = pipe_fd[0];
    writefd = pipe_fd[1];

    printf("In the main,First,current a value:%d\n",a );
    int Pid=clone(test2, stack+STACK_SIZE, CLONE_DETACHED|CLONE_FILES, NULL);

    printf("In the main,child PID:%d\n",Pid);
    if(Pid==-1)
    {
        printf("clone error\n");
        exit(1);
    }

    if( (fd = open("abc.txt",O_RDWR)) < 0)
        printf("in the main,open file ./abc.txt failed\n");
    int nbytes = -1;
    char send_string[1024];
    memset(send_string,'\0',1024);

    sprintf(send_string,"the file_fd is:%d",fd);
    if((nbytes = write(writefd,send_string,strlen(send_string))) < 0)
        printf("in the main,send fd failed\n");
    printf("in the main,send %d bytes,the content is----%s\n",nbytes,send_string);

    sleep(10);

    printf("In the main,Second,current a value:%d\n",a );
    printf("yea2");
    exit(0);
} 
```

问题：

1.  程序可以成功执行，
2.  但是当使用 gdb 跟踪子进程时，我们得到以下错误：

    ```
    (gdb) b test2 
    Breakpoint 1 at 0x4007d8: file thread.c, line 25.
    (gdb) r
    Starting program: /mnt/hgfs/D/xshell_transmit_folder/thread 
    in the main
    In the main,First,current a value:100
    In the main,child PID:5613
    [New LWP 5613]
    in the main,send 16 bytes,the content is----the file_fd is:9
    [Switching to LWP 5613]

    Breakpoint 1, test2 () at thread.c:25
    25      printf("it is working\n");
    Missing separate debuginfos, use: debuginfo-install glibc-2.12-1.80.el6.x86_64
    (gdb) s
    0x0000003d7d067fd0 in puts () from /lib64/libc.so.6
    (gdb) s
    Single stepping until exit from function puts,
    which has no line number information.

    Program received signal SIGSEGV, Segmentation fault.
    0x0000003d7d0805a1 in __strlen_sse2 () from /lib64/libc.so.6
    (gdb) 
    ```

3.  根据错误，子进程出现分段错误，因为子进程访问了一个有效地址。子进程没有正确创建吗？

4.  有人帮我吗？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:04:26.513

GDB 与您未使用的线程库集成。（`clone`不是吗）。如果要线程调试，请使用`pthread_create`. 该`clone`函数不是用于用户应用程序的 API，因此您需要自行处理。“靠你自己”的含义包括但不限于“没有工作调试器”。 `clone`是用于开发用户空间线程库的内核支持函数。

# android - Android Google Maps 获取边界坐标

> ID：14700498
> 
> 赞同：27
> 
> 时间：2013-02-05T05:01:26.500
> 
> 标签：android, google-maps-android-api-2, bounds

我在我的应用程序中使用 Google Maps v2。当用户在屏幕上平移或缩放时，我想获取地图的区域，我只想在屏幕视图部分获取 POI。
我浏览了文档，但找不到任何帮助。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-02-05T05:27:19.143

您需要使用[`Projection`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/Projection)和[`VisibleRegion`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/VisibleRegion)类才能获得可见的 LatLng 区域。
所以你的代码看起来像：

```
LatLngBounds curScreen = googleMap.getProjection()
    .getVisibleRegion().latLngBounds; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-28T10:32:34.247

在Android（Kotlin）中，您可以通过这种方式找到LatLng，每次缩放或。手势检测

```
private var mMap: GoogleMap? = null
..........

    mMap?.setOnCameraMoveStartedListener { reasonCode ->
        if (reasonCode == GoogleMap.OnCameraMoveStartedListener.REASON_GESTURE) {
            val curScreen: LatLngBounds =  mMap!!.getProjection().getVisibleRegion().latLngBounds
            var northeast=curScreen.northeast
            var southwest=curScreen.southwest
            var center=curScreen.center
            Log.v("northeast LatLng","-:"+northeast)
            Log.v("southwest LatLng","-:"+southwest)
            Log.v("center LatLng","-:"+center)
        }
    } 
```

# git - 如何修复 Git 零填充文件模式警告

> ID：14700502
> 
> 赞同：20
> 
> 时间：2013-02-05T05:01:38.823
> 
> 标签：git

我相信，我的[Git](http://en.wikipedia.org/wiki/Git_%28software%29)存储库状况不佳，其中当我执行

```
git fsck 
```

我在顶部收到以下警告。

```
103b5dd53f7a96f8e3a02aea0d3d4d9bb19644ed: contains zero-padded file modes
bb4729593e76f66b46292ad6ae61bfe909558337: contains zero-padded file modes
4709aa73691ce7da36dd22ccfd157c4514395330: contains zero-padded file modes 
```

我尝试了以下（由同事建议）来查找有问题的提交，以便我可以纠正它们。我尝试了以下方法。

1.  浏览所有来自`git rev-list HEAD`.
2.  对于这些提交中的每一个，执行 a`git ls-tree -rd`以查找所有相关对象[SHAs](http://en.wikipedia.org/wiki/SHA-1)。
3.  看看其中是否有与`git fsck`.

上面的逻辑对我来说似乎是正确的，但它无法找到有问题的提交。

```
git rev-list --all --remotes | while read commit; do git ls-tree -rd $commit | grep -E "103b5dd53f7a96f8e3a02aea0d3d4d9bb19644ed|bb4729593e76f66b46292ad6ae61bfe909558337|4709aa73691ce7da36dd22ccfd157c4514395330" && echo -e "HIT @ $commit\n\n"; done 
```

我们在这里缺少什么？我们如何才能找到有问题的提交或文件有问题？最后，我想修复存储库。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-12T18:16:28.720

从评论中添加解决方法作为答案：

使用重新构建存储库[`git fast-export`](http://www.kernel.org/pub/software/scm/git/docs/git-fast-export.html)，然后[`git fast-import`](http://www.kernel.org/pub/software/scm/git/docs/git-fast-import.html)解决问题，但 SHA 值会发生变化，并且不会带来树引用。

创建一个新的空存储库：

```
mkdir /newrepo
cd /newrepo
git init 
```

回到带有 fsck 警告的旧版本：

```
cd /oldrepo 
```

使用旧数据的快速导出将数据通过管道传输到新存储库中的快速导入

```
git fast-export --all | (cd /newrepo && git fast-import) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-12T04:45:34.917

只是对@9000 答案的补充：

在 中创建一个空的 git 存储库`../newrepo`，然后

```
git fast-export --signed-tags=strip --all | (cd ../newrepo/ && git fast-import) 
```

# javascript - require.js 可以自动确定baseURL吗？

> ID：14700516
> 
> 赞同：0
> 
> 时间：2013-02-05T05:03:04.787
> 
> 标签：javascript, requirejs

假设我在网址上：[http://example.com](http://example.com)。我用于加载 javascripts 的 baseURL 是“js”，这意味着 example.com/js/

[如果我只是在http://example.com](http://example.com)上提供“js”作为 baseURL ，我认为它会起作用。

但是，如果用户在 example.com/signup/process 或 example.com/projects/view/55 上，并且 baseUrl 仅作为“js”提供，则 require.js 将能够理解它指的是示例。 com/js 而不是 example.com/projects/view/55/js ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:12:34.550

你试过提供“/js”吗？

谢谢

# django - 如何在 django 中有两个独立的身份验证系统？

> ID：14700518
> 
> 赞同：1
> 
> 时间：2013-02-05T05:03:13.893
> 
> 标签：django, django-authentication

我需要有**两个**不同的登录/注册系统。

```
1: One for the general user.
2: Second for the Channels admin.

Both will have different email id, password etc in two different tables. 
For the general     user it will go in the `auth_user` table and for the channel 
it I'd be creating another different models/table. 
```

我知道 django 提供了一个完整的身份验证系统，可供**普通用户使用**。但是，如果同时使用频道管理员，我该如何实现呢？

我试图在 django 的文档中查找`AUTHENTICATION_BACKENDS`and `AUTH_USER_MODEL`，

**我不明白如何为频道管理部分设置会话。**

因此，如果有人能给我一个想法，如何以及有什么方法可以同时实现这两者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:05:04.857

您想查看[Django 中的自定义身份验证](https://docs.djangoproject.com/en/dev/topics/auth/customizing/)。您可以根据需要使用多种不同的身份验证方式。Session 记录中存储的部分信息是成功使用了哪个身份验证后端。它有点复杂，但它们为您提供了几乎任何您喜欢做的所有必要的控制。

几年前，我在一个系统上使用了它，其中*主要*用户/密码信息来自外部订阅管理服务器。如果用户/通行证在正常的用户身份验证系统上不起作用，我检查了另一个系统。如果成功，我会即时创建一个新用户。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-05T05:14:05.133

Django 也有一个完整的内置管理员登录界面。检查[https://docs.djangoproject.com/en/dev/ref/contrib/admin/](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)

# c# - 过滤数据表中的列？

> ID：14700520
> 
> 赞同：1
> 
> 时间：2013-02-05T05:03:16.347
> 
> 标签：c#, asp.net-mvc-4

我正在传递一个视图，`System.DataTable`并从中传递一个视图`html table`。列的可见性随每个`login`.

（即）考虑有 5 列，如`colA`、`colB`、`colC`、`colD`，`colE`并且这些列的可见性随每次登录而变化。有些登录只有`colA`，有些登录`colA`，`colD`有些拥有。

这是适用于上述要求的实现

`sql procedure`将返回所有这些列`bit`，每个列都有一个字段列，以在这样的视图中显示/隐藏该列。

`colA`, `isColA`, `colB`,`isColB`等等

过滤实际上是这里的星星**`controller`**

```
DataTable dt = "Method here that will generate datatable";
var cols = new string[] { "colA", "isColA", "colB", "isColB", "colC", "isColC" and so on };
var colsRemove = new List<string> { };

for(int i=0; i < cols.Length; i +=2)
{
     colsRemove.Add(dt.Columns[cols[i + 1]].ToString());
     if(!dt.Rows[0][cols[i + 1]].Equals(true))
     {
         colsRemove.Add(dt.Columns[cols[i]].ToString());
         colsRemove.Add(dt.Columns[cols[i + 1]].ToString());
     }
 }

 var newDt = new DataTable();
 newDt = dt.Clone();

 foreach(var item in colsRemove)
 {
     newDt.Columns.Remove(item);
 }

 foreach (DataRow row in dt.Rows)
 {
     newDt.ImportRow(row);
 } 
```

这很好用，这是我的实际问题，

1.  执行是否是标准做法？
2.  有没有其他最简单的方法来实现这个要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:56:55.777

我不知道这是否是标准做法，但我会改用 DynamicObject。这是一篇博文，为您提供有关 DynamicObect 的一些想法，关于 ExpandoObject 也值得一读。 [http://blogs.msdn.com/b/csharpfaq/archive/2009/10/19/dynamic-in-c-4-0-creating-wrappers-with-dynamicobject.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2009/10/19/dynamic-in-c-4-0-creating-wrappers-with-dynamicobject.aspx)

这是一个 LinqPad 片段

```
void Main()
{
    List<dynamic> flexibleList = new List<dynamic>();
    dynamic aa = new FlexibleTable();
    aa.ColumnA = "testA";
    aa.ColumnB="testB";
    flexibleList.Add(aa);
    aa = new FlexibleTable();
    aa.ColumnA = "testA1";
    aa.ColumnB="testB1";
    flexibleList.Add(aa);
    foreach(dynamic item in flexibleList){
      foreach(var columnName in item.VisibleColumns){

         new object[]{item[columnName]}.Dump();

      }
    }
}

// Define other methods and classes here
public class FlexibleTable: DynamicObject{
 private Dictionary<string,object> Columns{get; set;}
 public FlexibleTable(){
   this.Columns = new Dictionary<string,object>();
 }
  public  override bool TryGetMember(GetMemberBinder binder, out object result){
   if(Columns.ContainsKey(binder.Name)){
        result = Columns[binder.Name];
        return true;
   }else{
        result = null;
        return false;
        }
  }
  public  override bool TrySetMember(SetMemberBinder binder, object value){
    Columns[binder.Name] = value;
    return true;
  }

  public override bool TryGetIndex(
        GetIndexBinder binder, object[] indexes, out object result)
    {

        string index = (string)indexes[0];
        return Columns.TryGetValue(index , out result);
    }

  public IEnumerable<string> VisibleColumns{
     get{   return Columns.Select(x=>x.Key);}
  }

} 
```

# java - 将 web.xml 中的过滤器配置转换为 spring.xml

> ID：14700526
> 
> 赞同：1
> 
> 时间：2013-02-05T05:04:14.557
> 
> 标签：java, spring, servlets, servlet-filters

我创建了一个过滤器并在我的 web.xml 中进行了如下配置。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp" version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
        <display-name>Your Web App</display-name>
        <filter>
                <description>Test Filter</description>
                <display-name>Hello world filter</display-name>
                <filter-name>HelloWorldFilter</filter-name>
                <filter-class>com.abc.HelloWorld</filter-class> 
        <init-param>
                <param-name>greet</param-name>
                <param-value>Good Morning</param-value>
        </init-param>
        </filter>
        <filter-mapping>
                <filter-name>HelloWorldFilter</filter-name>
                <servlet-name>MyServlet</servlet-name>
                <dispatcher>REQUEST</dispatcher>
        </filter-mapping>
        <servlet>
                <servlet-name>NyServlet</servlet-name>
                <servlet-class>com.abc.myservlet</servlet-class>
                <load-on-startup>0</load-on-startup>
        </servlet>

        <servlet-mapping>
                <servlet-name>NyServlet</servlet-name>
                <url-pattern>/*</url-pattern>
        </servlet-mapping>
</web-app> 
```

现在我正在研究弹簧。我想将它包含在 Spring.xml 中。我没有任何 servlet，但我有一个普通的类作为 bean。

请建议如何在 spring.xml 中添加此信息

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T05:15:33.460

在你的 web.xml 中有这个

```
<filter>
    <display-name>HelloWorldFilter</display-name>
    <filter-name>MyServlet</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>MyServlet</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

并遵循 applicationContext.xml （或 Spring.xml 在你的情况下）

```
<bean id="helloWorldFilter" class="com.abc.HelloWorldFilter"> </bean> 
```

# solr - 400 错误请求：未知字段“类型”

> ID：14700535
> 
> 赞同：6
> 
> 时间：2013-02-05T05:05:29.670
> 
> 标签：solr, sunspot

我已经在 Tomcat 上设置了 Solr 3.6.2，如此[处](http://wiki.apache.org/solr/SolrTomcat)所述。

使用 sunspot-rails gem 和嵌入式 solr 服务器我没有问题，但是在我的登台服务器上我得到了响应：

> **消息**错误：[doc=Foo 20] 未知字段“类型”
> 
> **描述**客户端发送的请求在语法上不正确。

请求数据如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<add>
  <doc>
    <field name="id">Foo 20</field>
    <field name="type">Foo</field>
    <field name="type">ActiveRecord::Base</field>
    <field name="class_name">Foo</field>
    <field name="name">test</field>
  </doc>
</add> 
```

这是什么原因造成的？是否应该设置一些配置？（我期望`type`无论是否存在这样的列都允许使用名称的东西。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T05:43:05.347

事实证明， sunspot-solr gem`schema.xml`与捆绑的默认值略有不同`solr`。

我用 gem 使用的文件（从[这里](https://raw.github.com/sunspot/sunspot/master/sunspot_solr/solr/solr/conf/schema.xml)）替换了文件，现在它工作正常。 [这个答案](https://stackoverflow.com/a/7197139/684934)解释了`schema.xml`文件是什么。

# c# - C#图像裁剪调整大小删除

> ID：14700538
> 
> 赞同：1
> 
> 时间：2013-02-05T05:05:48.527
> 
> 标签：c#, multithreading, io

当我尝试使用删除图像时，`System.IO.File.Delete(....)`我得到错误异常。

`IOException was unhandled by user code`

`The process cannot access the file 'xxx\image\6132_15658422-b0a1-45a9-b0f9-7e9af783ad53_Temp.jpg' because it is being used by another process.`

谁能给我建议？

* * *

* * *

我的主要功能是通过 c# 裁剪、调整大小和删除图像。

```
 int X1 = 70, Y1 = 20, X2 = 201, Y2 = 236, w = 800, h = 600;
    string filelocation = "image/6132_15658422-b0a1-45a9-b0f9-7e9af783ad53_Temp.jpg";

    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            using (System.Drawing.Image _Image = cropImage(
                                                ResizeImage(
                                                        System.Drawing.Image.FromFile( Server.MapPath("~") +"/"+  filelocation), w, h),
                                                        (new System.Drawing.Rectangle(X1, Y1, X2, Y2))))
            {
                _Image.Save(Server.MapPath("~") + "/" + "image/output.jpg");

            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally {
            File.Delete(Server.MapPath("~") + "/" + filelocation);
        }
    } 
```

对于裁剪图像功能，

```
 public System.Drawing.Image cropImage(System.Drawing.Image image, Rectangle cropArea)
    {
        try
        {
            Bitmap bmpImage = new Bitmap(image);
            Bitmap bmpCrop = bmpImage.Clone(cropArea,
            bmpImage.PixelFormat);
            return (System.Drawing.Image)(bmpCrop);
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

对于调整图像大小功能，

```
 public System.Drawing.Image ResizeImage(System.Drawing.Image image, int maxWidth, int maxHeight)
    {
        try
        {
            var ratioX = (double)maxWidth / image.Width;
            var ratioY = (double)maxHeight / image.Height;
            var ratio = Math.Min(ratioX, ratioY);

            var newWidth = (int)(image.Width * ratio);
            var newHeight = (int)(image.Height * ratio);

            var newImage = new Bitmap(newWidth, newHeight);
            Graphics.FromImage(newImage).DrawImage(image, 0, 0, newWidth, newHeight);

            return newImage;
        }
        catch (Exception ex)
        {
            throw ex;
        }

    } 
```

[更新]

最后，我按照@landenedge 的建议纠正了我的问题，

```
 using (var mainImage = System.Drawing.Image.FromFile(Server.MapPath("~") +"/"+  filelocation)){
                using (System.Drawing.Image _Image = cropImage(
                                                    ResizeImage(mainImage, w, h),
                                                            (new System.Drawing.Rectangle(X1, Y1, X2, Y2))))
                {
                    _Image.Save(Server.MapPath("~") + "/" + "image/output.jpg");

                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:33:10.853

即使你已经匹配了所有的`Dispose()`陈述，你会发现你仍然有问题。 `Image.FromFile`在任何大容量网站中都是有问题的。解决方案是`Image.FromStream`改用。

```
 using (FileStream fs = new FileStream(filePath, FileMode.Open, FileAccess.Read))
   {
     using (Image original = Image.FromStream(fs))
     {
      ... 
```

Using an explicit `Dispose()`, a `using()` statement or setting the value to `null` **doesn't solve the issue** until a garbage collection happens. Forcing a garbage collection to happen is generally a bad idea.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:23:32.573

您需要处理使用`Image`创建的`FromFile()`. 尝试这样的事情：

```
using (var mainImage = Image.FromFile(Server.MapPath("~") +"/"+  filelocation), w, h))
using (var _Image = cropImage(ResizeImage(mainImage, new Rectangle(X1, Y1, X2, Y2))))
{
    _Image.Save(Server.MapPath("~") + "/" + "image/output.jpg");
} 
```

此外，不要重新抛出异常`throw ex;`- 这样做会重置堆栈跟踪并可能丢弃有价值的调试信息。相反，只需使用`throw;`.

# hadoop - 使用 map reduce 在 cassandra 中执行批量加载

> ID：14700543
> 
> 赞同：3
> 
> 时间：2013-02-05T05:06:29.907
> 
> 标签：hadoop, mapreduce, cassandra, bulk-load, datastax-enterprise

我没有太多使用 cassandra 的经验，所以如果我采取了错误的方法，请原谅。

我正在尝试使用 map reduce 在 cassandra 中进行批量加载

基本上是字数示例

参考：[http ://henning.kropponline.de/2012/11/15/using-cassandra-hadoopbulkoutputformat/](http://henning.kropponline.de/2012/11/15/using-cassandra-hadoopbulkoutputformat/)

我已经放置了简单的 Hadoop Wordcount Mapper 示例，并按照上面的示例稍微修改了驱动程序代码和减速器。

**我也成功生成了输出文件。现在我的疑问是如何执行加载到 cassandra 部分？我的方法有什么不同吗？**

请指教。

这是驱动程序代码的一部分

```
 Job job = new Job();
 job.setJobName(getClass().getName());
 job.setJarByClass(CassaWordCountJob.class);

 Configuration conf = job.getConfiguration();
 conf.set("cassandra.output.keyspace", "test");
 conf.set("cassandra.output.columnfamily", "words");
 conf.set("cassandra.output.partitioner.class", "org.apache.cassandra.dht.RandomPartitioner");
 conf.set("cassandra.output.thrift.port","9160");    // default
 conf.set("cassandra.output.thrift.address", "localhost");
 conf.set("mapreduce.output.bulkoutputformat.streamthrottlembits", "400");

 job.setMapperClass(CassaWordCountMapper.class);
 job.setMapOutputKeyClass(Text.class);
 job.setMapOutputValueClass(IntWritable.class);
 FileInputFormat.setInputPaths(job, new Path(args[0]));
 job.setReducerClass(CassaWordCountReducer.class);
 FileOutputFormat.setOutputPath(job, new Path("/home/user/Desktop/test/cassandra")); 
 MultipleOutputs.addNamedOutput(job, "reducer", BulkOutputFormat.class, ByteBuffer.class, List.class);
 return job.waitForCompletion(true) ? 0 : 1; 
```

Mapper 与普通的 wordcount 映射器相同，只是标记并发出 Word，1

减速器类的形式是

```
public class CassaWordCountReducer extends 
        Reducer<Text, IntWritable, ByteBuffer, List<Mutation>> {

    @Override
    public void reduce(Text key, Iterable<IntWritable> values, Context context)
            throws IOException, InterruptedException {
        List<Mutation> columnsToAdd = new ArrayList<Mutation>();
        Integer wordCount = 0;
        for(IntWritable value : values) {
            wordCount += value.get();
        }
        Column countCol = new Column(ByteBuffer.wrap("count".getBytes()));
        countCol.setValue(ByteBuffer.wrap(wordCount.toString().getBytes()));
        countCol.setTimestamp(new Date().getTime());
        ColumnOrSuperColumn wordCosc = new ColumnOrSuperColumn();
        wordCosc.setColumn(countCol);
        Mutation countMut = new Mutation();
        countMut.column_or_supercolumn = wordCosc;
        columnsToAdd.add(countMut);
        context.write(ByteBuffer.wrap(key.toString().getBytes()), columnsToAdd);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:15:27.020

要将批量加载到 Cassandra 中，我建议您查看[DataStax 中的这篇文章](http://www.datastax.com/dev/blog/bulk-loading)。基本上你需要为批量加载做两件事：

*   您的输出数据本身不适合 Cassandra，您需要将其转换为 SSTables。
*   拥有 SSTables 后，您需要能够将它们流式传输到 Cassandra。当然你不只是想把每个 SSTable 复制到每个节点，你只想把数据的相关部分复制到每个节点

在您使用 的情况下`BulkOutputFormat`，它应该`sstableloader`在幕后使用所有这些。我从来没有用过它`MultipleOutputs`，但它应该可以正常工作。

我认为你的情况的错误是你没有`MultipleOutputs`正确使用：你还在做 a `context.write`，当你真的应该写你的`MultipleOutputs`对象时。你现在这样做的方式，因为你正在写入常规`Context`，它将被默认输出格式`TextOutputFormat`而不是你在`MultipleOutputs`. 有关如何`MultipleOutputs`在减速器中使用的更多信息，请[点击此处](http://hadoop.apache.org/docs/mapreduce/r0.21.0/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)。

一旦你写入了`BulkOutputFormat`你定义的正确输出格式，你的 SSTables 应该被创建并从集群中的每个节点流式传输到 Cassandra——你不需要任何额外的步骤，输出格式会为你处理好。

另外，我建议您查看[这篇文章](http://shareitexploreit.blogspot.com/2012/03/bulkloadto-cassandra-with-hadoop.html)，他们还解释了如何使用`BulkOutputFormat`，但他们正在使用`ConfigHelper`您可能想要查看的，以便更轻松地配置您的 Cassandra 端点。

# iphone - JSON 雅虎财经图表数据 iOS 解析

> ID：14700554
> 
> 赞同：0
> 
> 时间：2013-02-05T05:07:38.610
> 
> 标签：iphone, ios, json, ipad, yahoo-finance

我目前正在尝试为纳斯达克、道琼斯和标准普尔 500 指数创建股票图表。我找不到任何 API（在合理定价范围内）来创建它，所以我一直在涉足 Yahoo Finance Chart API。它目前支持 JSON、CSV 和 XML。解析 XML 或 CSV 时性能不太理想，因此我想使用 JSON 响应，但遇到了问题。JSON 响应实际上并未返回有效的 JSON。有没有人对如何在 iOS 中解析这个有任何见解或有其他建议？

这是 JSON URL： [http ://chartapi.finance.yahoo.com/instrument/1.1/%5EIXIC/chartdata;type=close;range=1d/json/](http://chartapi.finance.yahoo.com/instrument/1.1/%5EIXIC/chartdata;type=close;range=1d/json/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:14:49.373

更新：

事实上，响应也是畸形的。我尝试了使用不同股票代码的 URL，看起来该字段`"`的输出中有一个杂散标记。`previous_close`如果您删除杂散`"`标记，它应该正确验证。

```
"meta" :
 {
  "uri" :"/instrument/1.1/ITW/chartdata;type=close;range=1d/json/?callback=",
  "ticker" : "itw",
  "unit" : "MIN",
  "timezone" : "EST",
  "currency" : "USD",
  "gmtoffset" : -18000,
  "previous_close" : 62.9000"
 } 
```

~

原来的：

返回的响应采用 JSONP 格式。

```
finance_charts_json_callback( {
...
} ) 
```

即兴发挥，您应该能够`finance_charts_json_callback(`从开头和结尾剥离，`)`并最终得到有效的 JSON 数据。

[JSONP@维基百科](http://en.wikipedia.org/wiki/JSONP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:16:11.337

如果您使用的是 iOS 5 或更高版本，您可以为此使用[**NSJSONSerialization**](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)。

```
NSData *data = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
id json = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil]; 
```

**但问题是如果 JSON 无效，则无法使用 NSJSONSerialization 解析它**

我已成功将其更改为有效的 JSON，例如：

```
{
    "finance_charts_json_callback": {
        "meta": {
            "uri": "/instrument/1.1/^IXIC/chartdata;type=close;range=1d/json/",
            "ticker": "^ixic",
            "unit": "MIN",
            "timezone": "EST",
            "currency": "USD",
            "gmtoffset": -18000,
            "previous_close": "3179.1001"
        },
        "Timestamp": {
            "min": 1359988200,
            "max": 1360011600
        },
        "labels": [
            1359990000,
            1359993600,
            1359997200,
            1360000800,
            1360004400,
            1360008000,
            1360011600
        ],
        "ranges": {
            "close": {
                "min": 3131.04,
                "max": 3168.8701
            }
        },
        "series": [
            {
                "Timestamp": 1359988218,
                "close": 3160.5601
            },
            {
                "Timestamp": 1359997260,
                "close": 3139.6799
            },
            {
                "Timestamp": 1359997320,
                "close": 3139.55
            },
            {
                "Timestamp": 1359997380,
                "close": 3140.3501
            },
            {
                "Timestamp": 1359997440,
                "close": 3140.0601
            },
            {
                "Timestamp": 1359997500,
                "close": 3140.0601
            },
            {
                "Timestamp": 1359997560,
                "close": 3140.1599
            },
            {
                "Timestamp": 1359997620,
                "close": 3139.1799
            },
            {
                "Timestamp": 1359997680,
                "close": 3137.1899
            },
            {
                "Timestamp": 1359997740,
                "close": 3135.71
            },
            {
                "Timestamp": 1359997800,
                "close": 3136.54
            },
            {
                "Timestamp": 1359997860,
                "close": 3136.78
            },
            {
                "Timestamp": 1359997920,
                "close": 3137.74
            },
            {
                "Timestamp": 1359997980,
                "close": 3139.3301
            },
            {
                "Timestamp": 1359998040,
                "close": 3139.2
            },
            {
                "Timestamp": 1359998100,
                "close": 3139.0701
            },
            {
                "Timestamp": 1359998160,
                "close": 3139.04
            },
            {
                "Timestamp": 1359998220,
                "close": 3139.54
            },
            {
                "Timestamp": 1359998280,
                "close": 3139.8301
            },
            {
                "Timestamp": 1359998340,
                "close": 3139.51
            },
            {
                "Timestamp": 1359998400,
                "close": 3139.8
            },
            {
                "Timestamp": 1359998460,
                "close": 3139.97
            },
            {
                "Timestamp": 1359998520,
                "close": 3138.78
            },
            {
                "Timestamp": 1359998580,
                "close": 3138.1699
            },
            {
                "Timestamp": 1359998640,
                "close": 3138.75
            },
            {
                "Timestamp": 1359998700,
                "close": 3139.78
            },
            {
                "Timestamp": 1359998760,
                "close": 3140.4299
            },
            {
                "Timestamp": 1359998820,
                "close": 3141.01
            },
            {
                "Timestamp": 1359998880,
                "close": 3141.2
            },
            {
                "Timestamp": 1359998999,
                "close": 3141.0701
            },
            {
                "Timestamp": 1359999000,
                "close": 3141.47
            },
            {
                "Timestamp": 1359999060,
                "close": 3141.79
            },
            {
                "Timestamp": 1359999120,
                "close": 3141.8201
            },
            {
                "Timestamp": 1359999180,
                "close": 3141.8701
            },
            {
                "Timestamp": 1359999240,
                "close": 3141.72
            },
            {
                "Timestamp": 1359999300,
                "close": 3141.04
            },
            {
                "Timestamp": 1359999360,
                "close": 3142.0801
            },
            {
                "Timestamp": 1359999420,
                "close": 3141.9099
            },
            {
                "Timestamp": 1359999480,
                "close": 3142.4199
            },
            {
                "Timestamp": 1359999540,
                "close": 3142.97
            },
            {
                "Timestamp": 1359999600,
                "close": 3142.6899
            },
            {
                "Timestamp": 1359999660,
                "close": 3143.3899
            },
            {
                "Timestamp": 1359999720,
                "close": 3143.1599
            },
            {
                "Timestamp": 1359999780,
                "close": 3143.45
            },
            {
                "Timestamp": 1359999840,
                "close": 3143.26
            },
            {
                "Timestamp": 1359999900,
                "close": 3143.1699
            },
            {
                "Timestamp": 1359999960,
                "close": 3142.4099
            },
            {
                "Timestamp": 1360000020,
                "close": 3142.1799
            },
            {
                "Timestamp": 1360000080,
                "close": 3142
            },
            {
                "Timestamp": 1360000140,
                "close": 3142.28
            },
            {
                "Timestamp": 1360000200,
                "close": 3142.22
            },
            {
                "Timestamp": 1360000260,
                "close": 3141.75
            },
            {
                "Timestamp": 1360000320,
                "close": 3140.8101
            },
            {
                "Timestamp": 1360000380,
                "close": 3140.4399
            },
            {
                "Timestamp": 1360000440,
                "close": 3140.2
            },
            {
                "Timestamp": 1360000500,
                "close": 3140.3201
            },
            {
                "Timestamp": 1360000560,
                "close": 3140.1899
            },
            {
                "Timestamp": 1360000620,
                "close": 3140.4199
            },
            {
                "Timestamp": 1360000680,
                "close": 3140.21
            },
            {
                "Timestamp": 1360000740,
                "close": 3140.48
            },
            {
                "Timestamp": 1360000800,
                "close": 3140.1001
            },
            {
                "Timestamp": 1360000860,
                "close": 3140.3501
            },
            {
                "Timestamp": 1360000920,
                "close": 3140.6101
            },
            {
                "Timestamp": 1360000980,
                "close": 3140.24
            },
            {
                "Timestamp": 1360001040,
                "close": 3141.0601
            },
            {
                "Timestamp": 1360001100,
                "close": 3141.27
            },
            {
                "Timestamp": 1360001160,
                "close": 3141.5701
            },
            {
                "Timestamp": 1360001220,
                "close": 3141.6001
            },
            {
                "Timestamp": 1360001280,
                "close": 3142.8601
            },
            {
                "Timestamp": 1360001340,
                "close": 3142.8401
            },
            {
                "Timestamp": 1360001400,
                "close": 3142.6399
            },
            {
                "Timestamp": 1360001460,
                "close": 3142.8701
            },
            {
                "Timestamp": 1360001520,
                "close": 3143.1001
            },
            {
                "Timestamp": 1360001580,
                "close": 3142.8501
            },
            {
                "Timestamp": 1360001640,
                "close": 3142.8
            },
            {
                "Timestamp": 1360001700,
                "close": 3142.5901
            },
            {
                "Timestamp": 1360001760,
                "close": 3140.8501
            },
            {
                "Timestamp": 1360001820,
                "close": 3140.5
            },
            {
                "Timestamp": 1360001880,
                "close": 3140.77
            },
            {
                "Timestamp": 1360001940,
                "close": 3141.8201
            },
            {
                "Timestamp": 1360002000,
                "close": 3141.71
            },
            {
                "Timestamp": 1360002060,
                "close": 3141.9399
            },
            {
                "Timestamp": 1360002120,
                "close": 3142.49
            },
            {
                "Timestamp": 1360002180,
                "close": 3142.1399
            },
            {
                "Timestamp": 1360002240,
                "close": 3142.6499
            },
            {
                "Timestamp": 1360002300,
                "close": 3142.3999
            },
            {
                "Timestamp": 1360002360,
                "close": 3141.72
            },
            {
                "Timestamp": 1360002420,
                "close": 3141.77
            },
            {
                "Timestamp": 1360002480,
                "close": 3141.1799
            },
            {
                "Timestamp": 1360002540,
                "close": 3139.8301
            },
            {
                "Timestamp": 1360002600,
                "close": 3139.8501
            },
            {
                "Timestamp": 1360002660,
                "close": 3138.25
            },
            {
                "Timestamp": 1360002720,
                "close": 3138.74
            },
            {
                "Timestamp": 1360002780,
                "close": 3138.3799
            },
            {
                "Timestamp": 1360002840,
                "close": 3138.2
            },
            {
                "Timestamp": 1360002900,
                "close": 3138.24
            },
            {
                "Timestamp": 1360002960,
                "close": 3138.99
            },
            {
                "Timestamp": 1360003020,
                "close": 3138.8401
            },
            {
                "Timestamp": 1360003080,
                "close": 3138.5801
            },
            {
                "Timestamp": 1360003140,
                "close": 3138.3301
            },
            {
                "Timestamp": 1360003200,
                "close": 3139.0801
            },
            {
                "Timestamp": 1360003260,
                "close": 3139.25
            },
            {
                "Timestamp": 1360003320,
                "close": 3139.05
            },
            {
                "Timestamp": 1360003380,
                "close": 3139.03
            },
            {
                "Timestamp": 1360003440,
                "close": 3138.99
            },
            {
                "Timestamp": 1360003500,
                "close": 3137.99
            },
            {
                "Timestamp": 1360003560,
                "close": 3137.3601
            },
            {
                "Timestamp": 1360003679,
                "close": 3135.8799
            },
            {
                "Timestamp": 1360003680,
                "close": 3136
            },
            {
                "Timestamp": 1360003740,
                "close": 3136.49
            },
            {
                "Timestamp": 1360003800,
                "close": 3136.52
            },
            {
                "Timestamp": 1360003860,
                "close": 3135.3899
            },
            {
                "Timestamp": 1360003920,
                "close": 3135.77
            },
            {
                "Timestamp": 1360003980,
                "close": 3135.8501
            },
            {
                "Timestamp": 1360004040,
                "close": 3136.47
            },
            {
                "Timestamp": 1360004100,
                "close": 3136.4299
            },
            {
                "Timestamp": 1360004160,
                "close": 3137.46
            },
            {
                "Timestamp": 1360004220,
                "close": 3137.7
            },
            {
                "Timestamp": 1360004280,
                "close": 3137.55
            },
            {
                "Timestamp": 1360004340,
                "close": 3137.6599
            },
            {
                "Timestamp": 1360004400,
                "close": 3136.26
            },
            {
                "Timestamp": 1360004460,
                "close": 3136.6101
            },
            {
                "Timestamp": 1360004520,
                "close": 3137.02
            },
            {
                "Timestamp": 1360004580,
                "close": 3137.54
            },
            {
                "Timestamp": 1360004640,
                "close": 3138.21
            },
            {
                "Timestamp": 1360004700,
                "close": 3137.9199
            },
            {
                "Timestamp": 1360004760,
                "close": 3137.9299
            },
            {
                "Timestamp": 1360004820,
                "close": 3138.3201
            },
            {
                "Timestamp": 1360004880,
                "close": 3138.3201
            },
            {
                "Timestamp": 1360004940,
                "close": 3137.5801
            },
            {
                "Timestamp": 1360005000,
                "close": 3138.0701
            },
            {
                "Timestamp": 1360005060,
                "close": 3138.3301
            },
            {
                "Timestamp": 1360005120,
                "close": 3138.3701
            },
            {
                "Timestamp": 1360005180,
                "close": 3138.26
            },
            {
                "Timestamp": 1360005240,
                "close": 3138.23
            },
            {
                "Timestamp": 1360005300,
                "close": 3138.5
            },
            {
                "Timestamp": 1360005360,
                "close": 3139.23
            },
            {
                "Timestamp": 1360005420,
                "close": 3139.1899
            },
            {
                "Timestamp": 1360005480,
                "close": 3138.75
            },
            {
                "Timestamp": 1360005540,
                "close": 3137.6799
            },
            {
                "Timestamp": 1360005600,
                "close": 3139.03
            },
            {
                "Timestamp": 1360005660,
                "close": 3138.46
            },
            {
                "Timestamp": 1360005720,
                "close": 3138.05
            },
            {
                "Timestamp": 1360005780,
                "close": 3137.96
            },
            {
                "Timestamp": 1360005840,
                "close": 3138.1101
            },
            {
                "Timestamp": 1360005900,
                "close": 3136.8701
            },
            {
                "Timestamp": 1360005960,
                "close": 3136.71
            },
            {
                "Timestamp": 1360006020,
                "close": 3136.73
            },
            {
                "Timestamp": 1360006080,
                "close": 3138.22
            },
            {
                "Timestamp": 1360006140,
                "close": 3139.8501
            },
            {
                "Timestamp": 1360006200,
                "close": 3140.49
            },
            {
                "Timestamp": 1360006260,
                "close": 3140.8201
            },
            {
                "Timestamp": 1360006320,
                "close": 3139.8401
            },
            {
                "Timestamp": 1360006380,
                "close": 3140.28
            },
            {
                "Timestamp": 1360006440,
                "close": 3139.73
            },
            {
                "Timestamp": 1360006500,
                "close": 3139.3
            },
            {
                "Timestamp": 1360006560,
                "close": 3140.1599
            },
            {
                "Timestamp": 1360006620,
                "close": 3139.6299
            },
            {
                "Timestamp": 1360006680,
                "close": 3140.0901
            },
            {
                "Timestamp": 1360006740,
                "close": 3140.24
            },
            {
                "Timestamp": 1360006800,
                "close": 3140.3101
            },
            {
                "Timestamp": 1360006860,
                "close": 3140.8401
            },
            {
                "Timestamp": 1360006920,
                "close": 3140.95
            },
            {
                "Timestamp": 1360006980,
                "close": 3140.8799
            },
            {
                "Timestamp": 1360007040,
                "close": 3142.1101
            },
            {
                "Timestamp": 1360007100,
                "close": 3142.1399
            },
            {
                "Timestamp": 1360007160,
                "close": 3141.8301
            },
            {
                "Timestamp": 1360007220,
                "close": 3141.0701
            },
            {
                "Timestamp": 1360007280,
                "close": 3140.99
            },
            {
                "Timestamp": 1360007340,
                "close": 3140.79
            },
            {
                "Timestamp": 1360007400,
                "close": 3141.1499
            },
            {
                "Timestamp": 1360007460,
                "close": 3140.76
            },
            {
                "Timestamp": 1360007520,
                "close": 3139.6499
            },
            {
                "Timestamp": 1360007580,
                "close": 3140.0701
            },
            {
                "Timestamp": 1360007640,
                "close": 3140.51
            },
            {
                "Timestamp": 1360007700,
                "close": 3140.98
            },
            {
                "Timestamp": 1360007760,
                "close": 3141.3601
            },
            {
                "Timestamp": 1360007820,
                "close": 3142.46
            },
            {
                "Timestamp": 1360007880,
                "close": 3143.3899
            },
            {
                "Timestamp": 1360007940,
                "close": 3143.24
            },
            {
                "Timestamp": 1360008000,
                "close": 3142.01
            },
            {
                "Timestamp": 1360008060,
                "close": 3142.02
            },
            {
                "Timestamp": 1360008120,
                "close": 3141.0701
            },
            {
                "Timestamp": 1360008180,
                "close": 3141.25
            },
            {
                "Timestamp": 1360008240,
                "close": 3141.3999
            },
            {
                "Timestamp": 1360008300,
                "close": 3141.3799
            },
            {
                "Timestamp": 1360008360,
                "close": 3141.74
            },
            {
                "Timestamp": 1360008420,
                "close": 3141.96
            },
            {
                "Timestamp": 1360008480,
                "close": 3141.3201
            },
            {
                "Timestamp": 1360008540,
                "close": 3140.79
            },
            {
                "Timestamp": 1360008600,
                "close": 3140.8201
            },
            {
                "Timestamp": 1360008660,
                "close": 3140.73
            },
            {
                "Timestamp": 1360008720,
                "close": 3139.6299
            },
            {
                "Timestamp": 1360008780,
                "close": 3139.54
            },
            {
                "Timestamp": 1360008840,
                "close": 3140.29
            },
            {
                "Timestamp": 1360008900,
                "close": 3140.3899
            },
            {
                "Timestamp": 1360008960,
                "close": 3140
            },
            {
                "Timestamp": 1360009020,
                "close": 3140.04
            },
            {
                "Timestamp": 1360009080,
                "close": 3139.8101
            },
            {
                "Timestamp": 1360009140,
                "close": 3140.1799
            },
            {
                "Timestamp": 1360009200,
                "close": 3139.9099
            },
            {
                "Timestamp": 1360009260,
                "close": 3139.8899
            },
            {
                "Timestamp": 1360009320,
                "close": 3140.22
            },
            {
                "Timestamp": 1360009380,
                "close": 3140.1899
            },
            {
                "Timestamp": 1360009440,
                "close": 3138.8501
            },
            {
                "Timestamp": 1360009500,
                "close": 3140.3301
            },
            {
                "Timestamp": 1360009560,
                "close": 3141.0901
            },
            {
                "Timestamp": 1360009679,
                "close": 3141.97
            },
            {
                "Timestamp": 1360009680,
                "close": 3141.7
            },
            {
                "Timestamp": 1360009740,
                "close": 3141.73
            },
            {
                "Timestamp": 1360009800,
                "close": 3140.1399
            },
            {
                "Timestamp": 1360009860,
                "close": 3139.6499
            },
            {
                "Timestamp": 1360009920,
                "close": 3138.95
            },
            {
                "Timestamp": 1360009980,
                "close": 3138.49
            },
            {
                "Timestamp": 1360010040,
                "close": 3138.1001
            },
            {
                "Timestamp": 1360011600,
                "close": 3131.5
            }
        ]
    }
} 
```

**[您需要通过使用NSString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)**类提供的各种函数替换无效字符来执行相同操作，并使用[jsonlint 工具](http://jsonlint.com/)检查它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-24T03:46:04.630

您需要按如下方式执行 javascript eval：

```
window.finance_charts_json_callback(data) { return data; }
let json_resp = eval(resp); 
```

在 ios 中，您可以创建 javascript 解释器并对其进行评估。

# c# - 根据目标高度计算组合框字体大小

> ID：14700560
> 
> 赞同：1
> 
> 时间：2013-02-05T05:08:17.580
> 
> 标签：c#, .net, combobox

我们需要根据另一个控件的高度来调整组合框的高度。我们发现可以通过更改其字体大小来调整组合框的高度。

如果我知道组合框的目标高度，如何计算组合框的字体大小？

# data-structures - 找到哪个区域包含一个点的好数据结构是什么？

> ID：14700561
> 
> 赞同：1
> 
> 时间：2013-02-05T05:08:29.047
> 
> 标签：data-structures, binary-tree, point, region, quadtree

我正在寻找一种支持查找“n”个区域中的哪个包含点“p”的数据结构。我正在查看 Quadtree 和 R-tree，但我认为它们并不完全符合我的要求。

本质上，我希望能够向这棵树添加一些 3 维矩形区域，然后能够针对这棵树测试一个 3 维点并返回哪个区域最严格地约束该点。没有区域会有重叠的边界。

我目前使用的简单算法是针对每个矩形区域的每个维度简单地测试点“p”。

```
for(region in regionList):
    if(p.x > region.x1 && p.x < region.x2 && p.y > region.y1 && py < region.y2 && p.z > region.z1 && p.z < region.z2)
        return region
end 
```

这在 O(n) 时间内运行，其中 n 是区域数。我希望搜索将 O(log n) 作为四叉树用于查找 2d 点的点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:56:31.840

查看[Segment Trees](http://en.wikipedia.org/wiki/Segment_tree)和[KD Trees](https://stackoverflow.com/questions/3136960/querying-a-collection-of-rectangles-for-the-overlap-of-an-input-rectangle)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:12:06.993

我建议使用 QuadTree 来存储像 MX-CIF 树这样的区域。它本质上是一个基于二维 (x,y) 的四叉树。一旦找到包含 (x,y) 方面的点的适当节点，您可以检查它是否包含所有三个 (x,y,z) 维度中的点。

我在 Java 中做过[类似的事情](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/QuadTree.java)。

您还可以查看八叉树，它是一个 3 维四叉树。

# java - Java-WS：是否可以将原始 XML 用于一个参数而仍然使用 JAXB 对象作为其余参数？

> ID：14700562
> 
> 赞同：-1
> 
> 时间：2013-02-05T05:08:33.487
> 
> 标签：java, web-services, jaxb, jax-ws

我正在编写一个将在 WebSphere 上运行的 Java Web 服务客户端。我在 RAD Developer 中创建了一个新的“Web Service Client”项目，给它我的 WSDL，指定“Top down Java Bean”，然后它自动生成了一堆文件。

其中一项操作是“GetAddressData”。RAD 开发人员自动生成“GetAddressData.java”和“GetAddressDataResonse.java”，两者都使用“XmlRootElement”进行注释。

“GetAddressData”中的参数之一是“RequestData”，这是一个由四个字符串组成的简单对象：worfklow、module、username 和 id。RAD Developer 也为我生成了一个“RequestData.java”。

问：有什么方法可以用原始 XML 替换 JAXB“RequestData”对象，而不是一次打包和解包记录一个字段？

我试过这样的事情：

```
private static String theXml =   
    "<requestOptions>\n" +  
    "  <WorkflowName>unmarshalTestWorkflow</WorkflowName>\n" +  
    "  <ModuleName>unmarshalTestModule</ModuleName>\n" +  
    "  <UserName>unmarshalTestName</UserName>\n" +  
    "  <TransactionId>0099</TransactionId>\n" +  
    "</requestOptions>\n";  

private RequestOptions mkRequestOptions () throws Exception {  
    JAXBContext context = JAXBContext.newInstance(RequestOptions.class);  
    Unmarshaller unmarshaller = context.createUnmarshaller();  
    Object obj = unmarshaller.unmarshal(new StringReader (theXml));  
    RequestOptions requestOptions = (RequestOptions)obj;
    ... 
```

但我不断得到：

```
error: Unexpected element "requestOptions". Expected elements are "". 
```

任何帮助将不胜感激！先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T03:41:35.420

你需要做两件事。

1.  xmlns 在您的根目录中：`<requestOptions xmlns=\"http://www.company.com/ns\">`. 这可以追溯到您的 XSD。
2.  因为听起来 RequestData 不是 @XmlRootElement 你将不得不解组它包装在一个 JAXBElement

此处图解：

```
public class Test
{
  static String randomXml =
      "<divisionRequestHeader xmlns=\"http://www.company.com/ns/\">"
        + "<id>fake id</id>"
        + "<CoName>My Co Name</CoName>" + "<User>"
        + "<Type>EXTERNAL</Type>" + "<Value>me</Value>" + "</User>"
        + "<Count>100</Count>"
        + "<Requestor>My App Requesting</Requestor>"
        + "</divisionRequestHeader>";

  public static void main(String[] args) throws Exception
  {
    JAXBContext context = JAXBContext.newInstance(DivisionRequestHeader.class);
    Unmarshaller unmarshaller = context.createUnmarshaller();
    Source source = new StreamSource(new StringReader(randomXml));

    JAXBElement<DivisionRequestHeader> jaxbElement = unmarshaller.unmarshal(source,
            DivisionRequestHeader.class);
    DivisionRequestHeader header = jaxbElement.getValue();

    System.out.println(header.toString());
  }
} 
```

使用 jaxb toString 插件输出：

```
com.company.ns.DivisionRequestHeader@620c620c[id=fake id, coName=My Co Name,
    user=com.company.ns.User@79e479e4[type=EXTERNAL, value=me], count=100,
    requestor=My App Requesting] 
```

# javascript - 在 和 之间放置 Google Analytics 标记是否安全？

> ID：14700564
> 
> 赞同：0
> 
> 时间：2013-02-05T05:08:50.513
> 
> 标签：javascript, google-analytics

> **可能重复：**
> [将 <script> 标签放在 </body> 标签之后是错误的吗？](https://stackoverflow.com/questions/3037725/is-it-wrong-to-place-the-script-tag-after-the-body-tag)

我的公司对网站有奇怪的代码限制，不允许我们在`<head>`or`<body>`标记处添加脚本，所以他们只允许我在两个部分之外添加 Google Analytics，就在`</html>`标记之前。

我可以信任此实现提供的 GA 数据吗？感觉不“对”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:21:44.070

将脚本（或任何东西）放在外部`<body/>`将按原样显示。来自 W3c 建议

> SCRIPT 元素将脚本放置在文档中。这个元素可以在 HTML 文档的 HEAD 或 BODY 中出现任意次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:38:01.143

我已经看到它被渲染为脚本并且也看到它正在运行。不确定在针对所有浏览器操作系统或设备组合时这样做是否安全，但对于 chrome 和 firefox，他们确实将其视为脚本。

# css - 使我的主题/站点最大宽度为 960 而不是当前的 1170

> ID：14700567
> 
> 赞同：0
> 
> 时间：2013-02-05T05:09:11.323
> 
> 标签：css

嗨，我有一个使用名为 celistino 的 wordpress tempalte 构建的网站，只是想问一下，无论我们使用的计算机/显示器的分辨率如何，我将如何实现我的网站最大宽度为 960。当前主题是[http://demo.yithemes.com/celestino/](http://demo.yithemes.com/celestino/)，它是在最大宽度引导程序 1170 网格上制作的，我想将其设为 960 最大宽度。

看起来它支持 1170px 响应式布局，我们需要实现它只有 960 而不是标准的 1170。期待任何回应提前谢谢

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:13:30.220

您必须在 bootstrap-responsive.css 中自定义 css3 媒体查询。它会正常工作。像下面的代码：

```
@media (min-width: 1200px) {

  .container,
  .navbar-static-top .container,
  .navbar-fixed-top .container,
  .navbar-fixed-bottom .container {
    width: 960px;
  }
} 
```

# javascript - Node.js Sequelize ManyToMany 关系产生不正确的 SQL

> ID：14700570
> 
> 赞同：3
> 
> 时间：2013-02-05T05:09:16.610
> 
> 标签：javascript, mysql, node.js, sequelize.js

我在处理多对多关系时遇到问题。

这是我的模型...

```
var db = {

    players: sequelize.define('players', {
        name: Sequelize.STRING
    }),

    teams: sequelize.define('teams', {
        name: Sequelize.STRING
    }),   

    init: function() {

        this.players.hasMany(this.teams, {joinTableName: 'teams_has_players'});
        this.teams.hasMany(this.players, {joinTableName: 'teams_has_players'});

        this.players.sync();
        this.teams.sync();

    }

}; 
```

这是发现

```
db.players.findAll({
    where:      {team_id: 1},
    include:    ['teams']
}).success(function(results) {
    // print the results
}); 
```

上面的 find 将产生以下 SQL：

```
SELECT 
    players . *,
    teams.name AS `teams.name`,
    teams.id AS `teams.id`
FROM
    players
        LEFT OUTER JOIN
    teams_has_players ON teams_has_players.player_id = players.id
        LEFT OUTER JOIN
    teams ON teams.id = teams_has_players.team_id
WHERE
    players.team_id = '1'; 
```

这似乎有问题的是 WHERE 语句应该是`WHERE teams.team_id = '1'`

我哪里错了？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:06:11.893

嗯，实际上一切看起来都还不错。`db.players.findAll`with`where: { team_id: 1 }`应该用`WHERE players.team_id = '1'`. 这是完全可以预料的。此外，你`teams`不会有一个`team_id`，而是一个`id`。但是，很有可能`include`是 atm 坏了。

# scala - Scala：如何遍历流/迭代器将结果收集到几个不同的集合中

> ID：14700574
> 
> 赞同：2
> 
> 时间：2013-02-05T05:10:00.640
> 
> 标签：scala, iterator, traversal, scala-collections, collect

我正在查看太大而无法放入内存的日志文件并收集 2 种类型的表达式，下面的迭代片段有什么更好的功能替代方案？

```
def streamData(file: File, errorPat: Regex, loginPat: Regex): List[(String, String)]={
  val lines : Iterator[String] = io.Source.fromFile(file).getLines()

  val logins: mutable.Map[String, String] = new mutable.HashMap[String, String]()
  val errors: mutable.ListBuffer[(String, String)] = mutable.ListBuffer.empty

  for (line <- lines){
    line match {
      case errorPat(date,ip)=> errors.append((ip,date))
      case loginPat(date,user,ip,id) =>logins.put(ip, id)
      case _ => ""
    }
  }

  errors.toList.map(line => (logins.getOrElse(line._1,"none") + " " + line._1,line._2))
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:23:00.810

这是一个可能的解决方案：

```
def streamData(file: File, errorPat: Regex, loginPat: Regex): List[(String,String)] = {
  val lines = Source.fromFile(file).getLines
  val (err, log) = lines.collect {
        case errorPat(inf, ip) => (Some((ip, inf)), None)
        case loginPat(_, _, ip, id) => (None, Some((ip, id)))
      }.toList.unzip
  val ip2id = log.flatten.toMap
  err.collect{ case Some((ip,inf)) => (ip2id.getOrElse(ip,"none") + "" + ip, inf) }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:18:27.403

更正：
1）删除了不必要的类型声明
2）元组解构而不是 ulgy `._1`
3）左折叠而不是可变累加器
4）使用更方便的类似运算符的方法`:+`和`+`

```
def streamData(file: File, errorPat: Regex, loginPat: Regex): List[(String, String)] = {
    val lines = io.Source.fromFile(file).getLines()

    val (logins, errors) =
        ((Map.empty[String, String], Seq.empty[(String, String)]) /: lines) {
            case ((loginsAcc, errorsAcc), next) =>
                next match {
                    case errorPat(date, ip) => (loginsAcc, errorsAcc :+ (ip -> date))
                    case loginPat(date, user, ip, id) => (loginsAcc + (ip -> id) , errorsAcc)
                    case _ => (loginsAcc, errorsAcc)
                }
        }

// more concise equivalent for
// errors.toList.map { case (ip, date) => (logins.getOrElse(ip, "none") + " " + ip) -> date }
    for ((ip, date) <- errors.toList) 
    yield (logins.getOrElse(ip, "none") + " " + ip) -> date

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T19:50:44.090

我有几个建议：

*   与其使用一对/元组，不如使用您自己的类。它为类型及其字段提供了有意义的名称，这使代码更具可读性。
*   将代码分成小部分。特别是，尝试解耦不需要捆绑在一起的代码片段。这使您的代码更易于理解、更健壮、更不容易出错并且更易于测试。在您的情况下，最好将生成输入（日志文件的行）和使用它以产生结果分开。例如，您可以为您的函数进行自动测试，而无需将样本数据存储在文件中。

作为示例和练习，我尝试基于 Scalaz iteratees 制定解决方案。它有点长（包括一些用于 的辅助代码`IteratorEnumerator`），也许对于这项任务来说有点矫枉过正，但也许有人会觉得它很有帮助。

```
import java.io._;
import scala.util.matching.Regex
import scalaz._
import scalaz.IterV._

object MyApp extends App {
  // A type for the result. Having names keeps things
  // clearer and shorter.
  type LogResult = List[(String,String)]

  // Represents a state of our computation. Not only it
  // gives a name to the data, we can also put here
  // functions that modify the state.  This nicely
  // separates what we're computing and how.
  sealed case class State(
    logins: Map[String,String],
    errors: Seq[(String,String)]
  ) {
    def this() = {
      this(Map.empty[String,String], Seq.empty[(String,String)])
    }

    def addError(date: String, ip: String): State =
      State(logins, errors :+ (ip -> date));
    def addLogin(ip: String, id: String): State =
      State(logins + (ip -> id), errors);

    // Produce the final result from accumulated data.
    def result: LogResult =
      for ((ip, date) <- errors.toList)
        yield (logins.getOrElse(ip, "none") + " " + ip) -> date
  }

  // An iteratee that consumes lines of our input. Based
  // on the given regular expressions, it produces an
  // iteratee that parses the input and uses State to
  // compute the result.
  def logIteratee(errorPat: Regex, loginPat: Regex):
            IterV[String,List[(String,String)]] = {
    // Consumes a signle line.
    def consume(line: String, state: State): State =
      line match {
        case errorPat(date, ip)           => state.addError(date, ip);
        case loginPat(date, user, ip, id) => state.addLogin(ip, id);
        case _                            => state
      }

    // The core of the iteratee. Every time we consume a
    // line, we update our state. When done, compute the
    // final result.
    def step(state: State)(s: Input[String]): IterV[String, LogResult] =
      s(el    = line => Cont(step(consume(line, state))),
        empty = Cont(step(state)),
        eof   = Done(state.result, EOF[String]))
    // Return the iterate waiting for its first input.
    Cont(step(new State()));
  }

  // Converts an iterator into an enumerator. This
  // should be more likely moved to Scalaz.
  // Adapted from scalaz.ExampleIteratee
  implicit val IteratorEnumerator = new Enumerator[Iterator] {
    @annotation.tailrec def apply[E, A](e: Iterator[E], i: IterV[E, A]): IterV[E, A] = {
      val next: Option[(Iterator[E], IterV[E, A])] =
        if (e.hasNext) {
          val x = e.next();
          i.fold(done = (_, _) => None, cont = k => Some((e, k(El(x)))))
        } else
          None;
       next match {
         case None => i
         case Some((es, is)) => apply(es, is)
       }
    }
  }

  // main ---------------------------------------------------
  {
    // Read a file as an iterator of lines:
    // val lines: Iterator[String] =
    //    io.Source.fromFile("test.log").getLines();

    // Create our testing iterator:
    val lines: Iterator[String] = Seq(
      "Error: 2012/03 1.2.3.4",
      "Login: 2012/03 user 1.2.3.4 Joe",
      "Error: 2012/03 1.2.3.5",
      "Error: 2012/04 1.2.3.4"
    ).iterator;

    // Create an iteratee.
    val iter = logIteratee("Error: (\\S+) (\\S+)".r, 
                           "Login: (\\S+) (\\S+) (\\S+) (\\S+)".r);
    // Run the the iteratee against the input
    // (the enumerator is implicit)
    println(iter(lines).run);
  }
} 
```

# javascript - 在 dd.MM.yyyy 中格式化日期

> ID：14700575
> 
> 赞同：4
> 
> 时间：2013-02-05T05:10:00.710
> 
> 标签：javascript

> **可能重复：**
> [Javascript 迄今添加前导零](https://stackoverflow.com/questions/3605214/javascript-add-leading-zeroes-to-date)

这可能是一个简单的问题，因为我还是JavaScript 的*新手*，假设我有 ISO 格式的 DateTime：

```
 2012-07-07T17:00:00 
```

我想将此日期格式化为字符串：

```
 07.07.2012 
```

我编写了一个函数来格式化为 7.7.2012，如下所示：

```
var formatDate = function (datum) {
    var date = new Date(datum);
    return date.getDate() + '.' + (date.getMonth() + 1) + '.' + date.getFullYear();
}; 
```

如何修改此代码以获得结果`07.07.2012`而不是`7.7.2012`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T05:21:14.087

这可能会有所帮助。

```
<script type="text/javascript">

    var date=new Date();
    day=date.getDate();
    month=date.getMonth();
    month=month+1;
    if((String(day)).length==1)
    day='0'+day;
    if((String(month)).length==1)
    month='0'+month;

    dateT=day+ '.' + month + '.' + date.getFullYear();
    //dateT=String(dateT);
    alert(dateT);
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T05:27:15.997

你也可以看看这个

[Moment.js](http://momentjs.com/)

它是我发现的最好的，它还有许多其他有用的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T05:20:21.577

使用这个方便的脚本。该链接提供说明

[http://blog.stevenlevithan.com/archives/date-time-format](http://blog.stevenlevithan.com/archives/date-time-format)

# java - 在 libgdx 中绘制透明的 ShapeRenderer

> ID：14700577
> 
> 赞同：44
> 
> 时间：2013-02-05T05:10:17.823
> 
> 标签：java, android, libgdx

我使用 ShapeRenderer 绘制了一个实心圆，现在我想将此圆绘制为透明圆。我正在使用以下代码来做到这一点：但圆圈并不透明。另外，我检查了 libgdx API 和 wiki，它说需要创建 CameraStrategy。以前有人遇到过类似的问题吗？如果是这样，请给我一些线索。提前致谢。

```
 Gdx.gl.glEnable(GL10.GL_BLEND);
      Gdx.gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
      drawFilledCircle();
      Gdx.gl.glDisable(GL10.GL_BLEND);

private void drawFilledCircle(){

   shapeRenderer.setProjectionMatrix(camera.combined);
   shapeRenderer.begin(ShapeType.FilledCircle);
   shapeRenderer.setColor(new Color(0, 1, 0, 1));
   shapeRenderer.filledCircle(470, 45, 10);
   shapeRenderer.end();

} 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-02-06T04:28:14.623

在这种情况下，以下代码对我有用，也许它会帮助其他人：

```
Gdx.gl.glEnable(GL10.GL_BLEND);
Gdx.gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
shapeRenderer.setProjectionMatrix(camera.combined);
shapeRenderer.begin(ShapeType.FilledCircle);
shapeRenderer.setColor(new Color(0, 1, 0, 0.5f));
shapeRenderer.filledCircle(470, 45, 10);
shapeRenderer.end();
Gdx.gl.glDisable(GL10.GL_BLEND); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-06T02:44:09.213

首先我们需要启用混合：

```
Gdx.gl.glEnable(GL10.GL_BLEND); 
```

并确保您不在该行代码和您的代码行之间调用`SpriteBatch.begin()`和。我不知道为什么，但这就是我的情况`SpriteBatch.end()``Shaperender.drawSomething()`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-11-21T09:49:46.163

**只有**这对我有用：

```
Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT | GL20.GL_DEPTH_BUFFER_BIT);
//Gdx.gl.glEnable(GL20.GL_BLEND);
Gdx.gl.glBlendFunc(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);   // <<< this line here makes the magic we're after
game.shapeRenderer.setProjectionMatrix(camera.combined);
game.shapeRenderer.begin(ShapeType.Filled);
    go.drawShapes();
game.shapeRenderer.end();
//Gdx.gl.glDisable(GL20.GL_BLEND); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-05T09:01:40.517

好吧，绘制完全透明的东西并没有什么意义。如果您确实想制作一个半透明的圆圈，则必须`glClearColor`在每帧之前清除颜色缓冲区并将`Color`alpha 分量设置为`0.5f`.

*如果您不清除缓冲区，则在几次渲染绘制之后，圆圈将混合成一个几乎是纯色的圆圈。*

```
private void drawFilledCircle(Camera camera){
    Gdx.gl.glClearColor(0, 0, 0, 0); 
    Gdx.gl.glClear( GL10.GL_COLOR_BUFFER_BIT  );

    shapeRenderer.setProjectionMatrix(camera.combined);
    shapeRenderer.begin(ShapeType.FilledCircle);
    shapeRenderer.setColor(new Color(0, 1, 0, 0.5f)); // last argument is alpha channel
    shapeRenderer.filledCircle(470, 45, 10);
    shapeRenderer.end();
} 
```

# dynamics-crm-2011 - Microsoft Dynamics CRM 2011 更改实体字段数据类型的最佳解决方案

> ID：14700578
> 
> 赞同：3
> 
> 时间：2013-02-05T05:10:21.003
> 
> 标签：dynamics-crm-2011, dynamics-crm

我在 Dynamics CRM 2011 On Premise 部署中更改字段的数据类型时遇到问题。在我的托管解决方案中，将其命名为“解决方案 1”，我在联系人实体中有一个自定义字段：编号 (int) 类型的“new_usernumber”。我想根据新客户的要求将其更改为字符串（对于他们想要为其添加前缀的新用户）。我可以卸载解决方案并部署新的“固定”托管解决方案，但这需要我删除自定义字段上的值。有没有更好的解决方案？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:54:11.517

没有简单的方法可以做到这一点。如果您尚未使用托管解决方案在实例中部署数据，我建议您删除它并导入更正的托管解决方案文件。

没有任何支持或不支持的过程来更改字段的数据类型（或逻辑名称）而不会丢失数据。您需要做的是添加新字段，然后编写一个快速更新实用程序将数据从旧字段复制到新字段。

[这是一篇](http://blogs.msdn.com/b/devkeydet/archive/2012/05/29/deleting-things-from-a-deployed-crm-2011-managed-solution-package.aspx)关于如何在托管解决方案中删除字段的精彩文章。请注意，如果您尝试保留数据，则需要在“导入 devkeydetDeleteExample_1_1_HOLDING.zip”步骤之后运行更新

玩得开心……这很痛苦，但肯定是可行的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T22:23:37.703

几个月前，我在解决方案中重新创建了字段（从*double*到*int*）。那是一个**巨大**的错误。我仍然不确定哪里出了问题，但他们**确实**出了问题。我不仅失去了约会。我设法在元层中引入了错误，所以我们的 MVP 不得不坐下来帮助我让它再次运行。他不高兴。我不高兴。客户不高兴（今天的前客户，主要是因为这个）。

所以，我的谦虚建议——不要那样做。而是声明一个新字段。如果您有*usernumber*，请保留它，但开始使用*userNumberString*（或*userString*、*userName*等）。我的猜测是这样你的头发会更长。

如果你成功了，请告诉我。:)

# bash - BASH将字符串转换为布尔变量

> ID：14700579
> 
> 赞同：3
> 
> 时间：2013-02-05T05:10:29.087
> 
> 标签：bash, shell

将文字字符串（例如“True”转换为适当的 bash 布尔变量）的最佳方法是什么。例如 java 有 java.lang.Boolean.valueOf(String)

现在我在 Bash 中使用它：

```
if [ "${answers[2]}" = "TRUE" ] ; then
    clean=true; 
else 
    clean=false; 
fi 
```

有没有办法做到这一点并避免 IF 声明？

编辑：澄清它不是通过选择我有包含“TRUE”的字符串变量而不是仅仅使用布尔变量。对于完整的上下文，这是代码

```
ans=$(yad --title='YadExample' --form --field=Opt1:CHK FALSE  --field=Opt2:CHK FALSE --field=Opt3:CHK TRUE);
#at this point the "yad" program is returning a string seperated by '|', e.g "TRUE|FALSE|TRUE"
IFS="|"
set -- $ans
answers=( $@ )
unset IFS
if [ "${answers[0]}" = "TRUE" ] ; then clean=true; else clean=false; fi
if [ "${answers[1]}" = "TRUE" ] ; then var2=true; else var2=false; fi
if [ "${answers[2]}" = "TRUE" ] ; then var3=true; else var3=false; fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:27:50.160

您可以编写一个函数来为您进行转换：

```
function boolean() {
  case $1 in
    TRUE) echo true ;;
    FALSE) echo false ;;
    *) echo "Err: Unknown boolean value \"$1\"" 1>&2; exit 1 ;;
   esac
}

answers=(TRUE FALSE TRUE)
clean="$(boolean "${answers[0]}")"
var2="$(boolean "${answers[1]}")"
var3="$(boolean "${answers[2]}")"

echo $clean $var2 $var3 
```

印刷

```
true false true 
```

* * *

或者，更花哨的：

```
function setBoolean() {
  local v
  if (( $# != 2 )); then
     echo "Err: setBoolean usage" 1>&2; exit 1 ;
  fi

  case "$2" in
    TRUE) v=true ;;
    FALSE) v=false ;;
    *) echo "Err: Unknown boolean value \"$2\"" 1>&2; exit 1 ;;
   esac

   eval $1=$v
}

answers=(TRUE FALSE TRUE)

setBoolean clean "${answers[0]}"
setBoolean var2 "${answers[1]}"
setBoolean var3 "${answers[2]}"

echo $clean $var2 $var3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T05:17:41.540

你可以使用类似的东西：

```
[ "${answers[2]}" != "TRUE" ] ; clean=$? 
```

如果要`clean`在条件为真时设置为 1，则需要反转比较的意义。

然后您的序列变为：

```
[ "${answers[0]}" != "TRUE" ] ; clean=$?
[ "${answers[1]}" != "TRUE" ] ; var2=$?
[ "${answers[2]}" != "TRUE" ] ; var3=$? 
```

# mongodb - MongoDB ODM - 按 MAX 分组（group_id）

> ID：14700584
> 
> 赞同：2
> 
> 时间：2013-02-05T05:10:46.013
> 
> 标签：mongodb, symfony, doctrine-odm

言归正传，我目前正在使用 Doctrine MongoDB ODM 和 Symfony2 将数据持久化到 MongoDB 中。

目前我将我的结果分组`type`，但我也想将它们分组`MAX(group_id)`。

当然，我可以只更改 reduce 函数，但我试图避开大型返回数组和查询完成后的更多处理，所以我想知道是否有比这个特定问题更优雅的解决方案。

监测文件，

```
/**
 * @ODM\Document(collection="monitoring")
 */

class Monitoring
{

    /** @ODM\Id */
    public $id;

    /** @ODM\String */
    public $type;

    /** @ODM\String */
    public $message;

    /** @ODM\Int */
    public $groupId;

    .... getters and setter etc ....

} 
```

MonitoringManager 函数获取所有项目，

```
public function getAllMonitoringItems(){

    return $this->dm->createQueryBuilder('MonitoringBundle:Monitoring')
                ->group(array(), array('groups' => array()))
                ->reduce('function (obj, prev) { 
                            var type = obj.type;
                            if(!prev.groups.hasOwnProperty(type)){
                                prev["groups"][type] = [];
                                prev["groups"][type].push(obj);
                            } else {
                                prev["groups"][type].push(obj);
                            }

                        }')
                ->field('type')->notIn(array("graph"))
                ->getQuery()
                ->execute()
                ->toArray();

} 
```

# html - 即使在元标记中声明 UTF-8 后，在使用马拉地语时也显示空白框而不是空格

> ID：14700585
> 
> 赞同：0
> 
> 时间：2013-02-05T05:10:59.290
> 
> 标签：html, css

![在此处输入图像描述](../Images/6a5aabb36207ada8a3b3eb3a2ebc6423.png)

在默认缩放级别，即 100% 时，有时我会遇到空白框而不是空格的问题，但是当我更改缩放级别时，它看起来很正常。有人请告诉我为什么会这样？

我在马拉地语中的所有休息代码都工作正常。我使用 unicode 来显示马拉地语，并且为此包含元标记，那么为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:00:41.120

我想问题出在基本字体设置上。所以，尝试使用这个：

```
<div style="font-family: 'Arial Unicode MS';">तुम्हारा नाम क्या है?</div> 
```

# c++ - 使用 xcodebuild 构建时查看失败

> ID：14700588
> 
> 赞同：0
> 
> 时间：2013-02-05T05:11:25.687
> 
> 标签：c++, xcode, llvm, clang, xcodebuild

我们正在使用 构建多个目标`xcodebuild`，但是从命令行中，我们得到的只是失败，如下所示：

```
The following build commands failed:
    CompileC MOAIFmodExChannel.o ../../src/moaiext-fmod-ex/MOAIFmodExChannel.cpp normal i386 c++ com.apple.compilers.llvm.clang.1_0.compiler
(1 failure) 
```

如果我们在 Xcode 中运行构建，它会告诉我构建失败的原因。我们如何从命令行查看它？是否有一个日志文件会被转储，或者我们可以提供某种标志`xcodebuild`来启用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:07:00.540

# javascript - 如何在 InfoVis/JIT 强制有向图中隐藏和恢复自定义节点？

> ID：14700589
> 
> 赞同：0
> 
> 时间：2013-02-05T05:11:46.153
> 
> 标签：javascript, graph, html5-canvas, infovis, thejit

我正在尝试使用 InfoVis / JIT 来呈现可视化网络的力导向图。我是 java 脚本和 JIT 的新手。我在我的 js 文件中使用以下代码创建了我自己的自定义节点类型，这让我可以在节点上显示我的图像。

```
$jit.ForceDirected.Plot.NodeTypes.implement({
    'icon1': { 
         'render': function(node, canvas){ 
                    var ctx = canvas.getCtx(); 
                    var img = new Image(); 
                    img.src='magnify.png'; 
                    var pos = node.pos.getc(true); 
                    img.onload = function() { 
                            ctx.drawImage(img, pos.x, pos.y); 
                    }; 

            }, 
            'contains': function(node,pos){ 
                    var npos = node.pos.getc(true); 
                    dim = node.getData('dim'); 
                    return this.nodeHelper.circle.contains(npos, pos, dim);
                    //return this.nodeHelper.square.contains(npos, pos, dim); 
            } 
     } 
```

我在 json 数据对象中使用 "$type": "icon1" 将此自定义节点类型分配给节点。我确实在节点上获得了图像，但问题是我无法在需要时隐藏它。我可以使用以下代码隐藏内置节点类型，如圆形、方形等。

```
 node.setData('alpha', 0);
 node.eachAdjacency(function(adj) {
     adj.setData('alpha', 0);
 });
 fd.fx.animate({
     modes: ['node-property:alpha',
          'edge-property:alpha'],
     duration: 2000
 }); 
```

但是相同的代码不适用于自定义节点。因此，我尝试将节点类型临时更改为内置的“圆形”类型，将其隐​​藏，然后将节点类型重新设置为其原始类型，即我的自定义节点 icon1。

```
function hideNode( ){
  var typeOfNode = node.getData('type');
  node.setData( 'type','circle');
  node.setData('alpha', 0);
  node.eachAdjacency(function(adj) {
       adj.setData('alpha', 0);
  }); 
   fd.fx.animate({
          modes: ['node-property:alpha',
                  'edge-property:alpha'],
          duration: 2000
   });

   node.setData('type',typeOfNode );    
 } 
```

我认为这应该可行，但自定义图像会在一段时间后在画布上返回。如果我没有将节点的类型重置为其原始类型，即在上面的代码中并注释掉以下语句并调用隐藏函数，那么该节点将被隐藏。

```
 node.setData('type',typeOfNode ); 
```

我无法弄清楚如何仅通过将节点的类型设置为某种自定义类型来呈现节点。对此问题的任何帮助将不胜感激。

我需要将节点的类型重新设置为其原始类型，因为我希望在需要时通过调用取消隐藏函数来恢复节点。如果我不将节点的类型重置为原始类型，那么在恢复时它将呈现为一个圆圈。

我已经浏览了 JIT 的 API 和 google 组，但找不到答案。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T04:26:23.523

下面是 Plot 的[plotNode](https://github.com/philogb/jit/blob/master/Source/Graph/Graph.Plot.js#L637)函数的一个片段：

```
var alpha = node.getData('alpha'),
    ctx = canvas.getCtx();
ctx.save();
ctx.globalAlpha = alpha;

// snip

this.nodeTypes[f].render.call(this, node, canvas, animating);
ctx.restore(); 
```

如您所见，节点的 alpha 值在调用节点的渲染函数之前立即应用于画布。渲染节点后，画布恢复到之前的状态。

这里的问题是您的自定义节点的`render`函数不会同步呈现节点，并且画布状态在调用`drawImage`. 因此，您可以执行以下两项操作之一：

**1）**预加载和缓存您的图像（首选方法，因为这也将防止图像闪烁并有助于提高性能）：

```
// preload image
var magnifyImg = new Image();
magnifyImg.src = 'magnify.png';

// 'icon1' node render function:
'render': function(node, canvas){ 
    var ctx = canvas.getCtx(); 
    var pos = node.pos.getc(true); 
    ctx.drawImage(magnifyImg, pos.x, pos.y); 
} 
```

或**2)**保存画布状态，重新应用 alpha，然后在`onload`处理程序中绘制图像后恢复画布状态：

```
// 'icon1' node render function:
'render': function(node, canvas){ 
    var ctx = canvas.getCtx(); 
    var img = new Image(); 
    img.src='magnify.png'; 
    var pos = node.pos.getc(true); 
    img.onload = function() {
        ctx.save(); // save current canvas state
        ctx.globalAlpha = node.getData('alpha'); // apply node alpha
        ctx.drawImage(img, pos.x, pos.y); // draw image
        ctx.restore(); // revert to previous canvas state
    };
} 
```

# iphone - 方角 UISegmentedControl

> ID：14700599
> 
> 赞同：3
> 
> 时间：2013-02-05T05:13:02.357
> 
> 标签：iphone, ios5, uisegmentedcontrol

有什么解决方案可以`UIsegmentedControl`通过编程来解决 Square 角的问题吗？请帮忙！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-26T17:00:38.483

您可以为将完全覆盖边框的段设置背景图像。如果背景图像是方形的，那么您的分段控件将显示为方形。对要自定义的每个段状态使用以下代码。

`[segmentedControl setBackgroundImage:[UIImage imageNamed:@"square-background-image-selected"] forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T20:28:18.570

使用这个开源控件。它会很好地为你工作。[`https://github.com/oettam/MCSegmentedControl`](https://github.com/oettam/MCSegmentedControl)

# javascript - 在客户端读取asp.net控件

> ID：14700600
> 
> 赞同：0
> 
> 时间：2013-02-05T05:13:03.030
> 
> 标签：javascript, asp.net, c#-4.0

我正在使用下面的 javascript 来读取客户端中 asp.net 控件的值。但是，它总是返回空值。我在我网站的其他页面上使用了类似的代码，但现在我无法阅读这个特定的控件。请建议无论如何我可以解决这个问题。

```
<asp:Label ID="srch_data" runat="server" ClientIDMode="Static" ></asp:Label>

var srch_data = document.getElementById("<%= srch_data.ClientID %>");
alert(srch_data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:50:06.333

将 defer 属性添加到您的脚本元素。我测试了它并且有效。试试下面的东西 -

```
<%--defer indicates the script to be run after the document is completely parsed.--%>
<script type="text/javascript" language="javascript" defer="true">
        var label = document.getElementById("<%= srch_data.ClientID %>");
        alert("label : " + label);
</script>
<asp:Label ID="srch_data" runat="server" ClientIDMode="Static"></asp:Label> 
```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:38:59.513

尝试这个

```
var srch_data =document.getElementById('srch_data').innerHTML; 
```

ASP.Net 标签在渲染后变成跨度，所以与其找到一个 JS 无法识别的标签，不如找到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:21:11.093

尝试使用单引号：

```
var srch_data = document.getElementById('<%= srch_data.ClientID %>').value; 
```

# python - 是否可以从 wxPython 中的 GridSizeEvent 获取新的列大小？

> ID：14700602
> 
> 赞同：2
> 
> 时间：2013-02-05T05:13:20.277
> 
> 标签：python, wxpython, wxwidgets, wxgrid

当 a`wx.grid.Grid`的列调整大小时，[`wx.grid.GridSizeEvent`](http://www.wxpython.org/docs/api/wx.grid.GridSizeEvent-class.html)会发出 a 。从文档和`dir(event)`输出来看，这似乎是所有 wxPython 中最无用的类。它显然没有告诉您*任何*有关调整列大小的相关信息：调整了哪一列的大小、之前的大小以及现在的大小。

我想我可以维护一个`{<column_index>: <column_size>}`成对的字典，然后从每个调整大小事件中手动导出相关数据，但我认为我错过了一些东西，这不是必需的，所以：

**`GridSizeEvent`是否可以在不手动跟踪所有列大小的情况下找出从 a 调整大小的列？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:55:03.280

这个类确实有`GetRowOrCol()`访问器。至于新尺寸，我认为您需要使用`GetPosition() - actual-width-or-height`，但我对此不是 100% 确定。

# c# - 使用 WPF 将应用程序最小化到系统托盘（不使用 NotifyIcon）

> ID：14700606
> 
> 赞同：26
> 
> 时间：2013-02-05T05:13:31.377
> 
> 标签：c#, wpf, windows, wpf-controls, notifyicon

我已经完成了我的应用程序，现在我想为它合并“最小化到系统托盘功能”。我读了一篇好文章 [将应用程序最小化到系统托盘](https://stackoverflow.com/questions/7625421/minimize-app-to-system-tray)。我意识到这些利用了 Windows.Form 类。

不幸的是，我使用 Windows Presentation Foundation [WPF 参考](http://msdn.microsoft.com/en-us/library/aa970268.aspx)来制作我的应用程序 UI。现在我看到 WPF 不支持 NotifyIcon。我看到 CodePlex 上有一个开源库，它模拟 NotifyIcon 属性[WPF Contrib](http://wpfcontrib.codeplex.com/wikipage?title=NotifyIcon&referringTitle=Home&ProjectName=wpfcontrib)我还没有使用它。

现在我正在修复中。这是我的问题：-

a) 我不想仅仅为一个组件合并一个 3'rd 方库。

b) 我可以在 WPF 上没有 NotifyIcon 的情况下执行最小化功能吗？如果是，那么有人怎么能给我线索？

或者也许我应该将我的 UI 恢复为使用 Windows 窗体？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-05T05:24:42.770

如果您重新考虑不愿意使用外部组件，我推荐 WPF [NotifyIcon](http://www.hardcodet.net/projects/wpf-notifyicon)。我用过。这很简单，而且效果很好。

它不仅仅依赖于相应的 WinForms 组件，而是一个纯粹的独立控件，它利用 WPF 框架的多个功能来显示丰富的工具提示、弹出窗口、上下文菜单和气球消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-27T15:14:35.013

我今天才看到这个帖子。

作为参考，我也解决了这个问题。它工作得很好，我唯一遇到的问题是偶尔在一些多显示器设置上。

这是在 GIT 和 NuGet 出现之前，如果有兴趣，我会将它放在 GIT 存储库中。

[CodeProject 文章在这里](http://www.codeproject.com/Articles/36788/WPF-XAML-NotifyIcon-and-Taskbar-System-Tray-Popup)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-01-04T07:57:08.893

**使用 System.Windows.Forms.NotifyIcon 的解决方案**

这是一个线程，对我帮助很大。

[https://stackoverflow.com/a/12428063/10305444](https://stackoverflow.com/a/12428063/10305444)

```
public partial class Window : System.Windows.Window{

public Window()
{
    InitializeComponent();

    System.Windows.Forms.NotifyIcon ni = new System.Windows.Forms.NotifyIcon();
    ni.Icon = new System.Drawing.Icon("Main.ico");
    ni.Visible = true;
    ni.DoubleClick += 
        delegate(object sender, EventArgs args)
        {
            this.Show();
            this.WindowState = WindowState.Normal;
        };
}

protected override void OnStateChanged(EventArgs e)
{
    if (WindowState == WindowState.Minimized)
        this.Hide();

    base.OnStateChanged(e);
}} 
```

# oracle - 如何在vb6中检查组合的listindex？

> ID：14700607
> 
> 赞同：0
> 
> 时间：2013-02-05T05:13:35.510
> 
> 标签：oracle, vb6

我在这里加载组合框的值，但我不想将`ListIndex`属性设置为 -1。

```
Private Sub Form_Load()
    OPENCON
    RES.Open "DIVISION", CON, adOpenDynamic, adLockOptimistic, adCmdTable
    If RES.RecordCount > 0 Then
        RES.MoveFirst
        For i = 0 To RES.RecordCount - 1
            CmbDiv.AddItem RES.Fields("DIV").Value
            CmbDiv.ItemData(CmbDiv.NewIndex) = RES.Fields("DIVID").Value
            RES.MoveNext
        Next
    End If
    RES.Open "HNM", CON, adOpenDynamic, adLockOptimistic, adCmdTable
    If RES.RecordCount > 0 Then
        RES.MoveFirst
        For i = 0 To RES.RecordCount - 1
            CmbHouse.AddItem Trim(RES.Fields("HOUSE").Value)
            CmbHouse.ItemData(CmbHouse.NewIndex) = RES.Fields("HID").Value
            RES.MoveNext
        Next
    End If
End Sub 
```

这是我用来修改记录的代码。

```
Private Sub CmdSave_Click()
    sql = "UPDATE STUDENT_RECORD_DATABASE SET "
    sql = sql + "ROLLNO= " & Val(CmbRNO) & ","
    sql = sql + "DIVID='" & Val(CmbDiv.ItemData(CmbDiv.ListIndex)) & "',"
    sql = sql + "HID=" & Val(CmbHouse.ItemData(CmbHouse.ListIndex)) & " "
    sql = sql + "WHERE ROLLNO= " & Val(CmbRNO) & ""
    Set RES = CON.Execute(sql)
End Sub 
```

在运行代码时，如果我同时修改了部门和房屋，那么没关系，但是当我让它们中的任何一个值（不修改值）时，它会在第 3 行和第 4 行显示错误`CmdSave_Click`：

> 无效的属性数组值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:25:53.690

将数据加载到组合框后，将 listindex 设置为 0

```
Combo1.ListIndex = 0 
```

最好检查 listindex 是否为 -1，如果为 -1，则不要执行此操作，或警告用户他应该从组合框中选择某些内容

# php - 包括在 AJAX 导航后不工作

> ID：14700609
> 
> 赞同：1
> 
> 时间：2013-02-05T05:13:45.900
> 
> 标签：php, jquery, include

这就是我的困境。我的网站主页上有几个包含，它们在初始加载时工作。但是，如果您离开主页然后返回，则包含已损坏。你可以[在这里看到它](http://www.sheekssoftwaresolutions.com/testing/)。涉及以下代码。

包括在主页上：

```
<? include("packages/blog/s3blog.class.php"); ?>
<? include("packages/core/s3core.class.php"); ?>
<? include("packages/core/s3data.class.php"); ?> 
```

索引结构上的主页位置：

```
<div class="row" id="content">  
    <?
    if($_SESSION['auth'] == 1) {
            include("packages/Blog/manage.php");
    }
    elseif(isset($_GET['page'])) {
        include("pages/".$_GET['page'].".php");
    }
    else {
        include("pages/home.php");
    }
    ?>
    <div class="row-end"></div>
</div> 
```

用于在导航单击时加载页面的脚本：

```
$(document).ready(function () {
    $('a.js-ajax').click( function( event ) {
        set_ajax_link( $(this), event );
    });
});
function set_ajax_link( el, event ){
    event.preventDefault();
    var url = el.attr("href");
    load_page_content( url );
}
function load_page_content( url ){
    $("#content").load( url, { 'ajax': 'true' }, function(){
        $('#content a.js-ajax').click( function( event ) {
            set_ajax_link( $(this), event );
        });
    });
} 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:04:07.857

在测试中创建 pages.php

```
<?php
set_include_path(get_include_path() . PATH_SEPARATOR . dirname(__FILE__));
$page=basename($_SERVER['REQUEST_URL'],'php');
include('pages/'.$page.".php"); 
```

在测试目录中的 .htaccess 中（在 apache 的情况下）

```
RewriteCond %{REQUEST_URI} ^testing/pages/ [NC]
RewriteRule .* pages.php [L] 
```

没有经过测试，但我希望你明白这一点。

# javascript - 我们如何像下面的代码一样添加类

> ID：14700611
> 
> 赞同：-5
> 
> 时间：2013-02-05T05:13:58.597
> 
> 标签：javascript, jquery, html

我们如何像下面的代码一样添加类

```
<ul>
<li class="one">one</li>
<li class="two">one</li>
<li class="three">one</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T05:17:20.160

**JS**

```
$("li").each(function(i) {
    $(this).addClass("0" + (i+1));
}); 
```

**CSS**

```
ul.class{margin:0;padding:0;}
ul.class li{
    margin:0.3em;
}
ul.class li:nth-child(1){
    background-color:#fff;
}
ul.class li:nth-child(2){
    background-color:#ccc;
}
ul.class li:nth-child(3){
    background-color:#666;
}
ul.class li:nth-child(4){
    background-color:#999;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:17:21.913

如果我没记错的话，我认为可能是这样的：

```
$("li").each(function(idx){
     $(this).addClass(idx));
}); 
```

# jquery - 处理多个动画的jquery有什么更优雅的解决方案

> ID：14700613
> 
> 赞同：1
> 
> 时间：2013-02-05T05:14:05.477
> 
> 标签：jquery, css, animation

这个 jQuery 运行许多隐藏框动画，fadeOuts，fadeIns 等...

这是一个工作的jsfiddle

[http://jsfiddle.net/xpancom/FNF3z/](http://jsfiddle.net/xpancom/FNF3z/)

您将在左侧看到每个示例链接都显示三个隐藏框。当您单击另一个链接时，它会隐藏这三个并显示三个不同的链接。

这只是一个示例，我的一些页面有 10 组三个隐藏框...运行所有这些的 jQuery 超过 300 行。

目前我有这样的 ID 链接

```
<li><a href="#" id="click1-12">Sample 1</a></li>
<li><a href="#" id="click1-13">Sample 2</a></li> 
```

以及运行动画淡入和淡出以及链接的活动状态的 jQuery

```
 $("#click1-12").click(function() {
    $("#work-uscg1 a").removeClass("work-active");
    $.fn.closeBoxes();
    $('#work-uscg1').delay(400).fadeIn();
    $('#work-uscg2').delay(600).fadeIn();
    $('#work-uscg3').delay(800).fadeIn();
    $('#work-uscg3a').delay(400).fadeIn();
    $("#click1-12").addClass("nav-active");
    $("#click2-11a").addClass("work-active");
});
$("#click1-13").click(function() {
    $("#work-toy1 a").removeClass("work-active");
    $.fn.closeBoxes();
    $('#work-toy1').delay(400).fadeIn();
    $('#work-toy2').delay(600).fadeIn();
    $('#work-toy3').delay(800).fadeIn();
    $('#work-toy3a').delay(400).fadeIn();
    $("#click1-13").addClass("nav-active");
    $("#click3-11a").addClass("work-active");
}); 
```

感谢您就如何创建更优雅的解决方案提供任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:32:12.880

好吧，我进行了一些重组，让自己更轻松地完成它，我在这里只是给你一个大致的想法，但是利用每个列表项的索引与实际内容相比可能是一个不错的选择。这是一些通用标记：

```
<div id="nav">
    <ul>
        <li><a href="#">Sample 1</a></li>
        <li><a href="#">Sample 2</a></li>
        <li><a href="#">Sample 3</a></li>
    </ul>
</div>

<div id="content">
    <div class="item">
        <div class="block-1">content 1-1</div>
        <div class="block-2">content 1-2</div>
        <div class="block-3">content 1-3</div>
    </div>

    <div class="item">
        <div class="block-1">content 2-1</div>
        <div class="block-2">content 2-2</div>
        <div class="block-3">content 2-3</div>
    </div>

    <div class="item">
        <div class="block-1">content 3-1</div>
        <div class="block-2">content 3-2</div>
        <div class="block-3">content 3-3</div>
    </div>
</div> 
```

我刚开始用css隐藏了元素：

```
.item div {
    display: none;
} 
```

现在是有趣的部分...... javascript！好吧，jQuery，但你明白我的意思。基本上你想要的是一个函数能够控制你想要影响的每个元素。所以，就像我说的，我利用点击元素的索引来改变实际内容的状态：

```
var navClick = function() {
    var arrPosition = $(this).closest('li').index();
    var $targetDiv = $('#content').find('.item').eq(arrPosition);
    $targetDiv.find('.block-1').delay(400).fadeToggle();
    $targetDiv.find('.block-2').delay(600).fadeToggle();
    $targetDiv.find('.block-3').delay(800).fadeToggle();
}

$('#nav a').on('click', navClick); 
```

您的标记总体上可以使用一些清理，以及您正在使用的 JS。使用我的方法，您甚至不需要为每个元素指定特定的 ID。如果您有任何问题，请告诉我！

哦，这是给你的小提琴。[http://jsfiddle.net/cArA3/1/](http://jsfiddle.net/cArA3/1/)

# java - 如何根据设备启用硬件加速

> ID：14700620
> 
> 赞同：1
> 
> 时间：2013-02-05T05:14:45.597
> 
> 标签：java, android, cordova, hardware-acceleration

我收到此错误：

```
E/libEGL(11261): call to OpenGL ES API with no current context (logged once per thread) 
```

我发现一个可能的解决方案是使用

```
android:hardwareAccelerated="true" 
```

但问题是我想在 android 2.2 上运行该应用程序。

如果我将该设置添加到`AndroidManifest.xml`，它将无法编译，因为它会给出错误。

有没有办法根据设备版本启用该选项，或者使用不同的解决方案？

我正在使用phonegap。

编辑：

找到了解决方案，我没有运行 deviceready 监听器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:32:52.333

您可以使用[反射](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/package-summary.html)来调用窗口的方法：

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED, WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED); 
```

实际上，该方法在 2.2 中可用，但常量值不可用。您可以对它们进行硬编码或使用反射。

有关按视图硬件加速控制的更多详细信息，请参阅[http://developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:42:52.557

试试这个。

```
 if (Build.VERSION.SDK_INT > Build.VERSION_CODES.HONEYCOMB) {
getWindow().setFlags(
                    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,
                    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);
    (your view)view.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
    } 
```

**AndroidManifest.xml**

```
 <application
        android:hardwareAccelerated="true"> 
```

# android - Android-Eclipse 中的模拟器控制

> ID：14700622
> 
> 赞同：-1
> 
> 时间：2013-02-05T05:15:00.207
> 
> 标签：android, android-emulator, location

我正在开发一个获取当前 GPS 位置的应用程序。为了获得当前的纬度和经度。

*   我打开了“模拟器控制”
*   注意到一个禁用的发送按钮

并尝试了很多，但它没有启用。在模拟器上启用发送按钮的任何方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:18:31.860

尝试这个，

首先打开`Devices`然后选择你的`emulator`或`Devices` 。之后`Send Button` 将自动启用。

# android - 适用于 xlarge 的 Android 屏幕分辨率

> ID：14700626
> 
> 赞同：2
> 
> 时间：2013-02-05T05:15:22.723
> 
> 标签：android, screen-resolution

我开发了一个安卓应用程序。我想为 xlarge 屏幕测试这个应用程序。当我尝试创建具有以下分辨率的模拟器时，模拟器没有加载有没有办法测试应用程序的 xlarge 屏幕

**我尝试了以下解决方案：**

```
hdpi-

     1536x1152

     1920x1152 

     1920x1200 

 xhdpi-

2048x1536

2560x1536 

2560x1600 
```

我的显示器是 Dell-21"，分辨率 Max-1600*900。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:39:27.147

有特定的 Android API 调用可以在运行时告诉您手机的密度和（小/大/正常）屏幕尺寸。但是，作为开发人员，我们根本不需要担心个别手机。我们需要做的就是在 apk 中有 ldpi/mdpi/hdpi 资产和小/正常/大布局。Android 在内部处理一切。

不要忘记深入了解 Android 如何确定要使用的资产和[这样的别名。](http://android-developers.blogspot.in/2011/07/new-tools-for-managing-screen-sizes.html)

定义是：

超大屏幕至少为 960dp x 720dp。

大屏幕至少为 640dp x 480dp。

普通屏幕至少为 470dp x 320dp。

小屏幕至少为 426dp x 320dp。（Android 目前不支持比这更小的屏幕。）

以下是更多关于如何在真实屏幕上工作的示例：

QVGA 屏幕为 320x240 ldpi。转换为 mdpi（4/3 比例因子）给我们 426dp x 320dp；这与上面小屏幕桶的最小尺寸相匹配。

Xoom 是一款典型的 10 英寸平板电脑，具有 1280x800 mdpi 屏幕。这会将其放入 xlarge 屏幕存储桶中。

Dell Streak 是 800x480 mdpi 屏幕。这会将其放入大号桶的底部。

典型的 7 英寸平板电脑具有 1024x600 mdpi 屏幕。这也算大屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:18:35.543

在模拟器中，即在 AVD-> 设备定义中。您可以选择并修复任何类型的分辨率。你

还可以定制任何类型的尺寸。由于分辨率高，加载需要时间

模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:40:56.567

> 我想为 xlarge 屏幕测试这个应用程序。当我尝试创建具有以下分辨率的模拟器时，模拟器没有加载有没有办法测试应用程序的 xlarge 屏幕

AFAIK 你只能用下面给出的密度创建模拟器，在创建 AVD 时你会得到下面的图像。您只能从以下设备中进行选择来制作您的模拟器。

![在此处输入图像描述](../Images/846a8711ae97ce74cc22a342d1b3bb17.png)

**您的替代解决方案：**

> **但是，我需要确保一切正常。**

是的，你一定能得到你想要的。

如果您想检查您的应用程序是否在 960x640（普通屏幕 xhdpi）设备上完美运行。您可以根据以下建议进行自定义配置。

将您的 ADT 更新到版本 21 之后。

**`Add Custom`在旧版本中，如果您想要自定义设备配置（如果您想要 Nexus 4），则每次必须设置屏幕。**

在 ADT21 版本中，您可以通过

> **打开`AVD Manager`，你可以定义你的自定义屏幕`"Device Definition"`**

**替代方案（更简单的方法）**

> 在最新版本中，您不需要根据上述建议设置自定义设备配置，因为它提供了更简单的方法。您>只需使用您的设备配置制作模拟器，然后您将在`Graphical Layout`XML 中看到带有模拟器名称的那些配置

就像在使用名称为“Nexus7_Android_4.2”的Android 4.2创建我的Nexus7模拟器模拟器之后，我将自动在xml的图形布局中获得此设备配置。

下面是它的屏幕截图。

![在此处输入图像描述](../Images/b97d1e5e83c13f9e3be2d0ac367cfeab.png)

希望它会帮助你。

# php - PHP 对象和 JQUERY AJAX 调用

> ID：14700636
> 
> 赞同：0
> 
> 时间：2013-02-05T05:16:23.740
> 
> 标签：php, jquery, ajax, object

我有一个用户将输入的 HTML 输入。在每个键之后，一个 JQUERY 事件将获取到目前为止编写的文本并进行 AJAX 调用，该调用将被 PHP 拾取。

我以前做过这个，很容易调用一个 PHP 脚本，然后处理传递的数据 - 例如：db 调用并返回所需的内容。

问题 - 是否可以使用 PHP 对象来做到这一点？（我是第一次写 OOP PHP）。是否有某种方法可以将 AJAX 调用与 PHP 对象结合起来，或者 PHP 是否应该只是一个标准函数？

谢谢你

***更多信息：此功能正在针对包含 600 万个郊区/邮政编码的数据库搜索位置。用户键入的每个键都会触发一个 jquery 事件，该事件会使用迄今为止键入的字母创建一个 ajax 调用。调用 PHP 并运行 SQL 查询以返回可能的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:21:38.887

您可以将 PHP 对象与 AJAX 调用结合使用，但您必须更详细地解释您正在尝试做什么，以便我确定它是否会对您有所帮助。

听起来你只想要一个 AJAX 调用，在用户没有输入文本框或其他任何内容之后调用 500 毫秒。这似乎是一个标准的 PHP 更新函数。

根据您到目前为止所说的，我建议您使用 AJAX；让它触发 onKeyUp、onKeyPress 或任何你想要的，然后运行一些 PHP。

回想一下，您可以通过多种方式创建计时器；只是在这里搜索。您可能不想在每次击键时都使用 AJAX。

[OnKeyUp JavaScript 时间延迟？](https://stackoverflow.com/questions/1381751/onkeyup-javascript-time-delay)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:02:58.937

当客户端暂停输入一段时间后，使用 javascript（阅读 jQuery）向您的服务器提交一条消息。

如果您尝试提交完整形式的数据，jquery 中有一个有用的函数可以为您序列化它：

```
var formData = $("#form").serializeObject();
$.post('phpPageURL.php', formData, function(data){
       //analyze success or failure
    }); 
```

然后，编写一些 php 将发布的数据转换为模型（类），这是应用程序的其余部分与该数据交互的方式。然后，根据您要对该数据执行的操作调用必要的控制器，并将该对象传递给它。

就像是：

```
$foo = new Foo();
$foo->name = $_POST['formField_name'];

ManipulateData::doawesomeness($foo); 
```

# php - 我应该允许“。” 在网址中？

> ID：14700640
> 
> 赞同：3
> 
> 时间：2013-02-05T05:16:46.860
> 
> 标签：php, codeigniter, url, web, url-masking

我正在使用 codeigniter 路由进行 URL 屏蔽。在这里，我允许用户输入一个文本，该文本将是他在特定 URL 下提供的详细信息的 URL。

即，如果用户输入“offer1”，那么他的优惠详情将在

> [offer.com/offer/offer1](http://offers.com/offer/offer1)

在这里，我只接受字母和数字作为 URL 文本。我应该允许“。”吗？在 URL 文本中？我应该在这里遵循什么标准方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:24:45.087

当用户输入报价名称时，将其作为`$offer_name`并使用`base64_encode($offer_name);`

```
$encoded_name = base64_encode($offer_name); 
```

将此发送`$encoded_name`到 url ............如果你想使用提供名称进一步解码它使用`base64_decode($encoded_name);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T11:56:58.000

您可以`"."`通过`"."`在.`$config['permitted_uri_chars']``config.php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T10:41:47.757

如果你需要“。” 您可以将其保留在 urls 中，如果您随后使用 url 参数运行查询，只需在运行查询之前转义参数即可。

通常我会`301 redirect`判断`base_url();`url 参数是否有问题。

只是我的 2 美分

# assembly - 如何保持这个值

> ID：14700642
> 
> 赞同：1
> 
> 时间：2013-02-05T05:16:55.457
> 
> 标签：assembly, x86, fasm

我保留了由我的汇编例程修改的字节。

我使用`pusha`/* 完成了我的工作 */ 然后`popa`导致分段错误。

如果我用/* 替换`pusha`and做我的工作 */它工作正常。`popa``push eax` `push ecx``pop ecx` `pop eax`

但是为什么我会得到这个段错误？它与 有什么关系`pusha`？

下面是我的代码的一部分。在这里，我只使用了八个寄存器中的两个。如果我需要在例程中使用 8，我是否需要推送和弹出每个寄存器？有没有办法`pusha`只`popa`保留buf？

```
main:
   pusha
    mov eax,10
.AGAIN:
    cmp eax,0
    je .END
    mov [buf + ecx],'.'
    inc ecx
    dec eax
    jmp .AGAIN
.END:
    mov [buf + ecx],0
    mov ebp,buf
    call puts
    popa
    ret 
```

不要给出段错误：

```
main:
    push eax
    push ecx
    mov eax,10
.AGAIN:
    cmp eax,0
    je .END
    mov [buf + ecx],'#'
    inc ecx
    dec eax
    jmp .AGAIN
.END:
    mov [buf + ecx],0
    mov ebp,buf
    call puts
    pop ecx
    pop eax
    ret 
```

**buf**定义为：

段可读可写
buf rb 12

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:03:30.107

Pusha/popa 保存 16 位寄存器（AX、BX、CX、DX、SP、BP、SI、DI）。您正在更改 32 位寄存器 EAX 和 ECX，因此请使用等效的 32 位寄存器：pushad 和 popad。

# iphone - UIWebView 复制粘贴

> ID：14700644
> 
> 赞同：0
> 
> 时间：2013-02-05T05:17:01.110
> 
> 标签：iphone, ios, uiwebview, copy-paste

我正在处理`UIWebView`操作`Copy`并且`paste`..我不知道它到底是如何工作的..我需要做的是......当我点击链接时，它应该复制`URL`和输入`UiTextField`或者`Browser bar`它应该能够粘贴......

我正在做的是：

```
- (void)actionSheet:(UIActionSheet *)actionSheet
clickedButtonAtIndex:(NSInteger)buttonIndex {

if([title isEqualToString:@"Copy"]){ 

   NSURL *requestedURL = [request URL];
   NSString *link = [requestedURL absoluteString];
    UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];

    pasteboard.string = link;

    NSLog(@"paste is %@",pasteboard.string); // this does not give me the anything
  } 
```

请让我知道我在复制方法中哪里出错了，以及如何粘贴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:21:35.173

通过此链接：- [http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPasteboard_Class/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPasteboard_Class/Reference.html)

```
[[UIPasteboard generalPasteboard] containsPasteboardTypes:UIPasteboardTypeListString];
UIPasteboard *pasteboard = [UIPasteboard generalPasteboard]; 
if (pasteboard.string != nil) { [self insertText:pasteboard.string]; } 
```

# php - 如何在循环中获取价值并发送到另一个页面？

> ID：14700654
> 
> 赞同：-1
> 
> 时间：2013-02-05T05:17:53.393
> 
> 标签：php

我想获取 and 的值`$sched->start_time`并将`$sched->end_time`它们发送到`next_page.php`.

```
<?php 
 foreach($foo as $row){
 echo "
 <tr>
   <td>".$sched->start_time."</td>
   <td>".$sched->end_time."</td>
   <td class='add'><a class='add_sched' href='next_page.php'>add new</a></td></tr>";
 }
?> 
```

输出将如下所示

* * *

> | 7:30 | 8:30 | *添加 |
> | 8:30 | 9:30 | *添加 |
> | 9:30 | 10:30 | *添加 |

如果我点击 *add @ 8:30-9:30 该值将被发送到`next_page.php` 我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T05:21:59.417

试试这个...

```
echo
...

 "<td class='add'>
   <a class='add_sched' href='next_page.php?start_time=".$sched->start_time."&end_time=".$sched->end_time."'>add new</a>
</td>" 
```

在`next.php`

```
$start_time = $_GET['start_time'];
$end_time = $_GET['end_time']; 
```

# php - yii 中的动态下拉菜单

> ID：14700655
> 
> 赞同：1
> 
> 时间：2013-02-05T05:17:53.597
> 
> 标签：php, yii

我按照 wiki 中给出的说明在 yii 中创建动态下拉列表，但仍然没有生成第二个下拉列表，这是我的视图文件：

```
echo CHtml::dropDownList('AccountTypeID','', array(1=>'Admin',2=>'Manager',3=>'Business',4=>'Finance',5=>'Customer Support'),array('ajax' => array('type'=>'POST',
'url'=>CController::createUrl('currentController/dynamiccities'), //url to call.
'update'=>'#city_id', //selector to update
))); 

echo CHtml::dropDownList('city_id','', array()); 
```

这是我的控制器：

```
public function actionDynamiccities(){
$data= RefAccountgroup::model()->findAll('parent_id=:parent_id', 
              array(':parent_id'=>(int) $_POST['AccountTypeID']));

$data=CHtml::listData($data,'AccountGroupID','AccountGroupName');
foreach($data as $value=>$name)
{
    echo CHtml::tag('option',
               array('value'=>$value),CHtml::encode($name),true);
}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:16:10.850

请注意***'ajax'***声明

```
'ajax' => array(
 'type'=>'POST',
 'url'=>CController::createUrl('currentController/dynamiccities'), //url to call.
 'update'=>'#city_id', //remember to change it according to this rules #modelname_columnname
 'data'=>array('AccountTypeID'=>'js:this.value'),   //I think you missed this line
 ))); 
```

如果您的 firefox 浏览器上安装了 firebug，请尝试查看控制台选项卡，并检查您的下拉列表更改是否成功发送参数**AccountTypeID**，您也可以看到响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:40:15.960

首先，如果您实际上包含指向您尝试遵循的教程的链接，您的问题将会得到改善。

其次，在评论中回答问题时，“它没有发送数据”并没有真正澄清任何事情。在这一点上，我不确定您是否查看过 Firebug 或任何 Web 开发人员工具来检查发布的内容和收到的内容。我的猜测是，如果你看的话，你会看到一个 POST 请求被发出，没有数据被发送，也没有数据被返回。

您的 AJAX 调用没有数据参数，因此`$_POST['AccountTypeID']`不会被定义，这意味着`$data`在您的控制器中也将为空。

更新您的 AJAX 以发布 AccountTypeID，例如：

```
echo CHtml::dropDownList('AccountTypeID',
                         '', 
                         array(1=>'Admin',2=>'Manager',3=>'Business',4=>'Finance',5=>'Customer Support'),
                         array('ajax' => array('type'=>'POST',
                                               'url'=>CController::createUrl('currentController/dynamiccities'), //url to call.
                                               'update'=>'#city_id', //selector to update
                                               'data'=> '$("#AccountTypeID").serialize()',
))); 

echo CHtml::dropDownList('city_id','', array()); 
```

您可能需要调整 data 参数以正确解析正确的输入以获取 AccountTypeID - 我只是在上面的示例代码中猜测。

然后，在测试时，确保使用 Firebug 或类似工具来检查正在发布的内容，并确保您传递了 AccountTypeID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T05:22:34.253

很简单。您需要在模型上声明一个与下拉列表同名的公共变量。前任。在您的模型 public mydropdown 中；

在你看来

echo $form->dropDownList($model, 'mydropdown',array('1'=>'hello','2'=>'bye'));

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-06T06:27:42.710

不确定这是否有帮助，但是...

echo CHtml::dropDownList('city_id','', array('id' => 'city_id'));

# python - 从excel中读取一列并解析成字典键值python

> ID：14700657
> 
> 赞同：0
> 
> 时间：2013-02-05T05:18:03.020
> 
> 标签：python, dictionary, delimiter

我在 excel 中有以下列之一：

```
[0,[20,40,60],1,0] 
```

我已经通过 xlrd 阅读它并将其作为字符串传递。

```
mycol=str(data[rownum][1]); 
```

但是，我想用逗号分隔每个项目并解析为字典键值，例如

```
dict= {'Item1': '0', 'Item2': '[20,40,60]', 'Item3':'1', 'Item4': '0'} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:20:51.640

步骤1：

```
>>> ast.literal_eval('[0,[20,40,60],1,0]')
[0, [20, 40, 60], 1, 0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:38:07.043

扩展 Ignacio Vazquez-Abrams 给出的答案

```
In [61]: import ast

In [62]: l  = ast.literal_eval('[0,[20,40,60],1,0]')

In [63]: l
Out[63]: [0, [20, 40, 60], 1, 0]

In [64]: d = dict([("Item%s"%x, y) for x, y in enumerate(l, 1)])

In [65]: d
Out[65]: {'Item1': 0, 'Item2': [20, 40, 60], 'Item3': 1, 'Item4': 0} 
```

如果您在键而不是 Item* 中有正确的值

```
In [77]: l2 = ['Apple ', 'Orange', 'Banana', 'Grape']

In [78]: d = dict(zip(l2, l))

In [79]: d
Out[79]: {'Apple ': 0, 'Banana': 1, 'Grape': 0, 'Orange': [20, 40, 60]} 
```

# javascript - html 代码在 Mozilla 中无法正常工作

> ID：14700661
> 
> 赞同：1
> 
> 时间：2013-02-05T05:18:21.477
> 
> 标签：javascript, html, mozilla

```
<html>
<body>

<script>
function show_mcap()
{
    if(document.form1.marriage.checked)
    document.getElementById("m_cap1").innerHTML="Hall Capacity<br><input type=text      name=hall[]><br>Dining Hall capacity<br><input type=text name=d_hall[]><br>Rent<br><input      type=text name=rent[]>"
    else 
    document.getElementById("m_cap1").innerHTML=""
}

    function show_bcap()
    {
        if(document.getElementById("bday").checked)
         {
           document.getElementById("b_cap1").innerHTML="Hall Capacity<br><input  type=text name=hall[]><br>Dining Hall capacity<br><input type=text name=d_hall[]><br>Rent<br><input type=text name=rent[]>"
         }
          else 
          document.getElementById("b_cap1").innerHTML=""
      }
 </script>

 <form name="form1">
 <table>

 <tr>
 <td width="230"><label for="bday">
  <input type="checkbox" name="category[]" value="marraige" id="marriage"     onClick="show_mcap()">Marriage/Reception
 </td>

 <td width="227">
 <input type="checkbox" name="bday" value="bday" id="bday" onClick="show_bcap()">Bday
 </td>
 </tr>
    <tr>
      <td><div id="m_cap1"></div></td>
      <td><div id="b_cap1"></div></td>
    </tr>
</table>
</form>
</body>
</html> 
```

这是我写的代码。此代码在 chrome、internet explorer、opera 中运行良好。但在Mozilla中无法正常工作！当我单击第一个复选框时，会自动选中第二个复选框！请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T05:21:04.337

我相信这与你的标签有关。您将“marraige”周围的标签指定为“bday”。将其更改为“marraige”，它应该按预期运行。

也就是说，改变：

```
<td width="230"><label for="bday">
    <input type="checkbox" name="category[]" value="marraige" id="marriage"     onClick="show_mcap()">Marriage/Reception
</td> 
```

至

```
<td width="230">
    <label for="marriage">
        <input type="checkbox" id="marriage" onClick="show_mcap()">Marriage/Reception
    </label>
</td> 
```

有关在 Firefox 中测试的工作示例，请参阅[http://jsfiddle.net/JGMMj/](http://jsfiddle.net/JGMMj/)。我想指出代码还有其他问题，但这解决了您提到的问题。

# node.js - 在 express.js 应用程序中组织游戏

> ID：14700662
> 
> 赞同：1
> 
> 时间：2013-02-05T05:18:22.860
> 
> 标签：node.js, express, directory-structure, organization

我有一台运行多个多人网络游戏的服务器。它内置在 Node.js+Express.js 中，具有标准的文件夹结构（例如“views”下的 Jade 文件，“public/javascripts”下的 Javascript 客户端文件等）。

每当我添加新游戏时，我必须：

*   将其 Jade 文件添加到“views/”
*   将其 Javascript 文件添加到“public/javascripts/”
*   将其相关事件处理程序添加到另一个文件夹中的 Node.js 文件
*   将代码添加到引用所有这些新文件的主文件 (server.js)。

这似乎是一个次优组织，因为与每个游戏相关的文件分散在许多文件夹中。

您能否提出一个更好的结构，将每个游戏的代码封装在一个地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T20:25:12.477

express 的创建者 TJ Holowaychuk 刚刚在 vimeo 上发布了一段视频，向您展示了如何使用 express 构建模块化 Web 应用程序。该视频可在此处获得并直接回答您的问题：http: [//vimeo.com/56166857](http://vimeo.com/56166857)。

这个想法是在子目录中拥有一个`lib/`包含自包含快速应用程序的文件夹，每个子目录中都有`public`,`views`目录。然后，您导出每个应用程序对象并将它们全部链接到一个文件中。

# mysql - 如何使用 ON DUPLICATE KEY 插入...选择

> ID：14700664
> 
> 赞同：1
> 
> 时间：2013-02-05T05:18:25.153
> 
> 标签：mysql, insert-into, on-duplicate-key, select-into

我有两个结构相同的表。表 A 包含所有当前广告，表 B 包含存档广告。第 1 列 (ad_id) 是主键、AI、INT。表引擎是 MyISAM。

我需要将某个日期之前的所有表 A 广告复制到存档表 B。我的目标是除了 ad_id 之外的所有字段都是重复的，ad_id 应该自动递增。这是我尝试过的：

```
INSERT INTO B`(`ad_id`, `ad_advertiser`, `ad_ln`, `ad_expire`) 
    SELECT *
    FROM A
    WHERE YEAR( ad_expire ) <= 2012 
```

表 B 有数千个广告，表 A 经常被刷新，以至于唯一 id 字段的数字很少，经常与表 B 中的 id 重复。所以 MySQL 摇摇晃晃地告诉我我有一个`Duplicate entry '8577' for key 'PRIMARY'`.

所以我做了几次尝试来克服这个问题：

首先，我尝试选择要插入的各个列，设置`ad_id`为 NULL：

```
INSERT INTO B(`ad_id`, `ad_advertiser`, `ad_ln`, `ad_expire`) 
    SELECT (NULL, `ad_advertiser`, `ad_ln`, `ad_expire`)
    FROM A
    WHERE YEAR( ad_expire ) <= 2012 
```

这会导致错误`#1241 - Operand should contain 1 column(s)`，如果我使用通配符 * 选择器，该错误就会消失，但随后会出现重复错误。

接下来我尝试`SELECT LAST_INSERT_ID()`了，它总是返回 0。

然后我尝试了一些 using `ON DUPLICATE KEY UPDATE`，但我似乎无法让它工作。

我什至试图通过以下方式获取最高 id：

```
SELECT @max := max(ad_id) FROM B;

INSERT INTO B`(`ad_id`, `ad_advertiser`, `ad_ln`, `ad_expire`) 
  SELECT *
  FROM A
  WHERE YEAR( ad_expire ) <= 2012

ON DUPLICATE KEY UPDATE ad_id = @max + 1 
```

这仅适用于一行，然后再次导致重复条目（因为 @max 是静态变量）。

我在这里做错了什么？我这样做是不是太难了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:31:02.303

在你的情况下为什么不使用？

```
INSERT INTO B(`ad_advertiser`, `ad_ln`, `ad_expire`) 
    SELECT (`ad_advertiser`, `ad_ln`, `ad_expire`)
    FROM A
    WHERE YEAR( ad_expire ) <= 2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:11:41.663

您可以 使用以下命令删除您`ad_id`的主键约束。`table B`

```
ALTER TABLE B DROP PRIMARY KEY 
```

然后尝试您通常的查询，即

```
INSERT INTO B`(`ad_id`, `ad_advertiser`, `ad_ln`, `ad_expire`) 
    SELECT *
    FROM A
    WHERE YEAR( ad_expire ) <= 2012 
```

**更新 1**

如果您不想拥有多个`ad_id`，则可以直接尝试此查询

```
 INSERT INTO `B`(`ad_id`, `ad_advertiser`, `ad_ln`, `ad_expire`) 
    SELECT *
    FROM A
    WHERE YEAR( ad_expire ) <= 2012
   ON DUPLICATE KEY UPDATE
    ad_advertiser = VALUES(ad_advertiser), 
    ad_ln = VALUES(ad_ln), 
    ad_expire = VALUES(ad_expire); 
```

这是[SQL 小提琴](http://www.sqlfiddle.com/#!2/712e5/1/0)

# hyperlink - 在 Microsoft Word 2011 中转换为 pdf 时保持超链接不变

> ID：14700666
> 
> 赞同：0
> 
> 时间：2013-02-05T05:18:27.513
> 
> 标签：hyperlink, ms-word

我有一个目录，其中包含在将 Word 文档转换为 pdf 文件时未确认的超链接和 URL 超链接。我很惊讶没有在stackoverflow上看到这个问题。有小费吗？

# c# - WMI 查找值

> ID：14700670
> 
> 赞同：0
> 
> 时间：2013-02-05T05:18:44.190
> 
> 标签：c#, wmi

我正在使用 WMI 检索服务器操作系统的信息。我有以下查询->

```
select *  from Win32_OperatingSystem 
```

结果很好，但是对于 OperatingSystemSKU，它返回一个整数。在 microsoft 网站上，它提供了实际值。我想知道这个查找表是否存在，还是我必须创建自己的本地表来进行映射？

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa394239(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394239(v=vs.85).aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:55:52.730

你可以这样查找

```
string OSname = (from x in new ManagementObjectSearcher("SELECT * FROM Win32_OperatingSystem").Get().OfType<ManagementObject>() select x.GetPropertyValue("Caption")).First().ToString(); 
```

或者只是使用一个消息框。

```
MessageBox.Show((from x in new ManagementObjectSearcher("SELECT * FROM Win32_OperatingSystem").Get().OfType<ManagementObject>() select x.GetPropertyValue("Caption")).First().ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T19:47:59.550

`OperatingSystemSKU`您可以提取访问`Values`限定符的属性的有效值。

检查下一张图片（使用[WDCC](http://code.google.com/p/wmi-delphi-code-creator/)获得），其中显示了该属性的所有限定符和值 `OperatingSystemSKU`。

![在此处输入图像描述](../Images/3944f9bd7ee154195d3c41916354930b.png)

从 .Net 中，您必须使用[QualifierData](http://msdn.microsoft.com/en-us/library/system.management.qualifierdata%28v=vs.71%29.aspx)类来提取此类信息。

检查下一个使用限定符值构建查找列表的 C# 示例。

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                List<string> sLookUp = new List<string>();
                ManagementClass manClass = new ManagementClass("Win32_OperatingSystem");
                manClass.Options.UseAmendedQualifiers = true;
                foreach (PropertyData Property in manClass.Properties)
                    if (Property.Name.Equals("OperatingSystemSKU"))                    
                        foreach (QualifierData Qualifier in Property.Qualifiers)
                            if (Qualifier.Name.Equals("Values")) 
                                foreach (String s in (System.String[])Qualifier.Value)
                            sLookUp.Add(s);                   

                ManagementScope Scope;                
                Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", "."), null);
                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT OperatingSystemSKU FROM Win32_OperatingSystem");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0} {1}", "OperatingSystemSKU", sLookUp[Convert.ToInt32((UInt32)WmiObject["OperatingSystemSKU"])]);// Uint32
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T08:50:51.507

这是我前段时间写的一个（非常精简的）方法 - 获取名称并使用 Environment.OSVersion 将 Windows 版本作为字符串获取 - 我只是假设您想要这里的操作系统版本名称而不是 sku？

```
/// <summary>
/// Class for getting environment information
/// </summary>
public static class EnvironmentInfo
{
    /// <summary>
    /// Gets environment information by querying the system
    /// </summary>
    public static IEnumerable<string> GetEnvironmentInfo()
    {
        List<string> results = new List<string>();

        SafeUpdateListOfResultsFromInstrumentation("OS Product: {0}", results, "select * from win32_OperatingSystem", "name");
        SafeUpdateListofResults("OS Version: {0}", results, (() => Environment.OSVersion.ToString()));

        return results;
    }

    private static void SafeUpdateListofResults(string format, List<string> results, Func<string> del)
    {
        try
        {
            string str = del.Invoke();
            results.Add(string.Format(format, str));
        }
        catch (Exception)
        {
            //Swallow exception - can't get diagnostic info!
        }
    }

    private static void SafeUpdateListOfResultsFromInstrumentation(string format, List<string> results, string query, string index)
    {
        try
        {
            WqlObjectQuery objectQuery = new WqlObjectQuery(query);
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(objectQuery);

            string name, value;

            foreach (ManagementObject managementObject in searcher.Get())
            {
                name = managementObject[index].ToString();
                string[] split1 = name.Split('|');
                value = split1[0];
                results.Add(string.Format(format, value));
            }
        }
        catch (Exception)
        {
            //Swallow exception - can't get diagnostic info!
        }

    }
} 
```

# jquery - IE8 - 光标无法移动到 CK 编辑器中最后一个笑脸的末尾

> ID：14700676
> 
> 赞同：3
> 
> 时间：2013-02-05T05:19:34.870
> 
> 标签：jquery, internet-explorer-8, ckeditor

当我用笑脸在ckeditor中插入数据时，我想再次编辑数据，但插入笑脸后我无法点击。笑脸后无法将文本放入 ie8 的 ckeditor 中。如果我想在那之后保留文字或笑脸，鼠标光标不会移动到笑脸的末尾。但是，如果我使用键盘的结束按钮，则鼠标光标会出现在笑脸之后。这只是 IE 8 上的问题。

# java - 如何从我的电脑打开和查看文件夹？

> ID：14700679
> 
> 赞同：3
> 
> 时间：2013-02-05T05:19:56.730
> 
> 标签：java, file, directory

编辑问题：

```
try{
    folder=jTextField1.getText()+"_portfolio";

        String path="E:/test folder/"+folder+"";
    Desktop.getDesktop().open(path);
    }catch(Exception E){

    } 
```

我在类 java.awt.Desktop 中打开错误方法无法应用于给定类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T05:23:17.147

见[`Desktop.open(File)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open%28java.io.File%29)。例如

```
Desktop.getDesktop().open(theDirectory); 
```

### SSCCE

```
import java.awt.Desktop;
import java.io.*;

public class BrowseDirectory {

    public static void main(String[] args) throws IOException {
        String userHomePath = System.getProperty("user.home");
        File userHome = new File(userHomePath);
        Desktop.getDesktop().open(userHome);
    }
} 
```

### 更新

尽管该目录对最终用户显示为“我的视频”，但在该目录中形成一个文件并检查该文件的属性，显示其底层名称是“视频”。

```
import java.awt.Desktop;
import java.io.*;

public class BrowseDirectory {

    public static void main(String[] args) throws IOException {
        String userHomePath = System.getProperty("user.home");
        File userHome = new File(userHomePath);
        // uses the corect path separator for the OS
        File videos = new File(userHome, "Videos");
        Desktop.getDesktop().open(videos);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:42:09.687

```
 try {
            String path = "C:\\path\\of\\your\\folder\\";
            Runtime runtime = Runtime.getRuntime();
            runtime.exec("explorer.exe "+path);
            System.out.println("open");
        } catch (Exception E) {
        } 
```

您可以使用任何您想要的路径，但首先将其转换为字符串，请注意在 java 中“\”应该写成“\\”

希望它有效:)

# ruby - 在 Ruby 上使用正则表达式解析 URL 以查找已知开始和结束或无结束之间的单词

> ID：14700681
> 
> 赞同：-1
> 
> 时间：2013-02-05T05:19:57.920
> 
> 标签：ruby, regex

我尝试获取电子表格的键值，例如“ **0ApdtEzo-JYQ4dFdMd3drb2VKX0tKaT2o1WVhDX1** ”。网址看起来像这样

```
https://docs.google.com/spreadsheet/ccc?key=0ApdtEzo-JYQ4dFdMd3drb2VKX0tKaT2o1WVhDX1E#gid=0 
```

或者

```
https://docs.google.com/spreadsheet/ccc?key=0ApdtEzo-JYQ4dFdMd3drb2VKX0tKaT2o1WVhDX1E 
```

仅设法在此工作台上获取包含“key=”和“#”的部分：[http ://rubular.com/r/pBTIj6LgeN](http://rubular.com/r/pBTIj6LgeN)

我很感激任何建议，因为我已经花了 1 个多小时了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:34:03.667

使用这种不需要结尾的模式怎么样`#`：

```
(?<=key\=)([^#]+) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:39:27.487

怎么样`/(?<=key=).*(?=#gid)/`，如果你不想`key=`和`#...`

# javascript - 如何在我的 ajax 调用服务器后立即启动 jquery 自动完成

> ID：14700691
> 
> 赞同：1
> 
> 时间：2013-02-05T05:21:21.263
> 
> 标签：javascript, jquery

我有一个包含 30,000 多个答案的大型数据库！我将 keyp 事件绑定到我的文本框以搜索输入值长度是否为 3，因此我对服务器进行 ajax 调用，从数据库中获取以这 3 个字符开头的记录，然后我使用源启动 jquery 自动完成 - 数据来自数据库，但问题是当用户输入三个字符时，只有当他输入自动完成开始的第四个字符时，我才会获得自动完成的来源。是否可以更改该行为，并在您输入 3 个字符后立即开始自动完成

提前致谢

我的代码

```
var keypresshandler = function () 

{

        var  strin = document.getElementById('txtInput').value;
        newstr = strin.replace(/[^\u0400-\u04FF0-9]/gi, '');

        if (newstr.length<3)
        {
                $( "#txtInput" ).autocomplete( "destroy" );
        }

        else 

            if (newstr.length==3)
            {    

                 triming();

            }

    }

    $(function() 
    {    
         $('#txtInput').bind('keyup', keypresshandler);     

    });

    function triming()
    {

         xmlhttp.onreadystatechange = function() 
        { 
            if (xmlhttp.readyState==4 && xmlhttp.status==200) 
            {
                alert(xmlhttp.responseText);

                var xmlObj = xmlhttp.responseXML;   
                var textXML = xmlObj.documentElement.firstChild.firstChild.nodeValue;

                if (window.DOMParser)
                {
                    parser=new DOMParser();
                    var xmlDoc=parser.parseFromString(textXML,"text/xml");
                }
                else // Internet Explorer
                {
                    var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
                    xmlDoc.async=false;
                    xmlDoc.loadXML(textXML);
                }

                var rows = xmlDoc.getElementsByTagName("row");
                rowsn = rows.length;
                for (i=0;i<rowsn;i++)
                {   
                    var cols=rows[i].getElementsByTagName("colunm");
                    colsn=cols.length;

                    for (var j=0; j<colsn; j++)
                    {   

                        mec[i] = cols[j].getAttribute("colvalue");

                    }

                } 
               // alert (rec.length);   

               $( "#txtInput" ).autocomplete({source: mec});

            }

        }

        var url = "http://localhost:9091/localbusscat/services/localbusscat/FindEl?myel="+ encodeURIComponent(newstr);
    //  alert (url);
        xmlhttp.open("GET", url, true);
        xmlhttp.send(); 

    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-26T20:55:59.590

我的朋友遇到了同样的问题，最终我们发现`input`标签上的事件处理程序必须设置为`onkeyup`.

# javascript - 使用 javascript 调整 iframe 高度

> ID：14700697
> 
> 赞同：0
> 
> 时间：2013-02-05T05:21:40.793
> 
> 标签：javascript, c#-4.0, iframe, height

我在 aspx 页面中有一个 iframe：

```
<iframe style="width: 100%;" src="" scrolling="auto" id="reportFrame" runat="server">
                                            </iframe> 
```

我正在使用的 JavaScript 在下面”

```
 <script type="text/javascript">
function getElement(aID) {
    return (document.getElementById) ? document.getElementById(aID) : document.all[aID];
}

function getIFrameDocument(aID) {
    var rv = null;
    var frame = getElement(aID); 
    // if contentDocument exists, W3C compliant(e.g.Mozilla)
    if (frame.contentDocument)
        rv = frame.contentDocument;
    else // bad Internet Explorer  ;)
        rv = document.frames[aID].document;
    return rv;
}

function adjustMyFrameHeight() {
    var frame = getElement("reportFrame");
    var frameDoc = getIFrameDocument("reportFrame");
    alert(frameDoc);
    frame.height = frameDoc.body.offsetHeight + 15;
        }

</script> 
```

但是当我们从查询字符串中检索 src 时，我的 .cs 页面中有一个 src 案例，因此代码是：

```
 case "Case1":
                reportFrame.Attributes["src"] = "acd.aspx";
                reportFrame.Attributes["height"] = "355px"; //giving iframe height as script now working. 
```

在页面加载中：

```
 this.reportFrame.Attributes.Add("onload", "adjustMyFrameHeight();"); 
```

我已经在页面加载中指定了脚本，因为我们正在使用 runat="server" 但脚本现在仍在工作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:37:47.803

我只是在逐步调试脚本后得到一个答案，为了获得框架的 Id，我必须指定整个或完整的 Id，因为它是在母版页的内容占位符中继承的，所以必须给出整个 Id .

# java - 使用 AWS 开发工具包将文件上传到 S3

> ID：14700700
> 
> 赞同：5
> 
> 时间：2013-02-05T05:21:54.833
> 
> 标签：java, android, amazon-web-services, libgdx

我正在尝试使用 AWS 开发工具包将文件上传到 Amazon S3 存储桶。

```
class LogToS3Bucket extends Thread{

    public void run() {
        super.run();
        Gdx.app.log("msg", "secondThreadRunning yeahhhhh!");
        File fileToPut = new File("../../../MyProject", "settings.txt");
        String accessKey = "<accessKey>";
        String secretKey = "<secretKey>";
        AWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);
        AmazonS3 conn = new AmazonS3Client(credentials);

        conn.putObject("bucketname", "filename.txt", fileToPut);
    }

} 
```

但它不起作用，它会在调用 .putObject() 时引发错误

```
Exception in thread "Thread-1" Status Code: 400, AWS Service: Amazon S3, AWS Error Code: BadDigest, AWS Error Message: The Content-MD5 you specified did not match what we received.
    at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:614)
    at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:312)
    at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:165)
    at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2951)
    at com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:1123)
    at com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:979)
    at com.myproject.LogToS3Bucket.run(LogToS3Bucket.java:22) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T05:37:36.567

我想通了——因为我的应用程序一直在编辑那个文件并且这个片段发生在一个单独的线程中，所以文件在上传之前实际上已经改变了......如果我制作文件的临时副本并将其上传到桶，它的工作原理。

# github - 查看组织权限

> ID：14700703
> 
> 赞同：2
> 
> 时间：2013-02-05T05:22:10.900
> 
> 标签：github

作为管理员，您可以为成员[**设置权限级别**](http://github.com/blog/674-introducing-organizations)，例如

```
Pull Only
Push & Pull
Push, Pull & Administrative 
```

但是作为**会员**，除了测试之外，你怎么知道你的权限是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:32:51.787

登录后，将帐户上下文切换到组织

> ![语境](../Images/097770dd0fe2f569cf4908a0a093ccc6.png)

选择`**Teams**`选项卡。在此选项卡下，您将找到每个团队的权限。

# php - 来自数据库的带有 optgroup 的动态选择列表

> ID：14700711
> 
> 赞同：2
> 
> 时间：2013-02-05T05:23:09.780
> 
> 标签：php, mysql

我有以下代码填充选择列表，但是每个选项（'link_title'）在列表中都有一个 optgroup 标题，而不是将选项分组到 optgroup 标题中：

```
<?php   
$query = mysql_query("SELECT * from link, link_category WHERE link.link_category_fk = link_category.link_category_pk ORDER BY link_category_fk, link_title ASC");
$current_subcategory = "";
while ($row = mysql_fetch_array($query)){

   if ($row["link_category_name"] != $current_subcategory) { 
       if ($current_subcategory != "") { 
           echo "</optgroup>"; 
       }
       echo '<optgroup label="'.$row['link_category_name'].'">'; 
       $current_subcategory = $row['subcategory'];
   }
   echo '<option value="'.$row['link'].'">'.$row['link_title'].'</option>'."\n";
 }
 echo "</optgroup>"; 
?>
          </select> 
```

![在此处输入图像描述](../Images/4f02dd56a520c3bdc94e0ae7c99b6759.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:50:22.347

在这一行：

```
$current_subcategory = $row['subcategory']; 
```

“子类别”不应该是“link_category_name”吗？当然，在没有看到您的数据库架构的情况下，我无法确定地回答该问题，但问题似乎是记录列子类别的值与 link_category_name 的值不匹配（因此为什么您的 if 条件始终为真）。

# iphone - 在 IOS 中接收 UITableView 的内存警告

> ID：14700722
> 
> 赞同：0
> 
> 时间：2013-02-05T05:24:07.673
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我以前使用过`UItableViewCell`默认标题和详细信息标签，它工作正常，没有任何警告，现在我已经自定义了表格视图单元格，我已经使用标签并添加为子视图，并且我也从文件中获取图像用于联系人......现在我我经常收到内存警告并且它正在崩溃，我正在重用如下所示的标识符仍然出现警告.. 可能是什么问题，我是否没有正确释放标签的内存或经常从文件中获取图像，导致这种情况？任何想法...

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
       cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle        reuseIdentifier:CellIdentifier];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    // Get the path of the file.
    get__path(file_path);

    NSString *fle_path = [NSString stringWithUTF8String:file_path];

    fle_path = [fle_path stringByAppendingFormat:@"%c%ld%s",'/',obj->user_id,".jpg" ];

    NSString *combined_name = [NSString stringWithCString:obj->combined_name encoding:NSASCIIStringEncoding];
    NSString *email = [NSString stringWithCString:obj->email encoding:NSASCIIStringEncoding];

    CGRect rect = [cell frame];
    UIImageView *img_view = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 55, 55)];
    UILabel *name_label = [[UILabel alloc] initWithFrame:CGRectMake(60, 7, rect.size.width-70, 20)];
    UILabel *detail_label = [[UILabel alloc] initWithFrame:CGRectMake(60, 27, rect.size.width-70, 20)];

    // Set Image
    UIImage *cellImage = [UIImage imageWithContentsOfFile:fle_path];

    if (cellImage != nil) {
        [img_view setImage:cellImage];

    }

    // Set name

    [detail_label setFrame:CGRectMake(60, 18,rect.size.width-70, 20)];
     name_label.text = combined_name;

     name_label.font = [UIFont fontWithName:@"Georgia-Italic" size:18];
        detail_label.text = email;

     [cell_italic.contentView addSubview:img_view];
     [cell_italic.contentView addSubview:detail_label];

     cell_italic.selectionStyle = UITableViewCellSelectionStyleNone;

     rect.size.height = 55;
     [cell_italic setFrame:rect];
     return cell_italic; 
```

我什么时候应该释放上述标签的内存......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:42:43.310

您的单元格和 cell_italic 是两种不同类型的单元格，因为单元格是默认的 UITableViewCell 而 cell_italic 是您的自定义单元格，您必须将 UITableViewCell 转换为 cell_italic 类型的单元格。还有一件事 - 您已经分配了单元格并返回了 cell_italic。

你可以像这样投射：

```
CustomResultCell *cell; 
 cell = (CustomResultCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

更新1：改变

```
`UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];` 
```

至

```
UITableViewCell *cell =(UITableViewCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

# sitefinity-5 - 重定向到sitefinity 5中的自定义登录页面

> ID：14700723
> 
> 赞同：0
> 
> 时间：2013-02-05T05:24:08.323
> 
> 标签：sitefinity-5

在我的 Sitefinity 5.0 站点中，我为前端用户提供了一个自定义登录页面。当未经身份验证的用户尝试访问受限页面时，我使用自定义错误将他们重定向到我们的前端登录页面。

在 Sitefinity 5.1 中，尝试访问您没有权限的页面只会导致 Sitefinity 将用户重定向到内部后端“登录以管理站点”登录。

有没有办法将 Sitefinity 配置为使用我的登录页面而不是内置的后端登录页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:06:31.263

您是否可以至少升级到 Sitefinity 5.2？显然，在该版本中引入了一个新事件，该事件会在登录失败时触发，您可以在 Global.asax 中拦截该事件以根据需要重定向到您希望的任何页面。

更多信息可在此处获得：[http ://www.sitefinity.com/blogs/stefani-tacheva-s-blog/2013/02/01/redirect-unauthorized-users-to-a-custom-page](http://www.sitefinity.com/blogs/stefani-tacheva-s-blog/2013/02/01/redirect-unauthorized-users-to-a-custom-page)

我希望这是有帮助的！

# python - 显示具有相同名称的多选值

> ID：14700724
> 
> 赞同：2
> 
> 时间：2013-02-05T05:24:14.923
> 
> 标签：python, django

我试图在表单中选择它们后显示多个复选框值，但我只能显示最后一个选定的值而不是多个选定的值。如何显示所有选定的值？

这是我的意见.py

```
def multi(request):
if 'hobbies' in request.GET and request.GET['hobbies']:
    hob = request.GET.getlist('hobbies')
    for h in hob:
        message = 'You entered ..... %r' % h
else:
    message = 'enterd wrong datails'
return HttpResponse(message) 
```

我的模板是

```
<html>
<head>
<title>Search</title>
</head>
<body  bgcolor='#455772' >
<form action="/multi/" method="get">
Hobbies:<input type='checkbox' name='hobbies' value='football'/>football <input      
type='checkbox' name='hobbies' value='cricket'/>cricket<input type='checkbox'    
name='hobbies'value='others'/>others<br>
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:26:36.963

```
def multi(request):
    if 'hobbies' in request.GET and request.GET['hobbies']:
        message = ','.join(request.GET.getlist('hobbies')) 
    else:
        message = 'enterd wrong datails'
    return HttpResponse(message) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:40:38.230

试试这个

```
hob = request.GET.getlist(u'hobbies') 
```

# ios - 如何从目标c中的日期选择器获取日期？

> ID：14700725
> 
> 赞同：9
> 
> 时间：2013-02-05T05:24:40.713
> 
> 标签：ios, objective-c, xcode

在头文件中我有：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

- (IBAction)displayDay:(id)sender;
@property (weak, nonatomic) IBOutlet UIDatePicker *datePicker;

@end 
```

执行：

```
- (IBAction)displayDay:(id)sender {

    NSDate *chosen = [UIDatePicker date];

} 
```

Xcode 告诉我我应该有 UIdatePicker，但是当我进行更改时，它会显示“不知道选择器‘日期’的类方法”。

关于如何处理这个问题的任何建议？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T05:40:27.183

以下代码将不起作用：

```
NSDate *chosen = [UIDatePicker date]; 
```

因为`date`它不是类方法，所以它是[**UIDatePicker**](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)类的属性。

> **日期**
> 
> 日期选择器显示的日期。
> 
> ```
> @property(nonatomic, retain) NSDate *date; 
> ```
> 
> **讨论**
> 
> 默认值为创建 UIDatePicker 对象的日期。在模式 UIDatePickerModeCountDownTimer 中忽略日期；对于该模式，日期选择器从 0:00 开始。设置此属性不会通过将轮子旋转到新的日期和时间来为日期选择器设置动画；为此，您必须使用 setDate:animated: 方法。

你需要像这样使用它：

```
NSDate *chosen = [datePicker date]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T05:49:07.930

```
- (IBAction)displayDay:(id)sender {

    NSDate *chosen = [yourdatepicker date];
      NSLog(@"%@",chosen);
} 
```

试试这样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T05:47:52.417

这样做

```
- (IBAction)displayDay:(id)sender 
{

  NSDate *chosen = [self.datePicker date];

} 
```

# php - ftp_login 期望参数 1 是资源

> ID：14700731
> 
> 赞同：6
> 
> 时间：2013-02-05T05:25:24.050
> 
> 标签：php, html, file, upload, ftp

我正在尝试使用 FTP 上传一些文件，但出现以下错误：

> 警告：ftp_login() 期望参数 1 是资源，在第 65 行的 /home/content/98/10339998/html/upload.php 中给出的布尔值 FTP 连接遇到错误！尝试连接到 thelegendmaker.net....

造成的：

```
// set up a connection to ftp server
$conn_id = ftp_connect("thelegendmaker.net");

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass); 
```

有谁知道为什么会这样？我试过不使用引号、双引号和单引号，但都没有。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T05:26:24.177

问题的根源在于，当[**`ftp_connect()`**](http://php.net/manual/en/function.ftp-connect.php)无法连接到 FTP 服务器时，它返回 FALSE 而不是它通常返回的资源链接标识符。使用 ping 检查您的 FTP 服务器是否处于活动状态

你可以这样做

```
if($conn_id){
     // login with username and password
     $login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T05:44:14.887

如果不成功，ftp_connect 将返回 false。这将导致您遇到的错误消息而不是您登录。

我建议使用条件来避免在连接失败时尝试登录。

您有几个选择：

```
// set up a connection to ftp server
$conn_id = ftp_connect("thelegendmaker.net") or die("Unable to connect to server.");

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass); 
```

或者

```
// set up a connection to ftp server
$conn_id = ftp_connect("thelegendmaker.net");

// login with username and password
if($conn_id !== false) $login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass); 
```

因为我从您的服务器收到了对 ping 的响应。我的猜测是你没有正确配置你的 FTP 服务器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T05:37:23.013

根据手册说明；

> 成功时返回 FTP 流，错误时返回 FALSE。

因此，您可以应用这样的简单过滤器；

```
$conn_id = ftp_connect("thelegendmaker.net");
if (false === $conn_id) {
    throw new Exception("FTP connection error!");
}
... 
```

# cuda - 在制作 CUDA 5.0 示例时遇到 Open MPI 相关问题 (Ubuntu 12.04)

> ID：14700733
> 
> 赞同：-1
> 
> 时间：2013-02-05T05:25:25.937
> 
> 标签：cuda, makefile, ubuntu-12.04, openmpi

```
Makefile:79: *** MPI not found, not building simpleMPI..  Stop. 
```

这个错误是我得到的错误......我看到了这个问题的 Mac 版本，但我使用的是 Ubuntu 12.04。有谁知道如何在 Ubuntu 12.04 上解决这个问题？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:46:32.577

您尚未安装所有依赖项来构建 CUDA 示例。使用以下命令在构建示例之前安装 MPI：

```
sudo apt-get install mpi-default-dev 
```

有关 CUDA 示例的依赖项列表，请参阅[本指南](http://www.r-tutor.com/gpu-computing/cuda-installation/cuda5.0-ubuntu)。

# sencha-touch-2 - 通过存储从 JSON 数组中获取 JSON 响应数据

> ID：14700735
> 
> 赞同：2
> 
> 时间：2013-02-05T05:25:59.307
> 
> 标签：sencha-touch-2

我们收到 JSON 格式的响应，但我们无法获取和打印数据。

```
var dstore = Ext.getStore('DomesticStore');
dstore.sync();
dstore.load();
console.log(dstore.getData().items);
// this line prints the output but unable to fetch inside array data. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:35:55.783

我有一个获取 JSON 数据的应用程序。当您获得商店时，请调用 on 方法。然后使用记录数组访问数据。

```
var Store1 = Ext.getStore('DomesticStore').on('load', function (store, records, successful, operation, eOpts) {   
        if(successful == false){
            console.log("Could not load store. ");
        }
        var e;

        for (var i = 0; i < records.length; i++) {
             e = records[i];
             console.log(e.get('elementname'));
        }
}); 
```

这将通过 JSON 数组并获取字段名称的每个值。

我的 JSON 数据看起来像这样

```
{   
    "countries": [
        {
            "name": "United States",
            "2001": 128500000,
            "2002": 141800000,
            "2003": 160637000,
            "2004": 184819000,
            "2005": 203700000,
            "2006": 229600000,
            "2007": 249300000,
            "2008": 261300000,
            "2009": 274300000,
            "2010": 278900000,
            leaf: true
        }
    ]
} 
```

我使用该代码从记录数组中获取每个国家，然后是每个国家的名称字段。

# .net - “引用程序集”如何验证“调用程序程序集”的签名/真实性？

> ID：14700740
> 
> 赞同：3
> 
> 时间：2013-02-05T05:26:49.987
> 
> 标签：.net, security, .net-assembly, digital-signature, authenticode

我的问题是关于在 .NET 程序集之间强制执行安全性。这是场景：

*   **Foundation**程序集部署在服务器上。
*   一系列**插件**程序集在应用程序中提供。
*   **插件**使用**Foundation**的功能。
*   由于**基金会**提供敏感操作和数据，它必须确保**插件**（调用者程序集）是真实的并且来自某个发布者。

我对安全性很陌生，对强命名和数字签名有基本的了解。因此，如果您能详细解释实现上述目标的可能方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:24:52.200

**编辑**

抱歉，再次阅读您的问题时，我了解到您无法控制插件。

您想根据调用它的程序集来限制基础程序集的使用。

不幸的是，除了检查敏感部分中的调用程序集之外，没有其他方法可以做到这一点。如果您避免使用公共静态成员，则可以在构造函数中进行检查。

```
public class SensitiveClass {
    private readonly byte[] SupplierXKey = new[] {...};

    public SensitiveClass() {
        var key = Assembly.CallingAssembly().GetName().GetPublicKey();

        if (!key.SequenceEqual(SupplierXKey)) {
            throw new SecurityException();
        }
    }
} 
```

请注意，此解决方案要求您的供应商也保护他们的代码。您可能需要扩展上面的代码来检查调用者的调用者等等。

* * *

**老错答案**

您是否使用 MEF 加载插件？

然后，您可以创建自己的目录，只允许使用特定密钥签名的程序集。

就像是：

```
public class OnlyAssembliesFromX : ComposablePartCatalog
{
    private readonly byte[] SupplierXKey = new[] {...};

    AggregateCatalog _catalog = new AggregateCatalog();

    public OnlyAssemblisFromX(string path) {
        foreach (var file in Directory.GetFiles(path)) {
            var key = AssemblyName.GetAssemblyName(file)
                                  .GetPublicKey();

            if (key.SequenceEqual(SupplierXKey)) {
                _catalog.Catalogs.Add(new AssemblyCatalog(file));
            }
        }
    }

    public override IQueryable<ComposablePartDefinition> Parts {
        get { return _aggregateCatalog.Parts; }
    }
} 
```

# iphone - 单视图到标签栏视图

> ID：14700741
> 
> 赞同：0
> 
> 时间：2013-02-05T05:26:53.940
> 
> 标签：iphone, ios6, uitabbarcontroller

如何从单个视图进入基于选项卡的视图，任何人都可以让我参考从单个视图以编程方式创建基于选项卡的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:35:22.467

首先创建文件中的所有对象`UIViewController`并使用以下方法`UINavigationController``AppDelegate.h``AppDelegate.m`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window=[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds ]];

    self.viewCon=[[ViewController alloc] init];
    self.navCon=[[UINavigationController alloc] initWithRootViewController:self.viewCon];
    self.navCon.navigationBar.tintColor=[UIColor blackColor];
    self.viewCon.title=@"First View";

    self.fView=[[FirstViewController alloc] init];
    self.FnavCon=[[UINavigationController alloc] initWithRootViewController:self.fView];
    self.FnavCon.navigationBar.tintColor=[UIColor blackColor];

    self.fView.title=@"Secound View";

    self.sView=[[SecoundViewController alloc] init];
    self.SnavCon=[[UINavigationController alloc] initWithRootViewController:self.sView];
    self.SnavCon.navigationBar.tintColor=[UIColor blackColor];
    self.sView.title=@"Third View";
    .
    .
    // create UIViewController and UINavigationController As you need 
    .
    .
    .
    UIImage *img1=[UIImage imageNamed:@"Australia.gif"];
    self.tbItem1=[[UITabBarItem alloc] initWithTitle:@"First Page" image:img1 tag:1];
    self.viewCon.tabBarItem=self.tbItem1;

    UIImage *img2=[UIImage imageNamed:@"Cameroon.gif"];
    self.tbItem2=[[UITabBarItem alloc] initWithTitle:@"Secound Page" image:img2 tag:2];
    self.fView.tabBarItem=self.tbItem2;

    UIImage *img3=[UIImage imageNamed:@"Canada.png"];
    self.tbItem3=[[UITabBarItem alloc] initWithTitle:@"Third Page" image:img3 tag:3];
    self.sView.tabBarItem=self.tbItem3;

    NSMutableArray *viewArr=[[NSMutableArray alloc] init];
    [viewArr addObject:self.navCon];
    [viewArr addObject:self.FnavCon];
    [viewArr addObject:self.SnavCon];

    self.tbCon=[[UITabBarController alloc] init];
    self.tbCon.viewControllers=viewArr;

    [self.window addSubview:tbCon.view];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

**我的代码是如何创建 TabBar 以及如何添加 ViewController 的基本演示，这可能对您有所帮助。**

**谢谢 ：）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:52:38.253

您可以从基于单一视图的应用程序创建标签栏应用程序。转到 xib 从对象添加 UITabbar 并添加它的委托。如果你这样做了，你必须把标签栏放在标签栏部分的每个视图中。这很简单，但增加了重复代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T05:32:08.013

您需要分配和初始化 UITabeBarController 并将其添加到您的视图控制器/ App Delegate 上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T05:32:22.507

您可以执行以下两项之一：

*   转到 AppDelegate.m 并将导航控制器更改为 TabBarController。然后您可以将任何您喜欢的视图添加到标签栏
*   创建一个基于 tabBar 的新 DEMO 应用程序（附件）![选项卡式应用程序](../Images/677a86688b880cba6829cc63b0e946fe.png)，然后您可以看到委托是如何工作的并复制您需要的代码。

# google-maps - 在 Google Maps 中使用 Clusterer API 时如何为每个标记添加标签

> ID：14700746
> 
> 赞同：0
> 
> 时间：2013-02-05T05:27:34.900
> 
> 标签：google-maps, google-maps-api-3, markerclusterer

> **可能重复：**
> [带有标签的 Google Maps API v3 标记](https://stackoverflow.com/questions/11043587/google-maps-api-v3-marker-with-label)

我使用 Google Maps Clusterer API 在地图上显示 100 多个标记。标记 lat、lon 值被添加到数组中并作为参数传递给 Clusterer API。我想为每个标记添加一个标签（如时间）。使用 Clusterer API 时如何为每个标记添加标签。

**我的代码：**

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?sensor=true">
    </script>
    <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js"></script>
    <script type="text/javascript">
      function initialize() {
        var wifimaplocation = [
                      ['BT Openzone Business Hub', 53.410133,-2.980967, 4],
                      ['BT Openzone Business Hub 2', 53.410581,-2.98513, 5],
                      ['BT Openzone Business Hub 3', 53.410341,-2.986254, 3],
                      ['Wireless Outdoor Coverage (L1 6ER)', 53.408816,-2.983669, 2],
                      ['Yates Bros Wine Lodge', 53.407319,-2.98397, 1],
                      ['BT Openzone Business Hub 4', 53.408373,-2.982217, 6],
                      ['BT Openzone Business Hub 5', 53.408926,-2.983751, 7],
                      ['Liverpool Marriot Hotel',53.408926,-2.983751, 8],
                      ['Wireless Outdoor Coverage (L1 1 St Johns Lane', 53.408563,-2.982344, 9],
                      ['Wireless Outdoor Coverage (L1 1 Roe St)', 53.407407,-2.981337, 10],
                      ['BT Openzone Business Hub 6', 53.40701,-2.981944, 11],
                      ['McDonald&#39s St Johns Precinct', 53.407121,-2.980573, 12],
                      ['BT Openzone Business Hub 7', 53.406705,-2.980839, 13],
                      ['BT Openzone Business Hub 8', 53.406859,-2.980066, 14],
                      ['Network Rail - Liverpool Lime Street', 53.408688,-2.9788, 15],
                      ['Wetherspoons', 53.405942,-2.979522, 16],
                      ['Crown', 53.406484,-2.978754, 17],
                      ['BT Openzone Business Hub 9', 53.406574,-2.978513, 18],
                      ['BT Openzone Business Hub 10', 53.406574,-2.978513, 19],
                      ['BT Openzone Business Hub 11', 53.406488,-2.978749, 20],
                      ['Wireless Outdoor Coverage (L3 5 Bolton St)', 53.405898,-2.97773, 21],
                      ['BT Openzone Business Hub 12', 53.408026,-2.977398, 22],
                      ['Wireless Outdoor Coverage (Skelhorne St)', 53.416157,-2.988889, 23],
                      ['McDonald&#39s (Ranelagh Street)', 53.404594,-2.977877, 24],
                      ['Wireless Outdoor Coverage (Renshaw St)', 53.404639,-2.977296, 25],
                      ['Wetherspoons', 53.405183,-2.980989, 26],
                      ['BT Openzone Business Hub 13', 53.405339,-2.979956, 27],
                      ['BT Openzone Business Hub 14', 53.404869,-2.97993, 28],
                      ['BT Openzone Business Hub 15', 53.403862,-2.979275, 29],
                      ['Brew Tea Bar', 53.403862,-2.979275, 30],
                      ['Starbucks Coffee', 53.404054,-2.980643, 31],
                      ['BT Openzone Business Hub 16', 53.404054,-2.980643, 32],
                      ['Office (Holmes Building Wood Street)', 53.404223,-2.981673, 33],
                      ['BT Openzone Business Hub 17', 53.403512,-2.980543, 34],
                      ['Djandos-Riff', 53.403512,-2.980543, 35],
                      ['Bar Liverpool Ltd', 53.403512,-2.980543, 36],
                      ['O Neills', 53.404174,-2.981809, 37],
                      ['BT Openzone Business Hub 18', 53.405538,-2.98094, 38],
                      ['Currys/PC World', 53.404789,-2.982451, 39],
                      ['BT Pay Phone (Church Street)', 53.405506,-2.982687, 40],
                      ['BT Openzone Business Hub 19', 53.406759,-2.98384, 41],
                      ['BT Openzone Business Hub 20', 53.406686,-2.984221, 42],
                      ['BT Openzone Business Hub 21', 53.406775,-2.98454, 43],
                      ['Cafe Nero', 53.407034,-2.98483, 44],
                      ['Ice', 53.406795,-2.98491, 45],
                      ['BT Openzone Business Hub 22', 53.406142,-2.984355, 46],
                      ['WiFi Pod Office', 53.402954,-2.984422, 47],
                      ['BT Openzone Business Hub 23', 53.403424,-2.984184, 48],
                      ['BT Openzone Business Hub 24', 53.404203,-2.984097, 49],
                      ['BT Openzone Business Hub 25', 53.404697,-2.985109, 50],
                      ['BT Openzone Business Hub 26', 53.403798,-2.985541, 51],
                      ['BT Openzone Business Hub 27',53.406863,-2.98583, 52],
                      ['McDonalds', 53.405218,-2.986485, 53],
                      ['WELKIN (Wetherspoons)', 53.405998,-2.985895, 54],
                      ['BT Openzone Business Hub 28', 53.405237,-2.98648, 55],
                      ['BT Openzone Business Hub 29', 53.405741,-2.986495, 56],
                      ['1Pco Lord Street Liverpool', 53.405183,-2.98649, 57],
                      ['BT Openzone Business Hub 30', 53.405132,-2.987064, 58],
                      ['BT Openzone Business Hub 31', 53.403868,-2.987311, 59],
                      ['BT Openzone Business Hub 32', 53.403894,-2.98648, 60],
                      ['Liverpool Moat House', 53.401345,-2.985981, 61],
                      ['Wireless Outdoor Coverage (Paradise Street)', 53.401345,-2.985981, 62],
                      ['Starbucks 2', 53.402583,-2.986039, 63],
                      ['John Lewis', 53.402963,-2.986796, 64],
                      ['BT Openzone Business Hub 33', 53.402986,-2.98442, 65],
                      ['Cafe Nero', 53.404462,-2.984958, 66],
                      ['BT Openzone Business Hub 34', 53.406296,-2.99516, 67],
                      ['BT Openzone Business Hub 35', 53.404654,-2.991283, 68],
                      ['Wireless Outdoor Coverage (James Street)', 53.404654,-2.991283, 69],
                      ['BT Openzone Business Hub 36', 53.405285,-2.99319, 70],
                      ['BT Openzone Business Hub 37', 53.405608,-2.99139, 71],
                      ['BT Openzone Business Hub 38', 53.405682,-2.991801, 72],
                      ['Brunswick Street', 53.40619,-2.992869, 73],
                      ['Wireless Outdoor Coverage (Brunswick Street)', 53.40619,-2.992869, 74],
                      ['Heywood House Hotel', 53.406695,-2.988615, 75],
                      ['BT Openzone Business Hub 39', 53.406657,-2.990288, 76],
                      ['BT Openzone Business Hub 40', 53.408013,-2.988277, 77],
                      ['BT Openzone Business Hub 41', 53.408262,-2.98766, 78],
                      ['Premier Inn - Liverpool City Centre', 53.409174,-2.988051, 79],
                      ['BT Openzone Business Hub 42', 53.409295,-2.987504, 80],
                      ['BT Openzone Business Hub 43', 53.409577,-2.988051, 81],
                      ['BT Openzone Business Hub 44', 53.409922,-2.987174, 82],
                      ['Liverpool - Hatton Garden / Tithebarn Street', 53.410632,-2.987276, 83],
                      ['BT Openzone Business Hub 45', 53.410302,-2.98627, 84],
                      ['Wireless Outdoor Coverage - Liverpool (Hatton Garden)', 53.410302,-2.98627, 85],
                      ['BT Openzone Business Hub 46', 53.410993,-2.986823, 86],
                      ['BT Openzone Business Hub 47', 53.410542,-2.985216, 87],
                      ['Brunswick Vaults', 53.410376,-2.989443, 88],
                      ['BT Openzone Business Hub 48', 53.410168,-2.98884, 89],
                      ['BT Openzone Business Hub 49', 53.410389,-2.989615, 90],
                      ['BT Openzone Business Hub 50', 53.408943,-2.990245, 91],
                      ['Railway', 53.408969,-2.990422, 92],
                      ['BT Openzone Business Hub 51', 53.408787,-2.991678, 93],
                      ['BT Openzone Business Hub 52', 53.408774,-2.994178, 94],
                      ['BT Openzone Business Hub 53', 53.405682,-2.978199, 95],
                      ['Brew Tea Bar', 53.410159,-2.993776, 96],
                      ['BT Openzone Business Hub 54', 53.410159,-2.993776, 97],
                      ['Cross Keys Public House', 53.409916,-2.993743, 98],
                      ['BT Openzone Business Hub 55', 53.404812,-2.977298, 99],
                      ['BT Openzone Business Hub 56', 53.404313,-2.976676, 100],
                      ['BT Openzone Business Hub 57', 53.404697,-2.976611, 101],
                      ['stayCity Liverpool Mount Pleasant', 53.405183,-2.976314, 102],
                      ['BT Openzone Business Hub 58', 53.405132,-2.976547, 103],
                      ['BT Openzone Business Hub 59', 53.404275,-2.973522, 104],
                      ['BT Openzone Business Hub 60', 53.404646,-2.972556, 105],
                      ['BT Openzone Business Hub 61', 53.404518,-2.972341, 106],
                      ['BT Openzone Business Hub 62', 53.404607,-2.971161, 107],
                      ['Wireless Outdoor Coverage (Brownlow Hill)', 53.403878,-2.97129, 108],
                      ['BT Openzone Business Hub 63', 53.40526,-2.967471, 109],
                      ['Starbucks', 53.41154,-2.965196, 110],
                      ['BT Openzone Business Hub 64', 53.410888,-2.967041, 111],
                      ['Liverpool - London Road', 53.409455,-2.97659, 112],
                      ['BT Openzone Business Hub 65', 53.41012,-2.969573, 113],
                      ['Wireless Outdoor Coverage (Pembroke Place)', 53.409238,-2.971505, 114]
                    ];
        /*var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);*/
            var center = new google.maps.LatLng(53.410133,-2.980967);
            var options = {
              'zoom': 13,
              'center': center,
              'mapTypeId': google.maps.MapTypeId.ROADMAP
            };

            var map = new google.maps.Map(document.getElementById("map_canvas"), options);

            var markers = [];
            console.log(wifimaplocation.length);
            for (var i = 0; i < wifimaplocation.length; i++) {
                console.log(wifimaplocation[i]);
                var mylocation=wifimaplocation[i];
              //var latLng = new google.maps.LatLng(data.photos[i].latitude,data.photos[i].longitude);
              var latLng = new google.maps.LatLng(mylocation[1], mylocation[2]);
              var marker = new google.maps.Marker({'position': latLng});
              markers.push(marker);
              console.log(i);
              mylocation=null;
            }

            var mcOptions = {gridSize: 50, maxZoom: 25};

            var markerCluster = new MarkerClusterer(map, markers,mcOptions);
      }

    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:27:54.923

您可以在添加纬度的同一数组中为每个标记添加标签。稍后我会尝试在 jsfiddle 上放一个示例，但如果你有你的代码，它可能更容易帮助和添加它。

# openerp - 如何在 opnERP7 中安装新模块？

> ID：14700753
> 
> 赞同：2
> 
> 时间：2013-02-05T05:28:11.283
> 
> 标签：openerp, prestashop

我在[https://launchpad.net/openerp-prestashop-sync](https://launchpad.net/openerp-prestashop-sync)下载了一个模块（用于在 prestashop 和 openERP 之间同步数据）并尝试安装在 openERP7 中。但它不能正常工作。

另外，我想向您提供有关我的要求的更多详细信息：

我的要求是——我们需要一个插件来同步 openERP 和 prestashop 之间的数据，因此我用谷歌搜索并在[https://launchpad.net/openerp-prestashop-sync](https://launchpad.net/openerp-prestashop-sync)找到了一个 URL，还下载了一个“techreceptives-openerp_prestashop_sync-670b2669c27b.zip”文件。

之后，下载 openerp 即 openerp-allinone-setup-6.0-latest.exe 并将其安装在我的 Windows 机器上。

要将新模块/插件添加到 openERP，我在“Server\server\openerp\addons”下创建了新文件夹“openerp_prestashop_sync”，然后从 zip 中提取源文件，即 techreceptives-openerp_prestashop_sync-670b2669c27b.zip。完成此设置后，我重新启动了 openERP 的服务。但它显示错误消息为“未找到处理程序”。

我的问题是：1.如何将新模块/插件安装到openERP中以正常运行？2.设置新模块时有什么步骤吗？如果是这样，请提供相同的。对我会更有帮助。3\. 在 openERP 中 – 是否有针对 1) 的特定 Web 服务。产品进出口 2.销售订单。

谁能帮我在两个系统（openERP vs prestashop）之间同步数据？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:25:01.760

目前的发展是：[Bitbucket：openerp-prestashop-connector](https://bitbucket.org/techreceptives/openerp_prestashop_sync) 它也适用于`openerp6.1`.

# android - LocationManager requestLocationUpdates 不起作用

> ID：14700755
> 
> 赞同：5
> 
> 时间：2013-02-05T05:28:15.103
> 
> 标签：android

我有这个令人毛骨悚然的问题。我正在尝试获取我的模拟器的位置。当我获得模拟器的位置时，它工作正常。但是当我改变我的位置坐标时，什么也没有发生。`gps`工作正常。

这是我的代码

**主.java**

```
import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;

import android.util.Log;
import android.view.Menu;
import android.widget.TextView;

public class Main extends Activity {
TextView tvStatus;
LocationManager lm;
boolean gpsEnabled;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tvStatus = (TextView) findViewById(R.id.textView1);

    lm = (LocationManager) getSystemService(LOCATION_SERVICE);
    if (lm.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
        Log.d("", "GPS is Active");
        Location l = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        tvStatus.setText(l.getLatitude()+" , "+l.getLongitude());
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                new LocationListener() {

                    @Override
                    public void onStatusChanged(String arg0, int arg1,
                            Bundle arg2) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onProviderEnabled(String arg0) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onProviderDisabled(String arg0) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onLocationChanged(Location arg0) {
                        tvStatus.setText("GPS ENABLED: " + gpsEnabled
                                + "\nLatitude: " + arg0.getLatitude()
                                + "\nLongitude: " + arg0.getLongitude());
                    }
                });
    }

}

    } 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.enabelinglocationprovider"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="5"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.enabelinglocationprovider.Main"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-10T14:12:27.860

三星手机就有这个问题。这是有技巧的。您需要踢屁股上的 locationmanager 以从地图缓存中获取最新位置。

```
God.locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
            new LocationListener() {
                @Override
                public void onStatusChanged(String provider, int status, Bundle extras) {
                }

                @Override
                public void onProviderEnabled(String provider) {
                }

                @Override
                public void onProviderDisabled(String provider) {
                }

                @Override
                public void onLocationChanged(final Location location) {
                }
            });
    currentLocation = God.locationManager
            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
```

`getLastKnownLocation`踢完 0 后调用`requestLocationUpdates`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T14:08:22.140

它发生在模拟器上，请尝试重新启动模拟器。

或者，关闭 eclipse 和 emulator 并重新启动

# iphone - Store JSON Data (get from .txt file) in Database

> ID：14700756
> 
> 赞同：0
> 
> 时间：2013-02-05T05:28:20.330
> 
> 标签：iphone, ios, objective-c, json

**I am new at iPhone Development.**

I know how to store `JSON` data in database. **But in my case** I have `.txt file` which contain data of `JSON`. This `.txt file` i get by send request on Server and i got it as .zip file and after i did it as unzip file so after i get it as .txt file with JSON data. I get this data from `.txt` file but i dont know how to store it in database.I want to stor this data in DATABASE. How cant i do anybody as idea ???

**Data of .txt file of JSON (*Display in Console*)**

> "Ok","last_response_date":"2013-02-05 00:04:14","**region_master**":[{"id":"1","region_name":"Auckland and Kermadec","border_coordinate_file":"","created_date":"2013-02-01 05:22:42","updated_date":"0000-00-00 00:00:00"},{"id":"2","region_name":"Central","border_coordinate_file":"","created_date":"2013-02-01 05:22:42","updated_date":"0000-00-00 00:00:00"},{"id":"3","region_name":"Challenger","border_coordinate_file":"","created_date":"2013-02-01 05:22:57","updated_date":"0000-00-00 00:00:00"},{"id":"4","region_name":"Fiordland","border_coordinate_file":"","created_date":"2013-02-01 05:22:57","updated_date":"0000-00-00 00:00:00"},{"id":"5","region_name":"South East","border_coordinate_file":"","created_date":"2013-02-01 05:23:15","updated_date":"0000-00-00 00:00:00"},{"id":"6","region_name":"Southland","border_coordinate_file":"","created_date":"2013-02-01 05:23:15","updated_date":"0000-00-00 00:00:00"}],
> "**region_kml_files**":
> [{"id":"4","region_id":"2","kml_files":"Sample.kml","created_date":"2013-01-25 09:04:58","updated_date":"0000-00-00 00:00:00"}]

**EDIT :**

* * *

I already got data from `.txt file`

* * *

please help me..
Thanks :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:33:13.063

You can use:

```
 NSString *jsonString  = [NSString stringWithContentsOfFile:yourFilePath encoding:UTF8StringEncoding error:nil]; 
```

Here:

`yourFilePath` is a NSString which contains the exact path to the .txt file.

You get the file content in `jsonString` variable, you need to save that string to database.

Refer [NSString](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html) class for more

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:04:46.153

I don't know where you are having trouble, but it seems like you haven't gotten a JSON object from your string yet, so I will let you know how to do that. If you need to know how to create and store data in a database, then you need to make a new question and say that you got JSON data but are having trouble storing it into a database (at least make an effort to try to do it though).

You can use `NSJSONSerialization` to get an object out of your string (the `NSData` version of your string, at least). It will look like this:

```
NSDictionary *jsonDic = [NSJSONSerialization JSONObjectWithData:yourData options:kNilOptions error:nil]; 
```

If it doesn't work then your JSON is not valid. Validate it at [http://www.jsonlint.com](http://www.jsonlint.com)

# java - 如何使用java更改nimbus外观的背景颜色

> ID：14700758
> 
> 赞同：4
> 
> 时间：2013-02-05T05:28:39.020
> 
> 标签：java, swing, look-and-feel, nimbus

在 Java Swing 应用程序中，我正在尝试 nimbus 的外观和感觉。它在 JdesktopPane 控件中看起来很棒，但我希望我的所有桌面窗格具有不同的颜色，但主题很好。

有什么方法可以改变 Nimbus 外观的背景颜色吗？

这是应用 nimbus 外观的示例代码。

```
 try {
        for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
          if ("Nimbus".equals(info.getName())) {
          UIManager.setLookAndFeel(info.getClassName());
          break;
         }
        }
       }  
     catch (Exception e) {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T05:43:47.757

```
UIManager.put("nimbusBase", new Color(...));
UIManager.put("nimbusBlueGrey", new Color(...));
UIManager.put("control", new Color(...)) 
```

来自[l&f 教程](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T07:30:35.560

Nimbus 使用看起来像矢量类型的绘图例程来绘制背景，以绘制精美的背景图案。要在 nimbus 的情况下更改 JDesktopPane 的背景，您需要更改 JDesktopPane 使用的背景 Painter 以简单地用您需要的背景颜色（例如灰色）填充窗格。然后`"DesktopPane[Enabled].backgroundPainter"`使用该 Painter 对象设置属性。例如观看下面给出的代码：

```
import java.awt.Graphics2D;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JDesktopPane;
import javax.swing.SwingUtilities;
import javax.swing.UIDefaults;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;
import com.sun.java.swing.Painter;
import java.awt.Color;

public class NimbusFrame extends JFrame
{
    private JDesktopPane desktop;
    public void prepareAndShowGUI()
    {
        desktop = new MyDesktopPane();
        getContentPane().add(desktop);
        setSize(300,400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    class MyDesktopPane extends JDesktopPane
    {
        @Override
        public void updateUI() 
        {
            if ("Nimbus".equals(UIManager.getLookAndFeel().getName())) 
            {
                UIDefaults map = new UIDefaults();
                Painter<JComponent> painter = new Painter<JComponent>() 
                {
                    @Override
                    public void paint(Graphics2D g, JComponent c, int w, int h) 
                    {
                        g.setColor(Color.gray);
                        g.fillRect(0, 0, w, h);
                    }
                };
                map.put("DesktopPane[Enabled].backgroundPainter", painter);
                putClientProperty("Nimbus.Overrides", map);
            }
            super.updateUI();
        }
    }
    public static void main(String st[])
    {
        try
        {
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) 
            {
                    if ("Nimbus".equalsIgnoreCase(info.getName())) 
                {
                        UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
        }catch(Exception ex){}
        SwingUtilities.invokeLater( new Runnable()
        {
            public void run()
            {
                NimbusFrame frame = new NimbusFrame();
                frame.prepareAndShowGUI();
            }
        });
    }
} 
```

# ios - 将 youtube 视频嵌入 UIView/UIWebView

> ID：14700759
> 
> 赞同：1
> 
> 时间：2013-02-05T05:28:41.793
> 
> 标签：ios, video, uiview, uiwebview, youtube

我正在尝试将 YouTube 视频嵌入到 UIView 中，但我不知道为什么视频左上角有这个白色边框。我还设置了 frameborder = 0。不应该有任何白色边框。

这是嵌入 youtube 视频的代码：我对 UIWebview 和 UIView 都进行了尝试...仍然是相同的结果...

```
NSString *embedHTML = @"<span style=\"background-color: #fdeee0;\"><iframe width=\"256\" title=\"YouTube video player\" src=\"http://www.youtube.com/embed/KzN6XWDEmXI?HD=1;rel=0;showinfo=0;controls=1\" height=\"200\" frameborder=\"0\"></iframe>";

    [testWeb loadHTMLString:embedHTML baseURL:nil];
    testWeb.scrollView.scrollEnabled = NO;
    testWeb.scrollView.bounces = NO;
testWeb.contentMode = UIViewContentModeScaleAspectFill;

[test setImage:image];
//[self.view addSubview:test];
self.testView.backgroundColor = [UIColor orangeColor];
[self.testView addSubview:test];
[self.testView addSubview:testWeb]; 
```

这是一个屏幕截图：

![在此处输入图像描述](../Images/89ac18ca8c7527ed6f10f2ec01672622.png)

![在此处输入图像描述](../Images/0176a15e9017ae11e6eef7c55070c1c7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:17:13.890

testWeb.scalePageToFit = 是；

[http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instp/UIWebView/scalesPageToFit](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instp/UIWebView/scalesPageToFit)

# android - 片段活动中的空指针异常？

> ID：14700761
> 
> 赞同：-2
> 
> 时间：2013-02-05T05:28:57.617
> 
> 标签：android, android-tabhost

我们知道选项卡 Activity 现在已弃用，所以一些教程说我改用 FragmentActivity 。我正在使用它，它在这一行给了我空指针异常

```
 tabHost.addTab(spec); 
```

我的代码如下。

//MainActivity.java

```
public class MainActivity extends FragmentActivity  {
public final static int HOME = 1;
public final static int CAMPUS = 2;
public final static int REPORTING = 3;
public final static int HELP = 4;
public final static int WISH = 5;
long transactionID = -1;
public static TabHost tabHost;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mytabs);
    MyView view = null;

    tabHost = (TabHost)findViewById(R.id.my_tabhost);
    TabHost.TabSpec spec;
    Intent intent;

    intent = new Intent().setClass(this, TabGroup1Activity.class);
    view = new MyView(this, R.drawable.home, R.drawable.home_blue, "");
    view.setFocusable(true);
    spec = tabHost.newTabSpec("Home").setIndicator(view).setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, TabGroup2Activity.class);
    view = new MyView(this, R.drawable.home, R.drawable.home_blue, "");
    view.setFocusable(true);
    spec = tabHost.newTabSpec("Campus").setIndicator(view)
            .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, TabGroup3Activity.class);
    view = new MyView(this, R.drawable.home, R.drawable.home_blue, "");
    view.setFocusable(true);
    spec = tabHost.newTabSpec("Reporting").setIndicator(view)
            .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, TabGroup4Activity.class);
    view = new MyView(this, R.drawable.home, R.drawable.home_blue, "");
    view.setFocusable(true);
    spec = tabHost.newTabSpec("Help").setIndicator(view)
            .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, TabGroup5Activity.class);
    view = new MyView(this, R.drawable.home, R.drawable.home_blue, "");
    view.setFocusable(true);
    spec = tabHost.newTabSpec("Wish").setIndicator(view).setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);
    tabHost.getTabWidget().getChildAt(0).getLayoutParams().height = LayoutParams.WRAP_CONTENT;
    tabHost.getTabWidget().getChildAt(1).getLayoutParams().height = LayoutParams.WRAP_CONTENT;
    tabHost.getTabWidget().getChildAt(2).getLayoutParams().height = LayoutParams.WRAP_CONTENT;
    tabHost.getTabWidget().getChildAt(3).getLayoutParams().height = LayoutParams.WRAP_CONTENT;
    tabHost.getTabWidget().getChildAt(4).getLayoutParams().height = LayoutParams.WRAP_CONTENT;

    tabHost.getTabWidget().getChildAt(0).getLayoutParams().width = LayoutParams.WRAP_CONTENT;
    tabHost.getTabWidget().getChildAt(1).getLayoutParams().width = LayoutParams.WRAP_CONTENT;
    tabHost.getTabWidget().getChildAt(2).getLayoutParams().width = LayoutParams.WRAP_CONTENT;
    tabHost.getTabWidget().getChildAt(3).getLayoutParams().width = LayoutParams.WRAP_CONTENT;
    tabHost.getTabWidget().getChildAt(4).getLayoutParams().width = LayoutParams.WRAP_CONTENT;

    if (MyApp.getFrom().equals("Home")) {
        tabHost.setCurrentTab(0);
    } else if (MyApp.getFrom().equals("Campus")) {
        tabHost.setCurrentTab(1);
    } else if (MyApp.getFrom().equals("Reporting")) {
        tabHost.setCurrentTab(2);
    } else if (MyApp.getFrom().equals("Help")) {
        tabHost.setCurrentTab(3);
    } else if (MyApp.getFrom().equals("Wish")) {
        tabHost.setCurrentTab(4);
    }

    int type = 0;
    if (getIntent().getExtras() != null) {
        if (getIntent().getExtras().containsKey("from")) {
            type = getIntent().getExtras().getInt("from");
            switch (type) {
            case HOME:
                tabHost.setCurrentTab(0);
            case CAMPUS:
                tabHost.setCurrentTab(1);
            case REPORTING:
                tabHost.setCurrentTab(2);
            case HELP:
                tabHost.setCurrentTab(3);
            case WISH:
                tabHost.setCurrentTab(4);
            default:
                tabHost.setCurrentTab(0);
            }
        }
    }
}

public long getTransactionID() {
    return transactionID;
}

public void setTransactionID(long l) {
    transactionID = l;
}

public void switchTabSpecial(int tab) {
    tabHost.setCurrentTab(tab);
}

class ChangeTabReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        tabHost = (TabHost)findViewById(R.id.my_tabhost);
        tabHost.setCurrentTab(1);
    }
}

private class MyView extends LinearLayout {
    ImageView iv;

    public MyView(Context c, int drawable, int drawableselec, String label) {
        super(c);

        iv = new ImageView(c);
        StateListDrawable listDrawable = new StateListDrawable();
        listDrawable.addState(SELECTED_STATE_SET, this.getResources()
                .getDrawable(drawable));
        listDrawable.addState(ENABLED_STATE_SET, this.getResources()
                .getDrawable(drawableselec));
        iv.setImageDrawable(listDrawable);
        iv.setBackgroundColor(Color.TRANSPARENT);
        iv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT, (float) 0.0));
        setGravity(Gravity.CENTER);
        addView(iv);
    }
} 
```

}

//mytabs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TabHost
    android:id="@+id/my_tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="0dp" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:padding="0dp" >
        </FrameLayout>

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>
</TabHost> 
```

// 错误

```
02-05 10:57:22.301: E/AndroidRuntime(911): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ccc.loyolacollege/com.ccc.loyolacollege.MainActivity}: java.lang.NullPointerException
02-05 10:57:22.301: E/AndroidRuntime(911):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
02-05 10:57:22.301: E/AndroidRuntime(911):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
02-05 10:57:22.301: E/AndroidRuntime(911):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
02-05 10:57:22.301: E/AndroidRuntime(911):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
02-05 10:57:22.301: E/AndroidRuntime(911):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-05 10:57:22.301: E/AndroidRuntime(911):  at android.os.Looper.loop(Looper.java:137)
02-05 10:57:22.301: E/AndroidRuntime(911):  at android.app.ActivityThread.main(ActivityThread.java:4424)
02-05 10:57:22.301: E/AndroidRuntime(911):  at java.lang.reflect.Method.invokeNative(Native Method)
02-05 10:57:22.301: E/AndroidRuntime(911):  at java.lang.reflect.Method.invoke(Method.java:511)
02-05 10:57:22.301: E/AndroidRuntime(911):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-05 10:57:22.301: E/AndroidRuntime(911):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-05 10:57:22.301: E/AndroidRuntime(911):  at dalvik.system.NativeStart.main(Native Method)
02-05 10:57:22.301: E/AndroidRuntime(911): Caused by: java.lang.NullPointerException
02-05 10:57:22.301: E/AndroidRuntime(911):  at android.widget.TabHost.addTab(TabHost.java:229)
02-05 10:57:22.301: E/AndroidRuntime(911):  at com.ccc.loyolacollege.MainActivity.onCreate(MainActivity.java:38)
02-05 10:57:22.301: E/AndroidRuntime(911):  at android.app.Activity.performCreate(Activity.java:4465)
02-05 10:57:22.301: E/AndroidRuntime(911):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-05 10:57:22.301: E/AndroidRuntime(911):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:40:47.933

您尚未初始化 TabHost。在 onCreate() 中添加以下行。

> ```
> tabHost = getTabHost(); 
> ```

还将布局文件`TabHost`id 更改为`android:id="@android:id/tabhost"`.

看看我下面的布局。

> ```
>  <?xml version="1.0" encoding="utf-8"?>
>    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>           android:layout_width="fill_parent"
>           android:layout_height="fill_parent"
>           android:orientation="vertical" >
>    <TabHost
>        android:id="@android:id/tabhost"
>        android:layout_width="fill_parent"
>        android:layout_height="fill_parent" >
> <LinearLayout
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:orientation="vertical"
>     android:padding="0dp" >
>     <FrameLayout
>         android:id="@android:id/tabcontent"
>         android:layout_width="fill_parent"
>         android:layout_height="0dip"
>         android:layout_weight="1"
>         android:padding="0dp" >
>     </FrameLayout>
>    <TabWidget
>         android:id="@android:id/tabs"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:gravity="center|center" 
>         android:tabStripEnabled="false"/>       
> </LinearLayout>
>   </TabHost>
>  </LinearLayout> 
> ```

并在您的活动中扩展`TabActivity`而不是。`FragmentActivity`然后运行您的应用程序。

我希望它会帮助你。

谢谢。

# windows-server-2003 - 无法在 Windows Server 2003 上启动 virtuoso

> ID：14700762
> 
> 赞同：1
> 
> 时间：2013-02-05T05:28:59.963
> 
> 标签：windows-server-2003, virtuoso

我已经在 windows server 2003 上安装了开源 virtuoso。

我遵循了链接[openlinksw](http://virtuoso.openlinksw.com/dataspace/dav/wiki/Main/VOSUsageWindows)上给出的所有说明，即使已经创建了服务实例，我也可以看到服务列表，但是每当我尝试启动服务时，它都会给我以下错误：

> 无法在本地计算机上启动 Open Link virtuoso 服务器“Virt”服务。错误 193:0xc1。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:32:44.240

您正在运行以启动 Virtuoso Server 的实际命令是什么？它是从哪里运行的？

请检查您安装的“数据库”目录中的“virtuoso.log”文件，了解它可能无法启动的原因。

尝试启动 Virtuoso 以验证基本可操作性的最简单方法是在命令提示符下从安装的“数据库”目录运行以下命令：

..\virtuoso-t -f

这将以前台调试模式启动它，您可以看到正在进行的启动尝试...

# c# - 在 C# 中从 Excel 导入

> ID：14700765
> 
> 赞同：2
> 
> 时间：2013-02-05T05:29:06.057
> 
> 标签：c#, asp.net, excel, import

我使用以下代码将数据从 excel 文件保存到表中

```
private void RetrieveAndStoreExcelData(String filePath)
{
    String excelConnectionStr = "Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source='" + filePath + "'; Extended Properties='Excel 8.0;'";
    OleDbConnection excelConnection = new OleDbConnection(excelConnectionStr);
    excelConnection.Open();

    try
    {
        //Get the name of the first worksheet
        DataTable schema = excelConnection.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
        if (schema == null || schema.Rows.Count < 1)
        {
            throw new Exception("Error: Could not determine the name of the first worksheet.");
        }
        string firstSheetName = schema.Rows[0]["TABLE_NAME"].ToString();

        //Retrieve data from worksheet into reader
        string query = "SELECT * FROM [" + firstSheetName + "]";
        OleDbCommand command = new OleDbCommand(query, excelConnection);
        OleDbDataReader dbReader = command.ExecuteReader();  //IEnumerable

        //populate IEnumerable
        if (dbReader.HasRows)
        {
            populateRecords(dbReader);
        }
    }
    finally
    {
        excelConnection.Close();
    }
} 
```

这工作正常。但是，如果其中一个字段的长度大于 255 个字符，那么它会将字符串截断为 255，这也是该行出现在 excel 表中的第 10 行之后的情况。

因此，如果前 10 行的长度小于 255，则假定所有行的长度都小于 255 个字符。

那么有什么办法可以解决这个问题吗？

# php - 使用 ajax、php 从数据库和自动填充文本框填充

> ID：14700769
> 
> 赞同：0
> 
> 时间：2013-02-05T05:29:26.670
> 
> 标签：php, ajax

关于这个主题，我遇到了一个小问题。当我在上一个文本字段中键入一个 id 值时，我编写了一个代码来从数据库值中自动填充文本框。即如果我输入用户 ID，下一个文本字段将自动从数据库中填充，而无需在 ajax 和 php 中刷新.我的问题是我在我的代码中找不到错误。帮我找出来。这是我的代码：

```
 **a.html**

     <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
      <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
     <title>Untitled Document</title>
   <script type="text/javascript">

   var url = "getagentids.php?param=";

    function handleHttpResponse() {
    if (http.readyState == 4) {
     results = http.responseText.split(",");
       document.getElementById('agfn').value = results[0];
       document.getElementById('agsal').value = results[1];
       document.getElementById('agtel').value = results[2];
       document.getElementById('agid').value = results[3];
     }
    }

    function getagentids() {
    var idValue = document.getElementById("agid").value;
    var myRandom=parseInt(Math.random()*99999999);  // cache buster
    http.open("GET", url + escape(idValue) + "&rand=" + myRandom, true);
    http.onreadystatechange = handleHttpResponse;
    http.send(null);
    }

    function getHTTPObject() {
    var xmlhttp;
    /*@cc_on
     @if (@_jscript_version >= 5)
      try {
          xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
          } catch (e) {
          try {
              xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
              } catch (E) {
              xmlhttp = false;
              }
          } 
     @else
      xmlhttp = false;
     @end @*/
    if (!xmlhttp && typeof XMLHttpRequest != 'undefined') {
     try {
       xmlhttp = new XMLHttpRequest();
       } catch (e) {
        xmlhttp = false;
        }
       }
       return xmlhttp;
      }

  var http = getHTTPObject(); // We create the HTTP Object

 </script>
    </head>

     <body>
    <form name="schform"> 
      <table> 
     <tr> 
    <td>Contact ID:</td> 
    <td><input id="agid" type="text" name="contactid" onKeyUp="getagentids();"></td> 
   </tr><tr> 
   <td>Tel Number:</td> <td><input id="agtel" type="text" name="contacttel"></td> 
    </tr><tr>
   <td>Name:</td> <td><input id="agfn" type="text" name="contactfullname"></td> 
  </tr><tr>
 <td>Salutation:</td> <td><input id="agsal" type="text" name="contactsalutation"></td> 
 </tr> 
 <tr>  <td><input type="reset" value="Clear"></td> 
<td></td> 
 </tr> 
</table> 
 </form>
 </body>
 </html>

  **getagentids.php**

        <?php

        $link = mysql_connect('localhost', 'arbiocua_mita', 'asd123$'); 
        if (!$link) 
        {
        die('Could not connect: ' . mysql_error());
         }
         mysql_select_db('arbiocua_monomita');

        //$param=intval($_GET['contactid']); 

          if(strlen($param)>0)
          { 
            $result = mysql_query("SELECT ContactFullName, ContactSalutation,   ContactTel FROM contact WHERE ContactID LIKE '$param%'"); 
                if(mysql_num_rows($result)==1) 
                   { 
              while($myrow = mysql_fetch_array($result))
             { 
           $agentname = $myrow["ContactFullName"]; 
            $agenttel = $myrow["ContactTel"]; 
           $agentsal = $myrow["ContactSalutation"]; 
           $agentid = $myrow["ContactID"]; 
           $textout = $agentname.",".$agentsal.",".$agenttel.",".$agentid; 
           } } 
           else { $textout=" , , ,".$param; 
           } } 
        echo $textout;

       ?>

  **database**:

   table name 'contact'
    ContactID   ContactFullName     ContactSalutation   ContactTel 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:39:59.857

`$textout=json_encode($textout)` 然后`echo $textout`

# sql - 使用 SQL Server 进行自然排序

> ID：14700770
> 
> 赞同：1
> 
> 时间：2013-02-05T05:29:32.497
> 
> 标签：sql, sql-server-2008, natural-sort

我想用下面的列名转换值的顺序`PTNT_VST_CSNO`：

```
VMIP1
VMIP10
VMIP11
VMIP2
VMIP20
VMIP21
VMIP3
VMIP31
VMIP32
VMIP5
VMIP6
VMIP7
VMIP8
VMIP9
VMOP10
VMOP11
VMOP12
VMOP3
VMOP30
VMOP31
VMOP32
VMOP4
VMOP40
VMOP41
VMOP42
VMOP43
VMOP7
VMOP70
VMOP71
VMOP8
VMOP9 
```

到：

```
VMIP1
VMIP2
VMIP3
VMIP5
VMIP6
VMIP7
VMIP8
VMIP9
VMIP10
VMIP11
VMIP20
VMIP21
VMIP31
VMIP32
VMOP3
VMOP4
VMOP7
VMOP8
VMOP9
VMOP10
VMOP11
VMOP12
VMOP30
VMOP31
VMOP32
VMOP40
VMOP41
VMOP42
VMOP43
VMOP70
VMOP71 
```

我想先对“vmip”的数字部分进行排序，然后再对“vmop”的数字部分进行排序。我尝试了很多，但每次都失败了。请帮我解决排序问题......提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:00:24.397

不是世界上最快的事情，但它应该可以完成工作：

```
ORDER BY CASE WHEN PTNT_VST_CSNO LIKE 'vmi%' THEN 0 ELSE 1 END
        ,CAST(replace(replace(PTNT_VST_CSNO, 'vmip', ''), 'vmop', '') as int) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T07:33:00.020

经过一番尝试，我成功地通过以下方式解决了它。

```
SELECT ptnt_vst_csno 
FROM   table_name 
ORDER  BY Substring(ptnt_vst_csno, 1, Charindex('P', ptnt_vst_csno)), 
          CONVERT(INT, Substring(Substring(ptnt_vst_csno, 
                                 Charindex('P', ptnt_vst_csno), 
                                 Len( 
                                              ptnt_vst_csno)), 2, Len( 
                       ptnt_vst_csno))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:05:49.317

完成此操作的最简单方法是将您的编号更改为 3 位数。

即 1 将变为 001，2 将变为 002，10 将变为 010，依此类推...

这将允许您正确订购数据。

你可能想做这样的事情：

```
SELECT
  PTNT_VST_CSNO,
  'VMIP' + CASE LEN(REPLACE(PTNT_VST_CSNO, 'VMIP', ''))
    WHEN 1 THEN '00' + REPLACE(PTNT_VST_CSNO, 'VMIP', '')
    WHEN 2 THEN '0' + REPLACE(PTNT_VST_CSNO, 'VMIP', '')
    ELSE REPLACE(PTNT_VST_CSNO, 'VMIP', '')
  END
FROM
  TableName
WHERE
  LEFT(PTNT_VST_CSNO, 4) = 'VMIP'
ORDER BY
  2 
```

# linux - 英特尔上 Linux 的开端

> ID：14700772
> 
> 赞同：-2
> 
> 时间：2013-02-05T05:29:42.077
> 
> 标签：linux, intel, system-calls

根据我之前的一个问题[Linux System Calls](https://stackoverflow.com/questions/14681029/linux-system-calls)中的评论。Linux 没有在 8086/88 Intel CPU 上实现。那么第一个支持 Linux 并实现其系统调用的 Intel CPU 是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T05:37:04.323

从马的嘴里（无意侮辱莱纳斯）：

> 大家好，大家都在使用 minix -
> 
> **我正在为386(486) AT 克隆**做一个（免费）操作系统（只是一种爱好，不会像 gnu 那样大而专业）。
> 
>  **这从四月就开始酝酿，并开始准备。我想要任何关于人们喜欢/不喜欢 minix 的东西的反馈，因为我的操作系统有点像它（文件系统的物理布局相同（由于实际原因）等等）。
> 
> 我目前已经移植了 bash(1.08) 和 gcc(1.40)，而且似乎一切正常。这意味着我会在几个月内得到一些实用的东西，而且我想知道大多数人想要什么功能。欢迎任何建议，但我不会保证我会实施它们:-)
> 
> 莱纳斯 (torvalds@kruuna.helsinki.fi)
> 
> PS。是的——它没有任何 minix 代码，并且它有一个多线程的 fs。它不可移植**（使用 386 任务切换等），**而且它可能永远不会支持除 AT 硬盘之外的任何东西，因为这就是我所拥有的 :-(。**

 **这是来自 91 年 8 月的 Usenet 帖子，Linus 首次在该帖子中宣布了他的孩子。

因此 386 是第一个实现它的 CPU。

* * *

只有我们这些不得不在 Windows 实模式下锁定内存部分的人，以防止内存管理器模拟器在不告诉你的情况下移动它们，才会欣赏 Linus 在不试图将 Linux 硬塞到更早之前做出的一个好的举动CPU。

我特别喜欢：

> 只是一个爱好，不会像gnu那样大而专业

评论。要是莱纳斯意识到这只野兽会变得有多大就好了。**

# haskell - 理解类型

> ID：14700773
> 
> 赞同：-3
> 
> 时间：2013-02-05T05:29:50.743
> 
> 标签：haskell

我正在学习 Haskell，我想了解类型。假设我有一个类型的对象`Store`：

```
import Data.Map (Map)
import qualified Data.Map as Map

type Variable = String

data Value = IntVal  Int
           | BoolVal Bool

type Store = Map Variable Value 
```

如何使用这个对象，比如`s`获取变量的值？

以及如何保存变量的值`Store`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:23:54.510

在类型声明中，左侧的标记`=`是类型的名称。`=`定义*构造*函数右侧的值- 创建该类型实例的函数。

考虑一下 Maybe 的定义，这是一种表示失败可能性的简单类型（表示为`null`或`nil`在许多语言中表示）：

```
data Maybe a = Just a | Nothing 
```

这是具有两个构造函数的类型：`Just`和`Nothing`：

*   构造`Just`函数代表成功。它需要任何类型的参数，表示要包装的值
*   构造`Nothing`函数不接受任何参数。它代表失败。

你可以在这里看到，因为`Maybe`有两个构造函数，所以有两种构造`Maybe`值的方式。这种类型称为*联合*类型。*您可以使用模式匹配*从联合类型中提取值。有几种语言结构允许模式匹配（`let`和- 绑定`where`、`case`语句和函数变量绑定）。下面，我们解构`Just`函数参数中的值。

```
fromJust :: Maybe a -> a
fromJust (Just x) = x 
```

假设这被加载到 GHCI 中。`Maybe`在这里，我们使用构造函数创建 的实例`Just`，然后再次检索该值：

```
> let x = Just 20
> fromJust x

  20 
```

以下是模式匹配查找您的类型的方式。我们使用您定义`Store`的构造函数创建该类型的实例：`Map`

```
> let m = Map "someVar" $ IntVal 0 
```

下面我们定义了一个`Variable`从 Map 中提取值的函数。

```
getVariable :: Store -> Variable
getVariable (Map v _) = v 
```

应用功能：

```
> getVariable m

  "someVar" 
```

希望您从中学习的资源将很快涵盖这些内容。如果没有，我推荐一剂[Real World Haskell](http://book.realworldhaskell.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T05:51:17.227

这是一些示例用法：

```
s :: Store
s = fromList [("key1", IntVal 4), ("key2", BoolVal False)]

lookup "key1" s -- Just (IntVal 4)
lookup "key2" s -- Just (BoolVal False)
lookup "key3" s -- Nothing

s' :: Store
s' = insert "key3" (BoolVal True) s

lookup "key3" s' -- Just (BoolVal True) 
```

# html - 蓝鱼编辑器中的评论和取消评论快捷方式

> ID：14700775
> 
> 赞同：3
> 
> 时间：2013-02-05T05:30:01.047
> 
> 标签：html, comments, shortcut

我正在使用`Alt`++在 Bluefish Editor 中发表评论`Ctrl`。`C`但我不知道取消注释的快捷方式。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:18:38.117

您可以使用 Shift+Ctrl+c 代替 Alt+Ctrl+c 在 bluefish 编辑器中进行评论。您也可以使用相同的方法取消注释。Shift+ctrl+c 用于切换注释。

# c# - 等待 Task.Run 在退出时更改跟踪 ActivityId

> ID：14700777
> 
> 赞同：3
> 
> 时间：2013-02-05T05:30:17.410
> 
> 标签：c#, task-parallel-library, async-await, tracesource

我正在尝试使用 Trace.CorrelationManager.ActivityId 来关联日志条目。但是，我发现这段代码何时完成：

```
var result = await Task.Run(() => LongRunningMethod()); 
```

ActivityId 与输入时的内容不同。虽然在 LongRunningMethod() 中它是正确的（我在方法中有各种跟踪事件），但它似乎只在等待完成时才会改变。

我的问题是为什么 ActivityId 改变了？

这行代码在一个用 async 声明的函数中，该函数又由 MVC 项目中的异步控制器操作调用：

```
async public Task<ActionResult> Index()
{
...
var tasks = {list of Download<T> delegates}

var result = await Task.WhenAll(tasks)
}

async public Task<OperationResult> Download<T>(IEnumerable<T> data, Device device)
{
...
var result = await Task.Run(() => LongRunningMethod());

return result
} 
```

也许我错误地使用了 async/await 或 Task 方法？我基本上希望所有“LongRunningMethod”同时异步启动，然后等到全部完成。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-31T16:30:33.237

你没有做错，但它不会起作用。

在 WCF 和 ASP.NET（包括 MVC）下，框架在执行请求之前，它会捕获当前上下文，因此它可以恢复它以确保完成在原始线程上运行。

不幸的是，这发生在你的控制器被调用之前。系统快照发生在您有机会更新 ActivityID 之前。在继续中，上下文将重置为设置之前的值。

我发现如果您将 .ConfigureAwait(false) 添加到您的任务中，则不必在原始上下文上运行延续，因此您的活动 ID 将被恢复。

我目前没有更好的解决方案，除了使用 CallContext.LogicalGetData/LogicalSetData 来管理自己的 ActivityID。有关我在 EventSourceProxy 中处理它的方式，请参阅[https://github.com/jonwagner/EventSourceProxy/commit/fa43c6acd07690dcd276346e3fcf25028f796b8c](https://github.com/jonwagner/EventSourceProxy/commit/fa43c6acd07690dcd276346e3fcf25028f796b8c)

这是一篇关于更深入解释的精彩文章。

[http://sticklebackplastic.com/post/2007/08/14/One-mighty-gotcha-for-SystemDiagnostic-activity-Ids.aspx](http://sticklebackplastic.com/post/2007/08/14/One-mighty-gotcha-for-SystemDiagnostic-activity-Ids.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T13:58:01.153

目前尚不清楚您为什么使用`await`关键字。如果您不需要“继续”所需任务，请使用

```
var result = Task.Factory.StartNew(() => LongRunningMethod()); 
```

在调用`await`. `await`正在导致设置继续，它将使用不同的同步上下文运行，该同步上下文用于运行您`LongRunningMethod()`的将在后台线程池线程上运行。

我希望这有帮助。

# amazon - 亚马逊或priceline信用卡支付系统实施

> ID：14700786
> 
> 赞同：2
> 
> 时间：2013-02-05T05:31:28.530
> 
> 标签：amazon, payment, credit-card, gateway

这是我期望系统行为的场景：

> 我有一个平台，用户可以在线注册和存储他们的信用卡信息，并通过特定用户的操作，系统自动结算付款。当然，用户在输入他们的卡信息时期望我们所说的自动支付系统，这样做的目的是简化他们决定支付某物时的流程。

我的问题是这样的：

我发现亚马逊在购买某些产品时会保存用户的卡信息，然后用户无需重新输入所有卡信息，只需从他使用的卡列表中选择，然后单击即可完成付款。此外，在价格行中，我发现它在投标接受后自动结算。

所以我试图找到Priceline或亚马逊提供的提供商或支付网关公司，并试图找到至少实现该系统的方法，但找不到任何。到目前为止我发现的是，使用贝宝，它要求用户拥有贝宝 ID

我正在用PHP做这个，有人可以给我一些线索吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:33:35.633

您应该能够使用大多数支持定期付款的支付网关来执行此操作。

通常，您将为新客户做的就是“照常”（通过支付网关）获取他们的卡详细信息。支付网关将返回一个令牌 ID，然后您将其存储在客户记录中

下次客户付款时，您可以将标记化的卡号提交*给*支付网关

既然你提到了亚马逊，你可能想看看他们的支付服务 API：[http ://aws.amazon.com/fps/](http://aws.amazon.com/fps/)

# sql - 在 sql 查询中外部化 where 条件

> ID：14700787
> 
> 赞同：1
> 
> 时间：2013-02-05T05:31:31.600
> 
> 标签：sql, db2

我正在使用 DB2 数据库。

我有一个像这样的查询：

```
DELETE FROM MYSCHEMA.MY_TABLE WHERE (PROD LIKE 'AB%' OR PROD LIKE 'CD%' OR PROD LIKE 'EF%'); 
```

上面的查询存在于属性文件中，我正在使用 java 程序执行它。

但是，现在我想将 where 条件外部化。

我创建了一个新表 PROD_LIKE，它有一个单列 PROD_NAME，条目如下：

```
PROD_NAME
------------
AB
CD
EF
------------ 
```

我想修改删除查询的 where 条件，以便它使用上面新创建的表中存在的条目。

我怎样才能实现它？

DB2 文档说：

解决问题 尽管 SQL Server 或 Oracle 等其他数据库允许在“相似”比较中对两个操作数使用数据库列，但 DB2 的限制更大。当查询数据库是 DB2 时，必须避免上述计算或选择。在查询 DB2 并在比较中使用“like”时，无法使用数据库列作为第二个操作数。

有什么替代方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:37:33.520

在 TSQL 中，我可能会这样做，

```
DELETE 
   T
FROM 
    MYSCHEMA.MY_TABLE T 
    INNER JOIN PROD_NAME P
      ON LEFT(T.PROD,2) = P.PROD_NAME 
```

我确信 DB2 SQL 是相似的，因为我确信这几乎是 ANSI SQL。

您也可以尝试更通用的方法来摆脱硬编码的 2

```
DELETE 
   T
FROM 
    MYSCHEMA.MY_TABLE T 
    INNER JOIN PROD_NAME P
      ON LEFT(T.PROD, LEN(P.PROD_NAM)) = P.PROD_NAME 
```

我不明白你为什么需要一个`like`，但是如果你愿意，你可以。

```
DELETE 
   T
FROM 
    MYSCHEMA.MY_TABLE T 
    INNER JOIN PROD_NAME P
      ON T.PROD LIKE P.PROD_NAME + '%' 
```

# javascript - 将鼠标悬停在自动完成上时，Javascript点击“Enter”

> ID：14700794
> 
> 赞同：1
> 
> 时间：2013-02-05T05:32:21.927
> 
> 标签：javascript

我有一些自动完成搜索框的基本代码。当出现自动完成选项时，我可以单击该选项以转到 URL。我可以使用箭头键浏览自动完成选项，但无法单击“Enter”转到 URL。

当我将鼠标悬停在选项上并单击“输入”时，有人可以帮助我选择选项吗？请不要使用 jquery 解决方案。

# c# - SQL Server CE 查询中的日期时间？

> ID：14700795
> 
> 赞同：0
> 
> 时间：2013-02-05T05:32:22.443
> 
> 标签：c#, sql, sql-server-ce

我有一个日期和时间想插入到 SQL Server CE 数据库中，我正在尝试遵循字符串格式`yyyy-MM-dd hh:mm:ss`，但是当我尝试插入它时，我得到了一个无效的令牌异常。

如果格式只是`dd-MM-yyyy`一切都很好，但我也需要能够添加一天中的时间......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:06:21.767

总是最好使用参数：

```
cmd.Parameters.Add("@newTimeStamp", SqlDbType.DateTime).Value = timeStamp; 
```

# apache - 具有多个 ServerAlias 的 Apache2 动态 vHost

> ID：14700797
> 
> 赞同：3
> 
> 时间：2013-02-05T05:32:40.463
> 
> 标签：apache, dynamic, dns

我正在尝试设置动态 vHost，但遇到了一些麻烦。它不允许我设置多个 ServerAlias。

```
<VirtualHost *:80>
        ServerAlias *.com
        ServerAdmin michael.ian.curry@gmail.com
        VirtualDocumentRoot /var/www/%1/production/html
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>
        LogLevel warn
</VirtualHost> 
```

上面的 vHost 仅适用于 ' *.com' 我需要它才能适用于 'www.* .com' 和 '*.com' 我认为将 ServerAlias 设置为可以修复它，但它不起作用。

```
ServerAlias *.com www.*.com 
```

如果您有任何见解，请回复

——迈克尔库里

==编辑 1==

例如 redcrusher.com 和 www.redcrusher.com

==编辑 2==

下面的代码也不起作用

```
ServerAlias www.*.com *.com 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T08:01:27.007

弄清楚了！

'www.*.com' 必须在 '*.com' 之前执行 这是因为 ServerAlias 设置了一个动态域，并且必须在“较小”别名存在之前存在。

示例：'www.*.com'、'dev.*.com'、'asdf.*.com' THEN '*.com'

虚拟主机文件 [production.conf]：

```
<VirtualHost *:80>
    ServerAlias www.*.com
    VirtualDocumentRoot /var/www/%2/production/html
    ServerAdmin michael.ian.curry@gmail.com
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>

    LogLevel warn
</VirtualHost>

<VirtualHost *:80>
    ServerAlias *.com
    VirtualDocumentRoot /var/www/%1/production/html
    ServerAdmin michael.ian.curry@gmail.com
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Order allow,deny
        allow from all
    </Directory>

    LogLevel warn
</VirtualHost> 
```

我希望这可以帮助其他遇到此问题的人！

——迈克尔库里

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T05:48:32.990

你必须像这样使用

```
ServerAlias www.domain.com domain.com
ServerAlias *.domain.com 
```

如果您想使用必须遵循命令的方式

```
ServerAlias www.*.com *.com 
```

问题是

```
VirtualDocumentRoot /var/www/%1/production/html 
```

你使用一个动态的 VirtualDocumentRoot 这意味着

对于 redcrusher.com VirtualDocumentRoot 是

```
/var/www/redcrusher/production/html 
```

对于 www.redcrusher.com，VirtualDocumentRoot 是

```
/var/www/www.redcrusher/production/html 
```

我认为将 ServerAlias 拆分为三个部分可以解决

```
ServerAlias www.*.com
VirtualDocumentRoot /var/www/%1/production/html/
ServerAlias *.*.com
VirtualDocumentRoot /var/www/%2/production/html/%1 
ServerAlias *.com 
VirtualDocumentRoot /var/www/%1/production/html 
```

我认为应该工作

虚拟文档根：

redcrusher.com

```
/var/www/redcrusher/production/html 
```

www.redcrusher.com

```
/var/www/redcrusher/production/html/ 
```

sub.redcrusher.com

```
/var/www/redcrusher/production/html/sub 
```

# r - R regex / gsub：提取部分模式

> ID：14700799
> 
> 赞同：5
> 
> 时间：2013-02-05T05:32:42.107
> 
> 标签：r, regex

我有一个气象站列表及其按纬度和经度的位置。存在格式问题，其中一些有小时和分钟，而另一些有小时、分钟和秒。我可以使用正则表达式找到模式，但我无法提取各个部分。

这是数据：

```
> head(wthrStat1 )
     Station       lat        lon
1940    K01R    31-08N    092-34W
1941    K01T    28-08N    094-24W
1942    K03Y    48-47N    096-57W
1943    K04V 38-05-50N 106-10-07W
1944    K05F 31-25-16N 097-47-49W
1945    K06D 48-53-04N 099-37-15W 
```

我想要这样的东西：

```
 Station       latHr latMin   latSec  latDir   lonHr lonMin  lonSec lonDir
    1940    K01R    31    08       00      N      092   34       00     W
    1941    K01T    28    08       00      N      094   24       00     W
    1942    K03Y    48    47       00      N      096   57       00     W
    1943    K04V    38    05       50      N      106   10       07     W
    1944    K05F    31    25       16      N      097   47       49     W
    1945    K06D    48    53       04      N      099   37       15     W 
```

我可以得到这个正则表达式的匹配：

```
data.format <- "\\d{1,3}-\\d{1,3}(?:-\\d{1,3})?[NSWE]{1}"
grep(data.format, wthrStat1$lat) 
```

但我不确定如何将各个部分放入列中。我尝试了一些方法，例如：

```
wthrStat1$latHr <- ifelse(grepl(data.format, wthrStat1$lat), gsub(????), NA) 
```

但没有运气。

这是一个输入（）：

```
> dput(wthrStat1[1:10,] )
structure(list(Station = c("K01R", "K01T", "K03Y", "K04V", "K05F", 
"K06D", "K07G", "K07S", "K08D", "K0B9"), lat = c("31-08N", "28-08N", 
"48-47N", "38-05-50N", "31-25-16N", "48-53-04N", "42-34-28N", 
"47-58-27N", "48-18-03N", "43-20N"), lon = c("092-34W", "094-24W", 
"096-57W", "106-10-07W", "097-47-49W", "099-37-15W", "084-48-41W", 
"117-25-42W", "102-24-23W", "070-24W")), .Names = c("Station", 
"lat", "lon"), row.names = 1940:1949, class = "data.frame") 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T06:29:19.403

`strapplyc`在 gsubfn 包中将提取正则表达式中用括号括起来的每个组：

```
library(gsubfn)
data.format <- "(\\d{1,3})-(\\d{1,3})-?(\\d{1,3})?([NSWE]{1})"
parts <- strapplyc(wthrStat1$lat, data.format, simplify = rbind)
parts[parts == ""] <- "00" 
```

这使：

```
> parts
      [,1] [,2] [,3] [,4]
 [1,] "31" "08" "00" "N" 
 [2,] "28" "08" "00" "N" 
 [3,] "48" "47" "00" "N" 
 [4,] "38" "05" "50" "N" 
 [5,] "31" "25" "16" "N" 
 [6,] "48" "53" "04" "N" 
 [7,] "42" "34" "28" "N" 
 [8,] "47" "58" "27" "N" 
 [9,] "48" "18" "03" "N" 
[10,] "43" "20" "00" "N" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T06:15:05.197

这是非常低效的，我希望其他人有更好的解决方案：

```
dat <- read.table(text ='   Station       lat        lon
1940    K01R    31-08N    092-34W
1941    K01T    28-08N    094-24W
1942    K03Y    48-47N    096-57W
1943    K04V 38-05-50N 106-10-07W
1944    K05F 31-25-16N 097-47-49W
1945    K06D 48-53-04N 099-37-15W', head=T)

pattern <- '([0-9]+)[-]([0-9]+)([-|A-Z]+)([0-9]*)([A-Z]*)'

dat$latHr <- gsub(pattern,'\\1',dat$lat)
dat$latMin    <- gsub(pattern,'\\2',dat$lat)

latSec    <- gsub(pattern,'\\4',dat$lat)
latSec[nchar(latSec)==0] <- '00'
dat$latSec <- latSec

latDir <- gsub(pattern,'\\5',dat$lat)
latDir[nchar(latDir)==0] <- latDir[nchar(latDir)!=0][1]
dat$latDir <- latDir

dat
     Station       lat        lon latHr latMin latSec latDir
1940    K01R    31-08N    092-34W    31     08     00      N
1941    K01T    28-08N    094-24W    28     08     00      N
1942    K03Y    48-47N    096-57W    48     47     00      N
1943    K04V 38-05-50N 106-10-07W    38     05     50      N
1944    K05F 31-25-16N 097-47-49W    31     25     16      N
1945    K06D 48-53-04N 099-37-15W    48     53     04      N 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T18:29:59.527

另一个答案，使用[stringr](http://cran.r-project.org/web/packages/stringr/)：

```
# example data
data <-
"Station       lat        lon
1940    K01R    31-08N    092-34W
1941    K01T    28-08N    094-24W
1942    K03Y    48-47N    096-57W
1943    K04V 38-05-50N 106-10-07W
1944    K05F 31-25-16N 097-47-49W
1945    K06D 48-53-04N 099-37-15W"

## read string into a data.frame
df <- read.table(text=data, head=T, stringsAsFactors=F)

pattern <- "(\\d{1,3})-(\\d{1,3})(?:-(\\d{1,3}))?([NSWE]{1})"

library(stringr)
str_match(df$lat, pattern) 
```

这会生成一个 data.frame，其中一列用于整个匹配字符串，另外一列用于每个捕获组。

```
 [,1]        [,2] [,3] [,4]  [,5]
[1,] "31-08N"    "31" "08" ""    "N" 
[2,] "28-08N"    "28" "08" ""    "N" 
[3,] "48-47N"    "48" "47" ""    "N" 
[4,] "38-05-50N" "38" "05" "-50" "N" 
[5,] "31-25-16N" "31" "25" "-16" "N" 
[6,] "48-53-04N" "48" "53" "-04" "N" 
```

R 的[字符串处理](http://digitheadslabnotebook.blogspot.com/2009/07/r-string-processing.html)能力在过去的几年里有了很大的进步。

# php - 在 magento 中以编程方式创建可配置产品

> ID：14700802
> 
> 赞同：2
> 
> 时间：2013-02-05T05:32:55.517
> 
> 标签：php, magento, magento-1.7

我正在尝试从简单的产品集合中创建具有属性颜色和大小的可配置产品。

为此，我创建了一个`configurable_sku`为各个简单产品命名的自定义属性，并填充了常见的 SKU。使用它`SKU`，我们可以分组创建可配置的产品。

我从`$product_sku_collection['sku']`下面收集了，

```
...
array (size=387)
  0 => 
    array (size=2)
      'conf' => string '753315' (length=6)
      'simpleprodcollection' => 
        array (size=1)
          0 => 
            array (size=10)
              ...
  1 => 
    array (size=2)
      'conf' => string '753319' (length=6)
      'simpleprodcollection' => 
        array (size=1)
          0 => 
            array (size=10)
              ... 
```

下面是我到目前为止尝试过的 php 脚本。

```
<?php
set_time_limit(0);
error_reporting(E_ALL | E_STRICT);
error_reporting(1);
ini_set('display_errors', 1);
define('D_S', DIRECTORY_SEPARATOR);
require_once 'app/Mage.php';
umask(0);
Mage::app();
if (function_exists('d') === false) {

    function d($data, $die = 0, $z = 1, $msg = 1) {
        echo"<br/><pre style='padding:2px 5px;background: none repeat scroll 0 0 #E04E19;clear: both;color: #FFFFFF;float: left;font-family: Times New Roman;font-style: italic;font-weight: bold;text-align: left;'>";
        if ($z == 1)
            Zend_Debug::dump($data);
        else if ($z == 2)
            var_dump($data);
        else
            print_r($data);
        echo"</pre>";
        if ($d == 1)
            die();
    }

}

function get_attribute_id($option, $type) {
    $attributeId = Mage::getResourceModel('eav/entity_attribute')->getIdByCode('catalog_product', $type);
    $attribute = Mage::getModel('catalog/resource_eav_attribute')->load($attributeId);
    $attributeOptions = $attribute->getSource()->getAllOptions();

    foreach ($attributeOptions as $opts_arr) {
        if (strtoupper($opts_arr['label']) == strtoupper($option)) {
            return $opts_arr['value'];
        }
    }
    return FALSE;
}

$_simple_products = array();

function attributeValueExists($arg_attribute, $arg_value) {
    $attribute_model = Mage::getModel('eav/entity_attribute');
    $attribute_options_model = Mage::getModel('eav/entity_attribute_source_table');

    $attribute_code = $attribute_model->getIdByCode('catalog__simple_product', $arg_attribute);
    $attribute = $attribute_model->load($attribute_code);

    $attribute_table = $attribute_options_model->setAttribute($attribute);
    $options = $attribute_options_model->getAllOptions(false);

    foreach ($options as $option) {
        if ($option['label'] == $arg_value) {
            return $option['value'];
        }
    }

    return false;
}

//$_product = Mage::getModel('catalog/product')->load(46);
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->addAttributeToSelect('*');
// d($collection->getData()); exit;
$in = 0;
$product_sku_collection = array();
$product_dummy_collection = array();
foreach ($collection->getData() as $val) {

    $product_dummy_collection[$in] = $val;
    $collection = Mage::getModel('catalog/product')->getCollection();
    $collection->addAttributeToFilter('confiugrable_sku', array('eq', $val['sku']));
    if (count($collection->getData()) > 0) {
        $product_sku_collection['sku'][$in]['conf'] = $val['sku'];
        $product_sku_collection['sku'][$in]['simpleprodcollection'] = $collection->getData();
        $in++;
    }
}
$color_attribute = Mage::getModel('eav/config')->getAttribute('catalog_product', 92);
foreach ($color_attribute->getSource()->getAllOptions(true, true) as $option) {
    $attributeArray[$option['value']] = $option['label'];
}
//d($attributeArray); exit;
$color_array = array();
$index = 0;
foreach ($attributeArray as $value) {
    $value_index = get_attribute_id($value, 'color');
    if ($value != '') {
        $color_array[$index] = array(
            'value_index' => $value_index,
            'label' => $value,
            'is_percent' => 0,
            'pricing_value' => '0',
            'attribute_id' => '92'
        );
        $index++;
    }
}
//d($color_array); exit;
$size_attribute = Mage::getModel('eav/config')->getAttribute('catalog_product', 136);
foreach ($size_attribute->getSource()->getAllOptions(true, true) as $option) {
    $sattributeArray[$option['value']] = $option['label'];
}
//d($attributeArray); exit;
$size_array = array();
$index = 0;
foreach ($sattributeArray as $value) {
    $value_index = get_attribute_id($value, 'size');
    if ($value != '') {
        $size_array[$index] = array(
            'value_index' => $value_index,
            'label' => $value,
            'is_percent' => 0,
            'pricing_value' => '0',
            'attribute_id' => '92'
        );
        $index++;
    }
}
//d($size_array); exit;
// exit;
$cProduct = Mage::getModel('catalog/product');
$model = Mage::getModel('catalog/product');
$setConfigurableAttributesData = array(
    '0' => array('id' => NULL, 'label' => 'Color', 'position' => NULL,
        'values' => $color_array,
        'attribute_id' => 92, 'attribute_code' => 'color', 'frontend_label' => 'Color',
        'html_id' => 'config_super_product__attribute_0'
    ),
    '1' => array('id' => NULL, 'label' => 'Clothing Size', 'position' => NULL,
        'values' => $size_array,
        'attribute_id' => 136, 'attribute_code' => 'size', 'frontend_label' => 'Clothing Size',
        'html_id' => 'config_super_product__attribute_1')
);
//d(($product_sku_collection['sku'])); exit;
$index = 1;
foreach ($product_sku_collection['sku'] as $key => $value) {
    $main_product_data = $model->load($value['simpleprodcollection']['0']['entity_id']);
    $main_pd_name = $main_product_data->getData('name');
    $setConfigurableProductsData=array();
    //d($value['simpleprodcollection']['0']['entity_id']); 
    foreach ($value['simpleprodcollection'] as $v) {
        $clab = Mage::getModel('catalog/product')->load($v['entity_id'])->getAttributeText('color');
        $cvalue_index = Mage::getResourceModel('catalog/product')->getAttributeRawValue($v['entity_id'], 'color');
        $slab = Mage::getModel('catalog/product')->load($v['entity_id'])->getAttributeText('size');
        $svalue_index = Mage::getResourceModel('catalog/product')->getAttributeRawValue($v['entity_id'], 'size');
        $setConfigurableProductsData = array(
            $v['entity_id'] =>
            array('0' =>
                array('attribute_id' => '92', 'label' => $clab, 'value_index' => $cvalue_index, 'is_percent' => 0, 'pricing_value' => ''),
                '1' =>
                array('attribute_id' => '136', 'label' => $slab, 'value_index' => $svalue_index, 'is_percent' => 0, 'pricing_value' => '')
            )
        );
        //d($setConfigurableProductsData);
    }
    $cProduct
            ->setTypeId(Mage_Catalog_Model_Product_Type::TYPE_CONFIGURABLE)
            ->setTaxClassId(5)
            ->setVisibility(Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH)
            ->setStatus(Mage_Catalog_Model_Product_Status::STATUS_ENABLED)
            ->setWebsiteIds(array(1))
            ->setAttributeSetId(4) // You can determine this another way if you need to.
            ->setSku("C" . $main_product_data->getData('confiugrable_sku'))
            ->setName($main_product_data->getData('name'))
            ->setQty(25)
            ->setPlayer($main_product_data->getData('player'))
            ->setBrand($main_product_data->getData('brand'))
            ->setStyle($main_product_data->getData('style'))
            ->setShortDescription($main_product_data->getData('short_description'))
            ->setDescription($main_product_data->getData('description'))
            ->setPrice($main_product_data->getData('price'));
    $cProduct->setStockData(array(
        'use_config_manage_stock' => 1,
        'is_in_stock' => 1,
        'is_salable' => 1,
    ));
    $cProduct->setConfigurableProductsData($setConfigurableProductsData);
    $cProduct->setConfigurableAttributesData($setConfigurableAttributesData);
    $cProduct->setCanSaveConfigurableAttributes(1);
    try {
        $cProduct->save();
        //$productId = $cProduct->getId();
        echo $index.") ".$cProduct->getId() . "====>" . $main_pd_name . "   added\n";
    } catch (Exception $e) {
        echo "$main_pd_name  not added\n";
        echo "exception:$e";
    }
    $index++;
}
//****************-----------------*****************//
?> 
```

当我运行这个脚本时，它必须插入 387 个可配置产品及其各自的简单产品。但是循环运行一次并停止执行，`It inserts only one configurable product with their associated simple product but it has to insert all 387 configurable products.` 我在哪里出错了。我一直检查找到它，但找不到。

请对此提出一些建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T08:08:39.007

最后我找到了，我们需要在for循环中使用下面的代码

```
 $cProduct->save();
 $cProduct->unsetData(); 
```

要让 magento 再次将您的数据识别为新模型，您只需取消设置模型 id

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-30T19:41:20.760

`Mage::getModel('catalog/product');`这实际上是查询 Magento 注册表并获取该模型类型的缓存对象，这种重用对象的方式被称为*Singleton*，Magento 也因此而闻名。在循环和持续需要新的唯一对象的情况下，使用该模型的标准构造函数调用。以产品为例：
`$cProduct = new Mage_Catalog_Model_Product();`

# jsp - 如何在 JSP 页面上应用会话而不使用 <% page session=""%>

> ID：14700803
> 
> 赞同：1
> 
> 时间：2013-02-05T05:32:56.717
> 
> 标签：jsp, session

是否可以在不使用的情况下使用 jsp 中的现有会话 `<% page session="false"%>`？

有什么替代品吗？

由于我们的项目有 200 个 jsp，因此为每个 jsp 编写代码并不容易。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:46:23.743

servlet 规范允许您使用 jsp 属性组为一组页面自动导入 jsp。

您可以在 top.jsp 中添加 session="false" 以便将其应用于所有 jsps

```
<jsp-property-group>
  <description>JSP configuration</description>
  <url-pattern>/*.jsp</url-pattern>
  <include-prelude>/includes/top.jsp</include-prelude>
</jsp-property-group> 
```

# php - 使用 PDO 从一个语句中在多个表中插入多条记录？

> ID：14700810
> 
> 赞同：1
> 
> 时间：2013-02-05T05:33:21.197
> 
> 标签：php, mysql, sql, pdo

我正在尝试构建一个表单以允许将关键字绑定到文章。此 SQL 语句直接用作查询，但我不知道如何将其打包为 pdo 语句。它将关键字添加到关键字表和关键字 ID + 文章 ID 到多对多映射表。

```
$insertK = $dbh->prepare("INSERT IGNORE INTO Keywords (Keyword)
VALUES (:KeywordID1);
INSERT INTO Keyword_Article (KeywordID, ArticleID)
VALUES ((SELECT KeywordID FROM Keywords WHERE Keyword = :KeywordID2), :ArticleID)");

$insertK->bindParam(':KeywordID1',  $keywordID);
$insertK->bindParam(':KeywordID2',  $keywordID);
$insertK->bindParam(':ArticleID',  $articleID);
$insertK->excecute(); 
```

我已经看到 PDO 插入了几种不同的方式，但没有一种将两条语句插入两个不同的表中。

编辑* 如果不可能，那么我如何确保在运行第二个查询之前完成第一个插入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T05:41:21.573

这是很常见的误解。
出于某种原因，人们不断尝试在一次调用中填充尽可能多的查询。
虽然实际上根本没有理由。

只需按常规方式逐一运行所有查询。
它绝对没有错。

# java - 如何传入参数

> ID：14700815
> 
> 赞同：0
> 
> 时间：2013-02-05T05:33:51.647
> 
> 标签：java, jsf-2, richfaces

我需要在rich:autocomplete 中传递一个参数。所以我这样做了。

```
<rich:autocomplete mode="ajax" minChars="2" var="message"   
                  fetchValue="#{message.displayName}" layout="div" 
                   autocompleteMethod="#{suggestionControlAction.suggestionAction}">
    <f:param name="param" value="KeyQueryVal"/>
    <h:column>
        <h:outputText value="#{message.displayName}"/>
    </h:column>
 </rich:autocomplete> 
```

我正在使用我的动作类的SuggestAction方法检索参数值，

```
Map<String, String> requestMap = FacesContext.getCurrentInstance().
                               getExternalContext ().getRequestParameterMap();
String queryFor = requestMap.get("param"); 
```

但它返回NULL。

在 Richfaces 3 中，我以相同的方式使用了建议框并能够传递参数，但在 Richfaces 4 中，该组件被自动完成替换，我无法实现相同的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:42:28.027

利用

```
<a4j:param name="param" assignTo="#{BackingBean.property}"></a4j:param> 
```

更改`BackingBean`为您的 bean 和`property`

# android - AChart 引擎条形图 - 向右滚动时隐藏系列

> ID：14700819
> 
> 赞同：3
> 
> 时间：2013-02-05T05:34:10.883
> 
> 标签：android, charts, bar-chart, achartengine

我正在使用一个优秀的库 AChart 引擎来生成条形图。所有功能都运行良好，但我有几件事无法解决：

这是我的屏幕截图： ![在此处输入图像描述](../Images/2b4040f5d14fef464228e07097bbb602.png)

现在有两件事需要修复：

1) 向右滚动时隐藏系列，目前系列 March 即使在 0,0 之后也是可见的。

2) 网格线在图表的顶部，但它应该在图表的后面。

3) 如何在右上角而不是底部显示图例。

这是我的以下代码：

```
private void openChart(){
        int[] x = { 10,20,30,40,50,60,70,80 };
       // int[] y = { 10,20,30,40,50,60,70 };
        int[] income = { 20,25,27,30,28,35,37,38};
        int[] expense = {22, 27, 29, 28, 26, 30, 33, 34 };
        int[] sample = {22, 27, 29, 28, 26, 30, 33, 34};

        // Creating an  XYSeries for Income
        XYSeries incomeSeries = new XYSeries("Income");
        // Creating an  XYSeries for Expense
        XYSeries expenseSeries = new XYSeries("Expense");
     // Creating an  XYSeries for Expense
        XYSeries sampleseries = new XYSeries("Sample");
        // Adding data to Income and Expense Series
        for(int i=0;i<x.length;i++){
            incomeSeries.add(i,income[i]);
            expenseSeries.add(i,expense[i]);
            sampleseries.add(i,sample[i]);
        }

        // Creating a dataset to hold each series
        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        // Adding Income Series to the dataset
        dataset.addSeries(incomeSeries);
        // Adding Expense Series to dataset
        dataset.addSeries(expenseSeries);
        // Adding Expense Series to dataset
        dataset.addSeries(sampleseries);

        // Creating XYSeriesRenderer to customize incomeSeries
        XYSeriesRenderer incomeRenderer = new XYSeriesRenderer();
        incomeRenderer.setColor(Color.rgb(130, 130, 230));
        incomeRenderer.setFillPoints(true);
        incomeRenderer.setLineWidth(2);
        incomeRenderer.setChartValuesTextAlign(Align.CENTER);
        incomeRenderer.setChartValuesTextSize(18);
        incomeRenderer.setDisplayChartValues(true);

        // Creating XYSeriesRenderer to customize expenseSeries
        XYSeriesRenderer expenseRenderer = new XYSeriesRenderer();
        expenseRenderer.setColor(Color.rgb(220, 80, 80));
        expenseRenderer.setFillPoints(true);
        expenseRenderer.setLineWidth(2);
        expenseRenderer.setChartValuesTextAlign(Align.CENTER);
        expenseRenderer.setChartValuesTextSize(18);
        expenseRenderer.setDisplayChartValues(true);

     // Creating XYSeriesRenderer to customize expenseSeries
        XYSeriesRenderer samplseries = new XYSeriesRenderer();
        samplseries.setColor(Color.rgb(120, 40, 40));
        samplseries.setFillPoints(true);
        samplseries.setLineWidth(2);
        samplseries.setChartValuesTextAlign(Align.CENTER);
        samplseries.setChartValuesTextSize(18);
        samplseries.setDisplayChartValues(true);

        // Creating a XYMultipleSeriesRenderer to customize the whole chart
        XYMultipleSeriesRenderer multiRenderer = new XYMultipleSeriesRenderer();
        multiRenderer.setMargins(new int[]{30,50,60,0});
        multiRenderer.setXRoundedLabels(true);
        multiRenderer.setLegendTextSize(24);
        multiRenderer.setZoomRate(0.2f); 
        multiRenderer.setZoomEnabled(false, false); 
        multiRenderer.setBarSpacing(0.3f); 
        multiRenderer.setXAxisMin(-1); 
        multiRenderer.setXAxisMax(5);
        multiRenderer.setYAxisMin(0);
        multiRenderer.setYAxisMax(50);
        multiRenderer.setAxisTitleTextSize(20); 
        multiRenderer.setAxesColor(Color.BLACK); 
        multiRenderer.setGridColor(Color.GRAY); 
        multiRenderer.setShowGridX(true); 
        multiRenderer.setXLabels(0);

        multiRenderer.setPanLimits(new double[] { -1, x.length, 0, x.length});

        multiRenderer.setLabelsColor(Color.BLACK); 
        multiRenderer.setLabelsTextSize(20);  

        multiRenderer.setXLabelsColor(Color.BLACK); 
        multiRenderer.setXTitle("Tests"); 
        multiRenderer.setYLabelsAlign(Align.RIGHT);
        multiRenderer.setYLabelsColor(0, Color.BLACK);
        multiRenderer.setYTitle("Scores");

        for(int i=0; i< x.length;i++){
            multiRenderer.addXTextLabel(i, mMonth[i]);
        }

        // Adding incomeRenderer and expenseRenderer to multipleRenderer
        // Note: The order of adding dataseries to dataset and renderers to multipleRenderer
        // should be same
        multiRenderer.addSeriesRenderer(incomeRenderer);
        multiRenderer.addSeriesRenderer(expenseRenderer);
        multiRenderer.addSeriesRenderer(samplseries);

        // Creating an intent to plot bar chart using dataset and multipleRenderer
        Intent intent = ChartFactory.getBarChartIntent(getBaseContext(), dataset, multiRenderer, Type.DEFAULT);

        // Start Activity
        startActivity(intent);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:36:25.473

1.  `renderer.setMarginsColor()`并使用正确版本的 ACE。
2.  隐藏它们。
3.  隐藏它或让它保持原样。

**更新：**我还添加了一个新的 API 调用，它可以让您避免显示在图表上部分显示的值。

```
renderer.setDisplayBoundingPoints(false); 
```

[您可以在此处](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)下载包含此功能的版本。

# scala - 如何在 SLICK 中使用 SQL“LIKE”运算符

> ID：14700821
> 
> 赞同：31
> 
> 时间：2013-02-05T05:34:19.680
> 
> 标签：scala, scalaquery, slick

也许是一个愚蠢的问题。但到目前为止我还没有找到答案。那么如何在**[SLICK](http://slick.typesafe.com/)**中表示 SQL 的“LIKE”运算符？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-05T06:05:49.337

和平时一样！

```
val query = for {
  coffee <- Coffees if coffee.name like "%expresso%"
} yield (coffee.name, coffee.price) 
```

会生成类似 SQL

```
SELECT name, price FROM coffees WHERE NAME like '%expresso%'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-17T21:14:52.210

这就是我让它工作的方式：

```
// argMap is map of type [Str, Str]
val query = for {
    coffee <- coffees if (
      argMap.map{ case (k,v) =>
        metric.column[String](k) like s"%${v}%"
      }.reduce(_ && _)
    )
  } yield(coffee.name) 
```

然后你可以使用你的数据库运行它： `val res = db.run(query.result)`

当然`res`，这里有一个未来，您需要使用 await 来获得实际结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-06T18:20:04.317

假设您有一个名为的表，`logs`其中包含 3 个字段 -

1.  ID
2.  信息
3.  约会时间

您要执行 LIKE 操作。所以它将是：

```
 def data(data: ReqData): Future[Seq[Syslog]] =  {
      sysLogTable
        .filter(_.datetime >= data.datetimeFrom)
        .filter(_.datetime <= data.datetimeUntil)
        .filter(_.message like s"%${data.phrase}%")
        .result
 } 
```

注意：对于 sysLogTable

```
val sysLogTable: TableQuery[SyslogsTable] = TableQuery[SyslogsTable] 
```

```
class SyslogsTable(tag: Tag) extends Table[Syslog](tag, "logs") {
  def id = column[Long]("id", O.PrimaryKey, O.AutoInc)

  def message = column[String]("message")

  def datetime = column[Timestamp]("date")

  def * = (id.?, message, datetime) <> ((Syslog.apply _).tupled, Syslog.unapply)
} 
```

注意：对于 Syslog 案例类

```
case class Syslog(
   id: Option[Long],
   message: String,
   datetime: Timestamp
) 
```

# javascript - 如何通过复选框插件的多选下拉列表过滤剑道 ui 网格

> ID：14700822
> 
> 赞同：2
> 
> 时间：2013-02-05T05:34:26.740
> 
> 标签：javascript, html, kendo-ui

鉴于[http://jsfiddle.net/MG89G/271/](http://jsfiddle.net/MG89G/271/) ，我的问题是在下拉列表中的复选框通过多选更改后过滤Kendo UI网格。我想用 orderID 过滤网格。

```
 I got the solution with single selection http://jsfiddle.net/schapman/HyHZG/5/. 
```

但是如何使用多选下拉列表呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T11:20:33.853

您可以在 Grid 中集成相同的方法，只需稍加调整即可删除 data-bind 属性。

[这是一个例子](http://trykendoui.telerik.com/EyoL)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T17:47:06.723

我创建了这个：

```
var dropdown = $(selector).kendoDropDownList({
                    template: $("#general-templates .multiselect-item").html(),
                    select: function(e)
                    {
                        var dropdownlist = this;

                        var dataItem = this.dataItem(e.item.index());
                        if(dataItem.value==="")
                        {
                            e.item.closest("ul").find("span").each(function(){
                                $(this).css("display","none");
                            });
                            dropdownlist.text(dataItem.text);
                            dropdownlist.element.closest(".field-group").find("input[type='hidden']").val("");
                            return;
                        }

                        if(e.item.find("span").css("display")==="none")
                            e.item.find("span").css("display","");
                        else
                            e.item.find("span").css("display","none");                

                        var values = [];
                        var labels = [];
                        e.item.closest("ul").find("span").each(function(){

                            if($(this).css("display")==="none")
                                return;

                            values.push($(this).attr("data-value"));
                            labels.push($(this).parent().text());

                        });

                        if(values.length===0)
                            labels.push(e.item.closest("ul").find(".dropdownlist-item:first").text());

                        dropdownlist.element.closest(".field-group").find("input[type='hidden']").val(values.join(","));

                        setTimeout(function(){
                            dropdownlist.value("999");
                            dropdownlist.text(labels.join(","));
                        },50);
                    }
            }).data("kendoDropDownList");

        var select = dropdown.wrapper.find("select");
        dropdown.wrapper.append("<input type='hidden' class='filter' value='' data-field='{0}' data-operator='{1}'>".format(select.attr("data-field"),select.attr("data-operator"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:57:32.557

剑道团队添加了一个新的多选框。这是使用一个过滤网格的示例。

[http://jsbin.com/ameyam/1/edit](http://jsbin.com/ameyam/1/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T16:01:29.473

新版本的剑道 ui 支持此属性

[http://demos.telerik.com/kendo-ui/grid/filter-multi-checkboxes](http://demos.telerik.com/kendo-ui/grid/filter-multi-checkboxes)

# windows-phone-7 - 适当的 unicode 支持

> ID：14700827
> 
> 赞同：0
> 
> 时间：2013-02-05T05:35:19.797
> 
> 标签：windows-phone-7, windows-phone-8

现在我有第一代 Windows 手机，安装了 7.8 [Omnia 7]。它没有适当的 unicode 支持[准确地说，它不显示马拉雅拉姆语字符，例如在 facebook 上]。如果 WP8 支持这一点，我环顾四周，但似乎不支持。

我的问题是，WP8 是否有正确的 unicode 渲染？如果不是在整个操作系统中，至少在浏览器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:45:09.067

[http://answers.microsoft.com/en-us/winphone/forum/wp8-wpfeatures/malayalam-unicode-support-in-windows-phone-8/4d144e4f-eea4-430b-b26d-945e2d98df00](http://answers.microsoft.com/en-us/winphone/forum/wp8-wpfeatures/malayalam-unicode-support-in-windows-phone-8/4d144e4f-eea4-430b-b26d-945e2d98df00)

抱歉，目前不支持马拉雅拉姆语。

不过，我确实找到了这个：http: [//malayalam4mobile.hafees.com/](http://malayalam4mobile.hafees.com/)

# c - Minix - 系统调用没有正确调用函数？

> ID：14700829
> 
> 赞同：1
> 
> 时间：2013-02-05T05:35:33.730
> 
> 标签：c, operating-system, minix

我需要在 Minix 中为家庭作业创建一个系统调用。我已经完成了大部分设置，但由于某种原因，系统调用实际调用的函数没有被正确找到。（请原谅任何不好的措辞选择，我不确定最好的词来解释这一点）。

我用以下代码创建了一个`mylib.h`in `/usr/include`(and `/usr/src/include`)：

```
#include <lib.h>
#include <unistd.h>
#include <stdio.h>

int mycall(){
    message m;
    return (_syscall(PM_PROC_NR, MYCALL, &m));
} 
```

我还添加`mylib.h`到适当的`Makefile`.

我已经在 中定义`MYCALL`了`/usr/src/include/minix/callnr.h`，并且我已经添加`do_mycall`到了相应的插槽中`/usr/src/servers/pm/table.h`.

我已经添加`int do_mycall(void);`到 中`/usr/src/servers/pm/proto.h`，并且在 中添加了一个简单的函数声明`misc.c`。

```
int do_mycall(void){
    printf("I've been called");
    return 0;
} 
```

我也尝试将它放在它自己的`.c`文件中，我将其添加到该`Makefile`目录中。

我`make`在`/usr/src/servers/pm/`和`/usr/src/include`中表演`make includes`过`/usr/src/releasetools`。

但是，当我调用`mycall()`并捕获返回值时，它是-1。

我添加了一些打印，我可以看出`mylib.h`正在调用 in 的函数，并且 MYCALL 被正确定义为 in 的索引`table.h`，并且`table.h` *应该*正确放置该`do_mycall`行（尽管我真的不知道如何测试它是执行时在那里）。所以，我只能说 in `_syscall`,`do_mycall`没有正确映射到它的功能。

我尝试用其中`photo.h`的代码替换原型`misc.c`（因此原型会丢失），但没有发生任何不同，并且`make`也没有抱怨。

谁能帮我弄清楚是什么原因造成的，或者我如何缩小断开连接的位置？

如果有人知道在哪里`_syscall`定义，那可能会有所帮助，因为我可能会在其中添加一些打印件以弄清楚它有多远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T01:36:46.050

我无法找到具体原因，但在用尽我能找到的所有选项后，问题似乎与我的虚拟机有关。我重复了在 VMware Player 而不是 VirtualBox 上设置系统调用所做的一切，一切正常。

# git - .gitignore 文件夹内容

> ID：14700835
> 
> 赞同：70
> 
> 时间：2013-02-05T05:36:21.543
> 
> 标签：git, gitignore

> **可能重复：**
> [在 Windows 上忽略 Git 存储库中的目录](https://stackoverflow.com/questions/343646/ignoring-directories-in-git-repos-on-windows)

我的网络应用程序具有以下目录布局：

```
myapp/
    .gitignore
    .git/
        ...

    static/
            mytest.txt
            fgs.ico
    ledgerware/
        static/
            mytest.txt
            fgs.ico
        ... 
```

我想编辑现有的 myapp/.gitignore 文件，以便在 git push 时忽略 myapp/ledgerware/static 文件夹中的所有文件，而不是 myapp/static 文件夹。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-05T05:41:37.760

只需`.gitignore`按照您希望的具体方式输入该行：

```
ledgerware/static/* 
```

# ruby-on-rails - 祖传宝石“扁平树”

> ID：14700836
> 
> 赞同：0
> 
> 时间：2013-02-05T05:36:23.653
> 
> 标签：ruby-on-rails, ruby, algorithm, tree, ancestry

我整天都在反对这个。是时候换眼了。

我有一个使用祖先 gem 的树结构模型。效果很好，调用`TreeNode.arrange`返回一个整洁的小哈希，它是一个嵌套树。问题是由于缺乏更好的描述，我正在寻找“扁平树”。例如：

```
Node1
Node2
Node3
  Node4
  Node5
  Node6
    Node7
    Node8
Node9 
```

相对于更传统的

```
Node1
  Node2
   Node3... 
```

所以换句话说，如果有一个分支点（多个孩子），我只想“缩进”我的树。我认为最好的方法是递归函数。我已经尝试了几种变体，但我只是在这个上画了一个空白：-\

```
def walk_until_fork(tree_hash,&blk)
   tree_hash.each do |node,children| 
    yield node.title
    if children.keys.length > 1
      #fork point
      children.each do |subnode,grandchilden|
        walk_until_fork(grandchilden,&blk)
        yield subnode.title       
      end
    else
      walk_until_fork(children,&blk)
    end
  end
end 
```

调用该测试代码的结果是分叉点最终位于输出的底部：-\

我真正想看到的是这样的散列结构，但唯一应该有孩子的键是发生分支的地方（一个分支在当前级别继续，并且在该分支之后的每个 n 分支）。

我不确定我是否清楚。如果需要，我会澄清任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:24:17.663

删除了我所有的东西，然后用一种新的方法重新开始。稍后我很可能会对其进行重构，但这是基本思想。

```
def walk_until_fork(tree_hash, root_node = nil)
  root_node ||= ActiveSupport::OrderedHash.new
  tree_hash.each do |node,children|
    more_than_one = false
    parent_node = root_node[node] = ActiveSupport::OrderedHash.new
    children.each do |k,v|
      fork_node = more_than_one ? parent_node : root_node
      walk_until_fork({k => v},fork_node)
      more_than_one = true
    end
  end
  root_node
end 
```

然后我打电话给：

```
walk_until_fork(self.arrange) 
```

代码将散列引用传递给当前根，将其更改为新散列，只有一个以上的孩子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T20:27:48.597

您可以在 CSS 中指定要将其限制为多少级嵌套。将其限制为 3 个级别，因为您表示您的 CSS 中将包含以下内容。

```
.nested_messages {
      margin-left: 30px;
    }

    .nested_messages .nested_messages .nested_messages .nested_messages{
      margin-left: 0;
    } 
```

在上面的这个 CSS 中，您只能缩进 3 级（在您的页面中使用相关代码。在 3 级项目不再缩进之后。我只是在这里显示 CSS，您需要在视图中添加额外的代码。

Ryan Bates 在此 Railscast 中对此进行了介绍，并提供了完整的代码示例。你应该能够一步一步地走过它。

[http://railscasts.com/episodes/262-trees-with-ancestry](http://railscasts.com/episodes/262-trees-with-ancestry)

# javascript - Safari（IPAD）浏览器中的 JQuery Mobile 自动完成问题

> ID：14700838
> 
> 赞同：1
> 
> 时间：2013-02-05T05:36:34.883
> 
> 标签：javascript, jquery, jquery-mobile, safari

我尝试为客户代码实现自动完成功能。

谁能告诉我为什么下面的代码在 safari(IPAD) 浏览器中不起作用？

它在 Chrome 和 Firefox 中完美运行，但在 Safari 中却不行。

```
<script type="text/javascript">    

$("#mainPage").on("pageshow", function (e) {

var sugList = $("#suggestions");

$("#CustomerCode").on("input", function (e) {
var text = $(this).val();

if (text.length < 1) {
    sugList.html("");
    sugList.listview("refresh");
} 
else {
      $.ajax({ cache: false,
      type: 'GET',
      dataType: 'json',
      url: '/Lookup/GetCustomer',
      data: { filterCustomerCode: text },
      success: function (res, code) {
      var str = "";
      for (var i = 0, len = res.length; i < len; i++) {
      str += '<li data-icon="arrow-r"><a href="/home/index?CustomerCode=' + res[i].Code + '" >' + res[i].Code + '</a></li>';
}
sugList.html(str);
sugList.listview("refresh");
console.dir(res);
},
async: true
});
}
});

});

</script> 
```

非常感谢，

马杜兰加

# ruby-on-rails - 查询不在连接表中的位置

> ID：14700851
> 
> 赞同：0
> 
> 时间：2013-02-05T05:37:27.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个`Image`模型和一个`User`模型。我通过一个名为`likes`. 也`Image`属于一个`User`

我正在尝试查找所有不属于某个用户且该用户不喜欢的图像。我似乎无法想出 where 条件。

这就是我所拥有的：

```
@image = Image.where("user_id != :user_id AND image_id NOT IN :likes", {:user_id => session[:user].id, :likes => session[:user].likes}).first 
```

这是我的`Image`和`User`模型：

```
class Image < ActiveRecord::Base
# attr_accessible :title, :body
 belongs_to :user
 has_and_belongs_to_many :likes, :class_name => 'User'
end

class User < ActiveRecord::Base
 # attr_accessible :title, :body
 has_many :submitted_images, :class_name => 'Image'
 has_and_belongs_to_many :likes, :class_name => 'Image'
end 
```

有人可以帮我提出这个查询吗？谢谢！

**编辑**

我得到的语法错误：

```
PG::Error: ERROR:  syntax error at or near "3"
LINE 1: ... FROM "images"  WHERE (user_id != 1 AND image_id NOT IN 3,5) LIMIT...
                                                         ^
: SELECT  "images".* FROM "images"  WHERE (user_id != 1 AND image_id NOT IN 3,5) LIMIT 1 
```

如果您查看我的`images_users`AKA`likes`表，您可以看到`3,5`我的错误来自哪里：

![我的桌子](../Images/cfbcca1447df75992eea7685cd38175f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:07:49.627

首先，您应该为您的关联使用一些有意义的名称。例如，您可以使用`has_and_belongs_to_many :appreciators, :class_name => 'User'`或类似的东西，这更有意义。尽管您的查询不会受此影响。:)

无论如何，我可以为您当前的设置建议的是：

```
@image = Image.where("user_id != :user_id AND id NOT IN (:likes)", {:user_id => session[:user].id, :likes => session[:user].likes}).first 
```

# fortran90 - Fortran 程序错误

> ID：14700855
> 
> 赞同：0
> 
> 时间：2013-02-05T05:37:57.240
> 
> 标签：fortran90

我希望你能帮助我编写一个程序来转换表 (p, 3) 中的 fortran 数组 (n, m)。

我试过这个程序：

```
program Temp
implicit none
real,dimension (23250,27)::table
real::time
integer::i
integer::j
integer::wl
integer::al
  i=1,23250  
read(*,*) time(i),wl(i),(table(i,j),j=1,27)
 j=1,27 
alt(j)=j
write(*,*) time(i),alt(j),table(i,j)
continue
continue 

endprogram Temp 
```

但错误消息显示为：

```
 D:\Travaux de thèse\modeling\essay\essay.f90(9) : Error: Syntax error, found ',' when expecting one of: <END-OF-STATEMENT> ;
  i=1,23250  
-----^
D:\Travaux de thèse\modeling\essay\essay.f90(11) : Error: Syntax error, found ',' when expecting one of: <END-OF-STATEMENT> ;
 j=1,27 
----^
D:\Travaux de thèse\modeling\essay\essay.f90(10) : Error: Constants and expressions are invalid in read-only I/O lists.   [TIME]
read(*,*) time(i),wl(i),(table(i,j),j=1,27)
----------^
D:\Travaux de thèse\modeling\essay\essay.f90(10) : Error: Constants and expressions are invalid in read-only I/O lists.   [WL]
read(*,*) time(i),wl(i),(table(i,j),j=1,27)
------------------^
D:\Travaux de thèse\modeling\essay\essay.f90(12) : Error: This name has not been declared as an array.   [ALT]
alt(j)=j
^
Error executing df.exe.

essay.exe - 5 error(s), 0 warning(s) 
```

谁能帮助我？提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:46:13.433

仅从您的示例代码来看，很难弄清楚这段代码的去向。您在定义的问题中提到的数组“数组”在哪里？如果你想循环一些东西，你需要使用'do'语句[1]。此外，我会尝试以编程方式访问该数组的维度，因此您不必对其进行硬编码。以下代码片段不完整，但也许它可以让您继续前进。

```
program Temp
implicit none
real,dimension (23250,27)::table
integer, dimension(2) :: table_shape
real::time
integer::i
integer::j
integer::wl
integer::al

table_shape = shape(table)
do i=1, table_shape(1)
    read(*,*) time(i),wl(i),(table(i,j),j=1,27)
    do j=1, table_shape(2)
        alt(j)=j
        write(*,*) time(i),al(j),table(i,j)
        !continue
        !continue 
    enddo
enddo

endprogram Temp 
```

最好的，马克斯

[1] [http://en.wikibooks.org/wiki/Fortran/Fortran_control](http://en.wikibooks.org/wiki/Fortran/Fortran_control)

# ios - 通知用户防火墙正在阻止 iOS 应用

> ID：14700856
> 
> 赞同：0
> 
> 时间：2013-02-05T05:37:58.917
> 
> 标签：ios

我如何通知用户防火墙阻止了应用程序的互联网访问。iOS中有没有这样的课程。如果是这样，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:56:12.870

无法确定防火墙是否阻止了网络访问。相反，只需检查是否可以访问特定资源。如果不是，请通知用户该资源不可访问，并建议这可能是由防火墙引起的。

# c# - 使用 LEFT JOIN 到 LINQ 表达式语法的多个连接语句

> ID：14700857
> 
> 赞同：3
> 
> 时间：2013-02-05T05:37:58.853
> 
> 标签：c#, linq, entity-framework, linq-method-syntax

我有一个稍微复杂的 SQL 查询，我正在尝试将其转换为 LINQ 表达式语法，因为这是我们用于代码库的语法。不过，网上的每个人似乎都使用查询语法，这使得找到正确答案变得相当困难。

查询如下，并准确返回我所追求的（可能有更好的方法来做这个查询，请随时提出建议）；

```
SELECT e.*, ce.Certificate_ID
FROM FCERTSTest.dbo.Entities AS e 
INNER JOIN FCERTSTest.dbo.RequirementEntries AS re 
ON re.Position_ID = e.EntityPosition_ID
LEFT JOIN FCERTSTest.dbo.CertificateEntries AS ce
ON ce.Entity_ID = e.EntityID AND ce.Certificate_ID = re.Certificate_ID
WHERE ce.Certificate_ID IS NULL 
```

问题是转换这个。到目前为止，我所拥有的是；

```
List<Entities> unqualified = new List<Entities>();

unqualified = Entities.Join(RequirementEntries,
                            ent => ent.EntityPosition_ID,
                            req => req.Position_ID,
                            (ent, req) => ent).ToList(); 
```

我从互联网上提取的...老实说，我 100% 不理解查询，但它得到了 Entity who's Position has a Requirement，这就是它的意思。

所以最后，如果有人可以帮助我转换 SQL 语句的其余部分，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:01:27.267

这是您的原始查询在 LINQ 方法语法中的外观：

```
unqualified = Entities.Join(RequirementEntries,
                            ent => ent.EntityPosition_ID,
                            req => req.Position_ID,
                            (e, r) => new {e,r})
                      .GroupJoin(CertificateEntries.Where(c=>c.CertificateID == null),
                                 req => new{ Cid = (int?) req.r.Certificate_ID, Eid = (int?) req.e.EntityID },
                                 cer => new{ Cid = (int?) cer.Certificate_ID, Eid = (int?) cer.EntityID },
                                 (x,y) => new {EnRe = x, Cer = y })
                      .SelectMany(x=> x.Cer.DefaultIfEmpty(),
                                  (x,y) => new { Ent = x.Enre.e, Certs = y}); 
```

这里`GroupJoin`相当于 SQL `LEFT JOIN`。

*恕我直言，这种复杂的连接方法语法很尴尬。查询语法将更具可读性。*

# c# - 将下拉列表设置为初始值

> ID：14700858
> 
> 赞同：0
> 
> 时间：2013-02-05T05:38:03.167
> 
> 标签：c#, asp.net, drop-down-menu

我已经使用 for 循环在下拉列表中手动添加了值。

```
 for (int i = 1; i <= 31; i++)
    {
        date0.Items.Add(i.ToString());
        date1.Items.Add(i.ToString());
        date2.Items.Add(i.ToString());
        date3.Items.Add(i.ToString());
    }

    for (int j = 1; j <= 12; j++)
    {
        month0.Items.Add(j.ToString());
        month1.Items.Add(j.ToString());
        month2.Items.Add(j.ToString());
        month3.Items.Add(j.ToString());

    }

    for (int k = DateTime.Now.Year; k <= 2020; k++)
    {
        yyyy0.Items.Add(k.ToString());
        yyyy1.Items.Add(k.ToString());
        yyyy2.Items.Add(k.ToString());
        yyyy3.Items.Add(k.ToString());
    } 
```

现在在清除按钮上，我想清除这些值并将它们设置为初始值。我尝试调用初始化它们的函数。但它没有发生。有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:43:08.457

只有当页面不是回发时，您才需要填写下拉列表

```
if (! IsPostBack) {

   //Fill out the dropdown list

} 
```

并确保为要设置回初始值的那些设置 SelectedIndex = 0

```
month0.SelectedIndex = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:51:54.213

您可以通过将 SelectedIndex 设置为 0 将其重置为第一条记录，以便选择列表中的第一个元素：

```
date0.SelectedIndex = 0;
date1.SelectedIndex = 0;
date2.SelectedIndex = 0;
date3.SelectedIndex = 0;

month0.SelectedIndex = 0;
month1.SelectedIndex = 0;
month2.SelectedIndex = 0;
month3.SelectedIndex = 0;

yyyy0.SelectedIndex = 0;
yyyy1.SelectedIndex = 0;
yyyy2.SelectedIndex = 0;
yyyy3.SelectedIndex = 0; 
```

你可以把它放在清除按钮上。

# asp.net-mvc - 具有键“MaritalStatus”的 ViewData 项属于“System.String”类型，但必须属于“IEnumerable”类型 '

> ID：14700861
> 
> 赞同：2
> 
> 时间：2013-02-05T05:38:14.023
> 
> 标签：asp.net-mvc, razor

我正在`DropDownList`从内存数据中填充并在 POST 上收到此错误。

> 错误：具有键“MaritalStatus”的 ViewData 项属于“System.String”类型，但必须属于“IEnumerable”类型。

控制器：-

```
// GET: /Application/Create
public ActionResult Create()
{
    List<SelectListItem> lst = new List<SelectListItem>();
    lst.Add(new SelectListItem { Text = "Unmarried", Value = "1" });
    lst.Add(new SelectListItem { Text = "Married", Value = "2" });
    lst.Add(new SelectListItem { Text = "Widow", Value = "3" });
    ViewBag.MaritalStatus = new SelectList(lst, "Value", "Text");

    return View();
}

// POST: /Application/Create
[HttpPost]
public ActionResult Create(ApplicationForm applicationform)
{
    if (ModelState.IsValid)
    {
        db.ApplicationForms.Add(applicationform);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(applicationform);
} 
```

看法：-

```
<div class="editor-label">
    @Html.LabelFor(model => model.MaritalStatus)
</div>
<div class="editor-field">
    @Html.DropDownList("MaritalStatus")
    @Html.ValidationMessageFor(model => model.MaritalStatus)
</div> 
```

模型属性：-

```
[DisplayName("Marital Status")]
public string MaritalStatus { get; set; } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T06:03:57.107

好吧，我通过在 POST 操作中重新填充列表来解决这个问题，这是完整的工作代码。

```
 //
    // GET: /Application/Create

    public ActionResult Create()
    {
        List<SelectListItem> lst = new List<SelectListItem>();
        lst.Add(new SelectListItem { Text = "Unmarried", Value = "Unmarried" });
        lst.Add(new SelectListItem { Text = "Married", Value = "Married" });
        lst.Add(new SelectListItem { Text = "Widow", Value = "Widow" });
        ViewBag.MaritalStatus = new SelectList(lst, "Value", "Text");

        return View();
    }

    //
    // POST: /Application/Create

    [HttpPost]
    public ActionResult Create(ApplicationForm applicationform)
    {
        if (ModelState.IsValid)
        {
            db.ApplicationForms.Add(applicationform);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        else
        {
            List<SelectListItem> lst = new List<SelectListItem>();
            lst.Add(new SelectListItem { Text = "Unmarried", Value = "1" });
            lst.Add(new SelectListItem { Text = "Married", Value = "2" });
            lst.Add(new SelectListItem { Text = "Widow", Value = "3" });
            ViewBag.MaritalStatus = new SelectList(lst, "Value", "Text");
        }

        return View(applicationform);
    } 
```

# node.js - Node.js + AngularJS + socket.io：连接状态和手动断开连接

> ID：14700865
> 
> 赞同：5
> 
> 时间：2013-02-05T05:38:40.997
> 
> 标签：node.js, angularjs, socket.io

我在客户端使用 nodejs 和 socket.io 和 angularjs。我从 Internet 上获取了 angular-socketio 示例并为其添加了`disconnect`方法。

套接字服务：

```
angular.module('app')
  .factory('socket', ['$rootScope', function ($rootScope) {

    var socket = io.connect();

    return {
      on: function (eventName, callback) {
        socket.on(eventName, function () {  
          var args = arguments;
          $rootScope.$apply(function () {
            callback.apply(socket, args);
          });
        });
      },
      emit: function (eventName, data, callback) {
        socket.emit(eventName, data, function () {
          var args = arguments;
          $rootScope.$apply(function () {
            if (callback) {
              callback.apply(socket, args);
            }
          });
        })
      },
      disconnect: function () {
        socket.disconnect();
      },
      socket: socket
    };

  }]); 
```

控制器：

```
angular.module('app')
  .controller('Controller', ['$scope', 'socket', function ($scope, socket) {

    socket.emit('register')

    socket.on('connect', function () {
        console.log('Socket connected');
    });

    socket.on('disconnect', function () {
        console.log('Socket disconnected');
    });

    socket.on('register', function (reginfo) {
        console.log('Register: %s, cname=%s', reginfo.ok, reginfo.cname);
        socket.disconnect(); // <-- this line throw Error
    });

    socket.on('last', updateSnapshot);

    socket.on('state', updateSnapshot);

    function updateSnapshot(snapshot) { ... }

}]); 
```

但是当我尝试断开使用此方法时，我会捕获错误：

```
Error: $apply already in progress
  at Error (<anonymous>)
  at beginPhase (http://localhost:4000/scripts/vendor/angular.js:8182:15)
  at Object.$get.Scope.$apply (http://localhost:4000/scripts/vendor/angular.js:7984:11)
  at SocketNamespace.on (http://localhost:4000/scripts/services/socket.js:10:32)
  at SocketNamespace.EventEmitter.emit [as $emit] (http://localhost:4000/socket.io/socket.io.js:633:15)
  at Socket.publish (http://localhost:4000/socket.io/socket.io.js:1593:19)
  at Socket.onDisconnect (http://localhost:4000/socket.io/socket.io.js:1970:14)
  at Socket.disconnect (http://localhost:4000/socket.io/socket.io.js:1836:12)
  at SocketNamespace.<anonymous> (http://localhost:4000/scripts/controllers/controller.js:38:34)
  at on (http://localhost:4000/scripts/services/socket.js:11:34) 
```

而且我不知道在哪里挖……</p>

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T06:46:51.507

**[更新]**

`$$phase`是 Angular 的一个内部私有变量，因此你不应该真正依赖它来处理这样的事情。伊戈尔在另一个答案中描述了一些处理这个问题的建议，应该使用这些建议（我听说他对 Angular 了解一两件事。;）

* * *

当模型发生变化并且事件从 Angular 框架内触发时，Angular 可以根据需要进行脏跟踪并更新任何必要的视图。当您想与Angular*之外*的代码进行交互时，您必须将必要的函数调用包装在`$apply`作用域的方法中，以便 Angular 知道正在发生的事情。这就是代码读取的原因

```
$rootScope.$apply(function () {
  callback.apply(socket, args);
}); 
```

等等。它告诉 Angular，“采用通常不会触发 Angular 视图更新的代码，并按应有的方式对待它。”

问题是当您`$apply`已经在通话时`$apply`打电话。例如，以下将引发`$apply already in progress`错误：

```
$rootScope.$apply(function() {
  $rootScope.$apply(function() {
    // some stuff
  });
}); 
```

根据您的堆栈跟踪，看起来某些对`emit`（已经使用`$apply`）的调用触发了对`on`（也使用`$apply`）的调用。要解决这个问题，我们只需要`$apply`在 an`$apply`尚未进行时调用。值得庆幸的是，范围上有一个名为的属性`$$phase`可以告诉我们是否正在进行脏检查。

我们可以轻松地构建一个函数，该函数需要一个作用域和一个函数来运行，然后`$apply`仅当一个函数尚未在运行时才运行该函数：

```
var safeApply = function(scope, fn) {
  if (scope.$$phase) {
    fn(); // digest already in progress, just run the function
  } else {
    scope.$apply(fn); // no digest in progress, run the function with $apply
  }
}; 
```

现在我们可以替换调用

```
$rootScope.$apply(function...); 
```

到

```
safeApply($rootScope, function...); 
```

例如，要修改上面的代码，

```
angular.module('app')
  .factory('socket', ['$rootScope', function ($rootScope) {

    var safeApply = function(scope, fn) {
      if (scope.$$phase) {
        fn(); // digest already in progress, just run the function
      } else {
        scope.$apply(fn); // no digest in progress, run with $apply
      }
    };

    var socket = io.connect();

    return {
      on: function (eventName, callback) {
        socket.on(eventName, function () {  
          var args = arguments;
          safeApply($rootScope, function () {
            callback.apply(socket, args);
          });
        });
      },
      emit: function (eventName, data, callback) {
        socket.emit(eventName, data, function () {
          var args = arguments;
          safeApply($rootScope, function () {
            if (callback) {
              callback.apply(socket, args);
            }
          });
        })
      },
      disconnect: function () {
        socket.disconnect();
      },
      socket: socket
    };

  }]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-13T16:51:39.210

这个问题的核心（就像在大多数其他情况下一样）是该`on`方法在大多数情况下被异步调用（好！）但在某些情况下也是同步调用（坏！）。

当您`socket.disconnect()`从您的应用程序（从位于“角度上下文”中的控制器内）调用时，它会同步触发断开连接事件，然后该事件传播到`on`旨在打开角度上下文边界的方法中。但是由于您已经处于角度上下文中，因此角度会抱怨您提到的错误。

由于此问题特定于断开呼叫，因此此处的最佳选择是

*   使用 setTimeout 或 $timeout（将 invokeApply arg 设置为 false）使断开连接异步，或者
*   保留一个内部标志，它会告诉您是否处于断开连接阶段，在这种情况下，请跳过 $apply

示例代码：

```
angular.module('app')
  .factory('socket', ['$rootScope', function ($rootScope, $timeout) {

    var socket = io.connect();

    return {
      on: function (eventName, callback) {
        socket.on(eventName, function () {  
          var args = arguments;
          $rootScope.$apply(function () {
            callback.apply(socket, args);
          });
        });
      },
      emit: function (eventName, data, callback) {
        socket.emit(eventName, data, function () {
          var args = arguments;
          $rootScope.$apply(function () {
            if (callback) {
              callback.apply(socket, args);
            }
          });
        })
      },
      disconnect: function () {
        $timeout(socket.disconnect, 0, false);
      },
      socket: socket
    };

  }]); 
```

或者

```
angular.module('app')
  .factory('socket', ['$rootScope', function ($rootScope) {

    var socket = io.connect(),
        disconnecting = false;

    return {
      on: function (eventName, callback) {
        socket.on(eventName, function () {  
          var args = arguments;
          if (!disconnecting) {
            $rootScope.$apply(function () {
              callback.apply(socket, args);
            });
          } else {
            callback.apply(socket, args);
          }
        });
      },
      emit: function (eventName, data, callback) {
        socket.emit(eventName, data, function () {
          var args = arguments;
          $rootScope.$apply(function () {
            if (callback) {
              callback.apply(socket, args);
            }
          });
        })
      },
      disconnect: function () {
        disconnecting = true;
        socket.disconnect();
      },
      socket: socket
    };

  }]); 
```

# blackberry - 如果我们知道主密码，我们可以获得密码管理器数据备份吗？

> ID：14700872
> 
> 赞同：1
> 
> 时间：2013-02-05T05:39:08.667
> 
> 标签：blackberry, passwords

标题解释了我的问题。如果我们知道黑莓的密码管理员的主密码，那么我们可以得到它的数据备份。我需要这个，因为我正在开发一个应用程序，该应用程序根据用户设置的主密码备份密码管理器数据库。提前非常感谢。

# asp.net-mvc - MVC 中 TextBoxFor 的显示格式

> ID：14700873
> 
> 赞同：26
> 
> 时间：2013-02-05T05:39:08.947
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我需要将 4 位小数四舍五入为 2 位并在 MVC 3 UI 中显示

**像这样的东西 58.8964 到 58.90**

尝试遵循此[如何在 MVC 中将 EditorFor() 用于货币/货币类型？](https://stackoverflow.com/questions/5080451/how-should-i-use-editorfor-in-mvc-for-a-currency-money-type)但不工作。

> 当我使用 TextBoxFor=> 时，我在这里删除了 ApplyFormatInEditMode。即使我尝试过 ApplyFormatInEditMode ，但没​​有任何效果。仍然显示 58.8964。

我的模型类

```
 [DisplayFormat(DataFormatString = "{0:F2}")]
 public decimal? TotalAmount { get; set; }

 @Html.TextBoxFor(m=>m.TotalAmount) 
```

***我怎样才能完成这一轮？***

**我不能在这里使用 EditorFor(m=>m.TotalAmount)，因为我需要传递一些 htmlAttributes**

编辑：

用 MVC 源码调试后，他们内部使用

```
 string valueParameter = Convert.ToString(value, CultureInfo.CurrentCulture); 
```

在 InputExtension.cs 的 MvcHtmlString InputHelper() 方法中，将 **对象值**作为参数并进行转换。他们在那里没有使用任何显示格式。我们该如何解决？

我设法以这种方式修复。由于我有一个自定义助手，我可以使用以下代码进行管理

```
 if (!string.IsNullOrEmpty(modelMetaData.DisplayFormatString))
   {
     string formatString = modelMetaData.DisplayFormatString;
     string formattedValue = String.Format(CultureInfo.CurrentCulture, formatString, modelMetaData.Model);
     string name = ExpressionHelper.GetExpressionText(expression);
     string fullName = htmlHelper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(name);
       return htmlHelper.TextBox(fullName, formattedValue, htmlAttributes);
   }
   else
   {
       return htmlHelper.TextBoxFor(expression, htmlAttributes);
   } 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2014-07-10T06:20:54.820

这适用于 MVC5

```
@Html.TextBoxFor(m => m.TotalAmount, "{0:0.00}") 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-05T07:48:07.593

如果要考虑自定义格式，则应使用`Html.EditorFor`而不是：`Html.TextBoxFor`

```
@Html.EditorFor(m => m.TotalAmount) 
```

还要确保您已设置`ApplyFormatInEditMode`为 true：

```
[DisplayFormat(DataFormatString = "{0:F2}", ApplyFormatInEditMode = true)]
public decimal? TotalAmount { get; set; } 
```

DisplayFormat 属性旨在仅与模板化帮助器一起使用，例如`EditorFor`和`DisplayFor`。这是推荐的方法，而不是使用`TextBoxFor`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T06:24:57.440

试试这样：

```
@{
     var format = String.Format("{0:0.00}", Model.TotalAmount);
}
@Html.TextBoxFor(m => m.TotalAmount, format) 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-16T08:01:55.513

如果您需要对正在显示的字段进行更多控制（与内置的 EditorFor 模板相比），请自行创建自定义 EditorFor 模板。在 EditorFor 模板中，内置的 Html Helpers like`@Html.TextBox()`可以与**自动客户端验证和 Display 属性**一起使用，这些属性通常仅适用于`EditorFor`和`DisplayFor`。

例如循环遍历项目列表。输入名称必须有一个完整的索引。

```
// Optional, if you require a custom input name for binding
String fieldName = String.Format("FieldNameForBinding[{0}].Property", index)

@Html.EditorFor(m => m.Property, "MyCustomEditorTemplate", fieldName) 
```

然后你可以设置你的模型

```
[CustomValidation(..optional..)]
[DisplayFormat(DataFormatString = "{0:F2}", ApplyFormatInEditMode = true)]
public decimal? TotalAmount { get; set; } 
```

EditorFor 模板（例如在 ~/Views/Shared/EditorFor/MyCustomEditorTemplate.cshtml 中）注意名称留空，它来自 `fieldName`自动。你可以在`ViewData.TemplateInfo.HtmlFieldPrefix`. 现在您可以完全控制字段的显示。

```
@model object
@{
    Decimal? actualValue = (Decimal?)Model;
}
// The TextBox and ValidationMessage "names" are empty, they are filled   
// from the htmlFieldName given via the @Html.EditorFor() call.
@Html.TextBox("", actualValue, new { @class = "cssClass" })
@Html.ValidationMessage("") 
```

这个想法是您可以根据需要自定义输入字段，并使用例如 @Html.TextBox() ，它**在**自定义 EditorFor 模板之外不会使用内置的客户端验证。您不需要使用输入字段的自定义命名，这只是该解决方案有用性的一个示例。您可以自定义数据的呈现方式（CSS 等），而不是依赖于内置的 EditorFor 模板。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-15T22:58:17.897

我以这种方式解决了这个问题：

```
@Html.TextBoxFor(model => model.dtArrivalDate, ModelMetadata.FromLambdaExpression(model => model.dtArrivalDate, ViewData).EditFormatString) 
```

或创建下一个扩展：

```
public static class HtmlExtensions
{
    public static MvcHtmlString TextBoxWithFormatFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, object htmlAttributes)
    {
        return htmlHelper.TextBoxFor(expression, ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData).EditFormatString, htmlAttributes);
    }
} 
```

但是你需要进入`ApplyFormatInEditMode=true`你`DisplayFormatAttribute`的领域。

# android - 在线性布局android中动态定位复选框

> ID：14700878
> 
> 赞同：1
> 
> 时间：2013-02-05T05:39:39.263
> 
> 标签：android, android-widget, android-linearlayout, android-relativelayout, android-checkbox

我想在它下面有一个图像视图和一个复选框。我已经能够得到一些接近。但是，我的复选框没有在中心对齐。如何将复选框放置在中心？这是我的代码：

 `````
 // Creating a new LinearLayout
         linearLayout = new LinearLayout(mContext);

        // Setting the orientation to vertical
        linearLayout.setOrientation(LinearLayout.VERTICAL);

        // Defining the LinearLayout layout parameters to wrap content.
        LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT);

        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setImageResource(mThumbIds[position]);
        imageView.setPadding(8, 8, 8, 8);

        linearLayout.addView(imageView);

        CheckBox checkbox = new CheckBox(mContext);
        checkbox.setGravity(Gravity.CENTER);//this does not help

        linearLayout.addView(checkbox); 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:28:06.277

我建议您在 xml 文件中将您的复选框从该复选框`LinearLayout`移到另一个复选框。`LinearLayout`或`RelativeLayout`在您的图像视图下方插入一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:15:13.810

该死！在您的情况下`RelativeLayout`将比`LinearLayout`.

我实现了使用`RelativeLayout`，检查以下代码：

```
RelativeLayout layout = new RelativeLayout(this);

        RelativeLayout.LayoutParams llp = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);

        RelativeLayout.LayoutParams imageparam = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);

         ImageView imageView = new ImageView(this);

        //imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setImageResource(R.drawable.testing);
        imageView.setPadding(8, 8, 8, 8);
        imageView.setLayoutParams(imageparam);
        imageView.setId(1);
        layout.addView(imageView);

        RelativeLayout.LayoutParams checkparam = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);

        CheckBox checkbox = new CheckBox(this);

        checkparam.addRule(RelativeLayout.BELOW, imageView.getId());

        checkparam.addRule(RelativeLayout.CENTER_IN_PARENT, 1);

        checkbox.setLayoutParams(checkparam);
        layout.addView(checkbox);
        setContentView(layout,llp); 
`````

# inno-setup - 调用java时从exec返回'不正确的函数'

> ID：14700880
> 
> 赞同：3
> 
> 时间：2013-02-05T05:39:59.430
> 
> 标签：inno-setup

我在调用`cmd to excute java`，但是`resultcode`一直是1，检查后发现它代表'不正确的功能'。我的代码是这样的：

```
Exec('cmd', '/c C:\Program Files\jre\bin\java -version','' , SW_HIDE,   ewWaitUntilTerminated, ResultCode); 
```

我还调用了以下代码，它也不起作用：

```
 Exec('cmd', '/c "C:\Program Files\jre\bin\java -version"','' , SW_HIDE,  ewWaitUntilTerminated, ResultCode); 
```

如果我调用以下代码，它可以工作

```
 Exec('cmd', '/c java -version','' , SW_HIDE, ewWaitUntilTerminated, ResultCode); 
```

**似乎无法识别 java 路径中的空格**。有谁知道如何纠正它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:27:29.563

您的第一次尝试失败，因为文件路径中有一个空格，该空格没有用双引号括起来。您的第二次尝试失败了，因为除了文件路径和传递的参数之外，您已经用双引号括起来了`-version`。而且，在这两种情况下，您都缺少`.exe`应用程序路径的末尾。

你可以这样尝试：

```
Exec('cmd', '/c ""C:\Program Files\jre\bin\java.exe" -version"', '', SW_HIDE, ewWaitUntilTerminated, ResultCode); 
```

但是，我在这里错过了通过`cmd`shell 执行它的原因。我想你可以通过`java.exe`这种方式直接调用：

```
Exec('C:\Program Files\jre\bin\java.exe', '-version', '', SW_HIDE, ewWaitUntilTerminated, ResultCode); 
```

只是一个题外话，你确定`java.exe`会一直在`C:\Program Files\jre\bin\`吗？

# wso2 - 使用手动配置创建、发布和订阅 API

> ID：14700885
> 
> 赞同：1
> 
> 时间：2013-02-05T05:40:25.437
> 
> 标签：wso2, wso2-am

我能够使用 WSO2 API Manager Web 控制台创建、发布和订阅 API。有没有办法通过 xml 配置或任何其他方式手动执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:26:41.330

要创建和发布 API，您需要使用 Publisher。要订阅 API，您需要通过商店执行此操作。这是你一直试图做的吗？

请参阅[快速入门指南](http://docs.wso2.org/wiki/display/AM130/Quick+Start+Guide)了解详细信息，如果您遇到任何问题，请告诉我们。

干杯，阿娇

# pygame - Pygame 级别/菜单状态

> ID：14700889
> 
> 赞同：16
> 
> 时间：2013-02-05T05:40:36.970
> 
> 标签：pygame

使用下面的代码，实现游戏状态以控制关卡的最简单和最简单的方法是什么？如果我想从标题屏幕开始然后加载一个级别，并在完成后进入下一个级别？如果有人可以解释处理此问题的最简单方法，那就太好了！

```
import pygame
from pygame import *

WIN_WIDTH = 1120 - 320
WIN_HEIGHT = 960 - 320
HALF_WIDTH = int(WIN_WIDTH / 2)
HALF_HEIGHT = int(WIN_HEIGHT / 2)

DISPLAY = (WIN_WIDTH, WIN_HEIGHT)
DEPTH = 0
FLAGS = 0
CAMERA_SLACK = 30

def main():
    global level
    pygame.init()
    screen = pygame.display.set_mode(DISPLAY, FLAGS, DEPTH)
    pygame.display.set_caption("ABCDEFGHIJKLMNOPQRSTUVWXYZ")
    timer = pygame.time.Clock()
    level = 0

    bg = Surface((32,32))
    bg.convert()
    bg.fill(Color("#0094FF"))

    up = left = right = False
    entities = pygame.sprite.Group()
    player = Player(32, 32)
    enemy = Enemy(32,32)
    platforms = []

    x = 0
    y = 0

    if level == 0:
        level = [
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                            ",
            "                                         E  ",
            "                            PPPPPPPPPPPPPPPP",
            "                            PPPPPPPPPPPPPPPP",
            "                            PPPPPPPPPPPPPPPP",
            "               PPPPP        PPPPPPPPPPPPPPPP",
            "                            PPPPPPPPPPPPPPPP",
            "                            PPPP           P",
            "                            PPPP           P",
            "                            PPPP     PPPPPPP",
            "                      PPPPPPPPPP     PPPPPPP",
            "                            PPPP     PPPPPPP",
            "       PPPP                 PPPP     PPPPPPP",
            "                            PPPP     PPPPPPP",
            "                            PPPP     PPPPPPP",
            "                            PPPP     PPPPPPP",
            "PPPPP                       PPPP     PPPPPPP",
            "PPP                         PPPP     PPPPPPP",
            "PPP                         PPPP     PPPPPPP",
            "PPP                         PPPP     PPPPPPP",
            "PPP         PPPPP           PPPP     PPPPPPP",
            "PPP                                     PPPP",
            "PPP                                     PPPP",
            "PPP                                     PPPP",
            "PPP                       PPPPPPPPPPPPPPPPPP",
            "PPP                       PPPPPPPPPPPPPPPPPP",
            "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
            "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
            "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
            "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
            "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",]

        #background = pygame.image.load("Untitled.png")

    total_level_width = len(level[0]) * 32
    total_level_height = len(level) * 32

    # build the level
    for row in level:
        for col in row:
            if col == "P":
                p = Platform(x, y)
                platforms.append(p)
                entities.add(p)
            if col == "E":
                e = ExitBlock(x, y)
                platforms.append(e)
                entities.add(e)
            x += 32
        y += 32
        x = 0

    camera = Camera(complex_camera, total_level_width, total_level_height)
    entities.add(player)
    entities.add(enemy)

    while 1:
        timer.tick(60)

        for e in pygame.event.get():
            if e.type == QUIT: raise SystemExit, "QUIT"
            if e.type == KEYDOWN and e.key == K_ESCAPE:
                raise SystemExit, "ESCAPE"

            if e.type == KEYDOWN and e.key == K_UP:
                up = True
            if e.type == KEYDOWN and e.key == K_LEFT:
                left = True
            if e.type == KEYDOWN and e.key == K_RIGHT:
                right = True

            if e.type == KEYUP and e.key == K_UP:
                up = False
            if e.type == KEYUP and e.key == K_LEFT:
                left = False
            if e.type == KEYUP and e.key == K_RIGHT:
                right = False

        # draw background
        for y in range(20):
            for x in range(25):
                screen.blit(bg, (x * 32, y * 32))

        # draw background
        #screen.blit(background, camera.apply((0,0)))
        #draw entities
        for e in entities:
            screen.blit(e.image, camera.apply(e))
        # update player, update camera, and refresh
        player.update(up, left, right, platforms)
        enemy.update(platforms)
        camera.update(player)
        pygame.display.flip()

class Camera(object):
    def __init__(self, camera_func, width, height):
        self.camera_func = camera_func
        self.state = Rect(0, 0, width, height)

    def apply(self, target):
        try:
            return target.rect.move(self.state.topleft)
        except AttributeError:
            return map(sum, zip(target, self.state.topleft))

    def update(self, target):
        self.state = self.camera_func(self.state, target.rect)

def complex_camera(camera, target_rect):
    l, t, _, _ = target_rect
    _, _, w, h = camera
    l, t, _, _ = -l + HALF_WIDTH, -t +HALF_HEIGHT, w, h

    l = min(0, l)                           # stop scrolling left
    l = max(-(camera.width - WIN_WIDTH), l)   # stop scrolling right
    t = max(-(camera.height-WIN_HEIGHT), t) # stop scrolling bottom

    return Rect(l, t, w, h)

class Entity(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)

class Player(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.xvel = 0
        self.yvel = 0
        self.onGround = False
        self.image = Surface((32,32))
        self.image.fill(Color("#0000FF"))
        self.image.convert()
        self.rect = Rect(200, 1200, 32, 32)

    def update(self, up, left, right, platforms):
        if self.rect.top > 1440 or self.rect.top < 0:
            main()
        if self.rect.left > 1408 or self.rect.right < 0:
            main()
        if up:
            if self.onGround:
                self.yvel = 0
                self.yvel -= 10 # only jump if on the ground
        if left:
            self.xvel = -10
        if right:
            self.xvel = 10
        if not self.onGround:
            self.yvel += 0.3 # only accelerate with gravity if in the air
            if self.yvel > 80: self.yvel = 80 # max falling speed
        if not(left or right):
            self.xvel = 0

        self.rect.left += self.xvel # increment in x direction
        self.collide(self.xvel, 0, platforms) # do x-axis collisions
        self.rect.top += self.yvel # increment in y direction
        self.onGround = False; # assuming we're in the air
        self.collide(0, self.yvel, platforms) # do y-axis collisions

    def collide(self, xvel, yvel, platforms):
        for p in platforms:
            if pygame.sprite.collide_rect(self, p):
                if isinstance(p, ExitBlock):
                    pygame.event.post(pygame.event.Event(QUIT))
                if xvel > 0: self.rect.right = p.rect.left
                if xvel < 0: self.rect.left = p.rect.right
                if yvel > 0:
                    self.rect.bottom = p.rect.top
                    self.onGround = True
                if yvel < 0:
                    self.rect.top = p.rect.bottom

class Enemy(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.yVel = 0
        self.xVel = 0
        self.image = Surface((32,32))
        self.image.fill(Color("#00FF00"))
        self.image.convert()
        self.rect = Rect(300, 1200, 32, 32)
        self.onGround = False
        self.right_dis = False

    def update(self, platforms):
        if not self.onGround:
            self.yVel += 0.3

        if self.rect.left == 96:
            self.right_dis = False
        if self.rect.right == 480:
            self.right_dis = True
        if not self.right_dis:
            self.xVel = 2
        if self.right_dis:
            self.xVel = -2

        self.rect.left += self.xVel # increment in x direction
        self.collide(self.xVel, 0, platforms) # do x-axis collisions
        self.rect.top += self.yVel # increment in y direction
        self.onGround = False; # assuming we're in the air
        self.collide(0, self.yVel, platforms) # do y-axis collisions

    def collide(self, xVel, yVel, platforms):
        for p in platforms:
            if pygame.sprite.collide_rect(self, p):
                if xVel > 0: self.rect.right = p.rect.left
                if xVel < 0: self.rect.left = p.rect.right
                if yVel > 0:
                    self.rect.bottom = p.rect.top
                    self.onGround = True
                if yVel < 0:
                    self.rect.top = p.rect.bottom

class Platform(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        #self.image = Surface([32, 32], pygame.SRCALPHA, 32) #makes blocks invisible for much better artwork
        self.image = Surface((32,32)) #makes blocks visible for building levels
        self.image.convert()
        self.rect = Rect(x, y, 32, 32)

    def update(self):
        pass

class ExitBlock(Platform):
    def __init__(self, x, y):
        Platform.__init__(self, x, y)
        self.image = pygame.image.load("end.png")

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-06T10:44:41.193

首先，让我们摆脱这些丑陋的 if 块：

```
for e in pygame.event.get():
    if e.type == QUIT: raise SystemExit, "QUIT"
    if e.type == KEYDOWN and e.key == K_ESCAPE:
        raise SystemExit, "ESCAPE"

    if e.type == KEYDOWN and e.key == K_UP:
        up = True
    if e.type == KEYDOWN and e.key == K_LEFT:
        left = True
    if e.type == KEYDOWN and e.key == K_RIGHT:
        right = True

    if e.type == KEYUP and e.key == K_UP:
        up = False
    if e.type == KEYUP and e.key == K_LEFT:
        left = False
    if e.type == KEYUP and e.key == K_RIGHT:
        right = False 
```

我们可以将它们重写为：

```
for e in pygame.event.get():
    if e.type == QUIT: raise SystemExit, "QUIT"
    if e.type == KEYDOWN and e.key == K_ESCAPE:
        raise SystemExit, "ESCAPE"

pressed = pygame.key.get_pressed()
up, left, right = [pressed[key] for key in (K_UP, K_LEFT, K_RIGHT)] 
```

这将在以后派上用场。

* * *

回归主题：我们想要的是一堆不同的*场景*。每个*场景*都必须负责自己的屏幕渲染和事件处理。

让我们尝试将现有代码提取到*游戏场景中*，以便以后可以添加其他场景。我们首先创建一个空`Scene`类，它将作为我们场景的基类：

```
class Scene(object):
    def __init__(self):
        pass

    def render(self, screen):
        raise NotImplementedError

    def update(self):
        raise NotImplementedError

    def handle_events(self, events):
        raise NotImplementedError 
```

我们的计划是覆盖每个子类中的每个方法，因此我们`NotImplementedError`在基类中引发 s，以便我们很容易发现是否忘记这样做（我们也可以使用 ABC，但让我们保持简单）。

现在让我们将所有与运行游戏状态相关的内容（基本上就是所有内容）放入一个新`GameScene`类中。

```
class GameScene(Scene):
    def __init__(self):
        super(GameScene, self).__init__()
        level = 0
        self.bg = Surface((32,32))
        self.bg.convert()
        self.bg.fill(Color("#0094FF"))
        up = left = right = False
        self.entities = pygame.sprite.Group()
        self.player = Player(32, 32)
        self.enemy = Enemy(32,32)
        self.platforms = []

        x = 0
        y = 0

        if level == 0:
            level = [
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                            ",
                "                                         E  ",
                "                            PPPPPPPPPPPPPPPP",
                "                            PPPPPPPPPPPPPPPP",
                "                            PPPPPPPPPPPPPPPP",
                "               PPPPP        PPPPPPPPPPPPPPPP",
                "                            PPPPPPPPPPPPPPPP",
                "                            PPPP           P",
                "                            PPPP           P",
                "                            PPPP     PPPPPPP",
                "                      PPPPPPPPPP     PPPPPPP",
                "                            PPPP     PPPPPPP",
                "       PPPP                 PPPP     PPPPPPP",
                "                            PPPP     PPPPPPP",
                "                            PPPP     PPPPPPP",
                "                            PPPP     PPPPPPP",
                "PPPPP                       PPPP     PPPPPPP",
                "PPP                         PPPP     PPPPPPP",
                "PPP                         PPPP     PPPPPPP",
                "PPP                         PPPP     PPPPPPP",
                "PPP         PPPPP           PPPP     PPPPPPP",
                "PPP                                     PPPP",
                "PPP                                     PPPP",
                "PPP                                     PPPP",
                "PPP                       PPPPPPPPPPPPPPPPPP",
                "PPP                       PPPPPPPPPPPPPPPPPP",
                "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",]

            #background = pygame.image.load("Untitled.png")

        total_level_width = len(level[0]) * 32
        total_level_height = len(level) * 32

        # build the level
        for row in level:
            for col in row:
                if col == "P":
                    p = Platform(x, y)
                    self.platforms.append(p)
                    self.entities.add(p)
                if col == "E":
                    e = ExitBlock(x, y)
                    self.platforms.append(e)
                    self.entities.add(e)
                x += 32
            y += 32
            x = 0

        self.camera = Camera(complex_camera, total_level_width, total_level_height)
        self.entities.add(self.player)
        self.entities.add(self.enemy)

    def render(self, screen):
        for y in range(20):
            for x in range(25):
                screen.blit(self.bg, (x * 32, y * 32))

        for e in self.entities:
            screen.blit(e.image, self.camera.apply(e))

    def update(self):
        pressed = pygame.key.get_pressed()
        up, left, right = [pressed[key] for key in (K_UP, K_LEFT, K_RIGHT)]
        self.player.update(up, left, right, self.platforms)
        self.enemy.update(self.platforms)
        self.camera.update(self.player)

    def handle_events(self, events):
        for e in events:
            if e.type == KEYDOWN and e.key == K_ESCAPE:
                pass #somehow go back to menu 
```

还不完美，但是一个好的开始。与实际游戏玩法相关的所有内容都被提取到自己的类中。有些变量必须是实例变量，所以它们必须通过`self`.

现在我们需要改变`main`-function 来实际使用这个类：

```
def main():
    pygame.init()
    screen = pygame.display.set_mode(DISPLAY, FLAGS, DEPTH)
    pygame.display.set_caption("ABCDEFGHIJKLMNOPQRSTUVWXYZ")
    timer = pygame.time.Clock()
    running = True

    scene = GameScene()

    while running:
        timer.tick(60)

        if pygame.event.get(QUIT):
            running = False
            return
        scene.handle_events(pygame.event.get())
        scene.update()
        scene.render(screen)
        pygame.display.flip() 
```

请注意，我更改了两件小事：我`pygame.event.get(QUIT)`以前只获取一个可能`QUIT`的事件，因为这是我们在主循环中唯一感兴趣的事件。所有其他事件都直接传递到当前场景：`scene.handle_events(pygame.event.get())`.

此时，我们可以考虑将一些类提取到他们自己的文件中，但让我们继续吧。

让我们创建一个标题菜单：

```
class TitleScene(object):

    def __init__(self):
        super(TitleScene, self).__init__()
        self.font = pygame.font.SysFont('Arial', 56)
        self.sfont = pygame.font.SysFont('Arial', 32)

    def render(self, screen):
        # beware: ugly! 
        screen.fill((0, 200, 0))
        text1 = self.font.render('Crazy Game', True, (255, 255, 255))
        text2 = self.sfont.render('> press space to start <', True, (255, 255, 255))
        screen.blit(text1, (200, 50))
        screen.blit(text2, (200, 350))

    def update(self):
        pass

    def handle_events(self, events):
        for e in events:
            if e.type == KEYDOWN and e.key == K_SPACE:
                self.manager.go_to(GameScene(0)) 
```

这仅显示绿色背景和一些文本。如果玩家按下`SPACE`，我们想要开始第一关。注意这一行：

```
self.manager.go_to(GameScene(0)) 
```

这里我将参数传递`0`给`GameScene`类，所以让我们改变它，让它接受这个参数：

```
class GameScene(Scene):
    def __init__(self, level):
        ... 
```

`level = 0`正如您已经猜到的那样，可以删除该行。

那是什么`self.manager`？它只是一个为我们管理场景的小助手类。

```
class SceneMananger(object):
    def __init__(self):
        self.go_to(TitleScene())

    def go_to(self, scene):
        self.scene = scene
        self.scene.manager = self 
```

它从标题场景开始并将每个场景`manager`字段设置为自身以允许更改当前场景。如何实现这样的场景管理器有很多可能性，这是最简单的方法。一个缺点是每个场景都必须知道它之后是哪个场景，但这不应该现在困扰我们。

让我们使用我们的新的`SceneMananger`：

```
def main():
    pygame.init()
    screen = pygame.display.set_mode(DISPLAY, FLAGS, DEPTH)
    pygame.display.set_caption("ABCDEFGHIJKLMNOPQRSTUVWXYZ")
    timer = pygame.time.Clock()
    running = True

    manager = SceneMananger()

    while running:
        timer.tick(60)

        if pygame.event.get(QUIT):
            running = False
            return
        manager.scene.handle_events(pygame.event.get())
        manager.scene.update()
        manager.scene.render(screen)
        pygame.display.flip() 
```

直截了当。让我们快速添加第二个级别和一个赢/输屏幕，我们就完成了。

```
class CustomScene(object):

    def __init__(self, text):
        self.text = text
        super(CustomScene, self).__init__()
        self.font = pygame.font.SysFont('Arial', 56)

    def render(self, screen):
        # ugly! 
        screen.fill((0, 200, 0))
        text1 = self.font.render(self.text, True, (255, 255, 255))
        screen.blit(text1, (200, 50))

    def update(self):
        pass

    def handle_events(self, events):
        for e in events:
            if e.type == KEYDOWN:
                self.manager.go_to(TitleScene()) 
```

下面是完整的代码。注意`Player`类的变化：它不再调用`main`函数，而是调用场景中的方法来指示玩家到达出口或死亡。

另外，我改变了玩家和敌人的位置。现在，您指定实体将在关卡中出现的位置。例如`Player(5, 40)`，将在关卡的第 5 列第 40 行创建玩家。作为奖励，敌人可以进行适当的碰撞检测。

我将关卡的描述提取到名为 的字典`levels`中，因此可以根据需要轻松更改和添加关卡（稍后，您可能希望每个关卡一个文件，所以这是一个好的开始）。它可以扩展以保持玩家的起始位置，但您也可以创建一个特殊的图块，例如`*`用于起始位置和`E`关卡描述中的敌人。

```
import pygame
from pygame import *

WIN_WIDTH = 1120 - 320
WIN_HEIGHT = 960 - 320
HALF_WIDTH = int(WIN_WIDTH / 2)
HALF_HEIGHT = int(WIN_HEIGHT / 2)

DISPLAY = (WIN_WIDTH, WIN_HEIGHT)
DEPTH = 0
FLAGS = 0
CAMERA_SLACK = 30

levels = {0: {'level': [
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                         E  ",
                    "                            PPPPPPPPPPPPPPPP",
                    "                            PPPPPPPPPPPPPPPP",
                    "                            PPPPPPPPPPPPPPPP",
                    "               PPPPP        PPPPPPPPPPPPPPPP",
                    "                            PPPPPPPPPPPPPPPP",
                    "                            PPPP           P",
                    "                            PPPP           P",
                    "                            PPPP     PPPPPPP",
                    "                      PPPPPPPPPP     PPPPPPP",
                    "                            PPPP     PPPPPPP",
                    "       PPPP                 PPPP     PPPPPPP",
                    "                            PPPP     PPPPPPP",
                    "                            PPPP     PPPPPPP",
                    "                            PPPP     PPPPPPP",
                    "PPPPP                       PPPP     PPPPPPP",
                    "PPP                         PPPP     PPPPPPP",
                    "PPP                         PPPP     PPPPPPP",
                    "PPP                         PPPP     PPPPPPP",
                    "PPP         PPPPP           PPPP     PPPPPPP",
                    "PPP                                     PPPP",
                    "PPP                                     PPPP",
                    "PPP                                     PPPP",
                    "PPP                       PPPPPPPPPPPPPPPPPP",
                    "PPP                       PPPPPPPPPPPPPPPPPP",
                    "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                    "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                    "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                    "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                    "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",],
             'enemies': [(9, 38)]},
             1: {'level': [
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                            ",
                    "                                         E  ",
                    "                            PPPPPPPPPPPPPPPP",
                    "                            PPPPPPPPPPPPPPPP",
                    "                            PPPPPPPPPPPPPPPP",
                    "               PPPPP        PPPPPPPPPPPPPPPP",
                    "                            PPPPPPPPPPPPPPPP",
                    "                            PPPP           P",
                    "                            PPPP           P",
                    "                            PPPP     PPPPPPP",
                    "                      PPPPPPPPPP     PPPPPPP",
                    "                            PPPP     PPPPPPP",
                    "       PPPP                 PPPP     PPPPPPP",
                    "                            PPPP     PPPPPPP",
                    "                            PPPP     PPPPPPP",
                    "                            PPPP     PPPPPPP",
                    "PPPPP                       PPPP     PPPPPPP",
                    "PPP                  PPPPPPPPPPP     PPPPPPP",
                    "PPP                         PPPP     PPPPPPP",
                    "PPP                         PPPP     PPPPPPP",
                    "PPP             PPPPPPPP    PPPP     PPPPPPP",
                    "PPP                                     PPPP",
                    "PPP                                     PPPP",
                    "PPP          PPPPP                      PPPP",
                    "PPP          P            PPPPPPPPPPPPPPPPPP",
                    "PPP          P    PPPPPPPPPPPPPPPPPPPPPPPPPP",
                    "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                    "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                    "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                    "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",
                    "PPPPPPPPPPPPPPP           PPPPPPPPPPPPPPPPPP",],
             'enemies': [(9, 38), (18, 38), (15, 15)]}}

class Scene(object):
    def __init__(self):
        pass

    def render(self, screen):
        raise NotImplementedError

    def update(self):
        raise NotImplementedError

    def handle_events(self, events):
        raise NotImplementedError

class GameScene(Scene):
    def __init__(self, levelno):
        super(GameScene, self).__init__()
        self.bg = Surface((32,32))
        self.bg.convert()
        self.bg.fill(Color("#0094FF"))
        up = left = right = False
        self.entities = pygame.sprite.Group()
        self.player = Player(5, 40)
        self.player.scene = self
        self.platforms = []

        self.levelno = levelno

        levelinfo = levels[levelno]
        self.enemies = [Enemy(*pos) for pos in levelinfo['enemies']]

        level = levelinfo['level']
        total_level_width = len(level[0]) * 32
        total_level_height = len(level) * 32

        # build the level
        x = 0
        y = 0
        for row in level:
            for col in row:
                if col == "P":
                    p = Platform(x, y)
                    self.platforms.append(p)
                    self.entities.add(p)
                if col == "E":
                    e = ExitBlock(x, y)
                    self.platforms.append(e)
                    self.entities.add(e)
                x += 32
            y += 32
            x = 0

        self.camera = Camera(complex_camera, total_level_width, total_level_height)
        self.entities.add(self.player)
        for e in self.enemies:
            self.entities.add(e)

    def render(self, screen):
        for y in range(20):
            for x in range(25):
                screen.blit(self.bg, (x * 32, y * 32))

        for e in self.entities:
            screen.blit(e.image, self.camera.apply(e))

    def update(self):
        pressed = pygame.key.get_pressed()
        up, left, right = [pressed[key] for key in (K_UP, K_LEFT, K_RIGHT)]
        self.player.update(up, left, right, self.platforms)

        for e in self.enemies:
            e.update(self.platforms)

        self.camera.update(self.player)

    def exit(self):
        if self.levelno+1 in levels:
            self.manager.go_to(GameScene(self.levelno+1))
        else:
            self.manager.go_to(CustomScene("You win!"))

    def die(self):
        self.manager.go_to(CustomScene("You lose!"))

    def handle_events(self, events):
        for e in events:
            if e.type == KEYDOWN and e.key == K_ESCAPE:
                self.manager.go_to(TitleScene())

class CustomScene(object):

    def __init__(self, text):
        self.text = text
        super(CustomScene, self).__init__()
        self.font = pygame.font.SysFont('Arial', 56)

    def render(self, screen):
        # ugly! 
        screen.fill((0, 200, 0))
        text1 = self.font.render(self.text, True, (255, 255, 255))
        screen.blit(text1, (200, 50))

    def update(self):
        pass

    def handle_events(self, events):
        for e in events:
            if e.type == KEYDOWN:
                self.manager.go_to(TitleScene())

class TitleScene(object):

    def __init__(self):
        super(TitleScene, self).__init__()
        self.font = pygame.font.SysFont('Arial', 56)
        self.sfont = pygame.font.SysFont('Arial', 32)

    def render(self, screen):
        # ugly! 
        screen.fill((0, 200, 0))
        text1 = self.font.render('Crazy Game', True, (255, 255, 255))
        text2 = self.sfont.render('> press space to start <', True, (255, 255, 255))
        screen.blit(text1, (200, 50))
        screen.blit(text2, (200, 350))

    def update(self):
        pass

    def handle_events(self, events):
        for e in events:
            if e.type == KEYDOWN and e.key == K_SPACE:
                self.manager.go_to(GameScene(0))

class SceneMananger(object):
    def __init__(self):
        self.go_to(TitleScene())

    def go_to(self, scene):
        self.scene = scene
        self.scene.manager = self

def main():
    pygame.init()
    screen = pygame.display.set_mode(DISPLAY, FLAGS, DEPTH)
    pygame.display.set_caption("ABCDEFGHIJKLMNOPQRSTUVWXYZ")
    timer = pygame.time.Clock()
    running = True

    manager = SceneMananger()

    while running:
        timer.tick(60)

        if pygame.event.get(QUIT):
            running = False
            return
        manager.scene.handle_events(pygame.event.get())
        manager.scene.update()
        manager.scene.render(screen)
        pygame.display.flip()

class Camera(object):
    def __init__(self, camera_func, width, height):
        self.camera_func = camera_func
        self.state = Rect(0, 0, width, height)

    def apply(self, target):
        try:
            return target.rect.move(self.state.topleft)
        except AttributeError:
            return map(sum, zip(target, self.state.topleft))

    def update(self, target):
        self.state = self.camera_func(self.state, target.rect)

def complex_camera(camera, target_rect):
    l, t, _, _ = target_rect
    _, _, w, h = camera
    l, t, _, _ = -l + HALF_WIDTH, -t +HALF_HEIGHT, w, h

    l = min(0, l)                           # stop scrolling left
    l = max(-(camera.width - WIN_WIDTH), l)   # stop scrolling right
    t = max(-(camera.height-WIN_HEIGHT), t) # stop scrolling bottom

    return Rect(l, t, w, h)

class Entity(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)

class Player(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.xvel = 0
        self.yvel = 0
        self.onGround = False
        self.image = Surface((32,32))
        self.image.fill(Color("#0000FF"))
        self.image.convert()
        self.rect = Rect(x*32, y*32, 32, 32)

    def update(self, up, left, right, platforms):
        if self.rect.top > 1440 or self.rect.top < 0:
            self.scene.die()
        if self.rect.left > 1408 or self.rect.right < 0:
            self.scene.die()
        if up:
            if self.onGround:
                self.yvel = 0
                self.yvel -= 10 # only jump if on the ground
        if left:
            self.xvel = -10
        if right:
            self.xvel = 10
        if not self.onGround:
            self.yvel += 0.3 # only accelerate with gravity if in the air
            if self.yvel > 80: self.yvel = 80 # max falling speed
        if not(left or right):
            self.xvel = 0

        self.rect.left += self.xvel # increment in x direction
        if self.collide(self.xvel, 0, platforms): # do x-axis collisions
            self.rect.top += self.yvel # increment in y direction
            self.onGround = False; # assuming we're in the air
            self.collide(0, self.yvel, platforms) # do y-axis collisions

    def collide(self, xvel, yvel, platforms):
        for p in platforms:
            if pygame.sprite.collide_rect(self, p):
                if isinstance(p, ExitBlock):
                    self.scene.exit()
                    return False
                if xvel > 0: self.rect.right = p.rect.left
                if xvel < 0: self.rect.left = p.rect.right
                if yvel > 0:
                    self.rect.bottom = p.rect.top
                    self.onGround = True
                if yvel < 0:
                    self.rect.top = p.rect.bottom
        return True

class Enemy(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.yVel = 0
        self.xVel = 2 # start moving immediately
        self.image = Surface((32,32))
        self.image.fill(Color("#00FF00"))
        self.image.convert()
        self.rect = Rect(x*32, y*32, 32, 32)
        self.onGround = False

    def update(self, platforms):
        if not self.onGround:
            self.yVel += 0.3

        # no need for right_dis to be a member of the class,
        # since we know we are moving right if self.xVel > 0
        right_dis = self.xVel > 0

        # create a point at our left (or right) feet 
        # to check if we reached the end of the platform
        m = (1, 1) if right_dis else (-1, 1)
        p = self.rect.bottomright if right_dis else self.rect.bottomleft
        fp = map(sum, zip(m, p))

        # if there's no platform in front of us, change the direction
        collide = any(p for p in platforms if p.rect.collidepoint(fp))
        if not collide:
            self.xVel *= -1

        self.rect.left += self.xVel # increment in x direction
        self.collide(self.xVel, 0, platforms) # do x-axis collisions
        self.rect.top += self.yVel # increment in y direction
        self.onGround = False; # assuming we're in the air
        self.collide(0, self.yVel, platforms) # do y-axis collisions

    def collide(self, xVel, yVel, platforms):
        for p in platforms:
            if pygame.sprite.collide_rect(self, p):
                if xVel > 0: 
                    self.rect.right = p.rect.left
                    self.xVel *= -1 # hit wall, so change direction
                if xVel < 0: 
                    self.rect.left = p.rect.right
                    self.xVel *= -1 # hit wall, so change direction
                if yVel > 0:
                    self.rect.bottom = p.rect.top
                    self.onGround = True
                if yVel < 0:
                    self.rect.top = p.rect.bottom

class Platform(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        #self.image = Surface([32, 32], pygame.SRCALPHA, 32) #makes blocks invisible for much better artwork
        self.image = Surface((32,32)) #makes blocks visible for building levels
        self.image.convert()
        self.rect = Rect(x, y, 32, 32)

    def update(self):
        pass

class ExitBlock(Platform):
    def __init__(self, x, y):
        Platform.__init__(self, x, y)
        self.image = Surface((32,32)) #makes blocks visible for building levels
        self.image.convert()
        self.rect = Rect(x, y, 32, 32)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:27:30.863

我还制作了一个游戏，其中有一个游戏菜单、一个关卡菜单、一个加载部分和一个游戏部分。
我这样做的方式是在主游戏循环中，
我通过一堆 elif 语句来确定游戏处于什么“模式”，并执行适当的操作。
它似乎工作得很好，我建议你也试试。

我意识到我的代码真的很长，但是如果你去它说的地方`#game loop`（使用 ctrl+f 找到它），你可以看到 elifs 来确定模式。希望这可以帮助。

```
#basic stuff
import pygame, sys, random
pygame.init()
window=pygame.display.set_mode((1500, 800), pygame.FULLSCREEN)
winrect=window.get_rect()

#colors
GREEN=(19, 225, 30)
BLUE=(41, 2, 245)
YELLOW=(251, 240, 32)
WHITE=(255, 255, 255)
BLACK=(0, 0, 0)
RED=(255, 0, 0)

#text
bigfont=pygame.font.SysFont('calibri', 75)
font=pygame.font.SysFont('calibri', 40)
texts={}

so=bigfont.render('Ball Bounce', True, BLUE)
rect=so.get_rect()
rect.top=winrect.top+100
rect.centerx=winrect.centerx
texts['title']=[so, rect]

so=font.render('Start', True, BLUE)
rect=so.get_rect()
so1=pygame.Surface((400, 50))
so2=pygame.Surface((400, 50))
rect1=so1.get_rect()
so1.fill(YELLOW)
so2.fill(RED)
pygame.draw.rect(so1, BLACK, rect1, 5)
pygame.draw.rect(so2, BLACK, rect1, 5)
rect.center=rect1.center
so1.blit(so, rect)
so2.blit(so, rect)
rect1.centerx=winrect.centerx
rect1.top=texts['title'][1].top+300
texts['start']=[so1, rect1, so2]

so=bigfont.render('Levels', True, BLUE)
rect=so.get_rect()
rect.centerx=winrect.centerx
rect.top=winrect.top+100
texts['levels']=[so, rect]

#levels [locked, unlocked, completed/mouseover, rect, state(locked, unlocked, completed)]
levels=[]
lock=pygame.image.load('images/lock.png').convert()
lock=pygame.transform.scale(lock, (100, 100))
lock.set_colorkey(lock.get_at((1, 1)))
for i in range(1, 21):
    so=pygame.Surface((100, 100))
    so.fill(YELLOW)
    rect=so.get_rect()
    pygame.draw.rect(so, BLACK, rect, 5)
    so1=pygame.Surface((100, 100))
    so1.fill(RED)
    pygame.draw.rect(so1, BLACK, rect, 5)
    text=font.render(str(i), True, BLUE)
    textrect=text.get_rect()
    textrect.center=rect.center
    so.blit(text, textrect)
    so1.blit(text, textrect)
    locked=pygame.Surface((100, 100))
    locked.blit(so, rect)
    locked.blit(lock, lock.get_rect())
    if i<=5:
        rect.top=texts['levels'][1].bottom+25
    elif i<=10:
        rect.top=levels[0][3].bottom+50
    elif i<=15:
        rect.top=levels[7][3].bottom+50
    else:
        rect.top=levels[12][3].bottom+50
    if i==1 or i==6 or i==11 or i==16:
        rect.right=winrect.centerx-200
    elif i==2 or i==7 or i==12 or i==17:
        rect.right=winrect.centerx-75
    elif i==3 or i==8 or i==13 or i==18:
        rect.centerx=winrect.centerx
    elif i==4 or i==9 or i==14 or i==19:
        rect.left=winrect.centerx+75
    else:
        rect.left=winrect.centerx+200
    if i==1:
        levels.append([locked, so, so1, rect, 1])
    else:
        levels.append([locked, so, so1, rect, 1])

#Wall class (0=horizontal, 1=vertical)
class cwall(pygame.Rect):
    'orientation (hor, vert), location, holesize, winrect'
    def __init__(self, orientation, location, holesize, winrect):
        self.orientation=orientation
        if orientation==0:
            self.height=5
            self.width=winrect.width
            self.centery=location
        if orientation==1:
            self.width=5
            self.height=winrect.height
            self.centerx=location
        self.holesize=holesize
        self.bbottomright=round(pygame.mouse.get_pos()[self.orientation]+self.holesize/2)
        self.ttopleft=round(pygame.mouse.get_pos()[self.orientation]-self.holesize/2)
    def update(self):
        self.bbottomright=round(pygame.mouse.get_pos()[self.orientation]+self.holesize/2)
        self.ttopleft=round(pygame.mouse.get_pos()[self.orientation]-self.holesize/2)
        if self.bbottomright<self.holesize:
            self.bbottomright=self.holesize
        if self.ttopleft>self.right-self.holesize and self.orientation==0:
            self.ttopleft=self.right-self.holesize
        if self.ttopleft>self.bottom-self.holesize and self.orientation==1:
            self.ttopleft=self.bottom-self.holesize

#Ball Class
class cball(pygame.Rect):
    'diameter, speed, color, winrect'
    def __init__(self, diameter, speed, color, winrect):
        self.width=diameter
        self.height=diameter
        self.speed=speed
        self.color=color
        self.direction=random.randint(1, 4)
        self.center=(random.randint(round(diameter/2), round(winrect.right-diameter/2)), random.randint(round(diameter/2), round(winrect.bottom-diameter/2)))
    def update(self, winrect, walls):
        if self.direction/2==round(self.direction/2):
            self.right+=self.speed
        else:
            self.right-=self.speed
        if self.direction<=2:
            self.top+=self.speed
        else:
            self.top-=self.speed
        for wall in walls:
            if wall.collidepoint(self.center):
                if wall.orientation==0 and (self.centerx<wall.ttopleft or self.centerx>wall.bbottomright):
                    if self.direction==1:
                        self.direction=3
                        self.bottom=wall.top
                    elif self.direction==2:
                        self.direction=4
                        self.bottom=wall.top
                    elif self.direction==3:
                        self.direction=1
                        self.top=wall.bottom
                    else:
                        self.direction=2
                        self.top=wall.bottom
                elif wall.orientation==1 and (self.centery<wall.ttopleft or self.centery>wall.bbottomright):
                    if self.direction==1:
                        self.direction=2
                        self.left=wall.right
                    elif self.direction==2:
                        self.direction=1
                        self.right=wall.left
                    elif self.direction==3:
                        self.direction=4
                        self.left=wall.right
                    else:
                        self.direction=3
                        self.right=wall.left
            elif wall.orientation==0:
                if self.bottom>wall.top and self.centery<wall.top and (self.centerx<wall.ttopleft or self.centerx>wall.bbottomright):
                    if self.direction==1:
                        self.direction=3
                        self.bottom=wall.top
                    elif self.direction==2:
                        self.direction=4
                        self.bottom=wall.top
                elif self.top<wall.bottom and self.centery>wall.bottom and (self.centerx<wall.ttopleft or self.centerx>wall.bbottomright):
                    if self.direction==3:
                        self.direction=1
                        self.top=wall.bottom
                    if self.direction==4:
                        self.direction=2
                        self.top=wall.bottom
            else:
                if self.left<wall.right and self.centerx>wall.right and (self.centery<wall.ttopleft or self.centery>wall.bbottomright):
                    if self.direction==1:
                        self.direction=2
                        self.left=wall.right
                    elif self.direction==3:
                        self.direction=4
                        self.left=wall.right
                elif self.right>wall.left and self.centerx<wall.left and (self.centery<wall.ttopleft or self.centery>wall.bbottomright):
                    if self.direction==2:
                        self.direction=1
                        self.right=wall.left
                    if self.direction==4:
                        self.direction=3
                        self.right=wall.left
        if self.top<0:
            if self.direction==3:
                self.direction=1
                self.top=0
            elif self.direction==4:
                self.direction=2
                self.topn=0
        if self.bottom>winrect.bottom:
            if self.direction==1:
                self.direction=3
                self.bottom=winrect.bottom
            elif self.direction==2:
                self.direction=4
                self.bottom=winrect.bottom
        if self.left<0:
            if self.direction==1:
                self.direction=2
                self.left=0
            elif self.direction==3:
                self.direction=4
                self.left=0
        if self.right>winrect.right:
            if self.direction==2:
                self.direction=1
                self.right=winrect.right
            if self.direction==4:
                self.direction=3
                self.right=winrect.right
        for box in boxes:
            if box[0].collidepoint(self.center) and self.color==box[1]:
                return True
        return False

#Game loop setup
mode='title'

#Game loop
while True:
    if mode=='title':
        #event loop
        for event in pygame.event.get():
            if event.type==pygame.QUIT:
                pygame.quit()
                sys.exit()
            if event.type==pygame.MOUSEBUTTONDOWN:
                if texts['start'][1].collidepoint(event.pos):
                    mode='levels'
            if event.type==pygame.KEYDOWN:
                if event.key==pygame.K_ESCAPE:
                    pygame.quit()
                    sys.exit()
        #screen update
        window.fill(GREEN)
        mouse=pygame.mouse.get_pos()
        if texts['start'][1].collidepoint(mouse):
            window.blit(texts['start'][2], texts['start'][1])
        else:
            window.blit(texts['start'][0], texts['start'][1])
        window.blit(texts['title'][0], texts['title'][1])
        pygame.display.update()

    elif mode=='levels':
        #event loop
        for event in pygame.event.get():
            if event.type==pygame.QUIT:
                pygame.quit()
                sys.exit()
            if event.type==pygame.MOUSEBUTTONDOWN:
                for level in levels:
                    if level[3].collidepoint(event.pos) and level[4]!=0:
                        mode='loading'
                        loadinglevel=levels.index(level)+1
            if event.type==pygame.KEYDOWN:
                if event.key==pygame.K_ESCAPE:
                    pygame.quit()
                    sys.exit()
        #screen update
        window.fill(GREEN)
        for level in levels:
            if level[3].collidepoint(pygame.mouse.get_pos()) and level[4]==1:
                window.blit(level[2], level[3])
            else:
                window.blit(level[level[4]], level[3])
        window.blit(texts['levels'][0], texts['levels'][1])
        pygame.display.update()

    elif mode=='loading':
        if loadinglevel==1:
            walls=[cwall(1, winrect.width/2, 100, winrect)]
            balls=[]
            for i in range(2):
                balls.append(cball(20, 3, GREEN, winrect))
            for i in range(2):
                balls.append(cball(20, 3, YELLOW, winrect))
            boxes=((pygame.Rect(0, 0, round(winrect.width/2), winrect.height), GREEN), (pygame.Rect(round(winrect.width/2), 0, round(winrect.width/2), winrect.height), YELLOW))
        elif loadinglevel==2:
            walls=[cwall(1, winrect.width/2, 100, winrect)]
            balls=[]
            for i in range(4):
                balls.append(cball(20, 3, GREEN, winrect))
            for i in range(4):
                balls.append(cball(20, 3, YELLOW, winrect))
            boxes=((pygame.Rect(0, 0, round(winrect.width/2), winrect.height), GREEN), (pygame.Rect(round(winrect.width/2), 0, round(winrect.width/2), winrect.height), YELLOW))
        elif loadinglevel==3:
            walls=[cwall(1, winrect.width/3, 100, winrect), cwall(1, 2*winrect.width/3, 100, winrect)]
            balls=[]
            for i in range(2):
                balls.append(cball(20, 3, GREEN, winrect))
            for i in range(2):
                balls.append(cball(20, 3, YELLOW, winrect))
            for i in range(2):
                balls.append(cball(20, 3, BLUE, winrect))
            boxes=((pygame.Rect(0, 0, round(winrect.width/3), winrect.height), GREEN), (pygame.Rect(round(winrect.width/3), 0, round(winrect.width/3), winrect.height), YELLOW),
                   (pygame.Rect(round(2*winrect.width/3), 0, round(winrect.width/3), winrect.height), BLUE))
        elif loadinglevel==4:
            walls=[cwall(1, winrect.width/3, 100, winrect), cwall(1, 2*winrect.width/3, 100, winrect)]
            balls=[]
            for i in range(4):
                balls.append(cball(20, 3, GREEN, winrect))
            for i in range(4):
                balls.append(cball(20, 3, YELLOW, winrect))
            for i in range(4):
                balls.append(cball(20, 3, BLUE, winrect))
            boxes=((pygame.Rect(0, 0, round(winrect.width/3), winrect.height), GREEN), (pygame.Rect(round(winrect.width/3), 0, round(winrect.width/3), winrect.height), YELLOW),
                   (pygame.Rect(round(2*winrect.width/3), 0, round(winrect.width/3), winrect.height), BLUE))

        elif loadinglevel==7:
            walls=[cwall(1, winrect.width/2, 100, winrect), cwall(0, winrect.height/2, 100, winrect)]
            balls=[]
            for i in range(2):
                balls.append(cball(20, 3, GREEN, winrect))
            for i in range(2):
                balls.append(cball(20, 3, YELLOW, winrect))
            for i in range(2):
                balls.append(cball(20, 3, BLUE, winrect))
            for i in range(2):
                balls.append(cball(20, 3, RED, winrect))
            boxes=((pygame.Rect(0, 0, round(winrect.width/2), round(winrect.height/2)), GREEN),
                   (pygame.Rect(0, round(winrect.height/2), round(winrect.width/2), round(winrect.height/2)), RED),
                   (pygame.Rect(round(winrect.width/2), 0, round(winrect.width/2), round(winrect.height/2)), YELLOW),
                   (pygame.Rect(round(winrect.width/2), round(winrect.height/2),  round(winrect.width/2), round(winrect.height/2)), BLUE))
        elif loadinglevel==8:
            walls=[cwall(1, winrect.width/2, 100, winrect), cwall(0, winrect.height/2, 100, winrect)]
            balls=[]
            for i in range(4):
                balls.append(cball(20, 3, GREEN, winrect))
            for i in range(4):
                balls.append(cball(20, 3, YELLOW, winrect))
            for i in range(4):
                balls.append(cball(20, 3, BLUE, winrect))
            for i in range(4):
                balls.append(cball(20, 3, RED, winrect))
            boxes=((pygame.Rect(0, 0, round(winrect.width/2), round(winrect.height/2)), GREEN),
                   (pygame.Rect(0, round(winrect.height/2), round(winrect.width/2), round(winrect.height/2)), RED),
                   (pygame.Rect(round(winrect.width/2), 0, round(winrect.width/2), round(winrect.height/2)), YELLOW),
                   (pygame.Rect(round(winrect.width/2), round(winrect.height/2),  round(winrect.width/2), round(winrect.height/2)), BLUE))
        elif loadinglevel==5:
            walls=[cwall(1, winrect.width/2, 100, winrect), cwall(0, winrect.height/2, 100, winrect)]
            balls=[]
            for i in range(10):
                balls.append(cball(20, 3, RED, winrect))
            boxes=((pygame.Rect(0, 0, round(winrect.width/2), round(winrect.height/2)), RED),
                   (pygame.Rect(0, round(winrect.height/2), winrect.width, round(winrect.height/2)), WHITE),
                   (pygame.Rect(round(winrect.width/2), 0, round(winrect.width/2), winrect.height), WHITE))
        elif loadinglevel==6:
            walls=[cwall(1, winrect.width/2, 100, winrect), cwall(0, winrect.height/2, 100, winrect)]
            balls=[]
            for i in range(20):
                balls.append(cball(20, 3, RED, winrect))
            boxes=((pygame.Rect(0, 0, round(winrect.width/2), round(winrect.height/2)), RED),
                   (pygame.Rect(0, round(winrect.height/2), winrect.width, round(winrect.height/2)), WHITE),
                   (pygame.Rect(round(winrect.width/2), 0, round(winrect.width/2), winrect.height), WHITE))
        mode='playing'
    elif mode=='playing':
        while True:
            #event loop
            for event in pygame.event.get():
                if event.type==pygame.QUIT:
                    pygame.quit()
                    sys.exit()
                if event.type==pygame.KEYDOWN:
                    if event.key==pygame.K_ESCAPE:
                        pygame.quit()
                        sys.exit()
            #updates
            updates=[]
            for wall in walls:
                wall.update()
            for ball in balls:
                updates.append(ball.update(winrect, walls))
            #Seeing if won
            won=True
            for update in updates:
                if not update:
                    won=False
                    break
            if won:
                if levels[loadinglevel][4]==0:
                    levels[loadinglevel][4]=1
                levels[loadinglevel-1][4]=2
                mode='levels'
                break
            #blitting
            window.fill(WHITE)
            for box in boxes:
                pygame.draw.rect(window, box[1], box[0])
            for wall in walls:
                if wall.orientation==0:
                    pygame.draw.rect(window, BLACK, (wall.left, wall.top, wall.ttopleft, wall.height))
                    pygame.draw.rect(window, BLACK, (wall.bbottomright, wall.top, wall.right-wall.bbottomright, wall.height))
                else:
                    pygame.draw.rect(window, BLACK, (wall.left, wall.top, wall.width, wall.ttopleft))
                    pygame.draw.rect(window, BLACK, (wall.left, wall.bbottomright, wall.width, wall.bottom-wall.holesize))
            for ball in balls:
                pygame.draw.circle(window, ball.color, ball.center, round(ball.width/2))
                pygame.draw.circle(window, BLACK, ball.center, round(ball.width/2), 2)
            pygame.display.update()
            pygame.time.Clock().tick(100) 
```

# java - 如何在使用堆栈时反转字符串中的单个单词？

> ID：14700893
> 
> 赞同：2
> 
> 时间：2013-02-05T05:40:44.943
> 
> 标签：java, string, stack, reverse

我是编程新手，我正在学习初级编程课程。我试着四处寻找我的答案，我发现了可能有效的结果，但我不明白如何在使用堆栈时实现它们。我试图在不反转整个字符串的情况下反转字符串的单个单词。

例如：用户输入句子“Pies are great！” 我需要输出为“seiP era !taerg”

到目前为止，我已经成功编写了一个可以完全反转字符串的程序，因此使用上述示例的输出是：“！taerg era seiP” 正如您所看到的，我想在不反转顺序的情况下反转单词本身的话，但我必须使用堆栈输入。

以下是我到目前为止所拥有的：

```
public class ReversedString{

private static  ArrayStack<String> stack;

public static void main(String[] args) {
    stack = new ArrayStack<String>();
    String string = "";
    String stringReversed = "";

    @SuppressWarnings("resource")
    Scanner scanner = new Scanner(System.in);
    System.out.print("Enter the string that you want to reverse: ");
    string = scanner.nextLine();
    string.split(" ");

    for(int i=0; i<string.length(); i++){
        stack.push(string.substring(i, i+1));
    }   

    while(!stack.isEmpty()){
        stringReversed += stack.pop();
    }

    System.out.println("The reverse of the string is: " + stringReversed); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:46:06.223

```
read character
while character is whitespace
    // do nothing to skip multiple whitespaces.
    read character

while character is not whitespace
    push character onto stack
    read character

// Just read a word, so now dump it back out.
while stack is not empty
    ch = pop stack
    print ch 
```

显然，这需要循环执行多个单词。

示例实现`read character`

```
int index = 0;
String theString = "Pies are great!"

char readCharacter()
{
    // TODO: needs error checking so you don't run off the end of the string.
    char ch = theString.charAt(index);
    index++;
    return ch;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:53:47.530

尝试

```
 Scanner sc = new Scanner("Pies are great!");
    while(sc.hasNext()) {
        System.out.print(new StringBuilder(sc.next()).reverse() + " ");
    } 
```

输出

```
seiP era !taerg 
```

或使用 java.util.Stack

```
 StringBuilder sb = new StringBuilder();
    Scanner sc = new Scanner("Pies are great!");
    while (sc.hasNext()) {
        Stack<Character> st = new Stack<>();
        for (char c : sc.next().toCharArray()) {
            st.push(c);
        }
        while (!st.isEmpty()) {
            sb.append(st.pop());
        }
        sb.append(' ');
    }
    System.out.print(sb); 
```

输出

```
seiP era !taerg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:00:01.317

使用您已经编写的代码来使用堆栈反转整个字符串，并将其转换为自己的方法。您的堆栈对于以相反顺序（后进先出）检索字母很有用。就像是：

```
public String reverse(String str) {
  . . .
} 
```

在您的 main 方法中，将您的 String 拆分为多个单词，然后将每个单词迭代地传递给您的 reverse 方法。不要为你的话使用堆栈。你的话是先进先出，堆栈提供后进先出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T05:45:57.530

用 white-space( `" "`) 分割句子，就像`String#split`你会得到分割的字符串，这些字符串将是单词（“Pies”、“are”、“great！”），然后将其压入堆栈并单独弹出值。

```
String str ="Pies are great!";
String[] strs = str.split(" "); // "Pies", "are", "great!"
String newStr = "";
for(String str1:strs){
   //push str1
   // pop str1 and add it to newStr
} 
```

# git - Git克隆除一个文件或文件夹之外的所有文件或文件夹，可能吗？

> ID：14700896
> 
> 赞同：1
> 
> 时间：2013-02-05T05:40:55.157
> 
> 标签：git, git-clone

> **可能重复：**
> [有没有办法只克隆 git 存储库的子目录？](https://stackoverflow.com/questions/600079/is-there-any-way-to-clone-a-git-repositorys-sub-directory-only)

是否可以克隆存储库但一些文件？

假设我不想克隆`example`文件夹，因为无论如何我都会删除它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T06:24:38.373

简短的回答 - 不。Git clone 将始终克隆完整的文件结构。

如果您想尽量减少网络上的数据量，您可以使用 `git clone --depth 1`.

为了实现您的要求：

```
mkdir repo
cd repo
git init
git remote add -f origin $URL
git config core.sparseCheckout true
echo '$DIRNAME' >> .git/info/sparse-checkout # Do this for every directory you want.
git fetch
git checkout $BRANCH # Typically master 
```

但我认为在你的情况下，删除`examples`目录可能更容易。

# sql - SQL中列计算的select子句中可以使用比较运算符吗？

> ID：14700898
> 
> 赞同：0
> 
> 时间：2013-02-05T05:41:00.663
> 
> 标签：sql, odbc

比较运算符（>、<、>=、<=、!=）可以用在 SQL 中列计算的 select 子句中吗？例如，

`SELECT column1, column2, column1 >= column2 AS "column3" FROM table`.

似乎只有一些数据库支持比较运算符，例如 MS Access。我正在使用 ODBC 连接到不同的数据库，我知道的一种方法是使用`"CASE...WHEN...THEN...ELSE"`子句。问题是，是否有另一种方法可以在 select 子句中使用比较运算符来计算新列？

另一个问题是，如果我想使用新的计算列（示例中的“column3”）过滤`WHERE`子句中的一些数据，SQL 应该是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:59:53.253

你是对的——并非所有数据库都支持这种比较语法。但最流行的开源数据库：[MySQL](http://www.sqlfiddle.com/#!2/73d48/2)（SQLFiddle 链接）、[PostgreSQL](http://www.sqlfiddle.com/#!12/73d48/1)和[SQLite](http://www.sqlfiddle.com/#!5/73d48/3)都支持它。

在[MSSQL](http://www.sqlfiddle.com/#!3/73d48/3)和[Oracle](http://www.sqlfiddle.com/#!4/73d48/2)上，您应该使用

```
CASE a>b THEN 1 ELSE 0 END 
```

作为一种解决方法（这也适用于前面提到的所有数据库）。

关于在 WHERE 子句中使用新列的问题：通常，您不能这样做，除非您在内部 SELECT 周围再包装一个外部 SELECT，并在外部 SELECT 中使用另一个 WHERE。

# windows-phone-8 - 将 windows phone 8 应用程序同步到 sql server 数据库中的表

> ID：14700904
> 
> 赞同：0
> 
> 时间：2013-02-05T05:41:49.757
> 
> 标签：windows-phone-8, sql-server-2012

我希望我的 windows phone 8 应用程序在表格中插入一行时自动同步。

也就是说，我的应用程序中的一个 xaml 页面显示了一个表中的所有数据。

1.  因此，如果向该表中添加了新行，则更改也应该在我的应用程序中更新。（当应用程序运行时）

2.  如果应用程序关闭，它必须显示通知（种类）。

我不知道该怎么做，并用谷歌搜索。我遇到了更改跟踪等，但仍然无法做到。！

给我一些解决方案。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:17:13.750

1.  首先，您需要能够从服务器下载表格数据。您将需要在您的 WP8 应用程序中创建一个为表格数据提供服务的 Web 服务和一个将使用数据的服务客户端。

2.  其次，您必须了解Windows Phone 上的**推送通知概念。**谷歌为它。我建议你练习一下：创建一个单按钮 WPF 应用程序，它会发送一个推送通知，更新你在 WP8 上的应用程序磁贴。

3.  在服务器上创建记录时更新您的 Windows 手机：您不能只创建一个 Windows 服务，它会定期向数据库发出请求以检查自上次检查以来的任何新记录？如果有新记录，它将向您的 WP8 应用发送通知。当 WP8 应用程序收到通知时，它将更新其磁贴，或者如果应用程序正在运行，它将从服务器下载新数据。

另一种解决方案是，您使用 Insert 方法创建一个 Web 服务，该方法将在服务器上的表中插入一行。以同样的方法，您将向所有 wp8 客户端发送通知。

这种应用程序有多种解决方案。这取决于你的场景。你能描述一下你的应用吗？

# linux - Socket编程send()返回值

> ID：14700906
> 
> 赞同：3
> 
> 时间：2013-02-05T05:41:56.433
> 
> 标签：linux, sockets, networking

在linux，或者windows socket编程

我知道 read 返回一个值，该值指示成功接收的字节数。

此返回值可能小于请求的长度。（即，如果接收缓冲区只有 50 个字节，read(sd, buf, 100) 可能会返回 50）

有没有可能

```
send(sd, buf, 100); 
```

返回 1~99 之间的值？？如果是，那是什么场合？我想知道具体的例子情况。

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T06:05:44.030

有关官方规范，请参阅`man`页面或 MSDN 文档（如果您正在谈论 Winsock）。

在*实践* `send()`中，无论文档说什么，在阻塞模式下都会发送所有数据，除非出现错误，在这种情况下不会发送任何数据。

在非阻塞模式下，它发送适合套接字发送缓冲区的任何内容，如果 > 0 则返回该长度。如果套接字发送缓冲区已满，则返回 -1 且 errno = `EWOULDBLOCK/EAGAIN`。

# html - 如何在画布上旋转图像并展开父级以使图像不被切掉？

> ID：14700911
> 
> 赞同：3
> 
> 时间：2013-02-05T05:42:22.797
> 
> 标签：html, html5-canvas, image-rotation

如何在 HTML5 Canvas 上旋转图像，而不会丢失任何图像数据？我的意思是如果旋转导致图像尺寸增加，我也想扩展 Canvas 容器，这样图像就不会被截断。下图可能会说得更好： ![在此处输入图像描述](../Images/342a883497776fe9b499861cbb1bd4e2.png)

棕色盒子实际上是包裹 Canvas 的容器。我想在 Canvas 旋转时扩展它（以及 Canvas 以适合图像），这样图像就不会被切断。

**更新：** 图像可能比画布大，因此我使用边界框方法来计算与父容器成比例的大小以适合图像。所以画布的`style`尺寸将是计算出来的，而它的高度和宽度属性将是图像尺寸。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T07:13:35.460

此功能将调整您的画布大小以完全适合旋转的图像。您必须提供图像的宽度和高度以及它的当前旋转角度（以度为单位）。

[编辑：哎呀！我应该将角度转换为弧度......并且......应该更改**画布宽度/高度，而不是****CSS**宽度/高度]

```
function resizeCanvasContainer(w,h,a){
var newWidth,newHeight;
  var rads=a*Math.PI/180;
  var c = Math.cos(rads);
  var s = Math.sin(rads);

    if (s < 0) { s = -s; }
    if (c < 0) { c = -c; }
    newWidth = h * s + w * c;
    newHeight = h * c + w * s ;

var canvas = document.getElementById('canvas');
canvas.width = newWidth + 'px';
canvas.height = newHeight + 'px';
} 
```

# php - MongoDB 搜索 $in _id php

> ID：14700913
> 
> 赞同：0
> 
> 时间：2013-02-05T05:42:32.850
> 
> 标签：php, mongodb

通常当我搜索一个相关的 ID 时，我会这样做：

```
$thisSearch = $collection->find(array(
    'relatedMongoID' => new MongoId($mongoIDfromSomewhereElse)
)); 
```

如果我想做这样的事情，我会怎么做：

```
$mongoIdArray = array($mongoIDfromSomewhereElseOne, $mongoIDfromSomewhereElseTwo, $mongoIDfromSomewhereElseThree);
$thisSearch = $collection->find(array(
        'relatedMongoID' => array( '$in' => new MongoId(mongoIdArray)
    ))); 
```

我已经尝试过使用和不使用新的 MongoId()，我什至没有运气尝试过。

```
foreach($mongoIdArray as $seprateIds){

$newMongoString .= new MongoId($seprateIds).', ';

}
$mongoIdArray = explode(',', $newMongoString).'0'; 
```

当您需要在每个 _id 上运行新的 MongoID() 时，如何搜索“$in”“_id”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T08:16:01.913

嗯，你想用 SQL 的方式来做：

```
foreach($mongoIdArray as $seprateIds){

$newMongoString .= new MongoId($seprateIds).', ';

}
$mongoIdArray = explode(',', $newMongoString).'0'; 
```

而是尝试：

```
$_ids = array();
foreach($mongoIdArray as $seprateIds){
    $_ids[] = $serprateIds instanceof MongoId ? $seprateIds : new MongoId($seprateIds);
}
$thisSearch = $collection->find(array(
    'relatedMongoID' => array( '$in' => $_ids)
)); 
```

这应该产生一个`ObjectId`可用于搜索该字段的 s 列表 - `relatedMongoID`。

## 这就是我正在做的

基本上，如文档（[https://docs.mongodb.org/v3.0/reference/operator/query/in/](https://docs.mongodb.org/v3.0/reference/operator/query/in/)）中所示`$in`，MongoDB 的运算符实际上需要一个数组，因此您需要在 PHP 中复制此结构，因为PHP 驱动程序是 1-1 与大多数方面的文档（在某些需要使用附加对象的区域除外，例如`MongoRegex`：）

现在，`_id`MongoDB 中的所有 s 实际上都是`ObjectId`s（除非您更改了结构），因此完成此查询所需要做的就是创建一个`ObjectId`s 数组。`ObjectId`PHP 中的`MongoId`( [http://php.net/manual/en/class.mongoid.php](http://php.net/manual/en/class.mongoid.php) )

所以你需要制作一个`MongoId`s数组。

首先，我遍历数组（可以用 来完成`array_walk`）将每个数组元素的值更改为 a `MongoId`，并使用封装在该对象中的旧值：

```
foreach($mongoIdArray as $seprateIds){
    $_ids[] = $serprateIds instanceof MongoId ? $seprateIds : new MongoId($seprateIds);
} 
```

我这里使用了一个三元运算符来查看该值是否已经是一个`MongoId`封装的值，如果没有封装它。

然后我将这个新数组添加到查询对象以形成`$in`查询数组，如主要 MongoDB 文档中所示：

```
$thisSearch = $collection->find(array(
    'relatedMongoID' => array( '$in' => $_ids)
)); 
```

所以现在当查询被发送到服务器时，它形成了一个类似于：

```
{relatedMongoId: {$in: [ObjectId(''), ObjectId('')]}} 
```

这将返回结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-25T19:55:35.257

嗯......我遇到了同样的问题，由于 API 可能已经改变，因此解决方案可能不再相关。我解决了这个问题：

```
$ids = [
  new \MongoDB\BSON\ObjectId('5ae0cc7bf3dd2b8bad1f71e2'),
  new \MongoDB\BSON\ObjectId('5ae0cc7cf3dd2b8bae5aaf33'), 
];
$collection->find([
  '_id' => ['$in' => $_ids],
]); 
```

# matlab - 数据集的 KNN 分类。

> ID：14700920
> 
> 赞同：0
> 
> 时间：2013-02-05T05:43:08.773
> 
> 标签：matlab, knn

我有一个包含 178 个属性的数据集，其中包含 13 个属性。我将它们分成 2 组（100 和 78）进行训练和测试。

我想确定每个标记样本的 k 个最近邻居。如果样本的标签比 k 个最近邻的任何其他标签更常见，则将分类视为正确，否则，将分类视为错误。

这是我完全迷失的部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:01:54.160

我看到您正在尝试理解 KNN 的概念。

这更容易理解。

> 一个对象通过其邻居的多数票进行分类，该对象被分配到其 k 个最近邻居中最常见的类别（k 是一个正整数，通常很小）。

查看 KNN 的 Wikipedia：[http ://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)

希望这可以帮助。

# java - JScrollPane 中的 JTable 固定大小和可调整大小的 JFrame？

> ID：14700921
> 
> 赞同：0
> 
> 时间：2013-02-05T05:43:14.890
> 
> 标签：java, swing, resize, jtable, jscrollpane

我有`JTable`一个`JScrollPane`. 我想让列在调整大小时保持固定。行保持相同的大小，并且有一个滚动条可以上下移动。我无法让滚动条在垂直方向上以相同的方式工作。

这是我的项目图片，杜克的y轴完全正常，并且有一个滚动条可以滚动到图像的底部，水平部分明显混乱，不应该扩大那么远。

此外，如果框架在水平方向上变小，应该有一个滚动条，就像垂直方向一样。

![杜克大学的图片](../Images/c2d359f1396ff2521c582008ae14ce4e.png)

所以我的问题基本上是这样结束的；如何将 a 的大小固定`JTable`为不在 中调整大小`JScrollPane`，然后如果它太大，则显示滚动条。

顺便说一句，每个单元格都有一个图像，构成了大图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:46:52.277

将表格的自动调整大小模式设置为“关闭”

```
table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF); 
```

看看[`JTable#setAutoResizeMode`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setAutoResizeMode%28int%29)更多细节。

**更新**

我应该提一下，这意味着您将负责确定每列的大小。

看看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)和[设置和更改列宽](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#width)

# visual-studio - 如何在 Visual Studio/MSBuild 中进行依赖管理

> ID：14700927
> 
> 赞同：11
> 
> 时间：2013-02-05T05:43:44.217
> 
> 标签：visual-studio, msbuild, dependency-management

关于这个主题有很多帖子，但我还没有找到“真正的”解决方案。

如何使用 MSBuild 项目文件（即通过项目和文件引用的 Visual Studio 项目文件）管理他们的依赖关系树（编译时和运行时）？

众所周知，如果没有编译时引用，即使存在运行时依赖，即使 copy-local=true，来自子项目的项目引用也不会被复制到应用程序 bin 目录。因此，任何松散耦合的组件都不会被复制。

解决此问题的 hack 是在父项目中包含依赖项，并设置为 copy-local=true。但是，这基本上会破坏您的依赖关系树，因为您不再知道依赖关系在哪里，并且最终，随着您的应用程序的增长和变形，您最终会得到一个 DLL 地狱版本。您的父项目最终会包含 10 到 100 个 dll，其中大部分是子项目中 dll 的运行时依赖项。

另一个技巧是编写一个自定义目标文件并从每个项目文件中调用它：http: [//blog.alexyakunin.com/2009/09/making-msbuild-visual-studio-to.html](http://blog.alexyakunin.com/2009/09/making-msbuild-visual-studio-to.html)。但肯定有更好的选择。这是一个面包和黄油的事情。Java 开发人员永远不必处理这些琐碎的问题。

据我所知，微软解决这个问题的方法是在 GAC 中为每台开发、测试和生产机器注册每个依赖项。但这是愚蠢和烦人的。我不会费心给出这个选项和有根据的反驳。

避免使用 GAC 选项，如何使用 MSBuild 管理仅包含运行时依赖项的依赖关系树？微软是如何做到的？当然，他们不会像上面链接中那样运行自定义目标文件。

我希望有企业 .NET 背景的人能站出来提供一些真正的建议。否则，我将不得不在 NAnt 中重写所有构建脚本（*不寒而栗*）。

谢谢大家。

更新

针对一些评论，以下是我当前项目中该问题的一个实际示例。

该应用程序是一个 Web 应用程序项目，它公开了一套 WCF 服务。它有一个包含外部服务类的外部域 DLL 和一个包含内部服务 POCO、域对象和 DAO 的内部域 DLL。有一个单独的集成 DLL，其中包含所有内部域类的接口 (DTO)，它允许我们完全解耦外部域和内部域。整个事情都与 Spring.net 连接起来。我希望这很清楚，如果您需要更多说明，请告诉我。

我当前的构建过程是使用 MSBuild 为 Web 应用程序（在 TFS Build 中）生成部署包。因此，虽然最初构建了整个解决方案，但只有 Web 应用程序的输出被打包。因此，Web 应用程序被视为依赖根，我希望任何松散耦合的子引用都应该在构建时被复制，如果它们设置为'copy-always=true'。

因此，Web 应用程序包含对外部域 DLL 的引用，其中包含对内部域 DLL 的引用，内部域 DLL 包含对第 3 方库的许多引用以及第 3 方库所需的各种间接和松散耦合的依赖项。

当内部域 DLL 中存在第 3 方依赖项时会出现问题，例如 NHibernate 在运行时需要的 oracle.dataaccess。即使我在这些 DLL 上设置了“copy-always=true”，它们也不会被复制到 Web 应用程序包中。我可以将它们包含在包中的唯一方法是将这些 DLL 添加到 Web 应用程序的引用中。我不想这样做，因为我不再有一个有意义的依赖树。

我希望这能让问题更清楚。如果有任何不清楚的地方，请告诉我。很难描述这种东西。

如果有人也有类似的问题，请说出来并分享您的经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T23:14:54.173

我真的很想给你一个更好的答案，但不幸的是，你没有提供足够的关于你的解决方案/项目和依赖项的信息，所以我会尝试给你几个想法，我希望其中一个有用。

1.  如您所说，最简单的方法是使用所有依赖项设置一个单独的文件夹，并创建将它们复制到您的 bin 文件夹的目标文件。如果您有不经常更改的依赖项，则可能会起作用。如果您公司的另一个团队正在构建它们并且他们经常更改，那么这种方法并不好。

2.  另一种简单的方法-如果您仅从解决方案中引用依赖项，则可以更改构建路径，以便它们直接构建到主项目的 bin 文件夹中。这样您就不必直接引用它们。

3.  使用 NuGet。您有一个单独的团队生产松散耦合的依赖项，设置本地 NuGet 存储库并将其用于该[http://juristr.com/blog/2012/04/using-nuget-to-distribute-our-company可能是有意义的/](http://juristr.com/blog/2012/04/using-nuget-to-distribute-our-company/)

我希望这会有所帮助。

# ember.js - Emberjs 应用程序路由和控制器

> ID：14700928
> 
> 赞同：0
> 
> 时间：2013-02-05T05:43:44.353
> 
> 标签：ember.js

有人可以解释为什么这样做：

App.js 中的代码：

```
App.ApplicationRoute = Ember.Route.extend({
  setupController : function (params) {
    this.controllerFor('food').set('model', App.Food.find(params.food_id));
  }
}); 
```

但以下不会，除非我明确声明`App.FoodController = Ember.ObjectController.extend();`

```
App.FoodRoute = Ember.Route.extend({
  model : function(params) {
    return App.Food.find(params.food_id);
  }
}); 
```

这是我在 index.html 中使用的代码，不会在代码块之间更改

```
<script type="text/x-handlebars" data-template-name="application">     
  {{ outlet }}
</script>     

<script type="text/x-handlebars" data-template-name="food">
  {{name}}
</script> 
```

路由器：

```
App.Router.map(function() {
  this.resource( 'foods' );
  this.resource( 'food', { path : '/food/:food_id' } );  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:14:42.317

您显示的代码似乎没问题。这是一个证明它的工作小提琴：http: [//jsfiddle.net/ebXeS/2/](http://jsfiddle.net/ebXeS/2/)

代码唯一的错误是这部分（它被排除在小提琴之外）：

```
App.ApplicationRoute = Ember.Route.extend({
  setupController : function (params) {
    this.controllerFor('food').set('model', App.Food.find(params.food_id));
  }
}); 
```

根据您的路由器定义，您的应用程序路由的参数中不应包含 food_id。不仅如此，您还应该在 uhm... FoodRoute 中访问食物路线的控制器。阅读有关 Ember 及其路由方式的更多信息 ( [http://emberjs.com/guides/](http://emberjs.com/guides/) )。

# jquery - show() 函数在 div 中不起作用

> ID：14700931
> 
> 赞同：1
> 
> 时间：2013-02-05T05:43:54.040
> 
> 标签：jquery, html

我正在显示和隐藏一个包含加载/等待 gif 图像的 div。单击我调用的按钮`$("#div").show()`并`.hide()`在单击功能结束时。但图像一般不显示。当我将断点放在`.show()`行旁边时，它会显示图像。

我也试过`.css("display","")`，但它不会奏效。

请提出任何其他方式，或告诉我可能是什么问题。

谢谢。

我的代码如下所示

```
$("#button").click(function(){

   $("#div").show(); // showing image so that user will know that a process is going on.

   //other working code

   $("#div").hide();   // hiding will indicate process completion
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:57:58.697

您在同一个函数调用中调用 show 和 hide 没有动画。因为这是同步发生的，所以 2 个函数调用将在同一个线程中进行，因为 JavaScript 是单线程的。您根本不会注意到任何变化，因为它在浏览器甚至可以更新显示之前显示和隐藏在同一个线程上。如果有某种异步调用，您会看到它，但您似乎没有。

您可以通过将所有工作代码放在 setTimeout 中的初始显示之后来伪造它。

```
$("#div").show();
setTimeout(function(){
    ...other working code
    $("#div").hide();
}, 100); 
```

这会将处理延迟 100 毫秒，但是一旦处理开始，如果工作代码部分需要一秒钟来完成您的动画 gif 将不会真正动画，因为在 JavaScript 执行时动画的显示无法运行（由于浏览器的单线程行为）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T06:15:16.650

Javascript 是单线程的，UI 渲染和脚本执行共享同一个线程。由于浏览器进行优化的方式，您看不到 show() 和 hide() 效果。

您可以利用 JQuery 承诺机制来解决您的问题。[这里的](http://api.jquery.com/promise/)例子

而不是这样做

> 1) 显示 DIV
> 
> 2）执行一些代码
> 
> 3）隐藏DIV

你会这样做的

> 1) 显示 div
> 
> 2) 当'show'完成时
> 
> ```
>  2.1) execute your code, 
>            2.2) hide the DIV 
> ```

[我在这里](http://jsbin.com/umecip/14/edit)创建了一个 JSbin 工作示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T05:47:52.927

浏览器有一种非常**花哨**的工作方式，当**脚本执行**时，它会在脚本完成后**延迟所有界面绘制**。

所以在你的代码中，浏览器确实显示了 div （你可以得到正确的`offsetWidth`and `offsetHeight`）但是你看不到它（因为绘图被延迟了）。

调试器在代码上创建一个断点，然后浏览器将所有更改刷新到您的屏幕上，以便您可以看到图像，`alert()`调用可以产生相同的效果。

我的上述状态不是 100% 正确的，因为实际上浏览器正在**事件循环**下工作，并且在脚本执行时延迟了所有**布局**和**绘图**以及更多其他工作，但我认为它可以回答你的问题，如果你想要更精确和复杂的答案，我很乐意写更多:)

# c# - 如何在 .NET/C# 中在调试时的 Debug.WriteLine() 和发布模式下的 Console.WriteLine() 之间切换

> ID：14700932
> 
> 赞同：4
> 
> 时间：2013-02-05T05:44:03.217
> 
> 标签：c#, .net

在我的 C# 代码中，我想将其包装`Debug.WriteLine()`成`Console.WriteLine()`一个函数，以便它在调试模式下以调试窗口为目标，在发布模式下以控制台为目标。实现它的最佳方法是什么？我是 C# 新手。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T05:45:13.430

查看[System.Diagnostics.Trace](http://msdn.microsoft.com/en-us/library/36hhw2t6.aspx)类。

Trace 包含一个类似于 Debug 和 Console 类的 WriteLine() 方法，并支持在运行时或通过配置文件附加/分离各种侦听器，例如[ConsoleTraceLister](http://msdn.microsoft.com/en-us/library/system.diagnostics.consoletracelistener.aspx)、[DefaultTraceListner](http://msdn.microsoft.com/en-us/library/system.diagnostics.defaulttracelistener.aspx)（用于调试）、[TextWriterTraceListener](http://msdn.microsoft.com/en-us/library/system.diagnostics.textwritertracelistener.aspx)（用于文件）、[EventLogTraceListener](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlogtracelistener.aspx)，或者您可以创建用于写入数据库表或 syslogd 聚合器等位置的内容。

您几乎可以将当前对 Debug 或 Console 的每个调用更改为使用 Trace，并且只需设置要使用的侦听器。请注意， Trace 方法缺少一些格式化功能，但我认为可配置的输出源足以弥补它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T08:07:03.783

始终使用 Debug.WriteLine 并将这些行添加到程序的开头：

```
#if !DEBUG
            var listeners = new TraceListener[] { new TextWriterTraceListener(Console.Out) };
            Debug.Listeners.AddRange(listeners);
#endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T06:00:01.000

除了乔尔的回答，另一个非常简单的解决方案是：

```
private void writeLine(String s)
{

    #if DEBUG
        Debug.WriteLine(s);
    #else
        Console.WriteLine(s);
    #endif
} 
```

这使用预处理器指令，因此它不会写入控制台，除非在发布模式下。请注意，它有点多余，因为`Debug`无论如何在发布构建期间都会删除所有调用，即使没有预处理器指令也是如此。

# c - 无法将此 C 代码转换为 MIPS 程序集

> ID：14700933
> 
> 赞同：0
> 
> 时间：2013-02-05T05:44:10.130
> 
> 标签：c, assembly, mips

基本上我需要将此 C 代码 ( [http://pastebin.com/7EupfQ5n](http://pastebin.com/7EupfQ5n) ) 翻译成 MIPS 程序集。我对此有所了解，但我遇到了麻烦。

到目前为止，我所拥有的是（[http://pastebin.com/LpS6Mqr1](http://pastebin.com/LpS6Mqr1)）。但是当我在模拟器中运行代码时，它会在无限循环中运行，尽管我将其放入数组中，并且我找不到它在哪里执行此操作。我会假设它在 while 和 if 语句中以不正确的方式引用数组，但我不确定如何或为什么。

如果有人可以提供帮助，那将不胜感激。

另外，有没有办法为 Mac OSX 提供一个 C 到 MIPS 编译器（翻译器？）？我安装了 GCC，但 -mips 标志为我生成了一个错误。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:26:16.320

下次请使用调试器或模拟器来单步调试您的代码。您可能已经注意到了一些明显的错误。

1.  您的所有`move`（伪）指令都被颠倒了。应该是`move destination, source`。
2.  `$s0`为了安全起见，您应该在开始时用零初始化。
3.  `bge $s3, $t4, sumBetween1If3`（第 87 行）使用了错误的寄存器（复制粘贴错误？）。它应该是`bge $s4, $s6, sumBetween1If3`
4.  您应该删除第 97 行，因为它在当前形式下是无用的，并且如果您交换操作数（它会破坏您的总和`$s5`），则完全有害。
5.  不知道你想用第 98-100 行做什么，因为你不使用 `$ra`或其他地方的堆栈。所以这些行都搞砸了，并导致你的无限循环。只需删除这 3 行。

有趣的是，您的数组访问是正常的。但是，有许多改进的可能性，最值得注意的是不需要两次加载数组项。我假设您打算删除所有多余的跳转，这些跳转只是进入下一条指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:11:22.507

最简单的检查方法是将汇编代码与编译器生成的输出进行比较。

如果您的机器上已经安装了 clang，则不需要 gcc 来执行此操作（并完成创建跨平台编译器所需的所有繁琐步骤）。然而不幸的是，Mac 上安装的 clang 版本不支持 mips，因此您必须直接从 llvm 的网站获取 clang，或者在 linux 机器上进行。一旦你得到铿锵声，只需运行

`clang -S -target mips -o mips.asm ./your_file.c`

并将您的汇编代码与`mips.asm`文件进行比较。

我在[这里](http://pastebin.com/LjRB5mZg)包含了命令的输出。

# php - 从 CodeIgniter 中删除 index.php 时遇到问题

> ID：14700935
> 
> 赞同：1
> 
> 时间：2013-02-05T05:44:19.523
> 
> 标签：php, apache, .htaccess, codeigniter

到目前为止，我全新安装了 2.1.3，并放置了一个 .htaccess 文件：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

在根目录下，与应用程序、系统等同级。

*   编辑`$config['index_page'] = 'index.php';`到.
    `$config['index_page'] = '';`_`application\config\config.php`
*   开启`rewrite_module`。
*   重新启动阿帕奇。

但是即使尝试了所有解决方案，即使是相关帖子中的解决方案，我仍然以 404 告终。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T05:56:24.073

希望这可以帮助这是我的 htaccess，它对我有用。

RewriteBase 上的 RewriteEngine /codeigniter/

```
#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

ErrorDocument 404 /index.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:47:00.703

您需要修改 httpd.conf 以启用 mod_rewrite 并确保您的 webroot 目录将 AllowOverride 设置为“ALL”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T05:52:04.390

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

使用它会起作用

# android - 停止服务中的线程

> ID：14700936
> 
> 赞同：6
> 
> 时间：2013-02-05T05:44:19.983
> 
> 标签：android, multithreading, service

`buttonStop`我在服务中有一个线程，当我按下我的主要活动类时，我希望能够停止线程。

在我的主要活动课程中，我有：

```
public class MainActivity extends Activity implements OnClickListener { 
  ...
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 

    buttonStart = (Button) findViewById(R.id.buttonStart);
    buttonStop = (Button) findViewById(R.id.buttonStop);

    buttonStart.setOnClickListener(this);
    buttonStop.setOnClickListener(this);
  }

  public void onClick(View src) {
    switch (src.getId()) {
    case R.id.buttonStart:
         startService(new Intent(this, MyService.class));
         break;
    case R.id.buttonStop:
         stopService(new Intent(this, MyService.class));
         break; 
    }           
  }
} 
```

在我的服务课程中，我有：

```
public class MyService extends Service {
  ... 
  @Override
  public IBinder onBind(Intent intent) {
    return null;
  }

 @Override
 public void onCreate() {
    int icon = R.drawable.myicon;
    CharSequence tickerText = "Hello";
    long when = System.currentTimeMillis();
    Notification notification = new Notification(icon, tickerText, when);
    Intent notificationIntent = new Intent(this, MainActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,  notificationIntent, 0);
    notification.setLatestEventInfo(this, "notification title", "notification message", pendingIntent);     
    startForeground(ONGOING_NOTIFICATION, notification);
            ...
 } 

 @Override
 public void onStart(Intent intent, int startid) {
   Thread mythread= new Thread() { 
   @Override
   public void run() {
     while(true) {
               MY CODE TO RUN;
             }
     }
   }
 };
 mythread.start();
} 
```

}

什么是阻止的最好方法`mythread`？

我停止服务的方式也是`stopService(new Intent(this, MyService.class));`正确的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T05:52:51.270

你不能像这样停止一个正在运行的不可停止循环的线程

```
while(true)
{

} 
```

要停止该线程，请声明一个`boolean`变量并在 while 循环条件下使用它。

```
public class MyService extends Service {
      ... 
      private Thread mythread;
      private boolean running;

     @Override
     public void onDestroy()
     {
         running = false;
         super.onDestroy();
     }

     @Override
     public void onStart(Intent intent, int startid) {

         running = true;
       mythread = new Thread() { 
       @Override
       public void run() {
         while(running) {
                   MY CODE TO RUN;
                 }
         }
       };
     };
     mythread.start();

} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-05T06:49:16.510

您调用 onDestroy() 方法来停止服务。

# ios - 即时消息推送通知

> ID：14700939
> 
> 赞同：1
> 
> 时间：2013-02-05T05:44:40.870
> 
> 标签：ios, apple-push-notifications

我在 iOS 中有一个即时通讯应用程序。我想使用推送通知让用户知道他是否在应用程序最小化时收到了一条消息。最初我已经实现了应用程序，当应用程序最小化时，应用程序会通知我的服务器，服务器又会联系 APNS 以通知已收到消息。但是应用程序通知服务器存在延迟。因此，如果用户最小化应用程序，同时向他发送一条消息，他不会收到通知，因为我的服务器仍在将消息发送到应用程序而不是 APNS。

我想知道如何在聊天应用程序中克服这种情况。无论用户是否最小化了应用程序，他们是否都将所有聊天消息发送到 APNS。如果我将所有消息都发送到 APNS，那将是一个好的设计吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T13:25:59.733

在 iOS 上，当应用程序“最小化”（实际上是在后台）时，您不能依赖任何正在运行的进程。您的进程可能因多种原因被操作系统杀死，无论如何，除非您有资格获得特殊的扩展后台处理，否则您的应用程序无法处理超过 10 分钟。

通常，对于聊天类型的应用程序，每次客户端收到消息时，同一个客户端都会发回一条消息，让服务器知道它已收到该消息。这样，如果您的服务器在几秒钟后没有收到消息已收到的信号，您可以假设该应用程序没有在设备上运行，而是可以通过推送发送消息。

无需在客户端使用过多的处理，这会耗尽电池，也无需为每条消息发送推送。

# android - android中的WebView后退按钮问题

> ID：14700941
> 
> 赞同：1
> 
> 时间：2013-02-05T05:44:50.420
> 
> 标签：android, android-layout, android-intent, android-widget, android-webview

我正在使用 WebView 在应用程序中显示 url。当我单击设备中的后退按钮时，它会终止并关闭应用程序。例如：我将链接作为

`w.loadUrl("http://www.google.com");`

在那里我正在搜索，它会转到 webview 中的下一页。但是当我点击返回时

button 键，它会关闭应用程序，而不是返回到我搜索的历史记录。

如何解决这个问题。？这里面有什么要给的，如果是的话，应该给什么？

```
@Override
public void onBackPressed() { } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:01:16.287

如果您想浏览您的历史记录，`webview`请将以下代码添加到您的`webview`活动中

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack()) {
         mWebView.goBack();
         return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:04:20.493

你可以看到链接或下面的代码： -

[如果在 WebView 中按下后退按钮，如何返回上一页？](https://stackoverflow.com/questions/6077141/android-webview-how-to-code-the-back-button)

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if(event.getAction() == KeyEvent.ACTION_DOWN){
        switch(keyCode)
        {
        case KeyEvent.KEYCODE_BACK:
            if(mWebView.canGoBack() == true){
                mWebView.goBack();
            }else{
                finish();
            }
            return true;
        }

    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:04:38.857

在这种情况下，您需要通过此代码覆盖后退按钮，您可以覆盖后退按钮

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {                                              
    if (keyCode == KeyEvent.KEYCODE_BACK)  {
         moveTaskToBack(true);
         return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T08:20:24.247

你可以使用下面的代码，它对我有用。

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (Integer.valueOf(android.os.Build.VERSION.SDK) < 7 
            && keyCode == KeyEvent.KEYCODE_BACK
            && event.getRepeatCount() == 0) {
        // Take care of calling this method on earlier versions of
        // the platform where it doesn't exist.
        onBackPressed();
    }
    return super.onKeyUp(keyCode, event);
}

@Override
public void onBackPressed() {
    return;
} 
```

# python - 在 django 中找不到模块

> ID：14700943
> 
> 赞同：0
> 
> 时间：2013-02-05T05:45:02.343
> 
> 标签：python, django

我想用两个名为apps和data的应用程序在django中创建一个应用程序。“数据”应用程序放置在“应用程序”中。我在“settings.py”的已安装应用程序中输入了“apps.data”。当我运行时开发服务器我收到此错误“没有名为apps.data的模块”。任何人请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:21:44.043

在“应用程序”中嵌套“数据”应用程序的原因是什么？当只有两个应用程序时，将一个应用程序嵌套在另一个应用程序中是不常见的（除非您有充分的理由）。建议：

创建一个apps应用程序，并为其创建一个数据模型；

创建应用程序应用程序和数据应用程序；（但是通过模型链接它们）

您的问题的答案可能是文件结构，但您对所问内容的基本要求在您的应用程序要求中有详细说明。

长话短说..您要创建什么应用程序？

# org-mode - org-mode 可以在 html 或 odt 中同时导出链接和 url 吗？

> ID：14700949
> 
> 赞同：0
> 
> 时间：2013-02-05T05:45:37.583
> 
> 标签：org-mode

如果我有 [[http://www.google.com/][Google]] 等形式的链接，我可以让 org-mode 将它们导出为 ODT 或 HTML，以便这些链接适用于电子版本的文件和链接在打印时也可见吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:57:08.823

请参阅[组织手册](http://orgmode.org/org.html)：

*   [12.5.4 HTML 导出中的](http://orgmode.org/org.html#Links-in-HTML-export)链接 - 如何解释和格式化链接
*   [12.8.5 ODT 导出中的](http://orgmode.org/org.html#Links-in-ODT-export)链接 - 如何解释和格式化链接

# authentication - https url与http url作为oauth auth回调之间的区别

> ID：14700951
> 
> 赞同：0
> 
> 时间：2013-02-05T05:45:58.903
> 
> 标签：authentication, oauth, oauth-2.0, twitter-oauth

根据[https://dev.twitter.com/docs/api/1/post/oauth/request_token](https://dev.twitter.com/docs/api/1/post/oauth/request_token)，强烈建议您对所有 OAuth 授权步骤使用 HTTPS。但是，我发现回调 url 没有遵循这个建议。如果给出 https 回调 url 与给出 http 回调 url 有区别吗？

例如，

```
Request URL:
POST https://api.twitter.com/oauth/request_token

Authorization Header:
oauth_callback="http%3A%2F%2Fmyapp.com%3A3005%2Ftwitter%2Fprocess_callback", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:14:32.237

回调 URL 只需要 url 格式，Oauth 规范不要求它是 https。

某些 Oauth 提供商（如 SalesForce）确实强制使用 https。

然而，大多数服务提供商只是强制您注册回调 url，以便服务提供商可以使用您的消费者密钥/秘密验证在 oauth 舞蹈期间提供了正确的回调 url。

此外，Android 中的移动应用程序可以创建特殊的协议处理程序，允许定义诸如“linkedin://callback”之类的回调处理程序（让 Android 应用程序处理linkedin oauth 回调）。

在这种情况下，强制使用 https 是没有意义的，因为它会强制移动应用程序将其 oauth 舞蹈卸载到远程服务器，在某些情况下，在应用程序本身中执行此操作是完全可以接受的。

还要记住，当访问令牌被泄露时，希望进行安全 api 调用的人也需要访问消费者密钥/消费者秘密。

# java - Android webview 只播放一次视频

> ID：14700952
> 
> 赞同：0
> 
> 时间：2013-02-05T05:46:03.587
> 
> 标签：java, android, video, android-webview

我在 android 中使用 webview 来播放视频。问题是视频播放一次。我已经看到了一些有关如何修复它的答案，但仍然无法正常工作。这是我的代码：

```
public class MyChromeClient extends WebChromeClient implements
    OnCompletionListener, OnErrorListener {

    private Activity _activity;
    private VideoView mCustomVideoView;

    private LinearLayout mContentView;
    private FrameLayout mCustomViewContainer;
    private WebChromeClient.CustomViewCallback mCustomViewCallback;
    static final FrameLayout.LayoutParams COVER_SCREEN_GRAVITY_CENTER = new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.FILL_PARENT,
            ViewGroup.LayoutParams.FILL_PARENT, Gravity.CENTER);

    public MyChromeClient(Activity context) {
        super();
        _activity = context;
    }

    @Override
    public void onShowCustomView(View view, CustomViewCallback callback) {
        super.onShowCustomView(view, callback);
        if (view instanceof FrameLayout) {
            FrameLayout frame = (FrameLayout) view;
            if (frame.getFocusedChild() instanceof VideoView) {
                mCustomVideoView = (VideoView) frame.getFocusedChild();
                frame.removeView(mCustomVideoView);
                _activity.setContentView(mCustomVideoView);
                mCustomVideoView.setOnCompletionListener(this);
                mCustomVideoView.setOnErrorListener(this);
                mCustomVideoView.start();
            }
        }
    }

    public void onHideCustomView() {
        if (mCustomVideoView == null)
            return;
        // Hide the custom view.
        mCustomVideoView.setVisibility(View.GONE);
        // Remove the custom view from its container.
        mCustomViewContainer.removeView(mCustomVideoView);
        mCustomVideoView = null;
        mCustomViewContainer.setVisibility(View.GONE);
        mCustomVideoView.stopPlayback();
        mCustomViewCallback.onCustomViewHidden();
        // Show the content view.
        mContentView.setVisibility(View.VISIBLE);
    }

    public void onCompletion(MediaPlayer mp) {
        //Intent intent = new Intent(_activity, _activity.getClass());
        //intent.setClass(_activity, _activity.getClass());
        //_activity.startActivity(intent);
        //_activity.finish();
    }

    public boolean onError(MediaPlayer mp, int what, int extra) {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:52:36.740

我想提供一个替代方案，它可能并不完美，但从 Web 编程的角度来看，在我为此苦苦挣扎了一段时间之后，诀窍是将视频转换为 base64 并将其提供给源标签（在我的情况下是 jquery）。如果它不在资产文件夹中，它就不会混淆！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:59:01.410

试试这个在show方法中添加这个

```
WebChromeClient.CustomViewCallback CustomViewCallback; mCustomViewCallback = callback; 
```

然后在隐藏方法中......

```
mCustomViewCallback.onCustomViewHidden(); mCustomViewCallback = null; HTML5WebView.this.goBack(); 
```

编辑 ：-

```
 public class HTML5WebView extends WebView {

    static final String LOGTAG = "HTML5WebView";

    private void init(Context context) {
        mContext = context;     
        Activity a = (Activity) mContext;

        mLayout = new FrameLayout(context);

        mBrowserFrameLayout = (FrameLayout) LayoutInflater.from(a).inflate(R.layout.custom_screen, null);
        mContentView = (FrameLayout) mBrowserFrameLayout.findViewById(R.id.main_content);
        mCustomViewContainer = (FrameLayout) mBrowserFrameLayout.findViewById(R.id.fullscreen_custom_content);

        mLayout.addView(mBrowserFrameLayout, COVER_SCREEN_PARAMS);

        // Configure the webview
        WebSettings s = getSettings();
        s.setBuiltInZoomControls(true);
        s.setLayoutAlgorithm(WebSettings.LayoutAlgorithm.NARROW_COLUMNS);
        s.setUseWideViewPort(true);
        s.setLoadWithOverviewMode(true);
        s.setSaveFormData(true);
        s.setJavaScriptEnabled(true);
        mWebChromeClient = new MyWebChromeClient();
        setWebChromeClient(mWebChromeClient);
        setWebViewClient(new WebViewClient());
        setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
        s.setDomStorageEnabled(true); 

        mContentView.addView(this);
    }

    public HTML5WebView(Context context) {
        super(context);
        init(context);
    }

    public HTML5WebView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    public HTML5WebView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(context);
    }

    public FrameLayout getLayout() {
        return mLayout;
    }

    public boolean inCustomView() {
        return (mCustomView != null);
    }

    public void hideCustomView() {
        mWebChromeClient.onHideCustomView();
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            if ((mCustomView == null) && canGoBack()){
                goBack();
                return true;
            }
        }
        return super.onKeyDown(keyCode, event);
    }

    private class MyWebChromeClient extends WebChromeClient {
        private Bitmap      mDefaultVideoPoster;
        private View        mVideoProgressView;
        FrameLayout frame;

        @Override
        public void onShowCustomView(View view, WebChromeClient.CustomViewCallback callback)
        {
            HTML5WebView.this.setVisibility(View.GONE);
            isVideoPlaying = true;
            // if a view already exists then immediately terminate the new one
            if (mCustomView != null) {
                callback.onCustomViewHidden();
                return;
            }

            mCustomViewContainer.addView(view);
            mCustomView = view;
            frame = (FrameLayout) mCustomView;
            mCustomViewCallback = callback;
            VideoView mVideoView;
            if(frame.getFocusedChild() instanceof VideoView){
                mVideoView = (VideoView) frame.getFocusedChild();
            }
            mCustomViewContainer.setVisibility(View.VISIBLE);
        }

        @Override
        public void onHideCustomView() {
            if (mCustomView == null)
                return;        

            // Hide the custom view.
            mCustomView.setVisibility(View.GONE);

            // Remove the custom view from its container.
            mCustomViewContainer.removeView(mCustomView);
            mCustomView = null;
            mCustomViewContainer.setVisibility(View.GONE);
            mCustomViewCallback.onCustomViewHidden();
            mCustomViewCallback = null;

            HTML5WebView.this.setVisibility(View.VISIBLE);
            HTML5WebView.this.goBack();

        }
    }
} 
```

# plone - Ploneformgen 和正则表达式

> ID：14700955
> 
> 赞同：1
> 
> 时间：2013-02-05T05:46:18.667
> 
> 标签：plone, ploneformgen

我想在使用 ploneformgen 1.7 创建的表单中使用正则表达式。我正在使用克隆 4.1。在文本字段的自定义验证中。

如何使用正则表达式？

我尝试了以下方法：

```
python: import re; test(value==re.search(r'[123]'), False, 'Needs to be number 1 or 2 or 3') 
```

但它给了我错误，因此无法验证。我想要的值应该是 1 或 2 或 3。我可以将表达式用作

```
python: test(value=='1' or value=='2' or value=='3', False, 'Needs to be number 1 or 2 or 3') 
```

但我想使用正则表达式。请指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:20:55.993

您可以在 through-the-web 脚本、TALES "python:" 表达式、PFG 覆盖和 PFG 脚本适配器中使用的包和类型集仅限于受限 Python 中可用的那些。受限制的 Python 在它提供的模块和类型方面故意非常保守。

您可以使用包含在您的 egg 列表中的 Python 包中的显式“允许”声明来扩展列表。[github 集体](https://github.com/collective/collective.localfunctions)中提供了此类包的示例，其中包括我发现在 PloneFormGen 中特别有用的几个模块和类型，包括 re.

您仍然无法在 TALES 表达式中“导入 re”，但您将能够在 TTW 脚本中使用 re，该脚本可用作 PFG 验证器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T06:03:29.903

根据[http://docs.zope.org/zope2/zope2book/ScriptingZope.html](http://docs.zope.org/zope2/zope2book/ScriptingZope.html)，您不能在 TALES 中使用正则表达式，因为受限 Python 禁止使用正则表达式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T05:59:43.107

搜索方法实际上需要 2 个参数。

你应该使用这种方式：`import re; test(re.search(r'[123]', value), False, 'Needs to be number 1 or 2 or 3')`

# r - 新的计算循环

> ID：14700957
> 
> 赞同：0
> 
> 时间：2013-02-05T05:46:34.543
> 
> 标签：r, loops, if-statement

我想要一个循环来为我执行计算，并将变量（连同识别信息）导出到一个新的数据框中。

我的数据如下所示：

每个唯一的采样点 (UNIQUE) 都有 4 个与之关联的数据点（它们因 WAVE 不同而不同）。

```
 WAVE REFLECT REFEREN PLOT LOCAT COMCOMP     DATE UNIQUE
1 679.9     119       0    1     1       1 11.16.12      1
2 799.9     119       0    1     1       1 11.16.12      1
3 899.8     117       0    1     1       1 11.16.12      1
4 970.3     113       0    1     1       1 11.16.12      1
5 679.9     914   31504    1     2       1 11.16.12      2
6 799.9    1693   25194    1     2       1 11.16.12      2 
```

我想创建一个看起来像这样的新数据框：对于每个唯一的采样点，我想从 2 个特定的“WAVE”测量中计算“WBI”。

```
WBI                     PLOT   ....  UNIQUE
(WAVE==899.8/WAVE==970)    1              1
(WAVE==899.8/WAVE==970)    1              2
(WAVE==899.8/WAVE==970)    1              3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:52:57.570

取决于输入 data.frame 的大小，在效率方面可能会有更好的解决方案，但以下对于中小型数据集应该可以工作，并且有点简单：

```
out.unique = unique(input$UNIQUE);

out.plot = sapply(out.unique,simplify=T,function(uq) {
    # assuming that plot is simply the first PLOT of those belonging to that
    # unique number. If not yo should change this.
    subset(input,subset= UNIQUE == uq)$PLOT[1];
});

out.wbi = sapply(out.unique,simplify=T,function(uq) {
    # not sure how you compose WBI but I assume that are the two last 
    # record with that unique number so it matches the first output of your example
    uq.subset = subset(input,subset= UNIQUE == uq);
    uq.nrow = nrow(uq.subset);
    paste("(WAVE=",uq.subset$WAVE[uq.nrow-1],"/WAVE=",uq.subset$WAVE[uq.nrow],")",sep="")
});

output = data.frame(WBI=out.wbi,PLOT=out.plot,UNIQUE=out.unique); 
```

但是，如果输入数据很大，您可能想利用记录似乎按“唯一”排序的事实；重复的 data.frame 子设置会很昂贵。此外，两个 sapply 调用都可以合并为一个，但会更麻烦，所以我就这样离开了。

# django - 显示使用 Django celery 传输的文件信息？

> ID：14700959
> 
> 赞同：0
> 
> 时间：2013-02-05T05:46:45.567
> 
> 标签：django, django-celery

我在 Django celery 中有这样的任务：

```
@task
def file(password, source12, destination):
    subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz', '--info=progress2', source12, destination], 
                                    stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate()[0] 
```

我有一个执行上述任务的函数：

```
@celery.task
@login_required(login_url='/login_backend/') 
def sync(request):
    #user_id = request.session['user_id']
    """Sync the files into the server with the progress bar"""
    if request.method == 'POST':
        choices = request.POST.getlist('choice') 
        for i in choices:
            new_source = source +"/"+ i 
            #b = result.successful()
            #result.get() #Poll the database to get the progress
            start_date1 = datetime.datetime.utcnow().replace(tzinfo=utc)
            source12 = new_source.replace(' ', '') #Remove whitespaces
            file.delay(password, source12, destination)
        return HttpResponseRedirect('/uploaded_files/')
    else:
        return HttpResponseRedirect('/uploaded_files/') 
```

我想向用户显示带有进度的文件传输信息。我想显示`file name, remaining time and size of the file`正在传输的文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:36:22.570

在这里，您有如何通过 celery 本身传递信息的[示例。](http://docs.celeryproject.org/en/latest/userguide/tasks.html#custom-states)只需以 AJAX 调用的形式启动上传过程，返回任务的 ID，然后通过 AJAX 询问任务的状态。

要真正知道你在做什么，你需要知道`file`任务本身的进度。我怀疑你是否可以通过`sshpass`以其他方式调用子进程然后解析`PIPE`输出来实现这一点。

`.delay`当您完成一项任务时，Mind celery 已经为您生成了一个过程。

尝试以块的形式读取目标，rsync 块，然后将文件合并到目标中。这样你就知道你已经转移了多少块。

# java - 从 ResultSet 将日期作为字符串读取时的默认 JDBC 日期格式

> ID：14700962
> 
> 赞同：6
> 
> 时间：2013-02-05T05:47:13.147
> 
> 标签：java, jdbc

我正在查看一些基本上执行以下操作的代码：

```
ResultSet rs = ps.executeQuery();
String myDateStr = rs.getString("MY_DATE"); //field is of type Date
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss'.0'");
Date myDate = sdf.parse(myDateStr); 
```

在某些环境中，最后一行有效，而在其他环境中，它会引发 Unparseable date 异常。看起来在某些系统上默认日期格式是 2013-01-25 00:00:00.0，而在其他系统上是 2013-01-25 00:00:00。JVM、OS 和 Oracle 版本在环境之间是不同的（虽然都使用 Oracle 并在 unix 变体上运行）。

更改代码可能很复杂。我想知道是否可以设置一个环境变量或类似的变量以使从 rs.getString() 返回的日期格式一致？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T05:53:58.773

尝试这个：

```
ResultSet rs = ps.executeQuery();

Date myDate = rs.getDate("MY_DATE"); 
```

或这个 ：

```
ResultSet rs = ps.executeQuery();
String myDateStr = rs.getString("MY_DATE"); 
Date myDate = valueOf(myDateStr); 
```

有关日期的更多信息： [http](http://docs.oracle.com/javase/7/docs/api/java/sql/Date.html)
://docs.oracle.com/javase/7/docs/api/java/sql/Date.html 有关结果集的更多信息：http: [//docs.oracle.com/javase/7/docs/api /java/sql/ResultSet.html](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T05:49:52.050

而不是使用

```
String myDateStr = rs.getString("MY_DATE") 
```

你应该使用

```
Timestamp timestamp = rs.getTimestamp("MY_DATE"); 
```

JDBC / 数据库将为您处理日期转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T05:49:49.990

如果该字段是 type `Date`，则将其读取为 a`java.sql.Date`并在此之后进行所需的任何转换。否则，您将受到数据库实现的摆布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T22:51:16.047

对于我正在使用的 Oracle JDBC 驱动程序，格式在驱动程序库中是硬编码的，因此只有在使用不同的驱动程序版本时才会因系统而异。

请参阅我尝试在此处获得相同问题的答案：[从 JDBC ResultSet 将日期作为字符串读取时指定的日期格式在哪里](https://stackoverflow.com/questions/21104197/where-is-the-date-format-specified-when-reading-a-date-as-a-string-from-jdbc-res/21174524#21174524)。

（很抱歉问了一个单独的问题，但是由于您的问题已经多次回答了有用的“只是不要那样做”的回答，所以我又试了一次......）。

# qt - Qt Creator 需要一个编译器来构建。在套件选项中配置编译器

> ID：14700965
> 
> 赞同：50
> 
> 时间：2013-02-05T05:47:33.787
> 
> 标签：qt, qt-creator

我已经安装了带有最新二进制文件的 Qt Creator5。但是当我运行任何程序时，它会给我这个错误。

**:-1: 错误：Qt Creator 需要设置编译器来构建。在套件选项中配置编译器。**

我已经在整个互联网上搜索了答案，但它不充分而且没有帮助。请回复摆脱此错误的方法。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-05-11T13:10:04.820

我也有同样的问题所以我所做的是

**对于 Linux**

```
sudo apt-get install g++ 
sudo apt-get install libgl1-mesa-dev libglu1-mesa-dev 
```

然后关闭qt创建器并重新启动它并且它工作

我不知道以上两个中的哪一个使它起作用，但它起作用了！

**对于 Windows**

下面给出的解决方案对少数人有用。所以值得一试。

删除此文件 `C:\Users\AppData\Roaming\QtProject\qtcreator\toolchains.xml` 以解决问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-09T09:56:49.167

对于 Windows 7 上的我来说，这是通过单击绿色箭头上方 Qt Creator 屏幕左下角的计算机图标旁边的箭头图标解决的，然后双击列表上的编译器并重建项目。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-04-11T21:27:33.603

*** 仅适用于 Windows 用户 ***

在继续下一步之前，请确保您已经下载了最新版本的 Qt。

1.  从链接下载并安装 minGW-64-bit： [https ://sourceforge.net/projects/mingw-w64/files/latest/download](https://sourceforge.net/projects/mingw-w64/files/latest/download)
2.  记住安装 minGW 的目录。
3.  打开 Qt creator 并转到工具 -> 选项 -> 构建和运行
4.  在 Compilers 选项卡中选择 add -> MinGW ->
    Name: MinGW
    path: Browse for **mingw-w64.bat**（您将在安装 MinGW 的目录中找到此文件）。
    ABI：x86 Windows msvc2015 pe 64bit

    不要忘记应用您的编辑。

5.  转到 Kit -> 添加
    名称：GCC
    设备类型：桌面
    设备：本地 PC（桌面默认）
    编译器：minGW
    Qt 版本：选择最新版本

    应用更改并重新启动 qt

在创建新项目时，请确保使用 GCC 作为工具包

如果它仍然不起作用单击播放按钮上方左下方的计算机图标 -> GCC -> 构建

或者

转到项目（它在左侧菜单中）-> 构建步骤-> 制作 -> 覆盖 minGw31-make.exe -> 浏览到安装 minGW/bin\mingw32-make.exe
的路径干净的步骤也一样

如果您在这些步骤后仍然遇到任何错误，请尝试设置**环境变量**

1.  按 Win+Q
2.  键入“环境变量”
3.  点击“编辑系统环境变量”
4.  系统属性 -> 高级 -> 环境变量
5.  单击路径（**注意：非常小心地使用这些步骤，不要混淆其他选项**）
6.  点击编辑
7.  按向右箭头转到文本末尾
8.  键入分号（如果它不在它的末尾，因为所有系统路径都用分号区分）
9.  粘贴路径“MinGW_installation_directory\bin”（在我的例子中是“G:\Qt\Tools\mingw32\bin”）。**确保复制并粘贴正确的路径**
10.  单击确定并应用更改。

那应该这样做！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-22T10:42:24.663

user2304430 说得对，我也很努力地弄明白了。在左下角的绿色运行/调试按钮上方，有一个带有弹出菜单的计算机图标。在那里，您必须选择您的套件。

我转了半个小时，检查我的工具包是否在选项中设置正确。但实际上，您必须先在左下角的“计算机图标”->“弹出菜单”中选择该套件，然后它才能执行任何操作。

令人惊讶的是，该错误的前许多 Google 页面都没有显示此错误，您会认为几乎所有新用户都会遇到此错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-10T22:03:20.993

在我的 Mac 上开发时，我遇到了类似的问题 -

我试图在 OSX 10.9 上使用基于 QT 5.4.0 (Clang 6.0 (Apple)) 的 QT creator 3.3.0 进行桌面开发。在尝试手动修改我的工具包以使用 GCC、G++ 和 CLANG 之后。我终于找到了这个非常简单的解决方案：

删除该`xxx.pro.user`文件，然后重新启动 QT Creator。然后它应该会自动选择你的编译器/环境。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-13T19:13:55.043

安装 Qt5.5 后在 Fedora 22 上遇到同样的问题。

安装以下软件包就可以了：

```
sudo dnf install gcc-c++
sudo dnf install mesa-libGL-devel 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-26T18:01:26.700

当我将 Qt 安装到文件夹`~/Qt/`中，然后手动将文件夹重命名为其他文件夹时，我遇到了类似的问题。当我将文件夹名称恢复为原始名称`~/Qt/`（在 Qt 安装程序中指定）时，问题消失了；一切都解决了。

# delphi - twebbrowser 在弹出窗口中下载

> ID：14700969
> 
> 赞同：1
> 
> 时间：2013-02-05T05:48:03.007
> 
> 标签：delphi, twebbrowser

希望让我的 delphi 应用程序登录网站、导航到页面并自动下载某些文件，解决方案[如何防止嵌入式浏览器提示保存下载文件的位置？](https://stackoverflow.com/questions/13377779/how-do-i-keep-an-embedded-browser-from-prompting-where-to-save-a-downloaded-file)，对文件下载有很大帮助。

最后一个问题是在弹出窗口中导航打开的最后一步，有很多解决方案可以通过实现 TWebBrowser.NewWindow2 来捕获弹出窗口，但是这些事件似乎都不适用于上面的代码，这与 twebbrowser上面代码中的 .invokeevent 可能有效吗？

如果我使用 invokeveent 和 273(newwindow3) 的 dispID 来调用一个函数，我可以 twebbwowser.navigate() 第二个 webbrowser 到弹出窗口的 url。

我的问题是弹出窗口基本上有一行 javascript "document.print(parent.parent.opener.thefunction())" 第二个 twebbrowser 没有对其父级的引用，所以这失败了。

我可以看到两种可能的解决方案，让 TWebBrowser.NewWindow2 或 3 触发，修复下面的代码示例，LVarArray[0] {const IDispatch}，由于某种原因为空。

```
 procedure TWebBrowser.InvokeEvent(ADispID: TDispID; var AParams: TDispParams);
             // DispID 250 is the BeforeNavigate2 dispinterface and to the FFileSource here
          // is stored the URL parameter (for cases, when the IDownloadManager::Download
          // won't redirect the URL and pass empty string to the pszRedir)
          //showmessage('test');
          var
        ArgCount : Integer;
        LVarArray : Array of OleVariant;
        LIndex : Integer;
        begin
        inherited;
        ArgCount := AParams.cArgs;
        SetLength(LVarArray, ArgCount);
        for LIndex := Low(LVarArray) to High(LVarArray) do
        LVarArray[High(LVarArray)-LIndex] := OleVariant(TDispParams(AParams).rgvarg^[LIndex]);

        case ADispID of
          250: FFileSource := OleVariant(AParams.rgvarg^[5]);

        273: DoNewWindow3(Self,
         LVarArray[0] {const IDispatch},
          WordBool((TVarData(LVarArray[1]).VPointer)^) {var WordBool},
          LVarArray[2] {const OleVariant},
        LVarArray[3] {const OleVariant},
        LVarArray[4] {const OleVariant});
            end;
         end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:13:16.810

我不会直接回答你的问题，因为我认为你问错了问题。您正在尝试通过 Internet 下载文件，而没有向用户显示任何 GUI。因此，嵌入式浏览器完全是错误的解决方案。

与其试图抑制弹出对话框，不如使用从不显示弹出对话框的工具。我相信你应该做的是使用直接 HTTP 下载来下载文件。有许多不同的方法可以实现这一目标。例如，Delphi 开箱即用的一种非常方便的方法是使用 Indy。我相信您需要的组件是`TIdHttp`.

# liferay - 如何仅授予自定义角色的“转到控制面板”权限？

> ID：14700972
> 
> 赞同：2
> 
> 时间：2013-02-05T05:48:37.810
> 
> 标签：liferay, liferay-6

我创建了一个自定义常规角色，并在常规类别中授予“转到控制面板”权限。但是对于属于该特定角色的用户，“转到”选项不可见。我不想在停靠栏中为我的自定义角色授予“添加”和“管理”权限。我应该为我的自定义角色授予哪些额外权限，以允许属于该角色的用户转到控制面板？

![这是我的用户需要的属于我的自定义角色。](../Images/bcdd7e0e3569ec9518c1abca487ed39f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:13:29.883

我认为（猜测）用户还应该在控制面板中拥有至少一个 portlet 的权限，以便可以创建一个链接以在控制面板中显示某些内容。

因为如果用户无权访问控制面板中的任何 portlet，则转到控制面板将毫无用处。

# c# - 如何在表单内使用 AJAX 调用方法？

> ID：14700973
> 
> 赞同：2
> 
> 时间：2013-02-05T05:48:43.327
> 
> 标签：c#, ajax, jquery, asp.net-ajax

在这个剃刀视图中，我有两个按钮，分别称为上一个和下一个。当用户按下这些按钮时，我需要调用一个存储用户类型的方法：

```
@using (Html.BeginForm("Index", "Quiz", FormMethod.Post))
{
<div style="border-bottom: 2px solid #c8c8c8; overflow: auto; width: 100%">
    <h2 class="float-left" style="padding-bottom:5px;">@Model.Quiz.Name</h2>

    <div class="float-right">
        <input name="button" type="submit" value="done" />
    </div>
</div>

@for( ...) {
...
}

<div class="fixednavcontainer">
    <div id="questionnav" class="content-wrapper">
        <div id="questionnavstatus" class="float-left">
            <p>
                Question <span id="currentPage">@ViewBag.CurrentPage</span> of <span id="totalPages">@ViewBag.TotalPages</span>
            </p>
        </div>

        <div id="navbuttons" class="float-right">
            <img id="previous" src="~/Images/previous.png" />
            <img id="next" src="~/Images/next.png" />
        </div>

        <div class="clear-fix" />
    </div>
</div> 
```

像这样的东西应该调用按钮

```
private void Save(@model model)
{
    ...
} 
```

我希望 ajax 不会刷新页面的任何内容或加载另一个页面，只需保存并保持同一页面。自 jquery 以来是否有可能调用一个动作方法（我猜）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:03:02.070

您还可以使用 jQuery 并像这样进行调用：

```
var myModel = @Html.Raw(Json.Encode(MyModel));  //MVC3

$.ajax({
    type: "POST",
    url: "/MyController/SomeAction/",
    data: myModel ,
    cache: false,
    dataType: "json",
    success: function (response) {
        // Do whatever you have to do...
    }
}); 
```

在你的控制器中是这样的：

```
public class MyController
{
    [HttpPost]
    public ActionResult SomeAction(MyModel myModel)
    {
        // Do whatever and return whatever
            return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T06:11:17.730

你可以

```
$.ajax({
    type: "POST",
    url: "@Url.Action('yourAddress')",
    data: parametr,
    cache: false,
    dataType: "json",
    success: function (response) {
        // Do whatever you have to do...
    }
}); 
```

并在控制器中

```
public class XController
{
    [HttpPost]
    public ActionResult yourAddress(YourModel)
    {
...
    }
} 
```

# c# - 调用streamwriter时路径改变？

> ID：14700974
> 
> 赞同：0
> 
> 时间：2013-02-05T05:48:50.907
> 
> 标签：c#, string, path, directory, streamwriter

所以，我有以下三行 c# 代码：

```
string pageAnnotationTextFilePath = currentPagePath.Substring(0, currentPagePath.Length-4) + ".txt";
print (pageAnnotationTextFilePath);
StreamWriter sw = new StreamWriter(pageAnnotationTextFilePath, false); 
```

当我运行它时，我首先收到以下打印消息，表示名为 pageAnnotationTextFilePath 的字符串的值：

```
file://C:/Users/USER/Desktop/Accessible/Assets/IO/Books/A community of learners/king/pages/page1.txt 
```

这是正确的，也应该如此。但是，程序中的下一行给了我下面的错误。似乎正在发生的事情是我的路径正在被 StreamWriter 初始化类改变——导致项目的位置被附加到我提供的路径的第一部分。为什么要这样做，为什么要这样做？我在堆栈跟踪中提到的路径就在顶部，这里：

```
DirectoryNotFoundException: Could not find a part of the path "C:\Users\USER\Desktop\Accessible\file:\C:\Users\USER\Desktop\Accessible\Assets\IO\Books\A community of learners\king\pages\page1.txt".
System.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean anonymous, FileOptions options)
System.IO.FileStream..ctor (System.String path, FileMode mode, FileAccess access, FileShare share)
(wrapper remoting-invoke-with-check) System.IO.FileStream:.ctor (string,System.IO.FileMode,System.IO.FileAccess,System.IO.FileShare)
System.IO.StreamWriter..ctor (System.String path, Boolean append, System.Text.Encoding encoding, Int32 bufferSize)
System.IO.StreamWriter..ctor (System.String path, Boolean append)
(wrapper remoting-invoke-with-check) System.IO.StreamWriter:.ctor (string,bool)
AnnotationIO+<SaveAllObjectDataToTextFile>c__Iterator0.MoveNext () (at Assets/AnnotationIO.cs:27)
UnityEngine.MonoBehaviour:StartCoroutine(IEnumerator)
<SaveDataToBooksFolder>c__Iterator6:MoveNext() (at Assets/Scripts/GUI/WizardAnnotationGUI.cs:81)
UnityEngine.MonoBehaviour:StartCoroutine(IEnumerator)
<AutoSave>c__Iterator5:MoveNext() (at Assets/Scripts/GUI/WizardAnnotationGUI.cs:71) 
```

感谢您的专业知识！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T05:54:12.073

这是一个提示

'找不到路径的一部分“C:\Users\USER\Desktop\Accessible\file:\C:\Users\USER\Desktop\Accessible\Assets\IO\Books\A community of learners\king\pages\ page1.txt"'

并注意您的打印输出是

'file://C:/Users/USER/Desktop/Accessible/Assets/IO/Books/A community of learners/king/pages/page1.txt'

因此，您正在将此字符串提供给 StreamWriter。StreamWriter 正在获取此字符串并将其用作相对路径。您的工作目录必须是：

'C:\Users\USER\Desktop\Accessible\'

两者正在相互附加。长话短说，你必须去掉“file://”

# java - 文本视图中的文本对齐

> ID：14700982
> 
> 赞同：1
> 
> 时间：2013-02-05T05:49:41.863
> 
> 标签：java, android, html, textview

我已经阅读了不同的问题，现在确定 android 中的 textview 不支持完整的理由。由于性能下降，我不想使用 webview。它会使应用程序太重，不适合我的喜好。最近我遇到了一种文本对齐算法：

[https://www.rose-hulman.edu/class/csse/csse221/200910/Projects/Markov/justification.html](https://www.rose-hulman.edu/class/csse/csse221/200910/Projects/Markov/justification.html)

我想知道是否有人实施了这个程序？如果是这样，它是否提供了比 webview 更好的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:52:52.183

对于 TextView Justification，有一个库。您可以使用它。

希望它可以帮助你。[Java中的文本对齐库](https://stackoverflow.com/questions/8225353/text-justification-library-in-java/9755219#9755219)

# php - 如何在组中计算一行但一次是一次 php mysql

> ID：14700984
> 
> 赞同：2
> 
> 时间：2013-02-05T05:49:51.380
> 
> 标签：php, mysql, count

我正在尝试计算购买品牌 1 品牌 2 或品牌 3 的商店数量。但 pne 商店计数一次。但在我的查询中，它计算每个品牌的总行数。谁能更正我的查询？

```
 --- product ---

                       id  pcode   pname   brand
                       1   123     Dalda   1
                       2   124     Habib   1
                       3   125     Sufi    2
                       4   126     Toyota  3

                       ---------SALE-----------                 
                    id  shcode  shname  pcode   pname   amount
                    1      1    A G/S    123    DALDA   1020
                    2      1    A G/S    124    HABIB   1030
                    3      2    B G/S    125    SUFI    1040
                    4      2    B G/S    123    DALDA   1020
                    5      2    B G/S    126    TOYOTA  1050
                    6      3    C G/S    123    DALDA   1020
                    7      4    D G/S    125    SUFI    1040
                    8      4    D G/S    123    DALDA   1020
                    9      4    D G/S    124    HABIB   1030
                   10      4    D G/S    126    TOYOTA  1050
                   11      5    E G/S    123    DALDA   1020
                   12      6    F G/S    125    SUFI    1040
                   13      7    G G/S    126    TOYOTA  1050

                               MY REQUIRED RESULT   
                                BRAND   Shops
                                   1    5
                                   2    3
                                   3    3 
```

我的查询

```
select p.brand, count(s.shcode) AS shops
            FROM product p 
            INNER JOIN sdetail s on s.pcode = p.pcode
            GROUP BY p.brand 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:59:30.943

```
SELECT tmp.brand, count(tmp.shcode) AS shops FROM (
                                           SELECT DISTINCT temp.brand, (SELECT DISTINCT temp.shcode) AS shcode FROM (SELECT p.brand, s.shcode
                                                                FROM product p 
                                                                INNER JOIN sdetail s on s.pcode = p.pcode) AS temp
                                          ) AS tmp GROUP BY tmp.brand 
```

逻辑：加入两张表，得到不同的店铺品牌对，按品牌分组，得到店铺数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:27:18.820

我认为您需要的是在您的计数函数中与 shcode 不同。所以试试这个：

```
select p.brand, count(distinct(s.shcode)) AS shops
        FROM product p 
        INNER JOIN sdetail s on s.pcode = p.pcode
        GROUP BY p.brand 
```

这是一个玩这个的[小提琴..](http://www.sqlfiddle.com/#!2/92aa3/7)

# java - java中标记的Hashmap语法错误

> ID：14700989
> 
> 赞同：3
> 
> 时间：2013-02-05T05:50:06.197
> 
> 标签：java, hashmap

我正在使用 openscript IDE，我收到一个错误“令牌语法错误，删除这些令牌”我的代码是

```
import java.util.Map;
public class HTMLObjectMap {

   HashMap<String, String> params = new HashMap<String, String>();
   params.put("test","test");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T05:52:03.137

该声明

```
params.put("test","test"); 
```

必须在您尚未定义的方法内。IE

```
public class HTMLObjectMap {

    HashMap<String, String> params = new HashMap<String, String>();
    public void method()
    {
        params.put("test","test");
    }
} 
```

或者，您可能需要一个初始化程序，如

```
public class HTMLObjectMap {

    HashMap<String, String> params = new HashMap<String, String>();

    {
        params.put("test","test");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:55:25.793

您需要将初始化代码放入大括号中：

```
public class HTMLObjectMap {
    HashMap<String, String> params = new HashMap<String, String>();
    {
        params.put("test","test");
    }
} 
```

或者如果你需要它是静态的：

```
public class HTMLObjectMap {
    static HashMap<String, String> params = new HashMap<String, String>();

    static
    {
        params.put("test","test");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T05:59:57.160

我认为您应该将您的地图设为私有，它不会破坏封装以及用于在外部访问和插入其值的 getter 和 setter 方法。

```
public class HTMLObjectMap {

   private HashMap<String, String> params = new HashMap<String, String>();
   {
       // initialize if required  
   }
   public void get(String key){
         params.get(key);
   }
   public String put(String key,String value){
         params.put(key,value);
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T06:03:28.870

您必须初始化该类。java类只有变量和方法。在类中，您可以声明变量或定义方法，无论您想要做什么都意味着您必须定义方法。

```
public class HTMLObjectMap {
    HashMap<String, String> params = new HashMap<String, String>();
    // this is objects method.
    {
        params.put("test","test");
    }
    // this is your own method
    private void method1(){
        params.put("test1","test1");
    }
} 
```

# php - 为什么 PHP 包含显示的文件内容

> ID：14700990
> 
> 赞同：-3
> 
> 时间：2013-02-05T05:50:12.717
> 
> 标签：php, class, include

我有两个 php 文件 feed.php 和 main.php。

在 main.php 中，我使用的是 feed.php。

## 饲料.php

```
class RSSFeed {

    var $channel_url;
    var $channel_title;
    var $channel_description;
    var $channel_lang;
}; 
```

## 主文件

```
<html>
<body>

<?php include 'feed.php'; ?>
<h1>Welcome to my home page!</h1>
<p>Some text.</p>

</body>
</html> 
```

当我运行 main.php 时，我得到以下输出

```
class RSSFeed {

    var $channel_url;
    var $channel_title;
    var $channel_description;
    var $channel_lang;

} 
```

欢迎来到我的主页！

> 一些文字。

当我在浏览器中显示 main.php 时，我无法理解为什么会看到 RSSFeed 类的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T05:53:30.927

因为你忘了把`<?php`和`?>`放在 feed.php 上。该文件被视为纯文本并显示在 HTML 中。

```
<?php
class RSSFeed {

    var $channel_url;
    var $channel_title;
    var $channel_description;
    var $channel_lang;
};
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:52:34.757

我想你忘了放

```
<?php 
```

在 feed.php 的第一行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T05:53:28.010

可能是您忘记了`<?php`开头和`?>`结尾`feed.php`

```
<?php
class RSSFeed {

    var $channel_url;
    var $channel_title;
    var $channel_description;
    var $channel_lang;
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T05:53:35.587

如果您粘贴了 feed.php 中的确切文本，那么您将缺少需要绕过它的`<?php`and标记。`?>`否则，PHP 不知道它需要处理它，并认为它只是一个纯文本文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T05:54:05.057

假设你有它应该可以正常工作

```
<html>
<body>

<?php include 'main.php'; ?>
<h1>Welcome to my home page!</h1>
<p>Some text.</p>

</body>
</html> 
```

和

```
<?php
class RSSFeed {

    var $channel_url;
    var $channel_title;
    var $channel_description;
    var $channel_lang;

}
?> 
```

在正确的文件中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T06:13:33.783

更有可能的是，您忘记将类页面“feed.php”包装在标签中。

另外，由于您正在阅读的是一堂课，我建议您这样做：

```
<?php require_once('feed.php'); ?> 
```

这将防止您多次加载同一个文件。

相信我，它会让你以后头疼。

# c# - 尝试通过文本框插入脚本

> ID：14700993
> 
> 赞同：0
> 
> 时间：2013-02-05T05:50:23.357
> 
> 标签：c#, asp.net, webforms, xss

我创建了一个 ASP.NET (fw 3.5) 站点并想检查它是否易受攻击。

我接受来自文本框的输入并将其保存在数据库中，然后稍后将其动态显示在另一个页面上。

如果我尝试输入`<script>...</script>`或任何与`<`此`>`相关的内容，我的 global.asax 会捕获异常并收到消息`A potentially dangerous Request.Form value was detected from the client (TextBox1="<b> asd</b> ").`

然后我尝试了这个：`&ltscript&gt$(window).load(function(){alert('hello');});&lt/script&gt`它以相同的方式插入到数据库中，但在页面上呈现为`<script>$(window).load(function(){alert('hello');});</script>`.

但是，我没有收到警告框。脚本按原样打印在页面上。呈现的 HTML 是：

`<td style="font-size: 16px;" colspan="2"><script>$(window).load(function(){alert('hello');});</script></td>`

我的问题是，为什么这个脚本没有执行？我的意思是，这是一件很棒的事情，因为我正在阅读有关跨端脚本攻击并希望使我的网站安全的信息，这就是它现在的行为方式，但我不明白为什么它不是我真正没有的t 编写任何代码来阻止此类攻击。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:08:53.877

默认情况下，ASP.NET Webforms 启用了[请求验证](http://msdn.microsoft.com/en-us/library/hh882339.aspx)，这就是您收到异常的原因。当您输入它以避免请求验证时，它会被解释为[html 实体](http://en.wikipedia.org/wiki/Html_entities)，而不会被解释为 javascript。

换句话说，html 实体是一种转义 html 标签的方式，以便您可以呈现 html 保留字符，而不会将它们解释为 html。（类似于换行符的“\n”等）

默认情况下，许多 WebForms 控件会自动对其文本值进行 Html 编码，这也可以防止 xss，但如果禁用请求验证，则必须确保数据库中的数据在输出到浏览器之前是 html 编码的（这是一个好习惯反正）。

# windows - 用 o 将光标放在下一行 用 "+p 从剪贴板中放入一些东西后

> ID：14700997
> 
> 赞同：0
> 
> 时间：2013-02-05T05:50:31.800
> 
> 标签：windows, vim

将不以换行符结尾的文本从某处复制到 windows 上的剪贴板，`ctrl c`并将其粘贴到正在编辑的文本文件中`vim`（在控制台模式下`cmd.exe`） by `"+p`。例如，右键单击“复制链接地址”的 URL。

然后，对于下一个剪贴板内容（同时复制），要将其粘贴到下一行，您需要将光标移到那里`o <Enter> <Esc>`。

这样做的更聪明的方法是什么？

获取以换行符结尾的文本，例如，由 . 复制的行`yy`。如果用`p`or将光标粘贴回去，为什么光标会无动于衷地停留在该行的第一个字符上`P`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:11:41.120

你到底在做什么？

之后`"+p`，您处于正常模式，`<Esc>`此处`o`无用，在当前行下方打开一个新行以插入，`<Enter>`插入回车，因此您现在在下面两行，然后`<Esc>`再次点击以返回正常模式，准备粘贴更多内容。

我是这样看的，`bar`从其他程序复制并`[]`在正常模式和`|`插入模式下标记光标：

```
[] 
```

`"+p`

```
ba[r] 
```

`<Esc>o`

```
bar
| 
```

`<Enter>`

```
bar

| 
```

`<Esc>`

```
bar

[] 
```

那是你做的吗？

如果您的问题是`o<Enter>`需要将光标放在下面两个空行，那么您有很多方法可以优化。我推荐一个简单的映射：

```
nnoremap <F3> 2o<Esc>"+p 
```

这会在下面放置两个空行并将`"+`寄存器的内容粘贴到那里。

或者更聪明的一个`{count}`（`2<F3>`，`9<F3>`）：

```
nnoremp <F3> :<C-u>execute 'normal! ' . v:count . 'o'<CR>"+p 
```

当然，您可以选择任何键或组合键来代替`<F3>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:00:42.153

尝试这个：

```
:map <F9> "+p<ESC>o<CR><ESC> 
```

使用您喜欢的任何东西代替`F9`键绑定。

然后只需在剪贴板中选择文本并点击`F9`（或您选择的任何键绑定）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T07:31:25.217

我的[UnconditionalPaste 插件](http://www.vim.org/scripts/script.php?script_id=3355)提供了专门的粘贴命令，例如`glp`，它将寄存器粘贴到新行中，即使寄存器内容只是没有尾随换行符的文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T06:06:49.567

您可以使用 {register} 将寄存器的内容直接“放入”插入模式

所以击键是：

```
a<C-r>+<CR><CR><Esc>
a<C-r>+ 
```

所以你用'a'进入插入模式，把用于剪贴板的寄存器'+'然后插入两个换行符，返回正常模式然后你复制第二个链接并重复操作

# plsql - 如何从 pl/sql 游标打印值？

> ID：14700998
> 
> 赞同：1
> 
> 时间：2013-02-05T05:50:50.987
> 
> 标签：plsql, oracle11g

我已经尝试使用以下代码根据从光标获得的值打印每个或某些细节，但我不能，有人可以帮助我吗？

```
set serveroutput on

declare
d_id number;
temp_tab VARRAY;
cursor c1 is select * from(select d.department_ID,            `enter code here`d.department_name,count(d.department_name) cnt from employees e,departments d where e.department_id=d.department_id group by d.department_ID, d.department_name) where cnt>=5;

begin
open c1;

for i in c1
loop
    select e.first_name,d.department_id,d.department_name into temp_tab from employees e,departments d where d.department_id=i.department_ID;
end loop;

close c1;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:17:44.227

是的。如果要打印蚂蚁元素值。然后将元素值选择到变量中。

然后使用下面的一个打印元素值：

```
dbms_output.put_line('Variable value= ' ||  Variable_name ); 
```

在您的代码中，您正在使用集合变量并将值提取到集合中。然后打印对象元素：

```
dbms_output.put_line('First Name :'||object_name.first_name); 
```

如果您在 PLSQL 中使用记录变量。然后使用以下方法：然后声明记录类型变量，然后获取该变量，然后显示 variable.column，

```
DECLARE
  TYPE t_name IS RECORD(
     first_name employees.first_name%TYPE,
     last_name  employees.last_name%TYPE
  );
  r_name   t_name; -- name record
  n_emp_id employees.employee_id%TYPE := 200;
BEGIN
  SELECT first_name,
         last_name
  INTO r_name
  FROM employees
  WHERE employee_id = n_emp_id;
  -- print out the employee's name
  DBMS_OUTPUT.PUT_LINE(r_name.first_name || ',' || r_name.last_name );
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:00:37.720

使用您的字段 (e.first_name,d.department_id,d.department_name) 创建一个 Oracle 对象，这是链接：[http ://docs.oracle.com/cd/B19306_01/appdev.102/b14260/adobjint.htm](http://docs.oracle.com/cd/B19306_01/appdev.102/b14260/adobjint.htm)

然后将您的查询选择**到此**对象中。可以说对象名称是 my_object。然后打印对象元素。

```
dbms_output.put_line('First Name :'||my_object.first_name||' Department: '||my_object.department_id||' Department Name: ' || my_object.department_name); 
```

如果我理解您的问题，这应该满足您的要求。

# facebook - 使用 Facebook SDK 通过 FBSession 获取缓存的访问令牌

> ID：14700999
> 
> 赞同：0
> 
> 时间：2013-02-05T05:51:10.940
> 
> 标签：facebook, ios4

如果用户登录本机 Facebook，是否有办法使用 Facebook SDK 通过 FBSession 获取缓存的访问令牌。

我正在尝试在应用程序中通过 Facebook 实现自动登录，即当用户登录本机 Facebook 时，应用程序不应要求登录，用户应自动登录。

我使用了 FBSession 和 FBTokenCacheStrategy 并且用户正在自动登录，但我无法获取我需要调用某些 API 的访问令牌。我用来完成此操作的以下代码：

```
CacheToken = [[FBTokenCache alloc]init];
NSArray *permissions = [[NSArray alloc]initWithObjects:@"email,user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins", nil];

self.fbsession = [[FBSession alloc] initWithAppID:@"484473011575776"
                                              permissions:permissions
                                          urlSchemeSuffix:nil
                                       tokenCacheStrategy:CacheToken];

(fbsession is the object of Facebook SDK class FBSession)
[FBSession setActiveSession:self.fbsession];

[FBSession openActiveSessionWithReadPermissions:permissions
                                                   allowLoginUI:YES
                                              completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                                  [self sessionStateChanged:session state:state error:error]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:20:12.907

要获取访问令牌，您应该使用以下命令： `[FBSession activeSession] accessToken]`

但是，您似乎想检查是否已经存在（缓存的）访问令牌。为此，您可以这样做：

```
// See if we have a valid token for the current state.
if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded) {
    NSLog(@"The value access token is: %@", [[FBSession activeSession] accessToken]);
} else { 
    // No, display the login page.
} 
```

确保在您的应用委托中也这样做，否则访问令牌将为零：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    return [FBSession.activeSession handleOpenURL:url];
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
// We need to properly handle activation of the application with regards to Facebook Login
    // (e.g., returning from iOS 6.0 Login Dialog or from fast app switching).
    [FBSession.activeSession handleDidBecomeActive];
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-03T09:04:06.303

试试下面的代码..

```
if (FBSession.activeSession.isOpen)
{
      NSString *token =  [[[FBSession activeSession] accessTokenData] accessToken];
} 
```

希望这对你有用..