# StackOverflow 问答 14773000-14773999

# php - PHP 用额外的回显回显 HTML 代码

> ID：14773000
> 
> 赞同：-1
> 
> 时间：2013-02-08T12:51:13.883
> 
> 标签：php, html, echo

我试图在隐藏字段中回显 $url 但我无法让它工作。我已经在回声中，并且尝试过转义，但这只会给我一个解析错误。

抱歉，如果这有点含糊，请有人帮我在那个值中回显 $url ？？？

```
echo'<form name="login" method="post" action="checklogin.php">        
        <input type="hidden" name="current_url" value="echo $url;" readonly/>        
    </form>'; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:52:24.097

1）不要使用PHP回显太多，你实际上是在折磨它

2）您正在使用`'`，因此您在其间写的任何内容都将被视为文字字符串

3）如果是这样，您需要使用句点连接字符串`.`

`"`4)在字符串中使用变量时使用双引号

```
?>
    <form name="login" method="post" action="checklogin.php">
        <input type="hidden" name="current_url" value="<?php echo $url; ?>" readonly/>    
    </form>
<?php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:52:08.183

```
echo'

    <form name="login" method="post" action="checklogin.php">

        <input type="hidden" name="current_url" value="'.$url.'" readonly/>

    </form>

'; 
```

这是正确的用法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T12:53:43.400

像这样试试

```
<input type="hidden" name="current_url" value="'.$url.'" readonly/> 
```

或者简单地这样做

```
<form name="login" method="post" action="checklogin.php">        
    <input type="hidden" name="current_url" value="<?php echo $url;?>" readonly/>        
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:52:42.743

不要`echo`在里面`echo`

```
echo'

    <form name="login" method="post" action="checklogin.php">

        <input type="hidden" name="current_url" value="', $url, '" readonly/>

    </form>

'; 
```

刚刚离题：[为什么用逗号而不是`.`for concatenation](http://www.electrictoolbox.com/php-echo-commas-vs-concatenation/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T12:53:04.730

你不能回声。您已经在回显字符串，因此您需要做的就是将变量添加到其中：

改变

```
 value="echo $url;" 
```

至

```
 value="' . $url . '" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T12:53:22.000

您可以简单地使用双引号并让变量在字符串中展开，就像这样：

```
$url = 'http://www.example.com';
echo "Hello World! This is my url $url"; 
```

# dart - 未来完成者.future

> ID：14773001
> 
> 赞同：0
> 
> 时间：2013-02-08T12:51:18.393
> 
> 标签：dart, indexeddb

有人可以向我解释以下代码有什么问题。该行`.then((result) {window.alert("Record = ${oDbRec}");})`显示以下内容：

> 记录 = '_ThenFuture@0x2900bd4a' 的实例

我想要的是`getObject()`. 编码：

```
fHtmDisplayOneClient(String sKey) {
  var oDbRec;
  oDbRec = fDbSelectOneClient(sKey)
   .then((result) {window.alert("Record = ${oDbRec}");})
    ..catchError((oError) {window.alert("Error from fDbSelectOneClient. ${oError}");
    });
}
Future fDbSelectOneClient(String sKey) {
  var completer = new Completer();
  idb.Transaction oDbTxn      =   ogDb1.transaction(sgTblClient, 'readwrite');
  idb.ObjectStore oDbTable    =   oDbTxn.objectStore(sgTblClient); 
  idb.Request     oDbReqGet   =   oDbTable.getObject(sKey);
  oDbReqGet.onSuccess.first.then((val)  => completer.complete(oDbReqGet.result));
  oDbReqGet.onError.first.then((err)    => completer.completeError(err));
  return completer.future; // return the future
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:40:51.597

我认为您想要未来返回的结果，即传递给 .then() 的“结果”对象

```
.then((result) => print('$result')); 
```

# android - 如何正确实现 SlidingMenu.OnOpenedListener？

> ID：14773003
> 
> 赞同：4
> 
> 时间：2013-02-08T12:51:26.410
> 
> 标签：android, actionbarsherlock, back-button, slidingmenu

我想在滑动菜单打开时隐藏后退按钮，否则显示它

我应该如何实现 SlidingMenu `OnOpenedListener`？

我[将此](https://github.com/jfeinstein10/SlidingMenu)SlidingMenu 与[ActionBarSharlock](https://github.com/JakeWharton/ActionBarSherlock)一起使用。

![在此处输入图像描述](../Images/94908c41c127b0981ad8c7e4b5351416.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:08:43.497

这是解决方案，对于那些感兴趣的人。

设置`OnOpenedListener`和`OnClosedListener`你的`SlidingMenu`对象

```
SlidingMenu menu = new SlidingMenu(this); 
```

*   显示返回按钮（滑动菜单关闭）

    ```
    menu.setOnOpenedListener(new OnOpenedListener() {

                @Override
                public void onOpened() {

                    getSupportActionBar().setDisplayHomeAsUpEnabled(false);
                }

            }); 
    ```

*   隐藏后退按钮（打开滑动菜单）

    ```
    menu.setOnClosedListener(new OnOpenedListener() {

                @Override
                public void onClosed() {

                    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
                }

            }); 
    ```

# javascript - GIF 图像在“document.location.href”时停止

> ID：14773005
> 
> 赞同：2
> 
> 时间：2013-02-08T12:51:48.540
> 
> 标签：javascript, gif

我在 javascript 中有这个功能：

```
function loadPage (url){
  showLoadPageGif();         // visibility On
  document.location.href = getPath + "/" + url ;  
} 
```

当我使用此功能时，GIF 图像显示在屏幕上，但无法正常工作。以前有人打过，有这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-12T23:39:28.273

我最近使用动画 SVG 作为伪元素中的背景图像遇到了这个问题。我故意在我的网络服务器上设置了很大的延迟，以便在`window.location = url;`所有其他 CSS 动画和悬停仍然有效，但 SVG cog 卡住之后，我可以留在当前页面。

`window.location`在玩了一些之后，我发现如果我提交了一个 GET 表单，而不是更改，动画会继续运行。

```
var url;
//load & setup loading animation
//then generate and submit form with a slight delay
setTimeout(function(){
  var new_form;
  new_form = document.createElement('form');
  new_form.method = 'GET';
  new_form.action = url;
  document.body.appendChild(new_form);
  new_form.submit();
}, 100) 
```

在 safari 5.1、firefox 24、chrome 32 上测试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T12:56:57.530

我假设您的意思是“GIF*动画*停止”。

这是正确的行为。由于您转到新页面，因此旧页面的所有资源都被释放。这当然包括 GIF 本身。

您不会“看到”这种情况发生，因为当您分配`location.href`.

您需要做的是使用 AJAX 请求新页面，然后在成功处理程序中用新页面替换整个 DOM。

IE6 中有一个错误，它会在您启动 AJAX 请求时停止动画；要解决这个问题，只需`src`再次分配图像的属性（即`img.src = img.src;`）重新启动它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T19:11:14.817

您使用的是哪个浏览器？如果您使用的是 IE，我需要这样做一次：

```
var loadingFigure = $('#myImage');
var html = loadingFigure.html();            
window.location.href = 'myImage';
loadingFigure.html(html); 
```

对于 Firefox 更复杂，您需要使用 iframe 并执行以下操作：

```
<iframe id="myIframe" src="/images/busy.gif" scrolling="no" frameborder="0"></iframe>

$('#myIframe').attr('src', '/images/busy.gif');
window.location.href = 'mylocation'       
$('#myIframe').attr('src', '/images/busy.gif'); 
```

# java - ActiveMQ 故障转移：如何检测应用程序何时启动但找不到代理

> ID：14773006
> 
> 赞同：3
> 
> 时间：2013-02-08T12:51:51.543
> 
> 标签：java, jms, activemq

我正在使用 ActiveMQ 故障转移，例如

```
failover:(tcp://host1:61616,tcp://host2:61616) 
```

我想在 host1 和 host2 都不可用时发出警报。

如果应用程序已经连接到代理，您可以通过 TransportListener 检测它何时进行故障转移。在初始连接期间也是不可能的。它只会挂起，反复重试每个代理。这是期望的行为，因为我希望它继续尝试连接，但是我也希望收到它有问题的通知，以便我可以发出警报，并且有人可以调查它。

一种解决方案是使用

```
failover:(tcp://host1:61616,tcp://host2:61616)?startupMaxReconnectAttempts=1 
```

这意味着它将尝试每个主机然后抛出一个异常，我的应用程序可以通过警告然后再次尝试连接来处理它。这并不理想，因为我的应用程序必须有效地复制 ActiveMQ 重新连接逻辑。

有没有更好的方法来检测初始连接时的代理问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T03:45:43.040

简短的回答：不，没有办法从客户端（应用程序）启动的角度知道。

长答案：作为一个应用程序，您只会知道什么时候：您根本没有可用的代理（通过 startupMaxReconnectAttempts），或者您何时从一个代理切换到另一个代理。这是预期和期望的行为，因为故障转移机制的重点是对消费者隐藏所有这些。

可能有一些方法（例如使用[动态代理网络](http://activemq.apache.org/failover-transport-reference.html)），但这需要比您提出的解决方案更多的逻辑。

我认为您正在尝试使用错误的工具解决问题：使用故障转移机制（具有最大重新连接和适当的超时）只会确保您在出现真正错误时得到通知（根本没有可用的代理）。其他代理的“健康”或“连接”需要一个单独的机制（在系统级别 - 使用监控工具 - 或在应用程序级别 - 开发一个小机制来对 uri 列表中的所有代理进行保持活动）

# mysql - 需要使用mysql在表中查找父子关系

> ID：14773008
> 
> 赞同：-1
> 
> 时间：2013-02-08T12:51:53.907
> 
> 标签：mysql

假设我们有包含以下信息的表格

```
id  name  level   Parent_id
1   A     1       ---
2   B     1       ----
3   C     2       1
4   D     2       2
5   E     3       3
6   F     3       4
7   G     4       5
8   H     4       5 
```

我想要这种格式的结果。

```
id  L1Name   L2 Name  L3 Name  L4Name
1   A        -        -        -
2   B        -        -        -    
3   A        C        -        -
4   B        D        -        -    
5   A        C        E        -
6   B        D        F        -
7   A        C        E        G
8   A        C        E        H 
```

我想要这个结果在 mysql 中。我们可以通过先验使用 Connect 在 oracle 中找到它。在mysql中怎么样。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:10:04.810

你可能会找这个

```
 select id , L1Name,   L2Name , L3Name , L4Name
     from (
         select id ,
         if(level =1 , name , '--') L1Name ,
         if(level =2 , name , '--') L2Name ,
         if(level =3 , name , '--') L3Name ,
         if(level =4 , name , '--') L4Name 
         from Table1
         )t 
```

[**在这里演示**](http://sqlfiddle.com/#!2/77d2d/9)

**编辑 ：**

试试这个

```
 SELECT id, L1Name,   L2Name , L3Name , L4Name
 FROM (
     SELECT id,
     IF(id in(1,3,5,7), 'A' , 'B') L1Name ,
     IF(id in(3,5,7) , 'C' , if(id in(1,2), '-', 'D')) L2Name ,
     IF(id in(5,7),'E',if(id in(1,2,3,4), '-', 'F')) L3Name ,
     IF(id =7 , 'G' , if(id in(1,2,3,4,5,6), '-', 'H')) L4Name 
     FROM Table1
 )t 
```

[**SQL 演示在这里**](http://sqlfiddle.com/#!2/77d2d/80)

# c++ - 如何在可视化程序中包含 gotoxy() 函数？

> ID：14773009
> 
> 赞同：-2
> 
> 时间：2013-02-08T12:52:04.227
> 
> 标签：c++, visual-studio-2012

我无法在 Visual Studio 2012 中使用`gotoxy()`, `window()`, `sleep()`, `delay()`,函数。`delline()`

我可以使用这些功能的替代品吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:05:42.220

使用 Visual 2008 express，您可以在 windows.h 中找到 Sleep。（用大写的 S 睡觉！）

2012年可能也是如此。

我不知道其他功能。

# extjs - 通过命令名称确定发出的 rowCommand

> ID：14773011
> 
> 赞同：1
> 
> 时间：2013-02-08T12:52:08.660
> 
> 标签：extjs, grid, command, ext.net

我在网格面板上运行了两个行命令，如下所示：

```
<ext:CommandColumn>
   <Commands>
      <ext:GridCommand Icon="NoteEdit" CommandName="mailEdit">
          <ToolTip Text="Edit" />
      </ext:GridCommand>
      <ext:GridCommand Icon="ApplicationLightning" CommandName="mailChangeBlock">
           <ToolTip Text="block/unblock" />
      </ext:GridCommand>                               
   </Commands>                               
</ext:CommandColumn> 
```

现在我听这些行命令：

```
<Listeners>
    <Command Handler="if(command == 'mailEdit'){mailEdit}else{mailChangeBlock}; console.log(command);"/>
</Listeners> 
```

另一个尝试如下：

```
<Command Handler="(command == 'mailEdit') ? mailEdit : mailChangeBlock;" /> 
```

控制台日志执行没有问题，但是调用函数中的console.log没有执行，即使在每次调用中添加括号后立即调用该函数，但是传递给该函数的数据会丢失。

我现在的问题是，我如何确定执行了哪个命令并调用相应的函数并为其提供值、元数据和记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:24:11.097

可以通过 Extra Params 发送命令名称和其他值：

```
<DirectEvents>
   <Command OnEvent="GridCommand">
      <ExtraParameters>
         <ext:Parameter Name="commandname" Value="command" Mode="Raw" />
         <ext:Parameter Name="recordid" Value="record.data.id" Mode="Raw" />
      </ExtraParameters>
   </Command>
</DirectEvents> 
```

然后可以在服务器端执行命令的确定（`command`返回中`CommandName`定义的`CommandColumn`），然后执行服务器端脚本。

# c# - 按照约定为某个服务的每个组件注册一个具有多个名称的服务

> ID：14773022
> 
> 赞同：1
> 
> 时间：2013-02-08T12:52:46.980
> 
> 标签：c#, castle-windsor, ioc-container, castle

我使用 Castle-Windsor 3.1 和 C# 4.0。

我按照惯例注册了一些组件（视图），像这样

```
 Classes.FromThisAssembly()
                .BasedOn(typeof(ITabPageView<>))
                .WithServiceFromInterface(typeof(ITabPageView<>))
                .LifestyleTransient()
                .Configure(c => c.Properties(PropertyFilter.IgnoreAll)) 
```

这按预期工作。我现在想要的是，为**每个** `ITabPageView`组件注册一个服务类型的另一个组件。在具体示例（PRISM）中，我想`IRegionManager`为每个已注册的 TabPage 注册一个带有该标签页名称的标签页。区域管理器必须由一位已注册的中央区域管理器创建。目前我这样做：

```
 Classes.FromThisAssembly()
                .BasedOn(typeof(ITabPageView<>))
                .WithServices(typeof(IRegionManager))
                .Configure(c =>
                    {
                        c.UsingFactoryMethod(kernel => kernel.Resolve<IRegionManager>().CreateRegionManager())
                            .Named(c.Implementation.Name);
                    }) 
```

虽然这实际上似乎有效，但我想知道是否有更优雅或更强大的方式。

谢谢。

# android - iOS和Android通用随机数生成器

> ID：14773029
> 
> 赞同：6
> 
> 时间：2013-02-08T12:53:00.243
> 
> 标签：android, c++, ios, c, random

如果我们在两者中提供相同的种子，我需要一个随机数生成器，它可以在 iOS 和 Android 中生成相同的数字序列。

我用 srand(1000) 尝试了 rand() 函数。但它给出了不同的输出。然后我尝试了梅森捻线机。但这也给出了相同种子的不同序列。

任何人都可以帮我解决这个问题。

我正在使用 cocos2d-x 进行开发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T12:56:49.327

您可以像这样编写自己的随机数生成器。质量低，但适合大多数用途。

```
// RAND_MAX assumed to be 32767.
static unsigned long int next = 1;
void srand(unsigned int seed) { next = seed; }
int rand(void) {
    next = next * 1103515245 + 12345;
    return (unsigned int)(next/65536) % 32768;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:00:35.183

我已经改编了一个在线 CRandomMersenne 库，我真的很抱歉我再也找不到那个库的来源了。但这是我的 Mersenne Twister 实现：

```
// Define 32 bit signed and unsigned integers.
// Change these definitions, if necessary, to match a particular platform
#if defined(_WIN16) || defined(__MSDOS__) || defined(_MSDOS) 
   // 16 bit systems use long int for 32 bit integer
   typedef long int           int32;   // 32 bit signed integer
   typedef unsigned long int  uint32;  // 32 bit unsigned integer
#else
   // Most other systems use int for 32 bit integer
   typedef int                int32;   // 32 bit signed integer
   typedef unsigned int       uint32;  // 32 bit unsigned integer
#endif

// Define 64 bit signed and unsigned integers, if possible
#if (defined(__WINDOWS__) || defined(_WIN32)) && (defined(_MSC_VER) || defined(__INTEL_COMPILER))
   // Microsoft and other compilers under Windows use __int64
   typedef __int64            int64;   // 64 bit signed integer
   typedef unsigned __int64   uint64;  // 64 bit unsigned integer
   #define INT64_DEFINED               // Remember that int64 is defined
#elif defined(__unix__) && (defined(_M_IX86) || defined(_M_X64))
   // Gnu and other compilers under Linux etc. use long long
   typedef long long          int64;   // 64 bit signed integer
   typedef unsigned long long uint64;  // 64 bit unsigned integer
   #define INT64_DEFINED               // Remember that int64 is defined
#else
   // 64 bit integers not defined
   // You may include definitions for other platforms here
#endif

void EndOfProgram(void);               // System-specific exit code (userintf.cpp)

void FatalError(char * ErrorText);     // System-specific error reporting (userintf.cpp)

class CRandomMersenne {                // Encapsulate random number generator
#if 0
   // Define constants for type MT11213A:
#define MERS_N   351
#define MERS_M   175
#define MERS_R   19
#define MERS_U   11
#define MERS_S   7
#define MERS_T   15
#define MERS_L   17
#define MERS_A   0xE4BD75F5
#define MERS_B   0x655E5280
#define MERS_C   0xFFD58000
#else    
   // or constants for type MT19937:
#define MERS_N   624
#define MERS_M   397
#define MERS_R   31
#define MERS_U   11
#define MERS_S   7
#define MERS_T   15
#define MERS_L   18
#define MERS_A   0x9908B0DF
#define MERS_B   0x9D2C5680
#define MERS_C   0xEFC60000
#endif
public:
   CRandomMersenne(uint32 seed) {      // Constructor
      RandomInit(seed); LastInterval = 0;}
   void RandomInit(uint32 seed);       // Re-seed
   void RandomInitByArray(uint32 seeds[], int length); // Seed by more than 32 bits
   int IRandom (int min, int max);     // Output random integer
   int IRandomX(int min, int max);     // Output random integer, exact
   double Random();                    // Output random float
   uint32 BRandom();                   // Output random bits
private:
   void Init0(uint32 seed);            // Basic initialization procedure
   uint32 mt[MERS_N];                  // State vector
   int mti;                            // Index into mt
   uint32 LastInterval;                // Last interval length for IRandomX
   uint32 RLimit;                      // Rejection limit used by IRandomX
   enum TArch {LITTLE_ENDIAN1, BIG_ENDIAN1, NONIEEE}; // Definition of architecture
   TArch Architecture;                 // Conversion to float depends on architecture
};    

class CRandomMother {             // Encapsulate random number generator
public:
   void RandomInit(uint32 seed);       // Initialization
   int IRandom(int min, int max);      // Get integer random number in desired interval
   double Random();                    // Get floating point random number
   uint32 BRandom();                   // Output random bits
   CRandomMother(uint32 seed) {   // Constructor
      RandomInit(seed);}
protected:
   uint32 x[5];                        // History buffer
};

#endif

void CRandomMersenne::Init0(uint32 seed) {
   // Detect computer architecture
   union {double f; uint32 i[2];} convert;
   convert.f = 1.0;
   if (convert.i[1] == 0x3FF00000) Architecture = LITTLE_ENDIAN1;
   else if (convert.i[0] == 0x3FF00000) Architecture = BIG_ENDIAN1;
   else Architecture = NONIEEE;

   // Seed generator
   mt[0]= seed;
   for (mti=1; mti < MERS_N; mti++) {
      mt[mti] = (1812433253UL * (mt[mti-1] ^ (mt[mti-1] >> 30)) + mti);
   }
}

void CRandomMersenne::RandomInit(uint32 seed) {
   // Initialize and seed
   Init0(seed);

   // Randomize some more
   for (int i = 0; i < 37; i++) BRandom();
}

void CRandomMersenne::RandomInitByArray(uint32 seeds[], int length) {
   // Seed by more than 32 bits
   int i, j, k;

   // Initialize
   Init0(19650218);

   if (length <= 0) return;

   // Randomize mt[] using whole seeds[] array
   i = 1;  j = 0;
   k = (MERS_N > length ? MERS_N : length);
   for (; k; k--) {
      mt[i] = (mt[i] ^ ((mt[i-1] ^ (mt[i-1] >> 30)) * 1664525UL)) + seeds[j] + j;
      i++; j++;
      if (i >= MERS_N) {mt[0] = mt[MERS_N-1]; i=1;}
      if (j >= length) j=0;}
   for (k = MERS_N-1; k; k--) {
      mt[i] = (mt[i] ^ ((mt[i-1] ^ (mt[i-1] >> 30)) * 1566083941UL)) - i;
      if (++i >= MERS_N) {mt[0] = mt[MERS_N-1]; i=1;}}
   mt[0] = 0x80000000UL;  // MSB is 1; assuring non-zero initial array

   // Randomize some more
   mti = 0;
   for (int i = 0; i <= MERS_N; i++) BRandom();
}

uint32 CRandomMersenne::BRandom() {
   // Generate 32 random bits
   uint32 y;

   if (mti >= MERS_N) {
      // Generate MERS_N words at one time
      const uint32 LOWER_MASK = (1LU << MERS_R) - 1;       // Lower MERS_R bits
      const uint32 UPPER_MASK = 0xFFFFFFFF << MERS_R;      // Upper (32 - MERS_R) bits
      static const uint32 mag01[2] = {0, MERS_A};

      int kk;
      for (kk=0; kk < MERS_N-MERS_M; kk++) {    
         y = (mt[kk] & UPPER_MASK) | (mt[kk+1] & LOWER_MASK);
         mt[kk] = mt[kk+MERS_M] ^ (y >> 1) ^ mag01[y & 1];}

      for (; kk < MERS_N-1; kk++) {    
         y = (mt[kk] & UPPER_MASK) | (mt[kk+1] & LOWER_MASK);
         mt[kk] = mt[kk+(MERS_M-MERS_N)] ^ (y >> 1) ^ mag01[y & 1];}      

      y = (mt[MERS_N-1] & UPPER_MASK) | (mt[0] & LOWER_MASK);
      mt[MERS_N-1] = mt[MERS_M-1] ^ (y >> 1) ^ mag01[y & 1];
      mti = 0;
   }

   y = mt[mti++];

#if 1
   // Tempering (May be omitted):
   y ^=  y >> MERS_U;
   y ^= (y << MERS_S) & MERS_B;
   y ^= (y << MERS_T) & MERS_C;
   y ^=  y >> MERS_L;
#endif

   return y;
}

double CRandomMersenne::Random() {
   // Output random float number in the interval 0 <= x < 1
   union {double f; uint32 i[2];} convert;
   uint32 r = BRandom();               // Get 32 random bits
   // The fastest way to convert random bits to floating point is as follows:
   // Set the binary exponent of a floating point number to 1+bias and set
   // the mantissa to random bits. This will give a random number in the 
   // interval [1,2). Then subtract 1.0 to get a random number in the interval
   // [0,1). This procedure requires that we know how floating point numbers
   // are stored. The storing method is tested in function RandomInit and saved 
   // in the variable Architecture.

   // This shortcut allows the compiler to optimize away the following switch
   // statement for the most common architectures:
#if defined(_M_IX86) || defined(_M_X64) || defined(__LITTLE_ENDIAN__)
   Architecture = LITTLE_ENDIAN1;
#elif defined(__BIG_ENDIAN__)
   Architecture = BIG_ENDIAN1;
#endif

   switch (Architecture) {
   case LITTLE_ENDIAN1:
      convert.i[0] =  r << 20;
      convert.i[1] = (r >> 12) | 0x3FF00000;
      return convert.f - 1.0;
   case BIG_ENDIAN1:
      convert.i[1] =  r << 20;
      convert.i[0] = (r >> 12) | 0x3FF00000;
      return convert.f - 1.0;
   case NONIEEE: default: ;
   } 
   // This somewhat slower method works for all architectures, including 
   // non-IEEE floating point representation:
   return (double)r * (1./((double)(uint32)(-1L)+1.));
}

int CRandomMersenne::IRandom(int min, int max) {
   // Output random integer in the interval min <= x <= max
   // Relative error on frequencies < 2^-32
   if (max <= min) {
      if (max == min) return min; else return 0x80000000;
   }
   // Multiply interval with random and truncate
   int r = int((max - min + 1) * Random()) + min; 
   if (r > max) r = max;
   return r;
}

int CRandomMersenne::IRandomX(int min, int max) {
   // Output random integer in the interval min <= x <= max
   // Each output value has exactly the same probability.
   // This is obtained by rejecting certain bit values so that the number
   // of possible bit values is divisible by the interval length
   if (max <= min) {
      if (max == min) return min; else return 0x80000000;
   }
#ifdef  INT64_DEFINED
   // 64 bit integers available. Use multiply and shift method
   uint32 interval;                    // Length of interval
   uint64 longran;                     // Random bits * interval
   uint32 iran;                        // Longran / 2^32
   uint32 remainder;                   // Longran % 2^32

   interval = uint32(max - min + 1);
   if (interval != LastInterval) {
      // Interval length has changed. Must calculate rejection limit
      // Reject when remainder = 2^32 / interval * interval
      // RLimit will be 0 if interval is a power of 2\. No rejection then
      RLimit = uint32(((uint64)1 << 32) / interval) * interval - 1;
      LastInterval = interval;
   }
   do { // Rejection loop
      longran  = (uint64)BRandom() * interval;
      iran = (uint32)(longran >> 32);
      remainder = (uint32)longran;
   } while (remainder > RLimit);
   // Convert back to signed and return result
   return (int32)iran + min;

#else
   // 64 bit integers not available. Use modulo method
   uint32 interval;                    // Length of interval
   uint32 bran;                        // Random bits
   uint32 iran;                        // bran / interval
   uint32 remainder;                   // bran % interval

   interval = uint32(max - min + 1);
   if (interval != LastInterval) {
      // Interval length has changed. Must calculate rejection limit
      // Reject when iran = 2^32 / interval
      // We can't make 2^32 so we use 2^32-1 and correct afterwards
      RLimit = (uint32)0xFFFFFFFF / interval;
      if ((uint32)0xFFFFFFFF % interval == interval - 1) RLimit++;
   }
   do { // Rejection loop
      bran = BRandom();
      iran = bran / interval;
      remainder = bran % interval;
   } while (iran >= RLimit);
   // Convert back to signed and return result
   return (int32)remainder + min;

#endif
} 
```

上述类的用法非常简单：

```
CRandomMersenne generator(<some_seed>);
generator.random(); // random value [0,1]
generator.IRandom(a,b); // random value [a,b] 
```

我已经对此进行了多次测试，它的性能比我见过的大多数随机数生成器更好更快。

很多时候，我都依赖这样一个事实，即给定种子它是确定性的，所以我猜你可以使用它。我将尝试找到该代码的原始来源并将功劳归功于作者。

编辑：上面代码的作者是[Agner Fog](http://www.agner.org/)，在他的网站上有一个随机数生成器的完整[部分](http://www.agner.org/random/)。代码的所有功劳都归于他。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T18:22:34.003

您可以使用：

```
#import <stdlib.h>
int randomNumber = arc4random() % limiteNumber; 
```

# java - How to merge properties defined in multiple beans into single (property) bean?

> ID：14773031
> 
> 赞同：1
> 
> 时间：2013-02-08T12:53:01.267
> 
> 标签：java, spring, properties

I have many property sets defined in `spring.xml` created by factory bean. I'm looking for spring solution to merge them into single bean. So:

INPUT: 2 or more beans of type `java.util.Properties`

OUTPUT: single bean of type `java.util.Properties`

Is there something like that in Spring or as free available code? I don't want to reinvent the wheel :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:37:10.670

You can merge `java.util.Properties` beans using the `putAll` method.

```
@Resource Properties properties1
@Resource Properties properties2

@Bean
Properties mergedProperties(){
    Properties mergedProperties = new Properties();
    mergedProperties.putAll(properties1);
    mergedProperties.putAll(properties2);
    return mergedProperties;
} 
```

See also: [How to merge two java.util.Properties objects?](https://stackoverflow.com/questions/2004833/how-to-merge-two-java-util-properties-objects)

# java - 未通过 while (rs.next()) 处理所需的输出

> ID：14773038
> 
> 赞同：1
> 
> 时间：2013-02-08T12:53:37.237
> 
> 标签：java, sql, jdbc

我正在处理以下代码以从 servlet 解析登录凭据。

```
import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.swing.JOptionPane;

@WebServlet("/login")
public class oneServlet extends HttpServlet {

public static Connection getConnection() throws Exception {

    String driver = "org.postgresql.Driver";
    String url = "jdbc:postgresql://10.1.11.112:5432/pack";
    String username = "pack";
    String password = "pack";
    Class.forName(driver);
    Connection conn = DriverManager.getConnection(url, username, password);
    return conn;
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    String user=request.getParameter("t1");
    String pass=request.getParameter("t2");

    System.out.println("done 1");

    Connection conn = null;
    PreparedStatement pstmt = null;

    System.out.println("done 2");

    try {
         conn = getConnection();
         String queryTest = "select username,password from login ";
         pstmt = conn.prepareStatement(queryTest);

         System.out.println("done 3");

         ResultSet rs = pstmt.executeQuery();

         System.out.println("done4");

         while (rs.next()) {

         System.out.println("done5");    

         String username=rs.getString(1);
         String password=rs.getString(2);    

         if(user.equals(username) && pass.equals(password))
         {
             response.sendRedirect("LoginSuccess.jsp");
             return;

         }  
         else
         {
            JOptionPane.showMessageDialog(null, "retry");
         }
         }
         }

     catch (Exception e) {
        e.printStackTrace();
    }

    finally {
        try {
            pstmt.close();
            conn.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
} 
```

我面临的问题是“while（rs.next（））”正在迭代并显示表中每个可用用户名的输出，但我需要它只显示一次，重定向或重试。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:01:16.030

您不必要地将整个 DB 表复制到 Java 的内存中，而不是以 DB**准确**返回您正在查找的行的方式编写 SQL 查询，这样您就可以摆脱`if (resultSet.next())`.

使用 SQL`WHERE`子句。

```
String query = "select username from login where username=? and password=?";
Connection connection = null;
PreparedStatement statement = null;
ResultSet resultSet = null;

try {
    connection = getConnection();
    statement = connection.prepareStatement(query);
    statement.setString(1, user);
    statement.setString(2, pass);
    resultSet = statement.executeQuery();

    if (resultSet.next()) {
        response.sendRedirect("LoginSuccess.jsp");
    } else {
        request.setAttribute("message", "retry");
    }
} catch (SQLException e) {
    throw new ServletException("DB interaction failed", e);
} finally {
    if (resultSet != null) try { resultSet.close(); } catch (SQLException ignore) {}
    if (statement != null) try { statement.close(); } catch (SQLException ignore) {}
    if (connection != null) try { connection.close(); } catch (SQLException ignore) {}
} 
```

请注意，我还修复了显示消息的疯狂方式，并修复了异常处理和数据库资源的关闭。只会将`JOptionPane`消息显示到网络服务器的屏幕，而不是网络浏览器的屏幕，当它们不在同一台机器上运行时，这在实际生产环境中当然会失败。我强烈建议[停止阅读 roseindia.net 教程](http://balusc.blogspot.com/2008/06/what-is-it-with-roseindia.html)。该网站充斥着不良做法，例如您的代码中所公开的。

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含一个带有验证的 Hello World 示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:00:14.937

将您的查询更改为

```
String queryTest = "select username,password from login where username = ?";
pstmt = conn.prepareStatement(queryTest); 
pstmt.setString(1,user); 
```

更新：更好的解决方案是不从您的数据库中获取密码（出于安全问题），而只获取所需的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:59:57.570

您正在运行的查询不适用于您为每个用户查询的任何特定用户。我想你忘了在查询中添加用户名和密码。

虽然如果这是您需要迭代一次的要求，请将 while 替换为 if 仅迭代一次

```
if (rs.Next){

       //your code

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T12:56:43.123

```
while (rs.next()) {

     System.out.println("done5");    

     String username=rs.getString(1);
     String password=rs.getString(2);    

     if(user.equals(username) && pass.equals(password))
     {
         response.sendRedirect("LoginSuccess.jsp");
         return;

     }  
     else
     {
        JOptionPane.showMessageDialog(null, "retry");
     }
break;
     } 
```

这不是一个正确的实现，但应该可以解决您的问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-08T12:58:01.233

进行查询，以便仅选择具有正确用户名和密码的结果：

```
String queryTest = "select username,password from login where username=? and password=?";
PreparedStatement pstmt = conn.prepareStatement(queryTest);
pstmt.setString(1, user);    
pstmt.setString(2, pass); 
```

# android - 如何将 50% 作为宽度

> ID：14773039
> 
> 赞同：9
> 
> 时间：2013-02-08T12:53:43.293
> 
> 标签：android, android-layout, layout, imageview

我有一个水平方向的 LinearLayout 和 2 个 ImageView，我想让 ImagesView 在宽度上填充 50% 的屏幕，以便在不同尺寸的手机或平板电脑上工作。

像这样的东西：

```
 +-------------+   
 |_____________|     
 |      |      |  
 | 50%  | 50%  |  
 |      |      |   
 |-------------|
 |             |
 +-------------+ 
```

迄今为止最好的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:orientation="horizontal" >

        <ImageView
            android:id="@+id/logo_c"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/logo_animado" />

        <ImageView
            android:id="@+id/logo_t"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/logo_animado2" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-08T12:58:16.303

在里面的两个视图中编写以下代码来执行此操作`LinearLayout`。

```
android:layout_width="0dp"
layout_weight="1" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T12:58:27.313

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center" 
    android:weightSum="100"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/logo_c"
        android:layout_width="0dp" 
        android:layout_weight="50" 
        android:layout_height="wrap_content"
        android:src="@drawable/logo_animado" />

    <ImageView
        android:id="@+id/logo_t" 
        android:layout_height="wrap_content" 
        android:layout_width="0dp"    
        android:layout_weight="50" 
        android:src="@drawable/logo_animado2" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T13:02:24.370

**使用 android:weightSum 和 android:layout_weight**

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:weightSum="2"
        android:orientation="horizontal" >

            <ImageView
                android:id="@+id/logo_c"
                android:layout_width="0dp" android:layout_weight="1" 
                android:layout_height="wrap_content"
                android:src="@drawable/logo_animado" />

            <ImageView
                android:id="@+id/logo_t"
                android:layout_width="0dp" android:layout_weight="1"
                android:layout_height="wrap_content"
                android:src="@drawable/logo_animado2" />

    </LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T12:57:55.283

如果图像视图添加`android:layout_weight="1"`并`ImageView`设置宽度，`fill_parent`我认为它会解决您的问题

但请记住，它会拉伸你的图像，因为图像视图会拉伸每个屏幕分辨率，就像你的图像一样。

# symfony - 在symfony2中制作通用应用库类？

> ID：14773042
> 
> 赞同：2
> 
> 时间：2013-02-08T12:53:46.930
> 
> 标签：symfony

我是 symfony2 的新手。我想让通用应用程序库类在所有应用程序中使用我在 Admin\FeatureBundle\Repository\ 目录中创建了新文件 AppUtils.php 并定义

```
<?php
namespace Admin\FeatureBundle\AppUtils;
use Doctrine\ORM\EntityRepository;
class AppUtils {
... 
```

但是在控制器中

```
use Admin\FeatureBundle\Repository\AppUtils;

class FeatureController extends Controller
{

    public function editAction($id)
    {
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('AdminFeatureBundle:Feature')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Feature entity.');
        }

        $editForm = $this->createForm(new FeatureType(), $entity);
        $deleteForm = $this->createDeleteForm($id);
        $data= AppUtils::AddSystemParameters( $data, $this, true );
      echo '<pre>$data::'.print_r( $data, true ).'</pre><br>';
... 
```

我得到错误：

```
The autoloader expected class "Admin\FeatureBundle\Repository\AppUtils" to be defined in file "/mnt/diskC_XP/wamp5/www/wavendon-tenants/src//Admin/FeatureBundle/Repository/AppUtils.php". The file was found but the class was not in it, the class name or namespace probably has a typo. 
```

如何解决？是否有更好的方法来制作通用应用程序库类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:56:53.377

你有一个错字

```
<?php
namespace Admin\FeatureBundle\Repository;

use Doctrine\ORM\EntityRepository;
class AppUtils { 
```

# java - 无法通过侦听器设置变量

> ID：14773044
> 
> 赞同：1
> 
> 时间：2013-02-08T12:53:57.833
> 
> 标签：java, actionlistener

我从 GUI 和听众开始。我想通过另一个实现 ActionListener 的类从 pc 中选择文件并将其设置到 Hlavna 类中的“File zvolenysubor”中。我可以在侦听器的 actionPerformed 方法中选择文件并将其设置为“File subor”，但我未能将其保存到我的 main 中的“File zvolenysubor”中（我的所有想法也都失败了）。请问我应该在那里更改/添加什么？

这是我的课程：

```
public class Hlavna {      
    public static void main(String[] args) {
        File zvolenysubor = null;
        JFrame frame = new JFrame("ABCDE");
        JButton vybersuboru = new JButton("vyber");
        vybersuboru.setBounds(220, 15, 200, 20);

        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(640, 480);
        frame.add(vybersuboru);
        frame.setLayout(null);

        VyberListener list1 = new VyberListener(zvolenysubor);
        vybersuboru.addActionListener(list1);
        vybersuboru.setText("vyber subor");
    }
}

public class VyberListener implements ActionListener {
    private File subor;

    public VyberListener(File subor){
        this.subor = subor;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        JFileChooser chooser = new JFileChooser();
        System.out.println("lol");
        FileNameExtensionFilter filter = new FileNameExtensionFilter("JPG & GIF Images", "jpg", "gif");
        chooser.setFileFilter(filter);
        chooser.showOpenDialog(null);
        subor = chooser.getSelectedFile();
        System.out.println(subor.getAbsolutePath());        
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:16:08.393

不太清楚你在这里问什么。Java 通过值而不是引用传递方法参数，因此您提供给 VyberListener 构造函数的 File 参数仅在 VyberListener 类中由 actionPerformed 方法更新，而不是 main 方法中的引用。你想在这里完成什么？

如果您尝试在 main 方法中更新“File zvolenysubor”，则可能值得将您的 VyberListener 类中的“File subor”公开，以便可以通过 main 方法访问它。

**更新** 为了尽量减少下面评论中的喋喋不休，我会试着总结一下。尽管 Java 支持按引用传递，但它实际上只是按引用传递**指针**。因此，在您的示例中，您将一个空对象引用（subor）传递给您的 ActionListener，然后在 actionPerformed 方法中将其覆盖：

```
subor = chooser.getSelectedFile(); 
```

因此，您的文件变量“zvolenysubor”永远不会更新。为了更新 Hlavna 类中的字段，我建议使用以下“容器”模式：

```
public class Hlavna {      
    public static void main(String[] args) {
        // New "FileReference" container instance
        FileReference zvolenysubor = new FileReference();
        JFrame frame = new JFrame("ABCDE");
        JButton vybersuboru = new JButton("vyber");
        vybersuboru.setBounds(220, 15, 200, 20);

        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(640, 480);
        frame.add(vybersuboru);
        frame.setLayout(null);

        VyberListener list1 = new VyberListener(zvolenysubor);
        vybersuboru.addActionListener(list1);

        // Retrieves the updated File instance
        File updatedFile = zvolenysubor.getFile();
    }
}

public class VyberListener implements ActionListener {
    private FileReference subor;

    public VyberListener(FileReference subor){
        this.subor = subor;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        JFileChooser chooser = new JFileChooser();
        FileNameExtensionFilter filter = new FileNameExtensionFilter("JPG & GIF Images", "jpg", "gif");
        chooser.setFileFilter(filter);
        chooser.showOpenDialog(null);
        subor.setFile(chooser.getSelectedFile());       
    }   
}

// FileReference container class allows the file reference to be updated by the ActionListener
// without re-initialising the object reference
public class FileReference {
    private File _file;

    public void setFile(File file) {
        _file = file;
    }

    public File getFile() {
        return _file;
    }
} 
```

# c# - 具有不规则时间跨度存储桶的 SQL Server 直方图查询

> ID：14773049
> 
> 赞同：0
> 
> 时间：2013-02-08T12:54:04.450
> 
> 标签：c#, sql-server, linq-to-sql, histogram

给定约 50,000 条记录，其中有两个`datetime`字段表示每行的开始时间和结束时间，我如何编写 SQL Server 查询来构建一个直方图，其中包含开始日期和结束日期之间任意时间跨度的桶，例如*30 分钟、0-1 小时， 1-2 小时、2-4 小时、4-8 小时、8-24 小时、24-48 小时、48-72 小时、3-5 天、7 天以上*？

我希望有一种聪明的方法可以避免对每个存储桶（在本例中为 10 个）执行查询。我使用 LINQ-to-SQL 作为轻量级 ORM，但原始 SQL 也可以。

我天真的方法是先将所有内容存储 60 分钟，然后执行子查询以提取每个不规则存储桶。

**编辑：** LINQ 版本的奖励积分，因为我刚刚了解到可以[`CASE`在 LINQ 中生成语句](http://www.codeproject.com/Articles/38264/How-to-Create-T-SQL-CASE-Statements-With-LINQ-To-S)。持续时间表和`CASE`语句之间的任何性能注意事项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:35:11.443

一种 linq 方法（只需几个时间间隔即可理解）

```
var i30m = TimeSpan.FromMinutes(30).TotalMinutes;
var i60m = TimeSpan.FromMinutes(60).TotalMinutes;
var i2h = TimeSpan.FromHours(2).TotalMinutes;

context.Records.Select(t => SqlMethods.DateDiffMinute(t.StartTime, t.EndTime))
      .GroupBy(i => i < i30m
                      ? "0-30 m"
                      : i < i60m
                          ? "30-60 m"
                          : i < i2h
                              ? "1-2 h"
                              : "Long")
      .Select(i => new {i.Key, Count = i.Count()}) 
```

[SqlMethods](http://msdn.microsoft.com/en-us/library/system.data.linq.sqlclient.sqlmethods.aspx)为 linq to sql 提供 SQL Server 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:14:45.170

尝试这个：

```
SELECT Periods.Period, SUM(Price)
FROM
(
    SELECT '2013-01-01 10:00:00' AS StartDate, '2013-01-01 10:30:00' AS EndDate, 10 AS Price
    UNION ALL
    SELECT '2013-01-01 09:00:00' AS StartDate, '2013-01-01 10:00:00' AS EndDate, 20 AS Price
    UNION ALL
    SELECT '2013-01-01 11:00:00' AS StartDate, '2013-01-01 13:00:00' AS EndDate, 30 AS Price
    UNION ALL
    SELECT '2013-01-01 13:00:00' AS StartDate, '2013-01-01 15:00:00' AS EndDate, 40 AS Price
    UNION ALL
    SELECT '2013-01-01 10:00:00' AS StartDate, '2013-01-01 13:00:00' AS EndDate, 50 AS Price
) AS Prices
INNER JOIN 
(
    SELECT 1 AS Period
    UNION ALL
    SELECT 2 AS Period
    UNION ALL 
    SELECT 3 AS Period
) AS Periods
ON DATEDIFF(HOUR, Prices.StartDate, Prices.EndDate) < Periods.Period
GROUP BY Periods.Period 
```

在您的表格中，您可以计算开始日期和结束日期之间的持续时间，然后将其与您的时期（据我所知 - x 轴值）加入表格并按这些时期分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:16:05.797

说你有

```
SomeTable(Key,StartDate,EndDate)

Select Key,DateDiff(minute,StartDate,EndDate) From SomeTable as RawValue 
```

会给你每把钥匙和分钟差

所以

```
Select Key,
Case When RawValue < 30 Then "Less than 30 minutes"
Case When RawValue between 30 and 60 then "Less than an hour"
...
else 'Over 7 days' as HistValue
From
(
Select Key,DateDiff(minute,StartDate,EndDate) From SomeTable as RawValue
) RawValues 
```

会给你每个键和差异的范围

所以

```
Select HistValue,Count(*) From
(
Select Key,
Case When RawValue < 30 Then "Less than 30 minutes"
Case When RawValue between 30 and 60 then "Less than an hour"
...
else 'Over 7 days' as HistValue
From
(
Select Key,DateDiff(minute,StartDate,EndDate) From SomeTable as RawValue
) RawValues
) UncountedValues 
```

你能一口气给你很多吗，反正我的头上。

如果您想要一个更通用的解决方案，那么一种方法是定义一个持续时间表

例如

```
Category        MinMinutes MaxMinutes
"Less than 30"  0         30 
```

取出硬编码并加入

例如

```
Inner join Duration On BucketMinutes between MinMinutes and MaxMinutes 
```

# jquery - jquery在调整窗口大小时计算元素大小

> ID：14773051
> 
> 赞同：1
> 
> 时间：2013-02-08T12:54:18.793
> 
> 标签：jquery, html, css, resize, drag

我希望有人可以帮助解决这个问题。

我编写了一个函数，它根据现有列表项的数量和父容器中的剩余宽度为导航中的最终 li 项添加宽度。

这适用于文档加载，并且如果调整了文档的大小并单击了 href，但在实际调整大小期间不会重新计算元素的大小。

我做了一个[小提琴](http://jsfiddle.net/lharby/qSfnZ/)来帮助说明这一点。

有谁知道如何在调整窗口大小时动态进行计算？

这是js

```
 $(document).ready(calcWidth);
$(document).resize(calcWidth);

function calcWidth(){
    // get array of all the list items in the nav
    var $listWidth = $('ul#main-nav li').map(function(){
        return $(this).width();
    }).get();
    var $itemCount = $('#main-nav li').length; //this works as margin-right is set to 1px
    var $contWidth = $('#main-nav').width(); // get the full container width
    var $sum = 0;
    $.each($listWidth,function(){$sum+=parseFloat(this) || 0;});
    $('ul#main-nav li.final a').css({
        width:  $contWidth - $sum - $itemCount, //set the width of the final li to be the total container minus the sum of the existing li elements
        height: '12px'
    });
} 
```

如果您需要在这里发布更多代码，请告诉我，但这一切都在小提琴中。

谢谢卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:02:27.467

您不需要使用 javascript 执行此操作。

移动`clearfix`UL 上的类（因为列表项是浮动的），在 UL 上添加紫色背景，并为列表项添加 1px 白色右边框。您可以删除最后一个 LI。

[看这里](http://jsfiddle.net/mfVWn/)

# ios - 如何在ios中获取注释纬度和经度

> ID：14773060
> 
> 赞同：-2
> 
> 时间：2013-02-08T12:54:39.470
> 
> 标签：ios, objective-c

这是否可以获得注释点的纬度和经度

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {

} 
```

在这个函数中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:04:57.033

```
annotation.coordinate.latitude
annotation.coordinate.longitude 
```

但是@AlexWien 是对的……对文档的快速概述可以让您轻松发现这一点……

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T13:12:04.543

在[MkAnotaion](http://developer.apple.com/library/ios/ipad/#documentation/MapKit/Reference/MKAnnotation_Protocol/Reference/Reference.html)中，第一个属性是坐标。

# android - 我在 viewpager 选项卡中的片段不刷新

> ID：14773061
> 
> 赞同：10
> 
> 时间：2013-02-08T12:54:44.107
> 
> 标签：android, android-viewpager, fragment

我有 4 个选项卡的 viewpager .. 在每个选项卡中都有一个片段。我的第一个选项卡是一个带有表单（例如用户）的片段，在我单击保存后，数据被插入到数据库中。我的第二个选项卡是另一个带有表单的片段，但它使用第一个选项卡中的数据（我从数据库中获取）来填充微调器。现在，在我从第一个选项卡成功插入数据后，在我的第二个选项卡中，微调器为空。因为我的数据库查询是在第二个片段的 onCreateView() 中实现的，所以它只在应用程序启动时调用一次，所以在 tab 1 和 tab2 之间切换不会启动 onCreateView() 甚至 onResume()。对我来说有趣的是，如果我转到 tab4 然后返回到 tab2，我的数据正确地在我的微调器中，所以以某种方式从我当前的选项卡上滑动两个选项卡刷新我的片段。

**编辑** 我试图把 psykhi 建议的方法放在这样的地方：

```
 this.mViewPager.setOffscreenPageLimit(0);
    this.mViewPager.setAdapter(this.mPagerAdapter);
    this.mViewPager.setOnPageChangeListener(this); 
```

但这对我不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T16:19:49.550

我发现模拟“setOffscreenPageLimit(0)”行为的最佳方法是使用 OnPageChangeListener 并覆盖适配器中的 getItemPosition 方法。像这样的东西：

在您的自定义寻呼机适配器中：

```
@Override
public int getItemPosition(Object object) {
     return POSITION_NONE;
} 
```

然后在包含 ViewPager 的 Activity 中：

```
final MyPagerAdapter adapter = new MyPagerAdapter();
pager.setAdapter(adapter);
pager.setOnPageChangeListener(new OnPageChangeListener() {
     @Override
     public void onPageSelected(int position) {
          ... anything you may need to do to handle pager state ...
          adapter.notifyDataSetChanged(); //this line will force all pages to be loaded fresh when changing between fragments
     }
} 
```

这应该与将 OffscreenPageLimit 设置为 0 具有相同的效果。但是，此功能有点违背 ViewPager 旨在提供的功能。如果您尝试以这种方式实现 ViewPager，则可能值得重新评估您的布局以确保 ViewPager 确实是您想要使用的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-08T13:37:56.600

**更新：**有更好的方法，请看这里：[动态更新 ViewPager？](https://stackoverflow.com/questions/10849552/android-viewpager-cant-update-dynamically/17855730#17855730)

* * *

*删除此答案的内容，因为这是访问`Fragment`s inside的一种非常糟糕的方式`ViewPager`，请参阅上面的链接以获得更好的方法。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T13:02:57.983

这是因为您可以指定 viewpager 将“保留在 RAM 中”的片段数（[setOffScreenPageLimit](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29) () ：我认为默认值为 1）。所以你的第二个片段不会重新加载。当您转到选项卡 3 或 4 时，您的 2 个第一个片段将被删除，然后在您返回时重新创建。

要刷新您的片段，有很多方法可以做到：您可以在其中实现自己的侦听器接口来告诉它何时刷新，或者简单地调用您将实现的方法来更新您的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-23T11:50:37.680

在片段方法中首先覆盖

```
@Override
public void setUserVisibleHint(boolean isVisibleToUser) {
    super.setUserVisibleHint(isVisibleToUser);
    if(isVisibleToUser){
        actionView();//call the method to be refreshed
    }
    else{
        //no
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-21T10:30:15.753

以我的经验，ViewPagers 保持：

*   您当前的标签
*   & 1 个选项卡在内存中的任一侧

因此，当您在 1 和 2 之间切换时，引擎盖下什么都没有发生 - 就像它们只是被隐藏/显示一样。

但是当您导航到选项卡 4 时，选项卡 1 和 2 被破坏（调用 onDestroy()），因此当您导航回其中任何一个时，它们将被重新创建（调用 onCreate()）。

正如[psykhi](https://stackoverflow.com/users/1654303/psykhi "心理")建议的那样，您可以将[OffScreenPageLimit()](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29 "setOffScreenPageLimit()")设置为 0，以便每次导航到它时都会创建每个片段。

如果您有兴趣将其他页面保留在内存中以提高性能，**因为它们的设计初衷是这样**，您可以使用消息传递/事件发布系统将消息从选项卡 1 发送到选项卡 2，告诉它在您提交时更新选项卡 1 上的表格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-28T10:19:03.653

好的可能是一个迟到的回复，将来可能会帮助其他人，所以最近我在将数据从 db 提取到标签时遇到了同样的问题，它曾经只在我点击第三个标签时才显示。我尝试了上述解决方案，但没有任何效果。最后我遇到了[Otto](http://square.github.io/otto/) 这个库允许你在你的应用程序中进行通信..

只需将此库用于 yourAdapter.notifyDataSetChanged() ，无论您从数据库中获取数据..

这个视频帮助了我很多[https://www.youtube.com/watch?v=lVqBmGK3VuA](https://www.youtube.com/watch?v=lVqBmGK3VuA)

# oauth - 从连接安装中检索用户（配置文件）信息的正确 REST 端点是什么

> ID：14773067
> 
> 赞同：0
> 
> 时间：2013-02-08T12:55:09.083
> 
> 标签：oauth, opensocial, ibm-connections, ibm-sbt

基于此信息： [http ://www-10.lotus.com/ldd/appdevwiki.nsf/xpDocViewer.xsp?lookupName=API+Reference#action=openDocument&res_title=OpenSocial_Profiles_API_sbar&content=pdcontent](http://www-10.lotus.com/ldd/appdevwiki.nsf/xpDocViewer.xsp?lookupName=API+Reference#action=openDocument&res_title=OpenSocial_Profiles_API_sbar&content=pdcontent)

以及用于发布更新的工作网址：

我创建了这个来尝试找出这个访问令牌属于谁：

[https://connections4.e-office.com/connections/opensocial/oauth/rest/people/@me/@self](https://connections4.e-office.com/connections/opensocial/oauth/rest/people/@me/@self)

但是我得到错误 501: No service defined for path people/@me/@self

网址应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:14:14.713

显然你不需要包括：@Self

就是这个：

连接/opensocial/oauth/rest/people/@me/

另见：[http ://www-10.lotus.com/ldd/appdevwiki.nsf/xsp/.ibmmodres/domino/OpenAttachment/ldd/appdevwiki.nsf/B49DB47061DA9DEB85257AC9006D5256/attach/AppDev_OpenSocial.pdf](http://www-10.lotus.com/ldd/appdevwiki.nsf/xsp/.ibmmodres/domino/OpenAttachment/ldd/appdevwiki.nsf/B49DB47061DA9DEB85257AC9006D5256/attach/AppDev_OpenSocial.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:40:48.830

您可以使用 Profiles REST API URL：

```
http(s)://yourserver/profiles/admin/atom/profileEntry.do?email=mailaddress

```

或者

```
http(s)://yourserver/profiles/admin/atom/profileEntry.do?uid=uid

```

# php - 每个循环的 JQUERY AJAX 自定义属性

> ID：14773068
> 
> 赞同：0
> 
> 时间：2013-02-08T12:55:17.553
> 
> 标签：php, javascript, jquery, html, ajax

这个问题与我昨天问的另一个问题有关，它的链接是： [Parse HTML in jquery through ajax into elements and replace each对应的页面](https://stackoverflow.com/questions/14764582/parse-html-in-jquery-through-ajax-into-elements-and-replace-each-corresponding-o)

基本上我想用ajax调用一个php页面，并将响应中的元素替换为页面上的相应元素。我在答案中得到了以下功能：

```
 $(data ).filter('.maindiv').each(function (index) 
  /* "this" is the current div in response*/          
  $('#'+this.id).replaceWith(this);
 }); 
```

当我要替换的 div 具有常规的 id= 时，上述函数运行良好，但如果使用像 gid= 这样的自定义属性，例如它将不起作用。我怎样才能解决这个问题？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:57:33.427

将 attr 用于自定义属性，而不是使用`this.id`您可以使用`$(this).attr("YourAttr")`;

```
$(data ).filter('.maindiv').each(function (index) 
   /* "this" is the current div in response*/          
    $('#'+$(this).attr('gid')).replaceWith(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:03:09.090

您可以选择具有 gid 属性的节点：

```
$('[gid]').replaceWith(this); 
```

您甚至可以通过仅选择具有所需 gid 值的节点来更精确

```
$('[gid="hello"]').replaceWith(this); 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:01:30.487

对于数据，您可以使用自定义属性。[HTML5 规定](http://html5doctor.com/html5-custom-data-attributes/)了`data-`属性的使用。很酷的是，这也适用于 HTML4！jQuery 可以使用 data 方法读取它。

我会推荐：

```
<div class="maindiv" data-grid="myGrid">...</div>

$(data).filter('.maindiv').each(function (index)        
     $('#'+$(this).data('gid')).replaceWith(this);
}); 
```

# model - 如何在 CakePHP2.x 中使用临时表

> ID：14773070
> 
> 赞同：1
> 
> 时间：2013-02-08T12:55:28.220
> 
> 标签：model, cakephp-2.1, temp-tables

我读了很多关于我的问题的其他帖子，但我不知道如何解决它：

我读了 2 个表，并想将它们组合在一个临时表中。

我尝试过，像其他用户一样使用以下代码：

```
 $tmpModel = 'ListTransactions';
    $tmpTable = 'list_transactions';

    $this->ListTransactions->query("CREATE TEMPORARY TABLE `".$tmpTable ."`
    (
    `id` int(11) NOT NULL,
    `user_id` int(11) NOT NULL,
    `sum` decimal(10,2) NOT NULL,
    `date` datetime NOT NULL,
    `class` enum('Level1','Level2','Level3','Out') NOT NULL DEFAULT 'Out',
    `program_id` int(11) NULL,
    `program_title` varchar(150) NULL,
    PRIMARY KEY (`id`)
    )"
    );
    App::import('Model', $tmpModel);
    $this->loadModel($tmpModel); 
```

表创建返回 true，所以我认为表已创建。但是当我想保存一些数据时，我得到一个“表不存在”的错误。

```
 foreach ($payments as $payment) {
        $this->ListTransactions->create();
        $this->ListTransactions->set(array(
            'id' => $payment['Payments']['id'],
            'sum' => $payment['Payments']['sum'],
            'date' => $payment['Payments']['check_date'],
            'class' => 'Out',
            'user_id' => $UserId
        ));
        $this->ListTransactions->save();
    }
     Error: SQLSTATE[42S02]: Base table or view not found: 1146 Table 'list_transactions' doesn't exist

    SQL Query: SELECT COUNT(*) AS `count` FROM `list_transactions` AS `ListTransactions` WHERE `ListTransactions`.`id` = '1' 
```

请帮忙 ：（

问候 M。

# php - PHP，str_pad unicode 问题

> ID：14773072
> 
> 赞同：14
> 
> 时间：2013-02-08T12:55:31.810
> 
> 标签：php, string, unicode

我只是试图将其固定`$str`为 5 个字符，但不能。

```
$str = "nü";
echo str_pad($str, 5, "ü"); // give nüü 
```

我知道这是一个 unicode 问题并且搜索了很多但没有运气。我尝试了诸如此类的东西；

```
echo str_pad($str, 4 + mb_strlen($s), $s);
echo str_pad($str, 5 + mb_strlen($s), $s); 
```

我也试过这个[http://www.php.net/manual/de/function.str-pad.php#89754](http://www.php.net/manual/de/function.str-pad.php#89754)看到这个[https://stackoverflow.com/a/11871948/362780](https://stackoverflow.com/a/11871948/362780)。

在这个问题上有什么经验吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T13:28:31.857

您需要一个多字节版本的`str_pad()`，如下所示。它的灵感[来自`str_pad()`](http://lxr.php.net/xref/PHP_5_4/ext/standard/string.c#5253).

```
function mb_str_pad($input, $pad_length, $pad_string = ' ', $pad_type = STR_PAD_RIGHT, $encoding = 'UTF-8')
{
    $input_length = mb_strlen($input, $encoding);
    $pad_string_length = mb_strlen($pad_string, $encoding);

    if ($pad_length <= 0 || ($pad_length - $input_length) <= 0) {
        return $input;
    }

    $num_pad_chars = $pad_length - $input_length;

    switch ($pad_type) {
        case STR_PAD_RIGHT:
            $left_pad = 0;
            $right_pad = $num_pad_chars;
            break;

        case STR_PAD_LEFT:
            $left_pad = $num_pad_chars;
            $right_pad = 0;
            break;

        case STR_PAD_BOTH:
            $left_pad = floor($num_pad_chars / 2);
            $right_pad = $num_pad_chars - $left_pad;
            break;
    }

    $result = '';
    for ($i = 0; $i < $left_pad; ++$i) {
        $result .= mb_substr($pad_string, $i % $pad_string_length, 1, $encoding);
    }
    $result .= $input;
    for ($i = 0; $i < $right_pad; ++$i) {
        $result .= mb_substr($pad_string, $i % $pad_string_length, 1, $encoding);
    }

    return $result;
}

$str = "nü";
$pad = "ü";

echo mb_str_pad($str, 5, $pad); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T13:37:05.147

我认为您需要查看更多 php.net（此处： http: [//php.net/str_pad#111147](http://php.net/str_pad#111147)）。但我改变了一点。

注意：不要忘记在之前调用它`mb_internal_encoding("utf-8");`。

```
mb_internal_encoding("utf-8");

function str_pad_unicode($str, $pad_len, $pad_str = ' ', $dir = STR_PAD_RIGHT) {
    $str_len = mb_strlen($str);
    $pad_str_len = mb_strlen($pad_str);
    if (!$str_len && ($dir == STR_PAD_RIGHT || $dir == STR_PAD_LEFT)) {
        $str_len = 1; // @debug
    }
    if (!$pad_len || !$pad_str_len || $pad_len <= $str_len) {
        return $str;
    }

    $result = null;
    if ($dir == STR_PAD_BOTH) {
        $length = ($pad_len - $str_len) / 2;
        $repeat = ceil($length / $pad_str_len);
        $result = mb_substr(str_repeat($pad_str, $repeat), 0, floor($length))
                . $str
                . mb_substr(str_repeat($pad_str, $repeat), 0, ceil($length));
    } else {
        $repeat = ceil($str_len - $pad_str_len + $pad_len);
        if ($dir == STR_PAD_RIGHT) {
            $result = $str . str_repeat($pad_str, $repeat);
            $result = mb_substr($result, 0, $pad_len);
        } else if ($dir == STR_PAD_LEFT) {
            $result = str_repeat($pad_str, $repeat);
            $result = mb_substr($result, 0, 
                        $pad_len - (($str_len - $pad_str_len) + $pad_str_len))
                    . $str;
        }
    }

    return $result;
}

$t = STR_PAD_LEFT;
$s = '...';
$as = 'AO';
$ms = 'ÄÖ';
echo "<pre>\n";
for ($i = 3; $i <= 1000; $i++) {
    $s1 = str_pad($s, $i, $as, $t); // can not inculde unicode char!!!
    $s2 = str_pad_unicode($s, $i, $ms, $t);
    $l1 = strlen($s1);
    $l2 = mb_strlen($s2);
    echo "len $l1: $s1 \n";
    echo "len $l2: $s2 \n";
    echo "\n";
    if ($l1 != $l2) die("Fail!");
}
echo "</pre>"; 
```

在这里测试：http: [//codepad.viper-7.com/3jTEgt](http://codepad.viper-7.com/3jTEgt)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T13:10:45.870

试试这个（它可能看起来像失败的那个，但这也有一个编码检查）：

```
<?php 
function mb_str_pad ($input, $pad_length, $pad_string, $pad_style, $encoding="UTF-8") { 
   return str_pad($input, strlen($input)-mb_strlen($input,$encoding)+$pad_length, $pad_string, $pad_style); 
} 
?> 
```

[**资源**](http://www.php.net/manual/en/ref.mbstring.php#90611)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-07T15:27:43.340

我对此的贡献。

```
/**
 * Multibyte String Pad
 *
 * Functionally, the equivalent of the standard str_pad function, but is capable of successfully padding multibyte strings.
 *
 * @param string $input The string to be padded.
 * @param int $length The length of the resultant padded string.
 * @param string $padding The string to use as padding. Defaults to space.
 * @param int $padType The type of padding. Defaults to STR_PAD_RIGHT.
 * @param string $encoding The encoding to use, defaults to UTF-8.
 *
 * @return string A padded multibyte string.
 */
function mb_str_pad($input, $length, $padding = ' ', $padType = STR_PAD_RIGHT, $encoding = 'UTF-8')
{
    $result = $input;
    if (($paddingRequired = $length - mb_strlen($input, $encoding)) > 0) {
        switch ($padType) {
            case STR_PAD_LEFT:
                $result =
                    mb_substr(str_repeat($padding, $paddingRequired), 0, $paddingRequired, $encoding).
                    $input;
                break;
            case STR_PAD_RIGHT:
                $result =
                    $input.
                    mb_substr(str_repeat($padding, $paddingRequired), 0, $paddingRequired, $encoding);
                break;
            case STR_PAD_BOTH:
                $leftPaddingLength = floor($paddingRequired / 2);
                $rightPaddingLength = $paddingRequired - $leftPaddingLength;
                $result =
                    mb_substr(str_repeat($padding, $leftPaddingLength), 0, $leftPaddingLength, $encoding).
                    $input.
                    mb_substr(str_repeat($padding, $rightPaddingLength), 0, $rightPaddingLength, $encoding);
                break;
        }
    }

    return $result;
} 
```

单元测试方法

```
/**
 * @dataProvider provideDataForMbStrPad
 *
 * @param string $input
 * @param int $length
 * @param string $padding
 * @param int $padType
 * @param string $result
 */
public function testMbStrPad($input, $length, $padding, $padType, $result)
{
    $this->assertEquals($result, Strings::mbStrPad($input, $length, $padding, $padType));
} 
```

上述单元测试的数据提供者

```
public function provideDataForMbStrPad()
  {
      return [
          ['Nhiều byte string đệm', 0, ' ', STR_PAD_BOTH, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 0, ' ', STR_PAD_LEFT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 0, ' ', STR_PAD_RIGHT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 0, '充', STR_PAD_BOTH, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 0, '充', STR_PAD_LEFT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 0, '充', STR_PAD_RIGHT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 0, '煻充', STR_PAD_BOTH, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 20, ' ', STR_PAD_BOTH, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 20, ' ', STR_PAD_LEFT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 20, ' ', STR_PAD_RIGHT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 20, '充', STR_PAD_BOTH, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 20, '充', STR_PAD_LEFT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 20, '充', STR_PAD_RIGHT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 20, '煻充', STR_PAD_BOTH, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 21, ' ', STR_PAD_BOTH, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 21, ' ', STR_PAD_LEFT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 21, ' ', STR_PAD_RIGHT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 21, '充', STR_PAD_BOTH, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 21, '充', STR_PAD_LEFT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 21, '充', STR_PAD_RIGHT, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 21, '煻充', STR_PAD_BOTH, 'Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 22, ' ', STR_PAD_BOTH, 'Nhiều byte string đệm '],
          ['Nhiều byte string đệm', 22, ' ', STR_PAD_LEFT, ' Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 22, ' ', STR_PAD_RIGHT, 'Nhiều byte string đệm '],
          ['Nhiều byte string đệm', 22, '充', STR_PAD_BOTH, 'Nhiều byte string đệm充'],
          ['Nhiều byte string đệm', 22, '充', STR_PAD_LEFT, '充Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 22, '充', STR_PAD_RIGHT, 'Nhiều byte string đệm充'],
          ['Nhiều byte string đệm', 22, '煻充', STR_PAD_BOTH, 'Nhiều byte string đệm煻'],
          ['Nhiều byte string đệm', 23, ' ', STR_PAD_BOTH, ' Nhiều byte string đệm '],
          ['Nhiều byte string đệm', 23, ' ', STR_PAD_LEFT, '  Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 23, ' ', STR_PAD_RIGHT, 'Nhiều byte string đệm  '],
          ['Nhiều byte string đệm', 23, '充', STR_PAD_BOTH, '充Nhiều byte string đệm充'],
          ['Nhiều byte string đệm', 23, '充', STR_PAD_LEFT, '充充Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 23, '充', STR_PAD_RIGHT, 'Nhiều byte string đệm充充'],
          ['Nhiều byte string đệm', 23, '煻充', STR_PAD_BOTH, '煻Nhiều byte string đệm煻'],
          ['Nhiều byte string đệm', 24, ' ', STR_PAD_BOTH, ' Nhiều byte string đệm  '],
          ['Nhiều byte string đệm', 24, ' ', STR_PAD_LEFT, '   Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 24, ' ', STR_PAD_RIGHT, 'Nhiều byte string đệm   '],
          ['Nhiều byte string đệm', 24, '充', STR_PAD_BOTH, '充Nhiều byte string đệm充充'],
          ['Nhiều byte string đệm', 24, '充', STR_PAD_LEFT, '充充充Nhiều byte string đệm'],
          ['Nhiều byte string đệm', 24, '充', STR_PAD_RIGHT, 'Nhiều byte string đệm充充充'],
          ['Nhiều byte string đệm', 24, '煻充', STR_PAD_BOTH, '煻Nhiều byte string đệm煻充'],
          ['Nhiều byte string đệm', 25, '煻充', STR_PAD_BOTH, '煻充Nhiều byte string đệm煻充'],
          ['Nhiều byte string đệm', 26, '煻充', STR_PAD_BOTH, '煻充Nhiều byte string đệm煻充煻'],
      ];
  } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-12T13:34:14.980

注意：这不是对来自 user2032610 的原始问题的确切答案。但是如果你不需要用 unicode 字符填充字符串，但是用空格、点等填充字符串，它会有所帮助（我把它放在这里是因为我正在寻找解决方案并且找不到一些简单的一.它可能会帮助其他类似情况的人。）

1.  只需使用 mb_strlen() 计算实际字符串长度。
2.  然后回显 $str 后跟 str_pad 模式（在本例中为点）。

```
$str = "nü";
echo "nü" . str_pad('', 5 - mb_strlen($str), "."); 
```

结果：nü...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-26T16:16:44.880

您也可以使用`str_repeat`.

```
function mb_str_pad($string, $length, $pad_string = " ")
{
    return $string . str_repeat($pad_string, $length - mb_strlen($string));
} 
```

`STR_PAD_RIGHT`您可以通过添加,`STR_PAD_LEFT`或`STR_PAD_BOTH`;来升级此功能

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-20T10:29:10.830

```
function mb_str_pad($str,$pad,$pad_str,$pad_type = STR_PAD_RIGHT,$encoding = 'UTF-8'){
        $result = null;
        $length = mb_strlen($str,$encoding);
        if($length > $pad) $result = mb_substr($str,0,$pad,$encoding);
        else if($length == $pad) $result = $str; 
        else $result = $str.str_repeat($pad_str,$pad - $length);
        return $result;     
     } 
```

# ios - 企业 ios 应用程序中的崩溃日志

> ID：14773074
> 
> 赞同：4
> 
> 时间：2013-02-08T12:55:40.350
> 
> 标签：ios, objective-c, cocoa-touch, crash, crash-log

我想提取那些使用我的企业应用程序的用户的崩溃日志。如果是 App Store 应用程序，我可以从 iTunes 连接获取此信息。由于在企业部署的情况下没有 App Store 的干预，因此不确定如何访问此信息。

是否有任何 Objective-C API，我可以通过它使用应用程序代码访问崩溃日志并使用 Web 服务将它们上传到我的服务器上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:19:39.420

没有可用于访问 iOS 生成的崩溃报告的 Objective-C API。自动访问它们的唯一方法是向您的应用程序添加一个崩溃报告框架，该框架还可以捕获崩溃并让您将它们发送到服务或您自己的服务器。

我强烈建议不要设计您自己的崩溃报告或异常处理机制，因为它太复杂而无法正确处理，并且不会引入更危险的问题，例如可能导致您的应用程序用户丢失数据。

我在这里回答的第二部分列出了一些选项，包含开源项目、带有开源 SDK 的服务和闭源选项：[iOS 崩溃日志捕获、调试信息.. 捕获并通过电子邮件发送给开发团队](https://stackoverflow.com/questions/8233388/ios-crash-log-catch-debug-info-catch-and-send-via-email-to-the-dev-team/8242215#8242215)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:14:25.700

尝试使用[Crashlytics](http://try.crashlytics.com/)。

非常强大。使用起来非常愉快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:02:06.260

您可以指示您的用户从 iTunes 中提取日志并将其发送给您。查看本文档的“向开发人员发送崩溃报告”部分：http: [//developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/35-Distributing_Applications/distributing_applications.html](http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/35-Distributing_Applications/distributing_applications.html)

# mysql - 在 CodeIgniter 查询中连接多个表

> ID：14773075
> 
> 赞同：0
> 
> 时间：2013-02-08T12:55:41.717
> 
> 标签：mysql, codeigniter

我想在 CodeIgniter 中运行一个查询。

查询是

```
"SELECT * FROM td_album,td_image
     WHERE td_album.album_id=td_image.album_id
          AND td_album.album_id='$id'
          AND (td_image.image_name='$name' OR td_image.image_id='$image_id');" 
```

当我在 CodeIgniter 查询中运行时，我写为：

```
$query = $this->db->select('*')
                        ->from('td_image')
                        ->join('td_album', 'td_album.album_id = td_image.album_id')
                        ->like('td_image.image_id', $image_id)
                        ->or_like('td_image.image_name', $image_name)
                        ->and_like('td_album.album_id',$id)
                        ->get('', $this->limit, $this->offset); 
```

但我不知道为什么这行不通。

## 编辑

它抛出这个错误：

> 致命错误：在第 189 行的 /home/koushani/public_html/jmssimplex.com/application/admin/models/gallery_model.php 中调用未定义的方法 CI_DB_mysql_driver::and_like()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:18:37.310

因为and_like不是一个活动记录函数。所以你可以在一个查询中使用多个like

尝试这个

```
$query = $this->db->select('*')
                        ->from('td_image')
                        ->join('td_album', 'td_album.album_id = td_image.album_id')
                        ->like('td_image.image_id', $image_id)
                        ->or_like('td_image.image_name', $image_name)
                        ->like('td_album.album_id',$id)
                        ->get('', $this->limit, $this->offset); 
```

另一种方法是

```
$array = array('td_image.image_id' => $image_id, 'td_album.album_id' => $id);
$this->db->select('*');
$this->db->from('td_image');
$this->db->join('td_album', 'td_album.album_id = td_image.album_id');
$this->db->like($array);
$this->db->or_like('td_image.image_name', $image_name);
$this->db->limit($this->limit, $this->offset);
$query = $this->db->get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:08:50.397

你应该像下面这样写

```
$this->db->select('*')
                ->from('td_image,td_album')
                ->where('td_album.album_id', 'td_image.album_id')
                ->where('td_album.album_id', $id)
                ->where('td_image.image_name='.$name.' OR td_image.image_id='.$image_id);
$query = $this->db->get(); 
```

# java - netbeans 是否有类似 Eclipse 调试显示视图的东西

> ID：14773077
> 
> 赞同：16
> 
> 时间：2013-02-08T12:55:50.327
> 
> 标签：java, eclipse, debugging, netbeans

netbeans 有类似 Eclipse 调试显示视图的东西吗？

我喜欢在 Eclipse 调试模式下尝试 Java 代码的交互式窗口，这篇文章中提到了它：

[是否有任何类似 Python 的 Java 交互式控制台？](https://stackoverflow.com/questions/787313/is-there-any-python-like-interactive-console-for-java)

只是想知道我是否可以在 netbeans 中得到相同的结果

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-04-21T12:00:15.260

有一个菜单选项：调试 - 评估表达式...

还有一个快捷方式：`Ctrl`+ `F9`（在 Windows 中）

[您可以在How to Evaluate Code](http://docs.oracle.com/cd/E50453_01/doc.80/e50452/run_debug_japps.htm#sthref409)中查看说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:50:05.603

There isn't an interactive window for debugging quite like Eclipse, although you can set up breakpoints in the program while debugging to follow the step by step route in which the program executes. Have you looked at the NetBeans site? [http://netbeans.org/features/java/debugger.html](http://netbeans.org/features/java/debugger.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-09T15:54:58.403

调试时，按 ctrl+shift+I 计算表达式。在“评估表达式”窗口中，您可以执行与 eclipse 显示窗口中相同的操作。

# netbeans - GlassFish 异常

> ID：14773079
> 
> 赞同：0
> 
> 时间：2013-02-08T12:55:54.040
> 
> 标签：netbeans, glassfish

我对所有这些东西都很陌生。我尝试通过 GlassFish 启动 Web 服务。当我尝试构建这个项目时，我得到一个错误。

```
ant -f /home/philipp/NetBeansProjects/sks3 -DforceRedeploy=false -Ddirectory.deployment.supported=true -Dnb.wait.for.caches=true run
init:
deps-module-jar:
deps-ear-jar:
deps-jar:
check-rest-config-props:
generate-rest-config:
library-inclusion-in-archive:
library-inclusion-in-manifest:
compile:
compile-jsps:
In-place deployment at /home/philipp/NetBeansProjects/sks3/build/web
Initializing...
deploy?DEFAULT=/home/philipp/NetBeansProjects/sks3/build/web&name=sks3&contextroot=/sks3&force=true failed on GlassFish Server 3.1.2 
 Error occurred during deployment: Exception while deploying the app [sks3] : Invalid TYPE-level @EJB with name() = [] and beanInterface = [class java.lang.Object] in class Webservice.MeasurementResources.  Each TYPE-level @EJB must specify both name() and beanInterface().at org.glassfish.apf.AnnotationInfo@3b63118a. Please see server.log for more details.
/home/philipp/NetBeansProjects/sks3/nbproject/build-impl.xml:1028: The module has not been deployed.
See the server log for details.
BUILD FAILED (total time: 6 seconds) 
```

我不知道出了什么问题，但根据消息，它必须在文件 MeasurementResurces.java 中......

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package Webservice;

import Exception.DALException;
import dal.MeasurementDao;
import javax.ejb.EJB;
import javax.ejb.Stateless;
import javax.inject.Inject;
import javax.inject.Named;
import javax.ws.rs.Path;
import repo.Measurement;

/**
 *
 * @author philipp
 */
//@Stateless
//@inject
@EJB
//@LocalBean
@Named
@Path("Measurement")
public class MeasurementResources {
    @Inject
    MeasurementDao mDao;
    public void add(Measurement arg) throws DALException{
        mDao.save(arg);
    }
 /*   public void getAll(Measurement arg) throws DALException{
        mDao.getAll();
    }
    */
} 
```

有人至少暗示出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:59:12.610

您正在使用类型级 EJB，但没有声明`name`and `beanInterface`。

```
/**
 *
 * @author philipp
 */
//@Stateless
//@inject
@EJB(name="MyEjb", beanInterface=RemoteEjb.class)
//@LocalBean
@Named
@Path("Measurement")
public class MeasurementResources {
    @Inject
    MeasurementDao mDao;
    public void add(Measurement arg) throws DALException{
        mDao.save(arg);
    }
}

@Remote
public interface RemoteEjb {
    public void doSomething();
}

@Stateless
public class MyEjb implements RemoteEjb {
   ...
} 
```

`name`是您尝试注入的 EJB 的名称。`beanInterface`是本地或远程接口。这不是真正的注射。这是一种使用注释作为部署描述符`ejb-ref`元素的替代方法。您应该使用 JNDI 查找来注入 ejb。

我不知道您要做什么，但注入 ejb 的常用方法如下：

```
@Named
@Path("Measurement")
public class MeasurementResources {
    @EJB
    private MyEjb myejb;

    @Inject
    MeasurementDao mDao;
    public void add(Measurement arg) throws DALException{
        mDao.save(arg);
    }

    ...
 } 
```

# php - 在多个表上更新

> ID：14773080
> 
> 赞同：0
> 
> 时间：2013-02-08T12:56:12.667
> 
> 标签：php, mysql, sql-update

我在 mysql 中有两个表，分别是“users”和“users_info”——第一个包含登录数据，例如电子邮件和密码，以及名称。

第二个表包含更多信息，如地址、出生日期、简历等。

现在，我正在开发一个管理面板，我可以在其中修改有关这些用户的任何信息。为了获取数据，我使用的是连接，但是保存呢？

无论其表如何，我如何保存数据？如果它只是一张我会做的表（在 PHP 中）：

```
$values = Array(
  "email" => "foo@test.com", //this goes into "users"
  "name" => "john", //this one, too
  "bio" => "i is cool" //this one should to go users_info!!
);

foreach($values as $k=>$v) {
  $query = " UPDATE users SET '$k'='$v' WHERE id=7653 ";
} 
```

这将给出一个错误，因为“bio”不是 users_info 中的列。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:01:40.640

你的编码方式有点模糊，虽然你现在可以尝试像下面这样，

```
$usersColumns = array('email','password',...);
$usersInfoColumns = array('address','dob',...);
foreach($values as $k=>$v) {
   if(in_array($k,$usersColumns)){
     $tableName = 'users';
   }
   else if(in_array($k,$usersInfoColumns)){
     $tableName = 'users_info';       
   }
   $query = "UPDATE $tableName SET '$k'='$v' WHERE id=7653";
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:01:14.253

```
$table = "users";
foreach($values as $k=>$v) { 
if($values = "bio"{ 
$table = "users_info"; 
} 
$query = "UPDATE '$table' set '$k'='$v' WHERE id = 7653";
$table = "users"; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:02:28.170

您当然可以使用[多表语法](http://dev.mysql.com/doc/refman/5.5/en/update.html)：

> ```
> UPDATE [LOW_PRIORITY] [IGNORE] table_references
>     SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
>     [WHERE where_condition] 
> ```

但是，如果我是你，我不会在意，我会简单地运行*两个*常规的单表更新。很容易出错（并更新意外记录），而且您不会获得任何明显的好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:22:11.103

我从不推荐循环内的查询。我认为你需要先分离你的帖子值；

```
<form method="post">
    <input type="text" name="user[name]">
    <input type="text" name="user[email]">
    <textarea name="user_info[bio]"></textarea>
</form> 
```

和 PHP 部分；

```
$user_post      = (array) $_POST['user'];
$user_info_post = (array) $_POST['user_info'];
$user_query = $user_info_query = array();
foreach ($user_post as $k => $v) {
    // db_escape is your data security
    $user_query[] = sprintf("`%s` = '%s'", $k, db_escape($v));
}
if (!empty($user_query)) {
    $user_query = join(', ', $user_query);
    // db_query("UPDATE users SET ...");
}
if (!empty($user_info_query)) {
    $user_info_query = join(', ', $user_info_query);
    // db_query("UPDATE users_info SET ...");
} 
```

# asp.net - 文本框没有使用 jquery 焦点获得焦点

> ID：14773081
> 
> 赞同：1
> 
> 时间：2013-02-08T12:56:16.950
> 
> 标签：asp.net, jquery

我正在开发 asp.net 应用程序。如果在 document.ready 中选中复选框，我有以下 jquery 代码来关注文本框。复选框已选中，但文本框未获得焦点

```
 $('#isUniquePassword').is(':checked') ? $("#UniquePassword").show() : $("#UniquePassword").hide();
            if ($('#isUniquePassword').is(':checked')) {
                alert($('#isUniquePassword').is(':checked'));
                $("#UniquePassword").focus();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:48:06.913

**建议：**你可以试试这个：

```
$('#isUniquePassword').attr('checked') ? $("#UniquePassword").show() : $("#UniquePassword").hide();
            if ($('#isUniquePassword').is(':checked')) {
                alert($('#isUniquePassword').is(':checked'));
                $("#UniquePassword").focus();
            } 
```

* * *

或者

```
 $('#isUniquePassword').prop("checked") 
```

# performance - 如果经常调用一个函数，使用持久变量是否比通过 zeros() 重新分配每个函数调用的内存更快？

> ID：14773083
> 
> 赞同：1
> 
> 时间：2013-02-08T12:56:17.887
> 
> 标签：performance, matlab

假设我有一个经常被调用的函数，比如由 ODE 求解器或类似函数。使用持久变量是否比每次重新分配更快？也就是说，哪个功能会更快，最佳实践是什么？

```
function ret=thisfunction(a,b,c)
  A = zeros(3)
  foo = 3;
  bar = 34;
  % ...
  % process some in A
  % ...
  ret = A\c;
end 
```

或者

```
function ret=thatfunction(a,b,c)
  persistent A foo bar
  if isempty(A); 
    A=zeros(3); 
    foo = 3;
    bar = 34;
  end
  % ...
  % process some in A
  % ...
  ret = A\c;
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:06:03.637

哪个更快只能通过测试来证明，因为它可能取决于变量大小等。但是，我会说如果不需要，通常也不建议使用持久变量。

因此，我绝对建议您使用选项一。

* * *

旁注：您可能想检查它是否存在而不是它是否为空。此外，当您离开函数范围时，我不知道您的 A 会发生什么情况，如果您想将其定义为持久性或全局性，您可能需要将其提高一级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:21:33.573

当你有一个像这样的函数要测试时，我发现设置一个父函数非常容易，运行你正在测试的函数，比如 1000 万次并计算结果。然后考虑时间差异以及在此处使用持久变量的可能折衷或副作用。如果差异是超过 1000 万次调用的几个百分点，而您实际上只会在应用程序中调用该函数 10000 次，那么这可能不值得。YMMV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T23:10:46.890

关于最佳实践，我会劝阻您不要以这种方式使用持久变量，原因有两个。

持久变量可以在外部清除，例如从路径上具有“thatfunction”的任何其他函数运行 clear('thatfunction') 将重置“thatfunction”中的持久变量。因此，它们可能会在其他地方不知不觉地被重置。在这种情况下，这对您来说可能不是问题，但是如果您想在函数调用之间保留结果（这是持久变量的主要点），这可能会让您头疼。

Also, if you modify them, you'll have to remember to clear them when you're done running in-order to reset your workspace to a clean state. Otherwise if you (or someone else) runs your program again without clearing your persitent variable(s) first, the results from the previous run. This isn't an issue if they're read-only, but you cannot enforce that they will be.

# iphone - 我有一个按钮和一个手势识别，当按下按钮时，应该只调用一种方法

> ID：14773088
> 
> 赞同：0
> 
> 时间：2013-02-08T12:56:46.097
> 
> 标签：iphone, ios6, uibutton, xcode4.5, uigesturerecognizer

我有一个按钮和一个手势识别，当按下按钮时，应该只调用一个方法。

大多数情况下，只有手势识别被调用，这很好，但每次没有，然后按钮被调用，这会导致问题。

我有一个视图，然后是一个滚动视图。我所有的按钮都在滚动视图上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:02:37.037

您可以在视图控制器中实现它并将其分配给手势识别器的委托。

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
    CGPoint p = [gestureRecognizer locationInView:self.view];
    UIView *view = [sefl.view hitTest:p withEvent:nil];
    if ([view isKindOfClass:[UIButton class]]) {
        return NO;
    }
    return YES;
} 
```

或者如果不适合，您可以`- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch`使用类似的逻辑来实现。`gestureRecognizerShouldBegin:`

# c# - 正则表达式处理

> ID：14773089
> 
> 赞同：0
> 
> 时间：2013-02-08T12:56:48.823
> 
> 标签：c#, regex, expression

我想写一个可以匹配以下字符串的正则表达式：

```
OFF
ON
String
Valve 
```

我在想写`^(?<arrivingString>[a-zA-Z]{?})$`。

现在我不知道在大括号内写什么，因为到达字符串的值是不同的且随机的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:06:45.453

```
^(?<arrivingString>(OFF|ON|String|Valve)).* 
```

这匹配仅提供的这 4 个单词：

*   为 Regex 启用了 Mutiline
*   单词在每一行的开头

如果它以这 4 个字符串中的任何一个开头，则此 Regex 将完整匹配每一行。捕获的组`arrivingString`将包含找到的四个单词中的任何一个。

# jquery - . 用 jquery 改变表单

> ID：14773101
> 
> 赞同：0
> 
> 时间：2013-02-08T12:57:18.547
> 
> 标签：jquery

我正在尝试用 jquery 更改表单，但我不能做我想做的事......

我有一个带有产品列表的表格。每个产品都有一个`input type="number"`数量和第二个百分比输入。

当用户更改输入时，每个产品的价格在 jquery 中计算：`$('#products input').on('change', function(){ ... });`

它运作良好。

但是在我的表单底部，我还有另外两个`input type="number"`数量和百分比，当用户更改此输入时，产品数量（或百分比）的所有输入都会更改。但是`.on('change')`我的表格上没有激活，所以价格没有实现。

我迷路了...我正在寻找触发器，但它没有运行。

如果有人看到解决方案...

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:59:58.540

尝试这个：

```
$('#products input').on('change', function(){
    $(this).parents('form').trigger('change');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:00:09.787

您应该绑定关键事件：

```
.on('keypress', function(){}); 
```

# android - 如何通过触摸唤醒 Android（不使用电源按钮）？

> ID：14773104
> 
> 赞同：0
> 
> 时间：2013-02-08T12:57:29.933
> 
> 标签：android

如何通过触摸屏幕而不是电源按钮唤醒 Android？

我发现可以使用带有 AccessibilityService 的 PowerManager，但也许还有更简单的解决方案。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T05:01:14.150

如果您的设备有接近传感器，您可以安装通过触摸接近传感器唤醒屏幕的服务。在 Google Play 中简单搜索“唤醒、接近”字样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:11:35.493

> 如何通过触摸屏幕而不是电源按钮唤醒 Android？

这是不可能的。

> 我发现可以使用带有 AccessibilityService 的 PowerManager

不，它不能。大概参考`PowerManager`，您的意思是使用 a `WakeLock`，在这种情况下，根据定义，设备没有处于睡眠状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:42:24.977

取决于您的手机 - infuse 4g 刚刚在 cm10.1 下引入了这个

# solr - Solr 数据配置：关于 TF-IDF 的字段问题

> ID：14773110
> 
> 赞同：1
> 
> 时间：2013-02-08T12:58:01.117
> 
> 标签：solr, indexing, tf-idf

我们在数据配置中使用 solr 1.4（我知道我知道，可悲:)）

```
<!-- Snippet -->
<field column="description" stripHTML="true" stored="false" indexed="false"/> 
```

是否仍会使用“描述”数据来计算“分数/tf-idf”值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:19:53.603

没有。该字段应标记为索引为真，以便能够在相关性评分中使用。IE`indexed=true`

> indexed=true|false
> True - 如果该字段应该被“索引”。如果（且仅当）一个字段被索引，那么它是**可搜索**的、可排序的和可分面的。

# php - php上传文件到文件夹

> ID：14773116
> 
> 赞同：0
> 
> 时间：2013-02-08T12:58:18.720
> 
> 标签：php, mysql

我正在尝试使用 php 将多个图像上传到文件夹中。该代码可以打印出文件名，这意味着我得到了文件，但现在它没有上传它们并且我没有收到错误：下面是我的代码

```
<?php 
    $target = "image_uploads/";
    if(isset($_FILES['FILE_NAME'])){
        foreach($_FILES['FILE_NAME']['tmp_name']as $key => $error ){
           print_r($key);
           $file_upload = $key.$_FILES['FILE_NAME']['name'][$key];
           #print image names
           echo $file_upload.'</br>';
          move_uploaded_file($file_upload,$target);    
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:03:28.720

在目标中，您也必须提供文件名。请使用下面的代码，

```
$target = "image_uploads/";
if(isset($_FILES['FILE_NAME'])){
    foreach($_FILES['FILE_NAME']['tmp_name'] as $key => $error ){
        print_r($key);
        $file_upload = $key.$_FILES['FILE_NAME']['name'][$key];
        print image names
        echo $file_upload.'</br>';
        move_uploaded_file($file_upload,$target.$_FILES['FILE_NAME']['name']);    
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:09:29.553

我认为问题出在 foreach 循环中。

```
foreach ($_FILES['FILE_NAME']['tmp_name'] as $key => $val) {
    // this loops through the tmp_name of $_FILES['FILE_NAME']
    // which is a string
} 
```

我认为您的意思是：

```
foreach ($_FILES as $index => $fileArray) {
    $tmpName = $fileArray['tmp_name'];
    echo "File at key $index is temporarily uploaded at $tmpName";
} 
```

上面的代码将遍历所有上传的文件并打印它的当前文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:02:16.497

您的目标文件夹可能不可写。

我还认为，您没有收到错误的原因是，您有以下情况：

```
print_r($key); 
```

你应该有：

```
print_r($error); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:15:04.233

这可能有多种原因：

1.  在尝试将文件从临时位置移动到目标之前，目标文件夹必须存在，并且还必须是可写的

2.  move_uploaded_file 将第二个参数作为文件名，后跟目录名，因此它可以是：目标文件夹/user.file.name.ext

3.  如果您要上传多个文件，则必须访问 $_FILES，如链接所示：http: [//php.net/manual/en/features.file-upload.multiple.php](http://php.net/manual/en/features.file-upload.multiple.php)

4.  对于您可能遇到的 php 错误消息，这里有一个列表： http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

# c++ - 结构和模板

> ID：14773121
> 
> 赞同：-1
> 
> 时间：2013-02-08T12:58:39.223
> 
> 标签：c++

```
template <class T>
struct ListItem
{
   T value;
   ListItem<T> *next;
   ListItem<T> *prev;

   ListItem(T theVal)
   {
    this->value = theVal;
    this->next = NULL;
    this->prev = NULL;
   }
}; 
```

有人可以告诉我在声明 prev 指针后发生了什么。我的意思是它是什么样的结构？对不起，问什么可能是一个愚蠢的问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:05:43.840

```
ListItem(T theVal)
{
  this->value = theVal;
  this->next = NULL;
  this->prev = NULL;
} 
```

是一个内联构造函数定义。它指定如何`ListItem`初始化类模板的实例。`value`数据成员设置为，`theVal`列表`next`和`prev`指针设置为`NULL`。你会调用这样的构造函数

```
ListItem<int> li(42); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:05:04.717

```
ListItem(T theVal)
{
    this->value = theVal;
    this->next = NULL;
    this->prev = NULL;
} 
```

这是此结构的构造函数，`this->value = theVal;`将作为参数传入的值分配给结构的成员`value`。

如果您还不了解构造函数，那么阅读它们是明智的。

# c# - Family.Show 之后有什么新变化？

> ID：14773123
> 
> 赞同：1
> 
> 时间：2013-02-08T12:59:02.957
> 
> 标签：c#, wpf

我对 WPF 比较陌生，一直在看[Family.Show](http://familyshow.codeplex.com/)。它看起来像是一个很棒的参考应用程序，但它自 2009 年 2 月以来一直没有更新。当我查看这段代码时，这里是否有任何过时的技术或我应该注意的平台改进？

[编辑] 我收到了很多关于 PRISM 和 MVVM 的回复。我现在可以看到这个问题是如何不清楚的。Family.Show 是少数几个我认为看起来真的很不错的 WPF 应用程序的 WPF 应用程序之一。我想将其用作模型，但担心他们使用的 XAML 和控件可能已被更新的元素替换。有人会在这方面给我一些指导吗？

[编辑] 我应该提到我几乎完整地阅读了 WPF 4，但没有太多实际编写 WPF 应用程序的经验，我不容易在 Family.Show 之类的东西中发现旧的或过时的技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:14:01.743

我认为 Prism 是构建企业（更大）应用程序的一个非常好的框架，但乍一看它可能有点困难。如果您是 WPF 新手，但想更好地了解 WPF 和 MVVM，请查看[http://caliburnmicro.codeplex.com/](http://caliburnmicro.codeplex.com/)或[http://waf.codeplex.com/](http://waf.codeplex.com/)。（有了它们，理解原理会更容易一些。）你也可以获得源代码，它是一个很好的文档，所以你可以学到很多东西。

我认为作为 WPF 开发人员熟悉 MVVM 原则很重要。我也可以建议您观看 MIX 会议的以下两个视频：

[http://channel9.msdn.com/events/MIX/MIX10/EX14](http://channel9.msdn.com/events/MIX/MIX10/EX14)

[http://channel9.msdn.com/events/MIX/MIX11/OPN03](http://channel9.msdn.com/events/MIX/MIX11/OPN03)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:10:15.740

在 WPF 方面，自 2009 年以来变化不大。
仍然存在 DataTemplates、Styles、Data binding 等。它们的使用方式与当时的使用方式相同。

在当前版本的 .NET 框架中，还有一些开箱即用的控件，因此您可能会在该示例中发现一些不再需要的用户控件。但是，据我所知，现有的控件并没有改变。

但是，该应用程序没有使用 MVVM，我个人认为这是一个很大的缺点。
因此，您可以将应用程序用作学习 WPF 的一种手段，但您不应该在自己的应用程序中熟练使用它的架构风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:01:28.993

我会看看[prism](http://msdn.microsoft.com/en-us/library/gg406140.aspx) - 它是构建 WPF 应用程序的好方法。

# c++ - 原始类型指针之间的转换

> ID：14773127
> 
> 赞同：5
> 
> 时间：2013-02-08T12:59:11.803
> 
> 标签：c++, language-lawyer, strict-aliasing

以下是明确定义的：

```
char* charPtr = new char[42];
int* intPtr = (int*)charPtr;

charPtr++;
intPtr = (int*) charPtr; 
```

未`intPtr`正确对齐（至少在两种情况下的一种）。放在那里是违法的吗？UB 在任何阶段都在使用它吗？你怎么能用它，你怎么不能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:20:53.467

`int`通常，如果 的对齐要求大于的对齐要求，则结果未指定（5.2.10p7）`char`，通常情况下。结果将是该类型的有效值，`int *`因此它可以打印为带有`operator<<`或转换为的指针`intptr_t`。

因为结果有一个未指定的值，除非由实现指定，否则间接它并对结果`int`左值执行左值到右值转换是未定义的行为（在未评估的上下文中除外）。转换回`char *`不一定是往返。

但是，如果原始数据`char *`本身是 from 转换的结果`int *`，则转换 to`int *`算作往返的后半部分；在这种情况下，演员表被定义。

特别是，在上面`char *`是表达式的结果的情况下`new[]`，我们保证（5.3.4p10）`char *`指针适当地对齐`int`，只要`sizeof(int) <= 42`。因为`new[]`表达式从分配函数中获取存储空间，所以适用 3.7.4.1p2；`void *`指针*可以转换为具有基本对齐要求的任何完整对象类型的指针，然后用于访问对象[...]*，这强烈暗示，连同对 5.3.4p10 的注释，`char *`指针同样适用由`new[]`表达式返回。在这种情况下，`int *`是指向未初始化的指针`int`对象，因此对其间接执行左值到右值的转换是未定义的（3.8p6），但分配给它的间接是完全定义的。该`int`对象*位于分配的存储空间中*（3.7.4.1p2），因此将其转换`int *`回`char *`将产生每 1.8p6 的原始值。这不适用于递增的`char *`指针，除非`sizeof(int) == 1`它不是`int`对象的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:25:27.300

首先，当然：指针保证在第一种情况下对齐（根据 §5.3.4/10 和 §3.7.4.1/2），并且在两种情况下都可以正确对齐。（显然，如果`sizeof(int) == 1`，但即使不是这种情况，实现也不一定有对齐要求。）

并且说清楚：你的演员都是`reinterpret_cast`.

除此之外，这是一个有趣的问题，因为据我所知，就标准而言，两种演员阵容没有区别。转换结果未指定（根据 §5.2.10/7）；您甚至不能保证将其转换回 a`char*`会产生原始值。（例如，它显然不会在`int*`小于 a 的机器上`char*`。）

当然，在实践中：标准要求 的返回值与`new char[N]`可能适合它的任何值充分对齐，因此您可以保证能够做到：

```
intPtr = new (charPtr) int; 
```

`int`鉴于默认构造函数是无操作的，这与您的演员阵容完全相同。（并假设 `sizeof(int) <= 42`。）所以很难想象第一部分失败的实现。您应该可以 `intPtr`像使用任何其他合法获得`intPtr`的 . 将其转换回 a`char*`会以某种方式导致与原始值不同的想法`char*`似乎很荒谬。

在第二部分中，所有的赌注都没有了：你绝对不能取消引用指针（除非你的实现另有保证），而且将它转换回`char*`结果也很可能会产生不同的结果。（例如，想象一个字寻址的机器，将 a 转换为`char*`向上 舍入。然后转换回来将`int*`导致 a高于原始值。或者尝试转换未对齐的指针总是导致空指针。）`char*``sizeof(int)`

# .net - 如何规范化字符串？

> ID：14773128
> 
> 赞同：10
> 
> 时间：2013-02-08T12:59:13.597
> 
> 标签：.net, string, unicode, windows-store-apps, unicode-normalization

[`String.Normalize()`](http://msdn.microsoft.com/en-us/library/ebza6ck1.aspx)在 .NET 中，您可以使用 枚举来规范化（NFC、NFD、NFKC、NFKD）字符串[`Text.NormalizationForm`](http://msdn.microsoft.com/en-us/library/system.text.normalizationform.aspx)。

在 .NET for Windows Store Apps 中，两者都不可用。我查看了`String`类和`System.Text`and`System.Globalization`命名空间，但什么也没找到。

我错过了什么吗？如何规范化 Windows 应用商店应用程序中的字符串？

有谁知道为什么该`Normalize`方法不适用于商店应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T20:24:10.187

正如您所指出的，该[`Normalize`方法](http://msdn.microsoft.com/en-us/library/system.string.normalize.aspx)在 Windows 商店应用程序的[`String`类](http://msdn.microsoft.com/en-us/library/system.string.aspx)中不可用。

但是，这只是调用Windows API 中的[`NormalizeString`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319093)。

更好的是，这个函数[在 Windows 应用商店应用程序中可用的 Win32 和 COM API 函数的批准列表中](http://msdn.microsoft.com/en-us/library/windows/apps/hh452772)。

也就是说，您将做出以下声明：

```
public enum NORM_FORM 
{ 
  NormalizationOther  = 0,
  NormalizationC      = 0x1,
  NormalizationD      = 0x2,
  NormalizationKC     = 0x5,
  NormalizationKD     = 0x6
};

[DllImport("Normaliz.dll", CharSet = CharSet.Unicode, ExactSpelling = true,
    SetLastError = true)
public static extern int NormalizeString(NORM_FORM NormForm,
    string lpSrcString,
    int cwSrcLength,
    StringBuilder lpDstString,
    int cwDstLength); 
```

然后你会这样称呼它：

```
// The form.
NORM_FORM form = ...;

// String to normalize.
string unnormalized = "...";

// Get the buffer required.
int bufferSize = 
    NormalizeString(form, unnormalized, unnormalized.Length, null, 0);

// Allocate the buffer.
var buffer = new StringBuilder(bufferSize);

// Normalize.
NormalizeString(form, unnormalized, unnormalized.Length, buffer, buffer.Length);

// Check for and act on errors if you want.
int error = Marshal.GetLastWin32Error(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T08:16:29.523

您好，这是我的工作代码，我不需要修剪字符串终止字符，因为不存在，但我这样做是为了以防万一。

通过使用 -1 而不是指定的长度，我让它自动查找字符串终止符，这是我可以让它在 WinRT/WinPhoneRT 平台目标中正常工作的唯一方法

```
 int bufferSize = NormalizeString(Globals.NORM_FORM.NormalizationKD, toNormalise, -1, null, 0);

        StringBuilder buffer = new StringBuilder(bufferSize);

        // Normalize.
        NormalizeString(Globals.NORM_FORM.NormalizationKD, toNormalise, -1, buffer, buffer.Capacity);

        // Check for and act on errors if you want.
        int error = Marshal.GetLastWin32Error();

        if(error !=0)
        {
            throw (new Exception("A Win32 error with code " + error + " has occured in unmanaged NormalizeString"));
        }
        char[] trim = {'\0'};

        return buffer.ToString().TrimEnd(trim); 
```

# javascript - 使用 javaScript 从 xml 列表中加载特定元素的 xml 数据

> ID：14773129
> 
> 赞同：0
> 
> 时间：2013-02-08T12:59:18.277
> 
> 标签：javascript, html, xml

我希望有人知道如何帮助我解决这个问题，我是 javaScript 和 XML 的新手。基本上我有带有产品列表的 xml 文件，我已经设法将数据动态加载到我的 html 页面中的 ul li 列表中，li 元素有标题和图像，现在我需要能够点击这个 li 元素并将特定产品的剩余数据加载到新页面（或 div）中。我收到“未捕获的 ReferenceError：我未定义”我的问题是如何在单击产品列表中的特定产品后加载正确的剩余数据。（我希望我的解释足够清楚）这是我的代码，第一个函数在 html 页面中生成 ul li 列表，displayPRInfo() 函数应该将数据加载到任何被点击的产品的 showPrInfo div 中。

请帮助我，任何帮助表示赞赏，感谢阅读。

```
function loadProducts() {
var liOpen=("<li onclick='displayPRInfo(" + i + ")'><p>");
      var divOpen=("</p><div class='prod-sq-img'>");  
      var closingTags=("</div></li>");
    var txt;
    var image;
    var title;

    var x=xmlDoc.getElementsByTagName("product");
    for (i=0;i<x.length;i++)
      { 
      title=(x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
      image=(x[i].getElementsByTagName("imgfile")[0].childNodes[0].nodeValue);
      txt=  liOpen +  title + divOpen + image + closingTags ;
      document.getElementById("ulList").innerHTML+=txt;
      }

    }
        function displayPRInfo(i)
{
title=(x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
euPriceRet=(x[i].getElementsByTagName("euror")[0].childNodes[0].nodeValue);
euPriceTrade=(x[i].getElementsByTagName("eurot")[0].childNodes[0].nodeValue);
euPriceSet=(x[i].getElementsByTagName("eset")[0].childNodes[0].nodeValue);
minimumQuantity=(x[i].getElementsByTagName("mqty")[0].childNodes[0].nodeValue);
description=(x[i].getElementsByTagName("desc")[0].childNodes[0].nodeValue);
prBigImg=(x[i].getElementsByTagName("pimgfile")[0].childNodes[0].nodeValue);
prInfo=title+"<br>"+euPriceRet+"<br>"+euPriceTrade+"<br> "+euPriceSet+"<br> "+minimumQuantity+"<br>"+description+"<br>"+ prBigImg ;
document.getElementById("showPrInfo").innerHTML=prInfo;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:04:08.343

我还没有尝试过整个脚本，但肯定你必须移动它：

```
liOpen=("<li onclick='displayPRInfo(" + i + ")'><p>") 
```

进入for循环

```
for (i=0; i<x.length; i++) { 
    title=(x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
    image=(x[i].getElementsByTagName("imgfile")[0].childNodes[0].nodeValue);
    liOpen=("<li onclick='displayPRInfo(" + i + ")'><p>");
    txt=  liOpen +  title + divOpen + image + closingTags ;
    document.getElementById("ulList").innerHTML+=txt;
} 
```

实际`i`定义的地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:14:41.673

您可以使用 jQuery 来操作 xml 并设置 onclick 事件。

```
function loadProducts() {
    var products = $(xmlDoc).find('product');

    for (var i = 0; i < products.length; i++) {
      $('#ulList').append('<li id="product_' + i + '"><p>' + $(products[i]).find('title').text() + '</p><div class="prod-sq-img">' + $(products[i]).find('imgfile').text() + '</div></li>');
      $('#product_' + i).click(displayPRInfo.bind($('#product_' + i), products[i]));
    }
 }

function displayPRInfo(xmlProduct) {
  var title= $(xmlProduct).find('title).text();
  var euPriceRet = $(xmlProduct).find('euror').text();
  var euPriceTrade = $(xmlProduct).find('eurot').text();
  var euPriceSet = $(xmlProduct).find('eset').text();
  var minimumQuantity = $(xmlProduct).find('mqty').text();
  var description = $(xmlProduct).find('desc').text();
  var prBigImg = $(xmlProduct).find('pimgfile').text();
  var prInfo = title+"<br>"+euPriceRet+"<br>"+euPriceTrade+"<br> "+euPriceSet+"<br> "+minimumQuantity+"<br>"+description+"<br>"+ prBigImg ;
  $('#showPrInfo').html(prInfo);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-28T19:25:19.893

我发现了这个，它对我有点帮助，问题是我想按请求加载图像，而不是一次加载它们，而是通过单击一个按钮并使用 xml 数据设置 img src，我有这个......

```
 <!doctype html>
<html lang="es">

<head>
    <style>
        #iosslider_nav {
            height: 13px;
            right: 10px;
            /* align right side */
            /*left: 10px;*/
            /* align left side */

            bottom: 10px;
            /*position: absolute;*/
            /* set if needed */
            /*margin-top: 10px;*/
            /* remove if position is absolute */
        }

        #iosslider_nav .btn {
            width: 13px;
            height: 13px;
            background: #eaeaea;
            margin: 0 5px 0 0;
            -webkit-border-radius: 100%;
            -moz-border-radius: 100%;
            border-radius: 100%;
            cursor: pointer;
            float: left;
            /* ie 7/8 fix */

            background: url('../images/bull_off.png') no-repeat\9;
        }
    </style>
</head>

<body>
    <div id="ninja_slider"></div>
    <div id="iosslider_nav"></div>

    <script type="text/javascript" src="jquery-1.9.1.min.js"></script>

    <script type="text/javascript">
        var xmlDoc = loadXMLDoc("xml/xml_data.xml");

        // generic load xml data function
        function loadXMLDoc(filename) {
            if (window.XMLHttpRequest) {
                xhttp = new XMLHttpRequest();
            } else { // code for IE5 and IE6
                xhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xhttp.open("GET", filename, false);
            xhttp.send();
            return xhttp.responseXML;
        }

        set_slider();
        //set_navigation('xml/xml_data.xml', 'iosslider_nav');

        function set_slider() {
            var item_div = $(xmlDoc).find('desk');
            var item_btn = $(xmlDoc).find('desk');
            var item_img = $(xmlDoc).find('desk');

            // Object.bind() handler for ie 7/8
            if (!Function.prototype.bind) {
                Function.prototype.bind = function (oThis) {
                    if (typeof this !== 'function') {
                        // closest thing possible to the ECMAScript 5
                        // internal IsCallable function
                        throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
                    }
                    var aArgs = Array.prototype.slice.call(arguments, 1),
                        fToBind = this,
                        fNOP = function () {},
                        fBound = function () {
                            return fToBind.apply(this instanceof fNOP && oThis ? this : oThis,
                                aArgs.concat(Array.prototype.slice.call(arguments)));
                        };
                    fNOP.prototype = this.prototype;
                    fBound.prototype = new fNOP();
                    return fBound;
                };
            }

            // create main div's
            for (var i = 0; i < item_div.length; i++) {
                $('#ninja_slider').append('<div id="item_div' + i + '"><a href="javascript:void(0);" class="item_anchor"><img id="item_img' + i + '" src="" class="ninja_item"></a></div>');
                $('#item_div' + i).on('click', load_current.bind($('#item_div' + i), item_div[i]));
            }

            // load first element
            $('#ninja_slider #item_div0 .item_anchor img').attr('src', $(item_img[0]).find('image').text());

            // create nav div's
            for (var i = 0; i < item_btn.length; i++) {
                $('#iosslider_nav').append('<div id="item_btn' + i + '" class="btn"></div>');
                $('#item_btn' + i).on('click', load_current.bind($('#item_btn' + i), item_btn[i]));
            }
        }

        function load_current(xmlData) {
            var image = $(xmlData).find('image').text();
            var src = image;
            //console.log(image);
            var item_img = $(xmlDoc).find('desk');
            for (var i = 0; i < item_img.length; i++) {
                $('#ninja_slider').append('<div id="item_div' + i + '"><a href="javascript:void(0);" class="item_anchor"><img id="item_img' + i + '" src="' + $(item_img[i]).find('image').text() + '" class="ninja_item"></a></div>');
            }
        }

        function set_navigation(url, id) {
            $.ajax({
                url: url,
                async: false,
                type: "GET",
                data: "xml",
                success: function (xml) {
                    $(xml).find("desk").each(function () {
                        var item_nav = document.getElementById(id),
                            click_item = document.createElement("div");

                        item_nav.appendChild(click_item);
                        click_item.className = click_item.className + "btn";
                    });
                }
            });
        }
    </script>
</body>

</html> 
```

希望这是有道理的...

# spring - NoClassDefFoundError org/apache/poi/xssf/usermodel/XSSFWorkbook

> ID：14773134
> 
> 赞同：1
> 
> 时间：2013-02-08T12:59:35.660
> 
> 标签：spring

我正在使用 Spring Web 框架来读取 Excel 文件并显示它。当我使用 Tomcat 进行部署时，我遇到了这个异常。我已包含 (poi, ooxml) 3.9 版 jar 文件。

**例外**

> HTTP 状态 500 - 处理程序处理失败；嵌套异常是 java.lang.NoClassDefFoundError: org/apache/poi/xssf/usermodel/XSSFWorkbook
> 
> 类型异常报告
> 
> 消息处理程序处理失败；嵌套异常是 java.lang.NoClassDefFoundError: org/apache/poi/xssf/usermodel/XSSFWorkbook
> 
> 描述 服务器遇到一个内部错误，阻止它完成这个请求。
> 
> 例外
> 
> org.springframework.web.util.NestedServletException：处理程序处理失败；嵌套异常是 java.lang.NoClassDefFoundError: org/apache/poi/xssf/usermodel/XSSFWorkbook org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:972) org.springframework.web.servlet.DispatcherServlet.doService( DispatcherServlet.java:852) org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) javax.servlet.http.HttpServlet。服务(HttpServlet.java:621) javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
> 
> 根本原因
> 
> java.lang.NoClassDefFoundError: org/apache/poi/xssf/usermodel/XSSFWorkbook ExcelReader.constructObject(ExcelReader.java:42) ExcelReportController.handleRequestInternal(ExcelReportController.java:32) org.springframework.web.servlet.mvc.AbstractController.handleRequest (AbstractController.java:153) org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48) org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923) org.springframework.web .servlet.DispatcherServlet.doService(DispatcherServlet.java:852) org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) javax .servlet.http.HttpServlet。服务(HttpServlet.java:621) javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
> 
> note Apache Tomcat/7.0.33 日志中提供了根本原因的完整堆栈跟踪。

# r - 使用 R 包 Brobdingnag 查找相等的 brob 编号

> ID：14773136
> 
> 赞同：0
> 
> 时间：2013-02-08T12:59:36.577
> 
> 标签：r

我试图找出两个类 brob 的数量何时相等，但我想这不起作用，因为存储在这些数字中的精度未显示。例如，我有两个数字：

```
a= 634.7984
b= 641.71

library(Brobdingnag)
a_brob = as.brob(exp(1))^a = +exp(634.8)
b_brob = as.brob(exp(1))^b*0.001 = +exp(634.8) 
```

我想在这种情况下输出 TRUE：

```
 a_brob==b_brob
>[1] FALSE 
```

但我得到了 FALSE。我也尝试使用“数字”或双精度或舍入它们，但没有任何效果。你能帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:19:03.030

我认为你得到 FALSE 是因为你的 brobs 不相等，如果它们以相同的数字打印。

用`dput`来看这个：

```
> library(Brobdingnag)
> (a_brob <- as.brob(exp(1))^a )
[1] +exp(634.8)
> (b_brob <- as.brob(exp(1))^b*0.001)
[1] +exp(634.8)
> (dput(a_brob))
new("brob"
    , x = 634.7984
    , positive = TRUE
)
NULL
> (dput(b_brob))
new("brob"
    , x = 634.802244721018
    , positive = TRUE
)
NULL 
```

# c++ - 当通过 C/C++ 中的双精度传输时，是否保证保留浮点数？

> ID：14773142
> 
> 赞同：36
> 
> 时间：2013-02-08T13:00:04.420
> 
> 标签：c++, c, floating-point, double, ieee-754

假设符合[IEEE-754 标准](http://en.wikipedia.org/wiki/IEEE_floating_point)，浮点数在通过双精度传输时是否可以保证保留？

换句话说，以下断言是否总是被满足？

```
int main()
{
    float f = some_random_float();
    assert(f == (float)(double)f);
} 
```

假设`f`可以获取 IEEE 定义的任何特殊值，例如 NaN 和 Infinity。

根据 IEEE 的说法，是否存在满足断言的情况，但在通过 double 传输后不保留确切的位级表示？

代码片段在 C 和 C++ 中均有效。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-08T13:20:12.447

你甚至不需要假设 IEEE。C89 在 3.1.2.5 中说：

> 类型的值集是类型`float`值集的子集`double`

并且所有其他 C 和 C++ 标准都表示相同的内容。据我所知，NaN 和无穷大是“类型的值`float`”，尽管在用作操作数时具有一些特殊情况规则的值。

float -> double -> float 转换恢复了以下的原始值`float`（通常），这是因为数字转换都保留了在目标类型中可表示的值。

位级表示是一个稍微不同的问题。想象一下，有一个值，`float`它有两种不同的按位表示。那么 C 标准中的任何内容都不会阻止 float -> double -> float 转换从一个转换到另一个。在 IEEE 中，除非有填充位，否则“实际值”不会发生这种情况，但我不知道 IEEE 是否排除了具有不同按位表示的单个 NaN。无论如何，NaN 不会与自己比较，因此除了可能将它们转换为字符串之外，也没有标准的方法来判断两个 NaN 是“相同的 NaN”还是“不同的 NaN”。这个问题可能没有实际意义。

需要注意的一件事是编译器的不一致模式，其中它们将超精确值“隐藏”在其中，例如留在浮点寄存器中的中间结果并在不进行舍入的情况下重复使用。我认为这不会导致您的示例代码失败，但是一旦您进行浮点运算`==`，您就会开始担心这种事情。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-08T13:08:30.860

从 C99 开始：

> 6.3.1.5 实浮点类型
> 1 当float 提升为double 或long double，或double 提升为long double 时，其值不变。
> 2 当 double 降级为 float 时，long double 降级为 double 或 float，或者以比其语义类型（见 6.3.1.8）要求的更高的精度和范围表示的值显式转换为其语义类型，如果被转换的值可以在新类型中精确表示，它是不变的......

我认为，这可以保证 float->double->float 转换将保留原始浮点值。

该标准还定义了宏`INFINITY`和`NAN`in `7.12 Mathematics <math.h>`：

> 4 宏 INFINITY 扩展为浮点类型的常量表达式，表示正或无符号无穷大（如果可用）；否则为在翻译时溢出的浮点类型的正常量。
> 5 当且仅当实现支持浮点类型的静默 NaN 时，才定义宏 NAN。它扩展为一个浮点类型的常量表达式，表示一个安静的 NaN。

因此，对此类特殊值进行了规定，并且转换也可能适用于它们（包括负无穷大和负零）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T23:12:28.310

断言将在刷新为零和/或非规范化为零模式下失败（例如，使用 -mfpmath=sse、-fast-math 等编译的代码，但也会在默认的编译器和架构堆上，例如 Intel 的C++ 编译器）如果 f 是非规范化的。

但是，您不能在该模式下生成非规范化浮点数，但这种情况仍然是可能的：

a) 非规范化浮点数来自外部源。

b) 一些库篡改了 FPU 模式，但在每次调用它后忘记（或故意避免）将它们设置回来，从而使调用者可能不匹配规范化。

打印以下的实际示例：

```
f = 5.87747e-39
f2 = 5.87747e-39

f = 5.87747e-39
f2 = 0
error, f != f2! 
```

该示例适用于 VC2010 和 GCC 4.3，但假设 VC 默认使用 SSE 进行数学运算，而 GCC 使用 FPU 作为默认数学运算。否则，该示例可能无法说明问题。

```
#include <limits>
#include <iostream>
#include <cmath>

#ifdef _MSC_VER
#include <xmmintrin.h>
#endif

template <class T>bool normal(T t)
{
    return (t != 0 || fabsf( t ) >= std::numeric_limits<T>::min());
}

void csr_flush_to_zero()
{
#ifdef _MSC_VER
    _MM_SET_FLUSH_ZERO_MODE(_MM_FLUSH_ZERO_ON);
#else
    unsigned csr = __builtin_ia32_stmxcsr();
    csr |= (1 << 15);
    __builtin_ia32_ldmxcsr(csr);
#endif
}

void test_cast(float f) 
{
    std::cout << "f = " << f << "\n";
    double d = double(f);
    float f2 = float(d);
    std::cout << "f2 = " << f2 << "\n";

    if(f != f2)
        std::cout << "error, f != f2!\n";

    std::cout << "\n";
}

int main()
{
    float f = std::numeric_limits<float>::min() / 2.0;

    test_cast(f);
    csr_flush_to_zero();
    test_cast(f);
} 
```

# asp.net-mvc-4 - 如何在 MVC 4 ActionLink 中加密查询字符串 ID

> ID：14773148
> 
> 赞同：8
> 
> 时间：2013-02-08T13:00:16.433
> 
> 标签：asp.net-mvc-4

如何将加密的 id 传递给`ActionLink`. 这是我写在我的`view`：

```
@model IEnumerable<forumAPP.tblTechnology>
@foreach (var item in Model)
{
string techName=item.TechName;
@Html.ActionLink(techName, "Details","Home", new { TopicID = item.TechID },null) // Here I would like to encrypt the TopicID
<br />
<br />
@Html.DisplayFor(modelItem => item.TechDesc)
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T14:13:33.340

以下是一些可用于编码/解码的简单方法。编码值不安全，如您所见，解码它是微不足道的。如果您的目标是混淆 id，这将起作用。如果你需要*保护*它，你应该采取不同的方法。

```
public string Encode( string encodeMe )
{
    byte[] encoded = System.Text.Encoding.UTF8.GetBytes( encodeMe );
    return Convert.ToBase64String( encoded );
}

public static string Decode( string decodeMe )
{
    byte[] encoded = Convert.FromBase64String( decodeMe );
    return System.Text.Encoding.UTF8.GetString( encoded );
} 
```

因此，您可以将这些方法放在您的控制器中，并使用 viewBag 将编码的 TechId 传递给视图

```
int techId = 1;
var encoded = Encode(id.ToString());
ViewBag.Encoded = encoded; 
```

然后在您的链接中使用它

```
@Html.ActionLink(techName, "Details","Home", new { TopicID = ViewBag.Encoded },null) 
```

（不过，您应该真正考虑使用视图模型。ViewBag 虽然是一种将数据传递给视图的方便且简单的方法，但并不被认为是最佳实践。熟悉视图模型和强类型视图将使您的 mvc 生活变得更加美好将来更容易。更不用说，为那些跟随你的人生成更清洁和更可维护的代码。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-29T10:12:11.247

**添加具有两个类的文件夹**

第 1 类：EncryptedActionParameterAttribute

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Security.Cryptography;
using System.Web;
using System.Web.Mvc;

namespace MVCInvoicClient.Extensions
{
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
    public class EncryptedActionParameterAttribute : ActionFilterAttribute
    {

        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {

            Dictionary<string, object> decryptedParameters = new Dictionary<string, object>();
            if (HttpContext.Current.Request.QueryString.Get("q") != null)
            {
                string encryptedQueryString = HttpContext.Current.Request.QueryString.Get("q");
                string decrptedString = Decrypt(encryptedQueryString.ToString());
                string[] paramsArrs = decrptedString.Split('?');

                for (int i = 0; i < paramsArrs.Length; i++)
                {
                    string[] paramArr = paramsArrs[i].Split('=');
                    decryptedParameters.Add(paramArr[0], Convert.ToInt32(paramArr[1]));
                }
            }
            for (int i = 0; i < decryptedParameters.Count; i++)
            {
                filterContext.ActionParameters[decryptedParameters.Keys.ElementAt(i)] = decryptedParameters.Values.ElementAt(i);
            }
            base.OnActionExecuting(filterContext);

        }

        private string Decrypt(string encryptedText)
        {

                string key = "jdsg432387#";
                byte[] DecryptKey = { };
                byte[] IV = { 55, 34, 87, 64, 87, 195, 54, 21 };
                byte[] inputByte = new byte[encryptedText.Length];

                DecryptKey = System.Text.Encoding.UTF8.GetBytes(key.Substring(0, 8));
                DESCryptoServiceProvider des = new DESCryptoServiceProvider();
                inputByte = Convert.FromBase64String(encryptedText);
                MemoryStream ms = new MemoryStream();
                CryptoStream cs = new CryptoStream(ms, des.CreateDecryptor(DecryptKey, IV), CryptoStreamMode.Write);
                cs.Write(inputByte, 0, inputByte.Length);
                cs.FlushFinalBlock();
                System.Text.Encoding encoding = System.Text.Encoding.UTF8;
                return encoding.GetString(ms.ToArray());
        }

    }
} 
```

第 2 类：MyExtensions

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Security.Cryptography;
using System.Text;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;

namespace MVCInvoicClient.Extensions
{
    public static class MyExtensions
    {
        public static MvcHtmlString EncodedActionLink(this HtmlHelper htmlHelper, string linkText, string actionName, string controllerName, object routeValues, object htmlAttributes)
        {
            string queryString = string.Empty;
            string htmlAttributesString = string.Empty;
            if (routeValues != null)
            {
                RouteValueDictionary d = new RouteValueDictionary(routeValues);
                for (int i = 0; i < d.Keys.Count; i++)
                {
                    if (i > 0)
                    {
                        queryString += "?";
                    }
                    queryString += d.Keys.ElementAt(i) + "=" + d.Values.ElementAt(i);
                }
            }

            if (htmlAttributes != null)
            {
                RouteValueDictionary d = new RouteValueDictionary(htmlAttributes);
                for (int i = 0; i < d.Keys.Count; i++)
                {
                    htmlAttributesString += " " + d.Keys.ElementAt(i) + "=" + d.Values.ElementAt(i);
                }
            }

            //<a href="/Answer?questionId=14">What is Entity Framework??</a>
            StringBuilder ancor = new StringBuilder();
            ancor.Append("<a ");
            if (htmlAttributesString != string.Empty)
            {
                ancor.Append(htmlAttributesString);
            }
            ancor.Append(" href='");
            if (controllerName != string.Empty)
            {
                ancor.Append("/" + controllerName);
            }

            if (actionName != "Index")
            {
                ancor.Append("/" + actionName);
            }
            if (queryString != string.Empty)
            {
                ancor.Append("?q=" + Encrypt(queryString));
            }
            ancor.Append("'");
            ancor.Append(">");
            ancor.Append(linkText);
            ancor.Append("</a>");
            return new MvcHtmlString(ancor.ToString());
        }

        private static string Encrypt(string plainText)
        {
            string key = "jdsg432387#";
            byte[] EncryptKey = { };
            byte[] IV = { 55, 34, 87, 64, 87, 195, 54, 21 };
            EncryptKey = System.Text.Encoding.UTF8.GetBytes(key.Substring(0, 8));
            DESCryptoServiceProvider des = new DESCryptoServiceProvider();
            byte[] inputByte = Encoding.UTF8.GetBytes(plainText);
            MemoryStream mStream = new MemoryStream();
            CryptoStream cStream = new CryptoStream(mStream, des.CreateEncryptor(EncryptKey, IV), CryptoStreamMode.Write);
            cStream.Write(inputByte, 0, inputByte.Length);
            cStream.FlushFinalBlock();
            return Convert.ToBase64String(mStream.ToArray());
        }               
    }
} 
```

**控制器**

```
Add this line above the controller class Example for your Index
 [EncryptedActionParameter] 
```

**在你看来**

```
 @Html.EncodedActionLink("Download Invoice", "FileDownload","DataFiles", new { id = item.DataFilesID }, null) 
```

添加 using 语句

```
@using MVCInvoicClient.Extensions 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T14:24:58.347

我在寻找一种安全的方法时遇到了这个问题。如果其他人希望安全地执行此操作，您可以使用 MvcSerializer（我在 MVC futures 3 项目中找到了它，我不确定它是否包含在 MVC 4 中）。例如：

```
(new MvcSerializer()).Serialize(<Your data here>, SerializationMode.EncryptedAndSigned) 
```

然后扭转这个过程......

```
(new MvcSerializer()).Deserialize(<Serialized data here>, SerializationMode.EncryptedAndSigned) 
```

这很棒，因为它无需任何额外的努力即可对数据进行加密和签名。futures 项目还包括一些属性，可以在模型绑定期间自动执行此操作。

# iphone - 遍历子视图 - 如何访问所有 UI 对象

> ID：14773154
> 
> 赞同：1
> 
> 时间：2013-02-08T13:00:31.290
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我为我的自定义创建了一个 xib 文件，`UIView`并将我的 xib 加载到我的自定义`UIView`中；

```
NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"ProductDetailView" owner:self options:nil];
self = [views objectAtIndex:0]; 
```

我不想将我所有的子视图都定义为 IBOutlets，所以我认为迭代子视图会更合适。

```
 for (id subview in self.subviews) {
            if ([subview isKindOfClass:[UIView class]]) {
                UIView *theView = (UIView*)subview;
                if (theView.tag == 16) {
                    // tag 16 is specific to some UIViews... do stuff
                }
            }
            else if ([subview isKindOfClass:[UILabel class]]) {
                UILabel *theLabel = (UILabel*)subview;

                if (theLabel.tag == 21) {
                    // tag 17 is specific to some UILabels... do stuff
                }
                else
                {
                    // no tag... do stuff 
                }

            }
        } 
```

我认为这会更健壮，但是由于`UILabel`s 是从 s 继承`UIView`的，所以我不能使用这种方法。我知道更改 if 订单可以使其正常工作，但依赖 if 子句的订单感觉不太好

我要问的是，在这种情况下最合乎逻辑的方法是什么？我应该使用`viewWithTag:`函数而不是循环遍历`id`s 和强制转换吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:21:35.587

您可以使用`IBOutletCollection`. 您创建一个 Array of`UILabels`和一个 Array of`UIViews`

```
 @property (strong, nonatomic) IBOutletCollection(UILabel) NSArray *labels;
 @property (strong, nonatomic) IBOutletCollection(UIView) NSArray *views; 
```

您所要做的就是创建`@property`上面的内容，然后在 IB 中将您想要分组的所有标签连接到此集合，就像您对 IBOutlet 一样。当您想遍历它们时：

```
for (UILabel *label in self.labels) {
     NSLog(@"labelTag:%i", label.tag);
     // Do what you want with this label
}

for (UIView *view in self.views) {
     NSLog(@"viewTag:%i", view.tag);
     // Do what you want with this view
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T13:22:27.007

如果要测试对象的*特定*类型，请使用`isMemberOfClass`而不是`isKindOfClass`，它测试对象是否属于指定类**或**继承自指定类。

# asp.net-mvc-3 - SelectListItem 在加载时崩溃

> ID：14773168
> 
> 赞同：2
> 
> 时间：2013-02-08T13:01:24.777
> 
> 标签：asp.net-mvc-3, entity-framework

我正在尝试将 selectList 插入到视图（表单）中。我想我会通过在控制器中填充列表并将其作为视图包发送到视图来实现。这是我到目前为止得到的：

```
var query = from p in db.ProductCategories
                        join pt in db.ProductCategoriesTranslations on p.ProductCategoriesId equals pt.ProductCategoriesId
                        where pt.ProductLanguage.Equals("se")
                        orderby pt.ProductCategoriesName
                        select new SelectListItem
                        {
                            Value = p.ProductCategoriesId.ToString(),
                            Text = pt.ProductCategoriesName
                        };

            ViewBag.ProductCategoriesId = query;
            return View(); 
```

然后在视图中我有：

```
@Html.DropDownList("ProductCategoriesId", String.Empty) 
```

我认为这很简单明了，但是当我加载它时它会崩溃并出现以下错误：

```
LINQ to Entities does not recognize the method 'System.String ToString()' method, and this method cannot be translated into a store expression. 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:03:54.890

您没有使用`ViewBag`您在控制器中创建的属性。

改为这样做：

```
@Html.DropDownList("ProductCategoriesId",
                    ViewBag.ProductCategoriesId as SelectList,
                    string.Empty) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:15:43.810

Linq to SQL 无法转换`ToString()`为任何 SQL 命令。这是可以理解的。您应该在将它们转换为之前执行查询`SelectListItems`（或避免 ToString() 调用）。例如

```
var query = from p in db.ProductCategories
                        join pt in db.ProductCategoriesTranslations on p.ProductCategoriesId equals pt.ProductCategoriesId
                        where pt.ProductLanguage.Equals("se")
                        orderby pt.ProductCategoriesName;
                        select new { Id = p.ProductCategoriesId, Name = pt.ProductCategoriesName };

ViewBag.ProductCategoriesId = query.ToList().Select(p =>         
                        new SelectListItem
                        {
                            Value = p.Id.ToString(),
                            Text = p.Name
                        }); 
```

请注意，Linq2Sql 在您调用`query.ToList()`. 直到此时，没有运行 SQL。

Leniel Macaferi 的回答中描述了另一个问题。

**更新**

因为我的回答之后目标技术发生了变化（问题标签），我也可以建议您采用不同的方法：

您可以使用[SqlFunctions.StringConvert](http://msdn.microsoft.com/en-us/library/dd466166.aspx)而不是`ToString`在您的 LINQ 查询中，EF 可以翻译它。

# android - ActionItem 显示错误

> ID：14773169
> 
> 赞同：0
> 
> 时间：2013-02-08T13:01:24.823
> 
> 标签：android, quickaction

我是一个完整的安卓新手。

我正在尝试快速操作代码。我在stackoverflow上关注 了[http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/) 和 [https://github.com/lorensiuswlt/NewQuickAction3D](https://github.com/lorensiuswlt/NewQuickAction3D) 和@Qberticus代码。

但我坚持基本步骤。ActionItem 在我的代码中不起作用。

我知道我在某个地方出错了，但无法到达哪里。！我应该把这段代码放在哪里？是因为我没有使用 ActionBar 还是其他东西？

非常感谢。:)

[这是代码快照。](http://i.stack.imgur.com/ijujE.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:09:02.850

你可以有一个替代方案。如果它对您的应用程序有帮助，请使用下拉菜单。你要做的就是导入快速操作库。试试看是否有帮助。

# php - 如何从 SoapServer 函数发送发布数据

> ID：14773171
> 
> 赞同：0
> 
> 时间：2013-02-08T13:01:25.687
> 
> 标签：php, post, soap, curl, soapserver

我用一个函数实现了 SoapServer，它应该只转发接收到的带有发布请求的变量并从中获取响应。而不仅仅是返回响应。

无论我尝试什么（curl，file_get_contents，...），我都无法从该函数发出 post 请求 -> 没有任何东西从它发送，但没有错误

我确定我的 curl 代码有效，因为我单独对其进行了测试，并且通常发送了发布请求。所以我的问题是：是否甚至可以从 SoapServer 函数发送请求以及如何发送？

这是我到目前为止所拥有的： 服务器代码：

```
$server = new SoapServer("../wsdl/DohvatiSlobodniTermin.wsdl");

//SERVICE FUNCTIONS:
function GetSlobodniTermini(GetSlobodniTermini $GetSlobodniTermini){
    $mirth_listener=$conf->mirth_url."dohvatislobodnitermin/";

    $data = $GetSlobodniTermini->poruka;

    // use key 'http' even if you send the request to https://...
    //$options = array('http' => array('method'  => 'POST','content' => $data,'header'=> 'Content-Type: text/html\r\n'));
    //$context  = stream_context_create($options);
    //$result = file_get_contents($mirth_listener, false, $context);
    //return $result;

    //set the url, number of POST vars, POST data
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL, $mirth_listener);
    curl_setopt($ch,CURLOPT_POST, true);
    curl_setopt($ch,CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1 );
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/plain'));
    //execute post
    $result = curl_exec($ch);

    //close connection
    curl_close($ch);

    return new GetSlobodniTerminiResponse($result); 
}

ini_set("soap.wsdl_cache_enabled","0");
$server->AddFunction("GetSlobodniTermini");
$server->handle(); 
```

和我的测试客户端代码：

```
$wsdl_link='http://localhost/test/service/dohvatislobodnitermin.php?wsdl';
$classmap_array=array(
  'GetSlobodniTerminiResponse' => 'GetSlobodniTerminiResponse',
  'GetSlobodniTermini' => 'GetSlobodniTermini'
);

$client = new SoapClient($wsdl_link, array('classmap' => $classmap_array));
$response = $client->GetSlobodniTermini(new GetSlobodniTermini(1, '333'));

print_r($response); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:56:32.000

感觉真的很愚蠢 :) 出于某种原因，我的 conf.php 文件在调用 Web 服务函数时没有被包含在内。问题解决了。

# postgresql - how to make the user\password required for Base postgresql connection

> ID：14773174
> 
> 赞同：0
> 
> 时间：2013-02-08T13:01:30.880
> 
> 标签：postgresql, libreoffice, libreoffice-base

I'm building an entry form frontend to postgresql using libreoffice 4.0 the first time i open it it will ask me for user name and password, if they were correct it won't ask for it again

the problem is it won't ask for it again even if i close the Base file and reopened it

all my users management is on postgresql side,

so i need Base to ask for password each time i close and reopen it

maybe there's a way to use macros to clear the cache of the password, and add a button called "logout" which will clear the password cache, so for the next connection Base will ask for the user/password but i couldn't find the API for it

thanks a lot, Ali

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:29:53.303

I found a way,

when setting the connection parameters don't add a user and don't test the connection, just check the "password required" save and close, when you reopen the database and try to open a form it will prompt for username and password,

and i made sure that the type of connection in my 'pg_hba.conf' is 'md5' not 'peer'

# iphone - 如何在sqlite数据库iphone中存储来自URL的数据

> ID：14773177
> 
> 赞同：1
> 
> 时间：2013-02-08T13:01:42.753
> 
> 标签：iphone, ios, objective-c, sqlite, urlloader

我在 IIS 上托管了 Web 服务（.Net）以从 SQL Server DB 获取数据；解析它并将其存储在 iPhone 的 SQlite DB 中。我该怎么做？

我的 Web 服务运行良好，我正在获取 XML 格式的数据。

我在网上搜索，但没有找到任何合适的教程。有人可以推荐任何链接或教程吗？谢谢。

# jquery - 动态增加数量（计数元素）

> ID：14773178
> 
> 赞同：0
> 
> 时间：2013-02-08T13:01:55.447
> 
> 标签：jquery, each

我正在尝试将一个数字放入元素列表中 - 一个动态增加的数字 - 例如：

```
1\. text
2\. text
3\. ...
... 
```

到目前为止，我有这个：

```
var c = {
    current: 0,
    count: function () {
        this.current++
    }
}
$('.box').each(function (index) {
    $(".number").text(c.current + 1);
    c.count();
}); 
```

*   见[jsfiddle](http://jsfiddle.net/Qzk3P/3/)。但我错过了什么？如何给每个元素自己的编号？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:04:55.020

[http://jsfiddle.net/Qzk3P/4/](http://jsfiddle.net/Qzk3P/4/)，您忘记添加上下文参数，请参见下面的示例：

```
$(".number", this).text(c.current + 1); 
```

注意`this`

编辑：我添加了另一个带有 css-property 计数器的示例，您可能也喜欢它：http: [//jsfiddle.net/Qzk3P/6/](http://jsfiddle.net/Qzk3P/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:06:57.233

您正在更改 的文本`".number"`，该文本恰好存在 4 次。像这样更新您的代码：

```
$('.box').each(function (index) {
    $(".number", this).text(c.current + 1);
    c.count();
}); 
```

是`this`上下文。`".number"`所以你只是在当前迭代中寻找元素`".box"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:09:57.600

此外，您似乎试图做的太多了。

这就是您需要做的所有事情。

```
var count = 0;
$('.box').each(function (index) {
    count ++;
    $(".number", this).text(count);
}); 
```

[http://jsfiddle.net/Qzk3P/5/](http://jsfiddle.net/Qzk3P/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:05:32.967

```
var c = {
    current: 0,
    count: function () {
        this.current++
    }
}
$('.box').each(function (index,v) {
    $(v).children(".number").text(++c.current);
    //c.count();
}); 
```

# ruby - 使用 String#encode 而不是 iconv 进行 Ruby EBCDIC 转换

> ID：14773180
> 
> 赞同：0
> 
> 时间：2013-02-08T13:02:02.347
> 
> 标签：ruby, encode, iconv, ebcdic

我以前做得很好：

```
Iconv.iconv('ASCII', 'EBCDIC-US', someEBCDICstring) 
```

从 ruby​​ 1.9 开始，我收到了警告：

```
iconv will be deprecated in the future, use String#encode instead. 
```

但我在 Encoding 类中找不到任何 EBCDIC 或 cp37、cp500、cp875... 的引用：

```
p Encoding.name_list 
```

我应该从某个地方导入它吗？我可以自己添加吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T18:37:57.843

您仍然可以使用 gem - [https://rubygems.org/gems/iconv](https://rubygems.org/gems/iconv)

（这里是文档 - [http://rubydoc.info/gems/iconv/1.0.3/frames](http://rubydoc.info/gems/iconv/1.0.3/frames)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-28T14:48:17.247

在[Ruby 2.3 中添加了 EBCDIC 编码](https://docs.ruby-lang.org/en/2.5.0/NEWS-2_3_0.html)：

> 编码
> 
> 新编码::IBM037（别名 ebcdic-cp-us；虚拟）

所以这应该工作：

```
str = 'xx'
str.encode('IBM037') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T04:07:34.277

```
require 'iconv' # sudo apt-get install ruby-dev && sudo gem install iconv 
```

这对我有用...

```
# set up translation to EBCDIC
trsl = Iconv.new('EBCDIC-US','ASCII')

# translate value
ebcdic = trsl.iconv(somestring) 
```

# wpf - 在 WPF 中进行多线程时出现 InvalidOperationException

> ID：14773183
> 
> 赞同：0
> 
> 时间：2013-02-08T13:02:13.550
> 
> 标签：wpf, multithreading, invalidoperationexception

所以我正在开发我的第一个多线程 WPF 应用程序。请记住，我对如何实现多线程几乎一无所知 - 我已经在一些应用程序中完成了它并且总是使用现有代码。这是我在 WPF 中的第一次尝试，这显然与 Windows 窗体完全不同......

所以基本上我正在研究[这个例子](http://roecode.wordpress.com/2008/01/11/creating-more-responsive-wpf-ui-via-multi-threading/)，奇怪的是没有提到你必须实例化一个新线程并启动它——我猜作者觉得即使对像我这样的新手来说也是不言而喻的。

在任何情况下，它都可以正常工作，直到我想更新我的 UI 控件的属性，此时我遇到了一个`InvalidOperationException`说**调用线程无法访问该控件，因为该控件属于不同的线程**

所以基本上这不是一种线程安全的工作方式，但我不知道应该如何解决这个问题......

这是我的代码：

```
string fn = "";

private void btnBrowse_Click(object sender, RoutedEventArgs e)
{
    if (lblActivity.Visibility != System.Windows.Visibility.Hidden)
    {
        lblActivity.Visibility = System.Windows.Visibility.Hidden;
    }
    if (lstResult.Items.Count != 0)
    {
        lstResult.Items.Clear();
    }

    OpenFileDialog ofd = new OpenFileDialog();

    Nullable<bool> result = ofd.ShowDialog();

    if (result == true)
    {
        txtSource.Text = ofd.FileName;
        txtDest.Text = ofd.FileName;
        fn = ofd.SafeFileName;

        PopulateControlsDuingLongRefreshCall("read");
    }
}

private void PopulateControlsDuingLongRefreshCall(string action)
{
    ShowProcessing();

    ThreadStart ts = delegate
    {
        switch (action)
        {
            case "format":
                Populate();
                CleanData();
                break;
            case "read":
                TextReader tr = new StreamReader(txtSource.Text);
                txtPreview.Text = tr.ReadToEnd();
                break;
        }

        Dispatcher.BeginInvoke(DispatcherPriority.Normal, (EventHandler)delegate
        {
            HideProcessing();
        }, null, null);

    };
    Thread thr = new Thread(ts);
    thr.Start();
}

private void ShowProcessing()
{
    recProcessing.Visibility = Visibility.Visible;
}
private void HideProcessing()
{
    recProcessing.Visibility = Visibility.Collapsed;
} 
```

如果有人可以在这里提出一个解决方案或解释更多关于我正在使用的概念（我仍然很模糊），以便我能够理解到足以自己找到解决方案，那将不胜感激。

提前致谢！

**编辑**
如果我获取 UI 控件属性`TextReader tr = new StreamReader(txtSource.Text);`也会引发错误，也会引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:06:33.453

在您的委托中，不要直接访问 txtSource，而是尝试使用以下函数返回一个流读取器：

```
 private StreamReader GetTxtSource()
    {
        if (!this.Dispatcher.CheckAccess())
        {
            return this.Dispatcher.Invoke(new Func<StreamReader>(this.GetTxtSource)) as StreamReader;                
        }
        return new StreamReader(txtSource.Text);
    } 
```

您可能需要改用 txtSource.Dispatcher.CheckAccess()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:25:12.920

您在这里真正需要了解的是，您不能从 UI 线程以外的其他线程访问任何控件。

所以当你在做

```
 case "read":
            TextReader tr = new StreamReader(txtSource.Text);
            txtPreview.Text = tr.ReadToEnd();
            break; 
```

您正在尝试在后台线程中设置文本框 (txtPreview) 的值。

您需要做的是在后台线程中读取文件内容，然后使用 UI 线程通过使用 Dispatcher 更新文本框值：

```
 case "read":
            TextReader tr = new StreamReader(txtSource.Text);
            string content = tr.ReadToEnd();

            Dispatcher.Invoke((Action)(() =>
            {
                txtPreview.Text = content;
            }));
            txtPreview.Text = tr.ReadToEnd();
            break; 
```

# php - socket_select 立即返回 false 但没有错误代码

> ID：14773184
> 
> 赞同：4
> 
> 时间：2013-02-08T13:02:14.360
> 
> 标签：php, unix-socket

我正在玩`socket_select`，但在一个主机上，这个函数会做一些奇怪的事情：

*   立即返回，而不是等待 5 秒
*   返回false，表示有错误
*   但`socket_last_error()`返回 0（成功）。

`phpinfo()`此服务器的：http: [//jsfiddle.net/Lmrfe/embedded/result/](http://jsfiddle.net/Lmrfe/embedded/result/)

```
$server = socket_create( AF_UNIX, SOCK_STREAM, 0 );
$r = socket_bind( $server, '/some/file/somewhere');
$r = socket_listen( $server );
// none of the above socket_* returns false

$t = microtime(true);
socket_clear_error();

$read = array( $server ); $write = null; $except = null;
$read = array( $server ); $write = array(); $except = array();
$read = array(); $write = array(); $except = array();
$read = null; $write = null; $except = null;

$changed = socket_select( $read, $write, $except, 5,0 );
$changed = socket_select( $read, $write, $except, null );
$changed = socket_select( $read, $write, $except, 5000000 );
$changed = socket_select( $read, $write, $except, 5000000, 0 );
$changed = socket_select( $read, $write, $except, 5000000, 5000000 );

/* Results:

   microtime(true) - $t  == almost zero

   $changed === false

   socket_last_error() === 0
   socket_strerror(socket_last_error()) === Success

   $read === array(1) {
     [0]=>
     resource(2) of type (Socket)
   }
   $write  === NULL
   $except === NULL
*/

$s = socket_read( $server, 1024, PHP_BINARY_READ );
// $s === false 
```

这里发生了什么？

更新的测试脚本：仍然在瞬间运行：

```
header('Content-Type: text/plain; charset=utf-8');
error_reporting(-1);

for( $i = 0; $i < 4; $i++ ){
for( $j = 0; $j < 5; $j++ ){
  echo "\n\n\n\n\n[i,j]=[{$i},{$j}]\n";

  $socket = socket_create( AF_UNIX, SOCK_STREAM, 0 );
  var_dump('socket_create', $socket ); echo "\n"; if( $socket === false ) continue;

  $socket_file = dirname(__FILE__)."/test_socket_i{$i}_j{$j}";
  if( file_exists( $socket_file )) unlink( $socket_file );

  $r = socket_bind( $socket, $socket_file );
  var_dump('socket_bind', $r ); echo "\n"; if( $r === false ) continue;

  $r = socket_listen( $socket );
  var_dump('socket_listen', $r ); echo "\n"; if( $r === false ) continue;

  $t = microtime(true);
  socket_clear_error();

  if($i==0){ $read = null;             $write = null;    $except = null; }
  if($i==1){ $read = array();          $write = array(); $except = array(); }
  if($i==2){ $read = array( $socket ); $write = null;    $except = null; }
  if($i==3){ $read = array( $socket ); $write = array(); $except = array(); }

  if($j==0){ $changed = socket_select( $read, $write, $except, 5,0 ); } // 5 seconds
  if($j==1){ $changed = socket_select( $read, $write, $except, null ); } // forever
  if($j==2){ $changed = socket_select( $read, $write, $except, 5000000 ); }
  if($j==3){ $changed = socket_select( $read, $write, $except, 5000000, 0 ); }
  if($j==4){ $changed = socket_select( $read, $write, $except, 5000000, 5000000 ); }

  var_dump('•socket_select returned:', $changed );echo "\n";
  var_dump('•$read/$write/$except:',$read,$write,$except);echo "\n";
  var_dump('•error:', socket_last_error(), socket_strerror(socket_last_error()) );echo "\n";
  var_dump('time: ', microtime(true) - $t );echo "\n";               // almost zero
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:20:04.447

您可能想使用 stream_* 函数而不是套接字。

流函数更通用并且是 PHP 核心的一部分，而需要安装 Socket 支持。流函数基本上为您提供了更多控制权。

[http://www.php.net/manual/en/intro.stream.php](http://www.php.net/manual/en/intro.stream.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T10:42:41.857

检查这个 [http://php.net/manual/en/function.socket-select.php](http://php.net/manual/en/function.socket-select.php)

> 由于当前 Zend 引擎的限制，不可能将像 NULL 这样的常量修饰符直接作为参数传递给期望此参数通过引用传递的函数。而是使用临时变量或表达式，最左边的成员是临时变量：

所以问题是你正在初始化`$write = null`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T02:14:47.677

正如@Amez 指出的那样，您不应将空值传递给选择。`socket_select()`相反，为未使用的参数创建一个空数组：

```
$read    = array( $server );
$write   = array();
$except  = array();
$changed = socket_select( $read, $write, $except, 5,0 ); 
```

我最近在 python 中偶然发现了同样的问题（我不知道为什么 PHP/Python 不会简单地在内部用空数组替换空值，因为 select 这似乎是预期的行为）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T15:12:13.973

如果你遇到这个错误，你可以使用类似的东西来解决它：

```
$socket_select_timeout_seconds = 5;

while(true){
  $time_start = microtime(true);
  $c = socket_select($r,$w,$e, $socket_select_timeout_seconds );

  if( /* something happened */ ){
    // handle socket events
  }else if( microtime(true) - $time_start < 0.01){
    // nothing happened, but buggy socket_select didn't wait
    // wait manually
    usleep( $socket_select_timeout_seconds * 1000000 );
  }

} 
```

# ios - 使用 Malcom API 发送推送通知

> ID：14773186
> 
> 赞同：4
> 
> 时间：2013-02-08T13:02:17.213
> 
> 标签：ios, apple-push-notifications, malcom

我们通过 Malcom API 发送 APNS。小消息没有问题，但是当我们创建大消息时，没有收到通知。

消息字符串长度有限制吗？

特定键的值是否有任何限制？

该文档目前没有提及长度限制。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:16:58.693

你是对的。在他们的文档中没有提及它。无论如何，如果您通过 malcom.mymalcom.com 将推送发送到您的应用程序中，您可以在键入消息时看到最多字符。所以，我猜任何通过 API 的推送请求都应该有同样的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:11:10.570

来自 Apple 开发人员指南：

> 通知有效负载允许的最大大小为 256 字节；Apple Push Notification Service 拒绝任何超过此限制的通知。

# sql-server - 这些在效率方面是否相等

> ID：14773189
> 
> 赞同：1
> 
> 时间：2013-02-08T13:02:24.707
> 
> 标签：sql-server, sql-server-2012

我从未质疑以下两个脚本之间的效率差异：

DateKey 是类型`INT`

1.

```
DECLARE @StartDate  INT = 20130101,
        @EndDate    INT = 20130201

SELECT  UserAccountKey,
        income_LT = SUM(ISNULL(income,0.0)) 
INTO    #x
FROM    WH.dbo.xxx x
WHERE   x.DateKey > = @StartDate
        AND x.DateKey < @EndDate
GROUP BY    UserAccountKey 
```

上面的执行是：

![在此处输入图像描述](../Images/d8a7b311ae917f196af4c24f13acef31.png)

2.

```
SELECT  UserAccountKey,
        income_LT = SUM(ISNULL(income,0.0)) 
INTO    #x
FROM    WH.dbo.xxx x
WHERE   x.DateKey > = 20130101
        AND x.DateKey < 20130201
GROUP BY    UserAccountKey 
```

以下是 2 号的执行计划： ![在此处输入图像描述](../Images/e42cfd8c565af8ccf15a9d52695c1939.png)

`1.`快得多（2 秒与 80 秒相比） - 这是预期的吗？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:06:53.643

在第一个查询中，它使用变量。这些值在编译时是未知的，因此它会根据通用估计生成一个计划。在第二个中，它根据实际参数值编制计划。

通用猜测比知道特定值的计划效果更好，这一事实表明您的统计数据可能需要更新。

如果有任何行与谓词匹配，则可能上次更新它们很少，`WHERE DateKey > = 20130101 AND DateKey < 20130201`但现在很多。

这是[升序日期列的常见问题](http://sqlinthewild.co.za/index.php/2011/03/22/statistics-row-estimations-and-the-ascending-date-column/)

[另请参阅 dba 站点上的此问题和答案](https://dba.stackexchange.com/q/33698/3690)

**编辑**这可以在这里的计划中看到

![在此处输入图像描述](../Images/9d740f71b6428dc0955266ea0a3b83d8.png)

线条的粗细表示行数。[计算标量左侧的非常细的线显示了估计的行数（由于此处的原因](http://web.archive.org/web/20180423042943/http://sqlblog.com:80/blogs/paul_white/archive/2012/09/05/compute-scalars-expressions-and-execution-plan-performance.aspx)，计算标量通常不显示实际行数）。计算标量和排序外的非常粗的线表示实际的行数。两者显然有很大不同。

除了选择不合适的计划（带有嵌套循环连接的串行连接）外，这种糟糕的估计还意味着当查询请求的内存授权不足时排序溢出到磁盘（由警告三角形显示）。

# exception - QTP - 升级到 UFT 11.51 后出现异常

> ID：14773192
> 
> 赞同：1
> 
> 时间：2013-02-08T13:02:31.767
> 
> 标签：exception, patch, qtp, hp-uft

我一直在使用 UFT 11.50（新的 QTP 11.00）并且最近应用了补丁 UFT 11.51。

我还为 ALM 11.51 和结果查看器 11.51 应用了补丁

我启动 UFT 并在打开测试（无论哪个）后得到以下屏幕>

![在此处输入图像描述](../Images/3a21e3c498f51025320a860cdcf04215.png)

我迫切希望解决这个问题，并且没有（我知道）补丁的卸载方法！

谢谢您的帮助！

更新>卸载补丁后我得到了这个>

![在此处输入图像描述](../Images/ddc2908f2a6abe24a6b4b12c7fdec88c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:18:27.307

您可以从控制面板->卸载程序卸载 UFT 补丁，然后选择“查看已安装的更新”（在左侧）。那里应该有 HP UFT 服务包，并且应该能够从那里卸载。

关于您收到的错误，您似乎在注册时遇到了问题。

我认为有问题的DLL可能是：HP.QTP.DocumentWrappedObjects.dll

它应位于 UFT 安装 bin 目录中。

您可以尝试在其上调用regsvr32.exe，看看它是否成功注册了dll，如果您收到任何错误，请在此处发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:17:23.703

好的，所以我们不知道那里发生了什么...我卸载了所有东西并从一开始就安装了 UFT。

在这样做之前，我还手动删除了所有注册表项以及 HP 目录（与产品相关）。

如果有人遇到同样的问题，我希望这会有所帮助。

PS> 完成所有这些需要大约半天时间，所以……确保你拥有它！;)

# c# - 如何检查数字是否是二进制总和的结果？

> ID：14773196
> 
> 赞同：0
> 
> 时间：2013-02-08T13:02:40.367
> 
> 标签：c#, enums

我有这样的情况：

拿到`enum`

```
enum MyType{
    None = 0,
    First = 1,
    Second = 2,
    Third = 4,
    //and so on 
} 
```

现在我不想检查给定的数字是否是二进制总和的结果，例如

```
int givenNumber = 3;
int result = 
//how to get that it's sum of 2 enums in this particular case would be (int)Type.First & (int)Type.Second == 3; 
```

希望我的问题足够清楚，有人可以提供帮助。

**编辑**

1.  枚举值始终由 2 供电

2.  我想编写一个方法来检查给定的数字是否可以是不同二进制和示例的一部分：`int givenNumber = 1; //1 , 3 ,5 and 7 will be the answer`

3.  现实生活中的示例：我的数据库中有承包商，每个承包商都可以是 Producer = 1,Supplier = 2,Service = 4 在 db 我只能存储 1 个值 int 在这种情况下将是最明智的选择。当我将项目加载到我的服务 - 承包商组合框时，我希望加载每一行，例如值 4、5 或 7（因为 7 = 1+2+4、5 = 1+4 和 4=4）。

现在我的问题更清楚了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:22:41.327

您可以像这样获取单个枚举：

```
static IEnumerable<MyEnum> GetFlags(this MyEnum e)
{
    var flags = Enum.GetValues(typeof(MyEnum)).Cast<MyEnum>();
    foreach (var flag in flags)
        if ((flag & e) > 0) yield return flag;
} 
```

那么你可以像这样使用它：

```
int givenNumber = 3;
var results = ((MyEnum)givenNumber).GetFlags(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:11:34.030

```
private enum YourType
{
    None = 0,
    First = 1,
    Second = 2,
    Third = 4,
}

private static void Main(string[] args)
{
    int givenNumber = 3;
    YourType castedNumber = (YourType)givenNumber;

    if ((castedNumber & YourType.First) == YourType.First)
    {
        Console.WriteLine("First");
    }

    if ((castedNumber & YourType.Second) == YourType.Second)
    {
        Console.WriteLine("Second");
    }

    if ((castedNumber & YourType.Third) == YourType.Third)
    {
        Console.WriteLine("Third");
    }

    Console.Read();
} 
```

请注意：

1.  这不适用于`None`(0) 值，因此您必须手动检查 0（`(x & 0)`始终为 0）
2.  所有值必须是 2 的幂
3.  您可能想要添加该`[Flag]`属性，以便其他开发人员现在将枚举与按位运算一起使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:35:16.937

```
 enum Flag
    {
        None = 0,
        First = 1,
        Second = 2,
        Third = 4,
        Fourth = 8
    }

    static void Main(string[] args)
    {
        int givenNumber = 3;
        List<Flag> flags = new List<Flag>();

        int number, result;
        do
        {
            int step = 0;
            do
            {
                number = (int)Math.Pow(2d, ++step);
            } while (number < givenNumber);
            result = (int)Math.Pow(2d, step - 1);
            flags.Add((Flag)result);
            givenNumber -= result;
        } while (givenNumber != 0);

        Debugger.Break();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:54:37.970

```
[Flags]
enum MyType{
  None = 0,
  First = 1,
  Second = 2,
  Third = 4,
  //and so on 
} 
```

使用 Flags 属性意味着一个简单的 toString 将为您提供您想要的下拉菜单

IE

```
MyType test = (MyType)6;
Console.WriteLine(test.ToString()); 
```

现在将打印：

```
Second, Third 
```

而不是 6

# tree - 决策树交叉验证问题

> ID：14773217
> 
> 赞同：0
> 
> 时间：2013-02-08T13:03:46.883
> 
> 标签：tree, data-mining, decision-tree, cross-validation

所以我正在编写一个决策树程序。假设我有一个包含 1000 个实例的数据集。据我了解 - 通过交叉验证，我将数据集分成 900-100 个组。每次使用不同的 900 组来创建树并使用 100 组来测试它

我不明白的是这些问题： 1\. 我用哪棵树作为我的最终决策树（选择错误最少的那棵不是一个好选择，因为我想这可能是因为过度拟合） 2 . 交叉验证是否仅用于估计最终树中的误差？3\. 我发现了一些关于交叉验证的不同算法，一些使用相同的分割标准，还有一些使用不同的标准来选择最好的树——你能给我指出一个有信息的好地方，这样我就可以准确地弄清楚我是什么需要？或者解释一下你自己？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:13:06.853

`Cross validation`用于估计您的模型预测的**准确度。**

最好的树应该包含最好的分类器。即很好地分离数据的属性，因此您可以使用该属性开始构建决策树。

我建议您搜索`Wikipedia`并`Uncle Google`获取更多信息`decision trees`

# c# - Visual Studio 安装项目：以当前用户而非系统帐户身份运行 CustomActions/process

> ID：14773220
> 
> 赞同：6
> 
> 时间：2013-02-08T13:03:58.007
> 
> 标签：c#, visual-studio-2010, setup-project, outlook-2013

我在 Visual Studio 2010 中为 ac# Outlook 插件（Office 2010/2013）和其他独立工具使用设置项目。在安装过程中，我杀死了 Outlook 的所有实例，之后我想重新启动一个 Outlook 实例。

在我的插件项目中，我添加了一个安装程序类并添加了一个 InstallEventHandler(AfterInstallEventHandler) 我在其中执行

```
Process.Start("Outlook"); 
```

虽然相同的命令只是在其他编译类中打开 Outlook，但在安装程序的上下文中，Outlook 会在配置文件创建助手中打开。

我还尝试在提交后将所述工作编译的 exe 作为用户定义的操作运行，但会出现同样的问题。

任何解决方案或解释将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T14:22:42.953

**解决方案：**

安装在 SYSTEM 帐户中运行。因此，创建的进程也在所述帐户中运行，而不是以当前登录的用户身份运行。

我创建了一个额外的项目（InstallHelper），其中包括

```
Process.Start("Outlook"); 
```

我在我的安装项目中将 InstallHelper 添加为 CustomAction on Commit，并在 CustomAction 的属性中将 InstallerClass 更改为 False。然后我将 WiRunSql.vbs 复制到项目文件夹中，并将 PostBuildEvent 添加到安装项目中：

```
@echo off
cscript //nologo "$(ProjectDir)WiRunSql.vbs" "$(BuiltOutputPath)" "UPDATE CustomAction SET Type=1554 WHERE Type=3602" 
```

3602：

*   0x800 (msidbCustomActionTypeNoImpersonate)
*   0x400 (msidbCustomActionTypeInScript)
*   0x200 (msidbCustomActionTypeCommit)
*   0x12（自定义操作类型 18：exe）

1554：

*   0x400 (msidbCustomActionTypeInScript)
*   0x200 (msidbCustomActionTypeCommit)
*   0x12（自定义操作类型 18：exe）

请参阅： [msdn：自定义操作脚本内执行选项](http://msdn.microsoft.com/en-us/library/Aa368069.aspx)

类型更改删除了 msidbCustomActionTypeNoImpersonate (0x00000800) 的位，因此 InstallHelper 和创建的进程作为登录用户运行，而不是作为 SYSTEM。

或者，可以通过在 orca 中打开 msi 来进行这些更改（必须在每次构建后重复，所以我更喜欢脚本更改）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-22T13:29:41.200

除了先前的答案（我花了很多时间来理解这一点）：

对我来说 WiRunSql.vbs 的文本：（对你来说，它还包含 argument2-update 脚本参数）

（对我来说 PostBuildevent 是

```
@echo off
cscript //nologo "$(ProjectDir)WiRunSql.vbs" "$(BuiltOuputPath)" 
```

)

```
Dim filename, installer, database
filename = WScript.Arguments(0)
Set installer = CreateObject("WindowsInstaller.Installer")
Set database = installer.OpenDatabase(filename, 1)
sql = "UPDATE `CustomAction` SET `Type`= 1554 WHERE `Type`= 3602"
Set view = database.OpenView(sql)
view.Execute
view.Close
database.Commit 
```

您可以在命令提示符之前测试您的脚本：

```
cscript "C:\Projects\YourProject\WiRunSql.vbs" "C:\Projects\YourProject\Debug\Setup.msi" 
```

这需要在脚本中查找错误

要查看新的类型值，您可以使用 orca [https://support.microsoft.com/en-us/kb/255905](https://support.microsoft.com/en-us/kb/255905)

另请参阅：http: [//www.codeproject.com/Articles/383481/Editing-an-MSI-Database](http://www.codeproject.com/Articles/383481/Editing-an-MSI-Database) [http://integr8consulting.blogspot.ru/2012/04/microsoft-installer-custom-actions-user.html](http://integr8consulting.blogspot.ru/2012/04/microsoft-installer-custom-actions-user.html) [https ://github.com/facebookarchive/ie-toolbar/blob/master/Common/Install/msi/FBIE-MSI/scripts/msipostbuild.vbs](https://github.com/facebookarchive/ie-toolbar/blob/master/Common/Install/msi/FBIE-MSI/scripts/msipostbuild.vbs)

# grouping - 为什么分组会改变查询的语义？

> ID：14773222
> 
> 赞同：0
> 
> 时间：2013-02-08T13:04:01.820
> 
> 标签：grouping, sparql, dbpedia

我不太明白组模式的含义。从我[在规范](http://www.w3.org/TR/rdf-sparql-query/#GroupPatterns)中读到的内容来看，是否将已经在一个组中的图形模式放入一个嵌套组（没有`UNION`或类似的东西）应该没有任何区别。还有一个例子说明了这一点。

因此，我不明白我在 DBpedia 上看到的以下行为：

以下查询产生 14 个结果：

```
PREFIX ygo: <http://dbpedia.org/class/yago/>

SELECT ?p ?bn ?ya
WHERE {
    ?p rdf:type ygo:AmericanFilmDirectors.
    ?p dbpprop:birthname ?bn.
    ?p dbpprop:yearsActive ?ya.
    FILTER((?ya > 1980) && (regex(?bn, "e"))).
} 
```

然而，由于某种原因，这个结果只产生了 13 个——与其他结果集相比，缺少[Shonda Rhimes ：](http://dbpedia.org/resource/Shonda_Rhimes)

```
PREFIX ygo: <http://dbpedia.org/class/yago/>

SELECT ?p ?bn ?ya
WHERE {
    {
        ?p rdf:type ygo:AmericanFilmDirectors.
        ?p dbpprop:birthname ?bn.
        ?p dbpprop:yearsActive ?ya.
    }
    FILTER((?ya > 1980) && (regex(?bn, "e"))).
} 
```

我已经用[DBpedia 的 Snorql frontend](http://dbpedia.org/snorql)对此进行了测试。

（奇怪的是，我有时只能使用[DBpedia 的 Virtuoso 查询前端](http://dbpedia.org/sparql)来重现这一点……有时，两个查询都只返回 13 个结果。）

为什么是这样？这是我还没有正确理解的 SPARQL 规范的一部分，还是三重存储实现中的一个错误，从查询 1 到查询 2 的更改应该没有任何区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:16:05.277

虽然它们是不同的查询，但最终会在 SPARQL 中作为相同的代数表达式，并且应该产生相同的答案。但是，根据数据分布，您可能会达到引擎中的内部执行限制，因为该模式可能会产生大量需要过滤的可能性。这将解释不同时间的不同结果。

# javascript - requirejs 设置工作

> ID：14773224
> 
> 赞同：0
> 
> 时间：2013-02-08T13:04:13.660
> 
> 标签：javascript, jquery, requirejs

我发现很难在我自己的项目中使用 require.js 站点上的信息。

我的一个问题是基于 require.js 网站上的示例代码：

> 定义（函数（）{
> 
> ```
> //Do setup work here
> 
> return {
>     color: "black",
>     size: "unisize"
> } 
> ```
> 
> });

有人可以给我一个例子`Do setup work here`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:41:42.277

你自己的代码。如果您只想返回一个普通对象，则无需添加任何其他内容。

# java - jXLS 创建的文档：从一开始就没有计算

> ID：14773226
> 
> 赞同：0
> 
> 时间：2013-02-08T13:04:21.470
> 
> 标签：java, excel, templates, jxls

我创建了一个工具，用于分析 HTML 文档并将某些表格的内容写入 Excel 文件。正如您在此处看到的，使用 jXLS 创建带有模板的 ExcelFile 非常容易：

[http://jxls.sourceforge.net/samples/tagsample.html](http://jxls.sourceforge.net/samples/tagsample.html)

但是我遇到了一个令人困惑的问题：在模板 XLS 中有一个单元格，它计算一列中所有行的总和。当我打开创建的 Excel 文件时，它不会计算总和。如果我单击应计算的列中的一个单元格并按 Enter，一切都很好。但是有没有一种方法，我不必按 Enter 键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:09:37.860

你能贴出你用过的标签吗？JXLS 中的 SUM 函数应该像这样使用

$[SUM(A1)]@0 或 $[SUM(A1 + B1 + C1)]@0

如果您使用的是 foreach，第一个示例就可以了（A1 将替换为实际的单元格值）。否则，您将需要使用类型 2。

我无法想象为什么按 Enter 会导致计算公式……在编写电子表格之前解释 JXLS 标记。

# keytool - 需要哈希键

> ID：14773231
> 
> 赞同：0
> 
> 时间：2013-02-08T13:04:47.833
> 
> 标签：keytool

在将 app 与 facebook 集成的某个步骤中需要提供 Hash 键。因为那个 facebook 开发人员提供了在 CMD 中运行的代码

```
-keytool -exportcert -alias androiddebugkey -keystore %HOMEPATH%\.android\debug.keystore | openssl sha1 -binary | openssl base64 
```

但是当我这样做时

我得到了**回应**

```
C:\Program Files\Java\jdk1.7.0_11\bin>keytool -exportcert -alias androiddebugkey -keystore "c:\Users\Sagar.Shah\.android\debug.keystore" 
```

**输入密钥库密码**：android <--我在这里无形输入

```
☺☺♂♣ 071♂0      ♠♥U♦♠‼☻US1►0♫♠♥U♦
430125104420Z071♂0      ♠♥U♦♠‼☻US1►0♫♠♥U♦
☺☺☺♣ ♥é☺☼ 0é☺0é☺"0
☻é☺☺ ¼╔WΩç~C╠╤√é:h♦⌂╘╬▒K▼n♂♣♫╣æΩïÅ▼rε«»wy&♠┘♀\#◄U¢║Ywσ+╗▀≥╞╤tΦ«U╓╥╗╠♂♫Q5╧£:fkf H
3╬Θ═/╝╪Tô→♀☻ì`'↔╤≈;ƒ²9≤░)∙%⌐ü╖C(t9»╢¶▲╣ëôpw*±╙æò▐²~═1╝πjKz╙╩┼ì☼L.öOó
╖yá≤«╗╗÷&lt;å~ö₧ìR∞å█ ▐ Y⌠▄K┐]Aó∞⌐╡ö¿µ¬┬≡ì₧⌠Öµ:╓üx&‼böûƒÅ>╢)ΩÇ▌ë|▬←♥à┌ÿ─w¿)⌡╞♀¶±▄Oα
☺☺♂♣ ♥é☺☺ 8914IíL╚sFGFxg∞╪⌐▄í¡3ô↓Ü▼╬\╝y+!ú;¶r>°cÇªEñ≥Xés=╣╪ΩF¼}φµ-÷EWGHS>Å}E┤╜Y♠
1↕)`=l9▓)Üc♣¶▐╠vM╙-å♥vç░♫<å₧î{☺Ñ‼♫∩↓♥ ‼ìÑ╒èO☺♫ª¿¬╜o/┬º½ÿ←£╚±☺│+-à`ò▓t╔5┬ >ΣÉ3┐╥☺
¡╜Üß    ╫■≈τL½╧ë╤▲♠╚▲╝+ⁿ→♂╡O3Å└‼v°∙K↑╢p8W¡l╧╨σpë+╖╖a╜☼Θ├J.î≡╤&_;╟°≤LÆƒ*┘▓∩╠  ╚_∩
ⁿH÷§ò&)α δ↨╔►/a╬µ↨uÇ←7£╠v 
```

我被困在这里。

有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-22T14:39:18.910

我们需要设置openssl的完整路径如下：

```
C:\Program Files\Java\jdk1.7.0_67\bin>keytool -exportcert -alias androiddebugkey
 -keystore "C:\Users\Sagar.Shah\.android\debug.keystore" | "C:\Users\Sagar.Shah\
openssl\bin\openssl.exe" sha1 -binary | "C:\Users\Sagar.Shah\openssl\bin\openssl
.exe" base64 
```

# wix - 为什么重大升级（迁移）后有两个快捷方式？

> ID：14773233
> 
> 赞同：5
> 
> 时间：2013-02-08T13:04:57.170
> 
> 标签：wix, windows-installer, wix3.5

我们正在使用 WiX 进行 Windows 安装。

直到最近，我们才支持重大升级，没有任何问题。

当我们更改产品名称时，我被要求更改快捷方式名称。所以我改变了它。

重大升级后，将显示 2 个快捷方式而不是 1 个。

美妙之处在于，当我们在同一台机器上安装迁移的所有功能时，它似乎正确地删除了旧的快捷方式。

但是当我们在（webserver）机器上安装其中一项功能（webserver feature）时，会出现2个快捷方式。

我验证了快捷方式组件也添加到了网络服务器功能中。

```
 <DirectoryRef Id="ProgramMenu.OrganizationName.MyProj">
          <Component Id="CoreInterface_Shortcuts" Guid="3e3c3733-9b53-42cf-a641-b5b3e3da88cf">
            <Shortcut Id="MyOrgMESUrl" Name="Home" Description="MyOrg Intuition URL" Target="[INSTALLDIR]MyOrg MES.url" WorkingDirectory="INSTALLDIR"/>
            <RemoveFolder Id="RemProgramMenu.MyOrg" Directory="ProgramMenu.MyOrg" On="uninstall"/>
            <RemoveFolder Id="RemProgramMenu.MyOrg.MyProj" Directory="ProgramMenu.MyOrg.MyProj" On="uninstall"/>
            <RegistryValue Root="HKCU" Key="Software\MyOrg\MyProj" Name="installed" Type="integer" Value="1" KeyPath="yes"/>
          </Component>
        </DirectoryRef>

<Feature Id="WEBSERVER" Title="WEBSERVER Customized Component(s)" Level="1">
      <ComponentRef Id="CoreInterface_Shortcuts"/>
</Feature> 
```

为什么它保留旧的快捷方式（如果单击旧的快捷方式它不起作用）？如何避免这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T12:51:15.577

原因很简单。您没有遵循最佳实践。

更改名称时，必须更改组件 guid。

见文档：

> 任何未通过测试证明与组件的先前版本兼容的更改。在这种情况下，您还必须更改组件中每个资源的名称或目标位置。
> 
> 组件中任何文件、注册表项、快捷方式或其他资源的名称或目标位置的更改。在这种情况下，您还必须更改组件中每个资源的名称或目标位置。
> 
> 从组件中添加或删除任何文件、注册表项、快捷方式或其他资源。在这种情况下，您还必须更改组件中每个资源的名称或目标位置。

[更改组件代码 (Windows)](http://msdn.microsoft.com/de-DE/library/windows/desktop/aa367849(v=vs.85).aspx)

更新只会重新安装/覆盖文件。源文件和名称取自新的 msi。当您重命名文件/快捷方式时，对旧文件名的引用会丢失。这就是安装程序未触及或覆盖旧链接的原因。

# iphone - 怀疑使用phonegap和钛

> ID：14773239
> 
> 赞同：5
> 
> 时间：2013-02-08T13:05:16.800
> 
> 标签：iphone, ios, cordova, titanium, titanium-mobile

最近我听说了 PhoneGap 和 Titanium 移动网络应用程序的开发。我已经分析了这两个 Web 应用程序，并对如何使用以及它们的优缺点有了一些了解。但是我对以下问题没有明确的想法，

*   这些 Web 应用程序开发是否支持 XML 解析？

*   我听说这些只使用 html5、javascript 和 css。它支持 Ajax 吗？

*   如果我的应用程序检索远程 XML 文件。有没有办法解析元素？

*   这些PhoneGap 和Titanium 对Web 服务的支持程度如何？我有办法实现 Restful Web 服务吗？

谁能就这些问题给我建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T16:37:25.300

PhoneGap 和 Titanium 的工作方式截然不同。

[PhoneGap](http://phonegap.com)本质上是创建一个嵌入式 Safari 浏览器，然后运行您提供的任何 HTML。在大多数情况下，您可以在移动 Safari 中执行的任何操作都可以在 PhoneGap 中执行——使用 AJAX、使用 Web 服务、CSS3 动画等。

[钛](http://www.appcelerator.com/platform/titanium-sdk/)是另一种野兽。它允许您使用 JavaScript 编写应用程序，然后编译为原生 iOS 应用程序。他们提供了一个 js SDK，你用它来告诉系统你想要做什么（创建一个标签栏；显示一个按钮；绘制一个标签等）。然后将您的 JavaScript 与其自定义库一起打包，以创建原生 iPhone 或 iPad 应用程序。您获得的视图、按钮和对象是本机控件，而不是 html 元素。在 Xcode 和 Objective-C 中手动开发的应用程序的性能并没有完全相同，但它往往比 PhoneGap 的速度稍快。

有道理？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T15:35:38.097

手机差距比不上钛。Titanium Ultimate 单一代码库脚本语言。

如果您想真正拥有原生应用体验，请尝试钛。我们正在里面做项目。它是终极拥有这样的经验和工具和社区。

如果您想尝试使用 html5 编码，那么 phonegap 就可以了。

但是在钛中，您可以深入了解移动概念，就像在本机应用程序中一样。我的建议是钛……您会喜欢的

来回答你的问题

绝对可以使用 remotecall get data.xml 和 json 解析都在那里。

请参阅链接[http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.XML](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.XML)

在查看 lynda.com 的关于钛应用加速器的视频之前。我花了一个小时来学习。真的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:17:28.940

说到 Phonegap，您可以使用任何 javascript 库，例如 jquery 等。我认为应该有适用于所有这些情况的库。例如，我已经使用了带有 jquery.ajax() 函数的 web 服务。

我认为 Titanium 在这方面是相似的，但是用户界面不是用 html 描述的，而是用 javascript 描述的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T13:34:48.120

我曾在 PhoneGap 工作过，因此可以帮助您。

*   XML Parsing：由原生 javascript 函数调用支持，无需库。
*   Ajax：这再次由 javascript 支持，不需要外部库。但是，为了便于控制，您可以使用 jQuery。
*   远程 XML 文件解析：还没有解析文件，但是是的，javascript 允许您解析通过 ajax 响应接收到的 xml。
*   Web Service支持：已经实现了SOAP服务，希望Restful也能支持。

如果您需要进一步的帮助，请回信。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T14:37:01.507

正如其他人所指出的，Phonegap 和 Titanium 的工作方式非常不同。我使用 Titanium，但也知道我正在写他们的 javascript api。这最终会被编译为原生 ios 或 android SDK。所以 Titanium 应用程序比 PhoneGap 应用程序更原生。

要回答您的问题：

1.  是的，它支持 XML 解析，并且有一个完整的库可用于处理 XML 文档
2.  Titanium 允许您使用任何您想要的 Javascript 库，并且在新的 Titanium 3.0 中，下划线库已经包含在内。
3.  我一直在处理远程文件。您将能够向任何 Web 服务或第 3 方 API 发出请求以检索数据
4.  绝对地。我已与托管在 Azure 中的我自己的自定义 REST API 集成，也称为 3rd 方天气 API

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-05T16:11:46.180

这个线程的更多信息。PhoneGap 现在是[Apache Cordova](http://cordova.apache.org/)。Cordova 和 Titanium 之间的差异可以总结为：

*   Cordova 是一个 webview，Titanium 是一个 javascript sdk，可以将你的应用程序编译成原生 iOS 和 Android 平台。
*   Cordova 应用程序可以直接从 Internet 下载。Titanium 应用程序需要提交给 Apple/Google 的审查程序才能供大众使用。

希望这个简短的介绍能增加您的理解。如果没有，只需忽略它。:D

编辑：在 Cordova 中创建的 iOS 和 Android 应用程序也需要提交到各自的应用程序商店。我之前说错了。

# cql - cassandra-cql：如何确定结果是否返回 0 记录

> ID：14773252
> 
> 赞同：1
> 
> 时间：2013-02-08T13:05:54.727
> 
> 标签：cql

我有以下功能来检查列族中是否存在行键。我使用以下命令从 SELECT 语句中获取结果。索引 = db.execute("SELECT * FROM #{$configuration} WHERE key = '#{index_config}'")

我应该如何处理索引结果说上面的 select 语句什么也没找到？

我曾经使用“return false if index.size == 0”，但它不起作用。index.size 为 1，尽管现在找到了行。

我尝试检查“如果 index[1].to_s.empty 则返回 false？” 但它也不起作用。

```
def self.index_config_exists?(config, keyspace, columnfamily)
index_config = "#{keyspace}_#{columnfamily}_#{config}_idx"
db = CassandraCQL::Database.new($cassandra_host, {:keyspace => $indexing})
indexes = db.execute("SELECT * FROM #{$configuration} WHERE key = '#{index_config}'")
db.disconnect!()

indexes.fetch {|index|
  # check if the index configuration not empty
  puts index.to_s
  puts index[0]
  puts index[1].class
  return false if index[1].to_s.empty?
}

return true 
```

结尾

# iphone - 收到推送通知时发出哔声

> ID：14773256
> 
> 赞同：0
> 
> 时间：2013-02-08T13:06:11.583
> 
> 标签：iphone, xcode

我正在开发一个聊天应用程序，用户可以在其中发送和接收消息。我是通过推送通知完成的。我将所有消息存储在表中，因此当用户选择联系人时我会显示所有发送和接收消息。默认情况下，推送通知会发出声音应用程序已关闭。如何在应用程序打开时添加哔声。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:30:43.383

`didReceiveRemoteNotification`为此使用委托：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    if ( application.applicationState == UIApplicationStateActive )
    {
      //create an audio player and play the sound
    }
} 
```

# bash - 在 bash 变量中打印格式化输出

> ID：14773258
> 
> 赞同：0
> 
> 时间：2013-02-08T13:06:15.017
> 
> 标签：bash, echo, tail

我正在使用 bash 脚本，我必须将文件的最后 n-2 行存储在变量中。我用于此的命令是

```
last_n2_lines=`tail -n+3 $file` 
```

现在，每当我回显 $last_n2_lines 变量时，我都会将文件的所有行放在一行中。如何获得与原始文件相同的格式。我试过 printf 但它只打印第一个字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:10:24.917

试试这个：

```
echo "$last_n2_lines" 
```

`echo`在您的变体中看*不到*原始值，因为它已分解为`argv`数组。

# jquery - jQuery 验证远程失败时打开模式

> ID：14773262
> 
> 赞同：1
> 
> 时间：2013-02-08T13:06:31.817
> 
> 标签：jquery, ajax, jquery-validate

我正在使用 jQuery 验证插件，效果很好。

我希望能够在远程 ajax 失败时显示一条消息并触发一个模式（示例中的alert()）。我无法弄清楚如何做到这两点。现在，它按预期触发了 alert()，但还附加了错误消息“请修复此字段”，这应该是我自己的自定义错误消息。

这是我所拥有的：

```
$("#adresse-form").validate({

        errorElement: "span",

        rules: {

            navn: {
                required: true,
                minlength: 5,
                maxlength: 25
            },
            tlf: {
                required: true,
                digits: true,
                minlength: 8,
                remote: {
                    url: "/ajax/check_tlf",
                    type: "post"
                }
            }
        },

        messages: {

            navn: "Field Name is required",
            tlf: {
                required: "Field tlf is required!",
                remote: function () { // i want to add the message aswell, not just the alert

                    alert("failed - tlf is already taken!");
                }
            }

        },
        submitHandler: function(form) {
            doSomethingGreatOnSuccess();
        },

        errorPlacement: function (error, element) {
            error.appendTo(element.parent());
        }

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:41:17.170

我从来不知道消息可以是一个函数，通常消息是一个字符串。但是，正如您所演示的，消息可以是函数。您没有显示消息的原因是，**如果消息是一个函数，它必须返回一个字符串**。

```
rules : {...}
messages: 
{
    tlf: 
    {
        required: "Field tlf is required!",
        remote: function (val) 
        {
           alert("failed - " + val + " is already taken!");
           return "remote validation failed";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T15:20:33.453

> **引用 OP 评论：** “返回的字符串每次都有效，但 `.reveal()`只有在页面加载后第一次触发。”

我认为您只会获得一次模态，因为 Validate 插件仅构造一次消息（然后使用隐藏/显示）。如果您希望每次都触发它，请尝试使用`highlight`回调函数。与 结合使用`onkeyup`并`onfocusout`设置为`false`。

```
onkeyup: false,
onfocusout: false,
highlight: function(element, errorClass) {
   if ($(element).attr('name') === 'remotefieldname') {
       $('#myModal').reveal();
   }
} 
```

**演示：http: [//jsfiddle.net/NFRvT/1/](http://jsfiddle.net/NFRvT/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T16:54:30.370

这是我如何让它工作的：

```
jQuery.validator.addMethod("avail",function(value,element){
    var isSuccess = true;

    $.ajax({
        url: "/avail",
        type: 'POST',
        data: { tlf: value },
        async: false,
        success: function (msg) {
            isSuccess = msg === "true" ? true : false;
            if (!isSuccess) {
                $('#myModal').reveal();
            }
        }
    });
    // return isSuccess;
}); 
```

在规则中：

```
tlf: {
                required: true,
                digits: true,
                minlength: 8,
                avail: true
            } 
```

和消息：

```
tlf: {
                required: 'Must enter phone number',
                avail: 'Phone number is already taken!'
            }, 
```

对于有类似问题的任何人，我在这里找到了很多帮助：[https ://stackoverflow.com/a/2628442/839716](https://stackoverflow.com/a/2628442/839716)

# java - 转换列表 to String[] in Java I need to convert from List to String[]. I made: List lst ... String arr = lst.toString(); But I got this st 问问题 问问题 2013-02-08T13:06:40.457 114217 次 This question shows research effort; it is useful and clear 18 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I need to convert from List to String[]. I made: List lst ... String arr = lst.toString(); But I got this string: ["...", "...", "..."] is just one string, but I need String[] Thanks a lot. You have to loop through the list and fill your String[]. String[] array = new String[lst.size()]; int index = 0; for (Object value : lst) { array[index] = (String) value; index++; } If the list would be of String values, List then this would be as simple as calling lst.toArray(new String[0]); javaarraysstringlist 4 7 回答 7 This answer is useful 27 您必须遍历列表并填写您的String[]. String[] array = new String[lst.size()]; int index = 0; for (Object value : lst) { array[index] = (String) value; index++; } 如果列表是String值，List 那么这将像调用一样简单lst.toArray(new String[0])； 于 2013-02-08T13:08:49.820 回答 This answer is useful 14 You could use toArray() to convert into an array of Objects followed by this method to convert the array of Objects into an array of Strings: Object[] objectArray = lst.toArray(); String[] stringArray = Arrays.copyOf(objectArray, objectArray.length, String[].class); 于 2013-02-08T13:12:36.353 回答 This answer is useful 10 Java 8 has the option of using streams like: List lst = new ArrayList<>(); String[] strings = lst.stream().toArray(String[]::new); 于 2015-06-23T12:06:27.553 回答 This answer is useful 5 If we are very sure that List will contain collection of String, then probably try this. List lst = new ArrayList(); lst.add("sample"); lst.add("simple"); String[] arr = lst.toArray(new String[] {}); System.out.println(Arrays.deepToString(arr)); 于 2013-02-08T13:22:41.647 回答 This answer is useful 2 Lot of concepts here which will be useful: List list = new ArrayList(Arrays.asList(new String[]{"Java","is","cool"})); String[] a = new String[list.size()]; list.toArray(a); Tip to print array of Strings: System.out.println(Arrays.toString(a)); 于 2013-02-08T19:05:49.753 回答 This answer is useful 2 Using Guava List lst ... List <string>ls = Lists.transform(lst, Functions.toStringFunction()); 于 2013-07-17T13:13:13.137 回答 This answer is useful 0 There is a simple way available in Kotlin var lst: List = ... listOFStrings: ArrayList <string>= (lst!!.map { it.name }) 于 2021-02-11T13:05:53.793 回答 Related 2 python - 使用可用库解决最小集覆盖 0 macos - 在 Mac 10.8.5 上从 en0 重定向（端口转发）到 bridge0（共享连接） 1 ajax - JOOMLA 2.5 / 使用 AJAX 请求登录 3 python - 将混合嵌套列表转换为线性字典 1 bash - 如何删除一个文件中一行的三个组件与另一个文件相似的行？ 2 c# - 无法在正则表达式构造函数实例化中使用逐字字符串 1 oracle - oracle中的分布式锁超时值是否可以修改 0 logging - 将来自 Apache 的 URI 和引用组合与 pig 相结合 1 java - 关于在 Java 中应用于 Swing 事件的适配器模式的一些说明 3 javascript - 将函数的脚本内容转换为字符串 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14773264
> 
> 赞同：18
> 
> 时间：
> 
> 标签：java, arrays, string, list

I need to convert from `List<Object>` to `String[]`.

I made:

```
List<Object> lst ...
String arr = lst.toString(); 
```

But I got this string:

```
["...", "...", "..."] 
```

is just one string, but I need String[]

Thanks a lot.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-08T13:08:49.820

您必须遍历列表并填写您的`String[]`.

```
String[] array = new String[lst.size()];
int index = 0;
for (Object value : lst) {
  array[index] = (String) value;
  index++;
} 
```

如果列表是`String`值，List 那么这将像调用一样简单`lst.toArray(new String[0])`；

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-08T13:12:36.353

You could use toArray() to convert into an array of Objects followed by [this method](https://stackoverflow.com/a/1018798/1063716) to convert the array of Objects into an array of Strings:

```
Object[] objectArray = lst.toArray();
String[] stringArray = Arrays.copyOf(objectArray, objectArray.length, String[].class); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-06-23T12:06:27.553

Java 8 has the option of using streams like:

```
List<Object> lst = new ArrayList<>();
String[] strings = lst.stream().toArray(String[]::new); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-08T13:22:41.647

If we are very sure that `List<Object>` will contain collection of `String`, then probably try this.

```
List<Object> lst = new ArrayList<Object>();
lst.add("sample");
lst.add("simple");
String[] arr = lst.toArray(new String[] {});
System.out.println(Arrays.deepToString(arr)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-08T19:05:49.753

Lot of concepts here which will be useful:

```
List<Object> list = new ArrayList<Object>(Arrays.asList(new String[]{"Java","is","cool"}));
String[] a = new String[list.size()];
list.toArray(a); 
```

**Tip to print array of Strings:**

```
System.out.println(Arrays.toString(a)); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-17T13:13:13.137

Using [Guava](https://code.google.com/p/guava-libraries/)

```
List<Object> lst ...    
List<String> ls = Lists.transform(lst, Functions.toStringFunction()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-11T13:05:53.793

There is a simple way available in Kotlin

```
var lst: List<Object> = ...

listOFStrings: ArrayList<String> = (lst!!.map { it.name }) 
```</string></string>

# javascript - 将模拟注入 AngularJS 服务

> ID：14773269
> 
> 赞同：115
> 
> 时间：2013-02-08T13:06:59.023
> 
> 标签：javascript, angularjs, mocking, jasmine, angularjs-service

我编写了一个 AngularJS 服务，我想对它进行单元测试。

```
angular.module('myServiceProvider', ['fooServiceProvider', 'barServiceProvider']).
    factory('myService', function ($http, fooService, barService) {

    this.something = function() {
        // Do something with the injected services
    };

    return this;
}); 
```

我的 app.js 文件已注册以下内容：

```
angular
.module('myApp', ['fooServiceProvider','barServiceProvider','myServiceProvider']
) 
```

我可以测试 DI 是这样工作的：

```
describe("Using the DI framework", function() {
    beforeEach(module('fooServiceProvider'));
    beforeEach(module('barServiceProvider'));
    beforeEach(module('myServiceProvder'));

    var service;

    beforeEach(inject(function(fooService, barService, myService) {
        service=myService;
    }));

    it("can be instantiated", function() {
        expect(service).not.toBeNull();
    });
}); 
```

这证明了服务可以由 DI 框架创建，但是接下来我想对服务进行单元测试，这意味着模拟出注入的对象。

我该怎么做呢？

我试过把我的模拟对象放在模块中，例如

```
beforeEach(module(mockNavigationService)); 
```

并将服务定义重写为：

```
function MyService(http, fooService, barService) {
    this.somthing = function() {
        // Do something with the injected services
    };
});

angular.module('myServiceProvider', ['fooServiceProvider', 'barServiceProvider']).
    factory('myService', function ($http, fooService, barService) { return new MyService($http, fooService, barService); }) 
```

但后者似乎完全停止了 DI 创建的服务。

有人知道我如何模拟单元测试的注入服务吗？

谢谢

大卫

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2013-09-12T05:53:41.407

您可以使用`$provide`.

如果您有以下具有依赖项的服务，该依赖项具有名为 getSomething 的方法：

```
angular.module('myModule', [])
  .factory('myService', function (myDependency) {
        return {
            useDependency: function () {
                return myDependency.getSomething();
            }
        };
  }); 
```

您可以注入 myDependency 的模拟版本，如下所示：

```
describe('Service: myService', function () {

  var mockDependency;

  beforeEach(module('myModule'));

  beforeEach(function () {

      mockDependency = {
          getSomething: function () {
              return 'mockReturnValue';
          }
      };

      module(function ($provide) {
          $provide.value('myDependency', mockDependency);
      });

  });

  it('should return value from mock dependency', inject(function (myService) {
      expect(myService.useDependency()).toBe('mockReturnValue');
  }));

}); 
```

请注意，由于对`$provide.value`您的调用实际上并不需要在任何地方显式注入 myDependency。它在 myService 注入期间发生在幕后。在这里设置 mockDependency 时，它很容易成为间谍。

感谢[LoyalBrown提供了](https://stackoverflow.com/a/17350129/373981)[该精彩视频](http://www.youtube.com/watch?v=qK-Z0oEdE4Y)的链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T20:32:43.267

在我看来，没有必要嘲笑服务本身。简单地模拟服务上的功能。这样，您就可以像在整个应用程序中那样使用 Angular 注入您的真实服务。然后，根据需要使用 Jasmine 的函数模拟服务上的`spyOn`函数。

现在，如果服务本身是一个函数，而不是一个可以使用的对象，那么`spyOn`还有另一种方法可以解决它。我需要这样做，并找到了一些对我来说效果很好的东西。请参阅[如何模拟作为函数的 Angular 服务？](https://stackoverflow.com/questions/14531904/how-do-you-mock-angular-service-that-is-a-function)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-11T04:41:49.007

在 Angular 和 Jasmine 中帮助简化模拟依赖项的另一个选择是使用 QuickMock。它可以在 GitHub 上找到，并允许您以可重用的方式创建简单的模拟。您可以通过下面的链接从 GitHub 克隆它。自述文件很容易解释，但希望它将来可以帮助其他人。

[https://github.com/tennisgent/QuickMock](https://github.com/tennisgent/QuickMock)

```
describe('NotificationService', function () {
    var notificationService;

    beforeEach(function(){
        notificationService = QuickMock({
            providerName: 'NotificationService', // the provider we wish to test
            moduleName: 'QuickMockDemo',         // the module that contains our provider
            mockModules: ['QuickMockDemoMocks']  // module(s) that contains mocks for our provider's dependencies
        });
    });
    .... 
```

它会自动管理上面提到的所有样板，因此您不必在每次测试中都写出所有模拟注入代码。希望有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-19T12:26:24.593

除了[John Galambos 的回答](https://stackoverflow.com/a/18756347/490560%20John%20Galambo's%20answer)：如果您只想模拟服务的特定方法，您可以这样做：

```
describe('Service: myService', function () {

  var mockDependency;

  beforeEach(module('myModule'));

  beforeEach(module(function ($provide, myDependencyProvider) {
      // Get an instance of the real service, then modify specific functions
      mockDependency = myDependencyProvider.$get();
      mockDependency.getSomething = function() { return 'mockReturnValue'; };
      $provide.value('myDependency', mockDependency);
  });

  it('should return value from mock dependency', inject(function (myService) {
      expect(myService.useDependency()).toBe('mockReturnValue');
  }));

}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-09T19:04:47.417

如果您的控制器被编写为接受这样的依赖项：

```
app.controller("SomeController", ["$scope", "someDependency", function ($scope, someDependency) {
    someDependency.someFunction();
}]); 
```

那么你可以`someDependency`像这样在 Jasmine 测试中做一个假的：

```
describe("Some Controller", function () {

    beforeEach(module("app"));

    it("should call someMethod on someDependency", inject(function ($rootScope, $controller) {
        // make a fake SomeDependency object
        var someDependency = {
            someFunction: function () { }
        };

        spyOn(someDependency, "someFunction");

        // this instantiates SomeController, using the passed in object to resolve dependencies
        controller("SomeController", { $scope: scope, someDependency: someDependency });

        expect(someDependency.someFunction).toHaveBeenCalled();
    }));
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-29T00:42:18.330

我最近发布了 ngImprovedTesting，它应该让 AngularJS 中的模拟测试更容易。

要使用模拟的 fooService 和 barService 依赖项来测试“myService”（来自“myApp”模块），您可以在 Jasmine 测试中执行以下操作：

```
beforeEach(ModuleBuilder
    .forModule('myApp')
    .serviceWithMocksFor('myService', 'fooService', 'barService')
    .build()); 
```

有关 ngImprovedTesting 的更多信息，请查看其介绍性博客文章：[http ://blog.jdriven.com/2014/07/ng-improved-testing-mock-testing-for-angularjs-made-easy/](http://blog.jdriven.com/2014/07/ng-improved-testing-mock-testing-for-angularjs-made-easy/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-30T08:15:45.217

我知道这是个老问题，但还有另一种更简单的方法，您可以创建模拟并禁用在一个函数中注入的原始代码，这可以通过在所有方法上使用 spyOn 来完成。请参阅下面的代码。

```
var mockInjectedProvider;

    beforeEach(function () {
        module('myModule');
    });

    beforeEach(inject(function (_injected_) { 
      mockInjectedProvider  = mock(_injected_);
    });

    beforeEach(inject(function (_base_) {
        baseProvider = _base_;
    }));

    it("injectedProvider should be mocked", function () {
    mockInjectedProvider.myFunc.andReturn('testvalue');    
    var resultFromMockedProvider = baseProvider.executeMyFuncFromInjected();
        expect(resultFromMockedProvider).toEqual('testvalue');
    }); 

    //mock all service methods
    function mock(angularServiceToMock) {

     for (var i = 0; i < Object.getOwnPropertyNames(angularServiceToMock).length; i++) {
      spyOn(angularServiceToMock,Object.getOwnPropertyNames(angularServiceToMock)[i]);
     }
                return angularServiceToMock;
    } 
```

# sublimetext2 - 如何修复/转换 Sublime Text 中的空格缩进？

> ID：14773271
> 
> 赞同：239
> 
> 时间：2013-02-08T13:07:15.437
> 
> 标签：sublimetext2, indentation, auto-indent

示例：如果我有一个缩进 2 个空格的文档，并且我希望它具有 4 个空格缩进，如何使用 Sublime Text 编辑器自动转换它？

* * *

## 回答 #1

> 赞同：545
> 
> 时间：2013-02-08T13:07:15.437

这是 Sublime Text 2 或 3 中的一个巧妙技巧，可以转换文档中的缩进间距。

**TL;博士：**

从 2 个空格转换为 4 个空格：

*确保制表符宽度设置为 2。将 2 空格缩进转换为制表符，切换到制表符宽度 4，然后将缩进转换回空格。*

**详细说明：**

去：

*   `View -> Indentation`

它应该是：

*   `Indent using spaces [x]`
*   `Tab width: 2`

选择：

*   `Convert Indentation to Tabs`

然后选择：

*   `Tab width: 4`
*   `Convert Indentation to Spaces`

完毕。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2014-01-30T15:18:22.623

实际上，我发现像这样定义用户偏好对我的理智更好：

```
"translate_tabs_to_spaces": true,
"tab_size": 2,
"indent_to_bracket": true,
"detect_indentation": false 
```

这`detect_indentation: false`尤其重要，因为它强制 Sublime 在每个文件中尊重这些设置，而不是`View -> Indentation`设置。

如果你想变得花哨，你还可以定义一个键盘快捷键来自动重新缩进你的代码（YMMV），方法是粘贴以下内容`Sublime -> Preferences -> Key Binding - User`：

```
[
  { "keys": ["ctrl+i"], "command": "reindent" }
] 
```

并可视化空白：

```
"indent_guide_options": ["draw_active"],
"trim_trailing_white_space_on_save": true,
"ensure_newline_at_eof_on_save": true,
"draw_white_space": "all",
"rulers": [120], 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-05-04T21:19:12.523

在我看来，我发现了一个比 Magne 更简单的解决方案：

在 Mac 上：

```
"cmd+f" => "  "(two spaces) => "alt+enter" => "arrow right" => "  "(two more spaces) => set tab width to 4(this can be done before or after. 
```

在 Windows 或其他平台上`cmd+f`，`alt+enter`无论您的`find`热键`select all`是什么，都会发生变化。

注意：如果您的代码中有多个空格，则此方法容易出现“错误”。因此，它不如 Magne 的方法安全，但它更快（至少对我而言）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-01-27T15:52:14.530

虽然许多建议在转换 2 -> 4 空间时都有效。我在转换 4 -> 2 时遇到了一些问题。

这是我最终使用的：

`Sublime Text 3/Packages/User/to-2.sublime-macro`

```
[
  { "args": null, "command": "select_all" },
  { "args": { "set_translate_tabs": true }, "command": "unexpand_tabs" },
  { "args": { "setting": "tab_size", "value": 1 }, "command": "set_setting" },
  { "args": { "set_translate_tabs": true }, "command": "expand_tabs" },
  { "args": { "setting": "tab_size", "value": 2 }, "command": "set_setting" }
] 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-04-20T05:24:15.903

我为它写了一个插件。您可以在[此处](https://github.com/kamilkp/Sublime-Text-ReIndent)找到它或在包控制中查找“ReIndent”。它与 Kyle Finley 所写的大部分内容相同，但以一种方便的方式使用 2 和 4 之间转换的快捷方式，反之亦然。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-01-29T15:37:48.963

如果您发现搜索和替换使用起来更快，您可以像这样使用正则表达式替换：

查找（正则表达式）：（`(^|\G) {2}`而不是*“{2}”* `<space>{2}`，您可以只写两个空格。为了清楚起见，在这里使用它。）

替换为 4 个空格，或者任何你想要的，比如`\t`.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-04-18T15:50:35.563

您必须将此代码添加到您的自定义键绑定中：

```
{ "keys": ["ctrl+f12"], "command": "set_setting", "args": {"setting": "tab_size", "value": 4} } 
```

通过按 ctrl+f12，它会将您的文件重新缩进为 4 的选项卡大小。如果您想要不同的选项卡大小，您只需更改“值”数字。Te格式是一个简单的json。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-17T07:36:49.010

我还按照 Josh Frankel 的建议创建了一个 Sublime Macro + 添加键绑定。不同之处在于此脚本确保首先将间距设置为制表符，然后将制表符大小设置为 2。如果这不是起点，则宏将不起作用。

这是宏的要点： [https ://gist.github.com/drivelous/aa8dc907de34efa3e462c65a96e05f09](https://gist.github.com/drivelous/aa8dc907de34efa3e462c65a96e05f09)

在 Mac 中，要使用宏 + 键绑定：

1.  创建一个名为`spaces2to4.sublime-macro`并从 gist 复制/粘贴代码的文件。对我来说，它位于：

> `/Library/Application\ Support/Sublime\ Text\ 3/Packages/User/spaces2to4.sublime-macro`

2.  选择`Sublime Text`> `Preferences`>`Key Bindings`
3.  将此命令添加到用户指定的 sublime-keymap（它在一个数组中——它可能是空的）：

```
{
    "keys": ["super+shift+o"],
    "command": "run_macro_file",
    "args": {
        "file":"Packages/User/spaces2to4.sublime-macro"
    }
} 
```

现在`⌘ + shift + o`自动将每个文件从 2 个空格缩进转换为 4 个（但如果你进一步运行它会继续缩进）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-23T08:18:28.600

我做的最简单的事情是，

> 将我的缩进更改为制表符

它解决了我的问题。

你也可以做到的，

> 到空间

以及根据您的需要。

提到了相同的快照。

[![在此处输入图像描述](../Images/0f7fd93a4593737777ff4683242f9556.png)](https://i.stack.imgur.com/DCXBI.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-11T07:47:31.730

最近我遇到了类似的问题。我正在使用崇高的编辑器。这不是代码的问题，而是编辑器的问题。

以下首选项设置的更改对我有用。

**Sublime Text 菜单 -> 首选项 -> 设置：语法特定**：

```
{
    "tab_size": 4,
    "translate_tabs_to_spaces": true
} 
```

# ios6 - 锚定页脚 UITableView

> ID：14773272
> 
> 赞同：0
> 
> 时间：2013-02-08T13:07:15.470
> 
> 标签：ios6, uitableview, footer

我实现`-(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section`了，我的页脚显示在最后一个 UITableView 单元格下方。到现在为止还挺好。

有没有办法让页脚视图粘在屏幕底部？如果表格视图只有几行，那么页脚后面有白色有点奇怪。在 CSS 中，我会寻找类似的东西`bottom: 0px`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:54:55.937

如果您在屏幕底部有用作页脚的视图，那么如果没有足够的单元格，您无论如何都会在最后一个表格视图单元格和页脚之间获得空白。

如果您想要屏幕底部的固定视图，则需要将其与表格视图分开。您将拥有一个带有两个子视图、页脚和表格视图的标准视图控制器。

这意味着您必须将 更改`UITableViewController`为`UIViewController`. 这涉及手动添加表视图作为属性、声明和分配`datasource`以及`delegate`在接口声明中。

# wpf - 将转换器绑定到缺少的属性

> ID：14773273
> 
> 赞同：0
> 
> 时间：2013-02-08T13:07:16.630
> 
> 标签：wpf, data-binding, ivalueconverter

我有一个`IEnumerable`包含`IPerson`的。这些`IPerson`最终成为不同的接口。有些人将拥有一个名为的属性，`DirectReports`但有些人不会拥有此属性。只会`IManager`。

如果他有财产，我将直接下属的列表绑定到该人。但是，如果他没有该属性（例如，该属性在此界面上不存在，而不仅仅是设置为 false 或 null），我希望将列表折叠起来。

所以，我只是制作了一个转换器，将 null 转换为 Visibility.Collapsed。但是，这不起作用。在调试中，事实证明，如果接口上不存在该属性，它甚至不会调用转换器。

这还有其他技巧吗？基本上，我想说，“如果界面缺少此属性，请折叠该控件。”

# android - Android Listview中surfaceview表现不佳

> ID：14773275
> 
> 赞同：0
> 
> 时间：2013-02-08T13:07:18.387
> 
> 标签：android, listview, surfaceview

我有一个 android 应用程序，其布局包含一个 Listview，它被充气

```
 LayoutInflater inflater = getLayoutInflater();
      row = inflater.inflate(R.layout.disc_row, parent, false); 
```

“R.layout.disc_row”包含一个绘制画布的 SurfaceView。所以 ListView 中的每一行都包含一个 Canvas。滚动列表时，画布停留在其位置，而行的其他元素正在滚动。我认为这是设备的不良行为。在单击 ListItem 之前，同一个应用程序不会在模拟器上绘制任何内容。

有没有更好的在 ListViews 内绘制的策略（没有位图，只有一些线条）可能使用 Paint？模拟器系统它在活动中做了太多的工作。

提前致谢

附加类

```
public class DrawDiscInListView extends SurfaceView implements
    SurfaceHolder.Callback {

private static final String TAG = "DISCONT SurfaceView";

public DrawDiscInListView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    tryDrawing(holder);
}

@Override
public void surfaceChanged(SurfaceHolder holder, int frmt, int w, int h) {
    tryDrawing(holder);
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
}

private void tryDrawing(SurfaceHolder holder) {
    Log.i(TAG, "Trying to draw...");

    Canvas canvas = holder.lockCanvas();
    if (canvas == null) {
        Log.e(TAG, "Cannot draw onto the canvas as it's null");
    } else {
        drawMyStuff(canvas);
        holder.unlockCanvasAndPost(canvas);
    }
}

private void drawMyStuff(final Canvas canvas) {
    Random random = new Random();
    Log.i(TAG, "Drawing...");
    canvas.drawRGB(255, 128, 128);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T17:28:44.517

我做了一些研究，我想在这里分享：

最后我没有使用 SurfaceView，而是使用了 ImageView：我使用 Canvas 创建位图，然后在 Listview 中使用位图。它工作正常且不会损失性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-07T14:36:38.340

迟到的回应，以防您或其他人可能需要。

如果你只是画一些没有任何动画或小动画的基本图形，你可以只继承 View 并覆盖**onDraw(Canvas)**方法。

虽然它仍然使用画布来创建图形，但它比创建位图并在 ImageView 中使用它占用更少的内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-24T14:55:24.530

我遇到了同样的问题“在滚动列表时，画布停留在其位置，而行的其他元素正在滚动”，这也发生在 VideoView 上，即

解决方法就是将 SurfaceView 的背景设置为透明，例如`android:background="#0000"`

我希望这有帮助！

谢谢

# javascript - 从另一个创建一个形状

> ID：14773276
> 
> 赞同：0
> 
> 时间：2013-02-08T13:07:19.410
> 
> 标签：javascript, html, canvas, three.js

三天试图在其他人物中创建一个动态人物，它不起作用。

使用 THREE.ExtrudeGeometry，转身： ![http://f3.s.qip.ru/cMfvUhBW.png](../Images/16ad754b54a901053c9e1f033df78cd4.png)

但“尾巴”应该是半径： ![http://f3.s.qip.ru/cMfvUhC1.png](../Images/912840ec57d5b7c19899f0993263d979.png)

没有一个参数 ExtrudeGeometry 不允许他做。在 3D 编辑器中绘制，然后绘制这个位置，它不会工作，因为尺寸必须动态变化

如何实施？或者如何粘合两个平面，一组弧并制作整个图形？ [http://f4.s.qip.ru/cMfvUhCj.png http://f4.s.qip.ru/cMfvUhCj.png](http://f4.s.qip.ru/cMfvUhCj.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:47:22.817

**斜角尺寸：-4**

结果：

![在此处输入图像描述](../Images/4ebdae1d210685b139d62a29e4f11c8a.png)

代码...

![在此处输入图像描述](../Images/fd0ed34f4b5c9c2a894a6c271bdf125e.png)

# php - 让大型 Mysqli 插入更高效

> ID：14773277
> 
> 赞同：1
> 
> 时间：2013-02-08T13:07:25.723
> 
> 标签：php, mysql, performance, mysqli

我有几个需要插入数据库的大表格。

我目前正在这样做

```
$stmt = $memberMysqli->prepare("INSERT INTO questionnairebespokeexerciseplan(userid,date,naturalbodytype,framesizewrist,framesizeelbow,fitnessgoals,workpattern,sleephours,runningbarriers,workcommute,workdistance,smoke,biomechanicalissues,limitingillness,reletivesheartproblems,birthlast12months,recurringinjuries,regularmedication,pregnant,anythingelsehealth,gymmember,runoutdoors,wouldyouliketorunoutdoors,homeequipments,whattypeequipment,exercisetime,heartratemonitor,restingheartrate,actualheartrate,maxheartrate,heartratesteadyrun,heartratebreathless,trainingshoes,preferredexercisetype,exerciseclasses,classdays,bike,bikemodel,runlunchtimebeforework,clubmember,clubschedule,personaltraining,otherheartrate,foottype) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");

$stmt->bind_param('ssssssssssssssssssssssssssssssssssssssssssss',
                                                $_POST['userid'],
                                        $date,
                                        $_POST['naturalbodytype'],
                                        $_POST['framesizewrist'],
                                        $_POST['framesizeelbow'],
                                        $_POST['fitnessgoals'],
                                        $_POST['workpattern'],
                                        $_POST['sleep'],
                                        $_POST['runbarriers'],
                                        $_POST['workcommute'],
                                        $_POST['workmiles'],
                                        $_POST['smoke'],
                                        $_POST['biomechanical'],
                                        $_POST['illnesses'],
                                        $_POST['heartcondition'],
                                        $_POST['givenbirth'],
                                        $_POST['injuries'],
                                        $_POST['medication'],
                                        $_POST['pregnant'],
                                        $_POST['anythingelse'],
                                        $_POST['gymmember'],
                                        $_POST['runoutdoors'],
                                        $_POST['liketorunoutside'],
                                        $_POST['homeequipment'],
                                        $_POST['equipment'],
                                        $_POST['besttime'],
                                        $_POST['heartratemonitor'],
                                        $_POST['restingheartrate'],
                                        $_POST['actualheartrate'],
                                        $_POST['actualmaxheartrate'],
                                        $_POST['heartratesteadyrun'],
                                        $_POST['heartratebreathless'],
                                        $_POST['trainingshoes'],
                                        $_POST['preferredexersize'],
                                        $_POST['classes'],
                                        $_POST['classdays'],
                                        $_POST['bike'],
                                        $_POST['whatbike'],
                                        $_POST['beforeworklunchtime'],
                                        $_POST['clubmember'],
                                        $_POST['clubschedule'],
                                        $_POST['personaltrainer'],
                                        $_POST['otherheartrate'],
                                        $_POST['foottype']
                                        ); 
```

我只是在想是否有更好/更快的方法来做到这一点？

目前，创建它需要一些时间，当事情不正确时对其进行调试同样耗时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:46:50.833

您可以自己编写一个脚本来自动生成此语句。**确保您保持字段名称一致**（在您的表单和数据库中），然后也许这样的一段代码可以为您工作：

```
// ADD ALL YOUR FIELDS TO THIS ARRAY. 
// THIS SHOULD BE THE ONLY PART OF THE CODE 
// WHICH YOU WILL HAVE TO MAINTAIN.

$fields = array(
'userid',
'date',
'naturalbodytype',
'framesizewrist' //etc. add all your fields
);

//you may have to adjust some fields manually:

$_POST['date'] = $date;

//HERE IS WHERE THE AUTOMATED PART STARTS
//YOU WONT EVER HAVE TO TOUCH THIS PART

//writing all fields for the query
$all_fields = implode(', ' $fields); 

//writing the correct number of questionmarks    
$questionmarks = str_repeat('?, ' count($fields)-1).'?';

//generate your statement
$stmt = $memberMysqli->prepare(
"INSERT INTO questionnairebespokeexerciseplan
 ( {$all_fields} ) 
 VALUES 
 ( {$questionmarks} )");

//write the correct amount of 's' characters for parameter types
$parameter_types = str_repeat('s' count($fields));

//generate the code which will write the parameters

$all_fields_to_bind=array();

foreach($fields as $field)
{
    $all_fields_to_bind[] = "\$_POST['". $field. "']";
}

//generate the code to be evaluated
$eval_statement = '$stmt->bind_param($parameter_types,'.implode(', ', $all_fields_to_bind).');';

//evaluate (meaning execute) your dynamically generated code
eval($eval_statement); 
```

**我没有对此进行测试**，可能仍然存在一些语法错误。我也不知道它有多安全！但它应该可以工作，因为我在 SELECT 语句中使用了类似的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T19:30:06.903

[SafeMysql](https://github.com/colshrapnel/safemysql)可以让你的代码缩短 3 倍。尽管列出所有允许的字段是必不可少的。

```
$allowed = explode(",","userid,date,naturalbodytype,framesizewrist,framesizeelbow,fitnessgoals,workpattern,sleephours,runningbarriers,workcommute,workdistance,smoke,biomechanicalissues,limitingillness,reletivesheartproblems,birthlast12months,recurringinjuries,regularmedication,pregnant,anythingelsehealth,gymmember,runoutdoors,wouldyouliketorunoutdoors,homeequipments,whattypeequipment,exercisetime,heartratemonitor,restingheartrate,actualheartrate,maxheartrate,heartratesteadyrun,heartratebreathless,trainingshoes,preferredexercisetype,exerciseclasses,classdays,bike,bikemodel,runlunchtimebeforework,clubmember,clubschedule,personaltraining,otherheartrate,foottype");

$data = $db->filterArray($_POST,$allowed);
$sql = "INSERT INTO questionnairebespokeexerciseplan SET ?u";
$db->query($sql, $data); 
```

# postgresql - pg_dump 压缩格式

> ID：14773279
> 
> 赞同：1
> 
> 时间：2013-02-08T13:07:27.920
> 
> 标签：postgresql, pg-dump

pg_dump`compress`选项有以下[描述](http://www.postgresql.org/docs/9.2/static/app-pgdump.html)：

> 指定要使用的压缩级别。零表示没有压缩。对于自定义存档格式，这指定了单个表数据段的压缩，默认为中等压缩级别。对于纯文本输出，设置非零压缩级别会导致整个输出文件被压缩，就好像它是通过 gzip 输入的一样；但默认是不压缩的。tar 归档格式目前根本不支持压缩。

这是否意味着存档将具有 gzip 格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:10:59.707

GZIP 文件格式具有以字节 0x1f、0x8b 开头的[标头。](http://www.gzip.org/zlib/rfc-gzip.html#header-trailer)

另一方面，由`pg_dump`自定义存档格式（选项`-Fc`）生成的文件以字母 P、G、D、M、P 开头，这足以断定它不是 gzip 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-07T16:49:50.243

`-Fc`格式被压缩；[根据文档](https://www.postgresql.org/docs/9.6/app-pgdump.html)：

> 默认情况下，此格式也是压缩的。

在该`--compress`部分下，它说明了自定义格式转储的压缩级别：

> 对于自定义存档格式，这指定了单个表数据段的压缩，默认为中等压缩级别。

# android - 如何在 webview 的 ontouchListner 中获取标签的位置

> ID：14773282
> 
> 赞同：0
> 
> 时间：2013-02-08T13:07:34.377
> 
> 标签：android, webview, touch, image

我创建了一个具有滚动侦听器和触摸侦听器的自定义 web 视图。我正在其中加载一个 HTML 代码，为此我使用了 javascript，它使用**for** Loop创建`img`标签。

 **```
String htnlString = "<!DOCTYPE html><html><body style = \"text-align:center\"><script type=\"text/javascript\">for(a=1;a<=10;a++)document.write('<img style=\"border-style:dotted;border-width:10px;border-color:black;\"src=\"http://shiaislamicbooks.com/books_snaps/EN183/'+a+'.jpg\" alt=\"Page Not Found\"/>');</script></body></html>";

wv.loadDataWithBaseURL(null, htnlString, "text/html", "UTF-8", null); 
```

现在我想获取`img`webview 的标签 onTouchListner 的位置。webview中是否有任何方法可以返回`<img>`标签的位置。

**整个代码**

```
import android.content.Context;
   import android.util.AttributeSet;
   import android.util.Log;
   import android.view.MotionEvent;
   import android.webkit.WebView;

   public class scorllableWebview extends WebView {
    private OnScrollChangedCallback mOnScrollChangedCallback;

public scorllableWebview(final Context context) {
    super(context);
}

public scorllableWebview(final Context context, final AttributeSet attrs) {
    super(context, attrs);
}

public scorllableWebview(final Context context, final AttributeSet attrs,
        final int defStyle) {
    super(context, attrs, defStyle);
}

@Override
protected void onScrollChanged(final int l, final int t, final int oldl,
        final int oldt) {
    super.onScrollChanged(l, t, oldl, oldt);
    if (mOnScrollChangedCallback != null)
        mOnScrollChangedCallback.onScroll(l, t);
}

public OnScrollChangedCallback getOnScrollChangedCallback() {
    return mOnScrollChangedCallback;
}

public void setOnScrollChangedCallback(
        final OnScrollChangedCallback onScrollChangedCallback) {
    mOnScrollChangedCallback = onScrollChangedCallback;
}

/**
 * Impliment in the activity/fragment/view that you want to listen to the
 * webview
 */
public static interface OnScrollChangedCallback {
    public void onScroll(int l, int t);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    Log.d("onTouchEvent", event.getAction() + "");

    // I want to get the position of <img> tag here.
   // what is the method which return the <img> tag position

    return super.onTouchEvent(event);
}
 } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:21:33.043

这取决于您获取触摸坐标的含义。

如果你的意思是在 android 坐标中，这里有一个可能的解决方案：

*   对于 webview 的 onTouchListener ，存储坐标并返回 false ，以便在 websiew 的内容上正常处理。

*   在 webview 中触摸 img 标签的 javascript 中，使用[addJavascriptInterface](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)方法调用 android 的一个函数（更多信息[在这里](http://android-developers.blogspot.co.il/2008/09/using-webviews.html)），告诉它 img 标签被触摸了。

*   在此功能中，您可以获取之前保存的坐标。

如果您的意思是 html 坐标，您可以跳过第一步，只需将它们传递给 android 框架。**

# php - 在 CakePHP 中使用 PHPExcel

> ID：14773283
> 
> 赞同：1
> 
> 时间：2013-02-08T13:07:40.723
> 
> 标签：php, phpexcel, cakephp-2.2

**背景**

好吧，我试图问这个问题，但它被关闭的速度比可怕的安全漏洞要快。我想使用 PEAR 的电子表格 Excel Writer 编写一个 excel 文件。我一直在谷歌上寻找一种简单的方法来做到这一点，最后[找到了一个](https://github.com/segy/PhpExcel)可以真正完成这项工作的助手。

但它使用 PHPExcel，所以我必须重写那个脚本，这是我最不担心的。我只是不想现在开始，然后仍然无法让它工作。

我还按照助手的要求下载[了 PHPExcel](http://phpexcel.codeplex.com/)。

**我有什么？**

我有助手，我已经将助手添加到控制器中，如下所示：

```
public $helpers = array('PhpExcel.PhpExcel'); 
```

我已经在线创建（复制并粘贴）脚本到视图中，只是为了测试它是否有效。

**问题是什么**

我收到一个错误：

```
Error: The application is trying to load a file from the PhpExcel plugin

Error: Make sure your plugin PhpExcel is in the app\Plugin directory and was loaded 
```

我已将文件包含在文件`APP/Vendor/PHPExcel.php`夹中（因为我在某处读到，如果插件不遵循 MVC 框架，则需要放入其中），但它仍然不起作用。也在插件目录中尝试过，同样的错误。这是我第一次使用助手（希望不是最后一次），所以我对此一无所知。

我还将`APP/View/Helper/`文件夹中的实际助手包含为`PhpExcelHelper.php`.

问题是我什至无法通过第 1 步。有人可以告诉我文件需要放在哪里以便我可以让它工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T08:43:41.363

如果你看一下 Helper 代码，你会注意到那里有这个函数叫做`loadEssentials`：

```
protected function loadEssentials() {
    // load vendor class
    App::import('Vendor', 'PHPExcel/Classes/PHPExcel');
    if (!class_exists('PHPExcel')) {
        throw new CakeException('Vendor class PHPExcel not found!');
    }
} 
```

现在您可以看到它在 PHPExcel 库的 Vendor 文件夹中查找。您应该做的是将 PHPExcel 代码放入`App/Vendor/`. 然后看看[如何加载供应商包](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-vendor-files)。然后助手应该在`App/View/Helper`并且当你实例化它时它应该工作。还要根据您的操作系统检查供应商中文件的 raed/write/excute 权限。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-05T21:25:21.683

我是插件的作者，我最近对其进行了更改，因此它包含供应商类并自动加载它们。希望这可以解决您的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-06T12:46:05.347

对于那些想直接将 PHPExcel 集成到 Cakephp (2.x) 中的人，这就是我所做的，我将它放在 App/Vendor 文件夹中。

1.  转到[https://github.com/PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel) 并下载整个 zip 文件。主要的核心文件夹是“类”。这就是我们将使用的。
2.  将文件夹“Classes”放入 Cakephp 文件夹“APP/Vendor/PHPExcel”。
3.  将其导入您的控制器，并在顶部使用此行：`App::import('Vendor', 'PHPExcel', array('file' => 'PHPExcel/Classes/PHPExcel.php'));`。记下“ **PHPExcel.php** ”文件的位置，并确保它在您的 Cakephp 文件夹中
4.  您现在可以使用此行访问该对象：`$objPHPExcel = new PHPExcel();`
5.  您在第一步下载的 PHPExcel zip 文件中有很多示例（[也可以在此处找到](https://github.com/PHPOffice/PHPExcel/tree/1.8/Examples)）

.

我的控制器中的完整示例（仅功能）

```
public function testxls() {

    $folderToSaveXls = '/var/www/html';

    $objPHPExcel = new PHPExcel();

    $objPHPExcel->getProperties()->setCreator("Maarten Balliauw")
                         ->setLastModifiedBy("Maarten Balliauw")
                         ->setTitle("PHPExcel Test Document")
                         ->setSubject("PHPExcel Test Document")
                         ->setDescription("Test document for PHPExcel, generated using PHP classes.")
                         ->setKeywords("office PHPExcel php")
                         ->setCategory("Test result file");

    $objPHPExcel->setActiveSheetIndex(0)
        ->setCellValue('A1', 'Hello')
        ->setCellValue('B2', 'world!')
        ->setCellValue('C1', 'Hello')
        ->setCellValue('D2', 'world!');

    $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
    $objWriter->save( $folderToSaveXls . '/test.xls' );

    } 
```

.

希望能帮助到你。

# wallpaper - 重启后 IActiveDesktop 壁纸淡入淡出效果不起作用

> ID：14773287
> 
> 赞同：3
> 
> 时间：2013-02-08T13:08:16.247
> 
> 标签：wallpaper

我错过了使用 IActiveDesktop 的东西吗？

故障现象： 系统（Win7/Win8）重启后换壁纸时的淡入淡出效果消失。

要恢复它，我必须手动转到“个性化 - >桌面背景”并将“图片位置”从“我的图片”（？）设置回“Windows桌面背景”，然后返回（！）。在此操作之后，淡入淡出效果再次正常工作，直到下一次系统重新启动。

我不明白是什么恢复了它以及如何阻止它。如何以编程方式设置“Windows 桌面背景”选项？什么系统在后台？

代码本身非常标准，取自 MSDN/CodeProject。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T03:35:54.760

您必须告诉 Windows 您要启用 ActiveDesktop。我每次都在通过 ActiveDesktop 设置壁纸之前告诉它。

```
public static void EnableActiveDesktop()
{
    IntPtr result = IntPtr.Zero;
    WinAPI.SendMessageTimeout(WinAPI.FindWindow("Progman", null), 0x52c, IntPtr.Zero, IntPtr.Zero, 0, 500, out result);
} 
```

您可以在此处的上下文中看到这一点：[https ://pulse.codeplex.com/SourceControl/changeset/view/72677#1589017](https://pulse.codeplex.com/SourceControl/changeset/view/72677#1589017)

# jquery - Modernizr 功能齐全

> ID：14773288
> 
> 赞同：2
> 
> 时间：2013-02-08T13:08:18.277
> 
> 标签：jquery, modernizr

这几天我开始使用 Modernizr，但有些东西我听不懂。我有这个代码：

```
Modernizr.load({
    test: Modernizr.generatedcontent,
    nope:['resources/js/selectivizr-min.js','style2.css'],
    complete: function() {}
}); 
```

正如你所看到的，我在“完成”上有这个空函数。没有它，modernizr 就不会将 selectivizr 和 style2.css 应用于页面。有人可以解释为什么会发生这种情况还是我做错了什么？谢谢你。

# android - 使用现有数据库在 sqlite 中创建表

> ID：14773289
> 
> 赞同：1
> 
> 时间：2013-02-08T13:08:19.070
> 
> 标签：android

我在名为 Player1 的应用程序中创建了一个名为 first.db 的数据库。我想使用相同的数据库从名为 Player2 的不同应用程序创建另一个表。我还从 Player1 向 player2 提供相同的“sharedUserId”。但是当我尝试在应用程序“Player2”中创建表时，它不会转到表的 onCreate 方法。

```
 public static final String KEY_ID="_id";
public static final String KEY_ClIENTID="_clientid";
public static final String KEY_LOCATION="_location";
public static final String KEY_MASTERDIRECTOR="_masterdirector";
public static final String KEY_IPADDRESS="_ipaddress";
public static final String KEY_SUBNETMASK="_subnetmask";
public static final String DATABASE_TABLE ="preptool";

private static final String DB_NAME = "first.db";
private static final int DB_VERSION = 1;

private DbHelper ourhelper;
private Context context;
private SQLiteDatabase ourdatabase; 

public dataBase(Context sharedContext){
    context = sharedContext; 
}
public class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context c) {
        super(c, DB_NAME, null, DB_VERSION); 
    }
    @Override
    public void onCreate(SQLiteDatabase db) { 
        System.out.println("in");
        try{
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " ("  +
                KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_ClIENTID + " TEXT NOT NULL, " +
                KEY_LOCATION + " TEXT NOT NULL, " +
                KEY_MASTERDIRECTOR + " TEXT NOT NULL, " +
                KEY_IPADDRESS + " TEXT NOT NULL, " +                    
                KEY_SUBNETMASK + " TEXT NOT NULL);");  
        }catch(Exception e){
        }
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS" + DATABASE_TABLE ); 
        onCreate(db);
    }
}
public dataBase open()throws SQLException{
    ourhelper = new DbHelper(context);  System.out.println(context);
    ourdatabase = ourhelper.getWritableDatabase(); 
    return this;
}
public void close(){
    ourhelper.close();
} 
```

下面的代码是我在我的 Player2 应用程序中编写的，用于从 Player1 应用程序访问数据库：

```
 Context sharedContext = null;
    try {
          sharedContext =     this.createPackageContext("com.xxx.android.player1",Context.CONTEXT_INCLUDE_CODE);
          if (sharedContext == null) {
                return;
          }
    } catch (NameNotFoundException e1) {
    }

    db = new dataBase(sharedContext);
    db.open(); 
```

# java - 如何解决 Android App Youtube Direct 上传 403 错误？

> ID：14773290
> 
> 赞同：0
> 
> 时间：2013-02-08T13:08:22.597
> 
> 标签：java, android, windows, upload, youtube

我试图制作一个从 sd 卡上传录制或选择的视频的 Android 应用程序。我设法通过 Youtube API 的浏览器方法（应用程序指向 youtube）做到了这一点，但我想在留在应用程序本身的同时直接上传到 Youtube。

然后我发现了应用程序“YouTube Direct” [http://code.google.com/p/ytd-android/](http://code.google.com/p/ytd-android/)就像我在自己的应用程序中想要的那样工作。问题是，YouTube 的演示应用程序无法在我的设备上运行。

当我尝试提交视频时，我收到错误消息： response code='Forbidden'(code 403) [http://uploads.gdata.youtube.com/resumable/feeds/api/users/default/uploads](http://uploads.gdata.youtube.com/resumable/feeds/api/users/default/uploads)

有人知道如何解决这个问题吗？

顺便说一句：我在这里找到了这个“教程”： [android youtube upload video with static username and password](https://stackoverflow.com/questions/10246212/android-youtube-upload-video-with-static-username-and-password/10432215#10432215)

但这不起作用，因为当我将 GlsAuthorizer.java 替换为 ClientLoginAuthorizer.java 时，此 Youtube Direct App 的其他类中出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-03T11:28:40.450

[您需要在https://console.developers.google.com/](https://console.developers.google.com/)上为您的项目设置 OAuth 2.0 客户端 ID 和 API 密钥

更多信息： [https ://developers.google.com/console/help/new/#setting-up-oauth-20](https://developers.google.com/console/help/new/#setting-up-oauth-20)

# asp.net - 在asp.net中使用Backgroundworker

> ID：14773293
> 
> 赞同：1
> 
> 时间：2013-02-08T13:08:35.663
> 
> 标签：asp.net, backgroundworker

谁能解释是否可以在 asp.net 中使用 Backgroundworker？如果这是一个坏主意，那为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-10T13:01:11.077

总的来说没有好坏之分，这完全取决于您将如何使用它，如果您考虑任何预期的未来问题，我发现这篇文章和里面的链接非常好 [http://www.hanselman.com/博客/HowToRunBackgroundTasksInASPNET.aspx](http://www.hanselman.com/blog/HowToRunBackgroundTasksInASPNET.aspx)

> 几年前，Phil Haack 写了一篇关于 ASP.NET 中重复执行后台任务的危险的精彩文章。在其中，他指出了一些当人们试图在后台工作时很常见的陷阱。阅读它，但这是他帖子的摘要。
> 
> 与请求无关的线程中未处理的异常将取消该进程。如果您在 Web Farm 中运行您的站点，您最终可能会得到多个应用程序实例，它们都尝试同时运行相同的任务。您的站点运行的 AppDomain 可能由于多种原因而关闭，并使用它取消您的后台任务。如果您认为您可以自己编写后台任务，那么您很可能会弄错。我不是在指责你的技能，我只是说它很微妙。另外，为什么你必须这样做？
> 
> 有很多很棒的方法可以让你在后台做事，还有很多可用的库和选择。
> 
> 一些 ASP.NET 应用程序将托管在数据中心的 IIS 中，而其他应用程序将托管在 Azure 云中。在我看来，使用范围大致是这样的：
> 
> 常规：Hangfire（或类似的类似开源库），用于在您的 ASP.NET 网站中编写后台任务 云：Azure WebJobs 一个正式的 Azure 功能，用于卸载在您的网站之外运行的后台任务并扩展工作负载 高级：Azure Worker Role在云服务中独立于您的网站扩展后台处理工作负载，并且您需要控制机器有很多关于如何使用 Azure WebJobs 的精彩文章和视频，以及很多关于可扩展 Azure 云服务中的工作角色如何工作的文档，但是没有太多关于您托管的 ASP.NET 应用程序如何轻松拥有后台服务的信息。这里有几个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:12:31.853

请参阅：[如何在 ASP.NET 中执行 BackgroundWorker 线程](http://forums.asp.net/t/1141831.aspx/1)

# vim - Vi/Vim 中 p 的不直观行为

> ID：14773301
> 
> 赞同：0
> 
> 时间：2013-02-08T13:09:08.767
> 
> 标签：vim, vi

在 Vim 中，当我们尝试粘贴最后一个 yank 时，我们按 p。那时，我希望将寄存器粘贴到我的光标所在的位置，而不是光标之后。

更准确地说，它的行为类似于“a”，它是“i”的特殊版本。但是“p”是一个非常原始的命令，我希望它表现得像“i”而不是“a”。

```
At the cursor - After the cursor
i - a
P - p 
```

额外的问题：为什么是`i+<esc>=h`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:16:48.787

^(很难与直觉争论——每个人都有自己的:-))

的行为的原因与 for`p`相同`a`：您需要一种在文本*之后粘贴的方法。*否则，将无法在行尾执行此操作（忽略较新的 Vim 设置，例如旧*vi*`'virtualedit'`中不存在的），并且在其他地方您必须在粘贴。

 *### 向左移动时

同样，光标向左移动`Esc`，使其始终位于有效字符上。有关更多详细信息和补救措施，请参阅[此 Vim Tips Wiki 页面](http://vim.wikia.com/wiki/Prevent_escape_from_moving_the_cursor_one_character_to_the_left)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T13:45:30.367

你很困惑：这些命令都不能“在光标处”工作，因为在正常模式下，光标总是*在*一个字符上。粘贴“在光标处”或进入插入模式“在光标处”意味着应该删除光标下的字符，这很少是我们想要的，并且行为`iapP`与此一致。

`i`不会在“光标处”而是“光标之前”启动插入模式，并`P`遵循相同的逻辑：未命名寄存器的内容被插入“光标之前”。

```
lore[m] ipsum
i
lore|m ipsum <-- before the cursor 
```

`a`在“光标之后”启动插入模式并`p`遵循相同的逻辑：未命名寄存器的内容被插入“光标之后”。

```
lore[m] ipsum
a
lorem| ipsum <-- after the cursor 
```

但是，如果无法粘贴现有`v{motion}p`文本`s`（

要充分利用 Vim，您必须接受模态，更具体地说，要习惯光标在正常模式下的行为。

奖励答案：退出插入模式时，正常模式光标位置始终位于插入模式光标左侧的字符上。这是一个半任意的选择，这种选择是有意义的，而相反的行为（将光标放在右侧）不会更有意义 IMO。*

# ruby-on-rails - 如何从用户数组中创建多对多关系

> ID：14773304
> 
> 赞同：0
> 
> 时间：2013-02-08T13:09:23.987
> 
> 标签：ruby-on-rails, many-to-many, relationships

我在@users 中得到了几个用户对象。我在 params[:task] 中有一个任务对象现在我想保存任务对象并添加所有@users 和该任务之间的关系......

```
@users = User.find(session[:user_id], params[:user_task])
@task = @users.tasks.create(params[:task])
@task.owner_id = session[:user_id]      

if @task.save
  redirect_to task_path(@task) 
```

我得到的只是一个错误，例如：数组的未定义方法“任务”。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:25:26.093

您需要首先初始化新任务，分配其所有者并保存它，如果成功，那么您可以创建与所有用户的关联。

像这样：

```
@task = Task.new(params[:task])
@task.owner_id = session[:user_id]
if @task.save
  @users = User.find(session[:user_id], params[:user_task])
  @users.each { |user| user.tasks << @task } 
```

# eclipse-rcp - 更改视图名称 swt eclipse

> ID：14773307
> 
> 赞同：1
> 
> 时间：2013-02-08T13:09:30.910
> 
> 标签：eclipse-rcp, rcp

谁能告诉我如何更改视图运行时的名称。

我有两种形式。我双击打开一个新表单的一个表单上的条目。我想用第一个表单的值更改第二个表单的视图名称。

在创建视图时，我在扩展选项卡下的 plugin.xml 和扩展元素详细信息中设置了初始名称（必填字段）。但是我不想要这个并且想在运行时根据第一种形式的值更改名称（如上所述）

我是 RCP 的新手，这让我发疯（花了将近 2-3 个小时，但在互联网上找不到）

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T17:08:33.170

您需要在 ViewPart 上设置零件名称

```
org.eclipse.ui.part.ViewPart

protected void setPartName(String partName) 
```

# maven - Maven 程序集不工作

> ID：14773316
> 
> 赞同：0
> 
> 时间：2013-02-08T13:09:56.807
> 
> 标签：maven

我有一个 maven 项目并编写了 assembly.xml 来以所需的方式组装包。我能够在 Eclipse 中将我的项目成功打包到我的本地机器上，但是当我签入项目并且 Jenkins 触发了构建时，它根本不起作用。线后

> 读取程序集描述符：src/main/assembly/assembly.xml

构建没有进一步进行。我认为它进入了死锁模式。如何解决这个问题？没有任何提示，因为它在 Eclipse 中运行成功

# visual-studio-2012 - 如果我关闭然后打开 Visual Studio 12，仅我的代码选项不会持续存在

> ID：14773322
> 
> 赞同：2
> 
> 时间：2013-02-08T13:10:07.553
> 
> 标签：visual-studio-2012

使用 Visual Studio 12：

我打开工具/选项/调试并检查只是我的代码并点击保存。

然后我关闭VS，然后再次打开。我打开工具/选项/调试，不再检查只是我的代码。

换句话说，只要我打开 VS，它就会一直处于选中状态。当我关闭它时，我必须在下次打开我的项目时重置它。

Visual Studio 10 很好地保存了该选项。

知道这是怎么回事吗？

格雷格

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T13:51:15.153

您是否安装了 Reflector 插件？有时似乎会恢复此设置。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-28T11:07:12.280

.Net Reflector 有一个设置，以防您安装它。只需关闭复选框应该会有所帮助。我添加了一个屏幕截图，显示安装了 .Net Reflector 的 Visual Studio 2012。

![视觉工作室 2012](../Images/0c3cb6985195f1552ab38963f284f91a.png)

# android - Google 云打印 WebView 示例不起作用

> ID：14773323
> 
> 赞同：1
> 
> 时间：2013-02-08T13:10:08.990
> 
> 标签：android, google-cloud-print

我正确设置了我的打印机，从第三方应用程序打印工作。

但我想从我自己的 android 应用程序中打印。我绑了官方教程： [https ://developers.google.com/cloud-print/docs/android](https://developers.google.com/cloud-print/docs/android)

但是 WebView 中的打印按钮不起作用。

有什么诀窍:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T18:30:37.247

在我在 Android 开发者网站上找到解决方案之前，我遇到了同样的问题：http: [//developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)。

您应用的`targetSdkVersion`AndroidManifest.xml 中的 可能设置为 17 或更高。在这种情况下，您需要对`PrintDialogActivity`从 Google Developer 网站获得的内容进行小幅更改。您需要将注释添加`@JavascriptInterface`到类中的公共方法中`PrintDialogJavaScriptInterface`。

```
final class PrintDialogJavaScriptInterface
{
    @JavascriptInterface
    public String getType()
    {
        return cloudPrintIntent.getType();
    }

    @JavascriptInterface
    public String getTitle()
    {
        return cloudPrintIntent.getExtras().getString("title");
    }

    @JavascriptInterface
    public String getContent()
    {
        try
        {
            ContentResolver contentResolver = getContentResolver();
            InputStream is = contentResolver.openInputStream(cloudPrintIntent.getData());
            ByteArrayOutputStream baos = new ByteArrayOutputStream();

            byte[] buffer = new byte[4096];
            int n = is.read(buffer);
            while (n >= 0)
            {
                baos.write(buffer, 0, n);
                n = is.read(buffer);
            }
            is.close();
            baos.flush();

            return Base64.encodeToString(baos.toByteArray(), Base64.DEFAULT);
        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        return "";
    }

    @JavascriptInterface
    public String getEncoding()
    {
        return CONTENT_TRANSFER_ENCODING;
    }

    @JavascriptInterface
    public void onPostMessage(String message)
    {
        if (message.startsWith(CLOSE_POST_MESSAGE_NAME))
        {
            finish();
        }
    }
} 
```

# android - 在弹出窗口中显示网格视图

> ID：14773330
> 
> 赞同：1
> 
> 时间：2013-02-08T13:10:30.797
> 
> 标签：android

我有一个问题，我想`GridView`在弹出窗口中显示带有图像和文本的自定义。图片来自网络服务，但我的适配器无法显示`GridView`项目。我不知道为什么？请向我建议任何有关相同的解决方案。

**代码：**

```
private void showSearchPopUp()
    {
        View view = LayoutInflater.from(VideoActivity.this).inflate(R.layout.search_pop_up, null);
        PopupWindow popupWindow = new PopupWindow(
                   view, 
                   LayoutParams.WRAP_CONTENT,  
                         LayoutParams.WRAP_CONTENT);  
        popupWindow.setWidth(1230);
        popupWindow.setHeight(800);
        //popupWindow.showAtLocation(imgSearch, Gravity.LEFT|Gravity.TOP, 0, -30);
        popupWindow.showAsDropDown(relHeader, 0, -30);  

        LinearLayout llSearchAlpha = (LinearLayout)view.findViewById(R.id.llSearchAlpha);
        TextView tvAlpha;
        for(int i=0;i<alpha.length;i++)
        {
            tvAlpha = new TextView(VideoActivity.this);
            tvAlpha.setTextColor(Color.WHITE);
            tvAlpha.setText(alpha[i]);
            tvAlpha.setTextSize(15);
            tvAlpha.setLayoutParams(new LinearLayout.LayoutParams(
                        LayoutParams.WRAP_CONTENT,
                        LayoutParams.WRAP_CONTENT, 1f));
            llSearchAlpha.addView(tvAlpha);
        }
        getActors();
    }

private void getActors()
    {
        View view = LayoutInflater.from(VideoActivity.this).inflate(R.layout.search_pop_up, null);
        final GridView grid = (GridView)view.findViewById(R.id.gvSearch);
        grid.setWillNotDraw(false);
        grid.setFocusableInTouchMode(true);
        grid.setClickable(true);
        new Thread(new Runnable() {

            @Override
            public void run() {
                actors = Server.getSearchActor();
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        SearchActorCategoryLazyAdapter searchAdapter = new SearchActorCategoryLazyAdapter(VideoActivity.this, actors);
                        grid.setAdapter(searchAdapter);
                    }
                });
            }
        }).start();
    }

public class SearchActorCategoryLazyAdapter extends BaseAdapter 
{
    Context _contextObj;
    List<Actor>  listActor;
    private LayoutInflater inflater;
    private ImageLoader imageLoader;
    public SearchActorCategoryLazyAdapter(Context context, List<Actor> listActor)
    {
        _contextObj = context;
        this.listActor = listActor;
        this.inflater = (LayoutInflater) _contextObj.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.imageLoader = new ImageLoader(_contextObj.getApplicationContext());
    }
    @Override
    public int getCount() 
    {
        return listActor.size();
    }
    @Override
    public Object getItem(int position) 
    {
        return null;
    }
    @Override
    public long getItemId(int position) 
    {
        return 0;
    }

    static class ViewHolder 
    {
        TextView tvActorName;
        ImageView imgSearch;
        int position;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder viewHolderObj = new ViewHolder();

        LayoutInflater inflaterObj = (LayoutInflater)_contextObj.getSystemService(Service.LAYOUT_INFLATER_SERVICE);

             if (convertView == null) {
                 convertView = (View)inflaterObj.inflate(R.layout.search_griditem, parent,true);
                }
            viewHolderObj.tvActorName = (TextView)convertView.findViewById(R.id.tvSearchName);
            viewHolderObj.imgSearch = (ImageView)convertView.findViewById(R.id.imgSearch);

            viewHolderObj.tvActorName.setText(listActor.get(position).getActor_name());
            Activity activity = (Activity)_contextObj;
            imageLoader.displayImage(listActor.get(position).getActor_image(), activity, viewHolderObj.imgSearch);

        return convertView;
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:22:30.580

我找到了解决方案，我将弹出窗口的视图膨胀了两次。在显示项目时，我再次放大视图然后它不会反映在屏幕上。

使用相同的膨胀视图来显示弹出窗口及其包含的项目。

谢谢。

# android - 如何在浏览器中打开本地html页面

> ID：14773336
> 
> 赞同：6
> 
> 时间：2013-02-08T13:10:49.317
> 
> 标签：android, browser

我正在制作一个应用程序，我想在浏览器中打开一个本地 html 页面。我能够打开 google.com。但是当我打开本地 html 文件时。但我收到以下错误

> **未找到请求文件。**

以下是我的代码：

```
try
    {
        Intent i = new Intent(Intent.ACTION_VIEW);
        File f=new File("file:///android_asset/www/trialhtml.html");
        Uri uri = Uri.fromFile(f);
        i.setClassName("com.android.browser", "com.android.browser.BrowserActivity");
        i.setData(uri);
        startActivity(i);
    }
    catch(Exception e)
    {
      System.out.print(e.toString());   

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:17:21.687

file:///android_asset/www/trialhtml.html 对于像 Web 浏览器这样的外部应用程序没有任何意义。其他应用程序无法访问您资产中的任何文件。您有 2 个选项。

1.  将 html 文件复制到共享存储，以便网络浏览器可以访问该文件。
2.  然后在应用程序的新 Activity 或片段中实现 WebView `webview.loadUrl("file:///android_asset/www/trialhtml.html");`

您不需要像其他答案指导您那样阅读资产。WebView 将在幕后处理这一切，包括加载其他资产，如图像

附带说明一下，如果网络浏览器能够读取您的文件，您就不想使用

```
 i.setClassName("com.android.browser", "com.android.browser.BrowserActivity"); 
```

这是因为您明确要求使用特定浏览器，该浏览器可能会或可能不会安装在用户的设备上。我有理由确定在某些仅安装了 Chrome 的现代 Android 设备上并非如此。正确的用法是这样的

```
Uri uri = Uri.parse("http://www.example.com"); 
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

通过不显式设置类和包名称，这可以确保无论安装哪个 Web 浏览器，都会选择用户默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:18:22.487

打开并加载为原始资源，然后放入[WebView](http://developer.android.com/reference/android/webkit/WebView.html)中`loadData`：

```
InputStream page = getResources()
   .openRawResource(R.raw.my_web_page);
 BufferedReader r = new BufferedReader(new InputStreamReader(page));
String s;
while ((s = r.readLine()) != null)
  builder.append(s);
r.close();
myWebView.loadData(builder.toString(), "text/html", "UTF-8"); 
```

只有您自己的应用程序才能轻松读取您的资产。

如果您需要完全使用外部浏览器打开文件，请将获取的字符串保存到外部浏览器也可以访问的某个公共位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:15:32.393

您需要使用 Android Assetmanager 来读取 assets 中的文件

```
AssetManager am = context.getAssets();
InputStream is = am.open("trialhtml.html"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T14:12:30.307

尝试使用 webView 你可以打开它。如果您在 html 中使用 java 脚本文件，那么您必须添加

> webView.getSettings().setJavaScriptEnabled(true);

进入您的活动，并将 javascript 文件添加到 assest/www 文件夹中。

```
webView = (WebView)findViewById(R.id.webView);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebChromeClient(new WebChromeClient());
        webView.loadUrl("file:///android_asset/www/index.html"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-30T13:35:45.240

要将 html 字符串保存为文件：

```
 public File saveStringToHtmlFile(String htmlString) {
        File htmlFile = null;
        try {
            // If the file does not exists, it is created.
            htmlFile = new File((ContextUtils.getAppContext()).getExternalFilesDir(null), "HTML_FILE_NAME.html");
            if (!htmlFile.exists()) {
                htmlFile.createNewFile();
            }

            // Adds a line to the file
            BufferedWriter writer = new BufferedWriter(new FileWriter(htmlFile, false));
            writer.write(htmlString);
            writer.close();
        } catch (IOException e) {
            Log.e(TAG, "Unable to write to HTML_FILE_NAME.html file.");
        }
        return htmlFile;
    } 
```

用浏览器打开 html 文件：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(htmlFile), "text/html");
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

# iphone - MPMoviePlayerViewController 完成按钮未删除播放器

> ID：14773338
> 
> 赞同：0
> 
> 时间：2013-02-08T13:10:53.337
> 
> 标签：iphone, ios, mpmovieplayercontroller

我的应用程序必须在 iOS5 和更高版本中运行。我正在将 MPMoviePlayerViewController 添加到 mainWindow 单击按钮时。moviePlayerController 的完成按钮不会从窗口中删除moviePlayerController。

我的代码是

```
 NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                     pathForResource:@"001 ATSW" ofType:@"m4v"]];
   self.player =  [[MPMoviePlayerViewController alloc]
                initWithContentURL:url];
[[NSNotificationCenter defaultCenter] addObserver:self         selector:@selector(videoPlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:nil];

[self.player.view setFrame:[UIScreen mainScreen].bounds];
[[[UIApplication sharedApplication] keyWindow] addSubview:self.player.view];
[[self.player moviePlayer] play];
  }
 -(void)videoPlayBackDidFinish:(NSNotification*)notification  {

  [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:nil];

[self.player.moviePlayer stop];
self.player = nil;
[self.player.view removeFromSuperview];
  } 
```

如何在单击完成按钮时删除moviePlayerController。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:26:43.040

如文档中所述：

> 要关闭模态呈现的电影播放器​​视图控制器，请调用该`dismissMoviePlayerViewControllerAnimated`方法。

与 Apple 的其他预配置控制器（例如邮件撰写控制器或图像选择器控制器）一样，您有责任关闭控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:45:01.273

您可能需要做的是实际使用

```
presentMoviePlayerViewControllerAnimated:(MPMoviePlayerViewController *)playerVC 
```

方法来呈现 MPMoviewPlayerViewController，而不是直接插入视图。由于 MPMoviewPlayerViewController 在按下完成按钮时试图自行关闭。从我所见，没有什么好的方法可以倾听并像电影结束时那样做。

这可能取决于您的应用程序是如何构建的，但类似于

```
[[[[UIApplication sharedApplication] keyWindow] rootViewController] presentMoviePlayerViewControllerAnimated:player]; 
```

您应该能够替换所有代码以插入视图，然后只需使用

```
[[[[UIApplication sharedApplication] keyWindow] rootViewController] dismissMoviePlayerViewControllerAnimated]; 
```

# jsp - JSP Tutorial Scriptlets 标签的区别

> ID：14773344
> 
> 赞同：0
> 
> 时间：2013-02-08T13:11:33.640
> 
> 标签：jsp

请任何人解释 **<%! ... %>**和**<% ...%>**标签

```
<%!

     String str2 = "xyz";    
     String mainMenuItems=Resources.get("sample_variyable");      

     %>     

     <% 
      String path= "samplePath"; 

     %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:15:36.200

`<% ... %>` => 脚本

`<%! ... %>`=> 声明

# unix - 使用查找和替换 cmd 修改 grep 输出

> ID：14773350
> 
> 赞同：0
> 
> 时间：2013-02-08T13:11:37.503
> 
> 标签：unix

我使用 grep 将日志大文件排序为小文件，但输出日志文件中仍然有很长的 dir 路径，这很常见。我每次都必须查找和替换。

我没有办法 grep -r "format" log.log | 执行`findnreplce`事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:33:17.980

`Sed`会做你想做的。在 $file 中用 bar 就地替换 foo 的所有匹配项的基本语法是：

`sed -i 's/foo/bar/g' $file`

如果您只是想删除而不是替换，只需省略“bar”（所以 s/foo//g）。

有关更多详细信息，请参阅[本教程](http://www.grymoire.com/Unix/Sed.html)，例如正则表达式支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:44:22.990

```
sed -n '/match/s/pattern/repl/p' 
```

将打印与 regex 匹配的所有行`match`，并将所有实例`pattern`替换为`repl`. 由于您的行可能包含路径，您可能希望使用不同的分隔符。`/`是习惯性的，但你也可以这样做：

```
sed -n '\@match@s@@repl@p` 
```

在第二种情况下，省略`pattern`将导致`match`用于要替换的模式。

# php - Mysql 实时数据库迁移/转换

> ID：14773351
> 
> 赞同：3
> 
> 时间：2013-02-08T13:11:42.127
> 
> 标签：php, mysql

这可能是任何团队在某个时候都会遇到的，所以我指望其他人的经验。

我们正在将旧的 MySQL 数据库迁移到结构发生了很大变化的新数据库。一些表被拆分为多个较小的表，一些数据从多个较小的表连接到一个较大的表。

我们进行了测试，将数据库迁移到新表单需要几个小时。问题是，旧数据库是我们的生产数据库，每分钟都在变化。我们不能有几个小时的停机时间。

在这种情况下，您认为哪种方法可以？

假设您有一个名为“users”的表，其中有 1M 行。每一秒都在变化。更新了一些字段，添加了一些行，删除了一些行。这就是为什么我们无法在某个时间点制作快照的问题，因为迁移完成后，我们将有 3 小时的数据未同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:39:11.600

我过去使用的一种方法是使用[复制。](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

我们在旧的生产数据库和用于数据迁移的从属数据库之间创建了一个复制方案。开始迁移时，我们暂时关闭了复制，使用从库作为迁移的数据源；旧的生产系统仍在运行。

一旦迁移脚本完成，并且我们的一致性检查已经运行，我们重新启用从旧生产系统到复制的从属系统的复制。复制完成后，我们在生产中挂起“停机维护”标志，重新运行数据迁移脚本和一致性检查，将系统指向新数据库，并取下“停机维护”标志。

有停机时间，但只是几分钟，而不是几小时。

这确实取决于您的数据库架构，以便轻松识别更改/新数据。

如果您的架构不适合轻松查询以查找新的或更改的记录，并且您不想添加新列来跟踪这一点，最简单的解决方案是创建单独的表来跟踪迁移状态。

例如：

```
TABLE: USERS (your normal, replicated table)
----------------------
USER_ID
NAME
ADDRESS
.....

TABLE: USERS_STATUS (keeps track of changes, only exists on the "slave")
-----------------
USER_ID
STATUS
DATE 
```

您可以通过 USERS 表上的触发器填充此表以进行插入、删除和更新 - 对于这些操作中的每一个，您都设置了单独的状态。

这使您可以快速找到自运行第一个迁移脚本以来发生更改的所有记录，并且只迁移这些记录。

因为您没有修改生产环境，并且触发器仅在“从属”环境中触发，所以您不应在生产环境中引入任何性能或不稳定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:32:16.177

您能否将新数据库与当前数据库并行运行？这样，您以后可以将旧数据从旧数据库迁移到新数据库，并且您的“实时”情况将已经在新数据库上捕获。

我的意思是：当您向旧数据库写入内容时，您还必须将数据写入新数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:28:52.807

我曾经使用过一种方法，它也应该适用于您，但是您需要为此修改您的生产数据集。简单地说：

1.  向您要迁移的每个表添加一个名为“已迁移”（或左右）的新列。给它一个布尔类型。默认设置为 0。
2.  当您的迁移脚本运行时，它必须为已迁移到新数据库的每个条目将此标志设置为 1。所有已经为“1”的条目都必须被忽略。这样你就不会遇到同步问题。

这样您就可以随意运行迁移脚本。

您将有一段停机时间，但这只是最短的时间，因为在停机期间您只需迁移几个数据集（实际上是上次运行迁移脚本与现在之间的最后一个“增量”）。

# jquery - 带有大量选项的多选控件打开一个对话框视图

> ID：14773353
> 
> 赞同：1
> 
> 时间：2013-02-08T13:11:50.240
> 
> 标签：jquery, jquery-mobile, jquery-ui-dialog, multi-select

我的移动网站有一些多选控件。具有少量项目 (5) 的多选正常显示，如多选（移动样式/格式），但项目多于 5 的多选在新页面中显示为拨号视图。我应该怎么做才能防止多选出现视图？谢谢！多选代码：

```
<div class="field ">
        <label for="offices" class="select">
            Office(s):
        </label>
        @Html.ListBoxFor(m => m.Offices, Model.ListOfOffices, new { Multiple = "multiple", data_theme = "a", data_overlay_theme = "c", inline = "true", data_native_menu = "false" })
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:19:56.503

我知道的唯一选项是本机表单元素选项

*   [http://jquerymobile.com/demos/1.2.0/docs/forms/forms-all-native.html](http://jquerymobile.com/demos/1.2.0/docs/forms/forms-all-native.html)

> 尽管该框架自动将表单元素和按钮增强为触摸输入优化控件以简化开发，但很容易告诉 jQuery Mobile 不理会这些元素，因此可以使用标准的原生控件来代替。
> 
> 将 data-role="none" 属性添加到任何表单或按钮元素会告诉框架不应用任何增强的样式或脚本。下面的例子都有这个属性来演示效果。您可能需要编写自定义样式来布置表单控件，因为我们试图保持所有默认样式不变。
> 
> 从 1.1 版开始，将 data-enhance="false" 属性添加到任何容器都会告诉框架不要增强内部的任何元素。要激活此功能，必须将 $.mobile.ignoreContentEnabled 设置为 true。使用前查看配置默认值。

# .net - 正则表达式正好七位数

> ID：14773364
> 
> 赞同：-5
> 
> 时间：2013-02-08T13:12:47.750
> 
> 标签：.net, regex

怎样才能写出符合要求的正则表达式：连续出现的7位数字

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:14:43.623

`/^\d{7}$/`应该做的伎俩。

请考虑自己看，这很琐碎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:14:58.637

像这样：`\d{7}`或`[0-9]{7}`或`[:digit:]{7}`或明确喜欢`\d\d\d\d\d\d\d`或`[0-9][0-9][0-9][0-9][0-9][0-9][0-9]`取决于您使用的语言/工具。这些都将匹配一个 7 位数字的字符串，但您需要锚定匹配项，以便使用开始和结束字符`^\d{7}$`（如空格）或某种类型的边界（如空格）仅匹配 7 位数字`\s\d{7}\s`。

注意：`{n}`是扩展的正则表达式类的一部分。

# unicode - Java 7 错误：通过 Unicode 文字显示泰卢固语

> ID：14773366
> 
> 赞同：1
> 
> 时间：2013-02-08T13:12:54.577
> 
> 标签：unicode, rendering, java-7, unicode-literals

在 Java 7 中通过 unicode 显示泰卢固语时，java 渲染混合不正确。

例如，这是一个在 HTML 中显示单词的简单片段。它工作得很好。所有浏览器都正确显示文本。

```
<!DOCTYPE html>
<html>
<body> &#x0C05&#x0C2E&#x0C4D&#x0C2E </body>
</html> 
```

但是，在 Java 中使用相同的文字（这里我将相同的文本设置到文本区域，显示会混乱。

```
 Font text_font = new Font ("Gautami", Font.PLAIN, 30);
jtaInput.setFont(text_font);
jtaInput.setText("\u0C05\u0C2E\u0C4D\u0C2E"); 
```

在 unicode 字符渲染的上下文中是否有人面临 Java 7 的问题？有什么技巧/想法可以克服这个问题吗？

谢谢湿婆贾斯蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-05T23:07:45.720

尝试使用不同的字体；在 Java 5 和 Java 6 中工作的字体在 Java 7 中停止工作。当我移动到新字体时，显示恢复正常。

# c# - arg 表达式数组 > 作为流畅界面的一部分

> ID：14773371
> 
> 赞同：0
> 
> 时间：2013-02-08T13:13:10.520
> 
> 标签：c#, lambda, expression-trees, fluent-interface

考虑这样的接口：

```
new Provider().For(myClass).ExcludeProperties("Height", "Width");

public IEditableStateProvider For(object target) {...}
public IEditableStateProvider ExcludePropertyNames(params string[] propertyNames) {...} 
```

我想将`params string[] propertyNames`arg替换为，`params Expression<Func<object>>[] propertyNames`以便获得以下内容。

```
new Provider().For(myClass).ExcludeProperties(()=>Height, ()=>Width); 
```

我见过类似的代码，所以我认为它*应该可以*工作，但我还没有得到它。我怎样才能让它工作？

# 编辑 - 这样做没有泛型

这是一个开源项目的一些代码，我正在研究类型推断在没有任何泛型的情况下工作的地方。我也想做同样的事情，但我看不到类型推断的来源（我*确实*看到它有效！）

```
// USAGE (here this is being called from code-behind of a WPF window

private void TrackSelectedTab() {
    Services.Tracker.Configure(tabControl)
        .AddProperties(() => tabControl.SelectedIndex);
    Services.Tracker.ApplyState(tabControl);
}

private void TrackMainWindow() {
    Services.Tracker.Configure(this)
        .AddProperties(
            () => Height,
            () => Width,
            () => Left,
            () => Top,
            () => WindowState)
        .SetKey("MainWindow")
        .SetMode(PersistModes.Automatic);

    Services.Tracker.ApplyState(this);
}

// Collab classes

public class SettingsTracker
{   
    public TrackingConfiguration Configure(object target) {
        ...
        return config;
    }
}

public class TrackingConfiguration
{
    public TrackingConfiguration AddProperties(params Expression<Func<object>>[] properties) {
        ...
        return this;
    }
}

static class Services
{
    public static readonly SettingsTracker Tracker = new SettingsTracker(ObjectStore);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:35:10.663

除了非泛型类之外，您还应该创建一个泛型`Provider`类，这样您就可以利用类型推断和类型安全：

界面：

```
interface IEditableStateProvider<T>
{
     IEditableStateProvider<T> For(T target);
     IEditableStateProvider<T> ExcludePropertyNames(params Expression<Func<T, object>>[] excludedProperties);
} 
```

虚拟实现：

```
class Provider<T> : IEditableStateProvider<T>
{
    public IEditableStateProvider<T> For(T target) 
    { 
        // dummy
        return this;
    }
    public IEditableStateProvider<T> ExcludePropertyNames(params Expression<Func<T, object>>[] excludedProperties) 
    {
        // dummy
        return this;
    }
}
class Provider
{
    // generic factory method to make use of type inference
    public static IEditableStateProvider<T> For<T>(T obj)
    {
        return new Provider<T>().For(obj);
    }
} 
```

用法：

```
var myClass = new List<object>(); // or whatever
Provider.For(myClass).ExcludePropertyNames(x => x.Count); 
```

`T`现在，当您调用时会推断出类型`.For(myClass)`，并且您现在可以`T`在调用时通过 lambda 以类型安全的方式访问类型的属性`ExcludePropertyNames`。

* * *

如果你真的想要一个非通用版本：

```
interface IEditableStateProvider
{
     IEditableStateProvider For(object target);
     IEditableStateProvider ExcludePropertyNames(params Expression<Func<object>>[] excludedProperties);
} 
class Provider : IEditableStateProvider
{
    public IEditableStateProvider For(object target) 
    { 
        // dummy
        return this;
    }
    public IEditableStateProvider ExcludePropertyNames(params Expression<Func<object>>[] excludedProperties) 
    {
        // dummy
        return this;
    }
}

var myClass = new List<object>();
new Provider().For(myClass).ExcludePropertyNames(() => myClass.Count); 
```

但请注意我在下面的评论。

# php - 检查 MySQL 中是否已经存在特定条目

> ID：14773373
> 
> 赞同：0
> 
> 时间：2013-02-08T13:13:17.313
> 
> 标签：php, mysql, sql, session, search

我有一个`events`包含以下字段的表：

```
`id`-->INT,PRIMARY AND AUTO_INCREMENT
`event_id`-->INT
`mem_1_id`-->INT
`mem_2_id`-->INT
`mem_3_id`-->INT
`mem_4_id`-->INT
`mem_5_id`-->INT
`mem_6_id`-->INT 
```

对于TABLE`mem_x_id` `(0<x<7)`中的特定内容，所有这些都是不同`event_id`的。是通常使用的主键`events`。`id`一个可能的例子：

```
id  event_id    mem_1_id    mem_2_id    mem_3_id    mem_4_id    mem_5_id    mem_6_id
1   11          123         345         567         67          34          56
2   12          234         555         67          43          23          12
2   12          34          55          167         435         233         122 
```

现在我想检查已经登录并正在查看特定事件页面的用户`id`（来自TABLE）在该事件的. 一个特定的 可能有多个条目 。我想搜索活动页面的所有内容。`users``events``id``event_id``event_id`

我的代码如下： 请注意，我是 PHP 新手，因此仍在使用旧版本。我计划让事情正常进行，然后将我的代码修改为 PDO。我正在并行学习 PDO。但首先我想让我的代码工作。

```
$id=stores the event_id of the event page that the user is viewing.

$_SESSION['id']=`id` of the user that is logged in and viewing the page.

if(isset($_SESSION['id'])){
    $result1=mysql_query("SELECT id FROM events WHERE event_id='".$id."')");
        if ($result1 == false) {
            echo mysql_error();
            die;
        }
        $row1 = mysql_fetch_assoc($result1);

        if($row1['id']){
            if ($_SESSION['id']==$row1['mem_1_id'] || $_SESSION['id']==$row1['mem_2_id'] || $_SESSION['id']==$row1['mem_3_id'] || $_SESSION['id']==$row1['mem_4_id'] || $_SESSION['id']==$row1['mem_5_id'] || $_SESSION['id']==$row1['mem_6_id']){
                $is_already_regis=1;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:16:40.923

在您的查询中，您必须选择要使用的所有字段：

```
"SELECT id, mem_1_id, mem_2_id, [...], mem_6_id FROM events WHERE event_id='".$id."'" 
```

然后，您必须使用循环来检查每一行：

```
while ($row = mysql_fetch_assoc($result1)) {
    if ($_SESSION['id']==$row['mem_1_id'] || $_SESSION['id']==$row['mem_2_id'] || $_SESSION['id']==$row['mem_3_id'] || $_SESSION['id']==$row['mem_4_id'] || $_SESSION['id']==$row['mem_5_id'] || $_SESSION['id']==$row['mem_6_id']){
            $is_already_regis=1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:18:34.950

您可以选择并执行 or 来查看是否有任何 mem_X_id 字段与当前用户的 id 匹配。这为您节省了大量的处理时间。

# css - 在悬停时更改之前的其他类

> ID：14773374
> 
> 赞同：1
> 
> 时间：2013-02-08T13:13:30.550
> 
> 标签：css

这个作品不错..

```
#a:hover + #b {
background: #ccc
}

<div id="a">Div A</div>
<div id="b">Div B</div> 
```

但相反是行不通的。这是一个解决方案？？

```
#b:hover + #a {
background: #ccc
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:19:52.963

您不能使用 CSS 选择以前的兄弟姐妹。您也可以使用 jQuery 解决方案来做到这一点！

# iphone - 格式化时 NSDateFormatter 不起作用

> ID：14773375
> 
> 赞同：-3
> 
> 时间：2013-02-08T13:13:31.560
> 
> 标签：iphone, ios, ipad

我有一个时间字符串，如下图所示：

```
2/5/2013 12:00:00 AM 
```

我想把它改成`MM/dd/yyyy`甲酸。

我使用了 NSDateFormatter，但我得到了一个空值。我该如何改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:17:35.307

检查您的代码，一定是做错了什么，这就是您收到正确格式的方式..

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"MM/dd/yy"];
    NSString *dateString = [dateFormatter stringFromDate: [NSDate date]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:20:34.477

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MM/dd/yyyy HH:mm:ss a"];
NSDate *date = [formatter dateFromString:str]; 
```

[阅读此文档以了解日期格式化程序。](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)

# javascript - 更改 window.beforeunload 消息

> ID：14773376
> 
> 赞同：2
> 
> 时间：2013-02-08T13:13:31.853
> 
> 标签：javascript, jquery

我想知道是否可以更改`window.beforeunload`消息。网上所有的例子都是这样的：

```
$(window).bind('beforeunload', function() {
    return 'You have unsaved changes. If you leave the page these changes will be lost.';
}); 
```

这很酷，在 Google Chrome 中会显示我的消息，但在 Firefox 中会显示默认消息。如何欺骗 Firefox 显示我的消息而不是默认消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T16:11:19.007

`onbeforeunload`是一个奇怪的事件。浏览器一直在争论如何处理它。

*   IE 和 Chrome 将在对话框中显示您的消息以及它们自己的消息。
*   Firefox 曾经显示您的消息，但在版本 4+ 中，它们停止支持自定义消息。看到这个：[https ://bugzilla.mozilla.org/show_bug.cgi?id=588292](https://bugzilla.mozilla.org/show_bug.cgi?id=588292)
*   Opera 甚至不支持该`onbeforeunload`方法！

这种方法正在辩论，因为它可以用于*邪恶*，也因为它可以混淆/惹恼用户。欺诈性的、充满病毒的网站可以使用以下消息：

> “离开该页面将意味着您的计算机仍可能被感染，请留下并安装我们的病毒扫描程序”

现在，网站可以使用 AJAX / localStorage 来保存更改，所以这个事件并不是真正需要的。

# iphone - 如何使用 NSMutableArray 准备 ForSegue？

> ID：14773377
> 
> 赞同：0
> 
> 时间：2013-02-08T13:13:33.000
> 
> 标签：iphone, ios, xcode, uitableview

如何使用 NSMutableArray 准备 ForSegue？

```
NSMutableArray *theNews; 
```

这是 prepareForSegue 代码

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSManagedObject *object = [[theNews objectAtIndex:indexPath.row] objectAtIndexPath:indexPath];
        [[segue destinationViewController] setDetailItem:object];

    }
} 
```

如果我运行代码，我会收到此错误：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSDictionaryM objectAtIndexPath:]：无法识别的选择器发送到实例 0x81c0f40”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:20:18.077

`theNews`您的数组中的数据似乎有点`NSDictionary`. 没有用 调用`- objectAtIndexPath:`的方法`NSDictionary`。您应该`– objectForKey:`改用（或其他一些方法）

# wcf - 流畅的休眠循环参考疼痛

> ID：14773378
> 
> 赞同：3
> 
> 时间：2013-02-08T13:13:33.673
> 
> 标签：wcf, nhibernate, fluent-nhibernate

我的域 A 和 B 中有 2 个对象

对象 A 具有 B 的属性 对象 B 具有列表的属性

当我对 B 的数据库进行点击时，它会返回一个 As 列表，但是每个 A 都有一个 B，而 B 又具有一个 As 列表。一遍一遍又一遍。

显然是延迟加载问题。延迟加载已打开，但我的问题是这是 WCF 服务，我是否需要将所有域对象转换为 dto 对象以发送线路，当我这样做时执行以下操作 - 伪代码

```
ADTO adto Transform(ADomain a)
{
   adto.name = a.name;
   adto.surname = a.surname;
   adto.B = Transform(a.B);
}

BDTO bdto Transform(BDomain b)
{
   bdto.bob = b.bob;
   foreach (A a in b.As)
   {
       bdto.bs.add(Transform(a));
   }
} 
```

所以我怎样才能让我的收藏只深入一层。

B的映射：

```
HasMany(x => x.As)
            .Cascade.AllDeleteOrphan()
            .Fetch.Select()
            .Inverse().KeyColumn("AId"); 
```

A的映射：

```
 References(x => x.B).Column("AId"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T05:41:09.100

好吧，要通过 WCF 传递循环引用，您应该使用`IsReference`参数[DataContractAttribute.IsReference 属性](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.isreference.aspx) *（或此处[的循环引用问题](http://stefanoricciardi.com/2009/10/22/making-wcf-serializer-work-with-circular-references/)）调整父 DTO (B )*。

> 使用 IsReference 属性指示 DataContractSerializer 插入保留对象引用信息的 XML 构造。 `[DataContract(Namespace = "http://domain.../", IsReference=true)]`公共课 BDTO ...

给你答案：

> ...所以我怎样才能让我的收藏只深入一层。

NHibernate 对循环引用没有任何问题。更重要的是，您只需执行 2 个 SQL 查询即可轻松获取所有数据。调整映射：

```
HasMany(x => x.As)
  .Cascade.AllDeleteOrphan()
  .BatchSize(25)
  //.Not.LazyLoad()
  .Inverse()
  .KeyColumn("AId"); 
```

*注意：Not.LazyLoad 仅在几乎总是需要 A 对象来使 B 工作时才有意义。使用“懒惰”模式时，您必须在整个 WCF 服务处理过程中保持会话打开*

[BatchSize](http://ayende.com/blog/1686/batching-support-in-nhibernate)设置将优化 B 对象的加载列表。在这里阅读更多：http: [//ayende.com/blog/3943/nhibernate-mapping-set](http://ayende.com/blog/3943/nhibernate-mapping-set)

NHibernate 会话将执行两个查询 1)`Select B`和 2)`Select A for all B`并将结果具体化为完整的 A 和 B 实例，双向引用完全填充。NHibernate 会话将为您提供完全加载的实例。甚至调用`Get<A>(id)`并将`Get<B>(id)`从会话中检索对象

下一步取决于您，您可以使用 DTO 对象、映射工具来转换它们...

# excel - 从过滤范围剪切后的空白行

> ID：14773383
> 
> 赞同：1
> 
> 时间：2013-02-08T13:14:03.197
> 
> 标签：excel, excel-2007, vba

我正在使用下面的代码来设置过滤器并从过滤器中剪切某些数据并将其放入另一个选项卡中。

但是我有两个问题：

1.  当我从过滤表中剪切数据（我正在使用`.EntireRow.Cut`）时，我在过滤器中留下了空白行。 **如何在不留下空白行的情况下剪切数据？**
2.  我想要`Cut`过滤数据（不包括第 1 行中的标题）。我不能使用偏移量，或者`.Resize`因为它将我带到隐藏行（不包括在过滤器范围内）。 **我该如何解决这个问题？**

代码是：

```
Lcol = FindLastCol(gcsCombinedKycExportsSheetName)
Lrow = FindLastRow(gcsCombinedKycExportsSheetName)
Set rngToCheck = Range(Sheets(gcsCombinedKycExportsSheetName).Cells(1, 1), _
    Sheets(gcsCombinedKycExportsSheetName).Cells(Lrow, Lcol)).Rows

FieldNum = Sheets(gcsCombinedKycExportsSheetName).Cells.Find(What:=gcsSearchFund, After:=[a1], LookIn:=xlValues, _
    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext).Column

Sheets(gcsCombinedKycExportsSheetName).Rows(1).AutoFilter

rngToCheck.AutoFilter Field:=FieldNum, Criteria1:= _
    "=*[2]*", Operator:=xlOr, Criteria2:="="

Lrow = FindLastRow(gcsCombinedKycExportsSheetName)
LrowRT = FindLastRow(gcsRemovedInvestors)

Sheets(gcsCombinedKycExportsSheetName).Range(Sheets(gcsCombinedKycExportsSheetName).Cells(1, 1), _
    Sheets(gcsCombinedKycExportsSheetName).Cells(Lrow, 1)).EntireRow.Cut Sheets(gcsRemovedInvestors).Cells(LrowRT, 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:29:49.353

在 Siddharth Rout 的全力支持下，我设法解决了这个问题：

我使用了以下内容：

```
.SpecialCells(xlCellTypeVisible) 
```

这使我可以只选择要剪切的可见单元格。

我设置了动态范围并用于`.Resize`取消选择标题，所以我只剪切了我过滤的数据。

再次感谢支持。

夏兰。

# php - 如何将此内容解析为友好的 URL

> ID：14773384
> 
> 赞同：0
> 
> 时间：2013-02-08T13:14:05.970
> 
> 标签：php, html, regex, parsing, dom

我使用简单的 php dom 解析器来获取表格 td 内容，我将其作为纯文本输出，结果如下：

```
<p>              Graphic Artist / Designer<br />
              $23,755 &#8211; $55,335              <br />              Sales Associate<br />
              $15,577 &#8211; $56,290              <br />              Film / Video Editor<br />
              $24,184 &#8211; $94,493              </p> 
```

我想做的是把上面的，变成这样：

```
<a href="/graphic-artist-designer">Graphic Artist / Designer</a>
    $23,755 – $55,335 <br />
<a href="/sales-associate">Sales Associate</a><br />
    $15,577 – $56,290 <br />
<a href="/film-video-editor">Film / Video Editor</a><br />
    $24,184 – $94,493 <br /> 
```

所以你可以看到我取了工作名称，降低了所有的大小写，并用破折号替换了空格和斜杠以用作 URL。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:31:39.290

您可以将其转换为小写，然后以这种方式消除非单词字符：

```
$slug = preg_replace('/[^a-z]+/', '-', strtolower($name)); 
```

如果您无法将其集成到您的解决方案中，请参阅[http://www.php.net/manual/en/function.preg-replace-callback.php](http://www.php.net/manual/en/function.preg-replace-callback.php)

# python - 在python中匹配几行后在不同的上下文中读取相同的行

> ID：14773386
> 
> 赞同：-3
> 
> 时间：2013-02-08T13:14:11.860
> 
> 标签：python

我有档案

```
Header 1
line 1
line 2
line 3
line 4
Header 2
line 1
line 2
line 3
line 4 
```

我想阅读标题 1，然后阅读它下面的第 3 行和第 4 行，之后我想阅读标题 2，然后在不同的上下文中阅读它下面的第 3 行和第 4 行。在这两种情况下搜索第 3 行和第 4 行的字符串是相同的，但行并不完全相同。目前我正在使用搜索标题 1

```
for line in file    
    if "Header 1" in line: 
```

我无法在该文件的 for 循环中使用 readline 来读取 4 行的块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:16:34.803

存储所有行，然后分析它们：

```
data = open("filename.txt").readlines() 
```

这将使根据需要在行之间跳转变得容易，这在直接从文件中读取时是不正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:09:56.313

unwind 的答案适用于小文件。如果您想要一个通用的解决方案，请坚持使用迭代器和生成器。

你可以定义一个生成器函数来生成line_i、line_i+3和line_i+4的元组。

随着进口

```
from collections import deque
from itertools import islice 
```

我们可以定义一个新的生成器函数：

```
def reflexive_zip(iterator, offset = 0):
    offset = int(offset)
    if offset == 0:
        for element in iterator:
            yield (element, element)
    else:
        d = deque(islice(iterator,abs(offset)))
        for element in iterator:
            d.append(element)
            if offset < 0:
                yield (element, d.popleft())
            else:
                yield (d.popleft(), element) 
```

它需要 a `iterator`，使用 a 创建一些缓冲区`deque`并产生 的元素的元组`iterator`。偏移量可以通过`offset`参数控制。

完整的脚本来了。用法示例在**主要**部分。

```
if __name__ == "__main__":
    from cStringIO import StringIO

    f = StringIO("""Header 1
line 1
line 2
line 3
line 4
Header 2
line 1
line 2
line 3
line 4""")

    #for line, other_line in reflexive_zip(f, 4):
    #    print "%s -> %s" %(line, other_line)

    for ((line, _ignore),(line3, line4)) in reflexive_zip(reflexive_zip(f,1),3):
        print "%s -> %s    %s" %(line, line3, line4)

from collections import deque
from itertools import islice

def reflexive_zip(iterator, offset = 0):
    offset = int(offset)
    if offset == 0:
        for element in iterator:
            yield (element, element)
    else:
        d = deque(islice(iterator,abs(offset)))
        for element in iterator:
            d.append(element)
            if offset < 0:
                yield (element, d.popleft())
            else:
                yield (d.popleft(), element)

if __name__ == "__main__":
    from cStringIO import StringIO

    f = StringIO("""Header 1
line 1
line 2
line 3
line 4
Header 2
line 1
line 2
line 3
line 4""")

    #for line, other_line in reflexive_zip(f, 4):
    #    print "%s -> %s" %(line, other_line)

    for ((line, _ignore),(line3, line4)) in reflexive_zip(reflexive_zip(f,1),3):
        print "%s -> %s    %s" %(line, line3, line4) 
```

输出：

```
Header 1
 -> line 3
    line 4

line 1
 -> line 4
    Header 2

line 2
 -> Header 2
    line 1

line 3
 -> line 1
    line 2

line 4
 -> line 2
    line 3

Header 2
 -> line 3
    line 4 
```

# c# - 在 WPF 中动态添加显示集合信息的新方式

> ID：14773387
> 
> 赞同：0
> 
> 时间：2013-02-08T13:14:15.063
> 
> 标签：c#, wpf

我只是在学习 WPF，所以请耐心等待。

我有一个视图模型，其中包含一个可观察的（为简洁起见，此处非常简化）Employee 对象的集合，看起来像这样：

```
public class  Employee
{
  public string Name { get; set; }
  public string Title { get; set; }
} 
```

在我的 C# WPF 应用程序中，我通过简单的数据绑定在我的视图中的选项卡控件中显示来自这个可观察集合的信息。到目前为止很容易的东西。我的要求是用户可以动态添加一个新选项卡，该选项卡仅显示他们感兴趣的员工信息，并且每次运行应用程序时都会保存并重新加载员工数据的新视图。

因此，假设我的用户想要添加一个仅显示那些是软件工程师的员工的新选项卡。我需要为他们提供一种方法来选择他们的过滤条件，然后在选项卡控件中添加一个新选项卡，以显示与所选过滤条件匹配的员工。然后，每次运行应用程序时，都应保存并重新创建新创建的选项卡中员工信息的自定义视图。

我不需要完整的代码示例，尽管那真的很有帮助。我想要的是一些关于方法的建议，这样我就可以去谷歌搜索信息了。我只是不确定哪种技术最适合解决这个问题。我正在考虑动态创建的数据模板或自定义的 CollectionViewSource，但是我需要保存并重新加载该信息，所以我是否保存动态创建的数据模板并在加载应用程序时使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:53:41.897

据我了解，您的选项卡每个都有一个过滤器和一个基于此过滤器加载的可观察集合。

如果是这种情况，一种可能的解决方案是定义一个视图模型来表示选项卡 (EmployeesViewModel)。此视图模型将具有过滤器和可观察集合的属性以及任何其他保存/修改可观察集合的方法。

```
public class EmployeesViewModel {
    public Filter Filter { get; set;}
    public ObservableCollection<Employee> Employees { get; set;}
    public Employee SelectedEmployee { get; set;}
    public RoutedCommand SaveSelectedEmployee { get; set;}
    …
} 
```

一旦你有了这个，使类可序列化（通过实现**ISerializable**）。您应该只序列化过滤条件，而不是集合的内容。

当您关闭应用程序或拆除选项卡查看器模块时，迭代选项卡集合，获取关联的视图模型并序列化它们中的每一个。当您启动应用程序（或选项卡查看器模块）时，使用反序列化视图模型重新创建每个选项卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:39:10.977

您需要做的是创建一个 TabControl 模板（[http://msdn.microsoft.com/en-us/library/ms754137(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms754137(v=vs.85).aspx)），然后在“最右边”选项卡上有一个按钮这让您可以添加新标签，例如 Web 浏览器。

如果您还是模板新手，我建议您练习模板[button](http://msdn.microsoft.com/en-us/library/ms753328(v=vs.85).aspx)，然后是[textbox](http://msdn.microsoft.com/en-us/library/ms753328(v=vs.85).aspx)，然后是扩展器，直到您熟练为止。

模板是 WPF 工作方式的核心，因此请花时间练习并熟悉它。

为了在启动等时保存和加载信息，我会查找“序列化”，这基本上是获取 C# 类并将它们转换为“流”的过程，然后您可以从磁盘写入/读取。

# python - Sublime：在 python shell 中不断收到 EOF 错误

> ID：14773389
> 
> 赞同：0
> 
> 时间：2013-02-08T13:14:21.190
> 
> 标签：python, sublimetext2, user-input, eof

```
number = input("Enter a non-negative integer: ") 
```

每当我尝试运行它时，我都会收到 EOF 错误。我正在使用 Sublime Text 2 和 Python 2.6.1。有趣的是，当我在终端中运行它时，它运行良好。

# while-loop - 即使我为 a 和 b 输入零值，while 循环也不会终止

> ID：14773398
> 
> 赞同：0
> 
> 时间：2013-02-08T13:14:49.743
> 
> 标签：while-loop, do-while

```
 do
    {
        scanf("%d %d",&a,&b);
        stcrnrArray[x] = a;
        ++a;
        stcrnrArray[x] = b;
        ++b;
    }
    while((a != 0) && (b != 0)); 
```

即使我为 a 和 b 输入零值，while 循环也不会终止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:18:20.943

什么是问题？它不会终止，因为你已经给出了 ++a；所以它每次都预先递增，这就是为什么最后（a！= 0）条件满足..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:19:46.140

如果 a = -1 且 b = -1 循环终止

# ruby-on-rails - 无法安装 linecache19 gem

> ID：14773399
> 
> 赞同：2
> 
> 时间：2013-02-08T13:14:50.673
> 
> 标签：ruby-on-rails, ruby, bundler

当我进行捆绑安装时，我收到以下错误 `"An error occurred while installing linecache19 (0.5.11), and Bundler cannot continue"`。完整的跟踪如下：

```
Installing linecache19 (0.5.11) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /home/raza/.rvm/rubies/ruby-1.9.3-p362/bin/ruby extconf.rb                                                                                                          
checking for vm_core.h... no                                                                                                                                                
/home/raza/.rvm/gems/ruby-1.9.3-p362@holla/gems/ruby_core_source-0.1.4/lib/ruby_core_source.rb:39: Use RbConfig instead of obsolete and deprecated Config.                  
checking for vm_core.h... yes                                                                                                                                               
checking for version.h... yes                                                                                                                                               
checking for RUBY_VERSION_MAJOR in version.h... no                                                                                                                          
Requesting http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p362.tar.gz                                                                                                     
Downloading http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p362.tar.gz                                                                                                    
checking for vm_core.h... yes
checking for version.h... yes
checking for RUBY_VERSION_MAJOR in version.h... no
Makefile creation failed
*************************************************************

  NOTE: For Ruby 1.9 installation instructions, please see:

     http://wiki.github.com/mark-moseley/ruby-debug

*************************************************************

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/home/raza/.rvm/rubies/ruby-1.9.3-p362/bin/ruby
        --with-ruby-dir
        --without-ruby-dir
        --with-ruby-include
        --without-ruby-include=${ruby-dir}/include
        --with-ruby-lib
        --without-ruby-lib=${ruby-dir}/lib

Gem files will remain installed in /home/raza/.rvm/gems/ruby-1.9.3-p362@holla/gems/linecache19-0.5.11 for inspection.
Results logged to /home/raza/.rvm/gems/ruby-1.9.3-p362@holla/gems/linecache19-0.5.11/ext/trace_nums/gem_make.out
An error occurred while installing linecache19 (0.5.11), and Bundler cannot continue.
Make sure that `gem install linecache19 -v '0.5.11'` succeeds before bundling. 
```

然后我尝试运行 `gem install linecache19 -v '0.5.11'`，`gem install linecache19 -v '0.5.11' -- --with-ruby-include=$rvm_path/src/ruby-1.9.3-p362`但仍然面临同样的问题。

我的 mkmf.log 位于 ~/.rvm/gems/ruby-1.9.3-p362@holla/gems/linecache19-0.5.11/ext/trace_nums 如下：

```
have_header: checking for vm_core.h... -------------------- no

"gcc -o conftest -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/x86_64-linux -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby/backward -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1 -I.    -I/home/raza/.rvm/usr/include  -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC conftest.c  -L. -L/home/raza/.rvm/rubies/ruby-1.9.3-p362/lib -Wl,-R/home/raza/.rvm/rubies/ruby-1.9.3-p362/lib -L/home/raza/.rvm/usr/lib -Wl,-R/home/raza/.rvm/usr/lib -L.  -rdynamic -Wl,-export-dynamic -L/home/raza/.rvm/usr/lib  -Wl,-R/home/raza/.rvm/usr/lib      -Wl,-R -Wl,/home/raza/.rvm/rubies/ruby-1.9.3-p362/lib -L/home/raza/.rvm/rubies/ruby-1.9.3-p362/lib -lruby  -lpthread -lrt -ldl -lcrypt -lm   -lc"
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: int main() {return 0;}
/* end */

"gcc -E -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/x86_64-linux -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby/backward -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1 -I.    -I/home/raza/.rvm/usr/include  -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC  conftest.c -o conftest.i"
conftest.c:3:21: fatal error: vm_core.h: No such file or directory
compilation terminated.
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <vm_core.h>
/* end */

--------------------

have_header: checking for vm_core.h... -------------------- yes

"gcc -E -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/x86_64-linux -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby/backward -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1 -I. -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby-1.9.3-p362  -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC  conftest.c -o conftest.i"
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <vm_core.h>
/* end */

--------------------

have_header: checking for version.h... -------------------- yes

"gcc -E -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/x86_64-linux -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby/backward -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1 -I. -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby-1.9.3-p362  -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC  conftest.c -o conftest.i"
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <version.h>
/* end */

--------------------

have_macro: checking for RUBY_VERSION_MAJOR in version.h... -------------------- no

"gcc -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/x86_64-linux -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby/backward -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1 -I. -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby-1.9.3-p362  -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC   -c conftest.c"
conftest.c:6:3: error: #error 
conftest.c:7:1: error: expected identifier or ‘(’ before ‘&gt;>’ token
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <version.h>
4: /*top*/
5: #ifndef RUBY_VERSION_MAJOR
6: # error
7: >>>>>> RUBY_VERSION_MAJOR undefined <<<<<<
8: #endif
/* end */

--------------------

have_header: checking for vm_core.h... -------------------- yes

"gcc -E -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/x86_64-linux -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby/backward -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1 -I. -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby-1.9.3-p362  -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC  conftest.c -o conftest.i"
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <vm_core.h>
/* end */

--------------------

have_header: checking for version.h... -------------------- yes

"gcc -E -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/x86_64-linux -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby/backward -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1 -I. -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby-1.9.3-p362  -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC  conftest.c -o conftest.i"
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <version.h>
/* end */

--------------------

have_macro: checking for RUBY_VERSION_MAJOR in version.h... -------------------- no

"gcc -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/x86_64-linux -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby/backward -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1 -I. -I/home/raza/.rvm/rubies/ruby-1.9.3-p362/include/ruby-1.9.1/ruby-1.9.3-p362  -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC   -c conftest.c"
conftest.c:6:3: error: #error 
conftest.c:7:1: error: expected identifier or ‘(’ before ‘&gt;>’ token
checked program was:
/* begin */
1: #include "ruby.h"
2: 
3: #include <version.h>
4: /*top*/
5: #ifndef RUBY_VERSION_MAJOR
6: # error
7: >>>>>> RUBY_VERSION_MAJOR undefined <<<<<<
8: #endif
/* end */

-------------------- 
```

我在运行 Ubuntu 12.10 的机器上。我该如何解决这个问题？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T10:42:22.683

您需要先通过包含目录安装 ruby​​-debug。

> gem install ruby​​-debug19 -- --with-ruby-include=$rvm_path/src/ruby-1.9.3-p362

# iphone - 将coredata中的元素添加到字典然后添加到nsmutablearray？

> ID：14773406
> 
> 赞同：1
> 
> 时间：2013-02-08T13:15:06.260
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我试图在其中创建一个 nsmutablearray 字典。一切正常，但问题是只有最后一个元素添加了 coredata 数组的计数时间。这就是我的做法`

```
 rateValues=[[NSMutableArray alloc]init];
    rateValues1=[[NSMutableDictionary alloc]init];
    if(messagesArray!=nil)
    {
        for (Messagestable *rating in messagesArray)
        {
                        //[rateValues  addObject:rating.message];

             [rateValues1 setObject:rating.fromid forKey:@"fromid"];
               [rateValues1 setObject:rating.toid forKey:@"toid"];
             [rateValues1 setObject:rating.sendingtime forKey:@"sendingtime"];
            [rateValues1 setObject:rating.message forKey:@"message"];
            [rateValues1 setObject:rating.fromname forKey:@"fromname"];

            [rateValues  addObject:rateValues1];

        }

    }
    else{
        //NSLog(@"array empty");
        return;
    }

    NSLog(@"%@",rateValues); 
```

`我的数组只包含最后一个元素 4 次。即它是 coredata 中数据的计数。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:19:16.070

每次迭代都需要创建一个新字典；您当前正在做的是覆盖您的单个字典并将其重新添加到数组中。

```
rateValues=[[NSMutableArray alloc]init];
if(messagesArray!=nil)
{
    for (Messagestable *rating in messagesArray)
    {
        NSMutableDictionary *dict = [[NSMutableDictionary alloc]init];
        [rateValues1 setObject:rating.fromid forKey:@"fromid"];
        [rateValues1 setObject:rating.toid forKey:@"toid"];
        [rateValues1 setObject:rating.sendingtime forKey:@"sendingtime"];
        [rateValues1 setObject:rating.message forKey:@"message"];
        [rateValues1 setObject:rating.fromname forKey:@"fromname"];

        [rateValues  addObject:dict];
    }
}
else{
    //NSLog(@"array empty");
    return;
}

NSLog(@"%@",rateValues); 
```

# perl - 这段 Perl 代码通俗地说是做什么的？

> ID：14773407
> 
> 赞同：2
> 
> 时间：2013-02-08T13:15:07.570
> 
> 标签：perl

在循环中找到了这个。我已经阅读了关于 splice 的内容，但它让我更加困惑。我不熟悉 Perl，但正在尝试将算法翻译成另一种语言。

```
my $sill = splice(@list,int(rand(@list)),1);
       last unless ($sill); 
```

更具体地说：如果 $sill 没有从最后一个循环退出，那么里面会是什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:21:44.800

这会从数组中随机删除一个元素`@list`。该值被分配给`$sill`。如果那是一个假值，则封闭循环（未显示）被打破。

[`splice`](http://perldoc.perl.org/functions/splice.html)接受一个数组、一个偏移量和一个长度，以及一个替换列表。如果省略替换，则删除元素。

长度是常数（1 个元素），但偏移量计算为介于 0 和 长度之间的随机整数`@list`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:22:03.370

这意味着：

*   从数组中删除一个随机元素`list`（0 -> 列表元素的数量）和
*   `sill`用删除的元素（`pop()`like）分配变量和
*   `sill`如果变量为假则退出循环

见[http://perldoc.perl.org/functions/splice.html](http://perldoc.perl.org/functions/splice.html)

# android - Android Opengl：仅显示我的 3D 立方体的正面

> ID：14773408
> 
> 赞同：0
> 
> 时间：2013-02-08T13:15:20.197
> 
> 标签：android, opengl-es

我正在尝试使用 OpenGL ES2 绘制一个 3D 立方体，而我的代码仅绘制立方体的正面（正方形），如图[所示](http://dl.dropbox.com/u/15975895/stackoverflow/cube.png)。我不知道出了什么问题。我也尝试过根据其他教程实现我的多维数据集，但没有运气。

我的代码有什么问题？..我是否在某处遗漏了重要的代码行？

```
@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    // TODO Auto-generated method stub
    GLES20.glClearColor(1.0f, 1.0f, 1.0f, 1.0f);

    GLES20.glEnable(GLES20.GL_DEPTH_TEST);
    GLES20.glDepthFunc(GLES20.GL_LEQUAL);

    GLES20.glFrontFace(GLES20.GL_CCW);
    GLES20.glCullFace(GLES20.GL_BACK);
    GLES20.glEnable(GLES20.GL_CULL_FACE);

    Matrix.setLookAtM(mVMatrix,0, eyeX, eyeY, eyeZ, lookX, lookY, lookZ, upX, upY, upZ);
} 
```

画框法

```
@Override
public void onDrawFrame(GL10 gl) {
    // TODO Auto-generated method stub
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT|GLES20.GL_DEPTH_BUFFER_BIT);

    // Calculate the projection and view transformation
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

    //Calling draw method of shapes
    square.draw(mMVPMatrix);
} 
```

立方体类

```
 // x, y, z  
static float squareCoords[] = {-1f, -1f, 1f,//Bottom Left
                                1f, -1f, 1f, //Bottom Right
                                1f, 1f, 1f,  //Top Right
                               -1f, 1f, 1f, //Top left

                               -1f, -1f, -1f,//Bottom Left
                               1f, -1f, -1f, //Bottom Right
                               1f, 1f, -1f,  //Top Right
                               -1f, 1f, -1f //Top left
                                };

private short drawOrder[] = {0,1,2, 0,2,3,//front
                             0,3,7, 0,7,4,//Left    
                             0,1,5, 0,5,4,//Bottom

                             6,7,4, 6,4,5,//Back
                             6,7,3, 6,3,2,//top
                             6,2,1, 6,1,5//right
}; //Order to draw vertices

private int vertaxCount = 0; //Vertex count is the array divided by the size of the vertex ex. (x,y) or (x,y,z)
private int vertaxStride = 0; //4 are how many bytes in a float

private float [] color = new float[]{
    0.1f, 0.5f, 1.0f, 1.0f,
    0.0f, 0.0f, 1.0f, 1.0f,
    0.0f, 10.0f, 0.0f, 1.0f,
    0.0f, 1.0f, 1.0f, 1.0f,
    1.0f, 0.0f, 0.0f, 1.0f,
    1.0f, 0.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 0.0f, 1.0f,
    1.0f, 1.0f, 1.0f, 1.0f
};

public Square()
{
    //initialising vertex byte buffer for shape coordinates
    // (number of coordinate values * 4 bytes per float)
    ByteBuffer bb = ByteBuffer.allocateDirect(squareCoords.length * 4);

    bb.order(ByteOrder.nativeOrder());

    vertexBuffer = bb.asFloatBuffer();
    vertexBuffer.put(squareCoords);
    vertexBuffer.position(0);

    //Initialise byte buffer for the draw list
    //(number of draw values * 2 bytes per short )
    ByteBuffer dlb = ByteBuffer.allocateDirect(drawOrder.length * 2);

    dlb.order(ByteOrder.nativeOrder());
    drawListBuffer = dlb.asShortBuffer();
    drawListBuffer.put(drawOrder);
    drawListBuffer.position(0);

    ByteBuffer colors = ByteBuffer.allocateDirect(color.length * 4);
    colors.order(ByteOrder.nativeOrder());
    bufferColor = colors.asFloatBuffer();
    bufferColor.put(color);
    bufferColor.position(0);

    int vertexShader = Shaders.loadShader(GLES20.GL_VERTEX_SHADER, Shaders.vertexShaderCode);
    int fragmentShader = Shaders.loadShader(GLES20.GL_FRAGMENT_SHADER, Shaders.fragmentShaderCode);

    mProg = GLES20.glCreateProgram();
    GLES20.glAttachShader(mProg, vertexShader);
    GLES20.glAttachShader(mProg, fragmentShader);
    GLES20.glLinkProgram(mProg);

    vertaxCount = squareCoords.length / COORDS_PER_VERTEX; //Vertex count is the array divided by the size of the vertex ex. (x,y) or (x,y,z)
    vertaxStride = COORDS_PER_VERTEX * 4; //4 are how many bytes in a float

}

public void draw(float[] mMVPMatrix)
{
    //Add program to OpenGL environment
    GLES20.glUseProgram(mProg);

    //Get Handle to the vertices
    int mPositionHandle = GLES20.glGetAttribLocation(mProg, "vPosition");

    //Prepare the shape coordinate data
    GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX, 
                                    GLES20.GL_FLOAT, false, 
                                    vertaxStride, vertexBuffer);

    //Enable a handle to the shape vertices
    GLES20.glEnableVertexAttribArray(mPositionHandle);

    int mColorHandle = GLES20.glGetUniformLocation(mProg, "v_color");

    GLES20.glVertexAttribPointer(mColorHandle, 3, GLES20.GL_FLOAT, false, 0, bufferColor);
    GLES20.glEnableVertexAttribArray(mColorHandle);

    float [] tm = new float[16];
    float [] rm = new float[16];

    Matrix.scaleM(mMVPMatrix, 0, 0.35f, 0.35f, 0);
    Matrix.translateM(tm, 0, mMVPMatrix, 0, 0f, 0f, 0);
    Matrix.rotateM(rm, 0, tm, 0, 45f, 0, 0, 1);

    // get handle to shape's transformation matrix
    int mMVPMatrixHandle = GLES20.glGetUniformLocation(mProg, "u_MVPMatrix");

    // Apply the projection and view transformation
    //GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mMVPMatrix, 0);
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, rm, 0);

    //Draw the shape
    //GLES20.glDrawArrays(GLES20.GL_TRIANGLE_FAN, 0, vertaxCount);
    GLES20.glDrawElements(GLES20.GL_TRIANGLES, 36, GLES20.GL_UNSIGNED_SHORT, drawListBuffer);

    //Disable vertex array 
    GLES20.glDisableVertexAttribArray(mPositionHandle);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T09:04:32.867

```
class Cube {

private FloatBuffer mVertexBuffer;
private FloatBuffer mColorBuffer;
private ShortBuffer  mIndexBuffer;
private  int mProgram, mPositionHandle, mColorHandle, mMVPMatrixHandle ; 

private final String vertexShaderCode =
        "uniform mat4 uMVPMatrix;" +
        "attribute vec4 vPosition;" +
        "attribute vec4 aColor;" +  
        "varying vec4 vColor;" +

        "void main() {" +
        "vColor = aColor;" +
        "gl_Position = vPosition * uMVPMatrix;" +
        "}";

    private final String fragmentShaderCode =
        "precision mediump float;" +
        "varying vec4 vColor;" +
        "void main() {" +
        "gl_FragColor = vColor;" +  //  vec4(0.0, 1.0, 0.0, 1.0);" +
        "}";

private float vertices[] = {
        -0.5f, -0.5f, 0.5f,//Bottom Left
         0.5f, -0.5f, 0.5f, //Bottom Right
         0.5f, 0.5f, 0.5f,  //Top Right
        -0.5f, 0.5f, 0.5f, //Top left

        -0.5f, -0.5f, -0.5f,//Bottom Left
         0.5f, -0.5f, -0.5f, //Bottom Right
         0.5f, 0.5f, -0.5f,  //Top Right
        -0.5f, 0.5f, -0.5f //Top left
                            };

private float colors[] = {
                           0.0f,  1.0f,  0.0f,  1.0f,
                           0.0f,  1.0f,  0.0f,  1.0f,
                           1.0f,  0.5f,  0.0f,  1.0f,
                           1.0f,  0.5f,  0.0f,  1.0f,
                           1.0f,  0.0f,  0.0f,  1.0f,
                           1.0f,  0.0f,  0.0f,  1.0f,
                           0.0f,  0.0f,  1.0f,  1.0f,
                           1.0f,  0.0f,  1.0f,  1.0f
                        };

private short indices[] = {
        0,1,2, 0,2,3,//front
        0,3,7, 0,7,4,//Left    
        0,1,5, 0,5,4,//Bottom

        6,7,4, 6,4,5,//Back
        6,7,3, 6,3,2,//top
        6,2,1, 6,1,5//right
                          };

public Cube() {

        ByteBuffer byteBuf = ByteBuffer.allocateDirect(vertices.length * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        mVertexBuffer = byteBuf.asFloatBuffer();
        mVertexBuffer.put(vertices);
        mVertexBuffer.position(0);

        byteBuf = ByteBuffer.allocateDirect(colors.length * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        mColorBuffer = byteBuf.asFloatBuffer();
        mColorBuffer.put(colors);
        mColorBuffer.position(0);

        byteBuf = ByteBuffer.allocateDirect(indices.length * 4);
        byteBuf.order(ByteOrder.nativeOrder());
        mIndexBuffer = byteBuf.asShortBuffer();
        mIndexBuffer.put(indices);
        mIndexBuffer.position(0);

        int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
        int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

        mProgram = GLES20.glCreateProgram();             // create empty OpenGL ES Program
        GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
        GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
        GLES20.glLinkProgram(mProgram); 

}

public static int loadShader(int type, String shaderCode){

    int shader = GLES20.glCreateShader(type);
    GLES20.glShaderSource(shader, shaderCode);
    GLES20.glCompileShader(shader);
    return shader;
}

public void draw (float[] mvpMatrix){

    //GLES20.glFrontFace(GLES20.GL_CCW);

    GLES20.glUseProgram(mProgram);

    // get handle to vertex shader's vPosition member
     mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");

    // Enable a handle to the triangle vertices
    GLES20.glEnableVertexAttribArray(mPositionHandle);

    // Prepare the triangle coordinate data
    GLES20.glVertexAttribPointer(mPositionHandle, 3,
                                 GLES20.GL_FLOAT, false,
                                 12, mVertexBuffer);

    // get handle to fragment shader's vColor member
    mColorHandle = GLES20.glGetAttribLocation(mProgram, "aColor");

    GLES20.glEnableVertexAttribArray(mColorHandle);

    // Prepare the triangle coordinate data
    GLES20.glVertexAttribPointer(mColorHandle, 4,
                                 GLES20.GL_FLOAT, false,
                                 0, mColorBuffer);

    // Set color for drawing the triangle
//     GLES20.glUniform2fv(mColorHandle, 1,colors, 0);

    mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");

    // Apply the projection and view transformation
     GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix, 0);

    // Draw the triangle
     GLES20.glDrawElements(GLES20.GL_TRIANGLES, 36, GLES20.GL_UNSIGNED_SHORT, mIndexBuffer);

    // Disable vertex array
    GLES20.glDisableVertexAttribArray(mPositionHandle);
    GLES20.glDisableVertexAttribArray(mColorHandle);

}

}

public abstract class GLRenderer implements GLSurfaceView.Renderer {

boolean mFirstDraw;
boolean mSurfaceCreated;
int mWidth;
int mHeight;
long mLastTime;
int mFPS;
float[] mProjMatrix = new float[16];
float[] mVMatrix = new float[16];
float[] mMVPMatrix = new float[16];
private float[] rotationMatrix = new float[16];
private float angle = 0f;

GLRenderer() {
    mFirstDraw = true;
    mSurfaceCreated = false;
    mWidth = -1;
    mHeight = -1;
    mLastTime = System.currentTimeMillis();
    mFPS = 0;
}

@Override
public void onDrawFrame(GL10 arg0) {
    // TODO Auto-generated method stub
    Cube mCube = new Cube();
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT|GLES20.GL_DEPTH_BUFFER_BIT);

    if (mFirstDraw)
        mFirstDraw = false;

    angle += 0.7f;
    if (angle > 360f)
        angle = 0f;
    Matrix.setLookAtM(mVMatrix, 0, 0f, 0f, 4f, 0f, 0f, 0f, 0f, 1f, 0f);
    // projection x view = modelView
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);
    // Creating rotation matrix
    Matrix.setRotateM(rotationMatrix, 0, angle, 0f, 0f, -1f);

    // rotation x camera = modelView
    float[] duplicateMatrix = Arrays.copyOf(mMVPMatrix, 16);

    Matrix.multiplyMM(mMVPMatrix, 0, duplicateMatrix, 0, rotationMatrix, 0);

    Matrix.setRotateM(rotationMatrix, 0, angle, 0f, -1f, 0f);
    duplicateMatrix = Arrays.copyOf(mMVPMatrix, 16);
    Matrix.multiplyMM(mMVPMatrix, 0, duplicateMatrix, 0, rotationMatrix, 0);

    Matrix.setRotateM(rotationMatrix, 0, angle, -1f, 0f, 0f);
    duplicateMatrix = Arrays.copyOf(mMVPMatrix, 16);
    Matrix.multiplyMM(mMVPMatrix, 0, duplicateMatrix, 0, rotationMatrix, 0);
    // rotation x camera = modelView
    mCube.draw(mMVPMatrix);

}

@Override
public void onSurfaceChanged(GL10 arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub

    mWidth = arg1;
    mHeight = arg2;

    GLES20.glViewport(0, 0, mWidth, mHeight);

    float ratio = (float) mWidth / mHeight;

    // this projection matrix is applied to object coordinates
    // in the onDrawFrame() method
    Matrix.frustumM(mProjMatrix, 0, -1, 1, -1, 1, 3, 7);

}

@Override
public void onSurfaceCreated(GL10 arg0, EGLConfig arg1) {
    // TODO Auto-generated method stub

    mSurfaceCreated = true;
    mWidth = -1;
    mHeight = -1;
    GLES20.glClearColor(0f, 0f, 0f, 0f);
    GLES20.glEnable(GLES20.GL_DEPTH_TEST);
}

}

public class MainActivity extends Activity {

GLSurfaceView glView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    if(hasGL20()){
        glView = new GLSurfaceView(getApplicationContext());
        glView.setEGLContextClientVersion(2);
        glView.setPreserveEGLContextOnPause(true);
        glView.setRenderer(new GL20Renderer());

    }else{
        Log.v ("No Req Version","");
    }

    setContentView(glView);
}

@Override
protected void onPause() {
    super.onPause();
    if(glView != null)
      glView.onPause();
}

@Override
protected void onResume() {
    super.onResume();
    if(glView != null)
       glView.onResume();

}

private boolean hasGL20(){
    ActivityManager am = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
    ConfigurationInfo info = am.getDeviceConfigurationInfo();
    return info.reqGlEsVersion >= 0x20000;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T22:18:07.720

可能是您的三角形并非都以一致的方向缠绕。尝试禁用背面剔除：

```
GLES20.glDisable(GLES20.GL_CULL_FACE); 
```

或者，将 CullFace 反转到前面：

```
GLES20.glCullFace(GLES20.GL_FRONT); 
```

如果这改变了立方体的哪些边被渲染，那么你的三角形并不是都以一致的方向缠绕。

# php - PDO 连接/准备并在那里执行自己的功能最佳实践

> ID：14773409
> 
> 赞同：0
> 
> 时间：2013-02-08T13:15:21.097
> 
> 标签：php

大家好，我一直在玩 PDO，并且正在慢慢地将一些旧代码转换为这个。

有点卡在一些事情上，努力寻找我需要的东西。

**我遇到的问题是：**

1.  有`$db`一个函数或排序，所以它只有在我调用它时才打开，我只想管理这个的一个实例
2.  检查执行是否成功，如果没有返回值等。

此外，关于以下代码的任何建议都会非常完整，因为我是从网络上收集的。

当前代码：

```
//Database Array
$config['db'] = array(
    'host' => 'localhost',
    'username' => 'root',
    'password' => 'root',
    'dbname' => 'root');

//New PDO
$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']['dbname'], $config['db']['username'], $config['db']['password']);

//Check connection is ok
try {
    $db->exec("SET CHARACTER SET utf8");
}
catch (PDOException $ex) {
    print "Error!: " . $ex->getMessage() . "<br/>";
    die();
}

//Update users function
function update($db, $fn, $ln, $email, $offers, $vlue, $responce) {
    $stmt = $db->prepare("insert into kkt (fName_765, lName_765, email_765, signup_765, stamp_765) values (:fname, :lname, :email, :signup,  NOW())");
    $stmt->bindParam(':fname', $fn, PDO::PARAM_STR);
    $stmt->bindParam(':lname', $ln, PDO::PARAM_STR);
    $stmt->bindParam(':email', $email, PDO::PARAM_STR);
    $stmt->bindParam(':signup', $offers, PDO::PARAM_STR);
    $stmt->execute();
    print $db->lastInsertId(); 
    $stmt = null;
}

//Test Attributes
$fn = 'test';
$ln = 'test';
$email = 'tesst@test,com';
$offers = '1';

update($db, $fn, $ln, $email, $offers, $vlue, $responce); 
```

提前感谢任何帮助/提示

**编辑代码：**

```
//Database Array
$config['db'] = array(
    'host' => 'localhost',
    'username' => 'root',
    'password' => 'root',
    'dbname' => 'local');

//New PDO
$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']['dbname'], $config['db']['username'], $config['db']['password']);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
//Check connection is ok
try {
    $db->exec("SET CHARACTER SET utf8");
}
catch (PDOException $ex) {
    print "Error!: " . $ex->getMessage() . "<br/>";
    die();
}

//Update users function
function update($db, $fn, $ln, $email, $offers, $vlue, $responce)
{
    $stmt = $db->prepare("insert into local (fName_765, lName_765, email_765, signup_765) values (:fname, :lname, :email, :signup, NOW())");
    $stmt->bindParam(':fname', $fn, PDO::PARAM_STR);
    $stmt->bindParam(':lname', $ln, PDO::PARAM_STR);
    $stmt->bindParam(':email', $email, PDO::PARAM_STR);
    $stmt->bindParam(':signup', $offers, PDO::PARAM_STR);
    try {
        $stmt->execute();
        print $db->lastInsertId(); //show ID
        return true;
    }
    catch (PDOException $e) {
        print "Error!: " . $e->getMessage() . "<br/>"; // show error
        return false;
    }
}

//Test Attributes
$fn = 'test';
$ln = 'test';
$email = 'tesst@test,com';
$offers = '1';

if (!update($db, $fn, $ln, $email, $offers, $vlue, $responce)) {
    echo "no update there is a slight problem";
} else {
    echo "it seemed to work";
} 
```

似乎到了那里，上面的作品看起来如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:26:07.790

> 将 $db 放在函数或排序中，因此它仅在我调用它时才打开，我只想管理它的一个实例。

在脚本的开头打开它，然后将其传递给需要它的函数。在函数内部打开一个新的数据库连接可能会导致进一步的问题。例如，如果您的函数在同一个脚本中多次使用怎么办？您真的不想每次调用同一个函数时都打开一个新的数据库连接。

> 检查执行是否成功，如果没有返回值等。

至于检查 PDOStatement::execute 是否成功：

```
$result = $stmt->execute(); 
```

如果您查看[手册](http://www.php.net/manual/en/pdostatement.execute.php)，返回类型列出为：

> 成功时返回 TRUE，失败时返回 FALSE。

```
$result = $stmt->execute();
return $result; 
```

或者

```
return $stmt->execute(); 
```

就个人而言，我会选择：

```
function update($db, $fn, $ln, $email, $offers, $vlue, $responce) {
    $stmt = $db->prepare("insert into kkt (fName_765, lName_765, email_765, signup_765, stamp_765) values (:fname, :lname, :email, :signup,  NOW())");
    $stmt->bindParam(':fname', $fn, PDO::PARAM_STR);
    $stmt->bindParam(':lname', $ln, PDO::PARAM_STR);
    $stmt->bindParam(':email', $email, PDO::PARAM_STR);
    $stmt->bindParam(':signup', $offers, PDO::PARAM_STR);
    return $stmt->execute();
} 
```

顺便说一句，当您将对象传递给函数时，它会自动通过引用传递，这意味着您可以执行以下操作：

```
$result = update($db, $fn, $ln, $email, $offers, $vlue, $responce);
if($result){
    echo $db->lastInsertId();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:43:24.683

> 检查执行是否成功，如果没有返回值等。

我个人更喜欢异常，并且 PDO 可以配置为在错误时引发异常。异常很好，因为失败语句之后的代码没有被执行。如果您有父行，然后编写一些依赖于插入父行的子行，这会很方便。当无法创建父行时，您不想编写子行。

可以通过这样做来打开它：

```
<?php

$pdo = new PDO(/* DSN */);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ATTR_ERRMODE_EXCEPTION); 
```

然后你会这样做：

```
<?php

try {
    $stmt->execute();
    return true;
} catch (\PDOException $e) {
    return false;
} 
```

您可以在此处找到更多相关信息：[http ://www.php.net/manual/en/pdo.error-handling.php](http://www.php.net/manual/en/pdo.error-handling.php)

> 将 $db 放在函数或排序中，因此它仅在我调用它时才打开，我只想管理一个实例

我通常使用服务容器来管理数据库连接。最简单的现有选项是[Pimple](http://pimple.sensiolabs.org/)。然后传递这个服务容器，服务容器只负责创建一个数据库连接。

```
<?php

$config = new \Pimple;

$config['db.options'] = array(
    'host' => 'localhost',
    'username' => 'root',
    'password' => 'root',
    'dbname' => 'root');

# Calling the "share" method makes sure that the function is only called when
# 'db' is retrieved the first time.
$config['db'] = $config->share(function() use ($config) {
    return new PDO('mysql:host=' . $config['db.options']['host'] . ';dbname=' . $config['db.options'']['dbname'], $config['db.options'']['username'], $config['db.options'']['password']);
});

function update() {
     global $config;

     # Connection is only made the first time the 'db' key is accessed.
     $db = $config['db'];
     /* Do queries */
} 
```

# c++ - 删除在另一个对象的构造函数中创建的“新对象”？

> ID：14773414
> 
> 赞同：0
> 
> 时间：2013-02-08T13:15:38.163
> 
> 标签：c++, object, memory-leaks

在我的程序中，我有以下 typedef：

```
typedef shared_ptr<IFrameObserver> IFrameObserverPtr; 
```

然后，这行代码：

```
IFrameObserverPtr myObv(new MyObserver(cameras[0])) 
```

. . . 其中 MyObserver 是在 IFrameObserverPtr 的构造函数中创建的。问题是 MyObserver 类每次创建时都会创建一个 6mB 的位图，并且由于它永远不会被删除，这会导致非常严重的内存泄漏（该行每秒调用 10 次）。

我的问题很简短：如何显式删除新的 MyObserver 以使自己免受内存泄漏的影响？

有关我的内存泄漏有多可怕的参考，这是我的程序部分执行期间的任务管理器：

![可怕的内存泄漏](../Images/536819fa9b6e153217f52f450dfce30f.png)

* * *

**编辑：**好的，我花了过去 2 个小时试图解决这个问题，但无济于事。正在做 。. .

```
myObv.reset(); 
```

. . . 没用。

这样每个人都可以看到 MyObserver 类中发生了什么，这里是：

```
class MyObserver : public IFrameObserver
{
public:

    HBITMAP hbm;

    BITMAPINFOHEADER* bi;

    MyObserver(CameraPtr pCamera) : IFrameObserver(pCamera) {};
    ~MyObserver(){delete hbm;}

    HBITMAP GetBMP()
    {
        return hbm;
    }

    void FrameReceived ( const FramePtr pFrame )  
    {
        DbgMsg(L"Frame Received\n");

        //////////////////////////////////////////////////////////////////////////
        //////////  Set Bitmap Settings   ////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////

        //fileheader
        BITMAPFILEHEADER* bf = new BITMAPFILEHEADER;
        bf->bfType = 0x4d42;
        bf->bfSize = 6054400 + 54;
        bf->bfOffBits = 54;

        //infoheader
        bi = new BITMAPINFOHEADER;
        bi->biSize = 40;
        bi->biWidth = 2752;
        bi->biHeight = -733;
        bi->biPlanes = 1;
        bi->biBitCount = 24;
        bi->biCompression = 0;
        bi->biSizeImage = 6054400;
        bi->biXPelsPerMeter = 2835;
        bi->biYPelsPerMeter = 2835;
        bi->biClrUsed = 0;
        bi->biClrImportant = 0;

        //image data in VmbPixelFormatMono8
        VmbUchar_t* imageData;
        pFrame->GetImage(imageData);

        //////////////////////////////////////////////////////////////////////////
        //////////  Output File to .bmp   ////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////

        BITMAPINFO* bmi;
        bmi = (BITMAPINFO*)bi;

        HDC hdc = ::GetDC(NULL);

        hbm = CreateDIBitmap(hdc, bi, CBM_INIT, imageData, bmi, DIB_RGB_COLORS);

        delete  bf;
        delete  bi;
        //free(imageData); //doesn't work, crashes
        //delete imageData; //doesn't work, crashes
        imageData = NULL;   //doesn't crash, but I don't think this frees the memory
        DeleteObject(hdc);  

    }
}; 
```

我已经尝试了所有我能想到的方法来释放这个对象在创建时产生的 5.77 mB，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:53:37.137

假设`typedef shared_ptr<IFrameObserver> IFrameObserverPtr`正如您在评论中所说，那么当它超出范围时它将减少引用计数。

所以有几种可能：

1.  您正在使用的 shared_ptr 已损坏。如果它是 boost:: 或 std::shared_ptr，这是极不可能的。
2.  您将 shared_ptr 传递给另一个函数或对象，它会为同一个对象创建另一个 shared_ptr ，从而防止其破坏。在这种情况下，找到不需要的对象保留发生的位置。
3.  MyObserver 销毁的析构函数不会释放位图。
4.  IFrameObserver 的析构函数不是虚拟的，因此不会调用释放位图的 MyObserver 析构函数。

所以第一个测试是确定是否：

```
{
    IFrameObserverPtr myObv(new MyObserver(cameras[0]));
} 
```

调用 MyObserver 析构函数。如果没有，那么 4 或 3 将适用。

如果该块泄漏位图，则 ~MyObserver 有问题。

如果该块释放位图，则查看还有什么保留了该对象。

* * *

随着您的编辑显示析构函数和创建作为`hbm`句柄的位图的代码，很明显析构函数不会破坏位图。

由于您使用`CreateDIBitmap`Win32 API 调用创建 hbm，因此您需要使用相应的 Win32 API 调用（msdn.microsoft.com/en-gb/library/windows/desktop/... 说是）来释放它`DeleteObject`，而不仅仅是使用 C++ 删除在位图的句柄上-您正在尝试删除句柄（这是一个`void*`指针，因此是[未定义的行为](https://stackoverflow.com/a/941959/1527)）。您不是在告诉 Windows 释放句柄指向的资源。

您可能还泄漏了图像数据，因为有注释掉试图释放它 - 检查文档`Frame::GetImage`（或任何调用它的实现，如果它是您自己的代码）关于您是否必须调用任何东西来释放它，或者它是否仍然归框架所有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:38:51.430

如果`IFrameObserver`实现是为了拥有`MyObserver`你传递给它的构造函数，让它的析构函数删除它，然后确保`IFrameObserver`被立即销毁。如果其他人应该拥有它，请`MyObserver`确保他们有一个指针并知道何时删除它。

如果你不知道谁应该拥有它，你需要弄清楚。在 C++ 中正确进行内存管理的唯一方法是了解对象所有权和生命周期。一旦你把它整理好，就像`shared_ptr`并且`unique_ptr`应该允许你很容易地实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:55:15.317

> 有`IFrameObserverPtr`定义`typedef shared_ptr<T>(IFrameObserver) IFrameObserverPtr`
> 
> 问题是`MyObserver`该类每次创建时都会创建一个 6mB 的位图
> 
> 它永远不会被删除

我假设您的意思是`typedef shared_ptr<IFrameObserver> IFrameObserverPtr`并且您的计算机的复制/粘贴机制损坏。

然后：

1.  析构函数坏了`MyObserver`，必须修复，或者
2.  未标记析`MyObserver`构函数及其等效的析构函数。`IFrameObserver``virtual`

当`MyObserver`最后一个对象`IFrameObserverPtr`超出范围时，对象本身已经被销毁，所以当销毁过程被修复以消除泄漏时，你会没事的。

# qt - Object::connect: 没有这样的信号

> ID：14773415
> 
> 赞同：5
> 
> 时间：2013-02-08T13:15:41.313
> 
> 标签：qt, signals-slots, qobject

我在使用结构创建自定义插槽/信号时遇到问题。我有以下代码：

```
qRegisterMetaType<namespace::myClassA::aStruct>();
QObject::connect(&myClassA, SIGNAL(theSignal(myClassA::aStruct)),
                  &myClassB, SLOT(theSlot(myClassA::aStruct))); 
```

运行程序时我得到：

```
Object::connect: No such signal NameSpace::myClassA::theSignal(myClassA::aStruct)
Object::connect:  (receiver name: 'NameSpace__CLASSNAME') 
```

我该如何解决这个问题？

PS：插槽和信号已在头文件文件 Q_SIGNALS 和 Q_SLOTS 关键字中正确声明，并带有正确的参数（aStruct）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T14:03:08.170

信号/槽连接中使用的类型必须完全“作用域”，因为方法调用被转换为文本，所以你的连接调用应该如下所示：

```
QObject::connect(&myClassA, SIGNAL(theSignal(namespace::myClassA::aStruct)),
                 &myClassB, SLOT(theSlot(namespace::myClassA::aStruct))); 
```

您可能必须更新信号/插槽声明参数以匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-30T06:27:39.677

我找到了信号槽的解决方案：信号和槽函数的声明和调用不匹配！我一修好它们，插槽就被调用了。

在这里，您可能会遇到所有可能的错误方式。

[**调试 Qt 信号和槽的 20 种方法**](https://samdutton.wordpress.com/2008/10/03/debugging-signals-and-slots-in-qt/)

希望，阅读这篇文章后它会有所帮助，并会节省您的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T22:04:33.237

当你声明槽/信号时，你可以像这样基于参数结构的命名空间：

::命名空间::ClassA::structA

而不是从“命名空间”内部使用 ClassA::structA。如果您尝试引用同一命名空间内的结构，这很有用。

# c# - 在 C#/Windows 中模拟文件的“拒绝访问”

> ID：14773419
> 
> 赞同：3
> 
> 时间：2013-02-08T13:15:50.627
> 
> 标签：c#, windows, file, testing

我正在尝试为一个`C#`读取不同文件的小例程编写集成测试。

而且，我不小心认为有一个测试会很棒，它指定了当**访问该文件被拒绝时的情况。**

有谁知道在测试沙箱中模拟它的好方法吗？

* * *

*   我怀疑这可以使用[`DirectorySecurity,`](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.directorysecurity.aspx)但是，我不确定是否可以在所有情况下正确地做到这一点：

    > 假设，例如，我可以为正在运行测试的当前用户剥离访问规则（这也需要 UAC / Elevation）。
    > 
    > 我想在这种情况下，我将无法在测试完成后恢复这些权限并正确处理我的沙箱（无需深入研究模拟和访问令牌操作等内容）。

*   我可能可以使用[`Moles`](http://research.microsoft.com/en-us/projects/moles/)或任何其他基于模拟的方法来做到这一点，但我对通用解决方案更感兴趣（例如，将此测试重用于本机应用程序）。

我错过了什么？有什么*简单的*方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:30:51.277

您并没有明确表示您想通过安全设置来实现这一点，那么为什么不在其他地方获得对文件的独占访问权限呢？

```
using(File.Open(path, FileMode.Open, FileAccess.ReadWrite, FileShare.None))
{
    //hold here to keep file locked
} 
```

# c - 未定义对“readline”的引用

> ID：14773420
> 
> 赞同：13
> 
> 时间：2013-02-08T13:15:52.457
> 
> 标签：c, readline, libreadline

我在尝试运行[wikipedia 中提供的](https://en.wikipedia.org/wiki/GNU_readline#Sample_code)[GNU Readline](http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html)库示例代码时遇到问题。它是这样的：

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <readline/readline.h>
#include <readline/history.h>

int main()
{
    char* input, shell_prompt[100];

    // Configure readline to auto-complete paths when the tab key is hit.
    rl_bind_key('\t', rl_complete);

    for(;;) {
        // Create prompt string from user name and current working directory.
        snprintf(shell_prompt, sizeof(shell_prompt), "%s:%s $ ", getenv("USER"), getcwd(NULL, 1024));

        // Display prompt and read input (n.b. input must be freed after use)...
        input = readline(shell_prompt);

        // Check for EOF.
        if (!input)
            break;

        // Add input to history.
        add_history(input);

        // Do stuff...

        // Free input.
        free(input);
    }
} 
```

我在一个受限的环境中工作，readline 不可用，所以我必须下载源代码，编译它并将其安装到我的主目录。

这是我的主目录中的结构：

```
.local
├── include
│   └── readline
│       ├── chardefs.h
│       ├── history.h
│       ├── keymaps.h
│       ├── readline.h
│       ├── rlconf.h
│       ├── rlstdc.h
│       ├── rltypedefs.h
│       └── tilde.h
└── lib
    ├── libhistory.a
    ├── libhistory.so -> libhistory.so.6
    ├── libhistory.so.6 -> libhistory.so.6.2
    ├── libhistory.so.6.2
    ├── libreadline.a
    ├── libreadline.so -> libreadline.so.6
    ├── libreadline.so.6 -> libreadline.so.6.2
    └── libreadline.so.6.2 
```

问题是，当我调用 gcc 时，它会抛出一个错误：

```
$ gcc hello.c -o hello_c.o -I /home/my-home-dir/.local/include
/tmp/cckC236E.o: In function `main':
hello.c:(.text+0xa): undefined reference to `rl_complete'
hello.c:(.text+0x14): undefined reference to `rl_bind_key'
hello.c:(.text+0x60): undefined reference to `readline'
hello.c:(.text+0x77): undefined reference to `add_history'
collect2: error: ld returned 1 exit status 
```

[这里](https://stackoverflow.com/questions/4928203/undefined-reference-to-readline)有一个关于这个的答案，但我没有使用 Netbeans，我不太确定如何在命令行上指定库的路径。

我试图告诉链接器库在哪里，但结果还是一样：

```
$ gcc hello.c -o hello_c.o -I /home/my-home-dir/.local/include -Xlinker "-L /home/my-home-dir/.local/lib"
/tmp/cceiePMr.o: In function `main':
hello.c:(.text+0xa): undefined reference to `rl_complete'
hello.c:(.text+0x14): undefined reference to `rl_bind_key'
hello.c:(.text+0x60): undefined reference to `readline'
hello.c:(.text+0x77): undefined reference to `add_history'
collect2: error: ld returned 1 exit status 
```

有什么我可能在这里遗漏的想法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-08T13:19:13.367

You need to link against the actual library using `-lreadline` in gcc arguments.

# javascript - 使用至少一个 alpahbet(Az) 进行名称验证的正则表达式

> ID：14773421
> 
> 赞同：3
> 
> 时间：2013-02-08T13:16:01.707
> 
> 标签：javascript, regex

我需要一个正则表达式来验证它应该包含至少一个字母（AZ，az）和可选的数字（0-9）。

有效名称：

*   啊啊啊
*   aaa1
*   所以
*   约翰 P. 示例

无效的名字，

*   1111
*   @@@@

到目前为止我尝试过的正则表达式

```
[a-zA-Z0-9\.\'\-_\s]{1,20} 
```

和

```
function validateFirstName(a) {
  if (/[0-9]/.test(a) && /[a-zA-Z]/.test(a)) {
      return false;
  } else {
      return true;
  }
} 
```

但两者都不起作用。

任何人都可以在这方面提供帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:24:36.563

尝试：

```
^[a-zA-Z0-9]*[a-zA-Z]+[a-zA-Z0-9]*$ 
```

解释：

*   中间方括号中的位（“三明治中的肉”）与字母字符匹配。后面的 + 确保至少有其中之一。
*   其他两个方括号表达式（“三明治中的面包”）匹配字母数字字符。每个之后的 * 允许任意数量的这些。
*   围绕整个内容的 ^ 和 $ 确保它是正在查看的整个文本，而不仅仅是它的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:19:20.253

`[a-zA-Z]+.*|.*[a-zA-Z]+|.*[a-zA-Z]+.*`匹配您提供的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:22:30.213

因此，您需要任意数量的 az char 或数字，然后至少需要一个 az char 和任意数量的 az char 或数字：

```
^[a-zA-Z0-9]*[a-zA-Z]+[a-zA-Z0-9]*$ 
```

这应该可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T13:22:32.507

如果您只想检查字符串是否包含字母字符，那么只需执行以下操作：

```
/[a-z]/i.test(str) 
```

如果字符串应仅由字母数字字符和至少一个字母字符组成：

```
/^(?=.*[a-z])[a-z\d]+$/i.test(str) 
```

或者

```
/[a-z]/i.test(str) && /^[a-z\d]+$/i.test(str) 
```

否则，`[a-zA-Z0-9.'\-_\s]{1,20}`实际上对我来说看起来不错，但是您必须将其锚定到字符串的开头和结尾：

```
/^[a-zA-Z0-9.'\-_\s]{1,20}$/.test(str) 
```

如果您想强制使用字母字符，您必须包括前瞻或进行额外的测试，就像在前面的示例中一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-23T09:21:45.060

我去了 Angular Docs 并找到了这个。也许这很简单，但可以满足我的需要

```
<input name="firstName" ngModel pattern="[a-zA-Z ]*"> 
```

[https://angular.io/api/forms/PatternValidator#adding-a-pattern-validator](https://angular.io/api/forms/PatternValidator#adding-a-pattern-validator)

# java - 如何将 HashMap 值添加到 ArrayList

> ID：14773425
> 
> 赞同：0
> 
> 时间：2013-02-08T13:16:13.110
> 
> 标签：java, arraylist, hashmap

我有一个 HashMap，我正在像这样迭代：

```
for(HashMap<String, Integer> aString : value){
                System.out.println("key : " + key + " value : " + aString);

            } 
```

我得到的结果是：

```
key : My Name value : {SKI=7, COR=13, IN=30} 
```

现在我需要将 `SKI 、 COR 和 IN 分成 3 个不同的 ArrayLists 及其对应的值？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:59:40.297

我不太确定你的 hashmap 包含什么，因为你的代码很简短，但看起来它几乎给了你 hashmap 的 toString() 。遍历 hashmap 的最佳方法是：

```
 Map mp;
    .....
    Iterator it = mp.entrySet().iterator();
    while (it.hasNext()) {
        Map.Entry pairs = (Map.Entry)it.next();
        System.out.println(pairs.getKey() + " = " + pairs.getValue());
        String key = pairs.getKey();
        String value = pairs.getValue();
        //Do something with the key/value pair
    } 
```

但是，如果您正确地遍历您的哈希图，那么下面是手动将该字符串解析为三个不同的数组列表的解决方案，这可能是最安全的方法。

```
ArrayList < String > ski = new ArrayList < String > ();
ArrayList < String > cor = new ArrayList < String > ();
ArrayList < String > in = new ArrayList < String > ();

for (HashMap < String, Integer > aString: value) {
    System.out.println("key : " + key + " value : " + aString);
    aString.replace("{", "");
    aString.replace("}", "");
    String[] items = aString.split(", ");
    for (String str: items) {
        if (str.contains("SKI")) {
            String skiPart = str.split("=");
            if (skiPart.length == 2) ski.add(skiPart[1]);
        }
        elseif(str.contains("COR")) {
            String corPart = str.split("=");
            if (corPart.length == 2) cor.add(corPart[1]);
        }
        elseif(str.contains("IN")) {
            String inPart = str.split("=");
            if (inPart.length == 2) in.add(inPart[1]);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:25:42.427

如果您的数据始终是 JSON，您可以像通常使用 JSON 一样简单地对其进行解码：

```
ArrayList<Integer> array = new ArrayList<Integer>();
JSONArray json = new JSONArray(aString);
for (int i =0; i< json.length(); i++) {
    array.add(json.getInt(i));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T19:41:37.437

这是一个充满 HashMap 的 ArrayList（或 List）：

```
ArrayList<HashMap<String, Object>> userNotifications = new ArrayList<HashMap<String, Object>>();
int count = 0;

HashMap<String, Object> notificationItem = new HashMap<String, Object>();
notificationItem.put("key1", "value1");
notificationItem.put("key2", "value2");
userNotifications.add(count, notificationItem);
count++; 
```

然后检索值：

```
ArrayList<HashMap<String, Object>> resultGetLast5PushNotificationsByUser = new ArrayList<HashMap<String, Object>>();

resultGetLast5PushNotificationsByUser = methodThatReturnsAnArrayList();
HashMap<String, Object> item1= resultGetLast5PushNotificationsByUser.get(0);
String value1= item1.get("key1");
String value2= item1.get("key2");
HashMap<String, Object> item1= resultGetLast5PushNotificationsByUser.get(1);
String value1= item1.get("key1");
String value2= item1.get("key2"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-18T08:57:37.263

目前尚不清楚您的预期输出的形状是什么。

三个这样的列表：

```
[7]
[13]
[30] 
```

或从键映射到三个列表，如下所示：

```
{ "SKI" -> [7]  }
{ "COR" -> [13] }
{ "IN"  -> [7]  } 
```

?

不过，这里有一些选项：

### 选项1

```
// HashMap does not preserve order of entries
HashMap<String, Integer> map = new HashMap<>();
map.put("SKI", 7);
map.put("COR", 13);
map.put("IN", 30);

List<List<Integer>> listOfLists = map.values()
                                     .stream()
                                     .map(Collections::singletonList)
                                     .collect(Collectors.toList());

listOfLists.forEach(System.out::println); 
```

```
Output:
[7]
[30]
[13] 
```

### 选项 2

```
// LinkedHashMap preserves order of entries
LinkedHashMap<String, Integer> map2 = new LinkedHashMap<>();
map2.put("SKI", 7);
map2.put("COR", 13);
map2.put("IN", 30);

List<List<Integer>> listOfLists2 = map2.values()
                                       .stream()
                                       .map(Collections::singletonList)
                                       .collect(Collectors.toList());

listOfLists2.forEach(System.out::println); 
```

```
Output:
[7]
[13]
[30] 
```

### 选项 3

```
HashMap<String, Integer> map3 = new HashMap<>();
map3.put("SKI", 7);
map3.put("COR", 13);
map3.put("IN", 30);

HashMap<String, List<Integer>> result = new HashMap<>();
map3.forEach((key, value) -> result.put(key, Collections.singletonList(value)));

result.entrySet().forEach(System.out::println); 
```

```
Output:
SKI=[7]
IN=[30]
COR=[13] 
```

### 选项 4

```
Map<String, List<Integer>> result =
        map4.entrySet()
            .stream()
            .collect(Collectors.toMap(
                    // key mapping
                    entry -> entry.getKey(),
                    // value mapping
                    entry -> Collections.singletonList(entry.getValue())
                    )
            );

result.forEach((key, val) -> System.out.println(key + " " + val)); 
```

```
Output:
SKI [7]
IN [30]
COR [13] 
```

# javascript - ember.js 在为其属性设置新值后应用对象

> ID：14773426
> 
> 赞同：0
> 
> 时间：2013-02-08T13:16:21.170
> 
> 标签：javascript, ember.js

干杯! 我有简单的动作：

```
TravelClient.TourSeatsController = Ember.ObjectController.extend({
  selectSeat: function(seat) {
    // console.log(seat.get('id'));
    // console.log(seat.get('free'));
    seat.set('free', false);
    TravelClient.Seat.apply(seat);
    // console.log(seat.get('free'));
  }
}); 
```

我的html：

```
 {{#each seat in controller.seatsArray}}
        <li class="item">
          {{#if seat.free}}
            <div class="counter-value">
              <a href="#" {{action "selectSeat" seat}}>{{seat.id}}</a>
            </div>
............................................................................... 
```

对象的结构：

```
 ...addObject(TravelClient.Seat.create({
    id: i,
    free: true
  })); 
```

Set 方法效果很好，但是当我尝试使用新设置的属性应用对象时，Ember 给了我一个错误：

```
Uncaught TypeError: Cannot redefine property: __ember1360328485839 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:33:18.860

尝试创建事务，将席位添加到事务中，修改席位，然后提交事务。

```
TravelClient.TourSeatsController = Ember.ObjectController.extend({
  selectSeat: function(seat) {
    var transaction = new App.store.transaction();
    transaction.add(seat);
    seat.set('free', false);
    transaction.commit();
  }
}); 
```

# android - 通过 for() 循环和 Handler 不断更新文本

> ID：14773428
> 
> 赞同：0
> 
> 时间：2013-02-08T13:16:28.270
> 
> 标签：android, loops, textview, handler, freeze

我 正在 为 我 做 一个 测试 项目 , 以便 我 可以 了解 更多 , 所以 现在 我 需要`TextView`通过 一个 循环 每 250 毫秒更新 a 的 文本`for(;;)`, 它 发生 在 按钮 单击 之后 ... 我 的 问题 是 每当 我按下该按钮我的应用程序冻结（是的，我的按钮完全正常工作，已通过先前的测试验证），我正在使用主线程的处理程序在启动时不会受到影响`Runnable`......这是我的按钮和处理程序代码...

```
final Handler handler = new Handler();
        B3.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                handler.post(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        for(;;){
                            String a = Shells.sendSingleCommand("free");//Here I send a command "free" and it returns its output 
                            text.setText(a);//text is my TextView which is used through my experimentations ... 
                            synchronized(this){
                                try{
                                    wait(250);
                                }catch(Exception e){

                                }
                        }

                        }
                    }
                });
                }

        }); 
```

如果您需要更多信息，请询问:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:29:04.070

用于`handler.postDelayed`每 250 毫秒不断更新 textview，而不是`for loop`用于避免冻结当前活动：

```
Handler handler=new Handler();
B3.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                  handler.post(runnable);  
                }

        });
Runnable runnable=new Runnable(){  
  @Override  
    public void run() {  
       String a = Shells.sendSingleCommand("free");
       text.setText(a);
       handler.postDelayed(runnable, 250);  
     }  
 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:18:44.360

Android 不允许您在主线程中执行长任务。如果你需要做这样的事情，我建议将 for 循环和依赖代码移动到一个单独的线程中。

# entity-framework - 检查 EntityFramework 是否忽略属性

> ID：14773434
> 
> 赞同：2
> 
> 时间：2013-02-08T13:16:58.583
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.3

使用带有 POCO 的 EntityFramework 4.3。如何检查模型上的属性是否被忽略。

在我的 DBContext 类层次结构中，我忽略了一个属性

```
modelBuilder.Entity<EClass>().Ignore (f => f.IgnoredProperty()); 
```

在我的 BaseContext 类中，我需要检查该属性是否被忽略。

```
private void ProcessGlobalConvention(DbModelBuilder modelBuilder, IGlobalConvention convention)
{
    modelBuilder.Entity<typeof(this.GetType())>("Ignored Property");
} 
```

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T19:20:32.190

使用 EF 电动工具[http://www.infoq.com/news/2013/10/ef-power-tools-beta4](http://www.infoq.com/news/2013/10/ef-power-tools-beta4)查看您的模型。房产在吗？

创建一个数据库。柱子在吗？

查看Database.LogSqlEvents [http://blog.oneunicorn.com/2013/05/08/ef6-sql-logging-part-1-simple-logging/](http://blog.oneunicorn.com/2013/05/08/ef6-sql-logging-part-1-simple-logging/)解析sql看字段名是否出现...

....除非您*真的*想要代码解决方案...？

在这种情况下

新建您的 DbContext 创建一条记录并将其添加到相关 DbSet 获取 DbEntityEntry 在 CurrentValues.PropertyNames 中查找。你的房产在吗？

```
 [TestMethod]
    public void CreateDatabase()
    {
        Database.SetInitializer(new DropCreateDatabaseAlways<HomesContext>());

        var db = new HomesContext();

        Assert.IsFalse(db.Homes.Any());

        var home = db.Homes.Create();

        db.Homes.Add(home);

        var entry = db.Entry(home);

        Assert.IsTrue(entry.CurrentValues.PropertyNames.Contains("MaxResidents"));
        Assert.IsTrue(entry.CurrentValues.PropertyNames.Contains("MaxStaff"));
        Assert.IsFalse(entry.CurrentValues.PropertyNames.Contains("CurrentResidents"));
        Assert.IsFalse(entry.CurrentValues.PropertyNames.Contains("CurrentStaff"));

    }
public class HomesContext:DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Home>().Ignore(x => x.CurrentResidents);

        base.OnModelCreating(modelBuilder);
    }
    public DbSet<Home> Homes { get; set; }
}

public class Home
{
    public int HomeId { get; set; }
    public string HomeName { get; set; }

    public int MaxResidents { get; set; }
    public int MaxStaff { get; set; }

    public int CurrentResidents { get; set; }

    [NotMapped]
    public int CurrentStaff { get; set; }
} 
```

# jquery - jquery 循环遍历 datepicker 的类似记录

> ID：14773435
> 
> 赞同：0
> 
> 时间：2013-02-08T13:17:06.503
> 
> 标签：jquery, loops

我有一个表单，允许用户选择 3 个日期期间（或 1 个或 2 个）。重复此模式，允许用户选择自定义范围的日期、每周、每月、每天等。如果有一种方法可以优化 jquery，这样我就不必为每个输入写出整个 jquery 函数？唯一真正改变的是 id 中的数字。

```
<input type='text' id='custom1from'><input type='text' id='custom1until'>
<input type='text' id='custom2from'><input type='text' id='custom2until'>
<input type='text' id='custom3from'><input type='text' id='custom3until'>

<input type='text' id='monthly1from'><input type='text' id='monthly1until'>
<input type='text' id='monthly2from'><input type='text' id='monthly2until'>
<input type='text' id='monthly3from'><input type='text' id='monthly3until'>

$("#custom1from").click(function() {
        $("#custom1from").datepicker();
      });

      $("#custom1until").click(function() {
        $("#custom1until").datepicker();
      });

      $("#custom2from").click(function() {
        $("#custom2from").datepicker();
      });

      $("#custom2until").click(function() {
        $("#custom2until").datepicker();
      });

  $("#custom3until").click(function() {
    $("#custom3until").datepicker();
  });
  $("#custom3until").click(function() {
    $("#custom3until").datepicker();
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:18:41.617

```
$('input').click(function(){
    $(this).datepicker(); // use "this" don't requery the DOM.
}); 
```

您最好将这些输入添加到一个类中，例如`foo`：

```
$('input.foo').click(function(){
    $(this).datepicker();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:19:16.733

只需给它一个类并选择它。

```
<input type='text' class="datepick" id='custom1from'><input type='text' id='custom1until'>
<input type='text' class="datepick" id='custom2from'><input type='text' id='custom2until'>
<input type='text' class="datepick" id='custom3from'><input type='text' id='custom3until'>

<input type='text' class="datepick" id='monthly1from'><input type='text' id='monthly1until'>
<input type='text' class="datepick" id='monthly2from'><input type='text' id='monthly2until'>
<input type='text' class="datepick" id='monthly3from'><input type='text' id='monthly3until'>

$(".datepick").datepicker(); 
```

# c# - 我在 C# 中的数字格式没有给我一个填充数字

> ID：14773437
> 
> 赞同：0
> 
> 时间：2013-02-08T13:17:10.690
> 
> 标签：c#

我正在使用以下内容：

```
 public static SelectList GetOptions<T>(string value = null) where T : struct
    {
        var values = EnumUtilities.GetSpacedOptions<T>();
        var options = new SelectList(values, "Value", "Text", value);
        return options;
    }

    public static IEnumerable<SelectListItem> GetSpacedOptions<T>(bool zeroPad = false) where T : struct
    {
        var t = typeof(T);
        if (!t.IsEnum)
        {
            throw new ArgumentException("Not an enum type");
        }
        var numberFormat = zeroPad ? "D2" : "g";
        var options = Enum.GetValues(t).Cast<T>()
            .Select(x => new SelectListItem
            {
                Value = ((int) Enum.ToObject(t, x)).ToString(numberFormat),
                Text = Regex.Replace(x.ToString(), "([A-Z])", " $1").Trim()
            });
        return options; 
```

我的枚举具有值：

```
public enum DefaultStatus {
    Release = 0,
    Review = 1,
    InProgress = 2,
    Concept = 3,
    None = 99
}; 
```

据我了解，数字格式应该给出我的值“01”、“02”等，但它给了我“1”、“2”、“3”..

有什么明显的我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:23:15.447

您有带有默认值的`GetSpacedOptions`可选参数。`zeroPad``false`

利用

```
var values = EnumUtilities.GetSpacedOptions<T>(true); 
```

代替

```
var values = EnumUtilities.GetSpacedOptions<T>(); 
```

# java - 在 Java 中，如何在单个数组中表示二维坐标系？

> ID：14773438
> 
> 赞同：0
> 
> 时间：2013-02-08T13:17:11.313
> 
> 标签：java, arrays, performance, 2d, coordinates

使用 Java 时，使用多维数组时似乎会显着放缓：-

```
int[] oneDArray=new int[3000*3000];
int[][] twoDArray=new int[3000][3000];

for(int x=0;x<oneDArray.length;x++){
   oneDArray[x]=x;
}

for(int x=0;x<twoDArray.length;x++){
    for(int y=0;y<twoDArray[0].length;y++){
        twoDArray[x][y]=x;
    }
} 
```

结果是：1d 需要 4 ms，2d 需要 15ms，这在执行图形功能时是相当大的延迟。

如何在 Java 中仅用一个数组表示 2d 坐标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:22:11.023

```
int w = 3000;
int h = 3000;

int[] array = new int[w * h];

/* Here is how to calculate the index for a specific (x, y) */
int index = y * w + x;

array[index] = 5; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:22:23.570

使用一维数组来表示二维数据是很常见的。例如，您可以像这样翻译索引：

```
1Dindex = xIndex + IMAGE_WIDTH*yIndex 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:22:25.907

对于所有行长度相同的矩形数组，您可以简单地使用`oneDArray[x*3000 + y]`在矩形中的位置 (x, y) 保存值的约定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:24:17.107

**选项1：**

使用对对象的一维数组`Pair[]`

```
class Pair {
  int x;
  int y;
} 
```

**选项 2：**

使用 1D 和 2D 之间的算术变换：例如，尺寸为 100 * 200；

然后`a[i, j] = a[i * 200 + j]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T13:24:31.423

如何通过混合坐标来线性化数组？数组的所有偶数元素可能与 x 相关，奇数元素与 y 相关。如果你成对挑选它们，写起来就更容易了。

像这样的东西：

```
x = [x1, x2, x3, x4, ..... , x3000] 
y = [y1, y2, y3, y4, ..... , y3000] 
```

并将其替换为：

```
data = [x1, y1, x2, y2, x3, y3, x4, y4, ...... , x3000, y3000] 
```

然后，您可以从中选择所有偶数元素来获取 x 和奇数元素来获取 y。这样做的一个好处是您可以执行以下操作：

```
coord (point in position i) = [data [2i], data[2i+1]] 
```

将 i 点的坐标带回家。

否则，我绝对同意通过首先执行所有 xs 然后执行 ys 来线性化数组，就像其他人建议的那样。

# parsing - Parsec 或 happy (with alex) 或 uu-parsinglib

> ID：14773440
> 
> 赞同：16
> 
> 时间：2013-02-08T13:17:21.393
> 
> 标签：parsing, haskell, parsec, happy, uu-parsinglib

我将编写一个verilog（或vhdl）语言的解析器，并对解析的数据进行大量操作（某种转换）。我打算解析非常大的文件（完整的 Verilog 设计，大至 10K 行），我最终将支持大部分 Verilog。我不介意打字，但我不想在添加对其他规则的支持时重写代码的任何部分。

在 Haskell 中，您会推荐哪个库？我知道 Haskell 并且之前使用过 Happy（玩）。我觉得使用 Parsec 来转换代码中的解析字符串是有可能的（这是一个很大的优势）。我没有使用 uu-paringlib 的经验。

那么要解析verilog/VHDL的完整语法，推荐使用其中的哪一个？我主要关心的是我可以随心所欲地操纵解析数据的易用性和“正确性”。速度不是主要问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-08T15:00:07.267

我个人更喜欢 Parsec 在 Alex 的帮助下进行词法分析。

我更喜欢 Parsec 而不是 Happy，因为 1) Parsec 是一个库，而 Happy 是一个程序，如果您使用 Happy 然后用 Happy 编译，您将使用不同的语言编写。2) Parsec 凭借其一元接口为您提供上下文相关的解析能力。您可以使用额外的状态进行上下文相关的解析，然后根据该状态进行检查和决定。或者只是在之前查看一些解析值并决定下一个解析器等。（如`a <- parseSomething; if test a then ... do ...`）当您不需要任何上下文相关信息时，您可以简单地使用应用样式并获得类似在 YACC 或类似工具中实现的实现。

作为 Parsec 的一个缺点，您永远不会知道您的 Parsec 解析器是否包含左递归，并且您的解析器将卡在运行时（因为 Parsec 基本上是一个自上而下的递归下降解析器）。你必须找到左递归并消除它们。YACC 风格的解析器可以为您提供 Parsec 无法获得的一些静态保证和信息（如移位/减少冲突、未使用的终端等）。

强烈建议使用 Alex 在这两种情况下进行词法分析（~~如果您决定继续使用 Happy，~~~~我认为您*必须*~~使用 Alex ）。因为即使您使用 Parsec，它也确实简化了您的解析器实现，并且也捕获了大量错误（例如：将关键字解析为标识符是我在没​​有 Alex 的情况下使用 Parsec 时遇到的常见错误。这只是一个示例）。

你可以看看我在 Alex+Parsec 中实现的[Lua 解析器，这是](https://github.com/osa1/language-lua)[在 Parsec 中使用 Alex 生成的令牌的代码](https://github.com/osa1/language-lua/blob/master/src/Text/Parsec/LTok.hs)。

编辑：感谢您`John L`的更正。显然，您也可以使用 Happy 进行上下文相关解析。此外，Happy 中不需要 Alex 进行词法分析，但建议这样做。

# asp.net-mvc - 当用户在 mvc 上单击它时禁用提交按钮

> ID：14773447
> 
> 赞同：3
> 
> 时间：2013-02-08T13:17:33.187
> 
> 标签：asp.net-mvc, model-view-controller

我想在用户单击时禁用按钮。我可以，但我认为我的方式并不好。我的方式：

我通过javascript设置`ViewBag.IsSaveButtonDisabled`并`true`检查了这个容器div，然后我禁用了保存按钮。我知道，这是不好的解决方案。我想在服务器端控制我的提交按钮的禁用属性。

它的最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:26:26.900

向 yourViewModel 添加新属性

模型

```
viewModel{
    ...
    public string IsDisabled{ get; set; }
} 
```

控制器

```
public ActionResult Index()
{
    viewModel model = new viewModel { ... , IsDisabled = "disabled"};
    return View(model);
} 
```

在你看来

```
@model viewModel
<input type="submit" value="Kaydet" @Model.IsDisabled/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T13:37:11.993

在控制器中将您设置`ViewData["IsEnabled"]`为 false/true 并返回查看。

```
public ActionResult ButtonEvent()
{
    ViewData["IsEnabled"]=false;
    // ... do something
    ViewData["IsEnabled"]=true;
    return View();
} 
```

在您的`jQuery`中，使用它`ViewData["IsEnabled"]`来禁用按钮：

```
$(function(){
    if(!@ViewData["IsEnabled"]){
        $('#btnSubmit').attr('disabled','disabled');
    } else {
        $(this).removeAttr("disabled");
    }
}); 
```

# javascript - OpenLayers.js 使用哪些文件？

> ID：14773449
> 
> 赞同：5
> 
> 时间：2013-02-08T13:17:55.707
> 
> 标签：javascript, file, maps, openlayers, include-path

正如我从`readme`文件中看到的那样，`openlayers.js`包含文件和主题有多种选择。

我想要的是使用这些`lightest solution of openlayers.js`文件。

我将它包含`openlayers.light.js`在我的应用程序中，它会创建地图但不显示它们，请检查：

![在此处输入图像描述](../Images/301e1263042005c8e13949efbf372a75.png)

我忘了包含其他文件吗？

我的结构结构是这样的：

```
/vendor
   /js
     openlayers.light.js
     /img
     /theme 
```

如何显示地图图层？

也可以`openlayers.light.js`在移动设备上使用（一旦解决了这个问题：P）？还是我也需要包括在内`openlayers.mobile.js`？

这是不与 openlayers.light.js 一起使用但与 openlayers.js (740kb) 一起使用的代码：

```
var _element = "#map";
 var map = new OpenLayers.Map (_element, {
    controls: [
    new OpenLayers.Control.Navigation({
      dragPanOptions: {
        enableKinetic: true
      }
    }),
    new OpenLayers.Control.Zoom()
    ],
    projection: new OpenLayers.Projection("EPSG:900913"),
    displayProjection: new OpenLayers.Projection("EPSG:4326")
  });

  var lonLat = new OpenLayers.LonLat(_lon, _lat).transform (
new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
new OpenLayers.Projection("EPSG:900913") // to Spherical Mercator Projection
// map.getProjectionObject() doesn't work for unknown reason
);
  var markers = new OpenLayers.Layer.Markers( "Markers" );
  map.addLayer(markers);

  var size = new OpenLayers.Size(21,25);
  var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
  var icon = new OpenLayers.Icon(_img_map_marker, size, offset);
  markers.addMarker(new OpenLayers.Marker(lonLat, icon.clone()));

  var mapnik = new OpenLayers.Layer.OSM("Test");
  map.addLayer(mapnik);

  map.setCenter (lonLat,3); 
```

**PS：我的 openlayers map js init 方法没问题，它可以使用 huge `openlayers.js (740KB)`，但不能与 openlayers.light.js 一起使用，如我上面所示**

html

```
<div id="map"></div> 
```

css

```
img{max-width:none;}
#map{
width:300px;
height:300px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:38:37.230

如果您想使用带有 openlayers 的移动属性作为手动平移或缩放，您必须使用 openlayers.mobile.js。

您可以将 openlayers.light.js 用于移动设备，但不能用于移动功能。

我认为你的结构应该是：

```
myProject
   /js
      openlayers.light.js
   /img
   /theme 
```

[我已经在http://jsfiddle.net/aragon/ZecJj/](http://jsfiddle.net/aragon/ZecJj/)中尝试过 openlayers.light.js并且没有问题。

我的代码：

```
var map = new OpenLayers.Map({
    div: "map",
    minResolution: "auto",
    maxResolution: "auto",
});

var osm = new OpenLayers.Layer.OSM();
var toMercator = OpenLayers.Projection.transforms['EPSG:4326']['EPSG:3857'];
var center = toMercator({x:-0.05,y:51.5});
map.addLayers([osm]);

map.setCenter(new OpenLayers.LonLat(center.x,center.y), 13); 
```

并尝试阅读[Deploying (Shipping OpenLayers in your Application)](http://docs.openlayers.org/library/deploying.html)。

> OpenLayers 带有开箱即用的预配置示例：只需下载 OpenLayers 的一个版本，您就可以获得一整套易于使用的示例。但是，这些示例旨在用于开发。当您准备好部署应用程序时，您需要一个高度优化的 OpenLayers 分发，以限制带宽和加载时间。

您可以使用此链接更改 src 文件，并且可以看到它仍然有效。

```
 <script type="text/javascript" src="http://openlayers.org/dev/OpenLayers.light.debug.js"></script> 
```

至

```
<script type="text/javascript" src="https://view.softwareborsen.dk/Softwareborsen/Vis%20Stedet/trunk/lib/OpenLayers/2.12/OpenLayers.light.js?content-type=text%2Fplain"></script> 
```

我希望它可以帮助你...

# android - 区分 Galaxy S3 和 Galaxy Note 的设计布局

> ID：14773451
> 
> 赞同：1
> 
> 时间：2013-02-08T13:18:01.397
> 
> 标签：android, android-layout

如何为 Galaxy S3（720x1280 像素）和 Galaxy Note（800x1280 像素）制作布局。

两者都是超高密度设备，所以我需要将两个设备的两组图像放在同一个文件夹 drawable-xhdpi 中。

我不知道设备将如何检测两种设备的不同图像，因为它们都来自同一个文件夹。

请告诉我如何在同一个应用程序中为这两个设备制作布局或管理布局。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:19:15.000

您可以使用[`-sw<N>dp`qualifier](http://developer.android.com/guide/practices/screens_support.html#support)区分设备，它根据设备的最小宽度属性来区分设备。

在您的情况下，您可能需要添加一个名为`drawable-sw400dp`. 该文件夹中的可绘制对象仅适用于最小宽度为 400dp 或更大的设备。由于 Galaxy Note 是最小宽度为 800 像素的 xhdpi，因此它将符合 S3 所不具备的条件。

# java - ActiveMQ 故障转移：如何设置最大重新连接延迟

> ID：14773452
> 
> 赞同：2
> 
> 时间：2013-02-08T13:18:03.763
> 
> 标签：java, jms, activemq

我正在使用 ActiveMQ (5.7) 故障转移。我想减少应用程序在决定无法连接到代理之前等待的最长时间，然后转到下一个。根据[ActiveMQ 故障转移参考](http://activemq.apache.org/failover-transport-reference.html)，这可以通过 maxReconnectDelay 来实现，默认为 30,000（毫秒）。但是，这似乎不起作用。例如，使用以下仍然意味着尝试一个代理和尝试下一个代理之间有 30 秒的延迟。

```
failover:(tcp://host1:61616,tcp://host2:61616)?maxReconnectDelay=2000 
```

我是否误解了配置，或者这是错误的？如何让应用程序尽快尝试第二个代理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T12:41:28.893

**您应该像这样使用每个主机**的 ConnectionTimeOut 属性：

```
failover:(tcp://host1:61616?connectionTimeout=1000,tcp://host2:61616connectionTimeout=1000) 
```

这将在一秒钟内超时连接到每个定义的主机。

# git - 在构建步骤中访问 Teamcity git 更改日志

> ID：14773453
> 
> 赞同：6
> 
> 时间：2013-02-08T13:18:09.393
> 
> 标签：git, bash, teamcity

作为发布构建的构建步骤的一部分，我想访问特定构建的更改日志。特别是 git 提交消息。

我不确定我是否可以在构建步骤中通过 git 执行此操作，或者将更改日志设置为我可以访问的参数。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:25:36.190

`git log`很可能是你的答案：

```
anew@Wintermute$ git log --pretty=format:"%h %ad | %s%d [%an]" --graph --date=short
* 8e11818 2013-02-05 | Add first rough prototype of json controller. Add naive first model as a placeholder. Add separate contexts
* 6570201 2013-01-30 | Remove DAO layer. Preparation for graph data layer. [4n3w]
* a079c87 2013-01-30 | Cleanup. Wish I had more time for this! [4n3w] 
```

**编辑：**我发现了这个[如何为 TeamCIty 中的未决更改编写 git log，](https://stackoverflow.com/questions/10794300/how-to-compose-git-log-for-pending-changes-in-teamcity)这可能与您尝试执行的操作重复。

# url - 在 Blogger 中安装箭头导航

> ID：14773454
> 
> 赞同：0
> 
> 时间：2013-02-08T13:18:10.040
> 
> 标签：url, navigation, blogger

嗨，我发现这个脚本可以让我用箭头在我的博客博客上导航，但我不知道如何为较旧和较新的帖子配置它。你能帮助我吗 ？我不知道如何设置正确的参数。

这是剧本！

[Tumblr 风格键盘导航](https://stackoverflow.com/questions/4404312/tumblr-style-keyboard-navigation)

```
<script type="text/javascript">
document.onkeyup = KeyCheck;       

    function KeyCheck(e)
        {
           var KeyID = (window.event) ? event.keyCode : e.keyCode;

           switch(KeyID)
           {

              case 37:
              window.location = "{PreviousPage}";
              break;

              case 39:
              window.location = "{NextPage}";
              break;
           }
        }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T09:54:55.983

您可以使用以下代码激活箭头键导航

```
<script type='text/javascript'>
document.onkeyup = function(event)
{
if (document.activeElement.nodeName == 'TEXTAREA' || document.activeElement.nodeName == 'INPUT') return;
event = event || window.event;
switch(event.keyCode)
{
case 37:
var newerLink = document.getElementById('Blog1_blog-pager-newer-link');
if(newerLink !=null) window.location.href = newerLink.href;
break;
case 39:
var olderLink = document.getElementById('Blog1_blog-pager-older-link');
if(olderLink!=null) window.location.href = olderLink.href;
}
};
</script> 
```

如果你不确定在哪里添加这个，那么我博客上的小部件安装程序会帮助你 - [http://www.bloggerplugins.org/2013/05/arrow-key-navigation-widget-for-blogger.html](http://www.bloggerplugins.org/2013/05/arrow-key-navigation-widget-for-blogger.html)

# joomla - 修改标头中现有的规范链接

> ID：14773456
> 
> 赞同：2
> 
> 时间：2013-02-08T13:18:18.820
> 
> 标签：joomla, joomla2.5, canonical-link

我正在使用 Joomla 2.5，我想更改标题中的规范链接。我在类别视图中执行此操作（components/com_content/category/tmpl/default.php）

```
$url        = JURI::root();
$sch        = parse_url($url, PHP_URL_SCHEME);
$server     = parse_url($url, PHP_URL_HOST);
$canonical  = $this->escape($_SERVER['REQUEST_URI']);    
$document->addCustomTag('<link rel="canonical" href="'.$sch.'://'.$server.$canonical.'"/>'); 
```

它打印正确的规范，但也将旧的规范链接留在那里，因此我在标题中有 2 个规范链接。

如何更改或删除旧的规范链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-27T06:44:48.990

我发现以下内容适用于 Joomla！3.2.1。可以直接修改

```
$_links 
```

JHtmlDocument 对象中的变量。

我在我的组件的特定视图中执行以下子集，因为 Joomla! 提出来是不正确的。

希望这可以帮助。

```
 $document = JFactory::getDocument();
    foreach($document->_links as $key=> $value)
    {
        if(is_array($value))
        {
            if(array_key_exists('relation', $value))
            {
                if($value['relation'] == 'canonical')
                {                       
                    // we found the document link that contains the canonical url
                    // change it!
                    $canonicalUrl = 'http://www.something.com/index.php/component/my-component-name-here/?view=viewNameHere&amp;parameterNameHere=parameterValueUsedInTheViewRightNow

                    $document->_links[$canonicalUrl] = $value;
                    unset($document->_links[$key]);
                    break;                      
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T16:01:14.430

您可能想要做的是如下所示：

```
$doc_data = $document->getHeadData();
$url        = JURI::root();
$sch        = parse_url($url, PHP_URL_SCHEME);
$server     = parse_url($url, PHP_URL_HOST);
$canonical  = $this->escape($_SERVER['REQUEST_URI']); 
$newtag     = '<link rel="canonical" href="'.$sch.'://'.$server.$canonical.'"/>'

$replaced = false;
foreach ($doc_data['custom'] as $key=>$c) {
    if (strpos($c, 'rel="canonical"')!==FALSE) {
        $doc_data['custom'][$key] = $newtag;
        $replaced = true;
    }
}
if (!$replaced) {
    $doc_data['custom'][] = $newtag;
}

$document->setHeadData($doc_data); 
```

这将从文档中获取所有当前的头部数据，包括您要替换的规范链接。它将搜索自定义集（我猜这将是），如果找到它，请将其替换为您的。如果它没有找到它，那么它会在最后加上它。以防万一。

我可以立即看到的潜在问题：

1.  如果标签包含`rel='canonical'`单引号，则找不到，因此您可能需要对其进行调整。
2.  标签可能被放置在我所说的不同部分`$doc_data`。您可能需要`var_dump($doc_data};`确认变量在此数组中的位置。

# windows - 从 WMI 类方法计算私有工作集内存

> ID：14773457
> 
> 赞同：4
> 
> 时间：2013-02-08T13:18:19.923
> 
> 标签：windows, wmi

我正在使用以下 perl 程序，它使用 WMI 类 Win32_Process 来确定进程的内存使用情况

```
use strict;
use warnings;
use Win32::OLE qw/in/;
sub memory_usage()
{
    my $objWMI = Win32::OLE->GetObject('winmgmts:\\\\.\\root\\cimv2');
    my $processes = $objWMI->ExecQuery("select * from Win32_Process where Name=\'notepad.exe\'");
    my $memory = 0;

    foreach my $proc (in($processes))
    {
         $memory = $memory + $proc->{WorkingSetSize};
    }
    return $memory;
}
print 'Memory usage: ', memory_usage(), "\n"; 
```

WMI 类 Win32_Process 及其属性在 MSDN 上[给出](http://msdn.microsoft.com/en-us/library/aa394372%28v=VS.85%29.aspx)

问题是它计算工作集内存，我想计算私有工作集内存，在链接页面上没有定义任何属性

有什么方法可以从这个类计算私有工作集内存吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T22:59:47.407

更改`Win32_Process`为`Win32_PerfRawData_PerfProc_Process`并将`WorkingSetSize`属性更改为`WorkingSetPrivate`。这将为您提供私有工作集。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa394323(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394323(v=vs.85).aspx)

# jquery - 如何阻止 jQuery 动画覆盖内联样式？

> ID：14773463
> 
> 赞同：0
> 
> 时间：2013-02-08T13:18:33.047
> 
> 标签：jquery, slidedown, inline-styles

我的问题有点复杂。

我有一个导航菜单，其中包含依赖`slideDown()`动画功能的下拉菜单。`margin-top`由于我设置样式的方式，我的下拉列表必须有一个，但我必须`margin-top`在窗口加载后根据用户的字体、缩放等设置使用 jQuery 设置。为此，我使用`attr("style","margin-top: -22px !important")`. 这使我的下拉菜单完全可以正常工作。但是...当我使用 时`slideDown()`，jQuery 会删除 my `!important`，这对下拉动画至关重要。如果我不使用`!important`,会同时为和`slideDown()`设置动画，这看起来不太好。`margin-top``height`

我的问题是：有没有办法阻止 jQuery 覆盖我的内联样式？

示例：http: [//jsfiddle.net/Sy9dC/3/](http://jsfiddle.net/Sy9dC/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:33:22.583

使用**css({})**更改元素的 css 属性值：

```
$(".navigation-secondary-submenu").css('margin-top'," -10px"); 
```

或者您可以使用：

```
$(".navigation-secondary-submenu").removeClass('old_class').addClass('new_class') 
```

其中**new_class**有你的 CSS 属性。

```
.new_class{
    ******
    margin-top: -10px !important;
} 
```

或者这个 css 属性将被动态添加：

```
$(docyment).ready(function(){
      $(".navigation-secondary-submenu").attr('style','margin-top:-22px !important');

     $("button").click(function() {
         $(".navigation-secondary-submenu").attr('style','margin-top:-10px !important');
      });
}); 
```

# html - 使用自定义爬虫访问分页中的所有页面

> ID：14773465
> 
> 赞同：3
> 
> 时间：2013-02-08T13:18:34.817
> 
> 标签：html, pagination, jsoup, web-crawler

我已经使用 jsoup 构建了一个自定义爬虫。我能够从特定列表页面中删除所有数据。但是对于有分页的页面，我如何从分页元素中获取链接。就像亚马逊、ebay 等中存在的任何零售清单一样，我将产品清单第一页的 URL 传递给 jsoup。它工作正常。但是我如何自动化获取剩余页面链接的过程。

我知道我可以通过硬编码分页类来获取元素。但我正在寻找一种通用的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-10T16:03:12.200

```
 for (int i = 1; i < 10; i++) {
        String url = "http://exampleurl.com/index.php?page=" + i;
        Document doc = Jsoup.connect(url).get();
    } 
```

希望这会带来一些启示。该代码将通过分页循环浏览网站中的十页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T22:06:35.083

如果站点用 注释其分页链接[`rel="next"`](https://support.google.com/webmasters/answer/1663744?hl=en)，您可以按照这些链接检索更多页面。

除此之外，HTML 本身没有任何内容指定分页中页面之间的关系。您必须使用启发式方法（例如，带有包含“next”的文本的链接或带有递增数字（1、2、3 ... last）的链接序列）。显然，这些启发式方法不适用于每个站点，并且可能会在站点设计更新时停止工作。

# forms - Lazarus - 如何更改启动表单的顺序

> ID：14773469
> 
> 赞同：1
> 
> 时间：2013-02-08T13:18:43.910
> 
> 标签：forms, lazarus

**我的项目是从名为Form1**的某种形式开始的。现在我有很多表格。现在我需要创建一个新表单（即我的登录**表单-frmLogin**）作为启动表单。

我去了项目选项并在表单下，我使用箭头（在表单列表的一侧）并将登录表单移动到顶部。

现在登录表单开始正常。但在我输入用户名之前，我在下一个表单（即 Form1）上使用的消息框会显示出来。消息框位于 Form1 的 FormCreate 过程中。

我对此感到困惑。我错过了什么吗？如何防止 FormCreate 的代码运行。Form1 仅在用户单击登录并成功输入密码后由 frmLogin 调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T19:16:51.417

在您的项目设置中：检查哪些表单是自动创建的。通常，当您创建新表单时，它会自动创建。我认为您不希望在您的应用程序中使用它。

# windows - Windows Mobile 上损坏的文件

> ID：14773474
> 
> 赞同：1
> 
> 时间：2013-02-08T13:19:01.267
> 
> 标签：windows, windows-mobile, corrupt-data

我需要帮助。情况如下： 我们有一个在 Windows Mobile 5 和 6 上运行的软件。它部署在大约 15 个城市的不同设备上（摩托罗拉 MC35、MC55、MC65、MC75、MC75A、ES400）。除了在一个城市之外，它在任何地方都可以正常工作。他们有 MC75A 设备，每隔一段时间，我们就会收到一个关于我们的软件从设备中消失的帮助台。

最有趣的部分是当我们登录检查设备时，我们所看到的只是一个损坏/损坏的文件系统和操作系统，它被设置回默认值。我们试图在我们公司重建问题，但我们发现这是不可能的。我想知道是否有人碰到过这个。

我将附上损坏文件系统的两张图片。

我们使用自定义窗口设置和 AppCenter 来保护操作系统免受客户的影响。（他们不应该能够自行修改任何设置）。

![损坏的文件 No.1](../Images/af500982b0370fbeb7c89bf1bd6bc0ed.png)

![损坏的文件 No.2](../Images/b45905268d01e59c39df6eee80e5575f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:44:21.783

通常，当驱动程序中断保存对文件系统的更改时，就会发生这种损坏。

例如，当一个高优先级线程消耗所有 cpu 时间时，就会发生这种情况。当设备硬重置时也可能发生这种情况，例如在河流写入文件系统期间取出电池。

电池电量不足通常不会导致损坏：a) 当设备以严重的电池电量关闭时，b) 文件系统位于闪存 RAM 中（与 Windows Mobile 2003 及之前的版本相比）并且不需要电池电量来保持数据。

也有可能是有一个不良行为过程导致这些损坏。

正如您所说，您只在一个城市看到这一点：那里的设备的主要区别是什么？其他人是否也在使用相同的设备？也许设备系列本身或那里的固件有问题（联系符号/摩托罗拉获取新固件或“磁盘”驱动程序的补丁）该区域的用户是否对其他人没有的设备做了特殊的事情？例如，当它们意味着设备没有反应时取出电池？MC75A 是否用在其他领域并且没有显示损坏？

你看，你有更多的项目来检查腐败的规则？

# c# - C# 使用权限将文件从一台服务器复制到另一台服务器

> ID：14773476
> 
> 赞同：1
> 
> 时间：2013-02-08T13:19:07.257
> 
> 标签：c#, impersonation, fileinfo

我编写了一个 C# 控制台应用程序，它将每天按计划将备份从一台服务器复制到另一台服务器。如果我已经登录到共享文件夹并且我的凭据被chached，这将非常有效，但是如果我的凭据没有在源服务器的共享上输入，我的代码中会出现错误。我需要做的是让我的应用程序模拟登录到我的源共享文件夹，这样我就可以抓取文件并将其移动到目的地。

```
public static void CopyNewestBackup()
        {

        string sourcePath = @"\\source";
        string targetPath = @"\\destination";

        FileInfo newestFile = GetNewestFile();
        string sourceFile = Path.Combine(sourcePath, newestFile.Name);
        string destFile = Path.Combine(targetPath, newestFile.Name);
        Console.Write("Copying " + newestFile.Name + " from " + sourcePath + " to " + destFile);

        FileSystem.CopyFile(sourceFile, destFile, UIOption.AllDialogs);
        //File.Copy(sourceFile, destFile, true);
    } 
```

如何模拟登录到服务器以获取文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:21:18.403

这篇 MSDN 文章很好地介绍了模拟：http: [//msdn.microsoft.com/en-us/library/chf6fbt4.aspx](http://msdn.microsoft.com/en-us/library/chf6fbt4.aspx)

# r - 将利率放在 R 中的美国各州地图上

> ID：14773477
> 
> 赞同：1
> 
> 时间：2013-02-08T13:19:12.943
> 
> 标签：r, map

我如何使用 R 在地图本身上绘制美国各个州的利率泡沫。在 R 中，您有地图库，它可以绘制美国各州地图。像这样。

```
library(maps)
map("state", boundary = FALSE, col="gray", add= TRUE) 
```

现在，如果我想在州地图上添加一个直径为该州利率平均值的气泡。我是否首先找出各州的首都，找到它们的坐标，然后使用

```
points(latCapitol, lonCapitol, col="blue",pch=19, cex=Interest.Rate ) 
```

对于每个州。有没有更简单的方法。也许是一个已经拥有有关州议会大厦坐标所需信息的图书馆。或者我应该将这些点放在州中部而不是州议会大厦上。另外，您将如何解决东部各州的密度。东北有很多小州。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T20:49:58.387

这是解决方案

美国各州平均利率的样本假数据集

```
state.mean.interest <- data.frame("State" = c("AZ", "ID", "SC", "TX", "NJ"),
                                  "Mean.Interest.Rate" = c(10, 12, 14, 11, 9)) 
```

加载地图和状态数据集

```
library(maps)
data(state) 
```

通过合并状态数据集中的两个数据框来创建一个新的数据框

```
state.location <- data.frame ("State" = state.abb,
                              "Longitude" = state.center$x,
                              "Latitude" = state.center$y) 
```

合并两个数据框

```
state.mean.interest <- merge(state.mean.interest, state.location) 
```

将美国各州地图和利率绘制为气泡。但是，您可以根据需要缩放气泡

```
map("state")
points(state.mean.interest$Longitude,
       state.mean.interest$Latitude,
       pch = 19,
       col = "blue",
       cex = 2* state.mean.interest$Mean.Interest.Rate/max(state.mean.interest$Mean.Interest.Rate)) 
```

全部完成。您应该在某些州看到美国州地图和蓝色气泡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:04:58.557

也许一种选择是使用`googleVis`包，然后使用`gVisGeoChart`功能（参见小插图中的第 19 页）。没有尝试过，但我认为可以给出气泡应该位于的城市名称，至少在谷歌分析中，他们的地图有这种覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:08:31.327

我一直很喜欢等值线图。几年前，Revolution Analytics 博客有一个等值线地图挑战，他们发布了在 R 中制作这些地图的各种解决方案。[这是一个链接](http://blog.revolutionanalytics.com/2009/11/choropleth-challenge-result.html)

# php - 带有子域参数的 PHP 的 URL

> ID：14773488
> 
> 赞同：0
> 
> 时间：2013-02-08T13:19:31.157
> 
> 标签：php, .htaccess, redirect, url-rewriting, subdomain

我们一直被困在一个问题上，即使使用 StackOverflow 上的所有文章，我们似乎也无法解决；我们有一个像“www.example.nl/domain.php?user=somename”这样的网站，我们需要我们的用户通过输入“somename.example.nl”来访问该页面。我们已经尝试了很长时间，但我们找到的答案都没有为我们工作。

我们尝试过类似于以下的代码：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{HTTP_HOST} ^(www\.)?example.nl$ [NC]
RewriteRule ^([^/]*)/?$ domain.php?user=$1 [NC,QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_URI} ^/index.php
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{HTTP_HOST} !^(www|mail).example.nl$ [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9-]+).example.nl$ [NC] 
RewriteRule ^([^/]*)/?([^/]*)/?([^/]*)/?$ domain.php?user=%2 [NC,QSA,L] 
```

另外，在此之前我们尝试过这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?([a-z0-9-]+).example.nl$ [NC] 
RewriteRule ^([^/]*)/?([^/]*)/?([^/]*)/?$ domain.php?user=$1 [NC,QSA,L] 
```

如果这是一个转发，我很抱歉，但我已经坚持了几个小时，我真的需要一个明天到期的项目的答案。

感谢您花时间帮助我们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:32:09.277

您不仅需要设置代码和 Web 服务器来处理此问题，还需要设置 DNS 配置。您需要使用通配符匹配将所有子域重定向到相同的 IP 地址。

这是在 Web 浏览器中打开 URL 的工作原理：

1.  Web 浏览器必须首先进行 DNS 查找以转换主机名（在您的示例中，`somename.example.nl`转换为 IP 地址
2.  Web 浏览器向它找到的 IP 地址发送 HTTP 请求，请求 URL 包含输入的 FQDN ( `somename.example.nl`)
3.  Web 服务器使用虚拟主机或其他配置类型来确定如何处理给定 FQDN 的请求。

因此，该名称`somename.example.nl`必须可通过 DNS 解析，否则用户的计算机将不知道将 HTTP 请求发送到何处（到哪个 IP 地址）。

# symfony - Symfony2 + GitFlow + Capifony + Capistrano-ext

> ID：14773489
> 
> 赞同：3
> 
> 时间：2013-02-08T13:19:35.207
> 
> 标签：symfony, deployment, capistrano, git-flow, capifony

我目前正在使用 Symfony2 和 Gitflow 开发一个网站。我有 2 个外部服务器，分别称为“开发”、“暂存”和“生产”，以及 Github 上的中央 GIT 存储库。

我希望使用 Capifony 来：

*   将“开发”分支更改部署到开发服务器。
*   将任何版本/修补程序等部署到暂存以进行测试
*   将“主”分支部署到实时“生产”服务器

我一直在阅读[这个](http://www.zalas.eu/multistage-deployment-of-symfony-applications-with-capifony)关于多阶段部署的页面，到目前为止已经安装了带有 capistrano 扩展的 capifony。

在我的 /app/config/deploy.rb 文件中，我有以下内容：

```
set :stage_dir, 'app/config/deploy' # needed for Symfony2 only
require 'capistrano/ext/multistage'
set :stages, %w(production staging development)

set :application, "MyApp"

set :repository,  "git@github.com:MyCompany/#{application}.git"
set :scm,         :git

set  :keep_releases,  3 
```

然后，我得到了一个单独的 /app/config/development.rb 文件，其中包含以下内容：

```
server 'SERVER_IP - PORT NUMBER', :app, :web, :primary => true
set :deploy_to, "/var/www/MyApp/" #directory on server
set :symfony_env_prod, "test" 
```

但是，如果我运行 cap development deploy 我会得到一个错误

```
the task `development' does not exist 
```

有人能解释一下“任务”指的是什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T18:54:41.130

移动`require 'capistrano/ext/multistage'`到最后一行`deploy.rb`或至少移动它`set :stages, %w(production staging development)`之前的行。

# c++ - 递归算法调试（大数据量）

> ID：14773505
> 
> 赞同：0
> 
> 时间：2013-02-08T13:20:18.763
> 
> 标签：c++, visual-studio, debugging

我使用基于 DFS 的算法来计算大图中的强分量。该算法在小图上运行良好，但我在大图上遇到问题。因此，在 DFS 函数程序的大约 28 K 次递归调用之后，它就会挂起。VS2010 给我一条消息 VS is busy, no crashs no errors。为了弄清楚发生了什么，我打印了一些信息（由于速度低，无法在调试中运行）。我发现程序挂在位置 4 并且没有到达位置 1（观看代码）。

```
// Main DFS function
void DFS(vector<Edge>& graph, int source_node, bool *vertex_visited, pair<int, int>& direction){

    cout << "\r" << "Position 1" << std::flush;
    // mark vertex as visited
    vertex_visited[source_node - 1] = false;
    // array for all neighbour edges 
    vector<vector<Edge>::iterator> all_neighbours;

    // doesent matter 
    if (direction.second){
        size_of_scc++;
    }

    // binary search of edges incident with source vertex
    pair<vector<Edge>::iterator, bool> itera = find_if_binary_for_edges(graph.begin(), graph.end(), source_node);
    cout << "\r" << "Position 2" << std::flush;

    // push all incident edges to all_neighbours vector
    if (itera.second){
        pair<vector<Edge>::iterator, vector<Edge>::iterator> bounds = find_all_in_range(itera.first, graph);
        vector<Edge>::iterator it = bounds.first;
        while (it != bounds.second){
            all_neighbours.push_back(it++);
        }
    }

    cout << "\r" << "Position 3" << std::flush;

    // if this vertex wasn't visited in the past cal DFS from neighbour vertex
    for (vector<vector<Edge>::iterator>::iterator it = all_neighbours.begin(); it != all_neighbours.end(); ++it){
        if (vertex_visited[(**it)[1] - 1]){
            cout << "\r" << "Position 4" << std::flush;
            DFS(graph, (**it)[1], vertex_visited, direction);
        };
    }

    // need this stuff for SCC computation
    cout << "\r" << "Position 5" << std::flush;
    if (direction.first)
        finishing_times[finishing_times_counter++] = source_node;
} 
```

所以我不知道接下来要做什么，接下来我需要执行哪些调试步骤...？在位置 4 程序必须再次调用 DFS 然后打印“位置 1”但它不会发生。因为它可能是什么？图有大约 857K 个顶点和 5 * 10^6 条边。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:48:33.123

所以这是stackoverflow错误，我第一次没有得到它，但是从DFS列表中删除一些参数后，我遇到了stackoverflowerror。

# jquery - 更改img src并取消绑定悬停在菜单选择jquery上

> ID：14773511
> 
> 赞同：-1
> 
> 时间：2013-02-08T13:20:37.030
> 
> 标签：jquery, menu, hover, image, src

使用stackoverflow的第一个问题！耶！

我有一个正在开发的[网站](https://googledrive.com/host/0B7eDuLpoiC04ckRBVWlKSS1uMDg/index.html)。它使用图像作为菜单选项，在悬停时，我在 jquery 中更改了 img src

当您单击要转到的菜单时，我希望悬停时的图像留在那里。我这样做了： `$("#one").click(function(){ $(this).attr('src', 'images/hover1.jpg'); $(this).unbind('mouseleave mousehover');`

所以这是成功的，但是在另一个菜单点击时，我无法让悬停图像消失，然后它不再悬停（因为我取消了它） - 但在另一个菜单点击时绑定它不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:13:47.443

首先。我认为它建议在这里创建一个 CSS 解决方案。

我检查了你的 javascript 文件并在我的浏览器中做了一些修改。最后，我为您构建了一个可能的工作解决方案。

```
$(document).ready(function() {

   var hoverfuncIn = function(){ $(this).attr('src', $(this).attr('src').replace(/(\D)(\.jpg)$/g,'$12$2')); };
   var hoverfuncOut = function(){ $(this).attr('src', $(this).attr('src').replace(/2(\.jpg)$/g,'$1')); };
   var clickToggle = function(e){
    $('.selected').hover(hoverfuncIn,hoverfuncOut).removeClass('selected').mouseout();
        $(e.currentTarget).addClass('selected').unbind('mouseleave mousehover');
}

   $('nav img').hover(hoverfuncIn,hoverfuncOut);

   $("#one").click(function(e){
      clickToggle(e);

... 
```

# ios - 基础国际化和多个故事板无法正常工作

> ID：14773512
> 
> 赞同：15
> 
> 时间：2013-02-08T13:20:37.910
> 
> 标签：ios, ipad, internationalization, storyboard

我正在使用 xCode 4.6 上的多个故事板和基础本地化。事实上我

我做了：

1）编辑我的项目信息本地化：选中“使用基础国际化”并添加语言：英语，中文

2）创建一个名为“anotherstoryboard.storyboard”的新故事板

3) 使用 Base 国际化本地化我的新故事板（文件检查器/本地化 - 本地化）。

4）在我的应用程序委托中，我动态加载我的本地化故事板，如下所示：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"anotherstoryboard" bundle:nil]; 
```

**案例 1：** => 有效

对于我的新故事板（第 3 步），我选择本地化中文 - Interface Builder Cocoa Touch Storyboard

![在此处输入图像描述](../Images/7b0927a6703a7bfa7e86ecde1b72d238.png)

它可以工作，但现在我必须维护本地化的故事板，用 IB 编辑它们。我不想要这种行为，我只想使用基本国际化和本地化 .strings 文件。

**案例 2：** => 崩溃

对于我的新故事板（第 3 步），我选择 Localization Chinese - Localizable Strings

![在此处输入图像描述](../Images/d39454f478eac3ad445da16146bc001a.png)

应用程序崩溃说找不到我的故事板

```
'NSInvalidArgumentException', reason: 'Could not find a storyboard named 'anotherstoryboard' in bundle NSBundle </Users/me/Library/Application Support/iPhone Simulator/6.1/Applications/8E036C84-6058-4420-94B4-1726E1F686AD/HelloWorld.app> (loaded)' 
```

我做错了什么？为什么 iOS 在案例 2 中找不到正确的故事板？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-29T20:37:25.317

在开始在 Xcode 4.6.2 中本地化新的故事板后，我（再次）遇到了同样的问题。我检查了一切是否按照此处和其他地方的建议正确设置，确实如此。

对我来说，通过在 Xcode 中关闭项目并从 Finder 中手动清除 Xcode“Derived Data”目录（请参阅 Xcode 首选项）解决了这个问题。然后我重新打开了项目，做了一个干净的构建，瞧，故事板被正确编译并按预期工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-13T18:01:45.947

单击 中的项目`Project Navigator`，选择您的项目并`Info`在顶部选择。接下来，您必须取消选择`Use Base Internationalization`并单击“删除”。

![在此处输入图像描述](../Images/efd62b4c13ce79b62e9f34fc0ccdbc53.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T07:56:18.640

您会收到此错误，因为对于 iOS 6（Base Internationalization 需要），storyboard 文件被编译成 storyboardc 文件。它还将属于它的字符串文件复制到目标。因此在 iOS 6 设备上没有 .storyboard 文件。

要编译故事板文件，您需要确保它处于 Copy Bundle Resources 构建阶段。然后情节提要编译器（参见构建规则）启动并编译它。如果不是，那么这是一个错误，您应该报告它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T13:57:14.743

我尝试了与您完全相同的方法，我可以说这个错误会如您所显示的那样发生。

解决方案是从目标构建阶段删除和添加情节提要文件。因此，单击您的目标，如图所示![目标的构建阶段](../Images/2d3636b5518b8d27c065f3f54e898873.png)

然后从构建阶段删除情节提要文件并再次添加。

这对我有用！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-03T06:09:47.173

我通过将我的故事板拖到 finder 中解决了这个问题，然后删除了 Xcode 侧面板中的那个，然后将我最初拖到 finder 的那个重新添加到 Xcode 侧面板中。然后在“复制捆绑资源”中删除旧的 RED 故事板文件，并通过将其拖入手动添加新的故事板文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-14T04:57:30.870

我遇到了同样的问题，花了 2 天时间来解决它。

当然，我尝试了以上所有操作，例如：清理项目，重置 iOS 模拟器中的内容和设置，删除 /Users/YourUsername/Library/Application Support/iPhone Simulator 中的所有文件，删除 /Users/YourUsername/Library/Developer 中的所有文件/Xcode/DerivedData，删除iOS设备中的App

没有什么能帮助我解决我的问题 - 使用 Base Internationalization + Storyboard.strings 的 Storyboard 本地化不会编译本地化的 Storyboard。

原因是该项目以前针对 iOS 5.1，但现在针对 iOS 6.1。更改项目部署目标后，我忘记更改情节提要中的编译设置。

什么对我有帮助 - 只需在情节提要的文件检查器中将“构建”更改为至少“iOS6.1 及更高版本”。

![在此处输入图像描述](../Images/1ca93664bbf9dcb5707828f40a357df3.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-19T09:47:13.887

如果您的 Storyboard.strings 文件中存在语法错误，例如缺少 ; 或缺少“，似乎没有任何警告（Xcode 10.2.1），您只是没有在 Storyboard.strings 文件中获得任何本地化。

以下行中的文本颜色不会更改以指示存在问题。

最好的办法是逐行检查，确保没有遗漏任何内容。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-03T10:51:44.257

**解决了**

我对一些阿拉伯语翻译有疑问。我已经尝试了帖子中提到的所有可能的方法，但没有一个对我有用。

最后我发现我的 Xcode 没有在我的故事板的字符串文件中报告错误！我修复了字符串文件中的问题，我的应用程序按预期工作！

（提示：您也可以检查控制台是否有错误）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-20T17:12:06.730

在情节提要本地化设置中，尝试删除“基础”选项旁边的检查。iOS6下不支持

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-31T05:51:48.613

由于这是一个警告而不是错误，所以我一开始并不认为这会是一个问题，但最终它是我唯一的负载。在右侧边栏中，最左侧的选项（看起来像文档的图标）中，我看到了一个带有两个复选框的本地化部分，即 Base 和 English。基础已检查，英语未检查。

![在此处输入图像描述](../Images/b572135b562c932da8c9fd71ecd3958f.png)

相反，我检查了英语，然后将下拉菜单更改为 Interface Builder。然后我取消选中Base。

![在此处输入图像描述](../Images/7bae908a7642a857f4a3e5327dad46be.png)

当我再次检查构建规则时，Main.storyboard 不再是红色的。当我再次尝试在 5.1 模拟器中运行该应用程序时，它运行良好。注意：仅检查 English/Interface Builder 就足以让应用程序在 iOS 5.1 中运行，但随后您会遇到无法反映 Storyboard 更新的问题。您需要取消选中 Base 以便英语是情节提要的唯一版本；这样，更新将始终在您重新运行时立即反映出来。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-23T07:58:39.707

基本国际化仅在**iOS 6**上受支持。

我遇到了和你一样的问题，但更糟糕的是，因为我没有在 iOS 5 上进行测试。我知道我的许多用户都经历过崩溃后才知道这一点。

所以，请注意。

我的[博客上](http://samwize.com/2012/11/22/warning-do-not-use-base-internationalization-in-ios-5/)有关于此的详细信息。如您所知，xib 仍然有效。因此，将所有字符串转换为 xib（一点也不难）。

# xml - 如何使用 Apache2::REST 在 XML 节点中创建具有属性的响应？

> ID：14773513
> 
> 赞同：4
> 
> 时间：2013-02-08T13:20:37.957
> 
> 标签：xml, perl, rest

我正在使用 Perl [`Apache2::REST`](https://metacpan.org/module/Apache2%3a%3aREST)，返回数据的标准方法是发出`$resp->data()`和分配一个值。我有这样的东西

```
my $text = {
    'tag1' => 4,
    'tag2' => 5,
    'tag3' => 6,
};

$resp->data()->{'text'} = {map { $_ => [$text ->{$_}] } keys %$text}; 
```

这给了我这样的回应

```
<response message="" status="200">
  <data>
    <tag1>4</tag1>
    <tag2>5</tag2>
    <tag3>6</tag3>
  </data>
</response> 
```

我想知道如何在 XML 节点中创建具有属性的响应，`tag1`并且可以在同一级别上创建相同类型的标签？

所需的输出是

```
<response message="" status="200">
  <data>
    <tag1 id="abcd"> 4 </tag1>
    <tag1>
      <tag3 id="xyz"> 6 </tag3>
    </tag1>
  </data>
</response> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:57:41.120

我认为这会起作用，但它会产生一些不同的输出

```
my $text2->{tag1} = [4,{tag3 => 6}];
$resp->data()->{'text'} = $text2; 
```

问候，

编辑：

```
my $text2->{tag1} = [4,['val',{tag3 => 6}]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T10:38:23.993

该模块使用 XML::Simple 没有选项，但`RootName`. 知道了这一点，我们知道以下数据结构将产生您想要的输出。

```
my $data = {
   'tag1' => [
      {
         id => 'abcd',
         content => '4',
      },
      {
         'tag3' => [
            {
               id => 'xyz',
               content => '6',
            },
         ],
      },
   ],
}; 
```

测试：

```
use XML::Simple qw( XMLout );
print XMLout($data , RootName => 'data'); 
```

输出：

```
<data>
  <tag1 id="abcd">4</tag1>
  <tag1>
    <tag3 id="xyz">6</tag3>
  </tag1>
</data> 
```

（它将提供`response`元素。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T11:36:10.660

`XML::Simple`解决方案是使用 perl 模块`ForceArray => 1`

```
$xml = '<tag1 a="' . '4' . '"b="4">';
$xml .= '<tag3 id="' . '3' . '">'; 
$xml .= '<tag2>' . '5' . '</tag2>';
$xml .= '</tag3>';
$xml .= '</tag1>';

my $tree = $simple->XMLin($xml, ForceArray => 1, KeyAttr => [ ]);
$resp->data()->{'xml'} = $tree; 
```

# c++ - 尝试在 Qt 中继承 QLCDNumber 的问题

> ID：14773515
> 
> 赞同：0
> 
> 时间：2013-02-08T13:20:51.033
> 
> 标签：c++, qt, inheritance, qwidget, lnk2019

这是我从 QLCDNumber 继承的自定义 LCD 类。

> **myLCD.h：**

```
#ifndef MYLCD_H
#define MYLCD_H

#include <QLCDNumber>

class MyLCD : public QLCDNumber
{
    Q_OBJECT

public:
    MyLCD(QWidget* parent=0);

};

#endif // MYLCD_H 
```

* * *

> **myLCD.cpp：**

```
#include "MyLCD.h"

MyLCD::MyLCD(QWidget* parent)
    :QLCDNumber(parent)
{} 
```

没有比这更基本的了。。

在我的*main.cpp*文件中，我包含**“myLCD.h”**并且一切正常。

但是当我尝试实例化一个 myLC​​D 对象时：

```
MyLCD* lcd = new MyLCD; 
```

我遇到以下问题：

*   *main.obj:-1: error: LNK2019: unresolved external symbol "public: __thiscall MyLCD::MyLCD(class QWidget *)" (??0MyLCD@@QAE@PAVQWidget@@@Z) 在函数 _main* 中引用

*   *debug\partie2.exe:-1: error: LNK1120: 1 unresolved externals*

知道那可能是什么吗？

* * *

**编辑**：我正在使用 QtCreator

**编辑 2)** : 这是编译结果的输出

```
14:33:28: Running steps for project partie2...
14:33:28: Configuration unchanged, skipping qmake step.
14:33:28: Starting: "C:\Qt\Qt5.0.0\Tools\QtCreator\bin\jom.exe" 
    C:\Qt\Qt5.0.0\Tools\QtCreator\bin\jom.exe -f Makefile.Debug
    echo 1 /* CREATEPROCESS_MANIFEST_RESOURCE_ID */ 24 /* RT_MANIFEST */ "debug\\partie2.exe.embed.manifest">debug\partie2.exe_manifest.rc
    if not exist debug\partie2.exe del debug\partie2.exe.embed.manifest>NUL 2>&1
    if exist debug\partie2.exe.embed.manifest copy /Y debug\partie2.exe.embed.manifest debug\partie2.exe_manifest.bak
    link /NOLOGO /DYNAMICBASE /NXCOMPAT /DEBUG /SUBSYSTEM:WINDOWS "/MANIFESTDEPENDENCY:type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' publicKeyToken='6595b64144ccf1df' language='*' processorArchitecture='*'" /MANIFEST /MANIFESTFILE:debug\partie2.exe.embed.manifest /OUT:debug\partie2.exe @C:\Users\val\AppData\Local\Temp\partie2.exe.10692.62.jom
main.obj : error LNK2019: unresolved external symbol "public: __thiscall MyLCD::MyLCD(class QWidget *)" (??0MyLCD@@QAE@PAVQWidget@@@Z) referenced in function _main
debug\partie2.exe : fatal error LNK1120: 1 unresolved externals
jom: H:\Fac\L3\S6\IHM\practical\Qt\TP2\sources\partie2\partie2-build-Desktop_Qt_5_0_0_MSVC2010_32bit_SDK-Debug\Makefile.Debug [debug\partie2.exe] Error 1120
jom: H:\Fac\L3\S6\IHM\practical\Qt\TP2\sources\partie2\partie2-build-Desktop_Qt_5_0_0_MSVC2010_32bit_SDK-Debug\Makefile [debug] Error 2
14:33:29: The process "C:\Qt\Qt5.0.0\Tools\QtCreator\bin\jom.exe" exited with code 2.
Error while building/deploying project partie2 (kit: Desktop Qt 5.0.0 MSVC2010 32bit (SDK))
When executing step 'Make' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:47:53.680

我回答我自己的问题，因为这个错误在逻辑上不是那么可回答的..

我终于删除了我的*调试*文件夹。

当我再次构建时，重新创建了*Debug*文件夹并且没有显示任何问题。

我真的不知道是什么原因，因为我们什么时候应该在可靠的 IDE 中处理文件系统？

# knockout.js - 填充大型可观察数组时，我可以加速淘汰赛吗？

> ID：14773516
> 
> 赞同：6
> 
> 时间：2013-02-08T13:20:51.217
> 
> 标签：knockout.js

我有一个 Web 应用程序，它对一些数据执行 SOAP 请求并用结果填充淘汰视图模型。我目前收到了大约 1000 个订单项，这些订单项必须推送到我的淘汰视图模型中。在 chrome 中对页面进行分析表明，大部分加载时间/CPU 都花在了 knockout.js 中。如果有办法延迟任何淘汰更新/处理，直到所有项目都被推入可观察数组，我就会徘徊。

**编辑：**更清楚地说，我想我正在寻找类似 delaying 或[throttling](http://knockoutjs.com/documentation/throttle-extender.html)的东西。但看起来，从[这个答案](https://stackoverflow.com/a/9382789/381422)来看，我最好构建一个普通数组，然后填充整个可观察数组，而不是将每个项目直接推到可观察数组上。这可能会消除我延迟或限制绑定的需要。有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T16:46:10.470

如果只需要**替换**a 的内容，`observableArray`则不需要遍历数组。

最有效的操作是简单地将其设置为一个新值：

```
this.obsArray(newData); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-22T05:00:50.970

这可能是最好的方法：

```
function MyVM(){
    this.fooObsArray = ko.observableArray([]);
}

function Foo(){

var self = this;
self.vm = new MyVM();

this.pushSlow = function(arrayToBePushed){
    for (int i = 0; i < arrayToBePushed.length; i++){
        var element = arrayToBePushed[i];
        self.vm.fooObsArray.push(element);          //notifies ui foreach of elements => + delay
    }
}

this.pushFast = function(arrayToBePushed){
    var underlyingArray = self.vm.fooObsArray();

    for (int i = 0; i < arrayToBePushed.length; i++){
        var element = arrayToBePushed[i];
        underlyingArray.push(element);
    }

    self.vm.fooObsArray.valueHasMutated();          //notifies ui once all elements have been added => - delay
}
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-08T19:29:36.530

我将大约 850 个项目拉入我的视图模型，并在选择中显示它们。推入一个循环大约需要 15 秒，并且具有线性退化。

我在这里使用了 valueHasMutated 解决方案： [http ://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)

低至约 200 毫秒（总体 - 包括往返服务器、数据库读取等）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-08T20:29:49.403

当然，您可以按照其他答案中的建议对代码进行更改。另一种选择是使用我的延迟更新插件：[https ://github.com/mbest/knockout-deferred-updates](https://github.com/mbest/knockout-deferred-updates)

该插件将自动延迟对 UI（或任何计算的 observables）的任何更新，直到在当前“线程”中完成所有更改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T16:37:23.103

也许另一种解决方案是将数组中的元素按 20 或 50 个项的块插入可观察数组？

由于您将向 observablearray 添加项目，因此在您添加项目时，knockout 将显示它们，但它可能会帮助您减少所需的 CPU 数量，因为您将能够在每个块之间添加延迟。

可能值得一试。

# java - 在java web服务中执行多个线程

> ID：14773517
> 
> 赞同：2
> 
> 时间：2013-02-08T13:20:51.857
> 
> 标签：java, multithreading, glassfish, jax-ws, executorservice

我有一个 Web 服务，它在其中一个 Web 方法中创建两个线程并调用另外两个 Web 服务来插入数据。现在，我的原始 Web 服务预计会同时接收 1,000 到 10,000 个范围内的调用。因此，您可能会理解，对于内部的每个此类调用，我的 Web 服务将再创建两个线程。我已经针对如此重的负载调整了我的应用程序服务器。相信我。

我在原始 Web 服务中使用未来对象使用具有固定线程池大小的 Executor，但我发现对其他两个 Web 服务的调用似乎是按顺序处理的。我检查了所有教程/代码片段。我的代码似乎是正确的。

```
ExecutorService executor = Executors.newFixedThreadPool(size);
Future<Boolean> futureOne = executor.submit(new MyThread(serviceOne, data));
Future<Boolean> futureTwo = executor.submit(new  MyThread(serviceTwo, data));
bSuccessfulOne = futureOne.get();
bSuccessfulTwo = futureTwo.get(); 
```

鉴于我写的第一段是有任何多线程/作业并行框架/只是一些常识编程可能有助于并行处理这些 Web 服务调用。如果有，请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-27T03:35:38.663

您的顺序执行是由于以下几行： bSuccessfulOne = futureOne.get(); bSuccessfulTwo = futureTwo.get();

请列出未来添加您的结果并停止线程执行。您可以使用 awaitTermination 或其他一些东西。然后从列表中获取未来对象并进行获取操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:54:03.767

正如我在前面的评论中所指出的，它被“序列化”可能有两个主要原因：

1.  负载很大，可能是并行到达的请求太多，所以你`MyThread`的s没有同时放入等待队列。如果执行线程的数量足够少，您可能会*看到*作业一个接一个地执行。
2.  某处可能有`synchronized`资源是您的`data`. 两个线程都可以访问它们。

但我真的不明白为什么你必须在一个单独的线程中运行*这两个作业。*你可以这样做：

```
ExecutorService executor = Executors.newFixedThreadPool(size);
Future<Boolean> futureOne = executor.submit(new MyThread(serviceOne, data));
Runnable jobTwo = new  MyThread(serviceTwo, data);
jobTwo.run();
bSuccessfulOne = futureOne.get(); 
```

这样你需要一半的`Thread`s `ThreadPool`，这肯定会给你更好的性能。

如果你坚持原来的版本，我建议你*测量*（我的意思是证明你的假设，例如通过日志）。

# android - 如何使用 ruby on rails 在服务器端向 GCM 发出推送通知请求？

> ID：14773519
> 
> 赞同：0
> 
> 时间：2013-02-08T13:20:54.043
> 
> 标签：android, ruby-on-rails, google-cloud-messaging

我正在构建一个 android 应用程序，并试图弄清楚使用 GCM 进行即时消息传递的过程。客户端 android 代码可以从互联网上的各种来源中理解，但我在 Ruby-on-Rails 中找不到对服务器端代码的任何引用。我的服务器是 ruby​​-on_rails。我有一个 php 版本的服务器代码，但我无法在 ruby​​ 中实现它。这是php版本——

[使用 PHP、Mysql 的 GCM for android](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

我只需要这个服务器端代码的 ruby​​ 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T15:12:14.670

为 GCM 使用现有的 Ruby gem，例如[this](https://github.com/spacialdb/gcm)或[this](https://github.com/dondeng/gcm_on_rails)。

# file - 为什么 Aptana 不在 Navigator 中的 python 文件旁边显示类信息？

> ID：14773520
> 
> 赞同：0
> 
> 时间：2013-02-08T13:20:58.457
> 
> 标签：file, class, view, aptana

我正在使用 Aptana Studio 3 和 Python 2.7.3。我有一个项目，我知道我可以让 Aptana 向我显示有关每个 *.py 文件中的类的信息，但我不知道该怎么做。（即每个文件名旁边应该有“加号”，当我点击它时应该展开并显示文件中所有类/方法/等的信息）

谁能告诉我步骤？

PP：我试过用谷歌搜索信息，但没有任何结果：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:23:34.447

谢谢@Sarah Kemp

要查看文件中的信息，请转到 Window > Show View > Other > PyDev > PyDev Package Explorer

# java - 从绘制了一些内容的框架中获取鼠标点击的坐标

> ID：14773522
> 
> 赞同：0
> 
> 时间：2013-02-08T13:21:04.977
> 
> 标签：java, map, mouselistener

我的基本问题是我有一个显示地图的内部框架。我想获得该地图上点击的坐标，以便我可以在该地图上绘制一个航点。但基本上我得到的什么都没有。getX 和 getY 仅在我单击该地图之外的某个位置（内部框架内）时返回坐标。手动添加航点工作正常。这是我的代码：

```
package gui;

import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JLayer;
import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import java.awt.BorderLayout;
import javax.swing.JButton;
import java.awt.CardLayout;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.LayoutStyle.ComponentPlacement;

import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.GridBagLayout;
import java.awt.GridBagConstraints;
import java.awt.Insets;
import java.awt.FlowLayout;
import javax.swing.border.EtchedBorder;
import javax.swing.plaf.LayerUI;
import javax.swing.JToolBar;
import javax.swing.SwingConstants;
import org.eclipse.wb.swing.FocusTraversalOnArray;
import org.jdesktop.swingx.mapviewer.GeoPosition;

import soft.MapDrawer;
import soft.MapView;

import java.awt.Component;
import javax.swing.JToggleButton;
import javax.swing.JRadioButton;
import javax.swing.JInternalFrame;
import java.awt.Canvas;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.geom.Point2D;
import java.awt.Dimension;
import javax.swing.JLayeredPane;
import javax.swing.JLabel;
import java.awt.Color;
import javax.swing.ImageIcon;
import javax.swing.Box;

public class MainWindow {

    private JFrame frame;
    private JMenu MenuBasicActions;
    private JInternalFrame mapFrameRef;
    private MapDrawer mapD;
    private MapView hlavnaMapa; 

    /**
     * Launch the application.
     */
    public static void main(String[] args)
    {

        EventQueue.invokeLater(new Runnable()

        {
            public void run() 
            {
                try 
                {
                    MainWindow window = new MainWindow();
                    window.frame.setVisible(true);
                } catch (Exception e)
                {
                    e.printStackTrace();
                }
            }
        });

    }

    /**
     * Create the application.
     */
    public MainWindow()
    {
        initialize();   

    }

    public JFrame getMainFrame()
    {
        return frame;
    }

    public JInternalFrame getMapFrame()
    {
        return mapFrameRef; 
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {
        frame = new JFrame();
        frame.setVisible(true);
        frame.setBounds(100, 100, 1024, 768);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JMenuBar menuBarUpper = new JMenuBar();
        frame.setJMenuBar(menuBarUpper);

        MenuBasicActions = new JMenu("GPS Settings");
        menuBarUpper.add(MenuBasicActions);

        JMenuItem mntmNewMenuItem = new JMenuItem("New menu item");
        MenuBasicActions.add(mntmNewMenuItem);

        JMenuItem mntmNewMenuItem_1 = new JMenuItem("New menu item");
        MenuBasicActions.add(mntmNewMenuItem_1);

        JMenuItem mntmNewMenuItem_2 = new JMenuItem("New menu item");
        MenuBasicActions.add(mntmNewMenuItem_2);

        JMenu DevicesMenu = new JMenu("Devices");
        menuBarUpper.add(DevicesMenu);

        JMenuItem mntmNewMenuItem_3 = new JMenuItem("New menu item");
        DevicesMenu.add(mntmNewMenuItem_3);

        JMenuItem mntmNewMenuItem_4 = new JMenuItem("New menu item");
        DevicesMenu.add(mntmNewMenuItem_4);

        JMenu HelpMenu = new JMenu("Help");
        menuBarUpper.add(HelpMenu);

        JToolBar toolBar = new JToolBar();
        toolBar.setOrientation(SwingConstants.VERTICAL);
        frame.getContentPane().add(toolBar, BorderLayout.WEST);

        JButton btnNewButton_1 = new JButton("New button");
        btnNewButton_1.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent arg0)
            {

            }
        });
        toolBar.add(btnNewButton_1);

        JButton btnNewButton = new JButton("New button");
        toolBar.add(btnNewButton);

        JButton btnNewButton_2 = new JButton("New button");
        toolBar.add(btnNewButton_2);

        JButton btnNewButton_3 = new JButton("New button");
        toolBar.add(btnNewButton_3);
        toolBar.setFocusTraversalPolicy(new FocusTraversalOnArray(new Component[]{btnNewButton_1, btnNewButton}));

        JInternalFrame mapInternalFrame = new JInternalFrame("New JInternalFrame");
        mapFrameRef=mapInternalFrame;
        mapInternalFrame.getGlassPane();
        frame.getContentPane().add(mapInternalFrame, BorderLayout.CENTER);
        mapInternalFrame.setVisible(true);
        //mapFrame.getContentPane().add(drawPanel, BorderLayout.CENTER);

        frame.setFocusTraversalPolicy(new FocusTraversalOnArray(new Component[]{frame.getContentPane(), toolBar, btnNewButton_1, btnNewButton, btnNewButton_2, btnNewButton_3, menuBarUpper, MenuBasicActions, mntmNewMenuItem, mntmNewMenuItem_1, mntmNewMenuItem_2, DevicesMenu, mntmNewMenuItem_3, mntmNewMenuItem_4, HelpMenu}));
        /*Vlastny kod                               */      

        hlavnaMapa=new MapView();
        hlavnaMapa.Init(mapInternalFrame);

        DrawerEventHandler handler=new DrawerEventHandler();
        mapInternalFrame.addMouseListener(handler);
        mapInternalFrame.addMouseMotionListener(handler);
    }

      public class DrawerEventHandler implements MouseListener, MouseMotionListener
        {

            @Override
            public void mouseDragged(MouseEvent event)
            {

            }

            @Override
            public void mouseMoved(MouseEvent event) {
                // TODO Auto-generated method stub

            }

            @Override
            public void mouseClicked(MouseEvent event) 
            {
                mapD=new MapDrawer(hlavnaMapa.getMap());
                Point2D point=new Point2D.Double(event.getX(),event.getY());
                mapD.addWaypoint(mapD.pointToGeo(point));
                System.err.println(event.getX()+"  "+event.getY());

            }

            @Override
            public void mouseEntered(MouseEvent event) {
                // TODO Auto-generated method stub

            }

            @Override
            public void mouseExited(MouseEvent event) {
                // TODO Auto-generated method stub

            }

            @Override
            public void mousePressed(MouseEvent event) {
                // TODO Auto-generated method stub

            }

            @Override
            public void mouseReleased(MouseEvent event) {
                // TODO Auto-generated method stub

            }

        } 

} 
```

MapDrawer 类：

```
package soft;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.geom.Line2D;
import java.awt.geom.Point2D;
import java.awt.image.BufferedImage;
import java.awt.image.Raster;
import java.io.File;
import java.io.IOException;
import java.util.HashSet;
import java.util.Set;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JPanel;

import org.jdesktop.swingx.JXMapKit;
import org.jdesktop.swingx.JXMapViewer;
import org.jdesktop.swingx.mapviewer.GeoPosition;
import org.jdesktop.swingx.mapviewer.TileFactoryInfo;
import org.jdesktop.swingx.mapviewer.Waypoint;
import org.jdesktop.swingx.mapviewer.WaypointPainter;
import org.jdesktop.swingx.mapviewer.util.GeoUtil;

public class MapDrawer 
{

    private JXMapViewer view;
    private JXMapKit mapRef;
    private Set waypoints;
    //private BufferedImage img;
     //img = ImageIO.read(new File("D://workspace//GPS Admin Software//resources//iconPerson.jpg"));

    public MapDrawer(JXMapKit mapa)
    {
        mapRef=mapa;
        waypoints = new HashSet();
    }

    public Point2D geoToPoint(GeoPosition pos)
    {
        return view.convertGeoPositionToPoint(pos);
    }

    public GeoPosition pointToGeo(Point2D point)
    {
        return view.convertPointToGeoPosition(point);
    }

        public void addWaypoint(GeoPosition geo) {
            //create a Set of waypoints

            waypoints.add(new Waypoint(geo.getLatitude(),geo.getLongitude()));

            //create a WaypointPainter to draw the points
            WaypointPainter painter = new WaypointPainter();
            painter.setWaypoints(waypoints);
            mapRef.getMainMap().setOverlayPainter(painter);
        }

} 
```

地图查看器类

```
package soft;
import java.awt.Container;

import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JPanel;
import javax.swing.JLayeredPane;

import org.jdesktop.swingx.JXMapKit;

public class MapView 
{
    private JXMapKit map;

    public MapView()
    {

        map=new JXMapKit();
        map.setDefaultProvider(org.jdesktop.swingx.JXMapKit.DefaultProviders.OpenStreetMaps);
        map.setDataProviderCreditShown(true);
    }

    public void Init(JInternalFrame container)
    {
        container.add(map);

    }

    public JXMapKit getMap()
    {
        return map;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:30:49.490

听起来像是`JXMapKit`在鼠标事件到达内部框架之前消耗了它们。

把鼠标事件想象成雨滴，把鼠标听成雨伞。如果在你的上方打开了一把伞，那么雨滴就不会落到你身上。

您需要将它们添加到`JXMapKit`实例中，而不是将鼠标侦听器添加到内部框架

# php - Symfony Form Class：重命名字段名称属性的值

> ID：14773524
> 
> 赞同：1
> 
> 时间：2013-02-08T13:21:06.520
> 
> 标签：php, symfony, symfony-2.1

有没有办法在 FormBuilder 中设置单个表单字段名称？

我的意思是通常你得到的是`form_name[field_name]`，或者如果 form_name 是你得到的空字符串`field_name`。

现在我想问是否可以重命名单个字段名称并且表单仍然有效。像这样的东西：

第一个字段`name="form_name[field_name]"`
第二个字段`name="renamed_fildname"`
第三个字段`name="form_name[field_name]"`
等...

那么这可能吗？

**更多解释：**这就是我想要实现的目标：[带有表单类的默认 Symfony 用户实体](https://stackoverflow.com/questions/14771508/default-symfony-user-entity-with-form-class)
我发现默认登录需要名为的输入字段：`_username`and `_password`，但表单不会构建它。但要使其有效的表格需要该`_token`字段。

现在，如果我尝试在表单中添加名称：

```
public function getName(){ return '_'; } 
```

它会将所有名称都输入这种形式：`_[field_names]`这对令牌有利，但对我的用户名和密码字段不利。它需要`_username`，`_password`但它实际上是`_[username]`，`_[password]`这对我不利，对安全捆绑包也没有好处，它只会给我抛出错误的凭据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:01:21.490

你让事情变得复杂。您的表单类对登录表单毫无用处。当您使用实体时，表单类是一个很好的实用程序，但您只需要提交两个字段并将它们传递给登录检查。因此，您无需更新或创建实体。但这是你真正需要一个表单类的地方。

阅读文档：[http ://symfony.com/doc/current/book/forms.html#creating-form-classes](http://symfony.com/doc/current/book/forms.html#creating-form-classes)

* * *

你说你想学这个，但你学错了。正如他们在这里为您提供的建议[http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form](http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form)您应该使用简单的树枝模板作为无表单类的登录表单。

* * *

表单字段中的逻辑实际上是，表单是对象，括号中的名称是属性，所以：

```
product[description] 
```

是一个表单字段，显示表单正在处理“产品”实体，而“描述”的特定字段希望您输入描述文本。

* * *

**使用 FOSUserBundle：** [https](https://github.com/FriendsOfSymfony/FOSUserBundle) ://github.com/FriendsOfSymfony/FOSUserBundle不要重新发明轮子；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-09T08:26:25.403

正如@mvrhov 提到的，您应该使用防火墙的默认参数来匹配您的自定义表单类型，这里有一篇很好的[文章](http://php-and-symfony.matthiasnoback.nl/2013/02/symfony2-security-enhancements-part-i/)来证明这一点。

你可以通过改变你的防火墙来匹配这个：

```
security:
firewalls:
    my_firewall:
        pattern:    ^/
        form_login:
            username_parameter: "form_name[username_field_name]"
            password_parameter: "form_name[password_field_name]"
            csrf_parameter: "form_name[_token]"
            csrf_provider: form.csrf_provider
            intention: authentication 
```

另外更改`setDefaultOptions`您的自定义表单以匹配此（`intention`与上述相同）：

```
$resolver->setDefaults(array(
        'intention' => 'authentication'
    )); 
```

最后是您的表格名称：

```
public function getName()
{
    return 'form_name';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:14:23.903

另一件事是您可以使用表单名称轻松配置登录参数，例如

```
username_parameter: "account_login[username]"
password_parameter: "account_login[password]"
csrf_parameter: "account_login[_token]" 
```

# ios - 添加状态栏后导航栏未重新定位

> ID：14773531
> 
> 赞同：2
> 
> 时间：2013-02-08T13:21:49.957
> 
> 标签：ios, ios6, uinavigationbar, statusbar

我有一个导航栏定位问题，似乎在 iOS6 中出现。
它在许多方面的行为类似于一些用户在旋转某些视图时遇到的问题

该应用程序有一个启动画面，全屏显示（通过设置`Hide statusbar during application launch`为`True`）

然后在`viewDidLoad`我的主视图控制器中，以下行将状态栏添加回应用程序：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone]; 
```

这会将 StatusBar 添加到应用程序中，并按预期将视图向下移动 20pt。但是，NavigationBar 保持在 StatusBar 下方，下方有 20pt 的故障。

![添加statusBar造成的故障](../Images/d02467361cbf0693dc05ca6122be3f9c.png)

在 iOS6 之前，我曾经通过添加以下代码行来解决此问题：

```
[UIApplication sharedApplication].keyWindow.frame=CGRectMake(0, 20, 320, [[UIScreen mainScreen] bounds].size.height-20); 
```

但是，现在这不起作用。

一些研究表明，在调用 时`viewDidLoad`，`keyWindow.frame`大小和原点都是 {0,0}，更改它没有效果。

将上面提到的两行插入到`viewDidAppear`应用程序启动时，我得到了相同的行为。然而，当我移动到另一个视图并返回到第一个视图时，更改`keyWindow.frame`具有所需的效果，并且 NavigationBar 最终定位在它应该在的位置。

然后我的问题是：当 StatusBar 最初隐藏时，如何在将 StatusBar 添加到 iOS 应用程序后使 NavigationBar 获得正确的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:41:26.553

改为在 viewWillAppear 上调用 setStatusBarHidden:NO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:01:32.193

好像我又在工作中睡着了：

其他方法 ( `view[Will|Did]Appear`) 中的处理效果不适用，因为调用 from 已经显示了状态栏`viewDidLoad`。我确实从那里删除了代码，然后从`viewDidAppear`. 前面调用的任何方法都不会改变子框架。（既不改变`viewDidLoad`也不`viewWillAppear`改变框架`[UIApplication sharedApplication].keyWindow.frame`）

所以这必须在`viewDidAppear`. 只需确保状态栏尚未在之前调用的某些方法中显示...

```
-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:NO];
    [UIApplication sharedApplication].keyWindow.frame=CGRectMake(0, 20, 320, [[UIScreen mainScreen] bounds].size.height-20);
} 
```

# php - 使用具有无限滚动、回调函数的砌体插件？

> ID：14773541
> 
> 赞同：0
> 
> 时间：2013-02-08T13:22:24.097
> 
> 标签：php, javascript, jquery, html, css

我在一个使用无限滚动和砖石的 tumblr 网站上工作。

滚动插件是从第三方外部调用的，我在页面加载时触发了砌体插件......

```
 $(window).load(function(){

    $('.autopagerize_page_element').masonry();  

  }); 
```

问题是当卷轴拉入更多数据时，砌体不再起作用，以前有人遇到过这个问题吗？

# google-maps - Grails 谷歌地图重新加载标记

> ID：14773545
> 
> 赞同：0
> 
> 时间：2013-02-08T13:22:31.340
> 
> 标签：google-maps, grails

我在页面中有一个谷歌地图。页面加载时，我绘制一些标记等。当用户更改下拉列表时，我通过 jquery 提交 xhr。我的域类中有很多链接，所以我希望使用渲染模板并传入模型。但我不知道做什么。或者我可以渲染 javascript/ 可以帮忙吗？这就是我发帖的方式。

```
function projectChanged(projectid)
{
      var link = '${createLink(controller:'knowledge', action:'changeSelection')}';
      var type = $("#type1").value;
      var posting = $.post( link , { project: projectid, type:type } );
      posting.done(function( data ) {
       });

}//END project changed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:51:15.077

在您的控制器中，您可以执行以下操作：`render(template:"myTemplate", model: [myData: myData])`

# ios - 如何使用应用的旋转变换和缩放保存 UIImageView 的 UIImage

> ID：14773553
> 
> 赞同：1
> 
> 时间：2013-02-08T13:22:43.610
> 
> 标签：ios, uiimageview, uiimage

我正在尝试保存一个图像，该图像将作为调整大小、使用捏合和旋转手势旋转的操作的输出图像。如果我导出图像，我无法保存具有缩放大小和方向的输出图像。我在应用了手势识别器并将其作为子视图添加到另一个视图的视图中有一个图像视图。我使用下面的代码来获取缩放和旋转的图像，但这不起作用。

```
- (UIImage*)captureView
{    
    CGRect rect = [self bounds];
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.layer renderInContext:context];
    CGContextSaveGState(context);
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    image = [image rotateAndScaleFromCameraWithMaxSize:angle];
    UIGraphicsEndImageContext();

    return image;
} 
```

并在呈现的视图中使用上述方法来获取图像

```
UIImage *watermark = [draggableImageView captureView];
[UIImagePNGRepresentation(watermark) writeToFile:filePath atomically:YES]; 
```

但保存的文件与调整大小和旋转之前选择的原始文件相同。请帮助我。

# php - PHP MySQL 替代 1 值

> ID：14773554
> 
> 赞同：1
> 
> 时间：2013-02-08T13:22:46.840
> 
> 标签：php, date, persistence, text-files

我需要保存 1 个日期值，但我不想为它创建一个完整的数据库。我需要倒计时的日期，并且需要通过网站上的表格更改日期。

有什么选择吗？我正在考虑一个带有日期的 .txt 文件，但我找不到使用 php 写入 txt 的正确指南

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:30:24.113

正如“HamZa DzCyber​​DeV”所评论的：

```
 // to save it
    $date = "2013-02-08 14:28";
    file_put_contents("countdownFileName.txt", $date);
    // to open it
    $countdown = file_get_contents("countdownFileName.txt"); 
```

（您确实需要从 php 写入该文件的权限）

# javascript - 如何防止孩子在整个跨度内发生点击事件？

> ID：14773556
> 
> 赞同：2
> 
> 时间：2013-02-08T13:23:04.823
> 
> 标签：javascript, jquery, twitter-bootstrap

如何防止触发日历，不仅通过单击图标而且通过单击整个标签？在这种情况下，如果我尝试在没有子选择器的情况下直接执行此操作，则它不起作用。

[我的实现](http://jsfiddle.net/drZPC/)

HTML：

```
<div id="datetimepicker1" class="input-append date">
    <input type="text" disabled="true"></input> 
    <span class="add-on disabled">
      <i data-time-icon="icon-time" data-date-icon="icon-calendar"></i>
    </span>
</div> 
```

JS：

```
 $(function () {
      $('#datetimepicker1').datetimepicker();

      $(".disabled").children().bind('click', function () {
          return false;
      });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:31:34.233

编辑：http: [//jsfiddle.net/vg4xa/1/](http://jsfiddle.net/vg4xa/1/)

您必须在 datepicker init 之前设置事件处理程序，并停止事件传播：

```
$(function () {
    $('.disabled').bind('click', function(e){
        e.stopImmediatePropagation();
    });

    $('#datetimepicker1').datetimepicker();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T14:51:51.310

我知道这个答案不适用于主题，但在问题描述中，有一个日期选择器，下一个代码对我有用，以防止日期选择器在跨度或日历图标单击时打开

```
 if (disable) {
        $('#datetimepicker1').datepicker('_detachEvents');
        $('#datetimepicker1').datepicker('_detachSecondaryEvents');
    } else {
        $('#datetimepicker1').datepicker('_attachEvents');
        $('#datetimepicker1').datepicker('_attachSecondaryEvents');
    } 
```

# mysql - MYSQL - 将 SUM 与 JOIN 结合使用

> ID：14773557
> 
> 赞同：14
> 
> 时间：2013-02-08T13:23:06.253
> 
> 标签：mysql, join, sum

好的，所以我有 4 张桌子。

`users`具有列`id`和的表`name`。

包含和`groups`列的表。`id``name``owner`

`items`具有列`group`和的表`content`。

包含和`content`列的表。`id``name``duration`

每个用户可以有几个组。每个组里面可以有几个项目。每个项目代表一个内容片段。

我希望能够列出所有组，**以及该组内每条内容的所有持续时间的总和**。

我一直在尝试的是：

```
select groups.id,groups.name,users.name,sum(content.duration) as duration from groups
join users on groups.owner=users.id
join items on items.group=groups.id
join content on content.id=items.content 
```

不幸的是，这只给了我一个结果，即所有组中每条内容的所有持续时间的总和 - 如下所示：

```
"g001", "Group 1", "Me", "400" 
```

我期待的是这样的：

```
"g001", "Group 1", "Me", "160"
"g002", "Group 2", "You", "160"
"g003", "Group 3", "Them", "80" 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-08T13:28:29.293

试试这个

```
 select groups.id,groups.name,users.name,sum(content.duration) as duration from groups
   join users on groups.owner=users.id
   join items on items.group=groups.id
   join content on content.id=items.content
   group by groups.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:27:02.153

试试这个：

```
select groups.id,groups.name,users.name,sum(content.duration) as duration
from groups
    join users
        on groups.owner=users.id
    join items
        on items.group=groups.id
    join content
        on content.id=items.content
group by groups.id,groups.name,users.name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:28:15.650

`LEFT JOIN`即使没有内容，您也可以显示所有组，但总价值`duration`为零*。*

```
SELECT  a.id, a.name GroupName, 
        d.name OwnerName,
        SUM(c.duration) totals
FROM    groups a
        INNER JOIN users d
            ON a.owner = d.id
        LEFT JOIN items b
            ON a.id = b.group
        LEFT JOIN content c
            ON b.content = c.id
GROUP   BY a.id, a.name, d.name 
```

# c# - 使用托管 c++ 包装器将字符串从 c# 传递到非托管 c#

> ID：14773562
> 
> 赞同：1
> 
> 时间：2013-02-08T13:23:20.903
> 
> 标签：c#, c++

我目前有一个简单的非托管 C++ 方法，它只显示一个消息框。我为此创建了一个托管 c++ 包装器，然后在我的 c# 应用程序中引用它。我需要能够将字符串和其他变量从 c# 传递到非托管 c++ 并再次返回，但是由于我的 c++ 知识非常基础，因此在转换字符串时遇到了麻烦。

我的最终目标是能够通过我的新 c# 应用程序（不使用 DLLImport 或 COM）从我们遗留的非托管 c++ 库中调用复杂的函数，但我试图在继续之前创建一个简单的示例。

提前致谢。富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:13:59.357

假设非托管 C++ 方法如下所示：

```
namespace UnmanagedCpp
{
    class MessageBox
    {
    public:
        static void Show(LPCTSTR lpszMessage)
        {
            ::MessageBoxW(NULL, lpszMessage, L"Message", 0);
        }
    };
} 
```

你可以把它包装成这样：

```
using namespace System::Runtime::InteropServices;

namespace ManagedCpp
{
    public ref class MessageBox
    {
    public:
        static void Show(String^ message)
        {
#if defined(UNICODE) || defined(_UNICODE)
            IntPtr intPtr = Marshal::StringToHGlobalUni(message);
#else
            IntPtr intPtr = Marshal::StringToHGlobalAnsi(message);
#endif

            UnmanagedCpp::MessageBox::Show(static_cast<LPTSTR>(intPtr.ToPointer()));
            Marshal::FreeHGlobal(intPtr);
        }
    };
} 
```

如果您打算在 C# 和 C++ 之间进行更广泛的互操作，我推荐 COM，因为它不需要您编写任何包装器（在更复杂的情况下会变得非常混乱），当然它需要您修改现有的C++ 代码。

# iphone - mapView setRegion:region 在模拟器中什么也不显示

> ID：14773565
> 
> 赞同：0
> 
> 时间：2013-02-08T13:23:52.627
> 
> 标签：iphone, mapkit, cllocationmanager

我正在使用 ADClusterMapView 作为地图视图，当我添加 [self.mapView setRegion:region animated:YES]; 时，在模拟器中除了蓝屏之外什么都看不到。不用这行代码我也能看到地图。我很确定我可以使用 locationController.locationManager.location.coordinate 获得坐标。当它在模拟器中运行时，我只能看到左下角的绿屏和 Legal 链接以及右下角的 Autonavi。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if ([CLLocationManager locationServicesEnabled]) {
        self.mapView.delegate = self;

        locationController = [[LocationController alloc] init];
        [locationController.locationManager startUpdatingLocation];

        MKCoordinateRegion region;
        region = MKCoordinateRegionMakeWithDistance(locationController.locationManager.location.coordinate, 10000, 10000);
        [self.mapView setRegion:region animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:23:00.057

Make sure that you are selection your current location when you are running application on simulation .

![enter image description here](../Images/34f020c7abd41303d5f06b191b65f81a.png)

# php - 无法管理在 php 中显示类别中的产品

> ID：14773566
> 
> 赞同：0
> 
> 时间：2013-02-08T13:23:54.857
> 
> 标签：php, mysql

```
<?php 
// This block grabs the whole list for viewing
include "storescripts/connect_to_mysql.php";
$cat=$_POST['cat'];
$sql = mysql_query("select * from categories,products_cat,products where categories.id=products_cat.cat_id and products.id=products_cat.prod_id and categories=$cat");
$catCount = mysql_num_rows($sql); // count the output amount
    while($row = mysql_fetch_array($sql)){ 
             $id = $row["id"];
             $product_name = $row["product_name"];
             $price = $row["price"];
             $date_added = strftime("%b %d, %Y", strtotime($row["date_added"]));
             $prod_list .= "category ID: $id - <strong>$product_name</strong> <br />";
    }

?> 
```

我有这三个表：1）产品表：id，product_name，price，category，subcategory

2) 类别表：id,cat

3）products_cat表：cat_id、prod_id

我无法显示用户将从命令行输入的特定类别的产品 cat=x ，它只会给我这个错误：

```
Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource in /home/perzul12/public_html/beta/show.php on line 6

Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in /home/perzul12/public_html/beta/show.php on line 7 
```

请帮我 ！这是我这个月唯一的金钱来源，我做不到！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:30:28.103

这里的工作不在已弃用的`mysql_`功能中。相反，您没有返回有效的结果集。尝试这个。

```
"select products_cat.products, categories.* 
from categories,
left join products_cat on products_cat.cat_id=products.id
where categories={$cat}" 
```

# ruby-on-rails-3 - 实际上，生产层 Heroku 数据库比初始数据库快多少？

> ID：14773571
> 
> 赞同：0
> 
> 时间：2013-02-08T13:24:11.207
> 
> 标签：ruby-on-rails-3, heroku

Heroku 中的基本生产级数据库实现了 400Mb 缓存。我有一个运行 2 台测功机的生产站点和一个在读写方面非常繁重的工作人员。数据库是我的应用程序的瓶颈。

对数据库的写入将使许多查询无效，因为搜索是在整个数据库中执行的。

我的问题是，鉴于 9 美元的入门级和 50 美元的一级生产数据库之间的价格大幅上涨，迁移是否可能会显着提高性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T14:46:34.517

“更快”在这里是一个奇怪的指标。这意味着类似于 CPU 的东西，但 CPU 并不总是数据库中的一个重要因素，尤其是在您不进行大量写入的情况下。你的基本数据库有 0mb 的缓存——每个查询都会命中磁盘。与此相比，即使是 400mb 的缓存也会显得惊人。检查您的大致数据集大小；一般的经验法则是让您的数据集适合缓存。Postgres 将自己管理这个缓存，并针对最常引用的数据进行优化。

最终，Heroku Postgres 不出售原始性能。生产层的好处是多方面的，但仅举几例：内存缓存、Fork/Follow 支持、500 个可用连接、99.95% 的预期正常运行时间。

您肯定会看到升级到生产层计划的性能提升，但是几乎不可能声称它“快 3 倍”或类似，因为这取决于您使用数据库的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:38:56.783

这肯定是一个陡峭的步骤，所以问题真的是瓶颈有多严重？这将花费您 40 美元的额外费用，但是一旦您的应用程序再次流畅运行，这也可能意味着更多的收入。当然，您也可以考虑其他托管服务，但我个人最喜欢 Heroku（尽管有更便宜的选择）。此外，您已经熟悉 Heroku。关于 Heroku devcenter 的更多信息，关于他们的不同计划：

[https://devcenter.heroku.com/articles/heroku-postgres-plans](https://devcenter.heroku.com/articles/heroku-postgres-plans)：

> 生产计划
> 
> 非生产应用程序或具有最低数据存储、性能或可用性要求的应用程序可以根据行要求在两个入门层计划（开发和基本）之间进行选择。但是，生产应用程序或需要生产层数据库计划功能的应用程序有多种计划可供选择。这些计划主要因内存中数据缓存的大小而异。
> 
> 缓存大小
> 
> 每个生产层计划的缓存大小构成了分配给 Postgres 的 RAM 总量。虽然少量 RAM 用于管理每个连接和其他任务，但 Postgres 将利用几乎所有这些 RAM 进行缓存。
> 
> Postgres 不断地管理您的数据缓存：您编写的行、您创建的索引以及 Postgres 保留的元数据。当查询所需的数据完全在该缓存中时，性能非常快。从缓存数据进行的查询通常比从完整数据集进行的查询快 100-1000 倍。
> 
> 精心设计的高性能 Web 应用程序将有 99% 或更多的查询来自缓存。
> 
> 相反，必须回退到磁盘至少要慢一个数量级。此外，具有大数据类型的列（例如大文本列）通过 TOAST 离线存储，访问大量 TOAST 数据可能会很慢。

# javascript - 如何在 JQuery HTML 中包含脚本标签

> ID：14773574
> 
> 赞同：1
> 
> 时间：2013-02-08T13:24:31.643
> 
> 标签：javascript, jquery, ajax, file, dom

我在这里有这段代码，可以对我的 web 应用程序进行 ajaxizes。

```
$.get(State.url, function(data) {
            console.log($(data).find('#main-content').text());
            $('#main-content').html($(data).find('#main-content').html());
        },"html"); 
```

在某些时候，用户应该上传一个文件，但由于它是 ajaxified，它只会加载传入响应的父容器，即这个。

```
 <form enctype="multipart/form-data" class="contact_form" action="doUploadAudio">
        <input type="file" name="file" value="" id="file"/>
        <script>
            console.log("HEHE");
                $('#fileupload').fileupload({
                    replaceFileInput:false,
                    done: function (e, data) {
                        alert("DONE");
                        $('#main-content').html('');
                        $('#main-content').html($(data.result).find('#main-content').html());
                    }
                });

             </script>  
              <button class="btn" id="uploadAudio" type="submit" class="submit" data-loading-text="Uploading...">Upload</button>
          </form> 
```

如您所见，我的表单没有执行它的脚本标签，无论如何我可以执行它吗？

请注意，我目前使用的是 jQuery 1.8.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:48:53.647

首先，我`fileupload`在您的 HTML 中没有看到任何带有 id 的元素？

无论如何，您应该避免加载包含`<script>`标签的 HTML，因为加载的 JavaScript 的行为是不可预测的。

首先，您应该将您的 HTML 分开并单独加载：

```
<form enctype="multipart/form-data" class="contact_form" action="doUploadAudio">
    <input type="file" name="file" value="" id="file"/>
    <button class="btn" id="uploadAudio" type="submit" class="submit" data-loading-text="Uploading...">Upload</button>
</form> 
```

然后您可以在成功回调中执行 JavaScript `$.get`：

```
$.get(State.url, function(data) {
            console.log($(data).find('#main-content').text());
            $('#main-content').html($(data).find('#main-content').html());
            $('#fileupload').fileupload({
                replaceFileInput:false,
                done: function (e, data) {
                        alert("DONE");
                        $('#main-content').html('');
                        $('#main-content').html($(data.result).find('#main-content').html());
                    }
            });
 },"html"); 
```

或者将 JavaScript 片段（不带`<script>`标签）放在服务器上的 JS 文件中（例如 fileupload.js），然后像这样调用它：

```
$.get(State.url, function(data) {
            console.log($(data).find('#main-content').text());
            $('#main-content').html($(data).find('#main-content').html());
            $.getScript("<url to fileupload.js>", function() {
                        console.log("Fileupload should now be working");
            });
},"html"); 
```

# php - 第一个 PDO 语法有效，第二个类似的无效

> ID：14773578
> 
> 赞同：0
> 
> 时间：2013-02-08T13:24:41.163
> 
> 标签：php, syntax, pdo

在人们用他们的用户名、密码和电子邮件填写注册表单后，我正在尝试创建两个数据库。

下面的第一个 MySQL 查询有效。它将他们的信息插入到用户表中。

第二个查询没有。它试图在确认表中插入一个加密密钥，我可以用它通过确认电子邮件来确认他们的帐户。

这是 PDO 异常消息：

> 带有消息“SQLSTATE [42000]”的异常“PDOException”：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在 C:\xampp\htdocs\tutorspot\sign 中的 'key, email) VALUES ('24', 'd96e77df9072c73da2612380a784f51b', 'r' at line 1' at line 1' 附近使用-up-tutors\index.php:80 堆栈跟踪：#0 C:\xampp\htdocs\tutorspot\sign-up-tutors\index.php(80): PDOStatement->execute() #1 {main}

```
if($action['result'] != 'error'){

$password = md5($password . 'salty');

    try
    {
        $sql = 'INSERT INTO user (fullname, username, email, password, active) VALUES (
            :fullname,
            :username,
            :email,
            :password,
            0)';
        $s = $pdo->prepare($sql);
        $s->bindValue(':fullname', $_POST['fullname']);
        $s->bindValue(':username', $_POST['username']);
        $s->bindValue(':email', $_POST['email']);
        $s->bindValue(':password', $password);
        $s->execute();
        //get the new user id
        $userid = $pdo->lastInsertId();
    }
    catch (PDOException $e)
    {
        $error = 'Error inserting signup info.';
        include $_SERVER['DOCUMENT_ROOT'] . '/tutorspot/inc/error.html.php';
        exit();
    }

    //create a random key for confirmation
    $key = $username . $email . date('mY');
    $key = md5($key . 'salty');

    //add info to confirm table

    try
    {   
        $sql = 'INSERT INTO confirm (userid, key, email) VALUES (
            :userid,
            :key,
            :email)';
        $s = $pdo->prepare($sql);
        $s->bindValue(':userid', $userid);
        $s->bindValue(':key', $key);
        $s->bindValue(':email', $_POST['email']);
        $s->execute();
    }
    catch (PDOException $e)
    {
        $error = 'Error inserting confirm info.';
        include $_SERVER['DOCUMENT_ROOT'] . '/tutorspot/inc/error.html.php';
        echo $e;
        exit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:28:03.177

`key`并且`user`是`SQL`语法中的保留字。用反引号包裹你的列和表名。例如：

```
(`userid`, `key`, `email`) 
```

# ios - 在横向应用程序中打开 iAd 会破坏整个方向

> ID：14773580
> 
> 赞同：3
> 
> 时间：2013-02-08T13:24:49.063
> 
> 标签：ios, ios6, iad

我的应用程序以**横向**模式运行。我不支持纵向，并且在所有屏幕中，如果我将设备旋转到纵向，一切都如预期的那样是横向的。

我正在展示 iAd 横幅，它们看起来不错，它们会随着它们的超级视图一起旋转。横幅显示一切正常。

问题是，当我点击它们并打开实际广告时，**整个应用程序的方向都被搞砸了**。iAD 以纵向模式打开，其位置错误，偏移到屏幕的一半，并且与整个应用程序方向混淆，使其进入不受支持且外观怪异的纵向模式。

**关于如何避免这种情况的任何想法？**

一些应用细节：

*   iOS6
*   仅横向模式
*   Cocos2d + UIKit 用于某些屏幕
*   iAds 的集成代码是标准的，如 iAds 编程指南中所述
*   应用根视图控制器是一个简单的 UIViewController，没有导航控制器或类似的东西。
*   它不使用自动布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:20:18.790

您需要将 AdBannerView 设置为仅显示横向广告：

```
adBannerView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifierLandscape];
adBannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape; 
```

这样，不应加载不支持横向的广告。请注意，这将导致您的填充率下降。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T18:16:37.723

我还在 Cocos2d-landscape 游戏中使用了 iAds。对我来说它的工作。

这是托管的文件：[下载](https://docs.google.com/file/d/0ByA3hGNxt2x5OEFhWUJUbDQ3clU/edit?usp=sharing)

```
-(void)showBannerView
{
    _adBannerViewIsVisible = true;
    AppController * myDelegate = (((AppController*) [UIApplication sharedApplication].delegate));
    [myDelegate.navController.view addSubview:self.adBannerView];

    if (self.adBannerView)
    {
        [UIView animateWithDuration:0.5
                              delay:0.1
                            options: UIViewAnimationCurveEaseOut
                         animations:^
         {
             CGSize s = [[CCDirector sharedDirector] winSize];

             CGRect frame = self.adBannerView.frame;
             frame.origin.y = s.height - frame.size.height;
             frame.origin.x = (s.width/2.0f - frame.size.width/2.0f);

             self.adBannerView.frame = frame;
         }
                         completion:^(BOOL finished)
         {
         }];
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T12:23:56.157

好吧，这个问题把我搞砸了 2 天，我什至放弃了 iAd，直到我遇到了与 gamecenter 身份验证相同的问题，它总是以纵向打开并以相同的方式拧紧应用程序的整个方向。

然而，我几乎立即在谷歌搜索中找到了游戏中心的解决方案。我尝试对 iAd 应用相同的解决方案，并且效果很好。

主要思想是让您的应用程序以纵向和横向方式运行（在应用程序的信息列表中）

然后在您的视图控制器中将首选方向设置为横向右，允许方向旋转并支持横向和纵向。

详细答案在这里：

[带有 CCLayer for iOS 6 的 Cocos2d 横向 Gamecenter 身份验证](https://stackoverflow.com/questions/14266137/gamecenter-authentication-in-landscape-only-cocos2d-with-cclayer-for-ios-6)

特别感谢西尔万！

# javascript - MediaElementJs 结束回调未触发

> ID：14773583
> 
> 赞同：1
> 
> 时间：2013-02-08T13:25:06.577
> 
> 标签：javascript, jquery, html, mediaelement.js, mediaelement

`MediaElementPlayer`在我的 Web 应用程序中使用该类时遇到问题。我想要完成的是每次播放器播放到最后时触发一个方法。我的代码如下所示：

```
$(document).ready(function()
{
    $('#audio-player').mediaelementplayer("#audio-player", 
    {
        alwaysShowControls: true,
        features: ['playpause','volume','progress'],
        audioVolume: 'horizontal',
        audioWidth: 400,
        audioHeight: 120,
        success: function(mediaElement, domObject)
        {
            mediaElement.addEventListener('ended', loadNew, false);
        }
    });

    function loadNew()
    {
        Alert("Track ended callback");
    }

    $(".play-button").click(function()
    {
        alert("Load new");
    });
}); 
```

我的 jQuery 版本是 1.7.2。我已经尝试过其他变体，例如`var player = new Media...`然后`player.addEventListener`，但都没有任何运气。有趣的是，这在昨天确实有效，而今天却没有。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:38:35.523

我已经设法修复它，对于所有未来的读者，代码发布在下面。变化不大，但它就像魅力一样。

```
$(document).ready(function()
{
    var player = new MediaElementPlayer("#audio-player",
    {
       alwaysShowControls: true,
       features: ['playpause','volume','progress'],
       audioVolume: 'horizontal',
       audioWidth: 400,
       audioHeight: 120,
       success: function(mediaElement, domObject)
       {
           mediaElement.addEventListener('ended', loadNextTrack, false);
       }
    });

    $(".play-button").click(function()
    {
        alert("Load new");
    });
});

function loadNextTrack(mediaElement, domObject)
{
   alert("Next track callback");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T13:52:43.107

在您的 mediaelementplayer() 函数调用中，请确保不要重复“#audio-player”作为第一个参数：

```
$(document).ready(function()
{
    $('#audio-player').mediaelementplayer( 
    {
        alwaysShowControls: true,
        features: ['playpause','volume','progress'],
        audioVolume: 'horizontal',
        audioWidth: 400,
        audioHeight: 120,
        success: function(mediaElement, domObject)
        {
            mediaElement.addEventListener('ended', loadNew, false);
        }
    });

    function loadNew()
    {
        Alert("Track ended callback");
    }

    $(".play-button").click(function()
    {
        alert("Load new");
    });
}); 
```

它应该可以解决您的问题。

# android - 模拟物理按钮/较低级别的触摸屏控制

> ID：14773585
> 
> 赞同：1
> 
> 时间：2013-02-08T13:25:11.617
> 
> 标签：android, multi-touch

我发现许多 Android 游戏和模拟器出错的一件事是当用户同时按下多个（屏幕上）按钮时。我想知道如何解决这个问题。

想象一下像超级马里奥世界这样的游戏。右侧有两个按钮（简化版）：Y 代表跑步，B 代表跳跃。通常，您大部分时间都用拇指尖按住 Y，当您想跳跃时，放下拇指并同时按 B。

像这样的情况让 Android 感到困惑是可以理解的。它不会检测两次按下，而是将 Y 按钮中的一次向下移动一点。

我需要解决以下问题之一：

*   作为位图的原始触摸数据（但可能计算量太大，并且无论如何都不会离开触摸屏）
*   检测到的触摸点更详细，例如最适合的椭圆或多边形
*   定义触摸区域的能力。如果手指与这样的区域重叠一定量，则该区域会触发。

（分数从低到高，例如，如果我有第一个，我可以模仿其他的。）

有任何想法吗？

# html - 可能的或滥用的功能？溢出：隐藏的怪异

> ID：14773587
> 
> 赞同：1
> 
> 时间：2013-02-08T13:25:18.143
> 
> 标签：html, google-chrome, css

这是一个非常有趣的案例。

当 overflow:hidden 与 position:relative 一起使用时，奇怪的事情开始发生。自己看吧！

[http://cssdeck.com/labs/u1om11qq](http://cssdeck.com/labs/u1om11qq)

**HTML**

```
<div class="carrier">
    <div class="button"></div>
    <div class="button"></div>
</div> 
```

**CSS**

```
.carrier{
    overflow:hidden;
    width:200px;
    height: 400px;
    border-radius: 50px;
    background:blue;
}
.button {
    position:relative;
    width: 200px;
    height: 200px;
    background-color:rgba(255,0,0,0.2);
    -webkit-transition:all 0.2s ease;
    -moz-transition:all 0.2s ease;
    -ms-transition:all 0.2s ease;
    -o-transition:all 0.2s ease;
    transition:all 0.2s ease;
}
.button:hover{
    background-color:rgba(255,0,0,1);
} 
```

这种情况（闪烁的边缘）是一个错误，还是我错过了一点？

（溢出：隐藏需要覆盖边缘——它会在 chrome 24.0.1312.57.m 上产生奇怪的闪烁）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:39:00.590

webkit 中有一个错误。

你可以在这里查看：

[https://bugs.webkit.org/show_bug.cgi?id=67950](https://bugs.webkit.org/show_bug.cgi?id=67950)

> 来自 Niklas 2011-09-12 13:04:56 PST 的描述 当在父元素上使用边框半径（溢出：隐藏）时，子节点将根据半径进行裁剪。但是，如果在父节点或子节点上使用任何 -webkit-transform 属性，边框半径就会丢失。
> 
> 此处提供示例：http: [//jsfiddle.net/DkXuR/](http://jsfiddle.net/DkXuR/)

在这种情况下，它似乎也中断`-webkit-transition`了！

将您的目标元素包装在`wrapper`元素中并对其进行转换！

有很多关于圆角和剪辑内容的错误`overflow:hidden`：

*   [如果位置：相对，圆角无法切断 webkit 浏览器中的内容](https://stackoverflow.com/questions/6144398/rounded-corners-fail-to-cut-off-content-in-webkit-browsers-if-positionrelative)
*   [https://bugs.webkit.org/show_bug.cgi?id=68196](https://bugs.webkit.org/show_bug.cgi?id=68196)

# ios-ui-automation - 激活 UI Automation Instrument for iOS 中的断点

> ID：14773591
> 
> 赞同：0
> 
> 时间：2013-02-08T13:25:26.180
> 
> 标签：ios-ui-automation

有没有办法在编写几个脚本后激活 Xcode Instruments Automation 中的断点，因为它似乎存在但只是不活动的。我想知道是否可以在没有 Xcode 中的应用程序代码的情况下从自动化工具中调试我的 JS 代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:55:33.883

右键单击 UI 自动化脚本编辑器的装订线时看到断点选项的原因是因为整个编辑器窗格是从 Xcode 重用的代码编辑器。不幸的是，正如您所发现的那样，这令人困惑，但显然这是他们在 Instruments 中进行语法突出显示和所有这些的一种方便方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:26:01.053

Instruments 独立于 Xcode 工作，即使是从 Xcode 开始的。如果您从 Xcode 运行自动化工具，您将看到它启动了您的应用程序并向其发出 UI 命令，而 Xcode 不知道这一点：在 XCode 中，运行按钮仍然处于启用状态。
这意味着 Xcode 未激活，并且断点未启用。因此，您不能从自动化向您的应用程序发出 UI 命令，以便它会在断点处停止。

# php - 狮身人面像不匹配正确的符号

> ID：14773592
> 
> 赞同：0
> 
> 时间：2013-02-08T13:25:29.473
> 
> 标签：php, mysql, search, full-text-search, sphinx

我在使用 sphinx 搜索时遇到问题 例如，查询是“C++”

对于此查询，我得到与“C”匹配的结果，但我需要 sphinx 来搜索精确的“C++”而不是“C”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:55:41.733

检查您的`charset_table`， [http://sphinxsearch.com/docs/current.html#conf-charset-table](http://sphinxsearch.com/docs/current.html#conf-charset-table)

怀疑你的 没有 + `charset_table`，所以它没有被索引。

或者，如果您只想处理特定情况（如`c++`）而不是该字符的所有情况（如`1+2`），请查看为`c++` [http://sphinxsearch.com/docs/current.html#conf-exceptions](http://sphinxsearch.com/docs/current.html#conf-exceptions)添加例外 （其即使在示例中！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:55:53.000

*   是算术字符，不会被匹配

您应该查看围绕此问题的例外情况：

[http://sphinxsearch.com/docs/1.10/conf-exceptions.html](http://sphinxsearch.com/docs/1.10/conf-exceptions.html)

```
C++ => cplusplus
c++ => cplusplus 
```

# excel - excel 2007 - 在 VBA 中计算一系列单元格的 z 分数

> ID：14773593
> 
> 赞同：0
> 
> 时间：2013-02-08T13:25:29.540
> 
> 标签：excel, vba, statistics

所以我将这个大电子表格与正常的 excel 函数放在一起，效果很好，但我想通过使用 vba 和粘贴静态值来加速它并缩小文件大小，而不是降低性能的引用值（工作簿大约 20 mb 现在并将继续增长）

所以我知道我想完成什么，但我很难用简洁的表达方式表达出来，因为我的 VBA 经验仍处于起步阶段，所以任何帮助将不胜感激。

z-score = (数字 - 所有数字的平均值) / (所有数字的标准差)

Worksheets("relay").Value("c32") 包含所有数字的平均值 Worksheets("relay").Value("c33") 包含所有数字的标准差

我想做的是在工作表（“Hitterscalc”）.range（“cb：cb”）列中，用工作表（“Hitterscalc”）.range（“J： J") 对于该列中其对应的 A 列单元格不等于“”且其对应的 AB 列等于 1 的所有行

有人对此有什么简洁的陈述吗？我可以粗略地逐个单元地完成它，但是当我开始放入循环以遍历所有列时，它在我的代码中都崩溃了，不幸的是在我的脑海中。

感谢您的时间

```
Application.ScreenUpdating = False
Worksheets("hitterscalc").Range("cb2").FormulaR1C1 = _
   "=IF(OR(RC[-79]="""",RC[-52]<>1,Settings!R4C[-74]<>""yes""),"""",(RC[-70]-relay!R32C[-77])/relay!R33C[-77])" 
Sheets("HittersCalc").Select 
Range("CB2").Select 
Selection.AutoFill Destination:=Range("CB2:CB701") Range("CB2:CB701").Select Columns("CB:CB").Select 
Selection.Copy 
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _ :=False, Transpose:=False Application.CutCopyMode = False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:03:25.210

以下内容应等效于您的代码：

```
Worksheets("hitterscalc").Range("cb2").FormulaR1C1 = _
   "=IF(OR(RC[-79]="""",RC[-52]<>1,Settings!R4C[-74]<>""yes""),"""",(RC[-70]-relay!R32C[-77])/relay!R33C[-77])" 

'NOTE: Here I am assumimg that there is a column (I've gone with 
'column A but you should change it to whatever is appropriate) that has data
'as far down as you plan on autofilling the columns. So we use that to find how
'far down to autofill rather than hard coding it to 701 as in your code (this is
'the same as when you push ctrl + down in excel)
dim lastRow as int
lastRow = Sheets("HittersCalc").Range("A2").End(xlDown).row

Sheets("HittersCalc").Range("CB2").AutoFill Destination:=Range("CB2:CB" & lastRow) 

'A cleaner way to copy and paste by value that doesn't involve the clipboard
Range("CB:CB").Value = Range("CB:CB").Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T20:52:10.100

是的，我知道这很旧，但我最近一直在寻找类似的解决方案。我最终创建了自己的。我更喜欢可以随时随地使用的多功能功能。如果您不想计算 z 分数，那么您可以在嵌套的 IF 语句中使用该函数。

```
Function zscore(i As Double, rng As Range)
zscore = (i - Application.WorksheetFunction.Average(rng)) / Application.WorksheetFunction.stdev(rng) 
End Function 
```

然后嵌套的 if 可能类似于：

```
=IF(COUNTA(A1)>0,IF(AB1=1,IF(C1=J1,zscore(C1,$C$1:$C$6),""),""),"") 
```

这可以随时随地为您提供 zscore，无论何时何地，您都需要它，而无需进行任何计算。如果这种事情经常出现，您可以为用户扩展函数以将更多单元格传递给函数（对于 A、AB 和 J 中的值，或者他们喜欢的任何值），而不是被限制在特定的子例程中。

# python - 乒乓球模拟器

> ID：14773594
> 
> 赞同：4
> 
> 时间：2013-02-08T13:25:29.237
> 
> 标签：python, python-2.7, nested-loops

我编辑了我之前的问题，因为我想出了我认为正确的代码。这背后的逻辑应该是：当这盘比赛还没有结束，也不是平局时 10:10：选手 A 开始发球，不管他是否赢分，发球两次，然后选手 B 接发球，也发球两次。它一直持续到该盘结束，除了当服务器改变每个得分时，10:10 平局。

任何人都可以检查代码是否完美无缺？谢谢你。

```
def simOneSet(probA, probB):
    serving = "A"
    scoreA = scoreB = 0
    while not setOver(scoreA, scoreB):
        if scoreA != 10 and scoreB != 10:
            if serving == "A":
                for i in range(2):
                    if random() < probA:
                        scoreA += 1
                    else:
                        scoreB += 1
                serving = "B"
            else:
                for i in range(2):
                    if random() < probB:
                        scoreB +=1
                    else:
                        scoreA += 1
                serving = "A"    
        # when there is a tie 10:10
        else:
            if serving == "A":
                if random() < probA:
                    scoreA += 1
                    serving = "B"
                else:
                    scoreB += 1
                    serving = "B"
            else:
                if random() < probB:
                    scoreB += 1
                    serving = "B"
                else:
                    scoreA += 1
                    serving = "A"
    return scoreA, scoreB 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:03:06.510

我会使用 dict 在玩家之间“切换”：

```
other = {'A':'B', 'B':'A'} 
```

那么，如果`serving`等于`'A'`，那么`other[serving]`就等于`'B'`，如果`serving`等于`'B'`，那么`other[serving]`就等于`'A'`。

* * *

您还可以使用[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)来跟踪分数：

```
In [1]: import collections

In [2]: score = collections.Counter()

In [3]: score['A'] += 1

In [4]: score['A'] += 1

In [5]: score['B'] += 1

In [6]: score
Out[6]: Counter({'A': 2, 'B': 1}) 
```

* * *

还要注意这段代码是如何

```
 if serving == "A":
        for i in range(2):
            if random() < probA:
                scoreA += 1
            else:
                scoreB += 1
    else:
        for i in range(2):
            if random() < probB:
                scoreB +=1
            else:
                scoreA += 1 
```

有两个块基本相同的想法重复了两次。这表明可以通过使用函数来收紧代码。例如，我们可以定义一个函数`serve`，当给定概率`prob`并且玩家（`A`或`B`）返回获胜玩家时：

```
def serve(prob, player):
    if random.random() < prob:
        return player
    else:
        return other[player] 
```

那么上面的代码就会变成

```
 for i in range(2):
        winner = serve(prob[serving], serving)
        score[winner] += 1 
```

* * *

因此，您可以通过以下方式压缩您的代码：

```
import random
import collections
other = {'A':'B', 'B':'A'}

def serve(prob, player):
    if random.random() < prob:
        return player
    else:
        return other[player]

def simOneSet(probA, probB):
    prob = {'A':probA, 'B':probB}
    score = collections.Counter()

    serving = "A"
    while not setOver(score['A'], score['B']):
        for i in range(2):
            winner = serve(prob[serving], serving)
            score[winner] += 1
        if score['A'] == 10 and score['B'] == 10:
            winner = serve(prob[serving], serving)
            score[winner] += 1
            serving = winner

    return score['A'], score['B']  

def setOver(scoreA, scoreB):
    return max(scoreA, scoreB) >= 21

print(simOneSet(0.5,0.5)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:30:59.853

这里有一个提示：

如果您有该组中的整数并且知道哪个球员开始发球，那么您就拥有知道谁在发球所需的一切。

那么在循环开始或结束时的简单 if 语句就足够了。

如果这太复杂，请尝试从模拟服务器开始每一轮的游戏开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:38:26.313

可能有帮助的是语法

```
var = 1 if var == 2 else 2 
```

如果 var 为 2，这将使 var 为 1，如果 var 为 1，则 var 为 2。我觉得这是一个学校问题，所以我不想完全放弃答案:)

提示：你的想法是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-11T08:04:57.213

随机导入 *

```
P1=P2=0

while 1 :

  p1=p2=0

  while 2 :

    if random() < 0.5 : p1 +=1

    else              : p2 +=1

    if(p1 >=11 or p2 >=11) and abs(p1-p2) > 1: break

  P1 += p1 > p2; P2 += p2 > p1

  print "%2d : %2d (%d : %d)" % (p1, p2, P1, P2)

  if P1 == 4 or P2 == 4 : break 
```

我希望这会有所帮助，它对我有用

# php - 关于 php 表单和 isset 的一个可怕的查询

> ID：14773597
> 
> 赞同：-2
> 
> 时间：2013-02-08T13:25:49.323
> 
> 标签：php

我想在php中问一个问题

这是html表单代码

```
<form id="BlahForm" name="BlahForm" method="post" action="page1.php">
   <input type="radio" name="rdPS" value="RJ"/> Space 1
   <input type="radio" name="rdPS" value="SM" />Space 2
   <input type="submit" name="submit" value="Submit">
</form> 
```

这是PHP代码

```
if(isset($_POST['submit'])) // Check this line. Here I have Q-1
{
    if(isset($_POST['rdPS'])) // Check this line. Here I have Q-2 & Q-3
{
    $choice_port = $_POST["rdPS"];
}
else  // Check this line. Here I have Q-4
{
    $message = "Radio button not clicked";
}
 } 
```

现在以他们被问到的格式阅读问题.. Q-1。第一个 isset 是做什么的？if(isset($_POST['submit'])) （我知道 ISSET 检查提交按钮是否被点击？）

Q-2。2nd isset 是做什么的？（我在想这第二个 ISSET 检查是否单击了单选按钮。

Q-3 需要第二次吗？

Q-4 这 else 不起作用.. 为什么？

感谢您的帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:31:52.277

*   `isset($_POST['submit'])`检查是否正在提交表单。
*   `isset($_POST['rdPS'])`检查单选按钮是否被选中。
*   如有必要，由您决定。如果您需要该数据，那么是的，这是必要的。
*   我怀疑这`else`不起作用，因为您一直单击单选按钮。

您应该查看一些有关 PHP 的教程。很基本的东西。

# asp.net - Asp.net MVC 在 Session 中保留敏感信息是否安全？

> ID：14773598
> 
> 赞同：4
> 
> 时间：2013-02-08T13:25:51.333
> 
> 标签：asp.net, asp.net-mvc, session

我的 Asp.net MVC 网站上有一个基本的身份验证系统

```
[HttpPost]
public ActionResult Login(LoginViewModel model, string returnUrl)
{
    WebSecurity.Login(model.UserName, model.Password, persistCookie: false)

    return RedirectToAction("Index", "Home");
} 
```

我还有一个`UserInfoViewModel`类，我保留一些用户特定的信息，并在不同的页面上使用它。

为了避免`UserInfoViewModel`每次我需要它时创建它，我想将它保存在登录方法的会话中。

```
public ActionResult Login(LoginViewModel model, string returnUrl)
{
   WebSecurity.Login(model.UserName, model.Password, persistCookie: false)
   var userInfoViewModel = new UserInfoViewModel();
   Session["userInfo"] = userInfoViewModel;

    return RedirectToLocal(returnUrl);
} 
```

考虑到我有内部依赖的敏感信息`UserInfoViewModel`，例如`IsSuperuser`，将该对象保留在 Session 中是否安全？当用户登录会话过期时它也会过期吗？

**解决方案**

`System.Security.Principal.IIdentity`正是为此而生。它保存了您需要的 AUTH cookie 自定义用户信息，因此您不必每次都重新计算它。

[使用自定义主体对象视频教程](http://www.asp.net/web-forms/videos/authentication/use-custom-principal-objects)

谢谢你的回答！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T13:27:27.157

是的，它是安全的，因为 Session 存储在服务器上。但是，如果您决定使用 ASP.NET 会话，您应该考虑另一个问题。如果此会话存储在 Web 服务器的内存中（默认），IIS 可以随时回收您的应用程序，您将丢失此会话数据。另一方面，用户仍将通过身份验证，因为他被仍将发送的表单身份验证 cookie 跟踪。因此，如果您想使用 Sessions，我建议您切换到进程外会话提供程序（例如`StateServer`或`SQLServer`）。

同样正如@Mikeb 在评论部分指出的那样，Session 还有另一个非常严重的问题。如果您为给定控制器启用了读写模式，您将无法并行处理来自同一会话的多个请求。服务器将按顺序阻止和处理它们。例如，考虑来自同一会话的多个 AJAX 请求。它们都会按顺序阻塞和处理。

# sharepoint - 文档类型图像损坏

> ID：14773599
> 
> 赞同：0
> 
> 时间：2013-02-08T13:25:54.393
> 
> 标签：sharepoint, sharepoint-2010

我是 Sharepoint 2010 的新手；添加 Web 部件供用户下载文件时，“类型”图像总是损坏，并且 URL 没有图像文件。例如：

![图片](../Images/487363322704373c36e37fad9eeec5ab.png)

然后在查看损坏图像的路径时，它会出现：

```
https://portal.mysite.com/_layouts/images/ 
```

我必须建立某种关联吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:35:25.383

如果您使用的是内容编辑器 Web 部件，则必须将文件类型的图标 (DocIcon) 添加到自定义 xsl 模板。

请参阅下面给出的链接

> [http://freedotnet4u.blogspot.in/2013/01/add-icon-docicon-of-file-type-to-custom.html](http://freedotnet4u.blogspot.in/2013/01/add-icon-docicon-of-file-type-to-custom.html)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:55:45.977

在进行了一些挖掘之后，我注意到在我的 DOCICON 文件中有一些无效的 XML；特别是一些pdf映射。

删除无效字符并重新启动 IIS 后，文档图标现已出现。

# javascript - 如何在 Ajax 的网站和服务之间共享身份验证

> ID：14773601
> 
> 赞同：2
> 
> 时间：2013-02-08T13:26:13.187
> 
> 标签：javascript, asp.net-mvc, asp.net-web-api, forms-authentication

我有一个网站（MVC 4）和 WebService（Web API）。WebSite 有一个身份验证 cookie，它会在 WebSite 服务器端代码调用服务时对其进行解密，以便将安全令牌发送到 WebService。这很好用。

但是，网站有 JavaScript，我想直接调用 WebService。我已尝试共享 MachineKey 和 Auth 信息，但 cookie 并未通过 WebApi 携带。

我的后备方案是通过网站将所有调用路由到 WebService；但这又丑又慢。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:06:41.237

正确答案是达林的。为了在服务站点和网站之间共享登录 cookie，它们都必须在同一个域中；所以例如服务站点可以在

```
http://svc.mysite.com 
```

该网站可能位于

```
http://www.mysite.com 
```

然后浏览器将允许两个站点共享相同的cookie。

另一种方法是让站点对服务站点进行身份验证，并获取可以传递给 javascript 的某种令牌。但是，除非您在 HTTPS 上运行，否则这将是非常不安全的，因为令牌将“以明文形式”可用。

最后一种机制（也是我认为最常见的解决方案）是通过网站路由所有 API 访问，但这在许多情况下并不理想。

# git - 尝试使用 git svn clone 命令将 SVN 存储库克隆到本地计算机

> ID：14773602
> 
> 赞同：0
> 
> 时间：2013-02-08T13:26:18.277
> 
> 标签：git, svn, git-svn

尝试使用以下命令将存储库克隆`SVN`到本地计算机：`git svn clone`

```
git svn clone http://svn/java mirror.git` 
```

但我收到此错误：

```
你的意思是其中之一吗？
        fsck  
        节目

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:23:15.267

I had to install "yum install git-svn"

# php - 显示来自mysql的数据，在表中显示

> ID：14773603
> 
> 赞同：0
> 
> 时间：2013-02-08T13:26:25.380
> 
> 标签：php

我正在建立一个网站，它将从 mysql 返回结果并将它们显示在网页上。我将数据存储在 mysql 或检索数据并将其显示在网页上没有问题。当数据返回到页面时，我想将它存储在一个表中并运行一个循环，这样对于每条记录，都会有一个像列表编号一样向下递增的数字。任何帮助，将不胜感激。我的代码不断遇到错误：

```
<?php
    $con = mysql_connect("localhost","root","");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("forloops", $con);

    $result = mysql_query("SELECT * FROM userinfo ORDER BY age DESC");

    echo "<table border='1'>
    <tr>
        <th>Position</th>
    <th>Firstname</th>
    <th>Lastname</th>
    <th>Age</th>
    </tr>";
    $counter = 0;
        $position= 0;
    $row = mysql_fetch_array($result);

    if($counter <=10){

            echo "<tr>";
                        echo "<td>" . $position . "</td>";
            echo "<td>" . $row['firstname'] . "</td>";
            echo "<td>" . $row['lastname'] . "</td>";
            echo "<td>" . $row['age'] . "</td>";
            echo "</tr>";
            $counter++;
            }
    echo "</table>";
    mysql_close($con);
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:35:14.410

如果你有一个以上的数据库结果，你应该使用：

```
 while ($row = mysql_fetch_array($result)) {
 //process one row
} 
```

使用你的方式， $row 总是一样的。其次，如果我没看错，你不会增加 $position 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:29:57.057

**您当前代码的问题是您只从查询中获取第一行，看看我是如何在下面写下来的：**

```
echo "<table border='1'>
<tr>
    <th>Position</th>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
</tr>";
$counter = 0;
    $position= 0;

while ($row = mysql_fetch_array($result)) { // This is new code
    if($counter <=10){

        echo "<tr>";
                    echo "<td>" . $position . "</td>";
        echo "<td>" . $row['firstname'] . "</td>";
        echo "<td>" . $row['lastname'] . "</td>";
        echo "<td>" . $row['age'] . "</td>";
        echo "</tr>";
        $counter++;
    }
} // This is new code
echo "</table>";
mysql_close($con);
?> 
```

`<tr>`如果您注意到，我已经围绕表格的行和单元格的回声创建了一个循环`<td>`。

此`while`循环将遍历查询返回的每一行。

# cassandra - 两个数据中心的一致性策略

> ID：14773608
> 
> 赞同：2
> 
> 时间：2013-02-08T13:26:42.230
> 
> 标签：cassandra

当所有节点都启动时，最好的容错和快速读取的写入/读取策略是什么？

我在每个数据中心有 2 个副本，起初我正在考虑使用 QUORUM 进行写入，使用 LOCAL_QUORUM 进行读取，但如果一个节点崩溃，读取将失败。

我想出的另一个策略是使用 QUORUM 进行写入，使用 TWO 进行读取。它在正常情况下应该工作得很快（因为我们会首先从最近的节点获得结果），当任何节点崩溃时它会工作得更慢。

1.  这是建议使用一致性级别 2 的情况还是出于其他目的？
2.  您什么时候使用 CL 3？
3.  您是否有更好的一致性和容错写入/读取策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T06:30:00.787

您首先必须选择是否需要一致性或可用性。如果选择一致性，则需要 R + W > N，其中 R 是读取的节点数，W 是写入的节点数，N 是副本数。

然后，您必须选择是否希望读取/写入始终跨越多个数据中心。

一旦你做出这些选择，你就可以选择你的一致性级别（或者它将由你决定）。

例如，如果您决定需要一致性，并且不希望写入/读取跨越多个数据中心，那么您可以在 LOCAL_QUORUM（在您的情况下为 2）读取并在 ONE 写入，反之亦然。

每个 dc 2 份是一个奇怪的选择。通常你想做 LOCAL_QUORUM，每个数据中心有 3 个副本。这使您可以仅使用数据中心内的节点进行读写，但允许 1 个节点关闭。

# php - 从一个表单传递 php 变量以提交到另一个表单中的数据库

> ID：14773611
> 
> 赞同：0
> 
> 时间：2013-02-08T13:26:55.967
> 
> 标签：php, mysql, database, mysqli

我有一个弹出框，用于检查用户是否登录。如果他是，我正在回显一个用户将按下按钮并将其提交给数据库的小表单。变量显示在弹出窗口中，但是当按下提交时，它们不会传递到提交 php 文件。

```
$add_wish = "<form action='memWishList.php' method='post' id='memWishList'>
    <h3>Add this item to your Wish List?</h3><br>
    <input type='hidden' name='title' value='".$title."'>".$title."</input><br>
    <input type='hidden' name='link' value='".$link."'></input><br>
    <input type='submit' name='submit' value='Add'/><button id='cancel'>
      Cancel</button>
</form>";
    echo $add_wish; 
```

我想传递要提交给数据库的值标题和链接。这是我的 memWishList.php 文件：

```
if (isset($_POST['submit'])){
  //get member id
  $title = mysqli_real_escape_string($_POST['title']);
  $link = mysqli_real_escape_string($_POST['link']);
  $mysql = "INSERT INTO wish_list (memNum, title, link, date) VALUES ('$memnum', \ 
      '$title', '$link', now())";
    $myquery = mysqli_query($mysqli_connect, $mysql);} 
```

这样做，我只得到成员 ID 和插入的日期，而不是标题和链接。有什么问题？我回显此表单的原因是登录用户和未登录用户有一个 if/else 语句。在 html 中执行此操作会容易得多，但不能...

DB：memnum(varchar)、title(longtext)、link(longtext)、date(date)。我还有其他表格，其中插入长链接和标题就像长文本一样好。它们来自 RSS 提要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:45:03.770

请检查[文档](http://php.net/manual/en/mysqli.real-escape-string.php)：如果您使用程序方法，mysqli_real_escape_string 函数期望字符串作为第二个参数。它可能是即：

```
$link = mysqli_real_escape_string($mysqli_connect, $_POST['link']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:46:33.400

您有一些标记错误。您隐藏的输入标签应如下所示：

```
<input type='hidden' name='link' value="<?php echo $link ?>"> 
```

将您的 HTML 文件更新为如下所示，所有值都将发送到 $_POST 变量：

```
<form action='memWishList.php' method='post' id='memWishList'>
    <h3>Add this item to your Wish List?</h3><br>
    <input type='hidden' name='title' value="<?php echo $title ?>"><?php echo $title ?><br>
    <input type='hidden' name='link' value="<?php echo $link ?>"><br>
    <input type='submit' name='submit' value='Add'/><button id='cancel'>Cancel</button>
</form> 
```

# php - Salesforce/php - 下载的图像附件已损坏 - 有什么想法吗？

> ID：14773616
> 
> 赞同：1
> 
> 时间：2013-02-08T13:27:10.163
> 
> 标签：php, web-services, salesforce

这是我使用 php 工具包和企业 wsdl 从 Salesforce.com 下载附件的代码：

```
 header('Content-Type: application/force-download');
    header('Content-Disposition: inline; filename="image.jpg"');        
    $mySforceConnection = getConnection();
    $query = "SELECT Id, Name, Body from Attachment Where Id ='" .$id ."'";
    $queryResult = $mySforceConnection->query($query);

    $records = $queryResult->records;
    print_r(base64_decode($records[0]->fields->Body)); 
```

当我这样做时，文件会以正确的字节数正确下载，但是当我打开图像时，Windows 图像查看器会说它已损坏。知道为什么会这样吗？

相同的代码适用于 PDF 和文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:22:40.340

正如@eyescream 提到的，您真的只想回显输出。使用该`print_r`功能时，会在输出中放置额外的制表符和换行符以使其更具可读性。平原`echo`会正确输出。

```
header('Content-Type: application/force-download');
header('Content-Disposition: inline; filename="image.jpg"');

$mySforceConnection = getConnection();

$query = "SELECT Id, Name, Body from Attachment Where Id ='" .$id ."'";
$queryResult = $mySforceConnection->query($query);

$records = $queryResult->records;
echo base64_decode($records[0]->fields->Body); 
```

# xml - 如何根据 XPath 中的条件在两个元素中查找文本？

> ID：14773617
> 
> 赞同：0
> 
> 时间：2013-02-08T13:27:13.407
> 
> 标签：xml, xpath

这是我的 XML

```
<?xml version="1.0" encoding="ISO8859-1" ?>
<!-- modified from http://www.xmlfiles.com/examples/simple.xml -->
<_breakfastmenu>
<food type="vegetarian">
  <name>Belgian Waffles</name>
  <price>5.95</price>
  <description>two of our famous Belgian Waffles with plenty of real maple syrup</description>
  <calories>650</calories>
</food>
<food type="vegetarian">
  <name>Strawberry Belgian Waffles</name>
  <price>7.95</price>
  <description>light Belgian waffles covered with strawberries and whipped cream</description>
  <calories>900</calories>
</food>
<food type="vegetarian">
  <name>Berry-Berry Belgian Waffles</name>
  <price>8.95</price>
  <description>light Belgian waffles covered with an assortment of fresh berries and whipped cream</description>
  <calories>900</calories>
</food>
<food type="vegetarian">
  <name>French Toast</name>
  <price>4.50 </price>
  <description>thick slices made from our homemade sourdough bread</description>
  <calories>600</calories>
</food>

</_breakfastmenu> 
```

我想找到所有包含“Waffles”的食物元素，我可以通过运行这个 XPath 成功地做到这一点：

```
_breakfastmenu/food/name[contains(text(), "Waffles")] 
```

但我也想知道这些的价格，正确的方法是什么，我尝试了一段时间没有成功，感谢任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:44:44.580

XPath 表达式

```
/_breakfastmenu/food[contains(name, 'Waffles')]/price 
```

将提取您感兴趣的元素。您通常不需要使用`text()`，因为元素节点的字符串值是其所有后代文本节点的串联。例如，如果您正在查看的元素可能有子元素或多个文本节点

```
<foo>This is a <i>contrived</i> example</foo> 
```

那么`foo`元素的字符串值是“这是一个人为的例子”，而`foo/text()`会给你两个文本节点，“这是一个”和“例子”。根据您使用此节点集的上下文，您最终可能会遍历节点或仅使用第一个节点的值（“这是一个”）。如果您不确定是否需要`text()`，那么您可能不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:41:37.410

我不是这方面的专家，但这可以吗？

```
XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load("http://localhost:49288/EktronSite2/XMLFiles/Food.xml");//ur xml location
        XmlNodeList nodes = xmlDoc.SelectNodes("_breakfastmenu/food");
        if(nodes != null)
        {
            foreach (XmlNode node in nodes)
            {
                if (node.SelectSingleNode("name").InnerText.Contains("Waffles"))
                {
                    Response.Write(node.SelectSingleNode("name").InnerText+ ":" +node.SelectSingleNode("price").InnerText + "<br><br>");
                }
            }
        } 
```

# c# - 以编程方式查找连接设备的 IMEI / ESN

> ID：14773618
> 
> 赞同：0
> 
> 时间：2013-02-08T13:27:19.463
> 
> 标签：c#, java, at-command, imei, jtapi

使用 USB 与计算机系统连接时，我需要获取移动设备的 IMEI/ESN。我能做些什么？我遇到了 JTAPI，但我仍然不确定是否有足够好的实现来完成我的任务。

PS：我当然需要以编程方式进行。我正在使用 Java，并针对 Windows 系统。所以我也很擅长 C# 解决方案。:)

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:34:29.940

要以（半）通用方式执行此操作，唯一的方法是将其发送到手机的（模拟）串行端口上；

 [```
AT+CGSN 
```](http://www.forensicswiki.org/wiki/AT_Commands) 

有些/大多数手机允许，有些则不允许。那些有时没有制造商特定方式获取 IMEI 的人，有些人根本不允许。

换句话说，如果您需要一个对每个制造商都 100% 通用的解决方案，那么您可能不走运。

# java - spring 注入时将 in-it 参数添加到 servlet 过滤器

> ID：14773620
> 
> 赞同：2
> 
> 时间：2013-02-08T13:27:21.830
> 
> 标签：java, spring

我正在尝试将弹簧注入添加到 servlet。在我的项目的 web.xml 中

```
<filter>
   <filter-name>Helloworld</filter-name>
   <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
   <filter-name>Helloworld</filter-name>
   <url-pattern>/hello/*</url-pattern>
</filter-mapping> 
```

在 Spring.xml 中

```
<bean id="Helloworld" class="com.abc.Helloworld">       
</bean> 
```

我的过滤器有一个 in-it 参数。我很困惑是否可以将此参数作为属性添加到 bean 或 web.xml 的元素中。

哪个是最好的或正确的

**1.在spring.xml下bean Helloworld**

```
<property name="greet">
      <value>Hello</value>
   </property> 
```

**2\. 在 web.xml 中过滤 Helloworld 为**

```
<init-param>
         <param-name>greet</param-name>
         <param-value>Hello</param-value>    
</init-param> 
```

请建议是否遵循方法1或2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:23:48.697

I would almost certainly put it in Spring, where the rest of your application configuration is.

Why would you even need to use `DelegatingFilterProxy` if you were thinking of configuring this `Filter` in the deployment descriptor?

# javascript - jQuery masonry - 砌体重新加载后的调用方法

> ID：14773625
> 
> 赞同：2
> 
> 时间：2013-02-08T13:27:42.433
> 
> 标签：javascript, jquery, twitter-bootstrap, jquery-masonry

我使用 Twitter Bootstrap 和 jQuery Masonry 开发一个新网站。我将新元素附加到砖石容器中。

这些元素既不附加也不附加到现有子元素，而是插入它们之间，具体取决于如下排序顺序：

```
var elem = $(boxes[rand2]);
$(".post").each(function(i){
    if(parseFloat($(this).data("weight"))<=weight){
        elem.insertBefore(this);
        return false;
    }
    else if (i == $(".post").length - 1) {
        elem.insertAfter(this);
        return false;
    }
}); 
```

到目前为止，这很完美。我想要实现的是元素仅在到达目的地时才显示。我不想禁用动画，但新元素的空间应该出现（空），只有当所有东西都通过砖石重新排列时，新元素才会出现。

我认为在重新加载后会触发一个回调操作，如下所示：

```
$('#posts').masonry('reload',function(){
  alert('re-aligning finished');
}); 
```

但这不起作用，它会提前触发。

所以暂时，我做到了

```
$('#posts').masonry('reload',function(){
  window.setTimeout(showElem,500);
});
function showPosts(){
  $('.post').show();
} 
```

这似乎可行 - 但固定的 500 毫秒超时并不是一个真正漂亮的解决方案......

那么，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:56:27.800

我猜你已经在使用 jQuery 了。也许使用[延迟](http://api.jquery.com/category/deferred-object/)对象会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:30:21.743

你能在文件加载之后再做吗？

```
(function($) {
$(document).ready(documentReadyFunction);
$(window).resize(windowResizeFunction);
$(window).load(windowLoadFunction);
function documentReadyFunction() {
    //your inserted html here
}
function windowResizeFunction() {
    //resize here
}
function windowLoadFunction() {
    //do masonry here
}
})(jQuery); 
```

# c++ - 使用 Qt Commercial(qmake+jom) 编译的 snmp-net 库崩溃

> ID：14773628
> 
> 赞同：-1
> 
> 时间：2013-02-08T13:27:54.143
> 
> 标签：c++, qt, snmp, qmake

启动时应用程序崩溃（尝试调试和发布模式）。对此不是很有经验，我将不胜感激。

。轮廓

```
QT       += core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = snmpTest5
TEMPLATE = app

LIBS += -LC:\snmp\lib -lnetsnmp -lnetsnmpagent  -lnetsnmpmibs
win32:INCLUDEPATH += "C:/snmp/include"

SOURCES += main.cpp\
        mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui 
```

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

#include <net-snmp/net-snmp-config.h>
#include <net-snmp/net-snmp-includes.h>

#undef DEMO_USE_SNMP_VERSION_3

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_pushButton_clicked()
{
    netsnmp_session session, *ss;
    netsnmp_pdu *pdu;
    netsnmp_pdu *response;

    oid anOID[MAX_OID_LEN];
    size_t anOID_len;

    netsnmp_variable_list *vars;
    int status;
    int count=1;

    init_snmp("snmpdemoapp");
    snmp_sess_init( &session );
    session.peername = strdup("test.net-snmp.org");

    ui->textEdit->append("test");
} 
```

应用程序输出

```
Starting ...\snmpTest5-build-Desktop_Qt_5_0_0_MSVC2010_32bit_SDK-Debug\debug\snmpTest5.exe...
The program has unexpectedly finished.
...\snmpTest5-build-Desktop_Qt_5_0_0_MSVC2010_32bit_SDK-Debug\debug\snmpTest5.exe exited with code -1073741515 
```

编译输出

```
14:22:16: Running steps for project snmpTest5...
14:22:16: Starting: "C:\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\bin\qmake.exe" ..\snmpTest5\snmpTest5.pro -r -spec win32-msvc2010
14:22:18: The process "C:\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\bin\qmake.exe" exited normally.
14:22:18: Starting: "C:\QtCommercial\QtCommercial5.0.0\Tools\QtCreator\bin\jom.exe" 
    C:\QtCommercial\QtCommercial5.0.0\Tools\QtCreator\bin\jom.exe -f Makefile.Release
    C:\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\bin\uic.exe ..\snmpTest5\mainwindow.ui -o ui_mainwindow.h
    cl -c -nologo -Zm200 -Zc:wchar_t -O2 -MD -GR -W3 -w34100 -w34189 -EHsc -DUNICODE -DWIN32 -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -I"..\..\..\..\snmp\include" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtWidgets" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtGui" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtCore" -I"release" -I"." -I"." -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\mkspecs\win32-msvc2010" -Forelease\ @C:\Users\Furby\AppData\Local\Temp\main.obj.4600.31.jom
    C:\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\bin\moc.exe -DUNICODE -DWIN32 -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -I"..\..\..\..\snmp\include" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtWidgets" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtGui" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtCore" -I"release" -I"." -I"." -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\mkspecs\win32-msvc2010" -D_MSC_VER=1600 -DWIN32 ..\snmpTest5\mainwindow.h -o release\moc_mainwindow.cpp
    cl -c -nologo -Zm200 -Zc:wchar_t -O2 -MD -GR -W3 -w34100 -w34189 -EHsc -DUNICODE -DWIN32 -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -I"..\..\..\..\snmp\include" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtWidgets" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtGui" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtCore" -I"release" -I"." -I"." -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\mkspecs\win32-msvc2010" -Forelease\ @C:\Users\Furby\AppData\Local\Temp\mainwindow.obj.4600.124.jom
mainwindow.cpp
main.cpp
    cl -c -nologo -Zm200 -Zc:wchar_t -O2 -MD -GR -W3 -w34100 -w34189 -EHsc -DUNICODE -DWIN32 -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_OPENGL_ES_2 -DQT_OPENGL_ES_2_ANGLE -I"..\..\..\..\snmp\include" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtWidgets" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtGui" -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\include\QtCore" -I"release" -I"." -I"." -I"..\..\..\..\QtCommercial\QtCommercial5.0.0\5.0.0\msvc2010\mkspecs\win32-msvc2010" -Forelease\ @C:\Users\Furby\AppData\Local\Temp\moc_mainwindow.obj.4600.312.jom
moc_mainwindow.cpp
..\snmpTest5\mainwindow.cpp(36) : warning C4996: 'strdup': The POSIX name for this item is deprecated. Instead, use the ISO C++ conformant name: _strdup. See online help for details.
        C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\INCLUDE\string.h(238) : see declaration of 'strdup'
..\snmpTest5\mainwindow.cpp(32) : warning C4189: 'count' : local variable is initialized but not referenced
..\snmpTest5\mainwindow.cpp(25) : warning C4101: 'response' : unreferenced local variable
..\snmpTest5\mainwindow.cpp(28) : warning C4101: 'anOID_len' : unreferenced local variable
..\snmpTest5\mainwindow.cpp(27) : warning C4101: 'anOID' : unreferenced local variable
..\snmpTest5\mainwindow.cpp(31) : warning C4101: 'status' : unreferenced local variable
..\snmpTest5\mainwindow.cpp(24) : warning C4101: 'pdu' : unreferenced local variable
..\snmpTest5\mainwindow.cpp(23) : warning C4101: 'ss' : unreferenced local variable
..\snmpTest5\mainwindow.cpp(30) : warning C4101: 'vars' : unreferenced local variable
    link /NOLOGO /DYNAMICBASE /NXCOMPAT /INCREMENTAL:NO /SUBSYSTEM:WINDOWS "/MANIFESTDEPENDENCY:type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' publicKeyToken='6595b64144ccf1df' language='*' processorArchitecture='*'" /MANIFEST /MANIFESTFILE:release\snmpTest5.exe.embed.manifest /OUT:release\snmpTest5.exe @C:\Users\Furby\AppData\Local\Temp\snmpTest5.exe.4600.2979.jom
    mt.exe /nologo /manifest release\snmpTest5.exe.embed.manifest /outputresource:release\snmpTest5.exe;1
14:22:28: The process "C:\QtCommercial\QtCommercial5.0.0\Tools\QtCreator\bin\jom.exe" exited normally. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:52:41.710

也许您已经设置了共享库路径。如果所需的库不在 PATH（在 Windows 中）环境变量或 LD_LIBRARY_PATH（在 linux 中）或 DYLD_LIBRARY_PATH（在 Mac osx 中 - 不鼓励使用，但不用于开发，则应用程序将无法在 Qt Creator 中加载，而不会发出通知。[看这里](https://stackoverflow.com/questions/3146274/is-it-ok-to-use-dyld-library-path-on-mac-os-x-and-whats-the-dynamic-library-s))

## 要在 Windows 中进行测试：

检查是否可以从命令行运行 \snmpTest5.exe。如果没有，则使用命令提示符：

设置 PATH=%PATH%,

然后再次运行：\snmpTest5.exe

# websphere - 使用 JMX 客户端连接到 WebSphere JVM

> ID：14773631
> 
> 赞同：2
> 
> 时间：2013-02-08T13:28:00.677
> 
> 标签：websphere, jmx

如何通过 JMX 客户端连接到 WebSphere JVM？可以使用 JMX 客户端连接到 WebSphere JVM 以更改日志记录设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:22:09.193

基本上，您必须使用一些特定于 Websphere 的 jar 才能使用 JMX 客户端连接到 WAS。您可以按照[本文](http://blog.monitis.com/index.php/2012/09/12/configuring-jmx-in-websphere-8-5/)进行配置。

# xna - HLSL 3 可以单独声明像素着色器吗？

> ID：14773640
> 
> 赞同：3
> 
> 时间：2013-02-08T13:28:36.530
> 
> 标签：xna, shader, hlsl

我被要求将以下问题拆分为多个问题：

[HLSL 和 Pix 问题数](https://stackoverflow.com/questions/14763278/hlsl-and-pix-number-of-questions)

这是问第一个问题，我可以在 HLSL 3 中运行没有顶点着色器的像素着色器吗？在 HLSL 2 中，我注意到您可以，但我似乎无法在 3 中找到方法？

着色器可以正常编译，但是当调用 SpriteBatch Draw() 时，我会从 Visual Studio 收到此错误。

“不能将着色器模型 3.0 与早期的着色器模型混合。如果顶点着色器或像素着色器编译为 3.0，则它们都必须是。”

我不相信我已经在着色器中定义了任何在 3 之前使用的东西。所以我有点困惑。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T04:36:54.383

问题是内置`SpriteBatch`着色器是2.0。如果仅指定像素着色器，`SpriteBatch`仍会使用其内置的顶点着色器。因此版本不匹配。

那么，解决方案是自己也指定一个顶点着色器。幸运的是，Microsoft 提供了[XNA 内置着色器的源代码](http://xbox.create.msdn.com/en-US/education/catalog/sample/stock_effects)。它所涉及的只是矩阵变换。这是代码，已修改，因此您可以直接使用它：

```
float4x4 MatrixTransform;

void SpriteVertexShader(inout float4 color    : COLOR0,
                        inout float2 texCoord : TEXCOORD0,
                        inout float4 position : SV_Position)
{
    position = mul(position, MatrixTransform);
} 
```

然后 - 因为`SpriteBatch`不会为你设置它 -`MatrixTransform`正确设置你的效果。这是“客户”空间的简单投影（来自[这篇博](http://blogs.msdn.com/b/shawnhar/archive/2010/04/05/spritebatch-and-custom-shaders-in-xna-game-studio-4-0.aspx)文）。这是代码：

```
Matrix projection = Matrix.CreateOrthographicOffCenter(0, 
        GraphicsDevice.Viewport.Width, GraphicsDevice.Viewport.Height, 0, 0, 1);
Matrix halfPixelOffset = Matrix.CreateTranslation(-0.5f, -0.5f, 0);
effect.Parameters["MatrixTransform"].SetValue(halfPixelOffset * projection); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-07-06T09:45:58.410

您可以尝试[这里](http://blog.josack.com/2011/07/my-first-2d-pixel-shaders-part-1.html)的简单示例。灰度着色器是了解最小像素着色器如何工作的一个很好的例子。

基本上，您在内容项目下创建一个效果，如下所示：

```
sampler s0;

float4 PixelShaderFunction(float2 coords: TEXCOORD0) : COLOR0
{
    // B/N
    //float4 color = tex2D(s0, coords);
    //color.gb = color.r;

    // Transparent
    float4 color = tex2D(s0, coords);
    return color;
}

technique Technique1
{
    pass Pass1
    {
        PixelShader = compile ps_2_0 PixelShaderFunction();
    }
} 
```

您还需要：

1.  创建一个 Effect 对象并加载其内容。

    ambienceEffect = Content.Load("效果/环境");

2.  调用您的 SpriteBatch.Begin() 方法传递您要使用的效果对象

    spriteBatch.Begin(SpriteSortMode.FrontToBack, BlendState.AlphaBlend, null, null, null, ambienceEffect, camera2d.GetTransformation());

3.  在 SpriteBatch.Begin() - SpriteBatch.End() 块内，您必须在效果内调用技术

    ambienceEffect.CurrentTechnique.Passes[0].Apply();

# javascript - 使用 JavaScript RegEx 匹配字节顺序标记 (BOM)

> ID：14773641
> 
> 赞同：5
> 
> 时间：2013-02-08T13:28:39.000
> 
> 标签：javascript, regex, node.js

有没有一种简单的方法可以使用 JavaScript 正则表达式来匹配 BOM？我想构建一个在 Node.js 中执行此操作的实用程序，但以下内容似乎与任何内容都不匹配：

```
fixBomFiles : function(offendingFiles) {
    var i = 0,
        file, js;

    for (i=0; i < offendingFiles.length; i++) {
        file = offendingFiles[i];
        js = this.parent.fs.readFileSync(file, 'utf8');

        js = js.replace(/\uFEFF/g, '');

        this.parent.fs.writeFileSync(file, js, 'utf8');
    }
} 
```

有任何想法吗？我猜我的正则表达式不好，或者我不应该使用 UTF-8 编码进行读/写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:42:33.997

Derp ... RegEx 很好。我的脚本没有正确加载“offendingFiles”。

# java - 使用反射获取字段的初始化值

> ID：14773642
> 
> 赞同：2
> 
> 时间：2013-02-08T13:28:39.233
> 
> 标签：java, reflection, initialization, field

```
public class MyClass {
    private String s = "foo";
} 
```

是否可以`"foo"`使用反射而不必实例化一个新的`MyClass`？

```
Field field = MyClass.class.getDeclaredField("s");
// -- ideally: --
// Object initializationValue = field.getInitializationValue();
// assert initializationValue.equals("foo"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:31:41.423

您所展示的初始化语句实际上已由编译器移入类的构造函数中。您需要实际实例化一个类才能执行它们。当然，这一切都在幕后。但是在回答你的问题时，不，你不能，无论如何都不能反思。

但是您可以使用 Soot 等静态分析工具确定这些字段值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:03:40.473

没有“作弊”是不可能的。

一种作弊可能是编写（或生成）一个创建新`MyClass`实例的类，并使用反射挖掘出您想要的值并将其写入标准输出。然后你启动一个子JVM来运行那个类，并在当前读取它。

净结果 - 您在没有`MyClass` *在当前 JVM 中*实例化的情况下获得了值。

另一个欺骗是使用字节码库从`MyClass`“.class”文件中读取字节码，并在当前 JVM 的上下文中*模拟*初始化程序的执行。`MyClass`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-21T01:13:12.450

[ClassGraph](https://github.com/classgraph/classgraph/)可以这样做：

```
String clsName = "com.xyz.MyClass";
String s;
try (ScanResult scanResult =
        new ClassGraph().whitelistClasses(clsName).enableFieldInfo().scan()) {
    s = (String) scanResult.getClassInfo(clsName).getFieldInfo("s")
            .getConstantInitializerValue();
} 
```

注意这仅适用于*常量初始化器值*（可以在没有对象实例化的情况下计算的值，除了`String`），分配给*静态最终字段*。编译器可以在编译时为简单的算术和简单的字符串连接生成一个常量。

（免责声明，我是ClassGraph的作者）

如果你不介意加载类，你也可以简单地使用反射来访问静态字段：[https ://stackoverflow.com/a/4076792/3950982](https://stackoverflow.com/a/4076792/3950982)

# c# - c# 检查事件是否为空

> ID：14773643
> 
> 赞同：-2
> 
> 时间：2013-02-08T13:28:42.527
> 
> 标签：c#, events, null

我在网络服务中有这个事件：

```
public event FindProductsByCharacteristicsCompletedEventHandler FindProductsByCharacteristicsCompleted
    {
        [MethodImpl(MethodImplOptions.Synchronized)]
        add
        {
            _findProductsByCharacteristicsCompleted += value;
        }
        [MethodImpl(MethodImplOptions.Synchronized)]
        remove
        {
            _findProductsByCharacteristicsCompleted -= value;
        }
    } 
```

然后我在类的后面用这个检查事件值是否为空：

```
private void OnFindProductsByCharacteristicsOperationCompleted(object arg)
    {
        var handler = _findProductsByCharacteristicsCompleted;
        if (handler == null)
            return;
        handler(this, new FindProductsByCharacteristicsCompletedEventArgs(completedEventArgs.Results, completedEventArgs.Error, completedEventArgs.Cancelled, completedEventArgs.UserState));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:30:24.127

您的事件实现看起来像是一个无休止的递归。您在其实现中使用该属性本身。
将其更改为：

```
private FindProductsByCharacteristicsCompletedEventHandler
            _findProductsByCharacteristicsCompleted;

public event FindProductsByCharacteristicsCompletedEventHandler
                 FindProductsByCharacteristicsCompleted 
{
    [MethodImpl(MethodImplOptions.Synchronized)]
    add
    {
        _findProductsByCharacteristicsCompleted += value;
    }
    [MethodImpl(MethodImplOptions.Synchronized)]
    remove
    {
        _findProductsByCharacteristicsCompleted -= value;
    }
} 
```

现在，像这样实现你的方法：

```
var handler = _findProductsByCharacteristicsCompleted;
if(handler == null)
    return;

handler(this, new FindProductsByCharacteristicsCompletedEventArgs(...)); 
```

这具有线程安全的优点。

即使有人在您检查 null 之后但在您实际引发事件之前从事件中分离了最后一个处理程序，您也不会收到异常，因为您正在对未更改的局部变量进行操作。

# android - Android webview缩放问题

> ID：14773645
> 
> 赞同：2
> 
> 时间：2013-02-08T13:28:49.357
> 
> 标签：android, android-webview, viewport, autoscaling

我有一个`Grid View`（`WebView`Android），需要确定可以在屏幕上显示的项目数量。我需要将此号码发送到服务器以从服务器检索这些许多项目。当我在我的活动中查询屏幕尺寸时，它返回**宽度：800**和**高度：522**（横向）。但是当从javascript中查询宽度时，返回的宽度是1063。我已经为`Viewport`.

```
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" /> 
```

由于这两个值不同，它会扰乱我的计算。显示的`WebView`项目比我对每个项目的计算要多。

有人可以指出我在搞砸什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:02:20.147

您需要通过在 webview 上使用 setInitialScale 将 webview 映射到屏幕布局。

初始比例以 % 定义，因此您需要指定如下内容

```
int scalingFactor = ((float)800/(float)1063)*100

mPageWeb.setInitialScale(scalingFactor); 
```

我希望这能解决你的问题。

# javascript - insertAfter() 通过加倍追加

> ID：14773649
> 
> 赞同：4
> 
> 时间：2013-02-08T13:28:54.897
> 
> 标签：javascript, jquery, html

我试图`tr`在一些 certian 之后追加`tr`，我使用这个代码。但它是通过加倍附加的，第一次只有 1，第二次 2 和第三次 6 ......有人可以帮我找出导致这个问题的地方吗？我只想`tr`每次点击添加一个。

```
function einfugen(){
  $('#append_tr').bind('click', function(){
    $('<tr><td>new td</td></tr>').insertAfter('#append_tr');
  });
}

<tr id="append_tr"> some data </td> 
```

**编辑**：这是我的绑定代码：

```
<tr id="append_tr"><td> <a onclick="einfugen()"> + add </a> </td></tr> 
```

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:31:22.753

您可能会多次调用该函数。

不要使用`bind`和使用`on`（jQuery 1.7）：

```
$('#append_tr').on('click', function(){
    $('<tr><td>new td</td></tr>').insertAfter('#append_tr');
}); 
```

[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

从您的编辑：

```
 <a onclick="einfugen()"> 
```

是问题。每次单击链接时，您都在重新绑定事件处理程序。

使用以下结构，您可以执行以下操作：

```
$("#append_tr").click(function() {
   $("#table").append("<tr><td>New row!</td></tr>");
}); 
```

[http://jsfiddle.net/mBNbZ/](http://jsfiddle.net/mBNbZ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:35:05.457

您的`einfugen()`函数声明了单击处理程序，并从此处的单击事件中调用它：

```
<tr id="append_tr"><td> <a onclick="einfugen()"> + add </a> </td></tr> 
```

单击它的次数越多，附加的单击处理程序就越多。您可以做的是删除`einfugen()`函数声明，而是将内容移动到 DOM 就绪函数中：

```
$(function() {
    $('#append_tr').on('click', function(){
    $('<tr><td>new td</td></tr>').insertAfter('#append_tr');
  });
}); 
```

在那里注册点击处理程序消除了对内联`onclick`处理程序代码的需要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T13:30:18.367

听起来你`einfugen`不止一次打电话。如果您只调用一次，它将起作用（[Demo](http://jsfiddle.net/xpeW7/)）。

**编辑：**从您的更新来看，是的，每次单击“添加”链接时，您都会绑定一个侦听器。您将触发一个在 中合理*的动作*`onclick`与*绑定侦听器以触发给定事件*混淆了。

运行时您`insertAfter`没有`einfugen`运行。`einfugen`只需添加一个侦听器，该侦听器指示该代码在单击发生时运行。因此，最初可以进行一次呼叫，然后您的听众将永远在那里。它不应该在每次点击时添加。

您最初可以像这样绑定侦听器：

```
$(function() {
  $('#append_tr').bind('click', function(){
    $('<tr><td>new td</td></tr>').insertAfter('#append_tr');
  });
}); 
```

Where`$(function() { ... });`是在 上运行函数的简写`DOMReady`，即只要保证所有 DOM 节点都可以被脚本访问。

[演示](http://jsfiddle.net/fzjZN/)。

# python - 如何拆分每张纸上包含多个逻辑页面的pdf文档？

> ID：14773650
> 
> 赞同：1
> 
> 时间：2013-02-08T13:28:59.657
> 
> 标签：python, pdf, pypdf

我想将 2x2 pdf 文档拆分为其原始页面。每个页面由四个逻辑页面组成，这些逻辑页面的排列方式如[本](http://rainnic.altervista.org/sites/default/files/styles/large/public/images/4_slide_orizzontali_2.jpg)例所示。

我正在尝试使用`python`和`pypdf`：

```
import copy, sys
from pyPdf import PdfFileWriter, PdfFileReader

def ifel(condition, trueVal, falseVal):
    if condition:
        return trueVal
    else:
        return falseVal

input  = PdfFileReader(file(sys.argv[1], "rb"))
output = PdfFileWriter()

for p in [input.getPage(i) for i in range(0,input.getNumPages())]:
    (w, h) = p.mediaBox.upperRight

    for j in range(0,4):
        t = copy.copy(p)        
        t.mediaBox.lowerLeft  = (ifel(j%2==1, w/2, 0), ifel(j<2, h/2, 0))
        t.mediaBox.upperRight = (ifel(j%2==0, w/2, w), ifel(j>1, h/2, h))
        output.addPage(t)

output.write(file("out.pdf", "wb")) 
```

不幸的是，这个脚本没有按预期工作，因为它每四个逻辑页输出四次。由于我之前没有用python写过任何东西，我认为这是一个非常基本的问题，大概是由于复制操作。我真的很感激任何帮助。

* * *

**编辑**：嗯，我做了一些实验。我手动插入了页面宽度和高度，如下所示：

```
import copy, sys
from pyPdf import PdfFileWriter, PdfFileReader

def ifel(condition, trueVal, falseVal):
    if condition:
        return trueVal
    else:
        return falseVal

input  = PdfFileReader(file(sys.argv[1], "rb"))
output = PdfFileWriter()

for p in [input.getPage(i) for i in range(0,input.getNumPages())]:
    (w, h) = p.mediaBox.upperRight

    for j in range(0,4):
        t = copy.copy(p)        
        t.mediaBox.lowerLeft  = (ifel(j%2==1, 841/2, 0),   ifel(j<2, 595/2, 0))
        t.mediaBox.upperRight = (ifel(j%2==0, 841/2, 841), ifel(j>1, 595/2, 595))
        output.addPage(t)

output.write(file("out.pdf", "wb")) 
```

此代码导致与我原来的相同的**错误结果，****但**如果我现在注释掉该行`(w, h) = p.mediaBox.upperRight`，一切正常！我找不到任何理由。元组`(w, h)`甚至不再使用，那么删除它的定义如何改变任何东西呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T10:12:58.747

我怀疑问题在于 mediaBox 只是一个变量的魔术访问器，在 p 和所有副本 t 之间共享。因此，分配 to`t.mediaBox`将导致 mediaBox 在所有四个副本中具有相同的坐标。

mediaBox 字段后面的变量是在第一次访问 mediaBox 时延迟创建的，因此如果您注释掉该行`(w, h) = p.mediaBox.upperRight`，则会为每个 t 单独创建 mediaBox 变量。

自动确定页面尺寸的两种可能解决方案：

1.  制作副本后获取尺寸：

    ```
    for p in [input.getPage(i) for i in range(0,input.getNumPages())]:

        for j in range(0,4):
            t = copy.copy(p)       
            (w, h) = t.mediaBox.upperRight
            t.mediaBox.lowerLeft  = (ifel(j%2==1, w/2, 0),   ifel(j<2, h/2, 0))
            t.mediaBox.upperRight = (ifel(j%2==0, w/2, w), ifel(j>1, h/2, h))
            output.addPage(t) 
    ```

2.  实例化新的 RectangleObjects 以用于 mediaBox 变量

    ```
    for p in [input.getPage(i) for i in range(0,input.getNumPages())]:
        (w, h) = p.mediaBox.upperRight

        for j in range(0,4):
            t = copy.copy(p)        
            t.mediaBox.lowerLeft  = pyPdf.generic.RectangleObject(
                                        ifel(j%2==1, w/2, 0),   
                                        ifel(j<2, h/2, 0),
                                        ifel(j%2==0, w/2, w), 
                                        ifel(j>1, h/2, h))
            output.addPage(t) 
    ```

使用`copy.deepcopy()`会导致大型复杂 PDF 的内存问题，

# google-maps - 融合表地图视图

> ID：14773654
> 
> 赞同：0
> 
> 时间：2013-02-08T13:29:11.120
> 
> 标签：google-maps, view, google-fusion-tables

[Kathryn Hurley 的文章https://developers.google.com/fusiontables/docs/articles/data_gathering](https://developers.google.com/fusiontables/docs/articles/data_gathering)给我留下了深刻的印象，我需要在融合表地图视图中使用相同类型的应用程序。也就是说，我创建了一个表 ID=xxxxx 的融合表层，其中将插入来自多个源的数据。是否可以为只能在地图中查看其数据集的不同数据提供者创建过滤视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:07:59.623

[这是google maps doc](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)提供的 fusiontable 图层查询示例

```
var layer = new google.maps.FusionTablesLayer({
  query: {
   select: 'address',
   from: '1d7qpn60tAvG4LEg4jvClZbc1ggp8fIGGvpMGzA',
   where: 'ridership > 5000'
  }
}); 
```

您可以通过不同的方法或不同的地图对同一个 fusiontable 图层进行不同的查询。

# xml - 使用 PL/SQL 解析 XML 输出 html 中特定标签的内容

> ID：14773655
> 
> 赞同：0
> 
> 时间：2013-02-08T13:29:13.383
> 
> 标签：xml, plsql, xml-parsing

我目前在使用 PL/SQL 解析一些 XML 时遇到问题。本质上，我有一些 XML 存储在现有函数提供的 clob 变量中。我创建了一个新的 xmltype 变量，用于将 clob 转换为 xmltype。然后我循环遍历这个新的 xmltype 变量的内容，试图提取每个标签的内容并将其输出到自己的 div 中。然而，我的代码目前只是将所有标签的内容输出到一个 div 中，这给人的印象是它根本没有循环。

XML 结构是（显然嵌套了更多的内部标签作为回报）：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <results>
       <return>
          <createDate> Date 1 Here </createDate>
          <description> Description 1 here </description>
       </return>
       <return>
          <createDate> Date 2 Here </createDate>
          <description> Description 2 here </description>
       </return>
    </results> 
```

我用来循环的PLSQL可以在这里找到：

```
 -- parsing : Parse the xml and wrap description content in a html div
        l_html_build := '<!DOCTYPE html><html><head></head><body>';
        l_parse_xml := (xmltype(l_xml_response));
        l_parse_xml_index := 1;
  while l_parse_xml.existsNode('//description[' || To_Char(l_parse_xml_index) || ']') > 0 
     loop
        l_html_build := l_html_build || '<div class="description">';
        l_html_build := l_html_build || (xmltype(l_xml_response).extract('//description[' || To_Char(l_parse_xml_index) 
        || ']/text()').getclobval());
        l_html_build := l_html_build || '</div>';
        l_html_build := replace(l_html_build,'&lt;','<');
        l_html_build := replace(l_html_build,'&gt;','>');
        l_html_build := replace(l_html_build,'&amp;lt;','');
        l_html_build := replace(l_html_build,'&amp;gt;','');
        l_html_build := replace(l_html_build,'&amp;nbsp;','&nbsp;');
        l_html_build := l_html_build ||'</body></html>';
        l_parse_xml_index := l_parse_xml_index + 1; 
     end loop; 
```

一些参数和变量的解释可以在下面找到：

```
 l_xml_response     clob;  -- XML from another function is stored here
    l_html_build        clob; -- Used as a variable to store the output to be sent to the page
    l_parse_xml        xmltype; -- l_xml_response content is passed into this xmltype variable which is used for parsing
    l_parse_xml_index  number; -- Used as an index to assist with looping through the tags 
```

输出如下：

```
 <div class = "description">
  Description 1 here Description 2 here
 </div> 
```

什么时候应该：

```
 <div class = "description">
  Description 1 here
 </div> 
 <div class = "description">
  Description 2 here
 </div> 
```

任何帮助都将不胜感激，因为我是一个 html/css/php/javascript 程序员，而且我以前没有真正做过 PL/SQL（而且我的老板并没有真正提供任何没有帮助的真正培训） .

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:03:36.697

这似乎比 jme1988 的解决方案效率高出大约一个数量级 - 至少在具有约 1000`return`条记录的玩具示例上。显然我不能说这种方法将如何扩展到您将使用的数据量（但是，它应该可以很好地扩展）。

```
DECLARE
   l_c CLOB;
BEGIN
   l_html_build   := '<!DOCTYPE html><html><head></head><body>';
   l_parse_xml    := xmltype(l_xml_response);
   --
   BEGIN
      WITH xdata AS
         (
            SELECT xmltype ( l_xml_response )   xml
              from dual
         )
    SELECT XMLSERIALIZE ( CONTENT extract(xml, '//description') )  x
      INTO l_c
      FROM xdata
         ;
   END;
   l_html_build := l_html_build || l_c;
   --
   l_html_build := replace(l_html_build,'<description', '<div class="description"');
   l_html_build := replace(l_html_build,'</description>', '</div>');
   l_html_build := replace(l_html_build,'&amp;lt;','&lt;');
   l_html_build := replace(l_html_build,'&amp;gt;','&gt;');
   l_html_build := replace(l_html_build,'&amp;nbsp;','&nbsp;');
   l_html_build := l_html_build ||'</body></html>';
END; 
```

希望这些东西能满足你的需求。问候，卡斯滕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:18:30.127

A_horse_with_no_name 的建议是正确的，但是更有效的方法是：

```
 begin
          for value_set_rec in 
            (select extract(value(x),'/description/text()').getclobval() l_description
                 from table(xmlsequence(xmltype(l_xml_response).extract('//description')))x) 
            loop
              l_html_build := l_html_build || '<div class="description">';
              l_html_build := l_html_build || value_set_rec.l_description;
              l_html_build := l_html_build || '</div>';     
            end loop;

            exception
                when others then
                     --Error handling here
      end;    

        l_html_build := replace(l_html_build,'&lt;','<');
        l_html_build := replace(l_html_build,'&gt;','>');
        l_html_build := replace(l_html_build,'&amp;lt;','');
        l_html_build := replace(l_html_build,'&amp;gt;','');
        l_html_build := replace(l_html_build,'&amp;nbsp;','&nbsp;');
        l_html_build := l_html_build ||'</body></html>'; 
```

# javascript - .htaccess 问题

> ID：14773658
> 
> 赞同：0
> 
> 时间：2013-02-08T13:29:28.823
> 
> 标签：javascript, hosting, mime

我最近建立了一个带有完整背景视频的网站，但是在 Firefox 或 IE 中运行时它不能在线工作（离线很好）。它适用于 chrome，但对于 IE 或 Firefox，我只有白色背景。Firefox 吐出这个错误

不支持“text/plain”的 HTTP“Content-Type”。加载媒体资源[http://www.sweetsunnyvibes.com/assets/christmas_snow.webm](http://www.sweetsunnyvibes.com/assets/christmas_snow.webm)失败。

因此，我创建了一个文本文件，将其重命名为 .htaccess，并将这三行粘贴在那里。本文档中没有其他内容。该文档位于网站的根文件夹中，位于 index.html 旁边，位于包含视频的“资产”文件夹的上方。

```
AddType video/webm .webm
AddType video/ogg .ogv
AddType video/mp4 .mp4 
```

依然没有。难道我做错了什么？

还有一个奇怪的错误，音量静音控件（绑定到 HTML5 音频播放器）在 firefox 上不起作用，但在 IE 和 GC 上工作正常。它们由如下功能控制：

```
function muteCheck() {
        var audioElm = document.getElementById('player');
        audioElm.muted = !audioElm.muted;
    }; 
```

如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:47:32.597

该错误是由服务器声称该文件包含纯文本引起的。

`.htaccess`更改没有做任何事情，因此以下一项或多项可能是正确的：

*   服务器不支持 .htaccess
*   您不允许使用 .htaccess
*   您可以使用 .htaccess 但尚未通过某些控制面板启用支持
*   服务器无法识别 AddType 指令
*   你给文件的名字错误

# ios - IOS 6.1 游戏中心自动匹配卡住

> ID：14773659
> 
> 赞同：1
> 
> 时间：2013-02-08T13:29:30.443
> 
> 标签：ios, ios6, game-center

在我的游戏中，我使用自动匹配。它非常适合 IOS 5.0，但对于 IOS 6.1，我无法连接。配对处理卡在**“正在连接...”**

这是代码：

```
- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers
                 viewController:(UIViewController *)viewController
                       delegate:(id<GCHelperDelegate>)theDelegate {
    GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
    request.minPlayers = minPlayers;
    request.maxPlayers = maxPlayers;

    GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
    mmvc.matchmakerDelegate = self;

    self.presentingViewController = viewController;
    [presentingViewController presentModalViewController:mmvc animated:YES];

}

#pragma mark GKMatchmakerViewControllerDelegate
// The user has cancelled matchmaking
- (void)matchmakerViewControllerWasCancelled:(GKMatchmakerViewController *)viewController {
    [presentingViewController dismissModalViewControllerAnimated:YES];
}

// Matchmaking has failed with an error
- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFailWithError:(NSError *)error {
    [presentingViewController dismissModalViewControllerAnimated:YES];
    NSLog(@"Error finding match: %@", error.localizedDescription);
}

// A peer-to-peer match has been found, the game should start
- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)theMatch {
    [presentingViewController dismissModalViewControllerAnimated:YES];
    //self.match = theMatch;
    //match.delegate = self;
    //if (!matchStarted && match.expectedPlayerCount == 0) {
        NSLog(@"Ready to start match!");
    //}
} 
```

--------请再次注意，这在 IOS 5 中完美运行----------

# c# - 捕获完全意外的错误

> ID：14773662
> 
> 赞同：2
> 
> 时间：2013-02-08T13:29:44.990
> 
> 标签：c#, visual-studio-2010, visual-studio, error-handling, runtime-error

我有一个 ErrorRecorder 应用程序，它打印错误报告并询问用户是否想将该报告发送给我。

然后，我有主应用程序。如果发生错误，它将错误报告写入文件并要求 ErrorRecorder 打开该文件以向用户显示错误报告。

所以我使用 Try/Catch 来捕捉我的大部分错误。

但是，如果发生完全出乎意料的错误并关闭我的程序怎么办。

是否有像 Global/Override 方法或类似的东西，它告诉程序“如果发生意外错误，在关闭之前，调用“ErrorRecorderView()”方法”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:32:11.463

我认为这就是你所追求的——你可以在 appdomain 级别处理异常——即在整个程序中。
[http://msdn.microsoft.com/en-GB/library/system.appdomain.unhandledexception.aspx](http://msdn.microsoft.com/en-GB/library/system.appdomain.unhandledexception.aspx)

```
using System;
using System.Security.Permissions;

public class Test
{

[SecurityPermission(SecurityAction.Demand, Flags = SecurityPermissionFlag.ControlAppDomain)]
public static void Example()
{
    AppDomain currentDomain = AppDomain.CurrentDomain;
    currentDomain.UnhandledException += new UnhandledExceptionEventHandler(MyHandler);

    try
    {
        throw new Exception("1");
    }
    catch (Exception e)
    {
        Console.WriteLine("Catch clause caught : " + e.Message);
    }

    throw new Exception("2");

    // Output: 
    //   Catch clause caught : 1 
    //   MyHandler caught : 2
}

static void MyHandler(object sender, UnhandledExceptionEventArgs args)
{
    Exception e = (Exception)args.ExceptionObject;
    Console.WriteLine("MyHandler caught : " + e.Message);
}

public static void Main()
{
    Example();
} 
```

}

# html - 设置在显示中可见的元素：无

> ID：14773665
> 
> 赞同：1
> 
> 时间：2013-02-08T13:29:50.417
> 
> 标签：html, css

我想在一个`display:none`块中获取一个元素，有可能吗？

例如：

```
<div style="display:none" >
    <h2>hi all</h2>
    <p>abc</p>
</div> 
```

我想显示`h2`将父母保留`div`在`display:none`.

有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:37:56.513

你不能。`display: none`根据定义，不显示元素的所有后代元素。引用[CSS 规范](http://www.w3.org/TR/CSS2/visuren.html#display-prop)：

> ## 9.2.4 “显示”属性
> 
> ### 没有任何
> 
> 该值导致元素不出现在格式化结构中（即，在视觉媒体中，元素不生成框并且对布局没有影响）。**后代元素也不生成任何框**；元素及其内容完全从格式化结构中删除。**不能通过在后代上设置 'display' 属性来覆盖此行为。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:38:09.947

使用您当前的 HTML 是不可能的。最好的做法是类似于以下内容

```
<div>
    <h2>hi all</h2>
    <div style="display: none;">
        <p>abc</p>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:11:48.980

如果您需要检索一些隐藏的值，您可以使用 JavaScript。`id`只需为您的元素添加一个独特的并检索它的值。这是一个jQuery方式（没有任何`document.ready()`东西）：

```
<div style="display:none" >
  <h2 id="show_me">hi all</h2>
  <p>abc</p>
</div>

<script>
  element = $('#show_me').html();
  alert(element)

  //Plain JS way would be something like this.
  element_js = document.getElementById('show_me').innerHTML;
  alert(element_js)
</script> 
```

您本身并没有显示检索到的元素，但至少您能够显示它的内容并使用它做任何您喜欢的事情。*实际上，我认为这将是获取*隐藏元素最接近的方法。

# python - 在 Python 中检测和控制自闭合 xml 元素的创建？

> ID：14773668
> 
> 赞同：2
> 
> 时间：2013-02-08T13:30:03.020
> 
> 标签：python, xml, elementtree

也许我忽略了，但我没有在[文档](http://docs.python.org/2.7/library/xml.etree.elementtree.html)中找到这个。

在 Python 的 ElementTree 中解析 xml 时，如何检测元素|标签|节点是否`self-closing`（或未配对，即以 结尾`/>`）？

创建 xml 文件时，如何明确说明我是支持`self-closing`( `/>`) 还是`explicitly closed`(ie. `</example>`) xml 标记？

如果 ElementTree 没有，其他 python 解析器会更好地处理这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-01-27T17:12:03.767

此问题已在 2014 年 3 月由 python 3.4 解决。它将[`short_empty_elements`](https://docs.python.org/3.4/library/xml.etree.elementtree.html#xml.etree.ElementTree.tostring)参数添加到`ElementTree`.

```
>>> from xml.etree import ElementTree as ET
>>> msg = ET.Element('msg',{'x': 'y'})
>>> ET.tostring(msg)
b'<msg x="y" />'
>>> ET.tostring(msg, short_empty_elements=False)
b'<msg x="y"></msg>' 
```

# vb.net - 如何将 CLIPS.net 库集成到 VB 2010 中？

> ID：14773680
> 
> 赞同：0
> 
> 时间：2013-02-08T13:31:04.983
> 
> 标签：vb.net, clips

我正在使用 VB.net 2010 制作专家系统 我已经在 CLIPS.NET 中下载了 Mommosoft.ExpertSystem.dll 假设我已经使用 CLIPS 制作了基于知识的文件，如何将其集成到 VB.NET？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:38:23.910

在 Visual Studio 中，您右键单击解决方案文件 > 单击添加引用 > 添加 Mommosoft.ExpertSystem.dll

然后在您的 VB.Net 项目中，您将能够调用 DLL 中的方法，例如

```
Mommosoft.ExpertSystem.DoSomething() 
```

# entity-framework - 如何在 EF Code First 中修改事务行为

> ID：14773681
> 
> 赞同：0
> 
> 时间：2013-02-08T13:31:11.273
> 
> 标签：entity-framework

在 Code-First Entity Framework 中，有没有办法修改事务行为，使其不会丢弃所有更改，而是将所有更改保持到故障点？

例如：

```
foreach {var objectToSave in ArrayOfEntityObjects)
{
     MyContext.Insert(objectToSave);
}
try
{
     MyContext.SaveChanges();
}
catch (Exception x)
{
    //handling code
} 
```

在上面的示例中，假设数组是一个包含 100 个对象的数组，并且在第 50 项上发生了错误，我想保留那些成功的对象，至少到失败点为止。知道我们在 foreach 循环的每次迭代期间执行 MyContext.SaveChanges() 命令来执行此操作，但我们希望在一次提交中提交到数据库的性能提升（我们的理解是 EF 一次发送所有命令对于事务，通过单个连接，因此仅使用一次往返）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T00:42:59.587

No, there is no way to do this automatically. EF commits all changes in a single transaction, which means it's an all or nothing thing.

If you want this behavior, then you must save changes after each and every record you add.

The reason is that EF doesn't know what constitutes a "transaction" in your data. It might be one row, or it might be several rows in several tables. EF doesn't even try to understand what your transactional requirements might be. You have to do it manually if you want it.

# google-maps-api-3 - 如何在谷歌地图中画圈之前离开模式图

> ID：14773683
> 
> 赞同：0
> 
> 时间：2013-02-08T13:31:12.917
> 
> 标签：google-maps-api-3

我试图在绘制圆圈后离开模式绘图，我想隐藏控件绘图管理器并可以编辑圆圈但我不知道如何在绘制圆圈后进入模式，不要绘制和可以编辑圈子

```
<script type="text/javascript">
    function initialize() {

        var mapOptions = {
          center: new google.maps.LatLng(4.705, -74.113),
          zoom: 5,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);           

        var drawingManager = new google.maps.drawing.DrawingManager({
            drawingMode: google.maps.drawing.OverlayType.MARKER,
            drawingControl: true,
            drawingControlOptions: {
                position: google.maps.ControlPosition.TOP_CENTER,
                drawingModes: [
                  //google.maps.drawing.OverlayType.MARKER,
                  google.maps.drawing.OverlayType.CIRCLE,
                  google.maps.drawing.OverlayType.POLYGON,
                  //google.maps.drawing.OverlayType.POLYLINE,
                  //google.maps.drawing.OverlayType.RECTANGLE
                ]
            },
            //markerOptions: {icon: 'Images/marker_sprite.png'},

            circleOptions: {
                strokeColor: '#FF0000',
                fillColor: '#DF0101',
                fillOpacity: 0.3,
                strokeWeight: 2,
                editable:true
            },
            rectangleOptions: {
                  strokeColor: "#FF0000",
                  strokeWeight: 2,
                  fillColor: '#DF0101',
                  fillOpacity: 0.35,
                  editable:true
            },
            polygonOptions: {
                  strokeColor: "#FF0000",
                  strokeWeight: 2,
                  fillColor: '#DF0101',
                  fillOpacity: 0.35,
                  editable:true
            }  

        });// Cierre variable drawingManager

        drawingManager.setMap(map);

        // event handler for drawingManager shapes
        function setClickEvent(shape) {
             google.maps.event.addListener(shape, 'click', function(){
                //Colocar mensaje en Formato Dialgo UI
                if(confirm('Desea Eliminar El Punto de Control')){                      
                    shape.setMap(null);
                    drawingManager.setOptions({
                    drawingMode: google.maps.drawing.OverlayType.MARKER,
                    drawingControl: true,
                    drawingControlOptions: {
                        position: google.maps.ControlPosition.TOP_CENTER,
                        drawingModes: [
                            google.maps.drawing.OverlayType.CIRCLE,
                            google.maps.drawing.OverlayType.POLYGON
                        ]
                      }
                    });
                }
            });
        }

        google.maps.event.addListener(drawingManager,'circlecomplete', function(circle){
            radius = circle.getRadius();
            centro = circle.getCenter();
            document.getElementById("posicion").innerHTML=centro;
            document.getElementById("radio").innerHTML=radius;

            drawingManager.setOptions({
              drawingControl: false
            });

            google.maps.event.addListener(circle, 'radius_changed', function(){
                radius = circle.getRadius();
                document.getElementById("radio").innerHTML=radius;
            });

            google.maps.event.addListener(circle, 'center_changed', function(){
                centro = circle.getCenter();
                document.getElementById("posicion").innerHTML=centro;

            });

            //drawingManager.setOptions({ drawingControl: false });

            setClickEvent(circle);
        });
        /*

        google.maps.event.addListener(drawingManager, 'rectanglecomplete', function(Rectangle) {
            var vertices = Rectangle.getBounds();
            document.getElementById("posicion").innerHTML=vertices;

            setClickEvent(Rectangle);
        });
        */

        google.maps.event.addListener(drawingManager, 'polygoncomplete', function(Polygon) {
            var vertices = Polygon.getPath();
            var pocision="";
            for (var i=0; i < vertices.length; i++){
                var xy=vertices.getAt(i);
                pocision += "<br>"+ xy.lng() +" , " + xy.lat();
                document.getElementById("posicion").innerHTML=pocision;
            }

            google.maps.event.addListener(Polygon, 'mousedown', function() {
                google.maps.event.addListener(Polygon.getPath(), 'set_at', function() {
                    console.log('editando');
                    vertices=Polygon.getPath();
                    pocision="";
                    for (var i=0; i < vertices.length; i++){
                        var xy=vertices.getAt(i);
                        pocision += "<br>"+ xy.lng() +" , " + xy.lat();
                        document.getElementById("posicion_Final").innerHTML=pocision;
                    }
                });

            });

        });     

   }/* cierra  inittalize() */

  google.maps.event.addDomListener(window, 'load', initialize);

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:54:42.423

要使圆圈无法编辑，请将可编辑选项设置为 false：

```
 google.maps.event.addListener(drawingManager,'circlecomplete', function(circle){
        radius = circle.getRadius();
        centro = circle.getCenter();
        document.getElementById("posicion").innerHTML=centro;
        document.getElementById("radio").innerHTML=radius;

        circle.setOptions({editable:false}); // <-- **** add this line
        drawingManager.setOptions({
          drawingControl: false
        });

        google.maps.event.addListener(circle, 'radius_changed', function(){
            radius = circle.getRadius();
            document.getElementById("radio").innerHTML=radius;
        });

        google.maps.event.addListener(circle, 'center_changed', function(){
            centro = circle.getCenter();
            document.getElementById("posicion").innerHTML=centro;

        });

        setClickEvent(circle);
    }); 
```

# uml - 如何管理开源项目？

> ID：14773695
> 
> 赞同：0
> 
> 时间：2013-02-08T13:31:54.793
> 
> 标签：uml, scrum, methodology

实际上，我正在上软件工程课程，我们正在尝试学习制作好软件的步骤。我们正在谈论 UML、Scrum 等……我想知道如何管理开源项目（如 linux、firefox、apache、gnome ……）以及使用什么样的系统和方法来拥有一个好的软件?

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:52:53.760

一个快速的谷歌给了我这些简单的维基页面：

[开源软件开发](http://en.wikipedia.org/wiki/Open_source_software_development)

[Open_source_software_assessment_methodologies](http://en.wikipedia.org/wiki/Open_source_software_assessment_methodologies)

我想这会给你一个开始。我希望这可以帮助你。

# html - 如果必须相对定位，如何构建图像网格

> ID：14773696
> 
> 赞同：0
> 
> 时间：2013-02-08T13:31:57.837
> 
> 标签：html, css

我正在尝试构建图像网格。元素相对定位，因此浮动：left 似乎没有堆叠它们。有一个更好的方法吗？继承人的代码：

CSS：

```
#master {

    width: 940px;
    outline: solid 1px #000;

}

#img_grid1 h2 {

    font-family: Tahoma, Geneva, sans-serif;
    position: relative;
    font-size: 16px;
    top: 50px;
    left: 20px;
    color: #000;
    z-index: 20;
    width: 100px;
}

img.off {

    position: absolute;
    left: 0;
    top: 0;
    z-index: 10;

}

img.on {

    position: absolute;
    left:0; top: 0;

}

ul#img_grid1 { position: relative; }

ul#img_grid1 li {

    position: relative;
    list-style-type: none; 

}

.copy { 

    position: relative; 
    width: 200px; 
    top: 70px; 
    left: 40px;

}

.copy p { color: #FFF; }

/* slightly enhanced, universal clearfix hack */
.clearfix:after {
     visibility: hidden;
     display: block;
     font-size: 0;
     content: " ";
     clear: both;
     height: 0;
     }
.clearfix { display: inline-block; }
/* start commented backslash hack \*/
* html .clearfix { height: 1%; }
.clearfix { display: block; }
/* close commented backslash hack */ 
```

HTML：

```
<div id="master">

<br />

<ul id="img_grid1">

  <li><a href="#" style="text-decoration: none;"><img class="off" src="images/img1.jpg" alt=""/><img class="on" src="images/img1over.jpg" alt=""/><h2>Heading 1</h2><div class="copy"><p>Love walking? Check out our fantastic range of quality walking gear. Plus... find out more about our FREE boot fitting service or check our brand new gear guide.</p></div>
 </a></li>
 <li><a href="#" style="text-decoration: none;"><img class="off" src="images/img1.jpg" alt=""/><img class="on" src="images/img1over.jpg" alt=""/><h2>Heading 1</h2><div class="copy"><p>Love walking? Check out our fantastic range of quality walking gear. Plus... find out more about our FREE boot fitting service or check our brand new gear guide.</p></div>
 </a></li>

</ul> 
```

不确定它是否可能。我试过浮动元素，但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:35:18.013

排队`li`使用`display: inline-block;`

[**演示**](http://jsfiddle.net/ffU7S/)

CSS

```
ul {
    width: 1000px;
}

ul li {
    display: inline-block;
    margin: 10px;
    border: 1px solid #000;
} 
```

HTML

```
<ul>
    <li><img src="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" /></li>
    <li><img src="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" /></li>
    <li><img src="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" /></li>
</ul>
<ul>
    <li><img src="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" /></li>
    <li><img src="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" /></li>
    <li><img src="http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif" /></li>
</ul> 
```

# visual-studio-2010 - 团队基础服务器中的二进制文件

> ID：14773699
> 
> 赞同：1
> 
> 时间：2013-02-08T13:32:14.660
> 
> 标签：visual-studio-2010, tfs, repository, foxpro

我们最近切换到 Team Foundation Server 2010 进行源代码管理，一切正常，除了一些用 FoxPRO 7 和 9 编写的遗留代码外，源代码文件是某种表格。对于 Forms，有两种文件，一种以 .scx 结尾，另一种以 .sct 结尾，都可以使用 fox studio 进行探索，但无法在文本编辑器中打开它们。

有没有人有让狐狸代码在 TFS 上工作/合并的经验？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T14:17:13.363

我不知道源代码控制和 FoxPro 的所有细节，但如果某些源代码是二进制的，您可以配置文件扩展名以禁止合并。

右键单击 TeamExplorer 窗口中的集合（根节点）。转到团队项目集合设置 | 文件类型。

您应该能够添加扩展名（如 .sct），并指定这些文件不允许合并和多次签出。

缺点是一次只有 1 人可以检查这些文件，但由于表单是 FoxPro 表，我想这与任何源代码控制工具都会遇到同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:01:38.200

自从 80 年代末的 FoxBase 以来，我一直使用 VFP。Visual Foxpro 使用 .dbf 文件（重命名的扩展名）来构建表单 (.scx/.sct) 和可视类库 (.vcx/.vct) 和报告 (.frx/.frt)。

我编写了一些代码来运行一个给定的项目，并转储出所有代码的文本版本，就好像它都是基于文本的一样。所有控件都以 alpha 顺序、嵌入式程序等方式转储。在同一个地方列出所有属性设置。

它并不完美，但多年来我一直在与其他喜欢更改事物并且不通知我（或其他人）此类更改以及以后通过其他可怕方式发现的开发人员打交道时比较源代码版本。

如果您可能对此感兴趣，我可以剥离代码（一些）并通过电子邮件将其发送给您，但需要一个电子邮件地址。该代码以 .prg 文件的形式在 VFP 中编写，因此您无需担心任何病毒或任何东西的编译。

至少通过这种方式，您可以获得与 VFP 中使用的二进制文件对相关联的文本版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T14:11:31.260

对于合并，您可以设置能够合并这些文件的合并工具。这必须在每个开发人员站（工具->源代码管理->VS Team Foundation Server->配置用户工具）上完成。

可能是 VS 使用服务器端合并工具进行自动合并，我不知道您是否或在哪里可以更改它。

# perl - 删除每行的第一个 / 包括第一个 / 之后的所有内容

> ID：14773702
> 
> 赞同：1
> 
> 时间：2013-02-08T13:32:25.530
> 
> 标签：perl, sed

我有一个包含很多主机名的文件。有些在我想删除的主机之后有一个 url 部分。换句话说：

```
google.com
facebook.com
acme.com/news/frontpage
bbc.co.uk
abc.com/home/index 
```

应该成为

```
google.com
facebook.com
acme.com
bbc.co.uk
abc.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:35:42.817

单程：

```
sed 's|/.*||' file 
```

结果：

```
google.com
facebook.com
acme.com
bbc.co.uk
abc.com 
```

您可能想了解更多关于使用[斜杠作为分隔符的](http://www.grymoire.com/Unix/Sed.html#uh-2)信息。HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:38:46.923

尝试这样做：

```
cut -d '/' -f1 file.txt 
```

或者

```
awk -F/ '{print $1}' file.txt 
```

或者

```
perl -F/ -lane 'print $F[0]' file.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:42:16.513

```
awk -F/ '{print $1}' your_file 
```

或者

所有其他解决方案都无法就地更改文件。但如果是 steve，您需要为该 sed 解决方案添加 -i 标志。但它仍然无法在 solaris 上运行。下面 perl 解决方案适用于所有平台并就地替换文件

```
perl -pi -e 's/\/.*//g' your_file 
```

# javascript - 访问活动页面的本地存储

> ID：14773704
> 
> 赞同：0
> 
> 时间：2013-02-08T13:32:32.780
> 
> 标签：javascript, macos, safari

我需要从全局加载的脚本访问活动 Web 浏览器选项卡的本地存储。可能吗？如果是，您能否提供示例？ps code "window.localStorage[key]" 从全局存储中获取信息。网络浏览器：Safari、Mac OS。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:35:51.210

没有*“全局存储”*之类的东西。`localStorage`在打开相同域的选项卡之间共享，仅此而已。

我建议在您的 中添加某种标识符`key`，以获取当前选项卡/窗口的数据：

```
var currentTabId = parseInt(localStorage.tabIds || -1) + 1;
localStorage.tabIds = currentTabId;

localStorage['myKey' + currentTabId] = "Some data"; 
```

# java - 是否有任何 IntelliJ 功能可以在两个相似对象之间映射值？

> ID：14773705
> 
> 赞同：7
> 
> 时间：2013-02-08T13:32:37.553
> 
> 标签：java, soap, intellij-idea, integration, pojo

最近我一直在对 SOAP 服务进行大量集成。假设我从 SOAP 服务中获取此对象：

```
public class ObjectA{
  private String someString;
  private Integer someInteger;
} 
```

对于这个对象，我想制作自己的表示“ObjectB”，它基本上是相同的，但我不想在我的集成工件之外从 WSDL 公开对象。

然后我在 ObjectA 和 ObjectB 之间进行映射。但这需要大量的手动工作，尤其是在对象有很多字段的情况下。IntelliJ 中是否有任何智能方法可以在两个对象之间生成映射？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:41:52.760

您可以使用 Dozer 框架，它是一个 Object-to-Obejct 映射器。

默认情况下，它将按约定映射，但这可以用映射文件覆盖/自定义。

详情在这里：[http ://dozer.sourceforge.net/](http://dozer.sourceforge.net/)

我之前使用它来将特定于用例的服务负载对象映射到可重用的域对象上。

*编辑：*

[MapStruct](http://mapstruct.org/)是一个更现代的映射框架。它使用编译时生成：

# android - 应用提交审核时间 Google Play

> ID：14773707
> 
> 赞同：0
> 
> 时间：2013-02-08T13:32:40.617
> 
> 标签：android, google-play

我试过用谷歌搜索这个问题，但我真的找不到结果。这可能是因为它当然不存在。但是，我想知道的是：如果您将应用程序提交到 Google Play 商店，是否有一个审核时间，Google 审核该应用程序以批准或拒绝该应用程序进入商店？如果有的话；平均等待时间是多少？

提前致谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T13:34:03.237

Google Play 没有审核时间。任何应用程序都可以发布。

请记住，您的应用可能需要几个小时才能在市场上上线，甚至更长时间才能在搜索结果中被编入索引并添加到​​您的开发者页面。

编辑：截至 2015 年，应用程序现在由 Google Play 商店团队审核。但是，应用程序上线仍然需要不到一天的时间，通常在 6-12 小时之间。

# javascript - jQuery 回调函数

> ID：14773709
> 
> 赞同：0
> 
> 时间：2013-02-08T13:32:46.017
> 
> 标签：javascript, jquery, callback

我有一个功能——`vertToggle()`它可以切换一个元素在屏幕上上下滑动。我想创建一个事件链，将元素滑出屏幕，更改其中的内容，然后将其向上滑动。但是，它们需要一个接一个地触发，而不是同时触发，因此需要将它们设置为彼此的回调。

当前的非工作设置是：

```
vertToggle( '-' );
$(".content").hide()
$("#"+load).show();
vertToggle( '+' ); 
```

但是，我不了解使这些正确触发所需的回调函数语法，即执行`vertToggle()`，完成时执行`hide/show`中间操作，然后在完成后执行第二次`vertToggle()`。

感谢您的任何指示。

编辑：根据要求，这是 vertToggle 函数，不确定它是否相关.. $overlay 是正在动画的元素：

```
function vertToggle( offset ) {
    var height = $overlay.outerHeight();
    var props = {};
    var distance = ( offset == '-' ) ? height : 0 ;
    props["bottom"] = offset+distance+'px';

    if( !Modernizr.csstransitions ) {
        $overlay.animate(props, 750);
        $overlay.toggleClass("open");
    }
    else {
        $overlay.css(props);
        $overlay.toggleClass("open");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:42:12.177

如果你使用`.slideToggle()`，你可以添加一个函数作为回调。

```
$("something").click(function(){
 $("somethingelse").slideToggle(function(){
   CallbackFunction()
 })
}); 
```

这有帮助吗？

# jquery - 滚动jQuery UI模式覆盖不滚动

> ID：14773710
> 
> 赞同：0
> 
> 时间：2013-02-08T13:32:54.913
> 
> 标签：jquery, css

我正在构建一个简单的模态弹出对话框。基础工作正常，但我希望对话框滚动，使用主页滚动条来控制它。

**我不确定这是 jquery 问题还是 css 问题。**

我追求的效果是这样的： [http](http://www.script-tutorials.com/demos/328/index.php) ://www.script-tutorials.com/demos/328/index.php （点击一张图片然后滚动外窗滚动条）。

我的代码在这里： [https ://gist.github.com/sfcarroll/4739040](https://gist.github.com/sfcarroll/4739040)

CSS：

```
#overlay {
  bottom: 0;
  display: none;
  left: 0;
  margin-right: auto;
  margin-left: auto;
  position: fixed;
  right: 0;
  top: 0;
  width: 100%;
  z-index: 100;
}

#blanket {
  background-color: white;
  bottom: 0;
  display: block;
  opacity: 0.8;
  position: absolute; 
  top: 0;
  width: 100%;
}

.dialog {
  background: white;
  border-radius: 10px;
  display: none;
  margin: 100px auto;
  position: relative;
  width: 700px;
  height: 2000px;
  padding: 40px;
  border: 1px solid #F7F5F5;
  box-shadow: 0 2px 20px rgba(34, 25, 25, 0.5); 
```

}

我知道我给出的示例是使用 colorbox 插件，但我希望标准 jQuery UI 可以实现这种效果。

jsfiddle：

[http://jsfiddle.net/dEzMp/](http://jsfiddle.net/dEzMp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:23:55.400

添加一点jQuery：

```
var postop = $('dialog').offset().top;

$(window).scroll(function() {
   $('.dialog').css('top', postop);
}); 
```

并更改您的`.dialog`div 位置：

```
.dialog {
   position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T09:51:58.197

我找到了我想要的 Twitter Bootstrap 扩展。

[http://jschr.github.com/bootstrap-modal/](http://jschr.github.com/bootstrap-modal/)

# php - 如何在外部 jquery.js 文件中获取 PHP 迭代变量？

> ID：14773712
> 
> 赞同：0
> 
> 时间：2013-02-08T13:33:06.047
> 
> 标签：php, javascript, jquery

我正在编写一个显示用户待办事项列表的 PHP 程序。我所拥有的基本上是一个无序列表，它有一个复选框，选中该复选框后，用户可以将列表项标记为已完成（即给文本添加删除线）。这是我的列表代码

```
echo '<ul>';

for ($i=0; $i<6; $i++){

       $text = "This is item number " . $i;
       $complete = 'No';
       $order = 'This item is to be done #' . $i;

       echo '<li id = '. $i . '>';

    echo 'Item complete? <input type="checkbox" id="checkbox" />';
    echo '<span id = ' . $i . ' onLoad="crossOut()">Item: ' . $text . ' Complete? ' .$complete . '&nbsp&nbspWhen to do Item: ' . $order . '</span>';
    echo '</li>';

       }

echo '</ul>';

} 
```

这是我正在使用的 jquery 函数

```
$(document).ready(function crossOut(){
    $("#checkbox").change(function crossOutText(){
        if($(this).is(":checked")){
            $("#liID").css("text-decoration", "line-through");
        }
    })
}) 
```

我想弄清楚的是如何在外部 JS 文件中将列表 ID 从 PHP 传递给 jquery 函数，这样每当用户检查一个项目时，它就会将该列表项目标记为已完成并在文本上加上删除线该列表项的。我是使用 jquery 的新手，任何人愿意提供的任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:34:50.850

```
$(document).ready(function(){
    $("input:checkbox").change(function(){
        if($(this).is(":checked")){
            $(this).parents("li").css("text-decoration", "line-through");
            // ^^^^^^^^^^^^^^ strike through the parent list item.
        }
    })
}) 
```

* * *

这是使用 CSS 类的更好方法：

```
$(document).ready(function(){
    $("input:checkbox").change(function(){
        $(this).parents("li").toggleClass('strike', this.checked)
        // ^^^^^^^^^^^^^^ strike through the parent list item.
    })
}) 
```

CSS：

```
.strike {
    text-decoration: line-through;
} 
```

演示：http: [//jsfiddle.net/maniator/unmLd/](http://jsfiddle.net/maniator/unmLd/)

* * *

Disclamer：
[我在这两个示例中都更改`#checkbox`为`input:checkbox`，因为您**不能**有多个具有相同 ID 的元素！尝试改用一个类。]

另外，**删除**您的`crossout()`部分代码...它不会做任何事情，并且可能会在您的页面上引发错误...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:48:49.590

像这样的东西？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="js/jquery.js"></script>
<script>
$(document).ready(function(){
    $('input[type="checkbox"]').change(function(){
        if($(this).is(":checked")){
            $(this).parent().css("text-decoration", "line-through");
        }else{
            $(this).parent().css("text-decoration", "none");
        }
    });
});
</script>
<title>Untitled Document</title>
</head>

<body>

<?php
    echo '<ul>';
    for ($i=0; $i<6; $i++){
        $text = "This is item number " . $i;
        $complete = 'No';
        $order = 'This item is to be done #' . $i;
        echo '<li id = '. $i . '>';
        echo 'Item complete? <input type="checkbox" id="checkbox" />';
        echo '<span id = ' . $i . '>Item: ' . $text . ' Complete? ' .$complete . '&nbsp&nbspWhen to do Item: ' . $order . '</span>';
        echo '</li>';
    }
    echo '</ul>';
?>

</body>
</html> 
```

# asp.net-web-api - 基于 Asp.NET WebApi 约定的方法 Url/Route 查询

> ID：14773720
> 
> 赞同：3
> 
> 时间：2013-02-08T13:33:27.010
> 
> 标签：asp.net-web-api

对于需要返回资源的“子属性”的基于 asp.net webapi 约定的休息服务，我不确定“最佳实践”的前进方式。

例如：

```
UsersController

public User Get(int id) { ... } //returns named user via /api/v1/Users/23 
```

但是如果我想返回给定的用户角色集合，我想我想要一个 url`/api/v1/Users/23/Roles`

如果您使用我的 api，您会认为这是可以接受的吗？

如果可以接受，我的 routeTemplate 和方法签名会是什么样子（对不起，如果这很明显 - 我今天真的很困惑）

我能找到的所有 web api 示例都太简单了，只使用 DELETE、PUT、POST 和两个 GET - 似乎没有一个涵盖像子属性（如上）或部分响应 之类的东西`/api/v1/Users/23?fields=id,name`- 如果有人知道那里有一个很好的例子棒极了。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:35:39.307

**角色**

Roles 看起来是一个非常明智的子资源。

假设您希望使用 http 动词列出和删除用户的角色……那么您可以使用两个控制器，一个用于用户，另一个用于角色。您的路线将如下所示：

```
config.Routes.MapHttpRoute(
            name: "UserApi",
            routeTemplate: "api/v1/Users/{userId}/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/v1/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

然后，您的角色控制器将具有以下方法：

```
public class RolesController : ApiController
{
    // GET api/v1/users/1/roles
    public IEnumerable<Role> Get(int userId)
    {
        //
    }

    // GET api/v1/users/1/roles/1
    public IEnumerable<Role> Get(int userId, int id)
    {
        //
    }

} 
```

**角色作为用户的部分响应**

*对于请求使用什么格式和标准：*

apigee 在他们的网站上制作了一本免费的电子书，他们在其中提出设计建议和对现有 API 的观察。

他们描述了来自 LinkedIn、Facebook 和 Google 的部分响应示例。[这](http://blog.apigee.com/detail/restful_api_design_can_your_api_give_developers_just_the_information)在他们的博客之一和他们[的](http://blog.apigee.com/detail/announcement_new_ebook_on_web_api_design)书中都有介绍。

*如何使用 WebApi ASP.NET*

[假设使用 JSON 作为内容类型，那么在ASP.NET Web API 部分响应 Json 序列化](https://stackoverflow.com/questions/13606675/asp-net-web-api-partial-response-json-serialization)之前已经问过一个类似的问题，简而言之，您需要将“？Fields =”之类的查询参数传递给自定义`ContractResolver`.

# php - 在 Symfony2 中移动捆绑包

> ID：14773721
> 
> 赞同：0
> 
> 时间：2013-02-08T13:33:29.340
> 
> 标签：php, symfony

我是一个 symfony 菜鸟，我在项目的 src/ 目录中安装了 FOSUserBundle，一切正常。我想将捆绑包移动到供应商文件夹以保持一切整洁，但现在我收到以下错误：

**错误：**

```
Fatal error: Class 'FOS\UserBundle\FOSUserBundle' not found in app\AppKernel.php on line 22 
```

有没有我必须更新的文件才能让 symfony 在供应商文件夹中查看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:36:12.957

您不只是将文件移动到`vendor`目录中。该`vendor`目录由[Composer](http://getcomposer.org/)管理。向`vendor`目录中添加内容的方法是打开`composer.json`文件，然后在“要求”下添加一行，如下所示：

`"friendsofsymfony/user-bundle": "dev-master"`

[左边的名称来自于 packagegist.org 的包存储库，但更好的方法是在他们的文档](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md)中找到更多关于如何执行此操作的信息

这应该包含正确安装它所需的一切。

一旦你添加了它，并`php composer.phar update`从你的应用程序目录运行，Composer 将下载 FOSUserBundle，将它放在供应商目录中，并将它添加到自动加载器的命名空间和类映射中。

# php - 在 Sugarcrm 的模块中关联保存的搜索？

> ID：14773723
> 
> 赞同：0
> 
> 时间：2013-02-08T13:33:37.670
> 
> 标签：php, module, sugarcrm

我想向模块添加一个已保存搜索，但已保存搜索模块未出现在关系字段列表中。

我应该改变什么才能看到模块 SavedSearch 作为模块构建器中的普通模块？

谢谢！
乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:57:33.343

您需要在模块的元数据文件夹中创建一个 studio.php 文件。
这样，模块将显示在管理员的模块构建器和模块工作室中。

但是，它会不断给您警告，并且您将无法在弹出选择器中选择 SavedSearch 模块，因为 savedsearch listviewdefs.php 有一个代码可以更改选择器列表中的“<a>”，所以就我而言，我不得不评论它才能工作。

更重要的是，您必须创建 _ 文件 _defs.php 才能使模块正常工作。

# php - 以毫米 (php) 为单位打印（生成）code128 条形码（或任何图像）

> ID：14773724
> 
> 赞同：2
> 
> 时间：2013-02-08T13:33:39.257
> 
> 标签：php, printing, barcode-printing, code128

我需要用`code128 barcodes`in生成标签`PHP`。这些将由用户使用几乎任何打印机打印。

我有一些特定的要求：

*   窄条宽度应在 0.375mm 和 0.5mm 之间

*   最大整体条码宽度：115mm

*   前 8 位数字必须使用子集 B
*   剩下的 20 位数字必须使用子集 C
*   代码必须在高速下可读

我尝试了几个条形码库，但大多数都不允许以毫米为单位说明最小条宽。您只能以固定的整数增量缩放窄条宽度，1 太小，2 太大:)

我还尝试使用 gd lib 重新采样图像，但代码在高速下变得不可读。

我应该构建自己的代码生成器吗？如果是这样，我将如何生成以毫米为单位的条形图？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:38:56.210

好的，我相信我找到了一个不适用于所有浏览器和打印机组合的解决方案，但它非常适合我。

我正在使用barodegen php 库，[因为](https://www.barcodephp.com/en)它是唯一一个允许我为某些字符指定一个子集而为其他字符指定另一个子集的库。

在我的具体问题中，我可以这样做：

```
$setB = '%'.substr($vars->code, 0, 7);
$setC = substr($vars->code, 7);

$code_array = array(array(CODE128_B, $setB), array(CODE128_C, $setC)); 
```

然后将 $code_array 解析为条形码。

现在，通过设置生成的条形码图像的每英寸点数，也可以简单地解决另一个问题。我错误地认为这被称为 DPI。如果我弄错了，请纠正我，但 DPI 是打印机的硬件特性。你无法改变这一点。另一方面，您可以更改 PPI。

在我的问题中，我有一个 244 像素宽的图像，我需要它打印超过 95 毫米。barcodegen 允许您通过调用来执行此操作

```
$drawing->setDPI(64);
// I do think they should rename this to setPPI 
```

现在，当你有一个 64ppi 的 224px 图像后，你需要做的就是在一个 img 标签中显示它，如下所示：

```
<img style="width: 96.8375mm;" src="interlink_code128_barcode.php?code='.$code128.'" border="0"> 
```

96.8375mm是通过求解简单方程得到的，如果图像一英寸包含64个像素，那么244个像素将占据多少英寸？然后你将英寸转换为毫米

我还没有确认可以高速读取条形码，但我确实看到打印输出看起来很清晰！:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:51:45.830

我无法准确地达到 115 毫米。这是一个可以在我的所有三台打印机以及 IE 或 Firefox 上以 116 毫米多一点的速度打印。将宽度调整为 19 可使您降至约 109 毫米...

我为每个符号使用单独的 png 图像，并在客户端将它们串在一起。使用这种技术的完整`Code128`符号系统可以在[http://notionovus.com/blog/barcodes/html/code-128-barcode/找到](http://notionovus.com/blog/barcodes/html/code-128-barcode/)

```
<img 
alt="104,{Start B}" title="104,{Start B}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AC3gAT0BDuLeG4IAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 33,A:{A},B:{A}" title=" 33,A:{A},B:{A}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AFzgAZsBPUCFhSIAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 34,A:{B},B:{B}" title=" 34,A:{B},B:{B}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AHTgAcsBVYSvxaMAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 35,A:{C},B:{C}" title=" 35,A:{C},B:{C}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AHcgAREAmJf+YHwAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 36,A:{D},B:{D}" title=" 36,A:{D},B:{D}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AE7gAX8BL1PJL4YAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 37,A:{E},B:{E}" title=" 37,A:{E},B:{E}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AHLgAccBU7KPeu8AAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 38,A:{F},B:{F}" title=" 38,A:{F},B:{F}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AHOgAYkBFLOchfoAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 39,A:{G},B:{G}" title=" 39,A:{G},B:{G}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AC7gAT8BDxDJjdQAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 40,A:{H},B:{H}" title=" 40,A:{H},B:{H}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADrgAVcBG9SQg7wAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 99,A:{Switch C},B:{Switch C}" title=" 99,A:{Switch C},B:{Switch C}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AEQgAKsAZaZph30AAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 01,A:{!},B:{!}" title=" 01,A:{!},B:{!}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADJgAMcAkzbyVIUAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 23,A:{7},B:{7}" title=" 23,A:{7},B:{7}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ABIgAEcAM15OsZIAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 45,A:{M},B:{M}" title=" 45,A:{M},B:{M}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AETgAWsBJQmo7lIAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 67,A:{ETX},B:{c}" title=" 67,A:{ETX},B:{c}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AHpgAVcA2+hRyrMAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 89,A:{EM},B:{y}" title=" 89,A:{EM},B:{y}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ACQgAGsARQRcPq8AAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 01,A:{!},B:{!}" title=" 01,A:{!},B:{!}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADJgAMcAkzbyVIUAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 23,A:{7},B:{7}" title=" 23,A:{7},B:{7}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ABIgAEcAM15OsZIAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 45,A:{M},B:{M}" title=" 45,A:{M},B:{M}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AETgAWsBJQmo7lIAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 67,A:{ETX},B:{c}" title=" 67,A:{ETX},B:{c}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AHpgAVcA2+hRyrMAAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 89,A:{EM},B:{y}" title=" 89,A:{EM},B:{y}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ACQgAGsARQRcPq8AAAAASUVORK5CYII=" width="20" height="30"><img
alt=" 46,A:{N},B:{N}" title=" 46,A:{N},B:{N}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAABAQMAAAAy+cYDAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/AEcgALEAaE/9r8gAAAAASUVORK5CYII=" width="20" height="30"><img
alt="106,{Stop}"title="106,{Stop}"src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAABAQMAAAA/57ZEAAAABlBMVEUAAAD///+l2Z/dAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAADklEQVQIHQEDAPz/ADigARMA2dpJzT8AAAAASUVORK5CYII=" width="20" height="30"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:59:38.380

ZF Barcode 将允许您更改大量数字。

[http://framework.zend.com/manual/1.12/en/zend.barcode.creation.html](http://framework.zend.com/manual/1.12/en/zend.barcode.creation.html)

它支持code128。

```
 $config = new Zend_Config(array(
                    'barcode' => 'code128',
                    'barcodeParams' => array('text' => 'ZEND-FRAMEWORK', 'thickWidth' => 10, 'thinWidth' => 5),
                    'renderer' => 'image',
                    'rendererParams' => array('imageType' => 'gif'),
                ));
  Zend_Barcode::factory($config)->render(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:45:03.247

您好，也许这个网址可能会有所帮助。由于个别打印机配置，毫米可能是您的症结所在。但是，如果正在配置打印机，则没有问题。网址：[http ://www.davidscotttufts.c​​om/2009/03/31/how-to-create-barcodes-in-php/](http://www.davidscotttufts.com/2009/03/31/how-to-create-barcodes-in-php/)

# playframework-2.0 - Play 2.1.0 中的 EclipseLink

> ID：14773727
> 
> 赞同：0
> 
> 时间：2013-02-08T13:33:58.483
> 
> 标签：playframework-2.0, eclipselink

我可以将 eclipselink 与 play framework 2.1.0 一起使用吗？最后一个使用 ebean 作为默认的 orm 引擎，ebean 的优缺点是什么，它是否比 eclipselink 更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:13:17.450

我想应该可以使用eclipselink玩2.1.0。一起。我目前正在努力使其工作。

我会告诉你我是否会成功。目前看来，您需要配置的只是将以下依赖项添加到 Build.Scala

```
 "org.eclipse.persistence" % "javax.persistence" % "2.0.0" 
```

[然后您需要按照http://www.playframework.com/documentation/2.1.0/JavaJPA](http://www.playframework.com/documentation/2.1.0/JavaJPA)上的描述继续

另一方面，我对 ebean 没有任何经验，所以从性能的角度来看，我无法告诉你它是怎样的。从我读到的内容来看，使用 play 设置 ebean 会容易得多，但之后会有更好的带有 eclipselink 的经典 JPA 文档，这可能对开发有用。

# sql - 如何在 H2 数据库 SQL 查询中使用当前日期

> ID：14773729
> 
> 赞同：26
> 
> 时间：2013-02-08T13:34:05.900
> 
> 标签：sql, h2

我需要类似的东西

```
select * from tableName where date_column > now() 
```

但是，`now()`在 H2 中不起作用。请指教。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-08T13:35:32.173

利用`CURRENT_TIMESTAMP`

```
select * from tableName where date_column > CURRENT_TIMESTAMP() 
```

*   [CURRENT_TIMESTAMP](http://www.h2database.com/html/functions.html#current_timestamp)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-08T13:41:53.323

如果您只想与当前日期进行比较，请使用

```
select * from tableName where date_column > CURRENT_DATE() 
```

如果您还想与当前日期和时间进行比较

```
select * from tableName where date_column > CURRENT_TIMESTAMP 
```

# python - python email.parser：从电子邮件中提取标题

> ID：14773732
> 
> 赞同：1
> 
> 时间：2013-02-08T13:34:10.833
> 
> 标签：python

```
import sys, imaplib
    from email.parser import HeaderParser

mail = imaplib.IMAP4_SSL(SERVER, PORT)
status, data = mail.search(None, 'ALL')

for msg_id in data[0].split():
  status, message = mail.fetch(msg_id, '(RFC822)')
  print message[0][1]

mail.close()
mail.logout() 
```

我正在尝试通过 imap 从 gmail 获取电子邮件。一切正常，除了我无法从邮件中提取标题（主题、发件人、日期）。在上面的代码中，message[0][1] 包含我的电子邮件。

我能够获得标头的唯一方法是再次询问 imap 服务器，特别是标头：

```
status, message = mail.fetch(msg_id, '(BODY[HEADER.FIELDS (SUBJECT FROM)])')
parser = HeaderParser()
header = parser.parsestr(message[0][1])
print header 
```

有人可以建议怎么做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T13:42:56.480

我假设您已经收到了完整的电子邮件，而不仅仅是邮件正文。

```
raw_message = """From: Santa Claus <santa@aintreal.no>
To: Some Dude <some@du.de>
Subject: I have lost your presents.

Dude, i am so sorry.
"""

import email
msg = email.message_from_string(raw_message)
print(msg['Subject'])  # "I have lost your presents." 
```

`msg`是一个[`email.message.Message`](http://docs.python.org/2/library/email.message.html#email.message.Message)对象。

# c# - 将 .Net DLL 转换为 Flash 库？

> ID：14773736
> 
> 赞同：0
> 
> 时间：2013-02-08T13:34:31.007
> 
> 标签：c#, silverlight, dll, actionscript, equivalent

我制作了一个用 c# 编写的 .Net 动态链接库，用于 Silverlight 应用程序。

现在，我希望在开发 Adob​​e Flash 应用程序时使用相同的功能。我对 Flash 或 ActionScript 不太熟悉。我什至不知道 Flash/ActionScript 中是否有某种等效的 DLL。

有什么建议么？我必须走很长的路，即学习闪存并开发此功能，还是有更顺畅的方法？.Net 到 ActionScript 的转换器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:38:02.023

不。

但是您可以考虑通过 Web 服务 API 公开此类程序集 (DLL) 功能，并让 Silverlight 和 Flash 应用程序远程访问它们，以便它们可以共享相同的后端实现。

如果整个程序集没有进行实时处理或类似的事情，并且整个 Silverlight 和 Flash 应用程序都是基于浏览器的应用程序，这将起作用。在这种情况下，您可以开发一个 ASP.NET Web API (REST) 并在服务中完成工作。

稍后，您将从 Flash 和 Silverlight 异步查询 Web API。

# javascript - 使用 jsonstring 数据类型加载 jqgrid 表

> ID：14773742
> 
> 赞同：2
> 
> 时间：2013-02-08T13:35:03.350
> 
> 标签：javascript, json, jqgrid

我想用我从velocity生成的json字符串加载一个jqGrid表；这些是表参数：

```
var gridParams = {
    datatype: "jsonstring", 
    data: content,
    pager: $('#pagernav'), 
    rowNum: 5000,
    rownumbers: true,
    rowList: [50,100,200,500,1000,2000],
    ignoreCase: true,
    colNames: columns,
    colModel: tableColModel,
} 
```

在控制台上打印时，内容和列的值是：

```
[{"ID":"7", "fname":"Bob", "addr":"18" }, {"ID":"8", "fname":"Sue" }]
["ID", "fname", "addr"] 
```

确实，网格是用正确的列创建的，但它是空的……我写的有什么问题？感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T14:10:35.390

首先，超过 90% 的使用`datatype: "jsonstring"`是在以错误方式使用 jqGrid 的情况下。您没有更详细地描述您的原始问题，但我建议您考虑使用`datatype: "json"`而不是`datatype: "jsonstring"`.

如果您确实需要使用，那么您应该使用[option](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aoptions)`datatype: "jsonstring"`提供输入数据，而不是在.`datastr` `data``datatype: "local"`

来自的数据`content`真的是 JSON 字符串 ( `typeof content === "string"`) 还是您将数据作为对象 ( `typeof content === "string"`)？在我看来，最好在您的情况下使用`datatype: "local", data: content`或`datatype: "local", data: $.parseJSON(content)`代替使用`datatype: "jsonstring", datastr: content,`，因为输入数据的格式不是标准要求的`datatype: "jsonstring"`（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_string)），因此为了能够成功读取数据，您必须提供相应的`jsonReader`（看[这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#jsonreader_as_function)的一个例子）

无论如何，我建议您使用`gridview: true`选项，替换`pager: $('#pagernav')`为`pager: '#pagernav'`并定义列的`key: true`属性`'ID'`。此外，您应该始终包含`colModel`在问题的文本中。文本`colModel: tableColModel`指向代码`$.jqGrid(myOptions)`- 如果显示不需要的详细信息，这对于找到问题的解决方案非常*重要*。

# php - Netbeans IDE mac osx 本地主机不工作

> ID：14773747
> 
> 赞同：0
> 
> 时间：2013-02-08T13:35:13.310
> 
> 标签：php, macos, netbeans, mamp

我在 osx 上的 Netbeans IDE 上收到以下错误：

```
Firefox can't establish a connection to the server at localhost:8888 
```

网址是：

```
http://localhost:8888/PhpProject_130208/index.php 
```

代码是：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Hope this works</title>
</head>
<body>
    <?php
    // put your code here
        echo "My first PHP script!";
    ?>
</body>
</html> 
```

当我运行 MAMP 时，它说 MAMP 已安装并正在运行>

不用说我是一个完整的n00b，我什至不知道如何问这个问题。我正在尝试在我的 Mac 上学习 PHP，并且已经走到了这一步。

我做错了什么，我在哪里可以学习如何正确设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:50:37.417

通读 Netbeans 的[PHP Learning Trail](http://netbeans.org/kb/trails/php.html)，这将帮助您了解基础知识。

有用的文章：

*   [NetBeans IDE PHP 快速入门教程](http://netbeans.org/kb/docs/php/quickstart.html)
*   [设置 PHP 项目](http://netbeans.org/kb/docs/php/project-setup.html)
*   [在 MAC OS X 中为 PHP 开发配置 PHP、Apache、MySQL 和 Xdebug](http://netbeans.org/kb/docs/php/configure-php-environment-mac-os.html)

# email - 使用 GMail 在线客户端的表格中的图像问题

> ID：14773748
> 
> 赞同：0
> 
> 时间：2013-02-08T13:35:13.953
> 
> 标签：email, gmail, html-email, email-client

我正在创建要在 Pardot 中使用的电子邮件模板。我已经对电子邮件进行了编码。它在 OSX Mail、Outlook 07 +、Opera Mail 中运行良好，但 GMail 真的很痛苦。它为我表中的 tr 或 td 添加了一些奇怪的高度或其他东西。

有什么建议么？

```
<table border="0" cellpadding="0" cellspacing="0" width="228">
    <tbody>
        <tr valign="bottom">
            <td valign="bottom"><span pardot-region=""><img src="widget_top.jpg" alt="Placeholder"></span></td>
        </tr>
        <tr bgcolor="#ffd13f">
            <td style="padding: 10px;">
                <h2><span pardot-region="">Subheading span across one or two lines for best practice:</span></h2>
                <span pardot-region=""><p><b>Date:</b> Thursday 29 November</p>
                <p><b>Time:</b> 1.30pm (GMT)</p>
                <p><b>Where:</b> <a href="http://google.com" style="font-family: Arial; font-weight: normal; text-decoration: underline; font-size: 12px; line-height: 16px; padding-top: 0px; padding-bottom: 5px; color: #F05A00; margin: 0;">Register online &gt;</a></p>                                                                
                <p><b>Topic:</b> Dynamic performance management</p>
                <p><b>Presenters:</b> Octavius Black, CEO and Sebastian Bailey, President</p></span>
            </td>
        </tr>
        <tr valign="top">
            <td valign="top"><span pardot-region=""><img src="widget_bottom.jpg" alt="Placeholder"></span></td>
        </tr>
    </tbody>
</table> 
```

（该表位于一组经过测试的表中）。

屏幕截图可以在这里找到：http: [//i45.tinypic.com/15wzda9.png](http://i45.tinypic.com/15wzda9.png)

干杯:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:50:16.087

`display:block;` is definitely needed. You probably should zero out everything in all img tags, and set width and heights also.

`<img style="margin: 0; border: 0; padding: 0; display: block;" src="" width="600" height="150" alt="">`

Also, you don't need the spans inside the table cells. If you want to keep them, make sure they have margin and padding zero'd out there too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:04:25.457

在您必须放置的图像上（内联）

```
style="display:block;" 
```

:)

# mysql - 在mysql中随机化字符串

> ID：14773759
> 
> 赞同：0
> 
> 时间：2013-02-08T13:35:44.287
> 
> 标签：mysql, random

我在 mysql 中有一个字符串，我想随机化，这样每次运行查询时，我都会得到不同的结果。

示例字符串

`$str = '4_127','2_84','2_85';`

所以，我会将它传递给`ORDER BY`子句以随机化结果。

```
SELECT `MY_SEARCH_PARAMS` FROM `mytable` WHERE `MY_WHERE_CONDTIONS` ORDER BY
FIELD( CONCAT( property_id,"_",catalog_id ), '4_127','2_84','2_85' ), `id` ASC; 
```

我需要一种方法，以便每次更改字符串内容的顺序。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:54:34.543

真的吗？这是非常令人困惑的行为。你想达到什么目的？

尽管如此，即使您使用这样的代码，至少最好在 php 脚本中随机化它们（我假设您使用的是 php）。

```
$str_array = array('4_127','2_84','2_85');
shuffle($str_array);
$str = implode(", ",$str_array) 
```

# javascript - 删除 highcharts 的滚动部分

> ID：14773762
> 
> 赞同：-1
> 
> 时间：2013-02-08T13:35:51.243
> 
> 标签：javascript

![高聊](../Images/4520eb17f83266e2b6748f0f22dd47ea.png)

可以去除突出显示的“绿色”部分吗？

代码：

```
chart = new Highcharts.StockChart({
    chart: {
        renderTo: renderTo,

    },
    title: {
        text: 'test - ' + title
    },
    zoomType: false,
    subtitle: {
     text: 'some text'
    },
    rangeSelector: {
        selected: 4
    },

    yAxis: {
        labels: {
            formatter: function() {
                return (this.value / 1000000) + "mil";
            }
        },
        plotLines: [{
            value: 0,
            width: 2,
            color: 'silver'
        }]
    },

  credits: {
      enabled:false
  },

        plotOptions: {
        series: {

            marker : {
                enabled : true,
                radius : 3
            }
        }

    },

    },

    series: seriesOptions
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:44:44.737

文档是你的朋友。

**Highstock 演示库 - 禁用导航器**
[http://www.highcharts.com/stock/demo/navigator-disabled](http://www.highcharts.com/stock/demo/navigator-disabled)

**必要代码：**

```
navigator : {
    enabled : false
}, 
```

**工作示例：http:** [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/navigator-disabled/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/navigator-disabled/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T13:41:43.963

错误...又快又脏

```
<div id="highchart">
highchart code here
</div>
<div style="background:white;display:block;position:relative;width:400px;margin-top:-150px;">
the rest of your site/content here
</div> 
```

在你提供的信息有限的情况下，这就是我能想到的。

# magento - 通过 csv 将客户导入 Magento

> ID：14773763
> 
> 赞同：7
> 
> 时间：2013-02-08T13:35:50.757
> 
> 标签：magento

我正在尝试使用内置客户导入器的 Magento 将客户导入到带有 csv 文件的 magento 中。

它工作正常（客户姓名、电子邮件和密码进入数据库），但客户的帐单和送货地址却不是。

这是我的 csv 标头：

```
'id', '_website', 'firstname', 'lastname', 'email', 'password_hash',   'billing_firstname', 'billing_lastname', 'billing_company', 'billing_postcode', 'billing_city', 'billing_street1', 'billing_telephone', 'billing_country', 'billing_region', 'shipping_firstname', 'shipping_lastname', 'shipping_company', 'shipping_postcode', 'shipping_city', 'shipping_street1', 'shipping_telephone', 'shipping_country', 'shipping_region', 'is_subscribed', 'group_id', 'dob' 
```

我也尝试将这些标签放入标题中，但仍然没有。

```
'postcode', 'city', 'street1', 'telephone', 'country', 'region', 
```

如果有人遇到这个问题并且知道如何做到这一点，请帮助，

提前致谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T10:58:33.527

好的，我找到了解决方案：

转到 Magento admin->System->Import/Export-> **Dataflow 配置文件**。 *（不是 Magento admin->System->Import/Export->Import！）*

然后，选择配置文件：导入客户（如果不存在，则创建）。

我将个人资料信息框中的商店值设置为“默认商店视图”。然后，上传您的 csv，并运行配置文件。

它对我有用，并将每个值都正确地输入到 magento 数据库中——运输和账单地址也是如此。

这是我的 CSV 标题：

```
id  website firstname   lastname    email   password_hash   billing_firstname   billing_lastname    billing_company billing_postcode    billing_city    billing_street1 billing_telephone   billing_country billing_region  shipping_firstname  shipping_lastname   shipping_company    shipping_postcode   shipping_city   shipping_street1    shipping_telephone  shipping_country    shipping_region is_subscribed   group   group_id    dob 
```

我不知道是否需要 group_id，但您必须有一个组列（我为其设置了“常规”值。）

我发现它有点问题，所以如果一切设置正确，请不要惊慌，并且您会收到如下错误消息：“未设置必填列网站” - 或类似的，我刷新了导入数据流页面，再次运行配置文件，然后工作 - 当然你正确设置了一切。

希望能帮助到你，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T15:21:23.873

“Group_id”会引起问题。正确的标题是组。（我见过一些使用“Group_id”的选择语句的例子，我相信他们不知道如何在 MYSQL 中转义保留字。

如果您将 General 的默认值放在 Group 列中，则导入应该没问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-19T05:32:59.960

我们可以将有关客户的所有信息放入 csv 中。非必填项可以留空。

标头如下：

```
website,email,group_id,disable_auto_group_change,firstname,lastname,password_hash,prefix,middlename,suffix,taxvat,billing_prefix,billing_firstname,billing_middlename,billing_lastname,billing_suffix,billing_street_full,billing_street1,billing_street2,billing_street3,billing_street4,billing_street5,billing_street6,billing_street7,billing_street8,billing_city,billing_region,billing_country,billing_postcode,billing_telephone,billing_company,billing_fax,shipping_prefix,shipping_firstname,shipping_middlename,shipping_lastname,shipping_suffix,shipping_street_full,shipping_street1,shipping_street2,shipping_street3,shipping_street4,shipping_street5,shipping_street6,shipping_street7,shipping_street8,shipping_city,shipping_region,shipping_country,shipping_postcode,shipping_telephone,shipping_company,shipping_fax,created_in,is_subscribed,group 
```

希望这可以帮助。

# hibernate - 使用 Spring 配置测试 DAO 类时出错

> ID：14773765
> 
> 赞同：0
> 
> 时间：2013-02-08T13:35:57.843
> 
> 标签：hibernate, maven, spring-mvc, junit, pom.xml

因此，我们正在 IntelliJ 中使用 Spring、Maven 和 Hibernate 构建 Web 应用程序。我们现在正在尝试使用 JUnit 来测试添加用户。我们目前陷入困境，我们无法在任何地方找到答案。

这是我们的测试类。

```
package be.kdg.teamf.dao;

import be.kdg.teamf.util.OpenSessionInTestBase;
import org.junit.Test;
import be.kdg.teamf.model.User;
import org.junit.runner.RunWith;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.transaction.TransactionConfiguration;

import java.util.Date;

import static org.junit.Assert.assertSame;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"classpath:spring-servlet.xml", "classpath:jdbc.properties"})
@TransactionConfiguration(defaultRollback=true,transactionManager="transactionManager")
public class TestUserDAO {
    private UserDAO userDao;
    Date datum = new Date(30/12/1988);

    @Test
    public void testCreateUser() throws Exception {
        User u = new User();
        u.setUsername("tester");
        u.setPassword("test");
        u.setFirstName("test");
        u.setLastName("test");
        u.setCity("test");
        u.setDateOfBirth(datum);
        u.setEmail("test@test.be");
        u.setStreet("test");
        u.setNumber("15");
        u.setTelephone("045859876");
        userDao.addUser(u);
        assertSame("you are not getting the expected user from the db",
        "test",userDao.getUser("tester").getFirstName());
    }
} 
```

我已将此添加到 .xml 下的 pom.xml 中。

```
<testResources>
        <testResource>
            <directory>src/main/webapp/WEB-INF</directory>
            <includes>
                <include>*.xml</include>
                <include>*.properties</include>
            </includes>
             </testResource> 
</testResources> 
```

jdbc.properties 文件

```
jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.dialect=org.hibernate.dialect.MySQLDialect
jdbc.databaseurl=jdbc:mysql://localhost:3306/projectteamf
jdbc.username=TeamF
jdbc.password=teamf 
```

我们在第 1 行第 1 列上收到关于 jdbc.properties 的 SaxParseException，我们在任何地方都找不到解决方案。有人知道为什么我们会收到此错误吗？我们对此很陌生。

提前致谢！

编辑：带有堆栈跟踪的错误消息

```
INFO: Loading XML bean definitions from class path resource [jdbc.properties]
feb 08, 2013 2:17:27 PM org.springframework.test.context.TestContextManager prepareTestInstance
SEVERE: Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@235d9f6] to prepare test instance [be.kdg.teamf.dao.TestUserDAO@1d78a69c]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 1 in XML document from class path resource [jdbc.properties] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadBeanDefinitions(AbstractGenericContextLoader.java:205)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:100)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 27 more
Caused by: org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:441)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:368)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1388)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:998)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:237)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:300)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
    ... 39 more

java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 1 in XML document from class path resource [jdbc.properties] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadBeanDefinitions(AbstractGenericContextLoader.java:205)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:100)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 27 more
Caused by: org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:441)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:368)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1388)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:998)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:489)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:237)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:300)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
    ... 39 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:12:56.080

它试图将 jdbc.properties 解析为 XML，但事实并非如此。不要将 jdbc.properties 添加到您的 ContextConfiguration。将 jdbc.properties 添加到 src/test/resources。您可能需要将数据源添加到您的配置中。

```
@ContextConfiguration({"classpath:spring-servlet.xml"}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:45:58.633

您的属性文件应位于`src/main/resources`. 我希望`spring-servlet.xml`也能放在那里。您的资源`src/main/resources`始终可用于您的测试。

还有……马修·法威尔所说的。

# javascript - Google 地理编码网络服务中缺少 CORS HTTP 标头

> ID：14773770
> 
> 赞同：2
> 
> 时间：2013-02-08T13:36:21.803
> 
> 标签：javascript, jquery, google-geocoding-api

我在带有 jQ​​uery 的 Javascript 应用程序中使用[Google Geocoding API](https://developers.google.com/maps/documentation/geocoding/index)（Web 服务，而不是通过 Google Maps API 中的地理编码器对象），所以我`$.getJSON`用来获取地理编码响应。

直到昨天，`HTTP`响应标头包括“Access-Control-Allow-Origin：”标头，所以我对支持 CORS 的浏览器没有任何问题。
今天早上，我意识到这个标头已从 HTTP 响应中删除，因此我的应用程序无法再访问 json 结果。
谁能帮我找出为什么该标题被删除？如果地理编码服务不兼容 CORS，我认为它是没有用的。

注意：我没有使用 maps api 中的地理编码器，因为谷歌建议使用网络服务进行静态 kwnon 地址地理编码，而且`OVER_QUERY_LIMIT`使用网络服务的问题比地理编码器少。

# amazon-web-services - AWS SNS 中的延迟和吞吐量是否足以取代用于发布/订阅的专用 MQ？

> ID：14773771
> 
> 赞同：21
> 
> 时间：2013-02-08T13:36:23.473
> 
> 标签：amazon-web-services, message-queue, publish-subscribe, zeromq

为了高可用性，我正在考虑从自托管解决方案 (ZeroMQ) 切换到[AWS 简单通知服务](http://aws.amazon.com/sns/)，以便在应用程序中发布/订阅。这是应用程序的后端，因此应该是相当实时的。

SNS 的延迟和吞吐量是多少？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-15T00:30:51.167

该应用程序是否将托管在 EC2 上？如果是这样，延迟将大大减少，因为通信渠道将通过亚马逊的连接，而不是通过互联网。

如果您要从未托管在 EC2 上的机器调用 AWS 服务，这里有一个[很酷的站点](http://www.cloudwatch.in/)，它试图让您了解您与各种 AWS 服务和位置之间的延迟量。

![在此处输入图像描述](../Images/41ab39cd837fb8279cff16ba0eaf165c.png)

> **您如何测量 HTTP Ping 请求延迟？**
> 
> 我们正在向 AWS 服务端点（如 EC2、SQS、SNS 等）发出 HTTP GET 请求以进行 PING，并测量在所有区域中观察到的延迟。

至于想法，那是由你决定的。您可以使用各种策略来增加吞吐量，例如多线程、批处理消息等。

请记住，您将不得不为一些副作用编写代码，例如可能会两次看到相同的消息（至少一次传递），并且无法依赖 FIFO。

# knockout.js - 淘汰验证是否应该默认显示验证消息？

> ID：14773773
> 
> 赞同：1
> 
> 时间：2013-02-08T13:36:47.390
> 
> 标签：knockout.js, knockout-validation

我正在使用淘汰赛验证插件，我创建了一个异步规则：

[https://github.com/ericmbarnard/Knockout-Validation/wiki/Async-Rules](https://github.com/ericmbarnard/Knockout-Validation/wiki/Async-Rules)

验证是否应该触发显示正常的默认验证消息？

虽然我可以看到`.isValidating.subscribe`它正在被验证，但我不确定验证消息是否也应该显示，或者我是否必须自己自定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:11:35.247

它应该显示消息。但是只有当 observable 无效并且被修改时才会显示消息`observable.isModified() === true`。

您可以通过更改 observable 的值来检查。

# c# - 缩放控件与谷歌地图区域中的自定义控件重叠

> ID：14773779
> 
> 赞同：0
> 
> 时间：2013-02-08T13:37:15.577
> 
> 标签：c#, javascript, ajax

我有 1 个 div 控件并将其添加到 LEFT_BOTTOM 位置的谷歌地图。和 zoomControl 是真的。当我的 div 移动到缩放控制时。缩放控制与我的 div 重叠。我怎样才能避免它。

我无法上传快照。这将描述确切的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T08:42:37.580

我通过设置自定义控件的 z-index 得到了解决方案

mycontrol.style.z-index = 5;

有用。

# c# - 将 JSON 字符串解析为值

> ID：14773780
> 
> 赞同：1
> 
> 时间：2013-02-08T13:37:18.293
> 
> 标签：c#, json, parsing

我不允许在客户处导入新包。我只允许在获取`String`看起来像 JSON 字符串的对象和返回之间的区域，我应该在`List<String>`.

我感到非常有限，据我所知，我无法继续。我最好的选择是使用`Regex`对象，但也许有更流畅的解决方案？（我相信我也可以使用 XDocument 和 LINQ，如果有帮助的话）。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:22:42.883

遵循本[手册](http://www.codeproject.com/Articles/272335/JSON-Serialization-and-Deserialization-in-ASP-NET)，您应该能够做到。

您只需要导入 System.Runtime.Serialization.dll（标准 .net dll）

编辑：

你有这个方法

```
public static T JsonDeserialize<T> (string jsonString) 
```

如果你知道你会得到什么 json，你可以像这样创建对象：

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

所以你可以像这样使用它：

```
string jsonString = "{\"Age\":28,\"Name\":\"Tom\"}";
Person p = JsonHelper.JsonDeserialize<person>(jsonString); 
```

编辑2：

```
 public class Person
    {
        public string Name { get; set; }
        public int Age { get; set; }
    }

    static void Main(string[] args)
    {
        string json = "[{\"Age\":28,\"Name\":\"Tom\"},{\"Age\":18,\"Name\":\"Andes\"},{\"Age\":32,\"Name\":\"Lily\"}]";
        List<Person> persons = new List<Person>(JsonHelper.JsonDeserialize<Person[]>(json));

    } 
```

编辑 3：JsonHelper 是一个实现默认设置的类。

```
/// <summary>
/// JSON Serialization and Deserialization Assistant Class
/// </summary>
public class JsonHelper
{
    /// <summary>
    /// JSON Serialization
    /// </summary>
    public static string JsonSerializer<T>(T t)
    {
        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));
        MemoryStream ms = new MemoryStream();
        ser.WriteObject(ms, t);
        string jsonString = Encoding.UTF8.GetString(ms.ToArray());
        ms.Close();
        return jsonString;
    }
    /// <summary>
    /// JSON Deserialization
    /// </summary>
    public static T JsonDeserialize<T>(string jsonString)
    {
        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(T));
        MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(jsonString));
        T obj = (T)ser.ReadObject(ms);
        return obj;
    }
} 
```

# xna - 在 XNA 中，矩形宽度和精灵中纹理的宽度有什么区别？

> ID：14773781
> 
> 赞同：0
> 
> 时间：2013-02-08T13:37:29.167
> 
> 标签：xna, textures, sprite, xna-4.0, rectangles

假设你这样做了：`spriteBatch.Draw(myTexture, myRectangle, Color.White);`

你有这个：

```
myTexture = Content.Load<Texture2D>("myCharacterTransparent");
myRectangle = new Rectangle(10, 100, 30, 50); 
```

好的，现在我们有一个宽度为 30 的矩形。假设 myTexture 的宽度为 100。

那么对于第一行，它是否使精灵的宽度为 30，因为这是您为矩形设置的宽度，而`myTexture`宽度保持为 100？或者精灵的宽度是否为 100，因为那是纹理的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:59:24.953

Draw-method 使用的 Rectangles 定义了应该在 rendertarget 的哪个部分（通常是屏幕）绘制 Texture2D 的哪个部分。

例如，这就是我们使用图块集的方式；

```
class Tile
{
    int Index;
    Vector2 Position;
}

Texture2D tileset = Content.Load<Texture2D>("sometiles"); //128x128 of 32x32-sized tiles
Rectangle source = new Rectangle(0,0,32,32); //We set the dimensions here.
Rectangle destination = new Rectangle(0,0,32,32); //We set the dimensions here.
List<Tile> myLevel = LoadLevel("level1");

//the tileset is 4x4 tiles

in Draw:
spriteBatch.Begin();
foreach (var tile in myLevel)
{
    source.Y = (int)((tile.Index / 4) * 32);
    source.X = (tile.Index - source.Y) * 32;

    destination.X = (int)tile.Position.X;
    destination.Y = (int)tile.Position.Y;

    spriteBatch.Draw(tileset, source, destination, Color.White);
}
spriteBatch.End(); 
```

我可能混淆了在绘制方法中使用矩形的顺序，因为我在工作时正在做这件事。

编辑; 仅使用 Source Rectangle 可让您仅在屏幕位置上绘制纹理的一部分，而仅使用 destination 可让您缩放纹理以适合您想要的任何位置。

# php - 使 SQL 值等于 PHP 变量

> ID：14773782
> 
> 赞同：-3
> 
> 时间：2013-02-08T13:37:36.827
> 
> 标签：php, mysql

我无法使 MySQL Source 值等于 $source： `$result = mysql_query("SELECT Source FROM videos WHERE Name='$name'"); $source=['Source'];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:39:10.977

```
$result = mysql_query("SELECT Source FROM videos WHERE Name='$name'"); 
$ds = mysql_fetch_object($result);
$source= $ds -> Source; 
```

这可以做到，但你应该使用 mysqli

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:45:19.207

```
$sql = "SELECT Source FROM videos WHERE Name = '$name'";
$result = mysql_query($sql);
$row = mysql_fetch_assoc($result);

$your_var = $row['Source']; 
```

# titanium - 文件 -> 新建 -> Titanium 桌面应用程序未显示 - 需要 Titanium 帮助

> ID：14773792
> 
> 赞同：0
> 
> 时间：2013-02-08T13:37:55.720
> 
> 标签：titanium, desktop-application

我已经在 ubuntu 11.10 中安装了钛。我想创建桌面应用程序，但我不知道需要哪些工具、API、SDK 以及如何在钛中配置所有 SDK、API 和工具。因此，为创建桌面应用程序所需的钛配置提供所有步骤......

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:18:54.893

Titanium Desktop 不再由 Appcelerator 维护。

您可以在此处查看社区维护的桌面 SDK：http: [//tidesdk.org/](http://tidesdk.org/)

# android - Android - Proguard 返回错误代码 1

> ID：14773796
> 
> 赞同：2
> 
> 时间：2013-02-08T13:38:05.893
> 
> 标签：android, obfuscation, proguard

我希望我的应用程序受到 progaurd 保护。为此，我浏览了一些教程，帖子，最后从[这篇](https://stackoverflow.com/questions/14512562/proguard-cfg-file-missing)帖子中我知道我应该只这样做：

```
If you're using ADT 17 or newer, the documentation is slightly inaccurate. The generated file is proguard-project.txt and will be in the root directory of your project.

To enable Proguard, you will need to ignore the "do not modify" warning in project.properties and uncomment the following line:

proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

在取消上述建议的行后，我尝试导出未签名的应用程序。但得到一个出口错误说`progaurd returned error with code 1`。当我单击错误对话框上的详细信息按钮时，我得到如下所示的错误日志：

```
Proguard returned with error code 1\. See console
Proguard Error 1 
Output: 
      You should check if you need to specify additional program jars. 
Warning: can't write resource [META-INF/MANIFEST.MF] (Duplicate zip entry [acra-

4.4.0.jar:META-INF/MANIFEST.MF]) 
Warning: can't write resource [META-INF/MANIFEST.MF] (Duplicate zip entry 

[libGoogleAnalyticsV2.jar:META-INF/MANIFEST.MF]) 
Warning: can't write resource [META-INF/MANIFEST.MF] (Duplicate zip entry [google-play-

services_lib.jar:META-INF/MANIFEST.MF]) 
Warning: can't write resource [META-INF/MANIFEST.MF] (Duplicate zip entry 

[vpilibrary.jar:META-INF/MANIFEST.MF]) 
Warning: can't write resource [META-INF/MANIFEST.MF] (Duplicate zip entry 

[abslibrary.jar:META-INF/MANIFEST.MF]) 
java.io.IOException: Can't write [C:\Users\SURESH\AppData\Local\Temp

\android_6223056648746329994.jar] (Can't read [C:\Users\SURESH\Desktop\ActionBarSherlock-

4.2.0\ABSlibrary\bin\abslibrary.jar] (Unexpected end of ZLIB input stream)) 
    at proguard.OutputWriter.writeOutput(OutputWriter.java:264) 
    at proguard.OutputWriter.execute(OutputWriter.java:160) 
    at proguard.ProGuard.writeOutput(ProGuard.java:372) 
    at proguard.ProGuard.execute(ProGuard.java:153) 
    at proguard.ProGuard.main(ProGuard.java:492) 
Caused by: java.io.IOException: Can't read [C:\Users\SURESH\Desktop\ActionBarSherlock-

4.2.0\ABSlibrary\bin\abslibrary.jar] (Unexpected end of ZLIB input stream) 
    at proguard.InputReader.readInput(InputReader.java:230) 
    at proguard.InputReader.readInput(InputReader.java:200) 
    at proguard.OutputWriter.writeOutput(OutputWriter.java:253) 
    ... 4 more 
Caused by: java.io.EOFException: Unexpected end of ZLIB input stream 
    at java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:223) 
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:141) 
    at java.util.zip.ZipInputStream.read(ZipInputStream.java:154) 
    at java.util.zip.ZipInputStream.closeEntry(ZipInputStream.java:100) 
    at java.util.zip.ZipInputStream.getNextEntry(ZipInputStream.java:78) 
    at proguard.io.JarReader.read(JarReader.java:58) 
    at proguard.io.DirectoryPump.readFiles(DirectoryPump.java:65) 
    at proguard.io.DirectoryPump.pumpDataEntries(DirectoryPump.java:53) 
    at proguard.InputReader.readInput(InputReader.java:226) 
    ... 6 more 
```

知道为什么会这样吗？我是否正确配置了 progaurd 或错过了步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T23:39:05.560

堆栈跟踪中列出了根本原因：

```
Caused by: java.io.IOException: Can't read [C:\Users\SURESH\Desktop\ActionBarSherlock-4.2.0\ABSlibrary\bin\abslibrary.jar] (Unexpected end of ZLIB input stream)
...
Caused by: java.io.EOFException: Unexpected end of ZLIB input stream 
    at java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:223)
    ... 
```

您应该检查以下内容：

*   文件是否`abslibrary.jar`存在于给定位置？
*   它是一个有效的罐子（你可以用一些解压工具打开它）吗？
*   它是在构建过程中编写的吗？如果它以某种方式被异步写入，当 ProGuard 读取它时它可能仍然不完整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T06:53:29.393

我通过注释 -libraryjars 关于找不到的 jar 解决了这个问题。文档说不会存在 jar，它会在运行时加载 jar。

# android - 从 Google Play 商店中删除应用 - 未知的开发者帐户

> ID：14773798
> 
> 赞同：3
> 
> 时间：2013-02-08T13:38:10.940
> 
> 标签：android, google-play

我们有一个应用程序存在于 Google Play 商店中，它是由不再在我们公司工作的开发人员创建的。我们拥有该应用程序并希望将其删除，但我们不知道开发人员用于将应用程序发布到商店的 Google 帐户。

有什么方法可以找出该应用与哪个帐户相关联？如果我们尝试使用我们认为可能的 Google 帐户登录，Google 希望每次猜测向我们收取 25 美元。

如果我们找不到该帐户，如果我们能够提供足够的证据证明它是我们的，是否有办法让 Google 为我们删除该应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:38:10.993

如果您无权访问用于上传该应用程序的帐户，则无法从 Google Play 下载该应用程序。如果你很幸运，并且上传应用程序的开发人员在 Google Play 的应用程序中输入了他的邮件作为联系开发人员邮件，也许通过这种方式尝试发送邮件你可以找到用于上传应用程序的帐户，但你可以'不相信这一点，因为大多数开发人员和公司都有不同的邮件来与客户沟通，这取决于这一点。

但是，如果您联系 Google 并向他们解释一切，并且正如我在上面所说的，如果您幸运的话，您可以说服他们从 Google Play 中删除该应用程序。或者我认为最好的情况是联系上传应用程序的开发人员并要求他将其删除。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:51:03.633

情况相当严峻。我不会建议您将来使用公司的 Google 帐户，但我认为最简单的方法是亲自与开发人员交谈。然后跟他解释一下，他之前和你签订的合同里有几条涉及知识产权义务的条款，都是他签的。如果您没有，或者如果他是根据自由职业者合同雇用的，而没有提及上述内容，那么当他以“他的”知识产权起诉您时，您将在法庭上得到真正的交易（即申请)，由他上传到 Play 商店。当然，这是最坏的情况，但你应该考虑一下。如果你什么都没有，你可以联系谷歌，就像我上面的安卓开发者建议的那样，但你可能会被拒绝。

这是一个非常复杂的案例，我想在你解决问题时看到它的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T00:05:48.513

如果开发者无法联系或不合作，并且您可以证明此应用包含您的知识产权，您可以向 Google 提交 DMCA 请求，要求他们将其从 GP 商店中删除。仔细阅读页面上的警告：

[http://support.google.com/bin/request.py?&product=androidmarket&contact_type=lr_dmca](http://support.google.com/bin/request.py?&product=androidmarket&contact_type=lr_dmca)

# objective-c - 范围在多级数组中扩展

> ID：14773799
> 
> 赞同：1
> 
> 时间：2013-02-08T13:38:14.177
> 
> 标签：objective-c, arrays

这是我的代码。

```
NSString* seats = @"NEWS";
NSMutableString *sp = [[NSMutableString alloc] initWithString:@"             "];
NSArray *dials=@[@[sp, sp, sp, sp], @[sp, sp, sp, sp]];
[dials[0][2] replaceCharactersInRange:NSMakeRange(5, 1) withString:[seats substringWithRange:NSMakeRange(3,1)]];
NSLog(@"dial 0 0 : %@",dials[0][0]);
NSLog(@"dial 0 1 : %@",dials[0][1]);
NSLog(@"dial 0 2 : %@",dials[0][2]);
NSLog(@"dial 0 3 : %@",dials[0][3]); 
```

这是我的控制台读数。

```
2013-02-08 08:23:26.114 [29075:11303] dial 0 0 :      S       
2013-02-08 08:23:26.115 [29075:11303] dial 0 1 :      S       
2013-02-08 08:23:26.115 [29075:11303] dial 0 2 :      S       
2013-02-08 08:23:26.115 [29075:11303] dial 0 3 :      S 
```

我怎样才能获得以下读数，这是我想要的？

```
2013-02-08 08:23:26.114 [29075:11303] dial 0 0 :              
2013-02-08 08:23:26.115 [29075:11303] dial 0 1 :              
2013-02-08 08:23:26.115 [29075:11303] dial 0 2 :      S       
2013-02-08 08:23:26.115 [29075:11303] dial 0 3 : 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:02:26.197

通过这样做：

```
NSArray *dials=@[@[sp, sp, [sp mutableCopy], sp], @[sp, sp, sp, sp]]; 
```

知道为什么吗？如果您认为该数组仅包含重复的对象。每个指针都指向同一个对象，除了 dials[0][2]，它指向一个复制的对象。

允许将重复的对象放在同一个数组中，但在概念上可能是错误的。所以还要考虑复制所有的对象。

另一种解决方案是用带有不可变字符串的可变数组用可变字符串替换不可变数组，在这种情况下，您还可以放置重复的对象，并且要更改对象，您应该替换它：

```
NSString *sp = @"             ";
NSArray*dials=@[[@[sp, sp, sp, sp]mutableCopy], [@[sp, sp, sp, sp]mutableCopy]];
NSString* replace= [dials[0][2] stringByReplacingCharactersInRange:NSMakeRange(5, 1) withString:[seats substringWithRange:NSMakeRange(3,1)]];
[dials[0] replaceObjectAtIndex: 2 withObject: replace]; 
```

# android - 在 BaseAdapter.getView() 中获取视图大小

> ID：14773807
> 
> 赞同：3
> 
> 时间：2013-02-08T13:38:30.537
> 
> 标签：android

我有一个包含 ListView 的活动，该列表是左侧的缩略图和右侧的一些文本，非常像联系人列表。
![在此处输入图像描述](../Images/bc5c0f3d796e10efcbc293ac0530229d.png)
问题是，缩略图是从 sdcard 的绝对路径加载的，每个图像大小约为 5mb。为了避免内存不足，我在本[教程](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#load-bitmap "教程")中创建了仅加载图像的缩放版本并且不占用大量内存的类。

嗯，有什么问题？因为，我必须传递我想要调整图像大小的宽度和高度（以 px 为单位），但是对于不同的设备，我在设置绝对值时会遇到问题。所以，我只是尝试通过 args 传递视图，然后在我的类中对其进行操作以获得宽度和高度，不错吧？好的，但它不起作用，因为缩略图还没有被绘制（我猜），我不能接受他的尺寸值。

如何从我的 lisview 适配器获取方法 getView() 中的大小？

```
/** short passage of getView() method */
ImageView image = (ImageView) view.findViewById(R.id.image_thumb);
Bitmap bMap = BitmapAdjusted.decodeSampleBitmap("/sdcardpath/", 
            image); // "image" is the view passed by args
image.setImageBitmap(bMap); 
```

这是问题所在：

```
public static decodeSimpleBitmap(String path, View view){
    /** unworth previous code */
    int width = view.getWidth(); // always give zero, getMeasuredWidth() too
    int height = view.getHeight(); // always give zero
    // options is BitmapFactory.Options class, declared before that do the magic
    options.inSampleSize = calculateInSampleSize(options, width, height);

} 
```

谢谢！

# servlets - 如何在 Mule 3.2 上发布具有相同路径但不同 URL 的两个服务

> ID：14773810
> 
> 赞同：0
> 
> 时间：2013-02-08T13:38:47.413
> 
> 标签：servlets, mule, esb, endpoint, inbound

我需要在 mule 上发布两个具有相同路径但 URL 不同的服务。像这样

```
https://localhost:8443/etc/app/version1/Service

https://localhost:8443/etc/app/version2/Service 
```

我在 web.xml 上使用 servlet 映射

```
<servlet-mapping>
        <servlet-name>muleServlet</servlet-name>
    <url-pattern>/app/*</url-pattern>
</servlet-mapping> 
```

并尝试使用两个不同的连接器，因为路径属性不允许我使用“version1/Service”或“version2/Service”

```
<servlet:connector
    name="conectorVersion1"
    servletUrl="https://localhost:8443/etc/app/version1/">
</servlet:connector>

<servlet:connector
    name="conectorVersion2"
    servletUrl="https://localhost:8443/etc/app/version2/">
</servlet:connector> 
```

最后，端点

```
 <flow
    name="FlowVersion1"
    processingStrategy="synchronous">

       <servlet:inbound-endpoint
        connector-ref="conectorVersion1"
        path="Service">
        <-- processors, jaxws-service, interceptors etc.. -->
       </servlet:inbound-endpoint>
    </flow>

   <flow
    name="FlowVersion2"
    processingStrategy="synchronous">

       <servlet:inbound-endpoint
        connector-ref="conectorVersion2"
        path="Service">
        <-- processors, jaxws-service, interceptors etc.. -->
       </servlet:inbound-endpoint>
    </flow> 
```

但我得到了这个例外：

```
 [[/etc]] StandardWrapper.Throwable: java.lang.IllegalStateException: 
 There are at least 2 connectors matching protocol "servlet", so the connector to use must be 
 specified on the endpoint using the 'connector' property/attribute. 
 Connectors in your configuration that support "servlet" are: conectorVersion1, conectorVersion2, 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:53:46.320

我不认为声明两个 servlet 连接器是有效的：只有一个 servlet 上下文，所以一个连接器就足够了。实际上，我*从不*声明 Servlet 连接器，因为默认配置可以正常工作。

所以只有以下配置：

```
<flow name="FlowVersion1" processingStrategy="synchronous">
    <servlet:inbound-endpoint
        path="version1/Service" />
    <set-payload value="version 1" />
</flow>

<flow name="FlowVersion2" processingStrategy="synchronous">
    <servlet:inbound-endpoint
        path="version2/Service" />
    <set-payload value="version 2" />
</flow> 
```

我能够在 servlet 容器（Jetty）中进行部署，并且可以`/{context}/app/version1/Service`毫无问题`/{context}/app/version2/Service`地运行。

# backbone.js - 骨干路由器奇怪的行为

> ID：14773811
> 
> 赞同：0
> 
> 时间：2013-02-08T13:38:48.070
> 
> 标签：backbone.js, routing, marionette

我已经定义了骨干路由器：

```
MyApp.router = new (Backbone.Marionette.Router.extend({
  routes: {
    "/m/:id": "openMovie",
    "m/:id": "openMovie"
  },

  openMovie: function(id) {...}
}); 
```

我的 html 有类似的链接`/m/123`。当我单击此链接时，主干不会触发`openMovie`功能 - 浏览器会打开新页面。在这种情况下，为什么骨干网不使用历史 API？如何用骨干或木偶修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:43:57.543

骨干`pushState`支持是可选的。初始化所有路由器后，[调用](http://backbonejs.org/#History)

```
 Backbone.history.start({pushState: true}) 
```

默认行为是`hashchange`使用 url 监听事件`#fragments`，因此如果您不想使用 pushState，请使用哈希 url 定义链接：

```
<a href="#/m/123"></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:21:39.100

如果你想要兼容的版本：

```
if (!Backbone.History.started) {

       // Enable pushState for compatible browsers
       var enablePushState = true;  

       // Disable for older browsers
       var pushState = !!(enablePushState && window.history && window.history.pushState);

       Backbone.history.start({ pushState: pushState });
     }

> 
```

# jquery - jQuery Fancybox iPad 和 iPhone 画廊问题

> ID：14773816
> 
> 赞同：0
> 
> 时间：2013-02-08T13:38:59.973
> 
> 标签：jquery, iphone, fancybox, tablet

我正在为响应式网站使用 jQuery Fancybox 插件。Fancybox 的第一版在 iPad 和 iPhone 上存在很多问题。

我决定使用 Fancybox 2 来轻松解决问题，但这会导致另一个问题。

如果我正在使用一个画廊，一旦 Fancybox 灯箱打开并浏览了画廊中的几张图像（一旦打开 fancybox，就使用下一个和上一个按钮）下一个和上一个按钮以及关闭按钮不再可见。

图像也变得透明，你不能关闭花式框也不能转到另一个图像。您必须刷新页面才能使其再次工作。

我没有 iPad 或 iPhone。我让我的朋友测试它，并且都遇到了同样的问题。但是，当我尝试使用 android 平板电脑或 android 手机时，一切都按预期工作。

我想知道是否有人有同样的问题，是否有人能够解决这个恼人的 iOS 问题？

**代码**

```
$('a[rel^=gallery_]').fancybox({
    helpers : {
        title : {
            type : 'inside'
        }
    },
    afterLoad : function() {
        this.title = (this.title ? ' - ' + this.title : '');
    }
}); 
```

# sql - 结果查看器无法执行项目列表中列数超过 655 的查询

> ID：14773828
> 
> 赞同：2
> 
> 时间：2013-02-08T13:39:54.847
> 
> 标签：sql, visual-studio-2008, sap, erp

我正在使用 Visual Studio 2008 的服务器资源管理器，我需要在数据库中搜索发票行。所以我找到了这个名为的表`ixvFact`，但是当我尝试检索结果时，Visual Studio 给了我以下错误并且没有显示结果。

> 结果查看器无法执行项目列表中列数超过 655 的查询。

这是什么意思？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:51:00.403

您可以指定要检索的列，而不是从表中选择所有列...我认为表中的列数有限制...这是非常糟糕的做法...

# image - 如何在 R 中解释 RGB 数组

> ID：14773830
> 
> 赞同：1
> 
> 时间：2013-02-08T13:39:58.623
> 
> 标签：image, r, rgb

我在解释从 R 中读取的图像中获得的 RGB 值时遇到了麻烦。

当 RGB 颜色范围为 0-255 时，我得到的数组显示 0-1 的值。我试图将它转换回 0-255 范围调整这样的脚本，

```
picturemax <- max(picture)
picturemin <- min(picture)
p.picture <- as.numeric(picture)
if (picturemax > 255 || picturemin < 0) 
p.picture <- (picture - picturemin)/(picturemax - picturemin)
p.picture 
```

从[https://stat.ethz.ch/pipermail/r-help/2003-January/029098.html](https://stat.ethz.ch/pipermail/r-help/2003-January/029098.html)检索 我只是将脚本中的值从 0-1 更改为 0-255，但数组仍然显示 0-1价值观，只是价值观不同。

我的图片文件也很大，并且该数组不适合 R 控制台。由于我想将 RGB 数据放入 Excel 工作表或作为文本文件，我不知道该怎么做或如何解决这个问题。

如果我的问题过于基本，我深表歉意，但我很高兴能得到所有帮助。有什么建议么？

干杯，玛丽亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:46:37.343

如果要将值从 (0,1) 转换为 (0,255)，为什么不将它们乘以 255 呢？

要将矩阵导出为文本文件以供电子表格或其他应用程序读取，您应该查看该`write.table` 函数。但是，如果您的数据太大而无法放入控制台，我怀疑在 Excel 或等效工具中打开它们会非常有帮助。

# ruby-on-rails - 从 Javascript 到 CoffeeScript

> ID：14773832
> 
> 赞同：0
> 
> 时间：2013-02-08T13:39:59.310
> 
> 标签：ruby-on-rails, twitter-bootstrap, ruby-on-rails-3.2, coffeescript

如何在 coffeeScript 中编写这个 javascript 代码？

```
$('#id_tab a').click(function (e) {
    $('ul.nav-tabs li.active').removeClass('active')
    $(this).parent('li').addClass('active')
}) 
```

当我把它放在我的 html.erb 文件中时它可以工作

所以我在 coffeeScript 文件中试试这个：

```
$ ->
    $('#id_tab a').click (e) ->
        $('ul.nav-tabs li.active').removeClass 'active'
        $(this).parent('li').addClass 'active' 
```

它不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:58:26.003

有一个名为[JS2Coffee](http://js2coffee.org/)的不错的站点，您可以使用它来检查您的脚本。您会看到您的咖啡脚本编译为：

```
$(function() {
  return $('#id_tab a').click(function(e) {
    $('ul.nav-tabs li.active').removeClass('active');
    return $(this).parent('li').addClass('active');
  });
}); 
```

相反，试试这个：

```
$ ->
    $('#id_tab a').click (e) ->
        $('ul.nav-tabs li.active').removeClass 'active'
        $(this).parent('li').addClass 'active'
        true
    true 
```

您可以查看此[StackOveflow](https://stackoverflow.com/questions/7042140/coffeescript-always-returns-in-anonymous-function)答案以获取更多信息，但 Coffeescript 始终返回最后一行。

# google-apps-script - 在 gApps 表单中显示上一个 Q 的答案

> ID：14773833
> 
> 赞同：0
> 
> 时间：2013-02-08T13:40:02.483
> 
> 标签：google-apps-script

我想在我的表单中提出一个问题来显示上一个问题的答案。我不是在询问问题逻辑或转到功能。例如：

Q1：你想要什么类型的主菜？肉 鱼 素

Q2：你更喜欢哪道菜？印度裔美国人墨西哥人

分页符。

Q3：在前面的问题中，您选择了 [Q2] [Q1] 主菜。

如果 Q1 的答案是肉类，Q2 的答案是印度，那么 Q3 应该显示：

在前面的问题中，您选择了印度肉类主菜。

这在 SurveyMonkey 中是可能的（使用方括号）。这可以在 Google 表单中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:24:01.290

我在老板的时候写了一些肮脏的代码

它是服务器端和客户端脚本的混合体，我可以在函数 q1H 和 q2H 中创建问题 Q3。

```
 var q1A = new Array(" Meat", " Fish", " Vegetarian")
 var q2A = new Array(" Indian" ," American", " Mexican")

function doGet(e) {
var app = UiApp.createApplication().setTitle("Dev Test Sitemap");
var mainPanel = app.createVerticalPanel()
var homePanel = app.createHorizontalPanel()

 var q1 = app.createLabel("Q1 What type of entree would you like?")
 var q1ListBox = app.createListBox().setName("q1ListBox") ;
  for (var i = 0; i < q1A.length; i++) {
    q1ListBox.addItem(q1A[i]);
  }

  var handlerQ1 = app.createServerHandler("q1H");
  q1ListBox.addChangeHandler(handlerQ1)

  mainPanel.add(q1);
 mainPanel.add(q1ListBox);

  var q2 = app.createLabel("Q2 Indian American Mexican?")
  var q2ListBox = app.createListBox().setName("q2ListBox") ;
  for (var i = 0; i < q2A.length; i++) {
     q2ListBox.addItem(q2A[i]);
   }

   var handlerQ2 = app.createServerHandler("q2H");
   q2ListBox.addChangeHandler(handlerQ2)

   mainPanel.add(q2);
   mainPanel.add(q2ListBox);

   mainPanel.add(app.createLabel("----------------------------------- pagebreak ---------------------") );

  var horP = app.createHorizontalPanel()
  //Q3: In the previous questions, you selected an [Q2] [Q1] entree.
  var  q3 = app.createLabel("In the previous questions, you selected an")
  horP.add(q3)

  var q2ans =new Array() 
  for (var i = 0; i < q2A.length; i++) {
     q2ans[i] = app.createLabel(q2A[i]).setId("q2A"+[i]).setVisible(false);
     horP.add(q2ans[i])

  }
   var q1ans =new Array() ;
   for (var i = 0; i < q1A.length; i++) {
     q1ans[i] = app.createLabel(q1A[i]).setId("q1A"+[i]).setVisible(false);
     horP.add(q1ans[i])
   }

   var  q32 = app.createLabel(" entree")
   horP.add(q32)

   mainPanel.add(horP);

   app.add(mainPanel);  //red
  return app.close();
 } 

 function q1H(e) {
   var app = UiApp.getActiveApplication();
   var q1ListBox =   e.parameter.q1ListBox;

   for (var i = 0; i < q1A.length; i++) {
     if (q1ListBox == q1A[i] ){
       app.getElementById("q1A"+[i]).setVisible(true);
    }

  }

    return app;
  }

  function q2H(e) {
   var app = UiApp.getActiveApplication();
   var q2ListBox =   e.parameter.q2ListBox;

    for (var i = 0; i < q2A.length; i++) {
     if (q2ListBox == q2A[i] ){
      app.getElementById("q2A"+[i]).setVisible(true);
     }

     }

  return app;
  } 
```

[工作示例](https://sites.google.com/a/lagaroo.com.br/dev-test/home/dev-test-q1-q2-q3)

# binary - 解释 1 位计数

> ID：14773834
> 
> 赞同：0
> 
> 时间：2013-02-08T13:40:02.987
> 
> 标签：binary

在 bitcount.c 中编写一个名为 bitCount() 的函数，该函数返回其无符号整数参数的二进制表示形式的 1 位数。记得填写识别信息并运行完成的程序来验证正确性。

```
 /*
    Name:
    Lab section time:
  */
  #include <stdio.h>
  int bitCount (unsigned int n);
  int main ( ) {
    printf ("# 1-bits in base 2 representation of %u = %d, should be 0\n",
      0, bitCount (0));
    printf ("# 1-bits in base 2 representation of %u = %d, should be 1\n",
      1, bitCount (1));
    printf ("# 1-bits in base 2 representation of %u = %d, should be 16\n",
      2863311530u, bitCount (2863311530u));
    printf ("# 1-bits in base 2 representation of %u = %d, should be 1\n",
      536870912, bitCount (536870912));
    printf ("# 1-bits in base 2 representation of %u = %d, should be 32\n",
      4294967295u, bitCount (4294967295u));
    return 0;
  }
  int bitCount (unsigned int n) {
    /* your code here */
  } 
```

有人可以帮我准确理解那问的是什么吗？bitCount 是否应该将输入的十进制转换为二进制，然后计算 1 的个数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:42:56.887

该函数没有“十进制”输入，它被传递纯（`unsigned`似乎）数字。它们将在大多数典型计算机上以二进制形式存储。

我猜它会返回这些值，例如：

*   `bitcount(0)`-> 0（因为 0 没有设置位）
*   `bitcount(1)`-> 1（因为 1在二进制中是 1 [2 ）]
*   `bitcount(2)`-> 1（因为2在二进制中是 10 [2 ）]
*   `bitcount(3)`-> 2（因为 3在二进制中是 11 [2 ）]

在调用函数的源代码中给出的数字的基数无关紧要，一旦程序运行，它将被转换为二进制。您可以将其称为`bitcount(01)`(octal) 或`bitcount(0x80)`，它仍然只是得到一个`unsigned int`可以假定其值存储在二进制中的值。

的递归算法`bitcount(x)`是这样的：

1.  如果 x 为 0，则返回 0
2.  如果 x 为 1，则返回 1
3.  返回 bitcount(x mod 2) + bitcount(x / 2)

请注意，伪代码不假定数字以任何特定`x`方式*存储*（无论是二进制还是其他），它适用于数字本身。伪代码中的文字是十进制的，但这只是符号。

# jquery - jQuery代码没有触发

> ID：14773839
> 
> 赞同：0
> 
> 时间：2013-02-08T13:40:15.283
> 
> 标签：jquery

我有一个 jQuery 弹出对话框，顶部有一个**关闭**链接。出于某种原因，这里从未调用过代码：我在调试器中看过。

我认为这很简单，因为开放代码可以正常工作。

javascript代码是：

```
$(document).ready(function(){
  $('#dialogOpen').click(function() {
    console.log("link clicked");
    openDialog('#dialog');
  });

$('#dialog').find('.ok')
  .on('click', function() {
    console.log("ok clicked");
    closeDialog(this);
  })
});

function openDialog(selector) {
  $(selector)
    .clone()
    .appendTo('#overlay')
    .show()
    .parent()
    .fadeIn('fast');
  }

function closeDialog(selector) {
  $(selector)
    .parents('#overlay')
    .fadeOut('fast', function() {
       $(this)
         .find('.dialog')
         .remove();
       });
} 
```

html片段：

```
 <div id="dialog" class="dialog">
     <a href="#" class="ok">Close Dialog</a>
  <div> 
```

完整代码在这里：[https ://gist.github.com/sfcarroll/4739040](https://gist.github.com/sfcarroll/4739040)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:55:17.640

由于其他人都在选择器而不是对象上应用事件，所以我认为我会以不同的方式处理它。

问题是您将事件添加到原始 html 中，但是当您`clone`使用 html 时，您不会将事件与它一起复制。添加一个`true`作为参数，你应该设置：

```
function openDialog(selector) {
  $(selector)
    .clone(true)
    .appendTo('#overlay')
    .show()
    .parent()
    .fadeIn('fast');
  } 
```

查看[文档](http://api.jquery.com/clone/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:44:30.200

你应该试试 ：

```
$('body').on('click', '.dialog .ok', function() {
    console.log("ok clicked");
    closeDialog(this);
  })
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:45:31.860

这段代码

```
$('#dialog').find('.ok')
  .on('click', function() {
    console.log("ok clicked");
    closeDialog(this);
  })
}); 
```

将事件绑定到**现有的 html 节点**。它在你的 new`#dialog`创建之前被调用，因此这些 new`#dialog`没有在点击他们的`.ok`. 原因是它`.clone`不会克隆绑定在克隆元素上的事件。

使用委托句柄，如下所示：

```
$(document).on('#dialog .ok', 'click', function () {
  // Your click handler here
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T13:46:00.893

您正在按钮本身上设置 .on 。它应该在一个父节点上，这样它就可以在它冒泡时捕捉到点击它。尝试：

```
$(document).on('click', '#dialog .ok', function() {
    console.log("ok clicked");
    closeDialog(this);
  })
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T13:46:01.193

在您的 openDialog 函数中，您正在克隆对话框并因此创建它的新实例。~~之后您要么必须绑定到 click 事件，要么使用`$('#dialog .ok').live('click', data, handler);`将其绑定到新的 DOM 元素。~~

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-08T13:51:49.857

```
$(document).ready(function(){
  $('#dialogOpen').click(function() {
    console.log("link clicked");
    openDialog('#dialog');
  });

});

function openDialog(selector) {
  $(selector)
    .clone()
    .appendTo('#overlay')
    .show()
    .parent()
    .fadeIn('fast');

    $('#dialog').find('.ok')
  .on('click', function() {
    console.log("ok clicked");
    closeDialog(this);
  });

}

function closeDialog(selector) {
  $(selector)
  .parents('#overlay')
  .fadeOut('fast', function() {
    $(this)
      .find('.dialog')
      .remove();
  });
} 
```

**[演示](http://jsfiddle.net/J9fWg/)**

最初，您已将 .dialog 类应用于包含 CSS 的#dialog div，`display:none`因此最初 DOM 将没有您可以绑定事件的 div，因此它没有触发。

# c# - 任务之间的区别 和查看结果

> ID：14773840
> 
> 赞同：5
> 
> 时间：2013-02-08T13:40:18.107
> 
> 标签：c#, asp.net-mvc, async-await

如果我只是返回一个视图，从任务返回它是否存在性能差异？

```
[HttpGet]
public Task<ViewResult> Index()
{
   return Task.FromResult(View());
}

[HttpGet]
public ViewResult Index()
{
   return View();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:20:20.040

在您的情况下，该`Task`版本可能会更慢，因为您只是增加了开销而`Task`没有任何好处。`Task`当您可以利用`async`-时，返回 a是有意义的`await`，也就是说，如果您实际上正在执行一些可以在您的方法中异步执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:04:59.120

> 异步操作的执行速度不会比标准同步操作快；它只是允许更有效地使用服务器资源。当一个动作想要一次执行多个异步操作时，可以看到异步代码的最大好处之一。

此信息来自名为`Professional ASP.NET MVC 4`

还有一个关于这个主题的例子

```
public class PortalController : Controller {
    public ActionResult Index(string city) {
        NewsService newsService = new NewsService();
        WeatherService weatherService = new WeatherService();
        SportsService sportsService = new SportsService();
        PortalViewModel model = new PortalViewModel {
            News = newsService.GetNews(city),
            Weather = weatherService.GetWeather(city),
            Sports = sportsService.GetScores(city)
        };
        return View(model);
    }
} 
```

请注意，呼叫是按顺序执行的，因此响应用户所需的时间等于拨打每个单独呼叫所需的时间之和。如果调用是 200、300 和 400 毫秒 (ms)，那么总的操作执行时间是 900 毫秒（加上一些微不足道的开销）。

同样，该操作的异步版本将采用以下形式：

```
public class PortalController : Controller {
    public async Task<ActionResult> Index(string city) {
        NewsService newsService = new NewsService();
        WeatherService weatherService = new WeatherService();
        SportsService sportsService = new SportsService();
        var newsTask = newsService.GetNewsAsync(city);
        var weatherTask = weatherService.GetWeatherAsync(city);
        var sportsTask = sportsService.GetScoresAsync(city);
        await Task.WhenAll(newsTask, weatherTask, sportsTask);
        PortalViewModel model = new PortalViewModel {
            News = newsTask.Result,
            Weather = weatherTask.Result,
            Sports = sportsTask.Result
        };
        return View(model);
    }
} 
```

请注意，这些操作都是并行启动的，因此响应用户所需的时间等于最长的个人调用时间。如果调用是 200、300 和 400 毫秒，那么总的动作执行时间是 400 毫秒（加上一些微不足道的开销）。

# html - 如何从 HTML 源代码中下载所有链接的图像？

> ID：14773844
> 
> 赞同：1
> 
> 时间：2013-02-08T13:40:31.790
> 
> 标签：html, image, automation, web-scraping

**总体任务：** 出于打印的目的，我想下载 330 张从 Pinterest 板链接的图像。请注意，不是您在访问版块时看到的缩略图，而是它们链接到的较大图像。

**背景：** 转到 Pinterest.com 的选择板并查看源代码。相关的高分辨率图片链接可以在属性内的页面源中看到`data-closeup-url`

**示例 URL** [http://pinterest.com/stonegarden/misc/](http://pinterest.com/stonegarden/misc/)

相关董事会仅限邀请，我认为这可能与未“登录”的脚本等有关。

我的问题是：我怎样才能以最少的努力从板上下载所有这些 330 幅高分辨率图像？即使用脚本、使用 iMacros 或其他任何东西。最终结果将是一个文件夹，其中包含所有下载的 330 张图像。

根据要求编辑：

**到目前为止我所尝试的** 我没有使用任何特定的编程语言，我的技能在那个领域是有限的。无论哪种方式，我想问题将出在权限上。

1.  使用 Firefox 扩展 iMacros 自动化 - 失败，因为我无法让它对图像 URL 和其他原因做任何有用的事情
2.  Benno 提供的解决方案 - 我可以粘贴相关的 URL，但失败并显示“对请求的资源没有权限”

那么，Pinterest 如何区分用户单击缩略图以获取大图像，以及 Safari 尝试通过“下载”窗口下载相同的资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:55:21.080

打开浏览器的 Web 检查器并转到控制台。

输入这段代码：

```
var s = ''; $('div[data-closeup-url]').each(function() { 
s+= $(this).data('closeup-url') + "\n"; 
}); s; 
```

这将为您提供所有图像的 URL，然后您可以将它们复制并粘贴到诸如 jdownloader 之类的 URL 捕获实用程序中。无需执行与登录其服务器相关的任何操作。或者只是为每个 URL 编写一个脚本到 file_get_contents (php)。

如果您使用 Safari，请打开下载窗口并将 URL 列表粘贴到下载窗口（ctrl+v 或 cmd+v）并下载所有这些（在 mac 上的 safari 6 中测试）

# garbage-collection - 如何监控 haxe cpp 垃圾收集器？

> ID：14773846
> 
> 赞同：2
> 
> 时间：2013-02-08T13:40:41.850
> 
> 标签：garbage-collection, monitoring, performance-testing, haxe

我想确保垃圾收集器不会在 haxe（cpp 目标）中过度使用。

我已经拥有大型对象池和频繁重用的对象，我设法有效地回收了这些对象。但仍有一些放缓。我确信我可以通过减少垃圾收集来限制一些不一致的减速和跳帧。

如何收集有关 gc 的数据？我想查看收集的类列表、它们被收集的次数以及在 GC 中注册的对象数量。

有选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:08:03.550

`untyped __cpp__('code');`将让您执行任意 cpp 代码（按原样传递）。使用这种结构，您可以访问任何内部机制，包括垃圾收集器，因此如果您查看 gc 实现，您可以做任何您想做的事情。你也可以在haxe编译成cpp后直接patch gc部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T22:09:56.510

对于 Haxe 3.1，使用 cpp.vm.ExecutionTrace.traceFunctions(); , traceLines, traceOff

# wpf - 当在 WPF 中单击图像时，我想放置一个蓝色的选择边框

> ID：14773847
> 
> 赞同：2
> 
> 时间：2013-02-08T13:40:46.297
> 
> 标签：wpf, image

我的应用程序中有两张图片（一辆汽车和一辆摩托车）和一个文本框。当我在文本框中写汽车时，应该选择图像汽车（通过制作蓝色或红色边界可见），另一个（摩托车）应该具有灰色效果。

当我在文本框中写摩托车时，反之亦然，即摩托车应该有一个边界并且汽车是灰色的。有谁知道我怎样才能使它成为可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:41:33.117

在您的图像中使用如下方法

```
 <Border BorderThickness="2">
        <Border.Style>
            <Style TargetType="{x:Type Border}">
                <Setter Property="BorderBrush" Value="LightGray"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=targetTextBox, Path=Text}" Value="Car">
                        <Setter Property="BorderBrush" Value="Red"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Border.Style>
        <Image>
            <Image.Style>
                <Style TargetType="{x:Type Image}">
                    <Setter Property="Opacity" Value="0.4"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ElementName=targetTextBox, Path=Text}" Value="Car">
                            <Setter Property="Opacity" Value="1"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Image.Style>
        </Image>
    </Border> 
```

您还可以设置您想要的任何其他属性。**只需记住在`Style`**您定义的`Datatrigger`s 中设置默认值，该 s 将有条件地更改这些值

# visual-c++ - MSVC++ 在“附加到进程”上导致崩溃 0x80000003

> ID：14773849
> 
> 赞同：1
> 
> 时间：2013-02-08T13:41:00.763
> 
> 标签：visual-c++, dll, visual-studio-debugging, dll-injection

我正在将 dll 注入第三方程序并使用 MSVC 调试该 dll。我已经正常运行了一段时间，直到最近对程序的更新现在导致每次我在注入我的 dll 时将调试器附加到进程时导致 MSVC 崩溃。我的 dll 仍然正常运行，我只是无法调试它，因为附加 MSVC 会使主机程序崩溃。

事件视图显示：

```
Faulting application name: SomeApp.exe, version: 1.0.1023.0, time stamp: 0x5109728a
Faulting module name: MyDLL.dll, version: 0.0.0.0, time stamp: 0x5114e8b3
Exception code: 0x80000003
Fault offset: 0x006f3b28
Faulting process id: 0x1b80
Faulting application start time: 0x01ce05f71b9d65a9
Faulting application path: C:\SomeApp.exe
Faulting module path: c:\programming\MyDLL\debug\MyDLL.dll
Report Id: 8762e85d-71ea-11e2-a78e-4495fc99073a 
```

如果检测到附加的调试器，应用程序现在是否可能会自行崩溃？我想指出，我的 DLL 是一个合法的服务器端 mod，不违反任何 EULA/TOS 或类似的东西。它通过替换宿主程序中某些对象的某些虚拟方法表 (VMT) 指针（如果相关）来操作。

**更新**我可以使用 MSVC 调试我的 dll 的 OnAttach() 部分，但是一旦执行返回到主机进程，它就会崩溃。

# ajax - 使用 ajax 重新绘制 JQplot 图表

> ID：14773851
> 
> 赞同：1
> 
> 时间：2013-02-08T13:41:04.063
> 
> 标签：ajax, json, jqplot

我一直在尝试以不同的方式解决这个问题，但没有让它按预期工作，我觉得这没什么大不了的（我真的希望如此）但我在 Ajax 和 jQuery 方面的经验和技能有点有限为什么我呼吁你的专业知识！

我正在制作一张类似于[http://www.jqplot.com/tests/data-renderers.php](http://www.jqplot.com/tests/data-renderers.php)的图表。但在我的情况下，json文件是根据用户从选择框中选择的值生成的。我正在使用 2 个文件和 ajax 调用来完成此操作：

**-AnnualB.html**是选择框所在的文件，应该显示图表。

**-Index.php**是对数据库进行查询的文件（使用从 AnnualB.html 中的选择框获得的值）并生成 json 数组。

在 AnnualB.html 中，我使用 GET 方法从选择框中检索值并将其发送到 Index.php，后者生成 json 数据。基于该json数据，必须在AnnualB中创建图表......这就是我的问题所在。生成图表的函数工作正常，发送选择值并返回 json 的调用也正常工作（已使用 Firebug 检查），但我知道缺少一些东西（但还不知道什么），因为我没有' t 设法将 json 数据传递给生成图表的函数。

我在 AnnualB.html 中的代码是这样的（用...缩写一些不相关的信息）：

***生成图表的功能***（如果传递了json数据，则可以正常工作）

```
function CreateGraph() { 
 $(document).ready(function(){
var ajaxDataRenderer = function(url, plot) {
    var ret = null;
    $.ajax({
        async: false,
        url: url,
        dataType:'json',
        success: function(data) {
            ret = data; }
    });
   return ret; };
$.jqplot.config.enablePlugins = true;
var jsonurl = "./index.php";
var plotData = ajaxDataRenderer(jsonurl); 
var series = ...
plot1 = $.jqplot('Chart1', series,{...}} 
```

***Ajax 调用***（可能是我的错误/遗漏在哪里）

```
function LoadGraph(int)
{
if (window.XMLHttpRequest)
  {xmlhttp=new XMLHttpRequest();}
else
  {xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}
xmlhttp.open("GET","index.php?tasel="+int,true);
xmlhttp.send();
xmlhttp.onreadystatechange=function()
  {
    CreateGraph(int)
    }
} 
```

***选择框***

```
<select name="tasel" size="1" onchange="LoadGraph(this.value)">
<option value="">Select accounts type:</option>
  <option value="3">Tuloslaskelma</option>
  <option value="2">Tasevastattava</option>
  <option value="1">Tasevastaava</option>
</select> 
```

The related code in Index.php goes like this (Is working ok when the value of the select box (tasel) is passed)):

```
$tasel = $_REQUEST['tasel'];
if ($tasel == ...2)
{...}
.
.
.
echo "[",$selite, ",";// These 2 variables create the json array
echo $finaljson, "]"; 
```

提前感谢您的耐心和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T08:22:01.013

我意识到这个问题的答案比我预期的要简单。而不是进行整个`function LoadGraph(int)`ajax 调用，我只需要调用`?tasel="+int`函数中的 tasel 值来生成这样的图表（它已经在进行 ajax 调用）：

```
function CreateGraph() { 
    $(document).ready(function(){
        var ajaxDataRenderer = function(url, plot) {
            var ret = null;
            $.ajax({
                async: false,
                url: url,
                dataType:'json',
                success: function(data) {
                    ret = data; 
                }
            });
            return ret; 
        };

    $.jqplot.config.enablePlugins = true;
    var jsonurl = "./index.php?tasel="+int;
    var plotData = ajaxDataRenderer(jsonurl); 
    var series = ...
    plot1 = $.jqplot('Chart1', series,{...}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:06:04.780

```
var plot1 = undefined;
var plotOptions = undefined;

function CreateGraph() { 
    $.ajax({
        async: false,
        url: "./index.php",
        dataType:'json',
        success: function(data) {
            var series = fn... // Convert your json Data to array
            if(plot1 != undefined)
            {
                plot1.destroy();
            }
            plot1 = $.jqplot('Chart1', series, plotOptions);
        }
    });
}

$(function(){
    $.jqplot.config.enablePlugins = true;
    plotOptions = {...}; // jqPlot options
    CreateGraph();
}); 
```

希望这可以帮助你..

# java - jms在swing应用中发送消息时的最佳实践？

> ID：14773852
> 
> 赞同：2
> 
> 时间：2013-02-08T13:41:05.960
> 
> 标签：java, queue, jms, activemq

在我的 java swing 应用程序中，我实现了一个与 jms 服务器通信的 jms 客户端。这工作正常。

目前，当我的应用程序启动时，我创建了一个连接和一个会话：

```
ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory
connection = connectionFactory.createConnection();
connection.start();
session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE); 
```

接下来，当我需要向主题发送消息时，我创建一个主题（将消息发送到）、一个临时队列（接收回复）、一个生产者（发送消息）和一个消费者（实际阅读回复） ：

```
Destination destination = session.createTopic ...
MessageProducer producer = session.createProducer ...
Destination tempDest = session.createTemporaryQueue(); 
MessageConsumer responseConsumer = session.createConsumer(tempDest);
producer.send(msg); 
```

我想知道在这种情况下最佳做法是什么？

当我需要发送消息时，我是否可以简单地创建所有内容，或者将 Destination、MessageProducer、MessageConsumer 保存在某处并重新使用它会更好。当我决定重新使用这些对象时，有什么特别需要注意的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T14:27:38.133

您应该重用您能够重用的对象。

该连接可能会重新用于您的整个应用程序，因为它是线程安全的。

会话对象不是线程安全的，在这种情况下，您应该坚持每个线程一个会话。

你可以作弊。使用`org.apache.activemq.pool.PooledConnectionFactory`它，它将设置一个会话池、连接池和生产者池。

您仍然需要编写`connection.createSession(..`，`session.close()`但这只是从池中获取和释放对象。

如果您对并发有细粒度的控制，那么实际重用您的对象可能会更容易，但这种情况很少发生。

# c# - Foreach 循环输出不正确

> ID：14773853
> 
> 赞同：0
> 
> 时间：2013-02-08T13:41:09.273
> 
> 标签：c#

所以我为每个循环嵌套了这些，第二个循环采用第一个循环中计算的“访问”。但是，当它输出信息时，它会进行第一次访问，然后换页并继续循环，打印出第一次循环中出现的所有访问。如何让它在工作表 1 上打印所有访问，然后移动到嵌套循环并打印出这些结果？

```
int r = 1;
int j = 1;
int cell = 0;
//loop that places Visit on Sheet 1 of Excel
for (int i = 1; i < visits.Count(); i++)
  {
   Visit visit = visits[i];
   decimal? charges = visit.TotalCharges();
   decimal? payments = visit.TotalPayments();
   decimal? totAdj = visit.PaymentAdjustments.Where(x => x.nrv_cd.Trim() == "C01").Sum(s => s.pmt_pst_at);
   decimal? actbalance = charges - (payments + totAdj);
   CareGiver attending = visit.AttendingPhysicianCareGiver();

   workbook.AddCell(r, cell++, visit.Person.DisplayName());
   workbook.AddCell(r, cell++, visit.vst_ext_id.Trim());
   workbook.AddCell(r, cell++, visit.LosFormatted());
   workbook.AddCell(r, cell++, visit.CodeDetail.cod_dtl_ds);
   workbook.AddCell(r, cell++, visit.CodeDetail.cod_dtl_ext_id.Trim());
   workbook.AddCell(r, cell++, charges);
   workbook.AddCell(r, cell++, payments);
   workbook.AddCell(r, cell++, totAdj);
   workbook.AddCell(r, cell++, actbalance);
   r++;
   workbook.ChangeWorksheet(2);

      //when moving to this nested loop, it picks up all charge codes for that visit
      foreach (Charge c in visit.Charges)
       {
        workbook.AddCell(j, 0, visit.vst_ext_id.Trim());
        workbook.AddCell(j, 1, c.ChargeDefinition.chg_cod_ext_id.Trim());
        j++;
       }
      //when moving to this nested loop, it picks up all adjustment codes for that visit
      foreach (PaymentAdjustment pa in visit.PaymentAdjustments)
       {
        workbook.AddCell(j, 0, visit.vst_ext_id.Trim());
        workbook.AddCell(j, 1, pa.ChargeDefinition.chg_cod_ext_id.Trim());
        j++;
       }

        workbook.ChangeWorksheet(1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:50:11.953

您可以做的一件事是添加更多“ChangeWorksheet”命令。另一种是再次重复整个访问循环。

方法 1 正是您已经实现的，我不得不假设由于某种原因不是您想要的。但是，我确实想知道为什么会这样……您会得到相同的结果。

它具体涉及打印一次访问，然后更改页面并打印该访问的详细信息，然后将页面更改回并移动到外部循环的第二次迭代。

方法 2 看起来像这样：

```
for (int i = 1; i < visits.Count(); i++)
{

   Visit visit = visits[i];
   decimal? charges = visit.TotalCharges();
   decimal? payments = visit.TotalPayments();
   decimal? totAdj = visit.PaymentAdjustments.Where(x => x.nrv_cd.Trim() == "C01").Sum(s => s.pmt_pst_at);
   decimal? actbalance = charges - (payments + totAdj);
   CareGiver attending = visit.AttendingPhysicianCareGiver();

   workbook.AddCell(r, cell++, visit.Person.DisplayName());
   workbook.AddCell(r, cell++, visit.vst_ext_id.Trim());
   workbook.AddCell(r, cell++, visit.LosFormatted());
   workbook.AddCell(r, cell++, visit.CodeDetail.cod_dtl_ds); 
   workbook.AddCell(r, cell++, visit.CodeDetail.cod_dtl_ext_id.Trim());
   workbook.AddCell(r, cell++, charges);
   workbook.AddCell(r, cell++, payments);
   workbook.AddCell(r, cell++, totAdj);
   workbook.AddCell(r, cell++, actbalance);
   r++;
}

//new code
workbook.ChangeWorksheet(2);
for (int i = 1; i < visits.Count(); i++)
{
    Visit visit = visits[i];
    //when moving to this nested loop, it picks up all charge codes for that visit
    foreach (Charge c in visit.Charges)
    {
      workbook.AddCell(j, 0, visit.vst_ext_id.Trim());
      workbook.AddCell(j, 1, c.ChargeDefinition.chg_cod_ext_id.Trim());
      j++;
    }
    //when moving to this nested loop, it picks up all adjustment codes for that visit
    foreach (PaymentAdjustment pa in visit.PaymentAdjustments)
    {
      workbook.AddCell(j, 0, visit.vst_ext_id.Trim());
      workbook.AddCell(j, 1, pa.ChargeDefinition.chg_cod_ext_id.Trim());
      j++;
    }
} 
```

具体来说，打印所有访问，更改页面，通过另一个打印所有详细信息的循环。只更改一次页面，但您必须经历两次访问循环。

关于编写代码要记住的一件事是，它总是按顺序执行，除非你告诉它不要这样做。这包括循环和其他东西。它将始终按照其写入的顺序执行。如果您希望在*所有*访问之后打印详细信息，则必须先告诉它打印所有访问，然后再告诉它打印*任何*详细信息。

# php - 单个表单元素内的多个 PayPal 按钮

> ID：14773856
> 
> 赞同：1
> 
> 时间：2013-02-08T13:41:24.050
> 
> 标签：php, forms, paypal

目前我可以在表单元素中使用单个贝宝按钮，例如：

```
<form id="pkg1" name="_xclick" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">

                    <input type="hidden" name="cmd" value="_xclick"/>
                    <input type="hidden" name="business" value="seller_1360303883_biz@gmail.com"/>
                    <input type="hidden" name="currency_code" value="USD"/>
                    <input type="hidden" name="item_name" value="Digital Download"/>
                    <input type="hidden" name="amount" value="$<?php  echo $price1 ?>"/>
                    <input type="hidden" name="return" value="https://www.sandbox.paypal.com/cgi-bin/success.php"/>
                    <input type="hidden" name="notify_url" value="notify.php"/>
                    <input type="image" src="http://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!"/>

                </form> 
```

我想知道是否有一种方法可以将多个贝宝按钮放在一个表单中？我不是在谈论添加到购物车。那么有没有一种方法可以让我在以单一形式进行个人交易时进行交易？

提前感谢

# javascript - angularjs 和 $http 请求

> ID：14773857
> 
> 赞同：2
> 
> 时间：2013-02-08T13:41:25.867
> 
> 标签：javascript, http, service, angularjs

您好，我是 AngularJs 的新手，正在尝试从我的服务器获取 json 数据。当服务被执行时，我在 Fiddler 中看到了明确的响应。但是没有执行成功或错误函数，因此服务返回一个空数组。

```
var app = angular.module('imageApp', []);

app.service('imageService', function ($http) {
    var imageModels = [];
    this.Images = function (url) {
        $http({ method: 'GET', url: url }).success(function (data) {
            imageModels = data;
        }).error(function (data) {
            imageModels = data || "Request failed";
        });

        return imageModels;
        };
    };
});

app.controller('ImageController', function (imageService, $scope) {
    $scope.fetch = function (url) {

        $scope.url = url;
        $scope.ImageModels = imageService.Images($scope.url);
    };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T16:29:46.277

$http 异步返回结果。因此，`return imageModels`将在 success() 或 error() 回调有机会运行之前执行。您需要等待 $http 创建的承诺来解决——在您的控制器中使用 then() 。

而不是在这里重复，请参阅@Pete BD 的解决方案：[https ://stackoverflow.com/a/12513509/215945](https://stackoverflow.com/a/12513509/215945)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T13:40:04.477

像这样更新您的服务。

```
app.service('imageService', function ($http, $q) {
    this.Images = function (url) {
        return $http({ method: 'GET', url: url }).success(function (data) {
            $q.resolve(data);
        }).error(function (data) {
            $q.reject(data || "Request failed");
        });
    };
}); 
```

然后是您的控制器，您现在可以等待从服务返回的承诺。

```
imageService.Images($scope.url)
    .then(function(response){
        // success
    }).catch(function(error){
        // error
    }) 
```

所以发生了什么事？在您的服务上，请注意我们添加`$q`了一个承诺，以便我们可以`reslove`和`reject`响应，`$http`并使其在控制器上“可用”。

编写服务来处理 $http 请求对我来说总是很麻烦，所以我创建了这个[Angular 模块](https://github.com/jofftiquez/angular-http-assist)来为我处理事情。如果你愿意，你可以检查一下。

# ios - 从循环中获取值以存储在数组中

> ID：14773861
> 
> 赞同：0
> 
> 时间：2013-02-08T13:41:36.780
> 
> 标签：ios

我有这段代码，我正在检查我的应用程序中存在的歌曲并将歌曲的数量存储在 NSMUTABLEArray 中，但是有问题总是显示为 null

```
 for (int i = 1; i < 100; ++i) {
    // Load the plist
    NSString *plist = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%d",i] ofType:@"mp3"];
    if (nil == plist) {
        NSLog(@"not found (%i)", i);
        continue;
    }

    NSLog(@"Found Songs (%i)",i);

    [MYNSMUTABLEArray addObject:[NSNumber numberWithInt:i]];

    NSLog(@"%@",MYNSMUTABLEArray); 
```

}

i 变量工作得很好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:48:08.203

您需要创建可变数组，以便存在一个对象来存储数据。我认为目前的代码正在将`addObject:`消息发送到`nil`.

我强烈建议使用比 更好的变量名`MYNSMUTABLEArray`，所以这是我的代码片段，应该**在**循环之前。

```
NSMutableArray* myMutableArray = [NSMutableArray alloc] init]; 
```

然后在您添加对象的地方，您将使用：

```
[myMutableArray addObject:@(i)]; 
```

*引导说明：*一个小提示，您可以使用`@`文字自动将原始`int`值装箱到`NSNumber`对象中。这在`addObject:`示例中使用，格式为`@(int)`。

# javascript - 通过 javascript 设置初始比例 - Android 不向外扩展

> ID：14773869
> 
> 赞同：1
> 
> 时间：2013-02-08T13:41:48.057
> 
> 标签：javascript, android, jquery, html, css

我建立了一个（半）响应式站点，最小宽度为 768 像素。这是因为内容对于比 iPad 更小的屏幕并不实用。

我`<meta name="viewport" content="initial-scale = 1.0, maximum-scale = 1.0" />` 在 HTML 的头部，然后在 CSS 的主体上设置了最小宽度。

但是，我仍然希望该网站在 iPhone、Nexus 等移动设备上看起来像样。

我所做的是一些像这样的JavaScript：

```
if (document.documentElement.clientWidth < 480) {
            document
                .querySelector("meta[name=viewport]")
                .setAttribute('content', 'initial-scale=0.4', 'maximum-scale=0.4', 'width=768');
        }; 
```

这在 iPhone 上运行良好，可将站点缩小以适应视口，然后用户可以根据需要放大。

这段代码在 Android 上的行为方式不同，相反，页面加载时会放大到左上角，用户必须缩小才能查看整个页面。

有人对如何在 Android 上实现这一点有任何想法吗？还是不行？

谢谢

# objective-c - 如何在调用执行任何操作的函数时显示 UIActivityView？- 目标-c

> ID：14773870
> 
> 赞同：0
> 
> 时间：2013-02-08T13:41:52.520
> 
> 标签：objective-c, uitableview, uiactivityindicatorview

我有一个`UITableView`，当我触摸它的一行时，我调用`myFunction`它执行任何操作，然后重新加载表。现在我想显示`UIActivityIndicator`一会儿我打电话`myFunction`。在这些情况下采用什么方法？

这是我的代码：

```
-(void)collectionView:(UICollectionView*)collectionview didSelectItemAtIndexPath:(NSIndexPath*) indexPath {

[self showLoader];
[self performSelectorInBackground:@selector(myFunction:) withObject:indexPath];
[self hideLoader];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:09:57.880

我更喜欢使用这个[MBProgressHUD](https://github.com/jdg/MBProgressHUD)。

这是在加载数据时调用 UIActivityIndi​​cator 的好例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:58:13.050

在您的通话中添加一些延迟：

```
-(void)collectionView:(UICollectionView*)collectionview didSelectItemAtIndexPath:(NSIndexPath*) indexPath 
{
      [self showLoader];
      [self performSelector:@selector(myFunction:) withObject:indexPath afterDelay:1.0];
      [self hideLoader];
} 
```

祝你好运...！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:20:55.360

在此代码`UIActivityIndicator`显示在状态**栏中**

```
-(void)collectionView:(UICollectionView*)collectionview didSelectItemAtIndexPath:(NSIndexPath*) indexPath {

    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    [self showLoader];
    [self performSelector:@selector(myFunction:) withObject:indexPath afterDelay:1.0];

    [self hideLoader];
    } 
```

并停止`UIActivityIndicator`在末尾编写以下代码`myFunction`

```
[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO]; 
```

# c# - 查询错误，错误“SET 语句附近的语法错误”

> ID：14773875
> 
> 赞同：1
> 
> 时间：2013-02-08T13:42:03.797
> 
> 标签：c#, sql

这段代码有什么问题

```
String updateCmd = String.Format(@"UPDATE [admins] 
    SET [authority type] = '{0}', 
    SET [signature] = N'{1}', 
    SET [message] = N'{2}' 
    WHERE '{3}'", authorityType, signature, msg, condition); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:43:09.413

你应该只`SET`在语句上使用一个子句`UPDATE`。

```
UPDATE [admins] 
SET [authority type] = '{0}',
    [signature] = N'{1}', 
    [message] = N'{2}' 
WHERE '{3}' 
```

还有一件事，请参数化您的查询以避免`SQL Injection`。使用`Command`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:43:35.183

不要重复`SET`

```
 String updateCmd = String.Format("UPDATE [admins] SET [authority type] = '{0}',
                    [signature] = N'{1}',  [message] = N'{2}' WHERE '{3}'", 
                    authorityType, signature, msg, condition); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:43:36.447

您不需要多组，只需一组。

# javascript - 将数据从本地上下文发送到 Web 上下文 (WINJS)

> ID：14773879
> 
> 赞同：0
> 
> 时间：2013-02-08T13:42:10.443
> 
> 标签：javascript, windows-8, winjs, webcontext

我有一个程序，我在本地上下文中有一个页面，在这个页面中我有一个 iframe，它的内容在 web 上下文中。现在我想将一些数据从本地上下文发送到网络上下文。我该怎么做呢。

当地的

```
var node = document.createElement("iframe");
node.src = 'ms-appx-web:///pages/mapView/mapView.html?latitude=' + coordinates.latitude + '&longitude=' + coordinates.longitude;
node.style.width = '100%';
node.style.height = '100%';
node.onload = function () {
    node.contentWindow.postMessage(JSON.stringify(data), "ms-wwa-web://" + 
                                   document.location.host);
}
document.querySelector('#insert').appendChild(node); 
```

在 iframe 我做：

```
window.addEventListener('message', receiveMsg, false); 
```

我有一个 ajax 调用，在那里我得到了一些数据，但是因为我无法在 web 上下文中访问 ajax 调用，所以我想从这里发送一些数据到 mapView.html。

问题是。我会通过 Get Parameter 发送一些值，但我有太多的数据。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:55:59.947

尝试切换此行：

```
node.contentWindow.postMessage(JSON.stringify(data), "ms-wwa-web://" + 
                               document.location.host); 
```

...对此：

```
node.contentWindow.postMessage(JSON.stringify(data), "*"); 
```

如果可行，您应该可以在 Win 8 应用程序中执行此操作（出于安全原因，不会在 Web 应用程序中执行此操作），但如果您想进一步锁定它，我认为您只需要更改第二个参数为以下之一：

*   “ms-www-web:///”（注意三斜杠）
*   “ms-www-web:///pages/”

# c# - CheckBox [Inside ListBox ItemTemplate] Checked 事件未触发

> ID：14773883
> 
> 赞同：0
> 
> 时间：2013-02-08T13:42:21.083
> 
> 标签：c#, silverlight, windows-phone-7, xaml, windows-phone-8

这是我的`xaml`

```
 <ListBox x:Name="HistoryList"          
                     ItemsSource="{Binding HistoryCollection}" 
                       >
        <ListBox.ItemTemplate >
            </DataTemplate>                 
                    <CheckBox x:Name="UpCheckBox"   Height="50" Width="50" >
                        <interactivity:Interaction.Triggers>
                            <interactivity:EventTrigger EventName="Checked">
                                <interactivity:InvokeCommandAction Command="{Binding UpCheckedCommad}" CommandParameter="{Binding ElementName=UpCheckBox}"></interactivity:InvokeCommandAction>
                            </interactivity:EventTrigger>
                        </interactivity:Interaction.Triggers>
                    </CheckBox>                 
            </DataTemplate>
        </ListBox.ItemTemplate >
    </ListBox > 
```

在`ViewModel`我用过`GalasoftMVVM Command Binding`

```
 public ICommand UpCheckedCommad
    {
        get { return new RelayCommand<Object>(x => { PerformUpforTracks(x); }); }
    }

    void PerformUpforTracks(object x)
    {
        //TODO 
    } 
```

我在`CheckBox`里面使用了一个。`ListBox ItemTemplate`但是没有得到里面的 `Checked`事件`CheckBox`。 我想从我的 ViewModel 中获取 Checked Event。谁能有任何想法来解决这个问题？`ViewModel`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:48:19.347

ListBox.ItemTemplate 的每个实例都被自动赋予“集合中的当前项”作为其 DataContext。在您的情况下，这是 HistoryCollection 中的每个单独项目。在您的示例中，EventTrigger 正在您当前的 HistoryItem 实例中搜索“ThumbsUpCheckedCommad”。

为了强制 EventTrigger 在您想要的 ViewModel 中搜索，您需要指定命令绑定的“Source”属性。我建议使用RelativeSource 语法，在树中搜索最后一个控件以将您的ViewModel 作为其DataContext。

它看起来像这样。

```
{Binding Path=ThumbsUpCheckedCommand, RelativeSource={RelativeSource AncestorType={x:Type ListBox}}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T14:05:35.577

我`Command`通过这种方式绑定得到它

```
Command="{Binding Path=DataContext.UpCheckedCommad,
          ElementName=HistoryList}" 
```

# linux - 如何获取 MPICH 的 mpd 工具

> ID：14773887
> 
> 赞同：0
> 
> 时间：2013-02-08T13:42:34.343
> 
> 标签：linux, cluster-computing, fedora, mpich

我在安装 MPICH 时遇到一个错误，即缺少 mpd 文件。您能否建议我提供一些链接，我可以在其中获得 MPI 的 mpd 工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:02:35.953

使用`Hydra`它是一个用于启动并行作业的进程管理系统。Hydra 旨在与多个守护进程（如 ssh、rsh、pbs、slurm 和 sge）一起工作。.

```
http://www.mpich.org/static/tarballs/3.0.2/hydra-3.0.2.tar.gz 
```

# variables - Wolfram Mathematica 求解特定方程

> ID：14773890
> 
> 赞同：1
> 
> 时间：2013-02-08T13:42:39.267
> 
> 标签：variables, wolfram-mathematica, equation, subscript, wolframalpha

我正在使用 Wolfram Mathematica 8，我想让它为变量 t 求解这个方程： ![在此处输入图像描述](../Images/6c288526c9a8b8b4c8d8c1d71aa4f109.png)

它可能涉及使用名称较长且具有下标的变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T19:31:42.520

我试图在 Mathematica 8 中输入你的方程并解决了。

这里的输入（在 FullForm 中）

```
Solve[(Subscript[x, 2] + Subscript[Speed, Subscript[x, 2]]*t - 
  Subscript[x, 1] - 
  Subscript[Speed, Subscript[x, 1]]*t)^2 + (Subscript[y, 2] + 
  Subscript[Speed, Subscript[y, 2]]*t - Subscript[y, 1] - 
  Subscript[Speed, Subscript[y, 1]]*t)^2 == (Subscript[r, 1] + 
 Subscript[r, 2])^2, t] 
```

这是结果（作为图像，因为 FullForm 太长而无法提供信息）

![带下标求解的结果](../Images/a58e426c8b69d2e80b83a91073113b6f.png)

希望这个例子能帮助你找出你的案例出了什么问题。

# git - 有没有办法检查空目录？

> ID：14773891
> 
> 赞同：-2
> 
> 时间：2013-02-08T13:42:44.097
> 
> 标签：git

使用 git，我想知道是否可以签入空文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:43:44.403

不，你不能。您不能在 Git 中提交空文件夹。

一种常见的解决方法是在`.gitkeep`文件夹中添加一个空文件，然后将其签入*，*或者简单地放置一个`.gitignore`，忽略将在该文件夹中结束的文件类型。大概，你想忽略它们，或者你有一些事情要提交。

# magento - 在magento 1.7中按客户组排序订单

> ID：14773892
> 
> 赞同：0
> 
> 时间：2013-02-08T13:42:52.167
> 
> 标签：magento

我必须在 magento 1.7.0.2 中按客户组排序，我尝试关注 magento wiki：

[http://www.magentocommerce.com/wiki/5_-_modules_and_development/admin/sort_order_by_customer_groups](http://www.magentocommerce.com/wiki/5_-_modules_and_development/admin/sort_order_by_customer_groups)

但它不起作用。

我将 app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php 复制到 app/code/local/Mage/Adminhtml/Block/Sales/Order/Grid.php 以不触及 magento 核心。

我将此代码添加到此功能

```
protected function _prepareColumns(){

 $this->addColumn('customer_group_id', array(
                'header'=> Mage::helper('customer')->__('Customer Group'),
                'width' => '80px',
                'index' => 'group_id',
                'renderer' => new   Mage_Adminhtml_Block_Sales_Order_Renderer_CustomerGroup(),
                'type' => 'options',
                'options' => Mage_Adminhtml_Block_Sales_Order_Renderer_CustomerGroup::getCustomerGroupsArray(),
        ));

// now the code original
} 
```

其次，在同一个文件中，我添加了这个覆盖函数

```
protected function _addColumnFilterToCollection($column) {

        if ($this->getCollection()) {
            $field = ( $column->getFilterIndex() ) ? $column->getFilterIndex() : $column->getIndex();
            if ($column->getFilterConditionCallback()) {
                call_user_func($column->getFilterConditionCallback(), $this->getCollection(), $column);
            }
            else {
                $cond = $column->getFilter()->getCondition();
                if ($field && isset($cond)) {
                    if (in_array('NULL', array_values($cond))) {
                        $this->getCollection()->addFieldToFilter($field, array('null' => true));
                    }
                    else {                      
                        $this->getCollection()->addFieldToFilter($field, $cond);
                    }
                }
            }
        }
        return $this;
    } 
```

第三，在Grid.php中我修改了这个函数：

```
protected function _prepareCollection()
    {
        $collection = Mage::getResourceModel($this->_getCollectionClass());

        $collection->getSelect()->joinLeft(
          array('ce'=>'customer_entity'),
          'ce.entity_id=main_table.customer_id',
          array('ce.group_id')
        );
        $this->setCollection($collection);
        return parent::_prepareCollection();
    } 
```

现在我使用以下代码在 app/code/local/Mage/Adminhtml/Block/Sales/Order/Renderer/CustomerGroup.php 中创建此文件：

```
class Mage_Adminhtml_Block_Sales_Order_Renderer_CustomerGroup
extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Abstract {

    // Holds an associative array with customer_group_id and the associated label
    private static $_customerGroups = array(); // "singleton"

    public static function getCustomerGroupsArray() {
        // Make sure the static property is only populated once
        if (count(self::$_customerGroups) == 0) {
            $customer_group = new Mage_Customer_Model_Group();
            $customer_groups = $customer_group->getCollection()->toOptionHash();
            self::$_customerGroups = $customer_groups;
        }

        return self::$_customerGroups;
    }

    // Transforms the customer_group_id into corresponding label
    public function render(Varien_Object $row)
    {
        $val = $this->_getValue($row);
        $customer_groups = self::getCustomerGroupsArray();
        return isset($customer_groups[$val]) ? $customer_groups[$val] : false;
    }

} 
```

我有这个错误：

**:5:{i:0;s:92:"SQLSTATE[42S22]: 找不到列: 1054 'where 子句'中的未知列 'customer_group_id'";i:1;s:5645:"#0 MyProjectFolder\lib\ Varien\Db\Statement\Pdo\Mysql.php(111): Zend_Db_Statement_Pdo->_execute(Array)**

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:59:38.027

我在magento论坛中找到了解决方案，有人给了我正确的解决方案：

```
protected function _prepareCollection()
{
        $collection = Mage::getResourceModel($this->_getCollectionClass());

        $collection->getSelect()->join(
          array('oe'=>'sales_flat_order'),
          'oe.entity_id=main_table.entity_id',
          array('oe.customer_group_id')
        );
        $this->setCollection($collection);
        return parent::_prepareCollection();
} 
```

# python - Python匹配列表并返回找到的值

> ID：14773898
> 
> 赞同：0
> 
> 时间：2013-02-08T13:43:03.030
> 
> 标签：python, list, csv, string-matching

我正在尝试计算 CSV 文件中最常见的值，并将出现的值附加到 CSV 文件中的每个项目旁边。例如：

CSV 文件：

```
 * 8 Values in Column 1*
  HelloWorld
  HelloWorld
  HelloSaturn
  HelloMars
  HelloPluto
  HelloSaturn
  HelloMoon
  HelloMoon 
```

计算最常见的 Python 代码：

```
 #Removed Code - Take each row in CSV and append to list#
  #Create new list, count common occurrences out of 8 items
  newList = []
  counter = collections.Counter(newList)
  d = counter.most_common(8)
  print d 
```

打印输出（在上面的 CSV 中计算了最常见的值，例如有两个“HelloWorld”）：

```
 [('HelloWorld', 2), ('HelloMars', 1), ('HelloSaturn', 2), ('HelloPluto', 1), ('HelloMoon', 2)] 
```

我现在正在尝试将这些值附加/插入到每个值旁边的 CSV 文件中，例如：

```
 * 8 Values in Column 1* *Occurrence*
  HelloWorld 2
  HelloWorld 2
  HelloSaturn 2
  HelloMars 1
  HelloPluto 1
  HelloSaturn 2
  HelloMoon 2
  HelloMoon 2 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:45:25.327

您需要使用[csv.writer](http://docs.python.org/2/library/csv.html#csv.writer)对象来重写 CSV 文件：

1.  [使用csv.reader](http://docs.python.org/2/library/csv.html#csv.reader)将 CSV 文件读入内存（如行列表或其他内容）
2.  使用现有代码计算发生频率
3.  遍历您在步骤 1 中读取的每一行。使用 csv.writer 输出行中的每一列。在行的末尾，输出您在步骤 2 中计算的相应频率。

代码看起来像这样（完全未经测试）：

```
import csv
list_of_rows = list()
with open(filename) as fin:
    reader = csv.reader(fin)
    for row in reader:
       list_of_rows.append(row)

# calculate frequency of occurrence
counter = ...

with open(filename, "w") as fout:
    writer = csv.writer(fout)
    for row in counter.most_common(8):            
        # row is now (word, frequency)
        writer.writerow(row) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T04:17:59.550

```
import csv

# I fake here the opening and extracting from a CSV file
# to obtain a list of the words of the first column
ss = """HelloWorld
HelloWorld
HelloSaturn
HelloMars
HelloPluto
HelloSaturn
HelloMoon
HelloMoon"""
column = ss.splitlines()

# Now, the counting
from collections import Counter
c = Counter(column) 

# Seeing the counter we got
print '\n'.join(c)

# Putting the result in a CSV file
with open('resu.csv','wb') as g:
    gw = csv.writer(g)
    gw.writerows([item,c[item]] for item in column) 
```

# asp.net - AutoPostBack="true" 下拉列表 asp.net 无法正常工作

> ID：14773899
> 
> 赞同：0
> 
> 时间：2013-02-08T13:43:04.827
> 
> 标签：asp.net, drop-down-menu, autopostback

我有一个下拉列表，其中填充了数据库表中的值，当您从列表中选择一个值时，会出现一个转发器并显示有关该选定值的额外详细信息。唯一的问题是页面只刷新选择的第一个值，如果您尝试进行不同的选择，页面不会改变。

中继器似乎工作正常，但下拉列表中的 AutoPost 肯定有问题。

```
<asp:DropDownList ID="DropDownList1" Width="150px" runat="server" DataSourceID="SqlDataSource1" DataTextField="LCID" DataValueField="LCID" EnableViewState="true" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged" AutoPostBack= "true" >

 </asp:DropDownList> 
```

这是来自 aspx.cs 文件的代码：

```
public partial class _Default : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}

protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{

    Response.Redirect("http://localhost:31003/?LCID="+ DropDownList1.SelectedValue);

}
} 
```

如果有人能看到我的程序中缺少的内容，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:53:53.767

你错过`PageName`了 `Response.Redirect`

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    Response.Redirect("~/PageName.aspx?LCID="+ DropDownList1.SelectedValue);
} 
```

# sql - 从表变量插入表？

> ID：14773903
> 
> 赞同：4
> 
> 时间：2013-02-08T13:43:18.383
> 
> 标签：sql, sql-server-2008

```
DECLARE @t TABLE
(
ID uniqueidentifier,
ID2 uniqueidentifier
) 
```

...插入@t ...对@t做一些事情

`INSERT INTO testTable (Id, Id2) VALUES (SELECT ID, ID2 from @t)`- 不工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T13:44:38.613

你应该这样做：

```
INSERT INTO testTable (Id, Id2)
SELECT ID, ID2 
from @t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:45:02.590

这个怎么样？

```
INSERT INTO testTable SELECT ID, ID2 from @t 
```

# perl - 用于显示 ssl 证书的 perl 脚本

> ID：14773904
> 
> 赞同：0
> 
> 时间：2013-02-08T13:43:23.410
> 
> 标签：perl, ssl, openssl

我想使用[openssl](http://en.wikipedia.org/wiki/OpenSSL)`ssl`查看第 3 方主机的证书，但 openssl不支持代理（我的环境中确实有）。`s_client`

我希望我可以使用 perl 来做同样的事情：

```
openssl s_client -showcerts -connect www.domain.com:443 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:18:52.653

您应该`dump_peer_certificate()`从`Net::SSLeay`模块中搜索方法。

见[http://www.perlmonks.org/?node_id=70620](http://www.perlmonks.org/?node_id=70620)和[http://metacpan.org/pod/Net::SSLeay](http://metacpan.org/pod/Net::SSLeay)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:22:01.820

您可以修补`openssl`以接受代理，请参阅[openssl patch](http://rt.openssl.org/Ticket/Display.html?id=2651&user=guest&pass=guest)和[openssl s_client using a proxy](https://stackoverflow.com/questions/3220419/openssl-s-client-using-a-proxy)

# android - 连接 android 平板电脑 -> lan - RS232 转换器时的数据丢失，但在 android 平板电脑 ->winpc pc -> 转换器上没有

> ID：14773906
> 
> 赞同：0
> 
> 时间：2013-02-08T13:43:26.643
> 
> 标签：android, windows, networking, serial-port, data-loss

我有一个大问题，我怀疑我的智力...我通过路由器 (TL-WR740-N) 将我的 android 平板电脑 (intenso tab814) 连接到 RS232 转换器 (USR-TCP232-E) 并发送 7 个十六进制字节在一个街区，有点 03 20 05... 有更多的数字。我的问题是，如果我让我的平板电脑发送，转换器会接收数据，但不会将其提交给转换器完成后的电脑上的监听程序。通常缺少完整的块（不是单个字节，而是我发送的整个命令行），但是如果我通过平板电脑将数据发送到另一台 PC，并让 HIM 向转换器发送每个字节到达的工作。这可能有点眼花缭乱，但我不知道这个问题可能属于哪里。我的应用程序正确发送每个块（电脑能够接收）

转换器黄色 RJ45 端口 LED 闪烁，但我没有将数据提供给正在侦听的 pc。

为了更好地理解：

平板（selfpogrammed app）发送数据->路由器->转换器（每次闪烁）很少给出命令->PC（自写监听程序（不是我写的，但是一个，我是追随者，不熟悉语言。 )

但如果我：

平板电脑（相同的应用程序）-> 路由器-> PC（接收所有数据）-> 路由器-> 转换器始终将数据提供给监听程序->pc

这是怎么回事？为什么转换器将数据从 app -> pc 提供给正在监听的 pc，而不是从 app 提供给 listenign pc？

平板电脑通过 W-Lan 连接到路由器，电脑通过 RJ45 电缆连接，转换器也可以。使用 TCP/IP 转换器作为服务器。

请帮助 Q_Q

*编辑：* 配置：

波特率：115200bits/second
数据大小：8 位/字符奇偶校验：无 NoneOddEvenMarkSpace
停止位：1bit(s) 流量控制：无 本地 Telnet 端口号：2001
远程 Telnet 端口号：N/A
Telnet 模式：TCP 服务器 Telnet 服务器 IP：不适用。. .
Telnet 超时：0seconds 秒（< 256，0 表示无超时）

UART数据包时间：10ms ms (< 256)

UART数据包长度：200

编辑：

忘了提。该转换器是通过 RS232 到 USB 转换器，从 RS232 到 USB 连接。它的接收灯不闪烁，当监听程序没有显示我的命令时，但如果程序吐出我的线路，USB 部分也会闪烁。因此转换器接收，但不将其提供给 USB。但只有当我使用我的平板电脑时。始终相同的间隔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:38:23.203

是我自己的错，忘记使用缓冲输出流，现在可以了。

# java - XYSeriesCollection 中的 Y 标记 (JFreeChart)

> ID：14773908
> 
> 赞同：1
> 
> 时间：2013-02-08T13:43:27.910
> 
> 标签：java, jfreechart

我有一个 XY 图表，我想在其中表示某些日期的 X 值。数据集的创建很简单：

```
XYSeries serie = new XYSeries("valor");
for(int i=0;i<lista.size();i++){
    serie.add(i,lista.get(i).getValue());

}
dataset.addSeries(serie); 
```

其中 serie.add 用作参数（y.value，x.value）。我表示 x 值随时间变化，但它只是数组列表的索引（显然，我使用 i 作为第一个参数）。我的问题是，如何将日期（或字符串）显示为 Y 值？我知道这可以通过 BarChart 来完成，例如：

```
DefaultCategoryDataset dataSet = new DefaultCategoryDataset();
        dataSet.addValue(51, "series", "Colonel Forbin");
        dataSet.addValue(92, "series", "The Lizards"); 
```

类似的事情是我需要做的，希望你能帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:55:41.317

[如此处](https://stackoverflow.com/a/12481509/230513)所示，如果您的系列中的范围值表示距 Java[纪元](https://en.wikipedia.org/wiki/Epoch_(computing))的毫秒数，则 a`DateAxis`应该正确显示这些值。

```
NumberAxis domain = new NumberAxis("X");
DateAxis range = new DateAxis("Y");
domain.setAutoRangeIncludesZero(false);
XYItemRenderer renderer = new XYLineAndShapeRenderer(true, false);
XYPlot plot = new XYPlot(dataset, domain, range, renderer);
JFreeChart chart = new JFreeChart(
    "Title", JFreeChart.DEFAULT_TITLE_FONT, plot, false); 
```

附录：*我只想设置……动态变化的标签。*

看起来像你想要`SymbolAxis`的，看到[这里](https://stackoverflow.com/a/14336050/230513)。

# web-services - Windows Phone 8 通过 Azure 安全连接到本地 Web 服务

> ID：14773915
> 
> 赞同：0
> 
> 时间：2013-02-08T13:43:56.013
> 
> 标签：web-services, security, azure, windows-phone-8, azure-mobile-services

我正在开发一个 WP 8 应用程序，我想将它连接到本地（本地）Web 服务。我已经设法使用没有安全性的简单 BasicHttpBinding 和 Azure 服务总线中继来做到这一点，但我无法建立安全连接。WP 8 只支持 BasicHttpBinding，这是我目前最大的问题。

我了解 Azure 移动服务是将您的 WP 8 应用程序安全连接到云的一种有效且简单的方法。是否可以通过 Azure 移动服务访问本地 Web 服务？如果可能的话，是否可以在不通过 Azure 服务总线中继公开本地服务的所有内容的情况下完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:25:19.763

你应该能够从 WP8 安全地做到这一点——我不太确定它为什么不起作用——但即使你必须自己滚动一些东西，它也应该是可能的（例如，查看 Michael Collier 的这篇关于做类似的东西：http: [//michaelcollier.wordpress.com/2011/08/19/azure-sb-and-wp7/](http://michaelcollier.wordpress.com/2011/08/19/azure-sb-and-wp7/)）

不过，对于这个问题，WAMS（Windows Azure 移动服务）肯定很容易使用，但是做你想做的事情是不可行的——也就是说，以这种方式成为公共端点。简而言之，WAMS 为您提供了一个易于使用的 CRUD 数据接口，该接口恰好也公开了身份验证和通知功能，同时为您提供了一些服务器端 javascript 来执行自定义工作——例如调用其他服务，发送电子邮件或通知等。

但是，对 WAMS 的每个请求本质上都映射到数据库表上的 CRUD 操作。虽然您可能会“注入”一个简单的调用，但这不是您想要的。听起来使用服务总线是正确的方法，应该是可能的......

# gwt - 有没有办法将 GWT 静态字符串 i18n 与服务器提供的属性一起使用？

> ID：14773917
> 
> 赞同：1
> 
> 时间：2013-02-08T13:44:00.863
> 
> 标签：gwt

我正在寻找一个棘手问题的解决方案。我想使用 GWT 静态字符串国际化，因此使用常量、ConstantsWithLookup 和消息，但字符串必须在运行时来自服务器，而不是编译时。

是否已经有一个项目可以做这样的事情，或者我应该编写自己的 GWT 生成器？

感谢所有会帮助我的人。

**更新**：字典不是一个选项，因为应用程序几乎完成了，我无法为此更改所有应用程序。

**更新 2**：事实上，如果 Dictionary 由类似 Costants 或类似消息的界面包装，则它是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:23:34.453

您要求的根本不是静态 i18n。GWT 的 i18n 几乎都是静态的的一些原因：

*   它是一个同步 API。从服务器获取资源要么需要一个异步 API 传播到整个应用程序（即，将 Future 传递给一个小部件，告诉它一旦从服务器获取该字符串后从哪里获取其内部文本），或者您基本上必须在开始下载 i18n 资源之前阻止应用程序的执行（这会给用户带来糟糕的体验）。
*   我们可以优化生成的代码以仅包含应用程序中的消息实际需要的那些格式化程序和相关数据。如果您不包含任何复数消息，我们就不必包含该代码等。在大多数情况下，可以内联表达式、删除死代码以及完全删除类引用。
*   我们可以在编译时使用在运行时很难或昂贵的东西。例如，简单地解析消息格式字符串需要相当多的代码，而这些都不需要包含在编译的输出中。假设您从服务器获取应用程序的字符串，您发现其中一个包含 {0,localtime,YMd} - 现在您需要 ICU4J 来本地化它 - 哎呀！就算能全部编译成JS，那也是巨大的。或许您可以通过这种方式支持 GWT 的 i18n 的一个子集，但是您必须包含可能从消息中引用的每个格式化程序，即使它们中的大多数永远不会。

如果您真的想要动态 i18n，那么按照其他答案的建议进行操作并使用 Dictionary（但是请注意，如果您的应用程序的消息有任何复杂性，您将无法正确本地化您的应用程序）。如果您需要的不仅仅是它所能提供的，那么就硬着头皮使用静态 i18n。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:51:01.097

有两种选择：好和不太好。

**好：** 标准方式，[静态字符串 i18n](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18n?hl=fr#DevGuideStaticStringInternationalization)是所有语言排列都在使用它们的地方进行了优化和内联（即将日本公司名称放入按钮/列/标题的 HTML 模板中）。

因为完整的 i18n 套件可以在支持多元化和消息构建器、@nnoations 和自动 i18n 的情况下进行详细说明，所以它是可取的。它也是性能*最快*的选择。

**不太好：** 通常是因为您需要使用遗留系统，所以“好”还不够好。在这里，而不是所有的火箭小部件，您只需要在框中获取文本。然后使用[动态字符串 i18n](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18n?hl=fr#DevGuideDynamicStringInternationalization)并将字符串放入您的页面中，并使用类似于老式 Dictionary 对象的内容。

# android - 拨打电话时向被叫方传输额外的数字？

> ID：14773920
> 
> 赞同：0
> 
> 时间：2013-02-08T13:44:21.017
> 
> 标签：android, telephony, telephonymanager

我想在拨打电话时向被叫方传输数据（以一个额外数字的形式）。两个用户自然都需要安装我的应用程序。

*例如：* `Person A`拨打电话`Person B`，我的应用程序取消拨出电话，`*1`在被叫号码上附加一个“”（例如）并重新发起呼叫。我`Person B`的手机上的应用程序会监听来电并从被叫号码中提取额外的数字。

这样的事情可能吗？请注意，我不能`public void onCallStateChanged(int state, String incomingNumber) {}`用于此，因为`incomingNumber`是*呼叫者的*( `Person A`'s) 号码，而不是*被叫*号码。我需要能够*在接听电话之前*提取多余的数字，所以我不能使用`p`或`w`DTMF-dial-codes。

我在主叫方有“拦截和重拨”部分，应用程序的“监听来电”部分工作，我只是不知道如何 A）传输数字以便它到达被叫方的电话（而不是被运营商丢弃）并且B）在接收者的电话上获得*被叫*号码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:31:40.037

我认为，但我不确定，你不能像这样传输数据。原因是运营商使用这些号码（代码）引导呼叫。发送一个额外的号码（或一个额外的数字）意味着错误（或不正确）的号码，并且可能会取消通话。在我看来，您想做的事情像是一种操纵网络的方式，但我认为这是不可能的。运营商的数据中心可能至少对此进行了某种检查。

我不知道你为什么需要传输那些符号“*1”，但由于这是硬编码的，它也可以很容易地硬编码到你的应用程序中。我觉得可以用电话号码来识别主叫方，但是如果需要这种方式动态传递信息，应该是不行的。

也许您应该尝试直接与安装了您的应用程序的其他设备进行通信。这是一个有趣的[线程](https://stackoverflow.com/questions/8853305/android-api-for-inter-device-communication)，尽管在那里，这种通信用于多人游戏，它为设备提供了一种通信方式。

# java - 使用 OpenGL 导入 GLInfo 和 AWTWindowProgram

> ID：14773922
> 
> 赞同：0
> 
> 时间：2013-02-08T13:44:23.517
> 
> 标签：java, opengl, jogl

我已经将图形项目设置为计算机图形模块的一部分，以熟悉 Open GL 的基础知识，我一直在关注本网站[https://sites.google.com/site/justinscsstuff中的一些教程/](https://sites.google.com/site/justinscsstuff/)

目前，我正在学习有关渲染方法的教程（[https://sites.google.com/site/justinscsstuff/rendering-methods/triangle-scene](https://sites.google.com/site/justinscsstuff/rendering-methods/triangle-scene)）。在“TriangleScene”类的示例代码的扩展块中，有两个导入让我有点困惑：

1) support.GLInfo 2) windows.AWTWindowProgram

Eclipse 不能自动识别这些——我是否需要像 OpenGL 那样下载更多的类库集？

我只是想对这两个导入有所了解，这样我就可以继续完成教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:57:51.270

您确实需要下载这些文件。您可以在底部[提到的此页面](https://sites.google.com/site/justinscsstuff/rendering-methods/triangle-scene)上找到它们（列表中的第一个和第三个文件）。

# javascript - 为什么 jquery 中的单击事件不适用于我的新元素？

> ID：14773926
> 
> 赞同：0
> 
> 时间：2013-02-08T13:44:43.293
> 
> 标签：javascript, jquery, css

我有三个具有左、中和右类的 div，我想交换它们的位置并在它们进入新位置时应用新的类。但由于某种原因它不起作用这是我的脚本：

```
$(function() {
            $(".left").css("left","50px");
            $(".center").css("left","300px");
            $(".center").css("width","300px");
            $(".center").css("height","300px");
            $(".center").css("top","25px");
            $(".right").css("left","650px");
            $(".right").click(function(){
                $(".left").animate({
                    left: '650px'
                    }, 1000, function() {
                    });
                $(".center").animate({
                    left: '50px',
                    width: '200px',
                    top: '75px',
                    height: '200px'
                    }, 1000, function() {
                    });
                $(".right").animate({
                    left: '300px',
                    width: '300px',
                    height: '300px',
                    top: '25px'
                    }, 1000, function() {
                    });
                $(".bule").removeClass("left right center");
                $(".second").addClass("left");
                $(".third").addClass("center");
                $(".first").addClass("right");
                $(".bule").removeClass("first second third");
                $(".left").addClass("first");
                $(".center").addClass("second");
                $(".right").addClass("third");
                });
        }); 
```

[这](http://jsfiddle.net/wykH4/)是一个工作示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:49:00.890

当您使用 jQuery 选择器选择元素时`$('...')`- 对选择进行评估并对​​这些元素执行以下操作。如果稍后，您删除了一个类或更改了选定元素的 ID，则这些操作已经被执行 - 所以它们会保留。同样，它们不会自动从其他选择器继承操作（因为在进行选择时它们没有该类/ID）。

如果您想绑定一次事件，并在添加新元素或更改类时让它们工作，您需要使用稍微不同的事件语法：

```
$('body').on('click', '.right', function() {

}); 
```

注意选择器现在是 body 元素（因为在运行时 body 元素将始终存在）。您在这里告诉 jQuery 是将`click`事件绑定到`<body>`元素，并且当单击的子级时`<body>`，根据表达式评估元素`.right`。如果该表达式匹配，请调用我的函数。

此方法利用了 javascript 事件传播，其中事件一直冒泡到它们的最高祖先。这意味着单击 div 内的链接将按此顺序触发链接、div 和正文的单击事件。

# android - Android：从片段启动时 AsyncTaskLoader 崩溃

> ID：14773929
> 
> 赞同：0
> 
> 时间：2013-02-08T13:44:55.447
> 
> 标签：android, android-fragments, android-viewpager, asynctaskloader

我有这个片段：

公共类 ResultFragment 扩展 Fragment 实现 LoaderCallbacks{

```
public static ResultFragment newInstance(Bundle args) {
ResultFragment fragment = new ResultFragment();
fragment.setArguments(args);
return fragment;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getActivity().getSupportLoaderManager().initLoader(0, null, this);

}

@Override
public Loader<EstateSearch> onCreateLoader(int id, Bundle args) {

        return new RESTLoader(getActivity(), "http://etc");

}

@Override
public void onLoadFinished(Loader<EstateSearch> loader, EstateSearch es) {

}

@Override
public void onLoaderReset(Loader<EstateSearch> loader) {

}

} 
```

AsyncTaskLoader 看起来像这样：

公共类 RESTLoader 扩展 AsyncTaskLoader {

```
private String searchUrl; 

public RESTLoader(Context context, String searchUrl) {
    super(context);
    this.searchUrl = searchUrl; 

}

@Override
public EstateSearch loadInBackground() {

      EstateSearch es = null;       

      try {

    Network Stuff

    } catch (Exception e) {

    }

      return es; 
}

@Override
public void deliverResult(EstateSearch es) {

    super.deliverResult(es);
}

@Override
protected void onStartLoading() {
    forceLoad();
}

@Override
protected void onStopLoading() {

    cancelLoad();
}

@Override
protected void onReset() {
    super.onReset();        
    onStopLoading();     
}
} 
```

该应用程序因一个神秘的（至少对我而言）错误而崩溃：

[http://i46.tinypic.com/260fw43.png](http://i46.tinypic.com/260fw43.png)

通过放入一些 Log.ds，我知道 AsyncTaskLoader 的构造函数甚至没有被调用。我已经尝试将加载器的 init() 移动到片段生命周期的后期部分。如果这很重要，片段就在 ViewPager 中。从 Activity 调用时，AsyncTaskLoader 工作正常。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:04:33.800

好的，非常令人尴尬的错误：我已经在 Activity 中有另一个加载器，该片段附加到它的 ID 为 0 :-/

# c# - 如何更新下拉列表中的选定项目asp.net c#

> ID：14773934
> 
> 赞同：1
> 
> 时间：2013-02-08T13:45:04.657
> 
> 标签：c#

嗨，我有一个下拉列表，我想在下拉列表中选择它时更新一个项目，我编写了这段代码，但它只更新第一个项目：

```
 DBMethod db = new DBMethod();
        DataTable dt = new DataTable();
        string sqlcmd = "select * from dbo.Web_Personnel ";
        dt = db.ReturnTableWithData(sqlcmd);

        dt.Rows[0]["Job"] = txtjobE.Text;
        dt.Rows[0]["ChildNo"] = txtchildnoe.Text;
        dt.Rows[0]["Salary"] = txtsalary.Text;
        db.UpdateDatatable(dt, "dbo.Web_Personnel"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:49:55.140

是的，默认情况下，此代码只会更新第一项，因为您在其中硬编码值 0

```
 dt.Rows[0]["Job"] = txtjobE.Text;
        dt.Rows[0]["ChildNo"] = txtchildnoe.Text;
        dt.Rows[0]["Salary"] = txtsalary.Text; 
```

只需声明一个变量

```
 int i = 0;
    //change the value of I to desired value and less than dt.Rows.Count()
    dt.Rows[i]["Job"] = txtjobE.Text;
    dt.Rows[i]["ChildNo"] = txtchildnoe.Text;
    dt.Rows[i]["Salary"] = txtsalary.Text; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T13:50:57.463

*使用变量i*定位特定行：

确定要编辑的数据库行，例如：

```
int i = idOfUser // e.g. id = 3

    dt.Rows[i]["Job"] = txtjobE.Text;
    dt.Rows[i]["ChildNo"] = txtchildnoe.Text;
    dt.Rows[i]["Salary"] = txtsalary.Text; 
```

# java - java Date 类 - 为什么我在这些行中有其他日期输出？

> ID：14773935
> 
> 赞同：-1
> 
> 时间：2013-02-08T13:45:09.407
> 
> 标签：java, date

我的代码：

```
 SimpleDateFormat sdf = new SimpleDateFormat("YYYY-MM-dd HH:mm:ss");
 Date date = new Date();

System.out.println(sdf.format(date));
System.out.println(sdf.format(sdf.parse(sdf.format(date)))); 
```

我得到这个输出：

```
2013-02-08 15:48:37
2013-12-30 15:48:37 
```

预期输出：

```
2013-02-08 15:48:37
2013-02-08 15:48:37 
```

查看日期的日期和月份

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:58:00.613

问题来自“解析”方法

==> "从给定字符串的开头解析文本以生成日期。该方法可能不会使用给定字符串的整个文本。"

```
The method may not use the entire text of the given string. 
```

我已经运行了您的代码并得到以下信息：

```
System.out.println(sdf.format(date));
System.out.println(sdf.parse(sdf.format(date)));
System.out.println(sdf.format(sdf.parse(sdf.format(date)))); 
```

结果 ：

```
2013-02-08 14:54:39
Mon Dec 31 14:54:39 CET 2012
2013-12-31 14:54:39 
```

正如您所看到的，解析函数正确地转换了时间，而不是日期本身。我认为它不打算以这种方式使用，因此会产生奇怪的结果。

但是，这是我第一次注意到这一点，所以我将无法提供更多细节:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:38:19.137

为了简单起见，让我们使用一个基本的测试用例：

```
String date = "2013-02-08 15:48:37";
SimpleDateFormat sdf = new SimpleDateFormat("YYYY-MM-dd HH:mm:ss");
System.out.println(sdf.parse(date));

// Output: Mon Dec 31 15:48:37 CET 2012 
```

根据[SimpleDateFormat Javadoc](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)，格式说明符`Y`用于表示“周年”。“年”的正确格式说明符是`y`- 有了这个，我们得到正确的输出：

```
sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
System.out.println(sdf.parse(date));

// Output: Fri Feb 08 15:48:37 CET 2013 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:58:41.900

我无法重现这个：

```
public static void main(String[] args) {
    // TODO code application logic here
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    Date date = new Date();

    Logger log = Logger.getLogger("InfoLogging");

    log.info(sdf.format(date));
    try {
        log.info(sdf.format(sdf.parse(sdf.format(date))));
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

给出输出：

```
Feb 8, 2013 2:57:09 PM javaapplication2.JavaApplication2 main
INFO: 2013-02-08 14:57:08
Feb 8, 2013 2:57:09 PM javaapplication2.JavaApplication2 main
INFO: 2013-02-08 14:57:08 
```

您使用的是哪种记录器？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:47:23.280

假设这`log`是某种记录器，他们的标准做法是打印出每一行的时间日期和日志级别。如果需要，它可以更容易地从日志中调试，

# button - capybara - 单击没有 id 的按钮

> ID：14773936
> 
> 赞同：4
> 
> 时间：2013-02-08T13:45:15.420
> 
> 标签：button, click, cucumber, capybara

我正在尝试单击此 html 代码中的按钮

`<div class="modal-footer"><button class="btn" data-dismiss="modal">Kapat</button></div>`

我已经尝试使用各种组合查找，最接近成功的是使用以下代码：

```
click_on "Kapat" 
```

问题是页面中有3个相同按钮的副本，所以我的问题是；有没有办法指定这个特定的 div ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T13:56:48.283

如果按钮具有特定路径，您可以使用`within`或`find`向下到该路径，但是该元素的路径在页面中必须是唯一的，否则您最终会遇到相同的问题（不过，我相信 using`:xpath`会给您一个这里有更多的灵活性）。

```
within ".modal-footer" do
  click_on "Kapat"
end

within ".another-selector" do
  click_on "Kapat"
end 
```

# javascript - 同一 HTML 文档中包含的两个不同 SVG 文件中的 id 冲突

> ID：14773940
> 
> 赞同：8
> 
> 时间：2013-02-08T13:45:24.280
> 
> 标签：javascript, jquery, html, svg

所以我有一个带有一些预制渐变效果的 .svg 文件，如下所示：

```
<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="1052.4" width="744.09" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 670 680" style="width: 100%; height: 100%;">

<defs>
    <radialGradient id="grad1" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
        <stop offset="0%" style="stop-color: #a0a0a0;" />
        <stop offset="100%" style="stop-color: #a0a0a0;" />
    </radialGradient>
</defs>
 <g>
  <path id="path1" d="m124 263.35c6.4216-12.385 18.974-0.67157 0.72621z" fill="url(#grad1)">
  </path>
</g>
</svg> 
```

这是我的 svg 文件的简化版本。它表示一个地图，其中每个状态都是一个路径元素。每个状态还具有与之关联的径向梯度标签。我遇到的问题是我在我的 HTML 文档中两次包含这个 SVG 文件，并且我更改了 svg 上的径向渐变标签，以分别更改每个地图上的状态颜色。

地图也有一些交互性，当用户将鼠标悬停在地图上时，我使用以下代码加载 svg 并添加将状态置于前面的事件（因此它的笔划是可见的）：

```
$divSVG.load("map.svg", function() {
    $svg= $(this).find("svg");
    $svg.find("path").each(function() { 
        $(this).bind("mouseenter", function() {
                var $path= $(this);
            var $parent= $path.parent();
            //its necessary to detach and reattach the element so it comes to the front
            //of the image (there is no z-index in SVG)
            $path.detach();
            $parent.append($path);
            $path
                .css("stroke", "#FF0000")
                .css("stroke-width", "5px");
        });
        $(this).bind("mouseleave", function() {
            $(this)
                .css("stroke", "#FFFFFF")
                .css("stroke-width", "3px");
        });
    }
}); 
```

基本上我只是删除元素并在元素悬停时将其重新附加到其父级。

问题：当元素重新附加到文档中首先添加的地图上时，它开始使用第二个地图上存在的径向渐变。这意味着当我将第一张地图悬停时，状态会将颜色更改为与第二张地图相同的颜色。

我相信造成这种情况的原因是，由于它的同一个文件加载了两次，因此渐变 id 发生冲突，导致重新附加的元素从 HTML 文档中找到的最后一个渐变标记中获取其颜色，而不是其自己的 SVG 标记中存在的渐变标记。

所以这是我的问题，我该如何解决？我不想为每个具有唯一 ID 的地图创建一个新的 SVG 文件。我也不想通过 javascript 操作 id。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-09-11T06:34:42.803

SVG 注入器（如 Iconic [SVGInjector](https://github.com/iconic/SVGInjector)或较新的 Iconfu [SVGInject）](https://github.com/iconfu/svg-inject)通过在将 SVG 插入 HTML 文档时使 ID 唯一来解决此问题。Iconic 注入器在 ID 中添加了一个运行编号（`grad1`变成`grad1-1`），而 Iconfu 注入器添加了一个简短的随机字符串（`grad1`变成类似的东西`grad1-4ew8ZeSw`）。

不仅如果两个 SVG 使用相同的 ID，而且如果在 HTML 文档中多次使用相同的 SVG，则需要使 ID 唯一。

# jquery - 在Jqgrid中的内容后添加相同的空格

> ID：14773943
> 
> 赞同：0
> 
> 时间：2013-02-08T13:45:27.917
> 
> 标签：jquery, jqgrid

在 Jqgrid 表中，在减小列宽的同时，我需要在内容和边框之间留出一些空间。![在此处输入图像描述](../Images/726c03c53a970949d33ce0deac7b6f2f.png)

在“c”之后的标题中，我们有一些空间然后是边框，我也想对内容做同样的事情。任何人都知道如何做到这一点。

我尝试使用填充，但没有帮助。

谢谢，桑迪

# objective-c - 在同一个 tableView.frame 中复制 UITableView 结构

> ID：14773948
> 
> 赞同：0
> 
> 时间：2013-02-08T13:45:45.500
> 
> 标签：objective-c, uitableview

我有`UITableView`2 个部分。在我的第一部分，有 5 行。在第二部分有 2 行。当我单击添加按钮时，必须一次又一次地复制此表视图。我怎样才能做到这一点？

```
-(IBAction)addDetails:(id)sender
{

    NSLog(@"value of s is %d,%d",s,210+100*s);

    tvc = [[UITableViewController alloc] initWithStyle:UITableViewStyleGrouped];
    tvc.tableView.frame = CGRectMake(20,200+250*s,280,280);
    //CGRect rect = CGRectMake(cell.bounds.origin.x+10, cell.bounds.origin.y+10,50,30);   
    [tvc.tableView setSectionFooterHeight:3.0];
    [tvc.tableView setSectionHeaderHeight:3.0];

    [tvc.tableView setShowsVerticalScrollIndicator:YES];
    // [tvc.tableView setBackgroundColor:[UIColor  colorWithRed:67.0/255.0 green:185.0/255.0 blue:209.0/255.0 alpha:0.5]];
    [tvc.tableView setRowHeight:30];
    tvc.tableView.backgroundView = nil;
    tvc.tableView.backgroundColor = [UIColor clearColor];
    [tvc.tableView setSeparatorStyle:UITableViewCellSelectionStyleGray];
    tvc.tableView.delegate = self;
    tvc.tableView.dataSource = self;
    [self.view addSubview:tvc.tableView];
   s++;

}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 2;
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

      if(section == DETAIL_SECTION)
          return 5;
      else if(section == CALENDER_SECTION){
          return 2;
      }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
} 
```

当再次调用 addDetails 函数时，我希望在同一框架内具有不同数据的相同表结构。现在框架正在重复。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:47:21.593

当您单击添加按钮时，创建一个新`UITableView`实例，将其作为子视图添加到现有视图中。根据您的需要定位和调整大小。将其委托和数据源设置为与原始委托和数据源相同的委托和数据源。这样，相同的委托/数据源方法将使用相同的逻辑作用于每个表。每当您重新加载原始表时，请务必重新加载所有“复制”表。

# jsf-2 - 如何在 JSF2 Enterprise Application 中集成richfaces 4.3 (a4j)

> ID：14773949
> 
> 赞同：2
> 
> 时间：2013-02-08T13:45:49.727
> 
> 标签：jsf-2, richfaces

在尝试将 Richfaces 集成到 JSF2 项目中时，我收到了警告。

```
Warning: The page /template/template.xhtml declares namespace http://richfaces.org/a4j and uses the tag a4j:region , but no TagLibrary associated to namespace. 
```

我没有使用 maven，所以我手动制作了所有内容。我做了以下事情来集成它： 将 EAR 部署程序集放入以下 ​​jars 中：

```
richfaces-components-api-4.3.0.Final.jar
richfaces-components-ui-4.3.0.Final.jar
richfaces-core-api-4.3.0.Final.jar
richfaces-core-impl-4.3.0.Final.jar
sac-1.3.jar 
guava-11.0.2.jar 
cssparser-0.9.5.jar 
```

将其添加到 WAR 的清单中。

这是页面片段：

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    id="TemplateView">
   ...
    <h:form id="templateForm">
        <a4j:region>
            <a4j:jsFunction name="refreshSession">
                <a4j:actionparam name="refresh" assignTo="#{ilapAdapter.refreshSession}"/>
            </a4j:jsFunction>
        </a4j:region>
    </h:form>
   ... 
```

我错过了什么吗？为什么我会收到此警告？根据“入门”指南，无需在 faces-config.xml 或 web.xml 中进行额外配置。

我只需要 Richfaces 的 Ajax 功能。

PS。将richfaces-core-api-4.3.0.Final.jar、richfaces-core-impl-4.3.0.Final.jar 放在WEB-INF.lib 中也不起作用。

Richfaces 相关 SystemOut：

```
[08.02.13 14:18:26:398 CET] 00000022 DefaultFacesC I   Reading config : wsjar:file:/C:/projects/folab/workspace/FOLAB-WAS8/installedApps/CE02110Node02Cell/Dialog_Common_EAR.ear/richfaces-core-impl-4.3.0.Final.jar!/META-INF/faces-config.xml
[08.02.13 14:18:26:949 CET] 00000022 Config        W org.richfaces.application.DefaultModule configure There was no service org.richfaces.focus.FocusManager found
[08.02.13 14:18:26:956 CET] 00000022 Cache         I org.richfaces.cache.CacheManager getCacheFactory Selected fallback cache factory
[08.02.13 14:18:26:959 CET] 00000022 Cache         I org.richfaces.cache.lru.LRUMapCacheFactory createCache Creating LRUMap cache instance using parameters: {com.ibm.ws.jsf.JSP_UPDATE_CHECK=true, javax.faces.STATE_SAVING_METHOD=server, javax.faces.PROJECT_STAGE=Development, com.ibm.ws.jsf.LOAD_FACES_CONFIG_AT_STARTUP=true, javax.faces.CONFIG_FILES=/WEB-INF/faces-navigation.xml, javax.faces.DEFAULT_SUFFIX=.xhtml}
[08.02.13 14:18:26:969 CET] 00000022 Cache         I org.richfaces.cache.lru.LRUMapCacheFactory createCache Creating LRUMap cache instance of 512 items capacity
[08.02.13 14:18:26:985 CET] 00000022 Application   I org.richfaces.application.InitializationListener onStart  by , version 
[08.02.13 14:18:26:989 CET] 00000022 Application   W org.richfaces.application.InitializationListener logWarningWhenConnectionFactoryPresent JMS API was found on the classpath; if you want to enable RichFaces Push JMS integration, set context-param 'org.richfaces.push.jms.enabled' in web.xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:06:53.693

尤里卡！

问题是错误的 myfaces 实现。Richfaces 4.3 至少需要 myfaces 2.1.5 我一直在使用 2.0.8。第一次阅读需求时，不知何故我错过了这些信息。

第二个问题是缺少richfaces-components-ui-4.3.0.Final.jar（但是根据自述文件和开发指南，a4j 不需要它）。希望它对将来的人有所帮助。

# rest - 这是 PATCH 的好模式吗

> ID：14773950
> 
> 赞同：1
> 
> 时间：2013-02-08T13:45:51.860
> 
> 标签：rest, servicestack, ormlite-servicestack

我正在实现一个允许对象被`PATCH`编辑的 REST 风格的 API。该`PATCH`操作的目的是允许更新类中的一个或多个属性，而无需触及可能设置的其他属性。

[这些是ServiceStack OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite#update)页面上部分更新的示例 ，但似乎需要硬编码来指示哪些字段将被部分更新。在我的场景中，取决于应用程序来决定发送哪些字段。

我还必须应对对象可能尚未持久化的情况。

为了解决这个问题，我实施了以下内容：

```
public object Patch(Myclass request)
{
    HttpStatusCode SuccessCode;
    try
    {
        var result = (MyClass)Get(request);
        if (result != null)
        {
            request.PopulateWithNonDefaultValues(result);
            dbFactory.Run(dbCmd => dbCmd.UpdateNonDefaults(request, r => r.myId == request.myId));
        }
        else
        {
            dbFactory.Run(dbCmd => dbCmd.Save(request));
        }

        SuccessCode = HttpStatusCode.Accepted;
    }
    catch (Exception e)
    {
        log.Error(e);
        SuccessCode = HttpStatusCode.InternalServerError;
    }
    return new HttpResult()
    {
        StatusCode = SuccessCode
    };
} 
```

它有效，但感觉有些不对劲，我确定一定有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:04:41.917

[这看起来没问题，尽管如果您只是在出现错误时抛出 let it throw C# Exceptions 并且如果您从ServiceStack 的 New API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)基[Service](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs)类继承您可以使用已经可用的属性，那么您的代码会短很多`Db`，例如：

```
public object Patch(Myclass request)
{

    var result = (MyClass)Get(request);
    if (result != null)
    {
        request.PopulateWithNonDefaultValues(result);
        Db.UpdateNonDefaults(request, r => r.myId == request.myId);
    }
    else
    {
        Db.Save(request);
    }

    return new HttpResult
    {
        StatusCode = HttpStatusCode.Accepted
    };
} 
```

# phantomjs - mocha-phantomjs 找不到变量：需要

> ID：14773951
> 
> 赞同：3
> 
> 时间：2013-02-08T13:45:55.873
> 
> 标签：phantomjs, mocha.js

我遇到了与此处描述的相同的问题[Can't get PhantomJS to work with a simple example](https://stackoverflow.com/questions/10520100/cant-get-phantomjs-to-work-with-a-simple-example)但是在我的路径中拥有正确的 phantomjs 版本的解决方案似乎并不能解决我的问题。

我按照这里的教程到了一个 T： [http ://net.tutsplus.com/tutorials/javascript-ajax/testing-javascript-with-phantomjs/?search_index=1](http://net.tutsplus.com/tutorials/javascript-ajax/testing-javascript-with-phantomjs/?search_index=1)

在我尝试添加 require('webpage').create() 之前一切正常。

phantomjs 版本 1.8.1 mocha-phantomjs 2.0.0

我还能错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T23:41:12.657

使用[require-stub](https://github.com/dfcreative/require-stub)以获得`require`测试需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T03:27:25.210

我也有这个问题，问题是我的 mocha 版本——回到 1.9.0 修复了它。

# javascript - 当显示我的隐藏选择表单时，它不会调用 javascript 函数

> ID：14773954
> 
> 赞同：0
> 
> 时间：2013-02-08T13:46:03.203
> 
> 标签：javascript, css, jquery-mobile, hidden

我有一个隐藏的选择元素，带有对 javascript 函数的 onchange 调用。

当用户单击我页面上的按钮时，我运行以下代码并显示我的选择表单：

```
$("#moreDetails2").show();
$('#moreDetails2').trigger("create"); 
```

然而，在它显示之后，它不会执行它的 JavaScript 函数。我已经测试过它没有隐藏并且可以正常工作。

```
<div id = \"moreDetails2\">  
                    <select  onchange=\"moreDetails2($userID,'$id')\">

                        <option value=\"0\">More Options</option>
                        <option value=\"1\"> View Taste Profile</option>
                        <option value=\"2\"> Add Taste Tags</option>

                    </select>
                </div> 
```

查看 chrome 中的检查元素，我没有收到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:35:58.387

jQuery Mobile 不能很好地使用 onchange="... 或 onclick="... 事件绑定，您需要像这样手动完成：

```
$(document).on('pagebeforeshow', '#index', function(){       
    $(document).on('click', '#test-button', function(){     
        $("#moreDetails2").show();
        $("#moreDetails2 select").css('display','block').selectmenu('refresh');
    });    

    $("#moreDetails2 select").on( "change", function(event, ui) {
        moreDetails2('aaaa');
    });    
});

function moreDetails2(text) {
    alert(text);
} 
```

这是从您的代码创建的一个有效的 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/DpdXY/](http://jsfiddle.net/Gajotres/DpdXY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:48:00.233

使用与全局函数名称和元素标识符相同的名称会在 Chrome、Safari 和 IE（不是 Firefox）中引起问题。

尝试将您的事件处理函数名称更改为“moreDetailsTwo”或其他内容。

`window`Chrome、Safari 和 IE为每个具有“id”值的元素创建全局符号（即属性）。我怀疑这会破坏您对“moreDetails2”函数的绑定。

# magento - 难以禁用 magento 扩展

> ID：14773956
> 
> 赞同：2
> 
> 时间：2013-02-08T13:46:05.630
> 
> 标签：magento, magento-1.7

我正在尝试禁用名为 m-turbo 的 Magento 缓存扩展，但它一直出现在菜单中。我已经转到文件`Artic_MTurbo.xml`并`app/etc/modules`更改`<active>true</active>`为`<active>false</active>`. 还有其他我需要/应该/可以做的事情吗？我认为这是禁用扩展的“方式”。

Magento 版本。1.7.0.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:51:58.880

如果您编辑 xml，您需要在管理菜单中清除缓存，我个人也会刷新缓存（缓存菜单右上角的按钮）。

如果这不起作用，请尝试将 app/etc/modules/Artic_MTurbo.xml 重命名为 Artic_MTurbo.xml.old 或类似的东西，这样 magento 就不会加载它，然后重复上述操作，清除缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:18:29.593

俊科说的对！
您可以执行以下操作之一 -
1\. 您是否尝试通过转到“系统”->“配置”->“高级”来禁用管理 html 中的扩展？如果没有，这是第一种方法。请记住在更改后保存配置。
2\. 转到索引管理并重新索引选择所有文件。从缓存管理中刷新“magento 缓存”和“缓存存储”。

# c++ - test.cpp:(.text._ZN1AC2Ev[_ZN1AC5Ev]+0x8)||未定义引用`vtable for A'|

> ID：14773958
> 
> 赞同：0
> 
> 时间：2013-02-08T13:46:22.663
> 
> 标签：c++

我有一个非常简单的代码：

```
#include <iostream>
#include <string>

class A
{
    public :

            A(){}
            virtual void fun(std::string);
            virtual ~A(){}
};

class B : public A
{
    public :

            B(){}
            void fun(std::string);
            ~B(){};
};

void B::fun(std::string)
{

}

int main()
{
    A a;
    return 0;
} 
```

我收到这条消息试图编译它：

> /home/Temp/test.o||`A::A()':| test.cpp:(.text._ZN1AC2Ev[_ZN1AC5Ev]+0x8)||undefined reference to` 在A'的函数vtable中| /home/Temp/test.o||`A::~A()':| test.cpp:(.text._ZN1AD2Ev[_ZN1AD5Ev]+0xb)||undefined reference to` 在A'的函数vtable中| /home/Temp/test.o:(.rodata._ZTI1B[typeinfo for B]+0x8)||未定义对`typeinfo for A'的引用| ||=== 构建完成：3 个错误，0 个警告 ===|

这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:47:13.467

你忘了执行`A::fun`。

如果您不想实现虚函数，请将其标记为纯用`= 0`，但请注意该类将变为抽象类，您将无法实例化它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T13:48:20.393

使用以下命令实现`A::fun`或将其指示为纯虚拟`= 0`：

```
virtual void fun(std::string) = 0; 
```

仍然请记住，如果`fun`是纯虚拟的，您将无法`A`在 main 中实例化。

# sql - MSSQL 2000 上的 MSSQL 2005 函数：GROUP BY CAST(...) 麻烦

> ID：14773960
> 
> 赞同：1
> 
> 时间：2013-02-08T13:46:29.663
> 
> 标签：sql, sql-server, sql-server-2005, casting, group-by

我编写了一个函数，可以统计地汇总表的记录。此函数在 MSSQL 2005 下运行良好：

```
DECLARE
@start datetime, 
@final datetime, 

SET @start = '08.02.2012'
SET @final = '08.02.2013'

SELECT  
  CAST(
       FLOOR(ISNULL(col1,col2)/50) * 50 AS int
      ) AS [MyCol1],
  CAST(
       FLOOR(ISNULL(col1,col2)/50) * 50 AS int
      )+49 AS [MyCol2],    

 COUNT(*) AS [Anzahl],
CAST(AVG(col3) AS decimal(3,2)) AS [MyCol3]
FROM T
WHERE Time BETWEEN @start AND @final
GROUP BY 
  CAST(
     FLOOR(ISNULL(col1,col2)/50) * 50 AS INT 
  )
ORDER BY 1 
```

现在我想在 MSSQL 2000 系统上使用这个功能，但是 Group By region 似乎是错误的：

> 该列在选择列表中无效，因为它不包含在聚合函数和 GROUP BY 子句中。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:08:39.487

解决这个问题的最简单方法是使用子查询：

```
SELECT [MyCol1], [MyCol1]+49 AS [MyCol2], COUNT(*) AS [Anzahl],
       CAST(AVG(col3) AS decimal(3,2)) AS [MyCol3]
FROM (select t.*, CAST(FLOOR(ISNULL(col1,col2)/50) * 50 AS INT) as [MyCol1]
      from T
     ) t
WHERE Time BETWEEN @start AND @final
GROUP BY [MyCol1]
ORDER BY 1 
```

它还使查询更易于理解。

# java - Hibernate：如何获取可选的外键数据？

> ID：14773961
> 
> 赞同：1
> 
> 时间：2013-02-08T13:46:30.193
> 
> 标签：java, mysql, performance, hibernate

我有一个包含客户数据的表，该表与订单表的外键相连。显然，一个客户可以有多个订单，但每个订单都只有一个客户。

当我检索客户数据时，Hibernate 会自动获取客户端的连接订单。但在很多情况下，我只需要客户数据。出于性能原因，我想避免这种情况，仅在需要时才获得订单。

有可能这样做吗？这真的会影响性能吗？

谢谢！噪音

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T13:50:06.540

如果您在加载客户时映射了它们之间的关联，`customer`那么`order`只有`Fetchtype.LAZY`在您访问它们时才会加载订单。这样加载会更快。

相反会在加载对象时`FetchType.EAGER`加载集合，影响性能。`orders``customer`

你可以告诉`Hibernate`你喜欢什么样的关联获取，一个使用注释的例子是：

```
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY) 
```

# html - 仅使用 XML 节点不同值填充下拉列表

> ID：14773966
> 
> 赞同：0
> 
> 时间：2013-02-08T13:46:48.913
> 
> 标签：html, xml, xslt, xpath, xslt-grouping

我正在尝试生成一个可以与现有 XML 数据文件一起使用的搜索过滤器，并且我开始尝试在下拉列表框中仅显示来自其中一个节点的唯一值。

XML 文件的示例可以在... [http://kirk.rapweb.co.uk/testing/filter/tidy/plain/products.xml看到](http://kirk.rapweb.co.uk/testing/filter/tidy/plain/products.xml)

我已经设法使用 XSLT 以更易读的格式显示 XML ... [http://kirk.rapweb.co.uk/testing/filter/tidy/products.xml](http://kirk.rapweb.co.uk/testing/filter/tidy/products.xml)

应用过滤器的相同数据... [http://kirk.rapweb.co.uk/testing/filter/tidy/filter/products.xml](http://kirk.rapweb.co.uk/testing/filter/tidy/filter/products.xml)

我想在第一个下拉列表框中列出的值被过滤掉...... [http://kirk.rapweb.co.uk/testing/filter/tidy/distinct/products.xml](http://kirk.rapweb.co.uk/testing/filter/tidy/distinct/products.xml)

所有数据都拉入一个 HTML 页面... [http://kirk.rapweb.co.uk/testing/filter/tidy/html/](http://kirk.rapweb.co.uk/testing/filter/tidy/html/)

我正在努力研究如何从... [http://kirk.rapweb.co.uk/testing/filter/tidy/distinct/products.xml](http://kirk.rapweb.co.uk/testing/filter/tidy/distinct/products.xml)获取数据 到 HTML 页面下拉列表框中。

任何人都可以提供建议，指出正确的方向或确认我在正确的轨道上吗？

我想要达到的最终结果是有 2 个下拉框。

下拉列表 1 将包含...刹车、排气、照明

下拉列表 2 将包含...

*   如果之前选择了制动器... 盘和鼓、垫和鞋。
*   如果之前选择了排气... 中心，后部。
*   如果之前选择了照明... 前照灯、尾灯。

现在我只想专注于用上面讨论的数据填充下拉框 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:37:13.410

我猜你假设你不知道数据中有多少不同的“组”（我的意思是，有人可以随时添加一个新组，不是吗？）。

XSLT 1.0 中用于对元素进行分组的标准技术之一是“Muenchian Grouping”（XSLT 2.0 实现了本机分组功能和元素），它基于比较唯一 ID。

在以下解决方案中，我假设 XML 文档中的数据尚未分组。

```
<xsl:key name="group-key"
         match="product"
         use="group" />

<xsl:template match="dataroot"> 
    <select>
        <xsl:for-each select="product[generate-id(.) = generate-id(key('group-key', group)[1])]">
            <!-- We sort the group names alphabetically. If the names of the groups are already ordered alphabetically, the xsl:sort can be omitted. -->
            <xsl:sort select="group" />
            <option><xsl:value-of select="group" /></option>
        </xsl:for-each>
    </select>
</xsl:template> 
```

将此模板（添加 xsl:stylesheet 元素）应用到原始“product.xml”的结果是：

```
<select>
    <option>Brakes</option>
    <option>Exhaust</option>
    <option>Lighting</option>
</select> 
```

注意：即使我们删除了 'xsl:sort' 元素，输出也将是相同的，因为数据已经在 'product.xml' 中排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T14:19:05.643

使用更新后的描述，您似乎想要创建一个具有不同组值的下拉列表。这是一个分组问题的示例，在 XSLT 1.0 中，实现这一点的方法是使用一种称为 Muenchian 分组的技术。它是这样的：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" omit-xml-declaration="yes"/>
  <xsl:key name="kGroup" match="product" use="group"/>

  <xsl:template match="/">
    <select name="productGroup" id="productGroup">
      <xsl:apply-templates 
        select="dataroot/product[generate-id() = 
                                 generate-id(key('kGroup', group)[1])]" />
    </select>
  </xsl:template>

  <xsl:template match="product">
    <option value="{group}">
      <xsl:value-of select="group"/>
    </option>
  </xsl:template>
</xsl:stylesheet> 
```

在您的输入 XML 上运行时，它会生成以下内容：

```
<select name="productGroup" id="productGroup">
  <option value="Brakes">Brakes</option>
  <option value="Exhaust">Exhaust</option>
  <option value="Lighting">Lighting</option>
</select> 
```

然后，您将使用与现在相同的 JavaScript 将结果放入 HTML DOM 中的特定元素中，该元素可以通过其 ID 轻松找到。

现在至于下一步，一旦上述工作正常进行，您将在此下拉列表中放置一个 JavaScript 事件，以便在选择项目时运行另一个转换。您将获得这个选定的值，然后可以将它作为参数值传递给另一个 XSLT。[此页面](http://www.articlejobber.com/tutorial/javascript_xslt_parameters_20060303_2.html)提供了有关在 JavaScript 中将参数传递到 XSLT 的良好信息。XSLT 看起来像这样（再次使用 Muenchian 分组）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" omit-xml-declaration="yes"/>
  <xsl:key name="kType" match="product" use="type"/>

  <xsl:param name="group" />

  <xsl:template match="/">
    <select name="productType" id="productType">
      <xsl:apply-templates 
        select="dataroot/product[generate-id() = 
                     generate-id(key('kType', type)[1])][group = $group]" />
    </select>
  </xsl:template>

  <xsl:template match="product">
    <option value="{type}">
      <xsl:value-of select="type"/>
    </option>
  </xsl:template>
</xsl:stylesheet> 
```

当参数值“Lighting”作为`group`参数传入并在您的输入 XML 上运行时，将产生：

```
<select name="productType" id="productType">
  <option value="Headlamps">Headlamps</option>
  <option value="Rear Lights">Rear Lights</option>
</select> 
```

# html - Html/css 导航栏出现在浏览器中的全屏 videojs 上

> ID：14773968
> 
> 赞同：0
> 
> 时间：2013-02-08T13:46:50.597
> 
> 标签：html, css, fullscreen, navbar, video.js

我到处搜索，但似乎找不到答案。在全屏播放视频时，html 导航位于 IE、Chrome 和 Firefox 中的视频之上，但在 Mac 和 PC 上的 Safari 中则没有。该网站是[http://www.david-bartlett.com](http://www.david-bartlett.com)请查看 showreel 页面或摘录。

恐怕我是一个相对新手，这是css问题还是videojs问题？任何关于如何解决它的想法都将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:49:39.213

问题是`z-index`DB.css 第 80 行中的属性：

```
#nav li {
    margin:0;
    padding:0;
    position:relative;
    float: left;
    list-style:none;
    line-height: 30px;
    z-index:3000; /* this line causes the bug */        
} 
```

我不确定其他浏览器，但在 Firefox 中，只需删除该行即可。

# powershell - 使用 PowerShell 将 ACL 替换为继承的默认值

> ID：14773969
> 
> 赞同：0
> 
> 时间：2013-02-08T13:46:56.417
> 
> 标签：powershell, windows-server-2003, acl

我在用户目录中有许多文件夹，这些文件夹最终使用了错误的 ACL。我想找到一种方法来使用 PowerShell（或者更简单的常规命令提示符）来删除现有的 ACL 并将其替换为它应该从其父文件夹继承的内容。诀窍是只有拥有该文件夹的用户才能访问它（get-acl '.\folder' 返回“尝试执行未经授权的操作。”）。这些文件夹都位于 Windows Server 2003 Std 系统上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:12:20.070

尝试这个：

```
#You have a textfile with FOLDER-paths
#$a = Get-Content d:\list.txt
#You have an array of FOLDER-paths
$a = @("d:\mytestfolder", "d:\my2ndtestfolder")

$a | % {
    #Take ownership to admin-group
    & TAKEOWN /F $_ /A /R /D Y
    #Reset acl to default recursively
    & ICACLS $_ /RESET /T /C
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:12:50.610

事实证明，使用常规命令提示符工具更容易做到这一点。附加的脚本只用了几行就完成了我所需要的：

```
@Echo Off
@Echo Taking ownership of files in %1
takeown /f %1 /r /d Y /a > :nul
@Echo Restoring default ACLs in %1
icacls %1 /reset /t /c > :nul
@Echo Restoring ownership of files to %2
subinacl /file %1 /setowner=%2 > :nul
subinacl /subdirectories %1\*.* /setowner=%2 > :nul 
```

# vba - Word 2007 VBA - 使一些文本粗体和其他斜体

> ID：14773971
> 
> 赞同：2
> 
> 时间：2013-02-08T13:47:00.067
> 
> 标签：vba, formatting, ms-word

我有以下代码从 Excel 单元格中选择数据并替换我的 Word 文档中的一段特定文本（出于此问题的目的，Excel 单元格已被纯文本字符串替换）。

数据“: go to”是不变的，那么数据“aaa bbb”可以是任何东西，直到我们到达“of”，它也是不变的。那么“of”之后的数据，“ccc ddd eee”可以是任何东西，直到它碰到“-”，这也是恒定的。

是否可以将“aaa bbb”数据设为粗体和大写，同时将“ccc ddd eee”数据**设为***斜体*？

“：去*ccc ddd eee*的**AAA** BBB—— ”

 *```
Selection.HomeKey Unit:=wdStory
Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "MOTMDIV1"
    .Replacement.Text = ": goes to aaa bbb of ccc ddd eee - "
    .Forward = True
    .Wrap = wdFindContinue
    .Format = False
    .MatchCase = True
    .MatchWholeWord = False
    .MatchWildcards = False
    .MatchSoundsLike = False
    .MatchAllWordForms = False
End With

Selection.Find.Execute Replace:=wdReplaceAll 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:21:37.100

如果您将查找和替换更改为从全部中查找和替换，Word 将突出显示替换的文本，从而允许您更改替换范围的属性。我已经修改了您的代码以突出显示这一点：

```
Sub ReplaceAndFormat()
   Dim sConst1 As String, sConst2 As String, sReplaceMent As String
   Dim rRange As Range, rFormat As Range

    'Set your constants.  This is where you can read in from Excel or whereever
   sConst1 = "aaa bbb"
    sConst2 = "ccc ddd eee"

    'Build the replacement string
    sReplaceMent = ": goes to " & sConst1 & " of " & sConst2 & " - "

    'Your replacement code
    Selection.HomeKey Unit:=wdStory
    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting
    With Selection.Find
       .Text = "MOTMDIV1"
        .Replacement.Text = sReplaceMent
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = True
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
        .Execute Replace:=wdReplaceOne

       'If we replace one by one Word will select the range after it finds it
        If .Found Then
            'After you've done the replacement, set it to a range so you can format
            Set rRange = Selection.Range

           'We know the length of all the strings so we can set the range of the "aaa bbb" etc etc 
           Set rFormat = ActiveDocument.Range(rRange.Start + 10, rRange.Start + 10 + VBA.Len(sConst1))
           'Set the formats for the first part
           rFormat.Font.Bold = True
           rFormat.Font.AllCaps = True

           'Repeat for the second part
           Set rFormat = ActiveDocument.Range(rRange.Start + 14 + VBA.Len(sConst1), rRange.Start + 14 + VBA.Len(sConst1) + VBA.Len(sConst2))
           rFormat.Font.Italic = True
       End If
   End With
End Sub 
```

注意：如果要查找和替换搜索文本的所有实例，则必须像这样遍历文档：[Repeating Microsoft Word VBA until no search results found](https://stackoverflow.com/questions/13465709/repeating-ms-word-macro-until-no-search-results-found/14309412#14309412)*

# applescript - 使用 applescript 将焦点设置到应用程序的特定窗口

> ID：14773974
> 
> 赞同：8
> 
> 时间：2013-02-08T13:47:08.703
> 
> 标签：applescript

如何使用 applescript 将焦点设置到给定应用程序的特定窗口？

我有几个 iTerm2 窗口在不同的显示器上运行。我想使用 applescript 将焦点设置到指定的窗口。

我需要两件事，一个收集窗口 ID 并将它们打印到标准输出的脚本。我有这个：

```
tell application "iTerm"
  set wins to id of every window
end tell 
```

打印 6 个整数：3034、2528、-1、-1、-1、-1

额外问题：四个 -1 是什么？

然后我尝试：

```
tell application "System Events"
  activate window 3034
end tell 
```

唯一发生的事情是我失去了当前终端的焦点（我正在输入这些命令），无论我指定 3034 还是 2528 作为 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:33:10.923

你几乎拥有它。您可以通过仅查看可见窗口来过滤掉“-1”窗口 ID：

```
tell application "iTerm 2"
  set wins to id of every window whose visible is true
end tell 
```

我通过查看以下结果发现了这一点：

```
tell application "iTerm 2" to properties of every window 
```

我注意到“-1”窗口具有属性`visible:false`

然后您可以直接将窗口 ID 告诉 iTerm 应用程序而不是系统事件：

```
tell application "iTerm 2"
  activate window 13195
end tell 
```

# ruby-on-rails - 宝石突然不见了

> ID：14773976
> 
> 赞同：2
> 
> 时间：2013-02-08T13:47:15.613
> 
> 标签：ruby-on-rails, windows, heroku

我只是在学习如何使用 Ruby on Rails，一切都很好。但是今天，当我尝试使用该命令时`rails new foo`，甚至`rails -v`它给了我这个：

```
C:\Users\Me\Ruby>rails new demo_app C:/Program Files
(x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems.rb:926:in `r
eport_activate_error': Could not find RubyGem railties (>= 0)
(Gem::LoadError)
        from C:/Program Files (x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems .rb:244:in
`activate_dep'
        from C:/Program Files (x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems 
```

.rb:236:in `activate' from C:/Program Files (x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems .rb:1307:in`gem' 来自 C:/Ruby193/bin/rails:22:in `'

所以……怎么了？

`gem list rails`给了我这个：

```
C:\Users\Me\Ruby>gem list rails

*** LOCAL GEMS *** 
```

我使用的是 Windows 7，没有 rvm 或 pik，但过去 5 天运行良好。

好的，我尝试使用“gem install rails”安装新的导轨，它说：

```
C:\Users\Me\Ruby>gem install rails
Fetching: i18n-0.6.1.gem (100%)
Fetching: multi_json-1.5.0.gem (100%)
Fetching: activesupport-3.2.11.gem (100%)
Fetching: builder-3.0.4.gem (100%)
Fetching: activemodel-3.2.11.gem (100%)
Fetching: rack-1.4.5.gem (100%)
Fetching: rack-cache-1.2.gem (100%)
Fetching: rack-test-0.6.2.gem (100%)
Fetching: journey-1.0.4.gem (100%)
Fetching: hike-1.2.1.gem (100%)
Fetching: tilt-1.3.3.gem (100%)
Fetching: sprockets-2.2.2.gem (100%)
Fetching: erubis-2.7.0.gem (100%)
Fetching: actionpack-3.2.11.gem (100%)
Fetching: arel-3.0.2.gem (100%)
Fetching: tzinfo-0.3.35.gem (100%)
Fetching: activerecord-3.2.11.gem (100%)
Fetching: activeresource-3.2.11.gem (100%)
Fetching: polyglot-0.3.3.gem (100%)
Fetching: treetop-1.4.12.gem (100%)
Fetching: mail-2.4.4.gem (100%)
Fetching: actionmailer-3.2.11.gem (100%)
Fetching: rack-ssl-1.3.3.gem (100%)
Fetching: json-1.7.6.gem (100%)
ERROR:  Error installing rails:
        The 'json' native gem requires installed build tools.

Please update your PATH to include build tools or download the DevKit
from 'http://rubyinstaller.org/downloads' and follow the instructions
at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit' 
```

嗯......我已经在 5 天前安装了 DevKit，但我又做了一次，这次以管理员身份启动命令行。

然后我“尝试”安装 json：

```
C:\Users\Me\DevKit>gem install json
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing json:
        ERROR: Failed to build gem native extension.

        "C:/Program Files (x86)/ruby-1.9.2/bin/ruby.exe" extconf.rb
creating Makefile

make
Makefile:160: warning: overriding commands for target `C:/Program'
Makefile:153: warning: ignoring old commands for target `C:/Program'
Makefile:160: warning: overriding commands for target `Files'
Makefile:153: warning: ignoring old commands for target `Files'
C:/Program Files (x86)/ruby-1.9.2/bin/ruby -e "puts 'EXPORTS', 'Init_generator'"
  > generator-i386-mingw32.def
/bin/sh: -c: line 0: syntax error near unexpected token `('
/bin/sh: -c: line 0: `C:/Program Files (x86)/ruby-1.9.2/bin/ruby -e "puts 'EXPOR
TS', 'Init_generator'"  > generator-i386-mingw32.def'
make: *** [generator-i386-mingw32.def] Error 2

Gem files will remain installed in C:/Program Files (x86)/ruby-1.9.2/lib/ruby/ge
ms/1.9.1/gems/json-1.7.6 for inspection.
Results logged to C:/Program Files (x86)/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/jso
n-1.7.6/ext/json/ext/generator/gem_make.out 
```

我得到了这个-.-

我真的是这方面的初学者，所以我不知道还有什么可以尝试的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:31:34.393

你可能在某个时候搞砸了你的 ruby​​/rails 安装。

我强烈推荐使用[RailsInstaller](http://railsinstaller.org/)，它可以一键安装 Ruby、Rails 和所有的陷阱（DevKit 等）。

当然，您应该先卸载所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T17:09:17.937

现在好了，我刚刚重新安装了所有东西，但在此之前我意识到我在 Windows 命令行中。使用 git bash 我没有任何问题（好吧，不一样，这就是我重新安装整个东西的原因）。现在一切都恢复正常了。

# mysql - 在 MySQL 中表示高达并包括 100% 的百分比

> ID：14773977
> 
> 赞同：3
> 
> 时间：2013-02-08T13:47:22.863
> 
> 标签：mysql, percentage

我的数据库中有一个表，表示两件事之间的相似性。就像是：

```
+------------+------+
| Field      | Type |
+------------+------+
| id_a       | int  |
| id_b       | int  |
| similarity | ???  |
+------------+------+ 
```

`similarity`将保持之间的相似程度`id_a`和`id_b`百分比，范围可以从 100% 相似（相同的事物）到*但不包括*0%。我不会为 0% 相似（即完全不同）的事物存储链接。换句话说，我需要存储 range `[100, 0)`。小数位数不是很重要，但是 1 或 2 会很好。

我通常看到建议的解决方案是使用类似`decimal(4,2)`. 对于我的用例来说，问题在于它存储`(100,0]`.

我提出了两种可能的解决方案，都使用`decimal(4,2)`，但它们看起来都像黑客：

## 选项1

检索时存储`similarity - 0.01`并添加`0.01`背面。就像是：

```
INSERT INTO similarities (id_a, id_b, similarity) VALUES (1, 2, ? - 0.01); 
```

进而：

```
SELECT id_a, id_b, similarity + 0.01 FROM similarities; 
```

## 选项 2

存储 0%-99.99% 的百分比差异，然后在检索时转换为相似度：

```
SELECT id_a, id_b, 100 - difference AS similarity FROM similarities; 
```

在这两种情况下，我可能会使用创建一个视图`MERGE`，而不是在查询中留下加法和减法。

还有比这些更好的选择吗？如果没有，你会选择哪个，为什么？

### 笔记：

我不介意使用其他表示形式，例如`[1,0)`，只要它很好地表示范围即可。

### 编辑以澄清：

插入很少完成，并且只由我完成，而不是用户完成，并且是大批量完成的。我知道我插入的数据将始终在 [100,0) 中，因此这不是强制执行的问题，而是最有效/最自然的表示形式是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:03:28.040

在符合 SQL 标准的 dbms 中，您可以将列声明为 decimal(5, 2) 类型（或使用等效的小数部分），并使用 CHECK 约束来限制范围。

```
create table data (
  id integer primary key,
  pct decimal(5, 2) not null check (pct > 0 and pct <= 100)
); 
```

但是 MySQL 不符合 SQL 标准。它不强制执行 CHECK 约束。所以我认为你有两个选择。

1.  编写一个触发器来检查范围，并回滚超出您选择的范围的插入和更新。
2.  使用对有效值表的外键引用。在您的情况下，该表将只有 10,000 行，对吗？

如果我需要在进一步计算中使用百分比，我更喜欢 0.0001 到 1.0000 范围内的值，因此可以直接使用它们。不过，看起来这不是您的应用程序中的一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:24:35.013

与其将相似度分配为百分比，不如按 sè 为它们提供范围内的相似度分数`[1,10000]`（或者`(0,10000]`如果您愿意）。每个百分点给你 100 分（如果你需要，可以有效地保留两位小数）。

贮存：`int(32)`

看法：`SELECT id_a, id_b, similarity/100 FROM similarities;`

# c# - 查找丢失/损坏的本机 DLL

> ID：14773980
> 
> 赞同：2
> 
> 时间：2013-02-08T13:47:24.693
> 
> 标签：c#, python, py2exe

我正在用 Python 编写一个应用程序，它必须使用一些最初从 C# 代码创建的 DLL。通常，此类 DLL 的使用是有效的（已使用多个 DLL 证明，所有这些都来自同一来源）。为了在其他人的计算机上进行部署，我正在使用 Py2Exe，它也可以按预期工作。

但是现在我想使用另一个DLL并且有以下问题。如果我启动程序并调用 DLL 中的函数，它会抛出一个错误说：

`.Net Dll broken because of possibly missing native Dlls.`

现在是奇怪的部分。如果我将 python 程序编译成可执行文件，则消息不会显示，并且一切都按预期工作。

我已经尝试通过将 DLL 程序集与 ProcessExplorer 进行比较来识别丢失的 DLL，但它们看起来完全一样。接下来是尝试为我直接调用的所有 Dll 设置路径变量，但这也不是解决方案。

其他可能有趣的信息是 IDE 和 OS：我在 Windows 7 机器上使用带有 PyDev 2.5 插件的 Eclipse Indigo。

那么有什么我可以监督的事情或我可以尝试使其工作的设置吗？任何建议表示赞赏。

# html - 如何通过CSS在“相对”父级之外对齐未知高度的绝对DIV？

> ID：14773983
> 
> 赞同：5
> 
> 时间：2013-02-08T13:47:39.503
> 
> 标签：html, css, position, css-position

考虑一个带有 html的简单[示例](http://jsfiddle.net/mqy4z/)

```
<div class="parent">
    <div class="child">
    </div>
</div> 
```

和 CSS

```
.parent{
    position:relative;
    background:red;
    width:200px;
    height:40px;
}
.child{
    position:absolute;
    top:40px;
    left:30px;
    width:70px;
    height:70px;
    background:blue;
} 
```

将具有绝对位置的 DIV 放置在其父级下方（具有相对位置）。 ![在此处输入图像描述](../Images/63104377cdc3b585fcae1e8e2c2b07db.png)

在这个例子中，我将绝对的顶部等于父相对的高度。

**当高度未知**（父母和孩子）时，如何在父母下方对齐绝对DIV ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T13:51:36.453

不认为[这](http://jsfiddle.net/mqy4z/1/)对我自己有用，但它似乎：

```
html, body {
    height: 100%;
}
.parent{
    position:relative;
    background:red;
    width:200px;
    height:40px;
}
.child{
    position:absolute;
    top:100%;
    left:30px;
    width:70px;
    height:70px;
    background:blue;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T13:53:43.627

检查这个..

```
HTML:
-------

<div class="parent">
</div> 
<div class="child">
</div>

CSS:
-----
.parent{
    position:relative;
    background:red;
    width:200px;
    height:40px;
}
.child{
    position:absolute;
    top:auto;
    left:30px;
    width:70px;
    height:70px;
    background:blue;
} 
```

[（例子）](http://jsfiddle.net/Sriganesh/mqy4z/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:48:47.037

您可以对底部使用负值，例如。`bottom: -100px`

编辑：这是更好的解决方案：http: [//jsfiddle.net/mqy4z/3/](http://jsfiddle.net/mqy4z/3/) - 将孩子的位置设置为`top:100%`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T13:49:53.440

尝试将两个 div 放在 HTML 文件中的彼此下方：

```
<div class="parent">
</div>

<div class="child">
</div> 
```

# android - 如何在android中将xls转换为xml

> ID：14773985
> 
> 赞同：0
> 
> 时间：2013-02-08T13:47:43.263
> 
> 标签：android

最近我正在阅读 excel 文件，需要在 android 视图上显示它。我什至尝试过使用 java 库说 apache poi 和 jexcel api，这有助于在 java 中解析 excel 表，但在我尝试时未能在 android 中解析。

我什至尝试将 excel 转换为 xml，而不是解析 xml 并在 android 视图上显示内容，但为此我需要将 .xls 转换为 .xml 的转换器。谁能帮我解析android中的excel文件。

感谢和问候平克什·古普塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:13:44.877

`jxl`可以在 Android 中使用，但它只支持*xls*格式而不支持*xlsx*。

同时`poi`支持两者。但是在 Android 中使用时，您只能使用 .xls 读取*xls*文件`HSSFWorkbook`。要读取*xlsx*文件，您需要`XSSFWorkbook`，但`XSSFWorkbook`在 Android 中使用时存在问题（请参阅[此](http://mail-archives.apache.org/mod_mbox/poi-dev/201110.mbox/%3CCA+JOeWNWinmNmEtHs5VK+KEc_6BzAG_=LfpdXqsDsnjJKR2X7Q@mail.gmail.com%3E)）。

# java - android:layout_below 与 ImageView 不工作

> ID：14773986
> 
> 赞同：0
> 
> 时间：2013-02-08T13:47:45.037
> 
> 标签：java, android, layout, imageview

`android:layout_...`s 和 s 一起工作吗`ImageView`？从图片中您可以看到所有 10 行都在彼此的顶部，这意味着它`q2Image`不接受`android:layout_below="@/q1Image"`它的代码来下拉一行并为下一行加注星标。

我只是错过了什么，还是我试图做一些不可能的事情？

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="65"
    android:fillViewport="true" >

    <RelativeLayout 
        android:layout_width="fill_parent"   
        android:layout_height="wrap_content"> 

        <ImageView 
            android:id="@+id/q1Image"
            android:layout_width="10dp"
            android:layout_height="10dp"  /> 

        <TextView 
            android:id="@+id/q1Question"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/q1Image" /> 

        <TextView 
            android:id="@+id/q1Answer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"   
            android:layout_toRightOf="@id/q1Question"  /> 

        <TextView 
            android:id="@+id/q1Verse"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"   
            android:layout_toRightOf="@id/q1Answer"  /> 

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#C2BEBF" />

        <ImageView 
            android:id="@+id/q2Image"
            android:layout_width="10dp"
            android:layout_height="10dp"
            android:layout_below="@id/q1Image"  />

        <TextView 
            android:id="@+id/q2Question"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/q2Image" /> 

        <TextView 
            android:id="@+id/q2Answer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"   
            android:layout_toRightOf="@id/q2Question"  /> 

        <TextView 
            android:id="@+id/q2Verse"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"   
            android:layout_toRightOf="@id/q2Answer"  /> 

        <View 
            android:layout_width="fill_parent"
            android:layout_height="1dp"       
            android:background="#C2BEBF" />
//Above code is first 2 rows.  There are 10 rows total but I removed the code for rows 3-10 for this post. 
```

![在此处输入图像描述](../Images/3e1200ba483d1c276647a02a2ab9115b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:52:09.820

尝试将 + 放在 @ 和 id 之间，一切都必须没问题

```
@+id

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <!-- here the columns -->
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <!-- here the columns -->
    </LinearLayout>
    .
    .

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:45:46.550

您在代码中访问 id 的方式是正确的。“@+id”用于声明id。声明后对它的所有引用都应该是“@id”。您是否也遇到与 TextViews 相同的问题？我认为您也应该为 TextViews 设置 layout_below 属性。因为我可以看到文本也重叠在您的 UI 中。例如。，

```
<TextView 
        android:id="@+id/q2Question"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below = "@id/q1Question"
        android:layout_toRightOf="@id/q2Image" /> 
```

除非您为它指定 layout_below，否则 RelativeLayout 不会将视图放置在另一个视图下方。因此，您的 TextViews 出现重叠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:51:57.470

像这样引用 ID 并不总是有效。将“@id”替换为“@+id”。例子：

```
android:layout_below="@+id/q1Image" 
```

# windows-phone-7 - 删除 ApplicationBar 或更改其可见性或不透明度时，全景动画被破坏

> ID：14773988
> 
> 赞同：0
> 
> 时间：2013-02-08T13:47:51.627
> 
> 标签：windows-phone-7, windows-phone-8

我有 3 个全景项目，我只希望第一个有一个应用栏。

所以我开始实施删除其他全景项目的应用栏。

我所做的是处理`SelectionChanged`事件并基于`Panorama.SelectedIndex`隐藏应用程序栏：

```
this.ApplicationBar.IsVisible = this.Panorama.SelectedIndex == 0; 
```

滑动到第二项时，通常的全景动画不再起作用，过渡动画消失了，很突然。

我没有更改`IsVisible`，而是尝试了相同的结果：

*   移除应用栏`this.ApplicationBar = null`
*   将不透明度设置为零`this.ApplicationBar.Opacity = 0`

有趣的是，即使将不透明度更改为 0.5，动画也会被破坏

我的感觉是应用栏中的布局更改事件会产生这种全景破坏行为。

我还没有找到解决办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T15:39:33.167

将整个全景图放在堆栈面板中

```
<StackPanel>
<phone:Panorama Title="my application">
<phone:PanoramaItem Header="first item"/>
<phone:PanoramaItem Header="second item" Tap="OnPanoramaItemTap"/>
</phone:Panorama Title="my application">
</StackPanel>

 private void OnPanoramaItemTap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        ApplicationBar.IsVisible = false;
    } 
```

这只是一个想法，但它正在工作，我希望它对你的情况有好处

# java - 映射超类和命名查询

> ID：14773995
> 
> 赞同：1
> 
> 时间：2013-02-08T13:48:04.100
> 
> 标签：java, jpa

我有一个这样的映射超类：

```
@MappedSuperclass
@DiscriminatorColumn(name = "USER_TYPE")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@NamedQueries({
        @NamedQuery(name = "selectAllUsers", query = "SELECT u FROM User u"),
        @NamedQuery(name = "deleteUserByName", query = "DELETE FROM User u WHERE u.userName like :name"),
        @NamedQuery(name = "getUserByName", query = "SELECT FROM User u WHERE u.userName like :name") })
public abstract class User implements Serializable {.... 
```

我在命名查询上收到***“抽象架构类型'用户'未知”***错误。我不明白为什么......名称用户是对的？

欢迎大家提出意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:57:15.680

这是预期的 JPA 行为。映射的超类不可查询（参见 JPA 2.0 规范，第 2.11.2 节）。如果要使超类可查询，请将注释从 更改`@MappedSuperclass`为`@Entity`。

# python - 使用 Python pywinauto 自动化 acrobat

> ID：14773998
> 
> 赞同：1
> 
> 时间：2013-02-08T13:48:13.120
> 
> 标签：python, automation, pywin32, pywinauto, acrobat-sdk

我试图打开一个pdf文件并使用pywinauto将其保存为xml1.0。我已经开始编写下面的代码，但我无法找到菜单控件并将其保存为 xml。我是pywinauto的新手。你能帮我吗？还请建议我在哪里可以获得 python pywinauto 的教程。

```
 from pywinauto import application

    In_File = "sample.pdf"
    Ap = "C:\Program Files\Adobe\Acrobat 7.0\Acrobat\Acrobat.exe"
    app = application.Application()
    app.start_(Ap)
    app. 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:13:30.337

这是 Adob​​e Reader X 的示例

```
import pywinauto
pwa_app = pywinauto.application.Application()    
w_handle = pywinauto.findwindows.find_windows(title=u'Adobe Reader', class_name='AcrobatSDIWindow')[0]
window = pwa_app.window_(handle=w_handle)
window.MenuItem(u'&File->#0').Click() 
```

顺便说一句，我是 pywinauto- [SWAPY](http://code.google.com/p/swapy/)的 GUI 工具的作者。它可以生成一些代码。我希望它对您的自动化有所帮助。

# php - 存储值并检查值是否为空

> ID：14773999
> 
> 赞同：0
> 
> 时间：2013-02-08T13:48:15.970
> 
> 标签：php, wordpress, variables, if-statement

有没有办法可以检查

```
<?php the_field('max_working_height')?> 
```

是空的，或者存储我使用acnd时将显示的值，检查它是否为空。如果该值不为空，那么我必须让它像这样执行一组 html 代码和 php 代码

```
 <tr style="height: 25px; margin-left: 10px;">
<td style="margin-left: 10px;"><b>Max
  <?php the_field('max._outreach'); ?></td> 
</tr> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:57:38.150

如果您使用的是 ACF 插件，则`the_field()`显示该字段的值。如果要捕获字段的值，请使用`get_field()`. [在这里](http://www.advancedcustomfields.com/docs/)查看文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:51:55.813

```
<?php
$maxWorkingHeight = the_field('max_working_height');

if (false == $maxWorkingHeight) {
    // print your html/php
} else {
    // you can print $maxWorkingHeight here if you need it
} 
```

这假定如果未设置该字段，您的函数将返回一个虚假值（`null`、`false`、`0`或空字符串都是 PHP 中虚假值的示例）。