# StackOverflow 问答 14315000-14315999

# c++ - Windows下多个用户登录时如何获取活动用户？

> ID：14315013
> 
> 赞同：3
> 
> 时间：2013-01-14T08:06:46.080
> 
> 标签：c++, windows

假设当前有多个用户登录 Windows。说，`user1`登录，然后`switch user`登录`user2`，（不`user1`注销）。假设有一个应用程序在用户登录时运行。有两个用户`user1`并以活动用户身份`user2`登录`user2`，并且有两个应用程序。

我的问题是：应用程序如何知道其对应的用户是否处于活动状态？即，`user2`域中的应用程序确定其用户处于活动状态，而`user1`域中的应用程序确定其用户当前处于非活动状态。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:46:58.940

您可以调用[`WTSGetActiveConsoleSessionId`](http://msdn.microsoft.com/en-us/library/aa383835%28v=vs.85%29.aspx)以获取当前在物理控制台上处于活动状态的终端服务（又名“快速用户切换”又名“远程桌面”）会话 ID。

您可以调用[`WTSQuerySessionInformation`](http://msdn.microsoft.com/en-us/library/aa383838%28v=vs.85%29.aspx)with`WTS_CURRENT_SESSION`获取会话标识符和`WTSSessionId`获取`WTSInfoClass`当前进程的终端服务会话 ID。

如果活动会话ID和当前进程会话ID相同，则当前进程对应的用户在物理控制台上具有活动会话。

如果您想知道当前进程正在运行的会话是否处于活动状态（但不一定在物理控制台上），您可以改为`WTSConnectState`使用`WTSQuerySessionInformation`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-09T17:00:44.697

WTSGetActiveConsoleSessionId() 从 Windows 服务运行时实际上可能返回会话 0。如果您需要从 Windows 服务执行此操作，则需要枚举所有会话并找到连接的会话，然后从中获取用户。

下面的代码做的远不止这些，包括模拟该用户并以该用户身份运行一个进程，所有这些都来自 Windows 服务，但如果您只对用户名感兴趣，请查找调用 WTSQuerySessionInformation() 函数的第二个实例.

```
//Function to run a process as active user from windows service
void ImpersonateActiveUserAndRun(WCHAR* path, WCHAR* args)
{
    DWORD session_id = -1;
    DWORD session_count = 0;

    WTS_SESSION_INFOA *pSession = NULL;

    if (WTSEnumerateSessions(WTS_CURRENT_SERVER_HANDLE, 0, 1, &pSession, &session_count))
    {
        //log success
    }
    else
    {
        //log error
        return;
    }

    for (int i = 0; i < session_count; i++)
    {
        session_id = pSession[i].SessionId;

        WTS_CONNECTSTATE_CLASS wts_connect_state = WTSDisconnected;
        WTS_CONNECTSTATE_CLASS* ptr_wts_connect_state = NULL;

        DWORD bytes_returned = 0;
        if (::WTSQuerySessionInformation(
            WTS_CURRENT_SERVER_HANDLE,
            session_id,
            WTSConnectState,
            reinterpret_cast<LPTSTR*>(&ptr_wts_connect_state),
            &bytes_returned))
        {
            wts_connect_state = *ptr_wts_connect_state;
            ::WTSFreeMemory(ptr_wts_connect_state);
            if (wts_connect_state != WTSActive) continue;
        }
        else
        {
            //log error
            continue;
        }

        HANDLE hImpersonationToken;

        if (!WTSQueryUserToken(session_id, &hImpersonationToken))
        {
            //log error
            continue;
        }

        //Get real token from impersonation token
        DWORD neededSize1 = 0;
        HANDLE *realToken = new HANDLE;
        if (GetTokenInformation(hImpersonationToken, (::TOKEN_INFORMATION_CLASS) TokenLinkedToken, realToken, sizeof(HANDLE), &neededSize1))
        {
            CloseHandle(hImpersonationToken);
            hImpersonationToken = *realToken;
        }
        else
        {
            //log error
            continue;
        }

        HANDLE hUserToken;

        if (!DuplicateTokenEx(hImpersonationToken,
            //0,
            //MAXIMUM_ALLOWED,
            TOKEN_ASSIGN_PRIMARY | TOKEN_ALL_ACCESS | MAXIMUM_ALLOWED,
            NULL,
            SecurityImpersonation,
            TokenPrimary,
            &hUserToken))
        {
            //log error
            continue;
        }

        // Get user name of this process
        //LPTSTR pUserName = NULL;
        WCHAR* pUserName;
        DWORD user_name_len = 0;

        if (WTSQuerySessionInformationW(WTS_CURRENT_SERVER_HANDLE, session_id, WTSUserName, &pUserName, &user_name_len))
        {
            //log username contained in pUserName WCHAR string
        }

        //Free memory                         
        if (pUserName) WTSFreeMemory(pUserName);

        ImpersonateLoggedOnUser(hUserToken);

        STARTUPINFOW StartupInfo;
        GetStartupInfoW(&StartupInfo);
        StartupInfo.cb = sizeof(STARTUPINFOW);
        //StartupInfo.lpDesktop = "winsta0\\default";

        PROCESS_INFORMATION processInfo;

        SECURITY_ATTRIBUTES Security1;
        Security1.nLength = sizeof SECURITY_ATTRIBUTES;

        SECURITY_ATTRIBUTES Security2;
        Security2.nLength = sizeof SECURITY_ATTRIBUTES;

        void* lpEnvironment = NULL;

        // Get all necessary environment variables of logged in user
        // to pass them to the new process
        BOOL resultEnv = CreateEnvironmentBlock(&lpEnvironment, hUserToken, FALSE);
        if (!resultEnv)
        {
            //log error
            continue;
        }

        WCHAR PP[1024]; //path and parameters
        ZeroMemory(PP, 1024 * sizeof WCHAR);
        wcscpy(PP, path);
        wcscat(PP, L" ");
        wcscat(PP, args);

        // Start the process on behalf of the current user 
        BOOL result = CreateProcessAsUserW(hUserToken, 
            NULL,
            PP,
            //&Security1,
            //&Security2,
            NULL,
            NULL,
            FALSE, 
            NORMAL_PRIORITY_CLASS | CREATE_NEW_CONSOLE,
            //lpEnvironment,
            NULL,
            //"C:\\ProgramData\\some_dir",
            NULL,
            &StartupInfo,
            &processInfo);

        if (!result)
        {
            //log error
        }
        else
        {
            //log success
        }

        DestroyEnvironmentBlock(lpEnvironment);

        CloseHandle(hImpersonationToken);
        CloseHandle(hUserToken);
        CloseHandle(realToken);

        RevertToSelf();
    }

    WTSFreeMemory(pSession);
} 
```

# javascript - Codeigniter 会话 flashdata 和 ajax

> ID：14315015
> 
> 赞同：1
> 
> 时间：2013-01-14T08:06:54.937
> 
> 标签：javascript, ajax, codeigniter, session, message

我正在使用 codeigniter flashdata 在重定向后设置消息。好吧，如果我在没有 ajax 的情况下使用它，一切都会正常工作。如果我回显使用 flashdata 收到的消息，它仍然可以正常工作，但是如果我用 F5 刷新一次，我仍然会看到该消息。Flashdata 在第二次刷新后被清除......我该如何解决这个问题？

这就是我的函数的样子：

```
public static function message()
{
    if ( ! empty(self::$message['message']))
    {
        // build message
        $message = '<div class="alert alert-' . self::$message['type'] . '"><button type="button" class="close" data-dismiss="alert">&times;</button><strong>' . self::$message['heading'] . '</strong>' . self::$message['message'] . '</div>';

        // clear static message array
        self::$message = array();

        // return static message
        return $message;
    }
    else
    {
        if ( class_exists('CI_Session'))
        {
            // get flash message
            $message = self::$CI->session->flashdata('message');

            // clear flash data
            self::$CI->session->set_flashdata('message', null);

            // process flash message
            if ( ! empty($message))
            {
                // slice flashdata into single parts
                $message = explode('::', $message);

                // return flash message
                return '<div class="alert alert-' . $message[0] . '"><button type="button" class="close" data-dismiss="alert">&times;</button><strong>' . $message[1] . '</strong>' . $message[2] . '</div>';
            }
        }
    }

    return '';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:56:19.833

形成[CI 手册](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)：

> 如果您发现需要通过附加请求保留 flashdata 变量，则可以使用 keep_flashdata() 函数执行此操作。
> 
> **$this->session->keep_flashdata('item');**

所以你需要修改你的 AJAX 处理方法来保留你需要的项目。

# ios - cocos2d运行游戏中如何消除口吃？

> ID：14315016
> 
> 赞同：0
> 
> 时间：2013-01-14T08:06:59.817
> 
> 标签：ios, animation, cocos2d-iphone

我正在构建一个 cocos2d 连续运行的 ios 游戏，其中一个角色被动画化以穿过一个场景。背景、角色脚下的地面和奔跑角色身后的栅栏沿相反方向移动以模拟向前运动。角色本身是动画的，可以原地运行。偶尔会有额外的精灵在场景中移动。

我所有的动作（除了角色的原地动画）都发生在更新方法中。

我注意到当额外的精灵从场景中移动时，所有的移动部件都会结结巴巴。当没有额外的精灵时，口吃就会消失。

我还注意到，在 ipad 3 (ios 6.0.1) 中几乎察觉不到口吃，而在 iphone 3gs (ios 6.0.1) 和 ipad 1 (ios 5.1.1) 中最为明显，在iphone 4 (ios 6.0.1)。

我不知道从哪里开始解决这个问题 - 我尝试移除额外精灵的实际渲染，并且我还尝试移除角色后面的栅栏 - 但没有任何更改对口吃产生任何影响。

有什么建议么？

更新：通过运行时间分析器修复它，如下面的@Fogmeister 建议的那样。原来我在每次更新时都在做磁盘 i/o 以查找一些状态变量。我优化了它，所有设备上的口吃都消失了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:27:08.097

您需要确定在代码中占用时间并导致卡顿的原因。

这似乎只是一个优化问题，因为您可以在较旧、较慢的设备上看到更多的卡顿，而在功能更强大的新设备上则更少。

使用 Time Profiler 工具分析应用程序。这将告诉您时间花费在哪里，并几乎立即将您指向正在花费时间的函数（如果不是行）。

一旦你发现你可以开始优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:44:53.333

你的精灵移动代码是什么？如果您在该`-(void) update:(ccTime) delta {}`方法中手动更新位置，请确保您将每个移动乘以`delta`以考虑任何微小的帧速率波动。

# asp.net - 适用于所有 Web 浏览器的 CSS 渐变

> ID：14315022
> 
> 赞同：0
> 
> 时间：2013-01-14T08:20:47.740
> 
> 标签：asp.net, css

> **可能重复：**
> [CSS - 为 IE 设置的渐变](https://stackoverflow.com/questions/11298053/css-gradient-set-for-ie)

我为 li 标签设置样式并悬停

```
.centermenu li
{
    position: relative;
    float: right;
    cursor: pointer;
    height: 32px;
    width: 152px;
    margin: 10px 0 0 10px;
    color: #fff;
}

    .centermenu li:hover, .centermenu li:focus
    {
        background-image: -webkit-gradient(linear, left top, left bottom, from(rgba(255,255,255,.2)), to(rgba(255,255,255,0)));
        background-image: -webkit-linear-gradient(top, rgba(255,255,255,.2), rgba(255,255,255,0));
        background-image: -moz-linear-gradient(top, rgba(255,255,255,.2), rgba(255,255,255,0));
        background-image: -ms-linear-gradient(top, rgba(255,255,255,.2), rgba(255,255,255,0));
        background-image: -o-linear-gradient(top, rgba(255,255,255,.2), rgba(255,255,255,0));
        background-image: linear-gradient(top, rgba(255,255,255,.2), rgba(255,255,255,0));
         } 
```

它在 Firefox 和 GoogleChrom 中设置，但不在 Internet Explorer 中。

我为 IE 设置了这段代码，但没有设置样式。

```
 filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF 20%', endColorstr='#ffffff 1%');
  /* For Internet Explorer 8 */
 -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF 20%', endColorstr='#ffffff 1%')"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:36:43.200

它在较旧的浏览器中不起作用（如果我记得很好，它来自 css3 规范）。

要让它在更多浏览器上运行，您可以使用 svg 背景，但这也不是最好的方法。

# matlab - 如何在matlab中实现图像的delta E色差方法？

> ID：14315024
> 
> 赞同：0
> 
> 时间：2013-01-14T08:21:10.857
> 
> 标签：matlab

我已经实现了 LMS Daltonization 并将 RGB 图像转换为 L*a*b 颜色空间。现在我想使用 Delta E 的标准方法比较输入和输出图像。任何人都可以向我提供一些关于这种方法以及如何使用 MATLAb 进行比较的头...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T02:19:19.453

计算 Delta E 有多种方法，[维基百科上提供了公式](http://en.wikipedia.org/wiki/Color_difference)。

这是一些可以帮助您入门的源代码：

*   [FileExchange 上的 CIE76](http://www.mathworks.com/matlabcentral/fileexchange/31118-color-segmentation-by-delta-e-color-difference/content/DeltaE.m)
*   [FileExchange 上的 CIEDE2000](http://www.mathworks.com/matlabcentral/fileexchange/24372-de2000/content/deltaE.m)

# javascript - 从一系列输入字段中获取最大值

> ID：14315025
> 
> 赞同：3
> 
> 时间：2013-01-14T08:21:22.480
> 
> 标签：javascript, jquery, max

我有一系列输入字段。我永远不知道有多少，所以我需要从一个类中获取价值。在这种情况下，类是`.total`.

这`bestresult`是一个从 获取其值的文本字段`mysql`，但我希望手动更改它或通过其他文本字段中的最大值进行更改。

这是代码。显然不起作用，但也许你明白我想要做什么。

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
</head>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
$('input.total').change(function()
{
    var max = $('.total').max();
    $('#bestresult').attr("value", max);
});
</script>
<body>
<form>
<input type="text" name="bestresult" id="bestresult" class="total" value=""><br>
<input type="text" name="resultat[100][total]" class="total" value=""><br>
<input type="text" name="resultat[121][total]" class="total" value=""><br>
<input type="text" name="resultat[130][total]" class="total" value="">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:28:29.153

解决方案非常简单。试试这个：

```
$('input.total').change(function()
{
     var max = 0;

     $('.total').each(function(){
          if(parseFloat($(this).val()) > max ) {
               max = parseFloat($(this).val());
          }
     });

     $('#bestresult').val(max);
}); 
```

但是，如果您有多个文本框，则应跟踪最大值并在每次触发更改事件时更新以实现更好的性能。

```
 var max = 0;

    // get the max for the first time
    $(document).ready(function () {
        $('.total').each(function () {
            if (parseFloat($(this).val()) > max) {
                max = parseFloat($(this).val());
            }
        });

        $('#bestresult').val(max);
    });

    $('input.total').change(function () {
        if (parseFloat($(this).val()) > max) {
            max = parseFloat($(this).val());
        }

        $('#bestresult').val(max);
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T08:40:44.000

首先，您应该将脚本放在正文的末尾，以便在绑定更改事件时定义元素。

然后，您最好过滤输入，以排除包含最大值的输入。您可以使用此选择器 : `input.total[id!=bestresult]`。

并且最好还绑定 keyup 事件，以便在用户不必单击外部的情况下更新最大值。

因此，您可以拥有以下代码：

```
$('input.total[id!=bestresult]').on('blur change keyup', function(){
    $('#bestresult').attr("value", Math.max.apply(null, $('.total[id!=bestresult]').map(function(){
        return parseFloat(this.value)}).slice().filter(function(i, v){return v==v})
    ));
}); 
```

[示范](http://jsfiddle.net/k9CGp/)

# css - 由于缺少浮动，布局未对齐

> ID：14315027
> 
> 赞同：0
> 
> 时间：2013-01-14T08:21:35.400
> 
> 标签：css, html

以下代码来自 W3CSchool 示例：

```
<!DOCTYPE html>
<html>
<body>

<div id="container" style="width:500px">

<div id="header" style="background-color:#FFA500;">
<h1 style="margin-bottom:0;">Main Title of Web Page</h1></div>

<div id="menu" style="background-color:#FFD700;height:200px;width:20%;float:left;">
<b>Menu</b><br>
HTML<br>
CSS<br>
JavaScript</div>

<div id="content" style="background-color:#EEEEEE;height:200px;width:80%;">
Content goes here</div>

<div id="footer" style="background-color:#FFA500;text-align:center;">
Copyright © W3Schools.com</div>

</div>

</body>
</html> 
```

您可以复制代码并将其粘贴到下面的编辑器中： [http ://www.w3schools.com/html/tryit.asp?filename=tryhtml_layout_divs](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_layout_divs)

我已经将“菜单”的宽度指定为 20%，“内容”的宽度为 80%，为什么“内容”的右侧有一个空白区域？

如果我在“内容”的 css 样式中添加“float:left”，它只会正确对齐。我不明白为什么它会这样。谁能解释一下？

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:27:25.937

这是因为 和 的容器宽度`menu`设置`content`为`500px`。

`100%`如果您希望它占据整个页面，请将其设置为：

```
<div id="container" style="width:100%"> 
```

此外，如果您希望内容仅占用所有剩余空间，请不要为其分配宽度：

```
<div id="content" style="background-color:#EEEEEE; height:200px">Content goes here</div> 
```

这是完整的工作代码：

```
<!DOCTYPE html>
<html>
<body>

<div id="container" style="width:100%">

<div id="header" style="background-color:#FFA500;">
<h1 style="margin-bottom:0;">Main Title of Web Page</h1></div>

<div id="menu" style="background-color:#FFD700;height:200px;width:20%;float:left;">
<b>Menu</b><br>
HTML<br>
CSS<br>
JavaScript</div>

<div id="content" style="background-color:#EEEEEE;height:200px">
Content goes here</div>

<div id="footer" style="background-color:#FFA500;text-align:center;">
Copyright © W3Schools.com</div>

</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:46:57.963

页面右侧有空白区域，因为您的浮动 div与您的内容 div**重叠**，因为浮动 div 始终浮动在其他 div 之上（尝试删除菜单的背景颜色以查看示例）。当您将浮动右/左应用于您的内容 div 时，它也会与菜单 div 一起浮动，因此占据所有空间。

请参考[本站](http://css-tricks.com/all-about-floats/)

有关**float**的更多信息。

谢谢，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:28:34.030

DIV 是块元素。`float`这意味着如果不使用、`position:absolute;`或，则 2 个 DIV 将依次显示在另一个下方`inline`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T08:33:13.440

如果你使用'float' 样式表示这个div 在'inline' 的外部呈现并且在'block' 的内部呈现，并且会影响元素的背面。因此，如果内容正确显示，您可以使用“float:left;width:80%”和“float:left;width:80%”。其实这是'display:inline-block'，但根据我的经验，它会产生浏览器的bug。

# google-analytics - 分析电子商务，交易未注册

> ID：14315028
> 
> 赞同：0
> 
> 时间：2013-01-14T08:21:42.100
> 
> 标签：google-analytics

我想在 Analytic 的电子商务模块中记录交易。但是他们没有注册，我不知道为什么。页面跟踪发生在页面顶部：

```
var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22238012-1']);
  _gaq.push(['_trackPageview']); 
```

就在电子商务代码之前，我正在跟踪一个事件。

```
_gaq.push(['_trackEvent', 'Conference', 'Signup', '1']); 
```

事件和页面跟踪都出现在 Analytics 中，但是这一点没有。

```
_gaq.push(['_addTrans',
    "26", // transaction ID - required
    "", //store name                
    "5160", // total - required
    "0", //tax
    "0.0", //shipping
    "", //city
    "", //state
    "DK"              // country
]);

            _gaq.push(['_addItem',
    "26", // transaction ID - necessary to associate item with transaction
    "1", // SKU/code - required
    "Paid Attendant", // product name                
    "", //category                
    "3195", // unit price - required
    "1"               // quantity - required
]);
            _gaq.push(['_addItem',
    "26", // transaction ID - necessary to associate item with transaction
    "3", // SKU/code - required
    "Extra Material", // product name                
    "", //category                
    "1965.00", // unit price - required
    "1"               // quantity - required
]);
    _gaq.push(['_trackTrans']); //submits transaction to the Analytics servers 
```

你知道为什么不吗？

谢谢， 迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:22:49.230

现在已经解决了。我的交易花了将近一天多的时间才出现，但它现在就在那里。记录的事务 id 正是我昨天尝试的那些。所以上面的例子确实有效。

# java - 通过 JCR 实现基于标签的搜索系统的最佳方式，例如 Modeshape

> ID：14315031
> 
> 赞同：8
> 
> 时间：2013-01-14T08:22:07.257
> 
> 标签：java, tags, jcr, modeshape

我需要一个 JCR 的基于标签的搜索系统，比如 Modeshape。我想通过一些标签搜索节点。问题是实现它的最佳方法是什么？

1.  为标签添加新的节点类型和 mixin，如果这是真的，我在哪里可以定义用户可以查看的标签名称？
2.  实现标签层次结构并在我的节点中引用它们。所以如果这是真的，我该如何参考它们？
3.  任何其他方式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T21:32:22.163

在 JCR 中有几种实现标签的方法。您选择哪个选项将取决于您自己的应用程序的需求。这是我知道的四个选项。

**选项 1：使用 Mixins**

为每个标记定义一个混合节点类型定义，它是一个标记混合（它没有属性定义或子节点定义），使用 NodeTypeManager 动态注册它们。然后，当您想要“标记”一个节点时，只需将代表该标记的 mixin 添加到该节点即可。任何节点都可以有多个标签，您可以查询具有特定标签的所有节点。

*（在此响应的其余部分中，“acme”用作通用名称空间。您应该将其替换为适合您自己的应用程序和组织的名称空间。）*

例如，给定标签“acme:tag1”，您可以使用简单查询找到所有具有此标签的节点：

```
SELECT * FROM [acme:tag1] 
```

这种方法的缺点是维护标签很麻烦。创建新标签需要注册新的节点类型。您不能轻松地重命名标签，而是必须为具有新名称的标签创建 mixin；找到所有具有代表旧标签的mixin的节点，删除旧的mixin，并添加新的；最后删除旧标签的节点类型定义（在它不再在任何地方使用之后）。删除旧标签以类似的方式完成。另一个缺点是不容易将附加元数据（例如，显示名称）与标签相关联，因为节点类型定义上不允许有额外的属性。

这种方法应该表现得很好。

**选项 2：使用分类法和强引用**

在这种方法中，您将在存储库的一个区域中创建一个简单的节点结构，您可以在其中为每个标签（例如，分类）创建一个节点。在此节点上，您可以设置描述标签的属性（例如，显示名称）；这些属性可以随时更改（例如，重命名标签）。

然后要将标签“应用”到节点，您只需创建与标签的某种关系。一种方法是定义一个包含 REFERENCE 类型的“acme:tags”多值属性的 mixin 节点类型。当您想将一个或多个标签应用于节点时，只需将 mixin 添加到节点并将“acme:tags”属性设置为标签节点即可。

要查找特定标记的所有节点，您可以在标记节点上调用“getReferences()”以查找包含对标记节点的引用的所有节点。

这种方法的好处是所有标签都必须在一个或多个分类法（可能包括用户特定的分类法）内进行控制/管理。但是，也有一些缺点。首先，REFERENCE 属性的性能可能不是很好。一些 JCR 实现完全不鼓励使用 REFERENCES。ModeShape 不会，但是当有许多节点包含对同一节点的引用时（例如，许多节点具有单个标记），ModeShape 可能会开始降低 REFERENCE 性能。

**选项 3：使用分类法和弱引用**

这个选项是类似于上面的选项 2 的混合，除了“acme:tags”属性将是 WEAKREFERENCE 而不是 REFERENCE。您仍将定义和管理一个或多个分类法。要查找具有特定标记的节点，您不能在标记节点上使用“getReferences()”方法（因为它们不适用于 WEAKREFERENCE 属性），但您可以通过查询轻松完成此操作：

```
SELECT * FROM [acme:taggable] AS taggable 
JOIN [acme:tag] AS tag ON taggable.[acme:tags] = tag.[jcr:uuid]
AND LOCALNAME(tag) = 'tag1' 
```

这种方法确实强制使用一个或多个分类法，使控制标签更容易一些，因为它们必须存在于分类法中才能使用。重命名和删除也更容易。在性能方面，这比 REFERENCE 方法要好，因为 WEAKREFERENCE 属性在大量引用时会表现得更好，无论它们都指向一个节点还是多个节点。

缺点是即使标签仍在使用，您也可以删除它，但包含对该已删除标签的 WEAKREFERENCE 的节点将不再有效。这可以通过应用程序中的一些约定来解决，或者通过简单地使用分类上的元数据来说明特定标签“已弃用”并且不应使用。（IMO，后者实际上是这种方法的一个好处。）

此选项通常会比选项 2 更好地执行和扩展。

**选项 4：使用字符串属性**

另一种方法是简单地使用 STRING 属性来用要应用的标签的名称来标记每个节点。例如，您可以定义一个定义多值 STRING 属性的 mixin（例如，“acme:taggable”），当您想要标记节点时，只需添加 mixin（如果尚未存在）并添加标记为“acme:tags”STRING 属性上的值（同样，如果它尚未作为值存在）。

这种方法的主要优点是非常简单：您只需在要标记的节点上使用字符串值。要查找使用特定标签（例如，“tag1”）标记的所有节点，只需发出查询：

```
SELECT * 
FROM [acme:taggable] AS taggable 
WHERE taggable.[acme:tags] = 'tag1' 
```

标签的管理很容易：没有管理。如果要重命名标签，则可以重命名标签值。如果要删除标签（并从带有标签的节点中删除），则可以通过从“acme:tags”属性中删除值来完成（可能在后台作业中）。

请注意，这允许使用任何标签名称，因此最适用于标签名称根本不受控制的情况。如果您想控制用作标签值的字符串列表，只需在存储库中创建一个分类（如上面的选项 2 和 3 中所述），然后让您的应用程序将值限制为分类中的值。您甚至可以拥有多个分类法，其中一些可能是特定于用户的。但是这种方法没有与选项 2 或 3 完全相同的控制。

此选项将比选项 3 执行得更好（因为查询更简单），但也可以扩展。

# knockout.js - 如何在 knockout.js 中列出数据库值？

> ID：14315043
> 
> 赞同：2
> 
> 时间：2013-01-14T08:23:29.987
> 
> 标签：knockout.js, ruby-on-rails-3.2

我的任务是在 ruby​​ on rails 中做 knockout.js。我想以表格格式列出我的数据库值。我的索引页面是

```
<%= javascript_include_tag "knockout-2.2.0", "knockout.simpleGrid.1.3" %>

<style type='text/css'> 
    .ko-grid { margin-bottom: 1em; width: 25em; border: 1px solid silver; background-color:White; }
    .ko-grid th { text-align:left; background-color: Black; color:White; }
    .ko-grid td, th { padding: 0.4em; }
    .ko-grid tr:nth-child(odd) { background-color: #DDD; }
    .ko-grid-pageLinks { margin-bottom: 1em; }
    .ko-grid-pageLinks a { padding: 0.5em; }
    .ko-grid-pageLinks a.selected { background-color: Black; color: White; }
    .liveExample { height:20em; overflow:auto } /* Mobile Safari reflows pages slowly, so fix the height to avoid the need for reflows */
</style>
<% @users.each do |user| %>
<script type="text/javascript">
 $(document).ready(function() {

    var initialData = [
     {name:<%= @user_names.to_json.html_safe%>, place: <%= @user_places.to_json.html_safe%> }
    ];

var PagedGridModel = function(items) {
    this.items = ko.observableArray(items);

    this.addItem = function() {
        this.items.push({ name: "New item", place: "dfgd"});
    };

    this.sortByName = function() {
        this.items.sort(function(a, b) {
            return a.name < b.name ? -1 : 1;
        });
    };

    this.jumpToFirstPage = function() {
        this.gridViewModel.currentPageIndex(0);
    };

    this.gridViewModel = new ko.simpleGrid.viewModel({
        data: this.items,
        columns: [
            { headerText: "Name", rowText: "name" },
            { headerText: "Place", rowText: "place" }

        ],
        pageSize: 4
    });
};

ko.applyBindings(new PagedGridModel(initialData));
    });
 </script>
 <%end%>
<div data-bind='simpleGrid: gridViewModel'> <br/></div>

<button data-bind='click: addItem'>
    Add item
</button>

<button data-bind='click: sortByName'>
    Sort by name
</button>

<button data-bind='click: jumpToFirstPage, enable: gridViewModel.currentPageIndex'>
    Jump to first page
</button> 
```

运行时的结果是

```
Name                          Place
Nithin,Vipin,Jetson     Vatakara,Calicut,Aluva 
```

所有名称都排成一行，与地点的情况相同。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:37:30.220

代替这个

```
 var initialData = [
     {name:<%= @user_names.to_json.html_safe%>, place: <%= @user_places.to_json.html_safe%> }
    ]; 
```

尝试通过迭代一一给出user_name。

我不知道。请你试试这个。

```
 $(document).ready(function() {
var initialData = new Array;
<% @users.each do |user| %>
initialData.push({name: "<%= user.name %>" , place: "<%= user.place %>" }) ;
<% end %> 
```

# asp.net-mvc-3 - MVC如何将日期时间转换为unix时间带？

> ID：14315045
> 
> 赞同：0
> 
> 时间：2013-01-14T08:23:45.863
> 
> 标签：asp.net-mvc-3

大家好，我想知道如何将日期时间转换为 unix 时间带？你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:33:13.020

这是您要查找的内容：[如何将 UNIX 时间戳转换为 DateTime，反之亦然？](https://stackoverflow.com/a/250400/968633)

来自谷歌搜索的更多网址：

[在 C# 中使用 DateTime 和 Unix 时间戳或世界时 (UTC)](http://www.rhyous.com/2009/09/30/working-with-unix-time-stamps-or-universal-time-utc-in-csharp/)

[C# 将 DateTime 转换为 UNIX 时间戳，反之亦然](http://abouteverythingandnothing.info/2011/08/cshar-converting-datetime-to-unix-timestamp-and-vice-versa/)

# macos - 如何处理有关核心数据、共享首选项和通知的 Mac OS X 助手/主应用程序架构？

> ID：14315048
> 
> 赞同：49
> 
> 时间：2013-01-14T08:24:01.123
> 
> 标签：macos, core-data, notifications, daemon, helpers

我对我正在处理的项目（Mac OS X 应用程序）有一些架构上的疑问。它基本上由两个元素组成：在后台运行的守护进程收集一些数据，以及用于表示收集到的数据的查看器。

守护程序应在状态栏中可见（无停靠图标），并包括一个可通过状态栏访问的小菜单。它将数据保存在核心数据存储中。其中一个菜单项是打开**查看器的****链接**。当这个查看器打开时，一个**普通**的GUI 应用程序应该开始包括一个停靠图标和菜单栏。打开应用程序本身时也会打开查看器（通过双击图标）。

 ****经过一些试验，我发现实现此功能的最佳方法是创建两个应用程序，主应用程序代表**查看器**，辅助程序代表**守护程序**。我这样做的原因之一是不可能`LSUIElement`立即在值之间切换以强制守护程序/查看器状态。

现在我对这个架构有一些疑问：

*   守护程序和查看器应用程序都使用相同的核心数据存储来保存和检索数据。当拥有多线程应用程序时，我知道需要多个`NSManagedObjectContext`对象才能正确同步数据。让多个应用程序同时使用同一个核心数据存储会怎么样？这甚至可以在没有冲突、锁定等风险的情况下实现吗？如何保证一致性？

*   守护程序应始终在查看器启动时启动。我通过简单地循环所有打开的进程并检查是否列出了守护程序的捆绑标识符来实现这一点。如果不是，则使用`NSWorkspace`'s启动守护程序`launchApplication`。这工作正常。现在，当用户退出守护程序时，查看器也应该停止。通知查看者守护程序停止的最佳方式是什么？如果守护进程消失，我可以定期检查活动进程并退出查看器，但这听起来有点奇怪。我宁愿选择在查看器即将关闭时发送的某种通知。但是由于这个通知应该在应用程序之间发送和捕获，我不知道哪个**简单的**通知服务可用。有什么想法吗？

*   该应用程序被沙盒化，因为它将在 Mac App Store 上分发。`NSWorkspace`使用's启动应用程序`launchApplication`会导致目标应用程序在与源应用程序相同的沙盒环境中运行，我认为这根本不是问题，因为在同一个沙盒中运行两个应用程序感觉**更好**，而且可能确实如此。但是想象一下这种情况：在登录时自动启动守护进程（使用`SMLoginItemSetEnabled`），并且用户双击 Viewer.app。由于守护进程已经在运行（同样，这是通过循环通过活动进程来检查的）它不会被启动。现在我们让守护进程和查看器在不同的沙箱中运行，对吧？这会导致偏好、核心数据存储等方面的任何问题吗？

*   我想`NSUserDefaults`用于基本配置，我可以在守护进程和查看器之间以某种方式交换这些数据吗？同样，两个应用程序将具有不同的包标识符。

提前感谢您的帮助，不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-30T22:56:10.833

这个问题没有一个正确的答案，但这是我的处理方法：

> 守护程序和查看器应用程序都使用相同的核心数据存储来保存和检索数据。

因为不支持在进程之间共享核心数据存储（据我所知），我会让守护进程公开一个[XPC Service](https://developer.apple.com/library/content/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingXPCServices.html)。查看器不会打开 Core Data 存储本身，而是使用 an`NSXPCConnection`通过守护进程访问数据。

假设查看器永远不会在没有守护程序的情况下运行，它可以使用`SMLoginItemSetEnabled`，就像您在问题中提到的那样，为守护程序注册一个 mach 服务，然后连接到该服务。

[在 Apple 的网站](https://christiantietze.de/posts/2015/01/xpc-helper-sandboxing-mac/)上，有一个示例代码详细介绍了设置的详细信息[（](https://developer.apple.com/library/content/samplecode/AppSandboxLoginItemXPCDemo/Introduction/Intro.html)摘要：守护进程需要*位于*确保您的团队 ID 在守护程序的包标识符中）。`App.app/Contents/Library/LoginItems/daemon.bundle.id.app`

 *> 守护程序应始终在查看器启动时启动。

全部设置：一旦你用 注册了守护进程`SMLoginItemSetEnabled`，当查看器连接到它的 XPC 服务时，launchd 将启动它（如果需要）。

> 现在，当用户退出守护程序时，查看器也应该停止。

查看器可以使用`NSXPCConnection`来查明守护程序何时退出。守护进程也可以`SMLoginItemSetEnabled`在它退出之前取消注册，这样它就不会重新启动。

> 我想`NSUserDefaults`用于基本配置，我可以在守护进程和查看器之间以某种方式交换这些数据吗？同样，两个应用程序将具有不同的包标识符。

为此使用套件：

```
// To read or write:
NSUserDefaults* suiteDefaults = [[NSUserDefaults alloc] initWithSuiteName:@"com.example.app.shared"];
[suiteDefaults setObject:[NSDate date] forKey:@"launchTime"];

// Add the suite to -standardUserDefaults to make reading easier:
NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];
[defaults addSuiteNamed:@"com.example.app.shared"]; 
```

要使用沙盒，查看器和守护程序必须共享一个应用程序组。你甚至可以使用 KVO 来观察共享密钥的变化。*****

# objective-c - Youtube-api，如何检查我是否喜欢或不喜欢当前视频？

> ID：14315053
> 
> 赞同：-1
> 
> 时间：2013-01-14T08:24:08.017
> 
> 标签：objective-c, youtube-api

在[这个页面](https://developers.google.com/youtube/2.0/developers_guide_protocol_ratings)中，我们有一个 API 可以为指定的视频添加评分（喜欢/不喜欢）。但我没有看到任何视频来检查这一点。例如，当我加载一个视频列表，然后查看视频详细信息时，如何检查我是否喜欢/不喜欢这个视频？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-14T15:48:44.110

这是一个两步过程，但您只需要执行一次第一步。

首先，获取用户“喜欢”播放列表的 ID。您可以通过[Channels API](https://developers.google.com/youtube/v3/docs/channels/list)做到这一点。

请注意，您要查找的数据位于 response["items"]["relatedPlaylists"]["likes"] 元素中。将此 ID 缓存在某处。此 ID 不应更改，因此您可以在本地持久存储（如数据库）中为用户保留它。

使用“播放列表项目”API 来获取用户“喜欢”的项目。视频 ID 应位于每个播放列表项的 contentDetails 部分。将此与当前视频的 ID 进行比较，您应该知道用户是否“喜欢”了该视频。

# android - 使用 HoloEveryWhere 单击 ActionBar 上的 SearchView 图标时，如何隐藏 SubMenu？

> ID：14315056
> 
> 赞同：1
> 
> 时间：2013-01-14T08:24:27.317
> 
> 标签：android, android-actionbar, submenu, searchview, android-holo-everywhere

在我的演示中，我的操作栏上放置了一个搜索视图和一个子菜单，如下所示：@Override public boolean onPrepareOptionsMenu(Menu menu) {

```
 SearchView searchView = new SearchView(getSupportActionBar()
            .getThemedContext());
    searchView.setQueryHint("Search...");
    searchView.setOnQueryTextListener(new OnQueryTextListener() {

        @Override
        public boolean onQueryTextSubmit(String query) {
            return false;
        }

        @Override
        public boolean onQueryTextChange(String newText) {

            if(currentPosition == 0) {
                System.out.println("Now search index 0 data...");
            }else if(currentPosition == 1) {
                System.out.println("Now search index 1 data...");
            }
            return false;
        }
    });

    menu.add(Menu.NONE, 0, 0, "")
            .setIcon(R.drawable.abs__ic_search)
            .setActionView(searchView)
            .setShowAsAction(
                    MenuItem.SHOW_AS_ACTION_IF_ROOM
                            | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    SubMenu sub = menu.addSubMenu(Menu.NONE, 1, 1, "").setIcon(
            R.drawable.abs__ic_menu_moreoverflow_holo_dark);
    if(currentPosition == 0) {
        sub.add(0, R.style.Theme_Sherlock, 0, "Mail");
        sub.add(0, R.style.Theme_Sherlock_Light, 0, "IM");
    }else if(currentPosition == 1) {
        sub.add(0, R.style.Theme_Sherlock, 0, "City");
        sub.add(0, R.style.Theme_Sherlock_Light, 0, "Relocate");
    }

    sub.getItem().setShowAsAction(
            MenuItem.SHOW_AS_ACTION_ALWAYS
                    | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    return super.onPrepareOptionsMenu(menu);
} 
```

使用 HoloEveryWhere 单击 ActionBar 上的 SearchView 图标时，如何隐藏 SubMenu？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:30:00.340

像这样：

```
menu.add(...)
        ...
        .setOnActionExpandListener(new OnActionExpandListener() {

            @Override
            public boolean onMenuItemActionExpand(MenuItem item) {
                sub.getItem().setVisible(false);
                return true;
            }

            @Override
            public boolean onMenuItemActionCollapse(MenuItem item) {
                sub.getItem().setVisible(true);
                return true;
            }
        })
        ... 
```

尽管我想知道为什么您将自己的溢出菜单创建为子菜单。为什么不使用默认的溢出功能？

# java - 在 Eclipse 中放置配置文件的正确位置

> ID：14315060
> 
> 赞同：1
> 
> 时间：2013-01-14T08:24:52.683
> 
> 标签：java, eclipse, jakarta-ee

我在 Eclipse 中创建了一个动态 Web 项目，并且我有一个需要读取配置文件的以下 Java 语句：

```
 Document doc= new SAXReader().read(new File(ConstantsUtil.realPath+"appContext.xml")); 
```

基本上，ConstantsUtil.realPath 将返回一个空字符串。

我尝试将“appContext.xml”放在“src”文件夹和“WEB-INF”文件夹下。但是，我总是会收到以下错误：

```
 org.dom4j.DocumentException: appContext.xml (The system cannot find the file specified) 
```

我真的很困惑：在 Eclipse 中，放置我的配置 xml 文件的正确位置在哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:10:37.020

您的具体问题是在您**完全无法**控制本地磁盘文件系统的当前工作目录的`new File()`环境中使用相对路径引起的。所以，算了吧。您需要通过其他方式获得它：

 **1.  直接从类路径（该`src`文件夹，也就是您的 Java 类所在的文件夹）使用[`ClassLoader#getResourceAsStream()`](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)：

    ```
    Document doc= new SAXReader().read(Thread.currentThread().getContextClassLoader().getResourceAsStream("appContext.xml")); 
    ```

2.  直接从公共网络内容（`WebContent`文件夹，`/WEB-INF`文件夹所在的位置）使用[`ServletContext#getResourceAsStream()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream%28java.lang.String%29)：

    ```
    Document doc= new SAXReader().read(servletContext.getResourceAsStream("/WEB-INF/appContext.xml")); 
    ```

    在继承方法`ServletContext`可用的 servlet 中。[`getServletContext()`](http://docs.oracle.com/javaee/6/api/javax/servlet/GenericServlet.html#getServletContext%28%29)

### 也可以看看：

*   [在基于 servlet 的应用程序中放置以及如何读取配置资源文件？](https://stackoverflow.com/questions/2161054/where-to-place-configuration-properties-files-in-a-jsp-servlet-web-application)
*   [getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream)
*   [servletcontext.getRealPath("/") 是什么意思，我应该什么时候使用它](https://stackoverflow.com/questions/12160639/what-does-mean-in-the-function-servletcontext-getrealpath/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:38:32.407

您可以将配置文件嵌入到 jar/war 文件中

```
InputStream is = MyClass.class.getResourceAsStream("/com/site/config/config.xml"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:51:42.033

您可以创建一个包含所有配置的文件夹，并在发布到服务器时在 Web 应用程序的类路径中引用它，或者将它们放在 WebContent 文件夹下，在这两种情况下，您都需要相对引用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T13:32:54.257

可以有多个地方可以放置您的属性文件。位置的选择取决于项目的架构。常用位置有：

*   **/YourProjectRootFolder/src/main/webapp/WEB-INF/properties/XYZ.properties** ：在您拥有 java 类文件的同一文件夹中。
*   **YourProjectConfFolderNAme/src/main/resources/XYZ.properties**：这里所有的属性文件都保存在与项目类文件不同的位置。

两者都与您需要将所有属性文件移动到服务器的 conf 文件夹相同。**

# mysql - MySql::选择进入

> ID：14315061
> 
> 赞同：3
> 
> 时间：2013-01-14T08:24:57.740
> 
> 标签：mysql, select

**`:=`**和**`Into`**in 和有什么不一样`select`？

例如：

```
SELECT  filesinfo.IsFolder, 
        filesinfo.ReferenceID 
INTO    @IsFolder, @ReferenceID 
FROM filesinfo 
WHERE filesinfo.FileID = @ChildID; 
```

和：

```
SELECT  @IsFolder := filesinfo.IsFolder,
        @ReferenceID := filesinfo.ReferenceID 
FROM filesinfo 
WHERE filesinfo.FileID = @ChildID; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:33:30.010

主要区别在于，它`SELECT column INTO @Foo FROM table`应该只针对一行，否则你会得到一个错误。为避免这种情况，您喜欢使用`LIMIT 1`.

（顺便说一句，你不会得到结果集）

使用`SELECT @Foo := column FROM table`将分配**最后**一行的值。（它将分配所有行的值，但最后它是最后一行的值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:35:31.280

您可以使用该`INTO`子句将输出写入文件以及存储在变量中。

而赋值运算符`:=`仅将**标**量值分配给变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:38:02.777

在功能方面，如果查询返回一行，它们与您的示例中的四个相同。但是使用

```
SELECT  @IsFolder := filesinfo.IsFolder,
        @ReferenceID := filesinfo.ReferenceID 
FROM filesinfo 
WHERE filesinfo.FileID = @ChildID; 
```

有一个副作用是输出变量赋值的结果，而带有的`SELECT .. INTO`则没有。

另请注意，它[`INTO`](http://dev.mysql.com/doc/refman/5.0/en/select-into.html)具有更多用例，而不仅仅是将列变量选择为变量。

# android - 在安卓中使用 FTS3

> ID：14315063
> 
> 赞同：0
> 
> 时间：2013-01-14T08:25:14.117
> 
> 标签：android, sqlite, search

我有一个`android`包含 6 个表并预先填充（包含数据）的应用程序，每个表包含至少 5000 条记录，我想支持`FTS3`，我知道它比普通`SQLite`表快。现在我应该将这些表模式转换为使用`FTS3` 示例：

```
CREATE VIRTUAL TABLE TABLE_1 USING fts3( col1, col2 ,....) 
```

对于这 6 个表中的每个表？或者我需要为每个表创建一个单独的表并在表中插入相同的记录`fts3`？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:48:35.197

FTS 表对于“普通”查询效率不高，因此您可能仍需要原始表。

FTS 表可以像普通表一样预先填充。

如果您决定保留原始表，则可以通过使用*无内容*或*外部内容*FTS 表来节省空间（请参阅[文档](http://www.sqlite.org/fts3.html#section_6_2)）。

# java - 如何在不覆盖先前数据的情况下使用 hashmap.put？（爪哇）

> ID：14315064
> 
> 赞同：1
> 
> 时间：2013-01-14T08:25:17.907
> 
> 标签：java, hashmap, overriding

我有一些类似的东西：

```
public HashMap<Boolean, String> map = new HashMap();
map.put(this.inverted, "Inverted");
map.put(this.active, "Loading");
System.out.println(map.size()); 
```

在看到大小始终为 1 之后，我意识到使用 map.put 会覆盖以前的数据。我目前正在尝试迭代哈希图。有没有办法在不覆盖以前的映射的情况下向它添加映射？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:30:06.910

您已将*HashMap*声明为：-

```
public HashMap<Boolean, String> map = new HashMap(); 
```

现在，想想你的 ? 中可以有多少个最大映射`map`？你可以通过思考得到答案，你的`Boolean`类型可以取什么值。这是因为，您不能在`HashMap`.

所以，可能你现在明白了，你最多只能`2 mappings`在你的地图中拥有一个，一个用于`true`，另一个用于`false`（实际上你也可以有`3rd`一个，因为你也可以在你的 中拥有一个`null`键的映射`HashMap`）。

所以，在你的情况下，如果两者都是`this.inverted`and`this.active`是`true`or `false`。然后其中只有一个可以在那里，那将是后来插入的值。

> 有没有办法在不覆盖以前的映射的情况下向它添加映射？

可能您错误地构建了*HashMap 。*您应该将您的地图声明为： -

```
private Map<String, Boolean> map = new HashMap(); 
```

现在您可以将两个映射设置为：-

```
map.put("Inverted", this.inverted);
map.put("Loading", this.active); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:28:48.023

这是因为`this.inverted.equals(this.active)`和`this.inverted.hashcode()==this.active.hashcode()`

也许您需要重新定义键的 equals 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:30:16.430

正如@Frank 建议的那样，您应该反转您的地图。

```
public final Map<String, Boolean> map = new HashMap<>();

map.put("Inverted", this.inverted);
map.put("Loading", this.active);
System.out.println(map); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T08:31:25.897

如果键与前一个值相同，则在标准 Java Map 中被覆盖。如果你不想要这个，你可以看看在 commons-collections 中实现的 multimap。它可以为一个键保存不同的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T08:32:07.783

Hashmap 基于键/值对。如果您的密钥相等（它们具有相同的哈希码），它将按照您的描述运行。

对于您的用例，反转您的键/值对将对您有所帮助。

```
public HashMap<String, Boolean> map = new HashMap();
map.put("Inverted", this.inverted); 
map.put("Loading", this.active);
System.out.println(map.size()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T08:29:47.217

在地图中

将键映射到值的对象。地图不能包含重复的键；每个键最多可以映射到一个值。---> 来自[地图 API](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html)

从您的实施来看，可能`this.inverted`并且`this.active`两者都具有相同的价值。

检查输入一次。打印keySet，然后检查。

或将输入更改为`Map<String, Boolean>`

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-09-23T12:39:19.843

[获取内部映射对象，通过传递外部映射键..然后检查内部映射键是否存在，然后用以前的数据更新值。否则创建内部地图的新对象。](https://i.stack.imgur.com/mzZWB.png)

# jsf - 有状态 EJB 不保留属性值

> ID：14315066
> 
> 赞同：1
> 
> 时间：2013-01-14T08:25:29.307
> 
> 标签：jsf, session, jakarta-ee, ejb, stateful

我正在使用有状态 EJB 来保存我的登录信息：

```
@Stateful
public class SecurityService {

    private static final Logger log4jLogger = Logger.getLogger(SecurityService.class);

    @Inject UtenteDao utenteDao;
    @Inject AutorizzazioneDao autorizzazioneDao;

    private Utente utenteCorrente;

    private Negozio negozioCorrente;

    public SecurityService() {

    }

    public boolean authenticate() {

        boolean result = false;

        Principal principal = FacesContext.getCurrentInstance().getExternalContext().getUserPrincipal();
        if (principal!=null) {
            utenteCorrente = utenteDao.findByUsername(principal.getName());
        }

        if (negozioCorrente!=null && utenteCorrente!=null) {
            Autorizzazione a = autorizzazioneDao.cercaPerNegozioAndUtente(negozioCorrente, utenteCorrente);
            result = a!=null;
        }

        return result;
    } 
```

// ... }

我的 JSF 登录页面由以下控制：

```
@Named
@RequestScoped
public class LoginController {

@Inject private SecurityService securityService;

private String username;    
private String password;

private Negozio negozio;

public void login() throws IOException {

    FacesContext context = FacesContext.getCurrentInstance();
    ExternalContext externalContext = context.getExternalContext();
    HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();

    try {

        if (request.getUserPrincipal() != null) {
            request.logout();
        }
        request.login(username, password);

        securityService.setNegozioCorrente(negozio);
        if (!securityService.authenticate()) {
            throw new ServletException("Utente non abilitato.");
        }

        externalContext.redirect("/pippo/");

    } catch (ServletException e) {
        e.printStackTrace();
        context.addMessage(null, new FacesMessage("Accesso Negato"));        
    }
}

public void logout() throws IOException {
//...

}

public String getLoggedUsername() {
    Utente utenteCorrente = securityService.getUtenteCorrente();
    String fullName = "";
    if (utenteCorrente!=null) {
        fullName = utenteCorrente.getNomeCompleto();
    } else {
        System.out.println("Utente NULLO");
    }
    return fullName;
}
//... 
```

}

我的用户实际上可以按照我想要的方式登录（通过我的域添加一些程序的安全性）。

我遇到的问题是在下一页，当您已经登录时。我想在所有页面标题中显示“欢迎！您以`#{loginController.loggedUsername}`.

我不断得到一个**null** `securityService.getUtenteCorrente()`。

SecurityService EJB 的行为类似于无状态会话 bean！我想知道我是否误解了关于有状态 EJB 的某些内容，或者我只是省略了一些内容以使其按预期工作。

我的目标只是拥有一个“会话范围”的 bean 来保持用户状态。是否需要 EJB 或者我可以只使用 SessionScoped JSF ManagedBean？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T08:54:15.063

`LoginController`是请求范围的，而您的`SecurityService`是依赖范围的（出于所有目的，除非您指定它，否则它不是会话范围的）。因此，当第二个 JSF 页面`LoginController`在 EL 表达式中引用 时，`LoginController`将创建一个新实例，该实例将引用另一个`SecurityService`SFSB 实例。

If you need to access the original `SecurityService` instance, you should mark it as `@SessionScoped` so that clients like the `LoginController` can access them across requests. But then, you might also want to consider why you need a `@Stateful` annotation in the first place, since this task could be done by an `@SessionScoped` managed bean. You don't really need a SFSB to store a reference to your User/Principal objects.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-14T08:53:23.317

为了被管理会话bean必须使用`@EJB`注释声明或使用JNDI查找，注入它的方式只是为您提供一个不受应用服务器管理的普通对象，实际上您在使用它时创建一个新对象.

# jstree - 如何禁用jstree中的选定节点？

> ID：14315070
> 
> 赞同：3
> 
> 时间：2013-01-14T08:25:45.643
> 
> 标签：jstree

如何禁用所选节点的默认操作？

当用户选择一个节点时，这个节点不应该是可点击的，直到另一个节点被选中。

这是一个非常常见的功能，但我似乎无法使其工作。

问候

迪米特里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:28:03.400

我通过处理 select_node.jstree 事件并使用类型插件解决了这个问题。

```
var treeConfig = {
    plugins: ["ui", "types"],
    types: {
    valid_children: ["selected"],
        types: {
            "selected": {
                "select_node": false
            }
        }
     }
}

var tree = $("#navtree");

tree.jstree(treeConfig)
    .bind("select_node.jstree", function (e, data){
        tree.find('[rel="selected"]').removeAttr('rel');
        data.rslt.obj.attr("rel", 'selected');
    }); 
```

基本上，在 select_node 上，我删除树中的任何 rel=selected 属性，然后将 rel=selected 属性应用于所选节点。在类型中，我为“选定”类型禁用了 select_node 函数。

# jquery - 在对象中插入内容

> ID：14315071
> 
> 赞同：0
> 
> 时间：2013-01-14T08:26:04.443
> 
> 标签：jquery, object

我有一些这样的导航：

```
<div class="nav">
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
    </ul>
</div> 
```

我希望当我单击链接时将该页面的内容插入到对象中。我试过了

```
$('nav ul li a').click( function() {

    var obj={};

    $(this).nextAll('.content').insertAfter(obj);

}); 
```

换句话说，我试图在对象中缓存该内容，所以稍后如果我想做一些我想在对象中搜索的事情。我希望我的问题被正确提出:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:12:42.897

您可以使用[**.data()**](http://api.jquery.com/data/)存储内容，例如：

```
$('.nav ul li a').click(function (e) {

  var url = $(this).attr("href");
  $.get(url, function (content) {
    $(this).data('content', content);
  });

  // Prevent the anchor's default click action
  e.preventDefault();
}); 
```

并查看如下内容：

```
$('.nav ul li a').each(function () {

  // Open the console to view the content
  console.log($(this).data('content'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:28:29.797

你确定你知道 javascript 对象实际上是什么吗？它们不能像那样插入到 DOM 中，调用`obj = {}`实际上也不会从任何地方加载任何东西。

据我了解，您正在尝试通过 AJAX 加载页面内容。如果是这样的话，我建议你看看 jQuery 的[`.get()`](http://api.jquery.com/jQuery.get/)：

```
$('nav ul li a').click( function() {
    var location = $(this).attr("href"); // get the location of the link
    $.get(location, function(data){ // call AJAX to load the page content
         $("#content").html(data); // put page content into #content
    });
    return false; // make sure the link doesn't then follow through
}); 
```

# macos - mac 沙盒权利和相关功能的时间表

> ID：14315072
> 
> 赞同：1
> 
> 时间：2013-01-14T08:26:06.607
> 
> 标签：macos, appstore-sandbox

我知道沙盒是在 Mac OS X Lion (10.7) 中引入的，但临时异常权利，特别是 com.apple.security.temporary-exception.files.home-relative-path.read-write，是在后来的 10.7.x 中引入的更新（哪一个？）

10.7.3 中引入了类似的安全范围书签。

我的 Mac 应用程序（目前没有沙盒）是一个基于文档的应用程序，它创建的文档引用了用户 Mac 上的图片。一旦用户在他的文档中使用了一些图片，我们只需在该文档中保存所用图片的路径（例如 /Users/myname/Desktop/pic.jpg）。当用户退出应用程序并重新打开保存的文档时，我们的应用程序可以简单地使用文档中的路径访问图片。由于我们的应用程序没有沙盒化，因此适用于所有版本 10.6.x、10.7.x 和 10.8.x

我们现在想对我们的应用程序进行沙箱处理，并确保它继续在 Mac OS X 的所有版本（10.6.x、10.7.x 和 10.8.x）上运行。为了实现这一点，我们将

1.  请求临时异常权利，特别是 com.apple.security.temporary-exception.files.absolute-path.read-write，这将启用 10.7.3 及更高版本的随机文件访问。但是我们为 10.7、10.7.1 和 10.7.2 做些什么呢？

2.  在 10.7.3 之后，我们将开始使用安全范围的书签。

# dynamics-crm-2011 - 应该使用什么来代替已弃用的 EntityName.account.ToString()？

> ID：14315073
> 
> 赞同：3
> 
> 时间：2013-01-14T08:26:07.377
> 
> 标签：dynamics-crm-2011, query-expressions

当我设计*QueryExpression*时，我一直使用以下硬编码语法。

```
QueryExpression expression = new QueryExpression
{
  EntityName = "account";
  ...
} 
```

在[此博客](http://www.langalaxy.de/2009/07/howto-retrieve-members-of-a-marketing-list/)中，使用了基于[此枚举](http://msdn.microsoft.com/en-us/library/bb959317.aspx)的以下语法。

```
QueryExpression expression = new QueryExpression
{
  EntityName = EntityName.account.ToString();
  ...
} 
```

我更喜欢它，但我无法使用智能感知找到它。然后我发现[了这个讨论](https://stackoverflow.com/questions/10914575/entityname-enumeration)，其中解释了语法已被弃用。

那么，应该使用什么来代替*EntityName*呢？我用谷歌搜索了一下，但找不到任何有用的东西。在我看来，在硬编码表达式之前应该首选某种枚举。那是对的吗？如果是这样，如何在 CRM 2011 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:43:58.223

如果您使用的是[早期绑定类](http://msdn.microsoft.com/en-us/library/gg328210.aspx)，您也可以对自定义实体使用以下语法。如果不是，这将适用于所有标准实体。

```
Account.EntityLogicalName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:53:16.633

如果您使用后期绑定实体，您可以使用[Entity.LogicalName](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.entity.logicalname.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T22:46:01.600

例如，您可以编写 Contact.EntityLogicalName.ToString() 但在这种情况下您必须

使用早期绑定类

# actionscript-3 - org.osmf.media.MediaPlayer 抛出错误：当前不支持指定的功能

> ID：14315075
> 
> 赞同：0
> 
> 时间：2013-01-14T08:26:10.510
> 
> 标签：actionscript-3, media-player, osmf, m4a

我有一个后端 sound.php，它可以从 Web 服务器返回 .m4a 声音文件，我可以向 sound.php 发出带有 id 的 Web 请求以返回指定的 .m4a 文件。即sound.php?id=1234

我现在正在尝试使用 org.osmf.media.MediaPlayer 和 AudioElement 和 URLResource

```
 var mediaPlayer:MediaPlayer = new MediaPlayer();
  var ae:AudioElement = new AudioElement(new URLResource("http://xxx.com/sound.php?id=12"));
  mediaPlayer.media = ae;
  mediaPlayer.play(); 
```

并且它抛出当前不支持指定功能的错误。我已经通过浏览器测试了链接，该链接成功返回了一个 .m4a 文件。

我不明白它是声明请求方法还是返回文件，有人知道吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:42:25.987

尝试设置[`MediaPlayer.autoPlay`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/org/osmf/media/MediaPlayer.html#autoPlay)to`true`或者你应该等到媒体加载，这通过[`mediaPlayerStateChange`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/org/osmf/media/MediaPlayer.html#event%3amediaPlayerStateChange)事件发出信号，状态为[READY](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/org/osmf/media/MediaPlayerState.html#READY)。

**[更新]**

如[NetStream - Adob​​e ActionScript® 3 (AS3) API 参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html)页面和[支持的编解码器 |中所述 Flash 播放器](http://helpx.adobe.com/flash/kb/supported-codecs-flash-player.html)页面：

> Flash Player 9 Update 3 播放源自标准 MPEG-4 容器格式的文件，这些格式包含 H.264 视频和/或 HE-AAC 音频，例如 F4V、MP4、**M4A**、MOV、MP4V、3GP 和 3G2。需要注意的一点是，不支持受保护的 MP4 文件，例如从 iTunes 下载的文件或通过 FairPlay 进行数字加密的文件。

看来您将不得不尝试这种`NetStream`方法。

# extjs - 如何将 extjs 数据发送到 yii 控制器动作

> ID：14315078
> 
> 赞同：0
> 
> 时间：2013-01-14T08:26:26.217
> 
> 标签：extjs, yii

> **可能重复：**
> [如何将具有多个值的输出从 extjs 发送到 Yii 控制器操作](https://stackoverflow.com/questions/14277666/how-to-send-output-with-multiple-values-from-extjs-to-yii-controller-action)

我正在使用 extjs 和 Yii 框架。我在 extjs 中设计了多项选择题。Yii 控制器功能附在 extjs 存储中以从数据库中提供这些问题。

现在我想将用户选择的答案保存`optionId`到数据库中。即来自extjs，我想将`questionId`用户选择的所有用户解决的问题发送`optionId`给Yii控制器操作。我在提交按钮事件上编写了代码：

```
 check:function()
    {
        console.log("Inside check function.");
        //creating objects in javascript
          var obj=new Object();
          for(var i=0;i<=5;i++)
          {
                var inputs = document.getElementsByName(i); 
                var radio = "";  
                for (var j = 0; j < inputs.length; j++) {
                    if (inputs[j].checked) {
                        name = inputs[j].name;
                        value  = inputs[j].value;
                        //obj[i].name1=name;
                        obj[i]={'questionId':name,'option':value};
                        console.log("questionId="+name +" value="+ value);
                        console.log("object name="+ obj[i].questionNo+" Object value="+obj[i].option);
                    }// End of if statment
                }// End of inner for loop
          }//End of outer for loop
    }// End of check function
});//End of Controller 
```

那么我需要做哪些修改才能将所需的数据发送到 yii 控制器操作。我真的需要帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:56:32.127

您应该使用 AJAX 将数据发布到控制器中的操作，例如：site/savequestions

```
 Ext.Ajax.request({
        url:"site/savequestions",
        method: "POST",
        params: {'qid': name, 'aid':value},
        success: function(){
            console.log("ok");
        },
        failure: function(response, opts){
            console.log("failed");
        },
        headers: { 'Content-Type': 'application/json' }
    }); 
```

然后在控制器中`SiteController`你会有

```
public function actionSavequestion()
{
    $questionId = Yii::app()->request->getParam('qid');
    $anserId = Yii::app()->request->getParam('aid');
    //... do stuff here

    echo json_encode(array('success' => true));
    exit()
} 
```

# c# - 如何在 JavaScript 中将 ID 设置为动态创建的文本框

> ID：14315079
> 
> 赞同：1
> 
> 时间：2013-01-14T08:26:26.343
> 
> 标签：c#, php, javascript, asp.net

''正在尝试`ID`使用 JavaScript 和 fallows 之类的代码设置动态创建的文本框...

这里的数量是下拉列表

喜欢.. **HTML 代码**

```
 <select id="Qty" name="childQty" onChange="changeIt()">
        <option value="0">ZERO</option>
        <option value="1">ONE</option>
        <option value="2">TWO</option>
        <option value="3">THREE</option>
        <option value="4">FOUR</option>
        <option value="5">FIVE</option>
    </select>

<div id="my_div"><input type="hidden" /></div> 
```

**JavaScript 代码**

```
function changeIt()
        {
        var sel = document.getElementById('Qty');
        var i = sel.options[sel.selectedIndex].value;

        my_div.innerHTML ="";
        var txtid="";
        for(var j=0;j<i;j++){
        txtid='mytext'+j;
        //alert(txtid);
                my_div.innerHTML = my_div.innerHTML +"<br><input type='text' name=txtid id='txtid'>"

            }

        } 
```

这里我试图设置`txtid`要在`id`里面创建的文本框，`my_div.innerHTML`但这不起作用`txtid='mytext'+j;`，然后我想连接用户将在动态创建的文本框中输入的所有文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:28:48.703

这一行：

```
my_div.innerHTML = my_div.innerHTML +"<br><input type='text' name=txtid id='txtid'>" 
```

应该

```
my_div.innerHTML = my_div.innerHTML +"<br><input type='text' name=txtid id='+txtid+'>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:29:10.680

```
my_div.innerHTML = my_div.innerHTML +"<br><input type='text' name=txtid id='"+ txtid +"'>" 
```

# iphone - 我可以为不在配置文件中的 iOS 设备制作 IPA 文件吗？

> ID：14315092
> 
> 赞同：2
> 
> 时间：2013-01-14T08:27:59.560
> 
> 标签：iphone, ios, ipad, ipa

我找到了一种制作 ipa 文件的方法：

> 1.  添加必要的配置文件并调整构建设置。
> 2.  将设备设置为目标以运行应用程序。
> 3.  构建产品。
> 4.  转到产品-> yourAppName.app。右键单击并在查找器中显示。
> 5.  拖放到 iTunes 配置文件和二进制文件。（将其拖放到应用程序）
> 6.  在 iTunes 中选择应用程序并右键单击以显示在 Finder 中。在那里你可以得到 .ipa 文件。

但是，不属于开发组的设备不能安装吗？或者，我是否错过了一些配置步骤？我们有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:36:48.347

不，这是不可能的。在不使用应用商店的情况下在设备上安装应用的唯一方法是使用苹果提供的 ad-hoc 方法，有关此的一些信息可[在此处找到](https://developer.apple.com/programs/ios/distribute.html)。对于 ad-hoc 方法，您将始终需要安装应用程序的设备的 UDID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:36:19.110

您也可以以官方方式构建 IPA。只需创建一个 ad-hoc 配置文件，告诉 Xcode 将其用于 Release 构建并选择 Product → Archive。当管理器弹出应用程序存档时，为企业或临时部署选择分发和保存。然后选择您的身份，瞧，您将获得 IPA。

但是在任何一种情况下，配置文件都必须包含应用程序应该运行的所有设备的列表，AFAIK 没有官方的解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:38:05.263

有几种选择

您的企业需要“企业证书”。这允许您在任何设备上安装。然而，Apple 不会轻易发布它们，但如果你在 BigCorp LTD 工作，你可能会得到一个。

或使用`TestFlight` www.testflightapp.com 来分发您的构建。我不确定这是否是因为您首先拥有企业证书。去看一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T08:16:05.970

我曾经和你用同样的方法构建 .ipa 包。但是这种ipa没有包中的配置文件，所以它只能在已经越狱的iOS设备上运行。

# delphi - 重新停靠后，关闭按钮出现在停靠的控件上

> ID：14315093
> 
> 赞同：7
> 
> 时间：2013-01-14T08:28:04.850
> 
> 标签：delphi, delphi-xe2, docking

我有一个油漆盒，我希望用户能够卸下并四处移动。所以我将其设置`DragKind`为`dkDock`和其设置`DragMode`为`dmAutomatic`，并将其放入`DockSite`设置为的面板中`True`。当我将油漆盒取消停靠到浮动形式后停靠时，我遇到了一种相当奇怪的行为。浮动表单的关闭按钮出现在面板内。我附上了两张截图。一个是原始状态，一个是重新对接油漆盒后的状态。我错过了什么？

原始状态：

![脱离前](../Images/3f69b71245160ffaccd11198c826eaa0.png)

对接后：

![对接后](../Images/305dcfc9a39ba471facf0b4895bdb3b9.png)

* * *

**更新** 使用 TLama 的解决方案后，结果如下。

![对接后； 使用新的码头管理器](../Images/5b4f42e1e527c0ac6d8230a8639983e6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T14:32:05.027

你没有错过任何东西。这就是默认停靠管理器实现的工作方式。它只是想在使用它的停靠站点上使用带有关闭按钮的抓取器。您可以做的是实现您自己的停靠管理器并覆盖其[`AdjustDockRect`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TDockTree.AdjustDockRect)方法，该方法控制停靠区域的大小以及默认停靠管理器实现的位置为带有关闭按钮的抓取器提供了空间。如果您不想要那个抓取器，只需保持停靠区矩形的大小，因为它被传递给方法，在整个停靠站点的大小。换句话说，在该方法覆盖中什么都不做。

这是抓取器的功能部分，但除了你需要截取它的硬编码绘图。为此，您需要覆盖[`PaintDockFrame`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TDockTree.PaintDockFrame)事件方法，并且像以前一样，在那里什么都不做。

这是一个代码示例：

```
type
  TNoGrabDockManager = class(TDockTree)
  protected
    procedure AdjustDockRect(Control: TControl; var ARect: TRect); override;
    procedure PaintDockFrame(Canvas: TCanvas; Control: TControl;
      const ARect: TRect); override;
  end;

implementation

{ TNoGrabDockManager }

procedure TNoGrabDockManager.AdjustDockRect(Control: TControl; var ARect: TRect);
begin
  // here you can make space for a grabber by shifting top or left position
  // of the ARect parameter, which is by default set to the whole dock site
  // bounds size, so if you do nothing here, there will be no grabber
end;

procedure TNoGrabDockManager.PaintDockFrame(Canvas: TCanvas; Control: TControl;
  const ARect: TRect);
begin
  // in this event method, the grabber with that close button are drawn, so
  // as in case of disabling grabber functionality do precisely nothing for
  // drawing it here, that will make it visually disappear
end; 
```

以下是如何使用此类自定义停靠管理器（有关[`UseDockManager`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ExtCtrls.TPanel.UseDockManager)属性的说明，请参见下文）：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  Panel1.DockManager := TNoGrabDockManager.Create(Panel1);
  Panel1.UseDockManager := True;
end; 
```

***重要的***

正如少数消息来源所建议的那样，您应该[`UseDockManager`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ExtCtrls.TPanel.UseDockManager)在设计时将停靠面板的属性设置为 False。我不知道为什么，但是从我所做的快速测试来看，当我在设计时没有设置该属性时，自定义停靠管理器的一些事件方法没有被触发（[`AdjustDockRect`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TDockTree.AdjustDockRect)即使没有做，事件方法也能正常工作所以，但我个人不会依赖它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-08T13:59:38.227

不要使用面板作为停靠目标，而是使用 TPageControl 并从生成的选项卡表中隐藏选项卡。由于页面控件通常具有可见选项卡，因此不显示删除句柄。不幸的是，当您隐藏选项卡表的选项卡时，工作表本身也会被隐藏。因此，您必须通过添加以下 OnDockDrop 事件来保存和恢复它：

```
procedure TForm2.PageControl1DockDrop(Sender: TObject; Source: TDragDockObject;
  X, Y: Integer);
var
  ix: Integer;
begin
  ix := PageControl1.ActivePageIndex;
  PageControl1.ActivePage.TabVisible := false;
  PageControl1.ActivePageIndex := ix;
end; 
```

# makefile - 需要使用“configure --prefix”才能“make install”

> ID：14315096
> 
> 赞同：-1
> 
> 时间：2013-01-14T08:28:24.233
> 
> 标签：makefile, configure, autoconf, prefix

我需要使用“configure --prefix”才能在特定位置“进行安装”。只提供了一个makefile，而不是一个配置文件。我自己从未使用过 autoconf 或创建过配置脚本。[我在这里](http://mij.oltrelinux.com/devel/autoconf-automake/)找到了一个指南，但是在涉及目标二进制文件等的第 5 步时迷路了。有没有办法在我需要它的位置进行安装，而无需创建配置文件。如果没有，是否有任何简单的方法（或简单的指南/教程）来制作配置文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:36:49.820

你的问题对我来说不是很清楚。您是要`configure`为您编写的软件包创建一个，还是要安装一些不遵循[GNU 构建系统](http://www.gnu.org/savannah-checkouts/gnu/automake/manual/html_node/GNU-Build-System.html)约定的（未命名的）软件包？我假设后者。

如果您尝试安装的软件包没有`configure`文件，那么尝试运行没有意义`./configure`，我建议您不要构建一个，除非您非常熟悉该软件包（在这种情况下，您会知道如何安装它）。

在不知道它是什么包的情况下，我建议采取以下措施：

1.  搜索此软件包的 README 文件或网页以获取有关安装的说明。
2.  查看`Makefile`. 也许您会找到一个简单的`install`规则，您所要做的就是编辑该规则或一些变量以指向所需的位置。有些软件包非常简单，甚至没有附带安装规则：例如，它们可能会构建一个二进制文件，并且您需要自行复制该二进制文件到任何您想要的地方。
3.  联系该软件包的作者。

# android - 如何在两部安卓手机之间使用IP地址进行通信？

> ID：14315098
> 
> 赞同：1
> 
> 时间：2013-01-14T08:28:26.043
> 
> 标签：android, tcp, communication

可以分别查询两部安卓手机的IP地址。是3g链接。

是否可以直接使用此 IP 地址进行 tcp 通信？

希望有人能给我一些建议！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:38:36.143

如果地址是已知的，也许您可​​以使用[套接字](http://developer.android.com/reference/java/net/Socket.html)在电话之间进行通信。

您也可以使用一些主机作为协调客户端的服务器。

# javascript - 优化重叠矩形的绘制

> ID：14315104
> 
> 赞同：43
> 
> 时间：2013-01-14T08:28:39.383
> 
> 标签：javascript, algorithm, math, webgl, spatial-index

我有大量矩形，有些与其他矩形重叠；每个矩形都有一个绝对的 z 顺序和一个*颜色*。（每个“矩形”实际上是粒子效果、网格或纹理的轴对齐边界框，并且可能是半透明的。但只要您不尝试在其他矩形后面剔除矩形，就更容易抽象地思考彩色矩形，所以我将在问题描述中使用它:)

改变“颜色”的成本相当高；连续绘制两个蓝色矩形比绘制两个不同颜色的矩形要快得多。

绘制甚至不在屏幕上的矩形的成本也很高，应该避免。

如果两个矩形不重叠，则它们相对于彼此的绘制顺序并不重要。只有当它们重叠时，z 顺序才重要。

例如：

![重叠的矩形](../Images/018bad541e9d12671af250f89f95a78e.png)

1（红色）和4（红色）可以画在一起。2（蓝色）和 5（蓝色）也可以一起绘制，3（绿色）和 7（绿色）也可以。但必须在 6（蓝色）之后绘制 8（红色）。所以要么我们将所有三个红色画在一起，然后将蓝色画成两组，或者我们将所有蓝色画在一起，然后将红色画成两组。

一些矩形可能会偶尔移动。（不是全部；已知一些矩形是静态的；其他已知是移动的。）

我将在 JavaScript/webGL 中绘制这个场景。

如何*以合理的顺序绘制矩形以最小化颜色变化*，并在 JavaScript 剔除代码与让 GPU 剔除之间取得良好的折衷？

（仅仅计算出哪些矩形重叠，哪些是可见的很昂贵。我有一个[基本的四叉树](https://stackoverflow.com/questions/13906902/spatial-index-for-lines)，这极大地加快了我的场景绘制速度（与仅发出整个场景的绘制操作相比）；现在的问题是如何最小化 OpenGL状态变化并尽可能连接属性数组）

***更新***我创建了一个非常简单的测试应用程序来说明问题并作为解决方案演示的基础： [http ://williame.github.com/opt_rects/](http://williame.github.com/opt_rects/)

源代码在 github 上，可以很容易地被分叉：[https ://github.com/williame/opt_rects](https://github.com/williame/opt_rects)

事实证明，很难制作一个具有足够状态更改的小测试应用程序来实际重现我在完整游戏中看到的问题。在某些时候，您将不得不认为状态更改可能足够昂贵。同样重要的是如何加快空间索引（演示中的四叉树）和整体方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T08:21:47.733

您做出了非常错误的假设，即您在桌面浏览器上获得的性能将以某种方式决定您 iPhone 上的性能。您需要了解 iPhone 硬件实现[了基于 tile 的延迟渲染](http://en.wikipedia.org/wiki/PowerVR#Technology)，这意味着无论如何，片段着色器在流水线中使用得非常晚。正如 Apple 自己所说（“<em>不要浪费 CPU 时间从前到后对对象进行排序”），对您的图元进行 Z 排序只会给您带来一点性能提升。

但这是我的建议：如果更改颜色很昂贵，*请不要更改颜色*：将其作为顶点属性传递，并将行为合并到一个超级着色器中，这样您就可以在一个或几批中绘制所有内容，甚至无需排序。然后对您的平台进行基准测试并确定最佳批量大小。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-16T16:28:21.717

## 选择颜色，而不是盒子！

在任何时间点，一个或多个盒子都是*可涂漆*的，即它们可以在下一次涂漆而不会产生问题（尽管可能会因为与最近涂漆的盒子颜色不同而产生成本）。

每一点的问题都是：接下来我们应该选择什么**颜色**来绘制？没有必要考虑选择单独的可绘制框来绘制，因为一旦你选择了一个特定的框来绘制下一个，你还不如绘制当时可以绘制的所有可用的相同颜色的框。那是因为画一个盒子永远不会*增加*对问题的约束，它只会删除它们；如果您可以在不更改当前颜色的情况下选择不绘制可绘制的盒子，则不能使解决方案的成本低于其他方式，因为您稍后必须绘制此盒子并且可能需要更改颜色。这也意味着我们绘制相同颜色的可绘制盒子的顺序并不重要，因为我们将在一个盒子绘制操作“块”中一次绘制所有这些盒子。

## 依赖图

首先构建一个“位于下方”的依赖图，其中每个彩色矩形由一个顶点表示，如果矩形 v 与矩形 u 重叠并位于其下方，则从 v 到 u 有一条弧（箭头）。我的第一个想法是通过找到传递闭包来使用它来构建“必须在之前绘制”依赖图，但实际上我们不需要这样做，因为下面的所有算法都关心顶点是否可绘制. 可绘制顶点是没有前驱（弧内）的顶点，采用传递闭包不会改变顶点是否有 0 个弧内。

此外，每当一个给定颜色的盒子只有与其祖先颜色相同的盒子时，它将被绘制在同一个“块”中——因为所有这些祖先都可以在它之前绘制而不改变颜色。

## 加速

为了减少计算量，请注意，当某个特定颜色的所有可绘制框都没有不同颜色的后代时，绘制该颜色不会为其他框打开任何可绘制的新机会，因此我们不需要考虑这一点在考虑下一步要画哪种颜色时，我们总是可以把它留到以后，而不会有增加成本的风险。事实上，*最好*把这种颜色留到以后再画，因为到那时其他这种颜色的盒子可能已经可以上漆了。调用颜色*有帮助*如果至少有一个该颜色的可绘制盒子具有不同颜色的后代。当我们到达没有剩余有用颜色的地步（即当所有剩余的盒子只重叠相同颜色的盒子，或者根本没有盒子）时，我们就完成了：只需绘制每种剩余颜色的盒子，在任何订单。

## 算法

这些观察结果提出了两种可能的算法：

1.  **一种快速但可能不是最优的贪心算法：**选择下一个产生最新可绘制顶点的颜色绘制。（这将自动只考虑有用的颜色。）
2.  **一种较慢、精确的 DP 或递归算法：**对于每种可能的有用颜色 c，请考虑通过绘制所有可绘制的 c 色框生成的依赖图：

    令 f(g) 为在依赖图 g 中绘制所有框所需的最小颜色变化次数。然后

    f(g) = 1 + min(f(p(c, g)))

    对于所有有用的颜色 c，其中 p(c, g) 是通过绘制颜色 c 的所有可绘制框产生的依赖图。如果 G 是原始问题的依赖图，则 f(G) 将是最小更改数。颜色选择本身可以通过向后追溯 DP 成本矩阵来重建。

    f(g) 可以被[记忆](http://en.wikipedia.org/wiki/Memoization)来创建一个动态编程算法，当两种不同的颜色选择排列产生相同的图形时，该算法可以节省时间，这种情况经常发生。但可能即使在 DP 之后，该算法也可能需要一定数量的时间（以及空间），这与盒子的数量呈指数关系......我会考虑是否可以找到更好的界限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T18:11:08.847

这是一种可能性。你必须对它进行基准测试，看看它是否真的是一种改进。

```
For all rectangles, back to front:
  If this rectangle has been marked as drawn, skip to the next one
  Set a screen-sized unseen surface to all black
  Call this rectangle's color "the color"
  For rectangles starting with this one and proceeding toward the front
    If (this rectangle's color is the color and
        all the pixels of this rectangle on the unseen are black) then
      Add this rectangle to the to-draw list
    Draw a white rectangle with this rectangle's shape on the unseen surface
    If the unseen surface is more than half white, break
  For all rectangles on the to-draw list:
    Draw the rectangle
    Mark it as drawn 
```

不能保证在排序方面是最佳的，但我认为它会非常接近，并且在预绘图步骤中它是最坏情况的二次方。它确实取决于图形缓冲区的回读速度是否很快。一个可能有帮助的技巧是创建一个新的像素表面，它是感兴趣区域的缩小版本。它的颜色将是原始白色的一部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-20T11:33:07.750

首先以随机（但正确）的顺序绘制，例如严格的 z 顺序。绘制每一帧时，要么计算颜色变化的次数，要么计算一个完整帧所花费的实际时间。每一帧，尝试交换两个矩形的顺序。被交换的矩形不能重叠，因此可以按任意顺序绘制而不违反正确性；除此之外，它们可以随机选择，或者对列表进行线性传递，或者...下一帧。如果进行交换既不会减少也不会增加颜色变化的次数，保持 50% 的几率。对于在前一帧中没有重叠但由于移动而开始重叠的任何矩形，只需交换它们，使它们按 z 顺序排列。

这与交换项目对的排序算法有一些关系，除了我们无法比较项目外，我们需要遍历整个列表并计算颜色变化。这在开始时会表现得很糟糕，但会相对较快地收敛到一个好的顺序，并且会适应场景的变化。我认为每帧都计算一个最佳顺序可能不值得；这将获得并维持一个接近最佳的订单，只需很少的额外工作。

参考您拥有的图纸： 随机选择的初始抽奖顺序：1、6、2、4、5、8、3、7（5 种颜色变化）。交换 5,8。新订单：1,6,2,4,8,5,3,7（4 种颜色变化）=> 保持新订单。

# math - 如何定义均匀概率分布的区间？

> ID：14315108
> 
> 赞同：-1
> 
> 时间：2013-01-14T08:28:50.900
> 
> 标签：math, random, probability

我不知道它是提问的正确论坛，但是如果有人可以帮助我，我将不胜感激。

我有两个过程，每个过程都有一个不同的随机变量，比如说 X1 和 X2，每个随机变量都来自 [0,1] 的均匀分布，那么 random.nextdouble() 如何帮助我识别概率之间的变化这两个随机变量。我需要这种变化，因为我想找到两个随机变量中最小值的概率。

我可以说它太简单了，我应该两次运行程序 100000 次或更多次，然后计算两次迭代的最小值吗？如果是这样，那么我如何将这个结果与两个随机变量（即 X1 和 X2）的概率映射？就像说我第一次运行程序是 X1 和第二次 X2 的标准是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:59:25.107

在均匀分布下的单个变量低于的概率`d`是`P(X<=dx) = d`（假设在范围内`[0,1]`）。

因此，它更多的概率`d`是`P(X>=d) = (1-d)`。
2 个随机变量高于 d 的概率为`P(X>=d AND Y>=d) = P(X>=d)*P(Y>=d) = (1-d)^2`

因此，其中一个`X`或`Y`低于的概率`d`是`p = 1-(1-d)^2`，这意味着最小值低于的概率`d`是相同的：`p = 1 - (1-d)^2`。

如果您正在寻找概率密度函数，您可以找到概率的导数：

```
f(x) = d/dx P(x) = d/dx 1 - (1-x)^2 = 
     = d/dx (1 - 1 + 2x - x^2) = 
     = d/dx (2x - x^2) = 2 - 2x 
```

# java - 如何将我的 eclipse 3.7 应用程序移植到 eclipse 4.0？

> ID：14315110
> 
> 赞同：4
> 
> 时间：2013-01-14T08:29:07.167
> 
> 标签：java, eclipse, eclipse-rcp, upgrade

我已经在 Eclipse 3.7 中开发了一个应用程序，但是随着 Eclipse 4.0 Juno 的推出，我想将我的 RCP 应用程序移植到 Juno。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T09:04:18.703

从 Eclipse 4.x 开始，基于 Eclipse 的应用程序的 API 完全改变了。新 API 被创建为[Eclipse e4 项目](http://www.eclipse.org/e4/)。它不向后兼容。

你有两个选择：

1.  使用遗留插件仍然能够运行旧的 Eclispe 3.x 插件/应用程序。它能够支持*一些*新的和旧的 API。您的应用程序可能仍会运行，尽管效率较低。

2.  使用新的 Eclipse e4 API 重写您的应用程序（至少是 UI 部分）。Eclipse e4 API 尚未完全定义，将来可能会发生变化。因此，转换您的应用程序并使其与未来的 e4 API 更改保持同步需要相当多的努力。

[Lars Vogel](http://www.vogella.com/articles/EclipseRCP/article.html)编写了一个关于 Eclispe e4 的非常好的教程，它将向您展示新 API 的基础知识。此外，当然要检查 StackOverflow 上的[e4标签！](/questions/tagged/e4 "显示标记为“e4”的问题")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:36:07.300

您可以立即使用较新版本的 eclipse 打开同一个工作区，以防万一您想安全起见，创建一个新工作区并将项目从版本控制导入到其中（如果您正在使用一个）。

不过，第一个选项应该可以顺利运行，除了如果您在旧的 eclipse 版本上安装了一些带有透视图的插件，您可能会收到关于此的错误通知。如果您希望它干净，请使用第二个选项。

# sql - SQL 检查取消分组列值是否匹配

> ID：14315114
> 
> 赞同：2
> 
> 时间：2013-01-14T08:29:28.483
> 
> 标签：sql, sql-server, group-by, aggregate

我有一个具有以下值的 sql 表

```
 |  col1 | col2|   source |  values
       |  1    |  2  |  A       |   null
       |  1    |  2  |  B       |   1.0
       |  1    |  2  |  C       |   null
       |  1    |  4  |  A       |   2.0
       |  1    |  4  |  B       |   2.0
       |  1    |  4  |  C       |   2.0
       |  1    |  5  |  A       |   null
       |  1    |  5  |  B       |   null
       |  1    |  5  |  C       |   null 
```

我怎样才能得到一个输出组`col1`和`col2`一个标志：

*   所有值都匹配一个组（标志 = 1）
*   所有值均为空（标志 = 2）
*   一些值为空（标志 = 3）

输出：

```
 |  col1 | col2|   flag
       |  1    |  2  |   3
       |  1    |  4  |   1
       |  1    |  5  |   2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:44:49.337

~~**或者：**根据您更新的问题：~~

 ~~```
 SELECT 
    col1, 
    col2,
    SUM(CASE WHEN SomeConditionHere THEN 1 ELSE 0 END) AS Flag
  FROM Table1
  GROUP BY col1, col2; 
```~~ 

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/e7e12/8)

这会给你：

```
| COL1 | COL2 | FLAG |
----------------------
|    1 |    2 |    2 |
|    1 |    4 |    0 |
|    1 |    5 |    3 | 
```

**请注意：**我假设标志是列中有多少`NULL`个值`VALUES`，所以我使用`"Values" IS NULL`而不是`SomeConditionHere`.

我不明白`flag`应该如何在您发布的预期结果中计算 。您必须使用定义标志的谓词而不是`"Values" IS NULL`.

 ~~## 更新：

试试这个：

```
WITH Flags
AS
(
  SELECT 
    col1, col2,
    COUNT(*) ValuesCount,
    SUM(CASE WHEN "Values" IS NULL THEN 1 ELSE 0 END) AS NULLValues
  FROM Table1 
  GROUP BY col1, col2
)
SELECT 
  col1,
  col2,
  Flag = CASE WHEN ValuesCount = NULLValues THEN 2
              WHEN NULLVALUES = 0 
               AND ValuesCount = (SELECT COUNT(*) 
                                  FROM Table1 t2
                                  WHERE t1.col1 = t2.col1
                                    AND t1.col2 = t2.col2) THEN 1
               ELSE 3
END
FROM Flags t1; 
```

[**更新的 SQL Fiddle 演示**](http://www.sqlfiddle.com/#!3/e7e12/33)

这会给你：

```
| COL1 | COL2 | FLAG |
----------------------
|    1 |    2 |    3 |
|    1 |    4 |    1 |
|    1 |    5 |    2 | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T09:23:08.990

在 SQLServer2005+

```
;WITH cte AS
 (
  SELECT col1, col2, [values],       
         COUNT(CASE WHEN [values] IS NULL THEN 1 END) OVER(PARTITION BY col1, col2) AS cntNULL,
         COUNT(*) OVER(PARTITION BY col1, col2) AS cntCol
  FROM dbo.test5
  )
  SELECT col1, col2, MAX(CASE WHEN cntNULL = 0 THEN 1
                              WHEN cntNULL = cntCol THEN 2
                              ELSE 3 END) AS flag
  FROM cte
  GROUP BY col1, col2 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/3f90e/1/0)上的演示[](http://sqlfiddle.com/#!3/3f90e/1/0)

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T10:07:11.123

...如果您想要更便携，那么没有 CTE 的解决方案`SQL`：

```
select col1,
       col2,
        case 
            when DistinctValuesWithoutNulls = 1 and NullCount = 0 then 1 
            when DistinctValuesWithoutNulls = 0 then 2
            when NullCount > 0 then 3
        end flag
from
(
    select  col1, 
            col2, 
            count(distinct [values]) DistinctValuesWithoutNulls, 
            sum(case when [values] is null then 1 else 0 end) NullCount
    from Table1
    group by col1, col2
) tmp 
```**~~

# c# - 设置字体高度

> ID：14315115
> 
> 赞同：0
> 
> 时间：2013-01-14T08:29:38.547
> 
> 标签：c#, winforms, fonts, height, label

在我的项目中，我需要在运行时创建一些标签。它们具有取决于数据库字段的不同高度。我需要在标签中写一些文本，但如果标签的高度较小，我需要根据标签高度调整字体大小。

我试过这个：

```
Label lbl = new Label();
lbl.AutoSize = false;
lbl.Font = new System.Drawing.Font(lbl.Font.FontFamily, Convert.ToSingle(lbl.Height / 2));
lbl.TextAlign = ContentAlignment.MiddleCenter; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:41:51.120

您可以使用[FontHeight](http://msdn.microsoft.com/de-de/library/system.windows.forms.control.fontheight.aspx)属性来更改字体的高度。这可以完成这项工作。

**MSDN：**

> 获取或设置控件字体的高度。... FontHeight 属性不应设置为控件的 Font.Height 值以外的任何值，或者 -1。将 FontHeight 设置为 -1 具有清除缓存的高度值的效果，下次重新计算该值属性被引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:57:35.680

如果将 Label.AutoSize 设置为 false，则必须以编程方式设置标签的高度。您不能开始使用 Label.Height 来确定字体的大小，因为 Label.Height 将是它的默认值（类似于 23）。这与从数据库中读取的高度没有对应关系。

您用于指定标签高度的数据库中的字段到底是什么？它在什么单位？您在发布的代码中没有使用任何数据库字段...

# spring - Spring MVC 请求/命令对象

> ID：14315118
> 
> 赞同：2
> 
> 时间：2013-01-14T08:29:47.647
> 
> 标签：spring, spring-mvc, url-routing

有没有方便的方法来转动这样的东西..

```
@RequestMapping("/some/action/{q}/...")
public void doSomething(@PathVariable("q"), oh, my, god, a, billion, annotated parameters) { .. } 
```

变成这样。。

```
@RequestMapping("/some/action/{q}/...")
public void doSomething(NiceEncapsulatingRequetObject request) { .. } 
```

使用 Spring MVC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:57:33.017

After checking the [docs](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/method/support/HandlerMethodArgumentResolverComposite.html), it doesn't seem like it is supported out of the box. You could try to create your own [HandlerMethodArgumentResolver](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/method/support/HandlerMethodArgumentResolverComposite.html) which gives you this feature. You might run into some issues since you'll need a circular reference between your implementation and the `HandlerMethodArgumentResolverComposite` instance. Nevertheless I think it should be possible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:40:43.937

是的，spring 开箱即用地支持这一点，它通常被称为 bean 绑定。基本上你创建一个具有相同名称参数的对象，所以如果你有一个参数“q”，你的对象应该包含一个私有字符串 q，同时存在 getter 和 setter。最好不要使用任何构造函数。

Spring 只会填写它在您的对象中的参数并通过方法的参数传递它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T11:58:13.973

您可以创建自己的对象`NiceEncapsulatingRequetObject`，它的属性应该是`String oh, Integer my`等。如果您使用确切的名称发送请求，它将起作用

# php - HTTP 标头规范

> ID：14315122
> 
> 赞同：0
> 
> 时间：2013-01-14T08:30:06.273
> 
> 标签：php, http, curl, http-headers, fsockopen

我正在尝试使用 PHP 的 fsockopen() 发送/接收请求。

我只是想问一下不同类型的[HTTP 方法所需的](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)[标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)是什么？

这些是 Google 的响应标头

```
HTTP/1.0 200 OK => 
Date => Mon, 14 Jan 2013 08:21:29 GMT 
Expires => -1 
Cache-Control => private, max-age=0 
Content-Type => text/html; charset=ISO-8859-1 
Set-Cookie => NID=67=LI2GVi9aUXjLjdpqEs4zbEwYAWmMsW_5CQBWKeR-cohs2CLBSGN7rXqFplRNGxiF2oOZpGWR1mvBPhX7Eak4nmkNERiwPiitJNc0ub4kCxKZt64zvxcZXaeIjdANAWDa; expires=Tue, 16-Jul-2013 08:21:29 GMT; path=/; domain=.google.com; HttpOnly 
P3P => CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info." 
Server => gws 
X-XSS-Protection => 1; mode=block 
X-Frame-Options => SAMEORIGIN 
```

你能给我提示一下为了发出请求需要哪些标头吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:32:30.893

这不是一个简单的话题，但您可能会在标准化 HTTP/1.1 协议的 RFC2616 中找到最佳答案。

[http://www.w3.org/Protocols/rfc2616/rfc2616.html](http://www.w3.org/Protocols/rfc2616/rfc2616.html)

# php - mysql 用 PHP 查询 if 语句？

> ID：14315138
> 
> 赞同：-1
> 
> 时间：2013-01-14T08:31:54.613
> 
> 标签：php, mysql, if-statement

和`$country`值`$job_type`来自下拉列表

```
if ($country == 'All' && $job_type == 'All') {
    $data = mysql_query("SELECT * FROM cv ")
}else {
    $data = mysql_query("SELECT * FROM cv WHERE country='$country' AND job='$job_type'")      
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T08:34:03.693

你似乎错过了一些`;`，试试这个：

```
if ($country == 'All' && $job_type == 'All') 
{
  $data = mysql_query("SELECT * FROM cv WHERE country='$country' AND job='$job_type'");
} else {
  $data = mysql_query("SELECT * FROM cv");
} 
```

本杰明有一点，你的 IF 逻辑似乎不正确。也许你想要这个？

```
if ($country == 'All' && $job_type == 'All') 
{
  $data = mysql_query("SELECT * FROM cv");
} else {
  $data = mysql_query("SELECT * FROM cv WHERE country='$country' AND job='$job_type'");
} 
```

# java - JCodeModel 和 elseif

> ID：14315139
> 
> 赞同：1
> 
> 时间：2013-01-14T08:32:00.013
> 
> 标签：java, code-generation, sun-codemodel

我正在使用 JCodeModel 生成 Java 源代码，并希望获得一个像这样的“if-elseif”块：

```
 if (foo){

 } else if (bar) {

 } 
```

据我了解，相应的代码将是这样的（其中*m*是 JMethod）：

```
JConditional cond = m.body()._if(JExpr.direct("foo"));
cond._elseif(JExpr.direct("bar")); 
```

似乎是直截了当的，但结果是这样的：

```
if (foo) {
    } else {
        if (bar) {
        }
    } 
```

您会看到语法差异，它实际上不是“elseif”。语义上是一样的，我知道，但我需要生成它，如前所示（它是教育软件的一部分）。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:10:28.293

`JConditional`不幸的是，由于它的实现，你不能这样做。看看方法的来源`_elseif`：

```
 public JConditional _elseif(JExpression boolExp) {
     return _else()._if(boolExp);
 } 
```

如您所见，此方法只是调用`_else()`然后在`_if`内部调用。

实际上`_else()`是默认`JBlock`包含`braces`( ) 的。`{ ... }`这个属性`JBlock`不能手动关闭，因为它不包含这样的设置器**。**`braces`只能通过以下特殊构造函数关闭`JBlock`：

```
 public JBlock(boolean bracesRequired, boolean indentRequired) {
     this.bracesRequired = bracesRequired;
     this.indentRequired = indentRequired;
 } 
```

但是您无法将自己的对象设置为向外的对象`_else`场。`JConditional`

唯一的方法是复制`JConditional`类实现并生成您自己的，这将允许您进行此类代码操作。

**UPD：**当然，您始终可以将对象的`Reflection`标志手动切换为.`bracesRequired``_else``false`

# ruby - 在两个给定日期之间以小时为单位生成日期对象

> ID：14315142
> 
> 赞同：0
> 
> 时间：2013-01-14T08:32:27.047
> 
> 标签：ruby

给出了格式中的两个时间戳`YYYYMMDDHH`，它们完全可以被`DateTime.strptime`.

我想要创建的是从第一个日期到第二个日期，在一小时内从上面给定格式的字符串列表。

示例输入：`2013011515`和`2013011822`。

预期输出：`['2013011515','2013011516','2013011517','2013011518', ... , '2013011820', '2013011820', '2013011821', '2013011822']`

是否有任何 ruby​​ 库或核心功能来完成这项任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:05:02.097

如果您使用 ruby​​ 1.9，则可以使用[`step`](http://www.ruby-doc.org/core-1.9.3/Range.html#method-i-step)每小时分辨率：

```
date1 = DateTime.strptime('2013011522', '%Y%m%d%H')
date2 = DateTime.strptime('2013011622', '%Y%m%d%H')

date_range = date1.step(date2, 1.0/24).to_a 
```

或者，在 ruby​​ 1.8.7 上，使用循环

```
date1 = DateTime.strptime('2013011522', '%Y%m%d%H')
date2 = DateTime.strptime('2013011622', '%Y%m%d%H')

new_date = date1
date_range = [date1]
date_range << (new_date += 1.0/24) while new_date <= date2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:04:34.610

```
#!/usr/bin/env ruby
dt_from = "2013011515"
dt_to = "2013011822"
require 'date'
date_from = Date.parse(dt_from[0,8])
date_to = Date.parse(dt_to[0,8])
res = []
date = date_from
while (date <= date_to)
  if date == date_from
    hours = (dt_from[8,2].to_i..23).to_a
  elsif date == date_to
    hours = (0..dt_to[8,2].to_i).to_a
  else
    hours = (0..23).to_a
  end
  hours.each {|h| res << "#{date.strftime('%Y%m%d')}#{"%02d" % h}"}
  date += 1
end
puts res.inspect 
```

# javascript - 这是什么 Javascript 语法错误

> ID：14315149
> 
> 赞同：0
> 
> 时间：2013-01-14T08:32:59.807
> 
> 标签：javascript, json, wordpress

我有这段代码，它从 PHP 文件向 JS 发送一个变量。

```
<script type="text/javascript">
var pids = new Array(<?php echo implode(', ', $pids); ?>);
var permalink = "My name is <?php the_permalink(); ?>";
</script> 
```

由于我无法理解的原因，当删除“我的名字是”时，这是一个语法错误。

```
<script type="text/javascript">
var pids = new Array(<?php echo implode(', ', $pids); ?>);
var permalink = "<?php the_permalink(); ?>";
</script> 
```

没有输出，脚本死了。

```
 [Syntax Error]     

        = new Array(67, 68, 69, 70, 71, 
```

第一个代码正在工作，现在已经自发停止，尽管没有任何变化。现在，两者都不起作用。

我发现问题出在前面的代码中：当小于号更改为小于或等于时，会出现 javascript 语法错误。不知何故，这必须破坏数组或内爆函数

```
 $pids = array();
  $i=0;

  $result = count($wpdb->last_result);
  while($i < $result) {    

     $pids[] = $wpdb->last_result[$i]->pid;
     $i++;
  }
?>

<script type="text/javascript">
var pids = new Array(<?php echo implode(', ', $pids); ?>);
var permalink = "My name is <?php the_permalink(); ?>";
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:04:51.157

试试看：

```
var permalink = "My name is '<?php the_permalink(); ?>'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:05:47.777

您可能在其中一个 php 输出函数中有 ' 或 " ，请尝试转义它们。如果您的 pid 之一是错误的类型并且 implode 无法完成，这也可能发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:07:18.670

尝试这个 ：

```
var permalink = "My name is " + <?php the_permalink(); ?>; 
```

# jquery - 使用 jeditable 同时编辑所有字段

> ID：14315150
> 
> 赞同：3
> 
> 时间：2013-01-14T08:33:03.027
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jeditable

我正在使用 Ruby on Rails 中的 jeditable。

我想做的是单击一个按钮，某一行的所有字段都变为可编辑并自动进入可编辑状态。这可能吗？

这是我的java脚本

```
<script>
jQuery(document).ready(function($) {
    $(".edit_textfield").each( function() {  
          $(this).editable('<%= @student.id%>', {
                indicator   :'Saving...',
                tooltip     :'Click to edit...',
                rows        :10,
                method      :"PUT",
                submitdata: {id: $(this).attr('id'),name: $(this).attr('name')}
            });
    });
});
</script> 
```

这是展示页面

```
<p>
  <b><%=t :Name%>:</b>
  <dd class="edit_textfield" id="<%= @student.id %>" name="name"><%= @student.name %></dd>
</p>

<p>
  <b><%=t :Age%>:</b>
  <dd class="edit_textfield" id="<%= @student.id %>" name="age"><%= @student.age %></dd>
</p>

<p>
  <b><%=t :Address%>:</b>
  <dd class="edit_textfield" id="<%= @student.id %>" name="address"><%= @student.address %></dd>
</p>

<p>
  <b><%=t :Phone%>:</b>
  <dd class="edit_textfield" id="<%= @student.id %>" name="phone"><%= @student.phone %></dd>
</p> 
```

我想设置一个按钮

```
<button type="button" id="button1">Click this button and all the fields will become editable!</button> 
```

所以通过点击这个我想让所有字段都可以编辑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T09:46:04.250

脚本

```
$(".edit_trigger").bind("click", function() {
    $(".edit_textfield").click();
}); 
```

按钮

```
<button type="button" class="edit_trigger">Click this button and all the fields will become editable!</button> 
```

# jquery - 将 div 组织到 2 列 - css 或 jquery

> ID：14315153
> 
> 赞同：1
> 
> 时间：2013-01-14T08:33:13.410
> 
> 标签：jquery, css

我有 10 个 div 一个接一个，我想在 2 列中组织。问题是，如果我将它们全部浮动，我会得到这些列：

```
1 2
3 4
5 6
7 8
9 10 
```

但相反，我想获得这些列：

```
1 6
2 7
3 8
4 9
5 10 
```

这只能通过css来实现吗？如果没有，可以做到这一点的最有效的 jquery 是什么？（我不想触摸标记，因为它是由复杂系统生成的......）

标记很简单：

```
<div class="item">
...
</div>
<div class="item">
...
</div>
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:53:47.943

您可以使用`column-count`和`column-gap`CSS 属性。Mozilla 和 Webkit 都需要前缀，IE10 和 Opera 不需要。但是，IE<=9 根本不支持。

就像是

```
.item-parent{
  column-count: 2;
  column-gap: 20px;
  -moz-column-count: 2;
  -webkit-column-count: 2;
  /*...*/
} 
```

[http://www.quirksmode.org/css/multicolumn.html](http://www.quirksmode.org/css/multicolumn.html)
[http://caniuse.com/#feat=multicolumn](http://caniuse.com/#feat=multicolumn)

或者，要支持 IE9，您可以手动包装两列并适当地设置样式。如果你不想深入研究生成器——模板系统应该已经解决了这个问题——你可以使用 Javascript：

```
$('.item-parent').each(function(){
  $items = $('.item', this);
  $items.slice(0, ($items.length+1)/2) //split in half, round up
    .wrapAll('<div class="item-column">');
  $items.slice(($items.length+1)/2)
    .wrapAll('<div class="item-column">');
)}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:53:38.910

将您拥有的项目放在两个 DIV 中，如下所示

```
<style>
.col{
    float:left;
    width:50%;
}
</style>

<div class="col">
    <div class="item">1</div>
    <div class="item">2</div>
    <div class="item">3</div>
    <div class="item">4</div>
    <div class="item">5</div>
</div>
<div class="col">
    <div class="item">6</div>
    <div class="item">7</div>
    <div class="item">8</div>
    <div class="item">9</div>
    <div class="item">10</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:37:41.933

假设

```
1 2
3 4
5 6
7 8
9 10 
```

来自您的复杂系统（不确定您实际上想说什么），您将不得不看看这些`div`是如何生成的，我猜，代码中会有非常小的变化以获得您想要的结果

或者，您可以使用循环来获取所需的结构..

# java - 在 java 代码中使用自己的密钥库

> ID：14315154
> 
> 赞同：1
> 
> 时间：2013-01-14T08:33:14.490
> 
> 标签：java, tomcat, keystore, keytool, private-key

我想**使用密钥库来保存私钥**。我使用这个私钥来加密数据源密码。我使用**keytool生成****了 myfile.keystore**文件，并在 Tomact server.xml 文件中添加了以下配置。

 **```
<Connector
protocol="HTTP/1.1"
port="8443" maxThreads="200"
scheme="https" secure="true" SSLEnabled="true"
keystoreFile="myfile.keystore" keystorePass="password"
clientAuth="false" sslProtocol="TLS"/> 
```

**如何读取此私钥以在 Java 代码中使用？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:34:24.830

您发送给我们的 XML 配置只是为 tomcat 服务器配置 SSL。它与出于其他目的存储/读取私钥无关。

这是加载和初始化密钥库的一些代码。

```
FileInputStream is = new FileInputStream("myfile.keystore");

KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());
keystore.load(is, "password".toCharArray());
Key key = keystore.getKey("my-alias", "password".toCharArray()); 
```

HIH**

# android - 如何为顶线对齐的 EditText 和 Button 设置布局？

> ID：14315155
> 
> 赞同：2
> 
> 时间：2013-01-14T08:33:22.693
> 
> 标签：android, layout, button, android-edittext

当 EditText 和 Button 控件放在同一行时，我正在尝试创建一种“Buttoned Edit”控件。我使用了一个简单的线性布局：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <EditText
        android:id="@+id/editTextFileName"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:hint="Database file name"
        android:inputType="textUri" />

    <Button
        android:id="@+id/buttonFileSelect"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:minWidth="46dip"
        android:text="..." />

</LinearLayout> 
```

问题是编辑框和按钮未在同一“顶线”上对齐： ![布局顶行间距](../Images/fbc925d9358e1a9d1a0b780ef4782e95.png)

仔细看看： ![在此处输入图像描述](../Images/d6e63ea9d0b2b6dc7ce57a41a12c0e9e.png)

在不同的模拟器上，我得到不同的间距。

如何使 EditText 和 Button 始终在背线上对齐？

**解决方案（感谢@steevoo 和@Mohamed_AbdAllah）：**

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/buttonFileSelect"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:minWidth="46dip"
        android:layout_alignParentRight="true"
        android:text="..." />

    <EditText
        android:id="@+id/editTextFileName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:layout_toLeftOf="@id/buttonFileSelect"
        android:layout_alignTop="@id/buttonFileSelect"
        android:hint="Database file name"
        android:inputType="textUri" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:30:23.710

尝试使用 a`RelativeLayout`代替并使用来对齐和`android:layout_alignTop`的顶部。此外，您可以给它们相同的固定高度（46dip），但这可能会导致文本在`Button``EditText``EditText`

# windows-phone-7 - WP8 SDK 中的 Windows 手机应用程序开发

> ID：14315156
> 
> 赞同：0
> 
> 时间：2013-01-14T08:33:28.420
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

我是一名 Windows Phone 7 应用程序开发人员。现在我正在使用 Visual Studio 2010 和 WP7 SDK 和 Windows 7 操作系统。但我计划在我的系统中安装 Windows 8 OS 和 Windows Phone 8 SDK 和 Visual Studio 2012。如果这样做，我可以使用 WP8 SDK 和 Visual Studio 2012 开发 windows phone 7.0 和 windows phone 7.1 应用程序吗？

而且我在 WP7 中开发了一些应用程序，所以如果需要修复任何错误，我可以使用 WP8 SDK 来完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T09:01:50.027

您可以使用 8.0 SDK 开发 7.1 应用程序和 8.0 应用程序，但不能开发 7.0 应用程序......虽然我认为系统版本低于 7.1 的设备无法访问商店，因此您不需要维护 7.0 版本的应用程序....

当然，任何 wp7.1 项目都可以使用新的 SDK 8.0 打开而不会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:42:02.877

是的，Windows 8 和 Visual Studio 2012 支持 WP7 开发。有一个 WP7 模拟器，你也可以连接和使用你自己的 WP7 测试设备。

# codeigniter - 是否可以在 CI 应用程序目录之外加载 CI 模型、库和帮助程序？

> ID：14315159
> 
> 赞同：0
> 
> 时间：2013-01-14T08:33:34.987
> 
> 标签：codeigniter

我在 CodeIgniter 应用程序目录之外使用 REST API，并且我希望能够访问 CI 模型、库和帮助程序，因此我不必在我的 REST API 文件夹中复制粘贴相同的函数。我希望不要重复这些功能。

反正我能做到吗？我正在使用 Restler API，但无法使其在 CI 中工作，所以我在 CI 应用程序文件夹之外进行了操作。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:14:48.477

您可以使用 Philsturgeon 编写的 REST 库，这将非常简单，您可以访问该框架的任何内容。我在我的项目中使用过这个库，所以我知道根据我的经验配置和使用它非常容易。

[http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)

[https://github.com/philsturgeon/codeigniter-restserver](https://github.com/philsturgeon/codeigniter-restserver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T18:06:55.327

我实际上正在维护一个允许直接从模型方法创建 Rest 调用（json）的 codeigniter 版本。这是我的做法：

```
MODEL
function api_simplearray()
{
    return Array(1,2,4,5,6,7);
}

CONTROLLER
public function __construct()
{
    parent::__construct();
    $this->load->model('MyModel');
} 
```

网址：/index.php/CONTROLLER/api_simplearray/

*重要：模型必须在构造函数中加载。

# php - 获取 URL 列表的重定向位置

> ID：14315161
> 
> 赞同：0
> 
> 时间：2013-01-14T08:33:48.997
> 
> 标签：php, redirect, http-headers

我有一个包含 URL 列表的 txt 文件。我想要该列表中所有 URL 的重定向位置。这是我的代码：

```
$url_list = "ggurl.txt";

$ch = curl_init();

curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

foreach (file($url_list) as $url) {

    curl_setopt($ch, CURLOPT_URL, $url);
    $out = curl_exec($ch);

    // line endings is the wonkiest piece of this whole thing
    $out = str_replace("\r", "", $out);

    // only look at the headers
    $headers_end = strpos($out, "\n\n");
    if( $headers_end !== false ) { 
        $out = substr($out, 0, $headers_end);
    }   

    $headers = explode("\n", $out);
    foreach($headers as $header) {
        if( substr($header, 0, 10) == "Location: " ) { 
            $target = substr($header, 10);

            echo "[$url] redirects to [$target]<br>";
            $url = $target;
            continue 2;
        }
    }

$url = rtrim($url);

echo $url . "<br>";

} 
```

这段代码的问题是它只显示列表中最后一个 URL 的重定向位置。有谁知道这个问题的解决方案？

# dependency-injection - JBoss 6：应用程序未完全部署时启动计时器

> ID：14315162
> 
> 赞同：1
> 
> 时间：2013-01-14T08:33:52.840
> 
> 标签：dependency-injection, timer, ejb-3.0, jboss6.x

我在部署时遇到问题**JBoss 6**。我的应用程序包含一个*无状态 EJB*，其中一个方法用`@Schedule(hour="1")`注释标记。这种方法使用另一个由@EJB 注解注入的无状态EJB。

```
@Stateless
public class AuditRecordCleanerBean implements AuditRecordCleanerLocal
{
@EJB
private RecordManager recordManager;

@Schedule(hour="1")
public void moveRecordsToHistoricTable()
{
recordManager.moveRecords();
...
}
} 
```

因为定时器在 JBoss 中是持久的，所以当我重新启动应用程序服务器时，有时可能会在 EJB RecordManager 尚未部署时触发定时器，从而导致 NameNotFoundException。

在 server.log 中，我发现了以下警告：

```
WARN  [org.jboss.ejb3.TimerServiceContainer] (Thread-2) EJBTHREE-2193: using deprecated TimerServiceFactory for restoring timers 
```

可能是这个问题吗？如何在应用程序完全部署后延迟第一个计时器的执行？

最好的问候，法比奥

# ios - 在字符串中查找数字模式

> ID：14315168
> 
> 赞同：10
> 
> 时间：2013-01-14T08:34:26.533
> 
> 标签：ios, objective-c, regex

我希望能够在一个字符串中找到一个子字符串，但它有一个独特的模式，我不知道如何找到。

前任。

```
NSString *test1= @"Contact Names
                  67-444-322
                  Dec 21 2012
                  23941 6745 9145072 01567
                  5511 23345 614567 123456
                  Older Contacts
                  See Back Side"; 
```

我想在子字符串中找到以下模式（这些数字但不是日期数字）

```
 23941 6745 9145072 01567
                  5511 23345 614567 123456 
```

但是，示例字符串的格式几乎不会相同。除了“联系人姓名”、“老联系人”和“见背面”之外，每次都会有不同的号码和不同的标题。将保持不变的一件事是，我正在寻找的数字总是有 4 个数字，但可能有 1 行或 10 行。

有谁知道我将如何解决这个问题？我正在考虑可能只找到字符串中的数字，然后检查哪些数字之间有 3 个空格。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T14:38:18.947

我已经尝试了以下方法并且它有效：

```
NSString *test1= @"Contact Names\n"
    "67-444-322\n"
    "Dec 21 2012\n"
    "23941 6745 9145072 01567\n"
    "5511 23345 614567 123456\n"
    "Older Contacts\n"
    "See Back Side";

NSString *pattern = @"(([0-9]+ ){3}+[0-9]+)(\\n(([0-9]+ ){3}+[0-9]+))*";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern options:0 error:nil];
NSArray *results = [regex matchesInString:test1 options:0 range:NSMakeRange(0, [test1 length])];
if ([results count] > 0) {
    NSTextCheckingResult *result = [results objectAtIndex:0];
    NSString *match = [test1 substringWithRange:result.range];
    NSLog(@"\n%@", match); // These are your numbers
} 
```

*（如果只有一行数字，它也有效。）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T01:11:16.657

您可以使用字符集来分隔字符串，然后确定每个组件中是否有 4 个数字。这只有在字符串中包含换行符 ( `\n`) 时才有效（正如您对 Lance 的回复似乎表明的那样）。

我会这样做：

```
NSString *test1= @"Contact Names\n
              67-444-322\n
              Dec 21 2012\n
              23941 6745 9145072 01567\n
              5511 23345 614567 123456\n
              Older Contacts\n
              See Back Side";

NSArray *lines = [test1 componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet];

// lines now contains each line in test1

for (NSString* line in lines) {

    NSArray *elements = [line componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet];

    if (elements.count == 4) {
        // This line contains 4 numbers
        // convert each number string into an int if needed
    }
} 
```

抱歉，代码行太长了，Apple 的一些选择器有点长……无论如何，如果元素有 4 个单独的 ( `NSString`) 对象，那么它就是您正在寻找的行之一，您可以操纵数据根据您的需要。

**编辑（旁白）：**

关于正则表达式的主题（因为这个问题包含`regex`标签），是的，您可以使用正则表达式，但是 Objective-C 并没有真正的“好”方式来处理它们......正则表达式更多地属于脚本语言领域以及内置支持它的语言。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T16:58:02.023

我改进了我的代码，使其更具可读性并在找到字符串时停止（不会分成几行......如果您也需要这个，请告诉我再次添加代码或在遇到困难时帮助您）

我使用的正则表达式是：
-一个或多个数字后跟一个或多个空格（所有这些都是树乘以）
-一个或多个数字后跟一个或多个空格（这些是换行符、制表符、空格等）
-我尝试找到整个模式重复 1 次或多次

代码是

```
NSString *test1= @"Contact Names\n    67-444-322\n\nDec 21 2012\n23941 6745 9145072 01567\n5511 23345 614567 123456\nOlder Contacts\nSee Back Side\n";

//create the reg expr
NSString *pattern1 = @"(([0-9]+ +){3}[0-9]+\\s+)+";
NSRegularExpression *regex1 = [NSRegularExpression regularExpressionWithPattern:pattern1 options:0 error:nil];
//find matches
NSArray *results1 = [regex1 matchesInString:test1 options:0 range:NSMakeRange(0, [test1 length])];
if ([results1 count] > 0) {
    //if i find more series...what should i do?
    if ([results1 count] > 1) {
        NSLog(@"I found more than one matching series....what should i do?!");
        exit(111);
    }
    //find series and print
    NSTextCheckingResult *resultLocation1 = [results1 objectAtIndex:0];
    NSString *match1 = [test1 substringWithRange:resultLocation1.range];
    //trim leading and ending whitespaces
    match1=[match1 stringByTrimmingCharactersInSet:
            [NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSLog(@"the series is \n%@", match1);        
}else{
    NSLog(@"No matches found in string");
} 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T08:43:13.917

```
#include <stdio.h>
#include <string.h>
#include <pcre.h>

int main(int argc, char **argv)
{
  const char *error;
  int erroffset;
  int ovector[186];
  char re[8192]="";
  char txt[]="Dec 21 2012                   23941 6745 9145072 01567                   5511 23345 614567 123456                   Ol\";";

  char re1[]=".*?"; // Non-greedy match on filler
  strcat(re,re1);
  char re2[]="\\d+";    // Uninteresting: int
  strcat(re,re2);
  char re3[]=".*?"; // Non-greedy match on filler
  strcat(re,re3);
  char re4[]="\\d+";    // Uninteresting: int
  strcat(re,re4);
  char re5[]=".*?"; // Non-greedy match on filler
  strcat(re,re5);
  char re6[]="(\\d+)";  // Integer Number 1
  strcat(re,re6);
  char re7[]="(\\s+)";  // White Space 1
  strcat(re,re7);
  char re8[]="(\\d+)";  // Integer Number 2
  strcat(re,re8);
  char re9[]="(\\s+)";  // White Space 2
  strcat(re,re9);
  char re10[]="(\\d+)"; // Integer Number 3
  strcat(re,re10);
  char re11[]="(\\s+)"; // White Space 3
  strcat(re,re11);
  char re12[]="(\\d+)"; // Integer Number 4
  strcat(re,re12);
  char re13[]="(\\s+)"; // White Space 4
  strcat(re,re13);
  char re14[]="(\\d+)"; // Integer Number 5
  strcat(re,re14);
  char re15[]="(\\s+)"; // White Space 5
  strcat(re,re15);
  strcat(re,re16);
  char re17[]="(\\s+)"; // White Space 6
   strcat(re,re17);
  char re18[]="(\\d+)"; // Integer Number 7
  strcat(re,re18);
  char re19[]=".*?";    // Non-greedy match on filler
  strcat(re,re19);
  char re20[]="(\\d+)"; // Integer Number 8
  strcat(re,re20);

  pcre *r =  pcre_compile(re, PCRE_CASELESS|PCRE_DOTALL, &error, &erroffset, NULL);
  int rc = pcre_exec(r, NULL, txt, strlen(txt), 0, 0, ovector, 186);
  if (rc>0)
 {
  char int1[1024];
  pcre_copy_substring(txt, ovector, rc,1,int1, 1024);
  printf("(%s)",int1);
  char ws1[1024];
  pcre_copy_substring(txt, ovector, rc,2,ws1, 1024);
  printf("(%s)",ws1);
  char int2[1024];
  pcre_copy_substring(txt, ovector, rc,3,int2, 1024);
  printf("(%s)",int2);
  char ws2[1024];
  pcre_copy_substring(txt, ovector, rc,4,ws2, 1024);
  printf("(%s)",ws2);
  char int3[1024];
  pcre_copy_substring(txt, ovector, rc,5,int3, 1024);
  printf("(%s)",int3);
  char ws3[1024];
  pcre_copy_substring(txt, ovector, rc,6,ws3, 1024);
  printf("(%s)",ws3);
  char int4[1024];
  pcre_copy_substring(txt, ovector, rc,7,int4, 1024);
  printf("(%s)",int4);
  char ws4[1024];
  pcre_copy_substring(txt, ovector, rc,8,ws4, 1024);
  printf("(%s)",ws4);
  char int5[1024];
  pcre_copy_substring(txt, ovector, rc,9,int5, 1024);
  printf("(%s)",int5);
  char ws5[1024];
  pcre_copy_substring(txt, ovector, rc,10,ws5, 1024);
  printf("(%s)",ws5);
  char int6[1024];
  pcre_copy_substring(txt, ovector, rc,11,int6, 1024);
  printf("(%s)",int6);
  char ws6[1024];
  pcre_copy_substring(txt, ovector, rc,12,ws6, 1024);
  printf("(%s)",ws6);
  char int7[1024];
  pcre_copy_substring(txt, ovector, rc,13,int7, 1024);
  printf("(%s)",int7);
  char int8[1024];
  pcre_copy_substring(txt, ovector, rc,14,int8, 1024);
  printf("(%s)",int8);
  puts("\n");
  }
} 
```

从下次开始使用[http://txt2re.com](http://txt2re.com)

你也可以制作一个简单的正则表达式字符串。为此，您只能将它们写在 1 个字符变量中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-14T09:48:35.680

使用所有月份的名称创建一个数组，例如monthArray。

然后使用空格分割整个字符串。现在在 for 循环检查中

if（拆分数组的四个连续元素是数字）

```
 {

 if(previous 5th, 6th and seventh element in the splited array does not belong to monthArray)//if forloop count is 7 then previous 5th means the 2nd element in the splited array
     {
       those 4 consecutive variable belongs to a row you are looking for.

      }
   } 
```

//------------------------------------------------ ----------

```
NSArray *monthArray = [[NSArray alloc] initWithObjects:@"Dec", nil];//here you have to add the 12 monts name. Now i added only 'Dec'
NSString *test1= @"Contact Names 67-444-322 Dec 21 2012 23941 6745 9145072 01567 5511 23345 614567 123456 Older Contacts See Back Side";
NSArray *splitArray = [test1 componentsSeparatedByString:@" "];
int count = 0;

for (int i =0; i<splitArray.count; i++) {
    if ([[[splitArray objectAtIndex:i] componentsSeparatedByCharactersInSet:[[NSCharacterSet decimalDigitCharacterSet] invertedSet]] count]==1)//checks if it is a pure integer
    {
        count ++;
    }else count= 0;

    if (count>=4) {
        if (i-4>=0) {
            if ([monthArray containsObject:[splitArray objectAtIndex:i-4]]) {
                continue;
            }
        }
        if (i-5>=0) {
            if ([monthArray containsObject:[splitArray objectAtIndex:i-5]]) {
                continue;
            }
        }
        NSLog(@"myneededRow===%@ %@ %@ %@",[splitArray objectAtIndex:i-3],[splitArray objectAtIndex:i-2],[splitArray objectAtIndex:i-1],[splitArray objectAtIndex:i]);
        count = 0;

    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T08:47:33.703

如果数字的数量永远不会改变，即 [5 个数字][空格][4 个数字][空格]...

然后您可以使用 NSRegularExpression 设置模式，然后在字符串中搜索该模式。

[https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-14T08:48:10.527

试试 NSLingustic 标记器类。

```
NSMutableArray numbers = [NSMutableArray new];
NSString *test1= @"Contact Names
                      67-444-322
                      Dec 21 2012
                      23941 6745 9145072 01567
                      5511 23345 614567 123456
                      Older Contacts
                      See Back Side";
    NSLinguisticTaggerOptions options = NSLinguisticTaggerOmitWhitespace | NSLinguisticTaggerOmitPunctuation | NSLinguisticTaggerJoinNames;
    NSLinguisticTagger *tagger = [[NSLinguisticTagger alloc] initWithTagSchemes: [NSLinguisticTagger availableTagSchemesForLanguage:@"en"] options:options];
    tagger.string = test1;
    [tagger enumerateTagsInRange:NSMakeRange(0, [test1 length]) scheme:NSLinguisticTagSchemeNameTypeOrLexicalClass options:options usingBlock:^(NSString *tag, NSRange tokenRange, NSRange sentenceRange, BOOL *stop) {
        NSString *token = [test1 substringWithRange:tokenRange];
        if(Tag == NSLinguisticTagNumber){
           [numbers addObject:token];
        }
    }];
NSLogs("All Numbers in my strings are: %@", numbers); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-24T14:47:24.460

这应该有效。我必须在你的输入中添加换行符 \n 才能让我的工作，但我假设你是从 API 或文件中获取字符串，所以它应该已经有了换行符。

```
NSString *test1= @"Contact Names\
    67-444-322\n\
    Dec 21 2012\n\
    23941 6745 9145072 01567\n\
    5511 23345 614567 123456\n\
    Older Contacts\n\
    See Back Side";

    // first, separate by new line
    NSArray* allLinedStrings =
    [test1 componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];

    NSRegularExpression *regex = [[NSRegularExpression alloc] initWithPattern:@"^[0-9 ]+$"
                                                                      options:0
                                                                        error:nil];
    for (NSString *line in allLinedStrings) {
        NSArray *matches = [regex matchesInString:line options:0 range:NSMakeRange(0, [line length])];
        if (matches.count) {
            NSTextCheckingResult *result = matches[0];
            NSString *match = [line substringWithRange:result.range];
            NSLog(@"match found: %@\n", match);
        }
    } 
```

# vb.net - 后台工作者和 SaveDialog

> ID：14315180
> 
> 赞同：3
> 
> 时间：2013-01-14T08:36:03.680
> 
> 标签：vb.net

我对后台工作人员控制非常陌生。我有一个构建文件的现有项目，但在整个项目中构建文件时出现死锁错误。我试图通过创建另一个仅由后台工作人员组成的项目来解决它。然后我将它们合并。

我的问题是我不知道在哪里实施我的后台工作人员会更有效，而且主要问题是如何将 SaveDialog 与我的后台工作人员一起使用？我需要向我的后台工作程序项目发送一个参数，告诉它何时构建我的文件。

这是我的文件正在构建的地方：

```
 srOutputFile = New System.IO.StreamWriter(strFile, False) 'Create File

  For iSeqNo = 0 To iPrintSeqNo
    ' Loop through al the record types
    For Each oRecord As stFileRecord In pFileFormat
      If dsFile.Tables.Contains(oRecord.strRecordName) Then
        ' Loop through al the records
        For Each row As DataRow In dsFile.Tables(oRecord.strRecordName).Rows
          ' Check record id
          If oRecord.strRecordId.Length = 0 Then
            bMatched = True
          Else
            bMatched = (CInt(oRecord.strRecordId) = CInt(row.Item(1)))
          End If

          ' Match records
          If iSeqNo = CInt(row.Item(0)) And bMatched Then
            strRecord = ""
            ' Loop through al the fields
            For iLoop = 0 To UBound(oRecord.stField)
              ' Format field
              If oRecord.stField(iLoop).iFieldLength = -1 Then
                If strRecord.Length = 0 Then
                  strTmp = row.Item(iLoop + 1).ToString
                Else
                  strTmp = strDelimiter & row.Item(iLoop + 1).ToString
                End If
              ElseIf oRecord.stField(iLoop).eFieldType = enumFieldType.TYPE_VALUE Or _
                     oRecord.stField(iLoop).eFieldType = enumFieldType.TYPE_AMOUNT_CENT Then

                strTmp = row.Item(iLoop + 1).ToString.Replace(".", "").PadLeft(oRecord.stField(iLoop).iFieldLength, "0")
                strTmp = strTmp.Substring(strTmp.Length - oRecord.stField(iLoop).iFieldLength)
              Else
                strTmp = row.Item(iLoop + 1).ToString.PadRight(oRecord.stField(iLoop).iFieldLength, " ").Substring(0, oRecord.stField(iLoop).iFieldLength)
              End If

              If oRecord.stField(iLoop).iFieldLength > -1 And (bForceDelimiter) And strRecord.Length > 0 Then
                strTmp = strDelimiter & strTmp
              End If

              strRecord = strRecord & strTmp
            Next

            ' Final delimiter
            If (bForceDelimiter) Then
              strRecord = strRecord & strDelimiter
            End If

            srOutputFile.WriteLine(strRecord)
          End If
        Next
      End If
    Next
  Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:05:17.700

你可以试试这个：

```
Private locker1 As ManualResetEvent = New System.Threading.ManualResetEvent(False)
Private locker2 As ManualResetEvent = New System.Threading.ManualResetEvent(False)
Dim bOpenFileOK As Boolean
Dim myOpenFile As OpenFileDialog = New OpenFileDialog()

Private Sub FileOpener()
    While Not bTerminado
        If myOpenFile.ShowDialog() = System.Windows.Forms.DialogResult.OK Then
            bOpenFileOK = True
        Else
            bOpenFileOK = False
        End If

        locker2.Set()
        locker1.WaitOne()
    End While
End Sub

' Detonator of the action
Private Sub Button1_Click(ByVal sender As System.Object, _
ByVal e As System.EventArgs) Handles Button1.Click
    Dim tFileOp As Thread = New Thread(AddressOf FileOpener)
    tFileOp.SetApartmentState(ApartmentState.STA)
    tFileOp.Start()

    ' Start BackgroundWorker
    BW1.RunWorkerAsync()
End Sub

Private Sub AsyncFunctionForBW(ByVal args As ArrayList)
    '[...]

    'Change options dinamically for the OpenFileDialog
    myOpenFile.Filter = ""
    myOpenFile.MultiSelect = True

    'Calling the FileDialog
    locker1.Set()
    locker2.WaitOne()
    locker1.Reset()
    locker2.Reset()

    If bOpenFileOK Then
        myStream = myOpenFile.OpenFile()

        '[...]
    End If
End Sub 
```

这有点复杂，但它有效。

`ManualResetEvents`到达时中断代码的执行（如果他们被告知停止），直到您使用`.Set()`. 如果您使用`.WaitOne()`它，则将其设置为停止模式，因此到达时它将再次停止。

此代码定义了两个`ManualResetEvents`. 当您单击`Button1`启动`FileOpener()`新功能时`Thread`，然后启动`BackgroundWorker`. 该`FileOpener()`函数显示一个`FileOpenDialog`并等待，`locker1`所以当您使用`locker1.Set()`该函数时显示文件对话框。

由于`myOpenFile`是“全局”变量（以及`bOpenFileOK`），一旦用户选择（或不选择）文件，您就可以检测到对话框结果（`bOpenFileOK`）和所选文件。

# java - java第一个程序评论

> ID：14315182
> 
> 赞同：3
> 
> 时间：2013-01-14T08:36:18.157
> 
> 标签：java

刚开始学习Java，写了一个计算用户选择形状面积的基本程序。我可以对我做对错的事情进行批评和评论吗？我猜很多会是糟糕的编程，但这就是我在这里的原因。

还有一个问题，在调用我的方法时，我需要输入完整路径，即 areaprog.areacode.. 你知道这是为什么吗？以下两个类的代码：

**主程序**

```
package areaprog;

import java.util.Scanner;

public class mainprog {

    public static void main (String [] args){

        //Area Menu Selection
        System.out.println("What shape do you need to know the area of?\n" +
        "1: Square?\n" +
        "2: Rectangle?\n" +
        "3: Triangle?\n" +
        "4: Circle? \n" +
        "5: Exit\n"     
        );

        //User input for menu
        Scanner reader = new Scanner(System.in);
        System.out.println("Number: ");
        int input = reader.nextInt();
        reader.nextLine();

        //Depending on user selection, depends on what method is called using switch.
    Scanner scan = new Scanner(System.in);

        //Square selection
        if (input == 1){
            System.out.println("What is a length of 1 side of the Square?\n");
                double s1 = scan.nextInt();
                double SqAns = areaprog.areacode.square(s1);
            System.out.println("The area of you square is: " + SqAns);
        }

        //Rectangle selection    
            if (input == 2){
            System.out.println("What is the width of your rectangle?.\n");
                double r1 = scan.nextInt();
            System.out.println("What is the height of your rectangle?\n");
                double r2 = scan.nextInt();
                double RecAns = areaprog.areacode.rect(r1, r2);
            System.out.println("The area of your rectangle is: " + RecAns);    
            }
        //Triangle selection
        if (input == 3){
            System.out.println("What is the base length of the triangle?.");
                double t1 = scan.nextInt();
            System.out.println("What is the height of your triangle?");
                double t2 = scan.nextInt();
                double TriAns = areaprog.areacode.triangle(t1, t2);
            System.out.println("The area of your triangle is " + TriAns);
        }
        //Circle selection
        if (input == 4){
            System.out.println("What is the radius of your circle?.");
                double c1 = scan.nextInt();
                double CircAns = areaprog.areacode.circle(c1);
            System.out.println("The area of your circle is " + CircAns);    

        }
        //Exit application
        if (input == 5){
            System.out.println("Goodbye.");
        System.exit(0);
        }

    }

} 
```

**面积计算**

```
package areaprog;

public class areacode {

    public static double rect(double width, double height) {
        double a_value = width * height;

        return a_value;

    }

    public static double circle(double radius){
        double PI = Math.PI;
        double a_value = PI * Math.pow(radius, 2);

        return a_value;

    }

    public static double square(double side) {
        double a_value = Math.pow(side, 2);

        return a_value;

    }

    public static double triangle(double base , double height) {
        double a_value = (base/2)* height;

        return a_value;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:44:53.643

正如本杰明所说，你的问题属于别处。但这里有几点意见。

*   您的课程应该使用大写字母。

*   命名事物很重要。Areacode 是一个奇怪的名字，你应该描述它的功能，比如 AreaCalculator。

*   函数名应该描述它的作用，所以你应该使用 getCircleArea 之类的东西而不是 circle

*   在您的主要方法中，导入包可能会更好，因此您只需要说 AreaCalculator.getCircle(5); 例如，而不是每次都输入包。

但是如果你看整个事情，这是一个非常好的第一个程序。如果你知道你为什么要做你所做的一切（例如为什么第二课是静态的是一个好习惯），你应该很快就会做得很好。

您可以将您在 main 方法中所做的几件事放在单独的方法中，以获得更好的程序结构和更轻松的调试。

编辑/您的问题：如果您在文件开头导入包，则不需要编写整个路径。这是上面的评论之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:52:25.250

使用 java 的编码约定。

1.  类名以大写字母开头，在类名中，每个新名词和动词等的第一个字母都是大写字母。

如果类名是 mynewbook 那么它应该写成 MyNewBook 。

1.  变量名总是以小写字母开头，并且在变量名中，每个新名词和动词等的第一个字母都是大写字母。

    如果变量名是 mynewbook 那么它应该写成 myNewBook..

2.  对于常量... [最终变量] 所有字母都大写，您应该在所有新动词、名词等之间加上“_”下划线...

    如果最终变量名是 mynewbook 那么它应该写成 MY_NEW_BOOK....

* * *

而不是a_value，养成写aValue的习惯

# c# - 奇怪的 NullReferenceException

> ID：14315183
> 
> 赞同：-4
> 
> 时间：2013-01-14T08:36:18.290
> 
> 标签：c#

我有四个类：
`PointMass`，继承自`PropPhysics`，继承自`Entity`（`PropPhysics`并且`Entity`都是抽象类），并且`World`有一个`List<Entity>`被调用的`Entities`.

在这里，我正在尝试将 PointMass 添加到 World 的`List<Entity>`.

奇怪的是，每当我尝试添加一个新的、全局定义的甚至是现有的`PointMass`（在方法的范围内）时，我都会收到“`NullReferenceException`未处理”错误。

我检查 PointMass " `pMass`" 是否为空，但它不是，它会引发相同的错误。

`PointMass`我什至在构造a 时显示一个消息框，但它仍然会引发相同的错误。

其他研究没有发现运气。

```
 private void Display_Click(object sender, EventArgs e)
    {
        p.PositionX = 0;
        p.PositionY = 0;
        p.Mass = 5;

        PointMass pMass = new PointMass();
        if (pMass==null)
        {            
            MessageBox.Show("error: Mass is null");
        }

        MyWorld.Entities.Add(new PointMass());
        MyWorld.Entities.Add(pMass);
        MyWorld.Entities.Add(p); 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:37:44.217

最有可能的是，您忘记了初始化`p`,`MyWorld`或`MyWorld.Entities`.

我假设是后者，因此请确保您在以下构造函数中有这样的代码`World`：

```
Entities = new List<Entity>(); 
```

`null`通过使用调试器，您可以很容易地找出实际上是哪个变量。请在将来发布此类问题之前这样做。

顺便说一句：`pMass`创建后不能直接为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T08:38:42.140

尝试初始化`MyWorld.Entities`或`p`在您的代码中。喜欢;

```
Entities e = new List<Entity>(); 
```

# jsf - Primefaces过滤器不起作用

> ID：14315186
> 
> 赞同：1
> 
> 时间：2013-01-14T08:36:23.977
> 
> 标签：jsf, primefaces, facelets

我想使用具有 Units 类型项目列表的`filter`属性，`<p:selectOneMenu>`它是一个`Enum`类，如下所示：

```
public enum Units {

      PERCENT, MILLIMETER, METER, NUMBER
} 
```

当我使用`filter`with 时`<p:selectOneMenu>`，不会过滤任何内容。我认为这是因为列表中有 Units 类型的项目，我正在比较过滤器中的字符串。在我可以在过滤器中匹配它们之前，我应该使用转换器将 Unit 项目转换为 String 吗？如果是这样，我的转换器应该如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:07:27.860

我可以重现你的问题。仅当项目列表超过可见项目的默认数量时，过滤器才起作用。这实际上是负责创建菜单和初始化过滤器的 JavaScript 中的一个错误。您最好的选择是将其作为错误[报告](http://code.google.com/p/primefaces/issues/list)给 PrimeFaces 人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:52:19.087

好的，这就是我让它工作的方式。在`<p:selectOneMenu>`我添加了一个属性`height="200"`。根据代码片段[SelectOneMenu with filter not working with less than 10 elements](http://code.google.com/p/primefaces/issues/detail?id=4594)，过滤器仅在设置高度时才有效。

# visual-studio - 通过 Visual Studio 2012 签署 InstallShield 2012 LE 安装程序

> ID：14315187
> 
> 赞同：3
> 
> 时间：2013-01-14T08:36:31.193
> 
> 标签：visual-studio, visual-studio-2012, installshield, code-signing, installshield-2012

我正在尝试从 Visual Studio 2012 的 InstallShield 2012LE 中签署我的安装包。我有一个来自 Symantec (VeriSign) 的 MS Authenticode 证书。我看到了两个问题。

首先，如果我选择签署输出文件 - > Setup.exe 和 Windows 安装程序包（或只是 Windows 安装程序包）Visual Studio 崩溃。事件日志显示两个错误

```
Faulting application name: devenv.exe, version: 11.0.50727.1, time stamp: 0x5011ecaa 
```

错误模块名称：WINTRUST.dll，版本：6.2.9200.16420，时间戳：0x505a9691 异常代码：0xc0000005

```
Application: devenv.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: exception code c0000005, exception address 758017E4
Stack: 
```

此外，如果我将“使用软件识别标签”设置为“是”，那么在尝试构建安装程序包时会出现以下错误。

```
Error   108 -1027: Failed signing TagCreatorID_EE17CD21-FE17-4342-8CA5-E0B993AAEB3E.swidtag
ISEXP : error : -1027: Failed signing TagCreatorID_EE17CD21-FE17-4342-8CA5-E0B993AAEB3E.swidtag 
```

有没有人遇到过这些问题并知道解决方法？它工作正常是我关闭软件识别标签并只签署 Setup.exe 但我还需要上面的选项。该证书还可以毫无问题地签署我所有的 DLL 和 EXE。

# jquery - jQuery：获取标题和 href 值作为变量

> ID：14315193
> 
> 赞同：4
> 
> 时间：2013-01-14T08:36:58.860
> 
> 标签：jquery, variables

我有一个带有标题和 href 值的链接列表。我希望能够分别获得这些值，但我总是获得第一个链接的值。这是为什么？ [在这里看我的小提琴](http://jsfiddle.net/FaNdV/)。如您所见 - 单击任何链接时，您总是从第一个链接获取值。我想设置这些变量是不够的：

```
var title = $('.mg_phones').attr('title');
var url = $('.mg_phones').attr('href'); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T08:39:24.230

您必须引用单击的元素：

```
var title = $(this).attr('title');
var url = $(this).attr('href'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T08:39:10.687

您需要将代码更改为：

```
var title = $(this).attr('title').toLowerCase();
var url = $(this).attr('href'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T08:39:39.173

改为使用`$(this)`。问题是这`$('.mg_phones')`是一个包含该类的所有元素的数组，访问`$('.mg_phones').attr(...)`会选择第一个元素，因为它不知道你想要哪个元素。

但`$(this)`在此上下文中指的是当前单击的项目。

```
$('.mg_phones').click(function (event) {
    event.preventDefault();
    var title = $(this).attr('title').toLowerCase(); //this changed
    var url = $(this).attr('href');  //this changed
      if (title.length != 0) {
          $('#test').text(title + ": " + url);
 } 
```

# javascript - 在谷歌地图创建期间获取国家名称

> ID：14315196
> 
> 赞同：0
> 
> 时间：2013-01-14T08:37:07.840
> 
> 标签：javascript, google-maps

在创建谷歌地图时获取国家名称以实时更新国家名称字段的最佳方法是什么？

我用这段代码创建了我的谷歌地图：

```
function createMap(address,distance){
        address=$("#settingMeetingPrefs_meeting_city").val();
        distance=$("#settingMeetingPrefs_meeting_distance").val();

    var geocoder = new google.maps.Geocoder();

            if (address == null)
                var address =  "{{city}}";
            else
                var address = address;

             if (distance==null)
                    distance= "{{distance}}";

            geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {

                            var latitude = results[0].geometry.location.lat();
                            var longitude = results[0].geometry.location.lng();

                            var latlng = new google.maps.LatLng(latitude, longitude);
            var myOptions = {
                zoom: 7,
                center: latlng,
                scrollwheel: false,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

                            var marker = new google.maps.Marker({
                position: latlng,
                map: map
            });

                            // Add circle overlay and bind to marker
                            var circle = new google.maps.Circle({
                            map: map,
                            radius: distance * 1000 ,
//                              radius: document.getElementById('distance').value * 1000 ,    // 10 miles in metres
                            fillColor: '#0000FF'
                            });
                            circle.bindTo('center', marker, 'position');

                                 }
                            }); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:40:48.447

The country is stored in the geocoding result **address component**. To get the country you could do something like this

```
while (i<results[0].address_components.length){
  if(results[0].address_components[i].types[0]=='country'){
  console.log(results[0].address_components[i].short_name);
}

i++;

}//end while 
```

more info here [Geocoding Strategies](https://developers.google.com/maps/articles/geocodestrat#client)

# java - Java 泛型 - 我在这里做错了什么？

> ID：14315200
> 
> 赞同：0
> 
> 时间：2013-01-14T08:37:33.150
> 
> 标签：java, generics

谁能告诉我为什么看跌期权给了我一个错误？

```
static HashMap<Class, ? extends BaseSystem> systems;

public <T extends BaseSystem> EntityManager()//constructor
{
    systems=new HashMap<Class, T>();
} 

public static <T extends BaseSystem> void addSystem(Class c, T system)//store a system for later reference
{
    systems.put(c, system);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T08:44:38.240

最可能的问题是第一种方法中的 T 和第二种方法中的 T 不会自动被认为是相同的。在其他作品中，您有两种不同的类型，它们都扩展了 BaseSystem 但可能不相关。

您需要在类上定义一次 T 并一致地使用它，或者只使用 BaseSystem 而不使用泛型。

顺便说一句：在更基本的层面上，不要混淆静态初始化和实例初始化。如果您在构造函数中设置静态字段，则存在设计问题。

`T`类和系统之间有什么关系吗？

# ios - 将证书添加到钥匙串并生成 .p12 文件格式

> ID：14315205
> 
> 赞同：6
> 
> 时间：2013-01-14T08:37:52.000
> 
> 标签：ios, objective-c, apple-push-notifications, apns-sharp

我正在按照[https://github.com/Redth/PushSharp/wiki/How-to-Configure-&-Send-Apple-Push-Notifications-using-PushSharp](https://github.com/Redth/PushSharp/wiki/How-to-Configure-&-Send-Apple-Push-Notifications-using-PushSharp)中给出的步骤逐步为 Apple Push Notifications 工作.

我被卡在了中间。我添加了 Apple 推送通知开发证书。但证书出现在 SYSTEM/Certificates 而不是 LOGIN/Certificates 部分下。可能是由于这个，也可能不是，当我尝试将文件保存为 p12 格式时，我没有得到另存为 .p12 文件格式选项，如步骤 19 中所述。我还尝试生成证书而不检查让我指定的密钥对链步骤 10 中说明的信息。

任何人都可以建议我如何在密钥链中的登录/证书下制作 aps-development.cer，然后继续执行给定的步骤以获取 .p12 文件吗？

提前感谢您的帮助和支持。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-14T08:47:26.607

请尝试以下三个步骤

第 1 步：打开您的钥匙串访问应用程序。

第 2 步：您将在左侧看到“登录”、“系统”和“系统根目录”列表，只需将您的证书拖到“登录”选项中即可。

第 3 步：您将在 Keychain Access 中成功安装证书。

在此过程之后，您可以创建 .p12 证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-10T05:51:47.617

**逐步说明如何下载证书和生成 .p12**

您需要有效的证书才能生成 .p12 文件。步骤 1-3 描述了从 Apple 开发者帐户下载有效证书的步骤。步骤 4-8 描述如何使用此证书生成 .p12 文件。

1.  登录到 DEVELOPER.APPLE.COM
2.  （从左侧菜单）转到“证书、ID 和配置文件”或（从主面板）单击“证书、标识符和配置文件”
3.  （从左侧菜单）单击证书类型，即生产 -> 单击证书名称以展开更多选项 -> 单击“下载”
4.  （从 mac 菜单）转到实用程序 -> 钥匙串
5.  （从钥匙串的顶部菜单）转到钥匙串访问
6.  打开下载证书的位置并双击它（这应该会在 Key Chan Access 证书列表中自动生成新记录）
7.  （从 Key Chain Access 证书列表中）右键单击新创建的证书记录并选择“导出...”
8.  将文件另存为 .p12

# erlang - 如何在使用 rebar 运行 eunit 测试之前启动 lager

> ID：14315207
> 
> 赞同：3
> 
> 时间：2013-01-14T08:37:57.863
> 
> 标签：erlang, rebar, eunit

我想在执行`lager`任何`eunit`测试之前开始，以便在测试实际运行时可以看到日志（我将日志用于调试目的）。

但是我有数百个测试（分布在多个应用程序和模块中），我不想检查每一个测试并放在`lager:start()`开头，所以我想知道是否有办法在执行之前告诉`rebar`（或`eunit`）执行测试？`lager:start()``eunit`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:42:41.760

我认为您可以使用像“-s lager”这样的 erl 参数，并通过以下帖子中描述的方法传递它。

[运行 rebar eunit 时将运行时参数传递给 erlang](https://stackoverflow.com/questions/10307575/passing-runtime-arguments-to-erlang-when-running-rebar-eunit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T20:19:06.517

（我知道这不是一个完整的答案，但我同意 Svetlin 的观点，应该有一个更优雅的方法......我将提供这个作为对 Petr 答案的增量改进）

如果你使用带有 rebar 的 Makefile，你可以修改 make 目标来设置这个环境变量，它会是这样的：

$ 进行测试

或者

$ 本地测试

这个目标看起来像：

```
test:
        ERL_AFLAGS="-s lager" 
        $(REBAR) skip_deps=true eunit 
```

# python - 如何在Python中使用特定关键字删除一行之后的后续行

> ID：14315208
> 
> 赞同：0
> 
> 时间：2013-01-14T08:38:01.110
> 
> 标签：python, text, file-io

在找到带有关键字“banana”的特定行后，我想删除后续行，在本例中为“berry”。

样本.txt

```
orange
apple
banana
berry
melon 
```

然而，我的脚本删除的是“banana”而不是“berry”……为什么？

```
import fileinput

filename = r"C:\sample.txt"
for linenum,line in enumerate(fileinput.FileInput(filename, inplace=1)):
    if "banana" in line:
        counter = linenum + 1
        if linenum == counter:
            line.strip()
    else:
        print line, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:54:34.157

像这样做：

```
import fileinput

fin = fileinput.input('/home/jon/text.txt', inplace=1)
for line in fin:
    print line,
    if line.strip() == 'banana':
        next(fin, None) # as suggested by @thg435 doesn't hurt to use default to avoid StopIteration (as next iteration will just be a no-op anyway) 
```

这利用了迭代`fin`对象的优势，因此它看不到下一行 - 这意味着您不必担心设置/取消设置标志......（这可能导致错误）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T08:47:25.357

像这样的东西：

```
flag = False
with open("C:\sample.txt") as in_f:
    for line in in_f:
        if flag: # previous line have "banana", so skip this line
            flag = False
            continue
        if "banana" in line: # set flag to skip line
            flag = True
        print line 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T08:54:34.750

请试试这个

```
filename = r"sample.txt"
counter = -1
for linenum,line in enumerate(fileinput.FileInput(filename, inplace=1)):
    if "banana" in line:
        counter = linenum + 1
    if linenum == counter:
        line.strip()
    else:
        print line, 
```

# android - 如何从资产文件夹android在webview中显示PDF

> ID：14315213
> 
> 赞同：2
> 
> 时间：2013-01-14T08:38:15.633
> 
> 标签：android, pdf, webview

我为这个解决方案上网了很多，但在任何地方我都得到了相同的解决方案，即要么使用 Intent 并将其传递给默认/安装的 PdfReader 应用程序，另一种是使用 googleDocs 中的 gview 在线加载 Pdfs。

但我的问题是如何在 webview 中离线查看我的 pdf，即如果用户单击我的应用程序中的 pdf 列表，则不要转到其他应用程序或 google/gview 。

我尝试传递资产文件夹路径，但无法在 webview 中收到“网页暂时关闭或永久移动”的消息。

我也试过这个链接..它描述了使用 pdfViewver.jar 但那个库。有它自己的问题需要解决。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T12:07:20.030

> 但我的问题是如何在 webview 中离线查看我的 pdf

你不能。`WebView`无法单独显示 PDF。

# unicode - 中文 <-> 英文翻译数据库/字符含义

> ID：14315214
> 
> 赞同：2
> 
> 时间：2013-01-14T08:38:16.693
> 
> 标签：unicode, translation

我正计划开发一个网络应用程序，它将使用一种新颖的方式来帮助人们学习汉字并记住它们的含义。

由于我不想/不能花费数年时间手动翻译所有汉字，我想知道是否有一个（最好是开源的）数据库（任何形式的）提供这个，即汉字<->英文翻译。

欢迎任何想法/评论。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:40:26.167

是的 - 看看 Cedict - [http://www.mdbg.net/chindict/chindict.php?page=cedict](http://www.mdbg.net/chindict/chindict.php?page=cedict)

# python - 玛雅地方方向

> ID：14315215
> 
> 赞同：0
> 
> 时间：2013-01-14T08:38:17.397
> 
> 标签：python, expression, nodes, maya

我想要实现的基本上是连接到车轮的 Maya 中的本地平移，例如：在 LOCAL Z 方向上向前移动汽车，无论应用什么旋转，车轮都会以相同的速度旋转，我已经接近了，这个这就是我所做的！

1.  将驱动程序的parentInverseMatrix和worldInverseMatrix连接成一个multMatrix节点。
2.  将 multMatrix 节点的输出连接到分解矩阵节点。
3.  将分解矩阵节点的 outputTranslateZ 连接到驱动对象rotationY。这确实有效！唯一的问题是由于某种原因，当我旋转驱动器时，它会旋转驱动器，但这对我来说没有多大意义，你知道这里发生了什么或者我可以如何解决它吗？

矩阵：[https ://www.dropbox.com/s/udkevskv41ruz01/matrixTest.mb](https://www.dropbox.com/s/udkevskv41ruz01/matrixTest.mb)

表达方式：[https ://www.dropbox.com/s/q7xikbw4csx8uz4/wheel.ma](https://www.dropbox.com/s/q7xikbw4csx8uz4/wheel.ma)

# android - 无法使用 libzip 和 FreeType 直接从 ZIP 加载 TTF 文件

> ID：14315222
> 
> 赞同：7
> 
> 时间：2013-01-14T08:38:55.680
> 
> 标签：android, c++, io, zip, freetype2

我正在尝试使用[libzip](http://www.nih.at/libzip/)和[FreeType](http://www.freetype.org/)直接从 ZIP 存档加载 TTF 文件。

特别是，我正在使用[FT_Open_Face](http://www.freetype.org/freetype2/docs/reference/ft2-base_interface.html#FT_Open_Face)函数，该函数可以从自定义读取/关闭函数（`ft_zip_read`和`ft_zip_close`）中读取。但是，尽管文件显然已完全读取，但`FT_Open_Face`返回`FT_Err_Unknown_File_Format`. 直接从磁盘打开相同的文件可以正常工作。

我真的不知道如何调试这个，有人可以帮忙吗？

我现在唯一能想到的问题是我的`ft_zip_read`功能不支持搜索，文档[说](http://www.freetype.org/freetype2/docs/reference/ft2-system_interface.html#FT_Stream_IoFunc)：

> 可以调用此函数来执行“计数”为 0 的查找或跳过操作。非零返回值表示错误。

它确实被count 0调用了几次，但我看不到任何用libzip进行搜索的方法。

```
unsigned long ft_zip_read(FT_Stream stream, unsigned long offset,
                          unsigned char* buffer, unsigned long count)
{
    zip_file* file = static_cast<zip_file*>(stream->descriptor.pointer);
    return zip_fread(file, buffer + offset, count);
}

void ft_zip_close(FT_Stream stream)
{
    zip_file* file = static_cast<zip_file*>(stream->descriptor.pointer);
    zip_fclose(file);
}

FT_Face load_zipped_face(const std::string& name, unsigned int size,
                         const std::string& zip_path)
{
    FT_Library library;
    FT_Error error = FT_Init_FreeType(&library);
    if (error)
        throw freetype_error_string("Failed to initialise FreeType", error);

    int zip_error;
    zip* zip = zip_open(zip_path.c_str(), 0, &zip_error);
    if (!zip) {
        std::ostringstream message_stream;
        message_stream << "Error loading ZIP (" << zip_path <<  "): "
                       << zip_error;
        throw message_stream.str();
    }

    std::string face_path = name + ".ttf";

    struct zip_stat stat;
    if (zip_stat(zip, face_path.c_str(), 0, &stat))
        throw std::string("zip_stat failed");

    zip_file* file = zip_fopen(zip, face_path.c_str(), 0);
    if (file == 0)
        throw face_path + ": " + strerror(errno);

    FT_StreamDesc descriptor;
    descriptor.pointer = file;

    FT_StreamRec* stream = new FT_StreamRec;
    stream->base = 0;
    stream->size = stat.size;
    stream->descriptor = descriptor;
    stream->read = &ft_zip_read;
    stream->close = &ft_zip_close;

    FT_Open_Args open_args;
    open_args.flags = FT_OPEN_STREAM;
    open_args.stream = stream;

    FT_Face face;
    error = FT_Open_Face(library, &open_args, 0, &face);

    zip_close(zip);

    if (error == FT_Err_Unknown_File_Format)
        throw std::string("Unsupported format");
    else if (error)
        throw freetype_error_string("Unknown error loading font", error);

    error = FT_Set_Pixel_Sizes(face, 0, size);
    if (error)
        throw freetype_error_string("Unable to set pixel sizes", error);

    return face;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T13:33:56.347

## 寻求真相

为了能够在压缩数据流中查找，您需要将流解压缩到您希望查找的点（存在一些例外情况，例如具有重置标记和索引的流只需要从前一个标记开始解压缩）。如果经常这样做，这只是效率低下（更不用说您需要自己编写代码）。

现在考虑一下，您不想将整个面部加载到内存中并为字体文件使用自定义 IO 的唯一原因是它是否太大而无法保存在内存中；这样就使得 FT 的流 IO 接口必须寻找。

## 你能做什么？

**如果文件足够小：**将其全部读入内存并用于`FT_New_Memory_Face`从内存中加载人脸。

**如果文件太大**以至于您不想一次将整个面部都放在内存中，请将字体文件提取到临时文件并从中读取。（使用 windows/unix/cstdio 临时文件 API 有一个表现良好的临时文件）

**如果以上都不适合您，**那么您可以在 libzip 之上实现自己的缓存和可搜索的 zip 流，并将其传递给 FT。这可能很麻烦并且涉及一些工作，所以我会亲自与另外两个中的一个一起去:)

# http - 禁用 HTTP 服务器响应的分块编码

> ID：14315224
> 
> 赞同：5
> 
> 时间：2013-01-14T08:39:01.860
> 
> 标签：http, encoding, go

我正在使用 net/http 包在 GO 中编写一个小型实验性 http 服务器，我需要所有回复都具有“身份”传输编码。然而，GO 中的 http 服务器总是使用“分块”传输返回响应。有没有办法在 GO 中禁用 HTTP 服务器上的分块编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:50:17.810

我不清楚在规范下使用“Transfer-Encoding：identity”响应是否有效（我想也许你应该把它排除在外），但是......

检查[这里](http://golang.org/src/pkg/net/http/server.go)的代码，我在 WriteHeader(code int) 函数中看到了这一点（这有点奇怪，但这个函数实际上将所有标头刷新到套接字）：

```
367     } else if hasCL {
368         w.contentLength = contentLength
369         w.header.Del("Transfer-Encoding")
370     } else if w.req.ProtoAtLeast(1, 1) {
371         // HTTP/1.1 or greater: use chunked transfer encoding
372         // to avoid closing the connection at EOF.
373         // TODO: this blows away any custom or stacked Transfer-Encoding they
374         // might have set.  Deal with that as need arises once we have a valid
375         // use case.
376         w.chunking = true
377         w.header.Set("Transfer-Encoding", "chunked")
378     } else { 
```

我相信上面第一行中的“hasCL”是指有可用的内容长度。如果可用，则完全删除“Transfer-Encoding”标头，否则，如果版本为 1.1 或更高版本，则将“Transfer-Encoding”设置为分块。因为这是在将其写入套接字之前完成的，所以我认为您目前没有任何方法可以更改它。

# r - R图中的边界

> ID：14315229
> 
> 赞同：4
> 
> 时间：2013-01-14T08:39:14.900
> 
> 标签：r, plot, border

对于下面给出的示例，我如何绘制虚线之间的区域？

这是代码：

```
X <- rnorm(100)
Y<- X + rnorm(100)
reg<-lm(Y~X)

 CI <- predict(reg,interval="confidence")
 F <- CI[,1]
  L <- CI[,2]
 U <- CI[,3]

 plot(X,F)
 abline(reg, col="red")
 reg2<-lm(L~X)
 abline(reg2, col="red", lty="dashed")
 reg3<-lm(U~X)
 abline(reg3, col="red", lty="dashed") 
```

这是输出

![在此处输入图像描述](../Images/f9b26c2e950d4e7e52ddd15fbc26771c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:32:28.080

似乎它应该是重复的，但我在 SO 搜索中找不到它。我知道它在 rhelp 上出现过很多次。但有一个幸运：

```
require(fortunes)
 fortune("every question")

Lastly, by what we could call the 'Liaw-Baron principle', every question that can be 
asked has in fact  already been asked.
   -- Dirk Eddelbuettel (citing Andy Liaw's and Jonathan Baron's opinion on unique 
            questions on R-help)
      R-help (January 2006)

polygon(x= c(X[order(X)],    rev(X[order(X)]) ), # both x and y  go "out" in order; 
          y=c(L[order(X)], rev(U[order(X)])),  # and then come "back in reverse order
             col=rgb(1,0,0,0.3) )    # transparent pink.

> plot(X,Y, pch="+")
> abline(reg, col="red")
> polygon(x= c(X\[order(X)\], rev(X\[order(X)\]) ), y=c(L\[order(X)\],rev(U\[order(X)\])), col=rgb(1,0,0,0.3) ) 
```

![在此处输入图像描述](../Images/6a612e82296ca7a00bc285503e6a359d.png)

# c# - 如何在文本框中只写一次字符？

> ID：14315232
> 
> 赞同：1
> 
> 时间：2013-01-14T08:39:34.887
> 
> 标签：c#, textbox, character

我正在制作一个文本框来输入一些`Product`价格，我不希望用户输入`"."`不止一次。`"."`不能是第一个字符（我知道该怎么做）。但我需要让文本框接受这个字符“。” 不超过一次。如何 ？不，我不想使用`MaskedTextBox`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:42:48.817

把它放在`KeyPress`你的文本框中的事件中。

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
    string inputChar = e.KeyChar.ToString();
    if (inputChar == ".")
    {
        if (textBox1.Text.Trim().Length == 0)
        {
            e.Handled = true;
            return;
        }

        if (textBox1.Text.Contains("."))
        {
            e.Handled = true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:43:15.653

尝试这个

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
  if (textBox1.Text.IndexOf('.') != textBox1.Text.LastIndexOf('.'))
  {
     MessageBox.Show("More than once, not allowed");
     textBox1.Text = textBox1.Text.Substring(0, textBox1.Text.Length - 1);
  }
} 
```

# mysql - 升级时如何保存旧版本的 Linux 应用程序（例如 MySQL）以防出现问题？

> ID：14315237
> 
> 赞同：0
> 
> 时间：2013-01-14T08:39:53.167
> 
> 标签：mysql, upgrade

我在 Ubuntu 机器上有 MySQL 5.1，想升级到 5.5。但万一出现任何问题，最好在某个地方保留旧版本。

[该页面](http://dev.mysql.com/doc/refman/5.5/en/upgrading.html)指出：

> 如果您对使用新版本持谨慎态度，您始终可以在安装新的 mysqld 之前重命名旧的 mysqld。例如，如果您使用的是 MySQL 5.1 版本并且想要升级到 5.5，请将当前服务器从**mysqld**重命名为**mysqld-5.1**。如果您的新 mysqld 出现意外情况，您只需将其关闭并使用旧 mysqld 重新启动即可。

我是否应该这样做：

$ cd /user/sbin/ $ mv mysqld mysqld-5.1

或者这个？

$ cp mysqld mysqld-5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:59:40.930

I like to use symbolic links for *all* version able artefacts, both executables and deployables.

In the path I use .../mysql/current/bin and link the corresponding dir from the actual install through it.

# arrays - 将 AS3 向量用于类实例是否明智？

> ID：14315239
> 
> 赞同：1
> 
> 时间：2013-01-14T08:39:58.940
> 
> 标签：arrays, performance, actionscript-3, vector

这是一个简单的代码：

```
var a:Array = new Array( ins0, ins1, ins2, ins3,...., ins10000) ;
findIns( ins1500) ;

function findIns( ins:SomeInstance ) {  
    for ( var i = 0 ; i< a.length ; i++)  {
        if ( a[i] == ins ) {
            trace ( "FOUND IT");
            break; 
        }
    }
} 
```

在上面的代码中没有“int”或“string”。它们是一些复杂类的实例。那么在这种情况下使用向量代替数组是否明智。

在我看来，这应该是明智的，因为实例毕竟是“数字内存位置”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:43:37.023

如果数组的内容都是同一个类的实例，那么 yes`Vector`肯定会比`Array`.

有关更多信息，请参阅文档：

*   性能：使用 Vector 实例时数组元素访问和迭代比使用 Array 时快得多。

*   类型安全：在严格模式下，编译器可以识别数据类型错误。数据类型错误的示例包括将不正确数据类型的值分配给 Vector 或在从 Vector 读取值时期望错误的数据类型。但是请注意，当使用 push() 方法或 unshift() 方法向 Vector 添加值时，不会在编译时检查参数的数据类型。相反，它们会在运行时进行检查。

*   可靠性：运行时范围检查（或固定长度检查）显着提高了数组的可靠性。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:59:54.910

是的你是对的。存储在向量中的是对对象的引用，而不是对象本身。您可以检查是否执行以下操作：

```
var ref:yourType = a[0];
a[0] = someOtherObjectInstance;
trace(ref.toString()); 
```

你会发现它`ref`仍然指向你原来的对象。

# asp.net - 如何在 web.config 中的 Framework 4 上使用 ScriptModule？

> ID：14315246
> 
> 赞同：2
> 
> 时间：2013-01-14T08:40:28.190
> 
> 标签：asp.net, jquery, web-config

我想将 ASP.NET 与 jquery ajax post 一起使用，这需要将以下内容添加到 web.config：

```
<httpModules>           
     <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/> 
</httpModules> 
```

当我使用框架 4.0 将其添加到应用程序的 web.config 时，应用程序无法正常工作，并且出现 500 - 内部服务器错误，当我删除应用程序上方的代码时，应用程序运行良好。

有什么我想念的吗（添加参考或其他东西）？！！！

# c++ - 函数“atomic_add_32_nv”必须有原型

> ID：14315253
> 
> 赞同：1
> 
> 时间：2013-01-14T08:40:55.743
> 
> 标签：c++

C++ 比较了我的功能。

在“solaris 5.10”中，一切正常！但是在“solaris 5.9”中，如果我没有原型，它会给我错误“函数“atomic_add_32_nv”必须有原型。”

请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:06:39.847

`<atomic.h>`据我记得，原子函数支持（通过）是在 Solaris 10 中添加的。谷歌搜索“solaris 10 atomic operations”似乎通过各种点击来支持这一点。

在 Solaris 9 上，您要么需要使用互斥锁（这比原子操作慢得多；但对您的应用程序可能无关紧要）提供包装器，要么使用汇编器实现这些功能（每个处理器/架构 x86/sparc，您需要支持）。

您还可以看看常见的开源项目（例如 apache httpd、boost）是如何做到这一点并从那里开始的。

有关相关讨论，请参阅[此](https://stackoverflow.com/q/7784128/21567)SO 主题。

# c++ - 来自 OSX 应用程序的 Mkdir

> ID：14315255
> 
> 赞同：1
> 
> 时间：2013-01-14T08:41:03.830
> 
> 标签：c++, macos, osx-snow-leopard

我是 OSX 开发的新手，我需要你的帮助。

我正在尝试使用我用 C++ 编写的 OSX 应用程序中的 mkdir 在 /private/var/tmp 上创建文件夹。我在 OSX 10.6 上使用 XCode 3.2.6。该命令运行良好。该文件夹在路径 /private/var/tmp 中创建。

这就是我在应用程序中所做的：`mkdir(my_path, 0777);`

但是我的文件夹权限有问题。用户可以修改文件夹（在里面创建另一个文件夹等），但不能修改“everyone”或“wheel”。

![在此处输入图像描述](../Images/f8ef23d3ac5ef992de51c43e8a22548a.png)

翻译 ：

*   莫伊->我
*   Lecture et écriture -> 读写
*   Lecture seulement -> 只读

我尝试从终端创建文件夹，我输入 mkdir -m 777 /private/var/tmp/ **test**并且文件夹**test**具有良好的权限：

![在此处输入图像描述](../Images/9c6fbfa1ab4c3651e6feb588212ce442.png)

翻译 ：

*   莫伊->我
*   Lecture et écriture -> 读写

我的问题是，我怎样才能对文件夹和我的 OSX 应用程序进行写权限。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:04:22.813

根据[SUIS](http://pubs.opengroup.org/onlinepubs/009695399/functions/mkdir.html)

> mkdir() 函数将创建一个名为 path 的新目录。新目录的文件权限位应从 mode 初始化。**mode 参数的这些文件权限位应由进程的文件创建掩码修改。**

原因是为您的系统定义的默认[umask 。](http://en.wikipedia.org/wiki/Umask)

因此，您只需在调用 mkdir 或调用[chown之前从进程中更新](http://pubs.opengroup.org/onlinepubs/000095399/functions/chown.html)[umask](http://pubs.opengroup.org/onlinepubs/009695399/functions/umask.html)即可更新已创建文件夹的属性。

# windows - _IMAGE_DOS_HEADER 符号未找到

> ID：14315257
> 
> 赞同：1
> 
> 时间：2013-01-14T08:41:25.040
> 
> 标签：windows, debugging, windbg

我最近在 Vmware 的 Windows 7 中安装了 windbg .. 安装了 Windows SDK 和 Windows 符号。

但是当我在 windbg 中打开可执行文件“notepad.exe”并运行以下 dt _IMAGE_DOS_HEADER 命令时，它仍然显示未找到符号。

我已经设置了 PATH _NT_SYMBOL_PATH=SMVSRV*c:\Symbols*http://msdl.microsoft.com/download/symbols

在 Windows XP 上尝试了同样的方法......同样的问题..

请指教。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:03:49.560

将其设置为**srv*** *http://msdl.microsoft.com/download/symbols。尽管文档在说什么，前缀**symsrv**对我不起作用，而**srv**可以：

```
 0:000> .sympath srv**http://msdl.microsoft.com/download/symbols
Symbol search path is: srv**http://msdl.microsoft.com/download/symbols
Expanded Symbol search path is: srv**http://msdl.microsoft.com/download/symbols
0:000> .reload
Reloading current modules
...................
0:000> dt _IMAGE_DOS_HEADER
ntdll!_IMAGE_DOS_HEADER
   +0x000 e_magic          : Uint2B
   +0x002 e_cblp           : Uint2B
   +0x004 e_cp             : Uint2B
   +0x006 e_crlc           : Uint2B
   +0x008 e_cparhdr        : Uint2B
   +0x00a e_minalloc       : Uint2B
   +0x00c e_maxalloc       : Uint2B
   +0x00e e_ss             : Uint2B
   +0x010 e_sp             : Uint2B
   +0x012 e_csum           : Uint2B
   +0x014 e_ip             : Uint2B
   +0x016 e_cs             : Uint2B
   +0x018 e_lfarlc         : Uint2B
   +0x01a e_ovno           : Uint2B
   +0x01c e_res            : [4] Uint2B
   +0x024 e_oemid          : Uint2B
   +0x026 e_oeminfo        : Uint2B
   +0x028 e_res2           : [10] Uint2B
   +0x03c e_lfanew         : Int4B
0:000> 
```

# asp.net-mvc - 为什么我的 MVC 4 授权检查会引发异常？

> ID：14315259
> 
> 赞同：1
> 
> 时间：2013-01-14T08:41:46.693
> 
> 标签：asp.net-mvc, asp.net-mvc-4, forms-authentication

我正在使用带有 SQL Server Express 2012 的 Visual Studio 2012。我使用“Internet 应用程序”模板创建了一个 MVC 4 Web 应用程序。

我想在我的 SQL Server 2012 Express 实例上使用现有数据库（而不是模板的 MDF）。我已修改我的 web.config 以指向我的本地 SQL express 实例，并删除了模板生成的 MDF。我的 Web.Config 有：

```
<add name="DefaultConnection" 
    connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=Administration;Integrated Security=SSPI;" providerName="System.Data.SqlClient"/> 
```

股票会员代码有一个初始化数据库的调用：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

一旦应用程序启动，这些表就会在管理数据库中创建，正如我所期望的那样。我可以创建用户并在管理中填充它们。我可以通过代码填充角色表并将角色添加到用户的配置文件并验证它是否已完成。例如：

```
Roles.GetRolesForUser("kristian"); // = string[] { "Administrator" } 
```

但是，如果我尝试使用基于角色的授权，例如：

```
[Authorize(Roles = "Administrator")] 
```

我得到以下异常：

```
Failed to generate a user instance of SQL Server due to a failure in starting the process for the user instance. The connection will be closed. 
```

它给出了一个很长的讨厌的堆栈跟踪，让我觉得它仍在尝试创建一个 MDF 文件：

[SqlException (0x80131904)：由于启动用户实例的进程失败，无法生成 SQL Server 的用户实例。连接将被关闭。] System.Data.SqlClient.SqlInternalConnection.OnError(SqlException 异常, Boolean breakConnection, Action `1 wrapCloseInAction) +5295167 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +242 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) +1682 System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +69 System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) +30 System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover) +317 System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout) +889 System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance) +307 System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions) +434 System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions) +5309659 System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions) +38 System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection) +5311874 System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory , TaskCompletionSource `1 retry, DbConnectionOptions userOptions) +143 System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 次重试) +83 System.Data.SqlClient.SqlConnection.Open() +96 System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trust, String connectionString) +76

[HttpException (0x80004005): 无法连接到 SQL Server 数据库。] System.Web.Management.SqlServices.GetSqlConnection(String server, String user, String password, Boolean trust, String connectionString) +131 System.Web.Management.SqlServices。 SetupApplicationServices（字符串服务器，字符串用户，字符串密码，布尔信任，字符串连接字符串，字符串数据库，字符串 dbFileName，SqlFeatures 功能，布尔安装）+89 System.Web.Management.SqlServices.Install（字符串数据库，字符串 dbFileName，字符串连接字符串） +27 System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile（字符串 fullFileName，字符串 dataDir，字符串 connectionString）+386

这个快乐捆绑底部的行让我认为它与现在删除的 MDF（'System.Web.DataAccess.SqlConnectionHelper.CreateMdfFile'）有关。我在这方面是正确的吗？还是模板实现的授权不完整？

如果其他人已经处理过这个问题或者知道我的属性使用失败的原因，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:01:55.993

我有同样的问题。它似乎与未正确初始化 SimpleMembership 有关。尝试确保`[InitializeSimpleMembership]`使用或直接调用`Database.SetInitializer<UsersContext>(null);`

# mysql - Mysql 查询 rand() 和 order by

> ID：14315261
> 
> 赞同：1
> 
> 时间：2013-01-14T08:41:58.190
> 
> 标签：mysql, sql, random, sql-order-by

嗨，我正在尝试获取按位置 ASC 排序的一些随机结果。

这是我的查询：

```
SELECT `location`, `route`
FROM (`foo`)
WHERE `location` != ''
ORDER BY  RAND(), `location` ASC
LIMIT 8 
```

问题是它随机获取但不按“位置”ASC排序，如果我这样做：

```
SELECT `location`, `route`
FROM (`foo`)
WHERE `location` != ''
ORDER BY  `location` ASC,RAND()
LIMIT 8 
```

它不是随机的。

我怎样才能同时获得`RAND()`和`ORDER BY location ASC` ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:45:32.803

您需要嵌套语句/查询：

```
SELECT *
FROM (
    SELECT `location`, `route`
    FROM `foo`
    WHERE `location` != ''
    ORDER BY RAND()
    LIMIT 8) AS `temp`
ORDER BY `location` ASC; 
```

# css - 元素不会显示内联块

> ID：14315266
> 
> 赞同：0
> 
> 时间：2013-01-14T08:42:13.780
> 
> 标签：css, erb

我正在尝试将我的网站徽标和水平导航元素并排放置，有点像这样：[http ://colorgrade.it/](http://colorgrade.it/)

出于某种原因，它仍然显示块，并且查看 Chrome 的 javascript 控制台显示导航元素具有属性 display:block，这似乎可以解释问题。

但是，我在我的 css 中找不到导致这种情况的位置。构成该属性的元素是 ul、menu 和 dir

在文件中搜索块返回

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
article, aside, details, figcaption, figure, 
footer, header, hgroup, section {
  display: block;
} 
```

我还尝试将 inline-block 添加到导航元素本身：

```
<%= render :partial => 'layouts/navigation' , :style=>"display:inline-block;"%> 
```

导航元素如下所示：

```
<ul id="navigation">
  <li>several li elements</li>
</ul> 
```

有人可以解释为什么这两个元素没有并排对齐吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:51:53.407

您不能将参数传递`style`给`render`，您需要在导航部分中应用样式选项（查找类似的内容`navigation.html.erb`）

但是，我建议不要在您的 html 中使用样式属性，除非您真的必须这样做。在你的情况下，在你的样式表中使用 css （看看`application.sass`你是否使用 sass 或者`application.css`会做得很好。

如果您需要进一步的建议，请发布您的导航的 html 代码和您的 css 代码。

# vb.net - 在 vb.net 中运行已打开的进程

> ID：14315267
> 
> 赞同：0
> 
> 时间：2013-01-14T08:42:18.743
> 
> 标签：vb.net, visual-studio-2010, visual-studio, vb.net-2010

我有一个 Windows 窗体，只需单击一个按钮，即可运行一个进程（MATLAB）并执行一个文件。

```
 Dim myProcesses() As Process
    myProcesses = Process.GetProcessesByName("Matlab")
    If myProcesses.Count > 0 Then
        '~~~~ what goes here? ~~~~
    Else
        Dim startInfo As New ProcessStartInfo
        startInfo.FileName = "C:\Program Files\MATLAB\R2011b\bin\matlab.exe"
        startInfo.WorkingDirectory = MatlabDir    'MatlabDir is defined elsewhere
        startInfo.Arguments = "matlab.exe -r test_plot2"
        Process.Start(startInfo)
    End If 
```

如果 MATLAB 尚未打开，上述代码将打开 MATLAB 并执行脚本“test_plot2.m”。但是，如果 MATLAB 已经打开，并且我只想运行文件，我在第一个 IF 语句中应该写什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:50:53.040

它应该是一样的。我的意思是，它是否打开并不重要，除非应用程序（Matlab）管理不同的东西，那么你必须猜测如何。您是否尝试过使用相同的代码？

例子：

```
 Dim startInfo As New ProcessStartInfo
    startInfo.FileName = "notepad.exe"
    startInfo.Arguments = "C:\temp\test.txt"
    Process.Start(startInfo) 
```

您是否已经打开记事本并不重要。

# mysql - 我可以在两个表之间建立两个看似未实现的关联吗？

> ID：14315268
> 
> 赞同：0
> 
> 时间：2013-01-14T08:42:21.597
> 
> 标签：mysql, sql, database, cakephp

我正在开发一个简历应用程序，并`areas`使用 CakePHP Tree Behaviour 创建了一个表。在这张表中，我有一堆国家和城市。

该表的最初目的是允许用户指定他们对简历感兴趣的领域。这很简单，我已经创建了一个 HABTM 关系`users`来`areas`处理这个问题。

然而，接下来我需要做的是允许用户指定他们来自哪里。当然，我可以创建一个新表，与它相同`areas`并称其为不同的表，但这似乎有点浪费和低效。

所以，我想知道`users`表和`areas`表之间是否真的有可能有两个完全不同的关联？

换句话说，该`users`表将拥有并属于多`areas`（为了用户指定他们在世界上工作感兴趣的所有领域的目的）但它也将拥有一`area`（为了用户的目的）指定他们来自哪个国家）。

我无法开始想象如何根据 CakePHP 约定正确设置模型——或者尝试这样做是否是一个好主意——所以我将不胜感激任何人都可以提供的指点。

即使答案不是特定于 CakePHP 的，我也很高兴听到人们的意见，因为这更像是一个数据库问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:56:48.283

您可以指定任何您想要的关联。

例如在您的用户模型中：

```
/**
 * @see Model::$hasAndBelongsToMany
 */
    public $hasAndBelongsToMany = array(
        'Area' => array(
            'className' => 'Area',
            'joinTable' => 'user_areas',
            'foreignKey' => 'user_id',
            'associationForeignKey' => 'area_id',
        ),
    );

/**
 * @see Model::$hasOne
 */
    public $belongsTo = array(
        'Farea' => array(
            'className' => 'Area',
            'foreignKey' => 'farea_id',
        ),
    ); 
```

# linux - Cron 作业未在 Linux Mint 12 中运行

> ID：14315272
> 
> 赞同：0
> 
> 时间：2013-01-14T08:42:30.263
> 
> 标签：linux, cron

这是我的 crontab -e 文件的内容

```
#!/bin/bash
6 14 * * * /home/rishi/cront.sh 
```

此外，cront.sh 文件只有这个

```
mkdir foo 
```

自过去 2 天以来，我一直在努力完成这项工作。cront.sh 命令在从终端运行时有效。但是，在 crontab 中不起作用。

编辑

事实证明，只需使用 root 编辑 crontab -e 就可以了。没有什么需要做的了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:52:55.987

在 下`cron`，不能保证您的环境变量（最重要的是`PATH`）会正确设置。

尝试在 crontab 顶部添加这样的行：

```
PATH=/bin:/usr/bin:/sbin:/usr/sbin:/usr/local/bin 
```

此外，最好使用 mkdir 的完整路径：

```
mkdir /path/to/my/dir 
```

此外，确保您的 cront.sh 是可执行的也无妨：

```
chmod +x /home/rishi/cront.sh 
```

在那之后，它应该工作。

**编辑**

**调试 crontab 问题的通用方法**：

*   在要调试的脚本顶部，添加一行：

    ```
    set    # this should print all environment variables 
    ```

*   手动执行您的脚本，将输出重定向到某个日志文件1。

*   现在，将 crontab 编辑为如下所示：

    ```
    * * * * * /path/to/my/script 2>&1 > /path/to/log/file2 
    ```

确保日志文件对您的脚本是可写的。此外，请确保您的脚本设置了可执行位。

*   比较 log file1 和 log file2，密切关注 env。变量。如果它们不同，请使用您希望将它们设置为相同的任何方法。它可以在 中添加行`crontab`，或`export var=value`在您的脚本中使用。

*   在那之后，没有理由不能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:44:31.630

你不需要第一行

```
#!/bin/bash <--- remove this line
6 14 * * * /home/rishi/cront.sh 
```

你的脚本是可执行的吗？

如果不是。尝试在终端中运行以下命令。

```
 chmod +x /home/rishi/cront.sh 
```

带有注释字段的格式示例`crontab`如下：

```
# Minute   Hour   Day of Month       Month          Day of Week        Command    
# (0-59)  (0-23)     (1-31)    (1-12 or Jan-Dec)  (0-6 or Sun-Sat)                
    0        2          12             *               0,6           /your/path/yourscript.sh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T08:53:33.433

尝试

```
6 14 * * * sh /home/rishi/cront.sh 
```

或在 cront.sh 中添加第一行

```
#!/bin/bash 
```

或 chmod a+x /home/rishi/cront.sh

# list - Knockoutjs 列表中的列表选择绑定

> ID：14315279
> 
> 赞同：3
> 
> 时间：2013-01-14T08:42:51.907
> 
> 标签：list, knockout.js, selection

我见过很多这个问题的例子，但不是一个列表。这是我的代码：

```
<div>
<form>
    <p>You have asked for <span data-bind='text: gifts().length'>&nbsp;</span> gift(s)</p>
    <input id='giftname' type='text'/><button data-bind='click: createGift'>Add Gift</button>
    <table>
        <thead>
            <tr>
                <th>Gift name</th>
                <th>Pack</th>
                <th>Price</th>
                <th />
            </tr>
        </thead>
        <tbody data-bind='foreach: gifts'>
            <tr>
                <td><input data-bind='value: name' readonly='readonly'/></td>
                <td><select data-bind="options: packs,
                                        optionsText: 'pack',
                                        value: price" /></td>
                <td><input data-bind="value: price ? price.packprice : 'unknown'" readonly="readonly"/></td>
                <td><a href='#' data-bind='click: $root.removeGift'>Delete</a></td>
            </tr>
        </tbody>
    </table>
    <button data-bind='enable: gifts().length > 0' type='submit'>Submit</button>    
</form>
</div>
<script type="text/javascript">
    var GiftModel = function(gifts) {               
        var self = this;
        self.gifts = ko.observableArray(gifts);     
        self.addGift = function(gift) {
            var newGift = {
                name: gift.name,
                packs: gift.packs,
                price: gift.price
            };  

            self.gifts.push(newGift);           
        };

        self.removeGift = function(gift) {
            self.gifts.remove(gift);
        };

        self.createGift = function() {
            var gname = $('#giftname').val();
            //should be getting gift options from webservice
            var newGift = {name: gname, 
                            packs: [{pack:'Each', packprice: '2'}, {pack:'Dozen', packprice: '12'}], price: {pack:'', packprice: ''}};
            self.addGift(newGift);          
            $('#giftname').val('');
        };
    };

    var viewModel = new GiftModel([]);
    ko.applyBindings(viewModel);        
</script> 
```

当我添加礼物时，它会创建包选项。每包都有一定的价格。我的问题很简单。我将如何在下一列显示所选礼品系列的价格？抱歉，我刚接触 knockoutjs。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:06:29.260

如果您将其设为可观察，系统将在选择包裹后自动更新价格。我对您的代码进行了一些重构，现在它可以工作了：

```
<div>
  <form>
    <p>You have asked for <span data-bind='text: gifts().length'>&nbsp;</span> gift(s)</p>
    <input
    id='giftname' type='text' data-bind='value: giftName' />
    <button data-bind='click: createGift'>Add Gift</button>
    <table>
      <thead>
        <tr>
          <th>Gift name</th>
          <th>Pack</th>
          <th>Price</th>
          <th />
        </tr>
      </thead>
      <tbody data-bind='foreach: gifts'>
        <tr>
          <td>
            <input data-bind='value: name' readonly='readonly' />
          </td>
          <td>
            <select data-bind="options: packs,
                                        optionsText: 'pack',
                                        optionsValue: 'packprice',
                                        value: price" />
          </td>
          <td>
            <input data-bind="value: price() || 'unknown'" readonly="readonly"
            />
          </td>
          <td><a href='#' data-bind='click: $root.removeGift'>Delete</a>
          </td>
        </tr>
      </tbody>
    </table>
    <button data-bind='enable: gifts().length > 0' type='submit'>Submit</button>
  </form>
</div>

function GiftModel(name) {
  var self = this;

  self.name = ko.observable(name);
  self.price = ko.observable();
  self.packs = ko.observable([{
    pack: 'Each',
    packprice: '2'
  }, {
    pack: 'Dozen',
    packprice: '12'
  }]);
}

var ViewModel = function (gifts) {
  var self = this;

  self.gifts = ko.observableArray(gifts);
  self.giftName = ko.observable();

  self.removeGift = function (gift) {
    self.gifts.remove(gift);
  };

  self.createGift = function () {
    self.gifts.push(new GiftModel(self.giftName()));
  };
};

var viewModel = new ViewModel([]);
ko.applyBindings(viewModel); 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/pzJaH/](http://jsfiddle.net/vyshniakov/pzJaH/)

PS 如果您使用淘汰赛，请不要使用 jQuery 获取字段值。通过淘汰赛更容易做到这一点。

# php - 两个周期之间的标记逻辑

> ID：14315284
> 
> 赞同：1
> 
> 时间：2013-01-14T08:43:53.663
> 
> 标签：php, mysql

我有一个具有如下字段的标记表

```
id     markup      from_date        to_date 
  1     5          2013-01-20       2013-01-31
  2     10         2013-02-01       2013-01-20 
```

现在，如果我选择从 1 月 20 日到 2 月 5 日的日期，那么我应该得到平均加价

```
Ex-  20 jan to 24 Jan is 5 markup for 5 days
     and 25 jan 4 fen is 10 markup for 10 days 
```

所以平均加价我会得到 8.3%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:34:14.770

您的示例中的数据和计算有问题。

无论如何，这是一个[SQLFiddle 示例](http://sqlfiddle.com/#!2/3e2c0/15)

```
select sum(markup*days)/sum(days)
from
(
select Markup,
 LEAST
 ( DATEDIFF(to_date,from_date)+1,
   GREATEST(DATEDIFF('2013-02-05',from_date)+1,0),
   GREATEST(DATEDIFF(to_date,'2013-01-20')+1,0)
 ) days
from t
where from_date between '2013-01-20' and '2013-02-05'
      or 
      to_date between '2013-01-20' and '2013-02-05'
) t1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:00:10.520

尽管您的问题似乎几乎没有错误。

1.  为什么 from_date 一次小于，然后大于 to_date ？（使用 ABS 函数获取天数）

2.  假设您的平均值是总加价除以总天数。

这是可以为您提供所需响应的查询：

```
SELECT Sum(markup) / Sum(num_days) AS the_average
FROM   (SELECT id,
               markup,
               from_date,
               to_date,
               Abs (Timestampdiff(day, from_date, to_date)) AS num_days
        FROM   test) AS t; 
```

# windows-7 - 有没有人使用 mingw 4.72 在 Windows 32 位、mysis 上从源代码成功构建 qt 5.0.0？

> ID：14315285
> 
> 赞同：0
> 
> 时间：2013-01-14T08:43:55.933
> 
> 标签：windows-7, mingw, qt5, 32-bit

我已经用 C++ 编程了一段时间，但主要是控制台程序。我已经学习了几种数据结构、指针，并且我确信我有能力开发一些简单的软件。所以我决定下载 qt 并开始学习如何创建 UI，但问题是我有 mingw 4.72 并且 qt 5.0 抱怨它只适用于 win32API 3.13 版，而我的 mingw 安装有 3.17。所以我决定使用 mingw 4.72 从源代码构建 qt 5.0.0，但是我遇到了这样的编译器错误

```
c:/qt-everywhere-opensource-src-5.0.0/qtbase/qmake/library/qmakeevaluator.cpp: in
member function 'void QMakeEvaluator::loadDefaults()':
c:/qt-everywhere-opensource-src-5.0.0/qtbase/qmake/library/qmakeevaluator.cpp:968:43:  
error: cannot convert 'wchar_t*' to 'LPSTR {aka char*}' for argument '1' to 'BOOL 
GetComputerNameA(LPSTR, PDWORD)'
make.exe: *** [qmakeevaluator.o] Error 1 *** qtbase/configure exited with non-zero   
status.. 
```

所以我的问题是，有没有人使用 mingw 4.72 为 32 位 Windows 7 成功构建了稳定的 qt 5.0？我有所有的先决条件，perl、ruby 和 python....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:06:46.553

我决定使用 4.8.4 版本，并且配置进展顺利。尚未键入 mingw-make，因为我被告知需要一段时间才能完成。这里有一个很好的指南[http://wiki.batcom-it.net/index.php?title=Building_Qt_on_Windows_%28MinGW%29](http://wiki.batcom-it.net/index.php?title=Building_Qt_on_Windows_%28MinGW%29)。我希望它可以帮助某人...

# c# - 如何找到必填字段验证器

> ID：14315290
> 
> 赞同：0
> 
> 时间：2013-01-14T08:44:13.153
> 
> 标签：c#, asp.net, requiredfieldvalidator

我的页面上有一个`RequiredFieldValidator`文本框，并且想要启用或禁用 . 因为我想检查所需`Option`的内容是否`true`适用`RequiredFieldValidator`于该文本框。

```
<asp:TextBox ID="txtReference" runat="server" ></asp:TextBox> 
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="txtReference"
                                                                Display="None" ErrorMessage="Reference Should Not Blank !" ValidationGroup="Ac"></asp:RequiredFieldValidator>
                                                            <ajaxToolkit:ValidatorCalloutExtender ID="ValidatorCalloutExtender9" runat="server"
                                                                Enabled="True" TargetControlID="RequiredFieldValidator1">
                                                            </ajaxToolkit:ValidatorCalloutExtender>
                                                             <ajaxToolkit:AutoCompleteExtender ID="AutoCompleteExtender7" runat="server" CompletionInterval="100"
                                                                DelimiterCharacters="" EnableCaching="False" Enabled="True" FirstRowSelected="True"
                                                                MinimumPrefixLength="1" ServiceMethod="GetReference" ServicePath="" TargetControlID="txtReference">
                                                            </ajaxToolkit:AutoCompleteExtender> 
```

我尝试这样做但不起作用的代码

```
if (_clients.ReferenceRequired == true)
                {
                    RequiredFieldValidator1.Enabled = true;
                    AutoCompleteExtender7.Enabled = true;
                }
                else
                {
                    RequiredFieldValidator1.Enabled = false;
                    AutoCompleteExtender7.Enabled = false;
                } 
```

但这在我的页面上找不到我的控件，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:55:46.793

尝试将 ValidationGroup 设置为与页面上的正常值不同的值

```
 if (_clients.ReferenceRequired == true)
   {
        RequiredFieldValidator1.ValidationGroup = "Ac";
        AutoCompleteExtender7.ValidationGroup= "Ac";
    }
    else
    {
        RequiredFieldValidator1.ValidationGroup = "none";
        AutoCompleteExtender7.ValidationGroup = "none";
    } 
```

# java - 转换为 ScheduledThreadPoolExecutor

> ID：14315293
> 
> 赞同：5
> 
> 时间：2013-01-14T08:44:17.297
> 
> 标签：java, multithreading, swing, executorservice, event-dispatch-thread

我仍然是 Java 的初学者，所以我对线程和并发的了解不多。但是，由于 java.util.Timer 和 TimerTask 存在问题，我希望能够将 ScheduledThreadPoolExecutor 用作计时器。我对线程的创建非常感兴趣，并且知道我将在几周内了解它们。但是，如果可能的话，有人可以给我一个基本示例，说明如何将我当前使用 util.timer 的迷你测试程序转换为使用 ScheduledThreadPoolExecutor？

我想尽快完成这个例子，所以我没有太多时间来学习线程——不管我多么想。话虽如此，请包括您认为 Java 初学者应该了解的有关 ScheduledThreadPoolExecutor 的任何重要内容。

示例程序

我做了一个简单的小例子来代表我在一个更大的程序中遇到的问题。这个程序应该做的是允许用户按下一个按钮来启动一个计数器。然后，用户必须能够在她/他想要的时候停止和重新启动计数器。在较大的程序中，此计数器保持相等至关重要，因此我使用了 scheduleAtFixRate() 方法。同样重要的是初始延迟始终相同（在本例中为 0）。问题（我相信你会看到）是一旦定时器被取消，它就无法重新启动——我希望 ScheduledThreadPoolExecutor 能解决这个问题。

代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.TimerTask;
import java.util.Timer;

public class Tester extends JFrame {
    JButton push = new JButton("Push");
    static JTextArea textOut = new JTextArea();
    Timer timer = new Timer();
    boolean pushed = false;
    static int i = 1;

    public Tester() {
        super();
        add(push, BorderLayout.NORTH);
        add(textOut);
        push.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (!pushed) {
                    timer.scheduleAtFixedRate(new Task(), 0, 1000);
                    pushed = true;
                } else {
                    timer.cancel();
                    pushed = false;
                }
            }
        });
    }

    static class Task extends TimerTask {
        public void run() {
            textOut.setText("" + i++);
        }
    }

    public static void main(String[] args) {
        Tester a = new Tester();
        a.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        a.pack();
        a.setVisible(true);
    }
} 
```

* * *

我经常使用这个类进行测试，所以可能会有额外的代码（我想我把它全部删除了）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-14T08:50:14.743

代替

```
Timer timer = new Timer(); 
```

和

```
ScheduledExecutorService service = Executors.newSingleThreadScheduledExecutor(); 
```

和

```
class Task extends TimerTask 
```

和

```
class Task implements Runnable 
```

和

```
timer.scheduleAtFixedRate(new Task(), 0, 1000); 
```

和

```
service.scheduleAtFixedRate(new Task(), 0, 1000, TimeUnit.MILLISECONDS); 
```

* * *

顺便说一句，您不应该尝试在另一个线程上更新 GUI。相反，您必须向 Swing GUI 线程添加一个任务来执行该任务

```
 SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            textOut.setText("" + i++);
        }
    }); 
```

# interface-builder - 如何用IB改变UIBarButtonItem的宽度

> ID：14315298
> 
> 赞同：1
> 
> 时间：2013-01-14T08:44:41.990
> 
> 标签：interface-builder, xcode4.3, uibarbuttonitem

![在此处输入图像描述](../Images/2525c0585611b58c59898012989b3f96.png)

你们中的一些人可能会认为我在拖钓。毕竟图片清楚地显示了如何改变它。带有缓存。将这个数字从 37 更改完全没有任何作用。我可以放 5,10,50,100，没有任何改变。

我可以通过代码进行更改（没有尝试过），但是如果更改它不会改变任何东西，那么在 IB 中拥有 BarButtonItemSize 字段有什么意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T10:36:51.523

UIBarButton 宽度设置在 UINavigationBar 的情况下不反映。在这里，UIBarButton 的宽度会根据在 UIBarButton 中输入的内容长度自行调整。

在 UIToolBar 的情况下，我们可以使用 IB 和通过代码更改 UIBarButton 的宽度。

希望能帮助到你。

# javascript - Backbone 一个属性可以包含一个集合吗？

> ID：14315302
> 
> 赞同：4
> 
> 时间：2013-01-14T08:44:57.870
> 
> 标签：javascript, backbone.js

在骨干网中，存储作者和书籍之间关系（在本地存储中）的所需方式是什么。

是否可以将集合作为属性，或者应该使用数组还是......？

```
var book = Backbone.Model.extend({ 
    defaults:{ 
        title: ''
    }
});

var books = Backbone.Collection.extend({
    model: book
});

var author = Backbone.Model.extend({
        defaults:{ 
        firstName: '',
        lastName: '', 
        books: new books()
        }
});

var authors = Backbone.Collection.extend({
    model: author,
    localStorage: new Backbone.LocalStorage("authors")
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T09:25:24.717

在 Backbone 中没有一种处理嵌套集合的真正方法。引用[骨干常见问题解答](http://backbonejs.org/#FAQ-nested)：

> Backbone 不包括对嵌套模型和集合或“具有许多”关联的直接支持，因为有许多用于在客户端建模结构化数据的良好模式，并且 Backbone 应该为实现其中任何一个提供基础。

FAQ 还建议了一种模式，并提供了到[Extensions、Plugins、Resources](https://github.com/documentcloud/backbone/wiki/Extensions,-Plugins,-Resources)页面的链接，该页面链接到许多可用于处理嵌套模型和模型关系的库。

也就是说，我有时会这样处理这个问题：

```
var Author = Backbone.Model.extend({

  initialize: function(attrs, options) {
    //convert the child array into a collection, even if parse was not called
    var books = attrs ? attrs.books : [];
    if(!(books instanceof Books)) {
        this.set('books', new Books(books), {silent:true});
    }
  },

  //the books property does not need to be declared in the defaults
  //because the initialize method will create it if not passed
  defaults: {
    firstName: '',
    lastName: ''    
  },

  //override parse so server-sent JSON is automatically
  //parsed from books array to Books collection
  parse: function(attrs) {
    attrs.books = new Books(attrs.books);
    return attrs;
  },

  //override toJSON so the Books collection is automatically
  //converted to an array 
  toJSON: function() {
    var json = Backbone.Model.prototype.toJSON.call(this);
    if(json.books instanceof Books) {
      json.books = json.books.toJSON();
    }
    return json;
  }
}); 
```

评论希望能解释它是如何工作的，但关键是你可以像往常一样使用模型：用集合、数组或什么都没有初始化孩子，从服务器获取，将它们发送到服务器，它应该全部透明地工作。有相当多的样板代码要编写，但如果您发现自己重复相同的代码，则抽象为基类相对简单。

**编辑：**小更正，您不需要`books`在对象中定义`defaults`，因为如果缺少，构造函数会创建它。

/代码示例未测试

# asp.net-mvc - 应用程序错误：App_Web_i3opf3mz

> ID：14315305
> 
> 赞同：1
> 
> 时间：2013-01-14T08:45:15.343
> 
> 标签：asp.net-mvc, exception

我有一个使用 Win XP + Chrome (24) 登录到我的网站的用户，他们输入用户名\密码，但单击“登录”时抛出异常日志告诉我“异常 App_Web_i3opf3mz 对象引用未设置为对象的实例”。

在登录时，我设置了一个 cookie，但我可以告诉要么未设置 cookie，要么在设置 cookie 之前发生异常。

其他人看到这个错误吗？我有点迷失在尝试什么...

* * *

仅供参考，如果浏览器支持\启用 Javascript，它似乎是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:51:53.770

`App_Web_$SOME_CHARACTERS$`是在运行时从您的布局/视图/...生成的程序集的名称。

您是否还记录整个堆栈跟踪或有权访问“事件查看器”（=> eventvrw.exe）？堆栈跟踪应该可以帮助您找到`NullReferenceException`.

# com - RegSvcs 错误 - System.IO.FileNotFoundException - 无法加载文件或程序集

> ID：14315310
> 
> 赞同：0
> 
> 时间：2013-01-14T08:45:52.873
> 
> 标签：com

我想使用 RegSvcs 注册 COM+ 应用程序。发生错误：

安装过程中发生未知异常：1：System.IO.FileNotFoundException - 无法加载文件或程序集“ServiceStack.Redis，版本=3.9.32.0，文化=中性，PublicKeyToken=63fa1090bba1cba5”或其依赖项之一。该系统找不到指定的文件。

项目中有 6 个依赖 dll，其中 2 个是我放入特殊文件夹的第 3 个 dll。其他 dll 来自：C:\Windows\Microsoft.NET\Framework\v2.0.50727\ 和 C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5。

如果有人以前遇到过这个问题，请回复我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:15:03.547

在 Visual Studio 中，打开解决方案资源管理器窗口并展开引用节点。右键单击对您的程序集的引用，然后单击属性。在属性窗口中将 Copy Local 更改为 True，它会将程序集复制到项目的输出文件夹（'bin\Debug' 或 'bin\Release'）。

# c# - Ninject：将相同的接口绑定到两个实现

> ID：14315312
> 
> 赞同：6
> 
> 时间：2013-01-14T08:46:18.073
> 
> 标签：c#, asp.net-mvc, ninject, ninject.web.mvc

我有一个名为 的项目`Infrastructure`，其中包含一个接口`IRepository`

```
public interface IRepository<T>
{
    /// <summary>
    /// Adds the specified entity to the respository of type T.
    /// </summary>
    /// <param name="entity">The entity to add.</param>
    void Add(T entity);

    /// <summary>
    /// Deletes the specified entity to the respository of type T.
    /// </summary>
    /// <param name="entity">The entity to delete.</param>
    void Delete(T entity);
} 
```

在我的解决方案中，我还有两个项目

*   *应用程序.Web*
*   *应用程序.Web.Api*
*   基础设施

两个项目，都包含`IRepository`接口的实现

```
public class EFRepository<T> : IRepository<T>
{
    // DbContext for Application.Web project
    ApplicationWebDbContext _db;
    public EFRepository(ApplicationWebDbContext context)
    {
        _db = context;
    }

    public void Add(T entity) { }
    public void Delete(T entity) { }
}

public class EFRepository<T> : IRepository<T>
{
    // DbContext for Application.Web.Api project
    ApplicationWebAPIDbContext _db;
    public EFRepository(ApplicationWebAPIDbContext context)
    {
        _db = context;
    }

    public void Add(T entity) { }
    public void Delete(T entity) { }
} 
```

两种实现都适用于不同的`DataContexts`.

我如何在ninject中绑定它？

```
private static void RegisterServices(IKernel kernel)
{
    // bind IRepository for `Application.Web` project
    kernel.Bind(typeof(IRepository<>)).To(typeof(Application.Web.EFRepository<>));

    // bind IRepository for `Application.Web.Api' project
    kernel.Bind(typeof(IRepository<>)).To(typeof(Application.Web.Api.EFRepository<>));    
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-14T09:20:57.887

有[**几种方法**](https://github.com/ninject/ninject/wiki/Contextual-Binding)可以解决这种情况

### 命名绑定

最简单的，只需为依赖项提供名称：

```
kernel
        .Bind(typeof(IRepository<>))
        .To(typeof(WebApiEFRepository<>))
        // named binding
        .Named("WebApiEFRepository"); 
```

并使用此名称解决它。名称可以在配置中找到：`web.config`例如：

```
var webApiEFRepository = kernel.Get<IRepository<Entity>>("WebApiEFRepository"); 
```

### 上下文绑定

[从注入上下文中](https://github.com/ninject/ninject/wiki/Contextual-Binding)查找要绑定的类型。**在基于目标命名空间的示例中**

```
kernel
    .Bind(typeof(IRepository<>))
    .To(typeof(WebDbRepository<>))
    // using thins binding when injected into special namespace
    .When(request => request.Target.Type.Namespace.StartsWith("Application.Web")); 
```

从内核获取依赖：

```
// WebDbRepository<> will be injected
var serice = kernel.Get<Application.Web.Service>(); 
```

# spring - Spring上下文层次结构

> ID：14315314
> 
> 赞同：8
> 
> 时间：2013-01-14T08:46:29.413
> 
> 标签：spring, applicationcontext

我将使用一个父上下文创建多个 Spring 上下文。以下是我将如何创建父上下文：

```
new ClassPathXmlApplicationContext(new String[] {"ApplicationContext/application.xml"}) 
```

我想通过以下方式创建每个父上下文：

```
PropertyPlaceholderConfigurer configurer = new PropertyPlaceholderConfigurer();
configurer.setProperties(properties);
ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(appContext);
context.addBeanFactoryPostProcessor(configurer);
context.setConfigLocation("ApplicationContext/beans.xml");
context.refresh(); 
```

这个想法是在每个子上下文中拥有多个具有相同 bean 层次结构的子上下文（DAO、服务、数据源、事务管理器等）。拥有多个上下文的原因是需要拥有多个不同的数据源（实际上每个应用程序上下文一个）。每个数据源的数据库结构都是相同的。所以，有一些问题。

1.  拥有这样的上下文层次结构是否安全？例如，如果有 30 个子上下文？
2.  跨子上下文 bean 可见性怎么样？比如说，我使用*@Component注释声明了**CustomerService* bean，并带有几个自动装配的 DAO 依赖项。Spring 是否在特定子上下文中执行自动装配和其他 DI 操作？
**   另外，我将使用以下方法从子上下文中查找 bean： *childContext.getBean(CustomerService.class);* 我是否从这个特定的子上下文而不是其他子上下文中获得客户服务？我知道，弹簧单例是每个应用程序上下文的单例，但仍然不确定。*

 *PS。还有另一种方法来处理[此处](http://blog.springsource.org/2007/01/23/dynamic-datasource-routing/)描述的多个数据源。但就我而言，这种方法似乎不太方便。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T09:24:59.350

*   拥有这样的上下文层次结构是否安全？例如，如果有 30 个子上下文？

你说的安全是什么意思？如果您的意思是 bean 初始化时的线程安全，那么可以，因为上下文是一一初始化的。

*   跨子上下文 bean 可见性怎么样？比如说，我使用*@Component注释声明了**CustomerService* bean，并带有几个自动装配的 DAO 依赖项。Spring 是否在特定子上下文中执行自动装配和其他 DI 操作？

 *Bean 在子上下文中不可见。在上下文中唯一可见的 bean 是它自己的和在其父上下文中的。

*   另外，我将使用以下方法从子上下文中查找 bean： *childContext.getBean(CustomerService.class);* 我是否从这个特定的子上下文而不是其他子上下文中获得客户服务？我知道，弹簧单例是每个应用程序上下文的单例，但仍然不确定。

是的。根据最后一个问题的答案。

我在我的应用程序中广泛使用了这种模式。许多其他子上下文通过将其设为父上下文来共享公共上下文。当您想在单个 JVM 中运行完全隔离的上下文时，它非常有用，例如，如果您的应用程序是多租户的。然后，您可以按租户方式启动/停止/重新启动应用程序上下文，而无需重新启动 JVM。

This also allows a clear separation of data sources and transaction managers and allows one to shard their databases easily.**

# ruby - 在 Ruby 1.9 中使用 CSV 库将字符串的 CSV 列转换为整数

> ID：14315318
> 
> 赞同：0
> 
> 时间：2013-01-14T08:46:46.293
> 
> 标签：ruby, csv, sed

所以我有一个包含两列的 CSV，其中包含字符串格式的美元金额。`head -n 5 file.csv`揭示以下内容：

```
Title,Distributor Long Name,Wk,Estimated Weekend Gross,Cume,Locs Reported,Avg/Loc,Booking Title #
"=""Zero Dark Thirty""","=""Sony""",4,"24,000,000","29,480,807",2937,"8,172","=""66273"""
"=""Haunted House, A""","=""Open Road""",1,"18,817,000","18,817,000",2160,"8,712","=""71209"""
"=""Gangster Squad""","=""Warner Bros.""",1,"16,710,000","16,710,000",3103,"5,385","=""66556"""
"=""Django Unchained""","=""The Weinstein Company""",3,"11,065,000","125,399,122",3012,"3,674","=""66122""" 
```

这持续了大约 40 行。您会注意到其中两列——“Estimated Weekend Gross”和“Cume”——将它们的值作为**字符串**。

所以我的问题是，有没有办法只遍历这两列，将字符串值转换为整数`row.to_s.gsub(',','').to_i`，然后将这些值覆盖到**同一个**CSV 中的相应行？

我尝试做这样的事情，但我没有得到格式正确的 CSV ..

```
File.open('modified.csv', 'w') do |csv|
  CSV.foreach('original.csv') do |row|
    csv << row[0].to_s.gsub('=','').gsub(', The','')
    csv << row[3].to_s.gsub(',','').to_i
    csv << row[4].to_s.gsub(',','').to_i
  end
end 
```

在做块时我也玩过`:headers => :integer`，但它不会让我将值从字符串转换为整数。那么，我错过了什么？我应该存储这些值然后编写一个新的 CSV 还是有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:23:28.203

亚伦，只需更改行并将其写入您的新文件，如下所示

```
require 'csv'

File.open('modified.csv', 'w') do |csv|
  CSV.foreach('original.csv', :headers => true) do |row|
    row['Estimated Weekend Gross'] = row['Estimated Weekend Gross'].delete(',').to_i
    row['Cume'] = row['Cume'].delete(',').to_i
    csv << row
  end
end 
```

编辑：如果您想将标题保存在 modified.csv 中，您可以这样做，但是如果有人对此有更好的解决方案，则必须有更短的方法而无需两次打开文件？

```
headers = CSV.open('original.csv', 'r', :headers => true).read.headers
CSV.open('modified.csv', 'w') do |csv|
  csv << headers
  CSV.foreach('original.csv', :headers => true) do |row|
    row['Estimated Weekend Gross'] = row['Estimated Weekend Gross'].delete(',').to_i
    row['Cume'] = row['Cume'].delete(',').to_i
    csv << row
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:32:49.150

您可以使用以下方法获取它：

```
sed 's/,\("[^"]*"\)*/|\1/g' file.csv | awk -F"|" '{s="";for (i=1; i<=NF; i++){if (i==4 || i==5){gsub("\,","",$i);gsub("\"","",$i);s=s","$i;}else{if (i>1){s=s","$i;}else{s=s""$i;}}}print s;}' - 
```

我得到了这个输出：

```
"=""Zero Dark Thirty""","",4,24000000,29480807,2937,"8,172",""
"=""Haunted House, A""","",1,18817000,"18,817,000",2160,"8,712",""
"=""Gangster Squad""","",1,16710000,16710000,3103,"5,385",""
"=""Django Unchained""","",3,11065000,125399122,3012,"3,674","" 
```

我知道这很难理解，所以我将逐步解释：

1.  首先，考虑到引号，为每个字段创建一个分隔符：

    sed 's/,("[^"] *")* /|\1/g' file.csv

你会得到一个管道分隔符“|” 每个字段之间：

```
"=""Zero Dark Thirty"""|""|4|"24,000,000"|"29,480,807"|2937|"8,172"|""
"=""Haunted House| A"""|""|1|"18,817,000"|"18,817,000"|2160|"8,712"|""
"=""Gangster Squad"""|""|1|"16,710,000"|"16,710,000"|3103|"5,385"|""
"=""Django Unchained"""|""|3|"11,065,000"|"125,399,122"|3012|"3,674"|"" 
```

1.  使用管道作为字段分隔符获得此输出后，您可以使用 awk 将描述的过滤器应用于字段 4 和 5（它应该在 sed 命令之后运行，因为它将 sed 的输出作为输入）：

    awk -F"|" '{s="";for (i=1; i<=NF; i++){if (i==4 || i==5){gsub("\,","",$i);gsub ("\"","",$i);s=s","$i;}else{if (i>1){s=s","$i;}else{s=s""$ i;}}}print s;}' -

删除每个字段的引号和逗号（作为整数表示），并获得所需的输出：

```
"=""Zero Dark Thirty""","",4,24000000,29480807,2937,"8,172",""
"=""Haunted House, A""","",1,18817000,"18,817,000",2160,"8,712",""
"=""Gangster Squad""","",1,16710000,16710000,3103,"5,385",""
"=""Django Unchained""","",3,11065000,125399122,3012,"3,674","" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T10:13:31.307

你可以试试这个：

```
CSV.open('modified.csv', 'w') do |csv|
  CSV.foreach('original.csv') do |row|
    modified_row = row.clone
    modified_row[0] = row[0].to_s.gsub('=','').gsub(', The','')
    modified_row[3] = row[3].to_s.gsub(',','').to_i
    modified_row[4] = row[4].to_s.gsub(',','').to_i
    csv << modified_row
  end
end 
```

我更改了用于写入的文件打开以使用 CSV，然后更正了追加以追加行行的数组，而不是追加单个值。

# php - 如果我想在 php 中检查值是字符串还是 int

> ID：14315321
> 
> 赞同：0
> 
> 时间：2013-01-14T08:47:09.337
> 
> 标签：php

我有一个来自数据库的**字符串值。**
我需要检查这个值是整数还是字符串。
我试过`is_int`and `is_numeric`，但它们都不是我需要的。

`is_int`如果值是字符串类型，则始终返回 false，而`is_numeric`如果我的值包含数字，则返回 true。

我正在使用的是`preg_match('/^\d+$/',$value)`，并且，在这种情况下，我正在寻找一个简单的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T08:48:56.670

```
$stringIsAnInteger = ctype_digit($string); 
```

[`ctyped_digit()`](http://php.net/ctype-digit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:53:48.830

您可以使用`ctype_digit()`— 检查数字字符。检查提供的字符串 text 中的所有字符是否都是数字。

**示例 1**

```
<?php
$strings = array('1820.20', '10002', 'wsl!12');
foreach ($strings as $testcase) {
    if (ctype_digit($testcase)) {
        echo "The string $testcase consists of all digits.\n";
    } else {
        echo "The string $testcase does not consist of all digits.\n";
    }
}
?> 
```

以上将输出

```
The string 1820.20 does not consist of all digits.
The string 10002 consists of all digits.
The string wsl!12 does not consist of all digits. 
```

**示例 2**

```
<?php

$numeric_string = '42';
$integer        = 42;

ctype_digit($numeric_string);  // true
ctype_digit($integer);         // false (ASCII 42 is the * character)

is_numeric($numeric_string);   // true
is_numeric($integer);          // true
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:11:23.043

我觉得你的方式是最好的。
我在一个简单的正则表达式中没有看到任何复杂的东西，所以，在你的位置我不会寻找更简单的。

说到复杂性，不要只局限于调用者代码。
它可以像单个函数调用一样短。但是你不能确定*底层*代码，它可能非常复杂，而且 - 一件重要的事情 - 有一些问题，就像这里命名的每个函数一样。

而您自己的解决方案既简单又强大。

更新：
所有说“不要使用正则表达式，其中简单的字符串函数可以用于性能等等”的所有评论都直接来自上个世纪。

*   这并不意味着“即使没有任何字符串函数适合您，也不要使用正则表达式”
*   现在是 XXI，计算机速度非常快，尤其是在文本解析这样简单的问题上。如此简单的正则表达式**永远不会**成为您应用程序**的瓶颈**。因此，就性能优化而言，没有一个理由比正则表达式更喜欢字符串函数。在**现实生活中的应用程序**上，您永远不会注意到（或衡量）任何差异。

# html - 支持 Gmail App IOS 中的响应式电子邮件

> ID：14315325
> 
> 赞同：4
> 
> 时间：2013-01-14T08:47:44.917
> 
> 标签：html, html-email

我坚持为 iOS 的 gmail 应用程序扩展什么支持响应式电子邮件。似乎很明显，Android版本不支持它：[Gmail app (Android) 上的响应式电子邮件](https://stackoverflow.com/questions/13604300/responsive-emails-on-gmail-app-android)

但是 iOS 的 gmail 应用程序怎么样？

我已经使用来自 Campaign Monitor 的默认模板测试了该行为，并且该应用程序将仅显示 Web 版本。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:00:50.197

Gmail 应用程序似乎从标题中删除了所有 css（与浏览器版本相同）。所以它不支持基于媒体查询的响应式时事通讯。

在此处查看更多信息[https://www.campaignmonitor.com/forums/topic/7288/gmail-ios-app-ignores-meda-declaration-in-css/](https://www.campaignmonitor.com/forums/topic/7288/gmail-ios-app-ignores-meda-declaration-in-css/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T14:27:36.737

没有任何版本的 Gmail 支持该`<style>`标签，使媒体查询无法在 Gmail 中内联无效。

如果您想要在客户之间更一致的东西，大多数人都会使用流畅的布局。不过，这几乎将您限制在单列设计中。您可以设置最大宽度媒体查询，使其在 Outlook 中看起来像普通的 600 像素电子邮件，但会针对宽度小于 600 像素的所有设备调整大小。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:27:26.880

这可能会有所帮助： [http ://www.emailonacid.com/blog/details/C13/the_android_mail_app_and_css_class_declarations](http://www.emailonacid.com/blog/details/C13/the_android_mail_app_and_css_class_declarations)

其他人（正确地）表示 Gmail 去除了 <style> 标记。我相信这对于 Android 和 iOS 上的 Gmail 应用程序来说是正确的。

但是，Android 的本机邮件应用程序似乎没有 - 这就是我提供的 URL 的全部内容。

旁注：他们没有提到它，但我很确定您可以将 media="all" 放在 <style> 标记上并获得相同的结果（而不是使用 <link> 或将 @media 放在 <风格>）。

干杯。

# php - 使用 ASP.NET 的授权 HTTP 标头

> ID：14315328
> 
> 赞同：0
> 
> 时间：2013-01-14T08:47:50.773
> 
> 标签：php, asp.net, .net, curl

我想使用 asp.net 创建一个授权 http 标头，如果我想使用 php+ curl 执行此操作，我有文档中给出的代码，这里是链接[http://help.voxeo.com/go/help/evolution.sms。邮政API](http://help.voxeo.com/go/help/evolution.sms.postapi)。

我不想在我的 IIS 上安装 php，只想在 .net 环境中工作。有人可以给asp替代以下代码：

```
$botkey='[999999]';

$from="14075551212";

$userKey = $_REQUEST['userkey'];

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, 'http://api.messaging.staging.voxeo.net/1.0/messaging');

curl_setopt($ch, CURLOPT_HEADER, 0);

$data="botkey=".$botkey."&apimethod=send&msg=".$msg."&userkey=".$userKey."&network=SMS&   from=".$from;

curl_setopt($ch, CURLOPT_USERPWD, '[Evolution User Name]:[Evolution Password]');

curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

c    url_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($ch, CURLOPT_TIMEOUT, 100); 
```

我需要 ASP.net 替代以下 curl

```
curl -u MyUserName:MyPassword "http://api.messaging.staging.voxeo.net/1.0/messaging" -X POST -d "botkey=12345&apimethod=send&msg=My%20test%20message.&user=14075555555&network=SMS&from=14076666666" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:03:29.463

我不确定我是否完全理解你，但这是我必须做的事情才能让 Flash 进入我的应用程序的安全部分。为了清楚起见，我已经删除了更多检查，但如果这是您需要的，这将创建一个授权 cookie。不过我必须要问，为什么不能在 ASP.NET 中使用普通的身份验证方法？

```
void Application_BeginRequest(object sender, EventArgs e)
{
    string SessionParamName = "";
    string SessionCookieName = "";
    string AuthParamName = "";
    string AuthCookieName = "";

    try
    {
        SessionParamName = "ASPSESSID";
        SessionCookieName = "ASP.NET_SessionId";
        if (HttpContext.Current.Request.Form[SessionParamName] != null)
            UpdateCookie(SessionCookieName, HttpContext.Current.Request.Form[SessionParamName]);
        else if (HttpContext.Current.Request.QueryString[SessionParamName] != null)
            UpdateCookie(SessionCookieName, HttpContext.Current.Request.QueryString[SessionParamName]);
    }
    catch { }

    try
    {
        AuthParamName = "AUTHID";
        AuthCookieName = FormsAuthentication.FormsCookieName;
        if (HttpContext.Current.Request.Form[AuthParamName] != null)
            UpdateCookie(AuthCookieName, HttpContext.Current.Request.Form[AuthParamName]);
        else if (HttpContext.Current.Request.QueryString[AuthParamName] != null)
            UpdateCookie(AuthCookieName, HttpContext.Current.Request.QueryString[AuthParamName]);
    }
    catch { }
}

private void UpdateCookie(string CookieName, string CookieValue)
{
    HttpCookie Cookie = HttpContext.Current.Request.Cookies.Get(CookieName);
    if (Cookie == null)
        Cookie = new HttpCookie(CookieName);

    Cookie.Value = CookieValue;
    HttpContext.Current.Response.Cookies.Add(Cookie);
} 
```

# css - 垂直居中 SVG 标签

> ID：14315331
> 
> 赞同：17
> 
> 时间：2013-01-14T08:48:14.970
> 
> 标签：css, html, svg, center

我正在尝试找出一种将我的 SVG 标签垂直居中的方法。

基本上，这是我试图居中的简化 SVG 代码：

```
<svg height="272" style="background-color:transparent;margin-left: auto; margin-right: auto;" width="130" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g style="font-size: 0.7em;" transform="scale(1 1) rotate(0) translate(0 270)">
        <g id="1" style="font-size: 0.7em;">
            <image height="32" width="32" x="49" xlink:href="../../images/JOB.GIF" y="-270"/>
        </g>
    </g>
</svg> 
```

我可以毫不费力地将它放在页面的中间（水平来说），但是我也希望它垂直居中。

我可以添加包装器，但我想知道这样做的通用方法，而不取决于 SVG 大小或窗口大小。

我尝试了多种方法，但没有任何效果。

谢谢，

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-14T11:24:38.530

我更新了这个答案，因为当前的浏览器对此有更好的解决方案。

聪明人说，第一年你学习html和css，再过几年你学习高级javascript，五年后你终于学会了如何垂直居中div。

要垂直/水平对齐 CSS 中的任何内容，您可以使用两种主要方式：

**绝对**

```
<div class="outside">
    <div class="inside">Whatever</div>
</div> 
```

和CSS：

```
.outside{
    position:relative;
}
.inside{
    position:absolute;
    top:50%;
    bottom:50%;
    transform:translate(-50%, -50%);
} 
```

唯一的问题是元素不会生成高度。

**弹性盒**

Flexbox 现在有很好的支持，所以为什么不使用它。[https://caniuse.com/#feat=flexbox](https://caniuse.com/#feat=flexbox)

使用 flexbox 您的项目不需要是绝对的，因此它会生成高度。代码：

```
<div class="outside">
    <div>Whatever</div>
</div> 
```

和CSS：

```
.outside{
    display: flex;
    align-items: center;
    justify-content: center;
} 
```

**老答案：**

你有高度和宽度，所以你可以使用`margin : auto auto;`

或者把它放在 div 中

```
position:absolute ;
left:50% ;
margin-left: -(half of width of image)px;
top:50% ;
margin-top: -(half of height of image)px; 
```

如果你会用它做一些事情（javascript动画或其他东西），第二个会更好

我没有检查它，但也许你也可以使用 svg 的第二个选项（没有外部 div）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-07T18:31:12.073

这很简单！

HTML：

```
<div class="a">
<div class="b">
<div class="c">
<!-- Your SVG Here -->
</div>
</div>
</div> 
```

CSS：

```
<style>
.a {
display: table;
position: absolute;
height: 100%;
width: 100%;
}

.b {
display: table-cell;
vertical-align: middle;
}

.c {
margin-left: auto;
margin-right: auto; 
height: /* Your size in px, else it will expand to your screen size!*/
width:  /* Your size in px, else it will expand to your screen size!*/
}
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-03T12:37:19.560

如果您为您的`svg`元素提供一个`viewBox`属性并将其`width`&`height`属性设置为，`100%`那么一切都应该很好（在大多数浏览器中..）

```
$(document).ready(function(){
  $(".panel-left").resizable({handleSelector: ".splitter",containment: "parent"});
});
```

```
#ctr
{
	position:        absolute;
	border:          1px solid #131313;    
	top:             5%;
	left:            5%;
	bottom:          5%;
	right:           5%;    
	display:         flex;
	flex-direction:  row;    
}

#ctr svg
{
	height:    100%;
	width:     100%;
}

.panel-left 
{
  flex:         0 0 auto;
  padding:      10px;
  width:        50px;
  min-height:   50px;
  min-width:    50px;
  max-width:    80%;
  max-height:   100%;
  white-space:  nowrap;
  background:   #131313;
  color:        white;
}

.splitter 
{
  flex:         0 0 auto;
  width:        18px;  
}

.panel-right 
{
  flex:         1 1 auto;
  padding:      10px;
  min-width:    20px;
  background:   #eee;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

<div style="visibility:hidden; position:absolute; width:0">
	<svg>
	  <g id="my-funky-svg-defs">
		<defs>
		  <radialGradient id="gradient" cx="25%" cy="25%" r="100%" fx="40%" fy="40%">
			<stop offset=  "0%" stop-color="hsla(313,  80%, 80%, 1)"/>
			<stop offset= "40%" stop-color="hsla(313, 100%, 65%, 1)"/>
			<stop offset="110%" stop-color="hsla(313, 100%, 50%, 0.7)"/>
		  </radialGradient>
		</defs>    
		<title>smarteee</title>
		<circle  class="face" cx="200" cy="200" r="195" fill="url(#gradient)" />
		<ellipse class="eye eye-left" cx="140" cy="150" rx="10" ry="40" fill="#131313"/>
		<ellipse class="eye eye-right" cx="260" cy="150" rx="10" ry="40" fill="#131313"/>
		<path class="smile" d="M120,280 Q200,330 280,280" stroke-width="10" stroke="#131313" fill="none" stroke-linecap="round"/>
	  </g>
	</svg>
</div>

<div id=ctr>
	<div class="panel-left">
	  <svg viewBox="0 0 400 400"><use xlink:href="#my-funky-svg-defs"></use></svg>        
	</div>

	<div class="splitter">
	</div>

	<div class="panel-right">
	  <svg viewBox="0 0 400 400"><use xlink:href="#my-funky-svg-defs"></use></svg>        
	</div>
</div>
```

[&这里有一个相应的 jsfiddle 可以玩](https://jsfiddle.net/61xecp6m/)

注意：还有与设置`preserveAspectRatio`一起使用的`viewBox`属性。例如：`preserveAspectRatio="xMidYMid meet"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-13T22:27:10.413

您可以尝试使用**flexbox**。

简单的 HTML：

```
<div class="outside">
    <svg />
</div> 
```

CSS：

```
.outside {
    display: flex;
    align-items: center; /* vertical alignment */
    justify-content: center; /* horizontal alignment */
} 
```

HTML 与您的示例：

```
<div class="outside">
    <svg height="272" style="background-color:transparent;margin-left: auto; margin-right: auto;" width="130" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <g style="font-size: 0.7em;" transform="scale(1 1) rotate(0) translate(0 270)">
            <g id="1" style="font-size: 0.7em;">
                <image height="32" width="32" x="49" xlink:href="../../images/JOB.GIF" y="-270"/>
            </g>
        </g>
    </svg> 
</div> 
```

*   Flexbox 浏览器支持：[caniuse flexbox](https://caniuse.com/#feat=flexbox)
*   了解 Flexbox：Flexbox[的 CSS 技巧指南](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)
*   边玩边学：[Flexbox Froggy](https://flexboxfroggy.com/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-15T03:31:32.830

我终于使用了一些 JS 代码来做到这一点。

我正在使用这里的解决方案：[在页面上垂直和水平居中 <div> 的最佳方法？](https://stackoverflow.com/questions/356809/best-way-to-center-a-div-on-a-page-vertically-and-horizontally)

这是：

```
div {
    width: 100px;
    height: 100px;
    background-color: red;

    position: absolute;
    top:0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto; 
```

}

但问题是，如果 SVG 大于窗口大小，它就会被裁剪。这是我用过的 JS 代码`onLoad`：

```
var heightDiff = window.innerHeight - svg.height.baseVal.value;
var widthDiff = window.innerWidth - svg.width.baseVal.value;
if (heightDiff > 0)                                                                                                                
    svg.style.marginTop = svg.style.marginBottom = heightDiff / 2;
if (widthDiff > 0)
    svg.style.marginLeft = svg.style.marginRight = widthDiff / 2; 
```

# linux - 自托管是否适合 Nancy 和 ServiceStack 中的小型 Web 项目？

> ID：14315336
> 
> 赞同：4
> 
> 时间：2013-01-14T08:48:48.347
> 
> 标签：linux, mono, servicestack, nancy, self-hosting

[Nancy](http://nancyfx.org/)和[ServiceStack](http://www.servicestack.net/)都具有自托管的能力。我想使用其中一个框架来使用 Linux 和 Mono 构建 Web 服务。我期待很少的并发连接。不幸的是，Mono 在其 ASP.NET 的实现中存在内存泄漏，对我来说唯一的选择是“自托管”。但我担心保持并发连接的可能性很小（可能）。我应该依赖他们的托管实施吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T09:55:33.977

我不确定你在说什么内存泄漏——有很多人在生产中使用 Mono/Asp.net 组合，我相信他们会注意到它是否本质上被破坏了。

无论哪种方式，我都不能谈论 ServiceStack，但是与 Nancy 自我主机的并发连接没有问题。我建议你把它放在 nginx 后面，它可以很好地处理静态内容，并使用 supervisord 监控服务。

在我们的 wiki 上有更多关于设置的信息：

[https://github.com/NancyFx/Nancy/wiki/Hosting-Nancy-with-Nginx-on-Ubuntu](https://github.com/NancyFx/Nancy/wiki/Hosting-Nancy-with-Nginx-on-Ubuntu)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T13:55:22.180

不确定您指的是什么内存泄漏，因为有许多 Mono/ASP.NET 站点在生产中运行，例如[servicestack.net](http://www.servicestack.net)自己的网站在 Linux 上运行，所有 ASP.NET 现场演示都在 Nginx/MonoFastCGI 上运行。

无论如何，像 NancyFx 一样，ServiceStack 也是一个不错的选择，[http:](http://razor-console.servicestack.net) //razor-console.servicestack.net 是在 nginx 反向代理后面运行自托管网站的示例。以下是在 Mono/Linux 上运行 ServiceStack 的一些链接：

*   [在 Linux 上将 ServiceStack 作为守护进程运行](https://github.com/ServiceStack/ServiceStack/wiki/Run-ServiceStack-as-a-daemon-on-Linux)
*   [在 nginx 上托管的 Fastcgi 中运行 ServiceStack](https://github.com/ServiceStack/ServiceStack/wiki/Run-ServiceStack-in-Fastcgi-hosted-on-nginx)
*   [Linux 主机选项](https://github.com/ServiceStack/ServiceStack/wiki/Linux-Hosting-Options)

# css - 如何按类分隔样式表？

> ID：14315339
> 
> 赞同：0
> 
> 时间：2013-01-14T08:49:05.333
> 
> 标签：css

我的意思是，如果我有一个包含两个 div 的页面，并且我希望每个 div 有一个单独的样式，我会怎么做呢？

例子：

```
div{ background: red;} // apply this style to one div.
div{ background: blue;} //apply this style to another div. 
```

我意识到可以只为每个 div 添加一个类，但是如果我扩展它呢？如果我希望我的页面的整个部分使用许多不同的属性来使用样式表的一部分，而另一个整个部分使用另一部分怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:52:44.780

您可以简单地在 CSS 规则前面加上部分的 ID 或类。例如：

```
#section1 h1 {
    color: red;
}

#section2 h1 {
    color: blue;
} 
```

并且基本上在每个规则前面加上`#section1`或`#section2`取决于包含部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T08:55:46.527

据我了解，您希望例如标题中的每个 div 都是绿色的，而页脚中的每个 div 都应该是红色的。

```
#header div{ background-color: green; } 
```

然后

```
<div id="header">
    <div>I'm green</div>
</div> 
```

您还可以使用更复杂的选择器来帮助您解决特殊情况，例如：

```
#header div{ background-color: red; }
#header > div{ background-color: green; } 
```

然后

```
<div id="header">
    <div>
        I'm green...
        <div>...and I'm red</div>
    </div>
</div> 
```

Microsoft 对可用的选择器有一个[很好的概述](http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx#selectors)。有的例子有时有点弱，但它的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T08:56:50.280

你可以这样做：

```
.firstSectionType div{ background: red;} // apply this style to one div.
.firstSectionType span { color: blue; }
.secondSectionType div{ background: blue;} //apply this style to another div. 
.secondSectionType span {color: red; } 
```

然后，如果您的 HTML 如下所示：

```
<div class="firstSectionType">
    <p><span>Hello</span></p>
    <div>This has a red background and <span>this is blue text</span></div>
</div>
<div class="secondSectionType">
    <p><span>Hello</span></p>
    <div>This has a blue background and <span>this is red text</span></div>
</div> 
```

相应部分中的`div`s 和`span`s 将被相应地格式化。

上面的 CSS 要求您在每个规则中重复`.firstSectionType`或`.secondSectionType`，但是像[LESS](http://lesscss.org/)这样的 CSS 预处理器将允许您像这样重写它：

```
.firstSectionType
{
    div{ background: red;} // apply this style to one div.
    span { color: blue; }
}
.secondSectionType 
{
    div{ background: blue;} //apply this style to another div. 
    span {color: red; }
} 
```

# php - Magento 中的 Paypal 状态

> ID：14315340
> 
> 赞同：0
> 
> 时间：2013-01-14T08:49:17.210
> 
> 标签：php, magento, paypal

我们在 ou Magento Shop (CE 1.7) 中遇到了 paypal 的问题

这是我们状态的历史：

- 待付款 - 付款验证 - Paypal 拒绝付款

但是当支付被贝宝拒绝时，它会创建一张发票，然后是一张贷记单。我不想要这个，当发票创建时，它要求我们的团队发货，但这个订单不需要发货。

如何避免创建发票，或者在创建具有停止我的运输过程的参数的发票时。

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:38:26.513

开箱即用的 Magento 需要发票来进行在线支付授权（或捕获），即向 PayPal 提出请求并尝试向客户收费。运送订单时不应依赖发票。在 Magento 中，您应该改用订单状态。

# c# - 将属性“绑定”到某些逻辑

> ID：14315342
> 
> 赞同：1
> 
> 时间：2013-01-14T08:49:47.467
> 
> 标签：c#, .net, wpf, binding, inotifypropertychanged

我很确定当我看到这个问题的答案时我会说'duh'，但我的头脑并不像我现在想要的那样高效，所以我在这里启动了一个异步帮助线程来帮助我...

假设以下类：

```
public class DerivedTicket: Ticket
{
    public ObservableCollection<TicketDetail> TicketDetails { get; set; }
}

public class Ticket
{
    public static readonly DependencyProperty SubTotalProperty = DependencyProperty.Register("SubTotal", typeof(decimal), typeof(TicketsRow));
    public static readonly DependencyProperty TaxProperty = DependencyProperty.Register("Tax", typeof(decimal), typeof(TicketsRow));
    public static readonly DependencyProperty TotalProperty = DependencyProperty.Register("Total", typeof(decimal), typeof(TicketsRow));

    public decimal SubTotal
    {
        get { return (decimal)this.GetValue(SubTotalProperty); }
        set { this.SetValue(SubTotalProperty, value); }
    }

    public decimal Tax
    {
        get { return (decimal)this.GetValue(TaxProperty); }
        set { this.SetValue(TaxProperty, value); }
    }

    public decimal Total
    {
        get { return (decimal)this.GetValue(TotalProperty); }
        set { this.SetValue(TotalProperty, value); }
    }
}

public class TicketDetail
{
    public static readonly DependencyProperty ItemIdProperty = DependencyProperty.Register("ItemId", typeof(int?), typeof(TicketDetailsRow));
    public static readonly DependencyProperty PriceProperty = DependencyProperty.Register("Price", typeof(decimal), typeof(TicketDetailsRow));
    public static readonly DependencyProperty TaxProperty = DependencyProperty.Register("Tax", typeof(decimal?), typeof(TicketDetailsRow));
    public static readonly DependencyProperty DescriptionProperty = DependencyProperty.Register("Description", typeof(string), typeof(TicketDetailsRow));

    public int? ItemId
    {
        get { return (int?)this.GetValue(ItemIdProperty); }
        set { this.SetValue(ItemIdProperty, value); }
    }

    [Field]
    public decimal Price
    {
        get { return (decimal)this.GetValue(PriceProperty); }
        set { this.SetValue(PriceProperty, value); }
    }

    [Field]
    public decimal? Tax
    {
        get { return (decimal?)this.GetValue(TaxProperty); }
        set { this.SetValue(TaxProperty, value); }
    }

    [Field]
    public string Description
    {
        get { return (string)this.GetValue(DescriptionProperty); }
        set { this.SetValue(DescriptionProperty, value); }
    }
} 
```

您将如何使`SubTotal`与 的总和保持同步`TicketDetails`？使用绑定，还是借助`INotifyPropertyChanged`，或其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:53:04.330

您可以使用事件`NotifyCollectionChanged`来`ObservableCollection`通知工单详细信息的更改，然后重新计算依赖属性`SubTotal`。

# mysql - MySql::存储过程递归

> ID：14315343
> 
> 赞同：4
> 
> 时间：2013-01-14T08:49:58.613
> 
> 标签：mysql, stored-procedures, recursion

如何重写以下 SP 以面对 MySQL 中的递归限制：

```
CREATE DEFINER = `root`@`localhost` PROCEDURE `SP_DeleteParentDirectory`(pParentID INT,pIsFolder INT,pReferenceID INT)
BEGIN   
SET @@SESSION.max_sp_recursion_depth = 255;
    SET @IsFolder= NULL;
    SET @ChildID= NULL;
    SET @ReferenceID= NULL;
    IF ( pIsFolder= 2) THEN
                SELECT  FileID INTO @ChildID FROM filesinfo WHERE ParentID= pParentID LIMIT 1;
                WHILE (@ChildID IS NOT NULL) DO
                         SELECT  filesinfo.IsFolder,filesinfo.ReferenceID INTO @IsFolder,@ReferenceID FROM filesinfo WHERE filesinfo.FileID = @ChildID;
                        CALL SP_DeleteParentDirectory(@ChildID,@IsFolder,@ReferenceID);             
                        SELECT filesinfo.FileID INTO @ChildID FROM filesinfo WHERE ParentID= pParentID LIMIT 1;
                END While;
    END IF;
    DELETE FROM filesinfo Where  filesinfo.FileID= pParentID;
    IF EXISTS( SELECT  * FROM  filesrefrences WHERE filesrefrences.ReferenceID = pReferenceID AND filesrefrences.RefrenceCount>1) THEN
            UPDATE filesrefrences
            SET RefrenceCount= RefrenceCount-1 WHERE  filesrefrences.ReferenceID = pReferenceID;            
    ELSE            
            SET @ReferenceKey= NULL;
            Select filesrefrences.RefrenceKey INTO @ReferenceKey FROM filesrefrences WHERE filesrefrences.ReferenceID= pReferenceID;
            IF NOT EXISTS(SELECT * FROM deletefilesreferences WHERE deletefilesreferences.FileReference= @ReferenceKey) THEN
            INSERT INTO deletefilesreferences (deletefilesreferences.FileReference)VALUES(@ReferenceKey);
            END IF;
            DELETE FROM filesrefrences where filesrefrences.ReferenceID = pReferenceID;         
    END IF;
    -- CALL SP_DeleteFileInfo(pParentID,pReferenceID);      
    -- SELECT * FROM deletefilesreferences;
    -- CALL SP_GetDeletedReferences();
END; 
```

不使用这个 sts ：

" **SET @@SESSION.max_sp_recursion_depth = 255;** " 我的意思是可以不递归地与层次数据交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:08:42.120

如果设置 max_sp_recursion_depth，Mysql 最多允许在 PROCEDURE 中进行 255 次递归。

这是有风险的，因为未来某个时候所需的递归深度可能会超过 255。

所以最好用一个过程替换你的函数，使用一个**INOUT**变量作为return_result。

# c++ - 类的非静态成员函数的函数指针

> ID：14315346
> 
> 赞同：2
> 
> 时间：2013-01-14T08:50:30.757
> 
> 标签：c++, static, function-pointers, functor, member-function-pointers

我想在类中定义一个成员函数并使用它的指针。我知道我可以使用静态成员函数，但问题是我只能访问类的静态成员。除了静态成员函数之外，还有其他方法可以获取函数指针。

* * *

更具体地说：我正在使用一个库，它获取一个函数指针作为其输入。我想编写一个成员函数并将其函数指针分配给该外部库。我应该创建一个类对象还是使用这个指针来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T08:58:58.140

可以获取方法的指针，但必须用对象调用

```
typedef void (T::*MethodPtr) ();
MethodPtr method = &T::MethodA;
T *obj = new T();
obj->*method(); 
```

如果您需要非对象指针并且想要使用对象，那么您必须将对象的实例存储在某处，但您只能使用一个对象（单例）。

```
class T {
  static T *instance;
public:
  T::T() {
    instance = this;
  }
  static void func() {
    instance->doStuff();
  }
  void doStuff() {}
}; 
```

如果库支持函数指针的用户数据，那么您可能有多个实例

```
class T {
public:
  static void func(void *instance) {
    ((T*)instance)->doStuff();
  }
  void doStuff() {}
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-04T18:03:18.173

*   如果：
*   您想从类中获取非静态成员的函数指针
*   并在课堂上使用它：
*   然后：可以工作，因为在获取成员函数地址的时候，有一个“this”指针。语法对我来说并不明显，它可能看起来有些难看，但还不错。对于真正的专家来说，这可能并不新鲜，但我长期以来一直想把它放在我的技巧包里。

这是一个完整的示例程序：

```
#include <iostream>
class CTestFncPtr
{
public:
    CTestFncPtr(int data) : mData(data)
    {
//      Switch = &CTestFncPtr::SwitchC; // Won't compile - wrong function prototype - this is type safe
        if (data == 1)
            Switch = &CTestFncPtr::SwitchA;
        else
            Switch = &CTestFncPtr::SwitchB;
    }
    void CallSwitch(char *charData)
    {
        (this->*Switch)(charData);
    }

private:
    void SwitchA(char * charData)
    {
        std::cout << "Called Switch A " << "Class Data is " << mData<<" Parameter is " << charData<< "\n";
        Switch = &CTestFncPtr::SwitchB;
    }
    void SwitchB(char * charData)
    {
        std::cout << "Called Switch B " << "Class Data is " << mData<<" Parameter is " << charData<< "\n";
        Switch = &CTestFncPtr::SwitchA;
    }
    void SwitchC()
    {
    }
    void(CTestFncPtr::*Switch)(char * charData);
    int mData;
};

int main(int argc, char * argv[])
{
    CTestFncPtr item1(1);
    item1.CallSwitch("Item1");
    item1.CallSwitch("Switched call Item 1");
    CTestFncPtr item2(0);
    item2.CallSwitch("Item2");
    item2.CallSwitch("Switched call Item 2");

    return 0;
} 
```

# wcf - 我可以在 WCF 服务中使用 wsHttpBinding 和 webHttpBinding 吗？

> ID：14315349
> 
> 赞同：2
> 
> 时间：2013-01-14T08:50:32.913
> 
> 标签：wcf, web-config, wcf-binding

我有一个自定义用户名密码 WCF 服务，需要由 Windows 客户端（Winforms 应用程序）以及 Web 客户端（html/aspx 页面）调用。我在 web.config 中有两个端点声明，但为了使其工作，我必须注释其中一个，因此，只有与该未注释端点关联的客户端类型才能访问该服务。如果我取消评论，并评论另一个，其他客户可以访问它。我不能同时保留它们，因此我无法使用两种类型的客户端访问它。

```
<service behaviorConfiguration="Behavior1" name="BeST.Service.Service">
    <endpoint address="" binding="webHttpBinding" contract="BeST.Service.IService" behaviorConfiguration="EndpBehavior"></endpoint>
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="Binding1"
     contract="BeST.Service.IService" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost/" />
      </baseAddresses>
    </host>
  </service> 
```

正如代码所示，如​​果我想让这个服务为两个客户端工作，我需要使用两个端点（两个端点之上），或者，如果有另一种方法可以完成它，请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T08:59:20.510

问题是您为两个端点提供了相同的地址。尝试为您的一个端点提供另一个相对地址，它应该可以工作。

```
<service behaviorConfiguration="Behavior1" name="BeST.Service.Service">
  <endpoint address="web" binding="webHttpBinding" contract="BeST.Service.IService" behaviorConfiguration="EndpBehavior"></endpoint>
  <endpoint address="" binding="wsHttpBinding" bindingConfiguration="Binding1"
    contract="BeST.Service.IService" />
  <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  <host>
    <baseAddresses>
      <add baseAddress="http://localhost/" />
    </baseAddresses>
  </host>
</service> 
```

# pointers - 指向结构中的指针的指针

> ID：14315352
> 
> 赞同：0
> 
> 时间：2013-01-14T08:50:37.957
> 
> 标签：pointers, struct

我有一个结构，在其中我必须指向指针（每个指针都指向一个 char 数组）。如何创建一个指向结构内这些指针之一的指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:05:19.767

假设 C：

```
struct foo {                // a struct
  char (*a)[10], (*b)[10];  // pointers to arrays[10] of char
};

struct foo x;               // create an object
char (**p)[10];             // pointer to pointer to array[10] of char
p = &x.a;                   // point to one of the pointers inside the struct 
```

# objective-c - 打破数组xcode中的链接字符串

> ID：14315353
> 
> 赞同：1
> 
> 时间：2013-01-14T08:50:51.387
> 
> 标签：objective-c

您知道如何在使用目标 c 时断开字符串并将其输入数组吗？我是 c 环境的新手，我发现很难得到这个。请帮忙

例如 x://xxx; x://soe;x://roy

结果：

1.  x://www
2.  x://soe
3.  x://roy

注意：断点“;”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:52:57.800

尝试

```
NSString *str = x://xxx; x://soe;x://roy;
NSArray *arr = [str componentsSeparatedByString:@";"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:55:39.143

请参考以下代码，这将对您有所帮助：

```
NSString *string = @"x://xxx; x://soe;x://roy";
NSArray *listItems = [string componentsSeparatedByString:@";"]; 
```

请在发布问题之前进行一些谷歌搜索。

# perl - Perl：比较 2 个哈希的键并打印最接近的键之间的差异

> ID：14315356
> 
> 赞同：1
> 
> 时间：2013-01-14T08:50:58.197
> 
> 标签：perl, hash, bioinformatics

**更新（16/1/13）**

鲍罗丁指出了另一种我完全忽略的可能性。
在*实际文件中（我手动坐下来开始查看 46 个文件，每个文件大约 10MB 大），在某些情况下，对于**File1*中的特定值，*File2*中不存在**较小**的值（但存在*较大的*值）。

 **同样存在这样的情况，对于 File1 中的特定值，*File2**中*不存在**更大的**值（但存在*较小*的值）

 **我在此处更新示例文件和所需的输出以反映此更新。

**更新（13 年 15 月 1 日）**

我已经更新了所需的输出以解决*File1*中的值与*File2中的值* **匹配**的情况。感谢 Borodin 指出这种情况。

 ** * *

我有 2 个文件，如下所示：

**文件 1**

```
 chr1   10227  
 chr1   447989  
 chr1   535362
 chr1   856788
chr1    249240496 
```

**文件2**

```
chr1    11017
chr1    11068
chr1    23525
chr1    439583
chr1    454089
chr1    460017
chr1    544711
chr1    546239
chr1    856788
chr1    249213429
chr1    249214499
chr1    249239072 
```

我需要做的是*file1*中的 foreach 值，例如。`10227`，从*file2*中 找到最接近的**两个**值。其中一个值会更大，而另一个值会更小。因此，考虑*file1*`10227` ，在*file2*中最接近的值是和。现在需要计算差异，即=和=给出如下输出（制表符分隔）：**`9250``11017``9250 - 10227``-977``11017 - 10227``790`**

 ****期望的输出**

```
chr1   10227   No   790   No Match
chr1   447989  No   6100  -8406
chr1   535362  No   9349  -75345
chr1   856788  Yes  
chr1   249240496 No No Match -25997 
```

我认为最快的方法是使用哈希来读取 2 个文件，将数字作为`keys`并赋值`1`。

到目前为止，我编写的代码给出了*file2*`10227`中所有值的差异。与和类似。我该如何阻止这种情况并仅找到最接近的数字之间的差异，一个是 > ，一个是 <*`447989``535682``10227``10227`*

 ***代码**

```
use 5.014;
use warnings;

#code to enter lsdpeak and pg4 data into hash with KEYS as the numerical values, VALUE as 1

#Assign filename
my $file1 = 'lsdpeakmid.txt';
my $file2 = 'pg4mid.txt';

#Open file
open my $fh1, '<', $file1 or die $!;
open my $fh2, '<', $file2 or die $!;

#Read in file linewise
my %hash1;
while(<$fh1>){

    my $key1 = (split)[1];
    $hash1{$key1} = 1;

}

    my %hash2;
    while(<$fh2>){
        my $key2 = (split)[1];

    }

foreach my $key1 (sort keys %hash1){

    foreach my $key2 (sort keys %hash2){

    say $key2-$key1;

    }

}

#Exit
exit; 
```

感谢您花时间解决问题。我将不胜感激任何评论/回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T11:50:01.223

散列在这里不是一个好的选择，因为找到正确边界的唯一方法`file2`是搜索值列表，而散列并不能促进这一点。

该程序的工作原理是将所有边界`file2`放入数组`@boundaries`中，然后在该数组中搜索从中读取的每个值，`file1`以找到第一个更大的边界值。那么这个边界和之前的边界是必需的，算术是在`print`语句中完成的。

请注意，如果`file2`包含*匹配*的边界，或者没有大于或不小于给定值的边界，则此代码将出现问题。

```
use strict;
use warnings;

use Data::Dump;

my $file1 = 'lsdpeakmid.txt';
my $file2 = 'pg4mid.txt';

my @boundaries = do {
  open my $fh, '<', $file2 or die $!;
  map { (split)[1] } <$fh>;
};

open my $fh, '<', $file1 or die $!;

while (my $line = <$fh>) {
  chomp $line;
  my @vals = split ' ', $line;
  my $val = $vals[-1];
  for my $i (1 .. $#boundaries) {
    if ($boundaries[$i] > $val) {
      print join(' ', @vals, $boundaries[$i] - $val, $boundaries[$i-1] - $val), "\n";
      last;
    }
  }
} 
```

**输出**

```
chr1 10227 790 -977
chr1 447989 6100 -8406
chr1 535362 9349 -75345 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:15:02.373

单程：

```
#!/usr/bin/perl
use strict;
use warnings;
use List::Util qw(first);

open my $fh1,'<','file1' or die $!;
open my $fh2,'<','file2' or die $!;
my %h1;

while(<$fh2>){
        chomp;
        my ($k,$v)=split(/\s+/);
        push @{$h1{$k}}, $v;
}
close $fh2;

while (<$fh1>){
        chomp;
        my ($k, $v)=split(/\s+/);
        my $bef=first{$_ >= $v}@{$h1{$k}};
        $bef=defined $bef?$bef-$v:"No match";
        my $aft=first{$_ <= $v}reverse @{$h1{$k}};
        $aft=defined $aft?$aft-$v:"No match";
        my $str=sprintf("%-8s %-10d %-5s %-8s %-8s",$k, $v,$bef?"No":"Yes",$bef?$bef:"",$aft?$aft:"");
        print $str, "\n";
}
close $fh1; 
```

第一个`while`循环读取第二个文件并创建一个哈希，其中键是 chr1，值是包含 chr1 的所有值的数组引用。

该`foreach`块按数字顺序对所有键进行排序。第二个`while`循环处理 file1 的记录并使用 的`first`函数`List::Util`获取结果。

该`first`函数使用了两次：一次，获取当前值的第一个最大值，第二次：获取当前值的最后一个最小值，该值是通过使用`first`ed`reverse` `sort`数组获得的。

**第一个函数**：第一个函数返回数组中满足条件的第一个数字。

`first{$_ > $v}@{$h1{$k}}`=> 这将获取数组中大于当前数字的第一个数字。说 10227，首先将返回 11017。

接下来需要的是 10227 之前的最后一个最小数字。为此，将第一个函数应用于反向数组。

`first{$_ < $v}reverse @{$h1{$k}}`=> 这将返回小于 10227 的第一个数字，并且由于数组反转，我们得到的实际上是 10227 之前的最后一个最小数字，即 9250。

在运行这个：

```
chr1     10227      No    790      No match
chr1     447989     No    6100     -8406
chr1     535362     No    9349     -75345
chr1     856788     Yes
chr1     249240496  No    No match -1424 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T11:08:02.723

首先，我们读入第二个文件并将值放入一个*数组*中。我进一步假设这`chr1`是恒定的并且可以安全地丢弃：

```
#!/usr/bin/perl
use strict; use warnings;
my @file2;
open my $fh2, "<", "file2" or die $!;
while (<$fh2>) {
  my (undef, $num) = split;
  die "the number contains illegal characters" if $num =~ /\D/;
  push @file2, $num;
}
@file2 = sort {$a <=> $b} @file2; # sort ascending
# remove previous line if sorting is already guaranteed. 
```

然后，我们定义一个 sub 来查找数组中的两个值。它只是在排序列表中找到某个值（在*O(log n)*中）的基本算法的一种变体，并且应该比迭代每个值执行得更好，至少在大集合上是这样。此外，它不需要为每个值反转整个列表。

```
sub find {
  my ($num, $arrayref) = @_;

  # exit if array is too small
  return unless @$arrayref >= 2;
  # exit if $num is outside the values of this array (-1 is last element)
  return if $num <= $arrayref->[0] or $arrayref->[-1] < $num;

   my ($lo, $hi) = (1, $#$arrayref);
  my $i = int(($lo+$hi)/2); # start in the middle

  # iterate until
  #   a) the previous index contains a number that is smaller than $num and
  #   b) the current index contains a number that is greater or equal to $num.
  until($arrayref->[$i-1] < $num and $num <= $arrayref->[$i]) {
    # make $i the next lower or upper bound.
    # instead of going into an infinite loop (which would happen if we
    # assign $i to a variable that already holds the same value), we discard
    # the value and move on towards the middle.
          # $i is too small
    if    ($num >  $arrayref->[$i]  ) { $lo = ($lo == $i ? $i+1 : $i) }
          # $i is too large
    elsif ($num <= $arrayref->[$i-1]) { $hi = ($hi == $i ? $i-1 : $i) }
          # in case I made an error:
    else                              { die "illegal state" }
    # calculate the next index
    $i  = int(($lo+$hi)/2);
  }
  return @{$arrayref}[$i-1, $i];
} 
```

其余的都是微不足道的：

```
open my $fh1, "<", "file1" or die $!;
while (<$fh1>) {
  my ($chr, $num) = split;
  die "the number contains illegal characters" if $num =~ /\D/;
  if (my ($lo, $hi) = find($num, \@file2)) {
    if ($hi == $num) {
      print join("\t", $chr, $num, "Yes"), "\n";
    } else {
      print join("\t", $chr, $num, "No", $hi-$num, $lo-$num), "\n";
    }
  } else {
    # no matching numbers were found in file 2
    print join("\t", $chr, $num, "No-match"), "\n";
  }
} 
```

输出：

```
chr1    10227   No      790     -977                                                            
chr1    447989  No      6100    -8406                                                           
chr1    535362  No      9349    -75345                                                          
chr1    856788  Yes 
```********

# ruby-on-rails-3 - 作为宝石的 Rails 应用程序

> ID：14315358
> 
> 赞同：0
> 
> 时间：2013-01-14T08:50:59.673
> 
> 标签：ruby-on-rails-3, rubygems, gem

假设我有一个 rails 应用程序。我应该怎么做才能从中创建一个 gem 并将其分发给 heroku（例如）？

# c# - 无法隐藏 div

> ID：14315365
> 
> 赞同：1
> 
> 时间：2013-01-14T08:51:13.387
> 
> 标签：c#, html

我无法隐藏代码。我已经给`Id`了 div 我也给了它 runat 服务器属性，但是在运行代码时 Div 是可见的。请帮忙。我的代码是这样的：

```
<a href="RoomTypeView.aspx">
                <div class="dash-thum-bg" id="rt" runat="server">
                    <img src="../App_Themes/Akeel/images/thumb-1.gif" />
                    <span>Room Type</span>
                </div> 
```

在我正在写的代码中

```
rt.visible=false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:52:53.620

尝试将您的 div 包裹在面板周围。然后你可以在后面的代码中隐藏面板。

```
 <asp:Panel runat="server" id="divtohide">
<a href="RoomTypeView.aspx">
            <div class="dash-thum-bg" id="rt" runat="server">
                <img src="../App_Themes/Akeel/images/thumb-1.gif" />
                <span>Room Type</span>
            </div>
 </asp:Panel> 
```

后面的代码

```
divtohide.visible = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:50:07.703

您可以使用 javascript -

```
function hideMyDiv()
{
    document.getElementById('rt').style.visibility="hidden";
} 
```

添加样式 -

```
.hidden {
display:none;
} 
```

现在通过代码隐藏调用它

# ef-code-first - EF Code First：一对一的单向关系

> ID：14315370
> 
> 赞同：0
> 
> 时间：2013-01-14T08:51:25.387
> 
> 标签：ef-code-first

我经常有以下结构：

```
MyClass
public virtual ICollection<Version> Versions { get; set; }
public virtual Version CurrentVersion { get; set; } 
```

也就是说，有一个东西列表，并且某些类都指向该列表，并且该列表中的一个特定项目-许多版本的当前版本，事件列表中的下一个即将发生的事件等。

在我的模式中，我想最终得到的是一个从 Version 指向 MyClass 的外键——这很正常。但是然后我想要一个从 MyClass 指向代表 CurrentVersion 属性的版本的外键，没有指向回来的外键 - 我不希望额外的存储或麻烦告诉版本 MyClass 它是 CurrentVersion 的，如果有的话。换句话说，我希望这第二种关系是从 MyClass 到 Version 的单向关系，即使它是一对一的。

EF Code First 给我的是第一个属性上的正常一对多，FK 从 Version 到 MyClass，但是第二个属性上的完全一对一关系，FK 指向两个方向 -所以 Version 的底层架构以 MyClass_Id 和 MyClass_Id1 结束。

那么，有没有一种方法可以在不借助 Fluent API 的情况下在 EF Code First 中获得单向关系？看起来可能 System.ComponentModel.DataAnnotations.Schema.InverseProperty 尝试了它，但它似乎没有提供一种方式来说“不要生成一个”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:42:06.097

关键是在指向返回的属性上指定 InverseProperty，以便 EF 意识到它是多对多，而不是一对一。

```
public class MyClass
{
    public int Id { get; set; }

    public Version CurrentVersion { get; set; }

    public ICollection<Version> Versions { get; set; }
}

public class Version
{
    public int Id { get; set; }

    [InverseProperty("Versions")]
    public Versioned Versioned { get; set; }
} 
```

# php - Symfony 组件缓存框

> ID：14315371
> 
> 赞同：0
> 
> 时间：2013-01-14T08:51:31.713
> 
> 标签：php, caching, symfony-1.4

我尝试在我的 symfony 项目中缓存一些组件和部分。

我设置`cache.yml`了缓存并在`settings.yml`. 当我刷新我的网站时，缓存框是蓝色的，但我认为它们应该是黄色[的，正如文档所说](http://symfony.com/legacy/doc/book/1_2/en/12-Caching)：

> 如果框为黄色，则部分取自缓存

我的缓存不起作用。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:27:03.327

解决了。

工厂.yml

```
view_cache:
  class: sfFileCache
  param:
    automatic_cleaning_factor: 0
    cache_dir:                 %SF_TEMPLATE_CACHE_DIR%
    lifetime:                  86400
    prefix:                    %SF_APP_DIR%/template 
```

# android - Set parent's activity list from a child fragment

> ID：14315378
> 
> 赞同：0
> 
> 时间：2013-01-14T08:51:58.607
> 
> 标签：android, android-activity

I have an activity which works as a pager. In this activty there are some fragments, and a ListView. Is it possible that I set the list adapter on my activity from one of my fragments?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:00:23.313

Why don't you use [**ViewPager**](http://developer.android.com/reference/android/support/v4/view/ViewPager.html) instead of inveting all by yourself. Follow the link and you will find example on using this android feature. Also, it's backward-compatible using the support library.

If it helps you what to do ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:02:48.230

You can access the `Activity` that holds the `Fragment` by calling `getActivity()` after `onActivityCreated()` in the `Fragment`s lifecycle.

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
  super.onActivityCreated(savedInstanceState);
  ListView lv = (ListView) getActivity().findViewById(R.id.your_list_view);
  lv.setAdapter(yourAdapter);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:03:25.657

You need to use `ListAdapter` for that. Have a look [here](http://developer.android.com/reference/android/app/ListFragment.html)

# iphone - 网页浏览控制器与网页浏览崩溃

> ID：14315382
> 
> 赞同：1
> 
> 时间：2013-01-14T08:52:16.033
> 
> 标签：iphone, ios, objective-c, ipad, memory-management

当我在我`contentviewcontroller`的应用程序崩溃的页面之间滑动时，我在我的 .
下面是我的代码：

```
contentviewcontroller.m

#import "ContentViewController.h"

@interface ContentViewController ()

@end

@implementation ContentViewController
@synthesize m_CtrlWebview,DocumentPath;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    m_CtrlWebview.scrollView.pagingEnabled=YES;
    m_CtrlWebview.scrollView.bounces=NO;
    m_CtrlWebview.scalesPageToFit=YES;
    m_CtrlWebview.backgroundColor=[UIColor clearColor];
    //m_CtrlWebview.scrollView.zooming=NO;
    m_CtrlWebview.scrollView.zoomScale=1.0;

    NSURL *url = [NSURL fileURLWithPath:DocumentPath isDirectory:NO];

    [m_CtrlWebview loadRequest:[NSURLRequest requestWithURL:url]];
}

-(void)dealloc
{
    [super dealloc];
}
- (void)viewDidUnload
{
    //[m_CtrlWebview stopLoading];
    [m_CtrlWebview release];
    [super viewDidUnload];
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

在根视图控制器中：

```
 #pragma mark - UIPageViewControllerDataSource Methods

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
      viewControllerBeforeViewController:(UIViewController *)viewController
{
    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)viewController DocumentPath]];
    if(currentIndex == 0)
    {
        return nil;
    }

    ContentViewController *firstViewController = [self viewControllerAtIndex:currentIndex - 1];
    // ContentViewController *secondViewController = [self viewControllerAtIndex:x+1 ];

    return firstViewController;

}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
       viewControllerAfterViewController:(UIViewController *)viewController
{
    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)viewController DocumentPath]];
    if(currentIndex == self.modelArray.count-1)
    {
        return nil;
    }
    NSString *Path=[self.modelArray objectAtIndex:currentIndex + 1];
     if  (![[NSFileManager defaultManager] fileExistsAtPath:Path])
     {
        return nil; 
     }
    else
    {
        ContentViewController *firstViewController = [self viewControllerAtIndex:currentIndex + 1];

        return firstViewController;
    }

}

- (ContentViewController *)viewControllerAtIndex:(NSUInteger)index {

    if (([self.modelArray count] == 0) || (index >= [self.modelArray count])) {
        return nil;
    }
    ContentViewController *dataViewController;
    dataViewController = [[ContentViewController alloc]initWithNibName:@"ContentViewController" bundle:nil];

    dataViewController.DocumentPath = [self.modelArray objectAtIndex:index];
    return dataViewController;

} 
```

我该如何解决这个问题？另外如何禁用网页视图的缩放？任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T04:53:06.263

```
return [dataViewController autorelease]; 
```

上面的行`- (ContentViewController *)viewControllerAtIndex:(NSUInteger)index`解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:11:20.613

从这段代码中，并不确定应用程序崩溃的原因。要更具体地捕获错误，请在 Xcode 中添加异常断点。为 Xcode 4.5 执行此操作的步骤

1.  在左窗格中选择“断点导航器”。

2.  点击左下角的“+”按钮。

3.  从弹出的菜单中，选择“添加异常断点”

4.  当应用程序在执行此设置后崩溃时，请检查您的堆栈跟踪以查看您的任何函数是否在堆栈跟踪中。

还可以启用 Zombie 对象并记录异常：

1.  转到产品 -> 编辑方案
2.  从左侧窗格中选择运行 YourApp.app。
3.  在右窗格中选择诊断。
4.  “启用僵尸对象”和“记录异常”复选框。当应用程序崩溃时，这可能会在控制台上打印一些有用的信息。

希望这可以帮助您解决问题。

# php - 为 URL 安全放置标题别名

> ID：14315383
> 
> 赞同：0
> 
> 时间：2013-01-14T08:52:17.627
> 
> 标签：php, regex

我尝试使用以下功能安全地使用该 URL，但它不适用于阿拉伯语。怎么能修好？

**[演示在这里](http://codepad.viper-7.com/A967aR)**

```
<?php
    function stringURLSafe($string)
{
    // remove any '-' from the string since they will be used as concatenaters
    $str = str_replace('-', ' ', $string);

    // Trim white spaces at beginning and end of alias and make lowercase
    $str = trim(strtolower($str));

    // Remove any duplicate whitespace, and ensure all characters are alphanumeric
    $str = preg_replace('/(\s|[^A-Za-z0-9\-])+/', '-', $str);

    // Trim dashes at beginning and end of alias
    $str = trim($str, '-');

    return $str;
}
echo stringURLSafe('موقع إخباري: مرتبط بقناة {العربية} يقدم (على) مدار'); 
```

我希望输出为：

> ```
> موقع-إخباري-مرتبط-بقناة-العربية-يقدم-على-مدار 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:54:18.677

将您的正则表达式更改为此：
`$str = preg_replace('/(\s|[^\p{Arabic}\w0-9\-])+/u', '-', $str);`
这里的结果：
موقع-إخباري-مرتبط-بقناة-العربية-يقدم-على-مدار

# php - 将结果集foreach转换为php中的for循环

> ID：14315385
> 
> 赞同：0
> 
> 时间：2013-01-14T08:52:30.463
> 
> 标签：php, codeigniter

我在 codeigniter 中做一个项目。在这里我想获取字段时间和 url 来查看。我想展示这样的东西![在此处输入图像描述](../Images/d6910f8e69a0ef729e504542b67966c1.png)

第一个字段是时间，第二个字段是 url。我使用以下代码获取值

```
foreach ($path as $row) {
    ?>
    <tr>
        <td>
            <a href="#">
                <div class="span6 pull-left"><?php echo $row->time;</div>
                <div class="span3 pull-left"><?php echo $row->url ?></div>
            </a>

        </td>
    </tr>
    <?php
}
?> 
```

但实际上第一行时间是第一行和第二行时间之间的差。第二行时间是第二行和第三行时间之间的差，依此类推。我尝试过foreach循环。但我没有任何想法来实现这个。任何人帮助我将此 foreach 循环转换为 for 循环以完成任务。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T08:58:56.687

也许像..

```
for( $i = 0 ; $i < count($path) ; $i++ ) {
    $time = $path[$i]->time - $path[$i+1]->time;
} 
```

注意最后一个索引的问题..

# javascript - 在javascript中选择并替换一个随机单词

> ID：14315396
> 
> 赞同：0
> 
> 时间：2013-01-14T08:53:05.243
> 
> 标签：javascript

我想用javascript编写一个代码，从文本中选择一个随机单词，并将其替换为另一个单词。

这是我的代码：

```
var text = "dog cat apple stone";
var keyword = text[Math.floor(Math.random()*text.length)]; // select random word
var new_phrase = text.replace( keyword, "house"); // replace for other word

document.write("<p>" + text + "</p>" );
document.write("<p>" + new_phrase + "</p>"); 
```

但是，这会替换文本中的字母而不是单词。像这样：“dog choset 苹果石”

如何选择随机单词而不是字母？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:59:14.603

使用`text[someIndex]`您从 中选择一个字符`text`。尝试拆分字符串并使用结果数组：

```
var text = "dog cat apple stone"
   ,txttmp = text.split(/\s+/)
   ,keyword = txttmp[Math.floor(Math.random()*txttmp.length)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T08:59:14.767

根据 Kepp it Simple 原则，我会说

```
var text = "dog cat apple stone";
arrText = text.split(" "); 
```

它会给你和一系列单词。替换数组中的任何单词后，您可以再次使用

```
arrText.join(" "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:09:07.663

使用数组

[http://www.w3schools.com/jsref/jsref_obj_array.asp](http://www.w3schools.com/jsref/jsref_obj_array.asp)

您可以存储这些值，然后使用索引返回它们并取回值。

```
var text=["dog","cat","apple", "stone"];

var keyword = Math.floor((Math.random()*text.length)); 
text[keyword] = "house"; // replace for other word

document.write("<p>" + text + "</p>" ); 
```

# jsf - 如何使用 f:ajax event=change 将当前迭代的项目发送到 h:selectBooleanCheckbox

> ID：14315401
> 
> 赞同：1
> 
> 时间：2013-01-14T08:53:31.937
> 
> 标签：jsf, jsf-2, datatable, valuechangelistener, selectbooleancheckbox

我有以下表格：

```
<h:form>
    <h:dataTable value="#{bean.items}" var="item">
        <h:column>
            <h:selectBooleanCheckbox  value="#{item.enabled}" valueChangeListener="#{bean.onchangeEnabled}">
                <f:ajax event="change" />
            </h:selectBooleanCheckbox>
        </h:column>
        <h:column>#{item.name}</h:column>
    </h:dataTable>
</h:form> 
```

我想获得`#{item}`或至少`#{item.name}`在值更改侦听器方法中：

```
public void onchangeEnabled(ValueChangeEvent e) {
    // I would like to get #{item.name} here too.
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T12:15:18.343

首先，该`valueChangeListener`工作是错误的工具。使用`<f:ajax listener>`. 其次，`event="change"`在复选框/单选按钮的情况下是错误的选择，因为它们的物理值实际上永远不会改变。您应该使用`event="click"`，但这已经是默认设置，因此您可以省略它。

总而言之，正确的初始代码应该如下所示：

```
<h:selectBooleanCheckbox value="#{item.enabled}">
    <f:ajax listener="#{bean.onchangeEnabled}" />
</h:selectBooleanCheckbox> 
```

和

```
public void onchangeEnabled(AjaxBehaviorEvent event) { // Note: event argument is optional.
    // ...
} 
```

一旦这样修复它，您就可以轻松地利用 EL 2.2 功能来传递方法参数：

```
<h:selectBooleanCheckbox value="#{item.enabled}">
    <f:ajax listener="#{bean.onchangeEnabled(item)}" />
</h:selectBooleanCheckbox> 
```

和

```
public void onchangeEnabled(Item item) {
    // ...
} 
```

### 也可以看看：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener)
*   [我可以将哪些值传递给 f:ajax 标记的 event 属性？](https://stackoverflow.com/questions/7886453/what-values-can-i-pass-to-the-event-attribute-of-the-fajax-tag)
*   [如何将选定的行传递给 dataTable 中的 commandLink？](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable)
*   [了解 PrimeFaces 进程/更新和 JSF f:ajax 执行/渲染属性](https://stackoverflow.com/questions/25339056/understanding-primefaces-process-update-and-jsf-fajax-execute-render-attributes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T10:47:48.953

对于 selectBooleanCheckbox，它只对事件单击做出反应，并且应该发布表单。

所以将此添加到复选框

valueChangeListener="#{mybean.myfunction}" onchange="submit();"

它应该被解雇！

# android - 如何使用 ndk-build 构建 android_external_openvpn_ics

> ID：14315404
> 
> 赞同：-1
> 
> 时间：2013-01-14T08:53:39.050
> 
> 标签：android, android-ndk, java-native-interface, external, openvpn

github上有一个项目-> [https://github.com/CyanogenMod/android_external_openvpn/tree/ics](https://github.com/CyanogenMod/android_external_openvpn/tree/ics)，
下载源代码后，我只想在Linux（Centos 6.3）中使用NDK-BUILD命令构建它，但是作者没有说什么；

所以，我只是 ndk-build 它（我有测试 ndk-build 是好的），它显示：

```
Android NDK: Could not find application project directory !    
Android NDK: Please define the NDK_PROJECT_PATH variable to point to it. 
```

什么可能导致此警告？我该如何构建它，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T08:31:31.813

当您从不正确的目录调用 ndk-build 时，通常会发生这种情况。您必须位于包含 jni 子目录的文件夹中。

或者执行错误消息告诉您的操作 - 指定 NDK_PROJECT_PATH 以更正文件夹。

```
 NDK_PROJECT_PATH=/home/cenuser/android/sphinx/PocketSphinxDemo
 export=NDK_PROJECT_PATH 
```

# java - 使用 Internet Explorer 下载文件时如何不显示打开文件对话框中的打开按钮

> ID：14315405
> 
> 赞同：0
> 
> 时间：2013-01-14T08:53:41.467
> 
> 标签：java, internet-explorer, web-applications, download, browser

我有 java 代码，我通过它设置 excel 的内容类型并将其发送到浏览器。每当使用 IE 下载它时，它会显示打开文件对话框，其中包含 OPEN、SAVE、CANCEL 按钮。我需要避免这个 OPEN 按钮，只显示 SAVE & CANCEL 按钮，如何做到这一点 java.lang. 我搜索了一下，发现如果我们在 IE 中将下载选项的元数据类型设置为 noOPEN，那么这可能会实现；但我不知道如何使用 java 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:56:27.177

您可以通过设置正确的标题来内联渲染它

```
"content-disposition", "inline;filename=somefile.someExt" 
```

或者你可以让它像附件

```
"content-disposition", "attachment;filename=somefile.someExt" 
```

在这种情况下，浏览器有自己的方式来提示用户，你**不能**改变它[除非你的浏览器提供了你的客户端可以设置的某种设置]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:15:36.810

在java中你可以使用

```
response.setHeader("X-Download-Options", "noopen"); 
```

此代码用于隐藏打开按钮。

# node.js - 如何限制节点js中的全局变量或函数

> ID：14315410
> 
> 赞同：1
> 
> 时间：2013-01-14T08:53:54.327
> 
> 标签：node.js, express

**如何限制节点js中的全局变量和函数？**

比如：需要方法

我想限制使用 require 方法。我不希望任何节点应用程序访问我在 express 之上构建的节点框架中的“fs”，它们只能需要我想要的模块。而且我想限制对进程的访问，全局范围。

假设当我为任何应用程序加载任何 js 库时

喜欢：

```
var x=require('app1.js'); 
```

在我的框架中

然后我想确保这个 app1.js 不能使用 require("fs") 访问文件系统

**app1.js**

```
var x=require("fs");
exports.hello=function(){
   console.log(typeof x.readSync);
} 
```

我希望这个控制台打印未定义；

**在这个示例中**

```
var x=require("helper.js");
exports.hello=function(){
   console.log(typeof x.hello);
} 
```

我希望这个控制台打印功能；

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-18T14:13:12.747

我会创建一个新函数，它的作用类似于require。

```
requireSafe = function(param){
    if(!isAllowedLogic(param)) return null;
    else return require(param);
} 
```

当有人提交代码时，您`var require;`在顶部附加以防止他们使用常规的`require`. 或者你在他们的提交中搜索，只有在它不包含`require`nor时才批准它`eval`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:33:39.380

Why would you want to do that?

It is not possible to change the way require works, as it is a build-in node.js function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T12:23:07.057

试试[这个](https://github.com/asvd/jailed)库，从 README 中了解它的安全性如何工作的一些细节：

> Jailed 库创建了一个 Node.js 子进程；
> 
> 子进程（下载）将包含不受信任代码的文件作为字符串加载（或者，在 DynamicPlugin 的情况下，只需将提供的字符串与代码一起使用）
> 
> 然后“使用严格”；附加到该代码的头部（为了防止使用 arguments.callee.caller 破坏沙箱）；
> 
> 最后，代码使用 vm.runInNewContext() 方法执行，其中提供的沙箱仅公开一些基本方法，如 setTimeout()，以及用于与应用程序站点进行消息传递的应用程序对象。

# iphone - cocos2d + box2d：碰撞后如何判断body？

> ID：14315412
> 
> 赞同：0
> 
> 时间：2013-01-14T08:54:14.080
> 
> 标签：iphone, ipad, cocos2d-iphone

如果两个物体发生碰撞并且我在步进函数中使用此代码获得碰撞事件：

```
std::vector<b2Body *>toDestroy;
    std::vector<MyContact>::iterator pos;

    for(pos = _contactListener->_contacts.begin();
        pos != _contactListener->_contacts.end(); ++pos) {

        MyContact contact = *pos;

        b2Body *bodyA = contact.fixtureA->GetBody();
        b2Body *bodyB = contact.fixtureB->GetBody();

        if (bodyA->GetUserData() != NULL && bodyB->GetUserData() != NULL) {

        }

    } 
```

我如何确定是否让 bodyA 击中 bodyB 而不是 bodyC？

最简单的方法是什么？

# ruby-on-rails - 如何更改名称 Procfile - gem foreman

> ID：14315414
> 
> 赞同：1
> 
> 时间：2013-01-14T08:54:24.250
> 
> 标签：ruby-on-rails, ruby

我在 heroku unicorn 上使用，Procfile 已经被 Heroku 用于独角兽服务器。我想在开发中使用 gem foreman ，是否可以配置 gem 使用与 Procfile 不同的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:23:40.983

```
foreman start --procfile myfile 
```

或者

```
foreman start -f myfile 
```

话虽如此，foreman 和 Procfiles 的整个想法是在任何地方使用相同的，这样您就可以使您的开发环境尽可能接近您的生产环境。

我建议您查看[此处](http://ddollar.github.com/foreman/)的文档并确保您确实需要一个完整的单独文件进行开发。

# c# - 将文件从 ASP.NET Web api 返回到 android

> ID：14315415
> 
> 赞同：1
> 
> 时间：2013-01-14T08:54:30.267
> 
> 标签：c#, android

我有一个 ASP.Net web api，它旨在通过 Internet 发送一个新文件，编码为`Base64`. 为此，我有一个公开的 REST 服务：

```
 string imei = ControllerContext.Request.Headers.GetValues("IMEI").FirstOrDefault();
    byte[] FileAsBytes = null;
    String base64 = null;
    var svcs = new CrudService.CrudServiceClient();

    if (svcs.IsDeviceAccepted(imei))
    {
        FileAsBytes = svcs.DownloadSoftwareVersion();
    }

    if(FileAsBytes != null)
    {
         base64 = Convert.ToBase64String(FileAsBytes);
    }

    return base64; 
```

还有一个私有服务，CRUD 服务，它直接与数据库和核心层进行通信。

经过一些调试后，我发现该服务返回了正确的长度，类似于`4194304 bytes`，这似乎与文件的大小相对应。但是在客户端，我在一个内部联系这个服务`AsyncTask`：

```
 @Override
    protected String doInBackground(String... params) {
        Log.i("UpdateManager: ", "Inside doInBackground");

        try {

            String imei = params[0];
            String urlString = "http://10.118.18.50/Mobile.RESTPublicService/api/SoftwareUpdate";

            HttpPost post = new HttpPost(urlString);
            post.addHeader("IMEI", imei);
            response = httpClient.execute(post);

            Log.w("Update-Response: ",
                    Integer.toString(response.getStatusLine().getStatusCode())
                            + " " + response.getStatusLine());

            if (response.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {

                is = response.getEntity().getContent();
                IOUtils.copy(is, writer, "UTF-8");

                _log.debug(writer.toString());

                Log.w("CONTENT: ", writer.toString());
                byte[] result = new byte[MAX_FILE_SIZE]; //7242880 b
                result = decodeBase64(writer.toString());

                Log.w("BYTE ARRAY LENGTH: ", Integer.toString(result.length));

            }

        } catch (ClientProtocolException e) {
            Log.e("Client: ", e.getMessage());
            _log.error(e.getMessage());
            return FAILED_DUE_TO_EXCEPTION;
        } catch (IOException e) {
            Log.e("IO: ", e.getMessage());
            _log.error(e.getMessage());
            return FAILED_DUE_TO_EXCEPTION;
        }
        return response.getStatusLine().toString();
    } 
```

这里有趣的一点是`result = decodeBase64(writer.toString());`decodeBase64 方法：

```
protected byte[] decodeBase64(String s) {
        return Base64.decode(s);
    } 
```

字符串`s`是我从网络服务中得到的：

```
UEsDBBQACAgIAJteK0IAAAAAAAAAAAAAAAAZAAQAcmVzL2FuaW0vYWN0aXZpdHlmYWRlLnhtbP7KAABdkN9OwjAchc+PbW4YErnwgkRuuSGEek1MDI/SsMkmbF26es8D+AA+hs+hD6Wn0GXKab60/fq/ETK8CyCY4xNgL4TuCUPuyANZkEeyIXvySiaTqnGFbc1RO2MxHr9YU2+PbamRps5cWlmWv1ntKtNQ6ia3psqxXJbOtRul 
```

这不是整个文件，但我可以看到这是`base64 encoded`

当这个字符串被传递给`decodeBase64`方法时，我只收到这个错误消息：

![在此处输入图像描述](../Images/d1f3614fbdc8f467b2129e6f174cfbb1.png)

然后应用程序终止。这是处理`Base64`字符串的方法吗？有人可以建议我如何从这个`base64`字符串创建一个文件吗？我的第一个想法是将其转换为`byte`数组，然后创建一个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:05:15.003

在我看来，您在那里有一个带引号的字符串 - 因为`"`似乎是让它爆炸的原因。Web 服务是否返回 JSON 字符串？如果是，那么它将被引号包围，您必须将其去掉才能从 base 64 解析它。

# android - Phone Gap 外部 HTML 集成

> ID：14315422
> 
> 赞同：1
> 
> 时间：2013-01-14T08:54:50.203
> 
> 标签：android, ios, html, iframe, cordova

我已经使用 phone gap 构建了一个应用程序，并计划发布适用于 Apple iOS 和 Android OS 的应用程序。

它本身的应用程序相当简单，本质上是一个美化的 HTML 网站，带有一些用于幻灯片功能等的 jQuery 移动插件。

客户有一个现有的文档管理系统，根据要求，我已对其进行了修改以兼容移动显示器。这样用户就可以写笔记并将其从手机直接保存到系统中。

Web 文档管理系统受登录限制并锁定到一组选定的静态 IP，并且由于该应用程序正在公开，因此希望将数据库的功能限制在与 Web 系统相同的约束中......

出于所有意图和目的，他们希望它成为应用程序中的 iframe。所以嘿，这就是我所做的...... iFrame 完成，嘿，presto 做了一个梦，哦，等等，表单功能都不起作用。我无法上传文件或类似的东西：/

所以我尝试使用但没有这样的运气：/同样的问题。

周末我查看了[http://docs.phonegap.com/en/2.2.0/guide_cordova-webview_android.md.html](http://docs.phonegap.com/en/2.2.0/guide_cordova-webview_android.md.html)但这看起来完全是错误的方向。

我整个周末都在寻找能够保留功能的 iFrame 替代品，并且在我们说话时仍在寻找。

***我能否强调***一下，此功能适用于 Android 版 Chrome、Android 原生浏览器以及 iOS 的 safari 浏览器的网络系统。

我本质上需要一种创建类似 iframe 的方法，但具有本机浏览器的功能：/ = 迷惑......

# android - android工具预览频道

> ID：14315423
> 
> 赞同：0
> 
> 时间：2013-01-14T08:54:59.473
> 
> 标签：android, sdk

我有 smtn 让我在这里发疯，我有 Android SDK、Eclipse juno、win 64，我有这个***工具（预览频道）*** 显示为未安装，当我试图安装它时，然后是“android sdk平台工具”和 sdk 工具（在此之上）未安装，因此我想安装两者或仅删除此预览频道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:02:05.950

您不能同时安装两者。要禁用预览通道，请打开 SDK 管理器，从菜单中选择工具 -> 选项，然后取消选中“启用预览工具”框。

# opengl - 找出硬件是否支持特定的 OpenGL 功能

> ID：14315424
> 
> 赞同：1
> 
> 时间：2013-01-14T08:55:03.077
> 
> 标签：opengl, openinventor

如何确定硬件是否支持特定的 OpenGL 功能？就我而言，我想知道硬件中是否可以使用双面照明。使用 OpenInventor 的方法也一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:57:46.940

一般来说，你不会。

如果某些东西是核心 OpenGL 的一部分，那么它应该由 OpenGL 实现来实现。这是否发生在“硬件中”不是您可以检测到的。

对于基于扩展的功能，您显然可以检查扩展是否存在。但除此之外，除了更好地了解运行代码的硬件之外，您无能为力。

# entity-framework - 实体框架花费大量时间初始化模型

> ID：14315425
> 
> 赞同：2
> 
> 时间：2013-01-14T08:55:04.670
> 
> 标签：entity-framework, ef-code-first

我面临一个问题，即 EF 需要花费大量时间（跨越数小时）来初始化模型。该模型如下所示。从 A1 派生的类大约有 20 个，从 A2 派生的类大约有 30 个。

![在此处输入图像描述](../Images/037b142f81341fbc39bb2e7ac73ceccc.png)

我不得不从 TPT 转向 TPH 策略来[解决](https://stackoverflow.com/questions/14171506/out-of-memory-exception-while-retrieving-a-lazy-loaded-list-in-entity-framewor)与内存使用相关的问题。从那时起，我试图弄清楚这个问题。

问题是通过创建一个类型为“A”的单个实例，将其添加到`List<A>`另一个实体的属性并提交这些更改而产生的。此刻，它已经花费了大约 2.5 小时，还没有提交更改！

闯入代码（等了大约一个小时完成后），调用堆栈为：

```
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.IfThenElse(System.Data.Common.Utils.Boolean.Vertex condition, System.Data.Common.Utils.Boolean.Vertex then, System.Data.Common.Utils.Boolean.Vertex else) + 0x14e bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.And.AnonymousMethod__1(System.Data.Common.Utils.Boolean.Vertex left, System.Data.Common.Utils.Boolean.Vertex right) + 0x29 bytes 
System.Core.dll!System.Linq.Enumerable.Aggregate<System.Data.Common.Utils.Boolean.Vertex,System.Data.Common.Utils.Boolean.Vertex>(System.Collections.Generic.IEnumerable<System.Data.Common.Utils.Boolean.Vertex> source, System.Data.Common.Utils.Boolean.Vertex seed, System.Func<System.Data.Common.Utils.Boolean.Vertex,System.Data.Common.Utils.Boolean.Vertex,System.Data.Common.Utils.Boolean.Vertex> func) + 0x99 bytes 
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Solver.And(System.Collections.Generic.IEnumerable<System.Data.Common.Utils.Boolean.Vertex> children) + 0x90 bytes   
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.ToDecisionDiagramConverter<System.Data.Common.Utils.Boolean.DomainConstraint<System.Data.Mapping.ViewGeneration.Structures.BoolLiteral,System.Data.Mapping.ViewGeneration.Structures.Constant>>.VisitAnd(System.Data.Common.Utils.Boolean.AndExpr<System.Data.Common.Utils.Boolean.DomainConstraint<System.Data.Mapping.ViewGeneration.Structures.BoolLiteral,System.Data.Mapping.ViewGeneration.Structures.Constant>> expression) + 0x77 bytes 
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.AndExpr<System.__Canon>.Accept<System.__Canon>(System.Data.Common.Utils.Boolean.Visitor<System.__Canon,System.__Canon> visitor) + 0xc bytes 
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.ToDecisionDiagramConverter<System.Data.Common.Utils.Boolean.DomainConstraint<System.Data.Mapping.ViewGeneration.Structures.BoolLiteral,System.Data.Mapping.ViewGeneration.Structures.Constant>>.TranslateToRobdd(System.Data.Common.Utils.Boolean.BoolExpr<System.Data.Common.Utils.Boolean.DomainConstraint<System.Data.Mapping.ViewGeneration.Structures.BoolLiteral,System.Data.Mapping.ViewGeneration.Structures.Constant>> expr, System.Data.Common.Utils.Boolean.ConversionContext<System.Data.Common.Utils.Boolean.DomainConstraint<System.Data.Mapping.ViewGeneration.Structures.BoolLiteral,System.Data.Mapping.ViewGeneration.Structures.Constant>> context) + 0x72 bytes 
System.Data.Entity.dll!System.Data.Common.Utils.Boolean.Converter<System.Data.Common.Utils.Boolean.DomainConstraint<System.Data.Mapping.ViewGeneration.Structures.BoolLiteral,System.Data.Mapping.ViewGeneration.Structures.Constant>>.Converter(System.Data.Common.Utils.Boolean.BoolExpr<System.Data.Common.Utils.Boolean.DomainConstraint<System.Data.Mapping.ViewGeneration.Structures.BoolLiteral,System.Data.Mapping.ViewGeneration.Structures.Constant>> expr, System.Data.Common.Utils.Boolean.ConversionContext<System.Data.Common.Utils.Boolean.DomainConstraint<System.Data.Mapping.ViewGeneration.Structures.BoolLiteral,System.Data.Mapping.ViewGeneration.Structures.Constant>> context) + 0x46 bytes 
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.QueryRewriting.FragmentQueryProcessor.IsSatisfiable(System.Data.Mapping.ViewGeneration.Structures.BoolExpression condition) + 0xac bytes  
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.QueryRewriting.FragmentQueryProcessor.IsSatisfiable(System.Data.Mapping.ViewGeneration.QueryRewriting.FragmentQuery query) + 0x8 bytes    
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.Structures.CellTreeNode.IsEmptyRightFragmentQuery.get() + 0x1e bytes  
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.BasicViewGenerator.IsDisjoint(System.Data.Mapping.ViewGeneration.Structures.CellTreeNode n1, System.Data.Mapping.ViewGeneration.Structures.CellTreeNode n2) + 0xbb bytes  
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.BasicViewGenerator.TryAddChildToGroup(System.Data.Mapping.ViewGeneration.Structures.CellTreeOpType opTypeToIsolate, System.Data.Mapping.ViewGeneration.Structures.CellTreeNode childNode, System.Data.Mapping.ViewGeneration.Structures.OpCellTreeNode groupNode) + 0x3f bytes    
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.BasicViewGenerator.IsolateByOperator(System.Data.Mapping.ViewGeneration.Structures.CellTreeNode rootNode, System.Data.Mapping.ViewGeneration.Structures.CellTreeOpType opTypeToIsolate) + 0x1eb bytes 
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.BasicViewGenerator.CreateViewExpression() + 0xeb bytes    
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.QueryRewriting.QueryRewriter.GenerateViewComponents() + 0x12a bytes   
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.ViewGenerator.GenerateViewsForExtentAndType(System.Data.Metadata.Edm.EdmType generatedType, System.Data.Mapping.ViewGeneration.ViewgenContext context, System.Data.Mapping.ViewGeneration.Structures.CqlIdentifiers identifiers, System.Data.Common.Utils.KeyToListMap<System.Data.Metadata.Edm.EntitySetBase,System.Data.Mapping.ViewGeneration.GeneratedView> views, System.Data.Mapping.ViewGeneration.ViewGenMode mode) + 0x2f bytes  
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.ViewGenerator.GenerateDirectionalViewsForExtent(System.Data.Mapping.ViewGeneration.Structures.ViewTarget viewTarget, System.Data.Metadata.Edm.EntitySetBase extent, System.Data.Mapping.ViewGeneration.Structures.CqlIdentifiers identifiers, System.Data.Common.Utils.KeyToListMap<System.Data.Metadata.Edm.EntitySetBase,System.Data.Mapping.ViewGeneration.GeneratedView> views) + 0x58 bytes  
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.ViewGenerator.GenerateDirectionalViews(System.Data.Mapping.ViewGeneration.Structures.ViewTarget viewTarget, System.Data.Mapping.ViewGeneration.Structures.CqlIdentifiers identifiers, System.Data.Common.Utils.KeyToListMap<System.Data.Metadata.Edm.EntitySetBase,System.Data.Mapping.ViewGeneration.GeneratedView> views) + 0xce bytes  
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.ViewGenerator.GenerateAllBidirectionalViews(System.Data.Common.Utils.KeyToListMap<System.Data.Metadata.Edm.EntitySetBase,System.Data.Mapping.ViewGeneration.GeneratedView> views, System.Data.Mapping.ViewGeneration.Structures.CqlIdentifiers identifiers) + 0xd7 bytes  
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.ViewgenGatekeeper.GenerateViewsFromCells(System.Collections.Generic.List<System.Data.Mapping.ViewGeneration.Structures.Cell> cells, System.Data.Mapping.ViewGeneration.ConfigViewGenerator config, System.Data.Mapping.ViewGeneration.Structures.CqlIdentifiers identifiers, System.Data.Mapping.StorageEntityContainerMapping containerMapping) + 0x1aa bytes    
System.Data.Entity.dll!System.Data.Mapping.ViewGeneration.ViewgenGatekeeper.GenerateViewsFromMapping(System.Data.Mapping.StorageEntityContainerMapping containerMapping, System.Data.Mapping.ViewGeneration.ConfigViewGenerator config) + 0xbf bytes    
System.Data.Entity.dll!System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.SerializedGenerateViews(System.Data.Mapping.StorageEntityContainerMapping entityContainerMap, System.Collections.Generic.Dictionary<System.Data.Metadata.Edm.EntitySetBase,System.Data.Mapping.ViewGeneration.GeneratedView> resultDictionary) + 0x3a bytes  
System.Data.Entity.dll!System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.SerializedGetGeneratedViews(System.Data.Metadata.Edm.EntityContainer container) + 0xd2 bytes 
System.Data.Entity.dll!System.Data.Common.Utils.Memoizer<System.__Canon,System.__Canon>.Evaluate.AnonymousMethod__0() + 0x13 bytes  
System.Data.Entity.dll!System.Data.Common.Utils.Memoizer<System.Data.Metadata.Edm.EntityContainer,System.Collections.Generic.Dictionary<System.Data.Metadata.Edm.EntitySetBase,System.Data.Mapping.ViewGeneration.GeneratedView>>.Result.GetValue() + 0x69 bytes    
System.Data.Entity.dll!System.Data.Common.Utils.Memoizer<System.Data.Metadata.Edm.EntityContainer,System.Collections.Generic.Dictionary<System.Data.Metadata.Edm.EntitySetBase,System.Data.Mapping.ViewGeneration.GeneratedView>>.Evaluate(System.Data.Metadata.Edm.EntityContainer arg) + 0x6e bytes   
System.Data.Entity.dll!System.Data.Mapping.StorageMappingItemCollection.ViewDictionary.GetGeneratedView(System.Data.Metadata.Edm.EntitySetBase extent, System.Data.Metadata.Edm.MetadataWorkspace workspace, System.Data.Mapping.StorageMappingItemCollection storageMappingItemCollection) + 0x49 bytes    
System.Data.Entity.dll!System.Data.Mapping.Update.Internal.ViewLoader.InitializeEntitySet(System.Data.Metadata.Edm.EntitySetBase entitySetBase, System.Data.Metadata.Edm.MetadataWorkspace workspace) + 0x74 bytes  
System.Data.Entity.dll!System.Data.Mapping.Update.Internal.ViewLoader.SyncInitializeEntitySet<System.__Canon,System.__Canon>(System.Data.Metadata.Edm.EntitySetBase entitySetBase, System.Data.Metadata.Edm.MetadataWorkspace workspace, System.Func<System.__Canon,System.__Canon> evaluate, System.__Canon arg) + 0xdf bytes  
System.Data.Entity.dll!System.Data.Mapping.Update.Internal.ViewLoader.SyncGetValue<System.Data.Metadata.Edm.AssociationSet,System.Data.Mapping.Update.Internal.AssociationSetMetadata>(System.Data.Metadata.Edm.EntitySetBase entitySetBase, System.Data.Metadata.Edm.MetadataWorkspace workspace, System.Collections.Generic.Dictionary<System.Data.Metadata.Edm.AssociationSet,System.Data.Mapping.Update.Internal.AssociationSetMetadata> dictionary, System.Data.Metadata.Edm.AssociationSet key) + 0x9c bytes  
System.Data.Entity.dll!System.Data.Mapping.Update.Internal.UpdateTranslator.ValidateAndRegisterStateEntry(System.Data.IEntityStateEntry stateEntry) + 0x109 bytes   
System.Data.Entity.dll!System.Data.Mapping.Update.Internal.UpdateTranslator.LoadStateEntry(System.Data.IEntityStateEntry stateEntry) + 0x23 bytes   
System.Data.Entity.dll!System.Data.Mapping.Update.Internal.UpdateTranslator.PullModifiedEntriesFromStateManager() + 0x156 bytes 
System.Data.Entity.dll!System.Data.Mapping.Update.Internal.UpdateTranslator.ProduceCommands() + 0x1a bytes  
System.Data.Entity.dll!System.Data.Mapping.Update.Internal.UpdateTranslator.Update(System.Data.IEntityStateManager stateManager, System.Data.IEntityAdapter adapter) + 0xc9 bytes   
System.Data.Entity.dll!System.Data.EntityClient.EntityAdapter.Update(System.Data.IEntityStateManager entityCache) + 0x93 bytes  
System.Data.Entity.dll!System.Data.Objects.ObjectContext.SaveChanges(System.Data.Objects.SaveOptions options) + 0x23c bytes 
EntityFramework.dll!System.Data.Entity.Internal.InternalContext.SaveChanges() + 0x144 bytes 
EntityFramework.dll!System.Data.Entity.Internal.LazyInternalContext.SaveChanges() + 0x36 bytes  
EntityFramework.dll!System.Data.Entity.DbContext.SaveChanges() + 0x35 bytes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:22:20.883

从您显示的堆栈跟踪来看，在我看来问题出在视图生成中。由于您首先使用代码，因此我鼓励您尝试[EF6](http://entityframework.codeplex.com)，其中包含用于视图生成的性能改进。对于以前的版本作为解决方法，您可以预先生成视图（例如，使用 EF Power Tools 或我创建的模板[http://visualstudiogallery.msdn.microsoft.com/ae7730ce-ddab-470f-8456-1b313cd2c44d](http://visualstudiogallery.msdn.microsoft.com/ae7730ce-ddab-470f-8456-1b313cd2c44d)）。创建视图仍然需要很长时间，但它将是在设计时而不是运行时。

# c# - 数据集再次检索

> ID：14315426
> 
> 赞同：0
> 
> 时间：2013-01-14T08:55:08.640
> 
> 标签：c#, dataset

是否可以检索已经填充的数据`Dataset`？示例我`Customer`从 a 中填充了数据集“” `form1`，然后我想再次检索数据集“ `Customer`”`form2`而不执行 SQL 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:58:45.720

Create a `DataSet` property on the second form and pass the values from `form1`'s dataset to this property.

```
public class Form1
{
    public DataSet ds;

    // You have already filled your DataSet so I'll leave that code out
    public void ShowForm2()
    {
        Form2 frm = new Form2();
        frm.MyDataSet = ds;
        frm.Show();
    }
}

public class Form2
{
    public DataSet MyDataSet { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:01:14.857

```
public class Form1
{
    private DataSet _myDataSet;
    // do things
    private void fillMyDataSet()
    {
        //fill your dataset
    }
    public dataSet GetMyDataSet()
    {
        if(_myDataSet != null)
            return _myDataSet;
        else
        {
            return null;
        }
    }
} 
```

然后在您的表格 2 中，您所要做的就是：

```
DataSet myOtherDataSet = Form1.GetMyDataSet(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:05:51.493

您可以将其存储在的属性中`Form1`并将其实例传递`Form1`给`Form2`：

```
public class Form1:Form 
{
    public DataSet Data { get; set; }

    public void ShowForm2()
    {
        Form2 child = new Form2(this);
    }
}

public class Form2 : Form
{
    public Form2(Form1 parent) { Parent = parent; }
    public Form1 Parent { get; set; }

    public void SomeMethod()
    {
        // now you can use the DataSet of Form1 via Parent proprty:
        DataSet data = this.Parent.Data;
    }
} 
```

# c++ - 如何通过 InDesign/Illustrator 路径点绘制曲线？

> ID：14315430
> 
> 赞同：1
> 
> 时间：2013-01-14T08:55:41.813
> 
> 标签：c++, delphi, adobe-indesign, adobe-illustrator, bezier

以下数字是*Adob​​e InDesign*中一条非常简单的曲线的路径点：

```
pathPoint0 = app.selection[0].paths[0].pathPoints[0]  // PointType: SMOOTH
pathPoint1 = app.selection[0].paths[0].pathPoints[1]  // PointType: PLAIN

pathPoint0.leftDirection : {x=87.32570997045623, y=30.81406367905744}   
pathPoint0.anchor : {x=67.69218412206757, y=134.53280706833522}  
pathPoint0.rightDirection : {x=48.0586582736789, y=238.25155045761298}  

pathPoint1.anchor : {117.05865827421783, 143.2515504576449} 
```

该曲线包含 2 个路径点，一个平滑点和一个普通点。

InDesign 简单曲线：（[来源：][[no-ip.org](http://doxy.no-ip.org/idcurve.png)][）]
[![](../Images/1cc97f48dcc539dd7c38584c474fb37c.png)](https://i.stack.imgur.com/Fuj1T.png)

我试图通过这段代码绘制这条曲线：

```
MoveToEx(hDC, 67, 134, NULL);  
POINT points[] = {{87, 30}, {48, 238}, {117, 143}};  
PolyBezierTo(hDC, points, 3); 
```

但我不能画同样的曲线，我画的曲线是：

[![](../Images/0758933815ecb44913e4b6f9c3a476e9.png)](https://i.stack.imgur.com/K8CHT.png)
[（来源：[no-ip.org](http://doxy.no-ip.org/mycurve.png)）]

我的错误在哪里？是否需要任何转换？
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T09:05:42.287

唔...

```
MoveToEx(hDC, 67, 134, NULL);  
POINT points[] = {{87, 30}, {48, 238}, {117, 143}}; 
```

您的第一点是 67,134，第二点是 87,30，第三点是 48,238。

Y 值分别为 134、30 和 238，我预计你会得到什么——一条线朝一个方向走，然后又突然回到相反的方向。

您从 InDesign 获得的第一个点是“方向”点——但对于 PolyBezier，第一个和最后一个点是锚点。我不是很确定，但我认为您想要的是重新排列点，以便您的锚点排在第一位，并且 InDesign 的“方向”点用作两者之间的两个控制点：

```
POINT points[] = {{87, 30}, {67, 134}, {48,238}, {117, 143}};   
//                 anchor,   control,   control,  anchor
PolyBezier(hDC, points, 4); 
```

除非您使用 MoveTo/LineTo（等等），否则我只会使用 PolyBezier 而不是 PolyBezierTo - 将所有数据保存在一个地方。

# c# - 从重载集中获得最佳匹配重载

> ID：14315437
> 
> 赞同：5
> 
> 时间：2013-01-14T08:56:11.143
> 
> 标签：c#, .net, overload-resolution

假设我有一堂课如下：

```
public class AcceptMethods
{
    public int Accept(string s, int k = 1)
    {
        return 1;
    }

    public int Accept(object s)
    {
        return 2;
    }

    public int Accept(IEnumerable<object> s)
    {
        return 7;
    }
    public int Accept(IList<object> s)
    {
        return 4;
    }
} 
```

现在，如果我尝试在代码中使用它，我会使用这样的东西：

```
 object[] list = new object[] { "a", new object[0], "c", "d" };
        Assert.AreEqual(7, list.Select((a)=>((int)new AcceptMethods().Accept((dynamic)a))).Sum()); 
```

它是 7 的原因是因为重载决议更喜欢 [ `IList<object>`] 而不是 [ `IEnumerable<object>`] 和 [ `object`]，并且因为 [ `string`, `int=default`] 优先于 [ `object`]。

在我的场景中，我想使用反射获得最佳匹配的重载。换句话说：“最佳”被定义为“c#重载决议”。例如：

```
int sum = 0;
foreach (var item in list)
{
    var method = GetBestMatching(typeof(AcceptMethods).GetMethods(), item.GetType());
    sum += (int)method.Invoke(myObject, new object[]{item});
}
Assert.AreEqual(7, sum); 
```

虽然我绘制的场景只有 1 个参数，但我寻求的解决方案可以有多个参数。

**更新 1**：

因为我收到一条评论，由于重载解决方案实现的困难（我很清楚），这对 SO 来说太难了，我倾向于发送更新。为了给我的论点一些力量，这是我的第一次尝试，它使用处理重载决议的默认 .NET 绑定器：

```
 private MethodBase GetBestMatching(IEnumerable<MethodInfo> methods, Type[] parameters)
    {
        return Type.DefaultBinder.SelectMethod(BindingFlags.Instance | BindingFlags.Public | BindingFlags.OptionalParamBinding | BindingFlags.InvokeMethod,
                        methods.ToArray(), parameters, null);
    } 
```

这个版本*似乎已经正确地进行了简单的重载解析*，但无法使用可选参数。因为 .NET afaik 与我在这里展示的类型绑定一起工作，所以我认为该解决方案可以相当容易地实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T09:00:48.557

这是一个*庞大的*主题，需要大量的工作，在我看来，当然不能包含在一个 SO 答案中。我建议您通读 C# 规范并阅读定义重载解析的正式规则（另外，请注意泛型方法）并尝试将它们实现到满足您需求的程度。

*更新*

可选的（即具有默认值的参数）不是一个简单的情况 - 反射绑定器根本不会尝试填充它们 - 这是因为编译器的工作是识别默认值，将它们拉出并将它们注入到调用这样的方法。

您需要一种类似这样的多遍方法（注意 - 不包括泛型）：

1.  手动搜索参数数量和这些参数类型与您获得的参数数量和类型*完全匹配的方法。*如果你找到一个匹配 - 使用它并铺开。

2.  现在为您的重载选择确定方法的“候选列表”（通常是按名称 - 您也可以在这里排除泛型 - 除非您也打算尝试绑定它们）。

3.  如果这些方法都没有可选参数，那么您可以继续并根据您的问题使用默认绑定器来查找匹配项（如果没有，您需要基于类型的参数/参数排名算法 - 如果是这样，跳至 5)。

4.  重新运行 3 中构建的候选列表），取出所有可选参数并将它们的默认值合并到您自己的参数列表中（此时您可能需要为每个方法构建一组单独的参数，包括那些您已提供，但也是默认值）。

5.  运行您在 3) 和可能 4) 中构建的这些方法的排名算法，以确定最佳匹配（您似乎对此有很好的处理，所以我不打算在这里全部介绍 - 这不是一个简单的算法，我坦率地说，这里也不能逐字引用！）。

6.  你的排名算法应该产生一个明确的获胜方法——即具有独特的高分或类似的。如果你得到一个明显的赢家，那么这就是你绑定的那个。否则你有一个模棱两可的，你必须铺开。

此时您可能对我自己的 SO 感兴趣 -[默认参数和反射：如果 ParameterInfo.IsOptional 那么 DefaultValue 总是可靠的吗？](https://stackoverflow.com/questions/9977530/default-parameters-and-reflection-if-parameterinfo-isoptional-then-is-defaultva)- 这应该可以帮助您识别具有默认参数的方法，以及如何将它们取出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T11:17:07.707

对于其他想要进行运行时重载解析的人，这是关于如何实现它的相当完整的描述。

重要的附带说明是“动态”技巧也不适用于所有场景（特别是：泛型）；似乎编译器比运行时行为更灵活。

另请注意，这不是一个完整的算法/实现（或者至少我认为不是），但在大多数情况下都有效，包括不过。我发现这在我迄今为止遇到的所有情况下都有效，包括像数组协方差这样的困难情况。

评分算法的工作原理如下：

*   如果参数类型 == 源类型：分数 = 0
*   如果参数是有效的泛型类型参数（泛型约束）：score = 1
*   如果源类型可隐式转换为参数类型：分数 = 2（请参阅：http: [//msdn.microsoft.com/en-us/library/y5b434w4.aspx](http://msdn.microsoft.com/en-us/library/y5b434w4.aspx)了解所有规则）
*   如果需要填写一个默认参数：score = 3
*   否则计算兼容性分数的分数如下

兼容性分数是类型 A 和类型 B 之间最严格的转换（包括和协变、逆变）。例如，string[] 有 1 次到 IList 的转换（使用 object[] 然后 IList）和 2 次到 IEnumerable 的转换（1\. 通过使用 object[] 然后 IEnumerable 或 2\. 通过 IEnumerable）。因此，IList 是更严格的转换，因此被选中。

计算转化次数很容易：

```
 int cnt = CountCompatible(parameter.ParameterType, sourceType.GetInterfaces()) +
                      CountCompatible(parameter.ParameterType, sourceType.GetBaseTypes()) +
                      CountCompatible(parameter.ParameterType, new Type[] { sourceType });
            [...]

    private static int CountCompatible(Type dst, IEnumerable<Type> types)
    {
        int cnt = 0;
        foreach (var t in types)
        {
            if (dst.IsAssignableFrom(t))
            {
                ++cnt;
            }
        }
        return cnt;
    } 
```

为了确保在使用更严格的转换时选择更好的分数，我将分数计算为'score = 5 - 1.0 / (cnt + 2);'。+2 确保您永远不会除以 0 或 1，从而得到 4 到 5 之间的分数。

To do overload resolution, select the method with the minimum score for all arguments. Make sure you enter default method arguments properly when invoking (see the excellent link by Andras above) and make sure you fill in the generic arguments before you return the method. If you encounter a draw for the best method: the best resolution is to throw an exception.

In case you wonder, yes... it's quite a bit of work to get it all working correctly... I plan to make a working version available in my framework once that's done. (You'll see the moment my profile has a working website link :-) )

# android - 线程在 Android 中更新 UI

> ID：14315438
> 
> 赞同：-1
> 
> 时间：2013-01-14T08:56:25.263
> 
> 标签：android, textview

我开始一个`thread`在`activity`. 中有一个构造函数`textview`。更新运行时`thread`没有错误。`setText``textview`

但是，如果我新建一个`thread`不带参数的，然后`setTextView (TextView)`在`setText()`运行.. 有错误。

为什么会出现这个？

编辑：我的代码

```
package extthread;

import android.widget.TextView;

public class MyUpdateUIThread extends Thread {

private TextView textView1;

public MyUpdateUIThread(TextView textView1) {
super();
this.textView1 = textView1;
}

@Override
public void run() {
super.run();
textView1.setText("zzzzzzzzzzzzzz");
}

}

------------------------------
package testtest.test.run;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import extthread.MyUpdateUIThread;

public class Main extends Activity {
TextView textView;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

textView = (TextView) this.findViewById(R.id.textView1);
Thread thread = new Thread(new MyUpdateUIThread(textView));
thread.start();

}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T08:59:45.720

在 Thread 的 run 方法中使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)将 TextView 更新为：

```
Your_Current_Activity.this.runOnUiThread(new Runnable() {
    public void run() {

             //update textview here
    }
}); 
```

**编辑 ：**

就像您当前的代码一样，线程来自单独的类。那么您需要将 Main Activity 实例传递给 Thread 类以`runOnUiThread`在`MyUpdateUIThread`thread 中访问。将您的`MyUpdateUIThread`类构造函数更改为：

```
private TextView textView1;
Activity activity;
public MyUpdateUIThread(TextView textView1,Activity activity) {
super();
this.textView1 = textView1;
this.activity=activity;
}

@Override
public void run() {
super.run();
activity.runOnUiThread(new Runnable() {
    public void run() {

       //update textview here
       textView1.setText("zzzzzzzzzzzzzz");
    }
});

} 
```

`MyUpdateUIThread`并在 Main Activity 中创建对象：

```
Thread thread = new Thread(new MyUpdateUIThread(textView,Main.this)); 
```

# javascript - 使用javascript移动css缩放的div

> ID：14315440
> 
> 赞同：0
> 
> 时间：2013-01-14T08:56:37.837
> 
> 标签：javascript, html, css, css-transforms

我已经在[http://jsfiddle.net/ugnf4/](http://jsfiddle.net/ugnf4/)上发布了我的问题，因为这样会更容易。

下面是我的 html / javascript 代码

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title></title>
</head>
<body>
<div id="mainContainer">
<div id="pageContainer" style="background: #cdcdcd;"></div>
</div>
<style>
    BODY {
        margin: 0px;
        padding: 0px;
    }
    #pageContainer {
        position: relative;
        margin: 10px auto;
        -webkit-transform-origin:50% 20%;
        -webkit-transform:scale(1.37);
        width: 1218px;
        height: 774px;
        border: 1px solid #000000;
    }
    #mainContainer {
        width: 100%;
        overflow: hidden;
    }
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</script>

<script type="text/javascript">

$(document).ready(function() {
    setHeight();

    $(window).resize(setHeight);
});

function setHeight()
{
    $('#mainContainer').css({'height': $(window).height()});
}

$('#mainContainer').mousemove(function (e) {

});

</script>

</body>
</html> 
```

目前`#mainContainer`div 有`overflow hidden`因为我不想显示滚动条，并且`#pageContainer`div`(inner div)`使用 css3 缩放为 1.37，因为在某些情况下，基于屏幕/浏览器宽度的高度`#pageContainer's`内容会因为`overflow hidden`.

我想编写 javascript 代码，以便如果有人将光标`#mainContainer`移入 ，基于鼠标 X 和 Y 坐标的位置，我想移动`#pageContainer`以便类似的位置`#pageContainer`可见（我希望它很清楚）。

我在使用时遇到问题`-webkit-transform-origin`，无法理解如何 `#pageContainer`相对于`#mainContainer`.

更新：

当您打开电子书并将其缩放到超过浏览器大小时，我看起来就像 issuu.com 网站上发生的事情（应该让它更清晰）

我正在寻找算法或指针如何实现它（如何计算它）不一定是一个工作脚本。

这怎么可能实现。

下面是工作的html

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title></title>
</head>
<body>
<div id="mainContainer">
<div id="pageContainer" >
<div id="pageContainerInner"style="background: #cdcdcd;">
</div>
</div>
<style>
    BODY {
        margin: 0px;
        padding: 0px;
    }
    #pageContainer {
        margin: 10px auto;
        -webkit-transform-origin:50% 20%;
        -webkit-transform:scale(1.37);
        width: 1218px;
        height: 774px;
    }
    #mainContainer {
        width: 100%;
        overflow: hidden;
    }

    #pageContainerInner {
        position: relative;
        width: 1218px;
        height: 774px;
        border: 1px solid #000000;
        top: 0;
        left: 0;
    }
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</script>

<script type="text/javascript">

var pageWidth = 1220;
var pageHeight = 776;

var scale = 1.37;

var scaledDelta = 5; //Percentage mouse position approximation

$(document).ready(function() {
    setHeight();

    $(window).resize(setHeight);
});

function setHeight()
{
    $('#mainContainer').css({'height': $(window).height()});
}

$('#mainContainer').mousemove(function (e) {

    // Calculate the offset of scaled Div
    var offsetX = $('#pageContainer').offset().left;
    var offsetY = $('#pageContainer').offset().top;

    // Calculate div origin with respect to screen
    var originX = (-1 * offsetX) / scale;
    var originY = (-1 * offsetY) / scale;

    var wWdt = $(window).width();
    var wHgt = $(window).height();

    // Now convert screen positions to percentage
    var perX = e.pageX * 100 / wWdt;
    var perY = e.pageY * 100 / wHgt;

    // Div content which should be visible
    var pageX = perX * pageWidth / 100;
    var pageY = perY * pageHeight / 100;

    // Calculate scaled divs new X, Y offset
    var shiftX =  (originX - pageX) + (e.pageX / scale);
    var shiftY = (originY - pageY) + (e.pageY / scale);

    $('#pageContainerInner').css({'left': shiftX+'px', 'top': shiftY+'px'});
});

</script>

</body>
</html> 
```

希望这对其他人有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:06:31.417

我在[http://jsfiddle.net/PYP8c/](http://jsfiddle.net/PYP8c/)发布了一个可能的解决方案。

以下是为您的页面修改的样式。

```
BODY {
        margin: 0px;
        padding: 0px;
    }

#mainContainer {
        width: 100%;
        overflow: hidden;
  position: relative;
        margin: 10px auto;
        -webkit-transform-origin:50% 20%;
        -webkit-transform:scale(1.37);
        width: 1218px;
        height: 774px;
        border: 1px solid #000000;
    }
    #pageContainer {
        position:absolute;
    top:0px;
    } 
```

这是相同的javascript代码。

```
$(document).ready(function() {
    //setHeight();

    //$(window).resize(setHeight);
});

function setHeight()
{
    $('#mainContainer').css({'height': $(window).height()});
}

$('#mainContainer').mousemove(function (e) {
  var contentHeight = $("#pageContainer").height();
  var minTop = 774 - contentHeight;
  if(minTop>0)
      minTop = 0;
    var currTop = ((e.pageY-10)/774.0)*(minTop);
  document.getElementById("pageContainer").style.top = currTop+'px';
}); 
```

它只是一个关于如何根据鼠标坐标移动文本的演示。

您可以进行很多更改，例如添加一个渐变的滚动条，它可以向用户提供有关在两个垂直方向上仍有多少内容可用的反馈。

我也使用了高度的硬编码值，但在您的最终版本中，我建议您动态获取 mainContainer 分区的高度。

# ms-access - 使用多个表查询

> ID：14315442
> 
> 赞同：-2
> 
> 时间：2013-01-14T08:56:42.767
> 
> 标签：ms-access

我是 MS Access 的新手，所以我想知道是否可以加入多个具有完全相同字段名称的表 - 不重复字段名称？因此，如果说员工 ID 出现在 2 个表中，它应该显示两个表的结果？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:00:32.413

您只需搜索互联网即可获得答案；例如，首先在谷歌上点击“访问加入”：

[http://office.microsoft.com/en-001/access-help/join-tables-and-queries-HA010096320.aspx](http://office.microsoft.com/en-001/access-help/join-tables-and-queries-HA010096320.aspx)

# jquery - How to rotate an asp.net gridview using jQuery?

> ID：14315448
> 
> 赞同：1
> 
> 时间：2013-01-14T08:57:29.940
> 
> 标签：jquery, asp.net, gridview

I need to rotate a `gridview` using jQuery. What I mean by rotate is to replace the column headers with the row cells of the first column. For example, the HTML output of a simple gridview is the this:

```
<table>
    <tr>
        <th>col1</th>
        <th>col2</th>
        <th>col3</th>
    </tr>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
    </tr>
    <tr>
        <td>4</td>
        <td>5</td>
        <td>6</td>
    </tr>
</table> 
```

Would then be rotated to the following:

```
<table>
    <tr>
        <th>col1</th>
        <th>1</th>
        <th>4</th>
    </tr>
    <tr>
        <td>col2</td>
        <td>2</td>
        <td>5</td>
    </tr>
    <tr>
        <td>col3</td>
        <td>3</td>
        <td>6</td>
    </tr>
</table> 
```

I need to achieve this using jQuery

# windows - 驱动程序安装错误后恢复 Windows 和/或系统还原

> ID：14315454
> 
> 赞同：0
> 
> 时间：2013-01-14T08:58:09.650
> 
> 标签：windows, crash, registry, drivers, system-restore

我昨天安装了 HP 声音驱动程序，它对我的​​ Windows 进行了蓝屏死机并使其崩溃。系统修复没有帮助。系统还原已损坏，启动恢复只是说“补丁正在阻止 Windows 启动”。当我尝试启动时，它会加载到一定的时间，然后在 BSOD-s 中加载到 0x0000007b。

我在注册表中禁用了新驱动程序，但没有帮助。然后我在新分区上安装了另一个 Windows 副本，并尝试复制注册表和 system32\drivers 文件夹，仍然是同样的问题。

还有什么想法吗？如果我能以某种方式只使用系统还原中未损坏的文件，而将其余文件排除在外，那会有所帮助，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:04:59.873

不幸的是，重新安装是唯一的方法。我尝试替换 Windows 文件，重新集成注册表.. 没有给出稳定的结果。这不是解决方案，因为我试图修复计算机，而不是重新安装操作系统。

# ios - 如何提供纵向和横向两种不同的视图？

> ID：14315456
> 
> 赞同：1
> 
> 时间：2013-01-14T08:58:29.750
> 
> 标签：ios, objective-c, xcode

我目前正在使用具有“时间表”的 iPhone 应用程序。在纵向中，我希望它具有带有一些自定义的常规表格视图！当我有横向的 iPhone 时，我希望它变成一个更“时间表”的视图，带有表格和行。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:00:54.913

试试这个

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

    [self adjustViewsForOrientation:toInterfaceOrientation];

}

-(void) adjustViewsForOrientation:(UIInterfaceOrientation)orientation
{
    if (orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        //write code for portrait mode
    }
    else if (orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight)
    {
       //write code for landscape mode

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:06:46.990

请参阅 Apples 文档[创建备用横向界面](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW14)

请务必阅读文档，但这里是示例实现中的代码：

```
@implementation PortraitViewController
- (void)awakeFromNib
{
    isShowingLandscapeView = NO;
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                 selector:@selector(orientationChanged:)
                                 name:UIDeviceOrientationDidChangeNotification
                                 object:nil];
}

- (void)orientationChanged:(NSNotification *)notification
{
    UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
    if (UIDeviceOrientationIsLandscape(deviceOrientation) &&
        !isShowingLandscapeView)
    {
        [self performSegueWithIdentifier:@"DisplayAlternateView" sender:self];
        isShowingLandscapeView = YES;
    }
    else if (UIDeviceOrientationIsPortrait(deviceOrientation) &&
             isShowingLandscapeView)
    {
        [self dismissViewControllerAnimated:YES completion:nil];
        isShowingLandscapeView = NO;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:10:51.727

答案是肯定的，可以通过以下方法：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
if(UIInterfaceOrientationIsLandscape(toInterfaceOrientation)){
\\ your timetable customisation goes here
     }
} 
```

你还需要这个：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
       return YES;
    } 
```

# linux - 根据另一个数字列对数字列进行排序

> ID：14315458
> 
> 赞同：1
> 
> 时间：2013-01-14T08:58:41.723
> 
> 标签：linux, unix, sorting, awk, gnu-coreutils

我有以下文件：

```
BTA Pos KLD 

4   79.7011 5.7711028907

4    79.6231    5.7083918219

5   20.9112 4.5559494707

5    50.7354    4.2495580809

5   112.645 4.0936819092

6    72.8212    4.9384741047

6   18.3889 7.3631759258 
```

我想使用 AWK 或 bash 命令根据第一列对第二列进行排序，以得到如下输出：

```
4    79.6231    5.7083918219    

4   79.7011 5.7711028907

5   20.9112 4.5559494707

5    50.7354    4.2495580809

5   112.645 4.0936819092

6   18.3889 7.3631759258

6    72.8212    4.9384741047 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:02:41.720

`sort`数字在第一列然后在第二列：

```
$ sort -nk1,1 -nk2,2 file
BTA     POS      KLD
4       79.6231  5.7083918219
4       79.7011  5.7711028907
5       20.9112  4.5559494707
5       50.7354  4.2495580809
5       112.645  4.0936819092
6       18.3889  7.3631759258
6       72.8212  4.9384741047 
```

# jquery - 如何使用 jQuery Cookie 插件让 jQuery 记住页面重新加载后的动画

> ID：14315459
> 
> 赞同：1
> 
> 时间：2013-01-14T08:58:43.190
> 
> 标签：jquery, jquery-cookie

我正在尝试在 Facebook 上制作侧边栏。好吧，不完全是。我只想在重新加载或转到不同页面后记住 jQuery 的状态。我不明白如何使用 cookie 插件。我在哪里把它放在这个脚本上？它是怎么写的？我下载了插件，它在 html 文件中，但我不知道如何通过 jQuery 执行它。

```
$(document).ready(function(){
    $("#arrow").bind('click', function(){
        $('#wrappernav').fadeOut("fast");
        $('#sidebar').fadeOut("fast");
        $('#wrappernavbg').fadeOut("fast");
        $('#naviclosed').fadeIn("fast");
        $(window).unbind('resize');
     //I want jQuery to remember this state after refresh.

    });
    $('#naviclosed').bind('click', function () {
        $('#wrappernav').fadeIn("fast");
        $('#sidebar').fadeIn("fast");
        $('#wrappernavbg').fadeIn("fast");
        $('#naviclosed').fadeOut("fast");
        $(window).bind('resize', ScreenSize);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:55:42.650

对您的代码稍作修改：

```
<script>
function clickArrow()
{
    $('#wrappernav').fadeOut("fast");
    $('#sidebar').fadeOut("fast");
    $('#wrappernavbg').fadeOut("fast");
    $('#naviclosed').fadeIn("fast");
    $(window).unbind('resize');
}

$(document).ready(function(){

    //Do the animations automatically IF the cookie value was SET.
    var arrowClicked = parseInt($.cookies.get('arrowClicked')); 
    if (arrowClicked > 0) {
        clickArrow(); 
    }

    $("#arrow").bind('click', function(){

     //Perform actions
     clickArrow();

     //I want jQuery to remember this state after refresh.
     $.cookies.set('arrowClicked', 1);
    });

    $('#naviclosed').bind('click', function () {
        $('#wrappernav').fadeIn("fast");
        $('#sidebar').fadeIn("fast");
        $('#wrappernavbg').fadeIn("fast");
        $('#naviclosed').fadeOut("fast");
        $(window).bind('resize', ScreenSize);
    });
}); 
```

有关 Cookie 插件的更多详细信息，请访问此链接：[http ://code.google.com/p/cookies/](http://code.google.com/p/cookies/)

也请仅在 jquery.js 之后包含 jquery.cookie.js

# csrf - 未验证 CSRF 令牌真实性时无法重置用户会话

> ID：14315464
> 
> 赞同：1
> 
> 时间：2013-01-14T08:59:04.070
> 
> 标签：csrf, railstutorial.org

在玩了几个星期的 rails 应用程序并完成了 rails 教程之后，我想了解一些 web 应用程序中常见的 web 攻击。

我设法使用 .html 文件中的以下代码块执行 CSRF 攻击类型。

```
<form action="http://localhost:3000/users/2" method="post">
  <input type="hidden" name="_method" value="delete">
  <div>
    <input type="submit" value="Delete">
  </div>
</form> 
```

以管理员身份登录后，我对自己的代码运行了攻击，该代码基于与 Railtutorial 相同的会话机制，并且我成功删除了由于缺少真实性令牌而应该停止的用户。

默认行为应该是会话重置，从而防止用户在 Web 应用程序之外被删除。

我可以在日志中看到“无法验证 CSRF 令牌真实性”，但会话未重置。

覆盖 handle_unverified_request 方法，默认情况下应该重置会话，使用

```
def handle_unverified_request
  raise(ActionController::InvalidAuthenticityToken)
end 
```

错误得到正确提出。

从全新安装的 railstutorial/sample_app_2nd_ed 对 Railstutorial git 代码运行攻击，我遇到了完全相同的问题：会话未按应有的方式重置。这意味着教程应用程序容易受到这种攻击。

我深入研究了代码（http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-reset_session），但无法弄清楚为什么在上下文 Railstutorial 中它似乎不起作用。

任何人都可以验证，如果 tutiral 确实容易受到 CSRF 攻击？如果是，解决方案是重写handle_unverified_request 以在这种情况下进行正确的注销？最后为什么它不能正常工作？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:42:08.027

如果无法验证 CSRF 令牌，我知道如何强制用户注销。

这似乎与我们清空会话而不是 cookie 的记住令牌这一事实有关。

在您的应用程序中覆盖 handle_unverified_request（以便所有控制器从中受益）并添加 sign_out 方法来清除记忆令牌。

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  include SessionsHelper

  def handle_unverified_request
    sign_out
    super
  end
end 
```

# jquery - jquery根据第一个菜单中的选项填充第二个菜单

> ID：14315465
> 
> 赞同：0
> 
> 时间：2013-01-14T08:59:06.190
> 
> 标签：jquery, ajax

我确定这已被多次询问和回答，但我找不到有效的解决方案。我希望根据第一个菜单中的选择填充第二个菜单：

```
<form id="form1" name="form1" method="post" action="">
  <select name="sub_discipline" id="sub_discipline">
    <option>Select Sub-discipline...</option>
    <?php 
$query = mysql_query("SELECT * from sub_discipline ORDER BY name ASC");
for($i=0;$i<mysql_num_rows($query);$i++) {
$row=mysql_fetch_assoc($query);
?>
    <option value="<?php echo $row['sub_discipline_pk']; ?>"><?php echo $row['name']; ?></option>
    <?php 
}
?>
  </select>
  <select name="topic_place" id="topic_place">
    <option>Select Topic...</option>
  </select>
</form> 
```

我有以下js：

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script type="text/javascript">

$(function() {
    $(':input[name=sub_discipline]').change(function(e) {
        $.get(
            'get_topics.php',
            {'sub_discipline_pk':$(this).val()},
            function(data) {
                $(':input[name=topic_place]').html( data );
            },
            'html'
          );
    }).change();
});​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

</script> 
```

get_topics.php 有

```
$sub_discipline_pk = $_GET['sub_discipline_pk'];

$query = "SELECT * FROM topic WHERE sub_discipline_fk = '$sub_discipline_pk'";
$result = mysql_query($query, $connection) or die(mysql_error());

while ($row = mysql_fetch_array($result)) { ?>
   <option value="<?php echo $row['topic_pk']; ?>">
   <?php echo $row['title']; ?></option>
   <?php } 
   ?> 
```

get_topics.php 返回：

```
<option value="1">
   Topic 1</option>
      <option value="2">
   Topic 2</option> 
```

所以上面应该工作......

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T02:55:33.237

我决定只使用 ajax 解决方案：

```
<script type="text/javascript">
function getXMLHTTP() { //function to return the xml http object
        var xmlhttp=false;  
        try{
            xmlhttp=new XMLHttpRequest();
        }
        catch(e)    {       
            try{            
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e){
                try{
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch(e1){
                    xmlhttp=false;
                }
            }
        }

        return xmlhttp;
    }

    function getTopics(strURL) {        

        var req = getXMLHTTP();

        if (req) {

            req.onreadystatechange = function() {
                if (req.readyState == 4) {
                    // only if "OK"
                    if (req.status == 200) {                        
                        document.getElementById('topics').innerHTML=req.responseText;                       
                    } else {
                        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                    }
                }               
            }           
            req.open("GET", strURL, true);
            req.send(null);
        }

    }
</script> 
```

形式：

```
<form id="form1" name="form1" method="post" action="">
  <table width="61%" border="0">
    <tr>
      <td width="16%">Sub-discipline</td>
      <td colspan="2"><select name="sub_discipline" id="sub_discipline" onChange="getTopics('get_topics.php?sub_discipline_pk='+this.value)">>
                  <option>Select Sub-discipline...</option>
                  <?php 
$query = mysql_query("SELECT * from sub_discipline ORDER BY name ASC");
for($i=0;$i<mysql_num_rows($query);$i++) {
$row=mysql_fetch_assoc($query);
?>
                  <option value="<?php echo $row['sub_discipline_pk']; ?>"><?php echo $row['name']; ?></option>
                  <?php 
}
?>
              </select></td>
    </tr>
    <tr>
      <td>Title</td>
      <td colspan="2"><input name="title" type="text" id="title" size="45" maxlength="100" /></td>
    </tr>
    <tr>
      <td>Topic</td>
      <td colspan="2"><textarea name="topic" id="topic" cols="45" rows="5"></textarea></td>
    </tr>
    <tr>
      <td>Placement</td>
      <td width="22%"><p>
        <label>
          <input type="radio" name="order" value="before" id="order_0" />
          Before</label>

        <label>
          <input type="radio" name="order" value="after" id="order_1" />
          After</label>
        <br />
      </p></td>
      <td><div id="topics"></div></td>
    </tr>
    <tr>
      <td>Available to Program</td>
      <td colspan="2">&nbsp;</td>
    </tr>
  </table>
</form> 
```

get_topics.php：

```
<?php
require_once('../connection/connect.php');
mysql_select_db($database, $connection);

$sub_discipline_pk = $_GET['sub_discipline_pk'];

$query = "SELECT * FROM topic WHERE sub_discipline_fk = '$sub_discipline_pk'";
$result = mysql_query($query, $connection) or die(mysql_error());

?>
<select name="topic">
<option>Select a topic...</option>
<?php while($row=mysql_fetch_array($result)) { ?>
<option value="<?php echo $row['topic_pk']; ?>"><?php echo $row['title']?></option>
<?php } ?>
</select> 
```

# django - Separation of Static Files & Assets with Django Compressor & Usage of collectstatic

> ID：14315466
> 
> 赞同：8
> 
> 时间：2013-01-14T08:59:12.130
> 
> 标签：django, django-compressor

I'm having a really hard time getting my head around the use of django-compressor.

Here's what I'm attempting to accomplish:

# Separation of Static Files & Assets (LESS, Coffeescript)

I would like to separate my LESS CSS and Coffeescript files into an assets directory

e.g.

```
 app
    └── assets
        ├── coffee
        │   └── script.coffee
        └── less
            └── style.less 
```

Leaving static assets such as images in my static directory

e.g.

```
 app
    └── static
        ├── hello.txt
        └── photo.jpg 
```

To do this, I've added the assets path to my **STATICFILES_DIRS** variable to allow django-compressor to find the files (which works as expected). Is this the correct approach? I have been trying to find an independent load path dedicated to django-compressor but didn't have any luck as I don't intend for these assets to be served as statics.

# Collection of Files for Production Deployment

For deploying to production, I would then like the compiled CSS & JS files along with other media in my app/static directory (e.g. images and so on) to be collected to an app/static-prod directory. But this doesn't work out so well because the assets are also collected when using the collectstatic command.

e.g.

```
(django-cpython)fots@fotsies-ubprecise-01:~/django_learning$ ./manage.py collectstatic --noinput
Copying '/home/fots/django_learning/app/assets/less/style.less'
Copying '/home/fots/django_learning/app/assets/less/import.less'
Copying '/home/fots/django_learning/app/assets/coffee/script.coffee'
Copying '/home/fots/django_learning/app/static/photo.jpg'
Copying '/home/fots/django_learning/app/static/hello.txt'

5 static files copied. 
```

Using the `./manage.py compress` command only takes tare of my compiled files, not photo.jpg or hello.txt in this example.

The only possible way I've found to do this is using the --ignore flag with collectstatic

e.g.

```
(django-cpython)fots@fotsies-ubprecise-01:~/django_learning$ ./manage.py collectstatic --noinput --ignore=less --ignore=coffee
Copying '/home/fots/django_learning/app/static/photo.jpg'
Copying '/home/fots/django_learning/app/static/hello.txt'

2 static files copied. 
```

I've also messed around with the **COMPRESS_ROOT** and **COMPRESS_URL** configuration variables but these only cause further trouble. Changing COMPRESS_ROOT resolves the collectstatic issue but now when using the compress command, the generated files end up in a different location to the static files.

These solutions hardly seem elegant. Is there a better way to do this? I feel like I'm missing something.

Thanks in advance for any help :)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T23:51:34.840

我想我会提供迄今为止我发现的最佳解决方案，但请随时提出更好的替代方案。

阻止我要求的最大问题是 django-compressor 对其查找器和输出使用相同的路径。我找到的最佳解决方案如下。

# 创建自定义查找器

我们首先根据我称为 COMPRESS_SOURCE_ROOT 的新设置创建自定义查找器

```
from compressor.storage import CompressorFileStorage
from compressor.finders import CompressorFinder
from compressor.conf import settings

class CompressorFileAltStorage(CompressorFileStorage):
    """
    This alternative django-compressor storage class is utilised
    specifically for CompressorAltFinder which allows an independent
    find path.

    The default for ``location`` is ``COMPRESS_SOURCE_ROOT``.
    """
    def __init__(self, location=None, base_url=None, *args, **kwargs):
        if location is None:
            location = settings.COMPRESS_SOURCE_ROOT
        # The base_url is not used by the Finder class so it's irrelevant
        base_url = None
        super(CompressorFileAltStorage, self).__init__(location, base_url,
                                                       *args, **kwargs)

class CompressorAltFinder(CompressorFinder):
    """
    A staticfiles finder that looks in COMPRESS_SOURCE_ROOT
    for compressed files, to be used during development
    with staticfiles development file server or during
    deployment.
    """
    storage = CompressorFileAltStorage 
```

# 使用这个新的取景器

*除了通常的“compressor.finders.CompressorFinder”之外，*只需将此查找器添加到您的**STATICFILES_FINDERS**设置中

 *例如

```
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
    'mycomp.CompressorAltFinder',
    'compressor.finders.CompressorFinder',
) 
```

现在设置一个名为**COMPRESS_SOURCE_ROOT的新设置**

例如

```
COMPRESS_SOURCE_ROOT = os.path.join(APP_DIR, 'assets') 
```

我也设置了我的 STATIC_ROOT

```
STATIC_ROOT = os.path.join(APP_DIR, 'static-prod') 
```

# 在开发中测试解决方案

我专门测试了我的LESS源代码编译

```
(django-cpython)fots@fotsies-ubprecise-01:~/django_learning$ tree app/assets
app/assets
├── coffee
│   └── script.coffee
└── less
    ├── import.less
    └── style.less 
```

带有模板标签

```
{% compress css %}
  <link rel="stylesheet" type="text/less"
        href="{{ STATIC_URL }}less/style.less" />
{% endcompress %} 
```

这是从资产目录成功读取并在我更改文件时更新的。

输出放置在 static-prod 目录中：

```
(django-cpython)fots@fotsies-ubprecise-01:~/django_learning$ tree app/static-prod/
app/static-prod/
└── CACHE
    ├── css
    │   ├── style.5abda32cfef7.css
    │   └── style.6ca1a3d99280.css
    └── js
        └── script.8cb4f955df19.js

3 directories, 3 files 
```

# 测试生产解决方案

供您参考，这是我的静态目录的样子

```
(django-cpython)fots@fotsies-ubprecise-01:~/django_learning$ tree app/static
app/static
├── hello.txt
└── photo.jpg

0 directories, 2 files 
```

所以我们开始

```
(django-cpython)fots@fotsies-ubprecise-01:~/django_learning$ rm -rf app/static-prod
(django-cpython)fots@fotsies-ubprecise-01:~/django_learning$ ./manage.py collectstatic --noinput
Copying '/home/fots/django_learning/app/static/photo.jpg'
Copying '/home/fots/django_learning/app/static/hello.txt'

2 static files copied.
(django-cpython)fots@fotsies-ubprecise-01:~/django_learning$ ./manage.py compress
Found 'compress' tags in:
        /home/fots/django_learning/app/templates/layout.html
Compressing... done
Compressed 2 block(s) from 1 template(s).
(django-cpython)fots@fotsies-ubprecise-01:~/django_learning$ tree app/static-prod
app/static-prod
├── CACHE
│   ├── css
│   │   └── 5abda32cfef7.css
│   ├── js
│   │   └── 3b9d1c08d2c5.js
│   └── manifest.json
├── hello.txt
└── photo.jpg

3 directories, 5 files 
```

然后我按如下方式运行网络服务器并确认该站点可以运行

```
./manage.py runserver 0.0.0.0:8000 --insecure 
```

希望这可以帮助那里的人:)*

# php - Count specific lines in text file

> ID：14315470
> 
> 赞同：0
> 
> 时间：2013-01-14T08:59:19.433
> 
> 标签：php, count, lines

How to count specific lines in a text file depending on a particular variable in that line.

For example i need to count the lines of a text file only containing for instance $item1 or $item2 etc.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:16:06.740

听起来你需要类似`grep -c`在 shell 中做的事情，尝试这样的事情：

```
$item1 = 'match me';
$item2 = 'match me too';

// Thanks to @Baba for the suggestion:
$match_count = count(
    preg_grep(
         '/'.preg_quote($item1).'|'.preg_quote($item2).'/i',
         file('somefile_input.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES)
    )
);

// does the same without creating a second array with the matches
$match_count = array_reduce(
    file('somefile_input.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES),
    function($match_count, $line) use ($item1, $item2) {  
        return 
            preg_match('/'.preg_quote($item1).'|'.preg_quote($item2).'/i', $line) ?
            $match_count + 1 : $match_count;
    }
); 
```

上面的代码示例使用[file()](http://php.net/manual/en/function.file.php)函数将文件读入一个数组（按行分割），[array_reduce()](http://php.net/manual/en/function.array-reduce.php)迭代该数组并在迭代中使用[preg_match()](http://php.net/manual/en/function.preg-match.php)来查看行是否匹配（`/i`最后的不区分大小写）。

你也可以使用 foreach 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:15:46.470

此代码仅读取`file.php`并计算包含`'$item1'`or的行`'$item2'`。检查本身可以进行微调，因为您必须为`stristr()`要检查的每个单词添加一个新单词。

```
<?php

$file = 'file.php';

$fp = fopen($file, 'r');
$size = filesize($file);
$content = fread($fp, $size);

$lines = preg_split('/\n/', $content);

$count = 0;
foreach($lines as $line) {
    if(stristr($line, '$item1') || stristr($line, '$item2')) {
        $count++;
    }
}
echo $count; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:15:52.563

逐行读取文件并使用 strpos 确定一行是否包含特定的字符串/项目。

```
$handle = fopen ("filename", "r");
$counter = 0;
while (!feof($handle))
{
  $line = fgets($handle);
  // or $item2, $item3, etc.
  $pos = strpos($line, $item);
  if ($pos !== false)
  {
    $counter++
  }
}
fclose ($handle); 
```

# javascript - HTML5 Canvas Soft Brush

> ID：14315476
> 
> 赞同：2
> 
> 时间：2013-01-14T08:59:31.097
> 
> 标签：javascript, html, canvas, paint, brush

What are the different methods of creating a `"soft brush"` effect when drawing on an HTML5 canvas? Speed and efficiency is important so if anyone has any benchmarks on the different methods, that would be awesome.

To elaborate on what I mean by a `"soft brush"`, I mean a brush that has essentially a radial alpha transparency on it so that the edges are more transparent than the center.

I've heard several methods, including painting to a memory canvas and applying a `blur`. However, I can't imagine that this approach is very efficient.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-27T15:34:41.237

您可以尝试在线条下方添加阴影：

[http://www.html5canvastutorials.com/advanced/html5-canvas-shadow-offset-tutorial/](http://www.html5canvastutorials.com/advanced/html5-canvas-shadow-offset-tutorial/)

```
<canvas id="myCanvas" width="578" height="200"></canvas>
<script>
  var canvas = document.getElementById('myCanvas');
  var context = canvas.getContext('2d');

  context.rect(188, 40, 200, 100);
  context.fillStyle = 'red';
  context.shadowColor = '#999';
  context.shadowBlur = 20;
  context.shadowOffsetX = 15;
  context.shadowOffsetY = 15;
  context.fill();
</script> 
```

通过将偏移量设置为 0，模糊将由浏览器而不是您的代码完成。

# include-path - If a program has #include , where is the directory abc located?

> ID：14315480
> 
> 赞同：0
> 
> 时间：2013-01-14T08:59:45.797
> 
> 标签：include-path

When I run the program, I get the message:

error: abc/xyz.h: No such file or directory.

abc resides in the same directory as the C code of the program I am trying to run.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:08:21.760

查找标头的位置是实现定义的东西，对于 the`<>`和`""`变体都是如此。

因此，这取决于您使用的实际实现。

* * *

C99 的相关位来自 6.10.2，“源文件包含”（在 C11 中未更改），引用如下。

形式的预处理指令

```
# include <h-char-sequence> new-line 
```

在一系列实现定义的位置中搜索由`<`和`>`分隔符之间的指定序列唯一标识的标头，并用标头的全部内容替换该指令。如何指定位置或标识的标头是实现定义的。

形式的预处理指令

```
# include "q-char-sequence" new-line 
```

导致将该指令替换为由`"`分隔符之间的指定序列标识的源文件的全部内容。以实现定义的方式搜索命名的源文件。如果不支持此搜索，或者搜索失败，则重新处理该指令，就好像它已读取

```
# include <h-char-sequence> new-line 
```

具有与原始指令相同的包含序列（包括 > 字符，如果有的话）。

* * *

许多实现将在当前目录中搜索包含文件，因此，如果您的文件实际上是`<current-directory>/abc/include/libsomething/xyz.h`，您将使用：

```
#include "abc/include/libsomething/xyz.h" 
```

或者，您可以配置编译器以修改搜索路径，例如使用`gcc -Iabc/include/libsomething`并仅使用：

```
#include "xyz.h" 
```

就个人而言，我更喜欢完整的规范，因为它减少了冲突的可能性（您可能在包含文件搜索路径的其他地方有*不同* `xyz.h`的地方）。

# asp.net-mvc - Entity Framework 5 installation verification

> ID：14315481
> 
> 赞同：1
> 
> 时间：2013-01-14T08:59:50.493
> 
> 标签：asp.net-mvc, entity-framework-4, linq-to-entities, entity-framework-5, auto-compile

I have an ASP.NET MVC 3 project using .NET framework 4.0 and LINQ to SQL. Because I have serious problems of performance with some queries the first time they are executed I decided to use Entity Framework 5 in order to take advantage of the new LINQ auto compiled feature.

Now I have installed VS 2012, .NET framework 4.5 and Entity Framework 5 and changed my project to point to the .NET framework 4.5 as well as updated my Data Context file to use EF5\. The queries now have exactly the same performance, some of them are so slow at the first time execution that even I get a time out exception, the second time everything is fine, I am wondering if the problem is that maybe the migration process was not correct and I am using still the EF4 or it is just a problem of my query construction which can't use the auto compiled feature for an unknown reason.

The EntityFramework dll has the 5.0 version, and the System.Data.Entity dll the version 4, that is right, isn't? Any suggestions?

I include the most problematic query, it retrieves paginated the result for a grid (Telerik MVC grid) which I need to build through 2 queries (originally was a SQL sentence with a sub query):

```
 /// <summary>
    /// Get the elements for the AppLog grid.
    /// </summary>
    public void GetAppLogElements(
        int clientID, string language, int functionID, int errorLevel,
        int numPage, int pageSize, IList<IFilterDescriptor> filterDescriptors, IList<SortDescriptor> sortDescriptors, IList<GroupDescriptor> groupDescriptors,
        ref IQueryable<Model_AppLog> rows, ref int numRows)
    {
        string orderString = string.Empty;

        var items =
            from ap in objDataContext.applicationLogs
            where
                ap.clientID == clientID &&
                ap.recordGroup != null
            join alf in objDataContext.appLogFunctions on
                new { functionID = ap.functionID.Value } equals new { functionID = alf.functionID }
            join ale in objDataContext.appLogErrorLevels on
                new { errorLevel = ap.errorLevel.Value } equals new { errorLevel = ale.errorLevelID }
            join als in objDataContext.appLogSeverities on
                new { severity = ap.severity.Value } equals new { severity = als.severityID }
            group new { ap, alf, als } by new { ap.functionID, ap.recordGroup, ap.clerkID } into queryGrouped
            select new Model_AppLog()
            {
                sequence = queryGrouped.Max(c => c.ap.sequence),
                functionID = queryGrouped.Key.functionID,
                recordGroup = queryGrouped.Key.recordGroup,
                clerkID = queryGrouped.Key.clerkID,
                date = queryGrouped.Min(c => c.ap.date),
                errorLevel = (queryGrouped.Max(c => c.ap.errorLevel) == null || !queryGrouped.Max(c => c.ap.errorLevel).HasValue ? 0 : queryGrouped.Max(c => c.ap.errorLevel)),
                severity = queryGrouped.Max(c => c.ap.severity)
            };            

        if (errorLevel != -1)
            items = items.Where(column => column.errorLevel >= errorLevel);

        var _items =
            from subSelect in items
            join alf in objDataContext.appLogFunctions on
                new { functionID = subSelect.functionID.Value } equals new { functionID = alf.functionID }
            join alft in objDataContext.appLogFunctionTexts on
                new { alf.functionID, language } equals new { alft.functionID, alft.language }
            join ale in objDataContext.appLogErrorLevels on
                new { errorLevel = subSelect.errorLevel.Value } equals new { errorLevel = ale.errorLevelID }
            join alet in objDataContext.appLogErrorLevelTexts on
                new { errorLevelID = subSelect.errorLevel.Value, language } equals new { alet.errorLevelID, alet.language }
            join als in objDataContext.appLogSeverities on
                new { severity = subSelect.severity.Value } equals new { severity = als.severityID }
            join alst in objDataContext.appLogSeverityTexts on
                new { als.severityID, language } equals new { alst.severityID, alst.language }
            select new Model_AppLog()
            {
                sequence = subSelect.sequence,
                functionID = subSelect.functionID,
                recordGroup = subSelect.recordGroup,
                clerkID = subSelect.clerkID,
                date = subSelect.date,
                errorLevel = subSelect.errorLevel,
                severity = subSelect.severity,
                functionDescription = alft.denotation,
                errorLevelDescription = alet.denotation,
                severityDescription = alst.denotation
            };                     

        //Apply filters
        if (filterDescriptors != null && filterDescriptors.Any())
        {
            _items = _items.Where(ExpressionBuilder.Expression<Model_AppLog>(filterDescriptors));
        }

        if (functionID != -1)            
            _items = _items.Where(column => column.functionID == functionID);                              

        //Apply sorting        
        if (sortDescriptors != null)
        {
            GlobalMethods objGlobalMethods = new GlobalMethods();
            orderString = objGlobalMethods.GetOrderString(sortDescriptors);
        }

        //Apply ordering
        if (orderString != string.Empty)            
            _items = _items.OrderBy(orderString);            
        else            
            _items = _items.OrderByDescending(x => x.date);            

        //Set total number of rows
        numRows = _items.AsEnumerable<Model_AppLog>().Count();            

        //Get paginated results
        _items = _items.Skip(pageSize * (numPage - 1)).Take(pageSize);            

        //Set data result            
        rows = _items;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:15:39.430

这是一篇关于 EF 性能的论文：[`MSDN`](http://msdn.microsoft.com/en-gb/library/cc853327.aspx)

改善启动时间的最重要的事情是预编译您的视图（在 MSDN 论文末尾附近有一个部分）

如果您首先使用数据库，则[`here`](http://blogs.msdn.com/b/adonet/archive/2008/06/20/how-to-use-a-t4-template-for-view-generation.aspx)可以使用 T4 模板。

如果您先使用代码，则有一个项目[`here`](http://visualstudiogallery.msdn.microsoft.com/ae7730ce-ddab-470f-8456-1b313cd2c44d)，尽管我自己没有尝试过。

* * *

注意：当您将项目从 .NET 4.0 升级到 .NET 4.5 时，您必须卸载 EF NuGet 包并重新安装它 - 不同的运行时有不同的 EF 5 版本。

# oracle - Errors with identifiers in PL/SQL

> ID：14315482
> 
> 赞同：1
> 
> 时间：2013-01-14T08:59:53.577
> 
> 标签：oracle, plsql

I am trying to run some PL/SQL code but it contains some errors about identifiers plese help me with it. The code is not running

```
DECLARE
   a := customer.purchase%TYPE;
   id := &employee.empno;
BEGIN
   UPDATE employee SET salary = salary + 5000;
   UPDATE employee SET bonus = bonus + 1000 WHERE empno = &id;
   SAVEPOINT sumeet;
   UPDATE customer SET purchase = purchase + 5000 WHERE custid = a;

   SELECT SUM(purchase) INTO a;

   IF (a < 11000) THEN
      ROLLBACK sumeet;
   END IF;
   COMMIT;

END;
/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:50:05.177

1：这是错误的：

```
DECLARE
  a := customer.purchase%TYPE;
  id := &employee.empno; 
```

你没有`:=`在变量名后面放a，`&`是无效的，并且`employee.empno`不是有效的数据类型。IE：

```
DECLARE
  a customer.purchase%TYPE;
  id employee.empno%TYPE; 
```

2：不需要`&`引用 id 变量：

```
UPDATE employee SET bonus = bonus + 1000 WHERE empno = &id; 
```

IE：

```
UPDATE employee SET bonus = bonus + 1000 WHERE empno = id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:07:44.583

除了 Alen 的修复，而`ROLLBACK`不是你为什么不这样做：

```
 UPDATE customer SET purchase = purchase + 5000 
    WHERE custid = a
      AND (select sum(purchase) from customer) + 5000 < 11000;

  COMMIT; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:22:12.550

Here's a tip: Combine your two updates on employee into one.

```
 UPDATE employee
 SET    salary = salary + 5000,
        bonus  = bonus  + case when empno = &id then 1000 else 0 end; 
```

Also, start using meaningful variable names.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T09:22:23.377

尝试使用此块，但首先更改声明块中的值 (1, 2)。

```
DECLARE
   a customer.purchase%TYPE := 1;
   id employee.empno%TYPE := 2;
BEGIN
   UPDATE employee SET salary = salary + 5000;
   UPDATE employee SET bonus = bonus + 1000 WHERE empno = id;
   SAVEPOINT sumeet;
   UPDATE customer SET purchase = purchase + 5000 WHERE custid = a;

   SELECT SUM(purchase) INTO a FROM customer;

   IF (a < 11000) THEN
      ROLLBACK sumeet;
   END IF;
   COMMIT;

END;
/ 
```

# xliff - Genitive/possessive 's via XLIFF

> ID：14315485
> 
> 赞同：1
> 
> 时间：2013-01-14T08:59:58.350
> 
> 标签：xliff

is there a way to determine whether a genitive s has to be appended to a person's representation (i.e. the name). For example, in English, it is

*   Petra's cape
*   Thomas' cape
*   Liz' cape

(the latter one is only AFAIK because it's pronounced with a trailing s without actually having one); whereas in German, it would be

*   Petras Umhang (cape)
*   Thomas' Umhang
*   Liz' Umhang

What would be the best way to handle this via XLIFF?

Thanks and best regards!

# symfony - 选择父/子包取决于 Symfony2 中的域

> ID：14315486
> 
> 赞同：0
> 
> 时间：2013-01-14T09:00:06.937
> 
> 标签：symfony, symfony-2.2

假设我有两个捆绑包`ParentBundle`和`ChildBundle`. `ChildBundle`“扩展”`ParentBundle`为

```
// ChildBundle/ChildBundle.php
<?php

namespace ChildBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class ChildBundle extends Bundle
{
    public function getParent()
    {
        return 'ParentBundle';
    }

} 
```

然后，我将路由从 复制`ParentBundle`到`ChildBundle`，并指定要在其中使用的路由，并根据[Symfony2 捆绑继承丢失父捆绑路由](https://stackoverflow.com/questions/9373433/symfony2-bundle-inheritance-losing-parent-bundles-routes)`app/config/routing.yml`重命名`routing.yml`

```
// app/config/routing.yml
child:
    resource: "@ChildBundle/Resources/config/routing_child.yml"
    hostname_pattern: child.example.com
    prefix:   /

parent:
    resource: "@ParentBundle/Resources/config/routing.yml"
    prefix:   / 
```

之后，我创建了一个`ChildBundle`具有相同路径和名称的模板，以覆盖`ParentBundle`同名的模板。

但是，它会导致`ChildBundle`一直加载模板。

所以，我的问题是，**我如何`ChildBundle`在一个域中加载（即使用覆盖模板/控制器等`ChildBundle`，当用户进入 child.example.com 时），同时`ParentBundle`在另一个域中使用（即使用覆盖模板/控制器等`ParentBundle`，当用户进入 example.com 时）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:42:42.967

您应该阅读我所做的这个答案：[Symfony2 上子应用程序的主页](https://stackoverflow.com/questions/13078662/main-page-to-sub-applications-on-symfony2/13102198#13102198)

实际上你必须在 web 文件夹中创建 2 个控制器，例如：web/app.php、web/app_child.php

在 app_child.php 中，调用一个新环境，这里称为“child”：

```
// ...    
$kernel = new AppKernel('child', false);
// ... 
```

创建一个特定于子包的 config_child.yml，您可以在此处粘贴 config.yml 内容，甚至可以导入 config.yml 以防止重复代码：

```
// config_child.yml
imports:
    - { resource: config.yml } 
```

创建一个包含子包路由的新路由文件，例如称为 routing_child.yml，并将此文件导入 config_child.php：

```
framework:
    router:
        resource: "%kernel.root_dir%/config/routing_child.yml" 
```

从您的经典 routing.yml 文件中删除子捆绑路由。

现在使用您的 web/.htaccess 根据子域调用正确的环境：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    # Hit child app
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{HTTP_HOST} !^child\.example.com$ [NC]
    RewriteRule ^(.*)$ app_child.php [QSA,L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

就是这样，现在您的应用程序将根据域加载正确的路由配置；）

# opencv - opencv- Getting std::length_error' what(): vector::_M_fill_insert when computing HOG features from 25*125 eye image

> ID：14315488
> 
> 赞同：2
> 
> 时间：2013-01-14T09:00:08.357
> 
> 标签：opencv

When I am calculating the HOG features of eye image of size 25*125\. then getting the error message terminate called after throwing an instance of 'std::length_error' what(): vector::_M_fill_insert

```
HOGDescriptor hog;
vector<float> ders;
vector<Point>locs;
hog.compute(img,ders,Size(4,4),Size(0,0),locs);
Mat Hogfeat;
Hogfeat.create(ders.size(),1,CV_32FC1);

for(int i=0;i<ders.size();i++)
{
Hogfeat.at<float>(i,0)=ders.at(i);

} 
```

Can any one tell me the solution?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T09:43:51.733

图像的一侧小于描述符，因此计算失败。

如果我使用以下行，则计算对我有用：

```
hog.compute(img,ders,Size(3,3),Size(0,0),locs); 
```

块的大小是 8。所以`3 * 8 = 24 <= 25`但是 `4 * 8 = 32 > 25`。

解决方案取决于您想要实现的目标以及您愿意做出的妥协。您可以只使用较小的描述符，这可能会导致其他图像的描述性有所损失。或者您可以缩放或填充太小的图像，这可能会使它们的描述符不那么有用，但不会影响其他的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T17:13:26.717

我遇到了同样的问题，我通过将图像大小调整为（64 x 128）或更大来解决它；任何小于此的大小都会返回该错误。所以你应该做

`resize(img, dst, Size(64, 128))¶`

在你打电话之前`hog.compute(....)`

# javascript - What is the equivalent method of installTrigger.install in chrome?

> ID：14315491
> 
> 赞同：0
> 
> 时间：2013-01-14T09:00:13.157
> 
> 标签：javascript, google-chrome-extension

In firefox `InstallTrigger.install` is used to download `.xpi` file stored on the local FileSystem.

Which method is used to download the `.crx` file in chrome browser?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:04:01.420

我相信[https://developers.google.com/chrome/web-store/docs/inline_installation](https://developers.google.com/chrome/web-store/docs/inline_installation)是您正在寻找的。

# jquery - jQuery - 单击时将类添加到 li

> ID：14315494
> 
> 赞同：4
> 
> 时间：2013-01-14T09:00:23.660
> 
> 标签：jquery

我有以下标记

```
<div id="div1">
   <ul>
      <li><a href="#" id="id1">link1</a></li>
      <li><a href="#" id="id2">link2</a></li>
      <li><a href="#" id="id3">link3</a></li>
   </ul>
</div> 
```

我想使用 jQuery 向单击的链接添加一个类，并从以前单击的链接中删除该类，例如

```
<li class="selected"><a href="#" id="id1">link1</a></li>
<li><a href="#" id="id2">link2</a></li>
<li><a href="#" id="id3">link3</a></li> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T09:01:28.653

试试这个：

```
$('#div1 li').click(function(e) {
    $(this).addClass('selected').siblings().removeClass('selected');
}); 
```

或者，如果您想将`click`事件附加到`a`：

```
$('#div1 a').click(function(e) {
    e.preventDefault();
    $('#div1 a').removeClass('selected');
    $(this).addClass('selected');
}); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/YSYpw/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T09:02:07.983

你可以这样做：

```
$('li a').click(function() {
    $('li a').removeClass('selected');
    $(this).addClass('selected');
}); 
```

即先删除所有类，然后将类添加到已单击的类中。

# openerp - Incoming messages send again by openerp

> ID：14315495
> 
> 赞同：3
> 
> 时间：2013-01-14T09:00:23.770
> 
> 标签：openerp

When someone sends an email message, it can view on openerp inbox but the outgoing email sends again thru the configuration email address I set up.. why is it so?

I'm using Openerp v7.0.. I used the Outgoing Mail Server in the Settings > Technical > Email > Outgoing Mail Servers.

When someone sends an email and openerp retrieved it, it sends again and again an email but by using the email address I configure.

![email message](../Images/07794b1d5c722a86d48db76e46b65bca.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T10:46:03.770

您的问题不太清楚^([1])，但这听起来像是默认且正确的行为。当 OpenERP 用户收到外部电子邮件消息时，默认情况下，他们将在自己的电子邮件地址（在他们的用户首选项中配置）收到电子邮件的副本。

假设有人回复了分配给我的 CRM Lead（通过向 发送电子邮件`info@mycompany.com`，该电子邮件通过`fetchmail`模块导入我的 OpenERP 服务器）：我想在我的真实收件箱中接收此消息的副本`myname@mycompany.com`）。

*在 OpenERP 7.0 中，可以在用户配置文件的“电子邮件首选项”*中控制此行为：您可以选择接收有关新评论和新外部电子邮件的电子邮件通知，或仅接收新外部电子邮件，或不接收任何通知。

* * *

^([1])：以下信息会有所帮助：您正在使用的 OpenERP 版本，电子邮件是如何被馈送到 OpenERP 的（`fetchmail`模块、邮件网关脚本、其他东西......），哪些电子邮件地址被馈送到 OpenERP，在用户配置文件中配置了哪些电子邮件等。

# c++ - 如何以秒为单位获取系统的当前日期时间

> ID：14315497
> 
> 赞同：14
> 
> 时间：2013-01-14T09:00:39.323
> 
> 标签：c++

如何在 C++ 中以秒为单位获取系统的当前日期时间？

我试过这个：

```
struct tm mytm = { 0 };
time_t result;

result = mktime(&mytm);

printf("%lld\n", (long long) result); 
```

但我得到：-1？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-14T09:21:51.927

```
/* time example */
#include <stdio.h>
#include <time.h>

int main ()
{
  time_t seconds;

  seconds = time (NULL);
  printf ("%ld seconds since January 1, 1970", seconds);

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T09:35:25.097

C++11 版本，它确保刻度的表示实际上是一个整数：

```
#include <iostream>
#include <chrono>
#include <type_traits>

std::chrono::system_clock::rep time_since_epoch(){
    static_assert(
        std::is_integral<std::chrono::system_clock::rep>::value,
        "Representation of ticks isn't an integral value."
    );
    auto now = std::chrono::system_clock::now().time_since_epoch();
    return std::chrono::duration_cast<std::chrono::seconds>(now).count();
}

int main(){
    std::cout << time_since_epoch() << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-14T09:04:55.113

试试这个：我希望它对你有用。

```
#include <iostream>
#include <ctime>

using namespace std;

int main( )
{
   // current date/time based on current system
time_t now = time(0);

 // convert now to string form
char* dt = ctime(&now);

cout << "The local date and time is: " << dt << endl;

// convert now to tm struct for UTC
tm *gmtm = gmtime(&now);
dt = asctime(gmtm);
cout << "The UTC date and time is:"<< dt << endl;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-19T05:13:59.467

可能是@Zeta 提供的示例的更简单版本

```
time_t time_since_epoch()
{
    auto now = std::chrono::system_clock::now();
    return std::chrono::system_clock::to_time_t( now );
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-10T23:20:16.937

我正在使用以下功能，并进行了一些小的改进，但正如其他人所建议的那样，时代的定义可能不可移植。对于 GCC，它返回自 Unix 纪元以来的双精度值，但在 VC++ 中，它返回自机器启动时间以来的值。如果您的目标只是获得一些价值来在两个时间戳之间进行差异而不持久化和共享它们，那么这应该没问题。如果您需要保留或共享时间戳，那么我建议从 now() 中显式减去一些纪元以使持续时间对象可移植。

```
//high precision time in seconds since epoch
static double getTimeSinceEpoch(std::chrono::high_resolution_clock::time_point* t = nullptr)
{
    using Clock = std::chrono::high_resolution_clock;
    return std::chrono::duration<double>((t != nullptr ? *t : Clock::now() ).time_since_epoch()).count();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-01T12:52:53.263

这将以秒为单位给出当前日期/时间，

```
#include <time.h>
time_t timeInSec;
time(&timeInSec);
PrintLn("Current time in seconds : \t%lld\n", (long long)timeInSec); 
```

# prolog - 运行 plweb 时出现 CLP 错误

> ID：14315498
> 
> 赞同：1
> 
> 时间：2013-01-14T09:00:47.780
> 
> 标签：prolog, swi-prolog, clpfd, clpq

[我从http://www.swi-prolog.org/git/plweb.git/snapshot/7cd70cef6011b480ef05f2b8679728abba719c0c.tar.gz](http://www.swi-prolog.org/git/plweb.git/snapshot/7cd70cef6011b480ef05f2b8679728abba719c0c.tar.gz)下载了 plweb

```
$cd plweb-7cd70ce/
$./run 
ERROR: plweb-7cd70ce/register.pl:35:
    source_sink `library(smtp)' does not exist
Warning: plweb-7cd70ce/register.pl:35:
    Goal (directive) failed: register:use_module(library(smtp))
Warning: plweb-7cd70ce/load.pl:50:
    Using CLP(FD) with bounded arithmetic may yield wrong results.
ERROR: /home/***/swi-prolog/lib/swipl-6.2.6/library/clp/clpq/store_q.pl:347:
    evaluable `-1 rdiv _G43862' does not exist
ERROR: /home/***/swi-prolog/lib/swipl-6.2.6/library/clp/clpq/bv_q.pl:85:
    Exported procedure store_q:isolate/3 is not defined
... 
```

问候 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:39:06.867

在您提出问题后，我从您提供的链接中尝试了相同的方法，但得到了不同的错误： about `smtp`，尝试`?- pack_install(smtp).`为我解决了第一个错误。那我有和你不同的问题

```
?- [load].
ERROR: /home/carlo/lib/swipl-6.3.7/library/explain.pl:36:
    source_sink `library(helpidx)' does not exist
Warning: /home/carlo/lib/swipl-6.3.7/library/explain.pl:36:
    Goal (directive) failed: prolog_explain:load_files(library(helpidx),[if(changed)]) 
```

在没有 GMP 支持的情况下运行。我会尝试恢复 helpidx.pl 并报告结果，但不能说任何关于错过 GMP 支持的信息（我确实有）。

**编辑**我在查询“swi-prolog generate helpidx”时获取了谷歌回答的第一个[链接](https://raw.github.com/lamby/pkg-swi-prolog/master/library/helpidx.pl)`?- file_search_path(library, X).`，将源代码粘贴到库目录中（使用 检查的路径）。然后我做了：

```
?- [load].
% Library was moved: library(http/dcg_basics) --> library(dcg/basics)
% load compiled 7.36 sec, 33,882 clauses
true. 
```

我认为 helpidx.pl 是用来生成的，而不是从随机来源中挑选出来的。接下来我将尝试更好地理解文档服务器，看看我是否能解决最后一个问题。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:28:54.950

您还需要 plweb-www.git，然后需要运行一些安装步骤来集成两者。查看 www 目录 - 如果它是空的，则需要 plweb-www。

我现在在另一台机器上，当我回到带有 plweb 的机器上时，我会看看我是如何安装的。

我记得在一些安装程序-ish prolog 文件中更改了一些内容。

# iphone - iphone应用中的图像增强

> ID：14315501
> 
> 赞同：1
> 
> 时间：2013-01-14T09:00:56.137
> 
> 标签：iphone, ios, objective-c, image-processing

> **可能重复：**
> [iPhone 中的图像处理](https://stackoverflow.com/questions/5673050/image-processing-in-iphone)

在我的 iPhone 应用程序中，我想包含图像增强功能。

在视图中，用户可以看到选定的图像，并从那里借助他们可以设置的滑块（亮度、对比度、色调、清晰度、饱和度等）。

我不知道该怎么做。我用谷歌搜索了它，但找不到任何好的教程或源代码。

如果有人有任何想法，请帮助我。

**我尝试使用[它](https://github.com/esilverberg/ios-image-filters)- 但是当我从文件夹 Curve 添加类时，我无法构建我的项目 - 它显示构建失败而没有显示任何问题**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:08:06.657

你读过[CoreImage 框架](https://developer.apple.com/library/ios/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_intro/ci_intro.html)吗？

Core Image 框架提供：

*   访问内置图像处理过滤器
*   特征检测能力
*   **支持自动图像增强**
*   将多个过滤器链接在一起以创建自定义效果的能力

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:25:50.497

我认为您想要的是[GLImageProcessing](http://developer.apple.com/library/ios/#samplecode/GLImageProcessing/Introduction/Intro.html)。它使用 openGL 进行图像处理，但速度非常快。

如果您想要一些带有详细说明的代码，那么我为您找到了一个美丽的链接：

[这就像 UIImage 类的 Photoshop！](https://github.com/esilverberg/ios-image-filters)

您也可以使用[CKImageAdditions](https://github.com/cmkilger/CKImageAdditions)。

试试这个：[GPUImage 框架](https://github.com/BradLarson/GPUImage)

希望对您有所帮助。享受 ！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:38:18.807

CoreImage 框架是一个不错的选择。还有 GPUImage，它托管在 github 上：GPUImage [https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)

它包含大量的过滤器和处理器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T11:33:08.227

使用 ios 库参考中的示例代码：http: [//developer.apple.com/library/ios/#samplecode/GLImageProcessing/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009053](http://developer.apple.com/library/ios/#samplecode/GLImageProcessing/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009053)

这最好在您的应用程序中实现。

# java - 如何在 HTML 中获取传递的 int 值

> ID：14315502
> 
> 赞同：-3
> 
> 时间：2013-01-14T09:00:56.560
> 
> 标签：java, android, html, regex

我有一个这样的字符串：

```
static String name = "what is the language used in android <img height=\""+height+"\" width=\""+width+"\">"; 
```

我需要获取 and 的值`height`，`width`我正在即时传递它。现在我处于需要根据单个项目获取值的情况。

我尝试过正则表达式，但它们不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:21:20.393

你可以使用这个：

```
int height = 0;
int width = 0;

Pattern h = Pattern.compile("height=\"([0-9]*)\"");
Pattern w = Pattern.compile("width=\"([0-9]*)\"");

Matcher m1 = h.matcher(name);
Matcher m2 = w.matcher(name);

if (m1.find()) {
    height = Integer.parseInt(m1.group(1));
}

if (m2.find()) {
    width = Integer.parseInt(m2.group(1));
}

System.out.println(height);
System.out.println(width); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:47:47.610

试试这个简单的正则表达式：

```
<img\s+height="(\d+)"\s+width="(\d+)"\s*> 
```

和你的代码：

```
List<String> matchList = new ArrayList<String>();

Pattern regex = Pattern.compile("<img\\s+height=\"(\\d+)\"\\s+width=\"(\\d+)\"\\s*>");
Matcher regexMatcher = regex.matcher(inputString);
while (regexMatcher.find()) {
    matchList.add(regexMatcher.group(1)); 
```

解释：

> ***`\d`*** 匹配任何十进制数字。
> 
> ***`\s`*** 匹配任何空白字符。
> 
> ***`(subexpression)`*** 捕获匹配的子表达式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:15:52.993

我相信这应该适用于身高：

```
(?<=height=")[^"]*(?=")|(?<=height=')[^']*(?=') 
```

然后，您可以`height`在该正则表达式中替换 with width 的两个实例来获取宽度。

这可能也会起作用并且更简洁：

```
(?<=height=("|')).*?(?=\1) 
```

# android - 设备未启动

> ID：14315503
> 
> 赞同：0
> 
> 时间：2013-01-14T09:01:03.503
> 
> 标签：android, eclipse, android-emulator

我需要一个新的模拟器在我的 android 中，我创建了这个：

![在此处输入图像描述](../Images/67509cb3e9a40bd3e36dc7d2096fbbae.png)

但是当启动时，它不起作用：

```
[2013-01-14 09:36:31 - 3CBike] ------------------------------
[2013-01-14 09:36:31 - 3CBike] Android Launch!
[2013-01-14 09:36:31 - 3CBike] adb is running normally.
[2013-01-14 09:36:31 - 3CBike] Performing com.usualbike.cbike.SplashScreen activity launch
[2013-01-14 09:36:31 - 3CBike] Automatic Target Mode: Preferred AVD 'android4' is not available. Launching new emulator.
[2013-01-14 09:36:31 - 3CBike] Launching a new emulator with Virtual Device 'android4'
[2013-01-14 09:36:34 - Emulator] emulator: warning: opening audio input failed
[2013-01-14 09:36:34 - Emulator] 
[2013-01-14 09:36:34 - Emulator] emulator: emulator window was out of view and was recentered
[2013-01-14 09:36:34 - Emulator] 
[2013-01-14 09:36:34 - 3CBike] New emulator found: emulator-5554
[2013-01-14 09:36:34 - 3CBike] Waiting for HOME ('android.process.acore') to be launched... 
```

它是开放的，但现在是 09:59，只显示这个

![在此处输入图像描述](../Images/8c70531169cc104e5fc8534297255bc5.png)

我在配置中有什么错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:47:24.457

由于您说您的计算机具有足够好的配置，因此您可以尝试以下几件事：

*   尝试更改一些 AVD 的值，通过添加更多内存，增加 SD 卡。（窗口 > Android SDK 和 AVD 管理器 > 编辑 AVD）
*   在编辑 AVD 时尝试检查“快照”选项，它将保存最后一个状态并加载它而不是完全启动。

尝试混合和匹配。

模拟器需要很长时间才能在我的笔记本电脑上启动（不是很好的规格，但一旦启动，只要我不关闭它，它就会运行良好）

如果以上选项都不能帮助您，您可以尝试使用[此处](http://www.nuxeo.com/blog/development/2011/10/speeding-up-the-android-emulator/)描述的虚拟框。我自己没有尝试过，但看到它在运行，它确实启动得非常快，并为您提供相同的功能

# python-3.x - 使用 Python 检查/写入行到 .txt 文件

> ID：14315505
> 
> 赞同：0
> 
> 时间：2013-01-14T09:01:16.823
> 
> 标签：python-3.x

我是这个网站和 python 的新手，所以请放轻松。使用 Python 3.3

我正在制作一个刽子手式的游戏，而且一切都在发挥作用。我想检查一个字符串是否在 .txt 文件中，如果没有，请将其写入 .txt 文件末尾的新行。目前，我可以在新行上写入文本文件，但如果字符串已经存在，它仍然会写入文本文件，我的代码如下：

请注意，我的文本文件在单独的行中包含每个字符串

```
write = 1
if over == 1:
    print("I Win")
    wordlibrary = file('allwords.txt')
    for line in wordlibrary:
        if trial in line:
            write = 0
    if write == 1:
        with open("allwords.txt", "a") as text_file:
            text_file.write("\n")
            text_file.write(trial) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:18:00.370

这真的是你程序的缩进吗？

如上所述，在 wordlibrary 循环的第一次迭代中，将试验与该行进行比较，并且由于（根据您的症状）它不包含在*第一行*中，因此程序继续执行循环的下一部分：由于 write==1，它会将试验附加到 text_file。

干杯，阿姆农

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:57:28.970

您不需要事先知道文件中存在的行数。只需使用文件迭代器。您可以在此处找到文档：http: [//docs.python.org/2/library/stdtypes.html#bltin-file-objects](http://docs.python.org/2/library/stdtypes.html#bltin-file-objects)

特别注意 readlines 方法。

# android - 如何处理替换视图android

> ID：14315507
> 
> 赞同：0
> 
> 时间：2013-01-14T09:01:22.673
> 
> 标签：android, listview, android-menu

我有一个`MainActivity`扩展类`SlidingMenu`。

当用户在项目上单击滑动菜单时，我想重新`View`加载`MainActivity`.

在大多数情况下，新的`View`将由`ListView`海关单元格组成。

当我创建一个`MyListViewActivity`inside时可以这样做`MainActivity`吗？或者有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:21:05.027

最简单的方法（这完全取决于您的实现）只是使用`setContentView(R.layout.new_layout)`按钮单击，这将膨胀同一活动中的其他布局，替换旧布局。但是请注意所有菜单/操作栏仍然会膨胀，并且您不要引用旧布局中存在的任何小部件。

如果您只想在主布局中显示一小部分，则在您的 xml 中，您可以使用以下内容：

```
<ListView
    android:id="@+id/small_layout_1"
    android:visibility="visible"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

 <LinearLayout
    android:id="@+id/small_layout_2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:visibility="gone" /> 
```

然后按下按钮，您会找到对 small_layout_1 的引用，使 visibility=gone，找到 small_layout_2 并使 visibility=visible，这将实现我认为您正在寻找的相同行为

# javascript - 批处理文件转换和使用

> ID：14315513
> 
> 赞同：1
> 
> 时间：2013-01-14T09:01:50.020
> 
> 标签：javascript, python, windows, batch-file

我正在编写的小批量脚本有问题。批处理脚本的重点是运行一个将 XML 文件转换为 csv 文件的 Javascript 文件，然后运行一个 Python 脚本，该脚本将分析刚刚创建的 csv 文件并创建另一个 csv 文件。

批处理脚本如下。

```
 start XML-CSV_Converter.js
    python CSV_ANALYZER.py
    exit 
```

XML-CSV 转换器不是我写的；在这里能找到它。(http://gotochriswest.com/blog/2011/05/05/excel-batch-convert-xls-to-csv/) 我唯一改变的是我删除了所有的警报和输入提示，所以它不会等待任何用户输入。简而言之，它会查看当前目录中的每个 XML 文件，并在同一目录中生成一个 csv 文件。

每当我运行批处理脚本时，我的 Python 脚本中都会出现 IO 错误，因为即使它可以看到创建的文件，它也无法打开该文件。确切的错误是： `"IOError: [Errno 2] No such file or directory: 'NAME_OF_FILE.csv'"`

下面列出了导致错误的 Python 脚本部分。

```
 dirList = os.listdir("C:\FOLDER")
    for fname in dirList:
        if fname.find(".csv") != -1:
            inputFile = open(fname,'r')     <---- Script halts here 
```

有人知道是什么原因导致文件没有在 Python 脚本中打开吗？如果我手动运行 JavaScript 文件，然后手动运行 Python 脚本，它会完美运行。但是当我尝试在批处理文件中将它们链接在一起时，它会中断。我将不胜感激任何和所有的想法！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:18:02.363

该`start`命令启动一个程序（或者，在您的情况下，一个文件）并立即返回，而无需等待程序退出。这意味着当 Python 尝试打开该文件时，JS 脚本可能仍在运行，并且该文件专门为写入而打开。

您应该通过直接调用 Windows 脚本主机 (cscript.exe) 来运行 JS 文件。只需将`start`命令替换为：

```
cscript //nologo XML-CSV_Converter.js 
```

这将确保在运行 Python 命令时，JS 脚本将完成其工作并安全终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:02:02.273

您忘记将文件夹名称添加到`open()`调用中的文件名。`listdir()`仅返回文件名，因此除非其路径参数与当前目录匹配，否则您必须将其添加到返回的文件名中以正确识别它们。

作为旁注，您还应该避免在普通字符串中使用反斜杠。在这种情况下，“C:\FOLDER”恰好可以工作，但“C:\folder”不会，因为`\f`它会被转换为`\x0c`（换行符）。您应该使用原始字符串（`r'C:\FOLDER'`不转换转义字符）、转义反斜杠 ( `'C:\\FOLDER'`) 或更便携`'C:/FOLDER'`（在 Windows`'/'`上是替代路径分隔符）。

还有一种更简单的检查扩展名的方法是测试名称是否以它结尾（这`s.find(t) == -1`不是很 Pythonic）。总而言之，修改后的代码可能如下所示：

```
folder = "C:/FOLDER"
for fname in os.listdir(folder):
    if fname.endswith(".csv"):
        inputFile = open(os.path.join(folder, fname),'r') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:18:46.577

根本原因是在 XML-CSV_Converter.js 未完成时执行了“python CSV_ANALYZER.py”。

通过键入“start XML-CSV_Converter.js”，在执行下一个命令之前，它不会等待该命令完成。

如果你安装了js解释器，你可以去掉第一行的`start'，那么它应该可以工作了。

# vim - ConEmu：Vim 语法亮点

> ID：14315519
> 
> 赞同：18
> 
> 时间：2013-01-14T09:02:14.100
> 
> 标签：vim, conemu

是否可以在 ConEmu 中突出显示 vim 语法？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-21T08:03:23.093

**注意**。[项目网站](https://conemu.github.io/en/VimXterm.html)上可能存在一些更新的信息。

好吧，自 130120 以来的构建在 vim 中支持 256 种颜色。你需要

*   检查“功能”页面上的选项“注入 ConEmuHk”和“ANSI X3.64 / xterm 256 颜色”
*   检查“颜色”页面上的选项“TrueMod（24 位颜色）支持”
*   编辑您的 vimrc 文件，示例行在[这里](http://conemu-maximus5.googlecode.com/svn/files/Temp/vimrc_add)。当然，你需要一些256色的vim方案，就是本例最后一行的zenburn。

    ```
    set term=xterm
    set t_Co=256
    let &t_AB="\e[48;5;%dm"
    let &t_AF="\e[38;5;%dm"
    colorscheme zenburn 
    ```

*   “vim”必须是`vim.exe`ATM。

**注意**。“原始”Vim（来自[gvim##.exe 和 vim##w32.zip](http://www.vim.org/download.php#pc)的 Win32 控制台可执行文件）通过了测试。MinGW 的 Vim 无法切换到使用 Ansi 序列。

![在此处输入图像描述](../Images/cc1a629c8dda83227cbeb4872c89d142.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-12-28T02:25:09.453

我知道这是一个老问题。但是对我有用的方法与选择的答案相似，只是不是将术语设置为 xterm，而是将其设置为 pcansi，这样键盘键仍然可以工作。对于 %HOMEPATH%_vimrc 中的 ConEmu

```
if !empty($CONEMUBUILD)
    set term=pcansi
    set t_Co=256
    let &t_AB="\e[48;5;%dm"
    let &t_AF="\e[38;5;%dm"
    set bs=indent,eol,start
    colorscheme wombat256
endif 
```

# objective-c - 查询将状态发送给多个朋友

> ID：14315522
> 
> 赞同：0
> 
> 时间：2013-01-14T09:02:33.663
> 
> 标签：objective-c, facebook-graph-api

[正如iOS SDK 中的 Facebook FQL 多](https://stackoverflow.com/questions/6022522/facebook-fql-multiquery-in-ios-sdk)查询链接所引用的，我需要触发多查询，其中特定状态将发送到数组中的选定 uid。我无法创建查询。这是我的代码：

```
 NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:[NSString 
   stringWithFormat:@"HERE NEED QUERY TO SEND STATUS TO SELECTED UIDS"], @"queries",nil];
  [_facebook requestWithMethodName:@"fql.multiquery" andParams:params andHttpMethod:@"POST"   
  andDelegate:self]; 
```

# java - 用 Joda-time 进行时间计算？

> ID：14315526
> 
> 赞同：3
> 
> 时间：2013-01-14T09:02:52.947
> 
> 标签：java, android, jodatime

我被困在这个任务上。我想在当前时间上添加不同的小时或分钟。因此，用户按下一个按钮，`onClick`将拉出当前时间，然后添加我决定的小时数和分钟数。目前我有它增加了两个小时，但我希望能够在 and 周围`2 hours`加减`14 minutes`。

这是我到目前为止所拥有的：

```
public void onClickHere (View v) {

    LocalTime localtime = new LocalTime();
    LocalTime dt = new LocalTime(localtime.getHourOfDay(), localtime.getMinuteOfHour());
    LocalTime twoHoursLater = dt.plusHours(2);

    Text1.setText("Time: " + twoHoursLater);

} 
```

现在上面的代码做了我想要的一部分。它获取本地时间并增加两个小时。但是它显示了很多额外的数字。秒和毫秒。

有没有办法让我只显示小时和分钟？

通过调用`getHourOfDay()`，`getMinuteOfHour()`它只显示小时和分钟，但它仍然显示`00.000`秒和分钟。

因此，如果我现在按下按钮，它将显示`10:58:00.000`. 我希望它显示的是`10:58`.

最终能够增加分钟，但我认为这是另一个问题，一个更简单的问题，我可以简单地以已经知道如何增加两个小时为例。

希望我已经解释得足够好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:05:15.053

您需要使用[DateTimeFormatter](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormatter.html)，例如：

```
DateTimeFormatter formatter = DateTimeFormat.forPattern("HH:mm");
Text1.setText("Time: " + twoHoursLater.toString(formatter)); 
```

注意：`DateTimeFormatter`是线程安全的，因此您可以将其定义为`private final static`变量并重用它，而不是每次`onClickHere`调用时都创建一个实例。

# batch-file - inno setup - 批量更改 InstallDircation

> ID：14315527
> 
> 赞同：2
> 
> 时间：2013-01-14T09:03:02.927
> 
> 标签：batch-file, inno-setup

我试图在安装开始之前运行一个批处理文件，就在用户选择他要安装的组件之后。

幸运的是，我没有从基本构建它，我有一个现成的 iss 文件，它取决于组件运行你已经创建的批处理文件。

在批处理文件中，我尝试将安装程序的目录更改为特定目录。我尝试这样做，因为我将**INSTALLBINDIR**和**appfolder**设置为我的目录，但它没有工作。

您知道我需要设置的变量，以便安装程序安装在我想要的位置吗？

**编辑：** 我发现我不需要使用批处理文件。

要固定文件位置，您只需将目录放在**[files]的 DestDir 中**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:44:04.310

您不能直接从安装程序运行的子脚本/程序更改安装目录。您需要将`WizardForm.DirEdit.Text`in设置`[Code]`为新值。

或者，您可以为指令使用`{code:...}`常量`DefaultDirName`来获取合适的值。

# jquery - 如何使用jquery在div元素内提醒nodeName

> ID：14315528
> 
> 赞同：2
> 
> 时间：2013-01-14T09:03:04.947
> 
> 标签：jquery

嗨，我想提醒 nodeName。我没有找到方法

```
<head>
<script type="text/javascript">
$(function(){
var jj= $('.fa').find().get().nodeName;
alert(jj)
})
</script>
</head>
<body>
<div class="fa">
<span >sdf</span>
<span >sdf</span>
<div></div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:07:36.200

试试这个：

```
var jj= $( '.fa' ).get(0).nodeName
alert(jj); 
```

或者

```
var jj= $( '.fa' )[0].nodeName
alert(jj); 
```

[演示](http://jsfiddle.net/uPyMy/1/)

* * *

编辑

```
$('.fa').find('*').each(
  function(){ 
    alert(this.nodeName);
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:07:13.707

该`get`方法返回一个数组，该`find`方法需要一个参数，如选择器。我猜你`find`做错了。这个怎么样：

```
alert( $('.fa')[0].nodeName ); 
```

如果你不确定这个类是否真的存在，试试这个

```
var node = $('.fa')[0];
if (node != null) alert( node.nodeName ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:07:16.420

我不知道是什么`find()`意思。

但以下代码将起作用：

```
$(function () {
  var jj = $('.fa').get(0).nodeName;
  alert(jj)
}) 
```

`.get(0)`表示第一个元素，您可以获取具有不同索引号的其他元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T09:08:26.657

```
alert($("#elementId").get(0).nodeName); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T09:09:04.490

尝试使用 prop 方法

```
var jj= $('.fa').prop("tagName")
alert(jj) 
```

请查看[演示](http://jsfiddle.net/b8U8w/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T09:10:29.183

我假设您正在尝试查找具有类“.fa”的 div 内的第一个节点的类型。在这种情况下，使用

```
var jj= $( '.fa' ).children().get(0).nodeName; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-14T09:10:48.767

使用此代码：

```
$(function(){
    var jj= $('.fa').find("*")[0].nodeName;
    alert(jj)
}) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-14T09:18:14.600

> *“输出应该跨度，跨度，div”*

尝试这样的事情：

```
var jj = $('.fa').find('*').map(function() {
           return this.nodeName;
         }).get().join(", ");
alert(jj); 
```

演示：http: [//jsfiddle.net/zwCdZ/](http://jsfiddle.net/zwCdZ/)

该[`.get()`方法](http://api.jquery.com/get/)返回一个元素数组，而数组没有`nodeName`属性。要产生您要求的结果（作为字符串），您需要处理数组中的每个项目。我建议使用[`.map()`方法，用](http://api.jquery.com/map/)[`.get()`方法](http://api.jquery.com/get/)把结果变成一个普通数组，然后用`.join()`.

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-14T09:17:31.077

```
$('.fa').children().each(function(){alert(this.nodeName);}); 
```

# database - 使用 Play 框架在 Heroku 中访问数据库时间

> ID：14315530
> 
> 赞同：1
> 
> 时间：2013-01-14T09:03:18.747
> 
> 标签：database, heroku, playframework, notifications, playframework-1.x

我有一个问题，我需要你的帮助。

我正在使用 Java 中的 Play Framework v1.2.4，我的服务器已上传到 Heroku 服务器。

一切正常，我可以访问我的数据库，一切正常，但是当我对数据库进行几次保存时，我遇到了麻烦。

我有一种方法可以在数据库中多次存储数据并向手机返回通知。我的问题是通知在数据库完成保存数据之前到达，因为当它到达时，我向服务器请求更新数据，并且它在没有最后一次更新的情况下返回数据。几秒钟后我再次尝试更新，并且数据显示正确，因此我认为存在时间访问问题。这个想法是当数据库结束保存数据时，服务器发送通知。

我不知道这是否是因为我使用的是 Heroku 服务器的免费版本，但我想在购买之前确定一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:20:58.240

一般来说，对云数据库的所有请求总是比在本地机器上的相同请求慢。即使只是简单地查询在您的计算机上只需要 0.0001 秒，在云中也可能慢至 0.5 秒。原因是简单的云提供商使用共享数据库+（地理）复制，这只是......无法与仅由同一台机器上的一个程序访问的数据库进行比较。

还要记住，免费的[Heroku DB 计划](https://postgres.heroku.com/#plans)不提供任何数据库缓存，这意味着每个查询都是直接从云中获取的。

由于我们不了解您的应用程序，因此很难说瓶颈是什么，几乎可以肯定您至少有 3 种方法可以解决您的问题。它们不是替代品，可能您需要使用（或至少检查）所有这些。

1.  你需要*冒险*一些基本的计划，看看付费版本的变化，也许它对你来说已经足够了，也许不是。
2.  重新设计您的应用程序以减少查询。例如，发送 10 个查询来选择 10 个不同的行，您需要发送一个查询，它一次选择所有 10 条记录。
3.  使用[Play 的缓存 API](http://www.playframework.org/documentation/1.2.5/cache)可以避免一次又一次地重复选择同一组数据。例如，如果您有一些类别很少更改，但您需要为每篇文章提供类别树，您不需要每次都从数据库中获取类别，而是可以将类别列表存储在缓存中，这样您就可以只需要使用一个请求来获取文章的内容（也可以缓存一小段时间......）

# emacs - org 模式下的粗体标记区域

> ID：14315534
> 
> 赞同：10
> 
> 时间：2013-01-14T09:03:41.367
> 
> 标签：emacs, org-mode

有没有办法`org-mode`标记区域（一个或几个单词）并使它们变为粗体/斜体？

目前，如果我想变成粗体，我必须在添加`bar`之前移动点，然后在之后导航点并添加另一个. 我希望能够标记整个单词，点击类似（有人说 AUCTeX 吗？）并获得.`b``*``r``*``bar``C-c C-f C-b``*bar*`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T11:50:34.190

`org-emphasize`做你需要的。它绑定到`C-c C-x C-f`，然后您提供标记（`*`或`_`）或相应 HTML 标记的第一个字母（例如`e`for `<em>`）。

此处的文档：http: [//orgmode.org/worg/doc.html#org-emphasize](http://orgmode.org/worg/doc.html#org-emphasize)

# android - 2 个应用程序，1 个密钥库，只有一个有效

> ID：14315536
> 
> 赞同：0
> 
> 时间：2013-01-14T09:03:45.523
> 
> 标签：android, google-play

我最近在 android 的 Play 市场上发布了 2 个应用程序。我使用相同的密钥库和相同的别名签署了两者（从 netbeans 中）。我签名的第[一个可以正常工作，](https://play.google.com/store/apps/details?id=eu.tjenwellens.timetracker)[另一个](https://play.google.com/store/apps/details?id=eu.tjenwellens.pairtester)在尝试从市场安装时给出错误“android 包文件未正确签名”。

任何关于错误的想法都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:07:24.643

您在签署文件时可能使用了错误的密钥/别名。

来源：http: [//developer.appcelerator.com/question/120663/how-do-you-resolve-or-troubleshoot-package-file-not-signed-correctly-error-from-android-app-in-market-地方](http://developer.appcelerator.com/question/120663/how-do-you-resolve-or-troubleshoot-package-file-not-signed-correctly-error-from-android-app-in-market-place)

您还应该确认您的设备上还没有安装调试副本。

来源：[已发布的 Android apk 给出错误“包文件未正确签名”](https://stackoverflow.com/questions/2519374/published-android-apk-gives-error-package-file-was-not-signed-correctly)

# ruby-on-rails - 如何在不填写密码和密码确认字段的情况下更新用户配置文件？

> ID：14315537
> 
> 赞同：0
> 
> 时间：2013-01-14T09:03:46.897
> 
> 标签：ruby-on-rails

我的**用户**模型正在使用`has_secure_password`（基于[Rails 教程书](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)）：

**架构.rb：**

```
create_table "users", :force => true do |t|
  t.string   "password_digest"
end 
```

**用户.rb：**

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :avatar, :password, :password_confirmation, :provider, :uid

  has_secure_password

  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true 
```

我有这个编辑视图：

```
<%= f.label :name %>
<%= f.text_field :name %>

<%= f.label :email %>
<%= f.text_field :email %>

<%= f.label :password %>
<%= f.password_field :password %>

<%= f.label :password_confirmation, "Confirm Password" %>
<%= f.password_field :password_confirmation %>

<%= f.label :avatar %>
<%= f.file_field :avatar %> 
```

现在的问题是用户每次想要更新其他字段时都必须填写`password`and字段。`password_confirmation`

所以我在考虑分割表格：

**用户/edit.html.erb：**

```
<%= f.label :name %>
<%= f.text_field :name %>

<%= f.label :email %>
<%= f.text_field :email %>

<%= f.label :avatar %>
<%= f.file_field :avatar %> 
```

**用户/编辑密码：**

```
(I will add a current_password field later here).

<%= f.label :password, "New Password" %>
<%= f.password_field :password,  %>

<%= f.label :password_confirmation, "Confirm Password", "Retype Password" %>
<%= f.password_field :password_confirmation %> 
```

我在考虑两种选择：

1.  在每个视图中都有所有用户字段，但是制作这些字段我不希望用户看到隐藏字段（问题是由于某种原因我无法检索密码。类似`@user.password`返回的东西`nil`。我只能这样`@user.password_digest`做不会验证该字段）。
2.  添加`:unless`和验证（但我不知道如何做到这一点，以便它只适用于`password`视图）。`password_confirmation``users/edit`

这里最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:19:10.823

您无法获取用户密码，因为数据库不存储它（它存储单向加密密码摘要）。所以第二个选项是正确的。

看看设计实现（[验证](https://github.com/plataformatec/devise/blob/master/lib/devise/models/validatable.rb)和[控制器](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-edit-their-account-without-providing-a-password)），它可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:29:25.487

您可以使用 object.save 跳过验证：validate=>false

# search-engine - 谷歌自定义搜索，如何在不同区域或另一个页面输出？

> ID：14315540
> 
> 赞同：0
> 
> 时间：2013-01-14T09:04:02.930
> 
> 标签：search-engine, customization, output, google-custom-search

在基本/默认的 Google 自定义搜索引擎工具 [CSE] 中，有一个简单的搜索输入框，然后它会自动在下方区域呈现输出。

例如，它使用以下代码块放入我的页面：

```
<script>
  (function() {
    var cx = 'xxxxxxxxxxxxxxxx:xxxxxxxxx';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search> 
```

我不知道如何拆分输入和输出元素。那么我怎样才能根据自己的喜好分离输入框和输出区域呢？我的意思是，我怎样才能简单地在另一个地方输出，比如`<div id="myarea">`[或] 带上并在另一个页面上输出`<div>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:38:11.160

我最近在玩这个。我想如果你去控制面板中的“外观”，然后在“选择布局”下选择“两页”并单击“保存并获取代码”，你会得到你想要的结果。它会给你两段代码。一个是搜索框（），另一个是结果（）。如果它们在同一页面上，则它告诉您放入的代码是相同的，因此您只需要一次。

# visual-studio - 使用 Devenv.com 在命令行和输出日志文件中显示输出

> ID：14315541
> 
> 赞同：2
> 
> 时间：2013-01-14T09:04:09.407
> 
> 标签：visual-studio, build, msbuild, jenkins, devenv

如何使用 devenv.com 在命令行窗口和外部日志文件中显示输出。我正在使用以下命令行来构建解决方案文件：

```
devenv.com  /Build "Release|Win32" SolutionFile.sln >> D:\SolutionLog.log 
```

使用上面的命令行，输出只写入`SolutionLog.log`文件而不是命令行。如何修改上述命令以获取命令行中的命令以及外部日志文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T23:30:49.243

试试 /out 参数：

```
devenv.com  /Build "Release|Win32" SolutionFile.sln /out D:\SolutionLog.log 
```

# android - AlertDialog 比预期的要宽

> ID：14315542
> 
> 赞同：0
> 
> 时间：2013-01-14T09:04:09.547
> 
> 标签：android, android-layout, android-alertdialog

今天的问题是在 Android 2.3.5 上显示自定义对话框是错误的。对话框宽度比应有的宽。

![在此处输入图像描述](../Images/2bb41da982935b518366726988af3ceb.png)

我尝试使用而不是 in`20dp`没有`wrap_content`成功。我想得到矩形形状，就像它一样。`TextView``LinearLayout``wrap_content``Android 4`

这是此自定义对话框视图的 xml 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Please wait" >
    </TextView>
</LinearLayout> 
```

这是一个自定义对话框的代码，其他的都不重要。

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);
        AlertDialog dialog;

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Service.LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.layout.dialog_progressdialog,
                                       null);

        builder.setView(layout);

        //initializing textview

        dialog = builder.create();

        //do other stuff 
```

在 android 4.0.3 上，我得到了矩形，所以它看起来不错 - 这是我想要的。可能是什么问题，有人发现这种问题吗？抱歉，我没有样品`Android 4`- 今天没有电话可以制作样品。

* * *

如果我也放入其中，`progressbar`我可以在 android 4 中创建正方形，但在 Android 2.3 中是不可能的。

安卓 2.3.5

![在此处输入图像描述](../Images/4a6f60d859d5daba3bf3e65550b6f15d.png)

安卓 4.0.4

![在此处输入图像描述](../Images/da2923b15a7f1b49d6473fb9dd720227.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:13:13.893

只是为了确保您的代码在所有平台上的行为都相同，您可以将布局参数添加到对话框视图中，如下所示：

`layout.setLayoutparams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));`

`dialog.setView(layout);`

好的，这是一个解决方法，但如果你没有想法，就像我在这个问题上一样，你可以尝试：

通过使用计算文本视图的长度`Paint.measureText();`并将其设置为对话框视图参数。 `layout.setLayoutparams(new LinearLayout.LayoutParams(LENGTH_CALCULATED, LayoutParams.WRAP_CONTENT));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:24:04.180

试试这个

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setView(layout);
builder.setTitle("Title");
alertDialog = builder.create();
alertDialog.show();
alertDialog.getWindow().setLayout(600, 400); //Controlling width and height. 
```

也试试这个

```
alertDialog.show();
WindowManager.LayoutParams lp = new WindowManager.LayoutParams();

lp.copyFrom(alertDialog.getWindow().getAttributes());
lp.width = 150;
lp.height = 500;
lp.x=-170;
lp.y=100;
alertDialog.getWindow().setAttributes(lp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T04:35:20.040

我不知道你的代码有什么问题。我想让 ProgressDialog 位于屏幕的中心。我已经在 Android 2.2.* 中实现了它，它在所有设备上都能完美运行，即使在 android 4.* 中也是如此

我另外我有自定义progressDialog的使用样式。请看下面我的代码，你会知道的。

Java代码：

```
final Dialog dialog = new Dialog(SplashActivity.this,R.style.CustomDialogTheme);
        dialog.getWindow();
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setContentView(R.layout.internet_dialog);
        dialog.setCancelable(false);

        Button retryBtn = (Button) dialog.findViewById(R.id.retryBtn);
        Button cancel = (Button) dialog.findViewById(R.id.cancelBtn);

        retryBtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                dialog.dismiss();
                                    // Some task
            }
        });

        cancel.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                dialog.dismiss();
                                    // Some task
            }
        });
        dialog.show();
    } 
```

**自定义对话框主题**

```
<style name="CustomDialogTheme" parent="@android:style/Theme.Dialog">
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:fitsSystemWindows">true</item>

    <!-- <item name="android:colorBackgroundCacheHint">#00000000</item>
    <item name="android:background">#00000000</item> -->

</style> 
```

我的布局的 XMl 文件是：**internet_dialog.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#00000000"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/popup_shape"
        android:layout_margin="10dp"
        android:orientation="vertical"
        >

        <TextView
            android:id="@+id/net_popup_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:text="@string/internet_popup_heading"
            android:layout_marginTop="15dp"
            android:textColor="#ffffff"
            android:textSize="20dp" />

        <TextView
            android:id="@+id/net_msg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_margin="20dp"
            android:gravity="center"
            android:text="@string/internet_popup_msg"
            android:textColor="#ffffff"
            android:textSize="14dp" />

         <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="5dp"
            android:orientation="horizontal"
            android:gravity="center"
            android:layout_gravity="center_horizontal"
            android:padding="5dp" >

            <Button
                android:id="@+id/retryBtn"
                android:layout_width="0dp"
                android:layout_weight="1"
                android:layout_height="wrap_content"
                android:layout_marginRight="2dp"
                android:background="@drawable/blue_button"
                android:textColor="#000000"
                android:textStyle="bold"
                android:text="@string/internet_popup_retry" />

            <Button
                android:id="@+id/cancelBtn"
                android:layout_width="0dp"
                android:layout_weight="1"
                android:layout_marginLeft="2dp"
                android:layout_height="wrap_content"
                android:background="@drawable/blue_button"
                android:textColor="#000000"
                android:textStyle="bold"
                android:text="@string/internet_popup_exit" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

在这里，我没有给 ant 修复高度/宽度，但它在任何设备的所有布局中似乎都很完美。

尝试为您的对话框添加样式并查看结果。希望它会帮助你。

随时发表评论。享受编码... :)

# java - Eclipselink 扩展 JOIN 子句

> ID：14315547
> 
> 赞同：4
> 
> 时间：2013-01-14T09:04:41.540
> 
> 标签：java, jpa, eclipselink, criteria-api

当前代码：

```
CriteriaQuery criteriaQuery = cb.createQuery(MinutisPreke.class);
Root<MinutisPreke> from = criteriaQuery.from(MinutisPreke.class);
Join<LankomumasDiena, MinutisPreke> ld = from.join("lankomumasDiena", JoinType.LEFT);
cb.and(cb.equal(ld.get("intervalas"), 7)); 
```

生成以下查询：

```
SELECT COUNT(t0.pr_id) FROM preke AS t0 
LEFT OUTER JOIN lankomumas AS t1 
ON (t1.pr_id = t0.pr_id) 
WHERE (t1.intervalas = 7) 
```

如何使用**条件查询在 LEFT OUTER JOIN** **ON**子句中添加语句，以便我的代码生成此查询：

 **```
SELECT COUNT(t0.pr_id) FROM preke AS t0 
LEFT OUTER JOIN lankomumas AS t1 
ON (t1.pr_id = t0.pr_id) AND (t1.intervalas = 7) 
```

**编辑 1：** 如果您在第一次和第二次查询中看不到任何区别，请阅读此线程： [SQL 连接：where 子句与 on 子句](https://stackoverflow.com/questions/354070/sql-join-where-clause-vs-on-clause)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:01:57.640

EclipseLink 在 2.5 nightly build 中添加了对 ON 子句的支持，如下所述： [https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=367452) ://bugs.eclipse.org/bugs/show_bug.cgi?id=367452 但它不是 JPA 规范的一部分，因此您需要将 Join 转换为 EclipseLink 的 org.eclipse.persistence.internal.jpa.querydef.JoinImpl

```
((JoinImpl)ld).on(cb.and(cb.equal(ld.get("intervalas"), 7)); 
```**

# javascript - 通过数据通道发送 ArrayBuffer：DOM 异常 12

> ID：14315556
> 
> 赞同：1
> 
> 时间：2013-01-14T09:05:11.677
> 
> 标签：javascript, dom, binary-data, webrtc, arraybuffer

我正在尝试通过两个浏览器之间的数据通道发送一些数据。在我的代码中，我有：

```
var asString = JSON.stringify(this);
var buffer = new ArrayBuffer(asString.length*2); // 2 bytes for each char
var bufView = new Uint16Array(buffer);
for (var i=0; i<asString.length; i++) {
    bufView[i] = asString.charCodeAt(i);
}

channel.send(buffer); 
```

在此示例中，数据通道已打开且正常工作（其类型为 WebKitDatachannel）。当我发送它时，我收到此异常：

```
Uncaught Error: SyntaxError: DOM Exception 12 
```

它有什么问题？

# listview - 每个组在winjs中都有同一个列表视图的不通用模板？

> ID：14315562
> 
> 赞同：-1
> 
> 时间：2013-01-14T09:05:30.057
> 
> 标签：listview, winjs

列表视图有两个组，每个组没有相同的模板怎么能这样做？请帮我 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:38:13.907

你应该为每个`div`代表一个组的人创建一个 id。然后`CSS`按照你想要的样式设置 id。

尝试在这里检查相同的问题

[WinJS 多列列表视图](https://stackoverflow.com/questions/14463181/winjs-multicolumn-listview)

# javascript - 如何使用 jasmine 测试一个需要很长时间才能响应的异步函数？

> ID：14315568
> 
> 赞同：9
> 
> 时间：2013-01-14T09:05:56.280
> 
> 标签：javascript, jasmine

我正在使用一个函数从 webapi 获取数据。基本上使用`$.ajax`.

我现在正在用`waits()`这样的方式测试它：

```
describe('xxxxxxxxxxxxxxxxxxxxx', function () {
  var r;
  it('fetchFilter', function () {
    runs(function () {
      model.fetch(opts)
      .done(function(data) {
        r = data;
      });
    });

    waits(2000);

    runs(function () {
      expect(r[0].gender).toBeDefined();
    });
  });
}); 
```

问题是：

1.  不能保证`waits(2000)`能很好地完成这项工作。由于各种原因（网络连接、api本身的算法效率等），我可能不得不`waits(5000)`或更多，或者对于某些模型`waits(500)`来说已经足够了。而最烦人的是，一切都失控了。
2.  很多`waits()`使测试规范运行浪费大量时间等待。运行整个套件的时间太长，无法接受。

有没有一些`best practice`做那里的事情？

PS：我知道单元测试不应该应用于一些依赖webapi或数据库的功能。但我正在使用单页 js-heavy-webapp。数据获取过程与我将如何在 js 模型中使用它们一样重要。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T10:11:39.433

`waitsFor()`将等待指定的闩锁回调返回`true`（它会每隔几毫秒尝试多次）。如果超过指定的超时时间（在这种情况下为 5000 毫秒），它也会引发异常。

```
describe('xxxxxxxxxxxxxxxxxxxxx', function () {
  var r, fetchDone;

  it('fetchFilter', function () {

    runs(function () {
      model.fetch(opts).done(function(data) {
        r = data;
        fetchDone = true;
      });
    });

    waitsFor(function() { 
      return fetchDone; 
    }, 5000); 

    runs(function () {
      expect(r[0].gender).toBeDefined();
    });

  });
}); 
```

查看[Jasmine 文档](http://pivotal.github.com/jasmine/)以获取有关`waitsFor()`和`runs()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T10:02:41.860

以下解决方案允许您等待不超过真正必要的时间，但您仍然必须定义您认为足够的最大超时时间。接受该`waitsFor`函数并等待它返回`true`或作为最后一个参数传递的超时过期。否则失败。

假设您需要等待的东西是`r[0]`完全定义的，它可能是：

```
waitsFor(
    function() { return r[0]; },
    'the data should be already set',
    5000); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-14T06:23:28.753

根据[jasmine 2.5](https://jasmine.github.io/2.5/introduction#section-Asynchronous_Support)，您可以为`it("scenario", callback, timeout)`

```
describe('xxxxxxxxxxxxxxxxxxxxx', function (done) {
  var r, fetchDone;

  it('fetchFilter', function () {

    runs(function () {
      model.fetch(opts).done(function(data) {
        r = data;
        fetchDone = true;
      });
    });

    setTimeout(function() {
        done();
    }, 9000); 

    runs(function () {
      expect(r[0].gender).toBeDefined();
    });

  });
},10000); 
```

# html - 将图像和 ul 放在同一行

> ID：14315572
> 
> 赞同：0
> 
> 时间：2013-01-14T09:06:10.540
> 
> 标签：html, css, menu, html-lists, nav

我知道这很简单，但是我已经为此烦恼了好几个小时了。在我的标题中，我希望我的徽标和导航位于同一行...基本上，我有这个 HTML：

```
<div class="menu">
    <div class="ct-header-line"></div>
    <img class="logo" src="images/clinictechlogo.png">
    <ul class="nav">
        <!--common features, coded? or static?-->
        <li class="active"><a href="#" id="homenav">Home</a></li>
        <li><a href="#" id="apptenav">Appointments</a></li>
        <li><a href="#" id="presnav">Prescriptions</a></li>
        <li><a href="#" id="prnav">Patient Records</a></li>
        <li><a href="#" id="billsnav">Bills</a></li>
        <!--special features, coded.....-->
        <li><a href="#">Charts</a></li>
        <li><a href="#">something</a></li>
    </ul>
</div> 
```

这是标题部分的一些 CSS：

```
.logo {
    padding: 20px 10px 10px 10px;
    display: inline;
}

.menu {
    background: #4F97BD url(images/headerbg.jpg) repeat;
}

.nav {
    list-style:none;
    margin:0;
}

.nav li {
    display: inline;
} 
```

结果是logo出现在一行，ul nav出现在下一行……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:08:24.440

你需要给`<ul>` `display: inline-block`. 如果 logo 的高度是固定的，您可能还想给`<ul>`a 合适`line-height`的选项，以便选项相对于 logo 垂直对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:08:09.910

尝试添加到徽标：

```
.logo {
    float: left; 
    width: 20%; //Or whatever the width is
} 
```

这应该在它旁边进行总结。如果没有，您可能需要添加类似于

```
.nav {
    float: left; 
    width: 70%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:23:50.520

检查这个：[Inline Logo and Nav](http://jsfiddle.net/Vainglory07/ArJAV/)

只需将**.logo**和**.nav**都浮动到左侧并在底部有明确的修复。

```
.logo {
  padding: 20px 10px 10px 10px;
  display: inline;
  float:left;
}

.menu {
  background: #4F97BD url(images/headerbg.jpg) repeat;
}

.nav {
    padding: 20px 10px 10px 10px;
    list-style:none;
    margin:0;
    float:left;
}

.nav li {
    display: inline;
}

.clear{
  clear:both;
} 
```

为了使它们正确（垂直）对齐，将填充应用于导航与您在图像上使用的相同..

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T11:10:16.260

默克斯..

尝试这个...

```
 .logo {
    margin:0;
    padding:0;
    display:inline;
    } 
```

看看[http://jsfiddle.net/vZZDJ/](http://jsfiddle.net/vZZDJ/)

祝你好运...）

# c# - 无法在客户端应用程序中实例化服务

> ID：14315576
> 
> 赞同：0
> 
> 时间：2013-01-14T09:06:35.093
> 
> 标签：c#, visual-studio-2010, wcf, visual-studio

出于某种原因，我无法实例化该类，也无法访问我添加到我的 VS2010 项目中的 WCF 服务引用的命名空间。上周我也遇到了这个问题，我通过创建一个新的客户端项目解决了这个问题，但是当我需要添加服务引用时，我不想每隔一天这样做。

有没有人有这种问题的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:28:32.783

我在[有时添加 WCF 服务引用会生成一个空的 reference.cs中找到我的解决方案](https://stackoverflow.com/questions/1408509/sometimes-adding-a-wcf-service-reference-generates-an-empty-reference-cs)

我选择配置服务引用并取消选中“在引用的程序集中重用类型”，解决了它！

# asp.net - 失败的 POST 请求的错误消息

> ID：14315577
> 
> 赞同：0
> 
> 时间：2013-01-14T09:06:43.083
> 
> 标签：asp.net, post, error-handling, connection

当与服务器的连接丢失时，我想显示适当的错误消息。在 GET 请求期间，会显示浏览器“连接丢失”消息，但是当发出 POST 请求且未显示响应时，页面无法正确响应。我正在开发 ASP.net 中的页面

希望听到快速响应。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:26:23.790

HTTP 不是为连接而设计的，它是无状态的。在 ASP.NET SingnalR 诞生之前，一切都只是请求-响应。无论 GET 还是 POST，服务器都应该始终向客户端发送响应。

一个“失败”的帖子也应该得到回应，但状态码是 500。在你的情况下，你想检测网络连接是否被切断，所以“失败”对你来说意味着“超时”。

从服务器端，您无法控制它。因此，您只能在客户端执行此操作。比如使用 JavaScript 发送 POST 请求，如果服务器在 15s 内没有响应，你可以称之为“连接丢失”，并在你的网页上显示一条消息。

Facebook 聊天窗口就是采用这种方式。它将在客户端浏览器上运行一个 javascript 函数，并保持“ping”服务器以判断连接是否正常。

# linux - 程序如何知道其输出将被重定向？

> ID：14315579
> 
> 赞同：1
> 
> 时间：2013-01-14T09:06:50.070
> 
> 标签：linux, shell, command-line

当我使用 cURL 时，我发现 cURL 似乎知道它自己的输出是否会被重定向，或者是另一个程序的输入。

以下是两个不同的命令：

```
curl http://www.google.com/ 
```

输出将是：

```
<HTML><HEAD>......blah, blah......</HEAD></HTML> 
```

但如果我使用重定向或管道，cURL 将打印其下载状态。

```
curl http://www.google.com/ | xargs echo 
```

输出将领先于：

```
 % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   376  100   376    0     0   2729      0 --:--:-- --:--:-- --:--:--  5295
<HTML><HEAD>......blah, blah......</HEAD></HTML> 
```

我的问题是：cURL 如何知道它的打印是否会被重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:13:47.067

[`isatty(3)`](http://linux.die.net/man/3/isatty)会告诉您 FD 是否连接到 TTY。

# ios - 使用 Titanium 将数据保存到 NSUserDefaults

> ID：14315582
> 
> 赞同：0
> 
> 时间：2013-01-14T09:06:56.997
> 
> 标签：ios, titanium, nsuserdefaults, titanium-mobile

我目前正在开发基于 Titanium 的 iOS 应用程序。

我需要在其中将一些数据（**进度值**）保存到[**NSUserDefaults**](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)。

我在 iOS 中完成了此操作，但不知道如何使用 Titanium 执行此操作，我在 Titanium 中进行了很多[**搜索**](https://www.google.co.in/search?q=How%20to%20save%20data%20to%20NSUserdefault%20in%20%20titanium&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a&source=hp&channel=np#hl=en&client=firefox-a&tbo=d&rls=org.mozilla%3aen-US%3aofficial&channel=np&sclient=psy-ab&q=save%20data%20to%20NSUserdefault%20in%20%20titanium&oq=save%20data%20to%20NSUserdefault%20in%20%20titanium&gs_l=serp.12...0.0.0.3447.0.0.0.0.0.0.0.0..0.0.les;..0.0...1c.I2hQHtThUCw&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=bcb231deaccfe515&biw=1600&bih=717)，但找不到任何解决方案。

我只需要存储这个单一的值，所以不需要使用`sqlite`数据库，这就是我选择**NSUserDefaults**的原因。

请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:02:30.973

我找到了解决方案。

> 应用程序属性模块用于将应用程序相关数据存储在属性/值对中，这些数据在应用程序会话和设备电源循环之后仍然存在。

**存储数据：**

```
Ti.App.Properties.setString('myName', 'Midhun'); 
```

**检索数据：**

```
var name = Ti.App.Properties.getString('myName')); 
```

我不知道它是否将数据保存到**NSUserDefaults**，无论如何它解决了我的问题。

参考：[**Titanium.App.Properties**](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.App.Properties)。

# macos - 在 Mac OSX 上构建所有静态 svn 客户端，mod_dav_svn.so 上的错误

> ID：14315584
> 
> 赞同：6
> 
> 时间：2013-01-14T09:07:05.857
> 
> 标签：macos, svn, configure, mod-dav-svn

我正在尝试在 Mac OS 10.7.5 上构建 svn 客户端。我的目标是构建完全静态的 svn 客户端，因此它不依赖于要安装的任何 dylib。这个想法是 svn 客户端可以复制到密钥上的磁盘，或下载并且无需安装或配置任何东西即可工作。

我下载了 svn 源代码（subversion-1.7.8）和所有必需的依赖项（apr、par-util、neon、sqlite-amalgamation）并说明了配置-制作-制作安装周期。

svn 的配置选项有**--enable-all-static**标志，它创建不依赖外部 dylib 的 svn 客户端。但是，构建总是失败并显示以下消息：

```
Warning!  dlname not found in /Volumes/mydisk/build/svn/libexec/mod_dav_svn.la.
Assuming installing a .so rather than a libtool archive.
chmod 755 /Volumes/mydisk/build/svn/libexec/mod_dav_svn.so
chmod: /Volumes/mydisk/wsvn/build/svn/libexec/mod_dav_svn.so: No such file or directory
apxs:Error: Command failed with rc=65536
.
make: *** [install-mods-shared] Error 1 
```

似乎构建正在寻找 mod_dav_svn.so，即使它不需要并且一切都编译为静态。

有趣的是，构建的 svn 客户端实际上运行了！但是，我想正确完成构建和安装。

我的问题是：

1.  这个构建错误是真实的还是我可以忽略的？
2.  为了完成构建，如何避免此构建错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:44:03.503

根据我的经验，编译使用 3rd 方库和/或系统库（如 glibc 等）的应用程序可能会很棘手。问题是，除了您的应用程序是静态构建的之外，所有这些库都需要同时提供动态（ .so) 版本以及静态版本 (.a) 和一些库只是不提供这个，至少不容易。因此，您被迫自己将所有内容编译到依赖堆栈中，这可能很困难。

话虽如此，由[Rick Vanderzwet 的博客](http://rickvanderzwet.blogspot.com/2007/11/building-static-subversion.html)提供：

```
% curl -O wget http://archive.apache.org/dist/subversion/subversion-1.7.8.tar.gz
% tar zxvf subversion-1.7.8.tar.gz
% cd subversion-1.7.8/
% ./get-deps.sh
% ./configure --with-ssl --without-gssapi --without-swig --enable-all-static
% make 
```

使用以下命令确认：

### 可执行文件的大小？

```
% ls -lh subversion/svn/svn
-rwxrwxr-x 1 saml saml 11M Jan 19 22:09 subversion/svn/svn 
```

### 可执行文件运行？

```
% subversion/svn/svn --version
svn, version 1.7.8 (r1419691)
   compiled Jan 19 2013, 22:03:50

Copyright (C) 2012 The Apache Software Foundation.
This software consists of contributions made by many people; see the NOTICE
file for more information.
Subversion is open source software, see http://subversion.apache.org/

The following repository access (RA) modules are available:

* ra_svn : Module for accessing a repository using the svn network protocol.
  - with Cyrus SASL authentication
  - handles 'svn' scheme
* ra_local : Module for accessing a repository on local disk.
  - handles 'file' scheme
* ra_serf : Module for accessing a repository via WebDAV protocol using serf.
  - handles 'http' scheme
  - handles 'https' scheme 
```

### 可执行文件依赖于什么？

```
%  ldd subversion/svn/svn
    linux-vdso.so.1 =>  (0x00007fffd7463000)
    libsasl2.so.2 => /usr/lib64/libsasl2.so.2 (0x00000034fc600000)
    libm.so.6 => /lib64/libm.so.6 (0x00000034e7600000)
    libssl.so.10 => /usr/lib64/libssl.so.10 (0x0000003210800000)
    libcrypto.so.10 => /lib64/libcrypto.so.10 (0x000000399a000000)
    libz.so.1 => /lib64/libz.so.1 (0x00000034e8600000)
    libmagic.so.1 => /usr/lib64/libmagic.so.1 (0x00000034ef600000)
    libexpat.so.1 => /lib64/libexpat.so.1 (0x00000034eb200000)
    libuuid.so.1 => /lib64/libuuid.so.1 (0x00000034eda00000)
    librt.so.1 => /lib64/librt.so.1 (0x00000034e8a00000)
    libcrypt.so.1 => /lib64/libcrypt.so.1 (0x00000034f5e00000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00000034e7e00000)
    libdl.so.2 => /lib64/libdl.so.2 (0x00000034e7a00000)
    libc.so.6 => /lib64/libc.so.6 (0x00000034e7200000)
    libresolv.so.2 => /lib64/libresolv.so.2 (0x00000034ea200000)
    libgssapi_krb5.so.2 => /lib64/libgssapi_krb5.so.2 (0x000000320f800000)
    libkrb5.so.3 => /lib64/libkrb5.so.3 (0x0000003210000000)
    libcom_err.so.2 => /lib64/libcom_err.so.2 (0x0000003d3ce00000)
    libk5crypto.so.3 => /lib64/libk5crypto.so.3 (0x0000003210400000)
    /lib64/ld-linux-x86-64.so.2 (0x00000034e6e00000)
    libfreebl3.so => /lib64/libfreebl3.so (0x00000034f6200000)
    libkrb5support.so.0 => /lib64/libkrb5support.so.0 (0x000000320fc00000)
    libkeyutils.so.1 => /lib64/libkeyutils.so.1 (0x00000034f3a00000)
    libselinux.so.1 => /lib64/libselinux.so.1 (0x00000034e8e00000) 
```

最后一点表明这个可执行文件仍然依赖于几个动态库，但它比典型的动态构建的颠覆要少得多！

### 编辑#1

如果您不需要`mod_dav_svn`支持，您可以通过使用`--without-serf`switch 来禁用它`configure`。

**注意 #1：**禁用此支持将禁用您的客户端通过和`svn`访问 SVN 存储库的能力！`http``https`

**注意 #2：**如果您查看`svn --version`命令的输出，您可以看到哪些存储库访问**(RA)**模块已编译到您的`svn`客户端中。

# java - 循环倒计时

> ID：14315585
> 
> 赞同：0
> 
> 时间：2013-01-14T09:07:09.907
> 
> 标签：java, android, geometry, countdown, countdowntimer

我正在考虑实施倒数计时器。

例如这个：[链接](https://play.google.com/store/apps/details?id=com.opoloo.holotimer)

我一直在考虑用图像或直接绘制它。

*   有人有这方面的经验吗？
*   最简单的方法是什么？
*   任何指针？
*   有没有可用的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:12:13.087

在这里你有一个免费的：http: [//lifehacker.com/5928519/ovo-timer-is-a-fast-free-and-good-looking-countdown-timer-for-android](http://lifehacker.com/5928519/ovo-timer-is-a-fast-free-and-good-looking-countdown-timer-for-android)

如果强制自己实现的话，尝试下载apk文件，然后逆向工程。您应该能够看到它是如何完成的。

一些建议：可能有几种方法。最好的方法是在中间使用图像和数字。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-14T09:16:43.207

`ironicModeOn()`

*   是的，我有使用自定义 GUI 元素的经验；-)
*   我将使用自定义疼痛方法创建自定义 GUI 元素，可选的倒计时代码（计时器）已经包含
*   Java充满了指针
*   您在链接中提到了一个

`ironicModeOff()`

# asp.net - 开发移动应用程序时的数据库安全考虑

> ID：14315590
> 
> 赞同：0
> 
> 时间：2013-01-14T09:07:21.790
> 
> 标签：asp.net, html

我们正在为 Iphone 和 Ipad 在 asp.net HTML5 css3 中开发应用程序。它的数据库驱动的网络应用程序。我想知道从移动客户端访问数据库的最佳做法是什么。数据库安全注意事项有哪些？在开发此类可在移动设备上运行的应用程序时，我应该考虑哪些安全风险。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:09:25.923

由于您在 asp.net 中进行开发，这是一个 Web 框架，因此应考虑与普通 Web 应用程序相同的安全注意事项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:12:26.813

由于它是一个 Web 应用程序，因此与移动或桌面无关。

微软有一个很棒的网站，涵盖[了 ASP.NET Web 应用程序的安全注意事项](http://msdn.microsoft.com/en-us/library/aa984187%28v=vs.71%29.aspx)，我建议你好好看看这个网站，并将它们实施到你构建的任何网站中。

在构建移动网站时，您唯一需要考虑的是响应式设计和对浏览器的限制。

**响应式设计：**

[http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design](http://blog.teamtreehouse.com/beginners-guide-to-responsive-web-design)

**浏览器限制**

对于浏览器限制，您将不得不环顾四周，但例如直到 iOS 5.xx 您无法使用输入标签上传，显然在 iOS 中您将无法将不受支持的文件类型下载到设备。

**从客户端访问**

与客户端访问包含其他客户端数据的数据库的任何应用程序一样，输入卫生是必须的。

*例如，更改文档的链接类似于 Document.aspx?ID=4*

不要假设用户不会为了看看会发生什么而更改 URL 中的 ID，始终检查用户尝试的所有内容。

# mongodb - 通过 Doctrine 使用相同的实体/文档类将数据存储在 MongoDB 和 MySQL 中

> ID：14315593
> 
> 赞同：4
> 
> 时间：2013-01-14T09:07:29.340
> 
> 标签：mongodb, symfony, doctrine

我需要帮助。这是情况。我正在使用 Symfony2 + FOSRestBundle，我创建了我的实体类来通过 Doctrine 将我的数据存储在 MySQL 中。我还编写了所有控制器来获取数据并将其直接转换到我的数据库中。这很好用。

```
namespace Stat\ContentBundle\Entity;
use Doctrine\ORM\Mapping as ORM;

/** 
 * @ORM\Entity
 * @ORM\Table(name="agegroups")
 */
 class Table
 {
 * @ORM\Column(name="id", type="smallint")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
 protected $id;

 /**
 * @ORM\Column(name="description", type="string", length=50)
 * @Type("string")
 */
 protected $description; 
```

现在我确实想使用相同的实体声明，并使用更多信息对其进行扩展，以便与 MongoDB 一起使用。我想将我的数据存储在 MySQL 和 MongoDB 中。要使用 mongodb-odm-bundle 重用代码，我必须使用命名空间 Document - 这只是问题的开始。如果我想重用我的控制器，我也必须为 MongoDB 重写该代码。

```
namespace Stat\ContentBundle\Entity;
use Doctrine\ORM\Mapping as ORM;
use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/** 
 * @MongoDB\Document
 * @ORM\Entity
 * @ORM\Table(name="agegroups")
 */

 class Table
 {
 * @ORM\Column(name="id", type="smallint")
 * @ORM\Id
 * @MongoDB\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
 protected $id;

 /**
 * @ORM\Column(name="description", type="string", length=50)
 * @MongoDB\String
 * @Type("string")
 */
 protected $description;

 /**
 * @ORM\Column(name="mySqlOnly", type="string", length=50)
 * @Type("string")
 */
 protected $mySqlOnly;

 /**
 * @MongoDB\String
 */
 protected $mongoDbOnly; 
```

有没有一种简单的方法可以为基于文档的数据库和关系数据库使用 Doctrine-database 模式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T08:06:52.993

也许这会有所帮助： [混合 ORM 和 MongoDB ODM](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/cookbook/blending-orm-and-mongodb-odm.html)

使用 Doctrine2 的数据库 nybrid 很容易，因为您有一个实体 - 加上一个文档管理器。

# php - 在 PHP 5.3 中处理 UTF-8 字符串

> ID：14315598
> 
> 赞同：0
> 
> 时间：2013-01-14T09:08:06.047
> 
> 标签：php, utf-8, character-encoding

我们正在使用一些第三方 php 库函数，并且在转换 utf-8 字符串时遇到了一些困难。

经过一些实验，这是我们目前得到的：

(1) 以下将在浏览器中打印*正确*的unicode 字（它是“一个”字）（我们使用 Firefox）：

```
$s = "\345\244\247";
echo $s;

大 <-- (prints out a correct unicode word) 
```

(2) 但是，库函数将返回如下内容：

```
$s2 = "\\345\\244\\247";
echo $s2;

\345\244\247  <-- the print out will contain escape character so the unicode isn't showing correctly 
```

(3) 所以问题是，是否有一个 php 函数能够做到这一点，将 $s2 转换为正确的 unicode 形式（如 $s）？

谢谢。

环境是 PHP 5.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:16:49.887

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:55:30.653

the problem is, that you're escaping the slashes!

use this:

```
$s2 = str_replace("\\","\",$s2); 
```

# sql - 有没有办法优化这个 SQL Server 查询？

> ID：14315605
> 
> 赞同：-2
> 
> 时间：2013-01-14T09:08:37.920
> 
> 标签：sql, sql-server

我有这个查询需要 2 分钟才能执行，即使时间段不是那么长：

```
SELECT MTI.DeptID,
       ShortEmployees.EmpID,
       ShortEmployees.EmpName1 AS EmpName,
       Sum(CASE
             WHEN (BSR.BSTID = 3
                   AND bli.state IN (12, 13, 14)) THEN -1 * ((BLD.Qty / dbo.Getunitval(BLD.UnitID, BLD.MTID)) * BLD.Price - ((BLD.Qty / dbo.Getunitval(BLD.UnitID, BLD.MTID)) * BLD.Price * BLD.discount * 0.01))
             ELSE ((BLD.Qty / dbo.Getunitval(BLD.UnitID, BLD.MTID)) * BLD.Price - ((BLD.Qty / dbo.Getunitval(BLD.UnitID, BLD.MTID)) * BLD.Price * BLD.discount * 0.01))
           END) AS Total
FROM   BLD
       INNER JOIN BLI
         ON BLD.BLNo = BLI.BLNo
       INNER JOIN BSR
         ON BLI.BLID = BSR.BLID
       INNER JOIN ShortEmployees
         ON BLI.EmpID = ShortEmployees.EmpID
       INNER JOIN MTI
         ON BLD.MTID = MTI.MTID
WHERE  (MTI.DeptID = 'B')
       AND (BLI.BLDate > Cast('2013-01-01 00:00:00' AS DATETIME))
       AND (BLI.BLDate < Cast('2013-01-14 23:59:59' AS DATETIME))
       AND ((BSR.BSTID = 2
             AND bli.state IN (2, 6, 8, 9,
                               10, 12, 18))
             OR (BSR.BSTID = 3
                 AND bli.state IN (12, 13, 14)))
GROUP  BY ShortEmployees.EmpName1,
          ShortEmployees.EmpID,
          MTI.DeptID
ORDER  BY Total DESC 
```

我该如何优化它？

MTI：项目信息表。

BLI：账单表。

BLD：账单明细表。

ShortEmployees：销售员表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:36:32.990

将条件移动到 JOKN ON 子句中，在这些子句中可以在进行连接时应用它们，而不是在完成所有连接后进行过滤：

```
SELECT MTI.DeptID,
       ShortEmployees.EmpID,
       ShortEmployees.EmpName1 AS EmpName,
       Sum(CASE
             WHEN (BSR.BSTID = 3
                   AND bli.state IN (12, 13, 14)) THEN -1 * ((BLD.Qty / dbo.Getunitval(BLD.UnitID, BLD.MTID)) * BLD.Price - ((BLD.Qty / dbo.Getunitval(BLD.UnitID, BLD.MTID)) * BLD.Price * BLD.discount * 0.01))
             ELSE ((BLD.Qty / dbo.Getunitval(BLD.UnitID, BLD.MTID)) * BLD.Price - ((BLD.Qty / dbo.Getunitval(BLD.UnitID, BLD.MTID)) * BLD.Price * BLD.discount * 0.01))
           END) AS Total
FROM BLD
JOIN BLI ON BLD.BLNo = BLI.BLNo
    AND BLI.BLDate BETWEEN Cast('2013-01-01 00:00:00' AS DATETIME)
       AND Cast('2013-01-14 23:59:59' AS DATETIME)
JOIN BSR ON BLI.BLID = BSR.BLID
    AND ((BSR.BSTID = 2
             AND bli.state IN (2, 6, 8, 9, 10, 12, 18)
        OR (BSR.BSTID = 3
             AND bli.state IN (12, 13, 14))
JOIN ShortEmployees ON BLI.EmpID = ShortEmployees.EmpID
JOIN MTI ON BLD.MTID = MTI.MTID
    AND MTI.DeptID = 'B'
GROUP BY ShortEmployees.EmpName1,
    ShortEmployees.EmpID,
    MTI.DeptID
ORDER BY Total DESC 
```

请注意，我将日期范围检查更改为 BETWEEN，因为您的查询排除了该期间的第一秒和最后几秒。

我还删除了不必要的括号和缩进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:52:59.043

最后，我最终将该查询转换为整个存储过程，差异很大！现在只需要 2 秒 :)，特别感谢大家讨厌的屁股 ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T14:13:11.640

如需进一步优化，请将 Cast('XXXXX' AS DATETIME) 移动到变量中：

```
DECLARE @dmin DATETIME= Cast('2013-01-01 00:00:00' AS DATETIME);
DECLARE @dmax DATETIME= Cast('2013-01-14 23:59:59' AS DATETIME);
SELECT [blah]
FROM   [blahblah]
WHERE  (MTI.DeptID = 'B')
       AND (BLI.BLDate BETWEEN @dmin AND @dmax)
etc 
```

# binary - 如何显示 < > 在 AppleScript 显示对话框命令？

> ID：14315606
> 
> 赞同：1
> 
> 时间：2013-01-14T09:08:38.513
> 
> 标签：binary, applescript

我喜欢检索图像文件的二进制内容：«数据JPEGFFD8FFE000104A46494600010101004800480000FFDB00430006040506050406060506070706080A100A0A09090A140E0F0C1017141818171416161A1D251F1A1B231C1616202C20232627292A29191F2D302D283025282928FFDB0043010707070A080A130A0A13281A161A28282828282828282828282828282828282828 >>我想通过‘显示对话框’命令来显示这些数据。但我得到像“不能把 <> 变成字符串”这样的错误。那么有没有办法使用显示对话框来显示这些数据呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:53:11.527

尝试：

```
set xxx to «data JPEGFFD8FFE000104A46494600010101004800480000FFDB00430006040506050406060506070706080A100A0A09090A140E0F0C1017141818171416161A1D251F1A1B231C1616202C20232627292A29191F2D302D283025282928FFDB0043010707070A080A130A0A13281A161A28282828282828282828282828282828282828»
try
    set xxx to xxx as text
on error errMsg
    set errMsg to do shell script "echo " & quoted form of errMsg & " | grep -o «.*»"
    display dialog errMsg
end try 
```

# c# - 必需的验证属性和自定义验证器顺序

> ID：14315611
> 
> 赞同：3
> 
> 时间：2013-01-14T09:09:04.377
> 
> 标签：c#, silverlight, validation, wcf-ria-services, data-annotations

我有 3 个实体。

假设我有 Event 实体和 2 个“派生”实体：Accident、Repair。

它们在 Event 实体上提供了一些额外的字段。

事件有`StartDate`并且`EndDate`总是需要的，所以我用 [ `Required`] 属性标记它们。没关系。但是我有一些额外的验证逻辑来​​检查 Event 是否是`Repair`，然后还需要一些其他 Event 字段。为此，我提供了自定义验证器。

问题是**用 [ `Required`] 属性标记的属性总是在其他验证器之前检查**。

**我想要实现的目标：** 如果 Event 是`Accident`我想要的`Event.SomeField`。验证摘要现在应该显示在第一次验证尝试时包含 3 个验证错误。

**现在的行为方式：** 如果 Event 是第一次验证尝试，则显示 2 个标记为 [ ]`Accident`的属性的 2 个错误。`Required`只有在我填写完这些之后，下一次验证尝试才会触发我的自定义验证器，该验证器还指出还需要 3rd Event.SomeField。

我希望同时验证所有必填字段。

这可能吗？如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:50:06.730

对于基于特定条件需要属性的情况，我使用了一个自定义属性，该属性最初由[Jeff Handley](http://jeffhandley.com/archive/2010/09/26/riaservicescustomreusablevalidators.aspx)在他的博客中提供。

这是属性的代码：

```
 [AttributeUsage(AttributeTargets.Property | AttributeTargets.Field | AttributeTargets.Parameter, AllowMultiple = true)]
public class ConditionallyRequiredAttribute : RequiredAttribute {
    private MemberInfo _member;

    /// <summary>
    /// The name of the member that will return the state that indicates
    /// whether or not the validated member is required.
    /// </summary>
    public string ConditionMember { get; private set; }

    /// <summary>
    /// The condition value under which this validator treats
    /// the affected member as required.
    /// </summary>
    public object RequiredCondition { get; private set; }

    /// <summary>
    /// Comma-separated list of additional members to
    /// add to validation errors.  By default, the
    /// <see cref="ConditionMember"/> is added.
    /// </summary>
    public string ErrorMembers { get; set; }

    /// <summary>
    /// Conditionally require a value, only when the specified
    /// <paramref name="conditionMember"/> is <c>true</c>.
    /// </summary>
    /// <param name="conditionMember">
    /// The member that must be <c>true</c> to require a value.
    /// </param>
    public ConditionallyRequiredAttribute(string conditionMember)
        : this(conditionMember, true) { }

    /// <summary>
    /// Conditionally require a value, only when the specified
    /// <paramref name="conditionMember"/> has a value that
    /// exactly matches the <paramref name="requiredCondition"/>.
    /// </summary>
    /// <param name="conditionMember">
    /// The member that will be evaluated to require a value.
    /// </param>
    /// <param name="requiredCondition">
    /// The value the <paramref name="conditionMember"/> must
    /// hold to require a value.
    /// </param>
    public ConditionallyRequiredAttribute(string conditionMember, object requiredCondition) {
        this.ConditionMember = conditionMember;
        this.RequiredCondition = requiredCondition;
        this.ErrorMembers = this.ConditionMember;
    }

    /// <summary>
    /// Override the base validation to only perform validation when the required
    /// condition has been met.  In the case of validation failure, augment the
    /// validation result with the <see cref="ErrorMembers"/> as an additional
    /// member names, as needed.
    /// </summary>
    /// <param name="value">The value being validated.</param>
    /// <param name="validationContext">The validation context being used.</param>
    /// <returns>
    /// <see cref="ValidationResult.Success"/> if not currently required or if satisfied,
    /// or a <see cref="ValidationResult"/> in the case of failure.
    /// </returns>
    protected override ValidationResult IsValid(object value, ValidationContext validationContext) {
        if (this.DiscoverMember(validationContext.ObjectType)) {
            object state = this.InvokeMember(validationContext.ObjectInstance);

            // We are only required if the current state
            // matches the specified condition.
            if (Object.Equals(state, this.RequiredCondition)) {
                ValidationResult result = base.IsValid(value, validationContext);

                if (result != ValidationResult.Success && this.ErrorMembers != null && this.ErrorMembers.Any()) {
                    result = new ValidationResult(result.ErrorMessage,
                        result.MemberNames.Union(this.ErrorMembers.Split(',').Select(s => s.Trim())));
                }

                return result;
            }

            return ValidationResult.Success;
        }

        throw new InvalidOperationException(
            "ConditionallyRequiredAttribute could not discover member: " + this.ConditionMember);
    }

    /// <summary>
    /// Discover the member that we will evaluate for checking our condition.
    /// </summary>
    /// <param name="objectType"></param>
    /// <returns></returns>
    private bool DiscoverMember(Type objectType) {
        if (this._member == null) {
            this._member = (from member in objectType.GetMember(this.ConditionMember).Cast<MemberInfo>()
                            where IsSupportedProperty(member) || IsSupportedMethod(member)
                            select member).SingleOrDefault();
        }

        // If we didn't find 1 exact match, indicate that we could not discover the member
        return this._member != null;
    }

    /// <summary>
    /// Determine if a <paramref name="member"/> is a
    /// method that accepts no parameters.
    /// </summary>
    /// <param name="member">The member to check.</param>
    /// <returns>
    /// <c>true</c> if the member is a parameterless method.
    /// Otherwise, <c>false</c>.
    /// </returns>
    private bool IsSupportedMethod(MemberInfo member) {
        if (member.MemberType != MemberTypes.Method) {
            return false;
        }

        MethodInfo method = (MethodInfo)member;
        return method.GetParameters().Length == 0
            && method.GetGenericArguments().Length == 0
            && method.ReturnType != typeof(void);
    }

    /// <summary>
    /// Determine if a <paramref name="member"/> is a
    /// property that has no indexer.
    /// </summary>
    /// <param name="member">The member to check.</param>
    /// <returns>
    /// <c>true</c> if the member is a non-indexed property.
    /// Otherwise, <c>false</c>.
    /// </returns>
    private bool IsSupportedProperty(MemberInfo member) {
        if (member.MemberType != MemberTypes.Property) {
            return false;
        }

        PropertyInfo property = (PropertyInfo)member;
        return property.GetIndexParameters().Length == 0;
    }

    /// <summary>
    /// Invoke the member and return its value.
    /// </summary>
    /// <param name="objectInstance">The object to invoke against.</param>
    /// <returns>The member's return value.</returns>
    private object InvokeMember(object objectInstance) {
        if (this._member.MemberType == MemberTypes.Method) {
            MethodInfo method = (MethodInfo)this._member;
            return method.Invoke(objectInstance, null);
        }

        PropertyInfo property = (PropertyInfo)this._member;
        return property.GetValue(objectInstance, null);
    }

    #if !SILVERLIGHT
    /// <summary>
    /// The desktop framework has this property and it must be
    /// overridden when allowing multiple attributes, so that
    /// attribute instances can be disambiguated based on
    /// field values.
    /// </summary>
    public override object TypeId {
        get { return this; }
    }
    #endif
} 
```

这是一个例子：

```
public class Dummy{

  public bool IsCondition {get; set;}

  [ConditionallyRequired("IsCondition", true)]
  public string SometimesRequired {get; set;}
} 
```

# php - Zend Framework Unittest：如何在 redirect() 上呈现响应

> ID：14315613
> 
> 赞同：3
> 
> 时间：2013-01-14T09:09:13.317
> 
> 标签：php, zend-framework, phpunit, zend-controller

我的控制器中有很多`$this->redirect()`，发出一个`Zend_Flashmessage`然后重定向。由于事实上，这`Zend_Test`是禁用重定向响应，我看不到验证我的闪存消息的机会。

有没有办法`render()`在我的单元测试中调用该函数来验证输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:08:31.597

您真的需要测试 Zend Framework 控制器是否正常工作？或者您是否可以通过验证 ->redirect() 被调用一次并且您的 flash 消息已设置（下一段）来使您的测试用例更加具体。这样，您就相信 Zend 控制器会显示 flash 消息，因为 Zend 已经测试了该功能。

我建议简单地编写和调用 ->redirectWithMessage() 方法，您可以轻松地模拟和验证。将 Zend 功能排除在测试之外。

# c# - mysql 错误：13 MyISAM 表文件未找到

> ID：14315618
> 
> 赞同：0
> 
> 时间：2013-01-14T09:09:45.160
> 
> 标签：c#, mysql, exception, file-not-found, loaddata

我有一组文件（每个大约 20MB）需要插入到 mysql 的表中。插入是在所有文件的循环中完成的（单线程）。这通常可以正常工作，但有时我会遇到以下异常：`File '.table.MYD' not found (Errcode: 13)`对于集合中间的一个文件（前 50 个运行正常，接下来的 2-3 个将失败，然后以下将再次运行正常）。如果我只是在 mysql 工作台中重新运行失败文件的查询（或重新运行失败的文件），它们工作正常。该表刚刚创建，没有索引 - 因此不应该存在诸如“索引失败”、表碎片或任何其他问题之类的问题。

以下是完整的堆栈跟踪：

```
File '.dbtable.MYD' not found (Errcode: 13)
----------------------------------
 at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
 at MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int32& insertedId)
 at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)
 at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
 at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
 at MySql.Data.MySqlClient.MySqlCommand.ExecuteNonQuery()
 at Utils.SqlUtils.ExecMysql(String sql, String connection)
 at Utils.MySqlExecQueue.DoExec(Object data)
----------------------------------
MySql.Data 
```

其中：
+ `ExecMysql`- 看起来像

```
using (MySqlConnection cnn = new MySqlConnection(connection))
{
  cnn.Open();

  using (MySqlCommand cmd = new MySqlCommand(sql, cnn))
  {
    cmd.CommandType = CommandType.Text;
    cmd.ExecuteNonQuery();
  }
} 
```

+`DoExec`是一种从队列中提取文件、创建 sql 语句并`ExecMysql`在上面调用的方法。
+插入代码和mysql在同一台机器上（Windows 2008，x64）；
+该机器上没有运行可能锁定表文件的防病毒软件或任何其他工具（如在某些博客上发现的那样）；
+c#（.net 4）代码使用mysql连接器6.5.4，mysql版本为5.5；

我已经实现了一个虚拟的解决方法，比如“try-to-insert-while-13error-exception-is-throw”，但我强烈认为这不是正确的解决方案。

任何想法发生了什么以及如何一劳永逸地解决这个问题？

**更新**- 显然，'try-to-insert-while-13error-exception-is-throw' 修复不是一个好主意：我在成功插入数据后立即在表上运行 SELECT 时遇到了同样的异常。

**更新 2** - 检查了日志，我注意到另一个奇怪的异常：`Error on rename of '.\db\table.MYD' to '.\db\#sql2-4e4-1677.MYD' (Errcode: 17)`......事情正在变得更好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:14:00.677

你有什么杀毒软件吗？如果是这样，请确保 mysql 目录及其临时文件夹从 AV 中排除，然后重试。

# php - 什么可以使 $_POST 变量无效？

> ID：14315620
> 
> 赞同：1
> 
> 时间：2013-01-14T09:09:53.903
> 
> 标签：php, apache, post, curl, multipartform-data

我正在使用 http post 请求将文件从一台主机传输到另一台主机。接收主机运行带有 php 的 apache。该请求包含 multipart/form-data 并由 php 脚本 (cURL) 执行。有 86 个文件，总大小约为 20Mb。问题是接收 php 脚本的 $_POST 数组为空。我重新配置了发送脚本，因此它在循环中发送相同的请求，但在每次迭代时从数据收集中删除一个文件。当 36 个文件（总大小 ~12Mb）被删除时，接收脚本接受数据，$_POST 变量被很好地填充。有什么问题？我已经查看了所有负责任的 php.ini 参数，因此它们包含合理的值。

```
 ini_set("post_max_size","510M"); 
  ini_set("memory_limit","400M"); 
  ini_set("upload_max_filesize","510M"); 
  ini_set("max_file_uploads","500"); 
```

有没有办法调查原因？我的意思是，error_log 不包含任何有用的东西。也许还有其他来源可以看到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:33:55.673

`post_max_size`不能在运行时基于每个目录设置该值。即使您`phpinfo()`将反映更改，但在处理表单时它将被忽略，因此将恢复为默认值 8MB。

文件的总大小为 20MB 的事实证明了这一点，但是当您删除约 12MB 的文件时，脚本可以正常工作。

```
20 - 12 = 8MB // Therefore the script works 
```

唯一的解决方案是在 中设置值`php.ini`，或者当您使用 Apache 时，您可以在`http.conf`或`.htaccess`文件中设置值。

不久前我也遇到过这个问题，尽管它是在运行 IIS 的 Windows 上。但是，问题仍然相同。有关该问题的更多信息，请参阅此[线程](https://stackoverflow.com/questions/13007906/php-upload-500-internal-server-error)。

> 事实证明，在 Windows 上，您只能为每个目录设置标记为 PHP_INI_USER 的 ini 指令。不幸的是，upload_max_filesize 和 post_max_size 都是 PHP_INI_PERDIR。[来自http://php.net/manual/en/configuration.changes.php](http://php.net/manual/en/configuration.changes.php)的 PHP 文档
> 
> 该目录的设置对于从此目录或其任何子目录运行的任何脚本都是活动的。键下的值应具有 PHP 配置指令的名称和字符串值。值中的 PHP 常量不会被解析。但是，只有 PHP_INI_USER 中可更改的配置值可以这样设置，PHP_INI_PERDIR 值不能。
> 
> 因此，即使 Plesk 具有更改这些指令的接口，并且即使 phpinfo() 接受了它们，它们也不会更改实际的最大上传大小。Plesk 不应允许您在 Windows 上更改这些，并且 phpinfo() 不应报告更改，但您能做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:15:41.540

检查您是否安装了[Suhosin](http://www.hardened-php.net/suhosin/)扩展。它有几个设置可以限制您可以通过 POST、GET 和 REQUEST 接收的数据量。`suhosin.upload.max_uploads`此外，它可以通过默认设置为 20来限制上传的文件数量。

当设置采取行动时，POST 数组通常会被截断。

此外，如果您要上传文件，请检查`$_FILES`数组，而不是`$_POST`.

# data-structures - 树是有向图还是无向图？

> ID：14315621
> 
> 赞同：19
> 
> 时间：2013-01-14T09:10:09.667
> 
> 标签：data-structures, graph, tree, directed-graph

我读过树是图的特例。图可以是有向的或无向的。但是，如果我们将树视为一种数据结构，它是有向图还是无向图？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-14T09:21:50.850

除非另有限定，否则数学或图论中​​的树通常被假定为无向的，但在计算机科学或编程或数据结构中，通常假定树是有向的和有根的。

您需要了解讨论的上下文。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T09:13:53.553

参见[维基百科上的树](http://en.wikipedia.org/wiki/Tree_%28graph_theory%29)：

> 树是无向图。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-14T09:13:57.457

两者都可以接受。在某些情况下，您可能希望能够从一片叶子上升然后再下降（通常在另一个分支中），或者您可能只希望能够下降。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-06-11T07:19:02.287

树是连接的无环图。这意味着您应该能够从任何节点*u*遍历到任何节点*v*。如果我们说树是有向的，那么可能不可能从每个节点*u*遍历到每个节点*v*。

在有[*根树*](https://proofwiki.org/wiki/Definition:Rooted_Tree)的上下文中，方向只是告诉树的哪个节点被视为根（起点）或显示节点之间的父子关系，这就是它所说的......这个方向并不限制图形或连接的连通性在树的任何节点 u 到节点 v 之间。^([1])

* * *

^([1])如果我们将根中的方向视为可以在树中遍历以从节点 u 到节点 v 的实际路径，那么连接将被破坏，并且该图将不再是树。

# c# - 对象映射时出现 NullReferenceException

> ID：14315623
> 
> 赞同：-2
> 
> 时间：2013-01-14T09:10:19.047
> 
> 标签：c#, object, mapping, nullreferenceexception, xserver

我正在尝试映射一个对象（它以前曾工作过！）但是，在这个新应用程序中，它似乎抛出了一个`NullReferenceException`我似乎不明白的问题。这是代码，有人可以解决这个问题并解释这是怎么发生的吗？

```
 private xRoute.Point ConvertXLocate2XRoute(xLocate.Point point)
    {
        xRoute.Point converted = new xRoute.Point();
        //KML
        converted.kml.kml = point.kml.kml;
        converted.kml.wrappedPlacemarks = point.kml.wrappedPlacemarks;

        //POINT
        converted.point.x = point.point.x;
        converted.point.y = point.point.y;

        //WKB
        converted.wkb = point.wkb;

        //WKT
        converted.wkt = point.wkt;

        return converted;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:13:25.710

假设`point.kml`and`point.point`不为空：

如果 的构造函数`xRoute.Point`没有实例化其嵌套对象属性，则必须自己进行：

```
converted.kml = new ...();
...
converted.point = new ...(); 
```

* * *

我还建议为此类映射器提供更简洁的代码：

```
 private xRoute.Point ConvertXLocate2XRoute(xLocate.Point point)
    {
        return new xRoute.Point
        {
            kml = new Kml   // Replace by the actual name of this type
            {
                kml = point.kml.kml,
                wrappedPlacemarks = point.kml.wrappedPlacemarks
            },
            point = new Point // Replace by the actual name of this type
            {
                x = point.point.x,
                y = point.point.y,
            },
            wkb = point.wkb,
            wkt = point.wkt
        };
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:14:39.417

您的代码没有任何空引用检查，它可能是**点**本身为空，或者**point.kml**为空，甚至在其他地方，您应该尝试调试在视觉上**抛出异常时打开中断**函数studio（CTRL+ALT+E，这里是 VS2005 的文档参考：[Exceptions Dialog Box](http://msdn.microsoft.com/en-us/library/aa290821%28VS.71%29.aspx)），以轻松找到它究竟是哪一行抛出异常，然后修复它。

# apache - enchant_broker_init() 性能问题

> ID：14315630
> 
> 赞同：0
> 
> 时间：2013-01-14T09:11:09.290
> 
> 标签：apache, google-chrome-extension, aspell, pspell

我有一个使用 enchant_broker_init() 的网站。我不知道为什么，但 enchant_broker_init() 需要大约 19 秒来加载页面。一旦我删除此功能页面立即加载。

有人知道这是为什么吗？或者我该如何调试它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:01:57.710

安装php附魔插件的步骤。

APACHE [http://apache.mivzakim.net//httpd/binaries/win32/#warnings](http://apache.mivzakim.net//httpd/binaries/win32/#warnings)

PHP [http://windows.php.net/download/](http://windows.php.net/download/)

在 APACHE 上启用 PHP [http://php.net/manual/en/install.windows.apache2.php](http://php.net/manual/en/install.windows.apache2.php)

Enchant 无法使用 WAMP。（至少因为它没有......）。

然后添加以下路径

分享\myspell\dicts

到您的 PHP 目录。

应该是这样的。

C:\PHP\share\myspell\dicts

把字典文件放在那里。.aff .dic

# android - Android检查EditText中的空格

> ID：14315633
> 
> 赞同：5
> 
> 时间：2013-01-14T09:11:38.963
> 
> 标签：android, android-edittext

我有一个关于在 Android 中编辑文本的问题。

我有一个名为 Username 的字段：

我希望每当有人用空格写用户名时，例如“Gaurav Arora”。然后它应该在登录按钮按下时引发祝酒或错误。

我是这样做的——我只是在文本观察器的帮助下停止了空格键的效果——

```
public static TextWatcher getNameTextWatcher(final TextView agrTextView) {
        TextWatcher mTextWatcherName = new TextWatcher() {
            public void onTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
            }

            public void beforeTextChanged(CharSequence arg0, int arg1,
                    int arg2, int arg3) {
            }

            public void afterTextChanged(Editable arg0) {

                String result = agrTextView.getText().toString().replaceAll(" ", "");
                if (!agrTextView.getText().toString().equals(result)) {
                    agrTextView.setText(result);
                }

}
} 
```

但这并没有解决我的目的。我只想实现，每当该人使用带有空格的用户名时，它应该接受空格，但是在按下登录按钮时，它应该举杯

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-14T09:27:34.913

只需检查您的编辑文本是否包含空格。

`onClick()`在 Button 事件中使用以下代码。

```
 if (agrTextView.getText().toString().contains(" ")) {
     agrTextView.setError("No Spaces Allowed");
     Toast.makeText(MyActivity.this, "No Spaces Allowed", 5000).show();
 } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-14T09:13:09.523

试试这个..

```
 btnLogin.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String result = agrTextView.getText().toString();
             if(result.contains ("\\s"))
               Toast.makeText(getApplicationContext(), "Space ", Toast.LENGTH_LONG).show();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-26T12:48:03.313

只需这样做：

```
TextView.getText().toString().contains(" "); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-08T07:26:40.423

```
 String question = txtNote.getText().toString();
 if(question.trim().length() > 0){
    Log.i("LOG", "Has value");
 }else{
    Log.i("LOG", "don't has value");
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-17T20:47:14.740

使用**trim()**方法删除所有空格，然后**检查是否为空**

```
if ( !edtText.getText().toString().trim().isEmpty()) {
  //the EditText is not Empty
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-28T09:40:19.320

您也可以阻止在用户名中输入空格键，或者可以在输入用户名中的空格时给予吐司或零食。

可以参考此链接可能对您有帮助 [阻止在 edittext 中输入空格](https://stackoverflow.com/a/54397295/5886712)。

让我知道是否有任何问题。

# bash - sed 在行尾添加一个单词 \n

> ID：14315634
> 
> 赞同：0
> 
> 时间：2013-01-14T09:11:47.800
> 
> 标签：bash, sed, newline

我有一个结构如下的文件：

```
word1 word2 word3
word4 word5 word6 
```

我使用命令

```
sed -i '1s/$/word7/' file 
```

在第一行末尾添加单词“word7”

问题是这个词没有添加到第一行的末尾，它是这样添加的：

```
word1 word2 word3
word7
word4 word5 word6 
```

但是当我运行'wc -l file'命令时，我的文件的行数没有改变（它仍然是2）！

我在想这可能是文件创建方式的问题，它是由具有这种语法的 C 程序创建的：

```
fprintf(file, "word1 word2 word3 \n"); 
```

我无法重新运行我的 C 程序，所以我应该运行什么 bash 命令来获得：

```
word1 word2 word3 word7
word4 word5 word6 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:54:07.843

问题是输入文件中的行尾约定和 sed 期望的不同。您的输入文件使用 DOS 行尾约定，其中行尾标有 2 字节序列`0x0d 0x0a`。相反， sed 需要 UNIX 1 字节约定`0x0a`。过去`0x0d`实际上是“回车”的意思，`0x0a`意思是“下一行”。

所以当你运行时`sed`，它只替换一个字节`0x0a`，留下不可打印的回车`0x0d`。

我建议通过执行删除所有回车字节

```
tr -d '\r' < file_DOS > file_UNIX 
```

然后像以前一样继续。请注意，如果您的文字包含不可打印的字符，这可能会弄乱您的数据。

# android - 不同设备上的应用外观变化

> ID：14315636
> 
> 赞同：0
> 
> 时间：2013-01-14T09:11:53.310
> 
> 标签：android, android-xml

我创建了一个应用程序，当我将它提供给使用不同设备的不同朋友时，他们开始遇到错误。例如，其中之一是在我的设备（三星 Galaxy S2）中它看起来像这样：

![在此处输入图像描述](../Images/934e3e756e94b4ba1e636448ebc1479a.png)

在另一部手机（在本例中为三星 Galaxy S3）中，如下所示：

![在此处输入图像描述](../Images/755f210554c750674da08c9749cbdc10.png)

这是我使用的 xml 代码：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@android:color/black"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="50dp" 
            android:orientation="horizontal">

            <ImageView
                android:id="@+id/imageView1"
                android:layout_width="70dp"
                android:layout_height="match_parent"
                android:paddingTop="4dp"
                android:paddingBottom="4dp"
                android:paddingLeft="10dp"
                android:paddingRight="10dp"
                android:src="@drawable/logo_nuevo_ver2" >
    </ImageView>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:background="@drawable/rect_rojo">

                <ImageView
                    android:id="@+id/imageView2"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:src="@drawable/shopping_cart"
                    android:paddingLeft="25dp"
                    android:paddingRight="10dp" />

                <TextView
                    android:id="@+id/txtShopingCart"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:text="My shopping cart"
                    android:paddingLeft="20dp"
                    android:paddingRight="15dp"
                    android:paddingTop="15dp"
                    android:textColor="@android:color/white" >
                    </TextView>

                 <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:layout_margin="10dp"
                android:background="@drawable/recuadro_blanco">

                    <TextView
                    android:id="@+id/txtShopingCart"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:text="0"
                    android:paddingLeft="13dp"
                    android:gravity="center"
                    android:textColor="@android:color/white" >
                    </TextView>
            </LinearLayout>

            </LinearLayout>

        </LinearLayout>

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/linea_gris"
            android:scaleType="fitXY"></ImageView>

        <LinearLayout
            android:id="@+id/llPhoto"
            android:layout_width="match_parent"
            android:layout_height="340dp"
            android:layout_margin="15dp"
            android:background="@android:color/white"
            android:orientation="vertical">

            <ImageView
                android:id="@+id/camara"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="20dp"
                android:layout_marginTop="100dp"
                android:src="@drawable/camara" />

             <TextView
                 android:id="@+id/txtShopingCart"
                 android:layout_width="match_parent"
                 android:layout_height="match_parent"
                 android:layout_marginLeft="40dp"
                 android:text="Click in the image to take a photo" >

                    </TextView>

        </LinearLayout>

        <ImageView
            android:id="@+id/imageLinea"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/linea_gris"
            android:scaleType="fitXY"></ImageView>

         <LinearLayout
             android:id="@+id/llTab"
             android:layout_width="match_parent"
             android:layout_height="match_parent"
             android:weightSum="90">

             <LinearLayout
                 android:id="@+id/llTab1"
                 android:layout_width="wrap_content"
                 android:layout_height="match_parent"
                 android:orientation="vertical" >

             <ImageView
                 android:id="@+id/imageMonkey"
                 android:paddingTop="5dp"
                 android:layout_width="match_parent"
                 android:layout_height="40dp"
                 android:src="@drawable/do_the_monkey" >
            </ImageView>

             <TextView
                 android:id="@+id/txtMonkey"
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
                 android:text="  Do the Monkey  " >

    </TextView>
    </LinearLayout>
            <ImageView
                         android:id="@+id/imageLineaVertical"
                         android:layout_width="2dp"
                         android:layout_height="match_parent"
                         android:src="@drawable/linea_gris_vertical" >
            </ImageView>

           <LinearLayout
               android:id="@+id/llTab2"
               android:layout_width="wrap_content"
               android:layout_height="match_parent"
               android:layout_weight="39.79"
               android:orientation="vertical" >

             <ImageView
                 android:id="@+id/imageCart"
                 android:layout_width="match_parent"
                 android:paddingTop="5dp"
                 android:layout_height="40dp"
                 android:src="@drawable/add_to_cart" >
    </ImageView>

             <TextView
                 android:id="@+id/txtCart"
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
                 android:text="    Add to cart" >

    </TextView>
    </LinearLayout>

           <ImageView
                         android:id="@+id/imageLineaVertical"
                         android:layout_width="2dp"
                         android:layout_height="match_parent"
                         android:src="@drawable/linea_gris_vertical" >
            </ImageView>

    <LinearLayout
        android:id="@+id/llTab3"
        android:paddingLeft="15dp"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="40.42"
        android:orientation="vertical" >

             <ImageView
                 android:id="@+id/imageShare"
                 android:layout_width="match_parent"
                 android:paddingTop="5dp"
                 android:layout_height="40dp"
                 android:src="@drawable/share" >
    </ImageView>

             <TextView
                 android:id="@+id/txtShare"
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
                 android:text="    Share" >

    </TextView>
    </LinearLayout>
         </LinearLayout>

    </LinearLayout> 
```

我怎样才能使它在所有设备中看起来都一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:16:44.127

我会将您的 3 个底部按钮粘贴到屏幕底部，然后让该空白区域向下扩展以占用其余空间。在设计android界面时尽量不要处理绝对。

我会看看这个，它肯定会有所帮助：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:16:46.100

一个步骤是删除绝对高度定义`llPhoto`，取而代之的是依赖相对自动定位。如果您需要让一个项目具有特定高度，请将其嵌入到另一个布局中，该布局会自动居中或提供滚动（如果设备没有提供足够的空间来显示该项目）。

# facebook-graph-api - Facebook Graph API 获取活动提要

> ID：14315638
> 
> 赞同：0
> 
> 时间：2013-01-14T09:12:00.210
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, facebook-fql

我正在尝试在应用程序中实现相同的功能**（您朋友的活动）**

![在此处输入图像描述](../Images/c2c42543283eda72b5a2487d9e550fd7.png)

我可以使用 javascript SDK 通过 Facebook Grap API 获取我所有朋友的列表和他的个人资料图片。

```
FB.api('me/friends?fields=name,picture.width(80).height(80)', function(response){
            ......... 
      }) 
```

但我只想获取那些与**应用 ID**相关联的朋友的列表，换句话说，那些通过 facebook 加入我的网站的朋友。
还有什么方法可以根据**用户 ID**和**应用 ID**获取特定用户的**活动提要**？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:28:31.740

> 但我只想获取那些与应用 ID 相关联的朋友的列表，换句话说，那些通过 facebook 加入我的网站的朋友。

[Facebook开图，过滤好友列表数组](http://facebook.stackoverflow.com/questions/11810426/facebook-open-graph-filtering-friends-list-array/11810543#11810543)

> 还有什么方法可以根据用户 ID 和应用 ID 获取特定用户的活动提要？

您可以仅使用您的应用访问令牌读取所有公开的内容。要获得可见性有限的东西（仅限朋友 fe），您应该使用当前用户的访问令牌。****

# java - 在环境变量中设置 Borland C++ 5.5 和 JDK 1.5.0 的路径

> ID：14315640
> 
> 赞同：1
> 
> 时间：2013-01-14T09:12:12.043
> 
> 标签：java, windows, compiler-construction, path

我为 Borland C++ 5.5 更改了我的环境变量并在那里运行程序现在我想运行 java 程序在环境变量中设置路径，现在 java 程序开始在那里运行，我再次尝试运行 C 程序，它显示未指定路径文件无法直到我在 Borland C++ 的环境变量中再次重置时才找到。请让我知道如何将它们设置为一起工作，而无需一次又一次地更改它们。

在 Windows 7 64 位上。编辑部分：-

C:\Program Files (x86)\Java\jdk1.5.0\bin; 对于变量路径和变量名称是“路径”。对于 Borland C++ 是 C:\Borland\BCC55\Bin 并且变量路径是“路径”......我看到当我为其他人更改时，它会被替换并且之前设置的路径被删除。

# arduino - ADK 2011 和 Arduino 盾牌

> ID：14315644
> 
> 赞同：1
> 
> 时间：2013-01-14T09:12:32.260
> 
> 标签：arduino

我一直在研究[ADK](http://developer.android.com/tools/adk/index.html)和[ADK 板](http://developer.android.com/tools/adk/adk.html)（[Arduino Mega2560](http://arduino.cc/en/Main/ArduinoBoardMega2560)）。我可以通过 USB 进行通信并与我的开发板通信，反之亦然。[现在我想通过Wi-Fi](http://en.wikipedia.org/wiki/Wi-Fi)尝试同样的事情。我看到有许多可用的 Wi-Fi 防护罩。我的问题是：

1.  我怎么知道我在网上看到的防护罩可以与[ADK 2011 板](http://developer.android.com/tools/adk/adk.html)一起使用？
2.  如何将屏蔽连接到我的电路板？
3.  我是否需要分别对我的 ADK 板和 Wi-Fi 扩展板进行闪存/编程？
4.  我不赞成某个特定的 ADK 板。[关于另一个 Arduino 板的任何建议，我可以使用它通过 USB、Wi-Fi、蓝牙](http://en.wikipedia.org/wiki/Bluetooth)、Ble 等与我的 Android 手机通话，带或不带屏蔽。

# xcode - 如何在 Xcode 构建阶段运行 Grunt 任务？

> ID：14315648
> 
> 赞同：4
> 
> 时间：2013-01-14T09:12:42.003
> 
> 标签：xcode, cordova, build, gruntjs

我正在开发一个 Web 应用程序，其中包括 GruntJS 构建任务。我在 Xcode IDE 中使用 Phonegap/Cordova 部署它。

我想将 grunt 构建过程集成到我的 Xcode 项目中以简化项目的运行。理想情况下，Xcode 应该预先运行我使用 Grunt CLI 手动调用的所有进程。

我的 Gruntfile.js 位于根 Xcode 项目目录中。我在 node_modules 中有一个本地 grunt 安装（0.4.0rc4），并且全局安装了 grunt-cli。

```
project
- multiple project dirs ...
- node_modules
- www-src
- www
  project.xcodeproj
  Gruntfile.js 
```

我尝试使用像“grunt”这样简单的命令向我的 Xcode 项目添加自定义运行脚本 - 构建阶段，该命令在构建过程中返回“grunt：找不到命令”。显然需要更多的努力来引用 grunt 和/或正确的目标目录。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T04:19:54.530

很好的设置 Gregor :-) 我之前的项目有完全相同的设置。以下是我在 Xcode Build Phases 中设置自定义脚本的方法：

```
cd "${PROJECT_DIR}"
PATH=${PATH}:/usr/local/bin
grunt 
```

希望这可以帮助你:-)

# java - 如何使用带有内联 XSD 的 jaxb2 maven 插件？

> ID：14315651
> 
> 赞同：2
> 
> 时间：2013-01-14T09:12:56.980
> 
> 标签：java, maven-plugin, spring-ws, jaxb2

我正在尝试使用 maven jaxb2 插件生成编组和解组对象。但我没有 .wsdl 的 .xsd 文件。架构定义是内联的。请让我知道如何进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:41:42.173

使用`wsdl`插件配置中的参数：[jaxb2-maven-plugin](http://mojohaus.org/jaxb2-maven-plugin/xjc-mojo.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:22:07.030

这是处理 WSDL 文件的 Maven 插件：

[http://jax-ws-commons.java.net/jaxws-maven-plugin/](http://jax-ws-commons.java.net/jaxws-maven-plugin/)

# hyperlink - 每次出现在站点上的任何位置时，如何自动将单词链接到外部站点？

> ID：14315652
> 
> 赞同：0
> 
> 时间：2013-01-14T09:13:04.317
> 
> 标签：hyperlink, automation, wordpress

对于我的生活，我不知道这个术语是什么。而且我的搜索引擎搜索是毫无希望的。我知道我不是唯一一个想知道这一点的人。我只是不知道如何问它或使用什么关键字自己解决这个问题。所以我在这里尽我所能向你解释它，希望有人现在可以照亮我的黑暗。好了就到这里...

**网站第1页内容：**

Georgio 在路过 Nichols 的情况后去了商店。

**网站第2页内容：**

猫害怕乔治和他的狗。

**网站第3页内容：**

我最好的朋友不是尼科尔斯的朋友，尼科尔斯是乔治奥最好的朋友，而是乔治奥的朋友。

**我需要做的：**

在每一页（1、2、3）上，每次出现在每一页上时，我都希望“Georgio”链接到同一个外部网站（如[http://geethr33whiskers.net](http://geethr33whiskers.net) <---我只是编造的)，但无需我手动链接每个“Georgio”。我希望能够链接一次“Georgio”，然后自动将其他实例链接到同一个外部网站。

在每一页 (1, 3) 上以及每次出现在每一页上时，我都希望将“Nichols”链接到同一个外部网站（例如[http://www.nichols2zzz4wedding.com](http://www.nichols2zzz4wedding.com) <---我只是编造的)，但无需我手动链接每个“Nichols”。我希望能够链接一次“Nichols”，然后自动将其他实例链接到同一个外部网站。

我希望这是有道理的。如果你知道我在说什么，我该如何设置？我在 Netfirms 上托管了该网站（因此它不是 wordpress.org 网站），并在其上设置了 WP 博客平台。还是有一个 WP 插件可以帮助我做到这一点？

另外，这种过程叫什么？哦，我有很多词需要这种自动链接或任何你称之为的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:42:28.627

您应该使用[`the_content`](http://codex.wordpress.org/Plugin_API/Filter_Reference/the_content)来过滤显示的文本。

```
add_filter( 'the_content', 'function_to_replace_text' );

function function_to_replace_text($content){
//add PHP code to replace your word by link in $content

return $content
} 
```

# jquery - 带有鼠标检测的水平 jquery 滚动也可以在 div 中滚动溢出

> ID：14315657
> 
> 赞同：3
> 
> 时间：2013-01-14T09:13:30.060
> 
> 标签：jquery, scroll, scrollbar

所以这对我来说是这个项目的一个麻烦点。我想做的是创建一个水平滚动网站，也支持鼠标滚轮，用滚轮在 X 上滚动。

我也有网站的某些区域或内容 div，它们具有垂直滚动的宽度和高度（溢出-y：滚动）。当您的鼠标悬停在可以滚动内容的垂直滚动框上时，这将是理想的选择。

我使用 Tiny Scrollbar [http://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)做了一个快速演示，并发布了我在这里尝试做的事情：

[http://leighmcd.com/slider/demo/](http://leighmcd.com/slider/demo/)

基本上，当用户将鼠标悬停在橙色上时，我希望橙色内容框具有垂直滚动。

我的 JS 知识有限，无法破解现有的插件，因此任何建议都将不胜感激。

该站点是为 IE8+ 用户构建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:56:47.240

因为我觉得这个话题很有趣，所以我尝试了一下。我认为最简单的方法是不使用插件。这是使页面水平滚动的结果代码：

```
// set a block variable if we are over another element that scrolls
// if ie would support e.target for scrolling this wouldn't be needed
var blockScroll = false;
$(".scroller").on("mouseenter mouseleave", function (e) {
  blockScroll = e.type === "mouseenter";
})

function scrollFunc (e) {
  // stop if the target is a .scroller and also
  // if there is an indication that a vertical scroll was done
  if (blockScroll || ("wheelDeltaX" in e && e.wheelDeltaX != 0) || e.shiftKey) return;
  // prevent default scrolling (no jumps)
  e.preventDefault();
  // get ammount of scrolling
  var scroll = "wheelDelta" in e ? -e.wheelDelta : (e.detail * 2);
  // use scroll y for scroll x
  window.scrollBy( scroll, 0 );
}

// try attaching the method like the borwser needs it
// this event isn't covered by jquery so I had to do it manually
if (document.addEventListener) { // W3C sort of
  document.addEventListener( "DOMMouseScroll", scrollFunc, false );
  document.addEventListener( "mousewheel", scrollFunc, false );
} else if (document.attachEvent) { // IE way
  document.attachEvent("onmousewheel", scrollFunc);
} else {
  document.onmousewheel = scrollFunc;
} 
```

注意：每个自己滚动的元素都必须具有`scroller`带有此代码的类。如果需要，您可以尝试`overflow`使用 jquery 获取值，`css`但我不建议这样做。

[这是我的结果](http://jsfiddle.net/2ntAP/13/)！但我不得不说我没有移动设备来测试它。此解决方案仅适用于鼠标滚轮。

如果您有另一个应该水平滚动的元素，请将`document`我的示例中的 替换为您的元素节点`window.scrollBy`和`element.scrollLeft += -scroll`.

我还可能不得不补充一点，滚动永远不会像直接完成那样平滑。

编辑：我有另一个想法如何实现。您可以使页面垂直滚动并在其中放置一个 100% 大小和固定位置的 div。然后使用 onscroll 事件将内部 div 的水平滚动与 body 的垂直滚动同步。我不知道这会有多好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:39:28.647

您可以使用带有 Jquery 的悬停函数和一些 Css 调整来实现这一点，

***HTML***

```
<div id="test">
  Your text goes here...
</div> 
```

***CSS***

```
#test
{
  background-color:orange;
  overflow:hidden;
  width:200px;
  height:200px;
} 
```

***jQuery***

```
$(document).ready(

    function()
    {
    //Note: overflow:auto will bring the V-scroll bar 
    //at the same time overflow:hidden will hide that.
    $("#test").hover(function(){ $(this).css({"overflow":"auto"}); },
    function(){ $(this).css({"overflow":"hidden"}); });
  }

  ); 
```

[现场演示](http://jsfiddle.net/BtTzV/1/)

如果您需要任何进一步的说明，请访问[此](http://api.jquery.com/hover/)。

# c++ - 是否有可用于在某处重用的指针删除函数（对象）模板（boost，STL）？

> ID：14315660
> 
> 赞同：1
> 
> 时间：2013-01-14T09:13:52.230
> 
> 标签：c++, pointers, stl, containers

如果我有一个将对象指针作为元素的 STL 容器，我将需要删除具有此类容器的类的析构函数中的指针。由于删除指针的操作

```
delete ptr_; 
ptr_ = 0; 
```

可能经常使用，我想知道是否有一个函数（或函数对象）模板可以做到这一点，在 boost 或 STL 中定义，或者在某个地方的标准定义为以下示例中定义的函数对象 DeletePointer：

```
#include <list>
#include <algorithm>

template<class Pointer>
class DeletePointer
{
    public: 
        void operator()(Pointer t)
        {
            delete t; 
            t = 0;
        }
};

using namespace std;

int main()
{
    list<double*> doublePtrList;

    doublePtrList.push_back(new double (0));
    doublePtrList.push_back(new double (1));
    doublePtrList.push_back(new double (2));
    doublePtrList.push_back(new double (3));

    for_each(doublePtrList.begin(), doublePtrList.end(), DeletePointer<double*>());
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:19:49.620

如果（出于某种原因）您不能在集合中存储智能指针而不是原始指针，请考虑改用 Boost[指针容器](http://www.boost.org/doc/libs/1_52_0/libs/ptr_container/doc/ptr_container.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:19:04.287

正如其他人所建议的那样，尽可能使用智能指针而不是原始指针是个好主意。

但是，为了直接回答您的问题，在(C++11 中) 中`std::default_delete`定义了。`<memory>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:19:52.897

只需使用 std 的共享指针：

```
include <memory>

using namespace std;

int main()
{
    list<shared_ptr<double>> doublePtrList;

    doublePtrList.push_back(make_shared<double>(0.0));
    doublePtrList.push_back(make_shared<double>(1.0));
    doublePtrList.push_back(make_shared<double>(2.0));
    doublePtrList.push_back(make_shared<double>(3.0));

    //for_each(doublePtrList.begin(), doublePtrList.end(), DeletePointer<double*>());

    //For clearing just clear the list
    doublePtrList.clear();
}; 
```

共享指针在没有人引用它时自动释放删除内存（或者当最后一个引用停止引用它时更正确）

# sql-server - 如何将整个数据库复制到同一服务器上的另一个数据库？

> ID：14315662
> 
> 赞同：0
> 
> 时间：2013-01-14T09:13:56.433
> 
> 标签：sql-server, database

我想将数据库 A 完全复制到数据库 B（相同的 SQL Server）中 - 最简单的 SQL 或实用程序命令是什么？（数据库B应该在复制前100%擦除）

请注意，它可以是非 SQL 的东西，但无论如何我都需要一键运行它。因此，只要我可以通过单击或从命令行运行复制，一些执行此操作的实用程序也是可以接受的。

SQL Server 2008R2 或 2012。

最好的，阿斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:22:21.993

我根据大卫的想法做了一个灵魂提要。它看起来像这样（**产品**- 源数据库，**演示**- 目标副本）

```
 DECLARE @backup varchar(300) = 'e:\Prod.bak'; 
 DECLARE @logic_db_file varchar(300) = 'koe'; 
 DECLARE @logic_log_file varchar(300) = 'koe_log'; 
 DECLARE @out_db_file varchar(300) = 'c:\Program Files\Microsoft SQL Server\MSSQL11.SQLEXPRESS\MSSQL\DATA\Demo.mdf'; 
 DECLARE @out_log_file varchar(300) = 'c:\Program Files\Microsoft SQL Server\MSSQL11.SQLEXPRESS\MSSQL\DATA\Demo_log.ldf'; 

 PRINT N'Backing up Production database.'
 BACKUP DATABASE Prod
    TO DISK = @backup WITH FORMAT;

 PRINT N'Restoring FILELISTONLY, see log file for data.'
 -- Restore the files to Demo
 RESTORE FILELISTONLY
    FROM DISK = @backup

 PRINT N'Getting exclusive access to Demo'  
 Alter database  Demo set single_user with rollback immediate
 drop database Demo

 PRINT N'Restoring backup to Test database'
 RESTORE DATABASE Demo
  FROM DISK = @backup
  WITH REPLACE,
  MOVE @logic_db_file TO @out_db_file, 
  MOVE @logic_log_file TO @out_log_file
 GO

  -- if you want you can do some SQL fixes to newly made DB

  PRINT N'Changing normal users to demo users, if account type is OK'

  USE Demo; 
  UPDATE USER_ACCOUNTS SET ACCOUNT_TYPE=3 WHERE (STATUS=1) AND (ACCOUNT_TYPE=1);  
  GO 
```

# c# - 无法将 EF 实体集添加到字典

> ID：14315667
> 
> 赞同：0
> 
> 时间：2013-01-14T09:14:07.113
> 
> 标签：c#, entity-framework, inheritance

我正在尝试将 EF 实体集添加到字典中，如以下代码所示：

```
private static readonly Dictionary<string, ObjectSet<EntityObject>> Gateways 
    = new Dictionary<string, ObjectSet<EntityObject>>
{
    {"PlanSection", ModelEntities.PlanSection}
}; 
```

但编译器说：

```
cannot convert from 'System.Data.Objects.ObjectSet<MathApplication.Models.PlanSection>' to 'System.Data.Objects.ObjectSet<System.Data.Objects.DataClasses.EntityObject>' 
```

`PlanSection`是从数据库表映射的类。我的代码有什么问题？

**编辑** 这是`PlanSection`定义：

```
public partial class PlanSection : EntityObject 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:16:35.193

你有两个不同的对象

```
MathApplication.Models.PlanSection 
```

和

```
System.Data.Objects.DataClasses.EntityObject 
```

检查您的代码并在两侧使用正确的单个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:20:30.667

你真的需要字典来包含一个 ObjectSet 还是足够有实体列表。

如果实体列表足够，那么为什么不将成员设置为 IEnumerable 然后添加为值 ModelEntities.PlanSection.LoadAll() 或其他东西。

如果您的意图是将所有对象集统一在该字典中，请尝试创建一个将由您的所有实体实现的接口，然后将字典的值类型设置为类似 IEnumerable。

或者，另一种方法是尝试创建一个具有动态类型作为值的字典，然后我认为编译器会让你一个人呆着，但是在使用字典中的值时你会遇到其他问题，因为你必须使它们能够在设计时访问属性。

# python - 强制字符集转换

> ID：14315668
> 
> 赞同：0
> 
> 时间：2013-01-14T09:14:21.840
> 
> 标签：python, character-encoding, sqlalchemy

我有一个将数据写入 Microsoft SQL Server 的应用程序。数据库的字符集为CP1252，待保存的传入数据为UTF-8。数据中可能包含无法转换为 CP1252 的字符，插入时会抛出异常。

数据库的人说我应该强行将数据压缩到CP1252，如下所示：

```
some_value = some_value.encode('CP1252', 'replace') 
```

但是 SQLAlchemy 会自动进行转换，我看不到强制转换的方法。

```
engine = sqlalchemy.create_engine('mssql+pyodbc://...'
    encoding='CP1252',
    convert_unicode=True,
    ) 
```

保存数据至关重要，即使缺少一些字符。我该如何实施？请注意，在这种情况下，我使用了很多数据库反射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:03:01.833

我看不出有什么问题。

```
some_value = some_value.encode('CP1252', 'replace').decode('CP1252') 
```

如果`some_value`实际上不是 unicode 字符串，而是原始 UTF-8 数据：

```
some_value = some_value.decode("utf-8").encode('cp1252', 'replace').decode('cp1252') 
```

# node.js - 在 nodejs 中接受输入

> ID：14315669
> 
> 赞同：0
> 
> 时间：2013-01-14T09:14:28.683
> 
> 标签：node.js

我从 nodeJS 开始。这是我的代码

```
function ask(callback) {
    var stdin = process.stdin, stdout = process.stdout;
    stdin.resume();
    stdin.once('data', function(data) {
        data = data.toString().trim();
        callback(data);
    });
}

ask(function(testcase) {
    ask(function(workers) {
        ask(function(salary) {
            console.log(salary);
        });
    });

}); 
```

我想做的是基于第一个输入，即测试用例。我想围绕两个 ask(function(workers)) 和 ask(function(salary)) 运行 for 循环

```
eg input
2  -- two testcases
2 - num of workers
1 2 - salary / first testcase over
3 -  num of workers
1 2 3 - salary / second - testcase over 
```

现在开始处理输入。我知道 nodeJS 是 aysnchronus，因此即使我在第一个 ask(function(testcase)) 之后放置了一个 for 循环。这没用。

谁能指导我如何以同步方式接受输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:44:30.250

我会这样做：

```
function test(testcase) {
    ask(function(workers) {
      ask(function(salary) {
        console.log(salary);

        // Do whatever you want with the data

        // Then:
        ask(test);
      });
    });
}

ask(test); 
```

标准输入没有同步 IO API。但是，您可以将整个输入读入一个字符串（直到出现 EOF），然后以同步方式处理该字符串。

# css - 用于不同浏览器 chrome 和 firefox 的条件内联 CSS

> ID：14315670
> 
> 赞同：1
> 
> 时间：2013-01-14T09:14:29.903
> 
> 标签：css

我写了一个用于 div 定位的 CSS。这是CSS

```
background-color: white; 
border-style: outset; 
margin: 115px 0px 0px -40px; 
```

当我在 firefox 中看到输出时，div 位置还可以，但是当我在 chrome 中看到它时，输出会因以下原因而失真`margin: 145px 0px 0px -40px;`

铬边距应该是`margin: 115px 0px 0px -40px;`

所以我搜索谷歌并找到了一个片段，我申请但没有工作。这是

```
style="width:310;height:402;background-color:white;border-style:outset; if webkit (margin:115px 0 0 -40px) else  (margin:146px 0 0 -40px);" 
```

所以指导我如何为 chrome 编写条件内联 css ......任何想法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:36:27.777

我写了一个测试页，没有找到你说的这种情况。也许你写了一个测试页。严格来说，firefox chrome是现代浏览器的标配，不应该出现这种情况了。

```
*{ margin:0; padding:0;}
body{font:12px/1.5 arial;background:#fff;}
.test{background-color: white; border-style: outset; margin: 115px 0px 0px -40px;}

<div class="test"></div> 
```

[演示在这里](http://jsfiddle.net/VuTWc/)

# javascript - 在一个 img src 标签上显示不同格式的普通图像，以及 base64 图像

> ID：14315674
> 
> 赞同：0
> 
> 时间：2013-01-14T09:14:48.890
> 
> 标签：javascript, jquery, html, css

我用来显示从 WS编码的`javascript` 图像 On 。在少数情况下，我会以, ,格式获取图像，并希望在同一个标​​签中显示它们。`HTML``base64``png``gif``jpg``<img src= >`

```
$("#testImage").append("<img src=\"data:image/png;base64," +imgSRC+"">); 
```

imgSRC 是`base64`图像。

1.如何使用一个`<img src>`标签在同一个img src标签上显示`base64`图片和普通图片？或者当我现在返回`imgSRC`的是`jpg/png`...图像时更改此标签。例如，当我得到一个关于图像的返回值时`base64`： `append("<img src=\"data:image/png;base64," +checkImageFormat(imgSRC)+"">);`

如何通过`checkImageFormat(imgSRC)`更改当前对象的 img src 标签的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:37:19.483

我建议将“data:image/png;base64”部分也存储在数据库中（或任何来源）。这样就不用查了。

另一种解决方案可能是这样的：

```
$(function(){

    var $img = $('<img/>')
                   .attr({ src: 'data:image/png;base64,' + imgSrc })
                   .error(function(){
                        $(this).attr({ src: imgSrc }); 
                        //If we end up here the image couldn't be loaded 
                        //If so, we assume that its a jpeg/png/gif
                    });

    $("#testImage").append($img);

}); 
```

# ruby-on-rails - 在错误应用程序中访问 RoutingError URL

> ID：14315675
> 
> 赞同：0
> 
> 时间：2013-01-14T09:14:49.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试访问导致错误控制器中的路由错误的 URL。

**应用程序.rb**

```
config.exceptions_app = self.routes 
```

**路线.rb**

```
match "/404", to: "errors#not_found" 
```

**错误控制器**

```
class ErrorsController < ApplicationController
  layout "error"

  def not_found
  end

protected

  def app_exception
    @app_exception ||= env["action_dispatch.exception"]
  end

end 
```

如何访问导致路由错误的实际 URL？当我使用`request.url`我得到`\404`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T13:21:32.970

试试`request.original_fullpath`。

# vim - 程序文件 (x86) 目录的快捷方式

> ID：14315677
> 
> 赞同：2
> 
> 时间：2013-01-14T09:14:56.457
> 
> 标签：vim, cmd, command-prompt

在我的`win32`系统上，我在 Vim 中有这个命令在写字板中打开一个 vim 文件：

```
silent ! start c:\Program Files (x86)\Windows NT\Accessories\wordpad.exe "%:p"<CR> 
```

在我的`win64`系统上，这不起作用。我收到此错误：

```
error: Windows cannot find `"c:\Program"` 
```

也许是因为里面的空间`"Program Files (x86)"`和`"Windows NT"`？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T12:19:31.497

在 64 位 Windows 上 wordpad.exe 不会在“Program Files (x86)”中，而是在“Program Files”中。至少它在我的机器上。

有环境变量可以找到文件夹名称：“%ProgramFiles%”和“%ProgramFiles(x86)%”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T09:19:41.770

在你的路径周围加上引号。像这样：

`silent ! start "c:\Program Files (x86)\Windows NT\Accessories\wordpad.exe" "%:p"<CR>`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T12:11:18.473

Windows 上的 Vim 有一个特殊`!start`的（中间没有空格）用于异步调用。

而且，与往常一样，您需要在路径周围加上双引号，如下所示：

```
silent !start "c:\Program Files (x86)\Windows NT\Accessories\wordpad.exe" "%:p" 
```

# c# - 如何更新 mongodb 数组

> ID：14315681
> 
> 赞同：0
> 
> 时间：2013-01-14T09:15:08.277
> 
> 标签：c#, mongodb, mongodb-.net-driver

如何更新图片的更新列表？

模型：

```
public class Test
    {
        [BsonId]
        public string Id { get; set; }
        public string Name { get; set; }
        public List<Picture> Pic {get; set; }
        public DateTime LastModified { get; set; }
    }

    public class Picture
    {
        public string Name{ get; set;}
        public int Size {get; set;}
    } 
```

更新代码：

```
 IMongoUpdate update = Update
                .Set("Name", test.Name)
                .Set("Address", test.Address)
                .Set("LastModified", test.LastModified); 
```

结果：

```
{
    "_id": "50d3dbce1292dd2e98af1dd1",
    "Name": "Bubba",
    "Address": "1111",
    "Pic" : [{"Name": "test1.jpg", "Size":"1000"}, {"Name": "test2.jpg", "Size":"2000"}],
    "LastModified": {
        "$date": "2012-12-21T03:47:26.535Z"
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:37:22.553

如果要更新整个集合，可以使用此代码

```
var update = Update<Test>.Set(x => x.Pic, new List<Picture> {new Picture {Name="name", Size=10}});
collection.Update(Query<Test>.EQ(x => x.Id, "1"), update); 
```

Update类中有修改集合的方法：AddToSet、Push、Pull、Pop...

如果您需要更新文档的所有字段，那么更新整个文档会更容易

```
collection.Update(document) 
```

在这种情况下，必须设置 BsonId 字段。

# eclipse - svn 客户端按时间范围对提交进行分组

> ID：14315683
> 
> 赞同：0
> 
> 时间：2013-01-14T09:15:20.857
> 
> 标签：eclipse, svn, eclipse-plugin, svn-client

1.  是否有任何 SVN`Client/Eclipse`插件可以让用户在某个时间范围内（每天等）查看他/她的所有提交？由于我们的 CI 不支持按任务对提交进行分组，我该如何自己做上述事情呢？

2.  有没有办法查看我每天的所有提交`Eclipse`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:23:14.040

1.  Subversion 客户端都不允许提交作者（AFAIK）进行*内部过滤*`svn log | grep USER`（但可以使用）
2.  `svn log`在核心中支持日期作为修订参数（参见`svn help log`/-r "{DATE}"/ 和SVN Book 中的[修订日期主题 /](http://svnbook.red-bean.com/en/1.7/svn.tour.revs.specifiers.html#svn.tour.revs.dates)**特别注意**警告“Subversion 是否提前一天？”/）

# c# - 使用“ObjectId”查询 MongoDB

> ID：14315684
> 
> 赞同：33
> 
> 时间：2013-01-14T09:15:22.103
> 
> 标签：c#, .net, mongodb, mongodb-.net-driver

我已经将`document`s 插入到 MongoDB 中而没有`id`. 我想通过搜索他们的[MongoDB来检索它们，这是`ObjectId`](https://docs.mongodb.org/manual/reference/method/ObjectId/)*默认*分配的。

这是我的尝试-

```
var query_id = Query.EQ("_id", "50ed4e7d5baffd13a44d0153");
var entity = dbCollection.FindOne(query_id);
return entity.ToString(); 
```

我得到以下错误 -

> 发生“System.NullReferenceException”类型的第一次机会异常

问题是什么？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-14T09:30:32.473

您需要创建一个实例，`ObjectId`然后使用该实例进行查询，否则您的查询会将`ObjectId`s 与字符串进行比较并且无法找到匹配的文档。

这应该有效：

```
var query_id = Query.EQ("_id", ObjectId.Parse("50ed4e7d5baffd13a44d0153"));
var entity = dbCollection.FindOne(query_id);
return entity.ToString(); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-02-07T10:25:29.640

在**C#**中为最新的官方**MongoDB.Driver**写这个-

```
var filter_id = Builders<MODEL_NAME>.Filter.Eq("id", ObjectId.Parse("50ed4e7d5baffd13a44d0153"));
var entity = dbCollection.Find(filter).FirstOrDefault();
return entity.ToString(); 
```

我们可以在不`id`从 string 转换为`ObjectId`. 但是，我们将不得不在模型类中添加`[BsonRepresentation(BsonType.ObjectId)]`before`id`属性。

甚至可以使用**lambda 表达式**进一步简化代码-

```
var entity = dbCollection.Find(document => document.id == "50ed4e7d5baffd13a44d0153").FirstOrDefault();
return entity.ToString(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-27T14:14:41.327

如果您在 2018 年来到这里并且想要复制/粘贴仍然有效的代码或纯字符串语法；

```
 [Fact]
    public async Task QueryUsingObjectId()
    {
        var filter = Builders<CosmosParkingFactory>.Filter.Eq("_id", new ObjectId("5b57516fd16cb04bfc35fcc6"));
        var entity = stocksCollection.Find(filter);
        var stock = await entity.SingleOrDefaultAsync();
        Assert.NotNull(stock);

        var idString = "5b57516fd16cb04bfc35fcc6";
        var stringFilter = "{ _id: ObjectId('" + idString + "') }";
        var entityStringFiltered = stocksCollection.Find(stringFilter);
        var stockStringFiltered = await entityStringFiltered.SingleOrDefaultAsync();
        Assert.NotNull(stockStringFiltered);
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-24T00:26:45.130

选择的答案是正确的。对于任何对 Query.EQ 感到困惑的人，这里有另一种编写基本更新的方法（更新整个 mongodb 文档）：

```
string mongoDocumentID = "123455666767778";
var query = new QueryDocument("_id", ObjectId.Parse(mongoDocumentID)); 
var update = new UpdateDocument { { "$set", documentToSave } };
mongoCollection.Update(query, update, UpdateFlags.Multi); 
```

当您要实际按对象 ID 搜索时，需要 ObjectId 对象，否则它将字符串与 objectid 类型进行比较，并且不会匹配。Mongo 在这种方式下对类型非常严格，无论字段名称是否正确。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-21T20:57:36.440

你也可以这样做，它的

```
public static ObjectId GetInternalId(string id)
    {
        if (!ObjectId.TryParse(id, out ObjectId internalId))
            internalId = ObjectId.Empty;

        return internalId;
    } 
```

然后在你的方法中你可以做这样的事情

```
ObjectId internalId = GetMongoId.GetInternalId(id);
        return await YourContext.YourTable.Find(c => c.InternalId == internalId).FirstOrDefaultAsync(); 
```

注意：GetInternalId 中的 id 参数是该方法的参数。如果您需要这样：

```
public async Task<YourTable> Find(string id)
    {
        ObjectId internalId = GetMongoId.GetInternalId(id);
        return await YourContext.YourTable.Find(c => c.InternalId == internalId).FirstOrDefaultAsync();
    } 
```

希望它也有帮助。

# forms - Symfony2 表单生成器中实体支持的日期字段的默认值

> ID：14315685
> 
> 赞同：1
> 
> 时间：2013-01-14T09:15:22.370
> 
> 标签：forms, symfony, doctrine, symfony-forms

好的，我得到了下面描述的 FormType。我将这个 Form 类用于创建和编辑表单。我决定使用选项数组中的属性设置默认日期（`from_date`及`to_date`以下） 。`data`这在设置默认日期方面做得很好，事实上，做得太好了。它还覆盖了编辑表单中的现有日期，这根本不好，真的。

如何设置真正的“默认”值，而不是“始终”值？

```
<?php

namespace TechPeople\InvoiceBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Security\Core\SecurityContext;

class InvoiceType extends AbstractType
{
    private $user;

    public function __construct(SecurityContext $security_context)
    {
        $this->user = $security_context->getToken()->getUser();
    }

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $lastMonth = new \DateTime();$lastMonth->modify('-1 month');
        $builder
            ->add('month', 'choice', array(
                'data' => $lastMonth->format('F'),
                'choices' => array(
                    "January" => "January",
                    "February" => "February",
                    "March" => "March",
                    "April" => "April",
                    "May" => "May",
                    "June" => "June",
                    "July" => "July",
                    "August" => "August",
                    "September" => "September",
                    "October" => "October",
                    "Novemeber" => "Novemeber",
                    "December" => "December",
                )
            ))
            ->add('year', null, array(
                'data' => $lastMonth->format('Y')
            ))
            ->add('from_date', 'date', array(
                 'label' => 'From',
                 'data' => new \DateTime(),
            ))
            ->add('to_date', 'date', array(
                 'label' => 'To',
                 //'data' => new \DateTime(),
            ))
            ->add('hours')
            ->add('expenses')
            ->add('expense_amount', 'money',
                array(
                    'required' => false,
                ))
            ->add('attachment', 'file',
                array(
                    'path'=>$options['data']->getAttachmentPath(),
                    'required' => false,
                )
            )
        ;
        if($this->user->hasRole('ROLE_ADMIN')){
            $builder->add('vendor');
        }
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'TechPeople\InvoiceBundle\Entity\Invoice'
        ));
    }

    public function getName()
    {
        return 'techpeople_invoicebundle_invoicetype';
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T09:45:35.047

将它设置在实体上，或者您将用作表单数据的任何对象上，在构造函数中或作为默认值！

```
class Invoice {

    private $month;
    private $year;
    private $from_date;
    private $to_date;
    //...

    public function __construct()
    {
        $lastMonth = new \DateTime('now - 1 month');
        $this->month = $lastMonth->format('F');
        $this->year = $lastMonth->format('Y');
        $this->from_date = new \DateTime;
        $this->to_date = new \DateTime;
        //...
    }
} 
```

它将为创建表单设置这两个字段，并且在持久实体的情况下，这些值将在加载时被存储的数据覆盖。

# ios - 在另一个 modalView 上呈现 ViewController

> ID：14315686
> 
> 赞同：0
> 
> 时间：2013-01-14T09:15:28.810
> 
> 标签：ios, xcode, ios6

我已经`modalView(B)`在另一个`modalView(A)`导航控制器上展示了一个。

问题是永远不会调用 的`dealloc`方法`modalView(A)`，并且应用程序在从`NSUserDefaults`.

我无法弄清楚到底是什么问题？

编辑 ：-

代码

```
ViewControllerA * aViewController = [[ViewControllerA alloc] initWithNibName:@"ViewControllerA" bundle:[NSBundle mainBundle]];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController: aViewController];
navController.navigationBar.barStyle = UIBarStyleBlack;
[self presentViewController:navController animated:YES completion:^{}];
[aViewController release];
[navController release]; 
```

模态视图(B)

```
ViewControllerB *bViewController = [[ViewControllerA alloc] initWithNibName:@"ViewControllerA" bundle:[NSBundle mainBundle]];
[self presentViewController: bViewController animated:YES completion:^{}];  
[bViewController release]; 
```

# hibernate-validator - 在 Hibernate Validator 中，方法验证如何告诉调用者返回值可能为 null？

> ID：14315696
> 
> 赞同：0
> 
> 时间：2013-01-14T09:16:29.740
> 
> 标签：hibernate-validator, notnull

Hibernate Validator 中的方法验证可以告诉调用者返回值是`@NotNull`，但是我如何告诉调用者返回值可能为 null 呢？在 Findbugs 中，我有`@CheckForNull`，但这仅在编译时有效，而不是在运行时有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:40:02.027

听起来您要的是*@Nullable 之*类的东西。这不是 Bean Validation 的一部分，而且很可能不会。另请参阅专家组围绕此的讨论 - [http://lists.jboss.org/pipermail/beanvalidation-dev/2013-January/thread.html](http://lists.jboss.org/pipermail/beanvalidation-dev/2013-January/thread.html)

无论如何，你可以用 @Nullable 实现什么。在 Bean Validation 的上下文中，实现总是会返回 true。

# fonts - 如何处理 EMR_FORCEUFIMAPPING 和 EMR_GDICOMMENT？

> ID：14315698
> 
> 赞同：-1
> 
> 时间：2013-01-14T09:16:35.627
> 
> 标签：fonts, emr, spool, print-spooler-api

我正在将 EMF 转换为 PDF，但我进入了一个有问题的领域。我有一些 EMF 假脱机文件，其中包含一些未记录的 EMR 结构，例如 `EMR_FORCEUFIMAPPING`和`EMR_GDICOMMENT`.

MSDN 对这些记录的描述并不那么详细，因此搜索这些关键字并不能帮助我找到答案。据我所知，这些记录可以帮助我将字体嵌入到我生成的 PDF 中。有没有人在这个领域有经验？你能推荐我一些书籍或教程或源代码存储库或一些示例吗？

如何处理这些记录？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:52:43.093

他们不是无证的。见[这里](http://msdn.microsoft.com/en-us/library/cc230629.aspx)和[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162538%28v=vs.85%29.aspx)。我不知道您如何将其翻译`EMR_FORCEUIFMAPPING`成 PDF 中有意义的任何内容，因此您可能应该丢弃它。`EMR_GDICOMMENT`可能包含 Microsoft 奇怪地选择嵌入评论记录而不是使它们成为单独的记录类型的几个重要记录中的任何一个。这些（模糊地）记录[在这里](http://download.microsoft.com/download/9/5/E/95EF66AF-9026-4BB0-A41D-A4F81802D92C/%5BMS-EMFSPOOL%5D.pdf)。

# java - XMLGregorianCalendar 面临错误

> ID：14315705
> 
> 赞同：0
> 
> 时间：2013-01-14T09:17:05.673
> 
> 标签：java, web-services

我正在开发一个 Java Web 基础项目，我正在使用 Web 服务来访问日期和更新日期，我的屏幕有一个日期字段，我需要使用从 Web 服务获取的数据来更新它，但是 Web 服务日期是类型`XMLGregorianCalendar`。

这就是我所拥有的：

```
public class Testing {

/**
 * @param args
 */
public static void main(String[] args) {

    DateFormat df = new SimpleDateFormat("dd-MM-yyyy");
    Date date = null;
    try {
        date = (Date)df.parse("5-5-2012");
        System.out.println("Date Date" + date);
    } catch (ParseException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    GregorianCalendar gregory = new GregorianCalendar();
    gregory.setTime(date);
     System.out.println(""+gregory);

     XMLGregorianCalendar calendar =null;
    try {
        calendar = DatatypeFactory.newInstance().newXMLGregorianCalendar(gregory);
    } catch (DatatypeConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    calendar.setTimezone( DatatypeConstants.FIELD_UNDEFINED );
    someDoa.setdate(calendar);

}

} 
```

但结果是：

```
SEVERE: Servlet.service() for servlet default threw exception
javax.xml.ws.soap.SOAPFaultException: java.lang.IllegalArgumentException: Incorrect Offset :Incorrect Offset :needs a leading +/- sign 
```

# java - 如何在jsp中获取id而不是值？

> ID：14315709
> 
> 赞同：1
> 
> 时间：2013-01-14T09:17:29.640
> 
> 标签：java, html, jsp, servlets

如何从jsp获取按钮id到servlet而不是获取按钮值

```
<input id="${section.id}" type="submit" name="submit" value="Edit"> 
```

如何在 servlet 中获取该 ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T09:19:31.333

您不能该 id 仅供客户端使用。您将需要设置`name`or`value`以匹配元素的 id。

或者，作为一种解决方法，您可以通过在 JSP 中添加类似这样的内容来创建一个包含 id 值的隐藏输入字段：

```
<input type="hidden" name="submit_id" value="${section.id}" /> 
```

`submit_id`然后，在参数下提交表单时，这将在 servlet 中可用。

```
String submitId = (String)request.getParameter("submit_id"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:20:27.983

您能够做到这一点的唯一方法是使用 javascript 拦截表单提交并将 id 设置为额外的 post/get 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:20:36.283

唯一的方法是制作一个 javascript 函数来更改 id 的按钮值，但我不知道你为什么要这样做，你可以使用隐藏的输入来发送表单中的数据

```
<input type="hidden" name="id" value="the_id_number" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T09:24:53.043

您无法为 servlet 获取任何按钮 id 值。当提交来自浏览器的请求时，所有输入字段（输入标签）将被传输到服务器。可以使用该字段的名称访问每个输入属性的值。所有其他字段，如 id，class 等用于 css和 JavaScript 功能主义者。您不应该设计将按钮 id 传递给服务器端。考虑其他方法，例如隐藏输入字段

# java - Android 客户端发送的 Google App Engine 上图像的数据存储区

> ID：14315715
> 
> 赞同：-2
> 
> 时间：2013-01-14T09:17:52.783
> 
> 标签：java, android, google-app-engine

这个问题非常具体到 Google App Engine 上的两个存储选项中的哪一个将是我的 Android 应用程序的更好解决方案，我的 Android 应用程序必须从服务器存储和检索图像（谷歌应用程序引擎）

1.  高复制数据存储 - 使用 Blobstore Api 解决它。
2.  使用 Google Cloud Sql - 在云中创建关系数据存储。

我是 Google Apps Engine 的新手，所以不确定这个决定。任何帮助将不胜感激。

谢谢你。希望尽快听到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:34:58.570

其实你有几个选择：

1.  [Datastore 中的 Blob 属性](https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types)：使用最简单，但限制为 1Mb。存储价格 0.12 美元/GB/月
2.  [Blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview)：类似于 DB 中的 Blob：使用简单，有效限制为 32Mb（最大 HTTP 响应大小）。存储价格 0.12 美元/GB/月
3.  [Imageservice](https://developers.google.com/appengine/docs/java/blobstore/overview#Using_the_Images_Service_with_the_Blobstore)：可以放在 Blobstore 前面，帮助您缓存和调整图像大小（如果您想为移动设备优化图像，这很重要）。
4.  Cloud SQL - 一个被硬塞进 GAE 的 MySQL 数据库。我不会使用它，因为它很贵：存储 0.24 美元/GB/月，流量 0.12 美元/GB/月（除了您的前端实例流量）。
5.  [Google Cloud Storage](https://developers.google.com/appengine/docs/java/googlestorage/)：外部服务，但与 GAE 集成（具有直接 API）。更多功能、访问控制等。更难使用，[更低价格](https://cloud.google.com/pricing/cloud-storage)：存储 0.085 美元/GB/月。

注意：所有服务将花费您 0.12 美元/GB 的网络带宽。降低这种情况的唯一方法是使用缓存（但这需要有公共 URL）。

# c - 如何编辑此函数调用以仅扫描数组的一半？

> ID：14315720
> 
> 赞同：-2
> 
> 时间：2013-01-14T09:18:18.747
> 
> 标签：c, function

```
#include <stdio.h>
#define N 10
int find_largest(int *, int );
int main(void) {
int a[] = {1,2,23,4,5,2,14,6,8,10};
printf("%d\n", find_largest (a, N));
 }

 int find_largest(int *a, int n) {
 int i, max;
 max = a[0];
 for (i = 1; i < n; i++)
 if (a[i] > max)
 max = a[i];
 return max;
 } 
```

如何编辑函数调用，以便程序打印数组后半部分的最大数量，因此在这些元素中：{2、14、6、8、10}？正如我所说，我应该只编辑这一行：

```
printf("%d\n", find_largest (a, N)); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:22:00.910

您可以将该行更改为：

```
printf("%d\n", find_largest (a+N/2, (N+1)/2)); 
```

可以处理奇数时的`(N+1)/2`异常。`N`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:21:36.633

改变

```
 printf("%d\n", find_largest (a, N)); 
```

到

```
 printf("%d\n", find_largest (a + N/2, N/2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:21:07.480

printf("%d\n", find_largest (a+N/2, (N+1)/2));

# javascript - 在谷歌地图中显示多个标记

> ID：14315722
> 
> 赞同：0
> 
> 时间：2013-01-14T09:18:26.793
> 
> 标签：javascript, jquery, google-maps-markers

到目前为止，我已经完成了从服务器显示多个标记

```
 urlName = "http://bumba27.byethost16.com/infomagilandia/send_lat_lng.php";
$.post(urlName, function(data) {
    var obj = jQuery.parseJSON ( data );
    $noOfPlace   = obj.i;

    for($i=1;$i<=$noOfPlace;$i++)
        {
        $Lat = obj['lat' + $i];
        $Lng = obj['lng'+$i];

        newPlace = new google.maps.LatLng($Lat,$Lng);
        addNewMarker(newPlace)
        }

    });

    function addNewMarker(newPlace) {
        markers.push(new google.maps.Marker({
        position: newPlace,
        map: map,
        draggable: false,
        animation: google.maps.Animation.DROP
        }));
    } 
```

我有一个存储 6 lat & lng 的数据库我需要在谷歌地图上显示它们我从服务器获取数据没有问题但是当我尝试将这些数据作为标记放在谷歌地图上时它只显示第一个（第一个纬度和经度）。你能告诉我有什么问题吗？

# camera - Windows 上 Corona 可用性的相机 API

> ID：14315724
> 
> 赞同：0
> 
> 时间：2013-01-14T09:18:57.593
> 
> 标签：camera, coronasdk, recorder

我想制作一个`corona`具有用途`camera`和`audio recorder`功能的 iphone 应用程序，但据我搜索，Windows 操作系统不支持相机应用程序。那么我不能使用 Corona SDK 在 Windows 环境中创建这样的应用程序并且需要切换到 MAC OS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:54:20.123

在 Windows 上不受支持意味着您无法在 Windows 上进行测试。如果您在 iPhone 上进行测试，您的应用程序将可以正常工作（当然，如果您做得正确的话）。

但是你不应该在 Windows 上为 iOS 开发，它更难调试，而且你不能将它上传到苹果商店，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:01:33.040

你必须在 Mac 上为 iOS 设备构建（或使用像 MacInTheCloud 这样的服务）。Windows 只能为 Android 构建。您可以在 Windows 上进行开发，但是当您需要将其放在设备上时，您必须能够访问 Mac。

# python - python: ConfigParser 对象并多次读取

> ID：14315728
> 
> 赞同：0
> 
> 时间：2013-01-14T09:19:15.627
> 
> 标签：python, linux

**设想：**

我有一个配置文件正在维护要执行的自动化测试列表。这些测试是长期循环执行的。配置文件的设计方式使其`ConfigParser`可以读取。由于有两个三个参数，我需要通过每个测试。

现在，这个配置文件被 a 调用，`script(s1)`测试按照配置文件中的列表执行。

`Script(s1)`第一次读取配置，并在每次测试完成后执行。

**要求读两遍：**

因为可能有更多的测试用例可以添加到配置文件和脚本需要继续执行。因此 ConfigParser 创建的对象将只有一次，但读取可以多次。

**问题是：**

在一个文件中多次读取文件。在这种情况下被认为是一个好主意吗？还是有更好的方法来做到这一点？

请提供建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:24:35.037

这似乎很困难，但实际上您需要做的就是`seek`将文件恢复为`0`.

```
from ConfigParser import RawConfigParser

fp = open("config.cfg")
config = RawConfigParser()

config.readfp(fp)

fp.seek(0)

config.readfp(fp)

fp.close() 
```

# php - 关于 DELETE 方法的 REST API 设计

> ID：14315729
> 
> 赞同：5
> 
> 时间：2013-01-14T09:19:17.190
> 
> 标签：php, ruby-on-rails, api, rest, api-design

我正在构建一个 REST API。实际上，我了解通用指南和规则。

但我对 DELETE 方法有疑问，因为我需要在请求中通过正文发送数据，该 DELETE 方法将忽略正文。

如果你问什么数据让我在 DELETE 方法中通过 body 发送它，是一个 'url' 和其他一些参数。当然，“url”在数据库中有 id，所以我可以毫无问题地使用 DELETE，比如`DELETE https://api.example.com/content/url:url_id`. 而是传递 id，我选择传递它自己的 url 和其他一些参数。我的业务逻辑和要求迫使我在 DELETE 方法中传递 url 而不是 id。

所以阅读后，我还发现了一些代理阻止 DELETE 和 PUT 方法。而且 HTML 表单只支持 GET 和 POST 方法。

我开始认为最好只在我的 REST API 中使用`GET`和。`POST`所以我可以使用 POST 来删除和对象或资源，如下所示：

```
POST /content/delete/url
Body :
    url : xxxx
    param1 : xxxx
    param2 : xxx 
```

但是在“REST API 设计规则手册，O'reilly”中，第 18 页说

> > “应该使用 HTTP 请求方法来指示执行了哪个 CRUD 功能”
> 
> 以下反模式举例说明了不该做什么：
> 
> ```
> GET /deleteUser?id=1234
> GET /deleteUser/1234
> POST /users/1234/delete 
> ```

再次搜索和阅读后，我提出了一些解决方案

1.  使用`X-HTTP-Method-Override`

2.  使用 api 方法名称，如闪烁`(api.flickr.com/services/rest/?method=flickr.collections.getInfo)`和`mailchimp(api.mailchimp.com/1.3/?method=campaignDelete)`

我想我喜欢解决方案 1，使用“X-HTTP-Method-Override”。你怎么看？

谷歌似乎使用 X-HTTP-Method-Override，参考这个[https://developers.google.com/gdata/docs/2.0/basics](https://developers.google.com/gdata/docs/2.0/basics)

Flicker 和 Mailchimp 使用方法名称，如解决方案 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:56:55.200

您**不能**发送带有 DELETE 请求的正文。这没有任何意义！

RESTful 将是

```
DELETE  http://www.plocal:3000/api/v1/content/page-1
DELETE  http://www.plocal:3000/api/v1/content/info-page
DELETE  http://www.plocal:3000/api/v1/content/1
DELETE  http://www.plocal:3000/api/v1/content/2 
```

测试调用

```
curl -v http://www.plocal:3000/api/v1/content -X DELETE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:21:54.843

URL 是要删除的内容项的标识信息吗？如果是这样的话，

```
DELETE https://api.example.com/content/:id 
```

并将 url 作为 id 的一部分包含在内。Id 不必是严格的整数。

您可能还想创建一条新路线

```
resources :content, :except => [:delete] do
  member do
    delete delete_by_url
  end
end 
```

然后，您将拥有一个新的删除路由，该路由具有更合适的名称和控制器中的特定操作。

```
DELETE https://api.example.com/content/:id/delete_by_url 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:59:24.303

我知道这是您业务逻辑的一部分，但我建议您重新考虑它，或者尝试使用其他解决方案而不是 REST。

通过做你提到的那些事情，你将打破所有 REST 概念，但仍然没有在你的应用程序上做足够好的事情。

我认为在您的情况下最好的解决方案是考虑您的业务逻辑。也许它可以在不中断 REST 的情况下完成。

如果您认为无法完成，那么我会推荐您列出的第一个解决方案。感觉不太对劲。

希望能帮助到你。

# ios - 删除 Elastic Load Balancing 会导致 DNS 错误

> ID：14315731
> 
> 赞同：0
> 
> 时间：2013-01-14T09:19:23.443
> 
> 标签：ios, amazon-web-services, amazon-elb

我有一个使用 Amazon Web Services (AWS) 的实时 iOS 应用程序。我已经根据亚马逊的说明成功设置了令牌自动售货机 (TVM)，并且该应用程序可以完美地与 AWS 配合使用。

按照 AWS 说明设置 TVM 需要您在 Elastic Beanstalk 中创建一个新环境，该环境会自动为您创建一个负载均衡器。

我的免费套餐最近已过期，现在我开始为负载均衡器时间付费。由于我的应用程序相当小众并且只有少量追随者，我认为我不再需要负载均衡器，因此想删除它。

问题是，如果我这样做（按照亚马逊[在此处](http://docs.amazonwebservices.com/gettingstarted/latest/wah/getting-started-cleanup-elb.html)的说明），我的令牌自动售货机将无法访问。Chrome 报告该 URL 不可用。

在运行亚马逊的 TVM 时，有没有人有任何关于删除 ELB 的提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:53:50.683

您使用的 apptuarytvmv5.elasticbeanstalk.com DNS 专门绑定到与您的 beanstalk 环境关联的 ELB。如果您不再使用 ELB，则必须访问运行 TVM 应用程序的单个 EC2 实例。

您可能希望避免在将来发布指向您的 TVM 的直接链接，因为它确实允许人们访问您的 AWS 账户的一部分。

# ios - UIView中如何设置SubView的优先响应

> ID：14315733
> 
> 赞同：0
> 
> 时间：2013-01-14T09:19:29.243
> 
> 标签：ios, objective-c, uiview, uibutton, subview

在视图控制器中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray *array = [[NSArray alloc]initWithObjects:@"title1",@"title2",@"title3", nil];
    self.scrollTabControl = [[ScrollTabControl alloc]initWithViewControllers:array];
    [self.view addSubview:self.scrollTabControl]; //add a view to ViewController}

@interface ScrollTabControl : UIView
- (id)initWithControllers:(NSArray *)controllers
{
    if((self = [super init])) {
        _viewControllers = viewControllers;
        _tabControls = [[TabControl alloc] initWithControllers:viewControllers];
        [self addSubview:_tabControls];//initialization tab controler,in it,set UIControlEventTouchUpInside of button,response selector
    }
    return self;
} 
```

现在，问题是如果我直接在视图控制器中使用 [self addSubView:TabControl]，选择器将正确实现。但是如果我 [self addSubView:ScrollTabControl]，按钮事件不会触发选择器，选择器也没有响应。我该如何处理这种情况？

# iphone - 如何解决内存泄漏

> ID：14315740
> 
> 赞同：0
> 
> 时间：2013-01-14T09:20:02.350
> 
> 标签：iphone, ios, objective-c, ipad, memory-leaks

下面的代码在分析时显示了内存泄漏。

```
ContentViewController *dataViewController;
dataViewController = [[ContentViewController alloc]initWithNibName:@"ContentViewController" bundle:nil];

dataViewController.DocumentPath = [self.modelArray objectAtIndex:index];
return dataViewController; 
```

我该如何解决这个泄漏，任何想法请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T09:22:04.840

**如果您不使用 ARC。**

每当您从方法返回一个对象时，返回一个自动释放的对象：

```
return [dataViewController autorelease]; 
```

我建议使用 ARC 是一个不错的选择。因为它比手动内存管理要好得多。ARC 是一个编译时功能，它会在您编译源代码时自动为您添加保留、发布调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:58:41.333

我认为可以安全地假设提问者使用手动内存管理而不是 ARC，因为我不相信这段代码会在 ARC 下泄漏。

话虽如此，Midhun MP 的回答是正确的。返回的对象需要自动释放才能解决眼前的问题。但我想添加一些信息，说明为什么这被分析工具认为是泄漏。

Objective-C 在方法上使用命名约定来确定它们的内存管理语义。例如，一个名为的方法`newPerson`应该返回一个对对象的拥有引用（即保留计数为 +1 的对象）。一个名为的方法`person`应该返回一个自动释放的对象，（即没有拥有引用的对象）。

在第一种情况下，方法的调用者拥有对象，并期望在完成时释放它。第二种情况说明调用者不必担心释放对象（因为它不是拥有的）。

我喜欢用来记住约定的一种简单方法是我学到的 CARN 规则。

*   **复制**_****
***   **一个**lloc*   **保留**_*******   **新**的****

 ****在 Cbjective-C 中，任何包含这些词的方法都将被期望返回对其返回对象的拥有引用。

因此，总而言之，如果您打算从您的方法中返回一个拥有的对象，请修改其名称以包含上述单词之一，或者如果不是，则自动释放您返回的对象。****

# laravel - Laravel 4 字符串类

> ID：14315742
> 
> 赞同：-1
> 
> 时间：2013-01-14T09:20:07.767
> 
> 标签：laravel

只是想知道人们用什么来代替 L3 的字符串类？我看到 Meido 的端口目前未能通过测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:24:22.863

[由于构建时无法解决的依赖关系](https://travis-ci.org/meido/str/jobs/4016800)，构建失败- 这是由于最近在 Laravel 4 中发生的结构更改，与此包本身无关。

我自己没有使用过这个包，但我想我会指出这一点。

# mysql - 无法在mysql中创建表

> ID：14315753
> 
> 赞同：-2
> 
> 时间：2013-01-14T09:21:04.360
> 
> 标签：mysql

当我尝试在我的 sql 中创建下表时，我收到一条错误消息，指出

ERROR 1071 (42000)：指定的密钥太长；最大密钥长度为 767 字节

```
CREATE TABLE fields_meta_data 
(id varchar(255)  NOT NULL ,
 name varchar(255)  NULL ,
 vname varchar(255)  NULL ,
 comments varchar(255)  NULL ,
 help varchar(255)  NULL ,
 custom_module varchar(255)  NULL ,
 type varchar(255)  NULL ,
 len int(11)  NULL ,
 required bool  DEFAULT '0' NULL ,
 default_value varchar(255)  NULL ,
 date_modified datetime  NULL ,
 deleted bool  DEFAULT '0' NULL ,
 audited bool  DEFAULT '0' NULL ,
 massupdate bool  DEFAULT '0' NULL ,
 duplicate_merge smallint  DEFAULT '0' NULL ,
 reportable bool  DEFAULT '1' NULL ,
 importable varchar(255)  NULL ,
 ext1 varchar(255)  NULL ,
 ext2 varchar(255)  NULL ,
 ext3 varchar(255)  NULL ,
 ext4 text  NULL  , 
 PRIMARY KEY (id),   
 KEY idx_meta_id_del (id, deleted),   
 KEY idx_meta_cm_del (custom_module, deleted)
 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:28:48.973

为什么需要使用如此广泛的领域？即使对于`id`你已经使用过的`VARCHAR(255)`.

您正在尝试创建太宽的键/索引。

如果您只是降低您的胃口并使用合理的字段定义，例如整数`id`，以及其他小于 255 的字段，您应该立即让它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:30:35.583

我猜你正在使用 UTF8 字符集。您的 ID 列占用 255 * 4 字节，即 1020 字节，这对于 MyISAM 表来说太多了。

# firebug - 您如何跟踪从 FireBug 中的服务器推送的请求

> ID：14315760
> 
> 赞同：1
> 
> 时间：2013-01-14T09:21:26.140
> 
> 标签：firebug, signalr

我正在使用 SignalR 库将通知从服务器推送到客户端。当从服务器推送通知时，firebug 中没有任何痕迹。我如何追踪这个请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:30:57.347

我不相信 FireBug 提供了一种通过 Web 套接字查看单个消息的方法，因此您不会在该级别看到任何消息痕迹。IE 10 开发工具也不支持查看 Web Socket 通信。Chrome Dev Tools 在 2012 IIRC 早期增加了对查看单个 Web Socket 消息的支持。

要了解 SignalR 本身在做什么，您可以做的是在集线器上设置 logging = true，如下所示：

```
$.connection.hub.logging = true; 
```

这将导致 SignalR 向调试器控制台发送跟踪信息。当您实际设置连接时，您可以在运行时或页面加载时“即时”执行此操作。

最后，如果您熟悉[Fiddler](http://www.fiddler2.com/)，您可以随时将其粘贴在任何浏览器的中间以查看 Web Socket 通信。

**更新：**

如果出于某种原因，Fiddler 对您来说不是一个可行的选择，请考虑其他事情。您始终可以`longPolling`在调试时强制传输，这样您就可以避免使用 Web 套接字，而只使用可以（显然）在 FireBug 中看到的普通 HTTP。

# c++ - 在 gui 应用程序中进行交互式控制台/窗口交互

> ID：14315762
> 
> 赞同：1
> 
> 时间：2013-01-14T09:21:31.407
> 
> 标签：c++, winforms

我想要的是：

一个应用程序，其中有一个 gui 窗口和控制台窗口。可以单击、拖动窗口等。在任何给定时刻，都可以选择控制台，并输入将处理的行。

我已经拥有的：

一个应用程序，它分配控制台并将其附加到自身，然后将标准流重定向到它。代码是：

```
AllocConsole() ;
AttachConsole( GetCurrentProcessId()); 
freopen("CONIN$","rb",stdin);   // reopen stdin handle as console window input

freopen("CONOUT$","wb",stdout);  // reopen stout handle as console window output

freopen("CONOUT$","wb",stderr); // reopen stderr handle as console window output 
```

然后注册窗口类，创建并显示一个窗口。输出到控制台工作正常，与窗口的交互是正确的。

但是，我无法在控制台中输入任何内容。我可以猜测一下：如果我调用 std::cin >> my_string 之类的东西，我将能够输入一行 - 但与窗口的交互将停止，直到输入完成。那是对的吗？我怎样才能使应用程序以我上面描述的方式运行？

更新：

我发现了相关问题：[测试标准输入是否有 C++ 输入（windows 和/或 linux）](https://stackoverflow.com/questions/6839508/test-if-stdin-has-input-for-c-windows-and-or-linux)

确定控制台输入中是否有字符的代码如下：

```
bool StdinOpen() {
  static HANDLE handle = GetStdHandle(STD_INPUT_HANDLE);
  DWORD bytes_left;
  PeekNamedPipe(handle, NULL, 0, NULL, &bytes_left, NULL);
  return bytes_left;
} 
```

但是，它会返回一些过高的数字，就好像控制台中总是有输入一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:44:02.020

我首先初始化`bytes_left`变量并检查返回值。

```
bool StdinOpen() {
  static HANDLE handle = GetStdHandle(STD_INPUT_HANDLE);
  DWORD bytes_left = 0;
  if (!PeekNamedPipe(handle, NULL, 0, NULL, &bytes_left, NULL))
     return false;
  return bytes_left != 0;
} 
```

# ruby - 从字符串中提取 URL？

> ID：14315766
> 
> 赞同：0
> 
> 时间：2013-01-14T09:21:39.473
> 
> 标签：ruby

> **可能重复：**
> [从字符串中提取 URL](https://stackoverflow.com/questions/14257111/extract-url-from-a-string)

我有一个像这样的字符串：

```
abchghhdgfdgfdfdfhttp://www.rajasthanpatrika.com/News/World/1132013/international news/414309\r\n\t\t\t\t     ghjghjfhjvfhjhfj" 
```

我想提取网址：

```
http://www.rajasthanpatrika.com/News/World/1132013/international news/414309 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:08:42.647

```
s = "abchghhdgfdgfdfdfhttp://www.rajasthanpatrika.com/News/World/1132013/international news/414309\r\n\t\t\t\t ghjghjfhjvfhjhfj"
s[/http:\/\/.*?(?=[\r\n\t])/]
# => "http://www.rajasthanpatrika.com/News/World/1132013/international news/414309" 
```

# unicode - Visual Basic 6 中的本地化

> ID：14315767
> 
> 赞同：4
> 
> 时间：2013-01-14T09:21:39.977
> 
> 标签：unicode, localization, vb6

是否有本地化语言设置的最佳方法？假设情况是您已经有一个可用的应用程序，例如法语，并希望将其完全本地化为英语。

那么有什么方法可以轻松本地化应用程序，同时尽量减少对应用程序代码的影响，我的意思是代码本身不能有任何重大更改，但添加一些就足够了。我听说在 VB6 中使用资源文件，但它的字体似乎有问题，特别是在日文字符中，它特别在标签上抛出了一个垃圾字符。现在，在不对应用程序代码进行太多更改的情况下更改应用程序字符集的最佳方法是什么。

这个应用程序有一个遗留代码，我必须处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T11:31:01.710

我使用资源文件，并用 ID 替换（几乎）代码库和 UI 中的每个字符串。每当我显示一个字符串时，我都会调用一个函数，该函数接受一个类似字符串`{#1234}`并加载字符串 ID 1234（使用`LoadString()`并返回它。对于 UI，我枚举表单上的每个控件并将可见字符串传递给同一个函数。

这意味着在每个表单`Localise Me`的事件中以及每当我动态设置/显示某些内容时都会调用一次。`Load``TranslateString("{#1234}", "name", Name)`

有关字体，请参见Visual Basic Programmer's Guide 中的[此示例](http://msdn.microsoft.com/en-us/library/aa241713(VS.60).aspx)。作为`Localise`方法的一部分，我在每个控件上调用它。

不要忘记不同的字体和语言对相同的文本占用不同的垂直空间。表单布局也需要调整以考虑到这一点，或者动态重排（将控件对齐到最长的标签，向下移动以允许更长的全宽文本等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T05:30:59.380

关于问题的“同时尽量减少对应用程序代码的影响”部分，我建议将与资源查找相关的功能封装到它自己的一个类中，公开获取字符串的方法（通过传递文化说明符参数）。

然后大部分工作是将您的代码从可能是硬编码的字符串转换为方法调用以检索适当的字符串。实现这个答案的一个变体：**[在 VB6 中实现 String.Format()](https://stackoverflow.com/questions/14534360/implementing-string-format-in-vb6/14534361#14534361)**如果您还封装“文化”的概念并在此方法的签名中引入一些文化信息参数（可能称为它*）* ，可以大大简化您的生活。`StringFormat``StringFormatLocal`

关键是，如果当前的应用程序没有本地化，它可能不关心本地化；本地化它意味着引入一个新的*问题*，因此为了尽可能少地影响遗留代码，您需要在整个代码库中寻找并销毁“魔术字符串”和“魔术格式”（如果您的 UI 已硬编码设计时标题和图像，也删除它们），用对本地化 API 的调用替换它们 - 保持本地化问题分开。

我想在这里看到另一个答案，其中包含有关存储、加载和特别是使用非 ANSI 字符串资源的更多详细信息......

# asp.net - asp.net 替代 curl uri

> ID：14315772
> 
> 赞同：1
> 
> 时间：2013-01-14T09:21:52.893
> 
> 标签：asp.net, curl

对于以下 curl uri，asp.net 中的替代方法是什么

```
curl -u MyUserName:MyPassword "http://api.messaging.staging.voxeo.net/1.0/messaging" -X POST -d "botkey=12345&apimethod=send&msg=My%20test%20message.&user=14075555555&network=SMS&from=14076666666" 
```

URI 部分很简单，但是如何添加用户名和密码，因为我需要为此设置一些 http 标头，如下所示

```
curl_setopt($ch, CURLOPT_HEADER, 0);

 $data="botkey=".$botkey."&apimethod=send&msg=".$msg."&userkey=".$userKey."&network=SMS&from=".$from;
 HERE IT IS SETTING USERNAME PASSWORD
curl_setopt($ch, CURLOPT_USERPWD, '[Evolution User Name]:[Evolution Password]'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:15:28.867

您可以使用[HttpWebRequest](http://msdn.microsoft.com/en-gb/library/system.net.httpwebrequest.aspx)或[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.110%29.aspx)类与其他站点进行交互。鉴于您的用例似乎有点复杂/具体，我建议您使用`HttpWebRequest`.

您可以使用该`Credentials`属性来分配您的用户名/密码凭据，并使用该`Header`属性来添加您的自定义标头。

[这个 SO Question](https://stackoverflow.com/questions/4699938/how-to-download-the-file-using-httpwebrequest-and-httpwebresponse-classcookies)有示例代码。请注意，您应该正确处理 HttpRequest 对象以及它们访问非托管资源。

# asp.net - '?' 附近的语法不正确

> ID：14315774
> 
> 赞同：1
> 
> 时间：2013-01-14T09:21:57.370
> 
> 标签：asp.net, mysql, sql, insert

调用 insertcourse_registration() 时出现以下错误

```
incorrect syntax near ' ?' 
```

在我调用 insertcourse_registration 的代码中，我得到了上述错误，你能帮我解决这个问题吗

```
Public Sub setdata(ByRef lrowcourse_registration As ds_user_master.user_masterRow)
    rowuser_master = lrowcourse_registration
End Sub
Public Sub insertcourse_registration()
    Try
        Try
            connectionString = ConfigurationManager.ConnectionStrings("asha_dbConnectionString").ToString
            myConnection.ConnectionString = connectionString
            myConnection.Open()
            MsgBox("Connected to ODBC Database  !!")
        Catch ex As Exception
        End Try
        transaction = myConnection.BeginTransaction
        command = New SqlCommand("insert into user_master values (?,?,?,?,?)", myConnection)
        command.Parameters.Add("@us_user_id", SqlDbType.NVarChar).Value = rowuser_master.us_user_id
        command.Parameters.Add("@us_role", SqlDbType.NVarChar).Value = rowuser_master.us_role
        command.Parameters.Add("@us_fname", SqlDbType.NVarChar).Value = rowuser_master.us_fname
        command.Parameters.Add("@us_lname", SqlDbType.NVarChar).Value = rowuser_master.us_lname
        command.Parameters.Add("@us_pass", SqlDbType.NVarChar).Value = rowuser_master.us_pass
        command.Connection = myConnection
        command.Transaction = transaction
        command.ExecuteNonQuery()
        transaction.Commit()
    Catch ex As SqlException
        MsgBox(ex.Message)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T09:23:41.970

查询中的问号无效。您需要改用参数名称：

```
command = New SqlCommand("insert into user_master values (@us_user_id, @us_role,@us_fname,@us_lname,@us_pass)", myConnection) 
```

# security - Oauth2 - 客户端凭证流中的长寿命令牌与重新身份验证

> ID：14315777
> 
> 赞同：11
> 
> 时间：2013-01-14T09:22:05.157
> 
> 标签：security, rest, oauth-2.0, access-token, 2-legged

我们已经使用**OAuth2**保护了我们的 REST 服务器，并为我们控制的几个客户端应用程序实现了**客户端凭据**授予类型。现在我们面临的决定是要么让令牌**长期存在**（即它们“永不”过期），要么让客户端**经常**重新验证（取决于刷新令牌的过期时间）。第一个意味着捕获的令牌可能被恶意方使用，第二个意味着经常暴露客户端秘密，然后又可以用来获取令牌。

在资源服务器到客户端服务器身份验证中哪个更安全？如果我们怀疑被盗，令牌和客户端密码都可以失效。显然，所有通信都是通过**https**完成的..

目前我们认为客户端密钥比令牌更强大，因此对于这种两条腿的场景来说，长期存在的令牌应该更好。（对于我们将很快实现的任何三足授权类型，我们更喜欢短期令牌充当用户会话）。

谢谢你的想法！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T18:13:10.367

根据[规范](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.4)，**客户端凭据流**仅允许用于不存在**客户端机密**被盗风险的客户端：

> 客户端凭证授权类型必须仅由机密客户端使用。

因此，如果您将此流程与不受信任平台上的应用程序结合使用，您绝对应该重新考虑这个决定。

在您的平台可信的前提下，无需担心**客户端机密**被盗。然后，您的决定会权衡攻击者可以使用被盗**访问令牌的时间与****重新认证**的额外开销（只有[一次调用](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.4)，但仍然有一点延迟）。当两个参与者都受信任并且您使用良好的传输层安全性来抵御 MITM 攻击时，**重新身份验证步骤本身与暴露您的客户端机密无关。**

另请注意，[不建议](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.4.3)（也没有必要）将**刷新令牌**与**客户端凭据流**一起使用：

> 不应包含刷新令牌。

# c - 在 C 中使用 fork() 和 TCP 连接进行设计

> ID：14315779
> 
> 赞同：1
> 
> 时间：2013-01-14T09:22:08.987
> 
> 标签：c, sockets, tcp, fork

我有一个关于如何设计以下系统的问题：

我的系统由几个监听环境的客户端组成。当超出音频阈值时，他们会将信息发送到服务器，该服务器有孩子在每个连接上监听。服务器需要来自所有客户端的信息来进行必要的计算。

当前，服务器在 UNIX 中工作，并已分叉连接。他们独立工作。

*我想做的是告诉父母（在服务器中）信息已经发送，现在是时候处理它了。我应该怎么做*？

我正在考虑可能的不同方法：

1.  在 Unix 中使用`signal()`以某种方式告诉父母发生了什么事
2.  转换为线程并使用一些等待和通知功能

信号是可取的，但我无法弄清楚如何有效地做到这一点。因为在我的系统中可能会发生以下情况：

*   如果所有客户端都成功地将信息发送到服务器的子节点，我如何以有效的方式告诉父节点我已准备好？不知道/我不确定它将如何处理它们。
*   服务器可能不会收到来自所有客户端的信息。因此，父母必须为所有孩子等待一段时间，但不能太久。所以我猜是某种计时器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:52:08.317

不要使用 fork，也不要使用信号。使用[线程池](http://en.wikipedia.org/wiki/Thread_pool_pattern)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T10:02:32.247

用于孩子和父亲之间的进程间通信的 Unix 域套接字怎么样？

[http://en.wikipedia.org/wiki/Unix_domain_socket](http://en.wikipedia.org/wiki/Unix_domain_socket)

一旦子进程通过 TCP 连接接收到数据，相同的数据将通过 Unix Domain Socket 转发给父进程，并立即通知父进程

# database - Sitecore 分析错误

> ID：14315785
> 
> 赞同：1
> 
> 时间：2013-01-14T09:22:33.637
> 
> 标签：database, analytics, sitecore, sitecore6, sitecore-dms

我无法让 Sitecore Analytics 工作。我有 Sitecore 6.6.0（修订版 121015）并安装了 Sitecore DMS。

1) 当我进入 Sitecore->Marketing Center 时出现错误`XML Parsing Error: no element found`

2) 当我转到 Sitecore-> 内容编辑器时，选择元素并按分析-> 报告我得到错误`You do not have permission to see any item reports`

3) 在内容编辑器中按分析-> 目标时`Cannot use Analytics with a database that has no definition items`出现错误

4）在日志中我看到以下内容：

```
"Exception: System.InvalidOperationException
Message: Cannot use Analytics with a database that has no settings" 
```

5) 如果我更改尝试打开营销中心的 url（将 Marketing%20Center.aspx 更改为 Marketing%20Center/default.aspx），我会收到`Cannot use Analytics with a database that has no definition items`错误消息

6) 我的 Sitecore.Analytics.config 中有这个标签：

```
<setting name="Analytics.DefaultDefinitionDatabase" value="web" /> 
```

我试图从 SQL Management Studio 访问分析数据库，但没有帮助。

此错误的原因可能是什么，以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:56:56.143

您的错误似乎表明数据库缺少数据。您是否使用了本页提供的数据库[http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/Update/6_6_0_rev_121015.aspx](http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/Update/6_6_0_rev_121015.aspx)？

转到上面的链接，向下滚动到**下载 DMS 6.6.0 rev。Sitecore CMS 6.6.0 rev.121015**的 121015并单击SQL Server 下的**下载 DMS 6.6.0 rev.121015 。**将此数据库附加到您的服务器，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:28:08.307

发布您的网站（到网络）。您可能正在尝试分析非实时数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:15:46.897

我没有看到这些错误，但听起来 Sitecore 根本无法访问 Analytics 数据库。您在 ConnectionStrings.config*中*有一个名为“analytics”的连接字符串吗？尝试使用 sa 帐户只是为了确保它不是权限问题。不要忘记将它从 sa 改回来。

*（警告：我还没有使用 DMS，只是*OMS……我可能落后于时代）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T09:36:49.110

我刚刚删除了我之前的答案，因为这是错误的结果，但不是真正的原因......

在 Analytics 代码中，从当前数据库请求 Marketing Center 节点。如果它找不到那个项目（它在主数据库中），你会得到错误。但是如果安全设置阻止匿名用户读取访问，则代码将找不到营销中心项目...

当我是匿名用户时，这就是我发生错误的地方......实际上，当我查看营销中心项目的安全设置时，我发现继承已被阻止，因此阻止了匿名用户的读取访问...... .

有时会发生此错误的另一个原因是当您的生产环境无法访问主数据库时。由于 Analytics 代码使用“主”数据库作为默认定义数据库，除非在配置设置中另有指定，您可以将以下内容添加到 analytics.config：

```
<setting name="Analytics.DefaultDefinitionDatabase" value="web" /> 
```

这样，在没有主数据库的生产环境中，它将回退到 Web 数据库。

希望这可以帮助...

欧文

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-24T16:26:44.530

该问题是由于 Sitecore 无法读取主/Web 数据库中的定义项（取决于`Analytics.DefaultDefinitionDatabase`设置）。

它正在寻找的项目是：

*   `/sitecore/system/Marketing Control Panel`
*   `/sitecore/system/Settings/Analytics`

当请求运行时，用户是`default\Anonymous`. 使用 Access Viewer，确保没有禁用对这些项目的读取访问的安全设置。这包括会产生涓滴效应的父项。

# c++ - 读取二进制文件并将其输出到控制台窗口

> ID：14315786
> 
> 赞同：0
> 
> 时间：2013-01-14T09:22:35.013
> 
> 标签：c++, debugging, binaryfiles

```
 void createtask(char filename[MAX])
{
char filenameb[MAX];
strcpy(filenameb,filename);
strcat(filenameb,".dat");

fstream writeb;
fstream readb;

writeb.open(filenameb,ios::out | ios::binary);

task t;
int nooftask;
cout<<"-----------------------------------"
    <<endl
    <<endl
    <<"Creation of task"
    <<endl
    <<endl
    <<"How many task ?: ";
cin>>nooftask;

cin.clear();
cin.ignore(200,'\n');

for(int i=1;i<=nooftask;i++)
{
    t.task_no=i;

    cout<<endl
        <<"Information for task "
        <<i
        <<endl
        <<endl;

    cout<<"Title for assessment: ";
    cin.getline(t.task_title,200);

    cout<<"Weight (%): ";
    cin>>t.task_weight;

    cout<<"Full mark upon: ";
    cin>>t.task_fullmark;

    cin.clear();
    cin.ignore(200,'\n');

    cout<<"Description: ";
    cin.getline(t.task_descrip,200);

    writeb.write(reinterpret_cast <const char *>(&t), sizeof (t));

    cout<<t.task_descrip
        <<endl
        <<t.task_fullmark
        <<endl
        <<t.task_no;

}

writeb.clear();

writeb.close();

cout<<endl
    <<endl
    <<"The creation of task file is completed"
    <<endl
    <<endl
    <<"The summary of creation"
    <<endl
    <<endl;

//summarytask(readb,filenameb);

    //start
    cout<<"Summary of task"
    <<endl
    <<endl;

    readb.open(filenameb,ios::binary | ios::in);

while (readb.read(reinterpret_cast < char *>(&t), sizeof (t)) ); // problem is here
{
    cout<<endl
        <<endl
        <<t.task_no // programme only output the last record in binary file
        <<endl
        <<t.task_title;//

}

readb.close();
//end

} 
```

一切正常，除了我似乎无法将二进制文件中的所有记录输出到控制台窗口。由于某种原因，我只能输出二进制文件中的最后一条记录，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:48:52.267

我补充说；

```
while (readb.read(reinterpret_cast < char *>(&t), sizeof (t)) ); // there shouldnt
//be a ; after the while 
```

# javascript - 如何为 mediaelement.js 创建皮肤？

> ID：14315787
> 
> 赞同：1
> 
> 时间：2013-01-14T09:22:38.650
> 
> 标签：javascript, jquery, html, css, mediaelement.js

我之前使用过jPlayer，播放器的html标记直接在页面源中，我现在正在尝试mediaelement.js，我编写了我的音频播放器（html/css）但我不知道如何正确使用它使用 mediaelement.js 的方式。

因此 mediaelement.js 将 html 标记添加到所有音频和视频标签：

```
$('audio,video').mediaelementplayer(); // using the jQuery version 
```

所以获取玩家标记的唯一方法是使用 chrome 开发者工具检查元素并复制它。

但这是为 mediaelement 制作皮肤的正确方法吗？我认为一定有更好的方法，我不知道。

我搜索但找不到任何指南，我在stackoverflow上找到了这个：

[滚动自定义控制按钮](https://stackoverflow.com/questions/8059843/rolling-custom-control-buttons/8357389#8357389)

并提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:37:26.373

实际上，使用 chrome 开发人员工具检查元素是赋予样式的简单方法。在最坏的情况下，您可以覆盖它。

另一方面，我不得不建议你使用 mode:shim 来支持浏览器

```
 $('audio,video').mediaelementplayer({
    mode:'shim',
    startVolume: 0.8,
    loop: false,
    features: ['playpause','duration','volume'],
    success: function(player, node) {
    //success codes here
    }
}); 
```

# php - 如何在简单的 REST api 中实现负载均衡？

> ID：14315788
> 
> 赞同：1
> 
> 时间：2013-01-14T09:22:47.387
> 
> 标签：php, apache, cakephp, load-balancing

我有用 CakePHP 编写的简单 REST api（apache 上的 php）。基本上它只有一个端点，比方说`/api/something/?format=json`。调用此端点不会从 DB 读取任何内容，但在内部它正在获取和解析一些外部网站，并将解析后的数据以 json 格式返回给用户。问题是从外部网页获取和解析数据可能会持续很长时间，因此我需要一些负载平衡机制，它将在多个服务器之间分配 api 调用。

我从来没有做过任何负载平衡，所以我什至不知道在哪里寻找信息——我正在寻找最简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:29:03.893

它是必须实时获取的资源吗？因为您可以将处理后的数据缓存一段时间。

如果它必须是实时的，那么以分布式方式执行它可能无法解决您的问题。（除非您要取回非常大的数据集）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T19:12:57.207

[http://en.wikipedia.org/wiki/Load_balancing_(计算)](http://en.wikipedia.org/wiki/Load_balancing_(computing))

它很晚，但我想这就是你需要的！只需获得硬件来做所有好事！

# c# - 调整图像的字节 []

> ID：14315792
> 
> 赞同：3
> 
> 时间：2013-01-14T09:22:59.117
> 
> 标签：c#

从文件对话框读取后，我想调整图片大小。我已经完成了以下代码。现在我想调整图片流的大小。我该怎么做？

```
Stream stream = (Stream)openFileDialog.File.OpenRead();
byte[] bytes = new byte[stream.Length]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T10:23:04.110

无需声明 a `byte[]`，即可调整图像大小，只需使用

```
Image image = Image.FromFile(fileName); 
```

检查[this other answer](https://stackoverflow.com/questions/6501797/resize-image-proportionally-with-maxheight-and-maxwidth-constraints)以查看如何缩放图像

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T10:27:49.027

尝试这个

```
 public static Image ScaleImage(Image image, int maxWidth, int maxHeight)
    {
        var ratioX = (double)maxWidth / image.Width;
        var ratioY = (double)maxHeight / image.Height;
        var ratio = Math.Min(ratioX, ratioY);

        var newWidth = (int)(image.Width * ratio);
        var newHeight = (int)(image.Height * ratio);

        var newImage = new Bitmap(newWidth, newHeight);
        Graphics.FromImage(newImage).DrawImage(image, 0, 0, newWidth, newHeight);
        return newImage;
    } 
```

用法

```
 Image img = Image.FromStream(stream);
        Image thumb = ScaleImage(img);
        stream.Close();
        stream.Dispose();
        stream = new MemoryStream();
        thumb.Save(stream, System.Drawing.Imaging.ImageFormat.Png); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-09T13:49:15.180

我有一个图片框。我加载图像，调整大小并转换为字节，最后发送到 sqllite。也许对你来说可能是 hlepfıull 代码如下。

```
private static byte[] byteResim = null;

    private void btnResimEkle_Click(object sender, EventArgs e)
    {
        openFileDialog1.Title = "Resimdosyası seçiniz.";
        openFileDialog1.Filter = "Resim files (*.jpg)|*.jpg|Tüm dosyalar(*.*)|*.*";
        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {

            string resimYol = openFileDialog1.FileName; // File name of the image

            picResim.Image = Image.FromFile(resimYol);// picResim is name of picturebox
            picResim.Image = YenidenBoyutlandir(new Bitmap(picResim.Image)); //this method resizing the image
            Image UyeResim = picResim.Image;   // and this four block converting to image to byte
            MemoryStream ms = new MemoryStream();
            UyeResim.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
            byteResim = ms.ToArray();  // byteResim  variable format  Byte[]

        }
    }

    Image YenidenBoyutlandir(Image resim)// resizing image method 

    {
        Image yeniResim = new Bitmap(150, 156);
        using (Graphics abc = Graphics.FromImage((Bitmap)yeniResim))
        {
            abc.DrawImage(resim, new System.Drawing.Rectangle(0, 0, 150, 156));
        }
        return yeniResim;
    } 
```

# java - 如何通过 Gson 解析 podupti.me 的 json？

> ID：14315793
> 
> 赞同：0
> 
> 时间：2013-01-14T09:23:01.800
> 
> 标签：java, json, gson

如何通过 Gson解析这个[json ？](http://podupti.me/api.php?key=4r45tg&format=json)

这是我的[PodModel.class](http://paste.ubuntu.com/1530380/)

这是[我](http://paste.ubuntu.com/1530398/)用来检索 json 的。

这是gson部分。

```
 gson = new Gson();
    PodsModel pods = gson.fromJson(builder.toString(), PodsModel.class);
    System.out.println(pods.getPods().getDomain()); 
```

Logcat 返回：[logcat-output](http://paste.ubuntu.com/1530392/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:28:44.517

看来，`Gson`这里失败了：

```
"pods":[{"id":
       ^ 
```

这`[`是出乎意料的，因为在您的模型`PodModel` `pods`字段中是普通字段，而不是数组。

可能您必须`pods`通过数组更改为，在这种情况下，您将能够解析此类`json`.

**UPD：**只需将`pods`定义更改为这个：

`private List<ItemPod> pods;`

*   根据 getter 和 setter 的方式进行更改。

该解决方案应该可以工作（经过测试）。

# javascript - 修改元素选择部分的光标属性

> ID：14315795
> 
> 赞同：2
> 
> 时间：2013-01-14T09:23:06.757
> 
> 标签：javascript, jquery, html, css

我有这个 HTML，它呈现一个指向右侧的简单箭头符号：

```
<!DOCTYPE html>
<html>
<head>
<style>
div { width: 0px; height: 0px; border-left: 20px solid black; border-top: 20px solid transparent; border-bottom: 20px solid transparent; border-right: 20px solid transparent; position: absolute; left: 35px; top: 53px; cursor: pointer; }
</style>
<body>
<div></div>
</body>
</html> 
```

如果您将鼠标悬停在它上面，则光标将变为指针。但是因为它实际上是一个正方形`div`，所以即使您刚好在箭头周边的箭头之外，光标也会变成指针`div`。

所以我写了这个 Javascript 添加，只有当鼠标悬停在那个箭头上时光标才会变成指针。为此，我从 Firebug 中计算出三角形三个顶点的坐标（`(35,53)`, `(55,73)`，`(35,93)`从顶部顺时针方向）。然后我检查有问题的点是否位于由这 3 个顶点形成的三角形内。我通过检查每条边的点和相对顶点是否位于该边的同一侧来做到这一点（如果确实如此，则通过用该点的坐标代替`x`和`y` 在该方程中获得的值的乘积将是积极的）。

```
<!DOCTYPE html>
<html>
<head>
<style>
div { width: 0px; height: 0px; border-left: 20px solid black; border-top: 20px solid transparent; border-bottom: 20px solid transparent; border-right: 20px solid transparent; position: absolute; left: 35px; top: 53px;  }
.hoverclass { cursor: pointer; }
</style>
<script src="jquery.js">
</script>
<script>
$(document).ready(function(){
$("div").click(function(e) { alert(e.pageX + " " + e.pageY); });
function l1(x,y) { return y - x - 18; }
function l2(x,y) { return x+y-128; }
function l3(x,y) { return x-35; }
$("div").hover(function(e) {
var x = e.pageX;
var y = e.pageY;
if (l1(x,y)*l1(35,93) >= 0 && l1(x,y)*l1(35,93) >= 0 && l1(x,y)*l1(35,93) >= 0 ) {
$(this).addClass('hoverclass');
}
else { $(this).removeClass('hoverclass'); }
},
function() {
$(this).removeClass('hoverclass');
});
});
</script>
<body>
<div></div>
</body>
</html> 
```

然而，结果是不可预测的。有时光标只在三角形内转动指针，有时也在三角形外（就像以前一样），有时根本不转动。我怀疑这可能是由于`hover`函数超时工作，可能会暂时挂起脚本。有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:50:09.647

这可以使用 HTML5 画布来完成。基本思想是检查画布元素上 mousemove 上的像素颜色。这样，您的元素可以是您希望的任何形式。当然，您应该对以下代码进行一些优化：

[查看工作演示](http://jsfiddle.net/n4V7T/2/)

```
 function findPos(obj) {
    var curleft = 0, curtop = 0;
    if (obj.offsetParent) {
        do {
            curleft += obj.offsetLeft;
            curtop += obj.offsetTop;
        } while (obj = obj.offsetParent);
        return { x: curleft, y: curtop };
    }
    return undefined;
}

// set up triangle
var example = document.getElementById('example');
var context = example.getContext('2d');
context.fillStyle   = '#000';
context.strokeStyle = '#f00';
context.lineWidth   = 1;

context.beginPath();
// Start from the top-left point.
context.moveTo(10, 10); // give the (x,y) coordinates
context.lineTo(60, 60);
context.lineTo(10, 120);
context.lineTo(10, 10);

// Done! Now fill the shape, and draw the stroke.
// Note: your shape will not be visible until you call any of the two methods.
context.fill();
context.stroke();
context.closePath();

$('#example').mousemove(function(e) {
    var pos = findPos(this);
    var x = e.pageX - pos.x;
    var y = e.pageY - pos.y;
    var coord = "x=" + x + ", y=" + y;
    var c = this.getContext('2d');
    var p = c.getImageData(x, y, 1, 1).data;
    if(p[3]!='0') $(this).css({cursor:'pointer'});
    else $(this).css({cursor:'default'});
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:39:29.003

你最好改用 CSS。使用 :before 和 :after 伪类，你可以变魔术。查看 Nicolas Gallagher 的这个[Pure CSS GUI 图标](http://nicolasgallagher.com/pure-css-gui-icons/)。

如果您使用任何 CSS 预处理器，这些图标可以包装为一个 mixin，这样可以像这样分配所需的属性：

```
#icon > .close(16px, #fff, #E83921); 
```

![结果](../Images/9a6b5f4f58df801a44d4c63ac0bbe1b5.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T10:26:00.243

您可以仅使用 CSS 使任何形状具有光标指针。这个想法是旋转具有的包装容器`overflow: hidden`（根据您需要的形状，您可以拥有其中的几个）。如果出现 OP 问题，此代码会起到作用：

```
<div class="arrow"><i></i></div>

.arrow {
  margin: 100px;
  border_: 1px red solid;
  width: 40px;
  height: 40px;
  overflow: hidden;
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
}
.arrow i {
  height: 65px;
  width: 65px;
  background-color: green;
  content: '';
  display: block;
  cursor: pointer;
  margin: -35px 0 0 11px;
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
} 
```

请参阅此演示：[http ://cssdesk.com/PaB5n](http://cssdesk.com/PaB5n)

确实，这需要 CSS 转换支持，因此它不是跨浏览器。

# asp.net-mvc - MVC 4 - 如何将数据保存/更新到多个表中？

> ID：14315798
> 
> 赞同：0
> 
> 时间：2013-01-14T09:23:16.620
> 
> 标签：asp.net-mvc, asp.net-mvc-4

有人可以帮助我如何使用 ViewModel 将数据（从视图）更新到多个数据库表中吗？

我有一个看起来像这样的 ViewModel：

```
public class myViewModel
{
    public int tbl_master_id{ get; set; }   
    public int tbl_details_id {get; set;}     
    public string case_number{ get; set; }
    public string claim_num{ get; set; }
} 
```

[注意：case_number 属于 tbl_master，而 claim_num 属于 tbl_details 表]

我能够检索数据（来自多个表）并将其显示到视图中。但是，现在我被困在如何用新数据更新上述表格。大多数示例是 1-1 关系映射是自动的，但在这种情况下，数据属于多个表。

做这个的最好方式是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:37:16.937

您的控制器应该有一个标有`[HttpPost]`接受的操作方法`myViewModel`，在您的控制器中，您可以根据需要执行代码以保存数据。如果您有多个表，这将需要多次更新或插入。

```
[HttpPost]
public ActionResult Index(myViewModel model) {

    if (ModelState.IsValid) {
        // do your database updates.
    }

    return View(model);
} 
```

# javascript - 使用 jQuery 在高分辨率和低分辨率图像之间切换

> ID：14315799
> 
> 赞同：0
> 
> 时间：2013-01-14T09:23:20.367
> 
> 标签：javascript, jquery, html

我的页面上有一个 div，里面有一个图像，单击 div 展开，我将图像交换为相应的高分辨率版本。

我正在使用以下内容进行此操作...

```
$('.work-showcase').click(function(){
    if ( !$(this).hasClass('active') ){
        var img = $(this).find('ul li img');
        img.attr('src', function(i, value) {
            return '_includes/images/work/hires/' + value;
        });
    } else { 
        var img = $(this).find('ul li img');
        img.attr('src', function(i, value) {
            return '' + value;
        });

    };
}); 
```

我的问题是最后一部分但是我需要删除 ''_includes/images/work/hires/''

有人可以推荐一个解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:27:06.130

您需要删除附加的路径才能恢复以前的 url，您可以使用[replace()](http://www.w3schools.com/jsref/jsref_replace.asp)删除附加的路径。

改变

```
 return '' + value; 
```

至

```
 return  value.replace('_includes/images/work/hires/', ''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:27:31.040

```
var path = '_includes/images/work/hires/';
$('.work-showcase').click(function(){
    if ( !$(this).hasClass('active') ){
        var img = $(this).find('ul li img');
        img.attr('src', function(i, value) {
            return path + value;
        });
    } else { 
        var img = $(this).find('ul li img');
        img.attr('src', function(i, value) {
            return value.substring(path.length);
        });

    };
}); 
```

这里是关于 substring() 的文档[http://www.w3school.com.cn/js/jsref_substring.asp](http://www.w3school.com.cn/js/jsref_substring.asp)。

# c# - 使用带有 P/Invoke 的 ref 结构或类

> ID：14315801
> 
> 赞同：8
> 
> 时间：2013-01-14T09:23:27.930
> 
> 标签：c#, struct, pinvoke, unmanaged

我知道这个话题在这里讨论过很多次，但我找不到适合我具体情况的答案。

我需要在 C# 中调用一个非托管 C 方法，该方法接受一个结构对象上的指针（我不会流利地说 C：

```
int doStuff(MYGRID* grid, int x); 
```

但是结构本身引用了另一个结构对象：

```
struct MYGRID {

    int hgap;
    int vgap;

    MYIMAGE* image;

}

struct MYIMAGE {

    int res;
    int width;
    int height;

} 
```

而且我还需要像这样直接设置图像指针：

```
MYGRID* pGrid = new MYGRID;
MYIMAGE* pImage = new MYIMAGE;
pGrid->image = pImage; 
```

所以，我的问题是：在 C# 代码中，我应该使用“struct”对象并像 P/Invoke Interop Assistant 建议的那样通过“ref”传递它吗？这意味着以下代码：

```
MyGrid myGrid = new MyGrid();
MyImage myImage = new MyImage();

myGrid.image = Marshal.AllocHGlobal(Marshal.SizeOf(image)); // A IntPtr in my struct
myGrid.image = Marshal.StructureToPtr(image, myGrid.image, false);

doStuff(ref myGrid, 0); 
```

或者我可以使用“类”而不是“结构”来获得非常简单的以下代码：

```
MyGrid myGrid = new MyGrid();
MyImage myImage = new MyImage();

myGrid.image = myImage;

doStuff(myGrid, 0); 
```

在第一种情况下，我在 struct MyGrid 中使用“IntPtr”，在第二种情况下只使用 MyImage 对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T10:26:26.983

不要将 C# 结构与 C++ 结构混淆。它们不是同一件事。AC# struct 用于声明值类型。当您聚合另一种类型的值类型时，您将其直接存储在包含实例中，而不是存储对存储在堆上的实例的引用。C++ 结构只是一个类，默认情况下所有成员都是公共的。

在您的情况下，因为`MYGRID`包含指向 的指针`MYIMAGE`，所以您应该`class`像在第二个示例中那样使用。但是，应该删除`ref`on参数。`myGrid`

下面是我测试过的一些示例代码。C++ 代码：

```
#include "windows.h"

struct MYIMAGE {

  int res;
  int width;
  int height;

};

struct MYGRID {

  int hgap;
  int vgap;

  MYIMAGE* image;

};

extern "C" __declspec(dllexport) int doStuff(MYGRID* grid, int x) {
  return 0;
} 
```

声明 C# 类和外部函数：

```
[StructLayout(LayoutKind.Sequential)]
class MyGrid {

  public int hgap;
  public int vgap;

  public IntPtr image;

}

[StructLayout(LayoutKind.Sequential)]
class MyImage {

  public int res;
  public int width;
  public int height;

}

[DllImport("MyDll")]
static extern int doStuff(MyGrid grid, int x); 
```

调用外部函数：

```
MyImage image = new MyImage();

MyGrid grid = new MyGrid();
grid.image = Marshal.AllocHGlobal(Marshal.SizeOf(typeof(MyImage)));
Marshal.StructureToPtr(image, grid.image, false);

doStuff(grid, 0); 
```

如果在 C# 项目中打开非托管调试，则可以使用调试器单步执行 C++ 函数并验证类是否已正确封送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T07:09:22.727

下面是我的测试代码，大家可以参考。

时间：2019-04-01 标签：c#code-struct

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
struct Items
{
    public double item1;
    public double item2;
} 
```

时间：2018-10-10 标签：c#code-callerclass

```
class ItemManager
{
    [DllImport("CppLibrary.dll")]
    private static extern double Sum_(ref Items items);

    public static double Sum(Items items)
    {
        return Sum_(ref items);
    }
} 
```

c++ cpp

```
double ItemManager::Sum(Items items)
{
    return items.item1 + items.item2;
} 
```

C++ 头文件

```
class Items
{
public:
    double item1;
    double item2;
};

class ItemManager
{
public:
    static double Sum(Items items);
};

extern "C" __declspec(dllexport) 
    double Sum_(Items * items)
{
    return ItemManager::Sum( * items);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T09:58:55.700

不，如果 MyImage 是一个类，那么 MyGrid.image 将是一个托管引用，这与指针不同。

# ios - UITextView 使键盘永久化？

> ID：14315809
> 
> 赞同：1
> 
> 时间：2013-01-14T09:24:06.073
> 
> 标签：ios, objective-c, uitextview, uikeyboard

我有两个`UITextViews`合一的用户界面，其中一个`UITextView`是第一响应者。另一个`UITextView`是不可编辑的。当我双击 non-editable`UITextView`时，键盘消失了，我想避免这种情况。他们的键盘应该永远留下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:56:50.730

使您的 viewController 成为 textView 的委托并`NO`从[UITextViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextViewDelegate_Protocol/Reference/UITextViewDelegate.html)方法返回`textViewShouldEndEditing:`

```
- (BOOL)textViewShouldEndEditing:(UITextView *)textView {
    if (textView == self.editableTextView) {
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:53:15.183

如果双击文本视图，它会显示带有剪切、复制等选项的 UIMenuController。

因此，要满足您的要求，请将 User Interaction 属性设置为 NO (False)。

希望这是您正在寻找的。

-Mrunal

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:46:29.813

这不是默认行为。为了达到您的要求，请尝试使用 delagate 方法`shouldChangeTextInRange`并使您的 textview 可编辑

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //nonEditingTextView.editable = NO; 
    //make the nonEditingTextView editable
}

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    if ( textView == nonEditingTextView ) {
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T11:49:42.377

```
//Firstly add the below code for keyboard notification into your viewdidload method.

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keybordWillHide:) name:UIKeyboardWillHideNotification object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keybordWillShow:) name:UIKeyboardWillShowNotification object:nil];

//Let the two textview's names be, NonEditable and Editable

//declare a flag globally
bool Appearflag;

//Then implement the two methods as follows

-(void)keybordWillHide:(NSNotification *)notification

{

    if ([NonEditable isFirstResponder] && Appearflag)
    {
        [Editable becomeFirstResponder];
    }else if ([Editable isFirstResponder])
    {
        Appearflag = NO;
    }
}

-(void)keybordWillShow:(NSNotification *)notification

{

    if ([Editable isFirstResponder])
    {
        Appearflag = YES;
    }
} 
```

# python - Twisted：ConnectionPool 重新连接到不同的数据库

> ID：14315815
> 
> 赞同：0
> 
> 时间：2013-01-14T09:24:24.683
> 
> 标签：python, python-2.7, twisted

我有继承自 twisted.enterprise.adbapi.ConnectionPool 类的 ConnPool 类。

```
class ConnPool(ConnectionPool):
    def __init__(self):  
        ConnectionPool.__init__(self, 'MySQLdb', address, user,pass, MYSQL_DB, charset='utf8', use_unicode=True, cp_min=1, cp_max=MAX_CONNECTION, cp_reconnect=True) 
```

它适用于一个数据库连接。但是，我希望它在连接丢失时连接另一个数据库。

已完成连接丢失检测，但在这种情况下我无法管理 ConnPool 类来连接另一个数据库。

当特定事件发生时，我尝试重新初始化 ConnectionPool 类，但它不起作用。

任何想法/解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:22:41.920

看看`ConnectionPool.connect`，有没有你应该注意的地方。`adbapi`没有提供这种情况的逻辑，实现一些非常愚蠢的东西并不难，但需要更多注意的是行为。例如，`ConnectionPool`当所有服务器都关闭时如何反应？

这里只是一个愚蠢的实现：

```
class ArgumentPool:

    def __init__(self, connargs, connkw):
        assert len(connargs) == len(connkw)
        self.connargs = connargs
        self.connkw = connkw

    def next(self):
        while 1:
            for args, kwds in zip(self.connargs, self.connkw.values()):
                yield args, kwds

class RRConnectionPool(adbapi.ConnectionPool):

    def __init__(self, dbapiName, ap):
        adbapi.ConnectionPool.__init__(self, dbapiName)
        self.ap = ap

    def connection(self):
        # ...
        args, kwds = self.ap.next()
        conn = self.dbapi.connect(*args, **kwds)
        # ... 
```

# reverse-engineering - Erwin 能否在逆向工程期间“猜测”关系（db 中没有定义 PK/FK）

> ID：14315818
> 
> 赞同：1
> 
> 时间：2013-01-14T09:24:35.413
> 
> 标签：reverse-engineering, data-modeling

我们正在着手一个遗留数据迁移项目，在更好地理解我们的源数据库的过程中，我们正在尝试从中构建一个数据库模型。

我们没有关于数据库中主键/外键的任何信息。我们仍在挖掘 COBOL 代码以更好地了解业务。

然而，在我们建立数据库模型的过程中，我们正在尝试看看 ErWin 或 PowerDesigner 等工具是否可以帮助我们“猜测”基于列名等的关系。我下载了社区版，并尝试逆向工程过程，看看我们是否可以获得一些有价值的输出，然后我去问我的经理申请购买该工具。

到目前为止，我还没有取得任何成功。尝试了询问使用索引/名称查找关系的选项，在那里选择了名称，但到目前为止还没有。

有没有可能，但我错过了什么？是否完全可以根据列名猜测关系？任何其他工具都可以完成这项工作吗？

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:12:36.350

您应该能够从 DB2 表直接逆向工程到 ERWIN。

您只需连接到 DB2 或获取 z/Os dba 即可为您提供 DDL。

当您需要的所有信息都在 DB2 目录表中时，我认为猜测关系并不是一个好主意。与您交谈 DBA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:06:06.457

您能否提供更多信息/示例。在 Cobol 中，通常有一个命名约定（例如，一个 Table-Id 包含在字段名称开头/结尾的字段名称中）在这种情况下

```
T1234_Product_code 
```

相当于

```
T1323_Product_ID
T1245_Product_Code 
```

我建议调查（如果您还没有）任何命名约定。

# ios - Cocos2d：平滑的“雾”/“烟雾”动画，只有几帧，有可能吗？

> ID：14315819
> 
> 赞同：0
> 
> 时间：2013-01-14T09:24:42.090
> 
> 标签：ios, animation, cocos2d-iphone

我正在制作一些行星的动画。每个星球都有不同的雾。每个雾对应于具有相同行星大小（例如 100pixels*100pixels）的 3/4 图像序列。

我想要实现的是一个平滑的动画，雾逐渐扩展，然后反转到原始大小（例如fogA，fogA扩展，fogA消失而fogB淡入，fogB扩展，fogB消失而fogC淡入，等等...... ）。

问题是，这样做的唯一方法似乎是为每个雾帧设置一个精灵子项（例如，fogA 的子项，fogB 的子项等）。然后是的，我可以将 ScaleTo 动作和 CCFadeOut/In 应用到每个孩子，但是没有办法将它们放在动作的 CCSequence 中，因为 CCSequence 不接受其他 CCSequence 对象作为“有限动画”。我猜是因为 CCSequence 不是有限动画。

有人会对此有一个好的解决方案吗？这是由三个不同图像组成的“雾”的表示。这个想法是让第一个精灵逐渐扩大，然后被第二个精灵取代，第二个精灵也将逐渐扩大，最后被第三个精灵取代，第三个精灵将扩大然后开始反转循环（缩小，精灵 B 开始减小到初始大小，然后淡出，而精灵 A 淡入并变为原始大小 - 循环永远重复）。

![我想要达到的目标](../Images/770fa7f8fdecb04b8462a8ded087ee65.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:52:16.603

你能不使用粒子发射器来做到这一点吗？

您可以更改发射器的大小和形状以增加/减少雾量。

改变粒子的大小和寿命/出生率以增加/减少雾的强度等......

您不需要太多的粒子运动，只需要轻微的运动和随着时间的推移而逐渐消失。

# c# - 从 http 切换到 https 时丢失 cookie

> ID：14315820
> 
> 赞同：1
> 
> 时间：2013-01-14T09:24:47.297
> 
> 标签：c#, http, cookies, https

我可以在我的网站中选择更改语言。

当用户更改语言时，它会保存在 cookie 中，以便其他页面知道显示哪种语言！

有些页面在https中。在这些页面中，我没有得到选择的语言。

有什么方法可以为`http`and使用相同的 cookie`https`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T09:29:36.510

您可以尝试将 cookie 设置为 secure = false

请参阅[http://msdn.microsoft.com/en-us/library/system.web.httpcookie.secure.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcookie.secure.aspx)

[如何在 http 和 https 之间共享 asp.net 会话](https://stackoverflow.com/questions/567535/how-can-i-share-an-asp-net-session-between-http-and-https)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T09:29:20.363

不，没有。cookie 在域中是本地的，并且 http 和 https 页面被认为在不同的域中。

https 页面是加密的，因此为 http 请求发送相同的 cookie 会泄漏该信息，并危及加密。

# windows - 在 64 位环境下使用 vim

> ID：14315821
> 
> 赞同：0
> 
> 时间：2013-01-14T09:24:48.207
> 
> 标签：windows, vim, 64-bit, uac

我在我的系统上安装了**windows8 。****然后我在程序文件 (x86)**
中安装了 VIM 。

 **我注意到我必须始终以管理员身份运行 VIM 才能修改文件。
我解决了这个*右键单击 gvim.exe --> 属性 --> 兼容性 --> 以管理员身份运行该程序的问题*。
这是正确的方法吗？
你是如何解决这个问题的？

每次启动 vim 时，我仍然会收到 UAC 提示。
有没有办法避免这个提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T12:18:38.803

运行 Vim 不需要管理员权限。（除非你编辑系统文件或更新 Vim 的运行时本身。）

看起来 Vim 想要修改其运行时目录中的某些内容，这会导致 Windows 显示 UAC 提示符。您是否`vimfiles`在用户目录中创建了一个文件夹？`C:\WINDOWS`Vim 是在 中还是在某个地方启动`C:\Program Files (x86)\`？尝试更改启动 Vim 的快捷方式以将工作目录更改为您的用户目录。

如果要更改 Vim 的运行时文件，请创建一个用户特定的 vimrc，`C:\Users\<username>\_vimrc`而不是编辑 Vim 提供的文件（对于其他文件，如`menu.vim`; 将它们放入`C:\Users\<username>\vimfiles\...`）；这样，你就有了干净的分离，避免了升级 Vim 时出现的问题，并且不会得到 UAC 提示。**

# java - Shiro 独立应用程序

> ID：14315824
> 
> 赞同：0
> 
> 时间：2013-01-14T09:24:59.927
> 
> 标签：java, spring, shiro

这是我的 META-INF/spring/beans.xml

```
<bean id="securityManager" class="org.apache.shiro.mgt.DefaultSecurityManager" />

<bean id="lifecycleBeanPostProcessor" class="org.apache.shiro.spring.LifecycleBeanPostProcessor"/>

<!-- Enable Shiro Annotations for Spring-configured beans.  Only run after -->
<!-- the lifecycleBeanProcessor has run: -->
<bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="staticMethod" value="org.apache.shiro.SecurityUtils.setSecurityManager"/>
    <property name="arguments" ref="securityManager"/>
</bean> 
```

当我尝试测试它时：

```
public static void main(String[] args) throws Exception {

    SecurityUtils.getSecurityManager()

} 
```

我收到了这个错误：

```
org.apache.shiro.UnavailableSecurityManagerException: No SecurityManager accessible to the calling code, either bound to the org.apache.shiro.util.ThreadContext or as a vm static singleton.  This is an invalid application configuration. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T01:21:38.717

您必须先创建一个 Spring 环境，然后才能引用其中定义的对象。这是在 Spring Web 应用程序中自动为您完成的，但如果您有一个独立的应用程序（如上所述），您必须自己启动 Spring。

试试这个：

```
import org.apache.shiro.mgt.SecurityManager;
...

public static void main(String[] args) throws Exception {

    String resource = "/META-INF/spring/beans.xml";

    ClassPathXmlApplicationContext appCtx = 
        new ClassPathXmlApplicationContext(resource);

    SecurityManager securityManager = 
        (SecurityManager)appCtx.getBean("securityManager");

    SecurityUtils.setSecurityManager(securityManager);

} 
```

# c - 空指针取消引用错误，而指针最近不为空

> ID：14315825
> 
> 赞同：0
> 
> 时间：2013-01-14T09:24:59.790
> 
> 标签：c, linux-kernel

我正在编写 Linux 内核模块并且遇到了一些问题：我的模块在检查这些指针值后落入点

```
static struct area_control {
    struct list_head head;
    unsigned long addr;
    unsigned long jiffies;
    struct area_part *part;
} *const_areas = NULL, *var_areas = NULL;

static struct area_control *Find_Area(unsigned long addr, struct area_control *first_area)
{
    if (first_area)
    {
        struct area_control *cur_area = first_area;
        while ( 1 ) 
        {
            if (!cur_area) return NULL;
            if (cur_area->addr == addr)
            {
                cur_area->jiffies = jiffies;
                return cur_area;
            }
            cur_area = list_entry(cur_area->head.next, struct area_control, head);
            if (cur_area == first_area) return NULL;
        }
    }
    return NULL;
} 
```

`cur_area->head.next` 因为 cur_area 是 NULL ，所以在点 模块下降！- 这个事实是我从调用跟踪和反汇编程序中得到的。适用于 Linux 2.6.34 x86_64 多处理器架构的模块

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:14:21.407

```
 cur_area = list_entry(cur_area->head.next, struct area_control, head); 
```

**您还需要检查是否 `cur_area->head.next`是`NULL`。**

使用宏定义：

```
#define list_entry(ptr, type, member) \
((type *)((char *)(ptr) – (unsigned long)(&((type *)0)->member))) 
```

代码将扩展为：

```
 cur_area = ((struct area_control *)((char *)(cur_area->head.next) - (unsigned long(&((struct area_control *)0)->head))) 
```

如您所见，如果`cur_area->head.next`为空，此代码将失败。

# android - Android Activity 不使用 BroadcastReceiver 接收来自 IntentService 的消息

> ID：14315828
> 
> 赞同：0
> 
> 时间：2013-01-14T09:25:27.630
> 
> 标签：android, intentservice

我正在尝试开发一个 android 应用程序来测量网络的 QoS。该应用程序将 UDP 数据包发送到我系统上运行的 UDP 服务器。由于这是一个长时间运行的过程，我在一个扩展 IntentService 的类中实现了 UDP 连接。使用 IntentService 背后的原因是我需要将一些参数传递给服务。我的活动中有一个 BroadcastReceiver，它侦听来自 IntentService 的消息并将其打印出来。我的问题是，虽然 IntentService 运行顺利，但活动没有收到来自它的消息。我是android开发的新手，所以请原谅我缺乏理解，任何指导/建议将不胜感激。我在下面发布了我的代码的某些部分。Logcat 没有显示任何错误。我见过**intent.setAction()**在某些示例中使用了方法，但我不太清楚如何在我的情况下使用它。

BroadcastReceiver（在我的 Activity 类中定义）

```
public class UdpResponseReceiver extends BroadcastReceiver {
 public static final String ACTION_RESP = "com.example.udpmessageclient.intent.action.MESSAGE_PROCESSED";
    @Override
    public void onReceive(Context context, Intent intent) {

        System.out.println(UdpService.PARAM_OUT_MSG);

    } 
```

我已经注册了接收器：

```
IntentFilter filter = new IntentFilter(UdpResponseReceiver.ACTION_RESP);
filter.addCategory(Intent.CATEGORY_DEFAULT);
receiver = new UdpResponseReceiver();
registerReceiver(receiver, filter); 
```

IntentService 类：

```
public class UdpService extends IntentService {

//..variable declarations

public UdpService() {
    // TODO Auto-generated constructor stub
    super("UdpService");
}

@Override
protected void onHandleIntent(Intent intent) {
    // TODO Auto-generated method stub
    host = intent.getStringExtra("host");
    port = intent.getIntExtra("port", 4000);
    pType= intent.getIntExtra("pType", 0);
    delay = intent.getIntExtra("delay", 0);
    msg= intent.getStringExtra("msg");
    broadcastIntent = new Intent();
    broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
    broadcastIntent.addFlags(Intent.FLAG_INCLUDE_STOPPED_PACKAGES); 

    try {
        addr = InetAddress.getByName(host);
        // addr=InetAddress.getLocalHost();
        socket = new DatagramSocket();
        // socket.connect(addr,port);

        System.out.println("\nSocket Connected");
    } catch (Exception e) {
        System.out.println("\nConnection failed");
        return;
    }

    send=true;
    switch (pType) {
    case 0:
        while (send) {
            sendPacket(msg);
        }
    case 1:
        while (send) {
            try {
                Thread.currentThread().sleep(delay);
            } catch (Exception e) {
            }
            sendPacket(msg);
        }
    case 2:
        while (send) {
            int u = want(30);
            String data1 = "";
            while ((u--) > 0)
                data1 = data1 + msg;
            sendPacket(data1);
        }
    case 3:
        while (send) {
            int u = want(30);
            System.out.println(u);
            String data1 = "";
            while ((u--) > 0)
                data1 = data1 + msg;
            System.out.println("data length :" + data1.length());
            try {
                Thread.currentThread().sleep(delay);
            } catch (Exception e) {
            }
            sendPacket(data1);
        }

    }
}
public void onDestroy(){
    super.onDestroy();
    send=false;
    socket.close();
    socket=null;

}
void sendPacket(String text) {

    try {
        System.out.println("\nClient:: Sending packet: " + " to " + addr
                + port);
        byte[] data = text.getBytes();
        spacket = new DatagramPacket(data, data.length, addr, port);
        socket.send(spacket);
        String resultTxt="Sent Packet at:"+DateFormat.format("MM/dd/yy h:mmaa", System.currentTimeMillis());

// this is where I am trying to send message back to the activity

    broadcastIntent.putExtra(PARAM_OUT_MSG, resultTxt);
        sendBroadcast(broadcastIntent);
    } catch (Exception e) {
        System.out.println("Error:" + e.getMessage());
        e.printStackTrace();
        return;
    }
} 
```

}

服务停止时的logcat错误消息：

```
01-14 15:53:41.446: W/System.err(1176): java.lang.NullPointerException
01-14 15:53:41.456: W/System.err(1176):     at com.example.udpmessageclient.UdpService.sendPacket(UdpService.java:123)
01-14 15:53:41.466: W/System.err(1176):     at com.example.udpmessageclient.UdpService.onHandleIntent(UdpService.java:74)
01-14 15:53:41.466: W/System.err(1176):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
01-14 15:53:41.466: W/System.err(1176):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 15:53:41.466: W/System.err(1176):     at android.os.Looper.loop(Looper.java:137)
01-14 15:53:41.476: W/System.err(1176):     at android.os.HandlerThread.run(HandlerThread.java:60) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:39:00.667

将 UdpService 的代码更改为...

```
broadcastIntent = new Intent(UdpResponseReceiver.ACTION_RESP); // You forgot to add your custom intent filter
broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
//broadcastIntent.addFlags(Intent.FLAG_INCLUDE_STOPPED_PACKAGES); // I don't think you really need it. So you can remove this flag. 
```

* * *

***更新***

```
public static final String ACTION_RESP = "com.example.udpmessageclient.intent.action.MESSAGE_PROCESSED";

private final BroadcastReceiver UdpResponseReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {

            //TODO handle results

        }
    }; 
```

并将其注册为

```
registerReceiver(UdpResponseReceiver, new IntentFilter(ACTION_RESP)) 
```

# javascript - 设置焦点出现

> ID：14315834
> 
> 赞同：0
> 
> 时间：2013-01-14T09:25:49.463
> 
> 标签：javascript, addeventlistener

我有一个包含很多 JS 创建元素的页面。所以我希望在它出现后聚焦一个文本区域。我试图在这样的帮助下做到这`addEventListener`一点：

```
mytextarea.addEventListener('someEvent', function(e)
    {
    this.focus();
    }); 
```

我的问题是，当 textarea 附加到文档中时，我找不到正确的事件，此时将触发该事件，就像这里

```
document.getElementsByTagName('body')[0].appendChild(mytextarea); 
```

仅限本机 JS。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:44:50.927

你有没有试过这个：

```
document.getElementsByTagName('body')[0].appendChild(mytextarea);
mytextarea.focus(); 
```

[小提琴](http://jsfiddle.net/QNpjH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:30:59.407

把你`focus`的

```
$(document).ready(function(){
//Here
}); 
```

这意味着您`textarea`的附加到`document`.

并且没有 jQuery ：

```
window.addEventListener('load', function () {
//here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:43:25.840

[这](http://www.w3schools.com/html5/att_textarea_autofocus.asp)应该工作：

```
<textarea autofocus></textarea> 
```

# silverlight - 如何使用 HyperlinkBut ton 执行“HTTP-POST”

> ID：14315837
> 
> 赞同：1
> 
> 时间：2013-01-14T09:26:14.453
> 
> 标签：silverlight, download, http-post, silverlight-5.0, httphandler

我有一个 silverlight 应用程序，用户可以在应用程序中输入 SQL 查询，然后服务器将查询结果作为 Excel 文件返回。

用户单击下载链接，该链接链接到服务器中的 HttpHandler，该 HttpHandler 生成 excel 文件。经过一些研究[1]，我发现使用 HyperlinkBut​​ton 控件是提供文件链接的最可靠方法，而无需浏览器弹出安全设置的麻烦。

我需要将可能很长的 SQL 查询作为参数发送给 HttpHandler。由于大小限制，我无法将其作为查询字符串（HTTP GET）包含在 url 中。

有没有办法用 HyperlinkBut​​ton 进行“HTTP-POST”？

[1] [Browser.HtmlPage.Window.Navigate 被阻止但 HyperlinkBut​​ton 没有 - 为什么？](https://stackoverflow.com/questions/5100890/browser-htmlpage-window-navigate-is-blocked-but-hyperlinkbutton-isnt-why)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T10:00:21.447

在这种情况下，我认为您可以尝试使用 jquery 发送 get/post 请求。

发布请求 API 文档：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

获取请求 API 文档：http: [//api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
function f(){
    $.post("http://www.w3schools.com/jquery/demo_test_post.asp",
    {
      name:"Donald Duck",
      city:"Duckburg"
    },
    function(data,status){
      alert("Data: " + data + "\nStatus: " + status);
    }
)};

</script>
</head>
<body>

<a href="javascript:f()">Send an HTTP POST request to a page and get the result back</a>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:44:39.833

而不是使用链接 为什么只是让按钮看起来像链接。Facebook 是显示为链接的按钮的一个完美示例。它在帖子中有几个按钮，但所有按钮都显示为链接。这是使按钮看起来像链接的Css代码。您可以随时更改链接的外观和感觉（可能是按钮）。

这里是按钮的css代码。

```
button {
    background:none!important;
    border:none; 
    padding:0!important;
    /* Do all your Styling to the Button here. It will look like a link instead. */
} 
```

按钮 HTML 代码。

```
<button>Your Button Here.</button> 
```

希望能解决您的问题。谢谢你。

# actionscript-3 - 缩放影片剪辑时 AS3 内存泄漏

> ID：14315838
> 
> 赞同：0
> 
> 时间：2013-01-14T09:26:18.003
> 
> 标签：actionscript-3

我有一个包含位图和文本字段的影片剪辑。它的内存很大，但没有问题。

当我尝试在每一帧中缩放 Movieclip 并制作补间动画时，就会出现问题。代码很简单：

`actor.scaleX += (targetScale - actor.scaleX) * ANIMATION_SPEED;`

问题是，它会疯狂地泄漏内存。我确信这一行会导致问题，因为当我将其注释掉时，内存泄漏就不再存在了。

有任何想法吗？

# wpf - 除了编辑像素之外，我们还有哪些选项可用于 WPF 和 Windows 应用商店应用程序中的图像颜色编辑？

> ID：14315840
> 
> 赞同：0
> 
> 时间：2013-01-14T09:26:33.067
> 
> 标签：wpf, windows-store-apps

要在 WPF 和 Windows 应用商店应用程序中编辑图像的颜色，我知道我们可以读取图像的像素，编辑它们并将它们写入新的 BitmapSource 或 WriteableBitmap。我怀疑这种技术总是最好的。我们还有哪些其他选项来编辑图像的颜色，比如改变亮度或伽玛？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:00:00.560

您可以访问底层位图缓冲区，从而有效地操作像素。在 WPF 中，您可以使用[`WriteableBitmap`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap%28v=vs.110%29.aspx)该类：

> 为了更好地控制更新以及对后台缓冲区的多线程访问，请使用以下工作流程。
> 
> 1.  调用 Lock 方法为更新保留后台缓冲区。
>     
>     
> 2.  通过访问 BackBuffer 属性获取指向后台缓冲区的指针。
>     
>     
> 3.  将更改写入后台缓冲区。当 WriteableBitmap 被锁定时，其他线程可能会将更改写入后台缓冲区。
>     
>     
> 4.  调用 AddDirtyRect 方法以指示已更改的区域。
>     
>     
> 5.  调用 Unlock 方法以释放后台缓冲区并允许呈现到屏幕上。
>     
>     
> 
> 当更新发送到渲染线程时，渲染线程将更改的矩形从后缓冲区复制到前缓冲区。渲染系统控制这种交换以避免死锁和重绘工件，例如“撕裂”。

在 Windows 应用商店应用中，您可以使用[`WriteableBitmap`](http://msdn.microsoft.com/en-us/library/windows/apps/br243259.aspx)该类：

> **PixelBuffer**不能直接写入，但是，您可以使用特定于语言的技术来访问缓冲区并更改其内容。
> 
> *   要从 C# 或 Microsoft Visual Basic 访问像素内容，可以使用**AsStream**扩展方法将底层缓冲区作为流进行访问。
>     
>     
> *   要从 C++ 访问像素内容，您可以查询**IBufferByteAccess**类型（在 Robuffer.h 中定义）并直接访问其**Buffer**属性。

# ios - 如何使用 Avcapture 设置帧大小

> ID：14315843
> 
> 赞同：1
> 
> 时间：2013-01-14T09:27:02.023
> 
> 标签：ios, ios5, ios4

我是`AVCaptureSession`用来拍照的。这是我的代码：

```
AVCaptureSession * newSession = [[AVCaptureSession alloc] init];

// Configure our capturesession
newSession.sessionPreset = AVCaptureSessionPresetMedium; 
```

我得到了尺寸为 360*480 的图像。但这是我的问题，我想要大小为 280*200 的图像。我对裁剪图像不感兴趣。有什么方法可以设置图像大小`AVCaptureSession`吗？提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:23:47.223

使用 AVCapturePresets，您可以明确地捕捉视频或照片的大小。拍摄照片后，您可以操作（裁剪、调整大小）以适合您想要的尺寸，但您无法设置预定的拍摄尺寸。

有可接受的预设：

```
NSString *const AVCaptureSessionPresetPhoto;
NSString *const AVCaptureSessionPresetHigh;
NSString *const AVCaptureSessionPresetMedium;
NSString *const AVCaptureSessionPresetLow;
NSString *const AVCaptureSessionPreset320x240;
NSString *const AVCaptureSessionPreset352x288;
NSString *const AVCaptureSessionPreset640x480;
NSString *const AVCaptureSessionPreset960x540;
NSString *const AVCaptureSessionPreset1280x720; 
```

来源：[https ://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureSession_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureSession_Class/Reference/Reference.html)

这种方法是我使用的，应该可以帮助您缩放到所需的大小：

```
-(UIImage*)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize;
{
    UIGraphicsBeginImageContext( newSize );
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

初始化会话和设置预设：

```
// create a capture session
if(session == nil){
    session = [[AVCaptureSession alloc] init];
}
if ([session canSetSessionPreset:AVCaptureSessionPreset320x240]) {
    session.sessionPreset = AVCaptureSessionPreset320x240;
}
else {
    NSLog(@"Cannot set session preset");
} 
```

# windows - CBS_DROPDOWN 和 CBS_DROPDOWNLIST 组合框的键盘导航不一致

> ID：14315846
> 
> 赞同：1
> 
> 时间：2013-01-14T09:27:10.010
> 
> 标签：windows, winapi, combobox, usability

组合框以 3 种不同的模式运行：简单、下拉和下拉列表。Dropdown ( `CBS_DROPDOWN`) 和 Dropdown List ( `CBS_DROPDOWNLIST`) 在视觉上非常相似。唯一的区别是下拉列表样式将用户输入限制为下拉列表中可用的选项，而下拉列表样式不对用户输入施加任何限制。

关于键盘导航，它们的操作略有不同：虽然 Dropdown List 样式仅在按下`Arrow Down`键时展开下拉列表，但 Dropdown 样式还允许使用`Arrow Up`键来展开下拉列表。[组合框功能](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775793.aspx#default_behavior "组合框功能 (Windows)")下列出的默认行为说明了如何`WM_KEYDOWN`以不同方式处理消息：

> 处理非字符键盘输入。在下拉列表框中，此消息被发送到列表窗口，它可以显示或隐藏自身，或更改其当前选择或插入索引。在简单的下拉组合框中，此消息被传递给编辑控件。编辑控件将某些键传递给列表窗口，例如向上和向下箭头键和 F4 键。

我的问题：键盘导航中的这种不一致是故意的吗？这个设计决策背后的基本原理是什么，还是仅仅是实施过程中的疏忽？

# c# - 使用 Linq 进行动态查询

> ID：14315847
> 
> 赞同：0
> 
> 时间：2013-01-14T09:27:12.247
> 
> 标签：c#, linq

这是否可以执行以下操作：

```
public class Months
{
    public double Jan {get;set;}
    public double Feb {get;set;}
    public double Mar {get;set;}
} 
```

进而

```
List<Months> myList = new List<Months>();
string monthName = "Jan"; 
```

有可能是这样的吗？

```
myList.where(x=>x.PropertyName.Equals(monthName)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:41:41.480

请注意确定什么是预期值，但这会给您匹配属性的值。

```
List<Months> myList = new List<Months>();
myList.Add(new Months(){ Jan = 2.2});
string monthName = "Jan";
var result = myList.Select(x => x.GetType().GetProperty(monthName).GetValue(x, null)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:38:03.243

你的样本看起来很奇怪。每个`Month`类都有`Jan`属性。

**更新：**

```
public class Months
{
    private readonly IDictionary<string, double> _backfiends;

    public double Jan
    {
        get { return _backfiends["Jan"]; }
        set { _backfiends["Jan"] = value; }
    }

    public IDictionary<string, double> Backfields
    {
        get { return _backfiends; }   
    }

    public Months()
    {
        _backfiends = new Dictionary<string, double>();
        _backfiends["Jan"] = 0;
    }
} 
```

用法：

```
var myList = new List<Months>();
myList.Add(new Months(){Jan = 123});
var withJan = myList.Select(x => x.Backfields["Jan"]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:51:31.707

我建议在这种情况下使用枚举，你可以用枚举做很多事情，我举一个例子：

枚举定义：

```
public enum Month 
{ Jan=1, Feb, Mar, Apr, may, Jun, Jul, Aug, Sep, Oct, Nov, Dec } 
```

在按钮点击：

```
Month current = Month.Jan; //staticly checking a month

if(current == Month.Jan)
    MessageBox.Show("It's Jan");
else
    MessageBox.Show("It's not Jan.");

List<Month> specialMonthes = new List<Month>();
specialMonthes.Add(Month.Oct);
specialMonthes.Add(Month.Apr);
specialMonthes.Add(Month.Jan);
//Search the list for the month we are in now
foreach (Month specialMonth in specialMonthes)
{
    if ((int)specialMonth == DateTime.Now.Month) //dynamically checking this month
        MessageBox.Show(string.Format("It's {0} now & {0} is a special month.",  
            specialMonth));
        //Output: It's Jan now and Jan is a special month.
} 
```

你可以化解，你可以比较，你可以施放。
那么为什么不使用枚举呢？有了车就不用跑了。

# mysqli - 查询是否会按照与请求相同的顺序进入队列（在 mysqli 持久连接中）？

> ID：14315848
> 
> 赞同：0
> 
> 时间：2013-01-14T09:27:30.090
> 
> 标签：mysqli

如果同时在 mysql 上发送数百个通过 mysqli(php extension) Persistent Connection 的查询，查询会按照与请求相同的顺序进入队列运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:37:49.230

> 查询是否会按照与请求相同的顺序进入队列运行？

是的。
不管它是 mysqli 还是持久化都没有关系。

它也不会是“同一时间”。
每个持久连接一次只被一个 PHP 进程使用。这样的过程是按顺序执行的，一个接一个地运行一个查询。

# jquery - 溢出-x 滚动不适用于鼠标滚轮，仅在单击滚动条时有效

> ID：14315853
> 
> 赞同：3
> 
> 时间：2013-01-14T09:27:45.467
> 
> 标签：jquery, html, css

我的问题是我的投资组合页面上使用的水平滚动条。我设法使它工作，除了一件事，它不使用鼠标滚轮滚动....如果我单击并拖动栏它工作得很好。

[你可以在这里](http://hoverallsproblems.design-way.ro/)看到我的项目——点击投资组合页面，它会向下滑动一个带有滚动条的面板。还有我的问题。

我的结构是这样的：

```
 <div id="portfolio"><!--this is the sliding panel-->
  <div id="width"><!--this is the thumb container-->
    <article>  
    </article>
  </div>
 </div> 
```

还有我的 CSS：

```
#portfolio {
     display:none;
     position:absolute;
     width:100%;
     height:400px; // may need to play with this 
     border-bottom:3px solid #CCC;
     top:0px;
     left:0px;
     z-index:99999;
     background-color:#fff;
     box-shadow: 0 0 37px 7px #000;
     overflow-y:hidden;
     overflow-x:scroll;
} 
#width {
    width: 3000px;
    height:320px;
    overflow-y:hidden;
    border:1px solid red;
    float: left;
} 
```

为什么我不能使用鼠标滚轮滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:33:25.610

为了水平滚动，您需要按住键盘上的 shift 键，然后在水平画布上滚动鼠标。它非常适合您设计的网站。

这是一个用于水平滚动的 jquery 链接。

[水平滚动页面](http://css-tricks.com/snippets/jquery/horz-scroll-with-mouse-wheel/)

# jubula - 如何在 jubula 中进行对象映射？

> ID：14315855
> 
> 赞同：2
> 
> 时间：2013-01-14T09:27:54.003
> 
> 标签：jubula

我想测试我的 rcp 应用程序。为此我需要做对象映射。谁能告诉我如何做对象映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T17:40:19.270

基本上你必须添加： - 将
Jubula 插件添加到 RCP 应用程序 -
将 jubula 包添加到 config.ini

参考：[Jubula 参考文档](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jubula.client.ua.help/html/manual/node282.html)

> 设置 RCP AUT 进行测试 如果您想测试富客户端平台应用程序，您必须首先将我们的“RCP 远程控制”插件解压缩到您的 AUT 中。这可以按如下方式完成：
> 
> 1.  找到 Jubula 安装目录。
> 2.  将 rcp-support.zip 文件夹的内容提取到 RCP AUT 的插件目录中。
> 3.  RCP 应用程序通常有一个 configuration/config.ini 文件，其中包含参数 osgi.bundles。可能需要修改此参数以允许 RCP 远程控制插件在 AUT 启动时加载。org.eclipse.update.configurator 插件会自动加载插件目录中的所有插件，这意味着如果 org.eclipse.update.configurator@3:start 已经在 osgi 中定义，则 RCP 远程控制插件应该以 AUT 开头.bundles 参数。否则，您可能需要将 org.eclipse.jubula.rc.rcp 添加到 osgi.bundles 参数的末尾。
> 
> 如果您不按照上述步骤操作，AUT 代理将无法与您的 AUT 通信！

在此之后，添加映射的按钮应该处于活动状态，因为代理能够与 AUT 通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:57:26.767

Jubula 中有一些备忘单，可指导您完成编写和执行测试的基本步骤。在“帮助”菜单的“备忘单”下，您可以打开它们的列表。“第一步”备忘单是基本介绍所需的备忘单。

# php - 如何使用 Coldfusion 将 PHP 中的 MYSQL 查询中的内容转换为 PDF 文档？

> ID：14315856
> 
> 赞同：0
> 
> 时间：2013-01-14T09:27:57.403
> 
> 标签：php, pdf, coldfusion

我需要将使用 PHP 呈现为页面的 MYSQL 数据库中的数据转换为 PDF 文档。

Coldfusion 是我将页面转换为 PDF 的首选武器，因为标签很容易。

Coldfusion 是从它自己的服务器上执行的，而 PHP 是从一个 Apache 服务器上执行的。

我遇到的问题是让 Coldfusion 执行我的 PHP 页面，以便可以将其转换为 PDF，因为它不包括 PHP 支持作为标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:51:50.220

您是否考虑过简单地使用 CFHTTP 请求将 SQL 数据呈现为 HTML 的 PHP 页面？然后，您可以获取生成的 HTML 并将其包装`cfdocument`成您的 PDF。

或者，您可以从 PHP 使用作为 CF 9 及更高版本的一部分包含的 PDF“服务”。在此处查看 WSDL：http://{您的主机名}/CFIDE/services/document.cfc?wsdl

这提供了 cfdocument 作为服务的大部分功能。[这是一个包含一些详细信息的快速链接](http://refcardz.dzone.com/refcardz/leveraging-coldfusion-9)

# ios - AV 基金会捕获图像

> ID：14315857
> 
> 赞同：0
> 
> 时间：2013-01-14T09:28:03.807
> 
> 标签：ios, objective-c

我的基本任务是捕获图像的一部分，然后使用它。为了给你一个概述，我正在创建一个基于 OCR 的应用程序，我允许用户使用相机拍照。但是，我不想处理整个图像，而只希望选择其中的一部分并发送进行处理（最好是矩形）。因此，总而言之，我希望提供一个叠加层，并且我希望进一步使用该叠加层内的图像，而不是整个点击的图像。

现在，根据我的理解，我意识到 AVFoundation 是捕获图像的工具，但是在我的应用程序中我使用了`UIImagePicker`. 我很困惑，因为我是一个新手，不确定继续前进。感谢大家的帮助。再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:48:36.220

iOS 中有很好的 OCR 开源库：

```
https://github.com/nolanbrown/Tesseract-iPhone-Demo 
```

如果图像分辨率为 150 * 150 ，这将最有效。有关其他库的更多信息，您还可以参考 SO 问题：[OCR Lib](https://stackoverflow.com/questions/9062755/ocroptical-character-recoginition-libraries-for-iphone)

# javascript - HTML 表单将我重定向到登录，显示不正确的登录消息

> ID：14315859
> 
> 赞同：-1
> 
> 时间：2013-01-14T09:28:09.103
> 
> 标签：javascript, asp.net, html, forms

我有一个 HTML 表单，通过登录将我重定向到 aspx 页面：

```
<form method="post" action="../login.aspx"> 
```

如果数据正确，一切正常，但是当数据失败时，我需要显示错误消息，我该怎么做？

在 aspx 页面中，当一切正常时，我有一个重定向，但是当登录失败时，您尝试发出警报并重定向到我的 html 页面，但这不起作用，用户转到 html 页面但未显示警报：

```
Response.Redirect("~/Users.aspx"); //here everything is ok
                }
            }
            // if the login is wrong
            else
            {
                Response.Write("<script>alert(the login is wrong);</script>");
                Response.Redirect(Request.UrlReferrer.ToString());
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T09:38:57.800

如果条件错误，请在 c# 代码中插入以下代码

ClientScript.RegisterStartupScript(this.GetType(), "myalert", "alert('Your Alert Message Here');", true);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:10:58.300

像这样尝试你的脚本

```
Response.Write("<script language='javascript'>alert('the login is wrong');</script>"); 
```

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:35:28.557

您的问题不清楚，但我认为您正在 asp.net 中寻找表单验证。你可以很容易地从谷歌搜索它。

但这里有一些方便的教程。我最近在处理表单验证时使用过。

[http://www.codeguru.com/csharp/.net/net_asp/webforms/article.php/c19353/Form-Validation.htm](http://www.codeguru.com/csharp/.net/net_asp/webforms/article.php/c19353/Form-Validation.htm)

[http://weblogs.asp.net/dotnetstories/archive/2011/01/13/validation-in-asp-net-applications.aspx](http://weblogs.asp.net/dotnetstories/archive/2011/01/13/validation-in-asp-net-applications.aspx)

你可以使用它。

希望它会帮助你。

# linux - 根据其他字段编辑txt文件中的特定字段数据

> ID：14315867
> 
> 赞同：2
> 
> 时间：2013-01-14T09:28:39.617
> 
> 标签：linux, bash, shell, ubuntu

我有一个名为 BookDB.txt 的 txt 文件，其中包含以下数据。

```
Little Prince:The Prince:15.00:188:9
Lord of The Ring:Johnny Dept:56.80:100:38
Catch Me If You Can:Mary Ann:23.60:6:2
Happy Day:Mary Ann:12.99:197:101 
```

它用分隔符分隔，以便按标题、作者、价格、QtyLeft 和 QtySold 分组。

这是我的问题，我需要提示输入书名和作者，然后它会检查 BookDB.txt 以找到该书的行并编辑其价格。我该怎么做呢？这是我到目前为止所做的

```
read -p $'Title: '  updatetitle
read -p $'Author: '  updateauthor

#check if book exist in BookDB.txt
if grep -Fq "${updatetitle}:${updateauthor}" BookDB.txt
then
    read -p $'NewPrice: '  newPrice
    #This is the part i'm stuck
else
     echo "Book does not exist"
fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T09:52:56.657

这是另一个解决方案：

```
if grep -Fq "${updatetitle}:${updateauthor}" BookDB.txt
then
    read -p $'NewPrice: '  newPrice
    sed -i -e "s/${updatetitle}:${updateauthor}:[^:]\+/${updatetitle}:${updateauthor}:${newPrice}/g" BookDB.txt
else
     echo "Book does not exist"
fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T09:39:18.380

单程：

```
if grep -Fq "${updatetitle}:${updateauthor}" BookDB.txt
then
    read -p $'NewPrice: '  newPrice
    awk -F: -v title="$updatetitle" -v auth="$updateauthor" -v price=$newPrice '$1==title && $2==auth{$3=price;}1' OFS=":" BookDB.txt >> BookDB.txt_tmp
    mv BookDB.txt_tmp BookDB.txt
else
     echo "Book does not exist"
fi 
```

使用`awk`，更新第三个字段，并将内容复制到一个临时文件中，然后将其重命名回原始文件。

`awk`使用选项传递参数 updatetitle、updateauthor 和 newPrice `-v`。1st( `$1`) 字段根据 updatetitle 进行检查，第二个字段( `$2`) 根据 updateauthor 进行检查，如果它们都匹配，则使用 newPrice( `$3=price`) 更新第三个字段。`1`最后是打印每一行。

**使用 sed(GNU)** : (代替上面的 awk 和 mv )

```
sed -i "s/\(${updatetitle}:${updateauthor}:\)\([^:]*\)\(.*\)/\1${newPrice}\3/" file 
```

# c++ - 使用 UpdateLayeredWindow 将部分透明的 GDI+ 位图绘制到无边框窗口

> ID：14315869
> 
> 赞同：0
> 
> 时间：2013-01-14T09:28:44.743
> 
> 标签：c++, windows, gdi+

我正在尝试创建一个具有半透明像素的非矩形窗口。图像不是来自 PNG，而是使用 GDI+ 调用即时绘制的。

我按如下方式创建窗口：

```
WNDCLASSEX wc = WNDCLASSEX();
wc.cbSize = sizeof(wc);
HINSTANCE instance = GetModuleHandle(nullptr);
std::wstring classname(L"gditest ui window class");

if (!GetClassInfoEx(instance, classname.c_str(), &wc)) {
    //wc.cbSize;
    //wc.style = CS_DROPSHADOW;
    wc.lpfnWndProc = process_messages;
    //wc.cbClsExtra;
    //wc.cbWndExtra;
    wc.hInstance = instance;
    wc.hIcon;
    wc.hCursor = LoadCursor(0, IDC_ARROW);
    //wc.hbrBackground;
    //wc.lpszMenuName;
    wc.lpszClassName = classname.c_str();
    wc.hIconSm;

    if (!RegisterClassEx(&wc))
        throw GetLastError();
}

m_window = CreateWindowEx(WS_EX_APPWINDOW | WS_EX_LAYERED,
    classname.c_str(), L"User Interface",
    WS_VISIBLE,
    CW_USEDEFAULT, CW_USEDEFAULT, 640, 480,
    HWND_DESKTOP, 0, instance, this);

if (!m_window)
    throw GetLastError();

update_window(); 
```

update_window() 函数如下所示：

```
void user_interface::update_window()
{
    RECT r;
    GetClientRect(m_window, &r);

    Bitmap buf(r.right - r.left, r.bottom - r.top, PixelFormat32bppARGB);

    Graphics gfx(&buf);
    Rect rect(r.left, r.top, r.right - r.left, r.bottom - r.top);
    SolidBrush b(Color(0x7f00ff00));
    gfx.FillRectangle(&b, rect);

/*  CLSID clsid;
    UINT numbytes = 0, numenc = 0;
    GetImageEncodersSize(&numenc, &numbytes);

    std::vector<char> encoders(numbytes, 0);
    ImageCodecInfo *encoderptr = (ImageCodecInfo *)&encoders[0];
    GetImageEncoders(numenc, numbytes, encoderptr);

    clsid = encoderptr[4].Clsid;

    buf.Save(L"test.png", &clsid);
*/
    HDC gfxdc = gfx.GetHDC();
    HDC scrndc = GetDC(HWND_DESKTOP);

    BLENDFUNCTION blend;
    blend.BlendOp = AC_SRC_OVER;
    blend.BlendFlags = 0;
    blend.SourceConstantAlpha = 255;
    blend.AlphaFormat = AC_SRC_ALPHA;

    POINT src = POINT(), dst;
    SIZE size;

    GetWindowRect(m_window, &r);
    dst.x = r.left;
    dst.y = r.top;
    size.cx = buf.GetWidth();
    size.cy = buf.GetHeight();

    if (!UpdateLayeredWindow(m_window, scrndc, &dst, &size, gfxdc, &src, 0, &blend, ULW_ALPHA)) {
        throw GetLastError();
    }

    ReleaseDC(HWND_DESKTOP, scrndc);
    gfx.ReleaseHDC(gfxdc);
} 
```

注释的代码将 Bitmap 对象保存为 PNG，我编写它只是为了确认位图绘制正确。

没有错误发生，但是屏幕上的结果不是我想要的。我得到一个几乎不可见的白色方块，而不是一个漂亮的 50% 透明绿色方块：![截屏](../Images/954a676aad8fb055a8b6cbf930a703ea.png)。

另一个奇怪的事情是，点击窗口会落入下面的任何东西，即使它有点明显......

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:34:13.137

通过重写 update_window() 方法自己设法解决了这个问题：

```
void user_interface::update_window()
{
    RECT r;
    GetClientRect(m_window, &r);

    HDC scrndc = GetDC(HWND_DESKTOP);
    HDC memdc = CreateCompatibleDC(scrndc);
    HBITMAP bmp = CreateCompatibleBitmap(scrndc, r.right - r.left, r.bottom - r.top);
    HBITMAP oldbmp = (HBITMAP)SelectObject(memdc, bmp);

    Graphics gfx(memdc);
    Rect rect(r.left, r.top, r.right - r.left, r.bottom - r.top);
    SolidBrush b(Color(0x7f00ff00));
    gfx.FillRectangle(&b, rect);

    BLENDFUNCTION blend;
    blend.BlendOp = AC_SRC_OVER;
    blend.BlendFlags = 0;
    blend.SourceConstantAlpha = 255;
    blend.AlphaFormat = AC_SRC_ALPHA;

    POINT src = POINT(), dst;
    SIZE size;

    size.cx = r.right - r.left;
    size.cy = r.bottom - r.top;

    GetWindowRect(m_window, &r);
    dst.x = r.left;
    dst.y = r.top;

    if (!UpdateLayeredWindow(m_window, scrndc, &dst, &size, memdc, &src, 0, &blend, ULW_ALPHA)) {
        throw GetLastError();
    }

    SelectObject(memdc, oldbmp);
    DeleteObject(bmp);
    DeleteDC(memdc);
    ReleaseDC(HWND_DESKTOP, scrndc);
} 
```

可能不是最有效的方法，但它确实有效。可能会使 HBITMAP、memdc 和 Graphics 对象保留更长时间。弄清楚这一点留给读者作为练习。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T09:59:48.600

UpdateLayeredWindow() 的源位图*必须*与屏幕兼容，否则您的视觉结果取决于硬件。GDI 和 GDIplus 似乎能够绘制到*任何*位图中，但 bitblt 操作通常不能处理不同（即不兼容）的格式。原因是速度。

不幸的是，Windows 文档没有非常清楚地指出这些事实。

# xmpp - XMPP Google Talk X-OAUTH2 登录需要用户名

> ID：14315877
> 
> 赞同：1
> 
> 时间：2013-01-14T09:29:21.587
> 
> 标签：xmpp, oauth-2.0, google-talk

我正在为使用相对较新的 X-OAUTH2 机制的 Google Talk 实现 XMPP 客户端。我的想法是，我不需要存储用户名或密码来对服务进行身份验证。但是，[Google 的](https://developers.google.com/talk/jep_extensions/oauth)X-OAUTH2 身份验证文档指出这是最初的`<auth>`请求：

```
<auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl"
    mechanism="X-OAUTH2"
    auth:service="oauth2"
    xmlns:auth="http://www.google.com/talk/protocol/auth">
  base64("\0" + user_name + "\0" + oauth_token)
</auth> 
```

请注意，它需要将“user_name”与令牌一起发送。我在这里缺少什么吗？还是我真的必须让我的应用程序提示输入用户名？（请注意，用户已经通过 OAuth2 登录以接收访问令牌）

我不知道任何其他使用 OAuth 的服务需要客户端提供用户名。例如，同一个应用程序可以通过 XMPP 和 OAuth2 连接到 Facebook Chat，而无需在 XMPP 中提供用户名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:31:38.987

您无需在应用程序中提示输入用户名。只需将“SCOPE”参数指定为“https://www.googleapis.com/auth/userinfo.email”。参考[这个](https://developers.google.com/accounts/docs/OAuth2Login#scopeparameter)。这将为您提供用户电子邮件 ID 以及令牌作为响应。

此[链接](http://www.gethugames.in/blog/2012/04/authentication-and-authorization-for-google-apis-in-javascript-popup-window-tutorial.html)有关于谷歌帐户身份验证和授权的详细说明。用户名和电子邮件 ID 在您可以在应用程序中使用的 getUserInfo() 函数中返回。

# javascript - 如何在原生 Javascript 中创建元素并将现有元素移动到其中？

> ID：14315882
> 
> 赞同：0
> 
> 时间：2013-01-14T09:30:22.067
> 
> 标签：javascript

我的目标是创建一个元素来充当现有元素的占位符。出于样式目的，我需要将元素移动到另一个元素之后（位置：绝对不是一个好的解决方案），以便我可以设置动态位置。

我的问题是标记是由 javascript 生成的，我唯一的选择就是通过 javascript 来调整它。这是我需要覆盖的第三方小部件。

当前标记：

```
<li class="...">

  <a class="time" href="...." >
    <time pubdate="" class="...">...</time>
  </a>

  <div class="...">
    ...
  </div>

  <div class="...">
    ...
  </div>

  <div class="bottom-wrapper">
    <span class="stats-container">
      <span class="stats">
        <span class="likes">    
          ...
        </span>
        <span class="favorites">   
          ...
        </span>
      </span>
    </span>
  </div> 
```

我想`a.time`在`span.likes`.

目标：

```
<li class="...">

  <div class="...">
    ...
  </div>

  <div class="...">
    ...
  </div>

  <div class="bottom-wrapper">
    <span class="stats-container">
      <span class="stats">
        <span class="likes">    
          ...
        </span>
        <span class="new-span">
          <a class="time" href="...." >
            <time pubdate="" class="...">...</time>
          </a>
        </span>
        <span class="favorites">   
          ...
        </span>
      </span>
    </span>
  </div>
</li> 
```

出于某种原因，我需要在本机 javascript (No Jquery) 中执行此操作。

我的代码：

```
// Create a new, plain <span> element
var createElem = document.createElement('span');

// Get a reference to the element, before we want to insert the element
var containerElem = document.getElementsByClassName("likes");

// Get a reference to the parent element
var parentDiv = containerElem.parentNode;

// Insert the new element into the DOM after containerElem
parentDiv.insertBefore(createElem, containerElem.nextSibling); 
```

但是，上面的代码会引发错误（请参见下文）：

```
Uncaught TypeError: Cannot call method 'insertBefore' of null 
Uncaught TypeError: Cannot call method 'insertBefore' of undefined 
```

知道我该怎么做吗？谢谢

**编辑：我也有多个 LI。所以我需要遍历这个脚本中的所有 LI。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T09:32:34.003

`containerElem`是一个数组：

```
var parentDiv = containerElem[0].parentNode; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:09:31.747

1.  **getElementsByClassName**不是安全的跨浏览器 DOM 方法。它不适用于 IE 8 及更低版本。如果您需要跨浏览器支持，那么使用 getElementsByTagName('span') 并检查 .className 属性将是一个更好的选择。或者更好的是，只需给 span 一个 id 并使用 getElementById （但我相信你一定已经想到了这个想法）。

2.  此外，正如@salexch 正确指出的那样，如果 DOM 方法返回一组元素 (HTMLCollection)，如 getElementsByClassName 和 getElementsByTagName 所做的那样，那么您必须使用索引 (containerElem[0]) 来访问集合中的各个元素。

“我在上面尝试了您的更正，但我收到了这个错误 Uncaught TypeError: Cannot read property 'parentNode' of undefined”

这意味着您的 DOM 方法返回的集合是空的。您确定在调用 getElementsByClassName 时 DOM 中存在类“likes”的跨度吗？

其余的看起来不错。希望您能尽快找到解决方案。

# java - 使用 Java 解析 Jsp 文件并查找特定标签

> ID：14315894
> 
> 赞同：0
> 
> 时间：2013-01-14T09:31:08.730
> 
> 标签：java, jsp, search, tags, expression

我需要一种在我的班级中找到特定标签的方法。

示例代码：

```
<ace:column id="test1"></ace:column>                        
<ace:column id="test2"></ace:column>                        
<ice:panelGrid id="test3" columns="4" /> 
```

现在我想处理具有上述内容的文件，解析它并获取标识符为“id”的所有标签值。

我希望得到

```
test1
test2
test3 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:33:12.653

使用解析器。有很多关于如何解析的教程，[请参阅此 URL。](http://www.java-samples.com/showtutorial.php?tutorialid=152)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:35:48.117

如果您需要自己处理标签，则需要依赖一些解析器，例如[JSoup](http://jsoup.org/)。

话虽如此，**如果您想要**的只是字符串后面的值`id`，您可以依赖正则表达式，例如：`id="([^"]*?)"`.

# ios - 无法自定义 pushViewController 的后退按钮

> ID：14315901
> 
> 赞同：1
> 
> 时间：2013-01-14T09:31:51.757
> 
> 标签：ios, xcode, uibutton, uinavigationbar

我有一个 ViewController 通过它打开另一个 ViewController

```
[self.navigationController pushViewController:detailViewController animated:YES]; 
```

现在新的 VC 在 navBar 中有一个后退按钮，但我无法为它提供与第一个 ViewController 中的 navBar 按钮相同的背景图像。我试过：

```
UIImage *buttonImage = [UIImage imageNamed: @"Button.png"];
[self.navigationItem.backBarButtonItem setBackButtonBackgroundImage:buttonImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[self.navigationItem.backBarButtonItem setTitle:@"doesnt work either"]; 
```

但它不起作用。我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:36:49.260

试试下面给出的代码片段，它对我来说很好：

```
UIBarButtonItem *barBtnItem = [[UIBarButtonItem alloc]initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(pop)];

self.navigationItem.backBarButtonItem = barBtnItem; 
```

或者你也可以这样做：

```
 UIButton *backButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 26, 26)];
   [backButton setImage:[UIImage imageNamed:@"back"] forState:UIControlStateNormal];
   [backButton setShowsTouchWhenHighlighted:TRUE];
   [backButton addTarget:self action:@selector(popViewControllerWithAnimation) forControlEvents:UIControlEventTouchDown];
   UIBarButtonItem *barBackItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];
   self.navigationItem.hidesBackButton = TRUE;
   self.navigationItem.leftBarButtonItem = barBackItem; 
```

享受编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:37:29.960

试试这个：

```
 UIButton *button =  [UIButton buttonWithType:UIButtonTypeCustom];
        [button setImage:[UIImage imageNamed:@"Button.png"] forState:UIControlStateNormal];
        [button addTarget:self action:@selector(pushNav:) forControlEvents:UIControlEventTouchUpInside];
        [button setFrame:CGRectMake(0, 0, 32, 32)];
         self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:button];

      -(void)pushNav {
           [self.navigationController popViewControllerAnimated:YES];  
      } 
```

# mongodb - 在mongodb中使用属性进行计算

> ID：14315902
> 
> 赞同：1
> 
> 时间：2013-01-14T09:31:53.903
> 
> 标签：mongodb, properties

专家，

我有一个包含几个属性的文档，一个是一个带有二维索引的 lon/lat 数组。另一个属性是半径属性。

我想要的是：

```
{
geo:{
    $within: { $center: [[ 9.078597000000036,50.580947], 1+radius]}
}               
} 
```

这可用于 mongodb 吗？无论我在谷歌搜索什么，我总是被定向到关于地理空间索引的 mongodb 文档，但我的问题没有得到回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:45:39.423

不知道我是否理解你，但[关于地理空间索引的文档页面](http://docs.mongodb.org/manual/core/geospatial-indexes/)给出了一个像你这样的查询示例：

```
db.places.find( { geo: { $centerSphere: [ [long,lat ] ,
                                    radius  ] } } ) 
```

搜索位置集合，以查找`radius`与该点有距离（以弧度为单位）的所有内容`[long, lat]`。

# java - 如何从 Lotus Notes 多米诺服务器获取 JAVA 中的所有未读邮件

> ID：14315904
> 
> 赞同：0
> 
> 时间：2013-01-14T09:32:01.627
> 
> 标签：java, lotus-notes, lotus-domino, lotus

我是 Notes JAVA API 的新手，正在开发一个实用程序，我需要从 Lotus notes id 读取所有未读邮件。现在，当我尝试使用**lotus.domino.Database.getAllUnreadDocuments()**时，它给了我以下异常

```
NotesException: Not implemented
at lotus.domino.cso.Base.notImplemented(Unknown Source)
at lotus.domino.cso.Document.markRead(Unknown Source)
at com.email.ReadEmailRemotely.readEmails(ReadEmailRemotely.java:428)
at com.email.ReadEmailRemotely.run(ReadEmailRemotely.java:96)
at java.lang.Thread.run(Unknown Source) 
```

我的应用程序是 Eclipse 中使用 NCSO.jar 的普通 JAVA 应用程序

我的问题是，**我需要扩展 lotus.domino.AgentBase 吗？**

如果是，那么我需要什么所有依赖项，JAVA 应用程序不允许扩展它。& 如果没有，那么还有其他方法可以获取所有未读邮件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:42:10.263

如果服务器支持 IMAP 或 POP3，您可以使用 JavaMail API，它非常简单，并且有一个未读邮件标志。

```
 Properties props = System.getProperties();
    props.setProperty("mail.store.protocol", "imaps");

    try {
            Session session = Session.getDefaultInstance(props, null);
            Store store = session.getStore("imaps");
            store.connect("myserver.com", "user", "pass");

            Folder inbox = store.getFolder("Inbox");
            inbox.open(Folder.READ_ONLY);

            FlagTerm ft = new FlagTerm(new Flags(Flags.Flag.SEEN), false);
            Message messages[] = inbox.search(ft);
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:43:42.460

一种简单的方法（假设您可以编辑 NSF）是创建一个隐藏视图，其中仅列出您想要返回的文档。

然后访问该视图并遍历它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:33:56.617

您将不得不改用 notes.jar 而不是 ncso.jar。

为了使用 notes.jar 并访问 getAllUnreadDocuments 方法，您需要在运行代码的系统上安装 Notes 和 Domino 8 或更高版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T07:31:08.603

可能需要安全连接（SSL），使用以下属性连接支持 POP3 协议的邮件服务器：

```
 properties.put("mail.pop3.socketFactory.port", "POP3_PORT");
        properties.put("mail.pop3.host", "POP3_SERVER_HOST_NAME_OR_IP");
        properties.put("mail.pop3.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        properties.put("mail.pop3.socketFactory.fallback", "false"); 
```

# sharepoint - 使用本地主机的 Sharepoint 身份验证有效，但机器名称不起作用

> ID：14315905
> 
> 赞同：1
> 
> 时间：2013-01-14T09:32:16.733
> 
> 标签：sharepoint, authentication, sharepoint-2010

我与服务器机器有远程连接。我以管理员身份登录服务器计算机，打开 Internet Explorer。如果我同时键入**localhost**和**机器名称**，则site works 。当我以另一个用户身份登录并键入**localhost**站点时。但是当我输入**机器名称**时，会出现身份验证页面，当我选择 windows 或表单身份验证时，什么也没有发生。

我需要使用**机器名称**，否则当我尝试访问某些页面（例如批准页面）时，我会遇到严重错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:24:35.040

身份验证页面有一个简单的 JavaScript 函数，它可以阻止除受信任站点之外的所有站点。您需要将“机器名称”添加到 Internet Explorer 中的受信任站点列表中以激活该 JS 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:01:42.887

这是因为您的系统名称在 DNS 中是未知的；您的远程连接有效，因为系统名称是已知的。当您尝试从外部访问时，它不是。

有一种非常快速的方法可以检查这一点；在不起作用的连接上，打开主机文件 (c:\windows\system32\drivers\etc) - 添加条目：xxx.xxx.xxx.xxx systemanme - 例如，10.0.0.20 MySystem。保存文件，然后打开一个命令窗口 - ping 服务器名称，它应该会响应。再次尝试连接，你应该没问题。

长期的解决办法是与系统管理员交谈，找出网络上不知道系统名称的原因（通常可能是因为只知道完全限定的域名）。

# ninject - Ninject MetaData 约束 Get() 是否适用于子分辨率？

> ID：14315910
> 
> 赞同：1
> 
> 时间：2013-01-14T09:32:43.777
> 
> 标签：ninject, ninject-conventions

我`ninject.extensions.conventions`用来绑定给定程序集中的所有实现，并用程序集名称标记它们作为绑定的元数据。我可以使用 Get 将这些项目拉回并提供 func 作为标准。

我想知道的是这个函数是否也适用于所有已解决的孩子？我担心的是，虽然我的逻辑现在有效，但如果我添加更多满足任何孩子不止一次的绑定，ninject 会抛出。

代码示例：

```
_kernel.Bind(binder => binder.From(new[] { pathToAssembly })
                             .SelectAllClasses()
                             .BindAllInterfaces()
                             .Configure(binding => 
                                        binding.WithMetadata("context", 
                                                             assemblyName)));

 _kernel.Get<IRootDependency>
         (metadata => metadata.Get<IRootDependency>("context") == 
                                                   assemblyName);

// Bound from convention above.
RootDependencyBase: IRootDependency
{
  Public RootDependencyBase(IChildDependency Child) {};
}

// Bound using the convention above with the same MetaData Tag.
ChildDependencyFromSameAssembly : IChildDependency {}

// Bound using a differing convention and does not have the same MetaData tag.
ChildDependencyFromOtherAssembly : IChildDependency {} 
```

根据上面的示例，我知道 IRootDependency 将根据元数据过滤器解析为正确的绑定。

我正在寻找的是以下事实。

此过滤器不会向下馈送依赖链。IChildDependency 将抛出异常，因为虽然绑定指定了 MetaData，但它没有被查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:31:33.700

约束仅应用于根分辨率。如果您有多个包含子依赖项的程序集，您将收到异常。

要使其工作，您必须向绑定添加条件。比如像这样：

```
.When(r => r.ParentContext == null || r.ParentContext.Binding.Metadata.Get<string>("context", null) == assemblyName) 
```

或者获取根请求（request.ParentRequest 直到 parentRequest 为空）并应用约束

```
.When(r => GetRootRequest(r).Constraint(r)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:32:36.220

**是**的，如果您的示例`IChildDependency`在同一个程序集中有另一个实现，`ChildDependencyFromSameAssembly`您将收到`ActivationException`消息异常：

```
Error activating IDependency
More than one matching bindings are available. 
```

您必须向 Ninject 提供准确的标准，以`IChildDependency`从同一个程序集中找到更适合的实现

# asp.net - ASP.NET 和 SQL Server 的莫名其妙的查询超时

> ID：14315911
> 
> 赞同：1
> 
> 时间：2013-01-14T09:32:44.180
> 
> 标签：asp.net, sql-server, timeout

有时，我的 Web 应用程序在尝试执行特定的存储过程时会引发超时异常。从那一刻起，存储过程将永远不会再次执行，直到我重新启动数据库服务器。

奇怪的是，我可以在 SQL Server Management Studio 中手动执行存储过程，而且执行时间是正确的（大约 0.2 秒）。

但是，如果从网络服务器发出相同的确切调用...超时。这怎么可能？

我正在使用 SQL Server 2012，并且正在使用 Linq2Sql 在我的代码中映射存储过程。

附加信息：我尝试从这篇博客文章中运行“检测阻塞”sql：http: [//blog.sqlauthority.com/2010/10/06/sql-server-quickest-way-to-identify-blocking-query- and-resolution-dirty-solution/](http://blog.sqlauthority.com/2010/10/06/sql-server-quickest-way-to-identify-blocking-query-and-resolution-dirty-solution/)但不返回任何行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:35:32.707

可能在 SQL Server 中缓存了错误的查询计划。您可以尝试使用重新[编译选项](http://msdn.microsoft.com/en-us/library/ms190439.aspx)重新编译存储过程。使用此选项，SP 不会被缓存，并且每次调用时都会重新编译。

# java - 按钮单击=不幸的是应用程序已停止

> ID：14315921
> 
> 赞同：0
> 
> 时间：2013-01-14T09:33:34.600
> 
> 标签：java, android

嗨，我是 android 编程新手，单击按钮时此代码会产生错误...不幸的是，它显示应用程序已停止，任何人都可以检查吗？:(

```
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.compute);
    aButton = (Button) this.findViewById(R.id.Button06);

    //get intent
    Intent i = getIntent();
    Bundle extras = i.getExtras(); // get the parameters

    density = getBaseContext().getResources().getDisplayMetrics().density;
    int textViewSizeDp = (int)(200 * density);
    int textFieldSizeDp = (int)(50 * density);

    FieldsLayout = (LinearLayout) findViewById(R.id.FieldsLayout);
    if(extras!=null){
        items = (extras.getString("items")).split(",");
        rows = new LinearLayout[items.length];
        labels = new TextView[items.length];
        fields = new EditText[items.length];

        for (int ctr=0;ctr<items.length;ctr++){
            rows[ctr] = new LinearLayout(Compute.this);
            rows[ctr].setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
            rows[ctr].setOrientation(LinearLayout.HORIZONTAL);
            rows[ctr].setLayoutParams(new LayoutParams (LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
            FieldsLayout.addView(rows[ctr]);

            labels[ctr] = new TextView(Compute.this);
            labels[ctr].setText(items[ctr]);
            labels[ctr].setMinimumWidth(textViewSizeDp);
            rows[ctr].addView(labels[ctr]);

            fields[ctr] = new EditText(Compute.this);
            fields[ctr].setMinimumWidth(textFieldSizeDp);
            rows[ctr].addView(fields[ctr]);

        }
    }
    else{
        finish();
    }

    aButton.setOnClickListener(new OnClickListener() {  

        public void onClick(View v) {   

              Intent i = new Intent(Compute.this, Total.class);
              //I believe this causes the error
                for(int ctr=0;ctr<fields.length;ctr++){
                    itemName[ctr] = labels[ctr].getText().toString();
                    }

                for(int ctr=0;ctr<fields.length;ctr++){
                    itemHour[ctr] = Integer.parseInt(fields[ctr].getText().toString());
                    }
                //until here
              i.putExtra("hours",itemHour);
              i.putExtra("items",itemName);
              startActivity(i);
              }});     

} 
```

这是错误日志：（或者是这个吗？）

```
01-14 09:37:16.047: W/Trace(768): Unexpected value from nativeGetEnabledTags: 0
01-14 09:37:16.187: E/AndroidRuntime(768): FATAL EXCEPTION: main
01-14 09:37:16.187: E/AndroidRuntime(768): java.lang.NullPointerException
01-14 09:37:16.187: E/AndroidRuntime(768):  at com.example.mpc.Compute$1.onClick(Compute.java:82)
01-14 09:37:16.187: E/AndroidRuntime(768):  at android.view.View.performClick(View.java:4202)
01-14 09:37:16.187: E/AndroidRuntime(768):  at android.view.View$PerformClick.run(View.java:17340)
01-14 09:37:16.187: E/AndroidRuntime(768):  at android.os.Handler.handleCallback(Handler.java:725)
01-14 09:37:16.187: E/AndroidRuntime(768):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-14 09:37:16.187: E/AndroidRuntime(768):  at android.os.Looper.loop(Looper.java:137)
01-14 09:37:16.187: E/AndroidRuntime(768):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-14 09:37:16.187: E/AndroidRuntime(768):  at java.lang.reflect.Method.invokeNative(Native Method)
01-14 09:37:16.187: E/AndroidRuntime(768):  at java.lang.reflect.Method.invoke(Method.java:511)
01-14 09:37:16.187: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-14 09:37:16.187: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-14 09:37:16.187: E/AndroidRuntime(768):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:39:30.443

检查以下内容：

1.  按钮的 ID
2.  同一布局中的相同 ID 多于一个按钮。
3.  它的映射是否带有 xml 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T09:50:07.337

检查以下内容：

1.  确保您的字段数组已正确初始化。
2.  Make sure that the length of `itemName` is same as that of `fields.length` and it should be properly initialized.
3.  Make sure that the length of `labels` is same as that of `fields.length` and it should be properly initialized.
4.  Make sure that the length of `itemHour` is same as that of `fields.length` and it should be properly initialized.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T09:49:57.990

由于这是 NullPointerException，您要么有一些空字段，要么您忘记初始化一些字段，

查看，

*   如果你做了`aButton = (Button)findViewById(R.id.ButtonID);`
*   如果您已初始化`itemName[]`and `itemHour[]`，则类似于`itemHour[ctr] = new String[];`

*   `labels[]`如果and中有任何值`fields[]`

如果它仍然没有帮助，那么你应该发布一些更相关的代码，然后我才能编辑我的答案。

# linux-kernel - 为什么linux内核需要空闲线程？

> ID：14315923
> 
> 赞同：5
> 
> 时间：2013-01-14T09:33:59.830
> 
> 标签：linux-kernel, smp

如果无事可做（包括SMP），而不是“什么都不做”，为什么linux内核运行空闲线程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T14:43:26.337

当调度器决定切换到空闲任务时，此时动态滴答开始工作，通过禁用周期性滴答直到下一个计时器到期。在此时间跨度之后或在某个时间发生中断时，将重新启用滴答声。

与此同时，CPU 将以特定于架构的方式进入当之无愧的睡眠状态，从而节省您的电力。看一下`cpu_idle()`arch/x86/kernel/process.c中的定义。

```
/*
 * The idle thread. There's no useful work to be
 * done, so just try to conserve power and have a
 * low exit latency (ie sit in a loop waiting for
 * somebody to say that they'd like to reschedule)
 */
void cpu_idle(void) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-12T11:34:49.623

“什么都不做”是什么意思？？

当 CPU 通电时，会发生一长串事情。一旦上电，CPU 就不能“什么都不做”。它必须做一些事情，因为有电压和周期性时钟信号。您可以再次关闭它并且绝对不做任何事情，但是当您再次需要它时，您必须通过一长串的事情来获得稳定的时钟信号。

所以空闲线程是一个做最少的线程。即，如果将两个浮点数相乘需要最少的周期数和最少的电子电路；那么空闲线程将一直乘以两个浮点数。此外，正如 Wang 所说，Linux 内核（在某些配置中）监控内核何时开始执行空闲线程并将它们切换到较低频率，从而禁用任何类型的定期操作系统内务管理。当需要内核时，这会导致一些延迟，但使用的功率要少得多。

# java - JAXB XML 解组只看到根元素

> ID：14315925
> 
> 赞同：5
> 
> 时间：2013-01-14T09:34:13.903
> 
> 标签：java, xml, namespaces, jaxb, unmarshalling

我在将一个相当简单的 XML 文档解组为纯 Java 对象时遇到问题。

这就是我的 XML 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<codeSystem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:hl7-org:v3 vocab.xsd" xmlns="urn:hl7-org:v3">
     <name>RoleCode</name>
     <desc>Codes voor rollen</desc>
     <code code="SON" codeSystem="2.16.840.1.113883.5.111" displayName="natural sonSon ">
         <originalText>The player of the role is a male offspring of the scoping entity (parent).</originalText>
     </code>
     <code code="DAUC" codeSystem="2.16.840.1.113883.5.111" displayName="Daughter">
           <originalText> The player of the role is a female child (of any type) of scoping entity (parent) </originalText>
     </code>
</codeSystem> 
```

它是一个更大的文件的一部分，它是 Hl7v3 代码系统的规范，用于表示人与人之间的关系。

我为 CodeSystem 和 Code 元素创建了两个 Java 类：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class CodeSystem
{
    private String name;

    private String desc;

    @XmlElement(name = "code")
    private List<Code> codes;
}

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType
public class Code
{
    @XmlAttribute
    private String code;

    @XmlAttribute
    private String codeSystem;

    @XmlAttribute
    private String displayName;

    private String originalText;
} 
```

我添加了一个 package-info.java 包含：

```
@XmlSchema(
    namespace = "urn:hl7-org:v3",  
    elementFormDefault = XmlNsForm.UNQUALIFIED, 
    attributeFormDefault = XmlNsForm.UNQUALIFIED,
    xmlns = { 
        @javax.xml.bind.annotation.XmlNs(prefix = "", namespaceURI = "urn:hl7-org:v3") 
    }
)
package nl.topicuszorg.hl7v3.vocab2enum.model;

import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

解组非常简单：

```
JAXBContext context = JAXBContext.newInstance(CodeSystem.class);
Unmarshaller unmarshaller = context.createUnmarshaller();
CodeSystem codeSystem = (CodeSystem) unmarshaller.unmarshal(new File(args[0])); 
```

然而，这会导致一个空的 CodeSystem 对象。除了根元素之外，什么都不是从 XML 中解析出来的。

我无法弄清楚为什么无法识别名称、描述和代码元素。它们是否驻留在与根元素不同的命名空间中？它们不应该是，因为根元素中的命名空间声明没有前缀。

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T10:31:58.897

在您的 XML 文档中，您已经指定了一个默认名称空间。这意味着任何非前缀元素都将位于该命名空间中。在下面的片段中，`codeSystem`和`name`元素都使用`urn:hl7-org:v3`命名空间进行限定。

```
<codeSystem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:hl7-org:v3 vocab.xsd" xmlns="urn:hl7-org:v3">
     <name>RoleCode</name>
     ...
</codeSystem> 
```

您只需要将注释`elementFormDefault`上的属性更改为. 您目前拥有它，这意味着只有全局元素将是命名空间限定的（在您的用例中对应的元素。`@XmlSchema``XmlNsForm.QUALIFIED``XmlNsForm.UNQUALIFIED``@XmlRootElement`

```
@XmlSchema(
    namespace = "urn:hl7-org:v3",  
    elementFormDefault = XmlNsForm.QUALIFIED, 
    attributeFormDefault = XmlNsForm.UNQUALIFIED,
    xmlns = { 
        @javax.xml.bind.annotation.XmlNs(prefix = "", namespaceURI = "urn:hl7-org:v3") 
    }
)
package nl.topicuszorg.hl7v3.vocab2enum.model;

import javax.xml.bind.annotation.XmlNsForm;
import javax.xml.bind.annotation.XmlSchema; 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/jaxb-namespaces.html](http://blog.bdoughan.com/2010/08/jaxb-namespaces.html)

# iphone - 在 iPhone 中实现 Google+ 时出错

> ID：14315927
> 
> 赞同：5
> 
> 时间：2013-01-14T09:34:33.863
> 
> 标签：iphone, ios, objective-c, google-plus

我正在使用 Google+ for iOS 教程在 Objective-C iPhone 中实现 Google+，但是当我单击**Google+ 的登录按钮** 时出现此错误

```
2013-01-14 14:28:46.168 googleplus_tutorials[2468:11303] GTMMethodCheckMethodChecker: Class WebMIMETypeRegistry does not conform to @protocol(NSObject), so won't be checked
2013-01-14 14:28:46.176 googleplus_tutorials[2468:11303] GTMMethodCheckMethodChecker: Class UIKeyboardCandidateUtilities does not conform to @protocol(NSObject), so won't be checked
2013-01-14 14:28:55.544 googleplus_tutorials[2468:11303] *** Assertion failure in -[GPPSignInButton createGPPSignIn], /Volumes/BuildData/pulse-data/agents/wpyk8.hot/recipes/211255319/base/googlemac/Shared/GooglePlus/Dev/GooglePlusPlatform/GPPSignInButton.m:155
2013-01-14 14:28:55.545 googleplus_tutorials[2468:11303] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'You must specify a client ID for GPPSignInButton.'
*** First throw call stack:
(0x141e012 0x1243e7e 0x141de78 0xcd9f35 0x448c4 0x44688 0x1257705 0x18e920 0x18e8b8 0x24f671 0x24fbcf 0x24ed38 0x1be33f 0x1be552 0x19c3aa 0x18dcf8 0x2301df9 0x2301ad0 0x1393bf5 0x1393962 0x13c4bb6 0x13c3f44 0x13c3e1b 0x23007e3 0x2300668 0x18b65c 0x2e22 0x2d55)
libc++abi.dylib: terminate called throwing an exception 
```

使用此链接，我正在我的 iphone [https://developers.google.com/+/mobile/ios/getting-started](https://developers.google.com/+/mobile/ios/getting-started)中实现 google+ ，这是我的代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
  static NSString * const kClientId = @"711430132123.apps.googleusercontent.com";
   GPPShare *share = [[GPPShare alloc] initWithClientID:kClientId];
  signInButton = [[GPPSignInButton alloc]init];
   signInButton.delegate = self;
   signInButton.clientID = kClientId;
signInButton.scope = [NSArray arrayWithObjects:@"https://www.googleapis.com/auth/plus.moments.write",@"https://www.googleapis.com/auth/plus.me",nil];

    AppDelegate *appDelegate = (AppDelegate *)
    [[UIApplication sharedApplication] delegate];

    appDelegate.signInButton = signInButton;
    // Do any additional setup after loading the view, typically from a nib.
}
- (BOOL)application: (UIApplication *)application
            openURL: (NSURL *)url
  sourceApplication: (NSString *)sourceApplication
         annotation: (id)annotation {
    // Handle Google+ sign-in button URL.
    if ([signInButton handleURL:url
               sourceApplication:sourceApplication
                      annotation:annotation]) {
        return YES;
    }
    return NO;
} 
```

请告诉我为什么会收到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:47:27.873

你试过google+的universalLib(libGooglePlusUniversal.a)吗？跟踪您的崩溃后，我认为您没有在目标中添加库。可能会对您有所帮助。

# php - 使用 Fine Uploader 在 IE 中显示保存对话框

> ID：14315928
> 
> 赞同：2
> 
> 时间：2013-01-14T09:34:47.267
> 
> 标签：php, jquery, uploader, fine-uploader

我正在使用 Fine Uploader 上传图片。[我包括来自GitHub](https://github.com/Widen/fine-uploader)的 javascript 。我包括：

*   jquery-1.8.3.min.js
*   实用程序.js
*   按钮.js
*   handler.base.js
*   handler.form.js
*   处理程序.xhr.js
*   上传者.basic.js
*   dnd.js

我想将它用作 Fine Uploader Basic ( [FUB](http://fineuploader.com/fine-uploader-basic-demo.html) )，因为它很容易定制。

下面是我在 PHP 中的服务器代码，只返回 json：

```
$result = array("success"=>true, "id"=>"001", "name"=>"dararath");
header("Content-Type: text/plain");
echo json_encode($result); 
```

它在 Chrome、Firefox 和 IE 9 中运行良好，但 IE 8 和 7 显示保存对话框而不是 json。

*   我包含的 javascript 是否正确？
*   我的 php json 错误或 Fine Uploader 中有任何代码来纠正此行为，因为在 IE 7 和 IE 8 上的示例测试工作正常吗？

**更新 (2016-07-21)**

我需要更改标题来解决问题。

```
$result = array("success"=>true, "id"=>"001", "name"=>"dararath");
header("Content-Type: application/json");
echo json_encode($result); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:44:27.737

首先，我建议你下载组合版的js。请参阅主页上的[下载部分。](http://fineuploader.com/downloads.html)

其次，您的问题已在论坛和问题跟踪器中多次讨论。我现在也将继续在常见问题解答中添加一个条目。

解决方案：您的回复必须具有“text/plain”的内容类型。如果您看到“另存为”对话框，则您的响应的内容类型可能是“应用程序/json”。仔细检查响应以进行验证。

# html - w3c 验证器 HTML5 xmlns

> ID：14315930
> 
> 赞同：1
> 
> 时间：2013-01-14T09:35:13.483
> 
> 标签：html, validation, w3c-validation

我无法让我的网站在 W3C 标记验证中进行验证。

这是验证错误之一的示例。

`Error: Attribute xmlns:content not allowed here.`

我做了一些研究，一些文章建议我们改变：
`xmlns:name="http://url" syntax into the prefix="name:http://url"`

但是我有多个 xmlns 属性。
不确定在这种情况下如何编写前缀。

原来的：

```
`<html lang="en" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#">` 
```

每个属性之间是否用空格隔开？

`<html lang="en" dir="ltr" prefix="content:http://purl.org/rss/1.0/modules/content/ dc:http://purl.org/dc/terms/ foaf:http://xmlns.com/foaf/0.1/">`

或者我们应该用`\n`新行分开？
我已经检查了 w3.org 网站，看起来他们将属性分隔在新行中。
我对吗？
[http://www.w3.org/TR/2011/WD-rdfa-core-20111215/](http://www.w3.org/TR/2011/WD-rdfa-core-20111215/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T09:07:08.390

您不能在 HTML 5 中使用任意命名空间中的元素。为此，您需要使用 XML，并且为了验证，您需要一个合适的 DTD 或包含您要使用的所有命名空间的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:21:43.447

你需要一个 doctype 放在你的 html 标签之前。您可以使用：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-25T09:40:50.813

网页包含 RDFa 标记，这在 HTML 5 中是允许的[。HTML+RDFa 1.1 规范](http://www.w3.org/TR/2015/REC-html-rdfa-20150317/)有[一个专门用于`@xmlns:`属性](http://www.w3.org/TR/2015/REC-html-rdfa-20150317/#xmlns--prefixed-attributes)的部分。

它说`@xmlns:`在 RDFa 1.1 中不推荐使用 ，但仍然允许向后兼容。因此，如果可能，不应该使用它。然后，[关于@xmlns:-Prefixed Attributes 的一致性标准](http://www.w3.org/TR/2015/REC-html-rdfa-20150317/#conformance-criteria-for-xmlns--prefixed-attributes)的以下部分表明：

> 对于符合本规范的文档，名称具有不区分大小写的前缀匹配“ `@xmlns:`”的属性必须被视为符合。一致性检查器应该接受具有不区分大小写前缀匹配“ `@xmlns:`”的属性名称作为符合。一致性检查器应该生成警告，指出`@xmlns:`不推荐使用 。一致性检查器可以将使用报告`xmlns:`为错误。

我知道 W3C HTML 验证器正在采用更严格的一致性检查，其中`xmlns:`报告为错误，尽管我觉得这很奇怪，因为它应该生成警告。

# ios - iOS 对 web 服务的基本请求

> ID：14315931
> 
> 赞同：1
> 
> 时间：2013-01-14T09:35:13.480
> 
> 标签：ios, json, http, request

任何人都可以为我指出一个好的教程的正确方向或可能回答这个问题。

我有一些 JSON 要在我的网络服务器上返回

```
{
first_name: "Joe";
last_name: "Smith";
department: "Human Resources";
} 
```

如何发出 http 请求以通过单击按钮获取此信息并在 iphone 上显示为文本。？

完整的新手，所以请“哑巴”下来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:10:01.057

创建一个 jsonviewcontroller 类

```
#import <UIKit/UIKit.h>

@interface JSONViewController : UIViewController<UITableViewDelegate,UITableViewDataSource,NSURLConnectionDataDelegate>
{
    NSString *label;
}
@property (weak, nonatomic) IBOutlet UITableView *myTableView;
- (IBAction)getTop10AlbumAction:(id)sender;

@end 
```

然后在实现类中：-

```
#import "JSONViewController.h"

@interface JSONViewController ()
{
    NSMutableData *webData;
    NSURLConnection *connection;
    NSMutableArray *array;
    NSString *category;    
}

@end

@implementation JSONViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    array=[[NSMutableArray alloc]init];
}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [webData setLength:0];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [webData appendData:data];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"Failed with Error");
} 
```

这是实际解析发生的地方，我们从相应的字典和数组中获取专辑的标题。要了解这一点，请首先访问此链接[http://jsonviewer.stack.hu/#http://itunes.apple.com/us/rss/topalbums/limit=10/json](http://jsonviewer.stack.hu/#http://itunes.apple.com/us/rss/topalbums/limit=10/json)这是显示结构的 json 查看器我们要访问的内容。不要恐慌！如果你尝试解析一些 json url，它真的很容易

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSDictionary *allDataDictionary=[NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];
    NSDictionary *feed=[allDataDictionary objectForKey:@"feed"];
    NSArray *arrayOfEntry=[feed objectForKey:@"entry"];
    for (NSDictionary *dict in arrayOfEntry) {
        NSDictionary *title=[dict objectForKey:@"title"];
        NSString *label=[title objectForKey:@"label"];
        [array addObject:label];
    }

[[self myTableView]reloadData];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return[array count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier=@"cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell) {
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    //clear background color
    [[cell textLabel] setBackgroundColor:[UIColor clearColor]];
    [[cell detailTextLabel] setBackgroundColor:[UIColor clearColor]];

    //set cell text
    cell.textLabel.text=[array objectAtIndex:indexPath.row];

    //set cell accessory type
    cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
    return cell;
} 
```

在这里，我们指定我们将要解析并发出连接请求的 iTunes url

```
- (IBAction)getTop10AlbumAction:(id)sender {
    NSURL *url=[NSURL URLWithString:@"http://itunes.apple.com/us/rss/topalbums/limit=10/json"];    
    NSURLRequest *request=[NSURLRequest requestWithURL:url];
    connection=[NSURLConnection connectionWithRequest:request delegate:self];
    if (connection) {
        webData=[[NSMutableData alloc]init];
    }
    [[self myTableView]reloadData];
}
@end 
```

我希望我已经说得够清楚了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T06:08:11.610

我建议你两个不同的教程：

1.  创建一个简单的界面。这是一个来自 Apple 的示例，其中显示了一个按钮和一个文本：[iOS 按钮 - 标签示例](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhone101/Articles/00_Introduction.html)

2.  `changeGreeting:`将调用 Web 服务的代码插入到控制器代码中（即）： [iOS JSON Webservice 教程](http://reins.altervista.org/wordpress/ios-json-webservices/)

# symfony - 启用或禁用捆绑包的 csrf_protection

> ID：14315932
> 
> 赞同：3
> 
> 时间：2013-01-14T09:35:17.937
> 
> 标签：symfony

Symfony2 propse 为框架启用或禁用 csrf_protection，例如：

```
 csrf_protection: 
        enabled: false 
```

或
csrf_protection: false

我们应该注意到这两种配置是完全不同的，第一种意味着 csrf 已加载但为假，第二种我们甚至不加载此功能。好吧，我们可以很容易地为特殊形式启用它，例如：

```
 public function getDefaultOptions(array $options)
{
    return array(
            'data_class' => 'xxx\Entity\Company',
            'csrf_protection' => true,
    );
} 
```

在表单构建器类中。

但我认为这还不够，所以我问这个问题，我们可以做类似的事情：

```
mybundle:
    csrf_protection:
        enabled: false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T12:46:48.340

您可以为项目中的每个捆绑包全局禁用文件中的 csrf_protection `config.yml`，但我认为仅对其中一个捆绑包执行此操作是不可能的。

相反，您需要修改该捆绑包的每个 Form 类上的选项数组，如下所示：

```
class TaskType extends AbstractType
{
    // ...

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class'      => 'Acme\TaskBundle\Entity\Task',
            'csrf_protection' => false
        );
    }

    // ...
} 
```

# javascript - GNU/Linux - Javascript(Jquery) UTF-8 解析

> ID：14315933
> 
> 赞同：0
> 
> 时间：2013-01-14T09:35:19.997
> 
> 标签：javascript, jquery, linux, json, utf-8

我在这个问题上工作了几天，因为只有在我的 GNU/Linux 测试系统上解析不起作用，我找不到解决方案，我现在正在寻找一些帮助。

这里有详细信息：

我用 OOP JavaScript 编写了一些代码，效果很好。它根据从 JSON 解析的内容构建表格。

PHP 中的标头设置为`text/html`; 使用 utf-8 字符集。

那么问题是当我打电话时：

```
line.push(data[i].header); 
```

然后 UTF-8 字符只会在 GNU/Linux 测试系统（任何浏览器！）下被误解。Mac OS X 和 Windows 正在运行。

> Jquery 抛出错误语法错误，无法识别的表达式。

如果我在我的数据上尝试`decodeURIComponent(escape(data))`，那么在 GNU/Linux 下一切正常。但是现在我会在转义函数上得到 Windows 和 Macintosh 抛出错误。

# c++builder - 如何从 DataSnap 中的线程中抑制异常消息框 EIdConnClosedGracefully

> ID：14315936
> 
> 赞同：1
> 
> 时间：2013-01-14T09:35:25.487
> 
> 标签：c++builder, indy, datasnap

我正在尝试在 C++ Builder XE 中将 DataSnap 服务器构建为 Windows 窗体应用程序。我使用这里描述的 TIdSchedulerOfThreadPool [http://blog.marcocantu.com/blog/datasnap_deployment_performance.html](http://blog.marcocantu.com/blog/datasnap_deployment_performance.html)。在有负载的情况下，我得到了很多 EIdConnClosedGracefully 异常，这可能是正常的，但问题是我从线程中得到了这个异常作为 MessageBoxes。我寻找一些可以抑制此消息框的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:41:23.267

您是仅在调试器内运行应用程序时才看到消息框，还是在 IDE 外运行应用程序时也看到消息框？调试器内部是正常行为，因为它们毕竟是异常。除非您告诉它忽略它们，否则调试器会显示引发异常的弹出消息。但是在 IDE 之外，您可以从工作线程中看到消息框的唯一方法是您自己的代码是否正在捕获异常并自己显示消息框，或者 DataSnap 在内部显示它们。EIdConnClosedGracefully 是一个 Indy 异常，DataSnap 确实在内部使用 Indy，但 DataSnap 不太可能显示自己的消息框。Indy 肯定不会显示消息框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:31:18.653

我也在 IDE 之外看到了消息框。它来自 TWebRequestHandler (DataSnap)。这是显示该消息框的线程的堆栈跟踪：

```
:7c90e514 ntdll.KiFastSystemCallRet
:7e369418 user32.WaitMessage + 0xc
:7e3749c4 ; C:\WINDOWS\system32\user32.dll
:7e38a956 ; C:\WINDOWS\system32\user32.dll
:7e38a2bc ; C:\WINDOWS\system32\user32.dll
:7e3b63fd user32.MessageBoxTimeoutW + 0x7a
:7e3a0853 user32.MessageBoxExW + 0x1b
:7e3b6579 user32.MessageBoxW + 0x45
:004D6BBD Sysutils::ShowException(ExceptObject=????, ExceptAddr=????)
:0082b248 ; Webreq::TWebRequestHandler::HandleException
:0082b06f ; Webreq::TWebRequestHandler::HandleRequest
:0043dbdf ; Idhttpwebbrokerbridge::_16464
:0043dd23 Idhttpwebbrokerbridge::TIdHTTPWebBrokerBridge::DoCommandGet + 0x23
:0068AB4D Idcustomhttpserver::TIdCustomHTTPServer::DoExecute(Self=:00E9B9D0, AContext=:00F13660)
:0063F09A Idcontext::TIdContext::Run(Self=????)
:0049F9CD Classes::ThreadProc(Thread=:00ECA260)
:004EF72E System::ThreadWrapper(Parameter=:00F1EF10)
:7c80b729 ; C:\WINDOWS\system32\kernel32.dll 
```

# jfreechart - 通过最小/最大峰值的时间序列图表水平网格线

> ID：14315938
> 
> 赞同：0
> 
> 时间：2013-01-14T09:35:29.197
> 
> 标签：jfreechart, time-series, gridlines

我正在使用 JFreeChart 绘制时间序列图。该图表工作正常，但网格线对齐正在成为一个问题。

我的要求是通过峰值（即最大值和最小值）显示水平网格线。您能否让我知道是否有任何属性，因为我正在随机获取网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:06:49.593

您是否考虑过使用 a`Marker`来突出显示最小值和最大值？

![在此处输入图像描述](../Images/00ede2a67b1cbb9ff2cd24111741ddff.png)

正如垃圾神所建议的那样，您使用`Dataset`来获取最小值和最大值，然后将 a 添加`Marker`到`Plot`

```
Range range = dataset.getRangeBounds(true);
plot.addRangeMarker(new ValueMarker(range.getLowerBound(),Color.GREEN,new BasicStroke(2.0f)),Layer.BACKGROUND);
plot.addRangeMarker(new ValueMarker(range.getUpperBound(),Color.BLUE,new BasicStroke(2.0f)),Layer.BACKGROUND); 
```

# ios - 这个 NSFetchRequest 有什么问题？

> ID：14315939
> 
> 赞同：2
> 
> 时间：2013-01-14T09:35:31.703
> 
> 标签：ios, ios5, core-data

简单的问题。谁能告诉我这段代码有什么问题？

```
+ (NSManagedObject*) managedObjectWithServerId:(NSInteger)serverId inManagedObjectContext:(NSManagedObjectContext*)context{

    //Execute request and get all the results
    NSError * error = nil;
    NSFetchRequest * request = [NSFetchRequest fetchRequestWithEntityName:NSStringFromClass(self)];
    request.predicate = [NSPredicate predicateWithFormat:@"serverId == %@" argumentArray:[NSArray arrayWithObject:[NSNumber numberWithInteger:serverId]]];
    NSArray * results = [context executeFetchRequest:request error:&error];
} 
```

结果数组始终是一个包含 0 个对象的 NSArray，没有给出错误，什么也没有。只是一个 0 计数数组。并且不可能总是返回 0 个元素，我正在使用 SQLite 资源管理器探索 Core Data 数据库，并且`serverId`我要求有元素，所以应该至少有 1 个。

我做谓词错了吗？

上面的代码是在一个`NSManagedObject`类中实现的，调用方式如下：

```
 [User managedObjectWithServerId:whatev inManagedObjectContext:context]; 
```

`User`我的模型和子类中的实体在哪里`NSManagedObject`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T11:20:18.943

问题已解决，由于意外情况，我似乎总是在重新创建数据库文件。我注意到因为所有主键总是从 1 开始。

如果您在创建新的 UIManagedDocument 数据库文件之前不删除以前的 UIManagedDocument 数据库文件，CoreData 似乎会出现一些问题。

条件固定后，我没有收到 NSPersistentStoreCoordinator 崩溃错误，我可以看到所有带有调试功能的 SQL 方法，而且我的提取当然可以正常工作。

感谢所有尝试提供帮助的人，很抱歉浪费您的时间:)

# macos - AppleScript 单击对话框

> ID：14315940
> 
> 赞同：3
> 
> 时间：2013-01-14T09:35:39.043
> 
> 标签：macos, applescript

在 PCSX（ps1 模拟器）中，我正在尝试自动执行播放 iso 的步骤。所以，我正在这样做：

```
set thepath to path to me
set thesecondpath to POSIX path of thepath
set thethirdpath to "Contents/PSX/ROMS/img.bin"
set thefourthpath to "/Contents/PSX/PCSX.app"
set thefifthpath to thesecondpath & thefourthpath
set theultimatepath to thesecondpath & thethirdpath

tell application thefifthpath
    activate
    tell application "System Events"
        keystroke "i" using {command down}
        keystroke theultimatepath
        delay 1.0
        tell process "PCSX"
            click button "Go"
        end tell
        key code 53
    end tell
end tell 
```

从 AppleScript 编辑器运行将不起作用。我让它从它创建的应用程序运行。PCSX 和 img.bin 位于 Generated Package 中。

按下后`command+i`，它会打开一个`"Go to the folder"`对话框，我需要单击`Go`然后`Open`

但是这样做，它不会找到对话框。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:36:04.763

如果 Go 和 Open 是默认按钮，请尝试：

```
tell application "System Events"
    keystroke return
    delay 2
    keystroke return
end tell 
```

虽然我没有安装 PCX，但这里有一个示例，说明如何从 Finder 的“转到文件夹”命令中单击“开始”按钮。

```
tell application "System Events"
    tell process "Finder"
        click button "Go" of window "Go to Folder"
    end tell
end tell 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T10:13:35.823

您的脚本无法从 AppleScript 编辑器运行的原因是“我的路径”中的“我”是运行 AppleScript 的应用程序。当您在 AppleScript Editor 中运行 AppleScript 时，这意味着 AppleScript Editor 本身。当您将 AppleScript 保存为脚本应用程序并运行它时，指向我的路径指向您的脚本应用程序，因为它正在运行自己的 AppleScript。

此外，这是不正确的：

```
tell process "Finder"
        click button "Go" of window "Go to Folder"
end tell 
```

“Go”按钮不在“Go to Folder”窗口上。它位于附加到 Finder 窗口的工作表上，该窗口具有当前正在查看的任何文件夹的名称。因此，您必须将按钮描述为位于窗口 1 的表 1 上：

```
tell application "System Events"
    tell process "Finder"
        click button "Go" of sheet 1 of window 1
    end tell
end tell 
```

…但请记住，在另一个应用程序中，工作表上类似外观的按钮可能位于窗口 3 的组 2 的组 1 的工作表 1 上。UI 脚本很复杂。

# sql - 最大值和大于 SQL 之间的性能差异

> ID：14315942
> 
> 赞同：0
> 
> 时间：2013-01-14T09:35:42.377
> 
> 标签：sql, oracle, date, oracle10g, aggregate

在设计一个基于日期（例如货币汇率）有影响的表格时，哪个更好？

1.  生效日期（找出最大值（生效日期）并获取当前值）
2.  从日期 - 到日期条件（大于等于 sysdate）

Rgrds。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T06:57:24.353

这取决于。您有一个表示对特定实体的更改的表，并且您希望记录实体何时更改，以及更改何时被后续更改所取代。

*1.*如果您只记录每个事件的生效日期，则 INSERT 更简单：它们不需要找到较早的记录来更新它。但是，查询变得更加复杂——您需要在数据集上运行一个窗口来查找哪条记录在任何时候都适用，这可能会导致性能下降。

另一个缺点是这种模式是开放式的。您不能将货币记录为“永久关闭”（如果您有结束日期，您可以这样做）。

*2.*如果您记录每个事件的开始日期和结束日期，查询会更简单：您只需单独查看每一行即可知道它在任何时间点是否“当前”。但是，INSERT 稍微复杂一些 - 当您插入新事件时，您必须更新较早的事件以标记其结束日期。

该模型是封闭式的；您可以在最终事件上设置结束日期并且没有“打开”记录。

# java - 在java中遍历多张excel

> ID：14315943
> 
> 赞同：10
> 
> 时间：2013-01-14T09:35:46.920
> 
> 标签：java, excel, loops, apache-poi

我对java很陌生。我正在从 excel 创建 pList。我的 excel 文件包含多张工作表。我想遍历 excel 文件的所有工作表。这要怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-14T09:52:55.367

```
public static void main( String [] args ) {
    try {

        InputStream input = POIExample.class.getResourceAsStream( "qa.xls" );
        POIFSFileSystem fs = new POIFSFileSystem( input );
        HSSFWorkbook wb = new HSSFWorkbook(fs);

        for (int i = 0; i < wb.getNumberOfSheets(); i++) {
            HSSFSheet sheet = wb.getSheetAt(i);

            // Do your stuff        
        }

    } catch ( IOException ex ) {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-28T14:33:58.983

从[apache poi 文档](https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Workbook.html#sheetIterator())中，我们看到还有一个可用的迭代器，我认为这是一个更清洁的解决方案：

```
Iterator<Sheet> sheetIterator = workbook.iterator();
while (sheetIterator.hasNext()) {
    Sheet sheet = sheetIterator.next();
} 
```

根据您使用的工作簿类型（HSSF 或 XSSF），您可能需要执行额外的转换操作：

*   HSSF：POI 项目的 Excel '97(-2007) 文件格式的纯 Java 实现。

    ```
    HSSFSheet sheet = (HSSFSheet) sheetIterator.next(); 
    ```

*   XSSF：POI 项目的 Excel 2007 OOXML (.xlsx) 文件格式的纯 Java 实现。

    ```
    XSSFSheet sheet = (XSSFSheet) sheetIterator.next(); 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-28T13:46:15.420

爪哇：

```
Workbook workbook = WorkbookFactory.create(file);
Iterator<Sheet> sheetIterator;
sheetIterator = workbook.sheetIterator();
while(sheetIterator.hasNext()){
    Sheet sheet = sheetIterator.next();
    out.println(sheet.getSheetName());
} 
```

斯卡拉：

`var iterator = workbook.sheetIterator(); while(iterator.hasNext){ var sheet = iterator.next println(sheet) }`

# jquery - 如何将对象发送到 wcf 服务？

> ID：14315945
> 
> 赞同：0
> 
> 时间：2013-01-14T09:35:49.840
> 
> 标签：jquery, json, wcf

我有一个带有自定义类对象作为参数的 WCF 服务。

```
MyClass Call(MyParameter Parameter) 
```

我需要将此对象 Parameter 传递给该服务并继续该服务中的其余操作。我需要通过 JQuery 调用此服务。我尝试了 JSON 对象，但它不起作用，如果它应该起作用，我一定做错了，也就是说。

**我试过了**

```
$.ajax({
            type: "GET",
            url: "http://localhost:56779/Service.svc/web/Call",
            data: { Parameter: parameter },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            username: "xxxx",
            password: "yyyy",
            processData: true,
            success: function (msg) {
                console.log(msg);
            },
            error: function (e) {
                alert('Error!');
            }
        }); 
```

**和**

```
var parameter = {
            "Parameter": {
                "ID": "A5",
                "Var": "5",
                "Reference": {
                    "ID": "12345678"
                },
                "Order": {
                    "ID": 10,
                    "Category": {
                        "Price": {
                            "Value": "1000"
                        },
                        "Quantity": {
                            "Value": 4
                        },
                        "Date": "1/14/2013"
                    }
                }
            }
        }; 
```

我也试过

```
data: JSON.stringify(parameter) 
```

但它不起作用，甚至没有调用服务并且发生错误。请让我知道如何去做。

我真正的任务是发送这样的对象作为 SOAP 消息并获得 SOAP 响应；如果我不需要通过JSON，那么请直接指导我实现我的目标。

PS 我想知道如何将对象发送到 WCF 服务，不管有没有 SOAP，所以，当我被引导到我的目标时，我很高兴有关于这个额外目标的另一个指导。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:56:33.133

有一个很好的 SO 问题关于在此处创建一个接受 Json 请求的 WCF 服务。我想这会回答你的问题。

[WCF Restful 服务的 Http Post 格式](https://stackoverflow.com/questions/4530169/http-post-format-for-wcf-restful-service)

您需要确保将 WCF 服务配置为预期 Json 请求。我还建议您使用[SoapUi](http://www.soapui.org/)之类的工具来验证服务的预期请求（和响应）格式是否符合您的预期。

# java - 使用 curl 的 Https 发布请求：Android

> ID：14315946
> 
> 赞同：4
> 
> 时间：2013-01-14T09:35:50.230
> 
> 标签：java, android, facebook, curl, https

我正在尝试使用 curl 执行 https 发布请求。当我执行此请求时，我既没有收到任何响应，也没有收到任何错误或异常。感谢您提供帮助或任何关于这里出了什么问题的线索。谢谢。

curl命令行格式：

```
 curl -X POST \
-F 'image=@filename.png;type=image/png' \
-F 'svgz=@filename.svgz;type=image/svg+xml' \
-F 'json={ 
    "text" : "Hello world!",
    "templateid" : "0010",
    "timestamp" : "1342683312", 
    "location" : [ 37.7793, -122.4192 ],
    "facebook" :
    {
        "id": "738124695",
        "access_token": "<VALID_USER_FACEBOOK_TOKEN_WITH_PUBLISH_ACTIONS_PERMISSIONS",
        "expiration_date": "1342683312"                
    }
};type=application/json' \
https://sample.com/api/posts 
```

脸书发帖代码：

```
public static void uploadToFB() {
    HttpClient client = getNewHttpClient();
    HttpPost httpost = new HttpPost("https://sample.com/api/posts");
    httpost.addHeader("image", "filename.png");
    httpost.addHeader("svgz", "filename.svgz");
    httpost.addHeader("type", "application/json");
    httpost.setHeader("Content-type", "application/json");
    JSONObject data = new JSONObject();
    JSONObject facebook = new JSONObject();
    JSONArray location = new JSONArray();
    HttpResponse response = null;
    try {
        data.put("text","Hello world!");
        data.put("templateid","0010");
        data.put("timestamp","2012-07-08 09:00:45.312195368+00:00");

        location.put(37.7793);
        location.put( -122.4192);
        data.put("location", location);
        facebook.put("id", "738124695");
        facebook.put("access_token", "AAADdF92joPABAKmRojBuXZAZAP"+
            "qF8ZAxM2bM"+
             "UnIErUSYZB85y5vIHAZDZD");
        facebook.put("expiration_date", "2013-07-07T 22:00:00Z");
        data.put("facebook", facebook);

        System.out.println(" ---- data ----- "+data);

        StringEntity stringEntity = new StringEntity(data.toString());
        httpost.setEntity(stringEntity);
        try {
            response = client.execute(httpost);
            System.out.println(" --- response --- "+response);
            HttpEntity entity = response.getEntity();
            // If the response does not enclose an entity, there is no need
            // to worry about connection release
            if(entity != null) {
                // A Simple Response Read
                InputStream instream = entity.getContent();
                String result = convertStreamToString(instream);
                System.out.println(" ---- result ---- "+result);

                // Closing the input stream will trigger connection release
                instream.close();
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    } catch (JSONException e) {
        e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    }
} 
```

这是一个不受信任的网络，因此，我在[此](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https)链接中做了类似下面的操作。

```
private static HttpClient getNewHttpClient() {
    try {
        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
        trustStore.load(null, null);

        SSLSocketFactory sf = new MySSLSocketFactory(trustStore);
        sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        registry.register(new Scheme("https", sf, 443));

        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);

        return new DefaultHttpClient(ccm, params);
    } catch (Exception e) {
        return new DefaultHttpClient();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T07:15:13.083

```
 BufferedReader in = null;
    StringBuffer sb = new StringBuffer();
    BufferedReader inPost = null;

    try {
        DefaultHttpClient httpclient = new DefaultHttpClient();

            HttpPost httpost = new HttpPost(mURL);

            httpost.setHeader("Accept","*/*");
            httpost.setHeader("Content-Type", "application/x-www-form-urlencoded");

            List <NameValuePair> nvps = new ArrayList<NameValuePair>();
            nvps.add(new BasicNameValuePair("testkey1", "myvalue1"));
            nvps.add(new BasicNameValuePair("testkey2", "myvalue2"));

            httpost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));

            HttpResponse response = httpclient.execute(httpost);
            HttpEntity entity = response.getEntity();

            inPost = new BufferedReader(new InputStreamReader(entity.getContent()));
            String linePost = "";
            String NLPOST = System.getProperty("line.separator");
            while ((linePost = inPost.readLine()) != null) {
                sb.append(linePost + NLPOST);
            }
            inPost.close();
            if (entity != null) {
                entity.consumeContent();
            }

        httpclient.getConnectionManager().shutdown(); 
```

还有更多关于这个链接.. [http://www.softwarepassion.com/android-series-get-post-and-multipart-post-requests/](http://www.softwarepassion.com/android-series-get-post-and-multipart-post-requests/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T17:51:09.247

经过一段时间的努力，我找到了解决问题的方法。现在，使用`MultipartEntity`，我可以将数据发送到服务器，如下所示。

```
 HttpClient httpClient = getHttpClient();

    HttpPost httpost = new HttpPost("https://sample.com/api/posts");
    MultipartEntity mpEntity = new MultipartEntity();
    ContentBody cbFile1 = new FileBody(new File("file.png"), "image/png");
    mpEntity.addPart("image", cbFile1);

    ContentBody cbFile2 = new FileBody(new File("file.svg"), "image/svg+xml");
    mpEntity.addPart("svgz", cbFile2);

    ContentBody cbFile3 = new StringBody(getJsonData().toString(), "application/json", Charset.forName("UTF-8"));
    mpEntity.addPart("json", cbFile3);

    httpost.setEntity(mpEntity); 
```

# javascript - 懒惰地向 ext js 应用程序添加第三方库（仅在需要时）

> ID：14315947
> 
> 赞同：6
> 
> 时间：2013-01-14T09:35:52.703
> 
> 标签：javascript, extjs, extjs4

我想懒惰地将第三方js添加到sencha应用程序中，仅在渲染新窗口时，例如单击按钮时，会弹出一个新窗口，并且在发生这种情况时也会加载d3.js库js。

为了在 Ext js 中加载一个新文件，我们可以使用 requires 键：

```
requires : ['MyApp.stores.UserStore'] 
```

如[extjs 文档](http://www.sencha.com/blog/using-ext-loader-for-your-application/)中所述。我们也可以为第三方库做这样的事情吗？

PS - 我正在使用 Ext Js 4.1.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T10:59:00.433

**更新**

您应该能够使用**Ext.Loader 加载几乎任何东西。[loadScript(options)](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Loader-method-loadScript)**该方法还提供了一个在加载完成时调用的回调。

* * *

基本上你可以加载任何东西，只要它是每个文件的一个 ExtJS 类（我必须承认我从未尝试过其他任何东西！）。您可以使用注册其他路径

```
Ext.Loader.setPath('EL','your/path/name'); // not done in the example below! 
```

只要为此配置了加载器，并且在运行时需要一些东西就非常容易。`Ext.ux.statusbar.StatusBar`以下是一个示例，它在运行时从另一个域和一个完整的新路径加载。这是**[JSFiddle](http://jsfiddle.net/sran/czrt6/32/)** - 只需单击按钮并加载类，然后应用`addDocked`

```
Ext.Loader.setPath(  'Ext', 'http://docs.sencha.com/ext-js/4-1/extjs-build/examples');
Ext.create('Ext.Panel', {
    width: 200,
    height: 200,
    renderTo: Ext.getBody(),
    tbar: {
      xtype: 'statusbar',
      statusAlign: 'right',
        items: [
          {
            xtype: 'button', 
            text: 'show window', 
            id: 'ani-target', 
            handler: function(btn) { 
              if (btn.up('panel').down('window').isVisible()) {
                btn.up('panel').down('window').hide();
                btn.setText('maximize');
              }else {
                btn.up('panel').down('window').show();
                btn.setText('minimize');
                Ext.define('Ext.ux.custom.StatusBar',{
                  extend: 'Ext.ux.statusbar.StatusBar',
                  alias: 'widget.cstatus',
                  requires: ['Ext.ux.statusbar.StatusBar'],
                  text: 'Ready',
                  initComponent: function() {
                    this.callParent(arguments);
                  }
                });
                btn.up('panel').down('window').addDocked({ xtype: 'cstatus'});
              } 
            }
          }
        ],
    },
  items: [{
    xtype: 'window',
    closable: false,
    width: 100,
    height: 100,
    id: 'demo-win',
    animateTarget: 'ani-target'
  }]
}) 
```

# c# - 在 Windows Azure Marketplace 中使用 Bing Search API 根据日期使用新闻服务操作和 NewsSortBy 和 c 锐化代码获取最新消息

> ID：14315950
> 
> 赞同：1
> 
> 时间：2013-01-14T09:35:56.733
> 
> 标签：c#, bing

我需要一种在 Windows Azure Marketplace 中使用带有 bing 搜索 API 的 kby Date 来获取最新消息（例如最近 24 小时）的 c sharp 代码，或任何其他方式来控制新闻服务操作检索到的新闻更新（仅当天的最新消息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:10:27.410

这是[Bing API v2 参考](http://msdn.microsoft.com/en-us/library/dd251056.aspx)。
这是[如何检索 News](http://msdn.microsoft.com/en-us/library/dd251089.aspx)的代码示例。
请注意，代码示例是用 JS 编写的，但它们看起来非常清晰，可以轻松转换为 c#。

**ps**我没有明确地写一段代码`get the news for last 24 hrs`，但是有这么好的事情：

```
for (var i = 0; i < results.length; ++i)
{     
            // omitted to make answer shorted

            resultStr = "<a href=\""
                + results[i].Date   // <--               
            // omitted to make answer shorted

} 
```

**更新：如何仅获取过去 24 小时的新闻**

我看到了通过以下方式获取过去 24 小时新闻的解决方案：

让我们定义`stale news item`为 24 小时框架内的天数，而“新鲜”则相反。

1.  获取前 N 个新闻项目（假设 N 的初始值为 50）。
2.  如果结果不包含陈旧的新闻项目 - 然后检索*下一个*(*) N 个新闻项目并重复此操作，直到结果中出现陈旧的新闻。
3.  忽略陈旧的。Assing N = 新鲜新闻的数量。

4.  下次每次重复步骤 2-3 以获取最新消息。

**免责声明**请注意，该算法在性能方面远非最佳，它只是为了展示主要思想。

`*`如何加载*下 N 个新闻项目*。应该可以通过“$top”和“$skip”查询选项将数据加载为页面来实现。[快速入门指南](https://skydrive.live.com/view.aspx?resid=9C9479871FBFA822!112&app=Word&authkey=!ANNnJQREB0kDC04)中的示例是如何获取新闻（“执行新闻服务操作”部分）。

```
// This is the query expression.    
string query = "Xbox Live Games";

// Create a Bing container.    
string rootUrl = "https://api.datamarket.azure.com/Bing/Search";

var bingContainer = new Bing.BingSearchContainer(new Uri(rootUrl));

// The market to use.    
string market = "en-us";

// Get news for science and technology.    
string newsCat = "rt_ScienceAndTechnology";

// Configure bingContainer to use your credentials.    
bingContainer.Credentials = new NetworkCredential(AccountKey, AccountKey);

// Build the query, limiting to 10 results.    
var newsQuery =

bingContainer.News(query, null, market, null, null, null, null, newsCat, null);

newsQuery = newsQuery.AddQueryOption("$top", 10);

// Run the query and display the results.

var newsResults = newsQuery.Execute();

foreach (var result in newsResults)

{

Console.WriteLine("{0}-{1}\n\t{2}",

result.Source, result.Title, result.Description);

} 
```

注意线路`newsQuery = newsQuery.AddQueryOption("$top", 10);`。应该可以（不确定是否可以）指定`"$skip"`选项，这使您能够使用分页功能。

希望这可以帮助。

# python - 如何在 SCons 配置中运行外部脚本

> ID：14315953
> 
> 赞同：0
> 
> 时间：2013-01-14T09:36:08.183
> 
> 标签：python, scons

我有一个脚本（Python）来检查我是否安装了正确的模块以及它们是否是最新的——至少是某个版本。我想在 scons[配置](http://www.scons.org/wiki/SconsAutoconf)阶段运行这个脚本。我试过类似的东西：

```
print 'Configuring... '
conf = Configure(env)
print 'Checking Python modules ', 
ret = conf.TryRun("""#!/usr/bin/env python
print 'ook' # test
import my_script
my_script.run()
""", '.py')
if ret == (0, ''):
    print 'Fail'
    sys.exit(2)
env = conf.Finish() 
```

但我得到的只是`(0, '')`这意味着 TryRun 失败了，但我看不出它为什么会失败！关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:48:13.567

这可以解决问题，但不是很优雅：

```
from subprocess import call
if call(os.path.join(os.getcwd(), 'my_script.py')):
    sys.exit(2) 
```

我仍在寻找更优雅的解决方案。

# vaadin - Vaadin 调用通过另一个组件创建一个组件

> ID：14315954
> 
> 赞同：1
> 
> 时间：2013-01-14T09:36:24.930
> 
> 标签：vaadin, custom-component

我有一个带有 a`textField`和 a的自定义组件`button`，我想`onClick`（按钮的）从 中获取文本`textField`并调用另一个组件。

我调用时得到的错误`mainLayout.addComponent(new A(textField.getValue());`是 `java.lang.IllegalStateException:`组合根必须在`com.example.vaadpro`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:47:52.773

正如例外所说，您必须为您的 CustomComponent 调用 setCompositionRoot：

```
public class A extends CustomComponent {

  HorizontalLayout layout = new new HorizontalLayout(); 

  public A() {
    layout.add(new Label("Hello world!"));
    layout.add(new Button("Click me!"));

    setCompositionRoot(layout); // This is needed!
   }
} 
```

# e-commerce - Opencart发票未显示MRP？

> ID：14315957
> 
> 赞同：1
> 
> 时间：2013-01-14T09:36:42.997
> 
> 标签：e-commerce, opencart

Opencart Invoice 不显示 MRP，它仅在 MRP 和特价之间选择最低价格，并在发票中显示为价格。任何机构都可以告诉我如何在发票中进行 MRP 实施。

提前致谢

# sql - 查询给定范围内的返回日期

> ID：14315959
> 
> 赞同：-1
> 
> 时间：2013-01-14T09:36:59.253
> 
> 标签：sql, oracle

我有这个看起来像这样的表：

```
PersonnelId 
AbsenceReason 
AbsenceFrom 
AbsenceTo 
```

现在我想要一个返回以下结果的查询。我提供了一个日期范围，无论该人是否缺席，它都应返回所有日期。例如 ：

```
PersonnelId = 4
AbsenceReason = Holiday
AbsenceFrom = 2/12/2012
AbsenceTo = 10/12/2012 
```

当我运行查询时，我将 12 月份作为输入。我希望结果显示以下内容：

```
1/12/2012 "Available" 
2/12/2012 "Holiday" 
3/12/2012 "Holiday"
...
11/12/2012 "Available"
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:01:02.457

像这样的东西：

```
SQL> create table person (PersonnelId primary key, AbsenceReason , AbsenceFrom , AbsenceTo)
  2  as
  3  select 4, 'Holiday', '2/12/2012', '10/12/2012'
  4  from dual;

Table created. 
```

只需设置`to_date('12-2012', 'mm-yyyy')`适用的月/年：

```
SQL> with mon as (select d
  2                 from (select to_date('12-2012', 'mm-yyyy') + rownum - 1 d
  3                         from dual
  4                       connect by level <= 31)
  5               where trunc(d, 'mm') = to_date('12-2012', 'mm-yyyy'))
  6  select personnelId, m.d,
  7         case
  8           when m.d between p.AbsenceFrom and p.AbsenceTo then 'Holiday'
  9           else 'Available'
 10         end absent
 11    from mon m
 12         cross join person p
 13   order by 1, 2;

PERSONNELID D          ABSENT
----------- ---------- ---------
          4 01/12/2012 Available
          4 02/12/2012 Holiday
          4 03/12/2012 Holiday
          4 04/12/2012 Holiday
          4 05/12/2012 Holiday
          4 06/12/2012 Holiday
          4 07/12/2012 Holiday
          4 08/12/2012 Holiday
          4 09/12/2012 Holiday
          4 10/12/2012 Holiday
          4 11/12/2012 Available
          4 12/12/2012 Available
          4 13/12/2012 Available
          4 14/12/2012 Available
          4 15/12/2012 Available
          4 16/12/2012 Available
          4 17/12/2012 Available
          4 18/12/2012 Available
          4 19/12/2012 Available
          4 20/12/2012 Available
          4 21/12/2012 Available
          4 22/12/2012 Available
          4 23/12/2012 Available
          4 24/12/2012 Available
          4 25/12/2012 Available
          4 26/12/2012 Available
          4 27/12/2012 Available
          4 28/12/2012 Available
          4 29/12/2012 Available
          4 30/12/2012 Available
          4 31/12/2012 Available 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:59:02.917

这对你有帮助吗？请试试：

```
SELECT date_col, NVL(AbsenceReason, 'Available') AS Reason 
FROM  (SELECT To_date('01-JUN-2012', 'dd-mon-yyyy') 
              + LEVEL - 1 AS date_col 
       FROM   dual 
       CONNECT BY LEVEL <= To_date('06-JUL-2012', 'dd-mon-yyyy') - 
                           To_date('01-JUN-2012', 'dd-mon-yyyy') + 
                                       1)d 
      left join yourtable t1 
             ON d.date_col BETWEEN t1.absencefrom AND t1.absenceto; 
```

在这个例子`'01-JUN-2012'`中是从日期开始`'06-JUL-2012'`到现在。

# oop - 在实体中自动填充数学相关的属性

> ID：14315965
> 
> 赞同：1
> 
> 时间：2013-01-14T09:37:34.130
> 
> 标签：oop, language-agnostic, getter-setter

假设我有一个代表电路的对象。

```
public class Circuit
{
  private int? resistance;
  private int? current;
  private int? voltage;
} 
```

鉴于`current = voltage/resistance`如果我知道其他两个，我可以计算未知属性。

我的第一个想法是，属性之间的关系自然应该内置到对象中。因此，在设置任何属性时，如果其他两个已知，则可以自动填充未知数。这将正常工作，直到出现所有属性都已设置并且需要修改的情况，从而导致混淆其他两个属性中的哪一个应该修改以强制执行关系。我认为此时需要将其他属性设置为 null 。

有这样的副作用的二传手是否被视为可接受的做法？是否有其他方式来加强这种关系？

**更多信息**

这是一个简化的表示。电阻也可以通过输入电线长度和直径以及电阻常数来确定，我也可以有瓦数和相位。我在数据绑定场景中工作，并且必须保持对象的状态。随着属性数量的增加以及它们之间的关系变得更加复杂，我的设置器变得有点失控。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:50:24.453

您的实际问题是您的假设是错误的：电路中的导体不是由其电阻，电流和电压定义的，而只是其中的任何两个：第三个（无论哪个）都由其他值所暗示。因此，您只需要两个属性来描述您的导体的完全确定的状态。让我们`resistance`为`voltage`简单起见。然后，为了强制电流和电压之间的关系，您可以编写：

```
public class Conductor
{
  private float resistance;
  private float voltage;

  public void setVoltage( float voltage )
  {
    this.voltage = voltage;
  }
  public float getVoltage()
  {
    return voltage;
  }

  public float getCurrent()
  {
    return getVoltage() / getResistance();
  }
  public void setCurrent( float current )
  {
    this.voltage = current * getResistance();
  }

  public void setResistance( float resistance )
  {
    this.resistance = resistance;
  }
  public void setResistance( float current, float voltage )
  {
    setResistance( voltage / current );
  }
  public float getResistance()
  {
    return resistance;
  }

} 
```

对于任何进一步的设置器，例如根据导线长度、直径和电阻常数设置导体的电阻，您不需要任何新属性（！），而只需要设置器本身：

```
 public void setResistance( float constant, float diameter, float length )
  {
    this.resistance = constant * length / ( 2 * Math.PI * diameter * diameter );
  } 
```

对于其他吸气剂也是如此：

```
 public float getResistanceConstant( float diameter, float length )
  {
    return ( getResistance() * ( 2 * Math.PI * diameter * diamter ) ) / length;
  } 
```

如果您仍然需要将直径存储为属性，则应`Wire`从派生一个类`Conductor`，因为并非每个导体的电阻都由其长度、直径和电阻常数定义，而仅由导线的电阻定义。但请记住：同样，您不需要将所有三个值都存储为参数，而只需要存储其中两个 - 第三个值已经隐式定义，因为您将阻力作为属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:43:33.233

您不应该在or setter中设置`current`属性。而是简单地计算getter 中的值。`resistance``voltage``current`

```
public class Conductor
{
  private int? resistance;
  private int? current() { return voltage/resistance; }
  private int? voltage;
} 
```

# php - 获取 YII 中的所有“页面”？

> ID：14315970
> 
> 赞同：8
> 
> 时间：2013-01-14T09:37:49.460
> 
> 标签：php, yii, sitemap

我正在尝试创建自己的 xml 站点地图。一切都完成了，除了我认为最简单的部分。您如何获得网站上所有页面的列表？我在 /site 文件夹和其他一些文件夹中有一堆视图。有没有办法明确地请求他们的 URL 或者通过控制器？

**我不想使用扩展程序**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-04T13:32:29.320

您可以使用反射来遍历所有控制器的所有方法：

```
Yii::import('application.controllers.*');
$urls = array();

$directory = Yii::getPathOfAlias('application.controllers');
$iterator = new DirectoryIterator($directory);
foreach ($iterator as $fileinfo)
{
    if ($fileinfo->isFile() and $fileinfo->getExtension() == 'php')
    {
        $className = substr($fileinfo->getFilename(), 0, -4); //strip extension
        $class = new ReflectionClass($className);

        foreach ($class->getMethods(ReflectionMethod::IS_PUBLIC) as $method)
        {
            $methodName = $method->getName();
            //only take methods that begin with 'action', but skip actions() method
            if (strpos($methodName, 'action') === 0 and $methodName != 'actions')
            {   
                $controller = lcfirst(substr($className, 0, strrpos($className, 'Controller')));
                $action = lcfirst(substr($methodName, 6));
                $urls[] = Yii::app()->createAbsoluteUrl("$controller/$action");
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:06:02.097

您需要知道要在 sitemap.xml 中包含哪些内容，我真的不认为您想在 sitemap.xml 中包含所有页面，或者您真的想要包含类似 site.com/article/edit 的内容/1 ?

也就是说，您可能只想要`view`控制器中操作的结果。事实是，您需要知道要索引的内容。

不要考虑控制器/操作/视图，而是考虑系统中您想要索引的资源，无论是文章还是页面，它们都在您的数据库中或以某种方式存储，因此您可以列出它们，并且它们有一个标识它们的 URI，获取 URI 是调用几个函数的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T14:49:55.250

有两种可能——

## 情况1：

您正在运行一个静态网站，然后您可以在 1 个文件夹中找到所有 HTML - protected/views/site/pages [http://www.yiiframework.com/wiki/22/how-to-display-static-pages-in- yii/](http://www.yiiframework.com/wiki/22/how-to-display-static-pages-in-yii/)

## 案例二：

网站是动态的。生成和重新生成站点地图等任务可以归类为后台任务。

运行后台任务可以通过在 linux 中使用 - **WGET**、**GET**或**lynx**命令模拟浏览器来实现

或者，您可以将 CronController 创建为**CConsoleCommand**。如何在 YII 中使用命令显示在下面的链接中 - [http://tariffstreet.com/yii/2012/04/implementing-cron-jobs-with-yii-and-cconsolecommand/](http://tariffstreet.com/yii/2012/04/implementing-cron-jobs-with-yii-and-cconsolecommand/)

站点地图是一种 XML，它列出了您网站的 URL。但它的作用不止于此。它可以帮助您可视化网站的结构，您可能有

*   类别
*   子类别。

在进行有用的***扩展***时，可以在设计之前考虑以上几点。

**像Wordpress**这样的框架提供了生成分类站点地图的方法。因此，每个页面的元数据都是从之前存储的，并使用它发现和分组页面的元数据。

***@Pavle***建议的反射解决方案很好，应该是要走的路。考虑可能存在**部分视图**，您可能希望也可能不希望将它们列为单独的链接。

因此，您想为创建扩展付出多少努力也取决于其中一些。

您可以要求用户列出 config fie 中的所有变量并从那里开始，这还不错**，或者**您必须使用*反射*和*解析*页面等技术对页面和列表进行分组并查找*regex*。

例如 - 基于模块名称，您可以先将它们分组，模块内的控制器可以形成子组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-04T16:14:27.667

第一种方法可能是遍历视图文件，但是您必须考虑到在某些情况下，视图不是页面目标，而是通过 using[`CController::renderPartial()`](http://www.yiiframework.com/doc/api/1.1/CController#renderPartial-detail)方法包含在另一个页面中的页面部分。通过探索 CController 的 Class Reference，我发现了这个[`CController::actions()`](http://www.yiiframework.com/doc/api/1.1/CController#actions-detail)方法。

所以，我还没有找到任何*Yii 方法*来迭代 CController 的所有操作，但我使用 php 在我的一个项目中迭代 SiteController 的所有方法，并使用前缀“action”将它们过滤到这些方法，这是我的动作前缀，这是示例

```
class SiteController extends Controller{
    public function actionTest(){
        echo '<h1>Test Page!</h1></p>';
        $methods = get_class_methods(get_class($this));
        // The action prefix is strlen('action') = 6
        $actionPrefix = 'action';
        $reversedActionPrefix = strrev($actionPrefix);
        $actionPrefixLength = strlen($actionPrefix);
        foreach ($methods as $index=>$methodName){
            //Always unset actions(), since it is not a controller action itself and it has the prefix 'action'
            if ($methodName==='actions') {
                unset($methods[$index]);
                continue;
            }
            $reversedMethod = strrev($methodName);
            /* if the last 6 characters of the reversed substring === 'noitca', 
             * it means that $method Name corresponds to a Controller Action,
             * otherwise it is an inherited method and must be unset.
             */
            if (substr($reversedMethod, -$actionPrefixLength)!==$reversedActionPrefix){
                unset($methods[$index]);
            } else $methods[$index] = strrev(str_replace($reversedActionPrefix, '', $reversedMethod,$replace=1));
        }
        echo 'Actions '.CHtml::listBox('methods', NULL, $methods);
    }
    ...
} 
```

我得到的输出是..

![ListBox 中的所有动作！](../Images/7257dc5eb59ef3e979f033e822501cf2.png)

我确信它可以进一步完善，但这种方法应该适用于你拥有的任何控制器......

所以你要做的是：

对于每个Controller：过滤掉该类的所有非动作方法，使用上述方法。您可以构建一个关联数组，例如

```
array(
    'controllerName1'=>array(
        'action1_1',
        'action1_2'),
    'controllerName2'=>array(
        'action2_1',
        'action2_2'),
); 
```

为此，我会在我的 SiteController 中添加一个静态方法 getAllActions()。

[get_class_methods](http://php.net/manual/en/function.get-class-methods.php)、[get_class](http://php.net/manual/en/function.get-class.php)、[strrev](http://php.net/manual/en/function.strrev.php)和[strlen](http://php.net/manual/en/function.strlen.php)都是 PHP 函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T07:44:22.860

根据您的问题： 1\. 您如何获得网站上所有页面的列表？

基于 Yii 的 module/controller/action/action_params 的方式，你需要为 SEO 构建一个站点地图。

1.  由于您的操作参数无限变化，因此很难自动解析以获取所有网址。虽然您可以简单地获得由 Pavle Predic 构建的控制器/动作。当您为 SEO 定制 (SERF) URL 规则时，复杂性就会出现。

下一个最佳解决方案是拥有一个内容数据库，并且您知道如何通过 url 规则获取每个内容，然后是一个 cron 控制台作业来创建所有要保存为 sitemap.xml 的 url。

希望这可以帮助！

# ms-access - 对 Access Web 数据库中的事件运行 VBA 代码

> ID：14315974
> 
> 赞同：2
> 
> 时间：2013-01-14T09:38:06.470
> 
> 标签：ms-access, vba

我从 Office.com 模板（文件 --> 新建 --> Office.com 模板）中获取了一个已经设置好的数据库，因为这个模板已经满足了我 80% 的要求。

然后我更改了这个模板的最后 20%，我进入以下内容： 看起来这个模板是一个 Web 数据库。我完全不确定 Access 中的 Web 数据库和普通数据库的区别，但我确实发现，它们不允许我运行 VBA 代码。至少当我试图通过事件调用它时不会。

有什么办法可以做到这一点吗？或者是否有任何其他方法，例如将网络数据库转换为普通数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:00:21.940

实际上，您可以从表单事件代码中调用 VBA 代码。但是，它需要一点技巧。

但是，您不需要在您的情况下执行此操作。

请注意，您可以在 Web 应用程序中创建客户端对象并使用客户端 VBA 代码。

这意味着您可以将 VBA 表单添加/混合到该应用程序中（这些客户端对象当然不能在 Web 浏览器中运行，但它们可以在客户端中使用）。

建议#1：隐藏记录导航按钮。

以布局模式打开 Web 表单。移动一个对象（弄脏设计）。

为 VBA 命令提示符敲击 ctrl-g。输入这个：

```
forms(0).NavigationButtons = False 
```

现在，保存表单。记录导航设置将与表单一起保存。

建议 #2：使用 VBA 打开 Web 表单。使用此代码：

```
DoCmd.OpenForm "AssetsDetails"
Forms("AssetsDetails").NavigationButtons = False 
```

建议 #3：从表单加载事件中调用 VBA 代码。这有点麻烦，但确实有效：

在表单打开事件中，放置此宏代码：

```
OpenForm (frmRunVBA,,,Dialog) 
```

请注意，在上面的 WEB MACRO 编辑器中，名为 frmRunVBA 的 VBA 表单不会出现在下拉选择列表中 - 但您可以在名称中键入/强制 - 这是合法的。

现在创建一个名为 frmRunVBA 的 VBA 表单。在表单加载事件中，放置以下代码：

```
Private Sub Form_Load()

   Forms("AssetDetails").NavigationButtons = False
   DoCmd.Close acForm, Me.Name

End Sub 
```

所以你可以调用VBA代码，但如果你使用tip#1，你真的不需要。

# r - 如何按 ID、日期和时间排序数据框？

> ID：14315981
> 
> 赞同：2
> 
> 时间：2013-01-14T09:38:29.920
> 
> 标签：r, date, time

我在R中有这个，我想把每个ID号放在一起，然后按日期排序，最后按时间排序……这可能吗？

```
 ID Val      Date  Time
1   1 0.7 1/13/2013 12:00
2   2 1.6 1/13/2013 12:00
3   3 0.5 1/13/2013 12:00
4   4 2.1 1/13/2013 12:00
5   5 1.2 1/13/2013 12:00
6   1 1.0 1/13/2013 13:00
7   2 1.1 1/13/2013 13:00
8   3 0.9 1/13/2013 13:00
9   4 2.4 1/13/2013 13:00
10  5 0.8 1/13/2013 13:00 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T09:51:15.327

`order`可以采用多个参数来做到这一点：

```
df <- read.table(text="ID Val      Date  Time
1   1 0.7 1/13/2013 12:00
2   2 1.6 1/13/2013 12:00
3   3 0.5 1/13/2013 12:00
4   4 2.1 1/13/2013 12:00
5   5 1.2 1/13/2013 12:00
6   1 1.0 1/13/2013 13:00
7   2 1.1 1/13/2013 13:00
8   3 0.9 1/13/2013 13:00
9   4 2.4 1/13/2013 13:00
10  5 0.8 1/13/2013 13:00",header=TRUE)

df[with(df,order(ID,Date,Time)),] 
```

请注意，我还没有在这里转换`Date`并转换`Time`为适当的时间课程，这将产生更好的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T10:32:16.673

`orderBy`来自 doBy 包是另一种选择：

```
> library(doBy)
> orderBy(~ID+Date+Time, data=DF) 
```

# grails - Grails Spring 安全插件 + 多种安全配置

> ID：14315984
> 
> 赞同：1
> 
> 时间：2013-01-14T09:38:56.313
> 
> 标签：grails, spring-security, grails-plugin

我们在我们的 grails 应用程序中使用了 Spring Security 插件。我们将 useBasicAuth 设置为 true，因为我们使用 Spring Security 来确保我们的休息调用由受信任的来源调用。

现在我们需要在我们的系统中添加一个用户管理部分，用户可以使用他们的凭据登录。将 useBasicAuth 设置为 true，如果用户会话超时，将出现弹出对话框并要求用户重新输入其凭据

对于我们的应用程序，我们真的不想要这个。是否可以进行多个设置，其中 useBasicAuth 设置为 true 以用于其余调用，但我们可以为通过浏览器登录的用户使用我们自己的自定义表单？或者是否仍然可以使用 BasicAuth 并将通过浏览器登录的用户重定向到我们的自定义登录表单？

谢谢达米安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:46:46.287

如果您想对除管理员控制器之外的所有用户进行基本身份验证，请在 Config.groovy 中使用以下内容。它拒绝此控制器中的 basicAuthenticationFilter。标准安全应该适用于这个页面就是这种情况。

```
grails.plugins.springsecurity.filterChain.chainMap = [
    '/admin/**': 'JOINED_FILTERS,-basicAuthenticationFilter,-basicExceptionTranslationFilter',
    '/**': 'JOINED_FILTERS,-exceptionTranslationFilter'
] 
```

文档中的更多信息：链图下的[http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/16%20Filters.html 。](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/16%20Filters.html)

# web-applications - 服务器页面在登录前重定向到 Filer

> ID：14315994
> 
> 赞同：2
> 
> 时间：2013-01-14T09:39:19.587
> 
> 标签：web-applications, glassfish, java-ee-6

我刚刚部署了一个具有登录页面的应用程序。然而，在使用“正确”密码和“用户名”登录时，index.xhtml 会出现错误并始终重定向到已配置的过滤器（会话超时）。重定向的原因是什么？我检查了会话是否无效，但事实并非如此。这是设置了过滤器的 web.xml(part)。

错误：

```
 javax.faces.application.ViewExpiredException: viewId:/index.xhtml - Ansicht /index.xhtml konnte nicht wiederhergestellt werden.
        at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:205)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
        at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
        at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
        at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
**********at **global.SessionTimeoutFilter.doFilter(SessionTimeoutFilter.java:53)** --> in code snippet below*
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722) 
```

这里是 web.xml：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <!--
        <param-value>Development</param-value>
        -->
        <param-value>Production</param-value>
    </context-param>
    <context-param>
        <!-- settings for file upload -->
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>30</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>30</session-timeout>
        <cookie-config>
            <http-only>true</http-only>
            <secure>true</secure>
            <!-- sessionIDs are secure - look at:
                 http://www.java.net/node/703357 -->
        </cookie-config>
        <tracking-mode>COOKIE</tracking-mode>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>
    <filter>
        <filter-name>SessionTimeoutFilter</filter-name>
        <filter-class>global.SessionTimeoutFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>SessionTimeoutFilter</filter-name>
        <url-pattern>*.xhtml</url-pattern>
    </filter-mapping>
    <error-page>
        <exception-type>javax.faces.application.ViewExpiredException</exception-type>
        <location>/timeout.xhtml</location>
    </error-page>

    <error-page> 
        <exception-type>java.lang.Throwable</exception-type> 
        <location>/error.xhtml</location> 
    </error-page>
    -->
    <security-constraint>
        <display-name>Restrict XHTML Documents</display-name>
        <web-resource-collection>
            <web-resource-name>XHTML</web-resource-name>
            <url-pattern>*.xhtml</url-pattern>
        </web-resource-collection>
    </security-constraint> 
```

这是过滤器代码：

```
 public class SessionTimeoutFilter implements Filter {

        //private String timeoutPage = "timeout.xhtml";
        private String timeoutPage = "index.xhtml";

        @Override
        public void init(FilterConfig filterConfig) throws ServletException {
        }

        @Override
        public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) 
                throws IOException, ServletException {
            if ((request instanceof HttpServletRequest) && (response instanceof HttpServletResponse)) {
                HttpServletRequest httpServletRequest = (HttpServletRequest) request;
                HttpServletResponse httpServletResponse = (HttpServletResponse) response;
                // is session expire control required for this request?
                if (isSessionControlRequiredForThisResource(httpServletRequest)) {

                    // is session invalid?
                    if (isSessionInvalid(httpServletRequest)) {
                        String timeoutUrl = httpServletRequest.getContextPath() + "/" + getTimeoutPage();
                        //System.out.println("Session is invalid! redirecting to timeoutpage : "+timeoutUrl);

                        httpServletResponse.sendRedirect(timeoutUrl);
                        return;

                    }
                }
            }
   **Line 53: ERROR here-->**         filterChain.doFilter(request, response);
        }

        private boolean isSessionControlRequiredForThisResource(HttpServletRequest httpServletRequest) {
            String requestPath = httpServletRequest.getRequestURI();
            boolean controlRequired = !StringUtils.contains(requestPath, getTimeoutPage());

            return controlRequired;
        }

        private boolean isSessionInvalid(HttpServletRequest httpServletRequest) {
            boolean sessionInValid = (httpServletRequest.getRequestedSessionId() != null) 
                    && !httpServletRequest.isRequestedSessionIdValid();
            return sessionInValid;
        }

        @Override
        public void destroy() {
        }

        public String getTimeoutPage() {
            return timeoutPage;
        }

        public void setTimeoutPage(String timeoutPage) {
            this.timeoutPage = timeoutPage;
        }

    } 
```

请指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:06:00.783

问题是这一行：

```
<filter-mapping>
   <filter-name>SessionTimeoutFilter</filter-name>
   <url-pattern>*.xhtml</url-pattern>
</filter-mapping> 
```

尝试更改不包含您的登录页面或 index.xhtml 的 url 模式。